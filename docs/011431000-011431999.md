# StackOverflow 问答 11431000-11431999

# c# - 使用 EntityFramework 进行搜索

> ID：11431003
> 
> 赞同：1
> 
> 时间：2012-07-11T10:47:47.390
> 
> 标签：c#, linq, entity-framework

我正在尝试使用学生的姓名、电子邮件或手机搜索学生的详细信息。为此，我为名称、电子邮件和移动设备设置了三个文本框。

在我的代码中，我试图获取这些详细信息，例如，

```
DataObject entities=new DataObject();

foreach (DataObject.Student student in entities.students.Where(p => 
          (p.FIRSTNAME+p.LASTNAME).Contains(txtName.Text)
          || p.MOBILE.Contains(txtMobile.Text)
          || p.EMAIL.Contains(txtEmail.Text))
        {
            //
        } 
```

在这里，如果我`sham`在电子邮件或姓名文本框中输入，它会列出数据库中可用的所有学生详细信息，而不是仅列出学生姓名或电子邮件包含`sham`。

当我调试这个时，我尝试`sham,sham,sham`为 name,mobile 和 email 它的列表完美地提供相同的值，如果我想按包含 的 name 搜索`sham`，如果我输入`sham`name 以及 email 和 mobile 中的任何其他内容，这也很完美....

我从中了解到的一件事是，它期望所有参数都应该有一些值，我不知道为什么会这样期望，我不知道如何解决这个问题，谁能在这里帮助我。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:42:28.873

也许，每个字符串都“包含”一个空字符串，因此如果某些文本框为空，则某些“或”条件将为`true`每个学生姓名返回，并且您将获得所有学生。尝试将查询更改为：

```
foreach (DataObject.Student student in entities.students.Where(p => 
         ((txtName.Text != string.Empty)
             ? (p.FIRSTNAME+p.LASTNAME).Contains(txtName.Text)
             : false)
      || ((txtMobile.Text != string.Empty)
             ? p.MOBILE.Contains(txtMobile.Text)
             : false)
      || ((txtEmail.Text != string.Empty)
             ? p.EMAIL.Contains(txtEmail.Text)
             : false))
{
    //
} 
```

您`XXX.Text != string.Empty`也可以尝试`string.IsNullOrEmpty(XXX.Text)`抓住`null`案件。但我不确定 LINQ to Entities 是否会接受这种方法。

**编辑**

`string.IsNullOrEmpty(XXX.Text)`与 LINQ to Entities 一起使用，我在自己的代码中发现了一个查询，可以毫无问题地使用它，因此检查空字符串和 for 的更好解决方案`null`是：

```
foreach (DataObject.Student student in entities.students.Where(p => 
         (!string.IsNullOrEmpty(txtName.Text)
             ? (p.FIRSTNAME+p.LASTNAME).Contains(txtName.Text)
             : false)
      || (!string.IsNullOrEmpty(txtMobile.Text)
             ? p.MOBILE.Contains(txtMobile.Text)
             : false)
      || (!string.IsNullOrEmpty(txtEmail.Text)
             ? p.EMAIL.Contains(txtEmail.Text)
             : false))
{
    //
} 
```

# module - Prestashop - 如何将现有模块显示到新钩子？

> ID：11431007
> 
> 赞同：1
> 
> 时间：2012-07-11T10:47:56.790
> 
> 标签：module, prestashop

我创建了一个新钩子，我想向该钩子添加一个现有模块（blocktopmenu）。

钩子的名字是：topMenu

我已将此添加到 blocktopmenu.php：

```
public function hookTopMenu($param)
  {
    global $smarty;
      $this->makeMenu();
      $smarty->assign('MENU_SEARCH', Configuration::get('MOD_BLOCKTOPMENU_SEARCH'));
      $smarty->assign('MENU', $this->_menu);
      $smarty->assign('this_path', $this->_path);
      return $this->display(__FILE__, 'blocktopmenu.tpl');
  } 
```

*   我已将模块添加到模块 --> 位置中的新钩子中。

*   然后我将它添加到 override/classes/FrontController.php：

    函数 displayHeader(){ 父::displayHeader();

    ```
     self::$smarty->assign(array(
                'HOOK_HEADER' => Module::hookExec('header'),
                'HOOK_TOP' => Module::hookExec('top'),
                'HOOK_TOP_MENU' => Module::hookExec('topMenu'),
                'HOOK_LEFT_COLUMN' => Module::hookExec('leftColumn')
            ));
        } 
    ```

最后在主题/mytheme/header.tpl 我有：

```
<div class="my_top_menu">{$HOOK_TOP_MENU}</div> 
```

但是什么也没发生……输出是：

```
<div class="my_top_menu"></div> 
```

知道如何得到它吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:14:09.960

您还需要更改模块中的安装功能以添加您的钩子：

```
public function install(){
    if (!parent::install() OR
        !$this->registerHook('header') OR
        !$this->registerHook('topMenu') )
        return false;
    return true;
} 
```

当然，之后您需要卸载并重新安装该模块。

# javascript - 如何获取点击标签的名称

> ID：11431008
> 
> 赞同：0
> 
> 时间：2012-07-11T10:48:03.730
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:51:02.313

问题是您没有加`name`引号，因此 Javascript 会查找名为的*变量*`name`但找不到。您应该将其更改为：

```
var n = $(this).attr("name"); 
```

除此之外，您`id`的 s 并不是唯一的。这是非法的，实际上保证将来会给您带来问题。按照@nbrooks 的建议，将过度使用的更改`id`为`class`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:50:50.660

使用引号作为属性名称

```
$(document).ready(function() {
$('#link').click(function() {
    var n = $(this).attr("name");   //alerts undefined <- quotes here
    alert(n);
    $('#results').html('&nbsp;').load('/donate/?n=' + n);
});
}); 
```

稍后编辑：不要使用重复的 ID ...改用类！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T10:51:07.400

您的两个链接都具有相同的`id`属性，HTML 规范要求这些属性是唯一的。jQuery 只给你一个元素。改用类属性/选择器组合：

```
<li><a class='link' href="#" name="Some name1 ">Some link1</a> </li>
<li><a class='link' href="#" name="Some name2">Some link2</a> </li>

$(".link").click(function() {
     var n1 = $(this).attr("name");  //Name should be a string here
     var n2 = this.name  //name should be a variable here
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T10:52:39.223

```
$('#link').click(function() {
   var n = $(this).attr("name"); 
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T10:52:04.237

首先把你的 li 改成这些

```
<li><a class='link' href="#" name="Some name1 ">Some link1</a> </li>
<li><a class='link' href="#" name="Some name2">Some link2</a> </li> 
```

使用 class 而不是 id，因为这违反了 CSS ..

然后将您的 jquery 更改为此

```
$(document).ready(function() {
$('.link').click(function() {
var n = $(this).attr('name');   //alerts undefined
alert(n);
$('#results').html('&nbsp;').load('/donate/?n=' + n);
});
}); 
```

采用 。而不是 # 和你的集合

# objective-c - IOS UITableViewCell Spacer（或margin）

> ID：11431009
> 
> 赞同：2
> 
> 时间：2012-07-11T10:48:10.277
> 
> 标签：objective-c, ios, xcode, uitableview

我试图在我的表格视图控制器上的表格自定义视图单元格之间留出一个空间。例如，对于创建的每个单元格，它都会一个一个地堆叠起来，并且没有边距。例如，在 facebook iPhone 应用程序上，我想创建的每个单元格后面都有一个间隔，有什么想法吗？

* * *

**编辑：来自下面的评论**

代码看起来像这样

```
MSRSalesCompanyCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier]; 
cell.backgroundView = [[CustomCellBackground alloc] init]; 
NSDictionary *company = [companies objectAtIndex:[indexPath row]]; 
cell.companyName.text = [company objectForKey:@"Name"]; 
cell.backgroundColor = [UIColor clearColor]; 
cell.backgroundView.bounds = CGRectMake(0, 0, 320, 55); 
[self loadImageAsync:cell withImageUrl:imageURL]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:47:55.603

检查我对类似问题的[回答](https://stackoverflow.com/a/10762047/792677)，它建议您在要分割的单元格之间创建不可见的单元格，并留有一些空间。

选项 2 是仅创建可见单元格，使其高度高于可见区域并准备特殊视图`content`和`selected`视图，请注意创建所选视图并不容易，您需要这样做，因为您可能不想要间距区域被选中，所以当需要获得一些单元格的间距时，我使用第一个选项。

第一个选项的主要（可能也是唯一）缺点是您必须以特殊方式处理单元格的索引以区分间距单元格和可见单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:09:38.157

如果您的 tableView 的 rowHeight 为 50 点，则将背景图像视图高度设为 40 点，并将其置于单元格中。然后让你的单元格背景颜色`[UIcolor clearColor]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:00:08.807

好吧，我做了这样的事情......

首先，将保存 Tableview 的 BGColor Of 视图设置为白色（这是我设计的个人选择），然后该`cellForRowAtIndexPath`方法看起来像这样。

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell;
    cell = nil;

    //Create Cell
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];    
    }

    //Retrive Values From DB
    DBTable_Description *dbObject = [[DBTable_Description alloc]init];
    dbObject = [contentList objectAtIndex:[indexPath row]];
    //Cell View
    UIView *cellView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 65)];
    //ImageView
    UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(4.0, 8.0, 300.0, 58.0)];
    imageView.userInteractionEnabled = NO;
    imageView.image = imgForCellBkg;
    //Label
    UILabel *lblFor = [[UILabel alloc]initWithFrame:CGRectMake(70, 25, 200, 21)];
    lblFor.text =dbObject.field1;
    lblFor.backgroundColor = [UIColor clearColor];
    lblFor.font = [UIFont fontWithName:@"Helvetica Neue" size:16];
    lblFor.textColor = [UIColor grayColor];
    lblFor.shadowColor = [UIColor grayColor];

    //Adding Views to Cell View
    [cellView addSubview:imageView];
    [cellView addSubview:lblFor];

    [cell.contentView addSubview:cellView];

    cell.selectionStyle = NO;
    return cell;

} 
```

好的首先忽略数据库代码。现在我所做的是我在每个单元格名称上创建了一个视图`cellView`（根据你的要求设置高度）接下来我有一个图像视图并设置了适当的图像（同样它可能不是你想要做的事情）但要注意CGRectMake 我根据我想要 bw 我的单元格的间隙量来设置值.. 其余的是通常的。

这是我在我的应用程序中的视图图像![明白我的意思....？？？](../Images/af56e43d60c6ce684caf126b97df294e.png)

让我知道它是否有效 干杯 W

# maven - Maven 自定义插件。数组 oj 自定义对象

> ID：11431010
> 
> 赞同：1
> 
> 时间：2012-07-11T10:48:14.017
> 
> 标签：maven, maven-2, maven-plugin

我想做成对的文件，看起来像

```
<configuration>
              <params>
                <param>
                  <wsdl>${basedir}/File1.wsdl</wsdl>
                  <result>D:/file1</result>
                 </param>
                 <param>
                  <wsdl>${basedir}/File2.wsdl</wsdl>
                  <result>D:/file2</result>
                </param>
               </params>
            </configuration> 
```

这是代码

```
 /**
 *
 * @goal merge 
 * @requiresProject true
 */
public class MavenPlugin extends AbstractMojo
{

    /**
        * 
        * @parameter
        * @requared
        */
       public List<TwoFiles> params;

       public void execute() throws MojoExecutionException, MojoFailureException
       {
          if (params == null || params.isEmpty())
          {
             throw new IllegalArgumentException("params is requared");
          } 

....  

public class TwoFiles
{

   public File wsdl;

   public File result;
} 
```

不能很好地工作。

有任何想法吗？

**回答：**

```
public class MainExecutor extends AbstractMojo
{
   /**
    * @parameter
    */
   private List<Param> params; 
```

...

```
public class Param
{
   public File wsdl;

   public File result;
} 
```

效果很好....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:01:28.423

您是否尝试过这样做：

```
<configuration>  
   <params>
     <param>
      <wsdl>${basedir}/File1.wsdl</wsdl>
      <result>D:/file1</result>
     </param>
     <param>
        <wsdl>${basedir}/File2.wsdl</wsdl>
        <result>D:/file2</result>
     </param>
   </params>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:45:07.217

我建议您实际上也为它创建一个对象`<params/>`。让它包含一个`Set<TwoFiles> params`. 我以前遇到过这个问题，这就是我解决它的方法。

这有点愚蠢，我同意。但是，集合的默认支持旨在用于更简单的类型，例如 String-s。除此之外，它并不是真正面向泛型的，Maven 并不能很好地处理猜测。

# python - 通过 http 识别 python 线程（使用 django）

> ID：11431013
> 
> 赞同：1
> 
> 时间：2012-07-11T10:48:24.153
> 
> 标签：python, django, multithreading, django-views

在我的 django 应用程序上，我有一个可能需要一些时间才能运行的报告（一个 csv 下载）。当用户运行报告时，他们将被重定向到“处理”页面，其中 javascript 函数每秒检查服务器以查看 csv 是否已创建（文件名包含在 HttpResponse 对象中）。

我正在寻找的是一种识别创建 csv 的线程的方法。这样我就可以`estimated_time_to_completion`向线程添加一个属性，并将此信息包含在保留页面中。事实上，我可以停止检查（解锁的）csv 是否存在——我可以询问线程是否完成。

我的 csv 构建线程看起来像 -

```
class CsvBuilder(threading.Thread):

    def __init__(self, file_name, parameters)
        self.file_name = file_name
        self.parameters = parameters
        threading.Thread.__init__(self)

    def run():
        # ...
        file = open(self.file_name, 'wb')
        writer = csv.writer(file)
        for patient in patients:
            writer.writerow('some data')
            self.time_remaining = # a timedelta object
        file.close() 
```

然后我的 django 请求看起来像 -

```
def create_csv(request):
    '''
    Standard django view to create a csv
    '''
    # get filename and parameters from request
    thread = CsvBuilder (file_name, parameters)
    return render_to_response('processing.html', {"thread_id": thread.thread_id})

def check_progress(request):
    '''
    An ajax call to check the progress on a report
    '''
    thread_id = requst.GET['thread_id']
    # find the thread 
    return HttpResponse(thread.time_remaining) 
```

这可能吗？还是我应该以不同的方式解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:56:05.523

使用专用的后台任务库可能是最简单和最安全的，它们是为这样的用例而设计的。python 最常见的是[Celery](http://celeryproject.org/)。它具有良好的 Django 支持，并且非常易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:57:16.113

我建议您让您的 writer 函数更新用于 time_remaining 计算的 memcached 键/值。

如果是我，我可能会在长期运行的工作中使用[Celery](http://celeryproject.org/)，从 django 启动一个线程似乎可能有陷阱，但没有什么特别的想法浮现在脑海中。

# ms-access - 行源查询中的参数

> ID：11431017
> 
> 赞同：1
> 
> 时间：2012-07-11T10:48:31.520
> 
> 标签：ms-access

我有一个组合框查询，它使用父项中的参数。当我第一次加载表单时，组合框为空，如果我转到设计视图并返回表单视图，组合框将填充正确的项目。

在寻找造成这种情况的原因时，我决定创建一个额外的文本字段，从同一个父项中检索相同的数据。在第一次启动时，该文本框被填充，而组合框保持为空。

我的最后一步是更改组合框查询参数以引用新创建的文本框。之后，之前工作的文本框也开始为空，并在进入设计视图并返回后填充。

我的假设 - 查询尝试在填充文本字段之前检索参数。请记住，我已经颠倒了主窗体和子窗体的加载顺序，[如此处所述。](https://stackoverflow.com/questions/11097227/expression-in-control-source-and-default-value) 我不知道再用谷歌搜索什么了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:31:46.840

您可以在主窗体的当前事件中重新查询组合，如下所示：

```
Me.Subform1.Form.MyCombo.Requery 
```

# gwt - 文本上方带有图标的 GWT 自定义按钮

> ID：11431020
> 
> 赞同：0
> 
> 时间：2012-07-11T10:48:45.290
> 
> 标签：gwt, button

我想创建一个带有图标和文本的按钮，其中图标位于文本上方。

寻找信息，我[从 Juri 找到了这个答案](https://stackoverflow.com/questions/1853042/creating-custom-button-in-gwt)。

有了它，我创建了自己的 SquareButton 类，如下所示：

```
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.resources.client.ImageResource;
import com.google.gwt.user.client.DOM;
import com.google.gwt.user.client.Element;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.Image;

/**
 * Square Button class
 * @author julio.palma.vazquez
 *
 */
public class SquareButton extends Button {

    /** Text to show. */
    private String text;

    /**
     * Constructor.
     */
    public SquareButton() {
        super();
    }

    public SquareButton(String text, ClickHandler clickHandler, ImageResource imageResource) {
        super(text, clickHandler);
        setResource(imageResource);
        setPixelSize(60, 60);
    }

    /**
     * Set image resource.
     * @param imageResource image resource
     */
    public void setResource(ImageResource imageResource){
        Image img = new Image(imageResource);
        String definedStyles = img.getElement().getAttribute("style");
        img.getElement().setAttribute("style", definedStyles + "; vertical-align:top;");
        DOM.insertBefore(getElement(), img.getElement(), DOM.getFirstChild(getElement()));
    }

    /**
     * Set text.
     * @param text text to show
     */
    @Override
    public void setText(String text) {
        this.text = text;
        Element span = DOM.createElement("span");
        span.setInnerText(text);
        span.setAttribute("style", "vertical-align:bottom; text-align: center;");

        DOM.insertChild(getElement(), span, 0);
   }

   /**
    * Get text.
    * @return text to show
    */
   @Override
   public String getText() {
       return this.text;
   }
} 
```

不幸的是，它不像我预期的那样工作，并在图像上方输出文本。

你能帮我一把吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:17:20.433

您可以在 Button 中设置 HTML。您可以尝试以下操作：

```
Button button = new Button();
String html = "<div><center><img src = '"+GWT.getModuleBaseURL()+"/images/img1.png' height = '10px' width = '10px'></img></center><label>Text</label></br></div>";
button.setHTML(html); 
```

为您的按钮和图像提供适当的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:47:52.883

您可以在下面看到 SquareButton 类，感谢您的帮助。

```
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.resources.client.ImageResource;
import com.google.gwt.user.client.ui.Button;

/**
 * Square Button class
 * @author julio.palma.vazquez
 *
 */
public class SquareButton extends Button {

    public SquareButton(String text, ClickHandler clickHandler, ImageResource imageResource) {
        super();
        String html = "<div><center><img src = '" +     imageResource.getSafeUri().asString() + "' height = '32px' width = '32px'></img></center><label>" + text + "</label></br></div>";
        addClickHandler(clickHandler);
        setHTML(html);
        setPixelSize(60, 60);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T02:52:47.327

您不需要自定义按钮。您可以使用 GWT 按钮、ImageResource 和 CSS 来完成此操作。诀窍是正确设置填充。例如，

```
Button btnHelp=new Button("Help");
btnHelp.setStyleName("buttonImageText");
// Separate style for each image resource
btnHelp.addStyleName("bgImageHelp"); 
```

在您的样式表中：（注意：padding-top 至少与您的图像高度一样大。）

```
.buttonImageText{
   background-repeat: no-repeat;
   background-position: 50% 0%;
   background-size: 20px 20px;
   background-color: transparent;
   border: none;
   margin: 0 15px;
   padding: 20px 0 0 0;
   text-align: center;
}

.bgImageHelp {
   background-image: helpUrl;
} 
```

您还在 CSS 文件中定义了：

```
@url helpUrl help; 
```

最后，在您的 Resources 类中，您已定义：

```
@Source("resources/images/help.png");
ImageResource help(); 
```

# node.js - NowJs 服务器不同于 Web 服务器

> ID：11431021
> 
> 赞同：1
> 
> 时间：2012-07-11T10:49:00.087
> 
> 标签：node.js, nowjs-sockets

我正在玩 nodejs 并专门研究 nowjs

我现在已经在运行节点的服务器上启动并运行，并且我有一个单独的 Web 服务器。我成功地让节点服务器返回客户端脚本，并在 Web 服务器上引用它。这将返回一个 200 响应代码，一切看起来都很好。但是，我收到 javascript 错误，告诉我“现在”未定义。据我了解，“现在”变量应该可以通过客户端脚本使用，但似乎并非如此。有谁知道这种设置是否可行？所以设置类似于下面的伪代码

```
 //Server 1 node.com
 if(request.url === '/nowjs/now.js'){
      var file = 'path_to_clientlib/now.js';
  fs.readFile(file, function(e, data) {

        if (e) {
           throw e;
        }

         response.writeHead(200,{'Content-Type': 'application/javascript'});
          response.end(data);
} 
```

和 server.com

```
 <script src="/jquery.js"></script>
   <script src="http://node.com/nowjs/now.js"></script> <!-- This is returned properly -->
   <script>
   $(document).ready(function(){

    now.receiveMessage = function(name, message){
      $("#messages").append("<br>" + name + ": " + message);
    }

   $("#send-button").click(function(){
     now.distributeMessage($("#text-input").val());
     $("#text-input").val("");
   });

   now.name = prompt("What's your name?", "");

   });
   </script>

  <div id="messages"></div>
  <input type="text" id="text-input">
  <input type="button" value="Send" id="send-button"> 
```

控制台立即返回“现在”未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:56:08.757

首先，有足够的模块提供静态文件服务支持，但如果你想手动提供文件，我会这样做......

```
var mime = require('mime')   // Get mime type based on file extension. use "npm install mime"
  , util = require('util')
  , fs = require('fs');

function serveFile(filename, res) {
  var filePath = process.cwd() + filename;
  var stat = fs.statSync(filePath);

  res.writeHead(200, {
     'Content-Type':mime.lookup(filePath),
     'Content-Length':stat.size
  });

  var readStream = fs.createReadStream(filePath);

  return util.pump(readStream, res);
}

// Your code... 
```

或者查看[NPM](http://search.npmjs.org/#/node-static)或[Github](https://github.com/cloudhead/node-static)上的模块**node-static**

关于如何使用 NowJS（[来自文档](https://github.com/Flotype/now#readme)）

在服务器上

```
var httpServer = require('http').createServer(function(req, response){ 

  // See code above how to serve static files...

});

httpServer.listen(8080);

var nowjs = require("now");
var everyone = nowjs.initialize(httpServer);

everyone.now.logStuff = function(msg){
  console.log(msg);
} 
```

在客户端

```
<script type="text/javascript" src="http://localhost:8080/nowjs/now.js"></script>

<script type="text/javascript">
  now.ready(function(){
    // "Hello World!" will print on server
    now.logStuff("Hello World!");
  });
</script> 
```

# iphone - 如何在iOS中获取带有图像的图表作为边界线？

> ID：11431026
> 
> 赞同：1
> 
> 时间：2012-07-11T10:49:25.320
> 
> 标签：iphone, ios, uiview, cgcontext

![在此处输入图像描述](../Images/de9bd2dbba1e56374b93db51096ec683.png)

我用边界点蓝线画了矩形图。我想用与边界线相同的图像制作矩形图。这意味着我想用图像替换点

我的代码：

```
- (void)drawRect:(CGRect)rect
{
    context =UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 0.0, 0.0, 1.0, 1.0);

    CGFloat dashPattern[10] = {3.0, 2.0};
    CGContextSetLineDash(context, 0, dashPattern, 2);
    CGContextSetRGBFillColor(context, 0.0, 1.0, 0.0, 1.0);

    CGContextSetLineWidth(context, 10.0);
    CGContextAddRect(context, self.bounds);
    CGContextDrawPath(context, kCGPathFillStroke);
    CGContextClosePath(context);
    CGContextStrokePath(context);
} 
```

我可以设置图像而不是点吗？请给我任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:00:46.650

我还没有尝试，但也许你可以使用：

```
CGContextSetStrokeColorWithColor(context, [UIColor colorWithPatternImage:myImage].CGColor); 
```

# codenameone - 代号一个人的 VKB 未在 android 构建中显示

> ID：11431027
> 
> 赞同：1
> 
> 时间：2012-07-11T10:49:30.387
> 
> 标签：codenameone

我在motorola atrix 上安装了一个代号为one 的android 版本。

现在我有一个文本字段。当我单击文本字段时，会显示 android 的键盘。

我不想要那个。我想展示[Codename One 的](http://www.codenameone.com)键盘（白色和透明）。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:31:34.187

有一个 API 被调用`Display.setDefaultVirtualKeyboard()`，但它可能不适用于 Android，因为默认情况下我们总是在 Android 上使用本机输入。键盘是较小的问题，这些操作系统上可用的复制/粘贴和其他功能是我们选择本机键盘的主要原因。

你可以提交一个错误，我们可以评估添加这样的东西的复杂性，但修复它可能会有点痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T03:19:54.360

好的，所以上面给出了 Shai 的评论：这就是我让 android 显示代号键盘的方式。

```
Textfield field = new TextField();

        VirtualKeyboard vkb = new VirtualKeyboard();
        VirtualKeyboard.bindVirtualKeyboard(field, vkb);//binding the vkb to a particular textfield
        Display.getInstance().setDefaultVirtualKeyboard(vkb); 
```

现在，textfield 的 datachange 监听器工作顺利。当文本字段获得焦点时，文本字段的提示也会清除。

# c# - 分隔符的正则表达式，数字除外

> ID：11431030
> 
> 赞同：0
> 
> 时间：2012-07-11T10:49:43.110
> 
> 标签：c#, regex

使用 C# 的 Regex.Split，我有一个正则表达式，可以找到单词之间的分隔符：

```
[\b\s\p{P}]+ 
```

在“**示例文本。另一个：单词**”上，它可以工作，并产生：**示例**| **正文**| **另一个**| **词**。伟大的！
在“**单词 120,000 另一个单词**”上，它产生：**单词**| **120** | **000** | **另一个**| **词**。不是很好！

如何更改正则表达式以使数字内的逗号不匹配？即，这样**120,000**不会破？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:05:30.347

我相信您会发现，随着额外需求的出现，这样做`Regex.Split`只会变得更加复杂。您可能会发现最好使用`Regex.Match`相反的方法（识别“整个单词”而不是逻辑“单词边界”）。

原因如下：

```
((?<=\p{L})\p{P}(?=\p{L}))|(\p{Z}|(?<=[\p{Z}\p{P}])\p{P}|\p{P}(?=[\p{Z}\p{P}]))+ 
```

不漂亮，所以让我们解释一下。首先，我已经`\s`用`\p{Z}`类（可见/不可见空格）替换了，因为为什么不呢。其次，这个正则表达式匹配四个不同的东西：

## #1：`(?<=\p{L})\p{P}(?=\p{L})`

这匹配夹在字母之间的标点符号。需要匹配`:`in `another:word`。这也是`+`量词不适用的唯一子模式（这没有任何意义）。正向环视用于断言字母的存在，但避免匹配它们。

## #2：`\p{Z}`

这匹配一系列空白。所有这些序列都会导致分裂。

## #3：`(?<=[\p{Z}\p{P}])\p{P}`

这匹配一个标点符号，该标点符号前面有除标点符号或空格以外的任何内容，使用正向向后查找。

## #4：`\p{P}(?=[\p{Z}\p{P}])`

这与上面的相反：它匹配一个标点字符，后跟标点符号或空格以外的任何内容。

因此，由于逗号`100,000`与上述任何一个都不匹配，因此该正则表达式不会拆分该令牌。但是您可以看到这是怎么回事：与其指定*要*作为一个标记保持在一起的符号，不如使用`Regex.Split`您必须指定...其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:19:18.950

试试这个：

```
(([\s\p{P}](?!\d))|((?<!\d)[\s\p{P}]))+ 
```

上半场

```
 ([\s\p{P}](?!\d)) 
```

匹配任何不跟随数字的分隔符和第二个 - 任何分隔符，不跟随数字。

# string - R：如何在采样后替换字符串中的字符并打印出字符而不是索引？

> ID：11431032
> 
> 赞同：0
> 
> 时间：2012-07-11T10:49:46.857
> 
> 标签：string, r, replace, sample

我想通过首先对字符进行采样来用另一个字符替换字符串中的一个字符。我无法让它打印出字符而不是索引。

示例数据，标记为“尝试”：

```
L   0.970223325 -   0.019851117 X   0.007444169
K   0.962779156 -   0.027295285 Q   0.004962779
P   0.972704715 -   0.027295285 NA  0
C   0.970223325 -   0.027295285 L   0.00248139
V   0.970223325 -   0.027295285 T   0.00248139 
```

我正在尝试使用加权概率对给定行的字符进行采样。

```
samp <- function(row) {
sample(try[row,seq(1, length(try), 2)], 1, prob = try[row,seq(2, length(try), 2)])
} 
```

然后，我想使用所选字符替换给定字符串中的位置。

```
subchar <- function(string, pos, new) {
paste(substr(string, 1, pos-1), new , substr(string, pos+1, nchar(string)), sep='')
} 
```

我的问题是 - 如果我这样做，例如

```
> subchar("KLMN", 3, samp(4))
[1] "KL1N" 
```

但我希望它读作“KLCN”。As.character(samp(4)) 也不起作用。如何让它打印出字符而不是索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:29:06.777

出现问题是因为您的字母存储为`factors`而不是`characters`，并且`samp`返回的是`data.frame`.

`C`是您因素中的第一个级别，因此存储为`1`内部，并且`as.character`（由`paste`语句调用）在处理 mini-data.frame 时将其拉出：

```
samp(4)
  V1
4  C
as.character(samp(4))
[1] "1" 
```

`data.frame`您可以通过 2 种方式解决此问题，或者在对 的`samp`调用中删除输出`subchar`，或者修改`samp`为这样做：

```
subchar("KLMN", 3, samp(4)[,1])
[1] "KLCN"

samp2 <- function(row) 
    { sample(try[row,seq(1, length(try), 2)], 1, prob = try[row,seq(2, length(try), 2)])[,1] 
    }

subchar("KLMN",3,samp2(4))
[1] "KLCN 
```

您可能还会发现在子集中进行采样更容易，并且可以从那里删除 data.frame：

```
samp3 <- function(row){
 try[row,sample(seq(1,length(try),2),1,prob=try[row,seq(2,length(try),2)]),drop=TRUE]
 } 
```

# c# - 属性网格下拉列表中的 C# SSIS 自定义控制流任务列表变量

> ID：11431036
> 
> 赞同：2
> 
> 时间：2012-07-11T10:49:56.420
> 
> 标签：c#, winforms, ssis, propertygrid

我第一次在 C# 中组合了一个自定义控制流 SSIS 任务。在我的任务 UI 编辑器上，我有一个属性网格，在其中一个选项中，我希望能够填充任何可用任务变量的下拉列表，并为用户提供创建新变量的选项。我已经研究了几天，我在论坛上找到了一些很好的例子，但我现在有点迷失了。我的代码如下编译，编辑器显示一个下拉列表，但它是空白的。逐步完成后，它似乎归结为这一行：

```
taskHostProperty = context.Instance.GetType().GetProperty("TransferTask", typeof(TaskHost));The "TransferTask" being the name of my control flow task.  I'm wondering if this is correct? 
```

我的完整代码如下。

```
//Property Grid Property
  [Category("General"),
            Description("Specifies the local Path for this task"),
            Browsable(true),
            ReadOnly(false),
            DesignOnly(false),
            TypeConverter(typeof(VariableConverter)),
            DisplayName("Local Path")]            
            public string LocalPath
            {
                get
                {
                    return this.stLocalPath;
                }
                set
                {                    
                    dtsVariableService = serviceProvider.GetService(typeof(IDtsVariableService)) as IDtsVariableService;
                    dtsVariableService.PromptAndCreateVariable(parentWindow, dtsContainer,"Local Path","User",typeof(string));
                    this.stLocalPath = value;
                }
            } 
//Variable Converter
internal class VariableConverter : TypeConverter
        {
            StandardValuesCollection svc = new StandardValuesCollection(new ArrayList());
            public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
            {
                return true;
            }
            public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
            {
                TaskHost taskHost = null;
                PropertyInfo taskHostProperty = null;
                List<string> values = new List<string>();
                values.Add(NEW_VARIABLE);
                if (context == null)
                {
                    return svc; 
                }
                if (context.Instance == null)
                {
                    return svc;
                }
                taskHostProperty = context.Instance.GetType().GetProperty("TransferTask", typeof(TaskHost));
                if (taskHostProperty == null)
                {
                    return svc;
                }
                taskHost = taskHostProperty.GetValue(context.Instance, null) as TaskHost;

                foreach(Variable v in taskHost.Variables)
                {
                    if (!v.SystemVariable && v.DataType == TypeCode.String)
                    {
                        values.Add(v.QualifiedName);
                    }
                }
                values.Sort();
                return new StandardValuesCollection(values);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:31:04.917

最后，我放弃了尝试将变量添加到属性网格，而是创建了自己的表单。在允许用户添加新的 SSIS 变量之后，我使用以下代码填充组合框。我刷新了数据源。我仍然想知道如何正确地做到这一点，但我只是没有时间坐下来解决它。我使用以下内容首先获取了我需要的 SSIS 变量，我能够添加一个新的 SSIS 变量，并且我能够选择新创建的变量。我确信有更好的方法可以做到这一点，但现在可行。

```
public ObservableCollection<string> FillVariableList()
        {
            ObservableCollection<string> variables = new ObservableCollection<string>();

            variables.Add(string.Empty);
            variables.Add(New_Variable);        

            foreach (Variable v in thetaskHost.Variables)
            {
                if (!v.SystemVariable && v.DataType == TypeCode.String && !variables.Contains(v.Name))
                {
                    variables.Add(v.Name);                  
                }
            }

            return variables;
        } 
```

我使用以下内容允许用户添加新的 SSIS 变量或选择现有的 SSIS 变量并刷新 SSIS 变量组合框。

```
private void cmbxVariables_SelectionChangeCommitted(object sender, EventArgs e)
    {
        if (cmbxVariables.Text == New_Variable)
        {
            try
            {
                DtsContainer dtsContainer = null;
                dtsVariableServie = serviceProvider.GetService(typeof(IDtsVariableService)) as IDtsVariableService;
                Variable var = dtsVariableServie.PromptAndCreateVariable(null, dtsContainer, "VariableName", "User", typeof(string));
                if (!var.IsNull())
                {
                    cmbxVariables.DataSource = null;
                    cmbxVariables.DataSource = FillVariableList();
                }
            }
            catch (Exception exe)
            {
                MessageBox.Show(exe.ToString());
            }
        }
        else
        {
            foreach (Variable v in thetaskHost.Variables)
            {
                if (v.Name == cmbxVariables.Text)
                {
                    //Do something with the variable selected
                    break;
                }
            }
        }          
    } 
```

# android - 存储数组列表 as JSON SharedPreference or SQLite database table? Scenario: I am sending user location (Object location with: lat, long and accuracy fields) to a web service from a Thread in a Service. If it fails because of various issu 问问题 问问题 2012-07-11T10:50:09.823 918 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Scenario: I am sending user location (Object location with: lat, long and accuracy fields) to a web service from a Thread in a Service. If it fails because of various issues (like no network) I need to store it and try to send it next time. If it fails multiple times, multiple Location objects are stored. I have 2 choices: Use SQLite database and an SQLiteOpenHelper which on each thread is open, retrieve records from the table, close. On successfully sending it, clear the table content. Use SharedPreferences while the location object is stored as an ArrayList (in case there are many) parsed to JSON with GSON. When needed parsed again to ArrayList. I know that SharedPreferences has no size limit and depending on my conditions I could have like 100 rows (this is exaggerated but possible). My main concern is on SQlite having it open and closed so often, things might get messed up and end in force close. SharedPreferences would not interfere with anything but I am thinking I might get bad performance in saving/parsing such long lists. I know that SharedPreferences aren't made for this, but I want to hear opinions from you. If you are worried about sqlite throwing exception for open and close database, you can put values in SharedPreference individually and then can iterate through all the values of SharedPreferences using Map <string,?>keys = prefs.getAll(); for(Map.Entry <string,?>entry : keys.entrySet()){ Log.d("map values",entry.getKey() + ": "+ entry.getValue().toString()); } androidjsonsqlitesharedpreferences 4 1 回答 1 This answer is useful 1 如果您担心 sqlite 在打开和关闭数据库时抛出异常，您可以将值单独放入 SharedPreference 中，然后可以遍历SharedPreferencesusing的所有值 Map <string,?>keys = prefs.getAll(); for(Map.Entry <string,?>entry : keys.entrySet()){ Log.d("map values",entry.getKey() + ": "+ entry.getValue().toString()); } 于 2012-07-11T11:03:27.497 回答 Related 1 html - 在 HTML5 的 URL 中还需要对 & 符号进行编码吗？ 3 sql-server - SQL 视图的限制 - 不支持按子句排序 1 python - Python2.7中，未定义符号导入P4API 1 c# - 初始化对象时覆盖方法 3 c++ - char 指针数组输出是差异 c++ 2 java - struts2 中 HttpServletResponse 的任何其他内置方法 2 c# - 单击相邻 CheckBox 后 WPF TextBox 窃取焦点 2 c++ - 向量超出范围 - C++ 4 php - 如何在php中每行文本的开头解析一个字符串 1 android - 在 FragmentPagerAdapter 下的 SherlockFragment 上未调用 onCreateOptionsMenu Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string,?></string,?></string,?></string,?>

> ID：11431039
> 
> 赞同：1
> 
> 时间：
> 
> 标签：android, json, sqlite, sharedpreferences

Scenario: I am sending user location (Object location with: lat, long and accuracy fields) to a web service from a Thread in a Service. If it fails because of various issues (like no network) I need to store it and try to send it next time. If it fails multiple times, multiple Location objects are stored.

I have 2 choices:

1.  Use SQLite database and an SQLiteOpenHelper which on each thread is open, retrieve records from the table, close. On successfully sending it, clear the table content.

2.  Use SharedPreferences while the location object is stored as an ArrayList (in case there are many) parsed to JSON with GSON. When needed parsed again to ArrayList.

I know that SharedPreferences has no size limit and depending on my conditions I could have like 100 rows (this is exaggerated but possible). My main concern is on SQlite having it open and closed so often, things might get messed up and end in force close. SharedPreferences would not interfere with anything but I am thinking I might get bad performance in saving/parsing such long lists. I know that SharedPreferences aren't made for this, but I want to hear opinions from you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:03:27.497

如果您担心 sqlite 在打开和关闭数据库时抛出异常，您可以将值单独放入 SharedPreference 中，然后可以遍历`SharedPreferences`using的所有值

```
Map<String,?> keys = prefs.getAll();
for(Map.Entry<String,?> entry : keys.entrySet()){
     Log.d("map values",entry.getKey() + ": 
                                  "+ entry.getValue().toString());            
 } 
```

# android - Sencha Touch 首次运行 Messagebox 报错

> ID：11431040
> 
> 赞同：0
> 
> 时间：2012-07-11T10:50:10.777
> 
> 标签：android, eclipse, sencha-touch

我刚刚在 Eclipse 上安装了 Sencha 并构建了 hello world 应用程序，运行正常，但消息框不起作用：

```
Ext.setup({
    onReady: function() {
       if (Ext.is.Android) 
      Ext.Msg.alert("INFO", "Welcome Android user!");   
       if (Ext.is.Blackberry)
      Ext.Msg.alert("INFO", "Welcome Blackberry user!");
         if (Ext.is.iPad)
        Ext.Msg.alert("INFO", "Welcome iPad user!");
       }
     }); 
```

我在 Eclipse 日志中得到的错误：

> E/Web 控制台（279）：错误：[错误][匿名] 在文件中使用 Ext.Msg 而不需要 Ext.MessageBox：///android_asset/www/senchatouch/src/log/writer/Console.js?_dc=1342002536493 :17

不知道怎么回事，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:22:08.273

您需要包含 Ext.MessageBox 组件。此外，我会在 Ext.application 声明中而不是 Ext.setup 中进行设置。此外，您的操作系统检查应该是 Ext.os.is 而不是 Ext.is 我为您整理了一个 SenchaFiddle。看看这里：

[http://www.senchafiddle.com/#NKlNS](http://www.senchafiddle.com/#NKlNS)

希望有帮助

# java - 用于为 web 服务 jax-rpc 生成存根的在线工具

> ID：11431043
> 
> 赞同：0
> 
> 时间：2012-07-11T10:50:19.797
> 
> 标签：java, web-services, jax-rpc

是否有任何工具可以在线为 RPC 样式 wsdl 生成存根。我使用了用于 RPC 的 Netbeans 插件并尝试创建一个。但是在执行应用程序时，我遇到了一些错误，比如调用函数时。

```
java.rmi.RemoteException: Runtime exception; nested exception is:
    deserialization error: unexpected element type: expected=
{http://account.type.engine.mdsp.huawei.com}UserBalanceInfo, actual=
http://account.engine.mdsp.huawei.com}UserBalanceInfo 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-15T08:39:09.693

我想说使用像 SoapUI 这样的工具可以让您创建存根，甚至可以为您的 wsdl 服务编写响应脚本。

SoapUI 支持许多配置选项。例如，您可以使用 groovy 脚本来模仿具有特定标头值或其他有效负载的现有服务。

链接1：http : [//www.guru99.com/webservice-testing-beginner-guide.html](http://www.guru99.com/webservice-testing-beginner-guide.html)

链接2：[https ://www.soapui.org/soap-and-wsdl/getting-started.html](https://www.soapui.org/soap-and-wsdl/getting-started.html)

# c# - 根据条件在报表查看器中显示报表？

> ID：11431044
> 
> 赞同：0
> 
> 时间：2012-07-11T10:50:22.280
> 
> 标签：c#, asp.net, reporting, reportviewer

我正在使用`ASP.NET/C#`。目前我正在`Report`按照本[教程](http://www.c-sharpcorner.com/uploadfile/john_charles/report-wizard-in-visual-studio-2008/)显示简单。

在本教程中，他们只是选择了要显示的字段，它显示了`Reports`.

`Reports`基于某些条件呢？

如何根据条件显示报告？

**例子：**

显示姓名以“A”开头的员工的详细信息。我希望我能够解释我的问题。

谁能帮我做到这一点？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:04:01.903

你的意思是这样的吗？

```
ReportDataSource rds0 = new ReportDataSource("DataSetNameDefinedInReport", data);
this.reportViewer1.LocalReport.ReportPath = @"Reportname.rdlc";
this.reportViewer1.LocalReport.DataSources.Add(rds0);
//show report!
this.reportViewer1.RefreshReport(); 
```

在我的情况下，“数据”是自定义对象的通用列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:07:38.473

报告采用参数。您可以设置这些以过滤掉数据。

这套教程应该可以帮助您入门：[向报告添加参数](http://msdn.microsoft.com/en-us/library/aa337432%28v=sql.105%29.aspx)

# jquery - show() 之后的 jQuery 更改事件问题

> ID：11431045
> 
> 赞同：0
> 
> 时间：2012-07-11T10:50:24.503
> 
> 标签：jquery

我有带有“添加新”按钮的 html 文档和带有附加字段的隐藏 div (style='display: none;')。当用户单击“添加新”按钮时，div 变得可见：

```
<script>
$(document).ready(function () {
    $('#add_new').click(function () {
            $('#add_new_panel').show();
            $(this).hide();
        });

    $('#selected_file').change(function(){
            alert(44);
        });
});
</script>

<div id="add_new_panel" style="display: none;">
    <input type="file" id="selected_file" name="testFile" />
</div> 
```

问题是当我在输入字段中选择文件时，该字段上的 jQuery 更改事件永远不会触发。如果我删除 style='display: none;' 从 add_new_panel div 它可以正常工作。但我需要隐藏这个 div，直到用户没有点击按钮。我怎样才能做到这一点？也许我可以将更改事件处理程序与另一个代码绑定？

PS 在另一页上，这与“显示：无；”完美配合。

对不起，我的英语不好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:47:41.900

问题出在输入文件字段的名称中。我删除了 name 属性，现在它可以工作了。2个小时白费了。打扰一下 ：）。

# jquery - 在 jQuery 中上传时限制图像大小

> ID：11431047
> 
> 赞同：0
> 
> 时间：2012-07-11T10:50:45.560
> 
> 标签：jquery

我想在上传时限制图像大小。是否有任何 jQuery 插件来检查上传图像的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:02:12.703

用这个添加jquery库并尝试

```
 <script type="text/javascript">
 function Size() {
  if ( $.browser.msie ) {
    var a = document.getElementById('file').value;
       $('#myImage').attr('src',a);
       var imgbytes = document.getElementById('Image').fileSize;
       var imgkbytes = Math.round(parseInt(imgbytes)/1024);
       alert(imgkbytes+' KB');
   }else {
       var fileInput = $("#file")[0];
       var imgbytes = fileInput.files[0].fileSize; // Size returned in bytes.
       var imgkbytes = Math.round(parseInt(imgbytes)/1024);
               alert(imgkbytes+' KB');
     }
  }    
  </script>

  <img id="Image" src="" style="display:none;"><br>
  <button onclick="Size();">Image Size</button>
  <input type="file" id="file" />
  <input type="button" value="find size" onclick="Size()" /> 
```

# powershell - 无法使用 powershell 脚本导出

> ID：11431053
> 
> 赞同：1
> 
> 时间：2012-07-11T10:51:04.407
> 
> 标签：powershell, export

我是PowerShell的新手。以下是我的要求：

读取 csv 日志文件并根据电子邮件字段，我必须查询并将结果导出到 csv 文件。

下面是一个示例日志文件：

> emailid,日期,时间,client_ip,client_hostname,server_ip,server_hostname,source,event_id manu@ionidea.com,05-24-2012,11:12:00,23.3.45.678,tytytyty,12.21.3.45,yuyuyuyuyu,hrertythghhdgfh,00928 ram@ionidea.com,06-05-2012,11:14:23,91.45.78.980,juqawessjj,16.51.5.93,pmbctr,ioyrhrtgdgdggdgjhjhj,00929 sheetal@ionidea.com,07-10-2012,11:12:00 ,10.0.87.369,yturbctyt,10.34.0.788,kokolioimdgf,brytifvnbty,00930

我正在使用以下脚本来执行此操作：

```
function saveAndRun(){

    $var_newJob = $window.FindName("txtbox_JobName").Text+".txt";
    write-host $var_newJob
    $varArray_emailIds =  ($window.FindName("txtbox_Email").Text).split(',');
    $var_fromDate = "'"+ $window.FindName("txtbox_FromDate").Text+"'";
    $var_toDate =  "'"+$window.FindName("txtbox_ToDate").Text+"'";
    $list="";
    ForEach($var_emailid in $varArray_emailIds){
    $emailid = "'"+$var_emailid+"'";
    ForEach-Object{

    Import-Csv D:\Manu\Xtract\Log\MSLogFile.txt | Where-Object {$_.emailid -eq $emailid -and ($_.date -ge $var_fromDate -and $_.date -le $var_toDate ) }

    } | Export-Csv -Path D:\Manu\Xtract\extract\$var_newJob
    } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:22:11.463

尝试这样的事情

```
Export-Csv -Path "D:\Manu\Xtract\extract\$var_newJob.csv" 
```

# php - 如何创建可通过 X 和 Y 坐标访问的数组？

> ID：11431054
> 
> 赞同：0
> 
> 时间：2012-07-11T10:51:06.870
> 
> 标签：php, arrays

我正在编写 PHP 脚本，它将用时间戳将鼠标位置存储在页面上。它将用于生成简单的热图。我有 X 和 Y 坐标的 MySQL 数据库，我想，我会做一个数组，我会用它来添加光标在特定像素上的出现次数。它会像这样工作：我从数据库中读取数据，例如四个记录 (x/y) 10/9,8/7,2/10,10/9 我将在数组中的每个坐标上放置 1，最后一个点已经在数组中，所以它会将 2 放在 x=10/y=9 上，因为鼠标在该像素上的总数。

我应该如何制作数组以及如何读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:25:52.747

首先，您需要创建一个空矩阵，其中定义了整个网格并用零填充：

```
$width = 10;
$height = 10;

$matrix = array_fill(1, $height, array_fill(1, $width, 0)); 
```

现在您只需遍历 MySQL 结果并在每次点击时递增每个关联点。在此示例中，我假设您的 x 和 y 列仅称为`x`and `y`。

```
while ($row = mysql_fetch_assoc($queryResult)) {
  $matrix[$row['y']][$row['x']]++;
} 
```

现在，如果您想获得 eg 的点的命中数`x = 1, y = 8`，您只需执行以下操作：

```
$hits = $matrix[8][1]; 
```

您可以在外部级别交换级别，`x`以便可以引用它们`$matrix[$x][$y]`而不是`$matrix[$y][$x]`如果您愿意，但我个人认为如果数组像数据库表一样构造为列的行（ `y`s of s）更有意义`x`.

# ios - UIAlertView、NSURLConnection 和 wait_fences

> ID：11431060
> 
> 赞同：1
> 
> 时间：2012-07-11T10:51:21.160
> 
> 标签：ios, alertview, wait-fences

在用户在模态视图控制器中按下“登录”后，我试图显示一个`UIAlertView`with 。`UIActivityIndicator`要登录，凭据将发送到使用类的`sendAsynchronousRequest:queue:completionHandler:`服务器`NSURLConnection`。我的实现如下：

```
UIAlertView * spinner = [[UIAlertView alloc] initWithTitle:@"Connecting to server..." message:nil delegate:self cancelButtonTitle:nil otherButtonTitles: nil];
[spinner show];
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
indicator.center = CGPointMake(spinner.bounds.size.width * 0.5f, spinner.bounds.size.height * 0.5f+5.0f);
[indicator startAnimating];
[spinner addSubview:indicator];
[indicator release];

[NSURLConnection sendAsynchronousRequest:req queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * res, NSData * data, NSError * err) {
    [spinner dismissWithClickedButtonIndex:0 animated:YES];
    [spinner release];
    ...
} 
```

如果无法访问服务器或服务器速度很慢，这似乎可以正常工作，但如果服务器立即回复，则微调器似乎在控制台日志记录后 3-5 秒后才被关闭

```
wait_fences: failed to receive reply: 10004003 
```

我认为发生这种情况是因为我正在关闭模式视图控制器（登录屏幕），而`UIAlertView`它仍在显示，但我不确定为什么会发生这种情况，因为它通常应该被关闭。我做错了什么，正确的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:24:13.780

我已经多次看到这个日志 - 它总是由内部动画框架中的意外状态或默认视图动画之间的冲突引起的。

可能的原因：

1.  在实际显示视图之前`viewDidLoad`，从内部或类似方法开始动画。`viewWillAppear`
2.  `UIAlertView`当另一个`UIAlertView`动画仍在运行时显示/隐藏。这包括显示来自 的警报`alertView:didDismissWithButtonIndex:`。
3.  模态视图动画和警报动画之间的冲突。
4.  `UINavigationController`推送/弹出动画和警报动画之间的冲突。

**您的情况**：您可能在警报完全显示之前就隐藏了警报，并且两个动画之间发生了冲突。显示动画通常需要大约 0.4 秒，但您的响应可以更早到达 - 触发隐藏动画。

可能的解决方案：

1.  动画结束时触发请求 ( `didPresentAlertView`)。
2.  测量连接的持续时间，如果小于 0.4 秒，请延迟隐藏动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:00:11.767

如果发生动画的 View Controller 没有出现，则不应制作动画。所以 viewDidLoad 中没有动画。在 viewDidAppear 中尝试。这样更安全。看看[这里](https://stackoverflow.com/a/1384584/624091)。

希望这可以帮助。

干杯!

# c# - 将字符串解析为谓词

> ID：11431061
> 
> 赞同：5
> 
> 时间：2012-07-11T10:51:22.170
> 
> 标签：c#, .net, linq, odata, predicate

我正在尝试制定一个解决方案，在运行时一个过程将解析一个“字符串”并返回一个谓词。到目前为止，我发现的是可以完成这项工作的[DynamicLinq类（示例）。](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

我想知道 - 是否可以使用 OData lib 来相同？传入“odata”结构字符串（“?color='red'¶m=foo”），得到一个Linq谓词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:07:00.703

ODataLib contrib 项目包括一个类似于您正在寻找的解析器。它还没有产生 LINQ 谓词，它只产生中间 AST，但它可能会给你一些起点。请参阅[http://odata.codeplex.com/wikipage?title=ODataLib&referringTitle=Home](http://odata.codeplex.com/wikipage?title=ODataLib&referringTitle=Home)（该库可作为 codeplex 上的源代码或作为 nuget 包[http://nuget.org/packages/Microsoft.Data.OData .贡献](http://nuget.org/packages/Microsoft.Data.OData.Contrib)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:29:57.803

编写解析器。如果您要为少数众所周知的类型解析谓词，这实际上相当简单。一般来说，它可能需要反思，这让它有点痛苦，但不是不可撤销的。

在将其转换为谓词之前，我可能会将其解析为某种中间格式。如果您正在为特定类执行此操作，最简单的方法可能是将其解析为该类的实例，并编写一个比较器类来检查一个与另一个的非空属性。YMMV。

通常，可能会将其解析为 Dictionary 或类似的东西，并编写一个使用反射类型的比较器类（这必须是您的参数之一）。

# iphone - 我得到两个相同的根视图

> ID：11431062
> 
> 赞同：2
> 
> 时间：2012-07-11T10:51:27.133
> 
> 标签：iphone, ios, ipad

我正在 iphone 上测试我的应用程序，软件版本是 4.2.1。我发现从客户启动视图控制器切换到根视图控制器时发生了一些问题。代码如下：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
 ....
launchViewController = [[[LaunchImageTransition alloc] initWithNibName:@"LaunchView_iphone" bundle:nil controller:self.viewController animation:UIModalTransitionStyleCrossDissolve] autorelease];

self.window.rootViewController = launchViewController;
 ....
} 
```

在“LaunchImageTransition.m”中：

```
//do some initial work
[self presentModalViewController:self.rootViewController animated:YES]; 
```

rootViewController 在“MainWindow.xib”中初始化。

当我在 iphone 模拟器上测试时，一切正常。但是在真机上测试时，发现rootViewController的viewDidAppear方法被调用了两次，而viewDidload方法被调用了一次。这导致两个相同的视图。</p>

我想知道为什么这只发生在真实设备上以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:51:21.243

我认为问题在于您使用视图系统的方式不是人们认为应该使用的方式。我的建议是改变你表达观点的方式。

`rootViewController`我不知道你是否必须这样做，但我认为更好的方法是让`mainViewController`.

在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`方法结束时，您可以在 mainViewController 上将 launchView 呈现为模态。

```
 [mainViewController presentModalViewController: launchViewController animated:YES]; 
```

在`viewWillAppearMethod` 或`viewDidAppearMethod`上，`mainViewController`您可以关闭`launchViewController`。

```
 -(void) viewWillAppear:(BOOL)animated{
        [super viewWillAppear:animated];
        [self dismissModalViewControllerAnimated:YES];
    } 
```

我希望它有帮助...

# wicket - 如何在检票口中添加链接

> ID：11431067
> 
> 赞同：0
> 
> 时间：2012-07-11T10:51:41.603
> 
> 标签：wicket, hyperlink

在java类中，我需要将列表（例如list.getFirstName（））添加到检票口中的标签中，并且名字应该是html中的超链接。下面我有java代码和html html代码

```
<tr >
          <a wicket:id="gotoClass"> 
                   <span wicket:id="firstname"></span> 
      </a> 
</tr> 
```

java类

```
Iterator<String> brds = list.iterator();

RepeatingView repeating = new RepeatingView("repeating");
    add(repeating);

      while (brds.hasNext())
       {
     AbstractItem item = new AbstractItem(repeating.newChildId());
                    repeating.add(item);
                    String contact = brds.next();  
                 item.add(new Label("firstname", contact));

    } 
```

上面的代码对我有用，我可以添加标签，即如果我在列表中有 10 个名字，我可以在 html 中添加 10 个标签。但我尝试在 html 中添加锚标记和

`form.add(new BookmarkablePageLink<String>("firstname", gotoClass.class));`在java中

然后我得到以下异常

最后一个原因：无法在 [[Component id = formname]] 中找到 id 为“firstname”的组件预期：“formname.firstname”。找到具有相似名称的：''

有人可以帮我吗

问候沙拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:36:07.930

链接元素必须是重复元素的子元素（就像您首先所做的那样）。例如：

```
//...
BookmarkablePageLink<String> link = new BookmarkablePageLink<String>("firstname", gotoClass.class);
item.add(link);

link.add(new Label("firstname", contact)); 
```

# extjs - Sencha Touch 1.1：显示方法后聚焦 TextArea

> ID：11431072
> 
> 赞同：0
> 
> 时间：2012-07-11T10:51:51.793
> 
> 标签：extjs, textarea, sencha-touch, dom-events, show

我目前正在使用 Phonegap 1.6.0 和 Sencha Touch 1.1 创建一个基于 Web 的移动应用程序。该应用程序由许多面板组成，用户可以通过这些面板单击。其中一些面板中有文本字段或文本区域。进入面板后，我们希望这些自动聚焦。这似乎适用于文本字段，但不适用于文本区域。

我有一个包含以下组件的面板：

```
xtype: 'textareafield',
cls: 'jasbackblock',
id: 'addreactiontextarea',
height: '100%',
grow: true,
listeners: {
    afterrender: function(cmp) {
    console.log('Component rendered.');
    cmp.fieldEl.dom.focus();
} 
```

每当我第一次打开面板时，它会自动对焦，这很好。但是，当我离开面板然后返回它时，我想不出用事件来做这件事的好方法。我之前在面板中尝试过显示监听器：

```
listeners: {
    show: function(cmp) {
        Ext.get('addreactiontextarea').fieldEl.dom.focus();
    }
} 
```

这给了我以下错误：

```
Uncaught TypeError: Cannot read property 'fieldEl' of null 
```

看来我无法在表演活动期间访问该元素。是否有任何其他事件可以在每次加载面板时触发并允许我访问文本区域？

如果有任何帮助，这就是我们调用从一个面板切换到另一个面板的方法：

```
function switchScreen(from, to, newArgs) {
    /* Save screen information. */
    if (from != -1)
        historyStack.push([from, screenArgs]);

    if (currentPage > 2) {
        if (to != 3)
            main.getComponent(3).hide();
        app.getComponent(currentPage - 3).hide();
    }
    else
        main.getComponent(currentPage).hide();

    screenArgs = newArgs;

    if (to > 2) {
        main.setActiveItem(3);
        app.setActiveItem(to - 3);

        /* setActiveItem does not fire a screen's show event if it has been
         * shown before. Since we want the code in the screen's show listener to
         * be executed every time we switch to the screen, we call show manually
         * just to fire the event. */
        main.getComponent(3).show();
        app.getComponent(to - 3).show();
    }
    else {
        main.setActiveItem(to);
        main.getComponent(to).show();
    }

    if (to == 0 || to == 1)
        adMode = to;
    else
        adMode = -1;

    currentPage = to;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:57:49.743

我解决了这个问题。问题是我不太了解 DOM 元素是如何工作的。

Ext.get('id') 返回 id 为 'id' 的 Javascript 对象的 DOM 元素。它不返回对象本身。Ext.getCmp('id') 返回 id 为 'id' 的 Javascript 对象。因此，Ext.getCmp('id').fieldEl 返回与 Ext.get('id') 相同的对象。

由于 Sencha Touch 1.1 中的一个 bug，我们选择使用 DOM 焦点功能而不是 Sencha 焦点功能。可以通过 Ext.getCmp('id').fieldEl.dom.focus() 或 Ext.get('id').dom.focus() 访问此函数。正如您在我的问题中看到的那样，我将这些混合在一起。由于我对 DOM 元素缺乏经验，当我尝试以这种方式使用 Object 函数时，我变得更加困惑。（Ext.get('id').reset() 简直不合逻辑。）

如果您有任何问题，请随时留言。

# iphone - iPhone应用程序的横向启动画面？

> ID：11431076
> 
> 赞同：0
> 
> 时间：2012-07-11T10:52:04.667
> 
> 标签：iphone, landscape, splash-screen

我正在开发一个支持所有方向的应用程序。我需要以所有方向类型启动启动画面（启动图像）。但是项目摘要只有一个字段（纵向）来设置 Default.png。我将如何在我的 iPhone 应用程序上启动横向启动画面。

ipad 有一些功能可以设置两个方向。他们在 iphone 中是否有类似的东西，

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T10:56:37.463

iPhone 闪屏只有纵向。iPad 也有横向，因为 iPad 主屏幕自动旋转不像 iPhone。

为了实现这样的行为，您可以使您的第一个屏幕与初始屏幕相同（在背景上添加相同的图像）。因此，当您加载应用程序所需的资源但您无法以横向模式启动应用程序时，它看起来像一个横向启动屏幕。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:56:24.507

不，根据 HIG 的说法，iPhone 的默认方向是纵向，并且启动时只会执行纵向模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T06:12:20.067

让我引用一个特殊的行为

来自技术说明[TN2244**在横向启动您的 iPhone 应用程序**](https://developer.apple.com/library/content/technotes/tn2244/_index.html)

> 除了 iPhone 6 Plus 使用的启动图像外，资产目录假定所有 iPhone 启动图像都是纵向的。

所以

> iPhone 应用程序的启动图像的大小始终与纵向屏幕的尺寸相匹配。对于以横向启动的应用程序，您应该使用首选的图形编辑软件来旋转启动图像的内容，同时保持图像的大小与纵向启动图像一致（高度 > 宽度）。

如果您没有正确执行操作，则可能会出现空白/白屏

> 结果是在启动过程中出现空白屏幕，因为系统找不到合适的启动图像。

不幸的是，该文件最近一次更新是在 2 年前。

`2015-05-26 Updated for Xcode 6 and iOS 8.`

# c# - 如何以管理员权限启动进程

> ID：11431077
> 
> 赞同：2
> 
> 时间：2012-07-11T10:52:07.870
> 
> 标签：c#, process

如何在具有管理员权限的 c# 中启动进程？我正在使用代码，

```
Process p = new Process();
                    p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
                    p.StartInfo.FileName = path;
                    p.StartInfo.UseShellExecute = true;
                    p.StartInfo.RedirectStandardOutput = true;
                    p.StartInfo.RedirectStandardError = true;
                    if (System.Environment.OSVersion.Version.Major >= 6)
                    {
                        p.StartInfo.Verb = "runas";
                    }

                    p.Start(); 
```

仍然无法正常工作。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:04:05.877

```
var processInfo = new ProcessStartInfo   
{   
    FileName = "app.exe",   
    UserName = "Username",   
    Domain = "yourdomain or leave blank",   
    Password = "password",   
    UseShellExecute = false,  
};   
Process.Start(processInfo); 
```

只需添加/调整您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:06:14.737

如果您可以控制您尝试运行的应用程序，则应在可执行文件上附加清单并要求提升权限。为此，您制作一个与此类似的文件，并将其命名为与您的应用程序相同的名称，并以 .manifest 作为扩展名（例如 yourApp.exe.manifest）：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="appName" type="win32"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="requireAdministrator"/>
      </requestedPrivileges>
    </security>
  </trustInfo>
    <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
        <application>
            <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/>
        </application>
    </compatibility>
</assembly> 
```

然后使用 Visual Studio 命令提示符中的 mt 工具附加它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:01:09.537

ProcessStartInfo 类具有 UserName 和 Password 等属性，请尝试在 Process Start 方法中使用它

# regex - Scala - 来自 URL 的 Youtube 视频 ID

> ID：11431078
> 
> 赞同：2
> 
> 时间：2012-07-11T10:52:14.480
> 
> 标签：regex, scala, url

我从这里有以下正则表达式：[https ://stackoverflow.com/a/10405818/924999](https://stackoverflow.com/a/10405818/924999)

```
val regex = """/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/ytscreeningroom\?v=|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\S*[^\w\-\s]))([\w\-]{11})[?=&+%\w-]*/ig;""".r 
```

我正在尝试从 youtube 视频网址中提取视频 ID：

```
val url = "http://www.youtube.com/watch?v=XrivBjlv6Mw"

url match {

    case regex(result) => result

    case _ => null

} 
```

但是它似乎总是返回 null，我是否缺少某些东西或需要做不同的事情？

在此先感谢您的帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:09:32.883

您拥有的正则表达式是 php 风格的正则表达式，而不是 java 风格的 - 例如，`/ig;`最后的注释标志。

所以你只需要稍微编辑一下：

```
val youtubeRgx = """https?://(?:[0-9a-zA-Z-]+\.)?(?:youtu\.be/|youtube\.com\S*[^\w\-\s])([\w \-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:[\'"][^<>]*>|</a>))[?=&+%\w-]*""".r 
```

我在所有可能的 youtube 网址上对其进行了测试，并且可以正常工作。例子：

```
scala> youtubeRgx.pattern.matcher("http://www.youtube.com/watch?v=XrivBjlv6Mw").matches
res23: Boolean = true 
```

并提取价值：

```
"http://www.youtube.com/watch?v=XrivBjlv6Mw" match {
  case youtubeRgx(a) => Some(a) 
  case _ => None 
}
res33: Option[String] = Some(XrivBjlv6Mw) 
```

遗憾的是java不允许在正则表达式中进行正确的注释，所以我做了我能做的：

```
val youtubeRgx = """https?://         # Required scheme. Either http or https.
                   |(?:[0-9a-zA-Z-]+\.)? # Optional subdomain.
                   |(?:               # Group host alternatives.
                   |  youtu\.be/      # Either youtu.be,
                   || youtube\.com    # or youtube.com followed by
                   |  \S*             # Allow anything up to VIDEO_ID,
                   |  [^\w\-\s]       # but char before ID is non-ID char.
                   |)                 # End host alternatives.
                   |([\w\-]{11})      # $1: VIDEO_ID is exactly 11 chars.
                   |(?=[^\w\-]|$)     # Assert next char is non-ID or EOS.
                   |(?!               # Assert URL is not pre-linked.
                   |  [?=&+%\w]*      # Allow URL (query) remainder.
                   |  (?:             # Group pre-linked alternatives.
                   |    [\'"][^<>]*>  # Either inside a start tag,
                   |  | </a>          # or inside <a> element text contents.
                   |  )               # End recognized pre-linked alts.
                   |)                 # End negative lookahead assertion.
                   |[?=&+%\w-]*       # Consume any URL (query) remainder.
                   |""".stripMargin.replaceAll("\\s*#.*\n", "").replace(" ","").r 
```

（改编自@ridgerunner 在这里的回答：[find all youtube video ids in string](https://stackoverflow.com/questions/5830387/php-regex-find-all-youtube-video-ids-in-string/10405818#10405818)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:28:58.887

首先 Scala 接受 Java 风格的正则表达式。如果您提供斜杠，那么它们是模式的一部分，而不是分隔符。此外，必须为每个组指定标志，而不是在正则表达式之后。

其次，为了`case regex(result)`匹配，您必须在模式中定义一个匹配组。您必须将视频 ID 分组为匹配模式 - 我只是不知道在过于复杂的模式中是否是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:58:28.137

一个更简单的方法：

```
scala> val url = "http://www.youtube.com/watch?v=XrivBjlv6Mw"
url: java.lang.String = http://www.youtube.com/watch?v=XrivBjlv6Mw

scala> val regex = "v=[\\w]*"r
regex: scala.util.matching.Regex = v=[\w]*

scala> for (x <-  regex findFirstIn url) yield x.replace("v=","")
res3: Option[java.lang.String] = Some(XrivBjlv6Mw) 
```

# .net - 内部连接致命错误

> ID：11431079
> 
> 赞同：13
> 
> 时间：2012-07-11T10:52:17.643
> 
> 标签：.net, sql-server

我最近开始从我的应用程序中收到此错误：“内部连接致命错误”。错误随机发生。当它发生时，我的应用程序在接下来的几分钟内无法使用。

在仔细分析错误后，我得出结论，此错误仅发生在我的应用程序中的一种方法中。此方法触发一系列简单的普通 SQL 查询，但它确实涉及多线程，但是所有线程都应在此代码块之前处理。错误总是发生在特定的 SQL 查询上。对于测试，我已经消除了这个导致下一行查询发生错误的查询。

这是堆栈跟踪：

```
内部连接致命错误。

-  -  -  -  -  -  -  堆栈跟踪  -  -  -  -  -  -  - -
   在 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyEntry.IntentionalRethrow（异常链异常，异常 originalException）
   在 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyEntry.RethrowRecommended（异常链异常，异常 originalException）
   在 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyEntry.Handle（异常 exceptionToHandle）
   在 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicyImpl.HandleException（异常 exceptionToHandle）
   在 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicy.HandleException（异常 exceptionToHandle，字符串 policyName，ExceptionPolicyFactory policyFactory）
   在 Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.ExceptionPolicy.HandleException（异常 exceptionToHandle，字符串策略名称）
   在 Base.Sql.ExecuteScalar()

```

应用程序建立在 .NET 3.5 之上，它显然使用企业库数据访问。应用程序在 Win2003 终端服务器上运行，它使用不同服务器上的 Sql Server 2005 数据库。

导致此错误的方法不是从 GUI 触发的，而是从命令行触发（如果这有任何意义）。

如果有人建议从这里去哪里，我将非常感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T19:40:10.510

我遇到了类似的问题，并且在这个问题上花了很多时间。因此，您需要一一检查以下所有内容。

1.  在调用存储过程之前，您可能已经留下了一些与数据库的开放连接。
2.  调用 SqlDataReader.Close() 或 SqlDataReader.Dispose() 时出现此异常 - 可以使用 SqlConnection.Close() 而不是 SqlDataReader.Close() 来修复
3.  删除您的临时文件夹？
4.  查看 IIS 服务器对临时端口的使用情况。默认最大数量 可用端口数通常为 4000。如果您的应用程序进行大量数据库调用，您可以增加它。

让我知道它是否没有帮助。我可能有机会学习新的东西。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-16T08:16:10.190

像这样的奇怪错误通常是多线程访问非线程安全对象的结果。

我认为这里有几件事出了问题。

*   跨线程重用打开的连接。
*   跨线程重用 sql 客户端对象。
*   未正确关闭打开的连接 - 您是否使用`using`?

提供一个代码示例，我们也许能够发现问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-11T10:52:22.963

我和我的团队已经被这个问题困扰了很长一段时间。我们尝试实现一切，从 try-catch-finally 到维护所有编码标准；但是，每当多个用户尝试同时访问该页面时，此问题就会不断发生。连接会中断并出现问题。有时我们甚至必须重新启动整个服务器才能使应用程序开始工作。问题是我们无法限制用户使用相同的连接字符串，从而引发此错误。最终，我们尝试使用“using”打开和关闭连接字符串，之前我们在 dataadapter 能够获取数据之后使用“dbcon.opne()”和“dbcon.close()”手动打开和关闭它。

所以我们做了什么，我们用“使用”替换了同样的东西，这让整个事情都在括号内。

**使用 (DBConn = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnect"].ConnectionString))** { *这里的代码* --- if (DBConn.State != ConnectionState.Open) DBConn.Open();

}

这彻底解决了问题。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-21T12:28:35.990

对于 .NET Core 2.0 或更高版本，当您的 .csproj 文件中有以下内容时，也可能会发生该错误：

```
 <ItemGroup>
   <RuntimeHostConfigurationOption Include="System.Globalization.Invariant" Value="true" /> 
 </ItemGroup> 
```

根据[文档](https://github.com/dotnet/corefx/blob/master/Documentation/architecture/globalization-invariant-mode.md)，此选项“使您能够删除应用程序对全球化数据和全球化行为的依赖”。除了较小的文件大小之外，我不知道这样做的好处是什么，但 SqlConnection 不适用于它。

# java - Apache CXF 日志记录

> ID：11431081
> 
> 赞同：0
> 
> 时间：2012-07-11T10:52:29.817
> 
> 标签：java, maven, cxf

我在使用`Apache CXF framework`. 我想将服务器错误记录到外部文件而不是终端。服务器的一段代码；

```
server= new JaxwsNotificationBroker("Hello",..);
server.setAddress("http://localhost:" + brokerPort + "/wsn/NotificationBroker"); 
```

我试过这个来记录；

```
server.getInInterceptors().add(new LoggingInInterceptor());
server.getOutInterceptors().add(new LoggingOutInterceptor()); 
```

但它给出了错误`The method getInInterceptors() is undefined for the type JaxwsNotificationBroker`。

有什么方法可以记录错误`JaxwsNotificationBroker`吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:06:04.283

你可以在里面添加`loggingInInterceptor`&`logOutInterceptor``cxf:bus`

```
<cxf:bus>
    <cxf:ininterceptors>
      <ref bean="loggingInInterceptor" />
    </cxf:ininterceptors>
    <cxf:outinterceptors>
      <ref bean="logOutInterceptor" />
    </cxf:outinterceptors>
  </cxf:bus> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:53:13.763

如果您使用的是 spring，请将其添加到您的 spring 配置文件中：

```
 <cxf:bus>
    <cxf:features>
        <cxf:logging />
    </cxf:features>
</cxf:bus> 
```

不要忘记将 cxf 命名空间添加为

```
xmlns:cxf="http://cxf.apache.org/core" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:43:38.173

如果您使用 log4j 进行日志记录，则必须将 META-INF/cxf/org.apache.cxf.Logger 文件放在类路径中，其中包含“org.apache.cxf.common.logging.Log4jLogger”类名作为单行，否则 cxf 将使用 JavaTM 2 平台的核心日志记录工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T21:13:56.903

出于某种原因，gnodet 希望让所有 WS-N 的东西尽可能独立于 CXF，并且只依赖于纯 JAX-WS 的东西。因此，像 CXF 拦截器这样的好方法是不可能的。:-(

查看代码，现在唯一的选择是编写一个调用 super.register 方法的 JaxwsEndpointManager 的子类，然后将其转换为 CXF EndpointImpl，并在那里设置拦截器。不是很理想。:-(

# objective-c - 创建一个复杂的自定义 nstextfieldcell

> ID：11431087
> 
> 赞同：1
> 
> 时间：2012-07-11T10:52:39.653
> 
> 标签：objective-c, nstableview, nstextfieldcell

我正在尝试`NSTextFieldCell`为`NSTableView`. 我想做一些类似于 Mail 提供的电子邮件列表（下面的示例）。

[我在这里](https://stackoverflow.com/questions/6552682/nstextfieldcell-with-multiple-lines)和[这里](http://juliuspaintings.co.uk/cgi-bin/paint_css/animatedPaint/070-NSTableView-ImageAndTextCell.pl)找到了一些参考资料，但我无法发展。

我认为它不像多行文本那么简单。我认为单元格应该有预定义的位置，比如右上角的时间戳、附件图标等......这个“占位符”应该总是在同一个地方，不管文本大小。我正在考虑嵌入对象。

拜托，你能帮帮我吗？非常欢迎提供示例或示例代码。

编辑：我正在寻找 MAC OS X Lion (10.7.x) 解决方案。

![单元格示例](../Images/d5889ad8d0e323a82f0841268358e884.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:07:44.567

基于 Monolo 评论，我搜索了基于视图的表格视图。我找到[了这个优秀的教程](http://gentlebytes.com/2011/08/view-based-table-views-in-lion-part-1-of-2/)并遵循它，我成功了。

我还找到了有关基于视图的编程指南的[OS X 开发人员库文档。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TableView/ViewBasedTables/ViewBasedTables.html)也很好。

# android - 功能区菜单 Android

> ID：11431091
> 
> 赞同：6
> 
> 时间：2012-07-11T10:52:52.413
> 
> 标签：android, animation, menu

我在某处读到谷歌称之为“功能区菜单”。

无论如何，这就是我的意思（也看看这个[博客](https://web.archive.org/web/20170821195646/http://www.androiduipatterns.com:80/2012/06/emerging-ui-pattern-side-navigation.html)）：

[![功能区菜单](../Images/2ff919eb4ce5fcfdc9f1c63c6524734d.png)](https://i.stack.imgur.com/VJ4Fq.jpg)

这是 Google+ 应用程序。当你点击 ActionBar 上的 G+ 图标时，整个屏幕向右移动并出现一个菜单。请注意，ActionBar 也会移动。

我想在我的应用程序中执行此操作，但我不知道如何操作。我对动画框架有基本的了解。

问题是：

*   我必须使用什么样的布局？
*   如何为*整个*屏幕设置动画（使用 ActionBar）？

我希望这些不是太笼统的问题。我在问例子。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:35:21.490

好，我知道了。这很简单。

```
getWindow().getDecorView(); 
```

此行为您提供活动的主视图。主视图包含活动中显示的所有内容。然后你可以动画它。答案很简单。

这个链接对我帮助很大：[http ://android.cyrilmottier.com/?p=658](http://android.cyrilmottier.com/?p=658)

## 编辑：

这不是继续的方法。就像 Cyril Mottier 所说的那样，这是一个 hack，我发现了很多问题。我重做了一切，现在我正在实现自己的 ActionBar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T20:57:51.820

我也在寻找这个。同一事物的另一个名称是**滑出导航**。以下是我在 Github 上找到的解决方案：

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

[https://github.com/korovyansk/android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

[https://github.com/darvds/RibbonMenu](https://github.com/darvds/RibbonMenu)

[https://github.com/Gregadeaux/android-fly-in-app-navigation](https://github.com/Gregadeaux/android-fly-in-app-navigation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T05:43:21.833

您可以通过导航抽屉很好地做到这一点，这是我找到的示例

MainActivity.java

```
package ir.ZiaNazari.navigationdrawer;

import android.os.Bundle;
import android.app.Activity;
import android.content.res.Configuration;
import android.support.v4.app.ActionBarDrawerToggle;
import android.support.v4.view.GravityCompat;
import android.support.v4.widget.DrawerLayout;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

private String[] drawerListViewItems;
private DrawerLayout drawerLayout;
private ListView drawerListView;
private ActionBarDrawerToggle actionBarDrawerToggle;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // get list items from strings.xml
    drawerListViewItems = getResources().getStringArray(R.array.items);

    // get ListView defined in activity_main.xml
    drawerListView = (ListView) findViewById(R.id.left_drawer);

    // Set the adapter for the list view
    drawerListView.setAdapter(new ArrayAdapter<String>(this, R.layout.drawer_listview_item, drawerListViewItems));

    // 2\. App Icon
    drawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);

    // 2.1 create ActionBarDrawerToggle
    actionBarDrawerToggle = new ActionBarDrawerToggle(
            this,                  /* host Activity */
            drawerLayout,         /* DrawerLayout object */
            R.drawable.ic_launcher,  /* nav drawer icon to replace 'Up' caret */
            R.string.drawer_open,  /* "open drawer" description */
            R.string.drawer_close  /* "close drawer" description */
            );

    // 2.2 Set actionBarDrawerToggle as the DrawerListener
    drawerLayout.setDrawerListener(actionBarDrawerToggle);

    // 2.3 enable and show "up" arrow
    getActionBar().setDisplayHomeAsUpEnabled(true);

    // just styling option
    drawerLayout.setDrawerShadow(R.drawable.ic_launcher, GravityCompat.START);

    drawerListView.setOnItemClickListener(new DrawerItemClickListener());
}

@Override
protected void onPostCreate(Bundle savedInstanceState) {
    super.onPostCreate(savedInstanceState);
    // Sync the toggle state after onRestoreInstanceState has occurred.
     actionBarDrawerToggle.syncState();
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    actionBarDrawerToggle.onConfigurationChanged(newConfig);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

     // call ActionBarDrawerToggle.onOptionsItemSelected(), if it returns true
    // then it has handled the app icon touch event

    if (actionBarDrawerToggle.onOptionsItemSelected(item)) {
        return true;
    }
    return super.onOptionsItemSelected(item);
}

private class DrawerItemClickListener implements ListView.OnItemClickListener {
    @Override
    public void onItemClick(AdapterView parent, View view, int position, long id) {
        Toast.makeText(MainActivity.this, ((TextView)view).getText(), Toast.LENGTH_LONG).show();
        drawerLayout.closeDrawer(drawerListView);

    }
}
} 
```

抽屉列表视图项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@android:id/text1"
    android:textColor="#fff"
    android:textSize="20sp"
    android:gravity="center_vertical"
    android:paddingStart="14.5sp"
    android:paddingEnd="14.5sp"
    android:minHeight="35sp" >
</TextView> 
```

activity_main.xml

```
<android.support.v4.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/myshape"
    >

    <!-- The main content view -->
    <FrameLayout
        android:id="@+id/content_frame"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <!-- The navigation drawer -->
    <ListView android:id="@+id/left_drawer"
        android:layout_width="240dp"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        android:choiceMode="singleChoice"
        android:divider="#666"
        android:dividerHeight="1dp"
        android:background="#333"
        android:paddingLeft="15sp"
        android:paddingRight="15sp"
        />

</android.support.v4.widget.DrawerLayout> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Navigation Drawer</string>
    <string name="action_settings">Settings</string>
    <string name="hello_world">Hello world!</string> 
    <string-array name="items">
        <item>Item 1</item>
        <item>Item 2</item>
        <item>Item 3</item>
        <item>Item 4</item>
        <item>Item 5</item>
        <item>Item 6</item>
    </string-array> 
    <string name="drawer_open">Open navigation drawer</string>
    <string name="drawer_close">Close navigation drawer</string>

</resources> 
```

我希望这对您和其他人有所帮助

# android - 可点击文本可以打开市场应用

> ID：11431094
> 
> 赞同：0
> 
> 时间：2012-07-11T10:53:01.777
> 
> 标签：android

我想在我的活动中写一个文本，比如

购买我的应用

我需要使此文本可点击。因此，一旦单击它，它就会打开 Market 应用程序并显示我的应用程序。

什么是合适的观点？如何添加网页链接？你能帮忙（提供一个小代码）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:57:36.440

`onClick()`在方法中编写以下代码行

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=YourPackageName"));
startActivity(intent); 
```

`AndroidMarket`这将在 android mobile 中打开默认应用程序并显示您的应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:59:24.243

使用此代码来实现您的目标。

```
public void onCreate(Bundle request)
{
    super.onCreate(request);
    setContentView(R.layout.market);

    Button buy = (Button)findViewById(R.id.btnBuyMyApp);  

    buy.setOnClickListener(this);  
}

@Override
public void onClick(View v) {
    switch(v.getId())
    { 

    case R.id.btnBuyMyApp:
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse("market://details?id=your package name"));
        startActivity(intent);
        break; 
    }

} 
```

在xml中你可以使用这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingTop="5dip" >
     <Button
        android:id="@+id/btnBuyMyApp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:clickable="true"
        android:gravity="center"
        android:padding="6dip"
        android:text="Buy"
        android:textColor="#F8B334"
        android:textSize="18sp"
        android:textStyle="bold" />

</LinearLayout> 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:03:26.617

您可以简单地`TextView`在`layout xml`文件中使用带有文本“但我的应用程序”的 a。使用`findViewById()`. 然后`onClickListener()`在 TextView 上设置一个。在`onClickListener()`使用下面的代码

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id=com.rovio.angrybirds&hl=en"));); 
```

我刚刚使用了愤怒的小鸟应用程序示例，您可以提供您自己的应用程序的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:03:48.787

请使用以下代码。

```
TextView myWebSite = (TextView)findViewById(R.id.myWebSite)
myWebSite.setText("Link is:-   " + "market://details?id=your package name");
Linkify.addLinks(myWebSite , Linkify.WEB_URLS); 
```

请参阅下面的链接以获取更多信息。

[Android – 使用 linkify 创建链接](http://www.aviyehuda.com/blog/2011/01/27/android-creating-links-using-linkfy/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:10:14.480

检查这个：

```
 <TextView 
         android:id="@+id/click"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:clickable="true"
         android:text="Market"/> 
```

在活动中：

```
TextView text=(TextView) findViewById(R.id.click);
        text.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse("https://play.google.com"));
                startActivity(intent);
            }
        }); 
```

不要忘记在清单文件中包含**互联网权限。**

# cordova - PhoneGap EmailComposer 问题

> ID：11431096
> 
> 赞同：1
> 
> 时间：2012-07-11T10:53:13.560
> 
> 标签：cordova, phonegap-plugins

我是 phoneGap 的新手，我想添加一个电子邮件按钮 - 所以我尝试安装 EmailComposer 插件。当我尝试在 xcode 中编译时，出现以下错误：找不到“PGPlugin.h”文件。我全新安装了 Phonegap 1.9

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:01:03.993

你用的是最新版本的插件吗？？现在使用 Phonegap 插件`CDVPlugin.h`，您可以通过检查插件的来源来确认。

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposer](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposer)

如果插件代码较旧并且应该可以工作，请更新您的插件代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:44:51.827

谢谢，找到问题了，是的，版本不对。奇怪的是，GIT 存储库同时包含带有 EmailComposer 插件的 iPhone 和 IOS 文件夹。我错误地使用了iPhone。我猜它适用于旧版本的iphone？

谢谢

# html - IE7-8 上的 SVG z-index

> ID：11431100
> 
> 赞同：1
> 
> 时间：2012-07-11T10:53:41.223
> 
> 标签：html, internet-explorer, svg

我创建了一个简单的页面，并希望使用 SVG 图像作为背景。我知道 CSS 中的背景 SVG 存在支持问题，所以我不会走这条路。

我得到的代码适用于大多数浏览器，除了 IE7-8；SVG 显示在页面上所有其他内容之前的位置。

这是我的代码：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf=8">
  <title>Southpoint</title>
  <style type="text/css">
    body {
      margin: 0 auto;
      padding: 0;
      width:1000px;
      position: relative;
      font-family: Arial;
    }

    #blue_circle {
      position: absolute;
      top: -50px;
      left: -600px;
      z-index: 1;
    }

    .container {
      position: relative;
      z-index: 10;
      padding-top: 200px;
    }

  </style>
</head>
<body>

<div class="container">
  <h1>Lorem ipsum</h1>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lobortis elit in odio luctus tincidunt.
    Pellentesque nec nisl augue. Ut eu quam sed purus imperdiet iaculis. Fusce eget mi id felis malesuada eleifend
    ut quis nisi. Donec quis orci purus. Duis ante nisi, fermentum vel dignissim vel, facilisis id mauris.
  </p>
</div>

<object id="blue_circle" data="blue_circle.svg" width="1200" height="750" type="image/svg+xml" />
</body>
</html> 
```

和 SVG

```
<svg version="1.1" baseprofile="full" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="main_blue" x1="0" x2="0.5" y1="0" y2="1">
      <stop stop-color="#1e2c88" offset="60%" />
      <stop stop-color="#2386d4" offset="100%" />
    </linearGradient>
  </defs>
  <circle cx="600" cy="150" r="600" fill="url(#main_blue)" />
</svg> 
```

所以我的问题是：如何让 SVG 位于 IE7-8 中的文本后面（其他浏览器工作正常）？

# audio - 比较两个声音的频率内容的最快和最简单的算法

> ID：11431102
> 
> 赞同：1
> 
> 时间：2012-07-11T10:53:42.463
> 
> 标签：audio, fft

我想取两个包含主导频率的声音，然后说“这个比这个高”。我可以做 FFT，找到每个振幅最大的频率并进行比较。我想知道，因为我有一个特定的任务，是否可能有一个更简单的算法。

声音很脏，有很多频率，但包含清晰的主导音高。它们不是完美产生的正弦波。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:00:30.833

鉴于声音很脏，我建议开始使用 FFT 的输出开发算法，因为诊断任何问题会更简单。然后，当您对它的工作感到高兴时，您可以考虑优化/简化。

作为开发这种数值算法的经验法则，我总是首先尝试在最相关的领域（在这种情况下你对频率感兴趣，所以在频率空间中分析）一开始，一旦一切正常本身考虑快捷方式/优化。这样，您就可以针对表现最好的前者来测试后者的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:38:14.577

有多种音高检测方法，从计算过零（这显然不适用于您的情况）到极其复杂的算法，不一而足。

虽然频域方法似乎最合适，但它并不像“采用 FFT”那么简单。如果您的数据非常嘈杂，则可能会出现高于您认为的主频率的杂散峰值。一种解决方案是使用信号的窗口重叠段，并进行 STFT，并对结果进行平均。但这提出了更多问题：窗户应该有多大？在这种情况下，这取决于您期望这些主峰相距多远，您的记录有多长等（注意：FFT 方法可以通过考虑相位信息来解决比一个 bin 大小更好的问题。在这种情况下，您将不得不做一些比将所有 FFT 窗口平均在一起更复杂的事情）。

另一种方法是时域方法，例如 YIN：

[http://recherche.ircam.fr/equipes/pcm/cheveign/pss/2002_JASA_YIN.pdf](http://recherche.ircam.fr/equipes/pcm/cheveign/pss/2002_JASA_YIN.pdf)

维基百科讨论了更多方法：

[http://en.wikipedia.org/wiki/Pitch_detection_algorithm](http://en.wikipedia.org/wiki/Pitch_detection_algorithm)

您还可以在本书的第 9 章中探索更多方法：

[http://www.amazon.com/DAFX-Digital-Udo-ouml-lzer/dp/0471490784](https://rads.stackoverflow.com/amzn/click/com/0471490784)

你可以从这本书的第 9 章获得 yin 的 matlab 源代码：

[http://www2.hsu-hh.de/ant/dafx2002/DAFX_Book_Page_2nd_edition/matlab.html](http://www2.hsu-hh.de/ant/dafx2002/DAFX_Book_Page_2nd_edition/matlab.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:40:41.360

在一般情况下，体面的[音高检测/估计](http://en.wikipedia.org/wiki/Pitch_detection_algorithm)通常需要比查看 FFT 峰值更复杂的算法，而不是更简单的算法。

# javascript - 自动附加到 js 文件的随机数

> ID：11431104
> 
> 赞同：3
> 
> 时间：2012-07-11T10:53:55.347
> 
> 标签：javascript, jquery, html, caching

我的 index.php 代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script src="js/jquery.js"></script>
<script>
$(function(){
$("body").load("AJAX.php");
});</script></head>
<body>
</body>
</html> 
```

还有我的 AJAX.php 代码

```
<body>
<script src="js/asdf.js"></script>

</body> 
```

和我的 asdf.js 代码

```
function cool(){
    alert("hi");} 
```

现在当我加载 index.php 并看到它输出的控制台时

`[16:21:57.237] GET http://localhost/js/asdf.js?_=1342003917230 [HTTP/1.1 200 OK 8ms]`

现在我想知道为什么它将随机数添加到 js 文件的 url 以及如何防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:55:39.610

请参阅[ajax 方法的文档](http://api.jquery.com/jQuery.ajax/)：

> `cache`
> 
> 默认值：`true`,`false`对于`dataType`'script' 和 'jsonp'
> 
> 如果设置为`false`，它将强制浏览器不缓存请求的页面。将缓存设置为 false 还会将查询字符串参数“_=[TIMESTAMP]”附加到 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:56:03.167

添加它是为了防止从浏览器缓存中提供文件。

如果您在 jQuery 中使用 .load 方法，您可以通过传递选项来禁用它`{cache:false}`

```
$.ajaxSetup({cache : true});
$.load(url, data, function() {
    // callback function
}); 
```

或者

```
$.ajax(url, {cache : true, dataType : 'html', success : function (response) {
    $('body').html(response);
}}); 
```

# mysql - mysql 根据 IN CLAUSE 中使用的相同键返回重复记录

> ID：11431105
> 
> 赞同：1
> 
> 时间：2012-07-11T10:53:57.973
> 
> 标签：mysql, sql

我有以下查询

```
SELECT P.PRICE, P.PRODUCT_ID FROM PRODUCT P WHERE P.PRODUCT_ID IN (41,41) 
```

由于应用程序代码的限制，我需要它两次返回产品记录。

我对 SQL 不太熟悉，所以真的卡住了，我不想为每个产品运行单个查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:54:58.617

要使其出现两次，您可以执行以下操作：

```
SELECT P.PRICE, P.PRODUCT_ID FROM PRODUCT P WHERE P.PRODUCT_ID IN (41)
UNION ALL
SELECT P.PRICE, P.PRODUCT_ID FROM PRODUCT P WHERE P.PRODUCT_ID IN (41) 
```

操作员所做的[`UNION`](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29#UNION_operator)实际上是将一个查询的结果“附加”到*另一个*查询的结果上......所以在您的情况下，我们正在“附加”*相同*的确切选择，以便所有行在您的最终结果中重复两次。

* * *

但是，对于更复杂的查询，您可能想要做的是使用`CROSS JOIN`：

```
SELECT P.PRICE, P.PRODUCT_ID 
FROM PRODUCT P 
INNER JOIN ...
INNER JOIN ...
CROSS JOIN
(
    SELECT NULL UNION ALL 
    SELECT NULL
) cj
WHERE P.PRODUCT_ID IN (41) AND ... AND ... AND .. 
```

这样，行将与子查询中的`SELECT NULL`'s一样多次重复`CROSS JOIN`，并且主查询的`JOIN`and`WHERE`条件只需要执行一次。

使用[`CROSS JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)的好处是您不需要评估连接条件，它只是在两组数据之间生成笛卡尔积。

只需在`CROSS JOIN`所有主要操作的末尾`JOIN`添加即可手动复制数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:55:33.533

试试这个：：

```
SELECT P.PRICE, P.PRODUCT_ID FROM PRODUCT P WHERE P.PRODUCT_ID=41
UNION ALL
SELECT P.PRICE, P.PRODUCT_ID FROM PRODUCT P WHERE P.PRODUCT_ID=41 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:02:17.987

另一种方式（`UNION ALL`在内部级别使用）。更容易与复杂的查询结合（正如您在评论中提到的）：

```
SELECT p.price, p.product_id
FROM 
        PRODUCT AS p 
    JOIN 
        ( SELECT 41 AS product_id
        UNION ALL
          SELECT 41
        ) AS selection
      ON p.product_id = selection.product_id ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:35:26.167

笛卡尔积（类似于交叉连接）：

```
SELECT P.PRICE, P.PRODUCT_ID
FROM FROM PRODUCT P
JOIN (values(1),(2) ) AS two ON 1=1
WHERE P.PRODUCT_ID IN (42)
        ; 
```

# javascript - div根据屏幕分辨率自动调整

> ID：11431110
> 
> 赞同：0
> 
> 时间：2012-07-11T10:54:22.457
> 
> 标签：javascript, jquery

我的设计类似于下面给出的链接。当我打开此链接并最小化或最大化浏览器时，它的 div 框会相应地调整它们的位置。我正在寻找相同类型的 jQuery 或 JavaScript。我试图下载它，但它在 IE 7 中不起作用，我也想知道这种 jQuery 的名称

```
http://berndkammerer.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:57:44.180

您可以使用[**jQuery Masonry**](http://masonry.desandro.com/)自定义 jQuery 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:00:04.983

您可能想查看[同位素](http://isotope.metafizzy.co/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:02:14.450

试试[http://isotope.metafizzy.co](http://isotope.metafizzy.co)

# jquery - jQuery，文本匹配默认选择

> ID：11431113
> 
> 赞同：0
> 
> 时间：2012-07-11T10:54:34.597
> 
> 标签：jquery, ruby-on-rails, forms

使用：Rails 和 jQuery

我有一个带有 Url 文本框输入的表单，用户可以在其中放置一个 url，例如：

[http://www.webshop.com/article/123](http://www.webshop.com/article/123)

url 是@product 的一个属性。

在相同的表单中，我还有一个包含商店（Store.all）的下拉列表。商店有一个属性 store.short_url 可以是“www.webshop.com”。

我想使用 jQuery，以便当用户在 url-textbox 中输入[http://www.webshop.com/article/123](http://www.webshop.com/article/123)时，我想将其与 Store 对象进行比较，看看该商店是否在数据库中哪个 short_url匹配域名，如果匹配，则默认在下拉列表中存储。

字符串匹配应该不是问题，但我如何在 jQuery 中处理这个问题？

1.  填写网址字段
2.  当文本字段失焦时，请执行以下操作：
3.  查找具有匹配 url 的商店
4.  将该商店设置为默认值

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:19:12.873

基本要点：

```
$(document).ready(function(){
    $('#url_input').change(function(){
    var urlPattern = /(http|ftp|https):\/\/([\w-]+(\.[\w-]+)+)([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/
        if(urlPattern.test($(this).val())){
            alert('hurray');
            url = ($(this).val().match(urlPattern))[2].toLowerCase();
            $('option[value="'+url+'"]','#available_types').each(function(){$(this).attr('selected',true)});
        }
    });
    });
    ​ 
```

[http://jsfiddle.net/sScma/2/](http://jsfiddle.net/sScma/2/)

# iphone - 删除支持 iCloud 的文件夹中包含文档的 iOS 应用程序

> ID：11431115
> 
> 赞同：1
> 
> 时间：2012-07-11T10:54:38.923
> 
> 标签：iphone, ios, xcode, icloud

我发现如果我从设备中删除一个应用程序，当然会删除所有本地文档，但如果该应用程序有文件存储在启用 iCloud 的文件夹 ( `[[[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil]`) - 这些文件不会被删除。

这会导致两个问题：

*   这些文件占用的存储空间不会被释放。
*   如果用户重新安装应用程序，文件夹中已经有文件，这会破坏正常的初始化。

我可以通过在第一次启动时浏览目录并删除其中的所有内容来解决第二个问题，但这似乎有点尴尬。

我想不出解决第一个问题的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:52:24.773

iOS 会自动清除 iCloud 目录中的文件以释放空间。您也可以专门从您的应用程序中“驱逐”文件，但由于您正在解决应用程序被删除的情况，这可能不会有太大帮助。

有关更多信息，请参阅 developer.apple.com/icloud 上的视频。

# gwt-rpc - 逐步将 GWT 与 Spring 集成的示例/教程

> ID：11431116
> 
> 赞同：1
> 
> 时间：2012-07-11T10:54:44.280
> 
> 标签：gwt-rpc

是否有关于“如何将 GWT 与 Spring MVC 集成”的详细说明的教程或示例代码。

谢谢，维沙尔·阿南德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:49:24.300

[http://technophiliac.wordpress.com/2008/08/24/giving-gwt-a-spring-in-its-step/](http://technophiliac.wordpress.com/2008/08/24/giving-gwt-a-spring-in-its-step/)

# java - jqgrid 将 Jqgrid 数据发布回 Action 类

> ID：11431117
> 
> 赞同：0
> 
> 时间：2012-07-11T10:54:48.337
> 
> 标签：java, javascript, jquery, jqgrid

```
 var mydata = $("#list").jqGrid('getGridParam','data');
    var paras=new Array();
    for(var i=0;i<mydata.length;i++){
        var row=mydata[i];
        paras.push($.param(row));
     }
    paras = paras.join('&');
   jQuery("#list").jqGrid('setGridParam',{postData:paras});

$("#list").jqGrid('setGridParam',{url:'portfolioStValidate.action'}).trigger('reloadGrid'); 
```

我急需与 jqgrid 相关的帮助。我需要创建一个 jqgrid，用户可以在其中编辑行并将完整的数据集保存回数据库。为了将 jqgrid 数据传递回 java 操作类，我使用上面的代码。我没有将所有记录都返回给我的 Java 类。我的网格有 42 列和大约 800 行。在我的 Java Action 中，我总是只得到 271 行。有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:23:18.110

我发现以下将网格的大数据发布回服务器的方法可能对某些人有所帮助。

```
var mydata = $("#list").jqGrid('getGridParam','data');

var paras=new Array();

paras = JSON.stringify(mydata);
//jQuery("#list").jqGrid('setGridParam',{data:paras});  
//$("#list").setGridParam({ajaxGridOptions: { contentType: "application/json" }});
$("#list").setGridParam({datatype: 'json'}); 

jQuery("#list").jqGrid('setGridParam',{postData:{value:paras}});
//$("#list").setGridParam({ajaxGridOptions: { contentType: "application/json" }});

$("#list").jqGrid('setGridParam',{url:'portfolioStValidate.action'}).trigger('reloadGrid'); 
```

我添加了一个 json2.js 文件

# javascript - 将影片剪辑导出为 Sprite 表时出现 Adob e Flash CS6 JSFL 问题

> ID：11431123
> 
> 赞同：1
> 
> 时间：2012-07-11T10:55:15.727
> 
> 标签：javascript

如何使用 JSFL 类 API“SpriteSheetExporter.exportSpriteSheet()”。有人可以帮我举个具体的例子。使用 flash cs6 最新功能“生成 Sprite Sheet”手动将影片剪辑导出为 spritesheet 没有问题，但如果使用完成JSFL，我没有按预期使用 CS6 javascript API .url 获得输出：http: [//help.adobe.com/en_US/flash/cs/extend/WSd5f4b6c52cfaa4b1-d3431961351cb0528c-8000.html](http://help.adobe.com/en_US/flash/cs/extend/WSd5f4b6c52cfaa4b1-d3431961351cb0528c-8000.html)。

如果可能，请帮助我提供一个小的 jsfl 脚本示例。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:32:18.977

```
var export = fl.spriteSheetExporter;
export.beginExport();
  export.addSymbol(fl.getgetDocumentDOM().getTimeline().layers[0].frames[0].elements[0].libraryItem);
export.layoutFormat = "JSON";
export.exportSpriteSheet("file///:c|users/test", "png"); 
```

# java - netbeans 附带的 Tomcat 目录在哪里？

> ID：11431127
> 
> 赞同：2
> 
> 时间：2012-07-11T10:55:22.987
> 
> 标签：java, tomcat, netbeans

我已经安装了预捆绑的 netbeans 7.1 `Tomcat`。我需要`context.xml`在tomcat中找到。netbeans 中的tomcat 目录在哪里？我在哪里可以找到`context.xml`

![在此处输入图像描述](../Images/10c1892d40272f73aa4b685ea3b22060.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:09:20.737

在 Netbeans 中，转到工具 --> 服务器 --> 您将获得服务器详细信息。

您将在以下位置找到“Context.xml”

/tomcat 主文件夹路径/conf

# opengl-es - 使用 etcpack 将纹理批量转换为 ETC1

> ID：11431128
> 
> 赞同：0
> 
> 时间：2012-07-11T10:55:23.957
> 
> 标签：opengl-es, batch-file, dos

我必须使用命令行转换将游戏的纹理文件转换为 ETC（爱立信纹理压缩）格式

```
etcpack img.jpg new-img.jpg 
```

我的文件夹中有 100 多个文件，并且从命令行对每个文件使用 etcpack 工具很痛苦。

我可以编写一个 dos 脚本或批处理文件来执行此操作吗？我应该如何为当前文件夹和子文件夹中的所有文件执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:54:30.420

从命令行，不使用脚本：

```
for /r %F in (*.jpg) do etcpack "%F" "new-%f" 
```

您不应两次运行上述命令，否则它将尝试转换已转换的“new-...”文件。以下更复杂的命令可以安全运行多次。

```
for /f "eol=: delims=" %F in ('dir /b /s /a-d *.jpg ^| findstr /vlib "new-"') do etcpack "%F" "new-%F" 
```

如果要将任一命令放入批处理脚本中，请将每个命令更改`%F`为`%%F`.

# mysql - 更新数据库时自动向用户发送电子邮件

> ID：11431132
> 
> 赞同：0
> 
> 时间：2012-07-11T10:55:37.603
> 
> 标签：mysql, database, email

我想知道如何自动向注册用户发送电子邮件以确认他们的订阅。基本上，当用户注册时，它会在 SQL 数据库中添加一行。

非常感谢，我希望这很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:58:34.933

你应该在你的语言水平上做到这一点。

# php - 查询Oracle数据库的功能 - '未定义索引'通知

> ID：11431134
> 
> 赞同：0
> 
> 时间：2012-07-11T10:55:43.033
> 
> 标签：php, arrays, oracle, select, oracle-call-interface

为了提供一些上下文，不久前在这个站点上的 VolkerK 的帮助下，我创建了一个函数，它查询 Oracle 数据库并将内容放入格式整齐的 PHP 数组中，具体取决于索引。[这是原始问题](https://stackoverflow.com/questions/9803202/creating-a-function-to-grab-data-from-an-oracle-database-array-by-id)。

问题是，在某些情况下，我只想从快速查询中返回一个值，当我这样做时，会出现以下错误：`Notice: Undefined index:`

这是我正在使用的代码：

```
function oracleGetData($query, $id = null) {
    global $conn;

    $results = array();
    $sql = OCI_Parse($conn, $query);
    OCI_Execute($sql);
    while ( false!==($row=oci_fetch_assoc($sql)) ) {
        $results[ $row[$id] ] = $row;
    }

    // remove one layer if there's only one record
    if(count($results) == 1 and is_null($id)) {
        $results = array_pop($results);
    }
    return $results;
} 
```

我尝试更改填充数组的行，如下所示：

```
if(is_null($id)) {
    while ( false!==($row=oci_fetch_assoc($sql)) ) {
        $results[ $row ] = $row;
    }
} else {
    while ( false!==($row=oci_fetch_assoc($sql)) ) {
        $results[ $row[$id] ] = $row;
    }
} 
```

基本上，如果 $id 变量为空，请删除对它的所有引用，但随后出现“警告：非法偏移类型”错误。

任何帮助将不胜感激，我尝试将我需要的单个字段传递给函数，但得到相同的错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:14:36.420

也许如果 $id 是 NULL 你可以只使用索引的序号，如：

```
function oracleGetData($query, $id = null)
  { 
  global $conn; 

  $results = array(); 
  $sql = OCI_Parse($conn, $query); 
  OCI_Execute($sql); 

  if(is_null($id)) {
    $idx = 1;

    while (false!==($row=oci_fetch_assoc($sql))) { 
      $results[ $idx ] = $row;
      $idx = $idx + 1;
    }
  } else { 
    while ( false!==($row=oci_fetch_assoc($sql))) { 
      $results[ $row[$id] ] = $row;
    }
  } 

  // remove one layer if there's only one record 

  if(count($results) == 1 and is_null($id)) { 
    $results = array_pop($results); 
  } 

  return $results; 
  } 
```

分享和享受。

# c# - 倒数计时器类的奇怪行为

> ID：11431135
> 
> 赞同：0
> 
> 时间：2012-07-11T10:55:48.673
> 
> 标签：c#, countdowntimer

提前为相当长的帖子和大量代码道歉。

我的应用程序具有定时自动保存功能。用户要求我提供剩余时间的视觉指示器。我对倒数计时器进行了一些研究，并最终编写了以下课程：

```
public class CountDownTimer
    {

        private Timer timer;
        private int remaining;

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Count down ticked delegate. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ///
        /// <param name="remaining">    The remaining. </param>
        /// <param name="maximum">      The maximum. </param>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public delegate void CountDownTickedDelegate(int remaining, int maximum);

        /// <summary>   Event queue for all listeners interested in Ticked event. </summary>
        public event CountDownTickedDelegate Ticked;

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Count down percent delegate. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ///
        /// <param name="percent">  The percent. </param>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public delegate void CountDownPercentDelegate(int percent);

        /// <summary>   Event queue for all listeners interested in Percent events. </summary>
        public event CountDownPercentDelegate Percent;

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Count down done delegate. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public delegate void CountDownDoneDelegate();

        /// <summary>   Event queue for all listeners interested in Done events. </summary>
        public event CountDownDoneDelegate Done;

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets the maximum value to count down from </summary>
        ///
        /// <value> The maximum value. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public int Maximum
        {
            get;
            set;
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Gets or sets a value indicating whether the timer is Paused. </summary>
        ///
        /// <value> true if paused, false if not. </value>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public bool Paused
        {
            get;
            set;
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Starts this CountDownTimer. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public void Start()
        {
            timer = new Timer {
                Interval = 1000
            };
            timer.Tick += onTimerTick;
            timer.Enabled = true;
            remaining = Maximum;
            Paused = false;
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Stops this CountDownTimer. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public void Stop()
        {
            if (timer == null)
            {
                return;
            }

            Paused = true;
            timer.Enabled = false;
            timer = null;
            if (Percent != null)
            {
                Percent(100);
            }
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Resets and restarts this CountDownTimer. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        public void Reset()
        {
            Stop();
            Start();
        }

        ////////////////////////////////////////////////////////////////////////////////////////////////////
        /// <summary>   Handles the timer tick event. </summary>
        ///
        /// <remarks>   Jon, 18/06/2012\. </remarks>
        ///
        /// <param name="sender">   Source of the event. </param>
        /// <param name="e">        Event information to send to registered event handlers. </param>
        ////////////////////////////////////////////////////////////////////////////////////////////////////

        private void onTimerTick(object sender, EventArgs e)
        {
            if (remaining > 0)
            {
                if (Ticked != null)
                {
                    Ticked(remaining, Maximum);
                }

                if (Percent != null)
                {
                    int percent = remaining * 100 / Maximum;
                    Percent(percent);
                }

                if (!Paused)
                {
                    remaining--;
                }
                else
                {
                    remaining = Maximum;
                }
            }
            else
            {
                Stop();

                if (Done != null)
                {
                    Done();
                }
            }
        }
    } 
```

我正在使用计时器，每次它“触发”时，我都会减少一个计数器。每次递减都会启动一个事件，以便我的表单可以直观地呈现它。当计数器达到零时，另一个事件将启动自动保存。

如果用户手动保存或打开新项目，还包括一些其他位以允许重新启动自动保存。

它似乎对我有用。但是，用户报告说计时器运行的时间越长，自动保存之间的间隔就越短。我将计时器设置为每秒滴答一次，我的调查表明它以两倍的速度运行。因此，如果计数器设置为 60（秒），那么它每 30 次运行一次。我无法复制用户看到的行为，但他的日志肯定显示事情运行得太快了。

这与主应用程序在同一个线程中 - 这可能是一个问题。到目前为止，我所有的测试都没有出现任何问题，除了蜱虫似乎每三次左右连续触发两次。

非常感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:37:43.293

我看到的一个问题是，如果`CountDownTimer.Start()`被调用两次（甚至多次），而没有适当的`CountDownTimer.Stop()`调用，您最终会得到`Timer`对象的两个或多个激活实例，它们都调用您的`onTimerTick()`事件处理程序。

这可能会导致您描述的效果，因为所有正在运行的`Timer`实例都会分别减少剩余的迭代。

你的调用代码可以吗？

**编辑：**

作为一种解决方法，我建议您`Stop()`从`Start()`. 或者更好的是，您不会`Timer`为每个新的倒计时操作重新创建对象。在构造函数中创建`Timer`对象并仅操作其属性。

在处置对象时从实例中删除`onTimerTick()`事件处理程序也不是一个坏主意。否则 GC 无法收集实例，因为它仍然持有对其实例的引用。`timer``Timer``timer``CountDownTimer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:13:59.910

Timer 的 Elapsed 事件在每个间隔后不断触发。您需要先停止 Elapsed 事件处理程序方法中的计时器，然后在离开方法时再次启动它。否则，如果您在事件处理程序方法中的代码需要大约 1 秒，则 Elapsed 事件将再次引发。例如

```
private void onTimerTick(object sender, EventArgs e)
{
    try
    {
        timer.Stop();
        //Do your stuff here
    }
    finally { timer.Start(); }
} 
```

# mysql - MySQL存储过程在新的日/月/年插入新行

> ID：11431138
> 
> 赞同：0
> 
> 时间：2012-07-11T10:56:04.367
> 
> 标签：mysql, stored-procedures, triggers, date-comparison

我目前正在编写一个触发器，它在主表中每个新插入的行上调用一个存储过程，计算和更新辅助表中的特定行。我有一个日期列，它以这种格式保存日期和时间：**YYYY-MM-DD hh:mm:ss**

现在我的应用程序中有一个特定的逻辑，它比较主表中两个序列行的日期以及日期是否是新的一天（例如 2012-07-11 00:00:00，2012-07-10 23 之前的日期： 59:00）然后它在辅助表中创建一个新行，然后我使用存储过程对其进行更新。现在我在想是否可以将逻辑从应用程序移动到数据库（使用存储过程）。编程逻辑应如下所示：

1.  将新行插入主表时执行触发器。[这已经实现]
2.  如果新行中的日期是新的日/月/年，则在辅助表中创建新行。**[这是我不知道如何在存储过程逻辑中实现的]**
3.  更新辅助表中的行。[这已经实现]

目前我在 Joda 库的帮助下比较 Java 应用程序中的日期，这非常容易。但是我不知道如何在 MySql 存储过程中编写这种逻辑，如果有可能的话？

# java - 如何使用 Apache Commons 解压 TAR 文件

> ID：11431143
> 
> 赞同：7
> 
> 时间：2012-07-11T10:56:21.047
> 
> 标签：java, file-io, tar, apache-commons, compression

我正在使用 Apache Commons 1.4.1 库来压缩和解压缩`".tar.gz"`文件。

最后一点我遇到了麻烦 - 将 a`TarArchiveInputStream`转换为`FileOutputStream`.

奇怪的是，它打破了这条线：

```
FileOutputStream fout = new FileOutputStream(destPath); 
```

* * *

`destPath`是具有规范路径的文件：C:\Documents and Settings\Administrator\My Documents\JavaWorkspace\BackupUtility\untarred\Test\subdir\testinsub.txt

产生的错误：

```
Exception in thread "main" java.io.IOException: The system cannot find the path specified 
```

知道它可能是什么吗？为什么它无法找到路径？

我在下面附上整个方法（其中大部分是从[这里](http://webcache.googleusercontent.com/search?q=cache%3aOQ1Ex8ChLpkJ%3awww.thetechallies.com/node/4%20&cd=10&hl=en&ct=clnk&gl=mt)提取的）。

```
private void untar(File dest) throws IOException {
    dest.mkdir();
    TarArchiveEntry tarEntry = tarIn.getNextTarEntry();
    // tarIn is a TarArchiveInputStream
    while (tarEntry != null) {// create a file with the same name as the tarEntry
        File destPath = new File(dest.toString() + System.getProperty("file.separator") + tarEntry.getName());
        System.out.println("working: " + destPath.getCanonicalPath());
        if (tarEntry.isDirectory()) {
            destPath.mkdirs();
        } else {
            destPath.createNewFile();
            FileOutputStream fout = new FileOutputStream(destPath);
            tarIn.read(new byte[(int) tarEntry.getSize()]);
            fout.close();
        }
        tarEntry = tarIn.getNextTarEntry();
    }
    tarIn.close();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T09:13:14.533

您的程序有 java 堆空间错误。所以我认为需要做一点改变。这是代码...

```
public static void uncompressTarGZ(File tarFile, File dest) throws IOException {
    dest.mkdir();
    TarArchiveInputStream tarIn = null;

    tarIn = new TarArchiveInputStream(
                new GzipCompressorInputStream(
                    new BufferedInputStream(
                        new FileInputStream(
                            tarFile
                        )
                    )
                )
            );

    TarArchiveEntry tarEntry = tarIn.getNextTarEntry();
    // tarIn is a TarArchiveInputStream
    while (tarEntry != null) {// create a file with the same name as the tarEntry
        File destPath = new File(dest, tarEntry.getName());
        System.out.println("working: " + destPath.getCanonicalPath());
        if (tarEntry.isDirectory()) {
            destPath.mkdirs();
        } else {
            destPath.createNewFile();
            //byte [] btoRead = new byte[(int)tarEntry.getSize()];
            byte [] btoRead = new byte[1024];
            //FileInputStream fin 
            //  = new FileInputStream(destPath.getCanonicalPath());
            BufferedOutputStream bout = 
                new BufferedOutputStream(new FileOutputStream(destPath));
            int len = 0;

            while((len = tarIn.read(btoRead)) != -1)
            {
                bout.write(btoRead,0,len);
            }

            bout.close();
            btoRead = null;

        }
        tarEntry = tarIn.getNextTarEntry();
    }
    tarIn.close();
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T11:43:44.077

几个一般的观点，你为什么用`File`构造函数做巫术，那里有一个[完美可用的构造函数](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.io.File,%20java.lang.String%29)，你可以定义`File`你想要创建的名称并给一个父文件？

其次，我不太确定 Windows 路径中的空格是如何处理的。这可能是您的问题的原因。尝试使用我上面提到的构造函数，看看它是否有所作为：（`File destPath = new File(dest, tarEntry.getName());`假设这`File dest`是一个正确的文件，并且存在并且您可以访问。

第三，在对`File`对象进行任何操作之前，您应该检查它是否存在以及是否可以访问。这最终将帮助您查明问题。

# jquery - 如何创建一个基本的 jquery 循环？

> ID：11431148
> 
> 赞同：0
> 
> 时间：2012-07-11T10:56:32.073
> 
> 标签：jquery, loops, slider

我正在尝试创建一个简单的循环，该循环将循环播放并且可以停止和启动。

我试着这样称呼自己

```
var theloop = (function(){

            var theloop = (function(){

            $('#goldspot-2012 ul#goldspot-2012-list li').eq(currentItem).removeClass('current').fadeOut(500);
            $('#goldspot-2012 ul#goldspot-2012-list li').eq(currentItem+1).addClass('current').fadeIn(500);
            $('#gs-controls ul li').eq(currentItem).removeClass('current');             
            $('#gs-controls ul li').eq(currentItem+1).addClass('current');          

            if (currentItem == items -1){
                currentItem = 0;
                theloop();
            }

            else {
                currentItem++;  
                theloop();
            }

        }); 
```

这只是错误，因为我想象它陷入了一些无休止的循环

我也试过

```
var theloop = setInterval(function(){

            $('#goldspot-2012 ul#goldspot-2012-list li').eq(currentItem).removeClass('current').fadeOut(500);
            $('#gs-controls ul li').eq(currentItem).removeClass('current');                         

            if (currentItem == items -1){
                currentItem = 0;
            }

            else {
                currentItem++;  
            }
            $('#goldspot-2012 ul#goldspot-2012-list li').eq(currentItem).addClass('current').fadeIn(500);
            $('#gs-controls ul li').eq(currentItem).addClass('current');

        }, 5000); 
```

但这不能轻易停止和开始。

任何人都可以向我展示一个基本循环，直到你停止它，或者上面两个中的一个可以稍微修补一下吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:02:34.197

尝试这个：

```
 var cycler = true;
        var theloop = (function(){

        $('#goldspot-2012 ul#goldspot-2012-list li').eq(currentItem).removeClass('current').fadeOut(500);
        $('#goldspot-2012 ul#goldspot-2012-list li').eq(currentItem+1).addClass('current').fadeIn(500);
        $('#gs-controls ul li').eq(currentItem).removeClass('current');             
        $('#gs-controls ul li').eq(currentItem+1).addClass('current');          

        if (currentItem == items -1){
            currentItem = 0;
        }

        else {
            currentItem++; 
        }

        if(cycler) theloop();

        }); 
```

这使您有机会停止无限循环。当您需要停止循环时，放置一些将循环器设置为*false的按钮或代码。*

# android - Android：不显示我的 ListView 单元格的描述部分

> ID：11431152
> 
> 赞同：0
> 
> 时间：2012-07-11T10:56:39.990
> 
> 标签：android, listview

我的单元格 (search_cell.xml) 有以下 XML 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:orientation="vertical"
    android:paddingLeft="15dp"
    android:paddingTop="3dp"
    android:background="@color/white"
    >

   <TextView android:id="@+id/libelle"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:textSize="16dp"
             android:textStyle="bold"
             />

    <TextView android:id="@+id/valeur"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:textSize="10dp"
             android:textStyle="normal"
             />

</LinearLayout> 
```

在我的活动 xml 文件中：

```
<ListView
    android:id="@+id/listRecherche"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="150dp" >
</ListView> 
```

在 Java 中：

list = (ListView) findViewById(R.id.listRecherche);

```
 ArrayList<HashMap<String, String>> listItem = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map = new HashMap<String, String>();

    map.put("libelle", "Microsoft");
    map.put("valeur", "1975");
    listItem.add(map);

    map = new HashMap<String, String>();
    map.put("libelle", "Apple");
    map.put("valeur", "1976");
    listItem.add(map);

    map = new HashMap<String, String>();
    map.put("libelle", "Dell");
    map.put("valeur", "1984");
    listItem.add(map);

    SimpleAdapter mSchedule = new SimpleAdapter (this.getBaseContext(), listItem, R.layout.recherche_cell,
            new String[] {"libelle", "valeur"}, new int[] {R.id.libelle, R.id.valeur});

    list.setAdapter(mSchedule); 
```

这就是我得到的。为什么我看不到年份字段？

![在此处输入图像描述](../Images/fa4b0cbb212abc8f014777db7e9bff0d.png)

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:08:54.617

android:layout_height="fill_parent" 会占据整个高度。试试 android:layout_height="Wrap_content"，它会占用你所拥有的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:04:21.237

试试这个新的 search_cell.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:orientation="vertical"
    android:paddingLeft="15dp"
    android:paddingTop="3dp"
    android:background="@color/white"
    >

   <TextView android:id="@+id/libelle"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:textSize="16dp"
             android:textStyle="bold"
             />

    <TextView android:id="@+id/valeur"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:textSize="10dp"
             android:textStyle="normal"
             />

</LinearLayout> 
```

您使用 fill_parent 作为第一个 textview 高度参数。所以这会填满整个父母。所以，我将八个参数更改为“wrap_content”

# regex - 用户名的正则表达式以字母开头并以字母或数字结尾

> ID：11431154
> 
> 赞同：1
> 
> 时间：2012-07-11T10:57:02.903
> 
> 标签：regex

我想创建一个检查有效用户名的函数，但我很困惑这个检查需要什么正则表达式？

用户名可以有`[a-zA-Z0-9-_.]`

但是用户名必须以这样的字母开头->`[a-zA-Z]`

用户名结束字符不能是特殊字符，只能是字母或数字

用户名可以有无限的点或破折号或下划线，但不能按顺序（它们必须用字母或数字分隔）

例如这是有效的用户名：

```
----------
e.r.m.y.a
ermya2
erm.y-a.2
erric.nelson
eric_nelson
eric-nelson
e-r-i-c_n-e.s.o-n
-------------- 
```

无效的用户名是：

```
2ermya
erm..ya
er__mya
er--mya
er-_ya
er._-ya
er.-ya
ermya_
ermya.
ermya-
erm.-_ya
or much much more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:02:07.487

我认为

`^[a-zA-Z]([._-]?[a-zA-Z0-9]+)*$`

可能会成功。现在它的工作

# iphone - 解析日历事件

> ID：11431157
> 
> 赞同：1
> 
> 时间：2012-07-11T10:57:16.887
> 
> 标签：iphone, ios, eventkit

在我的应用程序中，我正在使用 eventkit 框架检索所有日历事件。现在我已将其解析为 json 以将其上传到服务器。最好的方法是什么，如果有任何可以解析日历事件的解析器库或框架，请给我一个想法。下面是我用来检索事件的代码

```
- (NSMutableArray *)fetchallevents {

NSDate *start = [NSDate distantPast];    
  NSLog(@"start date is : %@",start);

NSDate *finish = [NSDate distantFuture];
NSLog(@"start date is : %@",finish);
    // use Dictionary for remove duplicates produced by events covered more one  year segment
NSMutableDictionary *eventsDict = [NSMutableDictionary dictionaryWithCapacity:1024];

NSDate* currentStart = [NSDate dateWithTimeInterval:0 sinceDate:start];

int seconds_in_year = 60*60*24*365;

    // enumerate events by one year segment because iOS do not support predicate longer than 4 year !
while ([currentStart compare:finish] == NSOrderedAscending) {

    NSDate* currentFinish = [NSDate dateWithTimeInterval:seconds_in_year sinceDate:currentStart];

    if ([currentFinish compare:finish] == NSOrderedDescending) {
        currentFinish = [NSDate dateWithTimeInterval:0 sinceDate:finish];
    }
    NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:currentStart endDate:currentFinish calendars:nil];
    [eventStore enumerateEventsMatchingPredicate:predicate
                                      usingBlock:^(EKEvent *event, BOOL *stop) {

                                          if (event) {
                                              [eventsDict setObject:event forKey:event.eventIdentifier];                                              }  }];       
    currentStart = [NSDate dateWithTimeInterval:(seconds_in_year + 1)  sinceDate:currentStart];

}   
NSMutableArray *events =[[eventsDict allValues]mutableCopy];  
 //NSLog(@"the evenets for the day is : %@", events);   

return events;

} 
```

# sql - TSQL 内连接

> ID：11431158
> 
> 赞同：3
> 
> 时间：2012-07-11T10:57:25.867
> 
> 标签：sql, sql-server, tsql

我正在为一家多站点公司构建 IT 支持票务门户。我无法理解 JOIN、INNER JOIN、ON 等。

我有 3 张桌子：

*   首先`Support_Ticket`包含`Site_ID`，我已经从之前的查询中获得了。

所以我有`Site_ID`，并且需要获取负责该站点支持的工程师的姓名（字符串）。可以说`Hull`是`Site_ID:1`。

其他 2 张桌子：

*   `Site_Details`: 包含（除其他外）`Site_ID`和`Site_Default_Engineer_ID`.
*   `Engineers`: 包含（除其他外）[ `Engineer_ID`] 和`Engineer_Display_Name`.

我想要实现的是（伪代码！）：

```
return [Engineers].[Engineer_Display_Name]  
where
    [Engineers].[Engineer_ID] = [Site_Details].[Site_Default_Engineer_ID]
    (but first) return [Site_Details].[Site_Default_Engineer_ID] where
    [Site_Details].[Site_ID] = [Support_Ticket].[Site_ID] 
```

如果这有道理？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:02:29.093

此查询应该有效：

```
SELECT support_ticket.something, engineers.engineer_display_name
FROM support_ticket
JOIN site_details ON ( site_details.site_id = support_ticket.site_id )
JOIN engineers ON ( engineers.engineer_id = site_details.site_default_engineer_id ) 
```

它将显示所有工单及其默认工程师。添加`WHERE`- 子句以过滤您要显示的票证。

`JOIN`顺便说一句：和之间没有区别`INNER JOIN`。

# wpf - 使用颜色渐变更改背景颜色

> ID：11431159
> 
> 赞同：1
> 
> 时间：2012-07-11T10:57:29.903
> 
> 标签：wpf, colors, background-color, gradient

我想从我的组合框中更改背景颜色。但我想保留颜色渐变。

![在此处输入图像描述](../Images/69b02d18d788be736bb5c21675379ed8.png)

我试过使用这段代码，但仍然没有得到效果。

```
<Setter Property="Background" Value="White"/> <!-- It's only white :( --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:15:24.923

```
<ComboBox>
    <ComboBox.Background>
        <LinearGradientBrush EndPoint="0,1">
            <GradientStopCollection>
                <GradientStop Color="Blue" Offset="0.5" />
                <GradientStop Color="White" Offset="0.5" />
            </GradientStopCollection>
        </LinearGradientBrush>
    </ComboBox.Background>
</ComboBox> 
```

这将改变背景颜色。更改颜色和偏移以获得您想要的结果。

# android - 使用一个 apk 安装两个应用程序

> ID：11431161
> 
> 赞同：3
> 
> 时间：2012-07-11T10:57:33.803
> 
> 标签：android

我有 2 个应用程序：

1 - 内容提供者；

2 - 使用此 ContentProvider 的应用程序。

我需要使用单个 apk 文件安装这两个应用程序。我想在 Eclipse 中同时推送这两个应用程序，如果我将另一个项目添加到一个应用程序的构建路径并在清单中添加几行。是否可以使用一个 apk 同时安装两个应用程序（其中一个是 ContentProvider）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:16:45.717

> 是否可以使用一个 apk 同时安装两个应用程序（其中一个是 ContentProvider）？

不，对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:08:06.970

您可以在一个 manifest.xml 中定义多个活动、服务等。因此，如果您要将两个应用程序移动到一个项目中，然后将它们都添加到清单中，那么您可以在一个 apk 中安装多个应用程序。

在此处查看有关清单的更多信息：http: [//developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

然而，正如已经指出的，应用程序标签只能出现一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T07:16:34.770

是的，可以在一个 api 中安装两个应用程序（内部活动）。

扩展到 dac2009 的答案..

这是一个执行此操作的示例清单文件。

```
`<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.dualapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="19" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name_people"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.dualapp.MeetPeopleActivity"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name_people"
            android:taskAffinity="com.example.dualapp.MeetPeopleActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.example.dualapp.MeetTechieActivity"
            android:icon="@drawable/ic_tech"
            android:label="@string/app_name_techie"
            android:taskAffinity="com.example.dualapp.MeetTechieActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest>` 
```

安装它会在我的手机中放置两个应用程序图标。

# javascript - 在 OpenCart 页面模板中出现 Gtting 未终止的字符串文字错误

> ID：11431165
> 
> 赞同：0
> 
> 时间：2012-07-11T10:57:47.847
> 
> 标签：javascript, opencart

我收到未终止的字符串文字错误。

```
content:  '<div><p> 
```

这是我用 *.tpl 文件编写的代码。代码是用文档就绪函数编写的。

```
content:  '<div><?php echo strlen($gmap['onelinetext'])>0 ? $gmap['onelinetext'] : $gmap['maptext']; ?></div>' 
```

当我从后端更新内容时，例如“14534 Mayfair Dr”它会填充错误。

有人可以指导我如何解决此错误。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:02:31.740

根据您提供的信息，我假设 PHP 回显正在插入一个包含换行符的字符串。一种可能的解决方案是
在 PHP 代码中转义换行符或替换它们 ' '。

您需要的功能是 str_replace。以下内容取自[http://php.net/manual/en/function.str-replace.php的 PHP 手册](http://php.net/manual/en/function.str-replace.php)

```
<?php
// Order of replacement
$str     = "Line 1\nLine 2\rLine 3\r\nLine 4\n";
$order   = array("\r\n", "\n", "\r");
$replace = '<br />';

// Processes \r\n's first so they aren't converted twice.
$newstr = str_replace($order, $replace, $str); 
```

# java - 如何使用java从SVN获取树结构

> ID：11431172
> 
> 赞同：1
> 
> 时间：2012-07-11T10:58:07.830
> 
> 标签：java, svn, svnkit

有没有办法在java中将SVN结构作为树结构？

例如：如果我指定路径[http://sample.com/repository/pag/branches/dev/Structure/services/](http://sample.com/repository/pag/branches/dev/Structure/services/)

我想要服务下的所有条目，如果它再次包含一个目录，它的条目也在树中？

谢谢。

**注意**：我见过**getDir()**。但在这里我必须继续迭代它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:56:41.320

如果你需要所有的树，你可以用“状态”请求来做，报告告诉你有一个空的工作副本。一个“状态”请求应该比多个 getDir() 请求快。一个如何用[SVNKit做到这一点的例子](http://svnkit.com/)

```
 final SVNRepository svnRepository = SVNRepositoryFactory.create(url);
    try {
        svnRepository.status(revision, "", SVNDepth.INFINITY, new ISVNReporterBaton() {
            @Override
            public void report(ISVNReporter reporter) throws SVNException {
                reporter.setPath("", null, revision, SVNDepth.INFINITY, true);
                reporter.finishReport();
            }
        }, new ISVNEditor() {
            @Override
            public void targetRevision(long revision) throws SVNException {

            }

            @Override
            public void openRoot(long revision) throws SVNException {
                System.out.println("<root>");
            }

            @Override
            public void deleteEntry(String path, long revision) throws SVNException {
            }

            @Override
            public void absentDir(String path) throws SVNException {
            }

            @Override
            public void absentFile(String path) throws SVNException {
            }

            @Override
            public void addDir(String path, String copyFromPath, long copyFromRevision) throws SVNException {
                System.out.println("directory: " + path);
            }

            @Override
            public void openDir(String path, long revision) throws SVNException {
            }

            @Override
            public void changeDirProperty(String name, SVNPropertyValue value) throws SVNException {
            }

            @Override
            public void closeDir() throws SVNException {
            }

            @Override
            public void addFile(String path, String copyFromPath, long copyFromRevision) throws SVNException {
                System.out.println("file: " + path);
            }

            @Override
            public void openFile(String path, long revision) throws SVNException {
            }

            @Override
            public void changeFileProperty(String path, String propertyName, SVNPropertyValue propertyValue) throws SVNException {
            }

            @Override
            public void closeFile(String path, String textChecksum) throws SVNException {
            }

            @Override
            public SVNCommitInfo closeEdit() throws SVNException {
                return null;
            }

            @Override
            public void abortEdit() throws SVNException {
            }

            @Override
            public void applyTextDelta(String path, String baseChecksum) throws SVNException {
            }

            @Override
            public OutputStream textDeltaChunk(String path, SVNDiffWindow diffWindow) throws SVNException {
                return null;
            }

            @Override
            public void textDeltaEnd(String path) throws SVNException {
            }
        });
    } finally {
        svnRepository.closeSession();
    } 
```

# php - 正如 Twitter.com 对 t.co (php/apache) 所做的那样，将缩短的 .co url 重定向到完整的 .com

> ID：11431173
> 
> 赞同：0
> 
> 时间：2012-07-11T10:58:12.253
> 
> 标签：php, .htaccess, codeigniter, redirect, http-status-code-301

我想为我的网站制作缩短链接，以便在推文中使用。我对类似 t.co 的 URL 感兴趣，但对如何实现重定向感到困惑。

以下是我网站上的链接通常的外观：

```
https://mysite.com/item/this-is-a-book-on-toasters 
```

这是我希望缩短链接的外观，该链接将重定向到上述链接

```
https://ms.co/Im8y2x 
```

基于谷歌搜索如何做到这一点，看起来我需要做一个 301 重定向。我正在使用 PHP，特别是 Codeigniter，我猜有 2 个组件：PHP 脚本和 .htaccess。

这是我的.htaccess：

```
RewriteEngine on
RewriteRule ^/?$ https://mysite.com [L]
RewriteRule ^(.*)$ https://ms.co/$1 [R=301,NC] 
```

我认为我需要的 PHP 在[这里](https://stackoverflow.com/questions/959957/php-short-hash-like-url-shortening-websites)。

不幸的是，我无法解释此链接上的答案来制作有用的脚本。有人可以帮忙吗？另外，我的 .htaccess 看起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:14:01.283

这应该是您的短链接网站 (ms.co) 上的 .htaccess 代码：

```
RewriteEngine On

RewriteRule ^(.*)$ https://mysite.com/in.php?id=$1 [R=301,L] 
```

in.php 应该包含解码 $_GET['id'] 的脚本（通过您提供的链接中提供的短哈希解码方法），将其与数据库中的 ID 匹配，并检索它应该重定向到的页面.

顺便说一句，我没有在代码中添加 NC 部分的原因是因为大写/小写（通常）在使用解码方法时会产生不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:03:29.297

我已经回答了我自己的问题。考虑到上面的问题，他们的 .htaccess 指令应该是这样的：

```
RewriteCond %{HTTP_HOST} ^o-a\.co$ [NC] // the rewrite rule
RewriteCond %{HTTPS} =on //to enable HTTPS
RewriteRule ^(.*)$ https://mysite.com/page-to-handle-hash/$1 [L] //where in your application you want to send the 6-digit hash 
```

# delphi - Delphi shell上下文菜单，如何绘制图标

> ID：11431179
> 
> 赞同：2
> 
> 时间：2012-07-11T10:58:36.260
> 
> 标签：delphi, shell, contextmenu

我可以获得一些代码来显示如何在右键单击上下文菜单上绘制位图/图标吗？

我已经有用于上下文菜单的 DLL 的工作代码，但它只是文本。此处示例：http: [//www.marcocantu.com/code/md5/TODOSHLL.htm](http://www.marcocantu.com/code/md5/TODOSHLL.htm)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:15:10.167

看来您可以简单地使用[SetMenuItemBitmaps](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647998%28v=vs.85%29.aspx) [API](http://www.codeproject.com/Articles/445/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)。

编辑：[这](http://4programmers.net/Icontextmenu_i_Ikon%C4%85)是一个 Delphi 示例。

编辑 2：**警告**：我刚刚注意到 Delphi 示例泄漏了位图句柄，最终可能会使系统崩溃。位图应该只在对象的构造函数中加载一次（最好从它自己的资源中加载，而不是从文件系统中加载）并在析构函数中释放。

# javascript - jquery如何知道复选框是否被选中？

> ID：11431180
> 
> 赞同：1
> 
> 时间：2012-07-11T10:58:42.293
> 
> 标签：javascript, jquery

有没有更好的方法来做到这一点：

```
var IsC = $('input[type=checkbox]').attr("checked") == "checked" ? true : false; 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:59:21.823

您可以使用[:checked 选择器](http://api.jquery.com/checked-selector/)

```
var IsC = $('input[type=checkbox]').is(":checked"); 
```

或者 ：

```
var IsC = $('input[type=checkbox]:checked').length>0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:00:34.057

```
$("input[type=checkbox]").is(":checked") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:07:25.960

```
var IsC = $('input[type=checkbox]').attr("checked") == "checked" ? true : false; 
```

和刚才说的一样：

```
var IsC = $('input[type=checkbox]').attr("checked") == "checked"; 
```

因为`==`将返回`true`or `false`。（纯粹是 javascript 更改）

* * *

jQuery 优化（至少在字符数方面）是：

```
var IsC = $('input:checkbox').is(':checked'); 
//returns true if at least one checkbox in the document is checked 
```

您可以通过告诉选择器应该在哪里找到输入来添加比较范围：

```
var IsC = $('#myForm input:checkbox').is(':checked'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:02:06.977

一种方法是使用[dystroy](https://stackoverflow.com/a/11431187/219217)发布的解决方案。

另一种是使用`prop`方法而不是`attr`. [在http://api.jquery.com/prop/](http://api.jquery.com/prop/)检查示例

```
elem.checked
// true (Boolean) Will change with checkbox state

$(elem).prop("checked")
// true (Boolean) Will change with checkbox state

elem.getAttribute("checked")
// "checked" (String) Initial state of the checkbox; does not change

$(elem).attr("checked") //(1.6)
// "checked" (String) Initial state of the checkbox; does not change

$(elem).attr("checked") //(1.6.1+)
// "checked" (String) Will change with checkbox state

$(elem).attr("checked") //(pre-1.6)
// true (Boolean) Changed with checkbox state 
```

# c# - 通过从 DataGridView 获取数据来编写 XML 文档

> ID：11431181
> 
> 赞同：0
> 
> 时间：2012-07-11T10:58:47.010
> 
> 标签：c#, xml, visual-studio-2008, datagridview

如何通过**从 DataGridView 获取数据来****编写**具有指定节点的XML 文档？我有一个 DataGridView，需要写入包含该数据的 XML 文件，该文件也可以在应用程序中进一步加载。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:08:35.603

您将拥有一个网格数据源，使用该数据源本身您可以创建 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:10:22.043

你可以`Serialize`的数据`DataGridView`，看看`DataSource`的`dataGridView`。**

# sql - 更新时从 SQL Server 导出数据

> ID：11431183
> 
> 赞同：0
> 
> 时间：2012-07-11T10:59:02.783
> 
> 标签：sql, sql-server, sql-server-2008, triggers

当特定列更新时，我需要从 SQL Server 导出数据，想知道是否有一些推荐的方法来做到这一点？

我有一个包含“已激活”列的表，当此值更改为 true 时，应触发导出。

我想我需要一个对“激活”中的变化做出反应的触发器。而我目前的两个选择是直接从触发器调用webservice，或者让触发器在我的一个服务读取的表中插入数据并调用extern服务。这些想法中的任何一个更可取还是有其他更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:03:46.350

您应该查看 SQL Server Service Broker - 它可用于触发对数据更改的外部操作。

可以在这里找到一种实现（我没有使用过）：http: [//lab.arc90.com/2009/02/05/sqlwatcher-ad-hoc-database-change-monitoring/](http://lab.arc90.com/2009/02/05/sqlwatcher-ad-hoc-database-change-monitoring/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:33:41.027

如果您的数据不经常更改（例如分类值），则可以使用[Query Notifications](http://msdn.microsoft.com/en-us/library/ms175110%28v=sql.105%29.aspx) + [SQLDependencies](http://msdn.microsoft.com/en-us/library/ms191254%28v=sql.105%29)类。在场景背后，它还使用提到的 Service Broker @paul。

例如，您可以有表：

```
CREATE TABLE dbo.MyTable
(
    MyTableID INT not null PRIMARY KEY IDENTITY,
    SomeText nvarchar(50)
) 
```

[和 SQL 代码（这里](http://www.codeproject.com/Articles/12862/Minimum-Database-Permissions-Required-for-SqlDepen)讨论用户权限）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;

namespace TestApp
{
    class Program
    {
        static void Main(string[] args)
        {
            SqlDependency.Start("server=<MyServer>;database=<MyDB>;User ID=<user>;Password=<pwd>;Integrated Security=false;");
            Console.WriteLine("Started..");
            get_msg();
            Console.ReadLine();
            SqlDependency.Stop("server=<MyServer>;database=<MyDB>;User ID=<user>;Password=<pwd>;Integrated Security=false;");
        }
        private static void get_msg()
        {
            using (SqlConnection con =
                            new SqlConnection("server=<MyServer>;database=<MyDB>;User ID=<user>;Password=<pwd>;Integrated Security=false;"))
            {
                SqlCommand com = new SqlCommand("SELECT MyTableID, SomeText FROM dbo.MyTable ", con);
                SqlDependency dependency = new SqlDependency(com);
                dependency.OnChange += new OnChangeEventHandler(dependency_OnChange);
                con.Open();
                com.ExecuteNonQuery();
            }
        }
        static void dependency_OnChange(object sender, SqlNotificationEventArgs e)
        {
            Console.WriteLine("dependency Info = {0}, time: {1}",e.Info, DateTime.Now);
            get_msg();
        }
    }
} 
```

# crystal-reports - Crystal Reports 交叉表中的分组

> ID：11431184
> 
> 赞同：0
> 
> 时间：2012-07-11T10:59:03.553
> 
> 标签：crystal-reports, report, reporting, grouping, crystal-reports-xi

我正在使用 Crystal Reports XI R2 并希望使用交叉表功能构建一个表格来显示一些数据。问题是我不想按行分组，例如。我希望所有行（句点除外）都显示在彼此下方，而不是一行是另一行的子组）我希望它看起来像这样：

```
Period 1
       Group 1  value 1 | Summary field
       Group 1  value 2 | Summary field
       Group 1  value 3 | Summary field
       Group 2  value 1 | Summary field
       Group 2  value 2 | Summary field
       Group 3  value 1 | Summary field
       Group 3  value 2 | Summary field
       Group 3  value 3 | Summary field

Period 2
       Group 1  value 1 | Summary field
       Group 1  value 2 | Summary field
       Group 1  value 3 | Summary field

... 
```

而不是这个：

```
Period 1
       Group 1 value 1 | Group 2 value 1 | Group 3 value 1 | Summary field 
                                         | Group 3 value 2 | Summary field 
                                         | Group 3 value 3 | Summary field 
                       | Group 2 value 2 | Group 3 value 1 | Summary field 
                                         | Group 3 value 2 | Summary field 
                                         | Group 3 value 3 | Summary field 

       Group 1 value 2 | Group 2 value 1 | Group 3 value 1 | Summary field 
                                         | Group 3 value 2 | Summary field 
                                         | Group 3 value 3 | Summary field 
                       | Group 2 value 2 | Group 3 value 1 | Summary field 
                                         | Group 3 value 2 | Summary field 

                                         | Group 3 value 3 | Summary field 
Period 2
       Group 1 value 1 | Group 2 value 1 | Group 3 value 1 | Summary field 
                                         | Group 3 value 2 | Summary field 
                                         | Group 3 value 3 | Summary field 

... 
```

我只想将我的数据分组到第 1 组字段（期间，由用户选择，因此可以按天、周、月、年分组 - 我已经有一个公式可以计算出来）。其他字段是：

*   第 2 组（航班服务类型，例如定期、包机、转机等），

*   第 3 组（机场组类型，例如：申根/非申根、大陆、
    GCC/非 GCC 等 - 由用户定义）

*   第 4 组（飞行方向 - 出发或到达）。

如您所见，这三个组彼此不相关，每个航班都属于这些组中的所有 3 个（例如，航班 A 已预定（第 2 组）、申根（第 3 组）和到达（第 4 组）），并且这就是我认为问题所在。

这可以在 Crystal Reports XI R2 中使用交叉表实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:38:45.400

因为这些事情不相关，您需要将航班服务、机场组和航班方向移动到各个子报表（每个子报表一个）。将每个子报告放在单独的 GH1 部分（即 GH1b、GH1c、GH1d）--GH1a 将包含组名称和汇总字段。

您将根据需要对每个子报告中的数据进行分组。

如果要关联数据，可以将主报告链接到每个子报告。

# java - Java虚方法调用有什么用？

> ID：11431185
> 
> 赞同：15
> 
> 时间：2012-07-11T10:59:04.257
> 
> 标签：java, oop, virtual-functions

我了解什么是 java 方法调用，并使用它练习了许多示例。

我想知道这个概念的实际情况或需求是什么。如果有人能给出一个使用它的真实世界场景以及如果这个概念不存在会发生什么情况，那将是非常有帮助的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T11:07:27.537

这是一个例子。假设我们有 2 个类：

```
class A {
    public String getName() {
        return "A";
    }
}

class B extends A {
    public String getName() {
        return "B";
    }
} 
```

如果我们现在执行以下操作：

```
public static void main(String[] args) {
    A myA = new B();
    System.out.println(myA.getName());
} 
```

我们得到结果

```
B 
```

如果 Java 没有`virtual method invocation`，它将在编译时确定`getName()`要调用的是属于`A`该类的那个。由于它不是，而是在运行时根据指向的实际类来确定这一点`myA`，所以我们得到了上述结果。

**[编辑添加（稍微做作）示例]**
您可以使用此功能编写一个方法，该方法将任意数量的`Object`s 作为参数并像这样打印它们：

```
public void printObjects(Object... objects) {
  for (Object o: objects) {
    System.out.println(o.toString());
  }
} 
```

这适用于任何对象组合。如果Java 没有`virtual method invocation`，所有对象都将使用不可读`toString()`的对象打印。现在，`toString()`将使用每个实际类的 ，这意味着打印输出通常更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:22:45.547

好的，我将尝试提供一个简单的示例。您正在编写一个方法来填充调用者提供的列表：

```
public void fill(List l) {
  list.add("I just filled the list!");
} 
```

现在，一个调用者想使用一个链表；另一个人更喜欢基于数组的列表实现。将会有其他调用者拥有更多你从未听说过的列表实现。这些是完全不同的对象。**提出一个不依赖虚拟方法**来实现这一点的解决方案。

如果没有虚拟方法，这意味着该类型`List`已经需要`add`实现该方法。即使您的子类型`ArrayList`有一个被覆盖的方法，编译器（和运行时！）也会简单地忽略该方法并使用`List`. 不可能使用符合相同接口的不同实现**；**`List`在方法中重用那行代码是不可能的，`fill`因为它只适用于 type 中的方法`List`。

所以你看，类型层次结构的整个想法没有多大意义。`interface`s 和`abstract class`es 甚至都不存在。如果没有虚拟方法的这一特性，整个 Java 将分解为碎片。

# macos - Heroku 需要用于 Playframework 的 OpenJDK 版本 6 - Mac os Lion 是否有任何 OpenJDK 6？

> ID：11431186
> 
> 赞同：2
> 
> 时间：2012-07-11T10:59:16.333
> 
> 标签：macos, heroku, playframework, osx-lion, openjdk

我刚开始使用 Playframework (Java) 开发应用程序，我认为使用支持 Playframework 的 Heroku 测试它是个好主意。

在 Heroku 上 Playframework 的先决条件中，要求应用程序必须在 OpenJDK 版本 6 上运行。我没有找到任何适用于 Mac 的 OpenJDK 版本 6。无论如何都不是稳定的，只是在开发中。

你知道如何解决这个问题吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:19:44.123

OpenJDK6 可以使用 MacPorts 安装在 OS X 上：

```
$ port search openjdk6
openjdk6 @b20 (java)
    Oracle's Java 6 virtual machine release under the GPL v2

openjdk6_bootstrap @b16-r1 (java)
    A binary build of OpenJDK6 to be used for bootstrapping the OpenJDK6 port.

Found 2 ports.
$ sudo port install openjdk6 
```

# php - Sphinx 索引器返回 1

> ID：11431190
> 
> 赞同：0
> 
> 时间：2012-07-11T10:59:42.980
> 
> 标签：php, sphinx

当我尝试在 php 中使用 passthru 运行 sphinx indexer 时，它返回“1”退出代码。退出代码是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:03:00.080

以下是来自 searchd.cpp 的代码：

```
<?php 
/// known status return codes 
enum SearchdStatus_e 
{ 
        SEARCHD_OK              = 0,    ///< general success, command-specific reply follows 
        SEARCHD_ERROR   = 1,    ///< general failure, error message follows 
        SEARCHD_RETRY   = 2,    ///< temporary failure, error message follows, client should retry later 
        SEARCHD_WARNING = 3             ///< general success, warning message and command-specific reply follow 
}; 
?> 
```

你的问题很模糊，我不知道这是否是你正在寻找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:35:20.400

退出代码 1 表示致命错误。您需要从索引器的标准输出中读取准确的错误含义。PHP passthru 将其发送到脚本输出。

# php - 数组中发生了什么（'value' => array() || array()）

> ID：11431194
> 
> 赞同：1
> 
> 时间：2012-07-11T11:00:05.787
> 
> 标签：php, arrays

我遇到了以下数组选项，无法弄清楚它实际上做了什么。

### 输入

```
$info = array(
    'input' => $input,
    'type' => array( 'last_name' => 1 ) || array( 'first_name' => 2 ) || array( 'full_name' => 3 ) || false,
    'syntax' => true || false,
    'output' => $output
    ); 
```

当 $input = 'A' 和 $output = 'B' 时，此 $info 数组返回以下内容

### 输出

```
array(
    'input' => 'A',
    'type' => true,
    'syntax' => true,
    'output' => 'B'
    ) 
```

我知道“||” 在“if”语句中表示“OR”，但为什么要在“type”值处给出“true”？

为什么在“语法”值上选择真而不是假？

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:04:46.190

在语法上，一种情况中的任何一种都会发生，这是肯定的......所以它是真的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:11:52.910

```
array( 'last_name' => 1 ) || array( 'first_name' => 2 ) || array( 'full_name' => 3 ) || false 
```

这句话是条件语句，它评估为 true 或 false ，它与我们在 if 条件中使用它并根据其输出进行处理不同。但是您也可以将其用作作业。并且`array('xyz' => 1)`是创建关联数组和布尔比较，如果你可以制作数组，它将返回 true，并且在 OR 条件下，true 或 false 将返回 true 作为结果。所以你得到了真实的结果

# netty - Netty - 查找频道 ID

> ID：11431196
> 
> 赞同：1
> 
> 时间：2012-07-11T11:00:12.243
> 
> 标签：netty, channel, illegalstateexception

我刚开始使用 Netty。我已经有一个服务器，我正在为一个客户端编写代码。

在客户端中，我使用此代码为 ClientBootstrap 对象设置了一个新的 PipelineFactory

```
 bootstrap.setPipelineFactory(new ChannelPipelineFactory() 
    {
        public ChannelPipeline getPipeline() 
        {
            return Channels.pipeline(new ResponseHandler());
        }
    }
                                ); 
```

其中 ResponseHandler() 是我扩展 SimpleChannelHandler 的类。

我正在寻找频道 ID。我做了

```
 bootstrap.getPipeline().getChannel().getId(); 
```

但它抛出 IllelgalStateException 并说我不能调用 getPipeline() 因为我调用了 setPipelineFactory()。获取 Channel ID 的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:33:40.970

你打过connect吗？[Netty 教程（3.5）](http://netty.io/3.5/guide/#start.9)

[我认为连接后您可以使用SimpleChannelHandler (3.5)](http://netty.io/3.5/api/org/jboss/netty/channel/SimpleChannelHandler.html)的所有方法获取通道 ID

```
ChannelEvent.getChannel().getId() 
```

* * *

对于 Netty 4

给定 ChannelHandlerContext 对象（变量名 = ctx）

```
ctx.channel().id() 
```

# javascript - Ajax xmlhttp.onreadystatechange 函数

> ID：11431197
> 
> 赞同：1
> 
> 时间：2012-07-11T11:00:15.013
> 
> 标签：javascript, ajax

我有这个代码：

```
function loadRegions()
{
    var xmlhttp;

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
           alert("Ready:"+xmlhttp.status);
           xmlDoc=xmlhttp.responseXML;
           x=xmlDoc.getElementsByTagName("region");
           alert(x[0]);
           alert(x[1]);
       }
   }

   var ctrcode = frm.elements['countrycode'];
   xmlhttp.open("GET","http://mydomain.gr/regionslist.php?countrycode="+ctrcode.value,true);
   xmlhttp.send();
} 
```

我的 HTML 中有一个`select`项目，当有人选择一个项目时，会调用此函数来获取该国家/地区的区域。我可以从控制台看到请求已完成，但从未得到响应。我的`onreadystatechange`函数永远不会被调用。当我删除`xmlhttp.status==200`然后调用函数但`xmlDoc`对象是`null`and `xmlhttp.status==0`。如果我单独调用它，我使用的 URL 有效。为什么我的`onreadystatechange`函数不起作用，为什么它不返回状态 200？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:18:20.900

在调用 send() 函数之前添加这一行：

```
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

并在调用 open() 后设置 onReadyStateChange 函数

原因：
1）responseXML属性表示收到完整的HTTP响应时的XML响应（当readyState为4时），当Content-Type头指定MIME（媒体）类型为text/xml，application/xml，或end在 +xml 中。如果 Content-Type 标头不包含这些媒体类型之一，则 responseXML 值为 null。
2) 初始响应后，所有事件监听器将被清除。在设置 onreadystatechange 监听器之前调用 open()。
这是[第一个](http://www.oxymoronical.com/experiments/apidocs/interface/nsIXMLHttpRequest)和[第二个](http://www.devx.com/webdev/Article/33024/1954)原因的参考

# iphone - UITextField 应该只在 iphone 中接受数字

> ID：11431203
> 
> 赞同：0
> 
> 时间：2012-07-11T11:00:36.147
> 
> 标签：iphone

UITextField 只能通过使用 UITableView 来接受数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:16:05.543

您必须执行两个步骤：

1.  `UIKeyboardTypeNumberPad`正如其他人所提到的，提供键盘类型为。
2.  在

    ```
    -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
    ```

    方法检查输入的字符串是否为数字。您可以使用以下方法检查数值：

    ```
    -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
    {
        if([self isNumeric:string])
            return TRUE;
        else
            return FALSE;
    }

    -(BOOL)isNumeric:(NSString*)inputString
    {
        NSCharacterSet *cs=[[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];
        NSString *filtered;
        filtered = [[inputString componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
        return [inputString isEqualToString:filtered];
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:02:38.457

在您的 xib 文件中选择 textFiled 并在属性列表中有一个字段 Keyboard select Number Pad

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:01:57.013

如果您在编码时有 textFiled 可用，请设置 UITextField 的 keyboardType 属性。

```
 textField.keyboardType = UIKeyboardTypeNumberPad; 
```

或者您可以在 xib 文件中设置相同的值。

# python - 发送一个 python 修饰的方法作为函数参数

> ID：11431207
> 
> 赞同：1
> 
> 时间：2012-07-11T11:01:01.003
> 
> 标签：python, decorator

我目前有以下使用 python 库的代码：

```
f = Foo(original_method, parameters) 
```

我想增加 original_method，并让装饰器添加几行代码。我们将新的装饰方法称为decorated_method。最后我想要这样的东西：

```
f = Foo(decorated_method(original_method), parameters) 
```

我的问题是：这可能吗？装饰器会是什么样子？我必须说我不能扩展 original_method，因为它是外部库的一部分。

编辑： original_method 未执行，仅作为参数传递给 Foo 。decorated_method 函数应该做一些日志记录并收集一些调用次数的统计信息。

稍后编辑：下面示例中的代码可以正常工作。我遇到了一些额外的问题，因为 original_method 有一些属性，所以这是最终代码：

```
def decorated_method(method):

    def _reporter(*args, **kwargs):
        addmetric('apicall', method.__name__)
        return method(*args, **kwargs)

    _reporter.original_method_attribute = method.original_method_attribute
    return _reporter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:04:50.050

你没有提到你想做`decorated_method`什么，但这当然是可能的：

```
def decorated_method(f):
    def _wrapped(*args, **kwargs):
        print "About to call f!"
        ret = f(*args, **kwargs)
        print "Just got finished with f, ret = %r" % (ret,)
        return ret
    return _wrapped 
```

这只是标准的装饰器结构：装饰器是一个接受一个函数并返回一个函数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:05:48.163

绝对地：

```
def decorated_method(fn):
    def inner_method(*args, **kwargs):
        print("before calling")
        result = fn(*args, **kwargs)
        print("after calling")
        return result
    return inner_method 
```

一旦你得到这个工作，你应该看看[签名保留装饰器](https://stackoverflow.com/questions/147816/preserving-signatures-of-decorated-functions)。

# java - 从java中的jtable获取复选框的值

> ID：11431209
> 
> 赞同：-1
> 
> 时间：2012-07-11T11:01:09.710
> 
> 标签：java, swing, jtable, jcheckbox

我在java中从jtable获取复选框的值时遇到问题，即当我通过此代码“table.getvalue（0,1）”获取值时，我无法获得正确的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:05:52.447

*   `JTable`从包含返回值`JCheckBox`表示`Boolean`值，

*   `toString`返回`"true" / "false"`

*   [JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#simple)中的更多内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T06:38:01.307

**选中复选框时，JTable 获取 cehckbox 值：-**

```
table.getModel().addTableModelListener(new TableModelListener() {
              @Override
              public void tableChanged(TableModelEvent e) {
                  for(int i=0;i<table.getModel().getRowCount();i++)
                  {
                    if ((Boolean) table.getModel().getValueAt(i,0))
                    {  
                      System.out.println(">\t"+table.getSelectedRow());
                      break;
                    }
                 }     
              }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T14:40:57.200

[作为一个具体的例子，当我在这个例子](https://stackoverflow.com/a/4528604/230513)`actionPerformed()`的方法中将以下行添加到循环中时，我得到了预期的结果：

```
System.out.println((table.getValueAt(i, CHECK_COL))); 
```

# c# - 微调 Windows Mobile 中的应用程序空闲时间

> ID：11431211
> 
> 赞同：0
> 
> 时间：2012-07-11T11:01:17.540
> 
> 标签：c#, windows-mobile, compact-framework

我正在尝试检测 Windows Mobile 应用程序中的空闲时间，并在此非活动期后显示屏幕锁定。此链接[http://blog.opennetcf.com/ctacke/2009/05/19/DetectingApplicationIdle.aspx](http://blog.opennetcf.com/ctacke/2009/05/19/DetectingApplicationIdle.aspx)给出了提示，但我发现这仅适用于单个表单。

如何在具有多个表单的应用程序中使用相同的代码。我尝试在每个表单的 InitializeComponent() 之后实现此代码，并在 Activate 和 GotFocus 事件表单中使用 Reset() 函数，以便在用户通过输入 PIN 码关闭屏幕锁定后重置计时器。但这似乎不适用于多种形式，并且计时器没有重置，但它每分钟都会触发。即使我正在处理应用程序，事件也会每 1 分钟触发一次（根据示例代码），这是不正确的。

任何人都可以建议如何在整个应用程序中使用此功能。

提前感谢任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:24:01.780

我们需要查看您的代码以了解问题所在，但该博客条目中提出的方法使用了`IMessageFilter`实现。这与 Windows 消息泵挂钩，它是应用程序范围的，而不是单一表单系统。我在几个解决方案中使用完全相同的技术进行应用程序范围的空闲检测，并且效果很好。

我的猜测是您正在使用的 IMessageFilter 实例存在范围问题。如果您将其创建为表单级变量（就像该博客中的示例一样），则当关闭过滤器被处理的表单时，它将不再起作用。如果您有多个表单，则需要将其放在模型中的其他位置，以便只要应用程序启动它就可以生存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:55:16.557

使用[GetIdleTime](http://msdn.microsoft.com/en-us/library/ms885626.aspx)怎么样？看起来像这样，与定期唤醒以检查它的计时器配对，可以检测系统空闲并允许您显示屏幕锁定。

# android - 测试人们在钛合金中静止不动或运动

> ID：11431212
> 
> 赞同：1
> 
> 时间：2012-07-11T11:01:17.680
> 
> 标签：android, titanium, accelerometer, accelerator

现在我想做一个应用程序来测试人们在钛合金中静止不动或运动..我使用加速度计并在 3 轴 x、y、z 上操作加速度..我必须使用公式来测试这个问题..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:12:54.193

首先，通过公式获得与运动方向无关的标量加速度，`accel = sqrt(accel_x^2 + accel_y^2 + accel_z^2)`其中`^2`表示2 的*幂，*表示`sqrt`平方根。之后，应用一些低通滤波器来消除随机噪声。[这](http://en.wikipedia.org/wiki/Low-pass_filter#Algorithmic_implementation)是一个很好的算法，使用`alpha=0.8`它将是一个很好的方法。现在，您可以查看过滤后的加速度是否大于某个阈值（灵敏度取决于此阈值）。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:01:25.810

另一种选择是使用 GPS。

```
var win = Ti.UI.createWindow({ backgroundColor: 'white' });

// WARNING: This will only work well outside, where the phone can get a good GPS signal.
var label = Ti.UI.createLabel({ text: 'Traveled 0 ft' });
win.add(label);

// Set up the geolocation code
Ti.Geolocation.accuracy = Ti.Geolocation.ACCURACY_BEST;
Ti.Geolocation.distanceFilter = 0.1;
Ti.Geolocation.purpose = 'To track how far you have traveled!';
var lastLocation = null, totalFtTraveled = 0;

/**
 * This function is called by the phone every time we have new geolocation data. It writes out where the user currently is.
 * @param e An argument given to us by the phone with information such as accuracy, latitude, and longitude.
 */
function reportPosition(e) {
    if (!e.success || e.error) {
        label.text = 'error: ' + JSON.stringify(e.error);
    }
    else {
        if (lastLocation != null) {
            var lat1 = lastLocation.latitude, lon1 = lastLocation.longitude;
            var lat2 = e.coords.latitude, lon2 = e.coords.longitude;
            var kmTraveled = 3963.0 * Math.acos(
                Math.sin(lat1 / 57.2958) * Math.sin(lat2 / 57.2958)
                    + Math.cos(lat1 / 57.2958) * Math.cos(lat2 / 57.2958)
                    * Math.cos(lon2 / 57.2958 - lon1 / 57.2958)
            );
            var ftTraveled = kmTraveled * 3280.8399;
            totalFtTraveled += ftTraveled;
            label.text = 'Traveled ' + totalFtTraveled + 'ft';
        }
        lastLocation = e.coords;
    }
}

// This will get the location right now, and will get the phone ready to listen for the user's current location.
Ti.Geolocation.getCurrentPosition(reportPosition);
// And this fires whenever the "distance filter" is surpassed -- with a filter of 1, this happens every 1 meter or so.
Ti.Geolocation.addEventListener('location', reportPosition);

var reset = Ti.UI.createButton({ title: 'Reset', bottom: 10, height: 50, width: 200 });
reset.addEventListener('click', function() {
    totalFtTraveled = 0;
    label.text = 'Traveled 0ft';
});
win.add(reset);

win.open(); 
```

# plone - xsl:attributes 去除“内容”

> ID：11431220
> 
> 赞同：3
> 
> 时间：2012-07-11T11:01:43.150
> 
> 标签：plone, diazo

我正在用 Diazo 写一些规则。如果用户浏览“查看器”部分（浏览器视图，而不是真正的 plone 文件夹），我希望在 globalnav 中删除“home”选项卡的“selected”类并将“selected”类放入“查看器”选项卡。

```
<replace css:content="#portal-globalnav" css:theme="#portal-globalnav" />
<drop if-path="viewer/" 
        css:content="#portaltab-index_html"
        attributes="class" />    
<xsl:template if-path="viewer/"
          match="//li[@id='portaltab-viewer']/">
<xsl:attribute name="class">selected</xsl:attribute>
</xsl:template> 
```

但结果是一个正确的 li portaltab-viewer 带有“selected”类，但里面没有任何内容！我在 portal-globalnav OO 中获得了一个空的“li”标签

怎么了？维托

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:48:18.607

您需要使用 xsl:apply-templates 递归到元素的内容。尝试：

```
<replace if-path="/viewer" css:content-children="li#portaltab-viewer"><xsl:attribute name="class">selected</xsl:attribute><xsl:apply-templates select="node()"/></replace> 
```

在 xsl:attribute 之前缺少空格是必要的，因为我认为我从来没有让 Diazo 忽略 xsl:* 元素周围的空格。

# flash - HTML5 的 RTMP 闪存后备

> ID：11431223
> 
> 赞同：0
> 
> 时间：2012-07-11T11:01:53.687
> 
> 标签：flash, html, video, html5-video, modernizr

如果浏览器不支持它，我正在尝试对 html5 视频进行 Flash 后备。我可以在 chrome 上获得它，但 chrome 显示“没有支持格式的视频”。

我正在创建一个 swf 对象并使用 Modernizr 测试附加视频。我有 mp4 和 webm 格式的视频。由于 firefox 需要 ogv 格式，它应该呈现 flash 后备，但它没有这样做。

```
<div id="flash" width="230px" height="230px" style="display:inline-block">
  <video width="230px" height="230px" id="player2" controls="controls">
    <source src="'+path_webm+'" type="video/webm">
    <source src="'+path_mp4+'" type="video/mp4">
    <track kind="subtitles" src="../media/mediaelement.srt" srclang="en" />
      <p>Your browser leaves much to be desired.</p>
  </video>
</div>

var $vobj = $(mediaVideo);
$vobj.appendTo("#tab1");
if(!Modernizr.video.ogg) {
   so.write("flash");
}
}); 
```

这里的 swf 对象也是如此。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:01:10.523

这是一个允许 HTML 5 视频回退到 Flash 的简单代码

```
<video id="movie" width="320" height="240" preload controls>
  <source src="pr6.webm" type='video/webm; codecs="vp8, vorbis"' />
  <source src="pr6.ogv" type='video/ogg; codecs="theora, vorbis"' />
  <source src="pr6.mp4" />
  <object width="320" height="240" type="application/x-shockwave-flash"
    data="flowplayer-3.2.1.swf"> 
    <param name="movie" value="flowplayer-3.2.1.swf" /> 
    <param name="allowfullscreen" value="true" /> 
    <param name="flashvars" value='config={"clip": {"url": "http://wearehugh.com/dih5/pr6.mp4", "autoPlay":false, "autoBuffering":true}}' /> 
  </object>
</video> 
```

只需在所有源标签的末尾添加 Flash 视频嵌入代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:44:48.580

下次请自行格式化代码！

您可以使用 html5 后备。几天前我刚刚回答了一个类似的问题。在这里检查：[带有后备的 HTML5 视频标签](https://stackoverflow.com/questions/11116730/html5-video-tag-with-fallback/11120120#11120120)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T02:42:29.950

该公司在 The Chromium Blog 上的一篇文章中表示，它正在取消对 HTML5 H.264 视频编解码器的支持，转而支持 WebM (VP8) 和 Theora 视频编解码器。

阅读更多：[http ://www.itproportal.com/2011/01/12/google-chrome-drops-h264-video-codec-support/#ixzz217vGB8dP](http://www.itproportal.com/2011/01/12/google-chrome-drops-h264-video-codec-support/#ixzz217vGB8dP)

# css - Yii TinyMCE 扩展不会在子域上加载 css

> ID：11431228
> 
> 赞同：0
> 
> 时间：2012-07-11T11:02:02.593
> 
> 标签：css, yii, tinymce

我在**site.com/module**上有安装了 tinymce 扩展的 Yii 应用程序。**但是当我通过子域别名module.site.com**打开同一个应用程序时，它不会加载 tinymce CSS 文件。所有 JS 文件都正确加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:04:15.383

有时我们使用的小部件不加载 css，所以我们需要在外部加载它们，这可以通过使用 Yii Assest Manager 来实现。

```
<?php
$assetUrl = Yii::app()->getAssetManager()->publish(Yii::getPathOfAlias('ext.tinymce.assets'));
Yii::app()->clientScript->registerCssFile($assetUrl.'/example.css'); 
?> 
```

# objective-c - 如何动态保存图像

> ID：11431233
> 
> 赞同：1
> 
> 时间：2012-07-11T11:02:10.567
> 
> 标签：objective-c

我在我的应用程序中使用照片库。从照片库或相机中选择图像后，我想将该图像保存到我的 Documents 文件夹中。所以在这里我想在保存时为该图像命名是否可以为所选图像设置名称？如果手段，请让我知道。我正在尝试，只有在可能的情况下我才会发布。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:16:19.727

我就是这样做的。我正在复制和粘贴我的代码，所以有一些额外的功能。

```
// image is a UIImage
// inputText is the user selected imagename
// date is a string I inserting to make pictures a unique identifier (i.e. no duplicate names)
NSData *imageData1 = UIImageJPEGRepresentation(image, 1.0);
NSString *imageFilename = [NSString stringWithFormat:@"%@-%@.jpg", inputText,date];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *path = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0], imageFilename];

if([imageData1 writeToFile:path atomically:YES]){
    NSLog(@"Write to Document folder success filename = %@",path);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:13:31.840

使用以下：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

UIImage *photoImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
NSString *savedDoc = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/myImageName.png"];
BOOL status = [[NSFileManager defaultManager] fileExistsAtPath:savedDoc];

if(status){

[[NSFileManager defaultManager] removeItemAtPath:savedDoc error:nil];

}
[UIImagePNGRepresentation(photoImage) writeToFile:savedDoc atomically:YES];
[picker dismissModalViewControllerAnimated:YES];
} 
```

保存到文档目录时，您可以设置任何所需的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:18:21.503

声明一个整数 counterNo 并将其初始化为 0。并增加其值以动态更改名称。

```
UIImage *photoImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

counterNo++;

NSString *aaa = [NSString stringWithFormat:@"Documents/myImage-%d.png" , counterNo];
NSString *savedDoc = [NSHomeDirectory() stringByAppendingPathComponent:aaa];
BOOL status = [[NSFileManager defaultManager] fileExistsAtPath:savedDoc];

if(status){

    [[NSFileManager defaultManager] removeItemAtPath:savedDoc error:nil];

}
[UIImagePNGRepresentation(photoImage) writeToFile:savedDoc atomically:YES];
[picker dismissModalViewControllerAnimated:YES]; 
```

# mysql - 导入部分 MySQL 转储（不是全部）

> ID：11431234
> 
> 赞同：1
> 
> 时间：2012-07-11T11:02:11.033
> 
> 标签：mysql, sql, mysqldump

我要做一些压力测试，现在我手头有一个非常非常大的 MySQL 转储文件，可以用作基准。

垃圾场里只有一张桌子。

尴尬的是我的服务器没有那么多磁盘空间来实际保存这张表。所以我想只导入转储的一些随机部分，而不是全部。

是否可以？如果是，命令行是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:07:12.237

我为此创建了一个 shell 脚本。如果您使用的是基于 unix 的系统，请使用 [https://github.com/JoyceBabu/MySQL-Dump-Table-Extractor](https://github.com/JoyceBabu/MySQL-Dump-Table-Extractor)

使用调用脚本`./extract_table.sh sqlfile.sql`

提取单个表 输入表名
提取从 table1 到 table2 的所有表 输入`table1 table2`
查看所有可用表的列表 输入`LIST`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:06:49.957

MySQL 转储文件只是充满 SQL 语句的文本文件。编写一个简单的程序来读取转储文件并将其随机部分写入新的转储文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:07:11.057

你不能手动分割文件吗？这些只是纯文本文件......所以在你最喜欢的文本编辑器中打开它并删除文件的一半（或者你想要的任何内容）。

# python - ffmpeg 将图像序列转换为视频

> ID：11431238
> 
> 赞同：0
> 
> 时间：2012-07-11T11:02:15.637
> 
> 标签：python, ffmpeg

图像序列以

```
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1001
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1002
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1003 
```

使用

```
ffmpeg -i D:/imagesequence/sdhdfd_plate/sdhdfd_plate_bg01_v001_fds_fdse_fdfd.%04d.jpg -vf "[in]drawtext=fontsize=32:fontcolor=White:fontfile='/Windows/Fonts/arial.ttf':text='shotName':x=(w)/2:y=(h)-50[out]" D:/Uss/Temp/sdhdfd_plate_bg01_v001_fds_fdse_fdfd.%04d.jpg 
```

发生以下错误

```
D:/imagesequence/sdhdfd_plate/sdhdfd_plate_bg01_v001_fds_fdse_fdfd.%04d.jpg: N
o such file or directory 
```

是否可以使用 ffmpeg 转换这些类型的图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:38:00.657

似乎有几个原因导致这不起作用。首先，正如pixelistik 所指出的，如果您的图像实际上没有.jpg 扩展名，那么它将不起作用（例如，如果它们实际上是png 或其他东西）。

其次，您的图像序列必须从 0 或 1 开始，因此从 1001 开始是行不通的。你可以在 UNIX shell 中使用这个批处理代码或类似的东西来将你的图像重命名为一个可行的序列。

```
x=1; for i in *jpg; do counter=$(printf %04d $x); ln "$i" sdhdfd_plate_bg01_v001_fds_fdse_fdfd."$counter".jpg; x=$(($x+1)); done 
```

请注意，您必须位于保存图像的目录中，如果您不想包含其他图像，则必须更改`for i in *jpg`为`for i in sdhdfd_plate_bg01_v001_fds_fdse_fdfd.*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-05T03:08:35.160

1.  似乎模式在 Windows 下不起作用。
2.  你的模式不正确，

对于文件：

```
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1001.jpg
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1002.jpg
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1003.jpg 
```

输入模式应该是：

```
sdhdfd_plate_bg01_v001_fds_fdse_fdfd.1%03d.jpg 
```

这里`1%03d`映射到: `1001`, `1002`, `1003`...

# jakarta-ee - Seam 2.2.2.EJBQL 中的最终新运算符

> ID：11431240
> 
> 赞同：1
> 
> 时间：2012-07-11T11:02:21.850
> 
> 标签：jakarta-ee, jpa, seam, seam2

我在 Seam 2.2.2.Final 中遇到 EntityQuery 的问题，我不能在 EJBQL 中使用“新”运算符，

“从 Perst prest 中选择新的 com.ej.Prest(prest.id, prest.name)”

有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:10:07.687

如果`com.ej.Prest`是 JPA 实体，则不需要使用`new`，只需查询即可：

```
select p from Prest p 
```

甚至：

```
from Prest 
```

如果它不是 JPA 实体，那么您不能在`from`子句中使用它，您只需要在那里使用 JPA 实体。例如，您可以这样做（在此示例中，`MyEntity`是一个 JPA 实体，其构造函数中使用了`name`和`surname`属性`Prest`：

```
select new com.ej.Prest(me.name, me.surname) from MyEntity me 
```

此外，您需要使用正确的参数定义构造函数，在本例中为`com.ej.Prest`：

```
public Prest(String name, String surname) {
  // constructor code here
} 
```

# c# - LinQ 嵌套集合查询

> ID：11431244
> 
> 赞同：0
> 
> 时间：2012-07-11T11:02:32.557
> 
> 标签：c#, linq, collections, nested

我是 Linq 的新手，无法解决以下问题。尝试在互联网上检查很多，但没有得到正确的答案。

我有以下查询：

```
var packages = from p in Packages
               from cl in p.Categories
               from temp in Clusters
               where (cl.Id == temp.Key)
               select p; 
```

类别是包含 id 和 name 的对象的集合。这里的集群是键值对的字典。执行此查询时出现以下错误：

> 无法创建类型为“System.Collections.Generic.KeyValuePair`2”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

另一种选择是为包中的每个类别添加一个 for each 循环。有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:12:31.090

您是否尝试过使用[Dictionary.ContainsKey](http://msdn.microsoft.com/en-us/library/kw5aaea4%28v=vs.110%29.aspx)方法进行查询？

```
var packages = from p in Packages
               from cl in p.Categories
               where Clusters.ContainsKey(cl.Id)
               select p; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:19:38.670

```
var packages = Packages.Where( 
                   p => p.Categories.Any( 
                   c => Clusters.ContainsKey(c.Id))); 
```

如果您希望每个包在结果中只出现一次。它也更有效，因为您的问题中 ContainsKey 是 O(1) 而不是 O(Clusters.Count) 。

# ember.js - Ember.Router 在页面重新加载时丢失动态段的上下文

> ID：11431249
> 
> 赞同：1
> 
> 时间：2012-07-11T11:02:39.283
> 
> 标签：ember.js

我一直在尝试调试它一段时间，我可能已经弄清楚问题所在，让我通过使用[小提琴来解释发生了什么](http://jsfiddle.net/ivanvanderbyl/mfqEB//)

导航到[http://fiddle.jshell.net/ivanvanderbyl/mfqEB/show/#/projects/1](http://fiddle.jshell.net/ivanvanderbyl/mfqEB/show/#/projects/1)，您会注意到 url 中的动态段被替换为`null`- 它应该保持为`1`

据我所知，在路由一次之后，Ember Router 会调用更新 URL，用从相应实例化对象（在本例中为 App.Project）中获取的值替换动态段。

问题是`App.Project`此时没有加载所以`id`是`null`

现在无论这是我的错误还是实施失败，其他人看到了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:31:39.980

将 connectOutlets 从 projects.index 直接移动到项目中似乎可以解决问题。不过不要问我为什么。

[jsFiddle](http://jsfiddle.net/bZXYy/ "jsFiddle")

```
Router: Ember.Router.extend(
  location: 'hash'
  enableLogging: true

  root: Ember.Route.extend(

    listProjects: Ember.Route.transitionTo("projects.index")
    showProject:  Ember.Route.transitionTo("projects.show")

    index: Ember.Route.extend(
      route: "/"
      redirectsTo: 'projects.index'
    )

    projects: Ember.Route.extend(
      route: '/projects'

      connectOutlets: ((router) ->
        router.get('applicationController').connectOutlet('projects', App.Project.find())
      )

      index: Ember.Route.extend(
        route: '/'
      )

      add: Ember.Route.extend(
        route: '/new'
      )

      show: Ember.Route.extend(
        route: '/:project_id'

        connectOutlets: (router, project) ->
          console.log project.get('name')

          # router.get('applicationController').connectOutlet('project', project)
      )
    )

  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:53:16.480

因此，经过大量调查，正确的解决方案是简单地不在模型上指定主键属性，在这种情况下，我不应该在 Project 模型上指定 ID 属性。Ember Data 在内部处理这个问题。

感谢 Peter Wagenet 在 Github 上指出这一点。

# excel - 有条件地从表 1 复制到表 2

> ID：11431250
> 
> 赞同：0
> 
> 时间：2012-07-11T11:02:40.560
> 
> 标签：excel, excel-formula, copy

我的工作表 1 在 A 列中的值从 1 到 100。对于每个值，B 列中都有另一个对应的值（随机数）。

在 A 列的工作表 2 中，我有一些来自工作表 1 的 An 列的值，还有一些不存在。我希望在表 2 的 B 列中复制表 1 中 B 列的值，其中两张表中 An 列中的值匹配。

例子：

```
sheet1: A1= 5, B1=4,50
sheet2: for all cells in column A, where it equals 5, set the value in B to 4,50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:13:51.690

把这个公式放进去`sheet2!B1`

```
=VLOOKUP(A1,Sheet1!$A:$B,2,0) 
```

并根据需要复制下来。

计算完之后，`copy pastespecial values`如果你想用值替换公式，你可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:14:40.100

使用 VLookup。你可以在这里找到教程[http://www.techonthenet.com/excel/formulas/vlookup.php](http://www.techonthenet.com/excel/formulas/vlookup.php)

# c# - TimeSpan.TotalMinutes 没有秒

> ID：11431251
> 
> 赞同：8
> 
> 时间：2012-07-11T11:02:41.073
> 
> 标签：c#, datetime, timespan

我正在使用代码

```
var minutesPassed = (DateTime.UtcNow - conversionsList.Last().DateStamp).TotalMinutes; 
```

计算两个日期之间经过的分钟数。我得到的结果看起来像

> 254.54445556

我得到分钟和秒。如何获得只包含这样几分钟的结果

> 254

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T11:06:23.120

只需将结果显式转换为`int`：

```
var minutesPassed = (int)(DateTime.UtcNow - conversionsList.Last().DateStamp).TotalMinutes; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T11:04:55.673

用于[`Math.Floor()`](http://msdn.microsoft.com/en-us/library/system.math.floor.aspx)将 254.xxxx 转换为 254：

```
var minutesPassed = Math.Floor((DateTime.UtcNow - conversionsList.Last().DateStamp).TotalMinutes); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T11:06:52.733

你可以得到 int 部分

```
int minutes = (int) (DateTime.UtcNow - conversionsList.Last().DateStamp).TotalMinutes; 
```

这将为您提供值的 int 部分。

编辑：就价值的四舍五入而言。那不是真的。考虑以下：

```
 double d = 254.99999999999d;
 int test = (int)d; 
```

这里`test`将举行`254`，而不是`255`

显式转换的唯一问题是[OverFlowException](http://msdn.microsoft.com/en-us/library/system.overflowexception.aspx)

# html - 我应该使用 ARIA 角色和跳过导航链接吗？

> ID：11431253
> 
> 赞同：2
> 
> 时间：2012-07-11T11:02:46.367
> 
> 标签：html, accessibility, wai-aria

我正在整理一个公司“商店橱窗”网站，并计划使用 ARIA 地标角色使其更易于访问。

ARIA 角色的支持程度如何？我是否也应该拥有标准的“Skip Nav”链接，或者这只会混淆屏幕阅读器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:31:03.053

> ARIA 角色的支持程度如何？

WAI ARIA 角色最好由 NVDA、JAWS 和 VoiceOver 支持。Window-Eyes 有不同程度的支持[[1]](http://www.accessibleculture.org/tag/window-eyes/)，[[2]](http://www.paciellogroup.com/blog/category/window-eyes/)。

> 我也应该有我的标准“跳过导航”链接，还是只会混淆屏幕阅读器？

跳过链接对因行动不便或只是偏好而无法使用鼠标的人有益。目前，无法通过键盘和 ARIA 进行跳转或导航。包括他们仍然是一个很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T01:32:38.920

尽管 WAI-ARIA 实践在该主题上相当[模糊](http://www.w3.org/TR/wai-aria-practices/#kbd_layout)，但*实现跳过链接*（具有适当的 HTML5 语义 + 角色属性）*对于键盘用户仍然有意义，并将为*尽可能多的用户提供最佳体验。

引用[Paciello Group 的优秀文章](http://blog.paciellogroup.com/2013/02/using-wai-aria-landmarks-2013/comment-page-1/#comment-24396)，大概会有主流浏览器对角色属性的支持。另请参阅[Bugzilla 中的参考错误](https://bugzilla.mozilla.org/show_bug.cgi?id=670928)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:04:06.197

我一直使用角色，但只能使用 OSXs Voice Over 进行测试。这适用于角色，尽管遗留软件可能不知道该做什么。

就个人而言，我认为如果使用正确，角色就足够了。

# iphone - 以编程方式更改状态的按钮

> ID：11431255
> 
> 赞同：3
> 
> 时间：2012-07-11T11:02:51.060
> 
> 标签：iphone, ios, xcode

我的按钮框架图像真的有问题，我想要的是： 1\. 当它被选中时，它会有一个复选标记 2\. 当视图被关闭然后返回到上一个屏幕时，它仍然会在选择的图像 3\. 当我点击所选图像或其他图像时，它会删除复选标记。

我能够做到，但图像设置有问题：

我想要的是这样的：

![在此处输入图像描述](../Images/5933142a390b6188386ef56cf8c71108.png)

```
UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
[myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
[myButton setEnabled:NO]; 
```

但这是我需要的功能：

![在此处输入图像描述](../Images/79ad8a591fbccd4810ace113d89c6c65.png)

```
UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
[myButton setImage:bgImage forState:UIControlStateSelected];
[myButton setSelected:YES]; 
```

这是下面的代码（如果我正在做的事情有问题，请告诉我，谢谢）：

```
- (void)viewDidLoad {
    UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
    [myButton setBackgroundImage:bgImage forState:UIControlStateHighlighted];
    [myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
    // Create view
    UIScrollView *view = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];

    int row = 0;
    int column = 0;
    for(int i = 0; i < _thumbs.count; ++i) {

        UIImage *thumb = [_thumbs objectAtIndex:i];
        myButton = [UIButton buttonWithType:UIButtonTypeCustom];
        myButton.frame = CGRectMake(column*140+24, row*150+10, 100, 100);
        [myButton setImage:thumb forState:UIControlStateNormal];
        [myButton addTarget:self 
                     action:@selector(buttonClicked:) 
           forControlEvents:UIControlEventTouchUpInside];
        myButton.tag = i; 
        NSLog(@"%i",i);

        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        NSInteger selectedImageSlot1 = [prefs integerForKey:@"selected1"];

        if ( selectedImageSlot1 == i){
            [self turnButtonToSelected];
        } 

        [view addSubview:myButton];

        if (column == 6) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }

    [view setContentSize:CGSizeMake(1024, (row+1) * 150 + 10)];
}

- (void)turnButtonToSelected
{       UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
    [myButton setBackgroundImage:bgImage forState:UIControlStateNormal];
    [myButton setBackgroundImage:bgImage forState:UIControlStateHighlighted];
    [myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
    [myButton setEnabled:NO];
}
- (void)highlightButton:(UIButton *)a {
    //[self turnButtonToSelected];    
}
- (IBAction)buttonClicked:(id)sender {
    myButton = (UIButton *)sender;
    self.selectedImage = [_images objectAtIndex:myButton.tag];

    if (myButton.selected) {

        [sender setSelected:NO];

    }else {

        UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
        [sender setImage:bgImage forState:UIControlStateSelected];
        [sender setSelected:YES];
    }

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setInteger:myButton.tag forKey:@"slot1"];

    [[NSUserDefaults standardUserDefaults] setInteger:myButton.tag forKey:@"selected1"];

    [[NSUserDefaults standardUserDefaults] synchronize];

    [self performSelector:@selector(highlightButton:) withObject:sender afterDelay:0.0];
    [self dismissModalViewControllerAnimated:NO];

} 
```

或者有没有办法在点击时强制启用按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:56:32.720

I have just tried this on a different approach.

For me it works just fine and achieves your effect.

Let me know if you need further explanation or the entire Xcode project.

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //button 1
    UIButton *imageButton = [UIButton buttonWithType:UIButtonTypeCustom];
    imageButton.frame = CGRectMake(30, 50, 100, 80);
    UIImage *btnImage = [UIImage imageNamed:@"DSC_5359.JPG"];
    [imageButton setBackgroundImage:btnImage forState:UIControlStateNormal];
    [imageButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];

    //button 2
    UIButton *imageButton2 = [UIButton buttonWithType:UIButtonTypeCustom];
    imageButton2.frame = CGRectMake(180, 50, 100, 80);
    UIImage *btnImage2 = [UIImage imageNamed:@"DSC_5355.JPG"];
    [imageButton2 setBackgroundImage:btnImage2 forState:UIControlStateNormal];
    [imageButton2 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];

    [self.view addSubview:imageButton];
    [self.view addSubview:imageButton2];
}

- (void)buttonClicked:(UIButton*)button
{
    //NSLog(@"Button clicked! %@", button);

    UIImage *checkmarkImage = [UIImage imageNamed:@"check.png"];
    UIImage *empty = nil;

    //NSLog(@"Imageview: %d", button.imageView.tag);
    if (button.imageView.tag == 0)
    {
        [button setImage:checkmarkImage forState:UIControlStateNormal];
        button.imageView.tag = 1;
    }
    else
    {
        [button setImage:empty forState:UIControlStateNormal];
        button.imageView.tag = 0;
    }
} 
```

Best, Chris

**Update: I have updated the code. Here is the entire ViewController. Note: I would solve this using coreData to store the current index. The following code is not the best to solve this issue but is based on your initial code!**

```
//
//  SOViewController.m
//  SOImageOverlay
//
//  Created by Chris on 24.07.12.
//

#import "SOViewController.h"

@interface SOViewController ()

@end

#define CHECKMARK_IMAGE @"check.png"

@implementation SOViewController

@synthesize buttons = _buttons;

#pragma mark - Custom getter
- (NSMutableArray*)buttons
{
    if (_buttons == nil)
        _buttons = [[NSMutableArray alloc] init];

    return _buttons;
}

#pragma mark - View lifecycle
- (void)viewDidLoad
{
    [super viewDidLoad];

//    UIImage *bgImage = [UIImage imageNamed:CHECKMARK_IMAGE];
//    UIButton *myButton = 
//    [myButton setBackgroundImage:bgImage forState:UIControlStateHighlighted];
//    [myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
    // Create view
//    UIScrollView *view = [[UIScrollView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];

    int row = 0;
    int column = 0;
    for(int i = 0; i < 2; ++i) {

        /*UIImage *thumb = [_thumbs objectAtIndex:i];
        myButton = [UIButton buttonWithType:UIButtonTypeCustom];
        myButton.frame = CGRectMake(column*140+24, row*150+10, 100, 100);
        [myButton setImage:thumb forState:UIControlStateNormal];
        [myButton addTarget:self 
                     action:@selector(buttonClicked:) 
           forControlEvents:UIControlEventTouchUpInside];
        myButton.tag = i; 
        NSLog(@"%i",i);*/

        UIButton *imageButton = [UIButton buttonWithType:UIButtonTypeCustom];
        if (i == 0)
        {
            UIImage *btnImage = [UIImage imageNamed:@"DSC_5359.JPG"];
            imageButton.frame = CGRectMake(30, 50, 100, 80);
            [imageButton setBackgroundImage:btnImage forState:UIControlStateNormal];
        }
        else if (i == 1)
         {
             UIImage *btnImage = [UIImage imageNamed:@"DSC_5355.JPG"];
             imageButton.frame = CGRectMake(180, 50, 100, 80);
             [imageButton setBackgroundImage:btnImage forState:UIControlStateNormal];
         }

        [imageButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];

        NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
        NSInteger selectedImageSlot1 = [prefs integerForKey:@"selected1"];

        if ( selectedImageSlot1 == i){
            [self turnButtonToSelected:imageButton];
        } 

        [self.view addSubview:imageButton];

        //adding current button into buttons array
        [self.buttons addObject:imageButton];

        if (column == 6) {
            column = 0;
            row++;
        } else {
            column++;
        }

    }

    //[view setContentSize:CGSizeMake(1024, (row+1) * 150 + 10)];

//    //button 1
//    UIButton *imageButton = [UIButton buttonWithType:UIButtonTypeCustom];
//    imageButton.frame = CGRectMake(30, 50, 100, 80);
//    UIImage *btnImage = [UIImage imageNamed:@"DSC_5359.JPG"];
//    [imageButton setBackgroundImage:btnImage forState:UIControlStateNormal];
//    [imageButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];
//    
//    //button 2
//    UIButton *imageButton2 = [UIButton buttonWithType:UIButtonTypeCustom];
//    imageButton2.frame = CGRectMake(180, 50, 100, 80);
//    UIImage *btnImage2 = [UIImage imageNamed:@"DSC_5355.JPG"];
//    [imageButton2 setBackgroundImage:btnImage2 forState:UIControlStateNormal];
//    [imageButton2 addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];
//
//    [self.view addSubview:imageButton];
//    [self.view addSubview:imageButton2];
}

//- (void)buttonClicked:(UIButton*)button
//{
//    //NSLog(@"Button clicked! %@", button);
//    
//    UIImage *checkmarkImage = [UIImage imageNamed:@"check.png"];
//    UIImage *empty = nil;
//    
//    //NSLog(@"Imageview: %d", button.imageView.tag);
//    if (button.imageView.tag == 0)
//    {
//        [button setImage:checkmarkImage forState:UIControlStateNormal];
//        button.imageView.tag = 1;
//    }
//    else
//    {
//        [button setImage:empty forState:UIControlStateNormal];
//        button.imageView.tag = 0;
//    }
//}

// code from stackoverflow
// ------------------------------------------------------------
- (void)turnButtonToSelected:(UIButton*)button
{       
    UIImage *bgImage = [UIImage imageNamed:CHECKMARK_IMAGE];

    //UIButton *myButton = button; //just to use the copied code
    button.selected = YES;
    [button setImage:bgImage forState:UIControlStateSelected];

//    [myButton setBackgroundImage:bgImage forState:UIControlStateNormal];
//    [myButton setBackgroundImage:bgImage forState:UIControlStateHighlighted];
//    [myButton setBackgroundImage:bgImage forState:UIControlStateDisabled];
//    [myButton setEnabled:NO];
}
- (void)highlightButton:(UIButton *)a {
    //[self turnButtonToSelected];    
}

- (IBAction)buttonClicked:(id)sender 
{
    UIButton *myButton = (UIButton *)sender;
    //I have removed this line... due to the fact that I don't want to 
    //implement your arrays.
    //self.selectedImage = [_images objectAtIndex:myButton.tag];

    //deselecting all
    for (UIButton *button in self.buttons)
    {
        button.selected = NO;
        //[button setImage:nil forState:UIControlStateNormal];
    }

    if (myButton.selected) {

        [sender setSelected:NO];

    }else {

        UIImage *bgImage = [UIImage imageNamed:CHECKMARK_IMAGE];
        [sender setImage:bgImage forState:UIControlStateSelected];
        [sender setSelected:YES];
    }

//    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
//    [prefs setInteger:myButton.tag forKey:@"slot1"];

    //getting index of button in array
    NSInteger index = 0;
    NSInteger foundIndex = -1;
    for (UIButton *button in self.buttons)
    {
        if (button == myButton)
        {
            foundIndex = index;
        }
        index++;
    }

    if (foundIndex >= 0)
    {
        [[NSUserDefaults standardUserDefaults] setInteger:foundIndex forKey:@"selected1"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }

    [self performSelector:@selector(highlightButton:) withObject:sender afterDelay:0.0];
   // [self dismissModalViewControllerAnimated:NO];

}
// ------------------------------------------------------------

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)closeButtonClicked:(UIBarButtonItem *)sender 
{
    [self dismissModalViewControllerAnimated:YES];
}
@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T05:11:15.293

尝试这样做。

```
UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
**[myButton setSelected:NO];
[myButton setBackgroundImage:bgImage forState:UIControlStateNormal];**

UIImage *bgImage = [UIImage imageNamed:@"AGIPC-Checkmark-iPhone.png"];
**[myButton setSelected:YES];
[myButton setImage:bgImage forState:UIControlStateSelected];** 
```

在后面的代码中，您将按钮的状态设置为“选中”，但在上面的代码中，您没有。相反，您已禁用该按钮。试试我提供的上面的代码。谢谢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T21:13:01.767

只需在用户单击按钮时将 chekedImage 添加为按钮顶部的子视图

```
UIImage *button = [UIImage imageNamed:@"cat.png"];
[myButton setBackgroundImage:bgImage forState:UIControlStateNormal];
//添加目标按钮点击

-(void)buttonClicked : (id)sender{
    如果（工具开关）{
       [按钮 addSubview:checkedimageView]; // 只是选中的图像图标
    }
    别的{
       [imageview removeFromSuperview];
    }
}

```

只有当您的所有图像都有两种类型的资源时，您尝试做的事情才会起作用。1) 图像本身 2) 带有复选框的图像作为透明层。

# javascript - 获取上周Javascript的开始日期和最后日期

> ID：11431259
> 
> 赞同：0
> 
> 时间：2012-07-11T11:03:01.713
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 中获取一周的第一天和最后一天](https://stackoverflow.com/questions/5210376/get-first-and-last-day-of-the-week-in-javascript)

任何机构都可以建议我如何通过将今天的日期提供给函数来获得上周的开始日期和结束日期？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T12:00:25.493

下面是工作代码！希望这可以帮助任何人......！

```
 var d = new Date();
        var to = d.setTime(d.getTime() - (d.getDay() ? d.getDay() : 7) * 24 * 60 * 60 * 1000);
        var from = d.setTime(d.getTime() - 6 * 24 * 60 * 60 * 1000);
alert(to);
alert(from); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:07:07.560

获取当月的最后一天：

```
/**
 * Accepts either zero, one, or two parameters.
 *     If zero parameters: defaults to today's date
 *     If one parameter: Date object
 *     If two parameters: year, (zero-based) month
 */
function getLastDay() {
    var year, month;
    var lastDay = new Date();

    if (arguments.length == 1) {
        lastDay = arguments[0];
    } else if (arguments.length > 0) {
        lastDay.setYear(arguments[0]);
        lastDay.setMonth(arguments[1]);
    }

    lastDay.setMonth(lastDay.getMonth() + 1);
    lastDay.setDate(0);

    return lastDay;
} 
```

获取最后一个星期一：

```
/**
 * Accepts same parameters as getLastDay()
 */
function getLastMonday() {
    var lastMonday = getLastDay.apply(this, arguments);
    lastMonday.setDate(lastMonday.getDate() - (lastMonday.getDay() == 0 ? 6 : (lastMonday.getDay() - 1)));
    return lastMonday;
} 
```

现在做你可以做的工作

```
/**
 * Accepts one parameter: Date object.
 * Assumes start of week is Sunday.
 */
function getWeek(d) {
    var jan1 = new Date(d.getFullYear(), 0, 1);
    return Math.ceil((((d - jan1) / (24 * 60 * 60 * 1000)) + jan1.getDay() + 1) / 7);
} 
```

然后使用

```
// Get the last week of this month:
var lastWeekThisMonth = getWeek(getLastDay());
Alert("lastWeekThisMonth: %s", lastWeekThisMonth); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T11:07:00.660

你可以使用[Date.js](http://www.datejs.com/)

```
 Date.today().previous().monday() 
```

可能对你有用。

# c# - 调用 Google GCM 时未授权

> ID：11431261
> 
> 赞同：7
> 
> 时间：2012-07-11T11:03:19.600
> 
> 标签：c#, android, httpwebrequest, unauthorized, google-cloud-messaging

我尝试使用 Google GCM 发送推送通知。但是得到一个 WebException ，表明远程服务器未经授权返回 401。我不知道为什么它不起作用。

有谁知道为什么它不起作用？

这是我的代码：

```
 ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateServerCertificate);

           HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");

            Request.Method = "POST";
            Request.KeepAlive = false;

            string postData = "{ 'registration_ids': [ '"+registrationId+"' ], 'data': {'message': '"+message+"'}}";

            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            Request.ContentType = "application/json";
            //Request.ContentLength = byteArray.Length;

            //Request.Headers.Add(HttpRequestHeader.Authorization, "GoogleLogin auth=" + AuthString);
            Request.Headers.Add(HttpRequestHeader.Authorization, "Authorization: key=AIzaSyCEygavdzrNM3pWNPtvaJXpvW66CKnjH_Y");
            //-- Delegate Modeling to Validate Server Certificate --//

            //-- Create Stream to Write Byte Array --// 
            Stream dataStream = Request.GetRequestStream();
            dataStream.Write(byteArray, 0, byteArray.Length);
            dataStream.Close();

            //-- Post a Message --//
            WebResponse Response = Request.GetResponse();
            HttpStatusCode ResponseCode = ((HttpWebResponse)Response).StatusCode;
            if (ResponseCode.Equals(HttpStatusCode.Unauthorized) || ResponseCode.Equals(HttpStatusCode.Forbidden))
            {
                var text = "Unauthorized - need new token";

            }
            else if (!ResponseCode.Equals(HttpStatusCode.OK))
            {
                var text =  "Response from web service isn't OK";
            }

            StreamReader Reader = new StreamReader(Response.GetResponseStream());
            string responseLine = Reader.ReadLine();
            Reader.Close(); 
```

![在此处输入图像描述](../Images/e77037df980b42d069de2b4f09a0f9d5.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T11:09:22.700

Daniel-Dude GCM 文档有问题！在 Server API key 的地方使用 Browser key 作为授权 key。它会起作用的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T23:19:12.037

好的，我只是在这里在黑暗中拍摄。看看这一行：

```
Request.Headers.Add(HttpRequestHeader.Authorization, "Authorization: key=AIzaSyCEygavdzrNM3pWNPtvaJXpvW66CKnjH_Y"); 
```

不应该是：

```
Request.Headers.Add(HttpRequestHeader.Authorization, "key=AIzaSyCEygavdzrNM3pWNPtvaJXpvW66CKnjH_Y"); 
```

既然您告诉它这是一个 Authorization 标头，则无需再次添加“Authorization：”，对吗？

另外，确保字符串常量“HttpRequestHeader.Authorization”是“Authorization”。

# cakephp - 使用用户名 cakePhp 列出图片的评论

> ID：11431267
> 
> 赞同：0
> 
> 时间：2012-07-11T11:03:37.223
> 
> 标签：cakephp

我的评论有问题。我有用户模型：

```
public $hasMany = array('Photo','Comment'); 
```

评论型号：

```
public $belongsTo = array(
            'User'=>array(
                'className'=>'User',
                'foreignKey'=>'user_id'
            ),
            'Photo'=>array(
                'className'=>'Photo',
                'foreignKey'=>'photo_id'
            )
        ); 
```

和照片模型

```
 public $belongsTo = array(
    'User'=>array(
        'className'=>'User',
        'foreignKey'=>'user_id'
    )
);

public $hasMany = array(
    'Comment'=>array(
        'className'=>'Comment',
        'foreignKey'=>'photo_id'
    )
); 
```

当我读取照片数据时，我得到：

```
'Photo' => array -> info about photo which is ok for me
'User' => array -> info about user ok for me
'Comment' => array -> all comments but only with id of users. 
```

如何在检索有关照片的数据时将评论与用户连接以获得与评论相关的用户名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:09:56.363

您需要`$this->recursive = 2`在调用 find() 之前调用，这将获取查询返回的每个对象的所有关联。或者，您可以`$recursive`在任何模型中设置变量。

不同类型的递归如下：

*   -1 Cake 仅获取照片数据，不获取连接。
*   0 Cake 获取照片数据及其域
*   1 Cake 获取一张照片、它的域和相关的评论
*   2 Cake 获取一张照片、它的域、它的相关评论以及评论的相关用户

我还建议考虑[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)，因为您可以完全控制返回的所有数据，甚至可以指定任何关联中的每个字段

照片模型：

```
<?php
class Photo extends AppModel {
    public $actsAs = array('Containable');
} 
```

您的 find 方法将如下所示：

```
<?php
$this->Photo->find('all', array(
    'contain' => array(
        'User',
        'Comment' => array(
            'User' = array(
                'fields' => array('username')
            ),
            'conditions' => array(
                'Comment.erased' => 0
            )
        ))
    'conditions' => array(
        'Photo.id' => $id
))); 
```

# c - 在 Linux 设备和 Mac 之间共享文件的情况下，mac os x lion 中的 fwrite() 和 fread() 需要很长时间

> ID：11431271
> 
> 赞同：1
> 
> 时间：2012-07-11T11:03:46.803
> 
> 标签：c, macos, file, operating-system, fwrite

我有一个简单的 Mac C 程序，它将数据写入位于连接到 Mac 计算机的 USB 设备上的原始数据文件。原始数据文件存储在 FAT32 文件格式的设备中。设备上运行的 Linux C 程序使用. 打开相同的文件，`fopen()`并使用`fread()`.

和操作太慢，需要很长时间才能更新`fread()`。`fwrite()`

Mac C 程序：

```
fp=fopen("/Volumes/Untitled/rawdatafile","rb+");

fcntl(fileno(fp),F_NOCACHE,1); 
```

是否有任何其他 API 或标志可以在共享模式下打开文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:41:54.523

你不能安全地做到这一点。您只是没有损坏您的数据，因为您运行它的时间不够长。在您的 USB 设备上，您必须在连接到 USB 时卸载文件系统，并且在 USB 主机（即 mac 或 pc）卸载之前不要重新安装。

如果您希望能够同时从设备和主机读取/写入，您有两个主要选择：

1.  媒体传输协议
2.  伪装成网络设备并提供链接本地网络共享

# javascript - 如何更改容器的值？

> ID：11431274
> 
> 赞同：0
> 
> 时间：2012-07-11T11:03:56.180
> 
> 标签：javascript, jquery

我有以下代码：

```
if (json.result=='OK') {
              message="Your correction has been added successfully";
             $("#ShoppingCartView.custom_terms_n_conditions/24").empty();
             $("#ShoppingCartView.custom_terms_n_conditions/24").html('123');
}
alert(message); 
```

有问题：我可以看到带有消息的警报，但是 id="ShoppingCartView.custom_terms_n_conditions/24" 的元素不会改变它的值！这个元素确实存在，我不明白为什么。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:16:29.943

这是您只需要逃避的工作`/`代码`\\`

```
if (json.result=='OK') {
              message="Your correction has been added successfully";
 $("#ShoppingCartView.custom_terms_n_conditions\\/24").html('123');
}
alert(message); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T11:05:58.873

您必须使用两个斜杠[转义](http://api.jquery.com/category/selectors/)`/`and字符。`.`此外，`.html`将覆盖并因此已经为空：

```
$("#ShoppingCartView\\.custom_terms_n_conditions\\/24").html("123"); 
```

# mysql - 如何在mysql中获取特定id后的记录

> ID：11431279
> 
> 赞同：0
> 
> 时间：2012-07-11T11:04:11.050
> 
> 标签：mysql, select, sql-order-by

我们在mysql上有这个：

[![](../Images/4acae3395fbef2122b60c5cc58fd78f4.png)](https://i.stack.imgur.com/TEFtz.jpg)

**并且想要返回 2 个限制：**
1- `"SELECT * FROM table ORDER BY point DESC LIMIT 0,2"`//return 'google' & 'jsfiddle'
2- `"SELECT * FROM table ORDER BY point DESC LIMIT 2,2"`//return 'stackoverflow' & 'msn'
3- `"INSERT INTO table SET id = 11, name = 'gmail', point = 101 "`
4- `"SELECT * FROM table ORDER BY point DESC LIMIT 4,2"`//return 'msn' & 'emra'
* *在数字 4 'msn' 是重复的。我想要 4 号返回 'emra' 和 'facebook'。**
我可以保存 'id' 并且我想要查询返回该 id 之后的记录。

**[编辑]** **让我以另一种方式问：**

我们有这样的记录：

```
id, name, point
4, 'google', 100
6, 'yahoo', 100
3, 'gmail', 100
8, 'ymail', 100
2, 'fb', 100 
```

我有 id:3 并希望选择此 id 之后的记录（在此示例中为 'ymail'、'fb'）

这是一个通过 scorlling（如 facebook）加载的 ajax 内容，但关于每时每刻都在变化的用户的最大点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:14:26.420

**如果我正确理解了**您的问题（我对此表示怀疑），那么您想要一种在获得第一个 N...

这样做的主要问题是**新**记录（您在#3 中显示的）可能会出现在先前结果之间的**任何位置**，从而使您已经获取的记录过时（按顺序）。

所以，如果你真的想要这个，你应该做两件事：

1.  记住您已经获取的**所有**ID，并在查询中提供`NOT IN(list of already fetched ids)`in`WHERE`子句，而不指定*偏移量*（仅`LIMIT 2`）

2.  After you fetched that, add the amount of the results you fetched anew to the list and reorder it if needed (some sort of insertion sort)

# android - Android - 如何执行 HTTP GET 请求？

> ID：11431280
> 
> 赞同：0
> 
> 时间：2012-07-11T11:04:13.727
> 
> 标签：android, http, connection, httpurlconnection

我正在尝试执行 HTTP 获取请求，以从网页（文本或图像）下载内容。

我需要的是构建一个允许我这样做的类，并在我需要时在我的应用程序中使用它。

这个想法是有两种方法：

1.  从 url 下载文本（返回一个字符串）

2.  下载图像（给我一个位图）

**示例**：我有一个包含图像的 URL，我使用我的方法`downloadBitmap()`获取它，然后我可以做我想做的事。就像把它放到一个`ImageView`展示中一样。

示例代码表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:05:40.550

查看 Apache HTTP 客户端库。它包含在 Android 平台中。

以下问题的答案应涵盖您需要了解的内容。

*   [在 Android 上从服务器读取文本文件](https://stackoverflow.com/questions/2922210/reading-text-file-from-server-on-android)
*   [从 Android 中的 url 加载图像，只有在很小的情况下](https://stackoverflow.com/questions/3328898/load-image-from-url-in-android-only-if-small)

# c# - TransactionScope 是否在 LinQ 查询中对数据库进行跨进程锁定？

> ID：11431284
> 
> 赞同：0
> 
> 时间：2012-07-11T11:04:30.517
> 
> 标签：c#, database, linq, transactions, transactionscope

我在一台机器上运行了几个应用程序，该机器上还有一个 MSSQL 服务器。

应用程序有多种类型，如 WPF、WCF Service、MVC App 等。他们都访问唯一的数据库，该数据库位于 sql server 上。访问模式是简单的 LinQ-to-SQL 类调用。

在每个数据库连接中，我都会进行一些查询、一些检查和一些数据库写入。

我的问题是：通过使用简单实例，我能否确定这些事务范围内的调用不会同时运行（**线程和进程安全）？**[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:42:31.203

使用事务范围显然会使特定的连接成为事务性的。使用事务范围本身并不会阻止机器上的两个不同进程同时执行相同的操作。它确实确保执行的所有操作都已提交或回滚。每个进程看到的数据视图取决于隔离级别，默认情况下是可序列化的，这很容易导致死锁。一个更实用的隔离级别是读取提交，最好使用快照隔离，因为这进一步减少了死锁和等待时间。

如果您想确保只有一个应用程序实例在做某事，您可以使用互斥锁或使用所有不同进程将尝试获取并在必要时等待的数据库锁。

# jquery - jQuery 动画 2 个独立的 div 宽度导致像素抖动

> ID：11431285
> 
> 赞同：1
> 
> 时间：2012-07-11T11:04:31.320
> 
> 标签：jquery, css-float, width, jquery-animate

通过使用浮动 CSS 参数，使用两个并排对齐的 div。

jQuery 同时改变它们的宽度。这引起了生涩的像素化激动。我设置了一个小提琴，但 jsfiddle 已关闭。

我们如何使每个 div 宽度同时滑动而不发生这种抖动。

```
<div class="container">
    <div class="div d1">DIV 1</div>
    <div class="div d2">DIV 2</div>
</div>

<div style="clear:both;"></div>
</br></br>
<input class="s1" type="button" value="shift"/>
<input class="s2" type="button" value="shift back"/>
​
$(document).ready(function(){
    $('.s1').click(function(){
        $('.d1').animate({width:100},{duration:300,queue:false});
        $('.d2').animate({width:300},{duration:300,queue:false});
    });
     $('.s2').click(function(){
        $('.d1').animate({width:100},{duration:300,queue:false});
        $('.d2').animate({width:300},{duration:300,queue:false});
    });
});​
.div { display:block; width:200px; height:90px; background:#666; colour:#FFF; float:left; }

.container { border:1px solid #000; background:#EEE; width:400px; }
input { clear:both;} 
```

​ 这是一个将右 div 浮点数更改为右的版本，因此您可以准确地看到我的意思。查看动画期间您可以在它们之间看到的白线。

[http://jsfiddle.net/74zNU/1/](http://jsfiddle.net/74zNU/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:21:16.800

对于这个 Chrome 问题，我有***两种***不同的解决方案供您考虑。

**参考：** [**jsFiddle 1**](http://jsfiddle.net/Rk7uC/)

> 这个**jsFiddle**使用您的方法和Chrome 浏览器在元素之间的白线的**解决方法**，因为它动画**同时尊重**两个元素**必须**具有唯一的大小。**`position:absolute`**for Div2 的使用与of**`z-index`**一起使用**`1`**。加入一个 1 像素的填充，它会像创可贴一样“***覆盖”那个白色间隙。***

* * *

**参考：** [**jsFiddle 2**](http://jsfiddle.net/UnJf5/)

> 这个**jsFiddle**完全使用了**不同的方法**。由于在 div上设置了属性，因此只有 Div2 不会更改两个 div 的大小，而是接收模拟宽度大小更改的***位置更改***。这种错觉类似于之前的 jsFiddle，除了 div 始终保持其 宽度。**`overflow`****`container`****`400px`**

# jquery-mobile - Jquery listview问题

> ID：11431287
> 
> 赞同：0
> 
> 时间：2012-07-11T11:04:38.773
> 
> 标签：jquery-mobile

在职的 。在列表视图中似乎是 2 值。

```
{"liste":{"TotalRecordCount":"2","xmlns":"","dokuman":[{"id":"2568","titles":"İstanbul Eindhoven"},{"id":"2384","titles":"Kesişen Dünyalar",}]}} 
```

不工作。列表视图中似乎不是 1 值

```
{"liste":{"TotalRecordCount":"1","xmlns":"","dokuman":{"id":"2085","titles":"Fotoğraf Atölyesi"}}} 
```

我的列表视图添加代码

```
path=data.liste.dokuman;

for (var liindex = 0;liindex<path.length; liindex++){
   // my listview adding value
   } 
```

如果只记录在 json 中，listview 不添加所以不添加 1 条记录。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:09:32.540

如果任何 Json 数组中可能有多个结果，则 Json 应该采用正确的格式。
所以你的 Json 应该是这样的：

```
{"liste":{"TotalRecordCount":"1","xmlns":"","dokuman":[{"id":"2085","titles":"Fotoğraf Atölyesi"}]}} 
```

那么你上面的代码就可以工作了。否则按以下方式获取单条记录 JsonObject 的数据。

```
var id=data.liste.dokuman.id ;
var titles = data.liste.dokuman.id.titles; 
```

等等..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:28:39.863

工作:) 谢谢@neeraj

```
if(path.length == undefined){
              myNewArray[0]= path;
              console.log("not array")
         } 
```

# android - android中的Gridview布局

> ID：11431294
> 
> 赞同：2
> 
> 时间：2012-07-11T11:05:04.527
> 
> 标签：android, layout, gridview

我想在我的应用程序中显示一个网格视图。我的网格视图应该看起来像数据库中的一个表（有多少列和多少行）。应该类似于数据库。但是我有一些折叠的格式看起来不太好。请帮助我。

我的 main.xml：

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridview" android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:numColumns="5"
    android:stretchMode="columnWidth"
    android:layout_below="@+id/text1view" 
    android:gravity="center"
    android:horizontalSpacing="10dip" /> 
```

我的布局文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:paddingTop="4dip"
    android:paddingBottom="6dip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">           

    <TextView android:id="@+id/text1"       
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 

    <TextView android:id="@+id/text3"           
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView android:id="@+id/text5"           
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView android:id="@+id/text7"           
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView android:id="@+id/text9"           
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView21"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" /> 

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:48:02.853

我有类似的屏幕，所以你可以使用下面的一些代码。

```
public class ListViewCustomAdapter extends BaseAdapter {

    /**
     * Array list to hold assets which need to be displayed
     */
    ArrayList<Asset> itemList;

    /**
     * Context: Interface to global information about an application
     * environment.
     */
    public Activity context;

    /**
     * Layout inflater to inflate view of each row of the list from the layout
     * xml
     */
    public LayoutInflater inflater;

    /**
     * @param context
     *            : Context: Interface to global information about an
     *            application environment.
     * @param itemList
     *            : arraylist to hold asset which need to be displayed in list
     */
    public ListViewCustomAdapter(Activity context, ArrayList<Asset> itemList) {
        super();

        this.context = context;
        this.itemList = itemList;

        this.inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    // @Override
    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getCount()
     */
    public int getCount() {
        if (itemList != null) {
            return itemList.size();
        }else return 0;
    }

    // @Override
    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getItem(int)
     */
    public Object getItem(int position) {   
        if(itemList != null){
            return itemList.get(position);
        }else{
            return 0;
        }

    }

    // @Override
    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getItemId(int)
     */
    public long getItemId(int position) {
        return 0;
    }

    /**
     * @author asadafale class to create view of each row in the list
     */
    public static class ViewHolder {

        /**
         * displays name of asset
         */
        TextView txtVw_name;
        /**
         * displays serial no of asset
         */
        TextView txtVw_sno;
        /**
         * displays type of asset
         */
        TextView txtVw_type;

    }

    // @Override
    /*
     * (non-Javadoc)
     * 
     * @see android.widget.Adapter#getView(int, android.view.View,
     * android.view.ViewGroup)
     */
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.listview_row, null);

            holder.txtVw_name = (TextView) convertView
                    .findViewById(R.id.tv_name);
            holder.txtVw_sno = (TextView) convertView.findViewById(R.id.tv_sno);
            holder.txtVw_type = (TextView) convertView
                    .findViewById(R.id.tv_type);

            convertView.setTag(holder);
        } else
            holder = (ViewHolder) convertView.getTag();

        // set selected item
        LinearLayout activeItem = (LinearLayout) convertView;

        if (position == SearchAssetActivity.selectedItem) {
            activeItem.setBackgroundColor(Color.GRAY);

            // for focus on it
            int top = (activeItem == null) ? 0 : activeItem.getTop();
            ((ListView) parent).setSelectionFromTop(position, top);
        } else {
            activeItem.setBackgroundColor(Color.BLACK);
        }

        Asset bean = (Asset) itemList.get(position);

        holder.txtVw_name.setText(bean.getAssetName());
        holder.txtVw_sno.setText(bean.getSno());
        holder.txtVw_type.setText(bean.getAssetType());

        return convertView;
    }

} 
```

![在此处输入图像描述](../Images/59b552677ecbadd59eeeeab38689733b.png)

我的屏幕的一部分看起来像你想要的一样。

这是我在 xml 中的布局：

```
<LinearLayout        
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/grey05"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv_name"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_weight="0.25"
        android:text="Name"
        android:textAppearance="?android:attr/textAppearanceMedium" >
    </TextView>

    <TextView
        android:id="@+id/tv_sno"
        android:layout_width="1dip"
        android:layout_height="wrap_content"

        android:layout_weight="0.25"
        android:text="Serial No."
        android:textAppearance="?android:attr/textAppearanceMedium" >
    </TextView>

    <TextView
        android:id="@+id/tv_type"
        android:layout_width="1dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"
        android:layout_marginLeft="20dp"
        android:text="Type"
        android:textAppearance="?android:attr/textAppearanceMedium" >
    </TextView>
</LinearLayout> 
```

我知道我只想显示 3 列。您可以在 layout.xml 中定义许多 textview。在您的情况下，我相信您会即时知道列数，因此您将需要某种`TextView`s 数组来动态执行此操作，而这无法通过 xml 完成。您必须`TextView`在适配器类中定义一个 s 数组，并且可以根据来自数据库的数据动态初始化。希望你能得到我想要传达的东西。让我知道您是否需要更多帮助来设计它，一旦您开始。:)

# regex - 正则表达式匹配不以模式结尾的字符串

> ID：11431295
> 
> 赞同：11
> 
> 时间：2012-07-11T11:05:13.417
> 
> 标签：regex, regex-negation

只有当字符串不以至少三个“0”或更多结尾时，我才会尝试找到与字符串匹配的正则表达式。直觉上，我试过：

```
.*[^0]{3,}$ 
```

但是当字符串末尾有一个或两个零时，这不匹配。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T12:10:31.977

如果您必须在没有后向断言的情况下执行此操作（即在 JavaScript 中）：

```
^(?:.{0,2}|.*(?!000).{3})$ 
```

否则，请使用 hsz 的答案。

**解释：**

```
^          # Start of string
(?:        # Either match...
 .{0,2}    #  a string of up to two characters
|          # or
 .*        #  any string
 (?!000)   #   (unless followed by three zeroes)
 .{3}      #  followed by three characters
)          # End of alternation
$          # End of string 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-11T11:13:12.300

您可以尝试使用负面的后视，即：

```
(?<!000)$ 
```

测试：

```
Test  Target String   Matches
1     654153640       Yes
2     5646549800      Yes   
3     848461158000    No
4     84681840000     No
5     35450008748     Yes 
```

但请记住，并非每种语言都支持负面的后视。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-29T16:09:09.040

不向后看，更通用的有什么问题`^(.(?!.*0{3,}$))*$`？

一般模式是`^(.(?!.*`++ *`not-ending-with-pattern`*。`$))*$`您不必像蒂姆的回答那样对状态机进行逆向工程；您只需在最后插入您不想匹配的模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T11:15:36.010

这是正则表达式不太擅长的事情之一，因为字符串不是很*规则*（无论这意味着什么）。我能想出的唯一方法就是给它一切可能性。

```
.*[^0]..$|.*.[^0].$|.*..[^0]$ 
```

这简化为

```
.*([^0]|[^0].|[^0]..)$ 
```

如果您只想要不以三个 0 结尾的字符串，那很好，但不以十个 0 结尾的字符串会很长。但值得庆幸的是，这个字符串比其中一些组合更*规则，您可以进一步简化它。*

```
.*[^0].{0,2}$ 
```

# c# - 如果 Int，C# 编译时错误？

> ID：11431307
> 
> 赞同：0
> 
> 时间：2012-07-11T11:05:48.583
> 
> 标签：c#, compiler-construction, msbuild

我正在尝试在 C#中[重新创建它。](https://stackoverflow.com/q/11430449/34537)

我得到的问题是，如果我使用构造函数，我必须使用我不想要的 new MyInt（冗长）。解决方法是使用隐式/显式运算符。但是它们必须是公开的......我到底是如何在 C# 中实现这个功能的？

简短的问题是我想将字节/短传递给一个函数，而不是 int。传递 int 应该会给我一个编译错误。我知道我可以使用公共隐式 int 运算符轻松获得运行时。下面的代码显示int自动转换为char

[运行示例](http://ideone.com/xPzU2)显示 true

```
using System;
class Program
{
        public static void Write(MyInt v)
        {
                Console.WriteLine("{0}", v.v is byte);
        }
        static void Main(string[] args)
        {
                Write(2);
        }
}
public struct MyInt
{
        public object v;
        public MyInt(byte vv) { v = vv; }
        public MyInt(short vv) { v = vv; }
        public MyInt(byte[] vv) { v = vv; }
        public static implicit operator MyInt(byte vv) { return new MyInt { v = vv }; }
        //public static extern implicit operator MyInt(int vv);
} 
```

[这是更多无用的](http://pastebin.com/btyH1FJJ)代码。它实现了 C++ 解决方案中不需要的 MyInt2/MyInt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:41:57.020

只需声明您的函数很短。Byte 将被隐式转换为 short，但没有从 int 到 short 的隐式转换，因此 int 不会通过

```
public class Class1
{
  public static void Aaa(short a)
  {

  }

  public void Bbb()
  {
    int i = 5;
    byte b = 1;
    short c = 1;
    Class1.Aaa(i); // Gives error
    Class1.Aaa(b); // Ok
    Class1.Aaa(c);  // ok
  }
} 
```

# javascript - 如何阻止用户从同一浏览器中的不同选项卡同时登录

> ID：11431309
> 
> 赞同：0
> 
> 时间：2012-07-11T11:05:58.487
> 
> 标签：javascript, jquery, spring-mvc

我的应用程序使用 spring3 mvc，如果用户打开两个选项卡并尝试使用不同的 userId 同时登录，我想将用户重定向到同一页面。

与 gmail 功能一样，如果两个用户从两个不同的选项卡登录，第一个用户将注销并看到会话超时消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:12:38.770

同一个浏览器的几个标签页使用同一个会话，所以如果你只是禁止已经登录的用户访问登录页面，这种情况永远不会发生。

这样做的唯一可能性是浏览器不支持 cookie，并且容器回退到 URL 重写以维护会话。在这种情况下，用户可以在同一个浏览器中同时拥有两个会话。但在这种情况下，您可以简单地强制为您的 web 应用程序使用 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T07:26:43.563

试试下面的附加代码。

在使用某个键（例如“Y”）单击登录时，在本地存储中设置一个键。将下面提到的放在通用文件中，该文件将在整个应用程序中可用。更改本地存储的值时将触发以下事件。当值为 Y 时。调用注销功能。登录后清除本地存储。

```
While Clicking login - > CLEAR_USER_SESSION - > Y - This will Logout other Session's of the Same Application in the Same Browser as per the Below Code.

After Login - Change the Value to N or Empty - CLEAR_USER_SESSION  - > 'Y' or ''

window.addEventListener('storage', function(event) {
      if (event.key == 'CLEAR_USER_SESSION') {
        var winUrl = window.location.href;
        var terminateSession =event.newValue;
        var homepage = "N";
        if(document.getElementById("empTrId")){
            homepage = "Y";
        }

        if(terminateSession && terminateSession.trim() == "Y" && !winUrl.includes("loginAction.do?method=logout") 
                && !winUrl.includes("login.jsp") && homepage == "N"){
            logout();
        }
      }
    }); 
```

# search - 当我指定时，solr 没有拾取任何库 在 solrconfig.xml 中

> ID：11431316
> 
> 赞同：1
> 
> 时间：2012-07-11T11:06:26.953
> 
> 标签：search, solr

`<lib dir="../../dist/" regex="apache-solr-cell-\d.*\.jar"/>`当我在 solrconfig.xml 中使用时，Solr 没有拾取 jar 文件

我还在 solr/ 中创建了 lib 目录并`<lib dir="./lib" />`在 solrconfig.xml 中指定，但它没有获取自定义 jar 文件。

知道可能缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:05:33.387

如果您在 solr 目录中创建了 lib 文件夹，则路径将`<lib dir="../lib" />`与 solrconfig.xml 一样，它必须跳回一个目录以引用 lib 文件夹。

# javascript - 附加到 div 的麻烦

> ID：11431325
> 
> 赞同：1
> 
> 时间：2012-07-11T11:07:01.063
> 
> 标签：javascript, jquery

尝试使用以下函数将 div 附加到另一个`customizefields`，但我没有成功。控制台不返回任何错误，所以我不知道从这里去哪里？

**javascript**

```
function customizefields(objNames) {
    $('td div').each(function(){
        name = $(this).text();
        if (name.indexOf(" ") != -1) {
            name = name.substring(0, name.indexOf(" "));
        }
        if (objNames[name]) {
             $('<div/>', {
                  id: 'bio',
                  text: objNames[name].bio
             }).appendTo(this);
        }
    });
}

var namesToChange = {
    'Ben':{'class':'pn_cool','bio':'some text for ben'},
    'Andrew':{'class':'pn_bad','bio':'some text for andrew'}
};

setInterval(function(){customizefields(namesToChange)}, 1000); 
```

**html**

```
<tr>
   <td class="stxt2">
      <img src="#" class="pic">
      <div class="dtxt2" title="07/10/12 09:40 PM">40 mins ago</div>
      <b class="nme pn_usr">Andrew</b>: Ut lacus sapien, pretium ut dictum eget, tempus ac nisi.
   </td>
</tr>
<tr>
   <td class="stxt">
      <img src="#" class="pic">
      <div class="dtxt" title="07/10/12 09:30 PM">30 mins ago</div>
      <b class="nme pn_usr">Ben</b>: Cras vitae cursus lectus.
   </td>
</tr>
<tr> 
```

**我试图达到的结果**

```
 <tr>
       <td class="stxt">
          <img src="#" class="pic">
<div id="bio">TEXT FROM OBJECT WILL GO HERE</div>
          <div class="dtxt" title="07/10/12 09:30 PM">30 mins ago</div>
          <b class="nme pn_usr">Ben</b>: Cras vitae cursus lectus.
       </td>
    </tr>
<tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:18:40.130

在我看来，您应该查看兄弟`b`标签的文本内容，而不是目前的`div`标签。

例如，当前，您的`name`var 的值（顺便说一下，它是全局的）将是“40”，对于下一次迭代，“30”。

大概你的意思是

```
$('td div').each(function() {
    name = $(this).next('b').text();
    //more code... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:21:05.880

您可以尝试使用 JQuery api
.before 或 .prepend

# google-maps - Google Map Autocomplete

> ID：11431331
> 
> 赞同：1
> 
> 时间：2012-07-11T11:07:24.260
> 
> 标签：google-maps, css, google-maps-api-3

I'm trying to use this: [https://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete). How do I control the width of the input text box? And how do I control the width of the drop down menu?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:28:30.190

The input has the `searchTextField` id, so this simple css rule would do the trick:

```
#searchTextField {
    width: 500px;
} 
```

The drop down menu will scale accordingly, but if you want to change it you should add:

```
.pac-container {
    width: 700px !important;
} 
```

The `!important` is needed because the width is applied inline to the dropdown using the `style` attribute, and this can't be overriden.

# c# - 脸书漏洞？1) 用户图片 url 2) 使用 cookie 进行身份验证

> ID：11431334
> 
> 赞同：0
> 
> 时间：2012-07-11T11:07:29.173
> 
> 标签：c#, asp.net-mvc, facebook, facebook-graph-api, facebook-c#-sdk

我有一个在 asp.net mvc 上编写的 Facebook 画布应用程序。我看不到脸书上发生了什么。

1.  我有加载 FB 用户图片的客户端代码：

    FB.api('/' + userId, { fields: "id,link,name,picture" }, function (user) {
    $('img[data-fb-user-img]', subjectVoterElement).attr(' src', user.picture.data.url);
    });

有一天它会在 user.picture 中响应图片 url，另一天在 user.picture.data.url 中响应，所以我不时会出错。为什么FB给出不同的响应结构？
2.
要在我的应用程序中授权 FB 用户，我使用 facebook cookie 发送到我的应用程序服务器。然后我从中提取值，然后使用 ParseSignedRequest 方法解析值并将获得的代码交换为令牌。
HttpCookie fbCookie = filterContext.RequestContext.HttpContext.Request.Cookies[ String.Format("fbsr_{0}", System.Configuration.ConfigurationManager.AppSettings["FB_Id"])];
字符串代码 = ((动态) FacebookService.FacebookService.Client.ParseSignedRequest(fbCookie.Value)).code;

```
 using (var webClient = new WebClient())  
            {  
                var result = webClient.DownloadString(  
                    String.Format(  
                        "https://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri=&client_secret={1}&code={2}",  
                        FacebookService.FacebookService.Client.AppId,  
                        FacebookService.FacebookService.Client.AppSecret,  
                        code  
                        )  
                    ); 
```

有时我收到授权错误，提示代码已过期或指定用户已从 Facebook 注销。事实上，我在一小时前注销了，从那一刻起，这已经成功了。此外，facebook cookie 的过期时间设置得足够长，还没有到来。
有没有人有同样的问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:49:54.583

我不确定这是否是#1 的问题，但我遇到了问题，所以我会把它扔在那里。实际上至少有两种不同类型的 facebook 用户（可能更多）：

1.  拥有像你我这样的帐户的普通 Facebook 用户
2.  刚刚为 Facebook 页面设置的帐户

如何创建仅用于页面的 facebook 帐户？

*   第 1 步：注销您的 Facebook 帐户
*   第 2 步：去这里： http: [//www.facebook.com/pages/create.php](http://www.facebook.com/pages/create.php)
*   第 3 步：为虚假业务或您要测试的任何类型的页面设置页面
*   第 4 步：选择我没有 facebook 帐户并使用新的电子邮件地址创建一个帐户

现在用你的普通用户和这个只有 facebook 页面的用户来试试你的应用程序。就像我说的，我不确定这是否是您的问题，但我在 Facebook 页面仅帐户方面遇到了许多其他问题，因此值得一试。

# google-chrome-extension - 从网页向 chrome 扩展发送消息

> ID：11431337
> 
> 赞同：60
> 
> 时间：2012-07-11T11:07:59.350
> 
> 标签：google-chrome-extension, google-chrome-devtools

我想从随机网页的控制台向我的 chrome 扩展程序发送消息。chrome.extension.sendMessage 似乎不起作用。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-11T11:37:06.080

根据[官方文档](http://code.google.com/chrome/extensions/content_scripts.html#host-page-communication)，您应该在接收者[`postMessage`](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)的发送者和[`message`](https://developer.mozilla.org/en-US/docs/Web/Events/message)事件监听器中使用。

这是一个例子：

**您网站的 page.html**

```
var data = { type: "FROM_PAGE", text: "Hello from the webpage!" };
window.postMessage(data, "*"); 
```

**内容脚本：（**使用注入`chrome.tabs.executeScript(tabid, {code:...`）

```
window.addEventListener("message", function(event) {
    // We only accept messages from ourselves
    if (event.source != window)
        return;

    if (event.data.type && (event.data.type == "FROM_PAGE")) {
        console.log("Content script received message: " + event.data.text);
    }
}); 
```

这里`page.html`（不是扩展的一部分）向自己发布消息，内容脚本会拦截和检查这些消息。通过类似的方式可以反过来。

要从内容脚本传递到扩展，您必须使用[一种可用的消息传递技术](http://code.google.com/chrome/extensions/messaging.html)。

它看起来很复杂，而且有点复杂，但是所有这些大话都非常安全。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-12-21T07:02:16.427

[这是最新的http://developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)的引用，现在支持这种功能要简单得多，方法如下：

> ### 从网页发送消息
> 
> 与跨扩展消息传递类似，您的应用或扩展可以接收和响应来自常规网页的消息。要使用此功能，您**必须**首先在您的`manifest.json`网站中指定您要与之通信的网站。例如：
> 
> ```
> "externally_connectable": {
>   "matches": ["*://*.example.com/*"]
> } 
> ```
> 
> 这会将消息传递 API 公开给与您指定的 URL 模式匹配的任何页面。URL 模式必须至少包含一个二级域 - 即，禁止使用“ *”、“.* com”、“. *co.uk”、“* .appspot.com”和 <all_urls> 等主机名模式。在网页中，使用 runtime.sendMessage 或 runtime.connect API 将消息发送到特定应用程序或扩展程序。例如：
> 
> ```
> // The ID of the extension we want to talk to.
> var editorExtensionId = "abcdefghijklmnoabcdefhijklmnoabc";
> 
> // Make a simple request:
> chrome.runtime.sendMessage(editorExtensionId, {openUrlInEditor: url},
>   function(response) {
>     if (!response.success)
>       handleError(url);
>   }); 
> ```
> 
> 在您的应用程序或扩展程序中，您可以通过 runtime.onMessageExternal 或 runtime.onConnectExternal API 收听来自网页的消息，类似于跨扩展程序消息传递。只有网页可以发起连接。这是一个例子：
> 
> ```
> chrome.runtime.onMessageExternal.addListener(
>   function(request, sender, sendResponse) {
>     if (sender.url == blacklistedWebsite)
>       return;  // don't allow this web page access
>     if (request.openUrlInEditor)
>       openUrl(request.openUrlInEditor);
>   }); 
> ```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-24T18:33:12.847

因此，详细说明，一个更具体的示例：`chrome.runtime.sendMessage(...)`样式的一个问题是您必须将您所在的页面指定为 externally_connectable ，它不采用像“https:// */* ”这样的全局通配符。所以如果你想要那种能力，你必须使用`postMessage` [风格](https://developer.chrome.com/extensions/content_scripts#host-page-communication)交流。将消息从窗口捕获到 中`contentscript`，然后从 中`contentscript`，您可以将其发送到其他地方（如果需要，例如发送到`background.js`等）

因此，在普通网页中，或在您嵌入到普通页面的注入源中，从您的`contentscript.js`中，发送如下消息：

```
window.postMessage({ type: "FROM_PAGE_TO_CONTENT_SCRIPT", 
     text: "Hello from the webpage!" }, "*"); 
```

例如，您可以将其添加到这样的按钮中：

```
document.getElementById("theButton").addEventListener("click",
    function() {
       window.postMessage({ type: "FROM_PAGE_TO_CONTENT_SCRIPT", 
                            text: "Hello from the webpage!" }, "*");
}, false); 
```

然后在 contentscript.js 中捕获它并将其“发送”到扩展的其余部分，唯一需要注意的是，您只想“选择”似乎是您关心的消息：

```
window.addEventListener("message", function(event) {
  // We only accept messages from this window to itself [i.e. not from any iframes]
  if (event.source != window)
    return;

  if (event.data.type && (event.data.type == "FROM_PAGE_TO_CONTENT_SCRIPT")) {        
    chrome.runtime.sendMessage(event.data); // broadcasts it to rest of extension, or could just broadcast event.data.payload...
  } // else ignore messages seemingly not sent to yourself
}, false); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-25T23:43:34.833

您可以使用`<page context>`页面开发人员 JS 控制台底部的菜单切换到内容脚本的 JS 执行上下文，然后像在内容脚本中一样使用`chrome.runtime.sendMessage`其他`chrome.*`API。

![在此处输入图像描述](../Images/2153678f7547beb4e953738abfd5e43c.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-15T09:52:47.557

除了@hewigovens，我没有足够的评论点......我正在解释@renatoargh 和@sbichenko 如果从默认网页发送消息 -

1）网页需要在manifest中引用。例如：

```
"externally_connectable": {
  "matches": ["http://abcde/abcde/main.aspx*"]
} 
```

2）background.js（背景页面）除了调用 onMessageExternal 例如（调用扩展）：

```
var host_name = "com.my_chrome_extension.com";
 chrome.runtime.onMessageExternal.addListener(function(message, sender, sendResponse) {
    chrome.runtime.sendNativeMessage(host_name, {"run":message});
    sendResponse({"success": "success"});
    return true;
}); 
```

# c# - 在同一网络中搜索另一台 WP7 设备

> ID：11431338
> 
> 赞同：0
> 
> 时间：2012-07-11T11:08:00.587
> 
> 标签：c#, windows-phone-7, networking

我正在开发 WP7 中的一个应用程序，如果该应用程序在一个 WP7 设备上运行，它应该搜索另一个安装了相同应用程序的 WP7 设备，或者说它们是否在同一个网络中。

怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:58:48.640

我可以想到两个解决这个问题的方法。构建一个保存用户位置的后端服务，并使用此数据显示用户是否在附近。这样就不需要用户在同一个网络上，但需要你有后端服务。（并存储用户位置数据，并非所有用户都喜欢）。

在您的情况下可能更好的另一种解决方案是在 UDP 单播组中使用广播。不过，这会将其限制为同一网络上的用户。[在 MSDN 上](http://msdn.microsoft.com/en-us/library/hh286407%28v=vs.92%29.aspx)有一个很好的教程。

# android - Android模拟器上的相机不起作用

> ID：11431343
> 
> 赞同：1
> 
> 时间：2012-07-11T11:08:47.207
> 
> 标签：android, camera, emulation

我是一个初学者的android程序员，我的相机有问题。我想做的是在相机上进行预览。问题是，Camera.open() 总是返回 null。代码如下：

CameraPreview.java

```
public class CameraPreview extends Activity implements SurfaceHolder.Callback
{
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_camera_preview);

        SurfaceHolder holder;
        SurfaceView preview = (SurfaceView) findViewById(R.id.surface1);
        holder = preview.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        Camera camera = Camera.open();
        if(camera!=null)
        {
            try 
            {
                camera.setPreviewDisplay(holder);
            } 
            catch (IOException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            camera.startPreview();
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }
} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.paparazzi"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.CAMERA" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".CameraPreview"> </activity>
</application> 
```

模拟器配置：

```
hw.lcd.density=240
hw.cpu.arch=arm
skin.name=WVGA800
sdcard.size=64M
abi.type=armeabi-v7a
hw.camera.back=emulated
image.sysdir.1=system-images\android-16\armeabi-v7a\
hw.gpu.enabled=yes
hw.camera.front=emulated
skin.path=platforms\android-16\skins\WVGA800
hw.cpu.model=cortex-a8
vm.heapSize=48
hw.ramSize=512 
```

我使用带有android插件和最新sdk的eclipse。我真的很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:26:43.217

您没有在清单中提供以下功能。给它并再次运行它。

```
 <uses-feature android:name="android.hardware.camera" android:required="true"/> 
```

如果仍然出现异常，请将您的 Logcat 输出放在这里。

更新：

```
private static Camera camera;

    public static Camera getCameraInstance(){
        try {
            camera = Camera.open();
        }
        catch (Exception e){
            // Camera is not available (in use or does not exist)
            Toast.makeText(context, "Camera is occupied by another program" , Toast.LENGTH_SHORT).show();
        }
        return camera; // returns null if camera is unavailable
    } 
```

在您的代码中使用上面的代码，如果它一次又一次地出现，请尝试提取异常。

称呼

```
CameraPreview.getCameraInstance(); 
```

在你的`surfaceCreated`方法里面

感谢@alextsc 提醒我有关**使用功能的信息**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T16:44:58.047

使用 android 的内置相机应用程序，使用 Intent 的强大功能只需几行代码即可启动相机并拍照

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

    // start the image capture Intent
    startActivityForResult(intent, CAMERA_CAPTURE_IMAGE_REQUEST_CODE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:38:38.863

在 API 版本 14 之前，模拟器不支持相机模拟。即使在更新之后，文档也没有真正谈论它。

有一个解决方法 - 在这里查看。

[http://www.tomgibara.com/android/camera-source](http://www.tomgibara.com/android/camera-source)

# php - Nginx 上传进度模块

> ID：11431346
> 
> 赞同：1
> 
> 时间：2012-07-11T11:08:56.100
> 
> 标签：php, upload, nginx

**我有一个非常广泛的问题....我不明白上传进度模块是如何工作的，而且它对我也不起作用，所以....**

1) 我已经安装了 nginx 和所有的上传模块 (nginx, nginx-extras) 和 php-fpm

2）这是我的项目的 nginx 配置的一部分：

```
 location ~ \.php$ {
  include /etc/nginx/fastcgi_params;
  fastcgi_pass 127.0.0.1:9000;
  fastcgi_param SCRIPT_FILENAME /home/cha0s/learnphp$fastcgi_script_name;
  fastcgi_param PATH_INFO $fastcgi_script_name;

  track_uploads proxied 1m;
}

location ~ ^/files/(.*)$ {
        alias /home/cha0s/$1;
        internal;
}

location ^~ /progress {
        # report uploads tracked in the 'proxied' zone
        report_uploads proxied;
} 
```

3）我按照本页底部的教程进行操作：[http](http://wiki.nginx.org/HttpUploadProgressModule) ://wiki.nginx.org/HttpUploadProgressModule ：

所以我有一个表格和上传进度条：

```
<form id="upload" enctype="multipart/form-data" action="index.html" method="post">
  <input name="file" type="file"/>
  <input type="submit" value="Upload"/>
</form>
<div id="uploading">
  <div id="progress" class="bar">
    <div id="progressbar"> </div>
    <div id="percents"></div>
  </div>
</div> 
```

触发jquery脚本的JS代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
      $('form').uploadProgress({
        /* scripts locations for safari */
        jqueryPath: "/static/js/jquery.js",
        uploadProgressPath: "/static/js/jquery.uploadProgress.js",
        /* function called each time bar is updated */
        uploading: function(upload) {$('#percents').html(upload.percents+'%');},
        /* selector or element that will be updated */
        progressBar: "#progressbar",
        /* progress reports url */
        progressUrl: "/progress",
        /* how often will bar be updated */
        interval: 2000
      }
    });
  </script> 
```

那个脚本： [https ://github.com/drogus/jquery-upload-progress/blob/master/jquery.uploadProgress.js](https://github.com/drogus/jquery-upload-progress/blob/master/jquery.uploadProgress.js)

问题和问题：

1)第一个问题是我总是被退回 ({ "state" : "starting" }); ...

2)第二个问题是：我开始尝试让这个东西工作的原因是因为我想编写一个php脚本，它将文件分成块并将它们发送到服务器，这样我就可以上传大文件，并拥有一个进度条来监控它。但我什至找不到最小的示例或教程如何使用 php 和 upload_progress_module 或 w/e 完成它。

不，我不想要基于 Flash 的上传器。

**所以我想，你已经明白我很困惑。因此，如果您能解释我如何完成这项工作，并帮助解决现有配置的问题，那就太好了**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:42:11.963

`action="index.html"`看起来不像去的请求`location ~ \.php$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:20:43.863

不确定您是否仍然遇到此问题，但请参阅下面的一些解决方案...

1.  未指定 upload_pass 值
2.  未指定 upload_store
3.  指定后，需要创建具有正确权限的 upload_store 哈希目录
4.  将操作“/upload”添加到表单并将表单发送到您的上传域上的此位置（如果与表单域不同）会更有意义
5.  我认为基于返回的 json 的“起始”值，我将首先查看第 2 点和第 3 点中的目录问题
6.  表单需要使用 'X-Progress-ID=[a custom upload id number]' 的 GET 参数传递给您的上传位置，以便它可以跟踪状态

# css - 如何使元素相对于其父元素而不是整个屏幕具有固定位置？

> ID：11431358
> 
> 赞同：7
> 
> 时间：2012-07-11T11:09:47.970
> 
> 标签：css

我遇到这样的情况，当用户向下滚动时，侧边栏的一部分得到固定位置，但是当我抓住位置并将固定 css 应用于侧边栏元素时，它被固定到整个屏幕，而不仅仅是父级（侧边栏）

如何正确设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T11:15:51.127

首先了解定位：

> ***固定定位*或 [ position:fixed ]**
> 
> 具有固定位置的元素相对于浏览器窗口定位。
> 
> ***相对定位*OR [ position:relative ]**
> 
> 相对定位的元素是相对于其正常位置定位的。
> 
> ***绝对定位*OR [ position:absolute ]**
> 
> 绝对位置元素相对于第一个具有非静态位置的父元素定位。

因此，在您的情况下，您的父母`div`应该拥有`position:relative`，而您的孩子`div`应该拥有`position:absolute`而不是`position:fixed`

[参考链接](http://w3schools.com/Css/css_positioning.asp)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T13:14:37.657

通过阅读您的问题，我假设您有这样的事情：

```
 <div class="sidebar">
    <div class="fixed" style="position: fixed;"></div>
 </div> 
```

不幸的是，正如您现在可能知道的那样，`top`, `left`,`right`或`bottom`将始终相对于浏览器窗口在`positon: fixed`元素上起作用。

解决方案是用另一个 div 包装你的`.fixed`div，并在同一个包装器上而不是在 div 上做所有的定位`.fixed`。让我演示一下：

***的HTML：***

```
<div class="sidebar">

    <div class="helper">
        <div class="fixed"></div>
    </div>

 </div> 
```

***CSS：***

```
​.sidebar {
    position: relative;
}

.helper {
    position: absolute;
    top: XYZ; left: ZYX; /*where XYZ and ZYX would
                           be the values you were 
                           trying before to give to .fixed*/
}

.fixed {
    position: fixed;
} 
```

在这个小提琴中看到它的实际效果：http: [//jsfiddle.net/joplomacedo/T2PL5/](http://jsfiddle.net/joplomacedo/T2PL5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:11:46.783

让父母`position: relative`然后它的孩子将使用它作为他们`absolute`定位的参考。有关详细信息，请参阅[CSS 2 规范](http://www.w3.org/TR/CSS2/)[中“包含块”](http://www.w3.org/TR/CSS2/visudet.html#containing-block-details)的定义。

关于`fixed`定位：如何固定任何东西（这意味着固定到视口）但仍然相对于其他一些元素，而其他元素又不固定到视口？这对我来说似乎很矛盾，这就是我首先误解你的问题的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:08:52.453

[这个插件](http://www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/)正是你需要的

# javascript - Onclick 无法在 IE8 和 IE7 中启用只读字段

> ID：11431360
> 
> 赞同：1
> 
> 时间：2012-07-11T11:10:00.900
> 
> 标签：javascript, jquery, events

我有一个简单的要求，即在单击时启用只读文本字段并在其中输入值。

为此，我遵循了 js

```
function enableField(){
document.getElementById("recordname").readOnly = false;  
} 
```

html代码是

```
<input id="recordname" cssClass="Gry999"  maxLength="35"  readonly="true" onclick="enableField()" name="recordname"  onkeypress="return validateCustomize(event);"/> 
```

在所有浏览器（firefox，chrome，ie 9）中，此代码按预期工作，但在 IE8 中 - 我需要单击两次才能输入值（在第一次单击时，文本字段是 gettign focus 但无法输入值，它的行为就像就绪）

我也尝试过 jquery（从输入字段中删除 onclik attr 后）但没有帮助

```
$(document).ready(function() {                 
     $('#recordname').on('click',function() {           
     $('.jqueryclickcls').attr('readonly', false);   
  });
}); 
```

**更新：**当此代码从任何其他控件触发时 ，相同的 `document.getElementById("recordname").readOnly = false;` 代码有效，例如在单击另一个链接启用文本字段时

```
function enableField(){
    document.getElementById("recordname").readOnly = false;  
document.getElementById("recordname").focus();
    }
<a onclick="enableField()" >Enable Field</a> 
```

在此之后我可以输入值??!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:14:49.653

您应该使用 jQuery 将字段设置为禁用（即只读）：

```
function disableField(){
    $("#recordname").attr("disabled", "disabled");
}

function enableField(){
    $("#recordname").removeAttr("disabled");
} 
```

这非常简单，在 IE 上也适用于我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:14:58.660

小心，是“ `readOnly`”而不是“ `readonly`”

尝试

```
document.getElementById("recordname").setAttribute('readOnly', ''); 
```

或者

```
document.getElementById('champ').removeAttribute('readOnly'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:18:41.283

尝试

```
document.getElementById("recordname").disabled = false; 
```

# windbg - windbg中进程的安装路径

> ID：11431361
> 
> 赞同：3
> 
> 时间：2012-07-11T11:10:03.490
> 
> 标签：windbg, crash-dumps, sos

如何从 windbg 中找到应用程序的安装路径？

考虑一下，我有一个转储。我需要使用 windbg 从转储中知道该应用程序的安装路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:09:34.293

输入`lmvm myApp`将显示很多与您的应用相关的内容，您想要的是图像路径，例如：

```
lmvm myApp 
```

输出

```
....
Image path: C:\AppPath\myApp.exe
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:48:21.090

运行 lmvm EXENAME。例如，如果应用程序名为 MyApp.exe，则运行“lmvm myapp”。

将打印的项目之一是模块的路径。

# c# - 在 Windows 应用程序中添加新的安装程序类得到编译器错误

> ID：11431365
> 
> 赞同：0
> 
> 时间：2012-07-11T11:10:17.830
> 
> 标签：c#, asp.net, .net, winforms

我用安装项目创建了一个寡妇应用程序。我编译并构建。一切看起来都很好。

为了在安装过程中更改配置文件，我正在尝试添加一个新的安装程序文件。当我默认添加它时，我得到以下代码

```
Collapse | Copy Code

[RunInstaller(true)]
    public partial class Installer : Installer
    {
        public Installer()
        {
            InitializeComponent();
        }
    } 
```

当我编译这个 Am gettin **Circular 基类依赖项时，涉及 'windows_setup.Installer' 和 'windows_setup.Installer'**

windows setup 是我用于应用程序的名称空间。然后我发现我需要创建继承安装程序的新类。所以我将我的类名更改为

```
public partial class MyInstaller : Installer 
```

现在得到

**可访问性不一致：基类“windows_setup.Installer”的可访问性低于“windows_setup.MyInstaller”类**

提出你的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:17:58.133

好吧，例如，您不能让公共类继承自内部类。如果外部不需要，请尝试将所有内容设置为内部，否则设置为公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:23:41.800

要么改变班级`Installer`并`MyInstaller`公开。

写这样的东西：

`System.Configuration.Install.Installer`和类定义应该是`public partial`

```
[RunInstaller(true)]
public partial class MyInstaller : System.Configuration.Install.Installer
{
    public MyInstaller()
    {
        InitializeComponent();
    }
} 
```

# c# - HKEY_USERS 只包含登录用户

> ID：11431367
> 
> 赞同：7
> 
> 时间：2012-07-11T11:10:26.120
> 
> 标签：c#, windows-8

我正在编写一个**c# 应用程序**。

作为我的应用程序的一部分，我需要阅读用户的个人资料。

为了获得所有用户，我正在使用`Registry.Users.GetSubKey()`.

问题是在 Windows 8 上`HKEY_USERS`只包含**登录**用户！（当有 2 个用户登录时，我会在 下看到 2 个用户`HKEY_USERS`，但如果其中一个用户退出，则只有 1 个用户在下`HKEY_USERS`）

结果，我只获得登录用户的配置文件。

我试图搜索整个注册表以查找数据的保存位置，但我无法在任何地方找到此信息......当用户注销时，信息似乎消失了。

是设计使然，还是错误？

数据保存在哪里 - 它必须在注册表中，但我找不到它......

可能是权限中的东西吗？也许信息在那里但是当用户未登录时它被隐藏了？是否有标志或其他东西可以用来读取未登录用户的个人资料？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-20T06:47:04.380

这可能不适用于所有情况，但适合我的需要。加载注册表配置单元

```
reg load HKU\Steven C:\Users\Steven\ntuser.dat 
```

读取必要的数据，然后卸载

```
reg unload HKU\Steven 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T13:06:13.377

> 作为我的应用程序的一部分，我需要阅读用户的个人资料。

然后你需要重新设计你的应用程序。你所要求的是不可能的。

来自[Raymond Chen 的博客文章“小心漫游用户配置文件”](http://blogs.msdn.com/b/oldnewthing/archive/2005/06/30/434209.aspx)：

> [Y] 你不能只是浏览 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList 注册表项，期望找到所有用户配置文件，甚至可能修改它们，因为本地计算机上的用户配置文件副本可能不是权威的。

您在本地计算机上看到的与其他用户配置文件相关的任何内容（无论是在 HKEY_USERS 下，还是在 C:\Users 下的配置文件目录中）都只是他们上次登录该计算机时的*本地缓存。**真实*数据，即最新数据，存储在某个域控制器上。

您根本不能依赖其他用户在本地存储的配置文件数据*。*你最好假装它甚至不存在。

# gmail - 用于访问 gmail 收件箱消息的 javamail api

> ID：11431371
> 
> 赞同：3
> 
> 时间：2012-07-11T11:10:35.147
> 
> 标签：gmail, jakarta-mail

我一直在尝试使用 javamail api 来阅读 gmail 收件箱消息。我在互联网上找到了以下代码。我正在尝试在 Eclipse 上运行它，但由于“无效凭据异常”而失败。我在 web-app 的 lib 目录中有 mail.jar、activation.jar、imap.jar 和其他 jar 文件。

关于我为什么收到此异常的任何想法？谢谢。

```
javax.mail.AuthenticationFailedException: Invalid credentials n67if632335wep.219
at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:665)
at javax.mail.Service.connect(Service.java:295)
at javax.mail.Service.connect(Service.java:176)
at org.mb.mail.MailReader.main(MailReader.java:23)

package org.mb.mail;

import java.util.Properties;

import javax.mail.Folder;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.NoSuchProviderException;
import javax.mail.Session;
import javax.mail.Store;
import javax.mail.*;

public class MailReader {

public static void main(String args[]) {
Properties props = System.getProperties();
props.setProperty("mail.store.protocol", "imaps");
try {
Session session = Session.getDefaultInstance(props, null);
Store store = session.getStore("imaps");
store.connect("imap.gmail.com", "<username>", "password");
System.out.println(store);

Folder inbox = store.getFolder("Inbox");
inbox.open(Folder.READ_ONLY);
Message messages[] = inbox.getMessages();
for(Message message:messages) {
System.out.println(message); 
```

}

```
 } catch (NoSuchProviderException e) {
            e.printStackTrace();
            System.exit(1);
        } catch (MessagingException e) {
            e.printStackTrace();
            System.exit(2);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T22:23:58.973

丢弃该代码并使用[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)中的该代码，您还可以在其中找到许多其他有用的提示，包括调试提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T07:47:48.630

如果您看到此异常，则说明您在**正确的路径**中，只需**更改邮件 ID 或创建一个** **安全性较低**的新 gmail id 。（例如，主要 gmail 帐户在智能手机中进行了很多配置，并且通过 google 高度安全Oauth2.0，因此 gmail 帐户连接将被 google 阻止，但是当您尝试使用**备用 gmail id 或未在移动设备中配置的 gmail id**时可以轻松连接）以前这个问题让我头疼，终于得到了解决。谢谢

# iphone - Facebook Hackbook ios 应用程序无法正常工作

> ID：11431378
> 
> 赞同：1
> 
> 时间：2012-07-11T11:10:53.200
> 
> 标签：iphone, facebook, facebook-graph-api

首先，我下载了 Facebook 应用程序表单应用程序商店并在那里登录，然后我从这个 url [https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)下载了 Hackbbok并通过 xcode 安装到我的手机中。

当 Hackbook 应用程序启动时，它会显示“使用 Facebook 登录”按钮。当我单击该按钮时，它会打开我从应用商店下载的 Facebook 应用，然后重新启动 Hackbook。但是 Hackbook 仍然要求登录。

但是，当我卸载从应用商店下载的 facebook 应用程序时，它可以正常工作，因为当我单击登录按钮时会启动浏览器

同样，当我从应用商店下载 facebook 应用并在那里登录时，我有另一个应用从 Facebook 导入联系人，然后我的应用不导入联系人并显示空白屏幕，当我卸载 facebbok 应用时，它又开始工作。

如果未安装 Facebook 应用程序，这两个应用程序都可以正常工作。

任何有关此问题的帮助将不胜感激。

# c# - 如何使用 GridView 中的 DropDownList 更新此字段？

> ID：11431383
> 
> 赞同：0
> 
> 时间：2012-07-11T11:11:33.997
> 
> 标签：c#, asp.net, sql-server, gridview

我有以下数据库设计：

```
Employee Table: 
---------------
Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode 

Divisions Table:    
----------------
SapCode, DivisionShortcut 
```

我有一个 GridView，我用它来添加、删除和更新/编辑员工信息。此信息是员工用户名、姓名、徽章编号、职位名称、IsActive（来自 Employee 表）和 DivisionShortcut（来自 Divsions 表）。部门将列在 DropDownList 中。分区将在 GridView 内作为 DropDownList 列出，并将在编辑模式下显示。我现在正在努力通过这个 DropDownList 更新员工的部门。我编写了代码，但出现以下错误：*

> 列名“DivisionShortcut”无效。

*   **ASP.NET 代码：**

    ```
     <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                            DataTextField="DivisionShortcut" DataValueField="SapCode"></asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      Checked='<%# Eval("IsActive").ToString().Equals("True") %>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:LinkButton ID="lnkB" runat="Server" Text="Delete" CommandName="Delete"></asp:LinkButton>
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 

            SelectCommand="SELECT     dbo.Divisions.DivisionShortcut, dbo.employee.Username, dbo.employee.Name, dbo.employee.JobTitle, dbo.employee.BadgeNo, dbo.employee.IsActive
                            FROM         dbo.Divisions INNER JOIN
                                        dbo.employee ON dbo.Divisions.SapCode = dbo.employee.DivisionCode"
            UpdateCommand="UPDATE [employee], [Divisions] SET [Name] = @Name, [JobTitle] = @JobTitle, 
                                                [BadgeNo] = @BadgeNo, [DivisionShortcut] = @division WHERE [Username] = @Username"
            DeleteCommand="DELETE FROM [employee] WHERE [Username] = @Username">
            <UpdateParameters>
                <asp:Parameter Name="Name" Type="String"  />
                <asp:Parameter Name="JobTitle" Type="String" />
                <asp:Parameter Name="BadgeNo" Type="String" />
                <asp:Parameter Name="DivisionShortcut" Type="String" />
                <asp:Parameter Name="Username" Type="String" />
            </UpdateParameters>
            <DeleteParameters>
                <asp:Parameter Name="Username" Type="String" />
            </DeleteParameters>
        </asp:SqlDataSource> 
    ```

我忘了提到 DropDownList 有一个 SqlDataSource。

```
<asp:SqlDataSource ID="DivisionsListDataSource" runat="server" 
            ConnectionString="<%$ ConnectionStrings:UsersInfoDBConnectionString %>" 
            SelectCommand="SELECT * FROM Divisions">
        </asp:SqlDataSource> 
```

**代码隐藏：**

```
 //For editing any row in the GridView
        protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e) 
        {
            GridView1.EditIndex = e.NewEditIndex;
        }

    //For updating the information in any row in the GridView
        protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            GridViewRow gvrow = GridView1.Rows[e.RowIndex];

            DropDownList DivisionsList = (DropDownList)gvrow.FindControl("DivisionsList"); 

            TextBox txtEmployeeName = (TextBox)gvrow.FindControl("txtEmployeeName");
            TextBox txtJobTitle = (TextBox)gvrow.FindControl("txtJobTitle");
            TextBox txtBadgeNo = (TextBox)gvrow.FindControl("txtBadgeNo");

            CheckBox isActive = (CheckBox)gvrow.FindControl("isActive");

            //For getting the ID (primary key) of that row
            string username = GridView1.DataKeys[e.RowIndex].Value.ToString();

            string name = txtEmployeeName.Text;
            string jobTitle = txtJobTitle.Text;
            string badgeNo = txtBadgeNo.Text;
            string division = DivisionsList.SelectedValue.ToString();

            UpdateEmployeeInfo(username, name, jobTitle, badgeNo, division);
        }
private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division)
    {
        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                                                BadgeNo = @BadgeNo, DivisionShortcut = @division
                            WHERE Username = @Username";
        SqlCommand cmd = new SqlCommand(update, conn);

        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
        cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
        cmd.Parameters.AddWithValue("@division", division);
        cmd.Parameters.AddWithValue("@Username", username);
        //cmd.Parameters.AddWithValue("@IsActive", isActive.checked);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
            //            SqlDataSource1.UpdateCommand = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
            //                                                BadgeNo = @BadgeNo 
            //                                                WHERE Username = @Username";
            //            SqlDataSource1.Update();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

那么我如何才能通过 DropDownList 更新员工的部门呢？

更新：

我更新了 UpdateEmployeeInfo() 方法，但仍然遇到同样的错误。

更新代码：

```
private void UpdateEmployeeInfo(string username, string name, string jobTitle, string badgeNo, string division)
    {
        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string update = @"UPDATE Employee SET Name = @Name, JobTitle = @JobTitle, 
                            BadgeNo = @BadgeNo WHERE Username = @Username; 
                            UPDATE Divisions SET [DivisionShortcut] = @division WHERE SapCode = @SapCode;";

        SqlCommand cmd = new SqlCommand(update, conn);

        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Parameters.AddWithValue("@JobTitle", jobTitle);
        cmd.Parameters.AddWithValue("@BadgeNo", badgeNo);
        cmd.Parameters.AddWithValue("@division", division);
        cmd.Parameters.AddWithValue("@Username", username);
        //cmd.Parameters.AddWithValue("@IsActive", isActive.checked);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();

            GridView1.EditIndex = -1;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:35:25.027

我所看到的是您正在使用**UpdateEmployeeInfo**方法来更新 Employee 表的列以及 Division 表的列，但是在那个 sql 查询中，您只提到了员工表，这就是您收到此错误的原因，因为 **DivisionShortcut**不是员工的一部分桌子。

根据我的理解，您应该使用**DivisionCode**代替**DivisionShortcut** 并为您的下拉列表设置 AutoPostBack="True"

# email - smtp 服务器不返回错误

> ID：11431384
> 
> 赞同：1
> 
> 时间：2012-07-11T11:11:35.603
> 
> 标签：email, smtp, gmail, openssl

我在检查现有 gmail 帐户时遇到问题。为了连接到 smtp 服务器，我使用适用于 Windows 的 openssl。运行后我写下一行连接到服务器：

```
s_client -starttls smtp -crlf -connect smtp.gmail.com:587 
```

连接后，我使用 auth login 登录服务器。在此之后我开始创建新邮件：

```
C:mail from:<somegmail@gmail.com>
S:250 2.1.0 OK w7sm27345781wiz.0
C:rcpt to:<incorrectEmail@asas.com>  //input incorrect email
S:250 2.1.0 OK w7sm27345781wiz.0 
```

但是输入不正确的电子邮件服务器后必须返回错误：

```
550-5.1.1 The email account that you tried to reach does not exist... 
```

为什么服务器不返回错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:58:10.767

发送服务器接受您的消息以进行发送，但此时不检查目的地是否实际有效。这就是为什么你有一个成功的消息。

服务器基本上是在告诉您：“好的，我收到了您的消息，并将尝试发送它”

稍后，当 gmail.com 服务器与 asas.com 服务器通信时，asas.com 服务器将给出错误，此时您将收到来自 Gmail 的退回电子邮件

# asp.net-mvc-3 - MVC 项目中的 Ckfinder 文件上传问题

> ID：11431385
> 
> 赞同：1
> 
> 时间：2012-07-11T11:11:37.410
> 
> 标签：asp.net-mvc-3, ckeditor, ckfinder

我在 mvc 项目中遇到了 ckfinder 的问题。

我在 ckeditor 中移动了 ckfinder 文件夹，并在 config.ascx 中编辑了路径，如下所示：

```
 BaseUrl = "/Content/";
   BaseDir = HttpContext.Current.Server.MapPath("~/Content/"); 
```

我将js文件添加到_Layout.cshtml：

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.6.2.min.js")"></script>
       <script type="text/javascript" src="@Url.Content("~/ckeditor/ckeditor.js")"></script>
       <script type="text/javascript" src="@Url.Content("~/ckeditor/ckfinder/ckfinder.js")"></script> 
```

最后是我的 Index.cshtml

```
 @{
     ViewBag.Title = "Index";
     Layout = "~/Views/Shared/_Layout.cshtml";
    }
  <script type="text/javascript">
  $(function () {
    CKEDITOR.replace('ckEditor', {
        skin: 'kama',
        filebrowserBrowseUrl: '@Url.Content("~/ckeditor/ckfinder/ckfinder.html")',
        filebrowserImageBrowseUrl: '@Url.Content("~/ckeditor/ckfinder/ckfinder.html?type=Images")',
        filebrowserFlashBrowseUrl: '@Url.Content("~/ckeditor/ckfinder/ckfinder.html?type=Flash")',
        filebrowserUploadUrl: '@Url.Content("~/ckeditor/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Files")',
        filebrowserImageUploadUrl: '@Url.Content("~/ckeditor/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Images")',
        filebrowserFlashUploadUrl: '@Url.Content("~/ckeditor/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Flash")'
    });
}); 
```

```
 <h2>MVC 3 CKEditor and CKFinder </h2>

  @Html.TextArea("ckEditor") 
```

Ckeditor 工作正常，但是当我尝试上传图像（使用 ckfinder）时出现错误=> CKFinder.dll 中出现“CKFinder.Connector.ConnectorException”类型的异常，但未在用户代码中处理 ![在此处输入图像描述](../Images/52614b4d62e4c99eb45e975918dc1967.png)

还有我的项目文件=>
![在此处输入图像描述](../Images/c2e9aea75fd3f108e4eb803188183e50.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:57:46.403

也不能让它工作。如果我调用 CKFinder，它会给我这个错误：

'目前无法上传文件。联系系统所有者并检查 CKFinder 配置文件'

我认为这与文件夹的权限有关？要为 asp.net 配置 CKFinder，他们说：

'使用户文件夹对 Internet 用户可写。在 Windows 系统上，向 IUSR_ 用户授予写入权限。

[http://docs.cksource.com/CKFinder_2.x/Developers_Guide/ASP.NET/Installation](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/ASP.NET/Installation)

我的本地 Windows 系统上没有 IUSR_ 用户。我只需要创建一个？

**编辑：**

我已经解决了！我已经重建位于 _source 文件夹中的 CKFinder 解决方案，然后将 dll 文件复制到我的应用程序中。现在一切正常！

我对上传图像的文件夹的权限也有问题。

# objective-c - 无法以编程方式在 UIImageView 中居中图像

> ID：11431386
> 
> 赞同：0
> 
> 时间：2012-07-11T11:11:38.590
> 
> 标签：objective-c, uiimageview, ios5

在 UIView 子类 init 方法中，我有这个：

```
 imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 44, 320, 436)]; 
      imageView.contentMode = UIViewContentModeCenter;
      [self addSubview:imageView];
      UIImage* myImage = [UIImage imageWithData: 
                        [NSData dataWithContentsOfURL: 
                         [NSURL URLWithString: imageSource]]];
      myImage = [[MyMath sharedMySingleton] imageWithImage:myImage convertToSize:CGSizeMake(320, 436)]; // resizes image to set bounds
      imageView.contentMode = UIViewContentModeCenter;
      [imageView setImage:myImage]; 
```

`imageView.contentMode = UIViewContentModeCenter;`应该居中图像，但它仍然显示在左上角。我究竟做错了什么？

编辑：对不起，我自己找到了答案。谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:19:03.740

这是因为您的 imageView 大小和 myImage 大小相同。如果您将 myImage 大小设置为小于 imageView 大小，则可以识别差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:34:31.863

您的 myImage 大小等于 imageView 的大小。要查看差异，请使您的 myImage 大小比 imageView 小一点。之后它将居中。在您的一行中更改图像的大小：

```
 myImage = [[MyMath sharedMySingleton] imageWithImage:myImage convertToSize:CGSizeMake(200, 200)]; // resizes image to set bounds 
```

# android - Android Barcode Scanner 不读取某些条码

> ID：11431387
> 
> 赞同：1
> 
> 时间：2012-07-11T11:11:43.527
> 
> 标签：android, zxing, barcode-scanner

我正在开发一个使用条形码扫描仪兑换积分的项目。我已经尝试过 Zxing、QR Droid、Red Laser、Scan Life、Shop Savy 等使用 HTC EVO 3D。他们都没有阅读所有条形码。但是 IOS 的 Zbar 读取所有相同的代码。我认为这是设备硬件的问题。有没有比上面提到的更好的扫描仪应用程序？

条形码图像。 [http://i.stack.imgur.com/7VR9I.jpg](http://i.stack.imgur.com/7VR9I.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:45:06.693

此条码是 RSS-14 的一种形式。zxing / Barcode Scanner 读取它，但它不是最容易读取的。您需要将图像横向放置（正面朝上）。尝试 TRY_HARDER 模式，并将扫描限制为 RSS-14 格式以避免误报。

# iphone - 从视频文件中提取音频

> ID：11431388
> 
> 赞同：7
> 
> 时间：2012-07-11T11:11:46.087
> 
> 标签：iphone, ios, video, avmutablecomposition, avurlasset

如何在**不使用 FFmpeg**的情况下从视频文件中提取音频？

我想使用`AVMutableComposition`和`AVURLAsset`解决它。例如从 .mov 到 .m4a 文件的转换。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-04-25T00:51:44.293

以下 Swift 5 / iOS 12.3 代码展示了如何从电影文件 ( *.mov* ) 中提取音频并使用,和将其转换为音频文件 ( *.m4a* ) ：`AVURLAsset``AVMutableComposition``AVAssetExportSession`

```
import UIKit
import AVFoundation

class ViewController: UIViewController {

    @IBAction func extractAudioAndExport(_ sender: UIButton) {
        // Create a composition
        let composition = AVMutableComposition()
        do {
            let sourceUrl = Bundle.main.url(forResource: "Movie", withExtension: "mov")!
            let asset = AVURLAsset(url: sourceUrl)
            guard let audioAssetTrack = asset.tracks(withMediaType: AVMediaType.audio).first else { return }
            guard let audioCompositionTrack = composition.addMutableTrack(withMediaType: AVMediaType.audio, preferredTrackID: kCMPersistentTrackID_Invalid) else { return }
            try audioCompositionTrack.insertTimeRange(audioAssetTrack.timeRange, of: audioAssetTrack, at: CMTime.zero)
        } catch {
            print(error)
        }

        // Get url for output
        let outputUrl = URL(fileURLWithPath: NSTemporaryDirectory() + "out.m4a")
        if FileManager.default.fileExists(atPath: outputUrl.path) {
            try? FileManager.default.removeItem(atPath: outputUrl.path)
        }

        // Create an export session
        let exportSession = AVAssetExportSession(asset: composition, presetName: AVAssetExportPresetPassthrough)!
        exportSession.outputFileType = AVFileType.m4a
        exportSession.outputURL = outputUrl

        // Export file
        exportSession.exportAsynchronously {
            guard case exportSession.status = AVAssetExportSession.Status.completed else { return }

            DispatchQueue.main.async {
                // Present a UIActivityViewController to share audio file
                guard let outputURL = exportSession.outputURL else { return }
                let activityViewController = UIActivityViewController(activityItems: [outputURL], applicationActivities: [])
                self.present(activityViewController, animated: true, completion: nil)
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T08:03:11.910

在所有多媒体格式中，音频与视频是分开编码的，它们的帧在文件中交错。因此，从多媒体文件中删除视频不需要对编码器和解码器造成任何干扰：您可以编写一个文件格式解析器来删除视频轨道，而无需使用手机上的多媒体 API。

要在不使用 3rd 方库的情况下做到这一点，您需要从头开始编写解析器，这可能很简单，也可能很困难，具体取决于您希望使用的文件格式。例如，FLV 非常简单，因此从中剥离轨道非常容易（只需遍历流，检测帧开始并丢弃 '0x09'=video 帧）。MP4 稍微复杂一点，它的标题 (MOOV) 具有分层结构，其中每个轨道 (TRAK 原子) 都有标题。您需要删除视频 TRAK，然后复制交错比特流原子 (MDAT)，在复制时跳过所有视频数据簇。

除了 ffmpeg，您还可以使用第三方库。想到的一个是 GPAC MP4BOX（LGPL 许可证）。如果 LGPL 有问题，您可以使用很多商业 SDK。

# .net-remoting - 赞助远程实例对象

> ID：11431396
> 
> 赞同：0
> 
> 时间：2012-07-11T11:12:07.523
> 
> 标签：.net-remoting

我在远程服务器上有一个单例服务，它有一个将新对象返回给客户端的方法：

```
public class MySingleton : MarshalByRefObject
{
   public override object InitializeLifetimeService()
   {
      return null;
   }

   public MarshalByRefObject GetService()
   {
      return new Model();
   }
}

public class Model : MarshalByRefObject
{
} 
```

我不希望模型实例永远存在于服务器上，所以我只想使用正常的赞助程序，在客户端我为我的模型创建一个赞助商，并将远程租约附加到这个赞助商：

```
var sponsor = new ClientSponsor();
_service = _mySingleton.GetService();
var success = sponsor.Register(_service); 
```

好吧，**这行不通。**远程对象模型，一段时间后死亡。

你确认这种行为吗？

我猜这是因为服务器上的生命周期管理器没有机会初始化租约，因为对象模型被实例化并直接返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:08:46.613

我知道这是一篇旧帖子，但在搜索类似问题的过程中，我偶然发现了这篇文章。

也许它将取决于 SinkProvider 配置。因为来自服务器的客户端的更新调用需要反序列化。在服务器端的 app.exe.config 中，您必须像这样设置 serverProvider 和 clientProvider：

```
<channel ref="tcp" port="50220" useIpAddress="false">
 <serverProviders>
  <formatter ref="binary" typeFilterLevel="Full" />
 </serverProviders>
 <clientProviders>
  <formatter ref="binary" />
 </clientProviders>
</channel>
<channel ref="http" port="50221" useIpAddress="false">
 <serverProviders>
  <formatter ref="soap" typeFilterLevel="Full" />
 </serverProviders>
 <clientProviders>
  <formatter ref="soap" />
 </clientProviders>
</channel> 
```

在客户端使用以下 app.config.exe：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.runtime.remoting>
    <application>
      <channels>
        <channel ref="tcp" port="0">
          <serverProviders>
            <formatter ref="binary" typeFilterLevel="Full"/>
          </serverProviders>
        </channel>
      </channels>
    </application>
  </system.runtime.remoting>
</configuration> 
```

# php - 正则表达式匹配 xxx.xxx.xxx？

> ID：11431401
> 
> 赞同：3
> 
> 时间：2012-07-11T11:12:26.670
> 
> 标签：php, regex

我需要用 preg_match 检查输入，它必须是这种格式：xxx.xxx.xxx 块的数量可以变化......这些都是有效输入的例子：

```
001
00a.00a
0fg.001
aaa.aaa.001
001.001.002.001.001.001 
```

好吧，我可能会写一个像这样的正则表达式：

```
^([\da-z]{3}\.?)+$ 
```

但是这个时期的量词出现了问题。我的意思是如果我使用“？” 要匹配 0 或 1 次，即使在某处跳过点，它也会匹配，例如：

```
000.001.0010az001 
```

然后，如果我使用 {1} 匹配一次，它将不匹配任何内容，因为最后一个块没有点。

所以我想不出该怎么想...请指教

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:14:41.927

您可以使用：

```
^[\da-z]{3}(?:\.[\da-z]{3})*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:18:58.663

```
/^(?:[\da-z]{3}\.)*[\da-z]{3}$/ 
```

# linux - 获取用户浏览器版本的脚本

> ID：11431407
> 
> 赞同：0
> 
> 时间：2012-07-11T11:12:54.923
> 
> 标签：linux, apache, bash, shell

我编写了一个脚本来获取用户的浏览器版本，但我需要清理输出。该脚本的作用是查看 @ 和 IE8 的 apache 日志，然后通过电子邮件将信息发送给我。我遇到的问题是输出，因为当 grep 找到电子邮件地址和 IE8 时，它给了我完整的输出 - 即 /page/code/user@foobar.com/home.php 而我正在寻找的输出只是电子邮件地址，并且每天只记录一次此信息：

例子：

用户@foobar IE8

谢谢

```
#!/bin/bash

#Setting date and time (x and y and z aren't being used at the moment)
x="$(date +'%d/%b/%Y')"
y="$(date +'%T')"
z="$(date +'%T' | awk 'BEGIN { FS =":"} ; {print $1}')"

#Human readable for email title
emaildate=$(date +"%d%b%Y--Hour--%H")

#Setting date and time for grep and filename
beta="$(date +'%d/%b/%Y:%H')"
sigma="$(date +'%d-%b-%Y-%H')"

#CurrentAccess logs
log='/var/logs/access.log'

#Set saved log location
newlogs=/home/user/Scripts/browser/logs

#Prefrom the grep for the current day
grep @ $log | grep $beta | awk 'BEGIN { FS = " " } ; { print $7 }' | sort -u >> $newlogs/broswerusage"$sigma".txt 
mail -s "IE8 usage for $emaildate" user@exmaple.com < $newlogs/broswernusage"$sigma".txt 
```

# c#-4.0 - c# 上传数据错误 -> 为空间返回“�”

> ID：11431416
> 
> 赞同：0
> 
> 时间：2012-07-11T11:13:35.660
> 
> 标签：c#-4.0, compiler-errors, syntax-error, symbols

我正在使用带有 http 助手的 c# 并使用流阅读器来阅读文本。但是当我上传包含此文本的文本文件时

“看看我在@eBay 上找到了什么！Willy Lee LifeLike Chatting Butler Prop Motion Sen”

该空间由“�”替换并在代码中使用。

阅读文本的代码是：-

```
 List<string> list = new List<string>();
        StreamReader reader = new StreamReader(filepath);
        string text = "";
        while ((text = reader.ReadLine()) != null)
        {
            if (!string.IsNullOrEmpty(text))
            {
                list.Add(text); 
            }
        }
        reader.Close();
        return list; 
```

列表包含此数据-“看…​​…到底……什么……我在……@……eBay！……Willy……Lee……LifeLike……聊天……Butler……Prop……Motion……Sen”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:47:55.143

看起来像编码问题 - 当文本被多字节编码并显示在基于非 unicode 的网页（如 Windows-1252 或 CP-125X 等）中时，我遇到了这样的文本问题。

这里看起来一样 - 文本看起来是[UTF-8 编码](http://en.wikipedia.org/wiki/UTF-8#Description)并以 ansi 模式显示，所以这里的空格是“特殊”空格，就像这些 M$ Word 有时放的那样，英文字符是单字节的，因为是 UTF-8 格式（对于 ASCII 代码 128 以下的所有字符），这意味着它们与 ANSI 代码表兼容并且可以正确显示。

或者选项2，如果它写在一个文件中，并且这个文本是这样保存的，一开始没有BOM，文本编辑器可能不理解上下文是unicode并以ansi /regular ascii mode/打开它。

如果您提供更多详细信息，从读取数据的位置以及保存和打开的位置，我可以提供更具体的细节。

# jquery - jQuery - 我如何选择 html5 自定义属性，它等于什么

> ID：11431417
> 
> 赞同：2
> 
> 时间：2012-07-11T11:13:37.383
> 
> 标签：jquery, html, select, custom-attributes

如果我有这个：

```
<span data-helo="1">something</span>
<span data-helo="2">something different</span> 
```

我想定位第一个跨度，我该怎么做？

我试过类似的东西：

```
$('span').data('helo', '1') 
```

但它返回了两个跨度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:21:37.523

尝试：

```
$('span[data-helo="1"]') 
```

这将针对所有`span`具有`data-helo`value属性的元素`1`。

[http://jsfiddle.net/F2NUk/](http://jsfiddle.net/F2NUk/)

使用您的代码：

```
$('span').data('helo', '1') 
```

您的目标是所有`span`-elements 并将它们的`data-helo`属性设置为`1`. 然后返回该集合（通过典型的 jQuery 链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:17:34.683

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/FNmFb/1/)**

**作业**

```
$('span').attr('data-helo', '2'); 
```

**供选择**

```
$('span[data-helo=2]') 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:20:05.433

你可以尝试`eq()`和`data()`方法：

```
$('span:eq(0)').data('helo'); // returns "1"
$('span:eq(1)').data('helo'); // returns "2" 
```

如果要按属性选择元素，可以使用属性选择器：

```
$('span[data-helo="1"]') // selects spans which has attribute "data-helo" and it's value is "1" 
$('span[data-helo="2"]') 
```

或者：

```
$('span[data-helo]:eq(0)') // first span element that has a data-helo attribute
$('span[data-helo]:eq(1)') // second span element that has a data-helo attribute 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T11:21:19.053

我想这就是你想要的

```
 $('span[data-helo=1]') 
```

# ios - 使用 MKStoreKit 实现两个消耗品

> ID：11431420
> 
> 赞同：2
> 
> 时间：2012-07-11T11:13:47.120
> 
> 标签：ios, in-app-purchase, mkstorekit

我应该如何使用 MKStoreKit 实现两个消耗品？如果我有两个消耗品，例如“一把硬币”（**10 个硬币**）和“装有硬币的袋子”（**100 个硬币**）。我有两个问题：

1.  产品 ID 应该是什么样的？

2.  如何获取购买的硬币的总量，包括少数和袋子中的硬币？

    ```
    Amount = 10*handfuls_purchased + 100*bags_purchased; 
    ```

我已经阅读了官方 MKStoreKit 博客上的教程，但我仍然无法弄清楚这一点。

Ps 我正在使用 MKStoreKit 3.1 并且由于 ARC 无法更新到最新版本（我的项目不支持它）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T16:04:59.657

您的 plist 的 consumables 键应如下所示。

```
<key>Consumables</key>
    <dict>
        <key>com.yourcompany.yourapp.handfulofcoins</key>
        <dict>
            <key>Count</key>
            <integer>10</integer>
            <key>Name</key>
            <string>CoinsInMyApp</string>
        </dict>
<key>com.yourcompany.yourapp.bagofcoins</key>
        <dict>
            <key>Count</key>
            <integer>100</integer>
            <key>Name</key>
            <string>CoinsInMyApp</string>
        </dict>
    </dict> 
```

我匹配字符串“CoinsInMyApp”来计算购买的硬币数量，无论它们来自哪种消耗品。在上面的例子中，如果用户购买了 1 bagofcoins 和 2lyfollowofcoins，MKStoreManager 为密钥 CoinsInMyApp 存储 120。

方法，

```
- (BOOL) canConsumeProduct:(NSString*) productIdentifier
- (BOOL) canConsumeProduct:(NSString*) productIdentifier quantity:(int) quantity 
```

会告诉你是否有足够的产品。

当玩家使用硬币时，您应该通过调用让 MKStoreKit 知道这一点

```
- (BOOL) consumeProduct:(NSString*) productIdentifier quantity:(int) quantity 
```

您可以通过调用获得硬币的数量

```
[[MKStoreManager numberForKey:@"CoinsInMyApp"] intValue]; 
```

PS：您可以在非 ARC 项目中使用 MKStoreKit 最新版本，方法是使用 -fobjc-arc 标志编译它。

我在这里写了这个[http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/](http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/)

# java - 如何使用环境变量将json jar lib添加到java

> ID：11431423
> 
> 赞同：0
> 
> 时间：2012-07-11T11:13:57.997
> 
> 标签：java, json, environment-variables

我准备了一个使用 Json 库的 java 文件，所以我从“http://code.google.com/p/json-simple/downloads/detail?name=json_simple-1.1-all.zip&can=2&q= " 但是很迷惑放在哪里，这样我的java文件就可以检测到Json库了。

我试图将库“json_simple-1.1”放在“C:\Program Files\Java\jdk1.6.0_07\lib”中，但还没有工作。

如何使用环境变量或任何其他不需要在命令提示符上设置路径的方法来解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:27:12.500

有多种方法可以包含 jar 文件来运行程序。

```
java -classpath "{yourpath}/json.jar:." my.package.Program
java -cp "{yourpath}/json.jar:." my.package.Program 
```

其他方法是设置环境变量`java.ext.dirs`。

```
-Djava.ext.dirs=jarDirectory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:26:28.820

您可以将它放在 jar 旁边（如果您将应用程序打包到 jar 中）并在清单中添加指向它的链接，例如：

您的 jar 包含一个 META-INF/MANIFEST.MF 文件，其中包含（除其他之外）此条目：

> 类路径：json_simple-1.1.jar

更多细节[在这里](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:32:58.220

尝试以下操作：

```
set CLASSPATH=%CLASSPATH%;<path to libraries folder> 
```

# wordpress - 如何将我的页面模板放在子文件夹 Wordpress 中？

> ID：11431426
> 
> 赞同：3
> 
> 时间：2012-07-11T11:14:02.807
> 
> 标签：wordpress

我正在使用儿童主题。在子主题中，我想为我的所有页面模板创建一个子文件夹，例如 /templates 中的主页模板、默认模板等。当我为页面选择模板时，我该如何做到这一点，以便 wordpress 管理菜单仍然可以看到它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:09:50.200

你能升级到 WordPress 3.4 吗？这是 3.4 的原生功能。

见： http: [//nacin.com/2012/03/29/page-templates-in-subdirectories-new-in-wordpress-3-4/](http://nacin.com/2012/03/29/page-templates-in-subdirectories-new-in-wordpress-3-4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T15:12:36.473

在主题文件夹中创建一个名为***page-templates***的文件夹。如果您在将模板放在此子文件夹下之前已经发布了带有模板的页面，则必须重新选择这些页面的模板页面并单击更新。

# internationalization - 多种语言的日历事件

> ID：11431427
> 
> 赞同：0
> 
> 时间：2012-07-11T11:14:12.823
> 
> 标签：internationalization, calendar, liferay, liferay-6, multilingual

我需要使用 Liferay 6.1 日历，但它似乎不支持事件的多语言（即语言翻译）。

当我插入一个新事件时，它没有显示“添加翻译”功能。

我不知道这是否作为插件的更新而存在，我已经在它上面使用了一个钩子，但主要问题是有多个标题，即每种语言都有一个标题。

有谁知道我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T00:36:31.113

在我看来，你不能用钩子来做这个，而是用 Ext. 因为这个需求需要修改Liferay Core的EditEventAction.java。因此，您只能使用分机进行更改。此外，您必须更改 edit_event.jsp 和 evet 视图 jsps。![在此处输入图像描述](../Images/dd307411cceeaa549b04a4c055b8e030.png)这是一个屏幕截图，如果你成功了，如何查看：

# javascript - 刷新页面时页面加载后触发onUnload

> ID：11431432
> 
> 赞同：4
> 
> 时间：2012-07-11T11:14:35.440
> 
> 标签：javascript, asp.net-mvc, events, browser, onunload

我发现了一些非常奇怪的东西，我很惊讶，我想知道是否有人以前发现过它或者可以想象发生了什么。

我有一个 ASP.NET MVC3 国际象棋应用程序。现在我正在开发一个大厅，供用户加入并向其他人发送比赛邀请。

大厅上的用户通过 HttpContext.Application 中包含的类进行跟踪，当用户访问大厅的 url 被添加到用户列表中并且当他离开页面时，从 onUnload 事件触发的 AJAX**同步**调用被将他从列表中删除。

在页面上，javascript 代码会定期向服务器询问当前用户列表并在客户端页面上更新它。

现在，所有这些工作都很好，但是当我重新加载大厅页面时，我看到登录的用户正在从列表中消失。我检查了执行情况，发现刷新页面时，加载大厅的控制器在删除用户的 AJAX 调用之前触发，因此控制器首先尝试将用户添加到列表中（但由于他已经在列表中，他没有添加），然后他就被删除了。

我假设刷新时，onUnload 事件将执行，并且在它返回后，页面将再次加载......但似乎没有按预期顺序发生。

有什么想法/建议吗？谢谢。

# sql-server - 通过动态文件名批量插入

> ID：11431433
> 
> 赞同：1
> 
> 时间：2012-07-11T11:14:36.120
> 
> 标签：sql-server, stored-procedures, bulk

我尝试批量插入不同的文件。

当我像这样编码时：

```
SET @xml=( Select * From OPENROWSET(
                BULK  'C:\Data\csvToXml.xml',SINGLE_BLOB)x) 
```

这是工作。

如果我将路径作为参数，例如：

```
 SET @Path= 'C:\Data\csvToXml.xml'  

SET @SqlStmt= N' Select @xmlDoc=( Select * From OPENROWSET(
                BULK '''+@Path+''' ,SINGLE_BLOB)x)'

     exec sp_executesql @SqlStmt, N'@xmlDoc XML',@xmlDoc 
```

@xmlDoc 似乎是空的。我找不到我错的地方。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T16:33:02.763

来这里寻找解决我自己问题的方法，但最终解决了这个问题！

```
DECLARE @Output int = 0;
DECLARE @params nvarchar(max) = N'@DesiredValue int OUTPUT';
DECLARE @sql_string nvarchar(max) = N'SELECT @DesiredValue = 13';
EXECUTE sp_executesql @sql_string,  @params, @DesiredValue = @Output OUTPUT
SELECT @Output -- yields 13 
```

事实证明，您不仅需要在 @params 参数中传递关键字 OUTPUT，还需要在要检索的变量中传递关键字。“@DesiredValue = @Output OUTPUT”看起来有点奇怪，因为@Output 取的是@DesiredValue 的值，而不是相反。

[文档](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。

# java - 使用 Hibernate Validator 在错误消息中包含字段名称

> ID：11431437
> 
> 赞同：28
> 
> 时间：2012-07-11T11:14:44.960
> 
> 标签：java, spring, hibernate, hibernate-validator

我正在使用 Hibernate Validator 4.2.0.Final，我正在寻找在错误消息中包含类字段名称的最简单方法。

我发现的是以下线程[Using a custom ResourceBundle with Hibernate Validator](https://stackoverflow.com/questions/4258314/using-a-custom-resourcebundle-with-hibernate-validator)。据此，我应该为每个约束注释创建我的自定义注释，为每个约束注释添加一个属性。

有没有更清洁的方法来实现这一目标？

以下代码：

```
@Size(max = 5)
private String myField; 
```

产生默认错误：*大小必须在 0 到 5 之间。*

我希望它是：*myField 大小必须在 0 到 5 之间。*

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-30T14:28:57.080

您可以使用[类](http://docs.oracle.com/javaee/6/api/javax/validation/ConstraintViolation.html#getPropertyPath%28%29)`getPropertyPath()`中的方法获取字段的名称。[`ConstraintViolation`](http://docs.oracle.com/javaee/6/api/javax/validation/ConstraintViolation.html#getPropertyPath%28%29)

一个好的默认错误消息可以是：

```
violation.getPropertyPath() + " " + violation.getMessage(); 
```

在嵌套对象的情况下，这将为您提供“foo 可能不为空”或“foo.bar 可能不为空”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-07T15:03:57.217

如果您的消息在`.properties`文件中，则没有用于访问属性名称的插值变量，但您可以实现的一种方法是

```
//in ValidationMessages.properties
app.validation.size.msg=size must be between {min} and {max}

@Size(min=10, max=15, message = "myField {app.validation.size.msg})
private String myField; 
```

或者

```
//in ValidationMessages.properties
app.validation.size.msg=size must be between {min} and {max} but provided ${validatedValue}

@Size(min=10, max=15, message = "myField {app.validation.size.msg})
private String myField; 
```

参考：[消息插值](https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/?v=6.0#section-interpolation-with-message-expressions)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-02T08:22:36.917

我将每个字段验证消息都放入属性文件中，如下所示：

```
field.student.name.size.message = Student name size is not valid. 
```

在 bean 中，像这样使用它：

```
@Size(max = 5, message = "${field.student.name.size.message}")  
private String myField; 
```

我知道这不是一个完美的解决方案，但我也没有找到更好的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T12:34:36.563

我不知道任何通用方式，但您可以定义自定义错误消息并在其中包含字段名称。

```
@Size(max = 5, message = "myField size must be between 0 and 5")  
private String myField; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-01T04:28:16.613

一种更好的方法，以便支持国际化。

//在 ValidationMessages.properties

app.FieldName=MyField

app.validation.size.msg=size 必须在 {min} 和 {max} 之间，但提供了 ${validatedValue}

@Size(min=10, max=15, message = "{app.FieldName}"+" "+ "{app.validation.size.msg}") 私有字符串 myField;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T15:49:51.987

使用[椭圆形](http://oval.sourceforge.net/)这有很多注释和显示消息的可能方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-20T15:34:12.293

对于所有正在寻找一种方法来访问验证器中的类的人。将休眠注释放在类级别而不是变量级别使您可以访问类对象（假设您已经定义了自定义验证器）。

```
public class myCustomValidator implements ContraintValidator <MyAnnotation, MyAnnotatedClass> {

    public void initialize (...){ ... };

    public boolean isValid (MyAnnotatedClass myAnnotatedClass) {

        // access to elements of your myAnnotatedClass

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-11T08:44:49.990

使用此方法（例如 ConstraintViolationException 实例）：

```
Set<ConstraintViolation<?>> set =  ex.getConstraintViolations();
List<ErrorField> errorFields = new ArrayList<>(set.size());
ErrorField field = null;
for (Iterator<ConstraintViolation<?>> iterator = set.iterator();iterator.hasNext(); ) {
    ConstraintViolation<?> next =  iterator.next();
   System.out.println(((PathImpl)next.getPropertyPath())
            .getLeafNode().getName() + "  " +next.getMessage());

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-01T11:10:35.990

如果在控制器中验证 REST 调用并使用控制器建议，您可以组合来自 MethodArgumentNotValidException 的字段和默认消息，如下所示：

```
@ControllerAdvice
public class RestExceptionHandler extends ResponseEntityExceptionHandler {

    @Override
    public ResponseEntity<Object> handleMethodArgumentNotValid(MethodArgumentNotValidException exception, HttpHeaders headers, HttpStatus status, WebRequest request) {
        String errorMessage = exception
                .getBindingResult()
                .getFieldErrors()
                .stream()
                .map(fieldError -> fieldError.getField() + " " + fieldError.getDefaultMessage())
                .collect(Collectors.joining(", "));

        return new ResponseEntity<>(errorMessage, HttpStatus.BAD_REQUEST);
    } 
```

# javascript - MSAnimationStart 事件在 IE10 上不起作用

> ID：11431439
> 
> 赞同：1
> 
> 时间：2012-07-11T11:14:46.790
> 
> 标签：javascript, events, animation, internet-explorer-10

请检查[此动画开始事件测试](http://jsfiddle.net/IanY/rhsWL/)。它适用于较新版本的 Firefox、Chrome、Safari 和 Opera。

但是，它不适用于Win8上的最新版本IE10（在虚拟机上）。我已经测试了 IE10 中的 CSS3 动画支持，使用它来浏览具有 CSS3 动画效果并且所有效果都可以工作的网站。

IE10 触发 javascript`MSAnimationStart`事件有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:38:46.707

问题解决了。事实证明，IE10 无法`clip`正确处理 CSS 属性。[该测试](http://jsfiddle.net/IanY/rhsWL/10/)已更新为使用`opacity`而不是`clip`.

感谢[SitePoint 的文章](http://www.sitepoint.com/css3-animation-javascript-event-handlers/)。

# validation - Zend 框架验证器链消息

> ID：11431447
> 
> 赞同：0
> 
> 时间：2012-07-11T11:15:07.257
> 
> 标签：validation, zend-framework

努力理解为什么我的验证器链显示我输入的值的错误消息。

目前，当我输入不同的密码而不是预期的第三条消息时，我的模型代码会显示不正确的消息（'*请重新输入 8-25 个字母数字字符之间的密码并匹配第一个密码*'，当期望'*重新输入的密码必须首先匹配.* ') 当我输入不匹配的 8 个 -25 个字符长的密码时。

$password2 是一个问题

由于这个问题，也不确定是否相同的验证器正在工作。

Zend 框架 1.11 版

上面相关的具体代码块

```
$password2 = new Zend_Form_Element_Password('password2');
$password2->setAttrib('size', 25);
$password2->setRequired(true);
$validatorChain2 = new Zend_Validate();
$validatorChain2->addValidator(new Zend_Validate_StringLength(array('min' => 8,'max' => 25)), true);
$validatorChain2->addValidator(new Zend_Validate_Alnum(false), true);
$validatorChain2->addValidator(new Zend_Validate_Identical('password1'), true);
$password2->addValidator($validatorChain2);
$password2->addErrorMessage('Please retype password between 8-25 alphanumeric characters and matching the first password');
$password2->addErrorMessage('Passwords can only be alphanumeric characters.');
        $password2->addErrorMessage('Retyped password must match first.'); 
```

完整型号代码清单

```
class Application_Model_RegisterNewAccount extends Zend_Form
{

    public function __construct($options = null)
    {
        // TODO: The errors are been grouped together at the top of the page now but the original error messages below each field need to be removed
        parent::__construct($options);

        $this->setName('newaccountregistration');
        $this->setMethod('post');
        $this->setAction($options['action']);   // Variable action passed via parameter array for argument 'action'

        $email = new Zend_Form_Element_Text('email');   // Create form text field
        $email->setAttrib('size', 75);  // Set for, element max size/length
        $email->setRequired(true);  // Make this field a required item

        $validator_email = new Zend_Validate_EmailAddress();
        $email->addValidator($validator_email);   // Set validator type and minimum and maximum size required
        $email->addErrorMessage('Please provide a valid email address');

        $firstname = new Zend_Form_Element_Text('firstname');
        $firstname->setAttrib('size', 35);
        $firstname->setRequired(true);

        $validator_firstname = new Zend_Validate_StringLength(array(1,35));
        $firstname->addValidator($validator_firstname);
        $firstname->addErrorMessage('Please provide your first name between 1-35 characters');

        $surname = new Zend_Form_Element_Text('surname');
        $surname->setAttrib('size', 35);
        $surname->setRequired(true);

        $validator_surname = new Zend_Validate_StringLength(array(1,35));
        $surname->addValidator($validator_surname);
        $surname->addErrorMessage('Please provide your first name between 1-35 characters');

        $password1 = new Zend_Form_Element_Password('password1');
        $password1->setAttrib('size', 25);
        $password1->setRequired(true);
        $validatorChain1 = new Zend_Validate();
        $validatorChain1->addValidator(new Zend_Validate_StringLength(array('min' => 8,'max' => 25)), true);
        $validatorChain1->addValidator(new Zend_Validate_Alnum(false), true);
        $password1->addValidator($validatorChain1);
        $password1->addErrorMessage('Please provide a password between 8-25 alphanumeric characters');
        $password1->addErrorMessage('Passwords can only be alphanumeric characters.');

        $password2 = new Zend_Form_Element_Password('password2');

        $password2->setAttrib('size', 25);
        $password2->setRequired(true);
        $validatorChain2 = new Zend_Validate();
        $validatorChain2->addValidator(new Zend_Validate_StringLength(array('min' => 8,'max' => 25)), true);
        $validatorChain2->addValidator(new Zend_Validate_Alnum(false), true);
        $validatorChain2->addValidator(new Zend_Validate_Identical('password1'), true);
        $password2->addValidator($validatorChain2);
        $password2->addErrorMessage('Please retype password between 8-25 alphanumeric characters and matching the first password');
        $password2->addErrorMessage('Passwords can only be alphanumeric characters.');
        $password2->addErrorMessage('Retyped password must match first.');

        $submit = new Zend_Form_Element_Submit('submit');   // Added submit button
        $submit->setLabel('Register');
        $submit->removeDecorator('DtDdWrapper'); // Remove the default DD div wrapper

        $this->setDecorators( array( array('ViewScript',
            array('viewScript' => '_register.phtml'))));    // The form html page

        $this->addElements(array($email, $firstname, $surname, $password1, $password2, $submit));   // Add all the form elements
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:22:48.677

你应该像这样实例化它......

```
$validatorChain2->addValidator(new Zend_Validate_Identical(array('token' => 'password1', 'messages' => ....)), true); 
```

# c# - 检测何时在任何地方单击超链接

> ID：11431449
> 
> 赞同：-1
> 
> 时间：2012-07-11T11:15:08.573
> 
> 标签：c#, winforms, hyperlink

有没有办法做到这一点：我想创建一个始终执行的软件（使用 C#），当在 Windows 中的任何位置单击超链接时。或者，当单击超链接时，执行此应用程序并获取消息。在这个应用程序中，我应该获得点击的超链接，并在它是特定链接时取消调用浏览器，以便我可以执行自己的逻辑。具体：我有一个 CRM 应用程序。现在应该可以在 word、excel 等中输入一个链接，它不应该在浏览器中执行，而是应该在我的 CRM 应用程序中调用某些东西。我希望，有人可以帮助我，我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:24:52.013

您可以通过为您的应用程序注册一个协议前缀来解决此问题，而不是尝试捕获极其复杂和过度设计的超链接。

考虑注册您自己的前缀。一个例子是davee的[评论。](https://stackoverflow.com/questions/11431449/detect-when-a-hyperlink-is-clicked-anywhere#comment15080622_11431449)

来自[http://kb.mozillazine.org/Register_protocol](http://kb.mozillazine.org/Register_protocol)：

> 注册后，该协议可以由您指定的程序处理，例如您的浏览器或第三方查看器。这意味着超链接（例如 foo://fred）可以使用协议 foo 的处理程序来打开名为 fred 的文件。

Microsoft 有一篇文章包含相当详尽的 C# 示例： http: [//msdn.microsoft.com/en-us/library/aa767914 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx)

# android - 加载内容后如何将可见性（View.VISIBLE）设置为webView？

> ID：11431452
> 
> 赞同：3
> 
> 时间：2012-07-11T11:15:20.440
> 
> 标签：android, android-webview

在我的应用程序中有一个广告网络视图，它在活动开始时调用一个 url。一切都很好，除了一件小事，它更像是一个可见性问题......所以事情是当我开始活动时，我真的看到页面加载......大约在 0,3 秒内出现文本，然后出现图片，以及所有内容以某种方式从左到右浮动。这不太好，我想将我的 webView 的可见性设置为 VIEW.GONE 直到它完成加载，然后我可以将它设置为 VISIBLE ...

有没有一种好的、可行的方法来实现这一目标？重要的是**它必须在每个操作系统版本的 Android 2.3 到 4.0 上运行。**

我已经在这里尝试了[**与此堆栈问题相关的**](https://stackoverflow.com/questions/3702627/onpagefinished-not-firing-correctly-when-rendering-web-page)**onPageFinished 和 PictureListener** ，但没有希望，onPageFinished 仅在 4.0 上正常工作，而 PictureListener 用于图片，如果不同广告具有不同数量的图片，这不是最好的方法。（如果根本没有图片怎么办......）[](https://stackoverflow.com/questions/3702627/onpagefinished-not-firing-correctly-when-rendering-web-page)

 **如果你知道一种方法，请告诉我。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:47:08.907

你试过`WebChromeClient`吗？

```
webView.setWebChromeClient(new WebChromeClient() {

    public void onProgressChanged(WebView view, int progress) {
        if (progress == 100) {
            // dismisses the PD
            dismissLoadingDialog();
        }
    }
});
    webView.loadUrl("your-Url");
// show message dialog here
createLoadingDialog(); 
```

我已经在 2.3 到 4.0 操作系统上使用它，没有任何问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T06:22:59.320

在 onPageFinished 方法视图期间使用 webview 可见性不显示 util 所有页面加载。

```
webView1.setWebViewClient(new WebViewClient(){

                                                @Override
                                                public void onPageFinished(WebView view, String url) {
                                                    super.onPageFinished(view, url);

                                                    webView1.setVisibility(View.VISIBLE);

                                                } 
```**

# javascript - 在javascript中设置浏览器窗口的默认时区

> ID：11431453
> 
> 赞同：5
> 
> 时间：2012-07-11T11:15:30.207
> 
> 标签：javascript, gwt

我们在基于 GWT 的网页上显示时间表。客户端系统使用与服务器不同的时区，因此，所有时间表都显示错误。有没有办法在我们加载页面时设置默认时区？就像我们在java中做的那样：

TimeZone.setDefault(TimeZone.getTimeZone("亚洲/加尔各答"));

谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:37:58.280

不，您不能[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)在 javascript 中设置对象的时区。通常您只使用 UTC 和基于纪元的时间戳。

只有在从字符串或年月等创建日期时才会使用本地时区，您只能[获取时区偏移量](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)。

转换时区只能通过重新设置日期对象的小时数（[此处描述的示例](http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329)）来完成，创建一个看起来像具有偏移时区但只是 utc 的日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-15T02:00:15.947

如果您使用`moment.js`日期，您可以为所有新创建的时刻设置默认时区：

```
moment.tz.setDefault(String) 
```

[https://momentjs.com/timezone/docs/#/using-timezones/default-timezone/](https://momentjs.com/timezone/docs/#/using-timezones/default-timezone/)

# php - Sencha Touch 和 PHP Web 服务

> ID：11431455
> 
> 赞同：0
> 
> 时间：2012-07-11T11:15:33.017
> 
> 标签：php, json, extjs, sencha-touch-2

我目前正在学习煎茶触摸，作为测试我写了一个小网络服务，我想在列表中显示结果项目

但我无法让它工作......

```
Ext.define('GS.view.ListTest', {
    extend: 'Ext.navigation.View',

    requires:[
        'Ext.dataview.List',
        'Ext.data.proxy.JsonP',
        'Ext.data.Store'
    ],
    xtype:'listpanel',
    config: {
        title: 'Fifa List',
        iconCls: 'star',

        items: {
            xtype: 'list',
            itemTpl: '{Player1}',

            store: {
                autoLoad: true,
                fields: ['MatchID','Player1', 'ScorePlayer1' ,'ScorePlayer2','Player2'],

                proxy: {
                    type: 'jsonp',
                    url: 'http://fifa.verhulstrobin.be/webservices/getMatches.php',
                    reader: {
                        type:'json',
                        rootProperty: 'matches'
                    }
                }
            }

        }

    }
}); 
```

我检查了一下，我的 json 是有效的......它在控制台中说的是 Uncaught SyntaxError: Unexpected token ：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:28:27.557

尝试这样的事情：

```
 items: {
        xtype: 'list',
        itemTpl: '{match.Player1}',

        store: {
            autoLoad: true,
            fields: ['match'],

            proxy: {
                type: 'jsonp',
                url: 'http://fifa.verhulstrobin.be/webservices/getMatches.php',
                reader: {
                    type:'json',
                    rootProperty: 'matches'
                }
            }
        }
    } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:21:53.117

试试这个

```
items: {
    xtype: 'list',
    itemTpl: '{match.Player1}',

    store:new  Ext.create('Ext.data.Store', {
        autoLoad: true,
        fields: ['match'],

        proxy: {
            type: 'jsonp',
            url: 'http://fifa.verhulstrobin.be/webservices/getMatches.php',
            reader: {
                type:'json',
                rootProperty: 'matches'
            }
        })
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:27:25.623

查看您的网络服务响应，我注意到它没有将 JSON 答案包装在 JSONP 所需的函数调用中。您需要返回这样的项目：

```
Ext.data.JsonP.callback1({}); 
```

其中函数的参数必须是您的实际 JSON 数据而不是空对象，并且函数的名称“Ext.data.JsonP.callback1”作为名为“callback”的参数由 Ext Store 传递给您的 Web 服务。

但是，您可以使用代理上的 callbackKey 自定义该参数的名称：

```
var store = Ext.create('Ext.data.Store', {
    model: 'User',
    proxy: {
        type: 'jsonp',
        url : 'http://domainB.com/users',
        callbackKey: 'theCallbackFunction'  // <--
    }
}); 
```

有关 JSONP 以及如何为 Ext Js 商店实现它的更多详细信息，您可以参考[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP) 和[http://docs.sencha.com/touch/2-0/ #!/api/Ext.data.proxy.JsonP](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.JsonP)

# c# - 观察哪个窗口发送了 Close() 事件

> ID：11431458
> 
> 赞同：0
> 
> 时间：2012-07-11T11:15:46.523
> 
> 标签：c#, wpf

我有一个简短的问题，即使在网上搜索了一段时间后，我也没有找到答案。我在 WPF 应用程序中有两个窗口。当用户关闭一个窗口时，它应该被隐藏。当主窗口关闭时，整个应用程序将关闭。

我用了

```
 private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = true;
        Hide();
    } 
```

在第二个窗口的类中，并希望它只会捕获其 Close() 事件，但不幸的是它捕获了所有 Close() 事件。

如何在窗口之间分开以独立处理事件？

问候拉里莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:17:28.350

使用`sender`参数，这就是它的用途：

```
window1.Closing += Window_Closing;
window2.Closing += Window_Closing;

private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    var w = (Window)sender;

    // Simple ref test to illustrate, but you can use anything else you want instead
    if (w == window1) {
        e.Cancel = true;
        w.Hide();
    }
} 
```

# php - SELECT 行 WHERE 参数

> ID：11431460
> 
> 赞同：0
> 
> 时间：2012-07-11T11:15:50.960
> 
> 标签：php, mysql

我正在尝试基于 get 变量进行查询。我使用该变量来指定查询应该找到哪些行。当没有设置获取变量时，我希望查询获取所有行。

在代码的前面，我将 $category 变量设置为 1、2、3。

```
WHERE products.category = $category 
```

问题：如果没有设置变量，我如何让它获取所有行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:17:19.497

不要添加 where 子句或只是

```
WHERE products.category in (1,2,3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:22:28.807

你能做的最好的事情是：

```
$wc = (isset($category)) ? "WHERE products.category = '$category'" : "";
$sql = "SELECT *
       FROM products
       " . $wc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:25:17.223

```
 WHERE  products.category =(case when $category IS not null 
then $category else products.category end) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:35:40.620

理想情况下，您将有条件地添加 where 语句（如果仅存在 1、2、3 类别），但如果类别 id 是固定的，您可以尝试使用；

```
if (!isset($category))
{
    $category = "1,2,3";
}

WHERE products.category in ($category) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:17:00.767

`WHERE`如果变量没有值，则省略该子句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T11:18:37.407

或者

检查是否设置了 $category

使用 products.category = $category

否则 1

所以结果将是

WHERE products.category = $category

或者

哪里 1

# iphone - 在不使用 uiimagepicker 控制器的情况下捕获图像和视频

> ID：11431463
> 
> 赞同：1
> 
> 时间：2012-07-11T11:15:53.670
> 
> 标签：iphone, objective-c, ios

我需要在不打开 imagepickerController 的情况下捕获图像和视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:29:51.863

您可以使用 AVCaptureSession 捕获视频和照片

请参阅[iPhone SDK 4 AVFoundation - 如何正确使用 captureStillImageAsynchronouslyFromConnection？](https://stackoverflow.com/questions/3847140/iphone-sdk-4-avfoundation-how-to-use-capturestillimageasynchronouslyfromconnec)

```
-(void) viewDidAppear:(BOOL)animated
{
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;

    CALayer *viewLayer = self.vImagePreview.layer;
    NSLog(@"viewLayer = %@", viewLayer);

    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

    captureVideoPreviewLayer.frame = self.vImagePreview.bounds;
    [self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[stillImageOutput setOutputSettings:outputSettings];

[session addOutput:stillImageOutput];

    [session startRunning];
}

-(IBAction) captureNow
{
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillImageOutput.connections)
    {
        for (AVCaptureInputPort *port in [connection inputPorts])
        {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] )
            {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) { break; }
    }

    NSLog(@"about to request a capture from: %@", stillImageOutput);
    [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
    {
         CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
         if (exifAttachments)
         {
            // Do something with the attachments.
            NSLog(@"attachements: %@", exifAttachments);
         }
        else
            NSLog(@"no attachments");

        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
        UIImage *image = [[UIImage alloc] initWithData:imageData];

        self.vImage.image = image;
     }];
} 
```

# mvvm-light - MVVM Light Messenger 发射两次

> ID：11431467
> 
> 赞同：0
> 
> 时间：2012-07-11T11:16:14.640
> 
> 标签：mvvm-light

我正在使用 Messenger 从后面的页面代码中广播一些信息（我不能使用 eventtocommand），并且 Messenger 操作是两次边缘这是我在 viewModel 中的代码

```
public CedareImpozitViewModel()
{
if (IsInDesignMode)
{
}
else
{
LoadListaPers();
LoadListaEntitati();        
Messenger.Default.Register<EntitateMessage>(this, AdaugaEntitateNoua);
}

UpdCedareCommand = new RelayCommand(() => UpdCedare(), () => this.CanUpdCedare()); 
```

}

从后面的页面代码

```
Messenger.Default.Send(new EntitateMessage(cedare) { cedarenoua = cedare, entNoua = entity}); 
```

和EntitateMessage 类

```
public class EntitateMessage : GenericMessage<CedareImpozit>
{
    public EntitateMessage(CedareImpozit parm)
        : base(parm)
    {
        entNoua = null;
        cedarenoua = null;
    }
    public CedareImpozit cedarenoua { get; set; }
    public Entitate entNoua { get; set; }
} 
```

我没有从我的页面导航两次。有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:25:55.580

经验表明，发生这种情况时，原因总是注册发生了两次。在 Register 方法调用上放置断点以进行验证。

干杯，劳伦特

# jsp - 如何让jsp中的spring安全角色层次结构起作用？

> ID：11431469
> 
> 赞同：3
> 
> 时间：2012-07-11T11:16:17.990
> 
> 标签：jsp, spring-security, security-roles

我尝试让角色层次结构在我的应用程序中工作。我唯一想要的是在所有级别上定义的层次结构：在 url 级别，现在也在视图级别（在我的 jsp 文件中）。

我使用以下设置：

```
 <beans:bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
        <beans:property name="decisionVoters">
            <beans:list>
                <beans:ref bean="roleHierarchyVoter"/>
                <beans:bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                    <beans:property name="expressionHandler">
                        <beans:bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
                            <beans:property name="roleHierarchy" ref="roleHierarchy"/>
                        </beans:bean>
                    </beans:property>
                </beans:bean>
                <beans:bean class="org.springframework.security.access.vote.AuthenticatedVoter"/>
            </beans:list>
        </beans:property>
    </beans:bean>

    <beans:bean id="roleHierarchyVoter" class="org.springframework.security.access.vote.RoleHierarchyVoter">
        <beans:constructor-arg ref="roleHierarchy"/>
    </beans:bean>

    <beans:bean id="roleHierarchy" class="org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl">
        <beans:property name="hierarchy">
            <beans:value>
                ROLE_ADMIN > ROLE_OWNER
                ROLE_OWNER > ROLE_DISTRIBUTOR
                ROLE_DISTRIBUTOR > ROLE_RESELLER
                ROLE_RESELLER > ROLE_USER
            </beans:value>
        </beans:property>
    </beans:bean>

<http auto-config="true" use-expressions="true" access-decision-manager-ref="accessDecisionManager">
    ...
</http> 
```

对于 URL 级别（拦截 URL），它工作得很好，但在我的 jsp 文件中不起作用。问题是我没有正确理解配置以使角色层次结构起作用。

```
<security:authorize access="hasRole('ROLE_ADMIN')">
    <div class="span4">
        <h2>Admin</h2>
    </div><!--/span-->
</security:authorize>
<security:authorize access="hasRole('ROLE_OWNER')">
    <div class="span4">
        <h2>Owner</h2>
    </div><!--/span-->
</security:authorize>
<security:authorize access="hasRole('ROLE_DISTRIBUTOR')">
    <div class="span4">
        <h2>Distributor</h2>
    </div><!--/span-->
</security:authorize> 
```

我使用这个简单的示例在视图级别测试角色层次结构，但它不起作用。只有具有管理员角色的用户才能看到他的区块，而其他人则看不到。

有人知道我的配置做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T13:17:53.220

我有同样的问题（Spring Security 3.2.5）。

`DefaultWebSecurityExpressionHandler`通过在该`<http>`部分之前声明我来解决

```
<!-- This must go before the http element in order to be used by security:authorize tags using the access attribute -->
<!-- https://jira.spring.io/browse/SEC-1452 -->
<beans:bean id="webSecurityExpressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
    <beans:property name="roleHierarchy" ref="roleHierarchy" />
</beans:bean> 
```

见 [https://jira.spring.io/browse/SEC-1452](https://jira.spring.io/browse/SEC-1452) 和 [http://forum.spring.io/forum/spring-projects/security/67494-configuration-of-spring-security-3-0m1-expression -处理程序错误/page3](http://forum.spring.io/forum/spring-projects/security/67494-configuration-of-spring-security-3-0m1-expression-handler-bug/page3)

# ios - UIImageView 触摸方向旋转动画

> ID：11431471
> 
> 赞同：0
> 
> 时间：2012-07-11T11:16:19.897
> 
> 标签：ios, cocoa-touch, uiimageview, transform, image-rotation

我有一个 UIImageView 有一个箭头的图像。当用户点击 UIView 时，这个箭头应该指向点击的方向，保持它的位置，它应该只是改变变换。我已经实现了以下代码。但它没有按预期工作。我添加了一个截图。在此屏幕截图中，当我触摸左上角时，箭头方向应如图所示。但事实并非如此。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

 UITouch *touch=[[event allTouches]anyObject];
 touchedPoint= [touch locationInView:touch.view];
 imageViews.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(rangle11));
 previousTouchedPoint = touchedPoint ;
}

- (CGFloat) pointPairToBearingDegrees:(CGPoint)startingPoint secondPoint:(CGPoint) endingPoint
{

 CGPoint originPoint = CGPointMake(endingPoint.x - startingPoint.x, endingPoint.y - startingPoint.y); // get origin point to origin by subtracting end from start
   float bearingRadians = atan2f(originPoint.y, originPoint.x); // get bearing in radians
float bearingDegrees = bearingRadians * (180.0 / M_PI); // convert to degrees
bearingDegrees = (bearingDegrees > 0.0 ? bearingDegrees : (360.0 + bearingDegrees)); // correct discontinuity
return bearingDegrees;
} 
```

![在此处输入图像描述](../Images/13de0f88a898edbc264d840419d5d874.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T10:44:41.617

我假设你想要一个箭头图像指向你触摸的地方，我试过了，这就是我能想到的。我放置了一个带有向上箭头的图像视图（没有尝试从任何其他位置开始，日志给出正确的角度）并且在触摸不同位置时它会旋转并指向触摸位置。希望它有所帮助（尝试了一些旧数学:-)）

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch=[[event allTouches]anyObject];
    touchedPoint= [touch locationInView:touch.view];
    CGFloat angle = [self getAngle:touchedPoint];
    imageView.transform = CGAffineTransformMakeRotation(angle);

}

-(CGFloat) getAngle: (CGPoint) touchedPoints
{
    CGFloat x1 = imageView.center.x;
    CGFloat y1 = imageView.center.y;

    CGFloat x2 = touchedPoints.x;
    CGFloat y2 = touchedPoints.y;

    CGFloat x3 = x1;
    CGFloat y3 = y2;

    CGFloat oppSide = sqrtf(((x2-x3)*(x2-x3)) + ((y2-y3)*(y2-y3)));
    CGFloat adjSide = sqrtf(((x1-x3)*(x1-x3)) + ((y1-y3)*(y1-y3)));

    CGFloat angle = atanf(oppSide/adjSide);
    // Quadrant Identifiaction
    if(x2 < imageView.center.x)
    {
        angle = 0-angle;
    }

    if(y2 > imageView.center.y)
    {
        angle = M_PI/2 + (M_PI/2 -angle);
    }
     NSLog(@"Angle is %2f",angle*180/M_PI);
    return angle;

} 
```

-anoop4real

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:12:38.157

鉴于您告诉我的内容，我认为问题在于您没有在`touchesBegan`. 试着把它改成这样，看看它是否效果更好：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

 UITouch *touch=[[event allTouches]anyObject];
 touchedPoint= [touch locationInView:touch.view];
 imageViews.transform = CGAffineTransformIdentity;
 imageViews.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(rangle11));
 previousTouchedPoint = touchedPoint ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T07:33:21.050

你需要这条线来“消除不连续性”吗？似乎`atan2f()`返回 +π 到 -π 之间的值。那些不会直接使用`CATransform3DMakeRotation()`吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T18:38:05.973

您需要的是箭头指向最后一个点击点。为了简化和测试，我使用了轻击手势（但它类似于 touchBegan:withEvent:)。

在 viewDidLoad 方法中，我注册了手势：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[self.view addGestureRecognizer:tapGesture];
[点击手势释放]；

```

每次点击时调用的方法：

```
- (void)tapped:(UITapGestureRecognizer *)gesture
{
    CGPoint imageCenter = mFlecheImageView.center;
    CGPoint tapPoint = [手势 locationInView:self.view];

    双 deltaY = tapPoint.y - imageCenter.y;
    双 deltaX = tapPoint.x - imageCenter.x;
    双角弧度 = atan2(deltaY, deltaX) + M_PI_2;

    mFlecheImageView.transform = CGAffineTransformMakeRotation(angleInRadians);
}

```

一个关键是`+ M_PI_2`因为 UIKit 坐标的原点位于左上角（而在三角函数中，我们使用左下角）。

# java - JAXB：XML 注册表中没有与命名空间和名称匹配的 XML 元素声明

> ID：11431475
> 
> 赞同：2
> 
> 时间：2012-07-11T11:16:37.137
> 
> 标签：java, xml, jaxb

**rootelement 类中的一些代码：**

```
 @XmlElementRefs({
      @XmlElementRef(name = "footnoteLink", 
                     namespace = "http://www.xbrl.org/2003/linkbase", 
                     type = JAXBElement.class, required = false)
    }) 
```

出现如下描述

```
No XML element decl in the XML registry matching the namespace 
'http://www.xbrl.org/2003/linkbase' and name 'footnoteLink'. 
```

原因是，来自这个根元素类的 ObjectFactory 没有找到 decl。

**但是我在另一个对象工厂（xlink object factory）中找到了footnoteLink。**

```
private final static QName _FootnoteLink_QNAME 
                   = new QName("http://www.xbrl.org/2003/linkbase", "footnoteLink"); 
```

**重点是 xlink 声明：**

```
 <complexType>
      <sequence>
        <element ref="link:schemaRef" minOccurs="1" maxOccurs="unbounded" />
        <choice minOccurs="0" maxOccurs="unbounded">
          <element ref="xbrli:unit"/>
          <element ref="link:footnoteLink"/>
        </choice>
      </sequence>
   </complexType> 
```

我需要指向`@xmlElementRef "footnoteLink"`链接对象工厂。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:20:37.500

所以我找到了一个解决方案：

在我的架构中，它设置为：

```
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
```

我需要添加额外的：

```
xmlns="http://www.w3.org/2001/XMLSchema" 
```

但为什么？？？？

# java - 如何将大型二进制数据存储在字符串中？

> ID：11431481
> 
> 赞同：0
> 
> 时间：2012-07-11T11:17:04.593
> 
> 标签：java

> **可能重复：**
> [OutOfMemoryError：当接收到 2.3 MB 的 XML 响应时](https://stackoverflow.com/questions/7524403/outofmemoryerror-when-receiving-xml-response-of-2-3-mb)

我从 Web 服务中获得了响应字符串，它是 XML 格式的大量二进制字符串。我可以将响应数据存储到对象中。但我想解析响应并将其存储到本地数据库中。所以我必须将对象数据转换为字符串。如果我将对象数据转换为字符串。它发生“内存问题”。

我的回应是这样的

```
<xmlstring>
<oneslip>78364</oneslip>
<threeslip>Hello</threeslip>
<twoslip>3</twoslip>
<Binarydata>"Here the large amount of binary data"</Binarydata>

<oneslip>78364</oneslip>
<threeslip>Hello</threeslip>
<twoslip>3</twoslip>
<Binarydata>"Here the large amount of binary data"</Binarydata>

..
..
.. 
```

高达50

```
</xmlstring> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:31:18.267

尝试[字符串缓冲区](http://docs.oracle.com/javase/7/docs/api/)

```
bufferedReader = new BufferedReader(
                     new InputStreamReader(
                         response.getEntity().getContent()));

StringBuffer stringBuffer = new StringBuffer("");
String line = "";
String LineSeparator = System.getProperty("line.separator");

while ((line = bufferedReader.readLine()) != null) {
    stringBuffer.append(line + LineSeparator); 
}

bufferedReader.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:35:27.013

如果您的数据库将数据表示为*二进制*（而不是*character*），那么使用中间字符串似乎是错误的方法。您可以使用[Blob.setBinaryStream](http://docs.oracle.com/javase/7/docs/api/java/sql/Blob.html#setBinaryStream%28long%29)获取用于将数据写入数据库的流。然后，您可以将内容以可管理的块的形式直接从输入流传输到输出流，而无需缓冲整个内容。

如果您想传输输入流的全部内容，甚至不看它，您甚至可以使用[CallableStatement.setBlob(String,InputStream)](http://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html#setBlob%28java.lang.String,%20java.io.InputStream%29)将 BLOB 列直接设置为该流中的数据。

If you have to convert things to character, as the database uses a clob instead of a blob, then similar approaches exist for clob as well, and you could still avoid the intermediate String.

# c# - 如何根据div类在div内部的c#代码中创建img标签？

> ID：11431490
> 
> 赞同：1
> 
> 时间：2012-07-11T11:17:45.530
> 
> 标签：c#, html, asp.net, webforms

我有以下 div 标签：

```
<div class="slideshow"></div> 
```

我想在 C# 代码隐藏中的该 div 中创建几个 img 标签，如下所示：

```
<div class="slideshow">
     <img src="images/image1.png" alt="" width="600" height="300" />
     <img src="images/image2.png" alt="" width="600" height="300" />
     <img src="images/image3.png" alt="" width="600" height="300" />
</div> 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:20:00.660

尝试将`html`标签转换为`Htmlserver`控件并指定`id`属性。

```
<div class="slideshow" runat="server" id="slideshow"></div> 
```

代码隐藏：

```
 slideshow.Controls.Add(new HtmlImage()
        { 
              Src="",
              Alt="",
              Width=200,
              Height=200
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:27:32.903

看看 [http://learning2code.net/Learn/2009/8/12/Adding-Controls-to-an-ASPNET-form-Dynamically.aspx](http://learning2code.net/Learn/2009/8/12/Adding-Controls-to-an-ASPNET-form-Dynamically.aspx)

将 html 标记转换为服务器控件。

```
<div id="divid" runat="server"></div> 
```

在代码中你可以使用

```
Image img = new Image();
divid.Controls.Add(img); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:28:42.997

在代码隐藏中使用 For 循环 // 这将为您创建 10 个图像标签，就像您问的那样

```
For(int i=0; i < 10; i++)
{
    myPanel.Controls.Add( new HtmlImage()  //OR you can have ServerSide Control eg: new Image ()  
              { 
                            Src = "Image/Image" + i + ".png",
                            Alt = "my image" + i,
                            Width = 600,
                            Height = 300
              });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:21:50.083

您是否考虑过使用`<asp:Image />`标签？

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.image.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:27:20.280

您可以查看 TagBuilder 类，这将有助于构建您需要的内容

[http://www.asp.net/mvc/tutorials/older-versions/views/using-the-tagbuilder-class-to-build-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/using-the-tagbuilder-class-to-build-html-helpers-cs)

我不是 100% 确定这可以与 WebForms 一起使用，我只在 MVC 中使用过。

# objective-c - Xcode - SIGABRT 错误仅在我的 Mac 上

> ID：11431494
> 
> 赞同：0
> 
> 时间：2012-07-11T11:18:00.817
> 
> 标签：objective-c, ios, xcode, sigabrt

我的 Xcode 项目中出现 SIGABRT 错误。奇怪的是，在另一台 Mac 上，该项目运行时没有出现错误。

我已经这样做了：

*   清理项目
*   重新启动 Xcode 和 mac
*   从模拟器中删除了应用程序文件

并且在两个 mac 上是相同的 Xcode 版本。

有没有人给我一个自发的建议？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:21:58.520

您是否检查过两个 Mac 的 BaseSDK 是否设置为最新的 iOS 版本？

# objective-c - 如何在 iOS 上制作一个显示彩色图标的标签栏？

> ID：11431498
> 
> 赞同：1
> 
> 时间：2012-07-11T11:18:08.653
> 
> 标签：objective-c, ios, button, uitabbar

我需要在屏幕底部制作一个带有一些按钮的工具栏。我希望在每个按钮中都有一个小图像和一个小文本。我可以从“Xcode”中找到的最接近的是“标签栏”，您可以在其中放置图标和文本，但问题是当您添加图像时，您只能看到图像的阴影而不是它的颜色。我可以改变吗那？或者是另一种制作工具栏的方法，就像我描述的那样？

## 编辑

我需要按钮来更改控制器，我只是注意到我无法为选项卡创建操作，而只能为插座创建操作。所以我猜标签栏不是我应该使用的。关于工具栏的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:41:34.073

是的，标签栏是最好的方法，如果您使用 IO5，自定义标签栏非常容易

此[链接](http://kurrytran.blogspot.com/2011/10/ios-5-tutorial-creating-custom-tab-bar.html)将很有帮助。

还有另一种方法（在 IOS4 之前适用于自定义选项卡栏）是创建自定义按钮与选项卡栏看起来相似的图像。它会给你同样的感觉，但就像我说的现在自定义 IOS 标签栏很容易

这是给你的几个链接

[链接 1](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_create_an_iOS_5_iPhone_Tab_Bar_Application)与故事板

[链接 2](http://www.techotopia.com/index.php/Creating_an_iOS_5_iPhone_Multiview_Application_using_the_Tab_Bar)没有故事板

还有一件事如果有问题，请在此处发布问题之前尝试搜索 Google，然后随时发布您尝试过的代码或教程。

让我知道我是否工作过

干杯

W

# if-statement - 字符串数组索引值::字符串问题

> ID：11431499
> 
> 赞同：0
> 
> 时间：2012-07-11T11:18:08.653
> 
> 标签：if-statement

我需要一些帮助来获取 if 语句来验证字符串数组索引和字符串比较是否相等。

```
if((!dclineArr[i].equals("thousand")) || (!dclineArr[i].equals("hundred"))) 
```

我也累了

```
if((dclineArr[i] != "thousand") || (dclineArr[i] != "hundred")) 
```

引发这种比较的一切最终都是真实的

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:20:57.193

NOT OR NOT 始终为真 - 您需要 AND 而不是 OR (||)

你的 if() 检查，如果`dclineArr[i]`不是“千”。如果是“千”，则检查是否不是“百”。它不能同时是两者，所以它的结果是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:31:45.633

我强烈怀疑您需要提供更多细节；特别是，您在说什么语言？

但是，它看起来像 Java，所以我将继续假设它是 Java。

正如@Katai 已经说过的那样，您的第一个 if 语句将始终为真。你是说，'如果某事不等于“千”或同一件事不等于“百”，那么继续。你能想出一个不正确的字符串吗？

您的第二次尝试是典型的 Java 错误之一（我们都做过）：使用等号运算符比较对象。仅当您比较对同一对象的两个引用时，这才是正确的。当然，在这种情况下，您使用的是不等于，因此对于与另一个对象不同的任何对象，条件都将为真。

# sqlite - 带有自定义条件的 SQLite INSERT 或 UDATE

> ID：11431506
> 
> 赞同：1
> 
> 时间：2012-07-11T11:18:53.173
> 
> 标签：sqlite, insert, conditional-statements

我知道已经有很多关于这个主题的问题已经提出并得到了回答，但它们似乎不适合我的情况。

我有一个远程 sqlite 数据库——*数据库服务器*——和一个本地数据库——*数据库本地*包含相册条目。在需要时从*数据库服务器进行**数据库本地*更新。*DB server*有一个called ，它存储在*DB local*中以防止重复，但是*DB local*也有自己的列，称为**`primary key``identifier`**`primary key``id`****

 ***如果我需要在我的手机上创建一个新专辑，我会在*DB local*中插入一个`identifier`设置为的条目，`-1`并且何时可以访问*DB 服务器*，请求正确的`identifier`.

我的问题是：我做了很多刷新，不想每次都增加我的主键。

当我从*数据库服务器*刷新*本地*数据库时，我想要新专辑和现有专辑。*`INSERT``UPDATE`*

 *我阅读了该`INSERT OR REPLACE`声明，但它需要我`identifier`在*DB local*中的列设置为`unique`. 不幸的是，我不能这样做，因为我可以将多个`identifier`设置为`-1`.

有没有办法在单个请求中执行`INSERT`or有条件的？`UPDATE`

谢谢 ！

编辑：更新是这样完成的：*本地数据库*是从*数据库服务器*更新的。*数据库本地*数据永远不会推送到*数据库服务器*，添加新项目的唯一方法是调用服务器上的 API，这将在*数据库服务器*上创建一个空条目并获取它`identifier`。但由于服务器并不总是可访问（EDGE/3G），*DB local*中的一些条目已`identifier`设置为`-1`. 一旦 API 调用返回相应的，我们将其存储在*本地数据库*`identifier`中，而不是`-1`用于相应的条目****

# business-process-management - 如何扩展 BPMN 2.0

> ID：11431508
> 
> 赞同：6
> 
> 时间：2012-07-11T11:18:59.310
> 
> 标签：business-process-management, bpmn, activiti

目前，我正在研究扩展 BPMN 的方法。我想创建一个新的任务类型，它的属性比任务少，还具有一些非 BPMN 属性和一种新类型的池。

到目前为止，我看到人们提到了两种方法，使用扩展点和使用外部模式。不幸的是，在互联网上，我找不到那么多资源来广泛理解这些方法。

我从这些方法中了解到：

*   **扩展点：**有一些由 BPMN 引擎供应商（Aktiviti、jBPM 等）提供的标准扩展点。例如，在 Activiti 中有一个自定义服务任务，可以使用用户所需的属性进行扩展，但如果这个新创建的扩展任务可以部署在 Aktiviti 工作流引擎上，我没有找到任何资源，而且很高兴看到新的 BPMN此扩展的架构。

*   **使用外部架构：**在外部架构中定义所需的属性并从 Semantic.xsd 引用此架构。在这种情况下，我们还需要调整我们的工作流引擎，但它比我之前提到的方法更灵活，还是我遗漏了什么？

唯一不清楚的是这个方法没有直接扩展任务定义，所以这些属性可以被 BPMN 中的每个元素使用？

一个示例外部架构是：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsd:schema elementFormDefault="qualified" attributeFormDefault="unqualified"
    xmlns="http://myproject.org//bpmn/extensions/NEWTask"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:exvar="http://myproject.org/externalDefs"
    targetNamespace="http://myproject.org//bpmn/extensions/NEWTask"
    > 
    <xsd:import namespace="http://www.omg.org/spec/BPMN/20100524/MODEL"             schemaLocation="BPMN20.xsd"/>
    <xsd:import schemaLocation="externalDefs.xsd" namespace="http://myproject.org/externalDefs" />
    <xsd:complexType name="tProperty1" abstract="false">
        <xsd:sequence>
            <xsd:any namespace="##any" processContents="lax" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>
        <xsd:group id="tNEWTask" name="tNEWTask">
        <xsd:sequence>
            <xsd:element name="Property2" type="xsd:string" minOccurs="0" maxOccurs="unbounded"/>
            <xsd:element name="Property1" type="tProperty1" minOccurs="0" maxOccurs="unbounded"/>
            <xsd:element name="Property2" type="exvar:Varaible1" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:group>
    </xsd:schema> 
```

是否有任何其他方法可以扩展 BPMN 或您可以指出我的任何资源，以便我可以更好地了解这个主题？

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:20:58.937

巴西研究人员开发了这个工具：[http ://code.google.com/p/bpmnx/](http://code.google.com/p/bpmnx/)

据我所知，它适用于扩展点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:19:11.493

由于您不是在谈论任何具体的 BPMN 实现（activiti、jbpm），而是在谈论您自己的流程引擎，我假设您想要做的是根据 BPMN 规则扩展 XML。

也就是说，您可以查看 BPMN 2.0 规范（我认为它很长，而且可能很无聊），或者您可以尝试查看一些 bpmn 书籍。[BPMN method & style book](https://rads.stackoverflow.com/amzn/click/com/0982368119)有一部分是关于实现 BPMN，所以也许这对你有用。

注意：当有像BPMN这样的标准时，它有很多支持，如果你**真的**需要扩展它有时会很有用。是否值得扩展一些尚未考虑的标准？（不是说你做不到，但你应该想想它会给你带来什么，如果你不能用常规的东西来做）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T16:53:57.793

[这是 Activiti 论坛和 MDT Eclipse 插件](http://forums.activiti.org/en/viewtopic.php?f=4&t=371)[论坛](http://www.eclipse.org/forums/index.php/m/758391/)上关于这个主题的一些讨论。

不幸的是，通过一些简单的测试，我无法实现一个新的命名空间

（例如`xmlns:newns="http://www.mynewns.com/newns`在

```
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:activiti="http://activiti.org/bpmn" 
xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" 
xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" 
xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" 
typeLanguage="http://www.w3.org/2001/XMLSchema" 
xmlns:newns="http://www.mynewns.com/newns" 
expressionLanguage="http://www.w3.org/1999/XPath" 
targetNamespace="http://www.activiti.org/bpmn2.0"> 
```

和像`<userTask newns:ownerID="owner1">`) 这样的元素。

我的图表中的自定义元素`Activiti`也不起作用——Eclipse 插件似乎丢弃了我的自定义命名空间并忽略了我的元素。不知道为什么；还在研究。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-08T09:29:49.153

您可以查看[Eclipse BPMN2 Modeler](https://www.eclipse.org/bpmn2-modeler/)。

有一些可用的[教程](https://wiki.eclipse.org/BPMN2-Modeler/DeveloperTutorials)（例如扩展[运行时](https://wiki.eclipse.org/BPMN2-Modeler/DeveloperTutorials/ExtendingRuntime)和创建[自定义任务](https://wiki.eclipse.org/BPMN2-Modeler/DeveloperTutorials/CreateCustomTask)）。

# android - Android Spinner 在运行时更大

> ID：11431512
> 
> 赞同：0
> 
> 时间：2012-07-11T11:19:13.327
> 
> 标签：android, android-spinner

大家好，我是 android 新手，为什么我的微调器在**运行时**比设计时大？我该如何解决这个问题提前谢谢....

这是屏幕截图![在此处输入图像描述](../Images/82cd76b4b17cb15eee715f407b8c7633.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:23:20.007

```
ArrayAdapter NoCoreAdapter =  new ArrayAdapter(this,android.R.layout.simple_spinner_item,  month);
       NoCoreAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

     mon_spinner.setAdapter(NoCoreAdapter); 
```

请尝试此编码。它对我来说效果更好，它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:23:48.947

你可以设置高度

```
android:layout_height="40dp" 
```

或者

```
android:layout_height="20dp" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:29:35.180

> 对于 Spinner 或任何需要恒定大小的东西意味着您需要根据您的要求将 android:layout_width 和 android:layout_height 设置为常量。

```
android:layout_width  = "U r required size dp"

android:layout_height = "U r required size dp" 
```

# python - Python - 在列表中查找包含数字的项目

> ID：11431513
> 
> 赞同：0
> 
> 时间：2012-07-11T11:19:18.070
> 
> 标签：python, regex, list

```
some_list = ['Name','Surname','R500']

some_list = ['Name','Surname','500'] 
```

如果获取列表中包含数字的项目的索引，在这两种情况下我都应该返回 index = 2

我在看类似的东西：

```
some_list.index(r'%r' % '\d+') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:21:54.217

您需要遍历元素：

```
for i, x in enumerate(my_list):
    if re.search(r"\d", x):
        print i 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T11:23:41.957

如果您只查找包含数字的第一项，则此方法无需正则表达式即可工作，`-1`如果没有包含数字的元素，则返回（可以更改为您想要的任何内容）：

```
next((i for i,n in enumerate(some_list) if any(c.isdigit() for c in n)), -1) 
```

# php - 如何使我的网站成为多租户

> ID：11431517
> 
> 赞同：0
> 
> 时间：2012-07-11T11:19:33.453
> 
> 标签：php, html, codeigniter, multi-tenant

我已经在 php 中构建了一个帮助台系统，并且我有 3 个不同的站点需要该帮助台系统，但我希望我的帮助台系统能够为 3 个站点提供多租户。而且我想要的是我有一个超级管理员可以控制所有三个站点和三个 3 不同的管理员来控制他们自己的站点。如何做到这一点.. 我搜索了很多，我发现 wordpress 有多租户设施，但不明白 wordpress 是如何做到这一点的。引导我朝这个方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:26:54.843

我不知道word press之类的。我想你为什么不在第四个站点托管这个帮助台并在用户需要帮助台时重定向所有三个站点？

# json - 无法从给定格式检索 json 数据

> ID：11431518
> 
> 赞同：0
> 
> 时间：2012-07-11T11:19:33.687
> 
> 标签：json, jsonp

这是我的 json 格式

```
({"message":{"success":true,"result":[{"lead_no":"LEA13","lastname":"Developer","firstname":"PHP","company":"Dummies","email":"nandhajj@gmail.com","id":"10x132"},{"lead_no":"LEA14","lastname":"Venu","firstname":"Yatagiri","company":"Rsalesarm","email":"veve@jajs.com","id":"10x133"},{"lead_no":"LEA4","lastname":"Jones","firstname":"Barbara","company":"Vtigercrm inc","email":"barbara_jones@company.com","id":"10x35"},{"lead_no":"LEA1","lastname":"Smith","firstname":"Mary","company":"Vtiger","email":"mary_smith@company.com","id":"10x32"}]}}) 
```

我正在尝试使用以下代码段检索整个 json 结果值

```
if (xmlHttp.readyState==4)
    {
        alert(xmlHttp.status);
        if(xmlHttp.status==200)
        {

        alert("hi");
        var jsondata=eval("("+xmlHttp.responseText+")") //retrieve result as an JavaScript object
        jsonOutput=jsondata.result;
        alert(jsonOutput);

        InitializeLeadStorage()

        }
    } 
```

my`alert (hi )`已显示，但`alert(jsonOutput);`未定义，如果您发现任何错误，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:25:58.417

```
jsonOutput = jsondata.message.result; 
```

`result`继续存在`message`- 它不是 JSON 中的顶级项目。有了这样的东西，`console.log()`JSON，你可以检查你想要的位的路径。

还

*   你的变量是全局的
*   有更好的方法来解析你的 JSON。如果您不关心旧的 IE，您可以使用 ECMA5 `JSON.parse()`，否则使用 jQuery 或其他第三方实用程序

# c# - 更改图像格式时降低图像质量

> ID：11431523
> 
> 赞同：1
> 
> 时间：2012-07-11T11:19:57.477
> 
> 标签：c#, image-processing, image-formats

我正在努力将所有图像格式更改为 .gif 格式，但在更改为新格式后它的质量会下降。我使用以下代码更改格式。

```
String paths = HttpContext.Current.Request.PhysicalApplicationPath + "DesktopModules\\DNAiusParallelSlider\\Images\\"+ModuleId.ToString()+"\\";
if (FileUpload2.HasFile)
{
    string extension = Path.GetExtension(FileUpload2.PostedFile.FileName);
    FileUpload2.SaveAs(paths + "waves" + extension);
    System.Drawing.Image image1 = System.Drawing.Image.FromFile(@paths + "\\waves" + extension);
    System.Drawing.Image img = System.Drawing.Image.FromFile(@paths + "\\waves" + extension);
    if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Jpeg))
    {
        image1.Save(@paths + "\\waves.gif", System.Drawing.Imaging.ImageFormat.Gif);
    }
    if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Bmp))
    {
        image1.Save(@paths + "\\waves.gif", System.Drawing.Imaging.ImageFormat.Gif);
    }
    if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Png))
    {
        image1.Save(@paths + "\\waves.gif", System.Drawing.Imaging.ImageFormat.Gif);
    }
    if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Tiff))
    {
        image1.Save(@paths + "\\waves.gif", System.Drawing.Imaging.ImageFormat.Gif);
    }
    if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Emf))
    {
        image1.Save(@paths + "\\waves.gif", System.Drawing.Imaging.ImageFormat.Gif);
    }
    if (img.RawFormat.Equals(System.Drawing.Imaging.ImageFormat.Wmf))
    {
        image1.Save(@paths + "\\waves.gif", System.Drawing.Imaging.ImageFormat.Gif);
    }
    // Save the image in PNG format.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:41:34.320

我认为转换为 gif 时不可避免地会丢失质量，尤其是从

JPEG和PNG。这是因为 Gif 是 8 位格式，这意味着该格式支持的最大颜色数为 256。

因此，由于近似值，您可能会失去颜色差异的精细阴影。

GIF 适用于只有几种不同颜色的图像，例如线条图和简单的卡通。

如果你仍然怀疑你的 c# 代码，你可以去[这个在线图像转换器](http://image.online-convert.com/convert-to-gif)检查质量。

# javascript - 未显示锁定列的网格

> ID：11431524
> 
> 赞同：0
> 
> 时间：2012-07-11T11:19:57.997
> 
> 标签：javascript, extjs, extjs4.1

我正在尝试在 Web 应用程序中插入带有锁定列的数据网格。

如果我显示没有锁定列的网格，一切运行正常。当我锁定一列时，会创建网格，但它非常小（只是一个小正方形，使其基本上不可见）。

为什么会发生这种情况，我该如何解决？

这是我所拥有的：

```
for (var i = 0; i < this.fields.length; i++) {
    var currentField = this.fields[i];
    fields.push(currentField.columnName);
    columns.push({
        header: currentField.name,
        dataIndex: currentField.columnName,
        hidden: i >= 4,
        locked: i == 1
    });
}
Ext.create('Ext.data.Store', {
    storeId: 'resultsStore',
    fields: fields,
    data: results
});
var grid = Ext.create('Ext.grid.Panel', {
    store: "resultsStore",
    columns: columns,
    title: 'Results',
    renderTo: "actualResultsContainer",
    height: 250,
    width: 500,
    enableLocking: true,
}); 
```

**编辑**如果我尝试重新创建所有内容（在渲染后重复上面的所有操作），则会创建网格，并且从这一点开始，它运行得很好。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:48:31.500

它应该按照您编写的方式工作。检查`div`您正在渲染的网格是否及时创建。

# visual-c++ - 向列表框发送消息

> ID：11431526
> 
> 赞同：1
> 
> 时间：2012-07-11T11:20:01.673
> 
> 标签：visual-c++, mfc

我正在尝试将一些字符串添加到列表框。这是否可以从函数发送消息以将字符串添加到列表框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T05:49:37.490

我得到了正确的代码。就是这样......

```
LPTSTR  lpBuffer = m_WindowTitle.GetBuffer( );
HWND listHWnd = ::GetDlgItem(AfxGetMainWnd()->m_hWnd, IDC_LIST1);
SendMessage(listHWnd, LB_ADDSTRING, 0, (LPARAM)lpBuffer);
m_WindowTitle.ReleaseBuffer ( ); 
```

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:30:54.867

您可以为列表框创建一个成员变量并说`m_ctrlListBox.AddString`或

```
CListBox *pMyList = (CListBox *) GetDlgItem(IDC_LIST1);
pMyList->AddString("My String"); 
```

如果你想发送消息，那么你可以试试这些

```
SendMessage(MAKEINTRESOURCE(IDC_LIST1), LB_INSERTSTRING, Index, (LPARAM)lpBuffer);

SendMessage(hWnd, LB_ADDSTRING, NULL, (LPARAM)lpBuffer); 
```

**例子：**

```
 CString myString("Hi");
    LPTSTR  lpBuffer = myString.GetBuffer(myString.GetLength());

    CWnd* cw= GetDlgItem(IDC_LIST1);
    ::SendMessage(cw->GetSafeHwnd(), LB_INSERTSTRING, 0, (LPARAM)lpBuffer);
    myString.ReleaseBuffer ( ); 
```

# haskell - 如何用向量空间库（haskell）区分积分

> ID：11431530
> 
> 赞同：5
> 
> 时间：2012-07-11T11:20:12.657
> 
> 标签：haskell

在将[向量空间](http://hackage.haskell.org/package/vector-space-0.8.1 "向量空间")包用于导数塔时（请参阅[导数塔](https://stackoverflow.com/questions/9313994/derivative-towers-and-how-to-use-the-vector-space-package-haskell "衍生塔")），我遇到了对积分进行微分的需要。从数学上很清楚如何实现这一点：

```
f(x) = int g(y) dy from 0 to x 
```

有一个功能

```
g : R -> R 
```

例如。

关于 x 的导数是：

```
f'(x) = g(x) 
```

我试图通过首先定义一个“集成”类来获得这种行为

```
class Integration a b where
--standard integration function
integrate :: (a -> b) -> a -> a -> b 
```

一个基本的例子是

```
instance  Integration Double Double where
  integrate f a b = fst $ integrateQAGS prec 1000 f a b 
```

`integrateQAGS`来自[hmatrix](http://hackage.haskell.org/package/hmatrix-0.14.0.1 "hmatrix") _

问题在于代表衍生品塔的值 b：

```
instance Integration Double (Double :> (NC.T Double)) where
  integrate = integrateD 
```

`NC.T`来自 Numeric.Complex (numeric-prelude)。该函数`integrateD`定义如下（但错误）：

```
integrateD ::(Integration a b, HasTrie (Basis a), HasBasis a, AdditiveGroup b) =>  (a -> a :> b) -> a -> a -> (a :> b)
integrateD f l u = D (integrate (powVal . f) l u) (derivative $ f u) 
```

该函数不返回我想要的，它导出被积函数，但不是积分。问题是，我需要一个返回的线性映射`f u`。`a :> b`定义如下：

```
data a :> b = D { powVal :: b, derivative :: a :-* (a :> b) } 
```

不知道怎么定义`derivative`。任何帮助将不胜感激，谢谢

编辑：

我忘了提供实例`Integration Double (NC.T Double)`：

```
instance  Integration Double (NC.T Double) where
  integrate f a b = bc $ (\g -> integrate g a b) <$> [NC.real . f, NC.imag . f]
      where bc (x:y:[]) = x NC.+: y 
```

我可以举一个例子来说明我的意思：假设我有一个函数

```
f(x) = exp(2*x)*sin(x)

>let f = \x -> (Prelude.exp ((pureD 2.0) AR.* (idD x))) * (sin (idD x)) :: Double :> Double 
```

(AR.*) 表示从 Algebra.Ring (numeric-prelude) 乘法

我可以轻松地将此功能与上述功能集成`integrateD`：

```
>integrateD f 0 1 :: Double :> Double
D 1.888605715258933 ... 
```

当我看一下 f 的导数时：

```
f'(x) = 2*exp(2*x)*sin(x)+exp(2*x)*cos(x) 
```

并对此进行评估`0`，`pi/2`我得到`1`了一些价值：

```
> derivAtBasis (f 0.0) ()
D 1.0 ...

> derivAtBasis (f (pi AF./ 2)) ()
D 46.281385265558534 ... 
```

现在，在推导积分时，我得到的是函数的推导，而`f`不是它在上限的值

```
> derivAtBasis (integrate f 0 (pi AF./ 2)) ()
D 46.281385265558534 ... 
```

但我期望：

```
> f (pi AF./ 2)
D 23.140692632779267 ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:53:20.350

如果您只想对涉及数字积分的功能进行 AD，而 AD 系统*本身*不知道积分，它应该“正常工作”。这是一个例子。（这个集成例程非常棘手，因此得名。）

```
import Numeric.AD
import Data.Complex

intIcky :: (Integral a, Fractional b) => a -> (b -> b) -> b -> b -> b
intIcky n f a b = c/n' * sum [f (a+fromIntegral i*c/(n'-1)) | i<-[0..n-1]]
  where n' = fromIntegral n
        c = b-a

sinIcky t = intIcky 1000 cos 0 t
cosIcky t = diff sinIcky t

test1 = map sinIcky [0,pi/2..2*pi::Float]
 -- [0.0,0.9997853,-4.4734867e-7,-0.9966421,6.282018e-3]
test2 = map sin [0,pi/2..2*pi::Float]
 -- [0.0,1.0,-8.742278e-8,-1.0,-3.019916e-7]
test3 = map cosIcky [0,pi/2..2*pi::Float]
 -- [1.0,-2.8568506e-4,-0.998999,2.857402e-3,0.999997]
test4 = map cos [0,pi/2..2*pi::Float]
 -- [1.0,-4.371139e-8,-1.0,1.1924881e-8,1.0]
test5 = diffs sinIcky (2*pi::Float)
 -- [6.282019e-3,0.99999696,-3.143549e-3,-1.0004976,3.1454563e-3,1.0014982,-3.1479746e-3,...]
test6 = diffs sinIcky (2*pi::Complex Float)
 -- [6.282019e-3 :+ 0.0,0.99999696 :+ 0.0,(-3.143549e-3) :+ 0.0,(-1.0004976) :+ 0.0,...] 
```

唯一需要注意的是，数值积分例程需要与 AD 很好地配合使用，并且还需要接受复杂的参数。更天真的东西，比如

```
intIcky' dx f x0 x1 = dx * sum [f x|x<-[x0,x0+dx..x1]] 
```

在积分的上限中是分段常数，要求积分的限制是 Enum 并且因此是非复数的，并且由于这个原因，还经常评估给定范围之外的被积函数：

```
Prelude> last [0..9.5]
10.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:32:19.133

'hmatrix' 与 Double 密切相关。您不能将其函数与其他数字数据类型一起使用，例如“向量空间”或“广告”提供的那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:25:04.790

我终于找到了我的问题的解决方案。解决方案的关键是`>-<`向量空间包中的函数，它代表链式法则。

所以，我定义了一个`integrateD'`这样的函数：

```
integrateD' :: (Integration a b, HasTrie (Basis a), HasBasis a, AdditiveGroup b , b ~ Scalar b, VectorSpace b) => (a -> a :> b) -> a -> a -> (a:>b) -> (a :> b)
integrateD' f l u d_one =  ((\_ -> integrate (powVal . f) l  (u)) >-< (\_ ->  f u)) (d_one) 
```

这`d_one`意味着派生变量及其导数必须为1。使用此函数，我现在可以创建一些实例，例如

```
instance Integration Double (Double :> Double) where
integrate f l u = integrateD' f l u (idD 1) 
```

和

```
instance Integration ( Double) (Double :> (NC.T Double)) where
integrate f l u = liftD2 (NC.+:) (integrateD' (\x -> NC.real <$>> f x) l u (idD 1.0 :: Double :> Double)) (integrateD' (\x -> NC.imag <$>> f x) l u (idD 1.0 :: Double :> Double)) 
```

不幸的是，我不能使用`integrateD`开箱即用的复杂值，我必须使用`liftD2`. 原因似乎是`idD`功能，不知道有没有更优雅的解决方案。

当我查看问题中的示例时，我现在得到了我想要的解决方案：

```
*Main> derivAtBasis (integrateD' f 0 (pi AF./ 2) (idD 1.0 :: Double :> Double )) ()
D 23.140692632779267 ... 
```

或通过使用实例：

```
*Main> derivAtBasis (integrate f 0 (pi AF./ 2)) ()
D 23.140692632779267 ... 
```

# c++ - C++ 优化，使用 > 而不是 <=

> ID：11431532
> 
> 赞同：2
> 
> 时间：2012-07-11T11:20:25.013
> 
> 标签：c++, optimization

检查 '<=' 而不是 '>' 是否更昂贵？

第一个检查 < 和 ==，但 '>' 只检查一次。

或者也许编译器对此进行了优化？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T11:21:53.170

这取决于您要比较的内容，但对于内置类型，两者通常都只是一条机器指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T11:22:36.043

很少有任何明显的差异。如果你正在考虑这种优化，我敢打赌，你没有优化正确的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T11:22:55.360

对于非内置类型，您可以根据需要重载两个运算符：

```
class Foo
{
public:    
    bool operator<=(const Foo &other) const
    {

    }

    bool operator<(const Foo &other) const
    {

    }

}; 
```

因此，如果比较运算符是您的应用程序的瓶颈，您可以优化您的运算符并且`<=`可以以不同的方式计算，然后调用`<`和`==`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:23:50.330

不，两者的成本相同。假设您使用的是已知的标准编译器而不是花哨的编译器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:44:13.013

No.`<=`本质上`>`与额外的 NOT 相同，并且与 NOT`>=`相同`<`。（如果有的话，哪些有额外的 NOT 我不确定，但它们在硬件级别上基本上都是相同的。）

# forms - 如何在 Symfony2 中自定义主窗体 ID

> ID：11431535
> 
> 赞同：0
> 
> 时间：2012-07-11T11:20:35.700
> 
> 标签：forms, templates, symfony-2.1

我在设置表单包装器自定义 ID 时遇到问题。$options['attr']['id'] 似乎不起作用。传递给 createForm() 方法的所有选项似乎都被忽略了......我正在研究 Symfony 2.1 beta 1

表格设置：

```
$login_form = $this->createForm(new LoginType(), $user, array(
                    'attr' => array(
                        'id' => 'login-form'        
                    )
                )); 
```

传递给视图：

```
{{ form_widget(login_form) }} 
```

但它产生：

```
<div id="login">
    <div>
        <label class="required">Mobile</label>
        <input type="text" maxlength="255" required="required" name="login[mobile]" id="login_mobile">
    </div>
    <div>
        <label class="required">Password</label>
        <input type="text" maxlength="255" required="required" name="login[password]" id="login_password">
    </div>
</div> 
```

所以表单包装器有 id="login"，而不是 "login-form"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:39:53.123

这怎么能`{{ form_widget(login_form) }}`像你说的那样产生上面的代码？

```
<div id="login">
    <div>
        <label class="required">Mobile</label>
        <input type="text" maxlength="255" required="required" name="login[mobile]" id="login_mobile">
    </div>
    <div>
        <label class="required">Password</label>
        <input type="text" maxlength="255" required="required" name="login[password]" id="login_password">
    </div>
</div> 
```

这 `{{ form_widget(login_form) }}`应该只呈现：

```
 <div>
        <label class="required">Mobile</label>
        <input type="text" maxlength="255" required="required" name="login[mobile]" id="login_mobile">
    </div>
    <div>
        <label class="required">Password</label>
        <input type="text" maxlength="255" required="required" name="login[password]" id="login_password"> 
```

你代码中 id="login" 的那个div对我来说没有意义，一定是你手动添加了那个div，所以你可以自己更改id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:07:03.507

我认为可以在方法中以 Class 的形式完成：

```
public function getName()
{
    return 'login-form';
} 
```

问候， 马克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T12:57:32.807

两年后:) 你可以重写 AbstractType 的 setDefaultOptions 方法。在 Symfony 2.5 中测试

```
 class CommentType extends AbstractType
    {
        public function buildForm(FormBuilderInterface $builder, array $options)
        {

              $builder
                    ->setMethod('POST')
                    ->add('text', 'textarea', array('label' => ' ',
                        'attr' => array('class' => 'form-control',
                            'placeholder' => 'Your comment')
                    ))
                      ->add('folder_id', 'hidden', array('label' => ' ',
                        'attr' => array('class' => 'form-control',
                            'placeholder' => 'Your comment')
                    ))
                      ->add('link_id', 'hidden', array('label' => ' ',
                        'attr' => array('class' => 'form-control',
                            'placeholder' => 'Your comment')
                    ))
                    ->add('save', 'button', array('label' => 'Save',
                        'attr' => array('class' => 'btn-lg btn-primary')
                            )
                    );
        }

        public function setDefaultOptions(OptionsResolverInterface $resolver)
        {
            $resolver->setDefaults(array(
                'data_class' => 'Linkboard\FrontBundle\Document\comment',
                'attr' => array('id' => 'comment-form')
            ));
        }

        public function getName()
        {
            return 'comment';
        }
    } 
```

生成类似的东西；

```
 <form name="comment" method="post" action="" id="comment-form">
    .....
    </form> 
```

# php - 表单执行可以发生两次吗？

> ID：11431539
> 
> 赞同：2
> 
> 时间：2012-07-11T11:20:41.673
> 
> 标签：php, mysql, codeigniter, post, browser

我显然在某个地方错过了一些东西。

在某种程度上，客户在 11 秒的延迟（检查时间）内成功进行了两次预订。我的第一个想法是用户可能已经完成了预订，然后返回浏览器并再次完成了预订。然而，这是不可能的，因为我至少有 2 个验证，我知道这些验证会阻止这种行为。

留给我的唯一结论是，如果客户尝试提交预订，我们的网络服务在 11 秒内不知何故冻结，客户中止请求并再次提交，因此允许这两个预订同时发生。

除此之外，我不知道是什么原因造成的。MySQL插入延迟可能吗？

所以基本上我最想知道的是；
**什么会导致表单提交并执行两次，而第二次绕过所有必需的验证？**

## 我的表单的当前工作流程

用户在输入字段中提交数据，然后提交它们。我的系统验证所有这些输入并检查两个唯一代码，以确保它没有通过 MySQL 调用两次使用。它还确保可用座位数等于或大于预订的座位数。

在这种情况下，使用了相同的代码并且座位超出了允许的限制。

除非验证 POST，否则基本上不会将预订插入 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:23:45.477

用户可以刷新处理表单的页面，从而发送两次 POST 信息？您的验证在哪里，如果它只是停止显示表单，而不是被处理，那么这可能是一种可能性吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:28:38.977

> 我的系统验证所有这些输入并检查两个唯一代码，以确保它没有通过 MySQL 调用两次使用。

听起来你有一个并发问题。您在进行检查/插入时是否锁定表？

理论上，如果两个执行同时发生，它们都将具有唯一的 ID 并且在席位限制内，因此两个插入都将被允许继续（并因此成功）。

这是我在想什么的图解方式：

```
POST 1                  POST 2
Unique ID: 1234         Unique ID: 1234
Check if ID is present  Check if ID is present
ID is not present       ID is not present
Check if seats left     Check if seats left
Make insert             Make insert 
```

`POST 2`在表解锁之前，不应允许第二个 make开始它的唯一 ID 检查，即`POST 1`完成它的插入。

# zend-db - 在 Zend Framework 2 中处理 MN 关系

> ID：11431542
> 
> 赞同：4
> 
> 时间：2012-07-11T11:21:10.253
> 
> 标签：zend-db, zend-framework2

使用 beta4 和最新的 beta5，DB-Feature-Implementation 似乎已经完成了。有几个教程如何使用 TableGateway 模式处理单个数据库，但似乎没有用于处理 MN-Relationships 的教程。

在 ZF1 中，我们`findDependantRowset()`使用的 TableGateway 有点脏，因为这只是对数据库的第二次查询，而这并不总是必要的。

在 ZF2 中，我希望有一种方法可以将好的连接映射到指定的模型，但我在代码中找不到任何东西。也许我是瞎子，也许真的没有这样的东西。

你们有没有人设法在 ZF2 中同时处理连接和模型？如果是这样，请指导我如何操作，提示我文档的具体要点，或将一些博文链接到做过的人。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T08:10:22.080

如果您需要通用解决方案，显而易见的解决方案是使用 Doctrine ORM 或 Propel。

如果您想使用 Zend\Db，那么在您的具体表网关类中，您应该编写一个从链接表中检索正确行的特定方法。这样，您可以确保 SQL 针对您需要的查询进行了优化。

# c# - 在 LINQ 中使用 PropertyInfo 对象查询集合

> ID：11431546
> 
> 赞同：5
> 
> 时间：2012-07-11T11:21:25.953
> 
> 标签：c#, linq, reflection

我有一个带有这样签名的方法

```
void RefreshMethod<T>(IEnumerable<T> lst, string propertyName) where T:class
{
   Type type = typeof(T);
   PropertyInfo property = type.GetProperties().Single(u => u.Name == primaryKeyProperty);
  //query goes here
} 
```

现在我想查询该集合以获取其所有值

> 属性名称 < 0

在一个简单的场景中，它会像这样简单

```
lst.where(u=>u.ID<0) 
```

但这里我没有那个 ID 属性，但有相应的“PropertyInfo”对象。

我应该如何实现这一点。

好心指导

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T11:25:23.563

您可以使用 查找属性值`property.GetValue(anObjectOfTypeT, null)`。

所以像：

```
var refreshedList =  lst.Where(l => ((int)(property.GetValue(l, null)) < 0).ToList(); 
```

这假设该属性将始终为 int 类型。

# android - 尝试访问库项目中的视图时出现 ClassNotFoundException

> ID：11431552
> 
> 赞同：1
> 
> 时间：2012-07-11T11:21:55.353
> 
> 标签：android, classnotfoundexception, android-library

我有一个要在其他项目中导入的库项目。当我尝试编译它时，控制台会这样说（红色）：

```
[2012-07-11 13:12:53 - Library] Could not find Library.apk! 
```

这个库包含一些自定义视图，当我尝试访问其中一个时，它给了我一个`Java.lang.RuntimeException`由 a 引起的`android.view.InflateException`，同时是由`java.lang.ClassNotFoundException`库上的 View 类上的 a 引起的。

有谁知道如何解决这个问题？

这是 LogCat 输出以防万一。

```
07-11 13:12:53.899: E/AndroidRuntime(16995): FATAL EXCEPTION: main
07-11 13:12:53.899: E/AndroidRuntime(16995): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cidaut.fragment.manager/com.cidaut.fragment.manager.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class com.cidaut.viewpagerlibrary.TabPageIndicator
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2079)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.os.Looper.loop(Looper.java:137)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.ActivityThread.main(ActivityThread.java:4575)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at java.lang.reflect.Method.invokeNative(Native Method)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at java.lang.reflect.Method.invoke(Method.java:511)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at dalvik.system.NativeStart.main(Native Method)
07-11 13:12:53.899: E/AndroidRuntime(16995): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class com.cidaut.viewpagerlibrary.TabPageIndicator
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.Activity.setContentView(Activity.java:1835)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at com.cidaut.fragment.manager.MainActivity.onCreate(MainActivity.java:17)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.Activity.performCreate(Activity.java:4465)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
07-11 13:12:53.899: E/AndroidRuntime(16995):    ... 11 more
07-11 13:12:53.899: E/AndroidRuntime(16995): Caused by: java.lang.ClassNotFoundException: com.cidaut.viewpagerlibrary.TabPageIndicator
07-11 13:12:53.899: E/AndroidRuntime(16995):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
07-11 13:12:53.899: E/AndroidRuntime(16995):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
07-11 13:12:53.899: E/AndroidRuntime(16995):    ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:31:10.813

我有同样的问题，现在通过给定的操作很清楚。

请尝试转到您的项目构建路径->订单并导出。选择您的库文件并按下按钮向上，向下。获取库文件会消除一些混乱。

# f# - F# 中的二维动态规划

> ID：11431553
> 
> 赞同：1
> 
> 时间：2012-07-11T11:21:59.787
> 
> 标签：f#, dynamic-programming

我需要在 F# 中实现一个简单的 2D 动态规划算法。对于简单的一维案例 Seq.unfold 似乎是要走的路，请参阅例如[https://stackoverflow.com/a/7986083/5363](https://stackoverflow.com/a/7986083/5363)

是否有一种很好（且有效）的方法可以在 2D 中实现类似的结果，例如以函数样式重写以下伪代码：

```
 let alpha = 
    let result = Array2D.zeroCreate N T
    for i in 0 .. N-1 do
      result.[0, i] <- (initialPi i) * (b i observations.[0])
    for t in 1 .. T-1 do
      for i in 0 .. N-1 do
        let s = row t-1 result |> Seq.mapi (fun j alpha_t_j -> alpha_t_j * initialA.[i, j]) () |> Seq.sum
        result.[t, i] <- s * (b i observations.[t])
    result 
```

假设所有缺少的函数和数组都在上面定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:27:21.080

编辑：实际阅读代码，这至少是功能性的，确实有一个稍微不同的返回类型，尽管你可以通过转换来避免这种情况

```
let alpha = 
    let rec build prev idx max = 
        match idx with
        |0 -> 
            let r = (Array.init N (fun i -> (initialPi y) * (b i observations.[0]))
            r:: (build r 1 max)
        |t when t=max -> []
        |_ ->  
             let s = prev |> Seq.mapi (fun j alpha_t_j -> alpha_t_j * initialA.[i, j]) () |> Seq.sum
             let r = Array.init N (fun i -> s * (b i observations.[t]))
         r:: build r (idx+1 max)
    build [] 0 T |> List.toArray 
```

# iphone - 从类中解析未声明的标识符

> ID：11431556
> 
> 赞同：0
> 
> 时间：2012-07-11T11:22:24.160
> 
> 标签：iphone, xcode

我有一个类 ArrayStates，它填充了美国各州名称的数组。

```
#import "ArrayStates.h"
@implementation ArrayStates
@synthesize listOfStates;

NSMutableArray *listOfStates;
- (void)viewDidLoad {
    //---initialize the array---
    listOfStates = [[NSMutableArray alloc] init];
    //---add items---
    [listOfStates addObject:@"ALABAMA"];

    [listOfStates addObject:@"WYOMING"];
    // [super viewDidLoad];
} 
```

如果在正文程序 (.h) 我

```
#import "ArrayStates.h" 
```

当我尝试引用“listOfStates”时，为什么会得到“未声明的标识符”

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [listOfStates count];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:49:24.507

在.h文件中声明你的数组为全局变量，也可以看[这里](http://maniacdev.com/2009/07/global-variables-in-iphone-objective-c/)，请了解[全局变量](http://en.wikipedia.org/wiki/Global_variable)和[局部变量](http://en.wikipedia.org/wiki/Local_variable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:52:44.910

将其写入您的 .m 文件中，它将起作用。从具有属性的 .h 文件 alonf 中删除 listOfStates 的实例。

```
#import "ArrayStates.h"

 @interface ArrayStates() {
NSMutableArray *listOfStates;
}

@implementation ArrayStates

- (void)viewDidLoad {
//---initialize the array---
listOfStates = [[NSMutableArray alloc] init];
//---add items---
[listOfStates addObject:@"ALABAMA"];
[listOfStates addObject:@"WYOMING"];
[super viewDidLoad];
} 
```

# php - 由于 .htaccess 无法访问 swf 文件

> ID：11431560
> 
> 赞同：0
> 
> 时间：2012-07-11T11:22:39.493
> 
> 标签：php, .htaccess

我有一个正在运行 MVC 模式的网站，现在我正在尝试使用带有 JavaScript 的 swf 文件来获取 supercookies，但服务器不提供 swf 文件。在我看来，这是因为`.htaccess`文件。我已将其更改为：

```
php_flag magic_quotes_gpc Off

Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://%{HTTP_HOST}%{REQUEST_URI}/ [L,R=301]

RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d

RewriteRule ^.*$ ./index.php [NC,QSA]

AddType application/x-shockwave-flash swf 
```

但是 swf 文件仍然无法访问。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:48:49.203

您需要为重写条件添加一个例外，以允许直接访问 .swf 文件以及可能的 swf 文件所在的文件夹

我在简单的 MVC 站点上使用了以下内容，以允许直接访问我不想由 MVC 引擎处理的文件或文件夹：

```
RewriteCond $1 !^(controller\.php|script\.php|images|css|js|forum|pdfs|xmls|pdf|robots|.*.swf)
RewriteRule ^(.*)$ /controller.php/$1 [L] 
```

我认为对你来说，最后一个重写规则应该有这样的条件：

```
RewriteCond $1 !^(.*.swf)
RewriteRule ^(.*)$ ./index.php [NC,QSA] 
```

您可能需要阅读 mod_rewrite 文档。 [http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html) 或查看一些关于 mod_rewrite 的教程 [http://www.sitepoint.com/guide-url-rewriting/](http://www.sitepoint.com/guide-url-rewriting/)

# android - Android Layout xml文件交换行，并改变自己？

> ID：11431561
> 
> 赞同：0
> 
> 时间：2012-07-11T11:22:40.820
> 
> 标签：android, eclipse

我有 Layout xml 文件，当我编辑它时

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/image1"
        android:text="llllllllllllllllllll"
        android:textColor="@android:color/black" /> 
```

但它的变化就像，![在此处输入图像描述](../Images/df6e0a623431dda727056ad10771bd01.png)

它发生在我编辑 xml 文件时。关闭 xml 文件后，我需要`re-open and re-open.`有什么解决方案吗？

我已经`restart my eclipse`但无法解决问题。并且重新启动 eclipse 不起作用。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:31:26.667

见[https://bugs.eclipse.org/bugs/show_bug.cgi?id=375421](https://bugs.eclipse.org/bugs/show_bug.cgi?id=375421)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:33:25.817

当您编辑相对布局 xml 文件时会发生此问题。为避免这种情况，您可以转义此组件或关闭 xml 文件然后重新打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:27:13.207

这是 Eclipse 编辑器的一个问题，当通过在图形布局中拖放来完成更改时，我也经常遇到这个问题。我遵循的解决方案是关闭 xml 并重新打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:32:19.190

这是Eclipse的一个**错误**

你可以在[这里找到一个错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=375421)

也面临同样的问题。有时也需要重新启动eclipse。

# javascript - 查询一个css类的属性值，即使没有使用

> ID：11431562
> 
> 赞同：3
> 
> 时间：2012-07-11T11:22:44.310
> 
> 标签：javascript, css

我有一种情况，我想知道定义为 'foo' 的 CSS 类的 'width' 属性的值（例如： ".foo { width:200px}" ）。

但是，在 dom 中可能实际上不存在（还）具有所述类的元素。

我希望能够从 Javascript 访问这个值（计算其他 div 的百分比以设置复杂的布局）。

我很确定答案是这可能是不可能的，但我认为这将是一个非常有用的功能，并且可以在 CSS 中有效地定义设计/布局属性。

有没有办法做到这一点？（没有像在屏幕外渲染 div，然后查询它们的类属性这样的技巧）。

也许它可以作为一个标准的浏览器 JavaScript 库来实现——可能是一个 document.styles 对象？因此，我的属性可以从 javascript 中找到：“document.styles.foo.width” - 如何向 w3c 提交提案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:25:53.013

一种解决方案是创建一个元素而不将其添加到文档中。

但是有一个更简洁的解决方案，就像在 javascript 中一样，您可以轻松地迭代样式表及其内容：

```
for (var i=0; i<document.styleSheets.length; i++) {
    var styleSheet = document.styleSheets[i];
    var cssRules = styleSheet.rules; // chrome, IE
    if (!cssRules) cssRules = styleSheet.cssRules; // firefox
    for (var ir=cssRules.length; ir-->0;) {
        var rule = this.cssRules[ir];
        if (rule.selectorText==".foo") {
              var width = parseInt(rule.style.getPropertyValue('width'), 10);
              // do what you want

        }
    }
} 
```

当您在一个尚未解析的结构上进行迭代时，这是一个有效的解决方案。

# android - GUI 冻结定期从服务返回数据到活动

> ID：11431567
> 
> 赞同：0
> 
> 时间：2012-07-11T11:22:49.260
> 
> 标签：android, android-service, android-2.3-gingerbread

我`Service`在 android 中创建了一个可以定期向活动发送数据的应用程序。

到目前为止，我已经创建了一个我创建的`binds`活动`service`。但是当我将消息发送回之前绑定的活动时，我的活动会冻结。我已经根据`MessengerService`示例中的示例创建了这个示例`API Demo`。

以下是在服务类中编写的代码，在其中我创建了一个`IncomingHandler`

```
case MSG_SET_VALUE:

mValue = msg.arg1;

for (int i=mClients.size()-1; i>=0; i--) {

    final Messenger local = mClients.get(i);
    final int index = i;
    counterThread = new Thread(new Runnable(){
    @Override
    public void run() {
        // TODO Auto-generated method stub
        int j=0;                

        while(true){

            try {
                Thread.sleep(6000);
                local.send(Message.obtain(null,
                    MSG_SET_VALUE, j++, 0));
                Log.d("Thread " , j + "");
            } catch (RemoteException e) {
                // TODO Auto-generated catch block
                 mClients.remove(index);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }           

        }

    }

    });
counterThread.run();

}
break; 
```

因此，当我使用以下代码从活动发送消息时，将触发上述情况。

```
 msg = Message.obtain(null,
                 MyService.MSG_SET_VALUE, this.hashCode(), 0);
         mService.send(msg); 
```

我正在处理活动中的传入消息

```
 class IncomingHandler extends Handler {
         @Override
         public void handleMessage(Message msg) {
             switch (msg.what) {
                 case MyService.MSG_SET_VALUE:

                     System.out.println("DATA" + msg.arg1);
                    //   mCallbackText.setText("Received from service: " + msg.arg1);

                     break;
           }
       }
    } 
```

所以我想知道这是从服务定期获取数据的正确方法还是我在这里遗漏了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:34:55.017

```
counterThread.run(); 
```

这是一个不好的方法。您将调用 start() 以正确运行线程：

```
counterThread.start(); 
```

# sinatra - 在 Debian 上安装 Ruby 1.9.1

> ID：11431569
> 
> 赞同：0
> 
> 时间：2012-07-11T11:22:56.837
> 
> 标签：sinatra, debian, ruby-1.9

目前尝试在另一台机器上运行代码有点噩梦。作为我正在做的实习的一部分，我一直在开发 Sinatra 应用程序。我正在使用 ruby​​1.9.3（通过 RVM）在 Ubuntu 12.04 机器上进行开发。我的主管想在他的 Debian Squeeze 机器（开发服务器）上运行它。我在 Gemfile 中列出了所有必要的 gem，并推送了初始提交。然而，我们似乎无法让它在 Debian 机器上运行。

在我的主管意识到我们需要 Ruby1.9 及更高版本之前，最初安装了 Ruby1.8。Ruby1.9.1-full debian 软件包已安装，但尝试使用 运行 Sinatra 应用程序`ruby1.9.1 application.rb`无济于事。我添加了一些打印语句来调试它，并且 ruby​​ 解释器到达文件的末尾 - 问题是它没有启动 WEBrick。这个完全相同的代码在我的机器上运行没有问题，为什么在 Debian 上会出现这么大的问题？

注意：不建议切换到 RVM。我的主管坚持我们只使用官方包，所以这超出了我的控制范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:52:35.510

我的 Sinatra 应用程序配置有点不同。也就是说，我不使用 运行它们`ruby application.rb`，而是有一个`config.ru`包含 Rack 中间件指令的文件。当我想运行我的应用程序时，我只需运行`rackup`，服务器就会启动。

[Sinatra 自述文件](http://www.sinatrarb.com/intro#Using%20a%20Classic%20Style%20Application%20with%20a%20config.ru)中显示的最小示例布局如下。

一个基本的 Sinatra`application.rb`文件：

```
require 'sinatra'

get '/' do
  'Hello world!'
end 
```

和`config.ru`：

```
require './application'
run Sinatra::Application 
```

我真的不知道这是否或如何改变你的情况，但这是我首先想到的。

* * *

附言

现在我想到了，您可以尝试的另一件事是使用 WEBrick 以外的其他服务器。我想如果你添加

```
gem 'thin' 
```

对你`Gemfile`来说，它应该自动使用 Thin 代替。记得先重新运行`bundle install`。

# node.js - 使用灰尘模板引擎创建超链接

> ID：11431570
> 
> 赞同：0
> 
> 时间：2012-07-11T11:23:02.513
> 
> 标签：node.js, hyperlink, express, dust.js

有人知道我们如何使用dust.js 和node.js 创建超链接吗？

我想在我的网页上创建链接，但简单的超链接不起作用。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:14:33.610

我得到了答案。我们也可以在灰尘中使用简单的标签，就像在 html 中一样创建简单的超链接。

像`<a href="products">Link</a>`

# ruby-on-rails - rake db:structure:dump 上 nil nilclass 的未定义方法“exitstatus”

> ID：11431571
> 
> 赞同：1
> 
> 时间：2012-07-11T11:23:03.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rake

当我第一次尝试在 Rails 中执行 rake db:structure:dump 时。我需要切换到 sql fromat。我明白了：（PostgreSQL 数据库）

```
C:\Sites\care>rake db:structure:dump --trace
Creating scope :search. Overwriting existing method PgSearch::Document.search.
** Invoke db:structure:dump (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:structure:dump
C:/RailsInstaller/Ruby1.9.3/bin/rake: No such file or directory - pg_dump -i -s -x -O -f C:/Sites/care/db/structure.sql  care_development
rake aborted!
undefined method `exitstatus' for nil:NilClass
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/railties/databases.rake:390:in `block (3 levels) in <top (required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
C:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `load'
C:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `<main>'
Tasks: TOP => db:structure:dump 
```

关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:29:25.677

将 pg_dump 添加到 PATH 就可以了。

# objective-c - xml解析运行但没有显示数据

> ID：11431573
> 
> 赞同：-1
> 
> 时间：2012-07-11T11:23:12.997
> 
> 标签：objective-c, xml, cocoa, nsxmlparser

这是我的应用程序的代码。应用程序运行但没有显示数据，您能帮我解决这个问题吗？

在 .h 文件中：

```
@interface MyData : NSObject <NSXMLParserDelegate> {

        NSMutableString *currentElementValue;
        User *user;
        NSMutableArray *users;
    }

    -(MyData *) initXMLParser;
    -(BOOL)parseDocumentWithData:(NSData *)data; 

    @property (nonatomic, retain) User *user;
    @property (nonatomic, retain) NSMutableArray *users; 
```

在 .m 文件中：

```
@implementation MyData
@synthesize user;
@synthesize users;

- (MyData *) initXMLParser {
    [super init];
    // init array of user objects 
    users = [[NSMutableArray alloc] init];
    return self;
}

-(BOOL)parseDocumentWithData:(NSData *)data {
    NSString * filePath = [[NSBundle mainBundle] pathForResource:@"Users" ofType:@"xml"];
    data = [NSData dataWithContentsOfFile:filePath];

    if (data == nil)
        return NO;

    // this is the parsing machine
    NSXMLParser *xmlparser = [[NSXMLParser alloc] initWithData:data];

    // this class will handle the events
    [xmlparser setDelegate:self];
    [xmlparser setShouldResolveExternalEntities:NO];

    // now parse the document
    BOOL ok = [xmlparser parse];
    if (ok == NO)
        NSLog(@"error");
    else
        NSLog(@"OK");

    [xmlparser release];
    return ok;
}

- (void)parser:(NSXMLParser *)parser 
didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:@"user"]) {
        NSLog(@"user element found – create a new instance of User class...");
        user = [[User alloc] init];

    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (!currentElementValue) {
        // init the ad hoc string with the value     
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    } else {
        // append value to the ad hoc string    
        [currentElementValue appendString:string];
    }
    NSLog(@"Processing value for : %@", string);
}  

- (void)parser:(NSXMLParser *)parser 
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName {

    if ([elementName isEqualToString:@"users"]) {
        // We reached the end of the XML document
        return;
    }

    if ([elementName isEqualToString:@"user"]) {

        // object to our user array
        [users addObject:user];
        // release user object
        [user release];
        user = nil;
    } else {

        [user setValue:currentElementValue forKey:elementName];
    }

    [currentElementValue release];
    currentElementValue = nil;
}

@end

/* This is the code of my app . The applications runs but there is no data displayed , can you help me to fix this problem ? */ 
```

这是我的应用程序的代码。应用程序运行但没有显示数据，您能帮我解决这个问题吗？我想在解析时显示数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:19:36.560

好吧，如果您使用的是 NSXML 解析器（objective-c），则需要将解析 xml 元素的数据附加到字符串中。您打算如何显示 xml 文件中的数据。

您可以从此处应用相同的方法：

[技术布法罗 RSS](http://www.technobuffalo.com/software/applications/introduction-to-ios-development-building-an-rss-reader/)

然后将解析器中的值更改为您的元素值。

# mysql - MYSQL：插入错误

> ID：11431575
> 
> 赞同：0
> 
> 时间：2012-07-11T11:23:20.923
> 
> 标签：mysql

MYSQL插入某些类型的文本问题

例如，当我尝试插入此内容时：

```
INSERT INTO `Attacks_key` 
  (`Event_Key` ,`Variable` ,`Value` ,`Impact` ,`Tags`)
    VALUES 
  ('111', 'REQUEST', ' mysql_real_escape ', '222', 'xss, csrf, id, rfe, lfi'); 
```

它插入但是当我尝试插入这个时：

```
INSERT INTO `Attacks_key` 
 (`Event_Key` ,`Variable` ,`Value` ,`Impact` ,`Tags`) 
   VALUES 
 ('111', 'REQUEST', 'mysql_real_escape_string($_POST['username']); ', '222', 'xss, csrf, id, rfe, lfi'); 
```

MYSQL 显示此消息：

#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“用户名”附近使用的正确语法]）；', '222', 'xss, csrf, id, rfe, lfi')' 在第 1 行

这是我的 php 代码

```
$user="root";
$password="*";
$database="*";
mysql_connect(localhost,$user,$password);
@mysql_select_db($database) or die( "Unable to select database");
$sql = "SELECT `Key_id` FROM `Event` ORDER BY `Key_id` DESC LIMIT 1";
$result =mysql_query($sql);
$row = mysql_fetch_assoc($result);
$EventKey= $row['Key_id'];
$query="INSERT INTO `PHPLOGS`.`Attacks_key` (`Event_Key` ,`Variable` ,`Value` ,`Impact` ,`Tags`) VALUES ('$EventKey', '$getname', '$getvalue', '$getimpec', '$gettags');";
mysql_query($query);
mysql_close(); 
```

和输入 'mysql_real_escape_string($_POST['username']); 来自用户

有人可以帮忙吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:28:22.097

尝试

`$query = sprintf("INSERT INTO Attacks_key (Event_Key ,Variable ,Value ,Impact ,Tags) VALUES ('111', 'REQUEST', '%s', '222', 'xss, csrf, id, rfe, lfi');", mysql_real_escape_string($_POST['username']));`

声明的`'`那部分与`'username'`

看看[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:30:56.260

如果您`mysql_real_escape_string($_POST['username']);`按字面意思插入，请转义单引号。

```
INSERT INTO `Attacks_key` 
 (`Event_Key` ,`Variable` ,`Value` ,`Impact` ,`Tags`) 
   VALUES 
 ('111', 'REQUEST', 'mysql_real_escape_string($_POST[\'username\']); ', '222', 'xss, csrf, id, rfe, lfi'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:37:11.633

因为你真的应该切换到 PDO 而不是弃用的 mysql_ 函数，你可以使用[PDO::quote](http://www.php.net/manual/en/pdo.quote.php)

> PDO::quote() 在输入字符串周围放置引号（如果需要）并转义输入字符串中的特殊字符，使用适合底层驱动程序的引用样式。

但是，进行查询的首选方法是使用准备好的查询，在这种情况下，无论如何您都不会遇到引号转义问题。再次引用 PDO 的 php 手册页:;quote

> 如果您使用此函数构建 SQL 语句，强烈建议您使用 PDO::prepare() 来准备带有绑定参数的 SQL 语句，而不是使用 PDO::quote() 将用户输入插入到 SQL 语句中。带有绑定参数的预处理语句不仅更便携、更方便、不受 SQL 注入的影响，而且执行起来通常比插值查询快得多，因为服务器端和客户端都可以缓存查询的编译形式。

如果出于某种原因不能选择 PDO，则可以使用具有类似功能的[mysqli_real_escape_string 。](http://www.php.net/manual/en/mysqli.real-escape-string.php)

# cordova - Phonegap + ChildBrowser + 外部站点上的 PHP CAS 库

> ID：11431580
> 
> 赞同：1
> 
> 时间：2012-07-11T11:23:25.937
> 
> 标签：cordova, cas, childbrowser

我正在为 Android 制作一个 Phonegap 应用程序。该应用程序应使用 CAS 身份验证。目前我有一个位于此地址的页面：“www.mysite.com”，该页面会自动重定向到 CAS 服务器身份验证页面。当我登录该页面时，CAS 将我重定向到我来自的页面，在本例中为“www.mysite.com”。

登录后，我可以显示刚刚使用 CAS PHP 库登录的用户名和内置的函数。

问题：当我在 Phonegap 应用程序的 Childbrowser 实例中打开 www.mysite.com 时，在这个“循环”之后，我能否以某种方式将信息从 mysite.com 传输到我的应用程序，在这种情况下是用户名？

理想的情况是：打开应用程序并按下登录按钮，Childbrowser 弹出并登录，Phonegap 应用程序接收用户名，Childbrowser 关闭。

欢迎任何提示，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:51:24.287

可能最容易使用查询字符串。让您的登录页面更新其 url 并`onLocationChange`在`childBrowser`. 检查是否`username`存在，如果存在，抓住它。

在登录页面，当完成调用时：

```
window.history.replaceState( '', '', window.location.pathname + '?username=' + username ); 
```

然后在您的应用程序中：

```
window.plugins.childBrowser.onLocationChange = function ( url ) {
    if ( url.indexOf( 'username' ) > -1 ) {
        var username = window.location.queryString()['username'];
    };
}; 
```

这是一个获取查询字符串的辅助函数。

```
window.location.queryString = function () {
    var result = {},
        queryString = location.search.substring( 1 ),
        re = /([^&=]+)=([^&]*)/g,
        m;
    while ( m = re.exec( queryString ) ) {
        if ( typeof result[decodeURIComponent( m[1] )] == 'undefined' ) {
            result[decodeURIComponent( m[1] )] = decodeURIComponent( m[2] );
        } else {
            if ( typeof result[decodeURIComponent( m[1] )] == 'string' ) {
                result[decodeURIComponent( m[1] )] = [result[decodeURIComponent( m[1] )]];
            };
            result[decodeURIComponent( m[1] )].push( decodeURIComponent( m[2] ) )
        };
    };
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:21:14.827

我已使用这种方法使其在示例应用程序中工作：

```
function onBodyLoad()
{
    document.addEventListener("deviceready", onDeviceReady,false);
}

function onDeviceReady(){
    showLogin();
}

function showLogin() {
    try{
        var cb = ChildBrowser.install();
        if(cb != null)
        {
            cb.onLocationChange = function(loc){ 
                console.log("browser location changed to " + loc);

                if(loc == "http://mydomain.com/app"){
                    cb.close();
                    doOtherStuff();
                }
            };

            window.plugins.childBrowser.showWebPage("http://mydomain.com/login");
        }
    }catch(e){
        console.log(e);
    }
}

function checkAuth(){
    if( $.cookie(".ASPXAUTH") == null){
        console.log("No auth cookie found");
    }else{
        console.log("Auth cookie found");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T04:08:37.517

为此，我制作了一个自定义版本的 Childbrowser (Android)（最初用于 Google oAuth2）。它有一个`onPageLoaded`事件将在 Childbrowser 上打开的页面的整个 HTML 源发送回父应用程序（您的 Phonegap 应用程序）。因此，您可以从网页中提取所需的任何数据。源代码在[这里](https://github.com/dda/slavebrowser)，有一个例子。

# iphone - 如何在 ipad 应用程序中显示网格视图等数据

> ID：11431586
> 
> 赞同：0
> 
> 时间：2012-07-11T11:23:43.253
> 
> 标签：iphone, ios, xcode, datagrid

有什么方法可以在 ipad 应用程序的网格视图表单中显示数据

我想在 ipad 应用程序的网格视图中显示数据我已经搜索了很多，有人说使用自定义表格视图，但它看起来并不完全专业，我找到了适用于 ipad 的 iOS DataGrid TableView。

是否可以免费使用。以及如果可能的话如何实现这一点。下面是iOS Grid的链接

[http://www.binpress.com/app/ios-data-grid-table-view/586](http://www.binpress.com/app/ios-data-grid-table-view/586)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:43:15.430

你怎么能不偶然发现[AQGridView](https://github.com/AlanQuatermain/AQGridView/)。

但是，如果您只对单元格的样式感兴趣，您可以实现一个[自定义的 uitableview 单元格](http://kshitizghimire.com.np/create-custom-uitableviewcell/)，该单元格的网格很少，并根据您的要求对其进行样式设置。

有很多教程展示了如何自定义`UITableViewCell`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:34:26.110

根据您的要求创建自定义 UITableViewCell 并将该单元格加载到表格视图单元格。

您可以使用下面的示例代码在表格的 cellForRowAtIndexPath 方法中加载自定义单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    静态 NSString *sCellIdentifier = @"CustomCell";
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:sCellIdentifier];

    如果（细胞 == 零）{
        NSArray *topLevelObject = [[NSBundle mainBundle] loadNibNamed: @"CustomCell" owner:self options:nil];

        for (id currentObject in topLevelObject) {
            if ([currentObject isKindOfClass:[UITableViewCell 类]]) {
                单元格 = (CustomCell *)currentObject;
                休息;
            }
        }
    }

    cell.label1.text = @"label1"; // 你可以像这样访问自定义单元格的所有控制器   
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    返回单元格；
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:30:15.030

通过使用CustomUITableViewCell，您可以获得相同的结果。即获取UITableviewcell 并为其添加三个或四个标签。然后在cellForRowAtIndexPath 方法中传递数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T20:30:23.580

我们在我们的应用程序中使用这个：http: [//www.ioscomponents.com/](http://www.ioscomponents.com/)。到目前为止我们喜欢它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T20:40:55.927

我使用了 GMGridview，它有一个示例，基本上如果您更改单元格大小和列，您可以使其适合 iPad 或 iPhone。如果需要输入数据，还可以添加 UITextField（而不是默认的 UILabel）。一个不错的功能是它可以滚动。

[http://www.gmoledina.ca/projects/gmgridview/](http://www.gmoledina.ca/projects/gmgridview/)

如果您有任何问题，请随时询问。

# python - 重命名 TreeCtrl 中的项目

> ID：11431593
> 
> 赞同：0
> 
> 时间：2012-07-11T11:23:53.613
> 
> 标签：python, wxpython, wxwidgets

我正在尝试为 Treectrl 制作重命名功能。

在哪里， TextCtrl 越过元素，我可以重命名它。我在 API 上找不到这个功能，但我确信必须有某种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:22:15.400

我假设您想重命名树元素（叶子），对吗？那么当你实例化 TreeCtrl 时，给它下面的样式标志： wx.TR_DEFAULT_STYLE | wx.TR_EDIT_LABELS

现在您应该能够单击或双击任何项目并重命名它们。请参阅 wxPython 演示以了解更多酷技巧。

# android - 带有单个@id 的TextView 会改变所有字体吗？

> ID：11431594
> 
> 赞同：1
> 
> 时间：2012-07-11T11:24:01.647
> 
> 标签：android

//我正在设置具有各种内容的不同TextView作为文本我正在做的是为所有textview设置字体。自定义字体也显示正常。

```
((TextView) findViewById    (R.id.tutor_ps_tv_home))        .setTypeface(mFace);
((TextView) findViewById    (R.id.tutor_ps_tv_plus))        .setTypeface(mFace);
((TextView) findViewById    (R.id.tutor_ps_tv_settings))    .setTypeface(mFace);
((TextView) findViewById    (R.id.tutor_ps_tv_undo))        .setTypeface(mFace);
((TextView) findViewById    (R.id.tutor_ps_tv_cam))         .setTypeface(mFace);
((TextView) findViewById    (R.id.tutor_ps_tv_share))       .setTypeface(mFace); 
```

//是否可以为所有文本视图仅设置一个 id 来更改我的字体，如下所示。

```
 android:id="@+id/all_textview"
 android:id="@id/all_textview"
 android:id="@id/all_textview"
 android:id="@id/all_textview" 
```

//我将在我的活动中设置为

```
 ((TextView) findViewById   (R.id.all_textview))        .setTypeface(mFace); 
```

// 有没有人知道更好的解决方案。

**注意：**我只想更改字体而不是其他任何东西/与 textview 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:29:03.663

> 是否可以为所有文本视图仅设置一个 id 来更改我的字体，如下所示。

不`findViewById()`，仍然会返回一个`TextView`——它只是你给的同名者中的一个随机的。

在 StackOverflow 和其他地方有一些例子可以遍历内容视图的子项，找到符合您条件的那些（例如， are `TextView`s）并更改它们的`Typeface`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:32:53.083

看来这篇文章会对你有所帮助

[Android：想要为整个应用程序而不是运行时设置自定义字体](https://stackoverflow.com/questions/4395309/android-want-to-set-custom-fonts-for-whole-application-not-runtime)

该帖子的答案描述了一种方法。您可以将所有文本视图作为可变参数传递给函数并在那里更改字体

最后有 11 票的答案（倒数第二个）。答案描述了使用具有此字体集的自定义扩展文本视图。我个人觉得这是更好的方法。

这是另一个帖子

[是否可以为整个应用程序设置自定义字体？](https://stackoverflow.com/questions/2711858/is-it-possible-to-set-font-for-entire-application)

这里的回复帖子`Tom`描述了我们如何为活动中的所有视图设置相同的字体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:33:49.467

我还认为您应该将您的 typeFace 设置为一种[样式](http://developer.android.com/guide/topics/ui/themes.html)并将其应用于您的应用程序或您的活动，您还可以从 textView 继承您的样式并将所有 textviews 默认设置为定义的样式。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="CodeFont" parent="@android:style/TextAppearance.Medium">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textColor">#00FF00</item>
    <item name="android:typeface">monospace</item>
</style>
</resources> 
```

问候。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T11:26:56.633

在 res/values/styles.xml 中定义一个样式并将其应用到您的 Activity。有关详细信息，请参阅：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

**编辑：**

我的错。如果 CommonsWare 说我错了，那我就错了。:-)

# ruby-on-rails - 如何将设计用户与其他模型嵌套？

> ID：11431595
> 
> 赞同：1
> 
> 时间：2012-07-11T11:24:06.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, devise

我刚刚制作了一个新应用程序，并且想知道如何路由它。一个用户 has_many 公司，但我该如何路由呢？我正在使用设计。

```
::Application.routes.draw do

  devise_for :users do
    resources :companies
  end

root :to => "home#index"

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:33:29.580

我建议将设计路线和其他应用程序路线分开：

```
 devise_for :users, :path => 'accounts'
  resources :users do
    resources :companies
  end 
```

这也意味着 devise 将使用 /accounts/* 而不是 /users/* 作为其身份验证路径，因此 /users/* 将保持免费供您使用。

您还可以查看设计的[路由文档](http://rubydoc.info/github/plataformatec/devise/master/frames)。

# java - 用于创建 UML 图的 Java API

> ID：11431597
> 
> 赞同：1
> 
> 时间：2012-07-11T11:24:21.123
> 
> 标签：java, uml

是否有任何可用于绘制/创建 UML 图的 Java API（开源）。

JFreeChart 是一个用于绘制图表/条形图/图形的 Java API，同样是否有任何工具可以使用 Java 绘制 UML 图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:28:10.080

也许不是专门针对 UML 图，但我一直在使用[JUNG](http://jung.sourceforge.net/)来创建分层图并且对它非常满意。查看他们提供的[示例](http://jung.sourceforge.net/applet/index.html)，看看它是否对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:16:28.693

如果您想创建类图，[本教程](http://www.eclipse.org/articles/Article-GEF-Draw2d/GEF-Draw2d.html)将展示如何使用 eclipse draw2d 来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T12:19:40.490

您可以检查Eclipse 平台[的 UMLTM 2.4.1 元模型的基于 EMF 的实现。](http://wiki.eclipse.org/MDT-UML2#Javadoc)

这将允许您创建 UML 图。然后你可以使用任何兼容 EMF-UML 的工具来可视化它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T23:25:48.733

[我一直在寻找类似的东西，然后我发现了这个名为PlantUML](http://plantuml.sourceforge.net/sequence.html)的开源项目。他们有一些很好的例子，几乎涵盖了你可能想要的一切。

# symfony - XML 翻译中的 HTML 标签

> ID：11431599
> 
> 赞同：5
> 
> 时间：2012-07-11T11:24:25.560
> 
> 标签：symfony, translation, twig

如何在翻译中添加如下语句（XLIFF 格式）：

```
Click <a href='http://example.com'>here</a> to continue. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:29:05.477

你能把它放在 xml 中的 CDATA 字段中吗？ [http://en.wikipedia.org/wiki/CDATA](http://en.wikipedia.org/wiki/CDATA)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:39:27.207

在 Twig 中，您可以包含翻译和禁用自动转义，但您必须控制其内容，因为它可能缺乏安全性......

```
{% autoescape false %}{{ 'your.translation.id'|trans }}{% endautoescape %} 
```

# node.js - 在 azure ubuntu vm 上设置支持 websocket 的应用程序

> ID：11431602
> 
> 赞同：2
> 
> 时间：2012-07-11T11:24:35.860
> 
> 标签：node.js, azure, websocket, socket.io

好的，所以我已经在 azure 云中创建了一个 ubuntu vm，我已经成功启动了 nodejs、redis、socket.io、Express 和我正在编写的游戏的所有组件。

我在内部和外部端口 8080 上设置了 Azure 端点，并在我的 js 代码中使用了 app.listen(8080)。

当我浏览到 http://< app-name >.cloudapp.net:8080/ 我可以很好地查看我的 nodejs 应用程序的结果，它显示了 html、css 等。

但是，当它尝试启动套接字连接（使用 socket.io）时，我只得到这个（在我的 chrome 开发控制台上的 websockets 下）：

```
HeadersPreviewResponseWebSocket Frames
Request URL:ws://<app-name>.cloudapp.net:8080/socket.io/1/websocket/13510496541533398587
Request Method:GET
Status Code:101 Switching Protocols
Request Headersview source
Connection:Upgrade
Host:<app-name>.cloudapp.net:8080
Origin:http://<app-name>.cloudapp.net:8080
Sec-WebSocket-Extensions:x-webkit-deflate-frame
Sec-WebSocket-Key:y5vueHE66phl70gle7KCtw==
Sec-WebSocket-Version:13
Upgrade:websocket
(Key3):00:00:00:00:00:00:00:00
Response Headersview source
Connection:Upgrade
Sec-WebSocket-Accept:dn+2lA6sMIXHLEmDS/Q4j/IIwxI=
Upgrade:websocket
(Challenge Response):00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 
```

当我尝试在客户端（浏览器）上使用 socket.emit() 发送任何内容时，它也会在 azure 上崩溃 nodejs 应用程序；在我的 azure ssh 中，它只是说“调试：程序节点 app.js 以代码 null 退出”，这并不是特别有用。

所以它显然没有正确连接？我也尝试过在我的 nodejs 中监听端口 80，但是我什至没有得到标准网页（html、css 等）。

根据我在网上阅读的内容，如果您不使用 Web 角色（我假设 vm 不是），则很有可能让套接字正常工作。

知道我怎样才能让它工作吗？（最好在端口 80 上）？

编辑：开始怀疑这是否与套接字无关，意识到我在我的家庭虚拟机（它正在工作的地方）上收到了相同的切换协议消息。衍生问题：[如何在 ubunu azure vm 上查看 nodejs 程序的崩溃详细信息？](https://stackoverflow.com/questions/11490620)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:41:42.420

Windows Azure 负载均衡器的时间大约为 60 秒。

如果您在建立 websocket 连接后立即向客户端发送消息，它是否有效？

如果是这种情况，您将不得不实施一些保持每分钟发送一次实时消息。

# android - 为什么我的 Android Listview 不滚动？

> ID：11431603
> 
> 赞同：2
> 
> 时间：2012-07-11T11:24:38.707
> 
> 标签：android, xml, listview, scrollview

我用一些项目做了一个 xml 显示。但是我的那个 xml 的 listView 没有滚动。我做了一个scrollView，listView在scrollView里面，有问题吗？如果我设计显示时将 listView 保持在 scrollView 之外，那么 lisViw 不会显示在我的 android 设备显示屏上。我需要这样一个显示需要滚动视图和滚动列表视图的地方。我的代码如下。

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/head_logo" >
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/cardlistButton"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/head_menu04" />

    <View
        android:layout_width="1dip"
        android:layout_height="fill_parent"
        android:background="#ffffff" />

    <Button
        android:id="@+id/cameraButton"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/head_menu02" />

    <View
        android:layout_width="1dip"
        android:layout_height="fill_parent"
        android:background="#ffffff" />

    <Button
        android:id="@+id/homeButton"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="@drawable/head_menu03" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/title_detail"
    android:gravity="right|center_vertical" >
</LinearLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dip"
            android:layout_marginRight="15dip"
            android:orientation="vertical"
            android:paddingBottom="10dip"
            android:paddingTop="15dip" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="7dip"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="80dip"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="STATUS :"
                    android:textColor="#666666"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/pdtvText1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:text=""
                    android:textColor="#666666"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="7dip"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="80dip"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="注文日 :"
                    android:textColor="#666666"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/pdtvText2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:text=""
                    android:textColor="#666666"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="7dip"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="80dip"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="納品日 :"
                    android:textColor="#666666"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/pdtvText3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:text=""
                    android:textColor="#666666"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="7dip"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="80dip"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="依頼枚数 :"
                    android:textColor="#666666"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/pdtvText4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:text=""
                    android:textColor="#666666"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/pdtvText41"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dip"
                    android:text=""
                    android:textColor="#FF0000"
                    android:textStyle="bold" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="7dip"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="80dip"
                    android:layout_height="wrap_content"
                    android:gravity="left"
                    android:text="納品枚数 :"
                    android:textColor="#666666"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/pdtvText5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="5dip"
                    android:text=""
                    android:textColor="#666666"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/errorLayout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/subtitle_error"
            android:gravity="right|center_vertical" >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/bluebar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/subtitle_deli"
            android:gravity="right|center_vertical" >
        </LinearLayout>

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dip"
            android:gravity="left"
            android:paddingBottom="5dip"
            android:paddingTop="5dip"
            android:text="      "
            android:textColor="#666666"
            android:textStyle="bold" />

        <ImageView
            android:id="@+id/imageviewproduct"
            android:layout_width="300dip"
            android:layout_height="180dip"
            android:layout_marginBottom="10dip"
            android:scaleType="fitXY" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="11.89" >

            <ListView
                android:id="@+id/productlistall"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:cacheColorHint="#00000000" >
            </ListView>
        </LinearLayout>
    </LinearLayout>

 </ScrollView>

</LinearLayout>
</merge> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:28:01.297

```
Never add ListView,MapView,WebView(its already scrollable) in ScrollView 
```

从 ScrollView 中移除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:34:57.690

**不要将 ListView 放在 ScrollView**中。

ListView 已经处理滚动，你只会遇到麻烦。

使用 ListView 使其不滚动非常昂贵，并且违背了 ListView 的全部目的。你不应该这样做。只需使用 LinearLayout 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:38:49.817

正如 samir 和 coader 所说，永远不要在滚动视图中使用它们；但是让这次例外，首先检查您是否输入了足够的号码。列表中的项目等 tat 有足够的没有。要滚动的对象

# ruby-on-rails - 当应用程序按预期工作时，为什么这些 RSpec 测试会失败？

> ID：11431606
> 
> 赞同：1
> 
> 时间：2012-07-11T11:25:09.347
> 
> 标签：ruby-on-rails, ruby, rspec

我一直在关注 Michael Hartl 的 Rails 教程。实际上我已经完成了它，但是我在为最后一章的最后一个练习所做的一些重构时遇到了一些问题。我所做的只是改变用户模型（show.html.erb）的显示视图：

```
<section>
  <h1>
    <%= gravatar_for @user %>
    <%= @user.name %>
  </h1>
</section> 
```

对此：

```
<section>      
   <%= render 'shared/user_info' %>
</section> 
```

在部分（_user_info.html.erb）我有这个：

```
<a href="<%= user_path(current_user) %>">
   <%= gravatar_for current_user, size: 52 %> 
</a> 
<h1> <%= current_user.name %> </h1> 
<% unless current_page?(user_path(current_user)) %> 
   <span> <%= link_to "view my profile", current_user %> </span>
   <span> <%= pluralize(current_user.microposts.count, "micropost") %> </span>
<% end %> 
```

在浏览器上一切正常，但由于某种原因 rspec 未能通过某些测试，我怀疑 rspec 在调用 session_helper.rb 中定义的 current_user 方法时遇到问题，顺便说一下，该方法包含在 application_helper.rb 中。gravatar_for 函数在 users_helper.rb 中定义。这是我从测试中得到的错误：

失败/错误：在 { 访问 user_path(user) } ActionView::Template::Error: 未定义方法`email' for nil:NilClass # ./app/helpers/users_helper.rb:4:in`gravatar_for'`_app_views_shared__user_info_html_erb___3480157814439046731_47327400' # ./app/views/users/show.html.erb:5:in`之前/user_pages_spec.rb:58:in `block (3 levels) in '

如果您能帮助我确定这里发生了什么，我将不胜感激。我可以找到不同的方法来做同样的事情，但我对此非常好奇。我在 Rails 方面不是很有经验，这就是为什么我遵循本教程的原因，如果我遗漏了一些明显的东西，请原谅我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T03:26:00.637

我想我得到了解决方案。虽然我还是一头雾水。这是我的问题中提到的重构之前的测试代码（因为它们在教程中，它们都通过了）：

```
describe "profile page" do
  let(:user) { FactoryGirl.create(:user) }
  let!(:m1) { FactoryGirl.create(:micropost, user: user, content: "Foo") }
  let!(:m2) { FactoryGirl.create(:micropost, user: user, content: "Bar") }

  before { visit user_path(user) }

  it { should have_selector('h1',    text: user.name) }
  it { should have_selector('title', text: user.name) }

  describe "microposts" do
    it { should have_content(m1.content) }
    it { should have_content(m2.content) }
    it { should have_content(user.microposts.count) }
  end #some other tests for show page continue, also having the same behaviour
end 
```

在阅读测试以查看是否有错误时，我开始想知道如果我没有让用户登录，为什么这些测试会通过，所以我在 before 块中添加了代码来让用户登录，如下所示：

```
describe "profile page" do
  let(:user) { FactoryGirl.create(:user) }
  let!(:m1) { FactoryGirl.create(:micropost, user: user, content: "Foo") }
  let!(:m2) { FactoryGirl.create(:micropost, user: user, content: "Bar") }

  before do
    valid_signin user
    visit user_path(user) 
  end

  it { should have_selector('h1',    text: user.name) }
  it { should have_selector('title', text: user.name) }

  describe "microposts" do
    it { should have_content(m1.content) }
    it { should have_content(m2.content) }
    it { should have_content(user.microposts.count) }
  end #some other tests for show page continue, also having the same behaviour
end 
```

现在所有测试都通过了。我知道登录用户似乎很愚蠢而且很明显，但是这就是[教程](http://ruby.railstutorial.org/chapters/user-microposts?version=3.2#code%3auser_show_microposts_test)中的测试方式，并且它们之前一直在工作。如果您想检查它，[这是更新的测试文件。](https://github.com/francisco-rojas/RailsTutorial-3.2/blob/master/spec/requests/user_pages_spec.rb)所有更改现在都提交到我的 github 存储库中。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:35:20.713

[查看您的 repo](https://github.com/francisco-rojas/RailsTutorial-3.2)，这*可能*是问题所在：Rails 教程于 6 月 25 日报告了一个关于**app/helpers/sessions_helper.rb**文件`current_user`中的`sign_in`和`sign_out`方法的设置的小错误。该通知似乎没有发布在[Rails 教程新闻网站上](http://news.railstutorial.org/)，但已发送给订阅者，并且反映在[当前在线书籍](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code%3asign_out_method)中说要更改：

 **```
self.current_user = user   # in the sign_in method
self.current_user = nil    # in the sign_out method 
```

因此，请尝试更新[您的`sessions_helper.rb`](https://github.com/francisco-rojas/RailsTutorial-3.2/blob/master/app/helpers/sessions_helper.rb)，看看是否会阻止您获得`nil`用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:26:59.553

听起来您的测试数据库中没有任何用户。开发数据库和测试数据库是两个不同的东西。Rspec 在运行测试时使用测试数据库。

要设置您所做的测试数据库`rake db:test:prepare`。

然后，您需要在运行规范时填充测试数据库。一种很好的方法是使用[Factory Girl](https://github.com/thoughtbot/factory_girl/)宝石。**

# c# - 将视图 (xaml) 中的 MedialElement 绑定到 ViewModel 的属性

> ID：11431612
> 
> 赞同：2
> 
> 时间：2012-07-11T11:25:24.913
> 
> 标签：c#, wpf, binding, mvvm, mediaelement

我正在尝试将 MainView.xaml 中的 medialElement 绑定到 ViewModel 的属性。在 MainViewModel.cs 我们会发现

```
#region Media
private MediaElement media;
    public MediaElement Media
    {
        get
        {
            return media;
        }
        set
        {
            if (value == media)
                return;
            media = value;
            OnPropertyChanged("Media");
        }
    }
    #endregion 
```

我想知道在 MainView.xaml 中放入什么来进行绑定。

我知道如果它是一个 TextBox 我会写

```
`<TextBox Text="{Binding BGToSet, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />` 
```

但是我应该为 MediaElement 做什么？我现在这样做：

```
`<MediaElement  VerticalAlignment="Center" Width="700" LoadedBehavior="Manual" Height="450" Stretch="Fill"  MediaOpened="{ Binding mediaMediaOpenedCommand}" > 
```

`非常感谢您的回答！！对不起我的英语不好。我也是 WPF 的新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:35:01.897

您应该公开`Uri`要显示的媒体源，而不是`MediaElement`：

```
public Uri MediaSource { get { /* ... */ } set { /* ... */ } }

<MediaElement Source="{Binding MediaSource}" /> 
```

或使用`ContentControl`(or `ContentPresenter`) 显示`MediaElement`自己：

```
<ContentControl Content="{Binding Media}" /> 
```

# ios - 在 cocos2d-iphone 应用中实现平滑加载器

> ID：11431623
> 
> 赞同：1
> 
> 时间：2012-07-11T11:26:16.053
> 
> 标签：ios, cocos2d-iphone

我想在我的应用程序中实现启动加载器。应该是这样的：启动闪屏后，用户会看到简单的动画，同时app会预加载音效、背景音乐、精灵图片、精灵表等。当前实施：

```
- (id)init {
    if((self = [super init])) {

        // Some other setup ...
        CGRect rect;
        rect = waveSprite.textureRect;
        waveInitialTexRectOrigin = rect.origin;
        rect.size.width = 91;
        waveSprite.textureRect = rect;

        assetFilenames = [[NSArray alloc] initWithObjects:

                          // images
                          @"background.png",

                          // spritesheets
                          @"sprites.plist",

                          // fonts
                          @"main.png",

                          // sound effects
                          @"button.wav",
                          nil];
        assetCounter = 0;
        [self loadAsset];
    }
    return self;
}

- (void)update:(ccTime)dt {
    CGRect rect;
    rect = waveSprite.textureRect;
    rect.origin.x += dt*kLoaderWaveSpeed;
    while (rect.origin.x > waveInitialTexRectOrigin.x + kLoaderWavePeriod) {
        rect.origin.x -= kLoaderWavePeriod;
    }
    waveSprite.textureRect = rect;
}

#pragma mark Private

- (void)loadAsset {
//  CCLOG(@"loadAsset");

    NSString *filename = [assetFilenames objectAtIndex:assetCounter];
    CCLOG(@"loading %@", filename);

    NSString *ext = [filename pathExtension];

    if ([ext doesMatchRegStringExp:@"[png|jpg]"]) {
        [[CCTextureCache sharedTextureCache] addImage:filename];
    } else if ([ext isEqualToString:@"plist"]) {
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:filename];
    } else if ([ext doesMatchRegStringExp:@"[caf|wav|mp3]"]) {
        [[SimpleAudioEngine sharedEngine] preloadEffect:filename];
    }

    assetCounter++;

    if (assetCounter < [assetFilenames count]) {
        [self performSelector:@selector(loadAsset) withObject:self afterDelay:0.1f];
    } else {
        [self performSelector:@selector(loadingComplete) withObject:self afterDelay:0.2];

    } 
```

但是动画太突然了。

**UPD** 我已经试过了

```
[self performSelectorInBackground: withObject:] 
```

但它似乎没有工作（挂在加载第一个资产）。也许我应该朝这个方向努力。

**UPD2**平滑 = 不突然，没有延迟和闪烁。fps没关系，20 fps还可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:03:21.633

我没有使用 CC2D 的经验，但这是我在 ViewController 中用来显示平滑动画加载指示器的内容：

```
//Set up and run your loading scene/indicator here

dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

        //Load your scene

    dispatch_async( dispatch_get_main_queue(), ^{

        //This fires when the loading is complete
        //Show menu and destroy the loader scene/indicator here

    });
}); 
```

我想这值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:03:10.643

您不应该再使用 performSelectorInBackground，它没有被弃用，但可能很快就会出现，现在[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)出现在图片中。

我会尝试在主线程中运行动画，因为它是唯一可以进行 UI 更新的动画。并使用 GCD 生成一个或多个线程来加载所有资产。

我会使用并发调度队列来并行加载所有内容，并在完成后简单地关闭动画。

您可以在此处获取有关并发调度队列的完整信息：

[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:58:15.053

那是因为你在同一个线程上做所有事情。为加载程序使用单独的线程。

希望这可以帮助。

干杯!

编辑：看看[这个](http://www.cocos2d-iphone.org/forum/topic/2242)。

# android - 适用于 Android 2.2 的阿拉伯语 Android 应用程序名称

> ID：11431627
> 
> 赞同：0
> 
> 时间：2012-07-11T11:26:33.653
> 
> 标签：android, eclipse, arabic

阿拉伯语中的应用程序名称显示损坏，即单独出现的字符。我正在使用安卓 2.2。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:46:32.570

android 正式开始支持阿拉伯语的蜂窝系列，即 android 3.0 以后，所以如果你想使用阿拉伯语，你必须使用正确格式化的阿拉伯语，你需要使用格式化工具

就您的问题而言，app_name 在 android 3 以后会很好，但对于 2.2，您要么提供图像图标，要么保持原样（我更喜欢第二个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:06:57.227

取决于安装的ROM，谷歌正式开始支持阿拉伯语冰淇淋，但一些制造商从2.1开始在他们的设备上支持阿拉伯语，并且大多数阿拉伯用户现在在他们的设备上没有阿拉伯语的问题。

# c++ - 为 Multimap 中的特定键选择随机元素

> ID：11431631
> 
> 赞同：1
> 
> 时间：2012-07-11T11:26:52.267
> 
> 标签：c++, std

如何为多图中的特定键选择随机元素。例如：

```
multimap<string, string> map;
map.insert(pair<string, string>("Mammal", "Tiger"));
map.insert(pair<string, string>("Mammal", "Chicken"));
map.insert(pair<string, string>("Mammal", "Fox"));
map.insert(pair<string, string>("Fish", "Clown Fish"));
map.insert(pair<string, string>("Fish", "Ray")); 
```

在上面，获得随机“哺乳动物”的最佳方法是什么？

我知道我可以得到“哺乳动物”的迭代器，所以：

```
pair<MultiMapIt,MultiMapIt>iterators = mMultiMap.equal_range("Mammal");
// loop through each... and select one. 
```

但我确信有更好的解决方案......也许使用迭代器作为数字......
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:49:32.450

插入评论作为答案：

1.  获取迭代器范围 - 你已经有了
2.  计算范围的大小

    `std::size_t sz = std::distance(iterators.first, iterators.second);`

3.  现在生成一个随机索引：

    `std::size_t idx = std::rand() % sz; // stupid example`

4.  将迭代器移动到`idx`-th 位置：

    `std::advance(iterators.first, idx);`

现在`iterators.first`指着一个随机的哺乳动物。

# android - 代码中的 Eclipse + Android SDK 错误

> ID：11431636
> 
> 赞同：0
> 
> 时间：2012-07-11T11:26:59.553
> 
> 标签：android, eclipse, sdk, eclipse-adt

我的项目中仍然出现错误。当我编辑源文件时，当没有任何语法错误时，eclipse 会显示括号错误。我必须剪切有错误的代码并将其粘贴回来，然后错误就会消失。这很烦人。有没有办法强制eclipse重新验证代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:29:23.627

你可以试试`Project -> Clean`，看看`Project -> Build Automatically`选项是否被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:28:42.513

转到**项目 -> 清理**

这将迫使 Eclipse 再次重新验证代码

# python - 如何在python中杀死一个线程

> ID：11431637
> 
> 赞同：11
> 
> 时间：2012-07-11T11:27:01.957
> 
> 标签：python, multithreading

我使用以下代码启动一个线程。

```
t = thread.start_new_thread(myfunction) 
```

我怎样才能`t`从另一个线程中杀死线程。所以基本上就代码而言，我希望能够做这样的事情。

```
t.kill() 
```

请注意，我使用的是 Python 2.4。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-03T12:47:25.283

在 Python 中，您根本无法杀死线程。

如果你真的不需要一个线程（！），你可以做的，而不是使用*线程*包（[http://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html)），是使用*多处理*包（[http://docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)）。在这里，要杀死一个进程，您可以简单地调用该方法：

```
yourProcess.terminate()  # kill the process! 
```

Python 将终止您的进程（在 Unix 上通过 SIGTERM 信号，而在 Windows 上通过 TerminateProcess() 调用）。注意在使用队列或管道时使用它！（它可能会破坏队列/管道中的数据）

请注意，*multiprocessing.Event*和*multiprocessing.Semaphore的工作方式分别与**threading.Event*和*threading.Semaphore*完全相同。事实上，第一个是后者的克隆。

如果你真的需要使用线程，没有办法直接杀死你的线程。但是，您可以做的是使用*“守护线程”*。事实上，在 Python 中，可以将 Thread 标记为*daemon*：

```
yourThread.daemon = True  # set the Thread as a "daemon thread" 
```

当没有活着的非守护线程时，主程序将退出。换句话说，当你的主线程（当然是一个非守护线程）完成它的操作时，即使还有一些守护线程在工作，程序也会退出。

*请注意，在调用start()*方法之前，必须将 Thread 设置为*守护进程！*

 *当然，即使使用*multiprocessing ，您也可以并且应该使用**daemon*。在这里，当主进程退出时，它会尝试终止其所有守护子进程。

 *最后，请注意*sys.exit()*和*os.kill()*不是选择。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T11:46:18.640

~~如果您的线程忙于执行 Python 代码，那么您遇到的问题比无法杀死它更大。GIL 将阻止任何其他线程甚至运行您用来执行杀戮的任何指令。~~（经过一番研究，我了解到解释器会定期发布 GIL，因此前面的陈述是虚假的。但是，剩下的评论仍然有效。）

您的线程必须以合作的方式编写。也就是说，它必须定期检查信号量等信号对象，主线程可以使用信号量来指示工作线程自愿退出。

```
while not sema.acquire(False):
    # Do a small portion of work… 
```

或者：

```
for item in work:
    # Keep working…
        # Somewhere deep in the bowels…
        if sema.acquire(False):
            thread.exit() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-11T11:27:52.763

你不能从另一个线程中杀死一个线程。您需要向另一个线程发出信号，表明它应该结束。我所说的“信号”并不是指使用该`signal`功能，我的意思是您必须安排线程之间的一些通信。**

# javascript - jQuery 检查 flash 请求

> ID：11431639
> 
> 赞同：0
> 
> 时间：2012-07-11T11:27:06.473
> 
> 标签：javascript, jquery, flash, iframe

我有以下情况，

我正在完全控制的页面中加载 iframe，

iframe 的内部是一个嵌入 Flash 文件的网页。我无法控制 iframe 的内部（包括实际的 flash 和嵌入 flash 的网页）。

我想知道是否有下载某个图像的 GET 请求。GET 请求由 flash 文件发起。

注意：如果我在资源下的 Chrome 上单击 CTRL+SHIFT+I，我可以看到 Flash 加载的图像，如果这有助于您了解 Flash 电影如何获取图像。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:57:36.187

直接没有；无论您是否拥有 iframe 和 SWF，您都无法做到这一点。所以答案是否定的，除非您拥有被请求的图像并且您可以实现某种服务器端静态资源跟踪器。

或者您可以随时反编译 swf 文件（强烈建议不要这样做）。

# php - 使用 jQuery 的工具提示

> ID：11431646
> 
> 赞同：-1
> 
> 时间：2012-07-11T11:27:25.430
> 
> 标签：php, javascript, html

我试图调用我的 document.getElementByID 以从我当前的表单中获取 ID。但它不会悬停在我输入的特定文本上，而不是输出“â€‹”。作为[数组中工具提示/悬停文本的](https://stackoverflow.com/questions/11416584/tooltip-hover-text-in-an-array)参考，我已经修改了一些内容，但工具提示文本仍然没有显示。

```
Updated code-
In my html page:

<script>
$(document).ready(function () 
{
            var tooltip_Text = $('#tooltip_Text');
    var tooltip = $('#tooltip');
    $('#Hobby').hover(
        function() 
                    {
            tooltip.fadeIn(200);
        },
        function() 
                    {
            setTimeout ( function () {
                tooltip.fadeOut(200); student.php();
            }, 1000);
        }
    );
    $('#Hobby').bind('change', function() 
            {
        student.php('user has changed the value');
    });​
});​
</script>

//my list/menu
<select name="OffenceName" id="Hobby" ><span id="Hobby"></span>
<?php $arr = array('', 'cycling', 'badminton', 'jetskiing', 'ice-skating');
  for($i = 0; $i < count($arr); $i++)
  {
     echo "<option value=\"{$arr[$i]}\" {$selected}>{$arr[$i]}</option>\n"; 
  }
?>
</select>
<tool id="tooltip" class="tooltip">
<?php $toolarr = array('','cycling is...', 'badmintion is...', 'jetskiing is...', 'ice-skating is...');
  for($t = 0; $t < count($toolarr); $t++)
  {
      if($toolarr[t] == $arr[i])
      {
         echo "sample display";
      }
  }
<span id="tooltip_Text"></span> 
```

​</p>

即使我尝试通过 id 而不是 student.php() 获取元素，我也无法调出下面的工具提示文本；好心提醒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:32:38.913

您不应该使用原生 javascript 选择器选择元素，而应该使用 jQuery 选择器。就目前而言，您的代码无法工作，因为您调用的方法仅存在于您的元素由 jquery 对象包装的情况下。

所以而不是

```
document.getElementById("Hobby").hover(... 
```

采用

```
$("#Hobby").hover(... 
```

您的代码应该会抛出如下几个错误：

```
TypeError: Object #<HTMLDivElement> has no method 'hover' 
```

编辑：

几个错误：

`//my list/menu`不是有效的 HTML 注释

`student.php()`也无效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:41:58.393

试试这个;

```
$(document).ready(function () 
{
    $("#Hobby").hover(function(){
        $("#tooltip").fadeIn("slow");
    },
    function(){
        $("#tooltip").fadeOut();
    });

    $('#Hobby').change(function() {
      $("#tooltip_Text").text("user has changed the value"); // or you can use .html("...") intead of .text("...")

    });

});​ 
```

# jquery - 音频播放器未初始化

> ID：11431647
> 
> 赞同：0
> 
> 时间：2012-07-11T11:27:31.440
> 
> 标签：jquery, html, jplayer

我有一个来自数据库的音频文件列表。他们在点击行后开始播放。现在我想在页面加载后自动播放第一个音频文件。一切都实现得很好，但 Jquery Player 没有初始化或任何其他问题。任何机构都可以帮助我。

```
 function playAudioFile(objid,title,filePath)
 {
   speaker_id = "speaker_"+objid;
   rowid = "rowid_"+objid;
   $('.datagridtable tr').removeClass('current_playing');
   $('.black_speaker').removeClass('black_speaker');

   $('#'+rowid).addClass("current_playing");
   $('#'+speaker_id).addClass("black_speaker");

  $('#jquery_jplayer').jPlayer('setFile', filePath).jPlayer('play');
  $('#jplayer_playlist ul li').html(title);
   showPauseBtn();
  }  

 $(document).ready(function() {
   playAudioFile('12','abasdfasdf','pathtofile')
 }); 
```

a) FileBug 没有给出任何错误。

b) 我确定问题出在 jplayer 初始化上，但不知道如何解决。

这是演示网址[http://webcartz.stagetesting.com/playlist](http://webcartz.stagetesting.com/playlist)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:08:10.327

你已经把这个问题放在`playAudioFile();`里面`$(document).ready()`了，因为播放器还没有准备好，无法满足你的要求。

文档中似乎没有自动播放功能，但根据[http://jplayer.org/latest/developer-guide/#jPlayer-constructor-event-handlers](http://jplayer.org/latest/developer-guide/#jPlayer-constructor-event-handlers)，您需要做的是使用该`ready`事件。

这可能在 player.js 中

```
$("#jquery_jplayer").jPlayer({
    ready: function ()
    {
        //////////////////////////////////////
        //
        // ADD HERE CODE TO PLAY THE FIRST 
        // ITEM IN THE PLAYLIST
        //
        //////////////////////////////////////
        showPauseBtn();
    },
    ativeSupport: true, oggSupport: false, customCssIds: true, swfPath:'jPlayer/'
}) 
```

# sql - NULL 和 VARCHAR 错误之间的 SQL 联合

> ID：11431651
> 
> 赞同：5
> 
> 时间：2012-07-11T11:27:43.757
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005, null

我有两个具有相同列的视图。第一个视图上的一列是“即时”生成的，并设置为`NULL`，另一个视图上的同一列的值存储为`varchar`。我有一个如下所示的存储过程：

```
ALTER PROCEDURE [dbo].[mi_GetLearners]  
(@centrename nvarchar(200))  
AS  

SELECT [centrename]  
      ,[Name]  
      ,[Username] --generated on the fly as NULL
FROM  [DB1].[dbo].[vw_Learners]  
WHERE [centrename] = @centrename  

UNION  

SELECT [centrename]  
      ,[Name]   
      ,[Username] --values stored as varchar   
FROM  [Linked_Server].[DB2].[dbo].[vw_Learners]  
WHERE [centrename] = @centrename 
```

DB1 在 SQL Server 2008 R2
上 DB2 在 SQL Server 2005 上

当我运行存储过程时，出现以下错误：

> 消息 245，级别 16，状态 1，行 1 将 varchar 值“someusername”转换为数据类型 int 时转换失败。

为什么它试图将值转换为 int 数据类型，因为另一列设置为`NULL`？如果我改为将第二列从存储过程更改`NULL`为`' '`正常工作......我真的很困惑为什么在选择语句中生成的`varchar`列和`NULL`列之间的联合会引发这样的错误......有什么想法吗？

编辑：我正在寻找解释而不是解决方案......

编辑2：运行以下代码：

```
CREATE VIEW vw_myview
AS
SELECT NULL AS MyColumn

EXECUTE sp_help vw_myview 
```

回报：

```
 Type    Column_name
     int       MyColumn 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T12:03:55.317

问题是`NULL`（在一些回旋余地内）*每种*数据类型的成员。

在运行任何`SELECT`查询时，每一列的内容必须是一种类型，并且只能是一种类型。当一列（包括s）中存在混合值时`NULL`，显然可以通过检查非值的类型来确定类型`NULL`，并根据需要进行适当的转换。

但是，当所有行都包含`NULL`特定列，并且`NULL`尚未转换为特定类型时，则没有可使用的类型信息。因此，SQL Server 有点武断地决定该列的类型是`int`.

```
create view V1
as
    select 'abc' as Col1,null as Col2
go
create view V2
as
    select 'abc' as Col1,CAST(null as varchar(100)) as Col2 
```

`V1`具有类型`varchar(3)`和的列`int`。

`V2`具有类型`varchar(3)`和的列`varchar(100)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T11:35:27.023

我希望该字段的类型由联合中的第一个 SELECT 确定。您可以尝试更改两个选择的顺序或更改为 CAST(NULL AS VARCHAR(...))。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:33:27.420

我认为您需要转换为相同的数据类型：

```
---
AS  

SELECT [centrename]  
      ,[Name]  
      ,CAST(NULL AS VARCHAR(MAX)) AS [Username] 
FROM  [DB1].[dbo].[vw_Learners]  
WHERE [centrename] = @centrename  

UNION  
--- 
```

# ruby-on-rails - TextMate、Cucumber 和 Spork：运行功能**带有** HTML 输出？

> ID：11431652
> 
> 赞同：1
> 
> 时间：2012-07-11T11:27:45.403
> 
> 标签：ruby-on-rails, cucumber, textmate, spork

我使用 Cucumber 测试我的 Rails 应用程序，并且由于运行了 Spork，我不必在每次运行场景时都启动整个 Rails 应用程序。

我在 TextMate 中设置了`TM_CUCUMBER_OPTS`to `--drb`，它工作得很好，但它导致结果的格式很尴尬：它只是文本，不再是 HTML。

有什么办法可以解决吗？我尝试了 --format=html，但这会导致：

```
Running: /Users/josh/.rvm/bin/rvm-auto-ruby /Users/josh/Documents/Work/Sientia/iq/script/cucumber 
/Users/josh/Documents/Work/Sientia/iq/features/authorization/sign_out.feature --drb --format=html
    Using the default profile...
    Disabling profiles...
    Exception encountered: #<RuntimeError: All but one formatter must use --out, only one can print to each stream (or STDOUT)>
    backtrace:
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/cucumber-1.2.1/lib/cucumber/cli/configuration.rb:198:in `arrange_formats'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/cucumber-1.2.1/lib/cucumber/cli/configuration.rb:26:in `parse!'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:55:in `configuration'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:63:in `run_drb_client'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/cucumber-1.2.1/lib/cucumber/cli/main.rb:34:in `execute!'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/test_framework/cucumber.rb:24:in `run_tests'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:13:in `block in run'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/forker.rb:21:in `block in initialize'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/forker.rb:18:in `fork'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/forker.rb:18:in `initialize'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `new'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/run_strategy/forking.rb:9:in `run'
    /Users/josh/.rvm/gems/ruby-1.9.3-p0@iq/gems/spork-0.9.2/lib/spork/server.rb:48:in `run'
    /Users/josh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/drb/drb.rb:1548:in `perform_without_block'
    /Users/josh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/drb/drb.rb:1508:in `perform'
    /Users/josh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/drb/drb.rb:1586:in `block (2 levels) in main_loop'
    /Users/josh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/drb/drb.rb:1582:in `loop'
    /Users/josh/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/drb/drb.rb:1582:in `block in main_loop' 
```

关于如何解决这个问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:16:44.160

Jim Drannbauer 的解决方案为我工作：http: [//jimdrannbauer.com/2011/02/22/cucumber-spork-textmate-drb-drbunknown/](http://jimdrannbauer.com/2011/02/22/cucumber-spork-textmate-drb-drbunknown/)

# c - printf 动态长度/大小

> ID：11431655
> 
> 赞同：0
> 
> 时间：2012-07-11T11:27:52.970
> 
> 标签：c

我正在尝试为 lcd 创建动态 printf 大小，但它只输出 f= 我做错了什么？

```
sprintf(buffer, "f=%.2f",  (d = d + 0.01)); <-- works but not dynamic 

sprintf(buffer, "f=%.*f", 2 , (d = d + 0.01));  <-- Does not any give warning

lcd_puts(buffer);

_delay_ms(100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:35:26.217

可能你需要这个：

```
字符格式[10]；
int len1 = 5, len2 = 2;
sprintf(格式, "f=%%%d.%df", len1, len2);
sprintf（缓冲区，格式，（d = d + 0.01））；

```

# java - Java 5 及以上版本的迭代器接口实现在哪里？

> ID：11431657
> 
> 赞同：3
> 
> 时间：2012-07-11T11:28:06.913
> 
> 标签：java, iterator

由于 Iterator 是具有 hasNext()、next() 和 remove() 方法的接口。但是 Java 类中所有这些方法的实现在哪里呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:29:15.787

几乎每个具体集合都有自己的实现，并针对该特定集合进行了优化。您不必担心细节。但这里有一些例子：

*   `LinkedList`-[`class ListItr implements ListIterator<E>`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java#687)
*   `ArrayList`-[`class ListItr extends Itr implements ListIterator<E>`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/AbstractList.java#390)
*   `HashSet`- 实际上支持[`HashMap.keySet()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/AbstractMap.java#317)

因为`Iterator`是一个接口，你可以用它做一些花哨的事情，比如包装和装饰它，而不用关注实际的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:46:26.133

`Iterator`接口被实现为实现接口的类/接口中*的*内部*和*私有*（*应该但不一定）类。-方法允许一个对象成为“foreach”语句的目标。 *`java.lang.Iterable<T>``Iterable<T>``Iterator<T> iterator()`*

 *有关更多信息，请阅读 @Andreas Grech 的博客：[Java 的迭代器和迭代器](http://blog.dreasgrech.com/2010/03/javas-iterators-and-iterables.html)*

# hypertable - 如何使用 php 解析 Hypertable 数据

> ID：11431662
> 
> 赞同：0
> 
> 时间：2012-07-11T11:28:18.660
> 
> 标签：hypertable

我已经在 Hypertable 中插入了数据。但我不知道，如何从结果中获得特定的价值。我的 PHP 节俭代码是：

```
 $GLOBALS['THRIFT_ROOT'] = "/opt/hypertable/0.9.5.6/lib/php";

    require_once $GLOBALS['THRIFT_ROOT'].'/ThriftClient.php';

    $client = new Hypertable_ThriftClient("localhost", 38080);

    $namespace = $client->namespace_open("appuniv");

    $query = "select * from category_details limit 1";

    $tab = $client->hql_query($namespace, $query);

    var_dump($tab); 
```

我得到以下结果：

> object(Hypertable_ThriftGen_HqlResult)#24 (4) { ["results"]=> NULL ["cells"]=> array(2) { [0]=> object(Hypertable_ThriftGen_Cell)#25 (2) { ["key"] => object(Hypertable_ThriftGen_Key)#26 (6) { ["row"]=> string(32) "077262cc53a1fb1b5f651d31b6bf81ba" ["column_family"]=> string(8) "category" ["column_qualifier"]=> string(4 ) "name" ["timestamp"]=> float(1.3419935154984E+18) ["revision"]=> float(1.3419935154984E+18) ["flag"]=> int(255) } ["value"]= > string(7) "Medical" } [1]=> object(Hypertable_ThriftGen_Cell)#27 (2) { ["key"]=> object(Hypertable_ThriftGen_Key)#28 (6) { ["row"]=> string( 32) “077262cc53a1fb1b5f651d31b6bf81ba”["column_family"]=> string(8) "category" ["column_qualifier"]=> string(4) "type" ["timestamp"]=> float(1.3419935154984E+18) ["revision"]=> float (1.3419935154984E+18) ["flag"]=> int(255) } ["value"]=> string(7) "android" } } ["scanner"]=> NULL ["mutator"]=> NULL 0.9678

我可以知道如何从上述结果中获取**["value"]=> string(7) "Medical"值。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:26:32.867

```
/**
 * Sort result by column family/qualifier
 * @param thrift result
 */
private function sort($data)
{
    $result = array();
    foreach ($data as $cell)
    {
        $row = $cell->key->row;
        if (!isset($result[$row])) {
            $result[$row] = new stdClass;
            $result[$row]->row = $cell->key->row;
            foreach ($this->columns as $col) {
                $pos = strpos($col, ':') ;
                $qualifier = ($pos) ? substr($col, $pos + 1) : NULL;
                $col = !$pos ? $col : substr($col, 0, $pos);
                if (!$qualifier)
                    $result[$row]->{$col} = NULL;
                else if ($qualifier[0] != '/')
                    $result[$row]->{$col}[$qualifier] = NULL;
            }
        }
        $result[$row]->{$cell->key->column_family}[$cell->key->column_qualifier] = $cell->value;
    }
    return $result;
} 
```

# android - Google Cloud Messaging 客户端未收到来自服务器 (GCM) 的消息

> ID：11431664
> 
> 赞同：1
> 
> 时间：2012-07-11T11:28:21.107
> 
> 标签：android, cloud, messaging

> **可能重复：**
> [android GCM 不起作用](https://stackoverflow.com/questions/11409119/android-gcm-doesnt-work)

使用 GCM 演示项目，我设法注册了一些设备（在网站上，在 Tomcat 服务器中运行，我可以看到它们列出）但是当我单击“发送消息”按钮时，客户端没有任何反应，没有收到任何消息。

Tomcat 日志显示：

```
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET / HTTP/1.1" 200 11444
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /tomcat.css HTTP/1.1" 200 5926
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /tomcat.png HTTP/1.1" 200 5103
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /bg-upper.png HTTP/1.1" 200 3103
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /bg-nav.png HTTP/1.1" 200 1401
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /asf-logo.png HTTP/1.1" 200 17811
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /bg-middle.png HTTP/1.1" 200 1918
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /bg-button.png HTTP/1.1" 200 713
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:10:57 +0200] "GET /favicon.ico HTTP/1.1" 200 21630
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:11:06 +0200] "GET /gcm HTTP/1.1" 404 974
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:11:30 +0200] "GET /gcm-demo HTTP/1.1" 302 -
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:11:30 +0200] "GET /gcm-demo/ HTTP/1.1" 200 134
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:11:30 +0200] "GET /gcm-demo/favicon.png HTTP/1.1" 200 949
172.20.5.53 - - [11/Jul/2012:11:14:27 +0200] "POST /gcm-demo/register HTTP/1.1" 200 -
172.20.5.53 - - [11/Jul/2012:11:14:27 +0200] "POST /gcm-demo/register HTTP/1.1" 200 -
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:14:43 +0200] "GET /gcm-demo/ HTTP/1.1" 200 235
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:14:52 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 319
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:15:09 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 319
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:15:33 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 319
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:15:41 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 319
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:23:35 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 319
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:23:56 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 319
172.20.5.53 - - [11/Jul/2012:11:28:21 +0200] "POST /gcm-demo/register HTTP/1.1" 200 -
172.20.5.53 - - [11/Jul/2012:11:28:21 +0200] "POST /gcm-demo/register HTTP/1.1" 200 -
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:28:51 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 403
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:29:02 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 403
0:0:0:0:0:0:0:1 - - [11/Jul/2012:11:56:09 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 403
0:0:0:0:0:0:0:1 - - [11/Jul/2012:12:12:21 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 403
0:0:0:0:0:0:0:1 - - [11/Jul/2012:12:37:13 +0200] "POST /gcm-demo/sendAll HTTP/1.1" 200 403 
```

有什么线索吗？这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.google.android.gcm.demo.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <permission
        android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <uses-permission
        android:name="com.google.android.gcm.demo.app.permission.C2D_MESSAGE" />

    <uses-permission
        android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- Main activity. -->
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.google.android.gcm.demo.app.DemoActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.google.android.gcm.demo.app" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

我在 11 sdk 版本的设备上进行测试。

提前致谢。

# java - 如何避免警告“使用集合提取指定的 firstResult/maxResults；在内存中应用！” 什么时候使用休眠？

> ID：11431670
> 
> 赞同：45
> 
> 时间：2012-07-11T11:28:31.113
> 
> 标签：java, hibernate, jpa, jpql, ejb-3.0

我在服务器日志中收到警告**“使用集合提取指定的 firstResult/maxResults；在内存中应用！”** . 但是一切正常。但我不想要这个警告。

## 我的代码是

```
public employee find(int id) {
    return (employee) getEntityManager().createQuery(QUERY).setParameter("id", id).getSingleResult();
} 
```

## 我的查询是

```
QUERY = "from employee as emp left join fetch emp.salary left join fetch emp.department where emp.id = :id" 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-09-13T10:54:48.710

尽管您得到了有效的结果，但 SQL 查询会获取所有数据，但效率并没有达到应有的水平。

所以，你有两个选择。

## 修复了两个可以在读写模式下获取实体的 SQL 查询的问题

解决此问题的最简单方法是执行两个查询：

. 第一个查询将获取与提供的过滤条件匹配的根实体标识符。. 第二个查询将使用先前提取的根实体标识符来获取父实体和子实体。

这种方法很容易实现，如下所示：

```
List<Long> postIds = entityManager
.createQuery(
    "select p.id " +
    "from Post p " +
    "where p.title like :titlePattern " +
    "order by p.createdOn", Long.class)
.setParameter(
    "titlePattern",
    "High-Performance Java Persistence %"
)
.setMaxResults(5)
.getResultList();

List<Post> posts = entityManager
.createQuery(
    "select distinct p " +
    "from Post p " +
    "left join fetch p.comments " +
    "where p.id in (:postIds) "  +
    "order by p.createdOn", Post.class)
.setParameter("postIds", postIds)
.setHint(
    "hibernate.query.passDistinctThrough", 
    false
)
.getResultList(); 
```

## 修复了一个 SQL 查询只能在只读模式下获取实体的问题

第二种方法是对匹配我们过滤条件的父子实体的结果集使用 SDENSE_RANK，并仅限制前 N 个帖子条目的输出。

SQL 查询如下所示：

```
@NamedNativeQuery(
    name = "PostWithCommentByRank",
    query =
        "SELECT * " +
        "FROM (   " +
        "    SELECT *, dense_rank() OVER (ORDER BY \"p.created_on\", \"p.id\") rank " +
        "    FROM (   " +
        "        SELECT p.id AS \"p.id\", " +
        "               p.created_on AS \"p.created_on\", " +
        "               p.title AS \"p.title\", " +
        "               pc.id as \"pc.id\", " +
        "               pc.created_on AS \"pc.created_on\", " +
        "               pc.review AS \"pc.review\", " +
        "               pc.post_id AS \"pc.post_id\" " +
        "        FROM post p  " +
        "        LEFT JOIN post_comment pc ON p.id = pc.post_id " +
        "        WHERE p.title LIKE :titlePattern " +
        "        ORDER BY p.created_on " +
        "    ) p_pc " +
        ") p_pc_r " +
        "WHERE p_pc_r.rank <= :rank ",
    resultSetMapping = "PostWithCommentByRankMapping"
)
@SqlResultSetMapping(
    name = "PostWithCommentByRankMapping",
    entities = {
        @EntityResult(
            entityClass = Post.class,
            fields = {
                @FieldResult(name = "id", column = "p.id"),
                @FieldResult(name = "createdOn", column = "p.created_on"),
                @FieldResult(name = "title", column = "p.title"),
            }
        ),
        @EntityResult(
            entityClass = PostComment.class,
            fields = {
                @FieldResult(name = "id", column = "pc.id"),
                @FieldResult(name = "createdOn", column = "pc.created_on"),
                @FieldResult(name = "review", column = "pc.review"),
                @FieldResult(name = "post", column = "pc.post_id"),
            }
        )
    }
) 
```

获取与提供的标题匹配的`@NamedNativeQuery`所有 Post 实体及其关联的`PostComment`子实体。`DENSE_RANK`Window Function 用于为每个 Post 和 join 记录分配排名，以便`PostComment`我们稍后可以过滤我们有兴趣获取的 Post 记录的数量。

`SqlResultSetMapping`提供了 SQL 级别的列别名和需要填充的 JPA 实体属性之间的映射。

现在，我们可以`PostWithCommentByRank` `@NamedNativeQuery`这样执行：

```
List<Post> posts = entityManager
.createNamedQuery("PostWithCommentByRank")
.setParameter(
    "titlePattern",
    "High-Performance Java Persistence %"
)
.setParameter(
    "rank",
    5
)
.unwrap(NativeQuery.class)
.setResultTransformer(
    new DistinctPostResultTransformer(entityManager)
)
.getResultList(); 
```

现在，默认情况下，像这样的原生 SQL 查询`PostWithCommentByRank`会在同一 JDBC 行中获取 Post 和 the `PostComment`，所以我们最终会得到一个`Object[]`包含两个实体的。

但是，我们希望将表格`Object[]`数组转换为父子实体树，因此，我们需要使用 Hibernate [`ResultTransformer`](https://vladmihalcea.com/why-you-should-use-the-hibernate-resulttransformer-to-customize-result-set-mappings/)。

`DistinctPostResultTransformer`外观如下：

```
public class DistinctPostResultTransformer
        extends BasicTransformerAdapter {

    private final EntityManager entityManager;

    public DistinctPostResultTransformer(
            EntityManager entityManager) {
        this.entityManager = entityManager;
    }

    @Override
    public List transformList(
            List list) {

        Map<Serializable, Identifiable> identifiableMap =
            new LinkedHashMap<>(list.size());

        for (Object entityArray : list) {
            if (Object[].class.isAssignableFrom(entityArray.getClass())) {
                Post post = null;
                PostComment comment = null;

                Object[] tuples = (Object[]) entityArray;

                for (Object tuple : tuples) {
                    if(tuple instanceof Identifiable) {
                        entityManager.detach(tuple);

                        if (tuple instanceof Post) {
                            post = (Post) tuple;
                        }
                        else if (tuple instanceof PostComment) {
                            comment = (PostComment) tuple;
                        }
                        else {
                            throw new UnsupportedOperationException(
                                "Tuple " + tuple.getClass() + " is not supported!"
                            );
                        }
                    }
                }

                if (post != null) {
                    if (!identifiableMap.containsKey(post.getId())) {
                        identifiableMap.put(post.getId(), post);
                        post.setComments(new ArrayList<>());
                    }
                    if (comment != null) {
                        post.addComment(comment);
                    }
                }
            }
        }
        return new ArrayList<>(identifiableMap.values());
    }
} 
```

必须分离正在获取的[`DistinctPostResultTransformer`](https://vladmihalcea.com/fix-hibernate-hhh000104-entity-fetch-pagination-warning-message/)实体，因为我们正在覆盖子集合，并且我们不希望它作为实体状态转换传播：

```
post.setComments(new ArrayList<>()); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-11T11:45:04.040

出现此警告的原因是，当使用 fetch join 时，结果集中的顺序仅由所选实体的 ID 定义（而不是由 join fetched 定义）。

如果内存中的这种排序导致问题，请不要将 firsResult/maxResults 与 JOIN FETCH 一起使用。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-08T12:45:59.000

为避免此警告，您必须将调用更改`getSingleResult`为 `getResultList().get(0)`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-04-25T08:24:59.583

此警告告诉您 Hibernate 正在内存中执行 java 分页。这可能会导致高 JVM 内存消耗。由于开发人员可能会错过这个警告，我通过添加一个允许抛出异常而不是记录警告的标志来为 Hibernate 做出贡献（[https://hibernate.atlassian.net/browse/HHH-9965](https://hibernate.atlassian.net/browse/HHH-9965)）。

该标志是**hibernate.query.fail_on_pagination_over_collection_fetch**。

我建议大家启用它。

该标志在**org.hibernate.cfg.AvailableSettings**中定义：

```
 /**
     * Raises an exception when in-memory pagination over collection fetch is about to be performed.
     * Disabled by default. Set to true to enable.
     *
     * @since 5.2.13
     */
    String FAIL_ON_PAGINATION_OVER_COLLECTION_FETCH = "hibernate.query.fail_on_pagination_over_collection_fetch"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-19T11:42:10.767

问题是你会得到笛卡尔积做 JOIN。偏移量将减少您的记录集，而无需查看您是否仍在同一根身份类上

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-12T00:53:16.523

我猜 emp 有很多部门，这是一对多的关系。Hibernate 将使用获取的部门记录为该查询获取许多行。因此，在真正将结果提取到内存之前，无法确定结果集的顺序。所以分页将在内存中完成。

如果你不想用emp去获取部门，但仍然想根据部门做一些查询，你可以达到没有警告的结果（不做内存排序）。为此，您必须删除“获取”子句。如下所示：

QUERY = "从员工作为 emp left join emp.salary sal left join emp.department dep where emp.id = :id and dep.name = 'testing' and sal.salary > 5000 "

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-18T03:30:18.643

正如其他人指出的那样，您通常应该避免同时使用“JOIN FETCH”和 firstResult/maxResults。
如果您的查询需要它，您可以使用它`.stream()`来消除警告并避免潜在的 OOM 异常。

```
try (Stream<ENTITY> stream = em.createQuery(QUERY).stream()) {
    ENTITY first = stream.findFirst().orElse(null); // equivalents .getSingleResult()
} 
```

//`Stream`返回的是一个需要手动关闭的IO流。

# c# - Linq 查询中的不同

> ID：11431671
> 
> 赞同：3
> 
> 时间：2012-07-11T11:28:32.393
> 
> 标签：c#, linq

我怎样才能使这个 Distinct 工作：

```
 var blockIdMap = (from panelEntry in panelEntries
                          select new {panelEntry.BlockNo, panelEntry.BlockID})
                          .Distinct()
                          .ToDictionary(mc => mc.BlockNo , mc => mc.BlockID); 
```

我只需要 BlockNo 的唯一条目及其 BlockId，因为我将它们输入到 Dictionary 并且 BlockNo 应该是唯一的。我只想拿第一个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:30:58.797

```
var blockIdMap = panelEntries.GroupBy(pe => pe.BlockNo)
            .ToDictionary(k => k.Key, v => v.First()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:48:50.230

在这种情况下，您的 linq 查询不起作用，因为[`.Distinct()`](http://msdn.microsoft.com/en-gb/library/bb348436.aspx)方法 equals `panelEntry.BlockNo`and`panelEntry.BlockID`而 not only `panelEntry.BlockNo`。所以一个解决方案可以使用[MoreLinq](http://code.google.com/p/morelinq/downloads/detail?name=morelinq-1.0-beta.zip)和方法`.DistinctBy()`：

```
var blockIdMap = (from panelEntry in panelEntries
                 select new {panelEntry.BlockNo, panelEntry.BlockID})
                 .DistinctBy(mc => mc.BlockNo)
                 .ToDictionary(mc => mc.BlockNo , mc => mc.BlockID); 
```

# android - 在 GLSurfaceView 而不是 SurfaceView 中播放视频

> ID：11431676
> 
> 赞同：4
> 
> 时间：2012-07-11T11:28:49.263
> 
> 标签：android, surfaceview, glsurfaceview

我已经为此苦苦挣扎了 2 天......按照这个答案：[https](https://stackoverflow.com/a/2006454/444324) ://stackoverflow.com/a/2006454/444324 - 提到可以通过更改 MediaPlayerDemo_Video 示例在 GLSurfaceView 中播放视频在 API 演示中：

> 您所要做的就是在 MediaPlayerDemo_Video.java 文件以及相应的布局文件 (mediaplayer_2.xml) 中将 SurfaceView 替换为 GLSurfaceView。
> 
> 您还需要创建一个自定义 Renderer 类（实现 GLSurfaceView.Renderer 接口的类）并将其设置为您的 GLSurfaceView。

我尝试按照建议将 SurfaceView 替换为 GLSurfaceView ，也[使用它](https://stackoverflow.com/q/2108600/444324)，但它只是在启动时崩溃：

```
07-11 14:54:22.086: E/AndroidRuntime(12373): FATAL EXCEPTION: main
07-11 14:54:22.086: E/AndroidRuntime(12373): java.lang.NullPointerException
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.opengl.GLSurfaceView.surfaceCreated(GLSurfaceView.java:512)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.view.SurfaceView.updateWindow(SurfaceView.java:533)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.view.SurfaceView.access$000(SurfaceView.java:81)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1617)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.os.Looper.loop(Looper.java:137)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at android.app.ActivityThread.main(ActivityThread.java:4575)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at java.lang.reflect.Method.invokeNative(Native Method)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at java.lang.reflect.Method.invoke(Method.java:511)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-11 14:54:22.086: E/AndroidRuntime(12373):    at dalvik.system.NativeStart.main(Native Method) 
```

我知道我可以使用 VideoView 播放视频，或者只使用带有 MediaPlayer 的 SurfaceView，但我必须使用 GLSurfaceView，因为我需要在相机表面视图上播放此视频。

谢谢！

相关代码：我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.commonsware.android.camera.MyGLSurfaceView
        android:id="@+id/surface"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" />

</LinearLayout> 
```

我的课：

```
public class MediaPlayerDemo_Video extends Activity implements
        OnBufferingUpdateListener, OnCompletionListener,
        OnPreparedListener, OnVideoSizeChangedListener, SurfaceHolder.Callback {

    private MediaPlayer mMediaPlayer;
    private MyGLSurfaceView mPreview;
    private SurfaceHolder holder;

    /**
     * 
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.mediaplayer_2);
        mPreview = (MyGLSurfaceView) findViewById(R.id.surface);
        holder = mPreview.getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    }
} 
```

MyGLSurfaceView 类：

```
class MyGLSurfaceView extends android.opengl.GLSurfaceView {
    public MyGLSurfaceView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:02:05.460

好的，解决了这个问题......我有几个错误，但我在问题中出现的最后一个错误是通过将此代码添加到 onCreate 来解决的：

```
mPreview.setRenderer(new Renderer() {

            @Override
            public void onSurfaceCreated(GL10 gl, EGLConfig config) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onSurfaceChanged(GL10 gl, int width, int height) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onDrawFrame(GL10 gl) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T19:16:33.577

查看此处提供的代码，用于使用带有 GLSurfaceView 的 OpenGL ES 2.0 播放视频

[https://github.com/satish13131/Android_Programs/tree/master/graphics/opengl/video/surfaceview](https://github.com/satish13131/Android_Programs/tree/master/graphics/opengl/video/surfaceview)

它涉及视频的 OpenGL 渲染

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:35:04.643

在你引用的一个地方，另一个地方是`android.opengl.GLSurfaceView`来自`com.commonsware.android.camera.GLSurfaceView`不同包的不同 GLSurfaceView 类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:36:20.913

为什么要实现一个`com.commonsware.android.camera.GLSurfaceView`与 同名的类（）`GLSurfaceView`？

如果您将视图声明为`android.opengl.GLSurfaceView`布局 XML，则无法将其强制转换为`com.commonsware.android.camera.GLSurfaceView`

# excel - VBA 如何发送异步 XMLHTTP 请求？

> ID：11431677
> 
> 赞同：3
> 
> 时间：2012-07-11T11:28:51.590
> 
> 标签：excel, vba, asynchronous, xmlhttprequest

为了从 Excel 中的 web 服务获取数据，我创建了一个 excel 插件提供函数来获取它；用户只需要输入单元格： `=sendRequest("http://webservice.com")`

我有 2 个 excel 文件来演示`sending request`两种方法：1.[同步](https://dl.dropbox.com/u/60740207/TestHttpReqest%20-%20Sync.xlsm)和 2.[异步](https://dl.dropbox.com/u/60740207/TestHttpReqest%20-%20ASync.xlsm)

在`sync`方法中，该函数可以正常发送请求和获取数据。但是，如果我们**有 100、200 个单元**格调用它，Excel 将花费大量时间等待；这也使得 Exel**没有响应**。

我目前的解决方案是使用[如下代码](http://www.dailydoseofexcel.com/archives/2006/10/09/async-xmlhttp-calls/)`async`的方法

```
Public Function sendAsyncRequest(URL)
    'other statement

    ' Get some stuff asynchronously.
    xmlHttpRequest.Open "GET", URL, True
    xmlHttpRequest.send
    sendAsyncRequest = xmlHttpRequest.responseText
End Function 
```

但单元格的值始终为零 0 而不是响应文本。

我必须使用我的处理程序类将其与`OnReadyStateChange`of绑定，`xmlHttpRequest object`以将响应文本设置到单元格中。但是，它也会清除单元格的公式。

所以我的问题是**如何在不更改其公式的情况下更改单元格的显示文本？**

我也欢迎另一种发送请求并在`async`方法下获取返回值的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:13:39.887

这是我针对您的问题的[解决方案文件](https://dl.dropbox.com/u/6194904/2012/TestHttpReqest%20-%20ASync.xlsm)；确实它是从您的[异步测试文件](https://dl.dropbox.com/u/60740207/TestHttpReqest%20-%20ASync.xlsm)中更新的。

基于[此](https://stackoverflow.com/a/11430370/248616)讨论，您可以`change the display text of cell without changing its formula`使用 Range(yourCellAddress).NumberFormat = "0;0;0;""要显示的值"""

所以对于你的问题，解决方案是

1.  在您的`sendAsyncRequest`函数中将返回行替换为

    `sendAsyncRequest = "anything other than numbers"`

2.  在你的`ReadyStateChangeHandler`潜艇，更换

    `Application.Range(cellAddress).Value = XMLHttpReq.responseText 'return responseText to cell`

经过

```
cellDisplayText = XMLHttpReq.responseText
Range(cellAddress).NumberFormat = "0;0;0;""" & cellDisplayText & """" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:38:05.180

As the downside of the solution stated [here](https://stackoverflow.com/a/11434587/248616), the proper way to get the async return value for the function is to 1) **cache** your `request's url => returned value` to a collection/dictionary, and then 2) **refresh** your formula

# python - Python MySQL 与 Ruby MySQL

> ID：11431679
> 
> 赞同：0
> 
> 时间：2012-07-11T11:28:57.650
> 
> 标签：python, mysql, ruby

我正在编写一个要作为 cron 运行的脚本，我想知道，Ruby MySQL 或 Python MySQL 在速度/效率方面有什么不同吗？我会更好地使用 PHP 来完成这项任务吗？

该脚本将从具有 20 多个字段的 mysql 数据库中获取数据，并每隔 X 分钟将它们存储在另一个表中。不需要对数据进行太多处理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T11:36:03.357

只需选择您觉得最舒服的语言即可。它不应该有明显的区别。

编写应用程序后，您可以搜索瓶颈并对其进行优化

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T11:36:01.797

为什么要使用外部脚本？您可以只使用[事件调度程序](http://dev.mysql.com/doc/refman/5.1/en/events.html)来调用存储过程。

# .net - 如何正确覆盖引发事件的方法

> ID：11431684
> 
> 赞同：0
> 
> 时间：2012-07-11T11:29:07.890
> 
> 标签：.net, vb.net, events, inheritance, overriding

我有一个 MyCol 类，它继承自 ObservableCollection(Of T)。它以这种方式覆盖 InsertItem 方法：

```
Public Event PreInsertItem As EventHandler(Of EventArgs)

Protected Overridable Sub OnPreInsertItem(e As EventAtgs)
    RaiseEvent PreInsertItem(Me, e)
End Sub

Protected Overrides Sub InsertItem(index As Integer, item As T)
    OnPreInsertItem(EventArgs.Empty)

    MyBase.InsertItem(index, item)
End Sub 
```

如您所见，我添加了一个事件，每次将项目添加到 MyCol 集合时都会引发该事件。

接下来我创建另一个类 MyColSubClass，它继承自 MyCol，并且还覆盖了 InsertItem 方法：

```
Public Overrides Sub InsertItem(index as Integer, item as T)
    OnPreInsertItem(EventArgs.Empty)

    ' some additional code goes here

    MyBase.InsertItem(index, item)
End Sub 
```

**问题：**

现在，当我使用 MyColSubClass 的一个实例并添加一个项目时，*PreInsertItem*事件会引发两次：首先是在 MyColSubClass 中，然后是在 MyCol 中。

我应该使用什么设计模式来使 PreInsertItem 事件只引发一次：在 MyColSubClass 中？

注意

示例中显示的类和事件是从现实生活中的应用程序简化而来的，但假设它们显示了应用程序的确切结构。在最后一个继承的类中引发事件是必须的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:05:30.073

如果您确定基类会引发事件，那么在派生类中这样做是没有用的。

只需将您的覆盖更改为：

```
Public Overrides Sub InsertItem(index as Integer, item as T)
    ' some additional code goes here

    MyBase.InsertItem(index, item)
End Sub 
```

那应该没问题。

但是，如果您更改派生方法并停止调用 MyBase.InsertItem(...)，您应该在覆盖中引发事件以确保它被引发：

```
Public Overrides Sub InsertItem(index as Integer, item as T)
    ' some additional code goes here

    OnPreInsertItem(EventArgs.Empty)

    ' insert your item and do whatever...
End Sub 
```

**编辑**

如果您需要更改引发事件的方式，但想确保它只引发一次，只需覆盖派生类中的 OnPreInsertItem 方法：

```
Protected Overrides Sub OnPreInsertItem(e as EventArgs)
    ' Do wahetever you need here, change e, add info, whatever...
    ' ...
    ' Then raise the event (or call MyBase.OnPreInsertItem, as you like)
    RaiseEvent PreInsertItem(Me, e)
End Sub

Public Overrides Sub InsertItem(index as Integer, item as T)
    ' some additional code goes here

    ' This will work only if MyBase.InsertItem calls OnPreInsertItem. 
    ' Otherwise, you have to handle the insertion and raise the event
    ' yourself without calling the base method.
    MyBase.InsertItem(index, item)
End Sub 
```

由于 OnPreInsertItem 是可重写的，因此当您在派生类中插入项目时，将调用派生类的版本。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:09:46.503

我认为你不应该`OnPreInsertItem`在你的子类 MyColSubClass 中提出。
你的方法应该是这样的：

```
Public Overrides Sub InsertItem(index as Integer, item as T)
    ' some additional code goes here

    MyBase.InsertItem(index, item)
End Sub 
```

您正在扩展基类的某些功能。如果您要替换该特定功能，那么您的方法应该是这样的：

```
Public Overrides Sub InsertItem(index as Integer, item as T)
    OnPreInsertItem(EventArgs.Empty)

    ' some additional code goes here

End Sub 
```

[您可以在此处](http://en.wikipedia.org/wiki/Method_overriding)和[此处](http://en.wikipedia.org/wiki/Implementation_inheritance#Overriding)找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:40:18.380

如果我做对了，您想在不同的继承级别上向 EventArg 类添加信息。在这种情况下，在我看来，提供与引发事件相同级别的 EventArg 成员是最好的解决方案，而 InsertItem() 的所有覆盖只是修改此 EventArg 成员，事件以及此 eventargs 仅在尽可能高的情况下引发等级。

# c++ - 使用参数覆盖删除

> ID：11431685
> 
> 赞同：7
> 
> 时间：2012-07-11T11:29:13.747
> 
> 标签：c++

我可以用不同的参数覆盖全局`operator new`，例如我可以有：

```
void* operator new (std::size_t size) throw (std::bad_alloc);
void* operator new (std::size_t size, int num) throw (std::bad_alloc); 
```

可以单独称为

```
int* p1 = new int; // calls new(size_t)
int* p2 = new(5) int; // calls new(size_t, int) 
```

由于它们中的每一个都可能使用一些不同的分配方案，所以我需要一个单独的`delete()`函数。但是，`delete(void*)`不能以同样的方式重载！`delete(void*)`是唯一有效的签名。那么上述情况该如何处理呢？

PS我并不是说这是一个好主意。这种事情发生在我身上，所以我在 c++ 中发现了这个“缺陷”（至少在我看来）。如果语言允许`new`覆盖，它*必须*允许`delete`覆盖，否则它变得无用。所以我想知道是否有办法解决这个问题，而不是这是一个好主意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T12:23:24.143

> 我可以用不同的参数覆盖全局运算符 new

这些被称为*布局分配函数*。

> delete(void*) 是唯一有效的签名。

不。

首先，一些术语：一个*delete 表达式*例如`delete p`不仅仅是一个函数调用，它调用析构函数然后调用一个*释放函数*，这是`operator delete`由重载决议选择的一些重载。

您*可以*使用签名覆盖`operator delete`以匹配您的放置分配函数，*但*只有在放置 new 表达式调用的构造函数引发异常时才会使用该重载，例如

```
struct E {
    E() { throw 1; }
};

void* operator new(std::size_t n, int) throw(std::bad_alloc) { return new char[n]; }
void operator delete(void* p, int)  { std::puts("hello!"); delete[] (char*)p; }

int main()
{
    try {
        new (1) E;
    } catch (...) {
        puts("caught");
    }
} 
```

与所使用的放置新表达式的形式相匹配的放置释放函数（在这种情况下，它有一个参数*）*`int`由重载决议找到并调用以释放存储空间。

因此，您可以提供“放置删除”功能，只是不能显式调用它们。您需要记住如何分配对象并确保使用相应的解除分配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T11:32:41.623

如果您跟踪使用不同重载分配的不同内存区域，则可以使用调用`new`的版本标记它们。`new`

然后`delete`有时您可以查找地址以查找`new`被调用的地址，并在每种情况下执行不同的操作。

这样，您可以保证正确的逻辑自动与每个不同的`new`重载相关联。

正如巴鲁克在下面的评论中指出的那样，维护用于跟踪的数据会产生性能开销，并且只要重载删除未传递使用默认删除分配的任何内容，此逻辑也将起作用。

至于跟踪开销，在我看来，跟踪分配类型的最小开销方法是分配请求的数量，加上在分配区域开始时标记请求类型的少量额外空间（尺寸根据保守的对齐要求）。然后，您可以在删除时查看此标记区域以确定要遵循的逻辑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T12:05:03.327

有一个与放置操作*符*new 匹配的放置删除。*而且你不能直接调用它*。这是因为放置删除仅用于在新对象的构造函数抛出时释放内存。

```
void *operator new(size_t, Area&); // placement new
void operator delete(void*, Area&); // matching placement delete
...
Area &area;
SomeType *t=new(area) SomeType(); 
// when SomeType() throws then `delete(t,area)` from above is called

// but you can't do this: 
delete (area) t; 
```

克服这个问题的一种常见方法是使用编写一个重载的“销毁”函数，该函数接受各种参数。

```
template<class T> void destroy(Area &a, T* &pt) //<-you can't do this with 'delete'
{
 if (pt) { 
    pt->~T();        // run the destructor
    a.freeMem(pt);   // deallocate the object
    pt=NULL; // nulls the pointer on the caller side.
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T12:14:49.380

简单的答案是：不要这样做。所有形式的非放置`new`在 C++11 中都是多余的并且非常不安全，例如，返回原始指针。如果您想在自定义位置分配对象，那么如果有状态则使用带有`allocate`函数的类，否则使用自由函数。`new`实际上，最好的处理方法`delete`是将它们从您的程序中删除，但可能存在偏见，但`placement new`.

编辑：它对你没用的*原因*是因为你试图将它用于它不打算用于的目的。您可以将额外参数用于日志记录或其他行为控制之类的东西。你不能真正改变`new`and的基本语义`delete`。如果你需要有状态的分配，你*必须*使用一个类。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-11T12:05:15.477

你错了。可以提供展示位置删除[。](http://en.wikipedia.org/wiki/Placement_syntax#Placement_delete)

# windows-phone-7 - 不允许在选择器返回之前多次调用 Show()

> ID：11431692
> 
> 赞同：0
> 
> 时间：2012-07-11T11:29:47.060
> 
> 标签：windows-phone-7

我需要在 wp7 中使用两个选择器，一个是 PhotoChooserTask，另一个是 CameraCaptureTask，我每次只需要使用其中一个，如何在启动另一个之前停止一个，如果我在第一个之前启动另一个会抛出异常一个回报。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:01:41.083

封装

```
somechooser.Show(); 
```

在 try-catch 块内。

如果用户在最后一个选择器打开或正确关闭之前尝试打开另一个选择器，它将捕获异常。

# android - 如何在活动中显示捕获的图像并同时将其保存在手机和 sqlite 数据库中？

> ID：11431695
> 
> 赞同：1
> 
> 时间：2012-07-11T11:29:50.810
> 
> 标签：android

我已经参考了捕获图像并将其保存到 SD 卡中。那工作正常。现在我希望图像将显示在活动中，直到我单击按钮。谁能建议我如何使它成为可能？？？？

我在这里粘贴代码。请告诉我我在这里做错了什么..

DVCamera.class

```
 public class DVCameraActivity extends Activity {  

        static Uri capturedImageUri=null;
        Button ButtonClick1,ButtonClick2;
        ImageView image1,image2;
        int CAMERA_PIC_REQUEST = 2; 
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            ButtonClick1 =(Button) findViewById(R.id.buttonClick1);
            ButtonClick2 = (Button) findViewById(R.id.buttonClick2);
            image2 =(ImageView) findViewById(R.id.PhotoCaptured2);
            image1 =(ImageView) findViewById(R.id.PhotoCaptured1);
            ButtonClick1.setOnClickListener(new OnClickListener (){
                @Override
                public void onClick(View view)
                {
                    Calendar cal = Calendar.getInstance();
                    File file = new File(Environment.getExternalStorageDirectory(),  (cal.getTimeInMillis()+".jpg"));
                    if(!file.exists()){
                        try {
                            file.createNewFile();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }else{
                        file.delete();
                        try {
                            file.createNewFile();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                    capturedImageUri = Uri.fromFile(file);
                    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    // request code
                    //cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, capturedImageUri);
                    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

                }
            });

            ButtonClick2.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Calendar cal = Calendar.getInstance();
                    File file = new File(Environment.getExternalStorageDirectory(),  (cal.getTimeInMillis()+".jpg"));
                    if(!file.exists()){
                        try {
                            file.createNewFile();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }else{
                        file.delete();
                        try {
                            file.createNewFile();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                    // TODO Auto-generated method stub
                    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                    // request code
                    //cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, capturedImageUri);
                    capturedImageUri = Uri.fromFile(file);
                    startActivityForResult(cameraIntent, 1337);
                }
            });
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) 
        {
            if( requestCode == CAMERA_PIC_REQUEST)
            {
                //  data.getExtras()

                Bitmap bitmap = null;
                try {
                    bitmap = MediaStore.Images.Media.getBitmap( getApplicationContext().getContentResolver(),  capturedImageUri);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                image1.setImageBitmap(bitmap);
            }
            else if(requestCode == 1337)
            {

                Bitmap bitmap = null;
                try {
                    bitmap = MediaStore.Images.Media.getBitmap( getApplicationContext().getContentResolver(),  capturedImageUri);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                image2.setImageBitmap(bitmap);
            }
            else 
            {
                Toast.makeText(DVCameraActivity.this, "Picture NOt taken", Toast.LENGTH_LONG).show();
            }
            super.onActivityResult(requestCode, resultCode, data);
        }
    } 
```

而hre是布局文件main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/buttonClick1"
                android:layout_width="150dp"
                android:layout_height="wrap_content"
                android:text="Click for Photo1" />

            <Button
                android:id="@+id/buttonClick2"
                android:layout_width="150dp"
                android:layout_height="wrap_content"
                android:text="Click for Photo2" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/PhotoCaptured1"
                android:layout_width="150dp"
                android:layout_height="200dp" />
            <ImageView
                android:id="@+id/PhotoCaptured2"
                android:layout_width="150dp"
                android:layout_height="200dp" />
        </LinearLayout>
        <!--
        <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_gravity="center"
        android:layout_width="200dp"
        android:layout_height="200dp"
        />
        -->

    </LinearLayout> 
```

如果任何 1 可以建议我如何将捕获的图像保存在数据库中，那对我来说将是另一个优势。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:21:24.080

你可以像这样在按钮上启动相机..

```
ButtonClick2.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent cameraIntent = new                                     Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST);  

                }
            });

and then..

protected void onActivityResult(int requestCode, int resultcode, Intent intent)
  {
      super.onActivityResult(requestCode, resultcode, intent);

      if (requestCode == CAMERA_REQUEST) {  

          Bitmap photo = (Bitmap) intent.getExtras().get("data"); 
          image1.setImageBitmap(bitmap);

      }  

  } 
```

我想这可能会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:51:37.083

您应该查看[Google 培训](http://developer.android.com/training/camera/photobasics.html)，以获取从 SD 卡存储和读取的全尺寸图像，以及将图像存储到数据库使用[SQLite](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)数据库，您需要在其中存储文件所在的地址。当您希望显示图片时，请阅读数据库并使用谷歌培训中的代码从 SD 获取图片。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T04:27:09.663

我认为当您捕获图像时，有两个选项“保存”和“丢弃”，单击保存按钮然后它会自动保存在 sdcard 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T06:18:40.710

此代码用于将图像保存在数据库中。

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
            camaraBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
            byte[] data = baos.toByteArray();

            for(int i=0;i<yourCursorLastPosition;i++){
            cursor.moveToPosition(i);   
            ContentValues cv = new ContentValues(imageColumnNo);

            cv.put(MyDbHelper.COL_IMG, data);

            mdb.insert(MyDbHelper.TABLE_NAME, null, cv);
            } 
```

# css - 选择所有兄弟元素，而不仅仅是跟随元素

> ID：11431697
> 
> 赞同：1
> 
> 时间：2012-07-11T11:29:55.537
> 
> 标签：css, css-selectors

目的是在悬停时定位相同类型和相同级别的所有其他元素。试过了

```
a:hover ~ a 
```

只是注意到这并不针对悬停元素之前的元素......是否有使用css的解决方案？还是我应该以某种方式摆脱困境

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:40:03.647

这是`parent`or `<`selector 问题（[其中](https://stackoverflow.com/questions/9795047/css-parent-or-this-selector) [有](https://stackoverflow.com/questions/6873755/css-parent-of-selector) [很多](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector) ）[的变](https://stackoverflow.com/questions/5516504/css3-selector-select-a-parent-node-of-a-specific-node)[体。](https://stackoverflow.com/questions/1251768/css-parent-ancestor-selector) 我知道这并不完全相同，但我相信您可以想象同级选择器是如何从父选择器派生的。

Jonathan Snook 有一篇[很棒的博客文章](http://snook.ca/archives/html_and_css/css-parent-selectors/)说明了为什么它不存在，我认为我不能做得更好，所以如果你感兴趣的话，我会让你阅读。基本上，由于选择元素的方式，这在技术上是一项困难的工作，并且在代码结构方面会导致整个世界的混乱。

所以简短的回答是，这不存在，恐怕你需要求助于 JS 来修复它。

**编辑：**只是几个修复示例。使用 jQuery：

```
$(selector).siblings().css({...}); 
```

或者如果你想包含元素：

```
$(selector).parent().children().css({...}); 
```

或者在香草 JS 中：

```
var element = document.querySelectorAll(selector); // or getElementById or whatever
var siblings = element.parentNode.childNodes;
for (var i = 0; i < siblings.length; i++) {
    if (siblings[i] !== element) { // optional
        siblings[i].style.color = 'red';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:30:36.703

您可以使用 jQuery 而不是 CSS 来切换悬停状态：

HTML：

```
​&lt;div>
    <a href="#">Link 1</a>
    <a href="#">Link 2</a>
    <a href="#">Link 3</a>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
div a {color: #000;}
div a.hover {color: #00f;} 
```

​ jQuery：

```
$("div a").hover(
    function(){
        $("div a").addClass("hover");
    },
    function(){
        $("div a").removeClass("hover");
    }
); 
```

[小提琴](http://jsfiddle.net/zDUqS/ "小提琴")

# c - 结构 mystruct a = b; 这是有效的吗？直接赋值结构变量，在C中有效吗？

> ID：11431699
> 
> 赞同：5
> 
> 时间：2012-07-11T11:29:59.907
> 
> 标签：c, coding-style

我有以下代码。

```
struct rectangle {
int length;
int breadth;
};

int main (void) 
{
    struct rectangle a,b;
    a.length = 10;
    a.breadth = 5;

    b=a;  
    printf("\nValues of b.length = %d, b.breadth=%d\n",b.length,b.breadth);
    return 0;
} 
```

**上面的分配是一个有效的陈述吗？（b=a）**我在我的项目中这样做了。我收到一条**评论**说，**这种类型的分配是错误的，我应该使用 memcpy**。我打印了 b 的值并检查了。值是正确的。我想知道为什么上面的分配是错误的？**如果错误，当您将结构变量传递给函数并将其捕获到单独的变量中时会发生什么？**我希望我清楚我的问题。如果我不清楚我的问题，请回复我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T11:37:18.257

在我看来，审稿人被误导了。非常正确，结构值和其他值一样，分配它们就可以了。而且它的方式，方式，比调用更清晰`memcpy()`，而且更（很多！）更不容易出错。

在复制相同类型的值时，我总是不得不停下来思考将什么作为第三个参数传递给`memcpy()`它，因为我发现哪个选择最清楚并不明显。所以，这是一个较少的教学问题，当然它读起来更好。

此外，编译器*可能*足够聪明，*不会*复制任何可能潜伏在那里的额外填充和/或对齐字节，这是`memcpy()`永远做不到的。这是一个更高级别的构造，因此“更好”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T11:37:29.027

它是，而且我认为一直是，有效的代码和你的评论是**错误**的。

在我看来，评论评论很糟糕，因为评论者误导你养成坏习惯——当我们想要复制任意内存位时，我们使用 memcpy——根据定义，结构定义明确，它更干净、更容易阅读，而且只是你的方法是对的。

如果您将结构按值传递给函数，例如

```
struct a some_function(struct a)
{
    a.width = 99;
    return a;
} 
```

传入的值是一个副本，返回值也是一个副本，这里唯一的危险是结构体很大并且每次调用都会产生开销。

如果这不起作用，那么大多数 C 世界都会分崩离析......

为了接受审稿人的评论，在我看来，他们正在更深入地挖掘自己的整体，应该承认自己错了。

两种说法没有区别

```
memcpy(&b, &a, sizeof(b));
b = a; 
```

如果编译器正在优化，那么它不应该破坏原始代码；否则那是编译器的一个错误——它提到了原始的 C 标准（即 C89）是胡说八道，因为我非常怀疑该标准是否允许错误的优化。

出于兴趣，我只是在标准 unix 环境中的 pre-ansi 编译器（从 1986 年开始）上尝试过这个，而不是证明任何东西。

```
/tmp> gcc a.c
a.c:
C-68000U 1.8.0 Copyright (c)1985,1986 Green Hills Software, Inc.
linking a:
/tmp> ./a
10, 5 
```

为了进一步的兴趣，也许只有我的！我已经通过优化构建并查看了生成的代码。

结果表明，这个古老的、预标准的编译器按预期工作。68k 的证明如下 - 我用 // 添加了注释来解释正在发生的事情。

如您所见，优化的唯一结果是生成的代码在空间和执行时间方面都更高效——除非您在嵌入式环境中工作，否则这并不重要

```
 ;       line  #13 memcpy(&b, &a, sizeof(b));
     140     PEA    0x8           // size
     144     PEA    (-8,FP)       // &a
     148     PEA    (-16,FP)      // &b
     152     JSR    memcpy        // call memcpy

    ;       line  #14
     170     LEA    (-8,FP),A1   // &a
     174     LEA    (-16,FP),A0  // &b
     178     MOVE.L (A1)+,(A0)+  // copy first element of struct
     180     MOVE.L (A1)+,(A0)+  // copy second element 
```

对于更大的结构，生成的代码`b=a`是

```
 170     LEA    (-112,FP),A1
     174     LEA    (-224,FP),A0
     178     MOVEQ  #27,D0
     180     MOVE.L (A1)+,(A0)+
     182     DBF    D0,main+60 
```

它的大小与版本完全相同`memcpy`- 但执行速度更快。

所以总而言之**，最初的审稿人是错的，而且仍然是错的，应该承认他们的错误**——除非他们指的是他们可以证明的具体案例（我对此表示怀疑）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T22:23:41.620

您的同事可能正在考虑一个数组，其中赋值语句无效。

由于数组和结构都作为*聚合*组合在一起，他可能认为同样的限制适用于结构类型的变量。

但是，请注意此分配与 C 中的相同`memcpy`，但不一定在 C++ 中（对于 POD 类型，它仍然相同）。这可能是编码标准禁止它的充分理由，在这种情况下，您应该遵循公司的编码标准。

# iphone - 如何检查给定的xml在目标c中是否有效？

> ID：11431700
> 
> 赞同：2
> 
> 时间：2012-07-11T11:30:05.617
> 
> 标签：iphone, objective-c, xml-validation

我想在目标 c 中验证 xml。目标 c 中是否有任何规定或方法来检查给定的 xml 是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:33:21.120

[这](http://knol2share.blogspot.ro/2009/05/validate-xml-against-xsd-in-c.html)是一个方法和[库](http://cmar.me/2011/04/20/adding-libxml2-to-an-xcode-4-project/)。

您还可以使用以下 unix 命令验证 XML：

```
xmllint --noout --schema test.xsd test.xml 
```

编辑：

试试下面的代码：

```
NSXMLDocument *doc = [[NSXMLDocument alloc] initWithData:urlData options:0 error:&error];
NSArray* tempArray = [doc nodesForXPath:@"path/to/the/xml" error:&error]; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T11:59:46.070

为此使用 NSXMLDocument：

```
 NSError *err;
 NSXMLDocument *xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:furl            options:(NSXMLDocumentValidate | NSXMLNodePreserveAll)
                                                error:&err];

 BOOL vaildXML = [xmlDoc validateAndReturnError:&err];
 NSLog(@"Error : %@",[err description]); 
```

对于 ios 使用**NSXMLParser**

它不会崩溃，如果**NSXMLParser**发现错误，它会通过它的委托让你知道，或者通过调用**parser:validationErrorOccurred:**或**– parser:parseErrorOccurred:**。您可以在 NSXMLParser 中使用**- (NSError *)parserError**来确定导致解析终止的错误。

# ruby-on-rails - MongoDB 中的受控数据分片

> ID：11431704
> 
> 赞同：3
> 
> 时间：2012-07-11T11:30:21.750
> 
> 标签：ruby-on-rails, mongodb, sharding

我是 MongoDB 的新手，我对它的分片概念有非常基本的了解。但是我想知道是否可以自己控制数据拆分？例如，一部分记录将存储在一个特定的分片上？这将与 Rails 应用程序一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:00:19.643

您可以关闭平衡器以停止自动平衡：

```
sh.setBalancerState(false) 
```

如果您知道要拆分的键的范围，您还可以将数据范围预拆分到所需的服务器，请参阅[PreSplitting](http://www.mongodb.org/display/DOCS/Splitting+Shard+Chunks#SplittingShardChunks-Presplitting)[示例](http://www.mongodb.org/display/DOCS/Splitting+Shard+Chunks#SplittingShardChunks-PreSplittingExample#1)。分片的管理将通过 javascript shell 完成，而不是通过您的 rails 应用程序。

您应该注意没有分片获得更多负载（变热），这就是默认情况下自动平衡的原因，使用免费[MMS](http://www.10gen.com/mongodb-monitoring-service)服务之类的监控将帮助您监控它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:05:21.457

分片的决定是一个复杂的决定，你应该深思熟虑。

关于分片有很多需要学习的地方，其中大部分内容并不明显。我建议查看以下链接中的信息：

*   [分片介绍](http://www.mongodb.org/display/DOCS/Sharding+Introduction)
*   [分片概述](http://www.10gen.com/presentations/MongoNYC-2012/sharding-overview)
*   [常问问题](http://docs.mongodb.org/manual/faq/sharding)

在分片集群的上下文中，块是分配给特定分片的连续范围的分片键值。默认情况下，[块](http://docs.mongodb.org/manual/reference/glossary/#term-chunk)为 64 兆字节（除非按照上述修改）。当它们增长到超过配置的块大小时，mongos 将块分成两个块。MongoDB 块是逻辑的，其中的数据在物理上并不位于一起。

正如我所提到的，平衡器会移动块，但是，您可以[手动](http://www.mongodb.org/display/DOCS/Moving+Chunks)执行此操作。如果每个分片上的块数之间存在足够大的差异（最小为 8） ，[平衡器](http://www.mongodb.org/display/DOCS/Sharding+Administration#ShardingAdministration-Balancing)将决定重新平衡并请求块迁移。块的实际移动在“From”和“To”分片之间协调，完成后，原始块从“From”分片中删除，并通知配置服务器。

相当多的人也预先分裂，这有助于他们的迁移。请参阅[此处](http://www.mongodb.org/display/DOCS/Splitting+Shard+Chunks)了解更多信息。

为了看到文档在两个分片之间拆分，您需要插入足够多的文档以填充第一个分片上的几个块。如果您没有更改默认块大小，则需要插入至少 512MB 的数据才能看到迁移到第二个块的数据。测试它通常是一个好主意，您可以通过将块大小设置为 1MB 并插入 10MB 数据来做到这一点。[这](http://www.mongodb.org/display/DOCS/A+Sample+Configuration+Session)是一个如何测试的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T13:25:17.867

可能[http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding](http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding)解决了您在 v2.2 中的要求
查看 Kristina Chodorow 的博客文章也有一个很好的例子：[http ://www.kchodorow.com/blog /2012/07/25/控制-收集-分配/](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-31T18:26:27.790

如果 mongo DB 自动为您拆分数据，您为什么要自己拆分数据？您可以升级您的 rails 应用程序层以与 mongos 实例对话，以便 mongos 将对任何 CRUD 操作的调用路由到数据所在的位置。这是使用 config server 实现的。

# google-maps - 通过单击更改标记的位置

> ID：11431709
> 
> 赞同：0
> 
> 时间：2012-07-11T11:30:38.507
> 
> 标签：google-maps, google-maps-api-3

我正在研究谷歌地图，我想要做的是点击地图它在地图上添加一个标记它工作正常但问题是如果我点击其他地方我需要将相同的标记移动到一个新地方而不是新的标记。而且当我点击任何一点时，它都会在文本字段中给我那个地方的地址

这是我的代码

```
 <script type="text/javascript">
var map;
var markersArray = [];

 function initialize() {
    var haightAshbury = new google.maps.LatLng(37.7699298, -122.4469157);
var mapOptions = {
    zoom: 7,
    center: haightAshbury,
    mapTypeId: google.maps.MapTypeId.ROADMAP
   };
   map =  new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    google.maps.event.addListenerOnce(map, 'click', function(event) {
    addMarker(event.latLng);
   });
   }

   function addMarker(location) {

   marker = new google.maps.Marker({
   position: location,
   map: map
   });
   markersArray.push(marker);
   }

   // Removes the overlays from the map, but keeps them in the array
   function clearOverlays() {

    if (markersArray) {
     for (i in markersArray) {
       markersArray[i].setMap(null);
      }
    }
  }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:22:22.040

您可以在创建新标记的任何时候调用 clearOverlays。这样您可以隐藏以前的标记，只显示新的标记。另一种方法是像拥有 var 映射一样拥有 var 标记。您可以在 addMarker 中编辑标记位置。就地理编码而言，看看[这个](https://developers.google.com/maps/documentation/javascript/geocoding)

# java - mysql是谁锁定了行？

> ID：11431711
> 
> 赞同：0
> 
> 时间：2012-07-11T11:30:49.050
> 
> 标签：java, mysql, percona

有没有办法可以让谁锁定当前行？我的 ERP 需要检查记录是否被其他用户锁定以供更新。我正在使用 mysql(Percona) 服务器和 Java SE 作为终端客户端应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:39:26.313

使用 select 进行更新，锁定

SELECT field_Name FROM table_Name FOR UPDATE；

# android - 异步视频流 Android

> ID：11431717
> 
> 赞同：2
> 
> 时间：2012-07-11T11:31:05.647
> 
> 标签：android, video-streaming

我一直在从我的 android 应用程序中播放渐进式视频的视频。我能够从互联网流式传输视频。

但是视频在缓冲整个数据后开始。

这是我正在使用的代码-

```
private static final String MOVIEURL = "movieUrl";
private static final String TAG = "VideoPlayerActivity";
private int mVideoWidth;
private int mVideoHeight;
private MediaPlayer mMediaPlayer;
private SurfaceView mPreview;
private SurfaceHolder holder;
private String path;
private Bundle extras;
private boolean mIsVideoSizeKnown = false;
private boolean mIsVideoReadyToBePlayed = false;    

protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.mediaplayer_2);
    mPreview = (SurfaceView) findViewById(R.id.surface);
    holder = mPreview.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    extras = getIntent().getExtras();
}

 private void playVideo(String movieUrl) {
        doCleanUp();
        try {
            path=movieUrl;

            // Create a new media player and set the listeners
            mMediaPlayer = new MediaPlayer();
            mMediaPlayer.setDataSource(path);
            mMediaPlayer.setDisplay(holder);
            mMediaPlayer.prepare();
            mMediaPlayer.setOnBufferingUpdateListener(this);
            mMediaPlayer.setOnCompletionListener(this);
            mMediaPlayer.setOnPreparedListener(this);
            mMediaPlayer.setOnVideoSizeChangedListener(this);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

        } catch (Exception e) {
            Log.e(TAG, "error: " + e.getMessage(), e);
            return false;
        }
    }

   public void onBufferingUpdate(MediaPlayer arg0, int percent) {
        Log.d(TAG, "onBufferingUpdate percent:" + percent);

    }

    public void onCompletion(MediaPlayer arg0) {
        Log.d(TAG, "onCompletion called");
    }

  private void doCleanUp() {
        mVideoWidth = 0;
        mVideoHeight = 0;
        mIsVideoReadyToBePlayed = false;
        mIsVideoSizeKnown = false;
    }

  public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
        Log.v(TAG, "onVideoSizeChanged called");
        if (width == 0 || height == 0) {
            Log.e(TAG, "invalid video width(" + width + ") or height(" + height + ")");
            return;
        }
        mIsVideoSizeKnown = true;
        mVideoWidth = width;
        mVideoHeight = height;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    public void onPrepared(MediaPlayer mediaplayer) {
        Log.d(TAG, "onPrepared called");
        mIsVideoReadyToBePlayed = true;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
        Log.d(TAG, "surfaceChanged called");

    }

    public void surfaceDestroyed(SurfaceHolder surfaceholder) {
        Log.d(TAG, "surfaceDestroyed called");
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "surfaceCreated called");
       playVideo(extras.getString(MOVIEURL));

    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaPlayer();
        doCleanUp();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        releaseMediaPlayer();
        doCleanUp();
    }

    private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    private void startVideoPlayback() {
        Log.v(TAG, "startVideoPlayback");
        holder.setFixedSize(mVideoWidth, mVideoHeight);
        mMediaPlayer.start();
    } 
```

此代码工作正常，但在整个视频被缓冲之前无法播放。

无论如何，我们可以在后台缓冲视频的同时流式传输视频。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:07:40.287

代替

```
mMediaPlayer.prepare(); 
```

采用 ：

```
mMediaPlayer.prepareAsync(); 
```

# codeigniter - Codeigniter 多级继承

> ID：11431718
> 
> 赞同：4
> 
> 时间：2012-07-11T11:31:06.973
> 
> 标签：codeigniter, inheritance, codeigniter-2

我在使用多级继承时遇到问题，如下所示。

我有一个扩展 CI_Controller 类的顶级控制器

```
class Application extends CI_Controller
{
} 
```

名为“站点”和“管理员”的控制器将应用程序控制器扩展为

```
class Site extends Application
{
}

class Admin extends Application
{
} 
```

最后，“用户”和“访客”类扩展了“站点”控制器

```
class User extends Site
{
}

Class Guest extends Site
{
} 
```

问题是，在用户和访客控制器中，我无法加载核心库，如分页、form_validation 等。

$this->load->library('分页);

但是当我在站点控制器或应用程序控制器中加载库时它可以工作，即。扩展核心 CI_Controller 的控制器，它是子控制器。当我尝试加载孙子时，它不起作用。

有人可以澄清为什么会这样吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:36:22.867

我以前没有见过设置多级构造函数类，但它应该可以工作。

你在调用`parent::__construct()`每个类的构造函数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:11:58.443

检查[CodeIgniter Base Controllers](https://github.com/sepehr/ci-base-controllers)，包括解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T08:23:41.463

```
//-Create MY_Controller.php on application/core/MY_Controller.php
//contents of MY_Controller.php
class Application extends CI_Controller{
    function __construct(){
      // Call the CI_Controller constructor
      parent::__construct();        
    }
}
//that is all now you can inherit class (Application) anywhere in your project 
```

# iphone - 根据我的要求形成日期

> ID：11431722
> 
> 赞同：0
> 
> 时间：2012-07-11T11:31:21.280
> 
> 标签：iphone, nsdate

我想按日期格式化程序制作日期， `2012-07-12`但它显示像 `2012-07-11` 我的代码：

```
 NString * today_selected=[NSString  stringWithFormat:@"%d%@%d%@%d",year_for_activated,@"-",month_for_activated,@"-",taged];      NSDateFormatter *Df=[[NSDateFormatter alloc]init]; 
```

//这里year_of_=2012 and month_of_ac=7, and tag=12

但它显示 2012-07-11 而不是 12。

```
 [Df setDateFormat:@"YYYY-MM-DD" ];
  NSDate *date_selected=[Df dateFromString: today_selected];
  NSLog(@"today_selected:%@",date_selected); 
```

但它显示 2012-01-12

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:35:47.637

请阅读说明[文件](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)

> 它使用 yyyy 来指定年份组件。一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

您还会注意到这一天是`dd`，不是`DD`

当你发现这样的问题时，你的第一站应该是文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:41:10.480

```
try this:
NString *today_selected=@"2012-07-12";
NSDateFormatter *Df=[[NSDateFormatter alloc]init];
[Df setDateFormat:@"yyyy-MM-dd" ];
NSDate *date_selected=[Df dateFromString: today_selected];
NSLog(@"today_selected:%@",date_selected); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:41:49.683

试试这个以获得 2012-07-12 ，这种类型的格式化程序：

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

 [dateFormat setDateFormat:@"yyyy-MM-dd"];

  NSDate *now = [[NSDate alloc] init];

  NSString *theDate = [dateFormat stringFromDate:now]; 
```

# c# - Microsoft Word 自动化/互操作 Win32 API 问题

> ID：11431724
> 
> 赞同：2
> 
> 时间：2012-07-11T11:31:38.200
> 
> 标签：c#, .net, winapi, interop, ms-word

我正在尝试控制 Word 的窗口位置。

我的 WinForms (C#) 应用程序占据了屏幕的下半部分并启动了一个 Word 实例。我需要这个实例占据屏幕的上半部分。

这无法通过互操作进行控制，因此我设法获取了 Word 实例的窗口句柄。然后我尝试以各种方式使用 SetWindowPos、SetWindowsLong 等，但没有任何可见的结果。

我不想重新发布有缺陷的代码，而是想要一个新的开始，所以欢迎那些已经取得类似成就的人提出任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:41:42.870

您可以使用[Application.Move](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._application.move)方法。或直接设置[Application.Top](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._application.top)或[Application.Left](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._application.left)属性。你的代码可以是这样的：

```
private Word.Application WordApp = new Word.Application();

    ...

private void buttonClick(object sender, System.EventArgs e)
{
    if (this.openFileDialog.ShowDialog() == DialogResult.OK)
    {
        object fileName = openFileDialog.FileName;
        object visible = true;
        object missing = System.Reflection.Missing.Value;

        WordApp.Visible = true;
        Word.Document aDoc = 
                        WordApp.Documents.Open(ref fileName, ref missing, ref missing,
                                               ref missing, ref missing, ref missing,
                                               ref missing, ref missing, ref missing,
                                               ref missing, ref missing, ref visible);
        aDoc.Activate();
        WordApp.Top = 0;
    }
} 
```

不要忘记将**Microsoft Word 对象库**添加到您的引用并使用相关的命名空间：

```
using Microsoft.Office.Interop.Word; 
```

# validation - Jsrender 模板表单验证

> ID：11431729
> 
> 赞同：0
> 
> 时间：2012-07-11T11:31:55.777
> 
> 标签：validation, jsrender

我有一个表单，它是一个 jsrender 模板

```
 <script id="editTemplate" type="text/x-jsrender">
 <div>
  <form id="myEditForm"  method="POST" action="">
  <table>
  <tr>
    <td>
      Id:
     </td>
     <td>
    <input type="text" name="id" value="{{>id}}" class="required" />
     </td>
     </tr>
   <tr>
    <td>
      Name:
    </td>
    <td>  
    <input type="text" name="name" value="{{>name}}" class="required" />
    </td>
   </tr>
    <td>    
   <input type="submit" value="submit" />
    </td>
   </tr>    
  </form> 
```

我尝试将基于 bassistance 插件的验证添加到输入字段，但由于表单是 jsrender 模板，因此无法正常工作。知道如何实施吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:22:59.080

问题是我在创建表单的 html 页面部分中添加了验证逻辑。

验证只能在模板编译后应用于表单，这发生在单独的 js 文件中，所以，我在 jsrender 模板编译后添加了验证代码，即在 js 文件中的这些行之后

```
 var html = $.render["edit-tmpl"](rowData); // adding row data to edit-tmpl

var edtdlg = $("#editDialog").html(html); // adding the template to
                                                                                      // editDialog 
```

现在它就像魅力一样工作:)

# java - 将带有 JavaFX 组件的 Swing 应用程序打包到可执行 JAR 中

> ID：11431730
> 
> 赞同：2
> 
> 时间：2012-07-11T11:31:56.173
> 
> 标签：java, jar, javafx, packaging

我无法将具有 Swing 和 JavaFX 组件的应用程序打包到 JAR 文件中。从 Eclipse 运行它很好。但是在执行Jar时，出现错误：main方法运行，调用了我的app的构造函数。构造函数调用一个`initAndShowGUI()`方法，该方法尝试创建一个 JFXPanel 以供以后添加到 JFrame，但失败并显示以下错误消息：`Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: Can't load library: C:\Users\User\bin\glass.dll`。JavaFX 似乎需要这个库，但不知何故没有加载。“纯”JavaFX 应用程序（没有 Swing）调用类似 JFX 的“预初始化”方法来加载所有需要的库，我认为（我不完全确定）。此外，我还找到了有关如何部署 Java Web Start 应用程序或小程序 ( [http://docs.oracle.com/javafx/2/deployment/deploy_swing_apps.htm](http://docs.oracle.com/javafx/2/deployment/deploy_swing_apps.htm) ) 的信息，但没有关于“

以前有人做过吗？我一直在寻找解决方案，但一直找不到。高度赞赏帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:35:27.017

您的问题可能与包装有关。

你是如何打包应用程序的？

例如：

*   你用过[e(fx)clipse](http://efxclipse.org/tut2.html)吗？
*   您是否使用了[javafx ant 任务](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm)？
*   你用过[javafxpackager](http://docs.oracle.com/javafx/2/deployment/packager001.htm)吗？

我知道（至少）最后两个将用于将带有 JavaFX 组件的 Swing 应用程序构建到可执行 jar 中。

SwingInterop 示例包含一个用于将示例打包到可执行 jar 中的 ant 脚本。该示例可从[javafx 下载站点下载](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)。

我强烈推荐查看[为什么我应该使用 JavaFX ant 任务来打包我的 Swing 应用程序？](https://blogs.oracle.com/talkingjavadeployment/entry/packaging_swing_apps_with_integrated)该帖子还包括 SwingInterop 示例构建文件的源代码。

# string - 如何删除字符串的双倍部分？

> ID：11431731
> 
> 赞同：2
> 
> 时间：2012-07-11T11:31:56.640
> 
> 标签：string, sed, awk

我在 txt 文件中进行数据操作时遇到问题。我的文件目前看起来像这样：

```
 HG02239 -23.42333333
    NA06985NA06985  -20.125
    NA06991NA06991  -20.92 
```

这显示了我的一些制表符分隔的数据。一半的条目是正确的七字符（字母字母数字数字数字数字）格式，但有些是加倍的。我想进入第二列（由于某种原因，第一列是空的！）并删除字符串中的重复项，以便读取

```
 HG02239 -23.42333333
    NA06985  -20.125
    NA06991  -20.92 
```

我不知道如何在每列的基础上使用 sed/awk 执行此操作。我觉得我应该可以写一个正则表达式，但是因为数据是重复的，我不想丢失字符串的前半部分；而且我不知道如何剪切特定的列，或者我只会删除第 7 个字符。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:38:59.173

### 解决方案

您可以通过反向引用解决此问题。例如，使用 GNU sed：

```
$ cat << EOF | sed --regexp-extended 's/(.{7})\1/\1/'
HG02239 -23.42333333
NA06985NA06985  -20.125
NA06991NA06991  -20.92
EOF

HG02239 -23.42333333
NA06985 -20.125
NA06991 -20.92 
```

如果您没有使用 GNU sed，您可能需要转义捕获组。此外，如果您需要更准确的字符匹配，您可以调整正则表达式。

### 解释

cat 管道只是一个此处的文档，以便于显示和测试代码。您可以直接在文件上调用 sed，或者在您对结果感到满意时使用**-i**标志执行就地编辑。

sed 脚本执行以下操作：

1.  它使用“间隔表达式”（大括号中的数字）将任意 7 个连续字符组存储在捕获组中。
2.  这`\1`是与第一个捕获组匹配的反向引用。
3.  匹配查找“捕获组后跟捕获组的副本”。
4.  替换用捕获组的单个副本替换匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:15:43.207

一种方法，使用`awk`：

```
awk '{ print substr($1, 1, 7), $2 }' file.txt 
```

输出：

```
HG02239 -23.42333333
NA06985 -20.125
NA06991 -20.92 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:56:41.173

你可以使用类似的东西：

```
sed -i 's|\([A-Z]\{2\}[0-9]\{5\}\)[A-Z0-9]*\s*\(.*\)|\1 \2|g' <your-file> 
```

# select - 将多个月的数据返回到一个选择中

> ID：11431732
> 
> 赞同：0
> 
> 时间：2012-07-11T11:32:00.577
> 
> 标签：select, group-by, report, tmp

我有一个关于 SQL 2008 的问题，这可能很容易，但我现在看不到树木的树林。

我正在尝试生成一个基于 sql 的报告，详细说明过去六个月的帮助台问题统计信息，每个应用程序，每个办公室，每个月，然后我将其带入 ssrs 以应用漂亮:o)

无论如何-例如，我有我的脚本，可以按月计算；

```
SELECT      distinct t.name_1 'Application', 
           (select distinct name from location where location_ref = c.location_ref) as office,
           Count (t.name_1) as [Call Count], 
           datename(month, dateadd(month,-2,getdate()))+' '+datename(year, dateadd(month,-2,getdate())) as [Report Month]

FROM        call_logging C 
            Inner Join problem_type t On t.ref_composite = c.ref_composite 

AND         c.resolve_time between onvert(datetime,convert(varchar,month(dateadd(m,-2,getdate()))) + '/01/' + convert(varchar,year(dateadd(m,-2,getdate()))))
            and convert(datetime,convert(varchar,month(dateadd(m,-1,getdate()))) + '/01/' + convert(varchar,year(getdate()))) 
            and c.resolve_group in ('48', '60') 
```

这又带回了 May 的所有问题。

问题是 t.name_1（问题所在的应用程序）是动态的，并且该列表每个月都会增长或缩小。

我基本上需要一个布局

申请办公室数 六月 五月 四月 三月 二月 一月

字伦敦 20 1 1 2 5 10 1

字巴黎 10 2 3 1 2 0 3

卓越马德里 05 0 0 3 2 0 0

等（如果这对这个布局有意义！）

我已经走上了 6 个单独的报告之路，但它在 ssrs 中看起来不太好。我考虑过#tmptables，但他们不喜欢插入不同的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:47:33.673

```
SELECT  [C].[name_1] AS [APPLICATION]
        ,COUNT([name_1]) AS [CALL COUNT]
        ,[l].[location_ref]
        ,[dbo].[ufn_GetDateTime_CalenderYearMonth]([resolve_time]) AS [StartCalenderYearMonth]
FROM  [call_logging] [C] INNER JOIN [problem_type] [t] 
                                    ON [t].[ref_composite] = [c].[ref_composite] 
                                    AND [c].[resolve_group] IN ('48', '60')
                         INNER JOIN [location] [l] ON [c].[location_ref] = [l].[location_ref]
WHERE [C].[resolve_time] BETWEEN '2011-01-01' AND GETDATE()
GROUP BY [C].[name_1], [l].[location_ref], [dbo].[ufn_GetDateTime_CalenderYearMonth]([resolve_time]) 
```

ufn_GetDateTime_CalenderYearMonth 的代码是：

```
CREATE FUNCTION [dbo].[ufn_GetDateTime_CalenderYearMonth] (@DateTime datetime)    
 RETURNS varchar(20)    
AS    
BEGIN    
 declare @dateString varchar(20)    
 declare @yearString varchar(10)    
 declare @monthString varchar(10)    

 set @yearString = cast( DATEPART(year, @DateTime) as varchar(10))    

 if(DATEPART(month, @DateTime) < 10)    
  set @monthString = '0' + cast( DATEPART(month, @DateTime) as varchar(5) )    
 else    
  set @monthString = cast( DATEPART(month, @DateTime) as varchar(5) )    

 set @dateString = @yearString + '-' +  @monthString    

 RETURN (@dateString)    

END 
```

您只需将结果集拍成矩阵并按 [StartCalenderYearMonth] 对所有内容进行分组，它将显示从 2011 年 1 月 1 日到现在的每个月的数字。

# sql-server - 数据透视表不显示 SQL Server 中的数据

> ID：11431736
> 
> 赞同：1
> 
> 时间：2012-07-11T11:32:23.027
> 
> 标签：sql-server, sql-server-2008, pivot

我是 SQL Server 的新手，我面临使用数据透视表显示数据的问题。

我的表结构是这样的：

```
 UserName    VisitedDate    Amount   Visted
    bbb     2012-07-05      200       1
    bbb     2012-06-03      300       3
    ccc     2012-04-15      500       5
    ccc     2012-06-30      600       3 
```

我搜索了很多，发现了一些有用的东西：

```
DECLARE @Sql VARCHAR(8000)
DECLARE @ColumnNames VARCHAR(1000)
DECLARE @BeginDate DATETIME
DECLARE @EndDate DATETIME
declare @AAmount varchar(1000)

SET @BeginDate = '2012-4-1'
SET @EndDate = '2013-3-30'
SET @ColumnNames = ''
set @AAmount = ''

WHILE @BeginDate <= @EndDate
BEGIN
 SET @ColumnNames = @ColumnNames + ',[' + DateName(month,@BeginDate) + '_' +     Cast(Year(@BeginDate) AS VARCHAR(4)) + ']'
SET @AAmount = @AAmount + ',[' +'Amount'+ DateName(month,@BeginDate) + '_' +   Cast(Year(@BeginDate) AS VARCHAR(4)) + ']'
SET @BeginDate = DateAdd(Month, 1, @BeginDate)
END
IF Len(@ColumnNames) > 0
SET @ColumnNames = Right(@ColumnNames, Len(@ColumnNames) - 1)

PRINT @ColumnNames
IF Len(@AAmount) > 0
SET @AAmount = Right(@AAmount, Len(@AAmount) - 1)

PRINT @AAmount

SET @Sql = '
WITH U AS
(
  SELECT UserName, DateName(month,Visited_Date) + ''_'' + Cast(Year(Visited_Date) AS VARCHAR(4)) AS VisitedMonth,Amount,DateName(month,Visited_Date) + ''_'' + Cast(Year(Visited_Date) AS VARCHAR(4)) AS VisitedMonth1,Visited
    FROM Users 
)
SELECT  *
FROM U 

PIVOT (
SUM(Amount) FOR VisitedMonth IN (' + @ColumnNames + ')
) AS P1
PIVOT (
SUM(Visited) FOR VisitedMonth1 IN (' + @AAmount + ')
) AS  pivotable'

 EXEC (@Sql) 
```

这个查询的结果是这样的：

```
UserName AprilAmount_2012  MayAmt_2012 JuneAmt_2012 April_2012  May_2012    June_2012
bbb      NULL              NULL         NULL        NULL           NULL      NULL
bbb      NULL              NULL         300         NULL           NULL      NULL
ccc      NULL              NULL         600         NULL           NULL      NULL
ccc      500               NULL         NULL        NULL           NULL      NULL 
```

**请注意，上午。在标题是金额**

现在我的问题是：

1.  对于表中的 3 列，它显示了数据，但我尝试再添加一列访问过，然后它没有显示预期的结果....

2.  我还想将列重新排列为：

    ```
    UserName AprilAmount_2012 April_2012 MayAmt_2012  May_2012   JuneAmt_2012    June_2012
    bbb      NULL              NULL           NULL       NULL          NULL         NULL
    bbb      NULL              NULL           NULL       NULL          300          3
    ccc      NULL              4              NULL       NULL          600          NULL
    ccc      500               NULL           NULL       NULL          NULL         5 
    ```

3.  我还希望显示唯一的名称...

请帮助我或告诉我方法，以便我找到解决方案。

任何形式的帮助表示赞赏。

# android - 从收件箱中检索邮件

> ID：11431743
> 
> 赞同：1
> 
> 时间：2012-07-11T11:33:01.187
> 
> 标签：android, text, sms, inbox

我正在制作一个应用程序，借助它我可以获得所有文本消息的 ArrayList。我实现这一点没有问题，但是当我将它发送到 Android 设备的默认 SMS 应用程序时，我看到“[]”周围的文本。但我不想要那个括号。

例如：我的收件箱有一个文本“Hello World”，但我得到的字符串显示“[Hello World]”。我想要在我的收件箱中显示的确切消息。那么我应该怎么做才能从我的字符串中删除额外的“[]”。

请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:45:31.680

如果您尝试发送整个字符串`ArrayList`并且`toString()`它显示括号，您可以尝试重建字符串：

```
String message = "";
    for(int i=0; i<array.size(); i++){
        message += array.get(i) + ", ";
    } 
```

其中“，”可以是您的分隔符。但我不确定这是你想要的，你能在描述中提供更多信息吗？

**编辑**：试试

```
String message="[Hello World]";
        message.substring(1,message.length()-1); 
```

# xslt - .NET 用户控件代码隐藏未在 XSLT Umbraco 宏内呈现

> ID：11431744
> 
> 赞同：0
> 
> 时间：2012-07-11T11:33:07.627
> 
> 标签：xslt, user-controls, umbraco

我有一个 XSLT 宏，它在循环中呈现一些标记和 .NET 用户控件宏。这就是 xslt 宏中的多个用户控件宏：

```
<xsl:for-each select="$node/* [@isDoc]">
//Some markup etc...
  <xsl:value-of select="umbraco.library:RenderMacroContent('&lt;?UMBRACO_MACRO NodeId=&quot;@id&quot; macroAlias=&quot;LogTag&quot;&gt;&lt;/?UMBRACO_MACRO&gt;', @id)" disable-output-escaping="yes"/>
</xsl:for-each> 
```

来自 usercontrols 标记的标记渲染得很好，但`Page_load`没有执行中的所有内容。这是为什么？

这是用户控件标记：

```
<div class="logTag" id="Tag" runat="server">
      <img src="someimage.png" alt="image"/>
</div> 
```

和代码隐藏：

```
public int NodeId { get; set; }
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)return;

    var tools = new Tools();
    var userId = (Int32)Membership.GetUser().ProviderUserKey;
    Tag.Visible = tools.GetLog(NodeId, userId);
    Response.Write("Node=" + NodeId + " - User=" + userId + "<br />");
} 
```

Response.Write 或 Tag.Visible 都不起作用。我已经尝试直接在空白上测试 usercontrol 宏 - 工作正常！这是不可能的，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:11:44.900

不幸的是，由于 XSLT 宏的性质以及在页面生命周期中调用渲染事件的位置，这意味着 library.RenderMacroContent() 方法在 XSLT 中不起作用。

在[Hendy Racher 的博客](http://blog.hendyracher.co.uk/sidebar-widgets-with-umbraco-v4/)上讨论了一种解决方法，它用于创建“小部件”功能，如果这是您所追求的。这利用了一个 ASP.NET 转发器，该转发器在页面周期的正确阶段注入用户控件，以允许用户控件宏工作。否则，在 Umbraco 4.7 及更高版本中使用宏容器数据类型，它允许在 Umbraco 后台中拖放宏功能，并且可以使用`<umbraco:Item />`标记成功呈现（用户控件、Razor 或 XSLT）。

# facebook - Facebook 的广告 API 异常 294 - 管理广告需要扩展权限 ads_management 和参与 API 密钥

> ID：11431746
> 
> 赞同：11
> 
> 时间：2012-07-11T11:33:09.883
> 
> 标签：facebook, facebook-graph-api, ads, facebook-ads-api

我的活动在 FB 上运行，我想借助 Ads API 提取每日数据。

我正在使用 facebook ads api，我每次都面临这个问题

```
{
   "error": {
      "message": "(#294) Managing advertisements requires the extended permission ads_management, and a participating API key",
      "type": "OAuthException",
      "code": 294
   }
} 
```

我创建了一个应用程序`XYZ`，并使用它创建了一个广告活动。

使用**Graph API Explorer**我生成了**访问令牌。**我也授予权限。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T02:43:06.157

您必须确保将应用程序列入白名单才能使用 Ads API。此外，您需要确保获得该白名单应用程序的访问令牌。如果您的应用被列入白名单，您可以使用图表资源管理器，将下拉菜单更改为您的应用，点击获取访问令牌并确保勾选 ads_management 权限。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-02T12:17:05.527

您必须扩展权限才能使用 api 访问 facebook 广告。在您在 facebook 帐户中创建的 facebook 应用程序中。在状态中添加 itme 并查看 ads_managemnt，洞察力。

设置 -> 状态和审查 -> 审查中的项目。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-13T14:35:32.987

在 FB 中生成应用访问令牌的方法很少。如果您想访问营销 api，您应该在页面[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/) {YOUR_APP_ID}/marketing-api/tools/ 中使用所需选项执行此操作。

# php - php循环解决方案

> ID：11431752
> 
> 赞同：0
> 
> 时间：2012-07-11T11:33:28.230
> 
> 标签：php, mysql, loops, while-loop

我有以下代码：

```
<?php

$manifest_query = tep_db_query("select o.franchise_id, o.orders_id, o.customers_id,  o.delivery_name, o.delivery_street_address, o.delivery_city, o.delivery_postcode, o.delivery_state, o.customers_telephone, o.date_purchased from " . TABLE_ORDERS . " o, " . TABLE_ORDERS_TOTAL . " ot where o.franchise_id = '" . (int)$franchise_id . "' and o.orders_id = ot.orders_id and ot.class = 'ot_total' and o.orders_status = '5'");

while ($manifest = tep_db_fetch_array($manifest_query))
{
    $products_query = tep_db_query("select orders_products_id, orders_id, products_id, products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");
    $products = tep_db_fetch_array($products_query);
    ?>
    <tr>
    <td height="50" align="center"><?php echo $manifest['orders_id'] ;?></td>
    <td cellpadding="2"><?php echo $manifest['delivery_name'] .'<br> '. $manifest['delivery_street_address'] .'<br> '. $manifest['delivery_city'].'<br> '. $manifest['delivery_postcode'].'<br> '. $manifest['delivery_state'].'<br> '. $manifest['customers_telephone'] ;?></td>
    <td><?php echo $products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . '<br> ' . '&nbsp;&nbsp;'.$products['products_model'];?></td>
    <?php   
}
?> 
```

$products 在第三列打印分配给订单 ID 的产品。但它只打印分配给订单的第一个产品，即使有多个产品分配给订单。有人知道如何打印 order_id 的所有产品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:46:57.267

您需要嵌套一个while循环。您只调用第一行，因为您只有一个循环。

```
<?php

 $manifest_query = tep_db_query("select o.franchise_id, o.orders_id, o.customers_id,  o.delivery_name, o.delivery_street_address, o.delivery_city, o.delivery_postcode, o.delivery_state, o.customers_telephone, o.date_purchased from " . TABLE_ORDERS . " o, " . TABLE_ORDERS_TOTAL . " ot where o.franchise_id = '" . (int)$franchise_id . "' and o.orders_id = ot.orders_id and ot.class = 'ot_total' and o.orders_status = '5'");

while ($manifest = tep_db_fetch_array($manifest_query)){

$products_query = tep_db_query("select orders_products_id, orders_id, products_id, products_model, products_name, products_quantity from " . TABLE_ORDERS_PRODUCTS . " where orders_id = '" . (int)$manifest['orders_id'] . "'");
    while($products = tep_db_fetch_array($products_query))

     ?>

      <tr>
      <td height="50" align="center"><?php echo $manifest['orders_id'] ;?></td>
      <td cellpadding="2"><?php echo $manifest['delivery_name'] .'<br> '. $manifest['delivery_street_address'] .'<br> '. $manifest['delivery_city'].'<br> '. $manifest['delivery_postcode'].'<br> '. $manifest['delivery_state'].'<br> '. $manifest['customers_telephone'] ;?></td>

      <td><?php echo $products['products_quantity'] . '&nbsp;x&nbsp;' . $products['products_name'] . '<br> ' . '&nbsp;&nbsp;'.$products['products_model'];?></td>

    <?php
    }
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:47:05.467

好吧，在每个 while 循环中，您都会进行一个新的数据库查询，因此旧的查询将被丢弃，这意味着 $product 将只有第一个条目。在 $product 的原始 while 循环中创建另一个 while 循环。

# tridion - 获取当前登录用户的会话 - 自定义页面

> ID：11431760
> 
> 赞同：4
> 
> 时间：2012-07-11T11:33:50.080
> 
> 标签：tridion, tridion-2011

我正在尝试开发一个自定义页面，其中，我正在尝试获取特定出版物中存在的所有组件的列表。

在 aspx 页面的页面加载中，我需要获取当前登录用户的会话。

当我尝试使用代码时

```
 Session currSession = new Session();
    Response.Write(currSession.User.Id); 
```

我收到以下错误。

```
Access is denied for the user NT AUTHORITY\NETWORK SERVICE 
```

当我尝试使用代码时

```
Session currSession = new Session(WindowsIdentity.GetCurrent());
Response.Write(currSession.User.Id); 
```

我收到以下错误。

```
The name 'WindowsIdentity' does not exist in the current context 
```

1.) 在自定义页面中获取会话的正确方法应该是什么？我们可以使用 HttpContext.Current.Request.ServerVariables.Get("REMOTE_USER") 来获取用户吗？

2.) 自定义页面是否应该使用 CoreServices 或 TOM.NET API 从 CM 获取信息。这是首选选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:41:29.260

您不能将 TOM.NET API 用于模板和事件系统以外的进程。请为此使用核心服务 API（您不需要会话）。

我可以将其改写为：您**不应该**将 TOM.NET API 用于除模板和事件系统之外的进程。从技术上讲这是可能的，但不应该那样使用，这就是引入核心服务的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T08:04:33.970

如果要使用 Windows 身份验证，可以使用此代码段查看当前用户和附加在 .aspx 中的角色：

```
<%@ Import Namespace="System.Web.Security" %>  
<% 
string[] rolesArray = Roles.GetRolesForUser();
Response.Write("<strong>LoggedIn User = </strong>" + HttpContext.Current.User.Identity.Name + "<br />");
Response.Write("<strong>Roles LoggedIn User = </strong><br />" + string.Join(",<br />", rolesArray));
%> 
```

也许您需要将其添加到自定义页面的 web.config 中：

```
<authentication mode="Windows" />
<roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider" /> 
```

希望这会有所帮助，古斯

# android - 在列表视图中单击按钮时更改按钮文本

> ID：11431761
> 
> 赞同：0
> 
> 时间：2012-07-11T11:33:52.750
> 
> 标签：android, android-layout, android-listview, android-button

您好希望有人可以提供帮助。我有一个列表视图，在每一行上显示各种文本视图、编辑视图和按钮。我用过getView

```
 public View getView(final int position, View convertView, ViewGroup parent) 
    {            
        View v = convertView;

           if (v == null) {
                LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = inflater.inflate(R.layout.catlistrow, null);

           }

           TextView pDesc = (TextView) v.findViewById(R.id.productlinerow);
           TextView pPack = (TextView) v.findViewById(R.id.productlinerow3);
           ImageView iThumbnail = (ImageView) v.findViewById(R.id.Thumbnail);
           final Button bAdd = (Button)v.findViewById(R.id.SOCatLine);

            final EditText pOrdQty = (EditText) v.findViewById(R.id.SOQty);

           pDesc.setText(((HashMap<String,String>) getItem(position)).get("Column2")); 
           pPack.setText(((HashMap<String,String>) getItem(position)).get("Column3"));
           pOrdQty.setText(((HashMap<String,String>) getItem(position)).get("OrdQty"));
           String EanCode = ((HashMap<String,String>) getItem(position)).get("EANCode"); 
```

然后我在 getView 中为添加按钮添加一个 OnClickListner

```
 bAdd.setOnClickListener(new View.OnClickListener(){          
        public void onClick(View v) {

            Object o = list.get(position);
            HashMap<String, String> map2 = (HashMap<String, String>)o;
            String b = map2.get("OrdQty");
            String sProdCode = map2.get("ProdCode");
            String ProdPrice = map2.get("ProdPrice");
            b = pOrdQty.getText().toString();

            int OrderQty = Integer.parseInt(b);

            //Check to see if add is pressed and qty zero
            if ( OrderQty == 0 )
            {
              OrderQty = 1;
              b = "1";

            }

            db.open();
            int iOrderNo = Integer.parseInt(OrderNo);

            // update line
            iLineNumber = iLineNumber + 1;
            int QtyCheck = db.createCATorderline(iOrderNo, iLineNumber,
                            sProdCode, ProdPrice, b,"P");

            bAdd.setText("Change"); 

            //Close the database
            db.close();

        }   

  }); 
```

我单击的按钮上的按钮文本变化很好，这很棒。我遇到的问题是，如果我不时向下滚动，我会看到屏幕上的一个按钮上的文本也发生了变化。

任何人都可以帮忙吗？

谢谢尼尔

列表视图的 XML

```
 <ImageView
android:id="@+id/Thumbnail"
android:layout_width="190px"
android:layout_height="200px"
android:layout_alignParentLeft="true"
android:maxWidth="190px"
android:maxHeight="200px"
android:background="@null" />

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/productlinerow"
 android:textColor="#000000" 
 android:layout_marginTop="10dip"
 android:textSize="25dip"
 android:layout_marginBottom="20dip"
 android:layout_height="match_parent" 
 android:text="column1"
 android:layout_width="400dip" 
 android:layout_toRightOf="@+id/Thumbnail"/> 

<TextView android:id="@+id/productlinerow3" 
 android:textColor="#000000" 
 android:textSize="25dip"
 android:text="column2" 
 android:layout_marginTop="10dip"
 android:layout_height="match_parent"  
 android:layout_width="300dip" 
 android:layout_below="@+id/productlinerow"
 android:layout_toRightOf="@+id/Thumbnail"/>

<TextView
      android:id="@+id/qtylabel"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_below="@+id/productlinerow"
      android:layout_toLeftOf="@+id/SOQty"
      android:layout_marginTop="40dip"
      android:layout_marginRight="30dip" 
      android:inputType="number" 
      android:editable="true"
      android:gravity="right" 

      android:text="Order Qty:"
      android:textSize="25dip" />

  <EditText
       android:id="@+id/SOQty"
       android:layout_width="100dip"
       android:layout_height="60dip"
       android:layout_marginTop="25dip"
       android:layout_toLeftOf="@+id/SOCatLine"
       android:layout_marginRight="30dip"
       android:layout_below="@+id/productlinerow"
       android:text="1"
       android:maxLength="3"
       android:inputType="number"
       android:singleLine="true"
       android:textSize="25dip" 
       android:imeOptions="flagNoExtractUi"
       android:selectAllOnFocus="true"/>

 <Button android:text="Add" android:background="@drawable/green_button"  

 android:id="@+id/SOCatLine"
 android:textSize="25dip" 
 android:textColor="#FFFFFF" 
 android:layout_width="130dip" 
 android:layout_marginTop="30dip" 
 android:layout_height="wrap_content" 
 android:layout_below="@+id/productlinerow"
 android:layout_alignParentRight="true"
  />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:00:45.143

您必须将按钮的文本存储在某种集合中。正如您可以在此处使用 HashMap 一样，您可以再创建一个 HashMap 对象，该对象将使用以下方法存储 Button 的`getView()`文本

```
bAdd.setText(((HashMap<String,String>) getItem(position)).get("btn_text")); 
```

然后你可以`setTag()`在实例中使用`onClick()`

```
bAdd.setTag((HashMap<String,String>) getItem(position)); 
```

然后在里面`onClick()`使用`getTag()`来获取Button的位置。

```
@Override
        public void onClick(View v) {
        HashMap<String,String> map = (HashMap<String,String>)v.getTag();
        map.put("btn_text", "Change");
        ((Button)v).setText(map.get("btn_text"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:36:29.373

你如何初始化你的 bAdd 按钮……没关系，我现在看到了。

我会检查您的 XML 文件，您的两个按钮可能具有相同的 ID。

# php - 使动态表单与我的后端数据库一起工作

> ID：11431762
> 
> 赞同：0
> 
> 时间：2012-07-11T11:34:10.640
> 
> 标签：php, jquery, mysql, database

我正在寻求一些建议。我收到了一份包含各种标准的纸质表格。我需要用户能够选择一种交通工具（公共汽车、火车、出租车、电车、其他）。

选择后，我需要根据用户的选择在表单中生成更多字段。因此，如果用户选择了公共汽车，则会产生有关公共汽车时间的问题。

这些字段将使用 PHP 和 MySQL 生成。我已经看到了一些 JQuery 解决方案，但我对我的方法应该是什么感到有点困惑。

我可以同时使用 JQuery、PHP 和 MySQL，还是只使用 PHP 和 MySQL 来解决我的问题。请注意，这些字段已经存储在我的 MySQL 数据库中，我只是在显示下拉菜单中的选择后生成它们。

没有源代码对不起大家，因为我只是在询问我应该采取的方法。我希望我已经提供了足够的细节！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:38:23.910

仅使用 PHP 和 MySQL 无法实现此解决方案。您需要 Ajax/JQuery 来实现这一点。根据用户的选择，您需要使用 JQuery Ajax 将数据发送到服务器，然后服务器将发送回您需要向用户显示的响应。

[这个链接](http://api.jquery.com/jQuery.ajax/)应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:39:52.443

我想，

实际上你可以通过只使用 php 和 mysql 来实现这一点，jquery 让你在玩 DOM 时更容易，没有它你可以实现这个目标，但需要额外的本地 javascript 工作。

CMIIW

# javascript - 使用 jQuery OAUTH 检索临时访问令牌

> ID：11431765
> 
> 赞同：0
> 
> 时间：2012-07-11T11:34:29.203
> 
> 标签：javascript, jquery, oauth-2.0, shopify

我正在尝试对 Shopify 进行 API OAUTH2 调用以进行身份​​验证。当我进入我的应用程序时，会出现第一个屏幕。我按下安装，然后它会将我重定向回我开始的位置。问题是当我被重定向时，我似乎无法在我的 jQuery ajax 函数中捕获它，因此我无法从 OAUTH 获取创建永久令牌所需的临时令牌。第二张图片显示了我按下安装后发生的情况。到目前为止，我的代码如下所示。运行 ajax 调用后，没有调用任何 console.log() 函数。

我的应用程序的应用程序 URL 设置为

```
http://localhost 
```

我的应用程序正在运行

```
http://localhost/shippingcalculator. 
```

我在外部 REST 客户端程序中测试了这些调用，并且成功地获取了我的访问令牌，因此我的凭据没有问题。

![200OK 然后 302 重定向](../Images/14a7ce9ba27536f9fe5c4067247e77f1.png)

![在 REST 客户端测试器中运行良好](../Images/a69ae7711827c234658ef89823565afe.png)

```
<!DOCTYPE html> 
```

```
 <script type="text/javascript">
function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    console.log(window.location.search);
    var results = regex.exec(window.location.search);
    if (results == null) return "";
    else return decodeURIComponent(results[1].replace(/\+/g, " "));
}

function getTemporaryToken(token) {
    jso_configure({
        "shopify": {
            client_id: "67d7af798dd0a42e731af51ffa", //This is your API Key for your App
            //redirect_uri: "", OPTIONAL - The URL that the merchant will be sent to once authentication is complete. Must be the same host as the Return URL specified in the application settings
            authorization: "https://emard-ratke3131.myshopify.com/admin/oauth/authorize",
            //In your case the authorization would be https://SHOP_NAME.myshopify.com/admin/oauth/authorize
            scope: ["read_products"], //Set the scope to whatever you want to access from the API. Full list here: http://api.shopify.com/authentication.html
        }
    });
    $.oajax({
        url: "https://emard-ratke3131.myshopify.com/admin/oauth/authorize",
        jso_provider: "shopify",
        jso_scopes: ["read_products"],
        jso_allowia: true,
        success: function(data) {
            //Use data and exchange temporary token for permanent one
            if (jqXHR.status === 200) {
                console.log("200");
            }
            if (jqXHR.status === 302) {
                console.log("300");
            }
            console.log("Response (shopify):");
            console.log(data);
        },
        error: function(e) {
            console.log("Fail GET Request");
            console.log(e);
        },
        complete: function(xmlHttp) {
            // xmlHttp is a XMLHttpRquest object
            console.log(xmlHttp.status);
        }
    });
    console.log("Code: " + getParameterByName("code"));
}
}
$(document).ready(function() {
    getTemporaryToken();
});
</script>
</head>
<body>
Hello World!
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:09:32.873

做所有这些客户端是一个非常糟糕的主意，您的 API 密钥对于任何人都可以查看和使用。最重要的是，您将在哪里存储令牌？所有浏览器都内置了跨站点脚本限制，这将阻止 JavaScript 调用加载 js 的站点以外的站点。

您真的应该进行身份验证并从服务器进行所有 API 调用。

# android - Android：AsyncTask 中的 SeekBar 音量控制

> ID：11431769
> 
> 赞同：0
> 
> 时间：2012-07-11T11:34:51.773
> 
> 标签：android, android-asynctask, seekbar, android-audiomanager

我知道如何使用搜索栏控制音量：

```
audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    int curVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    SeekBar volControl = (SeekBar)findViewById(R.id.volbar);
    volControl.setMax(maxVolume);
    volControl.setProgress(curVolume);
    volControl.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onStopTrackingTouch(SeekBar arg0) {
        }

        @Override
        public void onStartTrackingTouch(SeekBar arg0) {
        }

        @Override
        public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) {
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, arg1, 0);
        }
    }); 
```

但是..我不知道如何在 AsyncTask 类中执行此操作，该类在播放声音时显示一个对话框（带搜索栏）...任何想法或示例？

谢谢！

# php - 在 Google Chrome 中通过 PHP 传输 MP4 视频失败

> ID：11431778
> 
> 赞同：13
> 
> 时间：2012-07-11T11:35:05.813
> 
> 标签：php, html, google-chrome, video, mp4

我目前正在尝试通过用于控制视频访问的 PHP 脚本提供用于 HTML5 视频（使用 video-js）的 MP4 视频。经过一些研究，我能够在[此处找到的 stackoverflow 文章](https://stackoverflow.com/questions/5924061/using-php-to-output-an-mp4-video)的帮助下完成这项工作。如果我导航到 PHP 脚本，我可以像在 Firefox、Safari 和 IE 中通过其绝对路径（例如 localhost/myvideo.mp4 而不是 localhost/myscript.php）查看视频一样查看视频。我的问题是谷歌浏览器，它只是显示一个黑色的屏幕，中间有一个小型媒体播放器，什么也不做。

我确实尝试使用快速重写，例如 localhost/avideo.mp4 路由到 PHP 脚本，但不幸的是这并没有改变任何东西。

这是我的脚本：

```
if (is_file($uri)) {
    header('Content-Type: video/mp4');
    if (isset($_SERVER['HTTP_RANGE'])) {
        $this->rangeDownload($uri);
        exit;
    } else {
        header("Content-Length: ".filesize($uri));
        $this->readfile_chunked($uri);
        exit;
    }
} else {
    //error
} 
```

rangeDownload 方法直接取自[此链接](http://mobiforge.com/developing/story/content-delivery-mobile-devices)的附录 A，如前面提到的 stackoverflow 文章中所建议的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:22:22.290

也许问题出在 URL 上（更具体地说，是扩展名）。通常，您会使用 Content-Disposition 标头，但我知道在将内容传送到手机时这是不可取的。

尝试使用`localhost/myscript.php/myvideo.mp4`

> 重要的是不要使用“Content-Disposition”HTTP 标头，因为某些手机在使用它时拒绝接受内容。通过在 URL 中包含文件名，您将欺骗手机认为它是真实文件并接受它。
> 
> 现在，当您将下载 URL 发送给客户时，您通常还不知道客户拥有什么设备，因此您不知道该设备将支持哪些文件格式。因此，您不能在该 URL 中包含文件名，并且您将需要一个中间下载页面。再一次，我们将使用如下 URL：
> 
> ```
> http://wap.mydomain.tld/get.php/123456abcdef 
> ```
> 
> 这一次，当客户连接下载内容时，get.php 脚本不会创建临时文件，而是指向另一个流式传输文件内容的脚本。假设要下载的结果内容是“image.jpg”，中间下载页面可以将客户指向如下 URL：
> 
> ```
> http://wap.mydomain.tld/download.php/123456abcdef/image.jpg 
> ```

来自（[http://mobiforge.com/developing/story/content-delivery-mobile-devices](http://mobiforge.com/developing/story/content-delivery-mobile-devices)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T06:43:04.977

我了解您使用的是 video-js，但我建议使用[html5media](http://html5media.info/)（也可以查看[github 页面](https://github.com/etianen/html5media)了解更多信息）。我必须在工作网站上提供视频，我尝试了一些东西，包括 video-js，但 html5media 是唯一一个我可以在所有浏览器中工作的东西。

可能对其他人有帮助的旁注：其中一个要求是我们托管所有文件，这样我们就不会依赖第三方服务器来提供 JavaScript 文件或 Flash 播放器，我不记得是否使用 video-js很简单，但我知道使用 html5media 我们可以下载[flowplayer](http://flowplayer.org/)并在我们的服务器上拥有一切。

为了生成 3 种推荐的视频格式（mp4、WebM 和 Theora），我使用了[Miro Video Converter](http://www.mirovideoconverter.com/)

# c# - Linq 每小时数据的总和？

> ID：11431780
> 
> 赞同：0
> 
> 时间：2012-07-11T11:35:17.787
> 
> 标签：c#, linq

我的表中捕获了每小时的数据。我想总结这些数据一天。例如

这是我的表格数据

```
| date             | value |

| 12.03.2010 01.pm |    10 |
| 12.03.2010 02.pm |    20 |
| 12.03.2010 03.pm |    15 |
| 13.03.2010 04.pm |    15 |
| 13.03.2010 05.pm |    25 |
| 13.03.2010 08.pm |    35 | 
```

我想在一天内得到值的总和。

```
12.03.2010 total_usage = 45
12.03.2010 total_usage = 75 
```

我怎样才能做到这一点。如何获得一天中每小时数据的总和。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:36:55.540

> 我不说为我写代码

您可以通过`Linq`使用`GroupBy`和来做到这一点`Sum()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:43:50.670

```
myCollection.GroupBy(x => x.date.Date).Select(x => new { Date= x.Key, Total = x.Sum(y => y.value) }); 
```

# android - 在字符串中使用 HTML

> ID：11431790
> 
> 赞同：1
> 
> 时间：2012-07-11T11:35:40.930
> 
> 标签：android, html, mvchtmlstring

在我的应用程序中，我必须在字符串中使用一些 HTML 内容。但是 HTML 没有按预期工作。我必须使用该字符串（文本）作为电子邮件发送。我要求的 HTML 顺序是：

标题（中间）

图片（中间）

说明（左对齐）

然后将此 HTML 字符串传递给电子邮件意图。但是电子邮件中没有显示图像，标题文本也没有居中对齐。这就是我做这一切的方式：

```
 Intent it = new Intent(Intent.ACTION_SEND);
        it.putExtra(Intent.EXTRA_EMAIL, "");
        it.setType("text/html");
        String title = title;
        String emailText = emailText;   
        it.putExtra(Intent.EXTRA_SUBJECT, title);
        it.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(emailText));
        this.startActivity(it); 
```

这就是 emailText 的形成方式：

```
 emailText = "<p style= 'color:#000000; font:Georgia; font-size:18pt; text-align:center' align = 'center'><b>" + title +" </b></p>"
             +"<br/><br />"
             +"<img style=\"border:3px solid #173E8C\" src=\'" +imageUrl+"\' width=\"120\" height=\"90\"align=\"center\"/>"
             +"<br/><br/>"
             +"<p>" + description; 
```

但我无法获得我在顶部提到的所需结果，感谢与该问题相关的任何帮助。提前致谢..：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:41:19.760

您必须通过函数 setType () 指定电子邮件的类型：

```
it.setType("text/html");  // for HTML
it.setType("text/plain"); // for plain text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:53:00.090

请试试这个。

[在 Android 中无需用户干预（无意图）发送电子邮件](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)

由单个邮件应用程序正确处理它作为 EXTRA_TEXT 接收的字符串。表现良好的邮件应用程序将看到 mimetype 并适当地处理 EXTRA_TEXT，但并非所有邮件应用程序都这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:12:33.157

您无法通过 Intent 在 android 中将图像作为电子邮件正文发送。

# highcharts - highcharts 2.2.5 不显示图表

> ID：11431791
> 
> 赞同：0
> 
> 时间：2012-07-11T11:35:47.030
> 
> 标签：highcharts

我需要将我的 highcharts.js 文件从 2.1.4 升级到 2.2.5（因为我想在工具提示中使用 useHTML 属性，并且从 2.1.7 开始支持它）问题是当我升级时，highcharts 不不再工作（不绘制图表）

您可以在此处查看此内容（将鼠标悬停在其中一个黑匣子上）工作示例 2.1.4 [http://s-maof.com/PRO/index3.php?fkapp=2](http://s-maof.com/PRO/index3.php?fkapp=2)

而这里的示例 2.2.5 不起作用[http://s-maof.com/PRO/index4.php?fkapp=2](http://s-maof.com/PRO/index4.php?fkapp=2)

# c# - 为什么 Convert.ToInt32() 舍入到最接近的偶数，而不是最接近的整数？

> ID：11431793
> 
> 赞同：21
> 
> 时间：2012-07-11T11:35:54.613
> 
> 标签：c#, decimal, rounding, int32

查看`Convert.ToInt32()`它的 msdn 文档指出：

> 如果 value 在两个整数的中间，则返回偶数；即4.5转换为4，5.5转换为6。

[http://msdn.microsoft.com/en-us/library/ffdk7eyz.aspx](http://msdn.microsoft.com/en-us/library/ffdk7eyz.aspx)

**为什么是这样？**

当然，四舍五入到最接近的整数会更合乎逻辑，不是吗？如果是这样的话，4.5 会变成 5，5.5 会变成 6，这似乎更直观。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T11:40:30.080

[[Rounding](http://en.wikipedia.org/wiki/Rounding#History)的维基百科条目的历史部分有一些关于“四舍五入”在计算中的作用的陈述。有趣的是，似乎“银行家四舍五入”几乎没有证据表明它在任何意义上都是官方的，因此只能被称为俚语。]

如果您订阅该舍入机制，它只会“更合乎逻辑”。银行家四舍五入（在这种情况下是默认设置）也是完全合乎逻辑的。

想象一下，如果银行将每一小部分金额四舍五入到最接近的一美分，那么他们每天处理的数以百万计的交易将减少（损失很多，对于愤世嫉俗的人）的钱。好的，所以这个例子是愤世嫉俗的。

走向最接近的偶数（或奇数，但历史另有选择）意味着*并非每个舍入分辨率都会上升*，**现在有些可能会*下降***。当您将此应用于平均定律时，在考虑***谁***负责支付额外的半便士时，它成为一个公平的解决方案。

至于为什么选择它作为框架，这个问题试图解决它：

[为什么.NET 默认使用银行家的四舍五入？](https://stackoverflow.com/questions/311696/why-does-net-use-bankers-rounding-as-default)

当然，这一切都可以追溯到金融时代，它对整数的适用性*可能会*受到质疑，但何必呢？接受它，如果你愿意，可以覆盖它，只要了解它是如何工作的。

* * *

对于想知道如何更改默认舍入的人：

如果您向您提供非整数，`Convert.ToInt32`则实际上首先需要执行类似的操作`Convert.ToDouble`，然后[`Math.Round`使用重载来更改舍入逻辑](http://msdn.microsoft.com/en-us/library/ms131274.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T11:38:40.573

这正是将[`MidpontRounding`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx)重载添加到[`Math.Round`](http://msdn.microsoft.com/en-us/library/ef48waz8.aspx).

因此，为了正确舍入，您应该使用 Math.Round 而不是 Convert.ToInt32。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T12:15:40.567

不考虑 MidpointRounding.ToEven（银行家的舍入）或 MidpointRounding.AwayFromZero 是否是更好的默认值这一主观问题。

在设计这个时，微软会考虑 .NET 旨在取代的语言。

*   VB 经典一直默认使用银行家四舍五入法。

*   C / C++ 转换在强制转换时会截断，并且在运行时库中有库函数 floor() 和 ceil() - 但是（AFAIK，可能是错误的）没有轮函数。

*   Java 有一个 Math.round，[在文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#round(double))中被描述为等同于 Math.round(a+0.5)。这可能不是大多数人对负数的期望（-3.5 轮到 -3）。

*   与来自 C/C++ 或 Java 的开发人员相比，VB 开发人员可能需要更多的支持。

因此，在设计 .NET 时，类库将提供和方法`Floor`，并且 Round 行为默认为 VB 的行为似乎是合理的。`Ceiling``Round`

Convert.ToInt32() 使用 Round 方法似乎也是合理的（尽管我想可以为 Floor 制作一个案例，以与铸造保持一致）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T11:43:20.543

如果您想要这种行为，您需要使用[`Math.Round`](http://msdn.microsoft.com/en-us/library/ms131274%28v=vs.80%29.aspx)并指定`MidpointRounding.AwayFromZero`.

例如：

```
int result = (int)Math.Round(4.5, MidpointRounding.AwayFromZero); 
```

演示：http: [//ideone.com/ZAbBL](http://ideone.com/ZAbBL)

[`Convert.ToInt32(double)`](http://msdn.microsoft.com/en-us/library/ffdk7eyz.aspx)不使用`Math.Round`自身，而是以这种方式实现（ILSpy）：

```
public static int ToInt32(double value)
{
    if (value >= 0.0)
    {
        if (value < 2147483647.5)
        {
            int num = (int)value;
            double num2 = value - (double)num;
            if (num2 > 0.5 || (num2 == 0.5 && (num & 1) != 0))
            {
                num++;
            }
            return num;
        }
    }
    else
    {
        if (value >= -2147483648.5)
        {
            int num3 = (int)value;
            double num4 = value - (double)num3;
            if (num4 < -0.5 || (num4 == -0.5 && (num3 & 1) != 0))
            {
                num3--;
            }
            return num3;
        }
    }
    throw new OverflowException(Environment.GetResourceString("Overflow_Int32"));
} 
```

# spring-batch - Spring Batch 策略

> ID：11431798
> 
> 赞同：0
> 
> 时间：2012-07-11T11:36:17.983
> 
> 标签：spring-batch

高级要求如下：我有一个输入表（INPUT），我应该从中读取数据，将其发送到外部服务进行验证，并在输出表中更新验证响应。基于各种样本，我已经实现了这个。

但是，输入表是扁平结构。即，例如：一个学生表，其中有一个学生的多个考试结果。当我发送它进行验证时，我必须检索一个学生的所有记录并将其发送以进行验证。另一个问题是并行处理。访问外部服务会有一些网络延迟，我们希望对读取、处理和写入或处理和写入进行并行处理。

我想知道可行的 Readers、Writers 和处理器在哪里可以做到这一点。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:10:20.863

我建议您创建一个阅读器，它将从表中读取您的数据。生成的单个元素（在我的其余解释中命名为 E）必须能够发送到您的验证服务。

然后编写一个具有先前参数 E 的处理器。它调用您的验证服务。验证的结果将是您的处理器（名为 O）的输出。

最后，创建一个 Writer，它将一个 O 作为参数，其作用是将最终数据写入数据库。

并行处理将通过 Spring 配置使用[ThreadPoolTask​​Executor](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/scheduling/concurrent/ThreadPoolTaskExecutor.html)完成。重要的部分是以线程安全的方式编写您的 Reader、Processor 和 Writer。

为了获得更好的性能，您还应该检查参数*commit-interval*（在 Writer 上），如果您使用 Hibernate，请检查其批量容量（我通常通过批量插入/更新 25-30 个请求来找到最佳性能）。

# gwt - GWT 中的自定义 TabLayoutPanel

> ID：11431803
> 
> 赞同：0
> 
> 时间：2012-07-11T11:36:26.327
> 
> 标签：gwt, uibinder, gwt2

我正在尝试创建我的自定义`TabLayoutPanel`扩展，我的代码如下：

```
public class ExpandableTabLayoutPanel extends TabLayoutPanel {

    @UiConstructor
    public ExpandableTabLayoutPanel(double barHeight, Unit barUnit) {
        super(barHeight, barUnit);
        addExpandableBehaviour();
    }

    private addExpandableBehaviour(){
      //...
    }
} 
```

在这里我从 UIBinder 调用它：

```
<a:ExpandableTabLayoutPanel barHeight="20" barUnit="PX">
    <a:tab>
    <a:header>header</a:header>
        <a:AdvancedRichTextArea styleName="{style.area}" ui:field="area"/>
    </a:tab>
</a:ExpandableTabLayoutPanel> 
```

（即使我的包/工作区中没有定义选项卡和标题，错误消息也迫使我使用`a:tab`/`a:header`而不是`g:tab`/ ，但这可能不是问题）`g:header``a:`

如果`@UiConstructor`像清单中那样在 ExpandableTabLayoutPanel 上存在注释，我会收到奇怪的错误：

```
[ERROR] [gwtreproduce] - <a:ExpandableTabLayoutPanel barHeight='20' barUnit='PX'> missing required attribute(s): arg1 barHeight Element <a:ExpandableTabLayoutPanel barHeight='20' barUnit='PX'> (:13) 
```

当我禁用`@UiConstructor`时，我会遇到更奇怪的错误：

```
[ERROR] [gwtreproduce] - Errors in 'generated://E6338B946DFB2D28988DA492134093C7/reproduce/client/TestView_TestViewUiBinderImpl.java' :             [ERROR] [gwtreproduce] - Line 33: Type mismatch: cannot convert from TabLayoutPanel to ExpandableTabLayoutPanel 
```

扩展 TabLayoutPanel 我做错了什么？

还有一个问题：构造函数怎么可能`TabLayoutPanel`没有用@UiConstructor注释并且可以在UiBinder中使用（UiBinder如何知道要调用哪个构造函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:07:18.177

对于您的问题：您必须将 (provided=true) 添加到小部件的 UiField 注释中。然后在代码中，*在*createAndBindUi() 调用之前自己设置实例，如下所示：

```
class Whaoo extends Composite{

    /* with 'provided', UiBinder don't call any constructor */
    @UiField(provided = true)
    final Great foo;

    interface WhaooUiBinder extends
        UiBinder<Widget, Whaoo> {}

    private static WhaooUiBinder uiBinder = 
         GWT.create(WhaooUiBinder.class);

    public Whaoo() {

        // initialize "provided" before createAndBindUi call
        foo = new Great(String bar, int pouet); 

        initWidget(uiBinder.createAndBindUi(this));

    }
} 
```

# jquery - 如何在打开/关闭切换 jquery 中设置默认值

> ID：11431806
> 
> 赞同：0
> 
> 时间：2012-07-11T11:36:43.913
> 
> 标签：jquery, toggle

我使用前段时间在网站上找到的一些 jquery 代码来切换内容。默认情况下，内容是关闭的，当单击特殊链接时，内容会以平滑的幻灯片动画形式打开。到目前为止，一切都很好。问题是，默认情况下应该隐藏的内容在页面加载之前是可见的，然后在加载 jquery 后立即关闭。我已将 jquery 放在页面末尾以减少网站内容的加载时间。我知道这种行为是自然的，但我已经看到其他切换脚本之前可以打开的内容甚至在 jquery 位加载之前就关闭了。问题是互联网连接速度较慢的人在页面完成加载之前会在很长一段时间内看到“隐藏”部分。然后该部分关闭，因为它应该默认关闭。

即使在加载 jquery 之前，我也尝试过 css 来保持部件关闭，但问题是我无法通过单击“显示更多”链接再打开它，因为 css 仍然强制它保持关闭.. 指压！！

这是我使用的代码：

```
<div class="morepara"> content that should be hidden by default can be opened by clicken on the image link below</div>

<p class="togglebutn">
<a>
<img src="/images/read-more.png" class="img-swap" aid="myImage"/>
</a>
</p>

<script type="text/javascript">
var $s = jQuery.noConflict();
$s('document').ready(function() {
    $s('.morepara div').hide();
    $s('.togglebutn a').click( function() {
        var parentpara = $s(this).parent().prev().children();
        parentpara.toggle('normal');
    });
});
$s(function() {
    $s(".img-swap").live('click', function() {
        if ($s(this).attr("class") == "img-swap") {
            this.src = this.src.replace("-more", "-less");
        } else {
            this.src = this.src.replace("-less", "-more");
        }
        $s(this).toggleClass("on");
    });
});
</script> 
```

哦，图像交换脚本效果很好，那部分没有问题:)

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:44:19.440

通过使用 CSS 给您`<div class="morepara">`的 a `display:none;`，div 在打开网站时将永远不会出现，即使对于互联网连接速度较慢的人来说也是如此。

```
<div class="morepara" style="display:none;"> 
```

它实际上是一样的：`$s('.morepara').hide();`只有在页面完全加载时才会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:45:21.417

你可以用 CSS 隐藏它：

```
.morepara {
    display:none;
} 
```

...然后使用 jQuery 切换可见性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:45:46.037

这是[链接](http://jsfiddle.net/dXYE8/)。删除 .children 并将父级设置为不显示。

# r - 以编程方式在 R 中为 data.frame 创建参数

> ID：11431808
> 
> 赞同：0
> 
> 时间：2012-07-11T11:36:50.353
> 
> 标签：r

这可能是一个非常愚蠢的问题，但我是大 R 新手。我有一个矩阵，我需要框架。有没有更好的方法来做到这一点，除了：

```
data1 = data.frame(X0 = Ytrain, X1 = Xtrain[,2], X2 = Xtrain[,3], ... , X50 = Xtrain[,51]) 
```

?

我能够在 Emacs 中生成这个怪物，但现在我需要创建执行此操作的 R 函数。任何帮助将不胜感激。

托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:40:16.333

这应该这样做：

```
# Assuming you used all the columns of `Xtrain` but the first
NEW.DF <- data.frame(Ytrain, Xtrain[, -1]) 
# If you didn't use all the cols of `xtrain`:
# NEW.DF <- data.frame(Ytrain, Xtrain[, 2:51])
names(NEW.DF) <- paste0("X", 0:(ncol(NEW.DF)-1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T11:40:50.670

```
data1 <- cbind(data.frame(X0 = Ytrain),data.frame(Xtrain[, -1])) 
```

矩阵列在转换时默认命名为`X1`... ，除非它们已经命名。`XN``data.frame`

# asp.net-mvc-3 - AuthenticateRequest 和 AuthorizeRequest 有什么区别

> ID：11431815
> 
> 赞同：1
> 
> 时间：2012-07-11T11:37:14.067
> 
> 标签：asp.net-mvc-3, security, authentication, authorization

`HttpApplication.AuthenticateRequest`请问能解释一下和`HttpApplication.AuthorizeRequest`in的区别`ASP.NET MVC 3`吗？它们什么时候会发生？假设这种情况：

我`User`有一个名为的属性`IsBanned`，我想`IsBanned`在每个请求中检查他/她的属性。如果是`true`，我将其重定向`User`到错误页面。但不是针对所有请求，只是请求他们的动作由`[Authorize]`属性签名。好的，在这种类型的动作中，会`HttpApplication.AuthenticateRequest`发生还是`HttpApplication.AuthorizeRequest`什么？

我知道我可以检查这个属性`SignIn|LogOn`。但我的意思是：

*   用户请求登录
*   我检查了财产`IsBanned`，它是`false`
*   用户登录
*   用户查看网站的某些页面
*   管理员禁止用户（当他登录时）
*   用户请求具有`[Authorize]`属性的页面（操作）
*   用户已登录（在此之前。还记得吗？）
*   所以我必须显示请求的页面
*   但是用户给了管理员禁止的标志
*   如何阻止用户查看请求的页面？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:55:18.293

我认为您不需要处理`HttpApplication.AuthenticateRequest`or中的任何一个`HttpApplication.AuthorizeRequest`。我会通过使用自定义`Authorize`属性来解决它。

```
public class MyAuthorizeAttribute : AuthorizeAttribute {

        protected override bool AuthorizeCore(HttpContextBase httpContext) {
            bool authorizerPrimarily = base.AuthorizeCore(httpContext);

            if(authorizedPrimarily){
               return user_not_banned;
            }

            return authorizerPrimarily;
        }
} 
```

您可以从中获取用户名`httpContext.User.Identity.Name`。使用它从数据库中获取数据。

**更新评论 1**

要将被禁止的用户重定向到特定页面，您可以这样做：

```
if(authorizedPrimarily){
   if(user_banned){
      httpContext.Response.Redirect("url of banned message");
      return false;
   }

  return true;
} 
```

# facebook - 如何手动查看 Facebook 应用用户的个人资料？

> ID：11431816
> 
> 赞同：0
> 
> 时间：2012-07-11T11:37:14.473
> 
> 标签：facebook, profile, image

在 Facebook 用户授权该应用程序后，用户必须由需要查看其个人资料详细信息（包括他的照片等）的真人手动验证。

实现这一点的正确方法是什么？

在用户授权应用程序后，应用程序是否应该从用户的个人资料中下载所有必要的数据？如果有更简单的方法，似乎会浪费很多精力。

我已经在[此处将这个问题发布到](https://webapps.stackexchange.com/questions/28824/how-do-i-review-a-facebook-app-users-profile-manually)[http://webapps.stackexchange.com](http://webapps.stackexchange.com) 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:20:34.940

如果该用户未授权您的应用，您将无法在个人资料上看到大量详细信息。但是，您可以看到 ProfilPicture，因此如果这是最重要的，那将是可能的。

而且由于（我假设）用户从您自己的页面/站点开始，您可以在其中添加签入，以便有人可以单击您身边的“接受按钮”......

但我真正想知道的是，为什么不只是确保您不想被授权使用您的应用程序的人不知道从哪里访问该应用程序？

认为这样更容易解决一群人......

# iphone - 在 PopOver 中展示一个 Imagepicker

> ID：11431818
> 
> 赞同：0
> 
> 时间：2012-07-11T11:37:25.267
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller, uipopovercontroller

我一直在搜索一个多图像选择器，但我偶然发现了`AGImagePickerController`，但是，我在 iPad 中编码，如何在 a 中显示选择`popoverController`器`alertView`？是否可以？还是我应该通过正常方式转移它`UIButton`？请帮忙。

```
AGImagePickerController *imagePickerController = [[AGImagePickerController alloc] initWithFailureBlock:^(NSError *error) {
        NSLog(@"Fail. Error: %@", error);

    if (error == nil) {
        NSLog(@"User has cancelled.");
        [self dismissModalViewControllerAnimated:YES];
    } else {

        // We need to wait for the view controller to appear first.
        double delayInSeconds = 0.015;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [self dismissModalViewControllerAnimated:YES];
        });
    }

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];

} andSuccessBlock:^(NSArray *info) {

    NSLog(@"Info: %@", info);
    [self.selectedPhotos setArray:info];

     }

    [self dismissModalViewControllerAnimated:YES];

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];
}];

// Show saved photos on top
imagePickerController.shouldShowSavedPhotosOnTop = YES;
imagePickerController.selection = self.selectedPhotos;

// Custom toolbar items
AGIPCToolbarItem *selectAll = [[AGIPCToolbarItem alloc] initWithBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"+ Select All" style:UIBarButtonItemStyleBordered target:nil action:nil] andSelectionBlock:^BOOL(NSUInteger index, ALAsset *asset) {
    return YES;
}];
AGIPCToolbarItem *flexible = [[AGIPCToolbarItem alloc] initWithBarButtonItem:[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil] andSelectionBlock:nil]; 
AGIPCToolbarItem *selectOdd = [[AGIPCToolbarItem alloc] initWithBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"+ Select Odd" style:UIBarButtonItemStyleBordered target:nil action:nil] andSelectionBlock:^BOOL(NSUInteger index, ALAsset *asset) {
    return !(index % 2);
}];
AGIPCToolbarItem *deselectAll = [[AGIPCToolbarItem alloc] initWithBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"- Deselect All" style:UIBarButtonItemStyleBordered target:nil action:nil] andSelectionBlock:^BOOL(NSUInteger index, ALAsset *asset) {
    return NO;
}];  
imagePickerController.toolbarItemsForSelection = [NSArray arrayWithObjects:selectAll, flexible, selectOdd, flexible, deselectAll, nil];
//    imagePickerController.toolbarItemsForSelection = [NSArray array];

imagePickerController.maximumNumberOfPhotos = 100;

[self presentModalViewController:imagePickerController animated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:19:30.390

您应该通过以下方式使用它`Round Rect Button`：

```
self.popoverController = 
[[UIPopoverController alloc] initWithContentViewController:imagePickerController]; 

popoverController.delegate = self;

CGRect popoverRect = [self.view convertRect:[YOURBUTTON frame] 
                                   fromView:[YOURBUTTON superview]];    
popoverRect.size.width = MIN(popoverRect.size.width, 100);

[self.popoverController 
 presentPopoverFromRect:popoverRect 
 inView:self.view 
 permittedArrowDirections:UIPopoverArrowDirectionAny 
 animated:YES];

[popoverController setPopoverContentSize:CGSizeMake(1024, 500)]; 
```

# css - 透过表格的背景看到网站的背景

> ID：11431819
> 
> 赞同：1
> 
> 时间：2012-07-11T11:37:26.990
> 
> 标签：css, image, scroll, transparent, css-tables

这很难解释，但我会尝试。我在 CSS 中有一个背景图像，然后我在它的顶部有一个表格，它有一个白色背景。所以你不能在 CSS 中看到背景。

但我想要的效果是能够将鼠标悬停在圆形图像或形状上，然后显示该小区域的背景。

一种可视化的方法，我在桌子上放了一张照片，我在图像上放了一张纸，所以没有图像在视图中。我现在在纸上剪了一个洞，这样我就可以通过那个洞看到照片了。另外，当我将纸张移动到图像后面时，我会看到不同的部分。

这是在这里使用[http://www.thebestdesigns.com/2012/05/18/andy-chak/](http://www.thebestdesigns.com/2012/05/18/andy-chak/)字母通过背景。

任何想法都会很棒，但如果这是不可能的，我可以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:56:22.887

您可以将背景颜色放在单个表格单元格上，而不是在整个表格上放置背景颜色。

```
td, th { background:#fff; } 
```

然后，当您将鼠标悬停在表格单元格上时：

```
td:hover, th:hover { background:none; } 
```

或者，如果您想显示更大的区域，您可以将一个类添加到一组单元格上，然后执行与上述相同的操作以关闭该单元格组的背景，这些单元格都具有特定的类：

```
td.my-class-name:hover, th.my-class-name:hover { background:none; } 
```

显然，这不是圆形，而是一种可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:52:43.720

您可以`transparent`在悬停时将表格单元格的背景颜色之一设置为。虽然，要完成这项工作，您应该将白色背景设置为`td`，而不是`table`，如下所示：

```
td {
    background-color:white;
}

td:hover {
    background-color: transparent;
} 
```

**JSFiddle**
[http://jsfiddle.net/a2jp5/1/](http://jsfiddle.net/a2jp5/1/)

# openssl - OpenSSL ERR_GET_LIB 数值为人类可理解的线索

> ID：11431821
> 
> 赞同：0
> 
> 时间：2012-07-11T11:37:37.263
> 
> 标签：openssl, porting, openwrt

我正在将用 C 编写的项目移植到 OpenWRT mipsel 系统上。交叉编译和库链接都很好，项目在 mipsel 系统上构建和运行，但是 OpenSSL 存在运行时问题。

似乎 PKCS12_create 由于某些未知原因而失败。这是我通过 ERR_print_errors_fp 发现的：

```
23502:error:06074079:lib(6):func(116):reason(121):NA:0:TYPE=pbeWithSHA1And40BitRC2-CBC
23502:错误:23077073:lib(35):func(119):reason(115):NA:0:
23502:错误:2306C067:lib(35):func(108):reason(103):NA:0:
23502:错误:23073067:lib(35):func(115):reason(103):NA:0:

```

这正是[OpenSSL GET_ERR_LIB](http://www.openssl.org/docs/crypto/ERR_GET_LIB.html)应该提供的。但是，例如，我如何找出 lib 35、函数 119 和原因 115 是什么？

我使用 OpenWRT SDK 交叉编译器并链接来自同一个 SDK 的库（包括 OpenSSL）。

这是我用来获取上面列出的错误的基本代码：

```
PKCS12 *pkcs12 = NULL;
EVP_PKEY *pkey = EVP_PKEY_new();
X509 *cert = X509_new();

...

pkcs12 = PKCS12_create(password, username, pkey, cert, NULL,
                       0, 0, 0, PKCS12_DEFAULT_ITER, 0);
ERR_print_errors_fp(stderr);

if (pkcs12 == NULL){
    printf("pkcs12 == NULL\n");
    /* And here we bail out... */
} 
```

该代码有效，并且在 x86 系统上经过了很好的测试。

所以我的问题是：如何找出 lib、func 和 reason 数值实际代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:29:48.513

请通过启用编译时宏 OPENSSL_NO_ERR 检查您的 OpenSSL 库是否已编译。如果启用此宏，则会从 OpenSSL 库中删除所有错误字符串。如果您禁用此宏，那么您应该获得人类可读的字符串。

Also, you can check err.h (for lib code related macros) and ssl.h (for function & reason code related macros) to make some meaning out of these errors.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T06:53:55.797

Though I understand that, its a very old post but thought that it might help someone. I was facing same issue while calling the pkcs12_create function. It turned out in my case i had not called OpenSSL_add_all_algorithms(); before calling the create function.

# asp.net-mvc-3 - ASP.NET MVC 中的递归模型绑定失败

> ID：11431824
> 
> 赞同：0
> 
> 时间：2012-07-11T11:38:06.633
> 
> 标签：asp.net-mvc-3, model-binding

模型绑定器无法在我的操作参数中实例化子对象 -`PublicationSchedule`始终为空，, ,`Id`填充正常。谁能建议这可能是为什么？`Name``Region`

那个行动：

```
[HttpPost]
public ActionResult Post(ProductTemplateViewModel viewModel)
{
    //...
} 
```

要绑定的模型：

```
public class ProductTemplateViewModel
{
    [Required]
    public string Id { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    public string Region { get; set; }
    [Required] 
    public PublicationScheduleViewModel PublicationSchedule { get; set; }
}

public class PublicationScheduleViewModel
{
    [Required, StringArrayNotEmpty]
    public string[] DaysOfWeek { get; set; }
    [Required, Range(0, 23)]
    public int HoursOfDay { get; set; }
    [Required, Range(0, 59)]
    public int MinutesOfHour { get; set; }
} 
```

HTTP 请求表单数据：

```
id:gf
name:fg
region:Africa
daysOfWeek:Wednesday
hoursOfDay:3
minutesOfHour:4 
```

表格：

```
<input type="text" id="id" name="id">
<input type="text" id="name" name="name">
<select id="region" name="region">
    <option value="Africa" selected="selected">Africa</option>
</select>       
<input type="checkbox" id="chk(Monday)" name="daysOfWeek" value="Monday">
<input type="checkbox" id="chk(Tuesday)" name="daysOfWeek" value="Tuesday">
<select id="hoursOfDay" name="hoursOfDay">
        <option value="0">00</option>
    <option value="1">01</option>                       
</select>
<select id="minutesOfHour" name="minutesOfHour">
    <option value="0" selected="selected">00</option>
    <option value="1">01</option>
    <option value="2">02</option>                       
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:26:16.223

字段名称需要为 PublicationSchedule.daysOfWeek、PublicationSchedule.hoursOfDay 和 PublicationSchedule.minutesOfHour

# facebook - Facebook 应用程序提要对话框大图

> ID：11431825
> 
> 赞同：0
> 
> 时间：2012-07-11T11:38:07.607
> 
> 标签：facebook

通过我的 Facebook 应用发布比这个小缩略图更大的图像的方法是什么？

下面的代码创建了一个 Feed Dialog，但我实际上想要为这个 Feed Dialog 缩略图提供更大的图片。

```
FB.init({appId: "MY_APP_ID", status: true, cookie: true}); 
function postToFeed() 
    {
    var obj = { method: 'feed', link: 'apps.facebook.com/myapplink/';
    , picture: 'com/image.jpg';, name: ' ', caption: ' ', description: ' ' };
    function callback(response) {} FB.ui(obj, callback);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T13:05:19.297

```
`$pic_path = "/tmp/".$filename.".jpg";

$message = 'hello world';

$dat=array(
            'source' => "@".$pic_path,
            'message' => $message."  ".$sharelink,
            );

$ret_obj = $facebook->api('/me/photos',"POST",$dat);` 
```

# android - android中带有自定义listview适配器的无尽适配器

> ID：11431826
> 
> 赞同：0
> 
> 时间：2012-07-11T11:38:14.340
> 
> 标签：android

我正在使用[此链接](https://github.com/commonsguy/cwac-endless)在我的应用程序中创建自定义列表视图。

首先，我想显示包含 5 个项目的列表视图。当我滚动列表时，它应该解析数据并为接下来的 5 个项目加载列表视图。

Listview 行包含 5 个文本视图。

我怎样才能做到这一点？

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:59:51.187

> 我想在单行中显示 5 个项目

那与 . 无关`EndlessAdapter`。这与`ListAdapter`您放入`EndlessAdapter`. 首先*不要*使用`EndlessAdapter`并让您的列表看起来像您想要的那样。然后，只有这样，`EndlessAdapter`当用户滚动时，添加更多数据到列表中。

网上有无数关于如何在自定义`ListAdapter`中创建包含多个内容的行的示例。这是我书中关于如何继承、覆盖和处理多个连续小部件[的免费摘录。](http://commonsware.com/Android/excerpt.pdf)您特别需要查看“自定义适配器”部分。`ArrayAdapter``getView()`

# c++ - 包装字符串缓冲区

> ID：11431828
> 
> 赞同：0
> 
> 时间：2012-07-11T11:38:20.437
> 
> 标签：c++, string, templates

我们有一个大型 C++ 实时程序，它使用`char str[500]`不同大小的缓冲区（例如 ）来存储字符串。

由于我们过去有一些内存泄漏，我们想用一个`MyString`类包装字符串，该类将使用缓冲区和大小进行初始化。

问题是如何有效和轻松地同时分配缓冲区和包装器，同时保持缓冲区作为类的一部分分配，而不是从堆中分配（参见下一个示例）。

我尝试以下列方式使用模板：

```
template <unsigned int N>
class BufferString : public MyString
{
public:
   BufferString() : MyString(m_buf, N) { }
   char m_buf[N];
}; 
```

所以它可以分配为类成员或自动变量：

```
class SomeClass
{
   BufferString<500> m_str;   // Need the buffer to be allocated in SomeClass
};

void foo()
{
   BufferString<350> str;     // Need the buffer to be allocated on the stack
} 
```

但是，使用此解决方案，可执行文件的大小会急剧增长，每个模板实例化大约 1kB（可能是由于构造函数的编译）。

有一个更好的方法吗？

谢谢。

* * *

编辑：我找到了一个类似于我提出的解决方案的实现`fixed_char_buf`（由 John Panzer，在[此处](http://www.johnpanzer.com/tsc_cuj/ToolboxOfStrings.html)找到）。

此方法的另一种实现和推理可在[此处](http://www.drdobbs.com/cpp/c-string-performance/184405453)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:56:56.573

从可执行文件中去除调试符号。每个实例 1k 可能不是 c'tor 的代码，而是调试符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:27:23.863

这似乎是使用模板时最合乎逻辑和最精确的方式。正如[Torsten Robitzki](https://stackoverflow.com/users/1346512)所建议的那样，尝试从可执行文件中剥离调试符号。

根据您的编译器，尤其是用于实时嵌入式系统的较旧的编译器，模板可能会迅速增大二进制文件的大小。如果是这种情况，有一些选项可以避免使用模板：

*   实施分配策略。如果`BufferString`写得正确，那么它拥有的内存 ( `m_buf`) 可以在堆栈或堆上分配而不会引入泄漏。如果碎片和时间而不是内存泄漏是避免堆的主要原因，那么需要考虑许多专门用于缓解实时系统上的这些问题的分配模式，例如池或静态分配模式。
*   *如果必须*避免堆，并且模板导致过多的膨胀，那么另一种选择是手动声明缓冲区并`MyString`单独声明。尽管我会尽量避免它，但宏可能会在可用性和可读性之间提供适当的折衷。例如，以下宏可用于声明自动变量：

    ```
    #define BUFFER_STRING(name, size)  \
      char name##buffer[size];         \
      MyString name(name##buffer, size) 
    ```

# mysql - 从列mysql中删除所有数字字符

> ID：11431831
> 
> 赞同：9
> 
> 时间：2012-07-11T11:38:32.037
> 
> 标签：mysql, regex, database

我想开发一个只能从字符串中删除数字字符的 mysql 函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T11:41:17.317

您可以编写一个用户定义的函数，您可以在其中编写替换逻辑，或者您可以尝试：

```
Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(column,'9',''),'8',''),'7',''),'6',''),'5',''),'4',''),'3',''),'2',''),'1',''),'0','') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T12:32:06.383

创建函数来完成这个任务。

```
DROP FUNCTION IF EXISTS alphas; 
DELIMITER | 
CREATE FUNCTION alphas( str CHAR(32) ) RETURNS CHAR(16) 
BEGIN 
  DECLARE i, len SMALLINT DEFAULT 1; 
  DECLARE ret CHAR(32) DEFAULT ''; 
  DECLARE c CHAR(1); 
  SET len = CHAR_LENGTH( str ); 
  REPEAT 
    BEGIN 
      SET c = MID( str, i, 1 ); 
      IF c REGEXP '[[:alpha:]]' THEN 
        SET ret=CONCAT(ret,c); 
      END IF; 
      SET i = i + 1; 
    END; 
  UNTIL i > len END REPEAT; 
  RETURN ret; 
END | 
DELIMITER ; 
SELECT alphas('123ab45cde6789fg'); 
+----------------------------+ 
| alphas('123ab45cde6789fg') | 
+----------------------------+ 
| abcdefg                    | 
+----------------------------+ 
```

如果您只想要数字，请使用此

```
SET GLOBAL log_bin_trust_function_creators=1; 
DROP FUNCTION IF EXISTS digits; 
DELIMITER | 
CREATE FUNCTION digits( str CHAR(32) ) RETURNS CHAR(32) 
BEGIN 
  DECLARE i, len SMALLINT DEFAULT 1; 
  DECLARE ret CHAR(32) DEFAULT ''; 
  DECLARE c CHAR(1); 
  SET len = CHAR_LENGTH( str ); 
  REPEAT 
    BEGIN 
      SET c = MID( str, i, 1 ); 
      IF c BETWEEN '0' AND '9' THEN  
        SET ret=CONCAT(ret,c); 
      END IF; 
      SET i = i + 1; 
    END; 
  UNTIL i > len END REPEAT; 
  RETURN ret; 
END | 
DELIMITER ; 

SELECT digits('123ab45cde6789fg'); 
+----------------------------+ 
| digits('123ab45cde6789fg') | 
+----------------------------+ 
| 123456789                  | 
+----------------------------+ 
```

## [参考](http://www.artfulsoftware.com/infotree/queries.php?&bw=1280#815)

# android - android：smoothScrollToPosition() 无法正常工作

> ID：11431832
> 
> 赞同：57
> 
> 时间：2012-07-11T11:38:37.747
> 
> 标签：android, listview, selection, android-arrayadapter, smooth-scrolling

在将元素添加到与列表视图关联的数组适配器后，我试图平滑滚动到列表的最后一个元素。问题是它只是滚动到一个随机位置

```
arrayadapter.add(item);
//DOES NOT WORK CORRECTLY:
listview.smoothScrollToPosition(arrayadapter.getCount()-1);

//WORKS JUST FINE:
listview.setSelection(arrayadapter.getCount()-1); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-08-08T18:23:10.483

您可能想告诉 ListView 在 UI 线程可以处理它时发布滚动（这就是您的滚动不正确的原因）。SmoothScroll 需要做很多工作，而不是仅仅去一个忽略速度/时间/等的位置。（对于“动画”是必需的）。

因此，您应该执行以下操作：

```
 getListView().post(new Runnable() {
        @Override
        public void run() {
            getListView().smoothScrollToPosition(pos);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-13T12:48:08.890

(Copied from my answer: [smoothScrollToPositionFromTop() is not always working like it should](https://stackoverflow.com/questions/14479078/smoothscrolltopositionfromtop-is-not-always-working-like-it-should/20997828#20997828))

**This is a known bug.** See [https://code.google.com/p/android/issues/detail?id=36062](https://code.google.com/p/android/issues/detail?id=36062)

However, I implemented this workaround that deals with all edge cases that might occur:

First call `smothScrollToPositionFromTop(position)` and then, when scrolling has finished, call `setSelection(position)`. The latter call corrects the incomplete scrolling by jumping directly to the desired position. Doing so the user still has the impression that it is being animation-scrolled to this position.

I implemented this workaround within two helper methods:

**smoothScrollToPosition()**

```
public static void smoothScrollToPosition(final AbsListView view, final int position) {
    View child = getChildAtPosition(view, position);
    // There's no need to scroll if child is already at top or view is already scrolled to its end
    if ((child != null) && ((child.getTop() == 0) || ((child.getTop() > 0) && !view.canScrollVertically(1)))) {
        return;
    }

    view.setOnScrollListener(new AbsListView.OnScrollListener() {
        @Override
        public void onScrollStateChanged(final AbsListView view, final int scrollState) {
            if (scrollState == SCROLL_STATE_IDLE) {
                view.setOnScrollListener(null);

                // Fix for scrolling bug
                new Handler().post(new Runnable() {
                    @Override
                    public void run() {
                        view.setSelection(position);
                    }
                });
            }
        }

        @Override
        public void onScroll(final AbsListView view, final int firstVisibleItem, final int visibleItemCount,
                                 final int totalItemCount) { }
    });

    // Perform scrolling to position
    new Handler().post(new Runnable() {
        @Override
        public void run() {
            view.smoothScrollToPositionFromTop(position, 0);
        }
    });
} 
```

**getChildAtPosition()**

```
public static View getChildAtPosition(final AdapterView view, final int position) {
    final int index = position - view.getFirstVisiblePosition();
    if ((index >= 0) && (index < view.getChildCount())) {
        return view.getChildAt(index);
    } else {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-27T07:48:19.140

您应该使用 setSelection() 方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-09T19:24:37.863

使用 LayoutManager 平滑滚动

```
layoutManager.smoothScrollToPosition(recyclerView, new RecyclerView.State(), position); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-27T20:38:12.493

```
final Handler handler = new Handler();
//100ms wait to scroll to item after applying changes
handler.postDelayed(new Runnable() {
@Override
public void run() {
   listView.smoothScrollToPosition(selectedPosition);
}}, 100); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-17T10:26:20.503

Lars 提到的集合选择方法有效，但动画对于我们的目的来说太跳跃了，因为它跳过了剩下的任何内容。另一种解决方案是重复调用该方法，直到第一个可见位置是您的索引。最好快速完成并且有限制，否则它将与用户滚动视图发生冲突。

```
private  void DeterminedScrollTo(Android.Widget.ListView listView, int index, int attempts = 0) {
    if (listView.FirstVisiblePosition != index && attempts < 10) {
        attempts++;
        listView.SmoothScrollToPositionFromTop (index, 1, 100);
        listView.PostDelayed (() => {
            DeterminedScrollTo (listView, index, attempts);
        }, 100);
    }
} 
```

解决方案是在 C# via 中。Xamarin 但应该很容易翻译成 Java。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-11T12:05:46.427

你打电话`arrayadapter.notifyDataSetChanged()`后打电话`arrayadapter.add()`吗？也可以肯定的是，`smoothScrollToPosition`这些`setSelection`方法`ListView`不是`arrayadapter`你上面提到的。

无论如何，看看这是否有帮助： [notifyDataSetChanged not working in android after smoothScrollToPosition](https://stackoverflow.com/questions/6942582/smoothscrolltoposition-after-notifydatasetchanged-not-working-in-android)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-12T20:05:30.717

在android java中使用它，它对我有用：

```
private void DeterminedScrollTo(int index, int attempts) {
        if (listView.getFirstVisiblePosition() != index && attempts < 10) {
            attempts++;
            if (listView.canScrollVertically(pos))
                listView.smoothScrollToPositionFromTop(index, 1, 200);
            int finalAttempts = attempts;
            new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {
                @Override
                public void run() {
                    DeterminedScrollTo(index, finalAttempts);
                }
            }, 200);
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-08T02:55:18.703

kotlin 中的解决方案：

```
fun AbsListView.scrollToIndex(index: Int, duration: Int = 150) {
    smoothScrollToPositionFromTop(index, 0, duration)
    postDelayed({
        setSelection(index)
        post { smoothScrollToPositionFromTop(index, 0, duration) }
    }, duration.toLong())
} 
```

PS：看起来它在 Android SDK 方面很混乱，所以如果你不想手动计算视图偏移量，这是你能得到的最好的方法。也许最好的简单方法是将长列表的持续时间设置为 0 以避免任何可见的跳转。

在 GridView 的某些位置调用 setSelection 时我遇到了一些问题，所以在我看来，这确实是解决方案，而不是使用它。

# nginx - NGINX 负载均衡器

> ID：11431835
> 
> 赞同：2
> 
> 时间：2012-07-11T11:38:41.883
> 
> 标签：nginx, load, load-balancing

我们已经设置了 nginx 服务器，并尝试与其他 2 台服务器进行负载平衡。

设置是：一台主服务器（代理服务器）和另外两台服务器（服务于请求）

我们有一组 .css、.js 和 .php 文件。我们希望主服务器提供所有静态文件，如 .css、.js 和图像文件，并且仅针对 .php 请求，我们希望以负载平衡的方式将请求转发到 2 个服务服务器之间。

请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:51:31.080

```
upstream backends {
    server backend1.example.com;
    server backend2.example.com;
}

server {

    location / {
        # your static configuration
        root /path/to/static/files;
    }

    location ~ \.php$ {
        # your proxy configuration
        proxy_pass http://backends;
    }

} 
```

文档是一个很好的起点。

*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)
*   [http://nginx.org/en/docs/http/ngx_http_upstream_module.html](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)
*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/root](http://nginx.org/r/root)
*   [http://nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)
*   [http://nginx.org/r/alias](http://nginx.org/r/alias)
*   [http://nginx.org/r/try_files](http://nginx.org/r/try_files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:11:41.770

你可以试试具体的

```
location /abcd/admin {

 server backend1.example.com

} 
```

# android - Android GSON/JSON 反序列化并在适配器中显示

> ID：11431838
> 
> 赞同：0
> 
> 时间：2012-07-11T11:38:52.857
> 
> 标签：android, android-layout, gson

我已经被这个问题困了两个星期了，我希望有人能帮助我。提前致谢。

我想在一个活动中创建一个视图，该视图由标题视图和底部的列表视图组成。到目前为止，我已经成功地将数据从 JSON 获取到 listView，因为那里的大多数教程都只是关于 JSON 和 listView。

我的问题是，我怎样才能让下面的数据显示在标题、简单视图（非 listView）甚至我想要的视图上......

JSON文件

```
{
 "photos" : [
  {
     "thumbnail" : "http://www.myserver.com/01.jpg",
  },
  {
     "thumbnail" : "http://www.myserver.com/02.jpg",
  },
  {
     "thumbnail" : "http://www.myserver.com/03.jpg",
  },
],
"info" : [
  {
     "id" : "1",
     "description" : "My White Toyota",
     "country" : "Japan",
     "year" : "1982"
   }
 ];
"owners" : [
   {
     "ownerid" : "5633432",
     "name" : "Jackson",
     "year_own" : "1982-1985"
    },
    {
     "ownerid" : "76832",
     "name" : "Kurt",
     "year_own" : "1986-1995"
    },
    {
     "ownerid" : "236471",
     "name" : "Alma",
     "year_own" : "1999-2005"
    }
   ]
} 
```

列表类

```
public class car_detail {
    private List<CAR_INFO_MODEL> photos;
    private List<CAR_INFO_MODEL> info;
    private List<CAR_INFO_MODEL> owners;

public List<CAR_INFO_MODEL> getPhotos(){
    return photos;
}
public void setPhotoList(List<CAR_INFO_MODEL> photos){
    this.photos = photos;
}

    public List<CAR_INFO_MODEL> getInfos(){
    return info;
}
public void setInfoList(List<CAR_INFO_MODEL> info){
    this.info = info;
}

    public List<CAR_INFO_MODEL> getOwners(){
    return owners;
}
public void setOwnerList(List<CAR_INFO_MODEL> owners){
    this.owners = owners;
}
} 
```

模型类

```
public class CAR_INFO_MODEL {
private String description;
private String year;

private String thumbnail;

private String name;
private String year_own;

public String getDesc() {
    return description;
}
public void setDesc(String description) {
    this.description = description; 
    }
    public String getYear() {
    return year;
}
public void setYear(String year) {
    this.year = year; 
    }
    public String getPhoto() {
    return thumbnail;
}
public void setPhoto(String thumbnail) {
    this.thumbnail = thumbnail; 
    }
    public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name; 
    }
    public String getYearown() {
    return year_own;
}
public void setYearown(String year_own) {
    this.year_own = year_own; 
    }
} 
```

活动类（我使用 AsyncTask 查询并获取 JSON 响应），我可以成功地从 JSON 中获取信息对象，但不知道如何获取照片和所有者。

```
 public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cardetail_layout);

    lv = (ListView) findViewById(R.id.list_cardetail);

    carArray = new ArrayList<CAR_INFO_MODEL>();
    carDetailAdapter = new carDetailAdapter(carActivity.this, R.layout.caritem_layout, infoArray);
            lv.setAdapter(carDetailAdapter);  
            try {
                new DealSync().execute("http://www.myserver.com/carsquery/");
            } catch(Exception e) {}
 }

 String json = client.getResponse();
 list = new Gson().fromJson(json, car_detail.class); 

 return list;

 protected void onPostExecute(car_detail infolist) {

        for(CAR_INFO_MODEL lm : infolist.getInfo())
        {
            infoArray.add(lm);
        }
        carDetailAdapter.notifyDataSetChanged();
    } 
```

适配器类（我可以将信息显示为单个项目列表，但我不知道如何从数据中获取照片和所有者（底部列表视图）并显示它。）

```
public class carDetailAdapter extends ArrayAdapter<CAR_INFO_MODEL> {
int resource;
String response;
Context context;
private LayoutInflater dInflater;

public carDetailAdapter(Context context, int resource, List<CAR_INFO_MODEL> objects) {
        super(context, resource, objects);
        this.resource = resource;
        dInflater = LayoutInflater.from(context);
}
static class ViewHolder {

    TextView description;

}
public View getView(int position, View convertView, ViewGroup parent)
{
    ViewHolder holder;
    CAR_INFO_MODEL lm = (CAR_INFO_MODEL) getItem(position);

    //Inflate the view
    if(convertView==null)
    {
        convertView = dInflater.inflate(R.layout.carDetail_layout, null);
        holder = new ViewHolder();
        holder.description = (TextView) convertView.findViewById(R.id.cardesc);
        convertView.setTag(holder);
    }
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.description.setText(lm.getDesc());

    return convertView;
}

} 
```

这可能听起来很复杂，只是希望有人能给我帮助。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:54:58.863

我注意到你的逻辑中有一些问题

*   首先，您使用的 JSON 字符串不是 JSON 格式的。GSON 解析器无法解析相同的字符串。

问题 ：

*   `thumbnail`照片变量末尾有一个额外的逗号
*   info 对象以`;`而不是结尾`,`

更正的 JSON 字符串在这里：

```
{
 "photos" : [
  {
     "thumbnail" : "http://www.myserver.com/01.jpg"
  },
  {
     "thumbnail" : "http://www.myserver.com/02.jpg"
  },
  {
     "thumbnail" : "http://www.myserver.com/03.jpg"
  }
],
"info" : [
  {
     "id" : "1",
     "description" : "My White Toyota",
     "country" : "Japan",
     "year" : "1982"
   }
 ],
"owners" : [
   {
     "ownerid" : "5633432",
     "name" : "Jackson",
     "year_own" : "1982-1985"
    },
    {
     "ownerid" : "76832",
     "name" : "Kurt",
     "year_own" : "1986-1995"
    },
    {
     "ownerid" : "236471",
     "name" : "Alma",
     "year_own" : "1999-2005"
    }
   ]
} 
```

现在我发现的逻辑错误

*   您的`CarDetails`JSON 数据包含三个对象。1\. 照片列表 2\. Info 对象和 3\. 所有者列表
*   但是您的实现将其作为三个`CAR_INFO_MODEL`列表处理，其中包含此类中的所有数据。通过这样做，您的 JSON 中存在的所有分类都已丢失。
*   这是你的问题

要解决此问题，请将您的数据分类为 JSON 表示的数据。如下所示

`Photo`班级_

```
public class Photo {

    /**
     * Constructor for Photo.
     * @param thumbnail <tt></tt>
     */
    public Photo(String thumbnail) {
        super();
        this.thumbnail = thumbnail;
    }

    private String thumbnail;

    /**
     * Gets the thumbnail.
     * 
     * @return <tt> the thumbnail.</tt>
     */
    public String getThumbnail() {
        return thumbnail;
    }

    /**
     * Sets the thumbnail.
     *
     * @param thumbnail <tt> the thumbnail to set.</tt>
     */
    public void setThumbnail(String thumbnail) {
        this.thumbnail = thumbnail;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Photo [thumbnail=" + thumbnail + "]";
    }

} 
```

`Info`班级_

```
public class Info {
    /*"id" : "1",
     "description" : "My White Toyota",
     "country" : "Japan",
     "year" : "1982"

     * */

    private String id;
    /**
     * Constructor for Info.
     * @param id
     * @param description
     * @param country
     * @param year <tt></tt>
     */
    public Info(String id, String description, String country, String year) {
        super();
        this.id = id;
        this.description = description;
        this.country = country;
        this.year = year;
    }
    private String description;
    private String country;
    private String year;
    /**
     * Gets the id.
     * 
     * @return <tt> the id.</tt>
     */
    public String getId() {
        return id;
    }
    /**
     * Sets the id.
     *
     * @param id <tt> the id to set.</tt>
     */
    public void setId(String id) {
        this.id = id;
    }
    /**
     * Gets the description.
     * 
     * @return <tt> the description.</tt>
     */
    public String getDescription() {
        return description;
    }
    /**
     * Sets the description.
     *
     * @param description <tt> the description to set.</tt>
     */
    public void setDescription(String description) {
        this.description = description;
    }
    /**
     * Gets the country.
     * 
     * @return <tt> the country.</tt>
     */
    public String getCountry() {
        return country;
    }
    /**
     * Sets the country.
     *
     * @param country <tt> the country to set.</tt>
     */
    public void setCountry(String country) {
        this.country = country;
    }
    /**
     * Gets the year.
     * 
     * @return <tt> the year.</tt>
     */
    public String getYear() {
        return year;
    }
    /**
     * Sets the year.
     *
     * @param year <tt> the year to set.</tt>
     */
    public void setYear(String year) {
        this.year = year;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Info [id=" + id + ", description=" + description + ", country="
                + country + ", year=" + year + "]";
    }

} 
```

“所有者”类

```
public class Owner {
    /*
     * "ownerid" : "5633432",
     "name" : "Jackson",
     "year_own" : "1982-1985"

     * */

    private String ownerid;
    /**
     * Constructor for Owner.
     * @param ownerid
     * @param name
     * @param year_own <tt></tt>
     */
    public Owner(String ownerid, String name, String year_own) {
        super();
        this.ownerid = ownerid;
        this.name = name;
        this.year_own = year_own;
    }
    private String name;
    private String year_own;
    /**
     * Gets the ownerid.
     * 
     * @return <tt> the ownerid.</tt>
     */
    public String getOwnerid() {
        return ownerid;
    }
    /**
     * Sets the ownerid.
     *
     * @param ownerid <tt> the ownerid to set.</tt>
     */
    public void setOwnerid(String ownerid) {
        this.ownerid = ownerid;
    }
    /**
     * Gets the name.
     * 
     * @return <tt> the name.</tt>
     */
    public String getName() {
        return name;
    }
    /**
     * Sets the name.
     *
     * @param name <tt> the name to set.</tt>
     */
    public void setName(String name) {
        this.name = name;
    }
    /**
     * Gets the year_own.
     * 
     * @return <tt> the year_own.</tt>
     */
    public String getYear_own() {
        return year_own;
    }
    /**
     * Sets the year_own.
     *
     * @param year_own <tt> the year_own to set.</tt>
     */
    public void setYear_own(String year_own) {
        this.year_own = year_own;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Owner [ownerid=" + ownerid + ", name=" + name + ", year_own="
                + year_own + "]";
    }

} 
```

最后是`CarDetail`班级

```
public class CarDetail {

    private List<Photo> photos;
    private List<Info> info;
    private List<Owner> owners;
    /**
     * Gets the photos.
     * 
     * @return <tt> the photos.</tt>
     */
    public List<Photo> getPhotos() {
        return photos;
    }
    /**
     * Sets the photos.
     *
     * @param photos <tt> the photos to set.</tt>
     */
    public void setPhotos(List<Photo> photos) {
        this.photos = photos;
    }
    /**
     * Gets the info.
     * 
     * @return <tt> the info.</tt>
     */
    public List<Info> getInfo() {
        return info;
    }
    /**
     * Sets the info.
     *
     * @param info <tt> the info to set.</tt>
     */
    public void setInfo(List<Info> info) {
        this.info = info;
    }
    /**
     * Gets the owners.
     * 
     * @return <tt> the owners.</tt>
     */
    public List<Owner> getOwners() {
        return owners;
    }
    /**
     * Sets the owners.
     *
     * @param owners <tt> the owners to set.</tt>
     */
    public void setOwners(List<Owner> owners) {
        this.owners = owners;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "CarDetail [photos=" + photos + ", info=" + info + ", owners="
                + owners + "]";
    }

} 
```

并使用以下这些类来解析和获取存储在每个对象中的详细信息（即照片、所有者和信息）

```
String json = "{" + 
" \"photos\" : [" + 
"  {" + 
"     \"thumbnail\" : \"http://www.myserver.com/01.jpg\"" + 
"  }," + 
"  {" + 
"     \"thumbnail\" : \"http://www.myserver.com/02.jpg\"" + 
"  }," + 
"  {" + 
"     \"thumbnail\" : \"http://www.myserver.com/03.jpg\"" + 
"  }" + 
"]," + 
"\"info\" : [" + 
"  {" + 
"     \"id\" : \"1\"," + 
"     \"description\" : \"My White Toyota\"," + 
"     \"country\" : \"Japan\"," + 
"     \"year\" : \"1982\"" + 
"   }" + 
" ]," + 
"\"owners\" : [" + 
"   {" + 
"     \"ownerid\" : \"5633432\"," + 
"     \"name\" : \"Jackson\"," + 
"     \"year_own\" : \"1982-1985\"" + 
"    }," + 
"    {" + 
"     \"ownerid\" : \"76832\"," + 
"     \"name\" : \"Kurt\"," + 
"     \"year_own\" : \"1986-1995\"" + 
"    }," + 
"    {" + 
"     \"ownerid\" : \"236471\"," + 
"     \"name\" : \"Alma\"," + 
"     \"year_own\" : \"1999-2005\"" + 
"    }" + 
"   ]" + 
"}";
// parsing the JSON string to CardDetail object
 CarDetail detail=new Gson().fromJson(json,CarDetail.class);

 // retrieving data from the CardDetail object
 List<Photo> photos = detail.getPhotos();
 System.out.println("retrieving Photos");
 for (Photo photo : photos) {
    System.out.println(photo);
}

 List<Info> info = detail.getInfo();
 System.out.println("retrieving Info");
 for (Info info2 : info) {
    System.out.println(info2);
}
 System.out.println("retrieving Owners");
 List<Owner> owners = detail.getOwners();
 for (Owner owner : owners) {
    System.out.println(owner);
} 
```

现在在您的视图中使用检索到的数据。如果您需要任何帮助/帮助，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:42:05.660

使用[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

或者[google-gson](http://code.google.com/p/google-gson/)，如果你真的想序列化/反序列化 json。

# visual-studio-2012 - 如何解决 Visual Studio 2012 RC 中 Coded UI Test 和 MVC Scaffolding 之间的冲突

> ID：11431841
> 
> 赞同：4
> 
> 时间：2012-07-11T11:38:59.240
> 
> 标签：visual-studio-2012, coded-ui-tests, asp.net-mvc-scaffolding

我正在运行 Visual Studio 2012 RC（截至 2012 年 7 月 11 日，所有最新更新都已安装。我有一个 asp.net mvc 4 解决方案

1.  一个网络项目
2.  一个单元测试项目
3.  一个编码的 UI 测试项目
4.  一个 Web 性能和负载测试项目

当我第一次创建解决方案时，我可以毫无问题地添加编码 UI 测试。但是，今天我尝试创建 Coded UI Test 并收到以下错误

> 未能加载以下包：C:\Users[文件路径位于此处]\Microsoft.VisualStudio.TestTools.UITesting.dll。编码的 UI 测试现在处于不一致的状态。删除此包并重新启动 Visual Studio 以使用编码的 UI 测试。

我[之前在使用 Visual Studio 2010 时遇到过类似的问题](https://stackoverflow.com/questions/6630209/error-creating-coded-ui-test-in-visual-studio-2010-ultimate)。我仍然有这个问题。

但是，如果我卸载（通过 NuGet）MVC Scaffolding 和 T4Scaffolding 并重新启动 Visual Studio，我可以再次创建 Coded UI 测试，但如果我重新添加脚手架包并重新启动 Visual Studio，我会再次收到错误并且无法创建 Coded UI 测试.

看起来

1.  Visual Studio 中的脚手架包和编码的 UI 测试之间存在冲突
2.  原始错误 Visual Studio 2010 错误尚未在 Visual Studio 2012 中修复 - [Microsoft 已承认这是一个错误](http://social.msdn.microsoft.com/Forums/ta/vsautotest/thread/144b9a55-af5a-4e89-8383-d4b07817ff0f)。

任何人都可以帮助这个脚手架和编码 UI 测试的粉丝吗？在没有变通方法的情况下使用这两种技术会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:14:42.760

There is no solution to this. The only real workaround is not to use MVC Scaffolding.

# webdriver - 如何使用 Web 驱动程序在 Firefox 中实现记住我的自动化？

> ID：11431842
> 
> 赞同：1
> 
> 时间：2012-07-11T11:38:59.323
> 
> 标签：webdriver

如何使用 Web 驱动程序在 Firefox 中实现“记住我”自动化？我正在使用网络驱动程序 2.20、Eclipse IDE、Firefox 9.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:19:54.970

您遇到这种情况的原因是每次您启动 Firefox 时，webdriver 都会创建一个没有 cookie 的新匿名配置文件。您可以使其使用特定的配置文件，该配置文件应保留 cookie。

```
File profileDir = new File("path/to/profile");
FirefoxProfile profile = new FirefoxProfile(profileDir);
WebDriver driver = new FirefoxDriver(profile); 
```

[FirefoxProfile](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/firefox/FirefoxProfile.html)有许多其他选项，例如添加扩展等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T16:55:34.503

我了解您需要 Firefox 的解决方案，但我有以下适用于 Chrome 的工作版本。您可以参考此链接以获取 firefox 解决方案： [如何在不清除 cookie 或缓存的情况下启动 Selenium RemoteWebDriver 或 WebDriver？](https://stackoverflow.com/questions/29176528/how-to-start-selenium-remotewebdriver-or-webdriver-without-clearing-cookies-or-c)

对于 Chrome（配置）：您必须设置用户目录的路径，这将在您第一次登录后保存所有登录信息。下次您再次登录时，将获取来自用户目录的登录信息。

```
System.setProperty("webdriver.chrome.driver", "res/chromedriver.exe");
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
ChromeOptions options = new ChromeOptions();
options.addArguments("test-type");
options.addArguments("start-maximized");
options.addArguments("user-data-dir=D:/temp/");
capabilities.setCapability("chrome.binary","res/chromedriver.exe");
capabilities.setCapability(ChromeOptions.CAPABILITY,options);
WebDriver driver = new ChromeDriver(capabilities); 
```

首次登录：

```
driver.get("https://gmail.com");
//Your login script typing username password, check 'keep me signed in' and so on 
```

关闭驱动程序（不要退出）：

```
driver.close(); 
```

重新初始化驱动程序并导航到该站点。不应再次要求您输入用户名和密码：

```
driver = new ChromeDriver(capabilities);
driver.get("http://gmail.com"); 
```

可以使用 firefox 配置文件为 firefox 实现上述内容。

# facebook-graph-api - 一个应用程序中的多个分数

> ID：11431843
> 
> 赞同：3
> 
> 时间：2012-07-11T11:39:02.437
> 
> 标签：facebook-graph-api

嗨，

我有一个具有多个级别的游戏，我想为每个级别分别发布用户高分。

1.1 这可能吗？Facebook 是否支持为同一应用程序发布多个分数？

如果这不可能，我想发布一个以数字 1 开头的长数字，然后接下来的 3 位数字代表第一级的分数，接下来的 3 位数字代表第二级，依此类推。我有 7 个级别，加起来是一个 22 位数字。

2.1 是否可以张贴 22 位数字作为分数？

2.2 这个分数是显示在用户时间线/应用程序页面上的任何位置，还是对用户隐藏，我可以安全地解决我的问题？

在此先感谢，巴里

更新：

2.1 在文档中，分数显示为整数，因此不能选择发布 22 位数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:06:59.143

据我所知，没有办法在一个应用程序中发布多个分数:(

发布由多个分数串联而成的分数并不是一个好主意，因为每当您发布分数时，facebook 都会自动发布您发送到“游戏提要”的数字，这样每个人都会看到这个奇怪的数字。此外，当一个用户通过他的朋友分数时，它也会发布到“游戏提要”，因此发送不代表真实分数的分数是有问题的

# iphone - 异或目标-c

> ID：11431844
> 
> 赞同：22
> 
> 时间：2012-07-11T11:39:12.730
> 
> 标签：iphone, objective-c, logic

有没有办法设置一个仅在两个组件之一返回 true 时才返回 true 的条件？

```
BOOL var1
BOOL var2 
```

比`if((var1 && !var2) || (!var1 && var2))`

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-11T11:44:32.460

由于 Objective-C 是 C 的超集，您只需使用 C 中的 XOR 运算符，即`^`.

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-11T11:49:58.820

异或

```
if(!!var1 != !!var2)
{
   NSLog(@"XOR condition");
} 
```

感叹号将 vars 转换为 BOOL（真正的转换，而不是强制转换）
所以即使您的变量不是 BOOL，此解决方案也有效。

```
!!(0|nil) ≡ 0  
!!(any other number|object) ≡ 1 
```

这在您想确保只有一个 vars 是 nonnil 的情况下很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-06T23:32:21.050

您可以通过执行以下操作为 Ishu 建议的代码添加更多**清晰度：**

```
#define XOR != 
```

然后你就写：

```
if (var1 XOR var2) {

    ...
} 
```

* * *

真值表输出：
[T XOR T => F; T != T => F],
[T XOR F => T; T != F => T],
[F XOR T => T; F != T => T] 和
[F XOR F => F; F != F => F]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-10T14:02:42.613

宏可能是一种选择。它将保持相同的行为，但现在以更易读的方式。

`#define XOR(x,y) (((x) && !(y)) || (!(x) && (y)))`

```
if(XOR(var1, var2) {

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T11:50:12.977

try `(int)var1 ^ (int)var2` YES 和 NO 实际上定义如下：

```
#define YES (BOOL)1
#define NO  (BOOL)0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T12:08:36.233

```
if ((!var1)==var2) 
{
        NSLog(@"Yes");
} 
```

# php - 按钮错误（CodeIgniter 和 Twitter 引导程序）

> ID：11431847
> 
> 赞同：0
> 
> 时间：2012-07-11T11:39:35.507
> 
> 标签：php, codeigniter, twitter-bootstrap

在 CodeIgniter(PHP) 和 Twitter-Bootstrap 中编码关注/取消关注系统。我也有为 URL 激活的路由。按照 VIEW 中的按钮代码。

```
 <!-- Follow Button Start -->
<?php $is_logged_in = $this->session->userdata('is_logged_in'); ?>
<?php if(!(empty($is_logged_in)) && $sID != $vID && !in_array($sID, $following)): ?>
    <button class="btn" type="submit" onClick="location.href='<?php echo site_url("follow/$vUsername"); ?>'">Follow <?php echo $vUsername; ?> </button>
<?php elseif (in_array($sID, $following)):?>
    <button class="btn" type="submit" onClick="location.href='<?php echo site_url("unfollow/$vUsername"); ?>'">UnFollow <?php echo $vUsername; ?> </button>
<?php else: ?>
    <button class="btn disabled" type="submit">Follow <?php echo $vUsername; ?> </button>
<?php endif; ?>
<!-- Follow Button End --> 
```

即使用户没有关注，按钮也会显示`UnFollow $vUsername`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:26:12.890

我不能在这里完全测试它，但这对我来说更有意义：

```
<?php if((!empty($is_logged_in)) && ($sID != $vID) && (!in_array($sID, $following))): ?> 
```

*编辑：*

好吧，在这种情况下，只有简单的逐步调试可以节省您的时间：

```
<?php 
$is_logged_in = $this->session->userdata('is_logged_in'); 

if(!empty($is_logged_in))
{
    echo '$is_logged_in is not empty';
}

echo '$sID is: '.$sID.' and it should not be equal to $vID'. $vID;

if($sID != $vID){
    echo 'and indeed it is not';
}
else
{
    echo 'but it is. Here is the problem';
}

echo 'This is the $following array:';
print_r($following);

if(!in_array($sID, $following))
{
    echo '$sID is not in the $following array';
}
else
{
    echo '$sID IS in the $following array';
}   

?> 
```

# mysql - how can i order destinations based on a given destination country?

> ID：11431849
> 
> 赞同：2
> 
> 时间：2012-07-11T11:40:02.600
> 
> 标签：mysql, sql

I have a destination id and I want to select other destinations, ordered first by the given destination's country followed by others. (preferably without using subquery)

```
destination:
- id
- name

destination_visa
- id_destination
- id_visa

visa
- id_visa
- country 
```

How do I select the given destination's country and then order other destination based on this destination's country, preferably without using a subquery ?

**SQLFiddle**: [http://sqlfiddle.com/#!2/31503/3](http://sqlfiddle.com/#!2/31503/3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:41:57.843

[Is this what you had in mind?](http://sqlfiddle.com/#!2/31503/7)

```
select
    d.id_destination, v.country, d.name 
from
    destination d
    inner join destination_visa dv on dv.id_destination = d.id_destination
    inner join visa v on dv.id_visa = v.id_visa
order by nullif (v.country, (select v2.country
                             from destination_visa dv2
                             inner join visa v2
                             on dv2.id_visa = v2.id_visa
                             where dv2.id_destination = 6)); 
```

There is still a subquery, which might be preselected into a variable.

I don't think a subquery should present a problem because it is not correlated to outer query, meaning it should be executed only once. As for order by, nulls are sorted first so I used that to nullify country matching given destination. Alternatively you might use this to make intend more clear:

```
order by case when v.country = (select v2.country
                                 from destination_visa dv2
                                 inner join visa v2
                                 on dv2.id_visa = v2.id_visa
                                 where dv2.id_destination = 6)
              then 0 -- Move matching country to front 
              else 1 -- Not a matching country
         end,
         v.country 
```

# php - PHP 即时上传到 blob

> ID：11431855
> 
> 赞同：0
> 
> 时间：2012-07-11T11:40:27.217
> 
> 标签：php, mysql, input, upload, blob

我有一个简单的输入表单，其中包含名称为“pdf_statement”的输入类型=“文件”。

我希望能够上传内容并即时插入数据库。由于这只是一个测试文件，我不担心安全性（一旦功能到位，我将添加）。

我已阅读[http://php.net/manual/en/function.stream-get-contents.php](http://php.net/manual/en/function.stream-get-contents.php)但无法使其正常工作。我得到错误*fopen() 期望参数 1 是字符串，给定数组*和 *stream_get_contents() 期望参数 1 是资源，给定布尔值*。

如果这非常明显，我很抱歉，但对于正在学习的人来说，我无法弄清楚我做错了什么。

```
<?php

include('session.php');

$provider      =$_POST['provider_id'];
$trd_period    =$_POST['trading_period_month'];
$pdf_statement =stream_get_contents(fopen($_FILES['pdf_statement'], 'r'));

$sql_qry="update rd_provider_statement
          set (pdf_statment='".$pdf_statement."', creation_user_id='SCO')
          where  provider='".$provider."' and trading_period_month='".$trd_period."'";
$sql_err_no=sql_select($sql_qry,$sql_res,$sql_row_count,$sql_err,$sql_uerr);    

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:45:59.407

您需要以二进制模式打开文件：

```
fopen($_FILES['pdf_statement']['tmp_name'], 'rb') 
```

或者你可以`file_get_contents()`改用。

```
$pdf_statement = file_get_contents($_FILES['pdf_statement']['tmp_name']); 
```

您还需要清理您的输入。利用`mysql_real_escape_string()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:48:07.470

`$_FILES['pdf_statement']`是一个数组，而不是包含可以传递给的文件路径的字符串`fopen`。您还需要以二进制模式打开文件。

```
$pdf_statement = stream_get_contents(fopen($_FILES['pdf_statement']['tmp_name'], 'rb')); 
```

值得指出的是，使用数据库存储文件上传并不是一个好主意。文件系统是存放这些信息的好地方。

# c# - 多个操作的并行化和结果的串联

> ID：11431860
> 
> 赞同：4
> 
> 时间：2012-07-11T11:40:35.600
> 
> 标签：c#, multithreading, silverlight, task-parallel-library

我想使用任务并行库在**Silverlight 5.0**应用程序中实现以下内容（SL5 有任务工厂但没有 Parallel.For）。我有很多线程知识，但没有关于 TPL 的知识，所以这似乎是一个很好的任务：）

目前我有一些代码，同步执行如下：

```
public interface IProcessor
{
    IEnumerable<Bar> Provide(Foo param)
}

private IEnumerable<IProcessor> processors; 

public void DoMultiOperations(Foo param, Action<IEnumerable<Bar>> callback)
{
    List<Bar> allResults = new List<Bar>();

    foreach(var processor in this.processors)
    {
        allResults.AddRange(processor.Provide(param));
    }

    callback(allResults);
} 
```

考虑每个`IProcessor`接受一个`Foo`参数来`Provide`返回一个`IEnumerable<Bar>`. 所有结果的聚合通过回调发送回调用者。

现在一些 IProcessor 立即执行。有些人调用服务器，可能需要几秒钟。我想为 N`IProcessor`个实例安排 N 个任务，并在所有任务都完成（或超时）时连接`IEnumerable<Bar>`结果。

如果可能的话，我想为整个操作添加一个超时，所以如果所有操作都没有在 15 秒内完成，请抛出。

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:07:08.670

同样，我无法测试此代码，但如果 Silverlight 没有 Parallel.ForEach 你可以使用 Task.WaitAll 它应该可以工作

```
 private IEnumerable<IProcessor> processors;

    public void DoMultiOperations(Foo param, Action<IEnumerable<Bar>> callback)
    {
        var allResults = new ConcurrentQueue<Bar>();
        Task.WaitAll(processors.Select(processor => Task.Factory.StartNew(() => GetData(processor, param, allResults))).ToArray());
        callback(allResults);
    }

    private static void GetData(IProcessor processor, Foo param, ConcurrentQueue<Bar> allResults)
    {
        var enumerable = processor.Provide(param);
        foreach (var bar in enumerable)
        {
            allResults.Enqueue(bar);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:27:59.037

为什么不使用类似下面的东西

```
// Allow for cancellation.
CancellationTokenSource cancelSource = new CancellationTokenSource();
CancellationToken token = new CancellationToken();
TaskCreationOptions atp = TaskCreationOptions.AttachedToParent; 

List<Bar> allResults = new List<Bar>();
Task<List<Bar>> asyncTask = Task.Factory.StartNew<List<Bar>>(() => asyncMethod(token, atp), token);

// Continuation is returned when the asyncMethod is complete.
asyncTask.ContinueWith(task =>
{
    // Handle the result.
    switch (task.Status)
    {
        // Handle any exceptions to prevent UnobservedTaskException.             
        case TaskStatus.RanToCompletion:
            break;
        case TaskStatus.Canceled:
            break;
        case TaskStatus.Faulted:
    }
} 
```

在您的`asyncMethod`中，您可以执行以下操作

```
private List<Bar> asyncMethod(CancellationToken token)
{
    List<Bar> allResults = new List<Bar>();

    foreach(var processor in this.processors)
    {
        Task.Factory.StartNew<IEnumerable<Bar>>(() => 
        {     
            processor.Provide(param);
        }, atp).ContinueWith( cont => { allResults.AddRange(cont.Result) }); 

        // Cancellation requested from UI Thread.
        if (token.IsCancellationRequested)
            token.ThrowIfCancellationRequested();
    }
    return allResults;
} 
```

然后，你可以从第一个片段中`List<Bar>`调用的延续中获得总体结果 (a) 。`task`您可以通过 UI 中的某个事件调用取消，例如

```
// Cancellation requested from UI Thread.
if (token.IsCancellationRequested)
    token.ThrowIfCancellationRequested(); 
```

我无法对此进行测试，但类似上面的东西应该可以工作。请参阅此[对 TPL 的精彩介绍以](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)获取更多信息和该类的使用...

我希望这是有用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:26:23.737

我认为这大致正确

```
public void DoMultiOperations(Foo param, Action<IEnumerable<Bar>> callback)
{
    var allResults = new List<Bar>();

    // We are using all the default options on the TaskFactory 
    // except when we are appending the results this has to be synchronized 
    // as List<> is not multithreading safe (a more appropriate collection perhaps) 
    var taskFactory = new TaskFactory<IEnumerable<Bar>>(
        TaskCreationOptions.None,
        TaskContinuationOptions.ExecuteSynchronously);

    // Kick off a task for every processor
    var tasks =
        new List<Task<IEnumerable<Bar>>>(processors.Count());
    tasks.AddRange(
        processors.Select(
            processor =>
            taskFactory.StartNew(() => processor.Provide(param))));

    if (Task.WaitAll(tasks.ToArray(), 5 * 1000))
    {
        foreach (Task<IEnumerable<Bar>> task in tasks)
        {
            allResults.AddRange(task.Result);
        }
        callback(allResults);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T14:35:29.203

这将异步并行运行所有任务：

```
public void DoMultiOperations(Foo param, Action<IEnumerable<Bar>> callback)
{
    // since each task's callback would access this storage - we are using
    // one of the concurrent queue
    ConcurrentQueue<Bar> allResults = new ConcurrentQueue<Bar>();

    Task[] tasks = this.processors.Select(p => new Task(() =>
        {
            IEnumerable<Bar> results = p.Provide(param);
            foreach (var newItem in results)
            {
                allResults.Enqueue(newItem);
            }
        })).ToArray();

    foreach (var task in tasks)
    {
        task.Start();
    }

    // 5 seconds to wait or inject a value into this method
    Task.WaitAll(tasks, 5000);                
    callback(allResults);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T13:20:06.450

使用 TPL，您可以传递循环状态以通知其他线程在超时的情况下中止。您需要执行以下操作：

```
 public void DoMultiOperations(Foo param, Action<IEnumerable<Bar>> callback)
    {
        ConcurrentBag<Bar> allResults = new ConcurrentBag<Bar>();

        Stopwatch sw = new Stopwatch();
        sw.Start();

        Parallel.ForEach(this.processors, (processor, loopState) =>
        {
            foreach (Bar item in processor.Provide(param))
            {
                allResults.Add(item);
            }

            if (sw.ElapsedMilliseconds > 15000)
            {
                loopState.Stop();
                throw new TimeoutException();
            }
        });

        callback(allResults);
    } 
```

# r - ggplot2：从 ggplot-Object 创建一个独立的副本

> ID：11431861
> 
> 赞同：5
> 
> 时间：2012-07-11T11:40:44.120
> 
> 标签：r, oop, ggplot2

我不确定如何将其放入 OO-Speech 中。但是，当您创建 ggplot 时，它将依赖于源 data.frame。那么如何在没有这种依赖的情况下保存 ggplot 呢？

```
dat <- data.frame(x=runif(10),y=runif(10))  
g <- ggplot(dat, aes(x,y)) + geom_point()  
g  

dat <- NULL  
g 
```

第二个 $g$ 不会产生绘图，因此 dat 是 $NULL$。如何保存 $g$ 以便可以更改 dat？

我知道这不是一个好习惯，但我得到了一些我不想摆弄的很长的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:23:32.953

就个人而言，我认为@Joshua 的答案太复杂了（如果我理解你想要做什么）。

我认为更改存储在绘图对象中的数据框没有任何意义，因为**ggplot2**有一个特殊的中缀运算符，专门设计用于将新数据框应用于给定的绘图对象：`%+%`.

```
dat <- data.frame(x=runif(10),y=runif(10))  
g <- ggplot(dat, aes(x,y)) + geom_point()  
g 
```

![在此处输入图像描述](../Images/ca956120a768fd3d8a4e75403481c7c5.png)

```
#Change the data frame
dat$y <- rexp(10)
#Replot g using the altered data frame
g %+% dat 
```

![在此处输入图像描述](../Images/368cd3d4e74c71d3f23fd57d115aba1f.png)

当然，这不仅适用于原始数据框的更改版本，还适用于全新的数据框，前提是它包含所有必需的变量（并且它们的名称相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:17:34.307

我认为有几种选择，我按我的喜好顺序显示。

```
## setup
require(ggplot2)
set.seed(10) # make reproducible
dat <- data.frame(x=1:10,y=runif(10)) 
```

我最喜欢的选择是为您的代码创建一个简单的函数包装器。然后，每当您需要更改数据时，只需将新数据传递给您的函数，它就会将其提供给`ggplot`并创建新图形。这是灵活的并且对问题相当健壮。它也是可扩展的，因为如果以后您决定也希望能够更改标题，您也可以在函数中添加一个标题参数。

```
## my favorite option
myplot <- function(data) {
  ggplot(data, aes(x, y)) + geom_point()
}

## use it
myplot(data = dat) 
```

![第一个情节](../Images/27ce4ea51f0c358590c34efd1fc6ebcc.png)

```
## change it
dat <- data.frame(x = 11:20, y = runif(10))
myplot(data = dat) 
```

![第二个情节](../Images/450c10c00d606d648aafa3cb4f5c3490.png)

另一种方法是将调用保存`ggplot`为未计算的表达式。然后，您只需在需要时对其进行评估。这几乎就像每次都输入代码（在某些方面有所不同，但这是我能想到的最好的类比）。

```
## not wild about this one
myplotcall <- expression(ggplot(dat, aes(x,y)) + geom_point())

## look at it (literally just the input)
myplotcall
expression(ggplot(dat, aes(x, y)) + geom_point())

## use it
eval(myplotcall) 
```

![第三个情节](../Images/33c9d28f7fbf94d0de3fcc141b44a124.png)

```
## change it
dat <- data.frame(x = 21:30, y = runif(10))
eval(myplotcall) 
```

![第四个情节](../Images/5c56f204ac86ba39ad7eab1a85756738.png)

您可以更改`ggplot`对象本身的数据。我认为这种方法最容易出现问题，因为您正在处理并非真正打算由用户更改的对象的内部结构（即，仅仅因为我们可以并不意味着我们应该）。这更适合由`%+%`操作员完成（参见 joran 的回答）

```
## not wild about this either
g <- ggplot(dat, aes(x,y)) + geom_point()
g ## use it 
```

![第五个情节](../Images/6acf172938631cea85698066a97b039b.png)

```
## change it
dat <- data.frame(x = 31:40, y = runif(10))
g$data <- dat
g 
```

![第六情节](../Images/4fce17fcd6e148364db4acb23818c481.png)

# ios - iOs 5, initWithDecoder 在我的自定义初始化之前被调用

> ID：11431864
> 
> 赞同：0
> 
> 时间：2012-07-11T11:40:55.120
> 
> 标签：ios, ios5, uitabbarcontroller, initialization, uitabbar

我有一个按钮。当您单击按钮时，它将打开一个新的 UITabBarController（在工具箱中预定义）。

这是代码：

```
DealerView *view = [[DealerView alloc] initWithDealerId:976];
[self.navigationController pushViewController:view animated:YES]; 
```

如您所见，我使用自己的自定义初始化程序将 NSUInteger 编号传递给 UITabBarController。

现在在我的 UITabBarController 中，我想将此 ID 号分发给所有子项（选项卡栏中的所有选项卡）。我用这段代码做到这一点：

```
- (void)viewDidLoad
{
    NSInteger i;
    for (i = 0; i < [self.childViewControllers count]; i++){
        DealerBaseView *item = (DealerBaseView*) [self.childViewControllers objectAtIndex:i];
        item.dealerId = self->dealerId;
    }

    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

这样每个子视图都可以使用这个 id 号在他们自己的 viewDidLoad 方法中获取正确的数据库信息。

**问题是 self->dealerId 始终为 0。**

所以我在我的代码中添加了一些断点，看看为什么 self->dealerId 总是返回 0（你可以看到它是在初始化方法中设置的）。

```
- (id) initWithDealerId:(NSUInteger)i{

    self = [super init];

    if (self){
        self->dealerId = i;
    }
    return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    return self;
}

- (id) init{
    self = [super init];
    return self;
}

- (id) initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    return self;
} 
```

现在事实证明，事情的顺序如下：

1.  initWithCoder - UITabBarController
2.  viewDidLoad - UITabBarController
3.  viewDidLoad - UITabBarController 的子选项卡
4.  initWithNibName - UITabBarController
5.  viewDidLoad - UITabBarController（第二次点击这个）
6.  initWithDealerId - UITabBarController

所以我的 init 方法在这个系列中最后被调用，因此dealerId 将始终为 0。

我的问题很简单。我如何设置dealerId，以便在为UITabVarController 和UITabVarController 项目（选项卡控制器内的所有子项目）调用viewDidLoad 时它可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:50:46.097

问题似乎是您正在以两种不同的方式创建两个不同的 DealerView 对象，一种来自 xib 或故事板，另一种来自代码。如果你在不同的init方法中NSLog self的值，相信你会看到不同的地址，表示不同的对象。您所看到的单个事件序列实际上并非如此。

初始化问题的答案是只使用一个对象。

# c# - windows service exe停止后如何修改？

> ID：11431873
> 
> 赞同：2
> 
> 时间：2012-07-11T11:41:20.937
> 
> 标签：c#, windows-services, io

我在 Windows 应用程序产品中工作，这里我需要替换服务 exe（安装目录）以进行升级，所以我停止了服务并尝试用给定的代码替换 exe

```
 ServiceController service = new ServiceController(servicename);

            service.Stop();

            service.WaitForStatus(ServiceControllerStatus.Stopped);

            Thread.Sleep(10000);

            System.IO.File.Copy(application.exe, newapplication.exe, true); 
```

，它抛出了一个错误，如下所示，

**该进程无法访问文件“C:\Program Files\Myapp\application.exe”，因为它正被另一个进程使用。**

但是我可以确定我的服务没有任何依赖关系，我在停止后找不到替换服务文件的方法，请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:44:11.450

我不确定它在 C# 中是如何工作的，但在 C++ 中，您肯定首先需要从服务控制管理器 (SCM) 基础架构中取消注册服务，然后才能删除二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:48:41.630

您无需卸载该服务即可对其进行升级。我经常通过文件复制升级服务。

尝试最多等待 1 分钟，然后再复制文件。

看看[wyUpdate](http://wyday.com/wyupdate/)。AutoUpdater 进程是开源的，你可以看到他们是如何处理它的。（无论如何我推荐该产品）。

也就是说，它没有真正的魔力。如果您在一分钟左右后仍然无法复制 .exe，则说明发生了其他事情。

# c# - 当从列表中删除引用的对象时，c#复制的属性会丢失引用

> ID：11431878
> 
> 赞同：3
> 
> 时间：2012-07-11T11:41:38.467
> 
> 标签：c#, linq, properties, reference

**例子**

看看下面的代码：

```
private void DeDuplicateOrganisations()
{
     var profileOrgs = _organisations.Where(o => o.ExistsInProfile).ToList();
     var kvkOrgs = _organisations.Where(o => !o.ExistsInProfile).ToList();

     profileOrgs.ForEach(o =>
         {
             var duplicate = kvkOrgs.FirstOrDefault(k => k.KvK == o.KvK || k.Title == o.Title);
             if (duplicate != null)
             {
                  o.CompanyInfoOrganisation = duplicate.CompanyInfoOrganisation;
                  o.ExistsInBoth = true;
                  kvkOrgs.Remove(duplicate);
              }
           });

      _organisations = profileOrgs.Concat(kvkOrgs).OrderBy(o => o.Title).ToList();
} 
```

在此示例中，`CompanyInfoOrganisation`当组织被视为重复时，将复制属性（简单地获取；设置；属性）。这一切都按预期工作，重复数据被很好地删除了。

在此消息中也是如此：
`_organisations.First(o => o.ExistsInBoth).CompanyInfoOrganisation != null;`

**问题**

现在我将列表绑定到`_organisations`列表框

```
lbxCompanies.DataSource = null;
lbxCompanies.DataSource = _organisations;
lbxCompanies.DisplayMember = "Title";
lbxCompanies.SelectedIndex = -1; 
```

稍后获取所选值：

```
 var org = lbxCompanies.SelectedValue as Organisation;
 gbxCompanyInfo.Visible = org != null;
 if (gbxCompanyInfo.Visible)
    if (org.CompanyInfoOrganisation != null)
          // NEVER GETS HERE (but gbxComanpyInfo is visible) 
```

如果我尝试读取`CompanyInfoOrganisation`属性，当我知道属性已设置时，我总是会得到 null。

**问题**

这里发生了什么？为什么属性引用被破坏了？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:49:53.053

您正在使用的引用仅具有即时范围，并且一旦查询结束，它就会退出范围并且您的引用消失。所以当你稍后绑定时，引用是完全正确的——null。

```
profileOrgs.ForEach(o =>
{
    // Right here -- var duplicate has scope ONLY within your query. 
    // As soon as the query is executed it leaves scope and the reference
    // pointer will be null
    var duplicate = kvkOrgs.FirstOrDefault(k => k.KvK == o.KvK || k.Title == o.Title);
    if (duplicate != null)
    {
        o.CompanyInfoOrganisation = duplicate.CompanyInfoOrganisation;
        o.ExistsInBoth = true;
        kvkOrgs.Remove(duplicate);
    }
}); 
```

因为您使用的是一个类，所以您需要对其执行深层[MemberwiseClone](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)以获得对象的新副本：

```
o.CompanyInfoOrganisation = (YourInfoType)duplicate.CompanyInfoOrganisation.MemberwiseClone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:00:12.467

加载数据时，将 CompanyInfoOrganisation 属性与根实体一起加载；这样它就会被加载到内存中。如果使用 LINQ to SQL，则通过 DataLoadOptions 加载，并将其传递给上下文。如果使用实体框架，则在 LINQ 查询中使用 Include 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:12:35.113

它可能与捕获 lambda 中的变量有关。尝试将 .ForEach 替换为常规的 foreach()。或者，可能一式两份的 CompanyInfoOrganisation 一开始就为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:38:38.207

问题是我用来`string.Join()`显示值，而要加入的第一个值是 null（这真的很烦人），导致一个空字符串，让我认为该属性是 null。然而事实证明，该属性不为空，而是对所需对象具有完全有效的引用。更小心地使用调试器会节省我一个小时左右的时间......

对不起！

# hibernate - 休眠范围查询 - 将结果分组

> ID：11431882
> 
> 赞同：0
> 
> 时间：2012-07-11T11:41:51.793
> 
> 标签：hibernate, range

我在表中有 3 条记录。我想要不同组的结果。所以我做了范围查询，

```
Query q=session.createQuery("select a.firstName,a.lastname from Emp);
q.setFirstResult(startVal);
q.setMaxResults(endVal);
myList = q.list();
System.out.println(myList.size()); 
```

我创建了如下组。这些组是动态生成的。

```
startVal    endval
0           1
2           2
3           3 
```

对于 startVal= 0 ， endVal = 1 它的工作（返回 myList.size() 值 1）
对于 startVal= 2 ， endVal = 2 它的工作（返回 myList.size() 值 1）

但是对于 startVal= 3 ， endVal = 3 它不工作返回 myList.size() 值 0。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:18:23.860

这不是起始值和结束值 - 它是起始值和最大结果。

所以你的第一个范围是从 0 开始，返回我 1 个结果最大值（因此你的单个结果）。

您的第二个范围从 2 开始，最多给我 2 个结果 - 在这种情况下，只有 3 个结果（0、1 和 2），因为您从 2 开始，所以只有一个结果。

这些范围都没有捕获中间行。

# language-agnostic - 最少字符数的 URL 安全 UUID

> ID：11431886
> 
> 赞同：19
> 
> 时间：2012-07-11T11:42:03.817
> 
> 标签：language-agnostic, uuid

理想情况下，我想要`example.com/resources/äFg4вNгё5`最小数量的**可见**字符，不要介意在通过 HTTP 传输它们之前必须对它们进行百分比编码。

你能说出一个有效地将 128b UUID 编码为最少数量的可见字符的方案，而结果没有破坏 URL 的字符吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-15T11:20:07.600

Base-64 对此有好处。

```
{098ef7bc-a96c-43a9-927a-912fc7471ba2} 
```

可以编码为

```
vPeOCWypqUOSepEvx0cbog 
```

末尾的通常等号可以被删除，因为它们总是使字符串长度成为 4 的倍数。您可以使用一些安全字符来代替`+`and 。`/`您可以从以下选项中选择两个：`-` `.` `_` `~`

更多信息：

*   [RFC 4648](https://www.rfc-editor.org/rfc/rfc4648#page-8)
*   [将 UUID 存储为 base64 字符串](https://stackoverflow.com/questions/772802/storing-uuid-as-base64-string)（Java）
*   [到 base64 的 guid，用于 URL](https://stackoverflow.com/questions/1032376/guid-to-base64-for-url) (C#)
*   [短 GUID](http://web.archive.org/web/20100408172352/http://prettycode.org/2009/11/12/short-guid/) (C#)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-29T18:19:28.390

我使用 url 安全的 base64 字符串。以下是一些执行此操作的 Python 代码^*。

最后一行删除了 base 64 编码喜欢放在末尾的 '=' 或 '==' 符号，它们使将字符放入 URL 更加困难，并且只需要对信息进行解码，不需要在这里完成。

```
import base64
import uuid

# get a UUID - URL safe, Base64
def get_a_Uuid():
    r_uuid = base64.urlsafe_b64encode(uuid.uuid4().bytes)
    return r_uuid.replace('=', '') 
```

* * *

^* [这*确实*遵循标准：`base64.urlsafe_b64encode`遵循 RFC 3548 和 4648 参见[https://docs.python.org/2/library/base64.html](https://docs.python.org/2/library/base64.html)。`==`允许从已知长度的 base64 编码数据中剥离，请参阅[RFC 4648 §3.2](https://www.rfc-editor.org/rfc/rfc4648#section-3.2)。UUID/GUID 在[RFC 4122](https://www.rfc-editor.org/rfc/rfc4122)中指定； [§4.1 格式](https://www.rfc-editor.org/rfc/rfc4122#section-4.1)声明“UUID 格式为 16 个八位字节”。-fucntion`base64`对这 16 个八位字节进行编码。]

# android - Android：单击相机中的图像并在对话框中显示图像

> ID：11431887
> 
> 赞同：1
> 
> 时间：2012-07-11T11:42:03.747
> 
> 标签：android, android-camera, android-imageview, android-gallery, android-dialog

我正在使用带有 an`ImageView`和 2的自定义对话框`Button`。

1.  从图库中选择图像的第一个按钮
2.  第二个按钮单击来自相机的图像

我想在`ImageView`对话框中显示图像..

```
btn1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Dialog();   
        }

        private void Dialog() {
            // TODO Auto-generated method stub
            final Dialog dialog=new Dialog(editevent1.this);
            dialog.setContentView(R.layout.promote2);
            ImageView image =(ImageView)findViewById(R.id.image_camera);
            Button d=(Button)dialog.findViewById(R.id.button2);
            Button f=(Button)dialog.findViewById(R.id.button3);

            dialog.show();
            d.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent intent = new Intent(Intent.ACTION_PICK);
                    intent.setType("image/*");
                    startActivityForResult(intent, 1);

                }
            });
            f.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent cameraintent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                    startActivityForResult(cameraintent, CAMERA_PIC_REQUEST);
                }
            });

            }

});

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if( requestCode == CAMERA_PIC_REQUEST)
    {   
        Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
        ImageView image =(ImageView)findViewById(R.id.image_camera);
        image.setImageBitmap(thumbnail);
    }
    else 
    {
        Toast.makeText(this, "Picture NOt taken", Toast.LENGTH_LONG);            
    }

} 
```

请告诉我如何获得从图库中选择和从相机中单击时的图像`ImageView`。`DialogBox`谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:53:18.877

我不确定这可以使用 a`Dialog`而不是自定义对话框来完成，而是尝试使用具有`UI`对话框的 Activity。要将 an`Activity`用作对话框，您需要在 中定义它`AndroidManifest.xml`：

`<activity android:theme="@android:style/Theme.Dialog" />`

**编辑评论**

1.  如果您使用了我的建议（我们为我们的目的将其命名为`Activity`UI ），您不必这样做，因为您可以在.`Dialog``DialogActivity``onActivityResult``DialogActivity`
2.  如果您没有使用我的建议或使用了它但需要将拍摄的图像传递给另`Activity`一种方式。要将相机应用程序拍摄的图像从一个`Activity`传递到另一个，我相信最有效的方法是将`Intent`作为`String`该图像的路径传入并访问第二个路径`Activity`。像这样的东西：

在第一个`Activity`（调用者`Activity`）中，我们称它为 A：

```
Intent i = new Intent(A.this, B.class);
i.putExtra("path", path); //The path is a String variable holding the path where the image was saved.
startActivity(i); 
```

在第二个`Activity`（`Activity`被调用）中，我们称它为 B：

```
String image_path = getIntent().getExtras().getString("path");
Bitmap bitmap = BitmapFactory.decodeFile(image_path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:01:50.163

我想你再次显示你的对话框。

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        super.onActivityResult(requestCode, resultCode, data);
        if( requestCode == CAMERA_PIC_REQUEST)
        {   
            Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
            ImageView image =(ImageView)findViewById(R.id.image_camera);
            image.setImageBitmap(thumbnail);
            **dialog.show();**

        }
    else 
    {
        Toast.makeText(this, "Picture NOt taken", Toast.LENGTH_LONG);            
    }

} 
```

# wxwidgets - 使用 wxList 时出现此错误

> ID：11431890
> 
> 赞同：1
> 
> 时间：2012-07-11T11:42:17.957
> 
> 标签：wxwidgets

构建项目时出现此错误

> D:/codelite_workspace/Easy_GO2/main_frame.cpp:48: 错误: 'wxMyListNode' 没有被声明

这是我的**main_frame.h**

```
#ifndef MAIN_FRAME_H
#define MAIN_FRAME_H

#include <panels.h>
#include <choose_tree.h>
#include "quicksearch.h"
#include "dealer_data2.h"
#include <wx/wxprec.h>
#include <wx/panel.h>
#include <wx/menu.h>
#include <wx/list.h>

class Main_Frame : public wxFrame{
public:
    Main_Frame(const wxString& title);

    Insert *insert_panel;
    All *view;
    quickSearch *q;
    Choose_Tree *choose;
    wxPanel *parent;
    wxBoxSizer *hbox;
    wxMenuBar *menubar;
    wxMenu *file;

    WX_DECLARE_LIST(Dealer_Data2, MyList);
    WX_DECLARE_HASH_MAP(wxString, MyList, wxStringHash, wxStringEqual, MyHash);

    MyHash h1;
    int currentPanel;

};

    const int INSERT_PANEL = 110;
    const int VIEW_PANEL = 111;
    const int QUICK_SEARCH = 112;

    const int CURRENT_INSERT = 1;
    const int CURRENT_ALL = 2;

#endif 
```

**main_frame.cpp**

```
#include "main_frame.h"
#include <wx/listimpl.cpp>

WX_DEFINE_LIST(MyList);

Main_Frame::Main_Frame(const wxString& title)
       : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(1600, 750))
{
    parent = new wxPanel(this, wxID_ANY);
    hbox = new wxBoxSizer(wxHORIZONTAL);

    //choose = new Choose_Tree(parent);
    insert_panel = new Insert(parent);
    view = new All(parent);

    insert_panel->dealer_id->Append(wxT("1- Test"));
    insert_panel->dealer_id->Append(wxT("2- wahba"));
    insert_panel->dealer_id->Append(wxT("3-  Ahmed"));
    insert_panel->dealer_id->Append(wxT("4- Mohamed"));

    currentPanel = CURRENT_INSERT;
    //hbox->Add(choose, 1, wxEXPAND | wxALL, 5);
    hbox->Add(insert_panel, 1, wxEXPAND | wxALL, 5);

    view->Hide();
    insert_panel->Show();

    parent->SetSizer(hbox);

    //GetSizer()->Layout();

    menubar = new wxMenuBar;
    file = new wxMenu;
    file->Append(INSERT_PANEL, wxT("&Insert"));
    file->Append(VIEW_PANEL, wxT("&All"));
    file->Append(QUICK_SEARCH, wxT("&Quick Search"));

    menubar->Append(file, wxT("&File"));
    SetMenuBar(menubar);

    this->Centre();

} 
```

有什么帮助吗？我会很感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:56:36.130

这里是如何使用 WX_DEFINE_LIST 的描述

[http://docs.wxwidgets.org/2.8/wx_wxlist.html](http://docs.wxwidgets.org/2.8/wx_wxlist.html)

你写

```
WX_DEFINE_LIST(MyList); 
```

但是您还没有在任何地方定义 MyList ！

# tridion - 多个用户共享一个帐户

> ID：11431895
> 
> 赞同：7
> 
> 时间：2012-07-11T11:42:34.147
> 
> 标签：tridion

Tridion 中是否有任何限制会阻止多个物理用户共享一个 Tridion 帐户进行登录？

例如，据我所知，如果两个用户同时登录，Tridion 不会结束另一个会话或注销用户。

我们的客户正在接近他们的许可限制，并且正在寻找多个用户共享一个帐户。从业务角度来看，他们将失去真正知道谁改变了什么的能力——但是没有工作流程。

这样做是否违反了 Tridion 许可？

干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T11:53:26.017

Tridion 是一个无状态应用程序，因此虽然有身份验证，但没有登录或注销的概念。如果帐户的不同用户尝试同时更改相同的项目，您可能会遇到问题（在使用单个帐户的培训课程中看到了这一点）。

是的，这将违反许可条件 - 通常这是在指定用户的基础上完成的，除非允许无限的用户（这可能意味着您无论如何都不需要这样做）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T11:51:09.023

你是对的，从软件的角度来看它可能会起作用。

但我认为我们可以猜出您的许可证问题的答案。毕竟，听起来他们正在考虑这样做是为了避免向 SDL 支付他们*实际*拥有的用户数量。我不是律师，但这听起来不是个好主意...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T11:52:19.723

AFAIK SDL Tridion 使用绑定到浏览器的会话，因此从这个角度来看，这些会话中有多少使用相同的用户帐户并不重要。也没有注销或结束会话的选项。

所以是的，多个用户可以使用同一个用户帐户，但他们会给自己带来风险。如果用户 A 签出一个项目并开始使用它，用户 B（使用与用户 A 相同的 SDL Tridion 帐户）也可以打开该项目，并且不会以只读模式获取它（就像您使用不同的帐户）。因此，项目的版本控制和锁定现在被绕过并变得无用。

最后，这确实违反了合同中规定的许可协议（除非合同中授予的用户数量不受限制）。

# facebook - 我可以使用我的网络应用程序从 facebook 用户那里加载私人照片吗？

> ID：11431898
> 
> 赞同：0
> 
> 时间：2012-07-11T11:42:49.017
> 
> 标签：facebook, facebook-access-token

我有一个网站并使用 facebook 登录。我想做以下事情：

用户访问我的网站 - 使用 facebook 登录 - 我阅读了他的 facebook 数据和摄影许可

例如：

```
{
    "id": "1"
    "name": "John English"
    "first_name": "John",
    "last_name": "English"
    "link": "https://www.facebook.com/johnenglish"
    "username": "johnenglish"
    "gender": "male"
    "locale": "en_US"
     ....
} 
```

和

```
{
    "id": "2"
    "name": "John English2"
    "first_name": "John",
    "last_name": "English2"
    "link": "https://www.facebook.com/johnenglish2"
    "username": "johnenglish2"
    "gender": "male"
    "locale": "en_US"
     ....
} 
```

两个用户都有一张私人照片。我可以使用 javascript 使用我的 Web 应用程序从用户 (id: 2) 加载私人照片吗？你能给我举个例子吗？

我试过这个：

```
FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;

                    FB.api('/USER-ID(USER ID 2)/photos?access_token=' + accessToken, function(response) {

            //A user access token is required to request this resource.

                    });

                } else if (response.status === 'not_authorized') {

                } else {
                }
            }); 
```

错误：请求此资源需要用户访问令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:50:19.797

您在获得访问令牌时是否请求了正确的权限？我不知道如何在 JS 中做到这一点，但你必须告诉 facebook，你希望你可以访问这些照片。由于我不使用 JS，因此我通过 URL 请求我的访问令牌（请参阅此处的第 1 点：[https](https://developers.facebook.com/docs/authentication/devices/) ://developers.facebook.com/docs/authentication/devices/ ）。在参数“范围”中，您可以添加您想要拥有的权限（[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)）。在这里，您将“&scope=user_photos”（不带引号）添加到 URL。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T12:25:43.027

好的，现在我明白你的问题了。

我假设您已经找到了用户 2 的 ID。很抱歉，我仍然无法向您展示如何在 JS 中执行此操作。虽然，它可能会有所帮助。

起初，我忘记了一个权限，您也需要`friends_photos`在范围内。

您现在致电：[http](http://graph.facebook.com/FRIEND_ID/albums/?access_token=ACCESS_TOKEN) ://graph.facebook.com/FRIEND_ID/albums/?access_token=ACCESS_TOKEN 。

把它输入你的浏览器，这样你就明白我的意思了：你解析那个输出并找到你朋友的专辑的 ID。

您可以通过以下方式访问该专辑：[http](http://graph.facebook.com/ALBUM_ID?access_token=ACCESS_TOKEN) ://graph.facebook.com/ALBUM_ID?access_token=ACCESS_TOKEN 。

`cover_photo`您将在输出中找到一个名为的条目。

致电：[http](http://graph.facebook.com/COVER_PHOTO_ID?access_token=ACCESS_TOKEN) ://graph.facebook.com/COVER_PHOTO_ID?access_token=ACCESS_TOKEN即可访问该照片。

您现在可以通过[http://graph.facebook.com/COVER_PHOTO_ID/picture?access_token=ACCESS_TOKEN](http://graph.facebook.com/COVER_PHOTO_ID/picture?access_token=ACCESS_TOKEN)下载它。

使用`paging`->中给出的 URL`next`转到以下照片。记住一张图片，按照这些步骤进行操作要容易得多，请[在此处](https://developers.facebook.com/tools/explorer)考虑。

# php - 如何在 mysql_query 返回的数组中查找一些值

> ID：11431903
> 
> 赞同：1
> 
> 时间：2012-07-11T11:43:12.840
> 
> 标签：php, mysql

我的网站上有投票系统，我想检查用户是否赞成、反对。减少数量。我选择的查询的完整表包含 id 等于来自投票表的用户 id 投票表的模式![投票表](../Images/d7ae6924b09263e8c7cd6012e4066bb0.png) 是答案表的表模式是![答案表](../Images/e8ce8e9d454688260a85323801b532f8.png)

```
$query=SELECT answer_id,user_id,vote FROM vote WHERE user_id='{$_SESSION["id"]}'
$result1=mysql_query($query);
$array=mysql_fetch_array($result1); 
```

现在，当我获取问题的答案时，我想检查这个用户是否已经投票，如果 answer_id 在这个数组中找到，而不是我想找到投票的值？

代码是

```
$query1="SELECT * FROM answers WHERE question_id='{$question_id}'";//$question_id is id of question
$result=mysql_query($query1);
if($result){
    While ($row=mysql_fetch_arrar($result)){
        if(in_array($row["id"],$array){
            echo $array["vote"];
        }
    }
} 
```

我很困惑如何同时获取两个数组...？此查询仅适用于第一个值，因为我没有在 $array 中使用 while 循环，有人可以帮我..吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:04:41.547

这可以在一个查询中完成，以确定用户是否为答案投票。无需初步查询即可获得用户投票，也无需在 fetch 循环内进行数组比较。

`LEFT JOIN`对子查询使用 a`votes`并在其`WHERE`子句中提供用户 ID。如果 的值为`uservotes.vote`NULL，则用户*没有*投票给这个答案。否则，`uservotes.vote`将包含用户的投票。

```
SELECT
  answers.*,
  uservotes.vote
FROM 
  answers 
  LEFT JOIN (
    SELECT answer_id, vote FROM votes WHERE user_id = '{$_SESSION["id"]}'
  ) uservotes ON answers.id = uservotes.answer_id
WHERE answers.question_id = {$question_id} 
```

# c# - MVVM Light：如何从用户控件获取数据？

> ID：11431905
> 
> 赞同：0
> 
> 时间：2012-07-11T11:43:20.453
> 
> 标签：c#, silverlight, xaml, mvvm, mvvm-light

我有一个包含 MyMetaData 和 MyData 的类 MyDataCollection。在我的应用程序中，我有两个向用户显示输入字段的用户控件。一个用于 MyMetaData，另一个用于 MyData。两个用户控件都包含在 MainPage 中。

我的问题是：我应该如何从用户控件获取数据，然后用户单击保存按钮（位于主页上）？

**更新** 我已将我的代码相应地更改为blindmeis post，但现在未显示MetaDataView：

```
<UserControl.Resources>
    <DataTemplate x:Key="MetaDataTemplate">
        <view:MetaDataView/>
    </DataTemplate>
</UserControl.Resources>

<Grid>
    <ContentPresenter Content="{Binding MetaDataTemplate}"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:54:26.277

为什么不以简单的方式做 mvvm？（首先是视图模型）。你说你有一个主页——这意味着你也有一个主页视图模型。您的 mainpageviewmodel 至少处理保存命令。现在你想在你的主页上显示 MyMetaData 和 MyData。所以最简单的方法是在主视图模型中创建一个 MyMetaData 实例和一个 MyData 实例。

```
public class MainPageViewmodel
{
    public ICommand SaveCommand { get; set; }
    public MyDataViewmodel MyData { get; set; }
    public MyMetaDataViewmodel MyMetaData { get; set; }

    public MainPageViewmodel()
    {
        this.MyData = new MyDataViewmodel();
        this.MyMetaData = new MyMetaDataViewmodel();
    }

}

public class MyDataViewmodel
{}

public class MyMetaDataViewmodel
{} 
```

您的主页只需要 2 个数据模板和 2 个内容演示器。

//资源

```
 <DataTemplate DataType="{x:Type Local:MyDataViewmodel}">
        <view:MyDataUserControl/>
    </DataTemplate>
    <DataTemplate DataType="{x:Type Local:MyMetaDataViewmodel}">
        <view:MyMetaDataUserControl/>
    </DataTemplate>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <ContentPresenter Content="{Binding MyData}" Grid.Column="0"/>
    <ContentPresenter Content="{Binding MyMetaData}" Grid.Column="1"/>
    <Button Content="Save" Command="{Binding SaveCommand}" Grid.Column="2"/>
</Grid> 
```

因为您的 mainpageviewmodel 具有两个“子”视图模型，所以您在 savecommand 上拥有所需的所有信息。

如果您有其他情况，请更新您的问题，也许发布一些代码。

编辑：我没有silverlight，所以只是一个建议：也许雷切尔可以给你一个更好的答案。

```
<Grid>
  <ContentPresenter Content="{Binding MyMetaData}" ContentTemplate="{StaticResource MetaDataTemplate}"/>
</Grid> 
```

如果 silverlight 无法处理数据类型的数据模板，您可以直接将用户控件放在那里。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <view:MyDataUserControl DataContext="{Binding MyData}" Grid.Column="0"/>
    <view:MyMetaDataUserControl DataContext="{Binding MyMetaData}" Grid.Column="1"/>
    <Button Content="Save" Command="{Binding SaveCommand}" Grid.Column="2"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T13:08:43.453

由于您将此问题标记为`MVVM`，因此您的 ViewModel 应该包含`SaveCommand`执行实际保存所需的数据和所有数据

您`MainViewModel`应该包含`MyMetaData`和`MyData`属性（绑定到它们各自的`UserControls`），并且这些对象中的每一个都应该包含`UserControl`. 例如，如果你`UserControl`有一个`TextBox`for `Name`，那么你的数据对象应该有一个绑定到`Name`的属性。`TextBox`

如果 Save 按钮位于其中之一，`UserControls`则相应的 ViewModel 应该有一个在单击`SaveCommand`时执行的`Button`。所需的所有数据`Save`也都位于该 ViewModel 中，因此您可以开始了。

如果您`MainViewModel`负责保存数据，那么它应该能够连接到您的子 ViewModel`SaveCommand`并附加它自己的方法，例如

```
this.MyData.SaveCommand = this.SaveCommand(); 
```

保存所需的所有数据都可以在`this.MyData`

如果`SaveButton`位于您的 中`MainView`，而不是其中一个 UserControl 中，则 SaveCommand 应该是 的一部分`MainViewModel`，并且保存所需的所有数据都可以在`this.MyData`或中找到`This.MyMetaData`。

请记住，使用 MVVM，您的 ViewModel 就是您的应用程序。View 只是一个漂亮的界面，它允许用户与您的 ViewModel 进行交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:46:07.750

您应该使用双向绑定来自动更新控制器中的值。看看[这篇文章](http://msdn.microsoft.com/en-us/library/cc278072%28v=vs.95%29.aspx)。

这是一个例子：

```
<TextBox Text="{Binding MyMetaData, Mode=TwoWay }" />
<TextBox Text="{Binding MyData, Mode=TwoWay }" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T12:16:40.607

我会给你一个小例子，你可以如何使用 MVVM Light Messenger 进行 ViewModel 到 ViewModel 的通信。假设您有一个 MyDataCollection 类：

```
public class MyDataCollection
{
    public int MyData;
    public string MyMetaData;
} 
```

在您的 MainViewModel 上，您有一个由 View 的 SaveButton 绑定的 RelayCommand（来自 MVVM light toolkit）。执行 Connad 时，您必须发送带有回调操作的 Message 以从订阅者请求数据。回调将 MyDataCollection 作为参数：

```
public class MainViewModel : ViewModelBase 
{
    public RelayCommand SaveCommand { get; private set; }

    //Ctor
    public MainViewModel()
    {
      SaveCommand = new RelayCommand(
                () =>
                Messenger.Default.Send<NotificationMessageAction<MyDataCollection>>(
                    new NotificationMessageAction<MyDataCollection>("SaveData", SaveCallback)));
    }

    private void SaveCallback(MyDataCollection dataCollection)
    {
        // process your dataCollection... 
    }
} 
```

UserControlViewModel 具有与 InputTextBoxes 绑定的属性。它只需要注册到消息并使用数据属性调用回调：

```
public class UserControlViewModel : ViewModelBase
{
    //Properties
    public string UserControlMetaData { get; set; }
    public int UserControlData { get; set; }

    //Ctor
    public UserControlViewModel()
    {
        Messenger.Default.Register<NotificationMessageAction<MyDataCollection>>(this, MessageReceived);
    }

    // private Method to handle all kinds of messages.
    private void MessageReceived(MessageBase msg)
    {
        if(msg is NotificationMessageAction<MyDataCollection>)
        {
            var actionMsg = msg as NotificationMessageAction<MyDataCollection>;
            if(actionMsg.Notification == "SaveData")  // Is this the Message, we are looking for?
            {
                // here the MainViewModels callback is called.
                actionMsg.Execute(new MyDataCollection() {MyData = UserControlData, MyMetaData = UserControlMetaData});
            }
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T12:17:19.710

您将不得不使用信使，否则您必须在 ViewModelLocator 上设置属性

我如何使用它来设置 UI 语言 ViewModel A 的 Messenger 示例，我在此处使用“SetLanguage”令牌注册了一个侦听器：

```
Messenger.Default.Register<string>(this, "SetLanguage", false, input =>
{
    SetLanguage(input);
}); 
```

ViewModel B，我在这里发送带有“SetLanguage”令牌的消息：

```
Messenger.Default.Send("en-EN", "SetLanguage"); 
```

* * *

ViewModel A 中的 ViewModelLocator 示例，我通过定位器访问 ViewModel B 中的数据：

```
short value = 12;
var myFilteredDataList = ViewModelLocator.ViewModelBStatic.MyDataList.Any(m => m.code == value); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T14:09:09.223

我现在有两个解决方案：

看法：

```
<ContentPresenter Content="{Binding MyMetaDataView}" /> 
```

视图模型：

```
public MetaDataViewModel MyMetaDataViewModel { get; set; }
public MetaDataView MyMetaDataView { get; set; }

public MainViewModel()
{
    MyMetaDataViewModel = new MetaDataViewModel();
    MyMetaDataView = new MetaDataView();

    MyMetaDataView.DataContext = MyMetaDataViewModel;
} 
```

或者 - -

看法：

```
<UserControl.Resources>
    <DataTemplate  x:Key="MetaDataViewTemplate">
        <view:MetaDataView />
    </DataTemplate>
</UserControl.Resources>
...
<ContentPresenter Content="{Binding MyMetaDataViewModel}" ContentTemplate="{StaticResource MetaDataViewTemplate}"/> 
```

视图模型：

```
public MetaDataViewModel MyMetaDataViewModel { get; set; }

public MainViewModel()
{
    MyMetaDataViewModel = new MetaDataViewModel();
} 
```

# arrays - 在函数内部定义 wxArray

> ID：11431907
> 
> 赞同：0
> 
> 时间：2012-07-11T11:43:25.330
> 
> 标签：arrays

我正在尝试使用 wxarray。当我在函数中添加以下宏时，我得到了显示的错误。我只是一个新手。在函数中使用这个宏的正确方法是什么

`WX_DEFINE_ARRAY_DOUBLE(double,lin);`

错误：

```
error: non-local function 'rfc(double*, double*, wxBitmap, double)::lin::reverse_iterator operator+(int, const rfc(double*, double*, wxBitmap, double)::lin::reverse_iterator&)' uses local type 'const rfc(double*, double*, wxBitmap, double)::lin::reverse_iterator'

error: can't define friend function 'operator+' in a local class definition 
```

# java - Java 中的前置和后置增量

> ID：11431914
> 
> 赞同：11
> 
> 时间：2012-07-11T11:43:54.460
> 
> 标签：java

我只是想创建一个小的 Java-Puzzle，但我自己也很困惑。难题的一部分是：

下面这段代码是做什么的：

```
public class test {
    public static void main(String[] args) {
        int i = 1;
        i += ++i + i++ + ++i;

        System.out.println("i = " + i);
    }
} 
```

它输出`9`.

**我的（至少部分）错误的解释**：

我不太确定，但我认为 after 的术语`i +=`是这样评估的：

![在此处输入图像描述](../Images/d99e28a909a52accebd44b6c89e12536.png)

所以

```
int i = 1;
i += ++i + i++ + ++i; 
```

是相同的

```
int i = 1;
i += ((++i) + (i++)) + (++i); 
```

这从左到右进行评估（请参阅[Pre and postincrement java evaluation](https://stackoverflow.com/q/4203418/562769)）。

第一个`++i`增量`i`为`2`并返回`2`。所以你有了：

```
i = 2;
i += (2 + (i++)) + (++i); 
```

`i++`返回，因为它是的`2`新值`i`，并递增`i`到`3`：

```
i = 3;
i += (2 + 2) + ++i; 
```

第二个`++i`增量`i`为`4`并返回`4`：

```
i = 4;
i += (2 + 2) + 4; 
```

所以你最终得到`12`，不是`9`。

**我的解释中的错误在哪里？什么是正确的解释？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T11:51:31.050

`i += ++i + i++ + ++i;`是相同的`i = i + ++i + i++ + ++i;`

右手边是从左到右计算的，产生`i = 1 + 2 + 2 + 4;`（产生`i = 9`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T11:49:07.683

关于正确的部分评估，您是对的，但是您缺少有关作业的详细信息。

运行这个：

```
i = i++; 
```

或这个 ：

```
i += i++; 
```

两次操作后， i 仍然具有其原始值。

那是因为 i 在分配的右侧之前在左侧进行评估。

因此，在您的情况下，您将 8 添加到 1，而不是 4。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T11:49:17.573

输出为**9**（[试试看](http://ideone.com/gtkPn)）

```
int i = 1;
i += ++i + i++ + ++i; 
```

变成

```
i = 1 + 2 + 2 + 4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T11:55:31.273

如果您想象一下java如何将值存储在寄存器中，那么很容易理解它是如何工作的！他将 1 放入第一个寄存器，然后通过 = 符号，并增加 i(++i)，所以现在在 i 中你有 2，在第二个寄存器中你有 2，但第一个寄存器没有更新，在第三个寄存器中，您将拥有 2，然后 i 递增，然后 i 递增，在最后一个寄存器中，您将拥有 4。所以您将拥有类似 1 = 2 + 2 + 4 == 9 的内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T12:01:47.240

编码

```
int i = 1;
i += ++i + i++ + ++i 
```

相当于

```
int tmp1 = i // 1, +=

i ++; // 2
int tmp2 = i; // 2

int tmp3 = i; // 2
i ++; // 3

i ++; // 4
int tmp4 = i; // 4

i = tmp1 + tmp2 + tmp3 + tmp4; // 9 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T12:03:44.620

`i += ++i + i++ + ++i`;

1.  `i=1`一开始
2.  `i += X`-> `i = i + X` -> `i = 1 + X` （所以让我们数 X）
3.  `++i`将增加到 2 和`return 2`
4.  `i++`will`return 2`然后递增到 3
5.  `++i`将从 3 增加到 4 并且`return 4`
6.  `X = 2 + 2 + 4 = 8`

所以`i = 1 + 8`->`i=9`

* * *

如果你的代码是这样的，你会得到 12

```
int i = 1;
int tmp = ++i + i++ + ++i;  
i += tmp; 
```

因为那时您的代码将是`i=1`，并且在计算 tmp i 之后`i=4`，然后`i+=tmp`->`i=4+8=12`

# clojure - 这个clojure prime seq有什么问题？

> ID：11431919
> 
> 赞同：2
> 
> 时间：2012-07-11T11:44:17.563
> 
> 标签：clojure, lazy-sequences

我不明白为什么这个惰性素数序列的定义会导致不终止。我得到的堆栈跟踪不是很有帮助（我对 clojure 的一个抱怨是钝的堆栈跟踪）。

```
(declare naturals is-prime? primes)

(defn naturals
  ([] (naturals 1))
  ([n] (lazy-seq (cons n (naturals (inc n))))))

(defn is-prime? [n]
  (not-any? #(zero? (rem n %))
                (take-while #(> n (* % %)) (primes))))

(defn primes
  ([] (lazy-seq (cons 2 (primes 3))))
  ([n] (let [m (first (filter is-prime? (naturals n)))]
         (lazy-seq (cons m (primes (+ 2 m)))))))

(take 10 (primes)) ; this results in a stack overflow error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:03:57.103

问题是要知道计算“素数”函数您正在使用“是素数吗？” 函数，然后计算“是素数？” 您正在使用“（素数）”的函数，因此堆栈溢出。

所以要计算“(primes 3)”，你需要计算“(first (filter is-prime?(naturals 3)))”，它会调用“(is-prime?1)”，即调用“（素数）”，而后者又调用“（素数 3）”。换句话说，你正在做：

```
user=> (declare a b)
#'user/b
user=> (defn a [] (b))
#'user/a
user=> (defn b [] (a))
#'user/b
user=> (a)
StackOverflowError   user/b (NO_SOURCE_FILE:1) 
```

要了解如何生成素数：[Clojure 中的快速素数生成](https://stackoverflow.com/questions/960980/fast-prime-number-generation-in-clojure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:04:07.550

让我们开始执行`primes`，我们会神奇地实现一个`seq`，只是为了清楚。我会忽略`naturals`，因为它是正确的懒惰：

```
 > (magically-realise-seq (primes))
=> (magically-realise-seq (lazy-seq (cons 2 (primes 3))))
=> (cons 2 (primes 3))
=> (cons 2 (let [m (first (filter is-prime? (naturals 3)))]
             (lazy-seq (cons m (primes (+ 2 3))))))
=> (cons 2 (let [m (first (filter
                            (fn [n]
                              (not-any? #(zero? (rem n %))
                                            (take-while #(> n (* % %)) (primes))))) 
                            (naturals 3)))]
             (lazy-seq (cons m (primes (+ 2 3)))))) 
```

我在最后替换`is-prime?`为 a `fn`——你可以看到它`primes`会再次被调用，并且至少实现一次作为`take-while`拉出元素。这将导致循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:15:32.823

我认为问题在于，您在 (primes) 已经构建之前尝试使用它。

像这样改变`is-prime?`可以解决问题：

```
(defn is-prime? [n]
     (not-any? #(zero? (rem n %))
               (take-while #(>= n (* % %)) (next (naturals))))) 
```

（请注意，我已更改`>`为`>=`，否则它给出了 4 是素数。它仍然说 1 是素数，这是不正确的，如果您`is-prime?`在其他地方使用可能会导致问题。

# variables - C++ 在本机代码中声明托管类型

> ID：11431921
> 
> 赞同：0
> 
> 时间：2012-07-11T11:44:18.280
> 
> 标签：variables, c++-cli, native, managed

我需要知道如何在本机代码中声明托管类型？

喜欢：我有一个`class Editor`参考`Editor.h`

在本机代码（main.cpp）中：

```
Editor^ MainEditor; 
```

但它给了我以下信息：

```
MainEditor' : global or static variable may not have managed type 'Cube3D::Editor ^' 
```

我试图把它放在一个容器里，但我仍然需要声明它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:14:33.607

正如错误所述，您不能在全局或静态级别拥有托管类型。

您已经声明它可以在方法中使用它。要将其存储在本机类中，您需要使用 gcroot。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:33:19.130

你不能直接这样做。问题是托管对象将被垃圾收集器移动，而纯本机代码无法处理。

这是允许的：

*   必须编译托管类型的成员`/clr`才能生成托管代码。这可以使用通过托管和本机代码实现的托管和本机类型。
*   可以编译本机类型和命名空间的成员`/clr`以生成托管代码。这可以使用通过托管和本机代码实现的托管和本机类型。
*   本机类型和命名空间的成员可以在不`/clr`生成本机代码的情况下进行编译。这只能使用本机类型，但使用的类型可以由托管代码或本机代码实现。
*   甚至可以在本机代码中实现本机类型的某些成员，而在托管代码中实现相同类型的其他成员。

因此，您需要在本机代码和托管类型之间设置一个层，该中间层将是使用托管代码实现的本机类型。

当然，`#pragma managed`可以与 , 互换使用`/clr`，以获得更好的控制。

# java - 在没有 build.xml 的情况下运行 junit ant-task

> ID：11431924
> 
> 赞同：0
> 
> 时间：2012-07-11T11:44:21.963
> 
> 标签：java, deployment, ant, jar, junit

我正在尝试弄清楚如何在实际上不需要 build.xml 的情况下运行 ant 任务。特别是我想`JUnit`用格式化程序运行任务。在 xml 格式中，如下所示：

```
<junit printsummary="true" errorProperty="test.failed" failureProperty="test.failed">
    <classpath refid="run.class.path" />

    <!-- console log -->
    <formatter type="xml" classname="be.x.SFFormatter" />

    <test name="be.x.SF" outfile="result" todir="${build.output.dir}" />
</junit> 
```

它在运行 ant 脚本时有效，但我想让我的应用程序作为可运行的 jar 运行。从 Java 运行测试很容易：

```
 JUnitCore junit = new JUnitCore();
    testResult = junit.run(SeleniumFramework.class); 
```

但是，我很难弄清楚如何让格式化程序真正工作。格式化程序是类型的`org.apache.tools.ant.taskdefs.optional.junit.JUnitResultFormatter`，所以我怀疑我是否可以在不运行 ant 的情况下将其插入某个地方。

有没有人做过类似的事情？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:54:31.173

蚂蚁不会做任何魔法。它所做的只是读取 XML 文件，创建其中指定的 bean，然后按照 Task API ( `org.apache.tools.ant.Task`) 执行方法。

所以你需要做的就是在你的代码中做同样的事情。不要忘记创建一个`Project`:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:27:10.780

您可以通过 Groovy 使用 Ant 来避免使用 xml 语法。
有关详细信息，请参阅 =>[从 Groovy 使用 Ant](http://groovy.codehaus.org/Using+Ant+from+Groovy)。

# authentication - 是否可以在 box-api 身份验证中选择语言环境？

> ID：11431925
> 
> 赞同：0
> 
> 时间：2012-07-11T11:44:23.353
> 
> 标签：authentication, box-api

通过 API 将用户重定向到身份验证页面时，我可以显式选择一种语言吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:53:09.310

身份验证页面将检测用户来自哪个地区，并在我们支持该地区的语言时进行适当的本地化。目前没有办法强制这种方式出现，除了欺骗用户来自的位置。

# php - 用 Yii-bootstrap 理解 htmlOptions

> ID：11431927
> 
> 赞同：1
> 
> 时间：2012-07-11T11:44:24.617
> 
> 标签：php, css, yii, twitter-bootstrap

我正在使用 Yii-bootstrap 小部件来创建我的网站。

[Yii 框架：引导扩展](http://www.yiiframework.com/extension/bootstrap/)

[Yii Bootstrap 演示](http://www.cniska.net/yii-bootstrap/)

我试图理解`htmlOptions`, 可用于覆盖小部件的默认外观。从我读到的内容，我了解到`htmloptions`不能随机给出，应该根据小部件的类型作为数组或分层数据给出，但是当我尝试实现相同时，它无法正常工作。

例如，我正在尝试为“Hero-unit”容器自定义“标题字体大小”和“背景颜色”。为此，我修改了“css”文件以添加一个名为“hero-unit1”的样式类（默认样式类是“hero-unit”）。我保留了其余的东西。

在代码中，我按如下方式实现了小部件：

```
 <?php $this->beginWidget('bootstrap.widgets.BootHero', array(
            'heading' => "Test Header !!",
            'htmlOptions' => array('class' => 'hero-unit1'),
        )); ?>

           <p>Test content. Try it now.</p>
           <p><?php $this->widget('bootstrap.widgets.BootButton', array(
                'type'=>'primary',
                'size'=>'large',
                'label'=>'Action',
            )); ?>
           </p>
        <?php $this->endWidget(); ?> 
```

但是，当我看到为此生成的相应“html 代码”时，我看到以下内容：

```
<div class="hero-unit1 hero-unit"><h1> Test Header !!</h1> 
   <p>Test content. Try it now.</p>
   <p><a class="btn btn-primary btn-large">Action</a></p>
</div> 
```

正如我所见，罪魁祸首是**class="hero-unit1 hero-unit"**部分，即类没有正确设置。我认为应该通过提供 htmlOptions 来覆盖它，但它没有发生。任何指针肯定会有所帮助.....谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:48:12.003

这取决于开发人员如何创建小部件的 htmlOptions，在 Bootstrap 小部件上有一些默认类，因为它们的外观和功能取决于它们：CSS 类、Javascript 选择器等。

因此，您不应该删除它，如果您想做其他事情，请结合使用您的班级和默认班级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:40:02.593

正如 Skatox 提到的，Bootstrap 小部件似乎应用了一些默认类。我会坚持使用您的代码，然后修改您的 CSS 以使用表单的选择器（注意类之间没有空格）：

```
.hero-unit1.hero-unit{
    //css code here
} 
```

或者，如果您有两个 CSS 项目（听起来就是这样），例如：

```
.hero-unit{
    //css code here
    color: yellow;
}
.hero-unit1{
    //more css code here
    color: red;
} 
```

这两个都应该适用于具有多个类的项目。如果有重叠的元素，最后加载的那个是优先的 - 即在上面的示例中，颜色将是红色，而不是黄色。

根据您修改的 CSS 文件，它可能会在 Bootstrap CSS 之前加载，这就是我建议使用多类选择器的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T12:19:34.980

这对于 OP 来说可能有点晚了，但我会在这里为其他可能想知道 Yii-Bootstrap 设置的默认类的人发帖。

Yii-Bootstrap 总是设置一些默认类，因为 bootstrap 本身需要它们。这样我们就可以确保它们总是被应用。

您应该在自己的样式表中覆盖它们，而不是删除默认类。

我希望这能解决问题。

# email - iTunes连接中的无效二进制文件

> ID：11431929
> 
> 赞同：1
> 
> 时间：2012-07-11T11:44:33.403
> 
> 标签：email, binary, app-store-connect

当我将应用程序上传到 iTunes 连接时，我看到无效的二进制文件和电子邮件：

> 我们发现您最近交付的“appname”存在一个或多个问题。要处理您的交付，必须更正以下问题：
> 
> 无效的代码签名权利 - 您的应用程序包的签名包含不受支持的代码签名权利。请检查您的 Xcode 项目的代码签名权利配置，并删除任何不需要的权利。
> 
> 具体来说，不支持键“com.apple.developer.pass-type-identifiers”。
> 
> 更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续完成提交过程，直到应用状态为“等待上传”。然后，您可以提供更正后的二进制文件。
> 
> 问候，
> 
> 应用商店团队

我该怎么做才能使其正常化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:44:04.523

通行证直到 iOS 6 才可用。这是你应该做的：

1.  转到 iOS 配置门户。
2.  在左侧单击应用程序 ID。
3.  单击配置“appname”并取消选中“Enable Passes”复选标记。
4.  在左侧单击 Provisioning，然后单击 Distribution 选项卡。
5.  单击与“appname”关联的分发配置文件的“编辑”，然后重新选择您的应用并保存。
6.  在 XCode 中删除旧的分发配置文件并下载这个新的配置文件。

提交应用程序改变了人......它改变了......

# unique - 为每个用户个人资料创建唯一网址的最佳做法是什么

> ID：11431930
> 
> 赞同：6
> 
> 时间：2012-07-11T11:44:41.527
> 
> 标签：unique, user-profile

在我的每个应用程序中，我想为用户个人资料创建一个唯一的 url，如[http://app.com/username](http://app.com/username)。

我的用户名是：'Vijay Kumbhar' 我可以创建[http://app.com/vijay_kumbhar](http://app.com/vijay_kumbhar)，但是如果有另一个用户使用相同的名称注册，那么为该用户创建 url 的更好方法是什么。一种方法是添加 vijay_kumbhar_1，但我认为这不是创建唯一 url 的正确方法

您能否建议我这样做的更好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:11:39.880

考虑到用户体验，首先为用户提供唯一的id，通过它可以轻松识别用户。之后，您可以允许用户选择任何新的用户名（屏幕名称），但应该再次检查用户名是否必须再次唯一。取决于你的要求。请随时向我们发布您最终选择的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T12:08:30.503

您可以使用与 stackoverflow 相同的方法

stackoverflow.com/users/唯一编号/用户名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:51:39.143

通常用户名必须是唯一的。如果您在 URL 中使用登录，那么它们的 url 将是唯一的。防止使用相同的登录名注册两个用户是很常见的事情。

编辑：如果您想保持用户名不显示（例如出于某些安全原因），您可以在用户登录的 URL 哈希中使用，而不是登录例如 app.com/mylogin > app.com/123123123

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:50:18.530

您最有可能将注册用户保存在某种数据库中。在 SQL 中，每一行都有一个唯一的 ID 是很自然的。您可以使用这样的 ID 作为 url 的一部分，而不是为每个名称组合使用自己的编号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-17T06:02:21.307

**如果您有一个可公开访问的 URL，您肯定需要确保不在 URL 中显示实际的“用户名”。**

如果您使用 ID 号，请记住避免 Wordpress 所犯的错误 - 按顺序创建用户 ID，从默认管理员用户“1”开始。

这使得黑客很容易使用类似的东西进行查询

> example.com/profile?author=1

那会回来

> example.com/admiuser

并告诉他管理员的实际用户名......然后破解者开始试图暴力破解管理员用户名的密码。

并且永远不要将登录名显示给任何人或在用户或管理员以外的任何 URL 中！

# svn - 颠覆到 TFS 迁移

> ID：11431931
> 
> 赞同：4
> 
> 时间：2012-07-11T11:44:44.890
> 
> 标签：svn, tfs, tfs-migration

我正在尝试使用 TFS 集成平台将我的 SVN 存储库迁移到我的 Team Foundation Server 存储库。

首先，我浪费了很多时间来了解如何使用此工具在 TFS 中迁移 SVN，因为在新版本（2012 年 3 月）中，安装中没有 SVN 适配器。

所以我尝试下载已经有 SVN 适配器的 TFS 集成平台的 Beta 版本，问题是我在发现文件时遇到错误。

那么，有谁知道我在哪里获得带有稳定版本的 SVN 适配器的 TFS 集成平台版本？

并且不要只发布此链接[http://tfsintegration.codeplex.com](http://tfsintegration.codeplex.com)，我已经知道它存在。

谢谢 （：

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:45:09.470

您是否已经尝试过[svn2tfs](http://svn2tfs.codeplex.com/)？

> **它能做什么**
> 
> 将 SubVersion 1.6.x (SVN) 存储库迁移到 Team Foundation Server (TFS) 2010，重放 SubVersion 中发生的每个操作。

否则，您可能会查看[Timely Migration](http://www.timelymigration.com/)商业工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:03:33.027

及时迁移...非常值得投资。我已经将这个工具用于 Star Team 迁移，但它们包括 SVN，并且它们的支持非常棒。

[http://www.timelymigration.com/](http://www.timelymigration.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T10:49:30.853

我用过这个工具（免费）SVN2TFS：- [http://svn2tfs.codeplex.com/](http://svn2tfs.codeplex.com/)

现在我已经成功地将代码从 SVN 以及修订历史和文件夹结构迁移到 TFS2010 中。

# android - 如何在 Android 的 Froyo 及更高版本的 Froyo OS 中读取和写入日历事件

> ID：11431933
> 
> 赞同：-4
> 
> 时间：2012-07-11T11:44:55.907
> 
> 标签：android

我在语法上插入新事件或编辑事件时遇到一些问题。Android Foryo os 2.2 工作正常，但同样的事情没有在 ICS 中运行。我知道`ContentProvider`url 但错误出现在 Column 字段上。

请帮助我或发布您的代码或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:49:58.047

以下是编辑新事件的示例：

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("title", myStringTitle);
intent.putExtra("description", myStringDescription);
intent.putExtra("eventLocation",myStringLocation);
intent.putExtra("beginTime", myBeginDate.getTimeInMillis());
intent.putExtra("endTime", myEndDate.getTimeInMillis()); 
```

我希望这能帮到您。

# linux - 来自文件的 Grep 订单

> ID：11431934
> 
> 赞同：1
> 
> 时间：2012-07-11T11:44:57.380
> 
> 标签：linux, unix, grep

我有 2 个文件。
在第一个文件中，我有我想在第二个文件中找到的 teplates。
我必须如何在输出的第一个文件中使用 grep 来保存订单。
例子：

**file1:**
一个
dc
作为

**文件2 **：**
aadfadf
asdva
vaad
dccsads asas** 

 **我使用这个命令：
`grep -f file1 file2 >> file3`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T11:48:42.567

这会有点慢但很简单：

```
TEMP1=$(mktemp /tmp/grep.XXXXXXXXXXX)
TEMP2=$(mktemp /tmp/grep.XXXXXXXXXXX)
cat file2 > $TEMP1
cat file1 | while read line
do 
  grep "$line" $TEMP1
  grep -v "$line" $TEMP1 > $TEMP2
  mv $TEMP2 $TEMP1
done > result
rm $TEMP2 $TEMP1 
```

中的结果列表`result`。

我使用临时文件`$TEMP1`并避免结果重复`$TEMP2`。`grep -v`**

# django - Django添加与站点用户视图无关的管理设置

> ID：11431944
> 
> 赞同：0
> 
> 时间：2012-07-11T11:45:22.240
> 
> 标签：django, django-admin

我想向 Django 管理界面添加一些设置。特别是我希望设置允许管理员输入 POP3 邮件设置的字段。

例如

[ ] 启用邮件检查（复选框）

[ ***_* __ *_* __** ] 邮件服务器

[ ***_* __ *_* __** ] 用户名

[ ***_* __ *_* __** ] 密码

ETC

这些字段将始终存在，并且不依赖于前端用户输入的任何内容。

文档似乎只谈论 ModelAdmin，我认为这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:50:04.940

这听起来像是设置中的某些内容，您想从管理员那里进行编辑。[dbsettings](http://code.google.com/p/django-values/)是一个 django 项目，它允许您执行此操作。

由于`settings.py`只是简单的 Python 代码，因此您可以创建自己的自定义设置并从管理员处操作它们。如果您确实要创建自定义设置，请遵循一些[准则。](https://docs.djangoproject.com/en/dev/topics/settings/#creating-your-own-settings)

# c# - 十进制值的正则表达式

> ID：11431945
> 
> 赞同：2
> 
> 时间：2012-07-11T11:45:30.310
> 
> 标签：c#, regex

我想要一个用于十进制输入的正则表达式，它可以在小数点或逗号前取 4 位数字，在小数点/逗号后取 2 位数字。不带小数的 5 位数字无效。也可以接受null。

正确的值可以是：

> 1、1111、2222.56、0.99、9999.5

无效的

> 88888, 8.888,

验证显示还包括逗号和小数。

如果可能的话，还要解释表达式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T11:58:38.883

```
Regex.IsMatch(strInput, @"[\d]{1,4}([.,][\d]{1,2})?"); 
```

并解释：

```
[\d]{1,4}    any character of: digits (0-9) between 1 and 4 times

[.,]         any character of: '.', ','

[\d]{1,2}    any character of: digits (0-9) between 1 and 2 times

(...)?       match the expression or not (zero or one) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-18T21:12:09.993

```
^-?(0|[1-9]\d{0,3})([,\.]\d{1,2})?$ 
```

逗号前：

^ - 字符串的开头

-？- 可能有零个或一个负号

0 - 小数点的开头可能只有一个零...

| - 或者 ...

[1-9] - 从 1 到 9 的任意数字

\d{0,3} - 后跟任意 3 位数字

逗号后：

[,.] - 可能有“,”或“.”

\d{1,2} - 后跟 1 或 2 位数字

（……）？- 零次或一次

$ - 字符串的结尾

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:50:29.477

```
[0-9]{1,4}(\.[0-9]{1,2})? 
```

这意味着，1 到 4 位数字，然后可选地包含小数点和 1 到 2 位数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:52:42.067

使用这个正则表达式`\d{4}[,\.]\d{2}` 或`\d+([,\.]\d+)?`任何小数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-18T07:00:52.973

我们可以通过以下代码来检查Stirng值是否包含小数点

```
 Dim Success As Boolean
    If text.Contains(".") Then
        Dim result As Integer = Split(text, ".")(1)
        If result > 0 Then
            Success = True      'Containing Decimal Points greater than
        Else
            Success = False     'Containing "0" as Decimal Points 
        End If
    End If
    Return Success 
```

# html - 在主屏幕应用程序中禁用 iPad 上的滚动

> ID：11431948
> 
> 赞同：2
> 
> 时间：2012-07-11T11:45:39.587
> 
> 标签：html, ipad, safari

我想禁用 iPad HTML 页面中的滚动，但从主屏幕启动页面时它不起作用。

我在正常运行的 Safari 中禁用了滚动。但是，当我从主屏幕运行页面时，它会垂直滚动，并带有弹跳效果。我目前正在使用：

```
$(document).bind('touchmove', function(e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:17:27.797

您应该使用 touchstart 而不是 touchmove。这应该可以解决问题。这样做的原因是，在平移期间没有触发任何事件，因此触发 touchmove 事件为时已晚。

# c - printf("%-10s") 在系统语言环境中工作错误

> ID：11431950
> 
> 赞同：0
> 
> 时间：2012-07-11T11:45:51.010
> 
> 标签：c, utf-8, locale, printf

一旦我使用

```
setlocale(LC_ALL, ""); //use system locale 
```

printf 函数未正确对齐。如何在不同的语言环境中对齐字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:26:19.497

字段宽度不能用于现代多语言系统上的对齐。即使`printf`在对齐时可以计算字符而不是字节（注意：wide `printf`-family 函数可以做到这一点），这将无法适应组合字符（通常不使用水平空间）以及 CJK 宽字符（通常使用终端上的 2 列）。

我能想到的最好方法是首先将您的字符串转换为`wchar_t`字符串，然后用于`wcswidth`确定其在字符单元格列中的宽度。`%.*s`然后使用带有参数的字段说明符在字段之前或之后添加适当数量的空格`n`，`""`其中`n`是您要显示的空格数。

# hibernate - 如何在 HQL 中插入具有新值的新行（不从另一个对象复制）..？

> ID：11431955
> 
> 赞同：1
> 
> 时间：2012-07-11T11:46:15.160
> 
> 标签：hibernate, hql

我正在使用休眠。

而且我想使用 HQL 将具有新值的新行（不从另一个对象复制）持久地存储到我的数据库中。

我在用于插入新行的 struts 动作类中的代码是：

```
public String execute() throws Exception {
        Users u = null;
        try {
            Session session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            u = new Users();
            u.setAge(getAge());
            u.setCity(getCity());
            u.setEmail(getEmail());
            u.setName(getUsername());
            u.setPassword(getPassword());
            u.setSex(getSex());
            session.save(u);
            session.getTransaction().commit();
        } catch (Exception e) {
            this.addActionError("Oops. And Error Encountered...!");
        }
        return SUCCESS;
    } 
```

代码成功执行，没有任何错误。但它并没有永久存储在我的数据库中。我在数据库中看不到新行。可能是什么错误。？

或者，如果有任何其他方法可以使用 HQL 插入新行，请告知。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:54:51.160

您必须在最后通过调用关闭会话：

```
session.close(); 
```

最好在 finally 块中执行此操作：

```
finally {
  session.close();
} 
```

# java - 通过加密令牌进行 SSO

> ID：11431957
> 
> 赞同：0
> 
> 时间：2012-07-11T11:46:18.947
> 
> 标签：java, security, jakarta-ee, web-applications

我们需要在一个项目中为两个不同的 Web 应用程序实现单点登录，一个是我们自己的，一个是由其他人实现的。对于我们自己的应用程序，我们将用户/密码存储（加密）在数据库中。由于我们的应用程序将集成到他们的环境中，我们现在需要一种机制来让我们授权已经在他们身边登录的用户，而无需再次显示登录屏幕。

由于我自己不是安全专家，因此我开始（在高层次上）阅读有关 SSO 的一些技术，例如 OpenID、Kerberos、SAML、CAS - 但我还没有获得实践经验。

在朝着错误的方向前进之前 - 有人可以为我提供自己在该领域的经验，并指出我要使用的框架或一篇关于如何做到这一点的好（和最近的）文章吗？

另一个信息：客户谈到更喜欢在两个 web 应用程序之间传递加密令牌。这有意义吗？这会导致某种技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:27:03.810

为此，我们使用 SAML 实现 ( [https://svn.softwareborsen.dk/oiosaml.java/sp/trunk/docs/index.html](https://svn.softwareborsen.dk/oiosaml.java/sp/trunk/docs/index.html) ) - 它很容易集成到我们现有的 Web 应用程序中。

工作方案如下所示：您将有一个登录页面，SAML 框架将用户重定向到该页面。因此，在成功登录后，他获得了一个带有身份验证令牌的 cookie，并重定向回 Web 应用程序页面。您还将拥有一个识别 Web 服务，您可以调用它，传递提供的令牌，并能够从那里获取身份验证凭据（用户角色等），因此您的所有 Web 应用程序都可以将此用户识别为已登录。

# c++ - 从 zip 文件中提取文件夹

> ID：11431958
> 
> 赞同：-1
> 
> 时间：2012-07-11T11:46:19.630
> 
> 标签：c++, c, zip, extract

我有一个问题，我需要从 zip 中提取文件夹。我使用 C/C++。我在谷歌搜索但没有找到。我发现从 zip 中提取一个（或多个）文件，但我在 zip 文件中有文件夹，我需要提取它。怎么做的？

请帮助我，我阅读了有关 minizip 并找到了如何提取文件，但我不明白如何提取文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:47:51.477

试试 MiniZip [http://www.winimage.com/zLibDll/minizip.html](http://www.winimage.com/zLibDll/minizip.html)

然后使用unzGoToFirstFile和unzGoToNextFile你移动到zip里面的文件，使用unzGetCurrentFileInfo获取文件的路径，如果是你想要的文件夹，解压。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:35:42.353

你试过[zlib](http://www.zlib.net/)和[7zip](http://7-zip.org/sdk.html)吗？他们都提供SDK。

# asp.net - 如何在 ASP.Net WebAPI 中进行正确的路由

> ID：11431964
> 
> 赞同：1
> 
> 时间：2012-07-11T11:46:37.840
> 
> 标签：asp.net, asp.net-web-api, asp.net-routing

我正在使用 ASP.Net Web API 开发应用程序并配置应用程序路由，我正在遵循[这种](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)方法。但在我的应用程序中，我想要的网址如下。“http://localhost/MY/api/user/AllGridData/false/1342006446883/10/1/Id/desc”

我在浏览器窗口中手动输入了这个 url，AllGridData 方法被触发了。但是当我从应用程序访问它时，它会尝试访问如下所示的 url。“http://localhost/MY/api/user/AllGridData?_search=false&nd=1342006446883&rows=10&page=1&sidx=Id&sord=desc”

因此，由于以下异常，不会触发 AllGridData 方法。加载资源失败：服务器响应状态为 400（错误请求）“http://localhost/MY/api/user/AllGridData?_search=false&nd=1342006446883&rows=10&page=1&sidx=Id&sord=desc”

我在 RouterConfig.cs 中对这个 url 的路由是这样的。

```
routes.MapHttpRoute(
            name: "LoadGridApi",
            routeTemplate: "api/{controller}/{action}/{_search}/{nd}/{rows}/{page}/{sidx}/{sord}",
            defaults: new { _search = UrlParameter.Optional, nd = UrlParameter.Optional, rows = UrlParameter.Optional, page = UrlParameter.Optional, sidx = UrlParameter.Optional, sord = UrlParameter.Optional }
        ); 
```

希望你能理解问题。最终我想要的是获得如下所示的 URL，然后触发 AllGridData 方法。“http://localhost/MY/api/user/AllGridData/false/1342006446883/10/1/Id/desc”

我究竟做错了什么？是不是因为路由代码错误？

我的 AllGridData 方法在 WebAPI 控制器中，而不是在 MVC 控制器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:07:00.923

蒂洛克。我只是尝试了类似的东西，但路由更简单。

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}/{nd}",
                defaults: new {id = RouteParameter.Optional, nd = RouteParameter.Optional}
                ); 
```

并使用 jQuery getJson 调用来调用以下方法。

```
public IEnumerable<Organisation> Get(int id, int nd)
        {                        
            using (_unitOfWork)
            { 
```

我发现我可以使用以下所有 Url 拨打电话

/api/organisations/2/3、/api/organisations/2?nd = 3 和 /api/userorganisations/?id=2&nd=3

当直接从浏览器窗口调用它们时，这也有效。（铬合金）。

我注意到您的错误是您有一个额外的占位符用于操作 {action}。这不应该用于 WebApi 路由。这仅适用于 MVC 路由。WebApi 没有操作的概念，因为这一切都由 HttpVerbs 处理。

更多信息可以在这里找到

[WebApi 路由](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:55:12.280

您也可以在 WebApi 中很好地使用操作。如果你正在尝试构建 RESTful 的东西，你只是不需要它们。

例子：

```
public HttpResponseMessage OpenBill(long billId) 
```

从以下位置获取路线：

```
routes.MapHttpRoute(
 name: "DefaultApiWithActionAndId",
 routeTemplate: "api/{controller}/{action}/{id}",
 defaults: new { id = RouteParameter.Optional }
  ); 
```

此外，您不必为多个路由指定查询字符串。这就是 /api/organisations/2/3 有效而 /2?nd=3 有效的原因。

恕我直言，你应该尽量保持路线尽可能简单，否则如果某些东西停止工作并且你必须调试你的路线，你就会受到伤害。所以我会选择查询字符串版本。

为什么你得到的网址是我无法回答的查询字符串。这取决于谁在制作网址。这就是 GET 通常的完成方式。

# php - Symfony2 选择性 ESI 缓存

> ID：11431967
> 
> 赞同：1
> 
> 时间：2012-07-11T11:46:52.037
> 
> 标签：php, caching, symfony, varnish, esi

我正在使用[Liip Cache Control 包](https://github.com/liip/LiipCacheControlBundle)来处理我的项目中的缓存。通过使用这个包，你可以像这样配置缓存：

```
liip_cache_control:
    rules:
        - { path: /admin, controls: { private: true}, vary: [Accept-Encoding] }
        - { path: ^/_internal, controls: {private: true, max_age: 0}}
        - { path: ^/([^/]*)/live/time(.*), controls: { public: true, max_age: 1, s_maxage: 1    }, vary: [Accept-Encoding,Cookie] } 
```

现在每个 esi（内部）路由都没有被缓存。但我现在想要缓存一个内部请求。知道如何配置吗？我找不到实际用于执行此请求的路由。

亲切的问候，

大安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:12:50.557

所有 ESI 调用都通过 _internal 路由处理（[示例来自在 Symfony2 中使用 ESI](http://symfony.com/doc/current/book/http_cache.html#using-esi-in-symfony2)）：

```
# app/config/routing.yml
_internal:
    resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
    prefix:   /_internal 
```

[LiipCacheControlBundle](https://github.com/liip/LiipCacheControlBundle)的文档提到了如何生成内部路由：

> 使用 ESI 时，[...] 要生成相应的 _internal 路由，请将 http_kernel 注入控制器并使用 HttpKernel::generateInternalUri 和 twig 渲染标签中的参数。

您是否尝试将适当的规则添加到您的 liip_cache_control 列表中？我想它应该以“/_internal”开头（尝试使用 generateInternalUri 来查看实际生成的内容）。

# javascript - 如何更改按钮而不影响其他按钮？

> ID：11431969
> 
> 赞同：0
> 
> 时间：2012-07-11T11:46:55.380
> 
> 标签：javascript, jquery

我在下面有一个 if else 语句，它根据另一个按钮是打开还是关闭来打开和关闭按钮。这涉及 2 个按钮，“是”或“否”。

```
function btnclick(btn)
{
    var context = $(btn).parents('#optionAndAnswer');
    if (context.length == 0) {
        context = $(btn).parents('tr');
    }
    var $btn = $(btn);
    var id = btn.id;
    var $otherYNBtn = id === "answerYes" ? $("#answerNo") : $("#answerYes");

$(btn).toggleClass("answerBtnsOff");
$(btn).toggleClass("answerBtnsOn");

    if ($("#answerYes", context).hasClass('answerBtnsOn')) {
        $otherYNBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    else if ($("#answerNo", context).hasClass('answerBtnsOn')) {
        $otherYNBtn.removeClass('answerBtnsOn').addClass('answerBtnsOff');
    }

    return false;
} 
```

现在此代码适用于下面显示在顶部的这些按钮：

```
<table id="optionAndAnswer" class="optionAndAnswer">

...

<input class="answerBtns answers answerBtnsOff" name="answerYesName"   id="answerYes"   type="button"   value="Yes"     onclick="btnclick(this);"/>
<input class="answerBtns answers answerBtnsOff" name="answerNoName"    id="answerNo"        type="button"   value="No"      onclick="btnclick(this);"/> 
```

现在我的情况是，它显然只适用于上面的按钮，但是用户可以通过将这些按钮附加到新行中来将它们添加到新行中。将这些按钮附加到新行中的代码如下：

```
var $this;
$('#optionAndAnswer .answers').each(function() {
    $this = $(this);

    var $newBtn = $("<input class='answerBtnsRow answers' type='button' style='display:%s;' onclick='btnclick(this);' />".replace('%s',$this.is(':visible')?'inline-block':'none')).attr('name', $this.attr('name')).attr('value', $this.val()).attr('class', $this.attr('class')).attr('id', $this.attr('id')+'Row');

    $newBtn.appendTo($cell);

    i++;
}); 
```

上面的代码将顶部按钮的所有属性（名称、类、id）复制到一个新行中，唯一的区别是附加按钮的 id 在 id 的末尾包含字符串“Row”。

我的问题是，我想要做的是更改我的 if/else if 函数，以便它适用于所有 2 个按钮，无论它们是在顶部，还是在第 1 行或第 2 行等。

例如：

*   如果我在顶部控件上有“是”和“否”按钮，第 1 行有“是”和“否”按钮，第 2 行有“是”和“否”按钮，所有这些按钮都打开了“是”按钮。

*   如果我单击顶部控件中的“否”按钮，它应该打开“否”按钮并仅关闭顶部控件中的“是”按钮，它不应该对第 1 行或第 2 行有任何影响。

    *   如果我单击第 1 行中的“否”按钮，它应该打开“否”按钮并仅关闭第 1 行中的“是”按钮，它不应该对第 2 行或顶部控制有任何影响。

    *   如果我单击第 2 行中的“否”按钮，它应该打开“否”按钮并仅关闭第 2 行中的“是”按钮，它不应该对第 1 行或顶部控制有任何影响。

如何实现这一点，目前我的 if else 语句仅适用于顶部控件上的按钮（因为它的 id），但不适用于任何行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:07:35.220

您可以使用`context.find("input[value='NO']")`代替，`$("#answerNo")` 或者如果您希望它更国际化和 HTML5 方式，您可以尝试使用微数据属性`data-*`：

```
<input data-value="yes" class="answerBtns answers answerBtnsOff" 
type="button" value="Oui" onclick="btnclick(this);"/>

<input data-value="no" class="answerBtns answers answerBtnsOff" 
type="button" value="Non" onclick="btnclick(this);"/> 
```

在 jQuery 中，使用`context.find("input[data-value='no']")`

# php - 从数据库中搜索名称

> ID：11431976
> 
> 赞同：4
> 
> 时间：2012-07-11T11:47:17.517
> 
> 标签：php, mysql

我在 mysql 数据库表中有名称，例如`Mohan Krishna`. 我们如何使用 php 搜索该名称并搜索类似`mohankrishna`名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:53:49.230

```
SELECT * FROM tablename
WHERE LOWER(REPLACE(name,' ','')) LIKE LOWER('%mohankrishna%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:50:37.733

我不是 100% 确定，但可能是一个好方法。

一种方法是使用 MySQL 的全文功能。

`LIKE`就像在您的-query 中使用的另一种方式`SELECT`一样。

`SELECT * FROM users WHERE username LIKE "mohankrishna";`

但我对此并不熟悉，我不知道 MySQL 对给你准确记录的容忍度如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:51:13.143

```
select * from table where  where replace(name," ","") like '%mohankrishna%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T11:51:13.907

例如：`SELECT column_1 from prefix_my_table WHERE column_2 LIKE '%Mohan%';`

# servlets - 在tomcat中管理请求

> ID：11431979
> 
> 赞同：0
> 
> 时间：2012-07-11T11:47:36.990
> 
> 标签：servlets, servlet-filters

我想管理请求。正是我希望通过将某些请求传递给队列并接下来使用其他线程处理它来延迟某些请求的响应。我正在使用 servlet 的过滤器。在 doFilter 方法中，我不调用 filterChain 的 doFilter，尽管如此，还是会发送响应。在其他线程中，当我从队列中调用 filterChain 上的此方法时，我得到空值。

这两个问题有什么问题（不要立即发送响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:17:38.617

你不应该那样做。请求和响应对象范围仅在内部有效，`Servlet's service()`并且`Filter's doFilter()`作为容器调度的一部分调用的方法。

> ## Servlet 规范说......
> 
> 容器通常在对象上回收响应完成方法以避免响应对象创建的性能开销。开发人员必须意识到，`startAsync`在上述范围之外维护对未调用相应请求的响应对象的引用可能会导致不确定的行为。

**注意：**您应该**使用 Servlet 3.0 异步请求处理，通过它可以暂停和恢复请求**。

# javascript - 为什么 jQuery add() 方法似乎没有返回 jQuery 对象？

> ID：11431980
> 
> 赞同：2
> 
> 时间：2012-07-11T11:47:37.610
> 
> 标签：javascript, jquery

考虑您想为页面上的许多链接添加 ajax 功能。

```
<a href='http://domain/purchase/car' class='purchase'>Car</a>
<a href='http://domain/purchase/bag' class='purchase'>Bag</a>
<a href='http://domain/purchase/laptop' class='purchase'>Laptop</a> 
```

和

```
<a href='http://domain/sell/car' class='sell'>Car</a>
<a href='http://domain/sell/bag' class='sell'>Bag</a>
<a href='http://domain/sell/laptop' class='sell'>Laptop</a> 
```

现在您可以定义一些变量来引用 JavaScript 代码中的这些链接组：

```
var purchaseLinks = $('.purchase'),
    sellLinks= $('.sell'); 
```

好吧，足够的故事；）。

您可以查看[this](http://jsfiddle.net/saeedneamati/q573N/) fiddle和[this](http://jsfiddle.net/saeedneamati/q573N/1/) one中的问题。

根据[jQuery 的 add() 文档](http://api.jquery.com/add/)，返回值是一个**新的 jQuery 对象**。同样，附加到 jQuery 对象事件的函数处理程序中的 AMAIK 引用`this`DOM 元素。

为什么通过使用`add()`方法，`this`处理函数的引用`document`？我不明白。我无法根据我的知识做出合乎逻辑的看法。换句话说：

```
jQueryObject1.click(function(){
    // Here, $(this) is the jQuery object
});

jQueryObject2.click(function(){
    // Here again, $(this) is the jQuery object
});

jQueryObject1.add(jQueryObject2).click(function(){
    // Here $(this) refers to the Document, why?
    // I think jQueryObject1.add(jQueryObject2) should equal jQueryObject3
}); 
```

更新：

感谢您的回答。我再次向读者[推荐 Live is Deprecated](http://liveisdeprecated.com/)页面，以便每个人都可以改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:52:39.320

您小提琴中的问题是使用`.live()`. jQuery 文档状态：

> 不支持链接方法。例如，`$("a").find(".offsite, .external").live( ... );`无效且无法按预期工作。

对每个人来说幸运的是，该[`.live()`方法已弃用](http://liveisdeprecated.com)，因此您不必再担心类似的事情了。您可以`on`改用并利用事件委托。

* * *

**更新**（在@Esailija 发表评论之后）

这就是实际发生的情况。你在这里调用 jQuery：

```
var purchaseLinks = $('.purchase'); 
```

这会产生一个 jQuery 对象，该对象具有一个`selector`属性。然后调用`.add()`，它又调用内部`pushStack`方法：

```
return this.pushStack(isDisconnected(set[0]) || isDisconnected(all[0]) ? all : jQuery.unique(all)); 
```

该[`pushStack`方法](http://james.padolsey.com/jquery/#v=1.7.2&fn=pushStack)创建新的 jQuery 对象。它只用一个参数调用。这是该方法的相关部分（请注意，在我们的例子中，`name`和`selector`都是`undefined`）：

```
function (elems, name, selector) {
    // ...

    ret.context = this.context;

    if (name === "find") {
        ret.selector = this.selector + (this.selector ? " " : "") + selector;
    } else if (name) {
        ret.selector = this.selector + "." + name + "(" + selector + ")";
    }

    // Return the newly-formed element set
    return ret;
} 
```

另请注意，`this.context`现在是文档（由于您的原始 jQuery 对象没有指定上下文，因此假定了最高可能的上下文）。

所以新形成的元素集没有`selector`属性，并且以文档作为其上下文。然后当我们调用 时`.live()`，jQuery 简单地调用`.on()`如下：

```
jQuery( this.context ).on( types, this.selector, data, fn ); 
```

我们可以看到问题所在。上下文是文档，没有选择器，因此事件处理程序绑定到文档。在我们的例子中，上述行实际上是这样的：

```
jQuery( document ).on( "click", function() {
    //Your event handler
}); 
```

`alert`您可以通过单击文档中的任意位置（而不仅仅是链接）触发您的事实来看到这一点。

这个故事的主旨？停止使用`.live()`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:51:36.797

```
var purchaseLinks = $('.purchase'),
    sellLinks= $('.sell');
purchaseLinks.add(sellLinks).on('click', function(e) {
    e.preventDefault();
    alert(this.href);
}); 
```

`.add()`更改`.live()`为没有错`.on()`。

[http://jsfiddle.net/iambriansreed/q573N/5/](http://jsfiddle.net/iambriansreed/q573N/5/)

# iphone - 在 iphone sdk 中将固定大小的圆形按钮设置为图像

> ID：11431983
> 
> 赞同：1
> 
> 时间：2012-07-11T11:47:50.857
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

我正在开发一个应用程序，我需要将按钮作为图像进行舍入（正如我上传的那样）。![在此处输入图像描述](../Images/a272a177e07caba8081d63010fb6eeba.png)

它显示两个角是直的，其余的都是圆形的。我尝试了`mybutton.layer.cornerRadius`但使整个图像变得圆润。我也尝试只制作自定义按钮，但它在图像周围的按钮中留下了额外的空间，我需要将尺寸按钮固定为图像显示。请帮我。提前致谢。愉快的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:58:11.950

这是一个很好的教程：

[http://iphonedevelopment.blogspot.in/2010/03/irregularly-shape-uibuttons.html](http://iphonedevelopment.blogspot.in/2010/03/irregularly-shaped-uibuttons.html)

你可以从这里下载代码

[https://github.com/ole/OBShapedButton](https://github.com/ole/OBShapedButton)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:52:04.007

另一种但不是很好的方法是首先添加一个 imageView 在它上面添加这个特定的图像，而不是通过调整按钮的大小在图像上添加一个自定义的不可见按钮，虽然它不会覆盖整个图像，但它仍然可以正常工作......实际上我确实在我的一个应用程序中使用了这种方法：p

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:53:26.933

[`OBShapedButton`](http://mobiledevelopertips.com/open-source/ios-open-source-non-rectangular-button-shapes.html)可能有帮助。它是针对非矩形按钮形状优化的开源 UIButton 子类。如果它仍然不起作用，那么制作自己的按钮也不是那么困难。在视图中使用`UIView`和处理触摸。例如，在中`touchesMoved:`，设置活动图像，在中`touchesEnded:`，处理点击事件！

# java - 在 Java 中以 JSON 格式返回值的动态下拉菜单

> ID：11431987
> 
> 赞同：2
> 
> 时间：2012-07-11T11:47:56.237
> 
> 标签：java, json, swing, http

我正在开发一个应用程序，它通过使用 GET 调用与网站建立 http 连接。我正在获取数据集 ID，我想在下拉菜单中显示这些数据集 ID，以便用户可以选择它。

我还想将选定的数据集 id 存储在一个变量中，因为它将在我的应用程序中使用。

这就是我获取 DSid 中的值的方式（用于存储以 JSON 格式返回的数据集 id 的字符串数组）

```
URL urlDS = new URL("http:/link.json?key="+APIkey);
HttpURLConnection httpConDS = (HttpURLConnection) urlDS.openConnection(); 
StringBuilder sbDS = new StringBuilder();
while ((inputLineDS = inDS.readLine()) != null) {
    sbDS.append(inputLineDS);
    System.out.println(inputLineDS);
}
String ResultDS;
ResultDS=sbDS.toString();
System.out.println("result:"+ResultDS);
String jsonSourceDS = ResultDS;
JSONArray arrayDS;
try {
    arrayDS = new JSONArray(jsonSourceDS);
    for (int i = 0; i < arrayDS.length(); i++) {
        JSONObject firstObject = (JSONObject) arrayDS.get(i);
        System.out.println("Data set ID  " + firstObject.getString("datasetId"));

        DSid[i]=firstObject.getString("datasetId");
        ++countDSid;
    }
} 
```

我用过`JComboBox`，但对我没有帮助。

```
combo.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        JComboBox cb = (JComboBox) e.getSource();
        String selected = (String) cb.getSelectedItem();
        labelp3.setText("You selected: " + selected);
    }
} ); 
```

这在我的登录类的构造函数中

```
 JComboBox combo = new JComboBox(DSid); 
```

这个 DSid 是一个字符串数组，它使用 GET 调用存储数据集 id。

我无法使用数据集 ID 创建下拉菜单，如果我使用这些，它就是空的。

那么如何创建动态下拉菜单并将所选值存储在变量中？

数据集 (2,3) 中显示的值由我在类登录的 DSid 数组中静态给出。

# facebook - 如何获取特定 facebook 测试用户的用户访问令牌？

> ID：11431990
> 
> 赞同：2
> 
> 时间：2012-07-11T11:48:04.057
> 
> 标签：facebook, oauth-2.0, access-token, facebook-access-token, facebook-test-users

根据[Facebook Devlopers: Test Users](http://developers.facebook.com/docs/test_users/)的说法，我可以通过向`https://graph.facebook.com/APP_ID/accounts/test-users?access_token=APP_ACCESS_TOKEN`. 响应包括每个用户的有效用户访问令牌。

如何在不下载整个测试用户列表的情况下为特定测试用户获取有效的用户访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:02:05.173

测试用户*应该*能够以与其他用户相同的方式通过您的应用程序进行身份验证。因此，在为特定测试用户登录时使用身份验证流程。

除此之外，如果不解析代码，就无法一一调用。

# .net - 简单的 C# Rest Service 路由

> ID：11431992
> 
> 赞同：1
> 
> 时间：2012-07-11T11:48:18.110
> 
> 标签：.net, wcf, rest, asp.net-mvc-routing

我做了一个简单的 WCF Rest 服务。在我的 Global.asax 中，我注册了路线，例如

```
private void RegisterRoutes()
{
   RouteTable.Routes.Add(new ServiceRoute("Test", new WebServiceHostFactory(), typeof(Test)));
   RouteTable.Routes.Add(new ServiceRoute("Account", new WebServiceHostFactory(), typeof(Account)));
} 
```

这意味着当我去的时候，我会`http://192.168.0.1/Test/HelloWorld`在 Test 类中调用 HelloWorld 方法。但如果我去，`http://192.168.0.1`我会收到一条`http 403.14 Forbidden`消息。我想将 / 映射到 /Test。是否可以？我试过用“*”和“”替换“测试”，但如果我这样做，所有调用都会转到测试......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:46:54.650

就像添加行一样简单

```
RouteTable.Routes.Add(new ServiceRoute("", new WebServiceHostFactory(), typeof(Test))); 
```

在 RegisterRoutes() 方法的其他行之后。

# extjs3 - validateValue : 函数（值）返回警报 3 次

> ID：11431996
> 
> 赞同：0
> 
> 时间：2012-07-11T11:48:25.647
> 
> 标签：extjs3

我正在使用 extjs 版本 3.1.0。

我创建了一个简单的代码，它显示警报消息，如果输入的文本长度为 12。假设我输入 (123456123456)，那么它显示警报消息，即（**测试**）3 次。我的完整代码是

```
Ext.onReady(function() {
    Ext.QuickTips.init();
     var searchForm = new Ext.form.FormPanel({
     id: "searchForm",
     renderTo: Ext.getBody(),
     items: [ {
          id: "itemUpc",
          fieldLabel: 'UPC',
          xtype: 'numberfield',
          labelStyle: 'font-size: x-large',
          height: '35px',
          name: 'itemUpc',
          validateValue : function(value){
             if(value.length ==12){
           alert("Test");
        return false;
        }  
        return false;
       }
         }]
    });
}); 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:36:20.780

如果要限制长度，请使用 minLength 和 maxLength 属性

```
Ext.onReady(function() {
    Ext.QuickTips.init();
     var searchForm = new Ext.form.FormPanel({
     id: "searchForm",
     renderTo: Ext.getBody(),
     items: [ {
          id: "itemUpc",
          fieldLabel: 'UPC',
          xtype: 'numberfield',
          labelStyle: 'font-size: x-large',
          height: '35px',
          name: 'itemUpc',
          maxLength : 12,
          minLength : 12
         } ]
    });
}); 
```

# javascript - 为什么 TypeError: document.getElementById() 为空

> ID：11431997
> 
> 赞同：0
> 
> 时间：2012-07-11T11:48:33.100
> 
> 标签：javascript, document, getelementbyid

为什么下面的代码生成`TypeError: document.getElementById("docPrint") is null`

```
var printwindow = window.open('', '', 'fullScreen=no');
printwindow.document.write('<iframe id="docPrint" width="100%" height="100%" src="http://localhost:8080/hiring/docs/Keneth _1340800082258/Keneth _resume_1340800082258.pdf"></iframe>');
printwindow.self.focus();
document.getElementById('docPrint').focus();
document.getElementById('docPrint').contentWindow.print(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:51:52.237

您正在跨两个窗口进行操作。

```
printwindow.document.write
document.getElementById 
```

如果你想得到你在弹出窗口中创建的元素，那么你必须调用它的 gEBI 方法。

```
printwindow.document.write
printwindow.document.getElementById 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:52:42.743

预先`printwindow.`添加到每个实例`document.getElementById`：

```
printwindow.document.getElementById('docPrint').focus();
printwindow.document.getElementById('docPrint').contentWindow.print(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T11:53:58.950

您需要在对 document.getElementById 的调用前加上“printwindow”：

```
printwindow.document.getElementById('docPrint').focus();
printwindow.document.getElementById('docPrint').contentWindow.print(); 
```

您可能还希望在变量中保留对元素的引用，以避免样板文件

```
var el = printwindow.document.getElementById('docPrint');
el.focus();
el.contentWindow.print(); 
```