# StackOverflow 问答 10779000-10779999

# python - 在 django 中更改文件名

> ID：10779006
> 
> 赞同：1
> 
> 时间：2012-05-28T03:24:12.667
> 
> 标签：python, django, file-upload, django-admin

我有一个这个模型...

```
class MyModel(models.Model):
    ...
    file = models.FileField(upload_to='files/',null=True, blank=True)
    ... 
```

当我上传文件时，示例文件名为`docfile.doc`. 当我更改文件或重写文件并再次上传时`docfile.doc`，文件将变为`docfile_1.doc`旧文件`docfile.doc`仍然存在。

我正在上传和保存数据`django-admin`

`docfile.doc`我的问题是，如果我上传新`docfile.doc`的并且文件名仍然存在，我该如何删除旧的`docfile.doc`？

任何人都可以帮助我吗？提前致谢

我试试这个：

```
def content_file_name(instance, filename):
    print instance
    print filename
    file = os.path.exists(filename)
    print file
    if file:
        os.remove(filename)
    return "file/"+str(filename)

 class MyModel(models.Model):
        ...
        file = models.FileField(upload_to=content_file_name,null=True, blank=True)
        ... 
```

但是什么也没发生，当我再次上传`docfile.doc`时，它会变成`docfile_1.doc`旧的`docfile.doc`仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:27:34.393

我不知道该怎么做，但我认为这些链接可以帮助你：

[在这里](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)您可以找到 FileField 接受的两个选项。我认为你最感兴趣的是[`FileField.storage`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.storage)。您可以在该参数中传递存储对象。

它说：

> FileField.storage：可选。一个存储对象，用于处理文件的存储和检索。

然后，如果您阅读[本文](https://docs.djangoproject.com/en/dev/topics/files/#file-storage)，您会发现您可以编写自己的存储对象。[这](https://docs.djangoproject.com/en/dev/howto/custom-file-storage/)是有关如何执行此操作的一些说明。我认为您可以重写该`_save`方法以完成您想要做的事情（即：如果文件已经存在，请在保存新副本之前将其删除。）

不过要小心！我不知道您要存储的文件的来源。也许，您的应用程序会收到许多同名的文件，尽管它们都是不同的。在这种情况下，您可能希望使用可调用对象作为[`FileField.upload_to`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)参数，以便为您的站点接收的每个文件确定一个唯一的文件名。

我希望这可以帮助你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:04:27.997

我明白了……我用这个

```
def content_file_name(instance, filename):
    print instance
    print filename
    file = os.path.exists("media/file/"+str(filename))
    print file
    if file:
        os.remove("media/file/"+str(filename))
    return "file/"+str(filename) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:07:42.617

你也可以看看这里：[ImageField 覆盖同名的图像文件](https://stackoverflow.com/questions/9522759/imagefield-overwrite-image-file/9523020#9523020)

定义你自己的存储并覆盖它的 get available_name 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T06:21:23.463

下一个代码解决了您的问题。您覆盖图像实际保存到存储中的 pre_save 方法。请为您的项目重命名函数。将新创建的图像字段**ImageFieldWithPermantName**与您的**upload_to**函数 (content_file_name) 一起使用。

如果代码太复杂，您可以简化它。我使用代码执行更复杂的图像上传操作：我在自定义 _save_image 函数中即时创建缩略图。所以，你可以简化它。

```
from PIL import Image
import StringIO
from django.db.models import ImageField
from django.db.models.fields.files import FileField
from dargent.settings import MEDIA_ROOT
import os

class ImageFieldWithPermanentName( ImageField ):
    def pre_save( self, model_instance, add ):
        file = super( FileField, self ).pre_save(model_instance, add)
        if file and not file._committed:
            if callable( self.upload_to ):
                path = self.upload_to( model_instance, "" )
            else:
                path = self.upload_to
            file.name = path # here we set the same name to a file
            path = os.path.join( MEDIA_ROOT, path )
            chunks = _get_chunks( file.chunks() )
            _save_image( chunks, path )

        return file     

def _get_chunks( chunks ):
    chunks_ = ""
    for chunk in chunks:
        chunks_ += chunk
    return chunks_

def _get_image( chunks ):
    chunks_ = ""
    for chunk in chunks:
        chunks_ += chunk

    virt_file = StringIO.StringIO( chunks_ )
    image = Image.open( virt_file )
    return image

def _save_image( chunks, out_file_path ):
    image = _get_image( chunks )
    image.save( out_file_path, "JPEG", quality = 100 ) 
```

# macos - 如何通过应用程序在 mac osx 上调用内置 api l2tp/ipsec

> ID：10779007
> 
> 赞同：1
> 
> 时间：2012-05-28T03:24:13.360
> 
> 标签：macos, ipsec

我知道 Mac OSX 已经支持 ipsec conenection。所以我想通过调用mac系统上的内置api在我的应用程序中启动ipsec连接。

我怎么能调用这个api？还是不能这样做？

请帮我！

谢谢！

# javascript - Backbone.js - 如何在模板中使用自定义模型属性？

> ID：10779013
> 
> 赞同：7
> 
> 时间：2012-05-28T03:24:29.527
> 
> 标签：javascript, backbone.js, handlebars.js

这可能是一个非常简单的问题，但我很难找到答案。

使用主干，我有这条线：

```
Person = Backbone.Model.extend(); 
```

然后我在从 URL 填充的集合中使用它。为了这个例子，假设我有一个名字和姓氏，我想做一些类似的事情：

```
Person = Backbone.Model.extend({
    FullName: this.get("firstName") + " " + this.get("lastName")
}); 
```

例如，我可以使用 People.first().FullName() 将其称为内部主干。但是，如果我将 People.first() 传递给我的视图并在模板中呈现它，它似乎不知道 FullName 是什么。

如何将自定义属性添加到 Backbone 中的模型并在模板中使用它？

干杯!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T03:45:43.453

你的`FullName`定义没有任何意义，所以我假设你真的是这个意思：

```
Person = Backbone.Model.extend({
    FullName: function() {
        return this.get("firstName") + " " + this.get("lastName");
    }
}); 
```

通常你会调用[`toJSON`](http://backbonejs.org/#Model-toJSON)你的模型来序列化它们以供模板使用：

```
var html = template({ person: person.toJSON() }) 
```

[默认`toJSON`](https://github.com/jashkenas/backbone/blob/1.0.0/backbone.js#L281)只返回模型内部属性的（浅）副本。属性可能同时具有`firstName`和`lastName`属性，但`FullName`它是模型上的一个函数，因此它不会出现在属性中。

您可以提供自己的`toJSON`：

```
toJSON: function() {
    var j = _(this.attributes).clone();
    j.FullName = this.FullName();
    return j;
} 
```

然后你`FullName`的模板中有一个。但是，`toJSON`也用于序列化模型向服务器发送数据；您的服务器最终会看到 a`FullName`并且可能会对此感到不安。您可以专门为模板添加另一个序列化程序：

```
// `serialize` is another common name for this
for_template: function() {
    var j = this.toJSON();
    j.FullName = this.FullName();
    return j;
} 
```

然后使用该函数为您的模板提供数据：

```
var html = template({ person: person.for_template() }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-05T00:50:33.303

我也为此苦苦挣扎了一段时间，但我找到了解决方案。

它涵盖了相当多的深度，包括解决 toJSON 用于发送服务器数据的问题，在[Backbone Computed Properties](http://kilon.org/blog/2012/02/backbone-calculated-fields/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T19:26:01.200

```
var Person = Backbone.Model.extend({
    parse: function (model) {
        model.FullName = model.FirstName + ' ' + model.LastName;
        return model;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-28T09:57:34.343

还有一个更简单的方法。将您的方法包含在您的初始化方法中。当你实例化你的模型时，你的所有方法也会被实例化。

```
var model = Backbone.Model.extend({
 initialize : function(){
      this.myCustomMethod = function(){ return 'Something'; };
 },
 idAttribute : 'id',
 urlRoot : ''
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-07T17:29:26.683

完全不同的解决方法：

```
Backbone.Model.extend({
  defaults: function() {
    this.set('fullName', this.fullName.bind(this))
  },

  fullName: function() {
    return this.get('firstName') + this.get('lastName');
  }
}); 
```

这样可以直接在模型上调用“fullName”函数

```
model.fullName() 
```

或通过`get`函数，允许从模板调用它：

```
model.get('fullName')() 
```

# wcf - 使用 WCF 作为 Socket/TCP 客户端的基础（或任何更好的选择？）

> ID：10779016
> 
> 赞同：1
> 
> 时间：2012-05-28T03:25:07.390
> 
> 标签：wcf, sockets, tcpclient

我正在尝试编写一个 .NET 客户端来与使用 Netty 框架实现的 Java 编写的服务器通信。服务器以预定义的格式接收和发送回消息。这不是请求/响应协议，因为消息接收和发送是两个不相关的事情。

我可以使用 Socket 或 TcpClient 类编写原始客户端，但我正在考虑使用 WCF 作为基础结构，因此我可以专注于消息编码/解码并重用 WCF 中的大多数组件。

我确定我必须为 WCF 编写扩展，但我不知道从哪里开始。我可以找到一些具有请求/响应通信模式的示例，但我需要的是单独发送和接收数据，例如使用 Netty（甚至原始 TcpClient 或 Socket）编程 - 使用单个 TCP 连接。

所以我的问题是，我应该从哪里开始使用 WCF？我有任何样品或资源吗？WCF 是完成这项任务的好选择吗？还有更好的选择吗？

# c - 将进程发送到后台并将控制权返回给我的 shell

> ID：10779020
> 
> 赞同：7
> 
> 时间：2012-05-28T03:26:04.203
> 
> 标签：c, linux, shell, background-process, process-group

我正在为我的 CS 类编写一个 shell，如果用户传入了“&”字符，则该项目的一部分涉及在后台运行一个进程。

如果一个进程在前台运行，我只是`execvp`该进程，它仍然控制着终端，因为它在前台。但是，如果它是后台进程，我必须在开始执行该进程后将控制权返回给我的主 shell。我知道系统调用`tcsetpgrp(pid_t)`将作为参数传入的进程放在前台，但我不太明白如何使用它。

如果它是后台进程，`tcsetpgrp`我应该打电话吗？`execvp`如果是这样，我可以通过调用来获取我的 shell 的 pid`getpid`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T04:51:58.150

`tcsetpgrp()`适用于*流程组*，而不是单个流程。你想要做的是：

1.  创建新管道时，调用`setpgid()`将管道的所有成员放入一个新的进程组中（以管道中第一个进程的 PID 作为 PGID）。（管道是您的外壳在看到类似请求时启动的一系列进程`ls | grep foo | wc -l`- 最简单的管道中只有一个进程）。通常你会`setpgid(0, 0)`从管道中的第一个进程调用，然后再调用`exec()`.

2.  用于`tcsetpgrp()`管理哪个进程组在前台。如果你将一个进程组从前台移动到后台，你可以将 shell 自己的进程组设置为前台进程组——你可以`getpgid(0)`在 shell 中得到它。

3.  当 shell 在后台时，它应该使用阻塞`waitpid()`调用来等待子进程退出而不是显示提示。一旦前台管道中的每个进程都退出，它应该再次将自己放回前台（并显示提示）。

4.  当 shell 处于前台时，它应该在您显示提示之前调用和`waitpid()`标志来检查子进程的状态 - 这将在它们停止或退出时通知您，并让您通知用户。`WNOHANG``WUNTRACED`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T06:23:47.967

如果您的 shell 启动一个进程`&`用于后台运行，`$!`shell 变量将包含子进程的 PID。然后，您可以向该进程发送信号，或用于`wait $!`等待它完成。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T04:27:22.250

你应该看看[fork](http://linux.die.net/man/2/fork)来创建子进程。然后，`exec`在孩子中使用以运行所需的命令。

# mysql - 在 MySQL 数据库的多个表中传播数据？

> ID：10779026
> 
> 赞同：0
> 
> 时间：2012-05-28T03:27:52.930
> 
> 标签：mysql, mysql-management

我正在编写一个包含 1000 个对象和大约 1000 万行数据的应用程序。每次绘制时，数据将用于绘制包含 1000 多个值的图表。如果我为每个对象创建一个表并将它们的数据分布在所有表而不是同一个表中，它是否有助于应用程序性能？

恐怕应用程序会减慢在 1000 万行表中搜索 1000 个值的速度，特别是在连接其他两个或三个表时。

推荐这种做法时是否有最小尺寸？或者有没有推荐这种做法的情况？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:34:24.583

创建 1000 个表从来都不是最好的选择，所以我想说你应该使用一个表并在需要的地方有索引。

# c++ - OpenSSL：RSA 加密/解密、密钥生成和密钥持久性

> ID：10779027
> 
> 赞同：8
> 
> 时间：2012-05-28T03:27:53.337
> 
> 标签：c++, openssl, rsa, p2p

我正在尝试使用 OpenSSL 中的 RSA 构建一个需要以下内容的 p2p 应用程序：

```
-Encryption
-Decryption
-Generating Keys (done)
-Saving and loading keys (done)
-Saving the PUBLIC key as bytes so it can be sent over the sockets
-Loading keys from the above format 
```

我已选择使用 EVP 功能，无论这意味着什么。但是，我很难找到我需要使用哪些功能来做这些事情，以及以什么顺序。OpenSSL 的官方文档似乎不存在。

有谁知道我需要以什么顺序使用哪些功能及其原型？周围的任何示例代码也很好。

提前非常感谢，

抽搐液体64。

**PS：这是我目前所拥有的**

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <openssl/rsa.h>
#include <openssl/evp.h>
#include <openssl/objects.h>
#include <openssl/x509.h>
#include <openssl/err.h>
#include <openssl/pem.h>
#include <openssl/ssl.h>
#include <openssl/engine.h>
#include <openssl/rand.h>

RSA* Generate_KeyPair(void)
{
  char rand_buff[16];
  EVP_PKEY *pkey = NULL;
  RSA* r;
  char* pass = "passgdfgf";//for now

  int bits = 512;       //      512, 1024, 2048, 4096
  unsigned long exp = RSA_F4;     //      RSA_3
  OpenSSL_add_all_algorithms();

  RAND_seed(rand_buff, 16); //On linux: RAND_load_file("/dev/urandom", 1024);
  r = RSA_generate_key(bits,exp,NULL,NULL);

  if (RSA_check_key(r)!=1);;; //Check key - error out

  //Create EVP to save to file.
  pkey = EVP_PKEY_new();
  EVP_PKEY_assign_RSA(pkey, r);

  //Save private key
  FILE* fp = fopen("private.key", "w");
  PEM_write_PrivateKey(fp,pkey,EVP_aes_256_cbc(),NULL,0,NULL,pass)
  fclose(fp);

  //Save public key
  fp = fopen("public.key", "w");
  PEM_write_PUBKEY(fp, pkey);
  fclose(fp);

  return r;
}

EVP_PKEY* ReadPrivKey_FromFile(char* filename, char* pass)
{
  FILE* fp = fopen(filename, "r");
  EVP_PKEY* key = NULL;
  PEM_read_PrivateKey(fp, &key, NULL, pass);
  fclose(fp);

  return key;
}

EVP_PKEY* ReadPubKey_FromFile(char* filename)
{
  FILE* fp = fopen(filename, "r");
  EVP_PKEY* key = NULL;
  PEM_read_PUBKEY(fp, &key, NULL, NULL);
  fclose(fp);

  return key;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T12:18:04.277

正如在对我的问题的评论中所说：

*您会发现 OpenSSL 附带的示例代码比文档更有用。例如，使用 RSA 加密的文档显示在 apps/rsa.c 中。它可能有助于制定 OpenSSL 命令行来执行您希望使用命令行工具执行的每个功能，然后找出代码实际执行的操作（通过检查它），这样您就可以让您的代码执行相同的操作。* ——大卫·施瓦茨

这个示例代码正是我所需要的，我建议任何有类似问题的人查阅 rsa 代码和头文件，它们也是文档中的小使用示例。

# visual-studio-2010 - 如何从源和第三方依赖项构建 OpenSceneGraph？

> ID：10779029
> 
> 赞同：3
> 
> 时间：2012-05-28T03:28:03.653
> 
> 标签：visual-studio-2010, visual-c++, openscenegraph

如何从源代码构建 OpenSceneGraph？我应该怎么做才能构建 OSG 的第三方依赖项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T03:30:34.563

# c# - 按字母顺序对 ListView 上的项目进行排序

> ID：10779031
> 
> 赞同：2
> 
> 时间：2012-05-28T03:29:11.383
> 
> 标签：c#, winforms

我有一个这样的列表视图，在 FormLoad 事件中我应该为它做一些初始化，例如：（我需要这些）。

```
 listView.Scrollable = true;
    listView.HideSelection = false;
    listView.FullRowSelect = true;
    listView.View = View.Details;
    listView.HeaderStyle = ColumnHeaderStyle.None;
    ColumnHeader header = new ColumnHeader();
    header.Text = "MyHdr";
    header.Name = "MyCol";
    header.Width = listView.ClientSize.Width;
    listView.Columns.Add(header); 
```

我向其中添加项目的方式非常简单，如下所示：

```
listView.Items.Add("hello");
listView.Items.Add("How are you");
//... etc 
```

但我希望它们按字母顺序添加和排序，但是当我向其中添加新项目并调用 Sort 方法时，它什么也不做。为什么？！:(

**编辑：**这是我在最后一行调用 Sort() 的整个部分 目标是有两个列表视图和一个移动按钮，当单击移动按钮时，一个列表视图中的选定项目应该移动到另一个列表视图. （两个列表视图都不需要排序。只需对 AvailLV 列表视图进行排序）

```
private void MoveBtn_Click(object sender, EventArgs e)
{
    ListView source=null;
    ListView target= null;

    if(AvailableLV.SelectedItems.Count>0)
    {
        source = AvailableLV;
        target = SelectedLV;
    }

    if(SelectedLV.SelectedItems.Count>0)
    {
        source = SelectedLV;
        target = AvailableLV;
    }

    if (source != null && target != null)
    {
        HaulItems(source, target);
    }
}

private void HaulItems(ListView source , ListView target)
{
    foreach(ListViewItem item in source.Items)
    {
        if(item.Selected)
        {
            source.Items.Remove(item);
            target.Items.Add(item);
        }
    }
    AvailableLV.Sort();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T03:34:23.400

你在哪里设置你的[ListView.Sorting 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.sorting.aspx)

从上面的链接：

> Sorting 属性允许您指定是否在 ListView 控件中对项目进行排序。**默认情况下，不执行排序**。当 Sorting 属性设置为 Ascending 或 Descending 时，ListView 中的项目将自动按字母升序（当属性设置为 Ascending 时）或字母降序（当属性设置为 Descending 时）排序。您可以使用此属性自动对 ListView 控件中显示的项目进行排序，以便用户在有大量可用项目时更容易找到项目。

* * *

查看您的编辑，我认为您需要做的就是设置`ListView.Sorting`属性`AvailableLV`，它会在添加项目时自动对您的项目进行排序。或代替打电话。

```
AvailableLV.Sort(); 
```

采用

```
AvailableLV.Sorting = SortOrder.Ascending; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T18:30:01.143

如果有人关注这个话题，我发现最简单的方法是将列表视图发送到数据表并从中创建一个数据视图，然后对数据视图进行排序。对该数据视图进行排序后，创建一个临时表，然后将行推回列表视图。例如下面。

```
 public string SortOrder;
    public string ItemSorted;
    private void LSTHistory_ColumnClick(object sender, ColumnClickEventArgs e)
    {
        DataTable TempTable = new DataTable();
        for (int i = 0; i < LSTHistory.Columns.Count; i++)
        {
            TempTable.Columns.Add(LSTHistory.Columns[i].Text);
        }
        foreach (ListViewItem Item in LSTHistory.Items)
        {
            DataRow iRow = TempTable.NewRow();
            iRow[0] = Item.Text;
            iRow[1] = Item.SubItems[1].Text;
            TempTable.Rows.Add(iRow);
        }
        if (SortOrder == string.Empty || SortOrder == "ASC") SortOrder = "DESC";
        else SortOrder = "ASC";
        if (e.Column == COLTime.Index)
        {
            ItemSorted = COLTime.Text;
        }
        else
        {
            ItemSorted = COLURL.Text;
        }
        DataView OldView = TempTable.DefaultView;
        OldView.Sort = ItemSorted + " " + SortOrder;
        DataTable SortedTable = OldView.ToTable();
        LSTHistory.Items.Clear();
        foreach (DataRow iRow in SortedTable.Rows)
        {
            LSTHistory.Items.Add(iRow[0].ToString()).SubItems.Add(iRow[1].ToString());
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-30T11:47:50.293

又一个后来者参加了球赛。

此解决方案用于`Linq`对项目进行排序。

它可以通过单击列标题进行排序。排序是按数字、字符串或日期，它将在升序和降序之间切换，它会忽略无效数据，将它们排序到开头或结尾。

您需要在一个简单的字符串中输入列的类型。

```
static class LvHelper
{
    public static void SortByColumn(this ListView lv, string colTypes, 
                                    ColumnClickEventArgs e)
    {
        string lvSort = "As0";
        if (lv.Tag != null) lvSort = lv.Tag.ToString();
        if (e.Column < 0 || e.Column > colTypes.Length - 1) return;
        char sortType = colTypes[e.Column];
        if (sortType == '-') return;
        int mini = lv.Items.Cast<ListViewItem>().Select(x => x.SubItems.Count).Min();
        if (sortType != 's'  && lv.Items.Cast<ListViewItem>()
                            .Select(x => x.SubItems.Count - 1).Min() < e.Column) return;

        int  sortCol = Convert.ToInt32(lvSort.Substring(2));
        bool asc = lvSort[0] == 'A';
        if (e.Column == sortCol) asc = !asc;
        DateTime dummyD;
        double dummyN;
        double maxDate = DateTime.MaxValue.ToOADate();
        int order = asc ? 1 : -1;

        List<ListViewItem> sorted = null;
        try
        {
            if (sortType == 'n')   // numbers
                sorted = lv.Items.Cast<ListViewItem>().Select(x => x)
                         .OrderBy(x => order * Convert.ToDouble(
                          double.TryParse(x.SubItems[e.Column].Text, out dummyN)
                                ? x.SubItems[e.Column].Text 
                                : (double.MinValue / 2).ToString())).ToList();
            else if (sortType == 'd')   // dates
                sorted = lv.Items.Cast<ListViewItem>().Select(x => x)
                         .OrderBy(x => (Convert.ToDateTime(
                          DateTime.TryParse(x.SubItems[e.Column].Text, out dummyD)
                                  ? x.SubItems[e.Column].Text 
                                  : "1900-01-01").ToOADate() * order)).ToList();

            else  // strings
            {
                if (asc)
                    sorted = lv.Items.Cast<ListViewItem>().Select(x => x)
                               .OrderBy(x => x.SubItems.Count -1 < e.Column 
                               ? "" : (x.SubItems[e.Column].Text)).ToList();
                else sorted = lv.Items.Cast<ListViewItem>().Select(x => x)
                               .OrderByDescending(x => x.SubItems.Count -1 < e.Column 
                               ? "" : (x.SubItems[e.Column].Text)).ToList();
            }
        }
        catch (ArgumentOutOfRangeException ex) { return; }

        lv.Items.Clear();
        lv.Items.AddRange(sorted.ToArray());

        lv.Tag = "" + (asc ? "A" : "D") + sortType.ToString() + e.Column;
    }

} 
```

该解决方案使用 LV`Tag`来记住当前排序。

该解决方案期望数据存在，因此**缺少**子项将使排序**失败**。

它是作为扩展方法编写的，因此在添加类后，您可以在任何对象上调用它`ListView`：

```
private void someListView_ColumnClick(object sender, ColumnClickEventArgs e)
{
  ListView lv = sender as ListView;
  string colTypes = "sds-n";   // string, date, string, excluded, number
  lv.SortByColumn(colTypes, e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-18T23:58:56.277

如果您只是在寻找一次性排序并且您可以在将数据添加到 ListView 之前访问数据，那么这是一个整洁的解决方案：

```
 string[] exampleData = { "1", "2", "3" };
        string[] namesToSortBy = { "Sam", "Bill", "Jeff" };

        SortedList<string, ListViewItem> alphabetical = new SortedList<string, ListViewItem>();

        for (int i = 0; i < exampleData.Length; i++)
        {
            ListViewItem lvi = new ListViewItem();

            lvi.Text = exampleData[i];

            lvi.SubItems.Add(namesToSortBy[i]);

            alphabetical.Add(namesToSortBy[i], lvi);
        }

        foreach (KeyValuePair<string, ListViewItem> item in alphabetical)
        {
            listView1.Items.Add(item.Value);
        } 
```

# iphone - 如何创建一个可以水平滚动的 UITableView？

> ID：10779032
> 
> 赞同：2
> 
> 时间：2012-05-28T03:29:12.717
> 
> 标签：iphone, objective-c, xcode, ios5, storyboard

我正在尝试创建一个verticalTableView，它在每个可以水平滚动的verticalTableViewCell 内都有一个horizo​​ntalTableView（与“Pulse”应用程序的概念相同）。而且我找到了很多教程（下面两个例子），但它们都是在 XIB 时代。任何人都可以解释如何做到这一点/给我一个关于如何用故事板做同样事情的教程的链接吗？

[第一个教程](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)

[第二个教程](http://iosstuff.wordpress.com/2011/06/29/creating-pulse-style-scrolling-horizontally-scrolling-uitableview-as-a-subview-of-uitableviewcell/)

更新：此后，我发现了另一个关于 SO 的问题，该问题由提出该问题的同一个人回答。这个人已经设法使用 UITableViewCell 类实现 tableView 的协议，问题是如何实现？包含动态tableView的tableView是静态的有关系吗？

[静态 UITableViewCell 中的动态 UITableView](https://stackoverflow.com/questions/10120424/dynamic-uitableview-in-static-uitableviewcell)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T05:24:57.690

使用以下代码部分创建所需的表。

```
 UITableView *horizontalTable = [[UITableView alloc] init];
    [horizontalTable setDelegate:self];
    [horizontalTable setDataSource:self];
    horizontalTable.transform = CGAffineTransformMakeRotation(-M_PI * 0.5);
    horizontalTable.autoresizesSubviews=NO;
 frame =CGRectMake(140, 0 , 642, 85);
//frame is important this has to be set accordingly. if we did not set it properly, tableview will not appear some times in the view
[self.view addSubview:customTable]; 
```

在自定义单元格的 CustomCell 类中，我们找到以下方法。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier 
```

在那个方法中，使用这个。

```
 self.transform = CGAffineTransformMakeRotation(M_PI * 0.5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T03:57:32.307

感谢@christoph，我终于弄明白了。请参阅他的问题中的示例代码。

[静态 UITableViewCell 中的动态 UITableView](https://stackoverflow.com/questions/10120424/dynamic-uitableview-in-static-uitableviewcell/10410463#comment14208216_10410463)

# java - 将活动标题椭圆设置为中间？

> ID：10779037
> 
> 赞同：7
> 
> 时间：2012-05-28T03:29:42.007
> 
> 标签：java, android

我有一个活动，其标题不断变化，但有时它很长并且最后会出现省略号。我可以将椭圆设置为中间吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T05:46:27.580

你可以这样做：

```
 final int actionBarTitle = Resources.getSystem().getIdentifier("action_bar_title", "id", "android");
    final TextView title = (TextView)getWindow().findViewById(actionBarTitle);
    if ( title != null ) {
        title.setEllipsize(TextUtils.TruncateAt.MIDDLE);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:10:51.160

```
 ((TextView) ((FrameLayout) ((LinearLayout) ((ViewGroup) getWindow()
            .getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0))
            .setEllipsize(TextUtils.TruncateAt.MIDDLE); 
```

从[android:set title bar in middle](https://stackoverflow.com/questions/6067490/androidset-title-bar-in-middle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T02:58:17.183

如果您使用工具栏，您可以在 settitle 之前添加此功能

```
 private void setToolbarTextEllipsizeInMiddle(Toolbar toolbar){
    try {
        toolbar.setTitle("'");
        for (int i = 0; i < toolbar.getChildCount(); i++) {
            View view = toolbar.getChildAt(i);
            if (view instanceof TextView) {
                TextView tv = (TextView) view;
                tv.setEllipsize(TextUtils.TruncateAt.MIDDLE);
            }
        }//end for i
        toolbar.setTitle("");
    } catch (Exception e) {
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-28T05:36:10.600

尝试使用`android:ellipsize`

请参阅Android 开发者页面中的[android:ellipsize](http://developer.android.com/reference/android/widget/TextView.html#attr_android:ellipsize)。

# wpf - 为 List ItemsSource 创建自定义 ItemContainerStyle

> ID：10779039
> 
> 赞同：0
> 
> 时间：2012-05-28T03:30:08.867
> 
> 标签：wpf, listview, itemcontainerstyle

我正在尝试为 ListView 创建自定义 ItemContainerStyle 以便显示的文本是可选的。我正在寻找将 ItemsSource 设置为`List<string>`. 如果我绑定到`List<Person>`(with property `Name`) 我可以做

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                  <StackPanel>
                    <TextBox Text="{Binding Path=Name}">
                  </StackPanel>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListView.ItemContainerStyle> 
```

如何为 a 指定绑定`List<T>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:10:32.703

只会`<TextBox Text="{Binding Mode=OneWay}">`做。

# php - 对 MySQL 查询进行排序时遇到问题

> ID：10779041
> 
> 赞同：0
> 
> 时间：2012-05-28T03:30:16.080
> 
> 标签：php, mysql, wordpress

我有一个查询...

```
SELECT p.* 
FROM   wp_posts p 
       JOIN wp_postmeta pm 
         ON pm.post_id = p.ID 
       JOIN wp_postmeta pmd 
         ON pmd.post_id = p.ID 
WHERE  p.post_type = 'event' 
       AND p.post_status = 'publish' 
       AND ( pm.meta_key = 'post_city_id' 
             AND ( pm.meta_value = '1' ) ) 
       AND ( pmd.meta_key = 'end_date' 
             AND pmd.meta_value >= '2012-05-27' ) 
ORDER  BY p.post_date ASC, 
          p.post_title ASC 
LIMIT  5 
```

end_date 和 end_time 是元键，其值与特定帖子不应再显示在网站上的日期（以 Ymd 格式）和时间等价。所以我想用 pmd.meta_key='end_date' asc,pmd.meta_key='end_time' asc 之类的东西更改 p.post_date asc，但我不确定最好的方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:06:54.253

从问题中不能 100% 确定您要按什么进行排序，但如果您希望链接同一个表中的两个值（然后按以下方式排序），您可以按如下方式进行：

```
SELECT p.*
FROM wp_posts p  
  JOIN wp_postmeta pm ON pm.post_id=p.ID AND pm.meta_key='post_city_id' AND pm.meta_value='1' 
  JOIN wp_postmeta pmd ON pmd.post_id=p.ID AND pmd.meta_key='end_date' AND pmd.meta_value>='2012-05-27'
  JOIN wp_postmeta pmt ON pmt.post_id=p.ID AND pmt.meta_key='end_time'
WHERE p.post_type='event' and p.post_status='publish'  
ORDER BY pmd.meta_value, pmt.meta_value
LIMIT 5 
```

这将为您提供按 key = "end_date" 的 postmeta 值排序的结果，然后是 key = "end_time" 的 postmeta

(I've also moved the "WHERE" into the JOIN as this makes it clearer to read. Not required, but nicer for reading / debugging and is the same results.)

# java - 如何使用prepareStatement更新数据，字段和值都需要设置

> ID：10779042
> 
> 赞同：2
> 
> 时间：2012-05-28T03:30:27.267
> 
> 标签：java, oracle, prepared-statement, sqlexception

我`prepareStatement()`用来更新数据，有几列需要更新，我写了一个这样的程序：

```
public boolean editSocre(String field, String newValue) 
{
... 

   updateSql = "update score set ? = ? where emp_id = ?";
   pstmt3 = conn.prepareStatement(updateSql);
   pstmt3.setString(1, field);
   pstmt3.setString(2, newValue);
   pstmt3.setString(3, userid);                 
   int row = pstmt3.executeUpdate();
   if (row <= 0) 
   {
      return result;
   }

...

} 
```

> java.sql.SQLException: ORA-01747: 无效的 user.table.column、table.column 或列规范

怎么修改，谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:35:53.307

```
public boolean editSocre(String field, String newValue) {

... 

updateSql = "update score set "+field+" = ? where emp_id = ?";

pstmt3 = conn.prepareStatement(updateSql);

pstmt3.setString(1, newValue);

pstmt3.setString(2, userid);          

int row = pstmt3.executeUpdate();

if (row <= 0) {

  return result;

} 
```

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:19:26.033

正如其他答案/评论已经说过的那样：PreparedStatement 无法做到这一点。如果要更新的行确实需要是动态的，则可以使用可更新的结果集：

```
PreparedStatement stmt = connection.prepareStatement("SELECT * FROM score WHERE emp_id = ?", ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_UPDATABLE);
stmt.setString(1, userId);
ResultSet rs = stmt.executeQuery();
if (rs.next()) { // or maybe while rs.next()
    rs.updateString(field, newValue);
    rs.updateRow();
} 
```

# android - 移动 HTML5 网络检测和短信发送

> ID：10779045
> 
> 赞同：0
> 
> 时间：2012-05-28T03:30:35.560
> 
> 标签：android, ios, html

我想创建一个移动应用程序来检测网络连接（例如 3G），如果没有连接，则发送短信。

对于 Android 和 iOS，这可能使用 HTML5 吗？

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:43:38.550

您不能在 iOS 上以编程方式发送 SMS，您可以向用户显示 SMS 撰写视图，并且用户可以决定是否要发送。

然而，iOS 上的纯 HTML/Web 应用程序无法访问执行此操作的功能，但混合应用程序（即使用 UIWebView 加载 html 而不是 Safari 的应用程序）可以。

假设这种 SMS 行为对您来说没问题，那么无论如何您都必须创建一个混合应用程序，那么 iOS 是否无法处理 html5 的所有网络方面都没有关系，因为您可以在本机上执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:01:55.250

HTML5 具有连接功能。这是一个捕获在线/离线事件[的演示。](http://html5demos.com/offline)

如果您想了解有关网络接口的更多具体信息，则必须从可能使用 Web 套接字的本机后台任务代理它。

# php - sql - 获取所有用户朋友

> ID：10779047
> 
> 赞同：0
> 
> 时间：2012-05-28T03:30:42.597
> 
> 标签：php, mysql, sql

我想查询 3 个不同的表。 ![在此处输入图像描述](../Images/3eb47eb5d55e16a69b37b8b12d7450ab.png)

我的方法是从**FRIENDS TABLE**获得朋友。因此，输出将是： ![在此处输入图像描述](../Images/7090d8d5d1f13e118beacc54f5f7204d.png)

我试过这个解决方案

```
SELECT users.firstname, users.lastname, 
users.screenname, profile.profile_pic, friends.friend_id
FROM website.users users
INNER JOIN website.friends friends ON (users.user_id = friends.friend_id)
LEFT  JOIN profile ON (friends.friend_id = profile.user_id)
WHERE (friends.user_id = "12052822" or friends.friend_id = "12052822") 
```

问题是当它匹配一条记录时，它输出列**"friend.user_id"**。那不是我想做的！如果用户登录，**查询将获取他所有的朋友**......我怎样才能以更简单和更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:34:46.090

表中的`id`和`user_id`列`users`至少令人困惑？为什么有两个“标识符”列？两者中的哪一个加入`friend.user_id`？与 连接的列是同一列`friend.friend_id`吗？目标是显示`friends.user_id`刚刚登录的用户的所有名称，还是显示刚刚登录的用户的所有名称`friends.friend_id`，或两者兼而有之？

在进一步澄清之前，我将假设结果集应该包括两个朋友列表：被用户加为好友的人和已经成为用户加好友的人。我还将假设该`users.user_id`列是连接列。

我们可以很容易地把它写成一个 UNION，注意一个 UNION 将消除重复条目，因为登录的用户已经加了一个用户的好友，而这个用户也加了登录的用户的好友（所以表中有两个条目`friends`带有`user_id`和中的相同值对`friend_id`。

进入TDQD（测试驱动查询设计），我们可以写（假设新登录的用户是`user_id = 12052822`）：

### 被用户 12052822 加为好友的用户

```
SELECT u.user_id, u.firstname, u.lastname, u.screenname, p.profile_pic
  FROM website.friends AS f
  JOIN website.users   AS u ON f.friend_id = u.user_id
  JOIN website.profile AS p ON p.user_id   = u.user_id
 WHERE f.user_id = 12052822; 
```

### 已加好友用户 12052822 的用户

```
SELECT u.user_id, u.firstname, u.lastname, u.screenname, p.profile_pic
  FROM website.friends AS f
  JOIN website.users   AS u ON f.user_id = u.user_id
  JOIN website.profile AS p ON p.user_id = u.user_id
 WHERE f.friend_id = 12052822; 
```

### 两组用户

```
SELECT u.user_id, u.firstname, u.lastname, u.screenname, p.profile_pic
  FROM website.friends AS f
  JOIN website.users   AS u ON f.friend_id = u.user_id
  JOIN website.profile AS p ON p.user_id   = u.user_id
 WHERE f.user_id = 12052822;
UNION
SELECT u.user_id, u.firstname, u.lastname, u.screenname, p.profile_pic
  FROM website.friends AS f
  JOIN website.users   AS u ON f.user_id = u.user_id
  JOIN website.profile AS p ON p.user_id = u.user_id
 WHERE f.friend_id = 12052822; 
```

您可以分别测试和调试每个组件查询，然后将它们组合起来以创建最终答案。

# algorithm - Floyd Warshall 算法的时间复杂度

> ID：10779054
> 
> 赞同：12
> 
> 时间：2012-05-28T03:32:51.043
> 
> 标签：algorithm, graph, shortest-path, floyd-warshall

Skiena 的算法书包含以下对[Floyd Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)的解释：

```
 floyd(adjacency_matrix *g)
 {
   int i,j; /* dimension counters */
   int k; /* intermediate vertex counter */
   int through_k; /* distance through vertex k */
   for (k=1; k<=g->nvertices; k++)
       for (i=1; i<=g->nvertices; i++)
           for (j=1; j<=g->nvertices; j++) {
                through_k = g->weight[i][k]+g->weight[k][j];
                if (through_k < g->weight[i][j])
                      g->weight[i][j] = through_k;
           }
  } 
```

> **Floyd-Warshall 全对最短路径在 O(n ³ ) 时间内运行，这在渐近上并不比对 Dijkstra 算法的 n 次调用更好。但是，循环非常紧凑，程序非常短，以至于它在实践中运行得更好。**值得注意的是，它是一种罕见的图算法，它在邻接矩阵上比邻接列表工作得更好。

有人可以详细说明为什么粗体部分是真的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-04-14T20:06:01.717

让我们分解一下：

> **Floyd-Warshall 全对最短路径在 O(n ³ ) 时间内运行...**

这是因为我们有一个三重`for`循环，每个循环都有**n**次迭代

> **...这并不比对 Dijkstra 算法的 n 次调用更好。...**

回想一下，对 Dijkstra 算法的一次调用将告诉我们从一个特定节点**x1**到图中所有节点的所有最短路径。因此，我们可以对图中的所有节点进行**n**次 Dijkstra 算法调用：**x1** , **x2** , ... **xn**以找到从**x1**到所有节点、**x2**到所有节点、... **xn**到所有节点的最短路径。换句话说，这给了我们*所有对*的最短路径——就像 Floyd Warshall 所做的那样！

```
Running Dijkstra n times:
time = number of nodes × O((n + e)lgn)      [assuming binary heap used for Dijkstra]
     = n × O((n + e)lgn)                
     = O(n(n + e)lgn) 
```

因此，Floyd-Warshall 的**O(n^3)**时间并不比调用 Dijkstra的 O( **n** **(n + e)lgn)**时间好。

 **> **...但是，循环非常紧凑，程序非常短，以至于在实践中运行得更好。**

这里的关键词是“*在实践中*”。请记住，渐近分析并不完美。这是性能的数学抽象/近似。当我们实际来运行代码时，有很多实际因素没有考虑到。处理器具有用于获取和运行指令的复杂低级架构。它[流水线](https://en.wikipedia.org/wiki/Pipeline_(computing))指令、[预取](https://en.wikipedia.org/wiki/Cache_prefetching)指令、尝试[预测](https://en.wikipedia.org/wiki/Branch_predictor)指令、[缓存](https://en.wikipedia.org/wiki/CPU_cache)指令和数据，......这是非常不可预测的！然而，所有这些低级优化都会对算法的整体性能产生巨大影响。理论上慢的算法可以得到提升，而理论上快的算法可能不会得到同样的提升。这有时被称为大哦符号的[隐藏常数因子](https://wcipeg.com/wiki/Hidden_constant_factor)。

事实证明，处理器喜欢优化嵌套`for`循环和多维数组！这就是 Skiena 在这里所暗示的。数组的`for`循环充分利用了[时间和空间的局部性](https://en.wikipedia.org/wiki/Locality_of_reference)，并与低级处理器优化配合得很好。另一方面，Dijkstra 的算法不能很好地做到这一点，因此处理器优化也不能很好地工作。因此，Dijkstra 在实践中确实可能会更慢。
Floyd-Warshall 是一个“短程序”，它不使用任何复杂的数据结构并且重复的指令数量很少。这些东西，连同处理器优化一起，导致 Floyd-Warshall 有一个小的隐藏常数因子。也就是说，****³ )**体积小。**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-26T14:58:25.743

假设 v 为顶点数。对于稀疏图（少数边），边数`e = O(v)`。对于密集图（许多边）`e = O(v^2)`。

**现在，单一来源的****最短路径**问题的最佳渐近实现需要摊销时间。Dijkstra 算法的这种实现使用了斐波那契堆，由于涉及的常量值很高，因此不太实用。例如，除了父节点和子节点之外，堆中的每个顶点也使用双链表连接到其兄弟节点。这导致每个节点存储大量指针。除了堆之外，甚至每个顶点都需要访问邻接表。**`O(e + vlogv)`**

 **如果我们假设我们的图是密集图的最坏情况，e = O(v^2)，Dijkstra 的算法将采用`O(v^2 + vlogv)`= **O(v^2)**。现在你将如何找到**所有顶点对之间的最短路径**？

### 选项1：

您可以使用**Dijkstra 的算法并将其应用于每个 vertex**。

那要花多少钱？v * O(v^2) = **O(v^3)**。但是，所涉及的常数会使实际成本更高。您必须构建堆（一次），检查邻接列表，减少键并提取每个顶点的最小值（同时保持最小堆）。

### 选项 2：

Floyd-Warshall 算法基本上适用于 av * v 邻接矩阵。它会考虑每个顶点，并**决定如果您可以通过该顶点，那将是*更短***的路线。这是对矩阵的所有 v^2 元素执行的恒定时间比较和插入操作（到 2D 数组中）。

这需要对每个顶点执行。因此，时间复杂度为**O(v^3)**，但具有非常小的常数值，使其在实现过程中非常可行。

因此，您只需要一个邻接矩阵格式的图形，一个存储新值的邻接矩阵和 3 个嵌套的 for 循环，总共运行 v * v * v 次。我猜这就是紧凑和简单的意思！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T03:57:38.777

> 但是，循环非常紧凑，程序非常短，以至于它在实践中运行得更好。

如果您查看该算法，则会发现有 3 个循环，其中只有 2 个语句嵌套在其中。唯一的逻辑是在第三个嵌套循环中完成的。如果您运行 n Djikstra's，逻辑将在第一个循环以及最后一个嵌套中完成，这很容易争论不干净。使用干净的三个循环，计算机也应该可以更轻松地管理内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T14:58:49.640

Dijkstra 的算法具有常见的数据结构是 O(E log v)，但 Fibonacci heap 将其改进为 O(E+v log v)，这是更复杂的数据结构，并且算法的常量工厂比 floyed 更大。查看此[链接](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Running_time)中的运行时间。

这个问题的差异与 q-sort 和 heap-sort 之间的差异相同******

# c - C 编程 - 带有 Switch 语句错误的左移

> ID：10779057
> 
> 赞同：0
> 
> 时间：2012-05-28T03:33:37.097
> 
> 标签：c, switch-statement

我试图在 switch 语句中实现移位运算符，但我无法获得输出。我试图做一个简单的左移，比如 '12 << 2' 应该返回 '12 << 2: 48' 这是我的代码：

```
#include <stdio.h>

void shift(){
    char op = 0;
    int x = 0;
    int y = 0;
    char buffer[1024];
    int iCont = -1;
    char c1 = 0;
    char c2 = 0;

    do
    {
        printf("\ninput: ");
        fgets(buffer, sizeof(buffer), stdin);
        if (sscanf(buffer, "%d %c%c %d", &x, &c1, &c2, &y)){}
            switch (op)
            {
            case '<<': printf("%d %c1%c %d = %d", x, c1, c2, y, x << y);
                break;
            case '>>': printf("%d %c1%c %d = %d", x, c1, c2, y, x >> y);
            default:
                break;
            }
        } while (iCont);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:42:35.900

在您的代码`op`中包含 value `0`。您正在打开从未分配过除 0 以外的值的值 op。

单引号也用于字符。`'<<'`没有多大意义，因为单引号中有两个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:37:33.303

`<<`不是一个字符。也不是`>>`。`op`作为一个角色，怎么可能永远等于其中任何一个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T03:53:20.857

switch 语句的控制，`op`必须等于 switch 语句的 case 之一才能运行。由于`op`被初始化为 0 并且不会改变，它永远不会等于`'>>'`或`'<<'`，因此这两种情况都不会执行。

其次，你的循环也没有多大意义，因为你似乎只想换一次。即使你确实想要那里的循环，它也只会在上面的代码中进行一次迭代，因为它被初始化为 -1，它在该行`iCont`中计算为 false 。`while(iCont)`

最后，正如其他答案中所说，您不想将 char ( `op`) 与多字符常量进行比较。

`op`您可以通过在代码中的某处进行设置来轻松解决此问题。您还可以更改`op`为整数并使 case 语句基于整数，例如：

```
switch(op)
{ case 0: //left shift
break;
case 1: //right shift
break;} 
```

# mysql-workbench - MySQL Workbench 图中的注释

> ID：10779058
> 
> 赞同：8
> 
> 时间：2012-05-28T03:33:51.963
> 
> 标签：mysql-workbench

我有一个在 MySQL Workbench 中设计的模式。我为表格添加了描述，并为列和视图添加了注释。

我创建了一个图表，我想查看图表中的注释和说明。有没有办法做到这一点？我注意到工具提示显示视图的注释，但不显示表或列的注释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T07:57:58.277

无法在图表中显示表格的注释。但是，出于文档目的，您可以在图表中添加文本注释。不幸的是，它们不会自动更新，因此您必须手动复制评论。

此外，您可以[创建功能请求](http://bugs.mysql.com)，以便可以选择在此处显示此类评论。

# c# - 使用 SQL Server CE 插入数据库

> ID：10779060
> 
> 赞同：0
> 
> 时间：2012-05-28T03:34:06.017
> 
> 标签：c#, sql-server-ce

我已经重新设计了我的项目 3 次，最后我想在我的应用程序失控之前问一下。我正在构建一个复杂的系统监控和报告生成应用程序。我一直在尝试找出哪种数据库方法最适合我的情况，我认为它是 SQL Server CE，因为我使用的是一台工作笔记本电脑，安装东西可能需要长达 1 周的时间。如果我应该使用更友好的应用程序，我愿意接受建议。

假设我坚持使用 SQL Server CE，将记录插入到`.sdf`有很多列的文件中的最佳方法是什么？例如，数据库中的表可以包含 100 列。它现在工作正常，但插入的每一行似乎需要大约 1 秒。代码如下所示（最终会有更多列）：

```
con.Open();

SqlCeTransaction trans = con.BeginTransaction();

String insertRecord = "INSERT INTO AS400_Objects(projectName, obBuildObjectName, " +
                    "obBuildLibrary, obBuildType, obBuildExtendedAttribute, obBuildFormatLevel, " +
                    "obBuildUserAttribute, obBuildChangeDate, obBuildCreationDate, " +
                    "obBuildCreatorSystem, obBuildCreatorUserProfile, obBuildJournal, " +
                    "obBuildJournalStatus, obBuildLastUsedDate, obBuildObjectSize, obBuildOwner, " +
                    "obBuildRestoreDate, obBuildSaveDate, obBuildSourceFile, " +
                    "obBuildSourceFileUpdatedDate, obBuildTextDescription, obBuildSystemVersion)" +
                    "VALUES(@projectName, @obBuildObjectName, @obBuildLibrary, @obBuildType, " +
                    "@obBuildExtendedAttribute, @obBuildFormatLevel, @obBuildUserAttribute, " +
                    "@obBuildChangeDate, @obBuildCreationDate, @obBuildCreatorSystem, " +
                    "@obBuildCreatorUserProfile, @obBuildJournal, @obBuildJournalStatus, " +
                    "@obBuildLastUsedDate, @obBuildObjectSize, @obBuildOwner, @obBuildRestoreDate, " +
                    "@obBuildSaveDate, @obBuildSourceFile, @obBuildSourceFileUpdatedDate, " +
                    "@obBuildTextDescription, @obBuildSystemVersion)";

SqlCeCommand cmd = new SqlCeCommand(insertRecord, con);
cmd.Transaction = trans;

cmd.Parameters.Clear();
cmd.Parameters.AddWithValue("@projectName", packageName);
cmd.Parameters.AddWithValue("@obBuildObjectName", od[i].getValue(ObjectDescription.NAME).ToString());
cmd.Parameters.AddWithValue("@obBuildLibrary", od[i].getValue(ObjectDescription.LIBRARY).ToString());
cmd.Parameters.AddWithValue("@obBuildType", od[i].getValue(ObjectDescription.TYPE).ToString());
cmd.Parameters.AddWithValue("@obBuildExtendedAttribute", od[i].getValue(ObjectDescription.EXTENDED_ATTRIBUTE).ToString());
cmd.Parameters.AddWithValue("@obBuildFormatLevel", "");
cmd.Parameters.AddWithValue("@obBuildUserAttribute", od[i].getValue(ObjectDescription.USER_DEFINED_ATTRIBUTE).ToString());
cmd.Parameters.AddWithValue("@obBuildChangeDate", changeDate);
cmd.Parameters.AddWithValue("@obBuildCreationDate", creationDate);
cmd.Parameters.AddWithValue("@obBuildCreatorSystem", od[i].getValue(ObjectDescription.CREATOR_SYSTEM).ToString());
cmd.Parameters.AddWithValue("@obBuildCreatorUserProfile", od[i].getValue(ObjectDescription.CREATOR_USER_PROFILE).ToString());
cmd.Parameters.AddWithValue("@obBuildJournal", od[i].getValue(ObjectDescription.JOURNAL).ToString());
cmd.Parameters.AddWithValue("@obBuildJournalStatus", journalStatus);
cmd.Parameters.AddWithValue("@obBuildLastUsedDate", lastUsedDate);
cmd.Parameters.AddWithValue("@obBuildObjectSize", od[i].getValue(ObjectDescription.OBJECT_SIZE).ToString());
cmd.Parameters.AddWithValue("@obBuildOwner", od[i].getValue(ObjectDescription.OWNER).ToString());
cmd.Parameters.AddWithValue("@obBuildRestoreDate", restoreDate);
cmd.Parameters.AddWithValue("@obBuildSaveDate", saveDate);
cmd.Parameters.AddWithValue("@obBuildSourcefile", od[i].getValue(ObjectDescription.SOURCE_FILE).ToString());
cmd.Parameters.AddWithValue("@obBuildSourceFileUpdatedDate", sourceFileUpdatedDate);
cmd.Parameters.AddWithValue("@obBuildTextDescription", od[i].getValue(ObjectDescription.TEXT_DESCRIPTION).ToString());
cmd.Parameters.AddWithValue("@obBuildSystemVersion", od[i].getValue(ObjectDescription.SYSTEM_LEVEL).ToString());

cmd.ExecuteNonQuery();
trans.Commit(CommitMode.Immediate);

cmd.Dispose();

con.Close();
con.Dispose(); 
```

基于这种情况，我可以做些什么来提高查询的性能？我来自 AS400 大型机世界，1 秒将给你数百行，如果不是数千行的话。该应用程序的最终结果是它将创建一个输出文件发送到某个地方，然后双击该文件会将所有这些数据加载到远程机器上。我看过`SqlCEAdapter`，但无法找到一个很好的解释来说明如何使用它来适应我的情况。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:55:46.973

你听说过数据库规范化吗？这避免了数据的重复，并减少了每个 INSERT 所需的列数。如果没有 CommitMode.Immediate，该过程也会运行得更快。最后，您可以使用 SqlCeUpdateableRecord 和 TableDirect 绕过查询进程或进行快速插入。

# java - Java 6 RegEx 匹配所有不在 Unicode 字母和标记类别中的字符

> ID：10779069
> 
> 赞同：2
> 
> 时间：2012-05-28T03:35:06.007
> 
> 标签：java, regex, unicode

我需要从字符串中删除所有非字母和标记（Unicode 类别）字符。目前我正在拆分并随后加入一个字符串，如下所示：

```
text.split("[\\p{P} \\t\\n\\r]") 
```

然而，我的正则表达式......严重不足。请帮忙。

**编辑** 我认为这会起作用：

```
text.split("[\\P{M}\\P{L}]") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:48:03.307

试试这个：

```
text = text.replaceAll("[^\\p{L}\\p{M}]", ""); 
```

[在http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)中查看更多信息

# javascript - Chrome 扩展按钮

> ID：10779071
> 
> 赞同：1
> 
> 时间：2012-05-28T03:35:16.830
> 
> 标签：javascript, google-chrome, google-chrome-extension

有没有办法在单击扩展按钮时执行脚本，而不是通过“弹出”打开然后单击弹出窗口中的按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:10:53.373

看看[这个](http://code.google.com/chrome/extensions/browserAction.html#event-onClicked)。弹出窗口是可选的。该按钮有一个“onClicked”事件。

看看[这个例子](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/api/browserAction/make_page_red/)。您会注意到[清单](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/api/browserAction/make_page_red/manifest.json?view=markup)没有定义弹出窗口。并且[后台页面](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/common/extensions/docs/examples/api/browserAction/make_page_red/background.js?view=markup)监听按钮的“onClicked”事件。

# javascript - jQuery 侦听所有文本输入更改

> ID：10779076
> 
> 赞同：9
> 
> 时间：2012-05-28T03:35:59.530
> 
> 标签：javascript, jquery, html, forms, events

我在表单中有一个输入元素，我希望能够在值更改时提取其值。看看这个小提琴：http: [//jsfiddle.net/spryno724/WaBzW/1/](http://jsfiddle.net/spryno724/WaBzW/1/)。

通过使用该`change`事件，我可以在输入失去焦点时显示来自文本输入的值。但是，当表单被重置或 JavaScript 清除文本输入的值时，该值不会更新。

***当对文本输入控件进行任何***更改时，是否有我可以监听的特定事件将被调度？

**我想避免变通方法，例如监听表单何时重置，或当清除按钮被按下时**。这是我的应用程序所做的简化示例，如果我尝试执行所有这些操作，它会很快变得疯狂。

感谢您的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T03:39:54.057

```
$(document).ready(function() {
    $('input.clear').click(function() {
        $('input.input').val('');
        $('p.display').text('The value of the text input is: ');
    });

    $('input.input').on('keyup change', function() {
       $('p.display').text('The value of the text input is: ' + $(this).val());
    });
})​ 
```

**[演示 1](http://jsfiddle.net/3tDFg/1/)**

可能此解决方案可以帮助您：

```
$(document).ready(function() {
    $('input.clear, input[type=reset]').on('click', function() {
        $('input.input').val('').change();
        $('p.display').text('The value of the text input is: ');
    });

    $('input.input').on('keyup change', function() {
        $('p.display').text('The value of the text input is: ' + $(this).val());
    });
});​ 
```

**[演示 2](http://jsfiddle.net/3tDFg/3/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T20:21:27.943

这个问题与另一个问题完全相同。请参阅投票数最高的答案作为我的问题的答案：

[JS 事件：挂钩文本输入上的值更改事件](https://stackoverflow.com/questions/1847893/js-events-hooking-on-value-change-event-on-text-inputs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T17:46:02.300

`val`jQuery的覆盖方法

**HTML**

`<input id='myInput' name='myInputField' value='v1'>`

**JS**

```
var myInput = $('#myInput');

//this will not trigger the change event
myInput.val('v2');

//override val method
var oldVal = myInput.val;
myInput.val = function(value){
   var returnVal = oldVal.call(this,value);
   myInput.change();
   return returnVal;
}

// this will trigger the change event
// myInput.val is overridden
myInput.val('v3'); 
```

> **注意**`myInput`这仅在从变量 调用 val 方法时才有效

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T03:47:12.767

尝试

```
$('#input').live('change',function() {         }) 
```

# php - 从 MySql (ASP.NET) 读取西里尔字母

> ID：10779080
> 
> 赞同：1
> 
> 时间：2012-05-28T03:36:30.853
> 
> 标签：php, asp.net, mysql

我有一个带表的 MySql DB

```
CREATE TABLE `pp` (
[...]
`Title` varchar(255) CHARACTER SET latin1 DEFAULT NULL,
[...]
) ENGINE=InnoDB DEFAULT CHARSET=cp1251 
```

该表已由 PHP 填充，并且有一个有效的 PHP 脚本可以读取数据并将其写入网页。PHP 使用“windows-1251”编码并且工作正常。

服务器端的变量是：

```
character_set_client:latin1
character_set_connection:latin1
character_set_database:utf8
character_set_filesystem:binary
character_set_results:latin1
character_set_server:latin1
character_set_system:utf8 
```

我正在开发一个 ASP.NET MVC3 应用程序，该应用程序（除其他外）读取该数据并在 windows-1251 编码视图中显示它们。我使用 MySql .NET Connector v.6.5.4 连接到数据库并读取数据。

问题是：生成的网页（即视图）上的西里尔数据已损坏。

我尝试了各种连接字符串

```
charset=cp1251   or
charset=latin1   or
charset=utf8 
```

此外，我尝试执行

```
SET NAMES cp1251   or 
SET NAMES latin1   or 
SET NAMES utf8 
```

连接后立即，但没有任何成功。

再次：在 PHP 中一切正常；在 ASP.NET 中没有。

我知道西里尔文本不应该存储在 latin1 列中，并且 PHP 可以正常工作，因为 cp1251 和 latin1 都是每字符 8 位编码并且没有数据转换。但我无法使用 ASP.NET 复制它。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:53:14.387

1 将字段字符集更改为“cp1251”或“utf8”，例如 -

```
ALTER TABLE `pp`
  CHANGE COLUMN `Title` `Title` VARCHAR(255) CHARACTER SET cp1251 COLLATE cp1251_general_ci DEFAULT NULL; 
```

2 在插入或选择之前设置连接字符集 -

```
SET NAMES cp1251; 
```

或者

```
SET NAMES utf8; 
```

# objective-c - 你如何在 Cocoa Touch 中检测到 UILabel 包含从右到左的语言？

> ID：10779083
> 
> 赞同：2
> 
> 时间：2012-05-28T03:37:05.367
> 
> 标签：objective-c, regex, cocoa-touch

我在两个[UILabel](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)中显示用户评论- 一个用于用户名，一个用于消息。两个标签具有相同的 X、Y 坐标，但消息标签前面带有与用户名宽度相等的空格。这种技术帮助我轻松地支持多行消息。

当用户编写阿拉伯语消息时会出现问题。阿拉伯语是从右到左的语言。这意味着，我必须在阿拉伯字符串的*末尾添加空格，而不是开头。*正如您在下面的屏幕截图中看到的那样，我没有进行区分，阿拉伯语消息进入了用户名。那么如何检测 UILabel 的文本属性（[NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)）是用从右到左的语言编写的？

![阿拉伯](../Images/883440513bd79fa9f438f93828398a71.png)

# 失败尝试 1：正则表达式

我试过使用[regexes](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)，但以下函数总是为每个字符串返回 false，包括阿拉伯语。

```
@implementation UILabel (position)

- (BOOL) containsArabic
{
    NSError* error;
    NSRegularExpression* regex = [NSRegularExpression
        regularExpressionWithPattern:@"\p{Arabic}" 
        options:0
        error:&error
    ];
    return error == nil 
        && [regex 
            numberOfMatchesInString:self.text 
            options:0 
            range:NSMakeRange(0, self.text.length)] > 0;
}

@end 
```

# 失败尝试 2：NSLocale

```
- (BOOL) containsArabic
{
    NSString *isoLangCode = (NSString*)CFStringTokenizerCopyBestStringLanguage(
       (CFStringRef)self.text, 
       CFRangeMake(
           0, 
           self.text.length
       )
    );
    NSLocaleLanguageDirection direction = [NSLocale lineDirectionForLanguage:isoLangCode];
    NSLog(@"++++++");
    NSLog(@"%@", self.text);
    NSLog(@"%d", direction);
    return direction == NSLocaleLanguageDirectionRightToLeft;
} 
```

输出没用：

```
2012-05-28 10:59:11.454 [2110:707] MANCHESTER CITY VS MANCHESTER UNITED LIVE HD
2012-05-28 10:59:11.461 [2110:707] 0
2012-05-28 10:59:11.474 [2110:707] ++++++
2012-05-28 10:59:11.477 [2110:707] tak
2012-05-28 10:59:11.484 [2110:707] 0
2012-05-28 10:59:11.511 [2110:707] ++++++
2012-05-28 10:59:11.513 [2110:707] ŸàŸÜŸáÿßÿ±ŸÉ ÿ≥ÿπŸäÿØ
2012-05-28 10:59:11.520 [2110:707] 3
2012-05-28 10:59:11.704 [2110:707] ++++++
2012-05-28 10:59:11.712 [2110:707] ŸÜŸáÿßÿ±ŸÉ ÿ≥ÿπŸäÿØ
2012-05-28 10:59:11.740 [2110:707] 3
2012-05-28 10:59:11.763 [2110:707] ++++++
2012-05-28 10:59:11.767 [2110:707] i think i am close
2012-05-28 10:59:11.772 [2110:707] 3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T04:20:54.640

此答案假设您使用的是 ARC：

```
NSString *stringToTest = @"Some Foreign Language";

NSString *isoLangCode = (__bridge_transfer NSString*)CFStringTokenizerCopyBestStringLanguage((__bridge CFStringRef)stringToTest, CFRangeMake(0, stringToTest.length));

NSLocaleLanguageDirection direction = [NSLocale characterDirectionForLangauge:isoLangCode]; 
```

然后，您可以使用 NSLocale API 的 lineDirectionForLanguage: 方法来确定语言行方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-01T11:51:25.190

在以下函数中添加以下代码

```
- (BOOL)textView:(UITextView *)aTextView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
      NSString *isoLangCode = (__bridge_transfer NSString*)CFStringTokenizerCopyBestStringLanguage((__bridge CFStringRef)text, CFRangeMake(0, text.length));

      if([isoLangCode isEqualToString:@"ar"])
      {
         //Arabic
      }
      else
      {
         //Other language
      }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T06:43:26.770

```
- (BOOL)Direction:(NSString *)text
{
    NSString *isoLangCode = (__bridge_transfer NSString*)CFStringTokenizerCopyBestStringLanguage((__bridge CFStringRef)text, CFRangeMake(0, text.length));

    if([isoLangCode isEqualToString:@"ar"])
    {
        return YES;
    }
    return NO;
} 
```

# mysql - 论坛 MySQL 类别、主题、帖子

> ID：10779090
> 
> 赞同：0
> 
> 时间：2012-05-28T03:39:24.953
> 
> 标签：mysql, multithreading, forum, categories, posts

我知道有很多类似的线程，我查看了很多，但无法找到解决方案。因此，我有一张名为“论坛”的表，其中包含我的类别 (num_type=0)、线程 (num_type=1) 和帖子 (num_type=2)。有一个 num_parent 列将线程/帖子与父类别/线程相关联。通过我遇到问题的查询，我试图获取所有类别、每个类别中的总线程数以及每个类别的线程内的总帖子数。为此，我正在尝试：

```
select F.*
, count(F2.num_Forum) as num_ThreadCount
, count(F3.num_Forum) as num_PostCount
, max(F3.dte_Created) as dte_LastPost
from forum F
left outer join forum F2
on F.num_Forum=F2.num_Parent and F2.num_Type=1
left outer join forum F3
on F2.num_Forum=F3.num_Parent and F3.num_Type=2
where F.num_Type=0 and F.num_Inactive=0
group by F.num_Forum
order by F.num_Sticky desc, F.dte_Created desc 
```

dte_LastPost 和 num_PostCount 正确显示。num_ThreadCount 不是。如果我将查询分成两个单独的查询：

```
select F.* 
, count(F2.num_Forum) as num_ThreadCount
from forum F
left outer join forum F2
on F.num_Forum=F2.num_Parent and F2.num_Type=1
where F.num_Type=0 and F.num_Inactive=0
group by F.num_Forum
order by F.num_Sticky desc, F.dte_Created desc

select count(F3.num_Forum) as num_PostCount
from forum F2
left outer join forum F3
on F2.num_Forum=F3.num_Parent and F3.num_Type=2
where F2.num_Type=1 and F2.num_Inactive=0
group by F2.num_Forum
order by F2.num_Sticky desc, F2.dte_Created desc 
```

我得到了每个的正确计数。但是，我需要以某种方式将这些组合起来，以便我知道 num_PostCount 对应于哪个类别。我看到单独执行它的最大区别是，在第二个查询中，我可以按 F2.num_Forum 进行分组。我尝试将它添加到集团查询中，但它并没有解决我的问题。有人知道我需要做什么来修复我的第一个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T00:57:49.667

好的，我能够找出链接三个表的查询，而无需在 Posts 表中放置一列以将其直接链接到类别。相反，Categories 链接到 Threads，Threads 链接到 Posts，在链的下游和上游。

```
select C.*
, count(TP.num_Thread) as num_ThreadCount
, coalesce(sum(TP.num_PostCount), 0) as num_PostCount
from forum_categories C 
left join 
(select count(P.num_Post) as num_PostCount, 
T.num_Thread, T.num_CParent, T.num_Inactive
from forum_threads T
left outer join forum_posts P
on P.num_TParent=T.num_Thread and P.num_Inactive=0
where T.num_Inactive=0
group by T.num_Thread) TP 
on C.num_Category=TP.num_CParent and TP.num_Inactive=0
where C.num_Inactive=0
group by C.num_Category
order by C.num_Sticky desc, C.dte_Created desc 
```

# excel - Excel 2010 VBA 反斜杠 (\) 运算符

> ID：10779091
> 
> 赞同：1
> 
> 时间：2012-05-28T03:39:35.227
> 
> 标签：excel, vba

在学习 VBA 时，我阅读的每个资料都告诉我，`\`运算符执行整数除法。所以我想我可以用它来提取浮点数的整数部分。

我有一个这样的电子表格：

```
A = 5
B = 50% 
```

我需要计算：`C = A x B`，向下舍入到最接近的整数（即，任何 2.01、2.1、2.9、2.99 等都应向下舍入为 2）。

我在想我可以这样做：

```
C = (A * B) \ 1 
```

但它不起作用 - 在我看来，浮点部分在执行整数除法之前被四舍五入（即，2.25 被取为 3）。

我现在已经这样做了：

```
 C = (A * B - 0.5) \ 1 
```

这在某些情况下不起作用（其中`A * B`恰好等于整数，可能是表示问题）。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:19:26.600

当心：

```
any 2.01, 2.1, 2.9, 2.99 etc. all should be rounded down to 3 
```

那么您不是在寻找`nearest integer`，而是在寻找上限功能。最近的整数听起来像 Round 或 Fix 函数（你现在有作业：寻找它们之间的差异！）

对于吊顶功能，请看这里：

在 Excel 中使用的天花板函数：

[http://www.excelforum.com/excel-programming/612151-how-to-use-standard-excel-function-in-vba.html](http://www.excelforum.com/excel-programming/612151-how-to-use-standard-excel-function-in-vba.html)

VBA吊顶功能代码：

[http://www.tek-tips.com/faqs.cfm?fid=5031](http://www.tek-tips.com/faqs.cfm?fid=5031)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:52:01.307

呃。看来我可以做到：

整数（A * B）

得到我想要的。

# google-drive-api - Google Drive API 是基于 JSON 的 API 还是旧的基于 XML 的 API？

> ID：10779092
> 
> 赞同：0
> 
> 时间：2012-05-28T03:39:51.810
> 
> 标签：google-drive-api

我正在开发一个使用 Google Drive 的 iOS 应用程序。与 Google Drive API 一起使用什么？：

code.google.com/p/google-api-objectivec-client/

或者

code.google.com/p/gdata-objectivec-client/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:25:22.830

更新：Objective-C 库现在支持 Drive API 的第 2 版

Drive API 是新的基于 JSON 的 API 之一，但是[Objective-C 库](http://code.google.com/p/google-api-objectivec-client/)还不支持它。

您仍然可以将旧的基于 XML 的 Documents List API 与[GData 库](http://code.google.com/p/gdata-objectivec-client/)一起使用，Documents List 和 Drive API 使用相同的资源（即文档）。

# windows - msi.h 在 dll 中给出编译错误

> ID：10779095
> 
> 赞同：2
> 
> 时间：2012-05-28T03:40:02.340
> 
> 标签：windows, visual-c++

我是使用 DLL 的新手。虽然我在 Linux 上做过一些严肃的 C++ 编程并且知道 DLL 是什么。我需要使用自定义操作编写 Windows 安装程序。为此，我在 Visual Studio 2010 中创建了一个新的 DLL 项目。当我尝试在 StdAfx.h 文件中包含 msi.h 时，出现以下错误：

```
1>------ Build started: Project: CustomAction, Configuration: Debug Win32 ------
1>  DllEntry.cpp
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msi.h(86): error C2146: syntax error : missing ';' before identifier 'WINAPI'
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msi.h(86): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msi.h(86): error C2146: syntax error : missing ';' before identifier 'MsiCloseHandle'
1>c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msi.h(86): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
...................... 
```

该项目除了包含 StdAfx Header 和 StdAfx.h 文件的 StdAfx.cpp 之外什么都没有，它是：

```
#include   <msi.h>
#include   <msiquery.h>
#include   <stdio.h> 
```

我尝试在项目的链接器输入属性中添加 msi.lib 的路径。它没有用。我还尝试添加到 lib 文件夹的路径，包括 windows sdk 目录的文件夹和 bin 文件夹，这也不起作用。造成这种情况的原因是什么，以及是否有人可以向我提供有关在 Windows 安装程序中使用自定义操作的任何教程，因为我是该领域的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T03:43:20.153

看起来`<msi.h>`取决于`WINAPI`宏。因此，您可能需要首先包括`<windows.h>`：

```
#include <windows.h>
#include <msi.h> 
```

使用 DLL 时，头文件没有什么特别之处。头文件的工作方式与您已经习惯的方式相同。

# iphone - 如何使用 AssetLibrary 获取编辑后的图像

> ID：10779096
> 
> 赞同：0
> 
> 时间：2012-05-28T03:40:08.147
> 
> 标签：iphone, ios, image

问题是我可以使用 AssetLibrary 获取图像，但不能获取已编辑的图像。

首先我使用 iPhone 的应用程序相机拍照，然后我编辑照片，只是剪掉照片。

在我的应用程序中，我想获取编辑后的图像。

如果我使用 UIImagePickerController 委托方法

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo 
```

我可以用图像得到编辑后的图像。

但是如果我使用该方法

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

并使用信息获取参考网址，

使用 referenceURL 我可以使用 AssetLibrary 来获取图像。

关键是图像始终是编辑前的原始图像，而不是我编辑过的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:26:36.050

您可以像这样编辑图像 -

```
UIImage* image = [info objectForKey:UIImagePickerControllerEditedImage]; 
```

# jsf-2 - 仅当验证成功时如何执行 a4j:commandLink oncomplete？

> ID：10779097
> 
> 赞同：10
> 
> 时间：2012-05-28T03:40:31.853
> 
> 标签：jsf-2, richfaces, validation

我正在使用 JSF2、Richfaces4 和 Spring。我有一个命令链接。在执行时我保存记录并在完成时执行搜索以显示如下代码所示的记录。问题是`fireSearch()`即使表单中存在验证错误，oncomplete 也会执行。我`fireSearch()`只需要在记录成功保存时执行。

仅当验证成功时，我如何才能完成？

```
<a4j:commandLink styleClass="button" action="#{myBean.save}" render="detail_form" execute="@form" oncomplete="fireSearch()">
<span> Save </span>
</a4j:commandLink> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-28T03:49:37.563

`oncomplete`RichFaces 在属性中支持基于请求的 EL 评估。所以你应该能够[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)像 JS 条件一样打印。

例如，

```
oncomplete="if (#{!facesContext.validationFailed}) fireSearch()" 
```

如果验证失败，这将最终导致

```
oncomplete="if (false) fireSearch()" 
```

因此不会调用该函数。

# visual-studio-2010 - 没有找到 OSG 插件？

> ID：10779098
> 
> 赞同：0
> 
> 时间：2012-05-28T03:41:17.850
> 
> 标签：visual-studio-2010, visual-c++, openscenegraph

OSG 报告它找不到像文本插件或 jpeg 插件这样的插件。我已经[从源代码构建了 OSG，甚至构建了第三方依赖项](https://stackoverflow.com/questions/10779029/how-to-build-osg-from-source-and-third-party-dependencies/10779044#10779044)。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:48:45.793

摆脱此错误的正确方法是打开 OpenSceneGraph.sln 文件并在解决方案资源管理器中搜索名为“INSTALL”的项目。右键单击它并构建它。这样做，将允许 OSG 自动找到插件文件夹和其中的 DLL。

如果您的错误是因为找不到位于 osg build 的 bin 文件夹中的 DLL，您只需转到您的文件夹`project properties > configuration settings > debug > working directory`并将其设置为该`osg_build\bin`文件夹。

当然，当您将应用程序移植到未安装 OSG 的系统时，您必须将必要的 DLL 移动到项目文件夹并将工作目录重置到保存新 DLL 的位置。

摆脱此错误的更快方法（对于不耐烦的人），您只需从`osg build > bin`文件夹和`osg build > bin > plugins`文件夹中复制必要的 DLL（或所有 DLL，只是为了确定）并将它们粘贴到包含您的文件夹中示例程序的 exe（或 ocx）。

当 osg 找不到您打算使用的 jpeg 或 png 文件的路径时，也会发生此错误。`OSG_FILE_PATH`只需通过设置环境变量来显示路径。这是一个标准的 osg 环境变量，您不必在项目设置中提及它。只需创建它，osg 就会自动检测您为此环境变量设置的路径。

很多时候 OSG 不能工作，因为你没有在`Linker > Input > Additional Dependencies`. 确保你检查。祝一切顺利...

# c++ - 根据用户输入对文件进行排序

> ID：10779102
> 
> 赞同：0
> 
> 时间：2012-05-28T03:41:44.227
> 
> 标签：c++, sorting, file-read

我正在尝试根据用户选择的 2 个文件对文件进行排序。我正在使用一个字符串变量并将其传递给，`instream()`但它不断进入`if`表明文件已损坏或不存在的语句。我知道它存在，因为当我硬编码文件名时，它工作得非常好！我确定它很简单，但我就是想不通。我对 c++ 很陌生，所以请仔细回答你的问题，以便我理解和学习。提前致谢！

```
#include <iterator>
#include <algorithm>
#include <vector>
#include <fstream>
#include <iostream>
#include <string>
using namespace std;

std::string file = "";
std::ofstream out("outputfile.txt");
std::vector<int> numbers;
std::string sortType = "";

void sort(std::vector<int>);
void MergeSort(vector<int> &numbers);

int main()
{
  std::cout << "Which type of sort would you like to perform(sort or mergesort)?\n";
  std::cin >> sortType;

  std::cout << "Which file would you like to sort?\n";
  std::cin >> file;

  std::ifstream in(file);
  //Check if file exists
  if(!in)
  {
    std::cout << std::endl << "The File is corrupt or does not exist! ";
    return 1;
  }

  // Read all the ints from in:
  std::copy(std::istream_iterator<int>(in), std::istream_iterator<int>(),
            std::back_inserter(numbers));

  //check if the file has values
  if(numbers.empty())
  {
      std::cout << std::endl << "The file provided is empty!";
      return 1;
  } else
  {
      if(sortType == "sort")
      {
          sort(numbers);
      }else
      {
          MergeSort(numbers);
      }

      // Print the vector with tab separators:
      std::copy(numbers.begin(), numbers.end(),
                std::ostream_iterator<int>(std::cout, "\t"));
      std::cout << std::endl;

        // Write the vector to a text file
      std::copy(numbers.begin(), numbers.end(),
                std::ostream_iterator<int>(out, "\t"));
        std::cout << std::endl;
  }
  return 0;
}

void sort(std::vector<int>)
{
  // Sort the vector:
  std::sort(numbers.begin(), numbers.end());
  std::unique(numbers.begin(), numbers.end());

  return;
}

vector<int> Merge(vector<int> &left, vector<int> &right)
{
    std::vector<int> result;

    while (left.size() > 0 && right.size() > 0)
    {
        if (left[0] <= right[0])
        {
            result.push_back(left[0]);
            left.erase(left.begin());
        } else
        {
            result.push_back(right[0]);
            right.erase(right.begin());
        }
    }

    if (left.size() > 0)
    {
        result.insert(result.end(), left.begin(), left.end());
    } else
    {
        result.insert(result.end(), right.begin(), right.end());
    }
    return result;
}

void MergeSort(vector<int> &numbers)
{
    if (numbers.size() <= 1)
    {
        return;
    }

    // split vector into two peices
    vector<int> left, right;
    unsigned int Middle = numbers.size() / 2;

    for (unsigned int i = 0; i < Middle; i++)
    {
        left.push_back(numbers[i]);
    }

    for (unsigned int i = Middle; i < numbers.size(); i++) {
        right.push_back(numbers[i]);
    }

    MergeSort(left);
    MergeSort(right);
    numbers = Merge(left, right);
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:47:00.310

您仍在检查 name 给出的文件`""`。当你把线

```
std::ifstream in(file); 
```

它打开流到由名称“”（该`file`点的值）指定的文件。后来你说

```
if (!in) 
```

没有实际更新使用的文件。

试试这个：

```
std::ifstream in; //no file specified

//the following comes before if (!in)
in.open (file); 
```

这将打开流到输入的值`file`。

一个更好的方法是只声明并打开文件来代替第二行并丢失第一行：

```
std::ifstream in (file); //after they input the filename 
```

如果您没有任何理由，使用全局变量通常是个坏主意。最好在函数中传递它们，或者将它们全部包含在一个类中。

另外，我注意到你已经声明了`using namespace std;`，但仍然使用`std::vector`等。我肯定会选择后者并删除前者。不过，请注意将分辨率添加到缺少它的几件事上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:45:11.157

`open()`在检查状态之前，您需要先查看该文件。

# javascript - jquery - 如何在我的 ID 选择器中看到通配符

> ID：10779103
> 
> 赞同：0
> 
> 时间：2012-05-28T03:41:55.477
> 
> 标签：javascript, jquery, html

最初我会在页面周围隐藏一堆不同的内容......

```
$('#objective_details, #time_estimate_details, #team_members_details, #resources_details').hide(); 
```

有没有办法做某种通配符，比如

```
$('#*_details').hide(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T03:44:32.547

是的，使用[以 selector 结尾的属性](http://api.jquery.com/attribute-ends-with-selector/)：

```
$('[id$="_details"]') 
```

不过，这比通过 id 选择要慢得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T03:43:02.807

使用 CSS 类。对于每个带有“详细信息”的标签或元素，应用一个类：

```
<p class="details"> ... </p>
<div class="details"> ... </div>
<section class="details"> ... </section> 
```

然后做：

```
$('.details').hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T03:46:05.787

`$('[id$=_details]').hide();`

[http://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:10:22.600

```
jQuery('div[id$="_details"]'); // faster I suppose

// Following also works using "." (-may be as of only jQuery 1.6 +)
jQuery('div.[id$="_details"]') 
```

# android - 如何获取子文本视图的 clicklistener 以获取可扩展列表？

> ID：10779112
> 
> 赞同：0
> 
> 时间：2012-05-28T03:43:40.937
> 
> 标签：android, expandablelistview, onclicklistener

我目前正在为 Expandablelist 中的子项使用自定义布局，其中包括 2 个不同的文本视图和一个图像视图。此外，它每次都会有 1 个孩子。我能够在适配器中获取 clicklistener，但无法在活动中获取它。

我也尝试在 onChildClick() 方法中获取单击侦听器事件，但它不起作用。

我在不同的活动中使用这个适配器，所以我想为活动本身中的一个文本视图设置点击监听器。

请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:01:23.617

我能够完成这项工作，我`android:onClick="textClickHandler">`在布局文件中添加了监听器，如下所示在我的活动中：

```
public void textClickHandler(View view){

        if(view.getId() == R.id.textMore){
            Toast.makeText(mContext, "More Text Clicked.", Toast.LENGTH_LONG).show();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:56:07.170

您不能将侦听器设置为`View`from `Activity`（如果我了解您要做什么）。一种方法是：

*   使您的适配器具有`boolean`您在实例化适配器时设置的值（这将告诉您适配器是否属于应该具有侦听器的`Activity`位置（例如）。如果该值是，那么您将确保不在 ) 上设置一个监听器。`TextView``true``false``TextView`
*   在自定义适配器的方法中设置所需的侦听器`TextView`（仅当先前的值为 时`true`，对于其他活动，您将简单地忽略这部分） 。`getChildView`
*   在该`onClick`视图的方法中`OnCLickListener`使用`Context`您在自定义适配器的构造函数中传递的。将其投射到所需的活动并根据需要使用它。一种更优雅的方法是让所需的`Activity`实现自定义接口（在单击时通知您`TextView`）。`Activity`然后在适配器中创建一个具有该接口类型的字段，您将在实例化侦听器时将其设置为指向您的。单击时`TextView`调用上面该字段的方法并通知`Activity`发生了某些事情并且它应该做一些事情。

# javascript - 如何使用箭头键以百分比移动 div

> ID：10779113
> 
> 赞同：0
> 
> 时间：2012-05-28T03:44:30.953
> 
> 标签：javascript, jquery, html, responsive-design

我从[stackoverflow 上](https://stackoverflow.com/questions/4950575/how-to-move-a-div-with-arrow-keys)的另一个问题中得到了这个脚本，它运行良好。该脚本以 px 为单位更新元素，我特别喜欢通过按住向上+向左箭头键对角移动元素的方式。

我现在的问题是：是否可以更改脚本，以便以百分比设置和更新元素的值？

这样做的原因是我正在开发一个具有响应式设计的网站，并且我需要元素相对于窗口大小保持（和移动）在页面上。我试图弄清楚，但到目前为止还没有成功。

这是脚本：

HTML

```
<div id="pane">
    <div id="box"></div>
</div> 
```

CSS

```
#pane {
    position:relative;
    width:300px; height:300px;
    border:2px solid red;
}

#box {
    position:absolute; top:140px; left:140px;
    width:20px; height:20px;          
    background-color:black;
} 
```

JavaScript

```
var pane = $('#pane'),
    box = $('#box'),
    w = pane.width() - box.width(),
    d = {},
    x = 3;

function newv(v,a,b) {
    var n = parseInt(v, 10) - (d[a] ? x : 0) + (d[b] ? x : 0);
    return n < 0 ? 0 : n > w ? w : n;
}

$(window).keydown(function(e) { d[e.which] = true; });
$(window).keyup(function(e) { d[e.which] = false; });

setInterval(function() {
    box.css({
        left: function(i,v) { return newv(v, 37, 39); }, //Function should set values in %
        top: function(i,v) { return newv(v, 38, 40); }   //here for left and top
    });
}, 20); 
```

咖啡脚本

```
jQuery ->       
    pane = $('body')
    box = $('.myDiv')
    w = pane.width() - box.width()
    c = [37,38,39,40] # Set key values for arrow keys in an array
    d = []
    x = 4

    newv = (v,a,b) ->
        n = parseInt(v, 10) - (if d[a] then x else 0) + (if d[b] then x else 0)
        if n < 0 then 0 else if n > w then w else n

    $(window).keydown((e) ->
        d[e.which] = true
    )

    $(window).keyup((e) -> 
        d[e.which] = false
        if true not in d and e.which in c #Check that all arrow keys are released

        divID = $('.myDiv').attr('id')  # Grab values from the element
        top = $('.myDiv').css('top')
        left = $('.myDiv').css('left')

        setTimeout ->  #Set a timeout and then send element values with Ajax to database to preserve state of element for next time window is opened
            $.ajax(
                type: "PUT"
                url: "/url/to/update/database"
                data:
                    positiontop: top
                    positionleft: left
            )
            ,1000
         )

    setInterval ->
        box.css
            left: (i,v) ->
                newv(v, 37, 39)
            top: (i,v) -> 
                newv(v, 38, 40)
    ,40 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:07:32.527

根据您的评论，您走在正确的轨道上。你必须弄清楚他的代码在做什么。他正在使用您可能不熟悉的[三元运算符。](https://stackoverflow.com/questions/1788917/javascript-ternary-operator)我将使用他的返回变量行来帮助解释它。

```
return n < 0 ? 0 : n > w ? w : n; 
```

这就是说，如果 n 小于零或大于框宽度，则返回 n。否则不要管它，因为我们处于一个边界。在您的情况下，您希望它返回`n > 0 or < 100`。然后您只需将其更改为以 % 而不是 px 的形式返回。你可以通过附加'%'来做到这一点。

[http://jsfiddle.net/bDMnX/332/](http://jsfiddle.net/bDMnX/332/)

```
w = 100; //pane.width() - box.width(),

function newv(v,a,b) {
    var n = parseInt(v, 10) - (d[a] ? x : 0) + (d[b] ? x : 0);
    //console.log((n < 0 ? 0 : n > w ? w : n) + '%');   
    return (n < 0 ? 0 : n > w ? w : n) + '%';
} 
```

我将把边界和增量留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:18:06.783

好的，这就是我最终要做的。它可能可以使用一些调整来使代码更高效，并且我可能还会使百分比计算值使用一位小数，以使 div 的移动更平滑。

我在使用 Firefox 和 Opera 时遇到了一个问题：在**setInterval 函数**中，**v**值以像素为单位返回。所以我添加了**v = box[0].style.left**和**v = box[0].style.top**以在所有浏览器中以百分比形式返回值。

由于浏览器窗口并不总是正方形，我还添加了另一个函数来分别计算宽度和高度。

JavaScript

```
var pane = $(window),
    box = $('#box'),
    w = (pane.width() - box.width())/pane.width()*100,
    h = (pane.height() - box.height())/pane.height()*100,
    d = {},
    x = 1;

//Caclulate height movement and window height bounds in %
function newvHeight(v,a,b) {
    v = box[0].style.top  //Grab :top value of the #box div as % in all browsers
    var n = parseInt(v, 10) - (d[a] ? x : 0) + (d[b] ? x : 0);
    return (n < 0 ? 0 : n > h ? h : n) + '%';
}

//Calculate width movement and window width bounds in %
function newvWidth(v,a,b) {
    v = box[0].style.left   //Grab :left value of the #box div as % in all browsers
    var n = parseInt(v, 10) - (d[a] ? x : 0) + (d[b] ? x : 0);
    return (n < 0 ? 0 : n > w ? w : n) + '%';
}

$(window).keydown(function(e) { d[e.which] = true; });
$(window).keyup(function(e) { d[e.which] = false; });

setInterval(function() {
    box.css({
        left: function(i,v) { return newvWidth(v, 37, 39); },   //Function should set values in %
        top: function(i,v) { return newvHeight(v, 38, 40); }    //here for left and top
    });
}, 20); 
```

# android - 如何将填充或边距设置为线性布局？

> ID：10779115
> 
> 赞同：6
> 
> 时间：2012-05-28T03:44:39.650
> 
> 标签：android, layoutparams

我有一个线性布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_menu"
android:layout_width="fill_parent"
android:layout_height="70px"
android:layout_alignParentBottom="true"
android:background="@drawable/footer_bar"
android:gravity="center" >
</LinearLayout> 
```

当我设定条件

```
if (constant.getscreenresolution() >= 800) {
    //i want to make it height * 2
} 
```

那么如何设置`layout params`呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T03:51:11.207

对于填充：

```
LinearLayout mLayout = (LinearLayout)findViewById(R.id.layout_menu);
mLayout.setPadding(left, top, right, bottom); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-01T05:37:24.257

```
LinearLayout mLayout = (LinearLayout)v.findViewById(R.id.ll_winfowindo);
int left= (int) activity.getResources().getDimension(R.dimen._18sdp);
int top=(int) activity.getResources().getDimension(R.dimen._22sdp);
int right=(int) activity.getResources().getDimension(R.dimen._18sdp);
int bottom=(int) activity.getResources().getDimension(R.dimen._34sdp);
mLayout.setPadding(left, top, right, bottom); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-28T03:48:47.287

希望这对你有帮助

```
LinearLayout.LayoutParams layout_param= new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.fill_parent,
                height * 2);
mLayout = (LinearLayout) findViewById(R.id.layout_menu);
mLayout.setLayoutParams(layout_param); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T03:52:43.207

你不应该这样做。首先，您使用像素 (px) 而不是与设备无关的像素 (dp) 这样做会创建仅适用于特定设备屏幕配置的 UI。您需要了解 Android 如何解决屏幕密度的变化，以便您的应用与屏幕密度无关。从这里开始：

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-01T05:41:40.370

向线性布局添加边距：-

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
     LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

layoutParams.setMargins(30, 20, 30, 0); 
```

# cocoa - 如何在 Xcode 4.3 中实现拆分按钮？

> ID：10779120
> 
> 赞同：0
> 
> 时间：2012-05-28T03:45:17.180
> 
> 标签：cocoa, split-button

我想在我的 Mac 应用程序中实现按钮，例如 Xcode 菜单栏上的拆分按钮。怎么做？

提前致谢！

![在此处输入图像描述](../Images/ffca46bc32889ce15aa4e88e3f821d50.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:08:22.813

您要查找的课程是`NSSegmentedControl`. [在官方文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSegmentedControl_Class/Reference/Reference.html)中阅读它。

# ruby-on-rails - Rails 性能测试中的 ruby -prof 错误

> ID：10779121
> 
> 赞同：7
> 
> 时间：2012-05-28T03:45:20.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-prof

我正在创建 Rails 性能测试，如[Rails Guide](http://guides.rubyonrails.org/performance_testing.html#installing-gc-patched-mri)中所述，但我遇到了 ruby​​-prof 问题。

我正在使用 Ruby 1.9.2-p0（尽管在 p320 上遇到了同样的问题）和 Rails 3.1.0。

[我对与此示例](http://guides.rubyonrails.org/performance_testing.html#controller-example)等效的控制器进行了非常简单的测试。

根据[指南](http://guides.rubyonrails.org/performance_testing.html#using-ruby-prof-on-mri-and-ree)，我需要安装 ruby​​-prof 才能使用性能测试。果然，如果我在没有它的情况下运行我的性能测试，我会得到：

> 在 Gemfile 中将 ruby​​-prof 指定为应用程序的依赖项以运行基准测试。

如果我按照指南对信件的说明进行操作，我会将其添加到我的 Gemfile 中：

> gem 'ruby-prof', :git => 'git://github.com/wycats/ruby-prof.git'

...并从 wycats 存储库获取版本 0.11.0。当我运行测试时，我收到此错误：

```
/Users/craig/.rvm/gems/ruby-1.9.2-p0/bundler/gems/ruby-prof-ffae61a89553/lib/ruby-prof/abstract_printer.rb:44:in `inspect': undefined method `to_s' for #<Class:0x000001025a3f18> (NoMethodError)
from /Users/craig/.rvm/gems/ruby-1.9.2-p0/bundler/gems/ruby-prof-ffae61a89553/lib/ruby-prof/abstract_printer.rb:44:in `full_name'
... 
```

但是“wycats”似乎不是 ruby​​-prof 的规范 Github 存储库。该文档是指[rdp](https://github.com/rdp/ruby-prof) (Roger Pack)。如果我改用那个 repo：

> gem 'ruby-prof', :git => 'git://github.com/rdp/ruby-prof.git'

...我得到版本 0.11.2，并得到这个错误：

> /Users/craig/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.1.0/lib/active_support/testing/performance/ruby.rb:39:in `run': undefined method`values' for [#]:Array ( NoMethodError) 来自 /Users/craig/.rvm/gems/ruby-1.9.2-p0/gems/activesupport-3.1.0/lib/active_support/testing/performance.rb:140:in `run_profile' ...

如果我直接使用来自 ruby​​gems 的 gem（同样，版本 0.11.2），我会得到同样的错误：

> 宝石'红宝石教授'

任何想法出了什么问题，或者如何解决它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T06:47:09.853

问题出在 activesupport-3.2.2\lib\active_support\testing\performance\ruby.rb 中。

将第 39 行从：

```
@total = @data.threads.sum(0) { |method_infos| method_infos.max.total_time } 
```

至：

```
@total = @data.threads.sum(0) {|thread| thread.top_method.total_time} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T01:12:26.540

要使用最新的 ruby​​-prof 版本，您需要 rails 3.2.3，我不知道您可以在 rails 3.1 中使用哪个 ruby​​-prof 版本，也许您可​​以从 activesupport 3.2 复制 lib/active_support/testing/performance/ruby.rb。 3

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T15:42:44.343

Ruby on Rails 3.2.6 已经纠正了这个问题。 [https://github.com/rails/rails/blob/v3.2.6/activesupport/lib/active_support/testing/performance/ruby.rb](https://github.com/rails/rails/blob/v3.2.6/activesupport/lib/active_support/testing/performance/ruby.rb)

第 39 行

```
@total = @data.threads.sum(0) { |thread| thread.methods.max.total_time } 
```

在 Rails 3.2.3
[https://github.com/rails/rails/blob/v3.2.3/activesupport/lib/active_support/testing/performance/ruby.rb](https://github.com/rails/rails/blob/v3.2.3/activesupport/lib/active_support/testing/performance/ruby.rb)

这是：

```
@total = @data.threads.values.sum(0) { |method_infos| method_infos.max.total_time } 
```

看起来**values**方法在这里失败了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T04:57:08.513

我遇到过同样的问题。我通过为我的 Rails 版本安装正确的 ruby​​-prof 版本来修复。

所以，我使用的是 2011 年 6 月 16 日发布的 Rails 3.0.9（根据[https://rubygems.org/gems/rails/versions](https://rubygems.org/gems/rails/versions)）。

然后，我检查了在同一日期发布的 ruby​​-prof。它是 2011 年 7 月 6 日发布的 0.10.8。

安装完上述内容后，我得到了它的工作。某些分析指标可能不受支持。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T08:01:12.910

在我使用 Rails 3.2.9 的情况下，我从项目中删除了自动生成的目录“test/performence”。

# android - 我如何知道Android中的系统何时重新启动服务？

> ID：10779122
> 
> 赞同：0
> 
> 时间：2012-05-28T03:45:34.030
> 
> 标签：android, service, restart

我想知道android系统重启服务的时间。这次有什么办法可以得到吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-28T03:47:58.547

中提琴。

```
public class MyService extends Service {
    private long startTime;

    public void onCreate() {
        super.onCreate();
        startTime = System.currentTimeInMillis();
    }
} 
```

# node.js - node.js async.series 不工作

> ID：10779123
> 
> 赞同：8
> 
> 时间：2012-05-28T03:45:41.713
> 
> 标签：node.js, asynchronous, node-async

这段代码直接取自以下示例：[https ://github.com/caolan/async#seriestasks-callback](https://github.com/caolan/async#seriestasks-callback)

```
var async = require("async");
async.series([
    function() { console.log("a"); },
    function() { console.log("b"); }
], function(err, results){
    console.log(err);
    console.log(results);
}); 
```

但是它不起作用。它在打印“a”后停止。

是最新版本的异步模块的错误还是我的使用有问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-28T04:09:44.007

您在传递给 async.series 的数组中提供的函数需要接受该函数在任务完成时调用的回调参数。所以你想这样做：

```
async.series([
    function(callback){ 
        console.log("a"); 
        callback();
    },
    function(callback){ 
        console.log("b");
        callback();
    }
]... 
```

# salesforce - Salesforce 主从关系

> ID：10779128
> 
> 赞同：2
> 
> 时间：2012-05-28T03:46:22.317
> 
> 标签：salesforce, master-detail

我有两个对象：**House**和**Owner**

Owner 有一个字段“ID”，House 有一个字段“Owner_ID”，如何使用架构构建器下 Salesforce 中的主从关系将“Owner_ID”链接到 Owner 中的“ID”字段？

当我在 House 中创建新的 MD 关系时，它没有选择框让我设置 MD 关系在 Owner 中引用哪个字段。它默认为“所有者名称”字段。（即当我插入一个新的房子时，我可以通过“业主姓名”搜索业主，但不能通过“身份证”搜索业主）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:41:08.350

主从关系仅链接到父记录的 ID 字段 - 您无法更改此设置。也就是说，UI 使用名称是为了方便用户，这就是为什么您无法在此处通过 ID 进行搜索的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T05:32:06.417

从 Summer'12 开始，可以更改子记录的父记录：

### 如何重生：

要启用此选项，请在主从关系字段定义中选择允许重新设置父项选项。

### 参考：

[https://developer.salesforce.com/releases/release/Summer12/master+detail+relationship+expands](https://developer.salesforce.com/releases/release/Summer12/master+detail+relationship+expands)

# html - 如果在使用 flash 到 html5 回退时将 html5 自动播放设置为 true，则两个播放器都会播放

> ID：10779129
> 
> 赞同：0
> 
> 时间：2012-05-28T03:46:31.203
> 
> 标签：html, html5-video, flowplayer, autoplay

我们有一个页面使用 and 标签来启用 flowplayer flash to html5 fallback。代码片段如下：

```
<object id="flowplayer" width="100%" height="100%" bgcolor="#000000"
data="/flowplayer/3.2.11/flowplayer.unlimited-3.2.11.swf"
type="application/x-shockwave-flash"> 

<param name="movie" value="flowplayer/3.2.11/flowplayer.unlimited-3.2.11.swf" /> 

<param name="allowfullscreen" value="true" /> 
<param value="always" name="allowscriptaccess"/>
<param value="high" name="quality"/>
<param value="true" name="cachebusting"/>
<param value="#000000" name="bgcolor"/> 

<param value="config=/r/m/veuscqj/e8EJVo/config" name="flashvars"/>

    <video controls="controls" autoplay  style="height:100%; width:100%;">
            <source src="/veuscqj/25aRpC/20120521011327_CONT3Emp4MEDIUM_mp4-MEDIUM.mp4"
                type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'
            >
    </video> 
```

问题是当我们为 html5 播放器设置自动播放属性时，如果给定的浏览器支持 html5 并提供编码，浏览器将总是几乎同时播放两个播放器（flash 和 html5）。结果，您将听到两个音频在背景中播放，有几秒钟的间隔。

理论上，我们认为html5播放器只有在flash对象加载失败时才会被触发，但实际上无论浏览器如何，似乎两个播放器都在加载。

如果对 html5 禁用自动播放，则不会出现此问题。

任何人都可以帮助我们解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:51:35.237

原谅我之前的回答。

但是，我为您找到了另一种解决方案。我们需要检查闪存是否可用，对吗？如果是这种情况，[此链接](http://www.adobe.com/devnet/flashplayer/articles/swfobject.html)可能会很有用。

重点是，您可以使用 swfobject 创建 if / else 结构来确定需要显示和执行的内容。

# objective-c - 将对象添加到数组时的 SIGABRT

> ID：10779130
> 
> 赞同：1
> 
> 时间：2012-05-28T03:46:33.203
> 
> 标签：objective-c, cocoa-touch, nsmutablearray

```
enemyBlobArray = [[NSMutableArray alloc] init];

for(int i = 0; i < kEnemyCount; i++) {
    [enemyArray addObject:[SpriteHelpers setupAnimatedSprite:self.view numFrames:3 withFilePrefix:@"greenbox" withDuration:((CGFloat)(arc4random()%2)/3 + 0.5) ofType:@"png" withValue:0]];
}

enemyView = [enemyArray objectAtIndex:0]; 
```

我试图让对象从这个数组出现在屏幕上。我收到一条错误消息，指出我添加的对象不能是`nil`. 我不知道为什么会这样`nil`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:10:58.363

该方法`setupAnimatedSprite:numFrames:withFilePrefix:withDuration:ofType:withValue:`返回零。所以问题出在该方法内部的某个地方。由于我们没有该方法的代码，因此我无法告诉您它可能是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:13:02.353

根据提供的代码，您没有提及“enemyArray”的分配和初始化；但是，您创建了一个名为“enemyBlobArray”的可变数组，它从未在提供的代码中使用。也许这是一个变量名拼写错误的简单问题。

# bash - 从 txt 行读取整数

> ID：10779133
> 
> 赞同：0
> 
> 时间：2012-05-28T03:46:40.390
> 
> 标签：bash, variables, integer, readline

我有一个 3 行的 txt 文件。

用户$ cat file.txt

5 - 需要用于确定循环结束的整数

1 - 一个逻辑值，表示为真或假以供以后调节

fold_nam - 文件夹的名称。

我现在想将第一行分配为一个整数，到目前为止我所做的是：

echo $(sed -n 1p file.txt) > loop_end

但是当我尝试使用该文件时，我什么也得不到

例如：当我执行以下操作时，我得到一个空行，而不是 txt 文件中的值

用户$ echo $loop_end

我在这里的一些论坛上读到了这一点，并进行了一些实验，但似乎不需要转换值（顺便说一句，它通过 matlab 保存为整数）。

可以通过正确的命令行使用帮助...tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:52:58.343

将输出分配给`loop_end`整数类型的变量。您所做的是将输出重定向到名为`loop_end`.

```
declare -i loop_end=$(sed -n 1p file.txt)
echo $loop_end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:19:19.573

使用`read`内置的 bash 将允许您读取文件内容，如下例所示：

```
read loop_end < file.txt 
```

# javascript - Selenium 可以用于测试单页 JavaScript 应用程序吗？

> ID：10779137
> 
> 赞同：9
> 
> 时间：2012-05-28T03:47:55.823
> 
> 标签：javascript, testing, selenium

UI 测试初学者，Selenium 可以用于 UI 测试单页 JavaScript 应用程序吗？

应用程序使用异步 AJAX / Web Socket 请求，服务端点已经过测试，但我也需要 UI 测试。

除了 Selenium，您还会推荐哪些其他工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T01:08:12.643

对于大量使用 ajax 的页面来说，这非常好，您可能只需要对您调用的每个方法的超时时间进行一些细粒度的调整，因为当 ajax 方法完成时不一定会向 Selenium 发出明显的信号（比如当页面完成加载时）。

结帐超时使用在这里：

[http://seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:14:11.837

是的。它可以用来做到这一点。如果允许您模拟按钮点击并等待结果加载。

您应该不会遇到单页应用程序的问题。

它具有记录步骤和制作测试用例的工具。试试看。即使对于初学者来说也应该很容易。

# objective-c - 从 id 获取用户名和图片 - 图形 API iOS

> ID：10779145
> 
> 赞同：2
> 
> 时间：2012-05-28T03:49:11.893
> 
> 标签：objective-c, ios, facebook-graph-api

我正在开发一个保存对手 ID 的游戏。所以我想知道如何从 id 中获取用户名和个人资料图片，这里的参数是

```
[facebook requestWithGraphPath:@"_______" andDelegate:self]; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T03:58:09.400

你拿到脸书ID了吗？如果你明白了，只需将其填写到参数 [https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

```
[facebook requestWithGraphPath:@"fbID" andDelegate:self]; 
```

对于个人资料图片，请调用此 url，它将为您返回一个 jpg 链接

```
http://graph.facebook.com/(username|fbID)/picture 
```

# javascript - JavaScript/jQuery - “$ 未定义 - $function()”错误

> ID：10779148
> 
> 赞同：49
> 
> 时间：2012-05-28T03:50:01.810
> 
> 标签：javascript, jquery

我正在尝试运行 JavaScript/jQuery 函数，但[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)收到错误消息：

```
$ is not defined $(function()". 
```

JavaScript 代码放置在一个`core.js`由`index.php`. 是什么导致了这个错误？

**JavaScript：**

```
<script type="text/javascript">
    var formObject = {
        run : function(obj) {
            if (obj.val() === '') {
                obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
            } else {
                var id = obj.attr('id');
                var v = obj.val();
                jQuery.getJSON('/mod/update.php', { id : id, value : v }, function(data) {
                    if (!data.error) {
                        obj.next('.update').html(data.list).removeAttr('disabled');
                    } else {
                        obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                    }
                });
            }
        }
    };

    $(function() {

        $('.update').live('change', function() {
            formObject.run($(this));
        });

    });
</script> 
```

**PHP/HTML**

```
<html>
    <select name="main" id="category" class="update">
    <option value="">Select one</option>

        <? if (!empty($list)) { ?>
            <? foreach($list as $row) { ?>
                <option value="<?php echo $row['id']; ?>">
                    <? echo $row['name']; ?>
                </option>

            <? } ?>
        <? } ?>

    </select>
</html> 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-28T03:52:03.490

您一定没有让 jQuery 可用于您的脚本。

将此添加到文件的顶部：

```
<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

此问题与未正确添加到 PHP/JSP/ASP 文件中的 jQuery/JavaScript 文件有关。这出去并从源代码获取 jQuery 代码。您可以下载它并在服务器上本地引用它，这样会更快。

或者任何一个都可以直接将其链接到 jQuery 或 GoogleCDN 或 MicrosoftCDN。

[如何将 jQuery 添加到您的网页中](https://www.w3schools.com/jquery/jquery_get_started.asp)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T04:12:01.720

尝试：

```
(function($) {
    $(function() {
        $('.update').live('change', function() {
            formObject.run($(this));
        });
    });
})(jQuery); 
```

通过使用这种方式，您可以确保全局变量 jQuery 将绑定到闭包内的“$”。只需确保 jQuery 通过插入正确加载到页面中：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
```

将“ [http://code.jquery.com/jquery-1.7.1.min.js](http://code.jquery.com/jquery-1.7.1.min.js) ”替换为您的 jQuery 源在页面上下文中所在的路径。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T03:54:13.333

您需要在页面中包含 jQuery 库。

您可以[在此处下载 jQuery](http://docs.jquery.com/Downloading_jQuery#Download_jQuery)并自己托管它，也可以从 Google 或 Microsoft 等外部来源链接。

谷歌的：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
```

微软的：

```
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.6.2.min.js"> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-05T13:28:23.723

这可能对某人有用：

如果您已经获得 jQuery 但仍然出现此错误，请检查您是否在使用它的 js 之前包含 jQuery，特别是如果您在 ASP.NET C# 中使用 @RenderBody()

如果在 @RenderBody() 调用的视图中包含 js，则必须在 @RenderBody() 之前包含 jQuery。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-06T08:47:00.473

包含 jquery.js，如果包含，请在任何其他 JavaScript 代码之前加载它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-07T14:23:50.170

我已经解决了如下。

```
import $ from 'jquery';

(function () {
    // ... code let script = $(..)
})(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-03T06:17:00.313

我使用带有 MVC 和 Razor cshtml 的 Asp.Net Core 2.2 我的 JQuery 在布局页面中被引用，我需要将以下内容添加到我的 view.cshtml 中：

```
@section Scripts {
$script-here
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-03T12:17:12.440

如果您在添加 jquery 之前尝试在**电子**应用程序中使用 jquery，则应将其添加到模块中：

```
<script>
    if (typeof module === 'object') {
        window.module = module;
        module = undefined;
    }
</script>
<script src="js/jquery-3.5.1.min.js"></script> 
```

# windows - Windows 上 Haskell 中的 Unicode 控制台 I/O

> ID：10779149
> 
> 赞同：24
> 
> 时间：2012-05-28T03:50:05.980
> 
> 标签：windows, haskell, unicode, console

在 Windows 下的 Haskell 中，让控制台 I/O 与 Unicode 字符一起工作似乎相当困难。这是悲惨的故事：

1.  （初步的。）在您考虑在 windows 下的控制台中执行 Unicode I/O 之前，您需要确保您使用的控制台字体可以呈现您想要的字符。光栅字体（默认设置）的覆盖范围极差（并且不允许复制粘贴它们无法表示的字符），MS 提供的 truetype 选项（consolas、lucida 控制台）的覆盖范围不是很大（尽管这些将允许复制/粘贴他们无法代表的字符）。[您可能会考虑安装 DejaVu Sans Mono（按照此处](https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash/3259271#3259271)底部的说明进行操作；您可能需要重新启动才能正常工作）。在排序之前，没有应用程序能够进行大量的 Unicode I/O；不仅仅是哈斯克尔。
2.  完成此操作后，您会注意到一些应用程序将能够在 Windows 下进行控制台 I/O。但让它发挥作用仍然相当复杂。在windows下写入控制台基本上有两种方式。（以下内容适用于任何语言，不只是 Haskell；别担心，Haskell 稍后会出现！）...
3.  选项 A 是使用通常的 c 库风格的基于字节的 i/o 函数；希望操作系统会根据某种编码来解释这些字节，这些编码可以编码你想要的所有奇怪而美妙的字符。例如，在标准系统编码通常为 UTF8 的 Mac OS X 上使用等效的技术，效果很好；你发出 utf8 输出，你会看到漂亮的符号。
4.  在 Windows 上，它的效果不太好。windows 期望的默认编码通常不会是覆盖所有 Unicode 符号的编码。因此，如果您想以这种或另一种方式看到漂亮的符号，您需要*更改*编码。一种可能是您的程序使用`SetConsoleCP`win32 命令。（那么你需要绑定到 Win32 库。）或者，如果你不想这样做，你可以期望你的程序的用户为你更改代码页（然后他们必须`chcp`在运行你的之前调用命令程序）。
5.  选项 B 是使用支持 Unicode 的 win32 控制台 API 命令，例如`WriteConsoleW`. 在这里，您将 UTF16 直接发送到 windows，这很高兴地呈现它：不存在编码不匹配的危险，因为 windows*总是*期望 UTF16 具有这些功能。

不幸的是，这些选项在 Haskell 中都不能很好地工作。首先，据我所知，没有使用选项 B 的库，所以这不是很容易。这留下了选项 A。如果您使用 Haskell 的 I/O 库（`putStrLn`等等），这就是库将执行的操作。在现代版本的 Haskell 中，它会仔细询问窗口当前代码页是什么，并以正确的编码输出您的字符串。这种方法有两个问题：

*   一个不是炫耀，但很烦人。如上所述，默认编码几乎不会对您想要的字符进行编码：您是用户需要更改为这样的编码。因此，您的用户`chcp cp65001`在运行您的程序之前需要这样做（您可能会发现强迫您的用户这样做是令人反感的）。或者您需要在`SetConsoleCP`程序中绑定并执行等效操作（然后使用`hSetEncoding`以便 Haskell 库将使用新编码发送输出），这意味着您需要包装 win32 库的相关部分以使它们在 Haskell 中可见.
*   更严重的是[，windows 中存在一个错误](http://connect.microsoft.com/VisualStudio/feedback/details/543801/unicode-issues-with-writefile-and-in-the-crt)（解决方案：不会修复）导致[Haskell 中的错误，](http://hackage.haskell.org/trac/ghc/ticket/4471)这意味着如果您选择了任何代码页，如 cp65001 可以覆盖所有 Unicode，Haskell 的 I/O 例程将故障和失败。因此，本质上，*即使*您（或您的用户）将编码正确设置为涵盖所有精彩 Unicode 字符的某种编码，然后在告诉 Haskell 使用该编码输出内容时“做所有正确的事情”，您仍然会输。

上面列出的错误仍未解决，列为低优先级；基本结论是选项 A（在我上面的分类中）是不可行的，需要切换到选项 B 以获得可靠的结果。目前尚不清楚解决此问题的时间表，因为这看起来需要做一些相当大的工作。

问题是：**与此同时，任何人都可以提出一种解决方法来允许在 Windows 下的 Haskell 中使用 Unicode 控制台 I/O。**

另请参阅此[python 错误跟踪器数据库条目](http://bugs.python.org/issue1602)，解决 Python 3 中的相同问题（已提出修复，但尚未被代码库接受），以及[此 stackoverflow 答案](https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash/3259271#3259271)，为 Python 中的此问题提供解决方法（基于“选项 B”在我的分类中）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T03:50:06.200

我想我会回答我自己的问题，并列出*一个可能的*答案，以下是我目前正在做的事情。很有可能一个人可以做得更好，这就是我问这个问题的原因！但我认为将以下内容提供给人们是有意义的。[对于同一问题](https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash/3259271#3259271)，它基本上是从 Python 到 Haskell 的这个 python 解决方法的翻译。它使用问题中提到的“选项 B”。

基本思想是您创建一个模块 IOUtil.hs，其中包含以下内容，您可以将其`import`放入您的代码中：

```
{-# LANGUAGE ForeignFunctionInterface #-}
{-# LANGUAGE CPP #-}
{-# LANGUAGE NoImplicitPrelude #-}
module IOUtil (
  IOUtil.interact,
  IOUtil.putChar, IOUtil.putStr, IOUtil.putStrLn, IOUtil.print,
  IOUtil.getChar, IOUtil.getLine, IOUtil.getContents, IOUtil.readIO,
  IOUtil.readLn,
  ePutChar, ePutStr, ePutStrLn, ePrint,
  trace, traceIO
  ) where

#ifdef mingw32_HOST_OS

import System.Win32.Types (BOOL, HANDLE, DWORD, LPDWORD, LPWSTR, LPCWSTR, LPVOID)
import Foreign.C.Types (CWchar)
import Foreign
import Prelude hiding (getContents, putStr, putStrLn) --(IO, Read, Show, String)
--import qualified System.IO
import qualified System.IO (getContents)
import System.IO hiding (getContents, putStr, putStrLn)
import Data.Char (ord)

 {- <http://msdn.microsoft.com/en-us/library/ms683231(VS.85).aspx>
    HANDLE WINAPI GetStdHandle(DWORD nStdHandle);
    returns INVALID_HANDLE_VALUE, NULL, or a valid handle -}

foreign import stdcall unsafe "GetStdHandle" win32GetStdHandle :: DWORD -> IO (HANDLE)

std_OUTPUT_HANDLE = -11 :: DWORD  -- all DWORD arithmetic is performed modulo 2^n
std_ERROR_HANDLE  = -12 :: DWORD

 {- <http://msdn.microsoft.com/en-us/library/aa364960(VS.85).aspx>
    DWORD WINAPI GetFileType(HANDLE hFile); -}

foreign import stdcall unsafe "GetFileType" win32GetFileType :: HANDLE -> IO (DWORD)
_FILE_TYPE_CHAR   = 0x0002 :: DWORD
_FILE_TYPE_REMOTE = 0x8000 :: DWORD

 {- <http://msdn.microsoft.com/en-us/library/ms683167(VS.85).aspx>
    BOOL WINAPI GetConsoleMode(HANDLE hConsole, LPDWORD lpMode); -}

foreign import stdcall unsafe "GetConsoleMode" win32GetConsoleMode :: HANDLE -> LPDWORD -> IO (BOOL)
_INVALID_HANDLE_VALUE = (intPtrToPtr $ -1) :: HANDLE

is_a_console :: HANDLE -> IO (Bool)
is_a_console handle
  = if (handle == _INVALID_HANDLE_VALUE) then return False
      else do ft <- win32GetFileType handle
              if ((ft .&. complement _FILE_TYPE_REMOTE) /= _FILE_TYPE_CHAR) then return False
                else do ptr <- malloc
                        cm  <- win32GetConsoleMode handle ptr
                        free ptr
                        return cm

real_stdout :: IO (Bool)
real_stdout = is_a_console =<< win32GetStdHandle std_OUTPUT_HANDLE

real_stderr :: IO (Bool)
real_stderr = is_a_console =<< win32GetStdHandle std_ERROR_HANDLE

 {- BOOL WINAPI WriteConsoleW(HANDLE hOutput, LPWSTR lpBuffer, DWORD nChars,
                              LPDWORD lpCharsWritten, LPVOID lpReserved); -}

foreign import stdcall unsafe "WriteConsoleW" win32WriteConsoleW
  :: HANDLE -> LPWSTR -> DWORD -> LPDWORD -> LPVOID -> IO (BOOL)

data ConsoleInfo = ConsoleInfo Int (Ptr CWchar) (Ptr DWORD) HANDLE

writeConsole :: ConsoleInfo -> [Char] -> IO ()
writeConsole (ConsoleInfo bufsize buf written handle) string
  = let fillbuf :: Int -> [Char] -> IO ()
        fillbuf i [] = emptybuf buf i []
        fillbuf i remain@(first:rest)
          | i + 1 < bufsize && ordf <= 0xffff = do pokeElemOff buf i asWord
                                                   fillbuf (i+1) rest
          | i + 1 < bufsize && ordf >  0xffff = do pokeElemOff buf i word1
                                                   pokeElemOff buf (i+1) word2
                                                   fillbuf (i+2) rest
          | otherwise                         = emptybuf buf i remain
          where ordf   = ord first
                asWord = fromInteger (toInteger ordf) :: CWchar
                sub    = ordf - 0x10000
                word1' = ((shiftR sub 10) .&. 0x3ff) + 0xD800
                word2' = (sub .&. 0x3FF)             + 0xDC00
                word1  = fromInteger . toInteger $ word1'
                word2  = fromInteger . toInteger $ word2'

        emptybuf :: (Ptr CWchar) -> Int -> [Char] -> IO ()
        emptybuf _ 0 []     = return ()
        emptybuf _ 0 remain = fillbuf 0 remain
        emptybuf ptr nLeft remain
          = do let nLeft'    = fromInteger . toInteger $ nLeft
               ret          <- win32WriteConsoleW handle ptr nLeft' written nullPtr
               nWritten     <- peek written
               let nWritten' = fromInteger . toInteger $ nWritten
               if ret && (nWritten > 0)
                  then emptybuf (ptr `plusPtr` (nWritten' * szWChar)) (nLeft - nWritten') remain
                  else fail "WriteConsoleW failed.\n"

    in  fillbuf 0 string

szWChar = sizeOf (0 :: CWchar)

makeConsoleInfo :: DWORD -> Handle -> IO (Either ConsoleInfo Handle)
makeConsoleInfo nStdHandle fallback
  = do handle     <- win32GetStdHandle nStdHandle
       is_console <- is_a_console handle
       let bufsize = 10000
       if not is_console then return $ Right fallback
         else do buf     <- mallocBytes (szWChar * bufsize)
                 written <- malloc
                 return . Left $ ConsoleInfo bufsize buf written handle

{-# NOINLINE stdoutConsoleInfo #-}
stdoutConsoleInfo :: Either ConsoleInfo Handle
stdoutConsoleInfo = unsafePerformIO $ makeConsoleInfo std_OUTPUT_HANDLE stdout

{-# NOINLINE stderrConsoleInfo #-}
stderrConsoleInfo :: Either ConsoleInfo Handle
stderrConsoleInfo = unsafePerformIO $ makeConsoleInfo std_ERROR_HANDLE stderr

interact     :: (String -> String) -> IO ()
interact f   = do s <- getContents
                  putStr (f s)

conPutChar ci  = writeConsole ci . replicate 1
conPutStr      = writeConsole
conPutStrLn ci = writeConsole ci . ( ++ "\n")

putChar      :: Char -> IO ()
putChar      = (either conPutChar  hPutChar ) stdoutConsoleInfo

putStr       :: String -> IO ()
putStr       = (either conPutStr   hPutStr  ) stdoutConsoleInfo

putStrLn     :: String -> IO ()
putStrLn     = (either conPutStrLn hPutStrLn) stdoutConsoleInfo

print        :: Show a => a -> IO ()
print        = putStrLn . show

getChar      = System.IO.getChar
getLine      = System.IO.getLine
getContents  = System.IO.getContents

readIO       :: Read a => String -> IO a
readIO       = System.IO.readIO

readLn       :: Read a => IO a
readLn       = System.IO.readLn

ePutChar     :: Char -> IO ()
ePutChar     = (either conPutChar  hPutChar ) stderrConsoleInfo

ePutStr     :: String -> IO ()
ePutStr      = (either conPutStr   hPutStr  ) stderrConsoleInfo

ePutStrLn   :: String -> IO ()
ePutStrLn    = (either conPutStrLn hPutStrLn) stderrConsoleInfo

ePrint       :: Show a => a -> IO ()
ePrint       = ePutStrLn . show

#else

import qualified System.IO
import Prelude (IO, Read, Show, String)

interact     = System.IO.interact
putChar      = System.IO.putChar
putStr       = System.IO.putStr
putStrLn     = System.IO.putStrLn
getChar      = System.IO.getChar
getLine      = System.IO.getLine
getContents  = System.IO.getContents
ePutChar     = System.IO.hPutChar System.IO.stderr
ePutStr      = System.IO.hPutStr System.IO.stderr
ePutStrLn    = System.IO.hPutStrLn System.IO.stderr

print        :: Show a => a -> IO ()
print        = System.IO.print

readIO       :: Read a => String -> IO a
readIO       = System.IO.readIO

readLn       :: Read a => IO a
readLn       = System.IO.readLn

ePrint       :: Show a => a -> IO ()
ePrint       = System.IO.hPrint System.IO.stderr

#endif

trace :: String -> a -> a
trace string expr = unsafePerformIO $ do
    traceIO string
    return expr

traceIO :: String -> IO ()
traceIO = ePutStrLn 
```

然后，您使用其中包含的 I/O 函数而不是标准库函数。他们会检测输出是否被重定向；`WriteConsoleW`如果不是（即如果我们正在写入“真实”控制台），那么我们将绕过通常的 Haskell I/O 函数并使用支持 unicode 的 win32 控制台函数直接写入win32 控制台。在非 Windows 平台上，条件编译意味着这里的函数只是调用标准库的函数。

如果您需要打印到标准错误，您应该使用 (eg) `ePutStrLn`，而不是`hPutStrLn stderr`; 我们没有定义一个`hPutStrLn`. （定义一个是读者的练习！）

# multithreading - 线程是否用于并行 IO 而不是 CPU？

> ID：10779152
> 
> 赞同：1
> 
> 时间：2012-05-28T03:50:33.963
> 
> 标签：multithreading, io, parallel-processing, cpu, process

在 Guido Van Rossum 的 2012 Pycon 演讲中，他谈到了线程：

> 如果您将线程用于它们最初的用途，那么操作系统级线程用于执行并行 IO，而不是用于执行并行计算。[[资源]](http://www.youtube.com/watch?v=EBRMq2Ioxsc#t=34m0s)

传统上，关于进程与线程的讨论围绕调度、上下文切换成本或共享资源成本之间的差异展开。

但是，我从未了解或听说过一个概念，即对于 CPU 密集型任务与 IO 相比，一个必然比另一个更好。如果进程和线程之间本质上存在 1-1 关系（并非总是可以假设），那么从 CPU-vs-IO 的角度来看，使用哪一个是否重要？

标准的 pthread 文档并未阐明这一特定主张；有人知道更好的来源吗？

在构建已知在这些领域之一存在瓶颈的软件时，是否存在使用一种优于另一种的常见情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:51:36.170

大多数操作系统为每个进程提供多个线程。

这些线程可以用于没有任何交互的普通计算，用于偶尔与其他线程（通常来自同一进程）交互的计算，或用于与 I/O 交互的短突发计算。

操作系统设计通常不关心你用线程做什么。设计者期待这三者，并提供有效的机制来确定优先级、安排执行，并实现与其他线程的可靠线程交互。

我可以相信 Guido 是在谈论 Python 中内置的线程。这些线程所做的就是设计师所说的。如果他仅将它们用于 I/O，那么它们仅用于 I/O。

鉴于 Python 是一个解释器，提供计算线程是可能的，但很奇怪；由于解释器的速度往往是编译代码的 10 倍，因此您所拥有的只是一个运行速度比实际速度慢 10 倍的并行程序。想要并行计算的人想要快速得到答案，因此往往不使用解释器。

# excel - 从有间隙的列中获取连续单元格中的值

> ID：10779154
> 
> 赞同：0
> 
> 时间：2012-05-28T03:51:11.200
> 
> 标签：excel

如何将值放在没有间隙的列中的列中？

提前致谢。

这是输入和所需输出的示例。

```
Index Input Output
  1    10    10
  2          15
  3    15    55
  4          12
  5          27
  6    55
  7    
  8    12
  9    27 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:09:33.300

如果您不关心数据的顺序。您可以对范围进行排序以从数据中排除空白

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:33:33.943

假设您的索引是 A 列、输入列 B 和输出列 C。将此代码添加到模块：

```
Option Explicit

Sub RemoveBlanks()
    Dim i As Integer
    Dim LastRow As Long
    LastRow = Range("B" & ActiveSheet.Rows.Count).End(xlUp).Row

    Range("B2:B" & LastRow).Copy Range("C2")
    ' Start at the bottom of the range and work your way up
    For i = LastRow To 2 Step -1
        If Len(Range("C" & i)) = 0 Then Range("C" & i).Delete shift:=xlUp
    Next
End Sub 
```

您也可以使用数组公式来获得相同的结果。

为您的输入范围（带有不需要的空格的范围）命名。我打电话给我的 nrWithBlanks。将此公式粘贴到输出列的所有行中：

```
=IFERROR(INDEX(nrWithBlanks,SMALL((IF(LEN(nrWithBlanks),ROW(INDIRECT("1:"&ROWS(nrWithBlanks))))),ROW(A2)),1),"") 
```

由于它是一个数组公式，因此您需要在将其粘贴到单元格后按 CTRL+SHIFT+ENTER。

# objective-c - 为什么我的原型单元格显示为空白？

> ID：10779155
> 
> 赞同：1
> 
> 时间：2012-05-28T03:51:12.393
> 
> 标签：objective-c, ios, xcode, uistoryboard

在我的故事板的一个 uitableview 中，我定义了一个原型单元。在那个单元格（自定义类 kzTexturedCellv2）中，我有一个文本视图和一个图像视图。我还给了单元格一个标识符（“kzTexturedCellv2”）并使用了

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

kzTexturedCellv2 *cell = [[kzTexturedCellv2 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"kzTexturedCellv2"];

... 
```

创建单元格。问题是单元格显示为空白（没有我在故事板中添加的任何子视图。）当我尝试在单元格内设置 uitextview 的文本时，它总是返回 null。这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T04:43:55.617

使用情节提要时，无需分配初始化单元格。

看到[原型单元格的 dequeueReusableCellWithIdentifier 行为改变了吗？](https://stackoverflow.com/questions/7946840/dequeuereusablecellwithidentifier-behavior-changed-for-prototype-cells)

仅使用：

```
kzTexturedCellv2 *cell = [tableView dequeueReusableCellWithIdentifier:@"kzTexturedCellv2"]; 
```

Alloc init 将由框架处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T06:26:08.190

你能看看下面的代码吗？希望对你有帮助

```
- (void)viewDidLoad{
[super viewDidLoad];

// Create your image
UIImage *image = [UIImage imageNamed: @"person_menu.png"];
UIBarButtonItem *barButton = [[UIBarButtonItem alloc]
                              initWithImage:image
                              style:UIBarButtonItemStylePlain
                              target:nil
                              action:nil];
// set the text view to the image view
self.navigationItem.leftBarButtonItem = barButton;

menuItems = @[@"title", @"Payment", @"History",@"BookNow",@"Help", @"Promotions",@"Notifications", @"Settings", @"logOut"];
}
#pragma mark
#pragma mark - UITableViewDelegate Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
// Return the number of sections.
return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
// Return the number of rows in the section.
return [menuItems count];
}
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
if (indexPath.row == 0) {
    return 140;
}else{
     return  75;
}
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
NSString *CellIdentifier = [menuItems objectAtIndex:indexPath.row];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
cell.highlighted = YES;
return cell;
} 
```

无论您在 UITableviewCell 中拥有什么标识符，您都可以收集这些标识符并将其添加到一个 NSArray

对于您的情况，您可以像这样使用::

```
kzTexturedCellv2 *cell = [tableView dequeueReusableCellWithIdentifier:@"kzTexturedCellv2"]; 
```

# eclipse - 如何在 Eclipse 中选择或更改 JUnit 版本？

> ID：10779156
> 
> 赞同：11
> 
> 时间：2012-05-28T03:51:29.210
> 
> 标签：eclipse, junit, eclipse-plugin, junit4

基本上我使用的源代码需要一个非常具体的 JUnit 测试版本，例如：

```
lucene-test-framework-XX.jar
  The compiled Lucene test-framework library.
  Depends on junit 4.10.x (not 4.9.x, not 4.11.x), and Apache Ant 1.7.x (not 1.6.x, not 1.8.x) 
```

但是，我是 Eclipse 新手，在哪里以及如何将 JUnit 更改为 4.10.x？

提前非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T04:06:09.173

过去，我通过（特别是）删除了先前的内容，然后在我的项目属性的库设置中添加了特定的 JUnit（外部）JAR，从而改变了我的内容。步骤如下：

1.  项目 > 属性 > Java 构建路径 > 库
2.  单击右侧的“添加外部 JAR...”按钮 --> 选择您喜欢的 JUnit jar
3.  单击确定按钮

[![](../Images/4dbe6942ecd25acb0126f588ac94ef43.png)](https://i.stack.imgur.com/sFSOq.png)
[（来源：[aggroculture.com](http://aggroculture.com/images/JUnitChange.png)）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-10T16:13:57.557

虽然问题是如何使用一个非常特殊的版本，但问题的标题也适用于在 JUnit3 和 JUnit4 之间切换。这个答案说明了如何做到这一点。

很长一段时间以来，junit 库都是 eclipse 发行版的一部分。在 Eclipse Kepler 中，可以在 JUnit3 和 JUnit4 之间切换，两者都包含在有效的 JUnit Release 4.11.0 中（因为 JUnit3 仍然与 JUnit4 兼容）。

右键单击您的项目，选择 BuildPath/ConfigureBuildPath 并选择标签库。假设列出了 JUnit3 库，并且您想切换到 JUnit4。选择条目 JUnit3，然后选择“删除”按钮，然后选择“添加库”。在以下向导中，您在下拉列表中选择“JUnit”、“next”、“JUnit4”和“Finish”。

也许您已经在 ProjectExplorer 中注意到，与 JUnit3 相比，JUnit4-Library 还包括 hamcrest-core 库（它提供了强大的匹配器）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-01T17:57:15.087

至少在 Eclipse Luna SR1/SR2 中，问题在于 Eclipse 似乎优先考虑在“eclipse/plugins/org.junit_4.11.0.v201303080030”中使用 JUnit 4.11 打包的插件。即使在尝试了[上面的答案](https://stackoverflow.com/a/10779224/4142084)以强制使用我需要的版本之后，我仍然收到相同的测试错误，因此似乎仍在使用 Junit 4.11。

到目前为止，唯一对我有用的解决方案是用我想要的版本替换该目录（eclipse/plugins/org.junit_4.11.0.v201303080030）中的 junit.jar。

# javascript - 在 Firefox 中读取和写入大量数据到用户的本地存储

> ID：10779162
> 
> 赞同：2
> 
> 时间：2012-05-28T03:52:11.020
> 
> 标签：javascript, html, firefox, plugins, file-io

因此，我们有一个复杂的 HTML5 离线应用程序，其中包含大量旧数据（我们说的是数十兆字节），我们希望读取它的副本并将其写入用户的磁盘。

我们已经让这种类型的 HTML5 IndexedDB 工作了，但是 Chrome 处理大量数据时速度非常慢（加载大约 10 分钟），并且当前版本的 Firefox 有一个[可爱的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=751802)，它会随机且无法挽回地破坏整个数据库，所以这是 B 计划——此外，我们真的很想拥有一个用户可指定的文件，然后他们可以备份、邮寄等。

显然我们不能用普通的浏览器权限做到这一点，但是沙盒之外的 Firefox 扩展可以访问文件系统，我们已经了解了使用[这个扩展](https://bitbucket.org/cw/firefox-extension-writefile/src/20d943f63522/xpi/chrome/content/overlay.js)的基本概念。唯一的问题是，扩展通过[读取和写入 DOM 属性](http://hyperstruct.net/2006/08/18/exchanging-data-between-chrome-and-content/)来传递数据，这对于我们正在谈论的数据量来说似乎不太理想：

![在此处输入图像描述](../Images/89ca6e46f6fd6df6bfd8a07cbb696863.png)

但是，如果要相信[这](https://developer.mozilla.org/en/Code_snippets/Interaction_between_privileged_and_non-privileged_pages)确实是唯一的方法，因为 Gecko 严格隔离特权页面（如我们的扩展程序）和非特权页面（如我们的网站）。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:53:22.153

您的扩展代码可以从网页中读取任意数据。它只需要通过获取`.wrappedJSObject`它正在处理的任何对象的属性来选择加入，以获得它的“网页”视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:11:48.287

首先，如果您查看了 indexedDB 选项但没有说明为什么[mozIStorageService](https://developer.mozilla.org/en/Storage)（又名 sqlite）不起作用。那里的异步功能与自定义 dom 事件相结合似乎很合适，但这取决于您的数据需求。

我认为该问题的答案在于您关于如何从扩展程序获取数据到网页的声明。如果 dom 事件无法满足您的需求，那么您可能需要考虑编写[自定义 xpcom 组件](https://wiki.mozilla.org/Education/Learning/XpcomComponents#What_is_a_Component.3F)，但这是很多繁重的工作。

如果您不能这样做的原因与将大数据移入和移出服务器有关，那么您可以考虑使用流式阅读器/转换器（包括添加 gzip 压缩转换器）....但只有当您的“大量旧数据”作为流是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:03:43.383

这是我们在经历了太多痛苦之后如何让这项工作发挥作用的。向鲍里斯致敬，因为他为我们指明了正确的方向！

下面的所有代码都是针对必须由用户安装以启用此功能的 Firefox 扩展程序，并且代码在 Coffeescript 中，因为这就是我们滚动的方式。

第一步是挂钩扩展程序的`onDocumentLoad`事件，该事件在用户看到 Firefox 窗口之前触发：

```
 onDocumentLoad: =>
    gBrowser.addEventListener('DOMContentLoaded', @onLoad, true) 
```

因此，在此之后，`DOMContentLoaded`每当用户打开窗口或选项卡时都会触发：

```
 onLoad: (event) =>
    doc = event.originalTarget
    loadedWindow = doc.defaultView.wrappedJSObject 
```

砰，还有用户的全新窗口，可读可写！

```
 loadedWindow.myExtension = new myExtension() 
```

然后我们只需将扩展代码挂接到用户的窗口中，现在该窗口中的任何 JavaScript 代码（将在 DOMContentLoaded 之后初始化并运行）都可以访问我们的扩展，如下所示：

```
 if window.myExtension
      window.myExtension.write(data)
      data = window.myExtension.read()
    else
      alert("Install my extension, you fool") 
```

# java - 在 javadocs 中包含图像

> ID：10779169
> 
> 赞同：32
> 
> 时间：2012-05-28T03:53:35.080
> 
> 标签：java, image, javadoc

我使用很多可视化的示例测试用例。是否有任何方便的方法可以将它们包含在我的 Java 源代码中并将它们链接到 Javadocs 中，以便我的 IDE 可以在编码时自动显示它们（通过在我的 IDE 中调用 javadoc 渲染器功能？）

我尝试将图像放在 Java 源代码旁边并使用`<img>`，但它没有占用（我使用了 png）。

（注意 - 在这种情况下它在我的测试源中）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-28T21:40:02.010

有点牵强，但您可以通过将它们转换为 Base64 来内联文档中的图像。它看起来像这样：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA..." /> 
```

有在线工具可用于进行转换：

*   [http://www.base64-image.de](http://www.base64-image.de)
*   [http://daturi.me](http://daturi.me)
*   [http://www.freeformatter.com/base64-encoder.html](http://www.freeformatter.com/base64-encoder.html)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-28T21:04:30.637

由于您没有显示任何来源，我只能做一个玻璃球猜测......

对于文档所需的任何文件，应将它们放在以`doc-files`您的包目录命名的子目录中。然后这些将由 Javadoc 简单地复制到输出目录。`<img>`然后在元素中使用相对路径。

我不确定您的 IDE 的 Javadoc 渲染器是否会这样做，但值得一试。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-07-17T18:17:13.993

使用 Eclipse Luna，以下内容对我有用。

*   com
    *   公司
        *   一些包
            *   文档文件
                *   图像.png
            *   测试.java

现在在 Test.java 的 javadoc 中：

```
/**
 * <img src="./doc-files/image.png" />
 */ 
```

并且 Eclipse 在弹出帮助中、鼠标悬停时和 Javadoc 视图中都显示图像。

您甚至可以添加`style="width: 100%;"`到`img`标签中，以便图像根据视图/弹出窗口大小进行调整。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-04T05:27:39.370

为了扩展 Vsevolod Golovanov 和 Paulo Ebermann 上面的回答，这里有一个具体的例子和进一步的阐述。

Javadocs 文档指出：

> 要包含未处理的文件，请将它们放在名为 doc-files 的目录中，该目录可以是包含源文件的任何包目录的子目录。

如果将图像文件放在该文件夹中，Javadocs HTML 文件将通过生成的 HTML 的相对路径访问它们。

因此，如果您的项目名为**MyProject**并且您要向其中添加 Javadoc 注释的类是**org.foo.app.MyApp**，则其源文件夹是**MyProject/src/org/foo/app/MyApp.java**并且您想要包括**MyImage.jpg**在它的 Javadoc 中，然后：

创建文件夹**MyProject/src/org/foo/app/doc-files**，并将图像文件放入其中。

此时，您的 Javadocs 文本可以这样引用它：

```
<img src="doc-files/MyImage.jpg" width="500" alt="description of MyImage"> 
```

Javadocs 生成的 HTML 将反映相应的编码。

注意“宽度”属性，允许缩放图像。高度按比例缩放。

当您运行 Javadocs 时，**doc-files 文件**夹将全部复制到 Javadocs 输出文件夹，并且其中的资源可供 HTML 使用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-03T15:25:30.530

试试这个方法

```
/**
 * @author KamyninSA
 * @version 1
 * <p><b>Description</b></p>
 * <p><img src="{@docRoot}/../src/test/resources/doc-files/ads.png" alt="alternative directory"></p>
 * */ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-04T16:34:21.470

为了扩展Paŭlo的答案，假设这里的maven构建对我来说对JDK-8（更严格的HTML验证）有用，并规定您愿意运行javadoc工具。

不幸的是，对于 Netbeans，我在 IDE 的 javadoc 弹出窗口中看不到图像，我刚刚打开[了这个 netbeans bug](https://netbeans.org/bugzilla/show_bug.cgi?id=257848)。

假设这是 com.foo.File.java 的 javadoc 的一部分（注意没有 img 结束标记，这是 w3schools 的正确方法）：

```
<img src="doc-files/foo.png" alt="Foo"> 
```

在 maven 目录结构中，您将在此处找到图像：`src/main/javadoc/com/foo/doc-files/foo.png`

最后，在 pom.xml 中（注意[docfilessubdirs](https://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#docfilessubdirs)设置为 true）：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.10.3</version>
            <configuration>
                <docfilessubdirs>true</docfilessubdirs>
            </configuration>
        </plugin>
        ... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-04T11:53:17.303

我偶然发现了这个问题，因为我也想显示我的图标的预览。看完答案，我还不满意，自己试了一下。这就是我现在得到的：

```
 /**
     * <img src="../../../../../../resources/com/my/project/client/images/myImage.png"><br>
     * Icon for myImage.
     *
     * @return the icon
     */ 
```

像这样，我不需要管理比以前更多的图像，只需转到实际图像所在的文件夹即可。

# ruby - ruby-pg 在插入前清理数据

> ID：10779170
> 
> 赞同：7
> 
> 时间：2012-05-28T03:53:44.113
> 
> 标签：ruby, postgresql, pg

红宝石新手在这里。我正在尝试插入这个字符串“Lady Arabella's Scandalo...”我正在使用 ruby​​-pg 来执行此操作。但是，由于单引号，我遇到了错误，如何清理此字符串并删除所有 html 标签？是否有内置功能？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-28T04:23:42.390

您可以使用[`escape_string`](http://www.rubydoc.info/gems/pg/PG/Connection:escape_string)正确转义单引号：

```
db = PG.connect(...)
db.exec("insert into t (...) values ('#{db.escape_string(str)}', ...)") 
```

或使用[`prepare`](http://www.rubydoc.info/gems/pg/PG/Connection:prepare)and[`exec_prepared`](http://www.rubydoc.info/gems/pg/PG/Connection:exec_prepared)来处理准备好的语句：

```
db.prepare('ins', 'insert into t (...) values ($1, ...)')
db.exec_prepared('ins', [str, ...]) 
```

# ruby - 为什么我不能在 Ruby 的方法中访问局部变量？

> ID：10779171
> 
> 赞同：21
> 
> 时间：2012-05-28T03:53:54.040
> 
> 标签：ruby

我有一个名为 test.rb 的 Ruby 文件

```
ff="ff"
def test
  puts ff
end 
```

我执行它，得到错误：

`test.rb:3:in `test': undefined local variable or method `ff' for main:Object (NameError)`

这是什么原因？有什么文件可以解释吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-28T10:11:58.447

`ff`方法定义内部无法访问的原因`test`仅仅是方法（使用`def`关键字创建）创建了一个新范围。与分别使用`class`and`module`关键字定义类和模块相同。

`main`在这种情况下，（顶级对象）的角色几乎与范围问题完全无关。

请注意，如果您确实希望您的`test`方法能够访问定义上下文中定义的局部变量，请使用`define_method`（或在您的情况下为`define_singleton_method`方法），请参见此处：

```
ff = "hi"
define_singleton_method("test") { ff }
test #=> "hi" 
```

与`def`关键字不同，`define_method`方法族不会创建新范围，而是关闭当前范围，捕获任何局部变量。

`@ff`在@soup 给出的下一个示例中使用的原因并不是`main`某种“特殊情况”，而只是在顶层定义的 ivar 是一个 ivar ，`main`因此可以被调用 on 的方法访问`main`。

但是，`test`方法与 的关系是`main`什么？它不仅仅是它本身的方法 - 它实际上是在 类*上定义的私有实例方法。*这意味着该方法对您的 ruby​​ 程序中的几乎每个对象都可用（作为私有方法）。在顶层 ( ) 定义的所有方法实际上都定义为类的私有实例方法。`main``Object``test``main``Object`

有关 Ruby 顶层的更多信息，请参阅这篇文章：[http ://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/](http://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-28T04:45:24.820

Ruby 作用域既简单又复杂。

首先你必须记住，一切都是对象，一切都有范围。

要直接回答您的问题，`main`是一个对象，因此当您编写时，`def x...`您正在对象上定义一个方法`main`

在 pyr/irb 中观察：

```
# note the error describes 
[1] pry(main)> main 'main:Object'
NameError: undefined local variable or method 'main' for main:Object
from (pry):1:in '<main>'

# self is the current object, which is main
[2] pry(main)> self
=> main 

# note main is an object of type Object
[3] pry(main)> self.class
=> Object 

# main has methods
[4] pry(main)> self.methods
=> [:to_s, :public, etc etc] 
```

所以当你写

```
ff = "ff"
def test
    puts ff
end 
```

你真正在做的是

```
class main
    ff = "ff"
    def test
        puts ff
    end
end 
```

这不起作用，因为`ff`超出了范围。要解决这个问题，你必须`ff`变成一个实例变量，所以在它的名字前面加上`@`. 以下将起作用：

```
@ff = "ff"
def test
    puts @ff
end

test 
```

请注意，这似乎是`main`常规课程的特殊情况，见下文。

如果我们有自己的测试类：

```
class Test1
    ff = "ff"
    def test
        puts ff
    end
end

Test1.new.test # undefined variable/method 'ff' error 
```

这失败了，因为`ff`没有像预期的那样在正确的范围内定义。相反，它的范围仅限于解析器执行我们的类声明时。

所以让我们尝试上面的修复：

```
class Test1Fixed
    @ff = "ff"
    def test
        puts @ff
    end
end

Test1Fixed.new.test # results in blank line 
```

这很奇怪。

让我们添加这个方法：

```
def ff?
    puts "ff is: #{@ff.nil? ? "nil" : "not nill"}"
end

Test1Fixed.new.ff? # => ff is: nil 
```

为什么@ff 为零？

以下内容可能会更清楚地说明这一点：

```
class Test2
    puts "Where am i?"
    @instance = "instance"

    def initialize
        puts "Initalize"
    end

    puts "pants on"

    def test
        puts "This will NOT output 'instance': #{@instance}"
    end

    def self.class_test
        puts "This WILL output 'instance': #{@instance}"
    end
end

puts "Creating new Test2 Object"
t = Test2.new
puts "Calling test on Test2 Object"
t.test

puts "Calling class_test on Test2 Class object" 
Test2.class_test 
```

运行它，我们得到以下输出：

```
$ ruby scope.rb 
Where am i?
pants on
Creating new Test2 Object
Initalize
Calling test on Test2 Object
This will NOT output 'instance': 
Calling class_test on Test2 Class object
This WILL output 'instance': instance 
```

如您所见，interperter 按顺序运行我们的类声明，就像其他任何地方一样并输出我们的`puts`语句。当我们开始调用方法时，这会变得更有趣。写作`@instance = ...`和写作一样`self.instance = ...`，你能猜到我们在哪里定义了实例吗？是的，在 Test2 类对象（不是 Test2 对象）上。

这就是为什么当我们调用 时`test`，什么都没有输出，因为 inside `test`，`self`指的是实例化的`Test2`对象，而不是`Test2 class object`（我们将 @instance 设置为任何东西的地方！）。这就是为什么您在内部设置实例变量的原因`initialize`，其中`self`将指向实际对象。

您可以看到，当我们通过定义一个类方法`self.class_test`，然后在 Test2 类对象 ( `Test2.class_test`) 上调用该方法时，我们得到了预期的输出，因为在该范围内`@instance`定义了。

希望这有点道理。

[http://rubykoans.com/scope](http://rubykoans.com/)部分可能有助于巩固其中的一些知识。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T04:49:39.960

在 ruby​​ 中，没有符号的名称始终具有“本地”范围。Ruby 使用词法作用域，因此在方法内部，名称始终仅指该方法。

其他范围是全局、实例和类。这是一个关于它们的好文档： [http ://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Scope](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Scope)

有几种方法可以解决您的问题；我最喜欢的是将被打印的东西作为参数传递：

```
ff = "ff"
def test(ff)
  puts ff
end 
```

更有可能的是，您将在类中封装您正在执行的任何操作并使用实例变量。

你也可以只使用一个全局变量 ($ff)，但这样很疯狂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T12:04:00.103

> 为什么我不能在 Ruby 的方法中访问局部变量？

因为它是一个*局部变量*。局部变量在定义它们的范围内是局部的。毕竟，这就是它们被称为“局部变量”的原因。

在这种情况下，您在脚本范围内定义了一个局部变量，因此它在脚本范围内可见，而*在其他任何地方都不*可见。

# ruby-on-rails-3 - 我需要在迁移+脚手架或不可知的数据库建模之间进行选择吗？

> ID：10779172
> 
> 赞同：0
> 
> 时间：2012-05-28T03:53:55.357
> 
> 标签：ruby-on-rails-3

我有一个数据库，我必须使用它来构建我的应用程序。它是由其他人建模的，但它遵循 Rails 约定。我可以很容易地用 Active Record 映射它。

我可以使用迁移对该数据库进行深刻的更改，还是应该继续使用图表进行建模并导出它？

在先前建模的数据库之上使用迁移或脚手架是一种好习惯吗？

因为在搭建脚手架之后，我通常会遇到一些邪恶的错误消息，说有一个迁移试图创建一个已经存在的表。当我删除有问题的迁移时，它只会变得更糟。

> 对于这个问题：不可知意味着使用任何外部建模工具（GUI SGBD 工具）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:05:20.663

你基本上可以走任何一条路线。您选择哪一种将取决于您的开发风格。

如果您使用 scrum/agile，那么它为未来进行迁移提供了强有力的理由。

迁移基本上也是 Rails 大图的一部分，并且是使其在开发过程中运行良好的部分之一。迁移的一个巨大好处是，您可以使用所需的任何数据库创建应用程序，这在将其移动到另一个提供商时非常有用*。但是，对于未完全完成迁移的数据库，将有两个步骤来执行此操作 - 在开始迁移时创建初始数据库“直到”，然后继续使用它们。

迁移和脚手架在现有数据库之上很好。迁移正在添加（或删除）新的 db 内容，并且脚手架可以创建新的 db 记录（在运行迁移时），它们确实有助于遵循 rails 标准并创建诸如常规命名的 .stub 测试文件之类的东西。

当第一次习惯迁移时，错误消息和语法非常令人抓狂，但随着时间的推移，你会变得更好。rails 中有很多类似的东西，即学习所有位并允许奇怪的错误消息。

在这方面提供帮助的工具是 mySQL Workbench（用于 mysql）和 ruby​​Mine IDE 每个工具都可以让您查看现有数据库，您甚至可以使用实际表将来自 mySQL 的 ERD 与 ruby​​Mine 的“模型依赖关系图”进行比较" ERD 使用 rails 模型中的信息。

**但是，移动实时应用程序的实际数据是另一回事。*

# java - windows上的java swing GUI错误

> ID：10779181
> 
> 赞同：1
> 
> 时间：2012-05-28T03:57:13.487
> 
> 标签：java, swing

我有一个我在 fedora 14 中开发的 java swing 应用程序，应用程序在 fedora 14 上正常工作，没有任何问题。但是当我在 Windows 7 上尝试它时，它无法正常工作。菜单栏显示父菜单项，但单击父菜单项时不显示菜单，选项卡式窗格显示为黑色。系统似乎冻结了。我在 widows xp 中尝试了这一点，并得到了与图形相同的结果。请告诉我申请中可能出现的错误。

这是起点的代码，

```
public class SplashScreen extends javax.swing.JFrame {    
    String filePath = File.separator;
    static final Logger logger = Logger.getLogger(SplashScreen.class);
    /** Creates new form SplashScreen */
    public SplashScreen() {
        initComponents();
        setSize(400, 250);
        setLocationRelativeTo(null);

        try {
            initSetup();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    private void initSetup() throws Exception {
        new Thread(new Runnable() {

            @Override
            public void run() {
                Connection con = null;
                try {
                    Thread.sleep(1000);
                    con = JDBCConnectionPool.getInstance().checkOut();

                    if (con == null) {
                        lblMessage.setText("No database connection found!");
                        logger.debug("No database connection found!");
                    } else {
                        lblMessage.setText("Loading the system...");
                    }

                } catch (Exception ex) {
                    ex.printStackTrace();
                    JOptionPane.showMessageDialog(null, ex.getLocalizedMessage());
                    logger.debug(ex.getMessage());
                } finally {

                    if (con != null) {

                        try {
                            PropertyConfigurator.configure(this.getClass().getClassLoader().getResource("conf/log4j.properties"));
                            logger.info("Starting the system!");                            

                        } catch (Exception e) {
                            e.printStackTrace();
                            JOptionPane.showMessageDialog(null, e.getLocalizedMessage());
                        }
                        new Login().setVisible(true);
                        dispose();
                        JDBCConnectionPool.getInstance().checkIn(con);
                        return;
                    }
                    lblMessage.setText("Error occured... exiting the system");
                    try {
                        Thread.sleep(500);
                        System.exit(0);
                    } catch (Exception ex) {
                        ex.printStackTrace();
                    }

                }
            }
        }).start();
    } 
```

登录屏幕

```
/** Creates new form Login */
    public Login() {

        userAuth = new UserAuthentication();
        initComponents();        
        add(pnlControlls);        
        addButtonListeners();
        addTextFieldListeners();
        setSize(400, 250);
        setTitle("Loging");
        //pack();

        setLocationRelativeTo(null);
    }

private void login() {        
        txtAlert.setText("");
        UserDTO user = new UserDTO();
        char[] p = txtPassword.getPassword();

        String pw = "";
        for (int i = 0; i < p.length; i++) {
            pw = pw + p[i];
        }

        user.setUsername(txtUsername.getText());
        user.setPassword(StringHasher.getInstance().getHash(pw));
        UserDTO authUser = userAuth.authenticate(user);

        if (authUser == null) {
            txtAlert.setText("<html>Internal error...</html>");
        } else {

            if (authUser.getIsActive() && authUser.isIsAvailable()) {
                Main main = Main.getInstance();
                CurrentUser.getInstance().setUserName(authUser.getUsername());
                Main.getInstance().setUserName(authUser.getUsername());
                Main.getInstance().setFullNameOnUserName(authUser.getFullName());
                Main.getInstance().prepareMenu();
                Main.getInstance().setVersion(System.getProperty("version"));
                main.setVisible(true);
                SwingUtilities.updateComponentTreeUI(main);
                this.dispose();

//here Main is the main user gui interface which user interacts with
            } else if (!authUser.getIsActive() && authUser.isIsAvailable()) {
                txtAlert.setText("<html>User account is inactive!</html>");
            } else {
                txtAlert.setText("<html>Username or password is incorrect, <br> please check again.</html>");
            }
        }
    } 
```

有时，当我最小化和最大化应用程序时会出现下拉菜单，但菜单重叠如下，

![在此处输入图像描述](../Images/f28eb98149112f1699bb92795cc11c59.png)

# python - Python 中的 Unorderable Type 错误是什么意思？

> ID：10779187
> 
> 赞同：7
> 
> 时间：2012-05-28T03:58:16.077
> 
> 标签：python, python-3.x

```
from urllib.request import urlopen
page1 = urlopen("http://www.beans-r-us.biz/prices.html")
page2 = urlopen("http://www.beans-r-us.biz/prices-loyalty.html")
text1 = page1.read().decode("utf8")
text2 = page2.read().decode("utf8")
where = text2.find(">$")
start_of_price = where + 2
end_of_price = where + 6
price_loyal = text2[start_of_price:end_of_price]
price = text1[234:238]
password = 5501
p = input("Loyalty Customers Password? : ")
passkey = int(p)

if passkey == password:
    while price_loyal > 4.74:
        if price_loyal < 4.74:
            print("Here is the loyal customers price :) :")
            print(price_loyal)
        else:
            print( "Price is too high to make a profit, come back later :) ")
else:
    print("Sorry incorrect password :(, here is the normal price :")
    print(price)
input("Thanks for using our humble service, come again :), press enter to close this window.") 
```

我遇到的问题是它一直运行到我得到 4.74 部分。然后它停止并抱怨一个不可排序的类型。我完全不明白这意味着什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T04:03:18.293

`price_loyal``find`是要与数值 (4.75) 进行比较的字符串（即使它包含您使用 找到的数字）？为了您的比较尝试

`float(price_loyal)`

**更新**（感谢@agf）：

使用 Python ***v 3.x***，您会收到您提到的错误消息。

```
>>> price_loyal = '555.5'
>>> price_loyal  > 5000.0
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    price_loyal > 5000.0
TypeError: unorderable types: str() > float()
>>> 
```

然而

```
>>> float(price_loyal) > 5000.0
False 
```

在这种情况下，Python 的版本会有所不同，因此总是提及正在使用的版本可能是个好主意。*以前 ... 使用 Python **v 2.x***

您的比较将被关闭，而不会将您转换`string`为`float`第一个。例如，

```
price_loyal
'555.5' 
```

这种与字符串和浮点数的比较给出了`True`

```
price_loyal > 5000.0
True 
```

与 float 和 float 的比较给出`False`了它应该的结果

```
float(price_loyal) > 5000.0
False 
```

可能还有其他问题，但这看起来像一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T04:02:30.863

我不是 Python 编码员，但它看起来像是在抱怨你试图将一个字符串与一个浮点数进行比较，我猜 Python 不会为你而杂耍。

您应该将字符串转换为浮点数，但这是在 Python 中完成的。

# c++ - srand 导致我的程序冻结

> ID：10779188
> 
> 赞同：1
> 
> 时间：2012-05-28T03:58:18.020
> 
> 标签：c++, encryption, rsa, srand

我已经在 C++ 中实现了 RSA 算法，程序正在运行，但是 srand 调用使​​程序变慢。我使用 srand 生成两个素数和加密密钥 (e)。这是片段

```
...............................................
do
{
    p = make_prime_number();
    q = make_prime_number();
}while(p == q);

phi = (p - 1) * (q - 1);
n = p * q;

do
{
    e = random_builder (20);

    int *t = extended_gcd (e, phi);
    d = t[0];
}while(gcd(e, phi) != 1 || d < 1 || d >= n );
...............................................

int random_builder(const int max)
{
    srand(time(NULL));

    return rand() % max + 1;
}

bool is_prime(const int num)
{
    for(int i = 2; i <= num/2; i++)
        if(num % i == 0) 
            return false;

    return true;
}

int make_prime_number()
{
    int num;

    do
    {
        num = random_builder(20);
    }while(not is_prime(num));

    return num;
} 
```

我们可以通过修改 srand 中的种子来加速这个过程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T04:00:27.730

无需`srand()`多次调用。在程序开始时调用*一次*，然后不理会它。

`srand()`使用特定种子值调用后，由 生成*相同*的随机数序列`rand()`。*因此，由于您以秒*为单位调用当前时间，因此您的函数**每秒**`random_builder()`仅返回一次不同的值。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:58:55.647

你不应该使用`rand()`或根本不应该使用`srand`。您应该使用种子良好的加密 PRNG。`/dev/urandom`在 linux 上，你可以简单地从你可以使用的 windows 上读取`CryptGenRandom`。**

# facebook-fql - Facebook FQL 从应用程序获取用户状态

> ID：10779192
> 
> 赞同：0
> 
> 时间：2012-05-28T03:59:33.513
> 
> 标签：facebook-fql

我想查询由 app_id 生成的用户状态，但它不起作用。

这什么都不返回：

SELECT message FROM status WHERE uid = me() IN app_id = xxxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:08:26.733

FQL 文档说，负责发布特定状态的应用程序 ID 列是`source`. 有了这些知识，就很容易构建一个有效的查询：

```
SELECT message FROM status WHERE uid = DESIRED_USER_ID AND source = DESIRED_APP_ID 
```

我自己测试了一下，得到了预期的结果。

# c++ - 使用 STL 对结构进行排序：算法

> ID：10779195
> 
> 赞同：3
> 
> 时间：2012-05-28T03:59:47.837
> 
> 标签：c++

我正在寻找一种使用 STL:Algorithm 库的 sort() 函数对结构进行排序的方法。我发现了一些使用矢量的代码来执行此操作。例如

```
struct person {
   std::string name;
   int age;
};
bool sort_by_name( const person & lhs, const person & rhs )
{
   return lhs.name < rhs.name;
}
bool sort_by_age( const person & lhs, const person & rhs )
{
   return lhs.age < rhs.age;
}
int main() {
   std::vector<person> people;
   // fill in the vector
   std::sort( people.begin(), people.end(), sort_by_name );
   std::sort( people.begin(), people.end(), sort_by_age );
} 
```

我想知道是否可以在不使用矢量的情况下对其进行排序。？？如果是那怎么办？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:02:27.950

**[std::sort](http://www.cplusplus.com/reference/algorithm/sort/)**算法采用 3 个参数 ：

*   随机访问迭代器到初始位置。
*   随机访问迭代器到最终位置和
*   排序标准

因此，只要您有***任何***可以提供初始和最终迭代器的类型并提供排序标准，就可以`std::sort`在该类型上使用。
尽管排序标准具有***严格的弱排序***，但这很重要。

# android - 如何检测用户点击了通知然后重新启动计时器？？？安卓

> ID：10779200
> 
> 赞同：-2
> 
> 时间：2012-05-28T04:01:28.510
> 
> 标签：android

我有一个计时器，当活动开始时运行..说 10 秒后会出现一条通知，指出会话将在 5 秒后到期。如果用户单击通知，他将被重定向到最后一页并重新启动计时器，如果没有出现新通知，则会话已过期...如何检测用户是否单击了通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:23:39.537

您应该使用 Intent 中的 Intent与用户单击它的情况`Notification`进行交流。`Activity`

当用户选择通知时，Android 会触发一个`Intent`由 这应该在[onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)中处理。`Notification``Activity``Activity's`

# mongodb - 我怎样才能避免mongodb竞争条件

> ID：10779205
> 
> 赞同：-2
> 
> 时间：2012-05-28T04:02:32.677
> 
> 标签：mongodb, atomic, race-condition

我想更新mongodb中的一些数据，我的逻辑如下：

```
#find the specific document with "md5,time,size",
if collection.find({"src_md5":file_md5,"src_time":file_time,"src_size":file_size}).count() == 0:
    #if not found
    #   find the idx,if idx is not yet exist,set idx equa 1

    if collection.find({},{"idx":1}).count() == 0:
        idx = 1

    #if idx is alread there, sort idx and get the biggest idx
    else:
        idx = collection.find({},{"idx":1}).sort('idx',-1).limit(5)[0]['idx']
        idx = idx + 1

        #insert the info with idx
        if not self.insertFileInfo(collection,file_obj,file_md5,file_time,file_size,long(idx)):
            return None
#if the specific document with "md5,time,size" is found
else:
#just get the idx with the specific md5
    idx = collection.find({"src_md5":file_md5,"src_time":file_time,"src_size":file_size},{"idx":1})[0]['idx']
    return None 
```

我将在 4 台机器上运行上述代码，这意味着 4 个进程将几乎同时更新 mongodb，我如何确保操作的原子性？我记录的架构是

```
{"src_md5":"djapijfdakfiwqjfkasdj","src_size":2376498,"src_time":1338179291,"idx":1}
{"src_md5":"jdfipajkoijjipjefjidwpj","src_size":234876323,"src_time":1338123873,"idx":2}
{"src_md5":"djapojfkdasxkjipkjkf","src_size":3829874,"src_time":1338127634,"idx":3} 
```

它不是一个简单的自动增量键，它应该在 md5、大小、时间发生变化时增加，并且应该与它们一起插入，作为记录。我在 {"src_md5","src_time","src_size"} 上创建一个复合唯一索引，并在 {"idx"} 上创建一个唯一索引，但在我插入新信息之前，我应该让 idx 已经存在，然后增加它。有两种情况： 1，idx与特定的md5，大小，时间，如果已经存在，则返回idx 2，如果不存在，将idx增加1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:23:19.110

[在这个问题](https://stackoverflow.com/questions/1352671/unique-ids-with-mongodb)中讨论了一个类似的问题。

您想要做的类似于拥有一个唯一的单调递增键，您可以将其保存在自己的集合中并使用 $inc 递增，如链接问题中所述。

这将确保您永远不会尝试使用相同的 idx 两次。现在仍有可能两个线程将尝试插入 (md5,size,time) 与两个不同 idx 键的新组合，但第二个线程将失败，因为您在 (md5,size,time) 上拥有唯一索引.

现在唯一存在的竞争条件是当第二个线程由于唯一索引而无法插入时，您最终会得到一个未使用的 idx 值（即，每次发生这种情况时，增加 idx 值将跳过一个）。这对你来说有多大的问题？如果很大，您将不得不强制锁定您的应用程序代码，或者您可以更改模式的结构来处理这种情况。

# c# - C# 列表 and List Further extending the question: C# List public class SampleInformation { public string Nutrie 问问题 问问题 2012-05-28T04:02:39.787 284 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. c# 4 1 回答 1 This answer is useful 0 通过以下方式创建 SampleInformation 对象列表： List <sampleinformation>sampleList = new List<sampleinformation>(); //Creates the list SampleInformation sample = new SampleInformation(); //Your object sampleList.Add(sample); //Add your object to the list 这是你想要的？ 于 2012-05-28T06:23:25.727 回答 Related 1 jquery - 如何从 jQuery 插入的选择中获取值 3 php - php mysql左连接计数列相同的ID 1 linux - 汇编指令的含义 1 android - 获取启动器启动的应用程序的上下文 2 php - preg_replace 包含一个 +，任何内容都以字符串开头并以空格或句点结尾 2 html - 使用百分比和相对定位时，有没有办法让我的流体设计不被破坏？ 0 javascript - 识别打开的窗口是弹出窗口还是IE中的普通窗口 3 javascript - 按下按钮会使javascript无意中重新加载页面 1 java - 为什么在休眠批处理中使用 openSession() 1 mod-rewrite - 如果缺少尾部斜杠，ManagedFusion Rewriter 404？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10779206
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：c#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:23:25.727

通过以下方式创建 SampleInformation 对象列表：

```
List<SampleInformation> sampleList = new List<SampleInformation>(); //Creates the list
SampleInformation sample = new SampleInformation(); //Your object
sampleList.Add(sample); //Add your object to the list 
```

这是你想要的？</sampleinformation></sampleinformation>

# javascript - 如何绘制和椭圆并在 Google 地图上显示

> ID：10779208
> 
> 赞同：2
> 
> 时间：2012-05-28T04:02:47.087
> 
> 标签：javascript, google-maps

我知道谷歌地图提供了用于绘制圆、多边形但不是椭圆的 API。

有谁知道如何画一个椭圆，或者可以提供一个例子的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:54:44.867

看看[这个扩展](http://econym.org.uk/gmap/eshapes.htm)，它提供了绘制额外形状的能力。

[这个例子](http://econym.org.uk/gmap/example_eshapes.htm)使用了上面提到的扩展。

# frameworks - 如果我想使用 Lua 进行 Web 开发，我该怎么做呢？我应该只使用 Rails 吗？

> ID：10779210
> 
> 赞同：0
> 
> 时间：2012-05-28T04:03:03.580
> 
> 标签：frameworks, web, lua

我想获得学习一门新语言的兴奋。我正在考虑使用 Lua 开发一个网站。我的问题和疑虑：

1.  我应该这样做，还是应该坚持使用 Rails 之类的东西。
2.  我用什么将 Lua 渲染成动态网站？
3.  我会使用什么 IDE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:51:12.093

旧的 lua web 框架是 kepler；他们的 MVC 框架是[轨道](http://keplerproject.github.com/orbit/index.html)

您还可以查看[Tir](http://tir.mongrel2.org/)

你可以使用任何你想要的“IDE”，大多数人只要坚持他们最喜欢的（程序员的）文本编辑器。（如果有帮助，我使用崇高）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:30:20.940

您可以使用 Lua 进行 Web 开发。试试开普勒 (http://www.keplerproject.org/)。您可以使用 gVIM。

# android - 如何在 ListView 中消失某些单元格

> ID：10779211
> 
> 赞同：0
> 
> 时间：2012-05-28T04:03:18.317
> 
> 标签：android, listview, baseadapter

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewTag viewTag;
    if(convertView == null) {
        convertView = myInflater.inflate(R.layout.row_item, null);
        viewTag = new ViewTag((LinearLayout)convertView.findViewById(R.id.row), (TextView)convertView.findViewById(R.id.tv));
        convertView.setTag(viewTag);
    }
    else {
        viewTag = (ViewTag) convertView.getTag();
    }

    viewTag.tv.setText(lvt.getTextAt(position));
    viewTag.tv.setVisibility(View.VISIBLE);

    boolean show = lvt.getShowAt(position);
    if(show) {
        viewTag.tv.setVisibility(View.GONE);
        viewTag.ll.setVisibility(View.GONE);
    }
    else {
        viewTag.ll.setVisibility(View.VISIBLE);
    }

    return convertView;
} 
```

我在 BaseAdapter 中使用上面的代码来显示列表视图。
lvt 是一个应用程序全局数据。
如果显示为真，我想消失单元格。
但不删除数据。
但是我的方法不会显示数据，而是显示分隔线。
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:10:56.003

你不能做你所要求的。
如果 BaseAdater.count() 返回所有项目的计数（甚至是你不想显示的项目），那么你不能告诉 getView() 方法“忽略”一些逻辑项目。

我建议您做的是过滤您的数据列表（创建一个新的 lvt），使其仅包含您希望 listView 显示的项目，然后才 - 适配器应该使用这个新的逻辑数据。

在您的情况下，正如您所怀疑的那样-“lvt.getShowAt(position) = false”应该是您的过滤器指标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:12:07.503

如果您想*隐藏*ListView 中的项目，我希望您单独`lvt`（仅显示真实）而不是尝试操纵视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:47:22.653

我修改 getCount 如下：

```
@Override
public int getCount() {
    int count = 0;
    int i;
    for(i = 0; i < lvt.sizeTestArray(); i++) {
        if(!lvt.getfiv1At(i)) {
            count++;
        }
    }
    return count;
} 
```

并在 getView 中更改位置，如下所示：

```
 int i;
    int count = 0;
    for(i = 0; i < lvt.sizeTestArray(); i++) {
        if(!lvt.getfiv1At(i)) {
            if(count == position) {
                position = i;
                break;
            }
            count++;
        }
    } 
```

现在看来做得很好。
但我不确定现在是否存在任何错误。

# java - 用于字符串相等检查的 Java 性能查询

> ID：10779213
> 
> 赞同：0
> 
> 时间：2012-05-28T04:04:07.773
> 
> 标签：java, performance, list

我在列表中有一组非常大的字符串 URL 模式，例如 {http://www.imdb.com, [http://www.amazon.com](http://www.amazon.com) ,...}。

我得到这样的输入 URL：

```
http://www.imdb.com/title/tt1409024/ 
```

对于我的应用程序来说，这个 URL 实际上是从[http://www.imdb.com](http://www.imdb.com)形成的，所以这两个应该是相等的`true`。

为了实现这一点，我可以从输入 URL 中提取基本 URL：

```
http://www.imdb.com/title/tt1409024/ => http://www.imdb.com 
```

现在我需要将此提取的 URL 与 URL 的主列表进行比较，如果找到匹配项，则将基本 URL 存储在数据库中。因此，本质上，对于我的每个输入（基本）URL，我都在主列表中为提取的 URL 寻找匹配项，如果找到匹配项，我会将输入（基本）URL 存储在数据库中。

为了实现相等/匹配逻辑，我有两种可能的解决方案。请权衡哪个更好：

1.  将 URL 的主列表放入数组列表中，并使用数组列表`contains`方法
2.  将主列表放入数据库中，并使用查询来检查输入的 url

谁能告诉我哪一个在性能方面会更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:12:24.120

您的任何建议都不合适。对于 ArrayList，您必须在列表的一半（平均）中*线性*搜索要检查的每个 URL。

对于数据库（大概在磁盘上？），您会为每个查询招致潜在的昂贵的数据库查找。

1000 个 URL 模式并不是很多。将列表保存在内存中并使用适当的数据结构 - [HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)会做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:10:55.410

如果您将站点的 url 放入[HashSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashSet.html)中，您将获得与您的 arraylist 解决方案相同的行为，但它将是一个恒定时间查找，而不是列表长度的变量。

数据库解决方案对于您的问题可能是矫枉过正，因为开销将超过搜索效率的提高。

# javascript - 检测是否在 html5 视频播放器中设置了视频源

> ID：10779214
> 
> 赞同：1
> 
> 时间：2012-05-28T04:04:16.037
> 
> 标签：javascript, html, video

在我的应用程序中，我需要确保用户已将视频设置为我的 html5 视频播放器的源，然后再继续执行其他操作。所以我尝试了这个（在 Firefox 中使用 Firebug）：

当用户为视频播放器设置源时

```
vp = $('#myvideoplayer')
vp.attr('src')  --> "blob:5c254454-6c4e-4b69-b381-9ad60d6b1c4a" 
```

当没有为视频设置来源时

```
vp.attr('src')  --> undefined 
```

我可以用它来检测用户是否设置了视频源吗？

```
if(vp.attr('src') != undefined){
   let_user_do_next_action();
} 
```

或者有没有更好的方法？

ps：

我正在使用 HTML5 文件输入小部件设置视频源，如下所示。（这仅适用于 Firefox，因为 Chrome出于某种原因不允许使用`createObjectURL`from 。）`window.webkitURL`

```
var file = $('#fileselect').get(0).files[0];
if (file==undefined){
    alert('no file chosen');
}
var myURL = window.URL || window.webkitURL;
var fileURL = myURL.createObjectURL(file);
if(fileURL){
    player = $('#myvideoplayer');
    player.src=fileURL;
    player.load();
}
return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:15:10.297

该代码应该可以工作，或者如果您想万无一失，请检查。`typeof vp.attr('src') == "undefined"`尽管如果您不使用 jQuery，您可能需要检查`element.hasAttribute("src")`。

关于`window.webkitURL.createObjectURL`，我认为当您在本地测试 Chrome 时（例如在 URL 上），Chrome 会限制[某些](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)`file://`内容，您要么必须在 localhost 上设置一个简单的 HTTP 服务器，要么使用.`--allow-file-access-from-files`

# java - 有没有一种 Groovier 的子字符串方法？

> ID：10779218
> 
> 赞同：2
> 
> 时间：2012-05-28T04:04:34.190
> 
> 标签：java, http, groovy

这些天我正在使用更多的 groovy，我遇到了一个问题，我想将子字符串提升到一个已知字符。简而言之，我试图从 HTTP 标头中获取会话 cookie。我的代码是这样丑化的：

```
def cookie = connection.headerFields.find{ it.key =='Set-Cookie'}.value[0]
cookie = cookie[0..cookie.indexOf(';')-1] 
```

其中 connection 是对 URLConnection 的引用。如果没有额外的操作，我会得到一个像`"[JSESSIONID=72Q4TCEEDC21GX9152E7702A23DC3854E; Path=/; Secure]"`. 最终结果是预期的会话 id `"JSESSIONID=72Q4TCEEDC21GX9152E7702A23DC3854E"`。但我不禁想到必须有一种更时髦的方法来解决这个问题。简而言之，我错过了一个`substringToString(';')`我认为我可能至少在另一种语言中看到过的东西。总体而言，我认为可能有 4-5 种更好的方法来获取 cookie，而无需其他路径和安全措辞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:26:19.113

看起来你把事情复杂化了。为什么你不能这样做：

```
//  if you want all cookies
def cookies = request.cookies  

// if you need a particular cookie
def cookie = request.cookies.find { it == 'cookie-name' } 
```

上述方式适用于控制器。从服务层你需要先做这样的事情：

```
def request = RequestContextHolder.currentRequestAttributes().request 
```

虽然我不建议这样做。

# php - 将会话传递给 TWIG 模板

> ID：10779219
> 
> 赞同：3
> 
> 时间：2012-05-28T04:04:44.223
> 
> 标签：php, twig, slim

当我想`$_SESSION['session'];`使用超薄微框架进入树枝模板时遇到问题。

这是我的代码：

```
<!DOCTYPE html>
   <html>
      <head>
         <title>{{ title }} </title>
      </head>

     <body>
      <p> welcome <?php echo $_SESSION['username']; ?>                                                                                                                                       
         <p> {{ body }} </p>
       <a href="http://localhost/slim/public_html/logout">logout</a>
     </body>
  </html> 
```

我无法使用该代码获取会话用户名。

任何建议如何将会话传递给树枝模板？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T08:23:47.833

您应该将 session 注册为 twig 全局，以便在您的模板中可以访问它。

```
//$twig is a \Twig_Environment instance
$twig->addGlobal("session", $_SESSION); 
```

在您的模板中：

```
{{ session.username }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:05:11.810

我也在使用 Slim 和 Twig。我的课：

```
class twigView extends Slim_View {
    public function render( $template) {
        $loader = new Twig_Loader_Filesystem($this->getTemplatesDirectory());
        $twig = new Twig_Environment($loader);
        $twig->addGlobal("session", $_SESSION);
                return $twig->render($template, $this->data);
    }
} 
```

如您所见，我添加了`addGlobals`. 现在它可以正常工作了，我可以使用`{{session.user_id}}`等等。

我的 index.php 的一部分：

```
 require './lib/twigView_class.php';
    require_once './lib/Twig/Autoloader.php';
    require './lib/Paris/idiorm.php';
    require './lib/Paris/paris.php';

    Twig_Autoloader::register(); 
```

我希望它会帮助你。

但是在 Twig 中使用“全局”是否安全？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-15T11:40:52.957

这就是我使用 Slim Framework ver3 实现它的方式

```
$container['view'] = function ($container) {

    ...
    $view = new Twig($settings['view']['template_path'], $settings['view']['twig']);
    $view->getEnvironment()->addGlobal('session', $_SESSION);

    ...

    return $view;
}; 
```

然后访问 Twig 模板中的会话，例如

```
<a href="#" class="dropdown-toggle" data-toggle="dropdown">
  <img src="#" class="img-circle">&nbsp;{{ session.username }}<b class="caret"></b>
</a>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T13:53:56.170

在 php 文件中：

```
$app->get('/your_route_here', function() use ($app) {
$app->render('view_for_route.twig', array('session_username' => $_SESSION['username']) );}); 
```

在树枝文件中：

```
<p> welcome {{ session_username }} </p> 
```

您应该通过关联数组将 PHP 文件中的值传递给 Twig。

# c# - 以编程方式设置水晶报表列的字体样式？

> ID：10779221
> 
> 赞同：2
> 
> 时间：2012-05-28T04:05:05.620
> 
> 标签：c#, fonts, crystal-reports, runtime, report

如何以编程方式更改（设置）水晶报表列的字体（不想在设计时使用“格式编辑器”）？用于访问水晶报表详细信息部分的字段（列）的语法是什么？

提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-23T06:29:23.613

**在 Crystal Report 运行时更改字体样式、字体大小和字体使用以下代码，这将正常运行：**

您可以根据您的条件使用 TextObject 或 FieldObject。这里使用的是 FieldObject。

```
 FieldObject MyText (FieldObject)Repotrdocumentobject.ReportDefinition.ReportObjects[i];

MyText.ApplyFont(new Font("Arial", 11f,FontStyle.Bold)); 
```

这里**i**是 Crystal Report 中 FieldObject 的数量，**11f**是字体大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:22:36.970

希望我刚刚拼凑的这段代码片段会有所帮助：

```
 ReportDocument rpt = new ReportDocument();
        rpt.Load(@"C:\LT0001_COBDEN.rpt");
        foreach (Area a in rpt.ReportDefinition.Areas)
        {
            string s = a.Name;
        }
        foreach (Section c in rpt.ReportDefinition.Sections)
        {
            string s = c.Name;
        }

        ObjectFormat of = rpt.ReportDefinition.Sections["GroupHeaderSection9"].ReportObjects["Text21"].ObjectFormat;
        TextObject to = (TextObject)rpt.ReportDefinition.Sections["GroupHeaderSection9"].ReportObjects["Text21"];
        to.Color = Color.Red;

        crystalReportViewer1.ReportSource = rpt;
        crystalReportViewer1.Refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T10:54:00.547

您可以将 CRAXDRT 添加到您的参考文献中，然后像这样使用它

```
 CRAXDRT.Report report1 = new CRAXDRT.Report();
        CRAXDRT.Application app1 = new CRAXDRT.Application();

        stdole.IFontDisp myFont;
        report1 = app1.OpenReport("Test.rpt", OpenReportMethod.OpenReportByDefault);

        foreach (CRAXDRT.Section sec in report1.Sections)
        {
            for (int i = 1; i < sec.ReportObjects.Count + 1; i++)
            {
                 object objMain, objChange;
                objMain = report1.Sections[sec.Name].ReportObjects[i];

                try
                {
                    objChange = objMain;
                    CRAXDRT.TextObject to1 = (CRAXDRT.TextObject)objChange;
                    myFont = to1.Font;
                    myFont.Name = "Arial";
                    to1.Font = myFont;

                }
                catch (Exception)
                {
                    try
                    {
                        objChange = objMain;
                        CRAXDRT.FieldObject to1 = (CRAXDRT.FieldObject)objChange;
                        myFont = to1.Font;
                        myFont.Name = "Arial";
                        to1.Font = myFont;
                    }
                    catch (Exception){}
                }
            }

        } 
```

# java - 标记程序计算？

> ID：10779228
> 
> 赞同：-1
> 
> 时间：2012-05-28T04:06:58.240
> 
> 标签：java, arraylist

我必须制作一个标记程序，显示用户输入的一组标记和一些计算（平均值、最大值、最小值、范围等）。它还应该能够按升序对标记进行排序。我设法（在帮助下）显示标记并对它们进行排序，但我无法让程序进行计算并显示它们。这是我到目前为止的所有代码：

```
 ArrayList <Integer> marks = new ArrayList();

 private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {
    Collections.addAll(marks, (Integer.parseInt(markInput.getText())));

    StringBuilder text = new StringBuilder();
    for (Integer mark: marks) {
    text.append(mark.toString()).append('\n');
    }

    markdisplayTextArea.setText(text.toString());
    }

 private void sortButtonActionPerformed(java.awt.event.ActionEvent evt) {
    Collections.sort(marks);

    StringBuilder text = new StringBuilder();
    for (Integer mark: marks) {
    text.append(mark.toString()).append('\n');
    }

    markdisplayTextArea.setText(text.toString());
    }

 private void analyzeButtonActionPerformed(java.awt.event.ActionEvent evt) {

    analyzeTextArea.setText("Class average:" +);
    analyzeTextArea.setText("Maximum mark:" +);
    analyzeTextArea.setText("Minimum mark:" +);
    analyzeTextArea.setText("Range of marks:" +);
    } 
```

按下按钮`TextArea`时，计算必须显示在 a中。`"analyze"`我目前不知道如何进行计算或显示它们。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:17:06.000

您必须实现`actionPerformed()`方法并检查是否单击了相应的按钮。

```
 public void actionPerformed(ActionEvent e) {
        if(e.getSource()==addButton) {
                        //do stuff
        }
        else if(e.getSource()==sortButton) {
              // do stuff
        }
        else if(e.getSource()==analyzeButton) {
              // do stuff
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T13:46:18.693

这是我为您的问题建议的代码...

```
ArrayList<Integer> marks = new ArrayList<Integer>();

// Called when the user clicks a button
public void actionPerformed(ActionEvent e) {
    Object clickedButton = e.getSource();
    if(clickedButton == addButton) {
        addButtonActionPerformed();
    }
    else if(clickedButton == sortButton) {
        sortButtonActionPerformed();
    }
    else if(clickedButton == analyzeButton) {
        analyzeButtonActionPerformed();
    }
}

 private void addButtonActionPerformed() {
    Collections.addAll(marks, (Integer.parseInt(markInput.getText())));

    StringBuilder text = new StringBuilder();
    for (Integer mark: marks) {
        text.append(mark.toString()).append('\n');
    }

    markdisplayTextArea.setText(text.toString());
}

 private void sortButtonActionPerformed() {
    Collections.sort(marks);

    StringBuilder text = new StringBuilder();
    for (Integer mark: marks) {
        text.append(mark.toString()).append('\n');
    }

    markdisplayTextArea.setText(text.toString());
}

private void analyzeButtonActionPerformed() {

    String output = "Class average:" + calculateAverage() + "\n" +
                    "Maximum mark:" + calculateMaximum() + "\n" +
                    "Minimum mark:" + calcualteMinimum() + "\n" +
                    "Range of marks:" + calculateRange();

    analyzeTextArea.setText(output);
}

private int calculateAverage(){
    // calculate and return the answer
}

private int calculateMaximum(){
    // calculate and return the answer
    int maximum = 0;
    for (Integer currentMark: marks){
        if (currentMark > maximum){
            maximum = currentMark;
        }
    }
    return maximum;
}

private int calcualteMinimum(){
    // calculate and return the answer
}

private int calculateRange(){
    // calculate and return the answer
} 
```

现在，这些是我的主要更改，以及我做出这些更改的原因...

1.  我添加了一个`actionPerformed()`方法。如果你还没有这个，它可以让你监听按钮点击。您需要`myButton.addActionListener(this);`为每个按钮添加一行。您可能还需要将您的`public class MyClass`行更改为 say`public class MyClass implements ActionListener`并添加一行`import java.awt.event.*`
2.  我更改了您的`analyzeButtonActionPerformed()`方法，以便它输出您请求的值。现在您需要`calculate()`在最后实现这些方法 - 我已经为您完成了其中一个，以便为您提供总体思路。当您单击`analyze`按钮时，它应该完成所有 4 次计算并将答案放入`textarea`.

Why don't you have a bit of a look at my changes, and see whether you can see what they're supposed to be doing. Have a go at implementing some of the changes, and the calculate methods, and see if you can get it working. Don't just copy-paste my answer - make some changes bit-by-bit to see how it all works, and fix any compilation errors as they appear.

# git - 防止将来自 master 的文件与 Git 合并

> ID：10779235
> 
> 赞同：5
> 
> 时间：2012-05-28T04:08:48.117
> 
> 标签：git, merge, branch, git-branch, branching-and-merging

在[另一个问题](https://stackoverflow.com/questions/3868491/git-ignore-some-files-during-a-merge-keep-some-files-restricted-to-one-branch)中，建议使用它来`.gitattributes`跟踪文件但不合并到不同的分支中，但我下面的用例似乎不起作用..

```
mkdir git
cd git
git init
echo "B" > b.txt
git add b.txt 
git commit -m 'Initial commit'

echo "b.txt merge=keepMine" > .gitattributes
git add .gitattributes 
git config merge.keepMine.name "always keep mine during merge"
git config merge.keepMine.driver "keepMine.sh %O %A %B"
git commit -m 'Ignore b.txt'

git checkout -b test # Create a branch
git checkout master # Back to master and make change
echo "Only in master" > b.txt
git commit -a -m 'In master'

git checkout test
git merge master # The change in b.txt is being merged... 
```

任何的想法？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:30:29.560

我怀疑它不起作用，因为没有合并冲突。

但是，我可以确认它`git merge master --strategy=ours`按预期工作。

这可能是您正在寻找的内容：[如何告诉 Git 始终选择我的本地版本](https://stackoverflow.com/questions/928646/how-do-i-tell-git-to-always-select-my-local-version-for-conflicted-merges-on-a-s)

如果您想为特定文件指定特定的合并策略，您真正需要做的是编写自定义合并驱动程序并在您的存储库配置中指定您希望将该合并驱动程序用作默认值。有关如何使用它，请参阅上面的链接。

简而言之，它在您的用例中不起作用的原因是因为**您的用例不是 merge**。它只描述了 master 上的一系列更改，并创建了一个名为 test 的临时分支，然后稍后将其移至 master。**当您在测试分支上时，您从未真正引入提交**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:34:02.430

[carleeto](https://stackoverflow.com/users/13760/carleeto)提到的自定义合并驱动在“ [Tell git not to merge binary files but to choose](https://stackoverflow.com/questions/2920594/tell-git-not-to-merge-binary-files-but-to-choose/2920807#2920807) ”中有说明：

您可以在`.gitattributes`文件中声明所需的合并类型：

```
echo yourConfigFile merge=keepMine > parentDirectory\.gitattributes 
```

# orm - cf9 orm entityload 随机顺序

> ID：10779237
> 
> 赞同：1
> 
> 时间：2012-05-28T04:09:37.163
> 
> 标签：orm, coldfusion

我将如何使用其结果集以随机顺序进行实体加载？

因此，如果我这样做`entityload("modelName")`，将如何设置它的排序顺序，以便每次调用它时随机不同？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:44:46.487

好吧，简短的回答是 entityLoad() 真的很难。但是，使用 HQL，它实际上并不算太糟糕。

大多数数据库语言都有随机函数。因此，使用内置的艺术表和实体，您可以使用 ormExecuteQuery 生成结果：

```
<cfscript>
hql = " SELECT DISTINCT artName
        FROM art
        ORDER BY RANDOM() ";

results = ormExecuteQuery(hql);

for( art in results ) {
    writeOutput(art & "<br/>");
}
</cfscript> 
```

因为它不会返回任何空记录，所以每次都会得到一个随机结果集。

希望这会有所帮助^__^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T01:39:58.797

我使用的另一种方法是在我的表（和模型）中创建一个 sortOrder 列和一个随机填充它的函数。可能不如 jCaito 的选项那么有效，但有一些好处。

```
public function getRandom(){
    randomizer();
    return entityload("provider", {}, "sortOrder");
}

private void function randomizer(){
    source = entityload("provider");
    for(i=1;i<=ArrayLen(source);i++){        
        source[i].setSortOrder(randRange(1,999));        
    }
} 
```

# python - 如何在python中绘制mysql数据？

> ID：10779244
> 
> 赞同：0
> 
> 时间：2012-05-28T04:10:39.703
> 
> 标签：python, mysql, sql

假设我每 15 分钟获取一次销售数据。销售交易存储在 mysql 数据库中。我需要能够绘制这些数据，并允许用户重新调整时间尺度。该信息将绘制在 django 网站上。

我将如何做这件事，有没有我可以研究的开源工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:34:27.557

[**HighCharts**](http://www.highcharts.com/)是一个非常好的功能丰富的图表库，用纯 JavaScript 编写。它非常动态，并且有很多可用的[**演示**](http://highcharts.com/demo/)展示了创建图表所涉及的所有代码。您还可以查看[**文档**](http://www.highcharts.com/ref/)以获取有关所有功能以及如何操作它们的完整详细信息。要开始使用，请查看 [**如何使用**](http://www.highcharts.com/documentation/how-to-use)。您还可以在此处找到很多关于 SO 的有用信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:21:02.547

HighCharts 具有很棒的功能，您还可以使用该功能构建数据透视图，但它们会向您收费。您也可以查看 Py Chart

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T10:03:08.510

我们使用了[matplotlib](http://matplotlib.sourceforge.net/) python 包，它运行良好。

# java - 在java中比较2个带有不同标签的xml

> ID：10779245
> 
> 赞同：-1
> 
> 时间：2012-05-28T04:10:46.313
> 
> 标签：java, xml, xmlunit

我想比较 2 个 XML，它们具有相同的数据，但标签名称不同。我需要比较两个（输入和输出）并使用 JAVA 显示结果。

例如。

XML 1

```
<hometown>newyork</hometown>
... 
```

XML 2

```
<city>newyork</city> 
```

我需要验证`hometown`XML 1 中的标记值是否与 XML 2 中的标记值相同`city`。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:22:01.007

这个问题相当广泛。鉴于提供的信息，我认为使用 DOM 或 JDOM 等文档树的内存表示是一个好主意。在比较具有不同结构的文档时，像 StAX 或 SAX 这样的流解析器将更难使用。如果两种格式都具有相似的表现力，另一种方法是使用 XML 转换将一个文档转换为另一个文档的格式。然后将两者规范化，然后进行直接的文本差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T21:53:44.823

好吧，我采取了一种方法，例如，我创建了一个映射文档，它说明输入中的哪个标签映射到输出中的哪个标签。然后我解析输入和输出 XML 并将它们转换为 HashMap（键值对）。现在，当我想比较输入 XML 中的值时，我会遍历 inputTags 列表并从映射表中搜索标签的对应项，一旦获得输入和输出标签的值，我就会比较它并发布结果

# c++ - 试图理解适用于我的代码的得墨忒耳法则

> ID：10779252
> 
> 赞同：2
> 
> 时间：2012-05-28T04:11:33.053
> 
> 标签：c++, oop, law-of-demeter

我有一个简单的`Store`类，其中包含一个`Inventory`. `Inventory`包含 s 的列表`Item`。为了修改`Item`s 中的一个`Inventory`，我必须写：

```
Store store( /*parameters*/ );
store.accessInventory(/*password*/).accessItem(/*item name*/).setPrice(9.50); 
```

据我了解，这违反[了得墨忒耳法则，](http://en.wikipedia.org/wiki/Law_of_Demeter)因为`Store`必须通过`Inventory`并进入`Item`才能调用`setPrice()`。

我想调和这种违法行为与典型案例中的违法行为，即纸童和客户。在报童的例子中，报童通过假设他会用钱包付款而对客户“了解”太多。如果客户的付款方式发生变化，报童也必须改变。

我的代码中的哪些假设*可能会*导致类似纸男孩示例中遇到的问题？

我知道法律实际上更像是一个指导方针，在这种情况下遵守它可能不是最好的主意，但我想在继续之前至少了解一下法律。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:40:44.770

您的代码假设 Inventory 对象是价格变化时唯一需要通知的对象。

想象一下，除了包含物品清单外，您的商店还挂有一些广告海报。

如果你遵循得墨忒耳法则，你的 Store 对象可能有一个像这样的好方法：

```
void Store :: SetItemPrice(string item_name, float item_price)
{
   inventory.SetItemPrice(item_name, item_price);

   for (int i=0; i<num_advertising_posters; i++)
   {
      // Update any posters with the new price!
      if (advertising_posters[i].advertised_item == item_name)
      {
         advertising_posters[i].SetAdvertisedPrice(item_price);
      }
   }
} 
```

...但是如果您改为允许调用代码直接访问库存对象，那么就没有简单/万无一失的方法来确保在价格更新时始终更新广告，因此很有可能在某些时候您的商店广告海报将显示产品的旧/错误价格。得墨忒耳法则更容易避免这种错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:47:51.000

您的示例非常接近报童示例。您的代码依赖于具有 setPrice(float) 方法的当前 Item 接口。如果您更改该界面，则需要更新

```
store.accessInventory(password).accessItem(name).setPrice(price) 
```

它发生的任何地方。

更好的解决方案是为表单的 Store 和 Inventory 创建函数

```
void Store::setItemPrice(string password, string name, float price)
{
  accessInventory(password).setItemPrice(name, price);
} 
```

> void Inventory::setItemPrice(string name, float price)
> {
> accessItem(name).setPrice(price);
> }

这样，您可以在其余代码中使用这些函数，并在您的 Item 或 Inventory 接口发生更改时相应地更改它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T05:24:13.527

> 我的代码中的哪些假设可能会导致类似纸男孩示例中遇到的问题？

愤怒的顾客。愤怒的人员。愤怒的经理。愤怒的会计师。

当列出的价格高于他们收取的价格时，客户不介意感到惊讶，但当他们收取的价格高于他们预期的价格时，他们肯定会得到 PO。工蜂不喜欢愤怒的顾客来找他们，因为愚蠢的新手店长没有遵守协议，直接在库存中更改价格。低层和中层管理者也不喜欢这样，因为他们从四面八方感到悲痛。Bean 计数器也喜欢在其 bean 的值突然变化时得到通知。

杰里米在回答中提到的不仅仅是广告海报。需要告诉某人更改指定价格的一堆物品旁边的小定价标签。需要派出一群人使用便携式打印机来更改印在该类型每件商品上的价格。这些人需要被安排，你最好不要在没有与部门经理交谈的情况下这样做。等等等等。通过库存来改变价格是一个坏主意。

顺便说一句，以上所有内容都来自认为得墨忒耳法则更好地称为得墨忒耳的偶尔有用建议的人。

# android - Webservice加载数据时如何显示进度条？

> ID：10779254
> 
> 赞同：1
> 
> 时间：2012-05-28T04:11:58.363
> 
> 标签：android, web-services, progress-bar

我正在使用从 web 服务获取 n 条记录的 web 服务。我正在使用 WS Client 来调用 Web 服务。现在我想要一个进度条，显示已加载的 n 个数据中有多少。有没有可能实现这一目标？我正在使用 AsyncTask 在后台调用 WS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T04:17:58.410

尝试这样的事情，这基本上显示了在异步任务运行时更新进度条的示例

```
 public class AndroidAsyncTaskProgressBar extends Activity {

 ProgressBar progressBar;
 Button buttonStartProgress;

 public class BackgroundAsyncTask extends
    AsyncTask<Void, Integer, Void> {

  int myProgress;

  @Override
  protected void onPostExecute(Void result) {
   // TODO Auto-generated method stub
   Toast.makeText(AndroidAsyncTaskProgressBar.this,
         "onPostExecute", Toast.LENGTH_LONG).show();
   buttonStartProgress.setClickable(true);
  }

  @Override
  protected void onPreExecute() {
   // TODO Auto-generated method stub
   Toast.makeText(AndroidAsyncTaskProgressBar.this,
         "onPreExecute", Toast.LENGTH_LONG).show();
   myProgress = 0;
  }

  @Override
  protected Void doInBackground(Void... params) {
   // TODO Auto-generated method stub
   while(myProgress<100){
    myProgress++;
    publishProgress(myProgress);
       SystemClock.sleep(100);
   }
   return null;
  }

  @Override
  protected void onProgressUpdate(Integer... values) {
   // TODO Auto-generated method stub
   progressBar.setProgress(values[0]);
  }

 }

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     buttonStartProgress = (Button)findViewById(R.id.startprogress);
     progressBar = (ProgressBar)findViewById(R.id.progressbar_Horizontal);
     progressBar.setProgress(0);

     buttonStartProgress.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub
    new BackgroundAsyncTask().execute();
    buttonStartProgress.setClickable(false);
   }});
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:22:30.653

要执行这种进度更新，您需要使您的 web 服务不完全返回部分结果。和n条记录一样，webservice可以一次返回n/p结果，并使用publishProgress方法通知事件线程任务百分比，postEexcute通知webservice调用和解析完成。

# java - 从 java 脚本调用 java 方法

> ID：10779258
> 
> 赞同：2
> 
> 时间：2012-05-28T04:12:51.440
> 
> 标签：java, javascript, jetty

我正在尝试使用创建一个轻量级 Web 界面

嵌入式码头来托管服务器，以及带有 java 脚本的简单 html 代码来显示主页，因为页面不是静态的，具体取决于我需要调用 java 代码的条件。示例 html 代码如下：

```
 <body>
<script type="text/javascript">
 function myfunction(frm)
{
  var opt=frm.option.value;
  alert("option is"+frm.option.value);
   // call a java method depending on the value of opt
  frm.option.value="";
 }
</script>
    <h1 style="text-align: center;">Agent Management Interface</h1>
    <ol>

    </ol>
    <form name="management_form">
            Enter Option: <input type="text" id="optiontb" name="option">
            <input type="button" onclick="myfunction(this.form)" value="submit">
    </form>
</body>
</html> 
```

我不确定这个问题之前是否已经发布过，但我想知道是否有一种方法可以将变量传递给用户定义的 java 代码并获取返回值并将它们显示在 Web 界面上？

我读了一点我没有使用任何外部工具，使用 eclipse 进行开发，使用小程序不是一个选项。我希望 Web 界面的重量尽可能轻。

编辑2：

我已经使用下面给出的建议更新了 html 文件，但这似乎对我不起作用。我怀疑这是因为我编写处理程序的方式，日志消息是：

```
2012-05-28 16:02:53.753:DBUG:oejs.AsyncHttpConnection:async request (null null)@16471729 org.eclipse.jetty.server.Request@fb56b1
2012-05-28 16:02:53.754:DBUG:oejs.Server:REQUEST / on org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection@bc8e1e@127.0.0.1:8080<->127.0.0.1:47830
2012-05-28 16:02:53.756:DBUG:oejs.Server:RESPONSE /  304
2012-05-28 16:02:53.757:DBUG:oejs.AsyncHttpConnection:async request (null null)@16471729 org.eclipse.jetty.server.Request@fb56b1 
```

为处理程序编写的代码如下

```
System.setProperty("org.eclipse.jetty.util.log.DEBUG","true"); 
    Server server = new Server(8080);
    ResourceHandler resource_handler = new ResourceHandler();
    resource_handler.setDirectoriesListed(true);
    resource_handler.setResourceBase(args.length == 2?args[1]:".");
    resource_handler.setWelcomeFiles(new String[]{ "index.html" });
    System.out.println("serving " + resource_handler.getBaseResource());

    ContextHandler context0 = new ContextHandler();
    context0.setContextPath("/senddata");
    Handler handler0=new HelloHandler();
    context0.setHandler(handler0);

    ContextHandlerCollection contexts = new ContextHandlerCollection();
    contexts.setHandlers(new Handler[]{context0});

    HandlerCollection handlersc = new HandlerCollection();
    handlersc.setHandlers(new Handler[]{resource_handler,new DefaultHandler(), contexts});
    server.setHandler(handlersc);
    server.start();
    server.join(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:18:51.187

您正在寻找的技术是 AJAX。由于 JavaScript 是客户端代码，而 Java 是在服务器上运行的代码，因此从服务器获取数据或从服务器获取数据的唯一方法是向服务器发出 HTTP 请求以请求数据。

以下是[Mozilla 开发人员中心页面上 AJAX 入门](https://developer.mozilla.org/en/AJAX/Getting_Started)的示例：

```
 <script type="text/javascript">

  // this is the function that will make the request to the server
  function makeRequest(url) {
    var httpRequest;

    if (window.XMLHttpRequest) { // Mozilla, Safari, ...
      httpRequest = new XMLHttpRequest();
    } else if (window.ActiveXObject) { // IE
      try {
        httpRequest = new ActiveXObject("Msxml2.XMLHTTP");
      } 
      catch (e) {
        try {
          httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } 
        catch (e) {}
      }
    }

    if (!httpRequest) {
      alert('Giving up :( Cannot create an XMLHTTP instance');
      return false;
    }

    // here we set the onreadystatechange event to invoke "alertContents"
     // this is called when the response returns. This is a "callback" function.

    httpRequest.onreadystatechange = alertContents;
    httpRequest.open('GET', url);

    // this starts the send operation
    httpRequest.send();
  }

  // here is the callback handler
  function alertContents() {
    if (httpRequest.readyState === 4) {
      if (httpRequest.status === 200) {

        // since the response from the Jetty server is <h1>Hello World</h1>
         // the alert should fire with that markup
        alert(httpRequest.responseText);

    } else {
      alert('There was a problem with the request.');
    }
  }
}

// this is your function, with the makeRequest call. 
function myfunction(frm)
{
    var opt=frm.option.value;
    alert("option is"+frm.option.value);
    // call a java method depending on the value of opt
    frm.option.value="";

    // call makerequest here with your data
    makeRequest('/senddata?value=' + frm.option.value); 
}

</script> 
```

虽然上面的代码允许您从浏览器发出 HTTP 请求，但您的 Java 应用程序中需要一个 servlet 来接收请求、处理请求并将响应返回给浏览器。

[Embedded Jetty 站点有一个如何创建 Handler 的示例](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Hello_World_Handler)，您可以使用它来检查 HTTP 请求、处理它并返回响应。我稍微修改了示例以提取您将通过 AJAX 请求传递的查询参数：

```
public class HelloHandler extends AbstractHandler
{
    public void handle(String target,Request baseRequest,HttpServletRequest request,HttpServletResponse response) 
        throws IOException, ServletException
    {
        // the value passed in from the client side
        String value = request.getParameter("value");

        // do stuff with that here

        // return a response
        response.setContentType("text/html;charset=utf-8");
        response.setStatus(HttpServletResponse.SC_OK);
        baseRequest.setHandled(true);

        // this gets sent back down to the client-side and is alerted
        response.getWriter().println("<h1>Hello World</h1>");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:19:33.010

您不能在 Javascript 中调用 Java 方法。

在服务器端呈现 Java，在客户端呈现 javascript（主要是 Web 浏览器）

两者，对彼此一无所知。

您可以做的最好的事情是调用任何 JSP 或 servlet 或任何适用的，通过链接或表单提交或 AJAX，依次为您调用特定的 Java 方法。

# c++ - “#pragma once”是否有可能导致错误？

> ID：10779262
> 
> 赞同：5
> 
> 时间：2012-05-28T04:13:22.920
> 
> 标签：c++, c-preprocessor, pragma, include-guards

我所有的头文件都使用*包含保护*和*pragma once*：

```
#pragma once
#ifndef FILE_NAME_H
#define FILE_NAME_H

class foo
{
    //foo interface..
};

#endif /* FILE_NAME_H */ 
```

我知道*pragma once*不是标准的，并且在编译器中可能不一样，但是它是否有可能导致错误？以某种方式测试它是否首先可用会更好吗？

```
#ifdef THIS_COMPILER_SUPPORTS_PRAGMA_ONCE
    #pragma once
#endif

#ifndef FILE_NAME_H
#define FILE_NAME_H

class foo
{
    //foo interface..
};

#endif /* FILE_NAME_H */ 
```

我想提供*一次编译指示*作为可能加速编译并避免名称冲突的选项，同时仍然提供跨编译器的兼容性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T04:24:13.167

如果`#pragma once`不受支持，它将被忽略^([Ref#1])并且标头保护将为您服务，因此同时使用它们并没有错，您实际上不需要任何检查`#pragma once`.

因此，理想的方法是同时使用`#pragma once`并包含守卫，并且您拥有一个可移植的代码，该代码还可以利用`#pragma once`编译器可能支持的优化。

* * *

^([Ref#1])
**标准 C++03：16.6 Pragma 指令**

> 形式的预处理指令
> 
> `# pragma pp-tokensopt new-line`
> 
> 导致实现以实现定义的方式运行。**任何未被实现识别的编译指示都会被忽略。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T04:17:52.400

标准说“任何不被实现识别的编译指示都会被忽略。”，所以你可能没问题，即使编译器不知道#pragma 一次。

# java - 如何从 web.xml 调用 java.class？

> ID：10779267
> 
> 赞同：-3
> 
> 时间：2012-05-28T04:14:31.120
> 
> 标签：java, servlets

我在尝试从 web.xml 调用 java 类时遇到问题，当我运行我的应用程序时，我无法加载我的类/方法？

在我的应用程序中：
jsf 2.0
primefaces 3.1.1
springframework 3.0.2

请帮我

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/app-config.xml</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/springsecurity.taglib.xml</param-value>
</context-param>

<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>Mama</servlet-name>
    <servlet-class>hobic.controller.Mama</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Mama</servlet-name>
    <url-pattern>/hobic.controller</url-pattern>
</servlet-mapping>

</web-app> 
```

妈妈.java

```
public class Mama extends HttpServlet{

public Mama() {
    super();
}

public void metalica() {
    System.out.println("nothing else matter");
    JOptionPane.showMessageDialog(null, "nothing else matter");
}
} 
```

错误

```
SEVERE: Exception while visiting CryptoMeWindow$1.class of size 122769
java.lang.ArrayIndexOutOfBoundsException: 130207
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.objectweb.asm.ClassReader.<init>(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:362)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.handleEntry(ReadableArchiveScannerAdapter.java:171)
    at com.sun.enterprise.v3.server.ReadableArchiveScannerAdapter.onSelectedEntries(ReadableArchiveScannerAdapter.java:133)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)

INFO: SEC1002: Security Manager is OFF.
INFO: SEC1010: Entering Security Startup Service
INFO: SEC1143: Loading policy provider    com.sun.enterprise.security.provider.PolicyWrapper.
INFO: SEC1115: Realm [admin-realm] of classtype  [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.
INFO: SEC1115: Realm [file] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.
INFO: SEC1115: Realm [certificate] of classtype [com.sun.enterprise.security.auth.realm.certificate.CertificateRealm] successfully created.
INFO: SEC1011: Security Service(s) Started Successfully
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: WEB0169: Created HTTP listener [http-listener-1] on host/port [0.0.0.0:8080]
INFO: WEB0169: Created HTTP listener [http-listener-2] on host/port [0.0.0.0:8181]
INFO: WEB0169: Created HTTP listener [admin-listener] on host/port [0.0.0.0:4848]
INFO: WEB0171: Created virtual server [server]
INFO: WEB0171: Created virtual server [__asadmin]
INFO: WEB0172: Virtual server [server] loaded default web module []
INFO: JTS5014: Recoverable JTS instance, serverId = [3700]
INFO: Portable JNDI names for EJB TestSessionBean : [java:global/Hobic/Hobic-   ejb/TestSessionBean!hobic.view.TestSessionBeanRemote, java:global/Hobic/Hobic- ejb/TestSessionBean]
INFO: Glassfish-specific (Non-portable) JNDI names for EJB TestSessionBean :   [hobic.view.TestSessionBeanRemote#hobic.view.TestSessionBeanRemote,  hobic.view.TestSessionBeanRemote]
INFO: Initializing Mojarra 2.1.3 (FCS b02) for context '/Hobic-war'
INFO: Instantiated an instance of  org.hibernate.validator.engine.resolver.JPATraversableResolver.
WARNING: JSF1074: Managed bean named 'loginBean' has already been registered.     Replacing existing managed bean class type hobic.controller.LoginBean with  hobic.controller.LoginBean.
INFO: Running on PrimeFaces 3.1.1
INFO: PWC1412: WebModule[null] ServletContext.log():Initializing Spring root  WebApplicationContext
SEVERE: log4j:WARN No appenders could be found for logger  (org.springframework.web.context.ContextLoader).
SEVERE: log4j:WARN Please initialize the log4j system properly.
SEVERE: log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more  info.
INFO: Instantiated an instance of  org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: PWC1412: WebModule[null] ServletContext.log():Initializing Spring FrameworkServlet 'Spring MVC Dispatcher Servlet'
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: WEB0671: Loading application [Hobic#Hobic-war.war] at [Hobic-war]
INFO: Hobic was successfully deployed in 45,269 milliseconds. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:22:55.357

你的 web.xml 说

```
<servlet>
    <servlet-name>Mama</servlet-name>
    <servlet-class>hobic.controller.Mama</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Mama</servlet-name>
    <url-pattern>/hobic.controller</url-pattern>
</servlet-mapping> 
```

实际上，您的`Mama`课程只是一个普通的 POJO，其中`Swing`嵌入了一些代码。

为了让 Mama 成为一个`Servlet`，它应该扩展 HttpServlet，并覆盖其中一个服务方法。

另外请删除所有 Swing 代码`Mama`，`Swing`用于 UI 目的的独立 Java 应用程序，它在 Web 应用程序中对于驻留在服务器上的代码也没有任何价值。

所以你`Mama`应该看起来像这样：

```
public class Mama extends HttpServlet {

   // override service method(s) that you intend to support.

} 
```

[在此处](http://courses.coreservlets.com/Course-Materials/csajsp2.html)阅读基本教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:22:06.947

在 web.xml 中，您只能指定扩展 HttpServlet 的 servlet 类。我们不能在 servlet 类中摆动代码。所以请删除摇摆代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:24:04.793

您在应用程序中使用了错误的配置样式。请查看这些链接[http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/](http://www.mkyong.com/jsf2/jsf-2-0-spring-integration-example/)，这可能对您有所帮助。请不要在 Web 应用程序中使用 swing 代码，并且在扩展 HttpServlet 时必须编写 doGet() 或 doPost() 方法。

# coronasdk - 安卓设备支持的字体

> ID：10779272
> 
> 赞同：0
> 
> 时间：2012-05-28T04:16:14.863
> 
> 标签：coronasdk

我正在使用 corona sdk 开发一个 android 应用程序，但我无法支持我的应用程序中的所有自定义字体。模拟器中支持的许多字体也不受设备支持。很少有字体得到支持像大城府这样的设备。这是什么原因？任何人都可以给我任何解决方案以及设备支持的字体列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:12:00.413

Download the font file (ttf or otf format) from the internet and include it on your project when building for Android. The device should be able to recognize it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T21:13:55.667

请注意文件名，它应该与您在项目中调用它的名称相同。有时您必须重命名 .ttf 文件。

要使其在模拟器中可见，请将下载的字体文件复制到 windows/fonts 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-09T23:03:33.100

如果您使用的是 Windows，则应在计算机上安装该字体。您可以通过右键单击您的字体并使用 Windows 字体查看器打开来做到这一点。然后安装字体并记住 Windows 字体查看器中显示的字体名称，因为您将在代码中使用该名称作为参数（而不是字体的文件名）。最后将字体文件拖到主源文件所在的项目文件夹中，并拖到 IDE 中的项目中。之后，您应该能够查看字体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-13T22:40:06.340

如果您的计算机上没有字体，您可能需要从 Internet 下载字体。

# android - 主要活动名称必须是 .MainActivity 吗？

> ID：10779275
> 
> 赞同：9
> 
> 时间：2012-05-28T04:17:37.857
> 
> 标签：android, android-activity

我的应用程序有以下主要活动：

```
<activity
    android:name=".main.MainActivity"
    ...
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

它从家庭启动器启动没有问题。但是，当我尝试从 Google 的手势搜索启动它时，我收到一条手势错误消息，指出该应用程序没有`.MainActivity`.

[https://play.google.com/store/apps/details?id=com.google.android.apps.gesturesearch](https://play.google.com/store/apps/details?id=com.google.android.apps.gesturesearch)

Android 应用程序是否需要调用主要活动`.MainActivity`？如果不是，那是软性推荐还是约定俗成，还是 Gesture 的错误假设？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T04:23:09.527

Android 应用不需要任何名为 .MainActivity 的活动。此外，我不知道有这样的约定。听起来您可能在不知不觉中告诉 Gesture 您想要一个名为 .MainActivity 的东西。

也许是因为你在类的实际名称之前放了一个包名。尝试使用完全限定的类名。还可以尝试重命名 Activity，看看是否得到任何不同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T04:37:23.643

Android 应用程序不需要一个名为的活动`MainActivity`，你不应该假设（当然也不应该依赖）任何应用程序实现它。

此外，我从未听说过任何建议这样做的公约。大多数开发人员将命名每个活动以适合其在应用程序中的行为和/或目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:43:57.413

不，这根本不是必需的，我从来没有在我的项目中使用这个名称。您可以给出适合您应用程序行为的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-02T14:34:15.057

清单文件中提到的活动名称可能存在问题。

android:parentActivityName=".activity.MainActivity"

如果您使用的是 Fragment 和 Actionbar 后退按钮，那么您必须正确提及父活动名称，在我的情况下它是 MainActivity。如果您没有正确给出它，它将显示错误。

# oop - 什么时候应该在 OCaml 中使用对象？

> ID：10779283
> 
> 赞同：55
> 
> 时间：2012-05-28T04:18:07.877
> 
> 标签：oop, object, ocaml

通常，可以使用或不使用对象来编写 OCaml 程序。什么时候使用对象最有利，什么时候应该避免使用？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-28T07:10:17.240

作为一般经验法则，不要使用对象。它们带来的额外复杂性通常并不值得。我认为这也是适用于其他语言的规则，但这是另一回事。至少对于 OCaml，人们可以客观地（没有双关语）说，除了极少数情况外，通常的做法是不使用对象。

对象提供一组：

1.  一种“标准”风格，用于携带和使用函数记录，可能具有多态类型
2.  `self`通过（实现继承）开放递归的设施
3.  具有行多态性（对于开放对象类型）和子类型（对于封闭对象类型）的结构化、可扩展产品类型

您可以一起或单独使用其中的任何一个。

以我的经验，仅第 (1) 点并不特别值得使用对象：您可以只使用函数的记录，这同样清楚。

### 开放递归/继承的用例

相反，第 (2) 点是使用面向对象风格的一个很好的理由；例如，Camlp4 以这种方式使用它：Camlp4 定义了折叠 AST 的类，什么都不做，您可以继承此遍历对象以仅在您想要的句法结构上实现您想要的行为（并将无聊的遍历管道推迟到你的妈妈班）。

例如，可以扩展[Camlp4Ast.map](https://github.com/ocaml/camlp4/blob/trunk/camlp4/Camlp4/Sig.ml#L264-L316)对象，该对象在 OCaml 抽象语法树的 Camlp4 表示上定义了一个简单的映射函数，只是将每个构造递归地映射到自身。如果你想，比如说，将所有`(fun x -> e1) e2`表达式映射到`let x = e2 in e1`，你从这个对象继承，并覆盖该`expr`方法，只处理你想要的情况（左侧是一个函数），将另一个委托给继承的行为。这将为您提供一个对象，该对象知道如何递归地在完整程序上应用此转换，而无需编写任何样板代码；如果您愿意，您可以通过其他行为进一步扩展此转换。

### 对象类型的乐趣

第 (3) 点也是将对象用作“可扩展记录”或“类型级数组”的理由；一些库使用对象*类型*，但在运行时不使用对象：它们使用对象类型作为幻像类型来携带信息，这得益于您可以对对象进行的更丰富的类型级操作。此外，结构类型允许不同的作者拥有兼容的类型，而不会强烈依赖于定义他们共享的（名义）类型的公共组件；例如，对象已用于输入/输出组件的标准化。

一个不常见的、非常简单的用例是表示具有大量参数的类型的惯用方式。而不是写：

```
type ('name, 'addr, 'job, 'id) person = ....
val me : (string, string, Job.t, Big_int.big_int) person 
```

您可以使用对象类型作为结构“类型级记录”来编写：

```
type 'a person = .... constraint 'a = < name:'n; addr:'a; job:'j; id:'i >
val me : < name:string; addr:string; job:Job.t; id:Big_int.big_int > person 
```

为了更高级地使用对象类型作为幻像类型，您可以查看 Alec Heller 和 Jesse Tov 的[ShCaml](http://www.eecs.harvard.edu/%7Etov/code/shcaml/) ( [doc](http://www.eecs.harvard.edu/%7Etov/code/shcaml/doc/) ) 库（用于表示字符串输入与哪些 shell 命令兼容），或者我的自己的[Macaque](http://macaque.forge.ocamlcore.org/)库（[doc](http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=macaque;a=headblob;f=/README)和[api doc](http://darcs.ocamlcore.org/cgi-bin/darcsweb.cgi?r=macaque;a=headblob;f=/src/sql.mli)），它使用对象类型来表示 SQL 值（包括可空性信息）和表行类型。
多态变体（OCaml 类型系统的另一个高级特性；一句话，对象和记录之间的关系与多态变体和代数和类型之间的关系相同）。也被用作幻像类型，例如[在这个简单的例子中](http://camltastic.blogspot.fr/2008/05/phantom-types.html)由 Richard Jones 编写，或检查[Ocsigen](http://ocsigen.org/tyxml/api/HTML5_sigs.T)框架中 HTML 文档的有效性。

但是请注意，这些高级类型的黑客需要付出巨大的复杂性成本；在使用它们之前，您必须仔细平衡它与它们带来的额外表现力和静态安全性。

### 加起来

*   作为一个基本假设，您完全不使用对象是安全的；如果您觉得缺少某些东西，您应该只在您的设计中引入它们，而不是默认情况下

*   对象便于开放递归/继承：改进在默认/无聊情况下已经定义的行为

*   当您想独立地对值进行推理时，结构类型有时很有用，提供一组特性/能力

# oracle - 如何以不同的用户身份在 oracle 中执行语句？

> ID：10779285
> 
> 赞同：2
> 
> 时间：2012-05-28T04:18:20.670
> 
> 标签：oracle, oracle10g, sqlplus

我创建了一个新的用户帐户，并授予他们对表的选择和更新权限。现在我想通过以新创建的用户身份在这些表上运行 select 语句来测试一切是否正确。是否有允许“运行为”的命令？如果没有，是否有允许切换活动用户的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:23:44.477

您可以使用[代理用户](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:21575905259251)。
因此，您可以让您的用户成为代理用户（`GRANT CONNECT THROUGH`您的用户到您要检查的用户），然后使用您自己的密码与该用户连接。

# c# - MenuItemCallback，Visual Studio 打包并新建文件

> ID：10779290
> 
> 赞同：0
> 
> 时间：2012-05-28T04:19:23.787
> 
> 标签：c#, visual-studio-2010

我在写`visual studio package`，我的要求是用户必须创建`empty visual studio project C++ or C#`。我如何访问这个项目，`private void MenuItemCallback(object sender, EventArgs e)`以便我可以向其中添加一些动态生成的文件。

这是我到目前为止所做的

```
private void MenuItemCallback(object sender, EventArgs e)
{
        IVsSolution solutionService = GetService(typeof(SVsSolution)) as IVsSolution;
        // get all projects in solution
         IEnumHierarchies enumHierarchies = null;
         Guid guid = Guid.Empty;
                ErrorHandler.ThrowOnFailure(solutionService.GetProjectEnum(     (uint)__VSENUMPROJFLAGS.EPF_ALLINSOLUTION,ref guid,out enumHierarchies));
                //Loop all projects found
                if (enumHierarchies != null)
                {
                    // Loop projects found
                    IVsHierarchy[] hierarchy = new IVsHierarchy[1];
                    uint fetched = 0;

                    while (enumHierarchies.Next(1, hierarchy, out fetched) == VSConstants.S_OK && fetched == 1)                {                   
                        Guid projectGuid;
                        ErrorHandler.ThrowOnFailure(hierarchy[0].GetGuidProperty(VSConstants.VSITEMID_ROOT, (int)__VSHPROPID.VSHPROPID_ProjectIDGuid, out projectGuid));
                    }
                }            
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:27:09.053

我将创建一个共享 DLL 项目和一个可执行项目，然后添加所有需要的引用和文件以及您需要的初始化代码。您还不能将项目导出为模板，因为您需要注意用户的指示。

如果您有一些特定的字符串取决于用户的输入或项目的名称，则必须通过将它们的名称放在 $ 之间来将它们标识为参数（模板甚至还有一些标准参数）。例如，你可以有类似的东西：

```
public class $aclassname$ : YourBaseClass 
```

要使用您的向导来拥有用户，您必须使用实现 Microsoft.VisualStudio.TemplateWizard.IWizard 的类创建另一个项目，特别是此方法：

```
public void RunStarted(object automationObject, Dictionary<string, string> replacementsDictionary, WizardRunKind runKind, object[] customParams) 
```

在此方法中，您可以打开自己的向导，然后根据用户的输入进行操作。特别是，您可以将项目添加到 replacementsDictionary 以替换您放入模板中的参数，例如：

```
replacementsDictionary.Add("$aclassname$", aVarFromYourWizard); 
```

此外，automationobject 是 EnvDTE.DTEClass 的一个实例，指向您的 VisualStudio 实例。这意味着您可以将其转换为 DTEClass，然后使用它来获取您正在创建的项目并根据您的需要对其进行修改。

完成此向导项目后，为了使用您的模板，您首先要签署此向导程序集，然后您可以返回您的模板项目以导出它们（文件 -> 将模板导出为 VSIX）小心指定您的巫师大会。

你也可以看看[这里](http://msdn.microsoft.com/en-us/library/ms185301.aspx)和[这里](http://windowsdevcenter.com/pub/a/windows/2006/10/17/creating-visual-studio-project-templates.html?page=2)。

编辑：

我忘了补充一点，IWizard 有一个方法可以让您指定是否必须将模板中的文件添加到您的实际项目中。您显然可以使用向导中的数据来决定要做什么。这是：

```
public bool ShouldAddProjectItem(string filePath) 
```

我认为这种方式比开发 AddIn 更容易和可维护。

# jquery-mobile - jQuery Mobile 样式不适用于 DOM 初始化后添加的元素？

> ID：10779294
> 
> 赞同：0
> 
> 时间：2012-05-28T04:19:42.347
> 
> 标签：jquery-mobile

在 DOM 加载后，我正在使用 .insertAfter 将一些 div 粘贴到我的页面中。这些 div 里面有一些`<a href="" data-role="button">Example</a>`元素，但它们没有显示为按钮。只是普通的链接。没有应用 jQuery Mobile CSS。当然，这一切都在一个巨大的 data-role="none" div 中，但我在同一个 div 中有一个 data-role="listview" ul，并且 JQM CSS 完美地应用于它。可能是因为我在上面使用了 listview 刷新？其他元素是否有某种等效方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:52:05.863

$('[type='submit']').button('refresh');

或者

采用

```
$('#urs_div').trigger('create'); 
```

# ruby-on-rails - 在本地运行时测试omniauth的最佳实践？

> ID：10779296
> 
> 赞同：0
> 
> 时间：2012-05-28T04:20:41.153
> 
> 标签：ruby-on-rails, testing, local, omniauth

我正在开发一个 Ruby on Rails 应用程序，它应该具有社交授权（通过 Google、Facebook、Twitter 等登录的能力，类似于 StackOverflow）。为此，我使用了omniauth gem。

但是，看起来 Web 服务（Facebook、Twitter 等）只会重定向到一个 URL。

使用服务设置两个应用程序，一个用于开发，一个用于生产，是最佳实践吗？开发者的重定向 URL 应该类似于“localhost:3000/redirect/here”，而生产者的重定向 URL 应该类似于“mydomain.com/redirect/here”？

我很好奇其他人为此做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:24:27.007

您可以设置不同的帐户并根据环境加载配置，或者为您的生产域创建本地别名，以便 www.mydomain.com = localhost:3000

# ios - drawRect和Interface Builder之间的颜色差异？

> ID：10779297
> 
> 赞同：8
> 
> 时间：2012-05-28T04:20:45.197
> 
> 标签：ios, uiview, core-graphics, drawrect, uicolor

简单地说，我在界面构建器中有 2 个视图，其中一个使用界面构建器中的 RGB 滑块设置为颜色 99、99、99。

![在此处输入图像描述](../Images/f129406a3eb1772904cae0905add63e8.png)

另一个视图以编程方式着色以实现特定形状。我使用以下方法填充它：

```
//Obviously, this is in drawRect.
[[UIColor leadColor] set];
CGContextEOFillPath(myContext);

//And this is a category on UIColor
+ (UIColor *)leadColor {
    return [UIColor colorWithWhite:99/255.0 alpha:1.0];
} 
```

结果：

![在此处输入图像描述](../Images/60dd995b7611a173ed7215c11952cbfe.png)

为什么会存在这种差异？？

* * *

**编辑：（`drawRect`删除了不必要的代码）**

* * *

**编辑2：**

所以，在这里我是在自欺欺人..“界面生成器将 RGB 99,99,99 显示为 80,80,80。我敢打赌它会将数字抵消 19。” >.> ...一个使用 Xcode 的绝望的人会想像这样疯狂的东西.. 结果：

![完美的！！](../Images/1c90efe10e1a36a8e8d9c4bddfad295f.png)

**完美的！！**，但是*为什么*？？？？另一个 Xcode 错误？在过去的一个月里，我发现了其中的 10 个......

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-15T15:50:06.240

终于到了这个app的微调阶段，不得不解决这个问题，于是，我搜索了一下，很容易找到了解决方案：

[如何在 Interface Builder 中输入 RGB 值？](https://stackoverflow.com/questions/2565008/how-do-i-enter-rgb-values-into-interface-builder)

**插图：**

![在此处输入图像描述](../Images/e82a2f4bac26d8722490395f20d07b33.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T08:54:42.800

`colorWithWhite`使用[灰度空间](http://en.wikipedia.org/wiki/Grayscale)，灰度空间中的颜色 99 不会映射到 RGB 空间中的颜色 (99,99,99)。

因此，为了获得与 Interface Builder 中相同的结果，您需要使用 RGB 空间。将您对 colorWithWhite 的调用替换为：

```
[UIColor colorWithRed:99/255.0 green:99/255.0 blue:99/255.0 alpha:1.0] 
```

# android - 不同分辨率的选项卡主机和项目大小

> ID：10779299
> 
> 赞同：1
> 
> 时间：2012-05-28T04:21:02.050
> 
> 标签：android, size, android-tabhost

我正在开发一个带有 tabHost 的应用程序，它工作正常，

我的问题是：

选项卡栏背景图像 [宽度，高度] 和所有可绘制对象的选项卡项目背景图像的大小应该是多少：

*   可绘制的 hdpi
*   可绘制的 ldpi
*   可绘制的 mdpi

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:41:34.407

看看[支持多屏的Android官方指南](http://developer.android.com/guide/practices/screens_support.html)。

[Android 图标设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)将帮助您了解不同尺寸图标的尺寸。

这是一个很好的工具[Android Asset Studio](http://tools.android.com/recent/assetstudiointegration)，它可以帮助你为所有类型的尺寸创建图标。

[这](http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html)实际上是您问题的答案。:) 干杯

# actionscript-3 - 如何使用 NetConnection 取消 AMF 呼叫？

> ID：10779301
> 
> 赞同：0
> 
> 时间：2012-05-28T04:21:16.897
> 
> 标签：actionscript-3, apache-flex, amf, netconnection

假设我在单例模式中有一个 NetConnection 对象，它与我所有应用程序中的所有数据访问对象类共享。现在，您进入屏幕并要求加载 5 千条记录，因为您想搜索一些错误或其他什么。但是现在你才意识到你在错误的屏幕上，你实际上想要来自另一个“实体”的 5000 条记录。如何防止您不得不等待近 2 分钟直到数据到达这里，以便您可以转到另一个屏幕并要求一些不同的数据？我尝试使用 ESC 按钮作为`NetConnection.close()`事件，但它实际上不起作用。它只是调度一个空事件，调用仍然返回。我知道我不能要求服务器不要继续做他的工作，但我想知道如何确保在你按下 ESC 或类似的东西后，ActionScript 不会再打扰那个特定的调用，你可以继续你的生活。而且，当服务器在后台响应该调用时，我将把它扔掉，因为你已经同意取消它。

Ps.：我对如何听 ESC 按钮并通过它调用一些方法没有任何疑问，我只想知道一旦用户决定他不想再接收该数据并且他/她想继续前进，而不必关闭应用程序并再次打开。

编辑：

拨打电话后，我尝试销毁 Responder 对象，但没有成功。

```
 public function call(command:String, f:Function, fault:Function, ...parameters):void{
        var r:Responder = new Responder(f, fault);
        this._Responder = r;
        if(parameters.length == 0)
            GATEWAY.call(command, _Responder);
        else
            GATEWAY.call(command, _Responder, parameters);
    }

    public function close():void{           
        _Responder = new Responder(function(obj:Object):void{}, function(obj:Object):void{});
        //_Responder = null;
        trace("Canceled");
    } 
```

使用此处描述的代码，我停止调用`NetConnection::call`并开始调用我编写的“调用函数”。因此，此函数将构建一个将在类范围内的响应程序，因此即使在调用完成后我也可以访问它，并且 ESC 按钮将调用“关闭”函数。我尝试将其设置为 null 并重新构建它。它没有用。我认为在 NetConnection 拨打电话后，无法更改响应者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:50:23.547

NetConnection 类不支持取消 AMF 调用。但是，就像 shaunhusain 所说，您可以保留从单例类调用的方法的存储（数组、字典等），一旦取消调用，它应该只禁用该调用的结果事件侦听器。

因此，即使您退出等待 AmfCall 结果的模块，您的单例类也不会有回调，您可以继续下一个屏幕。

```
public class Call
{
var responder:Responder;
var service:String;
var params:Array;

public function Call(service:String, params:Array)
{
   responder = new Responder(this.onResult, this.onFault);
   this.service = service;
   this.params = params;

}

public function removeListeners():void
{
   removeEventListener(CallEvent.RESULT, onResult);
}

public function onResult(result:Object):void
{
   this.result = result;
   dispatchEvent(new CallEvent(CallEvent.RESULT, callId, result));
} 
```

}

Call 类负责在接收到结果时调度事件。但是，如果没有事件侦听器，则分派的事件将不会被任何类侦听。

此代码片段取自 AmfPhpToolBox。您可能希望使用该库来解决所有这些问题。

[AMFPHP工具箱](https://github.com/BlackBulletIV/amfphp-toolbox)

# php - 如何部署大型站点 CMS

> ID：10779302
> 
> 赞同：0
> 
> 时间：2012-05-28T04:21:33.243
> 
> 标签：php, content-management-system, upgrade

我正在使用 PHP cms 管理一个站点。
该网站非常大（250 页）并且非常重要。
始终有 6 名翻译人员和内容编辑人员同时在网站上工作。
直到今天，CMS 就像盒子一样工作，我们不需要进行很多更改即可部署。

现在我们想要更频繁地启动和更新站点主题，添加内容区域，将更多模块添加到 CMS。

对于部署操作，我可以阻止内容编辑器的访问并进行更新，但这不是问题。
问题是当我想开发新功能时，开发时间会很长（比如一周或一个月）。

在开发期间，内容将发生巨大变化。
在 95% 的情况下，cms 升级将涉及数据库结构**和数据**更改。
那么，如何在不丢失或损坏开发过程中在站点上完成的工作的情况下更新站点版本/数据/元数据

（**我们确实有一个开发服务器和一个带有自己的数据库的登台服务器，带有颠覆**）

没关系，我使用的是 Concrete5。

谢谢

**更新 1**
假设我的站点中有一个名为 page_title 的字段，并且我想将名称更改为 page_description。
更改实际上发生在数据库**内容**中，而**不是**数据库结构中。
所以我可以在开发环境中改变它，但我无法将它部署到生产环境中。
首先，因为我不知道跨数据库实际发生的变化。
其次，即使我有一个可以在数据库中更改它的脚本，也几乎不可能跟踪这些更改并将其添加到脚本中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:29:24.503

两个建议：

1.  始终在与生产版本不同的代码库上进行开发。理想情况下，您将拥有一个单独的数据库和 CMS 实例用于您自己的开发，并且一旦它经过测试和批准，您将备份生产并迁移数据库和代码。

2.  始终将所有数据迁移任务放在一个统一的脚本（或一组脚本）中。您还应该拥有脚本的升级/降级版本（您测试得非常好），以便您可以快速恢复到数据库的先前版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:29:51.727

作为专业问题，我建议花时间设置本地开发镜像并将其用作您所做的所有更改的试验场。

我建议在处理代码时使用版本控制系统，这样您就可以跟踪在原始代码之上所做的更改。

为了省去很多麻烦，我真的建议您在创建镜像之前花时间记下所有正在运行的软件和版本。

或者，您可以在服务器上创建一个子域并将站点的副本加载到该域中。在这种情况下一定要使用数据库的影子！

应用程序完成后，阻止站点访问并将文件复制到实时服务器。停机时间不应超过一两个小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:41:21.703

[尽管RedGate](http://www.red-gate.com/) 有一些可能值得研究的 SQL 版本控制产品，但我还没有找到一个可以让我满意地处理数据库的版本控制系统。在对生产数据库进行结构更改时，我一直必须做的是手写一个 SQL 脚本，该脚本在保留现有数据的同时进行必要的更改 - 当然，如果需要的话，在开发服务器上测试升级脚本复杂的。

# ios - ipad safari 等浏览器应用中的新标签栏功能

> ID：10779303
> 
> 赞同：0
> 
> 时间：2012-05-28T04:21:38.250
> 
> 标签：ios, ipad, safari

我想在我的 iPad 浏览器应用程序中创建与 iPad Safari 中的选项卡相同的新选项卡功能。是否有可用的控件？是否可以轻松创建自定义？或者有什么替代品？

感谢大家即将到来的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T20:53:25.240

我实现了一个非常接近 iPad 上 Safari 的选项卡视图：

[https://github.com/mkeiser/TRTabView/](https://github.com/mkeiser/TRTabView/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:39:05.573

你来了，我的好人。对不起，事先的小条件。BHTabBar控件[几乎](http://cocoacontrols.com/platforms/ios/controls/bhtabbar)是完美的，但它是翻转的，因此选项卡朝上。我相信这不会很难解决（几个 CGAffines 从来没有伤害过任何人）。如果迫在眉睫，只需设置几个 UIButton 的样式并将它们沿 UIToolbar 排列。

如需进一步阅读，请参阅[MHTabBarController](http://cocoacontrols.com/platforms/ios/controls/mhtabbarcontroller)、[SlidingTabs](http://cocoacontrols.com/platforms/ios/controls/slidingtabs)和商业许可的[ALTabsView](http://cocoacontrols.com/platforms/ios/controls/altabsview)。

# internationalization - 时间线应用程序的操作可以以其他语言发送以供批准？

> ID：10779304
> 
> 赞同：0
> 
> 时间：2012-05-28T04:21:39.840
> 
> 标签：internationalization, submit, facebook-timeline

我的应用程序默认语言是西班牙语。在不久的将来，我希望它由 facebook 翻译，但现在我需要动作动词是西班牙语。如果我以西班牙语发送操作以供批准：

a) 在西班牙语中是否可以批准？

b) 以后可以用 facebook 翻译服务翻译成其他语言吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:00:47.053

目前这个问题的答案是：

1.  您必须以英语提交操作（您的网站可以使用任何语言，但仅限操作）。
2.  然后，您可以在获得批准后立即使用翻译应用程序作为应用程序的管理员来创建操作的翻译。

然后，您可以将其他语言（和英语）的翻译留给社区。

资料来源：与 Facebook 平台政策团队交谈

# android - 单击其他按钮时禁用其他按钮

> ID：10779305
> 
> 赞同：0
> 
> 时间：2012-05-28T04:21:49.237
> 
> 标签：android, android-button

在我的应用程序中，我有 3 个按钮 A、B、C。在按下按钮 A 时，我正在做一些需要一些时间的计算……在那段时间里，我想禁用其他两个按钮。我正在为一个按钮的 onClick 侦听器提供代码..

```
case R.id.buttona:

    //Disabling other two buttons
    start1b.setVisibility(v.INVISIBLE);
    start1c.setVisibility(v.INVISIBLE);
    stop1.setVisibility(v.INVISIBLE);

        //this is the process that takes time 
    String x ="/databank/Reading18.wav";
    timedata1a = fe.returningtimedata(x);

    rawdata1a = fe.returningrawdata(x); 
    Log.d("now press", "button");

    //features of Reading 1 hav been extracted into timedata1a 
    start1b.setVisibility(v.VISIBLE);
    start1c.setVisibility(v.VISIBLE);
    stop1.setVisibility(v.VISIBLE);

break; 
```

但是当我按下 1 个按钮 A 然后立即按下按钮 B 时，应用力关闭.. any1 可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:50:20.547

您需要在 UI 以外的其他线程中执行要在禁用状态下执行的操作。导致事件线程永远没有时间禁用按钮。所以您可以执行以下操作：

```
case R.id.buttona:

    //Disabling other two buttons
    start1b.setVisibility(v.INVISIBLE);
    start1c.setVisibility(v.INVISIBLE);
    stop1.setVisibility(v.INVISIBLE);

     Thread thread=new Thread()
     {
        public void run()
        {

                 //this is the process that takes time 
                  String x ="/databank/Reading18.wav";
                  timedata1a = fe.returningtimedata(x);

                 rawdata1a = fe.returningrawdata(x); 
                 Log.d("now press", "button");
                 handler.sendEmptyMessage(1);

          }
       }
       thread.start();
       break;
    } 
```

您需要定义一个处理程序以在线程处理完成后将结果发布回 UI 线程。

```
Handler handler=new Handler();
{
    public void handleMessage(Message msg)
    {
         int what=msg.what;
         switch(what)
         { 
            case 1:
                  {
                       //features of Reading 1 hav been extracted into timedata1a 
                     start1b.setVisibility(v.VISIBLE);
                     start1c.setVisibility(v.VISIBLE);
                     stop1.setVisibility(v.VISIBLE);
                  }
                  break;
             .........
         }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:40:21.287

在您的情况下，如果您想在对按钮 A 执行 onClick() 操作时禁用按钮 B、C

```
btnA.setOnClickListerner(new OnClickListerner() {

public void onClick(){

btnB.setEnabled(false);

btnC.setEnabled(false);

}  

}); 
```

在上面的代码中，当您单击按钮 A 时，按钮 B、C 被禁用。

# azure - 我可以在不将它们写入存储的情况下实时查看我的 Windows Azure 日志吗？

> ID：10779307
> 
> 赞同：3
> 
> 时间：2012-05-28T04:22:07.090
> 
> 标签：azure, azure-diagnostics

我有：

```
Trace.WriteLine("info", "category"); 
```

在我的工人角色中。在 Azure Compute Emulator UI 中本地运行时，我可以看到此输出。

无论如何，在不将其写入存储的情况下，是否可以看到发布到 Azure 的相同角色的相同输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T00:52:43.087

DebugView 可能会有所帮助。

1.  到 Azure VM 的 RDP
2.  转到[DebugView 的站点](http://technet.microsoft.com/en-us/sysinternals/bb896647)并单击“立即从 Live.Sysinternals.com 运行 DebugView”
3.  从菜单栏中的捕获菜单中选中“捕获全局 Win32”项。
4.  您可以找到 Trace.WriteLine() 的输出 ![在此处输入图像描述](../Images/8482a58afddf95b7afc35310abdf7761.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T00:59:14.367

开箱即用的解决方案有些有限（通常涉及 RDP、写入 SQL 和/或 blob 存储，或者让第三个进程轮询图像并将日志复制到另一个位置）。但是，没有什么能阻止您编写自定义跟踪侦听器，该侦听器通过 tcp 套接字写入日志条目。

我们很快就在我们的公司站了起来，在 Azure 方面结合了以下内容：

[http://msdn.microsoft.com/en-us/library/ff647545.aspx](http://msdn.microsoft.com/en-us/library/ff647545.aspx)

[http://robjdavey.wordpress.com/2011/02/11/asynchronous-tcp-client-example/](http://robjdavey.wordpress.com/2011/02/11/asynchronous-tcp-client-example/)

然后你只需要在一个可访问的盒子上安装一个简单的监听器（你甚至可以只使用 netcat 或其他东西）来获取条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:42:00.080

如果您将桌面远程连接到主机，您可能会找到它正在使用的文件。这有点麻烦，所以我在每台主机上都有一个后台线程，可以将日志消息发送回我的办公室。还有另一个进程将它们转储到我使用[LogExpert](http://www.log-expert.de/)检查的文件中。我可以这样做，因为我所有的日志记录都是通过[log4net](http://logging.apache.org/log4net/)进行的，而不是使用 Trace。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T16:34:02.697

如果您试图获得坐在您旁边的无头机器的输出，您将拥有所有相同的选择。除了人们在这里提到的所有方法之外，我只想推荐使用服务总线跟踪侦听器。它仍然应该[在样本中找到](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27421)。只需将其连接到您的角色（如果您更复杂一点，您可以通过配置将其关闭和打开）并打开本地侦听器。根据我的经验，它运行良好，您不必担心防火墙或 TCP 连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T23:51:55.910

如您所知，跟踪日志是在 Azure VM 上创建的，因此如果您想查看是否拥有：

1.  RDP 到 Azure VM 并查看那里
2.  有一个流程可以将 Azure VM 中的日志导出回您想要的任何地方（Azure 诊断也为您做同样的事情）。你可以编写自己的实现，将这些日志发送到任何你希望的地方，而不是 Azure 存储。

还有另一种选择是在您的工作人员角色中打开一个 http 端口（是的，您确定可以这样做并运行一个非常小的第 3 方网络服务器将日志直接导出到网络。不建议但仍然是一个选项）

# iphone - 5 秒无活动后自动删除图像视图

> ID：10779314
> 
> 赞同：3
> 
> 时间：2012-05-28T04:22:54.327
> 
> 标签：iphone, ios, uiview, uiimageview

我开发了一个应用程序，其中一个模块上有`UIImageView`一个`self.view`. 在此之上`imageview`，用户可以执行一些运行良好的操作。我的问题是，如果用户没有与之交互，`imageview`那么`imageview`必须`self.view`在 5 秒后自动删除。我该如何实施？我需要使用计时器或其他东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:30:54.910

是的，您可以使用`NSTimer`它，`NSTimer`像这样安排 5 秒 -

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(removeImageView) userInfo:nil repeats:NO]; 
```

这里还有一件事，您需要`timer`在用户`touch`使用屏幕时安排此操作，如果再次使用`touch`屏幕，则再次使用`invalidate`此计时器`reschedule`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T05:11:41.660

我将 UIWindow 子类化并在我的 CustomWindow 类中实现了代码（我的时间是 3 分钟的非活动时间，然后计时器“触发”）

```
@implementation CustomWindow

// Extend method 
- (void)sendEvent:(UIEvent *)event 
{
    [super sendEvent:event];

    // Only want to reset the timer on a Began touch, to reduce the number of timer resets.
    NSSet *allTouches = [event allTouches];
    if ([allTouches count] > 0) 
    {
        // allTouches count only ever seems to be 1, so anyObject works here.
        UITouchPhase phase = ((UITouch *)[allTouches anyObject]).phase;
        if (phase == UITouchPhaseBegan || phase == UITouchPhaseEnded) 
        {
            // spirko_log(@"touch  and class of touch - %@",  [((UITouch *)[allTouches anyObject]).view  class]);
            [self resetIdleTimer:NO];
        }
    }
}

- (void) resetIdleTimer:(BOOL)force 
{
    // Don't bother resetting timer unless it's been at least 5 seconds since the last reset.
    // But we need to force a reset if the maxIdleTime value has been changed.
    NSTimeInterval now = [NSDate timeIntervalSinceReferenceDate];
    if (force || (now - lastTimerReset) > 5.0) 
    {
        // DebugLog(@"Reset idle timeout with value %f.", maxIdleTime);
        lastTimerReset = now;
        // Assume any time value less than one second is zero which means disable the timer.
        // Handle values > one second.
        if (maxIdleTime > 1.0) 
        {
            // If no timer yet, create one
            if (idleTimer == nil)
            {
                // Create a new timer and retain it.
                idleTimer = [[NSTimer scheduledTimerWithTimeInterval:maxIdleTime target:self selector:@selector(idleTimeExceeded) userInfo:nil repeats:NO] retain];
            }
            // Otherwise reset the existing timer's "fire date".
            else 
            {
              //  idleTimer = [[NSTimer scheduledTimerWithTimeInterval:maxIdleTime target:self selector:@selector(idleTimeExceeded) userInfo:nil repeats:NO] retain];

                [idleTimer setFireDate:[NSDate dateWithTimeIntervalSinceNow:maxIdleTime]];
            }
        }
        // If maxIdleTime is zero (or < 1 second), disable any active timer.
        else {
            if (idleTimer)
            {
                [idleTimer invalidate];
                [idleTimer release];
                idleTimer = nil;
            }
        }
    }
}

- (void) idleTimeExceeded 
{
  // hide your imageView or do whatever
} 
```

# html - 跨浏览器全宽 CSS

> ID：10779318
> 
> 赞同：2
> 
> 时间：2012-05-28T04:23:25.067
> 
> 标签：html, css

我面临重新创建某个网站的挑战，但我不确定创建全宽跨浏览器模板的最佳方法是什么。我将使用 HTML 5，到目前为止我有：

我只使用 100% 作为宽度吗？

**HTML**

```
<div id="wrapper">
    <header>
        <h1>Logo Position</h1>
        </header> 
```

**CSS：**

```
#wrapper{
    width:990px;
    height:100%;
    min-height:100%;
    background:#000;
}
header{
    width:100%;
    height:100px;
    color:#184C82;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:42:11.190

一般来说，你可以忽略宽度（也就是说，不要在任何地方设置它，或者`auto`如果它以前是由你无法控制的东西设置的），它会默认为全宽......有一个小的边距周围的边缘。如果您希望该边距消失（跨浏览器），则需要将边距和填充都设置为 0`body`和`html`：

```
body, html {
    margin: 0;
    padding: 0;
} 
```

通常只有在页面内容很短时要将页脚向下推到屏幕底部时才需要调整高度。你没有要求，所以我不会详细说明。（无论如何，关于该主题的现有 Stack Overflow 问题。）

某些元素——尤其是表格——确实需要`width: 100%`声明，但 div 和 body 不需要，除非您使用了导致收缩包装的各种 CSS 声明之一（即`display: inline-block`，`float: left`或`position: absolute`）。请注意，这`width: 100%`与块元素（包括主体）的默认行为并不完全相同 - 块元素占用尽可能多的空间，尊重它们的边距、边框和填充，而任何带有它的元素都`width: 100%`将与其父元素一样宽元素 - 并且任何边距、边框或填充将超出此范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:25:18.030

将`<header>`宽度设置为`100%`只会使其成为其父级的宽度，即`990px`. 如果您希望将其扩展到视口宽度的 100%，则需要将其从包装器中取出，使用 or 定位它`absolute`，`fixed`或者使用`:before`和/或`:after`给人以视口宽度的印象。

*[Chris Coyier 在他的文章Full Browser Width Bars](http://css-tricks.com/full-browser-width-bars/)*中演示了最后一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:10:59.027

只需`width:100%`在标题上使用，然后删除包装。将布局的单独部分构建为单独的 DIV，`<body>`用作您的父元素。你会是金色的！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T04:30:38.763

你也应该这样使用..

```
#wrapper {
 width:100%; /* or width:990px; */
 height:100%;
 position:absolute;
} 
```

# asp.net - 如何在开发环境中在 https://localhost 上测试我的 ASP.NET 页面？

> ID：10779320
> 
> 赞同：8
> 
> 时间：2012-05-28T04:23:40.390
> 
> 标签：asp.net, web-applications, ssl, https, localhost

> **可能重复：**
> [带有 Visual Studio 内置 ASP.NET 开发服务器的 HTTPS](https://stackoverflow.com/questions/60113/https-with-visual-studios-built-in-asp-net-development-server)

我正在使用 VS 2010 IDE 编写 C#、ASP.NET Web 应用程序。我没有在这台 Windows 7 机器上安装 IIS 服务器。我对 Web 应用程序的所有测试都通过 Visual Studio 2010 附带的“ASP.NET 开发服务器”。我的页面通常加载到 Web 浏览器中，地址如下：“ [http://localhost:59215/Default.aspx](http://localhost:59215/Default.aspx) "

所以我的问题是，我可以使用 HTTPS URL 进行测试吗？

如果是的话，有人可以给我步骤吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T04:31:15.250

带有 SP1 的 Visual Studio 2010 现在具有 IIS Express，它允许您在 SSL 上运行。

见这里：[http ://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)

您还可以创建自签名证书以避免购买证书时出现任何问题。

[http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx)

# java - 在while循环中设置OnClickListener？

> ID：10779327
> 
> 赞同：0
> 
> 时间：2012-05-28T04:24:31.667
> 
> 标签：java, android, while-loop, textview, android-linearlayout

我试图在这样的while循环中设置一个onClickListner：

```
 View inflaterLayout;
    LinearLayout myLayout = (LinearLayout)findViewById(R.id.linearLayout2);      
    while (counter < 5) {
        inflaterLayout = LayoutInflater.from(getBaseContext()).inflate(R.layout.newplayerlayout, null);
        myLayout.addView(inflaterLayout); 
        Button testButton = (Button) myLayout.findViewById(R.id.button2);
        testButton.setId(testButtonArray[counter]);
        ((TextView) myLayout.findViewById(R.id.textView1)).setId(testTextArray[counter]);
        testButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                ((TextView) findViewById(testTextArray[counter])).setText("Hi!");

            }
        });
        counter++;
    } 
```

我认为它会做的是，当您单击任何一个 testButton 时，它会更改它旁边的 TextView！但只有第一个充气的按钮有效！有谁知道我做错了什么？

基本上我想要完成的是，我正在膨胀一个具有加号按钮、减号按钮和文本视图的布局，所以我希望能够设置一个 onClickListener 来添加和减去文本视图而无需设置一百万个单独的 onClickListeners！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:29:53.697

试试这个：

```
 View inflaterLayout;
    LinearLayout myLayout = (LinearLayout)findViewById(R.id.linearLayout2);      
    while (counter < 5) {
        inflaterLayout = LayoutInflater.from(getBaseContext()).inflate(R.layout.newplayerlayout, null);
        myLayout.addView(inflaterLayout); 
        Button testButton = (Button) myLayout.findViewById(R.id.button2);
        testButton.setId(testButtonArray[counter]);
        ((TextView) myLayout.findViewById(R.id.textView1)).setId(testTextArray[counter]);

        testButton.setOnClickListener(btnhandler); // Click Listener here
        counter++;
    } 
```

在 while 循环外创建按钮 ClickListener 为：

```
View.OnClickListener btnhandler = new View.OnClickListener() {
  public void onClick(View v) {

switch (v.getId()) {
  case testTextArray[0]:
    ((TextView) findViewById(testTextArray[0])).setText("Button One");
    break;
  case testTextArray[1]:
   ((TextView) findViewById(testTextArray[1])).setText("Button Two");
    break;
    .....
  }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:31:40.313

```
new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        ((TextView) findViewById(testTextArray[counter])).setText("Hi!");
    } 
```

onClick 函数内的代码在单击按钮时*运行*。它不*记得*循环的每次迭代期间变量的值，只是因为它在不同的范围内。

**更新**

以下代码仅使用一个 OnClickListener 来增加或减少每个对应 TextView 的值。您应该能够轻松地将其调整为具有更好看的布局的布局充气机。

```
public class Example extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);

        OnClickListener listener = new OnClickListener() {
            public void onClick(View view) {
                TextView text = (TextView) view.getTag();

                if(((Button) view).getText().equals("+"))
                    text.setText(Integer.parseInt(text.getText().toString()) + 1 + "");
                else
                    text.setText(Integer.parseInt(text.getText().toString()) - 1 + "");
            }
        };

        for(int i = 0; i < 5; i++) {
            LinearLayout line = new LinearLayout(this);
            line.setOrientation(LinearLayout.HORIZONTAL);

            TextView text = new TextView(this);
            text.setText(i + "");
            line.addView(text);

            Button plus = new Button(this);
            plus.setTag(text);
            plus.setText("+");
            plus.setOnClickListener(listener);
            line.addView(plus);

            Button minus = new Button(this);
            minus.setTag(text);
            minus.setText("-");
            minus.setOnClickListener(listener);
            line.addView(minus);

            layout.addView(line);
        }

        setContentView(layout);
    }
} 
```

**评论中的补充**

我将假设在你的 newplayerlayout.xml 中有两个按钮（id 为“plus”和“minus”）和一个 TextView（id 为“text”）。也许你会像这样实现这个方案：

```
OnClickListener mListener = new OnClickListener() {
    public void onClick(View view) {
        TextView text = (TextView) view.getTag();

        if(((Button) view).getText().equals("+"))
            text.setText(Integer.parseInt(text.getText().toString()) + 1 + "");
        else
            text.setText(Integer.parseInt(text.getText().toString()) - 1 + "");
    }
};
...

while (counter < 5) {
    inflaterLayout = LayoutInflater.from(getBaseContext()).inflate(R.layout.newplayerlayout, null);
    myLayout.addView(inflaterLayout);

    TextView inflatedText = (TextView) inflaterLayout.findViewById(R.id.text);
    Button testButton = (Button) inflaterLayout.findViewById(R.id.plus);
    testButton.setTag(inflatedText);
    testButton.setText("+");
    testButton.setOnClickListener(mListener);

    testButton = (Button) inflaterLayout.findViewById(R.id.minus);
    testButton.setTag(inflatedText);
    testButton.setText("-");
    testButton.setOnClickListener(mListener);

    counter++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:33:19.853

通过代码 testButton.setOnClickListener() 您注册一个类以在单击按钮时执行其 onClick() 方法。因此，每次在 while 循环中注册一个新的匿名类时，当您单击按钮最后注册的类时，都会执行 onClick() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:26:43.233

```
View inflaterLayout;
LinearLayout myLayout = (LinearLayout)findViewById(R.id.linearLayout2);      
while (counter < 5) {
    inflaterLayout = LayoutInflater.from(getBaseContext()).inflate(R.layout.newplayerlayout, null);
    myLayout.addView(inflaterLayout); 
    Button testButton = (Button) myLayout.findViewById(R.id.button2);
    testButton.setId(testButtonArray[counter]);
    ((TextView) myLayout.findViewById(R.id.textView1)).setId(testTextArray[counter]);
    testButton.setOnClickListener(new View.OnClickListener() {
        int select = counter;
        @Override
        public void onClick(View v) {
            ((TextView) findViewById(testTextArray[select])).setText("Hi!");
        }
    });
    counter++;
} 
```

# load-testing - 负载测试和 Tsung - 它适用于 ec2 吗？

> ID：10779330
> 
> 赞同：3
> 
> 时间：2012-05-28T04:24:55.823
> 
> 标签：load-testing, tsung

我试图让 tsung 在 ec2 上工作，但无济于事。这就是人们倾向于使用jmeter的原因吗？Tsung 可以在单个主机上工作，但在 ec2 上根本不行。

1）我使用了相同的区域，因此在 ec2 上使用了私有 dns 和 ip。

2）我创建了一个主服务器并使用以下内容在主服务器上创建一个 ssh 密钥。

```
cd /home/ubuntu/.ssh;
   ssh-keygen -f id_rsa -t rsa -N '' 
```

3）然后，在奴隶的 eash 上，我将生成的密钥放入身份验证密钥中。

```
/home/ubuntu/.ssh/authorized_keys 
```

4) 在从属服务器上，我的 /etc/hosts 文件根据文档看起来像这样。

```
xxx.xxx.xxx.xxx ip-10-xxx-xxx-xxx 
```

4) 在主服务器上我运行 sudo tsung start。我可以在没有密码的情况下 ssh 进入奴隶。

在日志文件中，我收到此错误：

```
 =INFO REPORT==== 28-May-2012::03:51:12 ===
       ts_config_server:(0:<0.76.0>) Can't start newbeam on host
'ip-xxx-xxx-xxx (reason: timeout) ! Aborting!]] 
```

5）文档提供了解决提示，但这些提示根本不清楚，因为我仍然收到此错误。但是，我已经完成了清单上要求的所有事情。a) ssh 无需密码即可工作 i.el ssh 主机名 erl b) 删除了应用程序装甲 c) 我的主机看起来像这样 xxx.xxx.xxx ip-xxx-xxx-xxx

6) 下面是我的 tsung.xml 文件。

```
<?xml version="1.0"?>
   <!DOCTYPE tsung SYSTEM "/usr/share/tsung/tsung-1.0.dtd">
   <tsung loglevel="debug" dumptraffic="true" version="1.0">

   <clients>
                   <client host="ip-10-xxx-xxx-xxx" cpu="1"><ip
value="10.yyy.yyy.yyy"></ip></client>
   </clients>
   <servers>
           <server host="xxx.xxx.xxx.xxx" port="80" type="tcp"></server>
   </servers>

    <load>
      <arrivalphase phase="1" duration="1" unit="minute">
        <users interarrival="100" unit="second"></users>
      </arrivalphase>
    </load>

    <options>
      <option type="ts_http" name="user_agent">
       <user_agent probability="80">Mozilla/5.0 (X11; U; Linux i686;
en-US; rv:1.7.8) Gecko/20050513 Galeon/1.3.21</user_agent>
       <user_agent probability="20">Mozilla/5.0 (Windows; U; Windows
NT 5.2; fr-FR; rv:1.7.8) Gecko/20050511 Firefox/1.0.4</user_agent>
      </option>
     </options>

     <sessions>
     <session name="http-example" probability="100" type="ts_http">
       <!-- full url with server name, this overrides the "server"
config value -->
       <request> <http url="/pixel" method="GET"
version="1.1"></http> </request>
       <thinktime value="1" random="true"></thinktime>
     </session>
    </sessions>
   </tsung> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:10:08.577

在主机上执行以下操作：

```
cd /home/ubuntu/.ssh
ssh-keygen -f id_rsa -t rsa -N ''
eval `ssh-agent`
ssh-add ~/.ssh/id_rsa 

for each slave:
    ssh-keyscan EC2_PUBLIC_DNS_NAME | tee -a ~/.ssh/known_hosts 
```

或使用私有 dns 名称

或者

```
#        You can add this in .ssh/config on the master node:
#        >
#        > Host *
#        >        StrictHostKeyChecking no 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-09T20:20:08.163

我在不同 AWS 区域使用主和代理时遇到了这个问题。即使我在主机和代理的主机文件中配置了假主机名，他们也在内部 AWS DNS 上进行解析。

我只需要更改主主机名即可解决问题（加上主机文件 conf）。

还要小心设置 AWS 之类的主机名：在我使用 ubuntu 18 的情况下，将 ip-XXXX 设置为内部或外部 IP 会在 syslog 中生成 DNS 安全警报并立即终止 tsung 进程。

# java - DateTime 给出了意想不到的结果

> ID：10779331
> 
> 赞同：6
> 
> 时间：2012-05-28T04:25:00.250
> 
> 标签：java, datetime, jodatime

我已经尝试过使用 Jodatime `DateTime`，

```
 DateTime dateTime = DateTime
            .parse("1-JAN-1900", DateTimeFormat.forPattern("dd-MMM-yyyy"))
            .plusSeconds(2075866000);
    String dateTimeStr = DateTimeFormat.forPattern(
            "yyyy/MM/dd HH:mm:ss").print(dateTime);
    System.out.println(dateTimeStr); 
```

我也尝试过使用 Jodatime`MutableDateTime`

```
 MutableDateTime dateTime = MutableDateTime
            .parse("1-JAN-1900", DateTimeFormat.forPattern("dd-MMM-yyyy"));
    dateTime.add(DurationFieldType.seconds(), 2075866000);
    String dateTimeStr = DateTimeFormat.forPattern(
                "yyyy/MM/dd HH:mm:ss").print(dateTime.toDateTime());
    System.out.println(dateTimeStr); 
```

两者都给了我相同的结果，`1965/10/13 06:09:54`.

我希望，，`1965/10/13 05:26:40`而不是。我正在使用下面给出的 Oracle 查询得到这个，

```
select to_date('1900-JAN-1') + 2075866000/86400 from dual 
```

在 Joda 和 Oracle 之间发生矛盾时，我尝试[了 Wolframalpha](http://www.wolframalpha.com/input/?i=%281900/01/01%2000:00:00%29%20%2b%202075866000%20seconds&dataset=)，这也给了我与 Oracle 相同的结果。

**任何人请解释为什么会有这种差异？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:41:44.793

根据[timeanddate.com](http://www.timeanddate.com/worldclock/timezone.html?n=122&syear=1925)的说法，吉隆坡在 1901、1905、1933、1941、1942、1945 年进行了时区调整，总和可能解释了您所看到的差异。

编辑：事实上，如果你把所有的调整加起来，你会得到 43:14，这正是你看到的差异。

JodaTime 和 Java 为您提供正确的数字。

# ajax - Ajax div 加载

> ID：10779340
> 
> 赞同：0
> 
> 时间：2012-05-28T04:26:37.217
> 
> 标签：ajax

我正在用 ajax 加载一个 div。我的代码是。

**代码：**

```
<script type="text/javascript">
function showvalue(str)
{

if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {

    var myString = xmlhttp.responseText; 
    document.getElementById("div2").innerHTML=myString;

   }
  }
xmlhttp.open("GET","test.php?u="+str,true);
xmlhttp.send();
} 
```

当用户单击按钮时。它显示了一个包含一些内容的 div。当用户再次单击按钮时，查询再次从数据库中选择一些数据。div 中的先前内容丢失，新内容被插入到 div 中。但我想将以前的数据和新数据都加载到该 div 中。有没有办法保存以前的 div 状态？请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T04:32:45.947

更改此行

```
document.getElementById("div2").innerHTML=myString; 
```

至

```
document.getElementById("div2").innerHTML+=myString; 
```

# ruby-on-rails-3.1 - 使用 sprockets-commonjs 时显示“模块未定义”错误

> ID：10779342
> 
> 赞同：1
> 
> 时间：2012-05-28T04:26:52.163
> 
> 标签：ruby-on-rails-3.1, asset-pipeline, sprockets, commonjs

我一直试图让 sprockets-commonjs 在我的 Rails 项目上工作一段时间，但没有运气。

这就是我正在做的事情：

**宝石文件**

```
...

gem 'jquery-rails'
gem 'twitter-bootstrap-rails', :git => 'http://github.com/seyhunak/twitter-bootstrap-rails.git'
gem "ember-rails", :git => "https://github.com/emberjs/ember-rails.git", :branch => "master"
gem 'sprockets-commonjs'

... 
```

**应用程序/资产/javascripts/hello.module.js**

```
 module.exports = function () {
       return "hello world!";
      }; 
```

这是我运行应用程序时得到的：

Uncaught ReferenceError: module is not defined 。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:55:48.547

以下为我修复了此错误（尽管我仍然无法使用我的模块）：

停止 rails 服务器 rm -rf tmp/cache 启动 rails 服务器

资源：

[https://github.com/maccman/sprockets-commonjs/issues/4](https://github.com/maccman/sprockets-commonjs/issues/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:03:10.190

所以我只是有一个类似的问题。你可以发布你需要模块的地方吗？

我的直觉是要么你只需要它一次，要么根本不需要它。

还要确保您需要`name.module`而不仅仅是`name`. 哦，你还必须像代码中的普通 commonjs 模块一样需要它（即使用 just `name`）

# git - .gitignore NuGet 排除包/包含包/repositories.config

> ID：10779343
> 
> 赞同：91
> 
> 时间：2012-05-28T04:27:00.457
> 
> 标签：git, nuget, gitignore

我正在尝试为使用 NuGet 的 Visual Studio 项目创建一个 .gitignore。它目前包含：

```
\packages/*
!packages/repositories.config 
```

这不会忽略文件夹中的任何内容。一切都在添加上演。我也试过：

```
packages/
!packages/repositories.config 
```

这会忽略 packages 文件夹中的所有内容，并且不包括 packages/repositories.config。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-28T14:08:51.187

```
/packages/
!packages/repositories.config 
```

您还可以`.gitignore`在包文件夹中添加一个：

```
*
!repositories.config
!.gitignore 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-03-06T23:04:36.487

我遇到了同样的问题。

以上解决方案都不适合我。而且我认为维护多个 .ignore 文件是一个糟糕的解决方案。

这就是我解决它的方法。

```
**/packages/*
!**/packages/repositories.config 
```

组合两个星号将匹配任何文件夹字符串。我认为省略星号会产生相同的效果，但显然我（我们）错了，因为它似乎不起作用。

Visual Studio官方[.gitignore 模板](https://github.com/github/gitignore/blob/master/VisualStudio.gitignore)推荐以下解决方案：

```
# NuGet Packages
*.nupkg
# The packages folder can be ignored because of Package Restore
**/packages/*
# except build/, which is used as an MSBuild target.
!**/packages/build/
# Uncomment if necessary however generally it will be regenerated when needed
#!**/packages/repositories.config 
```

编辑：您可以使用[https://www.gitignore.io](https://www.gitignore.io)为您喜欢的项目生成 .ignore 文件 :-)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-03-14T20:59:43.440

这对我有用。

```
#NuGet
packages
!packages/repositories.config 
```

（与[@manojlds 的答案](https://stackoverflow.com/a/10786009/650475)相同，只是删除了第一行中的星号。这对我不起作用。）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-17T19:16:05.430

我发现这个简单的模式有效。

```
/packages/*/ 
```

它应该忽略根包目录中的所有目录，但包括那里的所有文件。不确定 repositories.config 之外的其他文件可能会出现在那里，或者它们是否应该包含在存储库中。

另请参阅[.gitignore 语法：bin vs bin/ vs. bin/* vs. bin/**](https://stackoverflow.com/q/8783093/143684)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-06T14:31:39.260

如果您想为***所有 NUGET Temp 工件正确执行此操作***

将此代码添加到您的`.gitignore`

* * *

> ```
> # Ignore all my NuGet temp Packages
> *.nupkg
> # NuGet Symbol Packages
> *.snupkg
> # The packages folder can be ignored because of Package Restore
> **/[Pp]ackages/*
> # except build/, which is used as an MSBuild target.
> !**/[Pp]ackages/build/
> # Uncomment if necessary however generally it will be regenerated when needed
> #!**/[Pp]ackages/repositories.config
> # NuGet v3's project.json files produces more ignorable files
> *.nuget.props
> *.nuget.targets 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-25T12:10:42.667

对我来说只有这有效：

`**/packages/**`

# xcode4.3 - 如何使用 xcode + phonegap 为 iphone 5.1 构建未签名的应用程序并在没有苹果开发人员程序的情况下创建 .ipa 文件？

> ID：10779344
> 
> 赞同：0
> 
> 时间：2012-05-28T04:27:10.063
> 
> 标签：xcode4.3

[1](https://stackoverflow.com/questions/9664577/distribute-unsigned-app-iphone-for-jailbroken-iphone-with-no-cydia)为iphone分发未签名的应用程序？

[2](https://stackoverflow.com/questions/8204969/how-can-i-install-an-unsigned-application-on-an-iphone-from-xcode)在 iphone 上安装未签名的应用程序。我更改了 sdksetting 和项目设置。但这对我没有帮助？所以给我一个合适的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:43:44.697

您应该尝试[JailCoder](http://oneiros.altervista.org/jailcoder/ "监狱编码器")，它会为您修补所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:37:27.143

1) Ad hoc 分发是您唯一的选择（并且仅限于 100 个（在此输入时）用户：

更多信息：[Xcode 应用程序分发给朋友](https://stackoverflow.com/questions/8701273/xcode-app-distribution-to-friends)

2) 安装别人未签名的应用程序（需要越狱）或在自己的 iPhone 上运行自己的代码/项目（只需要配置）？

更多信息：[在没有苹果开发者程序或越狱的设备上测试 iOS 应用程序](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak)

广泛的（代码签名）文档：http: [//developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/CodeSigning/CodeSigning.html](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/CodeSigning/CodeSigning.html)

# java - LiveConnect 无法初始化 firefox 扩展 java.lang.reflect.InvocationTargetException 中的某些类

> ID：10779345
> 
> 赞同：0
> 
> 时间：2012-05-28T04:27:14.087
> 
> 标签：java, javascript, firefox-addon, liveconnect

我按照本指南[https://developer.mozilla.org/en/Java_in_Firefox_Extensions](https://developer.mozilla.org/en/Java_in_Firefox_Extensions)使我能够访问 firefox 插件中的 java 类（我实际上是将它们添加到 selenium ide 的用户扩展中）。

上面的指南一切都很好，直到我的java代码尝试初始化导入的对象......

因此，如果我导入 jtidy 以尝试清理 html，一旦我初始化它，我就会得到一个 java.lang.reflect.InvocationTargetException 异常。有趣的是，我可以在 javascript 中初始化 jtidy 类，然后通过它，它可以工作，直到我尝试解析 dom。我认为这一切都与权限有关，但我对 Live Connect 的工作还不够，不知道从这里去哪里。

我的代码如下：

Javascript

```
PageBot.prototype.locateElementByLabelText = function(labelText, inDocument) {
    //var pageTitle = inDocument.getElementsByTagName('title').item(0).nodeName;
    var pageTitle = inDocument.title;
    LOG.warn("Title = "+ pageTitle);
    var pageSource = inDocument.getElementsByTagName('html')[0].innerHTML;
    LOG.warn("I have the page source");
    var xpathValue = getXpathUsingJavaFnc(labelText, pageTitle, pageSource);
    LOG.warn("Xpath = "+xpathValue);
    return this.locateElementByXPath(xpathValue, inDocument);
};

Selenium.prototype.doLoadProject = function(locator, paramString) {
    LOG.warn("starting to load Load Project "+locator + " " + paramString);
    try{
    var result = inst.initialiseProject(locator, Components.classes["@mozilla.org/process/environment;1"].getService(Components.interfaces.nsIEnvironment).get('AUTOMATED_HOME')+"/");
    }catch(e){
    LOG.warn(e.message);
    }
    LOG.warn("finished Load Project");
    LOG.warn(result);
};

var basePath = Components.classes["@mozilla.org/process/environment;1"].getService(Components.interfaces.nsIEnvironment).get('AUTOMATED_HOME');
 var fullPath = 'file:///' + basePath + '/ScenarioFramework-jar-with-dependencies.jar';

LOG.warn("full path = "+fullPath);
var extensionUrl = "file:///" + basePath +'/javaFirefoxExtensionUtils.jar';  
var classLoaderJarpath = extensionUrl;  
var myJarpath = fullPath;   
//var testTidy = "file:///" + basePath +'/jtidy-r938.jar'; 

var urlArray = []; 
urlArray[0] = new java.net.URL(myJarpath);  
urlArray[1] = new java.net.URL(classLoaderJarpath);  
urlArray[2] = new java.net.URL(testTidy); 
var cl = java.net.URLClassLoader.newInstance(urlArray);  

policyAdd(cl, urlArray);  
var classToLoad = "scenario.framework.main.SeleniumRunner";
var aClass = cl.loadClass(classToLoad);
//var aClass = java.lang.Class.forName(classToLoad, true, cl);
var inst = aClass.newInstance();

LOG.warn("finished loading add Java");

function getXpathUsingJavaFnc(eleName, pageTitle, pageSource) {
LOG.warn("Testing getXpath");
    try{    
        var xpathValue = inst.findElementUsingName(eleName, pageTitle, pageSource);

    }catch(e){
        //var jvm = Components.classes["@mozilla.org/oji/jvm-mgr;1"].getService(Components.interfaces.nsIJVMManager);
        //jvm.showJavaConsole();
        logExc(e);
    }
return xpathValue;
};

function policyAdd (loader, urls) {  
    try {       
        var str = 'edu.mit.simile.javaFirefoxExtensionUtils.URLSetPolicy';  
        var policyClass = java.lang.Class.forName(  
           str,  
           true,  
           loader  
    );  
    var policy = policyClass.newInstance();  
    policy.setOuterPolicy(java.security.Policy.getPolicy());  
    java.security.Policy.setPolicy(policy);  
    policy.addPermission(new java.security.AllPermission());  
    for (var j=0; j < urls.length; j++) {  
        policy.addURL(urls[j]);  
    }  
    java.lang.System.setSecurityManager(null);

var t = java.lang.Thread.currentThread().setContextClassLoader(cl);

    }catch(e) {  
        logExc(e);
    }  
}  

function logExc(e) {
    try {
        while(e != null) {
            LOG.warn(e);
            e = e.getCause();
        }
        LOG.warn(netscape.javascript.JSUtil.getStackTrace(e));
    } catch(exp) {
         LOG.warn("exception while logging exception");
         LOG.warn(exp);
        LOG.warn("exception being logged");
        LOG.warn(e);
    }
} 
```

爪哇：

```
public static String findElementUsingName(String Name, String pageTitle, String html){
     org.w3c.tidy.Tidy tidy = new org.w3c.tidy.Tidy();
     return "//input[@id='password']";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:03:02.193

每次编译后重启 Firefox

# css - CSS - 仅在 div 中更改某些类的行为

> ID：10779350
> 
> 赞同：0
> 
> 时间：2012-05-28T04:27:49.637
> 
> 标签：css, extjs

我在我的前端使用 ExtJS 4，我有一棵树，所有子节点都从根节点偏移，这是由两个 transperant`<img.../>`每个都有自己的类来完成的。我想删除偏移量，并且所有子节点都位于根目录下，只需将`width`其中之一设置为以下内容即可轻松完成`<img../> classes`：

```
.img_class_1 {
width : 0px;
} 
```

实际上我目前正在使用。问题是我不确定我或其他人将来是否不需要这个具有原始行为的类，所以我的问题是 - CSS 语法是否允许为某个类设置不同的行为`<div id..>`。为了清楚起见，我希望我`class = "img_class_1"`只`width: 0px`在 div 内和 div`id = "img_container"`外的任何地方都有这个 id 我希望我的班级保持它的原始行为。在 CSS 中是否有可能，我该怎么做？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:29:53.073

使您的选择器更具体：

```
#img_container .img_class_1 {
  width : 0px;
} 
```

`a b c`选择位于`c`元素`b`内部的`a`元素（不一定是直接子元素，而是后代）。

# mysql - Phpmyadmin 中的错误

> ID：10779352
> 
> 赞同：-1
> 
> 时间：2012-05-28T04:28:03.043
> 
> 标签：mysql, database, phpmyadmin

在过去的两天里，当我使用 phpmyadmin 时，我收到了这样的错误。我不知道为什么我会收到这样的错误。任何人请帮助我。提前致谢。

**SQL查询：**

```
SET CHARACTER SET 'utf8'; 
```

**MySQL 说：**

```
[nothing] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:31:51.017

您必须更改Mysql 配置文件中**[mysqld]**`default-character-set`下的操作。**它与PhpMyAdmin**无关。这是默认设置，排序规则是.****`collation``mysql releases`****

 ****> 在您的 Mysql 配置中，更改 [mysqld] 选项卡下的默认字符集。例如：
> 
> ```
> [mysqld]
> default-character-set=utf8 
> ```
> 
> 之后不要忘记重新启动您的 Mysql 服务器以使更改生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:43:35.390

MySQL说'什么都没有'，是错误还是只是消息？

SET 语句不返回任何数据集。要检查它是否正常工作，请尝试这些 -

```
SET CHARACTER SET 'utf8';
SELECT @@character_set_client; -- should return 'utf8'

SET CHARACTER SET 'latin1';
SELECT @@character_set_client; -- should return 'latin1' 
```****

# matlab - 在 MATLAB 中的 EVAL 函数中指定数组元素

> ID：10779353
> 
> 赞同：0
> 
> 时间：2012-05-28T04:29:17.407
> 
> 标签：matlab, eval

我正在尝试使用`eval`MATLAB 中的函数创建多个参数数组

`data`本质上，我有一个大数据集（就目前而言，我正在使用：

```
variablename = ['a' num2str(academy) '_s' num2str(year) '_g' num2str(gender)];

        %loop through all people, if match various classifications, write to variablename
        for row = 1:totalrows;
            if data(row,2) == academy;
                if data(row,1) == year;
                    if data(row,70) == gender;
                         eval([variablename ' = [ data(row,8) data(row,9) data(row,73) data(row,76) data(row,77) data(row,78) data(row,79) ]; ' ]); % ; supresses output (i.e. stop it showing value of each variable                     

                    end%gender if
                end%year if
            end %academy if
        end %row loop 
```

这工作得相当好，除了每次我得到与所有`if`语句匹配的第二条记录时，它都会覆盖第一组数据。

所以我的问题是，如何指定`eval`要写入数据的变量的行？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:31:31.067

而不是使用 EVAL，考虑这个：

```
data = [...];           %# some big matrix, rows are records, columns are fields

year = 2012;
gender = 2;             %# female
academy = 5;            %# corresponds to some meaningful value

cols = [8 9 73 76:79];  %# list of columns to select

%# get all rows matching the above conditions
idx = ( data(:,1)==year && data(:,70)==gender && data(:,2)==academy );
X = data(idx,cols); 
```

如果您正在执行这种类型的多个查询，也许您可​​以将结果存储在一个单元格数组中，并保留一个单独的矩阵来存储查询参数，例如：

```
map(1,:) = [2012 2 5];  %# for the above query, with X{1} containing the data
map(2,:) = [2003 1 4];  %# for another query, with X{2} for corresponding data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:48:05.450

在回复的提示下，我检查了格式并且以下工作

```
 eval([variablename '(row,:) = [ data(row,8) data(row,9) data(row,73) data(row,76) data(row,77) data(row,78) data(row,79) ]; ' ]); % ; supresses output (i.e. stop it showing value of each variable 
```

# jquery - 具有不显眼的解析的 MVC 3 在 JQuery 对话框上不起作用？

> ID：10779359
> 
> 赞同：3
> 
> 时间：2012-05-28T04:30:10.667
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery-ui-dialog

我有一个带有“data-val-remote”标签的输入标签的 MVC 3 应用程序。例如

```
 <div id="dialog" title="Test">  
       <input class="captcha_input" data-val="true" 
       data-val-remote="ErrorMessage" 
       data-val-remote-additionalfields="*.value" 
       data-val-remote-url="/Controller/Action" 
       data-val-required="Required" id="TestID" name="TestValue" type="text" value="">
   </div> 
```

显示对话框的 JQUERY 片段：

```
$('#dialog').dialog({
            height: 260,
            width: 400,
            modal: true,
            autoOpen: false
        }); 
```

不幸的是，MVC 远程验证本身可以工作，但是当在 JQuery 对话框上显示时，“data-val-remote”标签停止工作。

我原以为即使我们在 Dialog 上显示 INPUT 字段，它仍然继承所有 Javascript 包含和表单操作？

有人可以帮助这是一个错误还是有任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:02:05.067

当 DOM 准备好时，MVC 不显眼的验证器订阅输入控件的事件一次。如果您的页面上有动态内容，您需要指示验证框架重做订阅。

在您的情况下，动态内容是 dailog。因为它将使用旧内容创建一个新 div，所以您需要在对话框创建/打开后重新应用验证器：

```
$.validator.unobtrusive.parse("#dialog"); 
```

# actionscript-3 - AS3 - 功能不总是工作

> ID：10779364
> 
> 赞同：0
> 
> 时间：2012-05-28T04:30:40.980
> 
> 标签：actionscript-3, actionscript

我有一个打开商店的按钮。这家商店有一些文字显示玩家的现金信息。当我在 .as 类中创建商店时，我会显示文本。如果我在单击商店按钮时调用该函数，它将起作用，但如果我在第一次创建商店时调用它，它就不起作用。这是我的代码，请解释为什么这可能不起作用。

```
public function UGShop(){
updateStats();
}

public function updateStats(){
    CashTXT.text = String("$ " + cashamount);
}
} 
```

我的现金已经在我的商店里了。这只是我的代码的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:45:35.960

1.  `cashtxt`未创建或不在舞台上。
2.  `cashamount`没有价值

如果是别的东西，你没有提供任何信息

如果您经常遇到这些事情，请尝试查看[Monster Debugger](http://demonsterdebugger.com/)，它可以告诉您舞台上任何对象的状态。

# caching - 存储 Symfony 2 的缓存？

> ID：10779370
> 
> 赞同：4
> 
> 时间：2012-05-28T04:31:24.907
> 
> 标签：caching, symfony

有没有办法将 symfony 2 缓存（应用程序/缓存）存储在文件系统以外的其他地方？Memcache、S3 还是什么？任何内置选项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T12:18:58.227

您只能通过重载 AppKernel 类中的 getCacheDir() 方法将其移出项目目录。

将其移至 Memcache 有什么意义？这个目录的内容大部分时间是“编译”的类和模板。无论如何，这些文件都会被放入内存（APC 会这样做）。

**编辑**：在开发中，很难避免 I/O，但是您可以通过覆盖 AppKernel`getCacheDir()`和`getLogDir()`方法将它们指向的方法轻松地将 Symfony 的缓存目录移动到内存`/dev/shm`：

```
class AppKernel extends Kernel
{
    // ...

    public function getCacheDir()
    {
        if (in_array($this->environment, array('dev', 'test'))) {
            return '/dev/shm/appname/cache/' .  $this->environment;
        }

        return parent::getCacheDir();
    }

    public function getLogDir()
    {
        if (in_array($this->environment, array('dev', 'test'))) {
            return '/dev/shm/appname/logs';
        }

        return parent::getLogDir();
    }
} 
```

资料来源： http: [//www.whitewashing.de/2013/08/19/speedup_symfony2_on_vagrant_boxes.html](http://www.whitewashing.de/2013/08/19/speedup_symfony2_on_vagrant_boxes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T18:46:59.713

您可以使用 Gaufrette ( [https://github.com/KnpLabs/Gaufrette](https://github.com/KnpLabs/Gaufrette) , [https://github.com/KnpLabs/KnpGaufretteBundle](https://github.com/KnpLabs/KnpGaufretteBundle) ) 从几乎任何可能的存储（APC、内存、S3、FTP、SQL db）创建虚拟文件系统）。然后将 cache-dir 设置`gaufrette://s3`为例如。

# macos - 在 Mac OSX 上设置 emacs 会出错

> ID：10779373
> 
> 赞同：0
> 
> 时间：2012-05-28T04:31:48.570
> 
> 标签：macos, emacs, makefile, installation

我正在尝试在 Mac OS X 10.6.8 上设置和安装 emacs 23.4。我按照安装文件中的说明进行操作。我成功运行了 ./configure，但是当我尝试运行 make 时，它​​返回错误：

`make: *** No targets specified and no makefile found. Stop.`

make 程序应该创建可执行文件，但它没有工作。我对此很陌生，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:48:32.750

该错误基本上表明`configure`实际上没有成功运行。再次运行它，并检查其输出是否有错误消息。成功运行将为您的配置创建一个 Makefile。

# javascript - javascript空条件表达式

> ID：10779375
> 
> 赞同：7
> 
> 时间：2012-05-28T04:31:51.130
> 
> 标签：javascript, operators, null-coalescing-operator

> **可能重复：**
> [javascript 的空合并运算符？](https://stackoverflow.com/questions/476436/null-coalescing-operator-for-javascript)

在 C# 中，您可以这样做：

```
var obj = newObject ?? defaultObject; 
```

那就是 assign `newObject`to `obj`if not null else assign `defaultObject`。我如何用javascript写这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T04:33:40.163

虽然它被视为*滥用*，但您可以执行以下操作：

```
var obj = newObject || defaultObject; 
```

请注意，如果`newObject`是任何*假*值（例如`0`或空字符串），`defaultObject`将作为 的值返回`obj`。考虑到这一点，最好使用三元运算符或标准 if 语句。

```
var obj = ( "undefined" === typeof defaultObject ) ? defaultObject : newObject ; 
```

# comments - Facebook 评论框安装正常，但版主视图选项卡未显示

> ID：10779381
> 
> 赞同：0
> 
> 时间：2012-05-28T04:32:53.490
> 
> 标签：comments, facebook-comments

我已经安装了 Facebook 评论框社交插件，它工作正常，人们发表评论，评论显示，一切都很好。但主持人视图选项卡不显示。

*   管理员和 app-id 元标记确定。
*   调试器不会报告页面上的任何问题。

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.manuelasmanual.com%2Finfo.htm](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.manuelasmanual.com%2Finfo.htm)

**URL 不适合工作**

在 stackoverflow 上还有许多其他类似的问题，但没有人回答。

有没有人清楚地知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:57:06.890

尝试以应用程序的管理员/开发人员的身份抓取页面。此外，请确保评论框连接到的链接也被抓取（并具有`fb:admins`参数集）。这应该会更新页面上的信息并显示评论框的版主视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T04:47:45.317

尝试这个：

我在body标签中声明了这一点：

> ```
> <script>
>   window.fbAsyncInit = function() {
>     FB.init({
>       appId      : '1393766870937xxx',
>       xfbml      : true,
>       version    : 'v2.2'
>     });
>   };
> 
>   (function(d, s, id){
>      var js, fjs = d.getElementsByTagName(s)[0];
>      if (d.getElementById(id)) {return;}
>      js = d.createElement(s); js.id = id;
>      js.src = "//connect.facebook.net/en_US/sdk.js";
>      fjs.parentNode.insertBefore(js, fjs);
>    }(document, 'script', 'facebook-jssdk'));
> </script> 
> ```

我们必须在 head 标签中有这个：

> ```
> <meta property="fb:app_id" content="1393766870937xxx"> 
> ```

所以我认为在两个地方声明似乎是多余的。

# android - 如何在每种显示分辨率（平板电脑、手机等）上显示 2D 图像？

> ID：10779383
> 
> 赞同：1
> 
> 时间：2012-05-28T04:33:13.450
> 
> 标签：android, ios, tablet, screen-resolution, marmalade

我已经编程了一段时间，但我最近才开始为手机和平板电脑开发应用程序。我正在使用 Marmalade 为平板电脑和手机开发跨平台应用程序。**但我的问题更多是概念性的，而不是技术性的。**

首先让我告诉你一些关于我的应用程序的信息。我想开发一个向孩子们介绍动物的应用程序。每只动物都有一个小故事。我设计了 1072 x 768 尺寸的每只动物。因为我所有的设计都是矢量，所以我可以很容易地改变我的图形的尺寸。

我的问题是我应该如何开发我的应用程序以在所有设备上完美显示？新 iPad 的 Retina 显示屏为 2048 x 1536，iPad 2 和 iPad 1 分辨率为 1024 x 768，iPhone 分辨率为 960 x 640，三星 Galaxy Tab 分辨率为 1280 x 800 等等（不同设备（平板电脑或手机）有不同解析度）

克服这个问题只有两种选择，AFAK：

1- 设计多种布局（960 x 640 和 1024 x 768），并根据每个设备切换到最接近的分辨率并在屏幕上拉伸布局。在这种情况下，Galaxy Tab 用户会看到稍微变形的图像，而 iPad 2 用户会看到完美的图像。

2-根据显示大小重新排列我的图形图层，而不是有多个固定布局可供选择。实现这一点有点困难，我必须将图像更改为略大于 1024 x 768，因此根据最终平台，如有必要，我可以显示隐藏的部分。

你们觉得怎么样？我需要使用哪种方法？有没有其他方法可以克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:03:24.580

我不能代表 Android，但 iOS 图形渲染与分辨率无关（基于每个设备系列）。虽然，您面临的主要挑战是渲染矢量图像，因为 iOS 选择的图像文件是 PNG。没有内置的 SVG 渲染器，但有人[尝试](http://cocoacontrols.com/platforms/ios/controls/svgkit)尝试解决这个问题（尽管根本不支持渐变）。基于 CoreGraphics 或 UIKit 的实现将以 1024x768 点渲染 1024x768 图像，无论屏幕是否可以保持 2048x1536 像素，因为它以点而不是像素运行。

尽管您是对的，但某些外形尺寸需要进行更改（对于基于 iOS 的设备，您至少需要 2 个，对于 android 外形尺寸可能需要 3 或 4 个）。您不一定要根据屏幕的确切规格设计图形，而是支持各种纵横比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T05:17:31.653

在对这个主题进行了更多研究之后，我找到了一个解决我的问题的解决方案，它具有不同的分辨率和纵横比。我想与您分享我的计划，但请注意这不是解决问题的通用方法。这只是我决定为这个特定项目处理这个问题的方式。

首先让我们看看我们正在处理什么。[以下](http://www.binvisions.com/articles/tablet-smartphone-resolutions-screen-size-list)是市场上所有常见的智能手机和平板电脑的列表。使用[这篇文章](http://en.wikipedia.org/wiki/Graphic_display_resolutions)，您可以轻松找到每种分辨率的纵横比。

在研究了这个列表后，我意识到我必须处理的最大纵横比是 16:9 (~1.77)，而最低纵横比是 4:3 (~1.33)。另外我必须处理的最大分辨率是 2048×1536（iPad 3 或新 iPad）

所以我决定设计尺寸为 2760×1536 的图形，它保留 16:9 (~1.77) 的纵横比，但我的重要精灵和图形只应放入 2048px （4:3 或~1.33 纵横比或最低纵横比） .

换句话说，我的背景填充了所有 2760 像素的宽度，但我的精灵和图形是必不可少的，并且所有不同设备中的所有用户都必须查看它应该放置在 2048 像素宽度中，保持 3:4 的纵横比（最低纵横比）

然后根据每个屏幕分辨率，我只需要调整我的图形大小以适应设备分辨率。对于具有 1024×600 分辨率（16:9 纵横比）的 Android 设备，我只需将图形大小调整为设备分辨率。对于 iPad 3，我根本不需要调整图形的大小。等等。同样重要的是，在所有设备中，我在屏幕中心水平显示图形，因为我的屏幕的右边距和左边距不包含任何重要的图形或精灵。

这个答案也张贴在果酱论坛[这里](http://madewithmarmalade.com/devnet/forum/how-design-2d-game-work-every-display-resolution)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T12:56:22.970

如果您只是为 iOS 开发，您可以在创建 ipa 时禁用本机分辨率支持。此选项将让您在 iPad 上显示一个 2x 按钮，这将拉伸您的应用程序，如果您使用了矢量图形，它看起来会很好。
另一种方法可能是为不同的屏幕尺寸使用不同的资产，就像我以前在 Android 中所做的那样。

# php - 使用 PHP 通过 AJAX 获取更新后的新 COOKIE 值

> ID：10779387
> 
> 赞同：1
> 
> 时间：2012-05-28T04:33:37.513
> 
> 标签：php, ajax, cookies

这可能是一个新手问题，但我真的需要帮助。

我正在在线商店中创建愿望清单，如果用户已登录，愿望清单项目将保存在数据库中，未登录用户的愿望清单将通过 cookie 保存，我将 AJAX 用于愿望清单功能。一切都很顺利，只是在第一个 ajax 请求中没有更新 cookie。

这是我的第一步（ajax）：

1.  调用 ajax 请求更新愿望清单
2.  根据新的 cookie 重新加载愿望清单模板

上述步骤不会自动更新愿望清单模板`$_COOKIE[]`需要刷新页面。

这是我更新的步骤（ajax）

1.  调用 ajax 请求更新愿望清单
2.  调用另一个 ajax 请求以重新加载愿望清单模板

上面的代码解决了问题，（调用第2步只是刷新`$_cookie`值。），但是需要两次ajax请求来更新wishlist，这需要一点时间来工作。我敢肯定，这不是最好的解决方案。我知道这是一个更好的解决方案。

请帮助:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:18:35.463

Cookie 可以单独通过[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")设置。当您使用[ajax](/questions/tagged/ajax "显示标记为“ajax”的问题")时，我认为您可以在不刷新任何页面的情况下很好地处理[cookie 。](/questions/tagged/cookies "显示标记为“cookies”的问题")

这是您应该实现的逻辑。

1.  向您的 PHP 页面发送 Ajax 请求。
2.  *   如果您已登录，PHP 会将数据保存在数据库中并返回状态值 1。
    *   否则 PHP 返回状态值 0。意味着您没有登录并且无法将其保存在数据库中。
    *   返回`0`时，PHP 可以填充`$_COOKIE`超全局。请求完成后，它将在浏览器中设置 cookie。
3.  在您的 ajax 请求的回调事件中，您检查状态值。如果它`0`只是将数据保存在 cookie 中。此 cookie 可通过`document.cookie`. 这可以通过[jquery轻松完成](/questions/tagged/jquery "显示标记为“jquery”的问题")

### 使用 jQuery 的示例代码

```
// ajax.js
$.post("updatewishlist.php", 
{
    'wishlist_item':'wishlist_value'
},
function(json){
// callback function
    if(json.status==0){
        $.cookie('the_cookie', 'the_value', { expires: 7 });
    }
}); 
```

这里我使用了[jquery cookie 插件](https://github.com/carhartl/jquery-cookie)

```
// updatewishlist.php
<?php
if(user_logged_in()){
// sanitize input here
// update database with $_POST['wishlist_item']
$status = 1;
}else{
// update the cookie
// manipulate $_COOKIE super global
$status = 0;
}

// echoing json

echo json_encode(array('status' => $status));

?> 
```

# ruby-on-rails-3 - 思考狮身人面像对象如何处理属于和有很多关联？

> ID：10779394
> 
> 赞同：2
> 
> 时间：2012-05-28T04:35:07.093
> 
> 标签：ruby-on-rails-3, sphinx, thinking-sphinx

我正在使用 Thinking sphinx（版本 2.0.11）进行搜索，但是遇到了一些问题。假设我有一个名为 Product 的模型，我正在使用 Thinking sphinx 来搜索产品。产品属于公司，公司有很多区域，一个区域也有很多公司。这是我的一些代码：

```
class Product < ActiveRecord::Base
  #....skip some code...

  belongs_to :company
  belongs_to :area

  define_index do
    indexes :name
    indexes description
    indexes company(:name)
    indexes company.introduction
    indexes company.areas.area #column of model area
  end
end 
```

这是我的模型公司和区域

```
class Company < ActiveRecord::Base
  has_many :products
  has_many :areaships
  has_many :areas, :through => :areaships
end

class Area < ActiveRecord::Base
  has_many :areaships
  has_many :companies, :through => :areaships
  has_many :products, :through => :companies
end 
```

如您所见，一个产品属于一家公司，而一家公司拥有并属于许多领域。如何使用 Thinking sphinx 搜索特定产品的区域？假设该地区是巴黎，如果我键入巴黎，我应该得到属于巴黎某些公司的所有产品的结果。我已经尝试了几天，但仍然无法弄清楚。任何帮助表示赞赏。

# sql-server - Sql Row_number 和where 转换低级速度如何提高？

> ID：10779397
> 
> 赞同：0
> 
> 时间：2012-05-28T04:35:34.483
> 
> 标签：sql-server

我的表中有 20 万个数据。我只想访问 40 个数据。在这里，问题是何时触发以下查询

```
 select a.* from 
         (select 
               row_number() over (ORDER BY columnid1) as srno,* 
          from table 
          where 
               columnid1 between 1 and 20 
               and  columnid2 like '%A%'
               and  columnid3 between 20 and 25
         ) as a
        where a.srno>=5200 and a.srno<=5240 
```

然后在 12 秒后给出结果。

**如何提高我的访问速度？**

# c++ - 如何删除 tcl 解释器？

> ID：10779399
> 
> 赞同：4
> 
> 时间：2012-05-28T04:36:15.713
> 
> 标签：c++, tcl

我在 C++ 中有一个应用程序，我为此使用 tcl 解释器。我为我的应用程序创建了一个 tcl 解释器，使用

```
Tcl_Interp *_tclInterp = Tcl_CreateInterp(); 
```

我已经在一个函数中初始化了这个解释器。我想最后在我初始化它的同一个函数中删除/取消设置解释器。所以当我做一个

```
Get("tcl"); 
```

打电话给我没有同一个口译员。

所以我的问题是如何删除/取消设置 tcl 解释器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:47:17.000

您*不能*`delete`在 Tcl 解释器上使用 C++运算符。Tcl 的实现是用 C 语言实现的（出于与这个问题无关的各种原因），因此在与它交互时*必须使用 C 习惯用法。*特别`Tcl_CreateInterp`是 与`Tcl_DeleteInterp`; 它们甚至记录在[同一个手册页上](http://www.tcl.tk/man/tcl8.5/TclLib/CrtInterp.htm)。（当您使用该函数删除解释器时，Tcl 不保证立即释放内存，因为它会一直等到堆栈上不再使用它，但是如果您在理智的时候删除它，那么您将没问题。在内部，`Tcl_DeleteInterp`最终调用`free()`解释器结构，这是正确的，因为解释器是通过分配的`malloc()`.) 如果你想要 RAII 风格的内存管理，你必须将它包装在一个小类中（Boost`scoped_ptr`几乎是完美的，除了你需要一个不同的析构函数）。

在 C++ 中要注意的另一件事是 Tcl 解释器是*严格*线程绑定的。Tcl 库在内部广泛使用线程本地数据，以将全局锁的数量减少到最低限度（特别是，Tcl 没有 Python 的 C 实现的任何奇怪的全局锁问题）。解释器只能从创建它的同一线程中访问或删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:19:51.950

正如[实际](https://stackoverflow.com/users/36174/actual)正确指出的那样，调用的正确函数是`Tcl_DeleteInterp`，但除此之外（[`man 3tcl Tcl_DeleteInterp`](http://www.tcl.tk/man/tcl8.5/TclLib/CrtInterp.htm)）还有更多：

> Tcl_DeleteInterp 将解释器标记为已删除；当对 Tcl_Preserve 的所有调用都与对 Tcl_Release 的调用相匹配时，解释器最终将被删除。

因此，如果您没有对您的解释器 ( `Tcl_Preserve`/ `Tcl_Release`) 进行任何引用计数，那么`Tcl_DeleteInterp`将删除您的解释器。

# java - 如何实现方法 isMyDeviceATablet()？

> ID：10779404
> 
> 赞同：0
> 
> 时间：2012-05-28T04:36:48.220
> 
> 标签：java, android

我想检查我的设备是否是平板电脑。

方法 isMyDeviceATablet() 或 isMyDeviceATablet(Context context) 的最佳实现是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:38:53.440

从 Google I/O 2011 应用程序：

```
public static boolean isHoneycomb() {
    // Can use static final constants like HONEYCOMB, declared in 
    // later versions of the OS since they are inlined at compile 
    // time. This is guaranteed behavior.
    return Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB;
}

public static boolean isTablet(Context context) {
    return (context.getResources().getConfiguration().screenLayout
            & Configuration.SCREENLAYOUT_SIZE_MASK)
            >= Configuration.SCREENLAYOUT_SIZE_LARGE;
}

public static boolean isHoneycombTablet(Context context) {
    return isHoneycomb() && isTablet(context);
} 
```

# jquery - JQuery 每个都没有按预期工作

> ID：10779406
> 
> 赞同：-3
> 
> 时间：2012-05-28T04:37:10.913
> 
> 标签：jquery

```
 jQuery.get("ajax.php", function(data)
    {
        $(data).find("div[id^='feed']").each(function() //Find every div with id starting with feed in AJAX response
            {
                $('#' + $(this).attr("id")).remove();
            });
        $("#newsfeed").prepend(data);
    }); 
```

这适用于在 ajax 响应中符合此描述的一些 div，但不是全部。提前致谢。

为了清楚起见，我想发送一个针对 HTML 的 AJAX 请求，遍历响应中的所有 div。如果他们与 DOM 中已有的东西共享一个 id 并且 id 以“feed”开头，则删除它们。然后将 AJAX 附加到新闻源的顶部。抱歉，如果我之前没有正确解释这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:46:37.723

问题是您不能在 jQuery("html snippet") 构造上使用 .find 。您必须将其附加到 DOM 内的容器中，然后删除不需要的元素。例如：

```
$('#newsfeed').prepend(data).find('div[id^=feed]').remove(); 
```

**编辑**：删除其 ID 仅在响应中以 feed 开头的项目：

```
$('<div class="moar_feed">' + data + '</div>') // create detached elements from the data response, wrapping them inside a <div with class="moar_feed" (arbitrary class name, not even necessary)
.appendTo('#newsfeed') // add the newly created HTML elements to the #newsfeed. the return value of appendTo is the HTML you just created, so you can now call .find() on it
.find('div[id^=feed]') // find the DIVs with id starting with "feed" inside the newly created elements
.remove() // remove them from the DOM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:04:23.420

我认为问题出在这部分：

```
$(data).find("div[id^='feed']") 
```

当您将一个 html 字符串传递给 jQuery 时，就像您对 jQuery 所做的那样`$(data)`，jQuery 创建 DOM 元素以匹配该字符串（这些元素最初与文档分离），然后返回一个*仅包含顶级元素*的 jQuery 对象。也就是说，如果您的字符串包含嵌套元素，则所有元素都会被创建，但在 jQuery 对象中只返回顶级元素。

`.find("div[id^='feed']")`然后查找作为上一步中创建的 jQuery 对象中的元素的*后代*的 div 元素，因此它不会匹配任何顶级元素。

该[`.filter()`方法](http://api.jquery.com/filter/)允许您过滤顶级元素，因此您可以执行以下操作：

```
jQuery.get("ajax.php", function(data)
{
   var $newEls = $(data);

   $newEls.filter("div[id^='feed']")
          .add( $newEls.find("div[id^='feed']") )
          .each(function() {
       $('#' this.id).remove();
   });

   $("#newsfeed").prepend(data);
}); 
```

内`.each()`你可以说`this.id`而不是`$(this).attr("id")`。

一些示例 html 可能有助于澄清我在上面试图解释的内容。鉴于：

```
data = "<div id='feed1'><div id='feed2'/><div id='xyz'/></div>
        <div id='abc'><div id='feed3'/></div>"; 
```

（忽略仅为可读性而存在的换行符）

然后`$(data)`将创建所有五个 div，但返回一个仅包含 'feed1' 和 'abc' div 的 jQuery 对象，因为它们是唯一的顶级对象。

`$(data).find("div[id^='feed']")`返回一个仅包含 'feed2' 和 'feed3' div 的 jQuery 对象，因为它们是`$(data)`jQuery 对象中元素的唯一后代。

`$(data).filter("div[id^='feed']")`返回一个仅包含 'feed1' div 的 jQuery 对象。

**编辑：**你可以用这样的东西来简化它：

```
jQuery.get("ajax.php", function(data)
{
   $("<div/>").append(data).find("div[id^='feed']").each(function() {
       $('#' this.id).remove();
   })
   $("#newsfeed").prepend(data);
}); 
```

这将创建一个完全空的 div 作为容器，以便您可以`.find()`在该容器中使用并取消`.filter()`.

# objective-c - 如何在没有自动释放池的情况下使用 NSBundle pathForResource？

> ID：10779408
> 
> 赞同：0
> 
> 时间：2012-05-28T04:37:23.907
> 
> 标签：objective-c, autorelease, nsbundle

此代码的非自动释放等效项是什么？

> NSString *nsFName = [[NSBundle mainBundle] pathForResource:nsName ofType:nsExt inDirectory:nsPath];

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:51:21.950

没有一个。当您使用 Cocoa 时，[您必须有一个适当的池](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)：

> Cocoa 总是希望有一个可用的自动释放池。如果池不可用，则不会释放自动释放的对象，并且您的应用程序会泄漏内存。如果您在池不可用时发送自动释放消息，Cocoa 会记录适当的错误消息。

GUI 应用程序设置过程的一部分是在主线程上建立一个；非 GUI 程序也需要创建一个。

如果您正在创建自己的线程，则还[需要](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW16)为每个线程创建和管理一个自动释放池：

> 在 Objective-C 框架中链接的应用程序通常必须在其每个线程中创建至少一个自动释放池。如果应用程序使用托管模型（应用程序处理对象的保留和释放），则自动释放池会捕获从该线程自动释放的任何对象。

根据您正在做的其他事情，您也许可以使用 CoreFoundation。有一个 CFType, `CFBundle`, 是在其`NSBundle`上构建的。它有一个功能`CFBundleCopyResourceURL()`可以满足你的需要。如果您可以将所有代码翻译到 Core Foundation，那么您可以使用池来逃脱，尽管 - 正如 Ken 所说 - 这确实不是您认为的负担。`pathForResource:ofType:`无论如何，您可能每次使用时都会碰到磁盘。

# android - Android NDK wifi 示例

> ID：10779414
> 
> 赞同：2
> 
> 时间：2012-05-28T04:38:44.357
> 
> 标签：android, c, android-ndk, java-native-interface

我想通过在android中使用NDK在c代码的帮助下使用WIFI的功能。我不想为 WIFI 使用 Java API。我在 Google 和 stackoverflow 上都试过，但我没有任何例子。我只是想知道，让我知道这是否可能？

我找到了一些用于[WIFI](http://www.kandroid.org/online-pdk/guide/wifi_8h-source.html)的 android API 。但我对实施一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:27:08.220

你可能想看看 libcurl，但不太确定。因为我正在使用 cocos2d-x（使用 android ndk）开发游戏，而 libcurl 是 cocos2d-x 框架中的网络实现，所以我想这可能会有所帮助。

# iphone - 如果需要，下载 UIImage 并保存以备后用

> ID：10779415
> 
> 赞同：0
> 
> 时间：2012-05-28T04:38:46.853
> 
> 标签：iphone, objective-c, ios5

所以，我有一个带有表格视图的应用程序，它显示来自网络的图像（无论从哪里来）

当视图加载下载开始时，但我想建立一个缓存来只下载我在缓存中没有的图像。

我已经看到了下载和保存在磁盘上的教程，但是我怎样才能实现这个验证呢？只下载如果不是本地的，如果是本地的则显示本地的。

如何动态获取这些图像？

就像几乎使用该方法一样，`imageNamed`所以当我需要构建表视图时，我只需调用`[MyClass getImageWithName:(name)`并且如果存在，则返回我的图像，如果不将其放入下载队列

为了清楚起见，我的问题是：“我怎样才能轻松地从文档文件夹中获取一张图像？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:09:18.923

做以下事情：

```
- (NSString *)ImagesDirectoryPath
{
NSFileManager *fileManger = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
basePath = [basePath stringByAppendingFormat:@"/Images"];
NSError *error;
 if(![fileManger fileExistsAtPath:basePath])
 {
    [fileManger createDirectoryAtPath:basePath withIntermediateDirectories:NO attributes:nil error:&error];
 }
return basePath;
} 
```

此方法将返回 Document Directory 下的 Your Images Path

现在你有图像名称所以我们将检查图像目录是否存在。如果退出，则使用该 img 或下载 img 然后存储它 // 此代码将是 cellForRowAtIndexPath

```
 NSString *strImgPath = [self ImagesDirectoryPath];
strImgPath = [strImgPath stringByAppendingFormat:[NSString stringWithFormat:@"/%@.png",imgName]];
 NSFileManager *fileManger = [NSFileManager defaultManager];
 if(![fileManger fileExistsAtPath:strImgPath]) //Check wether image exits at Image Folder in Doc Dir
 {//file not exists
    UIImage *imgForCell =  [MyClass getImageWithName:imgName];

   if(imgForCell)
   {
    NSData *dataImg = UIImagePNGRepresentation(imgForCell);
    if(dataImg)
    {
        [dataImg writeToFile:strImgPath atomically:YES];
    }
   }
    imgView.image=imgForCell; //Set Image in ImageView
 }
 else
 {//file exists
   NSData *imgData = [NSData dataWithContentsOfFile:strImgPath];
UIImage*imgFound = [UIImage imageWithData:imgData]; 
  imgView.image=imgFound; //Set Image in ImageView
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T04:43:56.073

您可以编写一个保存/加载图像的函数。

这是一个示例，显示如何从文档文件夹保存/加载图像： [http ://www.friendlydeveloper.com/2010/02/using-nsfilemanager-to-save-an-image-to-or-loadremove-an -image-from-documents-directory-coding/](http://www.friendlydeveloper.com/2010/02/using-nsfilemanager-to-save-an-image-to-or-loadremove-an-image-from-documents-directory-coding/)

但建议将图像保存在 Library/Caches 中

# matlab - 在matlab中将两个大矩阵相乘会产生内存不足错误

> ID：10779421
> 
> 赞同：2
> 
> 时间：2012-05-28T04:39:20.943
> 
> 标签：matlab, matrix, sparse-matrix, matrix-multiplication, out-of-memory

我有两个需要相乘的大矩阵：

A×D

其中 A = 2358048 x 1 B = 1 x 492020

我知道乘法需要大量的 RAM，这就是我在 matlab 中出现内存不足的原因（我在服务器上有 90GB 的 RAM 可用）。

有没有办法分几步来做。也许分解一些方法并将部分保存在一些文件中并逐步进行乘法运算。然后最后将它们结合在一起？示例 matlab 代码将是最有价值的。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T04:45:21.970

完整的产品将是 2358048 x 492020，这意味着它有 1,160,206,776,960 个元素。如果将它们存储在 float32 中，则数据量超过 4 TB。你确定你需要完整的矩阵吗？无论如何，您肯定不会将其加载到 RAM 中。

但是，由于它只是两个巨大向量的外积，因此很容易按需找到任何给定的子元素：如果 C = AB，则`C(i, j) = A(i, 1) * B(1, j)`. 你需要对矩阵做的大多数事情都可以这样完成，也许可以根据需要即时计算产品块，而不是存储整个巨大的东西。

您需要使用该产品做什么？

如果出于某种原因您确实需要将整个巨大的东西写入磁盘，那么很容易循环 A 并一次将一行写入某个文件（只是`A(i,1) * B`），或者循环 B 并一次写入一列（`B(1,i) * A`） .

# c# - 两个不同的“字符串”是同一个对象实例？

> ID：10779422
> 
> 赞同：19
> 
> 时间：2012-05-28T04:39:31.457
> 
> 标签：c#, string, reference, equality

该代码非常不言自明。我预计当我创建`a1`并且`b1`我正在创建两个包含相同文本的不同字符串实例时。所以我`a1 == b1`认为这是真的，但`object.ReferenceEquals(a1,b1)`会是假的，但事实并非如此。为什么？

```
//make two seemingly different string instances
string a1 = "test";
string b1 = "test";         
Console.WriteLine(object.ReferenceEquals(a1, b1)); // prints True. why?

//explicitly "recreating" b2
string a2 = "test";
string b2 = "tes";
b2 += "t";    
Console.WriteLine(object.ReferenceEquals(a2, b2)); // prints False

//explicitly using new string constructor
string a3 = new string("test".ToCharArray());
string b3 = new string("test".ToCharArray());    
Console.WriteLine(object.ReferenceEquals(a3, b3)); // prints False 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-28T04:48:33.167

文字字符串对象由编译器合并为单个实例。这实际上[是规范要求的](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)：

> 每个字符串文字不一定会产生一个新的字符串实例。当根据字符串相等运算符（第 7.9.7 节）等效的两个或多个字符串文字出现在同一个程序集中时，这些字符串文字引用同一个字符串实例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T04:58:00.310

编译器已优化为 if 字符串文字与“==”运算符相等，而不需要创建新实例并且都引用同一个实例......所以，这就是为什么您的问题的第一部分回答 True 的原因。

虽然 string 是一种引用类型，但相等运算符（== 和 !=）被定义为比较字符串对象的值，而不是引用。这使得对字符串相等性的测试更加直观。例如：

```
string a = "hello";
string b = "h";
// Append to contents of 'b'
b += "ello";
Console.WriteLine(a == b);
Console.WriteLine((object)a == (object)b); 
```

这显示“True”，然后显示“False”，因为字符串的内容是等价的，但是 a 和 b 不引用同一个字符串实例。

+ 运算符连接字符串：

```
string a = "good " + "morning"; 
```

这将创建一个包含“早上好”的字符串对象。

**Strings are immutable--the contents of a string object cannot be changed after the object is created**, although the syntax makes it appear as if you can do this. For example, when you write this code, the compiler actually creates a new string object to hold the new sequence of characters, and that new object is assigned to b. The string "h" is then eligible for garbage collection.

```
string b = "h";
b += "ello"; 
```

for more reference check this on [msdn](http://msdn.microsoft.com/en-us/library/362314fe.aspx) and [this](http://msdn.microsoft.com/en-us/library/ms228362.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T04:45:29.223

编译器优化。就那么简单。

# java - 如何从列表中删除重复的对象

> ID：10779425
> 
> 赞同：1
> 
> 时间：2012-05-28T04:40:17.893
> 
> 标签：java, arraylist

我在面试中被要求从列表中删除重复的学生对象，其中学生对象可能包含不同的属性，条件是我不应该使用 set 或 hashmap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:43:07.430

对 ArrayList 进行排序并循环遍历。但是如何定义重复对象？相同的引用还是具有相同的属性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:43:58.070

1.  对列表进行排序。
2.  遍历列表，检查当前对象是否等于其邻居。

这需要 O(n*log(n)) 来对列表进行排序，并且需要 O(n) 来遍历排序的列表。

因此，总运行时复杂度为 O(n*log(n)) + O(n) = **O(n*log(n))**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:44:50.390

您可以通过比较学生对象的引用来检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T06:00:35.253

在 List 中没有删除重复项的直接方法。删除重复项最快的方法是 Sets。在要删除重复项的列表中，您必须覆盖 hashcode() 和 equals() 方法，然后必须为一个对象迭代整个列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:05:33.550

可能您的面试官试图从您那里获得“java.util.Set”作为不允许重复对象的答案。这是您可以期待的典型标准问题。

# c++ - int/string[] 的集合，每次插入一行代码

> ID：10779428
> 
> 赞同：1
> 
> 时间：2012-05-28T04:40:35.213
> 
> 标签：c++, string, std

我需要像这样创建一个键/值对的集合：

```
map<const int, string[]> myMap; // psuedo code 
```

最好的方法是什么？
有没有办法做到这一点，我可以在一行中初始化它，例如：

```
myMap.Insert(1, new string[]{ "stack", "is", "awesome" }); // pseudo code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:42:19.773

您可以使用实用功能**[make_pair](http://www.cplusplus.com/reference/std/utility/make_pair/)**。

```
myMap.insert(make_pair(1,"stack")); 
```

不知道为什么你需要一个`string []`，你可以有一个唯一键引用的多个字符串，这不是选择一个的目的`std::map`吗？为什么你需要一个数组然后`std::map`已经提供了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:49:27.393

如果您不在乎是替换还是创建，请使用`operator[]`.

```
 std::map<int, std::string> mymap;
    mymap[1] = "stack is awesome"; 
```

并且不要在地图中使用指针。或`std::multimap`用于具有相同键的多个元素。

示例`std::multimap`：

```
int main() {
    std::multimap<int, std::string> mymmap{{1, "stack"},
                       {1, "is"},
                       {1, "awesome"}};
    auto range = mymmap.equal_range(1);
    for (auto i = range.first; i != range.second; ++i)
    {
        std::cout << (*i).second << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:05:32.163

假设您决定大致坚持当前使用的结构（以`int`键和`string`s 的集合作为关联值），您可能希望将其`std::vector<std::string>`用作值，因此您`map`的定义如下：

```
std::map<int, std::vector<std::string> > mymap; 
```

在这种情况下，使用类似数组的表示法进行插入可能是最简单的：

```
mymap[1] = {"String", "is", "awesome"}; 
```

就目前而言，这取决于使用 C++11 大括号初始值设定项列表。这将适用于最新的编译器（例如，gcc 4.7.0），但在许多较旧的尚未接近符合 C++11 的编译器（例如，VC++10、VC++11 beta）上会失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T06:15:33.683

您应该看一下 std::multimap，它可能更适合您的用例：

```
multimap<int, string> mm; 
```

它与 map 相同，只是它可以为同一个键保存多个值。这通常由不强制唯一性的二叉树实现。

[http://en.cppreference.com/w/cpp/container/multimap](http://en.cppreference.com/w/cpp/container/multimap)

或者您可以使用：

```
map<int, vector<string>> m; 
```

你可以这样初始化：

```
map<int, vector<string>> m {
    { 1, { "stack", "is", "awesome" } },
    { 42, { "foo", "bar", "baz" } }
}; 
```

# curl - 要在我的应用程序中实现 cURL，我的客户是否也必须下载它？

> ID：10779431
> 
> 赞同：1
> 
> 时间：2012-05-28T04:41:10.550
> 
> 标签：curl

我`cURL`使用他们的安装可执行文件安装，如果我想在我的软件中实现此功能，我的软件的用户是否也必须安装`cURL`？我正在非托管中开发它`C++.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:46:10.627

不，需要在用户系统上安装它..

Curl 是免费且开放的软件，可在各种操作系统下编译和运行。由于许多贡献者的努力，Curl 的存在。

curl 是一个命令行工具，用于使用 URL 语法传输数据，支持`DICT, FILE, FTP, FTPS, Gopher, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMTP, SMTPS, Telnet and TFTP`. curl 支持 SSL 证书、`HTTP POST, HTTP PUT, FTP uploading, HTTP form based upload, proxies, cookies, user+password authentication (Basic, Digest, NTLM, Negotiate, kerberos...)`文件传输恢复、代理隧道和大量其他有用的技巧。

cURL 是一个计算机软件项目，提供了一个库和命令行工具，用于使用各种协议传输数据。cURL 项目产生两个产品，libcurl 和 cURL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:48:59.127

如果应用程序仅适用于 curl，则需要将其与应用程序一起打包，如果系统上尚不可用，则安装相同的应用程序。否则，您可以在安装期间将其作为可选选项提供。

# wordpress - 如何将 Google 电子表格中的数据导入 Wordpress 帖子？

> ID：10779434
> 
> 赞同：0
> 
> 时间：2012-05-28T04:41:21.610
> 
> 标签：wordpress, google-sheets, google-spreadsheet-api

标题基本上说明了一切，但澄清一下，我的目标是使用 Google 电子表格（具有在线发布的表格）将数据输入到 Wordpress 帖子的 post_meta 中。应该注意的是，我创建了自定义元框来向 wp-admin 帖子编辑器添加自定义。

更进一步，如果将新条目提交到与 Google 电子表格链接的 Google 表单，是否有办法创建新帖子？

有什么建议么？

先谢谢了，

A. 泰特理发师

# .net - VB.NET：以不同颜色显示字符串

> ID：10779436
> 
> 赞同：0
> 
> 时间：2012-05-28T04:41:33.030
> 
> 标签：.net, vb.net, string-formatting

我的 VB.NET 应用程序生成一个带有数字数据的 HTML 表。我想用逗号格式化数字并在负数周围加上括号。我通过在`ToString()`方法中指定格式字符串来做到这一点。我想要做的是将负数的颜色更改为红色。知道如何做到这一点吗？我的示例代码：

```
...
rowHTML.Append("<td align=""left"">" + num.ToString("#,##0.##;(#,##0.##)") + "</td>")
... 
```

编辑：此时，我在格式化完成后添加了一个检查，以查看第一个字符是否有左括号，然后添加`font`标签：

```
tempString = num.ToString("#,##0.##;(#,##0.##)")
If tempString(0) = "(" Then
  rowHTML.Append("<td align=""left""><font color=""red"">" + tempString + "</font></td>")
Else
  rowHTML.Append("<td align=""left"">" + tempString + "</td>")
End If 
```

这看起来不错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:47:04.003

我只能找到这个：http: [//blogs.msdn.com/b/jmstall/archive/2006/01/13/color-print.aspx](http://blogs.msdn.com/b/jmstall/archive/2006/01/13/color-print.aspx)

您在哪里以及如何准确*打印*文本？

# jquery - 无法在 Firefox 中使用 jQuery .unload() 和 .position() 获得正确的 div 位置

> ID：10779437
> 
> 赞同：1
> 
> 时间：2012-05-28T04:41:33.670
> 
> 标签：jquery, html

我正在使用该`unload`事件将`draggable`div 的位置保存到`localStorage`

这似乎适用于同时支持`unload`事件和 HTML5 Web 存储的浏览器，除了 Firefox（13.0 测试版）。

在 Firefox 中，当刷新页面并正确获取 div 的所有顶部和左侧位置时，卸载事件会按预期触发。但是当关闭选项卡触发卸载事件时，所有位置都返回为0。

有谁知道为什么？我`onbeforeunload`可能更好用吗？

你可以用这个小提琴[http://jsfiddle.net/fhfXh/8/](http://jsfiddle.net/fhfXh/8/)来测试它。

# mysql - 是否可以使用“delete from”语句合并两条记录？

> ID：10779442
> 
> 赞同：9
> 
> 时间：2012-05-28T04:42:11.830
> 
> 标签：mysql, sql

我有一些连接到多个网络/VLans（A、B 和 C）的联网设备，以及仅连接到其中一个网络的其他设备。当我删除或更换网络时，我需要更新我的数据库以反映设备所连接的内容，所以我试图编写一个 mysql 语句来做到这一点，但我遇到了各种障碍。

我的表只有两个字段，不能有重复记录。我的数据示例是

```
deviceID network
1        A
1        B
1        C
2        B
2        C
3        A
4        A
5        B 
```

如何将网络 A 合并到网络 B 中，以便上表看起来像...

```
deviceID network
1        B
1        C
2        B
2        C
3        B
4        B
5        B 
```

我最初的尝试是`set network = 'B' where network = 'A'`，然后是一个`DELETE network 'A'`语句，但这会创建重复项，该表不允许这样做 - 即使重复项很简短。使用替代方法，我只是通过 using`WHERE EXISTS`和各种语句不断遇到失败的 mysql`FROM (SELECT)`语句。是否可以在单个 mysql 语句中执行？我需要两个吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T05:02:41.877

您可以使用`UPDATE IGNORE`更新语句 - 这将跳过任何导致重复的更新。然后，您将在此之后使用 a`DELETE`清除已跳过的行。例如：

```
UPDATE IGNORE mytable SET network = 'B' WHERE network = 'A';
DELETE FROM mytable WHERE network = 'A'; 
```

从[文档](http://dev.mysql.com/doc/refman/5.5/en/update.html)中：

> 使用`IGNORE`关键字，即使更新期间发生错误，更新语句也不会中止。不会更新发生重复键冲突的行。将其列更新为会导致数据转换错误的值的行改为更新为最接近的有效值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T04:56:13.533

您可以考虑将其设为三列，而不是两列
（唯一键保持不变）

*   设备编号
*   网络
*   状态 (1,0)

因此，每当设备被移除/更换时，
您将状态标记为 0，
当然，要检索正确的列表，`status=1`是必需的

# android - 在android中的两个设备之间发送数据

> ID：10779444
> 
> 赞同：3
> 
> 时间：2012-05-28T04:42:20.857
> 
> 标签：android, database

是否可以将数据库从一台设备发送到另一台设备。假设我在设备 1 中使用一个应用程序，现在我在其他设备（设备 2）中安装相同的应用程序。现在是否可以将该数据库从设备 1 发送到设备 2>除了谷歌云之外的任何选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:06:16.127

根据您的要求，有 5 种可能的方式可以在两台 Android 设备之间发送接收数据，

*   短信[发送](http://thinkandroid.wordpress.com/2010/01/08/sending-sms-from-application/)-[接收](http://webhole.net/2011/09/28/android-sdk-tutorial-how-to-receive-text-messages/)
*   [蓝牙](http://developer.android.com/resources/samples/BluetoothChat/index.html)
*   [无线上网](http://marakana.com/forums/android/examples/40.html)
*   [网络服务](http://sarangasl.blogspot.in/2011/10/android-web-service-access-tutorial.html)
*   [C2DM](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

# crash - 这个 ram 控制台错误是什么意思？

> ID：10779445
> 
> 赞同：0
> 
> 时间：2012-05-28T04:42:29.910
> 
> 标签：crash, linux-kernel

我在内核 dmesg 中得到以下日志。我不知道为什么会这样。有时我的内核会不断重启，但并不总是这样。

```
<6>[    0.233184] ram_console: got buffer at 42d80000, size 80000
<4>[    0.233184] BUG: Your driver calls ioremap() on system memory.  This leads
<4>[    0.233215] <4>to architecturally unpredictable behaviour on ARMv6+, and ioremap()
<4>[    0.233215] <4>will fail in the next kernel release.  Please fix your driver. 
```

# jquery - 如何制作下拉列表并在选择时更改内容 - 我的内容是 jquery 手风琴？

> ID：10779458
> 
> 赞同：0
> 
> 时间：2012-05-28T04:44:47.303
> 
> 标签：jquery, drop-down-menu

如何制作下拉列表并在选择时更改内容 - 我的内容是 jquery 手风琴？

我在手风琴中有一份工作和描述的列表，但我想通过添加某种下拉列表或类似的东西来对这些工作进行分类。因此，当您选择一个类别（例如创意工作）时，它只显示该类别中的工作。必须能够支持jquery 手风琴。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T04:52:08.293

```
<select id="someid">
<option value="1">one</option>
<option value="2">two/option>
<option value="3">three</option>
<option value="4">four</option>
</select>
<p>change goes here and put it inside your accordion content tab</p> 
```

脚本

```
$(document).ready(function(){
$('#someid').change(function(){
   $('p').html($(this).text());
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:49:42.293

在你的选择元素中使用 onchange="" 事件，或者让 jQuery 通过元素 id / class / name 来处理这个，由你决定。如果我没记错的话，它不会干扰手风琴的工作。

一个小例子：

```
**html**

<html><body><select id="theList" onchange="showId();"><option>opt1</option><option>opt2</option></select></body></html>

**js**

<script>function showId() { var list = getElementById("theList"); alert(list.options[selectedIndex].value); </script> 
```

希望这能澄清我的意思。

# c++ - 肯定无效的指针范围

> ID：10779474
> 
> 赞同：4
> 
> 时间：2012-05-28T04:47:55.477
> 
> 标签：c++, pointers, segmentation-fault

我看过一些像[http://boost.2283326.n4.nabble.com/shared-ptr-segfaults-on-64bit-AMD-td2560441.html](http://boost.2283326.n4.nabble.com/shared-ptr-segfaults-on-64bit-AMD-td2560441.html)这样的帖子，专家可以在其中查看指针地址并立即说它无效. 我猜这些指针位于进程虚拟内存的一些已知保留位置。上面链接中的示例是 0x90。

**这里有人知道 Linux 上 gcc/g++ 肯定无效的指针范围吗？**
**怎么样`0xd8`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:46:40.210

虽然您不应该编写依赖于此的代码，但 0x1000 下的指针几乎总是无效的。熟悉操作系统的默认内存映射将解释原因，并让您更深入地了解“正常”指针的外观。

# android - 如何对从自定义基本适配器获取值的多列列表视图（按第二列）进行排序

> ID：10779475
> 
> 赞同：0
> 
> 时间：2012-05-28T04:47:58.963
> 
> 标签：android, android-listview, adapter

我有一个带有多个对象的arrayList“listItems”，每个对象都有一个“项目名称”和“项目价格”。

我创建了一个自定义基本适配器“adapterItems”，并在我的活动中将适配器设置为列表

```
AdapterItems adapterItems = new AdapterItems(MyActivity.this, listItems);
listView.setAdapter(adapterItems); 
```

一切正常，所有项目都按照对象添加到arrayList的顺序作为列表视图显示在我的活动中。

现在我想按商品价格的升序对这个列表进行排序。

我可以先对 listItems 进行排序，然后再将其提供给适配器，或者稍后对 listview 适配器进行排序。我怎么能做一个/两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:53:53.207

使用[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)对列表视图进行排序。

[请参阅此示例比较名称并按字母顺序对其进行排序](http://samir-mangroliya.blogspot.in/2012/05/android-sectioned-listview-with-search_6865.html)

**在你的情况下::**

```
public class Item implements Comparable<Item> {

    public String name;
    public int price;

    public int compareTo(Item another) {
        return (this.price-another.price);
    }
} 
```

**和**

> **Collections.sort(你的列表);**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:01:53.303

检查下面的链接...

[Android 排序数组](https://stackoverflow.com/questions/6224978/android-sort-array)

以上链接排序分数与要求您排序价格相同...

或者

创建自定义可比较像..

```
Comparator<Item > comperator = new Comparator<Item >() 
{
    @Override               
    public int compare(Item  object1, Item  object2) {                  
        float First = Float.parseFloat(object1.price);                      
        float Second = Float.parseFloat(object2.price);                     
        return (First < Second ? -1 : (First == Second ? 0 : 1));           
    }
};

Collections.sort(Itemdata, comperator); 
```

当 item 是您的班级并且 Itemdata 是班级项目的数组列表时。

# android - 如何在动态壁纸中选择主题时将必要的位图集存储在内存中

> ID：10779480
> 
> 赞同：1
> 
> 时间：2012-05-28T04:48:47.357
> 
> 标签：android

我是 android 新手我正在研究 android 动态壁纸。我检查了动态壁纸示例，但我没有找到如何在动态壁纸的设置部分选择不同主题的同时更改位图图像集。每个主题都有三个主题，几乎10 张图片我不知道如何更改每个主题的整套图片。我正在使用列表首选项来选择不同的主题，请有人通过回答我的问题来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T04:59:52.443

为什么不将它们存储在哈希图中。我从来没有做过墙纸，但我只是将图像设置为类声明中资源中的位图，然后将它们放入哈希图中并将键设置为 int 就像这样

```
Bitmap one = BitmapFactory.decodeResource(R.drawable.one);
int one = 0;
HashMap<int,Bitmap> map = new HashMap<int,Bitmap>(); 
```

由于我不知道壁纸是如何工作的，我猜它设置得像一个活动，所以在 onCreate() 或者你有什么，你会像这样加载哈希图：

```
map.add(one,one); 
```

# perl - 如何在 windows (activeperl) 中安装 ZeroMQ 及其 cpan perl 模块

> ID：10779482
> 
> 赞同：5
> 
> 时间：2012-05-28T04:49:11.523
> 
> 标签：perl, perl-module, zeromq, nmake

我想通过我的 perl 脚本安装和使用 ZeroMQ。我试图从 CPAN 安装 ZeroMQ，但在最后一步安装失败说：

```
ZeroMQ-0.21/eg/threaded_server.pl
---- Unsatisfied dependencies detected during ----
----         DMAKI/ZeroMQ-0.21.tar.gz         ----
    Devel::CheckLib [build_requires]
    ExtUtils::MakeMaker [build_requires]
Running make test
  Make had some problems, won't test
  Delayed until after prerequisites
Running make install
  Make had some problems, won't install
  Delayed until after prerequisites
..........
.............

blib\script\use-devel-checklib
        pl2bat.bat blib\script\use-devel-checklib
  MATTN/Devel-CheckLib-0.98.tar.gz
  C:\PROGRA~2\MICROS~1.0\VC\bin\nmake.exe -- OK
Running make test

Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

        C:\Perl5.14\bin\perl.exe "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib\lib', 'blib\arch')" t/*.t
t/00-load.t ................... ok
t/bad-single-word-compiler.t .. ok
t/cmdline-LIBS-INC.t .......... skipped: Couldn't build a library to test against
t/custom-function.t ........... skipped: Couldn't build a library to test against
t/dash-l-libs.t ............... skipped: Couldn't build a library to test against
t/exit_with_message.t ......... ok
t/found.t .....................
t/found.t ..................... 1/6 #   Failed test 'lib => 'msvcrt''
   at t/found.t line 53.
          got: 'Can't link/include C library 'msvcrt', aborting.
 '
     expected: ''
       STDOUT:
       STDERR:

   Failed test '... and check_lib is true'
   at t/found.t line 54.

   Failed test 'lib => 'kernel32''
   at t/found.t line 53.
          got: 'Can't link/include C library 'kernel32', aborting.
 '
     expected: ''
       STDOUT:
       STDERR:

   Failed test '... and check_lib is true'
   at t/found.t line 54.

   Failed test 'lib => ['msvcrt', 'kernel32']'
   at t/found.t line 53.
          got: 'Can't link/include C library 'msvcrt', 'kernel32', aborting.
 '
     expected: ''
       STDOUT:
       STDERR:

   Failed test '... and check_lib is true'
   at t/found.t line 54.
 Looks like you failed 6 tests of 6.
t/found.t ..................... Dubious, test returned 6 (wstat 1536, 0x600)
Failed 6/6 subtests
t/headers.t ................... 1/5
   Failed test 'incpath => '.',         header => 't/inc/headerfile.h''
t/headers.t ................... 3/5 #   at t/headers.t line 47.
          got: 'Can't link/include C library 't/inc/headerfile.h', aborting.
 '
     expected: ''
       STDOUT:
       STDERR:

   Failed test 'incpath => [qw(t/inc)], header => 'headerfile.h''
   at t/headers.t line 47.
          got: 'Can't link/include C library 'headerfile.h', aborting.
 '
     expected: ''
       STDOUT:
       STDERR:

   Failed test 'INC => '-I. -It/inc',   header => 'headerfile.h''
   at t/headers.t line 47.
          got: 'Can't link/include C library 'headerfile.h', aborting.
 '
     expected: ''
       STDOUT:
       STDERR:
 Looks like you failed 3 tests of 5.
t/headers.t ................... Dubious, test returned 3 (wstat 768, 0x300)
Failed 3/5 subtests
t/multi-word-compiler.t ....... ok
t/not_found.t ................. 3/12
   Failed test 'missing 'foo' detected'
   at t/not_found.t line 39.
                   'Can't link/include C library 'msvcrt', 'foo', aborting.
 '
     doesn't match '/^Can't link/include C library 'foo'/ms'
 Looks like you failed 1 test of 12.
t/not_found.t ................. Dubious, test returned 1 (wstat 256, 0x100)
Failed 1/12 subtests

Test Summary Report
-------------------
t/found.t                   (Wstat: 1536 Tests: 6 Failed: 6)
  Failed tests:  1-6
  Non-zero exit status: 6
t/headers.t                 (Wstat: 768 Tests: 5 Failed: 3)
  Failed tests:  3-5
  Non-zero exit status: 3
t/not_found.t               (Wstat: 256 Tests: 12 Failed: 1)
  Failed test:  5
  Non-zero exit status: 1
Files=10, Tests=27,  9 wallclock secs ( 0.09 usr +  0.06 sys =  0.16 CPU)
Result: FAIL
Failed 3/10 test programs. 10/27 subtests failed.
NMAKE : fatal error U1077: 'C:\Perl5.14\bin\perl.exe' : return code '0x1'
Stop.
  MATTN/Devel-CheckLib-0.98.tar.gz
  C:\PROGRA~2\MICROS~1.0\VC\bin\nmake.exe test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports MATTN/Devel-CheckLib-0.98.tar.gz
Running make install
  make test had returned bad status, won't install without force
Running install for module 'ExtUtils::MakeMaker'
Running make for M/MS/MSCHWERN/ExtUtils-MakeMaker-6.62.tar.gz
Checksum for C:\Perl5.14\cpan\sources\authors\id\M\MS\MSCHWERN\ExtUtils-MakeMaker-6.62.tar.gz ok
........
........
t/Liblist_Kid.t ........... 1/? Note (probably harmless): No library found for unreal_test
Note (probably harmless): No library found for unreal_test
Note (probably harmless): No library found for -llibtest
Note (probably harmless): No library found for -lunreal_test
Note (probably harmless): No library found for unreal_test
Note (probably harmless): No library found for dir_test
Warning: '-Ldir' changed to '-LC:/Perl5.14/cpan/build/ExtUtils-MakeMaker-6.62-IJCHpC/t/liblist/win32/dir'
Warning: '-Ldi r' changed to '-LC:/Perl5.14/cpan/build/ExtUtils-MakeMaker-6.62-IJCHpC/t/liblist/win32/di r'
Note (probably harmless): No library found for unreal_test
Note (probably harmless): No library found for unreal_test
t/Liblist_Kid.t ........... ok
...........
...........
t/MM_Win32.t .............. 1/61
   Failed test 'pasthru()'
   at t/MM_Win32.t line 273.
          got: 'PASTHRU = -nologo'
     expected: 'PASTHRU = '
 Looks like you failed 1 test of 61.
t/MM_Win32.t .............. Dubious, test returned 1 (wstat 256, 0x100)
Failed 1/61 subtests
        (less 6 skipped subtests: 54 okay)
................
................

t/xs.t .................... skipped: ExtUtils::CBuilder not installed or couldn't find a compiler

Test Summary Report
t/MM_Win32.t            (Wstat: 256 Tests: 61 Failed: 1)
  Failed test:  49
  Non-zero exit status: 1
Files=59, Tests=976, 139 wallclock secs ( 0.47 usr +  0.17 sys =  0.64 CPU)
Result: FAIL
Failed 1/59 test programs. 1/976 subtests failed.
NMAKE : fatal error U1077: 'C:\Perl5.14\bin\perl.exe' : return code '0xff'
Stop.
  MSCHWERN/ExtUtils-MakeMaker-6.62.tar.gz
  C:\PROGRA~2\MICROS~1.0\VC\bin\nmake.exe test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports MSCHWERN/ExtUtils-MakeMaker-6.62.tar.gz
Running make install
  make test had returned bad status, won't install without force
Running make for D/DM/DMAKI/ZeroMQ-0.21.tar.gz
Warning: Prerequisite 'Devel::CheckLib => 0.4' for 'DMAKI/ZeroMQ-0.21.tar.gz' failed when processing 'MATTN/Devel-CheckLib-0.98.tar.gz' with 'make_test =
chances to succeed are limited.
Warning: Prerequisite 'ExtUtils::MakeMaker => 6.62' for 'DMAKI/ZeroMQ-0.21.tar.gz' failed when processing 'MSCHWERN/ExtUtils-MakeMaker-6.62.tar.gz' with
inuing, but chances to succeed are limited.

  CPAN.pm: Going to build D/DM/DMAKI/ZeroMQ-0.21.tar.gz

Probing environment variables:
 + Detected ZMQ_INCLUDES from ZMQ_HOME...
 + Detected ZMQ_LIBS from ZMQ_HOME...
Probing libzmq via pkg-config ...
Package libzmq was not found in the pkg-config search path.
Perhaps you should add the directory containing `libzmq.pc'
to the PKG_CONFIG_PATH environment variable
No package 'libzmq' found
 - No libzmq found...
Probing zeromq2 via pkg-config ...
Package zeromq2 was not found in the pkg-config search path.
Perhaps you should add the directory containing `zeromq2.pc'
to the PKG_CONFIG_PATH environment variable
No package 'zeromq2' found
 - No zeromq2 found...
Detected the following ZMQ settings:
 + ZMQ_HOME = C:\Users\kallol\Desktop\perl_test\zeromq-2.2.0
 + ZMQ_H = C:\Users\kallol\Desktop\perl_test\zeromq-2.2.0\include
 + ZMQ_INCLUDES = C:\Users\kallol\Desktop\perl_test\zeromq-2.2.0\include
 + ZMQ_LIBS = -LC:\Users\kallol\Desktop\perl_test\zeromq-2.2.0\lib
 + ZMQ_TRACE = (null)
Can't link/include C library 'zmq.h', 'zmq', aborting.
Warning: No success on command[C:\Perl5.14\bin\perl.exe Makefile.PL INSTALLDIRS=site]
  DMAKI/ZeroMQ-0.21.tar.gz
  C:\Perl5.14\bin\perl.exe Makefile.PL INSTALLDIRS=site -- NOT OK
Running make test
  Make had some problems, won't test
Running make install
  Make had some problems, won't install
Failed during this command:
 MATTN/Devel-CheckLib-0.98.tar.gz             : make_test NO
 MSCHWERN/ExtUtils-MakeMaker-6.62.tar.gz      : make_test NO
 DMAKI/ZeroMQ-0.21.tar.gz                     : writemakefile NO 'C:\Perl5.14\bin\perl.exe Makefile.PL INSTALLDIRS=site' returned status 512 
```

安装程序似乎使用 Visual C 2010 中的 nmake。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:44:51.367

您的系统无法安装两个依赖项，整个工具链都被破坏了。我将如何解决它：

1.  卸载 MSVC 和 nmake。
2.  升级到受支持的 ActivePerl (5.14) 版本。
3.  `MinGW`使用 ppm安装软件包。这为您提供了适当的编译器。
4.  安装`ExtUtils::MakeMaker`和`Devel::CheckLib`.
5.  `ZeroMQ`像以前一样安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T18:42:06.440

ZeroMQ 已被弃用：请参阅 perldoc 了解 ZeroMQ！

```
Please note that this module has been DEPRECATED in favor of ZMQ::LibZMQ2, ZMQ::LibZMQ3, and ZMQ. see https://github.com/lestrrat/p5-ZMQ and other CPAN pages. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T04:55:42.527

您必须安装 C 编译器。我们检查 $Config{cc}，无论是在 Config.pm 中还是在 $PATH 中。根据 Devel-CheckLib-0.98

尝试将 cl 添加到您的 PATH 或在 Visual Studio 命令提示符下运行 all

# mysql - 用户 ''@'localhost' 拒绝访问数据库 'user'

> ID：10779484
> 
> 赞同：0
> 
> 时间：2012-05-28T04:49:38.480
> 
> 标签：mysql

我在登录mysql时遇到问题。我错误地将用户名从“root”重命名为“xyz”，并将密码重命名为密码。然后，我无法使用我设置的 root 密码从命令行运行 MySql。甚至无法进行显示数据库和表创建查询。用户显示 'root'@'localhost' 而 current_user() 是 ''@'localhost' 我重新安装了 MySql 仍然存在问题。

请帮助我，以便我可以继续使用mysql。

在此先感谢，拉吉里塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:06:17.767

使用[http://www.cyberciti.biz/tips/recover-mysql-root-password.html](http://www.cyberciti.biz/tips/recover-mysql-root-password.html)上的过程绕过安全并重新创建密码。

# iis - 添加虚拟目录时，“无法验证对路径 (C:\inetpub\wwwroot) 的访问”

> ID：10779488
> 
> 赞同：89
> 
> 时间：2012-05-28T04:49:50.263
> 
> 标签：iis, iis-7.5

我正在尝试在 Windows Server 2008 R2 上设置 IIS Web 服务和 ASP.NET 服务。物理目录已创建，但我无法让它工作。这是全新的 IIS 角色安装。

![在此处输入图像描述](../Images/cbecdbd5cfe822e3df806dc9b8e99b71.png)

服务器位于域上，并且 domain\server$ 具有对`C:\inetpub\wwwroot`. 读/写/浏览访问权限也被授予：

*   管理员
*   网络服务
*   用户
*   IIS_IUSRS
*   IUSR

**到目前为止我尝试过的**

*   在`Edit Virtual Directory -> Connect As`对话框中，选择应用程序用户（通过身份验证）。当我按测试设置时，出现上述错误。

*   在`Edit Virtual Directory -> Connect As`对话框中，选择特定用户：（`IUSR`无密码）。当我按下测试设置时，我得到以下信息： ![在此处输入图像描述](../Images/863b3cd1e67aedd91ffd254923f1ecd1.png)

**其他注意事项**

启用匿名身份验证，匿名用户身份是应用程序池身份。

应用程序池配置如下所示： ![在此处输入图像描述](../Images/062d708bc4c68cfb9c9db9248352538c.png)

在网络浏览器中，`http://localhost`返回一个空白页面但没有错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-12-14T08:07:23.843

直到现在我都有同样的问题；正如您所提到的，我尝试了“连接为”，我记下的用户名和密码是我机器的用户（IIS 正在这台机器上运行），我测试了连接，它现在可以工作了。也许如果您没有使用该机器的用户（尝试具有管理员权限的用户），您应该试一试，它对我有用，它也可能适用于您的情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-12T16:38:02.623

我有同样的问题，几乎一天都想不通。我将 IUSR 和 NetworkService 添加到文件夹权限，我确保它作为 NetworkService 运行。我尝试过模拟，甚至以管理员身份运行（不要这样做）。然后有人建议我尝试从 Windows 2008 R2 服务器内部运行该页面，它指向我的处理程序映射，这些都被禁用。

我得到了它的工作：

*   打开您网站的功能视图。
*   转到处理程序映射。
*   查找 .cshtml 的路径
*   右键单击并单击编辑功能权限
*   选择执行
*   点击确定。

现在尝试刷新您的网站。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-12T12:10:43.403

我通过安装IIS的开发相关功能解决了这个问题。

默认情况下，IIS 不会安装所有必需的功能。

您应该安装 IIS 开发相关的功能来解决此问题。

[![在此处输入图像描述](../Images/920ec8ce2d38fee90e5c53e47add62c4.png)](https://i.stack.imgur.com/T0iM3.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-29T21:23:01.503

我有这个错误是因为我没有通过服务器角色和功能安装 ASP.NET。添加了它，一切都按预期工作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-17T02:44:55.857

尝试回到互联网信息服务，在你创建的内网点击右键，选择编辑权限。

当 wwwroot 弹出窗口打开时，选择共享选项卡，然后单击下拉菜单上的“共享”，选择用户及其权限级别，或者只选择每个人并获得权限读取和右

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-06T12:37:26.090

单击“连接为”并选择“特定用户”，然后输入用户的凭据（我使用了服务器的管理员）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-18T23:21:00.233

我有同样的问题，解决方案是取消选中Skype高级配置上的“使用端口80和443”！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-21T12:17:46.377

我认为这个问题的最佳解决方案可以在这里找到： [IIS8 中的 IIS_IUSRS 和 IUSR 权限](https://stackoverflow.com/questions/14934006/iis-iusrs-and-iusr-permissions-in-iis8/36597241#36597241) 这是一个很好的解决方法，但是当您通过 Internet 访问网络服务器时它不起作用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-03-21T05:48:14.830

**在没有物理路径身份验证的情况下使用 IIS 访问本地网站**

1.  确保您已将 URL Rewrite 安装到 IIS 管理器

[![在此处输入图像描述](../Images/1061db05f3596b5ebfe2d7d3f550f771.png)](https://i.stack.imgur.com/UT79l.png)

2.  打开 URL 重写应用程序，然后导航到入站规则>导入规则

[![在此处输入图像描述](../Images/e2ecd7957696671288eb97a6cea7b7a1.png)](https://i.stack.imgur.com/XLsZI.png)

3.  要导入规则，请单击浏览按钮，然后找到您的 .htaccess 文件，然后单击导入按钮

[![在此处输入图像描述](../Images/872323b27cbff57002bc2c54f549a0c1.png)](https://i.stack.imgur.com/tTiw4.png)

4.  标有红色的文本是 IIS 不接受的错误，因此您必须通过单击转换规则中的错误来删除它们，然后从重写规则中删除文本。消除错误后，单击右上角的“应用”按钮。然后尝试在不让用户参与池身份验证的情况下访问您的站点。

[![在此处输入图像描述](../Images/b000454488e62f269fa0bfeb27c3f9af.png)](https://i.stack.imgur.com/LPv5W.png)

我希望它有所帮助。这就是我所做的。

# sql - 选择带有提示的查询以添加性能

> ID：10779493
> 
> 赞同：0
> 
> 时间：2012-05-28T04:50:28.240
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我的选择查询是：

```
Select A.DocumentID,
       A.CodingID,
       A.DebitPrice,
       A.CreditPrice,
       A.DocumentDetailDescriptionID,
       A.HKSID,
       A.OldInc,
       A.EffectiveDate,
       A.DetailedAccount1ID,
       A.DetailedAccount2ID,
       A.DetailedAccount3ID,
       C.FinancialPeriodID,
       C.SalesCompanyID,
       B.[Date]
 From  acc.DocumentDetail A
 INNER JOIN ACC.Document B ON B.DocumentID = A.DocumentID
 INNER JOIN ORG.SalesCompanyFinancialPeriod C ON C.SalesCompanyFinancialPeriodID = B.SalesCompanyFinancialPeriodID 
```

acc.DocumentDetail 有大约 12917388 条记录

acc.documet 有大约 131767 条记录

org.SalesCompanyFinancialPeriod 有大约 93 条记录

我的查询很慢，我想让它更快。我必须使用什么提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:23:19.733

关于这种情况有两个重要的问题：

1.  您是要获得整体最佳性能还是要更快地返回第一行（更适合 UI 应用程序）？
2.  org.SalesCompanyFinancialPeriod 表是否像*过滤器*或*字典*一样起作用？

如果您正在寻找更好的总体时间并且 SalesCompanyFinancialPeriod 就像字典一样，则可以通过在 Document 和 DocumentDetail 之间使用 MERGE 连接，然后使用与 SalesCompanyFinancialPeriod 的 HASH 连接来实现最佳性能。

```
SELECT (...)
FROM acc.Document doc
INNER MERGE JOIN acc.DocumentDetail det ON (...)
INNER HASH JOIN org.SalesCompanyFinancialPeriod fnp ON (...)
OPTION(FORCE ORDER); 
```

如果 SalesCompanyFinancialPeriod 的作用类似于过滤器，或者此查询将用于 UI 应用程序，则可以从该表开始，然后使用 LOOP/HASH 与 Document 连接，然后再次使用另一个 LOOP/HASH 连接，从而更快地返回第一行文档详细信息。选择 LOOP 还是 HASH 连接取决于很多环境变量，所以我宁愿指定 JOIN 的顺序，让引擎选择连接：

```
SELECT (...)
FROM org.SalesCompanyFinancialPeriod fnp
INNER JOIN acc.Document doc ON (...)
INNER JOIN acc.DocumentDetail det ON (...)
OPTION(FORCE ORDER); 
```

然而，比查询性能的提示更重要的是这些表的索引结构。对于这个查询很重要，我建议使用以下索引（对两种用例都有效）：

```
CREATE UNIQUE CLUSTERED INDEX idxc_det
  ON acc.DocumentDetail(DocumentID, CodingID);

CREATE UNIQUE CLUSTERED INDEX idxc_doc
  ON acc.Document(DocumentID);

CREATE INDEX idx_fnper
  ON acc.Document(SalesCompanyFinancialPeriodID);

CREATE UNIQUE CLUSTERED INDEX idxc_doc
  ON org.SalesCompanyFinancialPeriod(SalesCompanyFinancialPeriodID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:40:38.450

谢谢大家。

我调查我的查询并在 SalesCompanyFinancialPeriodID 上的 SalesCompanyFinancialPeriod 中添加索引并包括 SalesCompanyID 和 FinancialID 并将我的查询更改为以下（此查询在 1:10 左右更快）

```
Select  A.DocumentID,
    A.CodingID,
    A.DebitPrice,        
    A.CreditPrice,        
    A.DocumentDetailDescriptionID,        
    A.HKSID,        
    A.OldInc,        
    A.EffectiveDate,        
    A.DetailedAccount1ID,        
    A.DetailedAccount2ID,        
    A.DetailedAccount3ID,        
    C.FinancialPeriodID,        
    C.SalesCompanyID,        
    B.[Date]  
From  acc.DocumentDetail A  
INNER HASH JOIN ACC.Document B ON B.DocumentID = A.DocumentID  
INNER LOOP JOIN ORG.SalesCompanyFinancialPeriod C ON C.SalesCompanyFinancialPeriodID = B.SalesCompanyFinancialPeriodID 
```

# ampl - 如何在 AMPL 中使用误差函数

> ID：10779495
> 
> 赞同：1
> 
> 时间：2012-05-28T04:50:53.083
> 
> 标签：ampl

我必须在 AMPL 中使用一个本身没有的错误函数，所以我按照[一篇博客文章](http://benlockwood.com/2012/01/11/calculating-the-normal-cdf-in-ampl-with-shared-libraries/#comment-105)使用 .dll 来完成它。

但是当我输入“display myerf(1.96)”时，窗口会给出错误“不能调用不可用的函数 myerf”。

我不知道如何处理这个问题，因为我已经将 .dll 文件放在了 AMPL 文件夹中。有谁知道如何获得这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:00:08.943

错误消息`can't invoke unavailable function myerf`意味着加载的函数库都没有提供该`myerf`函数。这很可能是因为您的库名称不同，因此没有自动加载，或者它不在动态库搜索路径上。通常 AMPL 会自动加载 amplfunc.dll，但您可以使用以下命令从任何位置手动加载任何名称的库：

```
load path/to/amplfunc.dll; 
```

where`path/to/amplfunc.dll`是函数库的路径。您可以使用以下命令获取当前加载的库集：

```
display _LIBS; 
```

有关 AMPL 库的更多详细信息，请参阅[http://www.ampl.com/NEW/libload.html](http://www.ampl.com/NEW/libload.html)

**更新：**

请注意，[AMPLGSL](https://github.com/vitaut/ampl/tree/master/solvers/amplgsl)是一个提供对 GNU 科学库 (GSL) 函数的访问的 AMPL 函数库，它已经具有[错误函数](http://ampl.github.io/amplgsl/erf.html)。有关更多详细信息，请参阅[AMPLGSL 文档](http://ampl.github.io/amplgsl/)。

# python - 在 python 中使用 Stomp 在 ActiveMQ 中实现故障转移

> ID：10779496
> 
> 赞同：2
> 
> 时间：2012-05-28T04:50:59.123
> 
> 标签：python, implementation, activemq, failover, stomp

我已经搜索了实现故障转移的 python stomp 库，但找不到任何人。在 1000 台机器（运行消费者程序的客户端）上设置 pyactivemq（文档说它支持故障转移）也太困难了。我想在现有的 python stomp 库之上制作一个包装器，以便客户端可以在任何代理失败的情况下接收消息。

当一个失败时从两个代理中的任何一个获取消息更容易，我们只需要使用一次尝试捕获，然后尝试连接到另一个。但是我不知道主人如何知道在故障转移期间已获取的任何消息，因为当主人出现时，客户端将再次看到这些消息。

可以在代理配置中为此提出任何建议吗？

# php - PHP中的图形图像

> ID：10779500
> 
> 赞同：-1
> 
> 时间：2012-05-28T04:51:23.883
> 
> 标签：php, graph

请看看下面的这个链接..

[http://www.7tech.co.in/php/how-to-generate-a-graph-image-in-php/](http://www.7tech.co.in/php/how-to-generate-a-graph-image-in-php/)

我想知道，下面的这段代码是什么意思？

```
header("Content-type:image/png");
 imagepng($img); 
```

当我尝试实现这 2 行时，我会收到错误消息：“无法修改标头信息 - 标头已由...发送。”当我评论它们时，没有错误，但看不到图表..

嗯，有谁知道是什么意思，可以给我解释一下吗？对不起，我对 PHP 很陌生..提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:54:57.750

您收到的错误通知您不能将响应标头更改为`image/png`，因为它们已经设置并发送。确保该`header()`行是*输出中的第一行*。你不能在它之前输出任何东西。

至于第二行，`imagepng()`用于输出便携式网络图形。该`$img`变量将是之前构建的图像资源。以下是使用这两行的一个非常基本的示例：

```
<?php

  // Gets an image resource
  $im = imagecreatefrompng("test.png");

  // Tells the recipient we're sending image data
  header('Content-Type: image/png');

  // Output the PNG image data
  imagepng($im);

  // Cleanup
  imagedestroy($im);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:56:35.123

当您收到“无法修改标头信息”错误消息时，这可能意味着您在开始 PHP 标记和标头调用之间有不必要的换行符、其他间距或代码......它必须始终是您调用的第一件事并且不应设置超过一次。

# html - 将表格放入可滚动DIV时表格单元格断线？

> ID：10779509
> 
> 赞同：0
> 
> 时间：2012-05-28T04:53:12.167
> 
> 标签：html, css, html-table

我有问题。我创建了一个表并将其放在这样的 DIV 中：

```
<div class="divScroll">
<table class="k-tbTemplate">
    <thead>
        <tr>
            <th>Header </th>
            <th>Header 3</th>
            <th>Header 3</th>
            <th>Header 3</th>
            <th>Header 3</th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td >
                <a href="#null" style="float:left; ">asfasfa</a>
                <a href="#null" onclick="AddSA(this);" style="float:right; ">
                    <img src="add.PNG" alt="Add Shop"/></a>
            </td>

            <td>
                <div style="float:left;">aaa</div>
                <div style="float:right;display:inline;">
                    <a href="#null">
                        <img alt="Add Shop" src="/add.PNG"/></a>
                    <a href="#null">
                        <img alt="Remove Shop" src="/rem.PNG"/></a>
                </div>
            </td>
            <td>Header 3</td>
            <td>Header 3</td>
            <td>Header 3</td>

        </tr>
    </tbody>
</table>
</div> 
```

虽然`<td>`设置`white-space:nowrap`了，但仍然是断线。如果我不将表格放在可滚动的 div 中，它会很好用。

[完整的 html 代码和 css 样式在这里。](http://jsfiddle.net/JHHQW/1/)

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:05:47.130

滚动不是原因。`div`这是包含表格的元素上的固定宽度（300px）的设置。单元格被挤压，浮动的效果会导致您可能认为是断线。如果您想将单元格的内容放在一行中，只需将其放在一行中，不要使用导致换行符的元素，例如`div`.

# iphone - Facebook IOS应用内登录对话框不隐藏密码

> ID：10779510
> 
> 赞同：0
> 
> 时间：2012-05-28T04:53:37.263
> 
> 标签：iphone, ios, facebook

我在我的 iPhone 应用程序中添加了 Facebook Connect 库，除了一个烦人的问题外，一切都运行良好。问题发生在应用内 Facebook 登录对话框中。当我在文本字段中输入密码时，对话框会正确地用••••••• 将其隐藏。但是，如果我碰巧输错了密码，对话框会重新加载，并在第二次尝试时显示没有•••• 的密码。有没有办法解决这个问题？我的项目中有 FBDialog.bundle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:09:37.107

这就是 Facebook 的移动登录在 SDK 和常规移动站点中的工作方式 - 当对话框第二次显示时，会显示一条消息

# regex - 解决数字范围的正则表达式

> ID：10779511
> 
> 赞同：2
> 
> 时间：2012-05-28T04:53:38.187
> 
> 标签：regex

我需要一个接受正则表达式格式进行验证的验证框架的正则表达式。我不能使用算术和比较运算符。我想出了一个解决方案，但它没有按预期工作。我想知道我想出的正则表达式有什么问题以及如何正确解决

任何数字的正`10429`则表达式`40999`

我的解决方案：

```
^1042[9-9]|104[3-9][0-9]|10[5-9][0-9][0-9]|1[1-9][0-9][0-9][0-9][0-9]|[2-3][0-9][0-9][0-9][0-9]|40[0-9][0-9][0-9] 
```

但这一个不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T04:59:50.370

**试试这个**

```
^(10429|104[3-9][0-9]|10[5-9][0-9]{2}|1[1-9][0-9]{3}|[23][0-9]{4}|40[0-9]{3})$ 
```

要生成模式编号范围，请访问[此处](http://utilitymill.com/utility/Regex_For_Range)。

* * *

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T04:59:43.103

1.  `1[1-9][0-9][0-9][0-9][0-9]`- 数字太多。
2.  `^1|2|3`实际上意味着`(?:^1)|2|3`- 你需要`^(?:10429|...|40[0-9][0-9][0-9])$`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T04:59:45.963

`10429|104[3-9][0-9]|10[5-9][0-9]{2}|1[1-9][0-9]{3}|[23][0-9]{4}|40[0-9]{3}`应该做的伎俩。

虽然你为什么需要这个超出了我的范围......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T05:01:43.840

试试这个`^(10429|104[3-9]\d|10[5-9]\d{2}|1[1-9]\d{3}|[2-3]\d{4}|40\d{3})$`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T13:20:00.860

我在这里看到一些很长的正则表达式。这项任务可以在您的模式中没有大量冗余的情况下解决。如果您除了正则表达式之外没有其他任何东西可以使用，那么这就是您想要的模式：

```
^(([123][1-9]|[234]0)[0-9]{3}|10([5-9][0-9]{2}|4([3-9][0-9]|29)))$ 
```

在这里它被扩展以向您展示它的含义：

```
 ^                      #The beginning of the line. This ensures 10429 passes, but 9999910429 doesn't.
 (                      
   ([123][1-9]|[234]0)  #This lets the first two digits be anything from 11-40\. We'll deal with 10xxx later on.
   [0-9]{3}             #If the first two digits are 11-40, then the last three can be anything from 000-999\. 
 |                      
   10                   #Okay, we've covered 11000-40999\. Now for 10429-10999.
   (
     [5-9][0-9]{2}      #Now we've covered 10500-10999; on to the 104xx range.
   |
     4                  
     (
        [3-9][0-9]      #Covers 10430-10499.
     |
        29              #Finally, the special case of 10429.
     )
   )                  
 )
 $                      #The end of the line. This ensures 10429 passes, but 104299999 doesn't. 
```

如果数字不是整个输入，而是嵌入在字符串中（例如，您想从字符串“blah blah 11000 foo 39256 bar 22222”中获取所有数字，请将`^`和`$`替换为`\b`.

看到它在 Regexr 上工作：[http: //regexr.com?312p0](http://regexr.com?312p0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-12T12:56:10.227

试试这个 - \b(10429|104[3-9][0-9]|10[5-9][0-9]{2}|1[1-9][0-9]{3}| [23][0-9]{4}|40[0-9]{3})\b

# android - 如何在 Android 中显示倾斜图？

> ID：10779514
> 
> 赞同：8
> 
> 时间：2012-05-28T04:53:54.813
> 
> 标签：android, google-maps, android-maps

我正在使用谷歌地图开发一个 Android 应用程序。

在 android 中显示地图我遵循了 Android 文档。我成功地在我的应用程序中获得了地图视图。但我需要在**Tilt view**中显示地图。我没有找到任何使用“**倾斜视图**”的地图示例。请建议如何在 Android 中获取倾斜视图。

我添加了倾斜视图地图的图像。左侧地图是正常查看右侧地图是倾斜视图。![在此处输入图像描述](../Images/46eda61c2c6a842f37fb23c3d2fe0910.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-30T21:54:26.217

[https://developers.google.com/maps/documentation/android/views?hl=en](https://developers.google.com/maps/documentation/android/views?hl=en)

```
CameraPosition cameraPosition = new CameraPosition.Builder().
                    target(YourLocationPoint).
                    tilt(60).
                    zoom(15).
                    bearing(0).
                    build();

myMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-28T13:51:12.210

您不需要编写任何代码，只需在您的 xml 部分（activitymap.xml）中写一行

```
map:cameraTilt="60" 
```

根据自己的意愿调整值

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T09:18:29.727

这在 Google Maps API 中尚不可用。

您能做的最好的事情是使用意图来启动 Google 地图应用程序本身，但我不知道您是否可以要求通过它进行倾斜。

# sql - postgres 连接查询

> ID：10779519
> 
> 赞同：1
> 
> 时间：2012-05-28T04:55:00.557
> 
> 标签：sql, postgresql, join

我有3个postgresql表如下

雇员

```
emp_name | emp_id | user_name | psw | etc 
```

工作

```
Work_id |work_type| Project_manger_id(employee) | Architect_id (emp) | tech_lead_id | dept_id 
```

部门

```
dept_id | dept_name 
```

现在我想要的是一张这样的桌子

```
work_type | project_manager (name)  | architect (name) | tech_lead (name ) | dept (name ) 
```

简单地说，我想要的是获取工作表，但用名称替换 id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:06:23.190

试试这个

```
Select WT.Work_Type,PM.emp_name As ProjectManager,AR.emp_name AS Arhitect,TL.emp_name As  TechLead,Dept.Dept_name As Department From
Work 
INNER JOIN employees AS PM ON (Wt.Project_manger_id=PM.emp_id)
INNER JOIN employees AS AR ON (Wt.Architect_id=AR.emp_id)
INNER JOIN employees AS TL ON (Wt.tech_lead_id=TL.emp_id)
INNER JOIN Dept As Dept ON (Wt.dept_id=Dept.dept_id) 
```

# java - 有没有办法使用 HWPFDocument 显示换行符、订单列表

> ID：10779528
> 
> 赞同：6
> 
> 时间：2012-05-28T04:57:19.997
> 
> 标签：java, apache-poi

我正在尝试使用 HWPFDocument 创建 word 文档。我能够创建具有某些功能的文档，但无法获得一些东西。我的问题很简单，但我无法弄清楚几件事。我想将这个简单的 HTML 转换为创建的 worddoc ：

```
<div xmlns="http://www.w3.org/1999/xhtml" class="formatted_content">
        <strong>cloudHQ.tester.4</strong> –
      this is the bold text
      <br/>
      this is italic text
      <br/>
      <ul>
      <li>bullets 1</li>
      <li>bullets 2</li>
      <li>bullets 3</li>
      </ul>
      <br/>
      <ol>
                <li>Number1</li>
                <li>Number2</li>
                <li>Number3</li>
      </ol>
      <br/>
      <pre>this is simple quote</pre>
      <br>
      this is simple quote
</div> 
```

在这里，我可以转换粗体和斜体文本。但无法弄清楚如何创建

```
1) <ul><li>....
2) <ol><li>...
3) break <br>
4) <pre> 
```

标记到 WordDoc 中。

是否有任何示例可以做到这一点，然后请让我知道我非常感谢您的努力，在此先感谢。

**编辑：**

包含库：

```
 include_class "org.apache.poi.poifs.filesystem.POIFSFileSystem"
  include_class "org.apache.poi.hwpf.usermodel.ParagraphProperties"
  include_class "org.apache.poi.hwpf.usermodel.CharacterRun"
  include_class "org.apache.poi.hwpf.usermodel.CharacterProperties" 
```

这是将 html 转换为 doc 的主要代码，例如：

```
 def convert_from_html_to_doc(html_file_name, comment_files)

    puts("Script start.....")
    puts("Parsing document comments start.....NEW")

    default_file = "misc/poi_experiment/empty.doc"
    fs = JavaPoi::POIFSFileSystem.new(JavaPoi::FileInputStream.new(default_file))

    # Horrible word Document Format
    hwpfDocument = JavaPoi::HWPFDocument.new(fs)

    # range is used for getting the range of the document except header and footer
    range = hwpfDocument.getRange()

    par1 = range.insertAfter(JavaPoi::ParagraphProperties.new(), 0)
    par1.setSpacingAfter(200);

    puts("Adding given html content to doc.")
    main_html = Nokogiri::HTML(File.read(html_file_name))
    characterRun = par1.insertAfter(main_html.text)
    # setting the font size
    characterRun.setFontSize(2 * 12)

    puts("Start procees on comment..... total : #{comment_files.size}")
    comment_files.each do |cf|

      file_path = "misc/poi_experiment/#{cf}"
      puts("The comment file path : #{file_path}")

      html = Nokogiri::HTML(File.read(file_path)).css('html')
      puts( html )

      par = characterRun.insertAfter(JavaPoi::ParagraphProperties.new(), 0)
      par.setSpacingAfter(200);

      #text = "<b><u>this is bold and underlined text</u></b>"
      text = html.to_s.scan(/\D\d*/)
      index = 0
      currentCharacterRun , currentCharacterStyleList = [], []
      character_arr = text.to_s.scan(/\D\d*/)

      character_or_tag, index = get_next_character_or_tag(character_arr, index)

      while !character_or_tag.nil?
       if character_or_tag.is_char?
        currentCharacterRun << character_or_tag.get_char
       end
       if character_or_tag.is_start_tag?
        currentCharacterRunText = currentCharacterRun.join
        if currentCharacterRunText != ""
          characterproperties = JavaPoi::CharacterProperties.new
          characterproperties = emit_to_document_and_apply_style(characterproperties, currentCharacterStyleList)
          characterRun = par.insertAfter(currentCharacterRunText,characterproperties)
          currentCharacterRun = []
        end
        currentCharacterStyleList << character_or_tag.get_tag
       end
       if character_or_tag.is_end_tag?
        currentCharacterRunText = currentCharacterRun.join
        if currentCharacterRunText != ""
          characterproperties = JavaPoi::CharacterProperties.new
          characterproperties = emit_to_document_and_apply_style(characterproperties, currentCharacterStyleList)
          characterRun = par.insertAfter(currentCharacterRunText,characterproperties)
          currentCharacterRun = []
        end
        currentCharacterStyleList.reject! { |x| x == character_or_tag.get_tag.gsub("/","") }
       end

       character_or_tag, index = get_next_character_or_tag(character_arr, index)
      end
    end

    hwpfDocument.write(JavaPoi::FileOutputStream.new("#{html_file_name}.doc", true))
  end 
```

希望这将有助于理解你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:35:03.087

经过大量尝试后，我想继续使用**jod 转换器**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:13:53.107

[poi javadocs](http://poi.apache.org/apidocs/org/apache/poi/hwpf/usermodel/package-summary.html)的这一部分可能对您有用。例如，要创建一个列表，我想你想使用

[http://poi.apache.org/apidocs/org/apache/poi/hwpf/usermodel/HWPFList.html](http://poi.apache.org/apidocs/org/apache/poi/hwpf/usermodel/HWPFList.html)

> 此类用于在 Word 文档中创建列表。它与 HWPFDocument 中的 registerList 结合使用。在 Word 中，列表不是范围实体，这意味着您实际上无法在文档中添加一个。列表仅充当列表条目的属性。注册列表后，您可以将列表条目添加到作为列表一部分的文档中。我看到的唯一好处是，您可以在文档的任何位置添加一个列表条目，并从上一个列表继续编号。

所以在java中你会这样做：

```
new HWPFList(boolean numbered, StyleSheet styleSheet) 
```

我不是 ruby​​ 专家，所以我将把 JRuby 的翻译留给你。

这会给你列表中的#1 和#2，而#3 和#4 是我认为的Paragraph 的样式版本。

# ios5 - 以编程方式插入文本后如何停止uitextview跳转到最后一行

> ID：10779529
> 
> 赞同：5
> 
> 时间：2012-05-28T04:57:28.377
> 
> 标签：ios5, scroll, uitextview, line

我真的需要一些建议，在以编程方式插入一些文本后，我需要停止 uitextview 跳转到最后一行，我在[这里](https://stackoverflow.com/questions/1809289/uitextview-autoscroll-to-last-line)、[这里](https://stackoverflow.com/questions/864069/stop-uitextview-from-jumping-when-programatically-setting-text)、[这里](https://discussions.apple.com/thread/1939919?start=0&tstart=0)和[这里](http://www.iphonedevsdk.com/forum/iphone-sdk-development/76921-editing-middle-uitextview.html)阅读了一些相同的问题。我已经尝试了每个问题的所有答案，但是我的uitextview在插入文本后仍然总是跳到最后一行，我可以让光标回到最后一个位置，但我无法阻止它跳转，当我使用时它让我头晕目眩我在模拟器或设备中的应用程序。有人可以给我另一个线索吗？

这是我为这种情况编写的代码，我在`textviewDidChange`委托方法中实现了它：

```
NSString *textAdd = @"adding text";
NSRange *range = self.codeTextView.selectedRange;

[textview setScrollEnabled:NO];
textview.userInteractionEnabled = NO;

textview.text = [textview.text stringByReplacingCharactersInRange:range withString:[NSString stringWithFormat:@"%@", textAdd]];

textView.userInteractionEnabled = YES;
[textView becomeFirstResponder];
textView.selectedRange = NSMakeRange(range+[textadd length], 0); 
```

# iphone - 如何再次要求用户注册 RemoteNotifications？

> ID：10779532
> 
> 赞同：0
> 
> 时间：2012-05-28T04:57:43.333
> 
> 标签：iphone, ios, cocoa-touch, push-notification, apple-push-notifications

我的应用程序使用推送通知，我要求用户在应用程序启动时注册推送通知。如果用户点击“允许”按钮，一切正常。但是如果用户误按了“不允许”怎么办？，我想在设备中再次弹出消息，要求用户注册推送通知。如何再次要求用户注册？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:02:57.700

[推送通知故障排除](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

**在 iOS 上重置推送通知权限警报**

启用推送的应用第一次注册推送通知时，iOS 会询问用户是否希望接收该应用的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。

如果你想模拟你的应用程序的首次运行，你可以让应用程序卸载一天。您可以通过将系统时钟提前一天或更长时间，完全关闭设备，然后重新打开设备来实现后者，而无需实际等待一天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T05:37:20.533

从用户体验的角度来看，最正确的方法是为您的用户提供一个选择——允许或不允许从您的应用程序的设置部分推送通知。你真的不能确定用户的“不，谢谢”是按错的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T06:16:37.113

如果用户取消或错误地按下通知警报的“不允许”，您可以稍后轻松地提醒他们进入 Settings.app 并为它“启用”推送通知，如果那是他们想要做的。

使用存储机制来确定用户是否通过`application:didRegisterForRemoteNotificationsWithDeviceToken:`.. 和`application:didFailToRegisterForRemoteNotificationsWithError`.. 接受了警报，您可以稍后检查它们并将它们路由到 Settings.app 以启用通知。

希望这是有道理的..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T05:17:46.710

只需让用户在设置中打开推送通知您无需在代码中执行任何操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T09:04:41.197

我认为最好的方法是首先要求用户注册推送通知，然后您只需在每次询问用户时弹出一条消息，如果他/她没有注册推送通知选项在 OK 上注册并致电代表。

# java - 如何在Java中存储以前的数字？

> ID：10779536
> 
> 赞同：0
> 
> 时间：2012-05-28T04:58:21.737
> 
> 标签：java

嗨，我是 java 新手，无法解决这个问题。

```
void setNumber(int inputNumber)
{
    int currentNumber = inputNumber;
    int previousNumber = ??????????

} 
```

因此，如果 inputNumber 是“2”，那么 currentNumber 应该是“2”，我想将 inputNumber 更改为其他值，但我希望 previousNumber 为“2”，然后，previousNumber 在 currentNumber 的新值之前有一步。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T05:00:44.230

只需将 currentNumber 存储在 previousNumber 中，然后用新值覆盖它。

```
int previousNumber = currentNumber;
int currentNumber = inputNumber; 
```

首先，previousNumber 被 currentNumber 覆盖

```
input = 3
previous = 2
current = 2 
```

然后当前从输入数字中获取新数字

```
input = 3
previous = 2
current = 3 
```

您现在有一个具有当前值的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:03:00.103

使用 currentNumber 数组， `int[] currentNumber` 因此当前索引将存储当前数字，而之前的索引将指向先前存储的数字

# iphone - FMResultSet 不起作用

> ID：10779537
> 
> 赞同：0
> 
> 时间：2012-05-28T04:58:26.970
> 
> 标签：iphone, database

每个人。我正在尝试使用我的自定义数据库。所以我写了以下。但是如果当我运行它时，我发现它返回 nil。

为什么？

我没有找到这是为什么。

请帮我。

```
NSString *name ;
NSString * content ;
FMResultSet *rs = [db executeQueryWithFormat:@"SELECT name, content FROM projects WHERE id = %d", projectID]; 
```

这里 projectID 是一个给定的参数。我在下一行有一个断点。

```
//if ([rs next]) {
    name = [rs stringForColumnIndex:0];
    content = [rs stringForColumnIndex:1];
    [rs close];
    return [NSDictionary dictionaryWithObjectsAndKeys:name, @"name", content, @"content", nil];
//}
[rs close];
return nil; 
```

结果，名称和内容为零。发生了什么？

在此之前，数据库已正确打开，我对其进行了更新。我在终端上通过 sqlite3 的日志和命令行看到了这一点。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:36:17.417

您应该阅读文档。

将参数传递给查询格式的正确方法是：

FMResultSet *rs = [db executeQueryWithFormat:@"SELECT name, content FROM projects WHERE id = (?)", projectID];

# gcov - 在 Mac 上读取 .gcno 和/或 .gcda 文件

> ID：10779539
> 
> 赞同：2
> 
> 时间：2012-05-28T04:59:06.063
> 
> 标签：gcov

我的构建目录包含 .gcno 和 .gcda 文件。当我用 CoverStory 打开目录时，一切正常。

我的最终目标是读取 gcov 输出（.gcno 和 .gcda 文件），但这两种文件类型是二进制格式。有没有办法通过终端读取它们，以便我可以将文本保存为文本文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T21:19:53.120

没有简单的方法可以将这些文件转换为 ASCII 格式。如果您有兴趣，可以在这里找到文件格式的规范：

[http://src.gnu-darwin.org/src/contrib/gcc/gcov-io.h.html](http://src.gnu-darwin.org/src/contrib/gcc/gcov-io.h.html)

gcov 程序可以向您显示这些文件的处理版本（以源文件的覆盖分析的形式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-19T09:46:03.780

尝试这个：

```
gcov -dump ***.gcno ;  gcov -dump ***.gcda

gcov: LLVM code coverage tool

USAGE: gcov [options] SOURCEFILE

-dump:- Dump the gcov file to stderr 
```

有关更多详细信息，请使用 gcov -help

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T18:19:33.713

我知道这是旧帖子，但如果您正在寻找 html 输出，请查看 zekel 的回复

[XCode - 代码覆盖率？](https://stackoverflow.com/questions/5852002/xcode-code-coverage)

为此，您必须在 Mac 上安装 lcov。这是安装lcov的方法。

1.  [从sourceforge](http://ltp.sourceforge.net/coverage/lcov.php)下载 lcov-1.10.tar.gz
2.  通过双击取消存档。
3.  编辑解压缩文件夹中 bin dir 中的 install.sh，转到第 34 行（安装 -D $SOURCE $TARGET）并删除 -D 开关
4.  须藤使安装

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-09T21:20:07.393

使用 GCC 编译器时，使用 -fdump-rtl-all -fdump-tree-all -fdump-ipa-all 以文本格式查看一些信息。您将看到一些名称以 .profile_estimate 结尾的文件

此外，您应该能够看到编译器如何使用配置文件。这里的问题是转储文件很多。

# c# - 如何将行保存在变量中并保存excel文档？

> ID：10779540
> 
> 赞同：0
> 
> 时间：2012-05-28T04:59:27.720
> 
> 标签：c#, visual-studio-2010

我用来读取excel文件第一行的代码是这样的。如何在保存之前将该行保存在字符串变量中？以及如何保存excel文档？

```
string ExcelFile = Application.StartupPath + @"\SurveyLinks.xlsx";
Excel.Application ExcelApp = new Excel.Application();
Excel.Workbook ExcelWorkBook = ExcelApp.Workbooks.Open(ExcelFile);
Excel._Worksheet ExcelWorkSheet = ExcelWorkBook.Sheets[1];
Excel.Range ExcelRange = (Excel.Range)ExcelWorkSheet.Application.Rows[1, Type.Missing];
ExcelRange.Select();
//string SurveyLink = ExcelRange.Cells[1,1].Value2.ToString();
ExcelRange.Delete(Excel.XlDirection.xlUp);
ExcelWorkBook.Close(true);

ExcelApp.Quit();
MessageBox.Show(SurveyLink);
MessageBox.Show("Done!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:46:46.537

`WorkBook.Save()`那里也可以保存 excel 文档“SaveAs()”。

# php - PHP：回显变量错误

> ID：10779545
> 
> 赞同：-1
> 
> 时间：2012-05-28T05:00:18.770
> 
> 标签：php

目标：显示一个类别选择框及其对应的子类别选择框。MySQL 表设置为具有 id（主键）、master_id（引用主键）和名称。我设置了 4 个错误代码块，调试后我不断收到“错误 2：真”。因此，显示一个类别但没有子类别。我怎么一直收到这个错误？有什么遗漏吗？

**PHP比较类别和值以显示在子类别选择框上**

```
if (!empty($_GET['id']) && !empty($_GET['value'])) {

    $id = $_GET['id'];
    $value = $_GET['value'];

    try {
        $objDb = new PDO("mysql:host=" . $host . ";dbname=" . $db, $user, $pass);

        $sql = "SELECT * FROM `categories` WHERE `master_id`=?";
        $statement = $objDb->prepare($sql);
        $statement->execute(array($value));
        $list = $statement->fetchAll(PDO::FETCH_ASSOC);

   }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:06:51.467

你在你的问题中说`master_id`，但你`master`在你的查询中。

# php - RecursiveIteratorIterator 和 RecursiveDirectoryIterator 到嵌套的 html 列表

> ID：10779546
> 
> 赞同：7
> 
> 时间：2012-05-28T05:00:23.083
> 
> 标签：php, recursion, iterator, html-lists

这是我的 php 脚本：

```
<?php

$path = $_SERVER['DOCUMENT_ROOT'].'/test';

$objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path), RecursiveIteratorIterator::SELF_FIRST);

foreach($objects as $name => $object){  
    echo  $objects->getDepth() . " " . $object->getFilename() . "<br/>";
    }

?> 
```

这是脚本正在迭代的目录/文件树。（它位于一个名为 $_SERVER['DOCUMENT_ROOT'].'/test' 的普通根目录中）：

```
/food
/food/drinks
/food/drinks/water.html
/food/drinks/milk.html
/food/drinks/soda.html
/food/entrees
/food/entrees/hot
/food/entrees/hot/hamburger.html
/food/entrees/hot/pizza.html
/food/entrees/cold
/food/entrees/cold/icecream.html
/food/entrees/cold/salad.html
/cosmetics
/cosmetics/perfume
/cosmetics/perfume/chic.html
/cosmetics/perfume/polo.html
/cosmetics/perfume/lust.html
/cosmetics/lipstick
/cosmetics/lipstick/colors
/cosmetics/lipstick/colors/red.html
/cosmetics/lipstick/colors/pink.html
/cosmetics/lipstick/colors/purple.html 
```

这是脚本输出的内容：

```
0 food
1 drinks
2 milk.html
2 water.html
2 soda.html
1 info.php
1 entrees
2 hot
3 pizza.html
3 hamburger.html
2 cold
3 ice_cream.html
3 salad.html
0 cosmetics
1 lipstick
2 colors
3 pink.html
3 red.html
3 purple.html
1 perfume
2 polo.html
2 lust.html
2 chic.html
0 error_log
0 test.php 
```

忽略 $objects->getDepth() 整数；仅供参考

**问题：如何修改我的脚本以输出嵌套的无序列表，如下所示：**

```
<ul>
  <li>food</li>
    <ul>
      <li>drinks</li>
        <ul>
          <li>water.html</li>
          <li>milk.html</li>
          <li>soda.html</li>
        </ul>
      <li>entrees</li>
        <ul>
          <li>hot</li>
            <ul>
              <li>hamburger.html</li>
              <li>pizza.html</li>
            </ul>
          <li>cold</li>
            <ul>
              <li>icecream.html</li>
              <li>salad.html</li>
            </ul>      
        </ul>
    </ul>
  <li>cosmetics</li>
    <ul>
      <li>perfume</li>
        <ul>
          <li>chic.html</li>
          <li>polo.html</li>
          <li>lust.html</li>
        </ul>
      <li>lipstick</li>
        <ul>
          <li>colors</li>
            <ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T06:07:21.900

这是一个使用 DomDocument

基本思想是每个目录的内容由a表示，目录中的`<ul>`每个元素由a表示`<li>`
如果元素是一个非空目录，它将包含a`<ul>`来表示其内容等等。

```
$path = $_SERVER['DOCUMENT_ROOT'].'/test';
$objects = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path), RecursiveIteratorIterator::SELF_FIRST);
$dom = new DomDocument("1.0");
$list = $dom->createElement("ul");
$dom->appendChild($list);
$node = $list;
$depth = 0;
foreach($objects as $name => $object){  
    if ($objects->getDepth() == $depth){
//the depth hasnt changed so just add another li
        $li = $dom->createElement('li', $object->getFilename());
        $node->appendChild($li);
    }
    elseif ($objects->getDepth() > $depth){
//the depth increased, the last li is a non-empty folder 
        $li = $node->lastChild;
        $ul = $dom->createElement('ul');
        $li->appendChild($ul);
        $ul->appendChild($dom->createElement('li', $object->getFilename()));
        $node = $ul;
    }
    else{
//the depth decreased, going up $difference directories
        $difference = $depth - $objects->getDepth();
        for ($i = 0; $i < $difference; $difference--){
            $node = $node->parentNode->parentNode;
        }
        $li = $dom->createElement('li', $object->getFilename());
        $node->appendChild($li);
    }
    $depth = $objects->getDepth();
}
echo $dom->saveHtml(); 
```

输出将沿着

```
<ul>
    <li>dir1</li>
    <li>dir2
        <ul>
            <li>in dir2</li>
        <ul>
    <li>file in root</li>
<ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:14:18.157

将深度存储在变量中并检查变量是否在每个循环中增加或减少？

如果深度增加，则添加另一个`<ul>`标签，如果深度减少，则添加结束`</ul>`标签。

每个循环总是会输出`<li>`标签来包装文件名。

例如

```
$depth = 0;
foreach ($objects as $name => $object) {
    $depth2 = $objects->getDepth();
    if($depth2 > $depth) { echo '<ul>'; }
    echo "<li>" . $object->getFilename() . "</li>";
    if($depth2 < $depth) { echo '</ul>'; }
    $depth = $depth2;
} 
```

这将需要一些额外的测试和修改以适合您现有的代码，但希望它能给您一些想法。

# javascript - 使用 jQuery 进行 DOM 操作

> ID：10779547
> 
> 赞同：1
> 
> 时间：2012-05-28T05:00:30.330
> 
> 标签：javascript, jquery, dom

这应该相当简单，但我似乎遗漏了一些东西。我正在做一个小项目，我正在编写的代码旨在在整个文档中做一些事情。这是我想将脚本的操作应用到的 HTML 代码：

```
<div class="entry">
    <p>First paragraph</p>
    <p>Second paragraph</p>
    <p>Third paragraph</p>
    <p>One more...</p>

    <div class="bttn"><a href="#">Click for More</a></div>
</div> 
```

此模板（即，在具有类“entry”的包装**div中包含几个****p**元素和一个具有类“bttn”的**div**）在整个文档中重复多次。用户将内容添加到段落中并最终将其发布到站点。这是我希望在我的 .js 文件中执行的操作：

 **1.  使用类“entry”计算**div**元素内的所有**p元素。**
***   在整个文档中，如果每个**div中有两个以上的****p**元素被归类为“entry”，我希望*前两个*保持不变，并将其余的移动到一个新的**div**元素，类为“slider”。这个新元素将被放置在“点击更多”按钮之后。******   将类“show”添加到已存在的类“bttn”的**div元素中，但***仅限*于属于包含两个以上段落的类“entry”并使用类“slider”移动到新**div的那些元素。**新按钮看起来像这样：div class="bttn slider"（加上锚标记和模板中显示的所有其他内容）。*******

 *****所以基本上，如果发布内容的用户在 HTML 模板中添加了两个以上的段落，当文档准备好时，我希望脚本获取其他段落，将它们移动到新的**div**元素，并将新类添加到按钮。最后，当单击“单击更多”按钮时，随后删除和插入的额外段落将很好地淡入（因为一旦我重新插入它们，我会将它们隐藏在按钮下）。这是我到目前为止所做的：

```
$('.entry').each(function () {
    $counter = $('.entry p').length;

    if ($counter > 2) {
        $removeExtra = $(this).find('p').not(':eq(1)').not(':eq(0)').detach();

        $(this).find('.bttn').after(function () {
            return '<div class="slider">' + $removeExtra.html() + '</div>';
        }).addClass('show');
    }
}); 
```

**问题：**

*   我们都知道**html()**方法只会返回第一组匹配的元素，所以在单击按钮时，我只会得到从每个类“条目”中删除的第一段，并且我需要取回*所有*分离的段落，我存储在变量 $removeExtra 中。
*   每个具有“bttn”类的**div**元素都获得了新的“show”类，我*只*希望这发生在那些属于“条目”类的那些看到一些额外段落被删除的人身上。从开头有两个段落的 div class="entry" 元素在按钮的类中应该没有修改。

非常感谢您对此的任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:07:22.940

我最初的建议是使用`:gt`：

```
$(".entry").each(function(){
    var ps = $("p:gt(1)", this);
    if ( ps.length ) {
        $(".bttn", this).addClass("show").after(function(){
            return $("<div>").addClass("slider").append(ps);    
        });
    }        
});​​​​​​​​​​​​​​​​​​​​​​​ 
```

如果我在任何程度上混淆了细节，我深表歉意 - 这个问题有点冗长。

小提琴：http: [//jsfiddle.net/FfmaB/1/](http://jsfiddle.net/FfmaB/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T05:08:13.150

这一行：

```
$counter = $('.entry p').length; 
```

当您想要仅在*当前*“.entry” div 中的段落时，正在查找*任何*“.entry” div 中的所有段落。此外，您不需要使用回调函数语法，因为您使用它一次只在一个元素之后添加。*[`.after()`](http://api.jquery.com/after/)*

 *试试这个：

```
$('.entry').each(function () {
    var $this = $(this),
        $p = $this.find('p');

    if ($p.length > 2) {
        $('<div class="slider"/>').appendTo(this).append($p.slice(2));
        $this.find('.bttn').addClass('show');
    }
}); 
```

我已经使用[了该`.append()`方法](http://api.jquery.com/append/)，而不是`.after()`因为`.append()`会在您要附加到的元素的最后一个子元素之后自动添加它们。在将它们附加到新 div 之前，您不需要分离段落，因为它们`.append()`会*移动*它们（至少，当只有一个目标元素时它会移动它们 - 就像这里的情况一样）。

我用过[`.slice()`](http://api.jquery.com/slice/)而不是你的`.not(':eq(1)').not(':eq(0)')`.

请注意，您应该声明变量，`var`否则它们将成为全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T05:34:40.080

查看`$.html()`函数文档： http:
[//api.jquery.com/html/](http://api.jquery.com/html/)

> 如果选择器表达式匹配多个元素，则只有第一个匹配项才会返回其 HTML 内容。

我相信这就是你想要的：

```
$(document).ready(Process);

function Process() {
    $('.entry').each(function() {
        var $this = $(this);
        $counter = $this.find('p').length;

        if ($counter > 2) {
            var $Extras = $this.find('p').not(':eq(1)').not(':eq(0)');

            $($Extras.get().reverse()).each(function() {
                var extra = $(this).html();
                $this.find('.bttn').after('<div class="slider">' + extra + '</div>');
                $this.find('p').not(':eq(1)').not(':eq(0)').detach();
            })
            $this.find(".bttn").addClass('show');
        }
    });
}​ 
```

演示：http: [//jsfiddle.net/xcuh9/2/](http://jsfiddle.net/xcuh9/2/)

问候，
尼廷 J。********

# joomla - Virtuemart：产品未添加到购物车

> ID：10779554
> 
> 赞同：1
> 
> 时间：2012-05-28T05:01:53.413
> 
> 标签：joomla, virtuemart, cart

我有一个正在运行的 joomla 站点 (J2.5)，并且我正在使用 mercurial v2.0.6

我编辑了产品详细信息的css并删除了一些代码（数量框）。但是，当我单击添加到购物车按钮时，产品没有添加到购物车中。

从过去的几天开始，我被困住了。

这是链接：[http ://www.kidsrule.com.au/index.php/shopping-deals/view/productdetails/virtuemart_product_id/2/virtuemart_category_id/1.html](http://www.kidsrule.com.au/index.php/shopping-deals/view/productdetails/virtuemart_product_id/2/virtuemart_category_id/1.html)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:20:12.653

我浏览了您的网站，发现了一些 js 错误。您的删除 js 错误或更改 virturemart 配置中的添加到购物车设置。目前您已选择使用 Ajax 从购物车中添加、更新或删除产品？并且由于js错误导致Ajax无法正常工作，因此您可以将此选项更改为No。然后添加到购物车将不会使用Ajax方法将产品添加到购物车中。Co可以在Configuration>>site>>Layoyt中更改选项>>配置....

我正在使用一些旧版本的 joomla 和美德玛特，所以选项可能在不同的地方。要删除 js 错误，您可以使用 jQuery.noConflict 并将符号 $ 替换为 jQuery。希望这会帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:04:05.097

您甚至可以在任何文章中使用链接添加您的产品，或者在任何地方使用 html，如下所示：

```
index.php?option=com_virtuemart&page=shop.cart&func=cartAdd&product_id=56&quantity=3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:44:43.103

对于那些在 2.0.6 版本中遇到 mercurtmart 错误的用户，请切换到 Virtuemart 2.0.2。它更可靠。

# java - 将数据从 servlet 发送到客户端的最佳方式？

> ID：10779555
> 
> 赞同：0
> 
> 时间：2012-05-28T05:02:08.777
> 
> 标签：java, servlets

盖兹，

我有一个 servlet，我使用 jdbc 从 mysql 查询数据。

我有一个巨大的结果集要发送给客户端（至少 3 列和 10 行）

什么是最好的发送方式，而不是像下面这样简单地写入响应流？

```
ResultSet toResults = toStatement.getResultSet();

        if (toResults.next()) {
            out.println(toResults.getString(1));
                    out.println(toResults.getString(2));
                    ....
                    ....

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:05:29.873

首先，这听起来并不庞大。其次，您所说的客户是什么意思？如果您必须在浏览器中显示数据，则可以创建 VO 列表或字符串数​​组列表。

如果您正在使用 Ajax 或者您的客户端是应用程序，则可以使用 XML 或 JSON 发送数据。

# ios - 自定义 Segue 动画

> ID：10779563
> 
> 赞同：10
> 
> 时间：2012-05-28T05:03:17.007
> 
> 标签：ios, uiview, uiviewanimation, uistoryboardsegue

我正在尝试使用自定义 segue 来执行一种缩放动画。执行转换时，sourceViewController 变黑，然后发生缩放。

还尝试将 pushViewController: 设置为完成块，但根本不执行转换。

```
- (void)perform {

    UIViewController *sourceViewController = (UIViewController *) self.sourceViewController;
    UIViewController *destinationViewController = (UIViewController *) self.destinationViewController;

    [destinationViewController.view setTransform:CGAffineTransformMakeScale(0.5,0.5)];
    [destinationViewController.view setAlpha:0.0];

    [UIView animateWithDuration:0.5
                          delay:0.0
                        options:UIViewAnimationCurveEaseOut 
                     animations:^{
                         [destinationViewController.view setTransform:CGAffineTransformMakeScale(1.0,1.0)];
                         [destinationViewController.view setAlpha:1.0];
                         [sourceViewController.navigationController pushViewController:destinationViewController animated:NO];
                     } 
                     completion:^(BOOL finished){
                     }];

} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T04:30:23.700

感觉很笨拙，但是您可以尝试在动画之前添加destinationViewController.view 作为子视图，然后在动画完成后将其删除并在没有动画的情况下将其推回。解决过渡前的黑屏，但可能并不完美，具体取决于您想对导航栏做什么，但可能更接近：

```
[sourceViewController.view addSubview:destinationViewController.view];
[destinationViewController.view setFrame:sourceViewController.view.window.frame];
[destinationViewController.view setTransform:CGAffineTransformMakeScale(0.5,0.5)];
[destinationViewController.view setAlpha:1.0];

[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationCurveEaseOut 
                 animations:^{
                     [destinationViewController.view setTransform:CGAffineTransformMakeScale(1.0,1.0)];
                     [destinationViewController.view setAlpha:1.0];
                 } 
                 completion:^(BOOL finished){
                     [destinationViewController.view removeFromSuperview];
                     [sourceViewController.navigationController pushViewController:destinationViewController animated:NO];
                 }]; 
```

* * *

请注意，从 iOS 7 开始，您将使用自定义过渡。有关更多信息，请参阅 WWDC 2013[使用视图控制器的自定义转换](https://developer.apple.com/videos/wwdc/2013/?id=218)。

例如，如果尝试使用导航控制器进行自定义转换，第一个视图控制器会将自己指定为导航控制器的委托：

```
self.navigationController.delegate = self; 
```

然后，它将分别为 push 和 pop 指定自定义动画师：

```
- (id<UIViewControllerAnimatedTransitioning>)navigationController:(UINavigationController *)navigationController
                                  animationControllerForOperation:(UINavigationControllerOperation)operation
                                               fromViewController:(UIViewController *)fromVC
                                                 toViewController:(UIViewController *)toVC
{
    if (operation == UINavigationControllerOperationPush) {
        return [[PushAnimator alloc] init];
    } else {
        return [[PopAnimator alloc] init];
    }
} 
```

然后你显然会实现这些动画师：

```
@interface PushAnimator : NSObject <UIViewControllerAnimatedTransitioning>

@end

@implementation PushAnimator

- (NSTimeInterval)transitionDuration:(id <UIViewControllerContextTransitioning>)transitionContext
{
    return 0.5;
}

- (void)animateTransition:(id<UIViewControllerContextTransitioning>)transitionContext
{
    UIViewController* toViewController   = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];
    UIViewController* fromViewController = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];

    [[transitionContext containerView] addSubview:toViewController.view];
    toViewController.view.frame = fromViewController.view.frame;
    toViewController.view.transform = CGAffineTransformMakeScale(0.5,0.5);
    toViewController.view.alpha = 0.0;

    [UIView animateWithDuration:[self transitionDuration:transitionContext] delay:0.0 options:0 animations:^{
        toViewController.view.transform = CGAffineTransformIdentity;
        toViewController.view.alpha = 1.0;
    } completion:^(BOOL finished) {
        [fromViewController.view removeFromSuperview];
        [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
    }];
}

@end 
```

和

```
@interface PopAnimator : NSObject <UIViewControllerAnimatedTransitioning>

@end

@implementation PopAnimator

- (NSTimeInterval)transitionDuration:(id <UIViewControllerContextTransitioning>)transitionContext
{
    return 0.5;
}

- (void)animateTransition:(id<UIViewControllerContextTransitioning>)transitionContext
{
    UIViewController* toViewController   = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];
    UIViewController* fromViewController = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];

    [[transitionContext containerView] insertSubview:toViewController.view belowSubview:fromViewController.view];
    toViewController.view.frame = fromViewController.view.frame;

    [UIView animateWithDuration:[self transitionDuration:transitionContext] delay:0.0 options:0 animations:^{
        fromViewController.view.transform = CGAffineTransformMakeScale(0.5,0.5);
        fromViewController.view.alpha = 0.0;
    } completion:^(BOOL finished) {
        [fromViewController.view removeFromSuperview];
        [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
    }];
}

@end 
```

# google-app-engine - 在 Google App Engine (Java) 中限制 Blobstore 上传的文件类型

> ID：10779564
> 
> 赞同：4
> 
> 时间：2012-05-28T05:03:19.090
> 
> 标签：google-app-engine

我正在使用 BlobstoreService 将文件上传到 AppEngine 中的 blobstore。如何限制文件的内容类型或文件类型？例如，我只想允许上传图像/jpeg 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:54:39.130

没有办法禁止用户先验地上传被禁止的文件类型，因为在他们进行 POST 之前，您无法知道他们将要上传什么，并且没有干净的方法可以中途终止 POST 请求。您可以在他们上传文件后检测文件类型，如果禁止，则从 blobstore 中删除文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T03:34:46.607

尼克的答案当然是正确的，而且您需要在服务器端进行一整套检查（类型、大小等）。但是，如果您真的很担心，您可能会考虑在客户端进行一些基本的错误检查。JavaScript 在提交表单之前检查文件名是否以 jpg 结尾（加上变体）很容易实现。请记住也要检查服务器。

# asp.net - 使用存储过程更新记录 .. 在 ASP.NET 中无法访问 RowUpdating 事件

> ID：10779565
> 
> 赞同：0
> 
> 时间：2012-05-28T05:03:24.557
> 
> 标签：asp.net, sql-server, gridview, sqldatasource

我在更新 SQL Server 中的行时遇到问题

当我想使用存储过程将网格中的列更新到 SQL Server 数据库中的表时，`onclick`按钮（用于更新）出现问题。它将调用一个`RowUpdating`事件...问题是无法访问该事件...因为我在第一行放了一个 MsgBox ..什么也没发生

这是代码：

asp.net 代码：

```
<asp:GridView ID="DossierGV" runat="server" AllowPaging="True" 
              AllowSorting="True"  AutoGenerateColumns="False" 
              DataKeyNames="ID_Dossier" onrowupdating="DossierGV_RowUpdating" >
   <Columns>
      <%--       <asp:BoundField DataField="Nom_Giac" HeaderText="Nom_Giac" 
                          SortExpression="Nom_Giac" />--%>
      <asp:CommandField ShowEditButton="True" UpdateText="Modifier "></asp:CommandField>
      <asp:CommandField ShowSelectButton="True" />
      <asp:TemplateField HeaderText="ID_Dossier" SortExpression="ID_Dossier">
         <EditItemTemplate>
            <asp:Label ID="Label1" runat="server" Text='<%# Eval("ID_Dossier") %>'></asp:Label>
         </EditItemTemplate>
         <ItemTemplate>
            <asp:Label ID="Label1" runat="server" Text='<%# Bind("ID_Dossier") %>'></asp:Label>
         </ItemTemplate>
      </asp:TemplateField>
      <asp:TemplateField HeaderText="ID_Entreprise" SortExpression="ID_Entreprise">
         <EditItemTemplate>
            <asp:Label ID="ID_Entrepriselbl_Edit" runat="server" Text='<%# Bind("ID_Entreprise") %>'></asp:Label>
         </EditItemTemplate>
         <ItemTemplate>
            <asp:Label ID="ID_Entrepriselbl_Item" runat="server" Text='<%# Bind("ID_Entreprise") %>'></asp:Label>
         </ItemTemplate>
      </asp:TemplateField>
    ..... (lots more <asp:TemplateField) ..........
   </Columns>
   <SelectedRowStyle BackColor="#F2E488" Font-Bold="True" /> 
```

这是服务器代码：

```
Imports System.Data.SqlClient
Imports System.Data
Imports System.Configuration

Partial Class GIAC_Gestion_des_dossiers_Les_Dossiers_Finance
    Inherits System.Web.UI.Page
    Dim sqlcon As SqlConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("OfficeConnectionString").ConnectionString)
    Dim sqlcmd As SqlCommand
    Dim da As SqlDataAdapter
    Dim dt As DataTable = New DataTable
    Dim dt1 As DataTable = New DataTable

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        RecherhcerComboBox.SelectedValue = RecherhcerComboBox.Items(0).Value
        If Not Page.IsPostBack Then
            GridData()
        End If
    End Sub

    Private Sub GridData()
        sqlcmd = New SqlCommand("DossierPF", sqlcon)
        sqlcon.Open()
        sqlcmd.CommandType = CommandType.StoredProcedure
        sqlcmd.Parameters.Add("@nom", SqlDbType.VarChar).Value = Session("Nom_GIAC")
        da = New SqlDataAdapter(sqlcmd)
        dt.Clear()
        da.Fill(dt)
        If (dt.Rows.Count > 0) Then
            DossierGV.DataSource = dt
            DossierGV.DataBind()
        End If
    End Sub

    Protected Sub DossierGV_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles DossierGV.SelectedIndexChanged
        GridData()
    End Sub

    Protected Sub DossierGV_PageIndexChanging(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewPageEventArgs) Handles DossierGV.PageIndexChanging
        DossierGV.EditIndex = -1
        DossierGV.SelectedIndex = -1
        DossierGV.PageIndex = e.NewPageIndex
        GridData()
    End Sub

    Protected Sub DossierGV_RowCancelingEdit(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCancelEditEventArgs) Handles DossierGV.RowCancelingEdit
        DossierGV.EditIndex = -1
        GridData()
    End Sub

    Protected Sub DossierGV_RowEditing(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewEditEventArgs) Handles DossierGV.RowEditing
        DossierGV.EditIndex = e.NewEditIndex
        GridData()
    End Sub

    Protected Sub DossierGV_RowUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewUpdateEventArgs) Handles DossierGV.RowUpdating
        MsgBox("walo")
        Dim row As GridViewRow = DossierGV.Rows(e.RowIndex)
        Dim ID_Dossier As Integer = DossierGV.DataKeys(e.RowIndex).Value
        Dim Montant_Demander As TextBox = CType(row.FindControl("Montant_DemanderTXT"), TextBox)
        Dim Duree As TextBox = CType(row.FindControl("DureeTXT"), TextBox)
        Dim Date_Debut As TextBox = CType(row.FindControl("Date_DebutTXT"), TextBox)
        Dim Date_Fin As TextBox = CType(row.FindControl("Date_FinTXT"), TextBox)

        sqlcmd = New SqlCommand("UPDATE_DOSSIER", sqlcon)
        DossierGV.EditIndex = -1
        sqlcon.Open()
        sqlcmd.CommandType = CommandType.StoredProcedure
        sqlcmd.Parameters.Add("@ID_DOSSIER", SqlDbType.Int).Value = ID_Dossier
        sqlcmd.Parameters.Add("@Montant_Demander", SqlDbType.Int).Value = Convert.ToInt64(Montant_Demander.Text)
        sqlcmd.Parameters.Add("@@Duree", SqlDbType.Int).Value = Convert.ToInt64(Duree.Text)
        sqlcmd.Parameters.Add("@Date_Debut", SqlDbType.Int).Value = Convert.ToDateTime(Date_Debut.Text)
        sqlcmd.Parameters.Add("@Date_Fin", SqlDbType.Int).Value = Convert.ToDateTime(Date_Fin.Text)
        MsgBox(ID_Dossier & " , " & Montant_Demander.Text & " , " & Duree.Text & " , " & Date_Debut.Text & " , " & Date_Fin.Text)
        sqlcmd.ExecuteNonQuery()
        sqlcon.Close()

        GridData()
    End Sub
End Class 
```

存储过程：

```
CREATE PROCEDURE UPDATE_DOSSIER 
 @ID_DOSSIER integer,
 @Montant_Demander integer,
 @Duree integer,
 @Date_Debut datetime,
 @Date_Fin datetime
AS 
BEGIN
   update dbo.Dossier
   set Montant_Demander = @Montant_Demander,
       Duree = @Duree,
       Date_Debut = @Date_Debut,
       Date_Fin = @Date_Fin
   where 
       ID_Dossier = @ID_DOSSIER
END

exec UPDATE_DOSSIER 1,400,5,'2007-01-11 00:00:00.000','2012-01-11 00:00:00.000' 
```

# javascript - 选择性激活按钮

> ID：10779568
> 
> 赞同：0
> 
> 时间：2012-05-28T05:03:52.647
> 
> 标签：javascript, button

我想制作按钮，如果单击按钮 A，A 将禁用。当 B 被单击时，B 将被禁用并会响应按钮 A。

如何更改我的代码？为达到这个？我想让这个功能以后可以与更多按钮一起使用。如果 A 被点击，则 A 被禁用，B、C、D 将被激活。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Animation Test</title>

</head>

<body>
<div>
<canvas id="myCanvas" width="250" height="250" style="border:solid 1px #000000;">
            <p>Your browser doesn't support canvas.</p>
        </canvas>
    <button id="start" type="button" start.disable = "true" onClick="loadingComplete(); SetButtonStatus()" />Start</button>
    <button id="pause" type="button" pause.disable="false" onClick=";SetButtonStatus();" />Pause</button>    
    <button id="reset" type="button" pause.disable="false" onClick=";SetButtonStatus();" />Reset</button>

    </div>
<script>
var surface = document.getElementById("myCanvas");
var surfaceContext = surface.getContext('2d');
var happy;
var x = 50;
var y = 0;
var x1 = 150;
var y1 = 120;
var dirX = 3;
var dirY = 1;
var dirX1 = 2;
var dirY1 = 2;

var bgImage = new Image();
bgImage.src = "Pictures/PondEnvironment/pond.png";

bgImage.onload = function () {
    surfaceContext.drawImage(bgImage, 0, 0, 250, 250);
};

        function SetButtonStatus()
        {

            if (document.getElementById('start').disabled == false)
            {
                document.getElementById('start').disabled=true;
                document.getElementById('pause').disabled=false;
                document.getElementById('reset').disabled=false;    
                return 0;}

            if (document.getElementById('pause').disabled == false )
            {
                document.getElementById('pause').disabled =true;
                document.getElementById('start').disabled =false;
                return 0;
            }

            if (document.getElementById('reset').disabled == false )
            {
                document.getElementById('pause').disabled =false;
                document.getElementById('reset').disabled =false;
                document.getElementById('start').disabled =true;
                return 0;
            }

        } 

    /*function disable(buttonid){
        var button1_name;
        var button2_name;

        if(button1_name==1){
            document.getElementById('button1').disabled = true;
            document.getElementById('button2').disabled = false;
            document.getElementById('button1').name=0;
        }
        if(button2_name==3){
            document.getElementById('button2').disabled = true;
            document.getElementById('button1').disabled = false;
            document.getElementById('button2').name=0;
        }
    }
*/

function drawCanvas() {
    // Get our Canvas element
    //surface = document.getElementById("myCanvas");

    if (surface.getContext) {
        // If Canvas is supported, load the image
        happy = new Image();
        //happy.onload = loadingComplete;
        happy.src ="image/pic1.jpg";
        happy2 = new Image();
        happy2.src ="image/anchovies.png";
        var bgImage = new Image();
        bgImage.src = "Pictures/PondEnvironment/pond.png";
    }
}

function loadingComplete(e) {
    // When the image has loaded begin the loop
    setInterval(loop, 25);
    start.disable=true;
}

function loop() {
    // Each loop we move the image by altering its x/y position

    // Grab the context
    //var surfaceContext = surface.getContext('2d');

    // Clear the canvas to White
    //surfaceContext.fillStyle = "rgb(255,255,255)";
    surfaceContext.drawImage(bgImage,0,0,250,250);
    //surfaceContext.fillRect(0, 0, surface.width, surface.height);

    // Draw the image
    surfaceContext.drawImage(happy, x, y, 50, 30);
    surfaceContext.drawImage(happy2, x1, y1, 50, 30);

    x += dirX;
    y += dirY;
    x1 += dirX1;
    y1 += dirY1;

    if (x <= 0 || x > 220 - 23) {
        dirX = -dirX;
    }
    if (y <= 0 || y > 250 - 30) {
        dirY = -dirY;
    }
    if (x1 <= 0 || x1 > 220 - 23) {
        dirX1 = -dirX1;
    }
    if (y1 <= 55 || y1 > 250 - 30) {
        dirY1 = -dirY1;
    }
}
</script>  
<script>drawCanvas(); </script> 
</body>
</html> 
```

**已编辑** 我已将“禁用”更改为“禁用”，并且我正在尝试使暂停按钮禁用并重新启用？

```
 function startStatus()
    {

        if (start.disabled)
            start.disabled = "enabled";

       /* else if (pause.disabled = "true")
        {
            start.disabled ="disabled";
        }*/

        else if (start.disabled ="true")
        {
        //pause.disabled = "enabled"
        }

        if (pause.disabled)
        pause.disabled = "false";

        /* else if (pause.disabled = "true")
         {
         start.disabled ="disabled";
         }*/

        else if (start.disabled ="false")
        {
            //pause.disabled = "enabled"
        }

    } 
```

代码更新::

我想做以下，但我的代码没有执行。

1.  点击“Start_btn”

    *   启动 btn -- 禁用
    *   暂停 btn -- 启用
    *   重置 btn -- 启用
2.  点击“pause_btn”

    *   启动 btn -- 启用
    *   暂停 btn - 禁用
    *   重置 btn -- 启用
3.  点击“reset_btn”

    *   启动 btn -- 启用
    *   暂停 btn - 禁用
    *   重置 btn -- 禁用

我的代码可以在这里找到 >>>> >http://jsfiddle.net/fN8XD/5/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:14:44.690

在您的代码中（我的包装）：

```
> <button id="start" type="button" start.disable = "false" 
>  onClick="loadingComplete(); SetButtonStatus()" />Start</button> 
```

您的代码依赖于 id “start” 被设为引用具有 id “start” 元素的全局变量，这是 IE 引入的非标准功能（并被其他浏览器复制以实现兼容性），这被广泛认为是一个非常糟糕的主意, 不要使用它。

“start.disable”的按钮元素没有标准属性，因此许多浏览器不会通过相同的命名元素属性提供访问。带有句点的属性名称不能使用 javascript 点表示法访问，必须使用方括号表示法访问。一些浏览`element['start.disable']`器会将其作为`getAttribute('start.disable')`.

但是，我认为您实际上是在禁用属性之后。

最后，开始标记的结束部分有一个放错位置的“/”，在 XML 中用于表示一个空元素。这显然不是 XML，如果是，它将导致元素标记的其余部分出现语法错误。我想你想要的是：

```
<button id="start" type="button" disabled 
 onClick="loadingComplete(); SetButtonStatus()">Start</button> 
```

另请注意， disabled 属性会导致 realted DOM 元素的 disabled 属性设置为`true`（即布尔值 true，而不是字符串“true”）。因此，您的代码可以是：

```
var start = document.getElementById('start');

if (start.disabled) {

  // toggle status
  start.disabled = false;

 } ... 
```

等等。

请注意，您可以编写：

```
if (start.disabled == true) 
```

但上面的输入和等价的较少。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-28T05:21:52.310

工作你的代码

[js小提琴演示](http://jsfiddle.net/sssonline2/fN8XD/)

```
<html>
<head>
<title>Animation Test</title>
<script>
    function SetButtonStatus()
    {

       if (document.getElementById('start').disabled == false)
        {document.getElementById('start').disabled=true;
         document.getElementById('pause').disabled=false;        
        return 0;}

        if (document.getElementById('pause').disabled == false )
        {//i added this line**
        //pause.disabled ="enabled"
        document.getElementById('pause').disabled =true
        document.getElementById('start').disabled =false
            return 0;
        }//i added this line**

    /*else if(document.getElementById('pause').disabled == true )
    {document.getElementById('pause').disabled = false}*/

    }
    </script>
</head>

<body>
<div>
<canvas id="myCanvas" width="250" height="250" style="border:solid 1px #000000;">
            <p>Your browser doesn't support canvas.</p>
        </canvas>
        <button id="start" type="button"  onClick="SetButtonStatus()" />Start</button>

        <button id="pause" type="button" onClick="SetButtonStatus()"/>Pause</button>

    </div>

</body>
</html> 
```

[js小提琴演示](http://jsfiddle.net/sssonline2/fN8XD/)

# sql - 如何显示部门详细信息以及每个部门的员工人数？

> ID：10779569
> 
> 赞同：0
> 
> 时间：2012-05-28T05:04:17.203
> 
> 标签：sql

从**员工部门**架构如何获取每个***部门***的详细信息（部门 ID、部门名称）以及每个部门的员工人数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:25:54.693

尝试这个

```
select dept.deptId,
   deptName,
   count(emp.empid) as numb_of_emps
   from department dept inner join employee emp
   on dept.deptid = emp.deptid
   group by dept.deptid 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T05:20:22.833

你可以把它当作 - （正如 Russell Dias 所建议的那样）

```
select d.deptId,
       deptName,
       count(e.empid) "number of employees"
from department d, employee e
where d.deptid = e.deptid
group by d.deptid,d.deptname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T05:19:57.243

```
select d.deptno,dname,count(e.empno) "No of Emp"
from dept d, emp e 
where d.deptno = e.deptno
group by d.deptno,d.dname 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-18T15:07:48.233

如果您不需要实际的部门详细信息，而只需要部门名称，则可以进一步简化，如下所示：

```
SELECT department_name, COUNT(*) AS "Number of employees" 
FROM employees group by department; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T13:14:16.520

```
SELECT department_name,COUNT(*) FROM employees a,departments b
where a.department_id=b.department_id
group by department_name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-29T11:18:25.777

您可以使用内部联接：

```
Select  e.EmployeeName,
        d.DepartmentName,
        count(d.DepId)As Total_no_of_Employees
From Department d
Inner join Employee e 
    On d.DepId = e.EmpID
Groub By DepartmentName, Total_no_of_Employees 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-22T21:59:27.670

```
select d.deptno, d.dname, count(e.empno) "Number of employees"
from dept d, emp e
where d.deptno = e.deptno
group by d.deptno,d.dname; 
```

# blackberry - 未找到模块“Facebook Blackberry sdk v0.8.25”

> ID：10779570
> 
> 赞同：0
> 
> 时间：2012-05-28T05:04:23.767
> 
> 标签：blackberry

我是黑莓应用程序开发的新手，我想将 Facebook 集成到我的黑莓应用程序中。[我从这个站点http://sourceforge.net/projects/facebook-bb-sdk/](http://sourceforge.net/projects/facebook-bb-sdk/)下载了 Facebook blackberry SDK ，我将此 jar 文件添加到我的黑莓应用程序中，但是当我在黑莓 9930 模拟器上运行该应用程序时，它显示“错误启动XX：找不到模块'Facebook Blackberry SDK v0.8.25'”任何人请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T04:05:32.493

我得到了解决方案，右键单击项目，在此选择 java 构建路径中选择属性并勾选 Facebook Blackberry SDK-v0.8.25 jar 和 Log4B-v9.4，然后单击确定按钮。

现在这个问题解决了

# selenium - 从 Selenium RC 迁移到 Webdriver 的明显原因。？

> ID：10779571
> 
> 赞同：7
> 
> 时间：2012-05-28T05:04:26.907
> 
> 标签：selenium, webdriver, selenium-rc, selenium-webdriver

从过去 4 个月开始，我正在使用`Selenium RC`.

但最近我知道 Selenium RC 已被弃用。好多人建议我换`Selenium Webdriver`。

那么，任何人都可以告诉我 Selenium RC 的问题是什么，以及 Webdriver 如何比 RC 更好？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T06:27:42.423

嗯，有多种原因。这里有几个没有特别的顺序

1.  Webdriver 提供了比 selenium RC 更简洁的 API。最常见的例子是你有 selenium.type 和 selenium.typeKeys，两者的效果是一样的。Webdriver 只为所有类型相关的操作提供了一种方法 sendKeys。简而言之，您可以说，webdriver 类组织得更好吗？

2.  Selenium 使用 javascript 注入工作。如果您使用 selenium 有一段时间了，那么您必须了解同源策略问题和 javascript 注入的限制。Webdriver 通过为每个浏览器使用驱动程序来克服这个问题。对于 Firefox，这意味着 webdriver 将自身作为插件附加到浏览器，对于 IE，它使用自动化原子，对于 chrome 和 opera，它使用 chrome 驱动程序。

3.  由于上述原因，webdriver 测试比 Selenium 更快

4.  与 selenium 相比，扩展 webdriver 要容易得多。Webdriver 提供了可扩展的动作类，您可以组合并创建自己的自定义动作。

5.  Webdriver可以支持在Iphone、ipad和android手机、平板等移动设备上进行测试。

最后但并非最不重要的一点是，现在 selenium 项目中没有任何开发工作。现在可用的任何东西都将继续得到支持，但没有针对 selenium 的新方法或增强功能。Selenium 和 webdriver 项目几年前合并并成为 Selenium 2.0

您可以在此处找到有关 webdriver 的更多详细信息以及[在此处](https://groups.google.com/forum/?fromgroups#!topic/webdriver/sIn5oZPk7sk)[合并](http://seleniumhq.org/docs/03_webdriver.html)的原因

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T08:10:41.890

AJ 说的。

RC 存在无法轻易克服的限制。

1.  可扩展性是一个**很大的**问题。我真的不能强调这一点。当我扩展一些 RC 方法以完成他们通常所做的更多工作时，我遇到了一个不容易通过的障碍。在 RC 中可以用 750 行代码和大量使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)完成的事情，可以在 WebDriver 中通过几个简单的方法完成。

2.  [同源](http://en.wikipedia.org/wiki/Same_origin_policy)政策。它是一种 Javascript 安全策略，仅允许从您所在的域运行代码。由于 RC 完全用 Javascript 编写，因此您无法轻松地在域之间切换或使用一些重定向或使用包含来自多个域的内容的框架的网站。

3.  由于 Javascript 中的另一个安全策略，您无法填写`<input type='file' />`输入，必须使用多种解决方法。

4.  你不能很好地使用`onload`Javascript 模式对话框。再次，必须解决这些问题。

    > Selenium 尝试向您隐藏这些对话框（通过替换 window.alert、window.confirm 和 window.prompt），这样它们就不会停止执行您的页面。如果您看到警报弹出窗口，可能是因为它在页面加载过程中触发，这对于我们来说保护页面通常为时过早。

5.  您不能真正最大化 RC 中的窗口 :)。

6.  当您需要等待一个元素时，您必须编写自己的方法。

7.  RC不再开发，不会有新的东西。WebDriver 花了一些时间来掌握所有功能，但现在 WebDriver 终于可以提供比 RC 更多的功能（等待和最大化）。它只会变得更好！

8.  RC 的[`getEval()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#getEval%28java.lang.String%29)方法是 WebDriver 的[`executeJavascript()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html#executeScript%28java.lang.String,%20java.lang.Object...%29). 前者返回 a`String`并且不能给出例如特定的页面元素。后者可以直接返回许多内置语言数据结构 , `WebElements`,`Lists`并且也可以将它们作为参数！这意味着您可以使用 WebDriver 找到一个元素，然后在其上运行一些 JS。使用 RC，您也必须使用 JS 来定位元素。这可以做到，但更难，更容易出错。

主要是这样。不切换也是有原因的：`WebDriver`API 还很年轻，还在不断变化。有时，当他们修复错误时，会有轻微的行为变化。因此，有时，升级并发现它破坏了某些东西是一件很痛苦的事情。

也就是说，我不会回到 RC，因为 WebDriver 使用起来更好。我非常期待明年 WebDriver 能够修复其最烦人的怪事。

# ios - 未在异步调用的块中设置变量

> ID：10779575
> 
> 赞同：1
> 
> 时间：2012-05-28T05:04:44.753
> 
> 标签：ios, objective-c-blocks

我有以下代码，它连接到服务器（实际上是我现在自己的机器），下载一些数据，将其反序列化，并将其分配给全局变量。

```
UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
MasterViewController *masterController = [navController.viewControllers objectAtIndex:0]; // masterController is a UITableViewController subclass
NSMutableArray *surveys = [[NSMutableArray alloc] init];
NSURL *url = [NSURL URLWithString:@"http://127.0.0.1:8000/testapp/survey-data"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *rep, NSData *d, NSError *err) {
    if(d) {
        NSMutableArray *allSurveys = [NSJSONSerialization JSONObjectWithData:d options:NSJSONReadingMutableContainers | NSJSONReadingMutableLeaves error:nil];
        for(NSMutableArray *item in allSurveys) {
            NSString *title = [item objectAtIndex:[item count] - 1];
            [item removeLastObject];
            Survey *survey = [[Survey alloc] initWithArray:item title:title];
            [surveys addObject:survey];
        }
        masterController.surveys = surveys; 

        NSLog(@"%@", [masterController.surveys description]);
    }
}]; 
```

不幸的是，它不起作用。（`NSLog()`在处理程序块内）按预期打印出所有数据。显然，连接正在工作。但是，视图不会更新，并且行都是空白的。发生这种情况是因为下载完成后块被调用吗？我怎样才能避免这种情况？

它似乎也可能是由于在块中设置变量引起的。不过，我查看了 Apple 的文档，看起来这应该不是问题，因为我通过对`masterViewController`. 我错了吗？

我应该注意，我尝试将其重写为使用 a `[NSURLConnection sendSynchronousRequest:returningResponse:error:`，效果很好。但是，如果网络速度慢或出现故障，同步请求可能是一个糟糕的主意，所以我真的需要让它异步工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:05:38.930

`AsynchronousRequest`不使用 UI 更新发生的主线程，所以对于 UI 更新使用这个：

```
dispatch_async(dispatch_get_main_queue(), ^{ 
    //UI update here    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:14:42.890

由于您的视图在获取数据之前加载，因此您需要`reloadData`在数据到达后调用表视图。

为了防止其他问题，请确保您在主线程上执行此操作，因为 UIKit 类不是线程安全的。

# jquery - 带参数的 JQ Grid Web 服务调用不起作用，对 Ajax 起作用

> ID：10779576
> 
> 赞同：0
> 
> 时间：2012-05-28T05:05:26.653
> 
> 标签：jquery, asp.net, ajax, web-services, jqgrid

我能够将表单数据从 ajax 脚本传递到 ASP.Net Web 服务并接收 JSON 对象作为响应，效果很好。当我在 JQ Grid 中使用相同的参数进行相同的调用时，我收到“无效的 Web 服务调用”或“无效的 JSON 原语”作为响应。

我相信这与以下帖子相当接近，我已经应用了这些建议（以及许多其他帖子的建议），但没有成功。 [JQGrid - 无法调用 ASP.NET WebMethod 但可以使用 Ajax](https://stackoverflow.com/questions/5160045/jqgrid-cannot-call-asp-net-webmethod-but-can-with-ajax)

下面的 Ajax 代码是成功的，它将表单参数传递给 Web 服务并以 JSON 格式检索结果。

**Ajax Javascript 代码：** **此代码有效**，它是 JQ Grid（在下方），这就是问题所在

```
<script language="JavaScript">
    function populateResults() {
    var arForm = $("#searchForm").serializeArray();

    $.ajax({
      type: "POST",
      url: "./WebService/Service.asmx/doSearch",
      data: JSON.stringify({ formVars: arForm }),
      contentType: "application/json",
      dataFilter: function(data) {
        var msg = eval('(' + data + ')');
        if (msg.hasOwnProperty('d'))
          return msg.d;
        else
          return msg;
      },
      success: function(msg) {
        // This will now output the same thing 
        //  across any current version of .NET.
        //console.log(msg.foo);
      }
    });
    };

    </script> 
```

**网络服务：**

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string doSearch(NameValue[] formVars)
{... 
```

**问题：** 以下是我的 JQ Grid 代码失败：

```
<script type="text/javascript">
    function populateResults() {
        var arForm = $("#searchForm").serializeArray(); 
        var searchParams = JSON.stringify({ formVars: arForm });

        var grid = $("#tblResults");
        grid.jqGrid({
            url: "./WebService/Service.asmx/doSearch",
            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
            data: searchParams,
            dataType: 'json',
            dataFilter: function(data) {
                var msg = eval('(' + data + ')');
                alert(msg.d);

                if (msg.hasOwnProperty('d'))
                  return msg.d;
                else
                  return msg;
            },
            mtype: 'POST',
            colNames:['Exam Date','Type','Name','UR Number','Pathology Type','Result Date','Modality', 'Results'],
            colModel:[
                {name:'resExamDate',index:'resExamDate', editable:false, width:120},
                {name:'resType',index:'resType', editable:false, width:60},
                {name:'name',index:'name', editable:false, width:120},
                {name:'urnumber',index:'urnumber', width:65, sorttype:'int'},
                {name:'resPathologyType',index:'resPathologyType', editable:false, width:120},
                {name:'resResultDate',index:'resResultDate', editable:false, width:120},
                {name:'resModality',index:'resModality', editable:false, width:170, cellattr: function (rowId, tv, rawObject, cm, rdata) { return 'style="white-space: normal;"'}},
                {name:'results',index:'results', editable:false, width:240, cellattr: function (rowId, tv, rawObject, cm, rdata) { return 'style="white-space: normal;"'}}
            ],
            rowNum:10,
            rowList:[5,10,20],
            pager: '#pager',
            sortname: 'surname',
            viewrecords: true,
            sortorder: "desc",
            height: "100%",
            processData: false,  //jquery will stringify again apparently: https://stackoverflow.com/questions/6471759/invalid-web-service-call-missing-value-for-parameter
            serializeGridData: function (postData) { return JSON.stringify(postData);   },
            jsonReader: { 
                total: "total",
                page: "page",
                records: "records",
                root: "rows",
                id: "id",
                cell: "cell",
                repeatitems: false
            }
        });
    }
    </script> 
```

在 Firebug 中，我收到：

```
Post
{"_search":false,"nd":1338180778103,"rows":10,"page":1,"sidx":"surname","sord":"desc"}

Response
{"Message":"Invalid web service call, missing value for parameter: \u0027formVars\u0027.","StackTrace":"   at System.Web.Script.Services.WebServiceMethodData.CallMethod(Object target, IDictionary`2 parameters)\r\n 
```

或者，如果我注释掉“serializeGridData：”行（我想我将它序列化两次或其他什么，所以我尝试注释掉它），我得到：

```
Post:
    _search=false&nd=1338180203206&rows=10&page=1&sidx=surname&sord=desc

Response:
    {"Message":"Invalid JSON primitive: _search.","StackTrace":"   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()\r\n ...... 
```

关于为什么它不起作用的任何可靠的想法？我花了几天的时间试图让它以这种方式工作。虽然我可以通过执行 Ajax 调用并将数据存储在变量中并将其设置为 JQ Grid 来使其工作，但我需要来自 JQ GRid 的直接 Web 服务调用才能用于过滤和其他事情......

提前致谢 ：）

编辑： - 使用 JQ Grid v4.3.2 - 发送到 Web 服务的 JSON 数据已使用[http://jsonlint.com/](http://jsonlint.com/)进行了验证（这是上面 javascript 代码中的变量“searchParams”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:39:48.960

您在通话中`{}`（参见`/*here*/`）中使用的内容

```
grid.jqGrid({/*here*/}); 
```

是*jqGrid 参数*或[jqGrid 选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)。在这里使用是错误的，`dataFilter`因为 jqGrid 只会忽略该选项。以同样的方式 jqGrid 不知道`dataType`选项并且它忽略`dataType: 'json'`. `datatype`（注意字母大小写）的默认值为`'xml'`. 因为来自服务器的 JSON 响应是错误的 XML 文件，您将收到错误消息。

以同样的方式`data`，jqGrid 的参数将被以另一种方式使用。您应该改用`postData`参数。重要的是要了解您应该使用类似`grid.jqGrid({/*here*/});` **once**的代码创建 jqGrid 。因此，如果您希望在分页、排序或过滤数据时将表单*中的当前*值`"#searchForm"`发送到服务器，您应该将其定义`formVars`为*function*。有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。如果您使用，那么在回调中添加属性`mtype: 'POST'`可能会很容易。`formVars``serializeGridData`

因此，您应该将当前代码重写为以下内容：

```
$(function () {
    var grid = $("#tblResults");
    grid.jqGrid({
        url: "./WebService/Service.asmx/doSearch",
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        serializeGridData: function (postData) {
            // extend the parameter which will be send to the server
            postData.formVars = $("#searchForm").serializeArray();
            // serialize the parameters as JSON string
            return JSON.stringify(postData);
        },
        datatype: 'json',
        mtype: 'POST',
        colNames:['Exam Date','Type','Name','UR Number','Pathology Type','Result Date','Modality', 'Results'],
        colModel:[
            {name:'resExamDate',index:'resExamDate', width:120},
            {name:'resType',index:'resType', width:60},
            {name:'name',index:'name', width:120},
            {name:'urnumber',index:'urnumber', width:65},
            {name:'resPathologyType',index:'resPathologyType', width:120},
            {name:'resResultDate',index:'resResultDate', width:120},
            {name:'resModality',index:'resModality', width:170,
                cellattr: function () {
                    return ' style="white-space: normal;"'
                }},
            {name:'results',index:'results', width:240,
                cellattr: function () {
                    return ' style="white-space: normal;"'
                }}
        ],
        rowNum: 10,
        rowList: [5, 10, 20],
        pager: '#pager',
        sortname: 'surname',
        viewrecords: true,
        sortorder: "desc",
        height: "100%",
        jsonReader: {
            root: function (obj) { return obj.d; },
            page: function () { return 1; },
            total: function () { return 1; },
            records: function (obj) { return obj.d.length; }
        }
    });
}); 
```

此外，您的服务器部分似乎*没有实现*数据分页。如果它忽略了所有标准 jqGrid 参数（`rows`, `page`, `sidx`, `sord`），您应该相信增加`rowNum`to`rowNum: 10000`例如，删除`rowList`和其他寻呼机信息的值（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager)）`pgbuttons: false, pginput: false`：此外，您可以使用

```
serializeGridData: function () {
    return JSON.stringify({formVars: $("#searchForm").serializeArray()});
} 
```

在这种情况下 jqGrid 将只发送`formVars`到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:18:42.767

您需要包含 Web 服务的预期参数名称，例如

```
var grid = $("#tblResults");
        grid.jqGrid({
            url: "./WebService/Service.asmx/doSearch",
            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
            data:{u0027formVars: searchParams}, 
```

前一个代码是成功的，因为其中包含了输入参数名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:22:24.793

您需要像这样传递数据：

```
function populateResults() {
var arForm = $("#searchForm").serializeArray();
var formvars = JSON.stringify(arForm);

$.ajax({
  type: "POST",
  url: "./WebService/Service.asmx/doSearch",
  data: "{'formVars':'" + formvars + "'}",
  contentType: "application/json",
  dataFilter: function(data) {
    var msg = eval('(' + data + ')');
    if (msg.hasOwnProperty('d'))
      return msg.d;
    else
      return msg;
  },
  success: function(msg) {
    // This will now output the same thing 
    //  across any current version of .NET.
    //console.log(msg.foo);
  }
});
}; 
```

# django - Django 日志配置需要在处理程序上指定过滤器

> ID：10779579
> 
> 赞同：0
> 
> 时间：2012-05-28T05:06:09.543
> 
> 标签：django, logging

我正在为我的 Django 项目配置日志记录，设置如下：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            # 'filters': [],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        '': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}

EMAIL_BACKEND = "django.core.mail.backends.console.EmailBackend" 
```

`'filters': []`注释掉后，控制台不会记录任何错误。取消注释该行会使一切按预期工作。

[Python 的 logging.config 文档](http://docs.python.org/library/logging.config.html#dictionary-schema-details)会让我相信这`logging`在处理程序上是可选的。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:36:26.693

似乎您错过了记录器字典中的密钥。我正在使用以下字典，它工作正常。

```
LOGGING = {
'version': 1,
'disable_existing_loggers': False,
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'class': 'django.utils.log.AdminEmailHandler',
    }
},
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
    }
}
} 
```

# javascript - 更改背景图像标签...没有任何反应

> ID：10779581
> 
> 赞同：0
> 
> 时间：2012-05-28T05:06:11.613
> 
> 标签：javascript, html, e-commerce

所以我在 BigCommerce 平台上工作，试图改变页面上某些标签的背景图像。我不能单独使用 CSS，因为我无法编辑这些特定元素的 HTML。这是我要在其上完成此操作的页面的链接：

[http://weddingsflowerpetal.mybigcommerce.com/a-vintage-affair-bouquet/](http://weddingsflowerpetal.mybigcommerce.com/a-vintage-affair-bouquet/)

我正在尝试更改“白色”、“黑色”、“红色”等标签的背景。现在我有这个代码：

```
 document.getElementById("7eff70453e41b167e40002762d6195d7").style.backgroundImage="url('http://weddingsflowerpetal.mybigcommerce.com/templates/__custom/images/ribbons/blackribbon.png') no-repeat left"; 
```

我为每个标签元素设置了一个，将每个元素更改为正确的图像。现在，当我将代码放入页面时，它没有给我 JS 错误，但图像没有改变。

对此的任何帮助将不胜感激。如果不能解决我的问题，是否有更简单的方法可以做到这一点，我还没有考虑过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:22:40.937

我将从 W3C 所说的“ID 和 NAME 令牌必须以字母开头 ([A-Za-z])”开始......看到 Firefox 是最兼容的浏览器，它可能无法在其中运行......但可以在其他浏览器中运行。 . 那是我开始调试的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:24:11.077

我认为是因为您在 JS 中设置了`backgroundImage`属性，但是您在 url 之后添加了其他 CSS 文本。应该是 `document.getElementById("7eff70453e41b167e40002762d6195d7").style.background='...'`或

`document.getElementById("7eff70453e41b167e40002762d6195d7").style.backgroundImage='url...';` 然后 `document.getElementById("7eff70453e41b167e40002762d6195d7").style.backgroundPosition='left';` 然后 `document.getElementById("7eff70453e41b167e40002762d6195d7").style.backgroundRepeat='no-repeat';`

但是，我注意到该网站正在使用 jQuery。所以你也许可以做这样的事情：

```
$(document).ready(function() {
    $("input[id='7eff70453e41b167e40002762d6195d7']")
        .css("background-image", "url('http://weddingsflowerpetal.mybigcommerce.com/templates/__custom/images/ribbons/blackribbon.png')")
        .css("background-repeat", "no-repeat")
        .css("background-position", "left top");
}); 
```

或者你可以尝试把它放在`li`父母身上

```
$(document).ready(function() {
    $("input[id='7eff70453e41b167e40002762d6195d7']").closest("li")
        .css("background-image", "url('http://weddingsflowerpetal.mybigcommerce.com/templates/__custom/images/ribbons/blackribbon.png')")
        .css("background-repeat", "no-repeat")
        .css("background-position", "left top");
}); 
```

# c++ - 命令行帮助 cl.exe 版本 12.00.8186 中的意外错误？

> ID：10779582
> 
> 赞同：1
> 
> 时间：2012-05-28T05:06:15.110
> 
> 标签：c++, visual-studio, compiler-errors, command-line-arguments, command-prompt

我需要找出 cl.exe 版本 12.00.8186 是否存在问题 每隔一段时间，我手动或从 makefile 输入的命令行都会被错误地处理。直到现在我还无法证明确实存在错误，我将在命令行上进行简单的请求帮助时会发生什么：

```
c:\vc\bin>cl /?
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8168 for 80x86
Copyright (C) Microsoft Corp 1984-1998\. All rights reserved.

Command line warning D4002 : ignoring unknown option '/r'
Command line warning D4002 : ignoring unknown option '/~'
Command line error D2003 : missing source filename
c:\vc\bin>_ 
```

但。如果我输入这个：

```
c:\vc\bin>cl /help
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8168 for 80x86
Copyright (C) Microsoft Corp 1984-1998\. All rights reserved.

                          C/C++ COMPILER OPTIONS  ..more help follows 
```

现在这不会打扰我，除非在使用 /help 时给出的文本中是这样的：

```
 -MISCELLANEOUS-

/?, /help print this help message       <------ actual text from using /help 
```

..显示/？应该是调用帮助的主要方式。*此外，有时*我会得到与其他命令类似（看似随机）的响应，这使得任何其他示例都难以重现，但我确信它们在那里。所以我的问题是，是什么原因造成的？有解决方法吗？这是否也会导致其他命令出现其他问题？有没有记录所有这些问题的地方？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-06T09:14:02.130

## 最佳的揣测

我能给自己的最好的猜测是？是一个通配符，并且 / 被解释为路径名分隔符而不是参数，给定响应的输出并回顾。看起来文件名可能会在参数之前考虑，但由于它是封闭源代码，因此无法判断，保存我所做的一些测试。

该目录中有包含这些字符的文件，它们确实会根据可执行文件的触发位置而改变，所以这是我得到的唯一确认，这是最好的猜测。

除非编写源代码的人真的来到这里并回答，否则这个问题无法得到任何进一步的回答。

## 结论

实际上，我认为猪可能会飞，而拉尔夫纳德将在此之前成为美国总统。

# ios - 如何在 iOS 项目中获取预处理器输出？

> ID：10779595
> 
> 赞同：2
> 
> 时间：2012-05-28T05:07:59.777
> 
> 标签：ios, gcc, c-preprocessor

我想从我的 iOS 项目中获取预处理器输出，该项目是使用 LLVM GCC 4.2 编译的，因为我想做一些静态分析。

我尝试使用标志 -save-temps ，但在预编译的标头处编译失败。

我还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:21:50.343

Gcc 有一个命令行标志“-E”来获取预处理信息。在 xcode 中，您可以轻松地使用 GUI。请参阅[此处](https://stackoverflow.com/questions/2823180/c-objective-c-preprocessor-output)了解更多信息。

# shell - gawk 'NR==$i....语句不起作用

> ID：10779602
> 
> 赞同：1
> 
> 时间：2012-05-28T05:08:56.070
> 
> 标签：shell, gawk

我有以下 shell 脚本代码。在这里，如果我使用`NR==$i`in`gawk`语句，它不起作用，而如果我只是使用`NR==1`（或其他一些整数值），它工作得非常好。

```
for ((i=1;i<=5;i++))
 do
    gawk 'NR==$i{//some action}' input.txt
done 
```

谁能让我知道这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T05:18:55.553

问题是脚本周围的单引号`awk`意味着`bash`在字符串内部没有替换并且`gawk`从字面上看（这与脚本中未初始化`$i`的情况相同）。`$0``i``gawk`

这一次，使用双引号代替：

```
for ((i=1;i<=5;i++))
do
    gawk "NR==$i{//some action}" input.txt
done 
```

一般来说，显式传递变量可能会更好：

```
for ((i=1;i<=5;i++))
do
    gawk -v i=$i 'NR==i{//some action}' input.txt
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T05:19:36.490

这样做的问题是您`'`在 gawk 脚本周围使用了简单的引号 ()，并且在其中`bash`不会替换 的值`$i`，因此请尝试使用双引号 ( `"`)。

# maven - 如何使用 Maven 构建 java 项目？

> ID：10779603
> 
> 赞同：3
> 
> 时间：2012-05-28T05:09:08.587
> 
> 标签：maven, maven-2, maven-3

我正在使用 maven 版本 3.0.4。我是 maven 的初学者。我使用 eclipse 创建了一个 Hello world Java 项目。

现在使用 maven 我想制作一个可执行的 jar 并运行它。我不知道该怎么做。我也搜索了它，但我得到的是如何创建一个 java 项目而不是如何构建一个现有的 java 项目。

帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:15:22.623

下载 Maven eclipse Sonatype 插件，并从那里创建一个 Maven 项目。

使用通常在可用原型列表中提供的默认 Java 项目原型。创建项目后，您将获得一个 pom.xml。

使用 Maven Eclipse 插件，您可以从 Eclipse IDE 构建，通过构建配置，该过程也很简单。您将能够从那里看到 Maven 构建配置，Java 项目的构建命令应该是 clean build。（我不介意）默认情况下，构建成功后，JAR 将被放置在目标文件夹中。

对于需要转换为 Maven 的现有项目，如果不使用插件，则必须手动创建 pom.xml 描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:34:02.757

一种方法是调整 jar 插件：

[http://maven.apache.org/shared/maven-archiver/examples/classpath.html](http://maven.apache.org/shared/maven-archiver/examples/classpath.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T07:49:34.103

如果您谈论的是可执行 jar，您的意思是 ueber-jar 或者您正在谈论创建一个 shellscript/batch 来运行您的 jar 文件。这种方法有两种选择。您可以查看[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)或查看[appassembler-maven-plugin](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)。此外，我建议阅读[有关 Maven 的书籍](http://sonatype.com/Support/Books/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-02T07:14:04.893

我建议您使用[Maven Shade](https://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html)插件来构建和执行 jar。只需将以下内容添加到您的`pom.xml`

```
<build>
  <plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.4.2</version>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>shade</goal>
                </goals>
                <configuration>
                    <transformers>
                        <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                            <mainClass>org.sonatype.haven.HavenCli</mainClass>
                        </transformer>
                    </transformers>
                </configuration>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

添加后，触发以下命令：

```
mvn clean package 
```

成功构建后，您可以在项目`target`文件夹中看到项目的可执行 jar。
希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-01T11:29:11.597

project->run as->maven build->goals->package ....单击运行它将与eclipse一起使用

# perl - 我如何知道 perl IO::Pipe 另一端的 PID

> ID：10779605
> 
> 赞同：2
> 
> 时间：2012-05-28T05:09:28.870
> 
> 标签：perl, process, pipe, pid

我已经使用 IO::Pipe 设置了另一个我观察输出的进程

```
my $pipe  = IO::Pipe->new();
my $fh    = $pipe->reader( $dirWatcher ); 
```

然后我设置了一个 IO::Select 来观看 $fh。

一切正常，但有时我想终止 $dirWatcher 进程。

我的第一个想法是在创建阅读器时保存 PID，然后在需要时调用 kill。

但是， IO::Pipe 似乎没有为我提供了解 PID 的方法。

那么我是否必须复制 IO::Pipe::reader 的功能？有没有我想念的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:36:10.993

IO::Pipe的`reader`and`writer`方法返回 IO::Pipe::End 的实例。此类使用`close`方法专门化 IO::Handle。

```
sub close {
    my $fh = shift;
    my $r = $fh->SUPER::close(@_);

    waitpid(${*$fh}{'io_pipe_pid'},0)
        if(defined ${*$fh}{'io_pipe_pid'});

    $r;
} 
```

进程 ID 存在但未在公共接口中公开。这似乎是一个差距。

您可以在以下程序中获取 pid。

```
#! /usr/bin/env perl

use strict;
use warnings;

use IO::Pipe;

my $pipe = IO::Pipe->new;
my $fh = $pipe->reader("sleep 5; echo hi");

my $pid = ${*$pipe}{'io_pipe_pid'};
system "ps", "ww", $pid;

print while <$fh>; 
```

输出：

```
$ ./get-reader-pid
  PID TTY 状态时间命令
 3500 点/0 S+ 0:00 sh -c 睡眠 5；回声嗨
[5 秒等待]
你好
```

正如[perlmodlib](http://perldoc.perl.org/perlmodlib.html#NOTE)文档所指出的，深入对象的内部并不是什么严重的罪行。然而，了解风险。

> Perl 不会像您在其他语言（如 C++、Ada 或 Modula-17）中习惯的那样强制执行其模块的私有和公共部分。Perl 并不热衷于强制隐私。它宁愿你呆在它的客厅外面，因为你没有被邀请，而不是因为它有猎枪。

你可能会觉得这样做有点肮脏，你应该这样做。它不是公共接口的一部分，因此如有更改，恕不另行通知。实际上，发生变化的可能性很低，即使发生变化，您也可以轻松适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:12:25.780

来自**perldoc IO::Pipe**

```
 use IO::Pipe;

           $pipe = new IO::Pipe;

           if($pid = fork()) { # Parent
               $pipe->reader();

               while(<$pipe>) {
                   ...
               }

           }
           elsif(defined $pid) { # Child
               $pipe->writer();

               print $pipe ...
           } 
```

# android - Android：从网页中检索缩略图

> ID：10779608
> 
> 赞同：0
> 
> 时间：2012-05-28T05:09:31.570
> 
> 标签：android, thumbnails

我正在构建一个应用程序，它会询问用户一个 url，并且应该向用户提供一组可供选择的缩略图，就像您在 Facebook 或 Google plus 上共享链接时一样。我的问题是：我将如何确定可用的图像，以及如何将它们下载为缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:28:46.640

获取提供的 URL，然后查找标签，您就完成了。之后，您找到了可以下载的图像。

要获取和解析，您可以在此处查找一些帖子（例如“从 url 获取 html”之类的帖子），然后使用 java Strings 函数查找标签（`while`带有类似 的内容`int position = html.indexOf("<img>";`）。否则，您可以使用 Jsoup 并避免编写太多代码。

对于下载，我建议在 StackOverflow（“Android 下载文件”）或 Android 开发者网站 (http://d.android.com) 中搜索。

干杯，奥尔多

# facebook-timeline - 在墙上发布 URL 时删除 html 代码

> ID：10779610
> 
> 赞同：-2
> 
> 时间：2012-05-28T05:09:52.180
> 
> 标签：facebook-timeline, facebook-checkins

当我在 Facebook 墙上粘贴 URL 时，它会显示图像并从 URL 中获取描述。但在我的情况下，描述带有 html 代码，如何显示描述。

我的网址是 www.maniacstore.com/test.html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T12:47:12.760

尝试使用调试来抓取您的 URL：http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fwww.maniacstore.com%2Ftest.html](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.maniacstore.com%2Ftest.html)

如果您使用的是 PHP，则可以使用该`strip_tags();`函数从代码中删除 HTML。我实际上没有在您的页面中看到任何 HTML，因此使用上面的链接抓取 URL 可能会解决问题。

# jsf - 在 JSF 中检索选定的行数据

> ID：10779615
> 
> 赞同：0
> 
> 时间：2012-05-28T05:10:39.047
> 
> 标签：jsf, jsf-2

我有一个 JSF 页面，我在其中创建了一个 html 表并使用 ui:repeat 显示行数据。我有一个保存按钮，当我选择特定行时，我希望保存整个行数据。当我尝试选择特定行时，我无法获取行数据。ui:repeat 没有绑定属性将其绑定到支持 bean 数据表。

你能建议如何实现同样的目标吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:34:26.260

确保将复选框连接到 bean 属性：

```
<h:selectBooleanCheckbox id="selection" value="#{listController.checked[item.id]}" /> 
```

在您的 bean 中，您需要：

```
private Map<Integer, Boolean> checked = new HashMap<Integer, Boolean>();

public Map<Integer, Boolean> getChecked() {
    return checked;
} 
```

然后，如果您想知道选择了哪些项目，您可以执行以下操作：

```
for (Map.Entry<Integer, Boolean> e : checked.entrySet()) {
    if (e.getValue()) {
        // do something with selected row
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:20:19.510

您可以通过将当前行作为参数传递到必须在using`onchange`事件上调用的操作中来实现此目的。`selectBooleanCheckbox``jsf:ajax`

# c# - 有没有办法将信息写入 Windows Phone 中的联系人？

> ID：10779619
> 
> 赞同：1
> 
> 时间：2012-05-28T05:11:05.450
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我知道三种机制：

*   保存任务（例如 SaveEmailAddressTask），可用于将特定信息（如电话号码或电子邮件地址）保存到用户选择的联系人中
*   SaveContactTask 可用于创建新联系人
*   联系人 API (Microsoft.Phone.UserData.Contacts)，可用于搜索/枚举联系人。

我缺少的是一种将一段数据（例如便笺）写入联系人（例如从 Contacts.SearchAsync() API 返回的联系人）的方法。

Windows Phone 7.1 可以做到这一点吗？

退一步说，我要做的是建立一些 UI，允许用户选择联系人，并将所有信息（电话号码、电子邮件地址等）导入我的应用程序的记录中。

我要解决的问题是确定我之前是否曾经访问过该联系人并导入其数据 - 如果是，我只想刷新它（而不是创建一个新的重复联系人）。

将数据写入联系人的另一种方法是保存与我导入的联系人关联的唯一 ID，但我也没有在联系人上看到类似的属性......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:34:12.867

SDK 的 v7.1 中没有类似的东西，因此您可能需要研究定义自己的候选键的方法，并且鉴于数据的性质，您可能必须定义几种启发式方法来确定您的匹配的信心，并应对多个移动目标（姓名、数字和电子邮件地址都可以更改，并且没有一个是不同的）。

# mysql - mysql防止具有多个字段的冗余记录

> ID：10779620
> 
> 赞同：2
> 
> 时间：2012-05-28T05:11:13.580
> 
> 标签：mysql, duplicates

我这里有问题。我有以下架构的表：

```
id : int(11) not null primary key
name : varchar(255) not null
status : enum('ACTIVE','DELETED') 
```

注意：记录是“软删除”，我们只是将状态标记为“已删除”。

问题是我不希望一个家伙能够通过 2 个不同的线程创建同名（冗余）的条目，除非 db 中的现有记录处于“已删除”状态。有什么可能的方法来做到这一点？

我不能只对名称+状态进行唯一索引，因为如果我们在“已删除”中有一个项目（同名），并且我想要删除的区域是“活动”，那么当我将该区域标记为时会发生错误被“删除”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:31:19.463

用你的数据添加一个 deleted_at 字段怎么样？然后你可以在 name + status + deleted_at 上有一个唯一的键。当 status = ACTIVE 时，deleted_at 只能有一个值，这样会使唯一性仅在名称上。

**为清楚起见编辑**：

```
CREATE TABLE mytable (
  id int not null primary key,
  name varchar(255) not null,
  status enum('active','delete'),
  deleted_at datetime not null default 0,
  UNIQUE KEY one_active (name, status, deleted_at)
); 
```

**编辑#2**：实际上，如果你让你的“检查是否删除”代码检查deleted_at > 0而不是检查status=deleted，那么你甚至不需要状态字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:19:44.727

您应该以编程方式实现您的目标。如果存在名称 + 状态 ACTIVE 以限制 INSERT，请检查您的语言。

# java - Spring：无法导入库

> ID：10779621
> 
> 赞同：1
> 
> 时间：2012-05-28T05:11:35.887
> 
> 标签：java, eclipse, spring

我是 Spring 新手，并使用 Eclipse从[这里开始学习 Spring 教程。](http://www.mkyong.com/tutorials/spring-tutorials/)

但是，在 Eclipse 中我无法导入这两个库

```
import org.springframework.context.ApplicationContext;

import org.springframework.context.support.ClassPathXmlApplicationContext; 
```

我什至从 Spring 站点下载了 Spring 源文件，将其包含在系统库中，将其添加到我的项目中以及我的项目的 lib 文件夹中，但没有白费。

你能帮我弄清楚问题到底出在哪里，并请给我一些好的 Spring 教程网站。

谢谢你们

**编辑**

这是例外

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    ApplicationContext cannot be resolved to a type
    ClassPathApplicationContext cannot be resolved to a type

    at com.test.App.main(App.java:12) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:31:38.537

根据评论：

您的 jars 尚未包含在类路径中。因此，您会遇到编译错误。

1.  转到 Eclipse 中的项目资源管理器透视图
2.  右键单击 lib 文件夹 > 构建路径 > 添加到构建路径。

这会将 lib 文件夹中的所有 jar 包含到您的类路径中，并且您不会收到任何编译错误。

顺便一提。这些类是 spring-context jar 的一部分，因此请确保它位于 lib 文件夹中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:45:51.000

终于明白了。我的错误，我使用 src 文件夹中的 jar 并将其作为用户库，但正确的方法是使用**dist**文件夹中的 jar。

谢谢你们的回答。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-20T17:16:09.163

添加spring-context的依赖。对于 gradle 项目。

```
implementation group: 'org.springframework', name: 'spring-context', version: '5.3.6' 
```

这为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-25T02:02:48.313

更新 pom.xml 文件中的依赖项，如下所示：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.0.5</version>
</dependency> 
```

# asp.net-mvc - Lesscss 和 ASP.NET MVC

> ID：10779625
> 
> 赞同：9
> 
> 时间：2012-05-28T05:12:22.333
> 
> 标签：asp.net-mvc, asp.net-mvc-4, less

自从将我的网站从 ASP.NET WebPages 切换到 MVC4 后，我遇到了 Lesscss 的问题。

CSS + Javascript 行：

```
<link href="@Url.Content("~/Content/site.css")" rel="stylesheet/less" type="text/css" />
<script src="@Url.Content("~/Scripts/less-1.3.0.min.js")" type="text/javascript"></script> 
```

我不知道出了什么问题。路径是正确的。当您从 CSS 链接中删除“/less”以正常使用它时，样式表就会起作用。尝试使用 Lesscss JS 文件时，它加载正常但没有加载样式表。IE 中的 F12 开发工具也确认没有加载样式表。

在将 Lesscss 与 MVC4 一起使用时，是否还有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T23:31:32.897

在我看来，更好地设置它的一种简单方法是使用 nuget。您不必使用 nuget，但它只是让事情变得如此简单。

1.  使用 nuget安装[dotless](http://nuget.org/packages/dotless)。
2.  使用 nuget安装[System.Web.Optimization.Less 。](http://nuget.org/packages/System.Web.Optimization.Less/)
3.  添加您的捆绑包

    ```
    bundles.Add(new LessBundle("~/Content/less")
                    .Include("~/Content/less/more.less")); 
    ```

4.  引用捆绑包

    ```
    @Styles.Render("~/Content/less") 
    ```

5.  完毕

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-28T09:14:34.383

您应该在 web.config 中为 less 文件扩展名指定 mime 类型，并在链接中使用它而不是 css。

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".less" mimeType="text/css" />
  </staticContent >
</system.webServer> 
```

就我个人而言，我使用 dotless 并在服务器上处理它是一种更好的方法。

此外，这并不是您问题的真正答案，而只是一个侧面——使用 MVC4，您不再需要 @Url.Content()。 [http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2](http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2)

# android - 保存 jpeg 稍后查看

> ID：10779626
> 
> 赞同：0
> 
> 时间：2012-05-28T05:12:22.323
> 
> 标签：android

我正在开发一个将绘制的画布作为 jpeg 图像存储在 SD 卡中的应用程序。问题是当我尝试查看保存的图像时，它比其他图像加载了很多时间我希望像其他图像一样在正常时间查看保存的图像我保存图像的代码是：

```
 View content = drawView;
            content.setDrawingCacheEnabled(true);
            content.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_LOW);
            Bitmap bitmap = content.getDrawingCache();

            String path = Environment.getExternalStorageDirectory().getAbsolutePath();
            String file_name="Imatge"+System.currentTimeMillis()+".jpg";
            File file = new File(path,file_name);
            FileOutputStream ostream;
            try {                   
                ostream = new FileOutputStream(file);
                bitmap.compress(CompressFormat.PNG,50, ostream);
                ostream.flush();
                ostream.close();
                Toast.makeText(getApplicationContext(), " :) Image saved in "+ path+"/"+file_name, 5000).show();
            } catch (Exception e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), e.toString()+"error", 5000).show();
            }
                } 
```

提前谢谢请帮帮我！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:49:13.247

您的代码将图像保存为 PNG 文件（即使您为其提供了文件扩展名 .jpg）。PNG 文件是无损的，因此比 JPEG 文件大得多。

要修复它，请将其另存为 JPEG：

```
ostream = new FileOutputStream(file);
bitmap.compress(CompressFormat.JPEG, 50, ostream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:13:44.263

如下所示使用

```
 String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
                     FileOutputStream out = null;
                     Log.e("h",""+mview.getMeasuredHeight()+" "+mview.getMeasuredWidth());
                    try {
                         out = new FileOutputStream(new File(extStorageDirectory + "/myAwesomeDrawing.jpg"));
                         mBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out); 
                         out.flush(); 
                         out.close();
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

其中**mBitmap是您在****Drawview**类中使用过的 Gloabal 变量，因此通过使用此您必须跳过此行

```
 /*View content = drawView;
     content.setDrawingCacheEnabled(true);
        content.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_LOW);
        Bitmap bitmap = content.getDrawingCache();
*/ 
```

可以吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:22:38.030

我自己找到了解决方案，解决方案是通过媒体存储存储图像，这是我的代码正常工作

```
View content = drawView;
                content.setDrawingCacheEnabled(true);
                content.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_AUTO);
                Bitmap bitmap;
                bitmap = content.getDrawingCache();             
                String file_name="MyImage"+System.currentTimeMillis()+".jpg";

                ContentValues values = new ContentValues();
                values.put(Images.Media.TITLE,"MyImage");                   
                values.put(Images.Media.DESCRIPTION,"Advanced Practice");                   
                values.put(Images.Media.MIME_TYPE, "image/jpeg");
                Uri url = null;

                try 
                {   
                    url = getContentResolver().insert(MediaStore.Images.Thumbnails.getContentUri("external"), values);
                    MediaStore.Images.Media.insertImage(getContentResolver(), bitmap,"MyImage","Advanced Practice");                     
                    Toast.makeText(getApplicationContext(), " :) Image saved in /sdcard/DCIM/Camera/"+file_name, 5000).show();
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                    Toast.makeText(getApplicationContext(), e.toString()+"error", 5000).show();
                } 
```

# iphone - calloutaccessorycontroltapped 或 prepareForSegue

> ID：10779628
> 
> 赞同：0
> 
> 时间：2012-05-28T05:12:28.180
> 
> 标签：iphone, xcode, map, annotations, detailview

我有一张地图，地图有注释，我可以在表格视图中将这些注释视为一个单元格，然后我可以看到我选择的任何单元格的详细信息，例如 xcode 中的主详细信息项目

像这样

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showDetail"]) {
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
Object *object = [self.objects objectAtIndex:indexPath.row];
DetailsViewController *detailsViewController = segue.destinationViewController;
detailsViewController.detailItem = object;
} 
```

该代码用于表格视图中的单元格，该单元格将推送到详细信息视图

但我希望用户在注释中按下 UIButtonTypeDetailDisclosure 时，按钮将转到与单元格将在表视图中转到的相同 DetailsViewController

是否有可能做到这一点 ？

我已阅读有关 calloutAccessoryControlTapped 的信息，但我不确定如何使已选择的注释成为我在 DetailsViewController 中声明的 detailItem

谢谢 ： ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:40:56.153

有点不清楚你在问什么。以下是一些猜测及其答案：

## 如何从地图标注附件按钮执行转场？

从 IB 中的控件（表格单元格、按钮等）拖动是制作 segue 的好方法，因为 UIKit 可以为您处理所有事情——当点击控件时，它会自动执行 segue。但是有些控件您无法从中创建转场，有时您可能希望以编程方式控制执行转场。为此，您可以通过从IB 中*的视图控制器本身拖动来创建一个 segue；*给 segue 一个唯一的标识符，然后在您的视图控制器中，您可以`[self performSegueWithIdentifier:@"myIdentifier"]`在希望 segue 发生时调用。

在这种情况下，您可能会从内部调用它`mapView:annotationView:calloutAccessoryControlTapped:`。

## 如何在这种 segue 中将我的模型对象传递给下一个视图控制器？

大概您的模型对象符合`MKAnnotation`协议，并且您将它们添加到带有`addAnnotation(s):`. 在这种情况下，当您的地图委托（可能是您的视图控制器）的`mapView:annotationView:calloutAccessoryControlTapped:`方法被调用时，第二个参数具有对相应`MKAnnotationView`. 该类有一个属性`annotation`，它将指向您的模型对象。

当然，在这个方法中你只是调用`performSegueWithIdentifier:`，所以你还没有访问目标视图控制器的权限。因此，您现在需要保留该模型对象引用（例如，在 ivar 中），然后您的`prepareForSegue:sender:`实现可以将其传递给目标视图控制器。

# android - Android初学者：如何在android中检测imageview上的特定位置

> ID：10779630
> 
> 赞同：2
> 
> 时间：2012-05-28T05:12:32.750
> 
> 标签：android, imageview, touch-event

我是 android 初学者。我想检测图像上的特定位置，所以我在相应的触摸上触发一个功能。不同的手机有不同的密度，所以我不能用作触发功能的像素。所以我在我的程序中选择了哪些选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:42:21.410

使用 View.OnTouchListener：

```
yourView.setOnTouchListener(new View.OnTouchListener(){

    public boolean onTouch(View v, MotionEvent mE){ 
        switch (mE.getAction()){
            case MotionEvent.ACTION_DOWN:
                int positionTouchedX =  mE.getRawX();
                int positionTouchedY =  mE.getRawY();
        }
    }
} 
```

这应该为您提供用户触摸屏幕的坐标。您可以使用 getResources 来获取您的可绘制大小或视图中使用的任何内容，以查找这些 x,y 坐标如何对应于图像上的位置。

# c# - 如何使用 C# 中的存储过程在 oracle 数据库中插入数据？

> ID：10779632
> 
> 赞同：2
> 
> 时间：2012-05-28T05:12:46.757
> 
> 标签：c#, oracle, stored-procedures

我的 oracle 数据库中有一个下表。我想使用存储过程插入这些数据并在我的 c# 代码中调用它。有人可以帮我吗？

```
CREATE TABLE TRANSFORMATION_LOG(    
    row_num number,
    source_file_path varchar(2000),
    transformed_file_path varchar(2000),
    transformed_status varchar(10),
    transformed_message varchar(1024),
    transformed_datetime TIMESTAMP    
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:20:53.327

阅读这些文章并按照步骤.... [1](http://www.codeproject.com/Articles/18692/Instant-Oracle-Using-C)和[2](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/hol08/dotnet/getstarted-c/getstarted_c_otn.htm)

# iphone - 从 iPad/iPhone 设备向网站发送更新

> ID：10779634
> 
> 赞同：0
> 
> 时间：2012-05-28T05:12:58.487
> 
> 标签：iphone, objective-c, ios, json, ipad

好的，标题似乎很笼统，所以让我解释一下。我有一个笔记应用程序，它不仅保存在数据库中，还通过 JSON 发送到服务器，网站将解析数据并显示它。问题是：如果用户在创建笔记时没有互联网连接怎么办？

它是这样工作的：用户将按下保存按钮，它将数据保存到数据库中，并将 JSON 字符串发送到服务器。如果没有互联网连接，用户仍然可以将数据保存到数据库中。但是 JSON 字符串呢？当当时没有互联网连接时，网站如何知道是否进行了更新？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:22:30.937

一个基本的解决方案是在您的数据库中存储数据是否已成功保存到服务器或记录是否“未同步”。如果由于缺乏连接而导致保存错误，您可以在设定的时间后拨打电话，再次检查是否有任何“未同步”记录，并尝试保存这些记录。如果再次失败，请重新安排检查。

您可以使用类似的东西`NSObject` [`performSelector:withObject:afterDelay:`](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a)在一段时间后运行一些代码。

您可能还希望在应用程序启动或从后台返回时执行此检查，以在应用程序未在其间运行时捕获任何未同步的记录。

# ios - sencha touch microloader 在 iOS 中不起作用

> ID：10779635
> 
> 赞同：1
> 
> 时间：2012-05-28T05:12:58.630
> 
> 标签：ios, cordova, sencha-touch-2

我创建了一个在 android 上运行良好的 sencha touch 2/phonegap 应用程序，需要将其放入 iOS 中。

我成功地这样做了，然后做了一个小的代码更改（从左到右更改了卡片动画），应用程序停止加载。

index.html 出现了，但好像没有调用 microloader。没有执行任何 ST javascript。

我尝试在 XCode 中创建一个全新的 iPhone 应用程序，我确保我引用了 Mac phonegap 文件，我检查了 microloader 和 app.json 中的所有文件是否存在。除了引用 Mac phonegap 文件而不是 Android 文件之外，整个目录结构都被逐字复制，但我无法让它运行，XCode 也没有给我任何错误消息。

然而，在我做出无关紧要的更改之前，它确实成功运行了。当然，我尝试过将代码改回来，但什么也没做。

这是我的 index.html。如您所见，它非常简单：

```
<!DOCTYPE HTML>
<html manifest="" lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>MyApp</title>
    <script type="text/javascript" src="cordova-1.7.0.js"></script> 
    <script src="sencha-touch-all-debug.js" type="text/javascript"></script>        
    <script id="microloader" type="text/javascript" src="./microloader/development.js"></script>
</head>
    <body  style="background: url(splash.png) no-repeat;
  background-size: 100%;" >

    </body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:35:25.650

尽管我尝试创建一个新的 iPhone 应用程序，但我没有尝试删除我的网络应用程序并再次复制所有内容。这有效，我仍然不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:46:43.073

也许您应该在 app.json 中包含 cordova 和 sencha 脚本。到目前为止，我知道建议只在 index.html 中包含一点微加载器脚本。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-24T11:34:26.867

从 2.0.0-beta3 开始，似乎 microloader 出了问题。

当它尝试为 .js 文件应用差异时，它会为不同的项目生成不同的语法错误——这就是为什么第一次运行成功，而以后的运行则没有，无论代码更改如何。

# emacs - emacs 自动完成键绑定不起作用

> ID：10779636
> 
> 赞同：4
> 
> 时间：2012-05-28T05:13:52.420
> 
> 标签：emacs, autocomplete

我从这里下载了一个 emacs 配置文件：[https](https://github.com/redguardtoo/emacs.d)
://github.com/redguardtoo/emacs.d 我安装它并学习使用 emacs。
使用 YASnippet 时，我发现自动完成的键绑定不起作用。
在编写C代码时，输​​入“inc”然后按TAB，emacs会弹出一个菜单来选择一个片段。
如果我想选择一个片段，它只有在按向上箭头和向下箭头时才有效，Cn 和 Cp 不起作用。
我发现emacs配置文件有绑定Cn和Cp。这是 init-auto-complete.el

```
(require 'auto-complete)
(require 'auto-complete-config)
(global-auto-complete-mode t)
(setq ac-auto-start nil)
(setq ac-dwim nil) ; To get pop-ups with docs even if a word is uniquely completed
(define-key ac-completing-map (kbd "C-n") 'ac-next)
(define-key ac-completing-map (kbd "C-p") 'ac-previous)

;;----------------------------------------------------------------------------
;; Use Emacs' built-in TAB completion hooks to trigger AC (Emacs >= 23.2)
;;----------------------------------------------------------------------------
(setq tab-always-indent 'complete)  ;; use 'complete when auto-complete is disabled
(add-to-list 'completion-styles 'initials t)

;; hook AC into completion-at-point
(defun set-auto-complete-as-completion-at-point-function ()
  (setq completion-at-point-functions '(auto-complete)))
(add-hook 'auto-complete-mode-hook 'set-auto-complete-as-completion-at-point-function)

(set-default 'ac-sources
             '(ac-source-dictionary
               ac-source-words-in-buffer
               ac-source-words-in-same-mode-buffers
               ac-source-words-in-all-buffer))

(dolist (mode '(magit-log-edit-mode log-edit-mode org-mode text-mode haml-mode
                sass-mode yaml-mode csv-mode espresso-mode haskell-mode
                html-mode nxml-mode sh-mode smarty-mode clojure-mode
                lisp-mode textile-mode markdown-mode tuareg-mode
                js3-mode css-mode less-css-mode))
  (add-to-list 'ac-modes mode))

;; Exclude very large buffers from dabbrev
(defun sanityinc/dabbrev-friend-buffer (other-buffer)
  (< (buffer-size other-buffer) (* 1 1024 1024)))

(setq dabbrev-friend-buffer-function 'sanityinc/dabbrev-friend-buffer)

(provide 'init-auto-complete) 
```

我认为这两条线应该有效，但没有。这让我抓狂。
(define-key ac-completing-map (kbd "Cn") 'ac-next)
(define-key ac-completing-map (kbd "Cp") 'ac-previous)

如何绑定 Cn 和 Cp 以在弹出菜单中选择片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-13T14:55:56.480

我在[http://www.emacswiki.org/emacs/auto-complete.el找到](http://www.emacswiki.org/emacs/auto-complete.el)

```
;; Use C-n/C-p to select candidates
;; --------------------------------
;;
;; Add following code to your .emacs.
;; 
;;     (define-key ac-complete-mode-map "\C-n" 'ac-next)
;;     (define-key ac-complete-mode-map "\C-p" 'ac-previous) 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:50:26.683

```
(define-key ac-menu-map (kbd "C-n") 'ac-next)
(define-key ac-menu-map (kbd "C-p") 'ac-previous) 
```

上面的代码怎么样

# c# - 服务器端 C# 和 ActiveX C#

> ID：10779638
> 
> 赞同：0
> 
> 时间：2012-05-28T05:13:54.450
> 
> 标签：c#, .net, activex

在您的网站上使用 C# 编写的 ActiveX 控件与使用 C# 编写的网站有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:24:37.553

服务器端 C# 生成的 HTML 可由每个操作系统上的虚拟每个浏览器请求和显示。

ActiveX 控件是专有的客户端应用程序，仅在非常特定的客户端配置中运行，即在有限的操作系统集上运行 Internet Explorer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:19:55.620

用 C# 编写的网站 - 这将托管在 IIS 上，并生成 HTML 响应以发送到客户端浏览器。这在服务器端运行。

ActiveX 控件——ActiveX 控件，小程序构建块，可用于创建通过 Web 浏览器在 Internet 上运行的分布式应用程序，类似于 Java 小程序。这在客户端执行

# javascript - 通过 Flash 将 JavaScript 事件发送到其他窗口（和浏览器）

> ID：10779639
> 
> 赞同：0
> 
> 时间：2012-05-28T05:14:00.303
> 
> 标签：javascript, flash

我需要将 javascript 事件发送到其他打开的窗口（例如，我想静音所有其他玩家，当然只针对我的域）。是否存在一些已编译的闪存来执行此操作？

架构：
1.从当前页面我将事件发送到 Flash 2.Flash 将事件
调度到其他 Flash 实例，这些实例发送 javascript 事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:28:33.460

您可以使用[LocalConnection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)类调用用户计算机上其他 swf 的函数，即使它们在其他浏览器中。然后，您可以根据需要使用[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)调用 JavaScript 函数，

# java - 如何扫描打开的窗口

> ID：10779642
> 
> 赞同：1
> 
> 时间：2012-05-28T05:14:36.197
> 
> 标签：java, window

是否可以使用 java 扫描所有打开的窗口并找到指定的窗口。说记事本？例如，我希望记事本在前面和中间打开并准备好，它打开，当我运行我的程序时，它会扫描所有打开的窗口并将记事本向前移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T16:23:30.873

这可以通过 JNA 完成。

```
import com.sun.jna.platform.win32.User32;
import com.sun.jna.platform.win32.WinDef.HWND;

// https://github.com/twall/jna#readme
//    you need 2 jars : jna-3.5.1.jar and platform-3.5.1.jar

public class ActivateNotepad {

    public static void main(String[] args) {
            HWND hwnd = User32.INSTANCE.FindWindow("Notepad", null);
            if (hwnd == null) {
                System.out.println("No Notepad instance detected");
            }
            else{
                System.out.println("Notepad instance found.");
                User32.INSTANCE.SetForegroundWindow(hwnd);  
            }
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:01:33.213

我在Windows系统方面有丰富的经验。而且我知道在 Windows Management Instrumentation (WMI) 中适当地满足了 Windows 系统的特定要求。我已经像你正在做的那样成功地使用了 WMI，但我从来没有用 Java 做过。这是 [WMI 解释](http://www.vijaykandy.com/2009/09/windows-management-instrumentation-wmi-from-java/)的链接。请告诉我您尝试了哪些并陈述您的结论。

相信我，一旦您知道如何使用 Java 访问 WMI，您几乎可以在 Windows 系统上做任何事情。当然，如果我有这样的要求，我会使用 C# 和 .NET。但 Java 是您的选择 </p>

# java - 将 java 语言映射到数据库

> ID：10779644
> 
> 赞同：0
> 
> 时间：2012-05-28T05:14:42.697
> 
> 标签：java, database, schema

我想在数据库模式中表示一些 Java 概念。我不是说将实例持久化到 Hibernate 中，我的意思是将 java 的类型系统表示为一系列表和行。

因此，例如，关于类型，我想代表一组确定的关系。例如，Java中有两种类型，原始类型和引用类型，原始类型分解为数字和布尔类型，数字分解为整数和浮点类型，整数分解为字节短整数和浮点类型进入 float 和 double （我想我是对的）。

Java 也有类，类有方法，方法有签名和构造函数，返回类型和参数，两者都有一些类型。

所以我想创建一个以 3NF 形式表示此类信息的数据库。这样的数据库将允许查询对象实例，这些对象实例将是放入数据库的数据。

有这样的吗？我在 Google 中没有找到任何有用的东西，可能是因为很难编写一个不会让您进入 JDBC 和 Hibernate 领域的查询。不过，我认为一定有人已经这样做了。也许甚至还有我不知道的标准或 RFC。

我不想要的是尝试对休眠或类似的东西的某些方面进行逆向工程。我认为这实际上是一项艰巨的任务，回报很少。并不是我不能从头开始（在通常的错误开始和错误发生之后），而是我想知道它是否还没有完成并在某个地方指定。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:20:03.573

***[对象关系阻抗不匹配](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)是一个难题。***如果您不想深入研究 Hibernate 或其他 ORM 层来试图弄清楚他们是如何做到的，那么您将不得不自己重新发明轮子。

我们可以提出概念表示，例如 Object 表……您可以使用 Hibernate 使用的继承策略。但是，如果您想捕获方法，则必须弄清楚（方法-对象关系？）如果您想捕获@Override 的能力，则必须弄清楚这一点。注释？等等等等。

> “我想在数据库模式中表示一些 Java 概念……我认为这实际上是一项回报甚微的大任务。”

我想你回答了你自己的问题。您可能想问的问题是：“对于我真正想做的事情，是否有更好的方法？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:22:41.220

> 这是我想知道它是否还没有完成并在某个地方指定。

不是你的意思。这个轮子之前已经在各种 ORM 映射产品中发明过，但我不知道有谁独立于这种产品做过。（为什么会有人这样做？它不像有 100 个项目可以利用这项工作......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T06:46:32.630

谷歌为“子类型”“超类型”建模。

您的问题听起来需要两个或三个级别的子类型。

一个名为“fields”的表，它包含所有类型名称、长度、它所属的类等共有的属性。

一个名为“text_fields”的表，其中包含所有文本类型字段共有的属性。

一个名为“numeric_fields”的表，其中包含数字字段共有的所有属性。浮动或固定的指标，可能是最大值和最小值等。

因此，对于每个字段，您将名称等存储为“字段”表中的一行，其余数据存储在“text_fields”或“numeric_fields”表中。

根据您建模的原因，您可能需要第四个表“类”，因为类变量可以出现在 Java 程序中基本类型可以出现的大多数地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T01:38:59.443

另一个答案！我一夜之间就在考虑这个问题，我突然想到，任何 UML 建模工具都必须在内部准确地存储这种数据，以支持漂亮的图形和箭头。

```
[Argo][1] and [Papyrus][2] look promising. 
```

# jquery - 调整窗口大小时无法让脚本再次运行

> ID：10779650
> 
> 赞同：0
> 
> 时间：2012-05-28T05:15:41.410
> 
> 标签：jquery

我不知道自己做得足够好，无法弄清楚为什么在调整窗口大小时没有重新计算高度。另外，我希望对三所学校中的每一所都分别进行计算。

任何帮助将不胜感激：http: [//jsfiddle.net/joshnh/kmwmf/](http://jsfiddle.net/joshnh/kmwmf/)

```
$(window).resize( function() {

    var $school = $('.content ul'),
        $campus = $('.content ul p'),
        campusHeight = 0;

    $school.each( function() {
        $campus.each( function() {
            if($(this).height() > campusHeight) {
                campusHeight = $(this).height();
            }
        });
    });

    $campus.height(campusHeight);        
    console.log(campusHeight);

}).trigger('resize'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:55:21.587

这是您的代码当前正在执行的操作：

```
var $school = $('.content ul'),    // select all school ul elements
    $campus = $('.content ul p'),  // select ALL campus paragraphs
    campusHeight = 0;

$school.each( function() {         // iterate over the schools
    $campus.each( function() {     // iterate over ALL campuses, not just
                                   // the ones for the current school 
```

下面应该对每所学校进行单独的计算：

```
$(window).resize( function() {

    $('.content ul').each( function() { // iterate over the school ul elements
        var campusHeight = 0,
            $campus = $('p', this);     // get campuses for current school
        $campus.each( function() {      // iterate over current campuses
            if($(this).height() > campusHeight) {
                campusHeight = $(this).height();
            }
        });
        $campus.height(campusHeight);   // set height for campuses
        console.log(campusHeight);      // in current school
    });    

}).trigger('resize'); 
```

在我的代码中，我已经删除了`$schools`变量，因为您可以将外部`.each()`直接附加到初始`$('.content ul')`. `$campus`同样，您可以通过在内部末尾链接高度设置代码来消除变量`.each()`：

```
 $('p', this).each( function() {
            if($(this).height() > campusHeight) {
                campusHeight = $(this).height();
            }
        }).height(campusHeight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:00:53.783

这是您可以做的，分别迭代每所学校的校园以评估高度：

```
$(window).resize( function() {

  var $school = $('.content ul');

$school.each( function() {
    $campus = $(this).find('p');
    campusHeight = 0;
    $campus.each( function() {
        if($(this).height() > campusHeight) {
            campusHeight = $(this).height();
        }
    });
     $campus.height(campusHeight);
});

  console.log(campusHeight);

}).trigger('resize'); 
```

这只单独调整了学校校园的大小。要重新计算高度，请参阅此编辑：

```
 $(window).resize( function() {

    var $school = $('.content ul');

    $school.each( function() {
    $campus = $(this).find('p');
    campusHeight = 0;
    $campus.css('height', ''); //forces to remove height to recalculate new height

    $campus.each( function() {
        if($(this).height() > campusHeight) {
            campusHeight = $(this).height();
        }
    });
     $campus.height(campusHeight);
});

  console.log(campusHeight);

}).trigger('resize'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T05:30:46.353

我最终自己解决了它：http: [//jsfiddle.net/joshnh/kmwmf/7/](http://jsfiddle.net/joshnh/kmwmf/7/)

在测量高度之前删除内联样式属性可确保代码在调整窗口大小时正常工作。

```
$(window).resize( function() {

    var $school = $('.content ul'); 

    $school.each( function() {
        var $campus = $(this).find('p'),
            campusHeight = 0;

        $campus.each( function() {
            $(this).removeAttr('style');
            if($(this).height() > campusHeight) {
                campusHeight = $(this).height();
            } 
        });

        $campus.height(campusHeight);
    });   

}).trigger('resize');
```

# java - Java：从文件中保存和读取哈希图

> ID：10779651
> 
> 赞同：2
> 
> 时间：2012-05-28T05:16:27.977
> 
> 标签：java, hashmap

我有以下嵌套的哈希图：

```
HashMap<Foo1, HashMap<Foo2, TObjectDoubleHashMap<Foo1>>> my_map; 
```

有超过一百万个条目，`TObjectDoubleHashmap`生成大约需要一分钟。我有哪些选项可以将其保存到文件中，这样就不需要每次都生成它？

到目前为止，我已经将实际的键和值保存到文本文件中，然后再次将其加载到哈希图中，但这并没有节省那么多时间。有没有更快的方法，例如使用序列化将其保存为对象？如果是这样，我该怎么做才能使我的密钥可序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:19:07.317

> **有没有更快的方法，例如使用序列化将其保存为对象？**

映射的序列化只是写出键和匹配的值。使用序列化不会比自己动手做更快。HashMap对其序列化数据的描述是：

> 发出HashMap的容量（桶数组的长度）（int），后面是大小（一个int，key-value映射的个数），后面是每个的key（Object）和value（Object）键值映射。键值映射不按特定顺序发出。

您可以在[此处](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.writeObject%28java.io.ObjectOutputStream%29)查看代码。

> **我必须做什么才能使我的密钥可序列化？**

要使对象可序列化，请实现[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口。您可能还想指定`serialVersionUID`. 添加一个字段：

```
private static final long serialVersionUID = 1L; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:48:45.517

您是否使用 a 是`Map<Foo1, Map<Foo2, Value>>`因为您想为每个值使用两个键？

如果是这样，您可以尝试使用 Guava 的[表](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Table.html)而不是嵌套地图，这可能会提高性能。这是为将两个键关联到一个值而设计的。我的猜测是创建大量的哈希映射是占用大部分初始化时间的原因。

# javascript - 如何检测 Google Chrome 是否阻止 Flash 播放

> ID：10779657
> 
> 赞同：2
> 
> 时间：2012-05-28T05:17:57.193
> 
> 标签：javascript, flash, google-chrome

在 Google Chrome 中有一个选项可以关闭自动运行任何浏览器插件（如 Flash、Java 等）。如果您将首选项设置为点击播放，则用户必须单击 Flash 容器才能运行 Flash 应用程序。

我的问题是如何（在 JavaScript 中）检测 Google Chrome 是否阻止 Flash 播放，以便我可以向用户显示消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:26:00.420

使 flash 对象调用外部接口函数，如“flashReady”。
在 javascript 中，如果页面已经加载并且在几秒钟的超时后，如果 flashReady 没有被调用，它可能会被阻塞（或仍在加载，但您可以通过在开始时让 swf 调用该函数来解决这个问题加载）。

# iphone - 在 NSString 上获取 EXC_BAD_ACCESS。日志显示 CFStringRef 无效

> ID：10779659
> 
> 赞同：0
> 
> 时间：2012-05-28T05:18:18.350
> 
> 标签：iphone, objective-c, xcode

我正在尝试从我设置的服务器访问数据。虽然 4 个文件运行良好，但我得到一个 Thread2：程序收到信号：“EXC_BAD_ACCESS”。

```
-(void)loadContentInBackground
{

        NSError *error;

        NSString *posterURL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/poster.jpg",baseURL,clubNum];

        poster.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:posterURL]]];

        posterEnlarged.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:posterURL]]];

        NSString *vp1URL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/VenuePic/pic1.jpg",baseURL,clubNum];
        venuePic1.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:vp1URL]]];

        NSString *vp2URL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/VenuePic/pic2.jpg",baseURL,clubNum];
        venuePic2.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:vp2URL]]];

        NSString *vp3URL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/VenuePic/pic3.jpg",baseURL,clubNum];
        venuePic3.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:vp3URL]]];

        NSString *nameURL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/name.txt",baseURL,clubNum];
        NSString *nameData = [NSString stringWithContentsOfURL:[NSURL URLWithString:nameURL] encoding:NSASCIIStringEncoding error:&error];
        name.text = nameData;

        // Date Being downloaded.
        NSString *dateURL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/date.txt",baseURL,clubNum];
        NSString *dateData = [NSString stringWithContentsOfURL:[NSURL URLWithString:dateURL] encoding:NSASCIIStringEncoding error:&error];
        date.text = dateData;

        // Day Being downloaded. THIS IS WHERE THE ERROR COMES IN HIGHLIGHTING THE
       //initWithFormat line

        NSString *dayURL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/day.txt",baseURL,clubNum];
        NSString *dayData = [NSString stringWithContentsOfURL:[NSURL URLWithString:dayURL] encoding:NSASCIIStringEncoding error:&error];
        day.text = dayData;

        // Latitude & Longitude Being downloaded. 
        NSString *latitudeURL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/Location/latitude.txt"];
        NSString *latitudeData = [NSString stringWithContentsOfURL:[NSURL URLWithString:latitudeURL] encoding:NSASCIIStringEncoding error:&error];

        NSString *longitudeURL = [[NSString alloc] initWithFormat:@"%dPartyCentral/WeeklyParties/Club%@/Location/longitude.txt",baseURL,clubNum];
        NSString *longitudeData = [NSString stringWithContentsOfURL:[NSURL URLWithString:longitudeURL] encoding:NSASCIIStringEncoding error:&error];

        CLLocationCoordinate2D location;
        location.latitude = [latitudeData doubleValue];
        location.longitude = [longitudeData doubleValue];

        MapAnnotation *newAnnotation = [[MapAnnotation alloc] initWithTitle:[name text] andCoordinate:location];
        [self.mapView addAnnotation:newAnnotation];
        [newAnnotation release];

    } 
```

在我得到的 dayURL 旁边的日志中，CFStringRef 无效。

请帮忙...！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:46:13.250

这一行：

```
NSString *latitudeURL = [[NSString alloc] initWithFormat:@"%@PartyCentral/WeeklyParties/Club%@/Location/latitude.txt"]; 
```

包含一个没有提供参数的格式化字符串，这将具有取消引用堆栈上任何值的效果。如果这些*指针*不是指向有效内存的，那么就会发生这种类型的错误。

# c# - 使用 c# 从 asp.net 中的数据库字段中预选复选框

> ID：10779661
> 
> 赞同：0
> 
> 时间：2012-05-28T05:18:39.313
> 
> 标签：c#, asp.net, checkbox, checkboxlist

我有一个组支票簿列表，我想从数据库表中预先选择它。我很有趣下面的代码来选择这个，但它不起作用

表中的数据以以下格式示例存储：-

```
1,2,
1,5,7,
1,2,3,4, 
```

**HTML**

```
<asp:checkboxlist id="chkBoxDaysList" runat="server">
 <asp:listitem  runat="server" value="1"  Text="Sunday" />
 <asp:listitem  runat="server" value="2" Text="Monday" />
 <asp:listitem  runat="server" value="3" Text="Tuesday" />
 <asp:listitem  runat="server" value="4" Text="Wednesday" />
 <asp:listitem  runat="server" value="5" Text="Thrusday" />
 <asp:listitem  runat="server" value="6" Text="Friday" />
 <asp:listitem  runat="server" value="7" Text="Saturday" />
</asp:checkboxlist> 
```

**基于先前保存的数据预选复选框的 C# 代码**

公共无效 getSelectedDays() { IDataReader 博士；

```
String strSqlDays = "SELECT * FROM EventCalender WHERE rowID = 6";
DataSet ds = new DataSet();
ds = DataProvider.Connect_Select(strSqlDays);
dr = ds.Tables[0].CreateDataReader();

string[] s = new string[50];
while (dr.Read())
{
    s = dr["EventDays"].ToString().Split(',');

}
int length = s.Length;
for (int i = 0; i <= s.Length - 1; i++)
{
    string cntry = s[i];
    for (int j = 0; j <= chkBoxDaysList.Items.Count - 1; j++)
    {
        if (chkBoxDaysList.Items[j].Text == s[i])
        {
            chkBoxDaysList.Items[j].Selected = true;
            break;
        }
    }
} 
```

}

现在代码不会产生任何错误，但也没有选择任何复选框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:34:00.263

您正在检查带有 DB 值的复选框文本。请使用数据库记录中的值检查复选框列表的值。更正的代码如下所示-->

```
 if (chkBoxDaysList.Items[j].Value == s[i])
        {
            chkBoxDaysList.Items[j].Selected = true;
            break;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:03:49.243

```
protected void Button2_Click(object sender, EventArgs e)
    {
        try
        {
            con.Open();
            SqlCommand cmd = new SqlCommand("select * from empreg where empid=@empid", con);
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.AddWithValue("@empid", txtid.Text);
            SqlDataAdapter adpt = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            adpt.Fill(ds);
            if (ds.Tables[0].Rows.Count > 0)
            {
                IDataReader dr = ds.Tables[0].CreateDataReader();
                txtfname.Text = ds.Tables[0].Rows[0][1].ToString();
                txtlname.Text = ds.Tables[0].Rows[0][2].ToString();
                RadioButtonList1.SelectedValue = ds.Tables[0].Rows[0][3].ToString();
                txtdob.Text = ds.Tables[0].Rows[0][4].ToString();
                txtdoj.Text = ds.Tables[0].Rows[0][5].ToString();
                txtsal.Text = ds.Tables[0].Rows[0][6].ToString();
                txtadd.Text = ds.Tables[0].Rows[0][7].ToString();
                DropDownList1.SelectedItem.Text = ds.Tables[0].Rows[0][8].ToString();
                //checkbox1
                string[] b = new string[50];
                while (dr.Read())
                {
                    b = dr["Dept"].ToString().Split(',');
                }

                for (int i = 0; i <= b.Length - 1; i++)
                {
                    foreach (ListItem item in this.CheckBoxList1.Items)
                        if (item.Value == b[i])
                        {
                            item.Selected = true;
                            i++;
                        }
                } 
```

# android - 无法从 Android SQLite 数据库中检索数据

> ID：10779665
> 
> 赞同：0
> 
> 时间：2012-05-28T05:19:02.340
> 
> 标签：android, sqlite

嗨，我是 Android 开发的新手。我遇到的问题是我可以成功创建一个表并将数据添加到表中，但是我无法从数据库中检索数据并且 arraylist 总是返回空值。请帮我 ：-）

```
public class DatabaseHandler extends  SQLiteOpenHelper
{
// All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "BloodPressureRecorder";

    // Bloodpressure table name
    private static final String TABLE_BLOOD_PRESSURE = "BloodPressure";

    // Bloodpressure Table Columns names
    private static final String KEY_SYS = "sys";
    private static final String KEY_DIA = "dia";
    private static final String KEY_RATE = "rate";
    SQLiteDatabase db;

    public DatabaseHandler(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating tables
@Override
public void onCreate(SQLiteDatabase db) 
{
    String CREATE_BLOODPRESSURE_TABLE = "CREATE TABLE " + TABLE_BLOOD_PRESSURE +                            
           "(" + KEY_SYS + " INTEGER," + KEY_DIA + " INTEGER, "
            + KEY_RATE + " INTEGER" +  ")";
            db.execSQL(CREATE_BLOODPRESSURE_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
    // Drop older table if existed
           db.execSQL("DROP TABLE IF EXISTS " + TABLE_BLOOD_PRESSURE);

           // Create tables again
           onCreate(db);

}

// Adding new blood pressure
public void addBloodPressure(BloodPressureResult bloodPressure)
{
    SQLiteDatabase db = this.getReadableDatabase();

            ContentValues values = new ContentValues();
            values.put(KEY_SYS, bloodPressure.getSys()); // Systolic
            values.put(KEY_DIA, bloodPressure.getDia()); // Diastolic
            values.put(KEY_RATE, bloodPressure.getRate()); // Rate

            // Inserting Row
            db.insert(TABLE_BLOOD_PRESSURE, null, values);
            db.close(); // Closing database connection
}

// Getting all bloodpressures

public List<BloodPressureResult> getAllBloodPressure()
{
    List<BloodPressureResult> bloodP = new ArrayList<BloodPressureResult>();

    String selectQuery = "SELECT * FROM " + TABLE_BLOOD_PRESSURE;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if(cursor.moveToFirst())
    {
        do
        {
    BloodPressureResult bloodPressureResult = new BloodPressureResult();
    bloodPressureResult.setSys(Integer.parseInt(cursor.getString(0)));      
    bloodPressureResult.setDia(Integer.parseInt(cursor.getString(1)));                 
    bloodPressureResult.setRate(Integer.parseInt(cursor.getString(2)));     

    bloodP.add(bloodPressureResult);    

        }while(cursor.moveToNext());
    }
    cursor.close();
    return bloodP;
   }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:05:52.913

我注意到的第一件事是您正在`getString`尝试从光标中检索整数。你应该使用`getInt`.

其次，您没有作为主索引的“_id”列，因此您返回的游标将不适用于任何标准适配器。他们期望并要求光标中有一个“_id”列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:36:46.903

您确定将值插入表中吗？

我认为你应该在 addBloodPressure 函数中使用`SQLiteDatabase db = this.getWritableDatabase();`而不是。`SQLiteDatabase db = this.getReadableDatabase();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:44:20.603

试试这个，我给你修改

```
public List<BloodPressureResult> getAllBloodPressure(){

List<BloodPressureResult> bloodP = new ArrayList<BloodPressureResult>();

final String[] columns = new String[] { KEY_SYS, KEY_DIA, KEY_RATE };
SQLiteDatabase db = getReadableDatabase();
final Cursor cursor = db.query(TABLE_BLOOD_PRESSURE, columns, "", null, "", "", "", "");
if(cursor.getCount>0){

while (cursor.moveToNext()) {
BloodPressureResult bloodPressureResult = new BloodPressureResult();
bloodPressureResult.setSys(cursor.getInt(cursor.getColumnIndex(KEY_SYS)));      
bloodPressureResult.setDia(cursor.getInt(cursor.getColumnIndex(KEY_DIA)));                 
bloodPressureResult.setRate(cursor.getInt(cursor.getColumnIndex(KEY_RATE)));     
bloodP.add(bloodPressureResult);   
}
}
cursor.close();
db.close();} 
```

# c# - 如何在 C# 中通过单行删除数据表中的列？

> ID：10779668
> 
> 赞同：0
> 
> 时间：2012-05-28T05:19:34.997
> 
> 标签：c#, asp.net

我在包含数据的数据集中有一个数据表“A”，我需要从数据表“A”获取数据到另一个数据表“B”，而没有数据表“A”的第一列

基本上我需要删除数据表的第一列并将其合并到第二个数据表中。

但这应该使用单行来完成。

有人知道怎么做吗？？？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T05:35:54.750

试试这个：

```
Table.Columns.Remove("columnName"); 
```

或者

```
Table.Columns.RemoveAt(columnIndex); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:36:06.843

我找到了答案:)

```
DataSet.Table[0].Columns.Remove("Column_Name"); 
```

# javascript - 无法在 ModalPopupExtender 内输入文本框

> ID：10779671
> 
> 赞同：0
> 
> 时间：2012-05-28T05:19:47.083
> 
> 标签：javascript, asp.net, .net

我在 ModalPopupExtender 内有一个多行文本框，在第一次打开弹出窗口时我无法输入任何内容，如果我点击文本框的容器或重新打开我可以输入的 modalpopup.. 这个问题仅出现在 IE9 浏览器中。在其他浏览器中它很酷。帮助！我在到达一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:46:02.413

在这个我在我的代码中使用了一个很小的 ​​mce 脚本，在那个

```
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler);
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandler); 
```

因此，我发生了这个错误。删除这些行后，它工作正常。

# regex - 匹配服务器日志的正则表达式

> ID：10779678
> 
> 赞同：1
> 
> 时间：2012-05-28T05:20:29.623
> 
> 标签：regex, mapreduce

我需要从日志文件中识别服务器事件。我为此目的使用模式匹配。我的正则表达式不工作。请检查我的正则表达式是否错误或问题是否在其他地方。

样本输入是：-

```
2009/12/14 11:49:20.55                  00 STARTUP  Distributed Access Infrastructure V1.1.0   
2009/12/14 11:49:20.55                  01 STARTUP    Tools Access Server initialization started   
2009/12/14 11:49:20.55 TAS#####EC05003E 00 STARTUP  Environment:    
2009/12/14 11:49:20.55 TAS#####EC05003E 01 STARTUP    Job.....DAITAS     System...EC05      ASID.....003E    
2009/12/14 11:49:20.55 TAS#####EC05003E 02 STARTUP    User....USRT001    Group....SYS1      JobNum...STC00079
2009/12/14 11:49:20.55 TAS#####EC05003E 03 STARTUP    Local...GMT-08     GMT......2009/12/14 19:49 
```

* * *

我的脚本是：

```
public void map(Object key, Text value, Context context) throws IOException , InterruptedException{

        String input=value.toString();
        String delimiter= "[\n]";
        String[] tokens=input.split(delimiter);
        String sample = null;

        Pattern pattern;
        String regex= " \\s+\\d+\\s+[a-z,A-Z]+\\s ";
        pattern=Pattern.compile(regex);

        for(int i=0;i<tokens.length;i++){
            sample=tokens[i];
            System.out.println(sample.toString());
            System.out.println("enter here");

            Matcher match=pattern.matcher(sample);
            boolean val = match.matches();

            System.out.println("the conditions" + val);
            System.out.println("enter here 2");
            if(val){
                System.out.println("the regex is found" + val);
                logEvent.set(sample);
                System.out.println("the value of logEvent is "+ logEvent);
            }
            else{
                logInformation.set(sample);
                System.out.println("the log informaTION" + logInformation);
            }
        context.write(logEvent, logInformation); 
```

我需要认识——启动

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:31:30.253

**试试这个**

```
try {
    Regex regexObj = new Regex(@"(?im)\s+(?<event>\d+\s+[a-z]+)\s+(?<details>[^\r\n]+)$");
    Match matchResults = regexObj.Match(subjectString);
    while (matchResults.Success) {
        for (int i = 1; i < matchResults.Groups.Count; i++) {
            Group groupObj = matchResults.Groups[i];
            if (groupObj.Success) {
                // matched text: groupObj.Value
                // match start: groupObj.Index
                // match length: groupObj.Length
            } 
        }
        matchResults = matchResults.NextMatch();
    } 
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

**正则表达式解释**

```
@"
(?im)          # Match the remainder of the regex with the options: case insensitive (i); ^ and $ match at line breaks (m)
\s             # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
(?<event>      # Match the regular expression below and capture its match into backreference with name “event”
   \d             # Match a single digit 0..9
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   \s             # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   [a-z]          # Match a single character in the range between “a” and “z”
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\s             # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
(?<details>    # Match the regular expression below and capture its match into backreference with name “details”
   [^\r\n]        # Match a single character NOT present in the list below
                     # A carriage return character
                     # A line feed character
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
$              # Assert position at the end of a line (at the end of the string or before a line break character)
" 
```

* * *

希望这可以帮助。

# c - 如何在C中计时矩阵乘法？

> ID：10779684
> 
> 赞同：1
> 
> 时间：2012-05-28T05:21:42.980
> 
> 标签：c, matrix, matrix-multiplication

我想寻求帮助来测量下面矩阵乘法的执行时间。我在 Windows 中运行代码。我尝试使用[time.h](http://www.cplusplus.com/reference/clibrary/ctime/)，但无法测量。我必须把计时器放在哪里？

```
#include<stdio.h>
#include<math.h>
#include<time.h>

void main()
{
    int m1[10][10],i,j,k,m2[10][10],add[10][10],mult[10][10],r1,c1,r2,c2;
    /*double dif;
    time_t start, end;*/

    printf("Enter number of rows and columns of first matrix MAX 10\n");
    scanf("%d%d",&r1,&c1);
    printf("Enter number of rows and columns of second matrix MAX 10\n");
    scanf("%d%d",&r2,&c2);
    if(r2==c1)
    {
        printf("Enter rows and columns of First matrix \n");
        printf("Row wise\n");
        for(i=0;i<r1;i++)
        {
            for(j=0;j<c1;j++)
                scanf("%d",&m1[i][j]);
        }
        printf("You have entered the first matrix as follows:\n");
        for(i=0;i<r1;i++)
        {
            for(j=0;j<c1;j++)
                printf("%d\t",m1[i][j]);
            printf("\n");
        }
        printf("Enter rows and columns of Second matrix \n");
        printf("Again row wise\n");
        for(i=0;i<r2;i++)
        {
            for(j=0;j<c2;j++)
                scanf("%d",&m2[i][j]);
        }
        printf("You have entered the second matrix as follows:\n");
        for(i=0;i<r2;i++)
        {
            for(j=0;j<c2;j++)
                printf("%d\t",m2[i][j]);
            printf("\n");
        }
        /*time (&start);*/
        printf("Now we multiply both the above matrix \n");
        printf("The result of the multiplication is as follows:\n");
        /*a11xA11+a12xA21+a13xA31 a11xA12+a12xA22+a13xA32 a11xA13+a12xA23+a13xA33*/
        for(i=0;i<r1;i++)
        {
            for(j=0;j<c2;j++)
            {
                mult[i][j]=0;
                for(k=0;k<r1;k++)
                {
                    mult[i][j]+=m1[i][k]*m2[k][j];
                    /*mult[0][0]=m1[0][0]*m2[0][0]+m1[0][1]*m2[1][0]+m1[0][2]*m2[2][0];*/
                }
                printf("%d\t",mult[i][j]);
            }
            printf("\n");
            /*time (&end);
            dif (difftime (end, start);
            printf("Time of execution is : %f\n",dif)*/
        }
        getch();
    }
    else
    {
        printf("Matrix multiplication cannot be done");
    }
} 
```

我希望测量尽可能准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:28:51.743

我认为在调用`getch()`. 这将使您有最大的机会计数超过 1 秒。要获得一个体面的度量，您可能需要多次重复整个乘法（以便总经过时间以 10 秒为单位测量）。您也应该避免在循环中打印；打印时间可能会主导计算时间。

剩下的麻烦是`time()`系统调用提供了 1 秒的时间分辨率。您确实需要具有亚秒级分辨率的计时例程，例如[`gettimeofday()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/gettimeofday.html)（微秒）或[`clock_gettime()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_gettime.html)（纳秒）。请注意，分辨率和精度是不同的。（您可以改用[`clock()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock.html)标准 C，但通常提供的分辨率要低得多。从历史上看，也可以使用`ftime()`并且`times()`可以使用。这些提供了毫秒分辨率。）在 Windows 上还有其他系统调用可用。您仍然需要大量重复计数以使计时有用（1000 次、10,000 次或 1,000,000 次），因为执行 10x10 矩阵乘法并不需要很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:29:08.230

time 函数的精度，因此如果代码执行时间少于 1 秒，则无法获得正确的输出。在 Windows 上，我更喜欢使用[GetTickCount](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)

样本

```
#include "Windows.h"
int main (void)
{
  DWORD start,end;
  start = GetTickCount();
  //do something like Sleep(1000)
  end = GetTickCount();
  printf("elapse %d milliseconds\n", end - start);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:28:53.907

怎么用`clock()`？

```
#include <stdio.h>
#include <math.h>
#include <assert.h>
#include <time.h>

int main() {
 clock_t start, stop;
 double t = 0.0;

 /* Start timer */ 
 start = clock();    
 assert(start != -1);

 /* Perform calculations */

 /* Stop timer */
 stop = clock();
 t = (double) (stop-start)/CLOCKS_PER_SEC; 
 printf("Run time: %f\n", t);

 return(0);
} /* main */ 
```

# visual-studio - 使用 Resharper 导航到实际源

> ID：10779685
> 
> 赞同：3
> 
> 时间：2012-05-28T05:21:44.743
> 
> 标签：visual-studio, resharper

在 Visual Studio 中，当我 ctrl-click（或 ctrl-b）来自外部项目的符号时，Resharper 会将我带到源的反编译视图。

我在我的计算机上的不同文件夹中有一份实际源代码的副本。如何告诉 Resharper 这段代码的位置，以便我可以直接导航到它，而不是反编译源？

另外，我怎样才能确保我可以进入这个外部代码，而不是越过它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T07:30:12.220

在 ReSharper 选项中，导航到*外部源*选项卡并单击*高级...*按钮。这使您可以创建到您的源实际所在的文件夹的映射。

# sql - 如何在 WHERE 子句中使用 Split 函数改进包含 IN 的 sql？

> ID：10779689
> 
> 赞同：1
> 
> 时间：2012-05-28T05:22:13.227
> 
> 标签：sql, sql-server

假设我有一个查询，它将对数百万条记录进行操作。现在，我的 WHERE 子句中有这个，

```
WHERE Status IN (SELECT VALUE FROM SPLIT(@Status,',')) 
```

显然，*'SELECT VALUE FROM SPLIT(@Status,',')'*将对每一行进行操作。我需要改进这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:26:11.013

您可以使用当前的解决方案，也可以将其性能与`INNER JOIN`：

```
SELECT A.*
FROM YourTable A
INNER JOIN SPLIT(@Status,',') B
ON A.Status = B.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:26:17.673

如何先将`SPLIT`函数的结果`table variable/temp table`放在首位，然后再`INNER JOIN`对此进行处理？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T05:27:27.377

将字符串解压缩到临时表中，然后在查询中使用它。在临时表中的字段上建立索引应该会有所帮助。

```
create table #Split (Value varchar(10) primary key)

insert into #Split(Value)
select distinct Value
from SPLIT(@Status, ',')

select SomeCol
from YourTable
where Status in (select Value from #Split)

drop table #Split 
```

# iphone - 应用程序关闭时如何从后端发送电子邮件？

> ID：10779690
> 
> 赞同：0
> 
> 时间：2012-05-28T05:22:16.880
> 
> 标签：iphone, ios, ios5, iphone-sdk-3.0, xcode4.2

我正在制作一个电子邮件应用程序，用户可以在哪里设置发送电子邮件的时间？我可以在用户选择的时间在后台进程中发送电子邮件，但只有在应用程序打开时，在 UILocalNotification 的帮助下。但我想在用户关闭应用程序时发送电子邮件。例如：用户选择了 10 分钟后发送邮件的时间，并在此之前关闭了他的应用程序。

请帮帮我

以下是我的代码：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{

    NSLog(@"didReceiveLocalNotification");

    NSLog(@"\nNotification dic = %@ %@",notification.userInfo,notification.alertBody);

    dictUser=notification.userInfo;
    [dictUser retain];

    NSLog(@"dictuser124:%@",dictUser);
    [dictUser retain];

    if ([str_info4 isEqualToString:@"0"]) 
    {
        [self sendEMAIL];
    }
    else if ([str_info4 isEqualToString:@"1"]) 
    {
        [self sendSMS];
    }

}

-(void)sendEMAIL
{
    [dictUser retain];

    SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];

    //testMsg.fromEmail = @"Lexi mobile";//nimit51parekh@gmail.com

    testMsg.fromEmail = str_uname;
    NSLog(@"str_Uname=%@",testMsg.fromEmail);

    str_info = [str_info stringByReplacingOccurrencesOfString:@"," withString:@""];
    testMsg.toEmail = str_info;
    NSLog(@"autoemail=%@",testMsg.toEmail);

    testMsg.relayHost = @"smtp.gmail.com";

    testMsg.requiresAuth = YES;

    testMsg.login = str_uname;
    NSLog(@"autoelogin=%@",testMsg.login);

    testMsg.pass = str_password;
    NSLog(@"autopass=%@",testMsg.pass);

    testMsg.subject = @"Schedule Sms And Email";

    testMsg.wantsSecure = YES; 

    NSString *sendmsg=[[NSString alloc]initWithFormat:@"%@",str_info2];
    NSLog(@"automsg=%@",sendmsg);

    testMsg.delegate = self;

    NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/plain",kSKPSMTPPartContentTypeKey,

                             sendmsg,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

    testMsg.parts = [NSArray arrayWithObjects:plainPart,nil];

    [testMsg send];

   // [self DeleteRowAfterSending];
    [self performSelector:@selector(DeleteRowAfterSending) withObject:nil afterDelay:5.0];
}

-(void)messageSent:(SKPSMTPMessage *)message

{
    [message release];

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Success" message:@"Your email is sent successfully" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

    [alert show];

    [alert release];

    NSLog(@"delegate - message sent");

}

-(void)messageFailed:(SKPSMTPMessage *)message error:(NSError *)error{

    [message release];

    // open an alert with just an OK button

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Fail" message:@"Message sending failure" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

    [alert show];

    [alert release];

    NSLog(@"delegate - error(%d): %@", [error code], [error localizedDescription]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:28:19.217

据我所知，一旦应用程序关闭，您将无法进行任何操作。您可以在后端 SERVER 端执行此操作以自动执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:10:03.033

据我所知，我知道当应用程序关闭并且没有可用的应用程序实例时，它不可能执行某些操作。

我宁愿建议在后端使用 SERVER 来实现推送通知。您可以将用户必须发送电子邮件的时间保存在数据库中，并相应地编写用于在该时间发送电子邮件的 CRNS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:58:40.100

如果应用程序已经关闭，则无法“安排”从应用程序发送电子邮件。你最好的选择是在后端服务器上处理所有这些东西。该应用程序存储了消息应该发送到的人、内容、时间、地点。设置一个 cronjob 轮询需要发送的消息队列，如果预定时间匹配，则发送电子邮件。

# visual-foxpro - 在 vfp 中的无模式形式之间切换

> ID：10779697
> 
> 赞同：0
> 
> 时间：2012-05-28T05:23:07.707
> 
> 标签：visual-foxpro

我在 vfp 中创建了一个无模式表单并将 showwindow 属性设置为“0-in screen”。我在表单中放置了一个按钮，并在 click 方法中添加了“DO Form Form2”。Form2 又是一个无模式窗体，并且显示窗口属性设置为“0-in screen”。我运行第一个表单，然后单击按钮。出现第二种形式。问题是我似乎无法将焦点设置为/激活第一个表单，除非我先关闭第二个表单。它应该这样工作吗？如果是，为什么？这种情况有什么解决方法吗？

实际上，我的情况要复杂一些。我打开form1。如果我单击form1 中的按钮，会显示form2。两种形式都在_screen 中。如果我单击 form1 中的另一个按钮，Form3 会出现在 form2 中。我当然希望这是可能的。:)

感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:58:54.373

What you may be encountering is just that the two windows are the same size (or Form 2 is larger) and just physically overlapping form 1... unless both forms are set to maximize mode which takes the full screen viewing area.

That said, by default, when VFP runs a form, it basically has a variable name correlating to your form name... ie: "Form1" and "Form2" if those are the names of your actual forms (which I doubt, but may be for testing purposes).

So, now you are running your sample, form 1 is shown, click button, form 2 is shown. You can have a button on form 2, such as "go back to form 1" (as opposed to re-run another instance of form 1). In the click event of that, you can do the following

```
if wexist( "form1" )
   activate window form1
endif 
```

Similarly, in your main form, if you want to go back to form 2 again, but DO NOT want to recreate a second instance of the already open form, you could have that code something like

```
if wexist( "form2" )
   */ Show the already loaded form
   activate window form2
else
   */ Not loaded yet, do so now
   do form form2
endif 
```

As for showing one form inside another form, you can, but they can sometimes be a bit of a pain and just some getting used to... They are called "Formsets". To do so, you are basically pre-building all the forms into one overall "formset". Start by creating a single form. Then, from the "FORM" menu item, click the menu option to "Create Form Set". It will create a parent "formset" level for you and move the form itself into the child position. Then, from the "FORM" menu, you can choose "Add New Form" again, and add as many as you need. Note, when doing this, it builds all the forms, not just based on you explicitly doing a "do form" call to launch the next form. You can set titles per window, move the physical positions of them, etc... save and run the form... Then you can show/hide as you need to... but again, can be tricky.

ANOTHER ALTERNATIVE you may try is to work with "containers", and build yourself a class library. A container is nothing but a control that can have other controls. The benefit is that you can build it once and use it as a part of a form, or on multiple forms as needed without having to keep calling the same first form. For example, a container for address information. You may have a label/textbox for Company, Address1, Address2, City, etc and save it. Now, you want to have an invoice that has a ship-to and bill-to on it. You can use two instances of the same "layout" container class on the same form. They look and operate the same, you would just bind "control source" them to respective fields.

By doing this, you can also get into using "tabbed pages" and build a container of all things associated with one "page". Then put that container on the page instead of all controls individually all in one form... Takes more time up-front, but down-stream management can be a benefit too.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-31T01:34:56.083

如果您有两种无模式的表单，您可以尝试使用第二种表单制作一个应用程序，并使用 prg 来中间参数语句。示例：** 在第一种形式的方法中调用第二种：**

```
LOCAL  cvar

cvar="F_"+ALLTRIM(TRANSFORM(SYS(3)))

PUBLIC &cvar

&cvar=THISFORM && instance the first form in a public var (dont forget relese this in unload methode)

DO secondform.app WITH cvar

thisform.hide 
```

* * *

**在第二种形式 prg main ：**

```
PARAMETERS xparform

IF PARAMETERS() = 1

      DO FORM secondform WITH xparform

   endif 
```

* * *

**在第二种形式。**

创建属性以包含参数

在初始化方法中：

```
PARAMETERS xparsecod

IF PARAMETERS() > 0

    IF PARAMETERS() = 1

     thisform.formfirst=xparsecod

   endif

endif 
```

**在卸载：**

```
IF !EMPTY(thisform.formfirst)

    LOCAL cprince,oprince

    cprince=ALLTRIM(thisform.formfirst)

    oprince=&cprince && instanciate the firsform object

    IF TYPE("oprince")=="O"

       oprince.show && show the first form 

       oprince=null

    ENDIF 

ENDIF        
thisform.Release 
```

* * *

**这会强制第二种形式在完成后显示第一种形式不要忘记发布公共 var**

**尝试一些像：**

```
if type("namevar") <> "U"

   namevar=null

   release namevar

endif 
```

# c# - 损坏的性能计数器？

> ID：10779699
> 
> 赞同：12
> 
> 时间：2012-05-28T05:23:18.410
> 
> 标签：c#, .net, performancecounter

性能计数器是邪恶的。不要使用它们。

```
if(PerformanceCounterCategory.Exists("ILoveYou")  ) // is true
{
    PerformanceCounterCategory.Delete("ILoveYou"); 
    //throws exception The **configuration registry** key is invalid
} 
```

* * *

```
at System.Diagnostics.PerformanceCounterLib.RegisterFiles(String arg0, Boolean unregister)
at System.Diagnostics.PerformanceCounterLib.UnregisterCategory(String categoryName)
at System.Diagnostics.PerformanceCounterCategory.Delete(String categoryName)
at WindowsFormsApplication1.Program.SetupCategory() 
```

我发现的只是：http: [//blogs.msdn.com/b/oanapl/archive/2009/04/24/fix-corrupted-performance-counters.aspx](http://blogs.msdn.com/b/oanapl/archive/2009/04/24/fix-corrupted-performance-counters.aspx) （使用 LODCTR /R）

它没有帮助。因为我不知道他们在说什么文件。有人有其他想法吗？

PS我使用的是Windows XP SP3，可能是这个问题吗？我知道除非我取消页面文件，否则它应该完全支持性能计数器。

**为了明确这一点，我的问题是我无法卸载我的计数器。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:01:05.440

我的公司遇到了性能计数器经常损坏的问题。如果实际计数器损坏是一个问题，您可以通过以下方式检查损坏的性能计数器：

1.  即将`start | run | perfmon`
2.  点击确定
3.  单击右侧面板中工具栏上的添加按钮（“+”号按钮）
4.  确保形式对象下拉菜单包含项目而不仅仅是数字

如果计数器是数字或空白：*   在以下位置找到并重命名这 3 个文件`%windir%\system32`：
    *   `Perfc009.dat`
    *   `Perfh009.dat`
    *   `Perfi009.dat`*   插入 Windows XP 安装 CD*   浏览到他们的 CD 驱动器并进入 I386 文件夹（即`D:\I386`）*   在此处找到相同的文件*   将它们从 CD 复制并粘贴回 System32*   重新启动计算机。

这是我们为该问题找到的最佳解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:43:00.430

如果您有类似的机器，您可以运行 lodctr /S:mycounters.ini 将所有计数器导出到“mycounters.ini”，然后使用 lodctr /R:mycounters.ini 在损坏的机器上导入它们。但请记住，我只在两台机器上使用过这个程序，我知道它们在性能计数器方面几乎相同。我不知道不匹配的机器是否会出现问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-07T14:23:38.033

为了我，

重新创建所有性能计数器就足够了

```
lodctr /R 
```

从具有管理权限的命令行（根据[this](http://support.microsoft.com/kb/300956/en-us "这")，但跳过手动重新创建基本性能计数器）

在检查注册表中的性能计数器列表时

```
 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib\009 
```

事实证明，那个关键 startet 的内容有*很多*空格。在该键的末尾有一个具有高计数器索引的性能计数器列表。调用上述命令后，密钥也正确包含基本性能计数器（并且不再包含前导空格）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T22:04:27.303

性能计数器有利于速度而不是可用性和正确性。XP 和更高版本的 Windows 中的性能计数器很容易被破坏。例如，在您的应用程序启动时创建一个新的性能计数器类别并在关闭时将其删除是一种非常糟糕的做法。不断更改性能计数器类别肯定会导致性能计数器损坏。

我只会在类别尚不存在时创建类别并将其保留在那里，直到您的应用程序被卸载。在什么情况下要删除性能计数器类别？我可以给你的基本答案是除非你需要，否则不要删除性能计数器类别。

如何通过 lodctr 或 EXCTRLST 重新创建性能计数器的一个很好的链接来自[RedGate](http://www.red-gate.com/supportcenter/content/knowledgebase/ANTS_Performance_Profiler/KB200810000316)。你可以[在这里](http://download.microsoft.com/download/win2000platform/exctrlst/1.00.0.1/nt5/en-us/exctrlst_setup.exe)下载。

**编辑1**

首先，您需要找到一个可以解决您的问题的工具。[Exctrlst](http://technet.microsoft.com/en-us/library/cc737958.aspx)为您提供了一个 UI 来重新启用损坏的性能计数器。

如果这确实有效，您现在可以使用 procmon 检查在修复操作期间写入了哪些注册表项，并将其用作自动修复功能的输入。

# c++ - 使用 OpenGL 的 C++ 中的粒子

> ID：10779700
> 
> 赞同：1
> 
> 时间：2012-05-28T05:23:19.860
> 
> 标签：c++, opengl, particles

我想使用 OpenGL 在 C++ 中启动一个基本的粒子系统。我为此编写了一个算法，但我不明白如何启动它。

我面临的问题是我可以打印位置和速度更新，但我不知道如何使用 OpenGL 直观地显示它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T05:38:58.910

我希望您正在尝试以下内容：

*   有一个结构（C++ 结构或类）来表示一个粒子。该结构包含：

    *   粒子位置 (x,y,z)
    *   粒子速度（Vx、Vy、Vz）
    *   粒子加速（Ax，Ay，Az）//你*可能也*需要的东西..
    *   绘制函数来进行粒子的绘制。
*   有一个这种结构的数组。根据需要初始化速度、位置和加速度。

*   在单独的线程中（或在 repaint 事件中，用于启动）执行以下操作：

    *   对于每个粒子（数组中的元素）执行：

        *   粒子[索引].velocityX += 粒子[索引].accelerationX
        *   粒子[索引].velocityY += 粒子[索引].accelerationY
        *   粒子[索引].velocityZ += 粒子[索引].accelerationZ

        *   粒子[索引].locationX += 粒子[索引].velocityX

        *   粒子[索引].locationY += 粒子[索引].velocityY
        *   粒子[索引].locationZ += 粒子[索引].velocityZ

        //翻译到位置并绘制..

        *   使用 glTranslated(particle[index].locationX,particle[index].locationY,particle[index].locationZ)

# java - 在 jfreechart 的 x 轴上设置时间

> ID：10779701
> 
> 赞同：0
> 
> 时间：2012-05-28T05:23:23.183
> 
> 标签：java, jsp, jfreechart

我正在使用 jfreeChart，我想在图表的 x 轴上显示小时数（以 24 小时格式）

是否有任何图书馆或课程可以帮助我在图表上绘制小时数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:22:04.980

使用*ChartFactory.createTimeSeriesChart*。提供给此方法的数据集采用*TimeSeries*类型的系列。*TimeSeries*的构造函数采用[时间段](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/time/package-summary.html)的参数 使用*Hour*类来生成每小时数据的图表。在系列中，添加（日期+小时）的时间和用于绘图的数据

# java - Java Eclipse - 当我选择文件/新建时，我没有看到“Android 应用程序”

> ID：10779703
> 
> 赞同：1
> 
> 时间：2012-05-28T05:23:27.690
> 
> 标签：java, android, eclipse

试图抹去我的 Java 技能并安装了 Android SDK、JDK(x64) 和 Eclipse(x64)，并认为我会从一个 Android“Hello, world”应用程序开始缓慢。

[我按照这里](http://androidcodemonkey.blogspot.com/2010/01/how-to-setup-android-development_23.html)和[这里](http://www.android-app-market.com/android-development-environment-setup.html)的教程

我能够配置和打开 android 虚拟设备管理器，但是当我转到文件和新建时，我没有看到“Android 应用程序”作为选项。有没有我错过的设置？

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:26:41.073

转到文件 --> 新建 --> 其他 --> 在向导类型 Android 下，您将在那里看到 Android 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:25:17.860

如果您在新中找不到它，请向下移动您可以看到其他人的选项，然后您就可以找到它。

# android - 模拟被拒绝的呼叫android-eclipse indigo

> ID：10779711
> 
> 赞同：1
> 
> 时间：2012-05-28T05:24:29.020
> 
> 标签：android, eclipse, android-emulator, eclipse-indigo

我的应用程序拨打一个保存的号码，这个号码必然会拒绝来电。如何在模拟器中模拟被拒绝的拨出电话？我正在使用 Eclipse 靛蓝 IDE。所有的动作都是完全程序驱动的。一旦呼叫被拒绝，就必须运行一些进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:05:12.093

您可以使用 2 个模拟器，拨打其中一个的端口号（即 5556），拒绝此模拟器中的呼叫，它将在发出呼叫的模拟器上结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:39:07.693

您可以使用 DDMS 透视图来实现这一点。转到 DDMS -> 模拟器控制 -> 输入您已经保存在模拟器中的来电号码并拨打电话。

```
public class PhoneStateListenerActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    PhoneStateListener listener;
    TelephonyManager manager;

    manager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
    listener = new PhoneStateListener(){
        public void onCallStateChanged(int state, String incomingNumber) {
            String stateString = "N/A";
            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:
              stateString = "Idle";
              break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
              stateString = "Off Hook";
              break;
            case TelephonyManager.CALL_STATE_RINGING:
              stateString = "Ringing";
              break;
            }
            Toast.makeText(PhoneStateListenerActivity.this, stateString, Toast.LENGTH_SHORT)
            .show();
        }           
    };

    manager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);
} 
```

}

# salesforce - 我们如何覆盖批准相关列表中的批准按钮

> ID：10779714
> 
> 赞同：1
> 
> 时间：2012-05-28T05:24:51.860
> 
> 标签：salesforce, apex-code

我想覆盖批准相关列表中的批准按钮。有没有办法我们可以做到？这个想法是在单击批准按钮时删除具有某些条件的一些记录。我想在单击批准按钮时运行顶点代码，然后提交记录以供批准。

任何实现它的指针都会有所帮助。

谢谢

普拉迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T05:31:25.487

我终于做了一个解决方法来完成这项工作。我没有覆盖批准按钮，而是使用批准流程和触发器来完成这项工作

这就是我所做的。

1.  在对象中添加了一个名为 SentForApproval（复选框）的新字段，确保它不在任何页面布局中，因此不会有人意外选中或取消选中此字段。
2.  在批准过程中，对上述字段进行了字段更新，将其更改为 true。
3.  此字段更新将触发更新触发器。
4.  在您的触发器中检查此字段是否已更新，执行您想要在触发器中执行的操作。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T05:44:22.557

不，不幸的是，要这样做，您必须通过强制用户通过自定义按钮流来完全覆盖批准过程，并且您不能将该自定义按钮放在批准历史列表中或覆盖批准/拒绝链接。自几年前最初实施以来，Salesforce 并没有显着增强审批流程的可定制性。

# git - 集市中 Git-blame 的等价物是什么？

> ID：10779721
> 
> 赞同：1
> 
> 时间：2012-05-28T05:25:44.833
> 
> 标签：git, bazaar, blame

`git blame`in bazaar是否有等价物？如果是这样，这样做的命令是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:53:24.350

它是

```
bzr annotate 
```

碰巧，`blame`是`annotate`.

我是 git 用户，而不是 bazaar 用户，但由于`bzr`为通用`git`命令提供了此别名，因此这可能是查找给定命令等效项的`bzr some-git-command`好方法。`bzr``git`

（顺便说一句，`bzr praise`也是 . 的别名`bzr annotate`。）

# vim - 如何按“ l _" 在 Vim 中？

> ID：10779725
> 
> 赞同：3
> 
> 时间：2012-05-28T05:26:16.363
> 
> 标签：vim

在其中一个 vim 配置文件中，我注意到这个键盘映射 `map <C-L> <C-W>l<C-W>_`据说是为了更容易在选项卡和窗口中移动。这意味着什么？最后那个下划线是干什么用的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:53:48.283

该命令`map <C-L> <C-W>l<C-W>_` 映射`Ctrl-L`到`Ctrl-W`, ``l``, `Ctrl-W`, `_`.

您只需按 即可调用此绑定`Ctrl-L`。要调用它绑定的内容，您可以输入`Ctrl-W`, 然后``l``，然后`Ctrl-W`再输入，最后`_`输入（在美式键盘上是 shift-hyphen）。这是两个单独的绑定，`<C-W>l`将光标移动到右侧的窗口，并将`<C-W>_`当前窗口的大小调整为最大可能的垂直大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T05:56:03.997

`Ctrl`+ `w``l``Ctrl`+`w``_`键序列有点太长，所以有人创建了一个快捷方式（Vim 中的“ ping `map`”）：`Ctrl`+ `L`。

`<C-w>l<C-w>_`将光标移动到右侧的窗口 ( `<C-w>l`) 并将其垂直最大化 ( `<C-w>_`)。

映射始终遵循相同的结构：

1.  `map`（或`imap`用于*插入*模式映射，`nmap`用于*普通*模式映射等）

2.  一些空格

3.  你想要的捷径，在这里`<C-L>`

4.  一些空格

5.  快捷方式触发的命令序列

有关`:help windows`窗口管理`:help mapping`的更多信息和有关映射的更多信息，请参阅。

# jquery - Servlet 在索引 [0] 上接收完整数组

> ID：10779727
> 
> 赞同：0
> 
> 时间：2012-05-28T05:26:32.930
> 
> 标签：jquery, arrays, servlets

我正在将数组从 jQuery 发送到 Servlet。对于我使用[Datatables](http://datatables.net/) API 的表。以下是代码片段：

**查询：**

```
$("#savePO").click(function(){

    var oTable = $('#npoGridView').dataTable();
    var  getdata = oTable.fnGetData()

    $.post("AddPO" ,{
        getData: escape(getdata)
    },
    function (data)
    {   
        alert(data);
    });

}); 
```

**小服务程序：**

```
String []getResult = request.getParameterValues("getData"); 
```

Servlet 接收索引 [0] 上的所有数据，（即 getResult[0] ），偶数行多于一；

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:02:03.220

您应该使用传统的[参数序列化](http://api.jquery.com/jQuery.param/)风格。使用 $.ajax 调用你可以简单地做：

```
$.ajax({
  type: 'POST',
  url: "AddPO",
  data: escape(getdata),
  traditional: true,
  success: function (data)
    {   
        alert(data);
    }
}); 
```

参考：

*   [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   [http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)
*   [使用 jQuery 1.4 在 ajax 调用中传递数组](https://stackoverflow.com/questions/2195471/passing-arrays-in-ajax-call-using-jquery-1-4)

# php - 多张图片上传，全部显示，全部拖放

> ID：10779730
> 
> 赞同：1
> 
> 时间：2012-05-28T05:26:59.223
> 
> 标签：php, javascript, jquery, ajax, image-uploading

我是 Jquery 和 ajax 的新手。

我需要将多个图像上传到服务器文件夹并将详细信息存储在数据库表中。上传后，我需要在数据库中显示所有设置为“活动”的图像。（我查看了许多不适合我的代码）

之后，我需要将一些图像拖动到一个区域，并且还需要将拖动的图像信息存储在另一个表中。

有人有什么想法吗？请帮帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-30T00:50:37.080

现在 Dropzone.js 是最好的 js 插件，可以通过拖放上传多张图片。

官方网站。[https://www.dropzonejs.com/](https://www.dropzonejs.com/)

演示的完整示例在这里。

[https://learncodeweb.com/web-development/drag-drop-images-with-bootstrap-4-and-reorder-using-php-jquery-and-ajax/](https://learncodeweb.com/web-development/drag-drop-images-with-bootstrap-4-and-reorder-using-php-jquery-and-ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:04:55.203

要上传多个图像，您可以使用此脚本。通过使用单个浏览按钮，您可以上传多张图片

```
$(function(){

    var btnUpload=$('#photo_0'); // id of  browse button
    new AjaxUpload(btnUpload, {
        action: 'url_to_upload_function',
        name: 'uploadfile',
        onSubmit: function(file, ext){
             if (! (ext && /^(jpg|png|jpeg|gif|JPG|PNG|GIF|JPEG)$/.test(ext))){ 
                $("#photo_div1").html('Only JPG,PNG,GIF files are allowed'); //
                return false;
            }
            var path="<?=base_url()?>images/wait.gif"; //losding image
            $("#photo_div1").html("<img src="+path+" width='32' height='32' style='border:#b6b6b6 solid 1px;'>"); 
        },
        onComplete: function(file, response){
            response = jQuery.trim(response);
            if(response=="error")
            {
                $("#photo_error").css("display","block");
                $("#upload_photo1").html("");   

            }
            else if(response!="error")
            {
                $("#photo_error").css("display","none");

                $("#photo_div1").html("");
            var path="uploads/"+response; //echo the image name from the upload function
            var img="<table><tr><td ><img src="+path+" style='border:#b6b6b6 solid 1px;'></td></tr></table>";
            $("#img_div1").html(img);// display the image in a div it will display only one image. If you want to add more you can code according to that by using append or something like that

            $("#upload_photo1").val(response);
            $("#photo_hid1").val(response);

            } else
            {
            alert("error");
            }
        }
    });
}); 
```

您还必须包含此文件 ajaxupload.js

```
/**
 * Ajax upload
 * Project page - http://valums.com/ajax-upload/
 * Copyright (c) 2008 Andris Valums, http://valums.com
 * Licensed under the MIT license (http://valums.com/mit-license/)
 * Version 3.5 (23.06.2009)
 */

/**
 * Changes from the previous version:
 * 1\. Added better JSON handling that allows to use 'application/javascript' as a response
 * 2\. Added demo for usage with jQuery UI dialog
 * 3\. Fixed IE "mixed content" issue when used with secure connections
 * 
 * For the full changelog please visit: 
 * http://valums.com/ajax-upload-changelog/
 */

(function(){

var d = document, w = window;

/**
 * Get element by id
 */ 
function get(element){
    if (typeof element == "string")
        element = d.getElementById(element);
    return element;
}

/**
 * Attaches event to a dom element
 */
function addEvent(el, type, fn){
    if (w.addEventListener){
        el.addEventListener(type, fn, false);
    } else if (w.attachEvent){
        var f = function(){
          fn.call(el, w.event);
        };          
        el.attachEvent('on' + type, f)
    }
}

/**
 * Creates and returns element from html chunk
 */
var toElement = function(){
    var div = d.createElement('div');
    return function(html){
        div.innerHTML = html;
        var el = div.childNodes[0];
        div.removeChild(el);
        return el;
    }
}();

function hasClass(ele,cls){
    return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}
function addClass(ele,cls) {
    if (!hasClass(ele,cls)) ele.className += " "+cls;
}
function removeClass(ele,cls) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
}

// getOffset function copied from jQuery lib (http://jquery.com/)
if (document.documentElement["getBoundingClientRect"]){
    // Get Offset using getBoundingClientRect
    // http://ejohn.org/blog/getboundingclientrect-is-awesome/
    var getOffset = function(el){
        var box = el.getBoundingClientRect(),
        doc = el.ownerDocument,
        body = doc.body,
        docElem = doc.documentElement,

        // for ie 
        clientTop = docElem.clientTop || body.clientTop || 0,
        clientLeft = docElem.clientLeft || body.clientLeft || 0,

        // In Internet Explorer 7 getBoundingClientRect property is treated as physical,
        // while others are logical. Make all logical, like in IE8.

        zoom = 1;
        if (body.getBoundingClientRect) {
            var bound = body.getBoundingClientRect();
            zoom = (bound.right - bound.left)/body.clientWidth;
        }
        if (zoom > 1){
            clientTop = 0;
            clientLeft = 0;
        }
        var top = box.top/zoom + (window.pageYOffset || docElem && docElem.scrollTop/zoom || body.scrollTop/zoom) - clientTop,
        left = box.left/zoom + (window.pageXOffset|| docElem && docElem.scrollLeft/zoom || body.scrollLeft/zoom) - clientLeft;

        return {
            top: top,
            left: left
        };
    }

} else {
    // Get offset adding all offsets 
    var getOffset = function(el){
        if (w.jQuery){
            return jQuery(el).offset();
        }       

        var top = 0, left = 0;
        do {
            top += el.offsetTop || 0;
            left += el.offsetLeft || 0;
        }
        while (el = el.offsetParent);

        return {
            left: left,
            top: top
        };
    }
}

function getBox(el){
    var left, right, top, bottom;   
    var offset = getOffset(el);
    left = offset.left;
    top = offset.top;

    right = left + el.offsetWidth;
    bottom = top + el.offsetHeight;     

    return {
        left: left,
        right: right,
        top: top,
        bottom: bottom
    };
}

/**
 * Crossbrowser mouse coordinates
 */
function getMouseCoords(e){     
    // pageX/Y is not supported in IE
    // http://www.quirksmode.org/dom/w3c_cssom.html         
    if (!e.pageX && e.clientX){
        // In Internet Explorer 7 some properties (mouse coordinates) are treated as physical,
        // while others are logical (offset).
        var zoom = 1;   
        var body = document.body;

        if (body.getBoundingClientRect) {
            var bound = body.getBoundingClientRect();
            zoom = (bound.right - bound.left)/body.clientWidth;
        }

        return {
            x: e.clientX / zoom + d.body.scrollLeft + d.documentElement.scrollLeft,
            y: e.clientY / zoom + d.body.scrollTop + d.documentElement.scrollTop
        };
    }

    return {
        x: e.pageX,
        y: e.pageY
    };      

}
/**
 * Function generates unique id
 */     
var getUID = function(){
    var id = 0;
    return function(){
        return 'ValumsAjaxUpload' + id++;
    }
}();

function fileFromPath(file){
    return file.replace(/.*(\/|\\)/, "");           
}

function getExt(file){
    return (/[.]/.exec(file)) ? /[^.]+$/.exec(file.toLowerCase()) : '';
}           

// Please use AjaxUpload , Ajax_upload will be removed in the next version
Ajax_upload = AjaxUpload = function(button, options){
    if (button.jquery){
        // jquery object was passed
        button = button[0];
    } else if (typeof button == "string" && /^#.*/.test(button)){                   
        button = button.slice(1);               
    }
    button = get(button);   

    this._input = null;
    this._button = button;
    this._disabled = false;
    this._submitting = false;
    // Variable changes to true if the button was clicked
    // 3 seconds ago (requred to fix Safari on Mac error)
    this._justClicked = false;
    this._parentDialog = d.body;

    if (window.jQuery && jQuery.ui && jQuery.ui.dialog){
        var parentDialog = jQuery(this._button).parents('.ui-dialog');
        if (parentDialog.length){
            this._parentDialog = parentDialog[0];
        }
    }           

    this._settings = {
        // Location of the server-side upload script
        action: 'upload.php',           
        // File upload name
        name: 'userfile',
        // Additional data to send
        data: {},
        // Submit file as soon as it's selected
        autoSubmit: true,
        // The type of data that you're expecting back from the server.
        // Html and xml are detected automatically.
        // Only useful when you are using json data as a response.
        // Set to "json" in that case. 
        responseType: false,
        // When user selects a file, useful with autoSubmit disabled            
        onChange: function(file, extension){},                  
        // Callback to fire before file is uploaded
        // You can return false to cancel upload
        onSubmit: function(file, extension){},
        // Fired when file upload is completed
        // WARNING! DO NOT USE "FALSE" STRING AS A RESPONSE!
        onComplete: function(file, response) {}
    };

    // Merge the users options with our defaults
    for (var i in options) {
        this._settings[i] = options[i];
    }

    this._createInput();
    this._rerouteClicks();
}

// assigning methods to our class
AjaxUpload.prototype = {
    setData : function(data){
        this._settings.data = data;
    },
    disable : function(){
        this._disabled = true;
    },
    enable : function(){
        this._disabled = false;
    },
    // removes ajaxupload
    destroy : function(){
        if(this._input){
            if(this._input.parentNode){
                this._input.parentNode.removeChild(this._input);
            }
            this._input = null;
        }
    },              
    /**
     * Creates invisible file input above the button 
     */
    _createInput : function(){
        var self = this;
        var input = d.createElement("input");
        input.setAttribute('type', 'file');
        input.setAttribute('name', this._settings.name);
        var styles = {
            'position' : 'absolute'
            ,'margin': '-5px 0 0 -175px'
            ,'padding': 0
            ,'width': '220px'
            ,'height': '30px'
            ,'fontSize': '14px'                             
            ,'opacity': 0
            ,'cursor': 'pointer'
            ,'display' : 'none'
            ,'zIndex' :  2147483583 //Max zIndex supported by Opera 9.0-9.2x 
            // Strange, I expected 2147483647                   
        };
        for (var i in styles){
            input.style[i] = styles[i];
        }

        // Make sure that element opacity exists
        // (IE uses filter instead)
        if ( ! (input.style.opacity === "0")){
            input.style.filter = "alpha(opacity=0)";
        }

        this._parentDialog.appendChild(input);

        addEvent(input, 'change', function(){
            // get filename from input
            var file = fileFromPath(this.value);    
            if(self._settings.onChange.call(self, file, getExt(file)) == false ){
                return;             
            }                                                       
            // Submit form when value is changed
            if (self._settings.autoSubmit){
                self.submit();                      
            }                       
        });

        // Fixing problem with Safari
        // The problem is that if you leave input before the file select dialog opens
        // it does not upload the file.
        // As dialog opens slowly (it is a sheet dialog which takes some time to open)
        // there is some time while you can leave the button.
        // So we should not change display to none immediately
        addEvent(input, 'click', function(){
            self.justClicked = true;
            setTimeout(function(){
                // we will wait 3 seconds for dialog to open
                self.justClicked = false;
            }, 3000);           
        });     

        this._input = input;
    },
    _rerouteClicks : function (){
        var self = this;

        // IE displays 'access denied' error when using this method
        // other browsers just ignore click()
        // addEvent(this._button, 'click', function(e){
        //   self._input.click();
        // });

        var box, dialogOffset = {top:0, left:0}, over = false;                          
        addEvent(self._button, 'mouseover', function(e){
            if (!self._input || over) return;
            over = true;
            box = getBox(self._button);

            if (self._parentDialog != d.body){
                dialogOffset = getOffset(self._parentDialog);
            }   
        });

        // we can't use mouseout on the button,
        // because invisible input is over it
        addEvent(document, 'mousemove', function(e){
            var input = self._input;            
            if (!input || !over) return;

            if (self._disabled){
                removeClass(self._button, 'hover');
                input.style.display = 'none';
                return;
            }   

            var c = getMouseCoords(e);

            if ((c.x >= box.left) && (c.x <= box.right) && 
            (c.y >= box.top) && (c.y <= box.bottom)){           
                input.style.top = c.y - dialogOffset.top + 'px';
                input.style.left = c.x - dialogOffset.left + 'px';
                input.style.display = 'block';
                addClass(self._button, 'hover');                
            } else {        
                // mouse left the button
                over = false;
                if (!self.justClicked){
                    input.style.display = 'none';
                }
                removeClass(self._button, 'hover');
            }           
        });         

    },
    /**
     * Creates iframe with unique name
     */
    _createIframe : function(){
        // unique name
        // We cannot use getTime, because it sometimes return
        // same value in safari :(
        var id = getUID();

        // Remove ie6 "This page contains both secure and nonsecure items" prompt 
        // http://tinyurl.com/77w9wh
        var iframe = toElement('<iframe src="javascript:false;" name="' + id + '" />');
        iframe.id = id;
        iframe.style.display = 'none';
        d.body.appendChild(iframe);         
        return iframe;                      
    },
    /**
     * Upload file without refreshing the page
     */
    submit : function(){
        var self = this, settings = this._settings; 

        if (this._input.value === ''){
            // there is no file
            return;
        }

        // get filename from input
        var file = fileFromPath(this._input.value);         

        // execute user event
        if (! (settings.onSubmit.call(this, file, getExt(file)) == false)) {
            // Create new iframe for this submission
            var iframe = this._createIframe();

            // Do not submit if user function returns false                                     
            var form = this._createForm(iframe);
            form.appendChild(this._input);

            form.submit();

            d.body.removeChild(form);               
            form = null;
            this._input = null;

            // create new input
            this._createInput();

            var toDeleteFlag = false;

            addEvent(iframe, 'load', function(e){

                if (// For Safari
                    iframe.src == "javascript:'%3Chtml%3E%3C/html%3E';" ||
                    // For FF, IE
                    iframe.src == "javascript:'<html></html>';"){                       

                    // First time around, do not delete.
                    if( toDeleteFlag ){
                        // Fix busy state in FF3
                        setTimeout( function() {
                            d.body.removeChild(iframe);
                        }, 0);
                    }
                    return;
                }               

                var doc = iframe.contentDocument ? iframe.contentDocument : frames[iframe.id].document;

                // fixing Opera 9.26
                if (doc.readyState && doc.readyState != 'complete'){
                    // Opera fires load event multiple times
                    // Even when the DOM is not ready yet
                    // this fix should not affect other browsers
                    return;
                }

                // fixing Opera 9.64
                if (doc.body && doc.body.innerHTML == "false"){
                    // In Opera 9.64 event was fired second time
                    // when body.innerHTML changed from false 
                    // to server response approx. after 1 sec
                    return;             
                }

                var response;

                if (doc.XMLDocument){
                    // response is a xml document IE property
                    response = doc.XMLDocument;
                } else if (doc.body){
                    // response is html document or plain text
                    response = doc.body.innerHTML;
                    if (settings.responseType && settings.responseType.toLowerCase() == 'json'){
                        // If the document was sent as 'application/javascript' or
                        // 'text/javascript', then the browser wraps the text in a <pre>
                        // tag and performs html encoding on the contents.  In this case,
                        // we need to pull the original text content from the text node's
                        // nodeValue property to retrieve the unmangled content.
                        // Note that IE6 only understands text/html
                        if (doc.body.firstChild && doc.body.firstChild.nodeName.toUpperCase() == 'PRE'){
                            response = doc.body.firstChild.firstChild.nodeValue;
                        }
                        if (response) {
                            response = window["eval"]("(" + response + ")");
                        } else {
                            response = {};
                        }
                    }
                } else {
                    // response is a xml document
                    var response = doc;
                }

                settings.onComplete.call(self, file, response);

                // Reload blank page, so that reloading main page
                // does not re-submit the post. Also, remember to
                // delete the frame
                toDeleteFlag = true;

                // Fix IE mixed content issue
                iframe.src = "javascript:'<html></html>';";                                     
            });

        } else {
            // clear input to allow user to select same file
            // Doesn't work in IE6
            // this._input.value = '';
            d.body.removeChild(this._input);                
            this._input = null;

            // create new input
            this._createInput();                        
        }
    },      
    /**
     * Creates form, that will be submitted to iframe
     */
    _createForm : function(iframe){
        var settings = this._settings;

        // method, enctype must be specified here
        // because changing this attr on the fly is not allowed in IE 6/7       
        var form = toElement('<form method="post" enctype="multipart/form-data"></form>');
        form.style.display = 'none';
        form.action = settings.action;
        form.target = iframe.name;
        d.body.appendChild(form);

        // Create hidden input element for each data key
        for (var prop in settings.data){
            var el = d.createElement("input");
            el.type = 'hidden';
            el.name = prop;
            el.value = settings.data[prop];
            form.appendChild(el);
        }           
        return form;
    }   
};
})(); 
```

对于拖放，您需要编写另一个功能，您可以参考[这个网站](http://jqueryui.com/demos/draggable/)或[这个](http://www.elated.com/res/File/articles/development/javascript/jquery/drag-and-drop-with-jquery-your-essential-guide/draggable.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T06:02:01.400

[http://www.plupload.com/example_queuewidget.php](http://www.plupload.com/example_queuewidget.php) 在这里您可以找到一个不错的插件，可以帮助您上传多张图片。我已经使用过它并且对我来说效果很好。

# jquery - 显示图像标题以图像为中心并使用 css 或 jquery 居中？

> ID：10779731
> 
> 赞同：1
> 
> 时间：2012-05-28T05:27:04.320
> 
> 标签：jquery, css

试图在图像上添加居中的标题，几乎就在那里。请参阅：[http](http://cssdesk.com/2wreQ) : //cssdesk.com/2wreQ 但我希望并且无法将文本段落（p.wp-caption-text to）居中。无法完成它，希望有人能指出我正确的方向来使用 css 或 jquery 来完成它。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T07:14:00.903

你让它变得比它需要的更复杂。jQuery 完全没有必要。

[我的建议付诸行动。](http://cssdesk.com/jegSJ)我已经删除了`.wp-caption`元素上的内联宽度，因为这不是一个好习惯，而且它使事情变得复杂。您不应该需要任何`z-index`值，并且`position: absolute`实际上是在创建您的问题，因为它没有定义的宽度。为了使标题文本以图像为中心，标题文本元素需要拥有图像的整个宽度。您可以通过简单地添加`width: 140px;`来完成此操作，`.wp-caption-text`但随后您会遇到其他问题。

通过删除`position: absolute;`，段落将返回使用可用的全宽（在应用边距之后），并且`text-align: center;`应用到的属性`.wp-caption`完成其工作。对边距和填充的更改主要是为了简化 CSS 并使其更易于使用，但它们还应该解决您以后可能会遇到的一些浏览器问题。我还应用了一些没有争议的格式。即，我对属性进行了重新排序，删除了重复项，添加了间距。

HTML

```
<div id="content">
<div id="attachment_24" class="wp-caption alignnone"><a href="http://zoekmachineoptimalisatielab.nl/wp-content/uploads/2012/05/Koala.jpg"><img class="size-thumbnail wp-image-24" title="Koala" src="http://zoekmachineoptimalisatielab.nl/wp-content/uploads/2012/05/Koala-150x150.jpg" alt="" width="150" height="150" /></a><p class="wp-caption-text">Koala caption</p></div>
</div><!-- .entry-content --> 
```

CSS

```
#content .wp-caption {
  background: #F1F1F1;
  line-height: 18px;
  margin-bottom: 20px;
  overflow: hidden;
  padding: 9px 0;
  text-align: center;
  width: 168px;
}
#content .wp-caption a {
  display: block;
  margin: 0 9px;
}
#content .wp-caption-text {
  background-color: #FFFFFF;
  border: 1px solid #CACACA;
  color: #888888;
  font-size: 12px;
  font-weight: bold;
  margin: -12px 9px 0;
  padding: 1px 4px;
  position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:43:26.590

我假设您的附件_24 的固定宽度为 160 像素。将此添加到您的 CSS 中。

```
p.wp-caption-text{
    width:140px
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:26:43.337

感谢大家帮助我朝着正确的方向前进。这就是我的想法：[http](http://cssdesk.com/tVpxK) ://cssdesk.com/tVpxK并且感谢您的帮助，我得到了它的工作..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T05:37:37.230

嘿，我想你应该这个

在你的 CSS 中添加一个属性

```
#content .wp-caption {
position:relative;
} 
```

并将此 css 替换 `**#content .wp-caption p.wp-caption-text**` 为此

```
#content .wp-caption p.wp-caption-text {
    background-color: #FFFFFF;
    border: 1px solid #CACACA;
    bottom: 24px;
    color: #888888;
    font-size: 12px;
    font-weight: bold;
    left: 0;
    margin: 0 9px;
    padding: 1px 4px;
    position: absolute;
    right: 0;
    z-index: 9999;
} 
```

现场演示[http://jsfiddle.net/seK84/](http://jsfiddle.net/seK84/)

# jquery - 显示没有 AJAX 调用的登录用户名

> ID：10779734
> 
> 赞同：0
> 
> 时间：2012-05-28T05:27:39.713
> 
> 标签：jquery, spring, rest, ntlm, jcifs

我正在开发一个简单的基于 rest 的 spring 应用程序，并试图将 UI 和 REST 服务作为一个单独的目录，但都部署在同一个 tomcat 实例下。REST 服务返回 JSON 作为响应（这里没有 Spring MVC， ResponseEntity ）

没有 JSP 页面。一切都是 HTML/jQuery。我目前正在实现一个使用 jcifs/ntlm 作为身份验证的登录模块。当加载主页并对服务进行 ajax 调用时，响应包含类似这样的内容

```
{
 id: 111,
 fName: Foo,
 sName: bar
} 
```

我的左上角导航栏将显示为

`Welcome, Foo bar (111)`

在呈现我的 html 页面（如模板或其他内容）之前，有什么方法可以预加载此登录信息？

我知道这可以使用带有 Spring MVC 的 jsp 来实现。但想知道 Spring REST + HTML + JQuery 的可能性

谢谢你的帮助

# c# - 进展流畅的界面如何在开始时隐藏除一个之外的所有方法？

> ID：10779736
> 
> 赞同：0
> 
> 时间：2012-05-28T05:28:34.393
> 
> 标签：c#, fluent-interface

尝试创建一个简单的点头示例，以便我可以使用流畅的界面构建我的下一个项目。我需要为我的 dll 用户提供一种直观的逐步构建类的方法。

问题。我希望用户只在第一次开始时看到 Initialise 然后 step1 然后 step2 然后结束？我该怎么做？

这是我的尝试，只要你把“。” 你看到了一切，然后他们就躲起来了。

```
class Program
{
    static void Main(string[] args)
    {
        IEnd builder = new StepBuilder()
            .Initialize()
            .LoadStuff()
            .Validate()
            .End();

    }
}
 public class StepBuilder : IInitialize,
                              IStep1,
                              IStep2,
                              IStep3,
                              IEnd
 {
     public IStep1 Initialize()
     {
         return this;
     }

     public IStep2 LoadStuff()
     {
         return this; ;
     }

     public IStep3 Validate()
     {
         return this;
     }

     public IEnd End()
     {
         return this;
     }

     public bool Save()
     {
         return true;
     }
 }

public class Step
{
    public string Name { get; set; }
    public string Category { get; set; }
    public decimal Price { get; set; }
}

public interface IInitialize
{
    IStep1 Initialize();
}

public interface IStep1 
{
    IStep2 LoadStuff();
}

public interface IStep2 
{
    IStep3 Validate ();
}

public interface IStep3
{
    IEnd End();
}
public interface IEnd 
{
    bool Save();
} 
```

}

关于构建渐进式流畅界面的任何建议或良好链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:37:43.810

您可以变成`Initialize()`静态工厂方法，并将构造函数设为私有。然后您的创建代码将如下所示：

```
 IEnd builder = StepBuilder.Initialize()
         .LoadStuff()
         .Validate()
         .End(); 
```

第二个想法是明确接口实现。然后你只会看到你当时正在处理的接口的方法。

**更新**

这是两种方法的示例代码。界面与您的问题完全相同。

工厂方法示例：

```
class Program
{
    static void Main(string[] args)
    {
        IEnd builder = StepBuilder
            .Initialize()
            .LoadStuff()
            .Validate()
            .End();

    }
}

public class StepBuilder : IInitialize,
                             IStep1,
                             IStep2,
                             IStep3,
                             IEnd
{
    private StepBuilder()
    {
    }

    public static IStep1 Initialize()
    {
        var builder = new StepBuilder();
        //do initialisation stuff
        return builder;
    }

    public IStep2 LoadStuff()
    {
        return this; 
    }

    public IStep3 Validate()
    {
        return this;
    }

    public IEnd End()
    {
        return this;
    }

    public bool Save()
    {
        return true;
    }
} 
```

具有显式接口实现的示例：

```
class Program
{
    static void Main(string[] args)
    {
        IEnd builder = new StepBuilder()
            .Initialize()
            .LoadStuff()
            .Validate()
            .End();

    }
}

public class StepBuilder : IInitialize,
                             IStep1,
                             IStep2,
                             IStep3,
                             IEnd
{
    public IStep1 Initialize()
    {
        return this;
    }

    public IStep2 IStep1.LoadStuff()
    {
        return this; 
    }

    public IStep3 IStep2.Validate()
    {
        return this;
    }

    public IEnd IStep3.End()
    {
        return this;
    }

    public bool IEnd.Save()
    {
        return true;
    }
} 
```

# c# - 如何获取具有相似节点名称的 XmlDocument 的 XmlNodes 数据？

> ID：10779742
> 
> 赞同：3
> 
> 时间：2012-05-28T05:28:55.790
> 
> 标签：c#, xml

我的 xml 数据是：

```
<response>
<result name="response" numFound="2" start="0">
<doc><str name="Author">ALi Ahmadi</str><int name="BookID">1904</int><str name="Title">BookName 1</str></doc>
<doc><str name="Author">Reza Javadi</str><int name="BookID">1523</int><str name="Title">BookName 2</str></doc>
</result>
</response> 
```

我的 C# 代码是：

```
XmlDocument XmlDoc = new XmlDocument();
XmlDoc.LoadXml(ResultData);

XmlNodeList XnList = XmlDoc.SelectNodes("/response/result/doc");
foreach (XmlNode Xn in XnList)
{
    string a = Xn["str"].InnerText;
    string b = Xn["int"].InnerText;
    string c = Xn["str"].InnerText;
    //string c = Xn["str[@name='Title']"].InnerText;//error !
} 
```

a & c 结果是：“Ali Ahmadi”，如何在 c 变量中获得“BookName 1”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T07:36:36.143

如果您知道节点“标题”的索引，则可以通过以下代码获取它的 inerrHTML：

```
 c = Xn.ChildNodes[2].InnerText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:17:53.483

尝试这个

```
 string c = Xn["str"].Attributes["Title"].Value 
```

# c# - protobuf-net 是否支持多接口继承

> ID：10779743
> 
> 赞同：1
> 
> 时间：2012-05-28T05:28:58.077
> 
> 标签：c#, protobuf-net

我认为我的问题与这个问题非常相似： [Protobuf-net Creating typemodel with interface and abstract baseclass](https://stackoverflow.com/questions/9378340/protobuf-net-creating-typemodel-with-interface-and-abstract-baseclass) 然而 Marc 在这里给出的解决方案基本上将抽象类和接口的多重继承降低为单一继承设计。

对我来说问题是，我实际上需要像这样的多个接口继承：

```
interface ITestBase 
{
}
abstract class TestBase : ITestBase 
{
}
class TestTypeA : TestBase, ITestTypeA 
{
}
interface ITestTypeA 
{
}
class TestTypeB : TestBase, ITestTypeB 
{
}
interface ITestTypeB 
{
} 
```

在这里，我不能通过让 TestBase 实现 ITestTypeA 或 ITestTypeB 来解决这个问题（就像另一个问题的解决方案一样），因为具体类 TestTypeA 应该同时实现 ITestTypeA 和 ITestBase，而 TestTypeB 应该实现 ITestTypeB 和 ITestBase。

我正在使用 protobuf-net v2.0.0.480

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:24:46.453

我找到了这个可行的解决方案。不确定它是否被推荐，或者它是否会在运行时不知不觉中中断，但到目前为止它似乎适用于我的测试。

因为 protobuf-net 将接口视为序列化的具体类，所以它会遇到多重继承问题（这就是我对它的理解），所以我所做的只是从一个基类继承，并且不指定任何类与其接口之间的关系。

并创建一个可用于定义类层次结构的具体基类，如下所示。

```
[ProtoContract]
interface ITestBase 
{
}

[ProtoContract]
[ProtoInclude(1, typeof(TestTypeA))]
[ProtoInclude(2, typeof(TestTypeB))]
abstract class TestBase : ITestBase
{
}

[ProtoContract]
class TestTypeA : TestBase, ITestTypeA 
{
}

[ProtoContract]
interface ITestTypeA 
{
}

[ProtoContract]
class TestTypeB : TestBase, ITestTypeB 
{
}

[ProtoContract]
interface ITestTypeB 
{
} 
```

实际上，`[ProtoContract]`接口前面的所有内容都可能无关紧要。我发现把它们一起拿出来似乎也很管用。

# gwt - GWT + MVP4g+Ivy：编译错误

> ID：10779748
> 
> 赞同：1
> 
> 时间：2012-05-28T05:30:06.330
> 
> 标签：gwt, ivy, mvp4g

我已经通过 ivy 配置为项目添加了 mvp4g jar。它添加正确，并且还在 mvp4g 的 gwt.xml 文件中提到了行。但是我正在尝试编译它给我以下错误的应用程序：

> 加载继承的模块 'com.mvp4g.Mvp4gModule' [错误] 无法在您的类路径上找到 'com/mvp4g/Mvp4gModule.gwt.xml'；可能是拼写错误，或者您忘记包含源的类路径条目？[错误] 第 13 行：处理元素“继承”com.google.gwt.core.ext.UnableToCompleteException 时出现意外异常：（请参阅以前的日志条目）在 com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java :278) 在 com.google.gwt.dev.cfg.ModuleDefSchema$BodySchema.__inherits_begin(ModuleDefSchema.java:495) 在 sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java :25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:18:33.043

# 分析

在浏览了[项目主页](http://code.google.com/p/mvp4g/)后，我发现丢失的 XML 文件实际上位于 jar 文件中：

```
unzip -t ./Mvp4g_Layout_Part2/war/WEB-INF/lib/mvp4g-1.4.0.jar | grep xml
testing: com/mvp4g/Mvp4gModule.gwt.xml   OK
testing: META-INF/maven/com.googlecode.mvp4g/mvp4g/pom.xml   OK 
```

这意味着虽然 ivy 可能已经下载了它，但它并不存在于您的编译类路径中。

# 假设

您尚未指定如何使用 jar，因此我必须假设上述错误是由 ANT **javac**任务引发的。

# 例子

## 常春藤.xml

我会在 ivy 中声明依赖项并将其与编译配置相关联，如下所示：

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
    </configurations>

    <dependencies>
        <dependency org="com.googlecode.mvp4g" name="mvp4g" rev="1.4.0" conf="compile->default"/>
    </dependencies>

</ivy-module> 
```

## 构建.xml

在 ANT 文件中，我将使用 ivy [cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务来创建一个 ivy 托管的 ANT 路径。

```
<target name="init">
    <ivy:resolve/>

    <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

    <ivy:cachepath pathid="compile.path" conf="compile"/>
</target> 
```

**然后在javac**任务（或任何其他可以接受类路径引用的 ANT 任务）中正常使用此路径

```
<target name="compile" depends="init">
    <javac srcdir="${src.dir}" destdir="${classes.dir}" includeantruntime="false" debug="true" classpathref="compile.path"/>
</target> 
```

# ios - uibutton 未显示

> ID：10779751
> 
> 赞同：0
> 
> 时间：2012-05-28T05:30:34.997
> 
> 标签：ios, ios4, uiscrollview, uiimageview, uibutton

我正在尝试在 imageview 中添加 uibutton。

但它没有显示按钮。

即使我尝试将其添加到 uiscrollview 以及 self.view。

但是 uibutton 没有显示任何内容

请让我知道有什么问题

```
const CGFloat HEIGHT = 1024.0;
    const CGFloat WIDTH = 768.0;
    #define myViewPortrait CGRectMake(0.0f, 0.0f, 768.0f,1024.0f)
    #define myViewLandSacpe CGRectMake(0.0f, 0.0f, 1024.0f,768.0f)

    #define kAnimationKey @"animationKey"

    -(void)layoutScrollImages
    {
      UIImageView *view = nil;
      NSArray *subviews = [myScrollView subviews];

      CGFloat curXLoc = 0;
      for (view in subviews)
      {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
          CGRect frame = view.frame;
          frame.origin = CGPointMake(curXLoc, 0);
          view.frame = frame;

          curXLoc += (self.view.frame.size.width);
        }
      }

      [myScrollView setContentSize:CGSizeMake((myImagesCount * self.view.frame.size.width), [myScrollView bounds].size.height)];
    }   

    // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
    - (void)viewDidLoad {

      self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];
      myScrollView = [[UIScrollView alloc] initWithFrame:
      CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

      [self.view addSubview:myScrollView];

      UISwipeGestureRecognizer *rightRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightSwipeHandle:)];
      rightRecognizer.direction = UISwipeGestureRecognizerDirectionRight;
      rightRecognizer.numberOfTouchesRequired = 1;
      [rightRecognizer setDelegate:self];
      [myScrollView addGestureRecognizer:rightRecognizer];
      [rightRecognizer release];

      UISwipeGestureRecognizer *leftRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipeHandle:)];
      leftRecognizer.direction = UISwipeGestureRecognizerDirectionLeft;
      leftRecognizer.numberOfTouchesRequired = 1;
      [leftRecognizer setDelegate:self];
      [myScrollView addGestureRecognizer:leftRecognizer];
      [leftRecognizer release];

      [myScrollView setBackgroundColor:[UIColor blackColor]];
      [myScrollView setCanCancelContentTouches:NO];
      myScrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
      myScrollView.clipsToBounds = YES;     
      myScrollView.scrollEnabled = YES;
      myScrollView.pagingEnabled = YES;
      myScrollView.delegate = self;
      myImagesCount = 5;
      myScrollView.showsHorizontalScrollIndicator=NO;
      myScrollView.showsVerticalScrollIndicator=NO;

      for (int i = 1; i <= myImagesCount; i++)
      {
        NSString *imageName = [NSString stringWithFormat:@"screen-%d.jpg", i];
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

        CGRect rect = imageView.frame;
        rect.size.height = myScrollView.frame.size.height;
          NSLog(@"%d -----",self.view.frame.size.width);
        rect.size.width = myScrollView.frame.size.width;
        imageView.frame = rect;
        imageView.tag = i;
        [myScrollView addSubview:imageView];
        [imageView release];
      }
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self action:@selector(buttonHandler) forControlEvents:UIControlEventAllEvents];
    [button setTitle:@"point" forState:UIControlStateNormal];
    button.frame = CGRectMake(0.0, 0.0, 100.0, 40.0);
    button.backgroundColor = [UIColor blackColor];
    [self.view addSubview:button];
      [self layoutScrollImages];

      [super viewDidLoad];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:39:00.250

尝试这个

全局声明按钮并设置

```
[self layoutScrollImages];

[self.view bringSubViewToFront:button]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:06:53.933

根据您的问题，您想将`UIButton`作为子视图添加到`UIImageView`- 我猜是在 for 循环中？我看到的直接问题是实际按钮是在 for 循环之外生成的。我认为您的 for 循环旨在如下所示：

```
for (int i = 1; i <= myImagesCount; i++)
{
    NSString *imageName = [NSString stringWithFormat:@"screen-%d.jpg", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self action:@selector(buttonHandler)  forControlEvents:UIControlEventAllEvents];
    [button setTitle:@"point" forState:UIControlStateNormal];
    button.frame = CGRectMake(0.0, 0.0, 100.0, 40.0);
    button.backgroundColor = [UIColor blackColor];

    CGRect rect = imageView.frame;
    rect.size.height = myScrollView.frame.size.height;
    NSLog(@"%d -----",self.view.frame.size.width);
    rect.size.width = myScrollView.frame.size.width;
    imageView.frame = rect;
    imageView.tag = i;

    [imageView addSubview:button];
    [myScrollView addSubview:imageView];
    [imageView release];
} 
```

# xpath - 如何在xpath中选择除了包含li节点的表节点下的节点之外的所有节点？

> ID：10779752
> 
> 赞同：0
> 
> 时间：2012-05-28T05:30:37.257
> 
> 标签：xpath, xpath-2.0

我有很多表，我想从这些表中选择所有节点，除了那些至少包含一个 li 节点的表。

例子：

```
<table>
<tr><td>all these nodes should match</td></tr>
</table>

<table>
<tr><td><ul><li>all these nodes including table should NOT match</li></ul></td></tr>
</table>

<table>
<tr><td><div>all these nodes should match</div></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:12:17.817

## 路径：

```
/root/table[not(descendant::li)] 
```

## XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <table>
        <tr>
            <td>all these nodes should match</td>
        </tr>
    </table>
    <table>
        <tr>
            <td>
                <ul>
                    <li>all these nodes including table should NOT match</li>
                </ul>
            </td>
        </tr>
    </table>
    <table>
        <tr>
            <td>
                <div>all these nodes should match</div>
            </td>
        </tr>
    </table>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T13:09:24.350

**尝试这个**

```
//table[count(.//li) eq 0] 
```

# cakephp - cakephp 中的下拉列表

> ID：10779754
> 
> 赞同：0
> 
> 时间：2012-05-28T05:30:50.377
> 
> 标签：cakephp, drop-down-menu

数据库是这样的。主人养了很多猫。

**所有者**ownerID ownerName

**猫**catID catType ownerID

我正在尝试添加新猫，并且在 ownerID 字段上，我想显示所有 ownerName 的下拉列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T10:25:59.910

在您的控制器中写入：

```
$all_security_question = $this->Security_question->find('list',array('fields'=>array('id','question')));
$this->set("all_security_question",$all_security_question);

   Write in your Model:<?php echo $this->Form->input('security_question_id', array(
                                                'label' => false,
                                                'id' => 'id',
                                                'options' =>$all_security_question
                                            )); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:29:28.017

我假设您已经拥有所有者模型，用于所有者的下拉列表

**在控制器中**

```
$Owner = $this->Owner->find('list', array('fields' => array('Owner.ownerID', 'Owner.ownerName')));

$this->set('owners', $owner); 
```

**在视图中**

```
<?php echo $form->input('owner', array(
        'label' => false,
        'id' => 'owner_id',
        'options' => $owners
    )); ?> 
```

# php - 在 PHP 中的控制面板 CMS 上使用什么逻辑

> ID：10779758
> 
> 赞同：1
> 
> 时间：2012-05-28T05:31:28.700
> 
> 标签：php

我正在尝试为我的网站制作一个控制面板，但我不知道要使用什么逻辑。
例如，我的控制面板有一个**添加用户按钮**，我想要发生的是当用户单击该按钮时..该页面将显示在特定页面上`<div></div>`而无需刷新页面。

我当时想的逻辑是：

1.使用 iframe 并加载所有相关页面（我不知道 PRO 和 CON）

2.控制面板使用FLASH（我不知道PRO和CON）

3.使用javascript或像JQuery这样的JS库，我不知道该怎么称呼它..

问题是我会使用什么逻辑，或者你可以建议一些更安全和更网络的东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:37:16.310

如果您希望人们经常从该页面添加用户，那么明智的做法是先加载将用户添加到 DOM 所需的表单，并在管理员单击此按钮时切换其可见性。

您提到的最后一个选项，使用 jQuery（或任何 JS 库）异步加载数据，也很简单。有很多方法可以做到这一点，但一种简单的方法是只使用 Ajax[`.load`](http://api.jquery.com/load/)方法：

```
$(".addUser").on("click", function(){
  $("#myDiv").load("/addUserForm.php");
}); 
```

# python - 在 Python 中动态生成 XML

> ID：10779762
> 
> 赞同：1
> 
> 时间：2012-05-28T05:31:41.450
> 
> 标签：python, xml, xml-serialization, xml-parsing

嘿朋友们，我正在使用 Python 库生成 XML 数据，如下所示

```
def multiwan_info_save(request):
    data = {}
    init = "init"
    try:
       form = Addmultiwanform(request.POST)
    except:
        pass
    if form.is_valid():
        from_sv = form.save(commit=False)
        obj_get = False
        try:
            obj_get = MultiWAN.objects.get(isp_name=from_sv.isp_name)
        except:
            obj_get = False
            nameservr  = request.POST.getlist('nameserver_mw') 
            for nm in nameservr:
                nameserver1, is_new = NameServer.objects.get_or_create(name=nm)
                from_sv.nameserver = nameserver1
                from_sv.save()
        #    main(init)    
        top = Element('ispinfo')
       # comment = Comment('Generated for PyMOTW')
        #top.append(comment)
        all_connection = MultiWAN.objects.all()
        for conn in all_connection:
            child = SubElement(top, 'connection number ='+str(conn.id)+'name='+conn.isp_name+'desc='+conn.description )
            subchild_ip = SubElement(child,'ip_address')
            subchild_subnt = SubElement(child,'subnet')
            subchild_gtwy = SubElement(child,'gateway')
            subchild_nm1 = SubElement(child,'probe_server1')
            subchild_nm2 = SubElement(child,'probe_server2')
            subchild_interface = SubElement(child,'interface')
            subchild_weight = SubElement(child,'weight')
            subchild_ip.text = str(conn.ip_address)
            subchild_subnt.text = str(conn.subnet)
            subchild_gtwy.text = str(conn.gateway)
            subchild_nm1.text = str(conn.nameserver.name)
           # subchild_nm2.text = conn.
            subchild_weight.text = str(conn.weight)
            subchild_interface.text = str(conn.interface)
        print "trying to print _____________________________"
        print tostring(top)   
        print "let seeeeeeeeeeeeeeeeee +++++++++++++++++++++++++" 
```

但我得到的输出如下

```
<ispinfo><connection number =5name=Airtelllldesc=Largets TRelecome ><ip_address>192.168.1.23</ip_address><subnet>192.168.1.23</subnet><gateway>192.168.1.23</gateway><probe_server1>192.168.99.1</probe_server1><probe_server2 /><interface>eth0</interface><weight>160</weight></connection number =5name=Airtelllldesc=Largets TRelecome ><connection number =6name=Uninordesc=Uninor><ip_address>192.166.55.23</ip_address><subnet>192.166.55.23</subnet><gateway>192.168.1.23</gateway><probe_server1>192.168.99.1</probe_server1><probe_server2 /><interface>eth0</interface><weight>160</weight></connection number =6name=Uninordesc=Uninor><connection number =7name=Airteldesc=Largets TRelecome ><ip_address>192.168.1.23</ip_address><subnet>192.168.1.23</subnet><gateway>192.168.1.23</gateway><probe_server1>192.168.99.1</probe_server1><probe_server2 /><interface>eth0</interface><weight>160</weight></connection number =7name=Airteldesc=Largets TRelecome ></ispinfo> 
```

我只想知道如何以正确的 XML 格式编写此 XML？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:38:41.223

**UPDATED to include simulation of both creating and printing of the XML tree**

## The Basic Issue

Your code is generating invalid connection tags like this:

```
<connection number =5name=Airtelllldesc=Largets TRelecome ></connection number =5name=Airteldesc=Largets TRelecome > 
```

when they should look like this (I am omitting the sub-elements in between. Your code is generating these correctly):

```
<connection number="5" name="Airtellll" desc="Largets TRelecome" ></connection> 
```

If you had valid XML, this code would print it neatly:

```
from lxml import etree
xml = '''<ispinfo><connection number="5" name="Airtellll" desc="Largets TRelecome" ><ip_address>192.168.1.23</ip_address><subnet>192.168.1.23</subnet><gateway>192.168.1.23</gateway><probe_server1>192.168.99.1</probe_server1><probe_server2 /><interface>eth0</interface><weight>160</weight></connection></ispinfo>'''
xml = etree.XML(xml)
print etree.tostring(xml, pretty_print = True) 
```

## Generating Valid XML

A small simulation follows:

```
from lxml import etree

# Some dummy text
conn_id = 5
conn_name = "Airtelll"
conn_desc = "Largets TRelecome"
ip = "192.168.1.23"

# Building the XML tree
# Note how attributes and text are added, using the Element methods
# and not by concatenating strings as in your question
root = etree.Element("ispinfo")
child = etree.SubElement(root, 'connection',
                 number = str(conn_id),
                 name = conn_name,
                 desc = conn_desc)
subchild_ip = etree.SubElement(child, 'ip_address')
subchild_ip.text = ip

# and pretty-printing it
print etree.tostring(root, pretty_print=True) 
```

This will produce:

```
<ispinfo>
  <connection desc="Largets TRelecome" number="5" name="Airtelll">
    <ip_address>192.168.1.23</ip_address>
  </connection>
</ispinfo> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:41:46.217

单行是*正确*的，因为 XML 解析器会理解它。

为了漂亮打印到`sys.stdout`，请使用 的`dump`方法`Element`。

要对流进行漂亮打印，请`write`使用`ElementTree`.

# jsf - JSF f:param - 参数不可访问

> ID：10779763
> 
> 赞同：0
> 
> 时间：2012-05-28T05:31:41.907
> 
> 标签：jsf, jakarta-ee, jsf-2

我传递了一个参数“parent”，如下所示。

```
<h:commandLink rendered="some contidion" >
    <td>
        <a href="home.xhtml">
                <img  src="icon.png" width="140" height="140" alt="alternate" />
        </a>
    </td>                       
    <f:param name="parent" value="ABC" />
</h:commandLink> 
```

但在 home.xhtml 上，我无法将其解读为：

```
#{param.parent} 
```

我在做什么错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:19:53.840

您`h:commandLink`以错误的方式使用。您不需要嵌入`a:href`. 使用`action`属性。

或者如果您不想调用操作方法则更好`h:link`：

```
<h:link outcome="home" >
   <img ...>
   <f:param name="parent" value="ABC" />
</h:link> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:25:04.087

您可以在此处访问您的 home.xhtml 赞

```
 <h:outputText value="Value, {0}">
        <f:param value="#{yourBean.name}"/>
   </h:outputText> 
```

您可以将 h:outputText 替换为 h:outputFormat 或类似的东西。

# java - XML 模式验证错误

> ID：10779764
> 
> 赞同：-1
> 
> 时间：2012-05-28T05:32:10.333
> 
> 标签：java, xml, validation, xsd

我有我的 xml 文件

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
 <Info>
 <Pan>123</Pan>
 <Name>qwe</Name>
 <Email>qwe</Email>
 <City>qwe</City>
 <State>qwe</State>
 <AssessmentYear>2012</AssessmentYear>
 <MobileNo>1234</MobileNo>
 <Income-Salary>1234</Income-Salary>
 <Income-Other>1234</Income-Other>
 <TotalAmount>122</TotalAmount>
<Signature> 
<SignedInfo>
 <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
 <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
 <Reference URI=""><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/><Transform Algorithm="http://www.w3.org/TR/1999/REC-xslt-19991116"><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="text"/>
<xsl:template match="/">
Pan : <xsl:copy-of select="//Pan"/>

MobileNo : <xsl:copy-of select="//MobileNo"/>

TotalAmount : <xsl:copy-of select="//TotalAmount"/>
</xsl:template>
</xsl:stylesheet></Transform></Transforms><DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/><DigestValue>FgbIIimTLIbd0Zpvq1zDrZse6aJg5bAE1/Q58cEkEvk=</DigestValue></Reference>
 </SignedInfo>
<SignatureValue>dy4QDco5NhXResncu0tUG5ylujDn9siIQSHjuX5HxH2gs70LpsO3KDWNvDXjpgkIySYfzJ/FdC6C
trkSySWRjhObqI8cbcP5VU/nL8pP21+3CO+gF1k884aeX3felpRy0FBBMTYBknQTunWCHvpHk927
ZHGvm6Hiej7iBKr3e1k=</SignatureValue>
</Signature>
</Info> 
```

此 xml 文件的我的架构文件如下（**c1.xsd**）

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<xs:import namespace="http://www.w3.org/2000/09/xmldsig#" schemaLocation="C:\\xml\\c2.xsd"/>
<xs:element name="Info">
  <xs:complexType>

  <xs:sequence>
      <xs:element name="Pan" type="xs:string"/>
      <xs:element name="Name" type="xs:string"/>
      <xs:element name="Email" type="xs:string"/>
      <xs:element name="City" type="xs:string"/>
      <xs:element name="State" type="xs:string"/>
      <xs:element name="AssessmentYear" type="xs:gYear"/>
      <xs:element name="MobileNo" type="xs:unsignedLong"/>
      <xs:element name="Income-Salary" type="xs:unsignedLong"/>
      <xs:element name="Income-Other" type="xs:unsignedLong"/>
      <xs:element name="TotalAmount" type="xs:unsignedLong"/>
      <xs:element ref="ds:Signature"/>
 </xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

**c2.xsd（已编辑）**

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3.org/2000/09/xmldsig#">
<xs:element name="Signature">
     <xs:complexType>
      <xs:sequence>
        <xs:element name="SignedInfo">
         <xs:complexType>
          <xs:sequence>
             <xs:element name="CanonicalizationMethod">
              <xs:complexType>
               <xs:attribute name="Algorithm" type="xs:string" use="required"/>
              </xs:complexType>
             </xs:element>
             <xs:element name="SignatureMethod">
               <xs:complexType>
                 <xs:attribute name="Algorithm" type="xs:string" use="required"/>
               </xs:complexType>
             </xs:element>                
            <xs:element name="Reference">
             <xs:complexType>
               <xs:attribute name="URI" type="xs:string"/>
               <xs:all>
               <xs:element name="Transforms">
                 <xs:complexType>
                   <xs:sequence>
                     <xs:element name="Transform" type="xs:string">
                       <xs:complexType>
                         <xs:attribute name="Algorithm" type="xs:string" use="required"/>
                       </xs:complexType>
                      </xs:element>
                   </xs:sequence>
                 </xs:complexType>
               </xs:element>
               <xs:element name="DigestMethod">
                 <xs:complexType>
                   <xs:attribute name="Algorithm" type="xs:string" use="required"/>
                 </xs:complexType>
               </xs:element>
               <xs:element name="DigestValue" type="xs:hexBinary"/>
               </xs:all>
             </xs:complexType>
            </xs:element>
            </xs:sequence>
         </xs:complexType> 
        </xs:element> 
       <xs:element name="SignatureValue" type="xs:string"/>
      </xs:sequence>
     </xs:complexType>
</xs:element>
</xs:schema> 
```

当我验证我的 xml 文件时，我得到以下异常

```
org.xml.sax.SAXParseException; systemId: file:/C://xml//c2.xsd; lineNumber: 22;
columnNumber: 37; s4s-elt-invalid-content.1: The content of '#AnonType_Reference
SignedInfoSignature' is invalid.  Element 'element' is invalid, misplaced, or oc
curs too often. 
```

**我无法弄清楚我哪里出错了？谁能告诉我代码中的错误到底在哪里？**
*编辑 1 后出错*

```
org.xml.sax.SAXParseException; systemId: file:/C://xml//c2.xsd; lineNumber: 22;
columnNumber: 15; s4s-elt-invalid-content.1: The content of '#AnonType_Reference
SignedInfoSignature' is invalid.  Element 'all' is invalid, misplaced, or occurs
 too often. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:41:23.133

在 c2.xsd，第 22 行

```
 <xs:complexType>
           <xs:attribute name="URI" type="xs:string"/>
           <xs:element name="Transforms"> 
```

`xs:element`不能作为 的直子出现`xs:complexType`。它必须在里面`xs:all`，`xs:choice`或`xs:sequence`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:15:50.507

我尝试了您的文件并设法让它针对notepad ++进行验证，并做了几件事：

1.  将 xsd 更改为使用对导入签名 xsd 的引用，而无需任何 c:\reference。为此，我只是将导入的文件复制到与我正在从中导入的 xsd 相同的位置
2.  将您指定 ds 的 c2.xsd 更改为不同的属性，即 dsig
3.  [从w3 Signature xsd](http://www.w3.org/TR/xmldsig-core/xmldsig-core-schema.xsd)下载 w3c 版本的签名xsd并在导入中使用它（步骤 1）。
4.  在指定签名时更改了输出 xml 以包含 xmlns="http://www.w3.org/2000/09/xmldsig#" 行。

请注意我在下面的 notepad++ 中成功验证的 xsd 和 xml。

XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" attributeFormDefault="unqualified">
<xs:import namespace="http://www.w3.org/2000/09/xmldsig#" schemaLocation="xmldsig-core-schema.xsd"/>
<xs:element name="Info">
  <xs:complexType>
<xs:sequence>
      <xs:element name="Pan" type="xs:string"/>
      <xs:element name="Name" type="xs:string"/>
      <xs:element name="Email" type="xs:string"/>
      <xs:element name="City" type="xs:string"/>
      <xs:element name="State" type="xs:string"/>
      <xs:element name="AssessmentYear" type="xs:gYear"/>
      <xs:element name="MobileNo" type="xs:unsignedLong"/>
      <xs:element name="Income-Salary" type="xs:unsignedLong"/>
      <xs:element name="Income-Other" type="xs:unsignedLong"/>
      <xs:element name="TotalAmount" type="xs:unsignedLong"/>
      <xs:element ref="dsig:Signature" minOccurs="0" maxOccurs="1" />
</xs:sequence>
  </xs:complexType>
</xs:element>
</xs:schema> 
```

和 XML：

```
<?xml version="1.0" ?>
 <Info xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" >
 <Pan>123</Pan>
 <Name>qwe</Name>
 <Email>qwe</Email>
 <City>qwe</City>
 <State>qwe</State>
 <AssessmentYear>2012</AssessmentYear>
 <MobileNo>1234</MobileNo>
 <Income-Salary>1234</Income-Salary>
 <Income-Other>1234</Income-Other>
 <TotalAmount>122</TotalAmount>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#"> 
<SignedInfo>
 <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
 <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
 <Reference URI="">
 <Transforms>
 <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
 <Transform Algorithm="http://www.w3.org/TR/1999/REC-xslt-19991116">
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
        <xsl:output method="text"/>
        <xsl:template match="/">
Pan : <xsl:copy-of select="//Pan"/>

MobileNo : <xsl:copy-of select="//MobileNo"/>

TotalAmount : <xsl:copy-of select="//TotalAmount"/>
        </xsl:template>
    </xsl:stylesheet>
</Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<DigestValue>FgbIIimTLIbd0Zpvq1zDrZse6aJg5bAE1/Q58cEkEvk=</DigestValue>
</Reference>
 </SignedInfo>
<SignatureValue>dy4QDco5NhXResncu0tUG5ylujDn9siIQSHjuX5HxH2gs70LpsO3KDWNvDXjpgkIySYfzJ/FdC6C
trkSySWRjhObqI8cbcP5VU/nL8pP21+3CO+gF1k884aeX3felpRy0FBBMTYBknQTunWCHvpHk927
ZHGvm6Hiej7iBKr3e1k=</SignatureValue>
</Signature>
</Info> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T12:51:20.760

您的 c2.xsd 仍然无效，请查看 ComplexType 定义：

```
<complexType
  id=ID
  name=NCName
  abstract=true|false
  mixed=true|false
  block=(#all|list of (extension|restriction))
  final=(#all|list of (extension|restriction))
  any attributes
 >

 (annotation?,(simpleContent|complexContent|((group|all|
 choice|sequence)?,((attribute|attributeGroup)*,anyAttribute?))))

</complexType> 
```

属性必须在 group、all、choice 或 sequence 元素之后定义，因此更改顺序`<xs:element name="Reference">`以便先定义`<xs:all>`，然后再定义`<xs:attribute>`：

```
 <xs:element name="Reference">
         <xs:complexType>
           <xs:all>
           <xs:element name="Transforms">
             <xs:complexType>
               <xs:sequence>
                 <xs:element name="Transform" type="xs:string">
                   <xs:complexType>
                     <xs:attribute name="Algorithm" type="xs:string" use="required"/>
                   </xs:complexType>
                  </xs:element>
               </xs:sequence>
             </xs:complexType>
           </xs:element>
           <xs:element name="DigestMethod">
             <xs:complexType>
               <xs:attribute name="Algorithm" type="xs:string" use="required"/>
             </xs:complexType>
           </xs:element>
           <xs:element name="DigestValue" type="xs:hexBinary"/>
           </xs:all>
           <xs:attribute name="URI" type="xs:string"/>
         </xs:complexType>
        </xs:element> 
```

# java - Java 游戏鼠标移动

> ID：10779767
> 
> 赞同：0
> 
> 时间：2012-05-28T05:33:05.920
> 
> 标签：java, user-interface, mouse, awt, mouseevent

我正在制作一个游戏，我们必须使用“捕手”来接住从窗户顶部掉下来的球。渔获物只能向左/向右移动。

示例： http: [//puu.sh/xeq8](http://puu.sh/xeq8)

如果我想用鼠标移动“捕手”，我应该看/朝哪个方向？

现在，我有一个使用键盘的捕手——我用过，`KeyListener`但我不确定鼠标。

理想情况下，当鼠标在 JPanel 中移动时，我希望捕手向左/向右移动？或者那种东西是理想的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:36:42.670

使用 MouseMotionListener ：

```
myPanel.addMouseMotionListener(new MouseAdapter() { 
   public void mouseMoved(MouseEvent me) { 
      //move the catcher
      //use me.getX() to have the horizontal position of the mouse
      //eg : catcher.setX(me.getX())
   } 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T05:38:36.537

用于`MouseMotionListener`通知鼠标的位置，我认为您还需要单击以捕获该使用的落球`MouseListener`或`MouseAdapter`。

当您点击时，您`MouseListener`将收到通知，当他们移动鼠标位置时，您的`MouseMotionListener`回调将被触发。

1.  [如何使用 MouseListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)
2.  [如何使用 MouseMotionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html)

# c++ - 如何在 C++ 中终止 std::string？

> ID：10779769
> 
> 赞同：3
> 
> 时间：2012-05-28T05:33:23.593
> 
> 标签：c++

我正在尝试从 C++ 中的 std::string 中删除所有标点符号。我当前的代码：

```
string str_in;
string::size_type i, j;

cout << "please input string with punctuation character..." << endl;
cin >> str_in;

for (i = 0, j = 0; i != str_in.size(); ++i)
    if (!ispunct(str_in[i]))
         str_in[j++] = str_in[i];

str_in[j] = '\0';

cout << str_in << endl; 
```

`str_in[j] = '\0';`错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T05:50:20.020

如果要截断`str_in`到第一个`j`字符，可以说`str_in.resize(j)`.

如果你想使用标准库，你可以`erase-remove`像这样应用成语：

```
#include <algorithm>
#include <iostream>
#include <string>

int main()
{
    std::string str_in;
    std::getline(std::cin, str_in);

    // Here is where the magic happens...
    str_in.erase(std::remove_if(str_in.begin(), str_in.end(), ::ispunct), str_in.end());

    std::cout << str_in << '\n';

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:47:20.457

C++ 字符串类型未实现为空终止（尽管`c_str()`调用*将为*您提供空终止字符串。）

所以是的，`str_in[j] = '\0'`至少有两个原因是错误的：

1.  将`str_in.length()`不会反映您期望删除标点的字符串的大小。
2.  空字符是一个额外的宪章，它将被发送到任何输出流，
    例如`cout << str_in;`

使用`std::string`该类，您可能不应该覆盖相同的缓冲区，而是可能使用一个`str_out`缓冲区，它在复制所有想要的（即不包括标点符号）后具有正确的长度，或者您应该调整长度`str_in`而不是添加空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:39:35.920

`str_in[j] = '\0'`当字符串没有任何标点符号时，我认为是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T05:45:10.597

不要修改相同的字符串，而是创建一个新字符串（例如`str_out`）并附加到该字符串：

```
str_out += str_in[i]; 
```

# bash - 保存全局变量 BASH

> ID：10779771
> 
> 赞同：0
> 
> 时间：2012-05-28T05:33:40.170
> 
> 标签：bash, variables, export, global-variables

我是 bash 的新手，正在尝试解决我正在尝试制作的代码的一些问题。

我在我的用户名下的终端并连接到 bash

```
USER$  
USER$ bash  
bash$ 
```

现在在 bash 中，我保存了一些变量 fe：

```
i=2   
k=2   
let p=$k*$i 
```

现在我想在 bash 函数之外使用这些变量

```
bash$exit   
USER$ 
```

但现在变量不存在

我尝试使用导出，但它并没有真正起作用，可以使用你的帮助，tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:46:24.907

不可能。您不能像这样在父进程中设置环境变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T05:49:42.403

与 DOS 批处理文件不同，Unix shell 脚本不能直接影响其调用 shell 的环境。

您可以考虑使用`.`(dot) 或`source`命令在调用 shell 的上下文中读取和执行脚本。这意味着在脚本中所做的更改确实会影响环境（通常；您仍然可能遇到子 shell 的问题）。

另一种选择是让设置变量的脚本将值以`name=value`格式写入一个文件，然后调用脚本读取该文件（使用`.`或`source`再次）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:35:33.753

传统的解决方案是将设置添加到您的`.profile`或`. bashrc`- 您应该使用取决于您的特定需求和本地 Bash 配置；我的第一个建议是`.profile`，但是你必须避免任何 bashisms 因为这个文件是共享的`sh`（所以，不`let`，例如）。

对于更具体的需求，将命令放在一个文件中，并`source`在需要时使用。您可能还想创建一个简单的脚本来使用当前值更新文件。

```
# source this file to update $HOME/stuff

cat<<HERE>$HOME/stuff
i='$i'
k='$k'
p='$p'
export i k p
HERE 
```

要在连接到远程系统时保留变量，请查看用于连接的工具的文档。例如，`ssh`具有在启动远程会话时从本地系统导入环境变量的配置选项。

# html - CSS菜单娱乐

> ID：10779773
> 
> 赞同：0
> 
> 时间：2012-05-28T05:33:44.673
> 
> 标签：html, css

我被赋予了重新创建以下菜单的任务：

![在此处输入图像描述](../Images/de73c01b807bb774d45e21ccff739806.png)

在下面设置线的最佳方法是`border-bottom`什么？然后让图像悬停/激活？

您在图像中看到的灰线是我的书签栏的底部。我的标题高度为`50px`

如何使我的导航具有正确的距离，如下图所示 - 使用`bottom:0`？

**HTML：**

```
<header>
    <h1><img src="_assets/images/b_logoheadertab.png" width="250" height="50" alt="B Logoheadertab"></h1>
        <nav class="main">
            <ul>
                <li><a href="#">Link One</a></li>
                <li><a href="#">Link Two</a></li>
                <li><a href="#">Link Three</a></li>
                <li><a href="#">Link Four</a></li>
            </ul>
        </nav>
            <div class="login">
                <p>Welcome <a class="link">UserName</a> | <a class="logOutLink" href="#">Log Out</a></p>
    </header> 
```

**CSS：**

```
header{
    width:100%;
    height:50px;
    background-color:#184C82;
    border-bottom:1px solid red;
}
header h1{
    float:left;
    width:250px
}
header nav{
    float:left;
    margin:0 15px 0 0;
    color:#fff;
    width:434px;
    height:50px;
}
header nav ul li{
    display:inline;
    margin:0 0 0 2px;
}
header nav li a{
    text-decoration:none;
    color:#FFF;
    height:100px;
    width:45px;
}
header nav li{
    width:45px;
    background:url('../images/nav_active.png') no-repeat;
}
header .login{
    float:right;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:43:34.007

```
header nav ul li {
 display:inline;
 margin:0 0 0 2px;
 line-height:50px;     
 padding-bottom: 10px; // additional space for border bottom and arrow
}

header nav li:hover, header nav li.active {    
 background:url('http://www.ptt.co.uk/img/RedUpArrow.gif') no-repeat center bottom; // center it and place it to the bottom 
 border-bottom: 1px solid white; // for border bottom
} 
```

活跃班

```
<nav class="main">
        <ul>
            <li class="active"><a href="#">Dashboard</a></li>
            <li><a href="#">Messenger</a></li>
            <li><a href="#">Campaigner</a></li>
            <li><a href="#">Connet API</a></li>
        </ul>
    </nav> 
```

我认为这正是您所需要的

[这里的](http://jsfiddle.net/agriboz/xqDtM/5/)例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:19:07.460

嘿，现在你可以定义

在你的 CSS

```
.appsuite ul li:hover{
background:url('yourarrow.png') no-repeat xxpx xxpx; // define position according to your layout 
} 
```

# codeigniter - 动态更新配置数据代码点火器

> ID：10779787
> 
> 赞同：2
> 
> 时间：2012-05-28T05:36:52.080
> 
> 标签：codeigniter, config

我创建了我的自定义配置文件来存储有关站点的信息，例如它是在线还是离线。

为此，我在 config 文件夹中创建了新文件，并使用我自己的索引将默认值存储在全局 $config[] 数组中。

我想通过管理员控制动态更新这些配置数据，例如。他可以选择将站点置于离线模式。

为此，我使用了功能

```
$this->config->set_item('config_array_index','value_to_set'); 
```

但是，我不知道为什么它不适合我？

我无法在我的配置文件中看到任何更新。我也在自动加载我的配置文件。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:38:47.233

设置配置项仅适用于当前会话 - 它不会覆盖您实际的 codeigniter 文件。

如果您想永久使站点离线，您将需要某种持久存储，例如根据需要检查/更新的数据库中的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:34:16.833

您可以在配置目录中创建一个空配置文件，然后使用 fwrite 之类的功能将数据附加到其中（您可以检查要使用的其他 CI 功能）。并将其添加到您的自动加载文件中。

# android - Android：无法获取相机拍摄的原始照片（只能读取压缩照片）

> ID：10779789
> 
> 赞同：2
> 
> 时间：2012-05-28T05:36:57.573
> 
> 标签：android, photo, android-camera, android-camera-intent

在我的应用程序中，我通过 android 相机拍摄照片，然后我想将其发送到服务器。为此，我使用客户端套接字编程。我将捕获的照片转换为 bytearray(byte[])，然后将其发送到服务器。每件事实际上都有效。

问题是我无法将原始照片发送到服务器。缩略图照片由安卓手机发送。但是当我用相机拍摄照片时，原始照片就在画廊中。

如何让这张原始照片在我的应用程序中使用？

我的代码：

```
Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        cameraIntent.putExtra("outputFormat",Bitmap.CompressFormat.JPEG);
        cameraIntent.putExtra("return-data", true);
    startActivityForResult(Intent.createChooser(cameraIntent, "Select Picture"),
                    CAMERA_REQUEST); 
```

在 onActivityResult 方法中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_REQUEST) {
        Bitmap photo = (Bitmap) data.getExtras().get("data");
//          byte[] a = (byte[]) data.getExtras().getByteArray("data"); // I also use this but not work

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        photo.compress(CompressFormat.JPEG, 100, bos);
        byte[] bitmapdata = bos.toByteArray();

    }
} 
```

**在位**图数据照片中，但压缩照片不是原始照片。有人说，更改**压缩的质量字段（CompressFormat.JPEG，100，bos）；**在 0 到 100 之间，但什么都不会发生。

**-- >>**还有其他方法可以获得相机拍摄的原始照片吗

**-- >>**当照片在我电脑的文件夹中时，我通过给出路径来读取文件中的这张照片。ex-**文件文件 = 新文件（c:\newphoto\image.jpg）；**. 我可以在 android 中使用此代码读取原始照片吗，因为我知道照片的名称和位置。如果是，那么在画廊中阅读照片的路径是什么。如果我将路径指定为：**\DCIM\Camera\photoName.jpg** ，这项工作是否有效。

**-- >>**或者我当前的代码需要一些改变，它会正常工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T07:25:17.010

您正在使用 Intent 使用`ACTION_IMAGE_CAPTURE`. 如果您通常使用 Intent 启动相机，那么它将在 onActivityResult() 中以位图的形式返回图像，但这将用于缩略图目的。

如果您想从相机获取全分辨率图像，那么您应该提供一个文件，其中包含您要启动相机活动的意图。

你可以像下面这样

```
Intent i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
File out = Environment.getExternalStorageDirectory();
out = new File(out, imagename);
i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(out));
startActivityForResult(i, CAMERA_RESULT); 
```

这里有一个`MediaStore.EXTRA_OUTPUT`参数，它获取您希望相机在其中写入图像的文件的 Uri。

有关更多信息，您可以参考以下示例

[从相机捕获全分辨率图像](https://stackoverflow.com/questions/10042695/how-to-get-camera-result-as-a-uri-in-data-folder)

# delphi - Delphi Postgres 存储过程

> ID：10779794
> 
> 赞同：1
> 
> 时间：2012-05-28T05:37:29.707
> 
> 标签：delphi, postgresql, stored-procedures

我正在开发处理**存储过程的****Delphi**应用程序。我为插入语句创建了存储过程，它适用于我的应用程序。现在，我想为 select 语句创建相同的语句。

 **```
CREATE TYPE list_all_firstname AS ( first_name character varying);  

CREATE FUNCTION select_sp()   
RETURNS SETOF list_all_firstname AS  
$$  
DECLARE  
rec record;  
BEGIN  
  FOR rec IN (SELECT first_name FROM person) LOOP  
  RETURN NEXT rec;  
END LOOP;  
END;  
$$ LANGUAGE plpgsql; 
```

电话是：

```
SELECT * FROM select_sp(); 
```

直到这一切在 postgres 中都很好。我想在我的 delphi 应用程序中访问这个存储过程。我的代码是：

```
 with StoredProc2 do begin
     StoredProcName :='select_sp';
     ExecProc;
     Edit5.Text:=ParamByName('list_all_firstname').AsString ;
    end; 
```

但是我收到错误消息**“找不到对象”**。如何在delphi中访问存储过程的返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:03:17.833

我得到了答案。**.could not find object** is BDE error...接下来是访问值，不需要使用存储过程组件。我们可以使用TQuery如下...：

```
 Query1.SQL.Clear;
  Query1.SQL.Add('SELECT * FROM select_sp()');
  Query1.Active := True;

  for i:=0 to Query1.RowsAffected-1 do
          begin
             sval:=Query1.FieldByName('first_name').AsString;
             ShowMessage(sval);
             Query1.Next;
          end; 
```**

# javascript - 输入键不触发提交按钮

> ID：10779795
> 
> 赞同：0
> 
> 时间：2012-05-28T05:37:36.167
> 
> 标签：javascript, forms, submit, enter

我的页面有两种形式。一种是普通的登录表单，另一种是用于创建帐户并出现在模式框中。我使用 Javascript（如下）让回车键提交“创建帐户”表单，效果很好。但是，出于某种原因，以完全相同的方式使用的完全相同的代码不适用于登录表单。谁能给我解释一下？

我使用了这个脚本：

```
<script>function checkSubmit(e)
{
   if(e && e.keyCode == 13)
   {
      document.forms[0].submit();
   }
}
</script> 
```

我在这样的链接中实现了它：

```
<a href="editprofile.php" onclick="document.createfrm.submit()"  onKeyPress="return checkSubmit(event)" id="submitcreate"> 
```

当我在登录表单的类似链接中输入“onKeyPress”内容时，它不起作用。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:53:22.667

这应该有效：

```
<a href="javascript:document.createfrm.submit()" id="submitcreate"> 
```

# android - Android Emulator 分辨率不适用于 GPU 仿真

> ID：10779799
> 
> 赞同：1
> 
> 时间：2012-05-28T05:37:49.837
> 
> 标签：android, android-emulator

我在以 ATI Radeon 6550M 作为 GPU 的机器上运行 Ubuntu 12.04 32 位。我已经从 AMD 网站安装了专有驱动程序 (1)。OpenGL 渲染与驱动程序配合得很好。

在 TestObject 博客 (2) 的帮助下，我安装了一个运行 x86 架构的 android 模拟器和 AVD (4.0.3)。我还启用了 KVM 支持，它几乎可以正常工作。我还有另一个 ARM 架构下的 AVD。这两个 AVD 都有一个小问题。

当我使用 GPU 仿真（选项“-gpu on”）运行模拟器（x86 或 ARM）时，模拟器的分辨率非常糟糕。这只发生在 GPU 仿真集上，否则不会发生。

使用 GPU 仿真： ![带有 GPU 仿真的 Android 模拟器](../Images/655f5c3cd6a6155c792300f1a268479d.png)

没有 GPU 仿真： ![没有 GPU 仿真的 Android 模拟器](../Images/748c1740603aa03757ad9756a024c6cb.png)

如您所见，带有 GPU 仿真的显示器非常糟糕。为什么会这样？我如何看待问题并解决相同的问题？

(1) [http://support.amd.com/us/gpudownload/linux/Pages/radeon_linux.aspx](http://support.amd.com/us/gpudownload/linux/Pages/radeon_linux.aspx)
(2) [http://blog.testobject.org/2012/04/giving-your-android-emulator-boost .html](http://blog.testobject.org/2012/04/giving-your-android-emulator-boost.html)

谢谢和问候，
Hrishikesh Murali

# android - 如何自定义布局（高度和宽度）和布局的容器？

> ID：10779802
> 
> 赞同：1
> 
> 时间：2012-05-28T05:38:44.467
> 
> 标签：android, android-layout, android-widget

我创建了一个`TableLayout`两行，其中第一行有一个`TextView`，第二行有两列，第一行有一个，`ListView`第二个有一个`EditText`和一个，`Button`每个在不同的行中。我希望两行高度相等（正好是屏幕的一半），并且第二行的两列应该是相等的宽度（正好是屏幕的一半）。我想建立这样的东西：![在此处输入图像描述](../Images/8a472e85eb2d8955ae3be82f8f7eafd5.png)

我应该如何进行？我应该选择哪种布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T08:14:18.757

我认为您当前的解决方案行不通（因为需要相等的空间（宽度和高度）+`ListView`存在）。一种解决方案是使用嵌套`weights`（这对性能不利，但（可能，不知道您在做什么）不是会破坏您的应用程序的重要事物），如下面的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <include
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/identical_layout" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="TextView" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <ListView
            android:id="@+id/list"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1" >
        </ListView>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="vertical" >

            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="ddd" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

避免嵌套`weights`问题的另一种选择是使用`RelativeLayout`下面的方法（我还没有测试过）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <include
        android:id="@+id/included_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/identical_layout" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/included_layout" >

        <View
            android:id="@+id/anchor"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_centerVertical="true" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_above="@id/anchor"
            android:layout_alignParentTop="true"
            android:background="#99cc00"
            android:text="TextView" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_alignParentBottom="true"
            android:layout_below="@id/anchor" >

            <ListView
                android:id="@+id/list"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1" >
            </ListView>

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:orientation="vertical" >

                <EditText
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" />

                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="ddd" />
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>

</RelativeLayout> 
```

`identical_layout`布局文件代表您的`Activities`.

# c# - .NET 框架中的强类型是什么意思？

> ID：10779804
> 
> 赞同：25
> 
> 时间：2012-05-28T05:38:57.557
> 
> 标签：c#, .net, ado.net

今天早上正在看一本书，其中我发现了一段如下所述：

*表中的每个数据字段都是强类型数据成员，完全符合 .NET 的通用类型系统。*

上面几行是否意味着“用不同语言编写的对象可以像这样相互交互”

如果它意味着上面的行，那么上面的行到底意味着什么，说**不同的语言可以相互交互，就像**

我正在尝试用一个例子来解决，但到目前为止还没有成功。

或者它是我想念的东西，需要知道。请帮我理解。

提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-28T05:45:10.057

例如，您不能乘以或除以两种不同的类型，即`String vs Integer`

```
var answer = 1 * "1"; // you cannot do this 
```

你必须明确地转换它，这被称为强类型

好像你在 php 中看到的

```
$x = "3" * 1; // is correct in php 
```

所以在这里你不需要显式地转换它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-17T05:47:19.897

当我们说某些东西是强类型时，我们的意思是对象的类型是已知的和可用的。

假设我有如下功能

```
public int Add(int a, int b){
 return a+b;
} 
```

我们可以像这样调用这个函数

```
int result = Add(5,4); 
```

但是我们不能像下面这样

```
int result = Add(5.2,4.5); // We will get here compilation error. 
```

C#（以及 C++ 和许多其他语言）是强类型的，因为编译器会在编译时检测并标记这些错误。

看[这里](http://social.msdn.microsoft.com/Forums/en-US/2ea38b96-921c-4218-8c28-168f33b4bf62/-what-does-strongly-typed-xxx-mean-?forum=csharplanguage)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T05:42:29.897

不。这意味着`1`和`"1"`（或任何其他数字和字符串）是不同的值，不能在表达式中随意互换。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-28T05:48:27.570

“完全符合 .NET 的通用类型系统”意味着数据类型可用于任何 .NET 语言。因此，如果您创建了一个在 c# 中公开符合 CTS 的属性的类，则可以从 VB.net 中使用该类。

“表中的每个数据字段都是强类型数据成员”意味着您可以依赖表中值的类型，如果需要，您必须将其转换为另一种类型。你不能进行隐式转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T06:24:13.923

这意味着，如果有两个不同类型的变量，您必须对它们进行强制转换，以使操作可执行。

否则会抛出异常。

# c# - 有没有一种从哈希表中获取布尔值的好方法？

> ID：10779806
> 
> 赞同：4
> 
> 时间：2012-05-28T05:38:59.260
> 
> 标签：c#

我正在尝试从哈希表中检索布尔值...我的代码如下所示：

```
Hashtable h = new Hastable();

...

h["foo"] = true;

...

object o = h["foo"];
if( o == null ) { return false; }
if( o.GetType() != typeof(bool) ) { return false; }
return (bool)o; 
```

相反，我对对象使用这样的东西

```
return h["foo"] as MyObject; 
```

布尔值有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T06:02:59.710

*好吧，如果必须*使用Hashtable （或由于`object`其他原因键入数据），请考虑：

```
object obj = true;
bool b = (obj as bool?) ?? false;
// b -> true 
```

和：

```
object obj = "hello";
bool b = (obj as bool?) ?? false;
// b -> false 
```

也就是说，`bool?`(or `Nullable<bool>`) 很高兴成为`as`目标（因为`null`它是可空类型的有效值），并且结果很容易（与`??`）合并为`bool`。

快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T06:09:47.687

您可以使用扩展方法来帮助使工作更容易忍受：

```
public static class IDictionaryExtensions
{
    public static T? GetValue<T>(this IDictionary dictionary, object key) 
                  where T : struct
    {
        if (!dictionary.Contains(key))
            return null;
        object o = dictionary[key];
        if (o == null)
            return null;
        if (!(o is T))
            return null;
        return (T) o;
    }

    public static T GetValue<T>(this IDictionary dictionary, object key,
                                T defaultValue) where T : struct
    {
        return dictionary.GetValue<T>(key) ?? defaultValue;
    }
} 
```

用于：

```
return h.GetValue("foo", false); 
```

您可以轻松地调整它以在正确的位置引发异常，或记录缺失值或类型不匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T05:40:55.290

不要使用哈希表。自从 .NET 2.0 出现以来，这些已经过时了七年。请改用通用集合，例如 a [`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)。

```
Dictionary<string, bool> myDict = new Dictionary<string, bool>();
myDict["foo"] = true;

bool myBool = myDict["foo"]; 
```

泛型非常棒。帮自己一个忙，花几个小时研究它们。你可以从[MSDN](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)开始，我真的很喜欢 Jon Skeet 的书，[*C# in Depth*](https://rads.stackoverflow.com/amzn/click/com/1935182471)，它涵盖了这个主题……深入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T05:45:29.180

您应该使用泛型

```
Dictionary<string, bool> 
```

而不是（过时的）哈希表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-19T02:13:00.927

```
bool bVal = false;
object oVal;
if (hash.TryGetValue("foo", out oVal)) {
    bVal = (bool) oVal;
} 
```

# c# - 加载texture2d时出现xna 4.0错误

> ID：10779809
> 
> 赞同：2
> 
> 时间：2012-05-28T05:39:18.117
> 
> 标签：c#, visual-studio-2010, xna, xna-4.0

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Project
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;
        Texture2D myTexture;
        Rectangle myRectangle;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()

        {

            // Create a new SpriteBatch, which can be used to draw textures.
            //spriteBatch = new SpriteBatch(GraphicsDevice);

            Texture myTexture = Content.Load<Texture2D>("character.png");       
            myRectangle = new Rectangle(10, 100, 30, 50);
            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here
            spriteBatch.Begin();
            spriteBatch.Draw(myTexture,myRectangle,Color.White);

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

这有什么错误？这将返回加载“character.png”的错误。文件未找到。我已经创建了 character.png 并将其添加到我的项目中，但它也不起作用我使用带有 xna 4.0 的 Visual Studio 2010 c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:56:44.883

尝试这个：

```
myTexture = Content.Load<Texture2D>("character"); 
```

编辑：如果它仍然不起作用，请确保将文件设置为使用正确的内容导入器，如下所述：http: [//msdn.microsoft.com/en-us/library/bb313966.aspx](http://msdn.microsoft.com/en-us/library/bb313966.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-20T03:01:53.443

做这个：

```
Texture myTexture = Content.Load<Texture2D>("character"); 
```

**为什么它有效？**
ContentManager.Load<> 方法接受资产名称，而不是文件路径。您需要在解决方案资源管理器中单击资产，然后找到资产名称。这是 Load<> 方法的参数。
希望这会有所帮助并祝您将来好运！

# .net - .Net WCF 服务跟踪日志与日志文件管理（滚动）

> ID：10779812
> 
> 赞同：10
> 
> 时间：2012-05-28T05:39:46.373
> 
> 标签：.net, wcf, logging

我有一些 .Net WCF 服务，对于这些服务，我已配置 app.config 文件以将发送和接收的消息记录在 .svclog 文件中，该文件可由“服务跟踪查看器工具”(SvcTraceViewer.exe) 读取。这个工具很好地呈现日志文件，清楚地显示正在处理的 SOAP 消息。

我必须使用 System.Diagnostics.XmlWriterTraceListener 侦听器来正确格式化 .svclog 文件以供服务跟踪查看器工具处理。

我遇到的问题是 .svclog 文件变得太大，并且由于响应时间慢，服务跟踪查看器工具变得无法使用。

服务跟踪查看器工具确实提供了一种工具，允许在文件大小 > 40MB 时打开部分日志文件，但这仍然太慢。app.config 文件中似乎没有工具可以将 .svclog 配置为每天或当文件达到特定大小时自动创建一个新文件。

有一个名为 Microsoft.VisualBasic.Logging.FileLogTraceListener 的文本日志侦听器，它支持 logfilecreationschedule="Daily" 属性，该属性每天滚动日志文件，但是从该侦听器生成的日志文件很难让操作支持人员用作日志条目没有很好地呈现，并且大型 xml 文档造成了混乱。

这方面的最佳实践是什么，看起来我可能不得不编写一个自定义 WCF 日志扩展，这似乎有点矫枉过正，只是为了处理内置 System.Diagnostics.XmlWriterTraceListener 日志侦听器中缺少日志文件滚动功能/附加器。

我还尝试了一个脚本来停止我的应用程序并重命名日志文件，但这似乎不可能，因为在 Windows 上，handle.exe 和 openfile 实用程序无法关闭通过网络共享打开的文件，因此我无法重命名/ 如果有人通过网络共享浏览旧日志文件，则移动它。不久将发布一个单独的问题。

谢谢，马特。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T23:46:34.853

您可以自己开发，也可以使用已经存在的专用`XmlWriterTraceListener`或使用循环跟踪日志机制。

有一个专门的实现，`XmlWriterTraceListener`它在 Codeproject 上执行滚动日志跟踪：

[http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener](http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener)

使用循环跟踪，您有两个文件，每个文件最多可以存储所需跟踪日志数据总数的一半。侦听器创建一个文件并写入该文件，直到达到数据大小一半的限制，此时它切换到第二个文件。当侦听器达到第二个文件的限制时 - 它会用新的跟踪覆盖第一个文件。

[http://msdn.microsoft.com/en-us/library/aa395205.aspx](http://msdn.microsoft.com/en-us/library/aa395205.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T14:30:49.650

我拼凑了一个 Powershell 脚本，该脚本修改了 SVC 的 web.config 中的日志文件的名称，然后创建了一个 TaskScheduler 作业来每小时运行一次脚本。

```
$a = (((get-date).ToUniversalTime()).ToString("yyyyMMddThhmmssZ"))
$myLogFile = "c:\temp\$a.svclog";
$webConfig = 'C:\inetpub\wwwroot\mySVCapi\Web.config'
Function updateConfig($config) 
{ 
$doc = (Get-Content $config) -as [Xml]
$activeConnection =$doc.configuration.'system.diagnostics'.sources.source.listeners.add#.initializeData
$activeConnection.SetAttribute("initializeData", $myLogFile);
$doc.Save($config)
} 
updateConfig($webConfig) 
```

该脚本假定您的 web.config 中有类似的内容：

```
 <system.diagnostics>
<sources>
  <source name="System.ServiceModel.MessageLogging">
    <listeners>
      <add name="messages" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\temp\myDefaultLogFile.svclog" />
    </listeners>
  </source>
</sources> 
```

在 Task sched 中，Action-Start A Program 中，放入`Powershell.exe`Program/script 框，然后 `-ExecutionPolicy ByPass c:\yourfolder\amendWebConfig.ps1`在 Add arguments 框中添加。

任务运行，然后将 web.config 的 initializeData 文件更新为，例如

```
 <listeners>
      <add name="messages" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\temp\20180606T020646Z.svclog" />
    </listeners> 
```

# android - Android - 如何制作可垂直滚动的列表

> ID：10779813
> 
> 赞同：1
> 
> 时间：2012-05-28T05:39:51.347
> 
> 标签：android, list, scrollable

我是 Android 开发新手，曾尝试研究我的问题，但找不到合适的答案。

我要做的是创建一个项目列表，例如数字 0-9，并将其显示为一个列表，用户可以向上或向下滚动以选择所需的数字，从 0 开始。

我能想到的最好的例子是 HTC Sense 计时器，链接如下（不能以新用户的身份发布图片）：

感应定时器：

[![在此处输入图像描述](../Images/506582a0714470c32efd9b0e905da268.png)](https://i.stack.imgur.com/E742I.png)

我目前拥有的是一个 Spinner，但这并不是我想要的。我希望用户只需向上/向下滑动即可进行选择，而不是按下按钮来调出下拉列表来进行选择。

有没有一种我想念的简单方法来做到这一点，或者这是一件相当复杂的事情？我自己无法找到一个例子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:44:06.403

这在 android中简称为**Wheel View 。**我不太了解它的实现，但这里有一个非常好的演示。看看它。

[http://android-devblog.blogspot.in/2010/05/wheel-ui-contol.html](http://android-devblog.blogspot.in/2010/05/wheel-ui-contol.html)

这将使您开始使用它。

这里还有一个，

[http://android-devblog.blogspot.in/2011/01/android-wheel-update-custom-views-for.html](http://android-devblog.blogspot.in/2011/01/android-wheel-update-custom-views-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:52:32.230

试试 ScrollView，也许这会起作用：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/ScrollView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"

 <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

//Your Components

    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T05:53:32.750

您需要为此使用列表视图和适配器。它是实现项目垂直滚动列表的一种非常简单的方法。请参考以下链接中的代码：http: [//developer.android.com/resources/tutorials/views/hello-listview.html](http://developer.android.com/resources/tutorials/views/hello-listview.html)

# asp.net - 在 MAC 上使用带有 OS Windows 7 的 VMWare Fusion 创建 ASP .NET 用户身份验证连接字符串

> ID：10779817
> 
> 赞同：0
> 
> 时间：2012-05-28T05:40:32.050
> 
> 标签：asp.net, macos, sql-server-express

我正在尝试使用随 Windows 7 安装的 VMWare Fusion 在 MAC 上创建 ASP .NET 用户身份验证提供程序。我创建了名为 CustomerOrders 的 SQLExpress 数据库，并在 Visual Studio 2010 的服务器资源管理器中连接到数据库。

当我尝试使用网站管理工具时，我收到此错误：在应用程序配置中找不到连接名称“ApplicationServices”或连接字符串为空。（\vmware-host\shared 文件夹\documents\visual studio 2010\Projects\CustomerOrders\CustomerOrders\web.config）

我想不通的是我需要在 Web.Config 中使用的连接字符串，以便为在 VMWare Fusion 环境中运行的该项目设置 ASP .NET 身份验证提供程序。

我的本地数据库的连接字符串是：Data Source=WIN-NOABML9MSVB\sqlexpress;Initial Catalog=CustomerOrders;Integrated Security=True

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T23:41:36.217

首先，确保您[在 web.config 中指定了连接字符串](http://msdn.microsoft.com/en-us/library/bf7sd233.aspx)：

```
<connectionStrings>
   <add name="ApplicationServices" 
        connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=CustomerOrders;Integrated Security=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

（请注意，我使用 .\SQLEXPRESS 而不是计算机名，以确保我使用本地命名实例）

然后，如果您还没有这样做，[请确保您创建了`CustomerOrders`数据库并运行模式工具来创建您需要的数据库对象](http://weblogs.asp.net/sukumarraju/archive/2009/10/02/installing-asp-net-membership-services-database-in-sql-server-expreess.aspx)。

# facebook - 通过应用发布的 Facebook 状态帖子未显示在 Newsfeed 中

> ID：10779824
> 
> 赞同：1
> 
> 时间：2012-05-28T05:41:55.263
> 
> 标签：facebook, facebook-graph-api, restfb

我正在使用 facebook graph api 通过我的应用程序向 Facebook 发布状态。

> 问题是我在 NewsFeed 中看不到状态帖子，但在用户的 Wall 中。

我只是`me/feed`相应地使用了 GraphAPI 文档。

当我搜索这个问题时，我看到了非常相似的东西[http://developers.facebook.com/bugs/302089206530370](http://developers.facebook.com/bugs/302089206530370)。

这一款也很相似。[在 newsfeed 中看不到提要上的 Facebook 图表帖子](http://facebook.stackoverflow.com/questions/8922085/facebook-graph-post-on-feed-is-not-visible-in-newsfeed)，但该 API 很久以前就已弃用，并且与我使用的 API 不同。

这个和我的问题一模一样。[http://developers.facebook.com/bugs/353691264693202](http://developers.facebook.com/bugs/353691264693202)但遗憾的是，facebook 没有提供详细信息。找不到重复的问题。

我要求`scope=user_photos,read_stream,publish_stream,offline_access,user_status,friends_status`授予我的应用程序的访问权限。

有什么我错过的吗？

已编辑：我确认了我是否已设置在我的新闻源中隐藏我的应用程序帖子的设置。但是我没有设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:36:18.527

我认为这是 facebook 的错误。已经找到了类似的报告[http://developers.facebook.com/bugs/372776119424090?browse=search_4fc3354fb769c0726100997](http://developers.facebook.com/bugs/372776119424090?browse=search_4fc3354fb769c0726100997)

目前，我只能等待 Facebook 修复该错误。

谢谢。

# jquery - DatePicker JQUERY-UI 控件不响应格式化

> ID：10779828
> 
> 赞同：0
> 
> 时间：2012-05-28T05:42:34.697
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

嗨，伙计们，我正在用这个把头发拉出来。

我无法让日期选择器 JQUERY UI 控件响应任何内容，以下代码显示警报，但无论我设置什么值，日期选择器都只是默认设置。在下面的代码中，我只显示了一个月，并且没有设置默认日期：

```
$(document).ready(function () {

    onload:
    {
        alert(1);
        $('#FirstPeriodReconDate').datepicker({ defaultDate: "+1w",
            changeMonth: false,
            numberOfMonths: 3
        });
        alert(2);........ 
```

作为最后一次放弃尝试，我刚刚升级了我的 JQUERY 版本，但还是一样，它没有任何区别。在我的应用程序中，我使用 datepicker 设置值，它被广泛使用，一切都很好。这是我第一次需要对控件实例进行任何更改。我已经删除了所有其他 JQUERY 代码，现在只留下了一个简单的示例，但仍然一无所获。

这是我的 HTML 标记的摘录。注意，可以很好地引用控件，表单保存回数据库并显示值等。就像我说的一样，除了我尝试更改控件属性时，一切正常：

> ```
>  <li>
>                         <label for="FirstPeriodReconDate">
>                             <strong>First Recon Date:</strong>
>                             </label>
>                         <%= Html.TextBox("FirstPeriodReconDate", String.Format("{0:dd/MM/yyyy}", 
> ```
> 
> Model.PaymentFrequency.FirstPeriodReconDate), new { @class = "date" })%> <%= Html.ValidationMessage("FirstPeriodReconDate", "*")%>

任何人都建议任何东西，J

我只是注意到我有包含并针对我的所有 DATE 字段运行的全局代码，这似乎是在我的新代码运行后执行的。还没有弄清楚，但可能需要创建一个新类，以便我可以在需要的地方进行自定义行为。我有一个 global.js 里面有这个：

> $(function() { $('.date').datepicker({ showOn: 'button', buttonImage: $("#AbsolutePath").val() + 'Content/images/Control_MonthCalendar.bmp', buttonText: '输入日期', buttonImageOnly: true, dateFormat: 'dd/mm/yy', yearRange: '-20:+50', changeMonth: true, changeYear: true });......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:49:28.953

尝试更改格式，如[http://jqueryui.com/demos/datepicker/#options](http://jqueryui.com/demos/datepicker/#options)所示。

在您的 html 头中添加以下函数：

```
<script type="text/javascript">
function  changeFormat() {
    $("#FirstPeriodReconDate").datepicker("option", "defaultDate", +1 );
    $("#FirstPeriodReconDate").datepicker( "option", "changeMonth", true );
    $("#FirstPeriodReconDate").datepicker( "option", "numberOfMonths", 5);
}
</script> 
```

并从任何地方调用它，例如：

```
<input type="button" value="click" onclick="changeFormat()"/> 
```

或者如果你想在页面加载时调用它：

```
<body onload="changeFormat()">
...
...
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T09:56:31.863

```
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Format date</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-    ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#datepicker" ).datepicker();
$( "#format" ).change(function() {
    $( "#datepicker" ).datepicker( "option", "dateFormat", $( this ).val() );
});
});
</script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" size="30" /></p>

<p>Format options:<br />
<select id="format">
<option value="mm/dd/yy">Default - mm/dd/yy</option>
<option value="yy-mm-dd">ISO 8601 - yy-mm-dd</option>
<option value="d M, y">Short - d M, y</option>
<option value="d MM, y">Medium - d MM, y</option>
<option value="DD, d MM, yy">Full - DD, d MM, yy</option>
<option value="'day' d 'of' MM 'in the year' yy">With text - 'day' d 'of' MM 'in the      year' yy</option>
</select>
</p> 
```

# android - 圆形的轮子动画

> ID：10779829
> 
> 赞同：0
> 
> 时间：2012-05-28T05:42:35.153
> 
> 标签：android, animation

我是安卓新手。我想为我的应用程序主页制作像[这样](https://play.google.com/store/apps/details?id=ShareBuilderMobile.android&feature=search_result#?t=W251bGwsMSwxLDEsIlNoYXJlQnVpbGRlck1vYmlsZS5hbmRyb2lkIl0)的圆轮动画类型的动画，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:40:43.440

您正在寻找的是所谓的“ **3D 轮播视图**”。我们没有太多基于此的例子。但是这里仍然是一个非常好的链接，其中包含此示例的源代码。

[http://www.codeproject.com/Articles/146145/Android-3D-Carousel](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

但是您仍然必须推出一些东西来进行更改并对其进行自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:52:07.093

请检查下面的链接，它对如何实现此功能的帮助（封面流）

[http://code.google.com/p/android-coverflow/](http://code.google.com/p/android-coverflow/)

[http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

# templates - ATL COM - 如何重用接口方法的代码

> ID：10779834
> 
> 赞同：1
> 
> 时间：2012-05-28T05:43:03.243
> 
> 标签：templates, visual-c++, inheritance, com, atl

我有几个接口，例如 IA、IB、IC 等，它们共享共同的属性，例如 Site。我想知道如何为这些接口重用代码（请保存我关于 COM 聚合的答案）。

目前的实现如下：

```
class CA
// ATL specific...
{
    STDMETHODIMP get_Site(...) {...}
    STDMETHODIMP put_Site(...) {...}
}

class BA
// ATL specific...
{
    STDMETHODIMP get_Site(...) {...}
    STDMETHODIMP put_Site(...) {...}
}

class CC
// ATL specific...
{
    STDMETHODIMP get_Site(...) {...}
    STDMETHODIMP put_Site(...) {...}
} 
```

我想要实现（但不能）如下。

```
template<typename T>
class SharedProperties
{
    STDMETHODIMP get_Site(...) {...}
    STDMETHODIMP put_Site(...) {...}
}

class CA :
// ATL specific...
SharedProperties<CA>
{
    // properties are inherited and are accessible from IC
}

class BA
// ATL specific...
SharedProperties<CB>
{
    // properties are inherited and are accessible from IB
}

class CC
// ATL specific...
SharedProperties<CC>
{
// properties are inherited and are accessible from IA
} 
```

[我在阅读（ http://vcfaq.mvps.org/com/7.htm](http://vcfaq.mvps.org/com/7.htm) ）后遇到了这个想法，但该网站没有一个工作示例，无论我尝试了多少，我都无法让它工作。我不断收到“无法实例化抽象类”，因为未实现纯虚函数 get_Site 和 put_Site（根据第二个片段）。

**编辑** 请注意我使用的是 VS2010。下面的示例实现：

```
class ATL_NO_VTABLE CArticle :
    public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CArticle, &CLSID_Article>,
    public IDispatchImpl<IArticle, &IID_IArticle, &LIBID_GeodeEdiLib, /*wMajor =*/ 1, /*wMinor =*/ 0>
{
public:
    CArticle()
    {
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:07:50.357

The compiler does not know that the methods `get_Site` and `put_Site`implement the methods from the interface. You need to inherit the SharedProperties class template from the corresponding interface. That's the argument to make `SharedProperties` a template at all.

```
interface IA
{
    STDMETHOD(get_Site)() = 0;
    STDMETHOD(put_Site)() = 0;
};

template<typename T>
class Sharedproperties : T
{
public:
    STDMETHODIMP get_Site() { return E_NOTIMPL; };
    STDMETHODIMP put_Site() { return E_NOTIMPL; };
};

class CAX : public IA
{
    STDMETHOD(other)() { return S_OK; }
}

class CA: public Sharedproperties<CAX>
{
public:
    CA() {}
}; 
```

Please note that the class CA is not directly inherited from the interface IA.

*Edit:* The VS2008 class wizard generates this inheritance for a simple ATL class object:

```
class ATL_NO_VTABLE CMyObject :
    public CComObjectRootEx<CComMultiThreadModel>,
    public CComCoClass<CMyObject, &CLSID_MyObject>,
    IMyObject 
```

where `IMyObject` is the in the IDL defined interface. So in ATL context you just need to replace the IMyObject inheritance:

```
class ATL_NO_VTABLE CMyObject :
    public CComObjectRootEx<CComMultiThreadModel>,
    public CComCoClass<CMyObject, &CLSID_MyObject>,
    public Sharedproperties<MyIntermediateClass> 
```

# c# - C# 类中的数组引用

> ID：10779836
> 
> 赞同：2
> 
> 时间：2012-05-28T05:43:30.897
> 
> 标签：c#, arrays, class

我有一个数组，想创建两个包含该数组引用的类。当我更改数组中元素的值时，我想查看类的变化。我想这样做的原因是我有一个数组，我有很多类应该包含或到达这个数组。我怎样才能做到这一点？

在 C 中，我将数组的指针放在现有结构中并解决问题，但我如何在 C# 中做到这一点？没有数组指针afaik。

```
int CommonArray[2] = {1, 2};

struct
{
    int a;
    int *CommonArray;
}S1;

struct
{
    int b;
    int *CommonArray;
}S2;

S1.CommonArray = &CommonArray[0];
S2.CommonArray = &CommonArray[0]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:46:31.613

所有数组都是 C# 中的引用类型，即使数组的*元素*类型是值类型。所以这会很好：

```
public class Foo {
    private readonly int[] array;

    public Foo(int[] array) {
        this.array = array;
    }

    // Code which uses the array
}

// This is just a copy of Foo. You could also demonstrate this by
// creating two separate instances of Foo which happen to refer to the same array
public class Bar {
    private readonly int[] array;

    public Bar(int[] array) {
        this.array = array;
    }

    // Code which uses the array
}

...

int[] array = { 10, 20 };
Foo foo = new Foo(array);
Bar bar = new Bar(array);

// Any changes to the contents of array will be "seen" via the array
// references in foo and bar 
```

# foursquare - Foursquare 身份验证，传递自定义参数

> ID：10779838
> 
> 赞同：2
> 
> 时间：2012-05-28T05:43:37.587
> 
> 标签：foursquare

有没有办法将自定义参数传递给 Foursquare，它会在它的响应中传回？

在[Facebook](http://developers.facebook.com/docs/authentication/server-side/)中，您可以使用 state 参数传递自定义参数：

```
https://www.facebook.com/dialog/oauth? 
  client_id=YOUR_APP_ID
  &redirect_uri=YOUR_REDIRECT_URI
  &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
  &state=SOME_ARBITRARY_BUT_UNIQUE_STRING 
```

state 参数应设置为您为每个身份验证请求唯一生成的任意字符串。一旦用户授权您的应用程序，该值将作为参数传递回您的 redirect_uri，您应该检查返回的值是否与您在流程开始时传入的值匹配。这通过确保传入重定向是您启动的身份验证流的一部分来防止跨站点请求伪造。

[谷歌](https://developers.google.com/accounts/docs/OAuth2WebServer)也有 state 参数：

state
any string
表示收到响应后可能对您的应用程序有用的任何状态。Google 授权服务器会往返此参数，因此您的应用程序会收到它发送的相同值。可能的用途包括将用户重定向到站点中的正确资源、nonce 和跨站点请求伪造缓解。

使用 Foursquare 也将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:45:36.557

您可以在 redirect_uri 中指定其他 URL 参数，这些参数不属于注册的回调 URL 的一部分，它们将在成功授权后传递。

# iphone - 铃声下载

> ID：10779839
> 
> 赞同：-1
> 
> 时间：2012-05-28T05:43:48.320
> 
> 标签：iphone, download

我是 iPhone 新手。我有问题请回答.. 我有一些铃声我想放在我的 xcode 中，想要它的人可以从我的应用程序中下载。怎么可能。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:56:48.390

据我了解，您的 xcode 捆绑包（项目）中包含一些音频文件，现在您想为用户提供选项，作为收费或免费下载。如果我的理解或猜测是完全正确的，那么您肯定会按照下面的链接 [In-app-purchase](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-in-app-purchases/)进行操作。一切顺利

# c++ - C++ 重载运算符<<

> ID：10779841
> 
> 赞同：4
> 
> 时间：2012-05-28T05:44:09.337
> 
> 标签：c++, operator-overloading, overloading

我正在尝试为类重载 << 运算符以在 Java 中模拟 toString() 。我有一个班级，并且有我想要输出`NumExpr`的私有变量。`number`所以他们在这里：

```
NumExpr::NumExpr( string n ) {
    number = atoi( n.c_str() );
}
string NumExpr::name() {
    return "num";
}
ostream & operator<<(ostream &s, const NumExpr &num) {
    s << num.number;
    return s;
} 
```

我把它变成了一个朋友函数，所以它可以访问私有变量

```
class NumExpr : public Expr {
    public:
        NumExpr( string v );
        string name();
    private:
        int number;
        friend ostream& operator<<(ostream &s, const NumExpr &num);
}; 
```

但是我收到了这个错误

> ./ast/Expr.cpp：在函数中 ?std::ostream& operator<<(std::ostream&, const NumExpr&)?: ./ast/Expr.cpp:50: 错误：不匹配 ?operator<NumExpr::数字？./ast/Expr.cpp:49：注意：候选者是：std::ostream& operator<<(std::ostream&, const NumExpr&)

我已经搜索过这个错误，人们似乎遇到了同样的问题，但我的似乎看起来像人们给出的解决方案。我在做什么从根本上是错误的，或者是否有一些我不知道的语法恶作剧？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T06:01:22.043

好的，在这里，一点点玩耍我可以**[重现您的问题](http://ideone.com/xCuQo)**：

问题是您忘记包含 iostream 头文件。
添加：

```
#include<iostream> 
```

它应该可以正常工作:)

**编辑：**
正如@James Kanze 在评论中正确建议的那样，包括

```
#include<istream> 
```

因为你不需要`iostream`真正的一切。包含inside of
的缺点是编译时间几乎没有增加。`iostream``istream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:50:24.020

在本页面：

[http://www.cplusplus.com/forum/beginner/13164/](http://www.cplusplus.com/forum/beginner/13164/)

它说有这样的朋友功能：

```
friend std::ostream& operator<< (std::ostream&, const NumExpr&); <- 
```

所以没有变量减速。只是

```
const NumExpr 
```

有什么帮助吗？

# facebook - 使用 fb 登录从网站注销时也从 facebook.com 注销

> ID：10779851
> 
> 赞同：0
> 
> 时间：2012-05-28T05:45:23.070
> 
> 标签：facebook, yii

我已经在我的网站中集成了 facebook 登录。我正在使用 php-sdk。
**场景：**在单独的选项卡中登录 facebook.com，然后使用 facebook 登录到我的网站。现在，当我从我的网站注销时，我也会自动在另一个选项卡中从 facebook.com 注销。与 facebook 集成的其他网站通常不是这种情况。我只想从我的网站而不是 facebook.com 销毁会话。
这是代码
登录

```
 $response = file_get_contents($token_url); // get the token
     $params = null;
     parse_str($response, $params);
     $graph_url = "https://graph.facebook.com/me?access_token=" 
       . $params['access_token'];

     $user = json_decode(file_get_contents($graph_url)); 
```

登出

```
 $fbLogoutUrl = 'https://www.facebook.com/logout.php?next=http://www.mysite.com'.Yii::app()->homeUrl.'&access_token='.$fbLogout->toke
$this->redirect($fbLogoutUrl); 
```

我正在存储令牌并使用它来注销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:40:12.620

这是预期的行为。调用注销功能将使您从 Facebook 和您的网站中注销。JavaScript SDK 也是如此。

如果您只想让用户退出您的站点，请销毁会话 ( `session_destroy()`) 并删除 Facebook 在您的站点上设置的 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T04:16:02.903

我遇到和你一样的问题，我已经解决了

我使用[yii的扩展名](http://www.yiiframework.com/extension/facebook-opengraph/)

在文件 main 的扩展配置中，我编辑了这一行：

```
 //'status'=>true, // JS SDK - check login status 
```

到

```
'status'=>false, // JS SDK - check login status 
```

可能会帮助你

# java - jpcap：IP包头长度

> ID：10779854
> 
> 赞同：0
> 
> 时间：2012-05-28T05:45:51.947
> 
> 标签：java, networking, jpcap

在 JPCap 中，我通过以下代码获取 IP 数据包的标头长度

```
 IPPacket IP_pac = (IPPacket) packet;
   System.out.println(IP_pac.len); // header length 
```

我通过以下方式获得IP数据包的数据长度

```
 System.out.println(IP_pac.data.length); 
```

现在的问题是当IP数据包的数据长度为0时，IP数据包（IPV4）的长度应该是b 20字节。但是结果显示IP数据包的标头长度为60和54。其次，我是否考虑这些长度IP_pac.data.length 默认为字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:58:39.327

根据[API](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/packet/IPPacket.html)，长度很短：

```
public short length 
```

`packet.data`给你 a `byte[]`，所以调用`.length`它会返回 a `int`（就像在所有其他数组上一样）。

# ios - 两个 ViewControllers 方向

> ID：10779856
> 
> 赞同：0
> 
> 时间：2012-05-28T05:46:03.163
> 
> 标签：ios, uinavigationcontroller, orientation, mainwindow

我想出了一个奇怪的场景，我在 MainWindow.xib 中使用了一个 NavigationViewController 和一个 ViewController（命名容器）。

NavigationController 加载后续视图，并且并行地，另一个 ViewController（容器）在所有内容之上加载一些图像 - 无论 NavigationViewController 显示什么视图。

当我旋转设备时， NavigationController 的后续视图会按预期旋转，但容器及其后续视图不会旋转。

这是我的 MainWindow.xib 的屏幕截图

![在此处输入图像描述](../Images/4f69a5db06c65312b4d07e3f7c5f6aab.png)

这是代码。

在.h

```
UINavigationController *navigationController;
IBOutlet UIViewController *container; 
```

在 .m (ApplicationDidFinishLaunchingWithOptions)

```
[window addSubview:navigationController.view];
[window addSubview:container.view];
[window makeKeyAndVisible]; 
```

我还尝试创建一个单独的类并将其分配给 viewController。(它的 ViewDidLoad) 方法触发但它没有出现在 (ShouldRotateToInterfaceOrientation)

我在某处读到 IOS 不支持多个 ViewController 的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:57:49.737

我认为你应该试试这个，因为你试图在一个导航中使用两个视图。所以不要制作窗口的子视图，制作主视图的子视图，如：-

```
[window addSubview:navigationController.view];
 [navigationController.view addSubview:container.view];
[window makeKeyAndVisible]; 
```

我没有尝试过这段代码，但我只是提出想法。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:03:41.790

除非您使用容器视图，否则屏幕上应该只有一个 viewController。

请参阅[类参考的](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)**实现容器视图控制器**部分。

非常简短的版本是您需要创建自己的容器，然后使用它们描述的方法将两个视图控制器添加到其中：

> 以下是您可能需要调用的基本方法：
> 
> *   addChildViewController：
> *   removeFromParentViewController
> *   transitionFromViewController:toViewController:duration:options:animations:completion:
> *   willMoveToParentViewController：
> *   didMoveToParentViewController：

# sql - 在 Hibernate 中同时创建动态 sql；我如何实现 1=1

> ID：10779861
> 
> 赞同：0
> 
> 时间：2012-05-28T05:46:44.210
> 
> 标签：sql, hibernate

我正在使用休眠。我需要在下面创建查询。subContest 可能为 null，在这种情况下`subContest_id=:cont`不应成为 where 子句的一部分。在常规 SQL 中创建动态 sql 时；对于这种情况，我曾经做过，`subContest_id = subContest_id ;`但在下面的情况下如何实现。在这里，如果我尝试`query.setParameter( "cont", "subContest_id " );`它会给出异常，因为 cont 应该是一个 id 而不是一个字符串。

```
 Query query = getEntityManager().createQuery( "select * from Upload where moderated=:mod, subContest_id=:cont order by lastModifiedTime desc " );
    query.setParameter( "cont", subContest.getId() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:02:44.207

您可以尝试在休眠中使用条件查询

```
Criteria criteria = session.createCriteria(Upload.class); 
```

您可以将 where 子句添加为限制

```
Criteria criteria = session.createCriteria(Upload.class)
    .add(Restrictions.eq("mode", value)); 
```

在您的情况下，您想在添加限制之前检查 null

```
if(subContest_id!=null){
        criteria.add(Expression.le("subContest_id",subContest_id));
    } 
```

最后 order by 可以使用这个来完成

```
Criteria criteria = session.createCriteria(Upload.class)
    .addOrder( Order.desc("lastModifiedTime") ); 
```

有关如何使用条件查询的详细信息，请参阅[此处](http://www.mkyong.com/hibernate/hibernate-criteria-examples/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T09:25:05.657

```
 Query query = null;
     if(cont != null){
        query = getEntityManager().createQuery( "select * from Upload where moderated=:mod, subContest_id=:cont order by lastModifiedTime desc " );
 query.setParameter( "cont", subContest.getId() );
 query.setParameter( "mod", moderated.getId() );
     } esle {
        query = getEntityManager().createQuery( "select * from Upload where moderated=:mod order by lastModifiedTime desc " );
 query.setParameter( "mod", moderated.getId() );
     } 
```

# android - 我们如何在android中单击按钮时显示页面卷曲动画

> ID：10779862
> 
> 赞同：11
> 
> 时间：2012-05-28T05:46:45.440
> 
> 标签：android, android-animation, page-curl

我在我的应用程序中使用 Page curl 动画。

代码可以在这里找到：[https](https://github.com/harism/android_page_curl/) ://github.com/harism/android_page_curl/ 。

该代码工作正常，但我想对其进行一些修改。

1.无背景全屏显示图像。

2.我也想在点击按钮时显示这个卷曲动画。

邮件 CurlActvity 类的代码是[http://pastebin.com/ZLzP6Zxt](http://pastebin.com/ZLzP6Zxt)。

如果有人对我必须在哪里更改代码有一些想法，请帮助我。任何帮助表示赞赏。

**编辑：** 第一个问题要在没有背景的情况下全屏显示图像，可以通过`private class SizeChangedObserver`. 唯一的问题是设置按钮的动画 onClick。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T07:20:58.477

对于全屏显示，您必须像这样使用

```
private class SizeChangedObserver implements CurlView.SizeChangedObserver {
        public void onSizeChanged(int w, int h) {
            if (w > h) {
                mCurlView.setViewMode(CurlView.SHOW_TWO_PAGES);
                mCurlView.setMargins(0f, 0f, 0f, 0f);
            } else {
                mCurlView.setViewMode(CurlView.SHOW_ONE_PAGE);
                mCurlView.setMargins(0f, 0f, 0f, 0f);
            }
        }
    }

} 
```

还要显示动画，请参阅该链接[Page curl animation - issue](https://stackoverflow.com/questions/8485204/page-curl-animation-issue/8485386#8485386)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T20:45:53.407

1.  你试过改变

    整数边距 = 7；

    int 边框 = 3;

到埃克斯。

```
int margin = 0;
int border = 0; 
```

loadBitmap(..) 函数？

实际上，我前段时间在我从事的一个项目中删除了 loadBitmap 中的边界和边距，但我不再有代码了..

# iphone - 将 NSString 显示为 HTML 文本 - 将字符串显示为链接

> ID：10779865
> 
> 赞同：0
> 
> 时间：2012-05-28T05:47:24.563
> 
> 标签：iphone, html, nsstring

我有一个字符串，其中可能有电话号码、邮件地址、网址、电子邮件地址，也可能是一些纯文本。例如：我的电话号码是 8009000300。

首先，如何将此字符串显示为 HTML 文本？

其次，如果显示为 HTML 文本，8009000300（或网址或邮件地址或电子邮件地址）会/可以显示为链接吗？我将采用这种方法，因为**NIAttributedLabel**对我不起作用。

**注意**：电话号码（或其他特殊字符串）可能位于完整字符串之间或字符串的开头/结尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:42:05.997

您可以根据您的要求用于`UITextView`显示文本并将`dataDetectorTypes`属性设置为 。`UIDataDetectorTypeLink``UIDataDetectorTypePhoneNumber`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T05:51:39.173

您可以使用 CoreText，或尝试[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)或[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。

# mysql - JDBC 和 MySQL for SQL 中的不同结果 select where datetime > date

> ID：10779866
> 
> 赞同：1
> 
> 时间：2012-05-28T05:47:36.523
> 
> 标签：mysql, sql, jdbc

我正在尝试根据 DATETIME 从表中选择条目的子集。在命令行中，我输入

```
SELECT * FROM routes_table WHERE time > '2012-05-28 11:01:01' ORDER BY time 
```

我明白了

```
mysql> SELECT * FROM routes_table WHERE time > '2012-05-28 11:01:01' ORDER BY time;
+-----------+--------------+------+---------------------+--------------+
| driver    | type         | num  | time                | destination  |
+-----------+--------------+------+---------------------+--------------+
| Ma Lvjing | Bus          | B127 | 2012-06-22 15:00:00 | Colina Hotel |
+-----------+--------------+------+---------------------+--------------+
1 row in set (0.00 sec) 
```

但是，当通过 JDBC 执行完全相同的查询时，我会得到表的所有结果，包括时间早于 '2012-05-28 11:01:01' 的条目。知道为什么会这样吗？

这是 JDBC 代码的一部分，在 JSP 中

```
String database = "routes";
String routes_table = "routes_table";
String column_time = "time";
<%
    try {
        Class.forName("com.mysql.jdbc.Driver"); //Load the MySQL driver
        con = DriverManager.getConnection("jdbc:mysql://localhost/"
                + database, "root", "admin");
        stmt = con.createStatement();

        String currentDATETIME = new TimeToolbox().getCurrentDATETIME();

        rs = stmt.executeQuery("SELECT * FROM " + routes_table + " WHERE "
                + column_time + " > '" + currentDATETIME + "'"
                + " ORDER BY " + column_time);
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:08:37.287

您应该使用带有参数和[日期变量的](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html)[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)来传递日期的值，这样您最有可能解决问题并防止 SQL 注入...

```
String query = "SELECT * FROM " + routes_table + " WHERE "
                + column_time + " > ?"
                + " ORDER BY " + column_time;
PreparedStatement prest = con.prepareStatement(query);
prest.setDate(1,new Date()); 
```

# android - 什么是 Android 依赖项？从构建路径中删除它，发生 ClassNotFoundException

> ID：10779868
> 
> 赞同：8
> 
> 时间：2012-05-28T05:47:41.833
> 
> 标签：android, eclipse, buildpath

我正在做一个团队项目。我`.jar`在构建路径中包含一个文件并提交给 SVN。当我更新工作目录中的代码时，Eclipse 中会出现一个名为“Android Dependencies”的新文件夹。如果我让它在那里，我的程序就会运行；如果我删除它，我的程序会报告一个`ClassNotFoundException`.

现在如何解决这个问题`ClassNotFoundException`？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-05T01:26:52.283

对于那些在阅读删除 Android Dependencies 虚拟文件夹将破坏您的项目的评论时心碎的人，有一个简单的解决方法。

1.  右键单击被破坏的项目
2.  在下拉列表中选择“Android 工具 > 修复项目属性”

在尝试设置我的 git 存储库时，我冲洗了我的项目依赖项，这已解决。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T05:54:21.590

*Android Dependencies*是一个虚拟文件夹，Eclipse 在其中显示项目所依赖的 JAR 文件。它不是物理文件夹；你不会在你的硬盘上找到它。并且该文件夹未签入 Subversion。

不要删除该文件夹。你会破坏你的项目。

要修复它，只需恢复到较旧的 Subversion 版本并再次签入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-31T00:20:13.097

在为我的项目设置 git repo 后，我遇到了类似的问题。

问题是 appcompat 导入丢失了它的文件夹引用。

如果提到的“修复项目属性”对您不起作用，请尝试以下操作：

1.  转到项目 > 属性
2.  转到“Android”标签
3.  在“库”下，如果 appcompat 文件夹旁边有一个红色的“X”，请将其删除，然后点击“添加”并再次添加。参考现在应该显示一个绿色勾号。
4.  如果需要，保存并清理项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-08T07:16:51.157

如果您还在 Android 项目属性中将项目构建目标标记为低于 API 级别 16，则会出现错误，因为在此级别之前，没有 Android 依赖项。

# xquery - Xquery：一次选择n条记录

> ID：10779869
> 
> 赞同：1
> 
> 时间：2012-05-28T05:47:42.360
> 
> 标签：xquery, xquery-sql

我正在使用 XQUERY，我在数据库中保存了 25000 条记录，我想以块（1000）的形式选择这些记录，如何递归获取记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:55:46.643

## 窗口查询</h2>

您可以为此目的使用[翻滚窗口](http://www.zorba-xquery.com/html/demo#ezCasVWmzGJi/4+RbQH3UZCarqA=)，遗憾的是许多 XQuery 引擎还不支持它。

* * *

对于以下建议，您必须将结果包装到 XML 中，因为 XQuery 只知道平面序列，不知道嵌套序列。

## 建造自己的翻滚窗户

您可以构建自己的翻滚窗口函数，看起来像这样，它创建`$count`每个包含“项目”元素的“窗口”元素：

```
declare function local:window($seq as item()*, $size as xs:integer) as item()* {
    for $i in 1 to xs:integer(fn:ceiling(count($seq) div $size))
  return
      element {"window"} {
          for $j in (($i - 1) * $size + 1) to $i*$size
          return 
              element {"item"} {$seq[$j]}
        }
};

local:window((2, 4, 6, 8, 10, 12, 14), 3) 
```

## 递归窗口的拆分序列

如果你想递归地解决这个问题，你将需要一些 split 函数，遗憾的是在标准 xquery 中不可用。您可以使用`$n=1000`, 使用“头”元素并使用“尾”递归调用您的“工作函数”。

```
declare function local:split($seq as item()*, $n as xs:integer) as element()* {
    (
        element {"head"} {
            for $i in subsequence($seq, 1, $n)
            return element {"item"} {$i}
        },
        element {"tail"} {
            for $i in subsequence($seq, $n+1)
            return element {"item"} {$i}
        }
    )
};

local:split((2, 4, 6, 8, 10, 12, 14), 3) 
```

要将尾部元素作为序列访问，请使用

```
local:split((2, 4, 6, 8, 10, 12, 14), 3)[2]//item/data() 
```

# php - 自动做一些没有打开页面的事情

> ID：10779870
> 
> 赞同：0
> 
> 时间：2012-05-28T05:47:57.423
> 
> 标签：php, automation

我想让脚本每 15 分钟连接到 4 个地址并获取新链接。我如何在每次不打开页面的情况下制作页面并且脚本自动执行此操作？？？

php可以制作这个脚本吗？如果我需要一些程序，请告诉我。

像这样 ：

```
 $ad1='http://www.avator.com';
 $ad2='http://www.miniclip.com';
 $ad3='http://www.nikani.com';
    link1=str('http://www.','$ad1);
    do This evry 15 min on server automate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:22:35.237

正如@k102 提到的，使用[cron](http://en.wikipedia.org/wiki/Cron)。它允许您安排在任何时间间隔发生的作业。如果您使用的是 Windows，请查看此 Stack Overflow 答案：[什么是 Windows 版本的 cron？](https://stackoverflow.com/questions/132971/what-is-the-windows-version-of-cron)

# linux - :1:1: 错误：宏名必须是标识符

> ID：10779872
> 
> 赞同：11
> 
> 时间：2012-05-28T05:48:09.987
> 
> 标签：linux, command-line, gnu-make

我是 Linux 和 makefile 的新手。我有一个生成 .a 文件的生成文件。当我运行 makefile 时，出现以下错误。我不知道从代码的哪一部分发生了错误。

```
[oracle@dyl02703app004 erm]# make -f erm_make_ida all
.... Compiling /home/wholesale/children/dev5/comps/erm/obj/ermparseyac.c
cc  -g                         -DANSI -D -DTRACE_ON -DIDA_VERSION='"ISP-RG-V5.10.7GEN2A"' -DNO_MCP -DBUILDING_ERP  -I/home/wholesale/children/dev5/comps/erm/include -I/home/wholesale/children/dev5/comps/erm/src -I/home/wholesale/children/dev5/comps/erm/module_test  -I/home/wholesale/children/dev5/comps/erm/include  -I/home/wholesale/children/dev5/comps/cfm/include    -c /home/wholesale/children/dev5/comps/erm/src/ermparseyac.c -o /home/wholesale/children/dev5/comps/erm/obj/ermparseyac.o
<command line>:1:1: error: macro names must be identifiers
make: *** [/home/wholesale/children/dev5/comps/erm/obj/ermparseyac.o] Error 1 
```

有什么建议么...？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-28T05:50:38.590

你有`-D`一面没有名字的旗帜。查看你的makefile，看看是什么原因造成的。

# c# - 检查文件是否存在创建新的c#

> ID：10779878
> 
> 赞同：0
> 
> 时间：2012-05-28T05:48:56.303
> 
> 标签：c#, winforms, file

如果文件存在或在那一刻正在使用，我该如何创建新的 log1、log2、log3 等。现在，当我启动应用程序时，我无法启动第二个，因为日志文件正在使用中。我必须创建第二个日志文件或以某种方式写入同一个文件？

编辑：

这是适合我的解决方案。

```
if (String.IsNullOrEmpty(this.LogFile1))
            {
                string fn = "\\log.txt";
                while (File.Exists(fn))
                {
                    fn = "\\log1.txt";
                }
                this.LogFile1 = fn;
            }
            return this.LogFile1; 
```

并对我的代码进行一些编辑：

```
 if (!File.Exists(this.LogFile))
            {
                log = new StreamWriter(this.LogFile);
            }

            else
            {
                log = File.AppendText(this.LogFile);
            } 
```

现在，如果我有 log.txt 程序将创建新的 log1.txt。如果它们都存在将创建 log11.txt 等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T05:53:05.033

试试这个。这是我使用的，它工作正常

```
 StreamWriter sw;

  if (!File.Exists(path))
                    {

                        sw = File.CreateText(path);
                    }

                    else
                    {
                        sw = File.AppendText(path);

                    }

                    sw.WriteLine(ex.Message);
                    sw.Flush();
                    sw.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T07:10:53.420

你可以使用这个：

```
 if (String.IsNullOrEmpty(this.LogFile1))
            {
                string fn = "LogFile";
                while (File.Exists(fn))
                {
                    fn = fn + "1";
                }
                this.LogFile1 = fn;
            }
            return this.LogFile1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T05:55:26.210

**编辑**

如果你想记录信息比使用 log4net 更好

文章：[log4net C# 代码片段](http://www.codeproject.com/Articles/34287/log4net-C-Code-Snippets)

* * *

这是给你的代码

```
if (!File.Exists("\\log.txt")) 
{
   FileInfo fileinfo = new FileInfo("\\log.txt");
   if(IsFileinUse(fileinfo))
   {  
      //create new one 
      log = new StreamWriter("\\log.txt");
   }                
   else
   {
     log = File.AppendText("\\log.txt");
   } 
```

///检查文件是否在使用中......

```
protected virtual bool IsFileinUse(FileInfo file)
{
     FileStream stream = null;

     try
     {
         stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
     }
     catch (IOException)
     {
         //the file is unavailable because it is:
         //still being written to
         //or being processed by another thread
         //or does not exist (has already been processed)
         return true;
     }
     finally
     {
         if (stream != null)
         stream.Close();
     }
     return false; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T15:48:34.927

我通过在我的项目中添加 try/catch 来处理这个问题

```
try
{
   using (Stream stream = new FileStream(@"\log.txt", FileMode.Open))
   {
      //Write to your log file here
   }
} 
catch (Exception ex)
{
   //you can check here why it failed
} 
```

在 catch 方法中，您可以使用 ex.Message 和 if 语句来处理它。例如...*这里的 MyError 将是 I/O 文件不存在或文件正在使用，但您可以自己轻松测试*

请注意，在下面的代码片段中，您将在名称中包含日期的同一位置创建一个新的日志文件。这样您就可以确定具有唯一的文件名，并且如果您正在搜索问题，则可以轻松浏览日志文件。

```
if (ex.Message == "MyError")
{
   string filename = String.Format("{1}_{0:yyyy-MM-dd}", @"log", DateTime.Now);
   string fullpath = Path.Combine(@"\",filename);
   using (StreamWriter sw = File.CreateText(path))
   {
      //This is where you will write your text to the new file if the other one was in use
      sw.WriteLine("something....");
   }
} 
```

**编辑：**

有关可以在异常处理中使用的文件处理异常，请参见此处，使用异常处理将确保您的应用程序不会崩溃。

[http://msdn.microsoft.com/en-us/library/system.io.filenotfoundexception(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.io.filenotfoundexception(v=vs.71).aspx)

希望这可以帮助。

干杯，凯文

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T21:00:24.100

你以错误的方式解决问题；与其尝试发明自己的方法来创建新文件，不如使用现有的库（如 NLog 或 log4net）为您完成，它已经解决了并发访问和其他注意事项的所有问题。

我也不知道 log4net，但是对于 NLog，你可以这样做（log4net 应该类似）：

1) 下载 NLog，将其作为参考添加到您的项目中

2) 通过创建 NLog.config 并将其设置为在构建时复制到输出文件夹来配置 NLog。这是一个简单的配置文件，如果文件太大，它将简单地登录到当前目录并存档：

```
<?xml version="1.0" encoding="utf-8"?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" autoReload="true">
    <targets>
        <target name="targetFile" xsi:type="File" fileName="log.txt" archiveAboveSize="1000000" archiveNumbering="Sequence" />
    </targets>

    <rules>
        <logger name="*" minlevel="Trace" writeTo="targetFile" />
    </rules>
</nlog> 
```

3）将此添加到您的类属性（以及您要记录的任何其他位置）：

```
private readonly Logger logger = LogManager.GetCurrentClassLogger(); 
```

然后，任何时候您想登录，只需执行以下操作：

```
logger.Info(responseFromServer); 
```

**编辑**：

在我的测试中，NLog 使用的并发写入算法可能会在消息过多的情况下丢弃消息，并且它必须争夺对文件的访问权限（但是，它不会抛出异常）。如果您想通过在配置文件中插入 ${processid} 来确保永远不会丢失消息，您可以将每个进程记录到自己的文件中，用于日志位置，如下所示：

```
<target name="targetFile" xsi:type="File" fileName="log_${processid}.txt" archiveAboveSize="1000000" archiveNumbering="Sequence" /> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-28T05:56:24.397

```
Dim logFile As StreamWriter
If File.Exists(("C:\Logs\log1.txt")) Then    
    logFile = File.AppendText("C:\Logs\log1.txt")    
Else    
    logFile = File.CreateText("C:\Logs\log1.txt")    
End If 
```

# ruby-on-rails - Ruby on Rails - 如何将评论模型与没有数据库的博客相关联

> ID：10779880
> 
> 赞同：1
> 
> 时间：2012-05-28T05:49:12.453
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, activerecord, activemodel

我正在使用 gem [postmarkdown](https://github.com/ennova/postmarkdown)在 RoR 中创建博客。gem 中的 Post 模型不受数据库支持（它使用 ActiveModel）。对于不使用数据库来存储博客文章的博客，我将如何将 Comment 模型与 Post 模型相关联？

例如，对于一个由 ActiveRecord 数据库支持的典型博客，我可以设置关系（例如）

```
class Post < ActiveRecord::Base
has_many :comments 
```

但是，在这种情况下，我不知道创建评论模型的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:27:05.013

如果 Post 是一个 activemodel，则不能使用 activerecord 中的方法设置关系。[您可以在github](https://github.com/rails/rails/tree/master/activemodel)上查看自述文件。它没有那个功能。

一种方法是简单地在 Post 模型中定义自己的方法。

```
class Post
  def comments
    Comment.where(:post_id => id)
  end
end

class Comment < ActiveRecord::Base
  def post
    Post.find_by_id(post_id)
  end
end 
```

编辑：啊，我刚刚发现了一个类似的问题，[Ruby on Rails 3 (3.1) ActiveModel Associations (tableless nested models)](https://stackoverflow.com/questions/6593428/ruby-on-rails-3-3-1-activemodel-associations-tableless-nested-models)。你也可以检查一下。

# javascript - FB.getAuthResponse().expiresIn 的单位是什么？

> ID：10779886
> 
> 赞同：12
> 
> 时间：2012-05-28T05:50:13.293
> 
> 标签：javascript, facebook, facebook-javascript-sdk

当我在 Facebook JavaScript API 中执行此操作时：

```
FB.getLoginStatus(function(response) {
    console.log(response.authResponse.expiresIn);
}); 
```

我得到一个像 5184000 这样的整数。

那是什么时候？有哪些单位？什么时代？自 1970 年以来，它显然不是以毫秒为单位的。如何将其转换为 JavaScript 中的日期？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T06:02:31.987

它是以秒为单位的到期时间。相当于60天。

为了转换为[此处](https://stackoverflow.com/questions/4611754/javascript-convert-seconds-to-a-date-object)阅读的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-17T14:14:02.090

根据文档，几年后，它可能已经改变：

> 过期日期在
> 
> 令牌过期时的 UNIX 时间戳。令牌过期后，此人将需要再次登录。

[https://developers.facebook.com/docs/facebook-login/web/](https://developers.facebook.com/docs/facebook-login/web/)

# jquery - jQuery 在 post 响应和 if/else 子句中检测 JSON 以重定向

> ID：10779891
> 
> 赞同：1
> 
> 时间：2012-05-28T05:50:59.033
> 
> 标签：jquery, ajax

我完全是 jQuery 和 Javascript 的菜鸟。

需要一些帮助。我有一个 AJAX 请求命中 php 脚本。如果数据经过验证，php 将返回一些 JSON。如果出现错误，它会返回一个带有错误文本的 html 字符串（如果需要，我可以将其更改为 json 响应，但我现在对它作为 html 感到满意......）

我遇到的问题是如何识别 json 响应并对 JS 中的后续 if else 语句进行编码以确定下一步该做什么。

```
submitHandler: function(form) {
    $.post( window.location, $("#checkoutCustomer").serialize(), function(data) {
        // TODO: get this to respond to json response or html...
        // need something here to detect presence of JSON in the post response  
        $('#checkoutCustomerResults').html(data); // the html response case
        $(".continue_checkout_link").show(); // the json repsonse case
    });
} 
```

理想情况下，在成功场景 (JSON) 中，响应应该触发页面在浏览器中加载新 URL，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T06:31:01.443

```
submitHandler: function(form) {
$.post( window.location, $("#checkoutCustomer").serialize(), function(data) {
    if(typeof data === 'string')
        $('#checkoutCustomerResults').html(data);
    else if(typeof data === 'object')
       $(".continue_checkout_link").show();
    else
        alert('Something else');
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:03:48.950

我最近遇到了类似的要求。我的最终解决方案是将所有响应都设为 JSON。所有答案都有一个`status`共同的参数。`status`可以取`success`, `error`, 或的值，`redirect`其余属性根据 的值设置`status`。例如 if `status == 'redirect'`，那么我可以期望有另一个名为的参数`redirect`，该参数将包含要重定向到的 URL。如果`status == 'error'`那时我可以期待一个名为的参数`errors`（在我的情况下，它包含更多带有所有错误字段的 JSON，但在您的情况下，您可以将 HTML 放在那里）

**编辑**这里是一些代码来澄清：

```
submitHandler: function(form) {
  $.post(window.location, $('#checkoutCustomer').serialize(), function(data) {
    if (data.status == 'redirect') {
      window.location = data.redirect;
      return;
    }
    else if (data.status == 'error') {
      // data.errors will contain some HTML you set on the server side
      // display it however you like
    }
    else if (data.status == 'success') {
      // do whatever you want on success
    }
    else {
      // handle unknown status, should never happen
    }
  }, 'json');
} 
```

注意`'json'`最后的：它是 的第 4 个参数`$.post`，并告诉 jQuery 期望 JSON 作为响应。这样`data`，回调中的参数将包含已解析的 JSON 响应作为简单对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:20:37.223

我个人会使用 jQuery 的功能来为特定的状态代码调用特定的处理程序。这当然需要服务器表现良好并正确使用状态 http 状态代码，即。`200 OK`失败不返回

然后你会做这样的事情

```
$.ajax({
   url:"enpoint of service",
   dataType: "json",
   statusCode: {
   200: function(data) {
      //handle success
    },
    500: funciton(){
        //handle internal server error
    }
  }
}); 
```

或者您可以使用完成的[jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)对象并失败

```
$.ajax({
       url:"enpoint of service",
       dataType: "json"
    }).done(function(data){
       //handle success here
    }).fail(function(){
       //handle error here
    }).always(function(){
       //ecuted regardless of success or failure
    }); 
```

# jquery - 找到 0 值的 td

> ID：10779892
> 
> 赞同：2
> 
> 时间：2012-05-28T05:51:01.763
> 
> 标签：jquery

我的 html 页面中有这样的表格

```
<table id="mytable">
  <tr id="classified">
    <td>1</td>
  </tr>
  <tr id="unclassified">
    <td>0</td>
  </tr>    
</table> 
```

所以，在 document.ready 我想检查哪一列的值为 0，如果值为 o，则隐藏该行，

我已经写了这段代码，但似乎没有用

```
$(document).ready(function IsValidTableContent() {
    $('#mytable tr td').each(function () {
        if ($(this).val() == 0) {
            $(this).hide();
        } else {
            $(this).show();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:53:35.210

`td`您可以通过以下方式找到它[`:contains()`](http://api.jquery.com/contains-selector/)：

```
$("#mytable td:contains(0)"); 
```

小提琴：http: [//jsfiddle.net/UCgSL/](http://jsfiddle.net/UCgSL/)

### 警告：

如果您有其他包含 0 但不完全等于 0 的单元格，`:contains`则也将在匹配项中包含这些单元格。这意味着`100`or`1,000`也可能出现，因为它们也*包含* `0`. 如果你只想要那些值为 的`0`，而不是其他的，你应该考虑使用过滤器：

```
$("#mytable td").filter(function(){
  return $(this).text() == 0;   
}); 
```

小提琴：http: [//jsfiddle.net/UCgSL/1/](http://jsfiddle.net/UCgSL/1/)

### 自定义过滤器选择器

如果 using`.filter`过于冗长，您可以滚动自己的过滤器选择器：

```
$.expr[":"].exactly = function( e, i, m ) {
    return $(e).text() == m[3];
};

$("#mytable td:exactly(0)");​ 
```

小提琴：http: [//jsfiddle.net/UCgSL/2/](http://jsfiddle.net/UCgSL/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:08:20.827

嗨，请检查这个**[演示](http://jsfiddle.net/2jWXU/)**，我认为这是你真正想要的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T05:58:33.787

假设您不想返回 10，这里有一个解决方案：

```
$("#mytable td").each(function() {
   var $this = $(this);
   if ($this).text()!="0") $this.show();
   else $this.hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T05:59:35.007

`val()`在这种情况下不能应用。您可以使用`$(this).text()`，但返回的值是字符串，因此您必须在比较之前将其解析为 int。

# ios5 - 如何使用 Frame 创建 UITabviewcontroller

> ID：10779900
> 
> 赞同：0
> 
> 时间：2012-05-28T05:52:41.017
> 
> 标签：ios5

我有一个以编程方式使用的 UItabviewcontroller 的代码，但是如何在我需要 x、y 宽度和高度坐标的应用程序中用作子视图时创建它的框架。

UITabBarController *tabBarController = [[UITabBarController alloc] init];

```
UIViewController *vc1 = [[UIViewController alloc] init];
UIViewController *vc2 = [[UIViewController alloc] init];

UIView *v1 = [[UIView alloc] init];
UIView *v2 = [[UIView alloc] init];

vc1.title = @"vc1";
vc2.title = @"vc2";

tabBarController.viewControllers = [[NSArray alloc] initWithObjects:vc1, vc2, nil];

self.view = tabBarController.view; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:49:52.937

当您使用 ios5 标记您的问题时，我想您的应用程序仅在 ios5 上运行。如果我理解正确，您想在另一个视图控制器视图中显示 tabBarController。

在 5.0 之前，如果没有一些非常丑陋的 hack，这是不可能的。但是对于 iOS5.x，现在有一个 API。查看“实现容器视图控制器”中的 UIViewController 文档。您必须将 tabBarController 设置为当前视图控制器的子视图控制器。您可以分配您希望它拥有的框架并将其添加到您的视图中。

# git - git: 'flow' 不是 git 命令。见'git --help'

> ID：10779901
> 
> 赞同：12
> 
> 时间：2012-05-28T05:52:58.507
> 
> 标签：git, git-flow

我只是尝试安装 git-flow，但是，它似乎没有与 git 正确集成，我该怎么做才能将 gitflow 与 git 集成？有没有办法我可以手动做到这一点？

谢谢你，杰弗里

```
[root@sa 2]# wget --no-check-certificate -q -O - https://github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | sudo bash
### gitflow no-make installer ###
Installing git-flow to /usr/local/bin
Cloning repo from GitHub to gitflow
Cloning into gitflow...
remote: Counting objects: 2362, done.
remote: Compressing objects: 100% (957/957), done.
remote: Total 2362 (delta 1406), reused 2238 (delta 1316)
Receiving objects: 100% (2362/2362), 484.60 KiB, done.
Resolving deltas: 100% (1406/1406), done.
Updating submodules
Submodule 'shFlags' (git://github.com/nvie/shFlags.git) registered for path 'shFlags'
Cloning into shFlags...
remote: Counting objects: 454, done.
remote: Compressing objects: 100% (55/55), done.
Receiving objects: 100% (454/454), 101.19 KiB, done.
Resolving deltas: 100% (389/389), done.
remote: Total 454 (delta 389), reused 454 (delta 389)
Submodule path 'shFlags': checked out '2fb06af13de884e9680f14a00c82e52a67c867f1'
removed `/usr/local/bin/git-flow'
`gitflow/git-flow' -> `/usr/local/bin/git-flow'
removed `/usr/local/bin/git-flow-init'
`gitflow/git-flow-init' -> `/usr/local/bin/git-flow-init'
removed `/usr/local/bin/git-flow-feature'
`gitflow/git-flow-feature' -> `/usr/local/bin/git-flow-feature'
removed `/usr/local/bin/git-flow-hotfix'
`gitflow/git-flow-hotfix' -> `/usr/local/bin/git-flow-hotfix'
removed `/usr/local/bin/git-flow-release'
`gitflow/git-flow-release' -> `/usr/local/bin/git-flow-release'
removed `/usr/local/bin/git-flow-support'
`gitflow/git-flow-support' -> `/usr/local/bin/git-flow-support'
removed `/usr/local/bin/git-flow-version'
`gitflow/git-flow-version' -> `/usr/local/bin/git-flow-version'
removed `/usr/local/bin/gitflow-common'
`gitflow/gitflow-common' -> `/usr/local/bin/gitflow-common'
removed `/usr/local/bin/gitflow-shFlags'
`gitflow/gitflow-shFlags' -> `/usr/local/bin/gitflow-shFlags'
[root@sa 2]# git flow
git: 'flow' is not a git command. See 'git --help'.

Did you mean one of these?
        reflog
        show 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-09T09:30:58.423

删除 git-flow 并手动安装。

**在 Linux 上：**

```
sudo apt-get remove git-flow && wget --no-check-certificate -q -O - https://raw.github.com/nvie/gitflow/develop/contrib/gitflow-installer.sh | sudo bash 
```

**在 Windows 上**

如果您使用 cygwin，请确保安装了 util-linux 和 wget。然后用 cygwin 运行它：

```
wget -q -O - --no-check-certificate github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | bash 
```

有关更多信息，请查看[github 上的项目页面](https://github.com/nvie/gitflow/wiki/Linux)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T20:19:51.027

正如评论中提到的，很可能`/usr/local/bin`没有设置在`$PATH`. 通过做检查它`echo $PATH`，如果它没有显示`/usr/local/bin`，将它添加到`$PATH`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-21T18:29:01.050

我在 Windows 10 (SourceTree) 上遇到了这个问题。
我在“用户的环境变量”中将以下文件夹添加到 PATH 变量中

```
%USERPROFILE%\AppData\Local\Atlassian\SourceTree\git_local\usr\bin 
```

我关闭并重新打开了 SourceTree - 问题已解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-03T18:48:18.267

在 Ubuntu 上它只需要安装

```
sudo apt-get install -y git-flow 
```

然后`git flow` 命令将运行正常......其他提到 PATH 的答案已过时，因为 git-flow 它不是一个独立的可执行文件，它直接由 git 在内部使用

# c++ - 将视频从熊猫板流式传输到 iPhone

> ID：10779909
> 
> 赞同：0
> 
> 时间：2012-05-28T05:53:48.023
> 
> 标签：c++

我正在使用熊猫板，并且我已经安装了 opencv 并编写了用于粘贴来自 3 个不同凸轮的 3 个不同图像的代码。现在这个拼接的图像存储在一个矩阵位置（指针）中。我将连续捕获和拼接 3 个凸轮图像.so它变成了一个视频。所以我需要将拼接的图像流式传输到iPhone。任何人都可以帮助我解决这个问题。我真的被困在这里并且需要帮助。它对我来说非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:40:37.033

我建议您考虑构建基于 RTP 协议的 mjpeg 流或更好的 RTSP（封装 mpeg4 - 节省带宽）流。假设您决定使用 mjpeg 流，那么您的每个 opencv IplImage* 都可以使用 libjpeg 压缩转换为 JPEG 帧。在这里查看我的答案[Compressing IplImage to JPEG using libjpeg in OpenCV](https://stackoverflow.com/questions/1443390/compressing-iplimage-to-jpeg-using-libjpeg-in-opencv/2602452#2602452)。您将压缩每一帧，然后创建 mjpeg 流。请参阅[创建我自己的 MJPEG 流](https://stackoverflow.com/questions/1595945/creating-my-own-mjpeg-stream)。您需要一个网络服务器来运行 mjpeg cgi 来传输您的图像流。您可以查看在 Panda Board 上运行的 lighttpd 网络服务器。Gstreamer 是可能对您的情况有所帮助的软件包。在解码端（iphone），您可以按如下方式构建 gstreamer 解码管道 - 假设您正在流式传输 mjpeg`gst-launch -v souphttpsrc location="http://<ip>:<port>/cgi_bin/<mjpegcginame>.cgi" do-timestamp=true is_live=true ! multipartdemux ! jpegdec ! ffmpegcolorspace ! autovideosink`

# html - 如何为液体布局完美对齐 div？

> ID：10779916
> 
> 赞同：0
> 
> 时间：2012-05-28T05:54:23.633
> 
> 标签：html, css

以最简单的形式，问题如下。我有两个 div（Ldiv 和 Rdiv）填满了我的屏幕。宽度分别为 60% 和 40%，高度根据内容的多少而有所不同。Ldiv 向左浮动，Rdiv 向右浮动。问题是，当我缩小窗口并将 Rdiv 推向 Ldiv 时，我似乎失去了 Rdiv 的右边距，除非我将其宽度设为 35-39% 而不是 40%。我尝试将两者都包装在一个封闭的 div 容器中，但这并没有更好的效果。

可以通过使其中一个 div（例如，Ldiv）具有固定宽度来解决此问题（在这种情况下，布局并不完全是流动的，但这并不重要）？我在这里读过很多帖子说这是要走的路，但我不明白为什么应该这样做。许多其他人说只有 2 个 div 他们都应该浮动，但有没有非浮动的替代方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:32:55.890

如果没有看到您的代码，就不可能给出真正的答案，但我想在您的 div 和/或您的 body 元素中仍然有边距和填充。因此，结果是 40/60% 不等于 100%。您可以使用“删除”它

```
body, #Ldiv, #Rdiv {
  padding:0;
  margin:0;
} 
```

# android - Android 将一个 TableRow（小部件）复制到一个新的 TableRow（小部件）中

> ID：10779919
> 
> 赞同：1
> 
> 时间：2012-05-28T05:54:29.593
> 
> 标签：android, widget, tablerow, cloning, copying

我已经看到针对 sqlite 和 C# 发布的类似问题。

但不适用于java。如何将现有的 TableRow 复制到新的 TableRow 中？
我不想分享任何参考，我希望这两个小部件是相同的。
难道是java缺少这个基本的对象复制功能吗？
我认为 TableRows 不可克隆，因为当我尝试编写时 Eclipse 没有自动完成`row.clone()`

手动复制不是一种选择，因为 TableRow 有很多字段。

*注意：标题中的“小部件”是为了使其更通用以供将来搜索*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:40:30.070

tableRow inherits from java.object however clone is not visible. This should be posible using brute force. A couple of options come to mind here. One and probably the hardest but best method would be to implement the clonable interface in a sub class.

The other way would be to iterate through the children and deep copy them to a new table row.

Either way I dont envey what you have ahead of you.

# unicode - UTF-8 多字节 & bom

> ID：10779920
> 
> 赞同：1
> 
> 时间：2012-05-28T05:54:30.920
> 
> 标签：unicode, utf-8, character-encoding, byte-order-mark

我读过这个很棒的教程
[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

但我不明白 UTF-8 如何解决高端、低端机器的问题。对于 1byte，它很好。对于多字节，它是如何工作的？

有人可以解释得更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T07:00:08.517

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T04:41:15.677

UTF-8 没有字节序问题。UTF-16 会出现问题，因为在将其写入文件或通信流时需要将两字节块序列视为字节块序列，这可能对两字节中的字节顺序有不同的想法-字节数。因为 UTF-8 在字节级别工作，所以 BOM 无需能够在大端和小端机器上正确解析序列。字符是否为多字节无关紧要：UTF-8 准确定义了字符的顺序，以防代码点的多字节编码。

UTF-8 中的 BOM 用于完全不同的东西（嗯，所以名称“字节顺序标记”有点“关闭”）。这是为了表明“这将是一个 UTF-8 流”。UTF-8 BOM 一般不受欢迎，很多程序都不能正确支持。该网站 utf8everywhere.org 认为它应该在未来被弃用。

# authentication - 如何将 Alfresco 与 Web 应用程序集成？

> ID：10779922
> 
> 赞同：0
> 
> 时间：2012-05-28T05:54:37.140
> 
> 标签：authentication, login, alfresco

我想将 alfresco 与 Web 应用程序集成。即我为我的应用程序创建了一个登录页面。现在我想使用相同的用户名和密码登录到 alfresco，这样我就不必使用 alfresco 登录页面再次登录。谁能帮我解决这个问题？

谢谢和问候，than1234

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:51:06.903

[请](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference)参考**登录**http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:55:10.307

还要寻找 SSO（单点登录）...它不仅可以避免您的用户重新登录到 Alfresco，还可以避免重新登录其他应用程序。手册、wiki.alfresco.com 网站和谷歌搜索都有相关信息。有多种方法可以做到这一点，选择将取决于您使用的协议。SSO 快乐！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:59:38.780

看看这个：[http ://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Login](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Login)

当您向“/alfresco/service/api/login?u={username}&pw={password?}”发出 HTTP GET 请求时，您会得到 alf_ticket，然后您将在后续请求中使用它，而不是每次都登录。

您只需在请求中附加“&alf_ticket=YOUR_TICKET”... :)

# postgresql - Postgres 和 Clojure JDBC 中的外键和字符限制

> ID：10779925
> 
> 赞同：4
> 
> 时间：2012-05-28T05:55:12.850
> 
> 标签：postgresql, jdbc, clojure

我让自己成为一个 facebook/twitter 组合只是为了好玩，但我不能 100% 确定 JDBC 的某些语义。我不确定如何将字段设置为外键或如何限制 varchar 字段中的字符数。

我的代码（带有注释以显示我需要帮助的地方）如下

```
(ns twitface.models.migration
  (:require [clojure.java.jdbc :as sql]))

(defn create-tables []
  (sql/with-connection (System/getenv "DATABASE_URL")
    (do 
      (sql/create-table :users
                        [:id :serial "PRIMARY KEY"]
                        [:email :varchar "NOT NULL"]
                        [:password :varchar "NOT_NULL"]
                        [:full-name :varchar "NOT NULL"]
                        [:pref-name :varchar]
                        [:created_at :timestamp "NOT NULL" "DEFAULT CURRENT_TIMESTAMP"])
      (sql/create-table :relations
                        [:id :serial "PRIMARY KEY"]
                        [:relating-user :numeric] ; foreign key
                        [:related-user :numeric]  ; foreign key
                        [:status :varchar])
      (sql/create-table :posts
                        [:id :serial "PRIMARY KEY"]
                        [:user :numeric "NOT NULL"]    ; foreign key
                        [:destination-user :numeric "NOT NULL"] ; foreign key
                        [:message :varchar "NOT NULL"] ; 180 char limit
                        [:created_at :timestamp "NOT NULL" "DEFAULT CURRENT_TIMESTAMP"])
      (sql/create-table :comments
                        [:id :serial "PRIMARY KEY"]
                        [:user :numeric "NOT NULL"]    ; foreign key
                        [:message :varchar "NOT NULL"] ; 180 char limit
                        [:created_at :timestamp "NOT NULL" "DEFAULT CURRENT_TIMESTAMP"])))) 
```

任何帮助，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:13:42.440

当您找不到文档时，请查看项目中包含的测试，如果这没有帮助，请查看源代码 - 使用开源的最佳方式。我尝试查看测试，发现您可以使用`VARCHAR(180)`而不是使用`:varchar`来指定列的限制，同样您可以使用普通 SQL 构造来指定外键

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T08:02:14.713

对于外键，`references`用作 sql：

```
(defn create-tables []
  (sql/with-connection (System/getenv "DATABASE_URL")
    (do
      (sql/create-table :users
                        [:id :serial "PRIMARY KEY"]
                        [:email "varchar(50)" "NOT NULL"]
                        [:password "varchar(30)" "NOT NULL"])
      (sql/create-table :relations
                        [:id :serial "PRIMARY KEY"]
                        [:related_user :serial "references users (id)"]
                        [:status "varchar(10)"])))) 
```

# lotus-notes - 将内联图像添加到 Lotus notes 邮件

> ID：10779928
> 
> 赞同：0
> 
> 时间：2012-05-28T05:55:30.763
> 
> 标签：lotus-notes

我有一个读取 eml 并使用 C API 将其转换为 NSF 邮件的应用程序。我可以使用 NSFMimePartAppendStream 方法向其中添加 HTML Body，但我的问题是如何向其中添加内联图像。通过使用方法 MailAddMessageAttachment 附件被添加为普通附件，但应该如何将内容 ID 映射到它。谁能解释一下如何将内联图像添加到邮件正文？

问候，哈西娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:49:31.893

使用 MIME 内容解决了问题，使用附件和内联图像“MIMEStreamWrite”完全读取 mime

# android - 如何在我的最后一个列表项下方获得一些空间 - android

> ID：10779930
> 
> 赞同：2
> 
> 时间：2012-05-28T05:55:37.920
> 
> 标签：android, listview

我有一个列表，其高度设置为“填充父级”。一切正常，但我在列表中的最后一项触及我的屏幕底部。我怎样才能在我的最后一个列表项下方获得一些空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:55:19.657

您可以添加一个空视图作为页脚： http: [//developer.android.com/reference/android/widget/ListView.html#addFooterView](http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View) (android.view.View )

AFAIK 仅使用 XML 无法做到这一点，您可以在 XML 中声明页脚并膨胀，或以编程方式创建

这是一个以编程方式添加间隔器的 3 行：

```
View listFooter = new View(this);
listFooter.setLayoutParams(new AbsListView.LayoutParams(AbsListView.LayoutParams.FILL_PARENT, 70)));
listView.addFooterView(listFooter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:15:53.730

嗯.. 看到你不想填充，在列表视图之后的文本视图上打印一个空行（或透明文本）。或者在您的列表视图上打印一个“额外”项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-09T08:46:55.043

你可以使用[Space 小部件](https://developer.android.com/reference/android/widget/Space.html)

```
<android.support.v4.widget.Space
            android:layout_width="match_parent"
            android:layout_height="10dp"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-28T05:57:35.660

可以简单地在列表中设置边距............

如果只需要底部边距，则使用：android:layout_marginBottom=

# sql - 按组的 SQL 序列号

> ID：10779931
> 
> 赞同：3
> 
> 时间：2012-05-28T05:55:38.750
> 
> 标签：sql, sql-server, sql-server-2008

我需要有一个数据输出，应该按组生成一个序列号。考虑下面的例子。

```
Name 
----
XXXX
XXXX
XXXX
YYYY
YYYY
ZZZZ
ZZZZ
ZZZZ 
```

预期输出：

```
SlNo  Name 
----  ----
1     XXXX
1     XXXX
1     XXXX
2     YYYY
2     YYYY
3     ZZZZ
3     ZZZZ
3     ZZZZ 
```

尝试使用 rownumber() 但在组内生成序列号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:57:58.067

```
SELECT  *,
        DENSE_RANK() OVER (ORDER BY name)
FROM    mytable 
```

# objective-c - 自我 = [超级初始化]

> ID：10779937
> 
> 赞同：3
> 
> 时间：2012-05-28T05:56:58.080
> 
> 标签：objective-c

如果 self 能够存储基类实例，那么当我们返回 self 时，它如何转换为派生实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T07:03:42.120

这就是我认为您要问的问题：假设我们有一个基类 Base 和一个子类 Derived。如果`-[Derived init]`调用`-[Base init]`并`-[Base init]`返回一个不同的实例，那么那个不同的实例会不会是一个实例`Base`而不是`Derived`不合适的实例？例如，新对象不会包含`Derived`可能已添加到类中的实例变量。

答案是`Base`不允许这样做。如果它替换原始实例，它必须以尊重原始实例的动态类型的方式这样做。例如，它可能会执行以下操作：

```
// Re-allocate with 100 extra bytes
id newSelf = NSAllocateObject([self class], 100, [self zone]);
[self release];
self = newSelf;
// ... continue to initialize ...
return self; 
```

或者，它可能会动态生成原始类的新子类，然后分配该新类的新实例。

```
NSString* newClassName = [NSString stringWithFormat:"%@_DynamicSubclass", NSStringFromClass([self class])];
Class newClass = objc_allocateClassPair([self class], [newClassName UTF8String], 0);
// ... further configure the new class, by adding instance variables or methods ...
objc_registerClassPair(newClass);
id newSelf = [newClass alloc];
[self release];
self = newSelf;
// ... continue to initialize ...
return self; 
```

无论它做什么，它都必须根据其动态类型满足新实例适合在旧实例所在的任何地方使用的约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T06:09:28.430

`self`是一个隐藏的方法参数：

```
// this Objective-C
- (id) initWithString:(NSString*)str;

// gets implemented like this C function would be
- (objc_object*) Foo_initWithString(Foo* self, SEL _cmd, NSString* str); 
```

它是一个指向内存（用 分配`alloc`）的指针，它已经大到足以容纳最派生的对象。最派生的类调用 super's `init`，它也调用它的 super's `init`，因此层次结构中的每个类都调用其构造函数。

所以，没有任何东西被转换——它只是一个指向已经存在的对象的指针，你可以返回它（99.9% 的时间）或者替换另一个对象。

请注意，还有第二个隐藏参数 selector `_cmd`，在这种情况下等于`@selector(initWithString:)`。如果您需要当前方法名称，例如用于调试日志记录，您也可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T07:18:48.027

这里超级实例没有分配给派生实例。`self = [super init];`就像告诉运行时系统在超类方法选择器表中查找init方法......在超`-init`方法内部，`self`就像对超类和派生类的支持一样。在目标c中，如果类继承..只有实例变量被复制..方法由层次结构中的所有类共享。如果你覆盖..你应该这样做`self = [super init]`；这将引导你使用 NSObject`-init`方法。如果我们覆盖`-init...`超类中的方法，请确保`-init...`首先调用超类。这就是我的理解。谢谢你。

# java - 从 UNIX 纪元时间创建日历时日期不正确（1970 年的某个时间）？

> ID：10779938
> 
> 赞同：2
> 
> 时间：2012-05-28T05:57:08.280
> 
> 标签：java, datetime

我有一个存储 unix 时间和等效时间戳的表。

```
CREATE TABLE tbl_time
(
    time_unix BIGINT,
    time_timestamp TIMESTAMP WITHOUT TIME ZONE
); 
```

该数据库在 PostgreSQL 中。数据库已配置`Asia/Tehran`时区。例如：

```
1333436817, 2012-04-03 11:36:57 
```

当我在 python 中将 unix 时间转换为字符串格式时：

```
datetime.datetime.fromtimestamp(1333436817) 
```

它给了我：`datetime.datetime(2012, 4, 3, 11, 36, 57)`这是正确的并且等于数据库。但是当我使用 java 进行这种转换时：

```
Calendar c = Calendar.getInstance(TimeZone.getTimeZone("Asia/Tehran"));
c.setTimeInMillis(1333436817 * 1000);
System.out.println(c.getTime()); 
```

它给出：`Sat Jan 24 06:12:35 IRST 1970`. 系统本身在`Asia/Tehran`时区下运行。我在 Debian 6.0.5 上使用 PostgreSQL 8.4.11 和 python 3.1 和 openjdk 6。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T06:14:50.030

1333436817 * 1000 的结果对于整数来说太大了，所以它会溢出。在这种情况下，Java 不会自动为您提升类型。

试试看：

```
 c.setTimeInMillis(1333436817 * 1000L); 
```

请注意，`L`这会强制您的计算使用长整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-16T08:23:55.233

[tibo的回答](https://stackoverflow.com/a/10780085/642706)是正确的。我的其他想法如下。

# 采用`TIMESTAMP WITH TIME ZONE`

您提到`TIMESTAMP WITHOUT TIME ZONE`在 Postgres 中使用数据类型。该类型仅适用于与任何特定时区无关的日期时间。例如，“圣诞节从 2015 年 12 月 25 日午夜开始”翻译为任何特定时区的不同时刻。例如，圣诞节在巴黎比在蒙特利尔更早开始。这种数据类型很少适用于业务应用程序。请参阅此 Postgres 专家的帖子，[始终使用 TIMESTAMP WITH TIME ZONE](http://justatheory.com/computers/databases/postgresql/use-timestamptz.html)。

在 Postgres 中，另一种类型的`TIMESTAMP WITH TIME ZONE`意思是“尊重时区”。使用传入数据与 UTC 或时区信息的任何偏移都用于调整为 UTC。然后丢弃伴随的偏移量或时区信息。一些数据库保留此信息，但不保留 Postgres。

您的声明：

> 该数据库在 PostgreSQL 中。数据库已配置亚洲/德黑兰时区。

…没有意义。数据类型`TIMESTAMP WITHOUT TIME ZONE`没有时区（尽管您可能将其视为 UTC），并且数据类型`TIMESTAMP WITH TIME ZONE`始终为[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)。关于存储日期时间值，没有这样的时区配置。

您可能的意思是数据库会话的默认时区设置为德黑兰时区。见[`SET TIME ZONE`](http://www.postgresql.org/docs/current/static/sql-set.html)命令。但该设置只是装点门面，在生成日期时间值的字符串表示时应用。当使用 JDBC 和 java.sql.Timestamp 类时，该会话设置是无关紧要的，因为 Postgres 没有生成任何字符串。您对时区的关注应该放在 Java 端（参见下面的代码）而不是 Postgres。

一般来说，您的主机服务器操作系统应设置为 UTC。但是您的应用程序的代码不应该依赖于此，而是指定任何所需/预期的时区。

# java.time

在 Java 8 及更高版本中，新的 java.time 包取代了旧的 java.util.Date/.Calendar 类。这些新类受到 JSR 310 定义的 Joda-Time 库的启发，并由[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目扩展。

最终 JDBC 驱动程序将被更新以直接处理这些新类型。同时使用添加到旧类和新类中的转换方法。

```
java.sql.Timestamp ts = myResultSet.getTimestamp( 1 ); 
Instant instant = ts.toInstant();
ZoneId zoneId = ZoneId.of( "Asia/Tehran" );
ZonedDateTime zdt = ZonedDateTime.ofInstant( instant , zoneId ); 
```

[或者给定您从Unix 时间](https://en.wikipedia.org/wiki/Unix_time)纪元开始的整秒数，构造一个 Instant。

```
long secondsSinceUnixEpoch = 1_333_436_817L ;
Instant instant = Instant.ofEpochSecond( secondsSinceUnixEpoch );
ZoneId zoneId = ZoneId.of( "Asia/Tehran" );
ZonedDateTime zdt = ZonedDateTime.ofInstant( instant , zoneId ); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T06:13:22.627

java Date 库的设计很糟糕，而且没有那么实用。我真的不能帮你解决你的问题，但我可以给你一个建议来试试[Joda calendar](http://joda-time.sourceforge.net/)

# knockout.js - knockout.js 2.1 和多选绑定错误

> ID：10779940
> 
> 赞同：0
> 
> 时间：2012-05-28T05:57:19.510
> 
> 标签：knockout.js

我不确定这是否是一个错误，但是当 1.2.1 可以使用时，knockout.js 2.1 不适用于此示例。 [http://jsfiddle.net/gurkavcu/kKNtv/](http://jsfiddle.net/gurkavcu/kKNtv/)

更新外部资源以使用 2.1 并停止工作： [http ://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js](http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js)

```
dataList = [ {name:'length1',id:1},
             {name:'length2',id:2},
             {name:'length3',id:3},
             {name:'length4',id:4},
             {name:'length5',id:5} ]

var editOfferViewModel = { 
    selectedLength: ko.observable(),
    multiSelectedLength: ko.observableArray()    
}; 

ko.applyBindings(editOfferViewModel); 

$(document).ready(function() {
    editOfferViewModel.selectedLength(2);
    editOfferViewModel.multiSelectedLength(['2','3']);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:37:12.177

它绑定到 id 值，它是一个整数，但你告诉它的是字符串。也许这种行为在淘汰赛 1 和 2 之间发生了变化。如果您将选定的值设置为整数或将 id 属性字符串设置为它将起作用。这是一个简单的示例，仅显示所有选定项目的 JSON，您可以看到它包含字符串并且选择框不显示任何内容，然后当您选择项目时，它们显示为整数（[小提琴](http://jsfiddle.net/czJar/2/)）。这两个更改中的任何一个都将起作用：

```
dataList = [ {name:'length1',id:1},{name:'length2',id:2},{name:'length3',id:3},{name:'length4',id:4},{name:'length5',id:5} ]
// dataList = [ {name:'length1',id:'1'},{name:'length2',id:'2'},{name:'length3',id:'3'},{name:'length4',id:'4'},{name:'length5',id:'5'} ] // this would work
...
editOfferViewModel.multiSelectedLength(['2','3']);
// editOfferViewModel.multiSelectedLength([2,3]); // this works 
```

我的问题是为什么这完全有效......

1.  dataList 不是您的视图模型的一部分，ko 是否也在所有窗口属性中搜索绑定？我不知道，但你可以看到它显示窗口对象中的“innerWidth”
2.  [selectedOptions] 绑定现在应该绑定到实际的 javascript 对象，但我猜如果您指定它使用的 optionsValue 参数。[他们的文档](http://knockoutjs.com/documentation/selectedOptions-binding.html)中没有很好地解释这一点。我猜对此的支持是破坏字符串/整数不匹配工作的原因。

# python - 在 ubuntu 12.04 上安装 python2.6 时出错

> ID：10779941
> 
> 赞同：4
> 
> 时间：2012-05-28T05:57:20.423
> 
> 标签：python

“我使用的是 ubuntu 12.04，默认情况下安装了 python 2.7。我想要 python 2.6。当我使用 apt-get install python2.6 时，我收到错误读取包列表......完成构建依赖关系树
读取状态信息......完成包 python2.6 不可用，但被另一个包引用。这可能意味着该包丢失、已过时或只能从其他来源获得但是以下包替换它：python-gdbm

E: 包'python2.6'没有安装候选

提前致谢。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T06:06:05.000

根据[Ubuntu Wiki - Python Toolchain](https://wiki.ubuntu.com/PrecisePangolin/ReleaseNotes/UbuntuDesktop#PrecisePangolin.2BAC8-ReleaseNotes.2BAC8-CommonInfrastructure.Python_Toolchain)，存储库中不再提供 Python 2.6。

任何一个：

*   [您可以通过从Python 2.6.7](http://www.python.org/getit/releases/2.6.7/)下载 tarball 来简单地从源代码构建它
*   你需要找到一些可能有旧版本 Python 的存储库。一种选择是 [https://launchpad.net/~fkrull/+archive/deadsnakes](https://launchpad.net/~fkrull/+archive/deadsnakes)

您需要安装 PPA

```
sudo add-apt-repository ppa:fkrull/deadsnakes 
```

运行更新：

```
sudo apt-get update 
```

然后安装你要找的版本

```
sudo apt-get install python2.6 python2.6-dev 
```

# matlab - 如何通过 MATLAB 中的文件提供输入？

> ID：10779947
> 
> 赞同：-4
> 
> 时间：2012-05-28T05:58:01.260
> 
> 标签：matlab, file-io, cluster-analysis

我有一个数据文件，其中包含用记事本编写的 50 个二维数据点。我想在聚类算法中使用它来聚类这 50 个点。如何导入此文件？有没有其他方法可以在程序中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:30:40.543

这取决于您如何格式化数据文件。您说它保存在记事本上，但这并没有太大帮助。根据您用作数据分隔符的内容，您可以使用 dlmread 函数将数据文件导入到数组中。例如，如果您的文件名为 filename.dat 并且使用了 ; 用于分隔此文件中的每个数据项的字符，您可以使用将数据读入矩阵 A

```
 A = dlmread("filename.dat",';'); 
```

我建议阅读有关 matlab 中 dlmread 函数的帮助文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:06:29.743

您可以将数据保存为 .csv 文件，也可以将其保存到 Excel 电子表格并使用`xlsread()`. 有关更多信息，请参见此处：http: [//www.mathworks.com/help/techdoc/ref/xlsread.html](http://www.mathworks.com/help/techdoc/ref/xlsread.html)

对于 .csv 案例，这篇文章应该很有帮助：[Fastest way to import CSV files in MATLAB](https://stackoverflow.com/questions/2043721/fastest-way-to-import-csv-files-in-matlab)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:07:12.547

假设您有以下数据：

```
X = [randn(100,2)-1 ; randn(100,2)];
save data.mat X 
```

然后它就像这样做一样简单：

```
%# load data from MAT-file
load data.mat

%# cluster into K=2 clusters
C = kmeans(X,2);

%# show cluster assignment
gscatter(X(:,1), X(:,2), C) 
```

![截屏](../Images/e09f55db4fd2b315a64e2c24337bbaac.png)

# iphone - 在编译应用程序时出现这样的错误

> ID：10779956
> 
> 赞同：0
> 
> 时间：2012-05-28T05:58:48.870
> 
> 标签：iphone, compiler-errors, xcode4.2

这是我得到的错误日志

```
Ld /Users/apple/Library/Developer/Xcode/DerivedData/SMTPExample-dkhosyetbsajvtcdyyalnckswjgd/Build/Products/Debug-iphonesimulator/SMTPExample.app/SMTPExample normal i386
    cd /Users/apple/Desktop/SMTPExample
    setenv MACOSX_DEPLOYMENT_TARGET 10.6
    setenv PATH "/xcode4/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/xcode4/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /xcode4/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 -arch i386 -isysroot /xcode4/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk -L/Users/apple/Library/Developer/Xcode/DerivedData/SMTPExample-dkhosyetbsajvtcdyyalnckswjgd/Build/Products/Debug-iphonesimulator -F/Users/apple/Library/Developer/Xcode/DerivedData/SMTPExample-dkhosyetbsajvtcdyyalnckswjgd/Build/Products/Debug-iphonesimulator -F/Users/apple/Desktop/SMTPExample -filelist /Users/apple/Library/Developer/Xcode/DerivedData/SMTPExample-dkhosyetbsajvtcdyyalnckswjgd/Build/Intermediates/SMTPExample.build/Debug-iphonesimulator/SMTPExample.build/Objects-normal/i386/SMTPExample.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -framework Security -framework CFNetwork -framework UIKit -framework Foundation -framework CoreGraphics -framework DropboxSDK -o /Users/apple/Library/Developer/Xcode/DerivedData/SMTPExample-dkhosyetbsajvtcdyyalnckswjgd/Build/Products/Debug-iphonesimulator/SMTPExample.app/SMTPExample

ld: duplicate symbol _EstimateBas64EncodedDataSize in /Users/apple/Desktop/SMTPExample/DropboxSDK.framework/DropboxSDK and /Users/apple/Library/Developer/Xcode/DerivedData/SMTPExample-dkhosyetbsajvtcdyyalnckswjgd/Build/Intermediates/SMTPExample.build/Debug-iphonesimulator/SMTPExample.build/Objects-normal/i386/Base64Transcoder.o for architecture i386
collect2: ld returned 1 exit status
Command /xcode4/Platforms/iPhoneSimulator.platform/Developer/usr/bin/llvm-gcc-4.2 failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:07:11.303

这是一个链接器错误（输出中的“ld”表示这一点，因为输出错误是由[GNU 链接器程序](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld)生成的）。

发生的事情是两个相同的声明已从两个单独的源代码文件中分别编译。这些源文件之一可能被命名为`Base64Transcoder.m`或`Base64Transcoder.cpp`（因为导致问题的编译文件是`Base64Transcoder.o`）。有问题的声明是`_EstimateBas64EncodingDataSize`. 这个符号在不同的源代码文件中被多次声明，然后链接器抛出错误，因为两个编译的源代码文件不同。您需要查看正在编译的整个源代码并解决冲突。

希望这有帮助并且有意义，我一直发现链接器问题难以理解和处理。我真的强烈建议阅读 C/C++/Objective-C 代码的程序编译的链接器阶段（[这](http://www.lurklurk.org/linkers/linkers.html)是一个非常好的指南）。然后你应该能够更好地理解引擎盖下发生了什么！:)

# mysql - 更改工作台中主键的默认名称

> ID：10779958
> 
> 赞同：1
> 
> 时间：2012-05-28T05:59:04.427
> 
> 标签：mysql, settings, workbench

我刚刚切换到工作台来管理 mySQL。每次我创建一个新表并为其命名时，我都会得到一个名称为 idTableName 的属性主键，我想将其更改为：id_TableName 或 TableName_id，这样它更符合我的约定。那可能吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:08:06.957

请参阅此处了解如何使用 MySQL Workbench 更改主键命名方案。

导航到编辑 -> 首选项 -> 并移动到模型选项卡。

![MySql 工作台 - 表 pk 命名方案更改](../Images/e2301612d5e460ef9a80492a89df0900.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T06:07:49.287

要更改默认主键名称的名称，您可以

转到编辑->首选项->模型更改列默认值下的PK名称的值

# c++ - 在 Clutter API 中使用儿童 Actor

> ID：10779964
> 
> 赞同：0
> 
> 时间：2012-05-28T05:59:48.337
> 
> 标签：c++, api, clutter

我一直在玩弄杂乱无章的东西，对如何与演员和儿童演员一起工作有点困惑。让我们从一个让我有些困惑的简单示例开始。我创建了两个 Clutter::Rectangles （我使用 Cluttermm 绑定）并使第二个成为第一个的孩子：

```
Glib::RefPtr<Clutter::Rectangle> rect = Clutter::Rectangle::create();
rect->set_color(Clutter::Color(255, 0, 0, 255));
rect->set_size(100, 100);
rect->set_position(500,500);
rect->show();
stage->add_actor(rect);

Glib::RefPtr<Clutter::Rectangle> rect2 = Clutter::Rectangle::create();
rect2->set_color(Clutter::Color(0, 255, 0, 255));
rect2->set_size(100, 100);
rect2->set_position(0,0);
rect2->set_parent(rect);
rect2->show(); 
```

据我了解，这应该使两个矩形可见，但是 rectangle2 不是。尽管将其设为第一个矩形的父级，但仍无处可寻。为什么是这样？set_parent()的真正含义是什么？

这种混乱有点深。今天早些时候，我尝试编写一个更复杂的复合actor，它由许多actor（例如矩形等）组成。虽然从视觉上看，这项任务是成功的，但在尝试将事件回调附加到这些子actors 时，我遇到了严重的困难——事实上，据我所知，事件永远不会到达父actors 的子代。

这让我很困惑。例如，如何使用混乱创建一个按钮框？您是否必须创建自己的演员检测/事件管理系统，或者是通过将孩子添加到舞台而不是实际的父母来将事件回调连接到子演员的唯一方法？

这让我非常困惑，考虑到目前缺乏文献，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:33:48.727

一个 Rectangle 不是一个容器：你不能给一个容器添加孩子；或者，至少，您可以将actor的父级设置为非容器actor，但不会绘制该actor - 这很可能*不是*您想要的。

您应该使用容器演员并向该容器添加矩形。

不过，这对 Clutter ≤ 1.8 有效；在当前稳定版本的 Clutter (1.10) 中有各种变化：

*   ClutterActor 替换了大部分已弃用的 API - 即您应该创建 Actor 实例并向它们添加子实例。
*   ClutterActor 可以持有孩子，他们会被默认绘制；
*   ClutterRectangle 在 Clutter 1.10 中已被弃用，尽管它的行为没有改变（向其中添加子项不会导致这些子项被绘制）。
*   clutter_actor_set_parent() 在 1.10 中也已被弃用，取而代之的是更像 DOM 的 add_child()。

ClutterActor 的 API 参考应该对这个问题有所了解：

[http://developer.gnome.org/clutter/stable/ClutterActor.html](http://developer.gnome.org/clutter/stable/ClutterActor.html)

# javascript - 创建一个包含一定数量数字的表格

> ID：10779965
> 
> 赞同：1
> 
> 时间：2012-05-28T05:59:52.180
> 
> 标签：javascript, forms, numbers, restriction

嗨，我有这个脚本，我试图让它工作，以便其中只允许一定数量的数字（8 个数字）。我要添加什么？

```
<SCRIPT TYPE="text/javascript">

function numbersonly(myfield, e, dec)
{
var key;
var keychar;

if (window.event)
   key = window.event.keyCode;
else if (e)
   key = e.which;
else
   return true;
keychar = String.fromCharCode(key);

// control keys
if ((key==null) || (key==0) || (key==8) || 
    (key==9) || (key==13) || (key==27) )
   return true;

// numbers
else if ((("0123456789").indexOf(keychar) > -1))
   return true;

// decimal point jump
else if (dec && (keychar == "."))
   {
   myfield.form.elements[dec].focus();
   return false;
   }
else
   return false;
}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:09:19.853

您可以直接将属性**size** (size="8") 添加到您的字段中，也可以使用 JS 进行：

```
var sizeLimitation = document.createAttribute('size');
sizeLimitation.value = 8;
myfield.setAttributeNode(sizeLimitation); 
```

# iphone - 如何要求我的 iPhone 应用程序的用户提交有关该应用程序的评论？

> ID：10779971
> 
> 赞同：3
> 
> 时间：2012-05-28T06:01:07.360
> 
> 标签：iphone

我已经完成了我的应用程序。游戏而已。现在用户开始玩，n 当他玩了 3 次游戏时，我想请求该特定用户查看应用内购买中的这个应用。这将增加我的应用程序的排名和下载量。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:07:41.060

您可以使用[Appirater](https://github.com/arashpayan/appirater)

我在我的应用程序中使用它。您可以定义应用何时要求用户评分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:14:55.933

**它的条件是你玩了多少次**

我已经在我的应用程序中完成了此功能，您只需将应用程序的状态存储在`NSUserDefault`一次播放 2,3 次播放中只需存储状态并在游戏开始时每次检查存储在 NSUserDefault 中的值的条件，如果计数器（`NSUserDefault`值）大于 3，而不是调用 InApp 购买的代表，祝你好运。

你可以这样做： -

```
NSInteger counter=[[NSUserDefaults standardUserDefaults]integerForKey:@"value"];
if (counter)
{
    counter=counter + 1; // counter ++
    [[NSUserDefaults standardUserDefaults]setInteger:counter forKey:@"value"];
}
else
{
    [[NSUserDefaults standardUserDefaults]setInteger:1 forKey:@"value"];
}
// At the beginning of the game check the condition.
if (counter > 3)
{
    // Call InApp Purchase
} 
```

# c# - IVsProject.AddItem 的使用示例

> ID：10779974
> 
> 赞同：2
> 
> 时间：2012-05-28T06:01:33.707
> 
> 标签：c#, visual-studio-2010, visual-studio

到目前为止，任何人都有示例`IVsProject.AddItem`我已经完成了以下操作，但不了解如何使用`IVsProject.AddItem`并且`msdn`没有任何示例。

```
private void MenuItemCallback(object sender, EventArgs e)
{
   IVsSolution solutionService = GetService(typeof(SVsSolution)) as IVsSolution;
   // get all projects in solution
   IEnumHierarchies enumHierarchies = null;
   Guid guid = Guid.Empty;
   ErrorHandler.ThrowOnFailure(solutionService.GetProjectEnum(
                                  (uint)__VSENUMPROJFLAGS.EPF_ALLINSOLUTION,
                                  ref guid,
                                  out enumHierarchies));
   //Loop all projects found
   if (enumHierarchies != null)
   {
      // Loop projects found
      IVsHierarchy[] hierarchy = new IVsHierarchy[1];
      uint fetched = 0;

      while (enumHierarchies.Next(1, hierarchy, out fetched) == VSConstants.S_OK
           && fetched == 1)
      {                   
         Guid projectGuid;
         ErrorHandler.ThrowOnFailure(hierarchy[0].GetGuidProperty(
                                        VSConstants.VSITEMID_ROOT,
                                        (int)__VSHPROPID.VSHPROPID_ProjectIDGuid,
                                        out projectGuid));
         IVsProject project = (IVsProject)hierarchy[0];
         project.AddItem(VSConstants.VSITEMID_ROOT,
                         VSADDITEMOPERATION.VSADDITEMOP_OPENFILE,
                         1,
                         ...)

      }
   }            
} 
```

以下也无法使用`DTE`

```
private void MenuItemCallback(object sender, EventArgs e)
{
   //GemFireWizardForm form = new GemFireWizardForm();
   //form.ShowDialog();
   //Get the solution service

   IVsSolution solutionService = GetService(typeof(SVsSolution)) as IVsSolution;
   // get all projects in solution
   IEnumHierarchies enumHierarchies = null;
   Guid guid = Guid.Empty;
   ErrorHandler.ThrowOnFailure(solutionService.GetProjectEnum(
                                  (uint)__VSENUMPROJFLAGS.EPF_ALLINSOLUTION,
                                  ref guid,
                                  out enumHierarchies));
   //Loop all projects found
   if (enumHierarchies != null)
   {
      // Loop projects found
      IVsHierarchy[] hierarchy = new IVsHierarchy[1];
      uint fetched = 0;
      Guid projectGuid = Guid.Empty;
      while (enumHierarchies.Next(1, hierarchy, out fetched) == VSConstants.S_OK
           && fetched == 1)
      {
         ErrorHandler.ThrowOnFailure(hierarchy[0].GetGuidProperty(
                                        VSConstants.VSITEMID_ROOT,
                                        (int)__VSHPROPID.VSHPROPID_ProjectIDGuid,
                                        out projectGuid));
      }

      IVsHierarchy ppHierarchy = null;
      IVsSolution solution = (IVsSolution)GetService(typeof(SVsSolution));
      Int32 result = solution.GetProjectOfGuid(ref projectGuid, out ppHierarchy);

      if (ppHierarchy != null && result == VSConstants.S_OK)
      {
         Object automationObject = null;
         ppHierarchy.GetProperty(VSConstants.VSITEMID_ROOT,
                                 (Int32)__VSHPROPID.VSHPROPID_ExtObject,
                                 out automationObject);

         if (automationObject != null)
         {
            EnvDTE.SolutionClass sc = automationObject as EnvDTE.SolutionClass;
            EnvDTE.Projects projects = sc.Projects;
            EnvDTE.Project project = projects.Item(1);
            EnvDTE.ProjectItems pitems = project.ProjectItems;

            pitems.AddFromFileCopy(@"e:\avinash\test.cpp");
         }
      }
   }            
} 
```

`sc`即将到来`null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T05:48:25.167

我设法使用这段代码将文件添加到当前项目的根目录：

```
string file = ... ; // Provide the absolute path of your file here
string[] files = new string[1] { file };
VSADDRESULT[] result = new VSADDRESULT[1];
proj.AddItem(
    VSConstants.VSITEMID_ROOT,
    VSADDITEMOPERATION.VSADDITEMOP_OPENFILE,
    file,
    1,
    files,
    IntPtr.Zero,
    result); 
```

不幸的是，使用 IVsProject.AddItem 似乎不可能将过滤器添加到项目中，或者在过滤器下添加文件。事实上，[MSDN 文档](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.shell.interop.ivsproject.additem%28v=vs.110%29.aspx)提到了参数`itemidloc`：

> itemidLoc
> 类型：System.UInt32
> [in] 要添加的项目的容器文件夹的标识符。应该是 VSITEMID_ROOT 或其他有效的项目标识符。请参阅枚举 VSITEMID。**请注意，此参数当前被忽略，因为仅支持将项目添加为项目节点的子节点。**支持文件夹概念的项目将希望添加与 itemidLoc 相关的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:32:50.803

我不知道为什么这不起作用，但也许你可以尝试使用 MPF 或 VSXtra（由深潜创建），它们都可以帮助我们轻松管理 HierachyNode。

# opencv - 如何在冲浪检测中找到 3d 投影矩阵

> ID：10779979
> 
> 赞同：7
> 
> 时间：2012-05-28T06:02:03.070
> 
> 标签：opencv, 3d, homography

我是 OpenCV 的新手。我已经让 Surf Detection 样本工作了。现在我想在检测到的图像上放置一个 3d 模型。

如何找到 3d 投影矩阵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:03:58.667

我猜你说的是增强现实，因为你说你想在检测到的图像上放置一个 3D 模型（在相机框架中？）。他们问题的关键始终是检测至少 4 个与我们标记中的其他 4 个“关键点”匹配的点。然后，求解一些方程，我们将得到单应性，这将允许我们投影任何点。

在 OpenCV 中有一个函数可以执行此任务：[cvFindHomography](http://opencv.willowgarage.com/documentation/camera_calibration_and_3d_reconstruction.html#findhomography)

您只需要匹配对，选择一种方法（RANSAC，即），您将获得 Homography。

[然后你可以像这里](https://stackoverflow.com/a/10750648/744859)解释的那样投射点：

# c#-4.0 - 如何只更新数据网格中的一行

> ID：10779981
> 
> 赞同：0
> 
> 时间：2012-05-28T06:02:07.283
> 
> 标签：c#-4.0, ms-access-2007

我在运行代码时遇到问题，然后更新成功，但我只想更新一行。当通过我的代码时，所有数据都是更新的。

我的代码是：

*代码*

```
protected void imgbtn_Save_Click(object sender, EventArgs e)
{

        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandText = "update Companies set CompanyFName='" + txt_ComName.Text + "',CompanySName='" + txt_ShortName.Text + "',CompanyeMail='" + txt_email.Text + "',CompanyWebsite='" + txt_website.Text + "'where CompanyId=CompanyId";

        cmd.Connection = conn;
        OleDbDataAdapter da = new OleDbDataAdapter();
        da.UpdateCommand = cmd;

        cmd.ExecuteNonQuery();
        conn.Close();
        BindGridData();
        lblError.Font.Bold = true;
        lblError.Font.Size = 11;
        lblError.Text = "You have successfully modified the case!";
    } 
```

我不知道为什么？

请建议我。

“谢谢”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:26:28.630

首先使用[OleDbParameter](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)。看看这个线程。[如何使用 oledb 参数更新表？](https://stackoverflow.com/questions/2675610/how-to-update-a-table-using-oledb-parameters).

您的代码的问题是您正在刷新完整的数据源，使用 `BindGridData();`可能存在其他记录在代码中的其他位置更新的情况，并且您似乎`BindGridData()`再次从数据库中获取数据。您可以将现有数据源存储在临时位置，然后对其进行更新并将其绑定到数据网格，而不是通过 db 获取最新数据

# ios - ios - 从当前比例捏/缩放

> ID：10779983
> 
> 赞同：6
> 
> 时间：2012-05-28T06:02:22.377
> 
> 标签：ios, uiview, uigesturerecognizer, gesture-recognition

以下代码正确地捏/缩放容器视图，但仅在它跳转到 1.0 的比例之后。如何修改它以使容器视图从当前比例缩放？

```
UIPinchGestureRecognizer *twoFingerPinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingerPinch:)];
[self.container addGestureRecognizer:twoFingerPinch];

- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer 
{
    _scale = recognizer.scale;
    CGAffineTransform tr = CGAffineTransformScale(self.view.transform, _scale, _scale);
    self.container.transform = tr;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T07:14:37.773

在 .h 文件中，添加：

```
CGFloat _lastScale; 
```

在 .m 文件中，

```
- (id)init  {
    ...
    _lastScale = 1.0f;
    ...
}

- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer 
{
    if (recognizer.state == UIGestureRecognizerStateEnded)  {
        _lastScale = 1.0f;
        return;
    }

    CGFloat scale = 1.0f - (_lastScale - recognizer.scale);
    CGAffineTransform tr = CGAffineTransformScale(self.view.transform, scale, scale);
    self.container.transform = tr;

    _lastScale = recognizer.scale;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T22:18:55.400

这是我的做法：

```
- (void)handlePinchGesture:(UIPinchGestureRecognizer *)recognizer {

    static float initialDifference = 0.0;
    static float oldScale = 1.0;

    if (recognizer.state == UIGestureRecognizerStateBegan){
        initialDifference = oldScale - recognizer.scale;
    }

    CGFloat scale = oldScale - (oldScale - recognizer.scale) + initialDifference;

    myView.transform = CGAffineTransformScale(self.view.transform, scale, scale);

    oldScale = scale;    

} 
```

# css - 使背景像 CSS 中的附加图像

> ID：10779991
> 
> 赞同：2
> 
> 时间：2012-05-28T06:03:26.853
> 
> 标签：css

![在此处输入图像描述](../Images/030983b2e6eb95ff624aeec80d366e8a.png)

如何在 css 中制作类似于附加图像的背景？我已经尝试过边框，这样我就可以给它一个像黑色部分一样的形状，但在那种情况下我不能写文字，所以我猜平行四边形的边框形状不会有任何其他想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T06:32:56.110

你可以这样写： **CSS**

```
.tab{
    width:200px;
    height:40px;
    position:relative;
    background:#000;
}
.tab:after{
    content:'';
    right:-40px;
    top:0;
    position:absolute;
    width:0;
    height:0;
    border-width:20px;
    border-color: transparent transparent #000 #000;
    border-style:solid;
} 
```

检查这个[http://jsfiddle.net/696Sb/](http://jsfiddle.net/696Sb/)

Y0u 也可以为此使用 css3 转换。像这样写：

```
.tab:after{
    content:'';
    right:-30px;
    top:10px;
    position:absolute;
    width:60px;
    height:60px;
    background:#000;
    -moz-transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
    transform:rotate(45deg);
} 
```

检查这个[http://jsfiddle.net/696Sb/1/](http://jsfiddle.net/696Sb/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T06:33:40.833

这里有 2 个在 CSS 中制作对角线/三角形的教程：

*   [如何使用 CSS 创建对角线](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-diagonal-lines-with-css/)
*   [CSS三角形](http://css-tricks.com/snippets/css/css-triangle/)

您是否希望能够在最上面的黑色水平线（对角线左侧）下方书写？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:34:04.300

嘿，现在您可以像这样在 css 中的属性**之后**和**之前使用它**

**HTML**

```
<div class="shape"></div> 
```

**CSS**

```
 .shape{
background:#000;
    margin:40px 20px;
    height:100px;
    width:700px;
    position:relative;
}
.shape:after{
content:'';
position:absolute;
    top:-20px;
    right:0;
    height:20px;
    border-left:solid 30px #000;
    border-right:transparent 30px solid;
        border-top:transparent 20px solid;
}

.shape:before{
content:'';
position:absolute;
    top:-20px;
    left:0;
    right:60px;
    height:20px;
background:#000;
} 
```

现场演示[http://jsfiddle.net/uuxd8/](http://jsfiddle.net/uuxd8/)

**更新**

现场演示二[http://jsfiddle.net/uuxd8/1/](http://jsfiddle.net/uuxd8/1/)

# google-maps - 谷歌地图中单个国家多次出现

> ID：10779992
> 
> 赞同：0
> 
> 时间：2012-05-28T06:03:35.480
> 
> 标签：google-maps, jquery-plugins

我使用谷歌地图的[地理完整](http://ubilabs.github.com/geocomplete/)插件来加载地图。当我加载“美国”的地图时，它在地图中出现了不止一次。我认为这可能与地图画布的大小有关。我该如何解决？我在 gmap3 中也有同样的问题，直接使用谷歌地图 API。

![在此处输入图像描述](../Images/4597d6a95e64fb2b7794eceefab3c718.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:11:53.850

您可以通过两种方式“隐藏”重复区域：

我更喜欢随着缩放的变化调整 div 的大小。缺点是，如果您保持地图居中（我认为这看起来更好），地图控件会四处移动，并且无法像在固定大小的地图中那样进行缩放

这是一个演示：http: [//jsbin.com/eyehaz/3/edit#preview](http://jsbin.com/eyehaz/3/edit#preview)

```
 var map;
  var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP };
  var widths = ["256px", "512px", "1024px", "100%"];

  function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    google.maps.event.addListener(map, 'zoom_changed', function() {
      zoom = map.getZoom();
      if (zoom < 4) {
        document.getElementById("map_canvas").style.width = widths[zoom];
      }
      else {
        document.getElementById("map_canvas").style.width = widths[3]; 
      }
      google.maps.event.trigger(map, "resize");
    });
  } 
```

第二个选项，将不可见的 div 放置在正确的位置，并在缩放级别较低时启用它们的可见性。缺点是为了保持地图居中，地图控件被完全覆盖

```
 #leftcover { position: absolute; height: 100%; background-color: #e5e3df; left: 0px; width: 128px; z-index: 2; display: none }
  #rightcover { position: absolute; height: 100%; background-color: #e5e3df; left: 384px; width: 128px; z-index: 2; display: none }

    google.maps.event.addListener(map, 'zoom_changed', function() {
      if(map.getZoom() == 0) {
        document.getElementById("leftcover").style.display = "inline";
        document.getElementById("rightcover").style.display = "inline";
      }
      else {
        document.getElementById("leftcover").style.display = "none";
        document.getElementById("rightcover").style.display = "none";
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T06:31:26.037

此行为是设计使然。似乎在 API 版本 3 中无法限制地图的水平重复。

您认为地图的大小是正确的：因为大小和缩放级别允许地图的多个实例，所以显示的实例不止一个。每个副本都有一个标记。

# jquery - 如果在 GridView 中检查了同一行中的另一个复选框，请选中一个复选框

> ID：10779995
> 
> 赞同：0
> 
> 时间：2012-05-28T06:03:44.450
> 
> 标签：jquery, asp.net, gridview, checkbox

我有一个 Gridview，每行有两个复选框，在选中第二个复选框时，我希望自动选中第一个复选框。我正在寻找 Clent 侧脚本...请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:16:29.490

尝试这个

```
var rows = $("#your table tr:gt(0)"); // skip the header row

rows.each(function(index) {
    var lastCheckbox = $("td:nth-child(youlast checkbox cell) input", this);
    var firstCheckBox=$("td:nth-child(firstCheckboxCellIndex) input", this);
    $(lastCheckbox).change(function(e) { $(firstCheckBox).attr('checked',$(this).is(':checked'));
});; 
```