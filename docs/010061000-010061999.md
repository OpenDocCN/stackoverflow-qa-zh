# StackOverflow 问答 10061000-10061999

# database - 如何在不使用多对多/一对多的情况下将列表存储在数据库中？

> ID：10061002
> 
> 赞同：0
> 
> 时间：2012-04-08T07:00:58.120
> 
> 标签：database, arrays, list, schema, relationship

这是我想要做的，我想在数据库记录中存储一个值列表，所以它是这样的：

```
| id |  tags     |
| 1  |  1,3,5    |
| 2  |  121,4,6  |
| 3  |  3,101,2  | 
```

到目前为止，我发现的大多数建议都建议创建一个单独的连接表来建立多对多关系，但在我的情况下，我认为创建一个单独的表不合适，因为标签值只是一个数字列表.

我现在能想到的最好的方法是将数据存储为 csv 字符串，并在检索时对其进行相应的解析，但我仍在尝试找到一种方法，在检索时可以将值作为数组获取来自数据库，如果我可以限制列表中元素的数量，那就更好了，有没有更好的方法来做到这一点？

我还没有决定使用哪个数据库，很可能是 postgresql，但如果它可以帮助我更好地实现这个，我向其他人开放，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:13:39.300

在 PostgreSQL 上，您可以使用[数组类型](http://www.postgresql.org/docs/9.1/static/arrays.html)。

在 MySQL 上，您可以使用[set type](http://dev.mysql.com/doc/refman/5.6/en/set.html)。

那么这取决于你真正需要什么。

# python - 从字符串生成所有 n 元组

> ID：10061008
> 
> 赞同：1
> 
> 时间：2012-04-08T07:01:53.420
> 
> 标签：python, string

是否有一种简单的 Pythonic 方法可以从字符串生成所有给定长度的 n 元组？

例如，我想`generateTuples("Hello, World!", 3)`生成以下内容：

```
[ "Hel", "ell", "llo", "lo,", "o, ", ", W", " Wo", "Wor", "orl", "rld", "ld!" ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:06:05.583

```
>>> a = "Hello, World!"
>>> def generate_tuples(string, n):
...     return [string[i:i+n] for i in range(len(string)-n+1)]
... 
>>> generate_tuples(a, 3)
['Hel', 'ell', 'llo', 'lo,', 'o, ', ', W', ' Wo', 'Wor', 'orl', 'rld', 'ld!'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:07:14.170

这可能是您正在寻找的

```
>>> st="Hello, World!"
>>> [st[i:i+3] for i in xrange(0,len(st)-2)]
['Hel', 'ell', 'llo', 'lo,', 'o, ', ', W', ' Wo', 'Wor', 'orl', 'rld', 'ld!'] 
```

或者，如果您愿意，可以将其编写为函数：

```
>>> def generateTuples(st,n):
        return [st[i:i+n] for i in xrange(0,len(st)-n+1)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T08:07:27.823

```
>>> text = "Hello, World!"
>>> map(''.join,zip(*(text[i:] for i in range(3))))
['Hel', 'ell', 'llo', 'lo,', 'o, ', ', W', ' Wo', 'Wor', 'orl', 'rld', 'ld!'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T08:15:35.023

```
>>> text = "Hello, World!"
>>>
>>> def subseqs(seq, length):
...     for i in xrange(len(seq) - length + 1):
...         yield seq[i:i+length]
...
>>> map(''.join, subseqs(text, 3))
['Hel', 'ell', 'llo', 'lo,', 'o, ', ', W', ' Wo', 'Wor', 'orl', 'rld', 'ld!'] 
```

# database - 如何访问 OpenSearchServer 数据库字段？

> ID：10061011
> 
> 赞同：0
> 
> 时间：2012-04-08T07:02:16.530
> 
> 标签：database, search-engine

我正在使用 OpenSearchServer v1.2.4。我想访问 OpenSearchServer 数据库字段，如“自动完成”或拼写检查等。我该怎么做？OpenSearchServer api 仅通过 XML 提供标题、元、url 字段和其他一些字段。请建议我查询/搜索模式以获取自动完成字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:21:49.317

您可以通过编辑查询轻松控制返回的字段。为此，请转到查询选项卡面板。

**拼写检查**

要激活拼写检查，请编辑“搜索”查询并转到拼写检查选项卡面板。如果您使用的是 Web 模板，请使用“contentExact”或“titleExact”字段。拼写检查模块将通过提取该字段中存在的单词来构建字典。有三种可用算法：Levensthein、Jaro-Winkler、NGramDistance。

一旦您设置了拼写检查设置并保存了查询，您就可以使用 XML over HTTP API 来使用它。大多数时候，XML 将包含拼写检查建议。您必须决定何时向用户显示建议。当搜索没有返回文档时，您可以显示建议。

**自动完成**

“自动完成”字段的作用是收集索引文档（网页）中可用的所有表达式。

这是构建自动完成功能的常用方法：

*   使用以下字段创建一个新的空索引：
    *   表达式：索引，存储，分析器描述器在下一点。
    *   频率：索引，不存储。
*   使用以下参数为表达式字段创建文本分析器：
    *   分词器：标准分词器
    *   在过滤器列表中，添加：
        *   小写过滤器
        *   一个 EgdeNGramFilter（最小克大小：1 - 最大克大小：50 - 边缘侧：前）
*   创建一个调度器作业。它将定期使用收集的表达式填充新索引（例如：每天一次）。典型的任务和参数是：
    *   添加“删除查询”任务：查询*：：*
    *   添加“Pull terms”任务：
        *   源字段名称：自动完成
        *   索引来源：网络索引的名称
        *   术语字段名称：表达式
        *   频率字段名称：freq
        *   最小频率：1
        *   频率垫：9
    *   添加“索引 - 优化”任务。
*   使用以下参数创建一个新请求：
    *   模式查询：表达式：($$)
    *   返回字段：表达式
    *   排序字段：频率降序，分数降序
*   使用新查询集成自动完成用户界面。

# android - Android定时器怎么用？

> ID：10061013
> 
> 赞同：1
> 
> 时间：2012-04-08T07:02:28.177
> 
> 标签：android

我在这里有一个基本计时器，我想每 2 秒左右调用一个方法..

我正在尝试实现我的计时器，但它给了我一个“无法启动活动组件信息”错误。

这是我的代码：

```
public class AndroidTabLayoutActivity extends TabActivity {

Timer pollTimer;
TimerTask TestTimer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    pollTimer = new Timer();

    pollTimer.scheduleAtFixedRate(TestTimer, 1, 1000);

    TestTimer = new TimerTask() {
        @Override
        public void run() {
            System.out.println("Timer tick!");
        }
    };
} 
```

一定有什么我做错了。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:08:54.957

试试这个...

> @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); 设置内容视图（R.layout.main）；
> 
> ```
> pollTimer = new Timer();
> 
> TestTimer = new TimerTask() {
>     @Override
>     public void run() {
>         System.out.println("Timer tick!");
>     }
> }; 
> ```
> 
> pollTimer.scheduleAtFixedRate(TestTimer, 1, 1000); }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:08:20.153

给你最好的例子

希望这有帮助：D

[http://developer.android.com/resources/articles/timed-ui-updates.html](http://developer.android.com/resources/articles/timed-ui-updates.html)

# arrays - 将数字从标准输入获取到 C 中的数组

> ID：10061020
> 
> 赞同：3
> 
> 时间：2012-04-08T07:03:47.427
> 
> 标签：arrays, getchar, atoi

我正在尝试将数字从标准输入获取到数组。stdin 中的第一个数字是数组中元素的数量（数字可以是任何 int）。我这样做是为了得到第一个数字：

```
while(c=getchar()!=' '){
n*=10;
n+=atoi(c);
} 
```

然后创建一个大小为 n 的数组。现在我需要完成所有其余的

```
 while(c=getchar()!=EOF) 
```

并将数字添加到数组中。数字由 \t 分隔，有时也由 \n 分隔。我该怎么做？我已经思考了一个小时，但仍然没有工作代码。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:26:18.250

除非您感到特别受虐（或由于作业要求而不能），否则您通常会使用`scanf`：

```
int n;
int *numbers;

scanf("%d", &n);

numbers = malloc(n * sizeof(*numbers));

for (int i=0; i<n; i++)
    scanf("%d", &numbers[i]); 
```

为了更健壮的错误处理，您经常希望使用 一次读取一行，然后使用（或类似的东西）`fgets`将其解析为单独的数字。`sscanf`

顺便说一句：不，您不应该*将*return from`malloc`转换为 to `int *`。在 C 中它既没有必要也不可取。 Just `#include <stdlib.h>`，并如上所示分配结果。如果您的编译器向您发出有关转换的警告（或错误），则意味着正在发生以下两种情况之一：要么您忘记`#include <stdlib.h>`按要求进行，要么您实际上正在编译为 C++。如果您正在编写 C++，请编写真正的 C++，这意味着您根本不应该使用`malloc`。

# javascript - 检查当前时间是否在javascript中的特定间隔内

> ID：10061021
> 
> 赞同：0
> 
> 时间：2012-04-08T07:04:07.223
> 
> 标签：javascript, jquery-plugins

**编辑**：请注意在您的答案中介绍 UTC 时间。由于在客户端做事会导致不同的时区。

在javascript中，我可以得到当前时间、小时和分钟，如下所示：

```
var currentTime = new Date();
var currentHour = currentTime.getHours();
var currentMinute = currentTime.getMinutes(); 
```

现在，只有当当前时间在固定时间间隔内为假时，我才必须执行任务。说有一个`fixed time 10:30 AM`。`current time`如果, 是或`4 hours behind`的,用户可以执行某项任务。`current time``1 hour ahead``fixed time`

**这意味着用户可以在上午 6:30 到上午 11:30 之间执行任务。**

我尝试获取当前时间并做

```
start = fixed_time - 4;
end = fixed_time + 1;
if currentHour< end or currentHour > start{
do some stuff; 
} 
```

但这忽略了分钟，如何处理呢？ **否则，我怎么知道当前时间是否在上午 6:30 到上午 11:30 之间？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:20:01.840

```
var currentTime = new Date();
var startTime = new Date(2012, 3, 8, 6, 30, 0, 0); //6:30am today
var endTime = new Date(2012, 3, 8, 11, 30, 0, 0); //11:30am today

if ((currentTime.getTime() > startTime.getTime()) && (currentTime.getTime() < endTime.getTime())
{
   //current time is between start and end so do what you need to do
} 
```

如果你需要它更有活力，你可以

```
var currentTime = new Date();
var startTime = new Date();
startTime.setHours(6);
startTime.setMinutes(30);
var endTime = new Date();
endTime.setHours(11);
endTime.setMinutes(30);

if ((currentTime.getTime() > startTime.getTime()) && (currentTime.getTime() < endTime.getTime())
{
   //current time is between start and end so do what you need to do
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:30:16.087

您可以相互比较日期。因此，使用当前日期和时间，您可以将其与具有固定时间集的日期进行比较。就像是：

```
var now    = new Date
   ,lower  = new Date
   ,upper  = new Date;
//determine limits
lower.setHours(6);
lower.setMinutes(30);
upper.setMinutes(30);
upper.setHours(11);
//tests
now = new Date('2012/04/08 22:00');
console.log(now >= lower && now <= upper); //=> false
now = new Date('2012/04/08 07:00');
console.log(now >= lower && now <= upper); //=> true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T07:13:39.043

您可以使用 getTime() 方法返回自 1970 年 1 月 1 日午夜以来的毫秒数：

```
currentTime = (new Date()).getTime(); 
```

那么您所需要的就是计算您的固定时间和当前时间之间的差异（以毫秒为单位）。4 小时等于 14,400,000 (4*60*60*1000) 毫秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T22:10:45.563

```
var startTime = '01 AM'; // or var startTime = '01:00 AM';
var endTime   = '09 AM'; // or var startTime = '09:00 AM';

var now       = new Date();

if(now < convert_time(endTime) && now > convert_time(startTime)){
  alert("With in a range");
}else{
 alert("Out of range");
}    

function convert_actual_time(time) {
 if(time.indexOf(" ") != -1){
  split1 = time.split(" ");
  splitTime = split1[0];
  splitZone = split1[1];
 }
 if(splitTime.indexOf(":") != -1){
  split2 = splitTime.split(":");
  setHours  = split2[0];
  setMins   = split2[1];        
 }else{
  setHours  = splitTime;
  setMins   = "00";
}   
 if(splitZone.toLowerCase() == "pm"){   
  setHours = parseInt(setHours)+12; 
 }  
 date = new Date();
 date.setHours(setHours);
 date.setMinutes(setMins);

 return date;
} 
```

尝试使用此代码

# objective-c - iSight 环境传感器

> ID：10061028
> 
> 赞同：6
> 
> 时间：2012-04-08T07:05:53.280
> 
> 标签：objective-c, xcode, macos, cocoa, isight

我意识到没有任何关于使用 isight 光传感器的公开文档，但是诸如 ShadowBook [（此处显示）](http://blog.medallia.com/2006/06/shadowbook.html)之类的程序能够访问亮度数据，我只是想知道是否有人能够获得类似的结果和知道如何访问这个传感器？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:02:12.217

您可以使用 IOKit 库中的 IOService 访问光传感器。光传感器的名称是“AppleLMUController”。这是一个很好的例子：[光传感器](http://osxbook.com/book/bonus/chapter10/light/)。简单地说，像这样获取服务：`io_service_t service = IOServiceGetMatchingService(kIOMasterPortDefault, IOServiceMatching("AppleLMUController"));` 然后，使用以下命令连接到服务：

```
io_connect_t port = 0;
IOServiceOpen(service, mach_task_self(), 0, &port); 
```

使用以下方法获取光照水平：`IOConnectMethodScalarIScalarO(port, 0, 0, 2, &left, &right);` Where`left`和`right`是现在保存传感器光照水平的整数。请注意，许多 IOService 方法返回一个`kern_return_t`变量，该变量将保持`KERN_SUCCESS`，除非该方法失败。还要确保使用释放服务对象`IOObjectRelease(service);`

编辑：再想一想，`IOConnectMethodScalarIScalarO()`似乎已被弃用。相反，使用：

```
uint32_t outputs = 2;
uint64_t values[outputs];

IOConnectCallMethod(port, 0, nil, 0, nil, 0, values , &outputs, nil, 0); 
```

左值和右值将分别存储在`values[0]`和`values[1]`中。请注意，并非所有 MacBook 都以这种方式工作：在我的 2010 年中期 15'' pro 上，这两个值是相同的，因为光传感器位于 iSight 摄像头中。

# java - 如何在java中从像素字节数组制作bmp图像

> ID：10061029
> 
> 赞同：4
> 
> 时间：2012-04-08T07:06:03.640
> 
> 标签：java, raster, pixel, bufferedimage

我有一个字节数组，其中包含来自 .bmp 文件的像素值。它是通过这样做生成的：

```
BufferedImage readImage = ImageIO.read(new File(fileName));
byte imageData[] = ((DataBufferByte)readImage.getData().getDataBuffer()).getData(); 
```

现在我需要重新创建 .bmp 图像。我试图制作一个 BufferedImage 并通过调用该`setPixels`方法来设置 WritableRaster 的像素。但是我必须提供一个 int[]、float[] 或 double[] 数组。也许我需要将字节数组转换为其中之一。但我不知道该怎么做。我也试过这个`setDataElements`方法。但我也不知道如何使用这种方法。

谁能解释如何从字节数组创建 bmp 图像？

**编辑：** @Perception

这是我到目前为止所做的：

private byte[] getPixelArrayToBmpByteArray(byte[] pixelData, int width, int height, int depth) throws Exception{ int[] pixel = byteToInt(pixelData); BufferedImage 图像 = null; if(depth == 8) { image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY); } else if(depth == 24){ image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB); } WritableRaster 光栅 = (WritableRaster) image.getData(); raster.setPixels(0, 0, 宽度, 高度, 像素); image.setData（光栅）；返回 getBufferedImageToBmpByteArray(image); } private byte[] getBufferedImageToBmpByteArray(BufferedImage image) { byte[] imageData = null; 尝试 { ByteArrayOutputStream bas = new ByteArrayOutputStream(); ImageIO.write(image, "bmp", bas); imageData = bas.toByteArray(); bas.close(); } 捕捉（异常 e）{ e.printStackTrace(); } 返回图像数据；} private int[] byteToInt(byte[] data) { int[] ints = new int[data.length]; 对于 (int i = 0; 我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:49:50.497

您需要将三个字节打包到您制作的每个整数中。根据缓冲图像的格式，这将是 0xRRGGBB。

byteToInt 必须像这样消耗三个字节：

```
private int[] byteToInt(byte[] data) {
    int[] ints = new int[data.length / 3];

    int byteIdx = 0;
    for (int pixel = 0; pixel < ints.length) {
        int rByte = (int) pixels[byteIdx++] & 0xFF;
        int gByte = (int) pixels[byteIdx++] & 0xFF;
        int bByte = (int) pixels[byteIdx++] & 0xFF;
        int rgb = (rByte << 16) | (gByte << 8) | bByte
        ints[pixel] = rgb;
    }
} 
```

您还可以使用[ByteBuffer.wrap(arr, offset, length)](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#wrap%28byte%5B%5D,%20int,%20int%29) .toInt()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T15:44:23.363

只有一个字节数组是不够的。您还需要构造一个标头（如果您从原始格式读取，例如在 DICOM 文件中）。

# java - Java - 生成长度为 x 的字符串

> ID：10061032
> 
> 赞同：2
> 
> 时间：2012-04-08T07:06:21.747
> 
> 标签：java, string

我的 Java 程序中有一些“繁重”的字符串操作，这通常涉及遍历字符串并用*填充字符*替换某些段，通常是“@”。这些字符稍后会被删除，但会被使用，以便在迭代期间保持字符串的长度和当前索引不变。

此过程通常涉及一次替换超过 1 个字符。
例如
，我可能需要在字符串中`"cat"`替换为，给出，所以我经常需要创建长度为**x的“@”字符串。**`"@@@"``"I love cats"``"I love @@@s"`

 **在 python 中，这很容易。

```
NewString = "@" *x 
```

在 Java 中，我发现我当前的方法令人反感。

```
String NewString = "";
for (int i=0; i< x; i++)  {  
    NewString = NewString.concat("@");  } 
```

是否有适当的、预先确定的方法来执行此操作？
有没有人有更短、更“高尔夫”的方法？
谢谢！

* * *

规格：
Java SE (Jre7)
Windows 7 (32)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T07:15:03.007

我不清楚评论建议使用什么样的正则表达式，但是创建一个以给定长度填充特定字符的字符串非常容易：

```
public static String createString(char character, int length) {
    char[] chars = new char[length];
    Arrays.fill(chars, character);
    return new String(chars);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T07:14:49.113

Guava 有个不错的小方法[`Strings.repeat(String, int)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#repeat%28java.lang.String,%20int%29)。查看该方法的[来源](http://code.google.com/r/baggiogamp-guava/source/browse/src/com/google/common/base/Strings.java?r=7ce09488d186e4f085046fb8d60578726ec429de&spec=svnebfec52d9866b7f80730bf7dcca728341c9c9877)，它基本上相当于：

```
StringBuilder builder = new StringBuilder(string.length() * count);
for (int i = 0; i < count; i++) {
  builder.append(string);
}
return builder.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T07:14:18.000

您构建长度为 N 的字符串的方式非常低效。您应该使用[`StringBuffer`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuffer.html)其方便的`append`方法，或者构建一个字符数组`N`，并使用`String`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T07:17:59.917

你能*总是在“填充”字符串中使用相同的字符吗？你知道**x*的最大值吗？您可以创建一个可以切割成任意长度的常量前期：

```
private static final FILLER = "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@";

// inside your method
String newString = FILLER.substring(0, x); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T08:06:09.477

`java.lang.String`是不可变的。因此，连接字符串会导致创建临时字符串对象，因此速度很慢。您应该考虑使用可变缓冲区，例如`StringBuffer`or `StringBuilder`。在 java 中使用字符串时的另一个最佳实践是`CharSequence`尽可能使用类型。这将避免不必要的调用，`toString()`并且您可以轻松更改底层实现类型。

如果您正在寻找一个单行来重复字符串并且这证明使用外部库是合理的，请查看[`StringUtils.repeat`](http://commons.apache.org/lang/api-2.5/src-html/org/apache/commons/lang/StringUtils.html#line.4521)Apache Commons 库。但是，我觉得您可以编写自己的代码，而不是使用另一个库来完成重复字符串的琐碎任务。**

# php - Cakephp 2.1.1 稳定版中的 Auth 组件出现 500 内部服务器错误

> ID：10061034
> 
> 赞同：2
> 
> 时间：2012-04-08T07:07:14.137
> 
> 标签：php, apache, .htaccess, cakephp, mod-rewrite

我的 cakephp 应用程序 2.1.1 目前正在 Cent OS 服务器上运行，每当我尝试使用 Auth 组件登录系统时，我都会随机收到 500 个内部服务器错误。

我认为这与 Apache httpd.conf 设置有关，所以我从 None 更改为 AllowOverride All，但它一直在发生。

我不确定这是否与 .htaccess 或 Cakephp 的其他东西有关。

这实际上是 Cakephp 2.1.1 的错误吗？

**2012 年 4 月 12 日更新**

**我在日志中收到以下错误：**

```
2012-04-11 16:26:27 Warning: Warning (512): _cake_model_ cache was unable to write 'default_ticketing_jobs_localgovstategovfedjobs' to Apc cache in [/home/commstrat2_web/html/ticket/lib/Cake/Cache/Cache.php, line 306]
Trace:
Cache::write() - CORE/Cake/Cache/Cache.php, line 306
DataSource::_cacheDescription() - CORE/Cake/Model/Datasource/DataSource.php, line 306
Mysql::describe() - CORE/Cake/Model/Datasource/Database/Mysql.php, line 334
Model::schema() - CORE/Cake/Model/Model.php, line 1281
DboSource::fields() - CORE/Cake/Model/Datasource/DboSource.php, line 2180
DboSource::read() - CORE/Cake/Model/Datasource/DboSource.php, line 1027
Model::find() - CORE/Cake/Model/Model.php, line 2635
JobsLocalgovstategovfedjobsController::index() - APP/Controller/JobsLocalgovstategovfedjobsController.php, line 38
ReflectionMethod::invokeArgs() - [internal], line ??
Controller::invokeAction() - CORE/Cake/Controller/Controller.php, line 488
Dispatcher::_invoke() - CORE/Cake/Routing/Dispatcher.php, line 103
Dispatcher::dispatch() - CORE/Cake/Routing/Dispatcher.php, line 85
[main] - APP/webroot/index.php, line 96

2012-04-11 16:26:30 Warning: Warning (512): _cake_core_ cache was unable to write 'file_map' to Apc cache in [/home/commstrat2_web/html/ticket/lib/Cake/Cache/Cache.php, line 306]
Trace:
Cache::write() - CORE/Cake/Cache/Cache.php, line 306
App::shutdown() - CORE/Cake/Core/App.php, line 884
[main] - [internal], line ??

2012-04-11 16:26:30 Warning: Warning (512): _cake_core_ cache was unable to write 'method_cache' to Apc cache in [/home/commstrat2_web/html/ticket/lib/Cake/Cache/Cache.php, line 306]
Trace:
Cache::write() - CORE/Cake/Cache/Cache.php, line 306
DboSource::__destruct() - CORE/Cake/Model/Datasource/DboSource.php, line 3148
[main] - [internal], line ?? 
```

此外，当我启用调试并尝试在浏览器上注销以下错误时：

```
Fatal error: Call to a member function logout() on a non-object in /home/commstrat2_web/html/ticket/app/Controller/UsersController.php on line 117 
```

当我关闭调试时，它只是出现空白屏幕，这仅在登录和注销时才会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:58:26.373

这听起来完全像是一个文件权限问题。仔细检查 app/tmp 文件夹以确保子目录的权限正确。

# tomcat - struts2中的ClearCacheInterceptor

> ID：10061038
> 
> 赞同：0
> 
> 时间：2012-04-08T07:07:52.973
> 
> 标签：tomcat, struts2, interceptor, interceptorstack

在我的 Web 应用程序中，我想包含`ClearCacheInterceptor`，以便在执行注销操作后它应该清除捕获，以便如果用户单击后退按钮它不应该显示上一页。当我运行代码时它工作正常我可以登录执行其他操作但是当我单击注销时它显示错误。这是我的代码

```
public class ClearCacheInterceptor  extends AbstractInterceptor{

/**
 *
 */
private static final long serialVersionUID = 1L;

@Override

public String intercept(ActionInvocation invocation) throws Exception {

    ActionContext context=(ActionContext)invocation.getInvocationContext();

    HttpServletResponse response=(HttpServletResponse)context.get(StrutsStatics.HTTP_RESPONSE);

    response.setHeader("Cache-Control", "no-cache");

    response.setHeader("Pragma", "no-cache");

    response.setDateHeader("Expires", 0);

    String result=invocation.invoke();

    System.out.println("check result="+result);

    return result;

} 
```

}

注销代码

```
 public String logOut() {
    String status = "";
     if (true) {
        session.clear();
        session = null;
        if (session instanceof org.apache.struts2.dispatcher.SessionMap) {
            try {
                ((org.apache.struts2.dispatcher.SessionMap) session).invalidate();
            } catch (IllegalStateException e) {
            }
        }
        status = "success";
    } else {
        addActionError(getText("system.ERROR"));
        status = "error";
    }

    return status;
} 
```

我的 struts.xml 动作文件

```
 <struts>
<!-- Configuration for the default package. -->
<constant name="struts.Devmode" value="false"></constant>
<constant name="struts.enable.DynamicMethodInvocation" value="false" />
<constant name="struts.custom.i18n.resources" value="ApplicationResources" />
<package name="default" extends="struts-default">
    <interceptors>
        <interceptor-stack name="defaultStack">
            <interceptor-ref name="exception" />
            <interceptor-ref name="alias" />
            <interceptor-ref name="servletConfig" />
            <interceptor-ref name="prepare" />
            <interceptor-ref name="i18n" />
            <interceptor-ref name="chain" />
            <interceptor-ref name="debugging" />
            <interceptor-ref name="profiling" />
            <interceptor-ref name="scopedModelDriven" />
            <interceptor-ref name="modelDriven" />
            <interceptor-ref name="fileUpload" />
            <interceptor-ref name="checkbox" />
            <interceptor-ref name="staticParams" />
            <interceptor-ref name="params">
                <param name="excludeParams">dojo..*,d-..*,6..*</param>
            </interceptor-ref>
            <interceptor-ref name="conversionError" />
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
        </interceptor-stack>
        <interceptor name="clear-cache"  class="com.java.session.ClearCacheInterceptor" />
    </interceptors>
    <default-interceptor-ref name="defaultStack"/>

    <action name="users">
        <result>home.jsp </result>
    </action>
    <action name="UserAction" class="com.java.action.RegisterAction">
        <result name="input">/signup.jsp</result>
        <result name="success">/home.jsp</result>
        <result name="error">/error.jsp</result>
    </action>
    <action name="trialregister">
        <result>signup.jsp</result>
    </action>
    <action name="Activate" class="com.java.action.ActivationAction">
        <result name="input">/error.jsp</result>
        <result name="success">/home.jsp</result>
        <result name="error">/test1.jsp</result>
    </action>
    <action name="verifyLogin" class="com.java.action.LoginAction" method="verifyLogin">
         <result name="input">/home.jsp</result>
        <result name="success">/test1.jsp</result>
    </action>

    <action name="logOut" class="com.java.action.LoginAction" method="logOut">
        <interceptor-ref name="clear-cache"/>
        <result name="error">/error.jsp</result>
        <result name="success">/logout.jsp</result>
    </action>

    <action name="Back">
    <result>/index.jsp</result>    
    </action>

    <action name="Reroot">
    <result>/index.jsp</result>    
    </action>

</package> 
```

日志中的错误消息是

```
 SEVERE: Servlet.service() for servlet default threw exception
          java.lang.NullPointerException
at com.java.action.LoginAction.logOut(LoginAction.java:103)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
at com.java.session.ClearCacheInterceptor.intercept(ClearCacheInterceptor.java:37)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1665)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:25:26.090

请在注销方法中更改您的实现。您正在调用

```
session.clear(); 
```

然后设置为null。如果抛出异常

```
session.clear(); 
```

那么这意味着当代码来到这里时，清除将被调用或未创建会话。还有一件事，您在 session= null; 之后验证**instanceof检查。**始终为空。

# python - ImportError: No module named pip.log -- 使用 pip 安装

> ID：10061039
> 
> 赞同：2
> 
> 时间：2012-04-08T07:07:56.763
> 
> 标签：python, pip

我正在使用 Ubuntu 10.10 并且我已经使用以下命令安装了 pip

```
apt-get install python-pip 
```

但是，当我尝试使用 pip 安装任何软件包时，出现以下错误

```
ImportError: No module named pip.log 
```

这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T14:35:35.663

我在默认安装是 python 2.6 的 debian squeezy(6.0) 上有同样的问题。要重现问题：

1.  将 python 从构建源代码升级到 2.7 并将其安装在 /opt/python 中。

2.  `wget bootstrap.pypa.io/get-pip.py`并运行`get-pip.py`。安装应该是成功的。

3.  运行`pip`并发生错误。`ImportError: No module named pip.log`.

解决问题的步骤：

1.  `ls -l /usr/bin/pip`找到旧的 pip 安装位置。
2.  `rm -rf pip`删除旧的 pip 安装。
3.  重新`pip`安装`get-pip.py`
4.  重新链接`/usr/bin/pip`到我电脑中的新 pip 安装位置`ln -s /opt/python/lib/python2.7/site-packages/pip/__init__.py pip`

# php - 从不同的类调用一个方法两次会导致内存不足错误

> ID：10061046
> 
> 赞同：0
> 
> 时间：2012-04-08T07:09:13.030
> 
> 标签：php, oop

我在单例类中有一个方法，这个类是从一个由子类扩展的父类调用的。

假设我的类已被正确声明和创建，这只是我的编码逻辑的快速运行。

```
class Singleton
{
    public function load_sys()
    {
        $this->something();
    }

    public function something()
    {
        $this->load();
    }

    public function load(){}
}

class Parent
{
    public function __construct()
    {
        $this->sys = Singleton::init();
        $this->sys->load_sys();
    }
}

class Child extends Parent
{
    public function __construct()
    {
        parent::__construct();
    }
} 
```

当我这样做时，我收到此错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 4296 bytes) in ~~~.php on line 102 
```

是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:19:29.377

我认为这可能不是由于两次调用方法，而是代码中的一些错误。首先，您要声明一个带括号的类：

```
class Singleton() 
```

应该：

```
class Singleton 
```

此外，您正在声明一个类，`Parent`它是 PHP 中的保留字，因此请先尝试重命名它。

# objective-c - 在 nstextfield 类型的对象上找不到属性文本

> ID：10061049
> 
> 赞同：0
> 
> 时间：2012-04-08T07:10:00.310
> 
> 标签：objective-c, sqlite

我正在为 MacOS 制作简单的 SQLite 数据库，并使用[本](http://www.techotopia.com/index.php/An_Example_SQLite_based_iOS_4_iPhone_Application_%28Xcode_4%29)教程中适用于 iOS 的信息。

当我实现这些代码行时，出现错误“在 nstextfield 类型的对象上找不到属性文本”：

```
 NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS 
    (name, address, phone) VALUES (\"%@\", \"%@\", \"%@\")", 
    name.text, address.text, phone.text]; 
```

我怎样才能为 MacOS 实现这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:28:15.467

尝试使用 NSTextField 的`stringValue`属性（从 NSTextField 继承的 NSControl）：http:
[//developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html# //apple_ref/occ/cl/NSControl](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/cl/NSControl)

```
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO CONTACTS 
(name, address, phone) VALUES (\"%@\", \"%@\", \"%@\")", 
name.stringValue, address.stringValue, phone.stringValue]; 
```

# oracle - oracle 11g 中的唯一行

> ID：10061051
> 
> 赞同：-2
> 
> 时间：2012-04-08T07:10:26.253
> 
> 标签：oracle

我有一个查询，它返回一组记录，如下所示：-

```
Date    Dept        commission

5-Apr   Sales       20
4-Apr   Sales       21
1-Jan   Marketing   35 
```

* * *

案例 1：如果我在 1 月 1 日到 4 月 5 日之间运行查询，我应该得到

```
Date    Dept        commission

5 April Sales       76 
```

* * *

案例 2：当我在 1 月 1 日和 1 月 31 日之间运行查询时，应该得到输出为

```
Date    Dept        commission

1 Jan   Marketing   35 
```

* * *

案例 2 很简单，因为我将日期范围设置为所需的结果，但不确定如何处理案例 1 以显示最大/最新日期、该日期的部门以及该部门的佣金总和、日期选定的日期范围。输出将是具有最新日期和部门的单行，其中包含所选日期范围的总和（佣金）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:44:51.073

```
SELECT
    MAX(Date)                     AS Date
  , ( SELECT tt.Dept                            
      FROM tableX tt 
      WHERE tt.Date = MAX(t.Date) 
    )                             AS Dept
  , SUM(Commission)               AS Commission
FROM
    tableX t
WHERE
    Date BETWEEN StartDate AND EndDate 
```

[如sql-fiddle、test-1](http://sqlfiddle.com/#!4/7c2e5/16)所示，上述内容在 SQL-Server、MySQL、Postgres 中有效，但在 Oracle 11g R2 中无效！

* * *

这虽然有效（[sql-fiddle, test-2](http://sqlfiddle.com/#!4/7c2e5/19)）：

```
SELECT
    MAX(t.Date)        AS Date
  , MIN(tt.Dept)       AS Dept               --- MIN, MAX irrelevant
  , SUM(t.Commission)  AS Commission
FROM
  ( SELECT
       MAX(Date)                      AS Date
     , SUM(Commission)                AS Commission
    FROM
       tableX 
    WHERE
       Date BETWEEN StartDate AND EndDate
  ) t
  JOIN
    tableX tt
      ON tt.Date = t.Date 
```

`MIN(tt.Dept)`用于处理您有超过最大日期的行的情况，例如一排和`Sales`一排`Marketing`，两者都在`Apr-5`

这也可以使用`LAST_VALUE`分析函数（[sql-fiddle, test-3](http://sqlfiddle.com/?_escaped_fragment_=4/7c2e5/19#!4/7c2e5/33)）：

```
SELECT
    MAX(Date)        AS Date
  , MIN(Dept)        AS Dept               
  , SUM(Commission)  AS Commission
FROM
  ( SELECT
       Date                      AS Date
     , LAST_VALUE(Dept) OVER( ORDER BY Date
               ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING 
                            )    AS Dept
     , Commission                AS Commission
    FROM
       tableX 
    WHERE
       Date BETWEEN StartDate AND EndDate
  ) t 
```

# c# - CLR GC 的世代预算？

> ID：10061052
> 
> 赞同：0
> 
> 时间：2012-04-08T07:10:51.257
> 
> 标签：c#, .net-4.0, garbage-collection, clr

我有这个简单的代码：

```
sealed class GenObj
{
    ~GenObj()
    {
        Console.WriteLine("In Finalize method");
    }
}

public static class Program
{
    public static void Main()
    {
        Console.WriteLine("Maximum generations: " + GC.MaxGeneration);
        Object o = new GenObj();
        Console.WriteLine("Gen " + GC.GetGeneration(o)); // line 3
        GC.Collect();
        Console.WriteLine("Gen " + GC.GetGeneration(o)); // line 5
        GC.Collect();
        Console.WriteLine("Gen " + GC.GetGeneration(o)); // line 7
        GC.Collect();
        Console.WriteLine("Gen " + GC.GetGeneration(o)); 

    }
} 
```

输出 ：

```
Maximum generations: 2
Gen 0
Gen 1
Gen 2
Gen 2 
```

然而有一个问题。

这本书（c# via clr）也在开头说：

> 当 CLR 初始化时，它会选择所有三代的预算。如前所述，0 代的预算约为 256 KB，1 代的预算约为 2 MB。
> 
> …</p>
> 
> 可能有多个垃圾收集，但只有在第 1 代达到其预算时才检查第 1 代中的对象，这通常需要第 0 代的几次垃圾收集。

问题 ：

在第 4 行，我可以理解为什么它不在第 1 代中。（在 GC 之后从 0 移到 1）

我不明白的行是第 7 行。

根据书：`the objects in generation 1 are examined only when generation 1 reaches its budget`

我不认为它已经达到它的预算。所以我想它应该留在第一代！

根据这本书 - 它不应该转移到第 2 代。

我错过了什么？

ps这里是包含书中确切文本的[链接](http://sachindesign.blogspot.com/2008/10/memory-allocation-generation-gc.html)（相信我我有PDF）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:36:11.340

在给本书作者写了一封电子邮件后，

这是他的回答

> 预算用于告诉 GC IT 应该收集哪些代。如果您自己调用 GC.Collect，那么您是在告诉 GC 忽略预算并只进行收集。您正在强制收集早期的对象，从而将对象推广给老一代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:24:01.427

我相信达米安是正确的。这本书描述了当你不强制进行完全垃圾收集时会发生什么。但你这样做。因此，正确的文本可能是这样的：

> 可能有几个集合，但只有在第 1 代 GC 发生时才会检查第 1 代中的对象。而第 1 代 GC 在第 1 代达到其预算时发生，这通常需要对第 0 代进行几次垃圾回收，但您也可以通过调用`GC.Collect(1)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-14T15:10:27.267

不要相信你在书中读到的一切。

作者写这本书时，他/她可能还没有完全理解这个主题。在作者写完这本书之后，实现可能已经发生了变化。

以下是我的理解：

初始 GC 预算由 gc 模式和机器配置决定。

小对象分配在 gen0 区域，移动到 gen1 区域，然后移动到 gen2 区域，正常情况。大对象分配在大对象堆中，被认为是 gen2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-15T20:15:14.623

这是一种测试 GC 预算的方法：

```
 const int AllocSize = 64;            // 64 kb block
    const int MaxBudget = 5 * 1024;      // Test max to 5 mb

    static int GetG0Budget()
    {
        GC.Collect(0, GCCollectionMode.Forced, true);

        int gcCount = GC.CollectionCount(0);

        int sum = 0;

        for (int i = 0; i < MaxBudget; i += AllocSize)
        {
            byte[] buffer = new byte[AllocSize * 1024];

            sum += buffer[0];

            if (GC.CollectionCount(0) != gcCount)
            {
                return i;
            }
        }

        return MaxBudget + sum;
    } 
```

在不同的机器上尝试，会返回不同的值。例如，在功能强大的台式机、笔记本电脑、Windows 手机上试用。

# python - 使用 Swig/Python 在 C 中传递多个参数并分配字符串

> ID：10061053
> 
> 赞同：1
> 
> 时间：2012-04-08T07:11:03.743
> 
> 标签：python, c, swig

我正在使用 SWIG 包装以下 C 接口以从 Python 访问它：

```
void some_method(char **output, int paramA, const char *paramB, int paramC); 
```

C 中的实现在运行时使用 malloc() 为指针 *output 分配内存。其他参数是只读的，并传达该方法所需的附加信息。

对应的 SWIG 接口文件应该是什么样的？

如果我只传递在 C 中动态分配的“输出”参数，而不传递其他参数，这种情况非常简单。即，如果我的 C 接口如下，并且它的实现是 example.c（比如说）：

```
void some_method(char **output); 
```

然后 SWIG 接口文件很简单，[如此 stackoverflow 线程](https://stackoverflow.com/questions/4393500/swig-python-and-output-strings)中所述：

```
%module example
%include<cstring.i>
%cstring_output_allocate(char **output, free(*$1));
%{  
    extern void some_method(char **output);
%}
%include example.c 
```

以上不适用于多个参数。如何传递多个参数，以及允许动态分配其中一个参数（在本例中为“输出”参数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:26:11.110

`%cstring_output_allocate` *确实*适用于多个参数。它声明“如果您将`char **output`其视为**任何**方法的参数，请隐藏该参数并将其作为附加输出返回。

这是一个例子。我声明了两种方法：一种返回值，另一种不返回。请注意在输出中如何`output`不传递参数，但它的结果作为附加返回值返回。

## 例子

### xc

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void some_method(char **output, int paramA, const char *paramB, int paramC)
{
    *output = malloc(paramA);
    sprintf_s(*output,paramA,"%s_%d",paramB,paramC);
}

int some_method2(char **output, int paramA, const char *paramB, int paramC)
{
    *output = malloc(paramA);
    sprintf_s(*output,paramA,"%s_%d",paramB,paramC);
    return strlen(*output);
} 
```

### xh

```
void some_method(char **output, int paramA, const char *paramB, int paramC);
int some_method2(char **output, int paramA, const char *paramB, int paramC); 
```

### 十一

```
%module x

%begin %{
#pragma warning(disable:4100 4127 4211 4706)
%}

%{
#include "x.h"
%}

%include<cstring.i>
%cstring_output_allocate(char **output, free(*$1));
%include "x.h" 
```

### 生成文件

```
_x.pyd: x.c x_wrap.c x.h
    cl /LD /W4 /MD /Ic:\python27\include x.c x_wrap.c -link /LIBPATH:c:\python27\libs

x_wrap.c: x.i x.h
    swig -python x.i 
```

## 输出

```
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import x
>>> x.some_method(100,'blah',123)
'blah_123'
>>> x.some_method2(100,'blah',123)
[8, 'blah_123'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:46:58.477

不是直接的答案，但您正在处理的内容听起来足够低级，您可能需要考虑放弃 SWIG 并直接使用[CPython api](http://docs.python.org/extending/index.html#extending-index)。SWIG 很棒，但它增加了另一个依赖项和大量生成的代码。

# search - 替换某些字符，但不是匹配中找到的字符

> ID：10061055
> 
> 赞同：2
> 
> 时间：2012-04-08T07:11:21.603
> 
> 标签：search, vim, pattern-matching

昨天我试图替换`(` `)`我的文本中的所有内容，但没有替换之前搜索中的匹配项。我找不到好的解决方案。我是一一改变的。

*这是我的原文*：

```
(Peter Jackson) is the man who..... (John Johnson) is the man who....  
and (John Johnson) is also the man who.. not as (Jon Johnson)
more (letters) etc. 
```

我的搜索模式： 如何将文本中的所有字符替换为，而不是在匹配项中找到的字符？ **`/(\a*\sJohnson)`**
`(` `)``[` `]`

*结果应该是：*

```
[Peter Jackson] is the man who..... (John Johnson) is the man who....  
and (John Johnson) is also the man who.. not as (Jon Johnson)
more [letters] etc. 
```

**编辑**
是否有一种简单的方法可以替换文本中的一个或多个字符，而不是匹配中的这些字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:48:35.793

您可以使用`\@!`（[负前瞻](http://www.regular-expressions.info/lookaround.html)）：

```
:%s/(\%(\a*\sJohnson\)\@!\([^)]*\))/[\1]/g
     ->|............|<--- 
```

*   `\%(...\)\@!`是一个`Negative Lookahead`。
*   `\([^)]*\)`将匹配除`)`.
*   我`\%(`用来忽略一个捕获的组，否则你需要`/[\2]/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:22:10.450

这可以工作：

```
:%s/(\(\a*\sJohnson\))/LEFTPARENT\1RIGHTPARENT/g
:%s/(/[/g
:%s/)/]/g
:%s/LEFTPARENT/(/g
:%s/RIGHTPARENT/)/g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T13:01:04.217

可以使用以下替换命令来实现所讨论的目的。

```
:%s/(\(.\{-}\%(IGNORE.\{-}\)\@<!\))/[\1]/g 
```

where`IGNORE`指定括号中不匹配的要更改的模式（`\a*\sJohnson`例如）。

为了解决缓冲区中除`IGNORE`模式匹配之外的所有地方替换的一般问题，可以使用命令

```
:%s/\(IGNORE\)\zs\|s/\=submatch(1)!=''?'':'t'/g 
```

# groovy - 如何通过葡萄添加依赖项？

> ID：10061056
> 
> 赞同：0
> 
> 时间：2012-04-08T07:11:26.383
> 
> 标签：groovy, grape

我想在 Groovy 中使用[NekoHtml](http://nekohtml.sourceforge.net/)。我想通过[Grape](http://groovy.codehaus.org/Grape)添加它。

我试过这样：

```
@GrabResolver(root="http://net.sourceforge.nekohtml/nekohtml") 
```

在我的 Groovy 代码中。

但它会抛出这样的错误：

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/home/anto/Groovy/webScrape/webFetch.groovy: 3: unexpected token:  @ line 3, column 1. 
```

NekoHtml 可以在此处的 Maven[中](http://nekohtml.sourceforge.net/)[找到](http://mvnrepository.com/artifact/net.sourceforge.nekohtml/nekohtml)。

## 编辑：

现在我有这样的代码：

```
@Grab('net.sourceforge.nekohtml:nekohtml:1.9.15')
import org.cyberneko.html.parsers.SAXParser
def url = 'http://java.sun.com'
def html = new XmlSlurper(new org.cyberneko.html.parsers.SAXParser()).parse(url)
def bolded = html.'**'.findAll{ it.name() == 'B' }
def out = bolded.A*.text().collect{ it.trim() }
out.removeAll([''])
out[2..5].each{ println it } 
```

抛出这样的错误：

```
Caught: java.lang.NoClassDefFoundError: org/apache/xerces/parsers/AbstractSAXParser
java.lang.NoClassDefFoundError: org/apache/xerces/parsers/AbstractSAXParser
Caused by: java.lang.ClassNotFoundException: org.apache.xerces.parsers.AbstractSAXParser 
```

无法弄清楚这个错误的状态。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:48:13.403

你有没有尝试过：

```
@Grab('net.sourceforge.nekohtml:nekohtml:1.9.15') 
```

然后它应该从maven解决

# jquery - 花式下拉菜单和花式框画廊之间的jQuery冲突

> ID：10061057
> 
> 赞同：0
> 
> 时间：2012-04-08T07:11:31.387
> 
> 标签：jquery, fancybox, conflict

我在一个站点上使用了 fancydropdownmenu 和 fancybox 图像库，并且 jquery 引用之间似乎存在冲突。在 HTML 头中最后引用的任何 JS 文件都会覆盖另一个。'fancydropdown.js' 在文件顶部有一个 JQuery 1.3 副本，我认为它与 HTML 文档头部的 JQuery 链接冲突。我尝试从 .js 文件中删除我认为是 JQuery 的内容，但没有成功。我也尝试过 .noconflict 并将 '$' 替换为 'jquery'。我可能做错了，因为我是个菜鸟。任何帮助都会非常感激......发疯了！网址是[www.amuletbhutan.com](http://www.amuletbhutan.com) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:26:51.453

由于*fancybox*需要 jQuery v1.3+ 并且*fancydropdown*菜单已经包含*jQuery* v1.3.2，您可以从您的部分中删除以下行`<head>`以避免进一步的冲突：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

您只需要一个 jQuery 实例（最好是最新版本）即可避免此类冲突。

否则，您可以尝试从`fancydropdown.js`（之前的所有内容`/* Sizzle CSS Selector Engine - v0.9.3`）中删除 jQuery 部分。

`.noconflict`当您在同一文档中有其他 javascript 库（如原型或 mootools）时使用，但不是您的情况。

# eclipse-plugin - Eclipse 插件开发项目中的休眠

> ID：10061065
> 
> 赞同：0
> 
> 时间：2012-04-08T07:13:03.013
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-emf-ecore

目前我在eclipse插件开发项目中工作。在这里，需要持久化域对象。hibernate 可以用于现有基于 ecore 的模型类中的 Java 持久性吗？如果是，必须考虑哪些挑战？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:58:49.873

[http://www.eclipse.org/cdo/](http://www.eclipse.org/cdo/)

这可能就是你要找的东西。

# mysql - MySQL：如何填充表以用现有数据填充缺失的行

> ID：10061070
> 
> 赞同：4
> 
> 时间：2012-04-08T07:13:52.540
> 
> 标签：mysql, sql, r

我有一组大型（cvs 文件中的 1GB）季度财务数据，我需要将其填充到月度数据中。每行都有一个公司标识符和日期戳，但不同的公司有不同的报告日期（3 月、6 月、9 月、12 月与 2 月、5 月、8 月、11 月）。

表：来源

```
Co.   |Date      |NPAT   |Debt
A     |31-Dec-09 |123    |4,000
B     |29-Feb-10 |12     |300
A     |31-Mar-10 |200    |4,500
B     |31-May-10 |11     |200
A     |30-Jun-10 |159    |4,300
C     |30-Jun-10 |-30    |4 
```

在示例公司 A 报告 3 月、6 月、9 月和 12 月，因此我需要将 3 月的数据复制到 4 月和 5 月，将 6 月的数据复制到 7 月和 8 月，将 9 月的数据复制到 10 月和 11 月，并将 12 月的数据复制到 1 月和 2 月。B 公司的报告期为 2 月、5 月、8 月和 11 月。

使用上面的示例，我需要的是：

表：目的地

```
Co.   |Date      |NPAT   |Debt
A     |31-Dec-09 |123    |4,000
A     |31-Jan-10 |123    |4,000
A     |29-Feb-10 |123    |4,000
B     |29-Feb-10 |12     |300
A     |31-Mar-10 |200    |4,500
B     |31-Mar-10 |12     |300
A     |30-Apr-10 |200    |4,500
B     |30-Apr-10 |12     |300
A     |31-May-10 |200    |4,500
.... 
```

我使用内部连接创建了一个填充表，从而生成了所有公司和日期的唯一列表，因此我有效地从一个包含公司和日期组合的完整列表的空表中盯着看。但是，我正在努力从那里开始。

我在这个项目中使用 mysql 和 R，我很高兴有一个解决方案/建议。考虑到数据量，我正在寻找一个相当有效的实现。

存在以下挑战： 1-公司在整个时间段内都不存在，所以我不想无限期地复制最后一期的结果（最多 2 个月）。同样，也会有一些公司在早期没有数据。2-不仅报告期可能不同，而且它们也可能发生变化，因此公司可能最初在 3 月的日历上报告，但随后更改为 2 月或 1 月，因此在复制之前需要检查该数据是否已经存在。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T10:01:14.227

最简单的方法是复制未来两个月的数据，但如果公司更改报告日期，就会出现问题。

```
-- Pseudo-code
CREATE VIEW Tmp1 AS
SELECT Id, 
       Date AS Reported_Date, 
       Date, 
       Value1, Value2 
FROM QuarterlyData
UNION
SELECT Id, 
       Date AS Reported_Date, 
       Date + '1 month' AS Date, -- Replace this with correct date arithmetics
       Value1, Value2 
FROM QuarterlyData
UNION
SELECT Id, 
       Date AS Reported_Date, 
       Date + '2 months' AS Date, -- Replace this with correct date arithmetics
       Value1, Value2 
FROM QuarterlyData; 
```

以下应该更安全（它也适用于日常数据）。如果您在表格中包含所有所需的日期，请首先将其与季度数据连接（我将数据保留六个月，因为我不知道报告日期更改时会发生什么：我们最终能否得到一个季度超过3个月？）。

```
-- Pseudo-code
CREATE VIEW Tmp2 AS 
SELECT A.Id, 
       A.Date AS Reported_Date, 
       B.Date AS Date,
       A.Value1, A.Value2
FROM   Data A, Dates B
WHERE  B.Date <= A.Date 
AND    A.Date < B.Date + '6 months'; 
```

然后，删除重复项。

```
CREATE VIEW Tmp_Dates_To_Keep AS
SELECT Id, Date, MAX(Reported_Date) AS Reported_Date 
FROM Tmp1;

SELECT A.Id, 
       A.Date, 
       A.Reported_Date, 
       Value1, Value2
FROM   Tmp2 A, Tmp_Dates_To_Keep B
WHERE  A.Id   = B.Id 
AND    A.Date = B.Date 
AND    A.Reported_Date = B.Reported_Date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T13:34:07.037

我使用 DATE_ADD 创建一个虚拟表来连接实际行：

```
SELECT DATE_ADD('2013-01-01', INTERVAL 1 HOUR) UNION SELECT DATE_ADD('2013-01-01', INTERVAL 2 HOUR) UNION SELECT DATE_ADD('2013-01-01', INTERVAL 3 HOUR) UNION SELECT DATE_ADD('2013-01-01', INTERVAL 4 HOUR) ... etc 
```

# linux - 在shell脚本中使用for循环遍历参数列表？

> ID：10061071
> 
> 赞同：2
> 
> 时间：2012-04-08T07:13:53.570
> 
> 标签：linux, shell, scripting, parameters, cat

我想显示通过参数提供给我的 shell 脚本的文件的内容。我需要使用正常的“for (())”循环而不是“for x in arr”循环来执行此操作。

这是我的代码。我应该如何为该 cat 命令正确输入文件名？

```
for (( i=1;$i<=$#;i=$i+2 ))
do
    cat '$'$i   #display the contents of the file currently being traversed
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:54:35.517

for 循环的正常行为是遍历参数。遍历所有参数：

```
#!/bin/sh -e
for x; do cat $x; done 
```

您可以稍微修改它以仅对每个其他参数进行操作，就像您在示例中以许多不同的方式所做的那样。一种可能性是：

```
for x; do expr $(( i++ )) % 2 > /dev/null || cat "$x"; done 
```

如果你坚持使用非标准形式，你可以使用 ${!var} bashism，它在绝大多数 shell 中都会失败，或者你可以使用`eval`

```
for (( i = 1; i <= $#; i += 2 ))
do
    eval cat '"$'$i\"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:23:41.927

你可以使用类似的东西：

```
for (( i=1;$i<=$#;i=$i+1 ))
do
    cat ${!i}  #display the contents of the file currently being traversed
done 
```

相应的手册部分：

> 如果参数的第一个字符是感叹号，则引入了变量间接级别。Bash 使用由其余参数形成的变量的值作为变量的名称；然后扩展此变量，并将该值用于其余的替换，而不是参数本身的值。这称为间接扩展。例外情况是下面描述的 ${!prefix*} 和 ${!name[@]} 的扩展。感叹号必须紧跟左大括号以引入间接性。

# javascript - 为什么在浏览器中显示我的网络摄像头图像会有所不同？

> ID：10061075
> 
> 赞同：0
> 
> 时间：2012-04-08T07:14:31.467
> 
> 标签：javascript, image, cross-browser, autoresize, partial-page-refresh

我有一个 IP 网络摄像头并将图像上传到气象服务。然后我捕获该图像以显示在我的网页中。为了做到这一点，我搜索了一些可以在不刷新页面的情况下刷新图像的代码。我找到了一些我改编的代码（对不起，我不知道该承认谁）......

```
 <script> 
    var reimg
    window.onload=function () {
    reimg=document.getElementById('re')
    setInterval(function () {
    reimg.src=reimg.src.replace(/\?.*/,function () {
    return '?'+new Date()
    })
    },60000)
    }
    </script> 
```

在很大程度上，下一点可能是矫枉过正，但我​​一直试图让它在所有浏览器上工作（我希望它看起来如何）......

```
 <iframe frameborder=0 marginwidth=0 marginheight=0 border=0 width="360" height="270" style="overflow:
    hidden;border:0;margin:0;width:360px;height:270px;max-width:100%;max-height:100%" 
    src="http://icons.wunderground.com/webcamramdisk/g/l/Gluepack/1/current.jpg?" id="re" scrolling="no"
    allowtransparency="true">If you can see this, your browser doesn't understand IFRAME. However, we'll 
    still <A HREF="http://icons.wunderground.com/webcamramdisk/g/l/Gluepack/1/current.jpg">link</A> 
    you to the file.</iframe> 
```

它在 Firefox 中运行良好，减少了 640 x 480 的原始图像以适应。但是，在 IE 和 Chrome 中，仅显示图像的中心顶部（即图像不会缩小以适应）。是否需要任何额外的代码来确保它在 IE 和 Chrome 中正确显示（即我想要的，减少到适合），还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:30:31.900

图像如何显示实际上取决于浏览器，没有标准。最简单的解决方案是创建一个包含 javascript 和`<img>`图像标签的 HTML 文件，而不是将图像直接加载到 iframe 中：

```
<!DOCTYPE HTML>
<html><head>
<script>
window.onload = function() {
    var reimg = document.getElementsByTagName('img')[0];

    setInterval(function () {
        reimg.src = reimg.src.replace(/\?.*/, function () {
            return '?'+new Date()
        });
    }, 60000);
};
</script>
<style type="text/css">
* { margin: 0; padding: 0; }
img { width: 360px; height: 270px; }
</head><body>
    <img src="http://icons.wunderground.com/webcamramdisk/g/l/Gluepack/1/current.jpg?">
</body></html> 
```

将此保存为“webcam.html”或其他任何内容：

```
<iframe frameborder=0 marginwidth=0 marginheight=0 border=0
width="360" height="270" style="overflow: hidden; border:0; 
margin:0; width:360px; height:270px; max-width:100%; max-height:100%" 
src="webcam.html" id="re" scrolling="no"
allowtransparency="true">...</iframe> 
```

# java - 如何在 Java 中使用 XStream 处理 JSON？

> ID：10061077
> 
> 赞同：1
> 
> 时间：2012-04-08T07:14:43.043
> 
> 标签：java, xstream, google-custom-search

我创建了一个 Google 自定义搜索引擎并使用 HTTP GET 发起了查询。现在谷歌正在以 JSON 格式返回结果。我只是想知道如何将此 JSON 输出格式化为人类可读的方式。

例如：

```
Title: The matrix
htmlTitle: "The matrix.." 
```

我看到很多论坛都推荐 XStream。但不知道我怎样才能让它工作。

有人可以帮我解决这个问题。

仅供参考，我在这里给出 HTTP GET 代码：

```
public static void main(String[] args) throws IOException {

    HttpGet httpget = new HttpGet("https://www.googleapis.com/customsearch/v1?key=AIzaSyBp_5Upf6h0QSXR8UveLs4_c6lAmGW_7B8&cx=014783642332862910131:opc1zgsvfhi&q=matrix&alt=json");
    System.out.println(httpget.getURI());
    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    HttpClient httpClient = new DefaultHttpClient();
    String responseBody = httpClient.execute(httpget, responseHandler);
    System.out.println(responseBody); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:06:17.787

首先，您需要创建一个映射 Goolge 响应的类，然后使用这样的代码（来自[XStream 教程](http://xstream.codehaus.org/json-tutorial.html)）：

```
String json = "{\"product\":{\"name\":\"Banana\",\"id\":\"123\""
        + ",\"price\":\"23.0\"}}";

XStream xstream = new XStream(new JettisonMappedXmlDriver());
xstream.alias("product", Product.class);
Product product = (Product)xstream.fromXML(json);
System.out.println(product.getName()); 
```

# java - 将jar文件动态加载到Java程序中

> ID：10061078
> 
> 赞同：0
> 
> 时间：2012-04-08T07:14:47.360
> 
> 标签：java, swing, deployment, jar, installation

我正在开发桌面应用程序。我正在使用 JFC/Swing 来构建应用程序。

现在我想通过更改一些 jar 文件来构建可以升级的应用程序，而不是再次安装整个应用程序。

我坚持一些基本步骤。我想`JMenu`从各种 jar 文件中添加，所以我动态添加了这些 jar 文件。现在我的问题是，我想执行一些功能，例如添加`JInternalFrame`到加载整个 jar 文件的主类。我无法实现它。

请帮助我解决这个问题，并提出使之成为可能的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:37:40.350

> 现在我想通过更改一些 jar 文件来构建可以升级的应用程序，而不是再次安装整个应用程序。

[Java 网络启动](https://stackoverflow.com/tags/java-web-start/info)..

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（ **Swing 、AWT、SWT）桌面应用程序。**它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、**自动更新**（包括延迟下载和更新的编程控制）、按平台、体系结构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:27:57.310

你可以使用 URLClassLoader 轻松完成，你可以在这里看到一个简单的例子：http: [//snippets.dzone.com/posts/show/3574](http://snippets.dzone.com/posts/show/3574)

# javascript - 用Javascript检测按键组合系列

> ID：10061084
> 
> 赞同：1
> 
> 时间：2012-04-08T07:15:28.113
> 
> 标签：javascript, jquery, jquery-events

对于复活节假期，我想在我开发的网站上制作一个小惊喜“复活节彩蛋狩猎”。我隐藏的这五个*复活节彩蛋中的两个将被按键指定。*这不会像“同时按 CTRL 和 TAB”类型的交易，而是“按 UP 3 次然后 RIGHT 3 次”类型的事情。这将寻找一系列按键，而不是一次按下两个按键。我已经设置了这个功能，但由于某些奇怪的原因，它不能正常工作。

**注意：**下面的脚本正在寻找以下按键系列：
surprise1 - LEFT (x3)、RIGHT (x3)、UP (x3)、DOWN (
x3)

```
$(document.body).keydown(function(e) {
            surprise1(e);
            surprise2(e);
});

function surprise1(e) {
    var ev = (e) ? e : window.event;
    var k = ev.keyCode;
    if (k > 36 && k < 41) {
        typekeys[k] = isNaN(typekeys[k]) ? 0 : typekeys[k];
        typekeys[k]++;
        if (typekeys[37] == 3) {
            if (typekeys[37] == 3 && typekeys[39] == 3) {
                if (typekeys[37] == 3 && typekeys[39] == 3 && typekeys[38] == 3) {
                    if (typekeys[37] == 3 && typekeys[39] == 3 && typekeys[38] == 3 && typekeys[40] == 3) {
                        alert("You've found Surprise 1! Contact the site admin ASAP to get your prize!");
                        typekeys[37] = typekeys[39] = typekeys[38] = typekeys[40] = 0;
                    }
                } else {
                    typekeys[40] = 0;
                }
            } else {
                typekeys[38] = typekeys[40] = 0;
            }
        } else {
            if (typekeys[37] > 3) {
                typekeys[37] = 0;
            }
            typekeys[39] = typekeys[38] = typekeys[40] = 0;
        }
    } else {
        typekeys[37] = typekeys[39] = typekeys[38] = typekeys[40] = 0;
    }
};

function surprise2(e) {
    var ev = (e) ? e : window.event;
    var k = ev.keyCode;
    if (k > 8 && k < 18) {
        typekeys[k] = isNaN(typekeys[k]) ? 0 : typekeys[k];
        typekeys[k]++;
        if (typekeys[16] == 3) {
            if (typekeys[9] == 3) {
                if (typekeys[16] == 3 && typekeys[9] == 3 && typekeys[17] == 3) {
                    alert("You've found Surprise 2! Contact the site admin ASAP to get your prize!");
                    typekeys[16] = typekeys[9] = typekeys[17] = 0;
                }
            }
        } else {
            if (typekeys[16] > 3) {
                typekeys[16] = 0;
            }
            typekeys[9] = typekeys[17] = 0;
        }
    } else {
        typekeys[16] = typekeys[9] = typekeys[17] = 0;
    }
}; 
```

介意告诉我为什么这不起作用？在我看来它应该工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:55:36.590

试试这个：我正在使用[https://github.com/madrobby/keymaster](https://github.com/madrobby/keymaster) jquery 插件

```
$(function () {
   var combination = ''
   key('left', function(){ 
       combination = 'left';
       checkCombination();
   });
   key('right', function(){ 
       combination+= 'right';
       checkCombination();
   });
   key('up', function(){ 
       combination+= 'up';
       checkCombination();
   });
   key('down', function(){ 
       combination+= 'down';
       checkCombination();
   });

   function checkCombination() {
      if(combination === 'leftrightupdown') {
        alert('surprise 1');  
      } 
   }
});​ 
```

演示：http: [//jsfiddle.net/codef0rmer/BSdCq/](http://jsfiddle.net/codef0rmer/BSdCq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:48:16.450

这是我的解决方案。我不得不做一些有趣的事情来比较[这里](https://stackoverflow.com/questions/3115982/how-to-check-javascript-array-equals)描述的数组。我相信您可以根据您的需要来适应这个脚本的一般要点......

```
var seqs = [ [37,37,37,38,38,38,39,39,39,40,40,40], [9,9,9,16,16,16,17,17,17] ];
var seq  = [];

var messages=["You've found Surprise 1! Contact the site admin ASAP to get your prize!", "You've found Surprise 2! Contact the site admin ASAP to get your prize!"];

window.addEventListener("keydown", function(e){
    seq.push(e.keyCode);
    var eq = function(a,b){ return !( a<b || b<a ); };
    for ( var i = 0; i < seqs.length; i++ ) {
        if ( eq( seq, seqs[i].slice(0,seq.length) )) {
          if ( eq(seq, seqs[i]) ) {
            alert( messages[i] );
            seq = [];
          }
        return;
        }
    }
    seq = [];
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T21:36:16.383

这是我解决这个问题的方法...

```
var nums = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
var n = nums.slice();
$(document).keydown(function(e){
  if(e.which == n[0]){
    n.shift();
  } else n = nums.slice();
  if(n.length == 0) {
    //success!
    n = nums.slice();
  }
}); 
```

如果你知道顺序是什么，那就太棒了。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T13:32:54.357

这个更好：

```
$(function () {
  var combination = ''
   key('left', function(){ 
   combination = 'left';
   checkCombination();
 });
key('right', function(){ 
    combination+= 'right';
    checkCombination();
});
key('up', function(){ 
    combination+= 'up';
    checkCombination();
});
key('down', function(){ 
    combination+= 'down';
    checkCombination();
});

key(!'down' && !'left' && !'right' && !'up',function() {
    combination = '';
});

function checkCombination() {
   if(combination === 'leftrightupdown') {
     alert('surprise 1');  
   } 
}
}); 
```

# objective-c - 什么是代理？视图控制器？

> ID：10061085
> 
> 赞同：-1
> 
> 时间：2012-04-08T07:15:31.840
> 
> 标签：objective-c, cocoa, nswindow

我将 NSViewController 的视图设置为主菜单窗口的内容视图，现在我应该如何使用`- (BOOL)windowShouldClose:(id)sender`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:20:05.890

仅仅添加`NSWindowDelegate`到您的 .h 文件并不会产生神奇的效果，您还需要为您的窗口设置委托。

[这是 Apple 设置委托的文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/delegate)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:23:43.720

您是否将窗口的代表设置为您的班级？

并且，在苹果文档中：

> 讨论 在关闭窗口期间可能并不总是调用此方法。具体来说，当用户退出应用程序时，不会调用此方法。

# jquery - 多级组合框？

> ID：10061086
> 
> 赞同：1
> 
> 时间：2012-04-08T07:15:39.203
> 
> 标签：jquery, html

如何制作多级组合框。在这里，我使用了以下 html 代码：

```
<select name="comboName" class="droplist droplist-by-select">
            <optgroup label="1">
                <optgroup label="1.1">
                    <option value="1.1.1"> 1.1.1 </option>
                    <option value="1.1.2"> 1.1.2 </option>
                    <option value="1.1.3"> 1.1.3 </option>
                </optgroup>
                <option value="1.2">1.2</option>
            </optgroup>
            <optgroup label="2">
                <option value="2.1">2.1</option>
                <option value="2.2" selected="selected">2.2</option>
            </optgroup>
        </select> 
```

它在组合框中显示所有选项。问题是如何使选项组可选，例如 1.1 的 optgroup。并且 optgroup 1.1 在上面示例中的 1 选项下不缩进。在这里，我试图用它来选择处于不同索引级别的类别。有没有为此的任何 jquery 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:54:57.887

下拉列表并不真正适合您的需求。

你最好使用`<ul>`可以用 jQuery 轻松调整的东西。

原始示例：

```
<ul name="comboName" class="droplist droplist-by-select">
    <li><span>1</span>
        <ul>
            <li><span>1.1</span>
                <ul>
                    <li><span>1.1.1</span></li>
                    <li><span>1.1.2</span></li>
                    <li><span>1.1.3</span></li>
                </ul>
            </li>
            <li>
                <span>1.2</span>
                <ul>
                    <li><span>1.2.1</span></li>
                    <li><span>1.2.2</span></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

CSS：

```
li { margin-left: 10px; cursor: pointer; }
.selected { background-color: highlight; } 
```

和 jQuery：

```
$(document).ready(function() {
    $(".droplist li span").hover(function() {
        $(this).css("background-color", "highlight");
    }, function() {
        if (!$(this).parent().hasClass("selected")) {
             $(this).css("background-color", "white");
        }
    }).on("click", function() {
        $(this).parents("ul").find("li").removeClass("selected").find("span").css("background-color", "white");
        $(this).parent().addClass("selected");
        $(this).css("background-color", "highlight");
    });​
}); 
```

[现场测试用例](http://jsfiddle.net/HUpGx/)。

它仍然需要一些调整，但这是实现您想要的一个可能的方向。

# c# - 来自其他 ViewModel 的 ViewModel 上的 MVVM 执行命令

> ID：10061090
> 
> 赞同：6
> 
> 时间：2012-04-08T07:18:06.847
> 
> 标签：c#, wpf, mvvm, icommand

我现在为一个简单的任务苦苦挣扎了大约 14 天：在数据库中，我有硬件类别的定义。例如 ：

1.  硬盘
    *   内部的
    *   外部的
    *   闪光

此列表在数据库中定义如下：

```
 [ID - ParrentID - Name] : 1 - 0 - HDD, 2 - 1 - Internal, 3 - 1 - External, 4 - 1 - Flash. 
```

通过实体框架，我将这些行放入我的应用程序中。然后从这个平面数据中创建结构化对象，即我的 DataModel。该模型定义如下：

```
public class Category
{
   private int _id = -1;
   private string _name = "";
   private List<Category> _subCategories = null;
// property getters and setters, constructors, and bool HasSubCategories
} 
```

现在，我根据这些创建了名为*SubCategoryViewModel*的 ViewModel ，它绑定了我的 TreeView。因此，我可以在树视图中查看我的类别，并使用我定义和维护的层次结构。这工作得很好。在*SubCategoryViewModel*中，通过MouseDoubleClick 的*附加行为*定义了一个**命令**，该命令也绑定到 TreeView。因此，当用户双击 Item 时，在*SubViewCategoryModel*中定义的方法将执行特定代码。*SubCategoryViewModel*列表 嵌套在*HWDocumentViewModel中*****这是我的窗口的主要 ViewModel。我现在需要的很明显：当用户双击 TreeView 中的项目时，我需要从数据库中加载项目并在 ListView 中显示它们。我的观点是，在*HWDocumentViewModel*中，我需要定义一个 Items 集合并将它们相应地加载到 ListView 中的选定类别。但是，我不知道如何从 SubCategoryViewModel 对 HWDocumentViewModel 执行*方法*。因为：TreeView 绑定到*SubCategoryViewModel*项目列表，所以当 DoubleClick 发生时，*SubCategoryViewModel*上的方法被执行。我正在寻找一种方法，如何在主 ViewModel (HWDocumentViewModel) 上执行方法。****

 **我尝试了这种方法：
我创建了一个属性：`public static SubCategoryViewModel SelectedCategory`on `HWDocumentViewModel`。发生双击时，我将此属性从 SubCategoryViewModel 设置为`this`. 因此，在这个属性中是执行双击事件委托的对象。太好了，现在我在 HWDocumentView 模型中有一个用户选择的对象。
所以，我需要将项目加载到 ListView。但是，我会从*SubCategoryViewModel*中的方法加载它们吗？我不这么认为。相反，我应该通过为它们创建一个 ViewModel 并将其绑定到 ListView 来从主视图模型加载它们，对吗？但是，如何从 SubCategoryViewModel 调用 HWDocumentViewModel 中的方法？我应该在可以从 SubCategoryViewModel 访问的 HWDocumentViewModel 上编写一个静态方法吗？
**或者有没有办法，如何从 SubCategoryViewModel 调用在 HWDocumentViewModel 上定义的命令？**

或者一般来说，我是否采取了正确的方法在 WPF 中创建类似仓库的应用程序？

非常感谢。

编辑：我的 TreeView 的 XAML 如下所示：

```
<TreeView x:Name="tvCategories" Background="White" ItemsSource="{Binding Categories}">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="{x:Type TreeViewItem}">
                            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                            <Setter Property="FontWeight" Value="Normal" />
                            <Setter Property="behaviors:MouseDoubleClick.Command"  Value="{Binding MouseDoubleClickCommand}" />
                            <Setter Property="behaviors:MouseDoubleClick.CommandParameter" Value="{Binding}" />
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="FontWeight" Value="Bold" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </TreeView.ItemContainerStyle>
                    <TreeView.Resources>
                        <HierarchicalDataTemplate DataType="{x:Type localvm:SubCategoryViewModel}" ItemsSource="{Binding Children}">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding CategoryName}" />
                            </StackPanel>
                        </HierarchicalDataTemplate>
                    </TreeView.Resources>

                </TreeView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:10:00.483

我不确定我是否看到了问题。You have a tree of subcategories and when one is selected, the appropriate `SubCategoryViewModel`sets itself as `SelectedCategory`on the main `HWDocumentViewModel`. 这似乎是一个合理的方法。

那么为什么需要调用命令呢？为什么不能只加载新列表以`HWDocumentViewModel`响应其`SelectedCategory`属性的更改（即在 setter 中）？

如果您确实必须使用命令来调用加载，那么只需`HWDocumentViewModel`在 each 中保留对 main 的引用，然后`SubCategoryViewModel`使用简单的命令调用该命令：

```
_mainViewModel.LoadCategoryCommand.Execute(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T13:58:02.740

使用 MVVM 并尝试在 View 和 ViewModel 之间或 ViewModel 之间进行通信，发布者/订阅者设置运行良好，或者像 MVVMLight 或 Prism 中的消息传递范例。[我在此处](https://stackoverflow.com/questions/9304581/let-the-viewmodel-know-the-generic-object-of-the-view/9318439#9318439)发布了有关 MVVM Light 消息设置的答案

在消息中，您可以发送一个对象，该对象包含您希望在视图模型之间来回发送的任何数据。

我强烈建议在使用 mvvm 时使用框架，这样会更容易。[MVVM 框架比较](https://stackoverflow.com/questions/1409553/what-framework-for-mvvm-should-i-use)是通过一些主要框架比较的答案的链接。**

# android - 如何在 Android 中支持波斯语（波斯语）文本？

> ID：10061091
> 
> 赞同：13
> 
> 时间：2012-04-08T07:18:14.117
> 
> 标签：android, fonts, persian, farsi

我的用户正在使用不支持波斯语字体的 Android 2.2。如何在 Android 2.2 和 2.3 中正确显示我的波斯语文本？

# php - 删除数组中的零次出现

> ID：10061092
> 
> 赞同：1
> 
> 时间：2012-04-08T07:18:32.107
> 
> 标签：php, arrays, time

我正在实现一个计算日期的函数。该函数进行计算以找到每个元素：**年、月、周、日、小时、分钟、秒**。

计算的结果是这样的数组：

```
array (
     [year] => 0
     [month] => 0
     [week] => 0
     [day] => 0
     [hour] => 3
     [minute] => 193
     [second] => 11583
) 
```

现在必须删除任何出现的**KEY = 0**，并且只保留索引**小时、分钟、秒**。

有一些原生的 PHP 函数可以做到这一点吗？

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:21:56.703

```
array_filter ( array $input); 
```

应该管用。它将删除所有值为 false 的元素。如果您想要 === 0 的所有元素，请为 array_filter 创建您自己的回调函数，如下面的链接所示。 [http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

# python - Python - 在远程服务器上放置一个看起来像 json 的字符串，但引号被剥离

> ID：10061093
> 
> 赞同：1
> 
> 时间：2012-04-08T07:18:39.420
> 
> 标签：python

我正在使用 paramiko ssh 将文件放在远程机器上，如下所示。

```
rl = str(""" {"run_list":["role[monitor_server]"]}""")
cmd = """sudo touch /etc/chef/first-boot.json;sudo su - -c 'echo "%s" >> /etc/chef/first-boot.json'""" % (rl)
ssh.exec_command(cmd) 
```

但是，当我查看文件时，它看起来像这样。

```
{run_list:[role[monitor_server]]} 
```

我需要它来看看这个： {"run_list":["role[monitor_server]"]}

如何保留引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:37:17.677

尝试转义引号。这是特定的解决方案，但应该可以工作。

```
>>> rl = """ {"run_list":["role[monitor_server]"]}""".replace('"', '\\"')
>>> print """sudo touch /etc/chef/first-boot.json;sudo su - -c 'echo "%s" >> /etc/chef/first-boot.json'""" % (rl)
sudo touch /etc/chef/first-boot.json;sudo su - -c 'echo " {\"run_list\":[\"role[monitor_server]\"]}" >> /etc/chef/first-boot.json' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:40:27.477

引号需要转义一次以适合`echo`命令的参数。这是双引号分隔的“弱转义”：`"`必须将每个转义为`\"`，您还必须担心`\`,`$`和```. 然后将结果放入`su`命令的参数中，以单引号分隔的“强转义”。在这里，必须通过拆分字符串来包含任何单引号字符，例如通过替换为`'\''`.

嵌套转义很难正确处理，并且`su`涉及到任何错误的后果似乎对安全性来说都是可怕的。不惜一切代价避免嵌套模板和模板化 shell 命令。

一个可能更好的解决方案是通过返回的类似文件的对象，`cat > /etc/chef/first-boot.json`然后通过管道输入您想要存储的内容。那就不用担心逃跑了。`stdin``exec_command`

或者干脆使用 Paramiko 的 SFTPClient 来传输文件。

（另外，`str()`第一行是完全多余的。）

# iphone - 如何在 ios 中创建对象的新实例？

> ID：10061094
> 
> 赞同：0
> 
> 时间：2012-04-08T07:18:40.493
> 
> 标签：iphone, ios, object, sdk, clone

我正在研究一个让物体从屏幕顶部落下的概念。对于这个例子，假设有 4 个对象：红色方块、蓝色方块、绿色方块、黄色方块。

我将所有这些对象放在界面构建器中，并与 .h 文件中给出的名称连接：IBObject UIImageView *greenSquare; 例如。

我能够很好地与“greenSquare”交互，让它从视图的顶部掉到底部并从视图中消失。现在我希望能够重新创建“greenRectangle”并让它再次下降。我不能只重置一个实例，因为在任何给定点，1 个或多个相同对象都会掉落。

最终结果将是 x 个任何颜色的正方形将显示和下降。

我确信我的工作流程是：

*   设定时间挑选广场
*   方位
*   展示广场
*   以 x 速率下降方块

任何朝着正确方向的推动都会很棒。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:40:08.267

你为什么要为此使用 InterfaceBuilder - 切换到“仅代码”实现，你应该没问题。

1）创建图像

```
UIImage *green = [UIImage imageNamed:@"green.png"];
UIImageView *img = [[UIImageView alloc] initWithImage:green];
[view addSubview:img]; 
```

2）定位

```
img.center = CGPointMake(<RANDOM NUMBER>, -30); 
```

3）开始动画
4）当它到达底部时，将其移除

```
[img removeFromSuperview]; 
```

5）再次将此img添加到顶部...

如果您想拥有多个这些绿色 img，您可以一次创建多个。如果只有一个就足够了，您可以在`img`每次动画到达底部时重复使用。

***编辑***

如果您想`UIImageView`从一个创建多个 s，`UIImage`请执行以下操作：

```
UIImage *img = [UIImage imageNamed:@"green"];

UIImageView *imgView1 = [[UIImageView alloc] initWithImage:img];
imgView1.center = CGPointMake(100, 100);
[self.view addSubview:imgView1];

UIImageView *imgView2 = [[UIImageView alloc] initWithImage:img];
imgView2.center = CGPointMake(100, 500);
[self.view addSubview:imgView2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:33:57.987

也许您应该考虑将矩形 y 位置设置回屏​​幕顶部，就在它消失在底部时。因此，您不必重新创建它并可以重复使用它。担

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T20:10:09.263

这是我所做的：

在我的 .h 文件中，我创建了对象实例：

```
UIImageView *yellowImage;
UIImageView *greenImage;
UIImageView *orangeImage;
UIImageView *redImage;

UIImage *yellow;
UIImage *green;
UIImage *orange;
UIImage *red; 
```

然后我设置图像：

```
green = [UIImage imageNamed:@"greenball.png"];
yellow = [UIImage imageNamed:@"yellowball.png"];
orange = [UIImage imageNamed:@"orangeBall.png"];
red = [UIImage imageNamed:@"redball.png"]; 
```

我调用了一个方法并设置了一个计时器：

```
[NSTimer scheduledTimerWithTimeInterval:(0.5) target:self selector:@selector(onTimer) userInfo:nil repeats:YES]; 
```

最后，在 onTimer 中，我创建了一个随机数，用于选择一个球并像这样创建它：

```
greenImage = [[UIImageView alloc] initWithImage:green];
greenImage.frame = CGRectMake(startX,0,43,43);
[self.view insertSubview:greenImage belowSubview:bottomBar]; 
```

# php - 通过 Paypal 自动付款

> ID：10061096
> 
> 赞同：-2
> 
> 时间：2012-04-08T07:18:47.403
> 
> 标签：php, paypal

我希望能够通过 PHP 向 Paypal 发送指令，将特定金额的资金从我的帐户转移到另一个给定的 Paypal 帐户。

这可能吗？

**现在解决了。**

它被称为批量付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:25:42.460

贝宝汇款选项仅适用于企业和高级帐户持有人。

> Paypal 为合格的商业和高级帐户提供“自动扫描”自动提款选项。此选项不适用于个人帐户。启用后，任何 Paypal 余额将在每晚午夜至凌晨 4:00 自动转入指定的支票账户。这个选项对于交易量大的商户来说是一个极大的便利，因此他们不必定期登录和手动提取资金。它还避免了让 Paypal 冻结您的帐户和其中的任何资金的风险。

让您将钱发送到另一个贝宝帐户的选项似乎极不可能，尤其是使用贝宝本身以外的任何东西，因为这非常不安全，而且很可能违反他们的隐私和安全设置。

# iphone - 为什么我的 NSNumber 总是为零？

> ID：10061100
> 
> 赞同：3
> 
> 时间：2012-04-08T07:19:36.143
> 
> 标签：iphone, objective-c, cocoa-touch

因此，出于某种原因，以某种方式，我`NSNumber`总是如此`nil`，这让我发疯。

如果用户在我的选择器中选择了一行，则会调用它并且它工作正常：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    self.query.activityLevel = [NSNumber numberWithInt:[[[self.activityArray objectAtIndex:row]objectForKey:@"key"]intValue]];
} 
```

但是，当用户没有选择一行，而是继续下一个 VC 时，我会检查是否`activityLevel`是`nil`并将其设置为`1`如果是。

```
- (void)donePressed {
    if (!self.query.activityLevel) {
        self.query.activityLevel = [NSNumber numberWithInt:2];
    }
    NSNumber *calories = [Calculations numberOfCaloriesNeededForQuery:self.query];
    [self dismissModalViewControllerAnimated:YES];
} 
```

问题是，每当用户没有选择一行并且它命中`self.query.activityLevel = [NSNumber numberWithInt:2];`时，如果我打印该对象，它仍然是`nil`. 我不知道为什么。我设置了一个断点，它正在触及那条线......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T07:24:13.507

也许你得到 nil 因为值`self.query`也是 nil，所以你在 nil 对象上设置一个值，你得到 nil ...

这有点令人困惑，但是在另一种语言中，在这种情况下通常会出现 NullPointer 异常，但在目标 C 中，向 nil 发送**消息**是合法的，因此请注意这些情况......

# tsql - 为什么索引查找而不是扫描 SQL Server 2005 中的以下设置

> ID：10061106
> 
> 赞同：2
> 
> 时间：2012-04-08T07:20:07.017
> 
> 标签：tsql, sql-server-2005

我创建了一个表

```
create table #temp(a int, b int, c int) 
```

我在这张表上有 2 个索引：

1.  c 上的非聚集非唯一索引
2.  聚集索引

当我尝试执行以下查询时：

```
select b from #temp where c = 3 
```

我看到系统进行索引扫描。这很好，因为非聚集索引没有 b 作为键值。因此，它从列 a 进行索引扫描。

但是当我尝试执行以下查询时： -

```
select b from #temp where c= 3 and a = 3 
```

我看到执行计划只有索引搜索。没有扫描。这是为什么？

聚集索引和非聚集索引都不是 b 作为列之一吗？

我希望进行索引扫描。

请澄清

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T07:25:00.710

如果您有`a`作为集群键，那么该列将包含在该表的所有非集群索引中。

所以你的索引`c`也包括`a`，所以条件

```
where c= 3 and a = 3 
```

可以使用索引查找在该索引中找到。最有可能的是，查询优化器决定执行索引查找`a`和`c`键查找以获取其余数据比使用索引扫描更快/更有效。

顺便说一句：你为​​什么期望/更喜欢索引扫描而不是索引搜索？索引搜索通常更快并且使用更少的资源 - 我总是会努力通过扫描获得索引搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:12:52.790

> *这很好，因为非聚集索引没有 b 作为键值。因此，它从列 a 进行索引扫描。*

这个假设是不对的。索引查找和扫描必须处理 WHERE 子句而不是 select 子句。

现在你的问题 -

where子句通过sql优化器优化，因为有a=3的条件，可以应用聚集索引。

# user-defined-functions - 什么函数被调用？

> ID：10061107
> 
> 赞同：-1
> 
> 时间：2012-04-08T07:20:10.527
> 
> 标签：user-defined-functions

我不确定这是问这个问题的正确地方，但无论如何我会的。我只使用 html / javascript & jquery 大约 2 个月，但我学到了一点。这就是我想要做的。我有一个免费的图片库，我设法将其包含在我正在尝试制作的网站中。图库工作正常，我已将其设置为在每张图像的顶部都有一个可以触发短 .mp4 的按钮。它工作正常，但是当我单击图库按钮以显示下一页图片（每页约 15 个）时，有我的旧按钮。我想，也许如果我能弄清楚被调用的 js 或 jq 函数 ID，我就可以换入新按钮。但我无法理解发生了什么。我寻找了一个 onclick，但他们使用的是一堆“this”语句。我很确定他们正在使用锚标签来翻转页面，但我不知道被调用的是什么。所以我遇到了这个网站，经过大约 10 次尝试，终于找到了让我加入的东西。我希望我可以发布代码，也许有人可以告诉我发生了什么。我想这不是什么大问题，只是呼吁帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:36:13.370

您是在问如何调试您的代码？如果您使用的是 Chrome，您可以使用它的[Javascript debugger](https://stackoverflow.com/a/66434/303598)。同样，[Firebug](http://getfirebug.com/)是一个很好的 Firefox 开发者插件。

# algorithm - 寻找唯一除数的最佳算法

> ID：10061108
> 
> 赞同：0
> 
> 时间：2012-04-08T07:20:10.980
> 
> 标签：algorithm

我只是在想一个似乎并不难的问题，但是当我们考虑以最佳方式进行时，它就变成了一个很好的问题。问题是 - 我们得到了一个数字列表（数组）和一个数字 N。我们必须找到 N 的所有除数，它们不会除掉任何属于该列表的数字。我已经用蛮力和一点有效的方法（但不是最好的方法）解决了它。所以，我正在寻找一种可能是解决这类问题的最佳方法。一切都是整数（没有浮点数）。每一个想法都值得赞赏。

我的方法是首先找到数字 N 的所有除数（没有任何开销）。然后，我以相反的顺序（单独）对列表和除数进行排序。现在，对于每个除数 D，我检查它是否除以列表中的任何数字（从最高元素开始到 >= 除数 D 的元素）。如果它除法，那么 D 的所有除数也必须除法。然后我从除数列表中删除这些元素，这些元素也是 D 的除数（可以认为是删除交集）。因此，最终左除数数组是所需的数组（根据我的方法）。如果有人可以指出我的方法中的任何错误或效率低下，我们将不胜感激。列表中可以存在的最大值为 10^18。

到目前为止我在 PHP 中的尝试：

```
while($div=each($divisors))
{
$i=0;
$divisor=$div['key'];
//echo "divisor is $divisor\n";
while((int)$unfriendly[$i]>=$divisor)
{//echo "aya\n";
    if(!((int)bcmod($unfriendly[$i],$divisor)))
    {//echo "ayeea\n";
        $divisors_of_divisor=divisors_of_a_number($divisor);
        //print_r($divisors_of_divisor);
        //print_r($divisors);
        foreach($divisors_of_divisor as $d)
        unset($divisors[$d]);
        //print_r($divisors);
        break;
    }
    ++$i;
}
 }
echo sizeof($divisors);
function divisors_of_a_number($n)//returns all the divisors of a number in an unsorted array
{
$i=1;
$s=sqrt($n);
while($i<=$s)
{
if(!($n%$i))
{
    $a[]=$i;
    if($i!=$s)
    $a[]=$n/$i;
}
++$i;
}
return $a;
}
function divisors_of_a_number_as_keys_of_array($n)//returns all the divisors of a number in an unsorted array as keys
{
$i=1;
$s=sqrt($n);
while($i<=$s)
{
if(!($n%$i))
{
    $a[$i]=1;
    //if($i!=$s)
    $a[$n/$i]=1;
}
++$i;
}
return $a;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:43:24.357

一个明显的优化如下 - 做[eratosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)以将所有数字分解为一个您知道的值，该值高于您给出的列表中的任何单个值。现在您可以从该列表中迭代给定数字的所有因子。

你接下来要做的是：对于列表中的每个数字及其每个素因数 p，你应该将 N 除以 p，直到它可以被它整除。在你这样做之后，你正在寻找的除数都是剩余数字的除数。

希望这可以帮助。

# iphone - Xcode 4.3.2 中的声音问题

> ID：10061110
> 
> 赞同：1
> 
> 时间：2012-04-08T07:20:19.167
> 
> 标签：iphone, ios, xcode, macos, audio

我更新到 OS X Lion 10.7.3 和 Xcode 4.3.2。我无法使用以下代码在 iPhone 模拟器或 iPhone 设备上播放声音。我可以在 Snow Leopard 和 Xcode 4.2 上使用相同的代码播放声音。我不知道为什么我无法听到 4.3.2 中的声音。任何人都可以帮忙吗？

.h 文件

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>

@interface soundViewController : UIViewController {
}

-(IBAction)playSounds:(id)sender;

@end 
```

.m 文件

```
-(IBAction)playSounds:(id)sender {

CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"E", CFSTR("caf"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:01:10.480

XCode 4.3 有时会无缘无故地从复制资源列表中排除文件。验证该文件是否包含在您的目标中。即使添加它，有时它也不会成为目标的资源。单击文件并选择属性检查器的最左侧选项卡，并确保在“目标成员资格”部分中选中目标旁边的复选框。

# c++ - 在 C++ 中使用派生类的静态方法作为函数回调

> ID：10061111
> 
> 赞同：0
> 
> 时间：2012-04-08T07:21:06.643
> 
> 标签：c++

我需要使用以下代码将对象的静态方法作为回调函数传递：

```
glutDisplayFunc(callback) 
```

`callback`某个类的静态方法在哪里- `baseClass::callback()`. 它编译得很好。但是现在我想要一个派生类*（`baseClass`作为它的父类）*具有相同的回调函数 - 也就是说，我想覆盖回调函数。

我已经在derivedClass 中覆盖了它，但`derivedClass::callback()`没有被调用。

PS。我打电话`glutDisplayFunc(callback)`给基类。代码如下：

```
baseClass::someFunction(){
    glutDisplayFunc(callback);
} 
```

我如何通过`derivedClass::callback`而不是`baseClass::callback`使用方法`baseClass?`所有方法都是静态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:34:54.360

简短的回答是你不能，而且你通常不想这样做。基类通常不应该直接了解特定的派生函数。

通常的模式是在基类中有一个调用虚函数的静态函数，然后在派生类中覆盖虚函数。我不确定这是否适用于此——要工作，您需要能够将参数传递给回调函数。您传递的参数是指向对象的指针，因此您将其转换回基本对象类型，然后从该指针调用正确的虚函数。

但是，在 glutDisplayFunc 的特定情况下，我认为这是不可能的——它不允许您将参数传递给回调函数。如果您想进行这种编程风格，恐怕除了切换到 GLUT 之外没有真正的治疗方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:41:13.820

C++ 不支持虚拟静态方法，所以你不能直接做你想做的事情。您应该能够做的是创建一个返回函数指针的非静态虚方法，并在派生类中覆盖它以返回指向它的静态回调方法的指针。

即是这样的：

```
class A
{
public:
   typedef void(*CallbackFunction)(void);

public:
   static void callback(void)
   {
      std::cout << "A::callback" << std::endl;
   }

   virtual CallbackFunction getCallback()
   {
      return callback;
   }

   void someFunction()
   {
      glutDisplayFunc(getCallback());
   }

};

class B: public A
{
public:
   static void callback(void)
   {
      std::cout << "B::callback" << std::endl;
   }
   CallbackFunction getCallback()
   {
      return callback;
   }
}; 
```

不完全理想，但对于不支持上下文参数的 C 回调来说，这是一个不错的解决方法。

# android - 收到短信就关闭？

> ID：10061114
> 
> 赞同：0
> 
> 时间：2012-04-08T07:21:23.817
> 
> 标签：android, sms, broadcastreceiver

当您收到短信“更新”时，我试图显示一条消息。但是我的应用程序强制关闭。给出代码和日志猫。我正在eclipse中的模拟器上对其进行测试。正在接收短信，但在收到“UPDATE”时不显示“HI”消息。请帮忙！！

SrvSmsListener.java

```
import android.app.Activity;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.IBinder;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SrvSmsListener extends Service 
{

private BroadcastReceiver IncomingSMSReceiver = new BroadcastReceiver() {
    private static final String SMS_RECEIVED =
            "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context _context, Intent _intent) {
        if (_intent.getAction().equals(SMS_RECEIVED)) {
            Bundle bundle = _intent.getExtras();
            if (bundle != null) {
                Object[] pdus = (Object[]) bundle.get("pdus");

                SmsMessage[] messages = new SmsMessage[pdus.length];
                for (int i = 0; i < pdus.length; i++)
                    messages[i] = SmsMessage
                            .createFromPdu((byte[]) pdus[i]);
                for (SmsMessage message : messages) {
                    String strPhoneNo = message.getOriginatingAddress();
                    String msg = message.getMessageBody();

                    if (msg.startsWith("UPDATE"))
                    {
                        Toast.makeText(getApplicationContext(), "Got it", Toast.LENGTH_LONG).show();
                        // this stops notifications to others

                        this.abortBroadcast();
                        // do what you want

                    }
                }
            }
        }
    }
};

public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {
    final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    IntentFilter filter = new IntentFilter(SMS_RECEIVED);
    BroadcastReceiver receiver = IncomingSMSReceiver;
    registerReceiver(receiver, filter);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy() {
    if (IncomingSMSReceiver != null)
    {
        unregisterReceiver(IncomingSMSReceiver);
    }
}

public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

}
} 
```

主.java

```
public class Main extends MapActivity implements LocationListener {
/** Called when the activity is first created. */
MapView map;
long start;
long stop;
int x, y;
GeoPoint touchedPoint;
Drawable d;
List<Overlay> overlayList;
LocationManager lm;
String towers;
int lat ;
int longi; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(Main.this, SrvSmsListener.class);
            startActivity(intent);
        }
    });

    map = (MapView)findViewById(R.id.mv);
    map.setBuiltInZoomControls(true);

    Touchy t = new Touchy();
    overlayList = map.getOverlays();
    overlayList.add(t);

    d = getResources().getDrawable(R.drawable.pinn);

    //Placing pintpoint
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();

    towers = lm.getBestProvider(crit, false);
    Location location = lm.getLastKnownLocation(towers);

    if (location != null){
        lat = (int) (location.getLatitude() *1E6);
        longi= (int) (location.getLongitude() *1E6);

        GeoPoint ourLocation = new GeoPoint(lat,longi);
        OverlayItem overlayItem = new OverlayItem(ourLocation, "Hi!!", "2nd");
        CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
        custom.insertPinpoint(overlayItem);
        overlayList.add(custom);
    }else{
        Toast.makeText(Main.this, "Couldnt get provider", Toast.LENGTH_SHORT).show();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub

    super.onPause();
    lm.removeUpdates(this);
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub

    super.onResume();
    lm.requestLocationUpdates(towers, 500, 1, this );
}

    @Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

class Touchy extends Overlay{
    public boolean onTouchEvent(MotionEvent e, MapView m){
    if (e.getAction() == MotionEvent.ACTION_DOWN){
        start = e.getEventTime();

    }
    if (e.getAction() == MotionEvent.ACTION_UP){
        stop = e.getEventTime();
        x = (int) e.getX();
        y = (int) e.getY();
        touchedPoint = map.getProjection().fromPixels(x, y);

    }
    if (stop - start > 1500){
        AlertDialog alert = new AlertDialog.Builder(Main.this).create();
        alert.setTitle("Pick Option");

        alert.setButton("Hello", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hi!!", "2nd");
                CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

        }
        });
        alert.setButton3("Get Address", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
            try{
                List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6 , 1);
                if (address.size() > 0){
                    String display = "";
                    for (int i = 0; i<address.get(0).getMaxAddressLineIndex(); i++){

                        display += address.get(0).getAddressLine(i) + "\n";
                    }
                    Toast t = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                    t.show();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }finally{
            }
        }});
        alert.setButton2("Toggle View", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                if (map.isSatellite()){
                    map.setSatellite(false);
                    map.setStreetView(true);
                }else{
                    map.setStreetView(false);
                    map.setSatellite(true);
                }
            }
});
        alert.setButton("Place a Pin", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                OverlayItem overlayItem = new OverlayItem(touchedPoint, "Hi!!", "2nd");
                CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
                custom.insertPinpoint(overlayItem);
                overlayList.add(custom);

            }

        });
        alert.show();
        return true;
    }

        return false;
    }

}

public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    lat = (int) (l.getLatitude() *1E6);
    longi = (int) (l.getLongitude() *1E6);
    GeoPoint ourLocation = new GeoPoint(lat,longi);
    OverlayItem overlayItem = new OverlayItem(ourLocation, "Hi!!", "2nd");
    CustomPinPoint custom = new CustomPinPoint(d, Main.this);   
    custom.insertPinpoint(overlayItem);
    overlayList.add(custom);

}

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

} 
```

CustomPinPoint.java

```
public class CustomPinPoint extends ItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context c;

public CustomPinPoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}

public CustomPinPoint(Drawable m, Context context ) {
    // TODO Auto-generated constructor stub
    this(m);
    c = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void insertPinpoint(OverlayItem item){
    pinpoints.add(item);
    this.populate();
}
} 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mehul.googlemaps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">   

    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name=".Main"
        android:label="@string/app_name" >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <service
        android:enabled="true"
        android:name=".SrvSmsListener" />
    <receiver android:name=".IncomingSMSReceiver"> 
    <intent-filter> 
        <action android:name=
            "android.provider.Telephony.SMS_RECEIVED" /> 
    </intent-filter> 
</receiver>
</application>

</manifest> 
```

原木猫

```
04-08 16:44:57.054: W/dalvikvm(311): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-08 16:44:57.244: E/AndroidRuntime(311): FATAL EXCEPTION: main
04-08 16:44:57.244: E/AndroidRuntime(311): java.lang.RuntimeException: Unable to   instantiate receiver com.mehul.googlemaps.IncomingSMSReceiver:   java.lang.ClassNotFoundException: com.mehul.googlemaps.IncomingSMSReceiver in loader   dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.mehul.googlemaps-2.apk]
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2789)
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.os.Looper.loop(Looper.java:123)
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-08 16:44:57.244: E/AndroidRuntime(311):  at java.lang.reflect.Method.invokeNative(Native Method)
04-08 16:44:57.244: E/AndroidRuntime(311):  at java.lang.reflect.Method.invoke(Method.java:521)
04-08 16:44:57.244: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-08 16:44:57.244: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-08 16:44:57.244: E/AndroidRuntime(311):  at dalvik.system.NativeStart.main(Native Method)
04-08 16:44:57.244: E/AndroidRuntime(311): Caused by: java.lang.ClassNotFoundException: com.mehul.googlemaps.IncomingSMSReceiver in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.mehul.googlemaps-2.apk]
04-08 16:44:57.244: E/AndroidRuntime(311):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-08 16:44:57.244: E/AndroidRuntime(311):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-08 16:44:57.244: E/AndroidRuntime(311):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-08 16:44:57.244: E/AndroidRuntime(311):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2780)
04-08 16:44:57.244: E/AndroidRuntime(311):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:32:45.827

您在 AndroidManifest 中指定的 Receiver 类必须扩展 BroadcastReceiver。在您的情况下，您指定：

```
<receiver android:name=".SrvSmsListener"> 
```

但是这个类扩展了服务：

```
public class SrvSmsListener extends Service 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:04:03.720

那个代码是我的；）

您必须在清单中添加您的服务：

```
 <service
            android:enabled="true"
            android:name=".SrvSmsListener" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:12:47.397

试试这个

```
public class Sms2Activity extends BroadcastReceiver 
{

String message,number;

@Override
public void onReceive(Context context, Intent intent)
{
    Toast.makeText(context, "incomming message", Toast.LENGTH_SHORT).show();

    //Get values from Bundle - get incoming number

    Bundle bundle = intent.getExtras();
    SmsMessage[ ] msgs = null;
    String str = "";
    if (bundle != null)
    {

        //---retrieve the received message here ---
        Object[ ] pdus = (Object[ ]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];
        for (int i=0; i<msgs.length; i++)
        {
            msgs[i] = SmsMessage.createFromPdu((byte[ ])pdus[i]);
            str += "SMS from " + msgs[i].getOriginatingAddress();
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n";
            message = msgs[i].getMessageBody().toString();
            number = msgs[i].getOriginatingAddress();
        }
       // ........first show sms here.....
       Toast.makeText(context, str, Toast.LENGTH_SHORT).show(); 

   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T08:18:05.307

您正在将服务注册为应用程序的接收器。注册广播接收器 IncomingSMSReceiver 以收听短信。改变这个：

```
<receiver android:name=".SrvSmsListener"> 
        <intent-filter> 
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

到

```
<receiver android:name=".SrvSmsListener.IncomingSMSReceiver"> 
        <intent-filter> 
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

# mongodb - mongodb BSON 大小

> ID：10061115
> 
> 赞同：0
> 
> 时间：2012-04-08T07:21:24.817
> 
> 标签：mongodb, bson

在 stackoverflow 上有帖子，其中提到 BSON 大小限制高达 4MB 或 8MB。那么对于我的应用程序来说，JSON 文档几乎不会有几十 KB 甚至更少。如果我的文档大小如此之小，mongodb 是否适合我的应用程序。我真正想问的是，mongodb 是否为每个文档留出 4 MB 或 8 MB 的空间，以提高快速查找。好吧，这个问题听起来可能很愚蠢，但谁能告诉我它是否适合我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:24:54.517

不，较小的文档完全可以。没有留出空间来使文档适合兆字节大小的块。

MongoDB 将留下一点填充以允许文档即使在文档增长时也允许就地更新，但这不是很多。除此之外，文档的磁盘空间要求只是数据本身的 BSON 大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:27:17.730

首先，这不是 BSON 限制，而是 mongodb 限制，目前是[16 mb](http://www.mongodb.org/display/DOCS/Documents)。

正如该链接所解释的那样，限制在很大程度上是一种健全性检查，以阻止您做任何过于疯狂的事情。填充较小的文档以达到该大小当然不是这种情况。

Mongodb 会稍微填充文档，但只是为了使更新（可能会增加文档）可以合理地经常发生。

# maven - 将 Maven 配置为具有两个输出工件或在 Web 应用程序组装期间从 JAR 中提取特定文件夹

> ID：10061119
> 
> 赞同：0
> 
> 时间：2012-04-08T07:21:59.687
> 
> 标签：maven

我正在将现有的构建系统从 Ant 迁移到 Maven，到目前为止，我已经解决（或重新设计）了许多问题，除了这个问题。我们每个系统特定项目的目标是一个简单的 JAR，但它还包含一些项目配置和自定义信息，这些信息被复制到`/product`WAR 的（比方说）文件夹中。这种方式实现了我们的 Web 应用程序的模块化和可扩展性考虑示例：

```
project: 
  MyProject
    /product
      product.info
      some.data
WAR:
./product
  /MyProject
    product.info
    some.data
    ..
  ..
./WEB-INF/
  /lib
    MyProject.jar
    .. 
```

我的问题是：我如何为我们的产品特定项目实现这一结果？我首先想到的是：作为此类项目构建的结果（JAR 和 ZIP）的两个工件，其中 ZIP 由`/product`文件夹中的 POM 创建（最好的布局可能是将每个项目分成两个子项目这样我就可以将 POM 和 ZIP 与一个多模块项目聚合在一起）。我将欣赏提出的所有解决方案（包括项目文件夹的重组选项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:57:18.263

第一个也是显而易见的答案是将每个这样的“产品”项目（如果这样更容易理解，则将其视为“模块”）分成两个子项目——一个用于 JAR，一个用于配置数据。然后，使用程序集，所有声明的“产品-ZIP”将进入`./product`WAR 文件夹。

**EDIT**分类器也可以应用于配置插件，以使程序集更加结构化和更易于实现。

# c# - TcpClient 在 Blend 中不可用

> ID：10061121
> 
> 赞同：0
> 
> 时间：2012-04-08T07:22:17.140
> 
> 标签：c#, sockets, tcpclient, blend

我正在编写一个应该使用 TCPClient 连接到我的服务器的混合应用程序，但是在编译时我得到了`Type or namespace TcpClient does not exist...`，即使我知道我包含了正确的库（因为这段代码几乎是直接从我的 C# windows 窗体复制的客户）。

我可能会在普通的 Socket 上写它，但如果有人知道为什么这不显示或者我该如何制作它，它会让我的生活更轻松。

谢谢 ;）

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Net.Sockets;
using System.IO;
using System.Net;

namespace CCClient
{
    public partial class CCClient
    {
        public CCConnection Connection = null;

        public CCClient()
        {
            if ((this.Connection = new CCConnection(IPAddress.Parse("-_-"), 9001)) == null)
            {
                throw new Exception("Could not instantiate Client Connection to Server.");
            }
            else
            {
                this.Connection.WriteLine("Role: client");
                this.Connection.WriteLine("Stream: test");
            }
        }
    }

    public class CCConnection
    {
        public TcpClient HostConnection = null;
        public StreamWriter HostWriter = null;
        public StreamReader HostReader = null;

        public CCConnection(IPAddress Host, int Port)
        {
            if (Host == null || Port == 0)
            {
                throw new Exception("Could not instantiation CCConnection. Host or Port are invalid.");
            }
            else
            {
                try
                {
                    this.HostConnection = new TcpClient();
                    this.HostConnection.Connect(Host, Port);
                    this.HostWriter = new StreamWriter(this.HostConnection.GetStream());
                    this.HostReader = new StreamReader(this.HostConnection.GetStream());
                }
                catch (Exception e)
                {
                    throw new Exception("Could not instantiate CCConnection. Exception encountered.\n" + e.Message);
                }
            }
        }

        public void WriteLine( String Argument )
        {
            if (!String.IsNullOrWhiteSpace(Argument))
            {
                this.HostWriter.WriteLine(Argument);
                this.HostWriter.Flush();
                return;
            }
        }

        public String ReadLine()
        {
            return this.HostReader.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:10:07.287

MSDN 清楚地表明，此类仅适用于 .NET 完整/客户端配置文件，

[http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)

它在 Silverlight 或 XNA 中不可用，因为 Microsoft 认为您不需要它。

您可以参考 Silverlight 文章，了解提供了什么样的网络支持，

[http://msdn.microsoft.com/en-us/library/cc645032%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc645032%28v=vs.95%29.aspx)

也许您可以使用 Socket 来实现相同的目标，

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket%28v=vs.95%29.aspx)

# postgresql - plpgsql 关联数组参数

> ID：10061124
> 
> 赞同：0
> 
> 时间：2012-04-08T07:22:42.320
> 
> 标签：postgresql, stored-procedures, plpgsql

[我曾经在邮件列表http://archives.postgresql.org/pgsql-hackers/2005-06/msg01481.php](http://archives.postgresql.org/pgsql-hackers/2005-06/msg01481.php)中读过这个条目

```
SELECT *
FROM foo_func(
    c => current_timestamp::timestamp with time zone,
    a => 2,
    b => 5
); 
```

现在我需要这种可以将关联数组参数传递给函数的解决方案。我是否需要制作一个虚拟表，然后将该表用作参数类型？或者有什么直接的解决方法吗？或者这个黑客已经实施了吗？

或者我可以使用 pl/python 模拟相同的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:49:49.873

这是在[9.0 版本](http://www.postgresql.org/docs/9.0/static/release-9-0.html)中实现的：

> 4.3.2\. 使用命名符号
> 
> 在命名符号中，每个参数的名称都使用 := 指定，以将其与参数表达式分开。例如：

```
SELECT concat_lower_or_upper(a := 'Hello', b := 'World');
 concat_lower_or_upper 
-----------------------
 hello world
(1 row) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:17:02.640

以下是使用 hstore 和 PG-8.4 for debian 回答的步骤。

1）如果尚未安装，请安装 contrib 包

```
# apt-get 安装 postgresql-contrib-8.4

```

2）在相关数据库中安装hstore

```
$ psql -U postgres -d 数据库名
# \i /usr/share/postgresql/8.4/contrib/hstore.sql

```

2bis) 如果没有安装plpgsql语言，安装它（还是在psql里面作为postgres用户）

```
# 创建语言 plpgsql;

```

3) 创建以 hstore 作为输入的函数。这是 plpgsql 中的一个示例，它仅枚举键和值：

```
CREATE OR REPLACE function enum_hstore(in_h hstore) returns void
as $$
declare
  kv record;
begin
  for kv in select * from (select (each(in_h)).*) as f(k,v) loop
    raise notice 'key=%,value=%',kv.k,kv.v;
  end loop;
end
$$ language plpgsql; 
```

4）调用函数。由于键和值是文本类型，因此可能需要将非文字条目转换为文本，就像问题中的 current_timestamp 调用一样。例子：

```
 select enum_hstore(
    hstore('c',current_timestamp::text) ||
    'a=>2,b=>5'::hstore
  ); 
```

上述函数的预期结果：

```
注意：键=a，值=2
 注意：键=b，值=5
 注意：key=c,value=2012-04-08 16:12:59.410056+02

```

# doctrine - 教义：按拥有分组

> ID：10061128
> 
> 赞同：5
> 
> 时间：2012-04-08T07:23:35.707
> 
> 标签：doctrine

我正在尝试这样做：

```
SELECT 
     userId, count(userId) as counter 
 FROM 
     quicklink 
 GROUP BY 
     userId 
 HAVING 
     count(*) >= 3' 
```

在查询构建器的教义中，我得到了这个：

```
$query = $this->createQueryBuilder('q')
            ->select('userId, count(userId) as counter')
            ->groupby('userId')
            ->having('counter >= 3')
            ->getQuery();

        return $query->getResult(); 
```

这给了我这个错误：

```
[Semantical Error] line 0, col 103 near 'HAVING count(*)': Error: Cannot group by undefined identification variable. 
```

真的在教义上挣扎。:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-19T10:36:59.487

您的 SQL**有效**，您的查询生成器语句**无效**

All cause db 将按以下顺序执行该查询：

```
 1\. FROM      $query = $this->createQueryBuilder('q')
 2\. GROUP BY  ->groupby('userId') // GROUP BY
 3\. HAVING    ->having('counter >= 3')
 4\. SELECT    ->select('userId, count(userId) as counter') 
```

如您所见，它是在使用**后**`counter`定义的。

 **它的 SQL 怪癖。您**不能**使用 select in`where`或`having`语句中的定义。

所以正确的代码：

```
$query = $this->createQueryBuilder('q')
            ->select('userId, count(userId) as counter')
            ->groupby('userId')
            ->having('count(userId) >= 3')
            ->getQuery();

return $query->getResult(); 
```

请注意重复`having`从`select`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T11:02:46.650

我将为仍然有此类错误的人回答。

首先，您似乎已经在查询构建器对象中翻译了本机 sql 查询。更重要的是，您已将对象命名为**q**

```
$query = $this->createQueryBuilder('q'); 
```

一般来说，这意味着逻辑中的每个条件或分组等都应该针对**q**的字段：`q.userId, q.gender, ...`

因此，如果您编写了如下代码，您将避免您的错误：

```
$query = $this->createQueryBuilder('q')
            ->select('q.userId, count(q.userId) as counter')
            ->groupby('q.userId')
            ->having('counter >= 3')
            ->getQuery();

return $query->getResult(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:44:38.470

我认为您缺少“来自”声明

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T20:08:09.543

您也可以通过 setParameter() 方法定义 HAVING 参数

```
 $qb->groupBy('userId');
 $qb->having('COUNT(*) = :some_count');
 $qb->setParameter('some_count', 3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T08:56:44.033

```
$query = "t, count(t.userId) as counter FROM YourBundle:Table t group by t.userId having counter >1 ";
return $this->getEntityManager()->createQuery($query)->getResult(); 
```

这应该有效。您甚至可以进行左连接或应用 where 子句。**

# wpf - 如何使用组合编辑列表视图行

> ID：10061133
> 
> 赞同：0
> 
> 时间：2012-04-08T07:24:19.407
> 
> 标签：wpf, user-controls, wpf-controls

我有一个`ListView`行。当我单击特定单元格时，我希望该选定的单元格可以使用组合框进行编辑，事情是我已经完成了，但即使在编辑后组合框仍然存在。我希望组合框变回文本块。

```
 <Style TargetType="{x:Type FrameworkElement}" 
   x:Key="GridEditStyle">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Visibility" 
     Value="{Binding Path=IsSelected, 
         RelativeSource={RelativeSource FindAncestor, 
             AncestorType={x:Type ListViewItem}},
         Converter={StaticResource boolToVis}, 
             ConverterParameter=True}" />
        </Style>

 <ComboBox SelectedItem="Present"
                                                           ItemsSource="{Binding ElementName=This, 
                                                            Path=AvailablePublishers}" 
                                                            Style="{StaticResource GridEditStyle}" /> 
```

后面的代码是

```
 private ObservableCollection<string> _AvailablePublishers =
 new ObservableCollection<string>();
    public Student_Attendance()
    {
        InitializeComponent();
        _AvailablePublishers.Add("Present");
        _AvailablePublishers.Add("Absent");
        _AvailablePublishers.Add("Late");

    }
    public ObservableCollection<string> AvailablePublishers
    { get { return _AvailablePublishers; } }

  public class BoolToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
      object parameter, System.Globalization.CultureInfo culture)
    {
        bool param = bool.Parse(parameter as string);
        bool val = (bool)value;

        return val == param ? Visibility.Visible : Visibility.Hidden;
    }

    public object ConvertBack(object value, Type targetType,
      object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:58:15.010

您知道，如果您使用 a `DataGrid`，则无需为切换查看和编辑模板做任何事情，它会自动完成......这是一个让您入门的示例：

```
<DataGrid  ItemsSource="{Binding ...}">
  <DataGrid.Columns>
      <DataGridTemplateColumn>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock DataContext="{Binding ...}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox ItemsSource="{Binding ElementName=This, Path=AvailablePublishers}" SelectedItem="{Binding ...}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn> 
```

# c# - 如果在最后 5 秒内没有调用方法，如何引发事件？

> ID：10061136
> 
> 赞同：0
> 
> 时间：2012-04-08T07:24:48.827
> 
> 标签：c#

很抱歉这个问题可能太简单了，但我不知道如何实现。如果某个方法在一定时间内没有被调用，我需要引发一个事件（当我收到这个事件时，我会尝试解决问题。这是一种连接问题，我需要得到通知以尝试解决它 - 我将改变连接方式。）

```
public void MethodThatShouldBeCalledFrequently // acutally datagram from UDP received
{
    // if not called for 5 seconds than raise event 
}
public event EventHandler</*no parameters*/> MethodNotCalledForFiveSeconds; // connection problem, switch from UDP to TCP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:31:19.993

也许您可以在调用 MethodThatShouldBeCalledFrequently 时使用一个标志并将其设置为 true。

```
 bool wasCalled = false;
    public void MethodThatShouldBeCalledFrequently // acutally datagram from UDP received
     {
        wasCalled = true;
      } 
```

使用另一种方法每 5 秒检查一次标志是真还是假，如果为假，则引发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:38:08.827

那这个呢？

```
public class Program
{
    private Timer timer;

    public Program()
    {
       InitializeTimer();
       StartTimerFromBeginning();
    }

    public void MethodThatShouldBeCalledFrequently()
    {
       StartTimerFromBeginning();
    }

    public event EventHandler MethodNotCalledForFiveSeconds;

    private void InitializeTimer()
    {
       timer = new Timer(5000);
       timer.Elapsed += HandleTimerElapsed;
    }

    private void StartTimerFromBeginning()
    {
       timer.Stop();
       timer.Start();
    }

    private void HandleTimerElapsed(object sender, ElapsedEventArgs e)
    {
       MethodNotCalledForFiveSeconds(this, EventArgs.Empty);
    }
} 
```

# django - 从 Django 运行 unix 命令

> ID：10061139
> 
> 赞同：2
> 
> 时间：2012-04-08T07:24:56.327
> 
> 标签：django, unix, wget

我有一个正在运行的 Django 站点。我需要添加一个功能来调用`wget`以响应用户操作。我应该如何从 Django 应用程序执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T07:29:57.280

由于 Django 是用 Python 编写的，因此您可以使用 Python 的`subprocess`模块来调用`wget`您的视图之一。但是，如果您只想下载一个文件`wget`（而不是使用其高级功能之一），您可以使用`urllib2`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:30:12.860

您是否有理由使用 unix 命令，而不是使用 urllib2 之类的东西？

如果有，您始终可以在您的视图中使用它：

```
from subprocess import call
call(["wget", "http://myurl.com"]) 
```

这是一个关于这个问题的非常全面的线程：

[在 Python 中调用外部命令](https://stackoverflow.com/questions/89228/how-to-call-external-command-in-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T07:30:00.417

使用[芹菜](http://django-celery.readthedocs.org/en/latest/getting-started/first-steps-with-django.html)

# javascript - 在 HTML 页面中显示 XML 属性

> ID：10061141
> 
> 赞同：1
> 
> 时间：2012-04-08T07:25:09.090
> 
> 标签：javascript, html, xml

我正在使用 JavaScript 在 HTML 页面中显示 XML 属性的详细信息。我的 XML 文件是：

```
<CATALOG>
    <CD>
        <TITLE>Empire Burlesque</TITLE>
        <ARTIST>Bob Dylan</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1985</YEAR>
    </CD>
    <CD>
        <TITLE>Hide your heart</TITLE>
        <ARTIST>Bonnie Tyler</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS Records</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1988</YEAR>
    </CD> 
```

HTML 的代码是：

```
<html>
    <body>
    <script type="text/javascript">
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","cd_catalog.xml",true);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML; 

    document.write("<table border='1'>");
    var x=xmlDoc.getElementsByTagName("CD");
    for (i=0;i<x.length;i++)
    { 
        document.write("<tr><td>");
        document.write(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);
        document.write("</td><td>");
        document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
        document.write("</td></tr>");
    }
    document.write("</table>");
    </script>
    </body>
</html> 
```

问题是浏览器中没有显示任何内容。上面的代码有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:51:07.387

```
xmlhttp.open("GET","cd_catalog.xml",true);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 
```

这里`true`给你一个异步 HTTP 请求。它会在后台获取文档，并`onreadystatechange`在`readyState==4`完成后回调。这可能不会在您阅读的下一个语句中发生`responseXML`。

如果您想要一个同步请求，这将暂停浏览器并且在文档获取完成之前不执行下一行，请`false`改用。

但是请注意，浏览器“挂起”结果通常被认为是非常不受欢迎的。通常，您应该优先使用带有回调函数的异步请求。`document.write`然而，这样的功能必须使用 DOM 方法将内容写入页面，而不是只在页面加载时可用的老式方法。

`nodeValue`最后，在将它们写入文档时，您不会对读取的 s 进行 HTML 转义，因此如果数据中有任何`<`或`&`字符，那么您就会遇到问题。

ETA：这是一个使用 DOM 方法异步执行的未经测试的示例：

```
<table id="cds"></table>
<script type="text/javascript">

    var xhr= window.XMLHttpRequest? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
    xhr.onreadystatechange= function() {
        if (this.readyState===4 || this.status===200)
            populateTable(this.responseXML);
    };
    xhr.open('GET', 'cd_catalog.xml', true);
    xhr.send();

    function populateTable(xml) {
        var table= document.getElementById('cds');
        var cds= xml.getElementsByTagName('CD');
        for (var i= 0; i<cds.length; i++) {
            var row= table.insertRow(-1);

            function getProperty(name) {
                var el= cds[i].getElementsByTagName(name)[0];
                if (el.firstChild)
                    return el.firstChild.data;
                return ''; // allow empty elements
            }
            function addCell(value) {
                row.insertCell(-1).appendChild(document.createTextNode(value));
            }

            addCell(getProperty('ARTIST'));
            addCell(getProperty('TITLE'));
        }
    };

</script> 
```

# c - 如何光栅化旋转的矩形（在 2d 中通过 setpixel）

> ID：10061146
> 
> 赞同：3
> 
> 时间：2012-04-08T07:27:00.520
> 
> 标签：c, algorithm, 2d, graph-algorithm, rasterize

我有一个旋转矩形的四个二维顶点 ABCD，我需要使用 setpixel(x,y,color) 在像素缓冲区中（有效地）光栅化/绘制它

怎么做？

我正在尝试使用一些代码，例如

```
 // convertilg a b c d do up down left right, 
    // calculating some dx_left dx_right on y--
    // etc (frustrating on special cases when there are 2 up_y vertices in same line etc)

    for(;;)
    {

     drawhorizontalline(y, xstart, xend, color);

     if(y==downy) break;

     y--;
     xstart+=dxstart;
     xend+=dxend;

     if(y==lefty)  dxstart = dxright;
     if(y==righty) dxend = dxleft;

     } 
```

但这是最令人沮丧的（非常容易出错和最令人沮丧）我真的厌倦了昨天整天调试这个，我需要找到一些工作代码而不是尝试调试这个

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-29T12:34:33.227

要填充矩形，请将其处理为闭合凸多边形（几乎与三角形填充相同）

1.  **订购您的积分以匹配缠绕规则**

    所以有线条**AB BC CD DA**或反向

2.  **创建左右缓冲区**

    地址是`y`-coordinate，它是一个 -positions 数组，`x`如果需要，还有一个`color,texture coordinates,...`. 对于初学者：

    ```
    `int buf_x0[ys],buf_x1[ys];` 
    ```

    `ys`屏幕`y`分辨率在哪里

3.  **实现任何画线算法**

    但不是绘制到屏幕，而是将`x`像素的坐标存储到缓冲区。

    *   而不是：`setpixel(x,y,color);`做：`buf_x?[y]=x;`。

    哪个缓冲区是目的地取决于行`Y`方向

    *   如果`dy<0`然后填写`buff_x0`
    *   如果`dy>0`然后填写`buff_x1`
    *   如果`dy==0`那时`buf_x0[y]=min(x)`和`buf_x1[y]=max(x)`

    **请注意，您必须在光栅化之前按 x 坐标对线端点进行排序，**以避免由反向端点线产生的不同像素引起的网格中的接缝/孔。

4.  **将此线算法应用于多边形的所有边界线（AB，BC，CD，DA）**

    在此之后，缓冲区包含`x`水平线的开始和结束位置

5.  **填充屏幕上的矩形**

    ```
    for (y=min(Ay,By,Cy,Dy);y<=max(Ay,By,Cy,Dy);y++)
     draw_horizontal_line(y,buf_x0[y],buf_x1[y],color); 
    ```

清晰的图像（取自我关于低级计算机图形学的讲座）

![边界缓冲区创建](../Images/823a54ba4d36ef9c8c9bb9721f1c2515.png)

**图片说明：**

*   垂直矩形表示边框缓冲区`buf_x0[],buf_x1[]`
*   **顺时针缠绕规则**确保目标缓冲区。如果其编码正确`buf_x0[y] <= buf_x1[y]`，则水平线的绘制将折叠为单个`for`循环

[这里](https://stackoverflow.com/a/39062479/2521214)也是我的简单**C++**示例

# android - Android : 意图 twitter uri

> ID：10061150
> 
> 赞同：0
> 
> 时间：2012-04-08T07:27:23.780
> 
> 标签：android, twitter, android-intent

在我的 android 应用程序中，我想将用户重定向到我的 twitter 个人资料页面，我使用以下代码：

```
Inrent i : new Intent(Intent.ACTION_VIEW,Uri.parse(''https://www.twitter.com/MYUSER));
startActivity(i); 
```

如果我选择浏览器，它可以正常工作，但如果我选择 twitter 应用程序，它会显示 Toast “Impossible to.complete the action”。我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:49:30.580

我相信你错过了这个`setData()`方法：

```
String url = "http://twitter.com";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

请在此处阅读更多信息：[如何从我的应用程序中打开 Android 网络浏览器中的 URL？](https://stackoverflow.com/questions/2201917/how-can-i-open-a-url-in-androids-web-browser-from-my-application)

让我知道这是否有帮助！

# c# - 数据库优先实体框架将唯一外键映射为一对多

> ID：10061152
> 
> 赞同：6
> 
> 时间：2012-04-08T07:27:58.720
> 
> 标签：c#, .net, sql, entity-framework, database-first

我在 Microsoft SQL Server 2008 R2 中有一个表，`Page`主键名为`ID`. 我有另一个名为`Navigation`column 的表`PageID`。是对 的列的`PageID`唯一外键引用。这在和记录之间创建了一对一的关系。`ID``Page``Navigation``Page`

从数据库生成模型时，它会创建一对多关系，其中 a`Page`包含`Navigation`记录列表。

这仅仅是实体框架检测到涉及外键并忽略数据库中列的唯一性吗？

`PageID`中列的 SQL`Navigation`是：

```
[PageID] INTEGER FOREIGN KEY REFERENCES [Page](ID) UNIQUE NOT NULL 
```

`ID`中列的 SQL`Page`是：

```
[ID] INTEGER PRIMARY KEY IDENTITY(0, 1) NOT NULL 
```

这是我最初的解决方案，这就是 Ladislav 提到的。

`PageID`中列的 SQL`Navigation`是：

```
[ID] INTEGER PRIMARY KEY FOREIGN KEY REFERENCES [Page](ID) NOT NULL 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T07:44:19.927

实体框架还不支持唯一键，所以这个信息真的被忽略了，并且映射了一对多的关系。在 EF 中使用一对一关系的唯一方法是通过共享主键（导航的 ID 将 FK 到页面的 ID）。

# java - JTextArea - 如何在指定的偏移量处设置文本？

> ID：10061153
> 
> 赞同：1
> 
> 时间：2012-04-08T07:28:04.187
> 
> 标签：java, swing, offset, jtextarea, settext

我想在我的`JTextArea`. 假设我已经在编辑中`"aaa bbb"`并且我想`"bbb"`用“house”覆盖，我该如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:30:14.543

你可以使用[`replaceRange()`](http://docs.oracle.com/javase/1.6/docs/api/javax/swing/JTextArea.html#replaceRange%28java.lang.String,%20int,%20int%29)

> `public void replaceRange(String str, int start, int end)`
> 
> 用指定的新文本替换从指示的开始到结束位置的文本。如果模型为空，则不执行任何操作。如果新字符串为空或为空，只需删除即可。
> 
> 此方法是线程安全的，尽管大多数 Swing 方法不是。有关更多信息，请参阅线程和 Swing。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T08:05:27.993

您需要查看三个方法[setSelectionStart(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setSelectionStart%28int%29)、[setSelectionEnd(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setSelectionEnd%28int%29)和[replaceSelection(...)](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#replaceSelection%28java.lang.String%29)。

这是一个小示例程序来帮助您的事业：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TextAreaSelection
{
    private JTextField replaceTextField;
    private JTextField startIndexField;
    private JTextField endIndexField;

    private void createAndDisplayGUI()
    {
        final JFrame frame = new JFrame("JTextArea Selection");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLocationByPlatform(true);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(5, 5));
        contentPane.setOpaque(true);

        final JTextArea tarea = new JTextArea(10, 10);
        tarea.setText("aaa bbb");

        final JButton updateButton = new JButton("UPDATE TEXT");
        updateButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                //tarea.setSelectionStart(4);
                //tarea.setSelectionEnd(7);
                //tarea.replaceSelection("house");
                int selection = JOptionPane.showConfirmDialog(null, getPanel());
                if (selection == JOptionPane.OK_OPTION)
                {
                    if (replaceTextField.getDocument().getLength() > 0
                        && startIndexField.getDocument().getLength() > 0
                        && endIndexField.getDocument().getLength() > 0)
                    {   
                        String text = replaceTextField.getText().trim();
                        int start = Integer.parseInt(startIndexField.getText().trim());
                        int end = Integer.parseInt(endIndexField.getText().trim());
                        tarea.replaceRange(text, start, end);
                    }
                }
            }
        });

        contentPane.add(tarea, BorderLayout.CENTER);
        contentPane.add(updateButton, BorderLayout.PAGE_END);

        frame.getContentPane().add(contentPane);
        frame.pack();
        frame.setVisible(true);
    }

    private JPanel getPanel()
    {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(0, 2, 2, 2));

        JLabel replaceLabel = new JLabel("Enter new String : "
                                                , JLabel.CENTER);
        replaceTextField = new JTextField(10);

        JLabel startIndexLabel = new JLabel("Enter Start Index : "
                                                , JLabel.CENTER);
        startIndexField = new JTextField(10);   

        JLabel endIndexLabel = new JLabel("Enter End Index : ");
        endIndexField = new JTextField(10); 

        panel.add(replaceLabel);
        panel.add(replaceTextField);
        panel.add(startIndexLabel);
        panel.add(startIndexField);
        panel.add(endIndexLabel);
        panel.add(endIndexField);

        return panel;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TextAreaSelection().createAndDisplayGUI();
            }
        });
    }
} 
```

# android - 如何在 Android 中以编程方式启用/禁用辅助功能服务

> ID：10061154
> 
> 赞同：38
> 
> 时间：2012-04-08T07:28:11.570
> 
> 标签：android, service, accessibility

我想以编程方式启用/禁用“设置”->“辅助功能”选项下列出的辅助功能服务。

我可以像下面这样启动可访问性意图：

```
Intent intent = new Intent(android.provider.Settings.ACTION_ACCESSIBILITY_SETTINGS);
startActivityForResult(intent, 0); 
```

但是我不知道如何通过我的代码启用视图中列出的服务。

请给我你的意见。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-01-29T08:24:09.060

我通过调用找到了一个对我有用的解决方案

```
Settings.Secure.putString(getContentResolver(), 
    Settings.Secure.ENABLED_ACCESSIBILITY_SERVICES, "pkgname/classname");
Settings.Secure.putString(getContentResolver(), 
    Settings.Secure.ACCESSIBILITY_ENABLED, "1"); 
```

其中`pkgname`是你的包名，`classname`是你的无障碍服务的类名。

如果您需要启用多项服务，或者您不想破坏以前的设置，您可能希望使用这些设置`:`来分隔其他服务。

此外，您可能需要作为**系统应用程序**运行，并且可能需要以下权限

```
<uses-permission android:name="android.permission.WRITE_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" /> 
```

但是，根据[@Rupert Rawnsley](https://stackoverflow.com/questions/10061154/how-to-programmatically-enable-disable-accessibility-service-in-android?newreg=d7f99d8d33064ff1961b298051e2c62b#comment37905847_10740671)的说法，这可能不适用于某些版本的 Android，我正在使用 Android 4.0.4 并希望它对您有用。

PS。如果它不起作用，也许你可以找到一些运气`/data/data/com.android.providers.settings/databases/settings.db/secure`，那是 Android 存储安全设置的地方。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-14T05:01:36.773

从 Android 6.0 开始，您可以使用：

```
adb shell settings put secure enabled_accessibility_services packagname/servicename 
```

旧版本的 settings.db 不再出现在 Android 6.0 上。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-11-07T09:10:38.733

在 Android 7 (API 24) 中，AccessibilityService 可以通过调用[disableSelf()](https://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html#disableSelf())方法以编程方式禁用自身。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-24T15:33:31.887

AccessibilityService 很特殊，不能以编程方式启动。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-12-03T12:24:47.567

您可以做的最好的事情是手动打开辅助功能设置：

> 意图意图 = 新意图（Settings.ACTION_ACCESSIBILITY_SETTINGS）

并开始意图 - 您也可以从首选 xml 文件中执行此操作：

> 意图 android:action="android.settings.ACCESSIBILITY_SETTINGS"

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-04-09T19:34:38.707

您可以通过用冒号分隔多个应用程序来启用无障碍服务，如下所示：

```
adb shell settings put secure enabled_accessibility_services com.app1/com.app1.MyAccessibilityService:com.app2/com.app2.MyAccessibilityService 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-24T03:23:32.880

这是可行的解决方案（如果您的活动未运行，它将自行禁用）

```
@Override
protected void onServiceConnected() {
    super.onServiceConnected();
    Toast.makeText(this, "Connected!",Toast.LENGTH_SHORT).show();
    ScheduledExecutorService scheduleTaskExecutor = Executors.newScheduledThreadPool(1);
    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
        public void run() {
            serviceChecker();
        }
    }, 0, 5, TimeUnit.SECONDS);
}

private void serviceChecker(){
    if(!isActivityRunning(MainActivity.class)) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            disableSelf();
        }
    }
}
protected Boolean isActivityRunning(Class activityClass)
{
    ActivityManager activityManager = (ActivityManager) getBaseContext().getSystemService(Context.ACTIVITY_SERVICE);
    List<ActivityManager.RunningTaskInfo> tasks = activityManager.getRunningTasks(Integer.MAX_VALUE);

    for (ActivityManager.RunningTaskInfo task : tasks) {
        if (activityClass.getCanonicalName().equalsIgnoreCase(task.baseActivity.getClassName()))
            return true;
    }

    return false;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-03-20T23:18:59.290

以防万一当您卡在锁定屏幕中输入密码或 PIN 码时，仍然有人试图**关闭来自 adb 的对讲。**您可以尝试的一件事是`adb shell am force-stop com.google.android.marvin.talkback`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-08-03T12:34:48.437

在仪器测试中，我像这样启动我的可访问性服务：

```
private fun enableAccessibilityService() {
    val packageName = "com.example"
    val className = "$packageName.service.MyService"
    val string = "enabled_accessibility_services"
    val cmd = "settings put secure $string $packageName/$className"
    InstrumentationRegistry.getInstrumentation()
      .getUiAutomation(UiAutomation.FLAG_DONT_SUPPRESS_ACCESSIBILITY_SERVICES)
      .executeShellCommand(cmd)
      .close()
    TimeUnit.SECONDS.sleep(3)
} 
```

我在 Android 6 和 8 上进行了测试。这也适用于非系统应用程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-21T05:46:35.007

enabled_accessibility_services 包含所有已启用的服务，以“:”分隔。类似于“服务A：服务B：服务C”

如果您替换字符串，它将启用您的服务，但您也会禁用其他所有人的服务。

**正确的代码是：**

```
 fun enableAccessibility(activity: Activity) {
        var accessibilityServices: String? = Settings.Secure.getString(
            activity.contentResolver,
            Settings.Secure.ENABLED_ACCESSIBILITY_SERVICES
        )

        if (accessibilityServices == null) {
            accessibilityServices = ""
        } else if (accessibilityServices.isNotEmpty()) {
            accessibilityServices = ":$accessibilityServices"
        }
        Settings.Secure.putString(
            activity.contentResolver,
            Settings.Secure.ENABLED_ACCESSIBILITY_SERVICES,
            "${activity.applicationInfo.packageName}/${ForegroundDetectorService::class.java.canonicalName}$accessibilityServices"
        )
        Settings.Secure.putString(
            activity.contentResolver,
            Settings.Secure.ACCESSIBILITY_ENABLED, "1"
        )
    } 
```

你只需要声明这个权限：

```
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

如果您是 root 或通过 adb，您只能启用此权限。

* * *

## 回答 #11

> 赞同：-7
> 
> 时间：2012-04-18T15:49:44.800

我找到了这篇文章：[如何以编程方式检查服务是否在 AndroidManifest.xml 中声明？](https://stackoverflow.com/questions/6529069/how-to-programmatically-check-if-a-service-is-declared-in-androidmanifest-xml). 最佳答案是关于 PackageManager，它会告诉您正在运行什么。

# c++ - XTEA片段：哪个布局更好？

> ID：10061157
> 
> 赞同：1
> 
> 时间：2012-04-08T07:28:53.333
> 
> 标签：c++, coding-style, code-formatting

我正在做一项大学作业，其中部分作业是在 C++ 中实现 XTEA 分组密码。我们被允许使用互联网资源，所以我去了[XTEA 维基百科页面](http://en.wikipedia.org/wiki/XTEA#Implementations)并在那里找到了代码。

当我复制它时^我在考虑代码样式/布局。我最初有

```
data_first32 = ( (( data_last32 << 4 ) ^ ( data_last32 >> 5 )) + data_last32 ) ^
        ( sum + key[ sum & 3 ] ); 
```

（注意：这些是 2 行而不是 1 行包裹）

但是，我后来想，如果是这样的话，可能会更容易阅读：

```
data_first32 = 
        (
            (
                ( data_last32 << 4 ) 
                ^ 
                ( data_last32 >> 5 )
            ) 
            + 
            data_last32 
        ) 
        ^
        ( sum + key[ sum & 3 ] ); 
```

后者似乎（稍微）更容易阅读，但它似乎“错误”。

哪种风格更好（可读性）？

为什么后一个看起来“错误”？

^ 不使用复制和粘贴，因为我想手动完成它并且我想要更好的变量名称。

# android - 使用网站信息启动添加联系人活动

> ID：10061162
> 
> 赞同：1
> 
> 时间：2012-04-08T07:30:12.873
> 
> 标签：android, android-contacts

我正在尝试使用一些数据启动本机添加联系人活动。我想通了大部分。现在我只是试图通过意图发送网站。这是代码

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);

    // Just some examples of information you can send to pre-fill out data for the
    // user. See android.provider.ContactsContract.Intents.Insert for the complete
    // list.
    intent.putExtra(ContactsContract.Intents.Insert.NAME, "Foo");
    intent.putExtra(ContactsContract.Intents.Insert.PHONE, "123456");
    intent.putExtra(ContactsContract.Intents.Insert.EMAIL, "foo@foo.com");
    intent.putExtra(ContactsContract.Intents.Insert.POSTAL, "foo drive, foo");

    startActivity(intent); 
```

android.provider.ContactsContract.Intents.Insert 没有网站字段。有没有其他方法可以传递数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T08:05:41.133

使用它来添加网站 url：

```
 ArrayList<ContentValues> data = new ArrayList<ContentValues>();

  ContentValues row1 = new ContentValues();
  row1.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Website.CONTENT_ITEM_TYPE);
  row1.put(ContactsContract.CommonDataKinds.Website.URL, "www.urwebsite.com");
  row1.put(ContactsContract.CommonDataKinds.Website.LABEL, "abc");
  row1.put(ContactsContract.CommonDataKinds.Website.TYPE, Website.TYPE_HOME);
  data.add(row1);
  intent.putExtra(ContactsContract.Intents.Insert.DATA, data); 
```

# php - SQL 注入的常见示例是否被误导？

> ID：10061171
> 
> 赞同：-3
> 
> 时间：2012-04-08T07:31:05.043
> 
> 标签：php, sql, security, mysqli, sql-injection

毫无疑问，SQL 注入是 Web 应用程序最严重的安全问题，但我认为，许多博客和教程通过夸大不切实际的示例来误导（或者我可能错了）。常见的例子是输入值时

```
; DELETE FROM ... 
```

这仅仅是基于 SQL 基础的理论。例如在现实世界中使用`PHP`时，`mysql_query()`或者`mysqli->query()`只会执行第一个 SQL 查询。之后添加任何内容`;`都会导致语法错误。

是否可以通过 SQL 注入对中的`SELECT`查询进行 WRITE 操作`PHP`？

**更新：**我的意思是澄清是否可以在 PHP 中进行第二次查询。没有讨论防止 SQL 注入的必要性或如何做到这一点。最终的解决方案显然是准备好的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:37:27.100

阿里，SQL 注入是一个常见的概念，不仅限于 PHP，虽然它不是一个硬性规定，这些操作可以执行，但这些操作是不能执行的，但是是的，它为黑客提供了一个后门进入您的数据库模式洞察力，其中任何方式都是危险的，不仅是更改，而且有人以任何方式看到任何信息都是危险的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:46:40.053

> 我的意思是澄清是否可以在 PHP 中进行第二次查询。

在某些情况下 - 是的。
不过没关系，因为注入不限于添加第二个查询。

然而，后一个问题与问题标题相矛盾，标题为

> SQL注入是不是很夸张？

答案肯定是否定的。
因为

> 是否可以通过 SQL 注入对 PHP 中的 SELECT 查询进行 WRITE 操作？

无论是否可能 - SELECT 查询的灾难性不亚于 INSERT/UPDATE

# javascript - 无法通过javascript连续关闭相同形式的两个primefaces面板

> ID：10061172
> 
> 赞同：0
> 
> 时间：2012-04-08T07:31:05.667
> 
> 标签：javascript, jsf-2, primefaces, managed-bean

我在一种形式中有两个 primefaces 面板。

```
<p:panel id="pnlOne" widgetVar="pnlOne"> <p:ajax event="close" listener="#{createProduct.cancelAddProductCategory}"/></p:panel>'
<p:panel id=pnlTwo" widgetVar="pnlTwo"> <p:ajax event="close" listener="#{createProduct.cancelAddBrand}"/></p:panel> 
```

我有另一个命令按钮，它将在其 oncomplete 属性上调用面板关闭函数。

```
<p:commandButton id="btnadd" value="#{bundle.LabelSave}" update=":forminput :formcollector" 
action="#{createProduct.createNew}" oncomplete="handleComplete(xhr, status, args)"> 
```

我在backing bean中设置成功回调参数如下；

```
RequestContext.getCurrentInstance().addCallbackParam("success", true); 
```

和javascript函数handleComplete如下；

```
function handleComplete(xhr, status, args) {  
if(args.success) {  
    pnlOne.close();
    pnlTwo.close();
    } } 
```

问题是这两个面板中只有一个可以关闭。我的目的是相继关闭两者。但它不起作用。可能是因为 javascript 中的第一次关闭执行触发了一个 ajax 请求，在调用第二个面板关闭时还没有完成 ajax 请求？任何想法的家伙。非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:22:08.043

1.  将两个面板的可见性设置为“#{createProduct.showPanel}”

2.  在 createProduct bean 中将 showPanel 更新为 true 或 false。

3.  对于 commandButton，在两个面板上都有更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:34:07.757

这是解决这个问题的方法。实际上，如果用户不显示面板，并且为该不可见面板调用 close 方法会创建上述场景。所以我只是补充。

如果我的 bean 中的方法成功并且两个面板都显示：

```
RequestContext.getCurrentInstance().addCallbackParam("success", true);    
if (pnl1 is visible) {
    RequestContext.getCurrentInstance().addCallbackParam("pnlone", true); 
}
if (pnl2 is visible) {
    RequestContext.getCurrentInstance().addCallbackParam("pnltwo", true); 
} 
```

JavaScript：

```
function handleComplete(xhr, status, args) {
  if(args.success) {  
      if (args.pnlone) {  
          pnlOne.close(); 
      }
      if (args.pnltwo) {  
          pnlTwo.close();
      } 
  } 
} 
```

# asp.net - 如何使这个 Spring 注入工作

> ID：10061176
> 
> 赞同：0
> 
> 时间：2012-04-08T07:31:34.200
> 
> 标签：asp.net, asp.net-mvc-3, spring, spring-mvc

我的spring xml文件中有这个：

```
<object type="Test.Web.Utilities.TestClass, Test.Web" singleton="false" id="TestClass">
    <property name="TestService" ref="TestService"/>
</object> 
```

在 TestClass 我有这个：

```
public ITestService TestService { get; set; } 
```

还有这个：

```
public void TestMethod()
{
var x = TestService.ExampleMethod();
} 
```

接下来，在我的控制器中，我有这个：

```
TestClass t = new TestClass();
t.TestMethod(); 
```

但是，我似乎没有让这个工作。控制器上其他与弹簧相关的东西效果很好。

任何想法我怎样才能让它工作？

**编辑：**忘记添加，我得到的错误是 NullReferenceException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:14:36.690

这是行不通的，因为您是通过**new**创建 TestClass 实例，而 Spring 当然不知道将依赖项注入通过 new 框架创建的对象中。您不会找到可以做到这一点的 .NET IOC 框架（有充分的理由！）。

所以你需要做的就是将 TestClass 的实例注入到你的控制器中。您可以使用请求或原型范围注册这些实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:02:31.747

您不能使用普通的“new”关键字，因为这是通过 .NET VM 处理的。你实际上需要调用 Spring 的 Activator Context 来给你一个实例。

首先，您通过调用获取 Spring.NET Activator 上下文：

```
IApplicationContext ctx = ContextRegistry.GetContext(); 
```

然后，您可以获得配置 xml 中指定的类的实例：

```
ITestService svc = (ITestService)ctx.GetObject("TestClass"); 
```

这使您能够通过 XML 文件配置实现 ITestService 接口的具体实现类。

# php - 从 foreach 中删除重复项

> ID：10061177
> 
> 赞同：0
> 
> 时间：2012-04-08T07:31:40.703
> 
> 标签：php, template-lite

我有这样的查询

```
SELECT TOWN, NAME FROM CINEMA WHERE CITY_ID = ".$_POST['country']." GROUP BY TOWN, NAME 
```

在视图方面，我在 template_lite 的帮助下取值

```
 <table border="1" >
        <br />
 {foreach value=mp from=$mpbycity}
 <tr><td>{$mp.TOWN}</td></tr>
  <tr><td>{$mp.NAME}</td></tr>

 {/foreach}
    </table> 
```

问题是重复的。你可以从下面的图片中看到。

我试过 array_unique 但它不起作用。

![在此处输入图像描述](../Images/d2803c8cac7dc2d3fb2339ec55399636.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:40:55.387

首先，您必须在查询之前过滤变量`..CITY_ID = ".$_POST['country']."`。使用此代码，攻击者可以在查询时注入代码。检查[Sql 注入](http://en.wikipedia.org/wiki/SQL_injection)。为避免这种情况，请使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)。

```
..CITY_ID = ".mysql_real_escape_string($_POST['country'])."... 
```

对于唯一数组，您可以使用`array_unique()`, `SELECT DISTINCT`,`GROUP BY`子句。在循环中也可以避免将重复值写入数组。一切都取决于您的数据库结构和查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:49:35.027

你没有看到重复。基本上，您正在按语法迭代分组，并将它们打印在两个差异行中。

你的输出就像

```
A B 
A C 
A D

B C 
B D 
B E 
```

你把它打印成

```
A
B
A
C
A
D
B
C
B
E 
```

，你认为是重复的。

{$mp.TOWN} 和 {$mp.NAME} 的组合是唯一的。

# javascript - 使用 javascript 将选中的复选框 id 传递给弹出窗口

> ID：10061178
> 
> 赞同：0
> 
> 时间：2012-04-08T07:31:59.153
> 
> 标签：javascript, checkbox, popup, popupwindow

任何人都可以帮助我如何将复选框 id 传递给弹出窗口。我不知道如何在父窗口的中间创建一个弹出窗口。

代码：

```
var ie7 = (document.all && !window.opera && window.XMLHttpRequest) ? true: false;

for (i = 0; i < newsletterall.length; i++) {
    if (ie7 == false) {
        newsletterall[i].childNodes[1].innerHTML = "";
        newsletterall[i].childNodes[3].innerHTML = "";
        newsletterall[i].childNodes[5].innerHTML = "";
        newsletterall[i].childNodes[7].innerHTML = "";
        newsletterall[i].childNodes[9].innerHTML = "";
        newsletterall[i].childNodes[11].innerHTML = "";
        newsletterall[i].childNodes[13].innerHTML = "";
    } else {
        newsletterall[i].childNodes[0].innerHTML = "";
        newsletterall[i].childNodes[1].innerHTML = "";
        newsletterall[i].childNodes[2].innerHTML = "";
        newsletterall[i].childNodes[3].innerHTML = "";
        newsletterall[i].childNodes[4].innerHTML = "";
        newsletterall[i].childNodes[5].innerHTML = "";
        newsletterall[i].childNodes[6].innerHTML = "";
    }
    content += "<input type='checkbox'id='compare" + i + "' name='list'><div id='article" + i + "'><a id='title" + i + "'href='" + hrefoftitle['name' + i] + "'>" + title['name' + i] + "<br></a>" + dateall['name' + i] + "<a href='" + hrefofauthor['name' + i] + "'>" + author['name' + i] + "</a><a href='" + hrefofexternal['name' + i] + "'>" + external['name' + i] + "</a><br>" + summary['name' + i] + "<br><a href='" + hrefofcomment['name' + i] + "'>" + comment['name' + i] + "</a><a href='" + hrefofexter['name' + i] + "'>" + exter['name' + i] + "</a></div></input>";
}

content += "<input type='button' name='goto' onclick='popup1()' value='Check'></form>";

if (ie7 == false) {
    newsletterall[0].childNodes[1].innerHTML = content;
} else {
    newsletterall[0].childNodes[0].innerHTML = content;
} 
```

我已经创建了复选框。现在我需要在中间创建一个弹出窗口并获取复选框的值并显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:56:05.487

要访问父窗口的对象，在子（例如弹出）窗口对象上有一个名为 opener 的属性。

```
var parentWindow = window.opener; 
```

使用该对象，您应该能够访问父窗口的窗体。

```
var value = parentWindow.document.getElementById("compare").value; 
```

# emacs - Emacs 如何选择要在模式行中列出的次要模式？

> ID：10061182
> 
> 赞同：6
> 
> 时间：2012-04-08T07:32:48.270
> 
> 标签：emacs, elisp, modeline

我计划在不久的将来在 Emacs 中自定义模式行，我不明白在模式行中列出次要模式背后的算法。

在 Emacs 手册的 «1.3 The Mode Line» 部分中它说：*«MINOR 是一些启用的“次要模式”的列表»*

在 «23.2 次要模式» 部分中，它说：*«大多数缓冲区本地次要模式在启用时在模式行中说»*

但是我列出了 ErgoEmacs 次要模式，这是全局的。有人可以解释这背后的机制，最好指出负责该问题的各种 elisp 来源吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T07:31:48.890

您可以通过执行以下操作来更改特定次要模式的显示内容

```
(setcar (cdr (assq 'yas/minor-mode minor-mode-alist)) " ¥") 
```

这将为[yasnippet 模式](https://github.com/capitaomorte/yasnippet)显示“¥” 。我经常这样做，尤其是对于我经常使用的模式，因为它大大缩短了我的模式线。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T12:32:22.607

这是由模式自己的定义为每个单独的模式指定的。

如果您继续阅读第 23.3.3 节 - 定义次要模式：

> 字符串 LIGHTER 表示启用模式时在模式行中显示的内容；如果为“nil”，则模式不显示在模式行中。

看：

`M-:` `(info "(elisp) Defining Minor Modes")` `RET`

`C-h``f` `define-minor-mode` `RET`

另请参阅[http://www.emacswiki.org/emacs/DelightedModes](http://www.emacswiki.org/emacs/DelightedModes)，它有助于轻松自定义主要和次要模式的模式行显示。

# c - C目录和子目录递归

> ID：10061186
> 
> 赞同：0
> 
> 时间：2012-04-08T07:33:33.643
> 
> 标签：c, directory

我试图递归地获取所有文件和文件夹列表。但是我只能获取文档的子目录及其内部。我无法获取子目录内部的其他文件夹。我不知道如何递归。我希望你能帮助我

```
 #include <stdio.h>
     #include <sys/types.h>
     #include <dirent.h>
     #include <windows.h>
     #include <unistd.h>
     #include <string.h>
     void list(char *a);
     void reader(char *path);   
     int
     main (void)
     {
       DIR *dp;
       struct dirent *ep;

       dp = opendir ("C:\\Users\\pen\\Documents\\");
       if (dp != NULL)
         {
           while (ep = readdir (dp)){

GetFileAttributes(ep->d_name); 
if(FILE_ATTRIBUTE_DIRECTORY & GetFileAttributes(ep->d_name))
{

        if (strcmp(".",ep->d_name)==0)
            continue;

    if (strcmp("..",ep->d_name)==0)
    continue;

     reader(ep->d_name);

}

             }
             closedir(dp);

         }
       else
         perror ("Couldn't open the directory");
         closedir(dp);
     system("pause");
       return 0;
     }
    void reader(char *path){
            DIR *da;
            struct dirent *ef;
                da = opendir(path);
            while (ef=readdir(da)){
            printf ("%s\n",ef->d_name);
        if(FILE_ATTRIBUTE_DIRECTORY & GetFileAttributes(ef->d_name))
        {

if (strcmp(".",ef->d_name)==0)
continue;

    if (strcmp("..",ef->d_name)==0)
continue;
    reader(ef->d_name);

}
    }
      closedir(da);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:46:48.117

1）在`reader`你需要`closedir(da);`在while循环之后调用。

2）每次调用都`reader`需要有你需要连接的绝对路径`path`

到 `ef->d_name`然后打电话给读者。

3）还要启用调试，您应该在调用 `perror`失败后`readdir`调用。

# android - Android Sqlite - 用多个值更新多行

> ID：10061190
> 
> 赞同：-1
> 
> 时间：2012-04-08T07:34:06.040
> 
> 标签：android, sqlite

我需要更新 sqlite 中的多行，其中每一行都有不同的值。

目前我只是循环更新语句。（我正在使用 SQLStatement 并替换参数）。

我知道使用 MySql 可以选择使用 CASE 命令执行一个更新，该更新将使用匹配值更新所有行。

sqlite中有没有类似的东西？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:24:40.327

如果你知道你的查询应该是什么样子，你可以使用`query()`or`rawQuery()`方法而不是 update

# windows - 添加 nginx.exe 作为 Windows 系统服务（如 Apache）？

> ID：10061191
> 
> 赞同：59
> 
> 时间：2012-04-08T07:34:17.037
> 
> 标签：windows, service, windows-services, nginx

我将 NGINX 设置为静态内容的前端服务器，并将 Apache 用作其他内容的后端服务器。

问题是我找不到一个合乎逻辑的答案来让我做出`nginx.exe`Windows 系统服务（如我的 Apache）的合乎逻辑的答案。

有人遇到过这个问题的答案吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-12-14T08:56:58.037

如何使用*Windows 服务包装器做到这一点*

（注意：现在有更简单的替代方案 - 另请参阅下面描述的解决方案，使用[suneg的](https://stackoverflow.com/users/657926/adamy)[巧克力包管理器](https://stackoverflow.com/a/34988608/472992)和直接[从](https://stackoverflow.com/a/21869387/472992)Adamy[使用](https://stackoverflow.com/users/1596586/suneg)NSSM ）

1.  通过[github](https://github.com/kohsuke/winsw/releases)或[nuget](https://www.nuget.org/packages/WinSW/)下载最新版本的[Windows Service Wrapper](https://github.com/kohsuke/winsw)。
    *   *撰写本文时的当前版本是**v2.2.0***
    *   *由于 .NET2.0 和 .NET4.0 的 v2.x 可执行文件可用 - 其他仅按需提供。*
2.  重命名`winsw-*.exe`为`nginxservice.exe`.
    *   *这是将为拥有您的 nginx 进程的进程显示的名称。*
3.  在具有相同基本名称的 exe 旁边放置一个 XML 文件，例如`nginxservice.xml`. 内容应如下所示（验证您的 nginx 位置）。

    ```
    <service>
      <id>nginx</id>
      <name>nginx</name>
      <description>nginx</description>
      <executable>c:\nginx\nginx.exe</executable>
      <logpath>c:\nginx\</logpath>
      <logmode>roll</logmode>
      <depend></depend>
      <startargument>-p</startargument>
      <startargument>c:\nginx</startargument>
      <stopexecutable>c:\nginx\nginx.exe</stopexecutable>
      <stopargument>-p</stopargument>
      <stopargument>c:\nginx</stopargument>
      <stopargument>-s</stopargument>
      <stopargument>stop</stopargument>
    </service> 
    ```

    *   *[您可以在config github 页面](https://github.com/kohsuke/winsw/blob/master/doc/xmlConfigFile.md)上找到有关配置的最新详细信息、[此处](https://github.com/kohsuke/winsw/blob/master/examples/sample-allOptions.xml)**显示所有可能选项的通用示例*和[安装指南](https://github.com/kohsuke/winsw/blob/master/doc/installation.md)。
4.  `nginxservice.exe install`以管理员身份运行命令。

您现在将`nginx`在您的服务中拥有一项服务！（设置为开机自动启动；如果要启动服务器，必须手动启动服务（`net start nginx`）。）

* * *

**将 nginx 正确设置为 Windows 服务的详细说明：http://web.archive.org/web/20150819035021/http: [//misterdai.yougeezer.co.uk/posts/2009/10/16/nginx-windows-服务/](http://web.archive.org/web/20150819035021/http://misterdai.yougeezer.co.uk/posts/2009/10/16/nginx-windows-service/)**

上述博文中未包含的其他信息：

您还可以通过此 Maven 存储库找到最新版本的 Windows 服务包装器： [http ://repo.jenkins-ci.org](http://repo.jenkins-ci.org)

Maven + Gradle 的示例：

```
<dependency>
    <groupId>com.sun.winsw</groupId>
    <artifactId>winsw</artifactId>
    <version>2.2.0</version>
    <classifier>bin</classifier>
    <packaging>exe</packaging>
</dependency>

<repository>
    <id>jenkinsci</id>
    <name>jenkinsci-releases</name>
    <url>http://repo.jenkins-ci.org/releases</url>
</repository>

compile "com.sun.winsw:winsw:2.2.0"

repositories {
    mavenCentral()
    maven { url http://repo.jenkins-ci.org/releases }
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-02-19T01:51:04.557

下载 NSSM 表格 [http://nssm.cc/download](http://nssm.cc/download)。"运行 %NSSM_HOME%\nssm.exe 安装“Nginx”"

在 NSSM 对话框中选择 Nginx 可执行文件，然后确定。转到服务并启动新创建的服务“Nginx”，完成。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-01T02:28:35.150

> 您可以使用**start.bat**和**stop.bat**来实现相同的效果。

## 开始.bat

```
@ECHO OFF
REM Start Nginx
tasklist /FI "IMAGENAME eq nginx.exe" 2>NUL | find /I /N "nginx.exe">NUL
IF NOT "%ERRORLEVEL%"=="0" (
   REM Nginx is NOT running, so start it
   c:
   cd \nginx
   start nginx.exe
   ECHO Nginx started.
) else (
   ECHO Nginx is already running.
) 
```

## 停止.bat

```
@ECHO OFF
REM Stop Nginx
tasklist /FI "IMAGENAME eq nginx.exe" 2>NUL | find /I /N "nginx.exe">NUL
IF "%ERRORLEVEL%"=="0" (
   REM Nginx is currently running, so quit it
   c:
   cd \nginx
   nginx.exe -s quit
   ECHO Nginx quit issued.
) else (
   ECHO Nginx is not currently running.
) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-18T21:53:07.870

SC.EXE 仅适用于已经支持 Windows 服务 API 并且可以正确响应来自服务控制管理器 (SCM) 的启动和停止请求的可执行文件。其他常规应用程序，不是专门作为服务编写的，将无法启动（通常出现错误 1053）...

对于这些 exe，您需要一个“服务包装器”——一个可以接受来自 SCM 的启动/停止命令并相应地运行/终止您的应用程序的小实用程序。Microsoft 提供[Srvany](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSrvany)（它是免费的但非常基本的），但还有其他几种免费和商业替代品。

顺便说一句，您应该查看本[指南，展示如何将 Nginix 作为服务运行](http://www.coretechnologies.com/products/AlwaysUp/Apps/RunNginxAsAService.html)，尤其是第 7 步，其中讨论了如何正确停止 Nginix。并非每个包装器都支持该功能（Srvany 不支持）...

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-25T09:04:01.927

我发现的最简单的方法是使用[Chocolatey](http://www.chocolatey.org)包管理器。

安装 Chocolatey 后，您打开管理提示符并键入：

```
choco install nginx 
```

您现在有一个名为“nginx”的 Windows 服务正在运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-03T08:59:09.090

NSSM 是将 Nginx 作为服务运行的最佳工具。
如果您**不想使用任何外部 3rd 方软件**，那么您可以实现这两种方法中的任何一种。

*   Windows 任务计划程序
*   Windows 启动快捷方式

**Windows 任务计划程序**

*   如[本答案](https://stackoverflow.com/a/39802422/5014656)所述，准备一个 start.bat 文件。
*   将此文件放在 nginx.exe 所在的位置。
*   打开 Windows 任务计划程序并按照[此答案](https://superuser.com/a/403597/467698)中的说明设置任务以无限期运行它。
*   不要忘记以系统帐户的最高权限运行此任务，更多详细信息可以在[这里](https://superuser.com/a/770439/467698)找到。
*   让任务在每天的某个时间启动，通过bat文件检查服务是否已经运行，避免创建多个nginx.exe实例。
*   如果由于某种原因 Nginx 关闭，它会在 5 分钟内启动。

**Windows 启动快捷方式**

*   创建一个nginx.exe的快捷方式，放到Windows的启动文件夹中。

*   按照[此答案](https://superuser.com/a/489778/467698)查找您的启动位置。

*   每当您登录系统时，Nginx 都会自动运行。
*   这个是最简单的。但是，它取决于用户配置文件，即如果您在服务器上运行 Nginx，它只会为您的用户帐户运行，当您注销时它会停止。
*   这是开发环境的理想选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-02T11:04:21.970

为此目的，官方[nginx wiki](http://wiki.nginx.org/InitScripts)参考了[winginx 。](https://github.com/InvGate/winginx/)它在linux环境下构建exe-installer。过程如下所示：

```
sudo apt-get install nsis make
wget https://github.com/InvGate/winginx/archive/master.zip
unzip master.zip
cd winginx-master/
make
ls -lh ./build/nginx-service.exe 
```

要获得实际版本，您应该在`Makefile`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-13T07:09:00.653

[从这里](https://github.com/InvGate/winginx)下载 zip 文件。

`nginx-service.exe`从中提取`winginx\build`并运行它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-26T16:25:50.827

而不是把nginx变成一个服务，或者用cmd启动一个进程，真的好像不行。我发现 Powershell 可以很容易地将 nginx 作为一个独立的进程启动。我已经将启动 nginx 与 PHP 结合起来。下面是脚本，名为“start-nginx.ps1”

```
$fcgiPort = "127.0.0.1:9000"
$PHPini = "c:\php\php.ini"

$ErrorActionPreference = "SilentlyContinue"

function restart { 
Push-Location /nginx
Stop-Process -Force -Name nginx 
Start-Process ./nginx.exe   -WindowStyle Hidden 

Stop-Process -Force -Name php-cgi
Start-Process  "c:\php\php-cgi.exe" -ArgumentList ("-b" + $fcgiPort  +  " -c "  +  $PHPini)   -WindowStyle Hidden 
Pop-Location
}

restart 
```

该脚本可以从任何目录执行，但需要针对您的 nginx 安装位置进行自定义。

此脚本包括在启动 nginx 和 PHP 之前静默尝试杀死两者。

Windows 系统应该将“.ps1”文件识别为 powershell，即使在 CMD 提示符下也是如此。

我创建了另一个小脚本来终止正在运行的进程，它只是从这个文件中删除了“start-process”行。

为了在启动时运行，我使用 win-R 命令导航到目录 shell:startup

在此目录中放置启动脚本的快捷方式，nginx 在启动时启动！

Powershell 还包括更复杂的任务调度功能，并且可以安排此脚本在启动时运行。[看到这个链接](https://blogs.technet.microsoft.com/heyscriptingguy/2014/05/14/use-powershell-to-create-job-that-runs-at-startup/)

来自文章：

```
 >powershell

 $trigger = New-JobTrigger -AtStartup -RandomDelay 00:00:30
 Register-ScheduledJob -Trigger $trigger -FilePath $HOME/start-nginx.ps1 -Name startNginx 
```

结合起来，我认为这种方法可以从 nginx windows 服务中获得所需的一切，并且不需要任何第三方应用程序。

# wpf - 如何在 WPF 中以派生样式覆盖基本样式控件模板？

> ID：10061201
> 
> 赞同：1
> 
> 时间：2012-04-08T07:36:02.620
> 
> 标签：wpf, controltemplate

我有按钮样式。该样式包含 Button 的 ControlTemplate。ControlTemplate 包含一个名为“ImgButton”的图像。

我想将此样式作为其他按钮的基本样式，并希望覆盖不同按钮的图像控件的“源”属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T08:28:37.313

您可以创建附加行为，该行为将提供一个属性来分配 Source。您应该使用 TemplatedParent 作为 RelativeSource 将您的图像绑定到模板中的此属性。在派生样式中，您可以简单地使用 Setter(s) 来指定不同的 Source。

附行为：

```
public static class ImageSourceBehavior
{
    public static readonly DependencyProperty SourceProperty = DependencyProperty.RegisterAttached(
        "Source", typeof(ImageSource), typeof(ImageSourceBehavior),
        new FrameworkPropertyMetadata(null));

    public static ImageSource GetSource(DependencyObject dependencyObject)
    {
        return (ImageSource)dependencyObject.GetValue(SourceProperty);
    }

    public static void SetSource(DependencyObject dependencyObject, ImageSource value)
    {
        dependencyObject.SetValue(SourceProperty, value);
    }
} 
```

款式：

```
<Style x:Key="Style1"
        TargetType="Button">
    <Setter Property="local:ImageSourceBehavior.Source"
            Value="..."/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Image Source="{Binding Path=(local:ImageSourceBehavior.Source),RelativeSource={RelativeSource TemplatedParent}}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="Style2"
        BasedOn="{StaticResource Style1}"
        TargetType="Button">
    <Setter Property="local:ImageSourceBehavior.Source"
            Value="..."/>
</Style> 
```

# php - 检查除以零的方法

> ID：10061204
> 
> 赞同：0
> 
> 时间：2012-04-08T07:36:14.527
> 
> 标签：php

> **可能重复：**
> [如何捕捉除以零？](https://stackoverflow.com/questions/3071067/how-to-catch-a-division-by-zero)

除了检查分母是否为0之外，还有其他方法可以检查php中的零除法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:08:54.030

不，除了在尝试除法之前检查分母不是 0 之外，没有其他方法可以检查除以 0。

为什么首先检查分母是个问题？它只是额外的 1 行代码。

# php - 使用 JavaScript 和 PHP 在图像中创建活动区域（热点）

> ID：10061206
> 
> 赞同：0
> 
> 时间：2012-04-08T07:36:40.413
> 
> 标签：php, image, facebook, image-processing, dom-events

我想构建一个显示图像的应用程序。当单击图像中的区域时，可能会产生不同的结果，具体取决于他/她单击的区域。结果总是用另一个有时相似的图像替换图像，如果它与原始图片不同，则只有很小的区域。

我的问题是当图像存储在外部服务器上时是否可以这样做，这样它就足够流畅并且不会感觉计算机必须下载另一张图片（这意味着当动作导致时感觉更像是在游戏中直接结果）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:43:04.267

您可以在开始游戏之前预加载所有图像。

检查这个 jquery 解决方案，例如[http://www.farinspace.com/jquery-image-preload-plugin/](http://www.farinspace.com/jquery-image-preload-plugin/)

这样您将在用户交互上获得流畅的结果

# javascript - 为什么我不能让 JavaScript yield 工作？

> ID：10061207
> 
> 赞同：1
> 
> 时间：2012-04-08T07:36:57.663
> 
> 标签：javascript

我正在尝试从这里运行代码

[MDN：生成器和迭代器](https://developer.mozilla.org/en/New_in_JavaScript_1.7#Generators_and_iterators_%28merge_into_Iterators_and_Generators%29)

```
function fib() {
  var i = 0, j = 1;
  while (true) {
    yield i;
    var t = i;
    i = j;
    j += t;
  }
}

var g = fib();
for (var i = 0; i < 10; i++) {
  console.log(g.next());
} 
```

我无法让它在 Node.js、Chrome 或 Firefox 中运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:08:47.717

It's an EcmaScript.next feature that is being tested in newer versions of JavaScript interpreters.

[Mozilla's "Iterators and Generators"](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators) explains how to use them.

To see which browsers support which ES.next features, see [kangax's compatibility chart](http://kangax.github.io/es5-compat-table/es6/) and [browser specific reports](https://developer.mozilla.org/en-US/docs/Web/JavaScript/ECMAScript_6_support_in_Mozilla). Although Chrome as a whole does not yet, jmar777 reports that V8 supports it (as of Aug 2013).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:03:32.947

If this code is executing in Node.js application on the server side it doesn't matter what browser you're using as this isn't the execution environment for that block of code - it's on your server and as far as i know Node.js is using a version of the V8 JS engine that doesn't yet have ES6 support.

# c# - 浏览器页面最小化/恢复向下状态时的asp.net页面调整

> ID：10061212
> 
> 赞同：0
> 
> 时间：2012-04-08T07:37:43.563
> 
> 标签：c#, asp.net, css, visual-studio-2010, webpage

我正在使用 asp.net 开发一个网站，到目前为止一切顺利。该功能没有太大问题，但页面的外观是问题所在。当浏览器页面处于全屏模式时，所有控件都正确对齐并位于正确的位置，就像我在 VS 2010 上设计时一样。但是当浏览器处于恢复向下模式或屏幕尺寸减小时，一切页面上看起来散落一地。我在网上搜索但没有找到帮助[这个链接](https://stackoverflow.com/questions/5714759/when-browser-is-restored-down-page-is-compressed)有同样的问题，但似乎没有发布解决方案。请帮忙。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:40:43.667

可能您想考虑将您的 css 元素定义为 % 而不是绝对度量，例如我有一个 div width=100px; 我希望它是 div 宽度 = 50%。这将给出屏幕尺寸的相对尺寸，而不是固定尺寸。

还要考虑浮动并使用 div 以使您的页面进行相应调整

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:44:11.870

在编写设计代码时，您需要记住，各种用户将使用具有各种属性的各种设备。这与asp.net、c# 和visual-studio 无关。这是 CSS 的一个问题。您需要学习如何设置您的网站的样式，以便它始终看起来一样，而不仅仅是当您在计算机上使用特定显示器分辨率查看它时。这是一个不能在这里讨论的话题。整本书都在讨论这个“问题”以及如何避免它。

编辑，一些可能有帮助的链接：

[http://www.theserverside.com/tip/How-to-design-a-Web-page-that-will-display-properly-across-browsers](http://www.theserverside.com/tip/How-to-design-a-Web-page-that-will-display-properly-across-browsers)

[http://faq.programmerworld.net/web_publishing/a-web-standards-checklist.html](http://faq.programmerworld.net/web_publishing/a-web-standards-checklist.html)

[http://www.jimwestergren.com/common-css-mistakes-and-their-solutions/](http://www.jimwestergren.com/common-css-mistakes-and-their-solutions/)

[http://www.webreference.com/authoring/style/sheets/index.html](http://www.webreference.com/authoring/style/sheets/index.html)

希望能帮助到你。如果您没有经验，我建议您坚持使用固定宽度的布局并学习、学习、学习。

最后的建议 - 不要忘记存在各种浏览器，每种浏览器都以略微不同的方式呈现页面。不要忘记在编写 CSS 时考虑到这一点并经常检查问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:10:48.720

您面临的问题是众所周知的浮动 Web 布局。这里我举个例子

```
#header
{
    height: 85px; // change like 10%
    width:1000px; // change like 50%
    background-color: White;
    border-bottom:solid 2px #9DACBD;
    margin:10px auto 0px auto;  // change like 10% auto 0% auto
} 
```

通过将宽度、高度和边距更改为百分比（如@Akash Yadav 建议的那样），您可以将布局与页面分辨率一致。希望它会帮助你。
****注意：*** *有很多关于浮动网页布局的帖子。搜索谷歌更多:)。

# php - 从 Jquery JSON 获取响应

> ID：10061213
> 
> 赞同：3
> 
> 时间：2012-04-08T07:37:57.257
> 
> 标签：php, javascript, jquery, html, json

我无法从我的 php jquery / json / ajax 获得响应。我一直将所有这些不同的教程组合在一起，但我似乎仍然无法将它们全部组合在一起，因为没有一个教程遵循我正在尝试做的事情。

现在我正在尝试将两个数组（因为没有简单的方法来传递关联数组）传递给我的 jquery ajax 函数，然后将其发出警报。这是我的代码：

**PHP**

```
$names = array('john doe', 'jane doe');
$ids = array('123', '223');

$data['names'] = $names;
$data['ids'] = $ids;

echo json_encode($data); 
```

**jQuery**

```
function getList(){
    $.ajax({  
        type: "GET", 
        url: 'test.php', 
        data: "",  
        complete: function(data){ 
            var test = jQuery.parseJSON(data);
            alert(test.names[0]);
            alert("here");
        }
    },
        "json");
}
getList(); 
```

在我的 html 文件中，我真正调用的是用于调试目的的 javascript 文件。我知道我正在返回一个对象，但我的名称部分出现空值错误，我不知道为什么。我错过了什么？

我的 PHP 文件返回

```
{"names":["john doe","jane doe"],"ids":["123","223"]} 
```

它似乎只是在这里结束， `Uncaught TypeError: Cannot read property '0' of undefined` 所以我的 sub0 正在杀死我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T08:56:29.423

您可以使用`$.getJSON`jQuery 提供的外观，这将为标准 JSON 请求设置所有必需的 ajax 参数：

```
$.getJSON('test.php', function(response) {
    alert(response.names[0]);   // john doe
}); 
```

但是我认为问题的根源在于 1）您的服务器可能没有返回正确的响应代码和/或正确的标头（即：JSON 数据） - 但是至少对于后者来说，上述方法应该强制得出这个结论。

请参阅：[http ://api.jquery.com/jQuery.getJSON](http://api.jquery.com/jQuery.getJSON)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T07:46:34.697

看起来问题在于您使用的是完整回调而不是成功回调：

```
function getList(){
    $.ajax({  
        type: "GET", 
        url: 'test.php', 
        data: "",  
        success: function(data) { /* success callback */
            var test = jQuery.parseJSON(data);
            alert(test.names[0]);
            alert("here");
        }
    },
    "json");
}
getList(); 
```

来自[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)文档：

> 成功（数据，文本状态，jqXHR）
> 
> 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。
> 
> 完成（jqXHR，文本状态）
> 
> 请求完成时要调用的函数（在执行成功和错误回调之后）。该函数获得两个参数：jqXHR（在 jQuery 1.4.x 中，XMLHTTPRequest）对象和一个对请求状态进行分类的字符串（“成功”、“未修改”、“错误”、“超时”、“中止”或“解析器错误”）。从 jQuery 1.5 开始，完整的设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T07:49:48.600

jQuery 想知道期望什么样的数据作为响应，否则它不知道如何解析它。

所以，正如前面所说的，你告诉 jQuery 使用`dataType = 'json'`属性。

```
function getList() {
    $.ajax({  
        type: "GET", 
        url: 'test.php', 
        data: "",  
        dataType: "json",
        success: function(data) { 
            console.log(data);
        }
    });
} 
```

除此之外，让 PHP 将其内容呈现为 json 而不是 html 是一个好主意。`header('Content-type: application/json');`您可以通过在 PHP 脚本中的任何输出之前设置来使用此标头。所以：

```
$names = array('john doe', 'jane doe');
$ids = array('123', '223');

$data['names'] = $names;
$data['ids'] = $ids;

header('Content-type: application/json');

echo json_encode($data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T07:45:23.453

您应该在单个对象中传递 ajax() 函数的所有参数。所以，应该有“dataType”选项。此外，如果您明确设置数据类型，jQuery 将为您解析 JSON 数据。完成回调将接收解析的 JavaScript 对象作为参数。

```
function getList() {
    $.ajax({  
        type: "GET", 
        url: 'test.php', 
        data: "",  
        dataType: "json",
        success: function(test) { 
            alert(test.names[0]);
            alert("here");
        }
    });
} 
```

# ruby-on-rails - Rails/ Recaptcha - 如何让 Recaptcha 仅在单击提交按钮后出现？

> ID：10061215
> 
> 赞同：0
> 
> 时间：2012-04-08T07:38:05.587
> 
> 标签：ruby-on-rails, recaptcha

我希望我的recaptcha 仅在用户单击表单上的提交按钮后出现。

我该如何实施？我在下面附上我当前的实现..

**_FORM 文件**

```
<div class="actions">
<%= recaptcha_tags %>
<%= f.submit %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:47:55.700

好吧，我想说你必须为此使用javascript（jquery等）。您的 erb 标签已经包含在一个带有 class 的 div 中`actions`。您可以简单地将其隐藏在开头并在 div 上方/下方放置一个按钮，当用户单击时，您可以隐藏单击的按钮并显示“.actions” div ...

# asp.net - 在 ASP.NET 中使用 Membership API 的登录表单

> ID：10061216
> 
> 赞同：1
> 
> 时间：2012-04-08T07:38:05.917
> 
> 标签：asp.net, .net, visual-studio-2010, login, asp.net-membership

我是 ASP.NET 的新手，

我想使用会员 API 创建登录表单，我无法使用我的凭据登录，

在这里，是我的代码片段

`LoginForm.aspx.cs`

```
protected void Submit_Click(object sender, EventArgs e)
{
    if (FormsAuthentication.Authenticate(Username.Text, Password.Text))
    {
        Response.Write("Welcome " + Username.Text);
    }
    else
    {
        Response.Write("Sorry Login Failed ");
    }
} 
```

我使用会员 API 创建了注册表单

在这里，是我的代码片段 `RegistrationForm.aspx.cs`

```
 protected void AddUser_Click(object sender, EventArgs e)
{
    MembershipCreateStatus result;
    try
    {
        MembershipUser newUser = Membership.CreateUser(TextBox1.Text, TextBox2.Text, TextBox3.Text, TextBox4.Text, TextBox5.Text, true, out result);
        if (result == MembershipCreateStatus.Success)
        {
            Response.Write("Successfulley created");
        }
        else
        {
            Response.Write("Fail to Register");
        }
    }
    catch (Exception err)
    {
        Response.Write(err.Message);
    }
} 
```

当我在 RegistrationForm 中注册新用户时，我得到输出`Successfulley created`，但是在注册后，当我使用注册的用户名和密码登录时，我得到输出为`Sorry Login Failed`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:52:30.093

你需要用这个吗？

```
FormsAuthentication.SetAuthCookie 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:13:45.317

@dhaval 试试这个，

```
protected void SubmitClick(object sender, EventArgs e)
{
    try
    {
        if (Membership.ValidateUser(Username.Text, Password.Text))
        {
            FormsAuthentication.SetAuthCookie(Username.Text, true);
            FormsAuthentication.RedirectFromLoginPage(Username.Text, true);

            Response.Redirect("NextPage.aspx");
        }
        else
        {
            Response.Write("Sorry Login Failed ");
        }
    }
    catch (Exception err)
    {
        Response.Write(err.Message);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:57:49.263

`website administration tool`从 VS 解决方案资源管理器的右上角转到，您将看到如下屏幕截图所示的内容，如果您可以看到创建的用户，您将在旁边有一个复选框，如果它选中，您可以登录，否则选中它然后您可以成功登录。

![在此处输入图像描述](../Images/67e7145d5b1eed6213e21aecc683fa37.png)

# gwt-rpc - GWT-platform 的 Dispatch 如何在 DispathcAsync 接口中指示我的服务的端点 URL？

> ID：10061222
> 
> 赞同：0
> 
> 时间：2012-04-08T07:39:56.040
> 
> 标签：gwt-rpc, gwt-platform

**场景**：我正在使用**GWT 平台调度命令模式**。我想将我的静态内容部署在一个 http 服务器中，例如 Appache httpd，并将动态内容部署在其他 Web 容器中，例如 WebSphere 等。

**问题**：我的后端服务中有一个 ActionHandler servlet，它应该在 Web 容器中，例如哪个 URL 是[http://127.0.0.1:8080/services](http://127.0.0.1:8080/services.but) 。但是我的静态内容部署在[http:// 127.0.0.1:80/演示/](http://127.0.0.1:80/Demo/)。**我不想使用 Appache httpd 的 proxy-pass**，只想在客户端的 dispatchAsync 接口中指明我的 serviceimpl 的 url，我该如何实现呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:54:22.200

在您的 Guice 模块中，您可以配置 URL：

```
serveRegex("/" + ActionImpl.DEFAULT_SERVICE_NAME + ".*").with(
                DispatchServiceImpl.class); 
```

看看[文档](http://code.google.com/p/gwt-platform/wiki/GettingStartedDispatch#Setting_up_server)

# android - Android + saxParser + 将对象存储到 ArrayList

> ID：10061226
> 
> 赞同：0
> 
> 时间：2012-04-08T07:40:18.600
> 
> 标签：android, arraylist, saxparser

我正在使用 saxParser 的简单实现。在我的 endElement 方法中，我将 vo 对象存储到 ArrayList。不幸的是，当我遍历我的列表时，它只返回我的 xml 数据中的最后一项。只是想知道我做错了什么？相关代码如下：

```
public class MyXMLHandler extends DefaultHandler {
    private StringBuffer buffer = new StringBuffer();
    private Boolean currentElement = false;

    private StoreDetails storeDetails = new StoreDetails(); //vo object
    private ArrayList<StoreDetails> dataList = new ArrayList<StoreDetails>(); //list of vo

    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        currentElement = true;
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {

        currentElement = false;     

        if (localName.equals("StoreID")) {
            buffer.toString().trim();
            storeDetails.setStoreId(buffer.toString());
        } else if (localName.equals("StoreName")) {
            buffer.toString().trim();
            storeDetails.setStoreName(buffer.toString());
        } else if (localName.equals("StoreCategory")) {
            buffer.toString().trim();
            storeDetails.setStoreCategory(buffer.toString());

            //add vo object to ArrayList - dataList
            dataList.add(storeDetails);
        }

        buffer = new StringBuffer();
    }    

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        if (currentElement) {
            buffer.append(ch, start, length);
            currentElement = false;
        }
    }

    @Override
    public void endDocument() throws SAXException {
        Log.i("TAG", "DONE PARSING XML");
        for(StoreDetails details : dataList){
            //ISSUE - returning only the last row in my xml data (over and over)
            Log.i("TAG", "Details ID: " + details.getStoreId());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:55:19.277

将对象添加到数组列表后，您必须重新初始化它。否则它会保存最后的数据。

现在，例如，如果您的 xml 是这样的，那么

```
<Item>
<StoreID></StoreID>
<StoreName></StoreName>
<StoreCategory></StoreCategory>
</Item> 
```

在 startElement 中，您必须初始化“storeDetails”对象。

```
storeDetails = new StoreDetails(); 
```

在 endElement，您必须将“storeDetails”对象添加到数组列表中。

```
dataList.add(storeDetails); 
```

这样，当 startElement 发生时，'storeDetails' 对象将被初始化，它将保存当前项目的信息（StoreID，StoreName，StoreCategory）&然后在 endElement 发生时，'storeDetails' 对象将被添加到 arraylist。因此解析将继续，您将获得数组列表中的所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:46:25.803

我想问题是您对 ArrayList 中的所有项目都使用“vo 对象”的单个实例。你在 startElement 中需要这样的东西：

```
storeDetailes = new ... 
```

请参阅文档，解释 Java 内存模型。

# facebook - “Draw Something”使用什么技术？

> ID：10061228
> 
> 赞同：1
> 
> 时间：2012-04-08T07:40:33.297
> 
> 标签：facebook, animation, mobile, platform

它看起来像带有闪存的跨平台？还是html + javascript？

我正在寻找一种支持这些功能的技术： + 好的动画（比如画东西） + 跨平台 + 与 facebook/twitter 进行良好的沟通 - 获取朋友列表，发送应用邀请等

# android - 从应用程序内部卸载android应用程序？

> ID：10061232
> 
> 赞同：0
> 
> 时间：2012-04-08T07:40:59.177
> 
> 标签：android, security, passwords, uninstallation

嗨朋友们，我的问题有点复杂。我目前正在制作一个与密码相关的项目，即该应用程序仅在用户输入他/她的密码时打开。在开发应用程序时，我认为我的应用程序只能通过输入密码打开，但如果任何陌生人/朋友拿走我的手机并卸载我的应用程序。然后存储在我的应用程序中的所有数据都将被销毁。所以我想在卸载应用程序之前询问密码或禁用应用程序卸载过程中的卸载按钮，即卸载按钮应该只在我从我的应用程序内部执行某些操作时启用。如果可以，请重播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:44:36.777

恐怕不可能。而是用密码锁定手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:55:01.230

有些应用程序只有在您输入密码后才允许启动应用程序。它们都利用系统日志，即通过阅读该日志，您就知道某些活动何时开始。而且，您可以“拦截”它。所以，也许这会对你有所帮助。

# javascript - FOO 代表什么？

> ID：10061234
> 
> 赞同：9
> 
> 时间：2012-04-08T07:41:11.877
> 
> 标签：javascript

> **可能重复：**
> [“foo”的真正含义是什么？](https://stackoverflow.com/questions/53609/what-does-foo-really-mean)

我希望这不是有史以来最愚蠢的问题。

每当我阅读 javascript 时，我都会看到人们使用**FOO**这个词。

这个词是从哪里来的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T07:42:12.600

[http://en.wikipedia.org/wiki/Foobar](http://en.wikipedia.org/wiki/Foobar)

[https://www.rfc-editor.org/rfc/rfc3092](https://www.rfc-editor.org/rfc/rfc3092)

谷歌是你最好的朋友。

这些术语的起源尚不清楚，并且已经提出了一些轶事理论来识别它们。Foobar 可能源自军事首字母缩写 FUBAR，并因其发音相同而广受欢迎。在这个意义上，它也可以源自德语单词 furchtbar，意思是可怕和可怕。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T07:43:54.477

根据维基

术语 foobar /ˈfʊːbɑː/、fubar 或 foo、bar、baz 和 qux（或者 quux）有时在计算机编程或计算机相关文档中用作占位符名称（也称为元句法变量）。 [1]

[http://en.wikipedia.org/wiki/Foobar](http://en.wikipedia.org/wiki/Foobar)

[http://catb.org/jargon/html/F/foo.html](http://catb.org/jargon/html/F/foo.html)

# objective-c - touchesBegan 未在 UIView 子类中调用

> ID：10061239
> 
> 赞同：3
> 
> 时间：2012-04-08T07:42:15.153
> 
> 标签：objective-c, ios, uiview, touches, touchesbegan

我正在尝试模仿 GLPaint 应用程序，并且我有一个`TDPaintingView`方法也适用`-(void)touchesBegan...`于`touchesMoved`、`touchesEnded`和`touchesCanceled`. 但是，我没有看到它们中的任何一个着火。

我有一个`TDAppDelegate`连接到`Window`IB 和`TDPaintingView`IB 的。我的`initWithCoder`方法`TDPaintingView`肯定会触发，所以我知道它正在初始化。此外，我可以从`TDPaintingView`从上下文中记录对象中`applicationDidFinishLaunching`看到它肯定存在。当我在 IB 中以微不足道的方式更改视图（例如使 bg 变为红色）时，它会反映在模拟器上。

但是，我的视图没有收到触摸，这让我发疯了！

我设置了一个断点`-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`，它永远不会停止，无论我在屏幕上触摸什么位置。

My`TDPaintingView`没有子视图，它明确定义了这些触摸动作的方法。

我哪里错了？

# qemu - 如何使用 virsh 创建 Tap 设备？

> ID：10061241
> 
> 赞同：3
> 
> 时间：2012-04-08T07:42:33.270
> 
> 标签：qemu, kvm, libvirt

这是使用 qemu-kvm 管理工具创建的配置文件的片段。如何使用 VMM 或 virsh 创建相同的配置？

```
[net]
  type = "nic"

[net]
  type = "tap"
  script = "/etc/ovs-ifup"
  downscript = "/etc/ovs-ifdown" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-13T13:29:34.197

This configuration file indicates that you're using OpenVSwitch to manage virtual network ports for you KVM virtual machines.

Refer to this [article](http://git.openvswitch.org/cgi-bin/gitweb.cgi?p=openvswitch;a=blob_plain;f=INSTALL.KVM;hb=HEAD) for howtos and how it creates/destroy virtual network ports.

You can use this command to create and then enable new tap device `vnetX`: `ip tuntap add dev vnetX mode tap` `ip link set up dev vnetX`

# mysql - 如何检查mysql连接是否在事务中

> ID：10061242
> 
> 赞同：1
> 
> 时间：2012-04-08T07:42:34.233
> 
> 标签：mysql, transactions

有没有办法检查 MySQL 事务是否已经开始？

谢谢

# asp.net - WCF WebInvoke 属性是否可以将 GET 作为方法

> ID：10061251
> 
> 赞同：2
> 
> 时间：2012-04-08T07:44:03.857
> 
> 标签：asp.net, wcf, web-services, attributes, webinvoke

WebInvoke 属性是否可以将 GET 作为方法？我在 Microsoft 文档中看不到任何关于此的概念。我已经看到它在一些论坛示例中使用过。

原则上，不应该是这样，当使用 webInvoke 时，您可以发布、放置和删除。相反，当使用 WebGet 时，您只能通过 HTTP 使用 GET 动词，这意味着您不能发布、删除和放置。现在 Get 操作不应该修改数据，根据 W3org，它们应该是幂等的，因此不是 WebInvoke 属性中的选项。有人可以指出 GET 动词在 WebInvoke 属性中的作用或存在，尤其是在 REST 编程的上下文中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T08:01:22.083

`WebInvoke`是任何 HTTP 动词的通用属性，包括 GET。如果将它与 GET 一起使用，则必须遵循 GET 的所有限制 - 操作参数必须是映射到 URI 路径参数的简单类型。

`WebGet`仅适用于 GET 动词，恕我直言，它的存在主要是为了显示 GET 和其他动词之间的区别（GET 应该是幂等的，GET 没有正文等）

.NET 中使用这些属性最重要的方法是 internal `GetWebMethod`：

```
internal static string GetWebMethod(OperationDescription od)
{
    WebGetAttribute wga = od.Behaviors.Find<WebGetAttribute>();
    WebInvokeAttribute wia = od.Behaviors.Find<WebInvokeAttribute>();
    EnsureOk(wga, wia, od);
    if (wga != null)
    {
        return "GET";
    }
    if (wia == null)
    {
        return "POST";
    }
    return (wia.Method ?? "POST");
} 
```

如您所见，`WebInvoke`通常会处理 GET 方法。

# android - 选择通知时的 startActivityForResult()

> ID：10061255
> 
> 赞同：1
> 
> 时间：2012-04-08T07:44:24.767
> 
> 标签：android, android-intent, android-activity, android-notifications

是否可以从状态栏通知中使用 startActivityForResult() ？

假设我有一个活动 A，它在某些事件上使用 startActivityForResult() 启动活动 B。现在，当它在后台时，它会在事件中显示通知。现在在选择通知时，我如何启动活动 B 以获得结果？

我确实意识到活动 A 应该有一个在后台运行的服务，但我想即使在这种情况下，同样的问题也会适用。

这是通知的代码。这是在活动 A 中。

```
 Notification notification = new Notification(R.drawable.ic_launcher, "New Notification", System.currentTimeMillis());

    notification.flags = Notification.FLAG_AUTO_CANCEL;
    CharSequence contentTitle = "My Notification Title";
    CharSequence contentText = "My Notification Text";
    Intent notificationIntent = new Intent(this, ActivityB.class);

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    notification.setLatestEventInfo(getApplicationContext(), contentTitle, contentText, contentIntent);

    nm.notify(1, notification);  //1 = id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:47:03.117

我认为当通过打开通知打开活动 B 然后关闭时，您应该从活动 B 开始活动 A。您可以在用于从活动 B 启动活动 A 的意图中传递返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:57:50.993

不要使用 startActivityForResult。您可以通过不同的方式实现相同的功能。将结果作为附加通知传递给您。在活动 B 的 onResume 中获取此结果。

# android - 开发 iOS 和 Android 原生应用

> ID：10061260
> 
> 赞同：3
> 
> 时间：2012-04-08T07:45:17.297
> 
> 标签：android, ios

我需要在 iOS 和 Android 上开发本机应用程序。它是一个小型应用程序，更像是一个学习应用程序 - 但是，我确实打算在两个市场上发布它。而且我不希望使用PhoneGap/Titanium/...，而是宁愿在核心平台上开发，因为这让我可以访问我需要的所有功能。

由于两个平台上的功能相同（显然），我想知道最好的方法是什么。我应该在 Android 上开发然后移植到 iOS 吗？还是反过来？还是并行发展？

我想我没有办法重用一些代码吗？例如，如果我用 C 开发？

我应该如何处理代码更新？我应该为每个平台保留一个单独的错误列表并独立修复它们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T08:00:17.217

是的，如果你想要一个完美的应用程序，你应该为每个操作系统编写单独的代码。一个在 Java 中用于 Android，第二个在 Objective-C 中用于 iOS。当然，你可以用 C++ 为 iOS 编写内核（不知道你是否可以用 Java 编写），这很好。

您应该开始开发一个您认为自己是更有经验的程序员的平台。完成应用程序后，将您的想法复制到不同的语言会更容易。

# python - 优化 Python 多项式求值

> ID：10061264
> 
> 赞同：2
> 
> 时间：2012-04-08T07:45:57.257
> 
> 标签：python, optimization, polynomial-math

我有一个函数可以评估多个变量中的多项式项。输入是每个变量的幂列表。例如，对于两个变量和二阶，它看起来像这样，

```
def f(x,y):
    return [1, x[1], y[1], x[1]*y[1], x[2], y[2]]

x = [2**0, 2**1, 2**2]
y = [3**0, 3**1, 3**2]

>>> f(x,y)
[1,2,3,6,4,9] 
```

实际上，该函数是更高阶的并且具有许多变量，因此平均有几千个术语（实际上，我在运行时使用 eval 语句创建了该函数，但这并不重要）。该函数位于最内层循环中，目前是速度瓶颈。分析器告诉我，我大部分时间都花在 __times__ 上。

没有创建 C 扩展模块，任何人都可以看到任何优化空间吗？

**编辑：**上面的例子试图`1 + x + y + xy + x^2 + y^2`用`x = 2`and进行评估`y = 3`，除了不添加它们，只是将每个术语放在一个列表中。

添加它们很好（带有一些系数 A，B，...），即我要做的就是计算：

`A + B*x + C*y + D*x*y + E*x^2 + F*y^2`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:00:03.670

我不确定从哪个版本开始，但是 numpy 应该[`polyval2d(x,y,c)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polynomial.polynomial.polyval2d.html)在模块中有一个功能[`polynomial`](http://docs.scipy.org/doc/numpy/reference/routines.polynomials.polynomial.html)，这将完全适用于您的示例。

您似乎有兴趣将您的示例扩展到更高的维度。

在同一个模块中有一个[`polyval3d(x,y,z,c)`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polynomial.polynomial.polyval3d.html)，如果这还不够，我建议（我猜你已经在做）查看[源代码](https://github.com/numpy/numpy/blob/master/numpy/polynomial/polynomial.py#L789)。实施最适合您需求的东西应该不会太难，您可以随时在 SO 上提问 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:52:56.280

> 该函数位于最内层循环中，目前是速度瓶颈。

您可以尝试通过使用 NumPy 并用更高维度的数组替换变量来完全摆脱循环。

# sql-server - 需要有关更新声明的帮助

> ID：10061278
> 
> 赞同：1
> 
> 时间：2012-04-08T07:48:30.167
> 
> 标签：sql-server

我的表格和数据如下，

```
declare @t1 table (myID varchar(200), chequeNo varchar(20));
insert into @t1 values('2011-01-03809','1925');
insert into @t1 values('2011-01-03810','1989');
insert into @t1 values('2011-01-03791','BIMB 256247');
insert into @t1 values('2011-01-03789','BIMB 256247');
insert into @t1 values('2011-01-03792','BIMB 256247');
insert into @t1 values('2011-01-03793','BIMB 256247');
insert into @t1 values('2011-13-00430','mbb 385030');
insert into @t1 values('2011-13-00431','mbb 385030');
insert into @t1 values('2011-01-03645','bmmb 003095');
insert into @t1 values('2011-08-00608','CIMB 376443');
insert into @t1 values('2011-08-00609','CIMB 385371');
insert into @t1 values('2011-04-00652','CIMB 512393');
insert into @t1 values('2011-13-00399','EBB 000639');
/* myID is a unique */ 
```

我想使用更新语句来区分 chequeNo。

我的预期结果如下，

```
myID          | chequeNo
-----------------------------------
2011-01-03645   bmmb 003095
2011-01-03789   BIMB 256247 (1)
2011-01-03791   BIMB 256247 (2)
2011-01-03792   BIMB 256247 (3)
2011-01-03793   BIMB 256247 (4)
2011-01-03809   1925
2011-01-03810   1989
2011-04-00652   CIMB 512393
2011-08-00608   CIMB 376443
2011-08-00609   CIMB 385371
2011-13-00399   EBB 000639
2011-13-00430   mbb 385030 (1)
2011-13-00431   mbb 385030 (2) 
```

基于@t1 表，一些 chequeNo 是相同的，但 myID 不同。myID 与 chequeNo 的关系看起来像一对多。我想做 1 比 1（1 个 myID 有 1 个 chequeNo）。所以，我需要使用更新语句。

我的更新声明如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:37:55.763

可以使用排名函数对行重新编号。

```
UPDATE subquery
SET chequeNo = chequeNo + ' (' + CAST(sequence AS varchar(20)) + ')'
FROM
(
    SELECT *
    , sequence = ROW_NUMBER() OVER (PARTITION BY chequeNo ORDER BY myID)
    , reverseSequence = ROW_NUMBER() OVER (PARTITION BY chequeNo ORDER BY myID DESC)
    FROM @t1
) subquery
WHERE NOT (sequence = 1 AND reverseSequence = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:49:46.863

```
select myid, chequeno +
' (' +
cast(ROW_NUMBER() OVER (partition by chequeno order by chequeno) as varchar) +' )' as chequeno
from @t1 
```

# security - Symfony 2 - 如何在每次页面加载时禁用查询用户？

> ID：10061280
> 
> 赞同：9
> 
> 时间：2012-04-08T07:49:13.873
> 
> 标签：security, optimization, symfony

我在 symfony 2.0 中使用我自己的 User 类作为安全系统的实体提供者。

我注意到每次重新加载页面时，symfony 都会从 db 获取用户：

> SELECT t0.id AS id1, t0.username AS username2, t0.salt AS salt3, t0.password AS password4, t0.email AS email5, t0.is_active AS is_active6, t0.credentials AS credentials7 FROM w9_users t0 WHERE t0.id = ? 参数：['23'] 时间：4.43 ms

有什么简单的方法可以禁用这种行为吗？也许在会话变量中序列化用户数据或以某种方式缓存它们？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T19:26:28.427

您可以`refreshUser`在`UserProvider`.

使用学说执行此操作时应小心：[FosUserBundle github 存在一个问题](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/499)，解释了陷阱：

> 将其存储在会话中会导致几个问题，这就是默认情况下不这样做的原因：
> 
> 如果管理员更改用户的权限，则更改将仅在您下次从数据库中检索用户时生效。所以缓存用户必须小心，以避免安全问题
> 
> 如果您只是重用在会话中序列化的用户，它将不再由 Doctrine 管理。这意味着一旦您想修改用户或在关系中使用用户，您必须将其合并回 UnitOfWork（这将返回与防火墙使用的对象不同的对象）。合并也会触发数据库查询。并且要求这样的逻辑会破坏一些期望能够使用用户对象进行更新的内置控制器。

# regex - 为什么我们应该在正则表达式中更喜欢否定字符类而不是 .* ？

> ID：10061281
> 
> 赞同：4
> 
> 时间：2012-04-08T07:49:17.610
> 
> 标签：regex, regex-negation

我正在看一个关于正则表达式的教程。

这是关于如何从这段 html 中获取 class 属性

```
<pre class="ruby" name="code"> 
```

并且使用的正则表达式是

```
<pre class="([^"]+)" name="code"> 
```

他们建议使用上述的而不是

```
<pre class="(.+)" name="code"> 
```

“因为它超出了报价范围。”

我不明白他们的意思。无论如何它都会起作用，但是为什么推荐第一个正则表达式。我错过了什么吗？请赐教。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T07:54:42.480

`.+`贪婪地匹配。例如，在

```
<pre class="ruby" size="medium" name="code"> 
```

它会匹配`ruby" size="medium`。更糟糕的是，如果你在同一行上有两个标签，它会在标签边界上匹配：

```
<pre class="ruby" name="code">foo</pre> <pre class="python" name="code">bar</pre> 
```

会导致`ruby" name="code">foo</pre> <pre class="python`！

因此，只要您确切地知道您的 HTML 会是什么样子，`.+`就可以工作，但是一旦它意外更改（因为 HTML 不会这样做），您的正则表达式不会简单地失败（就像第二个那样），但它会匹配错误的东西。

因此，第二个正则表达式更安全（因为它更明确地说明了允许匹配的内容）。您通常应该尽量避免简单`.+`或`.*`“匹配任何东西”，而是考虑您想要匹配的内容。

也就是说，出于完全相同的原因，您不应该尝试将 HTML 和其他标记语言与正则表达式进行匹配，因为有更好的工具可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:54:44.350

正则表达式匹配通常会尝试匹配最长的正则表达式。因此 "([^"]+)" 只匹配它遇到的*第一个*引号。另一方面，"(.+)" 将从第一个引号匹配到字符串中的*最后一个*引号。

例如，如果我们将它们应用于您的问题，第一个将 match `"ruby"`，因为这是您问题中第一个引用的字符串。第二个将从`"ruby`on 一直匹配到`beyond the quote"`，因为这是问题中的最后一个引号（并且会在其间包含其他几个带引号的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T11:05:50.323

考虑这个例子：

```
<pre class="scooby" name="not-code">
  content
</pre>

...other HTML...

<pre class="ruby" name="code">
  content
</pre> 
```

使用此正则表达式 [*]：

```
<pre class="(.+)" name="code"> 
```

...第一部分 - `<pre class="`- 开始匹配第一个标签，然后`(.+)`消耗整个文档的其余部分。但是正则表达式的其余部分 - `" name="code">`- 不能在那里匹配，所以它会后退，直到找到它可以的位置 - 在第二个标签中。结果：该组最终捕获了从`scooby`到的所有内容`ruby`。

即使您使用 non-greedy`(.+?)`而不是 greedy 也是如此`(.+)`。人们经常说非贪婪量词导致正则表达式返回最短的匹配，但事实并非如此。就像一个贪婪的正则表达式，它一有机会就*开始*匹配；它也会尽快*停止匹配。*像这种非贪婪量词没有用的情况并不少见。

另一件要考虑的事情是当没有可能的匹配时——例如，如果有`<pre>`第一个属性的标签`class="~whatever~"`，但没有一个`name="code"`属性的标签。每一次，贪婪`(.+)`者都会吞噬整个文件，然后退缩，直到到达起点，然后放弃。非贪婪`(.+?)`不会回溯，但它会扫描整个页面，并且会慢得多（它有效地对`" name="code">`每个位置进行前瞻）。

使用这个正则表达式：

```
<pre class="([^"]+)" name="code"> 
```

...它永远不必扫描超出标签的末尾来确定它是否匹配。

*始终*考虑如果无法匹配会发生什么。这可能是正则表达式作者最常见的监督，也是导致性能问题最多的一种。

[*] 出于说明目的，我假设比赛是在 DOTALL 模式（又名单行模式）下进行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T10:52:02.257

否定一个类通常更具体地说明你想要匹配的内容，并且可以帮助防止像[Catastrophic Backtracking](http://www.regular-expressions.info/catastrophic.html)这样的情况。

Jeff Atwood 不久前写了一篇关于它的有趣[博客文章](http://www.codinghorror.com/blog/2006/01/regex-performance.html)，其中他举了一个看似无辜的正则表达式的例子：`(x+x+)+y`这可能需要（几乎）永远完成处理。即使主题很小，像这样：`xxxxxxxxxxxxxxxxxxxx`.

给它读一读，它真的很有趣。

# algorithm - 用前缀树实现一个基本的搜索引擎

> ID：10061285
> 
> 赞同：5
> 
> 时间：2012-04-08T07:49:49.387
> 
> 标签：algorithm, data-structures, functional-programming, purely-functional

问题是在不使用任何存储和迭代方法的情况下用函数式语言实现前缀树（Trie）。

我正在尝试解决这个问题。我应该如何解决这个问题？你能给我确切的算法或链接，显示已经用任何功能语言实现了吗？

为什么我要这样做 => 创建一个具有以下功能的简单搜索引擎

*   将单词添加到树
*   在树中搜索单词
*   删除树中的一个词

为什么我想使用函数式语言 => 我想进一步提高我解决问题的能力。

注意：由于这是我的爱好项目，我将首先实现基本功能。

编辑：

i.）我的意思是“不使用存储”=>我不想使用变量存储（ ex int a ），引用变量 array 。我想通过递归计算结果，然后将结果显示到屏幕上。

ii.) 我写了几行，但后来我删掉了，因为我写的让我生气。很抱歉没有表现出我的努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:55:05.450

看看haskell的`Data.IntMap`。它是 [Patricia trie](http://en.wikipedia.org/wiki/Patricia_tree)的纯粹功能实现，它的[源代码](http://hackage.haskell.org/packages/archive/containers/0.4.2.1/doc/html/src/Data-IntMap.html#IntMap)非常易读。
[bytestring-trie](http://hackage.haskell.org/package/bytestring-trie)包将这种方法扩展到`ByteStrings`

随附的论文[Fast Mergeable Integer Maps](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.49.1481)也是可读的。它逐步描述了实现：从二进制尝试到大端帕特里夏树。
这是论文的一小部分摘录。

> 最简单的二叉树是一棵深度等于键中位数的完全二叉树，其中每个叶子要么是空的，表示对应的键是未绑定的，要么是满的，在这种情况下，它包含要对应的键是绑定的。这种风格的 trie 可能在标准 ML 中表示为
> 
> ```
> datatype 'a Dict =
>     Empty
>   | Lf of 'a
>   | Br of 'a Dict * 'a Dict 
> ```
> 
> 为了在二叉树中查找一个值，我们只需读取键的位，按照指示向左或向右，直到到达叶子。
> 
> ```
> fun lookup (k, Empty) = NONE
>   | lookup (k, Lf x) = SOME x
>   | lookup (k, Br (t0,t1)) =
>       if even k then lookup (k div 2, t0)
>                 else lookup (k div 2, t1) 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T09:53:30.183

不可变数据结构实现的关键点是数据**和结构的****共享**。要更新一个对象，您应该使用尽可能多的共享节点创建它的新版本。具体来说，可以使用以下方法进行尝试。

 **考虑这样一个 trie（来自[Wikipedia](http://en.wikipedia.org/wiki/Trie)）：

![在此处输入图像描述](../Images/91c4ca7955d4aa815261638bc6dc1cba.png)

想象一下，您还没有添加单词“inn”，但您已经添加了单词“in”。要添加“inn”，您必须创建整个 trie 的新实例，并添加“inn”。但是，您不必强制复制整个内容 - 您只能创建根节点（没有标签）和右班的新实例。新的根节点将指向新的右行，但指向**旧的其他分支**，因此每次更新时，大部分结构都与前一个状态共享。

但是，您的密钥可能很长，因此每次重新创建整个分支仍然既费时又费空间。为了减轻这种影响，您也可以在一个节点内共享结构。通常每个节点是所有可能结果的向量或映射（例如，在带有标签“te”的图片节点中，有 3 个结果——“a”、“d”和“n”）。不可变映射有很多实现（[Scala](https://github.com/scala/scala/blob/master/src/library/scala/collection/immutable/Map.scala)、[Clojure](http://code.google.com/p/clojure/source/search?q=APersistentMap&origq=APersistentMap&btnG=Search+Trunk)，请参阅它们的存储库以获取更多示例），并且 Clojure 还具有不可变向量（实际上是一棵树）的 出色[实现。](http://code.google.com/p/clojure/source/search?q=APersistentVector&origq=APersistentVector&btnG=Search+Trunk)

所有关于创建、更新和搜索结果尝试的操作都可以递归实现，没有任何可变状态。**

# c# - C#中List的二维数组？

> ID：10061286
> 
> 赞同：5
> 
> 时间：2012-04-08T07:50:16.953
> 
> 标签：c#, arrays, list

我只想在 c# 中获得一个 List 的二维数组。在我看来，下面应该有效，但它没有， List 的一维数组有效。我将 Unity3D 与 Mono 一起使用，但我认为这是与语言相关的问题。

```
List<MyType>[,] twoDArrayofList;//don't work, it's type is List<MyType>
List<MyType>[] oneDArrayofList;//it's works, the type is List<MyType> 
```

有谁知道怎么了？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T08:13:20.860

“不起作用”是什么意思？你遇到了什么错误？

我不了解 Mono（或 Unity3D），但我只是在 .NET 项目中尝试了以下操作并得到了我预期的结果：

```
List<string>[,] strings = new List<string>[2, 2];
strings[0, 0] = new List<string> { "One" };
strings[0, 1] = new List<string> { "Two" };
strings[1, 0] = new List<string> { "Three" };
strings[1, 1] = new List<string> { "Four" }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T15:18:55.673

这是一篇较旧的帖子，但它出现在我寻找类似答案的过程中。我发现创建字典而不是列表可以满足我的需求。您不能按索引进行迭代，但是如果您有一个离散列表并且正在迭代第一个字符串“Key”，则可以轻松获得第二个字符串“Value”。

这是一个带有示例的stackoverflow帖子： [在C#中迭代字典的最佳方法是什么？](https://stackoverflow.com/questions/141088/what-is-the-best-way-to-iterate-over-a-dictionary-in-c)

# c# - 应该同时使用 AppDomain.UnhandledException 和 Application.DispatcherUnhandledException 吗？

> ID：10061287
> 
> 赞同：37
> 
> 时间：2012-04-08T07:50:28.173
> 
> 标签：c#, wpf, exception-handling, uncaught-exception, uncaughtexceptionhandler

在阅读了一些关于 AppDomain.UnhandledException 和 Application.DispatcherUnhandledException 之间区别的优秀帖子之后，看来我应该同时处理这两个问题。这是因为用户更有可能从主 UI 线程（即 Application.DispatcherUnhandledException）引发的异常中恢复。正确的？

另外，我是否也应该让用户有机会为两者继续程序，或者只是 Application.DispatcherUnhandledException？

下面的示例代码同时处理 AppDomain.UnhandledException 和 Application.DispatcherUnhandledException，并且都为用户提供了在出现异常时尝试继续的选项。

[谢谢，下面的一些代码是从其他答案中提取的]

应用程序.xaml

```
<Application x:Class="MyProgram.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Startup="App_StartupUriEventHandler"
         Exit="App_ExitEventHandler"
         DispatcherUnhandledException="AppUI_DispatcherUnhandledException">
    <Application.Resources>
    </Application.Resources>
</Application> 
```

App.xaml.cs [已编辑]

```
/// <summary>
/// Add dispatcher for Appdomain.UnhandledException
/// </summary>
public App()
    : base()
{
    this.Dispatcher.UnhandledException += OnDispatcherUnhandledException;
}

/// <summary>
/// Catch unhandled exceptions thrown on the main UI thread and allow 
/// option for user to continue program. 
/// The OnDispatcherUnhandledException method below for AppDomain.UnhandledException will handle all other exceptions thrown by any thread.
/// </summary>
void AppUI_DispatcherUnhandledException(object sender, System.Windows.Threading.DispatcherUnhandledExceptionEventArgs e)
{
    if (e.Exception == null)
    {
        Application.Current.Shutdown();
        return;
    }
    string errorMessage = string.Format("An application error occurred. If this error occurs again there seems to be a serious bug in the application, and you better close it.\n\nError:{0}\n\nDo you want to continue?\n(if you click Yes you will continue with your work, if you click No the application will close)", e.Exception.Message);
    //insert code to log exception here
    if (MessageBox.Show(errorMessage, "Application User Interface Error", MessageBoxButton.YesNoCancel, MessageBoxImage.Error) == MessageBoxResult.No)
    {
        if (MessageBox.Show("WARNING: The application will close. Any changes will not be saved!\nDo you really want to close it?", "Close the application!", MessageBoxButton.YesNoCancel, MessageBoxImage.Warning) == MessageBoxResult.Yes)
        {
            Application.Current.Shutdown();
        }
    }
    e.Handled = true;
}

/// <summary>
/// Catch unhandled exceptions not thrown by the main UI thread.
/// The above AppUI_DispatcherUnhandledException method for DispatcherUnhandledException will only handle exceptions thrown by the main UI thread. 
/// Unhandled exceptions caught by this method typically terminate the runtime.
/// </summary>
void OnDispatcherUnhandledException(object sender, System.Windows.Threading.DispatcherUnhandledExceptionEventArgs e)
{
    string errorMessage = string.Format("An application error occurred. If this error occurs again there seems to be a serious bug in the application, and you better close it.\n\nError:{0}\n\nDo you want to continue?\n(if you click Yes you will continue with your work, if you click No the application will close)", e.Exception.Message);
    //insert code to log exception here
    if (MessageBox.Show(errorMessage, "Application UnhandledException Error", MessageBoxButton.YesNoCancel, MessageBoxImage.Error) == MessageBoxResult.No)
    {
        if (MessageBox.Show("WARNING: The application will close. Any changes will not be saved!\nDo you really want to close it?", "Close the application!", MessageBoxButton.YesNoCancel, MessageBoxImage.Warning) == MessageBoxResult.Yes)
        {
            Application.Current.Shutdown();
        }
    }
    e.Handled = true;
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-22T14:37:50.767

*   `AppDomain.CurrentDomain.UnhandledException`理论上可以捕获 appdomain 的所有线程上的所有异常。不过，我发现这非常不可靠。
*   `Application.Current.DispatcherUnhandledException`捕获 UI 线程上的所有异常。这似乎工作可靠，并将替换`AppDomain.CurrentDomain.UnhandledException`UI 线程上的处理程序（优先）。用于`e.Handled = true`保持应用程序运行。

*   为了在其他线程上捕获异常（在最好的情况下，它们在自己的线程上处理），我发现 System.Threading.Tasks.Task（仅 .NET 4.0 及更高版本）维护成本低。使用 方法处理任务中的异常`.ContinueWith(...,TaskContinuationOptions.OnlyOnFaulted)`。[有关详细信息，请参阅我的](https://stackoverflow.com/a/13007445/385995)答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T08:47:21.543

处理程序连接`AppDomain.UnhandledException`为：

```
AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException; 
```

但是我找不到在处理程序中标记为已处理的方法 - 所以无论你做什么，这似乎总是导致应用程序关闭。所以我不认为这很有用。

更好地处理`Application.Current.DispatcherUnhandledException`和测试`CommunicationObjectFaultedException`- 因为您可以通过重新初始化代理来从中恢复 - 就像您在初始连接时所做的那样。例如：

```
void Current_DispatcherUnhandledException(object sender, System.Windows.Threading.DispatcherUnhandledExceptionEventArgs e) {
    if (e.Exception is CommunicationObjectFaultedException) { //|| e.Exception is InvalidOperationException) {
        Reconnect();
        e.Handled = true;
    }
    else {
        MessageBox.Show(string.Format("An unexpected error has occured:\n{0}.\nThe application will close.", e.Exception));
        Application.Current.Shutdown();
    }
}

public bool Reconnect() {
    bool ok = false;
    MessageBoxResult result = MessageBox.Show("The connection to the server has been lost.  Try to reconnect?", "Connection lost", MessageBoxButton.YesNo);
    if (result == MessageBoxResult.Yes)
        ok = Initialize();
    if (!ok)
        Application.Current.Shutdown();
} 
```

其中 Initialize 具有您的初始代理实例化/连接代码。

在您上面发布的代码中，我怀疑您正在处理`DispatcherUnhandledException` **两次**- 通过在 xaml 和代码中连接处理程序。

# c# - 正在寻找一个 API 来利用 .NET 的 GPU 的强大功能

> ID：10061292
> 
> 赞同：7
> 
> 时间：2012-04-08T07:51:16.017
> 
> 标签：c#, .net, parallel-processing, gpu

我正在寻找一个很好的 API 用于在 GPU 上实现算法。我更喜欢相关简单和灵活的东西。我不是在寻找最核心的性能，而是在寻找我可以玩的东西。此外，我真的更喜欢适用于 Nvidia 和 ATI 卡的东西......

* * *

好的推荐，尤其是基于经验的推荐，可能会获得丰厚的回报。

* * *

目前我们正在讨论的算法是图像处理，即对非常大的矩阵进行相关的简单操作......

对我来说，我希望能够将 PLINQ 表达式带到 GPU，并且还有一个像 System.Threading.Tasks.Parallel 这样的 API，可以在 GPU 上执行东西......

我们主要处于初步探索阶段......

再次工作跨平台几乎是一个要求......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T07:57:16.693

有几种选择（尽管有时 ATI 与 nVidia 有所不同）：

*   [加速器](http://research.microsoft.com/en-us/projects/Accelerator/)
*   [GPU.NET](http://www.tidepowerd.com/)
*   [梵](http://brahma.ananthonline.net/)
*   [CUDAfy.NET](http://www.hybriddsp.com/Products/CUDAfyNET.aspx)（有关一篇不错的文章，请参见[此处](http://www.codeproject.com/Articles/289551/High-Performance-Queries-GPU-vs-PLINQ-vs-LINQ)）
*   [GLinq](http://blog.neteril.org/2010/06/18/tying-mono-and-opencl/)
*   [OpenCL.NET](http://www.hoopoe-cloud.com/Solutions/OpenCL.NET/Default.aspx)
*   [合流](http://code.google.com/p/conflux/)
*   [开放式TK](http://www.opentk.com/)
*   VS [2011 预览版 AMP](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/02/03/c-amp-open-spec-published.aspx) - 参见[此处](http://blogs.msdn.com/b/pfxteam/archive/2011/09/21/10214538.aspx)、[此处](http://blogs.msdn.com/b/pfxteam/archive/2011/11/12/10236375.aspx)和[此处](http://blogs.msdn.com/b/nativeconcurrency/archive/2011/09/19/vs-11-developer-preview-gotchas-with-c-amp.aspx)

根据评论：

从这个问题很难给出任何建议，因为一些相关方面，比如算法很容易通过 LINQ 表达吗？.NET 集成应该走多远？等问题对我来说基本上不清楚......以上只是当前可用技术的列表，可通过 .NET 使用 GPU 进行计算工作。

如果需要推荐，请提供有关您要实施的类型开发/项目的更多详细信息...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T23:27:52.863

除了其他答案中提到的其他项目，我认为值得一提的是[Cloo](http://sourceforge.net/projects/cloo/)项目，它是 OpenCL 的开源面向对象的 .NET 包装器。

# java - Java profiling Permgen：如何在 java 类中卸载枚举

> ID：10061295
> 
> 赞同：2
> 
> 时间：2012-04-08T07:51:57.503
> 
> 标签：java, profiling, permgen

我在一个地方，服务器（tomcat）上相同的war文件的重复部署-取消部署操作导致PermGen OutOfMemoryError。我的目标是确保在未部署战争时卸载所有类。

这是我的一堂课：

```
public class ClassA {
//static variables & methods
//instance variables & methods

    private EnumInsideClassA myState = EnumInsideClassA.VALUE1;

    private enum EnumInsideClassA
    {
        VALUE1,
        VALUE2
    }
} 
```

当我清除 ClassA 的所有引用时，我看不到 ClassA，并且在取消部署战争时将其卸载。但是，我仍然看到枚举引用并且 ClassA$EnumInsideClassA 没有被卸载。

'myState' 实例变量没有 getter，它只会与 ClassA 一起使用

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:29:50.060

> 但是，我仍然看到枚举引用并且 ClassA$EnumInsideClassA 没有被卸载。

如果您可以看到`enum`参考资料，您应该能够看到它们在哪里。现在将有一些枚举引用可通过枚举类的隐藏静态字段访问，但这些应该是循环引用并且不应该导致`enum`保持可访问。看看`enum`其他地方有没有参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T19:48:58.440

问题似乎是类加载器没有卸载枚举实例。我有一个测试 servlet 项目，它只有一个枚举。它也不必是私有或内部类枚举，但它确实需要至少被引用一次，以便创建实例。jvm 似乎没有将枚举视为任何特殊的东西，这似乎是真的。我在静态实例中看到了同样的问题（即自定义类的静态实例在类加载器卸载时没有得到垃圾收集）。

我尝试了各种 -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled 都没有成功。这可能是 JVM 特定的（我在 Mac OS X 上，他们似乎没有这些选项，但 -Xincgc 也不起作用：http: [//developer.apple.com/library/mac/#documentation /Java/Reference/Java_VMOptionsRef/Articles/JavaVirtualMachineOptions.html](http://developer.apple.com/library/mac/#documentation/Java/Reference/Java_VMOptionsRef/Articles/JavaVirtualMachineOptions.html)）。有很多关于 stackoverflow 的信息，例如[处理“java.lang.OutOfMemoryError: PermGen space”错误](https://stackoverflow.com/questions/88235/how-to-deal-with-java-lang-outofmemoryerror-permgen-space-error)

可能对这个特定问题（servlet 重新部署）的最佳解决方法是将所有枚举放在一个不需要卸载的 jar 中。

FIY：我的环境是 Mac OS X 10.6.8，Java 1.6.0_31

# xcode4 - XCode 4 IB：看不到边界或几何。拖动 = 猜测

> ID：10061297
> 
> 赞同：0
> 
> 时间：2012-04-08T07:52:15.767
> 
> 标签：xcode4, interface-builder

我不确定我做了什么，但今天我无法在 Xcode 4.3.2 中看到对象的边界。

有谁知道怎么回事？我不确定我是否不小心按下了热键或其他东西……我可以调整大小，但看不到大小或我选择的内容。如果我输入静态文本字段，则没有文本指示符。我盲目地输入并按回车键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:38:06.727

显然 NSImageCells 重叠了所有的约束。只需将它移到层次结构的后面，一切都会好起来的。

# regex - 忽略正则表达式中的 br、b、strong 和 i html 标记

> ID：10061299
> 
> 赞同：0
> 
> 时间：2012-04-08T07:52:51.920
> 
> 标签：regex

我希望从 html 中提取超过 100 个字符的文本。文本可以在任何一组标签之间，忽略 br、b、strong 和 i 标签。

`<([^>]+)>[^<]{100,})<\1>`几乎是对的，但它在所有标签处都停止了

我需要它停在除所述标签之外的任何标签上。

```
<([^>]+)>

if not < and not (<b|<i|<strong|<br)

{100,}

<\1> 
```

我不知道该怎么做，但这大致就是我所追求的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:38:20.403

如果我正确理解问题。

原始压缩正则表达式 -

```
(?!</?(?:b|i|strong|br)\s*(?:\s(?:".*?"|'.*?'|[^>]*?)+)?/?>)<([A-Za-z_:][\w:.-]*)\s*(?>\s(?:".*?"|'.*?'|[^>]*?)+>|>)(?<!/>)((?:</?(?:b|i|strong|br)\s*(?:\s(?:".*?"|'.*?'|[^>]*?)+)?/?>|(?!</?[A-Za-z_:][\w:.-]*\s*(?:\s(?:".*?"|'.*?'|[^>]*?)+)?/?>).){100,})</\1\s*> 
```

Perl 测试用例，正则表达式在 PHP 中工作。
此测试用例使用此网页的源代码。
它在**数据**部分被剥离。

```
$rx = qr~
# ----------------
# Begin REGEX
# ----------------

         # - - - - - Exclude these tags - - - - -
(?!</?(?:b|i|strong|br)\s*(?:\s(?:".*?"|'.*?'|[^>]*?)+)?/?>)

         # - - - - - Open tags - - - - -
<
  ([A-Za-z_:][\w:.-]*)
    \s*
  (?>
    \s(?:".*?"|'.*?'|[^>]*?)+ > | >
  )
  (?<!/>)
         # - - - - - Data - - - - -
(
  (?:
      </? (?: b | i | strong | br)  \s* (?:\s(?:".*?"|'.*?'|[^>]*?)+)? /?>
    | (?! </? [A-Za-z_:][\w:.-]* \s* (?:\s(?:".*?"|'.*?'|[^>]*?)+)? /?> )
      .
  ){100,}
)
         # - - - - - Closing tag - - - - -
</\1\s*>

# ----------------
# End REGEX, Options:  expanded, dot '.' includes newline
# ----------------
~xs;

$/ = undef;
$str = <DATA>;

while ($str =~ /$rx/g)
{
   print "\n----------------------\n";
   print "Tag  = $1\n";
   print "data = $2\n\n";
}

__DATA__

<!DOCTYPE html>
<html>
...
</html> 
```

输出 - 这是从 80 列控制台剪切和粘贴的。

```
----------------------
Tag  = p
data = I am looking to extract text longer than 100 characters from html. The te
xt can be between any set of tags, ignoring br, b, strong and i tags.

----------------------
Tag  = span
data = I am using PHP, my experience was the html parsers do not like invalid ht
ml and html I am working on is horrendous

----------------------
Tag  = span
data = You can replace occurrences of the said tags with empty string, that woul
d simplify things, would it not?...

----------------------
Tag  = span
data = I do still need the tags... but maybe i could use place holders like &lt;
br&gt; = %br or similar. That might work....

----------------------
Tag  = script
data =
                StackExchange.ready(function () {
                    StackExchange.helpers.onClickDraftSave('#login-link');
                });

----------------------
Tag  = script
data =
        window.showNewUser = true;

                (function(){
                    var cs = window.sessionStorage && window.sessionStorage['tNe
wsletter'];
                    var m = /:\/\/([^\/]*)/.exec(document.referrer);
                    var h = {'www.reddit.com':1,'news.ycombinator.com':1};
                    if(window.sessionStorage && (cs || (m && m.length == 2 && h[
m[1]]))){
                        showNewUser = false;
                        StackExchange.ready(function(){
                            StackExchange.newsletterAd.loader(m[1], cs);
                        });
                    }
                    if (window.localStorage && showNewUser){
                        var c = parseInt(localStorage['nuCounter'],10);
                        c = isNaN(c) ? 1 : c+1;
                        window.localStorage['nuCounter'] = c;
                        showNewUser = c < 10;
                    }
                })()

----------------------
Tag  = p
data = This is a collaboratively edited question and answer site for <b>professi
onal and enthusiast programmers</b>. It's 100% free, no registration required.

----------------------
Tag  = script
data =
        if (showNewUser) {
            document.getElementById('newuser-box').style.display = '';
        }

----------------------
Tag  = script
data =
            var scriptSrc = "http://engine2.adzerk.net/z/8277/adzerk1_2_4_43,adz
erk2_2_17_45?keywords=regex";
            if (document.referrer) {
                if (/\?/.test(scriptSrc))
                    scriptSrc += "&";
                else
                    scriptSrc += "?";
                scriptSrc += "xReferrer=" + document.referrer;
            }
            StackExchange.ready(function(){var z = document.createElement("scrip
t"); z.type = "text/javascript"; z.async = "true"; z.src = scriptSrc; var s = do
cument.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);});

----------------------
Tag  = script
data =
            var careers_adurl="http://careers.stackoverflow.com/ad/js",careers_c
ssurl="http://cdn.sstatic.net/careers/ads/sidebar.min.css?363c15",careers_leader
boardcssurl="http://cdn.sstatic.net/careers/ads/ninja.min.css?363c15",careers_co
mpanycssurl="http://cdn.sstatic.net/careers/ads/company",careers_adselector="div
.hireme, div#hireme";StackExchange.ready(function(){$.ajax({url:"http://cdn.ssta
tic.net/careers/ads/adloader.min.js?363c15",dataType:"script",cache:true})});

----------------------
Tag  = script
data = var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-5620270-1']);
        _gaq.push(['_setCustomVar', 1, 'tags', '|regex|']);
_gaq.push(['_trackPageview']);
    var _qevents = _qevents || [];
    (function(){
        var s=document.getElementsByTagName('script')[0];
        var ga=document.createElement('script');
        ga.type='text/javascript';
        ga.async=true;
        ga.src='http://www.google-analytics.com/ga.js';
        s.parentNode.insertBefore(ga,s);
        var sc=document.createElement('script');
        sc.type='text/javascript';
        sc.async=true;
        sc.src='http://edge.quantserve.com/quant.js';
        s.parentNode.insertBefore(sc,s);
    })();

----------------------
Tag  = script
data =

        StackExchange.ready(function () {

            StackExchange.question.init({showAnswerHelp:true,totalCommentCount:5
,shownCommentCount:5,highlightColor:'#F4A83D',backgroundColor:'#FFF',questionId:
10061299});

            styleCode();

                StackExchange.realtime.subscribeToQuestion('1', '10061299');
        });

----------------------
Tag  = script
data =
        StackExchange.init({"stackAuthUrl":"https://stackauth.com","serverTime":
1333905762,"styleCode":true,"enableUserHovercards":true,"site":{"name":"Stack Ov
erflow","description":"Q&A for professional and enthusiast programmers"},"user":
{"isAnonymous":true,"fkey":"cabcf78a4b0938630036bcdce8d1268d","hasNewMessages":n
ull,"inboxUnviewedCount":-1}});
        StackExchange.using.setCacheBreakers({"js/prettify-full.js":"4ed9aa4b8d0
e","js/moderator.js":"f57f00dcb1ac","js/full-anon.js":"7f2dec862ddc","js/full.js
":"df7d7ab85566","js/wmd.js":"78027d6539c8","js/third-party/jquery.autocomplete.
min.js":"e5f01e97f7c3","js/mobile.js":"3b13ff9fd1f2","js/help.js":"fc9fb0517db2"
,"js/tageditor.js":"c1ba807b32aa","js/tageditornew.js":"bd66fabe1c71","js/inline
-tag-editing.js":"be882e188985","js/revisions.js":"8c6bcd93b7fe","js/suggested-e
dits.js":"7f24e342d359","js/probes.js":"beb933322ff0"});

----------------------
Tag  = script
data =
        StackExchange.ready(function () {
            var shareUrl = 'http%3a%2f%2fstackoverflow.com%2fq%2f10061299';
            var shareMsg = 'Ignore+br%2c+b%2c+strong+and+i+html+tags+in+regex';

            StackExchange.share.gplus($('#gp-share-10061299'), shareUrl, shareMs
g) ;
            StackExchange.share.facebook($('#fb-share-10061299'), shareUrl, shar
eMsg);
            StackExchange.share.twitter($('#twitter-share-10061299'), shareUrl,
shareMsg);
        });

----------------------
Tag  = script
data =
    StackExchange.ready(function() {
        initTagRenderer("".split(" "), "".split(" "));

        prepareEditor({
            heartbeatType: 'answer',
            bindNavPrevention: true,
            postfix: "",
            onDemand: true,
            discardSelector: ".discard-answer"
            ,immediatelyShowMarkdownHelp:true
        });

    }); 
```

# ruby - Jekyll 忽略了帖子中的 Liquid 标签

> ID：10061301
> 
> 赞同：7
> 
> 时间：2012-04-08T07:53:52.683
> 
> 标签：ruby, markdown, jekyll, liquid, pygments

我是**Jekyll**，**Liquid**和**Ruby**的新手，如果我真的很愚蠢，我很抱歉。Jekyll 似乎忽略了任何带有帖子的液体标签（在 _posts 目录下），这导致输出如下所示。这些帖子都采用 Markdown 格式，并且都包含 YAML 标记。

```
{% highlight scss %} .noisy { @include noise(#00f); } {% endhighlight %} 
```

我已经测试过，添加的不只是**Pygments**失败，`{{ post.title }}`也未解析。[查看 Github 上的代码](https://github.com/nathggns/Blog/tree/design)

老实说，我不知道我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T08:10:16.943

> 看来我已经弄清楚了我的问题。我`{{ page.content }}`在我的 post.html 中使用，而不仅仅是`{{ content }}`.

[在 Jekyll/Liquid 和 pygments 的 html 问题中突出显示](https://stackoverflow.com/q/8863058/highlight-in-html-issue-with-jekyll-liquid-an)

* * *

它是`page.title`

[模板数据 · mojombo/jekyll Wiki](http://github.com/mojombo/jekyll/wiki/template-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:03:06.577

我不太确定为什么这不起作用。您的 for 循环在 index.html 中是否正常工作？

这可能会有所帮助：[https ://github.com/Shopify/liquid/wiki/Liquid-for-Designers](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)

# iphone - 控制台错误：未能找到 PDF 标题：未找到“%PDF”

> ID：10061303
> 
> 赞同：4
> 
> 时间：2012-04-08T07:53:53.957
> 
> 标签：iphone, objective-c, ios, xcode, ipad

当我尝试打印当前屏幕截图（对于 iPad 视图）时，我在控制台窗口中收到了这个奇怪的错误： `failed to find PDF header: %PDF not found`.

我想知道为什么在控制台窗口中会触发此错误？为什么它提到了一些相关的东西，尽管我在整个项目中`PDF`没有使用任何相关的东西。`PDF`

我用来打印屏幕截图的代码是：

```
 - (IBAction)print:(id)sender {

    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, [UIScreen mainScreen].scale);
     else
         UIGraphicsBeginImageContext(self.view.bounds.size);

     [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

     UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

     UIGraphicsEndImageContext();

    //saving the file to documents directory

     NSData * imageData = UIImagePNGRepresentation(viewImage);
     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     NSString *documentsDirectory = [paths objectAtIndex:0];
     documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"Screenshot.png"];
     [imageData writeToFile:documentsDirectory atomically:YES];

     NSString *myFilePath = [documentsDirectory stringByAppendingPathComponent:@"Screenshot.png"];
    UIImage *screenShot = [UIImage imageWithData:imageData];
    NSData *myData = [NSData dataWithData:UIImagePNGRepresentation(screenShot)];

     self.pic = [UIPrintInteractionController sharedPrintController];
      if (self.pic && [UIPrintInteractionController canPrintData:myData] ) {

         self.pic.delegate = self;

        //filling up print info
         UIPrintInfo *printInfo = [UIPrintInfo printInfo];
         printInfo.outputType = UIPrintInfoOutputGeneral;
         printInfo.jobName = [myFilePath lastPathComponent];
         printInfo.duplex = UIPrintInfoDuplexLongEdge;
         self.pic.printInfo = printInfo;

         self.pic.showsPageRange = YES;
         self.pic.printingItem = myData;

        void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =
         ^(UIPrintInteractionController *pic, BOOL completed, NSError *error) {

             if (!completed && error)
                 NSLog(@"FAILED! due to error in domain %@ with error code %u",
                                      error.domain, error.code);
             };

        [self.pic presentFromRect:self.printButton.frame inView:self.view animated:YES completionHandler: completionHandler];    // iPad

        }

    } 
```

文件路径（Screenshot.png）正确，正确保存到documents目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:01:27.110

确切地知道哪一行导致该控制台输出会有所帮助。您可以在调试器中单步执行以找出答案。

我的猜测是，这是对`-[UIPrintInteractionController canPrintData:]`. 如果您阅读[该方法的文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIPrintInteractionController_Class/Reference/Reference.html#//apple_ref/occ/clm/UIPrintInteractionController/canPrintData%3a)，您会发现它必须检查该数据是否包含 PDF。看起来它尝试并失败，沿途打印一条消息。

由于通常没有最终用户观看 iOS 控制台，因此这不是一个非常重要的错误，显然不足以让 Apple 修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T22:07:07.993

这也发生在我身上。我检查了每一行，发现这是因为您正在打印数据。如果你直接打印图像，这个奇怪的警告就会消失。因为来自 Apple 的 UIPrintInteractionController 框架文件：

```
@NSCopying public var printingItem: AnyObject? // single NSData, NSURL, UIImage, ALAsset 
```

printItem 可以是上述四种类型中的任何一种。我的猜测是 Apple 默认将数据作为 PDF 数据，显然，这不是您从 UIImage 生成的数据中的标题数据。

# swing - JTable单元格内的JComponents占用单元格大小

> ID：10061312
> 
> 赞同：0
> 
> 时间：2012-04-08T07:55:06.043
> 
> 标签：swing, jtable, jcomponent

我一直致力于通过在 JTable 单元中拖放 n 个组件来开发使用 JTable 和其他摆动组件的结构等表单。除了 JTable 单元格中的 JComponents 占据整个单元格之外，一切都运行顺利，即使为 JComponent 定义了最大大小也是如此。如果 JTable 存在于 JTable 单元中并且存在于其他单元中的某些其他组件，这会使 GUI 看起来很笨拙。

请问有人之前遇到过这种问题吗？如果您需要更多信息，请告诉我。

谢谢

# php - Dwolla API - 请求钱不与汇款链接？

> ID：10061321
> 
> 赞同：0
> 
> 时间：2012-04-08T07:57:49.523
> 
> 标签：php, dwolla

```
1) Your app request money from user via API
2) User receives an notification
3) User pays for request money via API 
```

但是 dwolla 怎么知道用户正在为 requestmoney 交易付款或进行全新的付款？

Send 没有对“请求”API 进行任何引用。

[https://www.dwolla.com/developers/endpoints/transactions/send](https://www.dwolla.com/developers/endpoints/transactions/send)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:44:31.180

这个问题已经有一段时间了，自从它最初发布以来，Dwolla 在他们的 API 中引入了一些额外的功能，这正是你在某些用例中寻找的功能。

您可能正在寻找*完成*方法（[docs](http://developers.dwolla.com/dev/docs/requests/fulfill)）？当使用适当的访问令牌调用时，它将尝试完成给定的请求，并使用相关支付的请求 ID 和交易 ID 进行响应。

# c - 如何编写从汇编代码调用的 C 函数

> ID：10061324
> 
> 赞同：3
> 
> 时间：2012-04-08T07:58:34.037
> 
> 标签：c, assembly, linux-kernel, inline-assembly

我需要编写一个 C 函数，该函数将从 linux 内核中的汇编代码中调用。

应该注意哪些特殊问题？

我有一些想法，但任何人都可以提供更多细节：

**(1) 调用约定**

确保汇编中的调用者和 c 中的被调用者握手良好。但是我应该使用哪种调用约定？如何声明 c 函数并在汇编代码中声明它？

**(2) 保护寄存器**

在调用之前，一些寄存器应该保存在程序集中。我大致记得它们是eax，ecx和edx。但是我不必保存它们，除非我需要在调用 C 函数之前引用旧值，对吧？

还有哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:01:08.087

当您的任务标记为`linux-kernel`查看以下内核头文件时：[arch/x86/include/asm/calling.h](http://lxr.linux.no/linux+v3.3.1/arch/x86/include/asm/calling.h#L1)。

```
 3 x86 function call convention, 64-bit:
   4 -------------------------------------
   5  arguments           |  callee-saved      | extra caller-saved | return
   6 [callee-clobbered]   |                    | [callee-clobbered] |
   7 ---------------------------------------------------------------------------
   8 rdi rsi rdx rcx r8-9 | rbx rbp [*] r12-15 | r10-11             | rax, rdx [**]
   9
  10 ( rsp is obviously invariant across normal function calls. (gcc can 'merge'
  11   functions when it sees tail-call optimization possibilities) rflags is
  12   clobbered. Leftover arguments are passed over the stack frame.)
  13
  14 [*]  In the frame-pointers case rbp is fixed to the stack frame.
  15
  16 [**] for struct return values wider than 64 bits the return convention is a
  17      bit more complex: up to 128 bits width we return small structures
  18      straight in rax, rdx. For structures larger than that (3 words or
  19      larger) the caller puts a pointer to an on-stack return struct
  20      [allocated in the caller's stack frame] into the first argument - i.e.
  21      into rdi. All other arguments shift up by one in this case.
  22      Fortunately this case is rare in the kernel.
  23
  24 For 32-bit we have the following conventions - kernel is built with
  25 -mregparm=3 and -freg-struct-return:
  26
  27 x86 function calling convention, 32-bit:
  28 ----------------------------------------
  29  arguments         | callee-saved        | extra caller-saved | return
  30 [callee-clobbered] |                     | [callee-clobbered] |
  31 -------------------------------------------------------------------------
  32 eax edx ecx        | ebx edi esi ebp [*] | <none>             | eax, edx [**]
  33
  34 ( here too esp is obviously invariant across normal function calls. eflags
  35   is clobbered. Leftover arguments are passed over the stack frame. )
  36
  37 [*]  In the frame-pointers case ebp is fixed to the stack frame.
  38
  39 [**] We build with -freg-struct-return, which on 32-bit means similar
  40      semantics as on 64-bit: edx can be used for a second return value
  41      (i.e. covering integer and structure sizes up to 64 bits) - after that
  42      it gets more complex and more expensive: 3-word or larger struct returns
  43      get done in the caller's frame and the pointer to the return struct goes
  44      into regparm0, i.e. eax - the other arguments shift up and the
  45      function's register parameters degenerate to regparm=2 in essence. 
```

# php - 将多个同名输入插入到一个数组 [row] 中（以“^”分隔）

> ID：10061331
> 
> 赞同：0
> 
> 时间：2012-04-08T07:59:46.427
> 
> 标签：php, mysql

我有多个输入（从不一样，因为它是一个动态的添加/删除 jquery 脚本，这完全取决于用户想要输入多少“轨道”）。我永远不知道会有多少人在那里。下面是如果用户选择将四个“曲目”添加到他们的“混音带”的示例。

```
<input size="32" class="mixtapetrack" type="textbox" id="track[1]" name="track[]" >
<input size="32" class="mixtapetrack" type="textbox" id="track[2]" name="track[]" >
<input size="32" class="mixtapetrack" type="textbox" id="track[3]" name="track[]" >
<input size="32" class="mixtapetrack" type="textbox" id="track[4]" name="track[]" > 
```

提交表单（PHP POSTED）时，我想获取所有输入并将它们组合成一个数组，但用**"^^^"**将它们全部分开。

* * *

这是我到目前为止所拥有的，用于渲染输入（不工作）。

```
$trackVAR = $_POST['track'];

         $allmixtapetracks = "";

         foreach ($trackVAR as $value) {

    $allmixtapetracks .= '' . $value . '^';
  } 
```

这就是我用来插入我的表的内容（WORKS，在没有变量的情况下对其进行了测试并输入了绝对数据）

```
$sql = mysql_query("INSERT INTO mixtapes (title, songs, posted_by_id, description, date) 
     VALUES('$mixtapetitle','$allmixtapetracks','$posted_by_id','$mixtapedescription', now())")  
     or die (mysql_error()); 
```

* * *

最后，我希望它在歌曲行中看起来像这样

> 第一首歌的标题哈哈**^^^**第二首歌的标题！！！**^^^**第三次的标题！**^^^**和第四个的标题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:03:10.690

利用[`implode()`](http://php.net/implode)

```
echo implode($trackVAR, " ^^^ "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:07:30.113

替换您的以下代码：

```
$trackVAR = $_POST['track'];

$allmixtapetracks = "";

foreach ($trackVAR as $value) {
    $allmixtapetracks .= '' . $value . '^';
} 
```

有了这个：

```
$allmixtapetracks=implode('^^^',$_POST['track']); 
```

# c++ - C++：星号、& 和星号？

> ID：10061332
> 
> 赞同：8
> 
> 时间：2012-04-08T07:59:48.747
> 
> 标签：c++, operators

最近我看到了这个关于[编程范式](http://www.youtube.com/watch?v=jTSvthW34GU)和教授的视频。使用星号、星号和 & 符号等术语。

这就是他使用这些运算符的方式：

```
int i = 37;
float f = *(float*)&i; 
```

以及他在写作时如何表达第 2 行：

> 浮点“f”等于星号浮点星，i 的 & 符号

我明白星号和＆符号的含义，但是在这里使用星号有什么意义？它是星号的同义词吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T09:48:58.040

`*`之后`float`用于形成类型。很多时候，当用文字提到指针类型时，人们会在类型之后说“星”而不是“指针”，例如。“malloc 返回一个空星”。我从未听说过有人使用“星号”来指代类型。

`*`at start 用于取消引用指针，从而访问它指向的值（解释为 a由于`float`以下转换）。同样，根据我自己的经验，我从未听说有人在这里使用“星号”。人们只是倾向于说“取消引用”来描述正在执行的操作。

我不会读太多。正如您正确地发现的那样，这里有两种不同的上下文，只要您从 C++ 的角度理解它们的含义，就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T08:11:39.750

```
float f = *(float*)&i; 
```

在这种情况下，左 * 和右 * 具有不同的语义。左 * 表示通过引用获取值。右 * 声明引用类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T08:23:46.787

> 它是星号的同义词吗？

是的。Shift+8 在**我**的windows 键盘上。您的示例演示了为什么您不应该尝试逐个符号地大声朗读 C++ 程序。C++ 中的“等于”是“==”。“=”是赋值。另外，他忘了告诉括号和分号。在这一点上（单行代码中有 4 个错误），他本可以默默地写下这该死的东西。

如果老兄读这部分会好得多：

```
float f = *(float*)&i; 
```

有点像这样：

*“获取指向 i 的指针，C 风格将其转换为指向浮点的指针、取消引用并将值赋给浮点变量 f”*。“星号/星号”胡言乱语更有意义。

PS如果你真的喜欢绕口令，你可以试着大声朗读任何使用boost、iostream、运算符<<、强制转换、按位运算和“驼峰式”来区分类和方法的代码。当然，这样的练习不会提高你的编程技能……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T08:04:00.083

我认为演示者只是想在编写代码时避免尴尬的沉默。据我所知，在这种情况下，星号和星号没有区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-03T11:42:23.260

&参数=打印地址

& type = ref() ：这意味着我希望这个人的新名字不重复。

* 参数 = 从此地址获取值

* 类型 = 存储地址（指针变量）

# ruby-on-rails - Ruby on Rails 2.3 从表单参数填充和验证非 AR 模型

> ID：10061333
> 
> 赞同：0
> 
> 时间：2012-04-08T08:00:10.583
> 
> 标签：ruby-on-rails, validation, activerecord

我有一个 ActiveRecord 模型，其中包含一个序列化字段，该字段由一个自定义非 ActiveRecord 模型（一个简单的类，具有几个属性）的数组组成。

我试图找出一种方法将每个序列化项目的填充和验证与父模型集成在一起，但找不到这样做的优雅方法。

序列化模型“initialize”方法接收“attributes”哈希，并简单地用这些填充类属性。这很好，除了从表单接收数据时，数据作为字符串数据而不是实际类型接收。ActiveRecord 模型知道如何处理这个问题，并在模型实例保存到数据库之前根据 Schema 进行类型转换。我能做些什么（除了在“初始化”方法中进行类型转换）来使行为类似于 AR 模型吗？

此外，我正在尝试使用“Validatable”gem 来验证我的 NON AR 模型，但似乎有些验证无法在那里定义，例如使用“validates_numericality_of”并定义数字大于 0 时。

有一个“if”参数可以传递给它，但它发生在数值检查之前，然后在执行时发生：

```
validates_numericality_of :price, :if => lambda { self.price >= 0.0 }, :message => "Price must be greater or equal to 0" 
```

如果我在“价格”字段中输入了一个字符串，当我尝试检查模型是否有效时，我会抛出一个异常，因为“价格”是一个字符串，我正在尝试将它与一个数字进行比较......

希望没关系我在一个线程中问了两个问题......但它们有点相关。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:13:25.150

你试过`self.price.to_i`吗？

# asp.net - 如何使用我的查询在 asp.net web.config 文件中创建角色？

> ID：10061335
> 
> 赞同：0
> 
> 时间：2012-04-08T08:00:18.170
> 
> 标签：asp.net, visual-studio-2008, web-config, roles, membership

处理所有我有一个查询如何编写 web.config 文件来执行我下面提到的操作：

我在我的 asp.net 网站中有目录，即在 BOSS 目录中的 BOSS 我有 IMAGE 目录...

我只允许管理员直接访问 BOSS，但我希望我网站的所有用户（包括匿名用户）都可以访问 BOSS 内的目录图像。

如何做到这一点...我为 BOSS 目录创建了一个管理员角色：

```
<location path="boss">
    <system.web>
      <authorization>
        <allow roles="admin"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:51:17.103

除了这听起来有点奇怪的设置之外，由于您试图让文件夹中的文件具有比文件夹父文件夹更少的访问权限，我很确定这是不可能的。

我会尝试更改您网站的文件夹布局，以便您无需提供此设置。

# java - 学习Java和Solr的好Java资源

> ID：10061336
> 
> 赞同：1
> 
> 时间：2012-04-08T08:00:29.917
> 
> 标签：java, solr

我对 java 完全陌生，我正在使用 Solr 搜索服务器。碰巧我必须学习 java 才能为我的应用程序自定义 Solr。有没有人有一个好的建议，最好的起点是哪里？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T08:20:50.983

可能不需要了解 Java 即可使用 Solr 并使用它，除非您想检查实际的代码库并想修改它或添加扩展。
一旦您的设置正常工作，还有很多客户端可以在 Ruby、PHP 中与 Solr 一起使用。
除了@peter_budo 的书籍，对于 Solr 及其配置，您还可以开始使用Lucid Imagination 的[Solr 指南](http://www.lucidimagination.com/devzone/references/solr-guide)。这会让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T09:51:38.470

这个问题非常笼统，实际上取决于您的背景和愿望以及您的组织:)

如果您是开发人员并且想要修改 Solr 代码，那么如果您对信息检索有所了解会更好（尽管不是强制性的），因此作为第一步，您应该了解什么是倒排索引，什么是数据结构用于倒排索引，布尔查询如何评估，查询形成树的样子等。这不仅会让您对 Solr 有很好的理解，而且明天您将在市场上有另一个搜索引擎 XYZ，您将很快能够适应它。

如果您想在 Solr 管理方面有所作为，而不是像 Solr 3.1 Cookbook 和 Apache Solr 3 Enterprise Search Server 这样的书籍（请注意，无论您是用户、开发人员还是管理员，这些书籍都将适用于各种场景）加上实用在处理内存错误、堆问题、尝试各种合并因子组合、autocmmits 等时，经验最重要。

再次根据您关于 Java 的其他问题，这再次取决于您的编程背景，即您是来自 C++ 还是说 Python 等等。如果您已经是 C++/C# 程序员，那么 Java 对您来说是小菜一碟。在这种情况下，只需稍微了解 Solr 并开始编码，而不是将时间浪费在 Java 书籍上（同样，如果您将时间浪费在 Java 书籍上并首先学习 Java 并依次转到 Solr，这将是一件好事，这取决于时间你有）如果你是 Python 或 Haskell 程序员，你必须学习 Java。在这种特殊情况下，Head First Java 将是他最好的书，可以快速使用 Java，比如最多一周或两周，然后您可以从 Solr 开始。

学习 Solr 时要添加的另一件事不是 Java，您还必须了解一些关于您正在使用的 servlet 容器的知识。

我的最后一个建议（恕我直言），不要去学习工具和 API，研究这些工具背后的科学和工程（正如我提到的信息检索）和语言（了解更多关于独立于语言的基本算法和数据结构），然后自动无论是 Solr 还是 Sphinx，C++ 还是 Java，它们都将成为你的奴隶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T08:08:34.980

更详细的[Apache Solr 3 Enterprise Search Server](http://www.packtpub.com/apache-solr-3-enterprise-search-server/book)或食谱（或问题解决驱动的学习方法）[Apache Solr 3.1 Cookbook](http://www.packtpub.com/solr-3-1-enterprise-search-server-cookbook/book)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T08:25:14.817

Solr wiki 资源页面[http://wiki.apache.org/solr/SolrResources](http://wiki.apache.org/solr/SolrResources)是最好的起点。如果您有更多问题，也可以使用 lucene/solr 邮件列表。

# matlab - MATLAB 错误：未为类 'struct' 的值定义函数 'subsindex'

> ID：10061337
> 
> 赞同：7
> 
> 时间：2012-04-08T08:00:45.900
> 
> 标签：matlab

我尝试了这些命令：

```
im=imread('untitled_test1.jpg');
im1=rgb2gray(im);
im1=medfilt2(im1,[15 15]);
BW = edge(im1,'sobel'); 

msk=[0 0 0 0 0;
 0 1 1 1 0;
 0 1 1 1 0;
 0 1 1 1 0;
 0 0 0 0 0;];
B=conv2(double(BW),double(msk));

Ibw = im2bw(B);
CC = bwconncomp(Ibw); %Ibw is my binary image
stats = regionprops(CC,'pixellist');

% pass all over the stats
for i=1:length(stats),
size = length(stats(i).PixelList);
% check only the relevant stats (the black ellipses)
if size >150 && size < 600 
    % fill the black pixel by white    

    x = round(mean(stats(i).PixelList(:,2)));
    y = round(mean(stats(i).PixelList(:,1)));
    Ibw = imfill(Ibw, [x, y]);

else
    Ibw([CC.PixelIdxList{i}]) = false;
end;
end; 
```

（这里我有另一个命令行，但我想问题不是因为它们。）

```
labeledImage = bwlabel(binaryImage, 8);     % Label each blob so we can make measurements of it
blobMeasurements = regionprops(labeledImage, Ibw, 'all');   
numberOfBlobs = size(blobMeasurements, 1); 
```

我收到此错误消息：

```
??? Error using ==> subsindex
Function 'subsindex' is not defined for values of class 'struct'.

Error in ==> test2 at 129
numberOfBlobs = size(blobMeasurements, 1); 
```

怎么了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T01:18:54.630

您收到该错误是因为您创建了一个名为“size”的*变量*，它隐藏了内置*函数* [SIZE](http://www.mathworks.com/help/techdoc/ref/size.html)。MATLAB 没有调用*函数*来计算`numberOfBlobs`，而是尝试使用结构作为索引来*索引*变量`blobMeasurements`（这不起作用，如错误消息所示）。

一般来说，你不应该给一个变量或函数一个已经存在的函数的名字（除非你[知道你在做什么](http://www.mathworks.com/help/matlab/matlab_prog/function-precedence-order.html)）。只需将代码中的变量名称更改为“size”以外的名称，发出命令[`clear size`](http://www.mathworks.com/help/techdoc/ref/clear.html)以从工作区中清除旧的 size 变量，然后重新运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:30:15.550

您的错误消息告诉您错误在`numberOfBlobs = size(blobMeasurements, 1);`. `subsindex`最有可能用于`size(..., 1)`访问这些元素。

我假设这`blobMeasurements`是一个结构数组（或单个结构），该操作未完全定义。

为什么不像`length`以前那样使用命令？这在您的代码中稍早一些。

# css - 如何在 Twitter Bootstrap 中使用 CSS 将文本与元素的中间对齐？

> ID：10061339
> 
> 赞同：10
> 
> 时间：2012-04-08T08:01:22.317
> 
> 标签：css, twitter-bootstrap, centering, text-alignment

我正在使用[Bootstrap](http://twitter.github.com/bootstrap/javascript.html#alerts)警报，这是我的成功警报消息：

```
<div class="alert alert-success" id="UploadSuccess">
    <a class="close" data-dismiss="alert">×</a>
    <strong>Congrats!</strong> You have successfully did it!.
</div> 
```

结果是：

![上述 HTML 的结果图像](../Images/a80e08e034d9cca116ad716cf97428cb.png)

如您所见，文本对齐位于`<div>`. 那么，我如何将它对齐到中间呢？

我尝试过使用`padding-top`，`vertical-align:middle`但都不起作用（我最终得到了相同的结果）。

我需要做什么来更改文本的垂直对齐方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-08T08:04:02.927

使`line-height`div 的 与 div 的 相同`height`，例如：

```
#UploadSuccess { height: 20px; line-height: 20px; } 
```

这仅在您有一行文本时才有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-08T08:15:16.643

尝试将文本文本垂直居中是一个常见问题。通常这不适用于普通盒子，但您可以强制它使用垂直对齐：

```
vertical-align: middle;
display: table-cell; 
```

但是，这在 IE7 及更低版本中不起作用。

如果您确定要显示的文本可以使用 line-height 来伪造效果，如下所示：

```
height: 40px;
line-height: 40px; /* same as height */ 
```

这种方式可以跨浏览器工作，并且我相信最多支持 IE5.5。如果这不是一个选项，恐怕你不走运（无法完成）。

作为旁注，错误消息因语法错误而受到影响，它应该是“恭喜！您已成功完成它。”。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-12T07:33:27.187

让它更容易;)！尝试使用警报块！这适用于最新的 Bootstrap 版本！

```
<div class="alert alert-block alert-success" id="UploadSuccess">
    <a class="close" data-dismiss="alert">×</a>
    <strong>Congrats!</strong> You have successfully did it!.
</div> 
```

![在此处输入图像描述](../Images/6089ccc04344dd8d16a622c14fde0914.png)

# jsf - 如何在 PhaseListener 中调用 EJB

> ID：10061342
> 
> 赞同：0
> 
> 时间：2012-04-08T08:01:39.620
> 
> 标签：jsf, ejb

我使用 JSF 2 和 EJB 3.1，它们都部署在 Glassfish 3.1 上。

当我设置一个实现 PhaseListener 的名为 MyInterceptor 的类时，我无法撤销其中的远程 EJB 接口。

它注意到“NullPointerException ...”

```
public class MyInterceptor implements PhaseListener {

@EJB(name="AuthorizationEJB", 
            beanInterface=AuthorizationService.class,
            mappedName="corbaname:iiop:localhost:3700#ejb/AuthorizationEJB")
public AuthorizationService authorizationService;

....

} 
```

当我调用 authorizationService.dosomestuff() 时，它会引发错误 NullPointerException

我该怎么做才能解决它？

预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T21:37:40.580

在 JSF 2.1 和更早的版本中，PhaseListener 很遗憾没有注入目标（这意味着您不能在其中使用注入）。不过，您可以通过 JNDI 以编程方式进行查找。

在 JSF 2.2 中，所有 JSF 工件（包括 PhaseListeners）都将成为注入目标，但现在这可能对您没有帮助。

*与您的问题无关，但我不确定您要通过`beanInterface`在注释中指定来实现什么。很可能您也不需要该`name`属性，如果您的 bean 是本地 bean，您也不需要`mappedName`.*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:36:31.233

使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)而不是 JSF 阶段侦听器来进行授权。您可以`@EJB`在`@WebFilter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T12:10:18.437

是的，在网络过滤器中，您可以只使用普通的*@EJB*。如果您有两个 bean 实现相同的*AuthorizationService*接口，则最多需要添加*beanName 。* Servlet 过滤器是每个请求的，我认为您不需要在 JSF 生命周期的某个阶段（比整个 http 请求更细粒度）做安全工作。 对于正常查找，您可以执行以下操作：

 *```
AuthorizationService.class.cast(new InitialContext().lookup("corbaname:iiop:localhost:3700#ejb/AuthorizationEJB")).dosomestuff(); 
```

在尝试中捕获 javax.naming.NamingException*

# prolog - 欧几里得递归算法

> ID：10061343
> 
> 赞同：0
> 
> 时间：2012-04-08T08:01:49.990
> 
> 标签：prolog, greatest-common-divisor, visual-prolog

好吧，我知道这确实是一个愚蠢的问题，但我无法理解。有一项任务我应该找到 [欧几里得](https://en.wikipedia.org/wiki/Euclid)（gcd）的递归算法。我已经完成了一个案例，在这里：

```
nondeterm nod (integer,integer,integer)
CLAUSES
nod (X,0,X):- !.
nod (0,X,X):- !.
nod (X,0,X):-X>0.
nod (X,Y,G):-Y>0, Z = X mod Y, nod (Y,Z,G). 
```

我需要做另一种情况，其中递归从 х0 开始，当 Xi 调用函数计数 Xi+1 时。应该是这样的：

```
PREDICATES
nondeterm nod (integer,integer,integer)
nondeterm nod1 (integer,integer,integer,integer,integer)     
CLAUSES
nod(X,Y,Z):- nod1(X,Y,Z,0,0).   
nod1 (X,Y,Z,X,Y):- Otvet = Z, write("Otvet=", Otvet, "\n"), !.
nod1 (X,Y,X,Y):- nod1 (X,Y,X,Y).
nod1 (X,Y,Z,X1,Y1):-
              X1>Y1, X>0, Y>0, 
              Y2 = X1 mod Y1,
              X2 = Y1,
              nod1(X,Y,Z,X2,Y2). 
```

但它不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-18T09:24:55.790

以下代码适用于我。请注意 rem 的使用，但我想你也可以使用 mod：

```
% sys_gcd(+Integer, +Integer, -Integer)
sys_gcd(X, 0, X) :- !.
sys_gcd(X, Y, Z) :-
   H is X rem Y,
   sys_gcd(Y, H, Z). 
```

以下是使用 SWI-Prolog 运行的一些示例：

```
?- sys_gcd(20,30,X).
X = 10.
?- sys_gcd(-20,30,X).
X = 10.
?- sys_gcd(20,-30,X).
X = -10.
?- sys_gcd(-20,-30,X).
X = -10. 
```

如果您想要结果的特定符号，则需要围绕它的附加代码。

再见

# php - 从 html 中删除图像，就像 gmail 对未启用图像的电子邮件所做的那样

> ID：10061347
> 
> 赞同：2
> 
> 时间：2012-04-08T08:03:04.703
> 
> 标签：php, html, email, gmail, html-email

我正在用 PHP 编写一个简单的 HTML 电子邮件设计编辑器，并演示了它的外观。

我认为向用户展示这在关闭图像的电子邮件客户端（如 gmail）中的外观也是非常有用的。

我最好的方法是什么？有人知道这是如何在 gmail/hotmail 等中完成的吗？

我是否简单地删除`img -> src`并`css background: url`使用 reg 表达式？

我想从以下位置删除背景部分： `background="url"`用于表格和 `background-image:url(url);`使用内联 css

我发现[这个问题](https://stackoverflow.com/q/138313/560287)具有相同的想法，尽管我想从 HTML 文本中实际删除 img 和 backrgound-images 。

或者可以修改[此代码](http://snipplr.com/view/4131/)以使用背景图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:39:06.260

为了完全模仿 gmail 或类似网络邮件的行为，将相应地替换标签和 background: css 属性，以便它们显示一个占位符，让用户清楚地知道这里有一个图像。

由于通常消息是在 iframe 中加载的，我相信您最好的猜测是清理消息服务器端，删除所有不需要的标签并在预览时相应地替换图像。

我同意 Michal 的观点，即仅使用正则表达式来验证您的 HTML 是不明智的，您可能应该遍历 DOM 树以确保安全。

为什么不看一下**[Roundcube 使用的 Frederic Motte](http://trac.roundcube.net/browser/trunk/roundcubemail/program/lib/washtml.php)**的 washtml来帮助您入门？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T13:43:36.923

我还建议使用 PHP DOM 而不是正则表达式，这通常是不准确的。这是一个示例代码，您可以使用它从字符串中去除所有 img 标签和所有背景属性：

```
// ...loading the DOM
$dom = new DOMDocument();
@$dom->loadHTML($string);  // Using @ to hide any parse warning sometimes resulting from markup errors
$dom->preserveWhiteSpace = false;
// Here we strip all the img tags in the document
$images = $dom->getElementsByTagName('img');
$imgs = array();
foreach($images as $img) {
    $imgs[] = $img;
}
foreach($imgs as $img) {
    $img->parentNode->removeChild($img);
}
// This part strips all 'background' attribute in (all) the body tag(s)
$bodies = $dom->getElementsByTagName('body');
$bodybg = array();
foreach($bodies as $bg) {
    $bodybg[] = $bg;
}
foreach($bodybg as $bg) {
    $bg->removeAttribute('background');
}

$str = $dom->saveHTML(); 
```

我选择了 body 标签而不是 table，因为它`<table>`本身没有`background`属性，它只有`bgcolor`. 要去除背景内联 css 属性，您可以使用[sabberworm 的 PHP CSS Parser](https://github.com/sabberworm/PHP-CSS-Parser) 来解析从 DOM 检索到的 CSS：试试这个

```
// Selecting all the elements since each one could have a style attribute
$alltags = $dom->getElementsByTagName('*');
$tags = array();
foreach($alltags as $tag) {
    $tags[] = $tag;
} $css = array();
foreach($tags as &$tag) {
    $oParser = new CSSParser("p{".$tag->getAttribute('style')."}");
    $oCss = $oParser->parse();
    foreach($oCss->getAllRuleSets() as $oRuleSet) {
        $oRuleSet->removeRule('background');
        $oRuleSet->removeRule('background-image');
    }
    $css = $oCss->__toString();
    $css = substr_replace($css, '', 0, 3);
    $css = substr_replace($css, '', -2, 2);
    if($css)
        $tag->setAttribute('style', $css);
} 
```

一起使用所有这些代码，例如，如果你有一个

```
$string = '<!DOCTYPE html>
<html><body background="http://yo.ur/background/dot/com" etc="an attribute value">
<img src="http://your.pa/th/to/image"><img src="http://anoth.er/path/to/image">
<div style="background-image:url(http://inli.ne/css/background);border: 1px solid black">div content...</div>
<div style="background:url(http://inli.ne/css/background);border: 1px solid black">2nd div content...</div>
</body></html>'; 
```

PHP将**输出**

```
<!DOCTYPE html>
<html><body etc="an attribute value">
<div style="border: 1px solid black;">div content...</div>
<div style="border: 1px solid black;">2nd div content...</div>
</body></html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T08:42:42.560

通常不推荐使用正则表达式来解析 html。

我认为更好的方法是解析 html 服务器端，并对其进行操作以删除图像或图像 src 属性。我成功使用的一个库是[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)，但我认为您可以使用官方的 PHP DOM 扩展。

删除背景图像可能更棘手。您可能必须使用[http://www.pelagodesign.com/sidecar/emogrifier/](http://www.pelagodesign.com/sidecar/emogrifier/)之类的东西来将 {background: none} 之类的东西应用于 html 元素。但是，最新版本的 Microsoft Outlook 不支持 CSS 背景图像，因此我建议从一开始就不要使用它们，以使大多数电子邮件客户端的电子邮件保持一致。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T04:12:01.380

就像 tkone 提到的：也许 JavaScript / jQuery 就是答案。

这将查看预览区域中的所有图像并将源更改为占位符图像。“占位符”类也将背景图像设置为占位符

jQuery

```
$("#previewArea img").each(function(){
  $(this).attr("src","placeholder.jpg");
  $(this).addClass("hideBG");
}); 
```

CSS

```
.hideBG{
  background: url("placeholder.jpg");
} 
```

未经测试，但应该可以工作 - 取决于您的设置和需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T13:53:35.157

我问过一个类似的问题（在解决方案中，不是实际问题）：[如何从字符串中去除特定标签和特定属性？](https://stackoverflow.com/questions/9897214/how-to-strip-specific-tags-and-specific-attributes-from-a-string)（**[解决方案](https://stackoverflow.com/a/9915638/871050)**）

它是一个服务器端库，可根据预定义的设置清理（和格式化）HTML 输入。让它删除任何`src`属性和所有`background`属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T13:09:54.903

您也可以始终在客户端执行此操作。

使用这个假设的代码，你应该能够做这样的事情，假装现代浏览器都工作相同：（或使用 jQuery 或其他东西）

```
var email;
var xhr = new XMLHttpRequest();
xhr.open('GET', URL_FOR_EMAIL, true);
xhr.onreadystatechange = function(event){
   if(xhr.readyState === 4 && xhr.status === 200){
        email = HTMLParser(xhr.responseText);
   }
}

var imgs = email.getElementsByTagName('img');
for(var i = 0; i > imgs.length; i++){
    email.removeChild(imgs[i]);
}

// attach the email body to the DOM
// do something with the images 
```

[来自MDN](https://developer.mozilla.org/en/Code_snippets/HTML_to_DOM#Safely_parsing_simple_HTML.c2.a0to_DOM)的 HTMLParser

```
function HTMLParser(aHTMLString){
  var html = document.implementation.createDocument("http://www.w3.org/1999/xhtml", "html", null),
    body = document.createElementNS("http://www.w3.org/1999/xhtml", "body");
  html.documentElement.appendChild(body);

  body.appendChild(Components.classes["@mozilla.org/feed-unescapehtml;1"]
    .getService(Components.interfaces.nsIScriptableUnescapeHTML)
    .parseFragment(aHTMLString, false, null, body));

  return body;
}, 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T18:38:34.127

我认为最好的方法是使用不处理“src”属性的标签来保持更改可逆。

例如：将所有“img”更改为“br”

所以打印过滤后的 HTML 1st 并用 ajax 反转它，搜索所有带有 src 属性的 br 。

# c++ - 如何在 Windows 资源管理器中嵌入我的 GUI？

> ID：10061349
> 
> 赞同：1
> 
> 时间：2012-04-08T08:03:16.170
> 
> 标签：c++, windows, explorer

我想向资源管理器（在 Windows 中）添加一个选项，例如“预览窗格”，但只有一个“编辑窗格”。这个想法是我有要编辑的文本文件，但我不想打开应用程序来编辑文件。我只想在编辑窗格中单击并进行编辑。有什么建议我可以使用哪些 API 来以这种方式扩展资源管理器？（不仅仅是'看看 shell api：我有，但我不知道哪个可以让我完成这个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:48:52.057

您必须实现 PropertyHandler。请参阅 Windows SDK \Samples\winui\Shell\AppShellIntegration\PropertyHandlers。

每个属性都由属性模式 XML 文件描述。此属性架构必须使用 PSRegisterPropertySchema() 注册。属性处理程序实现 IInitializeWithXXX、IPropertyStore 和可选的 IPropertyStoreCapabilities。您必须为要处理的每个文件扩展名（在您的情况下为 .txt）注册实现的 CLSID。

# php - CakePHP 2.0 安装错误，我该如何解决

> ID：10061350
> 
> 赞同：0
> 
> 时间：2012-04-08T08:03:28.523
> 
> 标签：php, cakephp, cakephp-2.0

我尝试在本地机器（wamp 服务器）上安装和配置 cakephp 2.0，在我使用 cake bake 命令并在 www 文件夹中创建了一个包后，我尝试在本地主机中打开，但它显示以下错误。

```
( ! ) Warning: include(Cake\bootstrap.php) [function.include]: failed to open stream: No such file or directory in D:\wamp\www\cakecms\webroot\index.php on line 79
Call Stack
#   Time    Memory  Function    Location
1   0.0005  363016  {main}( )   ..\index.php:0
2   0.0011  387992  require( 'D:\wamp\www\cakecms\webroot\index.php' )  ..\index.php:17

( ! ) Warning: include() [function.include]: Failed opening 'Cake\bootstrap.php' for inclusion (include_path='D:\wamp\www\lib;.;C:\php\pear') in D:\wamp\www\cakecms\webroot\index.php on line 79
Call Stack
#   Time    Memory  Function    Location
1   0.0005  363016  {main}( )   ..\index.php:0
2   0.0011  387992  require( 'D:\wamp\www\cakecms\webroot\index.php' )  ..\index.php:17

( ! ) Fatal error: CakePHP core could not be found. Check the value of CAKE_CORE_INCLUDE_PATH in APP/webroot/index.php. It should point to the directory containing your \cake core directory and your \vendors root directory. in D:\wamp\www\cakecms\webroot\index.php on line 88
Call Stack
#   Time    Memory  Function    Location
1   0.0005  363016  {main}( )   ..\index.php:0
2   0.0011  387992  require( 'D:\wamp\www\cakecms\webroot\index.php' )  ..\index.php:17
3   0.0016  388856  trigger_error ( )   ..\index.php:88 
```

谁能给我一个想法来克服这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:46:00.310

从错误和你所说的听起来你可能没有正确安装 Cake。这句话就是我所指的：“在我使用 cake bake 命令并在 www 文件夹中创建了一个包之后”

要安装试用版 Cake 项目，请尝试以下操作：

1.  在您的 Wamp 文档根目录中创建一个空目录
2.  将 Cake 发行版 zip 解压到该目录中
3.  编辑 core.php 和 database.php 以适应
4.  尝试在浏览器中查看目录
5.  现在运行蛋糕烘焙
6.  再次查看项目

您遇到的错误看起来不像 mod-rewrite 问题。

# objective-c - UIPicker 不会设置文本字段

> ID：10061361
> 
> 赞同：0
> 
> 时间：2012-04-08T08:06:01.117
> 
> 标签：objective-c, ios, uipicker

我有一个带有国家/地区列表和相应标志的自定义选择器，一切正常，但我希望在选择国家/地区时显示国家名称和标志作为背景图片，我不明白为什么我的方法无法将文本设置为文本对我没有意义。这是我的代码：请注意，我的“国家”NSSTring 在接口中正确声明并在 .m 中合成，并且 namefieldText IBOutlet 已连接。代码：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    // report the selection to the UI label

   country = [customPickerArray objectAtIndex:[pickerView selectedRowInComponent:0]];

      nameFiled.text =country;     // Nothing happens here

    NSLog(@"%@",country);         //NSLog show correctly selected country in a console 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:37:02.270

问题在于您的：

country = [customPickerArray objectAtIndex:[pickerView selectedRowInComponent:0]];

相反，你应该说：

**country = [customPickerArray objectAtIndex:row];**

祝你好运！

# ruby-on-rails - Rails before_filter 用于控制器中的特定操作

> ID：10061373
> 
> 赞同：32
> 
> 时间：2012-04-08T08:08:11.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, devise, before-filter

```
 def new
    before_filter  do 
      redirect_to "/" unless current_admin || current_company
      flash[:notice] = 'You dont have enough permissions to be here' unless current_admin || current_company

     end
    CODE CODE CODE
   end

  def edit
    before_filter  do 
      redirect_to "/" unless current_admin.id = 5
      flash[:notice] = 'You dont have enough permissions to be here' unless current_admin || current_company

     end
    CODE CODE CODE
   end 
```

这是我想做的代码，但我不知道如何正确地做。我想要实现的是为我的每个操作应用 before_filter 规则。因此，也许用户可以访问 de INDEX 操作，但不能访问 EDIT 操作等。我知道 before_filter 方法运行一次，并且我不能运行 4 个 before_filters，由于我的英语不好，我只是提供一些参考。

您一定知道我正在使用 Devise 作为 current_admin 和 current_company 方法。我需要应用不同的过滤器（如果管理员或 company.id = X）和其他操作。

在此先感谢，我很困在这里。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-08T08:23:41.977

在您的`ApplicationController`方法中创建：

```
def check_privileges!
  redirect_to "/", notice: 'You dont have enough permissions to be here' unless current_admin || current_company
end 
```

然后在你的控制器中：

```
before_filter :check_privileges!, only: [:new, :create, :edit, :save] 
```

或者

```
before_filter :check_privileges!, except: [:index, :show] 
```

# java - Object 变量类型是什么意思？

> ID：10061374
> 
> 赞同：0
> 
> 时间：2012-04-08T08:08:18.880
> 
> 标签：java, types, methods, argument-passing

我试图了解两种具有相同名称的方法之间的区别。这是我试图理解的代码......

```
public class Test {
    public static void main(String[] args) {
        MyPoint p1 = new MyPoint();
        MyPoint p2 = new MyPoint(10, 30.5);
        System.out.println(p1.distance(p2));
        System.out.println(MyPoint.distance(p1, p2));
    }
}

class MyPoint {
    .....   
}

public double distance(MyPoint secondPoint) {
    return distance(this, secondPoint);
}

public static double distance(MyPoint p1, MyPoint p2) {
    return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));
} 
```

有人可以解释这两种方法之间的区别`distance()`。类型`MyPoint`实际上是什么意思？为什么其中一个方法有一个`MyPoint`对象，而另一个方法有两个`MyPoint`对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:14:29.390

`MyPoint`是对象的类型。例如，在该`distance(MyPoint p1, MyPoint p2)`方法中，这意味着您将 2 个对象传递给此方法 - 第一个对象是`MyPoint`名为 p1 的对象，第二个对象是另一个`MyPoint`名为 p2 的对象。

2 个 println 语句之间的区别在于，第一个运行`distance(MyPoint)`方法，第二个运行`distance(MyPoint, MyPoint)`方法。此外，第一个方法运行`distance()`从`MyPoint p1`对象到传递给方法的对象（`p2`），而第二个`distance()`方法是静态调用，它计算`MyPoint`传递给方法（`p1`和`p2`）的两个对象之间的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:14:40.513

不同之处在于您的计算方式。第一个通过实例的状态完成，第二个通过“静态”方式完成。

你可能想看看真正的用法。如果它类似于实用程序，则将其设为静态更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:18:04.850

distance 是用于计算作为输入给定的两点之间的距离的方法。

MyPoint 类描述了空间中的点。此类中的 now 方法 distance(Mypoint x) 为您提供该点与作为参数传递的参考点的距离，而静态方法仅返回传递的两点之间的距离

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T08:21:05.533

也许您的问题与静态方法有关？

```
p1.distance(p2) 
```

这调用了 MyPoint 的成员函数，但是这个调用来自 MyPoint p1 的特定实例

```
MyPoint.distance(p1, p2) 
```

调用 MyPoint 的静态方法，不需要任何实例，但必须添加 MyPoint。告诉编译器您正在引用静态方法或字段。

# javascript - javascript 等效于 php call_user_func

> ID：10061389
> 
> 赞同：5
> 
> 时间：2012-04-08T08:12:06.977
> 
> 标签：javascript

我找到了我已经实现的这个主题（请参阅接受的答案）：
[javascript 等效于 PHP 的 call_user_func()](https://stackoverflow.com/questions/5818313/javascript-equivalent-of-phps-call-user-func)

但是，我遇到了多个参数的问题。我意识到我正在做的是将参数转换为字符串并将其视为 1 个参数，但我不知道如何解决此问题，因为我正在动态创建参数。

意思是，我在我的代码中定义了以下内容：

```
var a = new Array();
a[0] = new Array();
a[0][0] = 'alert';
a[0][1] = '\'Hello World\'';
a[1] = new Array();
a[1][0] = 'setTimeout';
a[1][1] = 'alert("goodbye world")';
a[1][2] = '20'; 
```

后来，我这样称呼他们：

```
 var j = 0;
    var len = 0;
    var fx = '';
    var params = '';
    for( i in a ){
        params = '';
        len = a[i].length;
        fx = a[i][0]; // getting the function name
        a[i].splice( 0, 1 ); // removing it from array
        if( len > 1 ){
            params = a[i].join(", "); // trying to turn the parameters into the right format, but this is turning it into strings I think
            params = params.replace(/\\'/g,'\''); // bc i was adding slashes with PHP
        }
        window[fx](params);
    } 
```

我不必使用数组来执行此操作。我不了解 JS OOP（还没有尝试过），虽然我对 PHP OOP 很满意，所以我不知道那里是否有办法做到这一点。

任何有关传递多个参数的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T09:11:28.970

要做的第一件事：废弃你的整个代码，重新开始。你的方法不会让你到达你想去的任何地方。（不幸的是，我不能告诉你你想去哪里，因为我无法理解你的例子。）

在 JavaScript 中调用函数有三种方法。

```
function foo() { console.log(arguments); }

// 1\. directly
foo(1, 2, 3);

// 2\. trough Function.call()
foo.call(this, 1, 2, 3);

// 3\. trough Function.apply()
var args = [1, 2, 3];
foo.apply(this, args); 
```

`call`并且`apply`是相似的。它们让您决定`this`关键字将指向函数内部的哪个对象（这是重要的一点！）。

`apply`接受参数数组，`call`接受单个参数。

最接近的`call()`是 PHP 的`call_user_func()`. 最接近的`apply()`是 PHP 的`call_user_func_array()`.

JavaScript 对象与 PHP 数组共享一些东西：它们是键/值对。

```
// an anonymous function assigned to the key "foo"
var obj = {
  foo: function () { console.log(arguments); }
}; 
```

这意味着您可以使用点符号访问对象属性：

```
// direct function call
obj.foo(1, 2, 3); 
```

或者通过方括号表示法（注意对象键是字符串）：

```
var funcName = "foo";
obj[funcName](1, 2, 3);
obj[funcName].call(obj, 1, 2, 3);
obj[funcName].apply(obj, [1, 2, 3]); 
```

方括号表示法使您可以自由地动态选择对象属性。如果此属性恰好是一个函数，`apply()`则可以让您自由地动态选择函数参数。

每个未声明为某个对象属性的顶级函数都将成为*全局*对象的属性。在浏览器中，全局对象是`window`. （所以`function foo()`在我上面的第一个代码块中确实是`window.foo`。）

请注意，`this`它不像在 PHP 中那样工作。它将指向函数*被调用*的对象，而不是函数“所属”的对象。（“属于”的概念在 JavaScript 中并不真正存在。事物可以这样建模，但这只是一种约定。）

直接调用 ( `obj.foo(1, 2, 3)`)，`this`将指向`obj`。使用`call`and `apply`，`this`将指向您想要的任何对象。这比一开始听起来要有用得多。大多数时候，当你想动态调用函数时，你最终会使用`apply`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T08:20:33.323

查看 Function.apply：

```
function test(a, b) { console.log([a, b]) }

test.apply(null, [1, 2]); // => [ 1, 2 ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-12T03:17:05.220

迟到了，但现在有了 ES6，你可以简单地做

```
function FunctionX(a,b,c,d){
    return a + b + c + d;
}

let fx = "FunctionX";
let params = [ 1, 10, 100, 200 ];

let answer = window[fx]( ... params);
let answer2 = globalThis[fx]( ... params );   // this is more cross-platform 
```

解压你的参数数组

# java - 单击告诉它重新绘制的按钮后，画布不会更新

> ID：10061393
> 
> 赞同：2
> 
> 时间：2012-04-08T08:12:50.753
> 
> 标签：java, swing, event-handling, awt, repaint

为什么 Grid mze 不更新？按钮应该编辑行和列，然后将更新 Grid mze 的单元格，但事实并非如此。如果我单击与 H 对齐的 + 按钮，mze 应更新为 26x25 网格，但没有任何反应，控制台上仅显示 Columns + 1。

```
 import javax.swing.*;
import java.awt.*;
import javax.swing.GroupLayout.*;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.border.LineBorder;
import javax.swing.border.MatteBorder;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class csc extends JFrame{

    public csc(String s){
    super(s);
    setSize(800,600);

    //code generated from eclipse
    JPanel panel = new JPanel();
    panel.setBackground(SystemColor.control);
    GroupLayout groupLayout = new GroupLayout(getContentPane());
    groupLayout.setHorizontalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panel, GroupLayout.DEFAULT_SIZE, 774, Short.MAX_VALUE)
                .addContainerGap())
    );
    groupLayout.setVerticalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panel, GroupLayout.DEFAULT_SIZE, 550, Short.MAX_VALUE)
                .addContainerGap())
    );

    JPanel scCont = new JPanel();
    scCont.setBorder(new MatteBorder(0, 0, 1, 1, (Color) new Color(0, 0, 0)));

    JPanel cplCont = new JPanel();
    GroupLayout gl_panel = new GroupLayout(panel);
    gl_panel.setHorizontalGroup(
        gl_panel.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_panel.createSequentialGroup()
                .addGap(27)
                .addComponent(scCont, GroupLayout.PREFERRED_SIZE, 475, GroupLayout.PREFERRED_SIZE)
                .addGap(18)
                .addComponent(cplCont, GroupLayout.PREFERRED_SIZE, 235, GroupLayout.PREFERRED_SIZE)
                .addContainerGap(19, Short.MAX_VALUE))
    );
    gl_panel.setVerticalGroup(
        gl_panel.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_panel.createSequentialGroup()
                .addGroup(gl_panel.createParallelGroup(Alignment.LEADING)
                    .addGroup(gl_panel.createSequentialGroup()
                        .addGap(131)
                        .addComponent(cplCont, GroupLayout.PREFERRED_SIZE, 249, GroupLayout.PREFERRED_SIZE))
                    .addGroup(gl_panel.createSequentialGroup()
                        .addGap(35)
                        .addComponent(scCont, GroupLayout.PREFERRED_SIZE, 480, GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(35, Short.MAX_VALUE))
    );
    Grid mze = new Grid(4,4,400,400);
    cscPanel cpl = new cscPanel(this,mze);
    scCont.setLayout(new BorderLayout(0, 0));
    mze = new Grid(cpl.rows,cpl.cols,400,400);
    mze.setForeground(SystemColor.desktop);
    scCont.add(mze);

    GroupLayout gl_cplCont = new GroupLayout(cplCont);
    gl_cplCont.setHorizontalGroup(
        gl_cplCont.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_cplCont.createSequentialGroup()
                .addContainerGap()
                .addComponent(cpl, GroupLayout.DEFAULT_SIZE, 215, Short.MAX_VALUE)
                .addContainerGap())
    );
    gl_cplCont.setVerticalGroup(
        gl_cplCont.createParallelGroup(Alignment.LEADING)
            .addGroup(gl_cplCont.createSequentialGroup()
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(cpl, GroupLayout.PREFERRED_SIZE, 419, GroupLayout.PREFERRED_SIZE))
    );
    cplCont.setLayout(gl_cplCont);
    panel.setLayout(gl_panel);
    getContentPane().setLayout(groupLayout);
    //end of eclipse generated code
    pack();
    setResizable(false);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(EXIT_ON_CLOSE);    
    }

    public static void main(String[] args){
    csc MakeMaze = new csc("Catch Torchic!");
    MakeMaze.setVisible(true);

    }
}

class cscPanel extends JPanel{
  static final int MIN_CELLS = 3;
  static final int MAX_W_CELLS = 50;
  static final int MAX_H_CELLS = 50;
  static final int MAX_DELAY = 500;
  static final int MIN_DELAY = 5;
  int rows = 25; int cols = 25; private int genDelay = 50; private int solveDelay = 50;
  JButton bGen;
  JButton bmm;
  JButton bSolve;
  JButton bLoad;
  JButton bRowsPlus;
  JButton bRowsMinus;
  JButton bColsPlus;
  JButton bColsMinus;
  private TextField tfRows;
  private TextField tfCols;
  private JPanel rowsPanel;
  private JPanel colsPanel;
  private JPanel rowsBtnPanel;
  private JPanel colsBtnPanel;
  private Grid mze;
  private csc Fr;
  private JPanel p = new JPanel();
  private cscButtonHandler handler;

  cscPanel(csc Fr, Grid mze) {
    this.Fr = Fr;
    this.mze = mze;

    setLayout(new GridLayout(11, 1, 0, 3));

    this.rowsBtnPanel = new JPanel();
    this.colsBtnPanel = new JPanel();
    this.rowsBtnPanel.setLayout(new GridLayout(1, 2));
    this.colsBtnPanel.setLayout(new GridLayout(1, 2));
    this.rowsBtnPanel.add(this.bRowsMinus = new JButton("-"));
    this.rowsBtnPanel.add(this.bRowsPlus = new JButton("+"));
    this.colsBtnPanel.add(this.bColsMinus = new JButton("-"));
    this.colsBtnPanel.add(this.bColsPlus = new JButton("+"));
    this.rowsPanel = new JPanel();
    this.rowsPanel.setLayout(new BorderLayout(2, 0));
    this.rowsPanel.add("West", new Label("W"));
    this.rowsPanel.add("Center", this.tfRows = new TextField(3));
    this.rowsPanel.add("East", this.rowsBtnPanel);
    this.colsPanel = new JPanel();
    this.colsPanel.setLayout(new BorderLayout(2, 0));
    this.colsPanel.add("West", new Label("H"));
    this.colsPanel.add("Center", this.tfCols = new TextField(3));
    this.colsPanel.add("East", this.colsBtnPanel);
    this.tfRows.setEditable(false);
    this.tfCols.setEditable(false);

    add(this.bLoad = new JButton("LOAD"));
    add(this.rowsPanel);
    add(this.colsPanel);
    add(this.bGen = new JButton("RANDOM"));
    add(this.bSolve = new JButton("SOLVE"));
    add(this.bmm = new JButton("MAIN MENU"));

    this.tfRows.setText(Integer.toString(this.rows));
    this.tfCols.setText(Integer.toString(this.cols));
    this.bSolve.setEnabled(false);

    handler = new cscButtonHandler(Fr,this,mze);
        bGen.addActionListener(handler);
        bmm.addActionListener(handler);
        bSolve.addActionListener(handler);
        bLoad.addActionListener(handler);
        bRowsPlus.addActionListener(handler);
        bRowsMinus.addActionListener(handler);
        bColsPlus.addActionListener(handler);
        bColsMinus.addActionListener(handler);
  }

  void setPlusMinusEnable() {
    this.bRowsPlus.setEnabled(this.rows < 50);

    this.bRowsMinus.setEnabled(this.rows > 3);

    this.bColsPlus.setEnabled(this.cols < 50);

    this.bColsMinus.setEnabled(this.cols > 3);
  }

  void setGenEnable(boolean paramBoolean){
    this.bGen.setEnabled(paramBoolean); } 

  void setSolveEnable(boolean paramBoolean) { this.bSolve.setEnabled(paramBoolean); }
}

class cscButtonHandler implements ActionListener{
    csc a;
    cscPanel b;
    Grid c;

    public cscButtonHandler(csc a,cscPanel b, Grid c){
        this.a = a;
        this.b = b;
        this.c = c;
    }

    public void actionPerformed(ActionEvent e){
        if(e.getSource() == b.bmm)
            {System.out.println("Back to MainMenu");}
        else if(e.getSource() == b.bSolve)
            {System.out.println("Solve Maze");}
        else if(e.getSource() == b.bLoad)
            {System.out.println("Open Load Dialog");}
        else if(e.getSource() == b.bRowsPlus)
            {System.out.println("Rows + 1");
             b.rows++;
             c.repaint(b.rows,b.cols,400,400);}
        else if(e.getSource() == b.bRowsMinus)
            {System.out.println("Rows - 1");
             b.rows--;
             c.repaint(b.rows,b.cols,400,400);}
        else if(e.getSource() == b.bColsPlus)
            {System.out.println("Columns + 1");
             b.cols++;
             c.repaint(b.rows,b.cols,400,400);}
        else if(e.getSource() == b.bColsMinus)
            {System.out.println("Columns - 1");
             b.cols--;
             c.repaint(b.rows,b.cols,400,400);}
        else if(e.getSource() == b.bGen)
            {System.out.println("Generating Randomly");}
    }

}
class Grid extends Canvas{

    Cell[][] maze;
    int rows;
    int cols;

    public Grid(int rows, int cols, int h, int w) {
        this.rows = rows;
        this.cols = cols;
        maze = new Cell[rows][cols];
        setPreferredSize(new Dimension(h,w));
    }

    public void paint(Graphics g) {
        int k;
        double width = getSize().width;
        double height = getSize().height;

        double htOfRow = height / (rows);
        for (k = 0; k < rows; k++)
            g.drawLine(0, (int) (k * htOfRow) , (int) width, (int) (k * htOfRow) );

        double wdOfRow = width / (cols);
        for (k = 0; k < cols; k++)
            g.drawLine((int) (k*wdOfRow) , 0,(int) (k*wdOfRow) , (int) height);
    }
}

class Cell {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:07:12.510

这段代码有一些问题，但我可以看到至少一个重绘问题是调用`repaint`传递看起来像网格单元坐标的东西，而实际上`repaint`接受像素坐标。

# iis - 使用 Windows 身份验证的简单身份验证代理

> ID：10061406
> 
> 赞同：0
> 
> 时间：2012-04-08T08:15:07.697
> 
> 标签：iis, authentication, iis-7, active-directory

我需要编写一个非常简单的身份验证代理服务——用户必须通过网络浏览器登录，然后如果登录正确，页面会将用户重定向到另一个 URL。

服务器是IIS7；身份验证是通过 Active Directory 进行的。虽然我在 Linux、Apache、Python 等方面拥有丰富的经验，但我在 Windows 环境中几乎没有编程经验。我知道 IIS 可以处理身份验证部分，但我有点不确定从哪里开始生成 URL。什么语言、环境和资源会是一个好的起点？

虽然我的一部分想要打破蟒蛇，但另一部分想要做到这一点“Windows Way (TM)”。

更好的是使用 Windows 域 SSO，这样用户甚至不需要登录，但这可能会在以后出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:03:14.617

在 WISA 世界（Windows、IIS、SQL、ASP.Net）中，您可以在 ASP.Net 表单身份验证中完成上述[操作（一种选择是使用 Active Directory）](http://blogs.msdn.com/b/alvar/archive/2009/02/03/using-asp-net-2-0-forms-authentication-with-active-directory-membership-provider.aspx)

如果这是一个**私人站点**（企业 Active Directory 内部网），那么根本没有登录提示（PC 上的用户 AD 登录的 SSO）的简单*方法**是*您的网络中有 IE（[NTLM/集成身份验证](http://blogs.iis.net/nitashav/archive/2010/03/12/iis6-0-ui-vs-iis7-x-ui-series-integrated-windows-authentication.aspx)）。您可以在 IIS 中对文件、文件夹等进行安全限制，而无需任何开发 - 您也不需要涉及 ASP.net..文件可能只是 html 等。在您的用户/组中的 AD 中授予某些访问权限资源。虽然我从来没有做过，但如果 IIS 可以运行 Python，那么你可以淘汰 Python :)。IE可能不是唯一的选择，看来你可以配置[Firefox](https://developer.mozilla.org/En/Integrated_Authentication)*- 我没有厌倦这个......如果它的内部/公司，IE 几乎是不费吹灰之力的（没有出汗/没有什么可以弄清楚或调整）。*

# detection - 如何使用 JavaCV 进行人员检测和计数

> ID：10061407
> 
> 赞同：1
> 
> 时间：2012-04-08T08:15:08.857
> 
> 标签：detection, javacv

javacv中是否有任何类来计算人数或检测我们在视频中定义的某个位置的人？我正在做的只是将视频上传到系统并识别每天来到现场的人。这不是实时的。我和我一起录制了视频。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:04:28.437

您可能需要人脸检测/人脸跟踪系统的组合。这不是一个简单的问题。看看这个页面上的描述：[Face Detection and Face Recognition with OpenCV](http://www.shervinemami.co.cc/faceRecognition.html)。将此代码转换为 JavaCV 应该不难，只需浏览 JavaCV 页面并查看提供的示例。

现在，您可以逐帧从视频中抓取图像，检查每张图像上的面孔。如果你找到了，你就开始跟踪它，这意味着你在这张脸周围的一小块区域里检查这张脸。这几乎就是问题所在：考虑另一个人进入场景，接近第一个，你如何区分他们？

因此，除了检测/跟踪之外，您可能还需要识别。上面的链接提供了有关用于人脸识别的众所周知的特征脸方法的信息。

# android - 在 django 中解析 json 数组

> ID：10061408
> 
> 赞同：2
> 
> 时间：2012-04-08T08:15:09.543
> 
> 标签：android, django, json

嗨，我正在尝试解析从 android 发送的 django 中的 JSON 数组，从 android 发送的 json 响应看起来像

```
 [{"record":[{"intensity":"Low","body_subpart":"Scalp","symptom":"Agitation"}]}] 
```

现在我在 django 中的功能如下：

```
record = simplejson.loads(request.POST['record'])
for o in record:            
    new_symptoms=UserSymptoms(health_record=new_healthrecord,body_subpart=o.body_subpart,symptoms=o.symptom,intensity=o.intensity)
    new_symptoms.save() 
```

但它不起作用给我错误为此我也尝试在python shell中执行上述行

```
>>>rec=json.loads('[{"intensity":"Low","body_subpart":"Scalp","symptom":"Agitation"},{"intensity":"High","body_subpart":"Scalp","symptom":"Bleeding"}]')
>>> for o in rec:
...     print rec.body_subpart
... 
Traceback (most recent call last):
  File "<console>", line 2, in <module>
AttributeError: 'list' object has no attribute 'body_subpart' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:19:03.147

```
>>>rec=json.loads('[{"intensity":"Low","body_subpart":"Scalp","symptom":"Agitation"},{"intensity":"High","body_subpart":"Scalp","symptom":"Bleeding"}]')
>>> for o in rec:
...     print rec['body_subpart'] 
```

默认情况下 JSON 对象被转换为 Python `dict`，因此您以这种方式管理访问其值的原因令人惊讶：

```
record = simplejson.loads(request.POST['record'])
for o in record:            
    body_subpart=o.body_subpart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:31:56.497

您必须使用`o['body_subpart']`而不是`o.body_subpart`. 虽然这在 Javascript 中是相同的，但在 Python 中是不同的。

# html - 从数据库中检索后，Textarea 内容混乱

> ID：10061410
> 
> 赞同：0
> 
> 时间：2012-04-08T08:15:09.513
> 
> 标签：html, textarea, quotes

所以这是我的问题：

我为我的网站编写了一个管理区域，它有一个应该为网站创建新闻的文本区域。使用等时一切正常。但是当涉及引号（“”）时，一切都变得一团糟。引号用 \（斜杠）转义。

提交的新闻将在网站的索引页面中看到，因此我知道管理中的书面 HTML 是否正常。代码应该是这样的：

```
<a href="http://www.youtube-nocookie.com/v/q9FY9O8os4M&hl=it_IT&fs=1?rel=0" rel="iframe-640-505" class="pirobox_gall1" title="MC Qoppa - Dashnise "><img src="../styles/thumbs/qopa2.jpg" width="250" height="140" class="thumb"></a> 
```

这是提交后的样子：

```
<a href=\"http://www.youtube-nocookie.com/v/q9FY9O8os4M&hl=it_IT&fs=1?rel=0\" rel=\"iframe-640-505\" class=\"pirobox_gall1\" title=\"MC Qoppa - Dashnise \"><img src=\"../styles/thumbs/qopa2.jpg\" width=\"250\" height=\"140\" class=\"thumb\"></a> 
```

当我注意到这个问题时，我正在使用 TinyMCE（一个所见即所得的编辑器），认为它是导致问题的原因，但事实并非如此，因为我已经删除了它，但我仍然不断收到这些 HTML 混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:46:13.937

[魔术引号](http://www.php.net/manual/en/security.magicquotes.php)是一个已弃用的 PHP 功能，最初旨在防止对 Web 应用程序的安全性进行[SQL 注入](http://www.php.net/manual/en/security.database.sql-injection.php)攻击。您的虚拟主机可能打开了魔术引号。

为安全起见，在 SQL 语句中包含用户输入时，开发人员应使用 mysqli 和 PDO 扩展的“准备语句”功能。如果由于某种原因无法做到这一点（例如，这些较新的扩展在特定的 Web 主机上不可用），开发人员应该正确使用适当的 MySQL 转义函数（例如[mysql_real_escape_string()](http://www.php.net/manual/en/function.mysql-real-escape-string.php)）。

您可以尝试在 php.ini 或 .htaccess 中关闭魔术引号，看看斜线是否消失；但是，请首先确保您的应用程序能够抵御 SQL 注入攻击。

# forms - 访问：更新交叉表表单

> ID：10061413
> 
> 赞同：1
> 
> 时间：2012-04-08T08:15:38.310
> 
> 标签：forms, ms-access, crosstab

我有一个绑定到交叉表查询的表单。查询所基于的关系是：

```
Client            Person             Address
|--------|        |----------|       |----------|
|ID      |    |--1|ID        |1--|   |ID        |
|IdPerson|----|   |...       |   |---|IdPerson  |
|--------|        |----------|       |----------| 
```

现在，查询“不可更新”，所以我将表单的“记录集类型”设置为“动态集（不一致更新）”，以便表单允许我在绑定字段中输入数据。

当我尝试保存（转到下一条记录等）表单时，它显示“您需要填写 'IdPerson' 字段”。但是我怎么知道它的价值呢？我不能。所以我为“BeforeUpdate”事件编写了一个处理程序，我想在其中预测 ID，Person 中的新行将获取并设置客户端和地址字段的 IdPerson。我找不到执行此操作的方法，这意味着将要插入的行存储在哪里以及如何修改它？这就是我的问题。

提前致谢。

PS：我不确定如果我提供 IdPerson 的值，Access 实际上会保存任何东西，因为关系上有限制。这将取决于它保存表格的顺序。如果您知道更好的方法（最好没有子表单），请分享。

# javascript - 使用 JQuery 更改 :before css 选择器的宽度属性

> ID：10061414
> 
> 赞同：81
> 
> 时间：2012-04-08T08:15:44.247
> 
> 标签：javascript, jquery, css

我有一个包含图像的页面，我使用 :before CSS 选择器对其进行了样式设置。
图像是动态的，因此它没有固定的宽度；所以我需要动态设置 :before 规则的宽度。
我想在客户端使用 JQuery 做到这一点。
假设：

```
.column:before{
    width: 300px;
    float: left;
    content: "";
    height: 430px;
}

.column{
    width: 500px;
    float: right;
    padding: 5px;
    overflow: hidden;
    text-align: justify;
} 
```

如何`:before`使用 JQuery 仅更改具有选择器的类的宽度属性（而不是没有它的类）？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-08T08:29:54.983

我认为没有直接访问伪类规则的 jQuery 方式，但您始终可以将新`style`元素附加到文档的头部，例如：

```
$('head').append('<style>.column:before{width:800px !important;}</style>'); 
```

在此处查看**[现场演示](http://jsfiddle.net/xE7JP/2/)**

我还记得曾经看过一个解决这个问题的插件，但不幸的是我在第一次谷歌搜索时找不到它。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-04-08T08:31:43.833

伪元素是影子 DOM 的一部分，不能修改（但*可以*查询它们的值）。

但是，有时您可以通过使用类来解决这个问题。

### jQuery

```
$('#element').addClass('some-class'); 
```

### CSS

```
.some-class:before {
    /* change your properties here */
} 
```

这可能不适合您的查询，但它确实表明您有时可以实现此模式。

要获取伪元素的值，请尝试一些代码，例如...

```
var pseudoElementContent = window.getComputedStyle($('#element')[0], ':before')
  .getPropertyValue('content') 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-04-08T08:27:35.063

伪元素不是 DOM 的一部分，因此它们不能使用 jQuery 或 Javascript 进行操作。

但正如在接受的答案中指出的那样，您可以使用 JS 附加一个样式块，该块结束了对伪元素的样式设置。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-05-12T12:17:02.410

答案应该是*耆那教*。您不能通过伪选择器选择元素，但您可以使用[`insertRule`](https://developer.mozilla.org/en-US/docs/DOM/CSSStyleSheet/insertRule).

我做了一些对你有用的东西：

```
var addRule = function(sheet, selector, styles) {
    if (sheet.insertRule) return sheet.insertRule(selector + " {" + styles + "}", sheet.cssRules.length);
    if (sheet.addRule) return sheet.addRule(selector, styles);
};

addRule(document.styleSheets[0], "body:before", "content: 'foo'"); 
```

[http://fiddle.jshell.net/MDyxg/1/](http://fiddle.jshell.net/MDyxg/1/)

*为了超级酷（并真正*回答这个问题），我再次推出它并将其包装在一个 jQuery 插件中（但是，仍然不需要 jquery！）：

```
/*!
 * jquery.addrule.js 0.0.1 - https://gist.github.com/yckart/5563717/
 * Add css-rules to an existing stylesheet.
 *
 * @see http://stackoverflow.com/a/16507264/1250044
 *
 * Copyright (c) 2013 Yannick Albert (http://yckart.com)
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php).
 * 2013/05/12
 **/

(function ($) {

    window.addRule = function (selector, styles, sheet) {

        styles = (function (styles) {
            if (typeof styles === "string") return styles;
            var clone = "";
            for (var p in styles) {
                if (styles.hasOwnProperty(p)) {
                    var val = styles[p];
                    p = p.replace(/([A-Z])/g, "-$1").toLowerCase(); // convert to dash-case
                    clone += p + ":" + (p === "content" ? '"' + val + '"' : val) + "; ";
                }
            }
            return clone;
        }(styles));
        sheet = sheet || document.styleSheets[document.styleSheets.length - 1];

        if (sheet.insertRule) sheet.insertRule(selector + " {" + styles + "}", sheet.cssRules.length);
        else if (sheet.addRule) sheet.addRule(selector, styles);

        return this;

    };

    if ($) $.fn.addRule = function (styles, sheet) {
        addRule(this.selector, styles, sheet);
        return this;
    };

}(window.jQuery)); 
```

用法很简单：

```
$("body:after").addRule({
    content: "foo",
    color: "red",
    fontSize: "32px"
});

// or without jquery
addRule("body:after", {
    content: "foo",
    color: "red",
    fontSize: "32px"
}); 
```

[https://gist.github.com/yckart/5563717](https://gist.github.com/yckart/5563717)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-13T13:20:46.803

您可以尝试从基类继承属性：

```
var width = 2;
var interval = setInterval(function () {
    var element = document.getElementById('box');
    width += 0.0625;
    element.style.width = width + 'em';
    if (width >= 7) clearInterval(interval);
}, 50);
```

```
.box {
    /* Set property */
    width:4em;
    height:2em;
    background-color:#d42;
    position:relative;
}
.box:after {
    /* Inherit property */
    width:inherit;
    content:"";
    height:1em;
    background-color:#2b4;
    position:absolute;
    top:100%;
}
```

```
<div id="box" class="box"></div>
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-17T14:36:27.240

一种选择是在图像上使用属性，并使用 jQuery 对其进行修改。然后在 CSS 中取该值：

HTML（注意我假设`.cloumn`是 a`div`但它可以是任何东西）：

```
<div class="column" bf-width=100 >
    <img src="..." />
</div> 
```

jQuery：

```
// General use:
$('.column').attr('bf-width', 100);
// With your image, along the lines of:
$('.column').attr('bf-width', $('img').width()); 
```

然后为了在 CSS 中使用该值：

```
.column:before {
    content: attr(data-content) 'px';
    /* ... */
} 
```

这将从 中获取属性值`.column`，并将其应用于之前。

*来源：[CSS attr](https://developer.mozilla.org/en/docs/Web/CSS/attr)（注意前面的[例子](https://developer.mozilla.org/en/docs/Web/CSS/attr#Examples)），[jQuery attr](http://api.jquery.com/attr/)*。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-08T08:32:08.410

正如 Boltclock 在[他对*使用 jQuery 选择和操作 CSS 伪元素（例如 ::before 和 ::after ）的回答中所说的那样*](https://stackoverflow.com/a/5041526)

> 尽管它们由浏览器通过 CSS 呈现，就好像它们就像其他真实的 DOM 元素一样，但伪元素本身并不是 DOM 的一部分，因此您无法使用 jQuery 选择和操作它们。

最好用 jQuery 设置样式，而不是使用伪 CSS 选择器。

# c++ - 在 OpenCV 中将 SVD 应用于 YCbCr 图像

> ID：10061416
> 
> 赞同：1
> 
> 时间：2012-04-08T08:15:55.283
> 
> 标签：c++, opencv, svd

我正在尝试将图像水印到视频序列中。该过程需要将帧分解为 SVD，我试图使用下面的部分代码来实现。第 47 行的 SVD 构造函数因分段错误而失败。gdb 报告以下错误：

“程序收到信号 SIGSEGV，分段错误。来自 /usr/lib/liblapack.so.3gf 的 dlange_ () 中的 0xb5d31ada”

```
#include <iostream>
#include <stdio.h>
#include "cv.h"
#include "highgui.h"
const unsigned int MAX = 10000;

using namespace cv;
using namespace std;

int NO_FRAMES;

bool check_exit()
{
return (waitKey(27) > 0)?true:false;
}

int main(int argc, char ** argv)
{
Mat rgb[MAX];
Mat ycbcr[MAX];
Mat wm_rgb[MAX];
namedWindow("watermark",1);
namedWindow("RGB", 1);
namedWindow("YCBCR",1);
VideoCapture capture(argv[1]);
Mat watermark = imread(argv[2]);
int i=0;
        capture >> rgb[i];
imshow("watermark", watermark);
while(!rgb[i].empty())
{
imshow("RGB", rgb[i]);
cvtColor(rgb[i], ycbcr[i], CV_RGB2YCrCb);
imshow("YCBCR", ycbcr[i]);
i++;
capture >> rgb[i];

cout<<"frame "<<i<<endl;
if(check_exit())
exit(0);
}
//This line creates Segmentation fault
SVD temp(rgb[0]);
capture.release();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:57:54.743

由于对 C 接口更加熟悉，我将仅描述一些在您的 C++ 代码中显得格格不入的东西：

SVD() 函数期望输入图像是浮点图像，因此您可能需要将比例从标准的 8 位转换为 32 位。以下是一些非常基本（但不是很有效）的代码，用于说明目的：

```
int N = img->width;
IplImage* W = cvCreateImage( cvSize(N, 1), IPL_DEPTH_32F , 1 );
IplImage* A = cvCreateImage( cvGetSize(img), IPL_DEPTH_32F , 1 );
cvConvertScale(img, A);

IplImage* W_mod = cvCreateImage( cvSize(N-l, 1), IPL_DEPTH_32F , 1 );
cvSVD(A, W, NULL, NULL, CV_SVD_MODIFY_A); 
```

SVD 值存储在名为*W*的 Nx1 矩阵（在本例中为 IplImage）中。输入图像*img在**A*中转换为 32 位。我们使用该`CV_SVD_MODIFY_A`标志使其更快并修改*A*中的值。其他选项留空 (NULL)，但您可以根据需要提供参数。请检查这些 OpenCV 文档。

希望您能够从这个工作代码中找出您的 C++ 代码有什么问题。

# java - 在套接字上发送和接收

> ID：10061419
> 
> 赞同：2
> 
> 时间：2012-04-08T08:17:18.523
> 
> 标签：java, c, sockets

我做了一个java socket服务器和c socket客户端，这里是代码

Java 套接字服务器：

```
int Send_Request(String s) {

    try {
        os = socket.getOutputStream();
        os.write(s.getBytes());
        os.flush();

        Log.d(tag,"Data = " + s);

        return 0;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.e(tag,"Send Request Error");
        return -1;
    } 
```

C套接字客户端：

```
void* recv_request()
{
int i,in;
char buf[1024];
while(1)
{
    if ( ( in = read(sockfd, buf, strlen(buf)) ) != -1 )
    {
        LOGD("Received = %s ...",buf);
        sendServerCutText(buf);
        memset(buf,0,strlen(buf));
    }

} 
```

}

问题是..当我从服务器发送时，它阻塞了flush（），c客户端无法接收，直到调用另一个Send_Request。

哪里有问题？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T08:26:15.983

有一个概念问题。您认为 TCP 是面向消息的（发送具有指定长度的消息）。不是那样的，它只提供一个字节*流*。

对于发送具有指定长度的消息，一种常见的技术是首先发送长度（以固定长度编码，例如网络字节顺序中的 4 字节整数），然后发送实际消息。

还有一个实现问题，read 的第三个参数应该是最大读取长度，应该是 1024，`strlen`在未初始化的本地 char 数组上执行显然是未定义的行为。

# jsf - 参数与 和来自 CDI 的 FacesConverter

> ID：10061422
> 
> 赞同：0
> 
> 时间：2012-04-08T08:17:59.080
> 
> 标签：jsf, glassfish, facelets, el, cdi

我不清楚为什么我会得到这个特殊的例外，我认为这是一个红鲱鱼。潜在问题可能与异常的最后一行有关： `MessageConverter.getAsObject..0`实际上应该是 1501（消息 ID）。那么，为什么 MessageConverter.getAsObject 的 id 错误呢？

我认为这可能与 Detail 构造函数有关，它可能将错误的参数传递给 MessageConvert.getAsObject()，特别是 UIComponent 对象——可能该引用需要实例化。

相关EL：

```
 <h:outputLink id="link1" value="detail.xhtml">
            <f:param name="id" value="#{m.getMessageNumber()}" />
             <h:outputText value="#{m.getMessageNumber()}" />
        </h:outputLink> 
```

glassfish 显示：

```
INFO: MessageConverter.getAsObject..1501
INFO: SingletonNNTP.forward..11
WARNING: 1501
java.lang.ArrayIndexOutOfBoundsException: 1501
    at java.util.Arrays$ArrayList.get(Arrays.java:2866)
    at net.bounceme.dur.nntp.SingletonNNTP.getMessage(SingletonNNTP.java:86)
    at net.bounceme.dur.nntp.MessageConverter.getAsObject(MessageConverter.java:21)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:171)
    at javax.faces.component.UIViewParameter.getConvertedValue(UIViewParameter.java:394)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIViewParameter.processValidators(UIViewParameter.java:273)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

INFO: MessageConverter.getAsObject..0
INFO: SingletonNNTP.forward..11 
```

MessageConverter，我认为这个类到目前为止还不错：

```
package net.bounceme.dur.nntp;

import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;
import javax.mail.Message;

@FacesConverter("messageConverter")
public class MessageConverter implements Converter {

    private static final Logger logger = Logger.getLogger(MessageConverter.class.getName());
    private static final Level level = Level.INFO;
    private SingletonNNTP nntp = SingletonNNTP.INSTANCE;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        logger.log(level, "MessageConverter.getAsObject..{0}", value);
        Message message = nntp.getMessage(Integer.parseInt(value));
        return message;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        Message message = (Message) value;
        return String.valueOf(message.getMessageNumber());
    }
} 
```

这是问题类 Detail，构造函数尤其值得怀疑：

```
package net.bounceme.dur.nntp;

import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.inject.Named;
import javax.mail.Message;

@Named
public class Detail {

    private static final Logger logger = Logger.getLogger(Detail.class.getName());
    private static final Level level = Level.INFO;
    private int id = 0;
    private Message message = null;
    private SingletonNNTP nntp = SingletonNNTP.INSTANCE;

    public Detail() {
        MessageConverter mc = new MessageConverter();
        FacesContext fc = FacesContext.getCurrentInstance();
        String value = String.valueOf(id);
        UIComponent ui = null;
        Object obj = mc.getAsObject(fc, ui, value);
        message = (Message) obj;
    }

    public int forward() {
        logger.log(level, "Detail.forward..{0}", id);
        id = id + 1;
        logger.log(level, "..Detail.forward {0}", id);
        return id;
    }

    public int back() {
        logger.log(level, "Detail.back..{0}", id);
        id = id - 1;
        logger.log(level, "..Detail.back {0}", id);
        return id;
    }

    public Message getMessage() {
        return message;
    }

    public String getContent() throws Exception {
        return message.getContent().toString();
    }
} 
```

参考：

[viewparam-vs-managedpropertyvalue-param-id](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)似乎不太适用，因为我正在使用 CDI、@Named，因此无法使用 @ManagedProperty，这是“真正的”问题。我想我没有看到 CDI 的好处，因为 @ManagedProperty 看起来非常好。

[ProcessingGETRequestParameters](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)可能有一个关键段落：

> 是的，它是 @ManagedBean 而不是 @FacesConverter！多么尴尬，但不可能在@FacesConverter 中注入@EJB 来完成数据库交互工作。当您使用 CDI @Inject 注入属性时，同样的问题也会出现，您需要使用 @Named 而不是 @FacesConverter。Java EE/JSF/CDI 人员正在为未来的 JSF 2.2 版本开发此功能，另请参阅 JSF 规范问题 763。如果您确实需要将其设置为 @FacesConverter（例如，为了利用 forClass 属性） ，那么您总是可以从 JNDI 手动获取 EJB。另见下一章。

就我的目的而言，这可能与 EJB 相关，因此可能有点偏离主题。但是，也许这就是我遇到的确切困难？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T11:01:54.163

该转换器应该用于`<f:viewParam>`.

```
<f:viewParam name="id" value="#{detail.message}" converter="messageConverter" /> 
```

这基本上会将请求参数转换`id`为对象`Message`，然后将其设置在后面的属性中`#{detail.message}`。你应该只在`Detail`课堂上为它提供一个 setter，我在你的 bean 中看不到任何一个。

您不应该在`Detail`类的构造函数中进行转换工作。你应该只有一个`Message`属性，而不是`id`or `nntp`。删除整个构造函数。

```
@Named
public class Detail {

    private Message message; 

    // Getters+setters+actions
} 
```

# background - 周围的 DIV 背景颜色和内联块

> ID：10061430
> 
> 赞同：1
> 
> 时间：2012-04-08T08:20:01.477
> 
> 标签：background, css

如果我为包含设置了 display:inline-block 的 div 的 div 设置背景颜色，则不使用背景颜色。

JSFiddle 链接如下。

考虑这个片段：

CSS：

```
.divisionOutputArea {
  background-color: yellow;
}
.divisionColumn[data-division=true][data-boxed=true] {
  border: 1px solid black;
  display: inline-block;
  float: left;
}
.divisionColumn[data-division=true] {
  display: inline-block;
  float: left;
}
.divisionColumn[data-result=true] {
  display: inline-block;
  float: left;
} 
```

这个HTML：

```
<div class="divisionOutputArea">
    <div class="divisionColumn" data-division="true" data-boxed="true">
        1<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-division="true" data-boxed="true">
        2<br />2<br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-division="true" data-boxed="true">
        3<br />3<br />3<br /><br /><br />
    </div>
    <div class="divisionColumn" data-division="true" data-boxed="true">
        1<br /><br />1<br />1<br /><br />
    </div>
    <div class="divisionColumn" data-division="true" data-boxed="true">
        2<br /><br /><br />2<br />2<br />
    </div>
    <div class="divisionColumn" data-result="true">
        :<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-result="true">
        5<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-result="true">
        =<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-result="true">
        2<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-result="true">
        4<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-result="true">
        6<br /><br /><br /><br /><br />
    </div>
    <div class="divisionColumn" data-result="true">
        2<br /><br /><br /><br /><br />
    </div>
</div> 
```

我想渲染使用区域的背景，`<div class="divisionOutputArea">[Contained divs as of example]</div>`例如黄色。

在 FF11 和 Webkit 上试过。跨浏览器不是问题。

不工作：http: [//jsfiddle.net/8BVZB/](http://jsfiddle.net/8BVZB/)

有点工作，但不是我想要的：http: [//jsfiddle.net/d6bM6/](http://jsfiddle.net/d6bM6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:23:09.340

内部 div 是浮动的，因此您需要清除浮动。

一个非常简单的方法是将溢出：隐藏到包装元素。[演示](http://jsfiddle.net/Starx/8BVZB/1/)

```
.divisionOutputArea {
  background-color: yellow;
  overflow: hidden;
} 
```

然而，一个安全的方法是给

```
<div style="clear: both;"></div> 
```

在包装元素的末尾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:28:00.863

两个答案都是正确的。

@Starx 的答案有一个优势，即不需要触摸原始 CSS，并且 float:left 有助于保留 HTML 源代码格式，通过使用 display:inline-block 可以对空白敏感。

但是，原始问题中的 float: left 是多余的，因为 OP 不知道 display: inline-block 的空白敏感性，所以@“Mr Lister”的答案也是正确的。

在这种特殊情况下，不需要更一般的答案＃1，因为 float:left 是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:47:38.157

如果您只是`float:left`从内部 div （以及它们之间的空格）中删除，您会得到[http://jsfiddle.net/d6bM6/2/](http://jsfiddle.net/d6bM6/2/)
但如果这也不是您想要的，您应该创建一个屏幕截图来说明您的操作方式想让它看起来。

# sql-server - Web 服务：如何使用 VB 使用 SQL Server 数据库表对用户进行身份验证

> ID：10061432
> 
> 赞同：1
> 
> 时间：2012-04-08T08:20:39.187
> 
> 标签：sql-server, vb.net, web-services, ado.net

有人可以告诉我如何使用 VB 作为 Web 服务使用 SQL Server 数据库表对用户进行身份验证。我设法通过这个 VB 代码连接到 SQL 服务器；

```
Public Sub ConnectToSQL()
        Dim con As New SqlConnection
        Dim cmd As New SqlCommand
        Try
            con.ConnectionString = "Data Source=(local);Initial Catalog=TestDatabase;Persist Security Info=True;User ID=sa;Password=421"
            con.Open()
        Catch ex As Exception
            MessageBox.Show("Error while connecting to SQL Server." & ex.Message)
        Finally
            con.Close() 'Whether there is error or not. Close the connection.
        End Try
    End Sub 
```

任何一个？提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T06:55:44.613

**我建议您首先阅读有关 SQL Server 和 ADO.Net 的基本教程，然后发布问题。这将有助于使您的概念清晰，并且可以在更集中的问题领域提供任何帮助。顺便说一句，没有难过的感觉，只是想让你对编程感到舒服。:)**

第1步 ：

创建相关的数据库表。这些可能包括一个`users`表和其他表，例如`roles`等...

**编辑：**您可以使用 SQL 脚本在 DB 中创建表。请在下面找到一个示例。

```
-- Sample Table Creation and Index Creation script for MCIS-4423
-- This script is designed to be "re-runnable", but you need to be careful, 
-- Since this will DROP the table, which would be bad if it was an existing table with data

-- Make sure you are in the correct database
USE [AdventureWorks]
GO

-- Drop Check Constraint
IF  EXISTS (SELECT * FROM sys.check_constraints WHERE object_id = OBJECT_ID(N'[dbo].[CK_Team_TeamID]') AND parent_object_id = OBJECT_ID(N'[dbo].[Team]'))
ALTER TABLE [dbo].[Team] DROP CONSTRAINT [CK_Team_TeamID]
GO

-- Drop Table
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Team]') AND type in (N'U'))
DROP TABLE [dbo].[Team]
GO

-- Create Table
CREATE TABLE [dbo].[Team](
    [TeamID] [char](3) NOT NULL,
    [TeamName] [varchar](20) NOT NULL,
    [City] [varchar](50) NOT NULL,
    [StateCode] [char](2) NULL,
    [PostalCode] [char](5) NULL,
CONSTRAINT [PK_Team] PRIMARY KEY CLUSTERED  
(
    [TeamID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

-- Add Check Constraint
ALTER TABLE [dbo].[Team]  WITH CHECK ADD  CONSTRAINT [CK_Team_TeamID] CHECK  (([TeamID] like '[A-Z][A-Z][A-Z]'))
GO
ALTER TABLE [dbo].[Team] CHECK CONSTRAINT [CK_Team_TeamID]
GO

-- Drop index if it exists
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[Team]') AND name = N'IX_Team_TeamName')
DROP INDEX [IX_Team_TeamName] ON [dbo].[Team] WITH ( ONLINE = OFF )
GO

-- Add non-clustered index on StateCode column
-- Use ONLINE = ON if you have Developer or Enterprise Edition
-- Use MAXDOP = 2 (set to roughly 25% of the number of CPU cores to keep index creation from affecting performance)
CREATE NONCLUSTERED INDEX [IX_Team_TeamName] ON [dbo].[Team] 
(
    [StateCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = ON, MAXDOP = 2, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

**请注意，此示例复制自[http://sqlserverperformance.wordpress.com/2007/09/27/sample-table-and-index-creation-script-for-sql-server-2005/](http://sqlserverperformance.wordpress.com/2007/09/27/sample-table-and-index-creation-script-for-sql-server-2005/)以及与其相关的所有信用内容归作者所有。**

第2步 ：

编写 SQL 查询以根据用户`username`和查找用户`password`。您可能会进行密码加密，但这超出了当前问题的范围。

**编辑：**示例查询可以如下：

```
SELECT username FROM users
WHERE username=@username and password=@password 
```

您可以阅读[此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)`SqlCommand`的文档以了解如何向查询添加参数。

第 3 步：

添加`WebMethod`s 以便您可以`users`在数据库中创建记录。用于`SqlCommand`触发`INSERT`对数据库表的查询。

**编辑：**阅读[此处](http://www.w3schools.com/webservices/ws_example.asp)了解如何在 VB.Net 中编写 Web 服务的示例。是的，你现在已经知道，如何使用`SqlCommand`触发 SQL 查询，对`INSERT`查询也做同样的事情。

第4步 ：

创建一个`WebMethod`, 验证用户。为此，请使用`SqlCommand`object 来触发您在步骤 2 中编写的查询。如果结果是一行，则该用户是有效的。

**编辑：**请参阅上述步骤的说明，您应该可以自己创建它。

希望我足够清楚。

# java - 在自定义列表中保存文本和复选框状态

> ID：10061434
> 
> 赞同：-1
> 
> 时间：2012-04-08T08:20:44.887
> 
> 标签：java, android, checkbox, custom-lists, lost-focus

我正在制作一个自定义列表，我想保存 R.id.quantity 中的一些 TextFile 的文本。

我还想保存复选框的状态。我试图管理列表中复选框的选中状态。

该列表包含其他视图控件。我已将它们放在 Viewholder 类中。我正在使用一些初始数组值初始化 qtyTxtV，一旦此代码中发生事件，数组的值就会更改，但列表内容会被删除。请帮忙。

现在这段代码给了我一个空指针异常：

```
class MyAdapter1 extends BaseAdapter {
Context context;
ArrayList<Integer> price = new ArrayList<Integer>();
ArrayList<String> names = new ArrayList<String>();
public static HashMap<Integer, String> myList = new HashMap<Integer, String>();
static class ViewHolder {
    public TextView tvQuantityName, tvPrice, tvDishName;
    public ImageView imv1, imv2, imv3, imv4, imv5;
    public EditText edtQty;
    public CheckBox chkAdd;
}
public MyAdapter1(VegDetail vegDetail, ArrayList<String> names2,
        ArrayList<Integer> price2) {
    this.context = vegDetail;
    this.names = names2;
    this.price = price2;
    }
@Override
public int getCount() {
    return names.size();
}

@Override
public Object getItem(int position) {
    return null;
}
@Override
public long getItemId(int position) {
    return 0;
}
@SuppressWarnings("null")
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    View row = convertView;
    ViewHolder holder = null;

    // View row = inflater.inflate(R.layout.rowlayout, parent, false);
    if (row == null) {
        LayoutInflater inflater = LayoutInflater.from(context);
            row = inflater.inflate(R.layout.rowlayout, parent, false);
        holder.edtQty = (EditText) row.findViewById(R.id.quantity);
        holder.imv1 = (ImageView) row.findViewById(R.id.star1);
        holder.imv2 = (ImageView) row.findViewById(R.id.star2);
        holder.imv3 = (ImageView) row.findViewById(R.id.star3);
        holder.imv4 = (ImageView) row.findViewById(R.id.star4);
        holder.imv5 = (ImageView) row.findViewById(R.id.star5);
        holder.tvDishName = (TextView) row.findViewById(R.id.item_name);
        holder.tvPrice = (TextView) row.findViewById(R.id.price1);
        holder.tvQuantityName = (TextView) row.findViewById(R.id.qtyTxtV);
        holder.chkAdd = (CheckBox) row.findViewById(R.id.chkAdd);
        EditText edtQty = (EditText) row.findViewById(R.id.quantity);
        edtQty.setText(VegDetail.qtyArray[position].toString());
        CheckBox chkAdd = (CheckBox) row.findViewById(R.id.chkAdd);
        chkAdd.setSelected(VegDetail.chkArray[position]);           
        holder.edtQty.addTextChangedListener(new TextWatcher() {
            public void onTextChanged(final CharSequence s,
                    final int start, final int before, final int count) {
            }
            public void afterTextChanged(final Editable s) {
                int newValue;
                final String boxContents = s.toString();
                if (!boxContents.isEmpty()) {
                    try {
                        newValue = Integer.parseInt(boxContents);
                        VegDetail.qtyArray[position] = newValue;
                    } catch (final Exception exc) {
                        VegDetail.qtyArray[position] = 0;
                    } finally {
                    }
                } else {
                    VegDetail.qtyArray[position] = 0;
                }
            }
            public void beforeTextChanged(final CharSequence s,
                    final int start, final int count, final int after) {
            }
        });

        row.setTag(holder);
    } else {
        holder = (ViewHolder) row.getTag();
    }

    CheckBox chkAdd=(CheckBox)row.findViewById(R.id.chkAdd);
    chkAdd.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            //VegDetail is another class where I gonna use checked list's states
            VegDetail.chkArray[position] = isChecked;               
        }
    });
    final TextView tv1 = (TextView) row.findViewById(R.id.item_name);
    TextView tv2 = (TextView) row.findViewById(R.id.price1);
    final TextView tvQty = (TextView) row.findViewById(R.id.quantity);
    tv1.setText(names.get(position));
    tv1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(context,
                    "itme name is=>" + tv1.getText().toString(),
                    Toast.LENGTH_LONG).show();
        }
    });
    tv2.setText("Rs:" + price.get(position));   
    return row;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T14:44:49.977

NPE 必须位于以下行：

```
 holder.edtQty = (EditText) row.findViewById(R.id.quantity); 
```

因为`holder`就像`NULL` 你刚刚在上面定义的那样......`ViewHolder holder = null`

# javascript - 如何在 jqgrid 高级搜索对话框中本地化按钮工具提示

> ID：10061436
> 
> 赞同：1
> 
> 时间：2012-04-08T08:21:02.107
> 
> 标签：javascript, jqgrid

似乎 tooltips `Add subgroup`, `Add rule`,`Delete rule`是在 jqgrid 代码中硬编码的。

```
 inputAddSubgroup = $("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"); 
```

如何本地化它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T12:40:09.783

我向 trirand 发布了我的详细[建议](http://www.trirand.com/blog/?page_id=393/bugs/some-problems-in-grid-filter-js-module/#p25672)，并在稍后两次提醒 Tony 这个问题。

此外，我在[答案](https://stackoverflow.com/a/8854864/315935)中描述了一种允许自定义高级搜索对话框的解决方法

![在此处输入图像描述](../Images/a990df5d634cd1328bb51c4a463f0842.png)

对原demo进行简单修改，制作如下[新demo](http://www.ok-soft-gmbh.com/jqGrid/CustomizeAddRuleButtonOfAdvancedSearching1.htm)

![在此处输入图像描述](../Images/08290453d6a157804f47a8b0e14bddff.png)

我使用了以下代码

```
$.extend($.jgrid.search, {
    multipleSearch: true,
    multipleGroup: true,
    recreateFilter: true,
    closeOnEscape: true,
    closeAfterSearch: true,
    overlay: 0,
    afterRedraw: function () {
        $('input.add-rule',this).button().val('Add new rule')
            .attr('title', 'My Add new rule tooltip');
        $('input.add-group',this).button().val('Add new group or rules')
            .attr('title', 'My new group or rules tooltip');
        $('input.delete-rule',this).button().val('Delete rule')
            .attr('title', 'My Delete rule tooltip');
        $('input.delete-group',this).button().val('Delete group')
            .attr('title', 'My Delete group tooltip');
        $(this).find("table.group:not(:first)").css({
            borderWidth: "1px",
            borderStyle: "dashed"
        });
    }
}); 
```

我在组中添加了额外的边框，因为我觉得那里很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:25:01.747

您可以再次使用 jquery，例如：`$('select the button').attr('title', 'New localized title')`

# c# - 我应该使用私有函数作为从 case 语句返回值的最佳方式吗？

> ID：10061438
> 
> 赞同：1
> 
> 时间：2012-04-08T08:21:18.877
> 
> 标签：c#

在我的程序中，我编写了以下私有变量和函数。

```
 private string _viewName;
    private string _refValue;

    private void getContentDetails(string id) {
        switch (id.Substring(2, 2))
        {
            case "00": _refValue = "14"; _viewName = "Menu"; break;
            case "01": _refValue = "18"; _viewName = "Topic";  break;
            default: _refValue = "00"; _viewName = "Menu"; break;
        }
    } 
```

我正在寻找一种更好的编码方式，我正在考虑用两个私有函数替换它。

```
 getViewName(id);
   getRefValue(id); 
```

有人可以建议我编写此代码的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:25:30.537

使用一个类：

```
class ContentDetails
{
    public string ViewName { get; set; }
    public string RefValue { get; set; }
} 
```

像这样使用它：

```
switch (id.Substring(2, 2))
{
    case "00": return new ContentDetails { RefValue = "14", ViewName = "Menu" };
    case "01": return new ContentDetails { RefValue = "18", ViewName = "Topic" };
    default: return new ContentDetails { RefValue = "00", ViewName = "Menu" };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T08:30:44.347

在 switch 中放置多个语句当然没有错，但看起来这里可能存在一些重复，特别是如果与 ID 耦合的所需值发生了更改。

在我看来，您必须对两者都使用地图集合对象，`viewName`并将`refValue`id 映射到相应的值。然后使用`yourCollection.get(id);`. 这肯定会使您的代码保持最佳的可维护性和一致性。

```
Dictionary<string, string> _refValues = new Dictionary<string, string>();
Dictionary<string, string> _viewNames = new Dictionary<string, string>();
fillDictionaries();

void fillDictionaries()
{
    _refValues.add("00","14"); //one way to add a value
    _viewNames["00"] = "Menu"; //another way to add a value
}

string getRefValue(string id)
{
    return _refvalues[id]; //there may be a get method but I'm not using an IDE atm
}

//same function for viewNames 
```

这甚至还不是最好的解决方案。最好的办法是使用字典将 refValues 耦合到 viewNames，然后使用另一个字典将 ids 映射到 refvalues。然后您可以通过使用 id 作为 key 来获取 refValue，然后将返回的 refValue 作为 key 来获取 viewName。希望我说清楚了:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T08:39:40.143

有几种方法可以返回多个值。

您可以使用`out`参数：

```
private void getContentDetails(string id, out string viewName, out string refValue) {
  switch (id.Substring(2, 2)) {
    case "00": refValue = "14"; viewName = "Menu"; break;
    case "01": refValue = "18"; viewName = "Topic";  break;
    default: refValue = "00"; viewName = "Menu"; break;
  }
} 
```

您可以返回一个包含两个值的对象：

```
private KeyValuePair<string, string> getContentDetails(string id) {
  switch (id.Substring(2, 2)) {
    case "00": return new KeyValuePair<string, string>("Menu", "14");
    case "01": return new KeyValuePair<string, string>("Topic", "18");
    default: return new KeyValuePair<string, string>("Menu", "00");
  }
} 
```

您可以创建自己的对象来返回：

```
private class ContentDetails {

  public string ViewName { get; private set; }
  public string RefValue { get; private set; }

  public ContentDetails(string name, value) {
    ViewName = name;
    RefValue = value;
  }

}

private ContentDetails getContentDetails(string id) {
  switch (id.Substring(2, 2)) {
    case "00": return new ContentDetails("Menu", "14");
    case "01": return new ContentDetails("Topic", "18");
    default: return new ContentDetails("Menu", "00");
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T08:28:08.400

虽然我看不出在类中使用私有全局变量有什么问题，但如果你想要一个备用变量，你可以通过引用和作为输出参数传递它们。

```
private getContentDetails(string id, ref string refValue, ref string viewName)

private getContentDetails(string id, out string refValue, out string viewName) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T09:49:08.033

试试这个实现地图的类（正如马里奥建议的那样）。

将`idValueDictionary`映射`id`到`refValue`，将`valueNameDictionary`映射`refValue`到`nameValue`。字典是硬编码的，但如果它适合您的需要，您可以在运行时加载数据。

```
using System;
using System.Collections.Generic;

class ContentDetails
{
  // Maps id to RefValue.
  private static readonly Dictionary<string, string> idValueDictionary =
    new Dictionary<string,string>()
    {
      { "00", "14" },
      { "01", "18" },
      { "XX", "00" }
    };

  // Maps RefValue to ViewName
  private static readonly Dictionary<string, string> valueNameDictionary =
    new Dictionary<string,string>()
    {
      { "00", "Menu" },
      { "14", "Menu" },
      { "18", "Topic" }
    };

  // Private constructor. Use GetContentDetails factory method.
  private ContentDetails(string refValue, string viewName)
  {
    this.RefValue = refValue;
    this.ViewName = viewName;
  }

  // Gets the RefValue.
  public string RefValue
  {
    get;
    private set;
  }

  // Gets the ViewName.
  public string ViewName
  {
    get;
    private set;
  }

  // Creates a new ContentDetails from the specified id.
  public static ContentDetails GetContentDetails(string id)
  {
    // Extract key from id.
    string key = id.Substring(2,2);

    // If key not in dictionary, use the default key "XX".
    if (!idValueDictionary.ContainsKey(key))
    {
      key = "XX";
    }

    // Get refValue and viewName from dictionaries.
    string refValue = idValueDictionary[key];
    string viewName = valueNameDictionary[refValue];

    // Return a new ContentDetails object with properties initialized.
    return new ContentDetails(refValue, viewName);
  }
} 
```

像这样使用它：

```
// Static factory method creates a new ContentDetails from the specified `id`
ContentDetails details = ContentDetails.GetContentDetails(id);

Console.WriteLine(details.RefValue); // writes RefValue
Console.WriteLine(details.ViewName); // writes ViewName 
```

`ContentDetails`使用该方法创建一个新`GetContentDetails`属性后，您可以访问这两个属性以获取`RefValue`和`ViewName`。这些属性是只读的 ( `private set`)，因此一旦创建了类实例（它是不可变的），您就无法更改值。每次你有不同`id`的查找时创建一个新的。

# sql - 如何在特定条件下找到多对多的总和？

> ID：10061443
> 
> 赞同：1
> 
> 时间：2012-04-08T08:23:37.173
> 
> 标签：sql

我有一个多对多的关系，我想找到在某个日期创建的一些 A 的所有 W 及其总和（频率）。最好的方法是什么？

结果不应该**是**：

```
w.name | sum 
-------+------
 bar   |  2
 bar   |  5  
 baz   |  4
 bim   |  3
 foo   |  2
 foo   |  3 
```

结果应该是：

```
w.name | sum 
-------+------
 bar   |  7  
 baz   |  4
 bim   |  3
 foo   |  5 
```

我的桌子：

表 A：

```
id  | title | author | created_at 
----+-------+--------+-------------
... |  ...  |  ...   | ...
11  |  abc  |  ccc   |  Thu, 5 Apr 2012 08:01:25 GMT
12  |  bcb  |  ddd   |  Thu, 5 Apr 2012 10:11:15 GMT
13  |  dfg  |  aaa   |  Fri, 6 Apr 2012 07:33:45 GMT 
```

表 AW：

```
id  | aid | wid | freq
----+-----+-----+------
... | ... | ... | ...
201 | 11  |  2  |  2
202 | 11  |  3  |  4
203 | 11  | 17  |  2
204 | 12  | 17  |  3
205 | 12  | 66  |  1
206 | 12  | 12  |  2
207 | 12  | 24  |  5
208 | 12  |  7  |  3
209 | 13  |  2  |  5
210 | 13  | ... | ... 
```

表 W：

```
id  | name  |  ...  
----+-------+--------
... |  ...  |  ...   
2   |  bar  |  ...   
3   |  baz  |  ...   
... |  ...  |  ...
7   |  bim  |  ...   
... |  ...  |  ...
17  |  foo  | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:31:17.283

对于每个，今天创建`W`的频率总和：`A`

```
select  W.name
,       sum(AW.frequency)
from    A
join    AW
on      AW.aid = a.id
join    W
on      W.id = AW.bid
where   '2012-04-08' < A.created_at and A.created_at < '2012-04-09'
group by
        W.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:33:55.033

```
SELECT w.name, SUM(aw.frequency)
FROM a INNER JOIN aw ON (a.id = aw.aid)
       INNER JOIN w ON (aw.wid = w.id)
WHERE a.created_at >= INITIAL_DATE and a.created_at <= END_DATE
GROUP BY w.name 
```

# android - Android - 蓝牙查找设备错误

> ID：10061446
> 
> 赞同：0
> 
> 时间：2012-04-08T08:23:48.080
> 
> 标签：android, bluetooth, android-bluetooth

我是新来的，所以如果我写了一些不好的东西，我深表歉意，我的代码中出现了一些错误，应该找到一些但设备（在 Eclipse 中它看起来不错，但是当我单击按钮 Find Device 时它显示了一些 Force Quit :(

**代码**

```
package com.moj.test;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Bluetooth extends Activity{

    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    private static final int REQUEST_ENABLE_BT = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bluetooth);
        Button bStart = (Button) findViewById(R.id.btbutton1);
        Button bFind = (Button) findViewById(R.id.btbutton2);

        bStart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                BluetoothStart();       
            }
        });

        bFind.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // Register the BroadcastReceiver
                IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
                registerReceiver(mReceiver, filter); // Don't forget to unregister during onDestroy
                mBluetoothAdapter.startDiscovery();

            }
        });

    }

    public void BluetoothStart() {
        if (mBluetoothAdapter != null) {
            if (!mBluetoothAdapter.isEnabled()) {
                //Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE), REQUEST_ENABLE_BT);
            }
        }
    }

    // Create a BroadcastReceiver for ACTION_FOUND
    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            EditText te = (EditText) findViewById(R.id.editText1);
            String action = intent.getAction();
            // When discovery finds a device
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                // Get the BluetoothDevice object from the Intent
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                // Add the name and address to an array adapter to show in a ListView
                te.setText(device.getName() + "\n" + device.getAddress());
            }
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:43:31.913

你不能在模拟器上运行它，因为它不支持蓝牙。您需要在真实设备上对其进行测试。

并且不要忘记在清单中包含蓝牙权限。

```
<manifest ... >
  <uses-permission android:name="android.permission.BLUETOOTH" />
  ...
</manifest> 
```

# java - 如何在android的自动完成文本视图中设置联系人的号码？

> ID：10061449
> 
> 赞同：2
> 
> 时间：2012-04-08T08:24:07.470
> 
> 标签：java, android, autocomplete, android-contentprovider

我有一个代码，可以从中获取自动完整文本视图中的联系人姓名，这是我的代码

```
autoContacts=(AutoCompleteTextView)findViewById(R.id.actvContacts);
          Cursor emailCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
            startManagingCursor(emailCursor);
            autoContacts.setAdapter(new SimpleCursorAdapter(this, android.R.layout.simple_dropdown_item_1line, emailCursor, new String[] {Email.DATA1}, new int[] {android.R.id.text1}));
            autoContacts.setThreshold(0); 
```

但是当我单击其中一个名称时，它会在该自动完成文本视图中设置一个文本，如下所示：

```
android.content.ContentResolver$CursorWrapperInner@44efc9c8 
```

但是在这里我想设置特定的电话号码，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:29:15.567

您需要使用 setCursorToStringConverter

> 设置用于将过滤游标转换为字符串的转换器。 [http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)

在您的情况下，您可以执行以下操作：

```
String[] from = new String[] {
        ContactsContract.Contacts.DISPLAY_NAME,
        ContactsContract.CommonDataKinds.Phone.NUMBER
};
autoContacts=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
Cursor emailCursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
startManagingCursor(emailCursor);
SimpleCursorAdapter adapter =new SimpleCursorAdapter(this, android.R.layout.simple_dropdown_item_1line, emailCursor, from, new int[] {android.R.id.text1}); 
adapter.setCursorToStringConverter(new CursorToStringConverter() {              
        @Override
        public CharSequence convertToString(Cursor cursor) {
            final int columnIndex = cursor.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER);
            final String str = cursor.getString(columnIndex);
            return str;
        }
});
autoContacts.setAdapter(adapter);
autoContacts.setThreshold(0); 
```

# asp.net-mvc - MVP 的 MVC 教程

> ID：10061451
> 
> 赞同：0
> 
> 时间：2012-04-08T08:24:32.287
> 
> 标签：asp.net-mvc, mvp

我是 MVP 新手。

我可以使用为 asp.net MVC 创建的教程来学习 MVP 模式基础和基础知识吗？还是差异太大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:27:33.120

2 种模式非常不同。MVP 模式可以与经典的 WebForms 一起使用，而 ASP.NET MVC 已经在框架本身中集成了许多 MVC 模式的部分。关注点分离已经存在。如果您想将 MVP 与经典 WebForms 一起使用，您将需要做更多的工作，因为该模式在框架中不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:46:29.897

**MVC**适用于普通的服务器端脚本。在 MVC 中，开发人员总是尽量保持控制器非常精简。控制器主要用于选择合适的模型并反映在视图上。但是在当今的 Web 应用程序中，视图部分已经发生了根本性的变化，变得复杂到足以产生一个又大又胖又凌乱的控制器。所以现在我们需要一个新的地方来放置用户界面的复杂控制逻辑。这里**MVP的****P**进来了，即 Presenter。因此演示者负责控制特定用户界面组件的逻辑。不用担心控制器还在这里，命名为**Application Controller**。它最终负责在相对较大的应用程序组件之间进行切换。所以**MVP********也可以说是**MVPC(!!)**。顺便说一句，这是我理解 MVP 的方式，显然不是任何基本规则。但是谷歌有一些关于 MVP 的非常酷的文档。******

# android - android 设备上的应用路径存储在哪里？

> ID：10061452
> 
> 赞同：0
> 
> 时间：2012-04-08T08:24:38.453
> 
> 标签：android, android-2.2-froyo

我在我的三星平板电脑（gt-p1000）上使用了一个应用程序，它必须在某处存储一些设置，有时我必须删除应用程序数据才能解锁应用程序，但是这样删除了太多东西然后我只想删除文件存储特定信息。我在哪里可以找到它们，或者如何编辑一些注册表项？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:31:12.413

您应该使用与存储数据相同的机制。从你的问题中不清楚你在做什么，但我可以想到两件事：

如果您使用首选项，那么您需要以与设置它们相同的方式清除它们（因为它们没有像您想象的那样存储在文件中，它更像是一个数据库）

如果您存储实际文件，那么您应该知道该目录，因为您在其中编写了一个文件。

# c++ - gdb地址和“真实”地址之间的区别？

> ID：10061475
> 
> 赞同：12
> 
> 时间：2012-04-08T08:29:29.850
> 
> 标签：c++, c, gdb, hex, memory-address

如果我在 gdb 中运行一个 C/C++ 程序（在使用 -g 标志编译之后）并检查某些变量、参数...等的地址，然后我在 gdb 之外运行它（使用`./`）这些地址将是和我在gdb中看到的一样吗？如果它们不同，它们通常是相似的还是会有很大的不同？

我问这个是因为我有一个在 gdb 中完美运行的缓冲区溢出程序（有和没有断点），但是当我尝试在 gdb 之外运行它时它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T15:20:39.060

> 我检查某些变量、参数...等的地址，然后在 gdb 之外运行它（使用 ./）这些地址是否与我在 gdb 中看到的相同

这取决于。

1.  主可执行文件中定义的全局变量将保持在相同的地址（除非可执行文件是使用标志构建`-fpie`并链接的。`-pie`
2.  [由于ASLR](http://en.wikipedia.org/wiki/Address_space_layout_randomization)的原因，在其他共享库中定义的全局变量可能具有截然不同的地址。
3.  由于 ASLR，局部变量和参数可能会移动几个 K 字节。
4.  由于 ASLR，或者如果您的程序是多线程的，堆分配的变量也可能会急剧移动。

请注意，Linux 上的 GDB 默认禁用 ASLR，以使调试更容易。您可以在 GDB 下使用`set disable-randomization off`. 这可能允许您在 GDB 下重现该问题。

> 我有缓冲区溢出

另请注意，[Valgrind](http://valgrind.org/)和[Address Sanitizer](http://code.google.com/p/address-sanitizer/)等工具在查找缓冲区溢出方面通常比在 GDB 下运行更有效。Address Sanitizer 尤其*出色*，因为它可以在全局变量和堆栈中发现缓冲区溢出（Valgrind 没有）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T08:38:33.517

您永远不应该假设某个代码或变量将位于固定位置。

过去在大多数操作系统中都是如此，但这是一个安全漏洞。恶意软件使用它来影响程序。操作系统将倾向于打乱地址以提高安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:34:27.367

使用标志编译会`-g`增加代码大小，因为它会嵌入可执行的额外信息。

至于您的缓冲区问题，在出现问题的地方发布一段代码会有所帮助。

# java - 如何在java中使用公历和日期获取一天的开始

> ID：10061477
> 
> 赞同：1
> 
> 时间：2012-04-08T08:29:47.090
> 
> 标签：java, date, gregorian-calendar

如果数据是在过去 3 天内创建的，我正在尝试标记日期。我想从一开始（00:00）开始最后 3 天。

我有这个代码：

```
 int days = 3 
    GregorianCalendar gc=new GregorianCalendar();
    gc.add(GregorianCalendar.DAY_OF_MONTH, -days);
    if (timeCreated.before(gc.getTime())) {
        return true;
    }
    return false; 
```

如果当前时间是 16:00 时钟，我会得到过去 3 天，从 16:00 时钟到现在。我想从 3 天前的 00:00 到现在。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T08:36:22.110

将日历对象中的小时、分钟和秒设置为零。

```
gc.set(GregorianCalendar.HOUR_OF_DAY, 0);
gc.set(GregorianCalendar.MINUTE, 0);
gc.set(GregorianCalendar.SECOND, 0);
gc.set(GregorianCalendar.MILLISECOND,0); 
```

请记住在您调用后执行此操作`gc.add`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:38:26.623

尝试

```
gc.set(GregorianCalendar.HOUR_OF_DAY,0);
gc.set(GregorianCalendar.MINUTE,0);
gc.set(GregorianCalendar.SECOND,0);
gc.set(GregorianCalendar.MILLISECOND,0); 
```

# jquery - 在 jQuery .load 之后执行一个动作

> ID：10061484
> 
> 赞同：0
> 
> 时间：2012-04-08T08:30:44.680
> 
> 标签：jquery, function

我需要在 jQuery .load 调用之后执行一个操作，目前这是我的代码：

```
function ajax_autopaginate(a, b) {

    function incrementPage () {
        next_page += 1;
        next_previews += 32;
    }

    jQuery('#' + b).load( a , incrementPage)
} 
```

但我只需要在 .load 完成后运行 incrementPage 函数，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:32:44.483

您可以使用“完成”回调来执行此操作，如下所示：

```
jQuery('#' + b).load(a , function() {
    incrementPage();
}); 
```

（我在您的代码段中看到的唯一问题是`load`声明后缺少分号）。

# css-selectors - sencha touch 2.0：如何将条件背景颜色应用于列表项

> ID：10061487
> 
> 赞同：1
> 
> 时间：2012-04-08T08:31:23.507
> 
> 标签：css-selectors, sencha-touch-2

我想有条件地在列表的 itemTpl 中应用背景颜色样式。假设我的 itemTpl 看起来像：

```
itemTpl: '<tpl if="condition"> <div class="highlight"> ... </div> </tpl> ' 
```

问题是当我这样做时，样式“突出显示”不适用于整个列表项。

如果我检查 DOM，我会看到我的 itemTpl 的内容在另一个具有“x-list-item”类的 div 中，其中包含另一个具有“x-list-item-label”类的 div。因此，对我的 itemTpl 应用背景样式不会填满整个区域......

有谁知道如何影响整个区域（因此是“x-list-item”或“x-list-item-label”）？

是否有 css/sass 技巧来影响我的 div 的父级？有煎茶技巧吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T10:43:36.977

对不起，我的误解。然后以下将起作用。我确定。

假设您为元素（不是组件，我知道）设置了一个 id，例如：

`<span id="something-here">{whatever you want to show}</span>`.

然后：

*   `Ext.get('something-here')`返回你的元素
*   `Ext.get('something-here').up('div.x-list-item')``div`返回具有类标签的该节点的最近父节点`x-list-item`

我已经通过`show()`and对此进行了测试，`hide()`并且该元素交互良好。

要将 CSS 类添加到元素，只需使用`addCls('special-css-class')`

# android - Android - 3D“堆叠”图库图片

> ID：10061488
> 
> 赞同：2
> 
> 时间：2012-04-08T08:31:33.413
> 
> 标签：android, imageview, gallery

有谁知道如何在 android 照片库应用程序中实现 3d“堆叠”图像组？

我找到了创建 3d 轮播的[链接。](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)尽管这是朝着正确方向迈出的一步，但这并不是我真正想要的。

![在此处输入图像描述](../Images/6283bc7d6af631e330bcf7a9eecf895f.png) ![在此处输入图像描述](../Images/da324b2ec30bc53d795e862f0ae967c8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T11:27:18.830

你看过[https://stackoverflow.com/questions/5338325/android-download-gallery-source-code](https://stackoverflow.com/questions/5338325/android-download-gallery-source-code)吗？

最好克隆源代码，因为 Android 是开源的。

这是最好的学习方式，但这里有一些代码快照：

[画廊 2.1r2](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/widget/Gallery.java)

[Android 2.0 图库应用](http://www.netmite.com/android/mydroid/packages/apps/Camera/src/com/android/camera/ImageGallery2.java)

[来自 CyanogenMod，Android 2.0](https://github.com/CyanogenMod/android_packages_apps_Gallery/downloads)

[CyanogenMod，Android Gallery 2.3（姜饼）](https://github.com/CyanogenMod/android_packages_apps_Gallery3D)

# android - Common 类中的 Android getAssets 给出“The method getAsssets() is undefined for the type Context”错误

> ID：10061494
> 
> 赞同：2
> 
> 时间：2012-04-08T08:32:11.823
> 
> 标签：android, typeface

我有一个名为 CommonCode 的类，用于存储我经常需要的所有方法。

其中一种方法是使用自定义布局创建吐司。我想给那个 toast 中的 TextView 一个自定义字体，所以我使用 TypeFace。当试图从我的资产文件夹中获取自定义字体时，它出错了。

我收到问题“方法 getAsssets() 未为 Context 类型定义”。

这是我的代码：CommonCode 类

```
public class CommonCode {

public static void showToast(String toastString, Context context, View view) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View layout = inflater.inflate(R.layout.toast_layout, (ViewGroup) view);

    ImageView image = (ImageView) layout.findViewById(R.id.toastImage);
    image.setImageResource(R.drawable.android);

    TextView text = (TextView) layout.findViewById(R.id.toastText);

    Typeface type = Typeface.createFromFile(context.getAsssets(), "fonts/aircruiser.ttf"); 

    text.setTypeface(type);
    text.setText(toastString);

    Toast toast = new Toast(context);
    toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
    toast.setDuration(Toast.LENGTH_SHORT);
    toast.setView(layout);
    toast.show(); 
}

} 
```

多谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T08:35:11.710

使用`getAssets()`而不是`getAsssets(),`：

```
Typeface type= Typeface.createFromAsset(context.getAssets(), "fonts/aircruiser.ttf");  
text.setTypeface(type); 
```

# python - self.__class__ 的类继承错误？

> ID：10061495
> 
> 赞同：1
> 
> 时间：2012-04-08T08:32:34.353
> 
> 标签：python, pylons, wtforms

我正在处理`WTForms`. 我有下一节课：

```
class MyForm(WTForms):
    ...
    def process(self, formdata=formdata, obj=None):
        super(self.__class__, self).process(formdata=formdata, obj=obj) 
```

而且我有错误（并非总是如此，但在某些情况下具有相似的形式 - 更奇怪）：

`Maximum recursion depth have been exceeded`

但是当我改变了`self.__class__`→`MyForm`一切都很好！

我不明白...据我所知，它们一定是同义词。怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T08:42:49.413

它们不是同义词。`self`可以是*继承自* `MyForm`的类的任何对象。Python 不会默默地创建一个新的超类对象来调用继承的方法，它只是传递同一个对象（这样做会破坏多态性并且没有用处）。并且`type()`/`.__class__`显然是对象实际上是一个实例的类，而不是它的某个超类（您不希望`MyShinyThing().__class__`yield `object`，对吗？）。`__class__`如果根据访问的位置进行更改，那将是非常惊人的、非惯用的和无用的。这只是多态性。

作为第一个参数`super`是一个指示符，在[MRO](https://www.python.org/download/releases/2.3/mro/)中应该继续搜索超方法（非正式地：您当前所在的位置），传递`self.__class__`总是从`self`作为实例的任何类的（立即）超类开始。假设`super`在类层次结构中的其他地方进行了正确的调用，这最终会让你回到`MyForm.process`，我们就有了无限循环。

# asp.net - 使用 Web.config 授权与手动授权

> ID：10061501
> 
> 赞同：0
> 
> 时间：2012-04-08T08:33:34.933
> 
> 标签：asp.net

用户通过身份验证后，我`User information`从数据库中获取并将其保存在`Session`.

现在，为了验证用户对特定页面的授权，为角色/页面提供了枚举。最后我将它与单个页面的会话数据进行比较。因为，目录是可以嵌套的，所以，我个人觉得是一种灵活的方式。

那么，这是一种好的做法，还是我可以`FormAuthentication Ticket Class`使用`Web.Config`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:05:29.600

表单身份验证为您编写网页的基本安全性提供了更少的工作量。

当然，您可以编写自己的代码，但您必须确保所有页面都必须进行身份验证检查，方法是在所有页面上编写代码，或者从单个基页或帮助程序类派生身份验证检查。

我自己从不想编写用于身份验证的自定义代码，因为 FormAuthentication 本身可以保护您网站内的所有目录/页面。

还有许多其他功能，例如

```
1) You can choose which file/folder should not be secure
2) Get loggedin user details at any secure page
3) Default and Login url redirections 
4) Logout feature and redirecting to default/login page automatically
5) Role wise security , Role based page/folder access etc. 
```

为此探索谷歌，你会发现更多的优势......

# testing - Erlang 命令测试无法写入“coverlog”

> ID：10061502
> 
> 赞同：0
> 
> 时间：2012-04-08T08:33:50.400
> 
> 标签：testing, erlang, common-test

我正在使用以下命令从命令行运行 Common Test：

```
$ run_test -pa ../ebin -spec test.spec.all 
```

并得到以下错误。为什么 io:format() 调用会出现 badarg 错误？

```
Testing testdir2.bds1.ep_SUITE: Starting test, 3 test cases

ERROR: Could not write normal heading in coverlog.
CoverLog: <0.318.0>
Reason: {badarg,[{io,format,
                     [<0.318.0>,
                      "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 3.2 Final//EN\">\n<!-- autogenerated by '~w'. -->\n<html>\n<head><title>Coverage results</title></head>\n<body bgcolor=\"white\" text=\"black\" link=\"blue\" vlink=\"purple\" alink=\"red\">",
                      [test_server_ctrl]],
                     []},
                 {test_server_ctrl,write_coverlog_header,1,
                                   [{file,"test_server_ctrl.erl"},
                                    {line,5731}]},
                 {test_server_ctrl,write_default_coverlog,1,
                                   [{file,"test_server_ctrl.erl"},
                                    {line,5803}]},
                 {test_server_ctrl,stop_extra_tools,1,
                                   [{file,"test_server_ctrl.erl"},
                                    {line,1464}]},
                 {test_server_ctrl,init_tester,9,
                                   [{file,"test_server_ctrl.erl"},
                                    {line,1403}]}]}
Suite testdir2.bds1.ep_SUITE was killed with reason {terminated,
                                                       [{io,format,
                                                         [<0.318.0>,
                                                          "<html><body>\n",[]],
                                                         []},
                                                        {test_server_ctrl,
                                                         write_default_coverlog, 
                                                         1,
                                                         [{file,
                                                           "test_server_ctrl.erl"},
                                                          {line,5803}]},
                                                        {test_server_ctrl,
                                                         stop_extra_tools,1,
                                                         [{file,
                                                           "test_server_ctrl.erl"},
                                                          {line,1464}]},
                                                        {test_server_ctrl,
                                                         init_tester,9,
                                                         [{file,
                                                           "test_server_ctrl.erl"},
                                                          {line,1403}]}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:52:24.847

你确定你在 io:format 模式中有类似 ~s 的东西吗？

你能提供一些实际上有这个 io:format 的代码吗？

# list - Scheme中的递归和返回列表

> ID：10061504
> 
> 赞同：4
> 
> 时间：2012-04-08T08:34:01.073
> 
> 标签：list, recursion, scheme

我很难找到一种使用递归创建列表然后返回该列表作为基本情况的方法。具体来说，我将两个 32 位数字（x1 和 x2）输入 ALU 并逐位评估它们（通过 ALU1），然后创建结果数字的列表。我对这个递归算法的基本情况是 (null?x​​1) 但此时，我如何访问结果列表？我知道方案中的列表是不可变的，所以我不能只创建一个空列表并将结果列表附加到它。有什么帮助吗？这是我第一次接触函数式编程，所以提前致谢。

```
(define ALU-helper 
   (lambda (selection sub x1 x2 carry-in n)
      (if (null? x1)
          (________?)
          (cons
              (ALU1 selection sub (car x1) (car x2) carry-in n) 
              (ALU-helper selection sub (cdr x1) (cdr x2) carry-in (- n 1)))))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T14:48:26.913

假设两者`x1`和`x2`具有完全相同的长度，这应该有效：

```
(define ALU-helper 
  (lambda (selection sub x1 x2 carry-in n)
    (if (null? x1)
        '()
        (cons
         (ALU1 selection sub (car x1) (car x2) carry-in n) 
         (ALU-helper selection sub (cdr x1) (cdr x2) carry-in (- n 1)))))) 
```

当您对输入列表执行递归并因此构建新的输出列表时，基本情况`if (null? lst)`将返回空列表`'()`。那是因为当你`cons`添加新元素时，每一步都会生成结果列表；当您到达输入列表的最后一个元素时，您已经构建了输出列表，剩下要做的就是返回列表结束标记，`'()`.

为了更清楚地看到它，请尝试使用更简单的示例。此过程只是复制作为输入接收到的列表：

```
(define (copy lst)
  (if (null? lst)
      '()
      (cons (car lst)
            (copy (cdr lst)))))

(copy '(1 2 3 4 5))
> (1 2 3 4 5) 
```

请注意，基本情况是`if (null? lst)`，递归步骤`cons`是列表的当前元素，`(car lst)`其结果是在`(cdr lst), the rest of the list. In your case, you perform`ALU1 上重复执行，这是对两个列表的当前元素的操作，因为您同时遍历两个列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:40:56.180

可能你只想要空列表，写成`null`. 所以：

```
(if (null? x1)
    null
    (cons ...)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T02:44:03.133

这是一种创建新列表列表的方法： 基本上相反的顺序。

(define envers (lambda (lat) (cond ((null?lat) '()) (else (list (envers (cdr lat)) (car lat) )) ) )

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T08:43:18.970

递归 - 这是一个隐喻。

想象一下，你正在搬家。你有一堆东西需要转移，你需要确保它到达新家。

找一群朋友来装满卡车。他们会有其他可以提供帮助的朋友。软管人会有其他朋友等。直到归结为一个人将您的一些东西转移到卡车上。

现在每个人都有一张纸告诉你之前卡车里有什么。现在你有一个通过收集这些纸片的清单。

# c++ - C++——从二进制文件中读取动态分配的向量

> ID：10061508
> 
> 赞同：0
> 
> 时间：2012-04-08T08:34:46.440
> 
> 标签：c++, string, file, vector, binary

我正在解决一个问题，我不确定我是否正确地执行此操作，或者我是否有正确的方法。到目前为止，我的代码只是给了我段错误。

我有一个简单的小收据编写程序来练习一些 C++ 概念，其中一个是二进制文件 i/o。我有几个数组保存数据（一个保存服务类型的字符串，另一个保存相应的双倍成本）。我有一个小菜单，二进制部分的书写很好。但是，我不确定如何从文件中读取这些内容。

我目前正在使用一个结构来保存各种数据成员（客户姓名、总费用等），我想将他们选择的所有服务以及相应的价格写入一个文件，然后能够读取他们回来了。这些当前存储在结构中的向量中。

我想我了解如何从二进制文件读取/写入字符串（写入字符串的长度，然后写入数据，然后读取长度，然后将那么多字节读入字符串）。但是我如何用向量做到这一点？我了解如何使用固定大小成员（即整数）的向量来完成它，但是字符串向量呢？在这种情况下，成员没有设置大小，所以我不知道如何读回它们。

这甚至可能吗？如果有人能指出我正确的方向，那将非常有帮助。大约一年前有一个类似的论坛发布，但它对我没有多大帮助。

tl;dr -- 如何从二进制文件中读取可变长度字符串的可变大小向量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:49:42.593

[正如马克使用http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html)指出的那样，您需要将数据打包或封装到对象中并将它们序列化。您可以在此处找到示例和详细帮助。搜索一个非常简单的案例。:)

编辑：我为你做了一个快速而肮脏的例子。享受。（为格式化道歉。）

```
#include <cstddef> // NULL
#include <iomanip>
#include <iostream>
#include <fstream>
#include <iterator>

#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/serialization/base_object.hpp>
#include <boost/serialization/utility.hpp>
#include <boost/serialization/assume_abstract.hpp>
#include <boost/serialization/string.hpp>
#include <boost/serialization/vector.hpp>

class family_names
{
    friend class boost::serialization::access;
    std::vector<std::string> m_names;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
    ar & m_names;
    }

    friend std::ostream & operator<<(std::ostream &os, const family_names& fn);

    public:
family_names(const std::vector<std::string>& names)
    : m_names(names)
{}

family_names() {}
    };

    std::ostream & operator<<(std::ostream &os, const family_names& fn)
    {
std::ostream_iterator<std::string> out_it (std::cout,", ");
std::copy(fn.m_names.begin(), fn.m_names.end(), out_it);
return os;
    }

    void save(const family_names &s, const char * filename){
// make an archive
std::ofstream ofs(filename);
boost::archive::text_oarchive oa(ofs);
oa << s;
    }

    void restore(family_names &s, const char * filename)
    {
// open the archive
std::ifstream ifs(filename);
boost::archive::text_iarchive ia(ifs);

// restore the family names from the archive
ia >> s;
    }

    int _tmain(int argc, _TCHAR* argv[])
    {

std::vector<std::string> vec_names;
vec_names.push_back("Jason");
vec_names.push_back("Mark");
vec_names.push_back("Ludmilla");

family_names names(vec_names);
std::string filename = "c:\\Dev\\demofile.txt";

std::cout << names << std::endl;
save(names, filename.c_str());

family_names names_back;
restore(names_back, filename.c_str());
std::cout << names_back << std::endl;

return 0;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:11:08.360

转述：

> > 如何读回长度，然后将这么多字节读入带有向量的字符串？

一次一串：

```
// Untested
std::vector<std::string> ReadSomeStrings(std::istream& inFile, size_t howMany) {
  std::vector<std::string> result;
  for(int i = 0; i < howMany; ++i) {
    std::size_t len;
    is.read(&len, sizeof len);
    std::string s(len, '\0');
    is.read(&s[0], s.size());
    result.push_back(s);
  }
  return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:17:18.440

我猜您使用 >> 和 << 运算符，我建议您尝试使用 ofstream::write 和 ifstream::read 进行二进制操作。

# php - 带 LIMIT 的 MySQL 确实有效

> ID：10061511
> 
> 赞同：0
> 
> 时间：2012-04-08T08:35:17.200
> 
> 标签：php, mysql, limit

我感到很困惑。我有这个代码：

```
function fetchAllArray($assoc = MYSQL_ASSOC) {
    while($rows=$this->result->fetch_array($assoc))
        $arr[]=$rows;
    return $arr;

}

function getGalleries($limit = 0,$orderby = '`created` ASC, sort_id',$ordersort = 'DESC') {

    $this->query("SELECT * FROM galleries WHERE status=1 ORDER BY ".$orderby." ".$ordersort." ".($limit==0 ? "" : " LIMIT ".$limit).";");
    $arr=$this->fetchAllArray();

    if(is_array($arr))
        return $arr;
    else
        return FALSE;
} 
```

当我这样称呼它时：

```
$this->getGalleries(300); 
```

这什么都不返回！

当我在 phpmyadmin 中测试精确查询时，我得到了结果。当我从查询中删除 LIMIT 时，它可以工作。为什么 LIMIT 在这里不起作用？

该代码在具有 LIMIT 的 localhost 中运行良好，但在服务器中运行良好！

编辑：我刚刚发现这是在服务器上不起作用的“创建”字符串！当我`created`从查询中删除时，它可以在服务器上运行，但是当我包含它时它不起作用！我如何在我的查询中添加这个！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:39:34.890

似乎您的函数没有获取参数并采用默认参数为零，因此您没有得到任何结果。

尝试在执行查询之前放置一个打印语句，以查看查询是否组合良好......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:37:58.510

这可能是您的 php 代码中的错误，而不是查询中的错误。

开启general_log查看php实际发送的内容

```
set global general_log = 1; 
```

# c# - 如何重新打开 TextWriter 对象？这可能吗？

> ID：10061518
> 
> 赞同：0
> 
> 时间：2012-04-08T08:38:06.133
> 
> 标签：c#, exception, textwriter

我有一个正在处理的新项目，它使用 TextWriter 对象来序列化一个类。像这样的东西：

```
TextWriter txtStream = new StreamWriter("xmlStreamFile.xml");
xmlSel.Serialize(txtStream, gp); // gp is the class I want to serialize
txtStream.Flush();
txtStream.Close(); 
```

这段代码在我第一次使用时有效 - 文件已创建并且数据写入正常 - 但我第二次尝试使用它时出现异常：“无法写入 ca 已关闭的 TextWriter”。我只是想问我如何重新打开 TextWriter - 或者我应该怎么做才能得到这种类型的异常并能够重写 txtStream 对象。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:26:27.600

不，您不能重新打开 TextWriter 之类的东西，因为*在一般情况下*，它可能正在写入 NetworkStream 或 GZipStream 之类的东西 - 在这些情况下，当您关闭写入器（和流）时，它会产生副作用（终止网络连接，编写最终的 gzip 块等）。所以不：你不能那样做。

由于您正在写入文件，因此：

*   在你准备好之前不要关闭它
*   需要时重新打开文件（用于追加）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:47:59.643

`TextWriter`最直接的答案是每次都重新打开一个新的。

```
public static void SerializeAsXml(object gp, string target)
{
    XmlSerializer xmlSel = new XmlSerializer(gp.GetType());
    using (TextWriter txtStream = new StreamWriter(target))
        xmlSel.Serialize(txtStream, gp);
} 
```

该`using`语句隐含地导致`Flush`并`Close`在您的`txtStream`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:06:41.407

If you want to append to the same file, just use the same TextWriter and close it when you're done:

```
XmlSerializer xmlSel = new XmlSerializer(typeof(Foo));
TextWriter txtStream = new StreamWriter("xmlStreamFile.xml");
for (int i = 1; i <= 3; i++)
{
    Foo foo = new Foo(i * 100);
    xmlSel.Serialize(txtStream, foo);
    Console.WriteLine("Serialize done #" + i);
    txtStream.Flush();
}
txtStream.Close();
txtStream.Dispose(); 
```

In this sample `Foo` is just a simple struct, but it would work with your class as well.

**Edit:** assuming you're using WinForms you can have the XmlSerializer and StreamWriter members of the class itself:

```
class Form1 : Form
{
    private XmlSerializer xmlSel = null;
    TextWriter txtStream = null;
    //....
} 
```

Then in the button click method initialize them once if null and serialize what you need:

```
if (xmlSel == null)
{
    xmlSel = new XmlSerializer(typeof(Foo));
    txtStream = new StreamWriter("xmlStreamFile.xml");
}
xmlSel.Serialize(txtStream, foo);
txtStream.Flush(); 
```

And finally in the Form close event, close and dispose the writer:

```
txtStream.Close();
txtStream.Dispose(); 
```

# unix - UNIX 'ls' 命令排除通配符

> ID：10061530
> 
> 赞同：11
> 
> 时间：2012-04-08T08:40:34.640
> 
> 标签：unix, ls

我有文件 a1 a2 a3 b1 b2 b3，我只需要使用`ls`命令从列表中排除 a2 和 b2。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T08:46:19.617

使用 --ignore 选项

```
ls --ignore=[ab]2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T09:53:24.393

试试这个：

```
$ ls [a-b][13]
a1  a3  b1  b3 
```

或者

```
$ shopt -s extglob
$ ls !(*2)
a1  a3  b1  b3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T08:43:06.387

只需列出您想要的文件：

```
ls a1 a3 b1 b3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T08:45:58.097

尝试使用 ls 和 grep

```
ls -1 | grep -viw "a2\|b2" 
```

注意 ls a put 1（第一个）而不是字母“l”。有时字体会让他们感到困惑。

# sqlite - Sqlite 对分组内的行进行排序

> ID：10061531
> 
> 赞同：2
> 
> 时间：2012-04-08T08:40:55.247
> 
> 标签：sqlite

我有两个表用户和日志。我想用日志加入用户表并获取最新的日志条目。我已经注意到，使用组内的行没有排序。因此我无法检索最新的日志行。

用户：

```
 ID    |   Name
--------------------
  1    |   John    
  2    |   Mike 
```

日志：

```
L_ID | ACTION  | DATE     | USERID
----------------------------------
1    | OPEN    | '1 DEC'  |   1
2    | CLOSE   | '3 DEC'  |   1
3    | WRITE   | '2 DEC'  |   1
4    | OPEN    | '5 DEC'  |   2
5    | CLOSE   | '3 DEC'  |   2 
```

有了这张表，我想要的结果是：

```
2 Mike 4 OPEN  '5 DEC'
1 Jhon 2 CLOSE '3 DEC' 
```

我知道以下查询不起作用，因为组内的行未排序：

```
Select * from user join log on ID=USERID group by ID order by DATE DESC,L_ID 
```

由于仅返回正确的日期而不返回操作，因此以下内容也不起作用：

```
Select ID,Name,Action,Max(Date) from user join log on ID=USERID group by ID order by DATE DESC, L_ID 
```

任何想法建议如何编写将返回正确结果的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:38:18.277

或者，我也找到了该问题的解决方案，但可能我的解决方案是“有风险的”，因为它依赖于未记录的假设。我注意到 group by 将组的最新行作为参考行。所以我所做的是将查询拆分为 2 并确保我希望被 group by 引用的行是第一个查询中的最新行：

```
Select * from (
               Select * from user join log on ID=USERID order by DATE,L_ID
              )
        group by ID order by DATE DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:52:34.480

这很简单：

```
SELECT u.*, l.* 
FROM user AS u 
INNER JOIN log AS l ON l.USERID=u.ID 
WHERE l.DATE = (SELECT max(DATE) FROM log WHERE l.USERID=u.ID ORDER BY L_ID DESC LIMIT 1)

2 Mike 4 OPEN  '5 DEC'
1 Jhon 2 CLOSE '3 DEC' 
```

这应该在 MySQL 中工作，因此 sqlite 也很有希望。这可能不是最好的优化，我希望看到更有知识的人给出确切的查询。

这假设您的日期字段是正确的日期时间字段而不是字符串。这些[链接](https://stackoverflow.com/questions/8842729/how-do-i-select-populate-two-objects-from-two-tables-with-a-single-query) [可能](https://stackoverflow.com/questions/4641384/how-to-get-a-row-that-has-the-maximum-value-in-a-column)会给您更多的想法。

另请注意，按 ID 排序是不安全的，它不一定总是第一个记录，较小的 id .. 这取决于。所以总是有一个安全的第二个排序列，比如重量左右，代表“时间”或您自己的自定义排名。

# hash - 为什么选择 SHA512 而不是 SHA384？

> ID：10061532
> 
> 赞同：28
> 
> 时间：2012-04-08T08:41:12.607
> 
> 标签：hash, sha512, integrity, sha2

SHA3​​84 是 SHA512 的截断版本。但为什么会有人使用它？推论：如果 SHA384 和 SHA512 一样好，那么使用 512 位版本有什么理由吗？

我打算使用其中一种算法来验证文件完整性，所以我主要对碰撞安全感兴趣。

我很高兴听到有人在实践中如何使用 SHA2 摘要，以及您为什么选择一个版本而不是另一个版本。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-06-28T13:57:39.427

SHA512、SHA256、SHA1 和 MD5 容易受到[长度扩展攻击。](https://en.wikipedia.org/wiki/Length_extension_attack)SHA224 和 SHA384 不会因为将输出减少到内部状态，所以 SHA3 也不容易受到攻击。考虑到这一点，SHA512 是一个很好的加密抗冲突哈希函数。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-08T09:19:13.850

出于实际目的和可预见的未来，SHA384 和 SHA512 对于几乎任何可以想象的抗碰撞应用都足够好。通常，一旦我们超过 256 位并且对于实际目的而言抗碰撞性是无限的，您将使用什么哈希的主要决定因素就是您需要多少位输出。例如，如果您需要哈希来生成 256 位 HMAC 密钥和 128 位加密密钥，则 SHA384 是自然的选择。如果您需要尽可能多的输出来计算计算成本，比如 PRNG 的输出或随机填充，那么 SHA512 是有意义的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-04-27T09:30:21.880

使用 SHA512 签名的证书似乎不适用于 Windows 上的 TLS 1.2（[请参阅此处](https://social.technet.microsoft.com/Forums/office/en-US/857c6804-8ce1-4f09-b657-00554055da16/tls-12-and-sha512?forum=winserversecurity)）

因此，我将使用 SHA-384（或者我想我可以使用 SHA-256）重新创建我的证书链。

虽然谢天谢地，我还没有发布任何证书，但链接页面中的线程确实为那些被 SHA-512 卡住的人提出了一个解决方法/修复。

！

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-04-07T11:07:57.257

SHA512 容易受到[长度扩展攻击](https://en.wikipedia.org/wiki/Length_extension_attack)，而 SHA384 则不然。[来源](https://blog.skullsecurity.org/2012/everything-you-need-to-know-about-hash-length-extension-attacks)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-09T17:29:38.417

我能想到使用 SHA-384 与 SHA-512 的唯一原因是因为 Digest 需要签名。例如，如果您采用 ECDSA-384 签名，它需要 384 哈希摘要，而不是 512 位。理想情况下，您可以从 512 位中丢弃任何 128 位。但是接收端需要知道你扔掉了哪个 128 位。因此，SHA384 和 SHA512 之间的唯一区别是定义需要丢弃的 128 位。

# python - 从用python读取的网页中读取一些内容

> ID：10061544
> 
> 赞同：4
> 
> 时间：2012-04-08T08:43:32.700
> 
> 标签：python

我正在尝试从网络上的 python 模块中读取一些数据。

我设法阅读，但是在解析这些数据和获取所需信息时遇到了一些困难。

我的代码如下。任何帮助表示赞赏。

```
#!/usr/bin/python2.7 -tt

import urllib
import urllib2

def Connect2Web():
  aResp = urllib2.urlopen("https://uniservices1.uobgroup.com/secure/online_rates/gold_and_silver_prices.jsp");
  web_pg = aResp.read();

  print web_pg

#Define a main() function that prints a litte greeting
def main():
  Connect2Web()

# This is the standard boilerplate that calls the maun function.
if __name__ == '__main__':
    main() 
```

当我打印此[网页](https://uniservices1.uobgroup.com/secure/online_rates/gold_and_silver_prices.jsp)时，我会打印整个网页。

我想从中提取一些信息（例如`"SILVER PASSBOOK ACCOUNT"`并从中获取费率），我在解析这个 html 文档时遇到了一些困难。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T09:39:12.207

不推荐使用 RE 来匹配 XML/HTML。但是，它有时可以工作。最好使用 HTML 解析器和 DOM API。这是一个例子：

```
import html5lib
import urllib2

aResp = urllib2.urlopen("https://uniservices1.uobgroup.com/secure/online_rates/gold_and_silver_prices.jsp")
t = aResp.read()
dom = html5lib.parse(t, treebuilder="dom")
trlist = dom.getElementsByTagName("tr")
print trlist[-3].childNodes[1].firstChild.childNodes[0].nodeValue 
```

您可以迭代`trlist`以找到您感兴趣的数据。

**从评论中添加：** `html5lib`是第三方模块。请参阅[html5lib 站点](https://github.com/html5lib/)。`easy_install`or`pip`程序应该能够安装它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T09:05:02.360

可以使用正则表达式来获取所需的数据：

```
import urllib
import urllib2
import re

def Connect2Web():
  aResp = urllib2.urlopen("https://uniservices1.uobgroup.com/secure/online_rates/gold_and_silver_prices.jsp");
  web_pg = aResp.read();

  pattern = "<td><b>SILVER PASSBOOK ACCOUNT</b></td>" + "<td>(.*)</td>" * 4
  m = re.search(pattern, web_pg)
  if m:
    print "SILVER PASSBOOK ACCOUNT:"
    print "\tCurrency:", m.group(1)
    print "\tUnit:", m.group(2)
    print "\tBank Sells:", m.group(3)
    print "\tBank Buys:", m.group(4)
  else:
    print "Nothing found" 
```

`re.compile`如果您在循环中进行匹配，请不要忘记模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T10:40:13.647

你也可以试试[Grablib](http://grablib.org/)。和/或您可以使用 XPath（带/不带 Grab）。以后可能对你有用，这里有一些例子：

```
g = Grab()
g.go(address)

user_div = g.xpath('//*/div[@class="user_profile"]') # main <div> for parse
country = user_div.find('*/*/a[@class="country-name"]')
region  = user_div.find('*/*/a[@class="region"]')    # look for <a class="region">
city    = user_div.find('*/*/a[@class="city"]')

friends = [ i.text_content() for i in user_div.findall('dl[@class="friends_list"]/dd/ul/li/a[@rel="friend"]') ]

# and another ability, i.e. you have 2 tags: 
# <tr> <td>Text to grab</td> <td>if only that tag contains this text</td> </tr>

val = user_div.xpath(u"dl/dt[contains(text(),'%s')]/../dd/text()" % 'if only that tag contains this text')
# print val[0] <- will contain 'Text to grab' 
```

祝你好运。

# php - 如果文本包含某个单词，如何从文本文件中删除字符串

> ID：10061546
> 
> 赞同：1
> 
> 时间：2012-04-08T08:44:09.770
> 
> 标签：php, xml, file, text

我试图弄清楚如何删除文本文件之间和包括在文本文件中的所有内容。

到目前为止，我有这个从文件中删除整个 urlset。

```
$myFile = "/here/it/is/sitemap.xml"; 

$stringdata = file_get_contents($myFile);

$stringdata = preg_replace('#(<urlset.*?>).*?(</urlset>)#', '$1$2', $stringdata);

$stringdata = str_replace('<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1"></urlset>', '', $stringdata);

$fh = fopen($myFile, 'w') or die("can't open file");

fwrite($fh, $stringdata);
fclose($fh);

return; 
```

问题是我在文本文件中有几个 urlset，但我只希望删除其中一个 urlset，它与某个变量匹配，所以像这样（不起作用）：

```
$stringdata = preg_replace('#(<urlset.*?>).*? . $thisvariableisintheurlset . (</urlset>)#', '$1$2', $stringdata); 
```

有谁知道我需要添加什么来删除目标 urlset，或者如果这看起来是解决问题的不好方法，甚至是更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:48:19.177

尝试使用[http://php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)

```
$stringdata = preg_replace('#(<urlset.*?>).*?' . preg_quote($thisvariableisintheurlset, '#') . '.*?(</urlset>)#', '$1$2', $stringdata); 
```

还要确保引用变量之前和之后的内容匹配（我添加了 .*?，但这对于您的情况可能不正确）

# java - ANTLR 的 Java 树解析器输出

> ID：10061548
> 
> 赞同：5
> 
> 时间：2012-04-08T08:44:47.210
> 
> 标签：java, tree, antlr, abstract-syntax-tree

我在 ANTLR 网站上找到了一个示例模板，它是 Javatreeparser.g，该网站说它可以生成我需要的 AST，但是由于我是 ANTLR 的新手，我该如何让它显示？到目前为止，我所做的是将语法文件与我现有的 java 语法放在一起。但我不知道如何从文件中使用和输出我需要的 AST。我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T09:00:00.417

> 我在 ANTLR 网站上找到了一个示例模板，它是 Javatreeparser.g，该网站说它可以生成我需要的 AST，

不，`Java.g` [来自 ANTLR wiki](http://www.antlr.org/grammar/1207932239307/Java1_5Grammars)的组合语法为 Java 源文件生成了词法分析器和解析器。然后解析器构造这个源的 AST，然后可以使用这个 AST`JavaTreeParser.g`来遍历它。树语法`JavaTreeParser.g`不用于创建 AST *。*这是由从创建的解析器完成的`Java.g`。

> 到目前为止，我所做的是将语法文件与我现有的 java 语法放在一起。

这是不正确的。树语法`JavaTreeParser.g`需要一个 AST 作为解析器生成的输入`Java.g`。您不能只插入另一个解析器（或其他树语法，就此而言）。

> 但我不知道如何从文件中使用和输出我需要的 AST。我该怎么做？

请参阅之前的问答：[Visualizing an AST created with ANTLR (in a .Net environment)](https://stackoverflow.com/questions/2856612/visualizing-an-ast-created-with-antlr-in-a-net-environment)

## 编辑

我不想立即发布此内容，因为我希望您先自己尝试一下（是的，我是认真的！）；）

这是一个快速演示：

1.  复制`Java.g`目录并从中删除`@header{...}`和`@lexer:::header{...}`声明；
2.  复制`antlr-3.3.jar`到同一目录；
3.  创建文件`Main.java`并`Test.java`在此目录中（见下文）。

### 测试.java

```
public class Test {

    int i = 1 + 2;
    String s;

    Test(String s) {
        this.s = s;
    }
} 
```

### 主.java

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
    public static void main(String[] args) throws Exception {
        JavaLexer lexer = new JavaLexer(new ANTLRFileStream("Test.java"));
        JavaParser parser = new JavaParser(new CommonTokenStream(lexer));
        CommonTree tree = (CommonTree)parser.javaSource().getTree();
        DOTTreeGenerator gen = new DOTTreeGenerator();
        StringTemplate st = gen.toDOT(tree);
        System.out.println(st);
    }
} 
```

现在生成一个词法分析器和解析器：

```
java -cp antlr-3.3.jar org.antlr.Tool Java.g 
```

然后编译所有`.java`源文件：

```
javac -cp antlr-3.3.jar *.java 
```

最后运行`Main`该类并将输出通过管道传输到一个名为`ast.dot`.

```
java -cp .:antlr-3.3.jar Main > ast.dot 
```

*（在 Windows 上，执行`java -cp .;antlr-3.3.jar Main > ast.dot`：）*

如果您现在打开文件`ast.dot`，您会看到解析器生成的 AST的[DOT表示。](http://en.wikipedia.org/wiki/DOT_language)您可以通过在此处复制粘贴 DOT 源来可视化此 AST：http: [//graphviz-dev.appspot.com](http://graphviz-dev.appspot.com)，得到以下图像：

![在此处输入图像描述](../Images/5f9d1281f0dc2aa16a0bda9dd4010aaf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T09:25:32.287

我真的推荐你使用antlr4。

首先，设置您的 CLASSPATH（包括 antlr-4.5.3-complete.jar）和 JAVA_HOME。

其次，从语法 Java.g4 生成词法分析器和解析器：

```
java -cp antlr-4.5.2-complete.jar Java.g4 
```

三、编译所有生成的Java*.java：

```
javac Java*.java 
```

最后，运行 TestRig：

```
java org.antlr.v4.runtime.misc.TestRig Java compilationUnit -gui Test.java 
```

您将直观地看到 AST，如下所示：

[![在此处输入图像描述](../Images/34f92191f7f3b6a6547a246e922d7e44.png)](https://i.stack.imgur.com/Yqlce.png)

# mysql - Mysql插入语句出错

> ID：10061550
> 
> 赞同：1
> 
> 时间：2012-04-08T08:45:24.030
> 
> 标签：mysql

执行以下语句时出现以下错误

```
INSERT INTO upcoming_matches(
    Id, Date, me_date, Match, team1, team2, 
    Timing, Status, series_id, 
    match_place,series_mtch_type, match_live,match_result, MINI_LINK, 
    PHOTOS_URL, scorecard_ID) 
VALUES(
    764, '2012/03/11', '2012/03/11', 'Bangla vs Pak', '2', '6', 
    '08:00 GMT | 14:00 local 13:30 IST', 1, 171, 
    'Shere Bangla National Stadium, Mirpur', 'ODI', 1, '', '1483',  
    'http://www.cricandcric.com/photo-gallery/', 3258)
GO

[Error] Script lines: 1-5 --------------------------
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Match, team1, team2, Timing, Status, series_id, match_place,
 series_mtch_type, ' at line 1 

 Warnings: ---> 
   W (1): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Match, team1, team2, Timing, Status, series_id, match_place,
 series_mtch_type, ' at line 1
          <--- 
```

任何人都可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:46:51.610

`match`是一个[保留的mysql关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，你需要用反引号括起来

```
`match` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:47:16.460

你不必`GO`在 MySQL 中用关键字关闭语句，你必须用分号关闭它`;`

您还必须在任何可能包含保留键或大写字段的字段名称周围加上反引号。

# logging - 使用单独的 screenrc 文件启用登录屏幕的正确语法是什么？

> ID：10061554
> 
> 赞同：4
> 
> 时间：2012-04-08T08:45:55.040
> 
> 标签：logging, gnu-screen, screenrc

我已经设置了一个这样的屏幕 rc 文件：

```
log on
shelltitle apt
logfile $HOME/configs/screen/screenlogs/apt.log
logtstamp after 120 
```

我是这样开始的：

```
screen -c ~/configs/screen/apt.rc 
```

但是使用一段时间后，apt.log 文件永远不会创建。语法对我来说看起来很完美，除非我没有得到关于日志文件语法的东西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T09:03:32.413

You simply need to change

```
log on 
```

to

```
deflog on 
```

The `log` command sets logging for the *current window*. At the time the .rc file is read, there *is* no current window. `deflog` sets the default for logging of newly created windows.

Alternatively you could add commands to your rc file to create an initial window and turn logging on for it.

(Damn, screen does *everything*.)

# javascript - 在 Chrome 浏览器中排序字符串时如何使用 localeCompare？

> ID：10061555
> 
> 赞同：3
> 
> 时间：2012-04-08T08:45:57.487
> 
> 标签：javascript, sorting

例如，`chineseName.sort((function(a,b){return a.localeCompare(b)}));` javascript 函数 localeCompare 适用于 IE 和 firefox，但不适用于 Chrome。有人知道如何使代码与 Chrome 兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T06:41:00.850

我刚刚搜索了整个 www 以找到答案，但可惜什么都没有……所以我编写了自己的代码。它是用于丹麦字母的，因此对您来说可能不值钱，但也许其他人会来寻找答案。这是我第一次回答一个问题，所以要温柔...

转换函数：转换函数是将'double-a'（丹麦语）[aa] 转换为丹麦字母[å]。这将使以后更容易逐个字符进行比较。

danishCompareCharacter 函数：该函数是实际的比较函数。它适用于特定的丹麦字符 'æ'、'ø' 和 'å'，它们位于丹麦 alfabet 的末尾。

danishCompareString 函数：这是在 javascript 排序函数中用作参数的自定义排序函数。

```
function convert(stringToConvert)
{
    var returnString = new String();
    var tempLetter;
    for (var j = 0; j < stringToConvert.length; j++)
        {
            if (stringToConvert.toLowerCase()[j] == 'a' &&         stringToConvert.toLowerCase()[j + 1] == 'a')
                {
                    tempLetter = 'å';
                    j++;
                } else
                {
                    tempLetter = stringToConvert.toLowerCase()[j];

                }
            returnString = returnString + tempLetter;
        }
    return returnString;
}

function danishCompareCharacter(firstCharacter, secondCharacter) {
    if ((firstCharacter == 'æ') || (firstCharacter == 'ø') || (firstCharacter == 'å')) {
            if (secondCharacter == 'æ' || secondCharacter == 'ø' || secondCharacter == 'å') {
                    if (firstCharacter == secondCharacter) {
                            return 0;
                        } 
                        if ((firstCharacter == 'æ') || secondCharacter == 'å')
                                {
                                    return -1;
                                }
                            if ((firstCharacter == 'å') || secondCharacter == 'æ') {
                                    return 1;
                                }
                            }
                return 1;
            } 
    if (secondCharacter == 'æ' || secondCharacter == 'ø' || secondCharacter == 'å') {
            return -1;
        }
        if(firstCharacter==secondCharacter){
                return 0;}
    if( firstCharacter < secondCharacter)
        {
            return -1;
        } 
        return 1;
}

function danishCompareString(a, b)
{
    var result = 0;
    var length = b.length;
    if (a.length < b.length)
        {
            length = a.length;
        }
    for (var i = 0; i < length; i++) {
            result = danishCompareCharacter(a[i], b[i]);
            if (result != 0)
                {
                    return result;
                } 
            }
    return result;
}

function SortMyArray(arr) {
//This works in ALL browsers
arr.sort(function (a, b) {
    return (danishCompareString(convert(a[0]), convert(b[0])));

    //And this would have worked in any browser BUT chrome...
    //        if (a[0].localeCompare(b[0]) == 0) { return 0; }
    //        if (a[0].localeCompare(b[0]) < 0) { return -1; }
    //        else { return 1; }
});
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T21:17:39.383

它现在在 Chrome 中运行良好（5 年后）。

既然您提到了中文名称，那么对中文名称数组进行排序的函数将是：

```
chineseNames.sort(function (a, b) {
  return a.localeCompare(b, 'zh-CN');
}); 
```

在 ES2015 中它将是：

```
chineseNames.sort((a, b) => a.localeCompare(b, 'zh-CN')); 
```

有关其他语言标识符，请参见[http://www.i18nguy.com/unicode/language-identifiers.html](http://www.i18nguy.com/unicode/language-identifiers.html)。

# r - Kohonen 包：样本错误（1：nd，ng，replace = FALSE）

> ID：10061563
> 
> 赞同：2
> 
> 时间：2012-04-08T08:46:33.797
> 
> 标签：r, self-organizing-maps

我正在尝试对我的表达数据（约 500 个基因）运行 23 个样本的监督自组织图。将 23 个样本分为 4 组。我想获得这 4 组中具有相似表达模式的基因图谱。

在使用包的`xyf`功能`Kohonen`进行监督建模时，

```
data.xyf<-xyf(data,Y=annotation) 
```

我遇到以下错误：

> 样本错误（1：nd，ng，replace = FALSE）：当“replace = FALSE”时，不能抽取大于总体的样本

我找不到在`replace=T`函数中调用的位置。软件包手册中没有关于此主题的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T09:32:22.400

您显然拥有比观察更多的单元格：您可以减少网格的尺寸（默认为 8*6），如文档中的示例所示`?xyf`。

```
xyf(data, Y=annotation, grid=somgrid(3,2)) 
```

# javascript - 正则表达式从字符串中删除所有带有内容和 html 代码的标签

> ID：10061564
> 
> 赞同：0
> 
> 时间：2012-04-08T08:46:34.810
> 
> 标签：javascript, html, regex

我正在寻找一个正则表达式，它删除所有带有名称的html标签，脚本标签，脚​​本标签中的所有内容（基本上所有的javascript代码），以及任何html代码，比如等等，字符串中没有html或javascript代码应该经过。更新：

我认为被质疑的不是那么清楚，可能这应该更清楚。

我希望`'<' and '>'`字符串中不允许包含任何特殊字符，例如`;,# ...`etc。我不在乎是否有类似`"<html>" or "<body> "`etc 的标签“我只想返回 false，以便用户根本无法输入任何标签，我也想阻止所有的 javascript 所以我假设如果我不允许`<,>`脚本标签不会通过并且 js 代码不会通过？

所以正则表达式应该不允许包含任何 <, > 和其他特殊字符，`;#@$%& etc`这样除了标签之外的其他 html 代码也被阻止......例如`&nbsp;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:54:47.030

```
^[^<>;#]*$ 
```

如果字符串与该正则表达式匹配，则它不包含括号中的字符。我希望我能很好地理解你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:12:41.987

要验证 HTML 元素或字符串是否包含 HTML 标记，请检查以下 JavaScript 函数：

```
function containsHTMLTags(str)
{
        if(str.match(/([\<])([^\>]{1,})*([\>])/i)==null)
         return false;
        else
         return true;
} 
```

该功能使用黑名单过滤。

参考：[http ://www.hscripts.com/scripts/JavaScript/html-tag-validation.php](http://www.hscripts.com/scripts/JavaScript/html-tag-validation.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:53:44.710

不要为此使用正则表达式。

您不能使用`textContent`or`innerText`因为至少前者返回`script`元素的主体。

如果我只支持较新的浏览器并且可以访问（或*填充*）`Array.prototype.indexOf()`，`Array.prototype.reduce()`并且`Array.prototype.map()`，这就是我可能使用的......

```
var getText = function me(node, excludeElements) {

    if (!excludeElements instanceof Array) {
        excludeElements = [];
    } else {
        excludeElements.map(function(element) {
            return element.toLowerCase();
        });
    }

    return [].slice.call(node.childNodes).reduce(function(str, node) {
        var nodeType = node.nodeType;
        switch (nodeType) {
        case 3:
            return str + node.data;
        case 1:
            if (excludeElements.indexOf(node.tagName.toLowerCase()) == -1) {
                return str + me(node, excludeElements);
            }
        }
        return '';
    }, '');

} 
```

[js小提琴](http://jsfiddle.net/LnKqa/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T14:36:16.090

Regex.Replace(html, @"] *>[\s\S]* ?|<[^>]+>", "", RegexOptions.IgnoreCase).Trim();

这里 html 是一个字符串，其中包含需要从中删除 html 和 script 标签的页面的 html

# html - 响应式布局教程？

> ID：10061572
> 
> 赞同：5
> 
> 时间：2012-04-08T08:48:03.290
> 
> 标签：html, css, responsive-design

是否有任何教程如何制作类似于[此](http://themes.hellominti.com/elogix/)的响应式布局？我在整个互联网上搜索，但找不到任何正常的教程，因为所有其他人都会调整窗口大小，并且您可以通过 iphone 进行缩小/缩放。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-08T09:50:45.007

这里有几篇关于响应式设计的博文：

*   [响应式设计分三步](http://webdesignerwall.com/tutorials/responsive-design-in-3-steps)
*   [带有 css3 媒体查询的响应式设计](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)
*   [响应式网页设计与设备无关的方法](http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/)
*   [响应式设计](https://www.sitecentre.com.au/design/responsive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:06:16.800

“树屋”有一门课程。我做了这个[（RWD 初学者指南）](http://thinkvitamin.com/design/beginners-guide-to-responsive-web-design/)，老实说，我并没有从中得到太多。这真的不是那么实用。

thinkvitamin 网站看起来都很漂亮，但我更喜欢 www.lynda.com。这么说来，lynda 并没有太多新的尖端材料。你可以试试这个[（CSS 页面布局）](http://www.lynda.com/Web-Interactive-CSS-training/CSS-Page-Layouts/86003-2.html?srchtrk=index:1%0Alinktypeid:2%0Aq:responsive%20design%0Apage:1%0As:relevance%0Asa:true%0Aproducttypeid:2)我自己还没有时间做那个，但是 lynda 上的东西的深度很好，所以如果你需要一些长期的辅导，注册是值得每月 30 美元或其他任何东西.

此外，我确实知道树屋经历了一次相当大的改造（使用 CSS 技巧等等），无论是（也许是 Chris Coyier 启发的）美学改造还是课程变得更好，我不能说因为我取消了我在响应式网页设计令人失望的教程之后订阅。我想我只做了一个又一个，所以这是一个很小的样本量。

基本上，您需要的只是 CSS 中的媒体查询，以复制您提供的网站的行为。然后只需为正确的屏幕宽度/设备应用正确的 css ... 不知道你在那里得到什么...

# grails - 无法在 STS 中创建新的 Grails 项目

> ID：10061573
> 
> 赞同：0
> 
> 时间：2012-04-08T08:48:18.750
> 
> 标签：grails

在 STS 2.9.1 中创建新 Grails 项目时出现此错误

命令以错误代码终止（请参阅输出详细信息） ------System.out:----------- | 加载 Grails 2.0.1 | 配置类路径。| 环境设置为开发..... | 编译 38 个源文件。| 错误编译错误：启动失败：javac 的命令行使用无效。javac：无效标志：-Xlint:-options 用法：javac 使用 -help 获取可能选项的列表 1 错误 ------System.err:-----------

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:07:15.870

检查您是否已将环境变量设置`JAVA_HOME`为至少 1.6.0_14 的有效 Oracle JDK 路径并且没有`JAVA_OPTS`定义。

# php - Facebook Javascript SDK getLoginStatus 返回未知（完全不一致）

> ID：10061578
> 
> 赞同：0
> 
> 时间：2012-04-08T08:48:37.617
> 
> 标签：php, javascript, ajax, facebook

我正在使用 PHP 成功地对用户进行身份验证，获取访问令牌等。但是对于我的应用程序的一部分，我正在使用 Javascript 来加载图像/朋友等。过去我对 getLoginStatus 没有任何问题，但现在它又回来了

```
status: unknown 
```

大约 80% 的时间。它在 Firefox 中似乎比在其他浏览器中运行得更好，但我仍然让它在那里发生，所以我认为这只是侥幸。我能想到的唯一可能会影响这一点的事情是在有人尝试使用 php 登录之前尝试注销以前的用户（但是我尝试还原文件并在没有它的情况下进行测试，但仍然无法正常工作，所以除非它以某种方式弄乱了我的持久数据，否则我不知道）：

```
$fb_key = 'fbsr_'.$facebookConfig['app_id'];
setcookie($fb_key, '', time()-3600);
$facebook->destroySession(); 
```

似乎在谷歌上找不到任何关于此的内容，所以我真的不知道发生了什么。在这一点上，也许我只需要使用我通过 php 获得的访问令牌来通过 javascript api 进行查询（因为我仍然可以成功地得到它）。我现在要调查一下，但与此同时，我想我会发帖以防万一有人有任何想法！

这是我的 JS 代码：

```
window.fbAsyncInit = function() {
    FB.init({
        appId      : pre_fbAppID, // App ID
        channelUrl : pre_absURL + '/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });

    doFacebookLogin();

    //Facebook can notify us when the user logs in and logs out
    FB.Event.subscribe('auth.login', function(response) {
        // do something with response
    });
    FB.Event.subscribe('auth.logout', function(response) {
        // do something with response
    });

    function doFacebookLogin(){

        FB.getLoginStatus(function(response) {
            checkLoginResponse(response);
        }, true);
    } 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:01:00.197

[FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

`the user is not logged into Facebook at this time and so we don't know if they've authenticated your application or not (unknown)`

我认为您没有正确初始化 JS SDK 或在 FB.init 之前调用它。（同：[这里](http://facebook.stackoverflow.com/questions/4509971/fb-getloginstatus-called-before-calling-fb-init)）

您可以发布有关 FB.getLoginStatus 的 javascript 块吗？

更新：为什么在 FB.getLoginStatus 中有“true”？

> 为了提高应用程序的性能，并非每次检查用户状态的调用都会导致对 Facebook 服务器的请求。在可能的情况下，响应会被缓存。在当前浏览器会话中第一次调用 FB.getLoginStatus，或者 JD SDK 以 status: true 初始化，响应对象将被 SDK 缓存。**对 FB.getLoginStatus 的后续调用将从此缓存响应返回数据。**

如果第一个调用返回 Unknown -> 所有其他调用都将返回相同的值。您可以尝试没有“真实”吗？

更新#2：

> 要接收此调用的响应，您必须订阅**auth.statusChange**事件。此事件传递的响应对象与显式调用 FB.getLoginStatus 返回的响应对象相同。

您订阅了所有其他的，除了`auth.statusChange`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T13:22:20.817

初始化：

```
window.fbAsyncInit = function () {
            FB.init({
                appId: 'xxxxxxxxxxxxx',
                cookie: true,
                xfbml: true,
                version: 'v2.2'
            });
            //FB.getLoginStatus(function (response) {
            //    statusChangeCallback(response);
            //});
        };
```

开始脸书登录：

```
function startFace() {
            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        }
```

通话状态：

```
function statusChangeCallback(response) {
            if (response.status === 'connected') {
                loginFacebook();
            } else if (response.status === 'not_authorized') {
                //some code
            } else if (response.status === 'unknown') {
                FB.login(function (response) {
                    statusChangeCallback(response);
                });
            } else {
                //some code
            }

        }
```

# iphone - 在对象上实现淡入淡出效果 - OpenGL ES - iPhone

> ID：10061580
> 
> 赞同：0
> 
> 时间：2012-04-08T08:48:46.963
> 
> 标签：iphone, objective-c, opengl-es, 3d, fade

我正在寻找一种方法来在 OpenGL ES 场景中的对象上实现淡化效果。我希望能够控制褪色效果发生的时间段。

谁能建议我如何达到这种效果？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:00:28.187

您可以在更新循环期间更新对象的 alpha 值。在每个循环中逐渐降低 alpha 值少量将实现褪色效果。

要控制周期，请尝试使用表示自上次循环以来经过的时间的经过值以及由您希望它运行的时间段确定的计算系数。

要获得系数，请使用以下内容：coefficient = (maxAlpha - minAlpha) / fadeTimeInSeconds;

然后在你的更新循环中使用类似：objectsAlpha -= coefficient * timeElapsed

其中 timeElapsed 是一个浮点数，表示自上次更新循环以来经过的时间（以秒为单位）。

* * *

我已经通过手机发布了这个，很抱歉简短的回答和不太详细的伪代码。它也不是专门的opengl。

# php - MySQL如何知道某行是否存在

> ID：10061582
> 
> 赞同：1
> 
> 时间：2012-04-08T08:48:53.950
> 
> 标签：php, mysql, database, if-statement

我想阻止用户评论已删除的线程。我设置了一个变量（我们称之为'tnum'）来识别原始线程及其评论，因此我可以将它们显示在同一个网页中。当我删除一个线程时，原始线程和所有评论都会立即删除（从 ~ 删除 ~ 其中 tnum 是 ~）

所以我认为我可以使用它来阻止对已删除线程的评论提交。

当表中没有具有特定 tnum 值的行时，我想发出一条错误消息。

```
if( 'some code' ) {

error("There is no data for the thread.");

} 
```

有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:10:25.100

您可以在 MySQL 中使用 COUNT() 来获取符合您的条件的行数。所以像这样

```
$db = new PDO( /* connection details */ );
$sth = $db->prepare( 'SELECT COUNT(*) AS numRows FROM `table` WHERE tnum = :tnum' );
$sth->execute( array( 'tnum' => $tnum ) );
$result = $sth->fetchAll();
if( $result['numRows'] == 0 ) {
    error("There is no data for the thread.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:52:36.413

要知道表中是否存在列，您可以运行以下查询：

```
SHOW COLUMNS FROM `table` LIKE 'fieldname'; 
```

# javascript - 具有不同窗口大小的jQuery弹出位置

> ID：10061587
> 
> 赞同：0
> 
> 时间：2012-04-08T08:49:59.470
> 
> 标签：javascript, jquery

我想使用 JavaScript 来控制不同大小窗口的弹出位置。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:17:56.897

我假设您正在谈论标准`window.open`弹出窗口，以防万一，请告诉我们。

你要做的很简单。首先使用对象找出客户的屏幕尺寸`screen`：

```
var screenWidth = screen.width;
var screenHeight = screen.height; 
```

现在我们有了屏幕的大小，例如，我们可以使用它来计算 800x600 尺寸的居中弹出窗口的左上角：

```
var top = screenWidth/2 - 300;
var left = screenHeight/2 - 400; 
```

现在，我们准备好了：

```
var myCenteredWindow = window.open(myURL,'myFancyPopup','width=800,height=600,scrollbars=no,top=' + top + ',left=' + left + ''); 
```

请注意，这可以很容易地写成一行（当您了解正在发生的事情时）：

```
var myCenteredWindow = window.open(myURL,'myFancyPopup','width=800,height=600,scrollbars=no,top=' + screen.width/2 - 300 + ',left=' + screen.height/2 - 400 + ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:15:57.183

要控制不同窗口大小的弹出对话框窗口，使用窗口的宽度和对话框的宽度来计算对话框的位置，**例如：**如果您需要对话框出现在屏幕中间而不管窗口宽度，试试这个：

```
var windowWidth = $(window).width(); //get the windows width;
var dialogWidth = $("#popup-dialog").width(); // get the dialog width;
var pLeft = (windowWidth - dialogWidth) / 2;
$("#dialog").css("left", pLeft); 
```

# ajax - ajax的codeigniter csrf保护错误

> ID：10061589
> 
> 赞同：0
> 
> 时间：2012-04-08T08:50:24.993
> 
> 标签：ajax, prototypejs, codeigniter-2, csrf-protection

我这里有一个小问题我无法解决，这篇文章通过但响应返回“500 内部服务器错误”</p>

谁来修复它？

在 CI 论坛中搜索后，我发现了这个链接[codeigniter-csrf-protection-with-ajax](http://ericlbarnes.com/2011/03/17/codeigniter-csrf-protection-with-ajax)但我无法解决它。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T09:23:45.837

您应该在 AJAX POST 请求中包含 csrf 键以使操作生效。

但是，您只是在获取数据，因此使用`method:'get'`而不是`method:'post'`应该可以解决问题并使您的请求有效。

[有关何时使用 POST 和何时使用 GET 的精彩讨论，请参阅此问题](https://stackoverflow.com/questions/679013/get-vs-post-best-practices)

如果您确实计划将数据发布到服务器，并且它抱怨缺少 CSRF 密钥，则有两种方法可以将其添加到请求中：

*   使用插件允许原型从由 codeigniter 设置的 csrf cookie 中提取数据；这可能更优雅，但会为您的总脚本增加一点；这是一篇关于如何在原型[http://codeinthehole.com/writing/javascript-cookie-objects-using-prototype-and-json/中访问 c​​ookie 的详细信息](http://codeinthehole.com/writing/javascript-cookie-objects-using-prototype-and-json/)

*   如果您从现有表单发送此请求，它*应该*有一个包含密钥的隐藏输入字段，您可以使用类似的东西简单地访问它`var csrf = $("input[name=csrf_key]").val();`（这是 jQuery 语法，但我确定原型版本不是t 太远）。如果该页面中没有表单，只需在`echo form_open(); form_close();`某处写一个以确保 CI 打印出隐藏字段。

最后，确保您在 POST 请求中发送该值，以确保您是一个不想要 hackz0r 服务器的帅哥。您应该将此参数添加到 JS 中的 ajax 请求中：

```
parameters: {'csrf_key' : csrf} 
```

其中 csrf 是您从中获取密钥的变量（来自 cookie 或来自隐藏的输入）。确保名字没问题！如果您要获取 cookie，请确保 cookie 名称与`config/config.php`. 输入令牌也是如此！

希望这可以帮助！

# iphone - iPad/iPhone Safari 中出现明显的 HTML 处理错误？

> ID：10061593
> 
> 赞同：4
> 
> 时间：2012-04-08T08:51:08.353
> 
> 标签：iphone, ipad

这让我很温和..

如果您查看以下包含标题的琐碎网页......用于在 Arduino 中进行嵌入式开发（尽管问题与后者无关）。

```
<!DOCTYPE HTML>
<html><head><meta http-equiv='cache-control' content='no-cache' />
<link href='http://www.scargill.net/embed/embed.css' rel='stylesheet' /><title>strange page</title>
</head><body style='text-align:center'>
<br/>Time: 09:24:07 03/04/2012<br/>
<br/>Time: 09:24:07 03\/04\/2012<br/>
</script>
</body></html> 
```

显示时间和日期的两条重要线......第一条是简单的时间和日期显示，第二条是绝望的调试尝试..你可能会忽略它......

在任何浏览器上都可以正常显示...我在[http://www.scargill.net/eh.htm有一份副本](http://www.scargill.net/eh.htm)

除了 iPhone 或 iPad 上的 Safari 浏览器之外的任何浏览器……显示时间和日期的第一行会发生一些事情，它会中途通过并简单地停止。

这适用于使用其他浏览器的 iPad，但不适用于 Safari。

任何人都可以帮忙 - 为什么简单的时间和日期显示会在 iPad 和 iPhone 上搞砸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:53:27.580

看起来 iOS 上的 Safari 认为日期的一部分是电话号码并试图解析它。

您可以通过将以下内容添加到您的`<head>`部分来停止 Safari 查找电话号码：

```
<meta name="format-detection" content="telephone=no" /> 
```

希望这应该可以解决您的问题。

# javascript - 如何使用 JavaScript 找到出现次数最多的数字？

> ID：10061594
> 
> 赞同：3
> 
> 时间：2012-04-08T08:51:15.183
> 
> 标签：javascript, count, find-occurrences

如果用户输入 5 个数字，可以说`4, 4, 7, 7, 4`...... 4 发生了 3 次（最多）次。所以输出应该是`4`。

如何使用 JavaScript 做到这一点？非常感谢您的帮助。谢谢！

到目前为止，我已经尝试过了。行得通，但是太长了，找个短小简单的办法。

PS这不是我的作业！

```
 var n = parseInt(prompt("How many numbers do you like to enter?", ""));
    var num = new Array();

    for (i = 1; i <= n; i++) {
        num[i] = parseInt(prompt("Enter a number", ""));
        document.write("Entered numbers are: " + num[i] + "<br/>");
    }

    var total = new Array();
    for (i = 1; i <= n; i++) {
        var count = 1;
        for (j = i + 1; j <= n; j++) {
            if (num[i] == num[j]) {
                count++;
            }
            total[i] = count;
        }
    }

    var most = 0;
    for (i = 0; i < n; i++) {
        if (most < total[i]) {
            most = total[i];
        }
        var val = i;
    }
    document.write("<br/>" + num[val] + " is occurred " + most + " times"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T09:21:37.430

[使用数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#Syntax) [文字](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Array_literals)创建一个`a`包含大量数字的数组：

```
var a = [1, 2, 3, 4, 4, 5, 1, 2, 3, 1, 2, 1, 1]; 
```

`o`使用[对象文字](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Object_literals)创建一个普通对象。

```
var o = {},          /* Creates a new object */
    i = 0,           /* Declare variable i, initialise value at 0*/
    m = {m:0,t:null},
    t,               /* Declare variable t */
    len = a.length;  /* Declare variable len, set value to the array's length */ 
```

`a`使用[`for(;;)`-loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for#Syntax)循环遍历数组并递增计数器。计数器存储在 object 上的 hashmap 中`o`。
`(o[a[i]] || 0)`键的第一次出现需要：当它没有找到时，`0`使用该值而不是`undefined`. 另见[短路评估：逻辑或](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators#Logical_OR_%28.7C.7C%29)。

```
for ( ; i < len ; i++ ) {
    o[ a[i] ] = ( o[ a[i] ] || 0 ) + 1;
} 
```

然后你有一个`o`看起来像这样的对象：

```
o = {
    "1": 5,
    "2": 3,
    "3": 2,
    "4": 2,
    "5": 1
} 
```

`o`然后使用[`for(.. in ..)`-loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)循环并找到出现的最大次数。
在循环的底部，使用了[条件三元`.. ? .. : ..`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)运算符：

```
for ( i in o ) {
    t = { 
        m: o[i], 
        i: i 
    };
    m = m.m < t.m ? t : m;
} 
```

此循环后`m`等于：

```
m = { 
    i: "1", 
    m: "5"
}; 
```

并且可以使用以下方法捕获最大值：

```
o[m]; 
```

女巫给你：

```
5 
```

* * *

### 演示

[http://jsbin.com/utiqey/](http://jsbin.com/utiqey/)

```
var a = [1, 2, 3, 4, 4, 5, 1, 2, 3, 1, 2, 1, 1]; 

var o = {}, 
    i = 0, 
    m = {m:0,t:null}, 
    t,
    len = a.length; 

for ( ; i < len ; i++ ) { 
    o[ a[i] ] = ( o[ a[i] ] || 0 ) + 1; 
} 

for ( i in o ) { 
    t = { 
        m: o[i], 
        i: i 
    };
    m = m.m < t.m ? t : m;
} 

alert(m.i + " is the highest presented " + m.m + " times"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T09:54:50.493

无需进行两次通过，以下会累积最大值：

```
var g = [4, 4, 7, 7, 4, 5, 6, 7, 8, 6, 5, 2, 2, 2, 3, 4, 5]; //your array

for (var t = {}, maxn = g[0], max = 0, gi, i = g.length; i--;) {
  if (max < (t[gi = g[i]] = (t[gi] || 0) + 1)) {
    max = t[gi];
    maxn = gi;
  }
}

document.write ('The number ' + maxn + ' occurs ' + max + 'times'); 
```

### 编辑

一个很好的解决方案，但 OP 可能需要一些解释和一些更合适的变量名。集合中最常出现的值是*mode*。

```
// Use any member of g to seed the mode
var mode = g[0];
// The number of times the current mode has occurred
var count = 0;
// Results object
var t = {};
var i = g.length;
var gi;

// Loop over all the members
while (i--) {

  // Get the value at i
  gi = g[i];

  // Keep track of how many times the value has been found  
  // If the number hasn't occured before, add it with count 1
  // Otherwise, add 1 to its count
  t[gi] = (t[gi] || 0) + 1;

  // Set the mode to the current value if it has occurred 
  // more often than the current mode
  if (count < t[gi]) {
    count = t[gi];
    mode = gi;
  }
}

alert('The mode is ' + mode + ' and occurs ' + count + ' times.'); 
```

如果有多个模式，则从数组末尾开始*计数*第一个找到的模式获胜。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T08:57:43.677

[http://jsbin.com/ageyol/3/edit](http://jsbin.com/ageyol/3/edit)

```
var g = [4, 4, 7, 7, 4, 5, 6, 7, 8, 6, 5, 2, 2, 2, 3, 4, 5]; //your array
var t = {}; // object which contain the numbers as properties.

for (var i = 0; i < g.length; i++)
{
    if (!t[g[i]]) t[g[i]] = 0; //if the property doesnt exists , so create one with counter 0.
    t[g[i]]++; // also - increase the property VALUE.
}

var max = 0;

for (i in t)
{
    if (t[i] > max) max = t[i]; //check if property value is larger then the current MAX val.
    document.write(i + "  " + t[i] + "<br/>");
}
document.write(t[max]); 
```

*ps 如果超过最大值 - 所以你应该迭代。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T11:08:08.247

对数组进行排序，然后相同的值彼此相邻，这样您就可以遍历它们并查找最长的连续：

```
arr.sort();

var maxValue, maxCount = 0, cnt = 1, last = arr[0];
for (var i = 1; i <= arr.length; i++) {
  if (i = arr.length || arr[i] != last) {
    if (cnt > maxCount) {
      maxCount = cnt;
      maxValue = last;
    }
    cnt = 1;
    if (i < arr.length) last = arr[i];
  } else {
    cnt++;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T15:15:12.480

只是为了摆脱其他答案之一，一旦您形成了值对象，您就可以将值推送到数组中并用于[`Math.max`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/max)获取上限。通常`Math.max`接受一系列数字，但如果你使用[`.apply`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)它也可以接受一个`array`. 对于`Math.min`.

```
var o = { 1: 5, 2: 3, 3: 2, 4: 2, 5: 1 };

var out = [];
for (var k in o) {
  out.push(o[k]);
}

var upperbound = Math.max.apply(null, out); // 5 
```

# oracle - Creating materialized view that refreshes every 5 min

> ID：10061597
> 
> 赞同：12
> 
> 时间：2012-04-08T08:51:24.957
> 
> 标签：oracle, oracle11g

I created a materialized view that refreshed every 5 min but when I do insert and perform select on materialized view I get same old data? Do I need to refresh manually?

```
CREATE MATERIALIZED VIEW MVW_TEST
REFRESH FORCE ON DEMAND 
START WITH TO_DATE('01-01-2009 00:01:00', 'DD-MM-YYYY HH24:MI:SS') NEXT SYSDATE + 1/1152 
As select * from TEST12 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-08T11:02:03.340

I have demonstrated in steps where a materialized view refresh after every `one minute` ,for having a mv which refresh after 5 minute use `next(sysdate+5/1440)`

Step1:

```
Create table temp (A int); 
```

Step2:

```
Create Materialized view temp_mv
      refresh complete start with (sysdate) next  (sysdate+1/1440) with rowid
        as select * from temp; 
```

Step3:

```
select count(*) from temp;

       COUNT(*)
      ----------
          0 
```

Step4:

```
select count(*) from temp_mv;

       COUNT(*)
      ----------
          0 
```

Step5:

```
begin
      for i in 1..10 loop
         insert into temp values (i+1);
      end loop;
end;
/ 
```

Step6:

```
commit; 
```

Step7:

```
select count(*) from temp;

       COUNT(*)
     ----------
        10 
```

Step8:

```
select count(*) from temp_mv;

       COUNT(*)
       ----------
          0 
```

Step9:

```
select to_char(sysdate,'hh:mi') from dual;

       TO_CH
       -----
       04:28 
```

Step10:

```
select to_char(sysdate,'hh:mi') from dual;

       TO_CH
        -----
       04:29 
```

Step11:

```
select count(*) from temp;

      COUNT(*)
     ----------
        10 
```

Step12:

```
select count(*) from temp_mv;

      COUNT(*)
      ----------
         10 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-11T23:04:43.577

You can also create a scheduler job:

```
BEGIN
  SYS.DBMS_SCHEDULER.CREATE_JOB
    (
       job_name        => 'DBAPER.MVW_TEST_REFRESH'
      ,start_date      => TO_TIMESTAMP_TZ('2011/09/02 00:00:00.000000 US/Central','yyyy/mm/dd hh24:mi:ss.ff tzr')
      ,repeat_interval => 'FREQ=DAILY;BYHOUR=6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22;BYMINUTE=0,5,10,15,20,25,30,35,40,45,50,55'
      ,end_date        => NULL
      ,job_class       => 'DEFAULT_JOB_CLASS'
      ,job_type        => 'PLSQL_BLOCK'
      ,job_action      => 'BEGIN 
                            DBMS_MVIEW.REFRESH(''MVW_TEST'',''C'');
                            END;'
      ,comments        => 'Job to refresh materialized view MVW_TEST.'
    );
END;
/ 
```

That way you have more configuration options, like excluding night hours or weekends for example.

# css - 基本并排嵌套 定位

> ID：10061598
> 
> 赞同：0
> 
> 时间：2012-04-08T08:51:39.357
> 
> 标签：css, html

[HTML](http://sas98.user.srcf.net/guestlist/index.php)和[CSS](http://sas98.user.srcf.net/guestlist/style.css)。

这真的不应该像我想象的那么难——我相信解决方案很简单。

我正在尝试完成两件事：

1）拥有`#left`并`#right`在其中`.container`并排坐下并`#footer`保持在原地。理想情况下，`#right`它将成为一个分隔线（其中没有文字），`#topstrip`并且`#bottomstrip`在右侧会有第三个 div。

`#navbar`2)在左侧有一个标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:47:59.877

您可以在容器中浮动左右 div，然后使用 clearfix 使它们同样高：[http ://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

因为我们都一遍又一遍地遇到这种布局问题，所以已经创建了几个非常好的 css 框架来完成这项繁重的工作。让您专注于构建内容而不是样板文件。我个人使用 yaml ( [http://www.yaml.de/](http://www.yaml.de/) ) 并且从那以后没有回头。我可以全心全意地推荐它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:14:24.393

你可以使用表格

```
<table width="100%" border="0">
<tr>
<td colspan="3"><div id="navbar"><img src="YOUR LOGO SOURCE HERE" align="left"/>navbar section</div></td>
</tr>
<tr>
<td><div id="left">left section</div></td>
<td><div class="container">container</div></td>
<td><div id="right">right section</div></td>
</tr>
<td colspan="3"><div id="footer">footer section</div></td>
</table> 
```

然后您可以根据需要更改每个的宽度和高度`<TD>`表格设置为整个页面宽度，您可以添加`height="100%"`到表格标签，也可以添加自定义宽度和高度。`border="0"`您可以将其更改为`border="1"`查看您的表限制等。

玩得开心 ：）

# php - 为什么Apache在没有扩展名的调用文件上执行php文件

> ID：10061602
> 
> 赞同：4
> 
> 时间：2012-04-08T08:52:50.453
> 
> 标签：php, apache, apache2

今天我在我的服务器上发现了一个奇怪的东西。我创建了一个 php 文件（test.php）并在其中编写了一些 php 代码。然后我用它来称呼它

```
http://127.0.0.1/test 
```

并执行了“test.php”！没有 .php 时如何理解运行 test.php ？我的根目录上没有 htaccess 文件来告诉 apache 这样做。我想这可能会导致安全问题。我该如何预防？

我的操作系统是 ubuntu，网络服务器是 Apache2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T23:55:30.870

发生这种情况是因为 MultiViews（它在该目录的“选项”中的某处启用）。

看看这里：[http](http://httpd.apache.org/docs/current/content-negotiation.html#negotiation) ://httpd.apache.org/docs/current/content-negotiation.html#negotiation了解它的工作原理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T09:04:50.900

Check your apache config (/etc/apache2/sites-available/[site_name or default]), it probably contains mod_rewrite instructions, for example:

```
RewriteEngine on
RewriteBase /
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(([^/]+/)*[^.]+)$ /$1.php [L] 
```

If you comment them out with # and restart apache, accessing /test without specifying extension should no longer work.

# mysql - 合并表（9M 记录）并删除重复项

> ID：10061603
> 
> 赞同：0
> 
> 时间：2012-04-08T08:52:52.383
> 
> 标签：mysql

我有 10 个表，每个表都有 0.5+M 条记录（总共 9M 条记录）。每个表的结构都非常相似。现在我想删除每个表内和表之间的重复项，或者说我想查看所有表中存在谁以及我实际拥有多少唯一记录。**但问题是数据量巨大。**

所以我计划创建不同的表 - 1 用于电子邮件地址，1 用于手机号码，1 用于地址等等。但是现在如果每个表都有 5M 记录，那么我的表会变得非常慢。

一种解决方案是我按照出生日期的月份创建表，这将导致 12 个表，然后我将能够对每个表中的数据进行排序。

请建议我该怎么办？数据为 960 万条记录 / 3.2GB

还建议如何将数据从 1 个表快速移动到其他表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:57:07.947

听起来你有一个数据库设计问题。即使是 3.2gb 的数据集也可以足够快地运行……优化数据库结构并使用适当的索引、缓存等将比分解成更多的表要好得多。您希望运行尽可能少的查询，并且尽可能简单的查询。

如果您确实将它们分解得更多，从长远来看，您将自取其辱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:37:26.893

创建一个具有相同结构但对确定行的唯一性的列集具有[唯一约束的新表。](http://dev.mysql.com/doc/refman/5.0/en/create-table.html)

然后使用`INSERT IGNORE INTO`....`SELECT FROM`将所有行从旧表转移到新表。语法可以在[这里](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)找到。

然后截断旧表并使用`INSERT INTO`....`SELECT FROM`将行传输回原始表。

您可能希望向原始表添加唯一约束，以防止首先创建重复项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T09:01:04.160

您可以创建一个结合 12 个表的结果的特定[视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)，然后在视图上查询以获得所需的过滤结果......

# c++ - 为什么指针不递增

> ID：10061604
> 
> 赞同：2
> 
> 时间：2012-04-08T08:52:53.857
> 
> 标签：c++, arrays, struct

作为 C++ 的新手，我一直在练习提问。我编写的一个程序包括使用结构和数组：

```
#include <iostream>
using namespace std;

int main (void){
struct CandyBar{
    char brandName[200];
    float weight;
    int calories;
};

CandyBar snacks[3] = {
    {"Cadbury's Flake",23.5,49},
    {"Cadbury's Wispa",49.3,29},
    {"Cadbury's Picnic",57.8,49},
};

for(int i=0;i<3;i++){
    cout << "Brand Name: " << snacks[i].brandName << endl;
    cout << "Weight: " << snacks[i].weight << endl;
    cout << "Calories: " << snacks[i].calories << endl;
    snacks++;
}

cin.get();
return 0;
} 
```

上面的程序因为“snacks++”而失败，但我不明白为什么。据我了解，数组由指针（“snacks”）和对象（[]）两部分组成，所以当我增加指针时，“snacks++”不应该工作吗？

谢谢丹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T09:06:25.777

just remove the `snacks++;`
you are already using the variable `i` as a index in the array.

if you do want to use a pointer arithmetics:
a. you should define a pointer to the start of the array and work with it rather then work with the array.
b. you should use a pointer instead of the array with index `i` when accessing the data.

```
struct CandyBar* ptr = snacks;
for(int i=0;i<3;i++){
    cout << "Brand Name: " << ptr->brandName << endl;
    cout << "Weight: " << ptr->weight << endl;
    cout << "Calories: " << ptr->calories << endl;
    ptr++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T08:58:53.010

`snacks`不是指针。它的类型`CandyBar[3]`不是`CandyBar*`。但是，数组转换为指针真的很容易：

```
CandyBar* snackIterator = snacks; 
```

（您应该清楚您使用指针的目的：有很多用途使它们有些混乱）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T08:58:21.150

虽然可以将数组用作指针，但它不是编译器中的指针。因此，您不能更改`snacks`变量。如果您被允许更改“指针”，它将不再“指向”循环后数组的开头，而是指向数组之外的未初始化内存的条目。

此外，您无需更改`snacks`变量，`snacks[i]`已经为您获取正确的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T08:55:11.303

您无法更改 的值`snacks`。您应该使用指针而不是`snacks`.

而且在您的情况下，您不需要增加指针`i`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T08:59:48.573

`snakes`从列表中的第一项开始。您用于`snacks[[i]`索引该列表。但是您也将目标职位转移到列表中的第一项，`snacks[++`因此您使用数组中的下一项作为起点。即有你的问题。做一个或另一个。

# javascript - 关于 XMLHttpRequest 的同源限制

> ID：10061605
> 
> 赞同：1
> 
> 时间：2012-04-08T08:52:53.943
> 
> 标签：javascript, xmlhttprequest, same-origin-policy

我认为对于`XMLHttpRequest`.

与其禁止 Javascript 代码向不同的主机发送 http 请求（这对于合法用途来说真的很烦人），在这种情况下只允许请求但不发送或接受 cookie 不是更好吗？

禁止一个特定的脚本来获得互联网上其他人都能获得的东西，乍一看，在我看来这是一个非常奇怪的选择......

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:04:24.177

> Instead of forbidding Javascript code to send http request to different hosts (something that is really annoying for legitimate uses) wouldn't have been better to just allow the request but not sending or accepting cookies in that case?

That is what [Cross-Origin Resource Sharing (CORS)](http://www.w3.org/TR/cors/) specifies.

> Care must always be taken by applications when making cross-origin requests with user credentials, and servers processing such requests must take care in the use of credentials, including the Origin header.
> 
> 1.  When requests have significance other than retrieval, and when relying on the Origin header as a credential, servers must be careful to distinguish between authorizing a request and authorizing access to the representation of that resource in the response.
> 
> ...
> 
> ### [omit credentials flag](http://www.w3.org/TR/cors/#omit-credentials-flag)
> 
> Set when user credentials are to be excluded in the request and when cookies are to be ignored in its response.

* * *

> Forbidding a specific script to get something that literally everyone else in the internet can get seems to me at a first sight a quite weird choice...
> 
> What am I missing?

It took web-standards bodies a while to realize that people would want to write serious JavaScript heavy applications. Gmail changed all that but standards bodies like the W3C take a while to fill functionality holes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:22:02.477

您的建议最初会避免用户数据被利用，但这仍然意味着代码可以从任何其他潜在的恶意域运行，然后可以读取和传输该 cookie 数据，而无需在请求中隐式发送。我想现在的情况是安全性和灵活性之间的最佳折衷。

# html - 提交主表单而不提交内部表单

> ID：10061607
> 
> 赞同：0
> 
> 时间：2012-04-08T08:53:04.847
> 
> 标签：html, forms, jsf, jsf-2

我有一个包含内部表单的主表单（该内部表单仅出现在编辑案例中）并且我希望两个表单彼此分开，而不是在提交主表单时内部没有提交，该怎么做？

这是一个片段：

```
<h:form id="mainForm">

  <!-- some inputs here -->

  <h:commandButton value="submit main" action="#{myBean.mainSubmit()}" />

 <h:panelGroup rendered="#{myBean.editMode}"> 
    <h:form id="innerForm"> 
      <!-- some inputs here -->

      <h:commandButton value="submit inner" action="#{myBean.innerSubmit()}" />
    </h:form>
 </h:panelGroup>

 </h:form> 
```

**当前行为**：提交 mainForm 时也提交了内部表单，但提交内部表单时未提交 main。

**Desired Behavior**：提交mainForm时，内部没有提交，提交内部时，main也没有提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:16:03.917

嵌套表单并不是您真正希望在页面中拥有的东西......

这种方法怎么样？包装在两个面板中并使用 ajax 执行/渲染它们

```
<h:form id="mainForm">
 <h:panelGroup id="FirstPanel" rendered="#{myBean.editMode}"> 
  <!-- some inputs here -->
  <h:commandButton value="submit main" action="#{myBean.mainSubmit()}" >
      <f:ajax execute="FirstPanel" render="FirstPanel"></f:ajax>
  </h:commandButton>
 </h:panelGroup>

 <h:panelGroup id="SecondPanel" rendered="#{myBean.editMode}"> 
   <!-- some inputs here -->
   <h:commandButton value="submit inner" action="#{myBean.innerSubmit()}" >
       <f:ajax execute="SecondPanel" render="SecondPanel"></f:ajax>
   </h:commandButton>
 </h:panelGroup>
</h:form> 
```

您可以放置​​任意`<h:panelGroup`数量的内容，并将它们的 id 添加到 f:ajax 的渲染执行中，例如`f:ajax execute="FirstPanel ThirdOne AnotherOne"`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T09:03:21.900

我在 IE9 上遇到了内部表单的问题，表单的内容无法显示，所以我删除了内部表单并使用了 icefaces 的部分提交功能，从而解决了问题。

# python - 在哪里控制 Django 中的权限式查看？在 url（通过通用视图）、模板或视图中？

> ID：10061609
> 
> 赞同：3
> 
> 时间：2012-04-08T08:53:07.233
> 
> 标签：python, django, permissions, django-templates, django-views

我有一个基本权限系统，我在其中几乎基于 对权限进行硬编码`user.profile.user_type`，`user.profile`相当于`user.get_profile()`.

例如，如果 a`user_type`是`1`（物业经理），那么该用户可以查看所有工作订单。A `user_type`of `2`(tenant) 表示用户只能查看他创建的工单。

我目前只是`urls.py`像这样使用基于类的通用视图

```
url(
    r'^orders/$',
    ListView.as_view(
        model = Order,
        template_name = 'doors/orders/list.html'
    ),
    name = 'orders_list'
), 
```

因此我根本没有权限控制。

那么要添加权限系统，我应该像这样在模板中控制它吗？

```
{% for order in order_list %}
    {% if request.user.profile.user_type == 1 %}
        # Show every order
        {{ order.pk }}
    {% else %}
        # Show only work orders created by that user
        {% if order.creator == request.user.pk %}
            {{ order.pk }}
        {% endif %}
    {% endif %}
{% endfor %} 
```

我有一种感觉，尝试在模板内部进行*过滤*是在浪费大量的 SQL 命中，因为无论是什么`user_type`，模板仍然会强制 Django 调用每个工单。真的吗？

或者我应该像这样在视图中控制它？

```
def orders_list( request ) :
    if request.user.user_type == 1 :
        order_list = Order.objects.all()
    else :
        order_list = Order.objects.filter( creator = request.user.pk )

    dictionary = {
        'order_list' : order_list,
    }

    return render( request, 'doors/orders/list.html', dictionary ) 
```

显然，如果我试图在里面控制它`views.py`，那么我就不能再使用通用视图了。

最后，我的第三个选择是（以某种方式）在基于类的通用视图中控制它。我什至不知道这是否可能。也许不知何故[`get_context_data`](https://docs.djangoproject.com/en/dev/topics/class-based-views/#adding-extra-context)？我真的很喜欢通用视图的简单性，但我对更高级的 OO 概念不太熟悉。

各位有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:58:46.607

如果你使用`ListView`有`get_queryset()`方法来做到这一点：

```
class OrderListView(ListView):
    template_name = 'doors/orders/list.html'

    def get_queryset(self):
        user = self.request.user
        if user.user_type == 1:
            return Order.objects.all()
        return Order.objects.filter(creator=user.pk) 
```

# bash - 如何在单个 bash 脚本中找到一个进程并杀死它

> ID：10061610
> 
> 赞同：1
> 
> 时间：2012-04-08T08:53:18.403
> 
> 标签：bash, shell

目前我执行以下清除端口上运行的所有进程

```
lsof -i :10000 
```

我得到

```
COMMAND     PID         USER   FD   TYPE     DEVICE SIZE/OFF NODE NAME
Google    10427         user   60u  IPv4 0x162adea8      0t0  TCP localhost:52478->localhost:ndmp   (ESTABLISHED)
Google    10427         user  112u  IPv4 0x16289b98      0t0  TCP localhost:52483->localhost:ndmp (ESTABLISHED) 
```

然后我杀了它

```
kill 10427 
```

我正在寻找一种方法来简化上述过程。我猜该解决方案与管道输出和杀死它有关。类似的东西（我想，这里我假设 1 美元是 10427）。

```
lsof -i :10000 | kill $1 
```

我没有做太多的 bash 脚本，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T08:57:45.080

我想你想要类似的东西

```
fuser -k -n tcp 10000 
```

`lsof`灵魂会更像

```
lsof -i :10000|tail -n +2|awk '{print $2}'|xargs -r kill 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:58:47.503

我认为迈克尔斯的回答是最好的，但仅供参考，您也可以这样做：

```
PID=`lsof -i :10000 | awk 'NR == 2 {print $2}'`
kill $PID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T11:37:55.097

或者用这个！

```
kill $(lsof -i :www | awk '{print $2}' | grep -v PID) 
```

# java - 如何将 Java SQL 查询转换为 Java 对象 [][]？

> ID：10061611
> 
> 赞同：1
> 
> 时间：2012-04-08T08:53:34.603
> 
> 标签：java, sql, arrays, object

我正在寻找一种使用 Java 查询 SQL 数据库并返回 Object [] [] 的方法。这是 SQL 查询：

```
 private static Object result[][] = null;
 result = run.query(conn, "select * from TREEDATA", rsh); 
```

以下是数据应反映的示例：

```
 Object[][] table = {
        {1, null, "Root"}, //i=0
        {2, 1, "Node2"}, //i=1
        {3, 2, "Node3"}, //i=2
        {4, 3, "Node4"}, //i=3
        {5, 4, "Node5"}, //i=4
        {6, 5, "Node6"}, //i=5
        {7, 6, "Node7"}, //i=6
        {8, 1, "Node8"}, //i=7
        {9, 1, "Node9"}, //i=8
        {10, 9, "Node10"},};    //i=9 
```

这是结果集处理程序，其中包含我无法弄清楚的代码：

```
 public Object[][] handle(ResultSet rs) throws SQLException {
        if (!rs.next()) {
            System.out.println("result set is null");
            return null;
        }
        ResultSetMetaData meta = rs.getMetaData();
        int rows = 0;
        while (rs.next()) {
            rows++;
        }
        Object[][] result = new Object[rows];
        int i = 0;
        while (rs.next()) {
 //How do I do what I need to do in order to return result[][] 
            result[i][] = rs.getObject(3);           
            System.out.println(result[i][2].toString());
        }
        return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:22:52.680

这是您开始时的实现：

```
 public Object[][] handle(ResultSet rs) throws SQLException {
        if (!rs.last()) { //If false, the result set is empty.
            System.out.println("result set is null");
            return null;
        }
        int rowCount = rs.getRow(); // You are pointing on the last row, so this will get the row number of the last row.
        rs.beforeFirst(); // Reset your cursor.
        ResultSetMetaData meta = rs.getMetaData();
        int columnCount = meta.getColumnCount();
        Object[][] result = new Object[rowCount][columnCount];
        int i = 0;
        while (rs.next()) {
            for (int j = 0; j < columnCount; j++) {
                result[i][j] = rs.getObject(j);
            }
        }
        return result;
} 
```

但就我个人而言，我宁愿让函数返回`ArrayList<Object[]>`甚至更好`List<TreeData>`，但是你需要`TreeData`手动实现并用行值填充对象。这就是 JPA/Hibernate 的用武之地。但根据您的应用程序，这可能又有点过头了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:01:28.540

这是你想要的吗？您需要在循环获取数据之前重置结果集。

```
Object[][] result = new Object[rows];
rs.first();
int i = 0;
while (rs.next()) {
  result[i] = new Object[3];
  result[i][0] = rs.getObject(1);
  result[i][1] = rs.getObject(2);
  result[i][2] = rs.getObject(3);
  i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T09:00:45.713

在您的函数中，从使用 an`ArrayList`而不是`Object[][]`. 所以你不需要计算行数。

然后对于每一行

```
while(rs.next()) {
  Object[] row = new Object[meta.getColumnCount()];
  for (int i = 0 ; i < row.length ; ++i) {
    row[i] = rs.getObject(i+1); // remember thet on ResultSet object first column is 1
  }
  rows.add(row); // add row to the ArrayList
} 
```

最后，您可以`ArrayList`使用`toArray()`.

# android - 如何在不加载 webview 页面的情况下从 webview 获取 html 源代码？

> ID：10061613
> 
> 赞同：0
> 
> 时间：2012-04-08T08:54:26.303
> 
> 标签：android, android-webview

我想从android中的webview获取页面源（html），但我不想先加载页面。stackoverflow 上的许多资源都说首先加载页面并使用 js ，onpagefinish 事件，然后我会得到源，但我不想这样做。我想写 url 并将源返回给我。有可能的？例如，我写 www.google.com 并来找我“...”

# java - 抑制嵌入式 Jetty 服务器版本

> ID：10061618
> 
> 赞同：1
> 
> 时间：2012-04-08T08:55:37.927
> 
> 标签：java, jetty, embedded-jetty

是否可以隐藏 Jetty 产生的以下输出？

```
2012-04-08 10:52:35.467:INFO:oejs.Server:jetty-8.y.z-SNAPSHOT
2012-04-08 10:52:35.623:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:4725 
```

我尝试使用 xml 配置服务器，但事实证明此输出未使用以下要点重定向： http: [//docs.codehaus.org/display/JETTY/StdErrStdOut](http://docs.codehaus.org/display/JETTY/StdErrStdOut)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T10:37:46.013

您正在使用 Jetty 8，文档位于 [http://wiki.eclipse.org/Jetty/](http://wiki.eclipse.org/Jetty/)

Jetty 在服务器启动期间写入此信息

```
LOG.info("jetty-"+__version); 
```

如果你使用 StdErr Logger，即你的类路径上没有 SLF4J Logging Framework，你可以使用系统属性

*org.eclipse.jetty.LEVEL*

配置日志级别。 *org.eclipse.jetty.LEVEL*支持 LogLevels ALL|DEBUG|INFO|WARN。

有关 Jetty 7,8.x 以及如何将外部日志框架与 jetty 一起使用的更多信息，请查看[Jetty Logging](http://wiki.eclipse.org/Jetty/Feature/Jetty_Logging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:21:04.827

在启动服务器之前将`StdErrLog`级别设置为,：`WARN`

```
Properties p = new Properties();
p.setProperty("org.eclipse.jetty.LEVEL", "WARN");
org.eclipse.jetty.util.log.StdErrLog.setProperties(p); 
```

# php - 使用 __call 时如何通过引用传递参数

> ID：10061621
> 
> 赞同：0
> 
> 时间：2012-04-08T08:56:09.610
> 
> 标签：php, design-patterns, decorator, magic-methods

当我正在编写一段需要装饰器模式的代码时，我想通过处理 __call 魔术方法使其使用起来非常简单。

事实上，当我使用装饰器模式时（这里，添加一个单例，添加一些方法并禁止一些其他方法）有些方法不需要被覆盖。所以使用 __call 是简化代码的好方法。

当某些方法需要通过引用传递参数时，我的情况就会出现。

举个例子，我创建了一个装饰 PDO 的 XPDO 类。这不是我以前的情况，但我不能展示那个。

```
<?php

class XPDO{
    private static $dbInstance=null;
    private $pdoConnexion;
    static function getInstance(){
        if(self::$dbInstance ==null){
            self::$dbInstance = new XPDO(/*tes params*/);
        }
        return self::$dbInstance;

    }
    private function __clone(){
    }
    private function __construct(){
        $this->pdoConnexion = new PDO('mysql:localhost;dbname=blog','root','');
    }
    /**
    *on possède toutes les méthodes de PDO mais en plus certaines qui nous sont propres ou qui
    *surchargent/limitent celles de PDO si telles qu'elles sont implémentées dans PDO, on ne les aime pas.
    */
    public function __call($method, $args){
        if(is_callable(array($this,$method))){
            return call_user_func_array(array($this,$method),$args);
        }else if(is_callable(array($this->pdoConnexion,$method))){
            return call_user_func_array(array($this->pdoConnexion,$method),$args);
        }
    }

    /**
    *
    *@param string $query the query we want to add the where
    *@param string $param name of the column
    *@return string the identifier that we would use to bind a value
    */
    private function addAndWhere(&$query,$param){
        $uid = rand(1,100000);
        if(strpos($query,'WHERE')){

            $query.= ' AND '.$param.'=:'.$param.$uid;
        }else{
            $query.= ' WHERE '.$param.'=:'.$param.$uid;
        }
        return $param.$uid;
    }
}
$pdo = XPDO::getInstance();
$query = 'SELECT * FROM sometable';
var_dump($pdo->addAndWhere($query,'smth'));
var_dump($query); 
```

这将失败，因为 addAndWhere 需要一个引用并给出一个副本。通过将 addAndWhere 传递给 public 可以很容易地修复此代码，并且它是有意义的。这里只是一个例子。现在想象一下 PDO 需要参考，你明白了我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:48:16.117

来自重载页面中的 php 手册

> 这些魔术方法的任何参数都不能通过引用传递。

没有干净的解决方案。

你只能做

```
$pdo->addAndWhere(&$query,'smth'); 
```

但这是自 5.3 以来已**弃用**，并带有相对警告。

# c - 嵌入式Linux中通过telnet登录和管理

> ID：10061622
> 
> 赞同：0
> 
> 时间：2012-04-08T08:56:14.753
> 
> 标签：c, linux, scripting, login, embedded

我们正在从 AVR 上的 C 转移到嵌入式 Linux 平台。

感谢一些关于我们应该如何编程（例如 bash 脚本/c 程序）telnet“管理控制台”以首先登录设备的“最佳实践”建议（我们现在有一个工作内核并能够运行简单的“hello world”c 程序)，然后允许用户输入诸如“set msc”之类的命令，控制台将提示输入 apn？用户名？密码...等

我们是否只是将 ac 程序编写为“远程登录服务器”并让它运行以等待通过套接字的远程登录客户端连接？或者嵌入式 Linux 中还有其他方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:24:34.997

首先，我建议在目标上使用`dropbear`(lightweight `sshd`) 以便与设备的通信被加密，仅`telnetd`在必须时才包括。

无论您选择哪种方式（或两种方式），您都需要设置一些脚本来启动 dropbear/telnetd。这将取决于您的发行版。

然后在将用于管理系统的设备上设置一个帐户，并使该用户 shell 成为您的自定义 CLI。（此信息存储在 /etc/passwd 中）

然后可以用任何合适的语言来实现 CLI，它只会读/写 stdin/stdout，它们将连接到用户端的 telnet 或 ssh 客户端。所有 telnet 逻辑都由其处理，`telnetd`然后依次调用`login`以管理用户的身份验证。这两个应用程序都可用，`busybox`它们很可能是根文件系统的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:25:47.127

最佳实践可能是使用现有的解决方案。例如，我们将[openssh](http://www.openssh.com/)用于我们的嵌入式板（ARM 和 x86 平台），以及用于调试的串行控制台。这两个都将免费为您提供登录处理和所有这些。

此外，我们的内核和 rootfs 是使用[PTXdist](http://www.ptxdist.org)创建的，因此我们可以轻松地从标准主机添加、处理和交叉编译新的应用程序和包。它工作得很好，并且还使得将完整的应用程序实际移植到其他平台变得非常容易。

# javascript - removeClass() 不删除类

> ID：10061624
> 
> 赞同：0
> 
> 时间：2012-04-08T08:56:30.840
> 
> 标签：javascript, jquery, html

removeClass 不会`selected`从`div.upvote`下面的 js 中删除该类，但 addClass() 可以正常工作。这是为什么？

```
$(document).ready(function () {
"use strict";

    $('div.upvote').click(function () {
        var id = $(this).parents('li.book').attr('id');
        var vote_type = 'up';

        if ($(this).hasClass('selected')) {
            var vote_action = 'recall-vote';
            $.post('/b/vote/', {id: id, type: vote_type, action: vote_action}, function (response) {
                if ($.isNumeric(response)) {
                    $('li#' + id)
                        .find('div.upvote')
                        .removeClass('selected');
                    $('div.vote-tally span.num').html(response);
                }
            });
        } else {
            var vote_action = 'vote';
            $.post('/b/vote/', {id: id, type: vote_type, action: vote_action}, function (response) {
                if ($.isNumeric(response)) {
                    $('li#' + id)
                        .find('div.upvote')
                        .addClass('selected');
                    $('div.vote-tally span.num').html(response);
                }
            });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:18:08.580

```
$(document).ready(function () {
    "use strict";

    $('div.upvote').click(function () {
        var id = $(this).parents('li.book').attr('id');
        var vote_type = 'up';

        if ($(this).hasClass('selected')) {
            var vote_action = 'recall-vote';
            (function (response) { // skip ajax, just call success callback
                if ($.isNumeric(response)) {
                    $('li#' + id)
                            .find('div.upvote')
                            .removeClass('selected');
                    $('div.vote-tally span.num').html(response);
                }
            }(123)); // fake numeric response
        } else {
            var vote_action = 'vote';
            (function (response) {
                if ($.isNumeric(response)) {
                    $('li#' + id)
                            .find('div.upvote')
                            .addClass('selected');
                    $('div.vote-tally span.num').html(response);
                }
            }(123));
        }
    });
}) // ) missed 
```

**HTML：**

```
<li id="li-id" class="book">
    <div class="upvote selected">upvote</div>
</li>​ 
```

使用假数据一切正常。所以你有非数字响应或错过的问题**）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:02:22.273

我记得切换功能在某些浏览器中存在错误。因此您可以使用 removeClass 而不是切换

# ssl - RSA 中的消息长度限制

> ID：10061626
> 
> 赞同：0
> 
> 时间：2012-04-08T08:56:39.930
> 
> 标签：ssl, rsa

在 RSA 中，消息长度不应超过 (keysize/8) 个字节。为什么会有这样的限制？输入（比如“abcde”）在输入 RSA 算法之前转换成什么，它在哪里考虑输入字符串“abcde”的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T09:25:55.613

RSA算法本质上是：

```
密文 = (明文e ) mod n
```

并解密：

```
明文 = (密文d ) mod n
```

`e`和`n`一起组成你的公钥， 和`d`组成`n`你的私钥。`e`通常是几个常见值之一，例如 65537，`n`是两个大素数的乘积，`p`对`q`您来说应该是唯一的，并且定义了密钥长度（例如 1024 位）。用于解密密文的值`d`是使用和计算`e`的。如果您有兴趣，维基百科有更多详细信息：[http://en.wikipedia.org/wiki/RSA_(algorithm)](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)。在 RSA 算法中使用时，您的明文基本上被视为一个大整数。`p``q`

如果您不熟悉模运算符，它基本上是左侧除以右侧时的余数。例如`17 mod 5 = 2`，5 正好除以 17 三倍 ( `3 * 5 = 15`)，余数为：) `17 - 15 = 2`。

由于模运算符的定义，结果`a mod b`总是小于`b`。鉴于此，解密值是执行`mod n`操作的结果这一事实意味着，当解密时，得到的明文值将始终小于 n。因此，要使这成为您最初加密的实际明文，输入必须小于`n`.

为了保证这一点，消息被限制为比`n`. 由于其中的位数`n`是密钥大小，因此它必须小于`keysize bits`, or `keysize / 8 bytes`（因为一个字节中有 8 位）。

# java - 如何将数字格式化为标准货币格式（逗号分隔数字）

> ID：10061628
> 
> 赞同：1
> 
> 时间：2012-04-08T08:56:56.203
> 
> 标签：java, jquery, format, currency, number-formatting

我想知道如何使用 Java 代码或 jQuery 将像 2000000 这样的数字格式化为标准货币格式，即 2,000,000？Javacode 是最好的，但 jQuery 也可以工作 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:00:00.477

看看[jQuery 数字格式化程序](http://code.google.com/p/jquery-numberformatter/)。大多数格式已经存在，您可以定义自己的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:33:32.323

使用 NumberFormat.getCurrencyInstance()。考虑一下：

```
int n = 2000000;

NumberFormat usa = NumberFormat.getCurrencyInstance(Locale.US);
NumberFormat uk = NumberFormat.getCurrencyInstance(Locale.UK);
NumberFormat germany = NumberFormat.getCurrencyInstance(Locale.GERMANY);

System.out.println(usa.format(n));
System.out.println(uk.format(n));
System.out.println(germany.format(n)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T23:36:40.697

```
/**
 * Format currency to $0.00 format
 * @param  {[string]} price
 * @return {[string]} Formated Price
 */
util.formatCurrency = function(price) {
    return '$' + String(price).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}; 
```

# mysql - 无法获取存储过程mysql的返回值

> ID：10061630
> 
> 赞同：0
> 
> 时间：2012-04-08T08:57:18.993
> 
> 标签：mysql, zend-framework, stored-procedures, out

我想使用 Zend 框架获取存储过程的 out 参数

这是程序

```
DELIMITER //

CREATE procedure getAllUsers( out sysUsers VarChar(50) )

BEGIN
DECLARE usersCursor CURSOR FOR SELECT username  FROM SYSTEM_USERS;
OPEN usersCursor ;
FETCH  usersCursor  INTO sysUsers ;
CLOSE usersCursor ; 

END//
DELIMITER ; 
```

这里是我通过 Zend 框架所做的

```
try {
        $db = Zend_Db_Table::getDefaultAdapter();
        $stmt = $db->query("CALL getAllUsers(@users)");

        //Returns an array containing all of the result set rows  
        $rows = $stmt->fetchAll();

        $stmt->closeCursor();
            print_r($rows);

    } catch (Exception $e) {
        echo 'error ' . $e;
    } 
```

一个空数组返回！！我怎样才能返回一个递归形式的存储过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:50:16.337

我在不使用我这样制作的光标的情况下解决了问题

```
 DELIMITER //

 CREATE procedure getAllUsers( )

 BEGIN
  SELECT username  FROM SYSTEM_USERS;

 END//
DELIMITER ; 
```

# android - 使用 Robotium 进行 Android 测试 - OpenGL 屏幕截图

> ID：10061637
> 
> 赞同：0
> 
> 时间：2012-04-08T08:58:12.230
> 
> 标签：android, opengl-es, robotium, android-testing

有没有办法用 OpenGL 元素截取屏幕截图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:50:34.883

这个网站对我来说就像一个魅力：http: [//blog.javia.org/android-opengl-es-screenshot/](http://blog.javia.org/android-opengl-es-screenshot/)

# java - 未显示 GWT 数据网格

> ID：10061638
> 
> 赞同：5
> 
> 时间：2012-04-08T08:58:14.967
> 
> 标签：java, gwt, datagrid

我正在尝试从 CellTable 切换到 DataGrid。实际的更改非常简单（API 完全相同） - 但如果不明确设置网格的宽度和高度，我无法让网格可见。在 CellTable 中，将宽度和高度设置为 100% 就足够了——这就是我想要的行为。

在我看来，HotrizontalPanel 中有两个部分：一个显示一些选项卡（按钮），另一个显示网格。每次单击选项卡时，都会清除网格区域并创建新网格。

视图如下所示：

```
<ui:style>
    .expanded {
        width: 100%;
        height: 100%;
    }

    .simpleContainer {
        border-top: 5px solid #484848;
        border-bottom: 5px solid #484848;
    }
</ui:style>

<c:SimpleContainer addStyleNames="{style.simpleContainer} SimpleContainer">
    <g:HorizontalPanel>
        <g:HorizontalPanel ui:field="headersContainer"/>
        <g:FlowPanel ui:field="tablePanel" styleName="{style.expanded}"/>
    </g:HorizontalPanel>
</c:SimpleContainer> 
```

这是来自正在运行的应用程序的 HTML 快照：

```
<div class="GKQJTVMDCNC-com-mycode-management-client-ui-panels-PropertiesPaneView_PropertiesPaneUiBinderImpl_GenCss_style-simpleContainer SimpleContainer" id="x-widget-21" style="width: 1730px; height: 126px; ">
<table cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td align="left" style="vertical-align: top; ">....</td>
            <td align="left" style="vertical-align: top; ">
                <div class="GKQJTVMDBNC-com-mycode-management-client-ui-panels-PropertiesPaneView_PropertiesPaneUiBinderImpl_GenCss_style-expanded">
                    <div style="position: relative; overflow-x: hidden; overflow-y: hidden; " __gwtcellbasedwidgetimpldispatchingfocus="true" __gwtcellbasedwidgetimpldispatchingblur="true">
                        ....
                    </div>
                </div>
            </td>
        </tr>
    </tbody>
</table> 
```

上部 div 具有正确的宽度和高度，但不知何故 DataGrid div 具有 1px 高度和 0px 宽度（根据 chrome 开发人员工具在列表中）

```
<div class="GKQJTVMDBNC-com-mycode-management-client-ui-panels-PropertiesPaneView_PropertiesPaneUiBinderImpl_GenCss_style-expanded"> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:46:25.220

是的，`CellTable`确实使用了 100% 的高度和宽度。
但是“DataGrid”没有。您需要设置明确的宽度/高度。
或者，您可以将您的“DataGrid”放在实现[ProvidesResize](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ProvidesResize.html)接口（即[SimpleLayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/SimpleLayoutPanel.html)）的“LayoutPanel”中。
使用 LayoutPanel 的好处是，当您调整浏览器窗口的大小时，Datagrid 会自动调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T11:12:38.973

将 DataGrid 放在 SimpleLayoutPanel 中（并将所有内容放在 RootLayoutPanel 上）确实有帮助，谢谢！

**但**它只适用于这种简单的情况——在我的布局中它无济于事。似乎因为表格在 Horizo​​ntalPanel 内，所以它不会得到合适的大小。使用适当的 CSS 将 Horizo​​ntalPanel 分成两个 div 以使它们水平，也无济于事。

最后，我设法通过显式设置 DataGrid 的宽度和高度来解决这个问题（从托管父小部件中获取值）。我不喜欢这个解决方案，但这是经过长时间的反复试验后我能想到的最好的解决方案。我找不到不以“静态”方式使用 DataGrid 的好例子：GWT 展示只呈现明显的情况 - 网格在呈现**之前**用数据初始化。这根本不是常见的情况……

# php - 白色背景调整图像大小

> ID：10061642
> 
> 赞同：0
> 
> 时间：2012-04-08T08:58:52.320
> 
> 标签：php, resize

我正在尝试修改此脚本： http: [//net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/](http://net.tutsplus.com/tutorials/php/image-resizing-made-easy-with-php/)

我想得到一个（使用裁剪选项时）白色背景而不是黑色，就像现在一样。我的情况是这样的：

当我调整图像大小时，我在底部（1px）得到一个我不想要的黑色边框。我希望这是白色的。

我查看了这个线程并尝试在脚本上实现它：[如何在调整图像大小时填充白色背景](https://stackoverflow.com/questions/4478223/how-do-i-fill-white-background-while-resize-image)

但这似乎不起作用。这是我调整大小类的代码：

```
public function resizeImage($newWidth, $newHeight, $option="auto")
        {
            // *** Get optimal width and height - based on $option
            $optionArray = $this->getDimensions($newWidth, $newHeight, $option);

            $optimalWidth  = $optionArray['optimalWidth'];
            $optimalHeight = $optionArray['optimalHeight'];

            // *** Resample - create image canvas of x, y size
            $this->imageResized = imagecreatetruecolor($optimalWidth, $optimalHeight);

            // MY EDIT STARTS HERE
            $backgroundColor = imagecolorallocate($this->imageResized, 255, 255, 255);
            imagefill($this->imageResized, 0, 0, $backgroundColor);
            // AND STOPS HERE

            imagecopyresampled($this->imageResized, $this->image, 0, 0, 0, 0, $optimalWidth, $optimalHeight, $this->width, $this->height);

            // *** if option is 'crop', then crop too
            if ($option == 'crop') {
                $this->crop($optimalWidth, $optimalHeight, $newWidth, $newHeight);
            }
        } 
```

我做错了什么，我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:02:32.733

Lil 很匆忙，所以无法编写确切的代码，但我也在尝试做像你这样的事情。下面是我的代码。我把评论放在它上面是为了方便你。它必须对您有所帮助，但请确认。

在这段代码中，我正在创建一个趋势图像（单个图像中的多个图像组），它具有带有多个图像的白色背景

简而言之，我将 png 图像作为白色背景。

```
<?php
session_start();
include_once("../dbfunction.php");

$tid=0;
if(isset($_REQUEST) && isset($_REQUEST['tid'])){
    $tid=$_REQUEST['tid'];
}else{
    echo "Trend id not defined";
}

//This return SQL result. Multiple rows with images name, x1, y1 as initial position and x2,y2 as width height
$data=getTrendImages($tid);

//This is path of background image. For me, background image is pure white png image (480x480)
$trendsbgurl= OS_PATH."image".DIRECTORY_SEPARATOR."trends_background.png";
//Get image in PHP
$trendsbg = @imagecreatefrompng($trendsbgurl);

//Loop to get images and put them on background
for($i=0;$i<count($data);$i++){
    $imgname=$data[$i]['image_name'];
    $imgleft=$data[$i]['position_x1'];
    $imgtop=$data[$i]['position_y1'];
    $imgwidth=$data[$i]['position_x2'];
    $imgheight=$data[$i]['position_y2'];

    //Path of source image
    $imgpath=OS_PATH."original".DIRECTORY_SEPARATOR.$imgname;
    //Explode image name to get file extension. I'd to support png, gif and jpeg images
    $file=explode(".",$imgname);
    $ext=$file[1];

    //If source file exist
    if(file_exists($imgpath)){
        //Create source image in PHP
        $image=null;
        if($ext=='jpg' || $ext=='jpeg'){
            $image = @imagecreatefromjpeg($imgpath);
        }else if($ext=='png'){
            $image = @imagecreatefrompng($imgpath);
        }else if($ext=='gif'){
            $image = @imagecreatefromgif($imgpath);
        }else{
            exit;
        }
        $colorTransparent = @imagecolorat($image, 0, 0);
        //GEt source image size
        $imgsize=getimagesize($imgpath);
        //Copy source on background
        imagecopyresampled($trendsbg, $image, $imgleft, $imgtop, 0, 0, $imgwidth,         $imgheight, $imgsize[0], $imgsize[1]);
    }else{
    }
}
//I need to save image on disk. You can do whatever you need to do with $trendsbg
imagejpeg($trendsbg,OS_PATH."trendimages".DIRECTORY_SEPARATOR."t_".$tid.".jpg",100); 
```

# java - 使用 Qualifier 和 InjectionPoint 作为 @HttpParam 在 CDI/WELD 中实现 @RequestParam

> ID：10061647
> 
> 赞同：4
> 
> 时间：2012-04-08T08:59:19.403
> 
> 标签：java, jsf, glassfish, facelets, cdi

玻璃鱼错误

```
INFO: Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/NNTPjsf'
INFO: WEB0671: Loading application [NNTPjsf] at [/NNTPjsf]
SEVERE: Exception while loading the app
INFO: only once...
INFO: NNTP.loadMessages...
SEVERE: Exception while loading the app : WELD-001408 Unsatisfied dependencies for type [FacesContext] with qualifiers [@Default] at injection point [[field] @Inject net.bounceme.dur.nntp.HttpParamProducer.facesContext]
org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [FacesContext] with qualifiers [@Default] at injection point [[field] @Inject net.bounceme.dur.nntp.HttpParamProducer.facesContext]
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:274)
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:243)
    at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:106)
    at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:126)
    at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:345)
    at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:330)
    at org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:366)
    at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:199)
    at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:128)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:313)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

HttpParam：

```
package net.bounceme.dur.nntp;

import static java.lang.annotation.ElementType.*;
import java.lang.annotation.Retention;
import static java.lang.annotation.RetentionPolicy.RUNTIME;
import java.lang.annotation.Target;
import javax.inject.Qualifier;

@Qualifier
@Retention(RUNTIME)
@Target({METHOD, FIELD, PARAMETER, TYPE})
public @interface HttpParam {
     public String value() default "";
} 
```

和

参数生产者：

```
package net.bounceme.dur.nntp;

import javax.enterprise.inject.Produces;
import javax.enterprise.inject.spi.InjectionPoint;
import javax.faces.context.FacesContext;
import javax.inject.Inject;

public class HttpParamProducer {

    @Inject
    FacesContext facesContext;

    @Produces
    @HttpParam
    String getHttpParameter(InjectionPoint ip) {
        String name = ip.getAnnotated().getAnnotation(HttpParam.class).value();
        if ("".equals(name)) {
            name = ip.getMember().getName();
        }
        return facesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get(name);
    }
} 
```

参考： [另一个问题](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)和[balusC](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)以及[glxn](http://www.glxn.net/?p=141) ，其中有一个我试图遵循的具体示例。glxn 帖子似乎正是我想要的，但我似乎无法部署它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T09:24:54.053

GlassFish 使用[WELD](http://seamframework.org/Weld)作为 JSR-299 的参考实现：Java EE 平台 (CDI) 的 Java 上下文和依赖注入。

因此，为了回答您的问题，这是在 GlassFish 上安装 CDI 的标准方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T10:21:26.430

错误是 CDI 引擎不知道如何生成`FacesContext`.

您需要添加一个片段来执行此操作 - 直接或作为生产者。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T20:45:22.577

让我重复一下我在您[之前的问题](https://stackoverflow.com/questions/10058852/inject-to-pass-params-to-a-cdi-named-bean-via-url-gives-jboss-error-on-netbean/10066003#10066003)中回答的内容：只需不要注入`FacesContext`，通过`FacesContext.getCurrentInstance()`. 或者只是将您已经找到的生产者方法放入新类中，比如说`FacesContextProducer`.

# java - 如何在 Java 中存储类似矩阵或表格的数据并有效地从中检索？

> ID：10061654
> 
> 赞同：1
> 
> 时间：2012-04-08T09:00:34.783
> 
> 标签：java, arrays, matrix

我必须存储大约 1000 万行和几列的大型数据表。我需要做的可以总结如下：

> 1.根据列中的值，我需要选择一些行。

例子：

第 500 行：|10|3|4|5|100|314|45|

第 501 行：|13|5|7|4|160|210|40|

第 501 行：|24|3|8|6|260|810|50|

第 602 行：|34|7|9|6|350|760|10|

在这里，第一列的值可以被认为是行 ID。这里的 ID 是 10,13,24,34

假设我正在搜索第 4 列中 value>=5 的那些行。因此，过滤后的输出将是：

第 500 行：|10| **3|4** |5|100|314|45|

第 501 行：|24| **3|8** |6|260|810|50|

第 602 行：|34| **7|9** |6|350|760|10|

> 2.在第二步中，我需要按列方式比较它们。假设第 500 行的第 2 列和第 3 列分别具有值 3 和 4，其中 (3-4) 也落在范围 (3-8) 内。但这个范围与（7-9）不重合

所以第 500 行和第 501 行之间存在关系。输出将是：

10 24

24 34

> 3.假设我的值是 10。然后我需要在第一列中找到 10 的行，并将第 7 列中的值减少 5。所以该行现在看起来像：

第 500 行：|10|3|4|5|100|314| **40** |

*到目前为止，我很容易使用 Matlab 库函数进行这些操作。但是我需要用 Java 转换整个代码。一种方法是使用大型数组并使用 for 循环来访问每一行。这么大的阵列会有效吗？请在这方面帮助我。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:17:30.270

首先，我建议使用内存中的 RDBS，如[SQLLite](http://www.sqlite.org/)、[HyperSQL](http://hsqldb.org/)、[JavaDB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)

之后，您可以查看Google 的 guava 库中的[Table](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)。

[使用HashBasedTable](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBasedTable.html)和[TreeBasedTable](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeBasedTable.html)时，基于行的查找速度最快，但您可能需要考虑[ArrayTable](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ArrayTable.html)，因为它看起来您的数据并不稀疏。

最后，看看[这个问题](https://stackoverflow.com/questions/4558855/java-in-memory-sql-table-like-data-structure)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:28:35.553

好吧，我将尝试定义您的需求，并根据它们给出适当的数据结构。1-您需要快速访问元素。基于此避免使用 LinkedList 并使用 ArrayList 或静态数组。2-由于您的数据很大，我建议您不要将它们全部加载到主内存中（动态加载）

注意：有更高级的方法可以通过使用 B+ 树来优化您的访问，但我不想更深入地尝试我上面所说的内容，我认为您不需要对其进行更多优化（如果您正确实现了动态加载并且有效）。

# reportviewer - 如何将数据源绑定到报表查看器表

> ID：10061659
> 
> 赞同：0
> 
> 时间：2012-04-08T09:01:16.060
> 
> 标签：reportviewer

如何将数据源绑定到报表查看器。我正在使用报告查看器，在运行时它显示错误？？可能是我错过了一些地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:22:08.967

将一个表拖到您的 rdlc 视图中，并将一个数据源分配给该表。希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:43:41.363

添加 user1295516 建议的内容，在 Report Data 视图窗口中，您将看到 DataSet 下可以在 Report 中使用的可用字段。您可以将每个字段拖放到表格中，并根据需要更改标题。这应该有效。

另外，你能指定你得到什么错误吗？

# javascript - 不同浏览器的不同 Jquery 值

> ID：10061661
> 
> 赞同：1
> 
> 时间：2012-04-08T09:01:26.500
> 
> 标签：javascript, jquery, css

我正在添加一个“粘性滚动”导航，我认为它被称为，它允许导航移动，直到它到达浏览器顶部并固定，即始终保持在用户的视线中。我已经设法让它在 chrome、firefox 和 IE 中运行。

然而，jquery 的一部分允许您更改它停止的上边距。

无论如何我可以为每个浏览器设置不同的上边距，例如，chrome我希望它是10px，而IE我希望它是5px，firefox出于某种原因将整个屏幕与Nav一起使用，所以它不需要更改。

这是它的Jquery

```
<script type="text/javascript">
    $(function(){ // document ready

      if (!!$('.sticky').offset()) { // make sure ".sticky" element exists

        var stickyTop = $('.sticky').offset().top; // returns number 

        $(window).scroll(function(){ // scroll event

          var windowTop = $(window).scrollTop(); // returns number 

          if (stickyTop < windowTop){
            $('.sticky').css({ position: 'fixed', top: 0 });
          }
          else {
            $('.sticky').css('position','static');
          }

        });

      }

    });
</script> 
```

你可以看到上边距部分 top: 0

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:33:37.207

如果你想走这条路，你可以使用 $.browser ( [http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/) ) 来测试用户正在使用哪个浏览器。这在大多数情况下都有效，但如果用户更改了浏览器的用户代理设置，它可能会崩溃。

然而，我建议你做的是找出这种行为存在的原因并出售潜在的问题。如果你无法修复它或者你已经没有时间了，你总是可以退回到像 $.browser 这样的黑客。:)

# html - IE8 鼠标悬停时锚文本阴影

> ID：10061663
> 
> 赞同：0
> 
> 时间：2012-04-08T09:01:41.260
> 
> 标签：html, css, internet-explorer, jsfiddle

我在 ASP.NET 中，但问题完全与 HTML 相关。我有以下代码：

```
<asp:Panel runat="server" CssClass="message-box">
    <asp:LinkButton ID="LogoutLinkButton" runat="server">Logout</asp:LinkButton>
</asp:Panel> 
```

等效的 HTML 是：

```
<div class="message-box">
    <a href="#">Logout</a>
</div> 
```

CSS类是：

```
a {
    text-decoration: none;
    color: inherit; 
}

.message-box {
    width: 1000px;
    margin: 0 auto;
    text-align: right;  
}

.message-box a:hover {
    text-decoration: underline; 
    text-shadow: 0.1em 0.1em 0.2em black;
} 
```

该演示可以在[jsFiddle](http://jsfiddle.net/XWpAx/)中找到。

这个锚文本的文本阴影在 IE8/IE9 中不起作用。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:06:15.037

text-shadow 是一个 css3 属性。所以你不能在 IE 中使用它。但是您可以使用 filter:shadow 来满足您的要求

# php - 在一个文档中多次使用 PHPExcel_Worksheet_Drawing 的实例

> ID：10061664
> 
> 赞同：1
> 
> 时间：2012-04-08T09:01:49.170
> 
> 标签：php, phpexcel

我需要在使用 phpexcel 创建的 Excel 文件中多次放置同一图像的 PHPExcel_Worksheet_Drawing 对象 - 换句话说，这意味着我想在一个 Excel 文件中多次放置同一张图像。当然，每次都可以为同一图像创建一个新的 PHPExcel_Worksheet_Drawing 对象，但文件大小也每次都会增长。那么是否可以通过引用或类似的方式放置这样的对象，以便文件大小保持在可接受的范围内？

# sql-server-2008 - 为过程中的输入参数键入日期时间

> ID：10061665
> 
> 赞同：17
> 
> 时间：2012-04-08T09:01:53.273
> 
> 标签：sql-server-2008, datetime, stored-procedures, input-parameters

我已经创建了一个具有这种结构的过程，但它不适用于`datetime`输入参数

我执行了这个查询但是

```
declare @a datetime
declare @b datetime 

set @a='2012/04/06 12:23:45'
set @b='2012/08/06 21:10:12'

exec LogProcedure 'AccountLog', N'test', @a, @b 
```

但是 SQL Server 让我遇到了这个错误

> 从字符串转换日期和/或时间时转换失败。

但是当我用这个查询进行测试时，它可以工作

```
 exec LogProcedure 'AccountLog',N'test' 
```

存储过程代码：

```
alter PROCEDURE LogProcedure
    @TableName VARCHAR(60),
    @SearchString NVARCHAR(50),
    @DateFirst DateTime = '',
    @DateLast DateTime = ''
AS
BEGIN
    SET NOCOUNT ON

    DECLARE @FinalSQL      NVARCHAR(MAX)

    SET @FINALSQL = 'SELECT * FROM [' + @TableName + '] where 1=2  '

    IF @DateFirst <> '' and @DateLast <> ''
       set @FinalSQL  = @FinalSQL + '  or convert (Date,DateLog) >=     '''+@DateFirst + ' and convert (Date,DateLog) <='''+@DateLast  

    SELECT 
       @FinalSQL  = @FinalSQL + ' or  [' + SYSCOLUMNS.NAME + '] LIKE N''%' + @SearchString + '%'' ' 
    FROM SYSCOLUMNS 
    WHERE OBJECT_NAME(id) = @TableName
    AND TYPE_NAME(SYSCOLUMNS.XTYPE) IN ('VARCHAR','NVARCHAR','CHAR','NCHAR','INT','DECIMAL')
    ORDER BY COLID

    EXEC(@FinalSQL)
END 
```

这个查询也是真的

```
SELECT * 
FROM AccountLog 
where 1=2  or convert (Date, DateLog) >= '2012/04/06' 
and convert (Date, DateLog) <='2012/08/06' 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-08T09:21:57.237

您应该使用 ISO-8601 格式来表示日期的字符串 - 其他任何内容都取决于 SQL Server 语言和日期格式设置。

`DATETIME`仅使用日期时 的 ISO-8601 格式是：（`YYYYMMDD`没有破折号或反字符！）

对于`DATETIME`带有时间部分的 a，它是`YYYY-MM-DDTHH:MM:SS`（带有破折号，`T`中间是 a 以分隔日期和时间部分）。

如果要将字符串转换`DATE`为 SQL Server 2008 或更高版本的字符串，可以使用`YYYY-MM-DD`（带有破折号）来获得相同的结果。不要问我为什么这会如此不一致和令人困惑——它就是这样，你现在必须处理它。

所以在你的情况下，你应该尝试：

```
declare @a datetime
declare @b datetime 

set @a = '2012-04-06T12:23:45'   -- 6th of April, 2012
set @b = '2012-08-06T21:10:12'   -- 6th of August, 2012

exec LogProcedure 'AccountLog', N'test', @a, @b 
```

此外 - 您的存储过程有问题，因为您将连接在一起`datetime`并将字符串连接成一个字符串，但您没有`datetime`先将其转换为字符串，而且您忘记了两个日期之后语句中的右引号。

因此，将此处的这一行更改为：

```
IF @DateFirst <> '' and @DateLast <> ''
   SET @FinalSQL  = @FinalSQL + '  OR CONVERT(Date, DateLog) >= ''' + 
                    CONVERT(VARCHAR(50), @DateFirst, 126) +   -- convert @DateFirst to string for concatenation!
                    ''' AND CONVERT(Date, DateLog) <=''' +  -- you need closing quotes after @DateFirst!
                    CONVERT(VARCHAR(50), @DateLast, 126) + ''''      -- convert @DateLast to string and also: closing tags after that missing! 
```

使用这些设置，一旦你修复了包含问题的存储过程，它就会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:28:10.343

在你的 SP 的这一部分：

```
IF @DateFirst <> '' and @DateLast <> ''
   set @FinalSQL  = @FinalSQL
       + '  or convert (Date,DateLog) >=     ''' + @DateFirst
       + ' and convert (Date,DateLog) <=''' + @DateLast 
```

您正在尝试连接字符串和日期时间。

由于该`datetime`类型的优先级高于`varchar`/ `nvarchar`，因此该`+`运算符在字符串和日期时间之间发生时，将被解释为加法，而不是连接，然后引擎会尝试将您的字符串部分（`' or convert (Date,DateLog) >= '''`和其他部分）转换为日期时间或数值. 并且失败了。

如果在调用过程时省略最后两个参数，则不会发生这种情况，因为条件评估为 false 并且不执行有问题的语句。

要修改这种情况，您需要将日期时间变量显式转换为字符串：

```
set @FinalSQL  = @FinalSQL
    + '  or convert (Date,DateLog) >=     ''' + **convert(date, @DateFirst)**
    + ' and convert (Date,DateLog) <=''' + **convert(date, @DateLast)** 
```

您还需要添加单引号：

```
set @FinalSQL  = @FinalSQL
    + '  or convert (Date,DateLog) >=     ''' + convert(date, @DateFirst) **+ ''''**
    + ' and convert (Date,DateLog) <=''' + convert(date, @DateLast) **+ ''''** 
```

# objective-c - 将 DTCoreText 与 xcode 项目集成

> ID：10061666
> 
> 赞同：1
> 
> 时间：2012-04-08T09:01:55.800
> 
> 标签：objective-c, ios, xcode, cocoa-touch, xcode4

我想从 html 转换为 NSAttributedString，我发现在这里使用 DTCoreText 解决了这个问题[https://github.com/Cocoanetics/DTCoreText](https://github.com/Cocoanetics/DTCoreText)

我按照说明进行操作，但仍然出现错误，有关如何将其与现有 xcode 项目集成的任何帮助

我的 xcode 版本是 4.3.2

项目上传到这里：[http ://www.mediafire.com/?0o281nv3d04s5sx](http://www.mediafire.com/?0o281nv3d04s5sx)

并提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:42:50.850

发现你的问题。您的目标缺少框架 ImageIO.framework。只需添加它（通过选择您的目标，“构建阶段”->“将二进制文件与库链接”->“+”按钮）。

# google-app-engine - Uploading a file to GAE with Play! Framework

> ID：10061669
> 
> 赞同：0
> 
> 时间：2012-04-08T09:02:51.930
> 
> 标签：google-app-engine, playframework, siena

What is the best way of uploading files to Google App Engine Blobstore with Play! Framework, using Siena and GAE module?

I have tried declaring a Blob field in my Model:

```
public Blob image; 
```

And a method to attach the file:

```
public void attachImage(byte[] bytes) {
    this.image = new Blob(bytes);
} 
```

I don't really know how to test this since the CrudSiena module doesn't display an upload field. Any help much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:33:31.747

Blob 是由 GAE 数据存储管理的类型，但它与 GAE Blobstore 不同！

如果您在模型中使用 byte[] 而不是 Blob，它是否适用于 CrudSiena？

# java - Error when I use HttpUrlConnection to download info from a specific url

> ID：10061670
> 
> 赞同：0
> 
> 时间：2012-04-08T09:02:54.397
> 
> 标签：java, android

I am writing an app on android 3.1, and I am using galaxy tab 10.1 to test my app.

I wrote a function called OpenHttpConnection() in order to get some information from a specific website. And the code snippets is:

```
private InputStream OpenHttpConnection(String urlString) throws IOException {
    InputStream in = null;
    int response = -1;

    URL url = new URL(urlString);
    String host = url.getHost();
    InetAddress address = InetAddress.getByName(host);
    String ip = address.getHostAddress();
    Toast.makeText(this, "ip address: " + ip.toString(), Toast.LENGTH_SHORT).show();

    try {
        HttpURLConnection httpConn = (HttpURLConnection)url.openConnection();
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setConnectTimeout(5 * 1000);
        httpConn.setRequestMethod("GET");
        Toast.makeText(this, "prepare for connecting", Toast.LENGTH_SHORT).show();
        httpConn.connect();
        Toast.makeText(this, "connecting established", Toast.LENGTH_SHORT).show();
        response = httpConn.getResponseCode();
        if (response == HttpURLConnection.HTTP_OK) {
            in = httpConn.getInputStream();
        }
    } catch (Exception ex) {
        throw new IOException("Error connecting");
    }
    return in;
} 
```

Error happens when the line "httpConn.connect()" is being executed. I googled this question and found many people got this problem, and they said it was a matter of DNS. Then I tried to get the ip address of this url, I failed, somethings was wrong. I have already add the permission to the AndroidManifest.xml like this:

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

Did I miss some permission?

I can use my tablet to access the internet successfully and the DNS of my tablet is as same as my pc, and they are in one LAN.

I am very confused, and can u help solve it?

;)thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:50:34.437

我最近一直在这样做，所以我可能会告诉你有两个可能的问题：

1.  您需要确保在后台线程上使用`Handler`或`AsyncTask`.

2.  如果必须在 UI 线程中执行此操作，则需要关闭[`Strict mode`](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.Builder.html).

查看这个[在 android 中运行后台线程的精彩教程，教程](http://www.vogella.de/articles/AndroidPerformance/article.html#concurrency)的 AyncTask 部分实际上下载了一个网页，因此非常相关。我最近尝试过它并且它有效。

# javascript - node.js 中的 process.exec()

> ID：10061678
> 
> 赞同：1
> 
> 时间：2012-04-08T09:04:02.617
> 
> 标签：javascript, node.js

这是我写的代码，当我执行代码时，终端没有输出任何东西，程序被阻塞了

```
var util=require('util')
var exec=require('child_process').exec;
exec('iostat 5',function(err,stdout,stderr){
    util.puts("hello")
    util.puts(stdout)
}) 
```

如果我像这样更改 exec 命令：它可以工作并输出文件列表

```
var util=require('util')
var exec=require('child_process').exec;
exec('ls -al',function(err,stdout,stderr){
    util.puts("hello")
    util.puts(stdout)
}) 
```

块命令（iostat）和非块命令（ls）之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:15:01.003

`iostat 5`每 5 秒永远循环一次并且永远不会终止，因此您的 exec 回调将永远不会被调用。相反，您可以`iostat`从通话中拨打电话，或者如果您只需要一次`setInterval`就删除它。`5`

# php - Most Efficient Way to Handle MySQL Data Set

> ID：10061682
> 
> 赞同：1
> 
> 时间：2012-04-08T09:04:35.630
> 
> 标签：php, mysql, database, data-structures, kohana

Imagine the following tables.

```
Person
    - id
    - name

Place
    - id
    - name

Coverage
    - id
    - from_person_id
    - to_person_id
    - new
    - old
    - start_date
    - end_date
    - closed

CoveragePlaces
    - id
    - coverage_id
    - place_id 
```

The rules of the application state that a "person that is covering" for another "person" will have one record in the coverage table. The coverage table contains the "from_person_id" which is a reference to the person "covering". "to_person_id" representing another "person" who is "receiving coverage". A "person" can cover for another person from a "start_date" to an "end_date" for "old" or "new" or "all" jobs and at specific "places". No single "person" can have coverage for identical places, dates, and job status (all, old or new).

As of right now, our data is stored very similar to the above. When selecting to find people currently providing coverage for another person. We would do something like this.

```
SELECT
    coverage.to_user_id AS user_id
FROM
    coverage
INNER JOIN
    coverage_places
        ON ( coverage.id = coverage_places.coverage_id AND coverage_places.place_id = 10 )
WHERE
    coverage.from_user_id = 150 AND
    coverage.new = 1 
```

Although the rules of the application state that no person can have 2 records of identical coverage. The current state of the application allows for the record to be inserted, but it overrides the existing one once outputted.

We want to change this functionality and display to the user what coverage will be replaced by their existing coverage. Since their new coverage could potentially override multiple rows.

For example, if `Person A` is providing coverage for `Person B` at place1, place2, and place3 for new jobs this entire month.

`Person A` is also providing coverage for `Person C` at place1, and place2 for all (new/old) jobs the entire month.

Then `Person C` decides that `Person D` is covering for them for the entire month at place1, and place2 in place of `Person A` only for old patients.

Now the application needs to detect that `Person A` will still be covering for `Person C`, but only for old patients at place, and place2.

The records for the coverage explained above (before the record for persond is entered) is below.

```
coverage_places
    coverage_id place_id
    1 1
    1 2
    1 3
    2 1
    2 2
coverage
    id from_user_id to_user_id
    1 1 2 
    2 1 3
places
    id name
    1 place1
    2 place2
    3 place3
person
    id name
    1 persona
    2 personb
    3 personc
    4 persond 
```

Now the application needs to display the record that it is going to replace. If the user verifies that they want to override this coverage then the application needs to modify or delete the old coverage and insert the new coverage.

Also consider if `Person A` decided they wanted `Person E` to cover for them at place1 for old jobs for the next week.

We currently have a model very similar to the above working where a lot of logic is done on the programming end to find what coverage overlaps and display not just the record that overlaps but the pieces of that record that overlap. The code has become very complex. I have decided to step back and take a look at things to see if there may be a more simple / efficient approach.

Also bear in mind that in the future the application hopes to support dynamic fields for coverage. So i can create a new field "job pay" and have another person cover for certain pay amounts.

Any ideas or suggestions would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:45:26.170

由于提供的实际封面似乎是针对地点和工作类型的组合，因此我会考虑重新设计您的模型以反映这一点。我会建议这样的事情

```
Person
  - id
  - name

Place
  - id
  - name

Coverage
  - id
  - from_person_id
  - to_person_id
  - coverage_type
  - place_id
  - start_date
  - end_date
  - closed 
```

然后，您将拥有每种类型/地点组合的唯一记录，并且将一个掩护替换为另一个掩护会容易得多。

这确实意味着您的应用程序可能需要做一些工作来将这些分组以用于显示目的（即，一个人正在为所有地方的所有工作覆盖另一个人）但这比在需要时尝试分解当前数据要容易得多代替一些掩护。

# c# - C# code to XAML

> ID：10061691
> 
> 赞同：0
> 
> 时间：2012-04-08T09:05:40.630
> 
> 标签：c#, xaml, data-binding

I have this code in my program:

```
dataGridTextColumn2.Binding = new Binding(
   (comboBox1.SelectedValue as ComboBoxItem).Content.ToString()); 
```

I want to convert this code to XAML like this:

```
<DataGridTextColumn Header="Header" 
    Binding="{Binding ElementName=comboBox1, Path=SelectedValue.Content, Mode=OneWay}"
    x:Name="dataGridTextColumn2" /> 
```

But this XAML code is doesn't work. Could you tell me where I am wrong?

# asp.net - 从 SQL Server 表复制或克隆行

> ID：10061700
> 
> 赞同：0
> 
> 时间：2012-04-08T09:08:02.047
> 
> 标签：asp.net, sql-server, linq-to-sql, asp.net-mvc-2

这是我修改后的代码，看起来一切正常，但我收到一个错误`_db.SubmitChanges();`

错误是

> 无法使用已在使用的密钥添加实体。

代码：

```
foreach (tblCourseNeededHours record in thisTable)
{
            tblCourseNeededHours newCNHR = new tblCourseNeededHours();
            newCNHR.Semester = a_semesterToOrganize;
            newCNHR.AssignToInstituteAdministrator = false;
            newCNHR.Freezed = false;

            _db.tblCourseNeededHours.InsertOnSubmit(newCNHR);
}

// submit all the changes
_db.SubmitChanges(); 
```

我正在使用 MVC 2.0 和 SQL Server。我有一张桌子叫`tblCourses`.

我想根据一些选择条件选择行，然后我想将这些行附加到`tblCourse`.

我是否需要创建一个临时表`tmpCourse`并填写这些选定的行，然后将它们附加回`tblCourse`？或者我可以在没有临时表的情况下这样做吗？

有什么建议，发个链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:14:43.917

我相信您可以执行以下操作：

```
INSERT INTO dbo.tblCourse(list of columns)
    SELECT (list of columns)
    FROM dbo.tblCourse
    WHERE (your condition here.....) 
```

当然，列列表必须匹配，例如，您必须具有相同数量的列和相同的数据类型。此外，您不能将值插入到例如`IDENTITY`列或计算列中。

**更新：**要在 Linq-to-SQL 中执行此操作，您必须拥有一个可以以某种方式表示您的数据的实体。然后：

*   从您现有的数据库中选择数据到一个`List<Entity>`（或任何您的实体真正被称为）
*   根据检索到的对象创建新对象（实体） - 根据需要更改您的属性
*   将这些实体重新插入数据上下文
*   保存更改。

类似于此代码片段的内容（这里我有一个表`countries`，其中包含一些国家的 an`ISOCode`和 a `CountryName`；我选择了一些，并根据检索到的内容创建新的，将这些新的添加到 Linq-to-SQL`DataContext`并最终保存）：

```
// create and use the Linq-to-SQL DataContext
using (LinqSampleDataContext ctx = new LinqSampleDataContext())
{
    // select some data
    IQueryable<country> existingCountries = ctx.countries.Where(c => c.CountryID < 100);

    // loop over selected data - create new entities based on data retrieved
    foreach (country c in existingCountries)
    {
        country newCountry = new country();
        newCountry.CountryName = c.CountryName;
        newCountry.ISOCode = "X" + c.ISOCode.Substring(1);

        // add new entities to DataContext
        ctx.countries.InsertOnSubmit(newCountry);
    }

    // submit all the changes
    ctx.SubmitChanges();
} 
```

# sql-server - 如何使用 datediff 获取每月第一天的天数

> ID：10061708
> 
> 赞同：0
> 
> 时间：2012-04-08T09:09:31.083
> 
> 标签：sql-server

我正在尝试获取从当前年份当前月份的第一天到当前日期的天数。那么，这个脚本有什么问题？和正确的？

```
select DATEDIFF(day,CONVERT(varchar,1+'/'+ MONTH(GETDATE())+'/' + YEAR(GETDATE()),102),GETDATE()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:35:37.057

从每月 1 日算起的天数不总是等于`DAY(YourDate)`或可能吗`DAY(YourDate) - 1`？？？

在 3 月 22 日，这个数字是...... 22（或 21 - 取决于你如何计算） - 不？？？

那么这个怎么样：

```
SELECT
    DaysFromFirstOfMonth = DAY(GETDATE()) - 1 
```

这就是你要找的吗？？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T09:36:26.090

我建议您使用[`DAY`](http://msdn.microsoft.com/en-us/library/ms176052.aspx)（正如@marc_s 在评论中所说）或[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)，来返回一个整数，该整数表示您正在使用的日期的“月份中的某天”部分。

例如：

```
SELECT DAY(GETDATE()),DATEPART(day,GETDATE()) 
```

将（今天，2012 年 4 月 8 日）返回：

```
8,8 
```

然后，您可以从那里执行任何必要的调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:24:26.053

你的风格价值似乎是错误的。102 用于 ansi-dates (yy.mm.dd) - 如果您想使用英国/法国日期 (dd/mm/yy)，您必须使用值 103：

```
select DATEDIFF(day,CONVERT(varchar,1+'/'+ MONTH(GETDATE())+'/' + YEAR(GETDATE()),103),GETDATE()); 
```

见[http://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

# sql - help for sorting by order and displaying order

> ID：10061710
> 
> 赞同：0
> 
> 时间：2012-04-08T09:09:48.647
> 
> 标签：sql, sqlite

following is the bash script I wrote for Sqlite.

```
 #!/bin/bash
 sqlite3 file.db "CREATE TABLE table1(name text,rolln integer PRIMARY KEY,examm integer CHECK(examm >=0 and examm <= 50));"
 sqlite3 file.db "insert into table1(name,rolln,examm)values('Aldose Paul ',1234,'alpj@gmail.com',49); "
 sqlite3 file.db "insert into table1(name,rolln,examm)values('Thomas Paul',1023,'tpaul@gmail.com',45); "

 sqlite3 file.db "CREATE TABLE project(title text PRIMARY KEY,marks integer CHECK(marks >= 0 and marks <= 20)) ;"
 sqlite3 file.db "insert into project(title,marks)values('A',16);"
 sqlite3 file.db "insert into project(title,marks)values('B',14);"

 sqlite3  file.db "select rolln AS 'Roll Number' ,(examm) AS 'Total Marks'from table1 order by (examms ) ;" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:51:01.520

As a starter, here is one way to get the rank depending on the grade:

```
.headers on

create table foo (name text, grade int);

insert into foo values ('Joe', 45);
insert into foo values ('Anna', 98);
insert into foo values ('Julie', 78);

select name, 
       grade, 
       (select count(*) from foo t1 where t1.grade>=t2.grade) as rank  
from foo t2;

select name, 
       grade, 
       (select count(*) from foo t1 where t1.grade>=t2.grade) as rank  
from foo t2
order by rank; 
```

Having saved this as foo.sql, I get this:

```
[someone@somewhere tmp]$ sqlite3 < foo.sql 
name|grade|rank
Joe|45|3
Anna|98|1
Julie|78|2
name|grade|rank
Anna|98|1
Julie|78|2
Joe|45|3 
```

# css - 修复div右侧的div高度

> ID：10061711
> 
> 赞同：0
> 
> 时间：2012-04-08T09:10:00.923
> 
> 标签：css, html, css-float

我有任何 div 用于显示项目的详细信息（主类）。现在我需要 2 列。右左 。我需要用`30px width`and `height 100%`& 'auto' and修复正确的 div `fix in right`。左列`height:auto`和`overflow:hidden`。

网页：

```
<div class="main">
<div class="right">
</div>
<div class="left">
.... Descripton .....
</div>
<div> 
```

CSS：

```
.main {width:300px; height:auto; overflow:hidden;margin:0 auto;}
.right{width:30px; float:right; height:auto; background-color:#e1e1e1; }
.left{width:270px; float:right; height:auto;} 
```

在线演示我的问题：在[这里](http://jsfiddle.net/VbMey/1/)我没有看到带有背景颜色的右 div：#e1e1e1;

我需要这个：[这里](http://i.stack.imgur.com/unhic.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:14:43.457

您应该使用绝对位置（位置：绝对）。

float:right/left 是一种滥用

```
<div style="position:relative;width:300px; height:200px;margin:0 auto; background-color:#00ff00;">
 <div style="position:absolute; right:0; top:0;background-color:#ff0000;color:#000;">  Your right content
  </div>
  &nbsp;
  <div style="position:absolute; left:0; top:0;background-color:#0000ff;color:#000;">
    Left content
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:32:54.800

所以我相信你想制作两列并排，右列有浅灰色背景。

它们的高度都应该是 100%。为了使东西 100% 高，我们还需要将`html`and`body`标记设置为 100%。

我相信[这个 jsfiddle 可以满足](http://jsfiddle.net/sg3s/VbMey/30/)您的要求。请原谅我稍微改变一下背景颜色，我将左列设置为`overflow: auto`进行测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-08T10:19:23.043

这是一个例子：http: [//jsfiddle.net/fbUQB/](http://jsfiddle.net/fbUQB/)。这就是你所要求的，不是吗？

# opengl-es - 谁为三角形内的点计算 gl_FragColor ？

> ID：10061719
> 
> 赞同：0
> 
> 时间：2012-04-08T09:12:52.213
> 
> 标签：opengl-es, opengl-es-2.0, fragment-shader

如果我们要使用顶点着色器和片段着色器生成雾，一种常见的方法是在顶点着色器中计算顶点的距离，并在片段着色器中应用雾混合颜色。

我的问题是，由于我们只计算了三角形顶点的距离，OpenGL 是如何决定三角形内点的颜色的？如果它是自动计算的，有没有办法控制计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:53:06.890

在 OpenGL ES 2 中，从顶点着色器传递到片段着色器的所有属性的值都是线性插值的，透视正确，在被着色的三角形表面上。

在其他一些 OpenGL 版本中，您可以更改此行为。

因此，例如对于雾，只要您的雾公式是世界空间上的线性函数，您就可以将来自顶点着色器的插值雾值混合到片段着色器中的 gl_FragColor 中，它应该看起来正确。

但是，如果您的雾不是线性的，要获得正确的结果，您需要在片段着色器中单独计算每个片段的雾值。

# java - 如何创建跨网络运行的 P2P 游戏？

> ID：10061721
> 
> 赞同：0
> 
> 时间：2012-04-08T09:13:25.240
> 
> 标签：java, ip, ip-address, p2p

我目前正在开发一款基于 Java 的游戏，可以在没有服务器的情况下进行 P2P 游戏。到目前为止，我已经能够让它工作，一个人输入另一个人的 IP，我通过电话得到

```
InetAddress.getLocalHost().getHostAddress()); 
```

但是，这仅适用于同一网络上的两台计算机。如何获得跨网络工作的 IP？谢谢你的帮助！

编辑：这是一个1v1的游戏，所以多个连接不是问题。我打算让用户通过Skype或其他方式发送IP……这只是我想和我的朋友一起使用的东西。前任。它显示 IP，您将其发送给您的朋友，他使用它连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:29:14.083

甚至洪流 P2P 网络也使用服务器来确定对等方的 IP 地址。获得 IP 地址后，连接当然是在对等方之间。所以我建议至少有一个 Web 服务来列出对等方的 IP 地址。（或者您可以将类似 listActivePeers.php/aspx/etc 的文件放到您的网站上，每 5 分钟 ping 一次，然后列出已 ping 过的 IP 地址。）

而且我还想指出，每个对等节点都需要打开与另一个节点的连接，除非你有几个玩家，否则这不是那么有效。如果您有 100 个在线玩家，您最终将为每个对等点建立 100 个连接，有时某些接入点或调制解调器不支持这种活动连接！他们可能会卡住或减速。

此外，您将需要处理大量的并发问题。认为两个数据同时到达两个对等点。在采取任何行动之前，同行需要互相检查“我是否可以采取行动？或者你们中的任何人采取任何行动我应该知道吗？”。因此，在每次移动之前，您将通过向它们发送一些信息来锁定其他对等点，并且它们中的每个人都会在移动之前执行此操作。

**更新**（来自我上面的评论）
检查此链接以获取您的 IP 地址。[https://stackoverflow.com/a/2939223/1216609](https://stackoverflow.com/a/2939223/1216609)另外，谷歌搜索“调制解调器端口打开或转发 [您的接入点/调制解调器的品牌/型号]”查询以转发特定于您的调制解调器或路由器的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:20:26.177

这个问题是关于找到你想要的IP：[How to get the computer of the computer on linux through Java?](https://stackoverflow.com/questions/901755/how-to-get-the-ip-of-the-computer-on-linux-through-java)

您还需要使用某种端口转发来连接到不同网络上的计算机。

# ios - 将新的 CGPoint 值与 Array 中的 CGPoint 值进行比较

> ID：10061722
> 
> 赞同：1
> 
> 时间：2012-04-08T09:13:36.803
> 
> 标签：ios, ipad, nsarray, cgpoint, fast-enumeration

我正在生成许多具有随机位置的圆圈。我要防止的是圆圈相互重叠。所以我想将新生成的 CGPoint 值与数组中的值进行比较，如果该值位于其中一个 CGPoint 的半径区域中，则让它生成一个新值。

除了重叠的东西，我得到了大部分。我已经从我尝试过的东西中评论了这部分，但这并没有真正起作用（有缺陷的逻辑）。我不确定如何遍历 CGPoint 的各个值并进行比较。

**更新：** 我对代码进行了一些更改，并添加了一个检查以查看 CGPoint 是否会重叠。问题是每当我想尝试类似的东西时

```
while (!xPointOk || !yPointOk) {

// generate new values

} 
```

我不断陷入无限循环。

```
- (void) positionCircles 
{

    //generate random Y value within a range
    int fromNumberY = 500;
    int toNumberY = 950;
    int randomNumberY =(arc4random()%(toNumberY-fromNumberY+1))+fromNumberY;

    //generate random Y value within a range
    int fromNumberX = 0;
    int toNumberX = 700;
    int randomNumberX = (arc4random()%(toNumberX-fromNumberX+1))+fromNumberX;

    //array to hold all the the CGPoints
    positionsArray = [[NSMutableArray alloc] init];
    CGPoint circlePositionValue;

    CGFloat radius = 70;

    CGRect position = CGRectMake(randomNumberX,randomNumberY, radius, radius);

    [self makeColors];

    // create a circle for each color in color array
    for (int i = 0; i < [colors count];i++)
    {
        // generate new position before placing new cirlce
        randomNumberX = (arc4random()%(toNumberX-fromNumberX+1))+fromNumberX;
        randomNumberY = (arc4random()%(toNumberY-fromNumberY+1))+fromNumberY;

        circlePositionValue = CGPointMake(position.origin.x, position.origin.y);

        for (NSValue *value in positionsArray) {

            BOOL xPointOk = (randomNumberX < value.CGPointValue.x - radius) || 
                             (randomNumberX > value.CGPointValue.x + radius);

            BOOL yPointOk = (randomNumberY < value.CGPointValue.y - radius) || 
                             (randomNumberY > value.CGPointValue.y + radius);

            NSLog(@"xPoint: %i - %f", randomNumberX , value.CGPointValue.x);
            NSLog(@"xPoint ok? %@", xPointOk?@"yes":@"no");

            NSLog(@"yPoint: %i - %f", randomNumberY , value.CGPointValue.y);
            NSLog(@"yPoint ok? %@", yPointOk?@"yes":@"no");
            NSLog(@"___");

        }

        position.origin.x = randomNumberX;
        position.origin.y = randomNumberY;
        [positionsArray addObject:[NSValue valueWithCGPoint:circlePositionValue]];

        Circle *myCircle = [[Circle alloc] initWithFrame:position radius:radius color:[colors objectAtIndex:i]];
        myCircle.label.text = [NSString stringWithFormat:@"%i", i];
        [self.view addSubview:myCircle];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:42:40.590

当新点与任何现有点的距离小于圆周时，您的测试应该会失败，因此您可以使用基本三角函数来解决它。

```
BOOL far_enough_away = NO;
CGPoint newpoint = CGZeroPoint;
while(!far_enough_away)
{
    newpoint = randomisation_thingy();
    far_enough_away = YES;
    for(NSValue *existing in positionsArray)
    {
        CGPoint pointb = [existing pointValue];
        CGFloat deltay = pointb.y-newpoint.y;
        CGFloat deltax = pointb.x-newpoint.x;
        CGFloat distance = sqrt(pow(deltax,2) + pow(deltay,2));
        //fail if closer than desired radius
        if(distance < circumference )
        {
           //sadness - try again
           far_enough_away = NO;
           break;
        }
    }
}
create_a_new_circle_at_point(newpoint); 
```

您需要考虑的其他事项是重试多少次才能停止无限次重试。

# javascript - 如何更改新窗口的标题？

> ID：10061729
> 
> 赞同：0
> 
> 时间：2012-04-08T09:15:12.777
> 
> 标签：javascript, youtube, mp3, bookmarklet

我正在破解 Google 书签小书签，使其适合新用途。最终目标是在第三方网站的帮助下将歌曲从 youtube 直接转换为 mp3。一切准备就绪，非常棒。xD xD

但是，当我想同时转换 4 或 5 首歌曲时，小书签会不断在同一窗口中打开每个转换。我需要打开多个窗口并让它们保持打开状态。

所以，我的问题是：

每次点击它时，如何让这个 javascript 打开一个“新”（！）窗口？

```
javascript:(function(){var a=window,b=document,c=encodeURIComponent,d=a.open("http://audio-conversion.online-convert.com/?external_url="+c(b.location),"name= My Window1","bkmk_popup","left="+((a.screenX||a.screenLeft)+10)+",top="+((a.screenY||a.screenTop)+10)+",height=420px,width=550px,resizable=1,alwaysRaised=1");a.setTimeout(function(){d.focus()},300)})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:27:36.503

您可以轻松地将随机数附加到窗口标题:)

我修改了你的代码来做到这一点：

```
javascript:(function(){var a=window,b=document,c=encodeURIComponent,d=a.open("http://audio-conversion.online-convert.com/?external_url="+c(b.location),"name= My Window1"+Math.random(),"bkmk_popup","left="+((a.screenX||a.screenLeft)+10)+",top="+((a.screenY||a.screenTop)+10)+",height=420px,width=550px,resizable=1,alwaysRaised=1");a.setTimeout(function(){d.focus()},300)})(); 
```

# magento - 按类别对 Magento 产品集合进行排序

> ID：10061731
> 
> 赞同：0
> 
> 时间：2012-04-08T09:15:38.953
> 
> 标签：magento

我有一个这样的类别结构：

```
Root Cat
  Sub Cat 1
  Sub Cat 2
  Sub Cat 3 
```

和产品系列：

```
$productCollection = Mage::getResourceModel('catalog/product_collection'); 
```

现在我想按类别对集合中的产品进行排序。Sub Cat 1 产品应该首先出现，然后是 Sub Cat 2 产品，最后是 Sub Cat 3 产品。如果我更改类别的顺序，集合中产品的顺序也应该改变。我怎样才能做到这一点？一个简单的`$productCollection->addAttributeToSort('category');`还是`$productCollection->setOrder('category')`不行。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:23:48.877

我认为您无法通过简单地修改集合来实现您想要的所有功能。`category`不是属性。`category_ids`是，但是当我尝试对其进行排序时，它没有任何效果。

我会获取类别（按照您想要的顺序），然​​后使用该`addCategoryFilter()`功能从这些类别中获取产品。

例子：

```
$categories = Mage::getModel('catalog/category')->getCollection();
foreach ($categories as $category) {
    echo $category->getId() . ':' . PHP_EOL;
    $products = Mage::getModel('catalog/product')->getCollection()
        ->addCategoryFilter($category);
    foreach ($products as $product) {
        // Do something
        echo '  ' . $product->getSku() . PHP_EOL;
    }
} 
```

# iphone - 知道在代码中触摸了哪个动画对象

> ID：10061738
> 
> 赞同：0
> 
> 时间：2012-04-08T09:16:45.617
> 
> 标签：iphone, objective-c

我实现了一个代码来在视图中的许多动画对象之间触摸和拖动一个对象，它可以工作，现在我需要知道我在视图中触摸了哪个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:29:46.453

每个视图都有一个`NSInteger`标签属性，它可以在类似 Interface Builder 的 UI 中设置，也可以在如下代码中设置：

```
UIView *view = [[UIView alloc] init];
view.tag = 20121221; 
```

您可以通过以下方式获取与标签关联的视图

```
[parentView viewWithTag:20121221]; 
```

# bash - bash - 意外标记“<”附近的语法错误

> ID：10061749
> 
> 赞同：1
> 
> 时间：2012-04-08T09:18:27.597
> 
> 标签：bash

我有一个这样的脚本：

```
dyski=$(df -h)

while read wiersz; do

i=0;
for token in $wiersz
do

    case $i in
        0)
            tresc="$tresc\nSystem plików: $token";
        ;;

        1)
            tresc="$tresc\nRozmiar całkowity: $token";
        ;;

        2)
            tresc="$tresc\nUżyte miejsce : $token";
        ;;

        3)
            tresc="$tresc\nDostępne miejsce: $token";
        ;;

        4)
            tresc="$tresc\nProcentowe użycie: $token";
        ;;
    esac

    i=$((i+1))
done

tresc="$tresc\n"

done < <(echo "$dyski") 
```

当我在我的 Mandriva 上运行它时，它运行良好。但是当我将它移到 SLES11 时，它给出了一个错误：

> ./diskcheck.sh：第 42 行：未`<' ./diskcheck.sh: line 42:`完成的令牌附近出现语法错误 <<(echo "$dyski")'

它出什么问题了？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:26:49.713

我怀疑你错误地假设它`/bin/sh`无处不`bash`在。许多 Linux 发行版使用更简单的 shell（通常`dash`，有时`ksh`）作为`/bin/sh`; 如果你想使用`bash`特定的扩展，比如`<(pipeline)`语法，你应该明确地使用`bash`作为 shell。

# php - Javascript 弹出错误

> ID：10061751
> 
> 赞同：0
> 
> 时间：2012-04-08T09:19:01.877
> 
> 标签：php, javascript, html, ajax, chat

我有这个聊天系统的一些问题。它不断给我这些错误，这是不应该的。

**它一直给我一个弹出窗口说“Gopher”，这很烦人**

我查看了代码，但找不到任何错误。有人知道有什么不对吗？

```
<script type="text/javascript">

    var maxUsers = 50;  // maximum is 50;
    var updateResponse = "";
    var stampResponse = "";
    var resetResponse = "";
    var stampRef = "";
    var pollInterval = "";
    var nUsers = [];
    var nUserColor = ["#ff00ff","#ff6347","#1e90ff","#9932cc","#daa520","#a52a2a","#C0C0C0","#FFFF99","#CC6633","#FF9900"];

    function parseUpdateResponse(){

        var msgHistory = updateResponse;
        var tmpUsers = msgHistory.match(/\~([^\~]+)\@/g);
        if (tmpUsers != null)
            {
             tmpUsers = tmpUsers.join("").replace(/[\~\s]/g,"").split("@");
             tmpUsers.length = tmpUsers.length-1;
             nUsers = [];
             var obj = new Object();
             for (i=0; idx=tmpUsers[i]; i++)
                {
                 obj[idx] = 1;
                }
             for (idx in obj)
                {
                 nUsers.push(idx);
                }
            }
        msgHistory = msgHistory.replace(/\#/g,"<br>").split("|");
        for (i=0; i<nUsers.length; i++)
            {
             for (n=0; n<msgHistory.length; n++)
                {
                 if(msgHistory[n].match(nUsers[i]) != null)
                    {
                     msgHistory[n] = msgHistory[n].replace(/\~([^\~]+)\~/,"<strong><font color="+nUserColor[i]+">$1: <\/font><\/strong>");
                    }
                }
            }
        msgHistory = msgHistory.join(""); 
        var nChatBox = document.getElementById('msgDisp');
        nChatBox.innerHTML =  msgHistory;
        if (document.forms[0]['user'].value == "")
            {
             document.forms[0]['user'].focus();
            }
        else    {
             document.forms[0]['message'].focus();
            }
        if (nChatBox.scrollHeight > 0)
            {
             nChatBox.scrollTop = nChatBox.scrollHeight;
            }
    }

    function updateChat(){

        var updateRequest = window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();   
        updateRequest.onreadystatechange = function()
            {
             if (updateRequest.readyState == 4)
                {
                 if (updateRequest.status == 200)
                    {
                     updateResponse = updateRequest.responseText;
                     parseUpdateResponse();
                    }
                 else   {
                     alert('Error updateChat.php File '+ updateRequest.statusText);
                    }
                }
            }
        var forceGET = "?n="+ parseInt(Math.random()*999999999);
        updateRequest.open("GET", "ChatFiles/updateChat.php"+forceGET, true);
        updateRequest.send(null); 
        pollInterval = setInterval("pollStamp()",7500);
    }

    function parseStampResponse(){

        var currStamp = stampResponse;
        if (currStamp != stampRef)
            {
             stampRef = currStamp;
             clearInterval(pollInterval);
             updateChat();
            }
    }

    function pollStamp(){

        var stampRequest = window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();   
        stampRequest.onreadystatechange = function()
            {
             if (stampRequest.readyState == 4)
                {
                 if (stampRequest.status == 200)
                    {
                     stampResponse = stampRequest.responseText;
                     parseStampResponse();
                    }
                 else   {
                     alert('gopher '+ stampRequest.statusText);
                    }
                }
            }
        var forceGET = "?n="+ parseInt(Math.random()*999999999);
        stampRequest.open("GET", "ChatFiles/pollStamp.php"+forceGET, true);
        stampRequest.send(null); 
    }

    function sendMessage(){

        var sendRequest = window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();   
        sendRequest.onreadystatechange = function()
            {
             if (sendRequest.readyState == 4)
                {
                 if (sendRequest.status == 200)
                    {
                     pollStamp();
                    }
                 else   {
                     alert('Error newMessage.php File '+ sendRequest.statusText);
                    }
                }
            }
        var forceGET = "?n="+ parseInt(Math.random()*999999999);
        var infoStr = forceGET +"&user="+document.forms[0]['user'].value;
        infoStr += "&message="+document.forms[0]['message'].value;
        document.forms[0]['message'].value = "";
        sendRequest.open("GET", "ChatFiles/newMessage.php"+infoStr, true);
        sendRequest.send(null); 
    }

    function checkSubmit(evt){

        var msgBox = document.forms[0]['message'];
        msgBox.value = msgBox.value.replace(/[\r\n\~|#@]/g,"");
        var key = (window.Event) ? evt.which : evt.keyCode;
        if (key == 13)
            {
             if (msgBox.value == "" || document.forms[0]['user'].value == "")
                {
                 return false;
                }
             if (nUsers.length == 0)
                {
                 sendMessage();
                 return false;
                }
             else   {
                 for (i=0; i<nUsers.length; i++)
                    {
                     if (document.forms[0]['user'].value == nUsers[i])
                        {
                         sendMessage();
                         return false; 
                        }
                    }
                }
             if (nUsers.length < maxUsers)
                {
                 sendMessage();
                 return false;
                }
             else   {
                 alert('No more than '+maxUsers + ' Users at a time');
                }
            }
    }

    function parseResetResponse(){

        document.getElementById('pWord').value = resetResponse;
        if (resetResponse == "Okay")
            {
             nUsers.length = 0;
             document.forms[0]['user'].value = "";
             document.forms[0]['message'].value = "";
            }
    }

    function resetChat(){

        var resetRequest = window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();   
        resetRequest.onreadystatechange = function()
            {
             if (resetRequest.readyState == 4)
                {
                 if (resetRequest.status == 200)
                    {
                     resetResponse = resetRequest.responseText;
                     parseResetResponse();
                    }
                 else   {
                     alert('Error resetChat.php File '+ resetRequest.statusText);
                    }
                }
            }
        var forceGET = "?n="+ parseInt(Math.random()*999999999);
        var infoStr = forceGET + "&admin="+document.getElementById('pWord').value;
        resetRequest.open("GET", "ChatFiles/resetChat.php"+infoStr, true);
        resetRequest.send(null); 
    }

    onload=updateChat;

</script>
</head>
    <body>
        <div id='msgDisp' class='chatBox'></div>
        <br>
        <form action="">
        <hr size=1>
        <center>Press enter on your keyboard to submit your message</center>
        <hr size=1>
        <input type="hidden" name="user" value="<? echo("$_SESSION[usr_name]");?>" />       
        <br />
        <textarea name='message' rows='4' cols='92' style='overflow:auto' onkeyup="checkSubmit(event)"></textarea>
            </fieldset>
        </form>
        <br>
    </body>
</html> 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:51:16.103

您的函数`pollStamp`将 AJAX 请求发送到`ChatFiles/pollStamp.php`. 这会返回一个错误（可能是 404，找不到页面），这会导致这个位：

```
stampRequest.onreadystatechange = function()
{
    if (stampRequest.readyState == 4)
    {
        if (stampRequest.status == 200)
        {
            stampResponse = stampRequest.responseText;
            parseStampResponse();
        }
        else   {
            alert('gopher '+ stampRequest.statusText);
        }
    }
} 
```

进入“else”分支并提醒“gopher”。`pollStamp`函数设置为页面加载后7.5秒执行`updateChat`，也就是页面的onload。删除 'alert' 行（第 105 行）*将*停止消息，但它不能解决对“pollStamp.php”脚本的请求不起作用的问题。

检查是否`pollStamp.php`在给定路径中：它需要位于 ChatFiles 文件夹中，该文件夹需要与脚本本身位于同一文件夹中。如果没有，请在此处调整路径或将文件移动到它所属的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:45:49.883

尝试删除第 105 行：

```
 alert('gopher '+ stampRequest.statusText); 
```

希望这可以帮助！

# python - 哪些类不能被子类化？

> ID：10061752
> 
> 赞同：80
> 
> 时间：2012-04-08T09:19:02.920
> 
> 标签：python, class, inheritance, python-3.x, language-design

是否有关于哪些内置和标准库类不可子类化（“最终”）的规则？

从 Python 3.3 开始，以下是一些示例：

*   `bool`
*   `function`
*   `operator.itemgetter`
*   `slice`

我发现一个[问题](https://stackoverflow.com/questions/2825364/final-classes-in-python-3-x-something-guido-isnt-telling-me)涉及在 C 和纯 Python 中实现“最终”类。

我想了解什么原因可以解释为什么一个类首先被选为“最终”。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-11T21:39:15.567

一个类在 Python 中成为“final”似乎有两个原因。

*1.违反类不变量*

遵循单例模式的类具有一个不变量，即实例数量有限（预先确定）。在子类中任何违反此不变量的行为都将与该类的意图不一致，并且无法正常工作。例子：

*   `bool`: `True`, `False`; 见[圭多的评论](https://stackoverflow.com/a/2172204/336527)
*   `NoneType`：`None`
*   `NotImplementedType`：`NotImplemented`
*   `ellipsis`：`Ellipsis`

此类别中可能存在除单例模式以外的情况，但我不知道有任何情况。

*2\. 没有说服力的用例*

在 C 中实现的类需要额外的工作以允许子类化（至少在 CPython 中）。在没有令人信服的用例的情况下做这样的工作并不是很有吸引力，所以志愿者不太可能挺身而出。例子：

*   `function`; 见[蒂姆彼得斯的帖子](http://grokbase.com/t/python/python-list/033r5nks47/type-function-does-not-subtype#20030324rcnwbkfedhzbaf3vmiuer3z4xq)

注1：

`function`我最初认为有有效的用例，但对和的子类化兴趣不足`operator.itemgetter`。感谢@agf 指出[此处](http://grokbase.com/t/python/python-list/033r5nks47/type-function-does-not-subtype#20030324zd54avealbfyrkqlu5ke3yril4)和[此处](http://code.activestate.com/lists/python-ideas/14590/)提供的用例并不令人信服（请参阅@agf 对问题的评论）。

笔记2：

我担心的是另一个 Python 实现可能会意外地允许子类化 CPython 中的最终类。这可能会导致代码不可移植（一个用例可能很弱，但`function`如果他们的 Python 支持它，有人可能仍会编写子类的代码）。这可以通过在 Python 文档中标记所有不能被子类化的内置和标准库类来解决，并要求所有实现在这方面都遵循 CPython 行为。

注3：

在上述所有情况下，CPython 产生的消息是：

```
TypeError: type 'bool' is not an acceptable base type 
```

正如关于这个主题的许多问题所显示的那样，它非常神秘。我将提交一个建议，在解释最终类的文档中添加一段，甚至可能将错误消息更改为：

```
TypeError: type 'bool' is final (non-extensible) 
```

# android - 如何始终在按钮（视图）上方显示 PopupWindow？

> ID：10061757
> 
> 赞同：9
> 
> 时间：2012-04-08T09:20:39.843
> 
> 标签：android, popupwindow

设计要求是，有一个listview，在listview的items中，有一个按钮，按下按钮，然后，总是在按钮上方显示一个弹出窗口，而不是底部。

在 Android 中，使用“showAsDropDown”，弹出窗口默认显示在按钮底部（视图或锚点）。但是如果底部没有显示，弹出窗口将显示在按钮（视图或锚点）的顶部。

```
onTop = (displayFrame.bottom - mScreenLocation[1] - anchor.getHeight() - yoff) <(mScreenLocation[1] - yoff - displayFrame.top); 
```

所以，我根据这一点，通过“setSelectionFromTop”来移动按钮的item，让判断没有足够的显示在按钮的底部来达到效果。</p>

在android 4.0.3中，是ok的，item移动了，弹窗显示新的位置和上面，但是，在android 2.2中，弹窗仍然显示按下的位置，而不是移动后的位置。</p>

```
boolean onTop = (displayFrame.bottom - mScreenLocation[1] - v.getHeight() - 0) < (mScreenLocation[1] - 0 - displayFrame.top);
if(!onTop){
mListMain.setSelectionFromTop(mListMain.getPositionForView(v),(displayFrame.bottom - v.getHeight() + displayFrame.top) / 2 );
} 
```

可以帮帮我，怎么解决？！..T_T

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T15:25:42.783

可能情况不同，但我的解决方案是：

```
public class BaloonView extends PopupWindow {   
    public BaloonView(Context context, View content) {
        super(context);
        setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
        setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
        setTouchable(true);
        setFocusable(true);
        setOutsideTouchable(true);  
        setTouchInterceptor(new View.OnTouchListener() {
              @Override
              public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
                    BaloonView.this.dismiss();                
                  return true;
                }               
                return false;
              }
            });
    }

    public void showUnderView(View view, View content) {
        setBackgroundDrawable(view.getContext().getResources().getDrawable(R.drawable.popup_inline_error_holo_dark));
        FrameLayout container = new FrameLayout(view.getContext());
        container.addView(content);
        setContentView(container);
        int[] location = new int[2];
        view.getLocationOnScreen(location);
        container.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
        int xoffset = view.getWidth() / 2 - container.getMeasuredWidth() / 2;
        showAsDropDown(view, xoffset, 0);
    }
} 
```

# linux - 零拷贝机制和 libpcap

> ID：10061759
> 
> 赞同：3
> 
> 时间：2012-04-08T09:20:55.353
> 
> 标签：linux, network-programming, libpcap, packet-capture

是否可以使用零拷贝数据包机制在 Linux 上使用 libpcap 读取数据包？（我使用的是 CentOS 6.2）如果是，我可以看到任何代码示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:09:18.890

是的，libpcap 1.0 及以后的版本就可以了，虽然以后的 libpcap 版本已经修复了一些 bug，所以使用的 libpcap 版本越晚，效果越好。写入标准 libpcap API 的代码将在具有 libpcap 1.0 及更高版本的 Linux 上使用零拷贝捕获。

（Netsniff-ng 有自己的代码来捕获数据包，而不是使用 libpcap。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:43:04.970

是的，显然[netsniff-ng](http://netsniff-ng.org/)做到了。我建议查看它的代码。

# perl - 如何在 Perl 中使用 Net::Ping 将“CTRL+C/SIGINT”发送到远程主机？

> ID：10061762
> 
> 赞同：1
> 
> 时间：2012-04-08T09:21:30.620
> 
> 标签：perl, ping

如何在 Perl 中使用 Net::Ping 将“CTRL+C/SIGINT”发送到远程主机？我正在寻找一些功能，例如：`Net::Ping->execute("CTRL+C"); or Net::Ping->echo("\x03");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:37:51.127

[Net::Ping](http://search.cpan.org/~smpeters/Net-Ping-2.36/lib/Net/Ping.pm)文档告诉你：

> 该模块包含测试网络上远程主机可达性的方法。一个 ping 对象首先使用可选参数创建，可以多次 ping 可变数量的主机，然后关闭连接。

您不能向主机发送任何相关数据。

即使你可以：“另一边”的哪个进程应该执行那个“CTRL+C”的东西？您希望我的浏览器对此做出反应吗？还是其他一些随机过程？

通过反应我的意思是：将其作为纯文本输入阅读。但我认为您的意图是用“信号”终止某些进程。信号不能通过网络协议发送，它们只能在一台计算机内生成和分发。您必须发明自己的协议来弥合差距。

对不起，但到目前为止你的问题是徒劳的。

# ruby-on-rails - 乘客显示文件夹索引，而不是使用 Rails 渲染站点

> ID：10061765
> 
> 赞同：3
> 
> 时间：2012-04-08T09:21:52.060
> 
> 标签：ruby-on-rails, apache, apache2, passenger

类似于这个问题：[Apache/Rails/Passenger Displaying Site Index?](https://stackoverflow.com/questions/154959/apache-rails-passenger-displaying-site-index)

唯一的区别是我的应用程序指向公共目录。

运行`ps aux | grep rails`显示有一个 rails 实例正在运行，但它没有呈现我的应用程序

这是我的 apache2.conf： http: [//pastebin.com/twipcruz](http://pastebin.com/twipcruz)

一个可能的问题是PassengerRoot 和PassengerRuby 指向不同的版本，但是这个块只是从`passenger-install-apache2-module`输出中复制和粘贴的

```
#Passenger Setup
LoadModule passenger_module /home/john/.rvm/gems/ruby-1.9.2-p318/gems/passenger-3.0.11/ext/apache2/mod_passenger.so
   PassengerRoot /home/john/.rvm/gems/ruby-1.9.2-p318/gems/passenger-3.0.11
   PassengerRuby /usr/bin/ruby1.8 
```

从日志中得到这个：

```
10:13:24 2012] [error] *** Passenger could not be initialized because of this error: The Passenger spawn server script, '/home/john/.rvm/gems/ruby-1.9.2-p318/gems/passenger-3.0.11/lib/phusion_passenger/passenger-spawn-server', does not exist. Please check whether the 'PassengerRoot' option is specified correctly. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:32:24.297

您需要使用 rvmsudo 安装乘客，您刚刚运行了乘客安装。

# django - 当 urlconf 不为空时，Django 抛出 NoReverseMatch 错误？

> ID：10061767
> 
> 赞同：0
> 
> 时间：2012-04-08T09:21:58.830
> 
> 标签：django, django-urls

在我的主要 urlconf 中，我包含了一个应用程序的 urlconf：

```
url(r"^items/$", include("items.urls")), 
```

在`items/urls.py`我有：

```
urlpatterns = patterns("",
    url(r"^profile/", ProfileView.as_view(), name="accounts_profile"),
    url(r"^$", DashboardView.as_view(), name="items_home"),
) 
```

问题是，无论我在 urlconf 中输入什么——除了`r"^$"`——我`NoReverseMatch`都会在通过 eg 调用这些 urlconfs 之一的模板中遇到错误`{% url accounts_profile %}`。我尝试过来自不同应用程序的不同视图、不同的 urlconf 名称等，但没有运气。有任何想法吗？

我正在使用 Django 1.3.1，FWIW。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:28:32.717

没关系，我明白了——问题出`$`在上面 import 语句中的符号上，它表示该行的结束。感觉好傻。：-/

# php - 如何获取数组中的随机元素以及如何从mysql中获取随机行？

> ID：10061771
> 
> 赞同：3
> 
> 时间：2012-04-08T09:22:32.260
> 
> 标签：php, mysql, arrays, random

我被要求获取与用户在他的项目中的相关内容

就创建数据库而言，此项目表存储类别名称，因此，我想获取类别名称并将其保存到数组中

然后执行一个 for 循环并从中获取一个随机值

然后从mysql数据库中获取一个随机行，所以任何人都知道如何做到这一点

换句话说，我想知道如何从数组中获取随机值，从 mysql 中获取随机行

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:27:14.347

利用

```
 $rand_keys = array_rand($input, 1); 
```

有关 php 和 mysql，请参见示例[http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

```
 SELECT * FROM tbl_name ORDER BY RAND() LIMIT 1 
```

用这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T09:28:50.830

要从 PHP 中的数组中获取随机元素，您可以使用[array_rand](http://uk.php.net/manual/en/function.array-rand.php)。

要从 MySQL 查询中获取随机行，您可以使用[RAND()](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_rand)，例如

```
ORDER BY RAND() LIMIT 1 
```

但请注意，MySQL 中的这种方法可能会对性能产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:35:18.590

引用[http://php.net/manual/de/function.rand.php](http://php.net/manual/de/function.rand.php)：

> ilya dot iz 在 i dot ua 27-Jul-2011 08:09 我不得不想出一种快速的方法来从表中获取随机行，并想出了以下内容： ...

应该很容易从具有类似 rand(0,count(arrayvar)) 的数组中获取随机值

# javascript - Javascript 警报窗口 - 如何设置 len

> ID：10061780
> 
> 赞同：0
> 
> 时间：2012-04-08T09:24:33.130
> 
> 标签：javascript, window, alert

我有一个 HostGator 提供的基本 HTML/JavaScript 联系表。它工作得很好……如果用户没有提交姓名或无效的电子邮件地址，则会弹出一个 JavaScript 警报，说明是这样。这些警报会一直显示在屏幕上，直到用户单击“确定”。但是，如果用户正确提交了联系表单，最终的成功警报只会持续 1/2 秒左右。我试图弄清楚如何使最终的电子邮件成功警报持续指定的时间，或者直到用户单击“确定”按钮，此时他们被重定向到指定的页面。这是带有 JavaScript 的联系表上 HostGator 信息的链接[http://www.hostgator.com/formmail.shtml](http://www.hostgator.com/formmail.shtml)这是我试图更改的代码，以使提交后的 JavaScript 消息保持不变，而不是在用户甚至有机会阅读它之前消失。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>FormMail Demo</title>
<script type="text/javascript">
function hgsubmit()
{
if (/\S+/.test(document.hgmailer.name.value) == false) alert ("Please provide your name.");
else if (/^\S+@[a-z0-9_.-]+\.[a-z]{2,6}$/i.test(document.hgmailer.email.value) == false) alert ("A valid email address is required.");
 else if (/\S+/.test(document.hgmailer.comment.value) == false) alert ("Your email content is needed.");
  else {
       document.hgmailer.submit();
       alert ('Thank you!\nYour email is sent.');
       }
}
</script>
</head>
<body>
<form action="http://www.mydomain.com/cgi-sys/formmail.pl" method="post" name="hgmailer">
<input type="hidden" name="recipient" value="myemail@mydomain.com">
<input type="hidden" name="subject" value="FormMail E-Mail">
Whatever you want to say here<br><br>
Visitor Name: <input type="text" name="name" size="30" value=""><br>
Visitor E-Mail: <input type="text" name="email" size="30" value=""><br>
E-Mail Content: <textarea name="comment" cols="50" rows="5"></textarea><br><br>
<input type="button" value="E-Mail Me!" onclick="hgsubmit();">
<input type="hidden" name="redirect" value="http://www.mydomain.com/redirect-path">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:45:28.053

`document.hgmailer.submit();`这里的问题似乎仍在进行中时显示弹出窗口。由于提交延迟，您会在`submit()`完成前几分之一秒看到弹出窗口，然后您将被重定向到目标页面。

一种方法是放在``alert(....)``before ``....submit()``，或者您可以使用 jQuery 异步发布您的数据，例如：

```
 $.post("target_Page_Address", 
            { var1: value1, var2: value2 // and so on }, 
            function(response){  // Do something based on response }
          ); 
```

编辑：

或者您可以避免整个弹出业务并执行以下操作：

```
 document.hgmailer.submit_button_name.value= 'Please wait...';
    document.hgmailer.submit(); 
```

也就是基本上可以将``value``Submit按钮的设置为``"Please wait..."``from``"Email Me!"``

这样，用户就会知道他们的电子邮件仍在处理中，并且在完成之前他们不会更改页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:47:24.963

```
 else {
     alert('Thank you!\nYour email is sent.');
     setTimeout("document.hgmailer.submit()", 4*1000);
   } 
```

这应该执行 alert()，等待 4 秒（或您在第二个参数中指定的任何内容），然后执行 submit()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:53:09.777

您可以轻松地停止表单提交，直到用户单击最后一个警报的“确定”按钮。采用

```
alert ('Thank you!\nYour email is sent.');
//waits here  until user click 'ok', then submit!
document.hgmailer.submit(); 
```

反而，

```
document.hgmailer.submit();
alert ('Thank you!\nYour email is sent.'); 
```

# vhdl - 需要一些帮助伪随机数生成器

> ID：10061783
> 
> 赞同：0
> 
> 时间：2012-04-08T09:25:17.833
> 
> 标签：vhdl

我有一个带有计数器的伪随机数生成器的问题，以检查我是否正在处理不可约多项式。生成器工作正常，但如果我尝试将其用作子模块，则计数器不会。任何想法 ？？

```
-- x^6 + x^5 + x^3 + x^2 + 1

Library IEEE;
use ieee.numeric_std.all;

use IEEE.STD_LOGIC_1164.ALL;

use ieee.std_logic_unsigned.all;

entity EPZG is
   port (CLK:       in std_logic;                      
         EQ:        out bit_vector(5 downto 0);  
             A :        out bit );
 end EPZG;

 architecture behaviour of EPZG is 
 component Counter is port ( CLK, RESET : in std_logic;
   result: out bit_vector(5 downto 0)); 
 end component;

signal SZ: bit; 
signal SEQ : bit_vector(5 downto 0); 
signal CNT_RESET : std_logic; 
signal CNT_RESULT : bit_vector(5 downto 0);
begin 
  SZ <= '1';
  PZG : process(CLK)
  begin
  CNT_RESET <= '1';

    if (CLK'event and CLK ='1') then
       SEQ(0) <= SZ xor SEQ(5);
       SEQ(1) <= SEQ(0);
       SEQ(2) <= SEQ(1) xor SEQ(5);
       SEQ(3) <= SEQ(2) xor SEQ(5);
       SEQ(4) <= SEQ(3);
       SEQ(5) <= SEQ(4) xor SEQ(5);
    end if;
end process PZG;
EQ <= SEQ;
CNT: Counter port map ( CLK , RESET =>CNT_RESET,result =>CNT_RESULT);
end behaviour; 
```

计数器代码

1.  图书馆 IEEE；使用 IEEE.STD_LOGIC_1164.ALL；使用 ieee.std_logic_unsigned.all；

    ```
    entity Counter is port 
    (CLK, RESET : in std_logic;
      result: out bit_vector(5 downto 0));
    end Counter;

    architecture BEHAVIOUR of Counter is
      signal pre_counter: std_logic_vector(5 downto 0);
      begin 
      REG : process(CLK, RESET)
      begin
      if(CLK'event and CLK = '1') then 
         if (RESET = '0') then
             pre_counter <= (others =>'0');
         else
      pre_counter <= pre_counter +1 ;
        end if;
      end if; 
    end process;
    result <= To_bitvector (pre_counter);
    end BEHAVIOUR; 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:36:45.450

那好吧，再试一次。您的计数器模块永远不会被重置，因此`pre_counter`永远不会被初始化 - 这至少会给您在模拟中未定义的结果。在您的顶级代码中为其生成重置，或将其初始化为：

```
signal pre_counter: std_logic_vector(5 downto 0) := (others => '0'); 
```

此外，您的计数器模块中的流程代码可以使用一些调整。进程敏感度列表同时包含`clk`和`reset`，但您的进程使用同步重置。您应该使用同步重置并且仅`clk`在敏感度列表中使您的流程：

```
process(clk)
begin
  if(rising_edge(clk)) then
    if(reset = '1') then
    (...) 
```

或使用异步重置，`clk`并`reset`在敏感度列表中：

```
process(clk, reset)
begin
  if(reset = '1') then
    (...)
  elsif(rising_edge(clk)) then
    (...) 
```

还要注意`rising_edge()`函数的使用，这是检查边缘的“现代”方式。

# java - Java - 记住/保存输入字段的程序

> ID：10061796
> 
> 赞同：1
> 
> 时间：2012-04-08T09:28:18.223
> 
> 标签：java, swing, save, jtextfield

我有一个使用三个`JTextField`字段作为主要数据输入字段的程序。我想拥有它，以便当用户终止程序然后再次打开它时，他们的最后一个条目仍将在字段中。

我怎么能做到这一点？我需要某种数据库还是有更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T09:49:10.613

> 我需要某种数据库吗..

不，AD/B 对于“3 个字符串”来说太过分了。

> ..或者有更简单的方法吗？

不止一个。

1.  [对象序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)。
2.  [`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)带有 3 行文本的 A。
3.  [XML编码](http://docs.oracle.com/javase/7/docs/api/java/beans/XMLEncoder.html)器/[解码器](http://docs.oracle.com/javase/7/docs/api/java/beans/XMLDecoder.html)。
4.  一个[`Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)文件。
5.  [`Preferences`](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)API 。
6.  一个应用程序。[使用JWS](https://stackoverflow.com/tags/java-web-start/info)部署可以使用[PersistenceService](http://pscode.org/jws/api.html#ps)。

这就是我能想到的全部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T09:40:15.800

我还建议查看[Java Preferences](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)系统，因为它可以处理每个用户或整个系统的保存信息。

举个例子：

```
void writeMethod() {
    Preferences prefs = Preferences.userNodeForPackage(this);
    prefs.put("key", "value");
}

void readMethodInSameClass() {
    Preferences prefs = Preferences.userNodeForPackage(this);
    prefs.get("key");
} 
```

[这个描述](http://java.sun.com/developer/technicalArticles/releases/preferences/)可能比 API 参考更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T10:36:24.127

实现这一点的最简单方法是在文本字段中添加一个侦听器并使用 java 首选项 api：

```
textField = new JTextField();
    // set document listener
    textField.getDocument().addDocumentListener(new MyListener());
    // get the preferences associated with your application
    Preferences prefs = Preferences.userRoot().node("unique_string_representing_your_preferences");
    // load previous value
    textField.setText(prefs.get("your_preference_unique_key", ""));

class MyListener implements DocumentListener {

    @Override
    public void changedUpdate(DocumentEvent event) {
        final Document document = event.getDocument();
        // get the preferences associated with your application
        Preferences prefs = Preferences.userRoot().node("unique_string_representing_your_preferences");
        try {
            // save textfield value in the preferences object
            prefs.put("your_preference_unique_key", document.getText(0, document.getLength()));
        } catch (BadLocationException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void insertUpdate(DocumentEvent arg0) {
    }

    @Override
    public void removeUpdate(DocumentEvent arg0) {
    }
} 
```

but in this way every time you change value in the text field it is saved. If you want to save it only when application is closed, you can add a WindowListener to your application and write in its

> windowClosing

method the content of the previous changedUpdate.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T09:31:04.597

有一些选项，您可能希望将数据保存到配置文件并在程序开始时加载它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T09:31:20.757

您可以将它们序列化并将它们存储在一个文件中：[http ://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

# ruby-on-rails - 如何使用 Fabrication 和 RSpec 制造和测试 has_and_belongs_to_many (HABTM) 关联？

> ID：10061797
> 
> 赞同：3
> 
> 时间：2012-04-08T09:28:24.197
> 
> 标签：ruby-on-rails, rspec, capybara, fabrication-gem

我有 2 个 HABTM 模型：

```
class Article < ActiveRecord::Base
  attr_accessible :title, :content
  belongs_to :author, :class_name => 'User', :foreign_key => 'author_id'
  has_and_belongs_to_many :categories

  validates :title, :presence => true
  validates :content, :presence => true
  validates :author_id, :presence => true

  default_scope :order => 'articles.created_at DESC'
end

class Category < ActiveRecord::Base
  attr_accessible :description, :name
  has_and_belongs_to_many :articles

  validates :name, :presence => true
end 
```

`Article`属于作者（用户）

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :name

  has_many :articles, :foreign_key => 'author_id', :dependent => :destroy
end 
```

连同他们各自的制造商：

```
Fabricator(:user) do
  email { sequence(:email) { |i| "user#{i}@example.com" } }
  name { sequence(:name) { |i| "Example User-#{i}" } }
  password 'foobar'
end

Fabricator(:article) do
  title 'This is a title'
  content 'This is the content'
  author { Fabricate(:user) }
  categories { Fabricate.sequence(:category) }
end

Fabricator(:category) do
  name "Best Category"
  description "This is the best category evar! Nevar forget."
  articles { Fabricate.sequence(:article) }
end 
```

我正在尝试编写一个测试来检查 RSpec 中 Category#show 中是否存在 Article 对象

```
before do
  @category = Fabricate(:category)
  visit category_path(@category)
end

# it { should have_link(@category.articles.find(1).title :href => article_path(@category.articles.find(1))) }
@category.articles.each do |article|
  it { should have_link(article.title, :href => article_path(article)) }
end 
```

注释和未注释的测试都会产生这个错误：

> nil:NilClass (NoMethodError) 的未定义方法“查找”未定义
> 
> nil 的方法“文章”：NilClass (NoMethodError)

我应该怎么做才能访问我制造的 Category 对象中的第一个 Article 对象，反之亦然？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T17:38:57.197

任何时候你调用`Fabricate.sequence`它都会返回一个整数，除非你传递一个块给它。您需要生成实际的相关对象。您应该像这样生成您的关联：

```
Fabricator(:article) do
  title 'This is a title'
  content 'This is the content'
  author { Fabricate(:user) }
  categories(count: 1)
end

Fabricator(:category) do
  name "Best Category"
  description "This is the best category evar! Nevar forget."
  articles(count: 1)
end 
```

# iphone - 我收到以下警告“架构 i386”

> ID：10061805
> 
> 赞同：1
> 
> 时间：2012-04-08T09:29:09.140
> 
> 标签：iphone, objective-c, fmdb, mbprogresshud

我从我的 xCode 项目中收到以下警告。我该如何摆脱它们？

注意：我使用`MBProgessHud`和`FMDB`

```
 Warning: no rule to process file '$(PROJECT_DIR)/MBProgressHUD.h' of type sourcecode.c.h for architecture i386

    Warning: no rule to process file '$(PROJECT_DIR)/SampleProj/../FMDatabase.h' of type sourcecode.c.h for architecture i386 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T09:33:57.033

请检查编译源部分中的“构建阶段”选项卡，*.h 文件不应该存在。

# android - 为未知添加默认值

> ID：10061807
> 
> 赞同：1
> 
> 时间：2012-04-08T09:29:19.940
> 
> 标签：android, sql, sqlite

我有一个用户列表和一个疫苗列表，我想跟踪用户拥有哪些疫苗，所以我也有一个疫苗用户表。我想在视图中显示复选框列表、疫苗名称以及用户是否接种了该特定疫苗。

我目前正在使用 ListActivity，我知道它会回收视图，因此我需要将数据放在光标中，这给我带来了一些麻烦，因为我只想跟踪谁接种了哪种疫苗，而不是全部用户没有的疫苗。

所以我想要这样的东西：

```
userId     vaccineId     hasVaccine
1          2             0
1          2             1 
```

我有表 user、vaccine、vaccine_user 并且我可以查询用户拥有哪种疫苗，但是 hasVaccine=0 行给我带来了麻烦，因为我不存储用户没有哪种疫苗。

编辑：我认为左外连接在正确的轨道上，我试过这个：

```
SELECT v.name, u._id as userId, vu._id as vaccineId FROM user u LEFT OUTER JOIN vacc_user vu ON u._id = vu.userId LEFT OUTER JOIN vaccine v ON v._id = vu.vaccineId WHERE u._id = 4; 
```

我认为它应该导致这个

```
name        userId     vaccineId
Ebola       4          2
Hepatit A   4          null 
```

如果用户接种了埃博拉疫苗但没有接种甲肝疫苗，但我只是得到埃博拉病毒行。

编辑2：这是为sqllite3创建的当前形式的相关表，但希望也适用于MySql。

```
CREATE TABLE user (_id integer primary key autoincrement, name text not null default 'unnamed');
CREATE TABLE vacc_user(_id integer primary key autoincrement, userId integer not null default 0, vaccineId integer not null default 0);
CREATE TABLE vaccine (_id integer primary key autoincrement, name text default 'unnamed vacc', text text default 'no desc'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:43:07.320

简单：仅当用户接种疫苗时才将记录插入到疫苗用户中（并且您可以省略最后一列）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:44:58.043

如果我正确理解您的要求，这似乎是一个使用`left outer join`查询的简单案例。左外连接将连接与空行不匹配的行（所有值都将为空）。因此，您可以进行如下查询：

```
SELECT * FROM user u LEFT OUTER JOIN vaccine_user vu ON u.id = vu.user_id LEFT OUTER JOIN vaccine v ON v.id = vu.vaccine_id WHERE v.id=null; 
```

您可能可以与疫苗表进行其他联接，以获取用户未接种过的所有疫苗（如果有疫苗）。

注意：查询不准确，因为我需要表格和东西来写准确的东西，但我认为你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T15:06:44.330

您的第二个问题（在编辑之后）是因为就 SQL 而言，比较中带有 null 的任何内容都是错误的。

你有两个选择：

1）更改您的查询以使用 OR 来覆盖空意外事件（v._id IS NULL），这样您将拥有：

```
SELECT v.name, u._id as userId, vu._id as vaccineId FROM user u LEFT OUTER JOIN vacc_user vu ON u._id = vu.userId LEFT OUTER JOIN vaccine v ON ((v._id = vu.vaccineId) OR (v._id IS NULL)) WHERE u._id = 4; 
```

2) 将条目添加到您的表中，用于那些未收到的疫苗接种，并在 SQL 表定义本身或通过程序代码使用默认条目（可能“nv”表示“未接种疫苗”），然后您应该获得您想要的结果询问。

# java - 与 SOAP 和 Restfull 有什么区别和关系

> ID：10061809
> 
> 赞同：1
> 
> 时间：2012-04-08T09:29:25.627
> 
> 标签：java, rest, rpc

Bwtween SOAP 和 Restfull 有什么区别？更何况，SOAP 属于哪个主题应用程序或程序？差异的关键指标是什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:40:43.160

SOAP 是一种用于实现基于 XML 和 HTTP 的客户端/服务器系统的特殊技术。

RESTful 是一组用于实现基于 Web 的服务的设计规则/指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:57:55.637

资源是真正的 RESTful 设计的关键元素，而不是分别用于 RPC 和 SOAP Web 服务中的“方法”或“服务”。

# ruby-on-rails-3.1 - Rails 3.1 资产无法解析

> ID：10061810
> 
> 赞同：8
> 
> 时间：2012-04-08T09:29:46.553
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

**问题**

[我有一个 Rails 3.0.4 应用程序，我按照Railscast 视频](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)中的说明升级到 3.1.4 ：“升级到 rails 3.1” 。

现在我遇到了**资产**问题，因为它们**没有解决**，在服务器日志中给出如下消息：

```
Started GET "/assets/application.css" for 127.0.0.1 at 2012-04-08 03:57:13 -0500
Served asset /application.css - 404 Not Found (15ms)

ActionController::RoutingError (No route matches [GET] "/assets/application.css"):
Rendered /usr/local/rvm/gems/ruby-1.9.2-p318/gems/actionpack-3.1.4/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (14.3ms)

Started GET "/assets/application.js" for 127.0.0.1 at 2012-04-08 03:57:13 -0500
Served asset /application.js - 404 Not Found (35ms)

ActionController::RoutingError (No route matches [GET] "/assets/application.js"): 
```

这些文件在`assets`目录中：

```
$ ls app/assets/*/application*
app/assets/javascripts/application.js   app/assets/stylesheets/application.css 
```

并包含：

```
$ cat app/assets/javascripts/application.js
//= require jquery
//= require jquery_ujs
//= require_self
//= require_tree .
$ cat app/assets/stylesheets/application.css
/*
*= require_self
*= require_tree .
*/ 
```

我想一切都配置好了。这里我放了一些文件块：

*   `Gemfile`, 包含所需的资产宝石：

    ```
    group :assets do
      gem 'sass-rails', '~> 3.1.3'
      gem 'coffee-rails', '~> 3.1.0'
      gem 'uglifier'
    end 
    ```

*   `application.rb`, 已启用资产：

    ```
    config.assets.enabled = true
    config.assets.version = '1.0' 
    ```

*   `development.rb`：

    ```
    config.assets.compress = false
    config.assets.debug = true 
    ```

*   最后......`application.html.erb`布局：

    ```
    <%= stylesheet_link_tag 'application' %>
    <%= javascript_include_tag 'application' %> 
    ```

**阶段**

我现在在**开发**环境中。

**测试**

1.  如果我请求`http://localhost:3000/assets/images/rails.png`，它会抛出`No route matches [GET] "/assets/images/rails.png"`，但文件在那里：

    ```
    $ ls app/assets/images/rails.png 
    app/assets/images/rails.png 
    ```

2.  然后我执行`rake assets:precompile`：

    ```
    $ bundle exec rake assets:precompile
    /usr/local/rvm/rubies/ruby-1.9.2-p318/bin/ruby /usr/local/rvm/gems/ruby-1.9.2-p318/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
    /usr/local/rvm/rubies/ruby-1.9.2-p318/bin/ruby /usr/local/rvm/gems/ruby-1.9.2-p318/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets 
    ```

    然后，执行服务器（`rails s`）并再次请求图像（`rails.png`）：

    ```
    $ rails s
    => Booting WEBrick
    => Rails 3.1.4 application starting in development on http://0.0.0.0:3000
    => Call with -d to detach
    => Ctrl-C to shutdown server
    /usr/local/rvm/gems/ruby-1.9.2-p318/gems/actionpack-3.1.4/lib/action_dispatch/http/mime_type.rb:101: warning: already initialized constant PDF
    [2012-04-08 04:53:06] INFO  WEBrick 1.3.1
    [2012-04-08 04:53:06] INFO  ruby 1.9.2 (2012-02-14) [i686-linux]
    [2012-04-08 04:53:06] INFO  WEBrick::HTTPServer#start: pid=16702 port=3000

    Started GET "/assets/images/rails.png" for 127.0.0.1 at 2012-04-08 04:53:14 -0500
    Served asset /images/rails.png - 404 Not Found (38ms)

    ActionController::RoutingError (No route matches [GET] "/assets/images/rails.png"):

    Rendered /usr/local/rvm/gems/ruby-1.9.2-p318/gems/actionpack-3.1.4/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (125.2ms) 
    ```

那么**怎么了？**， 难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:50:48.257

据我所知，所有预编译的资产都已移至资产文件夹。

这意味着 javascript、样式表和图像的内容将组合在`localhost:3000/assets`.

所以如果你搜索 `localhost:3000/assets/images/rails.png` 它应该位于 `app/assets/images/images/rails.png`. 因此404。

为了保持目录干净，我建议将所有图像保存在 app/assets/images/ 中，并使用`asset_path('rails.png')`

# android - 在一个 Activity 中动态分配两个 Layout/TableRow

> ID：10061814
> 
> 赞同：0
> 
> 时间：2012-04-08T09:30:40.260
> 
> 标签：android, android-linearlayout, tablerow

**在一个活动中动态分配两个布局的问题**

我正在尝试处理需要在同一活动布局中的两个水平滚动视图中分配两个 LinearLayout 或 TableRow 的逻辑，但它似乎不起作用。任何帮助将不胜感激

这是活动的代码：

```
public class ViewTestActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    LinearLayout LinearLayoutInScrollView;
    LinearLayout Inner1HorizontalLinearLayout;
    LinearLayout Inner2HorizontalLinearLayout;
    ScrollView ScrollViewMain;
    HorizontalScrollView horizontalScrollViewOfMain;
    TextView textViewOne;
    TextView textViewTwo;
    Button verticalScrollTriggerButton;
    Button horizontalScrollTriggerButton;

    @Override    

public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            LinearLayoutInScrollView = (LinearLayout) findViewById(R.id.MainscrollViewLayout);

            horizontalScrollViewOfMain = new HorizontalScrollView(this);
            LinearLayoutInScrollView.addView(horizontalScrollViewOfMain);

            verticalScrollTriggerButton = new Button(this);
            verticalScrollTriggerButton.setText("CheckVerticalScroll");
            verticalScrollTriggerButton.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    for (int i = 0; i < 30; i++) {
                        textViewOne = new TextView(getApplicationContext());
                        textViewOne.setBackgroundColor(0xaa000000);
                        textViewOne.setText("This is Dynamic");
                        LinearLayoutInScrollView.addView(textViewOne);
                    }

                }
            });

            horizontalScrollTriggerButton = new Button(this);
            horizontalScrollTriggerButton.setText("CheckHorizontalScroll");
            horizontalScrollTriggerButton.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Inner1HorizontalLinearLayout = new LinearLayout(getApplicationContext());
                    Inner2HorizontalLinearLayout = new LinearLayout(getApplicationContext());               
                    for (int i = 0; i < 30; i++) {
                        textViewOne = new TextView(getApplicationContext());
                        textViewOne.setBackgroundColor(0xaa000000);
                        textViewOne.setText("This is Dynamic textViewOne");
                        Inner1HorizontalLinearLayout.addView(textViewOne);
                        textViewTwo = new TextView(getApplicationContext());
                        textViewTwo.setBackgroundColor(0xaa000000);
                        textViewTwo.setText("This is Dynamic textViewTwo");
                        Inner2HorizontalLinearLayout.addView(textViewTwo);                  
                    }
                    horizontalScrollViewOfMain.addView(Inner1HorizontalLinearLayout);
                    horizontalScrollViewOfMain.addView(Inner2HorizontalLinearLayout);
                }

            });

            LinearLayoutInScrollView.addView(verticalScrollTriggerButton);
            LinearLayoutInScrollView.addView(horizontalScrollTriggerButton);

        } 
```

这是 main.xml 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/MainscrollView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:id="@+id/MainscrollViewLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:12:00.737

那么我看到的第一个问题是这两行：

```
horizontalScrollViewOfMain.addView(Inner1HorizontalLinearLayout);
horizontalScrollViewOfMain.addView(Inner2HorizontalLinearLayout); 
```

任何 scrollView 都是框架视图，并且只能有一个内部视图。

[http://developer.android.com/reference/android/widget/Horizo​​ntalScrollView.html](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)

我现在不在计算机上运行代码/查看更多细节，并且您没有详细说明您遇到的确切问题。但看看这是否解决了你的问题。

# java - 推荐 Java 的字段验证器

> ID：10061817
> 
> 赞同：0
> 
> 时间：2012-04-08T09:31:06.100
> 
> 标签：java, validation, field

我发现自己一次又一次地实施验证系统。我只是想知道是否有人可以推荐某种具有验证输入字段的所有必要方法的开源 Java 库。

主要是它应该有方法来检查一个字符串是否代表一个正确的浮点数或整数。字符验证、绑定检查等。

我知道我可以用 try catch 块做所有事情，但它似乎很笨拙。特别是当我有大量字段要检查时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:57:58.400

Guava 有一个[实用程序类来检查先决条件](http://code.google.com/p/guava-libraries/wiki/PreconditionsExplained)- 但您仍然需要有一个单独的实用程序类来检查字符串是否为数字等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T10:00:23.740

我建议 JSR-303 Bean 验证： http: [//musingsofaprogrammingaddict.blogspot.com/2009/01/getting-started-with-jsr-303-beans.html](http://musingsofaprogrammingaddict.blogspot.com/2009/01/getting-started-with-jsr-303-beans.html)

不是那么先进，但至少你可以使用很好的正则表达式。

# c# - 捕捉 Global.asax 中的错误

> ID：10061837
> 
> 赞同：12
> 
> 时间：2012-04-08T09:36:47.797
> 
> 标签：c#, asp.net, error-handling

我的 Global.aspx 中有以下内容，用于处理错误：

```
void Application_Error(object sender, EventArgs e)
{
    Exception exception = Server.GetLastError();
    if (exception != null)
    {
        //Log
        if (HttpContext.Current.Server != null)
        {
           HttpContext.Current.Server.Transfer("/siteerror.aspx");
        }
    }
} 
```

这在大多数情况下都有效，但有时无法进入 Server.Transfer。由于某种原因 HttpContext.Current.Server 为空。我想出了这种情况发生在哪里：当用户控件和我的业务逻辑类中发生错误时。我在这里错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:58:05.610

Application_Error 块可以在应用程序生命周期之间的任何时间捕获异常。

应用程序生命周期是会话生命周期的父级，因为您可以理解单个应用程序中可以有许多会话。

因此，在创建会话之前或会话到期之后发生某些错误时，您可能会有 HttpContext.Current null。

如果您想编写特定于会话的错误重定向，您应该始终检查当前 HttpContext 的 Null。

您还可以使用 Server.GetLastError 了解发生的错误详细信息，并通过 web.config 中的 CustomError 标记编写错误页面重定向

请参阅以下链接

[http://weblogs.asp.net/scottgu/archive/2006/08/12/Tip_2F00_Trick_3A00_-Show-Detailed-Error-Messages-to-Developers.aspx](http://weblogs.asp.net/scottgu/archive/2006/08/12/Tip_2F00_Trick_3A00_-Show-Detailed-Error-Messages-to-Developers.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T12:05:36.347

应用程序错误可能随时发生 - 包括没有连接时。

例如，如果后台线程正在处理并导致异常。

# mysql - 如何设置 django 和 mysql 使用 UTF-8

> ID：10061842
> 
> 赞同：7
> 
> 时间：2012-04-08T09:37:35.233
> 
> 标签：mysql, django, utf-8

我想将我的 Django/mysql 站点设置为使用 UTF-8。请指导我必须在 django 和 mysql 中进行的更改，以确保以下事项。

1.  用户在表单中输入的数据将始终编码为 UTF-8

2.  将数据以utf-8形式存储在mysql中

3.  在模板中正确显示 utf8 编码的数据

4.  另外我想知道移动到 UTF-8 编码是否会消除 unicode 解码错误，如下所示。

> UnicodeDecodeError：“ascii”编解码器无法解码位置 55 中的字节 0xc2：序数不在范围内（128）

非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-08T10:42:15.973

这里有一些建议：

1）创建数据库时使用utf8编码

```
CREATE DATABASE <dbname> CHARACTER SET utf8; 
```

[文档](https://docs.djangoproject.com/en/dev/ref/databases/#creating-your-database)

2) 在脚本的第一行或第二行添加以下特殊注释：

```
# -*- coding: utf-8 -*- 
```

[关于 python 和 utf8 的好文章](http://www.evanjones.ca/python-utf8.html)

3) 在 *.py 文件中使用带 u 前缀的 unicode 字符串

```
unicodeString = u"hello Unicode world!" 
```

4) 在基本模板部分使用以下元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

# amazon-ec2 - 如何将 Linux cron 作业转换为“亚马逊方式”？

> ID：10061843
> 
> 赞同：113
> 
> 时间：2012-04-08T09:37:42.737
> 
> 标签：amazon-ec2, cron, scheduled-tasks, lamp, amazon-swf

无论好坏，我们已将整个[LAMP](https://en.wikipedia.org/wiki/LAMP_(software_bundle)) Web 应用程序从专用机器迁移到云（Amazon EC2 机器）。到目前为止一切都很好，但我们执行[crons](https://en.wikipedia.org/wiki/Cron)的方式并不理想。我有一个亚马逊特有的问题，关于如何使用“亚马逊方式”最好地管理云中的 cron 作业。

**问题**：我们有多个网络服务器，需要为批处理作业运行 crons，例如创建 RSS 提要、触发电子邮件，实际上还有许多不同的事情。但是 cron 作业**只需​​要在一台机器上运行，**因为它们经常写入数据库，因此如果在多台机器上运行会重复结果。

到目前为止，我们将其中一个网络服务器指定为“主网络服务器”，它有一些其他网络服务器没有的“特殊”任务。云计算的权衡是可靠性——我们不想要“主网络服务器”，因为它是单点故障。我们希望它们都是相同的，并且能够在不记住不要将主网络服务器从集群中取出的情况下进行升级和降级。

我们如何重新设计我们的应用程序以将 Linux cron 作业转换为没有单点故障的临时工作项？

到目前为止我的想法：

*   有一台专门用于运行 crons 的机器。这将更易于管理，但仍然是单点故障，并且会浪费一些钱来获得额外的实例。
*   可以想象，一些工作可以从 Linux crons 转移到[MySQL Events](http://dev.mysql.com/doc/refman/5.6/en/events.html) ，但是我不喜欢这个想法，因为我不想将应用程序逻辑放入数据库层。
*   也许我们可以在所有机器上运行所有的 cron，但是改变我们的 cron 脚本，使它们都从一些实现锁定机制的逻辑开始，这样只有一个服务器实际采取行动，而其他服务器只是跳过。我不喜欢这个想法，因为它听起来可能有问题，我更愿意使用亚马逊的最佳实践而不是自己动手。
*   我在想象这样一种情况，工作被安排在某个地方，添加到队列中，然后每个网络服务器都可以是一个工作人员，可以说“嘿，我会接受这个”。[Amazon Simple Workflow Service](http://aws.amazon.com/swf/)听起来正是这种事情，但我目前对此了解不多，因此任何细节都会有所帮助。对于像 cron 这样简单的东西来说，它似乎有点重量级？它是正确的服务还是有更合适的亚马逊服务？

* * *

*更新：*自从提出这个问题后，我在 YouTube 上观看了[Amazon Simple Workflow Service](http://dev.mysql.com/doc/refman/5.6/en/events.html)网络研讨会，并在 34:40 ( [http://www.youtube.com/watch?v=lBUQiek8Jqk#t=34m40s](http://www.youtube.com/watch?v=lBUQiek8Jqk#t=34m40s) ) 注意到了幻灯片提到 cron 作业作为示例应用程序。在他们的文档页面“ [AWS Flow Framework samples for Amazon SWF](http://aws.amazon.com/code/3015904745387737) ”中，亚马逊说他们有 crons 的示例代码：

> ... **> Cron 作业**在此示例中，长时间运行的工作流会定期执行活动。演示了将执行作为新执行继续执行的能力，以便执行可以运行很长时间。...

我下载了适用于 Java 的 AWS 开发工具包 ( [http://aws.amazon.com/sdkforjava/](http://aws.amazon.com/sdkforjava/) )，果​​然埋在可笑的文件夹层中，有一些 java 代码 ( `aws-java-sdk-1.3.6/samples/AwsFlowFramework/src/com/amazonaws/services/simpleworkflow/flow/examples/periodicworkflow`)。

问题是，老实说，这并没有真正的帮助，因为这不是我可以用我的技能轻松消化的东西。PHP SDK 中缺少相同的示例，并且似乎没有教程可以完成该过程。所以基本上，我仍在寻找建议或提示。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-04T10:09:03.110

我注册了 Amazon Gold 支持来问他们这个问题，这是他们的回答：

> 汤姆
> 
> 我对我的一些同事进行了快速调查，结果发现 cron 是空的，但在睡了之后，我意识到重要的一步可能仅限于锁定。所以我找了“分布式 cron 作业锁定”，找到了一个 Apache 项目 Zookeeper 的引用。
> 
> [http://zookeeper.apache.org/doc/r3.2.2/recipes.html](http://zookeeper.apache.org/doc/r3.2.2/recipes.html)
> 
> [http://highscalability.com/blog/2010/3/22/7-secrets-to-successfully-scaling-with-scalr-on-amazon-by-se.html](http://highscalability.com/blog/2010/3/22/7-secrets-to-successfully-scaling-with-scalr-on-amazon-by-se.html)
> 
> 我还看到了使用 memcached 或类似的缓存机制作为使用 TTL 创建锁的方法的参考。通过这种方式，您设置了一个 TTL 为 300 秒的标志，并且没有其他 cron worker 将执行该作业。TTL 过期后，锁会自动释放。这在概念上与我们昨天讨论的 SQS 选项非常相似。
> 
> 另见；谷歌的胖乎乎的 [http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/chubby-osdi06.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/chubby-osdi06.pdf)
> 
> 让我知道这是否有帮助，并随时提出问题，我们非常清楚我们的服务对于初学者和经验丰富的开发人员来说可能很复杂且令人生畏。我们总是乐于提供架构和最佳实践建议。
> 
> 最好的祝福，
> 
> Ronan G. 亚马逊网络服务

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-10T02:32:54.217

我认为这个视频回答了你的确切问题 - cronjobs aws 方式（可扩展和容错）：

[通过 Amazon Simple Workflow 在云中使用 Cron](http://youtu.be/3PsY7_ttcKk)

该视频使用实现 cronjobs 的特定用例描述了[SWF服务。](http://aws.amazon.com/swf/)

如果您直接来自 crontab，则该解决方案的相对复杂性可能难以接受。最后有一个案例研究帮助我了解额外的复杂性会给你带来什么。我建议您观看案例研究并考虑您对可扩展性和容错性的要求，以决定是否应该从现有的 crontab 解决方案迁移。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-03T10:14:14.477

将 SQS 用于 cronjobs 时要小心，因为它们不能保证“只有一台机器可以看到一个作业”。他们保证“至少一个”会收到消息。

来自：[http ://aws.amazon.com/sqs/faqs/#How_many_times_will_I_receive_each_message](http://aws.amazon.com/sqs/faqs/#How_many_times_will_I_receive_each_message)

> **问：每条消息我会收到多少次？**
> 
> Amazon SQS 旨在提供其队列中所有消息的“至少一次”传输。尽管大多数情况下每条消息将只传递给您的应用程序一次，但您应该设计您的系统，以便多次处理消息不会产生任何错误或不一致。

到目前为止，我可以考虑一个安装了 Gearman Job Server 实例的实例的解决方案：http: [//gearman.org/](http://gearman.org/)。在同一台机器上，您配置生成命令的 cron 作业以在后台执行您的 cronjob 任务。然后你的一个网络服务器（worker）将开始执行这个任务，它保证只有一个会接受它。你有多少工人并不重要（尤其是当你使用自动缩放时）。

这个解决方案的问题是：

*   Gearman 服务器是单点故障，除非您使用分布式存储对其进行配置，例如使用 memcached 或某些数据库
*   然后使用多个 Gearman 服务器，您必须选择一个通过 cronjob 创建任务的服务器，所以我们又回到了同样的问题。但是，如果您可以忍受这种单点故障，那么使用 Gearman 看起来是个不错的解决方案。特别是你不需要大实例（在我们的例子中微实例就足够了）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-02-24T10:50:46.853

亚马逊刚刚[发布](http://aws.amazon.com/about-aws/whats-new/2015/02/17/aws-elastic-beanstalk-supports-environment-cloning-periodic-tasks-and-1-click-iam-role-creation/)了 Elastic Beanstalk 的新功能。从[文档](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features-managing-env-tiers.html#worker-periodictasks)：

> AWS Elastic Beanstalk 支持
> 在运行预定义配置的环境中为工作人员环境层定期执行任务，该配置的解决方案堆栈在容器名称中包含“v1.2.0”。"

您现在可以创建一个包含`cron.yaml`配置调度任务的文件的环境：

```
version: 1
cron:
- name: "backup-job"          # required - unique across all entries in this file
  url: "/backup"              # required - does not need to be unique
  schedule: "0 */12 * * *"    # required - does not need to be unique
- name: "audit"
  url: "/audit"
   schedule: "0 23 * * *" 
```

我想通过消息队列（SQS）使用在自动缩放环境中只运行一次的保险。当 cron 守护程序触发一个事件时，它会将调用放入 SQS 队列中，并且队列中的消息只被评估一次。文档说如果 SQS 有很多消息要处理，执行可能会延迟。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-10-23T10:37:02.383

我现在第三次遇到这个问题，并认为我会参与进来。我们已经陷入困境有一段时间了。我仍然*觉得*AWS 在这里缺少一个功能。

在我们的案例中，在查看了可能的解决方案后，我们决定有两种选择：

*   设置一个 cronjob 服务器，该服务器运行一次只能运行一次的作业，自动扩展它并确保在某些 CloudWatch 统计数据不应该是时替换它。我们使用`cloud-init`脚本来运行 cronjobs。当然，这会带来停机时间，从而导致错过 cronjobs（当每分钟运行某些任务时，就像我们一样）。
*   使用使用的逻辑`rcron`。当然，魔法`rcron`本身并不是真正的魔法，它存在于您用来检测故障节点（我们`keepalived`在这里使用）并将另一个节点“升级”为主节点的逻辑中。

我们决定采用第二个选项，仅仅是因为它速度非常快，而且我们已经拥有运行这些 cronjobs 的网络服务器的经验（在我们之前的 AWS 时代）。

当然，此解决方案专门用于替换传统的单节点 cronjob 方法，其中时间是决定因素（例如*“我希望作业 A 每天早上 5 点运行一次”*，或者就像在我们的例子中*“我想要作业 B每分钟运行一次”*）。如果你使用 cronjobs 来触发批处理逻辑，你*真的*应该看看`SQS`. 没有主动-被动的困境，这意味着您可以使用单个服务器或整个劳动力来处理您的队列。我还建议考虑`SWF`扩展您的员工队伍（尽管`auto scaling`在大多数情况下也可以做到这一点）。

依赖另一个第三方是我们想要避免的。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-02-16T14:26:43.207

2016 年 2 月 12 日，亚马逊发布了关于[使用 AWS Lambda 调度 SSH 作业的](https://aws.amazon.com/blogs/compute/scheduling-ssh-jobs-using-aws-lambda/)博客。我认为这回答了这个问题。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-08T20:45:35.587

“亚马逊”方式是分布式的，这意味着庞大的 crons 应该被分成许多较小的作业并交给正确的机器。

使用类型设置为 FIFO 的 SQS 队列，将其粘合在一起以确保每个作业仅由一台机器执行。它还容忍失败，因为队列将缓冲直到机器重新启动。

> **FIFO Exactly-Once Processing**：消息被传递一次并保持可用，直到消费者处理并删除它。不会将重复项引入队列中。

还要考虑您是否真的需要“批处理”这些操作。如果一晚的更新比预期的大得多，会发生什么？即使使用动态资源，您的处理也可能会延迟，等待足够多的机器启动。相反，将您的数据存储在 SDB 中，通过 SQS 通知机器更新，并动态创建您的 RSS 提要（使用缓存）。

批处理作业始于处理资源有限且“实时”服务优先的时代。在云中，情况并非如此。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-06-09T11:05:55.193

如果您已经启动了 Redis 服务，这看起来是一个不错的解决方案：

[https://github.com/kvz/cronlock](https://github.com/kvz/cronlock)

阅读更多： http: [//kvz.io/blog/2012/12/31/lock-your-cronjobs/](http://kvz.io/blog/2012/12/31/lock-your-cronjobs/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-09T22:09:17.693

你为什么要建立自己的？为什么不使用 Quartz 之类的东西（带有集群调度）。请参阅文档。

[http://quartz-scheduler.org/documentation/quartz-2.x/configuration/ConfigJDBCJobStoreClustering](http://quartz-scheduler.org/documentation/quartz-2.x/configuration/ConfigJDBCJobStoreClustering)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-06-24T15:04:48.130

我们所做的是我们有一个特定的服务器，它是我们 Web 应用程序集群的一部分，位于 ELB 后面，还分配了一个特定的 DNS 名称，以便我们可以在该特定服务器上运行作业。这还有一个好处是，如果该作业导致该服务器变慢，ELB 会将其从集群中删除，然后在作业结束并再次恢复健康时将其返回。

像冠军一样工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-24T13:46:42.727

验证您的 cron 表达式是否以 Amazon 方式工作的一种方法是通过 events 命令运行它。例如：

`aws events put-rule --name "DailyLambdaFunction" --schedule-expression "<your_schedule_expression>`

如果您的计划表达式无效，那么这将失败。

更多资源：[https ://docs.aws.amazon.com/cli/latest/reference/events/put-rule.html](https://docs.aws.amazon.com/cli/latest/reference/events/put-rule.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-26T02:55:11.670

如果您愿意使用非 AWS 服务，则可以查看[Microsoft Azure](https://azure.microsoft.com/)。Azure 提供了一个很棒的[作业调度程序](https://azure.microsoft.com/en-us/services/scheduler/)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-25T14:13:54.450

由于没有人提到[CloudWatch Event](http://docs.aws.amazon.com/AmazonCloudWatch/latest/events/WhatIsCloudWatchEvents.html)，我会说这是 AWS 执行 cron 作业的方式。它可以运行许多操作，例如 Lambda 函数、ECS 任务。

# java - 从图像中将单个像素读入矩阵

> ID：10061845
> 
> 赞同：0
> 
> 时间：2012-04-08T09:38:04.863
> 
> 标签：java, matlab

我正在使用神经网络进行字符识别项目。我的第一个目标是从我发现任何字母的图像中读取那些像素。我的意思是，如果图像 A、B 和 C 中随机出现三个字母，我将如何读取 A、B 和 C 的像素值并将它们存储在矩阵中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:50:25.757

使用 Java 时，可以先将图像加载为 BufferedImage：

```
BufferedImage image = ImageIO.read(imageUrl); 
```

然后您可以通过以下方式获取单个像素的 RGB 值：

```
image.getRGB(x, y); 
```

您还可以使用 Color 对象将 RGB 整数值解析为单独的颜色代码。

```
Color color = new Color(image.getRGB(x,y));
int red = color.getRed();
int green = color.getGreen();
int blue = color.getBlue(); 
```

从这一点开始，您几乎可以做任何您想做的事情。我过去也做过同样的事情。我的建议是，您不应该使用所有颜色来使搜索空间过大。黑色和白色在开始时也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:43:04.340

问题不是很清楚。如果您的意思是您有 A.png、B.png 等图像文件并且您想要矩阵中的像素值，您可以在 matlab 中创建一个 RBG 矩阵

```
image = imread('A.png'); 
```

这将为您提供 RGB 值的 width-height-3 矩阵。

* * *

感谢您提供图片链接，让我们再试一次！:-)

因此，假设您不想手动说出每个字符的位置，我们将不得不自动找到它们。为此，让我们转换为黑白，然后使用[bwconncomp](http://www.mathworks.co.uk/help/toolbox/images/ref/bwconncomp.html)查找每个字母的像素。

```
image = imread('A.png');
ibw = im2bw(image);
C = bwconncomp(image);
boxes = regionprops(C, 'BoundingBox');
letters = cell{26};
for i=1:26
  %get left, top, width, height from boxes(i).BoundingBox
  %I'm not on matlab at the moment, so I don't know exactly how to
  %but it should be quite easy.
  letters{i} = image(left:left+width, top:top+height, :);
end 
```

找到连接的组件后，我们使用[regionprops](http://www.mathworks.co.uk/help/toolbox/images/ref/regionprops.html)获取它们的边界框，并将每个边界框放在单独的图像中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T09:43:56.640

你可以做：

```
imageA=imread('imageA.jpg');
pixel1=imageA(y,x,:); 
```

# jquery - jquery淡入淡出滑动面板

> ID：10061847
> 
> 赞同：2
> 
> 时间：2012-04-08T09:39:06.500
> 
> 标签：jquery

我创建了一个小例子，请看一下， [http://jsfiddle.net/bWTwL/](http://jsfiddle.net/bWTwL/) 我想要一个这样的面板： 1.li(home).click > 向左滑动面板 > 内容淡入 2。 X（点击）>内容淡出>向右滑动面板

现在，我有 7 个列表项，例如家庭、关于我等。我希望当用户单击任何列表项时，该列表项的特定内容（家庭、关于我等）应该淡入。如果面板已经可见，那么只有内容应该在点击时淡入/淡出。我想为它们中的每一个编写每个函数，但这将是一个很长的混乱代码。

我认为像 html5 数据属性这样的东西来完成这项工作但失败了。请在此处查看相同的效果以更好地理解：[http ://www.unpezvivo.com/proyectos/themeforest/cspp/02/#](http://www.unpezvivo.com/proyectos/themeforest/cspp/02/#)

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T10:20:45.773

[**这些方面的东西会很好用。**](http://jsfiddle.net/Shef/P33Cj/)

### 1.CSS

```
div.panel {
    display:none;
    position: absolute;
    top: 0;
    width:70%;
    right:0%;
    height: 100%;
    z-index: 3;
    margin: 0;
    overflow:hidden;
    background-color:black;
}
.panel div.content {
    display:none;
    font-family:arial;
    color:white;
    padding:50px;
    overflow:hidden;
}
span.close {
    position:absolute;
    right:10px;
    top:15px;
    cursor:pointer;
}​ 
```

### 2\. 标记

```
<ul id="menu">
    <li><a id="home" href="#">Home</a></li>
    <li><a id="about-me" href="#">About Me</a></li>
</ul>

<div class="panels">
    <div class="panel home">
        <div class="content">
            <span class="close">X</span>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis id ligula elit, vitae tincidunt massa. Vestibulum quis tempus lectus. Vestibulum diam dolor, tristique eget tincidunt eu, posuere nec nulla. Nulla a sollicitudin diam. Nunc venenatis dui in turpis ultricies semper. Nulla justo nibh, volutpat nec rutrum id, viverra ac nulla. Maecenas elit felis, rhoncus sit amet imperdiet eget, ultricies ut lorem. Praesent sed felis diam</p>
        </div>
    </div>
    <div class="panel about-me">
        <div class="content">
            <span class="close">X</span>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis id ligula elit, vitae tincidunt massa. Vestibulum quis tempus lectus. Vestibulum diam dolor, tristique eget tincidunt eu, posuere nec nulla. Nulla a sollicitudin diam. Nunc venenatis dui in turpis ultricies semper. Nulla justo nibh, volutpat nec rutrum id, viverra ac nulla. Maecenas elit felis, rhoncus sit amet imperdiet eget, ultricies ut lorem. Praesent sed felis diam</p>
        </div>
    </div>
</div> 
```

### 3\. jQuery

```
$(document).ready(function() {
    var $panels = $('.panels > .panel');
    $('#menu > li').on('click', 'a', function() {
        $panels.filter('.'+this.id).trigger('togglePanel');
    });
    $panels
        .on('togglePanel', function(){
            var $this           =   $(this)
              , $activePanels   =   $panels.filter(':visible').not($this);
            if ($activePanels.length) {
                $activePanels
                    .one('panelHidden', function(){
                        $this.is(':visible')
                        ? $this.trigger('hidePanel')
                        : $this.trigger('showPanel');
                    })
                    .trigger('hidePanel');
            } else {
                $this.is(':visible')
                ? $this.trigger('hidePanel')
                : $this.trigger('showPanel');
            }
        })
        .on('hidePanel', function(){
            var $this = $(this);
            $this.find('.content').fadeOut(500, function() {
                $this.animate({
                    'width': 'hide'
                }, 1000, function(){
                    $this.trigger('panelHidden');
                });
            });
        })
        .on('showPanel', function(){
            var $this = $(this);
            $this.animate({
                'width': 'show'
            }, 1000, function() {
                $this.find('.content').fadeIn(500, function(){
                    $this.trigger('panelShown');
                });
            });
        });
    $panels.find('.content .close').on('click', function() {
        $(this).closest('.panel').trigger('togglePanel');
    });
});​ 
```

* * *

我使用了[pub/sub 模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#detailedobserver)，这让事情变得更容易。我们最小化冗余代码。而且工作流程更容易遵循。

我强烈建议您[对自定义事件使用命名空间](http://api.jquery.com/on/#event-names)（例如，、、、`togglePanel`... `hidePanel`）`showPanel`。我没有在这段代码中这样做，因为它对于新手脚本编写者来说已经很复杂了，并且留给你作为家庭作业来进一步研究这段代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T10:07:08.227

使它们都成为同一个类（例如，myclass），然后使用`this`：

```
$('.myclass').on('click', function() {
    $(this).animate({
        'width': 'show'
    }, 1000, function() {
        $(this).fadeIn(500);
    });
}); 
```

实际上，我只是测试了上面的代码，但它不起作用，因为淡入的元素与您单击的元素不同，因此第二个`this`元素没有引用正确的元素。您需要能够使用其 DOM 关系（例如，孩子）将您想要淡入的对象引用到正在单击的对象。（见[这个](https://stackoverflow.com/questions/306583/this-selector-and-children)。）

所以你可以有：

```
$('.myclass').on('click', function() {
    $(this).animate({
        'width': 'show'
    }, 1000, function() {
        $(this).children(.class2).fadeIn(500);
    });
}); 
```

为此，您需要设置不同的 HTML，而不是将菜单和面板分开。您可以使用 CSS 将元素放置在 .class2 中。

或者，您可以只给所有东西一个唯一的ID，所以菜单项#M1 触发面板项#P1，#M2 触发#P2 等...

【谢夫的回答比我的好很多！】

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T10:06:43.090

在事件函数中使用 $(this) 而不是特定的 CSS 选择器。这将引用触发的对象：

```
$(this).fadeOut(); 
```

您可以通过逗号分隔将其与选择器结合使用：

```
$(".slide", this).fadeOut(); 
```

# c# - 如果实体框架中的模型发生更改，则更改表

> ID：10061850
> 
> 赞同：0
> 
> 时间：2012-04-08T09:39:55.480
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

EF 有什么办法不 DropCreateDatabaseIfModelChanges，只插入新的列并删除未使用的属性？当我使用 POCO 时如何管理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:44:08.823

查看Entity Framework 4.3 中包含的[Code First Migrations 。](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-released.aspx)

**更新**

我不确定你的意思，我能想到的最接近自动化过程的是[自动迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)。

# objective-c - Objective-C 中的符号 ^ 代表什么？

> ID：10061851
> 
> 赞同：0
> 
> 时间：2012-04-08T09:40:00.867
> 
> 标签：objective-c, ios

> **可能重复：**
> [目标 C 中的 ^ 是什么意思？](https://stackoverflow.com/questions/9126461/what-does-in-objective-c-mean)

```
[SKSite requestSiteWithNameLike:@"Stack Overflow" completionHandler:^(SKSite *site, NSError *error) {
  SKFetchRequest *r = [[SKFetchRequest requestForFetchingUsers] withIDs: 115730, nil]; 
```

在上面的代码中，`^`表示什么？这个符号我见过好几次了，但是没看懂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:42:13.147

[块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)

这个想法是使用一段代码作为参数。您还可以使用一大段代码并将其传递。如果您使用 Google 搜索“[在 iOS 中使用块](https://www.google.com/search?q=using%20blocks%20in%20ios)” ，您可以阅读更多相关信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:42:07.990

这是一个[块](http://en.wikipedia.org/wiki/Blocks_%28C_language_extension%29 "堵塞")

# php - 找到唯一除数的有效方法

> ID：10061857
> 
> 赞同：0
> 
> 时间：2012-04-08T09:41:00.493
> 
> 标签：php, algorithm, numbers, primes

> **可能重复：**
> [寻找唯一除数的最佳算法](https://stackoverflow.com/questions/10061108/optimal-algorithm-for-finding-unique-divisors)

我以前曾问过这个问题，但该帐户现在无法访问，所以我再次问它以表明我这次的努力。

给定一个数字列表（数组）和一个数字 N，找到 N 的所有除数，其中不除任何属于该列表的数字。我已经用蛮力和一点有效的方法（但不是最好的方法）解决了它。因此，我正在寻找一种可能是解决此类问题的最佳方法。一切都是整数（没有浮点数）。

我的方法是首先找到数字 N 的所有除数（没有任何开销）。然后，我以相反的顺序（单独）对列表和除数进行排序。现在，对于每个除数 D，我检查它是否除以列表中的任何数字（从最高元素开始到 >= 除数 D 的元素）。如果它除法，那么 D 的所有除数也必须除法。然后我从除数列表中删除这些元素，这些元素也是 D 的除数（可以认为是删除交集）。因此，最终左除数数组是所需的数组（根据我的方法）。如果有人可以指出我的方法中的任何错误或效率低下，我们将不胜感激。列表中可以存在的最大值为 10^18。

我已经在 PHP 中实现了它。我在下面提供我的代码。请忽略评论。

```
while($div=each($divisors))
{
$i=0;
$divisor=$div['key'];
//echo "divisor is $divisor\n";
while((int)$unfriendly[$i]>=$divisor)
{//echo "aya\n";
    if(!((int)bcmod($unfriendly[$i],$divisor)))
    {//echo "ayeea\n";
        $divisors_of_divisor=divisors_of_a_number($divisor);
        //print_r($divisors_of_divisor);
        //print_r($divisors);
        foreach($divisors_of_divisor as $d)
        unset($divisors[$d]);
        //print_r($divisors);
        break;
    }
    ++$i;
}
 }
echo sizeof($divisors);
function divisors_of_a_number($n)//returns all the divisors of a number in an unsorted array
{
$i=1;
$s=sqrt($n);
while($i<=$s)
{
if(!($n%$i))
{
    $a[]=$i;
    if($i!=$s)
    $a[]=$n/$i;
}
++$i;
}
return $a;
}
function divisors_of_a_number_as_keys_of_array($n)//returns all the divisors of a number in an unsorted array as keys
{
$i=1;
$s=sqrt($n);
while($i<=$s)
{
if(!($n%$i))
{
    $a[$i]=1;
    //if($i!=$s)
    $a[$n/$i]=1;
}
++$i;
}
return $a;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:20:12.327

您可以使用[Eratosthenes 筛子的这个 PHP 实现](http://www.raditha.com/php/primes.php)。

还有[这个](http://www.think-lamp.com/2008/08/sieve-of-eratosthenes-in-php/)。

而[这个](http://rosettacode.org/wiki/Sieve_of_Eratosthenes#PHP)。

看看[这个问题](https://stackoverflow.com/questions/1861612/sieve-of-eratosthenes-algorithm)。

# unix - unix - 使用“cat foo”命令执行输出

> ID：10061859
> 
> 赞同：1
> 
> 时间：2012-04-08T09:42:00.350
> 
> 标签：unix, command, cat

一旦我有一个文件，要查看我使用 cat 命令的内容，比如 cat 文件名，它的内容会显示在终端上，它也会自动在我的终端上输入一些随机字符，并且`enter`也输入了密钥，然后终端提示`command not found`。我想知道是否可以在文件中编写命令并使用 cat 命令执行这些命令。我无法再次获取该文件，并且搜索也无济于事。但我敢肯定，这里一定有人知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T09:49:52.513

这听起来像是一个包含转义序列的文件，导致终端读取以下字符串作为输入。如今，终端程序往往不支持该功能，因为这是一个相当明显的安全问题。

过去可行的一种方法是对 DEC“应答”序列进行编程，终端将发送该序列以响应嵌入在文件中的`Ctrl`+ 。`E`

# ios - 调用 SetNeedsDisplay 将垃圾分类

> ID：10061863
> 
> 赞同：0
> 
> 时间：2012-04-08T09:42:13.473
> 
> 标签：ios, cocoa-touch, uikit

如果我有一个覆盖了 DrawRect 的 UIView，并且我调用了 setNeedsFisplay，我的渐变不会重绘。

它们没有被我缓存。我每次画画时都在创造它。

如果视图没有调整大小，这似乎只是一个问题。

什么会导致这个？

# security - 如何部署具有安全属性的 Eclipse RCP 应用程序

> ID：10061868
> 
> 赞同：0
> 
> 时间：2012-04-08T09:43:19.487
> 
> 标签：security, properties, eclipse-plugin, eclipse-rcp, desktop-application

我目前正在开发一个 Eclipse RCP e4 桌面应用程序，它将连接到基于 Web 的外部 API。这些 API 是安全的，需要应用程序传递安全凭证来识别应用程序，以及使用应用程序的用户的安全凭证。应用程序的凭据需要与应用程序一起部署，安全地执行此操作的最佳方法是什么，因为我显然不希望将它们作为纯文本或硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:01:57.840

您可以使用用户凭据而不是应用程序特定凭据对应用程序进行身份验证吗？

也许您可以使用用户凭据向另一个应用程序进行身份验证以检索应用程序凭据？

如果要在本地存储用户凭据，可以使用该`ISecurePreferences`机制（[http://help.eclipse.org/galileo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/equinox/安全/存储/ISecurePreferences.html](http://help.eclipse.org/galileo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/equinox/security/storage/ISecurePreferences.html)）。

# hadoop - Hadoop jar 或 /bin/hadoop jar

> ID：10061869
> 
> 赞同：1
> 
> 时间：2012-04-08T09:43:24.953
> 
> 标签：hadoop

运行 map reduce 作业有什么区别

```
/bin/hadoop -jar /file.jar input output 
```

并在eclipse中导入jar并运行代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T10:02:31.377

第一个命令在 Hadoop 集群上运行作业，如`$HADOOP_HOME/conf`. 该集群可能是远程的，可能是伪分布式集群或可能是本地的。

在 Eclipse 中运行在本地运行它。它在同一个 JVM 中本地运行映射器和缩减器。

# php - mysql通过添加前一个值来插入一个值

> ID：10061872
> 
> 赞同：2
> 
> 时间：2012-04-08T09:44:10.913
> 
> 标签：php, mysql

我有一个名为*goal*的表，里面有两列 ID (primarykey autoincreement) 和 amount(long int)

默认情况下，long int 值为 0。是否可以通过添加数量来更新此行。

最初为 0，如果有人捐赠了一些金额，则当前金额将根据捐赠金额更新。

例如。

当前金额 = 50（在数据库中）

捐赠金额 = 10

所以在更新行之后，数量应该是 60。

我可以通过首先选择金额然后更新它来做到这一点，但是还有其他选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T09:45:22.893

您可以就地更新它。

```
update table
set amount = amount + 50
where id = your_id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T09:45:39.493

```
UPDATE `goal` SET `amount` = `amount` + 10 WHERE ID = 1 
```

# android-widget - 每个活动的主页按钮

> ID：10061880
> 
> 赞同：0
> 
> 时间：2012-04-08T09:45:39.567
> 
> 标签：android-widget

我正在开发一个具有 9 或 10 个活动的 android 应用程序，并且对于每个活动，我都想制作一个主页按钮，将用户带到应用程序的主屏幕！关于我该怎么做的一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:26:40.380

为该按钮创建一个 XML 文件并将其包含在所有活动布局中。更多详细信息：[Android XML 布局中 <merge> 和 <include> 用法的简单示例](https://stackoverflow.com/questions/2732682/simple-example-of-merge-and-include-usage-in-android-xml-layouts)

# java - GWT 或 JavaFX 网页困境

> ID：10061882
> 
> 赞同：3
> 
> 时间：2012-04-08T09:45:55.243
> 
> 标签：java, gwt, javafx

我试图解决以下困境。我必须开发整个网页系统（具有用户友好的内容管理，它应该看起来像非常简单的 Drupal 或 Joomla）作为学校的一个项目。网页应具有添加和删除文章、编辑菜单、编辑整个网页布局（标题位置、菜单位置等）的功能。

我正处于决定哪个系统最适合此目的的阶段。我在 GWT 中编写了几个应用程序。开发一些东西非常快，它适用于 Tomcat 等。所以它可能非常适合这项任务。但最近我有了用 JavaFX 2.0 编写整个网页系统的想法（网页将在浏览器中打开）。

你对这个事实有什么看法？我应该使用 JavaFX 还是 GWT？我不确定整个网页在 JavaFX 中是否足够快。如果将访问此页面的用户在启动此页面时不会遇到问题等。我还没有在互联网上找到任何有关此的信息。

感谢您的回答:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:48:58.233

选择 GWT（也可以考虑使用 Vaadin 或 SmartGWT）。它不需要在客户端上安装 Java 虚拟机。此外，GWT 允许客户端只下载应用程序的一小部分，而不是全部。

您引用了两个用 PHP 编写的内容管理系统（例如 Drupal 和 Joomla），因此对您来说最好的解决方案可能是用 Java 编写的 CMS，例如[Alfresco](http://www.alfresco.com/)或[Magnolia](http://www.magnolia-cms.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:34:23.530

你想为一个插件做一个网页或一个应用程序吗？当然是 GWT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T10:03:24.963

**GWT**

GWT 遵循一种最具创新性的方法：您用 Java 编写整个应用程序。但它是用 Javascript 执行的。您的大部分代码被交叉编译为 Javascript 并上传到客户端。从我看到的演示文稿来看，这种方法的效果出奇的好。以前 GWT 编译器曾经很慢，但今天，它们似乎已经解决（或至少缓解了）这个问题。据我所知，GWT 是一个很好的选择

**javafx**

JavaFX 2.0 是一个相当新的 GUI 框架。所以期待一些小故障。好消息是，多年来它可能会有所改善。而且我想如果 JavaFX 会流行，人们会开始编写 JavaFX 组件框架。有一个视频非常清楚地显示了 JavaFX 的领域。 [使用 3D JavaFX](http://www.youtube.com/watch?v=AS26gZrYNy8) [Source进行容器终端监控](http://www.beyondjava.net/blog/hottest-gui-framework-java-world-jsf-javafx/)

# android - 在 android (SlideShow) 中创建带有图像的动画序列

> ID：10061885
> 
> 赞同：0
> 
> 时间：2012-04-08T09:46:37.240
> 
> 标签：android, android-animation, android-imageview, android-image

我正在尝试设置不同图像的自定义动画幻灯片。我设法使用自定义视图为单个图像设置动画。现在我想为我的数组列表中的所有图像设置幻灯片放映。这样图像将一个接一个地显示。现在我有一个自定义视图，是否需要为每个图像创建更多视图？有任何想法吗？

自定义视图：

`public class AnimationPhotoViewA extends ImageView { @Overridepublic void setImageBitmap(Bitmap bm) {super.setImageBitmap(bm);image= bm;}`

活动：

```
 public class PhotoSyncActivity extends Activity implements AnimationListener {
@Override
protected void onCreate(Bundle savedInstanceState) {super.onCreate(savedInstanceState);

    setContentView(R.layout.photo_sync_screen);
    ArrayList<String> photoPaths = new ArrayList<String>();
    photoPaths = getAllPhotos(Environment.getExternalStorageDirectory(),
            photoPaths);
    images = new Bitmap[photoPaths.size()];
    Log.v(ACCESSIBILITY_SERVICE, "photo array!" + photoPaths);

    apa1 = (AnimationPhotoViewA) findViewById(R.id.animation_viewA);

             //START ANIMATION

    animationmove = PhotoAnimationProcess.moveOne(this,apa1,animationmove);

    File imgFile = new File(photoPaths.get(0));

    if (imgFile.exists())
    {
        images[0] = decodeFile(imgFile);
    }
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();

    // SET IMAGE IN THE VIEW
    apa1.setImageBitmap(resizedimage);

}
private void addPicture() {
    // TODO Auto-generated method stub

}

public void onAnimationStart(Animation animation)
{
    // TODO Auto-generated method stub

}

public void onAnimationEnd(Animation animation)
{
    // TODO Auto-generated method stub

    switch (animationmove) 
    {
    case move1:
        animationmove = PhotoAnimationProcess.moveOne(this, apa1, animationmove);
        break;
    case move2:
        addPicture();
        animationmove = PhotoAnimationProcess.moveTwo(this,apa1,animationmove);

        break;
    case move3:
        animationmove = PhotoAnimationProcess.moveThree(this,apa1,animationmove);
        break;
    case move4:
        animationmove = PhotoAnimationProcess.moveFour(this,apa1,animationmove);;
        break;
    case move5:
        animationmove = PhotoAnimationProcess.moveFive(this,apa1,animationmove);
        break;

    default:
        break;
    }

    Log.v(ALARM_SERVICE, "Animation Type" + animation.toString());

}

public void onAnimationRepeat(Animation animation) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:40:15.260

查看[ImageSwitcher](http://developer.android.com/reference/android/widget/ImageSwitcher.html)小部件。它似乎完全符合您的需要。它缺少文档，因此您可能需要查看其父 ViewSwitcher 和 ViewAnimator 的文档。

基本上 ImageSwitcher 会执行以下操作：当您向其提供图片时，切换器会播放带有隐藏它的图片的 out 动画，同时播放带有显示它的图片的 in 动画。在内部，它在两个 ImageView 之间循环。

您可能遇到的一个问题是 ImageSwitcher 不创建其内部图像视图。您可以添加一个[ViewFactory ，如](http://developer.android.com/reference/android/widget/ViewSwitcher.ViewFactory.html)[ApiDemos](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ImageSwitcher1.html)中所示，或者只是在布局文件中添加这些图像视图：

```
<ImageSwitcher ...>
    <ImageView ... />
    <ImageView ... />
</ImageSwitcher> 
```

# c# - 将标志枚举绑定到包含复选框的列表框

> ID：10061886
> 
> 赞同：2
> 
> 时间：2012-04-08T09:46:37.420
> 
> 标签：c#, wpf, listbox, wpf-controls, itemscontrol

我有标志枚举这样说 -

```
[Flags]
public enum Department
{
    None = 0,
    A = 1,
    B = 2,
    C = 4,
    D = 8
} 
```

我想在视图中显示此枚举的值。我想创建一个列表框并将其源绑定到这个 enum 的集合`List<Department> Departments`。一切都很好，直到我想到有一个绑定到我的 Viewmodel 上的属性的复选框 -

```
public Department SelectedDepartments { get; set; } 
```

此处的解决方案[http://compilewith.net/2008/12/wpf-flagsenumvalueconverter.html](http://compilewith.net/2008/12/wpf-flagsenumvalueconverter.html)为将枚举值绑定到复选框提供了优雅的解决方案，但它有一个限制，即创建的复选框等于列表中枚举值的数量。但是，在我的情况下，我不能在我的 UI 上放置这么多复选框，因为我的 Enum 包含 20 个值（这意味着 UI 上有 20 个复选框）。

我尝试使用但在方法`MultiBindingConverter`中失败了。`ConvertBack`我想将复选框的状态与属性 SelectedDepartments 绑定。假设属性值为“A | B”，则应选中 A 和 B 复选框，而 C 和 D 应保持未选中状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:56:02.860

我认为没有使用一些代码隐藏的方法可以做到这一点。

我采用了您在上面链接的示例解决方案，从 MainWindow.xaml 中删除了所有 CheckBox，将以下方法添加到 MainWindow.xaml.cs 并从`MainWindow`构造函数中调用它：

```
 private void AddCheckBoxes()
    {
        var converter = new FlagsEnumValueConverter();
        foreach (Department dept in Enum.GetValues(typeof(Department)))
        {
            if (dept != Department.None)
            {
                var binding = new Binding()
                {
                    Path = new PropertyPath("Department"),
                    Converter = converter,
                    ConverterParameter = dept
                };

                var checkBox = new CheckBox() { Content = dept.ToString() };
                checkBox.SetBinding(CheckBox.IsCheckedProperty, binding);
                DepartmentsPanel.Children.Add(checkBox);
            }
        }
    } 
```

此方法完成创建所有复选框的工作，除了`None`. 然后我可以将更多部门添加到`Department`枚举中，重新运行解决方案并查看新添加部门的其他复选框。

我必须对此解决方案进行一些进一步的小改动才能使其完全正常工作。您可能需要也可能不需要对代码进行这些更改。首先，我让`DataObject`类实现`INotifyPropertyChanged`。其次，我在 MainWindow.xaml 中重写了 XAML，如下所示：

```
<StackPanel>
    <StackPanel x:Name="DepartmentsPanel" />
    <TextBlock Margin="5,20,0,0">
        <TextBlock Text="Raw Value:" FontWeight="Bold" />
        <TextBlock Text="{Binding Department}" />
    </TextBlock>
</StackPanel> 
```

（基本上，我将现有的 DepartmentsPanel 包装在另一个 StackPanel 中，并将“原始值”显示移动到这个外部 StackPanel 中。）最后，我将整个 MainWindow 的 DataContext 而不是 的 DataContext 设置`DepartmentsPanel`为`DataObject`创建的。这一步是使“原始值”显示工作所必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T23:18:01.377

我创建了一个 IValueConverter，它支持直接绑定到枚举，无需代码隐藏或辅助类。它只有两个限制：

*   每个源属性都必须使用一个转换器实例。如果模型包含更多相同枚举类型的属性，则每个属性都需要使用单独的转换器实例。这可以通过在 XAML 中实例化转换器来完成。
*   当枚举类型是标志枚举时，它必须是整数。

该解决方案基于经验事实，即在 ConvertBack 之前始终先有一个 Convert。如果 ConvertBack 更改了值，则始终存在 Convert。这仅在模型上正确实施 INotifyPropertyChanged 时才有效。因此，在两次调用之间，最后一个已知值可以存储在转换器中并在 ConvertBack 方法中使用。

转换器实例应该获取枚举的类型以及它是否是标志枚举。

```
 <EnumToCheckedConverter x:Key="InstanceName" Type="{x:Type MyEnum}" Flags="True" /> 
```

然后可以使用此转换器绑定复选框。

```
 <CheckBox Content="ValueText" IsChecked="{Binding Source, Converter={StaticResource InstanceName}, ConverterParameter=Value}"/> 
```

单选按钮可以使用具有 Flags="False" 的实例通过相同的机制绑定

转换器的源代码

```
public class EnumToCheckedConverter : IValueConverter
{
    public Type Type { get; set; }
    public int? LastValue { get; private set; }
    public bool Flags { get; set; }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value.GetType() == Type)
        {
            try
            {
                var parameterValue = Enum.Parse(Type, parameter as string);

                if (Flags == true)
                {
                    var intParameter = (int)parameterValue;
                    var intValue = (int)value;
                    LastValue = intValue;

                    return (intValue & intParameter) == intParameter;
                }
                else
                {
                    return Equals(parameterValue, value);
                }
            }
            catch (ArgumentNullException)
            {
                return false;
            }
            catch (ArgumentException)
            {
                throw new NotSupportedException();
            }
        }
        else if (value == null)
        {
            return false;
        }

        throw new NotSupportedException();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value != null && value is bool check)
        {
            if (check)
            {
                try
                {
                    if (Flags == true && LastValue.HasValue)
                    {
                        var parameterValue = Enum.Parse(Type, parameter as string);
                        var intParameter = (int)parameterValue;

                        return Enum.ToObject(Type, LastValue | intParameter);
                    }
                    else
                    {
                        return Enum.Parse(Type, parameter as string);
                    }
                }
                catch (ArgumentNullException)
                {
                    return Binding.DoNothing;
                }
                catch (ArgumentException)
                {
                    return Binding.DoNothing;
                }
            }
            else
            {
                try
                {
                    if (Flags == true && LastValue.HasValue)
                    {
                        var parameterValue = Enum.Parse(Type, parameter as string);
                        var intParameter = (int)parameterValue;

                        return Enum.ToObject(Type, LastValue ^ intParameter);
                    }
                    else
                    {
                        return Binding.DoNothing;
                    }
                }
                catch (ArgumentNullException)
                {
                    return Binding.DoNothing;
                }
                catch (ArgumentException)
                {
                    return Binding.DoNothing;
                }
            }
        }

        throw new NotSupportedException();
    }
} 
```

# html - 使用 ajax/query 加载外部文件

> ID：10061889
> 
> 赞同：1
> 
> 时间：2012-04-08T09:46:59.167
> 
> 标签：html, ajax, forms, jquery

我有 2 个按钮来加载 2 个单独的表单、事件和优惠。当用户单击按钮时，我想加载相关的 html 表单并使按钮消失。

> 事件加载 events.html
> 提供加载 offer.html

```
<div class="view_col">
    <form id="form1" name="form_b" method="post" action="">
        <input name="c_event" class="clr" type="button" value="event" />
        <input name="c_offer" class="clr" type="button" value="offer" />
    </form>
</div> 
```

将表单加载到

```
<div id="form_body"> </div> 
```

我想确保用户点击后按钮消失。

有人可以给出一个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:54:12.463

您需要使用`$.load()`从您的外部 HTML 页面获取 HTML。尝试这样的事情：

HTML

```
<div class="view_col">
    <form id="form1" name="form_b" method="post" action="">
        <input name="c_event" class="clr" type="button" value="event" id="eventsBtn" />
        <input name="c_offer" class="clr" type="button" value="offer" id="offersBtn" />
    </form>
</div> 
```

jQuery

```
$("#eventsBtn").on('click', function() { 
    $("#form_body").load('events_loads_events.html');
});
$("#offersBtn").on('click', function() { 
    $("#form_body").load('offers_loads_events.html');
}); 
```

关于[load() 的更多信息；](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:58:47.513

如果你使用 jQuery，那么这很容易：

```
$('#form1 input').on('click', function(event) {
  var $target = $(event.target);
  $('#form_body').load($target.data('url'));
  $('#form1').hide();
}) 
```

您必须将 html 更改为：

```
<div class="view_col">
  <form id="form1" name="form_b" method="post" action="">
  <input name="c_event" class="clr" type="button" value="event" data-url="http://www.path-to-your-form-html-for-this-button.com/"/>
  <input name="c_offer" class="clr" type="button" value="offer" />
</div> 
```

# android - TextToSpeech 显示空指针异常？

> ID：10061892
> 
> 赞同：8
> 
> 时间：2012-04-08T09:47:42.267
> 
> 标签：android, nullpointerexception, text-to-speech

我正在 TextToSpeech 上创建一个应用程序。但是当我尝试运行时，它会在下一行引发异常。

```
tts.speak(ruleOne, TextToSpeech.QUEUE_ADD, null); 
```

[这是我的完整代码供参考](http://pastebin.com/JBvrfqM6)
请给我任何提示。我不明白我的代码有什么问题。当我编译我的代码时，所有值都正确传递，但是当它跳到 tts 对象上方时，它会遇到空指针异常。有什么语法错误吗？哪个方法首先调用 onCreate() 或 onActivityResult？提前致谢

这是 Logcat 的内容。

```
04-10 13:58:34.082: WARN/System.err(19352): java.lang.NullPointerException
04-10 13:58:34.082: WARN/System.err(19352):     at com.example.examguide.ExamRulesActivity.onCreate(ExamRulesActivity.java:60)
04-10 13:58:34.082: WARN/System.err(19352):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 13:58:34.092: WARN/System.err(19352):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-10 13:58:34.092: WARN/System.err(19352):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-10 13:58:34.092: WARN/System.err(19352):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-10 13:58:34.092: WARN/System.err(19352):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-10 13:58:34.092: WARN/System.err(19352):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 13:58:34.092: WARN/System.err(19352):     at android.os.Looper.loop(Looper.java:123)
04-10 13:58:34.092: WARN/System.err(19352):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-10 13:58:34.102: WARN/System.err(19352):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 13:58:34.102: WARN/System.err(19352):     at java.lang.reflect.Method.invoke(Method.java:507)
04-10 13:58:34.102: WARN/System.err(19352):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-10 13:58:34.102: WARN/System.err(19352):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-10 13:58:34.102: WARN/System.err(19352):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T10:06:14.737

写

```
tts = new TextToSpeech(this, this); 
```

在 onCreate () 方法的 if 循环中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T03:07:06.440

正如**Dhruvisha**和**andy boot**所建议的那样， NullPointerException 是显而易见的，因为`onCreate`它是在之前执行的`onActivityResult`。我的建议是在检查后将所有使用的代码`tts`带到一个程序中。这是我的建议代码：

```
 @Override
    public void onCreate(Bundle me)
    {
        super.onCreate(me);
        setContentView(R.layout.examrules);
               Intent checkIntent = new Intent();
          checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
          startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // success, create the TTS instance
                tts = new TextToSpeech(this, this);
                this.speak();
            } 
            else {
                // missing data, install it
                Intent installIntent = new Intent();
                installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);

               //tts.isLanguageAvailable(Locale.INDIA_HINDI);
                startActivity(installIntent);

            }
        }

    }

    @Override
    public void onInit(int status) 
    {        
        if (status == TextToSpeech.SUCCESS) 
        {
            // tts.setLanguage(Locale.US);

            Locale loc = new Locale ("IN", "en");
            tts.setLanguage(loc);
            Toast.makeText(ExamRulesActivity.this, 
                    "Text-To-Speech engine is initialized", Toast.LENGTH_LONG).show();
        }
        else if (status == TextToSpeech.ERROR) 
        {
            Toast.makeText(ExamRulesActivity.this, 
                    "Error occurred while initializing Text-To-Speech engine", Toast.LENGTH_LONG).show();
        }
    }

    public void speak() {
        int isVoiceEnabled=bundle.getInt("isVoiceEnabled");
        setResult(RESULT_OK, intent);       
        if(isVoiceEnabled==1)
        {
             String ruleOne="hi.";
             String ruleTwo= "How are you"; 
             String ruleThree= "will you meet e=me?"; 
             String ruleFour=  " No,Ok";
                     if (ruleOne!=null && ruleOne.length()>0) 
            {
             tts.speak(ruleOne, TextToSpeech.QUEUE_ADD, null);
             tts.speak(ruleTwo, TextToSpeech.QUEUE_ADD, null);
                 tts.speak(ruleThree, TextToSpeech.QUEUE_ADD, null);
             tts.speak(ruleFour, TextToSpeech.QUEUE_ADD, null);

              }       
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T10:44:47.097

**onCreate**不是在**onActivityResult**之前运行吗？

因此，您的 tts 对象将为空。在调用 tts.speak 之前添加额外代码以检查 tts 不为空

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:53:53.590

你只需要复制这些行

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

**然后在你写完之后写`setContentView()`**

那是因为在对`TextToSpeach`对象进行任何操作之前，您需要检查数据是否已安装。

所以代码中的错误是你在调用`example`之前编写了所有新的东西。`intent`

# sql - Zend框架SQL选择查询构造（WHERE CLAUSE）

> ID：10061893
> 
> 赞同：0
> 
> 时间：2012-04-08T09:47:53.463
> 
> 标签：sql, zend-framework

我正在尝试生成一个查询，该查询从用户表中选择所有名字的姓氏的任何组合与特定的搜索词匹配

```
$select = $select->where('last_name LIKE ?', '%'.$term.'%')->orWhere('first_name LIKE ?', '%'.$term.'%')
                        ->orWhere("CONCAT(first_name,' ', last_name) LIKE ?", '%'.$term.'%')
                        ->orWhere("CONCAT(last_name,' ', first_name) LIKE ?", '%'.$term.'%'); 
```

还有一个条件也必须满足，它在另一个 where 子句中指定

```
$select = $select->where("deleted = 0 AND scholar = 0"); 
```

生成以下 SQL 语句

```
SELECT `user`.* FROM `user` WHERE (last_name LIKE '%frank%') OR (first_name LIKE '%frank%') OR (CONCAT(first_name,' ', last_name) LIKE '%frank%') OR (CONCAT(last_name,' ', first_name) LIKE '%frank%') AND (deleted = 0 AND scholar = 0) ORDER BY `date_created` desc LIMIT 25 
```

这不会返回所需的结果，因为我得到了学者 = 1 的行；

我认为查询应该是

```
SELECT `user`.* FROM `user` WHERE ((last_name LIKE '%frank%') OR (first_name LIKE '%frank%') OR (CONCAT(first_name,' ', last_name) LIKE '%frank%') OR (CONCAT(last_name,' ', first_name) LIKE '%frank%')) AND  (deleted = 0 AND scholar = 0) ORDER BY `date_created` DESC LIMIT 25 
```

使用 $select 对象实现此目的的正确语法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T10:50:23.620

您可以使用 quoteInto 来准备您的条件，然后像这样使用它们：

```
 $first_name_cond = $db->quoteInto('first_name LIKE ?', '%'.$term.'%');
    $last_name_cond = $db->quoteInto('last_name LIKE ?', '%'.$term.'%');

    $concat_cond1 = $db->quoteInto("CONCAT(first_name,' ', last_name) LIKE ?", '%'.$term.'%');

    $concat_cond2 = $db->quoteInto("CONCAT(last_name,' ', first_name) LIKE ?", '%'.$term.'%');

    $select = $select->where($first_name_cond.' OR '.$last_name_cond.' OR '.

             $concat_cond1.' OR '.$concat_cond2)->where("deleted = 0 AND scholar = 0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:48:13.183

我假设*删除*和*学者*是单独的列。所以最简单的方法就是打破：

```
$select = $select->where("deleted = 0 AND scholar = 0"); 
```

分为两个语句，例如：

```
$select->where("deleted = ?", 0);
$select->where("scholar = ?", 0); 
```

此更改应生成如下 sql 字符串：

```
SELECT `user`.* FROM `user` WHERE (last_name LIKE '%frank%')
OR (first_name LIKE '%frank%') 
OR (CONCAT(first_name,' ', last_name) LIKE '%frank%') 
OR (CONCAT(last_name,' ', first_name) LIKE '%frank%') 
AND deleted = 0 AND scholar = 0 ORDER BY `date_created` desc LIMIT 25 
```

也去掉多余的`$select =`。您的整个选择应该看起来像：

```
//first line initializes the select object
//The select object will handle most quoting needs for you

$select = $this->select();

//I like to add expressions this way just to keep things easy to read and easy to edit
//you can string multiple statements together, but I find that harder to edit.

$select->where('last_name LIKE ?', '%'.$term.'%');
$select->orWhere('first_name LIKE ?', '%'.$term.'%');
$select->orWhere("CONCAT(first_name,' ', last_name) LIKE ?", '%'.$term.'%');
$select->orWhere("CONCAT(last_name,' ', first_name) LIKE ?", '%'.$term.'%');
$select->where("deleted = ?", 0);
$select->where("scholar = ?", 0);
$select->order('date_created DESC');
$select->limit(25); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T12:27:57.907

```
$user = new Application_Model_DbTable_User();
            // User List

$uname=$_POST['uname'];

echo $query = $user->select()->where('firstname LIKE ?', $uname.'%')->ORwhere('lastname LIKE ?', $_POST['lname'].'%')->ORwhere('emailid LIKE ?', $_POST['email'].'%');

$userlist = $user->fetchAll($query); 
```

# c# - 在页面之间传递变量并在asp.net中基于它获取结果

> ID：10061900
> 
> 赞同：0
> 
> 时间：2012-04-08T09:48:30.003
> 
> 标签：c#, javascript, asp.net, session

上一页

```
test.Controls.Add(GetButton(thisReader["session_id"].ToString(), "Join Session"));

 protected void Button_Click(object sender, CommandEventArgs e)
        {
            Response.Redirect("EnterSession.aspx?session=" + e.CommandArgument.ToString());
        } 
```

在下一页 EnterSession.aspx

我想使用来从基于 ms sql 数据库的`session_id`返回结果。然后我想获取对应的值并使用这个 JS 方法调用该值：`session_name``session_id``session_name``session_id`

```
document.getElementById('session_name').value). 
```

一些想法如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:00:42.153

我不完全确定您要实现的目标（例如，id 为“session_name”的元素是什么/在哪里？），但我认为您需要在 EnterSession.aspx 页面后面的代码中使用以下内容：

```
protected string _SessionName = null;
public string SessionName
{
    get
    {
        if (null == _SessionName)
        {
            using (var connection = new SqlConnection("connString"))
            {
                connection.Open();
                using (var command = new SqlCommand(" SELECT session_name FROM Sessions WHERE session_id = @SessionId", connection))
                {
                    command.Parameters.Add("@SessionId", SqlDbType.Int);
                    command.Parameters["@SessionId"].Value = Convert.ToInt32(Request.QueryString["session"]);

                    using (var reader = command.ExecuteReader())
                    {
                        if (reader.Read())
                        {
                            _SessionName = reader.GetString(0);
                        }
                        else
                        {
                            throw new ArgumentException("Invalid session id");
                        }
                    }
                }
            }
        }
        return _SessionName;
    }
    } 
```

然后在 EnterSession.aspx 页面的标记中，您将需要如下内容：

```
<input type="hidden" id="session_name" />
<script type="text/javascript">
    document.getElementById('session_name').value = '<%= this.SessionName %>';
</script> 
```

# cocoa - 使用脚本桥解释 cocoa 中的邮件正文

> ID：10061901
> 
> 赞同：0
> 
> 时间：2012-04-08T09:48:35.063
> 
> 标签：cocoa, applescript, osx-lion, scripting-bridge, apple-mail

当使用 Scripting Bridge 访问 Mail 应用程序时，可以轻松检索 MailMessage 类型的电子邮件。

然而，访问邮件的内容是另一回事。正文存储在 MailRichText 类型的内容属性中，我不知道如何恢复 NSString 或 NSAttributedString 或其他中的整个文本。似乎也没有任何关于此的文档（或者我错过了它们）。

那么任何人都可以帮助我吗？似乎内容被分成段落和单词等，但我看不出如何从这一切中得到邮件的一个单词？

一旦您开始在该课程中进行挖掘，似乎就没有尽头

例子：

```
MailRichText * content = message.content;

[[[[[[[[content words] lastObject] characters] lastObject] attributeRuns] lastObject] words] lastObject]  etc.. etc.. etc.. 
```

甚至没有1个字符！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:00:25.527

好吧，看来我终于找到了：

```
MailRichText * content = message.content;
id result = [content get];
NSLog(@"%@",result); 
```

打印邮件的正文。

# http - WebSocket 流量编码 (GZip)

> ID：10061903
> 
> 赞同：6
> 
> 时间：2012-04-08T09:48:52.397
> 
> 标签：http, websocket, gzip

StackOverflow 在所有页面上都使用 GZip 编码；他们的 websocket 流量似乎也是如此，因为它似乎完全被混淆了。

![在此处输入图像描述](../Images/261ab8d860d051f9af0668f312bd0b34.png)

他们将如何/使用什么来实现这一目标；相反，由于我的 websocket 服务器托管在没有 IIS 等的独立服务器上，我需要做些什么来实现相同的目标？

还值得注意的`http compression`是，他们的 websocket 连接请求也没有设置。

* * *

完整日志截图：http: [//i44.tinypic.com/19s4yr.jpg](http://i44.tinypic.com/19s4yr.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T12:15:57.523

根据 RFC6455，必须屏蔽从客户端到服务器的 WebSocket 有效负载，不得屏蔽服务器到客户端。屏蔽是通过 32 位掩码的 XORring 有效负载完成的。您在日志中看到的值。

烹饪中有一个 WS 扩展，它提供基于帧的压缩（放气）。这与掩蔽无关。每帧压缩有效的有效负载压缩有效负载，然后屏蔽有效负载（客户端到服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:37:45.223

我认为这里没有任何 gzipping。看起来 fiddler 已经开始添加对 websockets 的支持，但它仍在进行中。

日志显示一个连接
......然后是 12 个字节的第一条消息（461287-inbox。初始字节 81 8C 显示一个新的、完整的文本帧，带有 4 个字节的掩码和 12 个字节的数据。Fiddler 正确解码了这个。）
。 ..然后是 19 字节的第二条消息（流中的字节 81 93 - 19 字节 - 显示具有 4 字节掩码和 19 字节数据的新的、完整的文本帧）
...然后是 19 字节的第三条消息（后面的字节 81 93 - 大约 44 个字节进入流 - 显示一个新的、完整的、带有 4 字节掩码和 19 字节数据的文本帧）

# python - 如何在共享主机上部署 Django？

> ID：10061904
> 
> 赞同：0
> 
> 时间：2012-04-08T09:48:54.977
> 
> 标签：python, django, share, host

我将项目上传到共享主机帐户，并且 .htaccess：

```
AddHandler fastcgi-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /yuanzhe/mysite/mysite/mysite2.fcgi/$1 [QSA,L] 
```

但是当我访问[http://youdishou.com/hello时发现 404](http://youdishou.com/hello)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T02:54:55.280

第二个参数`RewriteRule`应该是一个 URL：

```
RewriteRule ^(.*)$ /mysite2.fcgi/$1 [QSA,L] 
```

无论如何，请访问[http://youdishou.com/mysite2.fcgi](http://youdishou.com/mysite2.fcgi)

看起来您的托管服务提供商根本不支持 fcgi。所以最好联系托管支持以了解是否有办法在那里启动 Django。许多提供者根本不支持 Django。

# php - 在哪里转义字符串以防止mysql注入？

> ID：10061907
> 
> 赞同：1
> 
> 时间：2012-04-08T09:49:07.603
> 
> 标签：php, mysql

我想知道在此代码中的何处添加`$stmt ->real_escape_string($password);`以防止 mysql 注入：

```
if ($stmt = $this->connect->prepare($sql)) {
  $stmt->bind_param('ss', $username, $password);
  $stmt->execute();
} 
```

是在prepare语句之后还是之前，因为我已经读过在转义之前我必须先有一个connect语句，所以我的猜测是在prepare语句之后，对吗？

关于mysql注入我还应该知道什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T10:05:34.797

你没有。

准备好的语句所做的部分工作是为您转义数据。因此，如果您将其绑定为参数，则无需转义任何内容。事实上，如果你确实添加了它，你会在奇怪的地方看到反斜杠等。

您唯一需要使用`real_escape_string`, 的情况是当您将变量作为值直接插入到 SQL 字符串中时。如果有人这样做，他们可能想要仔细检查他们对准备好的陈述的全部理解。:)

# c# - 将 WPF 应用程序复制到另一台计算机时出现 System.Windows.Markup.XamlParseException

> ID：10061910
> 
> 赞同：3
> 
> 时间：2012-04-08T09:49:36.740
> 
> 标签：c#, wpf, xaml, exception, bitmap

我有一个 WPF 项目，可以在我的计算机上正常运行。但是，当我复制到另一台计算机或虚拟机时，它会崩溃并出现以下错误：

```
System.Windows.Markup.XamlParseException: 'Initialization of 'System.Windows.Media.Imaging.BitmapImage' threw an exception.' Line number '38' and line position '97'. ---> System.Net.WebException: The device is not ready.
 ---> System.Net.WebException: The device is not ready.
 ---> System.IO.IOException: The device is not ready.

   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync)
   at System.Net.FileWebStream..ctor(FileWebRequest request, String path, FileMode mode, FileAccess access, FileShare sharing, Int32 length, Boolean async)
   at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)
   --- End of inner exception stack trace ---
   at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)
   at System.Net.FileWebRequest.GetResponseCallback(Object state)
   --- End of inner exception stack trace ---
   at System.Net.FileWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Net.FileWebRequest.GetResponse()
   at MS.Internal.WpfWebRequestHelper.GetResponse(WebRequest request)
   at System.Windows.Media.Imaging.BitmapDecoder.SetupDecoderFromUriOrStream(Uri uri, Stream stream, BitmapCacheOption cacheOption, Guid& clsId, Boolean& isOriginalWritable, Stream& uriStream, UnmanagedMemoryStream& unmanagedMemoryStream, SafeFileHandle& safeFilehandle)
   at System.Windows.Media.Imaging.BitmapDecoder.CreateFromUriOrStream(Uri baseUri, Uri uri, Stream stream, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption, RequestCachePolicy uriCachePolicy, Boolean insertInDecoderCache)
   at System.Windows.Media.Imaging.BitmapImage.FinalizeCreation()
   at System.Windows.Media.Imaging.BitmapImage.EndInit()
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.InitializationGuard(XamlType xamlType, Object obj, Boolean begin)
   --- End of inner exception stack trace ---
   at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
   at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
   at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
   at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
   at System.Windows.Application.LoadBamlStreamWithSyncInfo(Stream stream, ParserContext pc)
   at System.Windows.Application.LoadComponent(Uri resourceLocator, Boolean bSkipJournaledProperties)
   at System.Windows.Application.DoStartup()
   at System.Windows.Application.<.ctor>b__1(Object unused)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

图像作为全局资源嵌入到项目文件中。

有什么建议可能导致这种情况吗？

更新：我已将问题本地化：当我使用以下代码时

```
 <Image Margin="148,80,144,114">
        <Image.Source>
            <ImageSource>hexagon4.png</ImageSource>
        </Image.Source>
    </Image> 
```

应用程序传输良好。

当我使用

```
<Image Margin="148,80,144,114" Source="{DynamicResource myimage}"/> 
```

转移后应用程序崩溃

这是重现错误的项目：[下载](http://www.iathao.com/tmp/leartWPF.zip)

# architecture - 实践中的应用程序架构 - Bob 大叔

> ID：10061913
> 
> 赞同：3
> 
> 时间：2012-04-08T09:50:16.757
> 
> 标签：architecture, software-design

根据鲍勃叔叔/[来源](http://www.youtube.com/watch?feature=player_detailpage&v=WpkDN78P884#t=1672s)/，每个用户故事都应该有分离的“集成者/控制器”。听起来不错，因为班级很小并且只做一件事。

但在现实世界中，我没有看到以这种方式组织的建筑。如果有例如 AccountController，它总是包含与 Account 相关的所有方法。在鲍勃叔叔的“方式”中，这应该是这样设计的：

```
+Controllers
---+Account
------+DepositMoneyIntoAccount
------+WithdrawalMoneyFromAccount
------+TransferMoneyToAccount 
```

或者我误解了鲍勃叔叔？但如果没有，你们中是否有人看到以这种方式组织的建筑？它在现实世界中实用吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:16:29.913

它当然是实用的，并且是大型复杂系统的绝佳工具。我将实体/边界/交互器（代替控制器以避免与流行的 Web 界面混淆）放在顶层目录中，并将整个通信系统放在子目录中（例如 z_rails、z_sinatra 等）。以 Rack 为例，使用各种通信框架交付 Web 解决方案非常简单，而且所需的额外工作最少。例如，查看 github.com/wizardwerdna/avdi 和 github.com/wizardwerdna/bobbit 以了解这些方面的初步实验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:17:21.793

你是对的，这就是他希望项目的样子。

记住他的演讲“[架构：失去的岁月](http://www.youtube.com/watch?v=WpkDN78P884)”，架构应该描述它的意图（还有什么比用例更好的呢？）。

一开始我也有点困惑，但如果我们考虑一下 BDD，其哲学就是要确保我们制作可理解的软件。

我看了几次视频，我可能会再看一次，因为它是一个新概念，需要学习。对我来说，最重要且更具挑战性的是为其他模块创建插件，他谈到了一个请求和响应模型，以保持前端和数据库等周围层完全独立于软件。

这样做的最终目标是我们的软件可以轻松替换任何插件，例如数据库或 UI。

我还想提一件事，我想你可能感兴趣。在最后的[这次采访](http://www.youtube.com/watch?v=OIHvp7WzuH0)中，他透露他的下一本书将是关于我们现在正在讨论的这种新方法的全部内容。

**更新**

我在评论中看到您正在谈论调用具有边界，交互器等名称的包......

这完全没问题，在他的书中，一些开发人员在某些情况下使用模式名称来命名类或包的[清洁代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)......这是正确的，因为这是开发人员应该熟悉的技术术语。就像通过读取类的名称或包知道类是构建器或工厂一样，您可以知道交互器或边界是什么。根据干净的代码，这是正确的。

# java - Android 接收电子邮件（事件）

> ID：10061921
> 
> 赞同：1
> 
> 时间：2012-04-08T09:51:51.060
> 
> 标签：java, android, email

我一直在寻找很短的时间，但除了如何发送电子邮件的示例之外什么都没有提出，Android 是否有一个内置的方法来接收电子邮件以及该电子邮件背后的信息（主题、收件人、正文等。 )

我所有的谷歌搜索和问题（主要在 IRC 中）都让我无处可去。

此外，如果 Android 不提供这样做的方法，有人会介意建议一个好的库吗？这是一个简短的项目，我不想重新发明轮子。

感谢任何和所有的答案，谢谢！

# javascript - 为动态设置 MaxLength

> ID：10061928
> 
> 赞同：0
> 
> 时间：2012-04-08T09:52:26.300
> 
> 标签：javascript, jquery

我有允许显示 Bing 搜索结果的脚本。我可以像这样调用搜索结果 url：

```
'<p class="width"><a  href="' , imgResult.Url , '">',imgResult.DisplayUrl,'</a></p>' , 
```

问题是，有时 url 是长这样的“草率”：

```
http://www.art-wallpaper.net/Game-Wallpapers/Assassins-Creed-Brotherhood/imagepages/image3.htm 
```

我想“隐藏”或“删除”网址的`http://www.`开头 （ ?`/Game...``art-wallpaper.net`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:58:49.340

也许像这样的 JavaScript 函数。

```
function shorten(str)
{
   // Get rid of the protocol
   str = str.replace("http://", "");
   str = str.replace("https://", "");

   // Return the domain-part of the URL
   return str.split("/")[0];
} 
```

在打印之前将您的 URL 传递给 JavaScript 函数。

**未经测试。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:59:17.313

```
url="http://www.art-wallpaper.net/Game-Wallpapers/Assassins-Creed-Brotherhood/imagepages/image3.htm";
    pathArray =url .split( '/' );
    host = pathArray[2];
    alert(host);// alert "www.art-wallpaper.net" 
```

和，

```
 pathArray = "http://www.art-wallpaper.net/Game-Wallpapers/Assassins-Creed-Brotherhood/imagepages/image3.htm".split( '/' );
host = pathArray[2].substring(4);
alert(host);// alert "art-wallpaper.net" 
```

​</p>

# c# - 为 SQL 表和表中每一行生成 DTO 实例的 C# DTO 类的工具

> ID：10061932
> 
> 赞同：1
> 
> 时间：2012-04-08T09:53:08.610
> 
> 标签：c#, sql-server, code-generation, dto

我正在寻找一种工具或技术，它允许我指向 SQL Server 数据库中的一个表，为该表生成一个 DTO 类，然后为该表中的每一行生成 DTO 类实例。

给定 SQL Server 中的表

```
CREATE TABLE 
[dbo].[Tickets](
[TicketID] [int] IDENTITY(1,1) NOT NULL,
[TicketName] [varchar](50) NOT NULL,
CONSTRAINT [PK_Tickets] PRIMARY KEY CLUSTERED ([TicketID] ASC) 
```

填充数据：

```
TicketID   TicketName
1          Green
2          Blue 
```

将生成一个名为“Tickets”的类，其属性：

```
 public int TicketID {get;set;}
 public string TicketName {get;set;} 
```

然后是这样的：

```
public List<Tickets> LoadDataIntoListOfTickets()
{
     List<Tickets> theList = new List<Tickets>;
     theList.Add(new Ticket(){TicketID = 1, TicketName = "Green"});
     theList.Add(new Ticket(){TicketID = 2, TicketName = "Blue"});
     return theList;  
} 
```

我不想生成 INSERT 语句以发送到 SQL Server。我想为数据创建 DTO 类和实例。

澄清：我正在寻找 DTO 类的代码生成以及数据中每一行的 DTO 实例的源代码，因为它存在于特定时间点。我熟悉可以创建类的各种 ORM。我正在寻找的是会生成 LoadDataIntoListOfTickets() 列表的东西，其中包含数据库中每个 ROW 的一行源代码。（希望这可以说清楚。）

澄清 #2：当用户为应用程序创建新数据库时，这将用于替换文本文件中用于初始化表的 SQL INSERT 语句。拥有一个带有 SQL INSERT 语句的文本文件使我能够使用传统的版本控制工具来管理我们的数据库初始化过程。它工作得非常好，但它不像在 DTO 实例中存储数据那样具有人类可读性（空白/对齐）或可重用性。序列化为 XML 会降低可读性。二进制序列化（本质上）会使其不可读，并且几乎不可能与以前的版本进行有意义的比较/合并。

有谁知道可以做到这一点的工具或库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:17:43.833

如果您*真正*追求的是一种使新数据库从不包含任何内容到包含数据库、模式和初始数据集的方法，那么我强烈建议您研究数据库迁移工具。它们将帮助您在多个安装/环境中保持可读性和同步性。

在这里你可以找到一些列出的： [https ://stackoverflow.com/questions/8033/database-migration-library-for-net](https://stackoverflow.com/questions/8033/database-migration-library-for-net)

我个人更喜欢[https://github.com/dradovic/MigSharp](https://github.com/dradovic/MigSharp)

# ruby-on-rails - 从控制器操作调用 /lib 中的类

> ID：10061937
> 
> 赞同：8
> 
> 时间：2012-04-08T09:53:59.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嗨，我有点坚持这一点。我要解决的是我在 lib/ 目录中有一个名为 ticket_pdf.rb 的文件，我计划为我的应用程序生成一些发票 PDF。我想调用这个类的一个函数来从我的控制器操作中生成 PDF。

ticket_pdf.rb 看起来像这样

```
class TicketPDF
  def generate_pdf (purchase)
    puts "Ticket ID = #{purchase.ID}"
  end
end 
```

在控制器中，我执行此操作。

```
class Customer::MyController < ApplicationController
  require 'ticket_pdf'

  def show
    ticket = TicketPDF.new
  end
end 
```

当我尝试创建这样的对象时，它会给我一个像这样的 500 错误。

```
uninitialized constant Customer::MyController::TicketPDF 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T10:00:59.453

尝试

```
ticket = ::TicketPDF.new 
```

您已经在顶级命名空间中创建了 TicketPDF。

# iphone - 应用程序未使用数据库路径 - 逻辑问题

> ID：10061941
> 
> 赞同：0
> 
> 时间：2012-04-08T09:54:26.757
> 
> 标签：iphone, objective-c, fmdb

我已经创建了一个`sqlite`数据库。并将其拖到我的项目资源文件夹中。

在我的项目中，我正在访问一个 sqlite 文件

```
/Users/user12/Library/Application Support/iPhone Simulator/4.3.2/Applications/1F219005-A4ED-4794-81FC-65EEF8D243EF/Documents/db.sqlite 
```

我没有使用添加到项目中的 sqlite 文件。我的项目正在从上述位置访问数据库文件。

所以，现在当我尝试从不同的 Mac 启动我的应用程序时，我无法启动该应用程序，因为在该路径中找不到数据库。那么我该如何解决呢？

注意：我用过`FMDB`.

我的最终目标是将此应用程序提供给我的客户，因为他将在他的 iPhone 上运行该应用程序，他应该能够毫无问题地访问 sqlite 文件。那么我应该做些什么改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:39:51.583

当然，其他机器上的 xcode 会有不同的路径。尝试将sqlite文件放在新机器上xcode创建的app路径下。

编辑：按照您在评论中所说的，我建议[创建一个临时证书](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)。然后使用[xcode 创建您的存档](http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/)。
但是你的文件的路径`sqlite`应该在你的主包中。
ps：您需要`UDID`客户端 iPhone 的 s 才能将设备添加到门户。

# database - 对于可能以不同语言使用的 PostgreSQL 数据库，正确的排序规则是什么？

> ID：10061946
> 
> 赞同：3
> 
> 时间：2012-04-08T09:55:06.720
> 
> 标签：database, postgresql, character-encoding, locale, collation

我有一个由以下人员创建的数据库：

```
-- Database: adatabase

-- DROP DATABASE adatabase;

CREATE DATABASE adatabase
  WITH OWNER = adatabaseowner
       ENCODING = 'SQL_ASCII'
       TABLESPACE = pg_default
       LC_COLLATE = 'C'
       LC_CTYPE = 'C'
       CONNECTION LIMIT = -1; 
```

这些似乎是我的 PostgreSQL 8.4 安装中的默认设置，它似乎基于我的 Ubuntu 安装设置为的默认语言环境。

如果我将来想让系统多语言，我应该使用哪些适当的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:21:34.267

您至少应该使用 UTF-8 进行编码。使用 SQL_ASCII 不能存储非英语字符（例如法语重音字符、德语变音符号）。

`ORDER BY ... COLLATE ...`如果您升级到 9.1，则可以在查询 ( ) 中或在每列的基础上“即时”定义排序规则。

# iphone - Xcode xml解析问题

> ID：10061949
> 
> 赞同：1
> 
> 时间：2012-04-08T09:55:43.990
> 
> 标签：iphone, xml, xcode, xcode4, xml-parsing

我正在 Xcode 中创建一个解析 xml 的应用程序，但我在解析此代码时遇到问题

```
<description>
<![CDATA[
<object type="application/x-shockwave-flash" data="http://www.youtube.com/v/Sg8z_On_Jmc?fs=1" width="580" height="25"> <param name="movie" value="http://www.youtube.com/v/Sg8z_On_Jmc?fs=1" /> <param name="allowFullScreen" value="true" /> </object>
]]>
</description> 
```

如何获取数据或值中的 URL？

谢谢。

我的源代码：.M

//didStartElement 在开头 then;

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
{

    if (![self currentStringValueTitle]) {

        [self setCurrentStringValueTitle:[[NSMutableString alloc] initWithCapacity:50]];

    }

    if (![self currentStringValueImage]) {

        [self setCurrentStringValueImage:[[NSMutableString alloc] initWithCapacity:50]];

    }

    if (![self currentStringValueDescription]) {

        [self setCurrentStringValueDescription:[[NSMutableString alloc] initWithCapacity:50]];

    }

    [[self currentStringValueTitle] appendString:string];
    [[self currentStringValueDescription] appendString:string];
    [[self currentStringValueImage] appendString:string];

    NSLog(@"Başlık: %@", [self currentStringValueTitle]);
    NSLog(@"Detay: %@", [self currentStringValueDescription]);

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
{

   if ( [elementName isEqualToString:@"title"] ) {

        [[self titleArray] addObject:[self currentStringValueTitle]];

    }
   if ( [elementName isEqualToString:@"pubDate"] ) {

        [[self descriptionArray] addObject:[self currentStringValueDescription]];

    }

    if ( [elementName isEqualToString:@"description"] ) {

        [[self imageArray] addObject:[self currentStringValueImage]];
    } 

    [self setCurrentStringValueTitle:nil]; 
    [self setCurrentStringValueDescription:nil];
    [self setCurrentStringValueImage:nil]; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:46:58.153

使用[CDATA](http://www.w3schools.com/xml/xml_cdata.asp)背后的想法是，它里面的任何内容都将被解析器忽略......但幸运的是 NSXMLParser 有一个替代方案......

```
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    NSString *someString = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
} 
```

现在 someString 是你的另一个 xml 字符串，你可以使用另一个 NSXMLParser 实例来解析（这是一个 XML）......希望这会有所帮助。

# javascript - 如何在 Jquery 中获取选定选项的值

> ID：10061950
> 
> 赞同：-1
> 
> 时间：2012-04-08T09:56:15.410
> 
> 标签：javascript, jquery, html

我有这段代码（PHP 为我生成的示例）...

```
<select id="outsideBlue3">
<option id="bgImg" value="4f6e2288e3ddsa.zip">4f6e216857a0d.zip</option>
<option id="bgImg" value="4f6e2288e22dda.zip">4f6e2188a39a2.zip</option>
<option id="bgImg" value="4f6e2288e3dda.zip">access-denied.php.zip</option>
<option id="bgImg" value="4f80b747ab81c.jpg">UntitledDocument.jpg</option>
</select> 
```

选项标签内的字符串是上传文件的名称。该值是文件在服务器上的名称。

我尝试过使用`$("#outsideBlue3").val()`并且尝试过`$("#outsideBlue3").attr("value")`，但它什么也没返回。当我删除值标签时，我尝试的第一个工作有效，但随后我在选项标签中得到了字符串。我想要值标签的内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:00:35.727

这应该这样做

```
$('#outsideBlue3 option:selected').val() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:02:24.463

```
//getSelectedOption
function getSelectedOptions(e) {
    var options = [];
    for (var i = 0; i < e.options.length; i++) {
        if (e.options[i].selected == true) {
            options[options.length] = e.options[i];
        }
    }
    return options;
}

//if your select tag is a single select one  [next line return option selected]
getSelectedOptions(document.getElementById('outsideBlue3'))[0] 

//if your select tag is a single select one  [next line return value selected]
getSelectedOptions(document.getElementById('outsideBlue3'))[0].value

//if your select tag is a single select one  [next line return text selected]
getSelectedOptions(document.getElementById('outsideBlue3'))[0].text 
```

# python - Celery 截断日志消息

> ID：10061953
> 
> 赞同：7
> 
> 时间：2012-04-08T09:57:47.140
> 
> 标签：python, logging, celery, django-celery

我的 Celery 日志始终会截断（不是很长）长错误消息，如下所示：

```
[2012-04-08 04:53:10,084: INFO/MainProcess] Task mainapp.tasks.async_submitter[2df2fe93-156b-4944-9ecf-c55ba53e8aaa] succeeded in 0.190640926361s: 'An error occurred during the submission of... 
```

不用说，这消除了一半的日志记录目的。我怎样才能阻止这种情况发生？

我在linux上用django-celery（通过django-supervisor和supervisor）运行celery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-13T09:43:24.430

不幸的是，默认情况下，Celery 会截断消息。

从版本**3.1.7**到**3.1.9**似乎可以通过修补模块的全局来调整此限制：

```
import celery.worker.job

celery.worker.job.RESULT_MAXLEN = 1048576  # 1 Mib 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T09:33:32.613

设计返回的任务应该用于代码中的进一步处理，这就是为什么开发人员可能会自由地截断日志，也因为返回可能是相当大的详细结果，并且可能使日志信息输出不可读。当然，我可能是错的，但自从我与 Celery 合作以来，我总是发现这个逻辑是正确的，并且从未打扰过我。在您的情况下，我认为在返回之前使用 logger.info 记录消息是有意义的（不会被截断），并且如果您返回的消息实际上不需要进一步处理，而仅用于记录目的，那就不要返回任何值。

# batch-file - 如何更改通过运行批处理脚本创建的新 cmd 窗口的颜色（连同自定义提示）

> ID：10061961
> 
> 赞同：4
> 
> 时间：2012-04-08T09:59:20.870
> 
> 标签：batch-file, cmd

我已经知道如何从具有自定义颜色的批处理脚本创建一个新的 cmd 窗口，以及一个具有自定义提示的新 cmd 窗口。但是我想找到一种将两者结合在一起的方法......

这是我在批处理文件中创建带有自定义提示的新 cmd 窗口的内容（在这种情况下，自定义提示是 windows 版本的详细信息）：

```
start cmd /k "prompt $v" 
```

...这就是我正在做的创建具有自定义颜色的新 cmd 窗口：

```
start cmd /k "color 42" 
```

我尝试了以下方法将两者结合起来，但它们都不起作用：

```
start cmd /k "color 42" /k "prompt $v"

start cmd /k"color 42" "prompt $v" 
```

如果有人能帮助我指出正确的方向，那就太棒了。一直在通过谷歌和其他论坛进行搜索，但在花了一个多小时搜索无果后，我想我会在这里问一个问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T11:34:34.227

您唯一缺少的是将多个命令连接到一行的运算符：`&`.

```
start cmd /k "color 42&prompt $v" 
```

此运算符适用于所有情况，而不仅仅是在 CMD 命令的命令字符串中。有一些具有不同行为的连接运算符：

*   `&`- 总是执行下一个命令
*   `&&`- 只有在前一个命令成功时才执行下一个命令 (ERRORLEVEL=0)
*   `||`- 仅在前一个命令失败时执行下一个命令 (ERRORLEVEL<>0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:04:27.950

尝试：

```
start cmd /k"color 42; prompt $v" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-12T23:06:57.903

我在这里聚会迟到了，但请注意，`cmd /t:fg`它将[像`color`命令](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/cmd)一样设置颜色，所以你也可以运行

```
start cmd /t:42 /k "prompt $v" 
```

# android - ICS 上的流式音频问题

> ID：10061962
> 
> 赞同：4
> 
> 时间：2012-04-08T09:59:27.370
> 
> 标签：android, audio, streaming, media-player, android-4.0-ice-cream-sandwich

我正在使用音频流在设备上播放 MP3 文件，并且在 ICS 出现之前没有任何问题。然后我认为这可能是格式支持问题，所以我尝试了使用以下代码的 OGG 文件：

```
MediaPlayer mmp= MediaPlayer.create(context,
                      Uri.parse("http://vorbis.com/music/Epoq-Lepidoptera.ogg"));
mmp.start(); 
```

这适用于早期的操作系统版本，但在 ICS 上失败。我也尝试过`setDataSource(this, uri)`使用 onPreparesListener atc 创建媒体播放器，但仍然出现相同的错误：

```
04-08 09:52:12.459: D/MediaPlayer(541): 无法在客户端打开文件，正在尝试服务器端
04-08 09:52:12.489: E/MediaPlayer(541): 无法创建媒体播放器
04-08 09:52:12.529：D/MediaPlayer（541）：创建失败：
04-08 09:52:12.529: D/MediaPlayer(541): java.io.IOException: setDataSource failed.: status=0x80000000
04-08 09:52:12.529：D/MediaPlayer（541）：在 android.media.MediaPlayer._setDataSource（本机方法）
04-08 09:52:12.529: D/MediaPlayer(541): 在 android.media.MediaPlayer.setDataSource(MediaPlayer.java:844)
04-08 09:52:12.529: D/MediaPlayer(541): 在 android.media.MediaPlayer.setDataSource(MediaPlayer.java:806)
04-08 09:52:12.529: D/MediaPlayer(541): 在 android.media.MediaPlayer.setDataSource(MediaPlayer.java:761)
04-08 09:52:12.529: D/MediaPlayer(541): 在 android.media.MediaPlayer.create(MediaPlayer.java:695)
04-08 09:52:12.529: D/MediaPlayer(541): 在 android.media.MediaPlayer.create(MediaPlayer.java:676)

```

所以我的问题是如何在 ICS 上使用 MediaPlayer 流式传输音频文件？有没有人有工作代码，或者可能必须有一些特定的文件格式和编码？但它很糟糕，新的操作系统版本不能向后兼容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:07:14.083

我也遇到了同样的问题，所以我换了档，而是这样做了，这对我来说效果很好。但是，您必须将声音文件保存在 res/assets 文件夹中。

```
 try {
            AssetFileDescriptor afd = getAssets().openFd("mysound.mp3");
            mPlayer = new MediaPlayer();
            mPlayer.setDataSource(afd.getFileDescriptor(),afd.getStartOffset(),afd.getLength());
            mPlayer.prepare();
            mPlayer.start();
        } 
        catch (IllegalStateException e) {
            Log.d(TAG, "IllegalStateException: " + e.getMessage());
        }
        catch (IOException e) {
            Log.d(TAG, "IOException: " + e.getMessage());
        }
        catch (IllegalArgumentException e) {
            Log.d(TAG, "IllegalArgumentException: " + e.getMessage());
        }
        catch (SecurityException e) {
            Log.d(TAG, "SecurityException: " + e.getMessage());
        } 
```

然后你会以通常的方式释放资源：

```
 if(mPlayer != null) {
            if(mPlayer.isPlaying()) mPlayer.stop();
            mPlayer.release();
            mPlayer = null;
        } 
```

希望这对你也有效。

# java - 如何使用 DisplayTag 使用表格数据

> ID：10061963
> 
> 赞同：0
> 
> 时间：2012-04-08T10:00:01.337
> 
> 标签：java, struts, struts-1, displaytag

我是 struts 的新手。我使用 Display 标签创建了表，它使用 arraylist 填充动作类中的数据。我想使用上一列数据（显示：列），并在上一列值的基础上填充下一列数据。但我不知道如何在显示列中获取上一列值。

```
<display:table name="sessionScope.studentList" export="true" requestURI="StudentDisplay">   
    <display:column property="studentFullName" title="Name"></display:column>
    <display:column property="studentMobile" title="Mobile No"></display:column>
    <display:column property="studentResidence" title="Residence No"></display:column> </display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:28:17.883

您可以使用 paramID 访问，并且基于该 paramId 您可以使用 jquery 进行任何修改

# java - 如何访问 JTable 中每个单元格的数据

> ID：10061964
> 
> 赞同：2
> 
> 时间：2012-04-08T10:00:02.053
> 
> 标签：java, swing, jtable

我使用了一个教程来了解如何实现 JTable，但我不知道如何准确地访问每个单元格的数据以提取用户放入这些单元格的数据。

该表有*2*列和*N*行

第一列有一个*字符串*，第二列有一个*int*

我使用的教程是[这个](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T10:32:07.280

每个`JTable`都有与之相关的数据模型。用户可以将数据添加到这个数据模型中（例如通过调用`javax.swing.table.TableModel.setValueAt(Object, int, int)`方法），`JTable`然后显示它们。为了处理来自`JTable`一个的数据，可以使用以下方法：

```
 JTable t = new JTable(/* set some table-model that will contain the data */);
...
/* get some table-model that will contain the data */
TableModel tm = t.getModel();
for (int i = 0; i < tm.getRowCount(); i++) {
  for (int j = 0; j < tm.getColumnCount(); j++) {
    Object o = tm.getValueAt(i, j);
    if (o instanceof Integer) {
      System.out.println((Integer)o);
    } else if (o instanceof String) {
      System.out.println((String)o);
    }
  }
} 

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T10:08:34.383

你必须看到“[监听数据变化](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange)”这一段

通常，您必须获取与表关联的模型并将其称为“getValueAt”方法。它返回与单元格关联的对象，因此您必须将其转换为字符串或整数。比如要获取第二列第三行的值，代码为：

> （整数）model.getValueAt(2,1)

# reverse-engineering - ollydbg 插件

> ID：10061970
> 
> 赞同：0
> 
> 时间：2012-04-08T10:00:32.757
> 
> 标签：reverse-engineering, ollydbg

我正在阅读 lena 的教程，现在我必须使用一些插件，但它似乎不起作用，（Lena 的第二个教程），我创建了一个“插件”文件夹并将文件复制到该目录，但它仍然无法正常工作，我在谷歌搜索了一个小时的答案，但没有找到任何解决方案。有人成功安装了那个插件吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:15:36.740

你使用 OllyDbg v1.10 吗？因为当前的 2.01 直到 alpha4 才支持插件，并且不向后兼容 1.10 的现有插件。

另外，您是否在 ollydbg 设置中设置了插件文件夹？查看选项/外观/目录标签页。

# pop3 - 包含名字和姓氏的电子邮件标题“发件人”，而不是发件人的电子邮件

> ID：10061973
> 
> 赞同：1
> 
> 时间：2012-04-08T10:01:02.227
> 
> 标签：pop3, zend-mail

我正在使用 zend 邮件组件从 pop3 服务器读取电子邮件。

我想知道谁收到了这封电子邮件，当我尝试 $message->from 时，我看到没有发件人电子邮件的“FirstName LastName”。

我做了 print_r($message->getHeaders()) 并且没有在这封电子邮件的任何标题中看到发件人的电子邮件。

我认为发件人电子邮件是必需的，并且始终必须设置。这里有什么问题吗？

是否可以使用“发件人”标题的电子邮件，只有名字/姓氏而没有电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:17:13.840

根据我的评论：

> 如果您`print_r()`是一个有效的`from`标题并且地址在尖括号中，您可能只能通过查看 HTML 源来查看它，因为尖括号和电子邮件地址可能会被浏览器视为（尽管无法识别）HTML 标记。

但是，如果将来有人遇到此问题（并且电子邮件地址未显示在 HTML 源中），请记住，发件人可能发送了没有`From:`地址的电子邮件，即使这在技术上是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T12:53:41.353

是的，这是完全可能的。每封电子邮件通常有 2 个“发件人”地址。99% 的时间，这些是相同的值，但它们可以不同。有在 SMTP 会话期间使用的 MAIL FROM 地址，它发出 MAIL FROM 命令。然后，在电子邮件标题中找到 FROM 地址（此 FROM 地址在 SMTP DATA 命令期间发送）。这就是您可以获取电子邮件欺骗的方式。

这样想（在蜗牛邮件的物理世界中）。您可以在信封外面有一个 FROM 地址（这相当于 MAIL FROM 命令）。这应该是发送消息的人。然后，您可以在信封内的信头上有一个不同的 FROM 值。这将是您在电子邮件标题中看到的 FROM 值。

这是一些没有 F​​ROM 地址的原始标头的示例

```
From: "Steve James"  
To: "John Doe" <you@yourcompany.com>  
Date: Fri, 24 Feb 2012 07:43:40 -0800  
Subject: Here is the progress report  

.... 
```

希望我没有把它弄得像泥巴一样清晰。

--

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T10:18:08.380

使用以下格式：

```
Firstname Lastname <vasya@poupkine.com> 
```

# objective-c - 小图标应用列表视图 osx

> ID：10061974
> 
> 赞同：2
> 
> 时间：2012-04-08T10:01:02.927
> 
> 标签：objective-c, macos, icons

在某些应用程序中，例如 Sparrow Mail，设置了两个不同的应用程序图标。停靠中使用的默认图标，在图标视图和封面流中。然后是第二个较小的列表视图、列视图和标题栏。如何将图标设置得更小？在 file.plist 中只有这个。谢谢。 ![在此处输入图像描述](../Images/1ad0a025a7f41aba8f19a3aa989b6d58.png)

![文件.plist](../Images/5c45d88139e67c0090c489428202a576.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T10:54:56.160

Xcode 包含 Icon Composer.app 应用程序，它允许您创建支持多种分辨率的 .icns（图标套件）文件，如下图所示：

![在此处输入图像描述](../Images/606d8a98a117c9390a8aa2488ffb89a2.png)

如上图所示，Get Info 面板的“代理”图标（在标题栏中）使用的是 16 x 16 的小图标，而下方图标使用的是较大的图标之一。如果您习惯于单一尺寸的方式`UIImage`，那么 an`NSImage`在 OS X 中的工作方式一开始可能会令人困惑。在 iOS 中， a`UIImage`表示单个位图图像，基本上是围绕 CoreGraphics 的包装器`CGImageRef`。OS X 中的An`NSImage`在更高级别上工作，因此与`UIImage`. An`NSImage`包含一个或多个特定大小`NSImageRep`的 s，它们更类似于 a `UIImage`。在您提供的屏幕截图中，窗口标题栏按钮的图像和`NSImageView`的图像都设置为`NSImage`. 但是，当要求该图像自行绘制时，该图像会`NSImageRep`根据请求的大小选择 2 个不同的 s。有关其工作原理的更多信息，请参阅[Cocoa 绘图指南：图像基础 - 如何选择图像表示](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaDrawingGuide/Images/Images.html#//apple_ref/doc/uid/TP40003290-CH208-BCIGEIFF)。

如果您使用的是一体式 Xcode.app 应用程序包，请启动 Xcode 并选择 Xcode > Open Developer Tool > Icon Composer。如果您使用的是具有多个文件夹的旧式 Xcode 工具，它将位于`<Developer Tools>/Applications/Utilities/Icon Composer.app`.

# ruby-on-rails - Rails 中的可打印内容

> ID：10061975
> 
> 赞同：-1
> 
> 时间：2012-04-08T10:01:02.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想创建一个需要有打印选项的应用程序。我想问一下在 Rails 中是否有处理这种情况的标准方法，或者它只是在询问打印时要提供的特定布局。是否有宝石或做这种事情的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:41:49.887

我过去使用过[WickedPDF gem](https://github.com/mileszs/wicked_pdf)并取得了很大的成功。它基于`wkhtmltopdf`并且我真正喜欢它的是 PDF 是基于标准 ERB（可能是 HAML）和 CSS 的视图模板生成的。

在我看来，这比使用模板标记/样式更好`prawn`，因为模板标记/样式可以用于 PDF 本身。

# mysql - MySQL 查询 0 行受影响

> ID：10061977
> 
> 赞同：0
> 
> 时间：2012-04-08T10:01:20.260
> 
> 标签：mysql, sql, phpmyadmin

简单来说，我尝试在 PhpMyAdmin 中这样做：

> 更新 wp_postmeta.meta_value = wp_posts.id 其中
> 
> wp_posts.post_name=articles.image
> 
> 和 wp_posts.post_type=附件
> 
> 和 wp_postmeta.meta_key=_thumbnail_id

通过这个 MySQL 查询：

```
update wp_postmeta m
join articles a on (m.post_id = a.id)
join wp_posts p on (m.post_id = p.ID)
set m.meta_value = p.ID
where p.post_name=a.image
AND a.image != NULL
AND p.post_type='attachment'
AND m.meta_key='_thumbnail_id' 
```

它的工作，但 0 行受影响！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:05:08.190

这个说法：

```
AND a.image != NULL 
```

总是评估为`unknown`。And`where`子句过滤掉不是`true`. 所以 a`where`过滤掉`unknown`和`false`。试试这个：

```
AND a.image is not null 
```

有关更多信息，请参阅[此维基百科文章](http://en.wikipedia.org/wiki/Three-valued_logic)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T10:15:20.940

使用带有 Andomar 答案的子查询。将连接与更新和删除语句一起使用并不好。

它应该是这样的

```
UPDATE wp_postmeta m SET m.meta_value = (SELECT p.ID FROM wp_posts p, articles a 
WHERE m.post_id=p.ID AND m.post_id = a.id AND a.image IS NOT NULL 
   AND p.post_type='attachment' AND p.post_name=a.image) 
WHERE m.meta_key='_thumbnail_id' 
```

**先备份！**我没有测试这个。

如果不起作用，请尝试执行选择查询（如果您可以选择它们）。如果它没有选择（并且可能不会），请检查与您的设计相对应的查询结构。

```
SELECT m.meta_value, (SELECT p.ID FROM wp_posts p, articles a 
WHERE m.post_id=p.ID AND m.post_id = a.id AND a.image IS NOT NULL 
   AND p.post_type='attachment' AND p.post_name=a.image)  AS pID
FROM wp_postmeta m
WHERE m.meta_key='_thumbnail_id' 
```

也尝试你的第一个查询

```
SELECT m.meta_value, p.ID AS pID FROM wp_postmeta m
INNER JOIN articles a on (m.post_id = a.id)
INNER JOIN wp_posts p on (m.post_id = p.ID)
WHERE p.post_name=a.image
AND a.image IS NOT NULL
AND p.post_type='attachment'
AND m.meta_key='_thumbnail_id' 
```

尝试使用/修改选择查询以找出问题。

# .htaccess - htaccess 带问号

> ID：10061978
> 
> 赞同：0
> 
> 时间：2012-04-08T10:01:36.657
> 
> 标签：.htaccess

我有网址

[http://www.domain.com/folder/?variable=1](http://www.domain.com/folder/?variable=1)

我想做一个 mod 重定向到 index.cfm，文件夹作为路径变量，变量作为第二个变量。前三行适用于我的网站，我在最后一点遇到问题

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.cfm?path=$1 [L]
RewriteRule (.*)\?(.*)$ /index.cfm?path=$1&$2 [L] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:16:31.483

您需要添加`QSA`（或`qsappend`）标志，如下所示：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.cfm?path=$1 [L,QSA] 
```

这将使 mod-rewrite 将任何原始查询字符串附加到子请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:57:48.070

我在重定向带有 a 的 URL 时遇到问题`?`。

网址是这样的：`/index/slug_with_questionmark?.html`

适合我的解决方案：

```
RewriteRule ^index/slug_with_questionmark(.*) http://yourdomain.com/newurl? [R=301,L] 
```

注意`?`第二个语句。这个欺骗了浏览器，所以它很好地重定向了它。

# ruby-on-rails - 用户和相关帖子

> ID：10061982
> 
> 赞同：0
> 
> 时间：2012-04-08T10:02:22.583
> 
> 标签：ruby-on-rails

我创建了一个类似推特的应用程序，朋友可以在其中发帖，但我希望在显示所有帖子的列表中包含创建帖子的人的姓名。

这是我的代码

```
class PostsController < ApplicationController
  def index
    @posts = Post.all(:order => "created_at DESC")

    respond_to do |format|
      format.html
    end
  end

  def create
    @post = Post.create(:message => params[:message])

    respond_to do |format|
      if @post.save
        format.html { redirect_to posts_path }
        format.js
      else
        flash[:notice] = "Message failed to save."
        format.html { redirect_to posts_path }
      end
    end
  end
end
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T10:05:39.577

当然，假设设置了“用户有很多帖子”关联，并且用户模型有一个“用户名”字段，您可以在视图中执行此操作：

```
<% @posts.each do |post| %>
  <%= post.user.username %>
<% end %> 
```

# android - 缺少 annotations.jar

> ID：10061986
> 
> 赞同：35
> 
> 时间：2012-04-08T10:02:38.683
> 
> 标签：android, annotations, revision

我正在尝试将我的 Android SDK 工具更新到 17 rev。我更新了 usign SDK Tools 但在 Properties/library ；![在此处输入图像描述](../Images/29ba45cfdcebbebd2b5135d7db15f797.png)

但事实上，在支持文件夹中已经有一个 annotations.jar。我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-06-27T07:22:29.160

所以，当我将 sdk 更新到 L 版本时，我遇到了同样的问题。但是在 SDK Manager 中更新 Extra 文件夹后，我没有找到 annotation.jar 文件。可能是新 SDK 版本的 Google 错误。所以我从旧的SDK文件夹（半年前的文件夹）中复制了annotation.jar文件

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-10T02:12:58.843

我有同样的问题。我去了 Eclipse 中的 SDK 管理器（Window --> Android SDK Manager）并安装了在 Extras 文件夹中找到的 Android 支持包。安装后错误消失了（至少在我的系统中）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-06-28T17:55:40.203

右键单击您的项目，在上下文菜单中选择属性，您将看到一个窗口。第二行是 Android - 点击它。您将看到已安装 SDK 的列表。检查任何具有 API 级别 16 或更高级别的 SDK。

annotationas.jar 嵌入在 16 API 级别及其之后的 SDK 中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-28T01:00:57.250

对我有用的是下载 annotations.jar 文件，然后根据错误将其添加到它应该在的位置。

可以在这里下载：http: [//mvnrepository.com/artifact/com.google.android/annotations/4.1.1.4](http://mvnrepository.com/artifact/com.google.android/annotations/4.1.1.4)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-13T10:38:29.643

更新 SDK 管理器中的所有包后，您可能还需要更新 Android 开发者工具包。*Eclipse* ->*帮助*->*检查更新*->*安装*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-11T10:45:04.040

我认为 Google 已将该 jar 文件的位置从`<SDK_DIR>/extras/android/support/annotations.jar`更改为`<SDK_DIR>/extras/android/support/annotations/android-support-annotations.jar`

为了解决这个问题，我使用这个 jar 在我的工作区中的所有项目和库上执行了这些步骤：

*   刚刚从`Java Build Path -> Libray`选项卡中删除了文件，
*   然后`Add External Jars`
*   从上面给定的位置选择文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-01T03:25:22.143

我刚才遇到了这个问题，这是谷歌的最高结果。将我的结果发布给来自未来的时间旅行的 Google 员工。

Jose 的解决方案对我不起作用，因为在我的更新管理器中没有“Extras”文件夹，也没有“Android Support”包，所以在过去两年内事情肯定发生了变化。

这对我有用：**更新SDK 管理器中的*所有*包。** 我不知道哪个更新特别修复了它，但现在它们都是最新的，问题就解决了。

# ruby - 无法检查 Ruby 哈希是否包含值

> ID：10061993
> 
> 赞同：0
> 
> 时间：2012-04-08T10:05:25.690
> 
> 标签：ruby, hash

我有一个看起来像的红宝石哈希

```
{"10.1.1.6"=>"nick", "127.0.0.1"=>"nick1"} 
```

但是我无法检查某个字符串是否已经在哈希中。我试过了，使用then`has_value?`获取值数组来检查它是否包含它，但是当我知道它存在时总是返回。例如，我尝试添加到哈希中，我这样做：`values``include?``false``"172.16.10.252"=>"nick"`

```
class SomeClass
  def initialize(*args)
    super(*args)
    @nicks = Hash.new
  end

  def serve(io)
    loop do
      line = io.readline
      ip = io.peeraddr[3]
      begin
        if  /NICK (.*)/ =~ line
          nick = $1
          if @nicks.has_value?(nick) # it fails here
            puts "New nick #{$1}"
            @nicks[ip] = nick.gsub("\r", "")
            io.puts "Your new nick is #{nick}"
          else
            message = {:ERROR => "100", :INFO=>"#{nick}"}.to_json
            io.puts message
          end
        end
      rescue Exception => e
        puts "Exception! #{e}-#{e.backtrace}"
      end
    end
  end
end 
```

在`irb`它上面工作正常，但在我的脚本上它没有

```
1.9.3p125 :001 > h = {"10.1.1.6"=>"nick", "127.0.0.1"=>"nick1"}
 => {"10.1.1.6"=>"nick", "127.0.0.1"=>"nick1"} 
1.9.3p125 :002 > h.has_value?('nick')
 => true 
1.9.3p125 :003 > if h.has_value?('nick')
1.9.3p125 :004?>   puts "yes"
1.9.3p125 :005?>   else
1.9.3p125 :006 >     puts "no"
1.9.3p125 :007?>   end
yes
 => nil 
1.9.3p125 :008 > 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:55:44.710

我不确定您是否按照您的意图使用“$1”。

在此行的代码中：

```
if  /NICK (.*)/ =~ line
  nick = $1
  if @nicks.has_value?(nick) # it fails here
        puts "New nick #{$1}" 
```

if line is "NICK says a bunch of things", $1 will be "says a bunch of things". So you're not really looking for the value 'nick' in your hash, but for 'says a bunch of things'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:50:30.087

你应该检查你的正则表达式是如何工作的，我不会说哈希有什么问题。

# jquery - 只让一个 div 执行 jQuery.ajax

> ID：10061998
> 
> 赞同：0
> 
> 时间：2012-04-08T10:06:41.623
> 
> 标签：jquery, ajax, html

使用 jQuery 中的 ajax 在另一个页面中调用特定 id 或 div 类的正确方法是什么？我的代码不起作用，我确定我只是语法不正确。

在此先感谢您的帮助

不起作用的代码->

```
 $.ajax({
      url: "includes/content.php",
      dataType: "html",
      success: function(data) {
        var result = $(data).find('.si');
        $("the div i present the content in").html(result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:09:21.233

如果您打算将某个 div 加载到您的页面中，则可以改用该[`.load()`](http://api.jquery.com/load/)方法。它让您将选择器作为参数传递，以仅获取加载页面的特定部分。

```
$('#id-of-element-to-present-the-result-in').load('includes/content.php .si'); 
```