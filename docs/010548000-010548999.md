# StackOverflow 问答 10548000-10548999

# html - css在浏览器窗口中显示块高度变化

> ID：10548000
> 
> 赞同：0
> 
> 时间：2012-05-11T08:30:52.927
> 
> 标签：html, css

我将用一个例子来描述我的问题：假设我们用css绘制了一个块，我们可以看到水平拖动浏览器窗口时的效果，块的宽度会改变，直到它达到它的最小宽度。现在我希望它对块的高度做同样的事情，它不起作用，这是我遇到的问题。有什么帮助吗？

这是我的示例代码：

```
#block {
    margin: auto;
    margin-top: 100px;
    display: block;
    border: 2px solid grey;
    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    padding: 30px 40px;
    background-color: rgba(148, 148, 148, 0.15);
    color: #fff;
    box-shadow: 0 0 5px #bab9b9;
    -moz-box-shadow: 0 0 5px #bab9b9; /* Firefox */
    -webkit-box-shadow: 0 0 5px #bab9b9; /* Safari, Chrome */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:03:23.870

那么你可以添加

```
padding-top:50% 
```

到您的块 css，高度会随着您调整浏览器的宽度而变化。我只在 FF 上测试过这个，所以我不知道这是否适用于其他浏览器，我不能 100% 确定这是否是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:44:55.540

我会说不，因为我认为你的意思是左边距和右边距的变化。有了高度，这不会像预期的那样工作，因为高度通常高于窗口高度。

如果您的身高有限，也许它可以工作，但我从未尝试过。而且我认为没有 `margin-top: auto; margin-bottom: auto;`相同的效果`margin-left: auto; margin-right: auto;`

所以...按照建议...如果您想要这种效果，请改用JS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:42:44.333

我对你的问题感到困惑。你还没有`min-width`在你的块上设置任何东西。你想要实现什么 - 一个窗口高度为 100% 的块？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:39:50.943

我认为没有 Javascript 就无法做到这一点。

# iphone - 不重复的随机数

> ID：10548002
> 
> 赞同：3
> 
> 时间：2012-05-11T08:31:09.293
> 
> 标签：iphone, xcode, random

我正在制作测验应用程序，我想在其中生成不重复的随机数。
我已经搜索了很多东西并得到了这个想法，但我认为我做错了什么，这就是为什么没有得到正确的输出。

这是我使用的代码。

```
-(int)generater{

NSMutableArray *temp;
srand([[NSDate date] timeIntervalSince1970]);
r = 1 + (arc4random() % 11);

if ([temp count] ==0) {

    [temp addObject:[NSNumber numberWithInteger:questionnumber]];
    return r;

}
if ([temp count] >= 1 ){

    if (![temp containsObject:[NSNumber numberWithInteger:questionnumber]]) {

        return r;

    }
    else{

        int next=[self generater];
        return next;
    }
}
return r;
} 
```

对于下一个问题，

```
-(void)askQuestion{

[self generater];

questionnumber = r;

NSInteger row = 0;
if(questionnumber == 1)
{
    row = questionnumber - 1;
}
else
{
    row = ((questionnumber - 1) * 11);
} 
```

任何人都可以建议我哪里错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T11:41:59.150

```
 arryRandomNumber=[[NSMutableArray alloc]init];
    while (arryRandomNumber.count<12) {
    NSInteger randomNumber=1+arc4random()%12;
    if (![arryRandomNumber containsObject:[NSString stringWithFormat:@"%d",randomNumber]])       {
          [arryRandomNumber addObject:[NSString stringWithFormat:@"%d",randomNumber]];
     }
         continue;
    }
     NSLog(@"%@",arryRandomNumber); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T08:35:21.853

当然，最好的方法是将所有问题（或问题编号）按顺序放入一个数组中，然后将它们打乱。

请参阅[随机播放 NSMutableArray 的最佳方法是什么？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

一些额外的指导（注意所有代码都是在浏览器中编写的，没有实际编译和测试；但仍应了解要点）：

1）设置一个 ivar `NSMutableArray *randomQuestionNumbers`。用问题的数量初始化数组的内容，因此如果您有 5 个问题，请将数字 1-5 放入其中。手动执行此操作将是：

```
randomQuestionNumbers = [NSMutableArray arrayWithObjects:[NSNumber numberWithInt:1], [NSNumber numberWithInt:2], [NSNumber numberWithInt:3], [NSNumber numberWithInt:4], [NSNumber numberWithInt:5], nil]; 
```

2）之后，您需要使用上面链接中给出的方法之一进行洗牌。这将转换 [1,2,3,4,5] -> [4,1,5,3,2] 例如 3）所以现在创建您的方法来获取下一个问题编号：

```
- (NSInteger) nextQuestionNumber {

  NSInteger nextQuestionNumber = -1;
  if ([randomQuestionNumbers count] > 0) {
      nextQuestionNumber = (NSInteger) [randomQuestionNumbers objectAtIndex:0];
      [randomQuestionNumbers removeObjectAtIndex:0];
  }
  return nextQuestionNumber;
} 
```

这里发生的是我们检索数组中的第一个 int。然后我们从数组中删除该元素。最后，我们返回 int，例如 4。下次调用该方法时，会少一个元素，第一个元素是 int 1，以此类推。我相当粗略地使用 -1 来显示数组何时为空，但老实说，您应该能够确保您不会多次调用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T07:48:24.490

希望这段代码能帮到你...

此处的***限制***应根据您的要求设置。

这段代码的好处是它不会重复已经获得的相同随机数。（***没有重复的数字***）

```
srand(time(NULL));

int randomIndex = rand() % limit;

[reportIDTextField setText:[NSString stringWithFormat:@"%i", randomIndex]]; 
```

享受编码:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-09T10:30:37.617

两个数之间的随机数方法：

```
- (int)randomFromSmallest: (int) smallest toLargest: (int) largest
{
    int random = smallest + arc4random() % (largest + 1 - smallest);
    return random;
} 
```

这就是我填充非重复数字数组的方式：

```
NSMutableArray *randNrArray = [[NSMutableArray alloc] init];

while ([randNrArray count] < 25)
{
    int rndNumber = [self randomFromSmallest:0 toLargest:25 - 1];

    if (![randNrArray containsObject:[NSNumber numberWithInt:rndNumber]])
    {
        [randNrArray addObject:[NSNumber numberWithInt:rndNumber]];
        //NSLog(@"___ %d ___", rndNumber);
    }
} 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:34:51.303

将所有问题编号放在`NSMutableArray`(1, 2, 3, 4, 5, 6, 7, 8) 中，然后对这个数组执行一些排列。

我使用这种方法来打乱数字键盘：

```
// Randomize keys: exchange two random keys, ten times.
for (int i = 0; i < 10; i++)
{
    int a = 0, b = 0;
    while (a == b)
    {
        a = arc4random() % 10;
        b = arc4random() % 10;
    }
    UIButton *btnA = (UIButton *)[_scrambledKeypad viewWithTag:a + 10];
    UIButton *btnB = (UIButton *)[_scrambledKeypad viewWithTag:b + 10];
    CGRect frame = btnA.frame;
    btnA.frame = btnB.frame;
    btnB.frame = frame;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T08:35:06.620

也许：r = [自我生成器]；

```
questionnumber = r; 
```

# jquery - jquery 选择器 - 排除第一个和第二个

> ID：10548003
> 
> 赞同：14
> 
> 时间：2012-05-11T08:31:23.440
> 
> 标签：jquery, jquery-selectors

我想从 jquery 选择器中排除第一个和第二个元素。我试过这个：

```
$('p:not(:nth-child(1),:nth-child(2))') 
```

但这仅排除第一个元素...谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-11T08:36:11.213

此 jQuery 序列用于[`.slice()`](http://api.jquery.com/slice/)丢弃`$('p')`选择器中的前两个元素：

```
$('p').slice(2). 
```

见[http://jsfiddle.net/alnitak/zWV7Z/](http://jsfiddle.net/alnitak/zWV7Z/)

请注意，这*与*-`nth-child`排除是基于在第一个选择器中找到的整个元素集，而不是基于它们在 DOM 中的相对位置。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-11T08:37:35.890

简单地：

```
$('p:gt(1)') 
```

[http://api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

演示 [http://jsfiddle.net/NtFYq/1/](http://jsfiddle.net/NtFYq/1/)

正如 Alnitak 在评论中指出的那样，如果性能是一个问题，您可以使用他的解决方案`slice`

非常感谢@Alnitak 指出这一点:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T08:32:18.697

```
 $('p').not(":nth-child(1)").not(":nth-child(2)") 
```

[**-- 看演示 --**](http://jsfiddle.net/Gmb78/2/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T08:50:05.530

尝试：

```
$('p:not(:nth-child(1)),p:not(:nth-child(2))') 
```

参考： [http ://www.w3.org/TR/selectors/#negation](http://www.w3.org/TR/selectors/#negation)

来自该参考：“否定伪类：not（X）是一个功能符号，采用***简单的选择器***（不包括否定伪类本身）作为参数......”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:36:25.357

```
$('p').not($('p').eq(0), $('p').eq(1)) 
```

# android - 如何以 Facebook 显示其列表的形式显示菜单项？

> ID：10548004
> 
> 赞同：0
> 
> 时间：2012-05-11T08:31:23.533
> 
> 标签：android, facebook, dialog, android-actionbar

我需要创建一个 Facebook 已在其应用程序中完成的功能。在我的应用程序中，我的屏幕顶部有标题栏（不是真正的操作栏）。在它的左角，我有一个充当菜单的图像（Facebook 也有这个按钮）。我希望当用户单击它时，会出现新窗口并覆盖屏幕的一半，并且下面的活动会转移到它的右侧。

这种行为有什么资源吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:48:48.537

您将在 SO：[Android Facebook style slide](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)的这个问题中找到解决方案。

在这里查看这些答案：

1.  [https://stackoverflow.com/a/9768498/450534](https://stackoverflow.com/a/9768498/450534)
2.  [https://stackoverflow.com/a/8673805/450534](https://stackoverflow.com/a/8673805/450534)

# javascript - javascript删除孩子

> ID：10548006
> 
> 赞同：0
> 
> 时间：2012-05-11T08:31:35.547
> 
> 标签：javascript, html

# html代码

```
<li id="ioAddOtherRelation">
            <a href="" onclick="return ioAddSetOtherRelation()"class="smallLink">add other relation</a>
</li> 
```

我希望函数 ioAddSetOtherRelation 删除 a 标签

# javascript代码

```
function ioAddSetOtherRelation(){
    var bigLi = document.getElementById('ioAddOtherRelation');
    bigLi.removeChild(bigLi.childNodes[0]);
    return false;
} 
```

当我第一次按下链接时，什么都没有发生，但是当我按下它两次时它删除了a标签，我想一键删除a标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:34:32.050

第一次单击时，您删除了包含元素前面空格的文本节点。您需要确保传递给的参数`removeChild`是您真正想要的参数。

这将是解决问题的更明智的方法：

```
<li id="ioAddOtherRelation">
    <a href="" onclick="return ioAddSetOtherRelation(this)" class="smallLink">add other relation</a>
</li>

function ioAddSetOtherRelation(element){
   var bigLi = element.parentNode;
    bigLi.removeChild(element);
    return false;
} 
```

摆脱固有的事件属性并编写[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:51:12.167

您发布的代码的问题是您的“li”元素的第一个子元素实际上是一个 textNode，其中包含自身与“a”元素之间的换行符和空格。第一次单击时，这个不可见的 textNode 会被删除，第二次单击时，“a”会被删除。

您可以通过删除换行符和空格来证明这一点（即，将所有 HTML 放在一行中，没有空格） - 您应该会在第一次单击时看到“a”消失。

我发现以下修改后的 javascript 可以按您的预期工作。注意我使用 .getElementsByTagName() 来确保只返回 'a' 元素。这将返回一个类似 .childNodes 的数组，因此我将采用结果数组的第一个元素。

```
 function ioAddSetOtherRelation() {
          var bigLi = document.getElementById('ioAddOtherRelation');
          bigLi.removeChild(bigLi.getElementsByTagName("a")[0]);
          return false;
      } 
```

我发现 FireBug 在解决这个问题方面非常有用（连同 JS 代码中的 console.debug() 行）——如果你还没有使用它，我建议你试一试！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:38:03.690

使用 jQuery 并将参数发送为`this`

把它`this`放在 ioAddSetOtherRelation 函数中

[在这里](http://jsfiddle.net/ranganadh/CsVef/)检查

# c# - 如果会话在 asp.net 中“20”分钟后注销，我该怎么办？

> ID：10548010
> 
> 赞同：1
> 
> 时间：2012-05-11T08:31:53.210
> 
> 标签：c#, asp.net, visual-studio-2010

我已经研究并为我的项目实施了一些代码，但仍然在 20 分钟后，我的会话注销并返回到我的登录页面。无论我在 IIS 应用程序池中添加超时时间或`httpruntime`增加超时时间，它似乎都不起作用。`sessionstate``global.asax``Idle Timeout`

网络配置：

```
 <authentication mode="Forms">
      <forms name="__authcookie" loginUrl="LoginPage.aspx" timeout="60" protection="All" requireSSL="false" slidingExpiration="true" cookieless="UseDeviceProfile" enableCrossAppRedirects="false"/>
  </authentication>
  <sessionState mode="InProc" timeout="60" customProvider="AppFabricCacheSessionStoreProvider"></sessionState>
<membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<profile>
  <providers>
    <clear />
    <add name="AppFabricCacheSessionStoreProvider" type="Microsoft.ApplicationServer.Caching.DataCacheSessionStoreProvider" cacheName="NamedCache1" sharedId="SharedApp"/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile> 
```

全球.asax：

```
void Session_Start(object sender, EventArgs e)
        {
            // Code that runs when a new session is started
            Session.Timeout = 60;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:35:50.757

尝试将此添加到您的`web.config`文件中

```
<system.web>
    <authentication mode="Forms">
          <forms timeout="50"/>
    </authentication>
    <sessionState timeout="60"  />
</system.web> 
```

此外，如果您不希望会话超时，您可能有兴趣阅读有关[避免在 Asp.Net 中防止会话超时以保持活动状态的文章](http://www.csharpaspnetarticles.com/2012/04/avoid-prevent-session-timeout-keepalive.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:36:29.603

超时的可能不是会话，而是身份验证。身份验证使用`<authentication>`元素（默认为 .ASPXAUTH cookie）控制，该元素与会话（默认为 Aspnet_SessionId cookie）不同。

使用元素的`timeout`属性。`<authentication>`

# sql - 如何在oracle中按列协调两个表中的公共行？

> ID：10548015
> 
> 赞同：1
> 
> 时间：2012-05-11T08:32:12.027
> 
> 标签：sql, oracle

我在数据库中有两个表。这些表称为 bi_employee 和 hr_employee。这两个表几乎没有相似的列，然后是每个表特有的其他额外列。

我需要根据一些用户定义的列来协调这两个表之间的数据。

假设常见的列是 id(pk)、emp_code、region、country、title、division 等。

现在，当我协调这两个表时，我想查看两个表中都存在但仅在某些列中不同的行。

例如，emp_code 1000 在两个表中都存在，但在 hr_employee 中，他的头衔是 jr。开发人员，但在 bi_employee 中，他的头衔是 sr.developer。

我不想要在一个表中但不在另一个表中的记录。

我只需要协调两个表中都存在但按列排列的行，这些行将由用户选择。

用户可以根据标题或地区或国家或所有这些选择对帐。

请帮忙。

**编辑1：**

这是我到目前为止所做的，通过以下查询，我可以获得两个表中的所有记录。现在我只需要比较他们的列，看看是否有任何不匹配。

```
SELECT emp_code FROM bi_employee INTERSECT SELECT emp_code FROM hr_employee 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:27:55.833

据我了解，每个表中只有一列与重新编码相关；`emp_code`. 然后你想显示`emp_code`每个表中相同但其他字段不同的记录。

您可以在`WHERE`子句中使用简单的连接和过滤器来做到这一点......

```
SELECT
  *
FROM
  bi_employee
INNER JOIN
  hr_employee
    ON bi_employee.emp_code = hr_employee.emp_code
WHERE
     (bi_employee.title  <> hr_employee.title)
  OR (bi_employee.region <> hr_employee.region)
  etc, etc 
```

*（如果任何字段可以为空，您需要使用类似 的内容来说明这一点`ISNULL(bi.x, '') <> ISNULL(hr.x, '')`）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:28:25.197

你可以试试这个。

```
select hr.<list of columns to reconcile from hr table> 
  from bi_employee bi join hr_employee hr on hr.emp_code = bi.empcode
minus
select bi.<list of columns to reconcile from bi table> 
  from bi_employee bi join hr_employee hr on hr.emp_code = bi.empcode 
```

# arrays - lua中的for循环如何用数组索引

> ID：10548018
> 
> 赞同：0
> 
> 时间：2012-05-11T08:32:19.617
> 
> 标签：arrays, for-loop, lua, coronasdk

如果我有此代码，如何将循环值放入数组？

```
local data = {
 for row in db:nrows("SELECT song.id, song.title as title, artist.name as name FROM song, artist where song.artist_id = artist.id") do
    {
     song = row.title,
     artist = row.name
    }
  end
} 
```

但我收到了这个错误：

```
unexpected symbol near 'for' 
```

我只是想看起来像这样...

```
local data = {
 { 
   song = "HI",
   artist = "Tom"
 }
 {
   song = "Hello",
   artist = "mike"
 }
...
} 
```

任何人都可以帮助我了解我的情况或提供一些建议吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:46:37.320

你必须做这样的事情，我认为：

```
result = db:nrows("SELECT song.id, song.title as title, artist.name as name FROM song, artist where song.artist_id = artist.id")

data = {}
for i, row in ipairs(result) do
  data[i] = {}
  data[i].song = row.title
  data[i].artist = row.name
end 
```

**编辑：**虽然有一个问题：为什么不在 SQL 查询中指定它并按原样使用结果？IE：

```
data = db:nrows("SELECT song.id, song.title as song, artist.name as artist FROM song, artist where song.artist_id = artist.id") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:53:07.647

查看文档 dbn:rows 迭代行并返回一个表。所以 {} 是导致问题的原因。

本地数据 = {}

```
for row in db:nrows("SELECT song.id, song.title as song, artist.name as artist FROM song, artist where song.artist_id = artist.id") do
  table.insert(data,row)
end 
```

由于我没有 Coruna，因此我无法测试上述内容，并使用不同的 lua 系统。

参考： http: [//lua.sqlite.org/index.cgi/doc/tip/doc/lsqlite3.wiki#db_nrows](http://lua.sqlite.org/index.cgi/doc/tip/doc/lsqlite3.wiki#db_nrows)

# android - android应用程序中的雕刻文字效果

> ID：10548021
> 
> 赞同：1
> 
> 时间：2012-05-11T08:32:31.583
> 
> 标签：android

我想在我的 android 应用程序中及时获得著名的雕刻文字效果。我已经搜索过，但没有得到任何有效的结果。我的 XML 格式代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/am"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="Admissions"
        android:layout_marginLeft="14dp"            
        android:textColor="#33b5e5"
        android:textSize="28dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
    />
</RelativeLayout>
</LinearLayout>!["application"][1] 
```

我只想以雕刻的形式显示“入场”标题..告诉我颜色组合，否则我必须使用哪种颜色阴影..

这是链接[http://goo.gl/6grsZ](http://goo.gl/6grsZ)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T08:34:52.520

试试这个。

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:background="@color/Grey"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView android:textColor="@color/Black"
    android:layout_width="wrap_content"
    android:text="Engraved Shadow"
    android:layout_height="wrap_content"
    android:padding="2dp"
    android:shadowColor="@color/White"
    android:shadowDx="1"
    android:shadowDy="1"
    android:shadowRadius="0.6" />
</LinearLayout> 
```

从[这里](http://blog.stylingandroid.com/archives/378)参考。

# ruby-on-rails - 如何测试“新”控制器动作？

> ID：10548022
> 
> 赞同：0
> 
> 时间：2012-05-11T08:32:33.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, controller

我正在使用 Ruby on Rails 3.2.2、Rspec 2.9.0 和 RspecRails 2.9.0。我正在尝试测试一个`new`控制器动作，我想知道为什么我只得到上面解释的那个动作的错误。

鉴于：

```
# controller
class ArticlesController < ApplicationController
  before_filter :signed_in

  def new
    @article = Article.new

    # This is just a sample code line to show you where the error happens?
    @article.new_record?

    ...
  end

  def show
    @article = Article.find(params[:id])

    ...
  end
end

# spec file
require 'spec_helper'

describe ArticlesController do
  before(:each) do
    @current_user = FactoryGirl.create(:user)

    # Signs in user so to pass the 'before_filter'
    cookies.signed[:current_user_id] = {:value => [@current_user.id, ...]}
  end

  it "article should be new" do
    article = Article.should_receive(:new).and_return(Article.new)
    get :new
    assigns[:article].should eq(article)
  end

  it "article should be shown" do
    article = FactoryGirl.create(:article)

    get :show, :id => article.id.to_s

    assigns[:article].should eq(article)
  end
end 
```

当我运行与操作相关的示例时，`new`我收到此错误（它与`@article.new_record?`控制器文件中的代码行有关）：

```
Failure/Error: get :new
NoMethodError:
  undefined method `new_record?' for nil:NilClass 
```

但是，当我运行与该操作相关的示例时，`show`它会毫无错误地通过。

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:47:30.110

问题是你做的方式

```
Article.should_receive(:new).and_return(Article.new) 
```

这与

```
temp = Article.should_receive(:new)
temp.and_return(Article.new) 
```

所以当你设置返回值的时候，`Article.new`已经被模拟出来了，所以返回 nil，所以你`and_return(nil)`先创建返回值，即

```
new_article = Article.new #or any other way of creating an article - it may also be appropriate to return a mock
Article.should_receive(:new).and_return(new_article) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:45:43.573

尝试：

```
it "article should be new" do
  article = FactoryGirl.build(:article)
  Article.stub(:new).and_return(article)

  get :new

  assigns(:article).should == article
end 
```

# javascript - 我们可以在css中使用百分比高度吗？

> ID：10548030
> 
> 赞同：1
> 
> 时间：2012-05-11T08:33:02.023
> 
> 标签：javascript, jquery, html, css

我正在使用 5 个带有悬停效果的横幅图像并使用以下代码

```
#banner
{
    float:left;
    width:99.025%;
    padding:0 0 0 10px;
    margin:0;
    height: 16.714em; /* 234px*/
    position:relative;
    overflow:hidden;
    display:block;
    background:url('/pages/images/bottom_wood_repeater.jpg') 0 104px repeat-x;
}

#banner img
{
    float:left;
    width:19.435%; /*197px;*/
}

#banner a img
{
    float:left;
    display:block;
}

#banner a:hover img
{
    float:left;
    position:relative;
    top:-16.714em; /* 234px*/
} 
```

我可以使用百分比而不是 em 的高度吗？

```
height: 16.714em; /* 234px*/ 
```

实际上我正在创建响应式设计，它正在为较小的分辨率或移动设备制造问题。

当前站点： http: [//new.brandonplanning.com/home](http://new.brandonplanning.com/home)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:35:24.320

是和不是。

具体来说，如果父元素没有固定高度，则*不能这样做。*想一想：如果一个元素的高度等于其父级高度的百分比，则需要首先计算父级的高度。但是要计算父母的身高，首先需要计算其孩子的身高。但是在计算这个孩子的身高之前，你需要计算父母的身高。你看这是怎么回事。

如果父母*确实*有一个固定的高度，那么孩子的百分比高度就可以了。

如果父级没有*固定*高度并且您为子级设置百分比高度，浏览器将简单地放弃并将子级视为具有`height: auto`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:36:52.813

> 我可以使用百分比而不是 em 的高度吗？

是的你可以。如果考虑到其他属性，`height:25%;`但可能不会达到您想要的效果。

> 身高可以
> 
> auto - 浏览器计算高度。这是默认的
> 
> length - 以 px、cm 等为单位定义高度。
> 
> % - 以百分比形式定义包含块的高度

如果您仍然遇到布局问题，您可以检测客户端是否在移动设备上，并使用不同的 CSS 显示它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T17:05:35.577

确保您将“%”符号添加到您的 css 中，您始终可以使用 %。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:37:23.270

我不明白为什么不。从技术上讲是可以的。你试过用%吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T17:03:59.243

简单地说，是的，我们在 CSS 中使用高度百分比。

# asp.net-mvc-3 - 更改了现有实体模型并手动更新了 SQL Server 数据库，但仍然出现上下文更改错误

> ID：10548031
> 
> 赞同：0
> 
> 时间：2012-05-11T08:33:05.193
> 
> 标签：asp.net-mvc-3, entity-framework, ef-code-first, sql-server-2008-r2

我有一个现有的 MVC3 应用程序和数据库，它位于 SQL Server 2008 R2 上，我必须向`bool`现有模型添加一个项目。

将其添加到模型后，我重新构建并发布了该项目。然后我打开 SQL Server Management Studio 并转到表并将条目添加到列中，因为表已经包含数据，所以我必须使其可为空。

我认为这就是我需要做的所有事情才能让一切正常工作。但是我收到了这个错误：

> 自创建数据库以来，支持“psllc_DB”上下文的模型已更改。手动删除/更新数据库，或使用 IDatabaseInitializer 实例调用 Database.SetInitializer。例如，DropCreateDatabaseIfModelChanges 策略将自动删除并重新创建数据库，并可选择使用新数据为其播种。

我不确定还能做什么，我回到代码并将其更改为`bool`可以`bool?`为空，但这也无济于事。我不能删除整个数据库，因为它充满了数据，但是作为最后的可能性，我可以删除这个表并重新创建它，因为它只有几个条目，但我不知道这是否可行。我不确定还能做什么，所以任何建议都会非常感激。

* * *

**更新**

由于我没有得到任何回复，让我重新表述我的问题。

我应该如何更新我的数据库（SQL Express mdf 文件）以将`bool`列添加到已经有数据的表中？我需要数据库来匹配我更新的 MVC 3 Entity Code First 模型，否则我会收到上述错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:53:28.297

由于这是代码优先，因此您应该先执行此代码：更改类并使用[EF 迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)来更改数据库。你这样做的方式，模型和数据库可能匹配，但数据库中的元信息没有更新。

顺便说一句，如果您提供默认值，您可以添加一个不可为空的列。

# debugging - 调试 Azure - 加载配置文件时出错

> ID：10548032
> 
> 赞同：1
> 
> 时间：2012-05-11T08:33:10.040
> 
> 标签：debugging, azure

我可以很好地调试我的应用程序，但是如果我调试 Azure 项目，它会加载计算和存储模拟器，加载浏览器并转到 127.0.0.1:81，然后我收到错误：

> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：加载配置文件时发生错误：对路径“C:\Users\Projects\Web\views\web.config”的访问被拒绝。

我在 IIS7 的管理模式下使用 2011 年 11 月的 Azure SDK 和 Visual Studio 2010 SP1。

如果我将网站发布到 Azure，那么一切正常，这只是一个调试问题。

**编辑**

啊，需要在C:\inetpub\wwwroot下运行才能调试Azure项目。我怎样才能让它在该目录之外工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:24:48.577

在调试 Web 项目时，我使用的是 Cassini。调试 Azure 时，它​​使用 IIS。

1.  我必须将**NETWORK SERVICE**的用户帐户添加到我的解决方案文件中。

2.  要在本地调试 Azure 时访问本地数据库，数据库需要添加用户**NETWORK SERVICE**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:22:55.500

Windows Azure 不会对您的 ASP.NET 配置进行任何更改，它只是使用相同的 ASP.NET 应用程序和配置在计算模拟器中运行您的应用程序。因此，当您在计算模拟器中运行您的应用程序时，整个 ASP.NET 项目从您的应用程序所在的同一文件夹运行，并且在 IIS 中您可以验证如下图所示：

![在此处输入图像描述](../Images/26d9da9119572982cffafb0e3bb9f540.png)

我非常怀疑无论出于何种原因，文件夹/文件都是只读的，这就是 web.config 无法访问的原因。我相信你应该从你的驱动器/文件安全和访问点而不是从 ASP.NET/Azure 的角度来调查这个问题，因为我在那里没有看到任何错误..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:50:12.927

如果您有源代码控制，我认为如果 web.config 文件在文件系统中设置了只读属性，有时会出现错误。我会先检查那里。

# facebook - 对于桌面应用程序，如何从浏览器获取 Facebook access_token？

> ID：10548034
> 
> 赞同：1
> 
> 时间：2012-05-11T08:33:21.660
> 
> 标签：facebook, desktop-application, access-token

我正在为我的桌面应用程序编写一个 Facebook 插件。一旦用户授权应用程序，访问令牌将附加到回调 URL。如果我将使用常规浏览器（我不喜欢在我的应用程序中使用任何 html 模块），那么问题是如何将该令牌返回到我的桌面程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:47:55.773

> 使用设备流程，用户按下其设备上的按钮。然后设备会显示由 Facebook 生成的短代码，然后用户在标准网络浏览器中将此代码输入 Facebook，以授权该设备访问他们的 Facebook 数据。
> 
> 请注意，我们目前正在与数量有限的合作伙伴一起测试设备身份验证。它目前不可用于一般用途，我们不接受额外的访问申请。

[http://developers.facebook.com/docs/authentication/devices/](http://developers.facebook.com/docs/authentication/devices/)

# c# - DbIsNullExpression 的参数必须引用原始类型或引用类型

> ID：10548040
> 
> 赞同：1
> 
> 时间：2012-05-11T08:33:59.713
> 
> 标签：c#, linq, entity-framework

```
var offices=  from x in _officeRepository.GetAll()
                      select new OfficeModels()
                                 {
                                     Id = x.id,
                                     AddressOne = x.address_1,
                                     AddressTwo = x.address_2,
                                     Company = x.a1.Select(y => new CompanyModels { Id=y.id, Name = y.name}).FirstOrDefault()??
                                                x.a2.Select(y => new CompanyModels { Id = y.id, Name = y.name }).FirstOrDefault() ??
                                                x.a3.Select(y => new CompanyModels { Id = y.id, Name = y.name }).FirstOrDefault() ??
                                                x.a4.Select(y => new CompanyModels { Id = y.id, Name = y.name }).FirstOrDefault(),
                                     City = x.city,
                                     Active = x.active,
                                     Country = x.country,
                                     Deleted = x.deleted,
                                     OfficeFax = x.fax,
                                     OfficeName = x.office_name,
                                     OfficePhone = x.office_phone
                                 }; 
```

我收到此错误`The argument to DbIsNullExpression must refer to a primitive or reference type`，该错误是由于 CompanyModels.. 我在这里做错了什么，我错过了什么吗？

如果假设我在初始化 CompanyModels 时包含此行

```
new CompanyModels { CompanyId = y.id, Name = y.name,CompType = Enumerations.Companies.MediaSellers } 
```

即`CompType = Enumerations.Companies.MediaSellers`这给出了某种不同的错误说法`The specified value is not an instance of type 'Edm.Int32'Parameter name: value`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T18:43:19.067

我不确定这个异常试图说明什么。我认为 EF 只能应用 ?? 操作符映射到一个对象，因为一切都必须翻译成 SQL。它没有 CompanyModels 的信息，所以它不知道如何处理它。

如果是这样，我认为您可以通过首先设置一个属性来解决它，比如 A，如下所示：

```
...
AddressTwo = x.address_2,
A = x.a1.FirstOrDefault() ?? x.a2.FirstOrDefault() ?? 
    x.a3.FirstOrDefault() ?? x.a4.FirstOrDefault(),
... 
```

并给`OfficeModels`类一个像这样的公司属性：

```
public CompanyModels Company
{
    get
    {
        return A != null ? new CompanyModels {Id = A.id, Name = A.name} : null;
    }
} 
```

（我有一个类似的查询工作）。

至于第二个问题：EF 不能处理枚举，所以你必须在那里处理整数。在 Stack Overflow 上查看 EF + 枚举解决方法。

# c# - 构建具有泛型类型的 WCF

> ID：10548045
> 
> 赞同：0
> 
> 时间：2012-05-11T08:34:12.707
> 
> 标签：c#, wcf, generics

我想构建一个服务，将从数据库读取的数据以 JSON 格式传递给客户端。我不知道模式表和类型。

我考虑过在 Dictionary 上实现 WCF，但 JSON 非常复杂，包含像“key = ...; value = ...”这样的对象，我只想要“key=value”，我需要返回 Dictionary 对象的列表。有时从数据库我会收到一个逗号分隔的数组，所以我会在我的字典中插入一个带有新字典作为值的键。

在 PHP 中，我的老板说可以通过关联数组来完成。请帮助我一些想法或链接，因为我不知道从哪里开始寻找。

如果有不明白的地方请评论，我会尝试另一种解释。

编辑：

1.  我需要它作为休息服务，所以 JSON 是强制性的。
2.  如何从表中加载数据？我可以使用什么类型的？

编辑#2：这就是我想要得到的：[CorecJSON](http://pastebin.com/YbF8k45V)

编辑#3：这是我当前的 json ：

```
stdClass Object
(
    [areaGetStreetTypesResult] => stdClass Object
        (
            [responseMessage] => [{"name":"IMPASSE","street_type":"IMP"}{"name":"LOTISSEMENT","street_type":"LOT"}{"name":"ROUTE","street_type":"RTE"}{"name":"RUE","street_type":"RUE"}]
            [response_status] => stdClass Object
                (
                    [message] => Success : JSON created into the responseMessage variable !
                    [status] => 0
                )

        )

) 
```

之间不包含一些逗号，因此无法被 php 解码。我该怎么办 ？

这是我的方法[代码](http://pastebin.com/bky752X8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:06:02.087

我认为在 webservice API 中将所有内容都作为字典来做是不好的做法，我讨厌需要像这样使用 API。如果它是 WCF，它会生成 WSDL，而 WDSL 描述数据的进出，所以如果一切都是字典，WSDL 无法提供任何有意义的东西，因此您的数据合同不会告诉您有关数据的任何信息。
如果您只需要通过 Web 服务转发数据库数据，WCF 有 DataServices [http://msdn.microsoft.com/en-us/data/bb931106](http://msdn.microsoft.com/en-us/data/bb931106)虽然我认为您应该创建适合您业务需求的 API，而不是数据库和数据库之间的简单代理你的客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:39:59.630

需要传递 JSON 的原因是什么？如果要创建 WCF REST 服务，只需告诉 WCF 创建 JSON 消息，如下所述：http: [//www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON](http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON)

如果您从 C# 应用程序访问该服务，则无需关心数据是如何来回传递的。只需采用“普通”方法参数并使用您在本地执行的返回值即可。

例子：

```
string[] GetResultStrings(List<Rectangle> sourceRectangles); 
```

如果您确实需要传递 JSON 字符串，只需传递字符串并使用 JSON 序列化器和反序列化器对回复进行编码和对参数进行解码。

例如：

```
string GetJSONString(string jsonRequest); 
```

以下信息可能有助于使用 JSON 序列化器和反序列化器：http: [//www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET](http://www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET)

**编辑**
我正在使用以下方法将可序列化对象序列化为 JSON：

```
public static string SerializeJSON(this object obj)
{
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(obj.GetType());
    using (MemoryStream ms = new MemoryStream())
    {
        serializer.WriteObject(ms, obj);
        return Encoding.UTF8.GetString(ms.ToArray());
    }
} 
```

这适用于任何`DataContract`类，如：

```
[DataContract]
public class MyJSONReturnableClass
{
    [DataMember]
    public string ThisBecomesANamedString;

    [DataMember]
    public MyJSONReturnableClass[] AndWorksAlsoForNestedArrays;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:43:32.193

填充您的字典，然后使用 JSON 对其进行序列化。使用 WCF 或 RabbitMq 将其传递给您的客户端...

```
JsonConvert.SerializeObject(yourDict); 
```

下载 NewtonSoft.dll

使用：

```
using Newtonsoft.Json; 
```

# android - Android TextView，将textview中的指定字符移动到指定位置？

> ID：10548046
> 
> 赞同：-1
> 
> 时间：2012-05-11T08:34:16.827
> 
> 标签：android, textview

比方说，我有一个带有文本“Hello world！”的 TextView。无论如何，它显示为

```
Hel
lo 
wor
ld! 
```

现在我想移动 TextView 的内容，以便“w”字符位于 TextView 中的 (0, 10) 之类的位置。是否可以在不覆盖 TextView 的文本处理逻辑的情况下实现这一点？

* * *

当 TextView 的大小发生变化时，我想保留文本的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:38:10.837

您必须覆盖文本处理以及测量和绘图。看起来相当吓人。也许如果您告诉我们您要达到的目标，我们可以建议另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:41:59.340

如果您不介意空格，则可以在插入字符之前插入多个空格，以将字符推到正确的位置。

# javascript - 如何使用放置动画为多个标记创建信息窗口

> ID：10548057
> 
> 赞同：0
> 
> 时间：2012-05-11T08:34:58.320
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我已经成功编码以在特定间隔放置多个标记，并且还知道如何在没有放置动画的情况下创建多个信息窗口。但是，我不知道如何为具有放置动画的多个标记创建信息窗口。我需要两者合二为一，我正在努力解决这个问题因为我是 javascript 新手。

```
<script type="text/javascript">
    var bounds = new google.maps.LatLngBounds ();
    var berlin = new google.maps.LatLng(13.00843, 80.21215);

    var neighborhoods = [ new google.maps.LatLng(13.00843, 80.21215),
     new google.maps.LatLng(13.00881, 80.21143),
     new google.maps.LatLng(13.00861, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00859, 80.21085),
     new google.maps.LatLng(13.00856, 80.21071),
     new google.maps.LatLng(13.00856, 80.21053),
     new google.maps.LatLng(13.00843, 80.21023),
     new google.maps.LatLng(13.00838, 80.20999),
     new google.maps.LatLng(13.00804, 80.20887),
     new google.maps.LatLng(13.00777, 80.207),
     new google.maps.LatLng(13.0076, 80.20554),
     new google.maps.LatLng(13.00701, 80.20469),
     new google.maps.LatLng(13.00532, 80.20192),
     new google.maps.LatLng(13.00388, 80.20111),
     new google.maps.LatLng(13.00238, 80.2005),
     new google.maps.LatLng(13.00189, 80.19991),
     new google.maps.LatLng(13.00192, 80.19675),
     new google.maps.LatLng(13.00011, 80.19431),
     new google.maps.LatLng(12.99835, 80.19217),
     new google.maps.LatLng(12.99555, 80.18887),
     new google.maps.LatLng(12.9911, 80.18111),
     new google.maps.LatLng(12.9874, 80.17626),
     new google.maps.LatLng(12.98264, 80.16883),
     new google.maps.LatLng(12.97428, 80.15462),
     new google.maps.LatLng(12.96853, 80.14983),
     new google.maps.LatLng(12.96691, 80.149),
     new google.maps.LatLng(12.9623, 80.14663),
     new google.maps.LatLng(12.96064, 80.14581),
     new google.maps.LatLng(12.95152, 80.14029),
     new google.maps.LatLng(12.94606, 80.13628),
     new google.maps.LatLng(12.93716, 80.12813),
     new google.maps.LatLng(12.92727, 80.11845),
     new google.maps.LatLng(12.92727, 80.11845),
     new google.maps.LatLng(12.92727, 80.11845),
     new google.maps.LatLng(12.92727, 80.11845),
     new google.maps.LatLng(12.92727, 80.11845),
     new google.maps.LatLng(12.91545, 80.1045),
     new google.maps.LatLng(12.90816, 80.09801),
     new google.maps.LatLng(12.88163, 80.08141),
     new google.maps.LatLng(12.86243, 80.07368),
     new google.maps.LatLng(12.85883, 80.07145),
     new google.maps.LatLng(12.83887, 80.05463),
     new google.maps.LatLng(12.81113, 80.03094),
     new google.maps.LatLng(12.78636, 80.01549),
     new google.maps.LatLng(12.75723, 80.00227),
     new google.maps.LatLng(12.73914, 79.99043),
     new google.maps.LatLng(12.69862, 79.96948),
     new google.maps.LatLng(12.66697, 79.95867),
     new google.maps.LatLng(12.62878, 79.93155),
     new google.maps.LatLng(12.5874, 79.9173),
     new google.maps.LatLng(12.55993, 79.91112),
     new google.maps.LatLng(12.51569, 79.89052),
     new google.maps.LatLng(12.48418, 79.86374),
     new google.maps.LatLng(12.45468, 79.84108),
     new google.maps.LatLng(12.4354, 79.83541),
     new google.maps.LatLng(12.40707, 79.82117),
     new google.maps.LatLng(12.38243, 79.79353),
     new google.maps.LatLng(12.36767, 79.7822),
     new google.maps.LatLng(12.32709, 79.77705),
     new google.maps.LatLng(12.30646, 79.75113),
     new google.maps.LatLng(12.28969, 79.7216),
     new google.maps.LatLng(12.27879, 79.7077),
     new google.maps.LatLng(12.26285, 79.68298),
     new google.maps.LatLng(12.25832, 79.67903),
     new google.maps.LatLng(12.91417, 80.22938),
     new google.maps.LatLng(12.923964, 80.12469),
     new google.maps.LatLng(12.8791617, 80.18394),
     new google.maps.LatLng(13.00843, 80.21215),
     new google.maps.LatLng(13.00843, 80.21215)];

    var markers = [];
    var iterator = 0;

    var map;
    function initialize() {
    var mapOptions = {
      zoom: 10,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: berlin
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
    setMarkers(map, neighbourhoods);

    }

    function drop() {
    for (var i = 0; i < neighborhoods.length; i++) {
      setTimeout(function() {
        addMarker();
      }, i * 1000);

        }
    }

    var image = 'images/car_icon_small.png';
    function addMarker() {
    var marker=markers.push(new google.maps.Marker({
      position: neighborhoods[iterator],
      map: map,
      draggable: false,
    icon: image,
    title: neighborhoodsName[iterator],
      animation: google.maps.Animation.DROP
    }));

    iterator++;
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:30:57.593

经过长时间的尝试，我解决了我的问题。这是我所做的：

```
<script type="text/javascript">
var bounds = new google.maps.LatLngBounds ();
var berlin = new google.maps.LatLng(13.00843, 80.21215);

var neighborhoods = [ new google.maps.LatLng(13.00843, 80.21215),
 new google.maps.LatLng(13.00881, 80.21143),
 new google.maps.LatLng(13.00861, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00859, 80.21085),
 new google.maps.LatLng(13.00856, 80.21071),
 new google.maps.LatLng(13.00856, 80.21053),
 new google.maps.LatLng(13.00843, 80.21023),
 new google.maps.LatLng(13.00838, 80.20999),
 new google.maps.LatLng(13.00804, 80.20887),
 new google.maps.LatLng(13.00777, 80.207),
 new google.maps.LatLng(13.0076, 80.20554),
 new google.maps.LatLng(13.00701, 80.20469),
 new google.maps.LatLng(13.00532, 80.20192),
 new google.maps.LatLng(13.00388, 80.20111),
 new google.maps.LatLng(13.00238, 80.2005),
 new google.maps.LatLng(13.00189, 80.19991),
 new google.maps.LatLng(13.00192, 80.19675),
 new google.maps.LatLng(13.00011, 80.19431),
 new google.maps.LatLng(12.99835, 80.19217),
 new google.maps.LatLng(12.99555, 80.18887),
 new google.maps.LatLng(12.9911, 80.18111),
 new google.maps.LatLng(12.9874, 80.17626),
 new google.maps.LatLng(12.98264, 80.16883),
 new google.maps.LatLng(12.97428, 80.15462),
 new google.maps.LatLng(12.96853, 80.14983),
 new google.maps.LatLng(12.96691, 80.149),
 new google.maps.LatLng(12.9623, 80.14663),
 new google.maps.LatLng(12.96064, 80.14581),
 new google.maps.LatLng(12.95152, 80.14029),
 new google.maps.LatLng(12.94606, 80.13628),
 new google.maps.LatLng(12.93716, 80.12813),
 new google.maps.LatLng(12.92727, 80.11845),
 new google.maps.LatLng(12.92727, 80.11845),
 new google.maps.LatLng(12.92727, 80.11845),
 new google.maps.LatLng(12.92727, 80.11845),
 new google.maps.LatLng(12.92727, 80.11845),
 new google.maps.LatLng(12.91545, 80.1045),
 new google.maps.LatLng(12.90816, 80.09801),
 new google.maps.LatLng(12.88163, 80.08141),
 new google.maps.LatLng(12.86243, 80.07368),
 new google.maps.LatLng(12.85883, 80.07145),
 new google.maps.LatLng(12.83887, 80.05463),
 new google.maps.LatLng(12.81113, 80.03094),
 new google.maps.LatLng(12.78636, 80.01549),
 new google.maps.LatLng(12.75723, 80.00227),
 new google.maps.LatLng(12.73914, 79.99043),
 new google.maps.LatLng(12.69862, 79.96948),
 new google.maps.LatLng(12.66697, 79.95867),
 new google.maps.LatLng(12.62878, 79.93155),
 new google.maps.LatLng(12.5874, 79.9173),
 new google.maps.LatLng(12.55993, 79.91112),
 new google.maps.LatLng(12.51569, 79.89052),
 new google.maps.LatLng(12.48418, 79.86374),
 new google.maps.LatLng(12.45468, 79.84108),
 new google.maps.LatLng(12.4354, 79.83541),
 new google.maps.LatLng(12.40707, 79.82117),
 new google.maps.LatLng(12.38243, 79.79353),
 new google.maps.LatLng(12.36767, 79.7822),
 new google.maps.LatLng(12.32709, 79.77705),
 new google.maps.LatLng(12.30646, 79.75113),
 new google.maps.LatLng(12.28969, 79.7216),
 new google.maps.LatLng(12.27879, 79.7077),
 new google.maps.LatLng(12.26285, 79.68298),
 new google.maps.LatLng(12.25832, 79.67903),
 new google.maps.LatLng(12.91417, 80.22938),
 new google.maps.LatLng(12.923964, 80.12469),
 new google.maps.LatLng(12.8791617, 80.18394),
 new google.maps.LatLng(13.00843, 80.21215),
 new google.maps.LatLng(13.00843, 80.21215)];

var markers = [];
var iterator = 0;

var map;
function initialize() {
var mapOptions = {
  zoom: 10,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  center: berlin
};

map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
setMarkers(map, neighbourhoods);

}

function drop() {
for (var i = 0; i < neighborhoods.length; i++) {
  setTimeout(function() {
    addMarker();
  }, i * 1000);

    }
}

var image = 'images/car_icon_small.png';
function addMarker() {
var marker=new google.maps.Marker({
  position: neighborhoods[iterator],
  map: map,
  draggable: false,
icon: image,
title: neighborhoodsName[iterator],
  animation: google.maps.Animation.DROP
});
var infowindow = new google.maps.InfoWindow({
        content:'Hello World'
      });

      google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
      });
     markers.push(marker);

iterator++;
}

</script> 
```

多谢。

还有一件事。当标记超出当前设置的地图区域时，我希望地图移动以显示标记。如何使用此代码执行此操作？

# android - 在另一个布局错误中添加布局

> ID：10548061
> 
> 赞同：0
> 
> 时间：2012-05-11T08:35:16.987
> 
> 标签：android, android-layout

当我尝试在布局中添加布局时，它捕获了这样的异常消息

```
 You must specifiy a valid layout reference. The layout ID @layout/item_composer_header is not valid.
Exception details are logged in Window > Show View > Error Log 
```

我的第一个布局是（item_composer_header.xml）：

```
 <?xml version="1.0" encoding="utf-8"?>  
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"  
   android:id="@+id/list_section_header"  
   android:layout_width="fill_parent"  
   android:layout_height="wrap_content"  
   android:background="@drawable/list_header_bg"  
   android:padding="4dp"  
   android:paddingLeft="10dp"  
   android:shadowColor="#000"  
   android:shadowDx="1"  
   android:shadowDy="1"  
   android:shadowRadius="1"  
   android:text="Header"  
   android:textColor="#FFF"  
   android:textSize="16sp"  
   android:textStyle="bold"  
   android:typeface="serif" /> 
```

并将该布局嵌入到第二个布局中（item_composer.xml）

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<!--     <include  
     android:layout_width="fill_parent"  
     android:layout_height="wrap_content"  
     layout="@layout/item_composer_header" />   -->

     <include android:id="@+id/header_layer"  
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         layout="@layout/item_composer_header"/>

   <LinearLayout  
     android:layout_width="fill_parent"  
     android:layout_height="wrap_content"  
     android:layout_marginLeft="5dp"  
     android:layout_marginRight="5dp"  
     android:background="@drawable/custom_list_item_bg"  
     android:orientation="vertical"  
     android:paddingBottom="3dp"  
     android:paddingLeft="10dp"  
     android:paddingRight="10dp"  
     android:paddingTop="3dp" >  

     <TextView  
       android:id="@+id/list_section_title1"  
       android:layout_width="wrap_content"  
       android:layout_height="wrap_content"  
       android:text="Full Name"  
       android:textColor="#000000"  
       android:textStyle="bold" />  
     <TextView  
       android:id="@+id/list_section_title2"  
       android:layout_width="wrap_content"  
       android:layout_height="wrap_content"  
       android:text="1500-1600"  
       android:textColor="#000000" />  
   </LinearLayout>

</LinearLayout> 
```

我怎样才能摆脱这个例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:54:43.460

选中此项以合并不同的布局

[http://developer.android.com/resources/articles/layout-tricks-merge.html](http://developer.android.com/resources/articles/layout-tricks-merge.html)

源代码：http : [//progx.org/users/Gfx/android/MergeLayout.zip](http://progx.org/users/Gfx/android/MergeLayout.zip)

# java - Java中的多个对象锁？

> ID：10548066
> 
> 赞同：3
> 
> 时间：2012-05-11T08:35:35.063
> 
> 标签：java, multithreading, concurrency, locking, synchronized

锁定私有字段变量（而不是使用锁定对象）是否安全/可接受的做法？这样，我可以为不同的目的使用不同的锁。下面的例子：

```
class Test {
  private Integer x = 0;
  private Integer y = 0;

  public void incrementX() {
    synchronized(x) {
      x++;
    }
  }

  public void decrementX() {
    synchronized(x) {
      x++;
    }
  }

  public void incrementY() {
    synchronized(y) {
      y++;
    }
  }

  public void decrementY() {
    synchronized(y) {
      y++;
    }
  } 
```

或者我应该为我希望锁定的每个私人成员设置一个锁定对象？例子：

```
class Test {
  private final Object xLock = new Object();
  private final Object yLock = new Object();
  private Integer x = 0;
  private Integer y = 0;

...

} 
```

还是我应该只拥有一个通用锁并将其用于所有需要锁定的私有变量？例子：

```
class Test {
  private final Object objLock = new Object();
  private Integer x = 0;
  private Integer y = 0;

...

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T08:37:27.090

请注意**始终使用最终成员 var**进行锁定！例如，如果您使用`Integer`，并且打算更改它，那将是非常糟糕的做法，因为每次调用都会看到*不同*的对象并导致数据竞争。

是否使用一个或多个锁取决于您要实现的协调方案，因此它完全是特定于域的。您必须仔细考虑哪些操作是互斥的，哪些不是互斥的，并适当地为它们分配锁。这里没有单一的最佳实践。

如果您的对象上有两个正交操作可能同时发生而不会导致任何数据争用，那么这就是两个锁的情况。在您的示例中，有两个整数，每个整数都独立变化。我认为这是两个锁的情况。如果您有更复杂的代码，其中至少需要在一个操作中访问两个整数，那么这会将它们绑定在一起，然后您将需要一个锁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T08:38:22.317

锁定私有字段是完全可以接受的，只要该字段是一个对象。基元没有内在锁，因此第一个片段是无效的。

但是，如果可以从外部访问该字段（例如，使用 getter），我会避免锁定私有字段，因为这将允许任何人出于不同目的锁定同一个对象。因此，第二种解决方案是最干净的，恕我直言。

使用单个锁会适得其反，因为它会阻止对应该能够同时运行的方法的并发访问。因此，通常最好使用细粒度的锁。

编辑：

既然您已经更改了问题并使用了包装器对象，那么锁定私有 Integer 实例确实不是一个好的解决方案，因为您在方法中更改了这些变量的值。**使用 final 字段作为锁**。

请记住`x++`，如果`x`是 Integer 实例，则等效于：

```
int temp = x.intValue();
temp++;
x = Integer.valueOf(temp); 
```

此外，由于 Integer.valueOf() 缓存 Integer 实例，因此您可能有多个类使用相同的 Integer 实例来锁定完全不同的事物。导致执行缓慢和死锁的秘诀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:41:00.330

我认为您应该为这两个字段设置两个不同的锁。您锁定对象以防止两个或多个线程同时访问同一个对象。

您还可以查看 java [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)中的 Lock 对象， 它比同步更高效，并且在 java.util.concurrent 中有一些实用程序类可以使用锁（如果需要，也是 ReadWriteLock）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:39:38.423

AFAIK 您使用的锁定对象仅作为 ID。我的意思是，你可以使用任何你想要的对象。唯一重要的是“如果两个东西必须互斥，那么它们必须使用同一个锁”。

所以使用自己的 var 的方法似乎没问题。

但要记住！！

*   我不认为你可以锁定一个原语，它必须是一个`Object`
*   如果更改字段值，下一个进程将获得不同的锁！！！

所以单独的锁似乎更安全。除非您绝对确定您的字段不会更改（实际上，您应该将其声明为`final`）。

# jquery - Jquery没有在ajax调用上运行

> ID：10548070
> 
> 赞同：0
> 
> 时间：2012-05-11T08:35:52.783
> 
> 标签：jquery, ajax

这是一个作者姓名加载器
，当单击字母表单 A -- Z
时它将发送此页面
作者/字母/ [字母值]的 ajax 请求

问题是加载页面中的 Jquery 不起作用所以有什么方法可以让 jquery 在 ajax 中调用页面后工作

```
 var startlink='authors/letters/ALL';
    $.post(startlink,{},function(data){$('div#ajax-loader').html(data);});

    $('#letters a').click(function(){
    var link = $(this).attr("href");
    $.post(link,{},function(data){
       $('div#ajax-loader').empty();
      $('div#ajax-loader').load(data);

    });

    return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:50:16.363

您必须将函数调用放在父页面（您从中调用 AJAX 的页面）中，这将允许您执行 AJAX 请求中包含的函数。如果没有另一种方法，但我不建议使用它，但可以使用`eval`

假设您要拦截的链接是代码中的链接，您可以随时将其更改为：

```
$('#letters a').live("click", function(){
    var link = $(this).attr("href");
    $.post(link,{},function(data){
        $('div#ajax-loader').empty();
        $('div#ajax-loader').load(data);
    });
}); 
```

# c - 什么是三重 DESm (3DESm) 加密方法？它与 3DES 有很大不同吗？

> ID：10548073
> 
> 赞同：0
> 
> 时间：2012-05-11T08:36:09.853
> 
> 标签：c, encryption, 3des

我必须在 C 程序中解密已在 CBC 模式下使用 3DESm 方法加密的加密消息。它看起来与我们从 3DES 方法得到的加密消息完全不同。通常我们加密后得到的密文是一个长度为16的十六进制数，仅包含0-9和AF等字符。但我需要解密的密文长度超过 20 个字符，包括 AZ、az、0-9 中的所有字符，还包括一些特殊字符，如“+”和“=”。哪个图书馆有助于做必要的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:41:24.473

您从任何普通块密码中获得的密文由原始字节/二进制数据组成，而不是十六进制。在 DES 的情况下，这些是每块 8 个字节。

如果您更喜欢文本而不是二进制数据，则可以对它们进行编码。看起来您的密文是 Base64 而不是十六进制编码。但这是一个独立于密码选择的选择。

Base64 使用所有 ASCII 字母和数字以及`+`和`/`对数据进行编码，`=`如果输入不是 6 位的倍数，则作为填充。

# c++ - 通过 ODBC 写入 MySQL 表的二进制数据被截断

> ID：10548076
> 
> 赞同：3
> 
> 时间：2012-05-11T08:36:20.787
> 
> 标签：c++, mysql, odbc

我有一个 MySQL 数据库，其中包含一个包含`BINARY(16)`列的表。

当我从我的 C++ 应用程序通过 ODBC 写入二进制数据时，数据被视为以 Null 结尾的字符串，即它在数据中的第一个 Null 字节处被截断。

在我的 C++ 应用程序中，我使用如下方式绑定一个`unsigned char [16]`数组：`SQLBindParameter`

```
SQLBindParameter(statementHandler, paramCount, SQL_PARAM_INPUT, SQL_C_BINARY, SQL_BINARY, MAX_NOTIFICATION_OUT_IP_BIN_LEN, 0, _notificationOutDstIP, MAX_NOTIFICATION_OUT_IP_BIN_LEN, 0); 
```

`MAX_NOTIFICATION_OUT_IP_BIN_LEN`是 16。

即使二进制数据包含 Null 值，如何确保将 16 个字节写入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:02:27.297

来自[MSDN 文档`SQLBindParameter`](http://msdn.microsoft.com/en-us/library/ms710963.aspx)：

> 如果`StrLen_or_IndPtr`是一个空指针，驱动程序假定所有输入参数值都是非`NULL`空的，并且字符和二进制数据都是空终止的。

相反，将该参数设置为指向数据长度的指针：

```
SQLBindParameter(statementHandler,
                 paramCount,
                 SQL_PARAM_INPUT,
                 SQL_C_BINARY, SQL_BINARY,
                 MAX_NOTIFICATION_OUT_IP_BIN_LEN,
                 0,
                 _notificationOutDstIP,
                 MAX_NOTIFICATION_OUT_IP_BIN_LEN,
                 &MAX_NOTIFICATION_OUT_IP_BIN_LEN
); 
```

# php - 限制字符串中的字符数量

> ID：10548078
> 
> 赞同：0
> 
> 时间：2012-05-11T08:36:26.573
> 
> 标签：php

我正在使用以下内容来限制字符串中的字符数

```
<?php $eventtitle1 = get_the_title();
$eventtitle1_str = strip_tags($eventtitle1, '');
echo substr($eventtitle1_str,0,30) . "…"; ?> 
```

如果字符串超过 30 个字符，是否可以添加“...”，但如果少于 30 个字符，是否可以添加？

**例如**

因此，它会为更长的标题执行此操作：

“这是一个更长的时间……”

它为更短的标题执行此操作：

“这是一个标题”

（即不是这个 - “这是一个标题......”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:39:16.823

```
public function Truncate($string, $maxLen)
{
    if (strlen($string) > $maxLen)
    {
        return substr($string, 0, $maxLen) . '...';
    }
    return $string;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:40:20.893

试试这个

```
<?php $eventtitle1 = get_the_title();
    $eventtitle1_str = strip_tags($eventtitle1, '');
    $strlen= strlen ( $eventtitle1_stng );
    if($strlen>30)
    echo substr($eventtitle1_str,0,30) . "…";
    else
    echo $eventtitle1_str;
     ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:39:20.393

试试这个：

```
if (strlen($eventtitle1_str) > 30) {
    $eventtitle1_str  = substr($eventtitle1_str,0,30) . "…";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:39:54.207

```
if ( strlen ( $eventtitle1_str ) > 30 ) {
  //Some logic
}
else {
  // Some logic
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:40:49.677

见[strlen](http://php.net/manual/de/function.strlen.php)。

例如：

```
echo substr($eventtitle1_str,0,30) . (strlen($eventtitle1_str) > 30 ? "…" : ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T08:41:51.080

您可以`strlen`用于检查字符数。

```
<?php $eventtitle1 = get_the_title();
    $eventtitle1_str = strip_tags($eventtitle1, '');
     if(strlen($eventtitle1_str) > 30 ){     
       echo substr($eventtitle1_str,0,30) . "…"; 
    }else{
       echo substr($eventtitle1_str,0,30); 
     }

 ?> 
```

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T08:42:48.783

```
<?php
$eventtitle1 = get_the_title();
$eventtitle1_str = strip_tags($eventtitle1, '');

if (strlen($eventtitle1_str) > 30) {
    echo substr($eventtitle1_str, 0, 30)."…";
} else {
    echo $eventtitle1_str;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T08:45:51.653

除了这里的许多正确答案之外，**我还建议使用**`&hellip;`HTML 中的实体`...`而不是**MBSTRING**扩展名。

所以代码看起来像：

```
$eventtitle1 = get_the_title();
$eventtitle1_str = strip_tags($eventtitle1, '');
if(mb_strlen($eventtitle1_str) > 30)
    echo mb_substr($eventtitle1_str, 0, 30) . "&hellip;";
} else {
    echo $eventtitle1_str;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-11T08:51:43.507

试试这个

> echo substr_replace($eventtitle1_str, '...', 30);

在这里查看示例#1，希望这可以帮助：
[http ://us.php.net/manual/en/function.substr-replace.php](http://us.php.net/manual/en/function.substr-replace.php)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-11T08:52:07.380

我认为这是`str_word_count` [http://php.net/manual/en/function.str-word-count.php的工作](http://php.net/manual/en/function.str-word-count.php)

例子

```
$test = " I love to play foodtball";
var_dump ( substr ( $test, 0, 12 ) );
var_dump ( wordCount ( $test, 12 ) ); 
```

输出

```
string ' I love to p' (length=12)
string 'I love to play ...' (length=18) 
```

你能看到一个比另一个更具可读性吗

使用的功能

```
function wordCount($str, $max, $surffix = "...") {
    $total = 0;
    $words = str_word_count ( $str, 1 );
    $output = "";
    foreach ( $words as $word ) {
        $total += strlen ( $word );
        if ($max < $total)
            break;
        $output .= $word . " ";
    }
    $output .= $surffix ;
    return trim ( $output );
} 
```

# mysql - 如何从两个表中选择列，并按其中一个排序？

> ID：10548090
> 
> 赞同：0
> 
> 时间：2012-05-11T08:37:13.970
> 
> 标签：mysql

我想在我的 mysql DB 上做一件事。

我有两张桌子：

第一表：

```
| article          | longtext             | YES  |     | NULL    |                |
| article_id       | int(11)              | YES  |     | NULL    |                | 
```

第二表：

```
| id    | int(11)  |
| name  | longtext | 
| commit_date  | date | 
```

当 first_table.article_id = second_table.id 时，article = name。

我想从第一个表中选择 article 和 article_id 并按 commit_date 对它们进行排序（对每条记录都正确），它位于第二个表中。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:45:24.977

看看下面的查询，应该做你想做的事：

```
SELECT article, article_id
FROM first_table f
JOIN Second_table s ON f.article_id = s.id AND f.article = s.name
ORDER BY s.commit_date 
```

# git - Review board的post-review不能用git，为什么？

> ID：10548098
> 
> 赞同：2
> 
> 时间：2012-05-11T08:37:46.827
> 
> 标签：git, review-board

我终于建立了一个 git 和审查委员会服务器。

我确信 Git 工作正常，客户端机器可以拉/推文件！

审查委员会服务器也可以正常工作。我可以在网页上手动创建一个新请求，另一个人可以从电子邮件中看到审查请求。

我们有两台机器，A 有一个 git 远程服务器和复习板服务器。B是我的工作机——Ubuntu桌面，还有一个git系统。

当我在 B 上的一个 git 测试项目中运行 post-review 时，出现此错误：

```
post-review 
```

上传差异时出错

生成的差异文件是空的。这通常意味着在此更改中没有修改任何文件。

尝试使用 --output-diff 和 --debug 运行以获取更多信息。

您的审核请求仍然存在，但未附加差异。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:35:45.210

我自己解决了。因为在review board admin页面配置git路径的时候，不要使用git@server:yourproject.git格式，必须使用repositories中本地git项目文件夹的文件路径。
例如：
/home/git/repositories/maventest.git
也是我的审查委员会依赖项 lighttpd，配置 lighttpd.conf 以使其以 git 用户身份运行。有人说评论区管理页面的git配置中的镜像路径应该使用git@server:yourproject.git格式。我试过了，但是建议你应该在评论区的SSH设置页面中导入一个私钥。
希望它可以帮助别人。

# java - Java中的表可以使用什么数据结构？

> ID：10548099
> 
> 赞同：1
> 
> 时间：2012-05-11T08:37:56.120
> 
> 标签：java, data-structures, collections

我需要存储以表格形式提供的数据，我可以在 Java 中使用什么来做到这一点？

形成列和行的键是 Object，所以我需要一个可以表示为三元组的结构： `<Object Row,Object Col, Object Val>`其中每个 Row,Col 只有一个 val，而对于所有 Row X Col，都有一个值。

或者我应该使用一个简单的二维数组并将索引转换为相应的对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T08:46:14.293

Guava 提供了一个[`Table`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)可能是您需要的集合。有关更多信息，请参阅[Guava 用户指南](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)。

示例用法：

```
Table<Integer, Integer, Object> myTable = HashBasedTable.create();
myTable.put(1, 2, "foo"); // put an object in row 1, column 2. 
```

如果不想使用 Guava，就使用二维数组即可，如下图：

```
Object[][] myTable2 = new Object[5][5];
myTable2[0][1] = "foo"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T08:49:29.047

如果 Guava 不是一个选项，我会使用 a `Map<Coordinate, Val>`，其中 Coordinate 是一个自定义对象，其中包含您的行和列对象，并正确实现 equals 和 hashCode 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:43:51.543

```
HashMap<Object, ArrayList> myTable = new HashMap<Object, ArrayList>(); 
```

# ios - QuickDialog/QuickDialog.h 文件未找到 xcode 4.2

> ID：10548103
> 
> 赞同：1
> 
> 时间：2012-05-11T08:38:26.823
> 
> 标签：ios, xcode, quickdialog

嗨，我想使用 QuickDialog 库，但给了我错误。

我所做的步骤：

1.  从github下载
2.  将目录复制到我的项目目录中
3.  添加 QuickDialog.xcodeproject
4.  我的项目 --> 构建短语：目标倾向：添加 QuickDialog 链接二进制：添加 libQuickDialog.a
5.  包含在 mi 文件 Prefix.phc 中：#import
6.  我的项目->构建设置：其他链接器标志：-ObjC 用户标头搜索路径：“$ {PROJECT_DIR}/QuickDialog”并选中该框始终搜索用户路径：是
7.  跑

但是给我错误：找不到 QuickDialog/QuickDialog.h 文件

怎么了？？？

请帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:42:26.150

如果你把这个：“${PROJECT_DIR}/QuickDialog”

并且您尝试导入“QuickDialog/QuickDialog.h”，这意味着他进入目录：“${PROJECT_DIR}/QuickDialog/QuickDialog/QuickDialog.h”？

您是否尝试仅输入：“QuickDialog.h”？

编辑：解决方案在这里：[Include QuickDialog into Xcode 4.2 Project](https://stackoverflow.com/questions/9308297/including-quickdialog-into-xcode-4-2-project)

# wget - 如何在使用 wget 镜像站点时跳过选定的 url

> ID：10548113
> 
> 赞同：3
> 
> 时间：2012-05-11T08:39:29.473
> 
> 标签：wget

我有以下问题。我需要镜像受密码保护的站点。听起来很简单的任务：

```
wget -m -k -K -E --cookies=on --keep-session-cookies --load-cookies=myCookies.txt http://mysite.com 
```

在 myCookies.txt 中，我保留了正确的会话 cookie。这一直有效，直到 wget 进入注销页面 - 然后会话无效，并且有效地，进一步的镜像是无用的。

W 尝试添加`--reject`选项，但它仅适用于文件类型 - 我只能阻止 html 文件下载或 swf 文件下载，我不能说

```
--reject http://mysite.com/*.php?type=Logout* 
```

任何想法如何跳过 wget 中的某些 URL？也许还有其他工具可以完成这项工作（必须在 MS Windows 上工作）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:37:52.373

如果您*首先*下载（甚至只是`touch`）注销页面，然后

```
wget --no-clobber --your-original-arguments 
```

这应该跳过注销页面，因为它已经下载

（免责声明：我自己没有尝试过）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-26T06:44:02.117

我也遇到过这个问题，后来这样解决了：“--reject-regex logout”，更多：[wget-devTips](https://github.com/mythkiven/mkPlan/blob/master/devTips/wget.md)

# java - 使用java（jdbc）在mysql中插入地理空间数据类型（mutipolygon）

> ID：10548114
> 
> 赞同：0
> 
> 时间：2012-05-11T08:39:29.553
> 
> 标签：java, jdbc, geospatial, geotools

我正在使用 geotools 库来提取位置信息。有了这个，我得到了一个类型的对象

```
class com.vividsolutions.jts.geom.MultiPolygon 
```

我现在想通过 jdbc 连接将此字段存储在我的 mysql 表中。当我 `pstmtInsert.setObject(4, geoobject)` 收到此错误时直接尝试插入它时

```
Exception in thread "main" com.mysql.jdbc.MysqlDataTruncation: Data truncation: Cannot get geometry object from data you send to the GEOMETRY field 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:31:38.547

# 回答

1.  您需要将必须的几何对象转换为众所周知的文本。您可以在vividsolutions [API 文档](http://www.vividsolutions.com/jts/javadoc/com/vividsolutions/jts/geom/Geometry.html#toText%28%29)中找到有关如何执行此操作的信息。

    ```
    geoobject.toText(); 
    ```

2.  [使用 mysql GeomFromText](http://dev.mysql.com/doc/refman/5.0/en/populating-spatial-columns.html)方法插入/更新数据。

    ```
    INSERT INTO geom VALUES (GeomFromText(@g)); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T21:59:16.987

它也可以是二进制的，例如

```
PreparedStatement preparedStatement = connection.prepareStatement
("INSERT INTO table (point, polygon) VALUES (PointFromWKB(?), GeomFromWKB(?))");

WKBWriter writer = new WKBWriter();

preparedStatement.setBytes(1, writer.write(point));
preparedStatement.setBytes(2, writer.write(polygon));

preparedStatement.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:56:42.627

MySql 不知道如何存储您的 GEO 对象，或者他的大小。您不应该以您尝试的方式存储对象。

[PreparedStatement#setObject()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html#setObject%28int,%20java.lang.Object%29)文档说：

> JDBC 规范指定了从 Java 对象类型到 SQL 类型的标准映射。给定的参数将在发送到数据库之前转换为相应的 SQL 类型。[...]如果存在歧义，例如，如果对象属于实现多个上述接口的类，则此方法会引发异常。

# c# - 在运行时将 .h 头文件解析为 c# 数据结构

> ID：10548116
> 
> 赞同：3
> 
> 时间：2012-05-11T08:39:38.570
> 
> 标签：c#, c++, parsing, compiler-construction, compilation

我正在尝试编写一个 C# 库来操作我的 C/C++ 头文件。我希望能够读取和解析头文件并在 C# 中操作函数原型和数据结构。由于#ifdefs 和类似的东西引起的所有代码分支，我试图避免编写C Parser。

我尝试过使用 EnvDTE，但找不到任何像样的文档。有什么想法我该怎么做？

编辑 - 谢谢你的回答......这里有一些关于我的项目的更多细节：我正在使用调试 API 为 Windows 编写一个类似 ptrace 的工具，这使我能够跟踪我已经编译的二进制文件并查看哪些 Windows API 是被调用。我还想看看每次调用中给出了哪些参数以及给出了哪些返回值，所以我需要知道 API 的定义。我也想知道我自己的库的定义（因此，头解析方法）。我想到了 3 个解决方案： * 解析头文件 * 解析 PDB 文件（我使用 DIA SDK 编写了一个原型，但不幸的是，符号 PDB 仅包含有关 API 的一般信息，而不包含带有参数和返回值的真实原型） * 爬取 MSDN 在线图书馆（自动或手动）

有没有更好的方法可以在 c# 中在运行时获取 windows API 和我的库的名称和类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:38:37.700

解析 C（甚至“只是”标题）很难；该语言比人们记忆中的要复杂，然后是预处理器，最后是解析的问题。C++ 基本上包含了所有的 C，而这里的 C++11 问题更严重。

人们通常可以针对一组有限的输入破解 98% 的解决方案，通常使用 Perl 中的正则表达式或其他一些字符串破解。如果这对你有用，那很好。通常发生的情况是 2% 导致被破解的解析器阻塞或产生错误的答案，然后您可以调试结果并手动破解 98% 的解决方案输出。

被黑客入侵的解决方案往往会在真正的头文件上失败，这些头文件似乎将怪异集中在宏和条件句中（有时甚至会在条件臂中混合 C 和 C++ 的不同方言）。以典型的 Microsoft .h 文件为例。这似乎是 OP 想要处理的。预处理解决了部分问题，现在您将遇到 C 和/或 C++ 的真正复杂性。即使经过预处理，你也不会得到真正头文件的 98% 解决方案；您需要 typedef，因此也需要名称和类型解析。您可能会“解析” FOO X；这告诉你 X 是 FOO 类型的……哎呀，那是什么？只有符号表才能确定。

GCCXML 为 C 的 GCC 方言做了所有这些预处理、解析和符号表构建。微软的方言不同，我不认为 GCCXML 可以处理它。

一个更通用的工具是我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)，它带有[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)；还有一个[C++ 前端](http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html)（是的，它们是不同的；C 和 C++ 绝对不是同一种语言）。这些处理各种 C 方言（正确配置时包括 MS 和 GCC），进行宏/条件扩展，构建 AST 和符号表（名称和类型解析是否正确）。

您可以通过爬取生成的符号表结构来添加自定义以提取您想要的信息。您必须将您想要的内容导出到 C#（例如生成您的 C# 类），因为 DMS 不是用 .net 语言实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:06:28.843

在最一般的情况下，头文件只能使用，不能转换。

这是由于预处理器（#define）可能使用宏、结构常量的片段等，这些只有在上下文中使用时才有意义。

例子

*   宏中带有##的任何东西

或者

```
//header
#define mystructconstant "bla","bla"

// in using .c
char test[10][2] ={mystructconstant}; 
```

但是您不能简单地丢弃所有宏，因为那样您就不会处理非常常见的调用约定宏

等等等等

因此，标头解析和转换大多仅适用于半自动化使用（通过它手动运行清理的标头）或相当干净和一致的标头（例如较旧的 MS SDK 标头）

由于一般情况如此困难，因此没有多少现成的。每个人都为自己的标题制作快速而肮脏的东西。

我知道的唯一更通用的工具是 SWIG。

# android - Twitter登录对话框错误

> ID：10548117
> 
> 赞同：4
> 
> 时间：2012-05-11T08:39:38.863
> 
> 标签：android, twitter

![在此处输入图像描述](../Images/88a0081a3301f44c9c8e18415a84fbb3.png)

**嗨，我已经在我的 android 应用程序中集成了 twitter。这里的问题是，当我尝试登录 twitter 时，它应该第一次显示登录对话框，它正在正确显示对话框并且我能够登录到 twitter 帐户，但是在我第二次尝试登录时，它显示一个空白的 Twitter 对话框。下面是我的 TwitterDialog 代码。我该如何解决这个问题。请给我一个解决方案。**

```
public class TwitterDialog extends Dialog {

    static final float[] DIMENSIONS_LANDSCAPE = { 460, 260 };
    static final float[] DIMENSIONS_PORTRAIT = { 280, 420 };
    static final FrameLayout.LayoutParams FILL = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,ViewGroup.LayoutParams.FILL_PARENT);
    static final int MARGIN = 4;
    static final int PADDING = 2;

    private String mUrl;
    private TwDialogListener mListener;
    private ProgressDialog mSpinner;
    private WebView mWebView;
    private LinearLayout mContent;
    private TextView mTitle;

    private static final String TAG = "Twitter-WebView";

    public TwitterDialog(Context context, String url, TwDialogListener listener) {
        super(context);
        mUrl = url;
        mListener = listener;
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mSpinner = new ProgressDialog(getContext());
        mSpinner.requestWindowFeature(Window.FEATURE_NO_TITLE);
        mSpinner.setMessage("Loading...");
        mContent = new LinearLayout(getContext());
        mContent.setOrientation(LinearLayout.VERTICAL);
        setUpTitle();
        setUpWebView();
        Display display = getWindow().getWindowManager().getDefaultDisplay();
        final float scale = getContext().getResources().getDisplayMetrics().density;
        float[] dimensions = (display.getWidth() < display.getHeight()) ? DIMENSIONS_PORTRAIT: DIMENSIONS_LANDSCAPE;addContentView(mContent, new FrameLayout.LayoutParams((int) (dimensions[0] * scale + 0.5f), (int) (dimensions[1]* scale + 0.5f)));
    }

    private void setUpTitle() {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        Drawable icon = getContext().getResources().getDrawable(R.drawable.twitter_icon);
        mTitle = new TextView(getContext());

        mTitle.setText("Twitter");
        mTitle.setTextColor(Color.WHITE);
        mTitle.setTypeface(Typeface.DEFAULT_BOLD);
        mTitle.setBackgroundColor(0xFFbbd7e9);
        mTitle.setPadding(MARGIN + PADDING, MARGIN, MARGIN, MARGIN);
        mTitle.setCompoundDrawablePadding(MARGIN + PADDING);
        mTitle.setCompoundDrawablesWithIntrinsicBounds(icon, null, null, null);
        mContent.addView(mTitle);
    }

    private void setUpWebView() {
        mWebView = new WebView(getContext());

        mWebView.setVerticalScrollBarEnabled(false);
        mWebView.setHorizontalScrollBarEnabled(false);
        mWebView.setWebViewClient(new TwitterWebViewClient());
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl(mUrl);
        mWebView.setLayoutParams(FILL);
        //mWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        mContent.addView(mWebView);
    }

    private class TwitterWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Constants.LOG)Log.d(TAG, "Redirecting URL " + url);
            if (url.startsWith(TwitterApp.CALLBACK_URL)) {
                mListener.onComplete(url);
                //mWebView.getSettings().setAppCacheEnabled(false);
                //mWebView.refreshDrawableState();
                if (Constants.LOG)Log.d(TAG, "Clearing chache");
                TwitterDialog.this.dismiss();
                return true;
            } else if (url.startsWith("authorize")) {
                return false;
            }
            return true;
        }
        @Override
        public void onReceivedError(WebView view, int errorCode,
            String description, String failingUrl) {
            if (Constants.LOG)Log.d(TAG, "Page error: " + description);
            super.onReceivedError(view, errorCode, description, failingUrl);
            mListener.onError(description);
            TwitterDialog.this.dismiss();
        }
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            if(Constants.LOG)Log.d(TAG, "Loading URL: " + url);
            super.onPageStarted(view, url, favicon);
            mSpinner.show();
        }
        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            String title = mWebView.getTitle();
            if (title != null && title.length() > 0) {
            mTitle.setText(title);
            }
            mSpinner.dismiss();
        }

    }
}`` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T09:11:27.437

You need to force login second time to resolve this issue,

So just add the **force_login=true** in your twitter authorize url.

I mean just change the below line of code in **TwitterApp.java** class (if you have a class file with different name then search in your project with **DefaultOAuthProvider**)

```
mHttpOauthprovider = new DefaultOAuthProvider("http://twitter.com/oauth/request_token",
                "http://twitter.com/oauth/access_token",
        "http://twitter.com/oauth/authorize?force_login=true"); 
```

after adding **force_login=true** webview loading issue will be resolve but every time you need to enter login and password.

I was stuck whole day to resolve this issue.

# android - 绘制类似 MapsApp 的叠加层

> ID：10548121
> 
> 赞同：5
> 
> 时间：2012-05-11T08:39:46.517
> 
> 标签：android, google-maps, overlay

我被一项任务困住了，这对我来说似乎不像以前那么微不足道。我需要制作一个使用 MapActivity 的应用程序，并在其上绘制一些叠加层......（已经完成），现在我的 onTap() 方法有问题，我需要让它看起来像 Android 的原始地图应用程序, 喜欢这个[http://i.stack.imgur.com/EkZEr.png](http://i.stack.imgur.com/EkZEr.png)

我是 android 新手，似乎没有教程可以解释如何为此类叠加层编写类...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:46:21.453

```
in onTap()

LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout ll = (LinearLayout)inflater.inflate(R.layout.mylocation_balloon, null);
LayoutParams lp = new LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT,mapOverlays.get(index).getPoint(), 0, -70, LayoutParams.MODE_MAP | LayoutParams.CENTER); 
```

# objective-c - 防止自动保存 RestKit 映射

> ID：10548123
> 
> 赞同：1
> 
> 时间：2012-05-11T08:39:49.617
> 
> 标签：objective-c, synchronization, mapping, restkit

我正在使用 RestKit 来映射 XML 文件。在该文件中有几个项目映射到一个类，我们称之为`ListItem`。这些列表项引用了缩略图文件。一旦映射完成，我就开始下载缩略图，这样我就可以确定它们在我需要时可用。

现在我想确保正确下载这些文件。检查缓存中文件的存在不会有问题，但我希望只有在所有文件下载成功时才保存上下文。

我只是不知道在什么时候完成了保存。在我调用映射方法之后

```
[objectManager loadObjectsAtResourcePath:@"data.xml" delegate:self]; 
```

映射正在完成，我得到了结果

```
- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects 
```

这是我开始下载图像的地方，但此时已经保存了上下文。我不知道如何防止这种行为。

我想出的唯一想法是复制 sql 文件并使用复制文件`objectStore`来执行同步。当同步成功时，用副本覆盖原始 sql。

有人知道更好的方法吗？我是否错过了在映射过程中调用的方法？

# javascript - KendoUI：为什么 categoryAxis 中的日期被打乱了？

> ID：10548134
> 
> 赞同：3
> 
> 时间：2012-05-11T08:40:24.310
> 
> 标签：javascript, php, jquery, kendo-ui, kendo-dataviz

我正在使用 KendoUI DataViz Chart 来显示统计数据，并且有来自 JSON 数据源的日期并被设置为 categoryAxis，但它们会自动打乱，即；不知何故，中间日期显示为第一个字段，反之亦然。有关详细信息，请参阅随附的屏幕截图。我不知道为什么会这样，请帮忙！ ![在此处输入图像描述](../Images/fad7c754b213a6494745e3e4affdd16b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:19:59.370

我认为您在 Chrome 中遇到了[稳定排序](https://stackoverflow.com/questions/3026281/array-sort-sorting-stability-in-different-browsers)的问题:)。此问题已在 Kendo UI 的 Q2 2012 SP1 版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T03:15:32.953

我相信 Kendo UI Charts 正在寻找一个 unix 时间戳。尝试将几个值格式化为时间戳，然后使用模板格式化日期，如下所示：

```
categoryAxis: {
    labels: {
        template: "#= formatDate(value) #"
    }
} 
```

formatDate 将是您定义的一个函数，它可以生成您希望在轴中显示的字符串。

我认为这种方法将允许剑道正确地订购您的日期并为您提供您正在寻找的格式。

# java - Java：抛出异常

> ID：10548146
> 
> 赞同：3
> 
> 时间：2012-05-11T08:41:17.123
> 
> 标签：java, exception, exception-handling

抛出异常时将对象传递给构造函数是个好主意吗？

让我们假设在服务包的某个地方有下一个代码。

```
throw new MyException(object); 
```

MyException 类：

```
Object object;
public MyException(Object object) {
    super();
    this.object = object;
}

public Object getObject() {
    return object;
} 
```

然后，假设在 GUI 中，我们必须处理服务中抛出的异常。我们只是捕获了一个异常并想要访问构造函数中传递的对象。这行得通。但从风格的角度来看，它是正确的吗？

使用 getObject() 是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:45:41.217

我会说这取决于你在做什么`getObject`。如果您只是使用它来报告错误或管理从异常中恢复，那么这没有任何问题。我会传递比对象更具体的东西。例如，我可能会提供有关错误原因的异常信息，并捕获任何可能有助于解决错误的有用信息。

另一方面，如果您使用这个对象来继续控制流的一些正常分支，那么这不会被认为是对异常的正常使用！再说一遍，例外是针对特殊情况，仅此而已。如果您要与他们一起做其他事情，那通常是个坏主意。

如果您使用异常来捕获稍后要处理的结果，那么这是一种不好的设计气味。考虑重构您的代码以将这些对象写入存储以供以后处理，或者诸如此类。不要滥用异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:50:53.597

一般来说，是的，最好将数据添加到异常对象中，这可能对处理异常的代码有用。

但是，`getObject()`返回 an`Object`的方法过于通用 - 方法的名称以及对象的类型应该特定于异常 - 如果需要，请创建多个异常类，然后您可以在 catch 块中区分它们。

最后，这种东西可能会被滥用于常规控制流。我不同意这本质上是“邪恶”的标准教条——异常*是*一种控制流机制。但它们不利于可维护性，因为它隐式地连接了代码片段。因此，仅当您确实需要一种方法将控制流向上传递到调用堆栈的多个级别并且已经认真考虑过替代方案时，才应该使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:51:42.250

与往常一样，这将取决于您的系统结构和您想要实现的目标，但 IMO 这是一种可以接受的方式。

实际上，这是默认异常 API 处理错误消息和原因的方式，将它们作为构造函数参数传递（请参阅[异常](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html#Exception%28java.lang.String,%20java.lang.Throwable%29)构造函数 API 文档）以供稍后处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:53:37.893

捕获异常的类取决于封装在异常中的对象的（静态）类。最小化依赖关系通常是一个好主意。这就是为什么我不会将组件内部的类封装到异常中。只有当异常和封装的类属于同一个组件时，我才会将组件的公共类封装在异常中。

# c# - 使用复选框禁用 ListView 中的单个复选框

> ID：10548149
> 
> 赞同：3
> 
> 时间：2012-05-11T08:41:27.807
> 
> 标签：c#, .net, winforms, listview, checkbox

我有一个带有复选框的 ListView：

```
 listView1.View = View.Details;
        listView1.CheckBoxes = true;

        ListViewItem item1 = new ListViewItem("ONE");
        ListViewItem item2 = new ListViewItem("TWO");
        ListViewItem item3 = new ListViewItem("THREE");

        listView1.Items.Add(item1);
        listView1.Items.Add(item2);
        listView1.Items.Add(item3); 
```

我只想禁用第二个复选框，可以吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:05:20.843

我认为您可以使用**DrawItem**事件通过所有者绘图来做到这一点。在事件处理程序中，在复选框上绘制一个填充有**SystemColors.Window的矩形以将其隐藏。**

我还实现了隐藏在 3rd 方控件[Better ListView Express](http://www.componentowl.com/better-listview-express)中的复选框。项目有一个名为**AllowShowCheckBox**的布尔属性，您可以分别在每个项目上将其设置为 false。它还支持三态复选框。

# c++ - 仅当展开循环时才没有未指定的启动错误？

> ID：10548151
> 
> 赞同：2
> 
> 时间：2012-05-11T08:41:36.647
> 
> 标签：c++, cuda

更新：标题具有误导性。最初我可以通过在下面的代码中展开`block`循环来使错误消失。现在，即使是简单的代码更改也会让它消失。（参见下面的代码示例）。

背景：

一个 12x12 矩阵的 Cholesky 分解的 CUDA C 内核实现会产生一个相当大的 CUDA 内核（280 行代码，很多循环）。

我通过减少设置（下面的代码）重现了错误。NVCC (CUDA 4.2) 调用

```
nvcc -arch sm_20 -o main main.cu 
```

在 Linux 上的 Fermi 架构上执行：

```
kernel call: unspecified launch failure 
```

内核体包含一个条件预处理块`#if 1`, `#else`, `#endif`. 我插入它是为了在工作和非工作版本之间轻松切换。编译第一个替代结果在`unspecified launch failure`. 而第二种选择运行良好。

棘手的部分是，实际执行的代码在任何一种情况下都应该是相同的。（hasOrderedRep 是真的！！）

即使`#if 1`语句保持不变，仍然可以使错误消失。因此`block`必须展开循环。这就是标题的来源。

```
#include "cuda.h"
#include "stdio.h"
#include <iostream>
#include <string>

using namespace std;

/////////////////////////////////////
//
// First some basic types I need
// Implementation of a templated
// scalar and complex number

template<class T> class RScalar
{
public:
  __device__  RScalar() {}

  __device__  ~RScalar() {}

  template<class T1>  __device__   
  RScalar(const RScalar<T1>& rhs) : F(rhs.elem()) {}

  template<class T1>  __device__
  RScalar(const T1& rhs) : F(rhs) {}

  template<class T1> __device__ inline
  RScalar& operator=(const RScalar<T1>& rhs)  {
    elem() = rhs.elem();
    return *this;
  }

public:
  __device__ T& elem() {return F;}
  __device__ const T& elem() const {return F;}

private:
  T F;
};

template<class T> class RComplex
{
public:
  __device__  RComplex() {}

  __device__  ~RComplex() {}

  template<class T1, class T2>  __device__
  RComplex(const RScalar<T1>& _re, const RScalar<T2>& _im): 
    re(_re.elem()), im(_im.elem()) {}

  template<class T1, class T2>  __device__
  RComplex(const T1& _re, const T2& _im): re(_re), im(_im) {}

  template<class T1>  __device__
  RComplex(const T1& _re): re(_re), im() {}

  template<class T1>
  __device__ inline
  RComplex& operator*=(const RScalar<T1>& rhs) 
    {
      real() *= rhs.elem();
      imag() *= rhs.elem();
      return *this;
    }

  template<class T1>
  __device__ inline
  RComplex& operator-=(const RComplex<T1>& rhs) 
    {
      real() -= rhs.real();
      imag() -= rhs.imag();
      return *this;
    }

  template<class T1>  __device__ inline
  RComplex& operator/=(const RComplex<T1>& rhs) 
    {
      RComplex<T> d;
      d = *this / rhs;
      real() = d.real();
      imag() = d.imag();
      return *this;
    }

public:
  __device__ T& real() {return re;}
  __device__ const T& real() const {return re;}

  __device__ T& imag() {return im;}
  __device__ const T& imag() const {return im;}

private:
  T re;
  T im;
};

template<class T> __device__ RComplex<T>
operator*(const RComplex<T>& __restrict__ l, 
      const RComplex<T>& __restrict__ r) 
{
  return RComplex<T>(l.real()*r.real() - l.imag()*r.imag(),
             l.real()*r.imag() + l.imag()*r.real());
}

template<class T> __device__ RComplex<T>
operator/(const RComplex<T>& l, const RComplex<T>& r)
{
  T tmp = T(1.0) / (r.real()*r.real() + r.imag()*r.imag());

  return RComplex<T>((l.real()*r.real() + l.imag()*r.imag()) * tmp,
             (l.imag()*r.real() - l.real()*r.imag()) * tmp);
}

template<class T> __device__ RComplex<T>
operator*(const RComplex<T>& l, const RScalar<T>& r)
{
  return RComplex<T>(l.real()*r.elem(), 
             l.imag()*r.elem());
}

//
//
//////////////////////////////////////////////

#define REALT float
#define Nc 3

struct PrimitiveClovTriang
{
  RScalar<REALT>   diag[2][2*Nc];
  RComplex<REALT>  offd[2][2*Nc*Nc-Nc];
};

__global__ void kernel(bool hasOrderedRep, int * siteTable, 
               PrimitiveClovTriang* tri)
{
  RScalar<REALT> zip=0;
  int N = 2*Nc;
  int site;

  //
  // First if-block results in an error,
  // second, runs fine! Since hasOrderedRep
  // is true, the code blocks should be
  // identical.
  //
#if 1
  if (hasOrderedRep) {
    site = blockDim.x * blockIdx.x + 
      blockDim.x * gridDim.x * blockIdx.y + 
      threadIdx.x;
  } else {
    int idx0 = blockDim.x * blockIdx.x + 
      blockDim.x * gridDim.x * blockIdx.y + 
      threadIdx.x;
    site = ((int*)(siteTable))[idx0];
  }
#else
  site = blockDim.x * blockIdx.x + blockDim.x * gridDim.x * blockIdx.y + threadIdx.x;
#endif

  int site_neg_logdet=0;
  for(int block=0; block < 2; block++) { 
    RScalar<REALT> inv_d[6];
    RComplex<REALT> inv_offd[15];
    RComplex<REALT> v[6];
    RScalar<REALT>  diag_g[6];
    for(int i=0; i < N; i++) { 
      inv_d[i] = tri[site].diag[block][i];
    }
    for(int i=0; i < 15; i++) { 
      inv_offd[i]  =tri[site].offd[block][i];
    }
    for(int j=0; j < N; ++j) { 
      for(int i=0; i < j; i++) { 
    int elem_ji = j*(j-1)/2 + i;
    RComplex<REALT> A_ii = RComplex<REALT>( inv_d[i], zip );
    v[i] = A_ii*RComplex<REALT>(inv_offd[elem_ji].real(),-inv_offd[elem_ji].imag());
      }
      v[j] = RComplex<REALT>(inv_d[j],zip);
      for(int k=0; k < j; k++) { 
    int elem_jk = j*(j-1)/2 + k;
    v[j] -= inv_offd[elem_jk]*v[k];
      }
      inv_d[j].elem() = v[j].real();
      for(int k=j+1; k < N; k++) { 
    int elem_kj = k*(k-1)/2 + j;
    for(int l=0; l < j; l++) { 
      int elem_kl = k*(k-1)/2 + l;
      inv_offd[elem_kj] -= inv_offd[elem_kl] * v[l];
    }
    inv_offd[elem_kj] /= v[j];
      }
    }
    RScalar<REALT> one;
    one.elem() = (REALT)1;
    for(int i=0; i < N; i++) { 
      diag_g[i].elem() = one.elem()/inv_d[i].elem();
      //      ((PScalar<PScalar<RScalar<float> > > *)(args->dev_ptr[ 1 ] ))[site] .elem().elem().elem() += log(fabs(inv_d[i].elem()));
      if( inv_d[i].elem() < 0 ) { 
    site_neg_logdet++;
      }
    }
    RComplex<REALT> sum;
    for(int k = 0; k < N; ++k) {
      for(int i = 0; i < k; ++i) {
    v[i].real()=v[i].imag()=0;
      }
      v[k] = RComplex<REALT>(diag_g[k],zip);
      for(int i = k+1; i < N; ++i) {
    v[i].real()=v[i].imag()=0;
    for(int j = k; j < i; ++j) {
      int elem_ij = i*(i-1)/2+j;    
      v[i] -= inv_offd[elem_ij] *inv_d[j]*v[j];
    }
    v[i] *= diag_g[i];
      }
      for(int i = N-2; (int)i >= (int)k; --i) {
    for(int j = i+1; j < N; ++j) {
      int elem_ji = j*(j-1)/2 + i;
      v[i] -= RComplex<REALT>(inv_offd[elem_ji].real(),-inv_offd[elem_ji].imag()) * v[j];
    }
      }
      inv_d[k].elem() = v[k].real();
      for(int i = k+1; i < N; ++i) {
    int elem_ik = i*(i-1)/2+k;
    inv_offd[elem_ik] = v[i];
      }
    }
    for(int i=0; i < N; i++) { 
      tri[site].diag[block][i] = inv_d[i];
    }
    for(int i=0; i < 15; i++) { 
      tri[site].offd[block][i] = inv_offd[i];
    }
  }
  if( site_neg_logdet != 0 ) { 
  }

}

int main()
{
  int sites=1;

  dim3  blocksPerGrid( 1 , 1 , 1 );
  dim3  threadsPerBlock( sites , 1, 1);

  PrimitiveClovTriang* tri_dev;
  int * siteTable;
  cudaMalloc( (void**)&tri_dev , sizeof(PrimitiveClovTriang) * sites );
  cudaMalloc( (void**)&siteTable , sizeof(int) * sites );
  bool ord=true;

  kernel<<< blocksPerGrid , threadsPerBlock , 0 >>>( ord , siteTable , tri_dev );

  cudaDeviceSynchronize();
  cudaError_t kernel_call = cudaGetLastError();

  cout << "kernel call: " << string(cudaGetErrorString(kernel_call)) << endl;
  cudaFree(tri_dev);
  cudaFree(siteTable);

  return(0);
} 
```

请注意，siteTable 包含未初始化的数据。这很好，因为它没有使用。我需要它来使错误出现。

更新：

刚刚在安装了 CUDA 4.0 的另一台机器上尝试过。那里没有出现错误（相同的费米卡型号）。可能真的是 CUDA 4.2 的 NVCC 错误。由于他们从 CUDA 4.1 切换到 LLVM，这很可能是一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-23T09:55:25.623

这个问题似乎是由基于 LLVM 的 CUDA 工具链的早期版本中的一个微妙的编译器错误引起的。该错误不会在更现代的工具链版本（CUDA 6.x 和 7.x）上重现。

[此答案已从评论和编辑中添加为社区 wiki 条目，以将问题从 CUDA 标签的已回答列表中删除]

# java - 如果仅存在 jar，如何实现对 jar 的可选支持

> ID：10548158
> 
> 赞同：3
> 
> 时间：2012-05-11T08:42:04.963
> 
> 标签：java, jar

我正在开发一个用于实用程序的 jar 库。

我想显着减少对外部 jars/库的依赖，但如果它存在于类路径中，则为此类库提供本机支持。

例如，我希望库提供与 hibernate 一起使用的例程；但是，如果休眠 jar 不存在，我不希望应用程序因错误而死。

有没有办法实现这一点，而不必将休眠 jar 与我的库捆绑在一起？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T08:45:12.787

在初始化期间，您可以使用[`Class.forName`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)查找 Hibernate 类之一，如果它抛出一个`ClassNotFoundException`catch 并且您知道 Hibernate 不在环境中 - 设置一个标志，以便您知道不要做特定于 Hibernate 的事情。

但是请注意，如果您的任何类静态引用了 Hibernate 类（例如 via `import`），如果 Hibernate 不在类路径中，这些类将不会加载。通常的处理方法是：

*   为您的 Hibernate 特定的东西创建一个接口，例如`HibernateStuff`.
*   只在你的主代码中引用接口，不要在你的主代码中通过`import`.
*   将特定于 Hibernate 的东西放在实现该接口的类中，例如`HibernateStuffImpl`. *那个*类可以`import`休眠的东西。
*   一旦您确定 Hibernate 在类路径中（通过`Class.forName`），使用`Class.forName`加载您的`HibernateStuffImpl`然后使用[`Class#newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)创建它的实例，将其分配给 type 的变量`HibernateStuff`。
*   使用该变量调用特定于 Hibernate 的内容。
*   您可能有一个`HibernateStuffStub`通过什么都不做来实现接口的类，并在未加载 Hibernate 时使用它，因此您的代码不会充满条件语句。（JVM 在无操作调用方面非常快。）

...当然，以上所有内容都适用于任何事物，而不仅仅是 Hibernate。

# jsp - 请求的资源 () 不可用 tomcat

> ID：10548159
> 
> 赞同：0
> 
> 时间：2012-05-11T08:42:15.727
> 
> 标签：jsp, http-status-code-404, tomcat6

当我在 localhost 中编译和部署它时，它工作正常。但是当我创建war文件并将其部署到另一台服务器时，它会弹出错误

```
HTTP 状态 404 - /IJPWeb/index.jsp
类型状态报告
消息 /IJPWeb/index.jsp
描述 请求的资源 (/IJPWeb/index.jsp) 不可用。
Apache Tomcat/6.0.24

```

这是 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>IJPWeb</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

这是 catalina.out 中出现的一个错误

> javax.management.MalformedObjectNameException：无法为 org.apache.catalina.connector.Connector@5a199939java.lang.ClassCastException 创建对象名称：java.net.Inet4Address 无法转换为 java.lang.String

我没有任何 servlet 类。我从我的 JSP (index.jsp) 中调用了一些 Java 方法。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:00:07.413

检查本地和远程位置的 Tomcat 版本是否相同。

还要验证在本地编译 Web 应用程序的 Java 版本是否与远程您的 tomcat 的 JRE 兼容。

# extjs - 如何在 Sencha Touch 中销毁非活动视图

> ID：10548164
> 
> 赞同：7
> 
> 时间：2012-05-11T08:42:44.637
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我遇到了一个我想非常重要的问题。在一个简单的 Sencha Touch App 中，我有很多视图。我的 Mainview 是一个 TabPanel，底部有停靠图标。有时在我的应用程序中，我切换到 Tabpanel 之外的另一个视图。我不希望 DOM 因视图而过载，我不再需要，所以我正在寻找一种解决方案来在视图不活动时销毁视图。我试过这个，同时在我的控制器中切换到另一个视图：

```
this.getMainview().destroy(); 
```

似乎 Mainview 被删除了，但出现错误：

```
Uncaught TypeError: Cannot read property 'dom' of null 
```

所以我猜 .destroy() - 方法有问题还是有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T09:53:20.203

在移动到新视图之前，您可以调用下面的代码来删除当前视图

```
Ext.Viewport.remove(Ext.Viewport.getActiveItem(), true); 
```

或者您也可以提供项目对象而不是 ActiveItem

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-12T10:08:39.743

我以前多次被这个问题困扰过。目前看来，Sencha Touch 2 中并没有高效且真正无**bug 的**解决方案。当第二次再次添加视图时，该令人不快的错误将再次出现。

一个可能的解决方案：

此代码片段：

`your_container(your_container.getActiveItem(), false);`

实际上不会从内存中销毁您的子组件，而是从 DOM 中销毁。稍后当你添加它时，不会有错误（正如我测试过的那样）。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T17:22:59.737

我将公开我的情况以及我是如何解决的。

我有一个带有图标的 TabPanel。这些选项卡之一显示项目列表。当您单击一个项目时，您将被带到一个显示其描述的新面板。如果单击后退按钮，则该面板将被销毁并返回到列表。这样你就破坏了现在未使用的“描述”面板。

所以我所做的是创建一个函数来根据单击的项目的索引来实例化描述面板：

```
function project(i) {
    var v;
    switch(i) {
        case 0:
            v = Ext.create( 'Ext.Panel', {
                title: 'title',
                layout: { type: 'fit' },
                id: 'project0',
                iconCls: '',
                style: '',
                html: 'my html'
                });
            break;
    }
    return v;
} 
```

现在，在列表的“itemtap”事件中，我有这个：

```
var lastItem = container.add(project(i));
itemsList.hide(); //hide the List and display only the new Panel in the container 
```

现在，我在标题中有一个按钮可以返回到上一个视图（即列表），这是该按钮的事件“点击”：

```
container.remove(lastItem, true); //hide and destroy it
itemList.show(); //show the List again 
```

因此，如果我在列表和描述项（面板）之间来回切换，现在没有问题，因为每次单击它们时都会得到一个新实例，同样当我返回时它也会被破坏。

这解决了我的问题。

# magento - Magento 对不同的产品使用不同的尺寸表

> ID：10548166
> 
> 赞同：0
> 
> 时间：2012-05-11T08:42:51.113
> 
> 标签：magento, product

我有由 magento 建立的电子商务商店。在产品中，我们有一个尺码表，详细显示了男性和女性的尺码。为此，我包含了以下 jscript 代码

```
<script type="text/javascript"><!-- function myPopup2() {window.open( "http://www.mydomain.com/sizechart/sizechart.html", "myWindow", "status = 1, height = 700, width = 864, resizable=1, scrollbars=yes" )}//--></script> 
```

`<p class="sizechart" onClick="myPopup2()">CHECK YOUR SIZE</p>`

在`app/design/frontend/default/mytheme/templates/category/products/view.phtml`

我们计划在我们的商店也出售太阳镜。所以我们创建了一个新类别并上传了与太阳镜相关的产品。唯一的问题是，这里也显示了相同的男女装尺码表。我想根据类别显示尺寸图表。可以说，如果我们去男装页面，它应该只显示与男装相关的尺码表，女装和太阳镜也是如此。

如何做到这一点，请给我解决方案来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:42:00.960

您可以执行以下操作：

```
<p class="sizechart" onClick="<?php if(product_in_cat1):{echo 'functionforsizechart1';} else:{echo 'functionforsizechart2';} endif;?>">CHECK YOUR SIZE</p> 
```

这应该是一个临时解决方案，因为您的产品类型会增加并且您添加不同的尺寸图表，这个过程可能会变得很麻烦

# php - php & jquery 中的进度条

> ID：10548167
> 
> 赞同：0
> 
> 时间：2012-05-11T08:43:02.670
> 
> 标签：php, jquery, zend-mail

我有一个发送 X 邮件的 PHP 进程 每次发送邮件后，我在数据库中添加一行以告知已发送邮件。

所以，我不想创建一个进度条来告诉用户 X 邮件是在 Y 上发送的（ Y = 总数）

我有两个这样的 jquery 函数：

```
function mail_send()
{
    $('.loading').css('display','block');
    $.ajax({
        'url': '/an/url/', 
        'data': {
                    someParam: param
                },
        'beforeSend':function()
                    {
                        $('#loadingBg').append('<span id="count"></span>');
                        setTimeout(function () {
                            mail_updateProgress(id);
                        }, 500);
                    }

        , 
        'success':  function (data,textStatus)
                    {
                       (....)
                    }
    });
}

function mail_updateProgress(id) {
    $.ajax({
        'url': '/an/url/', 
            'data': {
                        someParam: param
                    },
        'success':  function (data) {
                        var res = $.parseJSON(data);
                        $('#count').html(res.nbSended + '/' + res.total);
                    }
    });
} 
```

问题是我现在不能发送超过 15 封邮件，而且我不会创建 XXX 邮件地址来测试它，但是 updateProgress() 函数只成功了一次，它发生在 mail_send() 的同一时间功能。

有错误吗？

谢谢

编辑：好的，所以 setInterval 很好，但我还有第二个问题，$.ajax 有队列吗？我正在登录 3 件事：第一：当进程进入 updateProgress 函数时第二：当 updateProgress ajax 成功时第三：当 mail_send() ajax 成功时

日志的顺序是

第一次（X 次） 第三次（1 次） 第二次（X 次）

所以，我的进度条永远不会进步，只是在发送功能结束时使 0% => 100%

在发送功能时处理进度功能的任何想法？可以委托吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:51:38.517

您正在使用**setTimeout**如果您想进行间隔检查，请使用：**setInterval**。

# haskell - Haskell 运算符允许使用哪些字符？

> ID：10548170
> 
> 赞同：74
> 
> 时间：2012-05-11T08:43:21.907
> 
> 标签：haskell, syntax, operators

某处是否有完整的允许字符列表，或确定标识符与运算符中可以使用什么的规则？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-11T09:08:01.177

从[Haskell 报告](https://www.haskell.org/onlinereport/lexemes.html)中，这是允许符号的语法：

`a | b`手段`a or b`和

`a<b>`方法`a except b`

```
special    ->   ( | ) | , | ; | [ | ] | `| { | } 
symbol     ->   ascSymbol | uniSymbol<special | _ | : | " | '>
ascSymbol  ->   ! | # | $ | % | & | * | + | . | / | < | = | > | ? | @
                \ | ^ | | | - | ~
uniSymbol  ->   any Unicode symbol or punctuation 
```

因此，符号是 ASCII 符号或 Unicode 符号，但 中的符号除外`special | _ | : | " | '`，它们是保留的。

表示不能使用以下字符：`( ) | , ; [ ] ` { } _ : " '`

下面几段，报告给出了 Haskell 算子的完整定义：

```
varsym     -> ( symbol {symbol | :})<reservedop | dashes>
consym     -> (: {symbol | :})<reservedop>
reservedop -> .. | : | :: | = | \ | | | <- | -> | @ | ~ | => 
```

> 运算符符号由一个或多个符号字符组成，如上定义，并在词法上区分为两个命名空间（第 1.4 节）：
> 
> *   以冒号开头的运算符符号是构造函数。
> *   以任何其他字符开头的运算符符号是普通标识符。
> 
> 请注意，冒号本身“：”仅保留用作 Haskell 列表构造函数；这使得它的处理与列表语法的其他部分一致，例如“[]”和“[a,b]”。
> 
> 除了前缀否定的特殊语法外，所有运算符都是中缀的，尽管每个中缀运算符都可以在一个部分中使用以产生部分应用的运算符（参见第 3.5 节）。所有标准中缀运算符都只是预定义的符号，可能会被反弹。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-11T08:53:49.547

来自[Haskell 2010 报告§2.4](http://www.haskell.org/onlinereport/haskell2010/haskellch2.html#x7-180002.4)：

> *运算符符号*由一个或多个符号字符组成...

[§2.2](http://www.haskell.org/onlinereport/haskell2010/haskellch2.html#x7-160002.2)将*符号字符*定义为任何`!#$%&*+./<=>?@\^|-~:`或“任何 [非 ascii] Unicode 符号或标点符号”。

**注意**：用户定义的运算符不能以`:`as 开头，引用[语言报告](https://www.haskell.org/onlinereport/haskell2010/haskellch2.html#x7-180002.4)，“*以冒号开头的运算符符号是构造函数。* ”

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-16T10:00:35.110

我正在寻找的是完整的字符列表。根据其他答案，完整列表是；

Unicode标点符号：

*   [http://www.fileformat.info/info/unicode/category/Pc/list.htm](http://www.fileformat.info/info/unicode/category/Pc/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Pd/list.htm](http://www.fileformat.info/info/unicode/category/Pd/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Pe/list.htm](http://www.fileformat.info/info/unicode/category/Pe/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Pf/list.htm](http://www.fileformat.info/info/unicode/category/Pf/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Pi/list.htm](http://www.fileformat.info/info/unicode/category/Pi/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Po/list.htm](http://www.fileformat.info/info/unicode/category/Po/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Ps/list.htm](http://www.fileformat.info/info/unicode/category/Ps/list.htm)

Unicode 符号：

*   [http://www.fileformat.info/info/unicode/category/Sc/list.htm](http://www.fileformat.info/info/unicode/category/Sc/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Sk/list.htm](http://www.fileformat.info/info/unicode/category/Sk/list.htm)
*   [http://www.fileformat.info/info/unicode/category/Sm/list.htm](http://www.fileformat.info/info/unicode/category/Sm/list.htm)
*   [http://www.fileformat.info/info/unicode/category/So/list.htm](http://www.fileformat.info/info/unicode/category/So/list.htm)

但在 Haskell 中*排除*以下具有特殊含义的字符：

```
(),;[]`{}_:"' 
```

A`:`仅允许作为运算符的第一个字符，并表示构造函数（请参阅[以冒号开头的运算符符号是构造函数](https://stackoverflow.com/questions/28088184/an-operator-symbol-starting-with-a-colon-is-a-constructor)）。

# c# - 将文件内容读入 webbrowser 控件会去掉我的变音符号

> ID：10548174
> 
> 赞同：1
> 
> 时间：2012-05-11T08:43:45.600
> 
> 标签：c#, webbrowser-control, diacritics

我在用着

```
private void infoLink_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            string filename = "infoFiles\\Tastenkürzel.htm";
            System.IO.StreamReader infoFile = new System.IO.StreamReader(filename);
            string page = infoFile.ReadToEnd();
            frmInfo infoForm = new frmInfo(page);
            infoForm.Show();
        } 
```

打开包含变音符号的 html 文件。当我在浏览器中打开文件时，它会显示我想要的字母上方的所有点，但是，一旦我在 webbrowser 控件中打开文件内容，变音符号就会被小框替换。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:52:39.733

解决这个问题需要添加一个 Encoding 参数。

```
System.IO.StreamReader infoFile = new System.IO.StreamReader(filename, Encoding.UTF8); 
```

# git - git rm -r 在子模块中不起作用

> ID：10548178
> 
> 赞同：5
> 
> 时间：2012-05-11T08:43:54.087
> 
> 标签：git, git-submodules, git-rm

尝试按照[git book中的说明更改子模块](http://git-scm.com/book/en/Git-Tools-Submodules)

```
$ git rm -r vendor/html-minifier
$ git submodule add https://github.com/kangax/html-minifier.git vendor/html-minifier 
```

但它失败了

```
rm 'vendor/html-minifier'
fatal: git rm: 'vendor/html-minifier': Is a directory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:48:08.517

来自[http://txt.binnyva.com/2008/07/remove-a-folder-from-git/](http://txt.binnyva.com/2008/07/remove-a-folder-from-git/)

```
git rm -r vendor/html-minifier/. 
```

或者也许（来自[https://serverfault.com/questions/256421/cant-git-rm-a-directory](https://serverfault.com/questions/256421/cant-git-rm-a-directory)）

```
git rm --cached -r dirname 
```

# dll - Installshield 使用来自另一个自定义 dll 的自定义 dll

> ID：10548179
> 
> 赞同：0
> 
> 时间：2012-05-11T08:43:54.323
> 
> 标签：dll, installation, installshield

我正在重构一个旧的 installshield 应用程序，我需要执行一个从自定义 dll 调用函数的操作。不幸的是，此操作执行的功能取决于另一个自定义 dll。所以我的问题是：“是否有可能让自定义 dll 依赖于另一个自定义 dll，如果可以，如何？”

当我尝试运行安装程序时，它崩溃并出现错误“安装程序在完成之前被中断......”然后我将第二个自定义 dll 复制到我添加到 PATH 的文件夹中，一切正常。当然，我不能指望我的客户手动完成。

我正在使用 Installshield 2008，但我相信我的问题的答案对于所有版本都是相同的。

编辑：也许我的问题不够清楚，我将举个例子：假设我有一个具有功能的.dll：

```
UINT __stdcall
PerformAction(MSIHANDLE hInstall)    // IN
{
  ...
  help();
  ...
} 
```

help() 在 b.dll 中定义。现在，当我创建一个新操作时，我将它的 dll 设置为 a.dll，并将它的函数名称设置为 PerformAction，但是无法表明这取决于 b.dll 当我将 b.dll 复制到 PATH 安装程序中包含的文件夹时工作正常，但如果我不这样做，它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:50:21.890

此处最简单的 InstallShield 方法是使用支持文件来代替二进制表条目或在二进制表条目之外使用。Windows Installer 只会为自定义操作提取单个 DLL，但如果您在 中引用一个文件`SUPPORTDIR`，它可以使用多个。

# linq - 是否可以检测所选项目是否是 LINQ-to-SQL 中的第一个？

> ID：10548189
> 
> 赞同：2
> 
> 时间：2012-05-11T08:44:40.727
> 
> 标签：linq, linq-to-sql

我想知道如何构建一个查询表达式来理解所选择的给定项目是否是第一个。假设我从 DB 中选择 10 个项目：

```
var query = db.Table.Take(10).Select(t => IsFirst ? t.Value1 : t.Value2); 
```

Select 有一个索引变体，但在 LINQ-to-SQL 中不受支持。如果它得到支持，我的问题将得到解决。有没有其他技巧？

例如，我可以`ROW_NUMBER()`在 T-SQL 上使用，LINQ-to-SQL 使用但不提供访问权限。

我知道我可以进行`Concat`两个查询并在第一个中使用第一个表达式，依此类推，但我不想操作查询的其余部分，只操作 select 语句本身，因为查询是在多个位置构建的，这就是我想要的在第一行表现不同。如果不可能，我会考虑其他选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:48:18.927

您可以使用索引重载，但需要使用 LINQ to Objects 版本：

```
var query = 
    db.Table.Take(10).AsEnumreable()
    .Select((t, index) => index == 0 ? t.Value1 : t.Value2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:54:46.200

如果`Table`有主键。你可以这样做：

```
var result= (
        from t in db.Table.Take(10)
        let first=db.Table.Take(10).Select (ta =>ta.PrimayKey).First()
        select new
        {
            Value=(t.PrimaryKey=first?t.Value1 : t.Value2)
        }
    ); 
```

# playframework - 玩！修改文件而不是刷新浏览器时重新编译

> ID：10548190
> 
> 赞同：2
> 
> 时间：2012-05-11T08:44:44.880
> 
> 标签：playframework, playframework-2.0

刚开始使用 Play 框架，一个小问题是，当我进行更改然后刷新时，它需要很长时间（几秒钟）才能重新编译，以便我可以在浏览器中看到它。例如，在对视图进行许多细微调整时，这可能会有点烦人。

是否有一种神奇的方法可以让 Play 在源文件更改时尝试重新编译，而不是等到浏览器刷新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:45:46.830

是的。Play 控制台基于 SBT，它提供了一种方便的方式来运行命令，只要源文件发生更改，就可以在其前面加上波浪号。`run`因此，请在 Play 控制台中使用这样的波浪号作为前缀：

```
[my-play-app] $ ~run 
```

每当源文件更改时，应用程序将尝试重新编译，从而为您节省宝贵的时间，这些时间很快就会开始增加。

# css - 如何使用“宽度自动”和“浮动”来对齐 div？

> ID：10548193
> 
> 赞同：5
> 
> 时间：2012-05-11T08:44:53.703
> 
> 标签：css, width, css-float

我想在页面左侧有一个容器（带有一些文本），它可以根据可用空间**进行调整**，并在右侧有 2 个侧边栏（我使用的是 Wordpress）。（两个侧边栏可以正常工作`float`。）所以我尝试`width:auto`了容器。

但它不会适应剩余的可用空间（它占用所有页面宽度）。如果我将宽度设置为*70%*，它适合索引页面上的空间，但如果我点击一篇文章，我只剩下 1 个侧边栏，所以文本和侧边栏之间有一个空白空间。

你知道如何解决这个问题吗？

```
#container { /* the text */
    overflow:auto;
    width:auto;
    position:relative;
    float:left;
}

#primary { /* first sidebar */
    position:relative;
    border:1px solid red;
    float:right;
    width:250px;
}

#second { /* second sidebar */
    border:1px solid red;
    background:white;
    width:250px;
    height:auto;
    float:right;
    margin-left:15px;
} 
```

谢谢

* * *

编辑 ：

假设我使用它而不是 wordpress 侧边栏：我仍然无法使其工作，有人可以看看这个简单的代码吗？有2个盒子：绿色的和红色的...

```
<!DOCTYPE>
<html>
    <head>
        <meta charset="UTF-8" />
    </head>
        <body>

            <div style="position:relative; width:700px; margin:0 auto;">
                <div style="width:auto; border:1px solid green;">i would like to have a container (with some text) on the left of the page, that adapts itself with the space available, and 2 sidebars following on the right (i'm using Wordpress). (The 2 sidebars work fine with float. ) So i tried width:auto on the container.

But it does not adapt itself with the rest of the space available (it takes all the page width). If i set the width to 70%, it fits the space on the index page, but if i click on an article, i only have 1 sidebar left, so there is a blank space between the text and the sidebar.</div>

<div style="width:20%; float:right; border:1px solid red;">blablabla</div>
            </div>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:54:28.937

width:auto 是默认值，因此它不会做任何事情，除了标准 DIV 会做的事情，即填充可用宽度，因为它是块级元素。当您浮动它时，这会发生变化，它将包裹其内容，因此可以是最大宽度的任何宽度。

我认为您遇到的麻烦是混合百分比宽度和固定宽度。我可以看到您要做什么- 有一个固定宽度的侧边栏（或两个），而页面的其余部分是灵活的。在基于表格的布局时代，这样做真的很容易，但我们不要去那里！

听起来你想要一个流畅的布局，但有 2 个固定的列。可能值得阅读这篇文章，看看是否有任何适合您尝试做的事情：[http ://coding.smashingmagazine.com/2009/06/02/fixed-vs-fluid-vs-elastic-layout-什么最适合你/](http://coding.smashingmagazine.com/2009/06/02/fixed-vs-fluid-vs-elastic-layout-whats-the-right-one-for-you/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-14T21:06:51.470

在父 div 上使用 display:table。然后在孩子身上显示：table-cell。他们将按照他们在表格中的方式对齐。

```
#container { /* the text */
    overflow:auto;
    width:auto;
    position:relative;
    // float:left;
    display: table-cell;
    vertical-align:top;
}

#primary { /* first sidebar */
    position:relative;
    border:1px solid red;
    // float:right;
    width:250px;
    vertical-align:top;
}

#second { /* second sidebar */
    border:1px solid red;
    background:white;
    width:250px;
    height:auto;
    // float:right;
    margin-left:15px;
    display: table-cell;
    vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T02:01:02.200

好的，我发现了：将文本放在最后，使用溢出：隐藏和自动，并在右侧的小容器上浮动，谢谢您的回答。

# ruby-on-rails - 您将如何使用自我参考和类别对联系人列表进行建模？

> ID：10548195
> 
> 赞同：3
> 
> 时间：2012-05-11T08:44:58.423
> 
> 标签：ruby-on-rails, model, self-reference

为模特追随我的头

1.  用户有许多联系人类别（家人/朋友）
2.  一个联系人类别有多个联系人
3.  一位联系人可以属于一个或多个联系人类别。

我最终得到了关注，但我仍然相信，一定有更好的解决方案。

```
class User < ActiveRecord::Base  
    has_many :contact_groups  

    def get_all_contacts  
        self.contact_groups.each do |group|  
        contacts << group.users  
    end  
end  

class ContactGroup < ActiveRecord::Base  
    has_and_belongs_to_many :users  
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:39:49.910

## 假设

*   这是一个适用于许多用户的系统，而不仅仅是一个用户，因此您需要使用外键在联系人和组记录上指定所有者。
*   一个Contact可以属于多个Group，一个Group有多个contact，所以这是has_and_belongs_to_many关系。

## 迁移

创建用户表：

```
class CreateUsers < ActiveRecords::Migrations
  def change
    create_table :users do |t|
      t.text :username
    end
  end
end 
```

创建联系人表。拥有联系人所拥有的用户以及联系人所指的用户的外键。

```
class CreateContacts < ActiveRecord::Migrations
  def change
    create_table :contacts do |t|
      t.references :owner
      t.references :user
    end
  end
end 
```

创建组表。还具有该组所属用户的外键。

```
class CreateGroups < ActiveRecord::Migrations
  def change
    create_table :groups do |t|
      t.references :owner
      t.text :name
    end
  end
end 
```

为联系人和组之间的 has_and_belongs_to_many 关系创建表。有两个外键；一个用于联系人，另一个用于集团。

```
class CreateContactsGroups < ActiveRecord::Migrations
  def change
    create_table :contacts_groups do |t|
      t.references :contact
      t.references :group
    end
  end
end 
```

## 楷模

用户模型。一个用户有许多联系人，并且联系人表上将联系人与用户相关联的外键是“owner_id”列。组也是一样。

```
class User
  has_many :contacts, :foreign_key => 'owner_id'
  has_many :groups, :foreign_key => 'owner_id'
end 
```

接触模型。一个联系人属于一个所有者，我们正在为所有者关系使用“用户”模型。此外，Contact 指的是另一个用户（或属于，Rails 用语，这在这种情况下有点令人困惑），但是 :user 匹配模型的名称，所以我们不需要像我们那样指定：所有者。最后，与 Groups 的 has 和属于 many 关系。

```
class Contact
  belongs_to :owner, :class_name => 'User'
  belongs_to :user
  has_and_belongs_to_many :groups
end 
```

集团模型。一个组属于一个所有者，并且拥有并属于许多联系人。

```
class Group
  belongs_to :owner, :class_name => 'User'
  has_and_belongs_to_many :contacts
end 
```

我们不需要为contacts_groups 表创建模型，因为我们不会直接访问它，而只会通过Contact 或Group 访问它。

## 结果

这将允许您执行以下操作：

```
@user.contacts # all of the user's contacts
@user.groups # all of the user's groups
@user.groups.find(id).contacts # all the contacts in a group
@user.contacts.find(id).groups # all of the groups that a contact belongs to 
```

## 将联系人添加到组

**这是对@benrmatthews 评论的回应，该评论询问视图将联系人添加到组中的外观。**

实际上有很多不同的方法可以实现这一点，但总体思路是您需要将联系人 ID 和组 ID 传递给控制器​​操作，然后控制器操作将在 contact_groups 表中创建一个条目以指示已添加联系人到组。

您的路线可能如下所示：

```
resources :contact_groups, only: [:create] 
```

然后你将有一个看起来像这样的控制器：

```
class ContactGroupsController < ApplicationController
  def create
    @contact = Contact.find(params[:contact_id])
    @group = Group.find(params[:group_id])
    @contact.groups << @group
  end
end 
```

现在您所需要的只是将`contact_id`and传递`group_id`给控制器​​操作的表单。这就是它的样子：

```
# This is for adding the contact to a group
form_tag contact_groups_path do
  hidden_field_tag :contact_id, @contact.id
  select_tag :group_id, options_from_collection_for_select(Group.all, :id, :name)
  submit_tag "Add to Group"
end 
```

这将创建一个表单，其中包含一个隐藏字段，其中包含`contact_id`一个将显示组名称列表的选择字段。当这个表单被提交时，它会将`contact_id`and传递`group_id`给控制器​​动作，然后控制器就有足够的信息来做这件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:57:52.480

You can use has_many :through Association

```
class User
    has_many :contacts
    has_many :contact_groups, :through => :contacts
end

class Contact
    belongs_to :user
    has_many :contact_groups
end

class ContactGroup
    belongs_to :contacts
end 
```

this will work.

# ios - 应用程序加载器，关于 Signiant Transfer Engine 的新奇怪警告

> ID：10548196
> 
> 赞同：7
> 
> 时间：2012-05-11T08:45:01.060
> 
> 标签：ios, application-loader

应用程序加载器在“谢谢”对话框之前向我显示了一条奇怪的警告消息，而不是签入大绿色圆圈。

“创建一个新的 Signiant Transfer Engine，因为必须取消之前的传输。此会话有可能耗尽可用系统资源。”

我在 OS X Lion 10.7.3 上使用了 Application Loader 2.5.2。

在 Activity 窗口中，一切似乎都很好，二进制文件本身已上传到 iTunes Connect，应用程序状态为 Waiting For Review。

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T21:52:14.660

相同的错误消息“正在创建新的 Signiant 传输引擎，因为必须取消先前的传输。此会话存在可用系统资源不足的风险。”

1.  在使用 Application loader v2.7 (273) 和 MacOSX 10.7.3 将 120 Mb 应用程序混乱上传到 AppStore 后，我收到了这条消息。在“Window->Lookup Status...”菜单项对话框中搜索我的 SKU，我注意到有几次失败（“Upload Failed”），其中至少有一次，我决定按下“Cancel”按钮为了重新启动我的机器，这个上传速度很慢。

2.  我注意到，当您退出 Application Loader 应用程序时，Application Loader JAVA 引擎可能仍在后台运行，并且在“强制退出...”列表中不再可见。我使用了一个名为“Little Snitch”的数据包测量器，它显示这个 JAVA 引擎在仅打开 Finder 时运行。

总而言之：当您取消其中一个上传并重新启动新的上传时，可能会显示此消息，而前一个（由后台任务执行）仍在后台运行。这会生成“警告”消息，但不会生成错误，因此，您会收到警告通知，而不是绿色的“OK”，就像在 XCode 中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T07:13:13.263

我遇到了这个问题。通过转到 Application loader-> Prereference 并取消选中 Signiant 选项已解决。

# python - 两个日期之间的特定月份/工作日数

> ID：10548204
> 
> 赞同：0
> 
> 时间：2012-05-11T08:45:31.967
> 
> 标签：python, datetime, time

如何获得两个日期之间的特定月份和工作日数。

如果日期是

```
datetime.datetime(2004, 01, 01)
datetime.datetime(2005, 10, 01) 
```

我希望我的输出为

```
{'January':2, 'February':2, ..., 'December':1}
{'Monday':xx, ..., 'Sunday':xx} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:03:25.367

In Python 2.7:

```
from datetime import datetime
from dateutil import rrule
import itertools as it
from collections import Counter

rule = rrule.rrule(rrule.DAILY,
                   dtstart=datetime(2004, 01, 01),
                   until=datetime(2005, 10, 01))

dict(Counter(d.strftime('%A') for d in rule))
# {'Friday': 92,
#  'Monday': 91,
#  'Saturday': 92,
#  'Sunday': 91,
#  'Thursday': 92,
#  'Tuesday': 91,
#  'Wednesday': 91}

dict(Counter(k for k,v in it.groupby(d.strftime('%B') for d in rule)))
# or
dict(Counter(k for k,v in it.groupby(rule, key=lambda x: x.strftime('%B'))))

# {'April': 2,
#  'August': 2,
#  'December': 1,
#  'February': 2,
#  'January': 2,
#  'July': 2,
#  'June': 2,
#  'March': 2,
#  'May': 2,
#  'November': 1,
#  'October': 2,
#  'September': 2} 
```

As @thg435 correctly commented, `dateutil` is not in standard Python library. It can be, however, replaced by the following command:

```
dtstart = datetime(2004, 01, 01)
until = datetime(2005, 10, 01)
rule = [dtstart + timedelta(i) for i in xrange((until - dtstart).days + 1)] 
```

# android - 谷歌电视设计用户界面

> ID：10548211
> 
> 赞同：0
> 
> 时间：2012-05-11T08:45:39.473
> 
> 标签：android, google-tv

为谷歌电视设计不同于平板电脑。在为 Google TV 设计 UI 时，我需要注意什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:48:48.580

[https://developers.google.com/tv/web/docs/design_for_tv](https://developers.google.com/tv/web/docs/design_for_tv)

设计注意事项

观看者与屏幕的距离

电视观众坐在离屏幕相对较远的地方。这种距离使传统网页更难阅读、更混乱，并且更难以执行基本任务，例如导航菜单和选择按钮。

在为电视设计网页时，可视区域应该显示较少的整体信息，并且应该集中在一组有限的任务上（甚至考虑自动执行他们想要的任务或默认选择）。尽量保持所有内容“首屏”并在屏幕上完全可见，而无需向下滚动。

网站上的字体和图形需要更大以考虑观看距离。人们坐得离电视机比离相同尺寸的电脑显示器更远。为了避免在电视上出现杂乱的外观，页面上元素之间的空白空间应该更大。这通常称为空白（或填充），它是使 Web 内容易于识别和导航的基本方面。宽屏显示器比桌面显示器具有更多可用的水平空间，因此从侧面（为内容保留宝贵的垂直空间）或作为覆盖更好地处理导航。性能与视觉吸引力

压倒性的研究表明，用户更喜欢快速的网站——因此最好在任何华丽的视觉吸引力与性能考虑之间取得平衡。此外，Google TV 可能无法像您的工作站那样快速呈现页面。在需要为您的页面呈现许多复杂的动画之前，请测试/考虑对用户满意度的影响。可以在 code.google.com/speed 找到简单的前端性能改进（例如，将样式表放在顶部，将脚本放在底部）。

垂直滚动

垂直滚动虽然是桌面浏览器的基本功能，但在 TV UI 上可能没有那么吸引人。如果用户没有意识到屏幕外存在更多内容，则滚动可能看起来不太流畅，并且重要信息可能会隐藏在首屏下方。更好的方法是利用内容页面之间的水平布局和视觉转换。

浏览器的人机界面

Google TV 包括一个“遥控器”，它由一个带有用于光标移动的指点设备的键盘组成。许多用户将这个遥控器放在沙发上，并且可能难以精确定位光标 - 就像新手玩电子游戏一样。除了他们可能不像第一次玩游戏的玩家那样耐心（他们只是想看视频！）。尽量让这个用户满意。页面上的元素应该为鼠标用户提供较大的选择表面。当用户将鼠标悬停在一个元素上时扩展表面使用户更容易在页面上选择正确的项目。使用鼠标进行复杂或精确的移动，例如拖放操作或下拉菜单选择，很可能会导致挫败感。

Google TV 的主界面鼓励使用遥控器上的方向键在屏幕上进行选择——即使在网络上，用户也可能会保持这种习惯。网页应允许其上的每个主要活动都可以通过方向键进行：移动可用操作、滚动选项、选择项目等。使用方向键导航时，清楚地突出显示活动项目，并进行定向移动项目之间的视觉和物理逻辑。

还有更多转到链接....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:47:05.473

如果您正在为 Google TV 开发 Android 应用，请同时遵循以下文档：

1.  [为 Google TV 应用程序设计 UI](https://developers.google.com/tv/android/docs/gtv_android_patterns)
2.  [为 Google TV 应用程序开发 UI](https://developers.google.com/tv/android/docs/gtv_displayguide)

您可能还会发现有关“Google TV 应用程序的 UI 提示”的截屏视频很有用：
[Google TV 应用程序的 5 个 UI 提示](https://developers.google.com/tv/android/docs/gtv_displayguide)

# bash - 如何使用 sed 从文本文件中删除第一个和最后两个字符？

> ID：10548221
> 
> 赞同：3
> 
> 时间：2012-05-11T08:45:58.863
> 
> 标签：bash, command-line, sed, string-parsing

我有一个像这样的文本文件

```
abcdefg
abcdefg
abcdefg
abcdefg 
```

如何用sed删除每行的第一个和最后两个字符？我想得到这样的输出

```
bcde
bcde
bcde
bcde 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:48:49.187

```
sed  's/^.\(.*\)..$/\1/'  file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:21:08.953

这可能对您有用：

```
sed 's/^.\|..$//g' file 
```

# mysql - 如何在mysql中连续计算特定符号的数量

> ID：10548222
> 
> 赞同：5
> 
> 时间：2012-05-11T08:46:05.100
> 
> 标签：mysql, count

我有一个表，其中包含一行数据，例如`'/2323/3235/4545/222/'`如何仅使用 mysql 计算每行中 / 的数量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:50:19.360

[快速搜索](http://www.google.com)得出了这个：

```
SELECT LENGTH('/2323/3235/4545/222/') - LENGTH(REPLACE('/2323/3235/4545/222/','/','')) ... etc; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T08:59:34.067

[关联](http://pisceansheart.wordpress.com/2008/04/15/count-occurrence-of-character-in-a-string-using-mysql/)

```
SELECT LENGTH('/2323/3235/4545/222/') - LENGTH(REPLACE('/2323/3235/4545/222/', '/', '')) AS `occurrences` 
```

# jquery - 只读或禁用 jquery 标签

> ID：10548231
> 
> 赞同：7
> 
> 时间：2012-05-11T08:46:43.780
> 
> 标签：jquery, jquery-plugins, tags

我正在使用这个 [http://xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/) 作为我的标签输入。

但是有人知道如何将标签的 div 设置为只读模式或禁用它吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-17T00:40:06.617

尝试这个：

```
$('#tags').tagsInput({
        'interactive':false
        }); 
```

如果要禁用删除“X”。在下面使用它。

```
$('.tagsinput').find('a').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T08:53:15.850

这应该有效：

```
$('.tagsinput input').attr('disabled', 'disabled'); 
```

要使其可编辑，您可以执行以下操作：

```
$('.tagsinput input').removeAttr('disabled'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-04T15:35:57.137

对于这个问题，我会再提出一个竞争者。我不喜欢接受的答案，因为在被禁用后再次启用它并不容易。

我找到了一个简单的方法：使用 CSS。

下面的 CSS 效果很好，不需要 JS 或破坏小部件的 DOM。

```
.bootstrap-tagsinput.disabled {
    border: none;
    box-shadow: none;
}
.bootstrap-tagsinput.disabled input {
    display: none;
}
.bootstrap-tagsinput.disabled .badge span[data-role="remove"]{
    display: none;
} 
```

您还可以在禁用时更改徽章颜色：

```
.bootstrap-tagsinput.disabled .badge {
    background-color: #ccc;
    border: 1px solid #ababab;
} 
```

然后，当您想要启用/禁用时，只需在`disabled`该元素的根（具有`bootstrap-tagsinput`CSS 类的那个）中添加或删除 CSS 类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-12T23:18:25.977

对我来说：

```
var tagsinput = $('#id-tagsinput').next();
tagsinput.removeClass('bootstrap-tagsinput');
tagsinput.find("input").remove();
tagsinput.css("padding-bottom", "10px"); 
```

或（更好）

```
var tagsinput = $('#id-tagsinput').next();
$('[data-role="remove"]').remove();
tagsinput.find("input").remove();
tagsinput.css("padding-bottom", "10px"); 
```

# javascript - 在 Google Maps V3 Places 中无需单击或上传或初始化即可打开特定信息窗口

> ID：10548235
> 
> 赞同：1
> 
> 时间：2012-05-11T08:46:57.610
> 
> 标签：javascript, google-maps, google-places-api

我想`InfoWindow`在您从 Google Places 获得的 20 个中打开一个特定的。

首先，我需要确定要打开哪个。因此，一旦我知道要打开的那个，我想通过 Google Places Business ID -> 打开它`place.id`。

所以，到目前为止，我已经通过标记顺序（ i ）对其进行了测试，如下所示：

```
openInfoWindowBy(i){
    infowindow.open(map,i);
} 
```

我刚打电话：`openInfoWindowBy(1);`和`InfoWindow`1，没有打开。点击事件工作正常：

```
google.maps.event.addListener(markers[i], 'click', getDetails(placesArr[i], i));
markers[i].setMap(map);
addplace(placesArr[i], i); 
```

我究竟做错了什么？并且有可能打开它`place.id`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:33:26.340

查看Google 地图[开发人员指南](http://goo.gl/CCb10)这一部分中的[示例](https://developers.google.com/maps/documentation/javascript/examples/place-search)。Google Maps API V3 中的 Places 库以数组的形式返回结果，因此当您遍历数组时，您应该使用索引值，而不是 place.id 来循环/添加/重新引用标记。

也就是说，您现有的代码`openInfoWindowBy`引用索引，而不是`markers`数组中的索引。看来应该是这样的：

```
openInfoWindowBy(i){
   infowindow.open(map,markers[i]);
} 
```

你需要提出第二个论点`markers[1]`

# python - 在金字塔中使用 http 标头进行身份验证

> ID：10548236
> 
> 赞同：4
> 
> 时间：2012-05-11T08:47:22.207
> 
> 标签：python, http, authentication, pyramid

我一直在寻找一种方法来通过在 http 标头中传递的用户和密码来验证用户。

```
curl --user user1:pass1 http://localhost:6543/the_resource 
```

这个想法是检查传递的凭据是否允许用户查看 *the_resource*，如果不返回 401 - 禁止。

我只找到了必须有登录和注销视图的身份验证策略示例，或者我不知道如何与 Pyramid 的 ACL 绑定的[基本身份验证策略。](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/auth/basic.html)

我将不胜感激任何帮助，如何开始。

我又想到了一件事。如何强制此 pup-up 登录窗口进行基本身份验证？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T08:54:10.070

最后，如何使用身份验证和授权变得清晰。一切都是实际写的，我只是没有立即抓住这个概念。我会试着写下我是如何用一种笨拙的方式解释它的，我不得不向自己解释。我希望它对某人有用。最后的来源可能有助于理解我的写作；）欢迎所有评论。如果我有什么不对的地方，请纠正我。

## 验证

最重要的是[基本身份验证](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/auth/basic.html)，其中 BasicAuthenticationPolicy 必须具有可以稍后在金字塔应用程序中使用的方法 - 例如 authenticated_userid(request)。这些方法使用 _get_basicauth_credentials() 提取在 http 标头中传递的登录名和密码。实际检查登录名和密码是否正确发生在 mycheck() 中。

现在在 __init__.py 中，我们必须将带有方法 mycheck 的 BasicAuthenticationPolicy 作为参数添加到我们的应用程序配置器中，以便金字塔可以使用它。

在身份验证问题上就是这样。现在您应该能够使用 authenticated_userid(request) 验证是否以及谁进行了身份验证（请参阅views.py）

## 授权

要对资源使用金字塔授权，我们需要在 __init__.py 中将 ACLAuthorizationPolicy 添加到我们的配置器中，并将 __acl__ 添加到资源中。在最简单的情况下，root_factory（参见[this](http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/wiki2/authorization.html#adding-a-root-factory)和[this](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/security.html#assigning-acls)）ACL 定义了哪个组有什么权限。如果我没有记错 (Allow, 'group:viewers', 'view') 'group:viewers' 必须是身份验证方法 - mycheck() - 返回。

授权的最后一步是使用装饰器（或在 add_route 中）为特定视图添加权限。如果我们将 ACL 权限 - view - 添加到 view_page，那么 group:viewers 就可以查看该页面（调用 view_page）。

basic_authentication.py

```
import binascii

from zope.interface import implements

from paste.httpheaders import AUTHORIZATION
from paste.httpheaders import WWW_AUTHENTICATE

from pyramid.interfaces import IAuthenticationPolicy
from pyramid.security import Everyone
from pyramid.security import Authenticated
import yaml

def mycheck(credentials, request):
    login = credentials['login']
    password = credentials['password']

    USERS = {'user1':'pass1',
             'user2':'pass2'}
    GROUPS = {'user1':['group:viewers'],
              'user2':['group:editors']}

    if login in USERS and USERS[login] == password:
        return GROUPS.get(login, [])
    else:
        return None

def _get_basicauth_credentials(request):
    authorization = AUTHORIZATION(request.environ)
    try:
        authmeth, auth = authorization.split(' ', 1)
    except ValueError: # not enough values to unpack
        return None
    if authmeth.lower() == 'basic':
        try:
            auth = auth.strip().decode('base64')
        except binascii.Error: # can't decode
            return None
        try:
            login, password = auth.split(':', 1)
        except ValueError: # not enough values to unpack
            return None
        return {'login':login, 'password':password}

    return None

class BasicAuthenticationPolicy(object):
    """ A :app:`Pyramid` :term:`authentication policy` which
    obtains data from basic authentication headers.

    Constructor Arguments

    ``check``

        A callback passed the credentials and the request,
        expected to return None if the userid doesn't exist or a sequence
        of group identifiers (possibly empty) if the user does exist.
        Required.

    ``realm``

        Default: ``Realm``.  The Basic Auth realm string.

    """
    implements(IAuthenticationPolicy)

    def __init__(self, check, realm='Realm'):
        self.check = check
        self.realm = realm

    def authenticated_userid(self, request):
        credentials = _get_basicauth_credentials(request)
        if credentials is None:
            return None
        userid = credentials['login']
        if self.check(credentials, request) is not None: # is not None!
            return userid

    def effective_principals(self, request):
        effective_principals = [Everyone]
        credentials = _get_basicauth_credentials(request)
        if credentials is None:
            return effective_principals
        userid = credentials['login']
        groups = self.check(credentials, request)
        if groups is None: # is None!
            return effective_principals
        effective_principals.append(Authenticated)
        effective_principals.append(userid)
        effective_principals.extend(groups)
        return effective_principals

    def unauthenticated_userid(self, request):
        creds = self._get_credentials(request)
        if creds is not None:
            return creds['login']
        return None

    def remember(self, request, principal, **kw):
        return []

    def forget(self, request):
        head = WWW_AUTHENTICATE.tuples('Basic realm="%s"' % self.realm)
        return head 
```

myproject.__init__.py

```
from pyramid.config import Configurator
from myproject.resources import Root
from myproject.basic_authentication import BasicAuthenticationPolicy, mycheck
from pyramid.authorization import ACLAuthorizationPolicy

def main(global_config, **settings):
    """ This function returns a Pyramid WSGI application.
    """
    config = Configurator(root_factory='myproject.models.RootFactory', 
                          settings=settings,
                          authentication_policy=BasicAuthenticationPolicy(mycheck), 
                          authorization_policy=ACLAuthorizationPolicy(),
                          )

    config.add_static_view('static', 'myproject:static', cache_max_age=3600)

    config.add_route('view_page', '/view')
    config.add_route('edit_page', '/edit')
    config.scan()

    app = config.make_wsgi_app()
    return app 
```

模型.py

```
from pyramid.security import Allow

class RootFactory(object):
    __acl__ = [ (Allow, 'group:viewers', 'view'),
                (Allow, 'group:editors', 'edit') ]
    def __init__(self, request):
        pass 
```

视图.py

```
from pyramid.security import authenticated_userid
from pyramid.view import view_config

#def my_view(request):
#    return render_to_response('templates/simple.pt', {})

@view_config(route_name='view_page', renderer='templates/view.pt', permission='view')
def view_page(request):
    return {}

@view_config(route_name='edit_page', renderer='templates/edit.pt', permission='edit')
def edit_page(request):
    return {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:05:10.630

那么你要的是基本身份验证。您链接到您想要使用的食谱。这处理识别用户和计算他们的委托人。ACL 系统使用主体以及视图上指定的权限来确定允许/拒绝访问。

我认为诀窍在于弄清楚如何处理拒绝用户访问资源的问题，这在该配方中没有列举。您可以通过提供一个自定义的“禁止视图”来做到这一点，当视图拒绝访问时，该视图会在 URL 上调用。此时，Basic 声明您向客户提出挑战。

```
@forbidden_view_config()
def forbidden_view(request):
    resp = HTTPUnauthorized()
    resp.www_authenticate = 'Basic realm="Secure Area"'
    return resp 
```

这是未经测试的，但可以让您大致了解如何使用禁止视图。这将挑战客户端，然后他们可以自由地发出另一个请求（希望使用凭据），该请求会变成映射到您关心的权限的主体。

# objective-c - 如何在工具栏中设置五个相同大小的按钮？

> ID：10548240
> 
> 赞同：0
> 
> 时间：2012-05-11T08:47:40.687
> 
> 标签：objective-c

我是 iPhone 的初学者，我在工具栏中设置了相同大小的所有按钮，提供任何建议和源代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:56:19.137

您必须构建一个 NSMutableArray 并将 5 个 UIBarButtonItem 放入其中，根据需要设置它们的属性，然后在 ToolBarItems 中设置此数组，如下所示：

```
NSMutableArray *buttonsArray = [[NSMutableArray alloc] init];
UIBarButtonItem *myButton1=[[UIBarButtonItem alloc] style:UIBarButtonItemStylePlain target:self action:@selector(toolbarButtonPressed1:)];
[buttonsArray addObject:myButton1];
//here you set the other properties for your first button

// and then you do the same for your other buttons

[self setToolbarItems:buttonsArray animated:YES]; 
```

当然你必须先声明一个 ToolBar :)

# c# - 单击C#中的元素时如何检测webbrowser正在从目标服务器下载数据

> ID：10548242
> 
> 赞同：0
> 
> 时间：2012-05-11T08:47:52.050
> 
> 标签：c#, webbrowser-control

情况如下：我`WebBrowser`在程序中使用，我想检测的是当点击一个html元素时浏览器从目标服务器下载的数据。

这就是我想要做的：

```
HtmlElement element = browser.GetOneElement
element.InvokeMember("click");
if(will download data from the server?)
{
    //do something
}
else
{
    //do other thing
} 
```

目前，我的解决方案是设置一个标志来注意正在下载，并扩展控件，`OnProgressChanged`在`WebBrowser`那里将标志设置为 true。

这是代码：

```
 private bool _isInteractive;
    public bool IsInteractive
    {
        set 
        {
            _isInteractive = true;
        }
        get
        {
            Thread.Sleep(1000);
            return _isInteractive;
        }
    } 
```

然后像这样使用它：

```
HtmlElement element = browser.GetOneElement
browser.IsInteractive = false;
element.InvokeMember("click");
if(browser.IsInteractive)
{
    //do something
}
else
{
    //do other thing
} 
```

但我认为它不是那么好，甚至很烂。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:50:00.000

房产怎么样[`WebBrowser.IsBusy`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.isbusy.aspx)？

# events - Googlemap Api V3 Catch 事件

> ID：10548246
> 
> 赞同：0
> 
> 时间：2012-05-11T08:48:21.863
> 
> 标签：events, google-maps-api-3

如果地图类型发生了变化，我该如何捕捉？

*   如果 maptype id = 路线图/卫星/混合/地形，则捕获
*   捕捉是否使用街景

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:35:55.900

这两个都非常简单——你只需听正确的事件：

**地图类型更改：**

```
google.maps.event.addListener(map, 'maptypeid_changed', function() {
  console.log("map type changed");
}); 
```

**街景激活：**

```
var pano = map.getStreetView();
google.maps.event.addListener(pano, 'visible_changed', function() {
  if (pano.getVisible()) {
    console.log("street view visible");
  }
}); 
```

# hibernate - OpenJPA 和/或 Hibernate 是否支持像 EclipseLink 那样的变量关系？

> ID：10548251
> 
> 赞同：1
> 
> 时间：2012-05-11T08:48:54.077
> 
> 标签：hibernate, jpa, jpa-2.0, eclipselink, openjpa

我正在使用 Felix OSGi 框架，其中不支持 EclipseLink 动态编织，所以我更喜欢使用 OpenJPA（或者可能是 Hibernate）。但是，我在几个地方需要的一个特性是[可变的一对多关系](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Variable_and_Heterogeneous_Relationships)，其中一个实体指的是不同类的实体的集合（它们共享相同的超类）。其他提供商是否支持？该链接仅提及 EclipseLink，但它可能不是最新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:59:18.753

[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_1) (and JDO) supports relations using interfaces, abstract classes etc, since that is part of the JDO spec (but not the JPA spec).

Don't expect the wikibooks page(s) to reflect what other implementations provide since it was written AFAIK by Oracle members who, naturally, will include what they know about. The pages are very good for general spec-based JPA info, but you should always look at the docs for the individual implementations for details of what they provide as vendor extensions. The pages also don't make it always so clear what is and isn't part of the spec or a vendor extension.

# objective-c - 出现在波形中的文本的 iOS 动画（过渡）

> ID：10548257
> 
> 赞同：0
> 
> 时间：2012-05-11T08:49:11.167
> 
> 标签：objective-c, ios

我需要制作“应用程序后。2 秒后，文本从左到右以平滑的波浪出现”。

有没有人为这波文本或解决方案提供一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T03:14:29.280

您可以使用 Core Graphics 沿 UIBezierPath 呈现文本。这个问题 -[现有圆圈上的曲线文本](https://stackoverflow.com/questions/3841642/curve-text-on-existing-circle)- 说明了如何很好地完成这一点。希望这可以帮助！

# c# - 创建内边框

> ID：10548258
> 
> 赞同：1
> 
> 时间：2012-05-11T08:49:14.207
> 
> 标签：c#, asp.net, html, css

我正在尝试在 HTML/CSS 中创建如下所示的按钮。创建稍微在按钮实际边缘内的白色边框的最佳方法是什么？我正在使用 ASP.net。

提前致谢！

![按钮](../Images/ab8e8ae2b67675d8e03a01c1690f5d70.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:58:52.967

使用*嵌套插入框阴影***[，](http://dabblet.com/gist/2658508)**您可以创建：

![在此处输入图像描述](../Images/8740d680e681e0c2e8b61fec01822d5b.png)

**带有一个**纯html 标签：

```
<button> view your receipts </button> 
```

和一些CSS：

```
button {
    width: 200px;
    font-weight: bold;
    height: 55px;
    line-height: 55px;
    border-radius: 17px;
    background-color: #ffd28a;
    border: none;
    box-shadow:
            0 0 0  9px  #ffd28a inset,
            0 0 0 11px  #FFFFFF inset;
    color: red;
    box-sizing: content-box;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:01:35.413

这里有很多固定值，但只是为了展示一个例子

```
<style type="text/css">
   .button { border: 3px solid orange; width: 300px; height: 50px; border-radius: 15px}
   .button a { background: orange; border: 1px solid #fff; line-height: 46px; border-radius:12px; color: red; text-align: center; margin:1px; display: block;}
</style>

<div class="button">
  <a href="#">Submit</a>
</div> 
```

# java - 将子类 List 转换为基类 List

> ID：10548268
> 
> 赞同：5
> 
> 时间：2012-05-11T08:49:55.037
> 
> 标签：java

> **可能重复：**
> [是`List<Dog>`的子类`List<Animal>`吗？为什么 Java 的泛型不是隐式多态的？](https://stackoverflow.com/questions/2745265/is-listdog-a-subclass-of-listanimal-why-arent-javas-generics-implicit)

我有一个类**Dogs**的列表，它扩展了**Animals**并有一个以下类型的列表。

```
ArrayList<Animals> animal = new ArrayList<Animals>(); 
```

现在我有另一个类**Puppy**，它扩展了 Dogs。

并拥有一个`List<Puppy> puppy = new ArrayList<Puppy>();`

现在我想将列表`animal`转换为`puppy`. 可以直接做吗？

我可以这样做如下。

```
for (Animals ani: animal){
     puppy.add((Puppy) ani)
} 
```

但我想要一个直接铸造解决方案。是否可以？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T08:57:42.480

不，它不会直接工作，除非您将第一个列表定义为：

```
List<? extends Animals> animal; 
```

那么你将能够做到：

```
List<Puppy> puppy = new ArrayList<Puppy>();
animal = puppy; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:01:56.047

首先，您必须将基类中的列表定义为...

```
public ArrayList<? super Animal> ani; 
```

然后将您的基类列表投射到扩展类中...

```
ArrayList<? extends Animal> puppy= new ArrayList<Puppy>();
puppy= (ArrayList<? extends Animal>)ani;
List<Puppy> castPuppy = (List<Puppy>)puppy;//here we case the base class list in to derived class list. 
```

注意：它可能通过未经检查的异常

# multithreading - 互斥锁 - 可以通过合并来构建集合

> ID：10548284
> 
> 赞同：1
> 
> 时间：2012-05-11T08:50:38.643
> 
> 标签：multithreading, thread-safety, pthreads, mutex

从这里：[https ://stackoverflow.com/a/5524120/462608](https://stackoverflow.com/a/5524120/462608)

> 如果你想从一组这样的对象中锁定几个受互斥保护的对象，这些对象**可以通过 merging 构建**，你可以
> 
> 选择每个对象只使用一个互斥锁，允许更多线程并行工作，
> 
> 或对每个对象使用一个对任何可能共享的递归互斥锁的引用，以降低无法将所有互斥锁锁定在一起的可能性，
> 
> 或者对每个对象使用一个对任何可能共享的非递归互斥锁的可比引用，从而避免多次锁定的意图。

我只是不明白上面的整个报价。他指的是什么？请通俗地解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:08:08.253

这是我对引用报价的解释。我希望它既可以理解，又符合编写原始答案的人的意图。

假设您有一个需要受互斥体保护的数据结构。您可以选择如何“细化”处理处理这些对象的关键部分。这些选项还可能影响线程可能需要如何行为以同时获取多个对象的锁：

*   每个对象使用一个互斥锁：

    ```
    struct foo {
        mutex mux;

        // important data fields...
    }; 
    ```

    这样做的好处是处理不同对象的线程不会发生争用。如果单个线程需要在为多个对象持有锁的同时处理多个对象（我认为这就是“设置合并”的意思），则不需要递归互斥锁。但是，确实需要注意避免死锁。

*   让每个对象引用一个可以与其他对象共享的递归互斥锁：

    ```
    struct foo {
        recursive_mutex* pmux;

        // important data fields...
    }; 
    ```

    由于两个对象实际上可能与单个互斥锁相关联，如果线程 1 尝试锁定对象 A 并且线程 2 在对象 A 和 B 共享同一个互斥锁时同时尝试锁定对象 B，则其中一个线程将阻塞，直到另一个线程释放互斥锁。由于互斥锁是递归的，单个线程可能会锁定多个对象，即使它们共享同一个互斥锁。请注意，关于死锁仍然有同样的警告。

    与第一种方案相比，此方案的（可能）优势在于，如果一个线程必须同时锁定多个对象，则该集合中的某些对象很有可能共享一个互斥锁。一旦线程锁定了一个对象，理论上在尝试锁定下一个对象时阻塞的可能性就会降低。但是，我认为在实践中可能很难证明您将获得这种好处，除非您能够真正描述线程的锁定行为以及它们将锁定的对象集（并设置互斥共享以反映模型）。

*   该引用中的最后一项实质上是指在上述场景中使用非递归锁。在这种情况下，您需要防止线程尝试“重新锁定”互斥锁（当然，这不能使用非递归互斥锁来完成），因此线程必须以某种方式比较它即将执行的锁获取它已经获取的锁以确定它是否应该或不应该获取该对象上的锁。如果涉及多个对象，这可能会成为一个复杂的场景，以确保线程获得了正确的锁集。

    ```
    struct foo {
        mutex* pmux;  // pointer to (possibly shared) non-recursive mutex

        // important data fields...
    };

    // a set of objects a thread needs to work on in a critical section
    // the objects possibly share non-recursive mutexes
    struct foo* pA;
    struct foo* pB;
    struct foo* pC;

    // acquire the necessary locks on all three objects:
    mutex_lock( pA->pmux);
    if (pB->pmux != pA->pmux) mutex_lock( pB->pmux);
    if ((pC->pmux != pA->pmux) && (pC->pmux != pB->p-mux)) mutex_lock( pC->pmux);

    // releasing the set of mutexes is similar 
    ```

    与其手动获取内联互斥锁，不如将它们传递给一个函数来管理确保忽略任何重复项的复杂性。与之前的方案一样，仍然需要解决避免死锁的问题。

# jquery - joomla模块中的Ajax url参数

> ID：10548293
> 
> 赞同：1
> 
> 时间：2012-05-11T08:51:16.037
> 
> 标签：jquery, ajax, url, joomla, module

Joomla 模块有一个主文件、xml 文件、ajax.php 文件、css 文件夹、js 文件夹和带有 default.php 文件的 tmpl 文件夹。

default.php 文件具有 jquery ajax 功能。url 参数正在调用 ajax.php 文件。此文件是真或假（即；joomla 代码 - 电子邮件是否已发送）。

```
jQuery.ajax({

            type : 'POST',
            url : 'modules/mod_abc/ajax.php',
            data : {
                varName : zxi,
                varEmail : zxj,
                varPhone : zxk,
                varTime : zxl
            },
            dataType : 'text',
                            .............
                            ..............
                            ...............
}); 
```

此输出未进入 default.php 文件。如果我删除定义的（JEXE）行，我会从 ajax.php 文件中获取值。

我希望 ajax.php 文件作为 joomla 模块的一部分，并定义（JEXE）行。在里面我想写joomla的邮件功能

请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:49:58.183

模块文件在 joomla 中被调用，这就是为什么需要“JEXEC”参数来确定引用者是否是 joomla 本身。这意味着，您不能将此代码插入到您的 ajax.php 文件中，因为您使用 ajax 调用它，而不是使用 joomla 包含它。

解决方案是为您的模块创建一个组件作为“助手”。ajax 调用中的 url 将指向组件，因为您可以从任何地方调用它们，并且您也可以检查 JEXE 参数。

```
 type : 'POST',
        url : 'http://yoursite.com/index.php?option=com_abc',
        data : {
            varName : zxi,
            varEmail : zxj,
            varPhone : zxk,
            varTime : zxl
        },
        dataType : 'text', 
```

此方法会将参数传递给您的 com_abc 组件，您可以在组件中执行任何您想要的操作。如果您打算使用返回值，那么也使用 format=raw 参数，让 joomla 知道不要为 ajax 调用打印出整个页面：

```
 type : 'POST',
    url : 'http://yoursite.com/index.php?option=com_abc&format=raw',
    data : {
        varName : zxi,
        varEmail : zxj,
        varPhone : zxk,
        varTime : zxl
    },
    dataType : 'text', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T06:25:57.663

```
<script>
  jQuery(window).load(function(){
   var data = {};
   display_result_data();
  });
function display_map_result_data() {
var ajaxUrl = "modules/mod_mapcontent/submit_form.php";
 jQuery.ajax({
              type: "POST",
              url: ajaxUrl,
              data: {category: 'simple'},
              dataType    : "json",
              async       : false,
              success : function(result){
                data = result;
               }
          });
}
 </script>
<?php
/**
 * @package     Joomla.Site
 * @subpackage  mod_banners
 *
 * @copyright   Copyright (C) 2005 - 2013 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
*/
  defined('_JEXEC') or die;
  $baseurl = JURI::base();
?>
 <div id="mapcontent" class="mapcontent">
   <div id="map-canvas"></div>
 </div> 
```

# iphone - iOS 5 隐藏 tabBarItem 文本标签

> ID：10548295
> 
> 赞同：4
> 
> 时间：2012-05-11T08:51:18.583
> 
> 标签：iphone, ios, ios5

是否可以隐藏 a 中的文本标签`tabBarItem`？

我的文本标签是我用作替换的图像的一部分，因为它们有一些我无法在代码中复制的斜角/阴影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:09:12.547

据我所知，在与选项卡关联的视图控制器中，您可以设置：

```
self.title=@""; 
```

但是在`UINavigationController`这种情况下也设置为`@""`导航栏的标题，所以你必须重新定义`titleView`导航栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:11:10.847

您可以将文本字段留空。例如：

```
-(void)setBlankTitleForTabBarItem:(UITabBarItem*)Item{
    [Item setTitle:nil];
} 
```

# objective-c - Objective - C Sting 格式化就像 printf/NSString stringWithFormat

> ID：10548299
> 
> 赞同：1
> 
> 时间：2012-05-11T08:51:26.273
> 
> 标签：objective-c, ios, string, numbers, format

我正在使用一个商业第三方库，它对屏幕上显示的数字格式非常严格。

格式化只能通过您可以自定义`labelFormatString`每个系列上调用的字符串来完成，例如：

```
donutSeries.labelFormatString = @"$%.02f"; 
```

就像`printf/NSString stringWithFormat`。

当然，现在我的要求强加给我最后的调整，我无法弄清楚而不是显示`$123456789`我必须显示它们`$123,456,789`

如果可能的话，是否只使用上面提到的字符串而不是其他（没有`NSNumberFormater`等）来实现这一点。

谢谢

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:16:33.683

@zahreelay 他说没有格式化程序，因为他不能使用它们。我认为这是不可能的，因为格式化取决于语言环境和其他一些东西，而 obj-c 字符串格式化与 printf 的格式化规范并不完全相同。即使使用 printf 进行千次分离，您也必须设置一些语言环境：

```
setlocale(LC_ALL, "");
unsigned int x = 12345u;
printf("%'8u\n", x); //prints 12,345 
```

但不幸的是，这不适用于 NSLog for ex。（刚刚测试过）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T09:12:00.347

看看 NSNumberFormatter 类，我相信，你可以使用它来实现它。

例如

```
NSNumberFormatter *formatter = [NSNumberFormatter new];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle]; // this line is important!

NSString *formatted = [formatter stringFromNumber:[NSNumber numberWithInteger:2000000]]

[formatter release]; 
```

# wordpress - Wordpress 通过管理员显示地点的谷歌地图

> ID：10548305
> 
> 赞同：0
> 
> 时间：2012-05-11T08:51:39.107
> 
> 标签：wordpress, wordpress-theming

我正在为一位自由教育者制作一个网站，他在 3-4 个不同的地方进行讲座。我希望在这些讲座发生的帖子底部附上谷歌地图。是否可以在 Admin Post-editor 中选择 3-4 个带有这些位置的单选按钮，这将通过主题插入谷歌地图 iframe？

谢谢您的帮助。

BR-:g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:46:20.570

可能有一种更简单的方法，但这样做的一种方法是：

1.  创建一个名为 Location 的自定义帖子类型 (CPT)
2.  安装[WP Geo](http://wordpress.org/extend/plugins/wp-geo/)（或类似的）并为您的新 CPT 启用它，因此每个都可以与特定位置相关联，并且
3.  使用[Posts 2 Posts](http://wordpress.org/extend/plugins/posts-to-posts/)插件将帖子（讲座详细信息）与位置相关联

您可能需要编写一些代码来确定帖子的链接位置，并调用 WP Geo 功能来呈现地图，但如果您有一些编码经验，这应该相当简单。

**编辑**

好的，既然你热衷于自定义字段，试试这个。安装[高级自定义字段](http://www.advancedcustomfields.com/)插件，它会为您提供自定义字段的单选按钮（我认为默认情况下不可能）。设置一个名为“Course Details”的新字段组，其中包含一个名为“Location”的字段。将其与适当的条目类型（页面或帖子）相关联： ![字段定义](../Images/8e37b5b76c6261b29243a7f07ca3e81a.png)

该字段将出现在条目编辑器中，如下所示： ![页面编辑](../Images/e9486cfd20ed6e357b21d36d2cbcd1ec.png)

要使地图出现在代码中，请在模板中添加如下内容：

```
 <?php 
        switch (get_field('location')) {
            case "melbourne":
                ?><iframe width="560" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/maps?gl=uk&amp;ie=UTF8&amp;t=m&amp;ll=-37.81609,144.967175&amp;spn=0.011866,0.024033&amp;z=15&amp;output=embed"></iframe><br /><small><a href="http://maps.google.co.uk/maps?gl=uk&amp;ie=UTF8&amp;t=m&amp;ll=-37.81609,144.967175&amp;spn=0.011866,0.024033&amp;z=15&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small><?php
                break;
            case "london":
                ?><iframe width="560" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/maps?gl=uk&amp;ie=UTF8&amp;t=m&amp;ll=51.508101,-0.128059&amp;spn=0.018697,0.048065&amp;z=14&amp;output=embed"></iframe><br /><small><a href="http://maps.google.co.uk/maps?gl=uk&amp;ie=UTF8&amp;t=m&amp;ll=51.508101,-0.128059&amp;spn=0.018697,0.048065&amp;z=15&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small><?php
                break;
            case "geneva":
                ?><iframe width="560" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.uk/maps?gl=uk&amp;ie=UTF8&amp;t=m&amp;ll=46.198369,6.142302&amp;spn=0.020793,0.048065&amp;z=14&amp;output=embed"></iframe><br /><small><a href="http://maps.google.co.uk/maps?gl=uk&amp;ie=UTF8&amp;t=m&amp;ll=46.198369,6.142302&amp;spn=0.020793,0.048065&amp;z=14&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small><?php
                break;
        } ?> 
```

该代码只是一个快速而丑陋的示例，但它应该让您了解如何使用该字段。URL 直接来自谷歌地图——我只是点击了链接图标，然后点击“自定义和预览嵌入的地图”来获得我想要的大小。

# objective-c - animateWithDuration 立即完成

> ID：10548307
> 
> 赞同：16
> 
> 时间：2012-05-11T08:51:43.337
> 
> 标签：objective-c, ios, uiview, uiimageview, core-animation

我知道很多人都问过同样的问题，但提出的解决方案似乎都不相关，所以我再次问：我有以下代码块：

```
UIImageView *moneyHolder = [[UIImageView alloc] initWithImage:moneyImage];    
if([paymentMethod.viewed intValue] == 0){
            //CGRect targetFrame = CGRectMake(0, cell.frame.size.height/2-3, cell.frame.size.width, targetHeight);
            CGRect targetFrame = moneyHolder.frame;
            targetFrame.origin.y = cell.frame.size.height/2-3;
            NSLog(@"animating");
            [UIView animateWithDuration:2
                                  delay:0
                                options: UIViewAnimationCurveEaseOut
                             animations:^{
                                 moneyHolder.frame = targetFrame;
                             } 
                             completion:^(BOOL finished){
                                 NSLog(@"done");
                             }
            ];
        } 
```

我认为应该为我的 MoneyHolder 框架设置动画。不幸的是，这似乎立即发生，而不是持续 2 秒。我可以使用日志中的时间戳来验证这一点：

2012-05-11 03:41:50.102 AgilePoet[5824:15203] 动画
2012-05-11 03:41:50.116 AgilePoet[5824:15203] 完成

有人对为什么会发生这种情况有任何想法吗？关于该主题的所有其他问题都集中在不可动画的属性上，但我知道 imageview 框架是可动画的。我唯一能想到的是这段代码是写在我的

```
-tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath method. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T02:29:00.800

引用文档：

> frame 框架矩形，描述视图在其父视图坐标系中的位置和大小。
> 
> 对此属性的更改可以设置动画。但是，如果 transform 属性包含非恒等变换，则 frame 属性的值是未定义的，不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

如果您或其他代码更改了视图的转换矩阵，则对 frame 属性的更改不会按预期工作。

您应该更改 center 属性（以移动视图）和 bounds 属性（以更改其大小）。这些属性的行为符合预期。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-22T13:13:35.383

在我的例子中，动画在 viewdidload 方法中调用。不要这样做。试试 viewWillAppear

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T23:19:25.943

导致动画立即完成的另一件事是动画对象（在我的情况下为 UIImageView）是否为零。

# java - Java 语音聊天异常：不支持的 PCM_SIGNED

> ID：10548309
> 
> 赞同：-1
> 
> 时间：2012-05-11T08:51:44.310
> 
> 标签：java, exception, audio

我正在用Java制作一个项目。它是通过休眠和JMF。基本上它是音频/视频/文本聊天的项目。在此，文本聊天正在运行，但是当我向另一个用户进行音频呼叫时，会出现异常。

```
java.lang.IllegalArgumentException: Line unsupported: interface TargetDataLine s
upporting format PCM_SIGNED 8000.0 Hz, 16 bit, mono, 2 bytes/frame, little-endian 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:28:31.260

我认为这是因为系统 I/O [1](https://forums.oracle.com/forums/thread.jspa?threadID=2221754) [2](https://forums.oracle.com/forums/thread.jspa?threadID=2198477)不支持的音频格式。查询您的系统以获取正确格式的列表。

# jquery - 将绝对定位的元素居中

> ID：10548314
> 
> 赞同：1
> 
> 时间：2012-05-11T08:52:25.897
> 
> 标签：jquery, css, position

我有一个包含两个图像的元素，一个在另一个之上。包含元素向左浮动并排成三个。我使用 jQuery 修复将图像居中到其元素中。我不得不使用 jQuery，因为它是一种响应式设计，所以图像会改变大小。除了在某些移动设备上，这一切都很好。在按下随机元素之前，似乎没有计算图像宽度？我希望这是有道理的。URL 是 mooble.co.uk，它是页面左侧较大的图像。

**编辑

抱歉，我没有说清楚，我使用的解决方案工作正常，但在移动设备上，宽度和左边距似乎不是在加载时计算的？大约 20 秒后，它似乎就位。

编辑**

```
<div class="g1" id="mass">
<p><span class="highlight"></span></p>
<div id="mass-cont">

<img class="bottom" src="images/mass.png" />
<img class="top" src="images/no-mass.png" />

</div>

</div> 
```

css

```
#mass{position:relative;}
#mass-cont{}
#mass img{position:absolute;left:50%;}
#mass img{transition: opacity 1s ease-in-out;display:block;}
#mass img.top:hover{opacity:0;} 
```

JS

```
//Functions
function setImageHeight(){

var imageSize = $('.bottom').height();
$('#mass-cont').height(imageSize);

var imageWidth = $('.bottom').width();
var position = imageWidth / 2;

$('#mass-cont > img').css('margin-left' , '-'+ position + 'px');

}

//Load Document
$(document).ready(function() {

//Set image height

$('.bottom').load(function(){

setImageHeight();

});

$(window).resize(function() {

setImageHeight();

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:12:57.050

我是根据过去的窗口宽度并设置元素的左边距来完成的。

```
$(window).resize(function() {
 setPosition();
});

$(document).ready(function () {
 setPosition();
});

function setPosition(){
var WindowWidth = $(window).width();
var BottomWidth = 300; //The width of bottom
Left Position = (WindowWidth - BottomWidth) / 2;
$(".bottom").css("margin-left", BottomWidth + "px");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:55:59.730

尝试这个：

```
left = ($("#mass-cont").width() - $(".bottom").width()) / 2;
$(".bottom").css("left", left) 
```

# zend-framework - 从布局内调用的 View_Helpers 中附加 JavaScript 或 StyleSheet

> ID：10548317
> 
> 赞同：0
> 
> 时间：2012-05-11T08:52:30.460
> 
> 标签：zend-framework

is it possible to make it happen? My view helper works fine if in a view that was a result of a controll. But I would like to have some dinamic layout, for example, to render a jquery menu according to the state I'm in.

If I call the helper from layout headScript never happens to echo the appendScript command I did inside the helper.

thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:39:11.597

您在这里有几个选择。
做你想做的最简单的方法是使用[inlineScript()](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.inlinescript)视图助手并将其添加到引导程序中的视图或直接在布局脚本中。inlneScript() 帮助器的工作方式与 headScript() 帮助器相同，但将代码放在标记中。我有时使用[inlineScript()](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.inlinescript)助手将配置数据传递给音频和视频播放器。

或者，您可以使用视图助手构建自己的[占位符](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)，然后在引导程序中对其进行初始化。

这是呈现菜单的自定义[占位符](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)的简单示例：

引导程序：

```
 protected function _initMenus() {
        //get view object
        $view = $this->getResource('view');
        //assign the id for the menus...
        $view->mainMenuId = 4;
        $view->adminMenuId = 5;
    } 
```

布局：

```
<?php
$this->layout()->adminMenu = $this->action(
        'render', 'menu', null, array('menu' => $this->adminMenuId))
?>
<div id="adminMenu">
     <!-- Render the placeholder -->
     <?php echo $this->layout()->adminMenu ?>&nbsp;
</div> 
```

这个占位符只是使用[action()](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.action)助手来调用 renderAction()，但是你可以用占位符做什么几乎受限于你的想象力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:11:11.693

I don't think this is possible since if the helper is called in the layout, it will probably be calling headScript after the headScript helper has run. The only way to get it to work would be to ensure your helper is called near the top of the layout, before the headScript call.

# c# - Visual Studio 可以自动缩进/格式化预处理指令吗？

> ID：10548319
> 
> 赞同：14
> 
> 时间：2012-05-11T08:52:43.523
> 
> 标签：c#, visual-studio, visual-studio-2010, c-preprocessor

> **可能重复：**
> [如何强制 C# 条件指令缩进？](https://stackoverflow.com/questions/1321228/how-to-force-indentation-of-c-sharp-conditional-directives)

假设我想在 Visual Studio 中输入：

```
 class Program
    {
        private const Byte NUM_THREADS =
        #if DEBUG
            1;
        #else
            8;
        #endif
    } 
```

如果我只是简单地输入它（即不手动修复任何缩进），Visual Studio 将像这样格式化它：

```
 class Program
    {
        private const Byte NUM_THREADS =
#if DEBUG
 1;
#else
        8;
#endif
    } 
```

有什么我可以做的，它会自动缩进，所以它看起来像第一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T00:22:55.427

不幸的是，没有办法让预处理器命令跟随代码缩进。但愿它做到了。:(

[根据： Indenting #defines](https://stackoverflow.com/questions/789073/indenting-defines)，看起来原因是以前的编译器对出现在命令之前的空格感到厌烦

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-27T05:45:24.913

转到**`Edit menu => Format Document`**OR 按快捷键`Ctrl`+ `K`, `Ctrl`+ `D`（简而言之`Ctrl`+ `K`+ `D`）这个快捷键可以使用 .html、.aspx。.cs等...

# google-app-engine - 如何将 Servlet 项目部署到谷歌应用引擎？

> ID：10548320
> 
> 赞同：1
> 
> 时间：2012-05-11T08:52:46.573
> 
> 标签：google-app-engine, servlets, maven

我使用 Servlet、Maven 和 Bootstrap 创建了一个传统的 Web 项目。

如何将其部署到 GAE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:38:04.883

1 下载日食

2 为eclipse安装GAE插件

3 基于模板新建项目

4 创建谷歌帐户（gmail）

5 为您的 google 帐户创建具有唯一 ID 的应用程序

6 从 Eclipse 登录到您的谷歌帐户

7 使用 Eclipse 将应用程序部署到 GAE 到您在步骤 5 中创建的应用程序

# php - PHP - 切换状态

> ID：10548321
> 
> 赞同：13
> 
> 时间：2012-05-11T08:53:04.430
> 
> 标签：php, math

问题很简单，但我正在寻找一个创造性的解决方案。我们经常遇到数组，对象具有可以切换的属性（它可以是活动的或非活动的，1 或 0）。

我想要的是一个创造性的解决方案（一个函数），将 0 转换为 1，将 1 转换为 0。

一些例子：

```
// First
if ($state == 1)
{
  $state = 0;
}
else
{ 
  $state = 1; 
}

// Second
$states = array(1, 0);
$state = $states[$state];

// Third
$state = ($state == 1) ? 0 : 1; 
```

是否有另一种单线解决方案？谢谢，享受头脑风暴。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-11T08:54:31.933

你可以做：

```
$state = 1 - $state; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T09:01:21.337

试试这个代码： `$state = !$state`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:57:02.663

如果结果允许为布尔值（并且不必是整数交换），则可以使用否定运算符：

```
<?php
$state = 0;
var_dump(!$state);

$state = 1;
var_dump(!$state); 
```

输出：

```
bool(true) 
bool(false) 
```

# mysql - 使用点分隔符查询 MySQL LIKE

> ID：10548327
> 
> 赞同：3
> 
> 时间：2012-05-11T08:53:21.807
> 
> 标签：mysql

我在 mysql 类型 varchar 中有字段，字段数据包含代码，代码就像树结构，点 (.) 作为父子之间的分隔符。

示例`1215`有孩子`1215.001`和`1215.002`

这是数据库中每一行的数据

```
ID  | kode
1   | 1215
2   | 1215.001
3   | 1215.001.001
4   | 1215.002.001
5   | 1215.002
6   | 1215.002.001 
```

如何获得2级代码？
它的意思只是代码`1215.001`和`1215.002`

已尝试使用此查询

```
select * from `kegiatan` where `kode` LIKE '1215.%'; 
```

但它让所有代码都以`1215`例如：`1215.001.001`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:00:57.207

使用正则表达式。

```
 select * from `kegiatan` where `kode` REGEXP '^1215\.[^\.]+$'; 
```

这将匹配所有内容：

```
 That starts with ( "^" )

 the string "1215.",

 followed by at least one character that is a member of the set "NOT ." ("[^\.]+")

  followed by the end of the string.("$") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:02:48.953

您可以为此使用正则表达式；

```
select * from `kegiatan` where `kode` REGEXP '^1215.[0-9]+$'; 
```

它将匹配以 开头的项目`^1215`，然后是句点`.`，然后是一个或多个数值`[0-9]+`，然后是字符串的结尾`$`。

这将匹配`1215.001`and `1215.002`，但不匹配`1215`or`1215.001.001`

希望它有帮助，戴夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:58:02.880

```
select distinct substr(kode,1,8)  from `kegiatan` where `kode` LIKE '1215.%'; 
```

[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substr](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substr)

# ios - UINavigationBar 自定义背景与悬垂（iOS 5）

> ID：10548328
> 
> 赞同：1
> 
> 时间：2012-05-11T08:53:24.667
> 
> 标签：ios, cocoa-touch, uinavigationbar, uiappearance

我正在尝试做到这一点（请原谅快速而肮脏的模型）：

![在此处输入图像描述](../Images/aa94ca2ffebc92ee50ac3f3002477083.png)

这是一个带有自定义背景图像的 UINavigationBar。但是，图像需要悬垂在导航栏的底部。图像是不规则的形状（我的模型上的白色部分是透明的，应该通过间隙显示视图控制器的视图）。

我真的不想修改每个可能的视图控制器来绘制悬垂位。谁能想到一个聪明的解决方案来完成这项工作？

我只支持 iOS 5，所以不需要向后兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:15:38.570

其实是我自己管理的：我把背景的悬垂部分做成了一个单独的图像，并将其添加为导航栏的子视图：

```
 UIImageView *iv = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"navigationBarBackground-overhang"]];
    iv.frame = CGRectMake(0, newNavC.navigationBar.frame.size.height, newNavC.navigationBar.frame.size.width, iv.image.size.height);
    [newNavC.navigationBar addSubview:iv];
    newNavC.navigationBar.clipsToBounds = NO; 
```

# c# - 使用 setter 而不是代码的样式

> ID：10548332
> 
> 赞同：1
> 
> 时间：2012-05-11T08:53:34.043
> 
> 标签：c#, wpf, xaml, styles

我在 WPF 应用程序中有一个控件，我需要折叠一个元素，该元素没有暴露，所以我需要像这样在 Loaded 事件上使用代码折叠它。

```
Stema.Controls.NavigationPane navPane = (Stema.Controls.NavigationPane)sender;

DockPanel docPanel =(DockPanel)VisualTreeHelper.GetChild(navPane, 0);
Border border = (Border)VisualTreeHelper.GetChild(docPanel, 1);
Grid grid = (Grid)VisualTreeHelper.GetChild(border, 0);
DockPanel docPanel1 = (DockPanel)VisualTreeHelper.GetChild(grid, 4);

docPanel1.Visibility = Visibility.Collapsed; 
```

我的问题是，有没有办法使用样式和设置器来做到这一点，以及如何在可视树中找到未**命名的元素。**

**编辑**

后面的代码

```
private void NavPane_Loaded(object sender, RoutedEventArgs e)
        {

            Stema.Controls.NavigationPane navPane = (Stema.Controls.NavigationPane)sender;

            DockPanel docPanel =(DockPanel)VisualTreeHelper.GetChild(navPane, 0);
            Border border = (Border)VisualTreeHelper.GetChild(docPanel, 1);
            Grid grid = (Grid)VisualTreeHelper.GetChild(border, 0);
            DockPanel docPanel1 = (DockPanel)VisualTreeHelper.GetChild(grid, 4);

            docPanel1.Visibility = Visibility.Collapsed; 

        } 
```

xml

```
<s:NavigationPane Loaded="NavPane_Loaded" x:Name="navigationPane" SelectedIndex="0" LargeItems="2" Margin="2,0,0,1" IsMinimized="False" Width="200" DockPanel.Dock="Left" Background="White"  >
            <s:NavigationPaneItem Header="Reportitems"  Name="intro" >

                <ContentControl  x:Name="ActionContent" prism:RegionManager.RegionName="{x:Static inf:RegionNames.LeftNavigationRegion}" VerticalAlignment="Stretch" >

                        <ContentControl.Template>
                            <ControlTemplate TargetType="ContentControl">

                            <ContentPresenter  Content="{TemplateBinding Content}" />

                            <ControlTemplate.Triggers>
                                    <Trigger Property="HasContent" Value="false">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </ContentControl.Template>
                    </ContentControl>

            </s:NavigationPaneItem>

        </s:NavigationPane> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:51:14.667

恐怕您必须为此使用可视化树帮助器（就像您现在正在使用的那样），因为您的控件是第三方控件，因此可能已为模板覆盖而密封。

# automated-tests - 使用 FitNesse 和soapUI 进行Web 应用程序测试——关于测试管理和可维护性的任何最佳实践？

> ID：10548335
> 
> 赞同：5
> 
> 时间：2012-05-11T08:53:41.837
> 
> 标签：automated-tests, soapui, fitnesse

致所有测试自动化专家:-)！我想听听您对以下情况的意见：

我需要测试一个 Web 应用程序。我必须在服务器上运行后端测试，在客户端上运行前端测试。我还需要运行端到端测试，包括后端和前端。

服务器公开 Web 服务 (SOAP)，前端客户端使用来自这些服务的数据。还有第三方客户端使用来自 Web 服务的数据。有时，测试场景要求我进行端到端测试，即我在前端 GUI 中进行一些更改，然后在后端使用 Web 服务来确定更改是否成功。

我喜欢**FitNesse——**在我看来，将 WHAT 和 WHY 与 HOW 分开对于设计好的测试至关重要。有**Selenesse**模块，它可以将 Selenium 测试与 FitNesse wiki 页面集成。这可以很容易地从我想要的测试方式（场景表和脚本表）描述我需要测试什么以及为什么需要测试它（wiki 文本），这就是我想要的。

FitNesse 的问题是测试 SOAP Web 服务有点麻烦。要么，我需要开发一个专门构建的 SOAP 客户端 Java 夹具，要么我必须编写扩展 ServiceFixture 类的 Java 夹具，为 FIT 编写。无论哪种方式，开发工作都比我在**soapUI**中实现这些测试要大得多。

在我看来，soapUI 的缺点是没有简单的方法来解释测试的内容和原因（至少不是以直观的方式）。

因此，假设我想要为端到端测试进行合理的开发工作，我已经确定了在 FitNesse/Selenesse 中编写 GUI 测试和在 soapUI 中编写后端测试的方法。我现在可以选择尝试从 FitNesse 运行soapUI 测试，管理那里的所有测试，或者从soapUI 运行 FitNesse 测试......

我对这种方法的测试管理（不太容易在一个视图中查看测试结果）和可维护性（两种不同语言的工具）有一些担忧。您对此有什么最佳/最佳实践的想法吗？你会建议第三个工具来管理另外两个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:23:58.877

您是否使用任何持续集成工具，例如 hudson、bamboo？

我问这个问题是因为我建议您更喜欢持续集成方法，这样您就有机会在每次提交/构建后自动测试应用程序。

我的意思是，如果您使用 hudson 或竹子，您可以有机会在开发人员提交任何内容后运行您的测试。此外，您可以按计划运行您的测试。

另一个优点是，这些工具（hudson/bamboo）可以记录测试脚本，并且可以在失败/成功（您的选择）的情况下发送电子邮件。因此，您可以轻松监控您的测试。

而且您还有机会并行或连续运行 selenium 和 soapUI。

* * *

我也有一些关于soapUI 测试的建议。

拥有的测试用例越多，开发、执行和维护它们所需的时间就越多。重要的一点是在设计测试时考虑可维护性。

如果应用程序有多个可用的 Web 服务，则 WSDL 必然会发生变化并且需要在 SoapUI 中进行更新。使用一个soapUI 项目中的所有内容，您只需要在一个地方更新WSDL，而不是在多个项目中。因此，只需为一个应用程序创建一个soapUI 项目。

然后您需要创建测试套件和测试用例。

在一个回归测试套件中包含所有服务的主要流程（成功场景）。Web 服务的请求应该按照逻辑业务流程进行排序。例如，如果您测试在线商店的网络服务，您需要先搜索商品然后购买。如果您在soapUI 测试中保持这种逻辑业务顺序，您可以轻松地为每个测试步骤设置一个全局变量。我的意思是，在第一步你可以搜索项目 X 然后购买相同的项目，这样可以为项目 X 设置一个全局变量。这样更容易维护或扩展这样的 soapUI 项目。您有机会创建数据源并收集变量（我们的在线商店示例中的不同项目）并在循环中扩展这些项目的案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:49:35.450

我建议您使用 soapui 创建测试套件并使用 jenkins 报告测试结果。

您可以使用 jenkins 执行soapui 测试和fitnesse 测试并生成xml 测试结果文件。在构建端到端测试时，此设置非常有用。我们可以将任何测试集或测试套件与 Jenkins 很好地结合在一起，您必须以出色的方式呈现和保存测试结果。

当专注于工作组件时，在 sprint 或完整的应用程序中完成工作并不够稳定，无法投入大量精力进行端到端测试，我认为您应该专注于单独进行 soapui 测试。

# c# - Wp7 数据连接错误

> ID：10548346
> 
> 赞同：0
> 
> 时间：2012-05-11T08:54:21.917
> 
> 标签：c#, windows-phone-7

我有一个表 emp2，其中包含 Empid EmpName Salary

我在 emp 中从 c 传递了一个 linq，其中 empname=="ss" select c 现在我想显示该 empname 的 empid，但代码在 linq ERROR ::: Emp2.EmpName' has no supported translation to 处显示错误SQL。在 countrylist=query.tolist();

私有常量字符串 ConnectionString = "isostore:/Emp1.sdf";

```
 [Table(Name = "Emp")]
    public class Emp2
    {
        [Column(IsPrimaryKey = true, IsDbGenerated = true)]
        public int EmpId
        {
            get;
            set;
        }

        public string EmpName
        {
            get;
            set;
        }
        public int Salary
        {
            get;
            set;
        }
    }

    public MainPage()
    {
        InitializeComponent();

        using (CountryDataContext context = new CountryDataContext(ConnectionString))
        {

            if (!context.DatabaseExists())
            {

                context.CreateDatabase();

            }
            else
            {
                MessageBox.Show("Employee table exist already");
            }
        }

    }

    private IList<Emp2> getcountry()
    {
        IList<Emp2> countryList = null;
        using (CountryDataContext context = new CountryDataContext(ConnectionString))
        {
            IQueryable<Emp2> query = from c in context.Emp where c.EmpName=="ss"   select c;
            countryList = query.ToList();
        }

        return countryList;
    }

    public class CountryDataContext : DataContext
    {
        public CountryDataContext(string connectionString)
            : base(connectionString)
        {

        }
        public Table<Emp2> Emp
        {
            get
            {
                return this.GetTable<Emp2>();
            }
        }

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        IList<Emp2> emp= this.getcountry();

        foreach (Emp2 a in emp)
        {
            MessageBox.Show(a.EmpId.ToString());

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:43:57.197

您尚未向属性添加属性`EmpName`以指示它是一列。

# c# - XNA WP7 应用程序的广告，无法点击

> ID：10548349
> 
> 赞同：0
> 
> 时间：2012-05-11T08:54:38.103
> 
> 标签：c#, windows-phone-7, xna, ads

我正在尝试在我的 XNA WP7 应用程序中使用广告控件。它显示得很好，但我无法点击它，试试这个代码：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    private DrawableAd bannerAd;
    private bool shouldDraw;
    private const string guid = "xxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"; // my id is hidden
    private const string idapp = "00000";

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        TargetElapsedTime = TimeSpan.FromTicks(333333);
        InactiveSleepTime = TimeSpan.FromSeconds(1);
    }

    protected override void Initialize()
    {
        AdGameComponent.Initialize(this, guid);
        CreateAd();

        Components.Add(AdGameComponent.Current);
        AdGameComponent.Current.Enabled = true;
        AdGameComponent.Current.Visible = false;

        base.Initialize();
    }

    private void CreateAd()
    {
        // Create a banner ad for the game.
        int width = 480;
        int height = 80;
        int x = (GraphicsDevice.Viewport.Bounds.Width - width) / 2; // centered on the display
        int y = 390;

        bannerAd = AdGameComponent.Current.CreateAd(idapp, new Rectangle(x, y, width, height), true);
    }

    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);
    }

    protected override void UnloadContent()
    {
    }

    protected override void Update(GameTime gameTime)
    {
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        TouchCollection touchPoints = TouchPanel.GetState();
        if (touchPoints.Count > 0)
        {
            TouchLocation t = touchPoints[0];
            if (t.State == TouchLocationState.Pressed)
            {
                shouldDraw = true;
            }
        }

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        if (shouldDraw)
        {
            shouldDraw = false;
            AdGameComponent.Current.Visible = true;
        }

        base.Draw(gameTime);
    }
} 
```

这段代码有什么问题？

提前感谢您的帮助。

最好的祝福

注意：如果组件以可见状态启动，则示例正在工作，但这不是我想要的，因为我不想把它放在我的应用程序的开头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:35:52.110

SDK有bug如果我拿最新版本就可以了

请参阅[http://community.microsoftadvertising.com/en/developer/pubcenter/f/32/t/72786.aspx](http://community.microsoftadvertising.com/en/developer/pubcenter/f/32/t/72786.aspx)

# android - android listview对字符的限制？

> ID：10548350
> 
> 赞同：0
> 
> 时间：2012-05-11T08:54:40.860
> 
> 标签：android, listview

在我的列表视图中，我每行都有一个图像，图像右侧有一些文本。我有两个彼此上方的文本字符串。如果它变得太长，是否有可能以某种方式在文本字符串一中剪切句子。就像限制它可能包含多少个字符一样。例如，如果我想让它说：“Kanye West 这个星期六住在 New Your City”，但是由于这句话太长，我的第二个文本字符串消失了。所以我希望它看起来像这样：“kanye West live this...(cut)”，然后显示其余部分 你必须点击该行。所以可以通过对字符使用某种限制来削减句子吗？希望你能理解。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:01:36.973

是的，这是可能的。在 TextView 标记中，添加右边距（以调整所需的字符数）并添加以下代码：当达到 textView 的右限制时，通过添加“...”来减少句子`android:maxLines="2"`。`android:ellipsize="end"`

你会为你的 textView 获得类似的东西：

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:maxLines="2"
    android:ellipsize="end"
    android:layout_marginRight="30sp" /> 
```

# android - Android Runtime.exec("arp") 不起作用

> ID：10548351
> 
> 赞同：0
> 
> 时间：2012-05-11T08:54:42.227
> 
> 标签：android, runtime.exec, arp

有什么方法可以启动命令'arp'。

我的尝试：

```
Runtime rt = Runtime.getRuntime();
proc = rt 
```

1.  `.exec("arp")`-> 得到一个`IOException`
2.  `.exec("/proc/net/arp")`-> 也得到了一个`IOException`（通过 adb shell 发现 a`/proc/net/arp`存在）

还尝试了一个shell解决方案：

```
String sPrefix="/system/bin/sh -c 'proc/net/arp;";
String sPostfix="'";
Runtime rt = Runtime.getRuntime();

proc = rt.exec(sPrefix+sPostfix); // sh -c 'cd someplace; echo do something'
InputStreamReader reader = new InputStreamReader(proc.getInputStream());
BufferedReader buffer = new BufferedReader(reader);
String line = "";
while ((line = buffer.readLine()) != null) {
   echo.append(line + "\n");
} 
```

但没有返回值。

有没有人有想法：-/？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:18:00.267

`/proc/net/arp`不是命令，而是 ARP 表。这是一个可以阅读的文本文件：

```
 StringBuffer echo = new StringBuffer();
  try {
    BufferedReader br = new BufferedReader(new FileReader("/proc/net/arp"));
    String line = "";
    while((line = br.readLine()) != null) echo.append(line + "\n");
    br.close();
  }
  catch(Exception e) { Log.e(TAG, e.toString()); } 
```

该表本身具有以下格式：

```
IP address        HW type    Flags     HW address           Mask   Device
192.168.178.21    0x1        0x2       00:1a:2b:3c:4d:5e    *      tiwlan0
192.168.178.34    0x1        0x2       1a:2b:3c:4d:5e:6f    *      tiwlan1
... 
```

# opencl - OpenCL/CPU。测试OpenCL框架是否可用

> ID：10548353
> 
> 赞同：5
> 
> 时间：2012-05-11T08:54:43.990
> 
> 标签：opencl, nvidia, hybrid, ati

我正在开发一个混合 OpenCL 应用程序，它必须在运行时决定是否使用 GPU 实现。

是否有跨平台（即英特尔、nvidia 和 ati）的方式来确定运行应用程序的计算机是否支持 opencl 框架，而不会导致应用程序崩溃？一开始我只是为Windows平台开发。

```
#include <CL/cl.h>
#include <iostream>

int main() 
{
    std::cout << "Start cross paltform testing" << std::endl;
    cl_platform_id platform[1];
    clGetPlatformIDs(1, platform, 0);
    std::cout << "End cross paltform testing" << std::endl;
    return 0;
} 
```

目前我收到错误：

```
The application was unable to start correctly (0xc000007b)... 
```

如果我尝试在上述情况下启动它。

注意：实际上，至少对于 nvidia 来说应该是可能的。在这种情况下，我已经从 nvidia GPU SDK 测试了 oclDeviceQuery，它可以正常工作。只需将 Windows/System 文件夹中的“opencl.dll”复制到应用程序文件夹中即可。我不知道为什么我的应用程序在相同的情况下崩溃。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:11:15.997

所有实现都是相同的`OpenCL.dll`，因此您可以随身携带一个，而不是像@talonmies 建议的那样手动加载库（这更好但更复杂）。它只是提供一个接口来访问已安装的平台。

要检查是否安装了任何平台，您应该使用

```
int main() 
{
    std::cout << "Start cross paltform testing" << std::endl;
    int num_platforms;
    cl_platform_id *platform;
    clGetPlatformIDs(0, NULL, &num_platforms);
    std::cout << "End cross paltform testing: " << num_platforms << " found" << std::endl;
    // Get platform IDs (not necessary right now, for future use)
    platform = new cl_platform_id[num_platforms];
    clGetPlatformIDs(num_platforms, platform, NULL);
    // ........
    delete platform;
    return 0;
} 
```

因为即使没有安装 OpenCL 平台，您的代码也会说一切正常

# objective-c - 如何定义一个 NSArray？

> ID：10548354
> 
> 赞同：3
> 
> 时间：2012-05-11T08:54:44.130
> 
> 标签：objective-c, ios

我想在其中添加带有 NSString 值的 NSArray 。我几乎可以肯定我可以使用`#define`它，但我不明白如何访问和初始化声明的变量。例如我有：

```
#define my_definition 0; 
```

而且我知道如何访问这个 0 值。但是 NSArray 中的 NSString 怎么样？

我有一个定义.h 文件。在那里，我可以从我的任何班级访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:02:48.777

哇...你想在这里做什么？

`#define`是一个预处理器宏。预处理器对 Objective-C （或者 C ……它只是一个美化的文本替换引擎）一无所知，而 Objective-C 对预处理器一无所知。

`#define`除了*数值*（例如`int`s）或a 之外，您几乎肯定不想要 a `NSString`。（实际上，由于各种原因，您通常也会看到`extern NSString * ...`代替。）`#define`

如果您需要访问`NSArray`对象中的特定内容，您可以创建一个您填充的 ​​ivar`-init`等。如果其他类需要访问该数组，请将其设为`@property`或仅声明一个（公共）方法。

也许我误解了你想要做什么？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T09:00:32.153

如果你使用#define，你定义了一个预处理器宏。它不是一个全局变量。相反，无论您在哪里使用该宏，它都会被#define 之后的内容替换，然后才会编译您的代码。

话虽如此，您可以像在其他地方一样简单地定义一个 NSArray：

```
#define kMyArray [NSArray arrayWithObjects:@"MyString1", @"MyString2", nil] 
```

请注意，我没有以分号结束这一行。想象一下，如果我现在在代码中的某个地方写下：

```
NSString *str1 = [kMyArray objectAtIndex:0]; 
```

这将被替换为：

```
NSString *str1 = [[NSArray arrayWithObjects:@"MyString1", @"MyString2", nil] objectAtIndex:0]; 
```

如果我的定义中有分号，我会得到一个编译器错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T09:27:12.013

几个月前我遇到了别人的代码，我根据自己的目的进行了调整，主要是为了节省自己的大量打字时间。我提前向原作者道歉，我很想在应得的地方给予赞扬，但我翻遍了我的硬盘，找不到原始样本或他或她的名字。如果我确实遇到了原始来源，我会用原作者的名字修改这篇文章。

无论如何，基本思想是使用 $ 字符作为宏前缀字符，然后采用可变参数。是的，gcc 和 Apple 的 LLVM 编译器都支持这一点。我已经疯了，根据几个例子转换了几乎所有的核心类型（数组、字符串、日期、字典等），但这里有一些想法可以帮助你：

```
#define $string( _format, _args... )        ( [NSString stringWithFormat: ( _format ), _args] )
#define $stringUTF8( _format, _args... )    ( [[NSString stringWithFormat: ( _format ), _args] UTF8String] )

// shorthand container creation (NSArray, NSMutableArray)
#define $array( _objs... )                  ( { id objs[] = { _objs }; [NSArray arrayWithObjects: objs count: sizeof(objs) / sizeof(id)]; } )
#define $arrayM( _objs... )             ( { id objs[] = { _objs }; [NSMutableArray arrayWithObjects: objs count: sizeof(objs) / sizeof(id)]; } ) 
```

这可以让你做一些整洁的事情，如下所示：

```
NSArray *           array;

array = $array( @"foo", @"bar", $string( @"This is a %@ string", @"formatted" ) ); 
```

节省大量打字*！*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:57:34.457

```
#define MY_DEFINITION @[ @"String1", @"String2" ] 
```

最好不要分号

# wpf - 唯一字段的Wpf datagrid验证规则

> ID：10548357
> 
> 赞同：4
> 
> 时间：2012-05-11T08:54:48.300
> 
> 标签：wpf, validation, wpfdatagrid

我有一个名为 UniqueNameSolidWoodRule 的子类 ValidationRule 来验证数据网格中的重复条目。

这是代码：

```
public class UniqueNameSolidWoodRule : ValidationRule
{
    public CollectionViewSource CurrentCollection { get; set; }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        if (value != null)
        {
            ObservableCollection<SolidWood_VM> castedCollection = (ObservableCollection<SolidWood_VM>)CurrentCollection.Source;

            foreach (SolidWood_VM swVM in castedCollection)
            {
                if (swVM.Designation == value.ToString())
                {
                    return new ValidationResult(false, ResourcesManager.Instance.GetString("DuplicatedRecord"));
                }
            }
        }

        return new ValidationResult(true, null);
    }
} 
```

这是 XAML 片段：

```
<DataGrid.Resources>
        <CollectionViewSource x:Key="CurrentSolidWoodCollection" Source="{Binding Path=SolidWoods}" />
</DataGrid.Resources>

 <DataGridTextColumn x:Name="Column2" Header="{x:Static p:Resources.Designation}" Width="auto">
        <DataGridTextColumn.Binding>
            <Binding Path="Designation" ValidatesOnDataErrors="True" UpdateSourceTrigger="LostFocus">
                 <Binding.ValidationRules>
                        <my:UniqueNameSolidWoodRule  CurrentCollection="{StaticResource CurrentSolidWoodCollection}"/>
                  </Binding.ValidationRules>
             </Binding>
         </DataGridTextColumn.Binding>
  </DataGridTextColumn> 
```

我的问题是，**有时**这条规则会将值与它自己的行进行比较。我怎么能防止这种情况？在我看来，我需要一个与要比较的值关联的 row.index 属性，但不幸的是我无法找到实现这一目标的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T16:56:20.360

我终于把事情搞定了！

这是解决方案：

在 XAML 中，我添加了以下 ValidationStep：

```
<my:UniqueNameSolidWoodRule CurrentCollection="{StaticResource CurrentSolidWoodCollection}" ValidationStep="CommittedValue"/> 
```

这样，我得到一个 BindingExpression 对象而不是字符串作为重写的 Validate 方法的第一个参数，这为我提供了更多关于要验证的记录的信息，就像我可以用来检查我是否在比较同一个对象的**HashCode** .

这是更新的 Validate 方法：

```
public class UniqueNameSolidWoodRule : ValidationRule
{
    public CollectionViewSource CurrentCollection { get; set; }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        if (value != null)
        {
            ObservableCollection<SolidWood_VM> castedCollection = (ObservableCollection<SolidWood_VM>)CurrentCollection.Source;

            SolidWood_VM curValue = (SolidWood_VM)((BindingExpression)value).DataItem;

            foreach (SolidWood_VM swVM in castedCollection)
            {
                if (curValue.GetHashCode() != swVM.GetHashCode() && swVM.Designation == curValue.Designation.ToString())
                {
                    return new ValidationResult(false, ResourcesManager.Instance.GetString("DuplicatedRecord"));
                }
            }
        }

        return new ValidationResult(true, null);
    }
} 
```

# xquery - 在xquery中将一个字符串拆分为两个字符串

> ID：10548358
> 
> 赞同：2
> 
> 时间：2012-05-11T08:54:58.593
> 
> 标签：xquery

这是字符串

```
a = "http://www.peoples.net/mcfnet/viewtopic.php?f=143&amp;t=4898958&amp;sid=2110d616dbad926" 
```

现在，我们需要将这个字符串分成两个，并且需要一个字符串。

预期输出是：

```
b = "http://www.peoples.net/mcfnet/viewtopic.php?f=143&amp;t=4898958&amp;" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:01:23.003

尝试使用 substring 函数

我认为使用 substring-before-match 你可以做你想做的事，或者尝试看看其他子字符串的函数。检查这个[链接](http://www.xqueryfunctions.com/xq/functx_substring-before-match.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:26:00.890

您想要获取除最后一个查询字符串参数之外的所有原始字符串。

**这是一个 XPath 2.0 表达式，用于从原始 生成此字符串，该字符串**在名为 的变量中定义`$vA`：

```
 codepoints-to-string
        (
         reverse
           (string-to-codepoints
                (substring-after
                    (codepoints-to-string
                        (reverse(string-to-codepoints($vA))
                     ),
                   '&amp;'
                 )
            )
          )
        ) 
```

**说明**：

1.  我们使用 将字符串转换为字符序列，`string-to-codepoints()`并使用 反转该序列`reverse()`。然后我们使用 `codepoints-to-string.

2.  从反转的字符串（由上面的 1\. 产生）我们得到第一个`&`. 我们使用`substring-after()`

3.  这是我们的结果，但是颠倒了——我们使用与上述步骤 1 完全相同的逻辑将其恢复为正常状态。

# javascript - 为什么以下 setTimeout 会立即打印？

> ID：10548360
> 
> 赞同：1
> 
> 时间：2012-05-11T08:55:02.870
> 
> 标签：javascript, node.js

以下立即打印我的消息

```
setTimeout(console.log('delayed hello world'), 10000); 
```

这有点违反直觉。而且由于我的消息立即打印出来，10 秒后会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:56:03.807

您需要为此使用匿名功能：

```
setTimeout(function() { console.log('delayed hello world') }, 10000); 
```

[在MDN](https://developer.mozilla.org/en/DOM/window.setTimeout)上查看有关将参数传递给`setTimeout`函数的更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T08:57:02.383

您正在运行 console.log （因为您`()`在它的末尾）并将其返回值传递给`setTimeout`而不是传递函数。

```
var myFunction = function () { console.log('delayed hello world'); }
setTimeout(myFunction, 10000); 
```

# mysql - 如何更改外键的操作

> ID：10548365
> 
> 赞同：1
> 
> 时间：2012-05-11T08:55:52.197
> 
> 标签：mysql

假设我有一个外键，其动作是：

```
on delete set default, on update cascade 
```

如果我想更改操作，如何在 alter table 选项中指定？
我试过这个：

```
change my_table add on delete cascade my_key; 
```

但它给出了一个语法错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'on delete cascade matricola' at line 1 
```

我想更改删除引用的主键时触发的默认操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:02:38.480

```
ALTER TABLE my_table DROP FOREIGN KEY my_key;
ALTER TABLE my_table ADD CONSTRAINT my_key FOREIGN KEY ('some_id') 
        REFERENCES some_table ('id') ON UPDATE CASCADE ON DELETE CASCADE; 
```

As far as i know you have to drop your key and create new one with new rules.

# java - 如何使用 EclipseLink MOXy 在 JAXB 中使用命名空间？

> ID：10548370
> 
> 赞同：3
> 
> 时间：2012-05-11T08:56:00.723
> 
> 标签：java, jaxb, eclipselink, moxy

我有一个像这样的 XML：

```
<message  xmlns:gtm="http:// www.example.com/working/gtm">
    <gtm:header>
    <someid></someid>
    <sometext></sometext>
    </gtm:header>
    <gtm:customer>0123456789</gtm:customer>
</message> 
```

我正在使用`@XmlPath`映射。但是当我运行代码时，我得到了这个错误：

```
Exception [EclipseLink-25016] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: A namespace for the prefix gtm:header was not found in the namespace resolver. 
```

我想知道我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:41:18.850

[**下面是一个示例，说明如何使用EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)映射您的用例。

**包信息**

`@XmlSchema`首先，您需要使用包级别注释设置命名空间信息。稍后我们将利用`@XmlNs`注释指定的命名空间前缀`@XmlPath`。

```
@XmlSchema(
    namespace="http:// www.example.com/working/gtm",
    xmlns={
        @XmlNs(prefix="gtm", namespaceURI="http:// www.example.com/working/gtm")
    },
    elementFormDefault=XmlNsForm.UNQUALIFIED)
package forum10548370;

import javax.xml.bind.annotation.*; 
```

**信息**

`@XmlPath`注释用于指定基于 XPath 的 MOXy 映射。由于在`@XmlSchema`我们指定的注释中`elementFormDefault=XmlNsForm.UNQUALIFIED`，没有前缀的 XPath 部分将不是命名空间限定的。

```
package forum10548370;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="message", namespace="")
@XmlAccessorType(XmlAccessType.FIELD)
public class Message {

    @XmlPath("gtm:header/someid/text()")
    private String id;

    @XmlPath("gtm:header/sometext/text()")
    private String text;

    @XmlElement(namespace="http:// www.example.com/working/gtm")
    private String customer;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要`jaxb.properties`使用以下条目添加一个在与域模型相同的包中调用的文件（请参阅[http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum10548370;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Message.class);

        File xml = new File("src/forum10548370/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Message message = (Message) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(message, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<message xmlns:gtm="http:// www.example.com/working/gtm">
   <gtm:header>
      <someid></someid>
      <sometext></sometext>
   </gtm:header>
   <gtm:customer>0123456789</gtm:customer>
</message> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html](http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html)
*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# java - 使用 Java EE/JPA 检索数据库元信息

> ID：10548374
> 
> 赞同：0
> 
> 时间：2012-05-11T08:56:32.013
> 
> 标签：java, database, jakarta-ee, restful-architecture, database-metadata

我需要能够从任何类型的数据库中检索数据库信息，并通过 restful 服务（使用 Glassfish 和 JAX-RS）返回此信息。

我需要的信息包括：

*   数据库名称
*   表名
*   列名和属性

我目前正在研究[DatabaseMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)并且似乎提供了我需要的东西。

但是，我想检查是否有我应该考虑的替代方案（例如 JPA2）。

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:53:55.910

我决定使用[SchemaCrawler](http://schemacrawler.sourceforge.net/)。它是高度可配置的，并为我提供了我需要的一切。

# iphone - 调用函数“CFURLCreateStringByAddingPercentEscapes”返回一个核心基础对象，保留计数为 +1

> ID：10548375
> 
> 赞同：0
> 
> 时间：2012-05-11T08:56:34.023
> 
> 标签：iphone, objective-c

我正在将我的项目转换为 ARC 并且 Xcode 认为这里存在内存泄漏，有人认为这有什么问题吗？我没有编写这段代码，所以我不熟悉 C 调用。

```
- (NSString*) URLEscaped
{

    NSString *encodedString = (NSString *)CFURLCreateStringByAddingPercentEscapes(
                                NULL,
                                (CFStringRef)self,
                                NULL,
                                (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                kCFStringEncodingUTF8);

    return encodedString;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:15:14.547

在 ARC 下，您可以使用 __bridge_transfer 将返回字符串的内存管理转移到 ARC：

```
NSString *encodedString = (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(
                            NULL,
                            (CFStringRef)self,
                            NULL,
                            (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                            kCFStringEncodingUTF8); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:00:21.367

从[文档](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)：

> 您可以通过多种方式使用 Core Foundation 获取对对象的引用。根据 Core Foundation 的所有权政策，您需要知道您是否拥有由函数返回的对象，以便您知道在内存管理方面要采取什么行动。Core Foundation 为其函数建立了命名约定，允许您确定您是否拥有函数返回的对象。简而言之，如果函数名称包含“创建”或“复制”一词，则您拥有该对象。如果函数名称包含单词“Get”，则您不拥有该对象。

是的，你在`CFString`那里泄漏了一个。

# java - java逐渐改变控件的颜色

> ID：10548378
> 
> 赞同：1
> 
> 时间：2012-05-11T08:56:50.527
> 
> 标签：java, swing, colors

任何人都可以帮助组件渐变颜色变化。我想改变颜色

```
new Color(255,0,0) 
```

至

```
new Color(0,0,0) 
```

尝试了不同的计时器变体，但卡住了。顺便说一句，用计时器来做这件事是正确的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:08:06.680

这些方面的东西：

```
Color before = new Color(255,0,0);
Color after = new Color(0,0,0);
Color current = before;
int maxtime = 1000;
int step = 0;

public void step()
{
    if(step == maxtime)
        return;
    step++;
    double percentComplete = step/maxtime;
    double percentGone = 1-percentComplete;
    int red = (int)(before.getRed()*percentGone+after.getRed()*percentComplete);
    int green = (int)(before.getGreen()*percentGone+after.getGreen()*percentComplete);
    int blue = (int)(before.getBlue()*percentGone+after.getBlue()*percentComplete);
    int alpha = (int)(before.getAlpha()*percentGone+after.getAlpha()*percentComplete);
    current = new Color(red, green, blue, alpha);
    //set component's color to current
} 
```

请注意，您可能需要进行一些检查以确保红色绿色和蓝色不超过 255，但我还不确定。

（这个函数应该属于你正在改变颜色的组件，你应该在每个计时器滴答声中调用它）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T10:34:21.093

请考虑使用[JLayer](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)作为您的任务的替代方案 :-)

# php - Obj C MD5 与 PHP md5() 函数不同

> ID：10548381
> 
> 赞同：2
> 
> 时间：2012-05-11T08:56:53.603
> 
> 标签：php, objective-c, xml, md5

我目前在使用此代码片段时遇到了一些问题：

```
- (NSString *) md5:( NSString *) str 
{
    const char *cStr = [str UTF8String];
    unsigned char result[16];
    CC_MD5( cStr, strlen(cStr), result ); // This is the md5 call
    return [NSString stringWithFormat:
            @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
            result[0], result[1], result[2], result[3], 
            result[4], result[5], result[6], result[7],
            result[8], result[9], result[10], result[11],
            result[12], result[13], result[14], result[15]
            ];  
} 
```

此方法生成下载的 XML 文件的哈希，与 PHP 函数 md5() 完全不同。

那么如何获得与 PHP 相同的哈希值，反之亦然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:26:09.937

如果您`echo md5('hello')`在 PHP 中执行此操作，您将收到一个 32 字符长的字符串，但是当您在 ObjC 中使用您的代码片段时，您会将字符串字符转换为 HEX 格式（通过使用格式化程序 %02x） - 请参见此处[https://developer。 apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)和这里：[Unsigned Char Array to Hex Representation NSString](https://stackoverflow.com/questions/5977650/unsigned-char-array-to-hex-representation-nsstring)。

并且您只使用一半的 MD5 字符串字符来创建这个 HEX 格式的字符串...要么`result`立即返回，要么在 PHP 中执行相同的 HEX 转换 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T04:45:13.167

在[这个答案](https://stackoverflow.com/a/3104362)中找到的功能在我的测试中完美地完成了这项工作：

```
#import <CommonCrypto/CommonDigest.h>

...
+ (NSString*)md5HexDigest:(NSString*)input {
    const char* str = [input UTF8String];
    unsigned char result[CC_MD5_DIGEST_LENGTH];
    CC_MD5(str, strlen(str), result);

    NSMutableString *ret = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH*2];
    for(int i = 0; i<CC_MD5_DIGEST_LENGTH; i++) {
        [ret appendFormat:@"%02x",result[i]];
    }
    return ret;
}
... 
```

与 PHP 的实现完全匹配。它最初来自 Facebook Connect 源代码。

# c# - 如何在 ASP.net 中显示加载页面指示器？

> ID：10548385
> 
> 赞同：2
> 
> 时间：2012-05-11T08:57:09.750
> 
> 标签：c#, javascript, jquery, asp.net

我需要在页面加载时显示“**加载**”指示器。我在页面后面的代码中从其他服务器获取数据并绑定列表视图。我没有使用更新面板，也没有通过 ajax 获取数据。那么如何在页面需要很长时间才能加载时显示“正在加载”指示器。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:02:24.947

You create a containing div with a loading gif in the center of it. When you start your ajax request you show it (with jquery for example) when the ajax request is done you hide it.
It could/should look something like this :
Code to show the loading indicator :

```
 $('#busy-holder').show(); 
```

div :

```
<div id="busy-holder" style="display: none">
    <div id="busy">

    </div>
</div> 
```

css :

```
#busy
{
    position: fixed;
    left: 50%;
    top: 50%;
    background: transparent url("loader.gif");
    z-index: 1000;
    height: 66px;
    width: 66px;
}

#busy-holder
{
    height:100%;
    width:100%;
    position:fixed;
    left:0;
    top:0;
    display: none;
    filter: alpha(opacity=30);
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=30);
    opacity:0.3;
    -moz-opacity: 0.30; 
    z-index: 1000;
} 
```

# php - 在php中加密和解密word docx文件的问题

> ID：10548386
> 
> 赞同：2
> 
> 时间：2012-05-11T08:57:11.343
> 
> 标签：php, encryption, mcrypt

我尝试使用 php mcrypt TripleDES 对**docx**格式文件进行加密。

当我尝试解密文件时，出现如下错误。

> 无法打开 Office Open XML 文件 file_name，因为内容存在问题。

这是下面的代码

```
function Encrypt($source,$key,$iv) {
      $cipher = mcrypt_module_open(MCRYPT_3DES, '', 'cbc', '');
      mcrypt_generic_init($cipher, $key, $iv);
      $result = mcrypt_generic($cipher, $source);
      mcrypt_generic_deinit($cipher);
      return $result;
}

function Decrypt($source,$key,$iv) {

  $cipher = mcrypt_module_open(MCRYPT_3DES, '', 'cbc', ''); 
  mcrypt_generic_init($cipher, $key, $iv);
  $result = mdecrypt_generic($cipher, $source);
  mcrypt_generic_deinit($cipher);
  return $result;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T04:11:14.140

我一直在等待解决方案超过 4 个月。最后我在谷歌找到了一些有价值的答案。现在我已经使用下面的链接修复了它。

[http://www.howwhywhat.in/how-to-implement-common-file-encryption-and-decryption-between-c-and-php/](http://www.howwhywhat.in/how-to-implement-common-file-encryption-and-decryption-between-c-and-php/)

最好的部分是，它也有活生生的例子：）

# c# - BinaryReader 或 Writer.Close() 未正确关闭 C#

> ID：10548388
> 
> 赞同：-1
> 
> 时间：2012-05-11T08:57:19.287
> 
> 标签：c#, filestream, binaryreader, binarywriter

我有一个执行模拟并不断读取/写入二进制文件的表单应用程序。如果您让它运行，一切都会正常工作。但是，如果表单已关闭/模拟被中止，则文件流未正确关闭 - 使文件处于锁定状态。有没有办法确保所有流都关闭？我尝试了以下 - 但它没有效果......提前非常感谢，T

```
 public BinaryWriter BinWrite;
        public BinaryReader BinRead;

        public BinaryWriter EnvBinWrite;
        public BinaryReader EnvBinRead;       

public void theForm_FormClosing(object sender, FormClosingEventArgs e)
        {

            //Close all binary file reader/writers -- crashes if it cannot overwrite files
            foreach (Building B in AllBldgs)
            {
                try
                {
                    EnvBinRead.Close();
                }
                catch
                { continue; }
                try
                {
                    EnvBinWrite.Close();
                }
                catch
                { continue; }
                try
                {
                    BinRead.Close();
                }
                catch
                { continue; }

                try
                {
                    BinWrite.Close();
                }
                catch
                { continue; }
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T09:05:53.193

您确定您知道`continue`关键字的用途吗？请注意，这将继续下一个*循环*，而不是下一个*代码块*。所以如果关闭时发生异常`EnvBinRead`，你*不会*进入要关闭的块`EnvBinWrite`，而是继续从下一项开始`AllBldgs`。

要吃掉所有异常并仍然尝试关闭所有二进制写入器，您可以编写：

```
foreach (Building B in AllBldgs)
{
    try
    {
        EnvBinRead.Close();
    }
    catch (Exception exp)
    { 
        Console.WriteLine("Closing EnvBinRead failed!" + exp.ToString());
    }

    try
    {
        EnvBinWrite.Close();
    }
    catch (Exception exp)
    { 
        Console.WriteLine("Closing EnvBinWrite failed!" + exp.ToString());
    }

    try
    {
        BinRead.Close();
    }
    catch (Exception exp)
    { 
        Console.WriteLine("Closing BinRead failed!" + exp.ToString());
    }

    try
    {
        BinWrite.Close();
    }
    catch (Exception exp)
    { 
        Console.WriteLine("Closing BinWrite failed!" + exp.ToString());
    }
} 
```

请注意，简单地吃例外*绝不*是一个好主意。如果您不关心是否可以关闭读取器或写入器，请在按照评论中的建议关闭之前检查它是否已初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:08:37.217

您应该调用 dispose 来关闭 BinaryReader 和 Writer。

**解释：**

`StreamReader, StreamWriter, BinaryReader and BinaryWriter`当您对它们调用 Dispose 时，所有关闭/处理它们的底层流。如果读取器/写入器只是被垃圾收集，它们不会处理流 - 您应该始终处理读取器/写入器，最好使用`using`语句。（事实上​​，这些类都没有终结器，也不应该有。）

Personally I prefer to have a using statement for the stream as well. You can nest using statements without braces quite neatly:

```
using (Stream stream = ...)
using (StreamReader reader = new StreamReader(stream, Encoding.Whatever))
{
} 
```

Even though the `using` statement for the stream is somewhat redundant (unless the `StreamReader` constructor throws an exception) I consider it best practice as then if you get rid of the `StreamReader` and just use the stream directly at a later date, you'll already have the right disposal semantics.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:09:44.987

It is always good to use Using block for the streams, Closing them immediately after use.

# java - java协助创建动态类及其对象

> ID：10548389
> 
> 赞同：0
> 
> 时间：2012-05-11T08:57:22.070
> 
> 标签：java, reflection

我正在尝试创建一个动态类及其对象，并尝试使用对象调用类动态方法的方法，但出现以下错误

```
java.lang.ClassNotFoundException: Eval 
```

这是我的代码，请提出任何更改以使其成功运行

```
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import javassist.CannotCompileException;
import javassist.ClassPool;
import javassist.CtClass;
import javassist.CtNewMethod;
public class DyanamicClass {
/**
 * @param args
 */
public static void main (String[] args) throws Exception {

    createClass();
    Object obj=createObject();
    Object[] actualParams = new Object[] { new Double(17) };
    callMethod("eval", obj,actualParams);
}

public static void  createClass()
{
    ClassPool pool = ClassPool.getDefault();

    CtClass evalClass = pool.makeClass("Eval");

    try {
        evalClass.addMethod(
            CtNewMethod.make("public double eval (double x) { return x ; }", evalClass));

    } catch (CannotCompileException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public static Object createObject()
{
    Object obj=null;
    try {
        Class clazz = Class.forName("Eval");
        obj=clazz.newInstance();

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return obj;
}

public static void callMethod(String name,Object obj,Object [] actualParams)
{
    Class[] formalParams = new Class[] { double.class };
    double result;
    try {
        Class clazz=Class.forName("Eval");

        Method meth = clazz.getDeclaredMethod(name, formalParams);

        result = ((Double) meth.invoke(obj, actualParams)).doubleValue();
        System.out.println(result);
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:40:17.483

我在 Javassist 的实现中测试了一些东西。了解我不了解这个库，但我的假设是 Class.forName() 使用的 ClassLoader （可能是当前的 Thread 上下文类加载器 - 需要检查）找不到 Eval 的类文件，因为它没有有关其类路径的信息。我非常确定 javassist 具有您需要为类设置的 ClassPath 信息，以便普通的 ClassLoader 能够找到其类文件信息。此外，您可能需要将类文件保存到 javassist 提供的文件中。

但是，作为一种解决方法，请执行以下操作（注意，javassist 说在 CtClass 上调用 toClass() 后，它不能再次使用）。

```
CtClass ct =ClassPool.getDefault().getCtClass("Eval");
System.out.println(ct);
Class cl = ct.toClass();
Object o  = cl.newInstance();
Method m = cl.getDeclaredMethod("eval", new Class[]{double.class});
Object res = m.invoke(o, 56);
System.out.println(res);
System.out.println(cl);
System.out.println(Arrays.toString(cl.getDeclaredMethods())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:35:52.477

您正在尝试在此处加载您的课程：

```
Class clazz = Class.forName("Eval"); 
```

1.  确保类`Eval`在您的类路径中可用。
2.  而不是类名`Eval`，您必须提供`packageName.className`类似`org.test.Eval`.

# javascript - 当用户选择文件时执行 javascript 函数

> ID：10548391
> 
> 赞同：1
> 
> 时间：2012-05-11T08:57:31.013
> 
> 标签：javascript, file, input

在 html 页面中，我添加了一个输入元素。

```
<input type="file" name="fileselect" id="fselect"> </input> 
```

当用户选择一个文件时，我想执行一个 javascript 函数。假设我也想写入控制台。

`jquery select()`检查用户是否选择了文件的正确功能是什么？我试过这样

```
$(document).ready(function(){
   $('#fselect').select(function(){ 
      console.log('selected');
      myfun(); 
    });
});

function myfun(){
   alert('you selected a file');
} 
```

出于某种原因，当我使用输入元素选择文件时，没有任何内容写入控制台，也没有出现警告框。`select()`调用编码是否错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:59:18.233

您可以使用`change`事件：

```
​$("#fselect").change(function() {
    // do something
});​​​​​​​ 
```

**演示：http:** [//jsfiddle.net/BtsHL/](http://jsfiddle.net/BtsHL/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:58:33.490

您想要的事件是*更改*，而不是*选择*。

从[文档](http://api.jquery.com/select/)：

> 当用户在其中进行文本选择时，选择事件会发送到元素。

而对于[改变](http://api.jquery.com/change/)：

> change 事件在元素值改变时发送到元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:59:45.203

试试这个：

```
$(document).ready(function(){
   $('#fselect').change(function(){ 
      console.log('selected');
    });
}); 
```

# ios - IOS：当我按下主页按钮时保存一个uimage

> ID：10548395
> 
> 赞同：0
> 
> 时间：2012-05-11T08:57:40.607
> 
> 标签：ios, uiimage, home-directory

在我的应用程序中，我应该为一些图像着色，但我有问题

我有三个视图控制器，我将图像保存在 NShomedirectory/documents

当我在 thirdViewController 中着色时，当我使用 IBAction 更改图像时，我将其保存在 NSHomedirectory 中，但是如果我正在为图像着色并按下主页按钮，则当我第二次打开我的应用程序时，我的图像不会保存；（由于某种原因，我的应用程序不是多任务处理）有没有办法拦截主页按钮按下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:02:33.567

当您的应用程序进入后台时，将调用以下方法。

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

您可以在此方法中使用图像保存代码。

检查此链接以获取更多详细信息 - [UIApplicationDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:04:50.477

是的

在您的 AppDelegate 中，您可以重载它：

```
- (void)applicationWillResignActive:(UIApplication *)application; 
```

每次单击主页按钮时，您的应用程序都会进入此功能

# java - Java 泛型：通配符（？）作为参数和返回类型

> ID：10548399
> 
> 赞同：2
> 
> 时间：2012-05-11T08:57:47.547
> 
> 标签：java, generics

我有以下代码段：

```
public void reorder(int fromIndex, int toIndex) {
    getElements().add(toIndex, getElements().remove(fromIndex));
} 
```

在这里，该方法`getElements`具有返回类型`List<?>`。该`remove`方法具有返回类型`?`，并且该`add`方法将其参数显示为`int index, ? element`。所以我的假设是，由于方法的返回类型和`remove`方法的第二个参数`add`是相同的——`?`方法调用必须成功。但是，我错了，上面的代码段导致错误：

```
The method add(int, capture#17-of ?) 
in the type List<capture#17-of ?> 
is not applicable for the arguments (int, capture#18-of ?) 
```

在这里，我没有任何直接访问列表的权限，也不知道它是`getElements`方法返回的原始类型。我在这里想要的只是删除项目`fromIndex`并将其放在`toIndex`. 那么，我该如何实现呢？我对泛型的理解也有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:51:57.253

不不不！使用捕获：

```
public void reorder(int fromIndex, int toIndex) {
    reorderWithCapture(getElements());
}

private <E> void reorderWithCapture(List<E> elements) {
    elements.add(toIndex, elements.remove(fromIndex));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:04:15.600

只需添加一个使`?`具体的演员表：

```
public void reorder(int fromIndex, int toIndex) {
  final List<Object> els = (List<Object>)getElements();
  els.add(toIndex, els.remove(fromIndex));
} 
```

由于您只是重新排列列表中的元素，因此这不会造成任何麻烦。但我必须说，如果您看到这种返回值，则设计有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:08:29.983

通配符`?`表示*任何（未知）类型*，而不是一种特定类型。因此编译器无法验证调用中使用的*any*类型是否与and调用中使用的*any 类型*`remove`相同。这从错误消息中可以看出，前者被描述为，而后者被描述为。这些被编译器视为两种不同的、不相关的类型。*`getElements``add``capture#18-of ?``capture#17-of ?`*

 *由于您显然无法修改这些方法的定义（尽管根据您的描述它们肯定看起来很可疑），所以这里最糟糕的选择可能是@Marko 建议的：将过程的两个步骤分开并使用带有 a 的临时变量具体类型参数 ( `Object`) 使编译器满意。*

# php - How to stress test server memory and processor?

> ID：10548400
> 
> 赞同：6
> 
> 时间：2012-05-11T08:57:49.593
> 
> 标签：php, stress-testing

At work we are in the middle of a server migration and we want to stress test the new server before starting to migrate our data.

I was wondering if anyone had any ideas for scripts that will put intense load on the processor and/or memory?

It is a linux server running on Red Hat 5 OS and Apache 2.2.1.

It doesn't have to push it to it's physical limits, it's just to use as a benchmark to compare to our old server so we can see how much of an improvement the new setup is over the current/old configuration.

Ideally it would be a shell or php script since php is what will be installed and what we develop in.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T10:07:16.247

写下简单的 PHP 脚本：

```
<?php
for($i = 0; $i < 1000000000; $i++) {
     $a += $i;
} 
```

然后编写一个 bash 脚本，该脚本将多次运行此 PHP 脚本，您将看到...

如果您想使用 DB 对服务器进行压力测试，请执行类似的操作：

```
for($i = 0; $i < 9999; $i++) {
    $conn = mysql_connect(...);
    $db = mysql_select_db(...);
    $res = mysql_query(...);
    $data = mysql_fetch_assoc($res);
    mysql_close();
} 
```

并再次从 bash 运行它几次......

# java - About w3c dom to update xml file

> ID：10548405
> 
> 赞同：2
> 
> 时间：2012-05-11T08:58:02.277
> 
> 标签：java, xml, dom, transform

I want to use **w3c.dom** to update xml and create a new file. I had use transform like this:

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();
DOMSource source = new DOMSource(newXml);
StreamResult result = new StreamResult(target);
transformer.transform(source, result); 
```

I use setTextContent to update a document file to newxml, but the new file(result) encoding is different with newXml. I know that I can use

```
transformer.setOutputProperty(OutputKeys.ENCODING, newXml.getXmlEncoding()); 
```

but I hope the result **document type** and **encoding typesetting** is **same** with original file(newXml).

Hope someone to know how to do, thank you~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:39:44.500

您可以使用 base64 编码 - 解码模式。首先将 xml 转换为 base64，然后将其重新转换为 xml。

# sql - SQL 过滤索引：我是否应该始终对可选列的索引进行过滤？

> ID：10548416
> 
> 赞同：10
> 
> 时间：2012-05-11T08:58:46.033
> 
> 标签：sql, sql-server-2008, indexing, filtered-index

对于“大”表，是否有任何理由不对可选列的索引进行过滤？

所以对于列 AAA 的索引（因为人们可以在 AAA 上搜索），
我可以将过滤器设置为`([AAA] IS NOT NULL)`.
这样可以节省存储空间，因此可以节省资金。

[technet](http://technet.microsoft.com/en-us/library/cc280372.aspx)的更多优势：

*   提高查询性能和计划质量
*   降低索引维护成本
*   降低索引存储成本

人们说最好对大部分为空的列的索引进行过滤。但是为什么我不对空列的索引进行过滤，比如 1% 呢？如果它只有优点，有什么理由不做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:00:03.303

这通常是一个好主意，有两个陷阱：

1.  表设计器有一个错误（仅在 Denali 之前！）。当它重建一个表时，它会删除所有过滤器。
2.  确保优化器可以静态地告知您的谓词永远不会允许返回空行。通常，这是因为 SQL NULL 语义（似乎是它们帮助而不是阻碍的唯一情况）。示例：`select distinct col from T`不会使用索引，因为可能会找到空值。使用这个：`select distinct col from T where col is not null`。

过滤后的索引没有得到充分利用。它们甚至可以用来使可为空的列唯一。

我的实用建议：尝试几个月，如果有其他不可预见的问题，请自行学习。

如果您喜欢高级 SQL Server 查询技术，还可以查看广告索引视图。它们是一组超级过滤索引（至少在 Enterprise 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:49:15.077

所有指标都有优点和缺点： 缺点：

1.  他们占用磁盘空间
2.  它们需要维护（索引树的平衡需要定期重组，以确保任何查询优化不使用 bum 数据分布），这可能意味着它们需要下线——如果它们很忙，那就是坏消息
3.  如果频繁插入，他们需要时间即时更新

好处：

1.  设计得当，它们可以消除昂贵的表扫描
2.  设计得当，（覆盖索引）它们可以消除任何表读取。

所以像往常一样，这取决于。

1.  索引过多会显着降低写入性能
2.  索引过多会显着增加空间使用量
3.  不正确的索引会显着降低读取性能

有些人因为真正了解他们关于索引的知识而过上了很好的生活：这里有非常好的东西[http://www.insidesqlserver.com/](http://www.insidesqlserver.com/)

因此，这取决于用户返回索引引用的数据的频率与他们更新通过索引包含的数据的频率。

稀疏列的索引没有什么不同，但是在列（大部分）为空的情况下，过滤索引更有效。一旦备用性降低（例如 50/50），那么当优化器决定返回数据的最佳计划时，数据的分布就会变得非常重要。过滤后的索引不会知道过滤器之外的数据分布 - 有点明显，但需要说明。

# javascript - How to distribute floated elements evenly with a dynamic column and row count in CSS?

> ID：10548417
> 
> 赞同：17
> 
> 时间：2012-05-11T08:58:50.560
> 
> 标签：javascript, html, css

I have multiple divs with a fixed width and height (think about some sort of catalog view with article pictures). Now I want to show them similar to the behavior of float:left. This ensures that the larger your browser window is, the more divs are shown in one row.

The downside of the float:left solution is, that there is a big white gap on the right side, until another div will fit. Now I have the job to distribute the divs evenly one the page, and instead of a big white gap on the right side, there should be evenly distributed gaps between the single divs.

A solution in JavaScript is easy: [http://dl.dropbox.com/u/2719942/css/columns.html](http://dl.dropbox.com/u/2719942/css/columns.html)

You can see, if you resize the browser window, it behaves similar to float:left, but the space is evenly distributed between the boxes. The column and row count is dynamically calculated with JavaScript:

```
 function updateLayout() {
    var boxes = document.getElementsByClassName('box');
    var boxWidth = boxes[0].clientWidth;
    var boxHeight = boxes[0].clientHeight;
    var parentWidth = boxes[0].parentElement.clientWidth;

    // Calculate how many boxes can fit into one row
    var columns = Math.floor(parentWidth / boxWidth);

    // Calculate the space to distribute the boxes evenly
    var space = (parentWidth - (boxWidth * columns)) / columns;

    // Now let's reorder the boxes to their new positions
    var col = 0;
    var row = 0;
    for (var i = 0; i < boxes.length; i++) {
      boxes[i].style.left = (col * (boxWidth + space)) + "px";
      boxes[i].style.top = (row * boxHeight) + "px";

      if (++col >= columns) {
        col = 0;
        row++;
      }
    }
  } 
```

Now I wonder if there is a solution without JavaScript? I would prefer a CSS-only solution, because I will have possibly up to hundreds of divs on one page.

I looked into [CSS3 Flexible Box Layout](http://www.w3.org/TR/css3-flexbox/), but this seems to be only useful for fixed column layouts. In my example, the column count gets calculated dynamically. Then I tried [CSS3 Multi-column Layout](http://www.w3.org/TR/css3-multicol/), which I could get something similar working, but the divs are aligned vertically, cut off in the inside, and the browser support isn't there yet. This seems more useful for text, but in my case I have fixed divs with pictures, that shouldn't get cut off.

So my question is: can I realize something like this without JavaScript?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T11:41:37.567

*最接近*的纯 CSS 解决方案是基于`text-align: justify`.

这是我展示该技术的两个答案：

*   [等距 DIV 的流体宽度](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs/6880421#6880421)
*   [如何使用 CSS 在灵活宽度设计中设置自动边距框？](https://stackoverflow.com/questions/7041927/how-to-set-auto-margin-boxes-in-flexible-width-design-using-css/7042563#7042563)

这是使用您的 HTML/CSS 的演示：http: [//jsfiddle.net/thirtydot/5CJ5e/](http://jsfiddle.net/thirtydot/5CJ5e/)（或[全屏](http://jsfiddle.net/thirtydot/5CJ5e/show/)）

如果与其他行相比有不同数量的框，则您的 JavaScript 和此 CSS 处理最后一行的方式会有所不同。

你的 JavaScript 会这样做：

![](../Images/cf438a3e3c8adc4654be8079787b9d7e.png)

我的 CSS 这样做：

![](../Images/81a90de2bca93be1fe6e73cdee086d8b.png)

如果 CSS 对最后一行的不同数量的框所做的操作是不可接受的，您*可以*添加一些额外的不可见框来完成该行：

[http://jsfiddle.net/thirtydot/5CJ5e/1/](http://jsfiddle.net/thirtydot/5CJ5e/1/)（或[全屏](http://jsfiddle.net/thirtydot/5CJ5e/1/show/)）

这样做的问题是不可见的框会增加包含元素的高度。如果这是一个问题，我想不出不使用一点 JavaScript 的方法来解决它：

[http://jsfiddle.net/thirtydot/5CJ5e/2/](http://jsfiddle.net/thirtydot/5CJ5e/2/)（或[全屏](http://jsfiddle.net/thirtydot/5CJ5e/2/show/)）

当然，既然现在正在使用 JavaScript，那么您不妨首先使用它来添加不可见的框（而不是玷污 HTML）：

[http://jsfiddle.net/thirtydot/5CJ5e/5/](http://jsfiddle.net/thirtydot/5CJ5e/5/)（或[全屏](http://jsfiddle.net/thirtydot/5CJ5e/5/show/)）

[（[我还在早期版本中为此编写了一个更复杂的 JavaScript 修复程序](http://jsfiddle.net/thirtydot/5CJ5e/4/)，在我想到隐形框的想法之前。现在应该没有理由使用我的旧修复程序。）]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T09:12:38.570

您将需要使用 Javascript 来执行此操作。

但只需调整框类即可一次调整所有框的边距。

```
// Calculate how many boxes can fit into one row
var columns = Math.floor(parentWidth / boxWidth);

// Calculate the space to distribute the boxes evenly
var space = (parentWidth - (boxWidth * columns)) / columns;

$('.boxClass').css('margin', space / 2); 
```

-

示例：http: [//jsfiddle.net/VLr45/1/](http://jsfiddle.net/VLr45/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T09:41:29.700

也许[MASONRY](http://masonry.desandro.com/)可以帮助安置？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T09:13:04.713

> 所以我的问题是：我可以在没有 JavaScript 的情况下实现这样的事情吗？

我最近进行了同样的练习，最后放弃并使用了 JavaScript。即使放弃 IE 7 和 8（这不切实际），我也找不到纯 CSS 解决方案。我想您可以将一长串媒体查询组合在一起，以有限的方式完成此任务。

我最终写了一个小（大约 1K 缩小）库来处理宽度、高度、比例缩放、最大宽度、滚动、一致的边距和填充等。

这是使用我自己的代码的粗略示例：http: [//jsfiddle.net/CmZju/2/](http://jsfiddle.net/CmZju/2/)。我在示例中放置了几百个元素。

> 我更喜欢纯 CSS 的解决方案，因为我可能会在一个页面上拥有多达数百个 div。

浏览器的布局引擎必须执行与您相同（或相似）的计算。当然，它是高度优化的，但我会在几台旧 PC 和几台移动设备上测试你的 JS 解决方案，然后再认为它太慢了。

看起来您正在使用绝对定位。我的非正式测试显示绝对布局比浮点计算快得多。如果您考虑浏览器必须做的工作来计算相对大小和浮动的项目，而不是仅在特定位置绘制具有特定尺寸的元素，这是有道理的。

如果你真的想着眼于优化性能，你只能操纵可见的内容。这比仅调整所有内容的大小要困难*得多*，并且可能仅在页面上有数千个项目时才相关。

如果您最终选择了脚本路线，您可能需要查看[jQuery Masonry](http://masonry.desandro.com/)以获得更多想法。我听说过关于它的好消息，它给了我一些关于我自己的图书馆的好主意。

# jquery - Colapsible panel within accordion

> ID：10548422
> 
> 赞同：0
> 
> 时间：2012-05-11T08:59:03.900
> 
> 标签：jquery, jquery-ui-accordion

[http://jsfiddle.net/EGjVe/83/](http://jsfiddle.net/EGjVe/83/)

I am trying to add a collapsible panel within a section of the JQUERY-UI-ACCORDION I need the height of each panel to by dynamic based on the height of each content.

Trying autoheight true or false makes no difference or even fillspace and clearstyle true

Basically the outer accordion section height needs to be the height of the inner collapsible panel when open or closed.

Just to clarify after reading the reply below. The inner accordion work by clicking the link and expanding the corresponding panel. When this happens I need the outer panel to resize. and not always have a large height.

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:05:33.387

I don't believe the according works in this manner. You can fill the parent element or take the largest content height but it won't change the height as you open / close sections. Maybe you could create your own click handler and use hide / show and add / removeClass to do what you want?

# java - CSV export in Play Framework 2.0

> ID：10548424
> 
> 赞同：0
> 
> 时间：2012-05-11T08:59:07.330
> 
> 标签：java, csv, playframework-2.0

```
 String outputFile = "users.csv";
 outputFile = new String(outputFile.getBytes("Windows-31J"), "ISO8859_1");
 response().setContentType("application/octet-stream;charset=Windows-31J");
 response().setHeader("Content-Disposition", "attachment; 
 filename=\"" + outputFile + "\""); 
```

i also write in my code like that. but, output (CSV excel) come with the data of HTML code. example; so. if you have CSV export sample source code.,plz can you share me ?? (I am from Myanmar.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:26:42.280

这样的事情可能会让你开始。寻找 JavaCSV (http://sourceforge.net/projects/javacsv/)

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
CsvWriter csv = new CsvWriter(stream, ',', Charset.forName(UTF8));
// add records
csv.close();
return ok(new ByteArrayInputStream(stream.toByteArray())); 
```

# ios - 将 iOS 目标 c 对象转换为 JSON 字符串

> ID：10548429
> 
> 赞同：26
> 
> 时间：2012-05-11T08:59:24.800
> 
> 标签：ios, json, serialization, nsarray

我有一个客观的C类，比如，

```
@interface message : NSObject {
 NSString *from;
 NSString *date;
 NSString *msg;
} 
```

我有一个 NSMutableArray 这个消息类的实例。我想使用 iOS 5 SDK 中的新 JSONSerialization API 将 NSMutableArray 中的所有实例序列化为 JSON 文件。我怎样才能做到这一点 ？

是通过遍历 NSArray 中元素的每个实例来创建每个键的 NSDictionary 吗？有人可以提供如何解决这个问题的代码吗？我无法在 Google 中获得好的结果，因为“JSON”将结果偏向服务器端调用和数据传输而不是序列化。非常感谢。

编辑：

```
NSError *writeError = nil; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:notifications options:NSJSONWritingPrettyPrinted error:&writeError];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
NSLog(@"JSON Output: %@", jsonString); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-11T09:05:39.507

编辑：我制作了一个虚拟应用程序，对你来说应该是一个很好的例子。

我从您的代码片段创建了一个 Message 类；

```
//Message.h
@interface Message : NSObject {
    NSString *from_;
    NSString *date_;
    NSString *msg_;
}

@property (nonatomic, retain) NSString *from;
@property (nonatomic, retain) NSString *date;
@property (nonatomic, retain) NSString *msg;

-(NSDictionary *)dictionary;

@end

//Message.m
#import "Message.h"

@implementation Message

@synthesize from = from_;
@synthesize date = date_;
@synthesize msg = mesg_;

-(void) dealloc {
    self.from = nil;
    self.date = nil;
    self.msg = nil;
    [super dealloc];
}

-(NSDictionary *)dictionary {
    return [NSDictionary dictionaryWithObjectsAndKeys:self.from,@"from",self.date,    @"date",self.msg, @"msg", nil];
} 
```

然后我在 AppDelegate 中设置了两个消息的 NSArray。诀窍是不仅顶级对象（在您的情况下为通知）需要可序列化，而且通知包含的所有元素也需要可序列化：这就是我在 Message 类中创建**字典方法的原因。**

```
//AppDelegate.m
...
Message* message1 = [[Message alloc] init];
Message* message2 = [[Message alloc] init];

message1.from = @"a";
message1.date = @"b";
message1.msg = @"c";

message2.from = @"d";
message2.date = @"e";
message2.msg = @"f";

NSArray* notifications = [NSArray arrayWithObjects:message1.dictionary, message2.dictionary, nil];
[message1 release];
[message2 release];

NSError *writeError = nil; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:notifications options:NSJSONWritingPrettyPrinted error:&writeError];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
NSLog(@"JSON Output: %@", jsonString);

@end 
```

因此，当我运行应用程序时的输出是：

**2012-05-11 11:58:36.018 堆栈[3146:f803] JSON 输出：[{“msg”：“c”，“from”：“a”，“date”：“b”}，{“msg” ：“f”，“来自”：“d”，“日期”：“e”}]**

原始答案：

这是您要查找的文档吗[？](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40010946)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-27T09:54:38.167

现在您可以使用[JSONModel](https://github.com/icanzilb/JSONModel)轻松解决这个问题。JSONModel 是一个基于 Class 对对象进行一般序列化/反序列化的库。您甚至可以使用基于非 nsobject 的属性，例如`int`,`short`和`float`. 它还可以满足嵌套复杂的 JSON。它为您处理错误检查。

**反序列化示例**。在头文件中：

```
#import "JSONModel.h"

@interface Message : JSONModel 
@property (nonatomic, strong) NSString* from;
@property (nonatomic, strong) NSString* date;
@property (nonatomic, strong) NSString* message;
@end 
```

在实现文件中：

```
#import "JSONModelLib.h"
#import "yourPersonClass.h"

NSString *responseJSON = /*from somewhere*/;
Message *message = [[Message alloc] initWithString:responseJSON error:&err];
if (!err)
{
   NSLog(@"%@  %@  %@", message.from, message.date, message.message):
} 
```

**序列化示例**。在实现文件中：

```
#import "JSONModelLib.h"
#import "yourPersonClass.h"

Message *message = [[Message alloc] init];
message.from = @"JSON beast";
message.date = @"2012";
message.message = @"This is the best method available so far";

NSLog(@"%@", [person toJSONString]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-04T01:05:18.527

注意：这仅适用于可序列化对象。这个答案是在上面对问题本身的编辑中提供的，但我自己总是在“答案”部分寻找答案；-)

```
- (NSString*) convertObjectToJson:(NSObject*) object
{
    NSError *writeError = nil;

    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:object options:NSJSONWritingPrettyPrinted error:&writeError];
    NSString *result = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-29T04:29:03.240

这是我在我的项目[BWJSONMatcher](https://github.com/BurrowsWang/BWJSONMatcher)中使用的一个库，它可以帮助您轻松地将您的 json 字符串与您的数据模型匹配，只需一行代码。

```
...
NSString *jsonString = @"{your-json-string}";
YourValueObject *dataModel = [YourValueObject fromJSONString:jsonString];

NSDictionary *jsonObject = @{your-json-object};
YourValueObject *dataModel = [YourValueObject fromJSONObject:jsonObject];
...
YourValueObject *dataModel = instance-of-your-value-object;
NSString *jsonString = [dataModel toJSONString];
NSDictionary *jsonObject = [dataModel toJSONObject];
... 
```

# django - Django - 简单的选择框表单与模板

> ID：10548434
> 
> 赞同：1
> 
> 时间：2012-05-11T09:00:02.723
> 
> 标签：django, django-forms, django-templates

我需要在模板中显示一个简单的选择输入。
此输入基于对象的选择，并且应该具有选定的值。
它不会用于任何发往服务器的帖子。

```
staffs = Staff.objects.filter(staff__company=comp)
selected_staff = staffs[0] 
```

`staffs`是我需要在选择中显示的人

我发现这个输入非常冗长，所以我想知道是否应该利用一个小表单，而不是在模板中手动编写输入。

所以问题是，我应该`<option>`手动编写输入还是应该使用内置小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:18:46.693

使用内置总是更好。您还可以使用`Field.initial`设置字段的初始值。文档在[这里](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#django.forms.Field.initial)

定义一个选项并将其设置在模板上（可能使用 javascript）要困难得多。

更新：

```
class MyStaffForm(forms.Form):
    <your form structure here>
    ...
    <end of your form structure>

def Myview(request):
    ....
    staffs = Staff.objects.filter(staff__company=comp)
    #override form class to add a new form field
    MyStaffForm.base_fields['staff']=forms.ChoiceField(choices=[[(s.id, s) for s in staffs], initial=staff[0].id) 
```

这就是您处理表单类的方式。但是覆盖基 Form class using`forms.ChoiceField`不是一个好的选择，因为您使用查询集来定义选择。所以用 a`ModelChoiceField`代替

```
MyStaffForm.base_fields['staff']=forms.ModelChoiceField(queryset=staffs, initial=staff[0]) 
```

Django 将处理表单的其余验证和初始化...

# c# - 在 linq join 中访问连接对象

> ID：10548437
> 
> 赞同：0
> 
> 时间：2012-05-11T09:00:15.080
> 
> 标签：c#, linq, linq-to-nhibernate

我正在尝试像这样做一个相当简单的 linq join：

```
var locations = (from location in session.Query<Location>()

                join speed in session.Query<ISDNSpeeds>() on location.ISDNSpeed equals speed.Id
                where 

                  (location.LastUpdatedTime > lastUpdateTime)

                select new
                {
                    Location = location,
                    Speed = speed,
                })
                .Take(10).ToList(); 
```

它似乎运行没有错误，但我无法访问 Speed 对象，我只是得到一个位置对象列表。

在这种情况下我将如何访问速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:05:11.747

You are getting a list of object in locations where you have property Location and Speed. Try `Console.WriteLine(locations.First().Speed);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:06:40.293

您的代码与此页面上的第一个示例（客户/订单）基本相同：

[http://www.hookdonlinq.com/JoinOperator.ashx](http://www.hookedonlinq.com/JoinOperator.ashx)

因此，您用来访问结果的代码可能在某处是错误的。

# objective-c - 核心动画：帧率

> ID：10548438
> 
> 赞同：0
> 
> 时间：2012-05-11T09:00:15.040
> 
> 标签：objective-c, ios, xcode, macos, core-animation

我目前正在开展一个项目，我们正在实施一些核心动画来调整/移动元素的大小。我们注意到，在许多 Mac 上，这些动画的帧速率显着下降，尽管它们相当简单。这是一个例子：

```
 // Set some additional attributes for the animation.
    [theAnim setDuration:0.25];    // Time
    [theAnim setFrameRate:0.0];
    [theAnim setAnimationCurve:NSAnimationEaseInOut];

    // Run the animation.
    [theAnim startAnimation];
    [self performSelector:@selector(endAnimation) withObject:self afterDelay:0.25]; 
```

是否明确说明帧速率（比如 60.0，而不是将其保留为 0.0）将更多优先级放在线程等上，因此可能会提高帧速率？有没有更好的方法来制作这些动画？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T20:05:23.530

[NSAnimation 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAnimation_Class/Reference/Reference.html)说

> 0.0 的帧率意味着尽可能快地进行......帧率并不能保证

合理地，尽可能快的速度应该与 60 fps 相同。

* * *

# 使用核心动画而不是 NSAnimation

NSAnimation 并不是核心动画的一部分（它是 AppKit 的一部分）。我会建议尝试使用 Core Animation 来代替动画。

1.  将 QuartzCore.framework 添加到您的项目中
2.  在您的文件中导入
3.  在您正在制作动画的视图上设置`- (void)setWantsLayer:(BOOL)flag`为 YES
4.  切换到动画的核心动画，例如

从上面动画的持续时间来看，“隐式动画”（仅更改图层的属性）可能最适合您。但是，如果您想要更多控制权，则可以使用显式动画，如下所示：

```
CABasicAnimation * moveAnimation = [CABasicAnimation animationWithKeyPath:@"frame"];
[moveAnimation setDuration:0.25];
// There is no frame rate in Core Animation
[moveAnimation setTimingFunction:[CAMediaTimingFunction funtionWithName: kCAMediaTimingFunctionEaseInEaseOut]];
[moveAnimation setFromValue:[NSValue valueWithCGRect:yourOldFrame]]
[moveAnimation setToValue:[NSValue valueWithCGRect:yourNewFrame]];

// To do stuff when the animation finishes, become the delegate (there is no protocol)
[moveAnimation setDelegate:self];

// Core Animation only animates (not changes the value so it needs to be set as well)
[theViewYouAreAnimating setFrame:yourNewFrame];

// Add the animation to the layer that you
[[theViewYouAreAnimating layer] addAnimation:moveAnimation forKey:@"myMoveAnimation"]; 
```

然后在你实现的回调中

```
- (void)animationDidStop:(CAAnimation *)theAnimation finished:(BOOL)isFinished {
    // Check the animation and perform whatever you want here
    // if isFinished then the animation completed, otherwise it 
    // was cancelled.
} 
```

# javascript - 我需要获取主 div 中的 div，如果其中的数据为空，请隐藏 theat div

> ID：10548443
> 
> 赞同：-1
> 
> 时间：2012-05-11T09:00:35.970
> 
> 标签：javascript

我有一次主要潜水，里面有 2 次潜水。我需要检查如果 div 的数据为空，请不要显示它们。BTW 数据来自 API。

这是代码：

```
<div id ="select">
     <ul>
         <li><div id="product1" style="font-family:arial; font-size:13px; border-bottom:1px solid #b8b8b8; background-color:#eeeeee; padding:10px;">

               <strong>{$feed/API Feed_142197/__data["1-Title"]}</strong>
               <br/>
               <p>{$feed/API Feed_142197/__data["1-Desc"]}</p>

              <div style="display:inline; align:left; color:green; font-weight:bold;">{$feed/API Feed_142197/__data["1-Price"]}</div>

               <div style="display:inline; padding-left:80px; padding-right:5px;">click to call image</div></div>
         </li>

         <li><div id="product2" style="font-family:arial; font-size:13px; border-bottom:1px solid #b8b8b8; background-color:#eeeeee; padding:10px;">
              <strong>{$feed/API Feed_142197/__data["2-Title"]}</strong>
              <br/>
              <p>{$feed/API Feed_142197/__data["2-Desc"]}</p>
              <div style="display:inline; align:left; color:green; font-weight:bold;">{$feed/API Feed_142197/__data["2-Price"]}</div>
              <div style="display:inline; padding-left:80px; padding-right:5px;">click to call image</div></div>
         </li>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:06:27.973

using jQuery

```
var div1 = $('#product1'),
    div2 = $('#product2');

if (!(div1.text() || div2.text())) {
     $('#select').hide()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:15:06.227

这是一个现代浏览器，不需要库的解决方案。

```
var nodes = document.querySelectorAll('#select div:empty');
for (var i = 0, il = nodes.length; i < il; i++) {
    nodes[i].style.display = 'none';
} 
```

# ruby-on-rails - Rails 无法建立 Postgres 连接

> ID：10548447
> 
> 赞同：0
> 
> 时间：2012-05-11T09:00:58.783
> 
> 标签：ruby-on-rails, postgresql

我正在尝试使用此配置运行以前工作的 Rails 3 应用程序：

```
development:
  adapter: postgres-pr
  #encoding: utf-8
  host: localhost
  port: 5432
  database: name
  username: user-name
  password: user-password
  #pool: 5
  #timeout: 5000
  #reconnect: true 
```

这是我第一次使用 Postgres，所以我的配置可能是关闭的。不过，PGAdmin 可以工作。

pg_hba.conf 有以下内容：

```
local   all             postgres                                peer

local   all             user-name                               password
host    all             user-name       127.0.0.1/32            password
host    all             user-name       ::1/128                 password

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     peer
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

（我尝试了其他配置，似乎没有改变）。

`ActiveRecord::ConnectionNotEstablished`每当我尝试加载任何页面时都会收到错误消息。网络跟踪显示以下内容：

```
socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 9
setsockopt(9, SOL_SOCKET, SO_REUSEADDR, [1], 4) = 0
bind(9, {sa_family=AF_INET, sin_port=htons(3000), sin_addr=inet_addr("0.0.0.0")}, 16) = 0
listen(9, 100)                          = 0
accept(9, {sa_family=AF_INET, sin_port=htons(50500), sin_addr=inet_addr("127.0.0.1")}, [16]) = 10
setsockopt(10, SOL_TCP, TCP_NODELAY, [1], 4) = 0
accept(9, 0xbf937aec, [16])             = -1 EAGAIN (Resource temporarily unavailable)
getpeername(10, {sa_family=AF_INET, sin_port=htons(50500), sin_addr=inet_addr("127.0.0.1")}, [16]) = 0 
```

`network,open`trace 也没有端口 5432。

我在这里看不到我想要的端口，是我设置错了吗？这里还有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:18:11.753

这是我的“database.yml”，根本不使用“端口”，也许它可以提示你正确的方向：

```
# PostgreSQL. Versions 7.4 and 8.x are supported.
#
# Install the pg driver:
#   gem install pg
# On Mac OS X with macports:
#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config
# On Windows:
#   gem install pg
#       Choose the win32 build.
#       Install PostgreSQL and put its /bin directory on your path.
#
# Configure Using Gemfile
# gem 'pg'
#
development:
  adapter: postgresql
  encoding: unicode
  database: name
  pool: 5
  username: name
  password: 

  # Connect on a TCP socket. Omitted by default since the client uses a
  # domain socket that doesn't need configuration. Windows does not have
  # domain sockets, so uncomment these lines.
  #host: localhost
  #port: 5432

  # Schema search path. The server defaults to $user,public
  #schema_search_path: myapp,sharedapp,public

  # Minimum log levels, in increasing order:
  #   debug5, debug4, debug3, debug2, debug1,
  #   log, notice, warning, error, fatal, and panic
  # The server defaults to notice.
  #min_messages: warning

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test: &test
  adapter: postgresql
  encoding: unicode
  database: name
  pool: 5
  username: name
  password: 
  min_messages: warning

production:
  adapter: postgresql
  encoding: unicode
  database: name
  pool: 5
  username: name
  password:

cucumber:
  <<: *test 
```

# c# - 序列化代理类并在其他代理类中反序列化

> ID：10548450
> 
> 赞同：0
> 
> 时间：2012-05-11T09:01:22.763
> 
> 标签：c#, xml-serialization

我必须处理以下问题。我有一个 SOAP 服务器和一个 SOAP 客户端，它们都与 SAP 系统异步工作。我对所有填充了数据的类进行查询，然后我编辑我的客户以一次又一次地发送给他们（我正在寻找 SAP 向我发送可用数据，我们将对其进行处理，将其寄回）。问题是生成的代理类读取和重新读取数据略有不同。我正在寻找 2 天的方法来确定是！既然有非常敏感的数据，哪里真的丢不起。

下面是代理类的一个例子，服务器接收数据。

```
[GeneratedCode("svcutil", "3.0.4506.2152")]
[Serializable]
[DebuggerStepThrough]
[DesignerCategory("code")]
[XmlType(AnonymousType=true, Namespace="urn:sap-com:document:sap:soap:functions:mc-style")]
public partial class _wsv_cas01d0005p0000013303Response
{
    private _wsv_cas01Rs0000012311S[] ec_20KiField;
    private _wsv_cas01Rs0000012302S[] ec_21KiField;
    private _wsv_cas01Rs0000012303S[] ec_23KiField;
    private _wsv_caSafMsgExternalS[] etMessagesField;

    private string evCeeRequestIdField;
    private int evStatusCodeField;

    [XmlArray(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, Order=0)]
    [XmlArrayItem("item", Form=XmlSchemaForm.Unqualified, IsNullable=false)]
    public _wsv_cas01Rs0000012311S[] Ec_20Ki
    {
        get
        {
            return this.ec_20KiField;
        }
        set
        {
            this.ec_20KiField = value;
        }
    } 
```

下面是另一个类的例子，代理要重新填充：

```
[GeneratedCode("svcutil", "3.0.4506.2152")]
[Serializable]
[DebuggerStepThrough]
[DesignerCategor("code")]
[XmlType(AnonymousType=true, Namespace="urn:sap-com:document:sap:soap:functions:mc-style")]
public partial class _wsv_cas01d0005p0000013203
{
    private _wsv_cas01Rq0012210001S[] ic_20KiField;
    private _wsv_cas01Rq0012210002S[] ic_21KiField;
    private _wsv_cas01Rq0012210003S[] ic_23KiField;
    private string ivBoIdField;
    private string ivBoTypeCdField;
    private string ivCbDestinationField;

    [XmlArray(Form=XmlSchemaForm.Unqualified, Order=0)]
    [XmlArrayItem("item", Form=XmlSchemaForm.Unqualified, IsNullable=false)]
    public _wsv_cas01Rq0012210001S[] Ic_20Ki
    {
        get
        {
            return this.ic_20KiField;
        }
        set
        {
            this.ic_20KiField = value;
        }
    } 
```

如您所见，标头已经为 SOAP 编写，因此我不能轻易更改其他客户端的名称。

使用这种方法，我一直在使用类的 XML 代码来记录 SOAP 消息。不幸的是，Naur 的名字都是错误的。

```
public static string ObjectToXml(object input)
{
    string objectAsXmlString;

    XmlSerializer xs = new XmlSerializer(input.GetType());
    XmlSerializerNamespaces test = new XmlSerializerNamespaces();
    using (StringWriter sw = new StringWriter())
    {
        try
        {
            xs.Serialize(sw, input);
            objectAsXmlString = sw.ToString();
        }
        catch (Exception ex)
        {
            objectAsXmlString = ex.ToString();
        }
    }
    return objectAsXmlString;
} 
```

阅读发送回包的客户端的代码，我已经意识到了。使用修改后的 XML 代码就可以了！只要考虑到丰富的结果。

```
XmlSerializer serializer = new XmlSerializer(typeof(_wsv_cas01d0005p0000013203));
_wsv_cas01d0005p0000013203 Requestdaten = (_wsv_cas01d0005p0000013203)serializer.Deserialize(xmlDoc); 
```

因此，现在我缺少一种转换 XML 的方法，并且存在的变量尚不清楚，因此我可以填写离开课程。我已经阅读了 XPATH 和 XSD，但我并不是我真正需要的。也许你们中的一些人曾经见过这样类似的案例，给我一个提示？

PS：我希望其中一个翻译的文本可以阅读。不幸的是，对于这种复杂的情况，我的英语实在是太复杂了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:36:21.540

我现在拥有它，不仅是解决后最美丽的方式，而且由于我使用了紧急解决方案，所以我现在意识到......我不喜欢“替换”，但我认为它比假设你有更快将永远长的 XML 数据先放入新节点，然后复制原始数据……如果有人认为做得更好，请感谢每一个提示。

```
public static string SearchToChangeXML(string input, int changetype = 0)
{
    //Replace -.- | no time, hope later more time to make better... But it works
    input = input.Replace("<_asd_cas01d0005p0000013303Response", "<_asd_cas01d0005p0000013203");
    input = input.Replace("</_asd_cas01d0005p0000013303Response>", "</_asd_cas01d0005p0000013203>");
    for (int i = 20; i <= 40; i++)
    {
        input = input.Replace("<Ec_" + i.ToString() + "Ki>", "<Ic_" + i.ToString() + "Ki>");
        input = input.Replace("</Ec_" + i.ToString() + "Ki>", "</Ic_" + i.ToString() + "Ki>");
        input = input.Replace("<Ec_" + i.ToString() + "Ki />", "<Ic_" + i.ToString() + "Ki />");
        input = input.Replace("<Ec_" + i.ToString() + "Ki/>", "<Ic_" + i.ToString() + "Ki/>");
    }

    XmlDocument xml = new XmlDocument();
    xml.LoadXml(input);
    XmlNode dp = xml.DocumentElement;
    for (int i = 0; i < dp.ChildNodes.Count; i++)
    {
        //Things i dont need (not all Variables are present in other Class)
        if (dp.ChildNodes[i].Name == "Ic_38Ki" || dp.ChildNodes[i].Name == "Ic_39Ki" || dp.ChildNodes[i].Name == "EtMessages" ||
                dp.ChildNodes[i].Name == "EvCeeRequestId" || dp.ChildNodes[i].Name == "EvStatusCode")
            dp.ChildNodes[i].RemoveAll();

    }
    using (var stringWriter = new StringWriter())
    using (var xmlTextWriter = XmlWriter.Create(stringWriter))
    {
        xml.WriteTo(xmlTextWriter);
        xmlTextWriter.Flush();
        return stringWriter.GetStringBuilder().ToString();
    }
} 
```

# sql-server - Delphi DBExpress error with turkish collation

> ID：10548471
> 
> 赞同：1
> 
> 时间：2012-05-11T09:02:52.333
> 
> 标签：sql-server, delphi, collation, dbexpress

I lately found a problem with a delphi program created with Delphi 2007 and dbExpress components. This program is used in many countries with a collation set to the local language so people have a familiar sorting etc. We never had a problem with a database collation.

But now that we want to bring the program to turkey we face a problem which is an error message saying: "Invalid object name 'SYSINDEXES'" when using a Turkish collation.

I was using the collation 'Turkish_CI_AS'.

I also found another person who had a problem with a turkish collation here: [http://www.delphigroups.info/2/56/568380.html](http://www.delphigroups.info/2/56/568380.html) (4\. post on the page)

He states that delphi uses upper case strings here instead of lowercase that would be correct. This makes sense since in turkish 'i' and 'I' are different characters even if you use a case insensitive collation.

The question is now if there is any way to fix this without messing arround too much. I mean I don't want to get bigger problems by fixing this intermediate one.

# css - Trouble getting a Stylish code to be page or domain-specific in Firefox?

> ID：10548472
> 
> 赞同：2
> 
> 时间：2012-05-11T09:03:14.737
> 
> 标签：css, firefox, google-plus, stylish

How do I make this Stylish code apply to only the domain plus.google.com in Firefox?

In Chrome, the Stylish extension allows you to specify for what domain a style should apply - but the Stylish extension for Firefox doesn't let you specify that as part of the extension.

I tried using `@-moz-document` rules as described on [this page](https://github.com/JasonBarnabe/stylish/wiki/Applying-styles-to-specific-sites), but that didn't seem to work.

Here's the code that I used - it is (despite my attempts) *not* specific to the plus.google.com domain:

```
@-moz-document  url-prefix(https://plus.google.com),
            domain(plus.google.com)
{
#contentPane > div {
text-align: center !important;
}

... ...

} 
```

Please help?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:31:26.243

**编辑：**也许你需要添加命名空间？

```
@namespace url(http://www.w3.org/1999/xhtml);  
@-moz-document domain('example.com')
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T04:33:57.550

我有同样的问题，对我来说这是括号的语法错误。如果您单击时尚编辑器中的“预览”按钮，它会告诉您是否有任何错误。HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T23:50:17.270

我在 Firefox 中使用 Stylish 将 Reddit.com 的默认拇指大小从 70 像素增加到 140 像素。

第一行告诉 Firefox 在特定网站上设置规则。

**注意：**不要忘记在第一行的末尾添加 { 并在脚本的最后添加 }。

```
@-moz-document domain("reddit.com") {
.thumbnail {
  width:auto;
  min-height:70px;
  max-height:none !important;}
.thumbnail img {
  width:140px;
  height:auto;
  border-radius: 0;}
a.thumbnail {
  width:auto;
  min-height:70px;}
a.thumbnail img{
  border-radius: 0;}
} 
```

# java - 从标签获取文件 - Perforce Java API

> ID：10548475
> 
> 赞同：0
> 
> 时间：2012-05-11T09:03:42.217
> 
> 标签：java, label, perforce

只是想知道，如何从给定标签中检索所有文件及其修订版。

我一直在查看 API 文档，但似乎找不到任何相关内容。我知道旧的 java 实现中有一个函数 .getFiles() 但现在可以使用的就是[这个](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/core/ILabel.html)

任何意见，将不胜感激 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:59:28.233

该方法`IServer.getDepotFiles`接受 Perforce 文件规范作为参数。您应该能够使用类似`//...@label`.

[http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/server/IServer.html#getDepotFiles(java.util.List](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/server/IServer.html#getDepotFiles(java.util.List) , boolean)

# mysql - MySQL查询具有多列但完全匹配？

> ID：10548476
> 
> 赞同：0
> 
> 时间：2012-05-11T09:03:44.033
> 
> 标签：mysql, jquery-ui

我有一个名为 Device_tbl 的表，其中包含以下列：

*   图片
*   制造商
*   模型

我的一些制造商的一个例子是：

*   索尼爱立信
*   宏达电
*   摩托罗拉

我的一些模型的一个例子是：

*   一个 X
*   那些
*   Xperia Arc
*   Xperia X10
*   Xoom

我遇到的问题是我将制造商和模型的组合传递到查询中。例如：

```
SELECT Image, Manufacturer, Model FROM Device_tbl WHERE Manufacturer LIKE 'Sony Ericsson Xperia Arc' OR Model LIKE 'Sony Ericsson Xperia Arc' 
```

如您所见，这不会返回任何内容。我所追求的是返回仅与上述结果完全匹配的结果，但是如果我搜索 Son，它将返回 Son 存在于制造商或型号中的所有结果。

## 可能的解决方案？

如果有任何帮助，我将使用 JQuery 自动完成功能来生成全名。这些建议是从结合了制造商和模型的数组生成的。不确定是否有办法在后台拆分它以便搜索更准确？

```
<?php
mysql_select_db($database_database_connection, $database_connection);
$query = "SELECT * FROM Device_tbl";
$result=mysql_query($query, $database_connection) or die(mysql_error());
$findrow = array();
while($row = mysql_fetch_assoc($result)){
    $manufac = $row['Manufacturer'];
    $mod = $row['Model'];
    $string = $manufac.' '.$mod;
    $findrow[] = $string;
}

?>

<script type="text/javascript">
$(document).ready(function() {

var availableTags = <?php echo json_encode($findrow);?>;

  $("#search_input").watermark("Begin Typing to Search");
  $('#searchresultdata').append(sendSelected);

    $( "#search_input" ).autocomplete({
        source: availableTags,
        select: function(event, ui) {
          sendSelected(ui.item.value);
          }
        });

function sendSelected(_val){
    var search_input = _val;
    if (search_input =='') search_input ='*';
    var dataString = 'keyword='+search_input;

    if (search_input.length > 2 || search_input=='*') {
       $.ajax({
            type: "GET",
            url: "core/functions/searchdata.php",
            data: dataString,
            success: function(server_response) {
                $('#searchresultdata').empty();
                $('#searchresultdata').append(server_response);
                $('span#category_title').html(search_input);
            }
        });
    }
}
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:09:22.390

您可以使用 CONCAT_WS() 例如

```
SELECT * FROM Device_tbl WHERE CONCAT_WS(' ', Manufacturer, Model) = 'Sony EricssonXperia Arc'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:07:36.877

你能不能这样做：

```
SELECT Image, Manufacturer, Model 
FROM Device_tbl 
WHERE Manufacturer+' '+Model LIKE 'Sony Ericsson Xperia Arc' 
```

# sleep - Message Broker 6.1 睡眠异常

> ID：10548481
> 
> 赞同：0
> 
> 时间：2012-05-11T09:04:09.807
> 
> 标签：sleep, messagebroker, ibm-integration-bus, extended-sql

我正在尝试添加一个简单的`sleep`函数来扩展基本 ESQL API。

Java实现：

```
public static void sleep(long millis) {
    try {
        Thread.sleep(millis);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

ESQL 参考：

```
CREATE PROCEDURE sleep(IN millis INT)
    LANGUAGE JAVA
    EXTERNAL NAME "com.mypackage.Util.sleep"; 
```

这是错误跟踪：

```
(0x01000000:Name     ):RecoverableException = (
        (0x03000000:NameValue):File     = '/build/S610_P/src/DataFlowEngine/ImbRdl/ImbRdlExternalJava.cpp' (CHARACTER)
        (0x03000000:NameValue):Line     = 1102 (INTEGER)
        (0x03000000:NameValue):Function = 'ESQL2JavaMethodResolver::decodeReturnStatus' (CHARACTER)
        (0x03000000:NameValue):Type     = '' (CHARACTER)
        (0x03000000:NameValue):Name     = '' (CHARACTER)
        (0x03000000:NameValue):Label    = '' (CHARACTER)
        (0x03000000:NameValue):Catalog  = 'BIPv610' (CHARACTER)
        (0x03000000:NameValue):Severity = 3 (INTEGER)
        (0x03000000:NameValue):Number   = 2946 (INTEGER)
        (0x03000000:NameValue):Text     = 'The Java method could not be found' (CHARACTER)
        (0x01000000:Name     ):Insert   = (
          (0x03000000:NameValue):Type = 5 (INTEGER)
          (0x03000000:NameValue):Text = 'com.mypackage.Util.sleep' (CHARACTER)
        )
      )
    )
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:56:35.720

解决了！备查：

问题出在需要包装器类型的方法签名检查中。
在这种情况下`Long`，而不是`long`.

```
public static void sleep(Long millis) {
    try {
        Thread.sleep(millis);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

# java - out.write() 方法中的问题；

> ID：10548483
> 
> 赞同：0
> 
> 时间：2012-05-11T09:04:14.827
> 
> 标签：java, sockets, io

我想从服务器向客户端发送消息，发现几个问题：

*   如果由`out.flush`() 发送；方法然后客户端可以读取它，但是
*   当我使用该方法时`out.write();`，客户端会收到`-1`（未接收数据）的状态

我应该添加什么，以便客户端可以使用 nmbr 2 中的方法接收消息。以下是我在客户端用于从服务器接收消息的方法：

```
 int totalBytesRcvd = 0; // Total bytes received
    int bytesRcvd; // Bytes received in last read
    byte[] byteBufferreceive = new byte[256];
    while (totalBytesRcvd < byteBufferreceive.length) {
        if ((bytesRcvd = in.read(byteBufferreceive, totalBytesRcvd, 
    byteBufferreceive.length - totalBytesRcvd)) == -1)
        {
        Toast.makeText(this, "byte lenght: "+bytesRcvd, Toast.LENGTH_SHORT).show();
        Toast.makeText(this, "communication error", Toast.LENGTH_LONG).show();
        }
        totalBytesRcvd += bytesRcvd;            
    }
    System.out.println("The length of the received data "+totalBytesRcvd);
    String receive;
    receive = new String(byteBufferreceive);
    Toast.makeText(this, receive, Toast.LENGTH_LONG).show(); 
```

**在客户端我使用这个：**

```
 DataInputStream in = new DataInputStream(clientsock.getInputStream());

    DataOutputStream out = new DataOutputStream(clientsock.getOutputStream()); 
```

**在服务器端我使用这个：**

```
 in  = new BufferedReader(
              new InputStreamReader(socket.getInputStream()));

        out = new PrintWriter(
              new OutputStreamWriter(socket.getOutputStream())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:28:19.053

试试这个：

```
out = new PrintWriter(socket.getOutpustStream(),true) 
```

然后使用 out.println() 发送一条线？

默认情况下，由于性能原因，在 write() 调用后打印流不会 flush()。

因此，如果您不想直接使用刷新，则必须使用以下“println、printf 或格式”之一以及启用自动刷新的构造函数

[http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)

# ios - 在 iPhone 的短信中发送链接

> ID：10548486
> 
> 赞同：6
> 
> 时间：2012-05-11T09:04:17.233
> 
> 标签：ios, sms

我正在开发一个应用程序，其中要求在文本消息中发送链接。我正在使用`MFMessageComposeViewController`if iPhone 并尝试了 HTML 字符串，但它不起作用。我正在使用代码：

```
-(IBAction)sendToSMS:(id)sender
{
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];

    //  NSArray *arr=[[NSArray alloc] initWithObjects:phoneNumber,nil];
    //  [controller setRecipients:[arr objectAtIndex:0]];

    NSLog(@"received:- %@",controller.recipients);
    controller.messageComposeDelegate = self;
    controller.body =@"<html><body><font color=#FFFFFF>Hello,<br><a href=\"http://www.yahoo.com\">click</a>---here to go to Yahoo!</font></body></html>";

    if([MFMessageComposeViewController canSendText])
    {   
        [self presentModalViewController:controller animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-11T09:07:17.323

SMS 不支持 HTML 或 URL，仅支持纯文本。

您所能做的就是将 URL 添加到消息中，然后由消息应用程序来识别 URL 并允许用户单击它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T09:09:55.327

只需执行以下操作：

`controller.body =@"Hello, here is a link to Yahoo!\nhttp://www.yahoo.com";`

如果接收电话支持 URL（现在大多数），它会自动使其可操作（可触摸、可点击、可选择或其他）

# c# - 级联删除所有虚拟集合

> ID：10548490
> 
> 赞同：2
> 
> 时间：2012-05-11T09:04:27.500
> 
> 标签：c#, entity-framework

我正在使用 MVC3 构建一个 Web 应用程序。在这个应用程序中，我有一个实体，它有 x 个虚拟集合，它们本身可以容纳 y 个虚拟集合。

有没有一种方法可以“模拟”级联删除，这样当我删除顶级实体时，它首先尝试递归地删除子集合实体。

我知道我可以使用数据库级联选项（和几个触发器）来做到这一点，但我真的很想知道这在 C# 中是否可行。

编辑：顶级实体：

```
public class Tournament {
    public int TournamentID { get; set; }
    // other properties
    public virtual ICollection<Official> Officials { get; set; }
} 
```

孩子：

```
public class Official {
    public int OfficialID { get; set; }
    // other properties
    public virtual ICollection<Matches> Matches { get; set; }
} 
```

所以当我删除一个`Tournament`实体时，它也应该删除`Officials`并且`Officials`它应该删除`Matches`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:24:57.800

只要确保从孩子到父母的关联不允许空值。

然后删除父级。

# php - Usage of jquery's sortable serialize result to php

> ID：10548498
> 
> 赞同：0
> 
> 时间：2012-05-11T09:05:08.157
> 
> 标签：php, jquery, serialization

I'm using the following code to experiment with nested sortable menus of jquery. Everything works just fine but I do have a question though: How do I use the result of the serialization process in order to save the menu items in the database?

What I get when I move the items is something like `[pages] => item[]=1&item[]=7` and that way I don't know which item moved into another one or which became a parent etc...

I guess I need a more detailed array that states the full list of the menu items sort.

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script type='text/javascript' src='./jquery-ui-1.8.20.custom.min.js'></script>
    <title>my title</title>
    <style type='text/css'>
    ul { min-height:10px; }
    li { width: 150px; }
    </style>

    <script type='text/javascript'>
    $(window).load(function(){
           $("ul").sortable({
            connectWith: "ul",

            update: function(event, ui) {
            $.ajax({
              url: './ajax.php',
              type: 'POST',
              data: { pages: $('ul').sortable('serialize')},
              success: function(data) {
                  alert(data);
              }
            });
            }
        });
    });
    </script>
</head>
<body>
    <ul>
<li id="item_1" >Item 1</li>
<ul>
<li id="item_2" >Item 1 1<ul></ul></li>
<li id="item_3" >Item 1 2<ul></ul></li>
<li id="item_4" >Item 1 3<ul></ul></li>
</ul>
<li id="item_5" >Item 2<ul></ul></li>
<li id="item_6" >Item 3<ul></ul></li>
<li id="item_7" >Item 4<ul></ul></li>
</ul>
</body>
</html> 
```

Thank you for your time and thanks!

The `./jquery-ui-1.8.20.custom.min.js` file contains jquery itself and `jquery-ui` (jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.sortable.js).

`./ajax.php` should be responsible to handle the serialized result.

# mysql - mysql dynamic query inside stored procedure

> ID：10548500
> 
> 赞同：0
> 
> 时间：2012-05-11T09:05:12.430
> 
> 标签：mysql

I wrote the following dynamic query in my stored procedure,

```
FETCH cur1 INTO a1, ldt1, b1;
    WHILE DONE = 0 DO

        SET @s=CONCAT('UPDATE ',fname , ' SET connectedDateTime = ldt1,opid = b1 
        WHERE hq_conferee_seqno=a1 AND (LoggedDateTime <=ldt1 AND connectedDateTime IS NULL)');
        FETCH cur1 INTO a1, ldt1, b1;
        PREPARE stmt FROM @s;
        EXECUTE stmt;
    END WHILE; 
    CLOSE cur1; 
```

When I compile the stored I am not getting any error. But When I run this code I got an error like You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NULL' at line 1

What will be the problem. Please help me. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:35:00.247

如[手册](http://dev.mysql.com/doc/en/local-variable-scope.html)所述：

> 局部变量仅在存储程序执行期间才在作用域内。在准备好的语句中不允许引用它们，因为它们对于当前会话是全局的，并且在执行语句时变量可能已经超出范围。

相反，您应该将光标获取到*用户*变量中，并从准备好的语句中引用那些（它们在连接期间保持在范围内），或者（更好）将它们作为参数传递给准备好的语句：

```
SET @s=CONCAT('UPDATE ',fname , ' SET connectedDateTime = ?,opid = ? 
WHERE hq_conferee_seqno=? AND (LoggedDateTime <=? AND connectedDateTime IS NULL)');
FETCH cur1 INTO @a1, @ldt1, @b1;
PREPARE stmt FROM @s;
EXECUTE stmt USING @ldt1, @b1, @a1, @ldt1; 
```

# android - 如何从sqlite数据库中获取数据并在android的listview中显示

> ID：10548501
> 
> 赞同：1
> 
> 时间：2012-05-11T09:05:13.997
> 
> 标签：android, sqlite, android-listview

登录页面后，我想显示 A for Apple，B for Boy .... 等到 F..in listview。但是在我的应用程序中，我完全登录成功，只有登录表完全创建成功，但没有创建 mainmenu。我想在测试数据库中创建 mainmenu 表，然后我想从 mainmenu 表中获取数据到 android 中的 listview

```
 i try this code
      if(username.length()>0&&password.length()>0)
        {
            SQLiteAdapter db=new SQLiteAdapter(Main.this);
            db.openToWrite();
            if(db.Login(username,password))
            {
                System.out.println("goutham");
                Intent intent=new Intent(getApplicationContext(),ExampleActivity.class);

                startActivity(intent);
            } 
```

SQLiteAdapter.java

```
 public class SQLiteAdapter {

public static final String MYDATABASE_NAME = "test";
public static final String KEY_USERNAME = "username";
public static final String KEY_PASSWORD = "password";
public static final String MYDATABASE_TABLE = "mainmenu";
private static final String DATABASE_TABLE = "login";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_ID = "_id";
public static final String KEY_CONTENT = "Content";

// create table MY_DATABASE (ID integer primary key, Content text not null);
private static final String SCRIPT_CREATE_DATABASE = "create table "
        + MYDATABASE_TABLE + " (" + KEY_ID
        + " integer primary key autoincrement, " + KEY_CONTENT
        + " text not null);";
private static final String DATABASE_CREATE = "create table login (_id integer primary key autoincrement, "
        + "username text not null, " + "password text not null);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c) {
    context = c;
}

public SQLiteAdapter openToRead() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
            MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    return this;
}

public SQLiteAdapter openToWrite() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null,
            MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
    return this;
}

public void close() {
    sqLiteHelper.close();
}

public long insert(String content) {

    ContentValues contentValues = new ContentValues();
    contentValues.put(KEY_CONTENT, content);
    return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
}

public int deleteAll() {
    return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);

}

public Cursor queueAll() {
    String[] columns = new String[] { KEY_ID, KEY_CONTENT };
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, null,
            null, null, null, null);

    return cursor;
}

private static class SQLiteHelper extends SQLiteOpenHelper {

    public SQLiteHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(SCRIPT_CREATE_DATABASE);
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

}

public long AddUser(String username, String password) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_USERNAME, username);
    initialValues.put(KEY_PASSWORD, password);
    return sqLiteDatabase.insert(DATABASE_TABLE, null, initialValues);

}

public boolean Login(String username, String password) {
    // TODO Auto-generated method stub
    Cursor mCursor = sqLiteDatabase.rawQuery("SELECT * FROM "
            + DATABASE_TABLE + " WHERE username=? AND password=?",
            new String[] { username, password });
    if (mCursor != null) {
        if (mCursor.getCount() > 0) {
            return true;
        }
    }
    return false;
}

 } 
```

ExampleActivity.java

```
 public class ExampleActivity extends Activity {
private SQLiteAdapter mySQLiteAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ListView listContent = (ListView) findViewById(R.id.contentlist);

    /*
     * Create/Open a SQLite database and fill with dummy content and close
     * it
     */
    mySQLiteAdapter = new SQLiteAdapter(this);
    mySQLiteAdapter.openToWrite();
    // mySQLiteAdapter.deleteAll();

    mySQLiteAdapter.insert("A for Apply");
    mySQLiteAdapter.insert("B for Boy");
    mySQLiteAdapter.insert("C for Cat");
    mySQLiteAdapter.insert("D for Dog");
    mySQLiteAdapter.insert("E for Egg");
    mySQLiteAdapter.insert("F for Fish");

    mySQLiteAdapter.close();

    /*
     * Open the same SQLite database and read all it's content.
     */
    mySQLiteAdapter = new SQLiteAdapter(this);
    mySQLiteAdapter.openToRead();

    Cursor cursor = mySQLiteAdapter.queueAll();
    startManagingCursor(cursor);

    String[] from = new String[] { SQLiteAdapter.KEY_CONTENT };
    int[] to = new int[] { R.id.text };

    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this,
            R.layout.row, cursor, from, to);

    listContent.setAdapter(cursorAdapter);

    mySQLiteAdapter.close();

} 
```

}

运行程序后登录表仅在数据库中创建，但主菜单表未在数据库中创建。运行程序后显示错误，如 sqlite 返回代码 = 1 在 MY_TABLE 中没有这样的表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:39:44.920

这是我用来获取所有值的代码。

/ ****这是数据库类**** /

```
public String getData1() throws SQLException{
        // TODO Auto-generated method stub
        String[] columns1 = new String[] { KEY_DATE };
        Cursor c1 = ourDatabase.query(DATABASE_MARKSTABLE, columns1, null, null, null,
                null, KEY_ENDINGTIME+" DESC", " 30");
        String result1 = "";

        int isName = c1.getColumnIndex(KEY_DATE);

        for (c1.moveToFirst(); !c1.isAfterLast(); c1.moveToNext()) {

            result1 = result1 + c1.getString(isName)
                    + "  " + "\n";

        }
        c1.close();
        return result1;

    } 
```

为了在列表视图中显示它，请检查此链接

[http://www.technotalkative.com/android-%E2%80%93-listview-%E2%80%93-2-custom-listview/](http://www.technotalkative.com/android-%E2%80%93-listview-%E2%80%93-2-custom-listview/)

# java - 服务器遵循 GMT 时间而不是本地时间

> ID：10548502
> 
> 赞同：0
> 
> 时间：2012-05-11T09:05:16.443
> 
> 标签：java, date, calendar, timezone

我有一个在美国的服务器上运行的 Java 应用程序。我的应用程序有一个方法可以找到本地时间和从数据库中获取的另一个时间戳值之间的差异，我需要检查这个差异是否大于 86400 秒（1 天）。我的问题是，**服务器遵循 GMT**，**我无法以毫秒为单位找到本地时间**。我试图找到美国时间和格林威治标准时间之间的偏移量，然后在以下代码的帮助下从 System.currentTimeMillis() 中减去以找到美国的当地时间

```
int Offset_inmillis = Calendar.getInstance().getTimeZone().getRawOffset();
int DSTSavings_inmillis = Calendar.getInstance().getTimeZone().getDSTSavings();
long localtime_inmillis = System.currentTimeMillis() + DSTSavings_inmillis + Offset_inmillis; 
```

但是由于服务器考虑了 GMT，所以上面的代码再次以毫秒为单位给出了 GMT 时间值（上面代码中的 Offset_inmillis、DSTSavings_inmillis 值都是 0）。我可以通过减去偏移量（硬编码代码中的偏移量值）来提供解决方法，但我不想这样做，因为它不考虑夏令时，并且如果代码在不同的服务器上悬挂，则代码不起作用不同的时区。

我需要代码适用于所有时区的解决方案。为此，我需要找到服务器的本地时间（以毫秒为单位）的解决方案（但在这种情况下，服务器遵循 GMT 时间）。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:55:37.003

查找本地时间与从数据库中获取的另一个时间戳值之间的差异

```
// Change 'America/New_York' depending on the local timezone of your server
TimeZone tz = TimeZone.getTimeZone("America/New_York"); 
// Gives the offset of your server timezone from the GMT
long tzoffset = tz.getOffset(Calendar.getInstance().getTimeInMillis()); 
```

顺便说一句，理想情况下，数据库时间戳也应该是 GMT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:15:47.693

您可以使用 java.util.TimeZone 类来实现这一点。这里有一个小例子：

```
http://www.roseindia.net/java/example/java/util/TimeZones.shtml 
```

希望这会帮助你。

# jquery - 如何使用 jQuery 安装的更新面板？

> ID：10548503
> 
> 赞同：0
> 
> 时间：2012-05-11T09:05:19.977
> 
> 标签：jquery, asp.net

如何在 Asp.net 中使用 jQuery ajax 而不是更新面板？我听说它比普通更新面板更轻。另外，它需要脚本管理器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:20:33.327

是的，如果您使用 jQuery 而不是 UpdatePanel，网络开销会更少。但是您需要编写大量 js 代码来处理使用 jquery函数返回的数据`GET`和请求。另一方面，asp.net ajax 将自动处理 DOM 更新等`POST``$.ajax()`

查看本教程
[JQuery：今天构建明天的 Web 应用程序](http://www.ibm.com/developerworks/web/library/wa-jquery3/)

# c# - LINQ 选择实体并将其转换为 ViewModel

> ID：10548505
> 
> 赞同：4
> 
> 时间：2012-05-11T09:05:22.193
> 
> 标签：c#, linq, c#-4.0

我对 Linq 并不陌生，但出于任何原因我无法解决这个问题。

可以说我有以下型号。显然，这是示例模型。

```
public class Parent
{
    public int Id { get; set; }
    public List<Child> Children { get; set; }
    public DateTime CreateDate { get; set; }
}

public class Child
{
    public int Id { get; set; }
    public List<Toys> Toys { get; set; }
    public DateTime CreateDate { get; set; }
}

public class Toys
{
    public string Id { get; set; }
    public string Name { get; set; }
    public DateTime CreateDate { get; set; }
} 
```

我想要的是将它们转换为 ViewModels。这里我的 ViewModel 是如何定义的

```
public class ParentViewModel
{
    public int Id { get; set; }
    public List<ChildViewModel> Children { get; set; }
}

public class ChildViewModel
{
    public int Id { get; set; }
    public List<ToysViewModel> Toys { get; set; }
}

public class ToysViewModel
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

### 我的问题

如何选择我的模型并将其转换为 viewModels。这是我已经尝试过的。

```
var q = from p in dbContext.Parents
        where p.Id = 123
        select new ParentViewModel
        {
           Id = p.Id,
           Children = ???
        }; 
```

如何获得儿童及其玩具清单？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T09:07:46.317

如果关系在数据库中正确建模，则

```
select new ParentViewModel
{
   Id = p.Id,
   Children = p.Children.Select(c => new ChildViewModel {
       Id = c.Id,
       Toys = c.Toys.Select(t => new ToyViewModel { ... }).ToList()
   }).ToList()
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T09:11:20.847

为清楚起见，我更愿意将其分解为如下函数：

```
public static ParentViewModel AsViewModel(Parent parent)
{
    var childViewModels = parent.Children.Select(AsViewModel).ToList();
    return new ParentViewModel { Id = parent.Id, Children = childViewModels };
}

public static ChildViewModel AsViewModel(Child child)
{
    var toyViewModels = child.Toys.Select(AsViewModel).ToList();
    return new ChildViewModel { Id = child.Id, Toys = toyViewModels };
}

public static ToyViewModel AsViewModel(Toy toy)
{
    return new ToyViewModel { Id = toy.Id, Name = toy.Name };
} 
```

然后它可以像这样使用：

```
var q = dbContext.Parents.Where(p => p.Id == 123).Select(AsViewModel); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:20:21.020

考虑使用一些自动映射工具，例如[Automamper](http://automapper.org/)。

定义某处映射：

```
Mapper.CreateMap<Parent, ParentViewModel>();
Mapper.CreateMap<Child, ChildViewModel>();
Mapper.CreateMap<Toys, ToysViewModel>(); 
```

还有你的代码

```
 Parent parent = GetParentById(123); // use LINQ to get parent
 ParentViewModel pvm = Mapper.Map<ParentViewModel>(parent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:09:33.317

我会使用**[AutoMapper](http://automapper.codeplex.com/)**将我的实体转换为模型。它很好地支持集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:10:18.363

你是这个意思吗？

```
var q = from p in dbContext.Parents
    where p.Id = 123
    select new ParentViewModel
    {
       Id = p.Id,
       Children = p.Children.Select(c => new ChildViewModel
       {
           Id = c.Id,
           Toys = c.Toys.Select(t => new ToysViewModel
           {
               Id = t.Id
           }).ToList()
       }).ToList()
    }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T09:17:56.323

保持自己的写作风格：

```
var q = from p in dbContext.Parents
    where p.Id == 123
    select new ParentViewModel
    {
        Id = p.Id,
        Children = (from c in p.Children
                    select new ChildViewModel()
                    {
                        Id = c.Id,
                        Toys = (from t in c.Toys
                                select new ToyViewModel() 
                                {
                                    Id = t.Id,
                                    Name = t.Name
                                }).ToList()
                    }).ToList()
    }; 
```

我会打电话`Toy`而不是`Toys`和`ToyViewModel`而不是`ToysViewModel`

# python - When I user Django to create a user account, can the account be created in Kerberos automatically?

> ID：10548507
> 
> 赞同：0
> 
> 时间：2012-05-11T09:05:26.453
> 
> 标签：python, django, kerberos, django-authentication

I'm using the Django framework to make a website. When I create a user in Django, how do I get that user to be created in Kerberos?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:55:15.240

[使用](https://docs.djangoproject.com/en/dev/topics/signals/) [Django](https://docs.djangoproject.com/en/dev/ref/signals/) [信号](https://code.djangoproject.com/wiki/Signals)。

您要寻找的是[`post_save()`信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)，只需将用户模型作为发送者发送给它；）

有关用户注册的一些示例，请参见[django-registration ，](http://www.bitbucket.org/ubernostrum/django-registration/wiki/Home)

# java - 如何为我的 Java 软件创建许可证？

> ID：10548510
> 
> 赞同：25
> 
> 时间：2012-05-11T09:05:36.987
> 
> 标签：java, security, licensing, registry

我有一个很大的问题。那就是“如何为我的软件创建许可证”。

好的，认为这是我的许可证密钥 - 12345YW

当用户输入此许可证密钥时，该软件应允许他使用该软件。好吧，一旦用户输入许可密钥，我的软件必须记住他输入了有效密钥，对吗？（因为从下一次开始，它不必提示许可对话框）我的问题是，我怎样才能使我的软件要记住用户已输入的许可证吗？在基于 Windows 的应用程序中，他们大多数人所做的就是在 Windows 注册表中输入一个条目。我可以这样做吗？（那么 Ubuntu 和 Mac 呢？）

我想写一个 .txt 文件，以便 m 软件可以读取它并查找是否输入了许可证。然而，这是我能想到的最不安全的系统。

那么，如果我输入了上面的许可证密钥，我怎样才能让我的软件记住它呢？如果您也可以给我一个代码示例，我真的很高兴（即：我不知道如何编辑注册表，以防 Windows 注册表等）。请帮我...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-11T09:33:01.383

许可软件尚未解决 - 或者至少，安全地这样做，不会给您的用户带来不便，并且没有投资于主要的基础设施并没有得到解决。

您存储许可证状态的位置/机制大多无关紧要 - 注册表并不比文本文件更安全 - 访问内容需要几秒钟，并且在注册表的某些远程死水中“隐藏”条目不会帮助不大。

据推测，您的软件有某种持久性（数据库？文件系统？）；您可以使用相同的持久性机制来存储注册状态。

当然，您的软件可以读/写的任何内容都可以被试图未经授权访问您的软件的人访问。因此，您可以加密记录；那么你有管理该加密机制的密钥的问题；afaik，目前没有强大的解决方案。

那么，您可能在互联网上有一个“许可证服务器”；您的软件可能会读取您机器的唯一标识符[（例如 MAC 地址](https://stackoverflow.com/questions/1333344/how-do-i-get-the-hosts-mac-address-using-java-5)），将其发送到您的许可证服务器，并让服务器返回许可证状态。同样，这很容易绕过，现在您要求您的用户在线使用您的软件。

如果您的软件对用户具有远程吸引力，黑客将在几天内破坏许可证密钥保护，并在互联网上发布详细说明。Apple 竭尽全力保护 Iphone/Ipad 上的软件，但越狱应用程序却将它们解锁。

在我看来，除非您的软件价值数千万美元，否则您应该让用户的生活尽可能轻松，并且不要太担心安全方面 - 使用现成的东西（如 @bunting 推荐的） ，或满足于文本文件。

具体来说，我会：

*   在应用程序启动时检查是否存在有效的许可证文件
*   如果许可证文件不存在，要求用户输入许可证密钥
*   将该密钥与您的许可证密钥进行比较
*   将“有效”文件写入应用程序目录中的文件系统；或者，修改现有的配置文件。

这很容易破解；所以你可以更进一步。

首先，Java 应用程序很容易反编译，攻击者可以轻松读取您的“许可证”常量。您应该使用混淆器来使这变得困难（尽管并非不可能）。

其次，您可以加密本地许可证数据；这也会使完全随意的黑客变得更加困难。您可以在加密方案中包含一些本地数据，这样黑客就不能只使用有效的许可证密钥重新分发您的应用程序（例如，通过将许可证密钥乘以机器的 MAC 地址）。

在这两种情况下，您都将许可证“硬连线”到应用程序中；有黑客在公告板上发布应用程序的许可证密钥，您只能通过使用新密钥发布新版本的应用程序来做出回应。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-13T19:12:18.783

我很惊讶有一种可能性被忽略了。保护数据免受不可信客户侵害的最简单方法是永远不要让客户拥有它。几种应用程序架构允许这样做：Web 应用程序、桌面客户端 RPC'ing 到远程服务器，或高性能瘦客户端连接到远程服务器上的虚拟化桌面。由于在安装、数据备份和维护方面的优势，Web 应用程序已经很受欢迎。

因此，与其试图通过制作对邪恶客户执行公司安全策略的软件来获得荣誉 Comp Sci 博士...

（极不可能）

...您只需将知识产权放在受信任的服务器上，客户端就只有用户界面（和非机密逻辑）。这个策略有它自己的陷阱。不过，它的跟踪记录比客户端复制保护要好得多。

注意：额外的好处是，您可以通过为客户“管理”软件而获得稳定的收入流。

# android - Set File Permissions on aosp

> ID：10548513
> 
> 赞同：2
> 
> 时间：2012-05-11T09:05:51.947
> 
> 标签：android, android-source

I need to set new permissions on some files in aosp. I am using FileUtils.setPermissions(). But when I make a check using FileUtils.getPermissions I get the same permissions always as "33188" and I want it to be 0777.

How can I do it. BTW I am doin this operation in PacakageManagerService.java.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:35:45.210

您应该首先构建应该传递给的所需值`FileUtils.setPermission`。例如，在您的情况下，代码可能如下：

```
int perm = FileUtils.S_IRWXU|FileUtils.S_IRWXG|FileUtils.S_IRWXO;
FileUtils.setPermissions(fileName, perm, ...); 
```

# java - Coldfusion 和 Java 如何验证 punycode IDN

> ID：10548523
> 
> 赞同：2
> 
> 时间：2012-05-11T09:06:40.640
> 
> 标签：java, regex, validation, coldfusion, idn

最近我重建了一些表格，以便他们接受国际域名，如

> http://例子.测试

然后我会将这些存储为 punycode。在此之前，虽然我们运行了验证代码以使用 Coldfusions 方法检查域是否有效`isValid()`：

```
if(not isValid("url", sURL)){
return false;
} 
```

`isValid()`使用 punycode，当域如下时，我们会遇到函数失败的问题：

> http://例子。测</p>

或者当它使用 punycode 转换为它时`CreateObject( "java", "java.net.IDN" ).toASCII(sURL);`，在某些情况下会出现如下：

> xn--http://133ab--xn328sdf

（虚构的例子，但在某些情况下，http:// 部分之前会有字符）

目前有没有一种方法可以使用 Java 库或 Coldfusion 库或正则表达式来验证 IDN 和“正常”域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:32:57.577

IDN 只是域名的表示，您似乎在要转换的字符串中包含协议 (http://)。

首先使用简单的 replace() 或使用 java.net.URL 删除协议，然后如果需要重新组合协议和 idn。

```
<cfscript>
oUrl = createobject("java", "java.net.URL").init("httP://例子.测试");
protocol = oUrl.getProtocol();
domain = oUrl.getHost();
idn = createobject("java", "java.net.IDN").toAscii(domain);
writeDump(protocol);  // -> http
writeDump(domain);    // -> 例子.测试
writeDump(idn);       // -> xn--fsqu00a.xn--0zwm56d
</cfscript> 
```

一旦你有了 punycode，你应该就可以使用 isValid() 了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:38:10.493

也许这里的答案可能会有所帮助[如何使用域名中的变音符号向收件人发送电子邮件？](https://stackoverflow.com/questions/6356460/how-to-send-email-to-recipient-with-umlauts-in-domain-name)

他们建议使用

```
<cfset jUrl = CreateObject( "java", "java.net.IDN" ).toUnicode(sUrl) /> 
```

或[LibIdn](http://www.gnu.org/software/libidn/) Java 库

# asmx - Sencha Touch - 调用 web 服务的安全问题

> ID：10548524
> 
> 赞同：1
> 
> 时间：2012-05-11T09:06:43.913
> 
> 标签：asmx, sencha-touch-2

在我的 Sencha touch 应用程序中。我使用 .net 网络服务来获取 xml 格式的数据。我使用 Ext.Ajaxrequest 调用它，如下所示

```
var frmurl ='http://Server/sencha/WS/web.asmx/GetData';
Ext.Ajax.request({
     url: frmurl,
     method: 'post',
     params: {
                       whereCondition :WhereCond,
                       ReportName:rptname
         },                                 
    success: function(Response) {
                 renderReport(Response.responseText,'1');
    }
    , failure: function (Response, request)
    {
       Ext.MessageBox.alert('Error, unable to load data');
    } //</failure> 
```

});

它工作正常并给我正确的结果，但我需要在 web.config 中添加以下标签以使其正常工作

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

但正因为如此，任何人都可以调用 webmethods，这是主要的安全问题。如果我删除此标签，则无法调用 web 服务并给出内部服务器错误。

请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:49:25.510

您会发现，您需要启用至少一个“协议”才能使客户端系统与您的 Web 服务通信，因此`HttpSoap`如果您的客户端设备支持 SOAP，您可以启用，或者`HttpPostLocalhost`如果您的客户端和服务器始终开启，则可以启用同一台机器（您的机器不会像您明确构建移动网站那样）。

但是，您还发现，Web 服务在发布时可以被任何人访问，除非您设置某种身份验证，或通过其他方式限制对 Web 服务的访问，例如通过 IP 限制地址等

您可能还不知道，但[这个问题/答案](https://stackoverflow.com/a/2576756/159341)与您的相似，应该可以帮助您找到一种相当标准的方式来实现您所追求的目标。

# mysql - 只知道方向更新mysql数字字段

> ID：10548525
> 
> 赞同：1
> 
> 时间：2012-05-11T09:06:44.870
> 
> 标签：mysql

我有这样的mysql表：`id, [.....], priority`

优先级字段用于根据需要对表进行排序。它基于人类的智慧。我有一些价值观：

```
id, priority
1, 1
2, 7
3, 2
4, 4
5, 6
6, 5
7, 3 
```

第二个（最大）问题：例如，我想根据优先级**向上**或**向下移动第 4 个元素。**

第 4 个元素向上（左）和向下（右）移动

```
 1, 1         1,1
    2, 7         2,7
    3, 2         3,2
    4, 3         4,5
    5, 6         5,6
    6, 5         6,4
    7, 4         7,3 
```

我想用单个 mysql 查询来做，因为它是通过 ajax 调用的，我不希望在服务器端执行很多查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:33:29.353

不改变优先级只是交换优先级吗？这里有一个很好的解决方案：[Swap values in 2 rows SQL](http://www.microshell.com/database/sql/swap-values-in-2-rows-sql/)。这将交换记录 1 和 4 的优先级

```
UPDATE yourtable AS t1
JOIN yourtable AS t2 ON 
       (t1.id = 1 AND t2.id = 4)
    OR (t1.id = 4 AND t2.id = 1)
SET
    t1.priority = t2.priority,
    t2.priority = t1.priority 
```

实际上，如果您的优先级是唯一的，您可以不使用 id 进行交换，而只需使用优先级。这将交换优先级 4 和 5：

```
UPDATE yourtable AS t1
JOIN yourtable AS t2 ON 
       (t1.priority = 4 AND t2.priority = 5)
    OR (t1.priority = 5 AND t2.priority = 4)
SET
    t1.priority = t2.priority,
    t2.priority = t1.priority 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:38:02.213

如果您需要将 4 向下移动：

```
UPDATE your_table AS t1 JOIN your_table AS t2 ON (t1.id = 4 AND t2.priority = t1.priority + 1) SET t1.priority = t2.priority, t2.priority = t1.priority 
```

或者，如果您需要将 2 向上移动：

```
UPDATE your_table AS t1 JOIN your_table AS t2 ON (t1.id = 2 AND t2.priority = t1.priority - 1) SET t1.priority = t2.priority, t2.priority = t1.priority 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T09:29:11.673

```
$int_prio = (1 - ((int)($_POST['move_up'] == 'TRUE') * 2));
$int_id = (int)$_POST['id'];

mysql_query("
INSERT INTO table_name (id, priority)
SELECT h2.id, 
    (h2.priority + ({$int_prio} * (1 - (2 * (h.id != h2.id))))) AS priority
FROM (  SELECT id, priority
        FROM table_name
        WHERE id = {$int_id}
        HAVING priority BETWEEN 2 AND ( SELECT MAX(priority)
                                        FROM priority
                                        GROUP BY '1') - 1) AS h
INNER JOIN priority AS h2
ON h.priority IN (h2.priority, h2.priority + {$int_prio})
ON DUPLICATE KEY UPDATE priority = VALUES(priority)
"); 
```

基本上更改 $_POST （最好更安全）和`table_name`.

我添加了验证，因此它也不会尝试更改最高和最低优先级。

抱歉，如果您发现上述查询令人困惑，但这是一种通过添加验证在单个查询中更新所有内容的方法。

# android - 在 Android 中验证和读取 Word 文件

> ID：10548530
> 
> 赞同：10
> 
> 时间：2012-05-11T09:07:19.550
> 
> 标签：android, ms-word

我希望能够访问用户手机sdcard中的一个word文件，该文件将由用户选择。我希望能够处理该文件，即读取其内容并根据用户的意愿对其进行修改，并在用户单击“保存”时将其保存。</p>

在安卓中可以吗？如何让程序知道该文件是 Word 文件？

请注意，我不想查看 Word 文件。用户将选择 Word 文件，我的应用程序应该能够对其进行一些更改并保存它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:25:43.037

恕我直言，最简单的方法是将[Apache POI](http://poi.apache.org/)库移植到 Android。这是可能的，并且有[证据](https://stackoverflow.com/questions/8493507/trying-to-port-apache-poi-to-android)证明

移植 POI 您可以将 Word 编辑功能嵌入到您的应用程序中。

一段代码如：

```
Intent intent = new Intent(Intent.ACTION_EDIT); 
Uri uri = Uri.parse("file:///"+file.getAbsolutePath()); 
intent.setDataAndType(uri, "plain/text"); 
startActivity(intent); 
```

仅仅意味着 Word 文件将由其他一些应用程序编辑 - 而不是您的。据我了解，这并不完全是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:16:21.577

所以，正如我在上面写的。检查它是否是单词文件（.doc）的最简单方法是获取它的绝对路径并使用`path.endsWith(".doc");`

Android 没有默认查看 .doc 文件的应用，但如果用户安装了这样的应用（即 Polaris Office），您可以通过以下方式查看：

```
//Uri uri = Uri.parse("file://"+file.getAbsolutePath());
Intent intent = new Intent();
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setAction(Intent.ACTION_VIEW);
String type = "application/msword";
intent.setDataAndType(Uri.fromFile(file), type);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T12:35:24.587

我不确定，但我理解的是，您想要的是能够确定文件是 word 文档，而无需简单地查看扩展名。

我认为word文档有文件签名（见这个[链接](http://www.forensicswiki.org/wiki/Word_Document_%28DOC%29)）

在这种情况下，文件签名是 OLE 复合文件格式，在标题位置具有以下二进制文件

d0 cf 11 e0 a1 b1 1a e1

所以检查相应的字节应该说它是否是一个word文档。请注意，我不确定二进制文件是否特定于 word、doc 或 docx，或者是否适用于所有 microsoft office：powerpoint、excel、word。

您或许应该在网上搜索“microsoft word 文档文件签名”。这肯定会为您提供您正在寻找的信息。

现在，如何“编辑”它是另一个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T13:55:33.160

**读取和写入 Word 文档**

[将Apache POI](http://poi.apache.org/)移植到 Android 很可能是具有工时限制的项目的唯一现实解决方案。它已由其他人完成，并且在网络上有一些可用的信息如何做到这一点。以下博客有一个 Excel 示例，您可以将其作为 Word 解决方案的起点：

[Android 使用 Apache POI 读写 excel 文件](http://www.mysamplecode.com/2011/10/android-read-write-excel-file-using.html)

**验证**

虽然 Apache POI 很可能是您的最佳选择，但它打开的某些文档将无法在 MS Word 中打开，因此不是有效的 MS Word 文档。

Word 格式的结构相当复杂。它不仅仅是带有标签的文本流。它是一种专有格式，如果不访问格式结构，就不可能完全准确地验证 Word 文件。

最后，对 Word 文档的唯一 100% 准确验证是它是否在 MS Word 中打开。[与 Microsoft Word MVP Jay Freedman的](http://www.pcreview.co.uk/forums/can-validate-word-document-find-out-if-corrupt-t2408670.html)讨论提供了有关验证问题的一些观点以及对 Word 格式结构的一些见解。

Net，如果您使用 Apache POI，您将有一些误报，这取决于您客户的要求是否可以接受。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T10:07:46.580

您的问题需要进一步澄清

无论如何，这是你应该做的编辑文件

1.  **读取文件**

    ```
    File sdcard = Environment.getExternalStorageDirectory();
    File file = new File(sdcard,"theFILE");
    StringBuilder content = new StringBuilder();
    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;
        while ((line = br.readLine()) != null) {
            content.append(line);
            content.append('\n');
        }
    }
    catch (IOException e) {
    } 
    ```

2.  **编辑内容**

    ```
    content.append("bla bla");
    content.append("kaza maza"); 
    ```

3.  **保存文件**

    ```
    FileOutputStream f = new FileOutputStream(file);
    f.write(content.toString().toCharArray()); 
    ```

* * *

请记住将写入 sdcard 的权限添加到您的清单中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

**验证**

不幸的是，这是最难的部分。[Apache POI](http://poi.apache.org/)是一种选择；但是，它是一个大型库，不能保证正确的行为。

完美的解决方案是检查[MS-DOC 格式](http://download.microsoft.com/download/2/4/8/24862317-78F0-4C4B-B355-C7B2C1D997DB/%5BMS-DOC%5D.pdf)。这是一个非常大的要求。对于这样一个有限的应用程序，我想如果您搜索网络，您将找不到任何东西。因此，您必须实现一个遵守这种格式的阅读器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T09:54:28.923

如果您想直接编辑数据，只需对可用的文本编辑器进行操作即可。

```
Intent intent = new Intent(Intent.ACTION_EDIT); 
Uri uri = Uri.parse("file:///"+file.getAbsolutePath()); 
intent.setDataAndType(uri, "plain/text"); 
startActivity(intent); 
```

# java - 用 Castor 编组循环实体

> ID：10548534
> 
> 赞同：1
> 
> 时间：2012-05-11T09:07:32.440
> 
> 标签：java, orm, castor

我想使用静态 Marshall 方法用 Castor 编组以下实体。然而，由于实体对自身有引用，所以它开始循环，如果不崩溃，它会从 44 个 DB 行构建我 100MB 的文件。属性上的@XmlTransient 没有帮助。ORM 是 eclipseLink、EJB 3 (ADF 11.1.2.1.0)

```
@Entity
@NamedQueries( { @NamedQuery(name = "MenuItems.findAll", query = "select o from MenuItems o") })
@Table(name = "MENU_ITEMS")
public class MenuItems implements Serializable {
   @Column(nullable = false, length = 4000)
   private String definition;
   @Column(nullable = false)
   private String description;
   @Column(name = "DISPLAY_SEQ")
   private BigDecimal displaySeq;
   @Column(length = 64)
   private String key;
   @Id
   @Column(name = "MIT_ID", nullable = false)
   private BigDecimal mitId;
   @Column(name = "MULTI_INSTANCEABLE", nullable = false, length = 1)
   private String multiInstanceable;
   @Column(length = 1)
   private String visible;
   @ManyToOne
   @JoinColumn(name = "MIT_ID_PARENT")
   @XmlTransient private MenuItems menuItems;
   @OneToMany(mappedBy = "menuItems")
   @XmlTransient private List<MenuItems> menuItemsList;
   @ManyToOne
   @JoinColumn(name = "MTP_CODE")
   private MenuItemTypes menuItemTypes; 
```

# hadoop - Flume 将数据从 MySQL 迁移到 Hadoop

> ID：10548538
> 
> 赞同：2
> 
> 时间：2012-05-11T09:07:49.930
> 
> 标签：hadoop, hbase, flume

请分享你的想法。

要求是将 MySQL db 中的数据迁移到 Hadoop/HBase 以进行分析。

数据应实时或接近实时迁移。水槽可以支持这一点。

有什么更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:57:44.277

据我了解，Flume 并不是为此而生的。Flume 基本上用于读取数据源（平面文件）之类的日志并将它们以结构化的方式推送到接收器。Sqoop 可以用，试用一下 [http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html](http://archive.cloudera.com/cdh/3/sqoop/SqoopUserGuide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:47:53.080

你的问题的直接答案是肯定的。Flume 被设计为事件/日志结构化数据的分布式数据传输和聚合系统。如果设置“正确”，flume 可以推送数据以在 Hadoop 中连续摄取。这是当 Flume 正确设置以从各种来源（在本例中为 MySql）收集数据时，我确信如果数据在源处可用，Flume 中的接收器将以毫秒级将其同步到 HDFS。一旦数据在 HDFS/HBASE 上可用，您就可以对其运行查询，并且可以根据基础设施进行处理。

所以我想说，Flume 配置对于将数据近乎实时地推送到 HDFS 非常重要，其余的取决于您的 Map/Reduce 集群性能以及如何编写与正在处理的数据相关的查询。

我还找到了以下资源供您了解使用 Flume 和 HDFS： [http ://assets.en.oreilly.com/1/event/61/Real-time%20Streaming%20Analysis%20for%20Hadoop%20and%20Flume%20Presentation .pdf](http://assets.en.oreilly.com/1/event/61/Real-time%20Streaming%20Analysis%20for%20Hadoop%20and%20Flume%20Presentation.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T15:46:05.113

事实上，flume 更多地用于收集日志或其他时间序列数据。几乎没有听说有人使用 flume 将数据从 db 导入到 hadoop。

Sqoop 适用于从 RDBMS 批量导入到 HDFS/Hive/HBase。如果它只是一次导入，那非常好，它实现了它在纸上的承诺。但是当您想要实时增量更新时，问题就来了。在 Sqoop 支持的两种增量更新之间：

1.  追加，这个允许你重新运行 sqoop 作业，每个新作业都从上一个旧作业结束的地方开始。例如。第一个 sqoop 作业仅导入第 0-100 行，然后下一个作业将根据 --last-value=100 从 101 开始。但是即使 0-100 更新了，追加模式也不会再覆盖它们了。

2.  last-modified，这个更糟糕的是恕我直言，它要求源表有一个时间戳字段，指示该行最后一次更新的时间。然后根据时间戳，进行增量更新导入。如果源表没有类似的东西，那么这个是没有用的。

AFAIK，没有完美的解决方案，如果您更关心实时，添加触发器或使用水槽扫描编辑日志并让您以 RT 方式更新 HBase，我知道这听起来很讨厌。或者使用 Sqoop+Oozie，定期将你的源表导入 HBase，你不会有 RT 甚至接近 RT 的响应。到目前为止，鉴于周围没有其他东西，我会投票支持水槽自定义源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T10:01:09.917

你可以使用 MySQL 的一个产品 Hadoop Applier，它可以在这里找到[http://labs.mysql.com/](http://labs.mysql.com/)

它实时将数据从 MySQL 传输到 HDFS

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-25T08:17:25.947

我使用 flume 在 HDSF 和 MySQL 中存储数据。对于后者，我使用[JDBC com.stratio.ingestion.sink.jdbc.JDBCsink](https://github.com/Stratio/ingestion)。但我对它的表现不是很满意。由于您需要从 MySQL 迁移数据，我建议使用[Sqoop](http://sqoop.apache.org/)。另一种选择是使用 Flume 将数据同时发送到 MySQL 和 HBase/Hadoop，因此您不需要从 MySQL 复制到 Hadoop/

# java - 在摆动的透明容器上平滑调整组件的大小

> ID：10548540
> 
> 赞同：1
> 
> 时间：2012-05-11T09:07:53.547
> 
> 标签：java, swing, resize, awt, alpha-transparency

我制作了一个透明容器（JWindow），其中包含一个可调整大小的矩形（JLabel 有 10px 厚的边框）。类似于[http://www.screenleap.com/](http://www.screenleap.com/)。

我使用 AWTUtilities.setWindowOpaque(JWindow, false) 使 JWindow 透明。

问题是，在调整矩形大小时，如果鼠标超出矩形边界，它将停止调整大小。这是因为父 JWindow 是透明的，它不会在透明部分上监听鼠标事件。

在这种情况下如何平滑地调整矩形的大小？这样鼠标在调整大小时不会超出矩形范围。

谢谢

# python - 我可以使用 google.api.search 匹配所有内容并仅按类别过滤吗？

> ID：10548542
> 
> 赞同：1
> 
> 时间：2012-05-11T09:08:05.500
> 
> 标签：python, google-app-engine, python-2.7

我看到新的应用程序引擎搜索 API 允许我们对结果进行搜索和分页，但在我的情况下，我还需要匹配所有内容并按类别匹配所有内容的函数，因此仍然无法抵消只需要第 2 页的查询类别即只是一个简单的偏移量？使用游标和使用偏移量有什么区别？我阅读了[https://developers.google.com/appengine/docs/python/search/overview](https://developers.google.com/appengine/docs/python/search/overview)的说明 ，我还想知道是否应该为许多数据类型创建一个索引，或者每个类别或每个城市一个索引，因为我的结构`/<region>/<city>/<category>`是我需要启用搜索以及按类别查看所有内容，并按地区、城市、城市和类别查看所有内容，而无需搜索和过滤。

谢谢你的帮助

## 更新

我的想法是在每个索引中存储一个数字，并且该数字是相同的，当我想匹配所有内容时，我只需操纵搜索以在该字段上搜索该数字，然后我可以添加过滤器。它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T23:14:43.130

关于光标与偏移量：光标更有效。但是，（因为搜索 API 还没有像数据存储那样的“反向”光标），使用偏移量可以更轻松地实现向后分页 - 到“上一个”页面。因此，这取决于您的用例。

在查询中，可以过滤特定字段值（任何类型，包括数字和字符串字段）。例如，您的查询可能如下所示：
`field1:value1 word1 word2`
其中 'field1' 是字段名称。如果 'field1' 是数字，你也可以像这样提交查询：
`field1 > 10`

（我不清楚你关于一个与多个索引的问题——你能详细说明一下吗？）

# javascript - 如何在表格插件中修改 Tiny MCE 默认值？

> ID：10548545
> 
> 赞同：0
> 
> 时间：2012-05-11T09:08:10.680
> 
> 标签：javascript, tinymce

我想在插入表格时更改一些默认值，例如样式、边框、列数、行数等。为此，我试图在路径中更改 Tiny MCE 3.4.8 版的表格插件`tiny_mce/plugins/table`。我对 table.js 和 table.html 等文件进行了更改，但我看不到更改。有谁知道如何实现它？我错过了一些步骤吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:44:54.803

您需要注意，如果使用 tinymce 开发人员下载，则有两种文件。第一有`editor_plugin.js`第二有`editor_plugin_src.js`。当您在页面上加载第一个时会加载`tiny_mce.js`；`tiny_mce_dev.js`如果您在页面上加载，第二个会加载。

# xml - 验证元素名称包含序列号的 XML

> ID：10548550
> 
> 赞同：0
> 
> 时间：2012-05-11T09:08:43.733
> 
> 标签：xml, xsd, xsd-validation

我正在尝试创建一个 XSD 来验证我们从客户那里收到的 XML。XML 看起来像这样：

```
<someElement>
   <items>
      <item1 name=”abc” />
      <item2 name =”def” />
      <item3 name =”ghi” />
   </items>
</someElement> 
```

请注意，无论出于何种原因，项目名称还包含一个数字。项目数未指定，因文件而异。

由于元素名称中的行号，这样的东西不起作用：

```
<xs:sequence>
   <xs:element name="items" type="item" maxOccurs="unbounded" minOccurs="0" />
</xs:sequence> 
```

什么是适当的 XSD 来验证这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:03:38.583

在以前我不得不机械地处理设计糟糕的 XML 的情况下，无论是用于模式验证还是绑定到类模型，我发现使用 XSL 转换对 XML 进行预处理通常是一个好的开始。在许多情况下，这种预处理可以将设计糟糕的 XML 变成更好的东西。

在您的情况下，您可以编写一个转换

```
<item1 name="abc"/> 
```

进入

```
<item num="1" name="abc"/> 
```

这样就更容易为其设计模式。如果给定的 XML 输入不符合该模式，那么 XSLT 应该不理会它，然后验证将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:23:42.483

愚蠢的问题：您是否尝试过 type="xs:string" 而不是 type="item"？我想你可以使用[这个](http://www.xmlforasp.net/codebank/system_xml_schema/buildschema/buildxmlschema.aspx)获得一些灵感。

# maven - Maven：如何避免在 Maven 中附加到战争文件的版本？

> ID：10548553
> 
> 赞同：10
> 
> 时间：2012-05-11T09:09:06.480
> 
> 标签：maven, maven-2, build

我使用 Maven 作为构建文件，这是我要生成的 war 文件名的以下设置

我正在使用 Maven 版本 2.2.1

```
 <artifactId>TataWeb</artifactId>
<packaging>war</packaging>
<version>1.0</version> 
```

所以它实际上生成了一个名为 TataWeb-1.0 的战争文件

但我希望战争文件名只有 TataWeb 。

请让我知道如何避免附加到战争文件名的版本？

谢谢你 。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-11T09:10:09.803

只需将其添加到您的`pom.xml`：

```
<build>
    <finalName>TataWeb</finalName>
</build> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-02T04:29:01.810

您应该使用您的 artifactid，而不是硬编码文件名。

```
<build>
  <finalName>${project.artifactId}</finalName>
</build> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T14:29:16.617

好吧，它不是 Maven 方式。Maven 确实有一个版本属性.. 使用它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-12T15:18:38.597

您可以通过执行“干净编译包”而不是“干净安装”来避免附加到战争文件名的版本。

# java - 如何初始化类

> ID：10548554
> 
> 赞同：1
> 
> 时间：2012-05-11T09:09:11.863
> 
> 标签：java, class

我有一个抽象方法

```
public abstract Class<? extends MyClass> getMySpecialClass(); 
```

在另一种方法中，我想了解一下此类。我该怎么做？

```
public void method(){
   Class<? extends MyClass> mySpecialClass = getMySpecialClass();
   MyClass myClass = new ???
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:12:21.083

打电话怎么样`newInstance`？

```
MyClass myClass = mySpecialClass.newInstance(); 
```

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#newInstance](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#newInstance) ()

类必须有一个空构造器（一个没有参数的）。

# jsf - Best practice to test your jsf application, for example the login page

> ID：10548557
> 
> 赞同：0
> 
> 时间：2012-05-11T09:09:17.827
> 
> 标签：jsf

The normal test of a jsf application starts with the login page, where the backing bean is handling the authentication and so on, at least I did this way so far. I can't figure out a test where I can simulate a bunch of concurrent logins, just to see how the application is doing, a kind of DOS attack. This kind of test would be interesting for an application bean as well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:16:57.697

这种测试称为[压力测试](http://en.wikipedia.org/wiki/Stress_testing)。有一个名为[JMeter](http://jmeter.apache.org/)的工具允许您记录浏览器与服务器的交互（HTTP 请求）并重放它们以模拟来自多个用户的请求。

# java - 如何从 JavaScript 调用小程序方法

> ID：10548558
> 
> 赞同：2
> 
> 时间：2012-05-11T09:09:21.897
> 
> 标签：java, javascript, jakarta-ee, applet

我已经创建了一个小程序，我将在一个 Web 项目上从我的 HTML 页面访问一个小程序方法。

这里我的小程序看起来像：

```
public class MessageApplet extends Applet {

    private Label m_mess;

    public void init()
    {
        setBackground(Color.lightGray);
        setLayout(new BorderLayout());
        m_mess = new Label("MessageApplet is Running...: No Selection Yet", Label.CENTER);
        add(BorderLayout.CENTER, m_mess);
    }

    public void setMessage(String message)
    {
        m_mess.setText("Selection: " + message);
    }
} 
```

我的 HTML 页面看起来像：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    <SCRIPT LANGUAGE="JavaScript">
        function selectedCity()
        {
            if(document.CityChoice.City[0].checked == true)
            {
                document.SimpleMessageApplet.setMessage(document.CityChoice.City[0].value);
            }
        }
    </SCRIPT>
</HEAD>

<BODY>
    <b>This is the applet</b>
    <APPLET 
        CODE="MessageApplet.class" 
        NAME="SimpleMessageApplet" 
        WIDTH=350
        HEIGHT=100>
    </APPLET>
    <FORM NAME="CityChoice">
        <input type="radio" name="City" value="Boston" onClick="selectedCity()"> Boston<br>
    </form>
</BODY>

</html> 
```

但是当我单击单选按钮时，我的浏览器挂起并且我永远无法访问小程序方法。

我的小程序类位于默认目录中，而 HTML 位于 WebContent 文件夹中。我应该在我的代码中更改什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:01:29.030

问题是`if`语句检查：

```
document.CityChoice.City[0].checked == true 
```

这与 JavaScript 不完全一样，因为那里的错误表达式会引发*错误*，并且它永远不会进入`if`语句体。

我删除了该`if`语句并将代码更改为如下内容：

```
function selectedCity()
{
    document.SimpleMessageApplet.setMessage("Hello");
} 
```

当我单击时，我看到 Hello 消息很好。

将您的 HTML 文件内容更改为：

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Insert title here</title>
        <SCRIPT LANGUAGE="JavaScript">
            function selectedCity()
            {
                var elem = document.getElementById('cityRb');

                if(elem.checked)
                {
                    document.SimpleMessageApplet.setMessage(elem.value);
                }
            }
        </SCRIPT></HEAD>
    <BODY >
        <b>This is the Applet</b>
    <APPLET CODE="MessageApplet.class" NAME="SimpleMessageApplet" WIDTH=350 HEIGHT=100 >
    </APPLET >
    <FORM NAME="CityChoice">
        <input type="radio" id="cityRb" name="City" value="Boston" onClick="selectedCity()"> Boston<br>
    </form>
</BODY >
</html> 
```

还添加了完整的类代码：

```
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Label;

/**
 *
 * @author hmmmmm
 */
public class MessageApplet extends Applet {

    private Label m_mess;

    public void init() {
        setBackground(Color.lightGray);
        setLayout(new BorderLayout());
        m_mess = new Label("MessageApplet is Running...: No Selection Yet", Label.CENTER);
        add(BorderLayout.CENTER, m_mess);
        m_mess.setBackground(Color.red);
    }

    public void setMessage(String message) {
        m_mess.setText("Selection: " + message);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:24:53.567

您遇到的问题是在不同的浏览器上，它们对过时的 LiveConnect (JavaScript <-> Java) 技术有不同的实现。

根据经验，Firefox 在尝试做这些事情时会更加合作。

您的问题是您正试图以一种非常古老的方式将您的小程序包含在页面上。尽管它可能并且将在某些浏览器上运行，但不推荐将小程序包含到页面中。

[Java Web start](https://en.wikipedia.org/wiki/Java_Web_Start)是技术堆栈，而[JNLP](https://en.wikipedia.org/wiki/Java_Web_Start#Java_Network_Launching_Protocol_(JNLP))是您可以用来以标准化方式分发 Java 内容的协议，您可以在本文中阅读：

*[Java Web 启动](http://en.wikipedia.org/wiki/Java_Web_Start)*

部署 JNLP 描述符是将小程序嵌入页面的正确方法。此外，使用 Sun 的 deployJava.js 脚本也是一个好主意，它可以在将您的小程序部署到页面上的容器时为您省去很多麻烦（虽然它有点受限制，所以请随意添加东西）。

*[Java™ 富 Internet 应用程序部署建议](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html)*

总而言之，JNLP/Java web start 驱动的小程序是要走的路。下面是部署描述符的示例。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <jnlp codebase="file:/C:/JavaApplication6/dist/" href="launch.jnlp" spec="1.0+">
        <information>
            <title>JavaApplication6</title>
            <description>blalbla</description>
            <description kind="short">JavaApplication6</description>

        </information>
    <update check="background"/>
    <security>
    <all-permissions/>
    </security>
        <resources>
    <j2se java-vm-args="-Djava.security.policy=applet.policy" version="1.5+"/>
    <jar href="JavaApplication6.jar" main="true"/>

        <jar href="lib/jna.jar"/>
    <jar href="lib/platform.jar"/>
    </resources>
        <applet-desc height="300" main-class="winToJnaApi.NewApplet" name="JavaApplication6" width="300">

        </applet-desc>
    </jnlp> 
```

# django - Django request.LANGUAGE_CODE in model method

> ID：10548567
> 
> 赞同：1
> 
> 时间：2012-05-11T09:09:41.940
> 
> 标签：django, model, request

I am writing a method for my model which returns entries (translations) for a specific service.

I am having a problem with request in model, it does not return any data. Why? How to fix this?

```
class Services(models.Model):
    global_title = models.CharField(max_length=32, null=True, blank=True)
    service_color = models.CharField(max_length=32)
    service_order = models.PositiveIntegerField(default=0, null=True,blank=True)
    date_added = models.DateTimeField(auto_now_add=True)    
    date_edited = models.DateTimeField(auto_now=True)

    def get_language(self, request):
        return self.servicetranslation_set.filter(language=request.LANGUAGE_CODE) 
```

# xml - Get distinct result set in marklogic server

> ID：10548568
> 
> 赞同：4
> 
> 时间：2012-05-11T09:09:42.380
> 
> 标签：xml, xquery, marklogic

I have a XML document like this.

```
 <Authors>
      <Author>
        <name>R.N Tagore</name>
        <book>Gitanjli</book>
      </Author>
      <Author>
        <name>Premchand</name>
        <book>Panch Parameshvar</book>
      </Author>
      <Author>
        <name>H.R Bacchan</name>
        <book>Madhushala</book>
      </Author>
      <Author>
        <name>Premchand</name>
        <book>Gaban</book>
      </Author>
      <Author>
        <name>Premchand</name>
        <book>Nirmala</book>
      </Author>
      <Author>
        <name>Premchand</name>
        <book>Nirmala</book>
      </Author>
  </Authors> 
```

From the above XML I need distinct list of author's name.
For this I can write a query like ,

```
fn:distinct-values(cts:search(fn:doc()//pa:Author/pa:name,cts:and-query(()))) 
```

What the above code will do is, It will get result of Authors name and then **fn:distinct-values()** function will filter distinct Author name from that result set. For the current scenario it will work fine because data in XML only 6, But when data is very high let say 50 lac's

```
cts:search(fn:doc()//pa:Author/pa:name,cts:and-query(())) 
```

the above portion of query will give **XDMP-EXPNTREECACHEFULL** Exception because we are trying to cache 50 lac's element in memory.
So need your help to get only distinct author name by using **cts:search** or **search:search** API. I don't want to first get a result set and then extract distinct record from that result set by using **fn:distinct-values()**.
Thanks,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T14:51:53.990

这个问题在[MarkLogic 社区网站](http://community.marklogic.com)首页的 Ninja 教程的中间部分得到了解决，我建议你阅读。

见[http://community.marklogic.com/try/ninja/page7](http://community.marklogic.com/try/ninja/page7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-04T21:49:24.667

您可以通过在`name`. 一旦你有了它，使用[cts:values()](http://docs.marklogic.com/cts:values)。

```
cts:values(cts:element-reference(xs:QName("name"))) 
```

此代码假定您使用索引的默认排序规则。

请注意，当您拥有像“名称”这样的通用元素名称时，您可能希望使用更精确的路径索引。在这种情况下，您可以在 Author/name 上设置路径范围索引，然后

```
cts:values(cts:path-reference(xs:QName("Author/name"))) 
```

（我假设您使用的是 MarkLogic 7+；如果没有，您可以使用[cts:element-values()](http://docs.marklogic.com/cts:element-values)而不是 cts:values()。）

# java - Object sent from client to web-service using WSDL is null on the web-service, but not in the client, why?

> ID：10548570
> 
> 赞同：1
> 
> 时间：2012-05-11T09:09:45.780
> 
> 标签：java, web-services, wsdl, eclipselink

I have a web service running EclipseLink. I have generated some Java classes with NetBeans that are based on the database schema ("Entity classes from database...").

My problem is about two classes called Person.java and Group.java that have been generated by NetBeans based on the database schema. Person.java and Group.java is part of the JAR file "MyLib.jar"

In Group.java, I have this code (among other code):

```
@Column(name = "groupName") 
private String groupName;    
@OneToMany(cascade = CascadeType.ALL, mappedBy = "group")
private Collection<Person> personCollection;

public String setGroupName(String groupName) {
    this.groupName = groupName;
}

public String getGroupName(){
    return groupName;
}

@XmlTransient
public Collection<Person> getPersonCollection() {
    return personCollection;
}

public void setPersonCollection(Collection<Person> personCollection) {
    this.personCollection = personCollection;
} 
```

I have two different applications that include the "MyLib.jar". One is the web-service itself and the other is a client that connects to the web-service. The client also, of course, includes the web service interface JAR.

In the client I create a collection of Persons like this and then send the group instance to the web-service:

```
Collection<Person> persons = new ArrayList<Person>();
Person person = new Person();
person.setName("Peter");
persons.add(person); 
group.setName("GroupName");
group.setPersonCollection(persons);
System.out.print(persons); // prints the instance and its content
webserviceInstance.setGroup(group); 
```

The really strange thing is that in the web-service method `setGroup`, the collection is null!

```
@Override
public void setGroup(Group group) {
    System.out.print(group.getGroupName()); // prints "GroupName"
    System.out.print(group.getPersonCollection()); // prints null meaning the instance is null
    ...
} 
```

I simply cannot understand why the collection is null in the web service but not in the client. Am I doing anything wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T04:35:07.837

问题是，WebService 不直接支持集合，您需要实现一个包含对象集合的类，类似于：

```
public class ListExamenConductor implements List<Examenconductor>{

    private ArrayList<Examenconductor> al = new ArrayList<Examenconductor>();
.... //Need to implements all methods 
```

然后，在 webService 中，您将所有集合发送到对象，如下所示：

```
@WebMethod(operationName = "consultarExamenConductor")
    public ListExamenConductor consultarExamenConductor(@WebParam(name = "identificacion") Identificacion identificacion) {
        System.out.println("Consultar examenes, consultado en "+new Date());
        EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("scrc_proyectoPU");
        EntityManager em = emFactory.createEntityManager();
        ExamenconductorJpaController jpaController  = new ExamenconductorJpaController(em.getTransaction(), emFactory);
        ListExamenConductor  examenes = new ListExamenConductor();
        examenes.addAll(jpaController.consultarExamen(identificacion));
        System.out.println("Consultar antecedente, resultado "+examenes.size() + " en "+new Date());
        return examenes;
    } 
```

有用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-13T23:51:20.520

我有同样的问题，解决方案是创建其他不使用 JPA 的类，并且使用这个类工作 WebService，我认为 jpa 条目的标签与

# jquery - Map : Reverse geocoding request : Jquery async request

> ID：10548571
> 
> 赞同：0
> 
> 时间：2012-05-11T09:09:54.530
> 
> 标签：jquery, asp.net-mvc-3, map

I have implemented reverse geocoding in the map. We are sending around 1000 reverse geocoding async request at a time to the map server and at that time my browser got hangs for 6-7 seconds. I am using JQUERY for it and it's async request than why browser gets hang. May i know the reason behind it and alternative solution for it?

Note : I am using MVC 3.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:12:45.020

向您的服务器发送 1000 个 AJAX 请求对于浏览器来说似乎是一个巨大的负担。如果您有 2 个用户同时浏览您的网站怎么办？如果你有 3 个呢？如果你有 100 个呢？您的网络服务器不会持续很长时间。

我建议您重新考虑您的设计，以便发送更少的 AJAX 请求但使用更大的有效负载数据，即将多个请求聚合为一个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:13:14.217

您是否尝试过将所有请求合并为一个请求？这将加快页面加载速度，因为您将发出至少 1001 个请求

# xml - XSLT transformation adds an unexpected namespace to the result

> ID：10548579
> 
> 赞同：-1
> 
> 时间：2012-05-11T09:10:41.410
> 
> 标签：xml, xslt

I am using XSLT to transform XML to another XML.

But the result XML has `xmlns:n1="http://www.w3.org/2001/XMLSchema-instance` as an attribute, why do i see this attribute and what can I do to avoid this attribute?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:32:27.047

可能有几个原因，也许您的样式表有`xmlns:n1="http://www.w3.org/2001/XMLSchema-instance"`声明，因为它需要它来选择或匹配节点。这样，声明可能在结果元素的范围内，您需要添加`exclude-result-prefixes="n1"`到`xsl:stylesheet`相应的`xsl:transform`元素以避免声明出现在结果文档中。

或者命名空间声明从输入复制到输出。我们确实需要查看您的输入 XML、XSLT、想要的 XML 结果和当前 XML 结果的详细信息，以便在这种情况下提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:32:52.600

发生这种情况是因为您在“n1”XML 命名空间中工作。用作`exclude-result-prefixes="n1"`的属性`<xsl:transform>`。

# google-visualization - how to put special symbols in google chart?

> ID：10548584
> 
> 赞同：1
> 
> 时间：2012-05-11T09:10:56.933
> 
> 标签：google-visualization

I used dollar sign to have a prefix in dollar but my problem is i need it to be in GBP/british pound like this "£". how can i do this? thanks

```
var data2 = new google.visualization.DataTable();
var formatted = new google.visualization.NumberFormat({prefix: '$'});
data2.addColumn('string', 'Company');
data2.addColumn('number', 'Amount'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:57:21.333

您需要使用 javascript \u 后跟 unicode 字符的十六进制代码。

在这种情况下 \u00A3

# php - PHP验证码不会显示图像

> ID：10548585
> 
> 赞同：0
> 
> 时间：2012-05-11T09:11:02.023
> 
> 标签：php, captcha

我制作了这段代码，它应该向我展示一个带有文本的图像，但该图像不会出现。任何的想法？

```
<?php

    header("Content-type: image/png"); 
    $md5 = md5(microtime() * mktime()); 

    $string = substr($md5,0,5);

    $captcha = imagecreatefrompng('bg.png'); 

    $black = imagecolorallocate($captcha, 0, 0, 0); 
    $line = imagecolorallocate($captcha,233,239,239); 

    imageline($captcha,0,0,39,29,$line); 
    imageline($captcha,40,0,64,29,$line);

    imagestring($captcha, 5, 20, 10, $string, $black); 

    $_SESSION['key'] = md5($string); 

    imagepng($captcha);
    imagedestroy($captcha);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:16:31.377

检查您的 PHP 错误日志文件，在我的本地主机上，您的代码有几个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:17:37.277

您不能使用`mktime`这种方式，您会收到以下错误`Strict standards: mktime() [function.mktime]`，这不会使您的图像显示

代替

```
$md5 = md5(microtime() * mktime()); 
```

和

```
$md5 = md5(microtime() * time()); 
```

你的输出

![在此处输入图像描述](../Images/2e5878208037c2a9983e11864255fcc7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:19:58.927

此脚本在我的本地主机上正常运行。请检查`bg.png`您的文件夹中是否存在。因为如果 bg.png 没有找到它会产生错误。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:20:24.697

它也适用于我。您应该检查图像的路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:32:14.830

采用：

```
$captcha = imagecreatefrompng(dirname(__FILE__) . '/bg.png'); 
```

代替：

```
$captcha = imagecreatefrompng('bg.png'); 
```

# asp.net-mvc-3 - How to maintain the statuses of parent and child database objects, by updating children when the parent changes

> ID：10548588
> 
> 赞同：0
> 
> 时间：2012-05-11T09:11:15.167
> 
> 标签：asp.net-mvc-3, sql-server-2008, c#-4.0

I am currently working on a ASP.NET MVC 3 Project where I have to maintain Statuses for about 60+ Database Models. E.g.

Parent:

```
public class DistributorModel 
{
  public DistributorModel()
  {
    Title = "Distributor";     
  }

  public int DistributorId { get; set; }

  public string Code { get; set; }

  public string DistributorName { get; set; }

  public ActiveStatus IsActive { get; set; }
} 
```

Child:

```
public class DistributorVehicleModel 
{
  public DistributorModel()
  {
    Title = "Distributor Vehicle";     
  }

  public int DistributorVehicleId { get; set; }

  public string Make { get; set; }

  public string Model { get; set; }

  public int DistributorId { get; set; } // This is the foreign key

  public ActiveStatus IsActive { get; set; }
} 
```

The problem with maintaining statuses for both parent and child is as follows:

First: When you change the status of a Distributor to be Inactive, none of it's vehicles may be active, which is the required result. But how do you update the status of all the children - there could be multiple child objects? Without explicitly specifiying which children to update (or at least minimize the amount of calls)? This might be a bit ambitious.

Second: A second approach I thought might work is to remove the status field in the Vehicle Model, however a vehicle's status can be set to inactive due to repairs being done etc, so this won't really help and you don't want to delete a vehicle record and add it again in 5 days when it is repaired. What would be the best approach?

I have considered using database triggers, but I would prefer to keep the functionality at programming level for future project templates which might not use MS SQL Server 2008.

What will be the best approach to maintain the statuses of these entities? Without opening a can of worms. I am NOT using Entity Framework

# javascript - validation for the "version" field in a table

> ID：10548589
> 
> 赞同：0
> 
> 时间：2012-05-11T09:11:16.953
> 
> 标签：javascript, html, input, textbox, validation

I have an input field named "VERSION" in a form where I have to write the version of the document.

e.g. Version : 10.1.2.3

How to validation for this input field in javascript?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:17:18.557

可以使用正则表达式吗？

`(\d+\.)+.\d+`

含义：一个或多个数字，后跟一个点，根据需要重复多次，然后是一个点和一个或多个数字。

如果必须有 4 个，则可以使其更具体：

`(\d+\.){3}.\d+`

如果它必须是 2 位数字，一位一位，请尝试：

```
\d\d\.\d\.\d\.\d 
```

如您所见，您需要更清楚“什么是有效版本，什么不是”才能获得更具体的答案：]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:16:50.080

你的意思是你会验证是否有正确格式的版本输入？（使用 ID 作为输入字段）

`if(document.getElementByID('VERSION').value.match(/^\d+\.\d+\.\d+\.\d+$/)) {}`

这应该匹配格式为 {number}.{number}.{number}.{number} 的所有版本也许你必须在这样做之前修剪字符串

# c# - 在字符串集合中查找最相同的字符串

> ID：10548590
> 
> 赞同：0
> 
> 时间：2012-05-11T09:11:19.697
> 
> 标签：c#, string, collections

我有一个包含所有系统字体名称的列表。这是列表的一部分：

```
Arial
Calibri
Times New Roman 
```

我的问题是：我有 16 个 ASCII 字符（2 个字节）的字体名称和字体（粗体、斜体、常规）

```
Calibri Bold
Arial Bold Itali
Times New Roman 
```

如果我有一个字符串（例如 Arial Bold Itali），如何从列表中获取字体名称（例如 Arial）

希望有人可以帮助我或给我建议。

答：我反之亦然。打赌这可以让我做得更有效率，但它现在有效。

```
foreach (string fn in FontHelper.FontNames)
        {
          if (Font.FontName.Contains(fn))
          {
            fontname = fn;
            break;
          }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:15:20.313

您可以尝试使用 Levenshtein 距离。找到大多数相同的字符串是一件好事。[在这里](http://en.wikipedia.org/wiki/Levenshtein_distance)你可以阅读它，你也可以找到一些算法来找到那个距离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:13:41.393

您可以使用[.contains()](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法

```
string str = "Arial Bold Itali";

if(str.contains("Arial"))
{
   return str;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:14:44.840

我的建议是在进行匹配之前去掉字体修饰符。我认为只有几种不同类型的修饰符字体可以有。

```
var fontToFind = "Arial Bold Itali";

fontToFind = fontToFind.Replace("Bold", "").Replace("Itali", "").Trim();

//Do search 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T09:15:41.860

假设“最相同”意味着一个是另一个的前缀，您可以执行以下操作：

```
var fonts = new[] { "Arial", "Calibri", "Times New Roman" };

var input = new[] { "Calibri Bold", "Arial Bold Itali", "Times New Roman" };

var result = input.Select(item => fonts.Single(font => item.StartsWith(font)));
// result == { "Calibri", "Arial", "Times New Roman" } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T09:16:13.427

您需要某种启发式方法——例如，去掉任何“粗体”和“斜体”后缀（我真的不知道还会遇到什么）。

这可以通过正则表达式来完成：

```
var str = "Arial Bold Italic";
var fontName = Regex.Replace(str, "((Bold|Italic)\\s*)*$", String.Empty); 
```

**[看到它在行动](http://ideone.com/4HTsb)**。

另外，您可以很容易地扩展它以去除更多后缀，例如“Oblique”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-11T09:16:31.180

我想你也可以使用 start with。

```
string str = "Arial Bold Itali";

if(str.StrartWith("Arial"))
{
   return str;
} 
```

# python - performance when converting an integer into its bytes characters representation in python

> ID：10548592
> 
> 赞同：3
> 
> 时间：2012-05-11T09:11:22.130
> 
> 标签：python, performance, python-3.x, type-conversion

To be specific I need to convert an integer, say `9999`, into bytes, `b'9999'` in python 2.6 up to python 3.x

In python 2.x I do

```
b'%s'%n 
```

while in python 3.x

```
('%s'%n).encode() 
```

Performance in python 2.6

```
>>> from timeit import Timer
>>> Timer('b"%s"%n','n=9999').timeit()
0.24728001750963813 
```

Performance in python 3.2

```
>>> from timeit import Timer
>>> Timer('("%s"%n).encode()','n=9999').timeit()
0.534475012767416 
```

Assuming my benchmarks are set up correctly, that is an hefty penalty in python 3.x.

Is there a way to improve performance to close the gap with 2.6/2.7?

Maybe via the [cython](http://cython.org/) route?

This is the generator function I'm trying to optimize. It is called over and over with `args` being a list of strings, bytes or numbers:

```
def pack_gen(self, args, encoding='utf-8'):
    crlf = b'\r\n'
    yield ('*%s\r\n'%len(args)).encode(encoding)
    for value in args:
        if not isinstance(value, bytes):
            value = ('%s'%value).encode(encoding)
        yield ('$%s\r\n'%len(value)).encode(encoding)
        yield value
        yield crlf 
```

The function is called in this way

```
b''.join(pack_gen(args)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T01:20:12.233

在 Python 3.2 中使用 repr() 得到了更好的结果：

```
>>> Timer('repr(n).encode()','n=9999').timeit()
0.32432007789611816
>>> Timer('("%s" % n).encode()','n=9999').timeit()
0.44790005683898926 
```

但当然它不如`"%s" % n`.

我还检查了 Python 3.3.0a3，希望 PEP393 能[稍微](http://www.python.org/dev/peps/pep-0393/)加快转换速度，但令人惊讶的是，我得到的结果比 3.2 更差：

```
>>> Timer('repr(n).encode()','n=9999').timeit()
0.35951611599921307
>>> Timer('("%s"%n).encode()','n=9999').timeit()
0.4658188759985933 
```

最后，如下：

```
>>> Timer('str(n).encode()','n=9999').timeit()
0.49958825100111426 
```

表明大部分成本可能来自函数调用开销（根据上面的结果，我假设 Python 内部实现`str()`了整数类型调用`repr()`）。因此，如果您需要在此级别进行优化，那么正如您所建议的，使用 cython 替换整个代码块可能是可行的方法。或者更好地向我们展示您正在尝试优化的循环，因为可能有许多其他方法可以加速它。

# android - Android 开发 :: 查看对象

> ID：10548595
> 
> 赞同：1
> 
> 时间：2012-05-11T09:11:36.773
> 
> 标签：android, class

我对 Java 和 Android 还很陌生，所以我不知道自己在做什么。

我的测试程序成功创建了视图对象，所以现在我正在尝试组织我的代码。我想创建一个单独的类来管理我的 GUI，但它总是失败。

关于我的 gui 类的基本信息：

```
package horc.gui;
   ...
public class GUI{
    private Context context; 
```

从我的主要活动中，我用应用程序上下文构建了那个 gui 类。

```
gui=new GUI(getApplicationContext());   // gui is a var of type GUI, & this sets the context of the class 
```

问题是当我从外部创建/修改类中的视图对象时，它会引发异常。

我的主要活动...

```
package horc.test;
   ...
GUI gui;
LinearLayout test=gui.newLinear("ff", "v"); // <-- this sets fill parent for width/height
                                            // & vertical orientation of the vertical layout.
                                            // Doesnt work for the reason stated above.
                                            // I cannot manage any view objects from a separate class.
gui.lastText.setText("@@@@@@@@@@"); // <-- a variable in the class to hold the view object I am manipulating
setContentView(t); 
```

...调用此类函数：

```
public TextView newText(String text){
    TextView test=new TextView(context);
    lastLinear.addView(test);
    return test;
} 
```

我在主要活动中测试了这个类似的身体，它工作得很好。只有当我从那个 gui 类之外做任何事情时它才会失败。

人们在管理单独的类中的视图对象时会遇到一个常见问题吗？我完全不知道此时我在做什么。来自 C++，java 似乎是一种疯狂的语言。我不能像在 C++ 中那样计划事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:15:27.900

代替

```
gui=new GUI(getApplicationContext()); 
```

尝试

```
gui=new GUI(MyActivity.this); 
```

请输入您的活动名称而不是 MyActivity

# java - Hibernate Search issue on Amazon

> ID：10548598
> 
> 赞同：1
> 
> 时间：2012-05-11T09:11:55.123
> 
> 标签：java, hibernate, lucene, hibernate-search

***Technology Versions*:** 

```
Hibernate 3.6.5

Hibernate Search 3.4.0

Lucene (lucene-core-*.jar) 3.1.0

Spring 3.1.0.M2

```

***Hibernate (Search) Configuration*:** 

```
<prop key="hibernate.search.default.indexBase">/some/dir</prop>
<prop key="hibernate.search.default.directory_provider">org.hibernate.search.store.FSDirectoryProvider</prop>
<prop key="hibernate.search.default.locking_strategy">native</prop>
<prop key="hibernate.search.default.exclusive_index_use">false</prop> 
```

***The issue*:** Our application is deployed in Amazon (AWS cloud), but we've faced this issue in our local clusters as well:

The application design is such that there is a `Thread` that is spawned from within the main (Web) application wherefrom we need to update an *Indexed* entity. Basically it's like a status monitor thread which reads a .status file and updates the database every 30 seconds or so. This keeps happening for about 10mins to 1/2 an hour on an average. The issue we see is that: every few days we need to regenerate the indexes because Hibernate Search stops returning anything for the entity in question (the one discussed above).

I went through few forums and seems it is suggested that only a single thread should be updating the Lucene indexes. But it is also given that index writing is thread-safe. So even if multiple threads are writing to the same index, I still expect that it should not cause the issue (of nothing being returned in the search). That is to say, I may get stale status of the entity in question, but still, *something* should be returned.

We're using the default IndexReader/Writer implementation of Hibernate Search.

Any help would be highly appreciated. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:13:43.487

这里有一些想法。

> 我浏览了几个论坛，似乎建议只有一个线程应该更新 Lucene 索引。

这通常不是真的。Lucene 和 Hibernate Search 允许多个索引编写器，**但是**对索引的访问必须通过 Lucene 的*org.apache.lucene.store.LockFactory*正确同步。锁工厂是可配置的，您可以通过属性 *hibernate.search.default.locking_strategy* 使用本地锁工厂。问题可能在于此策略是基于文件的。我对亚马逊的分布式文件系统内部工作了解不多，但我想文件锁在这种情况下不起作用。您可能需要实施自定义锁定策略。

> 但也考虑到索引写入是线程安全的。因此，即使多个线程正在写入同一个索引，我仍然希望它不会导致问题

正确，只要锁定有效。

如果您可以保证只有您的更新线程将写入索引，则另一种方法是不使用锁（将 *hibernate.search.default.locking_strategy* 设置为*none ）。*您是否启用了更新线程自动索引？如果是这样，请尝试将其关闭（允许您的用例允许您这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:27:09.397

好的，对于那些来到这里寻找解决方案的人——这就是我们最终所做的，这似乎已经解决了这个问题（我们已经在 AWS 上对此修复进行了负载测试，到目前为止还没有遇到任何问题）：

我们基于 Lucene 编写了锁工厂的实现`NativeFSLockFactory`。我们修改了`obtain`方法，以便在放弃之前重试几次获取锁。我们在重试之间添加了一个短暂的延迟 ( `sleep`) 以处理`NFS`延迟。

我们用 Lucene 测试了这个修复，`LockVerifyServer`并观察到在高负载下，即使一些锁获取请求必须等待获取锁——但最终每个锁获取请求都会得到解决。这实时解释为索引文件的成功更新。

谢谢[哈代](https://stackoverflow.com/users/115835/hardy)向我们展示了道路。:)

**更新：**昨天，我们不得不将重试计数提高到更高的数字 ~ 30，因为我们遇到了先前值为 3 的索引更新滑点。此后一切似乎都很好。

# c# - UserControl 抛出异常“跨线程操作无效”

> ID：10548602
> 
> 赞同：1
> 
> 时间：2012-05-11T09:12:12.920
> 
> 标签：c#, winforms, user-controls

我有一个用户控件和两个类我想将我的类 1 的结果打印到用户控件中。我正在使用这一行从类中发送结果

```
((merge.MyControl)(MyControlInstance)).CLIDisplay = e.WorkItem.CustomerId; 
```

我显示结果的控制属性是

```
public string CLIDisplay
        {
            get { return lblResultCLI.Text; }
            set
            {
                    lblResultCLI.Text = value;

            }
        } 
```

但是当我向我的 c# 表单调用一个类时，我得到了以下异常

```
An exception of type 'System.InvalidOperationException' occurred in System.Windows.Forms.dll but was not handled in user code

Additional information: Cross-thread operation not valid: Control 'tbxEvents' accessed from a thread other than the thread it was created on. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T09:14:58.163

您将不得不使用调用

```
this.Invoke((MethodInvoker) delegate
{
   lblResultCLI.Text = value;
}); 
```

下次请确保您使用谷歌...

[跨线程操作无效：控件从创建它的线程以外的线程访问](https://stackoverflow.com/questions/142003/cross-thread-operation-not-valid-control-accessed-from-a-thread-other-than-the)

发生此错误是因为 lblResultCLI 是在另一个线程上创建的，而不是您正在运行代码的线程，这就是您必须使用 Invoke 的原因，以便访问 lblResultCLI 控件的代码在创建时在同一线程上执行。

# cocoa-touch - 从 NSString 获取数字

> ID：10548603
> 
> 赞同：1
> 
> 时间：2012-05-11T09:12:13.627
> 
> 标签：cocoa-touch, nsstring

我有一个类似`@"(256) 435-8115"`or的字符串`@"256-435-81-15"`。我只需要数字（这是一个电话号码）。这可能吗？我还没有找到一种`NSString`方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T09:35:52.893

我认为有更简单的方法：

```
-(NSString*)getNumbersFromString:(NSString*)String{
    NSArray* Array = [String componentsSeparatedByCharactersInSet:
                      [[NSCharacterSet decimalDigitCharacterSet] invertedSet]];
    NSString* returnString = [Array componentsJoinedByString:@""];

    return (returnString);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:57:07.693

**输入：**

```
NSString *stringWithPhoneNumber=@"(256) 435-8115";

NSArray *plainNumbersArray= 

[stringWithPhoneNumber componentsSeparatedByCharactersInSet:

[[NSCharacterSet decimalDigitCharacterSet]invertedSet]];

NSString *plainNumbers = [plainNumbersArray componentsJoinedByString:@""];

NSLog(@"plain number is : %@",plainNumbers); 
```

**输出：** 普通号码是：2564358115

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:20:17.897

您可以使用`stringByReplacingOccurrencesOfString: withString:`删除不需要的字符，`@"("`例如`@""`

# ios - 如何在 Xcode 中访问外部数据库文件

> ID：10548604
> 
> 赞同：1
> 
> 时间：2012-05-11T09:12:14.157
> 
> 标签：ios, sqlite

我有一个已经从其他应用程序生成的 .sqlite 文件。现在我想将该 .sqlite 文件包含到 Xcode 中，并希望将该数据用于我的（另一个）IOS 应用程序。在 android 中我们可以指定 db 文件路径。我怎样才能在IOS中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:17:14.620

在 iOS 中，您不能使用其他应用程序的数据。实际上，您的应用程序在 snadbox 中运行，您无法访问该沙箱之外的任何内容。

# sql-server - 使用 sql 按星期几对销售数量和销售数据进行分组

> ID：10548611
> 
> 赞同：1
> 
> 时间：2012-05-11T09:12:41.927
> 
> 标签：sql-server, sql-server-2008, pivot

数据库：SQL Server 2008

我需要制作一份销售报告，将销售数据分组到一周中的几天，例如；

```
Product          Mon  Tues  Wed Thurs Friday Sat Sunday   Total

Product 1        5    2     0   4     3      2   1        17
Product 2        2    1     4   3     1      1   1        13 
```

我有两个连接表 tbl_orders（主表保存订单号、订单状态等），tbl_orderitems（表保存项目信息、数量、价格、产品等）。

日期字段是 dbo.tbl_orders.dte_order_stamp

连接表的结构；

```
SELECT 
  dbo.tbl_orders.uid_orders,
  dbo.tbl_orders.dte_order_stamp,
  dbo.tbl_orders.txt_order_ref,
  dbo.tbl_orders.uid_order_custid,
  dbo.tbl_orders.uid_order_webid,
  dbo.tbl_orders.txt_order_status,
  dbo.tbl_orders.uid_order_addid,
  dbo.tbl_orders.mon_order_tax,
  dbo.tbl_orders.mon_order_grandtotal,
  dbo.tbl_orders.mon_order_discount,
  dbo.tbl_orders.bit_order_preorder,
  dbo.tbl_orders.int_order_deposit_percent,
  dbo.tbl_orders.mon_order_delivery,
  dbo.tbl_orders.txt_order_deltype,
  dbo.tbl_orders.txt_order_process,
  dbo.tbl_orders.txt_voucher_code,
  dbo.tbl_orders.txt_order_terms,
  dbo.tbl_orders.dte_order_paydate,
  dbo.tbl_orders.int_order_taxrate,
  dbo.tbl_orders.txt_order_googleid,
  dbo.tbl_orders.bit_order_archive,
  dbo.tbl_orderitems.uid_orderitems,
  dbo.tbl_orderitems.uid_orditems_orderid,
  dbo.tbl_orderitems.txt_orditems_pname,
  dbo.tbl_orderitems.uid_orditems_pcatid,
  dbo.tbl_orderitems.uid_orditems_psubcatid,
  dbo.tbl_orderitems.mon_orditems_pprice,
  dbo.tbl_orderitems.int_orderitems_qty,
  dbo.tbl_orderitems.txt_orditems_stype,
  dbo.tbl_orderitems.txt_orditems_pref,
  dbo.tbl_orderitems.uid_orditems_prodid
FROM
  dbo.tbl_orders
  INNER JOIN dbo.tbl_orderitems ON (dbo.tbl_orders.uid_orders = dbo.tbl_orderitems.uid_orditems_orderid) 
```

我正在使用以下语句来获取总体销售数据，我可以将其调整为按星期几分组吗？不太确定从哪里开始，我已经阅读了一些内容，`datepart`但不太确定如何实现它，或者我会更好地包装 select 语句？

```
SELECT 
        SUM(dbo.tbl_orderitems.mon_orditems_pprice) AS prodTotal,
        AVG(dbo.tbl_orderitems.mon_orditems_pprice) AS avgPrice,
        count(dbo.tbl_orderitems.uid_orditems_prodid) AS prodQty,
        dbo.tbl_orderitems.txt_orditems_pname
        FROM dbo.tbl_orderitems
        INNER JOIN dbo.tbl_orders ON (dbo.tbl_orderitems.uid_orditems_orderid = dbo.tbl_orders.uid_orders)
        WHERE dbo.tbl_orders.txt_order_status = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.sale_status#">

        GROUP BY
        dbo.tbl_orderitems.txt_orditems_pname 
        ORDER BY dbo.tbl_orderitems.txt_orditems_pname ASC 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:34:41.173

你可以使用一个`PIVOT`. 像这样：

```
SELECT
    pvt.txt_orditems_pname AS Product,
    pvt.[Monday],
    pvt.[Tuesday],
    pvt.[Wednesday],
    pvt.[Thursday],
    pvt.[Friday],
    pvt.[Saturday],
    pvt.[Sunday],
    (
        pvt.[Monday]+pvt.[Tuesday]+pvt.[Wednesday]+pvt.[Thursday]+pvt.[Friday]+
        pvt.[Saturday]+pvt.[Sunday]
    ) AS Total
FROM
    (
        SELECT
            DATENAME(WEEKDAY,dbo.tbl_orders.dte_order_stamp) AS WeekDayName,
            dbo.tbl_orderitems.mon_orditems_pprice,
            dbo.tbl_orderitems.txt_orditems_pname
        FROM dbo.tbl_orderitems
        INNER JOIN dbo.tbl_orders 
            ON (dbo.tbl_orderitems.uid_orditems_orderid = dbo.tbl_orders.uid_orders)
        WHERE 
            dbo.tbl_orders.txt_order_status = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.sale_status#">
    ) AS SourceTable
    PIVOT
    (
        SUM(mon_orditems_pprice)
        FOR WeekDayName IN([Monday],[Tuesday],[Wednesday],
                           [Thursday],[Friday],[Saturday],[Sunday])
    )
    AS pvt 
```

或者，如果您不想使用`PIVOT`. 你可以这样做：

```
SELECT
    t.txt_orditems_pname AS Product,
    t.[Monday],
    t.[Tuesday],
    t.[Wednesday],
    t.[Thursday],
    t.[Friday],
    t.[Saturday],
    t.[Sunday],
    (
        t.[Monday]+t.[Tuesday]+t.[Wednesday]+t.[Thursday]+t.[Friday]+
        t.[Saturday]+t.[Sunday]
    ) AS Total
FROM
(
    SELECT
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=7 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Sunday],
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=1 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Saturday],
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=2 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Monday],
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=3 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Tuesday],
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=4 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Wednesday],
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=5 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Thursday],
        SUM(CASE WHEN datepart(dw,dbo.tbl_orders.dte_order_stamp)=6 THEN dbo.tbl_orderitems.mon_orditems_pprice ELSE NULL END) AS [Friday],
        dbo.tbl_orderitems.txt_orditems_pname
    FROM dbo.tbl_orderitems
    INNER JOIN dbo.tbl_orders 
        ON (dbo.tbl_orderitems.uid_orditems_orderid = dbo.tbl_orders.uid_orders)
    WHERE 
        dbo.tbl_orders.txt_order_status = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.sale_status#">
    GROUP BY
        dbo.tbl_orderitems.txt_orditems_pname
) AS t 
```

# android - 如何使用自定义适配器类中的联系人填充 ListView？

> ID：10548612
> 
> 赞同：1
> 
> 时间：2012-05-11T09:12:42.253
> 
> 标签：android, android-listview, contacts

我有一个自定义适配器。在我的`getView()`中，我试图用我的联系人列表填充**“holder.contact”**，但没有成功。我确实有这种`ListView`使用联系人填充我的方法，但它破坏了我的`CheckBoxes`. 这段代码不在我的`CustomAdapter`课上：

```
public void populateContactList() {
    // Build adapter with contact entries
    Cursor cursor = getContacts();
    String[] fields = new String[] {
            ContactsContract.Data.DISPLAY_NAME       
    };

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry, cursor,
            fields, new int[] {R.id.contactEntryText});    
    lv.setAdapter(adapter);    
} // END POPULATECONTACTLIST

public Cursor getContacts()
{ 
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME        
    };

    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" +
            (false ? "0" : "1") + "'";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, selection, selectionArgs, sortOrder);
} // END GETCONTACTS 
```

但我试图在这里定义它，但没有成功（自定义适配器类）：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    View rowView = convertView;
    ViewHolder holder = null;

    if (rowView == null) {
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(
                                           Context.LAYOUT_INFLATER_SERVICE);
        // HERE I AM INFLATING LISTVIEW LAYOUT.
        rowView = inflater.inflate(R.layout.contact_entry, null, false);
        holder = new ViewHolder();
        holder.photo = (ImageView) rowView.findViewById(R.id.iv_contactPic);
        holder.contact = (TextView) rowView.findViewById(R.id.contactEntryText);
        holder.tv = (TextView) rowView.findViewById(R.id.SMSCounttext);
        holder.cb = (CheckBox) rowView.findViewById(R.id.cb_contactHistoryChk);

        rowView.setTag(holder);

    } else {
        holder = (ViewHolder) rowView.getTag();
    } 
```

有没有办法在里面应用我**的 populateContactList()**方法`getView()`？

我的构造函数看起来像这样。“元素”已被另一个文本视图使用：

```
public CustomAdapter(Context context, int type, ArrayList<String> elements){
    super(context, type, elements); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:29:04.937

你的问题有点模棱两可。您有将带有数据的 a`populateContactList()`绑定到 a并且您想在另一个自定义的方法中使用此方法（如果是这种情况，请不要这样做）？或者您想使用自己的适配器并将数据与联系人绑定到它（如果是这种情况，则使用查询的结果，，与您自己的）？`Cursor``Contacts``SimpleCursorAdapter``getView()``Adapter``cursor``Adapter`

您没有说`Adapter`您的自定义`Adapter`扩展的类型。如果它是`Cursor`based `Adapter`，事情就简单了，您可以使用`bindView`and`newView`来访问游标数据（并且您将`Cursor`from`getContacts()`在构造函数中传递（到超类））。否则，将`Cursor`您获得的数据放入`getContacts()`类似 an 的结构中，`ArrayList`并将其用作适配器的数据。（我建议使用第一个选项）。

此外，维护行布局的状态是您的工作`CheckBoxes`（这里有很多关于如何执行此操作的问题）。

编辑：

```
 ArrayList<String> names = new ArrayList<String>();
    Cursor cursor = getContacts();
    while (cursor.moveToNext()) {
         names.add(cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME )));

} 
```

**编辑：**
使用*元素* `ArrayList`并将其绑定到行：

```
 //...
    private ArrayList<String> data;

    public CustomAdapter(Context context, int type, ArrayList<String> elements){
        super(context, type, elements);
        this.data = elements;
    }

    public int getCount() {
        return data.size();  
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        ViewHolder holder = null;

        if (rowView == null) {
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(
                                               Context.LAYOUT_INFLATER_SERVICE);
            // HERE I AM INFLATING LISTVIEW LAYOUT.
            rowView = inflater.inflate(R.layout.contact_entry, parent, false); //<= use parent instead of null
            holder = new ViewHolder();
            holder.photo = (ImageView) rowView.findViewById(R.id.iv_contactPic);
            holder.contact = (TextView) rowView.findViewById(R.id.contactEntryText);
            holder.tv = (TextView) rowView.findViewById(R.id.SMSCounttext);
            holder.cb = (CheckBox) rowView.findViewById(R.id.cb_contactHistoryChk);
            rowView.setTag(holder);
        } else {
            holder = (ViewHolder) rowView.getTag();
        }
        //bind the data to the row views
        String contactName = data.get(position);
        holder.contact.setText(contactName);
        // other stuff you might do to build thw row
//... 
```

# javascript - 锚点“javascript:void(0)”导致 window.onbeforeunload 在 IE 上触发

> ID：10548614
> 
> 赞同：11
> 
> 时间：2012-05-11T09:12:47.027
> 
> 标签：javascript, internet-explorer, dom

我正在使用一个名为[Chosen](http://harvesthq.github.com/chosen/)的下拉小部件，它有一个带 href 的锚点`javascript:void(0)`。当我单击下拉菜单时，它可以工作，但在 IE 上它会触发一个`onbeforeunload`令人沮丧的新事件，因为应用程序会确认您是否要离开。显然，当您输入表单数据时，您不希望有这些问题。

有没有办法在不改变选择库的情况下摆脱这个问题？

不幸的是：

```
window.onbeforeunload = function (e) {
    console.log(window.location);
}; 
```

也不记录`javascript:void(0)`，所以我不能用它来检查目标 URL。

这种行为至少发生在 IE9 中，这就是我所关心的（不是较旧的 IE）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T09:20:08.253

我能看到的唯一解决方案是将返回添加`false`到链接的`onclick`事件处理程序中。它会告诉 IE 您不打算通过单击链接来更改页面。

```
<a href="javascript:void(0);" onclick="doSomething(); return false;">Link</a> 
```

同样可以这样写：

```
<script>
    function doSomething() {
        // do Something
        return false;
    }
</script>

<a href="javascript:void(0);" onclick="return doSomething();">Link</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-26T17:22:15.643

我知道这已经很老了……但我最近在工作中遇到了这个问题。不幸的是，我们仍然被迫支持 IE9。我们在这个项目中使用 Angular.js，当用户点击带有`data-ng-click`.

在您的示例中，您所要做的就是传递事件并在函数内阻止默认操作并阻止它冒泡。要做到这一点，你所要做的就是：

```
// Inside the HTML
{...}
<a href="javascript:void(0);" onclick="doSomething(evt);">Link</a>
{...}
<script>
    function doSomething(evt) {
        evt.preventDefault();
        evt.stopPropagation();
        // Do Something
    };
</script>
{...} 
```

在 Angular 中，我所做的一切如下：

```
// Inside the View
<a href="javascript:void(0)" data-ng-click="addStuff($event)">Add Stuff</a>

// Inside the controller
function addStuff($event) {
    $event.preventDefault();
    $event.stopPropagation();
    // Do Something
}; 
```

我希望这还不算太晚，我希望它可以帮助其他人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T09:40:12.197

我最终监听了锚点的点击事件并取消了事件以防止`onBeforeUnload`触发：

```
$chosen.find('.chzn-single').click(function() {
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T16:23:15.083

有同样的问题。刚刚发现你的问题。我的解决方案是，您需要将 onclick 属性添加到每个选择的下拉列表锚标记并调用 window.onbeforeunload = null

就我而言，我已经把

```
$(".chzn-single").attr("onclick", "window.onbeforeunload = null;"); 
```

设置选择的库后，它工作正常

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T13:41:11.627

不要为此使用href。一个简单的解决方案，只需最少的额外工作：

我更喜欢使用模拟 href 的 CSS 类，显然您将更改此类的颜色和样式以适合您的网站，但出于此目的，它是标准的蓝色下划线链接

```
<style>
    .linkSimulate
    {
        cursor: pointer;
        COLOR: blue;
        text-decoration: underline;
    }
</style> 
```

然后使用一个简单的锚

```
<a onclick = "do_save();" class ="linkSimulate">Link</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-28T10:23:14.860

即使这个问题很老，我也已经提高了@Bartosz 的答案，在@Oiva Eskola 的评论中解决了这个问题：

> 单击选定的链接元素后，这不会阻止 window.onbeforeunload 工作吗？– var thisOnClick;

下面是我正确创建 HTML`onclick`属性的解决方案，不覆盖或取消事件：

```
 var thisOnClick;

            $.each( $(' .container a '), function(){

                thisOnClick = $(this).attr('onclick');

                if ( typeof thisOnClick == 'undefined' ) {

                    $(this).attr('onclick', 'window.onbeforeunload = null;');

                } else if ( typeof thisOnClick == 'string' && thisOnClick.indexOf('window.onbeforeunload') == -1  ) {

                $(this).attr('onclick', thisOnClick + 'window.onbeforeunload = null;');
            }

        }); 
```

# jquery - Twitter Bootstrap Tabs href="#" 锚标签跳转

> ID：10548617
> 
> 赞同：12
> 
> 时间：2012-05-11T09:12:57.293
> 
> 标签：jquery, html, twitter-bootstrap

我正在使用 TW Bootstrap 的标签来浏览[客户网站](http://www.koodoocreative.co.uk/~stagesca)上的内容我已经设置了 HTML 标记以删除“数据切换”，因为我需要在点击时初始化 jScrollpane 库。

我已经完成了这项工作，但是当您单击其中一个导航图标时，页面会跳下。

我该如何避免这种情况发生？

我的标记如下：

**HTML**

```
<ul class="nav nav-tabs">
          <li class="home_tab active"><a href="#home"></a></li>
          <li class="about_tab"><a href="#about"></a></li>
          <li class="services_tab"><a href="#services"></a></li>
          <li class="cases_tab"><a href="#case_studies"></a></li>
          <li class="contact_tab"><a href="#contact_us"></a></li>
          <li class="news_tab"><a href="#news"></a></li>
</ul>

<div class="tab-content">
          <div id="home" class="tab-pane active scroll_tab">
            <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
            <h2>
              <?php the_title(); ?>
            </h2>
            <?php the_content(); ?>
            <?php endwhile; ?>
          </div>
          <div id="about" class="tab-pane">
            <?php 
                $page_id = 9; 
                $page_data = get_page( $page_id ); 
                echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
                echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. 
            ?>
          </div>
          <div id="services" class="tab-pane">
          <div class="signs">
            <ul class="nav-tabs sub_tabs">
                <li class="roll_labels"><a data-toggle="tab" href="#roll_labels"></a></li>
                <li class="sheeted_labels"><a data-toggle="tab" href="#page1"></a></li>
                <li class="fanfold_labels"><a data-toggle="tab" href="#page1"></a></li>
                <li class="printers"><a data-toggle="tab" href="#page1"></a></li>
            </ul>
          </div>
            <?php 
                $page_id = 11; 
                $page_data = get_page( $page_id ); 
                echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
            echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. 
        ?>
      </div>
      <div id="case_studies" class="tab-pane">
        <?php 
            $page_id = 13; 
            $page_data = get_page( $page_id ); 
            echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
            echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. 
        ?>
      </div>
      <div id="contact_us" class="tab-pane">
        <?php 
            $page_id = 15; 
            $page_data = get_page( $page_id ); 
            echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
            echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. 
        ?>
      </div>
      <div id="news" class="tab-pane">
        <?php 
            $page_id = 144; 
            $page_data = get_page( $page_id ); 
            echo '<h2>'. $page_data->post_title .'</h2>';// echo the title 
        ?>
        <?php
          // Load Latest Blog - Limited to 2 items                                         
          $recent = new WP_Query("tags=blog&showposts=2"); while($recent->have_posts()) : $recent->the_post();?>
      <div class="news_excerpt">
          <h3><?php the_title(); ?></h3>
          <p><?php echo limit_words(get_the_excerpt(), '40'); ?> ...</p>
          <a data-toggle="modal" href="#newsModal-<? the_ID(); ?>" id="newspopup">
                    <img src="<?php bloginfo( 'template_url' ); ?>/assets/img/content/team_read_more.png" alt="Read More" style="border:none;">
          </a>
          <div class="modal hide fade" id="newsModal-<? the_ID(); ?>">
            <div class="modal-header">
              <button data-dismiss="modal" class="close">×</button>
              <h3><?php the_title(); ?></h3>
            </div>
            <div class="modal-body">
                <p><?php the_post_thumbnail('news_image'); ?></p>
                <p><?php the_content(); ?></p>
            </div>
          </div>
          <?php endwhile; ?>
      </div>           
      </div>
      <div id="roll_labels" class="tab-pane">
        <?php 
            $page_id = 109; 
            $page_data = get_page( $page_id ); 
            echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
            echo apply_filters('the_content', $page_data->post_content); // echo the content and retain Wordpress filters such as paragraph tags. 
        ?>
      </div>
    </div> 
```

**jQuery**

```
$('.nav-tabs li a').click(function (e) {
        $(this).tab('show');
        $('.tab-content > .tab-pane.active').jScrollPane();
    }); 
```

就像我说的，如何防止页面内容“跳转”到锚点？非常感谢..

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T09:28:26.160

```
$('.nav-tabs li a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
    $('.tab-content > .tab-pane.active').jScrollPane();
}); 
```

使用`e.preventDefault()`. 它会阻止默认操作（在这种情况下，“导航”到 #）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-20T04:54:04.800

使用 data-target 而不是 href 似乎适用于 bootstrap 3 药丸和标签。如果鼠标光标由于没有 href 属性而没有改变，那么你可以添加一些 css

编辑：根据以下请求添加的代码，请注意在 href 上缺少目标并添加 data-target="#...

```
 <ul class="nav nav-tabs" >
     <li class="active"><a href="#" data-target="#tab_id_1" data-toggle="tab"> Tab Name 1</a></li>
     <li><a href="#" data-target="#tab_id_2" data-toggle="tab"> Tab Name 2 </a></li>
    </ul>
     <div class="tab-content"> 
         <div id="tab_id_1" class="tab-pane active">
              CONTENT 1
          </div>
          <div id="tab_id_2" class="tab-pane">
              CONTENT 2
          </div>
    </div> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-30T13:11:34.493

我找到了一个非常简单的解决方案。我只是在标签href中添加另一个#：

```
<ul class="nav nav-tabs">
          <li class="home_tab active"><a href="##home"></a></li>
          <li class="about_tab"><a href="##about"></a></li>
          <li class="services_tab"><a href="##services"></a></li>
          ...
</ul> 
```

我不知道这是否是最好的解决方案，但肯定是快速和简单的。在我的情况下，它适用于 Chrome 和 IE 10，对于我的要求来说已经足够了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-25T15:18:03.097

像这样定义您的选项卡链接：

`<a data-target="#step1" data-toggle="tab">`

你的标签本身是这样的：

`<div class="tab-pane" id="step1">`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-19T07:19:58.533

@paulslater19 的答案对我不起作用。但是，下面的代码做到了：

```
$('.nav-tabs li a').click( function(e) {
    history.pushState( null, null, $(this).attr('href') );
}); 
```

在 Bootstrap 3.2.0 上测试。

我从[Twitter Bootstrap 获得了这段代码：如何在单击选项卡时防止跳转](http://blog.shaunscovil.com/post/55630727782/twitter-bootstrap-how-to-prevent-jump-when-tabs-are-clic "Twitter Bootstrap：如何防止单击选项卡时跳转")。

**更新**

bootstrap 3.2.0 的完整功能：

```
$().ready(function () {
        // store the currently selected tab in the hash value
        $("ul.nav-tabs > li > a").click(function (e) {
            $(this).tab('show');
            history.pushState(null, null, $(e.target).attr("href"));
        });

        // on load of the page: switch to the currently selected tab
        $('ul.nav-tabs a[href="' + window.location.hash + '"]').tab('show');
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-09T22:08:02.860

@paulslater19 选择的答案对我不起作用。以下代码起到了作用：

```
<script>
  $(document).ready(function() {
    var hash = window.location.hash;
    var link = $('a');
    $('.nav-tabs > li > a').click(function (e) {
      e.preventDefault();
      hash = link.attr("href");
      window.location = hash;
    });
  })
</script> 
```

另请参阅[SO question 14185974](https://stackoverflow.com/questions/14185974/how-to-prevent-jump-on-an-anchor-click)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-23T13:13:20.197

选择的答案确实对我有用，但我也发现了另一种解决方案。只需删除 href 属性，如下例所示...

```
<ul class="nav nav-tabs">
    <li class="home_tab active"><a></a></li>
    <li class="about_tab"><a></a></li>
    <li class="services_tab"><a></a></li>
    ... 
```

由于问题似乎是 <a> 标记对 jQuery 的操作具有“优先级”，因此只需删除 href 属性就足够了。（顺便说一下，允许使用没有 href-attribute 的 <a>-tags。）

在我的情况下，最初的问题令人沮丧，因为它只显示在生产环境中而不是在开发环境中（相同的代码）。在 html 或链接资源中的页面之间找不到任何区别......无论如何，这解决了它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-23T13:59:09.690

我发现如果选项卡窗格高度不同，选项卡会跳转。

由于某种原因，我最终标准化了高度，即使在 flexbox 网格中，垂直定位也有 gremlins

```
function tabs_normalize() {
    var tabs = $('.tab-content .tab-pane'),
        heights = [],
        tallest;
    // check for tabs and create heights array
    if (tabs.length) {
        function set_heights() {
            tabs.each(function() {
                heights.push($(this).height()); 
            });
            tallest = Math.max.apply(null, heights);
            tabs.each(function() {
                $(this).css('min-height',tallest + 'px');
            });
        };
        set_heights();      
        // detect resize and rerun etc..
        $(window).on('resize orientationchange', function () {
            tallest = 0, heights.length = 0;
            tabs.each(function() {
                $(this).css('min-height','0'); 
            }); 
            set_heights();
        });
    }
}
tabs_normalize(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-27T10:27:49.373

您可以使用 `<a data-target="#home">`而不是`<a href="#home">`

请参阅此处的示例：[jsfiddle DEMO](http://jsfiddle.net/RPSmedia/K9LpL/1154/)

# javascript - jPicker - 损坏的图像

> ID：10548619
> 
> 赞同：1
> 
> 时间：2012-05-11T09:13:03.473
> 
> 标签：javascript, jquery, python, django, jquery-plugins

我正在使用 Django 和 jquery，在我的 Web 应用程序中实现 jPicker [http://www.digitalmagicpro.com/jPicker/ 。](http://www.digitalmagicpro.com/jPicker/)在这里，我在 jPicker 彩色显示器上得到了损坏的图像。当我检查服务器代码时，它显示如下

```
"GET /files/css/jPicker-1.1.6.min.css HTTP/1.1" 304 0
"GET /files/css/jPicker.css HTTP/1.1" 304 0
"GET /files/js/jquery-1.7.1.min.js HTTP/1.1" 304 0
"GET /files/js/jpicker-1.1.6.min.js HTTP/1.1" 304 0
"GET /jPicker/images/mappoint.gif HTTP/1.1" 404 3209
"GET /jPicker/images/rangearrows.gif HTTP/1.1" 404 3218
"GET /jPicker/images/Maps.png HTTP/1.1" 404 3197
"GET /jPicker/images/map-opacity.png HTTP/1.1" 404 3218
"GET /jPicker/images/Bars.png HTTP/1.1" 404 3197
"GET /jPicker/images/bar-opacity.png HTTP/1.1" 404 3218
"GET /jPicker/images/AlphaBar.png HTTP/1.1" 404 3209
"GET /jPicker/images/preview-opacity.png HTTP/1.1" 404 3230
"GET /jPicker/images/NoColor.png HTTP/1.1" 404 3206 
```

那里找不到显示 404 的图像文件，但我正确链接了 css 文件夹内的**图像文件夹。**

```
/home/nirmal/try/files/css/images/
/home/nirmal/try/files/css/jPicker.css
/home/nirmal/try/files/css/jPicker-1.1.6.min.css
/home/nirmal/try/files/js/jquery-1.7.1.min.js
/home/nirmal/try/files/js/jpicker-1.1.6.min.js 
```

我的 Django 设置是

```
MEDIA_ROOT = '/home/nirmal/try/files/'
MEDIA_URL = 'http://localhost:8000/files/' 
```

我犯了什么错误导致图像出现在**jPicker/images**上而找不到？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:54:27.733

jPicker 有一个默认变量，用于说明图像文件夹的位置：

```
 $.fn.jPicker.defaults = /* jPicker defaults - you can change anything in this section (such as the clientPath to your images) without fear of breaking the program */
 {
   images:
   {
      clientPath: '/jPicker/images/', /* Path to image files */
   }
 } 
```

您应该将此默认值覆盖为`images.clientPath = '/files/css/images/'`，例如：

```
<script type="text/javascript">        
  $(document).ready(
    function()
    {
      $('#your-element').jPicker({images:{clientPath: '/files/css/images/'}});
    });
</script> 
```

另请参阅[http://www.digitalmagicpro.com/jPicker/](http://www.digitalmagicpro.com/jPicker/) 上的“设置”部分（可惜我无法链接确切的位置，但 Ctrl + F 是你的朋友）。

祝你好运，沃特

# windows - 我们传递给 MSPN 服务的消息格式是什么？

> ID：10548624
> 
> 赞同：0
> 
> 时间：2012-05-11T09:13:28.117
> 
> 标签：windows, windows-phone-7

在 Windows 7 手机推送通知的情况下，我们从云应用程序传递给 MSPN 服务的消息格式是什么？我知道它的 XML，但它应该包含哪些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:46:52.720

[有关为 Windows Phone 发送推送通知](http://msdn.microsoft.com/en-us/library/hh202945%28v=vs.92%29.aspx)的 MSDN 文章包括不同推送通知内容类型的所有详细信息和示例。

[在http://msdn.microsoft.com/en-us/library/ff402537(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff402537(v=vs.92).aspx)上还有更多关于推送通知的信息

# html - 我们可以通过关闭 IIS 服务器在我们的机器上运行简单的 html 文件吗？

> ID：10548629
> 
> 赞同：0
> 
> 时间：2012-05-11T09:13:52.390
> 
> 标签：html, iis, webserver

这是一个非常基本的问题，但想确认如果我们有一个简单的 html 文件要在浏览器上运行，我们是否需要打开 IIS 服务器或简单的 html 文件不需要任何服务器并且浏览器会处理它？

谢谢惠普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:15:53.997

不确定“运行”是什么意思，但您可以通过在浏览器中打开任何 HTML 文件在本地加载它。

所有 javascript 和 HTML 都将按预期工作，但没有服务器端代码。

如果您的链接是相对链接，它们也将按预期工作。

# c++ - 使用 boost 字符串查找最后一次出现

> ID：10548631
> 
> 赞同：0
> 
> 时间：2012-05-11T09:14:09.350
> 
> 标签：c++, string, boost

如何通过 boost 获得类似的功能

```
 int idx = md.filepath.lastIndexOf('/');                                 
      md.title = md.filepath.right(md.filepath.length() - idx -1);            
      md.title = md.title.left(md.title.length() - 4); 
```

上面的代码（基于QT）找到没有扩展名的文件名，md是一个对象，文件路径，标题是QString。我浏览了 boost 的字符串方法，例如 find_last，但它返回 iterator_range。我是新手，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:19:11.047

如果您要做的只是文件名解析，那么最好使用[`boost::filesystem::path`](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#class-path)该类。特别是以下方法：

[`path filename() const;`](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#path-filename)

[`path stem() const;`](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#path-stem)和

[`path extension() const;`](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#path-extension)

该类提供与 和 的`std::string`转换`std::wstring`。

# java - javafx 2.0 为标签添加边框

> ID：10548634
> 
> 赞同：10
> 
> 时间：2012-05-11T09:14:22.750
> 
> 标签：java, css, user-interface, javafx-2

我的 javafx 应用程序中有一个样式类为“test”的标签。我想在这个标签周围添加白色边框，所以在我尝试的 css 文件中：

```
-fx-border-width: 2;
-fx-border-color: white; 
```

但这没有用，所以我尝试添加：

```
-fx-border-style: solid; 
```

但这也不起作用，在 javafx css 参考之后我没有发现任何有用的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T09:37:33.023

你能试一下吗：

```
System.out.println(label); 
```

它应该打印类似的东西

```
Label@1858c80c[styleClass=label] 
```

在 styleClass=label ... 之后，您的 css 类是否也打印了？
或者您可以删除标签的 css 类并尝试通过以下方式直接在代码中设置标签样式：

```
label.setStyle("-fx-border-color: white;"); 
```

如果您可以看到更改，那么您可能无意中覆盖了 css 文件中的 css 类定义。核实。

# php - 生成pdf时出错

> ID：10548638
> 
> 赞同：0
> 
> 时间：2012-05-11T09:14:45.247
> 
> 标签：php, pdf

当我想生成 PDF 时，会出现此错误消息框显示：

> Can't write fo file var/www/vhosts/makeithappen.tmpsvr3.com.uk/httpdocs/survey 检查运行**PHP**的进程是否有足够的权限

# iphone - UIScrollview 中的操作表

> ID：10548639
> 
> 赞同：0
> 
> 时间：2012-05-11T09:14:47.973
> 
> 标签：iphone, ios, uiscrollview, uiactionsheet, screen-rotation

我有一个全屏 UIScrollView 来显示我的图像。并且滚动视图识别长按手势。长按滚动视图后，会显示一个操作表。如果我将操作表添加到窗口，当我旋转屏幕时它不会旋转。如果我将它添加到滚动视图中，它会在滚动视图被缩放或滚动时旋转但不是那么好。无论滚动视图的滚动和缩放如何，都可以很好地旋转操作表吗？

附言。滚动视图通过“self.view = myScrollView;”直接添加到窗口中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:29:07.717

将滚动视图添加到 rootviewcontroller 或滚动视图所在的父视图会更好并解决您的问题。

# c++ - Windows上的Qt类错误

> ID：10548646
> 
> 赞同：0
> 
> 时间：2012-05-11T09:15:14.730
> 
> 标签：c++, windows, qt

我有这个 .h 文件

```
#ifndef VISUALSETTINGS_H
#define VISUALSETTINGS_H

#include <QPair>
#include <QDataStream>

class VisualSettings
{
    public:
        VisualSettings();
        VisualSettings(QPair<int, int>, QPair<int, int>);
        QPair<int, int> getUpper();
        void setUpper(QPair<int, int>);
        QPair<int, int> getLower();
        QPair<int, int> setLower(QPair<int, int>);

    private:
        QPair<int, int> upper;
        QPair<int, int> lower;
};

QDataStream &operator<<(QDataStream &out, const VisualSettings &vs);
QDataStream &operator>>(QDataStream &in, VisualSettings &vs);

#endif // VISUALSETTINGS_H 
```

我有这个.cpp（它的一部分）

```
#include "visualsettings.h"

VisualSettings::VisualSettings()
{
    upper.first = 0;
    upper.second = 0;
    lower.first = 0;
    lower.second = 0;
}

VisualSettings::VisualSettings(QPair<int, int> u, QPair<int, int> l)
{
    upper.first = u.first;
    upper.second = u.second;
    lower.first = l.first;
    lower.second = l.second;
}

QPair<int, int> VisualSettings::getUpper()
{
   return upper;
} 
```

我正在像这样测试这个类：

```
QPair<int, int> q1(2,3);
QPair<int, int> q2(4, 5);

VisualSettings v(q1, q2);

//QPair<int, int> q3 = v.getUpper();

//cout << v.getUpper().first;// << " - " << vs.getUpper().second << endl; 
```

我得到这个构造函数的这个错误：

> main.obj:-1: 错误: LNK2019: 无法解析的外部符号“public: __thiscall VisualSettings::VisualSettings(struct QPair,struct QPair)” (??0VisualSettings@@QAE@U?$QPair@HH@@0@Z)在函数 _main 中引用

如果我在执行 vs.getUpper() 时使用 VisualSettings vs()，则会收到错误消息：

> C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\testing\main.cpp:23: error: C2228: left of '.getUpper' must have class/struct/union

我注意到即使声明一个 QList 并使用 list.at(0) 我也会得到相同的错误（必须有......）。

可能是什么问题呢？

稍后编辑@johnathon 的回答帮助了我，但我还有另一个问题。我像这样覆盖运算符 << 和 >>：

```
QDataStream &operator<<(QDataStream &out, const VisualSettings &vs)
{
    out << vs.getUpper().first << vs.getUpper().second;
    out << vs.getLower().first << vs.getLower().second;

    return out;
}

QDataStream &operator>>(QDataStream &in, const VisualSettings &vs)
{
    QPair uaux(0, 0);
    in >> uaux.first >> uaux.second;
    vs.setUpper(uaux);

    QPair laux(0, 0);
    in >> laux.first >> laux.second;
    vs.setLower(laux);

    return in;
} 
```

我收到此错误：

C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\testing\visualsettings.cpp:42: error: C2662: 'VisualSettings::getUpper' : 无法从 'const VisualSettings' 转换 'this' 指针到 'VisualSettings &' 转换失去限定符

C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\testing\visualsettings.cpp:42: 错误: C2228: '.first' 的左边必须有类/结构/联合

可能是什么问题呢？

另外我还有一个问题。如果在另一个类中我使用 VisualSettings 对象，在 .hi 中将其声明为 VisualSettings vs，在该类的构造函数中，我可以说 vs = new VisualSettings(1,2) 或 vs(1,2); 所以问题是我如何在另一个类的构造函数中调用 VisualSetting 的构造函数（如果 VisualSettigs 对象是该类的变量）？

稍后编辑：

我的程序仍然有错误，我不知道如何解决它。所以我想覆盖操作员>>

```
class VisualSettings
{
............
};

QDataStream &operator<<(QDataStream &out, const VisualSettings &vs);
QDataStream &operator>>(QDataStream &in, VisualSettings &vs); 
```

在.cpp

```
QDataStream &operator<<(QDataStream &out, const VisualSettings &vs)
{
    out << vs.getUpper().first << vs.getUpper().second;
    out << vs.getLower().first << vs.getLower().second;

    return out;
} 
```

我收到此错误：

C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Release..\testing\visualsettings.cpp:44: error: C2662: 'VisualSettings::getLower' : 无法从 'const VisualSettings' 转换 'this' 指针到 'VisualSettings &' 转换丢失限定符 C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Release..\testing\visualsettings.cpp:44：错误：C2228：'.first' 左侧必须有类/结构/联合

我还有一堂课

```
class Playlist
{
................
};

bool caseArtistLessThan(const SongInfo &s1, const SongInfo &s2); 
```

在 .cpp 我有：

```
bool caseArtistLessThan(const SongInfo &s1, const SongInfo &s2)
{
    QString str1(ID3_GetArtist(&s1.getTag()));
    QString str2(ID3_GetArtist(&s2.getTag()));

    return str1 < str2;
} 
```

我得到错误：

C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Release..\testing\playlist.cpp:20: error: C2662: 'SongInfo::getTag' : 无法从 'const SongInfo' 转换 'this' 指针到 'SongInfo &' 转换丢失限定符 C:\Users\Alex\testing-build-desktop-Qt_4_8_0_for_Desktop_- *MSVC2010* _Qt_SDK__Release..\testing\playlist.cpp:20: error: C2662: 'SongInfo::getTag' : cannot convert '从 'const SongInfo' 到 'SongInfo &' 转换的 this' 指针丢失限定符

有人可以帮我解决这个问题吗？我不明白为什么它不起作用。我已经看到了很多例子，并且我已经像在那些例子中那样做了。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:44:49.633

关于第二个错误。您不能将 const 参数传递给 operator >> 因为您将对其进行修改。const 表示不允许修改反对。

其他一些注意事项：

QPair 有分配操作员，所以你不需要打电话

```
upper.first = u.first;
upper.second = u.second; 
```

改为使用

```
upper = u; 
```

还有初始化列表之类的东西，你甚至可以像这样分配它：

```
VisualSettings::VisualSettings(QPair<int, int> u, QPair<int, int> l)
    : upper(u)
    , lower(l)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:44:38.433

```
#include<visualsettings.h> 
```

将其添加到 main.cpp 的顶部

# mysql - 在 MySql 触发器中保存查询

> ID：10548654
> 
> 赞同：1
> 
> 时间：2012-05-11T09:15:44.877
> 
> 标签：mysql, database, triggers

我想保存用于删除表中一行的 mysql 查询：

例子：

```
CREATE TRIGGER `table_DEL` BEFORE DELETE ON `table`
FOR EACH ROW BEGIN 
INSERT INTO db_bk.table
SELECT *,NOW(),QUERY()
FROM db.table
WHERE table_id= OLD.table_id; 
END 
```

如您所知，我现在想如果存在一个 query() 函数或另一种方法来检索激活触发器的查询（确切的删除查询）

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:04:48.133

正如@devart 所说 - 这样的功能不存在。如果您担心谁会从您的表格中删除，则将“删除”权限限制为一个帐户。然后，您可以控制删除记录的方式和时间。

# pdf - 特定页面的 iText Pdf 标题删除

> ID：10548660
> 
> 赞同：1
> 
> 时间：2012-05-11T09:16:11.380
> 
> 标签：pdf, pdf-generation, itext

我正在使用 iText 生成 PDF，因为我正在显示页眉和页脚。现在我想删除特定页面的标题。

例如：如果我正在生成一个 50 页的 pdf，对于最后 50 页我不想显示标题，这怎么能实现？

这是我生成页脚的代码（已删除页眉部分）。

```
public class HeaderAndFooter extends PdfPageEventHelper {

public void onEndPage (PdfWriter writer, Document document) {
    Rectangle rect = writer.getBoxSize("art");
    switch(writer.getPageNumber() % 2) {
    case 0:

    case 1:
        ColumnText.showTextAligned(writer.getDirectContent(),
                Element.ALIGN_CENTER, new Phrase(String.format("%d", writer.getPageNumber())),
                300f, 62f, 0);
        break;
    }

} 
```

}

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:33:32.037

您可以使用 2-pass 方法：

*   第一遍：生成不带标题的 PDF 文件

*   第二遍：在除最后一页之外的所有页面上标记页眉

看看这个取自 iText 书的例子。你只需要通过 N-1 的第一页来调整第二遍：

```
int n = reader.getNumberOfPages() - 1; 
```

代替

```
int n = reader.getNumberOfPages(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T09:40:44.297

我也需要这样做。我想分享我是如何解决这个问题的。

想法是，为了自动生成页眉页脚，我们在*PDFWriter*上设置页面事件，如：

```
HeaderAndFooter event= new HeaderAndFooter(); //HeaderAndFooter is the implementation of PdfPageEventHelper class
writer.setPageEvent(event);// writer is the instance of PDFWriter 
```

所以，在最后一页的内容之前，我们可以去掉事件：

```
 event=null;
 writer.setPageEvent(event); 
```

它对我有用，没有任何错误或异常。

# javascript - 如何在jsp中使用javascript将图像添加到下拉列表

> ID：10548662
> 
> 赞同：0
> 
> 时间：2012-05-11T09:16:12.797
> 
> 标签：javascript, image, jsp, drop-down-menu

我在会话对象中设置少数国家列表的名称。我需要使用此列表在我的 JSP 中填充一个下拉列表，并在选择选项中的每个国家名称之前动态添加标志图像。下面的代码不起作用：

```
 <select id="refSelect" onChange="refreshRefList();" name='refSelect'>
     <c:forEach var='flag' items="${sessionScope.flagList}">
      <option value="${flag}">
        <img src="./images/${flag}.PNG"/> <c:out value="${flag}" />
      </option>
     </c:forEach>
    </select> 
```

我也尝试使用下面的链接使用 CSS 来实现这一点，但会话列表失败并且仅适用于 Firefox 浏览器：

*   [如何在选择列表中添加图像](https://stackoverflow.com/questions/2965971/how-to-add-a-images-in-select-list)

似乎正常的默认下拉控件不支持图像。任何人都可以帮助我使用 Javascript/CSS/Custom taglib 来实现这一点。我不想在我的代码中使用 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:00:40.823

你可以试试**[JavaScript 图像组合框](http://www.marghoobsuleman.com/jquery-image-dropdown)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:01:40.170

添加一个文本框，

创建一个

```
<ul id="country_dropdown"><li><img src="urimage.png"/>Country</li>...</ul> 
```

专注于文本框，显示 country_dropdown，模糊或单击 li 隐藏 ul。

不需要 jquery 来实现这一点。

也使用 div 而不是文本框并将值保持为隐藏。

# php - 在 Curl 中通过 id 或 Name 获取元素

> ID：10548664
> 
> 赞同：3
> 
> 时间：2012-05-11T09:16:15.697
> 
> 标签：php, curl, element

我的目标网站包含这样的代码

```
<form>
<input type="text" name="suggest" value="www.google.com">
<input type="submit" value="submit">
</form> 
```

我使用 Curl Php 获取此页面

```
<?php
$url="http://mysite.com"; 
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
$result = curl_exec ($ch); 
echo $result;  
curl_close($ch);
?> 
```

如何使用 id 或 name 获取元素值？例如，输入名称 =“建议”中的“www.google.com”。谢谢你帮助我。

我不能将此代码用于这样的远程：

```
<?php
require 'Path/QueryPath.php';
qp('http://hipfile.com/bbgfom5ej9tm/zakhme_shaneie_haava_dvdrip.wmv.html/')- 
```

> find('[password="login"]')->writeHTML(); ?>

并返回此错误

> [致命错误：在http://hipfile.com/bbgfom5ej9tm/zakhme_shaneie_haava_dvdrip.wmv.html/](http://hipfile.com/bbgfom5ej9tm/zakhme_shaneie_haava_dvdrip.wmv.html/)中预期带有消息 'DOMDocument::load() [domdocument.load]: AttValue:" 的未捕获异常 'QueryPathParseException'，行：18 (C:\xampplite\htdocs\test1\Path\QueryPath.php:2106)' 在 C:\xampplite\htdocs\test1\Path\QueryPath.php:2346 堆栈跟踪：#0 [内部函数]： QueryPathParseException::initializeFromError(2, 'DOMDocument::lo...', 'C:\xampplite\ht...', 2106, Array) #1 C:\xampplite\htdocs\test1\Path\QueryPath.php( 2106): DOMDocument->load('http://hipfile....', 0) #2 C:\xampplite\htdocs\test1\Path\QueryPath.php(179): QueryPath->parseXMLFile('http: //hipfile....', NULL, NULL) #3 C:\xampplite\htdocs\test1\Path\QueryPath.php(23): QueryPath->__construct('http://hipfile....', NULL, Array) #4 C:\xampplite\htdocs\test1\index.php(3): qp('http://hipfile....') #5 {main} throw in C:\xampplite\htdocs\第 2346 行的 test1\Path\QueryPath.php

可以帮我？我使用了两个 DOM 和 simplehtmldom 但不适合我。它仅适用于本地页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:19:43.417

您必须使用 DOM 解析器。最近我一直在使用查询路径：http: [//querypath.org/](http://querypath.org/)

```
qp($result)->find('[name="name"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:44:57.497

试试这个

```
<?php

$url="http://mysite.com"; 
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
$result = curl_exec ($ch); 
echo $result;  
curl_close($ch);

// include simple_html_dom class here
// which can be downloaded from http://simplehtmldom.sourceforge.net/

$oDom = new simple_html_dom();
$oDom->load($result);
$textFieldValue = $oDom->find('[name="suggest"]',0)->value;
echo $textFieldValue; // will return www.google.com

?> 
```

# flash - 将 Adob e Flash CS5 文件转换为 Adob e Flash CS3

> ID：10548665
> 
> 赞同：2
> 
> 时间：2012-05-11T09:16:20.383
> 
> 标签：flash, flash-cs5, flash-cs4

我有一个名为 bannerCS5.fla 的 Adob​​e Flash CS5 文件，如何将其转换为 Adob​​e Flash CS3 文件？当我用谷歌搜索时，我听说这是不可能的。我尝试了以下替代方案，

1.  安装 Adob​​e Flash CS5 30 天试用
2.  试图将bannerCS5.fla 保存为Adobe Flash CS4 文件。但我不能那样做。应用程序现在退出。

如果我可以做第二步，我会在 Flash CS4 中打开 CS4 文件，然后使用“另存为”Flash CS3 文档。

任何解决方法？

# ios - UITableView cellForRowAtIndexPath 为每一行调用多次

> ID：10548667
> 
> 赞同：8
> 
> 时间：2012-05-11T09:16:26.590
> 
> 标签：ios, uitableview

如果我有一个包含 4 行的 UITableView，那么当我导航到该视图时，不应该调用 4 次 cellForRowAtIndexPath 方法吗？我发现它被多次调用，例如，如果有 4 行，当我深入 UITable 视图时调用 8 次，然后当我导航回同一个 UITableView 时调用 12 次。

我只是误解了这种方法的工作原理吗？我认为应该为显示的每一行调用一次（不涉及滚动，因为表格视图的内容很容易适合我的 iPad 屏幕）。

我可能应该注意到 UITableView 包含在 iPad 上 UISplitViewController 的 MasterViewController 中。

编辑：我遇到的真正问题是应用以下代码的方式不一致：

```
if (selectedNavItem.folder.isAssignedToUser != [NSNumber numberWithInt:1]) 
        {
            NSLog(@"%@", cell.textLabel.text);
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.userInteractionEnabled = NO;
            cell.textLabel.enabled = NO;
            cell.detailTextLabel.text = @"Access not granted";
            cell.detailTextLabel.enabled = NO;
        } 
```

当我第一次“向下钻取”到导航堆栈的特定级别时，事情会按应有的方式工作。但后来，如果我向上或向下导航，我发现各种行被错误地处理，即当它们应该启用时它们最终被禁用。这导致我设置了一个断点和一些日志记录代码，试图找出发生了什么。我发现上面的代码被调用的次数多于行数 - 而我记录的 cell.textLabel.text 值没有意义 - 同一行的值被多次记录 - 而其他行则没有完全被记录。

编辑：根据要求提供一些代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"FolderCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    // Set up the fetched results controller.
    // Create the fetch request for the entity.
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"NavItem" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort keys as appropriate.
    NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"sortOrder" ascending:YES];
    NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor1, sortDescriptor2, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.
        managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}   

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NavItem *selectedNavItem = (NavItem *)managedObject;
    cell.textLabel.text = [[managedObject valueForKey:@"name"] description];
    cell.detailTextLabel.text = @"";

    if (selectedNavItem.folder != nil) {
        cell.imageView.image = [UIImage imageNamed:@"Folder.png"];

        //NSLog(@"%@", selectedNavItem.folder.isAssignedToUser);

        if (selectedNavItem.folder.isAssignedToUser != [NSNumber numberWithInt:1]) 
        {
            NSLog(@"%@", cell.textLabel.text);
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.userInteractionEnabled = NO;
            cell.textLabel.enabled = NO;
            cell.detailTextLabel.text = @"Access not granted";
            cell.detailTextLabel.enabled = NO;
        }
    }
    else if (selectedNavItem.document != nil) {
        cell.detailTextLabel.text  = [[selectedNavItem.document valueForKey:@"itemDescription"] description];

        if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"pdf"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"pdf.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"doc"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"docx"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"Word-32x32.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"xls"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"xlsx"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"Excel-32x32.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"ppt"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"pps"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"Powerpoint-32x32.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"mp3"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"wav"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"65-note.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"mp4"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"mov"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"46-movie-2.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"ibooks"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"ibooks-icon.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"png"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"bmp"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"jpg"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"jpeg"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"tif"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"tiff"] || [[selectedNavItem.document.fileName pathExtension] isEqualToString:@"gif"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"41-picture-frame.png"];
        }
        else 
        {
            cell.imageView.image = [UIImage imageNamed:@"179-notepad.png"];
        }

    }
    else if (selectedNavItem.attachment != nil) {
        cell.detailTextLabel.text  = [[selectedNavItem.attachment valueForKey:@"itemDescription"] description];

        if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"pdf"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"pdf.png"];
        }
        else if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"doc"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"docx"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"Word-32x32.png"];
        }
        else if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"xls"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"xlsx"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"Excel-32x32.png"];
        }
        else if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"ppt"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"pps"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"Powerpoint-32x32.png"];
        }
        else if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"mp3"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"65-note.png"];
        }
        else if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"mp4"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"46-movie-2.png"];
        }
        else if ([[selectedNavItem.document.fileName pathExtension] isEqualToString:@"ibooks"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"ibooks-icon.png"];
        }
        else if ([[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"png"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"bmp"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"jpg"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"jpeg"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"tif"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"tiff"] || [[selectedNavItem.attachment.fileName pathExtension] isEqualToString:@"gif"]) 
        {
            cell.imageView.image = [UIImage imageNamed:@"41-picture-frame.png"];
        }
        else 
        {
            cell.imageView.image = [UIImage imageNamed:@"179-notepad.png"];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T09:25:27.563

当单元格出现时调用该方法，因此每当出现单元格时，都会调用该方法。此外，细胞被重复使用。因此，即使特定单元格的方法被调用一次，它也可能在该单元格消失然后再次出现时再次调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T15:17:41.150

您很可能是从其他方法调用的：

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath]; 
```

外部的 self.tableView`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`将调用 cellForRowAtIndexPath 两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T07:51:10.213

迅速

```
DispatchQueue.main.async {
   //Add selection in main queue
} 
```

这将解决问题。

# c# - Winform App - 网页交互

> ID：10548674
> 
> 赞同：6
> 
> 时间：2012-05-11T09:16:52.440
> 
> 标签：c#, html, winforms, mshtml

Windows 窗体应用程序 - 在中操作输入元素`WinForm WebBrowser`

虽然我熟悉`HttpWebResponse`/`HttpWebRequest`登录到一个网站，但我现在通过使用 mshtml 库尝试它并发现了一些奇怪的行为，我想看看其他人是否可以在这里帮助我..

我有一个带有 java 后端的 HTML 登录页面，其中包含一个`Username`字段、一个`Password`字段和一个`Button`.

逻辑非常基本，我构建了一个带有内置 webbrowser 的 winform 应用程序。在`Document_Completed`事件中，我使用以下代码输入我的设置并单击按钮。

```
private void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (webBrowser.Url.ToString() == @"MyWebPage/signin")            
    {
        HTMLDocument hdc = new HTMLDocumentClass();
        hdc = (HTMLDocument)webBrowser.Document.DomDocument;

        IHTMLElement elb = hdc.getElementById("login_button");
        IHTMLInputElement elu = (IHTMLInputElement)hdc.getElementById("username");
        IHTMLInputElement elp = (IHTMLInputElement)hdc.getElementById("password");

        try
        {
            elu.value = "MyID";
            elp.value = "MyPwd";
            elb.click();
        }
        catch { }
    }
} 
```

除了此代码非常快速且没有错误处理之外，它应该可以解决问题，而且它确实部分......

有两种情况：

*   我启动该工具，它会加载网页。

    *   该工具会正确填充 UserID 字段和 Password 字段
    *   该工具无法单击按钮
*   我手动单击按钮，我已登录，我单击注销，我回到登录页面

    *   我立即再次登录，工具输入信息
    *   该工具也会立即单击该按钮。

有没有人可以解释我为什么会发生这种情况以及我如何使用当前设置解决这个问题（因此不使用`HttpWebRequest`）。我看不出在启动时加载页面或在注销后被重定向之间的区别，但显然那里有区别，或者我做错了什么。

非常感谢您对此事的任何反馈。

谢谢，凯文

## 编辑：

我`Button`在我的 Windows 窗体中添加了一个与下面相同的后端代码，以便单击网页上的按钮，这非常有效。

我在事件中触发了单击此按钮，`webBrowser_Completed`但它不起作用。出于某种原因，我添加到`webBrowser_DocumentCompleted`事件中的所有内容都不允许我触发`WebBrowser`控件中按钮的单击事件。一旦整个事件完成，如果我尝试触发它，它会起作用，但我想自动化这个..有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:49:59.620

这个怎么样 ：

```
HtmlElement button = webBrowser.HtmlDocument.GetElementById("login_button");
button.InvokeMember("click"); 
```

它适用于我的程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T13:43:04.077

这可能是一个长镜头，而不是最优雅的解决方法，但是让后台工作人员在您的*DocumentCompleted*事件中运行一秒钟，然后触发您从其单独线程中单击的按钮。这可能会让这个自动化。由于这将从不同的线程运行，请记住您可能必须调用某些控件，因此这可能是此解决方法的另一个缺点。

如果这不起作用，那么正如 Regfor 之前建议的那样，Watin.org 可以帮助您。

# android - 如何减少 Google Map API Android 的 3G 数据使用量

> ID：10548675
> 
> 赞同：3
> 
> 时间：2012-05-11T09:16:54.277
> 
> 标签：android, google-maps, 3g

我正在开发一个需要用户位置并将其显示在我的应用程序中嵌入的谷歌地图上的应用程序。当 wifi 连接时，我的应用程序运行良好，而我的 3G 速度不够快，无法通过 Google Map API 支持如此多的数据流，因此无法显示地图。

事实上，我只需要显示地图，而不是谷歌可能提供的所有交通、卫星和其他信息。由于使用条款和其他限制，似乎无法将 Google 地图存储在手机中。在使用 API 时，是否有任何方法可以控制 Google 发送给我的数据？或者我应该使用其他地图源吗？

# jetty - jetty-maven-plugin 源代码存储库

> ID：10548677
> 
> 赞同：5
> 
> 时间：2012-05-11T09:17:07.120
> 
> 标签：jetty, maven-jetty-plugin

有人知道在哪里可以找到 Jetty Maven 插件的源代码存储库吗？[如果可用，我正在搜索真正的源代码存储库，而不是在此处](http://search.maven.org/remotecontent?filepath=org/mortbay/jetty/jetty-maven-plugin/8.1.3.v20120416/jetty-maven-plugin-8.1.3.v20120416-sources.jar)可用的 *-sources.jar 文件。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T14:09:25.790

码头@Eclipse：(org.eclipse.jetty.*)

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/)

码头@Codehaus：（org.mortbay.jetty.*）

[https://fisheye.codehaus.org/browse/jetty-project](https://fisheye.codehaus.org/browse/jetty-project)

（由于 codehaus git http 浏览中断并且出于报告原因 atm 已镜像）

[https://github.com/jmcc0nn3ll/jetty-project](https://github.com/jmcc0nn3ll/jetty-project)

Jetty@Github：（docbook文档工作，一些测试项目之类的）

[https://github.com/jetty-project](https://github.com/jetty-project)

Jetty 快照存储库：（每晚更新）

[https://oss.sonatype.org/content/groups/jetty/](https://oss.sonatype.org/content/groups/jetty/)

所有码头的 CIA 汇总提交提要：

[http://cia.vc/stats/project/jetty/](http://cia.vc/stats/project/jetty/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:22:14.953

最后找到它[https://fisheye.codehaus.org/browse/jetty-project/jetty-maven-plugin](https://fisheye.codehaus.org/browse/jetty-project/jetty-maven-plugin)和这里 git://git.codehaus.org/jetty-project.git

# c# - 来自 Interviewstreet.com 的不友好数字

> ID：10548681
> 
> 赞同：-1
> 
> 时间：2012-05-11T09:17:33.717
> 
> 标签：c#

问题如下：

```
There is one friendly number and N unfriendly numbers. We want to find how many numbers are there which exactly divide the friendly number, but does not divide any of the unfriendly numbers.

Input Format:
The first line of input contains two numbers N and K seperated by spaces. N is the number of unfriendly numbers, K is the friendly number.
The second line of input contains N space separated unfriendly numbers.

Output Format:
Output the answer in a single line.

Constraints:
1 <= N <= 10^6
1 <= K <= 10^13
1 <= unfriendly numbers <= 10^18

Sample Input:
8 16
2 5 7 4 3 8 3 18

Sample Output:
1

Explanation :
Divisors of the given friendly number 16, are { 1, 2, 4, 8, 16 } and the unfriendly numbers are {2, 5, 7, 4, 3, 8, 3, 18}. Now 1 divides all unfriendly numbers, 2 divide 2, 4 divide 4, 8 divide 8 but 16 divides none of them. So only one number exists which divide the friendly number but does not divide any of the unfriendly numbers. So the answer is 1\. 
```

以下是我的 C# 解决方案：

```
class Solution
{
    static void Main(string[] args)
    {
        string firstLine = Console.ReadLine();
        string[] firstLineItems = firstLine.Split(' ');

        ulong friendlyNum = Convert.ToUInt64(firstLineItems[1]);
        int noOfunf = Convert.ToInt32(firstLineItems[0]);

        string secondLine = Console.ReadLine();
        string[] secondLineItems = secondLine.Split(' ');

        List<ulong> unfriendlyNumbersArray = new List<ulong>(noOfunf);

        foreach (string str in secondLineItems)
        {
            unfriendlyNumbersArray.Add(Convert.ToUInt64(str));
        }

        List<ulong> divisors = CalculateDivisors(friendlyNum);

        Console.WriteLine(finalCall(divisors, unfriendlyNumbersArray));
    }

    private static List<ulong> CalculateDivisors(ulong number)
    {
        List<ulong> factors = new List<ulong>();

        for (ulong factor = 1; factor * factor <= number; ++factor)
        {
            if (number % factor == 0)
            {
                factors.Add(factor);
                if (factor * factor != number)
                {
                    factors.Add(number / factor);
                }
            }
        }
        return factors;
    }

    private static long finalCall(List<ulong> divisors, List<ulong> unfriendlyNumbersArray)
    {
        long output = 0;
        var unfriendlyNumbers = (from i in unfriendlyNumbersArray select i).Distinct();

        foreach (ulong divisor in divisors)
        {
            var test = unfriendlyNumbers.Where(number => number % divisor == 0).ToList();
            output += (test.Count == 0) ? 1 : 0;
        }
        return output;
    }
} 
```

只有前 3 个测试用例通过。第 4 个被杀，第 5 个和第 6 个给我解析字符串的异常。

第 5 次和第 6 次除外：

```
Unhandled Exception: System.FormatException: Input string was not in the correct format
    at System.UInt64.Parse (System.String s) [0x00000] in :0 
    at System.Convert.ToUInt64 (System.String value) [0x00000] in :0 
    at Solution.Main (System.String[] args) [0x00000] in :0 
    [ERROR] FATAL UNHANDLED EXCEPTION: System.FormatException: Input string was not in the     correct format
    at System.UInt64.Parse (System.String s) [0x00000] in :0 
    at System.Convert.ToUInt64 (System.String value) [0x00000] in :0 
    at Solution.Main (System.String[] args) [0x00000] in :0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:28:47.187

您应该使用`Split`带`StringSplitOptions`参数并通过的重载`RemoveEmptyEntries`。否则，如果输入被多个空格分隔，则数组包含空字符串，无法解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:50:02.443

我能够根据以下[链接](http://bababadalgharaghtakamminarronnkonnbro.blogspot.in/2012/05/numbers-are-friends-not-food.html)解决此问题。上面链接的作者对数论的深入理解让我感到非常惊讶。上面的算法没有错。只是它不会在 5 秒内解决问题，这是我们遵守的约束。

# .net - 如何为 crm 2011 创建一个使用早期绑定代码连接到两个不同服务上下文的 .net 解决方案

> ID：10548683
> 
> 赞同：4
> 
> 时间：2012-05-11T09:17:35.077
> 
> 标签：.net, dynamics-crm-2011

我想创建一个 VS 2010 C# 控制台应用程序，它连接到两个（或更多）不同的 CRM 2011 服务上下文/租户。我希望能够用另一个数据更新数据。

如果我使用 crmsvcutil 创建两个不同的早期绑定类，则会出现编译器错误：“重复 'Microsoft.Xrm.Sdk.Client.ProxyTypesAssemblyAttribute' 属性”

如果我连接这两个文件，它会编译，但会出现运行时错误：“具有名称帐户的代理类型已由多种类型定义”。

如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:10:18.000

为每组早期绑定的类创建一个单独的库项目，并在每个库中放置一个 crmsvcutil 文件（根据需要添加程序集引用）。现在，在控制台应用程序上，添加对库的引用。

假设我创建了两个编译为 Proxy1.dll 和 Proxy2.dll 的库项目。每个库的根命名空间是 Proxy1 和 Proxy2。在 ConsoleApp.exe 中，我添加了两个引用和以下内容：

```
var url1 = new Uri(".../XRMServices/2011/Organization.svc");
var proxy1 = new OrganizationServiceProxy(url1, null, null, null);
proxy1.EnableProxyTypes(Assembly.Load("Proxy1")); // Proxy1.dll

var url2 = new Uri(".../XRMServices/2011/Organization.svc");
var proxy2 = new OrganizationServiceProxy(url2, null, null, null);
proxy2.EnableProxyTypes(Assembly.Load("Proxy2")); // Proxy2.dll

using (var context1 = new Proxy1.Proxy1ServiceContext(proxy1))
using (var context2 = new Proxy2.Proxy2ServiceContext(proxy2))
{
  var accounts1 = context1.AccountSet;
  var accounts2 = context2.AccountSet;

  foreach (var account in accounts1) Console.WriteLine("1: {0}: {1}", account.GetType(), account.Id);
  foreach (var account in accounts2) Console.WriteLine("2: {0}: {1}", account.GetType(), account.Id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T14:03:32.313

您可以实现 ICustomizeCodeDomService 接口并禁用 ProxyTypesAssemblyAttribute 的自动生成。只要它们位于不同的命名空间中，您就会拥有一个 dll，而不必分别加载两个。

** 更新 **

这行不通。请参阅[https://stackoverflow.com/a/24785440/227436](https://stackoverflow.com/a/24785440/227436)

# backbone.js - ToJSON on Backbone.Collection#where?

> ID：10548685
> 
> 赞同：6
> 
> 时间：2012-05-11T09:17:38.180
> 
> 标签：backbone.js

我不知道为什么，但我无法让它工作。

```
var friends = new Backbone.Collection([
  {name: "Athos",      job: "Musketeer"},
  {name: "Porthos",    job: "Musketeer"},
  {name: "Aramis",     job: "Musketeer"},
  {name: "d'Artagnan", job: "Guard"},
]);

friends.where({job: "Musketeer"}).toJSON() 
```

我得到`Uncaught TypeError: Object [object Object] has no method 'toJSON'`。

我做错了什么，如何将过滤后的集合转换为 JSON？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T09:48:17.993

该`Underscore.where`方法返回的`Array`不是 a`Backbone.Collection`所以它没有`toJSON`定义方法。

所以你可以做两件事：

## 迭代元素并映射结果：

```
var result = friends.where({job: "Musketeer"});
_.map( result, function( model ){ return model.toJSON(); } ); 
```

[jsFiddle 代码](http://jsfiddle.net/fguillen/wbBX9)

## 实现一个返回正确 Backbone.Collection 的 Collection 搜索器方法：

```
var Friends = Backbone.Collection.extend({
    search: function( opts ){
        var result = this.where( opts );
        var resultCollection = new Friends( result );

        return resultCollection;
    }
});

var myFriends = new Friends([
  {name: "Athos",      job: "Musketeer"},
  {name: "Porthos",    job: "Musketeer"},
  {name: "Aramis",     job: "Musketeer"},
  {name: "d'Artagnan", job: "Guard"},
]);

myFriends.search({ job: "Musketeer" }).toJSON();​ 
```

[jsFiddle 代码](http://jsfiddle.net/fguillen/ut89Q)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T09:37:21.663

`toJSON`是一个令人困惑的方法名称：[http ://documentcloud.github.com/backbone/#Collection-toJSON](http://documentcloud.github.com/backbone/#Collection-toJSON)

> **toJSON** `collection.toJSON()`
> 
> 返回一个数组，其中包含集合中每个模型的属性哈希。这可用于序列化和>持久化整个集合。这个方法的名字有点混乱，因为它符合 JavaScript 的 >JSON API。

如果要将集合转换为 JSON 字符串，请使用`JSON.stringify`

```
var friends = new Backbone.Collection([
  {name: "Athos",      job: "Musketeer"},
  {name: "Porthos",    job: "Musketeer"},
  {name: "Aramis",     job: "Musketeer"},
  {name: "d'Artagnan", job: "Guard"},
]);

JSON.stringify( friends.where({job: "Musketeer"}) ); 
```

请注意，`where`返回一个数组，而不是 Backbone 集合，您必须构建一个新集合才能使用该`toJSON`方法。

# javascript - 在 XForms 中，使用 Orbeon，如何通过 jQuery 更新 XML 实例？

> ID：10548695
> 
> 赞同：2
> 
> 时间：2012-05-11T09:18:52.407
> 
> 标签：javascript, jquery, xml, orbeon, xforms

当用户单击 span 元素并从 jQuery 更新当前 XML 实例时，我想在 JavaScript 中执行一些逻辑：

（我在网上看到了 2 个类似的问题，但他们从未得到回答！）

XForms：

```
<xhtml:span class="buttonPlusOne" id="plusVat">+</xhtml:span>
<xf:output ref="instance('submitted_instance')/TotVATAmnt"></xf:output>
<xf:input id="changeVatTotal" ref="instance('submitted_instance')/TotVATAmnt"></xf:input> 
```

JavaScript：

```
$('span.buttonPlusOne').on('click', function () {
    // do some logic and increment value for 0.01
    orbeonElId = $(this).siblings('#changeVatTotal').children('input').attr('id');
    // alert(orbeonElId) produces right id (changeVatTotal$xforms-input-1)
    // alert(newValue) produces 0.02 (for example)
    ORBEON.xforms.Document.setValue(orbeonElId, newValue);
}); 
```

我可以看到 Orbeon 发布数据（Firebug），但 XML 实例没有得到更新（输入没有更新输出——即使它们共享相同的“ref”属性）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:58:31.533

我假设您将 html 元素的 id 与该元素的 XForms id（`id`属性）混为一谈`xf:input`。

Orbeon 文档[显示了一个示例](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-javascript-integration#TOC-Getting-and-Setting-Controls-Value-)：`ORBEON.xforms.Document.setValue()`函数调用中使用的 id 是（服务器端）XForms 元素的 id。因此，在您的示例中，它是`changeVatTotal`，而不是（客户端）html 输入元素的 id `changeVatTotal$xforms-input-1`。这就是为什么在 firebug 中显示一个对 XForms 实例没有影响的请求的原因：服务器端 XForms 引擎找不到`xf:input`具有 id 的元素`changeVatTotal$xforms-input-1`，因此它不知道如何处理该请求。

这也意味着，您（通常）不需要计算目标元素的 id，而只需使用 xf:input 的“普通”XForms id 属性值。

**或者：**

是否可以在 XForms 中完全处理“加号”按钮？您可以使用[`xforms:trigger`控件](http://www.w3.org/TR/2009/REC-xforms-20091020/#ui-trigger)并包含[`xforms:setvalue`](http://www.w3.org/TR/2009/REC-xforms-20091020/#action-setvalue)对`DOMActivate`事件的操作：

```
<xf:trigger>
    <xf:label>+</xf:label>
    <xf:setvalue
        ev:event="DOMActivate"
        ref="instance('submitted_instance')/TotVATAmnt"
        value="0.01 + instance('submitted_instance')/TotVATAmnt" />
    <.... more actions ...>
</xf:trigger> 
```

我认为这个解决方案会比在客户端和服务器端做一些工作更稳定。

# android - 意图传递的视图翻转器

> ID：10548697
> 
> 赞同：1
> 
> 时间：2012-05-11T09:19:08.333
> 
> 标签：android

我可以在视图脚蹼中传递意图吗？我在同一页面中使用 2 个 vlipper 并且都加载了不同的内容，但所有数据的活动都相同？

```
//ViewFlipper vf1=(ViewFlipper)findViewById(R.id.viewFlipper1);
ViewFlipper vf2=(ViewFlipper)findViewById(R.id.viewFlipper2);

LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
if(ViewFlipper==vf1){
    View v1 = inflater.inflate(R.layout.branchlist, null);
    View v2 = inflater.inflate(R.layout.year_list, null);
    View v3 = inflater.inflate(R.layout.semester_list, null);
    vf1.addView(v1);
    vf1.addView(v2);
    vf1.addView(v3);
    vf1.showNext();
    vf1.showPrevious();
}
if(ViewFlipper==vf2){
    View v1 = inflater.inflate(R.layout.branchlist, null);
    View v2 = inflater.inflate(R.layout.semester_list, null);
    vf2.addView(v1);
    vf2.addView(v2);

    vf2.showNext();
    vf2.showPrevious();
} 
```

# android - Eclipse 将不再工作

> ID：10548700
> 
> 赞同：0
> 
> 时间：2012-05-11T09:19:12.747
> 
> 标签：android, eclipse

从今天早上开始，如果我尝试使用自动完成代码编写以下方法，Eclipse 不会给出任何建议。例如，如果我写：

if(view. ..... 然后自动完成代码不会出现，如果我点击 CTRL + SPACE Eclipse 显示错误：该方法必须覆盖超类方法

我的 JRE 已经是 1.6，所以我不知道该怎么办。

有什么帮助吗？

```
 mAdapter.setViewBinder(new ViewBinder() {

        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

            final long id = cursor.getLong(cursor.getColumnIndex("_id"));

            if (view.getId() == R.id.checkBox1) {
                CheckBox v = (CheckBox) view;
                v.setOnCheckedChangeListener(RecordsList.this);
                v.setTag(id);
                if (selectedRows.contains(String.valueOf(id))) {
                    v.setChecked(true);
                } else {
                    v.setChecked(false);
                }

                return true;
            } 
```

}

![在此处输入图像描述](../Images/949d7977d3098ced16542a540fcade03.png)

如果我使用，就会发生这种情况：

```
mAdapter.setViewBinder(new ViewBinder() {

@Override
public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
    v
    return false;
} 
```

});

但如果我使用以下方式，工作正常：

```
 mAdapter.setViewBinder(ViewBinder);
  private ViewBinder ViewBinder = new ViewBinder() {
    @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:46:52.757

最坏的情况，删除 eclipse 项目并重新导入它。如果 JDT 缓存损坏，它将被重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:35:05.147

去

```
Window - > Preferences -> Java -> Editor -> Content Assist 
```

检查是否一切正常

```
Window - > Preferences -> General -> Keys 
```

键入“Content Assist”，从“Command”列表中选择它，并检查“Binding”是否为 Ctrl + Space

# php - 传递多个值并处理它们

> ID：10548703
> 
> 赞同：0
> 
> 时间：2012-05-11T09:19:26.403
> 
> 标签：php, jquery, forms, foreach, hidden

我有一个表单，它为列表中的每个对象添加一个隐藏字段，然后在下一页上用 foreach 拾取它。一切正常。

我的问题是我需要在该列表中添加另一个变量。到目前为止，这是日期/时间。如何让同一个 foreach 获取另一个值？

谢谢

表格：

```
 <form action="test.php" id="calendarform" method="post">
    <input type="submit" value="Export Calendar"/>
 </form> 
```

jQuery：

```
 $('#calendarform').submit(function(e) {
            var form = $(this);
            var listItems = $('.listItem'); 
            listItems.each(function(index){   //For each event do this:
                var listItem = $(this);
                $("<input type='hidden'/>").val(listItem.text()).appendTo(form).attr('name', 'listItem[' + index + ']');
                }); 
```

在响应页面上：

```
foreach($_POST['listItem'] as $key => $value){

      $eventDate = trim($value);

 } 
```

最后我希望它如何工作：

```
 foreach($_POST['listItem'] as $key => $value){

      $eventDate = trim($value);
      $eventTitle = trim($value2);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:25:54.813

如果 listItem 就像

```
<input name="listItem[0][]">date <input name="listItem[0][]">title 
<input name="listItem[1][]">date <input name="listItem[1][]">title 
```

你可以这样做：

```
foreach($_POST['listItem'] as $key => $values){
  list($eventDate, $eventTitle) = $values;
} 
```

# jsp - 如何在显示标签中使用多个操作添加、编辑、删除

> ID：10548705
> 
> 赞同：0
> 
> 时间：2012-05-11T09:19:29.487
> 
> 标签：jsp, displaytag

我正在使用显示标签来显示表格中的数据列表，它工作正常，但现在，我想添加另外三个功能（添加、编辑和删除），类似于[http://raibledesigns.com/display-edit/此表上的index.jsp](http://raibledesigns.com/display-edit/index.jsp)请检查下面的代码并建议我需要做哪些修改

```
<%
List listOfOffice = (List) request.getAttribute("listOfOffice");
if(listOfOffice != null)
{
session.setAttribute("listOfOffice ", listOfOffice );
}
%>

/*

  some code here

*/

<%
if(session.getAttribute("listOfOffice ") != null)
{
%>

<table align="center"  width="600" border="1" cellpadding="1" cellspacing="1">
<tr>    
<td valign="top" class="border" height="200">
<display:table id="tableId" name="sessionScope.listOfROOffice" cellspacing="2"   cellpadding="1" pagesize="5" requestURI="addnewrooffice.do" export="false">
<display:column title="Sr. No." style="width:5%">              
<c:out value="${tableId_rowNum}"/>
</display:column>  
<display:column property="roOfficeId" title="RO Office Id" style="width:5%"/>
<display:column property="roOfficeName" title="RO Office Name" style="width:15%"/>
</display:table>
</td>
</tr>
</table>

<%

}

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:56:59.570

把你的`<table>`里面加一个`<form>`加号里面的三个按钮。确保它们具有相同的`name`属性。

```
<input type="submit" name="btn" value="Add" />
<input type="submit" name="btn" value="Edit" />
<input type="submit" name="btn" value="Delete" /> 
```

然后，您可以在提交表单后在您的 java 文件中执行条件语句：

```
if("Add".equals(request.getParameter("btn"))){
 //do something
}else if("Edit".equals(request.getParameter("btn"))){
 //do something
}else{
 //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:58:50.563

只需添加`<form>`提交按钮添加/编辑/删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T05:32:38.873

您可以使用 javascript 函数在单击添加和编辑按钮时打开对话框。并确认删除框。

```
<display:table id="tableId" name="sessionScope.listOfROOffice" cellspacing="2"   cellpadding="1" pagesize="5" requestURI="addnewrooffice.do" export="false">
    <display:column title="Sr. No." style="width:5%">              
        <c:out value="${tableId_rowNum}"/>
    </display:column>  
    <display:column property="roOfficeId" title="RO Office Id" style="width:5%"/>
    <display:column property="roOfficeName" title="RO Office Name" style="width:15%"/>
    <display:column title="Edit">
        <a href="#" onclick="editData('${tableId.rowNum}', '${tableId.roOfficeId}', '${tableId.roOfficeName}')">Edit</a>
    </display:column>
    <display:column title="Delete">
        <a href="#" onclick="deleteData('${tableId.rowNum}')">Edit</a>
    </display:column>
</display:table> 
```

在这里我使用`editData`和`deleteData`javascript 函数。`editData`函数打开一个对话框并将数据设置到其中，`deleteData`函数打开 html 确认框，然后在 OK 按钮上将 id 发送到操作或 servlet 类。

您还可以在添加按钮上打开添加数据的对话框。

使用此方法，您可以使用单页添加、编辑、删除数据。在这里，您不需要表单操作，也不需要将数据发送到另一个页面以进行添加和编辑。

# code-coverage - NCrunch 不会将行标记为测试覆盖，但它们是

> ID：10548706
> 
> 赞同：3
> 
> 时间：2012-05-11T09:19:39.210
> 
> 标签：code-coverage, ncrunch

我刚刚开始使用 NCrunch 并且有一些类的标记显示没有覆盖，但我有测试 NCrunch 是否成功运行。

当我编辑课程（只需添加一个空格）时，标记会变绿一会儿，然后变回黑色。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T20:30:41.203

我今天发生了这种情况，只需一个简单的 VS 重启即可修复它。您还可以尝试重新同步按钮，该按钮位于 NCrunch 测试窗口左侧的第 6 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T11:16:48.700

根据描述，我认为我遇到了同样的问题。它似乎也影响覆盖率统计以及视觉标记。我在 VS2010 上运行 NCrunch 1.39.15b。重新同步和重新加载 VS2010 并没有解决它。我最终卸载了 NCrunch 并升级到 1.41.0.50，问题就消失了。这可能是 NCrunch 中的一个错误，但我不确定。无论如何，请尝试升级您的 NCrunch 安装，看看是否可行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T06:56:31.560

作为另一种选择，尝试删除项目中的*NCrunch* {SolutionName} 文件夹，为我解决了一个问题。

# javascript - 在 javascript 中围绕对象运行 3d 相机

> ID：10548708
> 
> 赞同：2
> 
> 时间：2012-05-11T09:19:42.920
> 
> 标签：javascript, math, 3d

谷歌搜索后，我还没有找到这个问题的答案，所以我要在这里尝试一下。

使用 (2d) 画布，我在 javascript 中创建了一个 3d 世界，甚至是一个可以正常工作的 3d 相机。但是，相机是“自由相机”，因此当您旋转时，相机会围绕自身旋转。

现在我想让相机围绕一个世界对象旋转，但我很难理解如何做到这一点。

我尝试了以下公式，但在我尝试旋转之前它就吓坏了......

 ~~~~```
this.x += (Math.sin(this.yd * (Math.PI / 180)) * distance);
this.z -= (Math.cos(this.yd * (Math.PI / 180)) * distance); 
```~~ 

~~**到目前为止已更新** 多亏了下面 WojtekT 提供的 anwser，我得到了以下代码，它使相机围绕对象旋转，但似乎也在放大......这可能只是我的眼睛在愚弄我，因为距离变量几乎没有变化（我认为有一个很小的四舍五入问题，但除此之外它给出了预期的结果）~~

 ~~```
this.y = (Math.sin(this.yd * (Math.PI / 180)) * distance + this.targetY);
this.z = (Math.cos(this.yd * (Math.PI / 180)) * distance + this.targetZ); 
```

this.yd 是以度为单位运行的速度。

我需要什么公式？

**编辑**：我不确定哪些代码可以帮助解决这个问题，所以这里是完整的源代码：

[http://clanpvp.com/sol](http://clanpvp.com/sol) http://clanpvp.com/js/sol/camera.js < 相机对象，这可能。

出于调试原因，触发 keyup 事件时会加载新帧。同样为了调试，目标对象是一个固定点。在屏幕中央。

箭头键移动相机，wasd 键转动相机，到目前为止只有 W 和 S 做某事，但由于上面的代码，他们做错了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:46:17.463

要使这个公式起作用，您必须有一些变量来改变每一帧。例如变量`time`：

```
time += this.yd;
this.x = (Math.sin(time * (Math.PI / 180)) * distance);
this.z = (Math.cos(time * (Math.PI / 180)) * distance); 
```

否则`Math.sin`，`Math.cos`每帧返回相同的值。基本上，要旋转某些东西，您需要提供随时间变化的角度。在这个例子中，角度是可变的`time`。

编辑：我已经在我的回答中替换`+=`了。`=`此计算为您提供正确的精确值`x`和`z`值，因此您无需进行任何增量。

编辑2：

这个公式也缺少旋转中心。正确的计算应该是这样的：

```
this.x = (Math.sin(this.yd * (Math.PI / 180)) * distance + object_looked_at.x);
this.z = (Math.cos(this.yd * (Math.PI / 180)) * distance + object_looked_at.z); 
```~~~~

# python - Python中列表中最长的元素链

> ID：10548712
> 
> 赞同：6
> 
> 时间：2012-05-11T09:19:52.857
> 
> 标签：python, longest-path

我有一个国家列表，我想拥有最长的国家路径，其中每个选择的国家必须以结束前一个元素的相同字母开头

```
nations = ['albania','andorra','austria','belarus','belgium','bosnia and herzegovina',
      'bulgaria','croatia','czech republic','denmark','estonia',  
      'finland','france','germany','greece','hungary',
      'iceland','ireland','italy','latvia','liechtenstein','lithuania','luxembourg',
      'macedonia','malta','moldova','monaco','montenegro','netherlands', 
      'norway','poland','portugal','romania','russia',  
      'san marino','serbia','slovakia','slovenia','spain','sweden', 'switzerland',
      'ukraine','united kingdom','vatican city'] 

chain('spain')
>>>['spain', 'netherlands', 'slovenia', 'andorra', 'austria', 'albania'] 
```

我试过这种方式，但它不起作用

```
def chain(naz):
    initial = naz[-1]
    initials=[]
    res = set()
    res.add(naz)
    for i in nations:
        if i.startswith(initial):
            initials.append(i)
    for j in initials:
        nations.remove(j)
        res.add(j)
        chain(j)
    return res 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:32:03.100

以下是一些评论：

*   您希望返回路径。所以这是一个有序的集合，不是吗？您可能不应该将集合用于 res，因为集合是无序的
*   你知道 la 长度或返回的路径吗？不，你没有。所以你可能需要一个`while`地方
*   `i.startswith(initial)`仅当 i 以整个初始单词开头时才为真。你可能不想要这个
*   您尝试使用递归方法。但是，您不收集结果。递归调用暂时没用
*   `nations`是一个全局变量，这很糟糕

*编辑*

您的评论中描述的错误可能会发生，因为您的递归调用在 j 循环内。递归调用可能会删除国家的元素，这些元素也可能存在于首字母中。因此，您尝试多次删除它们，这会引发异常。您可能的意思是放在`chain(j)`循环之外（也许使用它的返回值？）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T10:25:42.280

我也进行了递归下降。不确定动态编程是否适合这个，因为我们会修改列表。稍微紧凑，在调用链之前不需要从列表中删除开始。:-)

```
def chain(start, countries):
    remaining = list(countries)
    del remaining[remaining.index(start)]
    possibles = [x for x in remaining if x[:1] == start[-1:]]
    maxchain = []
    for c in possibles:
        l = chain(c, remaining)
        if len(l) > len(maxchain):
            maxchain = l
    return [start] + maxchain 
```

像这样打电话。:-)

```
>>> chain('spain', nations)
['spain', 'netherlands', 'serbia', 'albania', 'andorra', 'austria'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T01:34:47.367

作为旁注，您的问题是 NP 完全的（这意味着它没有“快速”多项式时间解决方案。）它可以解决小问题，但很快就会变得非常困难。

您的问题可以被认为是[有向图上的最长路径问题](https://en.wikipedia.org/wiki/Longest_path_problem)。

*   绘制一个有[向图](https://en.wikipedia.org/wiki/Directed_graph)，每个单词（国家）表示为一个顶点。
*   对于每对单词`w1`和，如果 的最后一个字母与的第一个字母相同，则`w2`画一条边。`w1 -> w2``w1``w2`
*   `w2->w1`如果`w2`s 的最后一个字母与 s 的第一个字母相同，则还要绘制反向边缘`w1`。
*   找到[最大长度路径](https://en.wikipedia.org/wiki/Longest_path_problem)- 包含最多顶点数的简单路径。（在这种情况下，“简单”表示“不包括任何顶点不止一次。”）

这是水果和蔬菜列表的示例图：`Apple, banana, eggplant, kiwifruit, orange, oregano, tangerine, zucchini`。

![词 DAG 示例](../Images/8803fc56470d8c454d1ddbfce0cc522c.png)

此图可能包含循环（例如，此图有一个循环`eggplant -> tangerine -> eggplant -> tangerine....`。[包含循环的有向图的最长路径问题是 NP 完全的。](https://en.wikipedia.org/wiki/Longest_path_problem#Relation_to_the_shortest_path_problem)因此，此问题没有多项式时间解决方案。

这并不意味着你不能比蛮力做得更好。[有一种动态规划算法](https://stackoverflow.com/questions/2525316/longest-acyclic-path-in-a-directed-unweighted-graph)可以将复杂性从`O(n!)`（阶乘，*非常*糟糕）降低到`O(n^2 * 2^n)`（超指数，仍然很糟糕，但比阶乘更好。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T10:07:18.783

这是一种天真的递归方法......我觉得你可以使用动态编程，它会更好

```
def chain(start,options):
    #start is the starting word
    #options are the words left

    next_options = [country for country in options if country[0] == start[-1]]

    #if theres no options, return the single
    if not next_options:
        return [start]

    #otherwise, return best chain out of the next option
    best_chain = None
    longest_chain = 0

    for option in next_options:

        new_options = options[:]
        new_options.remove(option)

        possible_chain = chain(option,new_options)

        if len(possible_chain) > longest_chain:
            best_chain = possible_chain
            longest_chain = len(possible_chain)

    return [start] + best_chain 
```

# linux - 打开我的本地机器（linux）的一个端口 30890

> ID：10548715
> 
> 赞同：0
> 
> 时间：2012-05-11T09:20:01.497
> 
> 标签：linux, apache, blackberry, blackberry-push

我想为黑莓推送通知打开本地机器（linux）的端口 30890。我正在从我的 PHP+Apche 程序发送通知。

任何人都知道我如何打开这个端口。

非常感谢您的帮助，

谢谢，VKS

# android - 未能从图库提供结果

> ID：10548717
> 
> 赞同：3
> 
> 时间：2012-05-11T09:20:14.170
> 
> 标签：android, gallery, android-4.0-ice-cream-sandwich

我有一个处理从图库中选择的图片的应用程序。但是这样的堆栈跟踪在 ICS 上发生了崩溃：

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, Intent { dat=content://com.google.android.gallery3d.provider/picasa/item/5629933319233370946 }} to activity {com.myexample/com.myexample.activities.UserProfileActivity}: java.lang.NullPointerException
at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
at android.app.ActivityThread.access$1100(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method) Caused by: java.lang.NullPointerException
at java.io.File.fixSlashes(File.java:185)
at java.io.File.(File.java:134)
at com.jettaxi.activities.UserProfileActivity.onActivityResult(SourceFile:316)
at android.app.Activity.dispatchActivityResult(Activity.java:4649)
at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
... 11 more 
```

我找到了一些有关此类错误的信息，但是我可以避免这种情况以及如何避免吗？

*编辑*：我的代码：

```
private void getImageFromGallery() {
        Intent galleryIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);
        startActivityForResult(galleryIntent, GALLERY_PIC_REQUEST);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_PIC_REQUEST) {
            try {
                captureFile = new File(getCaptureFilePath());
                captureUri = Uri.fromFile(captureFile);

                Bitmap scaledBitmap = decodeFileAndResize(captureFile);
                saveResizedAndCompressedBitmap(scaledBitmap);

                Bitmap rotatedBitmap = convertToRotatedBitmap(scaledBitmap);
                driverPhoto.setImageBitmap(rotatedBitmap);

                if (rotatedBitmap != scaledBitmap) {
                    scaledBitmap.recycle();
                    scaledBitmap = null;
                    System.gc();
                }
            } catch (IOException e) {
                BugSenseHandler.log(TAG, e);
            }
        } else if (requestCode == GALLERY_PIC_REQUEST) {
            try {
                captureFile = new File(getCaptureFilePath());
                captureUri = Uri.fromFile(captureFile);

                Uri chosenUri = data.getData();

                String[] filePathColumn = {MediaStore.Images.Media.DATA};

                Cursor cursor = getContentResolver().query(chosenUri, filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                cursor.close();

                File chosenFile = new File(filePath);

                Bitmap selectedImageBitmap = decodeFileAndResize(chosenFile);
                saveResizedAndCompressedBitmap(selectedImageBitmap);
                driverPhoto.setImageBitmap(selectedImageBitmap);
            } catch (IOException ie) {
                BugSenseHandler.log(TAG, ie);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T00:01:40.590

这可能有助于防止它列出不在 SD 卡上的项目：

```
galleryIntent.putExtra(Intent.EXTRA_LOCAL_ONLY, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:36:41.520

堆栈跟踪表明该图像来自 picasa 相册。所以你的sd卡上没有文件。在这种情况下用于`getContentResolver().openInputStream(intent.getData())`加载图像。

# backup - 如何在 teamcity 中安排自动备份？

> ID：10548726
> 
> 赞同：22
> 
> 时间：2012-05-11T09:20:36.133
> 
> 标签：backup, teamcity, schedule

我们使用的是 Teamcity 6.5.6 专业版，它让我可以选择运行备份，但我没有看到任何将其安排到特定时间的选项。

我不确定这个版本的 teamcity 是否支持计划备份。如果无法通过teamcity GUI，我想知道是否还有其他选择？

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T11:15:37.217

我[为 TeamCity 自动备份编写了 Powershell 脚本](http://ileonenko.wordpress.com/2012/09/19/automatic-teamcity-backup-with-powershell/)，您可以安排和运行备份。

这是代码：

```
function Execute-HTTPPostCommand() {
    param(
        [string] $url,
        [string] $username,
        [string] $password
    )

    $authInfo = $username + ":" + $password
    $authInfo = [System.Convert]::ToBase64String([System.Text.Encoding]::Default.GetBytes($authInfo))

    $webRequest = [System.Net.WebRequest]::Create($url)
    $webRequest.ContentType = "text/html"
    $PostStr = [System.Text.Encoding]::Default.GetBytes("")
    $webrequest.ContentLength = $PostStr.Length
    $webRequest.Headers["Authorization"] = "Basic " + $authInfo
    $webRequest.PreAuthenticate = $true
    $webRequest.Method = "POST"

    $requestStream = $webRequest.GetRequestStream()
    $requestStream.Write($PostStr, 0, $PostStr.length)
    $requestStream.Close()

    [System.Net.WebResponse] $resp = $webRequest.GetResponse();
    $rs = $resp.GetResponseStream();
    [System.IO.StreamReader] $sr = New-Object System.IO.StreamReader -argumentList $rs;
    [string] $results = $sr.ReadToEnd();

    return $results;
}

function Execute-TeamCityBackup() {
    param(
        [string] $server,
        [string] $addTimestamp,
        [string] $includeConfigs,
        [string] $includeDatabase,
        [string] $includeBuildLogs,
        [string] $includePersonalChanges,
        [string] $fileName
    )
    $TeamCityURL = [System.String]::Format("{0}/httpAuth/app/rest/server/backup?addTimestamp={1}&includeConfigs={2}&includeDatabase={3}&includeBuildLogs={4}&includePersonalChanges={5}&fileName={6}",
                                            $server,
                                            $addTimestamp,
                                            $includeConfigs,
                                            $includeDatabase,
                                            $includeBuildLogs,
                                            $includePersonalChanges,
                                            $fileName);

    Execute-HTTPPostCommand $TeamCityURL "USER" "PASSWORD"
}

$server = "http://YOUR_SERVER"
$addTimestamp = $true
$includeConfigs = $true
$includeDatabase = $true
$includeBuildLogs = $true
$includePersonalChanges = $true
$fileName = "TeamCity_Backup_"

Execute-TeamCityBackup $server $addTimestamp $includeConfigs $includeDatabase $includeBuildLogs $includePersonalChanges $fileName 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T10:22:57.573

您可以使用[REST API](http://confluence.jetbrains.net/display/TW/REST+API+Plugin)来运行备份。我们实际上使用 TeamCity 在每天午夜运行预定的构建。该构建调用其余 api 进行备份。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-26T08:07:58.367

如果您不想编写程序来执行任务，只需运行以下命令：

```
wget --user=*** --password=*** "http://localhost:8085/httpAuth/app/rest/server/backup?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=ScheduledBackup-" --post-data= 
```

其中星星应替换为您的 TeamCity 登录信息。

在 Windows 上，您可以将 WGET 作为 Cygwin 包的一部分

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-11-29T06:01:10.457

对于那些想要从 Mac OS 触发构建的人（在 TeamCity 上使用“命令行”运行程序）：

```
curl --basic --user user:password -X POST "http://team.city.server:8111/httpAuth/app/rest/server/backup?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=ScheduledBackup" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-24T14:46:18.297

我们运行maintainDB.cmd 并使用Windows 任务计划程序对其进行计划，它是一个单行命令，不需要额外的软件。维护数据库在 TeamCity 文档中有完整记录。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-09T17:22:24.403

您还可以使用环境变量在构建时解析团队城市服务器地址：

```
curl --basic --user user:pasword -X POST "%teamcity.serverUrl%/httpAuth/app/rest/server/backup?includeConfigs=true&includeDatabase=true&includeBuildLogs=true&fileName=ScheduledBackup" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-04T07:56:23.290

从@Ivan Leonenko 脚本开始，我添加了一些代码行以等待备份在退出前结束。

```
function Execute-HTTPCommand() {
    param(
        [string] $method,
        [string] $url,
        [string] $username,
        [string] $password
    )

    $authInfo = $username + ":" + $password
    $authInfo = [System.Convert]::ToBase64String([System.Text.Encoding]::Default.GetBytes($authInfo))

    $webRequest = [System.Net.WebRequest]::Create($url)
    $webRequest.ContentType = "text/html"
    $PostStr = [System.Text.Encoding]::Default.GetBytes("")
    $webrequest.ContentLength = $PostStr.Length
    $webRequest.Headers["Authorization"] = "Basic " + $authInfo
    $webRequest.PreAuthenticate = $true
    $webRequest.Method = $method

    if ($method -ne "GET")
    {
        $requestStream = $webRequest.GetRequestStream()
        $requestStream.Write($PostStr, 0, $PostStr.length)
        $requestStream.Close()
    }

    [System.Net.WebResponse] $resp = $webRequest.GetResponse();
    $rs = $resp.GetResponseStream();
    [System.IO.StreamReader] $sr = New-Object System.IO.StreamReader -argumentList $rs;
    [string] $results = $sr.ReadToEnd();

    return $results;
}

function Execute-TeamCityBackup() {
    param(
        [string] $server,
        [string] $addTimestamp,
        [string] $includeConfigs,
        [string] $includeDatabase,
        [string] $includeBuildLogs,
        [string] $includePersonalChanges,
        [string] $fileName,
        [string] $username,
        [string] $password
    )
    $TeamCityURL = [System.String]::Format("{0}/httpAuth/app/rest/server/backup?addTimestamp={1}&includeConfigs={2}&includeDatabase={3}&includeBuildLogs={4}&includePersonalChanges={5}&fileName={6}",
                                            $server,
                                            $addTimestamp,
                                            $includeConfigs,
                                            $includeDatabase,
                                            $includeBuildLogs,
                                            $includePersonalChanges,
                                            $fileName);

    Write-Host "Starting TeamCity backup"

    Execute-HTTPCommand "POST" $TeamCityURL $username $password
}

function Wait-TeamCityBackup() {
    param(
        [string] $server,
        [string] $username,
        [string] $password
    )

    $GetBackupStatusUrl = [System.String]::Format("{0}/httpAuth/app/rest/server/backup",
                                            $server);

    do {
        Start-Sleep -Seconds 1
        $backupStatus = Execute-HTTPCommand "GET" $GetBackupStatusUrl $username $password
        Write-Host $backupStatus
    } while ($backupStatus -eq 'Running')

}

$server = "http://YOUR_SERVER"
$addTimestamp = $true
$includeConfigs = $true
$includeDatabase = $true
$includeBuildLogs = $true
$includePersonalChanges = $true
$fileName = "TeamCity_Backup_"
$username = "USERNAME" # Must be a TeamCity Admin
$password = "PASSWORD"

Execute-TeamCityBackup $server $addTimestamp $includeConfigs $includeDatabase $includeBuildLogs $includePersonalChanges $fileName $username $password
Wait-TeamCityBackup $server $username $password 
```

# jquery - Ruby - Rails 3 - AJAXinate 分页和排序

> ID：10548727
> 
> 赞同：0
> 
> 时间：2012-05-11T09:20:39.447
> 
> 标签：jquery, ajax, ruby-on-rails-3, sorting, pagination

过去 6 个小时，我试图让这个工作。我尝试了几个代码示例，但它们似乎都不起作用。我读到 will_paginate 不是为 rails 3 设计的。我让它工作到它可以进行分页但不能发出 ajax 请求的地步。尝试使用 JQuery 来帮助解决 ajax 问题，但也没有运气。这很奇怪，对一件小事不费吹灰之力。分页正在发生，但它必须进行 ajax 调用。在我发疯之前，我真的需要一些好的建议。

看法 -

```
<div id="digg_pagination">
    <div class="page_info">
      <%= page_entries_info @list_page %>
    </div>
        <%= will_paginate(@list_page , :container => true, :remote => true,  :page_links => true ) %>
</div> 
```

生成 HTML -

```
<div id="digg_pagination">
    <div class="page_info">
      Displaying Item<b>2&nbsp;-&nbsp;2</b> of <b>2</b> in total
    </div>
        <div class="pagination" remote="true">
  <a class="previous_page" rel="prev start" href="/item/item_list?page=1">&#8592; Previous</a> 
  <a rel="prev start" href="/item/item_list?page=1">1</a> 
  <em class="current">2</em> <span class="next_page disabled">Next &#8594;</span>
</div>
</div> 
```

JS-

```
$(function(){
$('#item_list').html(<%= (render :partial => 'item_list').to_json.html_safe %>);
$('.pagination a').attr('data-remote', 'true'); # Doesn't add the html attribute 
$('.pagination a').livequery('click', function() {
        $.getScript(this.href);
        return false;
});
}); #Tried bind 'click', live, livequery. none worked. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:53:10.997

这对我有用：

```
# in a generic js
$(document).ready(function () {
    $(".pagination").find("a").livequery(function () {
        $(this).attr("data-remote", true);
    });
}); 
```

will_paginate(collection, :remote => true) 尚未接受 [https://github.com/mislav/will_paginate/pull/100](https://github.com/mislav/will_paginate/pull/100)

# java - 使用播放框架的弹性搜索问题

> ID：10548728
> 
> 赞同：0
> 
> 时间：2012-05-11T09:21:00.560
> 
> 标签：java, search, playframework, elasticsearch

我是 Play 和 ElasticSearch 的新手，一直在尝试为 POC 配置它们。我使用了 CRUD 模块（Play 1.2.4）并创建了一个名为 Book 的模型

```
@ElasticSearchable
@Entity
public class Book extends Model{

    @Required
    public String title ;
    @Required
    public String author ;
    @Required
    public String publisher ;
    public String binding ;
    @Required
    public double price ;
    public double discount ;
    @Required
    @MaxLength(4)
    public String releasedYear ;
    @Required
    public boolean inStock ;
    public String language ;
    public String deliveryTime ;
} 
```

并在内存数据库 H2 中创建了一些记录，并在 elasticsearch 节点中对这些记录进行了索引（我使用本地机器运行 ES）

当我尝试使用 ES 管理界面（我们在 Play 中使用 ES 模块时默认提供）进行搜索时，我遇到了一个奇怪的问题

我有一本书的标题是“Java 初学者”，我正在尝试从 ES-Admin 界面对字段标题运行术语查询。

```
{"query" : {"term" : { "title" : "Java for beginners" }}} 
```

它还给我

```
{
took: 3
timed_out: false
_shards: {
total: 5
successful: 5
failed: 0
}
hits: {
total: 0
max_score: null
hits: [ ]
}
} 
```

这本质上意味着没有匹配的记录

奇怪的是，当我将查询更改为

```
{"query" : {"term" : { "title" : "beginners" }}} 
```

它返回我的记录如下

```
{
took: 3
timed_out: false
_shards: {
total: 5
successful: 5
failed: 0
}
hits: {
total: 1
max_score: 0.19178301
hits: [
{
_index: models_book
_type: models_book
_id: 1
_score: 0.19178301
_source: {
title: Java for beginners
author: Bruce Eckel
publisher: Timburys
binding: Paperback
price: 450
discount: 10
releasedYear: 2010
inStock: true
language: English
deliveryTime: 3 days
id: 1
}
}
]
}
} 
```

如果有人可以对此有所了解，那将有很大帮助。任何正确方向的帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:48:04.723

使用[术语查询](http://www.elasticsearch.org/guide/reference/query-dsl/term-query.html)时，不分析要搜索的术语，这意味着通常它应该是单个术语。如果要查询需要分析的字符串，则应使用[query_string 查询类型](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)。

此查询应该适合您：

```
curl -s "localhost:9200/test/_search" -d '
{
  "query":{
    "query_string":{
      "query":"Java for beginners"
    }
  }
}' 
```

# php - php分配2个变量以形成值元素

> ID：10548729
> 
> 赞同：0
> 
> 时间：2012-05-11T09:21:06.583
> 
> 标签：php

有没有办法将 2 个变量值分配给表单中的值：

```
echo "  <input name='Radio1' type='radio' value='$course_id . $date_1'/>$date_1</br>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:23:25.880

这将是您正在寻找的：

```
echo "  <input name='Radio1' type='radio' value='$course_id$date_1'/>$date_1</br>"; 
```

或者以更易读的方式：

```
echo "  <input name='Radio1' type='radio' value='".$course_id.$date_1."'/>$date_1</br>"; 
```

问候，

斯蒂芬

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:27:04.943

你可以这样做：

`echo '<input type="radio" name="Radio1" value="',$course_id,'_',$date_1,'" />',$date_1,'<br />';`

在接收页面上：

```
$parts = explode('_',$_GET['Radio1']);
$course_id = $parts[0];
$date = $parts[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:28:47.747

这种方式可能以更有用的方式分离数据：

```
<input type="text" name="course[$course_id]" value="$date_1" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:32:41.700

您可以使用`printf`

```
$input = "<input name='Radio1' type='radio' value='%s%s'/>%s</br>";
printf ( $input, $course_id, $date_1, $date_1 ); 
```

# windows-phone-7 - 如何调试在调试中运行良好但在其他情况下崩溃的 WP7 应用程序？

> ID：10548734
> 
> 赞同：2
> 
> 时间：2012-05-11T09:21:38.073
> 
> 标签：windows-phone-7

我的 Windows Phone 应用程序有问题。

该应用程序使用所有设备传感器：gps、加速度计和指南针

当我在模拟器中运行它时很好，当我在手机上调试它时很好。

但是当我从设备上拔下 USB 电缆并再次启动应用程序时，它很快就会崩溃，我不知道如何找出原因，因为没有连接调试器。

我该如何调试这样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T22:44:37.857

发生这种情况的原因有很多。如果没有一些调试输出，很难准确指出发生了什么，但这里简要列出了可能的罪魁祸首：

### 最有可能的...

最有可能导致您的应用程序在非调试模式下崩溃的原因是启动时间过长。我怀疑您可能会遇到[这个 SO 问题](https://stackoverflow.com/questions/4594891/wp7-application-working-only-on-emulator-and-on-device-when-debugging)的全部内容。附加调试器后，运行时会绕过操作系统杀死任何加载时间超过 10 秒的应用程序的功能。这是一件容易测试的事情，只需删除应用程序启动时正在执行的所有代码（我假设您当时正在连接 GPS 内容，只需将这些内容注释掉）。

### 但另外...

虽然以上可能会解决您的问题，但您必须警惕您可能还会遇到的其他一些问题：

当您访问 GPS / 加速度计 / 指南针时，您*必须首先*检查这些传感器是否实际可访问并由手机提供。并非所有 Windows 手机都需要提供指南针。[查看Windows Phone](http://msdn.microsoft.com/en-us/library/ff637514(v=vs.92).aspx)的硬件规格。如果您尝试访问指南针，而您的设备不支持指南针，那么这可能是您的问题所在。更多细节在[这里](http://msdn.microsoft.com/en-us/library/hh202974(v=vs.92).aspx)。以下代码是如何检查设备上是否存在指南针的示例（请注意，即使您的设备关闭了指南针，IsSupported 也会返回 true）。

```
using Microsoft.Device.Sensors;

public partial class MainPage : PhoneApplicationPage
{
    Compass compass;

    public MainPage()
    {
        if (Compass.IsSupported)
        {
            // awesome. you have a compass
        }
        else
        {
            // uh oh… you have a crappy phone, no compass for you :(
        }
    }
} 
```

### 您是否尝试过再次打开和关闭它？

您必须考虑的另一件事是您正在使用的设备关闭了 GPS（我敢肯定，比您更大的开发人员犯了更愚蠢的错误）。如果您的 GPS 已关闭或禁用，或者用户（您在那里，拿着设备）*没有授权应用程序使用 GPS 数据*。请参阅[本文](http://create.msdn.com/en-US/education/quickstarts/Developing_with_the_Windows_Phone_GPS_(Location_Services))以单独处理位置注意事项（如果您正在开发支持 GPS 的 WP7 应用程序，则必须阅读）。

### 宣布你的意图先生

[最后，如果您未在应用程序清单文件](http://msdn.microsoft.com/en-us/library/ff769509(v=vs.92).aspx)中声明您从设备访问的内容，则可能会出现问题。基本上，如果您不将它们声明为您的应用程序使用的项目，您可能会遇到问题。您需要声明您的应用使用什么的原因是，Microsoft 可以适当地过滤/警告/通知从市场下载您的应用的用户您的应用运行所需的信息。

### 省电模式

当 Windows Phone 处于[节电模式](http://www.microsoft.com/windowsphone/en-us/howto/wp7/basics/battery-making-it-last.aspx)时，一些传感器将被关闭以延长电池寿命（例如 GPS、指南针和加速度计）。如果您的设备在插入开发机器时实际上并未充电，则很容易发生这种情况。

### 总之：

*   检查您的应用加载时间是否超过 10 秒
*   确保设备确实支持您尝试访问的传感器
*   确保传感器返回的数据不会导致您的代码崩溃（例如 GPS 可能已打开，但根据您的代码错误给出一个纬度/经度，导致它崩溃）。
*   确保在应用程序清单文件中声明用法
*   确保您的传感器已打开并且您未处于节电模式

希望以上一项或全部可以帮助您诊断问题。如果你发现它是别的东西，让我知道，会很想知道还有什么可能导致这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:27:34.947

您是否考虑过在可能必须显示特定异常消息甚至堆栈跟踪的任何异常处理代码中添加 MessageBox.Show 方法调用？还可以考虑对 App.xaml.cs 中的 Application_UnhandledException 事件处理程序执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:33:43.210

您可以做的是将所有调试信息（如 Stacktrace 和消息）写入独立存储中，然后您可以将其显示在单独的页面上。

可能会出现问题，因为如果电话插入，则使用 PC 的 Internet（很长一段时间都存在相同的问题）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T07:28:41.650

值得使用 Andy Pennell 在他的博客中描述的 Little Watson[技术](http://blogs.msdn.com/b/andypennell/archive/2010/11/01/error-reporting-on-windows-phone-7.aspx)。这会将异常详细信息保存到独立存储中，并在应用程序下次启动时从应用程序中通过电子邮件发送出去。博客中有完整的代码。

如果您想删除电子邮件部分并且只想从开发 PC 的独立存储中手动提取崩溃详细信息，则该代码很容易适应。

# javascript - JavaScript 适用于 FireFox，但不适用于 Chrome 或 IE

> ID：10548740
> 
> 赞同：1
> 
> 时间：2012-05-11T09:22:13.283
> 
> 标签：javascript, html

以下是我的代码，我在页​​面上创建了一个带有下拉框的 div，并且我希望在 select 中的元素上有一个 onClick 事件：

```
$("div.projectTeamTools").html('Organize by Project Teams: <select id="projectTeams"><c:forEach var="projectTeam" items="${userProjectTeams}"><option value="${projectTeam.projectId}" onClick="javascript:onTeamSelect(this.value)">${projectTeam.projectName}</option></c:forEach></select>');

function onTeamSelect(teamId){
        alert(teamId +" Selected");
} 
```

该代码在 Firefox 上运行良好，但在 IE 或 Chrome 上运行良好。任何人都可以请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:11:57.993

尝试这个：

```
$("div.projectTeamTools").html('Organize by Project Teams: <select id="projectTeams"><c:forEach var="projectTeam" items="${userProjectTeams}"><option value="${projectTeam.projectId}" >${projectTeam.projectName}</option></c:forEach></select>');

    $("#projectTeams").change(function () {
        onTeamSelect($(this).val());
    });

function onTeamSelect(teamId){
        alert(teamId +" Selected");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:24:39.067

选项元素对事件的支持非常差，例如`onclick`.

这是基于 WebKit 的浏览器中的一个已知[问题](http://code.google.com/p/chromium/issues/detail?id=5284)。

您需要在元素上使用`onchange`事件。`<select>`

例如：

```
<select id="projectTeams" onchange="onTeamSelect(this.options[this.selectedIndex].value)"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:15:30.373

可能是您的 javascript 在 chrome/IE 中被禁用 这可用于在 chrome 中启用 javascript 转到开始->运行并输入以下“C:\Documents and Settings\%username%\Local Settings\Application Data\Google\Chrome\应用程序\chrome"-启用-javascript

# c++ - c++继承和模板不编译

> ID：10548742
> 
> 赞同：1
> 
> 时间：2012-05-11T09:22:19.017
> 
> 标签：c++, templates, inheritance

我正在尝试使用模板实现一个通用的哈希列表类，并且我正在尝试从基类继承但得到很多编译错误。这是我的代码：

```
#ifndef BASEHASHLIST_H_
#define BASEHASHLIST_H_

#include <string>
#include <boost/unordered_set.hpp>
#include <iostream>
#include <boost/interprocess/sync/interprocess_semaphore.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

    template <typename T>
    class BaseHashList
    {

    private:
        boost::interprocess::interprocess_semaphore m_semaphore;

    protected:

        boost::unordered_set<T> m_hsHashSet;                
        typename boost::unordered_set<T>::iterator m_hsIter;            
    public:

        BaseHashList();
    };

    template <typename T>
    BaseHashList<T>::BaseHashList():m_semaphore(1){}

#endif /* BASEHASHLIST_H_ */ 
```

这是从基类继承的类：

```
#ifndef ACCOUNTLIST_H_
#define ACCOUNTLIST_H_

#include "BaseHashList.h"

    class AccountList : public BaseHashList<unsigned long>
    {
    public:
        AccountList(std::string p_strFile, unsigned long p_ulMaxAccountNo);
        ~AccountList(void);

        int m_iVersion;
        std::string m_strFilePath;

    private:
        unsigned long m_ulMaxAccountNo;
    };

#endif /* ACCOUNTLIST_H_ */ 
```

这是cpp文件：

```
#include "AccountList.h"

AccountList::AccountList(std::string p_strFile, unsigned long p_ulMaxAccountNo)
: BaseHashList<unsigned long>::m_hsHashSet<unsigned long>(),
  m_iVersion(0),
  m_strFilePath(p_strFile)
{
    m_ulMaxAccountNo = p_ulMaxAccountNo;
}

AccountList::~AccountList(){} 
```

我收到很多编译时错误，例如：

令牌 '<' 之前的预期模板名称 令牌 '<' 之前的预期 '('

对于这样一个简单的任务，我花了几个小时，我非常沮丧，有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:25:50.703

的构造函数中的这个初始化器在`AccountList`我看来是错误的：

```
BaseHashList<unsigned long>::m_hsHashSet<unsigned long>() 
```

`BaseHashList`您应该在其自身的构造函数内部初始化成员，`BaseHashList`总是显式或隐式调用一个。

这个例子是简化的，同样是错误的：

```
struct A {
  int bar;
};

struct B : A {
  B() : A::bar(0) {}
}; 
```

（说`bar(0)`在那里也是错误的）

但是，您可以获得所需的行为：

```
struct A {
  A() : bar(0) {}
  int bar;
};

struct B : A {
  B() {} // Implicitly calls A::A although we could have explicitly called it
}; 
```

A 的构造函数被调用并有机会在这里初始化其成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:36:03.320

当您从模板类继承时，您还必须将模板指令添加到子类：

```
template <typename T>
class A : public B<T> 
```

您还必须在构造函数和方法的定义之前添加模板指令：

```
template <typename T>
A<T>::A() : B<T>() {...}

template <typename T>
A<T>::~A() {...} 
```

# django - Django惰性查询集和分页

> ID：10548744
> 
> 赞同：25
> 
> 时间：2012-05-11T09:22:23.883
> 
> 标签：django, lazy-loading, django-queryset

[我在这里](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)读到Django 查询集是惰性的，在实际打印之前不会对其进行评估。我使用 django 的内置分页做了一个简单的分页。我没有意识到已经有诸如“django-pagination”和“django-endless”之类的应用程序可以完成这项工作。

无论如何，当我这样做时，我想知道 QuerySet 是否仍然是懒惰的

```
entries = Entry.objects.filter(...)
paginator = Paginator(entries, 10)
output = paginator.page(page)
return HttpResponse(output) 
```

每次我想获取我当前想要查看的任何页面时都会调用这部分。

我需要知道，因为我不想给数据库带来不必要的负载。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-11T10:07:48.060

如果您想查看发生的位置，请导入`django.db.connection`并检查`queries`

```
>>> from django.db import connection
>>> from django.core.paginator import Paginator
>>> queryset = Entry.objects.all() 
```

让我们创建分页器，看看是否有任何查询发生：

```
>>> paginator = Paginator(queryset, 10)
>>> print connection.queries 
[] 
```

还没有。

```
>>> page = paginator.page(4)
>>> page
<Page 4 of 788>
>>> print connection.queries 
[{'time': '0.014', 'sql': 'SELECT COUNT(*) FROM `entry`'}] 
```

创建页面产生了一个查询，以计算查询集中有多少条目。尚未提取条目。

将页面的对象分配给变量“对象”：

```
>>> objects = page.object_list
>>> print connection.queries
[{'time': '0.014', 'sql': 'SELECT COUNT(*) FROM `entry`'}] 
```

这仍然没有导致条目被提取。

`HttpResponse`从对象列表生成

```
>>> response = HttpResponse(page.object_list)
>>> print connection.queries
[{'time': '0.014', 'sql': 'SELECT COUNT(*) FROM `entry`'}, {'time': '0.011', 'sql': 'SELECT `entry`.`id`, <snip> FROM `entry` LIMIT 10 OFFSET 30'}] 
```

最后，条目已被提取。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T10:07:26.990

这是。Django 的分页使用与查询集相同的规则/优化。

这意味着它将开始评估`return HttpResponse(output)`

# ruby-on-rails - 测试“创建”控制器操作的正确方法是什么？

> ID：10548745
> 
> 赞同：12
> 
> 时间：2012-05-11T09:22:24.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, controller

我正在使用 Ruby on Rails 3.2.2、Rspec 2.9.0 和 RspecRails 2.9.0。我想测试`create`控制器操作，但我不知道如何以“正确”/“正确”的方式进行操作。我“搭建”了模型、控制器、视图……文件，所以在这些文件中我有 Ruby on Rails 生成器生成的通用代码；在我的规范文件中，我有：

```
it "assigns @article" do
  new_article = FactoryGirl.build(:article)
  Article.should_receive(:new).and_return(new_article)
  post :create
  assigns[:article].should eq(new_article)
end 
```

也许，（*注意*`new`：上面的代码与我用来测试控制器动作的代码几乎相同）测试控制器动作*的更好方法`create`是在动作期间传递一些属性值，`post :create`而不是像我上面所做的那样继续*，但我没有不知道如何制作，以及它是否是“正确”/“正确”的制作方式。

那么，**测试“创建”控制器操作的正确方法是什么？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T09:45:20.240

我是这样做的：

```
describe "#create" do
  before { post :create, { "my_model"=> { "name"=>"name" } } }
  specify("should created one my_model") { change{ MyModel.count }.from(0).to(1) }
end 
```

Aaron Sumner 最近写了一本书[Everyday Rails Testing with RSpec](http://leanpub.com/everydayrailsrspec)[在他的博客上](http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html)有一篇文章。他是这样描述的：

```
describe "POST create" do
  context "with valid attributes" do
    it "creates a new contact" do
      expect{
        post :create, contact: Factory.attributes_for(:contact)
      }.to change(Contact,:count).by(1)
    end

    it "redirects to the new contact" do
      post :create, contact: Factory.attributes_for(:contact)
      response.should redirect_to Contact.last
    end
  end

  context "with invalid attributes" do
    it "does not save the new contact" do
      expect{
        post :create, contact: Factory.attributes_for(:invalid_contact)
      }.to_not change(Contact,:count)
    end

    it "re-renders the new method" do
      post :create, contact: Factory.attributes_for(:invalid_contact)
      response.should render_template :new
    end
  end 
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-11T09:36:13.793

怎么样：

```
it "creates article" do 
  article_params = FactoryGirl.attributes_for(:article)
  expect { post :create, :article => article_params }.to change(Article, :count).by(1) 
end 
```

# twitter - 在单个请求中获取多个帐户（例如 5 个）的 Twitter 关注者的有效方法？

> ID：10548747
> 
> 赞同：0
> 
> 时间：2012-05-11T09:22:31.250
> 
> 标签：twitter, twitter-oauth

这是一个示例查询，它返回 examplename 的关注者的 twitter id：

```
https://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=examplename 
```

这很好用。但是，我想获得最多 5 个不同 Twitter 帐户的关注者。这意味着 5 次 api 调用效率低且不好，因为我不想超过 api 限制。那么有没有办法将 5 个不同的查询组合成 1 个呢？

据我的雇主说，我正在构建的这个 Web 应用程序可能同时被 100 个同时使用的用户使用。使用身份验证（oauth 代码）会增加我的速率限制吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:12:31.927

a) 不，只要坚持这个方法。

b) 是的，如果您获得每个用户的 oAuth 凭据，您试图获取详细信息（他们已登录），那么您可以使用他们自己的 oauth 令牌/秘密签署每个 API 请求，并且您不必担心费率限制。使用每个用户的凭据，您每小时最多可以发出 350 个请求。

# iphone - 没有可用的兼容 iOS 版本的预置 iOS 设备，为什么我收到此错误？

> ID：10548748
> 
> 赞同：1
> 
> 时间：2012-05-11T09:22:34.953
> 
> 标签：iphone

我正在尝试在 iPhone 4 上测试我的应用程序，但是我收到了这个错误：

没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:41:38.133

Xcode 默认为 ARM7 创建应用程序。

要支持 iPhone 3G 和其他 arm6 设备，需要在 Architectures 列表中指定 arm6 和 arm7，并在 plist 中将设备要求设置为仅 arm6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:12:49.387

当我将我的应用程序从 iPhone 更改为 Universal 时，Xcode 自动将**部署目标**从 4.3 更改为 6.1，我的设备有 6.0，因此无法识别。

将值改回 4.3 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:06:31.973

如果您的 Xcode 太旧，您也可能会收到此错误消息，即您尚未更新它但您已经更新了您的手机。

# c# - 使用编组的 BSTR 类型传递 ASCII 字符串

> ID：10548749
> 
> 赞同：0
> 
> 时间：2012-05-11T09:22:37.177
> 
> 标签：c#, string, com

我有一个由非托管代码调用的接口。它传递 BSTR 类型，但数据是 ascii 字符串。当它被写入文件时，我看到了意外的字符。我对数据如何传输的思考 Unmanaged[BSTR[ASCII]] --> Managed[String[ASCII]] --> File[Unicode[ASCII]] 所以输入的字符应该与输出的字符相同。它是否正确？非托管代码调用的接口函数如下。

```
 //C# interface called by unmanged code
 public void WriteOutFile([In] [MarshalAs(UnmanagedType.BStr)] String asciiData)
 {
      File.WriteAllText(fileName, asciiData);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:41:21.287

首先，.NET 字符串**始终是 unicode**字符串。您可以使用相应的编码获得具体字符串的任何表示形式，但字符串中的所有字符都是 unicode 字符。

其次，如果您使用的是 UnmanagedType.BStr，那么非托管代码必须通过 BSTR 并自行解决字符编码问题（ASCII 是单字节，BSTR 是双字节）。如果不可能，您应该考虑另一种编组类型，例如 UnmanagedType.LPStr。

# shell - 是否可以将 shell 命令的结果放入剪贴板？

> ID：10548750
> 
> 赞同：10
> 
> 时间：2012-05-11T09:22:40.937
> 
> 标签：shell, unix, copy-paste, zsh

想象一下我这样做：

```
echo $PATH 
```

在一个终端。是否有可能自动复制结果，以便如果我这样做`Ctrl+y`会被打印出来？据我了解，在`Ctrl+k`终端上执行时，文本保存在属于终端的内存缓冲区中，所以我认为这样的事情应该是可能的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T09:36:42.623

要看。Linux、Mac 还是 Windows？

mac 有命令`pbcopy`，`pbpaste`可以从剪贴板复制和粘贴一些东西。

复制示例（mac）：

```
echo $PATH | pbcopy 
```

粘贴示例（mac）：

```
echo "$(pbpaste -Prefer txt)" 
```

Linux 使用具有多个复制粘贴缓冲区的 X（有点类似于剪贴板，但涉及更多一点）。

您可以使用[XSel 之](http://www.kfish.org/software/xsel/)类的小应用程序来复制/粘贴，该命令的使用形式与 pbcopy/pbpaste 相同

复制：

```
echo $PATH | xsel --clipboard 
```

'粘贴'：

```
echo "$(xsel --output --clipboard)" 
```

对于 Windows，您可以使用像[clip](http://www.labnol.org/software/tutorials/copy-dos-command-line-output-clipboard-clip-exe/2506/)这样的应用程序，它允许相同的复制/粘贴功能

复制：

```
set %PATH% | clip 
```

我通常使用 Linux/Unix，所以我没有在 Windows 上从剪贴板粘贴的等价物。

# mysql - 长时间运行的查询问题

> ID：10548753
> 
> 赞同：1
> 
> 时间：2012-05-11T09:22:59.617
> 
> 标签：mysql, mysql-slow-query-log

我正在尝试使用我没有制作的脚本解决一些问题，该脚本似乎`/tmp`很快就填满了 mysql 目录。

我检查了`slow query log`它，它有很多这样的查询..

```
SELECT
    COUNT(*) AS `total`
FROM
    (
        SELECT
                *
        FROM
            `Advertising_Business_and_Retail`
        WHERE
            MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company')
    UNION
        SELECT
                *
        FROM
            `Chemical` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company')
    UNION
        SELECT
                *
        FROM `Clothing` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company')
    )
AS t; 
```

除了我相信`45`总共有工会（每个类别表 1 个）之外，这些表并不大，但该`Advertising_Business_and_Retail`表本身就有关于`450k`列表的信息。

我手动运行了这个查询，大约花了 2 分半钟。

我猜这就是为什么 /tmp 目录填得这么快的原因？

关于我可以做些什么来解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:27:09.883

如果您确定您选择的行之间没有重复项，请尝试替换`UNION`为`UNION ALL`.

此外，您还可以`UINON ALL`用简单的添加替换：

```
select (
  (select count(1) from `Advertising_Business_and_Retail` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company'))
+ (select count(1) from `Chemical` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company'))
+ (select count(1) from `Clothing` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company'))
) as total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:27:45.610

这是不是更快？

```
SELECT
    SUM(`count`) AS `total`
FROM
    (
        SELECT
               COUNT(*) AS `count`
        FROM
            `Advertising_Business_and_Retail`
        WHERE
            MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company')
    UNION
        SELECT
               COUNT(*) AS `count`
        FROM
            `Chemical` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company')
    UNION
        SELECT
                COUNT(*) AS `count`
        FROM `Clothing` WHERE MATCH (`wm`, `locn`, `gns`) AGAINST('outdoor apparel company')
    )
AS t; 
```

# java - 如何设置服务安卓？

> ID：10548756
> 
> 赞同：-2
> 
> 时间：2012-05-11T09:23:10.257
> 
> 标签：java, android

我有每 12 小时触发一次的警报管理器，我在广播接收器中捕捉到它

> ```
> @Override public void onReceive(final Context context, final Intent
> bootintent) {
> Intent anyService = new Intent(context, AnyService.class);
> context.startService(anyService); } 
> ```

所以，在那之后我想启动“AnyService”服务，我想为用户设置一些通知。我试图启动服务类。通知代码在哪里，但我有错误。我该如何解决？谢谢。

更新 ：

```
05-11 08:58:30.776: D/AndroidRuntime(312): Shutting down VM
05-11 08:58:30.776: W/dalvikvm(312): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 08:58:30.795: E/AndroidRuntime(312): FATAL EXCEPTION: main
05-11 08:58:30.795: E/AndroidRuntime(312): java.lang.RuntimeException: Unable to start service com.poslovi.wolf.NotifyService@44ef9cd0 with Intent { cmp=com.poslovi.wolf/.NotifyService }: java.lang.NullPointerException
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3063)
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.app.ActivityThread.access$3600(ActivityThread.java:125)
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2096)
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.os.Looper.loop(Looper.java:123)
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 08:58:30.795: E/AndroidRuntime(312):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 08:58:30.795: E/AndroidRuntime(312):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 08:58:30.795: E/AndroidRuntime(312):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 08:58:30.795: E/AndroidRuntime(312):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 08:58:30.795: E/AndroidRuntime(312):  at dalvik.system.NativeStart.main(Native Method)
05-11 08:58:30.795: E/AndroidRuntime(312): Caused by: java.lang.NullPointerException
05-11 08:58:30.795: E/AndroidRuntime(312):  at com.poslovi.wolf.NotifyService.showNotification(NotifyService.java:48)
05-11 08:58:30.795: E/AndroidRuntime(312):  at com.poslovi.wolf.NotifyService.onStartCommand(NotifyService.java:26)
05-11 08:58:30.795: E/AndroidRuntime(312):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3053)
05-11 08:58:30.795: E/AndroidRuntime(312):  ... 10 more
05-11 08:58:38.845: D/AndroidRuntime(319): Shutting down VM
05-11 08:58:38.845: W/dalvikvm(319): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 08:58:38.856: E/AndroidRuntime(319): FATAL EXCEPTION: main
05-11 08:58:38.856: E/AndroidRuntime(319): java.lang.RuntimeException: Unable to start service com.poslovi.wolf.NotifyService@44ee4068 with Intent { cmp=com.poslovi.wolf/.NotifyService }: java.lang.NullPointerException
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3063)
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.app.ActivityThread.access$3600(ActivityThread.java:125)
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2096)
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.os.Looper.loop(Looper.java:123)
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 08:58:38.856: E/AndroidRuntime(319):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 08:58:38.856: E/AndroidRuntime(319):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 08:58:38.856: E/AndroidRuntime(319):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 08:58:38.856: E/AndroidRuntime(319):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 08:58:38.856: E/AndroidRuntime(319):  at dalvik.system.NativeStart.main(Native Method)
05-11 08:58:38.856: E/AndroidRuntime(319): Caused by: java.lang.NullPointerException
05-11 08:58:38.856: E/AndroidRuntime(319):  at com.poslovi.wolf.NotifyService.showNotification(NotifyService.java:48)
05-11 08:58:38.856: E/AndroidRuntime(319):  at com.poslovi.wolf.NotifyService.onStartCommand(NotifyService.java:26)
05-11 08:58:38.856: E/AndroidRuntime(319):  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3053)
05-11 08:58:38.856: E/AndroidRuntime(319):  ... 10 more
05-11 09:00:27.406: D/AndroidRuntime(346): Shutting down VM
05-11 09:00:27.406: W/dalvikvm(346): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:00:27.426: E/AndroidRuntime(346): FATAL EXCEPTION: main
05-11 09:00:27.426: E/AndroidRuntime(346): java.lang.RuntimeException: Unable to create service com.poslovi.wolf.NotifyService: java.lang.NullPointerException
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2969)
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.app.ActivityThread.access$3300(ActivityThread.java:125)
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2087)
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.os.Looper.loop(Looper.java:123)
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:00:27.426: E/AndroidRuntime(346):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:00:27.426: E/AndroidRuntime(346):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:00:27.426: E/AndroidRuntime(346):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:00:27.426: E/AndroidRuntime(346):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:00:27.426: E/AndroidRuntime(346):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:00:27.426: E/AndroidRuntime(346): Caused by: java.lang.NullPointerException
05-11 09:00:27.426: E/AndroidRuntime(346):  at com.poslovi.wolf.NotifyService.showNotification(NotifyService.java:46)
05-11 09:00:27.426: E/AndroidRuntime(346):  at com.poslovi.wolf.NotifyService.onCreate(NotifyService.java:18)
05-11 09:00:27.426: E/AndroidRuntime(346):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2959)
05-11 09:00:27.426: E/AndroidRuntime(346):  ... 10 more
05-11 09:00:35.735: D/AndroidRuntime(354): Shutting down VM
05-11 09:00:35.735: W/dalvikvm(354): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:00:35.765: E/AndroidRuntime(354): FATAL EXCEPTION: main
05-11 09:00:35.765: E/AndroidRuntime(354): java.lang.RuntimeException: Unable to create service com.poslovi.wolf.NotifyService: java.lang.NullPointerException
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2969)
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.app.ActivityThread.access$3300(ActivityThread.java:125)
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2087)
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.os.Looper.loop(Looper.java:123)
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:00:35.765: E/AndroidRuntime(354):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:00:35.765: E/AndroidRuntime(354):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:00:35.765: E/AndroidRuntime(354):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:00:35.765: E/AndroidRuntime(354):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:00:35.765: E/AndroidRuntime(354):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:00:35.765: E/AndroidRuntime(354): Caused by: java.lang.NullPointerException
05-11 09:00:35.765: E/AndroidRuntime(354):  at com.poslovi.wolf.NotifyService.showNotification(NotifyService.java:46)
05-11 09:00:35.765: E/AndroidRuntime(354):  at com.poslovi.wolf.NotifyService.onCreate(NotifyService.java:18)
05-11 09:00:35.765: E/AndroidRuntime(354):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2959)
05-11 09:00:35.765: E/AndroidRuntime(354):  ... 10 more
05-11 09:08:27.977: D/AndroidRuntime(381): Shutting down VM
05-11 09:08:27.977: W/dalvikvm(381): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:08:27.995: E/AndroidRuntime(381): FATAL EXCEPTION: main
05-11 09:08:27.995: E/AndroidRuntime(381): java.lang.RuntimeException: Unable to start receiver com.poslovi.wolf.MyReceiver: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.os.Looper.loop(Looper.java:123)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:08:27.995: E/AndroidRuntime(381):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:08:27.995: E/AndroidRuntime(381):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:08:27.995: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:08:27.995: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:08:27.995: E/AndroidRuntime(381):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:08:27.995: E/AndroidRuntime(381): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.app.ContextImpl.startActivity(ContextImpl.java:617)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:08:27.995: E/AndroidRuntime(381):  at com.poslovi.wolf.MyReceiver.onReceive(MyReceiver.java:14)
05-11 09:08:27.995: E/AndroidRuntime(381):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
05-11 09:08:27.995: E/AndroidRuntime(381):  ... 10 more
05-11 09:08:30.855: I/Process(381): Sending signal. PID: 381 SIG: 9
05-11 09:08:36.186: D/AndroidRuntime(389): Shutting down VM
05-11 09:08:36.186: W/dalvikvm(389): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:08:36.196: E/AndroidRuntime(389): FATAL EXCEPTION: main
05-11 09:08:36.196: E/AndroidRuntime(389): java.lang.RuntimeException: Unable to start receiver com.poslovi.wolf.MyReceiver: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.os.Looper.loop(Looper.java:123)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:08:36.196: E/AndroidRuntime(389):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:08:36.196: E/AndroidRuntime(389):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:08:36.196: E/AndroidRuntime(389):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:08:36.196: E/AndroidRuntime(389):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:08:36.196: E/AndroidRuntime(389):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:08:36.196: E/AndroidRuntime(389): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.app.ContextImpl.startActivity(ContextImpl.java:617)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:08:36.196: E/AndroidRuntime(389):  at com.poslovi.wolf.MyReceiver.onReceive(MyReceiver.java:14)
05-11 09:08:36.196: E/AndroidRuntime(389):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
05-11 09:08:36.196: E/AndroidRuntime(389):  ... 10 more
05-11 09:09:52.255: D/AndroidRuntime(444): Shutting down VM
05-11 09:09:52.255: W/dalvikvm(444): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:09:52.265: E/AndroidRuntime(444): FATAL EXCEPTION: main
05-11 09:09:52.265: E/AndroidRuntime(444): java.lang.RuntimeException: Unable to start receiver com.poslovi.wolf.MyReceiver: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.os.Looper.loop(Looper.java:123)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:09:52.265: E/AndroidRuntime(444):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:09:52.265: E/AndroidRuntime(444):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:09:52.265: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:09:52.265: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:09:52.265: E/AndroidRuntime(444):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:09:52.265: E/AndroidRuntime(444): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.app.ContextImpl.startActivity(ContextImpl.java:617)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:09:52.265: E/AndroidRuntime(444):  at com.poslovi.wolf.MyReceiver.onReceive(MyReceiver.java:14)
05-11 09:09:52.265: E/AndroidRuntime(444):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
05-11 09:09:52.265: E/AndroidRuntime(444):  ... 10 more
05-11 09:09:54.215: I/Process(444): Sending signal. PID: 444 SIG: 9
05-11 09:10:00.415: D/AndroidRuntime(452): Shutting down VM
05-11 09:10:00.415: W/dalvikvm(452): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:10:00.425: E/AndroidRuntime(452): FATAL EXCEPTION: main
05-11 09:10:00.425: E/AndroidRuntime(452): java.lang.RuntimeException: Unable to start receiver com.poslovi.wolf.MyReceiver: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.os.Looper.loop(Looper.java:123)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:10:00.425: E/AndroidRuntime(452):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:10:00.425: E/AndroidRuntime(452):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:10:00.425: E/AndroidRuntime(452):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:10:00.425: E/AndroidRuntime(452):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:10:00.425: E/AndroidRuntime(452):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:10:00.425: E/AndroidRuntime(452): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.app.ContextImpl.startActivity(ContextImpl.java:617)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
05-11 09:10:00.425: E/AndroidRuntime(452):  at com.poslovi.wolf.MyReceiver.onReceive(MyReceiver.java:14)
05-11 09:10:00.425: E/AndroidRuntime(452):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
05-11 09:10:00.425: E/AndroidRuntime(452):  ... 10 more
05-11 09:13:26.635: D/AndroidRuntime(479): Shutting down VM
05-11 09:13:26.635: W/dalvikvm(479): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:13:26.646: E/AndroidRuntime(479): FATAL EXCEPTION: main
05-11 09:13:26.646: E/AndroidRuntime(479): java.lang.RuntimeException: Unable to start receiver com.poslovi.wolf.MyReceiver: java.lang.NullPointerException
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.os.Looper.loop(Looper.java:123)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 09:13:26.646: E/AndroidRuntime(479):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:13:26.646: E/AndroidRuntime(479):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 09:13:26.646: E/AndroidRuntime(479):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 09:13:26.646: E/AndroidRuntime(479):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 09:13:26.646: E/AndroidRuntime(479):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:13:26.646: E/AndroidRuntime(479): Caused by: java.lang.NullPointerException
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.widget.Toast.<init>(Toast.java:89)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.widget.Toast.makeText(Toast.java:231)
05-11 09:13:26.646: E/AndroidRuntime(479):  at com.poslovi.wolf.MyReceiver.showNotification(MyReceiver.java:28)
05-11 09:13:26.646: E/AndroidRuntime(479):  at com.poslovi.wolf.MyReceiver.onReceive(MyReceiver.java:24)
05-11 09:13:26.646: E/AndroidRuntime(479):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
05-11 09:13:26.646: E/AndroidRuntime(479):  ... 10 more
05-11 09:13:29.425: I/Process(479): Sending signal. PID: 479 SIG: 9
05-11 09:13:34.845: D/AndroidRuntime(487): Shutting down VM
05-11 09:13:34.845: W/dalvikvm(487): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-11 09:13:34.855: E/AndroidRuntime(487): FATAL EXCEPTION: main
05-11 09:13:34.855: E/AndroidRuntime(487): java.lang.RuntimeException: Unable to start receiver com.poslovi.wolf.MyReceiver: java.lang.NullPointerException
05-11 09:13:34.855: E/AndroidRuntime(487):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-11 09:13:34.855: E/AndroidRuntime(487):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-11 09:13:34.855: E/AndroidRuntime(487):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-11 09:13:34.855: E/AndroidRuntime(487):  at android.os.Handler.dispatchMessage(Handler.java:99) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:49:03.327

我在使用 tabHost 时遇到了这个问题。为了查找错误，我使用了“try-catch”，而 Exeption 让我发现我的第二类在我的 Manifest 中找不到。我写错了它的名字。我写了 '.list' 但我必须写 '.List' 。只是大写 :) 也许你应该**控制你的清单**。

# ruby-on-rails - 本地化格式日期和数字精度

> ID：10548760
> 
> 赞同：0
> 
> 时间：2012-05-11T09:23:42.340
> 
> 标签：ruby-on-rails, internationalization

有没有办法在 yml 文件中使用帮助程序？我有这个：

*en.yml*

`n_buy_credits: "foo %{time}. Number %{number}."`

我想以这种格式显示 %{time} 参数（“%m-%d-%Y %H:%M”）和具有 2 个精度级别的 %{number} 。可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:49:42.717

使用 I18n.localize 助手：

```
<%= t('n_buy_credits', time: I18n.l(Time.now), number: l(1234)) %> 
```

您可以在 en.yml 文件中设置格式：

[https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en-US.yml#L33](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/en-US.yml#L33) https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale /en-US.yml#L140

# ios - 如何在 iPad 上显示隐藏 UITableView 的小抓取手柄

> ID：10548762
> 
> 赞同：0
> 
> 时间：2012-05-11T09:23:42.747
> 
> 标签：ios, ipad, uisplitviewcontroller

我有一个带有 SplitViewController 的 iPad 应用程序。我隐藏了左侧导航面板（UITableView）。它可以通过从屏幕左侧滑动来查看。我想在隐藏时在左侧显示一个小“抓取选项卡”，以便为用户提供视觉指示，表明那里有他们可以查看的东西。我只是不知道该怎么做。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:38:32.617

解决方案 1

好吧，那么您将不得不创建一个视图，其中您的 rootViewController(leftView) 将与带有句柄图像的自定义按钮一起驻留，并且您可以在根视图可见时删除或隐藏 customButton，并在根视图可见时显示不可见的。
此外，您必须在分配期间将此视图（自定义按钮 + 左视图）作为拆分视图的参数。

解决方案 2

您可以简单地将 customButton 添加到左侧的拆分视图，并在 rootview 不可见时使用 [parentview bringSubviewToFront:subview] 将其置于前面，并在根据您的功能单击或滑动它时将其删除。

希望这对您有所帮助。

# php - 通过浏览器 FTP 上传

> ID：10548764
> 
> 赞同：0
> 
> 时间：2012-05-11T09:23:53.523
> 
> 标签：php

我想知道，我们是否可以创建像 filezilla 这样的基于 Web 的应用程序。如果是，任何信息都会对我有所帮助。我尝试搜索谷歌，但无法获得正确的信息。我得到的只是提供这项服务的网站，例如[http://www.txftp.com/](http://www.txftp.com/)而 不是如何去创建这样的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:52:40.050

When you create web based application, this becomes http protocol, what you actually end up doing is upload and download of files over the http protocols. building the similar look and feel like Filezilla is quite easy, but achieving same performance and guarantee will be difficult.

One way to achieve this can be by writing java applets. You can use any ready made java ftp libraries to code this applet. [http://www.javaworld.com/javaworld/jw-04-2003/jw-0404-ftp.html](http://www.javaworld.com/javaworld/jw-04-2003/jw-0404-ftp.html). You may have to create a policy and sign the applet so that user allows your applet to open a ftp socket connection from the applet.

In case if you are ok with HTML5, you can explore into WebSockets for the solution. [http://mustafaakin.wordpress.com/2011/10/16/introducing-websocket-file-transfer/](http://mustafaakin.wordpress.com/2011/10/16/introducing-websocket-file-transfer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:29:22.100

网上有很多FTP教程，先看看启动它的[函数](http://php.net/manual/en/function.ftp-connect.php)：

```
<?php

$ftp_server = "ftp.example.com";

// set up a connection or die
$conn_id = ftp_connect($ftp_server) or die("Couldn't connect to $ftp_server"); 

?> 
```

# javascript - Javascript 字符串数组

> ID：10548766
> 
> 赞同：3
> 
> 时间：2012-05-11T09:23:58.657
> 
> 标签：javascript, arrays, string

所以我在这里遇到了奇怪的问题。我有一个数组`status=new Array()`。`0`然后我从to迭代`N-1`，并分配`status[i]="idle";`我试图做 alert 来检查这些值，它们都被分配给一个字符 coma `,`。有谁知道出了什么问题？

```
var status=new Array();
window.onload = function() {
    for(var i=0;i<5;i++) {
        status[i]="idle";
        alert(status[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T09:26:35.137

使用不同的变量名（或者更好的是，根本不使用全局变量）。已经有一个[`window.status`属性](https://developer.mozilla.org/en/DOM/window.status)，显然有些东西不允许你用你自己的东西来遮蔽它（这让我有点惊讶；我想知道数组是否在赋值时被强制转换为字符串或其他东西）。在全局范围内，`var`在对象上创建属性`window`，这就是`window.status`相关的原因。

[这个例子](http://jsbin.com/ivukav)（[source](http://jsbin.com/ivukav/edit)）复制了你的问题（对我来说，使用 Chrome），[这个例子](http://jsbin.com/ivukav/2)（[source](http://jsbin.com/ivukav/2/edit)）只是更改了名称，显示了正确的警报系列。

请注意，这是特定于浏览器的。在 Firefox 上，即使是您的旧代码也会向我显示正确的警报系列。例如，Firefox 允许我们重新定义`window.status`，但 Chrome 不允许。

# css - 如何在 Asp.Net MVC3 中使用 Jquery 根据环境值更改页面布局

> ID：10548767
> 
> 赞同：0
> 
> 时间：2012-05-11T09:24:00.860
> 
> 标签：css, asp.net-mvc-3, razor, config

我在配置中有一个名为 ENV 的键，我在 layout.cshtml 中编写了以下行

```
<span class=@System.Configuration.ConfigurationManager.AppSettings["Env"]>@User.Identity.Name
</span> 
```

如何编写 javascript 函数或建议其他方式来根据 ENV 值应用不同的 css 类文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:27:49.927

您可以在 CSS 文件中定义与 web.config 中的值匹配的 CSS 规则：

```
.someValue {
    color: Red;
} 
```

这假设您在 web.config 中`Env`定义了密钥：

```
<add key="Env" value="someValue" /> 
```

还要确保在类值周围加上引号：

```
<span class="@System.Configuration.ConfigurationManager.AppSettings["Env"]">
    @User.Identity.Name
</span> 
```

# c# - 如何清除 DataGrid 的标题，包括其行

> ID：10548771
> 
> 赞同：0
> 
> 时间：2012-05-11T09:24:21.967
> 
> 标签：c#, datagrid, datagridview

`DataGrid`我已经清除了某些按钮单击或某些事件的标题和行并生成。即：`ApplicationObjectRecords.Rows.Clear();`能够清除行但不能清除标题，我尝试使用 `ApplicationObjectRecords.DataSource=null ;`

任何类似的功能来清除标题并再次创建标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:14:52.613

试试`ApplicationObjectRecords.Columns.Clear();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:06:55.510

尝试这个：

```
ApplicationObjectRecords.DataSource=null;
ApplicationObjectRecords.DataBind(); 
```

它将导致控件重新绑定。

# java - readObject() 阻塞特定对象

> ID：10548772
> 
> 赞同：0
> 
> 时间：2012-05-11T09:24:30.630
> 
> 标签：java, serialization

我正在编写一个服务器/客户端程序。客户端向服务器发送“请求”（为此目的而设计的对象），服务器使用 ObjectInputStream 对它们进行解码。所有“请求”对象都属于同一类，只是数据字段不同。
一切通常都有效；但在某些特定状态下（也许当 Request 对象有点大，但不超过 200 kb！）服务器端的 readObject() 只会阻塞，没有例外。
任何想法？！

服务器代码：

```
public class ConnectionThread extends Thread {

    Socket con;
    Request request;

    public ConnectionThread(Socket s) {
        con = s;
        try {
            ObjectInputStream in = new ObjectInputStream(con.getInputStream());
            // Works till here; the object "in" is initialized.
            request = (Request) in.readObject();
            // This line is not reached, in particular cases.
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(ConnectionThread.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(ConnectionThread.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

...
} 
```

客户端代码：

```
public static void saveStoreDataForTable(DataTable tb) {
    try {
        Socket s = new Socket("localhost", portNo);
        ObjectOutputStream out = new ObjectOutputStream(s.getOutputStream());
        out.writeObject(new Request("saveStoreData", 
                new Object[] 
                {tb.getEdited(), tb.getRemoved(), tb.getNewTables(), tb.getAlterations()}));
        out.flush();
        // These lines work. But I can't get servers respone; again, in some particular cases.
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:37:40.580

您应该将该 I/O 从构造函数移至 start() 方法。目前，您正在构造该线程的线程中执行 I/O，这几乎肯定是错误的线程。

# facebook - 对象基域不允许：尝试实现 Facebook 类似按钮时出错

> ID：10548774
> 
> 赞同：1
> 
> 时间：2012-05-11T09:24:42.377
> 
> 标签：facebook

```
Object Base Domain Not Allowed: Object at URL 'http://www.kripalphotography.com/' of type 'website' is invalid because the domain 'www.kripalphotography.com' is not allowed for the specified application id '404118679628536'. You can verify your configured 'App Domain' at https://developers.facebook.com/apps/404118679628536. 
```

我在调试时一直收到此错误。我正在尝试在我的 wordpress 网站 www.kripalphotography.com 上实现类似按钮，因为 facebook 的“喜欢”按钮仍然存在问题。我正在使用**Facebook Open Graph 协议插件 v2.0.2**在 header.php 上动态生成元数据。生成的元标记是：

```
<meta property="fb:admins" content="1118311203">
<meta property="fb:app_id" content="404118679628536">
<meta property="og:url" content="http://www.kripalphotography.com/home">
<meta property="og:title" content="Kripal Photography">
<meta property="og:site_name" content="kripalphotography.com">
<meta property="og:description" content="">
<meta property="og:type" content="website">
<meta property="og:image" content="http://www.kripalphotography.com/wp-content/uploads/2012/05/logo1.png">
<meta property="og:locale" content="en_US"> 
```

任何人都可以建议我这里的错误是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:26:16.030

您需要将您的域添加到 Facebook 上应用程序的允许域列表

# c# - 从 Asp.net 图表控件重定向

> ID：10548775
> 
> 赞同：0
> 
> 时间：2012-05-11T09:24:44.400
> 
> 标签：c#, asp.net

我试图在我的 asp.net 应用程序中显示一个饼图，因为这是从我的 sql 数据库中获取值，我有两列名为 Section,Absentees ....这些列的值就像

```
Section          Absentees
-------          ---------
  A                 10
 MCA                 5 
```

像这样，我的剧本是，

```
<asp:Chart ID="Chart1" runat="server" Height="202px" Width="291px">
    <Series>
        <asp:Series ChartType="Pie" XValueMember="Section" YValueMembers="Absentees" Legend="Legend1" Name="Series1"></asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1"></asp:ChartArea>
    </ChartAreas>
    <Legends>
        <asp:Legend Name="Legend1"></asp:Legend>
    </Legends>
</asp:Chart> 
```

当我这样尝试时，仅在图表和图例中得到“部分”，例如，

![在此处输入图像描述](../Images/796663e9835a6a373bdb86c00747d1c0.png)

我需要在图例中显示“部分”，在图表中显示“缺席”计数，我该怎么做？

还有一件事，如果我点击图表，是否可以重定向到另一个页面？（例如：如果我单击 5 或 10，它应该重定向到其他页面，并将值（10 或 5）作为查询字符串）它可能吗？

我刚刚包含`IsValueShownAsLabel="true"`在我的系列中，并且值显示正常，当我单击特定标签时，我可以使用`LabelUrl="/Default.aspx"`这样的方法重定向到某个页面。

现在的问题是如何将值作为 QueryString 传递，我尝试过

```
LabelUrl="/Default.aspx?value=<%# Eval("Section")%>" 
```

但它显示错误，正在我的 WebParts 控件中尝试此图表.....我该如何解决这个问题..有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:18:47.390

在此处查看有关如何创建饼图的指南：

[http://betterdashboards.wordpress.com/2009/01/19/pie-charts-in-asp-net/](http://betterdashboards.wordpress.com/2009/01/19/pie-charts-in-asp-net/)

在同一网站上，您可以查看以不同格式提供图例的方法：

[http://betterdashboards.wordpress.com/2009/02/04/display-percentages-on-a-pie-chart/](http://betterdashboards.wordpress.com/2009/02/04/display-percentages-on-a-pie-chart/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T21:24:03.463

**从饼图的特定部分重定向：**

Chart1.Series[0].Points[0].Url="/url1";

Chart1.Series[0].Points[1].Url="/url2";

Chart1.Series[0].Points[2].Url="/url3";

**从饼图的特定图例重定向：**

Chart1.Series[0].Points[0].LegendUrl="/url1";

Chart1.Series[0].Points[1].LegendUrl="/url2";

Chart1.Series[0].Points[2].LegendUrl="/url3";

**所以你可以写：**

Chart1.Series[0].Points[0].Url = Chart1.Series[0].Points[0].LegendUrl = "rptPendingBreakdown.aspx";

# c# - 控制台应用程序无法正确解析带有空格的 args

> ID：10548777
> 
> 赞同：5
> 
> 时间：2012-05-11T09:24:55.353
> 
> 标签：c#, .net, console-application, command-line-arguments

我创建了一个获取一些命令行参数的.NET 控制台应用程序。

当我传递带有空格的 args 时，我使用引号来包含这些参数，这样它们就不会被 cmd 分割：

```
C:\MyAppDir> MyApp argument1 "argument 2" "the third argument" 
```

如果我在 Windows XP 中执行该应用程序，它可以正常工作：它有 3 个参数：

*   论据1
*   论点 2
*   第三个论点

但是，如果我在 Windows Server 2008 中执行它，它似乎会忽略引号：它有 6 个参数：

*   论据1
*   “争论
*   2"
*   “这
*   第三
*   争论”

任何想法为什么？

注意：我在 Main 开始使用此代码执行时打印了参数：

```
Console.WriteLine("Command line arguments:");
foreach (string arg in args)
{
    Console.WriteLine("# " + arg);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T09:43:18.880

确保您输入的字符确实是双引号 "。

也许这是一个看起来像它的角色。

我知道我的希腊语设置会产生一个 " 但不是这样读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-26T12:50:01.710

请试一试。

C:\MyAppDir> MyApp argument1 \"argument 2\" \"第三个参数\"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T23:10:09.177

您可以尝试将每个参数放在 Quota"" 之间，并在路径中放置双反斜杠，例如：

genradorPlantillasPDF.exe "C:\GDI\desarrollos\celula canales\proyectos\Progreso\curso xml\"generadorprogreso.xml C:\Temp\ BVI "C:\GDI\desarrollos\celula canales\proyectos\Progreso\plantilla\" " C:\GDI\desarrollos\celula canales\proyectos\Progreso\" "Formulario Progreso 版本 2.0.docx" C:\Temp\

# c++ - 即使不执行 return，非 void 函数也能正常工作

> ID：10548779
> 
> 赞同：2
> 
> 时间：2012-05-11T09:25:11.223
> 
> 标签：c++, function, binary-search-tree

我是一名计算机科学学院的学生。昨天，我有一个关于使用 C++ 的二叉搜索树的课程。我们是由那个班的实验室助理教的。

他们将树中的节点定义为这样的结构：

```
struct Data{
    char name[15];
    int age;
    Data *left,*right;
}; 
```

他们给了我们一个在 BST 中搜索的代码，如下所示：

```
// temp is current node, name is the value of the node to be searched for.
Data* search(Data *temp,char name[]) {
    if(strcmp(temp->name,name)>0)
        search(temp->left,name);
    else if(strcmp(temp->name,name)<0)
        search(temp->right,name);
    else
        return temp;
} 
```

我注意到代码是错误的。**如果函数进入第一个或第二个 if 块，它不会执行任何 return 语句。**

但是当实验室助手运行代码时，它工作得很好。

我想也许这种行为是特定于编译器的。但是当我在 gcc 上尝试该代码时，该功能也可以正常工作。（我们大学使用microsoft visual c++编译器）

谁能解释发生了什么？为什么这段代码有效？

PS：忽略节点为空、找不到值等其他错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T09:29:55.440

这只是未定义的行为。

它**似乎**有效，因为有一个寄存器保存返回值。在递归树的最深路径中，`temp`被移动到该寄存器中，之后永远不会被清除或更改，因此该寄存器将包含正确的节点，直到第一次调用返回。

当第一个调用返回时，调用上下文检查该寄存器的返回值，这恰好是正确的。但你不应该依赖这个。假设它总是有效**是不安全的。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:32:01.617

通常，您有一个用于从函数返回值的硬件寄存器（例如，在 i686 上是 %EAX）。如果您在函数中所做的最后一件事是调用另一个函数并且预期的返回值是该函数的结果，则可能会发生 %EAX 值没有被丢弃并且被调用者很好地检索到的情况。

但是，这取决于许多假设，您不应该期望它以任何方式可靠。首先，编译器可以检测到您没有使用 的返回值`search()`，因此如果它暗示`search()`没有副作用，它可能会决定优化该调用。如果它能够内联搜索调用，它可以部分优化它。

可能还有其他架构（iirc，IA64 就是这种情况），其中调用约定更加微妙，并且用于在一个函数中返回值的寄存器与调用函数中的不同。所以你的代码依赖于平台相关的细节来工作，而它应该是一种高级（和可移植的）语言。

# jquery - jquery在父级中添加类

> ID：10548783
> 
> 赞同：1
> 
> 时间：2012-05-11T09:25:52.320
> 
> 标签：jquery

```
<div class='pagename lock' style='float:left;width:200px;'>
 <a href='javascript:void(0);' class='pages' title='Click to Go'  rel="id" >
</div>

$(".pages a[rel=id]").parent().addClass("unlock") 
```

该类`Unlock`未添加 parent `div`，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:27:37.690

您的第一个选择器不正确。它在具有 class 的元素中查找锚点`.pages`。尝试：

```
$("a[rel='id'].pages").parent().addClass("unlock") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:28:36.813

好。首先，`a`标签应该是关闭的。

```
<div class='pagename lock' style='float:left;width:200px;'>
    <a href='javascript:void(0);' class='pages' title='Click to Go'  rel="id">Click</a>
</div> 
```

然后，根据您的示例，我们可以看到该`a`标签具有`pages`类，因此我们需要重写 jQuery 选择器：

```
$("a[rel='id'].pages").parent().addClass("unlock") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:29:21.967

Hiya**演示** [http://jsfiddle.net/xYdBj/7/](http://jsfiddle.net/xYdBj/7/)

好读：[http ://api.jquery.com/parent/](http://api.jquery.com/parent/)

**html**

```
<div class='pagename lock' style='float:left;width:200px;'>
 <a href='javascript:void(0);' class='pages' title='Click to Go'  rel="id" >
</div>

​ 
```

**jQuery代码**

```
$(".pages").parent().addClass("unlock");

alert("class added" + $(".pagename").attr("class"));​ 
```

# jquery - 基于 scrollTop() 的自动滚动

> ID：10548785
> 
> 赞同：1
> 
> 时间：2012-05-11T09:26:15.293
> 
> 标签：jquery

我仍在努力掌握这些东西，因此将不胜感激

我有 5 个 div 的所有高度都基于 $(window).height()
我已经为每个 div 设置了一个唯一的 ID

我有一些 vars 集

```
var wH = $(window).height();
var half-wH = (wH) / 2; 
```

我想要做的是让查询基于 window.height 的 50% 将窗口滚动到每个 ID

即窗口高度 600px
小于 300px scrollTo #id1
大于 300px 但小于 900px scrollTo #id2
等，但只有在一小段延迟之后

我知道，如果我将
.scrollTop() 与第一个 div #ID1 结合使用，
它将显示从页面顶部滚动的像素

我如何将它们放在一起让我摸不着头脑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:35:41.530

使用 JavaScript **scrollBy**和**setTimeout**方法使网页自动向下滚动。更改超时值以更改滚动速度（以毫秒为单位）。

```
function pageScroll() {
        window.scrollBy(0,50); // horizontal and vertical scroll increments
        scrolldelay = setTimeout('pageScroll()',100); // scrolls every 100 milliseconds
} 
```

要在页面加载时自动滚动，请将以下代码添加到 body 标签：

```
<body onLoad="pageScroll()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:40:52.313

```
var st = $(window).scrollTop();
var elem = $('#id1').offset().top;
var elem2 = $('#id2').offset().top;

if(st < 300) {
   $(window).scrollTop(elem)
}

if(st > 300 && st < 900) {
   $(window).scrollTop(elem2) 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:36:21.200

尝试这样的事情：

```
if(size < 300){
$(document).scrollTo("#id1"); }
else if(size > 300 && size < 900){
$(document).scrollTo("#id2"); } 
```

# java - 使用远程“chromedriver.exe”文件设置 Chrome WebDriver

> ID：10548795
> 
> 赞同：0
> 
> 时间：2012-05-11T09:27:24.630
> 
> 标签：java, google-chrome, selenium, webdriver, selenium-chromedriver

我的系统中安装了 chrome。我正在使用 Selenium 在 chrome 上运行一些测试。

我已将 Chromedriver.exe 下载到 MyDocuments。我已经使用 System.setProperty() 设置了“webdriver.chrome.driver”并启动了 ChromeDriver()。它工作正常。

```
System.setProperty("webdriver.chrome.driver", "C:\\MyDocuments\\chromedriver.exe");
driver=new ChromeDriver(); 
```

现在，我正在尝试将 Chromedriver.exe 放在远程机器“https://remotemachine/chromedriver.exe”中。当我设置 System 属性并启动 ChromeDriver() 时，我遇到了一个异常，Selenium 在一个奇怪的路径中搜索 chrome：

> C:\Users..\Appdata\Local\Google Chrome\Application...\https://remotemachine/chromedriver.exe 中不存在 webdriver.chrome.driver 定义的 chromedriver 可执行文件

为什么 Selenium 通过将系统属性附加到 C 驱动器中的某个位置来搜索 chromedriver.exe？

如何使用远程 chromedriver.exe 文件从 Selenium 启动 Chrome？

与上述无关，但：

是否也可以使用 Java/Selenium 找到默认的浏览器二进制路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:23:45.057

它希望 chrome 在 Windows 中位于此位置

%HOMEPATH%\AppData\Local\Google\Chrome\Application\chrome.exe

对于远程，它必须在路径中，或者 -Dwebdriver.chrome.driver 值应该指向本地 chromedriver.exe 位置。

本地的，就像它正在运行的地方一样。

这是设置链接： http : [//code.google.com/p/selenium/wiki/RemoteWebDriver http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/RemoteWebDriver)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:59:43.540

您不能设置远程机器的系统路径，例如 -

`System.setProperty("webdriver.chrome.driver", "remotemachine/chromedriver.exe");`.

此代码将仅在其所在的集线器/本地机器中执行。

要远程运行它，您需要在启动 WD 节点时提及 -Dwebdriver.chrome.driver=pathtochromedriver.exe。

```
java -jar seleniumserver.jar -role wd -hub http://hubhost:port/grid/register -Dwebdriver.chrome.driver=pathtochromedriver 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:22:26.477

System.setProperty("webdriver.chrome.driver", "C:\Documents and Settings\sssuppaluri\Desktop\Spicejet_Automation\chromedriver.exe"); 驱动程序 = 新的 ChromeDriver(); driver.get("https://149.122.160.94:8443/skylights/cgi-bin/skylights.cgi");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T06:46:27.150

在您的项目中创建一个名为“chromedriver”的新文件夹并将“chromedriver.exe”文件放入其中，然后将以下行添加到您的代码中

```
System.setProperty("webdriver.chrome.driver",System.getProperty("user.dir")+"\\chromedriver\\chromedriver.exe"); 
```

# sql - sql server 2008 中的“选择”查询产生的所有持续时间的总和

> ID：10548797
> 
> 赞同：1
> 
> 时间：2012-05-11T09:27:37.093
> 
> 标签：sql, sql-server, sql-server-2008

我的表由列`StartTime`和数据类型`EndTime`组成`datetime`。我使用此查询计算了这两列的持续时间：

```
SELECT   
   StartTime, EndTime, 
   DATEDIFF(s, StartTime, EndTime) AS duration 
FROM tbl_record 
WHERE StartTime >= @starttime AND StartTime < @endtime 
ORDER BY StartTime DESC 
```

如何计算 sql 查询中的总持续时间。这可以使用脚本来完成，但是如何在数据库查询中完成呢？我添加了类似的东西

```
 SELECT SUM(duration) as total 
```

显示错误：

> 持续时间无效列

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:31:23.257

你不能使用这样的别名。您要么必须在 sum 和 alias 中使用原始计算作为`duration`

```
SELECT   SUM(datediff(s,StartTime,EndTime)) as duration 
FROM     tbl_record 
where    StartTime >= @starttime 
         and StartTime < @endtime 
```

或将您的原始语句用作子选择，以便能够`duration`在外部选择中使用别名。

```
SELECT   SUM(duration)
FROM     (
          SELECT   datediff(s,StartTime,EndTime) as duration
          FROM     tbl_record 
          where    StartTime >= @starttime 
                   and StartTime < @endtime 
         ) d 
```

# opencv - CascadeClassifier::detectMultiScale 的 maxSize 参数效率不高

> ID：10548802
> 
> 赞同：1
> 
> 时间：2012-05-11T09:28:02.760
> 
> 标签：opencv

`minSize`我正在使用 haar cascadeclassifiers 对视频流执行行人检测，并且由于参数和函数`maxSize`中的原因，我正在尝试通过减小检测的比例范围来优化代码`detectMutliScale`：

```
fullbodyCascade.detectMultiScale(image, found_pedestrian, 1.1, 3, 0, Size(20,60), Size(50,100)); 
```

似乎该`minSize`参数是唯一考虑的参数，而`maxSize`仍在检测到比其更大的对象。

有没有人遇到过这个问题？

在此先感谢您的帮助

伊卢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:06:10.177

我使用的 haar cascadeclassifier 是一个旧格式文件，与此格式相关的函数似乎没有考虑 maxSize。因此，我通过添加以下内容修改了 haar.cpp：

```
 if( winSize.width > maxSize.width || winSize.height > maxSize.height ) break; 
```

就在 lig 之前。1202：

```
 if( winSize.width < minSize.width || winSize.height < minSize.height )
    {
            if( findBiggestObject )
                break;
            continue;
    } 
```

可能有更聪明的方法来解决这个问题（使用标志......？）但无论如何，它现在工作正常。

# mysql - 在 MySQL 中存储 mongoid 或在 mongo 中存储 MySQL 记录 ID？

> ID：10548812
> 
> 赞同：1
> 
> 时间：2012-05-11T09:28:35.833
> 
> 标签：mysql, mongodb, symfony, doctrine-orm, doctrine-odm

对于这个项目，我们有一个 MySQL 数据库。我们想使用 Mongo 的 GridFS 来存储每个软件的屏幕截图。

我们不确定是否应该将 MySQL 软件 id 存储在 mongo 文件集合中，或者将 mongo id 存储在 MySQL 表中，即表屏幕截图将具有 software_id 和 mongo_id。MongoID 将指向屏幕截图的集合。

我们将并行使用 Doctrine ORM 和 Doctrine ODM。

有任何想法吗？最好的解决方案是什么？在同步方面。我们会遇到什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:34:39.160

假设每个软件都有很多截图，每个截图属于一个软件，我会把**MySQL ids 放在 MongoDB 中**：

*   它将避免在 MySQL 中引用它不拥有的实体的附加表
*   它也应该避免一些查找（当您需要屏幕截图时，您只会使用 MongoDB 中的软件 ID 来请求它，而不是先询问 MySQL 再询问 MongoDB）

# objective-c - 在视图控制器中将 BarButtonItems 添加到 backButton

> ID：10548818
> 
> 赞同：0
> 
> 时间：2012-05-11T09:29:00.077
> 
> 标签：objective-c, ios, cocoa

我有一个视图控制器，它是独立的，有两个左 UIBarButtonItem，但是当我按下它时，我想要这两个按钮 + 后退按钮

我试过了

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // back
    if (self.navigationController.navigationItem.backBarButtonItem) {

        self.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects:self.navigationController.navigationItem.backBarButtonItem, self.barButtonFilter, self.barButtonFilterContacts, nil];

    } else {

        self.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects:self.barButtonFilter, self.barButtonFilterContacts, nil];

    }
} 
```

如果有后退按钮，则添加，否则替换

但我没有工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:21:18.997

所以这里的问题是a`UINavigationBar`只能有一个leftButtonItem和一个rightButtonItem。但是你可以做的是在`UINavigationBar`你可以有一个 UIView 的中心。您可以使用它来放置按钮。

有人在这里有代码：[add-buttons-to-the-titleview-of-navigationbar-without-have-to-repeat-code](https://stackoverflow.com/questions/10004525/adding-buttons-to-the-titleview-of-navigationbar-without-having-to-repeat-code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:48:13.367

我无法解决您的问题，但根据您的标题，您想`UINavigationController`用条形按钮项目替换您的后退按钮，在这种情况下，您只需要一个自定义按钮来代替后退按钮：

```
UIBarButtonItem *backButton= [[UIBarButtonItem alloc] initWithTitle:@"yourTitle" style:UIBarButtonItemStylePlain target:self action:@selector(someFunction:)];             
self.navigationItem.rightBarButtonItem = backButton;   
[backButtonrelease]; 
```

如果这不是您的问题，请详细说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T20:53:25.443

来自 Apple 的 iOS 人机界面指南：

> 如果您需要提供更大的控件集，或者您不需要启用导航，请使用工具栏而不是导航栏。
> 
> 即使有足够的空间，也要避免在导航栏上挤满额外的控件。导航栏应该只包含视图的当前标题、后退按钮和一个管理视图内容的控件。相反，如果您在导航栏中使用分段控件，则导航栏不应显示标题，并且不应包含除分段控件之外的任何控件。

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)

# ruby - 我应该使用 File.write 吗？

> ID：10548825
> 
> 赞同：1
> 
> 时间：2012-05-11T09:29:34.850
> 
> 标签：ruby, documentation

我最近遇到了将 ruby​​ 脚本转换为 .EXE 的问题，因为其中有一个`File.write`语句。文档没有提到`write`方法，但是当我做一个

```
pp File.methods 
```

它在那里。那我应该使用`File.write`吗？在普通的 Ruby 脚本中，以下工作

```
File.write("test.txt", "test") 
```

但这是一种好的做法吗？为什么文档没有提到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:50:20.993

`File.write`事实上`IO.write`( `File`is a child of `IO`) 可以通过猴子补丁来验证：

```
class IO
  def IO.write
    puts "IO's class method write was called."
  end
end

File.write # outputs "IO's class method write was called." 
```

[它在文档](http://ruby-doc.org/core-1.9.3/IO.html#method-c-write)中非常好。

因此，我认为没有理由不使用它。

# php - Xdebug 不写入文件

> ID：10548827
> 
> 赞同：2
> 
> 时间：2012-05-11T09:29:37.183
> 
> 标签：php, xdebug

我正在尝试学习 xdebug。我有以下脚本：

```
<?php

echo "This";

xdebug_start_trace('/home/dotancohen/xdebug');
echo "That";
xdebug_stop_trace();

?> 
```

我的`/home/dotancohen/`目录是权限 711，`~/xdebug`文件是权限 777。但是，该文件没有被写入。PHP 脚本中没有抛出任何错误，并且它的功能与人们所期望的完全一样，而忽略了 xdebug 行。

为什么不能写入文件？

**编辑：** 这些是 php.ini 中的 xdebug 配置行：

```
extension=ssh2.so
;extension=xdebug.so
zend_extension="/usr/lib64/php/modules/xdebug.so"
extension=mongo.so
extension=memcache.so 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:37:03.757

事实证明，这一行：

```
xdebug_start_trace('/home/dotancohen/xdebug'); 
```

写入此文件：

```
/home/dotancohen/xdebug.xt 
```

因此，将其`touch`ing`~/xdebug.xt`和`chmod`ing 到 777 解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:38:33.797

尝试在不带参数的情况下调用 xdebug_start_trace 以查看您的脚本是否不喜欢您的目录和/或文件：P

如果没有参数，它将在 xdebug.trace_output_dir 配置的当前目录中创建一个文件

# ruby-on-rails - 有哪些迹象表明我*不应该*在项目中使用 Ruby on Rails？

> ID：10548832
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:06.273
> 
> 标签：ruby-on-rails

我已经开始学习 RoR，我真的很喜欢它——但感觉它是以一种特定的方式定向的——一种非常基本的 MVC 模型。哪种类型的 Web 应用程序可能*不会*从使用 RoR 中受益？在规划架构时，我能找到任何迹象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:40:31.043

我认为不使用 RoR 没有特定的技术原因 - 它快速、干净并且可能可以做任何 PHP 所做的事情。

我能想到的唯一原因与任何其他技术的考虑相同：您是否有合适的人员，是否兼容遗留代码（如果有），您是否处于一个可以轻松找到 RoR 人员来支持代码等等。

关于这个问题还有[一个不错的 Quora 主题：](http://www.quora.com/When-should-you-not-use-Ruby-on-Rails-for-a-startup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:52:02.177

*   如果您必须在不支持 rails/ruby 的客户端计算机上安装您的网站。
*   如果您的代码之后需要由不具备 Rails 知识的人维护。

# string - 如何在使用 C# 创建 word 文档时将字符（Â 或 Ã 或 â€）转换为 ASCII 代码？

> ID：10548833
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:12.743
> 
> 标签：string, c#-4.0, character-encoding, ms-word

我有字符串`" Single 63”x14” rear window"` 正在将此字符串解析为 HTML 并使用 () 创建一个应用样式的 word 文档`System.IO.File.ReadAllText(styleSheet)`。

在文档中我得到这个字符串，就像`"Single 63â€x14â€ rear window"`在 C# 中一样。

如何让正确的字符显示在 Word 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T03:59:10.807

您正在查看的编码似乎是 UTF-8。它实际上可能正是您想要的，您只需要使用支持 UTF-8 的工具查看它，如果您处理它并将其放在网页上，请添加所需的 HTML 元标记，以便浏览器使用正确的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T03:04:48.060

您必须找出字符串的传入编码

“ 单个 63”x14” 后窗”

以及word文档允许的编码方式。

Word 似乎不支持这些时髦引号的编码字符。您总是可以创建一个漂亮的小字符串解析器来搜索 Word 编码范围之外的字符并将它们替换为 String.Empty，或者搜索看起来相似的特定受支持字符。

例如。String.Replace(""","\"");

（如果不直接操作编码值，这可能无法正常工作，但您没有提供这些，因此无法给出确切的示例）

# arrays - 为什么我通过迭代这个哈希得到相同的值？

> ID：10548834
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:14.817
> 
> 标签：arrays, perl, hash, get, put

我正在尝试将散列放入Perl 中`%listvol`的数组中。`@fileInfo`

```
@fileInfo = ($filename, $data, $index, \%listvol); 
```

`%listvol`包含卷列表： key = `$vol`, value = `$vol`。第一个`$vol`值是`ABCDEF`, 然后`GFFFF`, `EEEAA`- 总是不同的。

然后我将数组放`@fileInfo`入哈希中`%listeAllFile`：

```
$listeAllFile{$nameOfFile} = [@fileInfo]; 
```

后来我试图获得哈希`%listvol`但没有成功。我正在使用这段代码：

```
foreach $key (keys %listeAllFile) {
    @tab      = @{ $listeAllFile{$key} };
    $filename = $tab[0];
    %listvol  = %{ $tab[3] };
    foreach $vol (keys %listvol) {
        print "\n vol is $vol for file $filename";
    } 
```

文件名总是不同的，所以没关系。但是变量的值`$vol`总是一样的，`ABCDEF`。似乎我每次都得到相同的值。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:42:52.177

虽然您没有包含重现问题的代码，但我相当确定问题在于您`%listvol`在每个数组中存储了对相同哈希的引用。

当您更改`%listvol`第二个条目的内容时，您同时修改了第一个条目。解决此问题的一种方法是使用`{%listvol}`而不是`\%listvol`. 前者对 的当前内容进行浅拷贝`%listvol`，就像`[@fileInfo]`对 的当前内容进行浅拷贝一样`@fileInfo`。

# objective-c - Core Plot x 轴值缩放并添加按钮

> ID：10548836
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:22.473
> 
> 标签：objective-c, ios, core-plot

我有个问题。我需要更改 x 轴值比例。现在是 0, 0.5, 1.0, 1.5, 2.0... 我希望它是 0, 1, 2, 3... 我该怎么做呢？我正在使用的代码如下所示：

```
graph = [[CPTXYGraph alloc] initWithFrame:self.view.bounds];
[graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];
CPTGraphHostingView *hostingView = (CPTGraphHostingView*)self.view;
hostingView.hostedGraph = graph;
graph.paddingTop = 20;
graph.paddingRight = 20;
graph.paddingLeft = 20;
graph.paddingBottom = 50;

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace*)graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(@"-0.5") length:CPTDecimalFromString(@"5")];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromString(@"-2.5") length:CPTDecimalFromString(@"5")];
plotSpace.allowsUserInteraction = YES;

CPTScatterPlot *mainPlot = [[[CPTScatterPlot alloc] initWithFrame:graph.bounds] autorelease];
CPTMutableLineStyle *line = [[CPTMutableLineStyle alloc] init];
[line setLineColor:[CPTColor blueColor]];
[line setLineWidth:1.5f];
mainPlot.identifier = @"Main Plot";
[mainPlot setDataLineStyle:line];
mainPlot.dataSource = self;
[graph addPlot:mainPlot];
[line release]; 
```

而且我还必须在视图底部添加一个按钮。我在 IB 中拔出一个按钮并将其连接到我的插座。我尝试通过使用将它放在前面，`[hostingView.superview bringSubviewToFront:backButton];`但我没有任何运气。我该如何做到这一点？

编辑：我设法通过使用将该按钮带到前面，`[self.view bringSubviewToFront:backButton];`但它反映了视图中间的按钮。不知道这怎么可能？它如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:24:19.037

Core Plot 中有几个轴标签策略可用。Plot Gallery 示例应用程序中有一个演示，它显示了所有可用的策略。

您不应将任何子视图添加到图形托管视图。相反，将托管视图和按钮都添加为另一个视图的子视图。

# jquery - 更改jquery工具的rangeinput的范围

> ID：10548838
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:32.573
> 
> 标签：jquery, jquery-tools

我找不到更改 jquery 工具的最大范围输入的方法。默认值为 300。我希望它变为 400，但我找不到任何资源。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:39:58.853

他们在他们的网站[http://www.jquerytools.org/documentation/rangeinput/index.html中明确说明了这个选项](http://www.jquerytools.org/documentation/rangeinput/index.html)

您可以查看此演示[http://www.jquerytools.org/demos/rangeinput/index.html](http://www.jquerytools.org/demos/rangeinput/index.html)

您必须在输入元素中使用 max 属性

```
<input type="range" name="test" min="100" max="400" value="150" /> 
```

这是一个工作[小提琴](http://jsfiddle.net/joycse06/VnMaY/1/)

# spring-mvc - Spring MVC - 映射/到控制器

> ID：10548839
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:48.363
> 
> 标签：spring-mvc

如何将“/”请求映射到控制器？应用程序的上下文名称是 reac，我想在上下文发送到服务器时调出登录页面。我有这样的 REACController：

```
@Controller
public class REACController {
@RequestMapping(value="/", method=RequestMethod.GET)
    public String onLaunch() {
        return "LoginPage";
    }
} 
```

我面临着可怕的 404 错误，“资源 /reac/ 不可用”。通过 Controller 类处理对“/”的请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:52:13.667

Are you trying to secure the site? In which case you might be better off hooking up Spring Security into the project and have it manage the URL security for you.

But if you really want to map some view to the / then in your application context you can also add something like this

```
<beans xmlns="http://www.springframework.org/schema/beans"     xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd     http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<!--facilitates mapping of Dispatcher Servlet to /-->
<mvc:default-servlet-handler/>
<mvc:view-controller path="/" view-name="login"/>
</beans> 
```

this will forward the / requests to the login view using parameterizable view controller

Still unsure of the reason why you would do something like this as Filter would be a better option even if you were wanting to do login/security check without Security frameworks.

Edit: here is how you can do it through controller itself

```
 @RequestMapping("/")
 @Controller
 public class MyController {

     @RequestMapping()
     public String showMeTheLoginPage() {
         return "redirect:/login.html";
     }
 } 
```

# asp.net - 我可以从 C# 应用程序运行 vb 脚本吗？

> ID：10548840
> 
> 赞同：0
> 
> 时间：2012-05-11T09:30:52.260
> 
> 标签：asp.net

我可以从 C# 应用程序运行 vb 脚本吗？任何人都可以为我提供带有考试的 vb 脚本，例如按钮单击显示消息，如果特定面板可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:36:50.510

我不认为你可以在 c# 代码中运行 vb 脚本代码，但是这个[How to call a VBScript file in a C# application?](https://stackoverflow.com/questions/200422/how-to-call-a-vbscript-file-in-a-c-sharp-application) 能胜任

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:39:26.857

您不能直接在同一个 C# 进程中执行 VBScript，但您*可以*[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)使用该类通过单独的进程执行它。

```
Process.Start("path to vbscript", "arguments if any"); 
```

* * *

如果您在浏览器上谈论*客户端*，那么这只能在 IE（唯一支持 vbscript 的浏览器）上工作。

# mongodb - Trello 全文搜索如何工作？

> ID：10548846
> 
> 赞同：0
> 
> 时间：2012-05-11T09:31:29.373
> 
> 标签：mongodb, full-text-search, trello

AFAIK Trello 使用 MongoDB 保存数据。MongoDB 不支持全文搜索。

然而 Trello 的全文搜索既**全面**又**非常快速**。

那个怎么样？它如何处理被*标记的*单词/短语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:57:27.247

虽然 Trello 的数据库中有数百万个文档，但给定用户关心（甚至有权阅读）的实际信息集实际上非常小。

正因为如此，Trello 能够使用相对简单的搜索机制（例如使用正则表达式和`$where`子句）并且仍然非常快速地返回结果。

披露：我为 Trello.com 编写了搜索代码

# javascript - Javascript如何使用特定规则进行子字符串全局替换

> ID：10548848
> 
> 赞同：-2
> 
> 时间：2012-05-11T09:31:46.803
> 
> 标签：javascript, string

我想要一个可以用特定规则替换大字符串中的子字符串的函数。

例如，我希望`pageX`字符串中的每个数字都增加 10。

```
function replace(str, increment){} 
```

做`replace("pageX : 100, pageY: 200,......pageX : 120...", 10)`

会得到`"pageX : 110, pageY: 200,......pageX : 130..."`

我知道 like `string.replace(/pageX :/g,someStr)`can do `replaceAll`，但没有规则可以应用。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:38:37.980

如何使用[`replace`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)函数回调：

```
var string = "pageX : 100, pageY: 200,......pageX : 120...";
string = string.replace(/(\d+)/g, function(match, contents) {
    return (+contents + 10);
});
console.log(string); 
```

**演示：http:** [//jsfiddle.net/ytptN/](http://jsfiddle.net/ytptN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:38:25.737

使用带有模式的正则[表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)`\d+`来匹配所有数字，并使用[`String.replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)函数调用生成替换的能力。乘以（或以其他方式）修改匹配的数字并将它们放回去。

# qt - 如何从 Qt 调用 SCP 命令

> ID：10548855
> 
> 赞同：1
> 
> 时间：2012-05-11T09:32:28.823
> 
> 标签：qt

我想通过 SCP 命令将文件从本地机器复制到远程服务器。我能够通过 Cygwin 复制文件。现在我想通过 Qt 来实现这一点。如何调用“SCP”命令？如果我使用QProcess，那么我将如何了解密码提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:41:26.860

要求您的用户使用公钥，您的问题就解决了：[https ://hkn.eecs.berkeley.edu/~dhsu/ssh_public_key_howto.html](https://hkn.eecs.berkeley.edu/~dhsu/ssh_public_key_howto.html)

scp、ssh、sftp 等故意使密码难以获取，而不是直接从用户那里获取密码。具体来说，诸如此类的事情`expect`将不起作用。如果他们这样做了，他们就不会安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:39:42.627

据我所知，无论您尝试以何种方式调用命令，您都会遇到与**scp**提示输入密码相同的问题（例如，即使您尝试编写调用*scp的**bash*脚本）我知道的可能解决方案包括：

 **   创建一个公钥/私钥并分发它们，这样您就不需要提示输入密码了。关于这个主题的一篇有趣的论文在[这里](http://www.gentoo.org/doc/en/articles/openssh-key-management-p1.xml)
*   创建一个`expect`脚本并使用 QProcess 调用它*

# google-bigquery - BigQuery 的原生 JSON 支持？

> ID：10548856
> 
> 赞同：3
> 
> 时间：2012-05-11T09:32:39.113
> 
> 标签：google-bigquery

Google BigQuery 是否有计划实施原生 JSON 支持？

我正在考虑将 hive 数据 (~20T) 迁移到 Google BigQuery，但 Hive 中的表定义包含 BigQuery 不支持的映射类型。

例如，下面的 HiveQL：

```
select gid, payload['src'] from data_repository; 
```

虽然，它可以通过使用正则表达式来解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T14:12:51.873

自 2012 年 10 月 1 日起，BigQuery 支持以换行符分隔的 JSON 进行导入和导出。

博文：http: [//googledevelopers.blogspot.com/2012/10/got-big-json-bigquery-expands-data.html](http://googledevelopers.blogspot.com/2012/10/got-big-json-bigquery-expands-data.html)

有关数据格式的文档：[https ://developers.google.com/bigquery/docs/import#dataformats](https://developers.google.com/bigquery/docs/import#dataformats)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:47:42.803

您最好的选择是在导入之前将所有类型强制转换为 csv，如果您有复杂的字段，请通过查询中的正则表达式将它们分解（如您所建议的那样）。

也就是说，我们正在积极研究对新输入格式的支持，并对哪些格式最有用的反馈感兴趣。底层查询引擎 ( [Dremel](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=6&ved=0CI0BEBYwBQ&url=http%3A%2F%2Fresearch.google.com%2Fpubs%2Farchive%2F36632.pdf&ei=2i-tT-qBEKHliALVwpHqBg&usg=AFQjCNEzKp2CK_JKM_U2XCfDn9qjf0MKMA&sig2=t2SHkiy-WDftsQlcna_T6g) ) 支持类似于 hive 映射类型的类型，但是 BigQuery 目前不公开用于提取嵌套记录的机制。

# wordpress - Buddy Press 查询显示的用户帖子

> ID：10548859
> 
> 赞同：0
> 
> 时间：2012-05-11T09:32:57.180
> 
> 标签：wordpress, buddypress

在自定义用户选项卡中，我试图显示该用户的帖子。（显示的用户，未登录的用户）。

我在论坛上找到了这段代码，但它对我不起作用。它应该只拉“显示用户”的帖子，而不是显示所有帖子。

```
<?php 
global $bp; 
query_posts( 'author=' . $bp->displayed_user->id ); if (have_posts()) : 
```

?>

我究竟做错了什么？

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:18:10.290

I was looking for the same thing, and thank you with your piece of code, it works for me now :) I have the other piece of the puzzle : find bp_core_functions.php in your buddypress plugin folder, and add this :

```
function bp_dump() {
    global $bp;

    foreach ( (array)$bp as $key => $value ) {
        echo '<pre>';
        echo '<strong>' . $key . ': </strong><br />';
        print_r( $value );
        echo '</pre>';
    }
    die;
}
add_action( 'wp', 'bp_dump' ); 
```

That's all.

# c++ - 使 auto_ptr 成为朋友类

> ID：10548864
> 
> 赞同：2
> 
> 时间：2012-05-11T09:33:03.597
> 
> 标签：c++, friend, auto-ptr

这是我的项目的示例代码。

我必须将 std::auto_ptr 设为朋友类，以便它可以访问私有成员。

```
 #include "stdafx.h"
  #include <map>
  #include <iostream>

  //sample namespace
  namespace test
  {
    //class A
    class A
    {
    public:
      //making class B to friend , so that it can access private members
      friend class B;

    private:
    int i;

     //constructor - private
     A(int in)
      {
        i = in;
      }
      // private destructor;
      ~A()
      {
        std::cout<<"\n Ending";
        getchar();
     }
   };

    //map to store A pointer
    typedef std::map<int, std::auto_ptr<A>> MAP;

   //class B, friend of A
  class B
  {
  private:
    MAP Map;
  public:
  //making auto_ptr to a friend class , so that it can call the destruct all the A       pointer. 
  friend class std::auto_ptr; //Getting error like" error C2990: 'std::auto_ptr' 
//: non-class template has already been declared as a class template
  B()
  {
    std::auto_ptr<A> a(new A(1));
    std::auto_ptr<A> b(new A(2));
    std::auto_ptr<A> c(new A(3));
    Map[0] = a;
    Map[1] = b;
    Map[2] = c;
  }
  ~B()
  {

  }
};
}

int _tmain(int argc, _TCHAR* argv[])
{
  using namespace test;
  B ab;
return 0;
} 
```

但是，当我尝试将其交给朋友时，我遇到了错误...请帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:35:30.290

因为`auto_ptr`是一个模板类，你需要这样的东西：

```
friend std::auto_ptr<B>; 
```

# c# - C# 设置 Excel 单元格背景不透明度

> ID：10548866
> 
> 赞同：0
> 
> 时间：2012-05-11T09:33:17.063
> 
> 标签：c#, excel

我正在努力弄清楚如何使用 C# 设置单元格背景颜色的不透明度。

有什么想法吗？这甚至可能吗？

谢谢！

# hibernate - JPA Criteria（和 JPQL）右外连接

> ID：10548868
> 
> 赞同：1
> 
> 时间：2012-05-11T09:33:23.503
> 
> 标签：hibernate, jpa

我有两个实体 A，B 关系正在进行，可选，从 A 到 B 的一对多（多方），我想选择每个 B 及其相关的 A（或者如果没有 A 相关BI想要null），这可以通过右外连接轻松完成，但是hibernate不支持标准API中的右外连接的问题，所以我想要解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T14:59:44.083

根据您的情况，您想使用左连接。喜欢

```
select b from B b left join A a 
where a.fkey is null 
```

或者如果您在加入之前需要任何标准，请使用

```
select b from B b left join A a with a.type = 1
where a.fkey is null 
```

这与将服务于与“和”与“开”子句一起服务的类似目的

例子：

```
select t from Template t left join t.profiles p with p.type = 1
where p.id is null 
```

这将获得所有没有类型 1 的配置文件的模板

# javascript - ie7的css3框架

> ID：10548872
> 
> 赞同：0
> 
> 时间：2012-05-11T09:33:52.670
> 
> 标签：javascript, css, internet-explorer-7

我想知道你们在 IE7 中需要使用 css3 功能时使用什么。一些前端开发人员告诉我“CSS pie”是要走的路。它主要用于圆角和阴影。

我应该获得某种 css3 框架，还是为每个 css3 属性获得一个单独的“修复”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:52:56.400

PIE not only support rounded corners and shadows here is full list of features

[http://css3pie.com/documentation/supported-css3-features/](http://css3pie.com/documentation/supported-css3-features/)

Here is Comparing PIE to Other CSS3 Products

[http://css3pie.com/documentation/product-comparison/](http://css3pie.com/documentation/product-comparison/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:37:39.460

过去我在[IE-CSS3](http://fetchak.com/ie-css3/%20IE-CSS3)上遇到过一些运气，但主要是针对少数几个功能。

# asp.net - 网页上的 Ajax 方法“未定义错误”？

> ID：10548876
> 
> 赞同：0
> 
> 时间：2012-05-11T09:34:22.723
> 
> 标签：asp.net, ajax, iis, iis-7

Ajax 功能无法在 ASP.Net 中出现“未定义错误”的网页上运行？如何解决此错误？我尝试在 webconfig 中添加以下内容，

```
<httphandler>
    <add verb="GET"  path="ScriptResource.axd"  type="Microsoft.Web.Handlers.ScriptResourceHandler" validate="false"/>
<httphandler>. 
```

我仍然得到同样的错误。得到未定义错误的原因是什么以及如何解决这个问题？我的 asp 网站是在 IIS 7 中配置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:38:13.970

您确定在调用 ajax 之前已将最新的 jquery.js 添加到您的网页吗？

# javascript - “请求标头字段授权是不允许的”错误 - Tastypie

> ID：10548883
> 
> 赞同：31
> 
> 时间：2012-05-11T09:34:43.940
> 
> 标签：javascript, django, backbone.js, tastypie

当我尝试使用 AJAX 和 Tastypie 执行 HTTP 请求时，我在对我的 Tastypie 资源使用 ApiKeyAuthentication 时收到以下错误：

```
XMLHttpRequest cannot load http://domain.com/api/v1/item/?format=json&username=popo&api_key=b83d21e2f8bd4952a53d0ce12a2314c0ffa031b1\. Request header field Authorization is not allowed by Access-Control-Allow-Headers. 
```

关于如何解决这个问题的任何想法？

以下是来自 Chrome 的请求标头：

```
Request Headersview source

Accept:*/*
Accept-Charset:
ISO-8859-1,utf-8;q=0.7,*;q=0.3

Accept-Encoding:gzip,deflate,sdch

Accept-Language:en-US,en;q=0.8

Access-Control-Request-Headers:
origin, authorization, access-control-allow-origin, accept, access-control-allow-headers

Access-Control-Request-Method:
GET 
```

以下是来自 Chrome 的响应标头：

```
Response Headersview source

Access-Control-Allow-Headers:
Origin,Content-Type,Accept,Authorization

Access-Control-Allow-Methods:
POST,GET,OPTIONS,PUT,DELETE

Access-Control-Allow-Origin:*

Connection:keep-alive

Content-Length:0
Content-Type:
text/html; charset=utf-8

Date:Fri, 11 May 2012 21:38:35 GMT

Server:nginx 
```

如您所见，它们都有授权标头，但授权不起作用。

这是我用来编辑响应标头的 django 中间件： [https ://gist.github.com/1164697](https://gist.github.com/1164697)

编辑：我发现了问题。我试图连接到 www.domain.com，它只接受 domain.com

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-07-03T14:22:15.100

Antyrat 的回答并不完整。

您必须指定服务器允许的标头；在您的情况下**Authorization**。

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE
Access-Control-Allow-Headers: Authorization 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-06T06:00:50.553

虽然我赞成@Manuel Bitto 的答案，但
我想发布另一个答案，其中包含一个完整的 Cors 过滤器，适用于 Apache tomcat 5.x：

```
public class CorsFilter implements Filter {

    public CorsFilter() { }

    public void init(FilterConfig fConfig) throws ServletException { }

    public void destroy() { }

    public void doFilter(

            ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        HttpServletResponse httpServletResponse = (HttpServletResponse)response;
        httpServletResponse.addHeader("Access-Control-Allow-Origin", "*");
        httpServletResponse.addHeader("Access-Control-Allow-Methods", "GET, POST, PUT, OPTIONS, DELETE");
        httpServletResponse.addHeader("Access-Control-Allow-Headers", "Authorization");

        chain.doFilter(request, response);
    }
} 
```

我建议特别注意将 OPTIONS 添加到“Access-Control-Allow-Methods”标头值中。
这样做的原因是，根据Mozilla 提供的解释，[如果](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)
您的请求（比如说 POST）包含特殊的标头或内容类型（这是我的情况），那么 XMLHttpRequest 对象将生成一个额外的 OPTIONS 调用，您需要在代码中解决。
我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:37:09.840

发生这种情况是因为[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

您需要从请求所在的同一域进行 AJAX 调用。或者进行服务器端更改，允许来自外部域的请求。

要解决此问题，您需要通过在标头中允许您的外部域来更改[http://domain.com的标头：](http://domain.com)

```
Access-Control-Allow-Origin: * 
```

阅读[更多](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T01:10:09.183

问题是 www.domain.com 被视为与 domain.com 不同。domain.com 有效，但是当我使用 www.domain.com 时，它检测到我正在执行来自不同域的请求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-17T09:58:06.883

我知道这个问题比较老。

但是今天我在添加 owin 后遇到了同样的 cors 问题。经过谷歌搜索并尝试各种解决方案。我通过在下面添加解决了 cors 问题

```
<remove name="ExtensionlessUrlHandler-Integrated-4.0" />
<remove name="OPTIONSVerbHandler" />
<remove name="TRACEVerbHandler" /> 
```

欲了解更多详情，请点击以下链接。谢谢。

[ [http://benfoster.io/blog/aspnet-webapi-cors]](http://benfoster.io/blog/aspnet-webapi-cors])

# mysql - Mysql query - Count items grouping by year and including "sub-counts"

> ID：10548885
> 
> 赞同：0
> 
> 时间：2012-05-11T09:34:52.710
> 
> 标签：mysql, count, subquery, aggregate

I have a table "events" like this

```
 id   |  user_id   |   date     |  is_important
---------------------------------------------------
   1    |     3      | 01/02/2012 |       0
   1    |     3      | 01/02/2012 |       1
   1    |     3      | 01/02/2011 |       1
   1    |     3      | 01/02/2011 |       1
   1    |     3      | 01/02/2011 |       0 
```

Basically, what I need to get is this:

```
(for the user_id=3)

   year   |  count   |   count_importants
--------------------------------------------
  2012    |    2     |          1
  2011    |    3     |          2 
```

I've tried this:

```
SELECT YEAR(e1.date) as year,COUNT(e1.id) as count_total, aux.count_importants
FROM events e1 
LEFT JOIN 
(
  SELECT YEAR(e2.date) as year2,COUNT(e2.id) as count_importants
  FROM `events` e2
  WHERE e2.user_id=18 
  AND e2.is_important = 1
  GROUP BY year2
) AS aux ON aux.year2 = e1.year
WHERE e1.user_id=18 
GROUP BY year 
```

But mysql gives me an error

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'aux ON aux.year2 = e1.year WHERE e1.user_id=18 GROUP BY year LIMIT 0, 30' at line 10 
```

And i've run out of ideas to make this query u_Uº. Is it possible to do this using only one query??

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:49:56.193

Edit: I think I over-complicated things. Can't you just do this in a simple query?

```
SELECT 
    YEAR(`year`) AS `year`, 
    COUNT(`id`) AS `count`, 
    SUM(`is_important`) AS `count_importants`
FROM `events`
WHERE user_id = 18
GROUP BY YEAR(`year`) 
```

* * *

Here's the big solution that adds summaries :)

Consider using [MySQL GROUP BY ROLLUP](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html). This will basically do a similar job to a normal GROUP BY, but will add rows for the summaries too.

In the example below, you see two records for Finland in 2000, for £1500 and £100, and then a row with the **NULL** product with the combined value of £1600\. It also adds NULL rollup rows for each dimension grouped by.

From the manual:

```
SELECT year, country, product, SUM(profit)
FROM sales
GROUP BY year, country, product WITH ROLLUP

+------+---------+------------+-------------+
| year | country | product    | SUM(profit) |
+------+---------+------------+-------------+
| 2000 | Finland | Computer   |        1500 |
| 2000 | Finland | Phone      |         100 |
| 2000 | Finland | NULL       |        1600 |
| 2000 | India   | Calculator |         150 |
| 2000 | India   | Computer   |        1200 |
| 2000 | India   | NULL       |        1350 |
| 2000 | USA     | Calculator |          75 |
| 2000 | USA     | Computer   |        1500 |
| 2000 | USA     | NULL       |        1575 |
| 2000 | NULL    | NULL       |        4525 |
| 2001 | Finland | Phone      |          10 |
| 2001 | Finland | NULL       |          10 |
| 2001 | USA     | Calculator |          50 |
| 2001 | USA     | Computer   |        2700 |
| 2001 | USA     | TV         |         250 |
| 2001 | USA     | NULL       |        3000 |
| 2001 | NULL    | NULL       |        3010 |
| NULL | NULL    | NULL       |        7535 |
+------+---------+------------+-------------+ 
```

Here's an example the specifically matches your situation:

```
SELECT year(`date`) AS `year`, COUNT(`id`) AS `count`, SUM(`is_important`) AS `count_importants`
FROM new_table
GROUP BY year(`date`) WITH ROLLUP; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:43:29.040

The alias `year` - `year(e1.date) AS year` is not visible in JOIN ON clause. Try to use this condition -

```
...
LEFT JOIN
(
...
) ON aux.year2 = year(e1.date) -- e1.year --> year(e1.date)
... 
```

# delphi - 线程关闭期间Win64 Delphi RTL中的内存泄漏？

> ID：10548888
> 
> 赞同：36
> 
> 时间：2012-05-11T09:35:10.873
> 
> 标签：delphi, memory-leaks, delphi-xe2, win64

很长一段时间以来，我注意到我的服务器应用程序的 Win64 版本泄漏内存。虽然 Win32 版本在内存占用相对稳定的情况下运行良好，但 64 位版本使用的内存定期增加 - 可能 20Mb/天，没有任何明显的原因（不用说，FastMM4 没有报告任何内存泄漏） . 32 位和 64 位版本的源代码相同。该应用程序是围绕 Indy TIdTCPServer 组件构建的，它是一个高度多线程的服务器，连接到数据库，用于处理由 Delphi XE2 制作的其他客户端发送的命令。

我花了很多时间检查自己的代码并试图理解为什么 64 位版本会泄漏这么多内存。我最终使用了旨在跟踪内存泄漏的 MS 工具，如 DebugDiag 和 XPerf，似乎 Delphi 64 位 RTL 中存在一个基本缺陷，每次线程与 DLL 分离时都会导致一些字节泄漏。对于必须 24/7 不间断运行且无需重新启动的高度多线程应用程序，此问题尤为重要。

我用一个非常基本的项目重现了这个问题，该项目由一个主机应用程序和一个库组成，两者都是用 XE2 构建的。DLL 与主机应用程序静态链接。宿主应用程序创建只调用虚拟导出过程并退出的线程：

这是该库的源代码：

```
library FooBarDLL;

uses
  Windows,
  System.SysUtils,
  System.Classes;

{$R *.res}

function FooBarProc(): Boolean; stdcall;
begin
  Result := True; //Do nothing.
end;

exports
  FooBarProc; 
```

宿主应用程序使用一个计时器来创建一个只调用导出过程的线程：

```
 TFooThread = class (TThread)
  protected
    procedure Execute; override;
  public
    constructor Create;
  end;

...

function FooBarProc(): Boolean; stdcall; external 'FooBarDll.dll';

implementation

{$R *.dfm}

procedure THostAppForm.TimerTimer(Sender: TObject);
begin
  with TFooThread.Create() do
    Start;
end;

{ TFooThread }

constructor TFooThread.Create;
begin
  inherited Create(True);
  FreeOnTerminate := True;
end;

procedure TFooThread.Execute;
begin
  /// Call the exported procedure.
  FooBarProc();
end; 
```

这是一些使用 VMMap 显示泄漏的屏幕截图（查看名为“Heap”的红线）。以下屏幕截图是在 30 分钟间隔内拍摄的。

32位二进制显示增加了16个字节，这是完全可以接受的：

[![32 位版本的内存使用情况](../Images/69a85f555cb003d8ba8b3969fbb144a4.png)](https://i.stack.imgur.com/aJVgX.png)

64位二进制显示增加了12476字节（从820K到13296K），问题比较多：

[![64 位版本的内存使用情况](../Images/f41e5e90406f5016bcf0938377335a85.png)](https://i.stack.imgur.com/D6kwE.png)

堆内存的不断增加也被 XPerf 证实：

[XPerf 用法](https://web.archive.org/web/20120518230757/http://desmond.imageshack.us/Himg825/scaled.php?server=825&filename=soxperf.png&res=landing)

使用 DebugDiag 我能够看到分配泄漏内存的代码路径：

```
LeakTrack+13529
<my dll>!Sysinit::AllocTlsBuffer+13
<my dll>!Sysinit::InitThreadTLS+2b
<my dll>!Sysinit::::GetTls+22
<my dll>!System::AllocateRaiseFrame+e
<my dll>!System::DelphiExceptionHandler+342
ntdll!RtlpExecuteHandlerForException+d
ntdll!RtlDispatchException+45a
ntdll!KiUserExceptionDispatch+2e
KERNELBASE!RaiseException+39
<my dll>!System::::RaiseAtExcept+106
<my dll>!System::::RaiseExcept+1c
<my dll>!System::ExitDll+3e
<my dll>!System::::Halt0+54
<my dll>!System::::StartLib+123
<my dll>!Sysinit::::InitLib+92
<my dll>!Smart::initialization+38
ntdll!LdrShutdownThread+155
ntdll!RtlExitUserThread+38
<my application>!System::EndThread+20
<my application>!System::Classes::ThreadProc+9a
<my application>!SystemThreadWrapper+36
kernel32!BaseThreadInitThunk+d
ntdll!RtlUserThreadStart+1d 
```

Remy Lebeau[在 Embarcadero 论坛上帮助我](https://forums.embarcadero.com/thread.jspa?messageID=456502&tstart=0)了解正在发生的事情：

> 第二次泄漏看起来更像是一个明确的错误。在线程关闭期间，正在调用 StartLib()，它调用 ExitThreadTLS() 以释放调用线程的 TLS 内存块，然后调用 Halt0() 以调用 ExitDll() 以引发由 DelphiExceptionHandler() 捕获的异常以调用 AllocateRaiseFrame( )，它在访问名为 ExceptionObjectCount 的 threadvar 变量时间接调用 GetTls() 和 InitThreadTLS()。这将重新分配仍在关闭过程中的调用线程的 TLS 内存块。因此，StartLib() 不应该在 DLL_THREAD_DETACH 期间调用 Halt0()，或者 DelphiExceptionHandler 在检测到引发 _TExitDllException 时不应该调用 AllocateRaiseFrame()。

对我来说似乎很清楚，Win64 处理线程关闭的方式存在一个重大缺陷。这种行为禁止开发任何必须在 Win64 下 27/7 运行的多线程服务器应用程序。

所以：

1.  你觉得我的结论怎么样？
2.  你们有没有解决这个问题的方法？

[质检报告 105559](https://web.archive.org/web/20171220162905/http://qc.embarcadero.com/wc/qcmain.aspx?d=105559)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T01:45:25.870

一个非常简单的解决方法是重用线程而不是创建和销毁它们。线程非常昂贵，您也可能会获得性能提升......不过调试的荣誉......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-07T14:53:29.983

为了避免异常内存泄漏陷阱，您可以尝试在 FoobarProc 周围放置一个 try/except。也许不是为了一个明确的解决方案，而是为了看看为什么首先提出了这个问题。

我通常有这样的事情：

```
try
  FooBarProc()
except
  if IsFatalException(ExceptObject) then // checks for system exceptions like AV, invalidop etc
    OutputDebugstring(PChar(ExceptionToString(ExceptObject))) // or some other way of logging
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-16T04:15:04.177

我使用的是Delphi 10.2.3，所描述的问题似乎仍然存在，至少在以下情况下。

```
// Remark: My TFooThread is created within the 64 Bit DLL:

procedure TFooThread.Execute;
begin
 while not terminated do
  try
   ReadBlockingFromIndySocket();
   ProcessData();
  except on E:Exception do
   begin
    LogTheException(E.Message);
    // Leave loop and thread
    Abort;
   end
  end;
end; 
```

每当离开循环/线程时，这都会泄漏内存。MadExcept 泄漏报告显示异常对象没有被破坏，在我的情况下，当远程关闭连接时主要是 EIdConnClosedGracefully。问题被发现是 Abort 语句离开循环和线程。泄漏报告中的迹象似乎证明了@RemyLebeau 的观察。在主程序而不是 64 位 DLL 中运行完全相同的代码不会泄漏任何内存。

解决方案：将 Abort 语句与 Exit 交换。

结论：64位DLL中的线程执行函数不能有异常（Abort也是异常），否则异常会导致内存泄漏。

至少这对我有用。

# jquery - 元素位置的跨浏览器兼容性问题

> ID：10548891
> 
> 赞同：0
> 
> 时间：2012-05-11T09:35:15.037
> 
> 标签：jquery, cross-browser

我有表 id=target。我需要在表格中移动元素。我需要使用相对于父对象的对象。

```
function StartVisual() {

    $("#man").attr('src', '/content/games/kamikaze2/go_right0.gif');
    $("#man").attr("style", "position:absolute;bottom:10px;left:70px;display:block;visibility:visible;");

    var left = $("#man").position().left;//man moved element
    alert(left);
} 
```

在 Opera 中我得到 70，在 Mozilla 中得到 300。在 Opera 中，我得到绝对 Mozilla 的相对重要性

帮助我，我需要获取或绝对或相对，但在所有浏览器中都一样

**更新：** 适用于其他浏览器以及歌剧。

**答案：**我应该用位置偏移代替

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:51:10.187

Try using a CSS Reset option. IMO [This one](http://meyerweb.com/eric/tools/css/reset/) by Eric Meyer is one of the most commonly used css resetting stylesheets. Resetting your css will give you a certain bit of control in preventing such idiosyncrasies.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:30:27.577

我应该使用而不是位置被偏移

# android - ViewPageIndicator- Jake Wharton- 为什么带有 viewpager 的选项卡显示的标题与 ICS 不同？

> ID：10548894
> 
> 赞同：2
> 
> 时间：2012-05-11T09:35:41.650
> 
> 标签：android, android-ui, android-actionbar, android-titlebar

我附上图片以更详细地解释我的问题。还附加了android清单。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="XXXXXXXXXX"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:targetSdkVersion="15" android:minSdkVersion="8"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
    android:hardwareAccelerated="true">        
    <activity
        android:label="@string/app_name"
        android:name="TabsMainActivity"

<!-- If I remove the line below I get normal 
ICS action bar instead of title bar u see in below image -->

        android:theme="@style/Theme.PageIndicatorDefaults">  

        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

此外，如果您看到编辑文本和微调器 UI，它就像我们在 ICS 下面的 android 版本上看到的一样。屏幕截图来自我运行 ICS 4.0.4 的手机。 ![在 VPI 中带有标题的问题](../Images/0f09f94b6e1dd036743877e530ea6973.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:29:16.710

我通过从 ViewPagerIndicator 编辑 vpi__styles.xml 解决了这个问题。我编辑之前的代码是： -

```
<style name="Theme.PageIndicatorDefaults" parent="android.Theme">
    <item name="vpiCirclePageIndicatorStyle">@style/Widget.CirclePageIndicator</item>
    <item name="vpiTitlePageIndicatorStyle">@style/Widget.TitlePageIndicator</item>
    <item name="vpiTabPageIndicatorStyle">@style/Widget.TabPageIndicator</item>
    <item name="vpiTabTextStyle">@style/Widget.TabPageIndicator.Text</item>
</style> 
```

我编辑文件后的代码是： -

```
<style name="Theme"></style>  <!-- I declared new style which dont have parent with android.Theme -->
<style name="Theme.PageIndicatorDefaults" parent="Theme">  <!-- Extended this style from style I declared above -->
    <item name="vpiCirclePageIndicatorStyle">@style/Widget.CirclePageIndicator</item>
    <item name="vpiTitlePageIndicatorStyle">@style/Widget.TitlePageIndicator</item>
    <item name="vpiTabPageIndicatorStyle">@style/Widget.TabPageIndicator</item>
    <item name="vpiTabTextStyle">@style/Widget.TabPageIndicator.Text</item>
</style> 
```

这解决了问题并在 android 4 设备上显示操作栏而不是标题栏，在 android 2.1-2.3.x 设备上显示正常标题栏。

# jsf - 单击 h:selectOneRadio 时显示选项

> ID：10548897
> 
> 赞同：0
> 
> 时间：2012-05-11T09:35:47.233
> 
> 标签：jsf, primefaces

我有一个单选按钮，一旦选择它，我想显示几个与其相关的选项。这些选项位于相关的 bean 上。我怎么做？

```
<h:panelGrid columns="2" cellpadding="0" cellspacing="0" >
    <h:selectOneRadio value="#{managePaymentModel.reportFilter.options}" layout="pageDirection" label="Select Option" disabled="#{managePaymentModel.reportPreview}">
        <f:selectItems value="#{managePaymentModel.reportOptions}" var="type" itemValue="#{type.value}" itemLabel="#{type.label}" />
    </h:selectOneRadio>
</h:panelGrid> 
```

```
@Override
public Map reportSelector() {
    Map<Integer, String> map = new HashMap<Integer, String>();
    map.put(ManagePaymentBeanLocal.LIST_PAYMENTS_SUMMARY, "List of Payments Summary");
    map.put(ManagePaymentBeanLocal.LIST_PAYMENTS_DETAIL, "List of Payments Detail");
    return map;
}
@Override
public Map reportOptions(ReportFilter filter) {
    Map<Integer, String> option = new HashMap<Integer, String>();
    // report configurations
    switch (filter.getSelect()) {
        case ManagePaymentBeanLocal.LIST_PAYMENTS_SUMMARY:
        case ManagePaymentBeanLocal.LIST_PAYMENTS_DETAIL:
            option.put(ReportFilter.OPTION1, "By Beneficiary");
            option.put(ReportFilter.OPTION2, "By Reference");
            break;
    }
    return option;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:13:45.193

您可以将此代码放入您的 selectOneRadio

```
<f:ajax event="change" render="@form" /> 
```

这将更新后面的模型并重新渲染公式

# multithreading - 无论哪个线程最初使用互斥锁，任何线程通常如何释放非递归互斥锁？

> ID：10548900
> 
> 赞同：3
> 
> 时间：2012-05-11T09:36:07.343
> 
> 标签：multithreading, pthreads, mutex

[https://stackoverflow.com/a/189778/462608](https://stackoverflow.com/a/189778/462608)

> 在非递归互斥锁的情况下，没有所有权感，任何线程通常都可以释放互斥锁，无论哪个线程最初获取互斥锁。

我对互斥锁的研究是，当线程想要对共享对象做某事时，它会获取它，当它完成它想做的任何事情时，它会释放锁。同时其他线程可以休眠或自旋锁。

上面引用的意思是*“任何线程通常都可以释放互斥锁，无论哪个线程最初使用互斥锁。”* ?

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:00:36.260

这在不同的线程实现之间可能有所不同，但是由于您已经用“pthreads”标记了您的问题，我假设您对 pthread 互斥锁（而不是 vxworks 互斥锁，这显然是您提供的链接所描述的内容）感兴趣。

所以在 pthreads 中，规则是锁定互斥锁的同一个线程必须解锁它。您可以在互斥对象上设置属性，是否希望在违反此规则时生成错误，或者结果是否为未定义的行为（例如，对于调试与发布版本）。有关详细信息，请参见 pthread_mutexattr_settype 函数的手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T19:19:13.857

由不是锁定它的线程解锁 pthread_mutex_t 的规范取决于互斥体类型（充其量它返回错误）：

尝试在未锁定的线程上解锁互斥锁对于以下互斥锁类型是未定义的行为：

*   `PTHREAD_MUTEX_NORMAL`
*   `PTHREAD_MUTEX_DEFAULT`

`EPERM`尝试在未锁定的线程上解锁互斥锁会为以下类型返回错误 ( )：

*   `PTHREAD_MUTEX_ERRORCHECK`
*   `PTHREAD_MUTEX_RECURSIVE`

有关详细信息，请参阅[http://pubs.opengroup.org/onlinepubs/007904875/functions/pthread_mutex_lock.html](http://pubs.opengroup.org/onlinepubs/007904875/functions/pthread_mutex_lock.html)。

最重要的是，在不同的线程上解锁互斥锁是永远不可能的，即使事情似乎有效。

# java - java：运行 Swing 应用程序时出现致命错误（.6.0_18-b07）

> ID：10548901
> 
> 赞同：1
> 
> 时间：2012-05-11T09:36:08.317
> 
> 标签：java

下面添加了致命错误日志。`-Dsun.java2d.d3d=false`（解决方法）添加到 classpath 。仍然致命的错误来了。有人可以帮助解决这个问题吗？

```
java : A fatal error is coming while runnig Swing Application(.6.0_18-b07). 

A fatal error has been detected by the Java Runtime Environment:
  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d1668b0, pid=8116, tid=7428
   JRE version: 6.0_18-b07
Java VM: Java HotSpot(TM) Client VM (16.0-b13 mixed mode, sharing windows-x86 )
 Problematic frame:
C  [awt.dll+0xb68b0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:44:31.197

此类错误的一般提示：搜索`[awt.dll+0xb68b0]`-- 或其他问题的等效项。[这是顶部结果](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=d6f0ced1aee943ffffffffbe49e2bee033da9?bug_id=6961986)，底部有一个解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:38:23.710

这只是一个 JVM 错误 - 这意味着 Java 本身崩溃了（不是您的应用程序）。

除了升级您的 JRE 并希望问题得到解决之外，您无能为力。（除非您可以可靠地重现这一点，并且觉得您有数据可以为错误报告做出贡献。）

# android - 在 PhoneGap 中重新加载活动

> ID：10548903
> 
> 赞同：0
> 
> 时间：2012-05-11T09:36:19.063
> 
> 标签：android, cordova

如何使用 PhoneGap 在 Android 中刷新/重新加载活动/屏幕。如果在 PhoneGap 中不可能，我该如何在 JAVA 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:51:36.023

I donot know about PhoneGap. But in Java(Android) you can try this code -

```
startActivity(getIntent()); finish(); 
```

# iphone - 动画 setImage，延迟 setImage

> ID：10548905
> 
> 赞同：0
> 
> 时间：2012-05-11T09:36:20.907
> 
> 标签：iphone, objective-c, ios, xcode

我已经为此苦苦挣扎了几个星期。我有一个文字游戏，它会比较单词，当字母在正确的位置时，它会变成绿色。现在这一切都很好，唯一的事情是我希望这些字母不是同时出现，而是在它们之间有一段时间。我不知道该怎么做，我希望有人能帮助我。为了更清楚，这里有一些代码：

```
// RANDOM WORD 
unichar aChar7 = [textview.text characterAtIndex:0];
unichar aChar8 = [textview.text characterAtIndex:1];
unichar aChar9 = [textview.text characterAtIndex:2];
unichar aChar10 = [textview.text characterAtIndex:3];
unichar aChar11 = [textview.text characterAtIndex:4];
unichar aChar12 = [textview.text characterAtIndex:5];
//INPUT
unichar aChar1 = [labelsText.text characterAtIndex:0];
unichar aChar2 = [labelsText.text characterAtIndex:1];
unichar aChar3 = [labelsText.text characterAtIndex:2];
unichar aChar4 = [labelsText.text characterAtIndex:3];
unichar aChar5 = [labelsText.text characterAtIndex:4];
unichar aChar6 = [labelsText.text characterAtIndex:5];

if (aChar1 == aChar7){
    [imageview7 setImage:imageview1HG.image];
//(Wait 1 second)
if (aChar2 == aChar8){
    [imageview8 setImage:imageview2HG.image];
///Wait 1 second)
if (aChar3 == aChar9){
    [imageview9 setImage:imageview3HG.image];
//Wait 1 second)
if (aChar4 == aChar10){
    [imageview10 setImage:imageview4HG.image];
//wait 1 second
if (aChar5 == aChar11){
    [imageview11 setImage:imageview5HG.image];
 //wait 1 second
if (aChar6 == aChar12){
    [imageview12 setImage:imageview6HG.image]; 
```

我希望有人知道并可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:39:55.037

使用`dispatch_after()`：

```
double delayInSeconds = 1.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    // code to be executed on the main queue after delay
}); 
```

# eclipse - FDT：调试过程中发生内部错误

> ID：10548909
> 
> 赞同：1
> 
> 时间：2012-05-11T09:36:36.193
> 
> 标签：eclipse, actionscript-3, apache-flex, eclipse-plugin, fdt

我在 Mac OSX 上使用 FDT 3 企业版和 Flex 4.5 SDK

运行正常。

调试会引发内部错误：

```
java.lang.NullPointerException
at com.powerflasher.fdt.core.launch.debug.concrete.FDBVersionTools.versionParts(FDBVersionTools.java:44)
at com.powerflasher.fdt.core.launch.debug.concrete.FDBVersionTools.compare(FDBVersionTools.java:19)
at com.powerflasher.fdt.core.launch.debug.concrete.FDBVersionTools.lessOrEqual(FDBVersionTools.java:7)
at com.powerflasher.fdt.core.launch.debug.concrete.FDBVersionTools.inRange(FDBVersionTools.java:54)
at com.powerflasher.fdt.internal.core.debugger.adapter.FlexSdkVersionTools.covers(FlexSdkVersionTools.java:25)
at com.powerflasher.fdt.internal.core.debugger.adapter.FDBAdapterLoader.cover(FDBAdapterLoader.java:51)
at com.powerflasher.fdt.internal.core.debugger.adapter.FlexDebuggerLoader.searchAdapterLoader(FlexDebuggerLoader.java:88)
at com.powerflasher.fdt.internal.core.debugger.adapter.FlexDebuggerLoader.loadDebugger(FlexDebuggerLoader.java:81)
at com.powerflasher.fdt.core.launch.DebugSessionManager.getDebuggerFor(DebugSessionManager.java:50)
at com.powerflasher.fdt.core.launch.DebugSessionManager.launchSessionFor(DebugSessionManager.java:106)
at com.powerflasher.fdt.core.launch.DebugSessionManager.launchSessionAndKillOld(DebugSessionManager.java:146)
at com.powerflasher.fdt.ui.launch.StartDebuggerTestLaunchConfigurationDelegate.startDebugger(StartDebuggerTestLaunchConfigurationDelegate.java:36)
at com.powerflasher.fdt.internal.ui.launch.fcsh.MxmlcLaunchConfigurationDelegate.startDebugger(MxmlcLaunchConfigurationDelegate.java:348)
at com.powerflasher.fdt.internal.ui.launch.fcsh.AbstractFCSHLaunchConfigurationDelegate.launch(AbstractFCSHLaunchConfigurationDelegate.java:174)
at com.powerflasher.fdt.internal.ui.launch.fcsh.MxmlcLaunchConfigurationDelegate.launch(MxmlcLaunchConfigurationDelegate.java:237)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:853)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:866)
at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1069)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55) 
```

我没有使用任何不常见的调试/编译器参数

有没有人见过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:48:57.843

Flex 调试器 API 从 Flex 3.X - 4.0 发生了很大变化。这意味着您的旧 FDT（版本 3.x）可能与后来的 Flex SDK 不兼容。这就是您收到该错误的原因。

您需要升级到 5.5（或 FDT 4.5，如果您有 FDT 4 许可证）b/c FDT 团队不得不重写部分调试器以使其与 Flex 4.5+ 兼容。我们已尽最大努力将升级价格保持在最低水平。

[http://fdt.powerflasher.com/buy-download/](http://fdt.powerflasher.com/buy-download/)

# ruby-on-rails - rails验证，如何检查在其他字段范围内具有值的字段

> ID：10548916
> 
> 赞同：-2
> 
> 时间：2012-05-11T09:36:52.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, range

我有两个字段：

验证：bhp

验证：ps

现在如果 :bhp 的值为 80，

那么 :ps 的值应该在 :bhp 的 +-10 范围内，例如。[70..90] 在这里。

反之亦然

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:51:23.747

You can use custom validator.

Something like this:

```
validate :keep_ps_in_range_of_bhp

def keep_ps_in_range_of_bhp
  range = 10
  unless (bhp-ps).abs <= range
    errors.add(:ps, "should be in range +-#{range} of bhp")
  end
end 
```

Similar way you can add validator for the opposite case, but it makes sense only if you don't allow to change both this values (but even in this case I don't sure that it is really good approach).

# jakarta-ee - Veracode测试，检测和修复缺陷

> ID：10548918
> 
> 赞同：1
> 
> 时间：2012-05-11T09:37:08.577
> 
> 标签：jakarta-ee, web, security, entropy

我正在开发一个 Web 应用程序，该应用程序正在客户端进行部署、测试和上线。现在申请。处于测试模式。客户已使用 Veracode 测试工具来检查漏洞。我们发现了很多问题。在此之前我想告诉大家，我是这个 Veracode 漏洞修复的新手，我对这些问题了解不多。我在网上搜索过，但对于其中一些漏洞发现的信息很少。你能把我从下面列出的这些缺陷中拖出来吗？

1）密码学问题：熵不足。2）密码问题：使用硬编码密码密钥。3）违反信任边界

我在这个文件中面临的第一个缺陷

在 RandomPwdGenerator.java 文件中，我们正在生成密码。

你能告诉我这里的期望是什么吗？任何帮助appriciated.Thanx提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:41:39.007

我是 Veracode 产品经理。抱歉，如果您在这里遇到挑战。如果您的客户已让您登录 Veracode 平台，您可以使用 Triage Flaws 视图获取每个缺陷的解释以及指向有关 CWE、OWASP 和 WASC 项目等中的缺陷类型信息的指针。

如果您只有 PDF 报告，则在报告的每个部分都有一些关于修复缺陷的基本指南。

您也可以直接联系 Veracode 支持以获得更多帮助。

# php - php中的字符串匹配，有时有效，有时无效，我错过了什么？

> ID：10548922
> 
> 赞同：0
> 
> 时间：2012-05-11T09:37:11.157
> 
> 标签：php, mysql

所以我有一个搜索表单，当搜索结果页面加载时，顶部有一些跳转菜单，允许用户缩小结果范围。

跳转菜单显示从已发布表单中选择的搜索条件。

但是，在“端口”跳转菜单中，如果您选择布里斯托尔或爱丁堡，当您进入结果页面时，端口菜单不会将它们显示为选中状态。它适用于所有其他人......

这是我在游轮搜索框中的搜索选择代码

```
<select name="port" id="port">
<option selected value="%">All Ports...</option>
<option value="Bristol Avonmouth">Bristol Avonmouth</option>
<option value="Edinburgh Leith">Edinburgh Leith</option>
<option value="Glasgow Greenock">Greenock</option>
<option value="Hull">Hull</option>
<option value="Liverpool">Liverpool</option>
<option value="London, Tilbury">London Tilbury</option>
<option value="Newcastle">Newcastle</option>
</select> 
```

这是结果页面上的跳转菜单代码

```
<div id="cac">
    <h3>Sailing from...</h3>
    <p>&nbsp;</p>
    <p>
    <select name="jumpMenu3" id="jumpMenu3" onchange="MM_jumpMenu('parent',this,0)">
    <option value="">Select a port</option>
    <?php
    $ports = array(); 
    mysql_data_seek($cruises, 0);
    while ($row_cruises = mysql_fetch_assoc($cruises)) { 
    if (!in_array($row_cruises['fromport'], $ports)) {
        $ports[] = $row_cruises['fromport'];
    ?>
    <option value="index.php?subj=2&destination=<?php echo urlencode($row_cruises['destination']);?>&departs=<?php echo date('Ym',strtotime($row_cruises['departs']));?>&port=<?php echo urlencode($row_cruises['fromport']);?>"<?php if ($_GET['port'] == $row_cruises['fromport'] OR $_POST['port'] == $row_cruises['fromport']) {echo "selected=\"selected\"";}?>><?php echo $row_cruises['fromport']; ?></option>
    <?php } ;
    }
    if(mysql_num_rows($cruises) > 0) {
        mysql_data_seek($cruises, 0);
        $row_cruises = mysql_fetch_assoc($cruises);
    }
    ?>
    </select> 
```

我已经在数据库中检查了端口本身的拼写、大小写、间距……一切都很好。

也许我需要一个类似或通配符比较运算符？

嘟嘟嘟

已修复 - 端口查找不是针对端口表，而是针对邮轮表中为出发港口编写的内容，并且有一些邮轮输入错误...

富有的 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:49:11.710

尝试替换
`if ($_GET['port'] == $row_cruises['fromport'] OR $_POST['port'] == $row_cruises['fromport'])`
：
`if ($_GET['port'] == urlencode($row_cruises['fromport']) OR $_POST['port'] == urlencode($row_cruises['fromport']))`

# parsing - 最后的 antlr 未解析令牌不会产生错误

> ID：10548923
> 
> 赞同：1
> 
> 时间：2012-05-11T09:37:14.117
> 
> 标签：parsing, antlr, lexer

得到一个错误通常是不愉快的，但有时当你期待一个错误却没有得到它时，它也会令人不快。我的解析器不会为此字符串“2)”生成错误。请建议我一个解决方案？

```
grammar BasicArithmetic;

options {
  language = Java;
  output   = AST;
}

expression returns [double value]: 
p1=pm{$value=$pm.value;};

// never never reference FRAGMENTS from parsers
pm returns [double value]:
p1=dm{$value = $p1.value;}
    (PLUS^p2=dm{$value += $p2.value;}|
     MINUS^p2=dm{$value -= $p2.value;}
     )*;

dm returns [double value]:
  p1=atom {$value = $p1.value;}
    ( DIV^ p2=atom {$value /= $p2.value;}|
      MUL^ p2=atom {$value *= $p2.value;}|
      POW^ p2=atom {$value = Math.pow($value, $p2.value);}
    )*;

atom returns [double value]:
  p1=Number {$value = Double.parseDouble($p1.text);}  
   | LP p2=pm RP{$value = $p2.value;};

Number: Digit+;
MUL : '*';
DIV : '/';
PLUS : '+';
MINUS : '-';
POW : '^';
LP : '(';
RP : ')';
fragment Digit:'0'..'9';
WS :('\t'| ' '| '\r'| '\n'| '\u000C')+{$channel = HIDDEN;}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:41:54.443

您需要更改语法以指定`EOF`在顶级规则完成后您需要一个令牌：

```
expression returns [double value]: 
p1=pm EOF {$value=$pm.value;}; 
```

# qt - 从 Ubuntu 上的 GTK+ 开始

> ID：10548924
> 
> 赞同：5
> 
> 时间：2012-05-11T09:37:14.283
> 
> 标签：qt, ubuntu, gtk, apt-get

我刚刚开始使用 GTK+。

我有一个 Ubuntu 11.04。我应该如何安装 GTK 以及哪个稳定版本？

GTK 网站提供软件包供下载。但是还有其他 4 个支持包。我想知道我是否可以使用 sudo apt-get 或 synaptic 来下载它们。当我在 Synaptic 上键入 GTK 时，有一个很长的列表。

请使用 sudo apt-get 推荐一个可供下载的稳定 GTK 版本。

另外，我应该使用什么 IDE 进行开发和模拟？

到目前为止，我一直在使用 Qt 进行编程，为此目的使用了 QtCreator、QtDesigner。我的应用程序现在必须移植到 GTK 上。我用谷歌搜索发现没有 Qt 到 GTK 的翻译引擎。

你们有人有过这样的经历吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T11:00:37.787

您可以在 Ubuntu（精确）上安装 GTK+ 的两个不同版本（2.24.10、3.4.1）。

```
sudo apt-get install libgtk2.0-dev
sudo apt-get install libgtk-3-dev 
```

示例和演示应用程序可以通过以下命令安装

```
sudo apt-get install gtk2.0-examples
sudo apt-get install gtk-3-examples 
```

对于 Qt，没有像 QtCreator 这样的 IDE，但是有一个名为 Glade 的用户界面构建器。

```
sudo apt-get install glade 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:05:24.140

如果您的背景是 Qt，它是一个 C++ API，您可能应该直接使用[gtkmm](http://www.gtkmm.org/en/)，它是 GTK+ 的官方 C++ 绑定。这是必要的，因为从本质上讲，GTK+ 是一个 C API，它依赖于*绑定*来使工具包在除 C 之外的其他编程语言中可用。

我也不希望有一个 1:1 的翻译工具，所以你的移植可能会变得相当劳动密集。我希望你也不需要继续支持 Qt 版本。

此外，[这个问题](https://stackoverflow.com/questions/1801074/what-are-the-differences-between-gtk-and-qt)似乎是相关的，并且有很好的答案，对于你所处位置的人来说似乎值得一读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:01:58.683

[Anjuta](http://projects.gnome.org/anjuta/)是使用 GTK 在 Gnome 平台上开发的事实上的 IDE。您可以使用它在 Ubuntu 上安装它

```
sudo apt-get install anjuta 
```

# android - Holo 灯主题未在按钮上设置

> ID：10548926
> 
> 赞同：0
> 
> 时间：2012-05-11T09:37:19.207
> 
> 标签：android, android-layout

我正在构建一个基于最新版本的 Android OS 的示例应用程序。根据[此处](http://developer.android.com/guide/topics/ui/themes.html#DefiningStyles)给出的说明，我试图将 holo:light 主题仅提供给我的应用程序中的一个按钮。我该怎么做 ？我在 res/values 文件夹中创建了一个 myStyles.xml，但我无法找到应用全息光主题的属性。

这就是我在 myStyles.xml 文件中的内容

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
<style name="mybutton" parent="android:Theme.Holo.Light">
    <item name="android:background">@android:color/holo_orange_light</item>
    <item name="android:textColor">@android:color/holo_blue_dark</item>
</style>
</resources> 
```

这是我的活动。

```
<Button
        android:id="@+id/button1"
        style="@style/mybutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="lol" /> 
```

我可以确认 backgroundcolor 和 textcolor 正在被应用......（这样做是为了测试目的）。目前，如果我将 android:theme="@android:style/Theme.Holo.Light" 添加到 AndroidManifest.xml，holo light 主题将应用于整个应用程序。但是，我希望这个主题仅适用于少数控件（在本例中为单个按钮控件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:28:53.687

> 主题是应用于整个 Activity 或应用程序的样式，而不是单个 View。

因此，您所要求的是不可能的。话虽这么说，你还是想这样做似乎很奇怪。我建议将 holo 主题应用到您的整个应用程序，然后`Button`仅在您确实需要时自定义您的 s。这可能是用户对您的应用程序的期望。

# glassfish-3 - 如何将 hibernate-validator 4.3.0.Final 升级到 Glassfish 3.1.2？

> ID：10548931
> 
> 赞同：5
> 
> 时间：2012-05-11T09:37:45.850
> 
> 标签：glassfish-3, hibernate-validator

目前，Hibernate Validator 已经发布了最新版本 4.3.0.Final [here](http://bit.ly/KPJvw9)。我尝试按照以下步骤将其升级到我的 Glassfish 3.1.2：-

```
1\. Remove the GLASSFISH/glassfish/modules/bean-validator.jar
2\. Copying the hibernate-validator-4.3.0.Final.jar to GLASSFISH/glassfish/modules
3\. Restart the Glassfish
4\. The Glassfish cannot start. It seems hang. 
```

通过谷歌搜索后，我发现名为“bean-validator.jar”的文件是由 Glassfish 团队创建的 OSGi 版本。可悲的是，我找不到如何创建它。你能帮忙提供进一步的建议吗？非常感谢您提前提供的帮助。我期待着尽快收到您的来信。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T16:42:08.573

可以在[此处](https://wikis.oracle.com/display/GlassFish/V3Jsr303BeanValidationIntegration)找到有关如何构建 Glassfish 的 bean-validator.jar 的（略微过时的）描述。

通常需要一个 OSGi 包，其中包括 Hibernate Validator 本身和 Bean Validation API。使用此捆绑包，您应该能够替换原始的 bean-validator.jar。此外，您还需要 JBoss Logging 捆绑包，它从 Hibernate Validator 4.3 版开始用作日志记录 API，并且已经以 OSGi 捆绑包的形式出现。

如果您正在构建一个 Web 应用程序，您还可以将 HV 4.3 打包到您的 WAR 中，并通过提供具有以下内容的文件[来关闭](http://docs.oracle.com/cd/E18930_01/html/821-2418/beaft.html#beagb)类加载器委托：`WEB-INF/glassfish-web.xml`

```
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
    <class-loader delegate="false" />
</glassfish-web-app> 
```

这样，HV 类将从您的应用程序加载，而不是从 Glassfish 提供的模块加载。

您可能还对[GLASSFISH-15648](http://java.net/jira/browse/GLASSFISH-15648)问题感兴趣，该问题旨在为 HV 提供专用的 Glassfish 更新包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:57:59.977

由于我的情况是`ear`，而不是`war`，基于 Gunnar 的建议，我做了一个模块的补丁版本，可以部署到`Glassfish`（我的版本是`3.1.1 OSE`）。

有人可能会发现它仍然有用，请参阅我的博客了解我的解决方案（包括逐步方法）： http: [//peter-butkovic.blogspot.de/2012/11/glassfish-311-oss-with-hibernate.html](http://peter-butkovic.blogspot.de/2012/11/glassfish-311-oss-with-hibernate.html)

# android - Android - 用渐变画线

> ID：10548932
> 
> 赞同：2
> 
> 时间：2012-05-11T09:37:48.873
> 
> 标签：android, canvas, drawing, gradient, lines

我用渐变从点到点画一条线。为了一切看起来都不错，我在它们之间使用了圆角帽。问题是帽子只有一种颜色。有可能单独绘制它们或强制绘制正确吗？

或者也许只是在它们之间画一个点？

![在此处输入图像描述](../Images/15c727dd589148373848003f19626419.png)

我找到了解决方案。就像我之前写的一样，我只是在线条之间画出我自己的点，然后放上我需要的任何颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T16:34:29.227

你应该使用`GradientDrawable`与`LINE`形状，

文档：http: [//developer.android.com/reference/android/graphics/drawable/GradientDrawable.html](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html)

# php - MySQL Events League JOIN 3 表

> ID：10548934
> 
> 赞同：1
> 
> 时间：2012-05-11T09:37:58.377
> 
> 标签：php, mysql

我有桌子：

事件

```
    -----+--------------------------------+
    | 编号 | 事件名称 |
    -----+--------------------------------+
    | 1 | 保龄球 |
    | 2 | 测验 |
    | 3 | 飞镖 |
    | 4 | 游泳池 |
    | 5 | 寻宝 |
    | 6 | 斯诺克 |
    -----+--------------------------------+

```

竞争对手

```
    ------+------------------+
    | 编号 | 竞争对手姓名 |
    ------+------------------+
    | 1 | 微软 |
    | 2 | 英国广播公司 |
    | 3 | 脸书 |
    ------+------------------+

```

结果

```
    ------+----------------+---------+--------------+
    | 编号 | 竞争对手ID | 事件ID | 事件评分 |
    ------+----------------+---------+--------------+
    | 1 | 1 | 1 | 12 |
    | 2 | 1 | 2 | 11 |
    | 3 | 1 | 3 | 23 |
    | 4 | 2 | 1 | 66 |
    | 5 | 2 | 2 | 12 |
    | 6 | 2 | 3 | 11 |
    | 7 | 2 | 4 | 23 |
    | 8 | 2 | 5 | 66 |
    | 3 | 2 | 6 | 23 |
    | 4 | 3 | 1 | 66 |
    | 5 | 3 | 2 | 12 |
    | 6 | 3 | 3 | 11 |
    | 7 | 3 | 4 | 23 |
    | 8 | 3 | 6 | 66 |
    ------+----------------+---------+--------------+

```

我想从中获得这样的输出：

```
    --------------+---------+---------+--------+------ +--------------+----------
    | 竞争对手 | 保龄球 | 测验 | 飞镖 |游泳池 |寻宝 | 斯诺克 |
    --------------+---------+---------+--------+------ +--------------+----------
    | 微软 | 12 | 11 | 23 | 0 | 0 | 0 |
    | 英国广播公司 | 66 | 12 | 11 | 23 | 66 | 23 |
    | 脸书 | 66 | 12 | 11 | 23 | 0 | 66 |
    --------------+---------+---------+--------+------ +--------------+----------

```

我已经尝试了各种连接和嵌套 php，但我就是无法破解它。我什至不确定这是否可能。我的 SQL 知识不是很好，我尝试了一些教程，但它们没有涵盖这种查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:49:40.880

```
SELECT   competitors.competitorName                          AS competitor,
         SUM(IF(results.eventId = 1, results.eventScore, 0)) AS Bowling,
         SUM(IF(results.eventId = 2, results.eventScore, 0)) AS Quiz,
         -- etc.
FROM     competitors
  LEFT JOIN results ON results.competitorId = competitors.id
GROUP BY competitors.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:56:49.657

**此请求通常可以，但每次在表事件中添加新条目时都需要进行修改。**

```
SELECT
    comp.competitorName as competitor,
    rbowling.eventScore as Bowling,
    rquiz.eventScore as Quiz,
    rdarts.eventScore as Darts,
    rpool.eventScore as Pool,
    rtreasure.eventScore as Treasure_Hunt,
    rsnooker.eventScore as Snooker
FROM competitors comp
LEFT JOIN result rbowling ON (rbowling.eventId = 1 AND comp.id = rbowling.competitorId)
LEFT JOIN result rquiz ON (rquiz.eventId = 2 AND comp.id = rquiz.competitorId)
LEFT JOIN result rdarts ON (rdarts.eventId = 3 AND comp.id = rdarts.competitorId)
LEFT JOIN result rpool ON (rpool.eventId = 4 AND comp.id = rpool.competitorId)
LEFT JOIN result rtreasure ON (rtreasure.eventId = 5 AND comp.id = rtreasure.competitorId)
LEFT JOIN result rsnooker ON (rsnooker.eventId = 6 AND comp.id = rsnooker.competitorId)
GROUP BY comp.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:45:02.110

您基本上是在寻找数据透视表。有一个例子和[here](http://www.artfulsoftware.com/infotree/queries.php#78)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:03:03.270

您可以像这样通过 php 创建查询

```
<?php
$events = array('Assume this is array of events table with id,eventName as key');

$column = array();
foreach($events as $event)
{
     $column[] = 'SUM(IF(results.eventId = '.$event['id'].', results.eventScore, 0)) AS '.$event['eventName'];
}

$sql = 'SELECT   competitors.competitorName AS competitor,';
$sql .= implode(',',$column);
$sql .= ' FROM competitors';
$sql .= ' LEFT JOIN results ON results.competitorId = competitors.id';
$sql .= ' GROUP BY competitors.id';
//Put $sql into mysql_query then 
```

然后，动态获取行

```
while($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
    foreach($row as $k=>$v) 
    {
         //Here you get Column Name as $k  and data value as $v
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T10:00:39.623

您正在寻找的查询是这个：

```
SELECT r.eventScore, e.eventName, c.competitorName
FROM results r
LEFT JOIN events e ON e.id = r.eventId
LEFT JOIN competitors c ON c.id = r.competitorId 
```

通过此查询，您将获得每个结果的基础事件和竞争对手名称。然后你必须在 PHP 中管理数据来创建你想要的表......但我想这将很难实现......

我最好分别对竞争对手和事件进行选择，然后获取所有得分结果并创建如下表格：

```
// we have $competitors array containing id => name
// we have $events array containing id => name
// we have $results array containing competitorId => [ eventId => score ]
echo '<table>';
echo '<tr><td>Competitors</td>';
foreach($events as $e)
    echo '<td>'.$e.'</td>';
echo '</tr>';
foreach($results as $cId => $val) {
    echo '<tr><td>'.$competitors[$cId].'</td>';
    foreach($events as $eId => $name) {
        echo '<td>'.$val[$eId].'</td>';
    }
    echo '</tr>';
}
echo '</table>'; 
```

但这只是一个快速且不是很好的解决方案，我最好采用一个查询的方式。

# android - Webservice 和 Monodroid

> ID：10548938
> 
> 赞同：0
> 
> 时间：2012-05-11T09:38:07.513
> 
> 标签：android, web-services, xamarin.android

我正在 按照本[教程中的指南使用](http://monodroyd.wordpress.com/2012/01/09/using-web-services-to-build-your-own-weather-application-in-mono-for-android/)[Web 服务](http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl)，使用 Mono For Android 使用 c#。运行良好。现在我创建了自己的 web 服务并创建了一个用 vb.net 编写的简单测试方法。 如果我从远程机器 VIA webbrowser 运行此 web 服务，它工作正常。但是当使用 Android Emulator 运行时，它会破坏这行代码。（此代码是自动生成代码Refference.cs的一部分）`GetMyName(String Name)`

```
public string GetMyName(string Name) {
            object[] results = this.Invoke("GetMayName", new object[] {
                        Name});
            return ((string)(results[0]));
        } 
```

我这样调用我的网络服务

```
 webserviceformobile.Service1 webservice = new webserviceformobile.Service1();
 String myName = webservice.GetMyName("RIZWAN"); 
```

当我从浏览器运行 web 服务时，它输出以下行：

```
<string xmlns="http://webserviceformobile.com/">rizwan</string> 
```

我做错了什么？我的网络服务是否以错误的格式返回数据？在运行良好的示例中，我正在调用这样的 web 服务

```
com.cdyne.wsf.Weather we = new com.cdyne.wsf.Weather();
com.cdyne.wsf.WeatherReturn wr = new com.cdyne.wsf.WeatherReturn();
wr = we.GetCityWeatherByZIP("02138"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:02:15.343

你能确保你的网络服务可以从模拟器访问吗？这正是我面临的问题。

# javascript - Javascript 不工作（textbox.value = fileupload.value）

> ID：10548942
> 
> 赞同：0
> 
> 时间：2012-05-11T09:38:23.410
> 
> 标签：javascript, asp.net, html, css

代码的想法是制作一个单独的文本框和按钮，这样我就可以为每一个创建类并让它们像文件上传一样工作。

但是 javascript 运行了两次，并且 fileupload 值被删除了。

```
<style type="text/css">
div.fileinputs
{
    position: relative;
}

div.fakefile
{
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 1;
}

input.file
{
   visibility:hidden;
}
</style>
<script type="text/javascript" language="javascript">
    function uploadFileChange() {
            alert("start");
            document.getElementById('FileName').value = document.getElementById("FileUpload1").value;
            alert("end");
    }
</script>
<div class="fileinputs" style="width: 50%;">
    <!-- Upload file invisivel-->
    <asp:FileUpload ID="FileUpload1" ClientIDMode="Static" class="file" runat="server" 
         onpropertychange="uploadFileChange();"  />
    <!-- button e textbox falsas para poder dar syles ao button-->
    <div class="fakefile">
        <asp:TextBox ID="FileName" CssClass="textbox" ClientIDMode="Static" runat="server" Width="31%" ></asp:TextBox>
        <asp:Button ID="FileChooserButton1" CssClass="btnSubmit" runat="server" Text="Procurar..."
            ForeColor="White" onClick="document.getElementeByID('FileUpload1').click()" />
    </div>
</div> 
```

怎么了？？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:46:50.520

对您的代码稍加修正，

```
<asp:Button ID="FileChooserButton1" CssClass="btnSubmit" runat="server" Text="Procurar..."             ForeColor="White" onClientClick="document.getElementeByID('FileUpload1').click();return false;" /> 
```

将 return false 写入 clickevent 不会回发，您丢失 fileuplaod 值的原因是因为页面正在回发。

或者你可以试试这个，

```
<asp:Button ID="FileChooserButton1" CssClass="btnSubmit" runat="server" Text="Procurar..." ForeColor="White" onClientClick="CallClick();return false;" />

function CallClick(){
document.getElementeByID('FileUpload1').click();
return false;
} 
```

# xml - 使用 xsd 限制属性值

> ID：10548948
> 
> 赞同：6
> 
> 时间：2012-05-11T09:38:44.380
> 
> 标签：xml, xsd

我有一个看起来像这样的 xsd 文件：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="Configurations">
<xs:complexType>
<xs:sequence>
<xs:element maxOccurs="unbounded" name="Schema">
<xs:complexType>
<xs:sequence>
    <xs:element maxOccurs="unbounded" name="Table">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded" name="Key">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="Column" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:attribute name="Name" type="xs:string" use="required" />
                                    <xs:attribute name="Value" type="xs:string" use="required" />
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                        <xs:attribute name="Name" type="xs:string" use="required" />
                        <xs:attribute name="Value" type="xs:string" use="required" />
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
            <xs:attribute name="Name" type="xs:string" use="required" />
        </xs:complexType>
    </xs:element>
</xs:sequence>
<xs:attribute name="Name" type="xs:string" use="required" />
<xs:attribute name="ConnectionString" type="xs:string" use="required" />
</xs:complexType>
</xs:element>
</xs:sequence> 
```

而且我只是不知道如何为元素的属性创建一个`xs:enumeration`，以便该`Name`属性`Schema`只能使用几个指定的值。我不擅长 xsd，将不胜感激：)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T10:06:09.510

如果您想为所有`Name`属性重用受限类型，请`simpleType`在根级别添加 a：

```
<xs:simpleType name="Name_type">
    <xs:restriction base="xs:string">
        <xs:enumeration value="Foo" />
        <xs:enumeration value="Bar" />
        <xs:enumeration value="Baz" />
    </xs:restriction>
</xs:simpleType> 
```

然后将其作为`Name`属性的类型引用：

```
<xs:attribute name="Name" type="Name_type" use="required" /> 
```

# codeigniter - 代码点火器在表别名中添加 db 前缀

> ID：10548950
> 
> 赞同：3
> 
> 时间：2012-05-11T09:38:48.417
> 
> 标签：codeigniter, prefix, table-alias

我已将代码点火器配置为使用 db 前缀。

在所有其他地方，它都按预期工作，但是在创建表别名时，它会添加 db 前缀。

代码如下：-

```
$this->db->from('table_a');
$this->db->join('table_b', 'table_a.id = table_b.a_id', 'left');
-----
$this->db->join('table_b as tablebAlias', 'table_c.id = tablebAlias.a_id', 'left'); 
```

假设我的 dbprefix 设置为值 'foo'。

正在执行的最终查询如下：-

```
Select * From foo_table_a left join foo_table_b on foo_table_a.id = foo_table_b.a_id
--- left join foo_table_b as tablebAlias on foo_table_c.id = foo_tablebAlias.a_id 
```

任何帮助都将是非常可观的。

谢谢，贾廷

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T09:40:57.820

我发现手动查询会忽略表前缀。我还发现有一种方法可以为手动查询添加表前缀：

在 config/database.php

可以这样做：

```
$db['default']['dbprefix'] = "feed_";  
$db['default']['swap_pre'] = "{PRE}"; 
```

这样就可以做到：

```
$sql = "SELECT * FROM {PRE}item";  
$query = $this->db->query($sql); 
```

{PRE} 变为 feed_。

但是 swap_pre 不是 config.php，这让我认为这是 CI 2.0 的特性。

# visual-studio - 如何使用键盘关闭 Visual Studio 的可停靠窗口？

> ID：10548951
> 
> 赞同：5
> 
> 时间：2012-05-11T09:39:01.087
> 
> 标签：visual-studio, visual-studio-2010, keyboard-shortcuts, dockable-windows

当我被键盘召唤时，不得不使用鼠标关闭出现的窗口有点烦人，例如，我通过按 Shift+F12 找到对象的用法，或者由于各种其他原因出现的任何其他可停靠窗口。

理想情况下，当我点击逃生时，这些会关闭，但这无济于事。Alt+F4 想要关闭整个视觉工作室。

是否有任何键盘快捷键可以关闭这些窗口？

需要明确的是，这就是我所指的那种窗口：![在此处输入图像描述](../Images/fd3b3c5323de5079e5ddf2b22f29255a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T09:46:52.253

根据[Visual Studio 2015 中的 Default Keyboard Shortcuts](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2015/ide/default-keyboard-shortcuts-in-visual-studio)，您可以使用以下内容：

*   `Shift`+ `Esc`- `Window.Close`（窗口必须有焦点）
*   `Ctrl`+ `F4`-`Window.CloseDocumentWindow`关闭当前标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:21:39.167

看来@inksmithy 已经回答了这个问题，尽管它对我不起作用。我认为这是因为我正在使用 ReSharper 而他没有。

对于它的价值，我刚刚发现 Ctrl + Shift + F4 对我有用。

我决定将@inksmithy 的答案标记为正确，但如果这对您不起作用，请尝试我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-02T06:32:02.593

1.  将焦点设置为停靠窗口（例如 [Ctrl]+[g] 用于即时窗口）
2.  按上下文菜单键（在空格键的右侧）
3.  按 键隐藏该窗口，在上下文菜单中由 _ 指示（取决于您的语言）

# php - php输入1个十进制数

> ID：10548953
> 
> 赞同：0
> 
> 时间：2012-05-11T09:39:06.107
> 
> 标签：php, regex, numbers, preg-replace, decimal

所有，我正在制作一个只接受小数点后 1 位输入数字的购物车。以下是我从库中获得的一段代码（经过一些修改）：

```
$items['qty'] = trim(preg_replace('/([^0-9\.])/i', '', $items['qty'])); 
```

这将接受任何数字。但我只想将其设为小数点后 1 位。如何修改代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:47:49.437

这可以通过圆形功能来完成

```
echo round(153.751, 1);  // 153.8 
```

这将有助于[使用 PHP 舍入数字](http://www.electrictoolbox.com/php-round-numbers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:44:22.727

您可以删除第一个小数位后的小数位：

```
$items['qty'] = trim(preg_replace('/[^0-9\.]+|(?<=\.[0-9])[0-9+]+/', '', $items['qty'])); 
```

[**看见**](http://ideone.com/utS6k)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:45:48.120

添加一行：

```
$items['qty'] = sprintf('%.1f', $items['qty']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:41:26.183

您可以使用像 ^(\d+.{0,1}\d*)$ 这样的正则表达式

但是 PHP 有一个概念，过滤器，它为你做了很多验证，[http ://php.net/manual/en/filter.filters.validate.php](http://php.net/manual/en/filter.filters.validate.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:42:48.090

如果我理解这个问题，你可以使用 number_format

```
$items['qty'] = number_format(trim(preg_replace('/([^0-9\.])/i', '', $items['qty'])),1,".",""); 
```

希望能帮助到你。

# asp.net-mvc-3 - MVC3 区域路由冲突

> ID：10548954
> 
> 赞同：0
> 
> 时间：2012-05-11T09:39:11.337
> 
> 标签：asp.net-mvc-3, exception, asp.net-mvc-routing

问题：我希望我的路线是这样的

/admin/main/category/1 -> 1 == ?page=1 我不想看到 page=1

我的控制器

```
public class MainController : BaseController
{
    private const int PageSize = 5; //pager view size

    [Inject]
    public ICategoryRepository CategoryRepository { get; set; }

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Category(int page)
    {
        //int pageIndex = page.HasValue ? page.Value : 1;
        int pageIndex = page != 0 ? page : 1; 
        return View("Category", CategoryViewModelFactory(pageIndex));
    }

    /*
     *Helper: private instance/static methods
     ======================================================================*/
    private CategoryViewModel CategoryViewModelFactory(int pageIndex) //generate viewmodel category result on pager request
    {
        return new CategoryViewModel
        {
            Categories = CategoryRepository.GetActiveCategoriesListDescending().ToPagedList(pageIndex, PageSize)
        };
    }
}

  public class AdminAreaRegistration : AreaRegistration
  {
        public override string AreaName
        {
            get
            {
                return "admin";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRouteLowercase(
                "AdminCategoryListView", 
                "admin/{controller}/{action}/{page}",
                new { controller = "Category", action = "Category", page = "1" },
                new { id = @"\d+" },
                new[] { "WebUI.Areas.Admin.Controllers" }
            );
        }
    }

My Exception: 
```

> 参数字典包含“WebUI.Areas.Admin.Controllers.MainController”中方法“System.Web.Mvc.ActionResult Category(Int32)”的不可为空类型“System.Int32”的参数“页面”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:41:19.060

确保在您的管理区域路由注册中定义了`{page}`路由令牌，而不是`{id}`默认生成的路由令牌：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{page}",
        new { action = "Index", page = UrlParameter.Optional }
    );
} 
```

现在，当您生成链接时，请确保指定此参数：

```
@Html.ActionLink(
    "go to page 5",                         // linkText
    "category",                             // actionName
    "main",                                 // controllerName
    new { area = "admin", page = "5" },     // routeValues
    null                                    // htmlAttributes
) 
```

将发出：

```
<a href="/Admin/main/category/5">go to page 5</a> 
```

当请求此 url 时，将调用 Category 操作并传递`page=5`参数。

# java - 从输入表单中检索数据并发出获取请求 spring mvc

> ID：10548956
> 
> 赞同：0
> 
> 时间：2012-05-11T09:39:14.343
> 
> 标签：java, jsp, spring-mvc, javabeans

我想从输入表单中获取数据（登录数据->密码+用户名）并将其保存到 bean 中。然后，我想拿这个 bean 和里面的数据做一个获取 reuest。

我声明一个类：

```
public class Login {

private String username;
private String password;

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

} 
```

getrequest 如下：

```
 @RequestMapping(value = "/log",method = RequestMethod.GET)
     public String addPersonLogin( Model model,HttpServletRequest request) {

       //take the bean here
    } 
```

谁能告诉我如何创建 jsp 以及如何将 bean 放入 addPersonLogin 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:35:42.743

你可以这样做（使用@ModelAttribute）：

```
@InitBinder
public void initBinder(WebDataBinder binder) {
    // You can register your validator for bean Login here
}

@RequestMapping(value = "/log",method = RequestMethod.GET)
public String addPersonLogin(@ModelAttribute Login login, HttpServletRequest request) {
    // To make it work your form fields should have names equals to bean fields names
    login.getUserName();
    login.getPassword();
} 
```

# forms - Zend 框架表单不呈现特殊字符，如（ä、ö、ü 等） - 使表单元素值为空

> ID：10548957
> 
> 赞同：1
> 
> 时间：2012-05-11T09:39:14.830
> 
> 标签：forms, zend-framework

我正在尝试设置 Zend Form 为我工作。我使用相同的表单来插入和编辑特定的数据库对象。该对象有名称，我可以轻松地创建一个名为“Ülo”的新对象。它正确保存在数据库中，当我获取它以显示在报告中时，它会显示正确的“Ülo”。问题在于表格。当我打开编辑表单时，名称元素为空。所有其他元素都正确显示，如果我将它们更改为其中包含“ü”，它们也会显示为空。表单元素标签也是如此。当我将标签设置为包含“ü”时，它不再显示标签。

例如，如果我有，`$name->setLabel('Nameü: ');`那么它不会显示标签，但是当我将其更改回时，`$name->setLabel('Name: ');`它会显示正确。

当我拥有`$bcrForm->name->setValue('Ülo');`它时，同样的事情不会显示该值，但是当我将其更改为它时，`$bcrForm->name->setValue('Alo');`它会正确显示。

如何修复它以正确显示？这似乎是某种形式的渲染问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:23:10.493

这个帮助我解决了这个问题：

确保这些设置在 /etc/php5/apache2/php.ini 和 /etc/php5/cli/php.ini 中：

```
default_charset = utf-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:17:30.527

我会检查：

*   查看字符集
*   数据库字符集（后端）
*   Zend_Db_Adapter 字符集
*   文件字符集

视图转义方法设置为期望 utf8 字符，并且可能会剥离其他任何内容（即单字节奇怪字符）:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:17:10.533

确保您的脚本和视图文件都以 UTF-8 编码，并且您与数据库的连接也设置为 UTF-8。

如果您使用的是 mysql，您可以通过打开数据库连接并运行来强制它返回 UTF-8 数据：`SET NAMES 'utf8'`

或使用 mysqli 与：`mysqli_set_charset('utf8');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:14:11.600

你检查编码了吗？尝试将此添加到头部...

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T16:22:20.373

它应该像在元素标签装饰器上将转义标志设置为 false 一样简单。

```
$name->addDecorator('Label', аrray('escape'=>false)); 
```

或见`setEscape()`。 [http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html](http://framework.zend.com/manual/1.12/en/zend.form.standardDecorators.html)

# python - 导入并运行 Django 开发服务器

> ID：10548964
> 
> 赞同：0
> 
> 时间：2012-05-11T09:39:33.727
> 
> 标签：python, django, flask

使用 Flask 框架的应用程序，只需调用以下命令即可启动内置 werkzeug 开发服务器`app.run()`：

```
from flask import Flask
app = Flask(__name__)
app.run() 
```

考虑一个空的 Django 项目“myproject”，创建如下`django-admin.py startproject myproject`：是否有一种非黑客的方式来启动 Django 的开发服务器，`myproject`因为它在 Flask 中完成？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:46:35.193

你可以`management.call_command()`用来模拟什么`manage.py`：

```
from django.core import management
management.call_command('runserver') 
```

见[https://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/)

# erlang - Otp application:stop(..) 杀死所有生成的进程，而不仅仅是 spawn_linked 的？

> ID：10548971
> 
> 赞同：2
> 
> 时间：2012-05-11T09:39:58.243
> 
> 标签：erlang

我在[https://github.com/bvdeenen/otp_super_nukes_all](https://github.com/bvdeenen/otp_super_nukes_all)设置了一个简单的测试用例，它表明 otp application:stop() 实际上会杀死**所有**由其子进程生成的进程，即使是那些**未链接**的进程。

测试用例由一个 gen_server（注册为 par）生成一个普通的 erlang 进程（注册为 par_worker）和一个 gen_server（注册为 reg_child），它也生成一个普通的 erlang 进程（注册为 child_worker）。调用 application:stop(test_app) 会在 'par' gen_server 上正常终止，但会在所有其他服务器上退出（kill）！

这是名义行为吗？如果是这样，它在哪里记录，我可以禁用它吗？我希望从我的 gen_server（不是链接）产生的进程在应用程序终止时保持活动状态。

谢谢

巴特·范迪南

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:42:58.933

[应用](http://www.erlang.org/doc/apps/kernel/application.html#stop-1)手册说（对于stop/1 功能）：

```
Last, the application master itself terminates. Note that all processes with the
application master as group leader, i.e. processes spawned from a process belonging
to the application, thus are terminated as well. 
```

所以我猜你不能修改这种行为。

**编辑**：您也许可以使用 group_leader(GroupLeader, Pid) -> true 更改已启动进程的 group_leader （请参阅：[http](http://www.erlang.org/doc/man/erlang.html#group_leader-2) ://www.erlang.org/doc/man/erlang.html#group_leader-2 ）。更改 group_leader 可能会让您避免在应用程序结束时终止进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:05:11.447

我也犯了这个错误，发现它一定会发生。

如果父进程死亡，则所有子进程都会死亡，无论它是否注册。

如果这没有发生，我们必须跟踪所有正在运行的进程并找出哪些是孤立的，哪些不是。你可以猜到会有多难。你可以想到unix ppid和pid。如果你杀死 ppid，所有的孩子也会死。这，我认为这必须发生。

如果您想让进程独立于您的应用程序，您可以向其他应用程序发送消息以启动进程。

```
other_application_module:start_process(ProcessInfo). 
```

# python - 使用 python 和 nodejs 加密和解密

> ID：10548973
> 
> 赞同：14
> 
> 时间：2012-05-11T09:39:59.703
> 
> 标签：python, node.js, encryption, aes

我正在尝试在 Python 中加密一些内容并在 nodejs 应用程序中对其进行解密。

不过，我正在努力让这两个 AES 实现一起工作。这就是我所在的地方。

在节点中：

```
var crypto = require('crypto');

var password = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa';
var input = 'hello world';

var encrypt = function (input, password, callback) {
    var m = crypto.createHash('md5');
    m.update(password)
    var key = m.digest('hex');

    m = crypto.createHash('md5');
    m.update(password + key)
    var iv = m.digest('hex');

    // add padding
    while (input.length % 16 !== 0) {
        input += ' ';
    }

    var data = new Buffer(input, 'utf8').toString('binary');

    var cipher = crypto.createCipheriv('aes-256-cbc', key, iv.slice(0,16));
    var encrypted = cipher.update(data, 'binary') + cipher.final('binary');
    var encoded = new Buffer(encrypted, 'binary').toString('base64');

    callback(encoded);
};

var decrypt = function (input, password, callback) {
    // Convert urlsafe base64 to normal base64
    var input = input.replace('-', '+').replace('/', '_');
    // Convert from base64 to binary string
    var edata = new Buffer(input, 'base64').toString('binary')

    // Create key from password
    var m = crypto.createHash('md5');
    m.update(password)
    var key = m.digest('hex');

    // Create iv from password and key
    m = crypto.createHash('md5');
    m.update(password + key)
    var iv = m.digest('hex');

    // Decipher encrypted data
    var decipher = crypto.createDecipheriv('aes-256-cbc', key, iv.slice(0,16));
    var decrypted = decipher.update(edata, 'binary') + decipher.final('binary');
    var plaintext = new Buffer(decrypted, 'binary').toString('utf8');

    callback(plaintext);
};

encrypt(input, password, function (encoded) {
    console.log(encoded);
    decrypt(encoded, password, function (output) {
        console.log(output);
    });
}); 
```

这将产生输出：

```
BXSGjDAYKeXlaRXVVJGuREKTPiiXeam8W9e96Nknt3E=
hello world 
```

在蟒蛇

```
from Crypto.Cipher import AES
from hashlib import md5
import base64

password = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'
input = 'hello world'

def _encrypt(data, nonce, password):
    m = md5()
    m.update(password)
    key = m.hexdigest()

    m = md5()
    m.update(password + key)
    iv = m.hexdigest()

    # pad to 16 bytes
    data = data + " " * (16 - len(data) % 16)

    aes = AES.new(key, AES.MODE_CBC, iv[:16])

    encrypted = aes.encrypt(data)
    return base64.urlsafe_b64encode(encrypted)

def _decrypt(edata, nonce, password):
    edata = base64.urlsafe_b64decode(edata)

    m = md5()
    m.update(password)
    key = m.hexdigest()

    m = md5()
    m.update(password + key)
    iv = m.hexdigest()

    aes = AES.new(key, AES.MODE_CBC, iv[:16])
    return aes.decrypt(edata)

output = _encrypt(input, "", password) 
print(output)
plaintext = _decrypt(output, "", password)
print(plaintext) 
```

这会产生输出

```
BXSGjDAYKeXlaRXVVJGuRA==
hello world 
```

显然它们非常接近，但节点似乎正在用一些东西填充输出。有什么想法可以让两者互操作吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-11T10:54:30.853

好的，我想通了，节点使用 OpenSSL，它使用[PKCS5](http://www.chilkatsoft.com/faq/PKCS5_Padding.html)进行填充。PyCrypto 不处理填充，所以我自己做的只是在两者中添加 ' '。

如果我在 python 代码中添加 PKCS5 填充并在节点代码中删除填充，它可以工作。

所以更新了工作代码。节点：

```
var crypto = require('crypto');

var password = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa';
var input = 'hello world';

var encrypt = function (input, password, callback) {
    var m = crypto.createHash('md5');
    m.update(password)
    var key = m.digest('hex');

    m = crypto.createHash('md5');
    m.update(password + key)
    var iv = m.digest('hex');

    var data = new Buffer(input, 'utf8').toString('binary');

    var cipher = crypto.createCipheriv('aes-256-cbc', key, iv.slice(0,16));

    // UPDATE: crypto changed in v0.10
    // https://github.com/joyent/node/wiki/Api-changes-between-v0.8-and-v0.10 
    var nodev = process.version.match(/^v(\d+)\.(\d+)/);
    var encrypted;

    if( nodev[1] === '0' && parseInt(nodev[2]) < 10) {
        encrypted = cipher.update(data, 'binary') + cipher.final('binary');
    } else {
        encrypted = cipher.update(data, 'utf8', 'binary') + cipher.final('binary');
    }

    var encoded = new Buffer(encrypted, 'binary').toString('base64');

    callback(encoded);
};

var decrypt = function (input, password, callback) {
    // Convert urlsafe base64 to normal base64
    var input = input.replace(/\-/g, '+').replace(/_/g, '/');
    // Convert from base64 to binary string
    var edata = new Buffer(input, 'base64').toString('binary')

    // Create key from password
    var m = crypto.createHash('md5');
    m.update(password)
    var key = m.digest('hex');

    // Create iv from password and key
    m = crypto.createHash('md5');
    m.update(password + key)
    var iv = m.digest('hex');

    // Decipher encrypted data
    var decipher = crypto.createDecipheriv('aes-256-cbc', key, iv.slice(0,16));

    // UPDATE: crypto changed in v0.10
    // https://github.com/joyent/node/wiki/Api-changes-between-v0.8-and-v0.10 
    var nodev = process.version.match(/^v(\d+)\.(\d+)/);
    var decrypted, plaintext;

    if( nodev[1] === '0' && parseInt(nodev[2]) < 10) {  
        decrypted = decipher.update(edata, 'binary') + decipher.final('binary');    
        plaintext = new Buffer(decrypted, 'binary').toString('utf8');
    } else {
        plaintext = (decipher.update(edata, 'binary', 'utf8') + decipher.final('utf8'));
    }

    callback(plaintext);
};

encrypt(input, password, function (encoded) {
    console.log(encoded);
    decrypt(encoded, password, function (output) {
        console.log(output);
    });
}); 
```

Python：

```
from Crypto.Cipher import AES
from hashlib import md5
import base64

password = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'
input = 'hello world'

BLOCK_SIZE = 16

def pad (data):
    pad = BLOCK_SIZE - len(data) % BLOCK_SIZE
    return data + pad * chr(pad)

def unpad (padded):
    pad = ord(chr(padded[-1]))
    return padded[:-pad]

def get_key_iv (password):
    m = md5()
    m.update(password.encode('utf-8'))
    key = m.hexdigest()

    m = md5()
    m.update((password + key).encode('utf-8'))
    iv = m.hexdigest()

    return [key,iv]

def _encrypt(data, password):

    key,iv = get_key_iv(password)
    data = pad(data)

    aes = AES.new(key, AES.MODE_CBC, iv[:16])

    encrypted = aes.encrypt(data)
    return base64.urlsafe_b64encode(encrypted)

def _decrypt(edata, password):
    edata = base64.urlsafe_b64decode(edata)
    key,iv = get_key_iv(password)

    aes = AES.new(key, AES.MODE_CBC, iv[:16])
    return unpad(aes.decrypt(edata))

output = _encrypt(input, password) 
print(output)
plaintext = _decrypt(output, password)
print(plaintext) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-19T20:20:36.080

在尝试使用 Python 3.8 运行 Python 脚本时，我遇到了以下错误：

```
 m.update(password) 
  TypeError: Unicode-objects must be encoded before hashing 
```

密码应该是：

```
 password = b'abcd' 
```

我还收到以下错误：

```
m.update(password + key) 
TypeError: can't concat str to bytes 
```

我可以通过在键后添加以下行来修复它：

```
 key = bytes.fromhex(key_) 
```

python脚本应该这样工作：

```
from Crypto.Cipher import AES
from hashlib import md5
import base64

password = b'abcd'
input = 'hello world'

BLOCK_SIZE = 16

def pad (data):
    pad = BLOCK_SIZE - len(data) % BLOCK_SIZE
    return data + pad * chr(pad)

def unpad (padded):
    pad = ord(chr(padded[-1]))
    return padded[:-pad]

def _encrypt(data, nonce, password):
    m = md5()
    m.update(password)
    key_ = m.hexdigest()
    key = bytes.fromhex(key_)

    m = md5()
    m.update(password + key)
    iv = m.hexdigest()
    iv = bytes.fromhex(iv)

    data = pad(data)

    aes = AES.new(key, AES.MODE_CBC, iv[:16])

    encrypted = aes.encrypt(data.encode('utf-8'))
    return base64.urlsafe_b64encode(encrypted)

def _decrypt(edata, nonce, password):
    edata = base64.urlsafe_b64decode(edata)

    m = md5()
    m.update(password)
    key = m.hexdigest()
    key = bytes.fromhex(key)

    m = md5()
    m.update(password + key)
    iv = m.hexdigest()
    iv = bytes.fromhex(iv)

    aes = AES.new(key, AES.MODE_CBC, iv[:16])
    return unpad(aes.decrypt(edata))

output = _encrypt(input, "", password) 
print(output)
plaintext = _decrypt(output, "", password)
print(plaintext) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-21T11:16:20.703

只是对于任何与我相似的人，他们正在寻找一种简单的方法来在 python 中为 AES 进行加密和解密，这在 node.js 中做同样的事情。这里的类支持不同位的 AES 以及在 node.js 中产生相同结果的 hex 和 base64 编码。

另请注意，如果您缺少软件包 Crypto，您可以简单地安装它

```
pip install pycrypto 
```

python的代码如下：

```
import base64
import hashlib
from Crypto.Cipher import AES

class AESCrypto(object):
    def __init__(self, algorithm, password):
        self.algorithm = filter(lambda x: not x.isdigit(), algorithm).lower()
        self.bits = int(filter(str.isdigit, algorithm))
        self.bs = 16
        if not self.algorithm == 'aes':
            raise Exception('Only AES crypto is supported')
        if not self.bits % 8 == 0:
            raise Exception('Bits of crypto must be a multiply of 8.')
        self.bytes = self.bits / 8
        self.password = password
        self.generateKeyAndIv()

    def generateKeyAndIv(self):
        last = ''
        allBytes = ''
        maxBytes = self.bytes + self.bs
        while len(allBytes) < maxBytes:
            last = hashlib.md5(last + self.password).digest()
            allBytes += last
        self.key = allBytes[:self.bytes]
        self.iv = allBytes[self.bytes:maxBytes]

    def encrypt(self, raw, outputEncoding):
        outputEncoding = outputEncoding.lower()
        raw = self._pad(raw)
        cipher = AES.new(self.key, AES.MODE_CBC, self.iv)
        encrypted = cipher.encrypt(raw)
        if outputEncoding == 'hex':
            return encrypted.encode('hex')
        elif outputEncoding == 'base64':
            return base64.b64encode(encrypted)
        else:
            raise Exception('Encoding is not supported.')

    def decrypt(self, data, inputEncoding):
        inputEncoding = inputEncoding.lower()
        if inputEncoding == 'hex':
            data = ''.join(map(chr, bytearray.fromhex(data)))
        elif inputEncoding == 'base64':
            data = base64.b64decode(data)
        cipher = AES.new(self.key, AES.MODE_CBC, self.iv)
        return self._unpad(cipher.decrypt(data))

    def _pad(self, data):
        padding = self.bs - len(data) % self.bs
        return data + padding * chr(padding)

    @staticmethod
    def _unpad(data):
        return data[0:-ord(data[-1])] 
```

以下是使用该类的示例：

加密示例：

```
password = 'some_random_password'
content = 'content_to_be_encrypted'
cipher = AESCrypto('aes192', password)
encrypted = cipher.encrypt(content, 'hex') 
```

解密示例：

```
password = 'some_random_password'
content = 'encrypted_content'
cipher = AESCrypto('aes192', password)
decrypted = cipher.decrypt(content, 'hex') 
```

# java - 键盘事件在 jlist 中丢失

> ID：10548974
> 
> 赞同：1
> 
> 时间：2012-05-11T09:40:10.537
> 
> 标签：java, swing, focus, jlist, keyboard-events

加载内容时，框架被禁用。

```
void makeEnable(Container  parent, boolean enabled) {
    for(Component c : parent.getComponents()) {
        c.setEnabled(enabled);
        if(c instanceof Container) {
            makeEnable((Container)c, enabled);
        }
    }
} 
```

但是 JList 有一个问题——当用户选择项目时，他可以使用向上/向下箭头在列表中移动。启用然后禁用框架后变得不可能。该项目已被选中，但用户必须单击 JList 才能再次使用箭头。

1.  您知道使应用程序无法获得输入事件的其他解决方案吗？
2.  这个问题有什么解决办法吗？

# android - 当我为 imageview 设置 itemclicklistener 时，图库视图滚动不起作用？

> ID：10548976
> 
> 赞同：1
> 
> 时间：2012-05-11T09:40:16.513
> 
> 标签：android, gallery

我正在使用带有 imageview 和 textview 的图库小部件。我可以为galleryview 设置clicklistener，但我想为imageview 设置clicklistener。当我尝试设置时，galleryview 的滚动不起作用。

```
public class AddImgAdp extends BaseAdapter  {

    int GalItemBg;
    private Context cont;

    private  String[] mImageURLs = {
            "http://www.example1.com",
            "http://www.example2.com",
            "http://www.example3.com",
            "http://www.example4.com",
            "http://www.example5.com",
            "http://www.example6.com"
    };

    public AddImgAdp(Context c) {
        cont = c;
        TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
        GalItemBg = typArray.getResourceId(
                R.styleable.GalleryTheme_android_galleryItemBackground, 0);
        typArray.recycle();
    }

    public int getCount() {
        return Imgid.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        //final ViewHolder holder;
        LayoutInflater li = getLayoutInflater();
        View v = li.inflate(R.layout.menusliderinflate, null);
        v.setPadding(15, 0, 15, 0);
        int score = getLevelScore(position + 1);
         Adpimgview = (ImageView) v.findViewById(R.id.level4image);
        TextView scoreView = (TextView) v.findViewById(R.id.level4score);
        RelativeLayout holder=(RelativeLayout)v.findViewById(R.id.FrameLayout01);

        if (score > 0) {
            scoreView.setText(score + "/18");
            Adpimgview.setBackgroundColor(Color.parseColor("#FAAE67"));
        } else {
            scoreView.setVisibility(View.GONE);
            if(position!=0)Adpimgview.setAlpha(100);
        }

        Adpimgview.setImageResource(Imgid[position]);

        Adpimgview.setTag(mImageURLs[position]);
        Log.d("dd","Inside adapter" + mImageURLs[position]);

        Adpimgview.setScaleType(ImageView.ScaleType.FIT_XY);

        // imgView.setLayoutParams(new
        // Gallery.LayoutParams(LayoutParams.WRAP_CONTENT,
        // LayoutParams.WRAP_CONTENT)); 
```

在这里，我将 onclicklistener 设置为 imageview

```
 Adpimgview.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                WorldSelected = position + 1;
                Log.d("dd","world selected"+WorldSelected);
                levelLayout.setVisibility(View.VISIBLE);
                outerLayout.setBackgroundResource(R.drawable.levelbackground);
                worldLayout.setVisibility(View.GONE);
                backmenulayout.setVisibility(View.VISIBLE);
                defaultmenulayout.setVisibility(View.GONE);
                updateScore(position + 1);

                onWorldItemClick();
            }
        });

        // imgView.setBackgroundResource(GalItemBg);

        return v;
    } 
```

当我为在galleryview 中膨胀的imageview 设置onitemclicklistener 时，Galleryview 的滚动不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-23T07:25:50.583

在 Gallery Widget 上添加 setOnItemClickListener 而不是 getView() 方法。

```
Gallery.setOnItemClickListener(this); 
```

将您的`getView()`onclick 代码放入`OnItemClick`块中。

```
@Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            WorldSelected = position + 1;
            Log.d("dd","world selected"+WorldSelected);
            levelLayout.setVisibility(View.VISIBLE);
            outerLayout.setBackgroundResource(R.drawable.levelbackground);
            worldLayout.setVisibility(View.GONE);
            backmenulayout.setVisibility(View.VISIBLE);
            defaultmenulayout.setVisibility(View.GONE);
            updateScore(position + 1);

            onWorldItemClick();

    } 
```

它应该可以正确地帮助您！

# java - 我应该在 Java 中为 1 个键多值使用哪种数据结构

> ID：10548979
> 
> 赞同：0
> 
> 时间：2012-05-11T09:40:33.750
> 
> 标签：java, android

我有一个 RSS 提要，我在其中获取日期和新闻描述，我想添加以某种方式排列它，同一日期包含当天的新闻。例如，

```
date 1 - my news 1
       - my news 2
       - my news 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:44:13.833

在核心 Java 中，您可以使用列表映射：

```
Map<String, List<String>> map = new HashMap<String, List<String>>();
List<String> list1 = new ArrayList<String>();

list1.add("my news 1");
list1.add("my news 2");
list1.add("my news 3");

map.put("date 1", list1); 
```

如果你可以使用外部库，Guava 有一个[Multimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)概念，它也可以这样做，并且[在 Android 上运行良好](https://stackoverflow.com/questions/5168505/google-collections-on-android)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:46:05.423

尝试这样的事情：

```
HashMap map = new HashMap();  

//first list
List list = new ArrayList();
list.add("orange");  
list.add("apple");  
list.add("banana");  
list.add("coconut");  
map.put("fruits", list);  

//seconds list
list = new ArrayList();
list.add("volvo");  
list.add("saab");  
list.add("honda");  
list.add("toyota");
map.put("cars", list); 
```

等等...

```
//to get from map   
List fruits = (ArrayList)map.get("fruits");   
List cars   = (ArrayList)map.get("cars"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T10:01:16.320

试试谷歌的番石榴库（你可以在安卓上使用它）。该库包含许多有用的数据结构，例如 multimap（您可以查看带有数组列表后端的多图）[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ArrayListMultimap .html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ArrayListMultimap.html)）：

```
map.put("date 1", "my news 1")
map.put("date 1", "my news 2")
map.put("date 1", "my news 3")
map.put("date 1", "my news 4")

List<String> news = map.get("date 1") 
```

# c# - 在 MVC 3 中与 Facebook 共享

> ID：10548984
> 
> 赞同：-2
> 
> 时间：2012-05-11T09:40:55.580
> 
> 标签：c#, facebook, asp.net-mvc-3, facebook-sharer

我正在 MVC 3 中在线开发一个应用程序，用于管理一个网球俱乐部......

当网球运动员预订网球比赛时，我想允许该网球运动员在 Facebook 上分享他的比赛...

可能吗 ？

我找到[了，](https://stackoverflow.com/questions/7589479/ef-4-1-code-first-mvc3-app-and-facebook-share-feature)但没有更多...

你有什么想法或一些教程吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:57:03.000

您可以使用[C# Facebook SDK](http://csharpsdk.org/)。例如，如[文档](http://csharpsdk.org/docs/making-synchronous-requests)中所示张贴到墙上：

```
var fb = new FacebookClient("access_token");
dynamic result = fb.Post("me/feed", new { message = "My first wall post using Facebook C# SDK" });
var newPostId = result.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T12:11:16.407

[此处](http://instinctcoder.com/add-facebook-twitter-google-plus-share-button-in-asp-net-mvc-4-2/)提供了一步一步的教程，用于将社交插件集成到 mvc 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:02:12.640

它可以通过多种方式完成

1.  您可以使用图形 api。（但我会推荐它用于更复杂的交互）

2.  但最简单的方法是使用以下网址开始分享。

    [https://www.facebook.com/sharer.php?u=](https://www.facebook.com/sharer.php?u=) &t=

有关详细信息，您可以参考[Facebook 文档](https://developers.facebook.com/docs/share/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:04:06.500

有两种关键方法可以实现这一目标：

**选项 1 - 服务器端**（[用于网站的 Facebook](https://developers.facebook.com/docs/guides/web/)）

创建后，如果用户愿意，您的服务器可以发布到用户墙。设置起来会稍微复杂一些，但会更加自动化。您需要设置一个 app-id 并要求用户验证他们的 Facebook 详细信息。

**选项 2 - 客户端**（[Facebook 分享](https://developers.facebook.com/docs/share/)）

创建后，用户可能会收到一个`Share`或`Like`按钮提示，然后将其发布到他或她的墙上。这将需要用户额外点击，但设置起来会更直接。

# c# - 为什么我可以创建一个名为“var”的类？

> ID：10548988
> 
> 赞同：103
> 
> 时间：2012-05-11T09:41:09.513
> 
> 标签：c#, .net-4.0

C#中不是`var`关键字吗？但为什么我可以这样做：

```
public class var { }

public class main
{
    public static void main(string[] args)
    {
        var testVar = new var();
    }
} 
```

`var`代码中使用的是在类`var`之前声明的`main`类。编译器甚至没有抱怨。

当我这样做时：

```
public class int { } 
```

或这个：

```
public class true { } 
```

编译器说`int`or`true`是一个关键字，不能这样使用。为什么不一样`var`呢？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-11T09:43:55.613

`var`[根据此列表，](http://msdn.microsoft.com/en-us/library/x53a06bb.aspx)它不是关键字。

它是一个上下文关键字，因此编译器能够根据上下文确定哪个是您的类，哪个是上下文关键字，不会产生混淆。

上下文关键字是：

> 用于在代码中提供特定含义，但它不是 C# 中的保留字。

所以它没有保留，你可以使用它。

[正如上面评论中所指出的，在Eric Lipperts 博客](http://blogs.msdn.com/b/ericlippert/archive/2009/05/11/reserved-and-contextual-keywords.aspx)上讨论了差异以及在每个 c# 版本中添加的各种关键字和上下文关键字的列表

有趣的是，由于关键字集是在 C#1.0 中决定的，因此没有添加任何内容，以保持向后兼容性。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-11T09:44:26.993

编译器足够聪明，知道您`var`用作类名的上下文永远不是关键字的上下文，因此允许它（这就是为什么它被定义为[*上下文关键字*](http://msdn.microsoft.com/en-us/library/x53a06bb.aspx)）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-11T09:59:41.963

另一种看待这个问题的方式：“var”作为关键字不在 C# 的第一个版本中（与“int”和“true”不同），因此您可能已经编写了一些代码，其中有一个名为“var”的类。这是非常好的和合法的。后来，当“var”被添加到语言中时，设计者非常友好，只在某些情况下将它作为关键字，所以你现有的 var 类仍然可以工作。

这是语言设计的真正挑战之一——如何在不破坏现有代码的情况下添加新功能，并且不会使新功能使用起来很麻烦。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-11T09:45:40.770

在版本 3 之前的 C# 版本中，尚不支持[隐式类型的局部变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)`var`，因此没有特殊含义，可以定义名为`var`. 您的示例程序是合法的，因为 in 的两次出现都`var`引用`main`了 class `var`。

C# 3 和更高版本向下兼容，因此在版本 3 之前用 C# 编写的代码仍然可以使用新的编译器进行编译。

`int`并且`true`是自 C# 1 以来的关键字。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-11T16:22:41.640

关键字可以根据上下文保留。当解析源代码时，该上下文被建立为解析树的一部分。关键字的评估是在该上下文中进行的。因此，在这种情况下， var 不在保留上下文中，并且与在赋值语句中使用它时的含义不同。我相信这种灵活性的一个原因是 var 是在 C# 3 中引入的，因此将其保留在任何地方可能会破坏某些程序的向后兼容性，而将其用作变量类型声明在早期版本中不会编译，所以没有破损。

# javascript - 如何从 jquery/javascript 中的响应标头中获取读取数据

> ID：10548990
> 
> 赞同：11
> 
> 时间：2012-05-11T09:41:13.783
> 
> 标签：javascript, jquery, httpresponse, response-headers

> **可能重复：**
> [jQuery 和 AJAX 响应标头](https://stackoverflow.com/questions/1557602/jquery-and-ajax-response-header)

如果服务器在响应标头中返回数据，我该如何读取它。我正在向服务器发送 AJAX 请求。它只返回响应标头中的**位置**。我想使用 JavaScript 或 jQuery 读取该位置....

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T09:44:30.353

`XMLHttpRequest`和`jqXHR`（它是 jQuery 围绕 AJAX 请求包装的对象）都有一个方法[`getResponseHeader()`，](https://developer.mozilla.org/en/XMLHttpRequest#getResponseHeader%28%29)所以在`always()`处理程序（jQuery）或 readyState 处理程序（`XMLHttpRequest`）中，做`this.getResponseHeader('Location')`。

请记住，如果您的服务器*还*发送了重定向状态代码 (301/ 302)，则会[*自动*遵循](https://stackoverflow.com/questions/8238727/how-to-prevent-ajax-requests-to-follow-redirects-using-jquery)重定向，并且无法访问返回的中间标头。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T09:43:27.870

在 JavaScript 中，使用`XMLHttpRequest`你可以使用[`getAllResponseHeaders()`](https://developer.mozilla.org/en/DOM/XMLHttpRequest#getAllResponseHeaders%28%29)方法来做到这一点。

jQuery 也允许调用该方法。查看[更多](http://api.jquery.com/jQuery.ajax/)。

# search - 如何进行递归 grep（搜索）并自动查看存档文件，尤其是 jar 文件？

> ID：10548991
> 
> 赞同：2
> 
> 时间：2012-05-11T09:41:15.717
> 
> 标签：search, find, grep, text-search

我正在寻找一个可以工作的命令，`grep -r sometext .`但它会知道查看档案（至少`.jar`）。

额外奖励 ;) 如果我们可以让它忽略像`.svn` `.hg`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:39:45.493

低技术解决方案：

```
find . -name "*.jar" -exec jar tf '{}' \| grep -H "SearchTerm" \; 
```

如果您经常这样做，请考虑将 grep 替换为[ack](http://betterthangrep.com/)（此外，它确实避免了默认的版本控制目录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-19T01:29:31.280

要在档案（例如 zip、tar、pax、jar）中搜索，带有选项的开源[ugrep](https://github.com/Genivia/ugrep)`-z`工具正是这样做的：

```
ugrep -z "sometext" file.jar 
```

# iphone - 如何为使用 Objective c iPhone 创建的电影添加效果（如 CurlUp、CurlDown 等）

> ID：10548995
> 
> 赞同：3
> 
> 时间：2012-05-11T09:41:23.720
> 
> 标签：iphone, objective-c, avassetwriter, avmutablecomposition

我已经使用 AVAssetWriter、AVMutableComposition 和图像数组和音频歌曲创建了一部电影，我将其保存到照片库中......知道我想在创建电影时为该图像添加效果......

是否可以在创建电影时为图像添加效果（如 CurlUp、CurlDown 等），如果可以，请提供答案。

```
-(void)writeImageAsMovie:(NSArray *)array toPath:(NSString*)path size:(CGSize)size duration:(int)duration 
 {
CFDataRef imgData;
CGDataProviderRef imgDataProvider;
CGImageRef image1;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *savedVideoPath1 = [documentsDirectoryPath stringByAppendingPathComponent:@"videoOutput1234videoOutput1234.mp4"];

if ([[NSFileManager defaultManager] fileExistsAtPath:savedVideoPath1])
    [[NSFileManager defaultManager] removeItemAtPath:savedVideoPath1 error:nil];

NSError *error = nil;

AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:path] fileType:AVFileTypeMPEG4 error:&error];

NSParameterAssert(videoWriter);

NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                               nil];
AVAssetWriterInput* writerInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput sourcePixelBufferAttributes:nil];

NSParameterAssert(writerInput);
NSParameterAssert([videoWriter canAddInput:writerInput]);

writerInput.expectsMediaDataInRealTime = YES;
[videoWriter addInput:writerInput];

[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];

CVPixelBufferRef buffer = NULL;

int frameCount = 0;

for(int i = 0; i<[array count]; i++)
{
    imgData = (CFDataRef)[array objectAtIndex:i];
    imgDataProvider = CGDataProviderCreateWithCFData (imgData);
    image1 = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);

    buffer = [self pixelBufferFromCGImage:image1];

    BOOL append_ok = NO;
    int j = 0;
    while (!append_ok && j < 30) 
    {
        if (adaptor.assetWriterInput.readyForMoreMediaData) 
        {
            printf("appending %d attemp %d\n", frameCount, j);
            CMTime frameTime;

            int64_t value = i;
            int32_t preferredTimeScale = 1;
            frameTime = CMTimeMake(value, preferredTimeScale);

            append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];

        } 
        else 
        {
            printf("adaptor not ready %d, %d\n", frameCount, j);
            [NSThread sleepForTimeInterval:0.1];
        }
        j++;
    }
    if (!append_ok) {
        printf("error appending image %d times %d\n", frameCount, j);
    }
    frameCount++;
    CVBufferRelease(buffer);
}

if (AVAssetWriterStatusCompleted) {
    [writerInput markAsFinished];
    [videoWriter finishWriting];
}

} 
```