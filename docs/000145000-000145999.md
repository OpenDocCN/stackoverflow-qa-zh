# StackOverflow 问答 000145000-000145999

# html - 网络的未来是什么？XHTML 2、HTML 5 还是其他？

> ID：145000
> 
> 赞同：4
> 
> 时间：2008-09-28T02:15:43.193
> 
> 标签：html, xhtml

我对新版本的 HTML 和新版本的 XHTML 的讨论和进步感到困惑。他们是竞争对手吗？如果是这样，最有可能采用的网络未来是什么？如果不是，每个不同的非竞争目的是什么？

我们是否应该在这里进行蓝光/HDVD 大战？最终有没有明确的决定？我担心未来浏览器会在每个最简单和/或最炫的功能中进行选择，从而让 Web 开发人员试图为任何新的 Web 应用程序找出最低公分母。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T02:25:30.910

HTML 5 适用于 Web 应用程序，而 XHTML2 适用于文档。来自[HTML 5 工作草案](http://www.w3.org/TR/html5/introduction.html#relationship0)：

> XHTML2 定义了一个新的 HTML 词汇表，具有更好的超链接、多媒体内容、注释文档编辑、丰富的元数据、声明性交互形式以及描述人类文学作品（如诗歌和科学论文）的语义。
> 
> 但是，它缺少表达 Web 上常见的许多非文档类型内容的语义的元素。例如，论坛站点、拍卖站点、搜索引擎、在线商店等等，不能很好地适应文档隐喻，并且没有被 XHTML2 覆盖。
> 
> [HTML5] 旨在扩展 HTML，使其也适用于这些上下文。
> 
> XHTML2 和 [HTML5] 使用不同的名称空间，因此都可以在同一个 XML 处理器中实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T08:07:11.307

XHTML2 和 HTML5 是相互竞争的标准，它们都声称是 HTML 的下一个迭代。

很明显，HTML5 将获胜，因为它得到了浏览器供应商的支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T15:16:13.350

XHTML2 实际上已经死了。由于 w3c(HTMLWG) 接受了 WHATWG 的提议，XHTML2 的工作已经停止（甚至在此之前，因为 xhtml2 的最后一个工作草案是从 2006 年开始的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T02:25:19.490

在我看来，HTML5 将是下一个主要格式。XHTML 太无情了，无法在 Web 环境中使用（您不能让页面在每个小错误上都失败......）。

HTML5 正在逐渐成为 Web 开发人员的一种享受 - CANVAS 元素的正式规范、原生拖放 API、离线存储 API、服务器通知 API（推送模型）、正式的内容编辑 API 等等. 如果他们能提供他们提议的一半，这将是 Web 应用程序的重大进步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T02:30:04.610

从我在谷歌快速搜索中找到的内容来看，我认为这些确实是相互竞争的标准。两者都在尝试推进网络技术，但采取了不同的方式来实现这一目标。

要对此事进行非常彻底的处理，您可以查看以下两个链接：

[http://xhtml.com/en/future/x-html-5-versus-xhtml-2/](http://xhtml.com/en/future/x-html-5-versus-xhtml-2/)

[http://www.cmswire.com/cms/industry-news/setting-the-standards-html-5-vs-xhtml-2-002032.php](http://www.cmswire.com/cms/industry-news/setting-the-standards-html-5-vs-xhtml-2-002032.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T02:30:59.803

最终，它是浏览器制造商支持的任何东西。HTML 5 功能丰富，但最终草案可能还需要数年时间。在 4(+) 主要渲染引擎中实现诸如音频和视频支持之类的东西存在固有的困难，并且让它们都以相同的方式运行。即使是验证也是一件苦差事。除了 IE 之外，大多数浏览器都支持 canvas 元素和 SVG，但它们仍然只占大约 25% 的市场份额。由于 IE 仍占据 75-80% 的市场份额，不使用或忽略替代方案的用户将无法使用更高级的功能，这给设计人员带来了艰难的决定。

IE8 只是最终实现了其他浏览器对用户的支持，这意味着 IE 用户群在兼容性方面总是会滞后。虽然 HTML 5 是个好主意，但我认为 Flash/AIR 和 Google Gears 等专有解决方案将继续为 HTML 5 提供的丰富功能提供*标准化*支持。最大的问题确实是标准化——你必须设计一个尽可能多地考虑用户的网站。不过还是有希望的。一位 Mozilla 开发人员为 IE 制作了一个画布插件——我们可能会看到一个开源 IE 插件，它可以将其提升到某个标准，用户可以像 Flash 一样安装它。

值得微软称赞的是，他们对 IE8 和 Windows 7 开发非常开放（参见他们的项目博客），因此更积极的 IE 开发可能会加速 HTML 5 的采用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T21:22:14.783

W3C 允许 xhtml2[工作组的章程于 2009 年到期](http://www.w3.org/MarkUp/)。他们的资源被卷入了 html5 工作组。html5 规范包含一个名为[The XHTML Syntax](http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax)的部分。

# c - FILE* 指针的结尾不等于写入数据的大小

> ID：145006
> 
> 赞同：8
> 
> 时间：2008-09-28T02:20:34.447
> 
> 标签：c, fopen, fwrite, ftell

很简单地说，我有以下代码片段：

```
FILE* test = fopen("C:\\core.u", "w");
printf("Filepointer at: %d\n", ftell(test));
fwrite(data, size, 1, test);
printf("Written: %d bytes.\n", size);
fseek(test, 0, SEEK_END);
printf("Filepointer is now at %d.\n", ftell(test));
fclose(test); 
```

它输出：

```
Filepointer at: 0
Written: 73105 bytes.
Filepointer is now at 74160. 
```

这是为什么？为什么写入的字节数与文件指针不匹配？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-28T02:23:13.240

由于您以文本模式打开文件，因此它将行尾标记（例如 LF）转换为 CR/LF。

如果您在 Windows 上运行，则可能会出现这种情况（并且您可能是，因为您的文件名以 开头`"c:\"`）。

如果您以`"wb"`模式打开文件，我怀疑您会发现数字相同：

```
FILE* test = fopen("C:\\core.u", "wb"); 
```

C99 标准中有这样的说法`7.19.5.3 The fopen function`：

> 参数模式指向一个字符串。如果字符串是以下之一，则文件以指示的模式打开。否则，行为未定义。
> 
> `r`打开文本文件以读取
> `w`截断为零长度或创建文本文件以写入
> `a`附加；打开或创建文本文件以在文件末尾写入
> `rb`打开二进制文件以读取
> `wb`截断为零长度或创建二进制文件以写入
> `ab`追加；打开或创建二进制文件以在文件末尾写入
> `r+`打开文本文件以进行更新（读取和写入）
> `w+`截断为零长度或创建文本文件以进行更新
> `a+`追加；打开或创建文本文件以进行更新，在文件末尾写入
> `r+b`或`rb+`打开二进制文件以进行更新（读取和写入）
> `w+b`或`wb+`截断为零长度或创建二进制文件以进行更新
> `a+b`或`ab+`追加；打开或创建二进制文件进行更新，在文件末尾写入

您可以看到它们区分`w`和`wb`。我认为*不需要*实现来区别对待这两者，但对二进制数据使用二进制模式通常更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-29T04:26:58.083

fwrite 返回什么？通常返回值应该是写入的字节数。另外，在 fseek 之前 ftell() 的回答是什么？

了解什么操作系统、C 编译器版本和 C 库可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-29T12:32:17.930

文件指针是 cookie。它没有价值。您唯一可以使用它的就是寻找文件中的相同位置。我什至不确定 ISO C 是否保证 ftell 返回递增的值。如果您不相信这一点，请查看不同的 seek() 模式。它们的存在正是因为位置不是简单的字节偏移。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-12T23:55:54.363

windows 实际上不会在没有刷新和 fsync 的情况下将所有数据写入文件。也许这就是为什么

# java - 我应该在 NetBeans 中使用什么 Web 服务器？

> ID：145017
> 
> 赞同：4
> 
> 时间：2008-09-28T02:26:03.980
> 
> 标签：java, netbeans, webserver

我已经 8 年没有从事 Java 开发了，但我开始构建一个 NetBeans Web 应用程序。当我浏览 Web 应用程序向导时，它会询问我将要使用的服务器。

对我来说，开始使用 NetBeans 的最佳和最简单的服务器是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T02:53:54.337

由于 NetBeans IDE 是 Sun 的产品，我认为 Glassfish 应用程序服务器将是天作之合。

也就是说，使用 Java 开发 Web 应用程序的优点之一是使用 http 的接口是标准化的（即 Servlet 规范），因此您可以选择任何您想要的 servlet 容器：Glassfish、Tomcat、Jetty或网络逻辑。由于在我看来您正在试验并且想要使用易于管理的东西，所以我可能会选择 Glassfish。但是，当您需要在生产环境中实际部署 Web 应用程序时，请重新考虑该决定。请务必查看其他选项，例如 Tomcat 或 Jetty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-29T14:58:43.273

除非您要部署到完整的 J2EE 应用程序服务器，否则我建议您使用 Tomcat。Tomcat 可以作为独立的 web/servlet/jsp 服务器运行，并避免了完整 J2EE 应用服务器的一些复杂性。

Netbeans 的 Web 开发包将包括 Glassfish 和 Tomcat 的安装程序和自动集成。您将在这些服务器上使用 Netbeans 获得“最佳”体验。

也就是说，Netbeans 中的工作流可以轻松地与其他应用程序服务器集成。从 6.1 开始，这包括 Sun Java System Application Server 8 和 9、GlassFish v1 和 v2、Apache Tomcat 4、5 和 6、JBoss 4、BEA WebLogic 10、IBM WebSphere 6.0 和 6.1、Sailfin V1。有关详细信息，请参阅[Netbeans J2EE 功能](http://www.netbeans.org/features/web/java-ee.html)站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-23T04:19:17.550

Glassfish 实际上是一个易于使用的应用服务器。我认为它对初学者来说更容易使用，并且它与 Netbeans 集成。例如，设置数据库连接缓存很容易。

您通过此网页管理服务器：

```
http://localhost:4848 
```

（登录名：admin，密码：adminadmin）

Glassfish 将在端口 8080 上运行您的应用程序。

Glassfish 主页： http: [//glassfish.dev.java.net](http://glassfish.dev.java.net) （实际上不需要阅读）

对于非 Netbeans 用户，有一个快速入门指南：

```
http://glassfish.dev.java.net/downloads/quickstart/index.html 
```

这是截屏概述：

```
http://download.java.net/javaee5/screencasts/admin-console/index.html 
```

在某些时候，您也会想学习 Tomcat，因为它非常流行，但 Glassfish 是一个更友好的开始。事实上，如果您能找到负担得起的主机，它也可能作为生产服务器更好。

# c# - WCF 服务授权模式

> ID：145025
> 
> 赞同：7
> 
> 时间：2008-09-28T02:31:21.737
> 
> 标签：c#, .net, wcf, authorization

我正在实施安全的 WCF 服务。使用用户名/密码或 Windows 凭据完成身份验证。该服务托管在 Windows 服务进程中。现在，我正在尝试找出对每个服务操作实施*授权的最佳方式。*

例如，考虑以下方法：

```
public EntityInfo GetEntityInfo(string entityId); 
```

您可能知道，在 WCF 中，有一个 OperationContext 对象，您可以从中检索调用者/客户端传入的安全凭据。现在，在调用该方法的第一行时，*身份验证*已经完成。但是，如果决定取决于输入数据本身，我们如何实施授权呢？例如，在上述情况下，假设“管理员”用户（其权限等存储在数据库中）被允许获取实体信息，而其他用户不应该被允许......我们将授权检查放在哪里？

假设我们将它放在方法的第一行，如下所示：

```
CheckAccessPermission(PermissionType.GetEntity, user, entityId) //user is pulled from the current OperationContext 
```

现在，有几个问题：

1.  我们是在授权检查之前还是在授权检查内部验证 entityId（例如检查 null / 空值等）？换句话说，如果授权检查应该包含在每个方法中，这是一个好的模式吗？哪个应该首先发生 - 参数验证或授权？

2.  当授权检查到处都是这样时，我们如何对 WCF 服务进行单元测试，而我们在单元测试中没有 OperationContext！？（假设我正在尝试直接测试此服务类实现而无需任何 WCF 设置）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-28T03:42:39.880

对于问题1，最好先进行授权。这样，您就不会将验证错误消息泄露给未经授权的用户。

顺便说一句，您可以连接到 WCF 对 ASP.NET 角色提供程序的开箱即用支持，而不是使用本地开发的身份验证方法（我认为这是您的 CheckAccessPermission 是什么）。完成此操作后，您将通过 OperationContext.Current.ServiceSecurityContext.PrimaryIdentity.IsInRole() 执行授权。PrimaryIdentity 是一个 IPrincipal。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-17T14:45:12.090

关于问题 #2，我将使用依赖注入来执行此操作并设置您的服务实现，如下所示：

```
class MyService : IMyService
{
    public MyService() : this(new UserAuthorization()) { }
    public MyService(IAuthorization auth) { _auth = auth; }

    private IAuthorization _auth;

    public EntityInfo GetEntityInfo(string entityId)
    {
            _auth.CheckAccessPermission(PermissionType.GetEntity, 
                    user, entityId);

            //Get the entity info
    }
} 
```

请注意，IAuthorization 是您将定义的接口。

因为您将直接测试服务类型（即，不在 WCF 托管框架内运行它），您只需将服务设置为使用允许所有调用的虚拟 IAuthorization 类型。然而，一个更好的测试是模拟 IAuthorization 并测试它在何时以及使用您期望的参数被调用。这允许您测试您对授权方法的调用以及方法本身是否有效。

将授权分成自己的类型还可以让您更轻松地单独测试它是否正确。在我（尽管有限）的经验中，使用 DI“模式”可以让您更好地分离类型中的关注点和可测试性，并带来更简洁的界面（这显然是有争议的）。

我首选的模拟框架是[RhinoMocks](http://ayende.com/projects/rhino-mocks.aspx)，它是免费的，并且具有非常流畅的界面，但还有很多其他的。如果您想了解更多关于 DI 的信息，这里有一些很好的入门知识和 .Net 框架：

*   [Martin Fowler 谈 DI](http://www.martinfowler.com/articles/injection.html)
*   [杰里米·米勒谈 DI](http://codebetter.com/blogs/jeremy.miller/archive/2005/10/06/132825.aspx)
*   [Scott Hanselman 的 DI 容器列表](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)
*   我个人最喜欢的 DI 容器：[The Castle Project Windsor Container](http://www.castleproject.org/container/index.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T20:06:03.107

对于问题1，绝对要先授权。在授权之前不应执行任何代码（在您的控制范围内）以保持最严格的安全性。上面保罗的例子非常好。

对于问题 2，您可以通过子类化您的具体服务实现来处理这个问题。如上所述，使用抽象的“CheckPermissions”方法使真正的业务逻辑实现成为一个抽象类。然后创建 2 个子类，一个供 WCF 使用，一个（在未部署的 DLL 中非常隔离）返回 true（或您希望在单元测试中执行的任何操作）。

示例（请注意，这些不应该在同一个文件甚至 DLL 中！）：

```
public abstract class MyServiceImpl
{
    public void MyMethod(string entityId)
    {
        CheckPermissions(entityId);
        //move along...
    }
    protected abstract bool CheckPermissions(string entityId);
}

public class MyServiceUnitTest
{
    private bool CheckPermissions(string entityId)
    {
        return true;
    }
}

public class MyServiceMyAuth
{
    private bool CheckPermissions(string entityId)
    {
        //do some custom authentication
        return true;
    }
} 
```

然后，您的 WCF 部署使用“MyServiceMyAuth”类，并针对另一个进行单元测试。

# .net - 在 x64 和 x86 上运行 .net 程序是否需要考虑任何因素？

> ID：145026
> 
> 赞同：14
> 
> 时间：2008-09-28T02:31:26.980
> 
> 标签：.net, x86, 64-bit

我相信架构类型（x86 与 x64）在制作 .Net 程序时已为您抽象出来，但还有其他可能导致问题的考虑因素吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-28T02:35:41.790

谨防秘密进行 win32 调用的第三方 COM 库或第三方 .NET 库。这就是我们最头疼的地方。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-28T02:42:02.600

来自[MSDN doco](http://msdn.microsoft.com/en-us/library/ms241064.aspx)，除其他注意事项外：

> 在许多情况下，程序集在 32 位或 64 位 CLR 上运行相同。程序在 64 位 CLR 上运行时表现不同的一些原因包括：
> 
> *   包含根据平台更改大小的成员的结构，例如任何指针类型。
>     
>     
> *   包含常量大小的指针算法。
>     
>     
> *   不正确的平台调用或 COM 声明使用 Int32 而不是 IntPtr 作为句柄。
>     
>     
> *   将 IntPtr 转换为 Int32

此外，默认文件位置。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-28T03:16:06.123

这篇文章有很多好问题需要注意： http: [//osnews.com/story/20330/Windows_x64_Watch_List](http://osnews.com/story/20330/Windows_x64_Watch_List)

就个人而言，我的老板有一台 64 位的 Vista 计算机，而我在 32 位模式下编程。我们遇到了以下问题：

*   32 位应用程序的注册表被隐藏（有点）到 Wow6432Node 文件夹中。并非您习惯在注册表中查找路径的所有应用程序都将位于该节点中（例如，SQL Server 不会）。

*   C:\Windows 文件夹中的 SysWow64 可能会导致 DLL 不在需要的地方（我们在使用 3rd 方许可组件时遇到了这个问题）。

*   有时您需要的文件位于“C:\Program Files (x86)”，而不是“C:\Program Files”。也很烂。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-28T13:28:34.683

*   在 32 位平台上读取和写入 64 位值不是线程安全的。读取 64 位值需要两个操作，这些操作可能会被上下文切换中断。有关详细信息，请参阅有关[Threading.Interlocked.Read](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.read.aspx)的 MSDN 文章。

*   也完全同意[torial](https://stackoverflow.com/users/13990/torial)的[回答](https://stackoverflow.com/questions/145026/are-there-any-considerations-needed-to-be-taken-running-your-net-program-on-x64#145108)！:-)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-25T15:54:40.407

MSDN 发表了一篇关于将 32 位应用程序移植到 64 位执行环境的小论文。

[http://msdn.microsoft.com/en-us/library/ms973190.aspx](http://msdn.microsoft.com/en-us/library/ms973190.aspx)

另外两位博主在 CLR 团队工作时曾写过关于 64 位开发的文章

*   [高拉夫赛斯](http://blogs.msdn.com/gauravseth/archive/tags/Visual+J_2300_+_2F00_+64-bit+computing/default.aspx)
*   [斯潘基](http://blogs.msdn.com/joshwil/archive/tags/Writing+code+targeted+at+64bit_2E00_/default.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T02:36:00.667

x64 将允许您寻址更多内存，但给定相同的代码，它将使用比 x86 更多的内存。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-29T16:05:50.910

根据我移植 Asp.NET 应用程序的经验，基本上是完美无缺的。在 32 位机器和 64 位机器上运行，除了有更多可用内存之外，没有问题发生。发生这种情况是因为已经提到的许多问题（注册表、线程等）已由 Asp.NET 管理，您需要正确修复它们才能在 Asp.NET 环境中运行。

客户端（Windows 窗体）也发生了同样的情况，但如果您使用了一些“不安全”的 API 来获取特殊文件夹或注册表访问权限，那么可能会发生一些问题，正如已经指出的那样。

问候马西莫

# apache - 192.168.0.71...这个特殊地址是做什么用的？

> ID：145027
> 
> 赞同：2
> 
> 时间：2008-09-28T02:31:27.807
> 
> 标签：apache, ip

我的 apache 日志上有一些来自 192.168.0.71 的访问权限。我查找了这个 IP（因为我的服务器几乎只接受来自 127.0.0.1 的请求，并且我看到它是为“特殊目的”保留的。这些可能是什么类型的目的？

* * *

编辑：

我没有告诉你，输入 192.168.0.71 会直接将我带到我的网站，就像输入 127.0.0.1 一样。我只是想知道这与 127.0.0.1 有何不同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-28T02:35:20.293

[RFC 1918](http://www.faqs.org/rfcs/rfc1918.html)为专用网络保留以 192.168 开头的地址。这很可能意味着您本地网络上的某些计算机正在访问服务器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-28T02:38:08.617

> 我没有告诉你，输入 192.168.0.71 会直接将我带到我的网站，就像 127.0.0.1 > 一样。我只是想知道这与 127.0.0.1 有何不同。

这意味着 192.168.0.71 是分配给您机器的内部 IP。

127.0.0.1 只是一个本地环回重定向。192.168.0.71 实际上是直接连接到你的机器上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T02:36:36.797

192.168.???.??? 是一个特殊的、保留的地址范围私有 IP 地址。因此，它可能是您本地网络中的计算机。

阅读：[http ://en.wikipedia.org/wiki/Classful_network](http://en.wikipedia.org/wiki/Classful_network)

**编辑：** 您已经编辑了您的帖子。

看来，这是您在本地网络中的地址。127.0.0.1 是环回地址。

它们之间的区别在于，如果您的网络类型 192.168.0.71 中的其他人访问您的站点，则 127.0.0.1 用于他们的计算机。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T02:34:18.687

192.168.0.71（嗯，整个范围 192.168.0.0 – 192.168.255.255）用于私有（读取。不可访问 Internet）网络 IP 地址，因此它来自您的私有网络中的某些内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T02:35:08.093

[根据本文档](http://www.arin.net/reference/rfc/rfc1918.txt)，我相信它是为任何私有 Intranet 保留的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T02:35:37.467

192.168.xy 块通常用于非 Internet 连接设备。它很可能来自您自己的一台机器。如果你有某种路由器，进入它的配置工具，看看你是否能找到它用来分配给内部机器的地址块。应该是 192.168.xy

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-28T03:47:24.237

从您的编辑来看，听起来 192.168.0.71 是您计算机在内部网络上的 IP 地址。

至于为什么它出现在您的日志中而不是 127.0.0.1... 好吧，我只能假设，无论出于何种原因，您计算机上的一个程序通过其网络 IP 而不是本地主机 IP 与计算机联系。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-28T03:34:09.903

192.168.0.0 网络被定义为“私有”网络之一。正如[Krzysiek Goj](https://stackoverflow.com/questions/145027/192168071-what-is-this-special-address-used-for#145044)所说，请查看[此链接](http://en.wikipedia.org/wiki/Classful_network)以获取更多详细信息。

有 3 个范围被指定为私有 IP 地址。- 10.0.0.0/8（意思是 10.0.0.0 到 10.255.255.255） - 172.16.0.0/12（意思是 172.16.0.0 - 172.31.255.255） - 192.168.0.0/16（意思是 192.168.25.0 到 192.15.2）5.6

通常，您网络上的 DHCP 服务器（其中大多数网络交换机都是示例）被配置为在其中一个私有范围内动态分发 IP 地址。192.168.0.0/16 范围可能是最受欢迎的。或者，您的网络管理员可能已经静态分配了这些地址之一。

要检查您已分配的地址，您可以使用以下选项之一： - (windows) ipconfig /all - (unix) ifconfig

[默认情况下](https://stackoverflow.com/questions/113293/is-the-host-localhost-always-available-for-the-own-system#113383)，您的机器还将使用地址 127.0.0.1 启用环回接口。这可用于访问您自己的机器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-29T04:13:46.773

这里没有足够的信息来完全回答这个问题。最可能的答案是：

Web 服务器也是您的桌面系统。您的浏览器也在该系统上运行，因此 127.0.0.1 流量来自您浏览您自己的网站。

192.168.0.71 是您桌面的实际 IP 地址，它连接到某种将您连接到互联网的 NAT 设备。几乎每个宽带 WiFi 设备都默认使用这个子网。

一些流量来自该地址的原因是，有时，由于各种网络原因，一些流量直接指向您的 192.168.0.71 地址，而不是 127.0.0.1 地址。

# emacs - 如何阻止 Emacs 自动编辑我的启动文件？

> ID：145043
> 
> 赞同：6
> 
> 时间：2008-09-28T02:36:33.783
> 
> 标签：emacs

`.emacs`每当我使用自定义工具或键入默认禁用的命令时，Emacs 都会编辑我的文件。对我的配置进行任何自动编辑都会让我感到紧张。如何阻止 Emacs 编辑我的`.emacs`. 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-28T02:36:42.770

首先要做的是阻止那个愚蠢的“禁用命令”功能做任何事情。如果您非常关心您的`.emacs`文件，那么您当然不需要`novice.el`对您发号施令。

```
(setq disabled-command-function nil) 
```

可以使用以下命令使自定义工具将所有自定义内容填充到单独的文件中。

```
(setq custom-file "~/.emacs-custom.el")
(load custom-file 'noerror) 
```

# java - 使用“BeanUtils alike”替换的最简单方法

> ID：145052
> 
> 赞同：2
> 
> 时间：2008-09-28T02:41:41.573
> 
> 标签：java, string, replace, placeholder

是否有任何库允许我使用与 BeanUtils 中相同的已知符号来提取 POJO 参数，但可以轻松替换字符串中的占位符？

我知道使用 BeanUtils 本身或具有类似功能的其他库可以自行开发，但我不想重新发明轮子。

我想采用如下字符串：

```
String s = "User ${user.name} just placed an order. Deliver is to be
made to ${user.address.street}, ${user.address.number} - ${user.address.city} / 
${user.address.state}"; 
```

并在下面传递 User 类的一个实例：

```
public class User {
   private String name;
   private Address address; 
   // (...)

   public String getName() { return name; } 
   public Address getAddress() {  return address; } 
}

public class Address {
   private String street;
   private int number;
   private String city;
   private String state;

   public String getStreet() { return street; }
   public int getNumber() {  return number; }
   // other getters...
} 
```

类似于：

```
System.out.println(BeanUtilsReplacer.replaceString(s, user)); 
```

将每个占位符替换为实际值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T03:55:47.493

使用 BeanUtils 滚动自己不会花费太多的轮子改造（假设您希望它像要求的那样基本）。此实现采用 Map 替换上下文，其中映射键应对应于为替换给出的变量查找路径的第一部分。

```
import java.lang.reflect.InvocationTargetException;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.apache.commons.beanutils.BeanUtils;

public class BeanUtilsReplacer
{
    private static Pattern lookupPattern = Pattern.compile("\\$\\{([^\\}]+)\\}");

    public static String replaceString(String input, Map<String, Object> context)
        throws IllegalAccessException, InvocationTargetException, NoSuchMethodException
    {
        int position = 0;
        StringBuffer result = new StringBuffer();

        Matcher m = lookupPattern.matcher(input);
        while (m.find())
        {
            result.append(input.substring(position, m.start()));
            result.append(BeanUtils.getNestedProperty(context, m.group(1)));
            position = m.end();
        }

        if (position == 0)
        {
            return input;
        }
        else
        {
            result.append(input.substring(position));
            return result.toString();
        }
    }
} 
```

鉴于您的问题中提供的变量：

```
Map<String, Object> context = new HashMap<String, Object>();
context.put("user", user);
System.out.println(BeanUtilsReplacer.replaceString(s, context)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T03:40:34.083

Spring Framework 应该具有执行此操作的功能（请参阅下面的 Spring JDBC 示例）。如果您可以使用 groovy（只需添加 groovy.jar 文件），您可以使用 Groovy 的 GString 功能很好地做到这一点。

Groovy 示例

```
foxtype = 'quick'
foxcolor = ['b', 'r', 'o', 'w', 'n']
println "The $foxtype ${foxcolor.join()} fox" 
```

Spring JDBC 有一个特性，我用它来支持来自 bean 的命名和嵌套命名绑定变量，如下所示：

```
public int countOfActors(Actor exampleActor) {

    // notice how the named parameters match the properties of the above 'Actor' class
    String sql = "select count(0) from T_ACTOR where first_name = :firstName and last_name = :lastName";

    SqlParameterSource namedParameters = new BeanPropertySqlParameterSource(exampleActor);

    return this.namedParameterJdbcTemplate.queryForInt(sql, namedParameters);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T08:23:27.803

您的字符串示例是至少在一些模板引擎中的有效模板，例如 Velocity 或 Freemarker。这些库提供了一种将模板与包含一些对象的上下文合并的方法（例如您的示例中的“用户”）。

请参阅[http://velocity.apache.org/](http://velocity.apache.org/)或[http://www.freemarker.org/](http://www.freemarker.org/)

一些示例代码（来自 Freemarker 网站）：

```
 /* ------------------------------------------------------------------- */    
        /* You usually do it only once in the whole application life-cycle:    */    

        /* Create and adjust the configuration */
        Configuration cfg = new Configuration();
        cfg.setDirectoryForTemplateLoading(
                new File("/where/you/store/templates"));
        cfg.setObjectWrapper(new DefaultObjectWrapper());

        /* ------------------------------------------------------------------- */    
        /* You usually do these for many times in the application life-cycle:  */    

        /* Get or create a template */
        Template temp = cfg.getTemplate("test.ftl");

        /* Create a data-model */
        Map root = new HashMap();
        root.put("user", "Big Joe");
        Map latest = new HashMap();
        root.put("latestProduct", latest);
        latest.put("url", "products/greenmouse.html");
        latest.put("name", "green mouse");

        /* Merge data-model with template */
        Writer out = new OutputStreamWriter(System.out);
        temp.process(root, out);
        out.flush(); 
```

# javascript - Javascript 作为一种函数式语言

> ID：145053
> 
> 赞同：61
> 
> 时间：2008-09-28T02:41:51.260
> 
> 标签：javascript, functional-programming, language-features

我希望掌握函数式编程概念。

我多年来一直使用 Javascript 在 Web 应用程序中进行客户端脚本编写，除了使用原型之外，它都是简单的 DOM 操作、输入验证等。

最近，我[经常读到](http://eloquentjavascript.net/chapter6.html)Javascript 是支持函数式编程的语言之一。

以我对 Javascript 的熟悉和经验，我更喜欢用它来学习函数式编程。我希望我能够更多地专注于主要的功能概念，而不会被全新的语法所困扰或分心。

综上所述，Javascript 是学习函数式编程概念的好选择吗？Javascript 中的哪些功能是相关/支持函数式编程的？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-09-28T02:49:15.377

JavaScript 支持一流的函数。请参阅*[使用函数式编程技术编写优雅的 JavaScript](http://www.ibm.com/developerworks/library/wa-javascript.html)*。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-29T02:11:27.067

[高阶 Javascript](http://interglacial.com/hoj/hoj.html)是熟悉 javascript 功能方面的*好方法。*如果您想在不深入阅读更大的书的情况下弄湿自己的脚，这也是相对较短的阅读内容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-28T02:49:44.283

尽管javascript在某种程度上支持FP，但并不直接鼓励它。这就是为什么存在像[Oliver Steele 的功能](http://osteele.com/sources/javascript/functional/)这样的项目来填补空白。所以我不会推荐它来学习FP。请改用 F#。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-28T03:05:05.917

我想说，虽然你可以使用 JavaScript 快速掌握一些函数式编程概念，但始终像使用函数式编程语言一样使用 JavaScript 并不是一种常见的做法。至少不是很常见。大多数人不会发布精确说明如何使用 JavaScript 进行函数式编程的教程——marxidad 指出的那个实际上是一个相当不错的例子，但你不会找到很多这样的例子。功能方面通常并不明显，就像人们在 JavaScript 中使用闭包但不知道他们正在使用它时一样。

将两个函数作为参数传递给第三个函数，然后将返回值作为与前两个函数相关的一些执行的想法是一种高级技术，几乎总是只出现在 jQuery 等成熟库的核心中. 自执行匿名函数等已经取得进展，但仍未得到一致使用。大多数教程通常侧重于 JavaScript 的 OO 功能，例如如何创建属性和方法、范围、访问控制以及如何使用构造函数的原型属性。老实说，如果你想要函数式编程，那么我会选择一门以这种能力着称的语言。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-29T19:31:43.600

I don't remember who said it, but javascript has been called "Scheme with Algol syntax". So for learning Scheme/Lisp, Javascript isn't a bad start. Note though that functional languages like Lisp are quite different from pure functional languages, such as Haskell.

Apart from "first-class functions" (Meaning that functions are values, that can be assigned to variables), lexical scope is also an inherent part of what makes a functional language.

[Higher Order Javascript](http://interglacial.com/hoj/hoj.html) and [The Little Javascripter](http://javascript.crockford.com/little.html) has been mentioned already. They are both excellent texts. In addition, [Higher Order Programming in Javascript](http://w3future.com/html/stories/hop.xml) may be an easier start.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-29T14:04:59.067

我会推荐阅读[The Little Schemer](http://www.amazon.co.uk/Little-Schemer-DP-Friedman/dp/0262560992/ref=sr_1_1?ie=UTF8&s=books&qid=1222696934&sr=8-1)，这是一本关于递归的相当薄的书，并且很好地介绍了函数式风格。虽然它专注于 Scheme，但它可以很容易地应用于 JavaScript，请参阅[http://javascript.crockford.com/little.html](http://javascript.crockford.com/little.html)。我发现它对我的 javascript 开发非常有帮助，尽管它在最后变得相当棘手。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-28T02:50:39.833

Javascript是一种多范式语言。如果您的目标是学习函数式语言概念，请尝试从像[OCaml](http://caml.inria.fr/ocaml/)或[Haskell](http://www.haskell.org/)这样的纯函数式语言开始。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-29T06:51:17.253

此外，[Eloquent JavaScript：函数式编程一章](http://eloquentjavascript.net/chapter6.html)。

# ocaml - 这是 OCaml 中二次贝塞尔函数的合理实现吗？

> ID：145056
> 
> 赞同：1
> 
> 时间：2008-09-28T02:42:54.080
> 
> 标签：ocaml, bezier

一位朋友在他的代码库中发现了一个二次贝塞尔曲线函数，该函数使用开关表的巨大老鼠巢来执行计算。他要求我找到一个简短的表达式，让他能够替换巨大的代码块。

为了满足两种不同的好奇心，我想我会尝试在 OCaml 中实现该功能。我是一个非常新手的 OCaml 程序员，我也不熟悉这个函数，而且这个*具体*的实现很难通过谷歌得到。

非常感谢对函数的性能/正确性及其实现的批评。

[二次贝塞尔曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve#Quadratic_B.C3.A9zier_curves)的实现：

```
let rec b2 n =
let p1 = -10\. in
let p2 = 10\. in
let q = n*.n in
let rec b2i n i hd =
  if i > n then
    List.rev hd
  else
    let t = i /. n in
  b2i n (i+.1.) ((((1.-.t)**2.)*.p1+.(2.*.t*.(1.-.t)*.q)+.(t**2.)*.p2) :: hd)
in b2i n 0\. []
;;
let floatprint lst = List.iter (fun f -> Printf.printf "%f; " f) lst ;;
floatprint (b2 8.);; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T14:49:45.083

b2 不是递归的，所以不需要 [let rec b2 n =]。由于 n 永远不会改变，因此无需将其作为 b2i 的参数，只需使用封闭范围内的 n 即可。您的内部函数应该取决于 p0、p1 和 p2，但我认为它取决于 -10.、n**2 和 10。该函数还具有从 [ 0.0; 开始的映射形式。1.0；2.0；...; n.0] 到最终值。你能写吗：

```
let b i = 
  let t = i /. n in
  let tminus = (1.-.t) in
  (tminus *. tminus *. p0) +. (2\. *. t *. tminus *. p1) +. (t *. t * p2)
in
List.map b ([generate list 1.0; 2.0; ... n.0]) 
```

生成列表 1.0...n.0 的函数可以是：（对于小 n）

```
let rec count m n = if m > n then [] else m :: (count (m+.1.) n) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T03:32:23.727

我有两个建议：

您应该`List.rev`在`b2i`返回后调用，以便 ocaml 可以利用它的尾递归优化。我不确定 ocaml 将如何处理当前的实现，`List.rev`但它是尾递归的。你会注意到在[这篇文章](http://caml.inria.fr/pub/old_caml_site/caml-list/2115.html)中是这样完成的。

此外，您可以将迭代的分辨率设为可选参数，例如`?(epsilon=0.1)`.

作为一个 ocaml 程序员，除此之外我看不出有什么错误——只要 P1 和 P2 实际上是常量。将其编译下来，看看在将 List.rev 移入或移出尾递归之间有什么区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T15:20:40.343

这可能是 picayune，但`hd`不是列表参数的好名称。`List.hd`是一个标准函数，它返回列表的第一个元素。用作`hd`列表的名称会导致混淆。

# video - 通过片段着色器进行 YUV 转换

> ID：145064
> 
> 赞同：2
> 
> 时间：2008-09-28T02:47:43.820
> 
> 标签：video, direct3d, rgb, yuv

我已经通过用 Nvidia 的着色器语言编写的片段着色器实现了 YUV 到 RGB 的转换。（Y、U 和 V 存储在单独的纹理中，这些纹理通过我的片段着色器中的多纹理组合在一起）。它在 OpenGL 下工作得很好，但在 Direct3D 下我无法让输出图像看起来正确。我开始怀疑 Direct3D 在我有机会进行 YUV 转换之前以某种方式修改了 Y、U 和 V 样本。有谁知道 Direct3D 是否在片段着色器运行之前对存储在纹理中的值进行任何修改以及如何禁用它们>？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T15:31:01.283

我们想通了。:) 基本上问题在于，虽然我们的 YUV 到 RGB 方程是正确的，但我们没有正确采样 V 数据！因此，再多的对方程式进行处理也无济于事！

最后，我会向任何尝试这样做的人推荐以下策略：

1) 将 R、G 和 B 设置为 Y 的值。你应该得到一个灰度图像（因为 Y 只包含亮度）。2) 接下来，将 R、G 和 B 设置为 U。你应该得到有趣的颜色！3) 最后将 R、G 和 B 设置为 V。同样，你应该得到有趣的颜色。

此外，正确标准化这些值也很关键。查看我们的fourcc.org，了解有关正确YUV 标准化的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T03:18:59.690

想到的唯一建议是纹理格式不合适（低精度或压缩）。

你能描述一下输出看起来有什么问题吗？有机会出现正确与错误的屏幕截图吗？

# iphone - 分发 iPhone 应用程序 2.1 与 2.0

> ID：145080
> 
> 赞同：3
> 
> 时间：2008-09-28T02:57:31.440
> 
> 标签：iphone, app-store

针对 2.1 编译的 iPhone 应用程序能否通过 iTunes 在 2.0 设备上成功安装？

我知道用 2.1 编译的 iPhone 应用程序可以在 2.0 设备上*运行*（假设它们没有使用 2.1 中的任何新内容）。但我不确定 iTunes 是否会让安装发生。

有没有人有这方面的具体信息？

我没有在 AppStore 上看到任何仅 2.1+ 的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T06:50:56.433

我相信通过 iTunes 查看时，针对 2.1 编译的应用程序将被标记为“需要 iPhone 2.1 软件更新”。（但不是从 iPhone 上查看 - iPhone 的 App Store 应用程序仅显示应用程序元数据的子集。）

一个例子：[卡尺](http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=289310044&mt=8)（它在“应用程序描述->要求”下）

但是，我不知道这个“要求”是否真的得到了执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-29T02:42:58.270

不。

如前所述，使用 2.1 编译的应用程序将在 iTunes 中标记为需要 2.1。

如果您尝试从 iPhone 下载 2.1 应用程序，或通过 iTunes 同步 2.1 应用程序，您将收到一条消息，指出需要 iPhone OS 2.1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T03:00:21.417

简短的回答，是的。

有一些应用程序在 2.1 中不能 100% 运行，但是这两个固件几乎是向后兼容的

# c++ - 真的不需要学习C，因为C++包罗万象吗？

> ID：145096
> 
> 赞同：44
> 
> 时间：2008-09-28T03:08:02.693
> 
> 标签：c++, c

我正在上 C++ 编程课程，教授告诉我们没有必要学习 C，因为 C++ 包含 C 中的所有内容以及面向对象的特性。然而，其他一些人告诉我，这不一定是真的。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2008-09-28T03:09:47.777

**概述：**

C++ 几乎是 C 的超集，你的教授是正确的，因为不需要单独学习 C。

C++ 增加了整个面向对象方面、通用编程方面以及不那么严格的规则（例如需要在每个函数的顶部声明的变量）。C++ 确实改变了 C 中某些术语的定义，例如结构，尽管仍然是以超集的方式。

**为什么它不是严格超集的示例：**

[这篇维基百科文章](http://en.wikipedia.org/wiki/C%2B%2B)有几个很好的例子来说明这种差异：

> 一个常见的区别是 C 允许从 void* 到其他指针类型的隐式转换，但 C++ 不允许。因此，以下是有效的 C 代码：
> 
> ```
> int *i = malloc(sizeof(int) * 5); 
> ```
> 
> ...但是要使其在 C 和 C++ 中都可以工作，需要使用显式强制转换：
> 
> ```
> int *i = (int *) malloc(sizeof(int) * 5) 
> ```
> 
> 另一个常见的可移植性问题是 C++ 定义了许多新的关键字，例如 new 和 class，它们可以用作 C 程序中的标识符（例如变量名）。

[这篇维基百科文章](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)也有进一步的区别：

> C++ 编译器禁止 goto 跨越初始化，如以下 C99 代码所示：

```
 void fn(void)
 {
  goto flack;
  int i = 1;
 flack:
   ;
 } 
```

**你应该先学什么？**

你应该先学习 C++，不是因为先学习 C 会伤害你，不是因为你必须忘掉任何东西（你不会），而是因为先学习 C 没有任何好处。无论如何，您最终将了解有关 C 的所有内容，因为它或多或少包含在 C++ 中。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-28T03:18:59.500

虽然确实 C++ 旨在保持与 C 的高度兼容性，并且您在 C++ 中学习的一部分内容将适用于 C，但思维方式完全不同。使用 Boost 或 STL 编程 C++ 与使用 C 编程的体验截然不同。

有一个术语叫做将 C++ 用作更好的 C。这意味着使用一些 C++ 语言特性和工具来简化 C 编程（例如，在 for 语句中声明 for 循环的索引变量）。但是现在，现代 C++ 开发似乎与 C 有很大不同，除了大量的语法之外，在这些情况下，C 遗留问题通常似乎是一种负担而不是一种好处。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-28T05:14:44.497

如果您知道 C++ 的语法，您可能不需要学习 C 的语法，但您确实需要了解 C 中的编码实践与 C++ 中的编码实践有何不同。

所以你的教授不是100%正确的。
在 C 中，您没有将代码安排到逻辑模块中的类，也没有 C++ 多态性。然而，您仍然需要以某种方式实现这些目标。
尽管 C 的语法在某种程度上是 C++ 的子集，但 C 编程并不是 C++**编程**的子集。这是完全不同的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-28T06:20:16.960

是和不是。

正如其他人已经回答的那样，语言 C++ 是语言 C 的超集，但有一些小例外，例如 sizeof('x') 给出不同的值。

但是我认为没有很清楚地说明的是，当谈到这两种语言的*使用*时，C++ 不是超集，而是不同的。C++ 包含新的（如果它们更好，可以讨论）做基本事情的方法，例如写入屏幕。旧的 C 方法仍然存在，但您通常使用新的方法。这意味着一个简单的“hello world”程序在 C 和 C++ 中看起来不同。因此，在 C 和 C++ 中简单的事情并不相同，然后您只需在 C++ 中添加更高级的东西，例如对面向对象编程的支持。

所以如果你学过 C++，你需要重新学习很多东西才能用 C 编程。（嗯，可以将 C++ 作为 C 的扩展来教授，仍然使用 printf 和 malloc 而不是 iostreams 和 new，然后添加类和其他 C++ 东西，但这种使用 C++ 的方式通常是不受欢迎的。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-28T03:16:07.947

没有 C++ 并不是 C 的真正超集。如果您有兴趣，可以查看这篇文章以获得更广泛的差异列表： [http ://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-28T03:29:48.507

[不完全正确。](http://public.research.att.com/~bs/bs_faq.html#C-is-subset)

最大的“陷阱”是打字——C++ 的类型比 C 强得多，而在 C++ 中解决这个问题的首选方法在 C 中根本不可用。也就是说，您可以在 C 中的类型之间静默转换（尤其是指针类型） ，但不是在 C++ 中。C++*强烈*建议使用 static_cast/reinterpret_cast/const_cast 方法来解决这些问题。

更重要的是，如果你学习了 C++ 语法和习惯，你可能会发现处理 C 很困难（有人可能会说这很好；我自己更喜欢 C++，但有时它不是一个选择，或者你必须处理 C 而不是 C++ 中的遗留代码）。同样，您最可能遇到的问题是处理指针（特别是 char* 和一般数组用法；在 C++ 中使用 std::string 和 std::vector 或其他集合**更好**）。

当然可以学习 C++，然后了解 C 和 C++ 之间的差异，并能够同时使用这两种语言进行编程。但差异远不止是肤浅的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-28T03:11:30.220

确实，对于大多数用途，C++ 包含 C 所做的一切。语言律师会很快指出，有一些非常特殊的边缘情况是有效的 C 但不是有效的 C++。

一个这样的例子可能是 C 声明

```
int virtual; 
```

它声明了一个名为“virtual”的整数。由于“virtual”是 C++ 中的关键字，因此这不是有效的 C++。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-28T03:29:27.697

C（尤其是 C89）和 C++ 有一个很大的共同核心，但 C 和 C++ 之间肯定存在差异。显然，C++ 具有所有面向对象的特性，加上泛型编程，加上异常，加上 C 没有的命名空间。但是，C 也有 C++ 中没有的特性，例如支持（接近于过时的）非原型符号来声明和定义函数。特别是，以下函数声明的含义在 C 和 C++ 中是不同的：

```
extern void function(); 
```

在 C++ 中，这是一个不返回值且不接受参数的函数（因此，仅因其副作用而被调用，无论它们是什么）。在 C 中，这是一个不返回值但没有关于参数列表的信息的函数。在调用函数之前，C 仍然不需要在范围内声明（通常；如果函数采用参数的变量列表，则必须在范围内声明，因此`#include <stdio.h>`在 using 之前是至关重要的`printf()`，等等）。

也有区别：

```
sizeof('c') 
```

在 C++ 中，答案是 1；在 C 中，答案通常是 4（具有 8 位字符的 32 位系统）甚至 8（具有 64 位 int 的 64 位系统）。

一般来说，您可以编写在 C 和 C++ 编译器下编译的代码，而不会有太大困难——我的大部分代码一直都是这样做的。这些异常要么是我粗心大意的结果，要么是因为我有意识地利用了 C99 中 C++ 98 中没有的优秀特性，例如指定的初始化程序或`long long`.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-09-21T09:28:24.423

**Stroustrup**本人[建议*不要*](http://www.research.att.com/~bs/bs_faq.html#prerequisite)先学习 C。但话又说回来，他（和他这一代的许多其他人）设法从 C 开始成为 C++ 大师。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-28T03:12:52.433

我个人不同意你的教授。

一般来说，C++ 是基于 C 的，并且在这个“意义上”包含它并扩展它。

然而，由于传统上人们学习 C 并且只有 C++ 的扩展，你教授的说法是不正确的，因为要正确使用 C++，你需要掌握 C 起源。有可能在教你一些东西时，你的教授或教科书不会特别提到什么来自哪种语言。

此外，重要的是要了解，尽管有相似之处，但并非每个 C 程序在 C++ 下都以相同的方式运行。例如，C++ 编译器对 C 结构的解释不同（作为所有公共的类）。

我教的时候先教C核，然后再上C++。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-08-30T16:41:02.013

如果班上的任何学生打算成为嵌入式软件工程师，那么他们可能别无选择，只能使用 C 编程（请参阅[这个问题](https://stackoverflow.com/questions/812717/is-there-any-reason-to-use-c-instead-of-c-for-embedded-development/815197#815197)，以及[这个](https://stackoverflow.com/questions/1223710/we-have-to-use-c-for-performance-reasons)问题，等等）。

当然，学习了 C++ 后，对他们来说，这可能与其说是从头开始，不如说是一种过渡——但它仍然使你教授的说法不真实！

# c# - 在 Windows 中对程序进行基准测试的最佳方法是什么？

> ID：145103
> 
> 赞同：6
> 
> 时间：2008-09-28T03:14:36.673
> 
> 标签：c#, .net, windows, performance, benchmarking

我需要对 Windows 中的 .NET 程序 (C#) 进行一些性能基准测试，但在 Windows 世界中我还没有做太多的基准测试。我已经研究过为此使用带有自定义计数器的 Windows 2000/XP 性能监视器，但我认为这不是我想要的。

在 Windows XP 中是否有任何好的系统工具，或者我只需要使用 System.Diagnostics.Stopwatch [编辑] 并编写文本日志以进行手动解释，还是还有其他什么？

编辑：还有什么超出的`System.Diagnostics.Stopwatch`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-28T03:17:30.020

```
using System.Diagnostics;
....

Stopwatch sw = new Stopwatch();

sw.Start();

// Code you want to time...

// Note: for averaged accuracy (without other OS effects), 
//       run timed code multiple times in a loop 
//       and then divide by the number of runs.

sw.Stop();

Console.WriteLine("Took " + sw.ElapsedTicks + " Ticks"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T18:58:07.153

对于微基准测试，我非常喜欢 MeasureIt（可以从[http://msdn.microsoft.com/en-us/magazine/cc500596.aspx](http://msdn.microsoft.com/en-us/magazine/cc500596.aspx)下载）。这是一个测试项目，由 CLR 的性能架构师 Vance Morrison 编写。它目前为许多 .Net/CLR 核心方法提供了一套很好的基准。它最好的部分是，为你想测试的任何东西调整和添加新的基准是微不足道的。只需运行“MeasureIt /edit”，它就会为自己的项目启动 VS，这样您就可以查看这些基准是如何编写的，并根据需要以类似的方式添加新的基准。

如前所述，StopWatch 可能是最简单的方法，MeasureIt 在下面使用 StopWatch 进行计时，但它还执行其他一些操作，例如运行代码块 X 次，然后为您提供运行的统计信息等等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-28T06:04:35.017

那里有很多分析器。以下是我所知道的一些：

*   [红门的蚂蚁](http://www.red-gate.com/products/ants_profiler/index.htm)
*   [Yourkit 的 .Net Profiler](http://www.yourkit.com/dotnet/download/index.jsp)
*   [JetBrains dotTrace](http://www.jetbrains.net/confluence/display/NetProf/Home)

如果您继续使用 System.Diagnostics.Stopwatch，您将能够仅检测和测量代码的特定点，在这些点您明确放置 Start/Stop。这对于测量特定的部分已经足够了，比如一个紧密的循环或类似的东西，但它不会让你完整地了解你的程序大部分时间都花在了哪里。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-09-30T21:59:27.713

如果你只想要一些快速的数字，你可以使用 Powershell 来计算整体执行时间。使用测量命令 cmdlet。它大致相当于 Unix 中的“时间”。

```
> measure-command { your.exe arg1 }

Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 4
Milliseconds      : 996
Ticks             : 49963029
TotalDays         : 5.78275798611111E-05
TotalHours        : 0.00138786191666667
TotalMinutes      : 0.083271715
TotalSeconds      : 4.9963029
TotalMilliseconds : 4996.3029 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-28T03:35:07.810

这可能不是您想要的，但[dotTrace](http://www.jetbrains.com/profiler/)提供了许多有用的诊断信息，并且已集成到 Visual Studio 中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-15T18:49:17.963

如果您的项目很大并且有很多模块在进行大量调用，您可以： [http ://www.moduleanalyzer.com/](http://www.moduleanalyzer.com/)

# c# - C++ 性能与 Java/C#

> ID：145110
> 
> 赞同：119
> 
> 时间：2008-09-28T03:16:54.077
> 
> 标签：c#, java, c++, performance, bytecode

我的理解是 C/C++ 生成在特定机器架构上运行的本机代码。相反，Java 和 C# 等语言在抽象出原生架构的虚拟机之上运行。从逻辑上讲，由于这个中间步骤，Java 或 C# 似乎不可能与 C++ 的速度相匹配，但是我被告知最新的编译器（“热点”）可以达到甚至超过这个速度。

也许这更像是一个编译器问题而不是语言问题，但是任何人都可以用简单的英语解释这些虚拟机语言中的一种如何可能比母语表现得更好吗？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2008-09-28T09:35:40.360

## JIT 与静态编译器

如前文所述，JIT 可以在运行时将 IL/字节码编译为本机代码。提到了成本，但没有得出结论：

JIT 的一个大问题是它不能编译所有东西：JIT 编译需要时间，因此 JIT 只会编译部分代码，而静态编译器会生成完整的本地二进制文件：对于某些程序，静态编译器将轻松胜过 JIT。

当然，C#（或 Java，或 VB）通常比 C++ 更快地生成可行且健壮的解决方案（如果只是因为 C++ 具有复杂的语义，而 C++ 标准库虽然有趣且强大，但与完整的.NET 或 Java 标准库的范围），因此通常情况下，大多数用户看不到 C++ 和 .NET 或 Java JIT 之间的差异，对于那些关键的二进制文件，你仍然可以调用 C++ 处理来自 C# 或 Java（即使这种本机调用本身可能非常昂贵）......

## C++ 元编程

请注意，通常，您将 C++ 运行时代码与 C# 或 Java 中的等效代码进行比较。但是 C++ 有一个开箱即用的特性可以胜过 Java/C#，那就是模板元编程：代码处理将在编译时完成（因此大大增加了编译时间），导致运行时为零（或几乎为零）。

~~我还没有看到这对现实生活的影响（我只玩过概念，但到那时，差别是 JIT 的执行秒数，而C++ 的执行时间**为零**），但值得一提的是，事实上模板元编程不是琐碎的...~~

> ***编辑 2011-06-10：**在 C++ 中，使用类型是在编译时完成的，这意味着生成调用非泛型代码的泛型代码（例如，从字符串到类型 T 的泛型解析器，为它识别的类型 T 调用标准库 API，并且使解析器易于由其用户扩展）非常简单且非常高效，而 Java 或 C# 中的等价物充其量写起来很痛苦，并且即使在编译时已知类型也总是会变慢并在运行时解析，这意味着您唯一的*希望*是让 JIT 内联整个事情。*

...

> ***编辑 2011-09-20： Blitz++（**[主页](http://www.oonumerics.org/blitz/whatis.html)，[维基百科](https://secure.wikimedia.org/wikipedia/en/wiki/Blitz%2B%2B)）背后的团队就是这样做的，显然，他们的目标是通过 C++ 模板元编程尽可能地从运行时执行转移到编译时间，从而达到 FORTRAN 在科学计算方面的性能. 所以我上面写的“*我还没有看到对这个现实生活的影响*”部分显然**确实**存在于现实生活中。*

## 本机 C++ 内存使用

C++ 的内存使用与 Java/C# 不同，因此具有不同的优点/缺陷。

无论 JIT 优化如何，没有什么比直接指针访问内存更快（让我们暂时忽略处理器缓存等）。因此，如果您在内存中有连续的数据，通过 C++ 指针（即 C 指针......让我们给 Caesar 应有的）访问它会比在 Java/C# 中快几倍。C++ 有 RAII，这使得很多处理比 C# 甚至 Java 容易得多。C++ 不需要`using`限定其对象的存在范围。而 C++ 没有`finally`子句。这不是错误。

:-)

尽管有类似 C# 的原始结构，但 C++“在堆栈上”的对象在分配和销毁时不会花费任何成本，并且不需要 GC 在独立线程中工作来进行清理。

至于内存碎片，2008 年的内存分配器不是 1980 年的旧内存分配器，通常与 GC 相比：C++ 分配不能在内存中移动，没错，但是，就像在 Linux 文件系统上一样：谁需要硬盘当碎片没有发生时进行碎片整理？为正确的任务使用正确的分配器应该是 C++ 开发人员工具包的一部分。现在，编写分配器并不容易，然后，我们大多数人都有更好的事情要做，而且在大多数情况下，RAII 或 GC 已经足够好了。

> ***编辑 2011-10-04：**有关高效分配器的示例：在 Windows 平台上，从 Vista 开始，默认启用[低碎片堆。](http://msdn.microsoft.com/en-us/library/aa366750.aspx)对于以前的版本，可以通过调用 WinAPI 函数[HeapSetInformation](http://msdn.microsoft.com/en-us/library/aa366705.aspx)来激活 LFH 。在其他操作系统上，提供了替代分配器（参见[https://secure.wikimedia.org/wikipedia/en/wiki/Malloc](https://secure.wikimedia.org/wikipedia/en/wiki/Malloc)列表）*

现在，随着多核和多线程技术的兴起，内存模型变得有些复杂。在这个领域，我猜想.NET 有优势，有人告诉我，Java 占据了上风。一些“裸机”黑客很容易称赞他的“接近机器”的代码。但是现在，手工生成更好的汇编比让编译器完成它的工作要困难得多。对于 C++ 来说，十年来编译器通常变得比黑客更好。对于 C# 和 Java，这更容易。

尽管如此，新标准 C++0x 将向 C++ 编译器强加一个简单的内存模型，这将标准化（从而简化）C++ 中有效的多处理/并行/线程代码，并使编译器的优化更容易和更安全。但是，我们将在几年后看到它的承诺是否成真。

## C++/CLI 与 C#/VB.NET

*注意：在本节中，我说的是 C++/CLI，即 .NET 托管的 C++，而不是原生 C++。*

上周，我参加了 .NET 优化的培训，发现静态编译器无论如何都非常重要。与 JIT 一样重要。

在 C++/CLI（或其祖先，托管 C++）中编译的相同代码可能比在 C#（或 VB.NET，其编译器生成与 C# 相同的 IL）中生成的相同代码快几倍。

因为 C++ 静态编译器在生成已经优化的代码方面比 C# 的要好得多。

例如，.NET 中的函数内联仅限于字节码长度小于或等于 32 字节的函数。因此，C# 中的某些代码将生成一个 40 字节的访问器，它永远不会被 JIT 内联。C++/CLI 中的相同代码将生成一个 20 字节的访问器，该访问器将由 JIT 内联。

另一个例子是临时变量，它被 C++ 编译器简单地编译掉，但仍然在 C# 编译器生成的 IL 中被提及。C++ 静态编译优化将导致更少的代码，从而再次授权更积极的 JIT 优化。

推测这是因为 C++/CLI 编译器受益于 C++ 原生编译器的大量优化技术。

## 结论

我喜欢 C++。

但在我看来，C# 或 Java 都是更好的选择。不是因为它们比 C++ 快，而是因为当你将它们的质量相加时，它们最终会比 C++ 更有效率，需要更少的培训，并且拥有更完整的标准库。至于大多数程序，它们的速度差异（以一种或另一种方式）将可以忽略不计......

## 编辑 (2011-06-06)

### 我在 C#/.NET 上的经验

我现在有 5 个月的几乎独家专业 C# 编码（加起来我的简历已经充满了 C++ 和 Java，以及一点 C++/CLI）。

我玩过 WinForms（咳咳……）和 WCF（酷！）和 WPF（酷！！！！通过 XAML 和原始 C#。WPF 是如此简单，我相信 Swing 无法与之相比）和 C# 4.0。

结论是，虽然生成在 C#/Java 中运行的代码比在 C++ 中更容易/更快，但在 C# 中生成强大、安全和健壮的代码（在 Java 中甚至更难）比在 C++ 中要困难得多。原因很多，但可以概括为：

1.  **泛型不如模板强大**（*尝试编写一个有效的泛型 Parse 方法（从字符串到 T），或 C# 中的 boost::lexical_cast 的有效等价物来理解问题*）
2.  **RAII 仍然无与伦比**（*GC 仍然会泄漏（是的，我不得不处理这个问题）并且只会处理内存。即使 C#`using`也没有那么简单和强大，因为编写正确的 Dispose 实现很困难*）
3.  **C#`readonly`和 Java`final`远不如 C++ 有用`const`**（*如果没有大量工作，就无法在 C# 中公开只读的复杂数据（例如，节点树），而它是 C++ 的内置特性。不可变数据是一个有趣的解决方案，但并非所有内容都可以变得不可变，因此到目前为止还不够*）。

因此，只要您想要一些可以工作的东西，C# 仍然是一种令人愉快的语言，但当您想要一些*始终安全地*工作的东西时，C# 仍然是一种令人沮丧的语言。

Java 更令人沮丧，因为它与 C# 有相同的问题，而且还有更多问题：由于缺少 C#`using`关键字的等效项，我的一位非常熟练的同事花费了太多时间来确保正确释放其资源，而 C++ 中的等效项则有很容易（使用析构函数和智能指针）。

所以我想 C#/Java 的生产力提升对于大多数代码都是可见的……直到你需要代码尽可能完美的那一天。那天，你会知道痛苦。（你不会相信我们的服务器和 GUI 应用程序会问什么......）。

### 关于服务器端 Java 和 C++

我与大楼另一边的服务器团队保持联系（我在其中工作了 2 年，然后回到 GUI 团队），我学到了一些有趣的东西。

去年的趋势是 Java 服务器应用程序注定要取代旧的 C++ 服务器应用程序，因为 Java 有很多框架/工具，并且易于维护、部署等。

...直到最后几个月低延迟问题浮出水面。然后，Java 服务器应用程序，无论我们熟练的 Java 团队尝试如何优化，都简单而干净地输掉了与旧的、未真正优化的 C++ 服务器的竞争。

目前，决定将 Java 服务器保留用于性能仍然很重要的通用用途，不关心低延迟目标，并积极优化已经更快的 C++ 服务器应用程序以满足低延迟和超低延迟需求。

### 结论

没有什么比想象的那么简单。

Java，甚至更多的 C#，都是很酷的语言，具有广泛的标准库和框架，您可以在其中快速编码，并且很快就会有结果。

但是，当您需要原始功能、强大和系统的优化、强大的编译器支持、强大的语言功能和绝对安全时，Java 和 C# 使您难以赢得最后缺少但至关重要的质量百分比，您需要保持在竞争中的领先地位。

就好像你在 C#/Java 中比在 C++ 中需要更少的时间和更少经验的开发人员来生成平均质量的代码，但另一方面，当你需要优秀到完美的质量代码时，获得结果突然变得更容易和更快就在 C++ 中。

当然，这是我自己的看法，或许仅限于我们的具体需求。

但是，这仍然是今天发生的事情，无论是在 GUI 团队还是在服务器端团队中。

当然，如果有新情况发生，我会更新这篇文章。

## 编辑 (2011-06-22)

> “我们发现，在性能方面，C++ 在很大程度上胜出。然而，它也需要最广泛的调优工作，其中许多工作的复杂程度是普通程序员无法做到的。
> 
> [...] Java 版本可能是最容易实现的，但最难分析性能。特别是垃圾收集的影响是复杂的，很难调整。”

资料来源：

*   [https://days2011.scala-lang.org/sites/days2011/files/ws3-1-Hundt.pdf](https://days2011.scala-lang.org/sites/days2011/files/ws3-1-Hundt.pdf)
*   [http://www.computing.co.uk/ctg/news/2076322/-winner-google-language-tests](http://www.computing.co.uk/ctg/news/2076322/-winner-google-language-tests)

## 编辑 (2011-09-20)

> “Facebook 的流行语是‘**合理编写的 C++ 代码运行速度很快**’，这突显了在优化 PHP 和 Java 代码方面付出的巨大努力。矛盾的是，C++ 代码比其他语言更难编写，但**高效的代码是[用 C++ 编写比用其他语言编写] 容易得多。** ”
> 
> – [Herb Sutter](https://secure.wikimedia.org/wikipedia/en/wiki/Herb_Sutter)在[//build/](http://www.buildwindows.com/)引用**[Andrei Alexandrescu](https://secure.wikimedia.org/wikipedia/en/wiki/Andrei_Alexandrescu)**

资料来源：

*   [http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-835T](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-835T)
*   [http://video.ch9.ms/build/2011/slides/TOOL-835T_Sutter.pptx](http://video.ch9.ms/build/2011/slides/TOOL-835T_Sutter.pptx)

* * *

## 回答 #2

> 赞同：178
> 
> 时间：2008-09-28T03:21:49.930

通常，C# 和 Java 可以同样快或更快，因为 JIT 编译器——一种在第一次执行 IL 时编译你的编译器——可以进行 C++ 编译程序无法进行的优化，因为它可以查询机器。可以判断机器是Intel还是AMD；Pentium 4、Core Solo 或 Core Duo；或者是否支持 SSE4 等。

一个 C++ 程序必须预先编译，通常使用混合优化，以便它在所有机器上运行得很好，但没有像针对单个配置（即处理器、指令集、其他硬件）那样优化。

此外，某些语言功能允许 C# 和 Java 中的编译器对您的代码做出假设，从而允许它优化某些部分，这对于 C/C++ 编译器来说是不安全的。当您可以访问指针时，会有很多不安全的优化。

此外，Java 和 C# 可以比 C++ 更有效地进行堆分配，因为垃圾收集器和代码之间的抽象层允许它一次完成所有堆压缩（相当昂贵的操作）。

现在我不能在下一点上为 Java 说话，但我知道例如 C# 在知道方法体为空时实际上会删除方法和方法调用。它会在你的代码中使用这种逻辑。

如您所见，某些 C# 或 Java 实现更快的原因有很多。

综上所述，可以在 C++ 中进行特定的优化，这将摧毁你可以用 C# 做的任何事情，尤其是在图形领域和任何你接近硬件的时候。指针在这里创造了奇迹。

因此，根据您要写的内容，我会选择其中一个。但是，如果您正在编写不依赖于硬件的东西（驱动程序、视频游戏等），我不会担心 C# 的性能（同样不能谈论 Java）。它会做得很好。

在 Java 方面，[@Swati](https://stackoverflow.com/users/12682/swati)指出了一篇好文章：

[https://www.ibm.com/developerworks/library/j-jtp09275](https://www.ibm.com/developerworks/library/j-jtp09275/)

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2008-10-21T02:34:20.820

每当我谈到托管与非托管性能时，我喜欢指出 Rico（和 Raymond）所做的系列比较 C++ 和 C# 版本的中文/英文字典。这个[谷歌搜索](http://www.google.com/search?hl=en&q=performance+quiz+6+site%3Ablogs.msdn.com)会让你自己阅读，但我喜欢 Rico 的总结。

> 所以我为自己的惨败感到羞耻吗？几乎不。托管代码几乎不费吹灰之力就获得了非常好的结果。要击败受管理的雷蒙德必须：
> 
> *   自己写文件I/O的东西
> *   编写自己的字符串类
> *   编写自己的分配器
> *   编写自己的国际地图
> 
> 当然，他使用了可用的较低级别的库来执行此操作，但这仍然需要大量工作。你能把剩下的称为 STL 程序吗？我不这么认为，我认为他保留了 std::vector 类，这最终从来都不是问题，并且他保留了 find 函数。几乎所有其他东西都没有了。
> 
> 所以，是的，你绝对可以击败 CLR。我认为雷蒙德可以让他的程序运行得更快。
> 
> 有趣的是，两个程序内部计时器报告的解析文件的时间大致相同——每个为 30 毫秒。区别在于开销。

对我来说，最重要的是，非托管版本需要 6 次修订才能击败作为原始非托管代码的简单移植的托管版本。如果你需要最后一点的性能（并且有时间和专业知识来获得它），你将不得不去管理，但对我来说，我将利用我在第一个版本中超过 33 的数量级优势% 如果我尝试 6 次，我将获得收益。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2008-09-30T16:36:50.580

特定 CPU 优化的编译通常被高估了。只需用 C++ 编写一个程序，并使用针对 pentium PRO 的优化进行编译，然后在 pentium 4 上运行。然后使用针对 pentium 4 的优化重新编译。我用几个程序完成了漫长的下午。一般结果？？通常性能提升不到 2-3%。所以理论上的 JIT 优势几乎没有。大多数性能差异只能在使用标量数据处理功能时才能观察到，最终需要手动微调才能实现最大性能。这种优化执行起来很慢而且成本很高，因此有时无论如何都不适合 JIT。

在现实世界和实际应用程序中，C++ 通常仍然比 Java 快，主要是因为内存占用更轻，从而导致更好的缓存性能。

但是要使用所有 C++ 功能，开发人员必须努力工作。你可以取得优异的成绩，但你必须为此动用你的大脑。C++ 是一种决定为您提供更多工具的语言，并收取您必须学习它们才能很好地使用该语言的费用。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2008-09-28T03:30:49.007

JIT（即时编译）可以非常快，因为它针对目标平台进行了优化。

这意味着它可以利用您的 CPU 可以支持的任何编译器技巧，无论开发人员在哪个 CPU 上编写代码。

.NET JIT 的基本概念是这样工作的（高度简化）：

**第一次调用方法：**

*   您的程序代码调用方法 Foo()
*   CLR 查看实现 Foo() 的类型并获取与其关联的元数据
*   从元数据中，CLR 知道 IL（中间字节码）存储在哪个内存地址中。
*   CLR 分配一块内存，并调用 JIT。
*   JIT 将 IL 编译为本机代码，将其放入分配的内存中，然后更改 Foo() 的类型元数据中的函数指针以指向该本机代码。
*   运行本机代码。

**第二次调用方法：**

*   您的程序代码调用方法 Foo()
*   CLR 查看实现 Foo() 的类型并在元数据中找到函数指针。
*   运行此内存位置的本机代码。

如您所见，第二次，它几乎与 C++ 相同，除了具有实时优化的优势。

也就是说，还有其他开销问题会减慢托管语言的速度，但 JIT 有很大帮助。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-09-28T05:40:28.803

我喜欢[Orion Adrian](https://stackoverflow.com/questions/145110/c-performance-vs-javac#145122)的回答，但它还有另一个方面。

几十年前就汇编语言与像 FORTRAN 这样的“人类”语言提出了同样的问题。部分答案是相似的。

是的，C++ 程序在任何给定的（非平凡的？）算法上都能够比 C# 更快，但是 C# 中的程序通常会比 C++ 中的“幼稚”实现和 C++ 中的优化版本一样快或更快将需要更长的时间来开发，并且可能仍然以非常小的优势击败 C# 版本。那么，真的值得吗？

您必须逐一回答这个问题。

也就是说，我长期以来一直是 C++ 的粉丝，我认为它是一种极具表现力和强大的语言——有时被低估了。但在许多“现实生活”问题中（对我个人而言，这意味着“我得到报酬解决的那种”），C# 将更快、更安全地完成工作。

你支付的最大罚款？许多 .NET 和 Java 程序都占用大量内存。我见过 .NET 和 Java 应用程序占用“数百”兆字节的内存，而具有类似复杂性的 C++ 程序几乎无法占用“数十”兆字节的内存。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-28T03:28:06.327

我不确定您是否经常会发现 Java 代码比 C++ 运行得更快，即使使用 Hotspot 也是如此，但我会稍微解释一下它是如何发生的。

将编译后的 Java 代码视为 JVM 的解释机器语言。当 Hotspot 处理器注意到某些已编译代码将被多次使用时，它会对机器代码执行优化。由于手动调整汇编几乎总是比 C++ 编译代码快，因此可以确定以编程方式调整的机器代码不会**太**糟糕。

因此，对于高度重复的代码，我可以看到 Hotspot JVM 在哪里可以比 C++ 更快地运行 Java ......直到垃圾收集开始发挥作用。:)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-28T04:10:40.563

一般来说，程序的*算法*对应用程序的速度比*语言*更重要。您可以用任何语言（包括 C++）实现糟糕的算法。考虑到这一点，您通常可以用一种可以帮助您实现更高效算法的语言编写运行速度更快的代码。

高级语言在这方面做得很好，它提供了对许多有效的预构建数据结构的更容易访问，并鼓励有助于避免低效代码的实践。当然，它们有时也可以很容易地编写一堆非常慢的代码，所以你仍然需要了解你的平台。

此外，C++ 正在赶上“新”（注意引号）特性，如 STL 容器、自动指针等——例如，参见 boost 库。你可能偶尔会发现完成某项任务的最快方法需要像指针算术这样的技术，这在高级语言中是被禁止的——尽管它们通常允许你调用一个可以根据需要实现它的语言编写的库.

最主要的是要知道你正在使用的语言，它的相关 API，它可以做什么，以及它的限制是什么。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-10-21T04:05:57.110

我也不知道...我的 Java 程序总是很慢。:-) 不过，我从来没有真正注意到 C# 程序特别慢。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-05-16T19:41:36.873

这是另一个有趣的基准测试，您可以在自己的计算机上尝试一下。

它比较了 ASM、VC++、C#、Silverlight、Java 小程序、Javascript、Flash (AS3)

[Roozz 插件速度演示](http://www.3djam.com/speed_demo.aspx)

请注意，javascript 的速度因执行它的浏览器而异。Flash 和 Silverlight 也是如此，因为这些插件与托管浏览器在同一进程中运行。但是 Roozz 插件运行标准的 .exe 文件，这些文件在自己的进程中运行，因此速度不受托管浏览器的影响。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2009-12-03T21:35:31.787

您应该定义“表现优于......”。好吧，我知道，您问的是速度，但这并不是最重要的。

*   虚拟机是否执行更多的运行时开销？是的！
*   他们吃更多的工作记忆吗？是的！
*   他们是否有更高的启动成本（运行时初始化和 JIT 编译器）？是的！
*   他们需要安装一个庞大的库吗？是的！

等等，它有偏见，是的；）

使用 C# 和 Java，您会为获得的东西付出代价（更快的编码、自动内存管理、大型库等）。但是你没有太多讨价还价的余地：要么拿走完整的包裹，要么什么都不买。

即使这些语言可以优化某些代码以比编译代码更快地执行，整个方法（恕我直言）效率低下。想象一下每天开着卡车开车 5 英里到你的工作场所！它很舒服，感觉很好，你很安全（极端崩溃区），在你踩油一段时间后，它甚至会和标准车一样快！为什么我们不都有一辆卡车开车上班？;)

在 C++ 中，你得到你所支付的，不多也不少。

引用 Bjarne Stroustrup：“C++ 是我最喜欢的垃圾收集语言，因为它产生的垃圾很少” [链接文本](http://www2.research.att.com/~bs/bs_faq.html#really-say-that)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-09-28T03:23:21.923

从 Java 或 C# 编译器生成的可执行代码不会被解释——它会“及时”（JIT）编译为本机代码。因此，在执行期间第一次遇到 Java/C# 程序中的代码时，由于“运行时编译器”（又名 JIT 编译器）将字节码 (Java) 或 IL 代码 (C#) 转换为本机机器指令，因此会产生一些开销。但是，下次在应用程序仍在运行时遇到该代码时，会立即执行本机代码。这解释了一些 Java/C# 程序最初看起来很慢，但运行时间越长性能越好。一个很好的例子是 ASP.Net 网站。第一次访问该网站时，可能会有点慢，因为 C# 代码由 JIT 编译器编译为本机代码。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-28T03:27:09.357

虚拟机语言不太可能胜过编译语言，但它们可以足够接近以至于没关系，因为（至少）以下原因（我在这里说 Java，因为我从未做过 C#）。

1/ Java 运行时环境通常能够检测频繁运行的代码片段并对这些部分执行即时 (JIT) 编译，以便将来它们以全编译速度运行。

2/ Java 库的大部分被编译，因此当您调用库函数时，您执行的是编译后的代码，而不是解释的。您可以通过下载 OpenJDK 查看代码（C 语言）。

3/ 除非您进行大量计算，否则程序运行的大部分时间都在等待来自非常慢（相对而言）人类的输入。

4/ 由于Java字节码的很多验证都是在加载类的时候完成的，所以运行时检查的正常开销大大减少了。

5/ 在最坏的情况下，性能密集型代码可以提取到编译模块并从 Java 调用（参见 JNI），以便它全速运行。

总之，Java 字节码永远不会胜过本机机器语言，但有一些方法可以缓解这种情况。Java 的一大优势（如我所见）是*巨大*的标准库和跨平台特性。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-28T04:11:28.953

关于您提出的具体问题，这里有一些很好的答案。我想退后一步，看看更大的图景。

请记住，您的用户对您编写的软件速度的看法受许多其他因素的影响，而不仅仅是代码生成的优化程度。这里有些例子：

*   手动内存管理很难正确执行（没有泄漏），更难有效执行（完成后不久就释放内存）。一般来说，使用 GC 更有可能生成一个管理内存的程序。您是否愿意为了超越 GC 努力工作并延迟交付您的软件？

*   我的 C# 比我的 C++ 更容易阅读和理解。我还有更多方法可以让自己相信我的 C# 代码工作正常。这意味着我可以优化我的算法，降低引入错误的风险（用户不喜欢崩溃的软件，即使它很快就崩溃了！）

*   我可以用 C# 比用 C++ 更快地创建我的软件。这样可以腾出时间来提高性能，并且仍然可以按时交付我的软件。

*   用 C# 编写好的 UI 比 C++ 更容易，所以我更有可能在 UI 保持响应时将工作推到后台，或者在程序必须阻塞一段时间时提供进度或心跳 UI。这并没有让任何事情变得更快，但它让用户更乐于等待。

我所说的关于 C# 的一切都可能适用于 Java，我只是没有经验可以肯定地说。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-09-28T09:44:12.837

如果你是一名学习 C++ 的 Java/C# 程序员，你会很想继续从 Java/C# 的角度思考，并将逐字翻译成 C++ 语法。在这种情况下，您只能获得前面提到的本机代码与解释/JIT 的优势。为了在 C++ 与 Java/C# 中获得最大的性能提升，您必须学会用 C++ 思考并专门设计代码以利用 C++ 的优势。

套用[Edsger Dijkstra](http://www.cs.virginia.edu/~evans/cs655-S00/readings/ewd498.html)的话说：[你的第一语言] 使心灵无法恢复。
套用[Jeff Atwood](http://www.codinghorror.com/blog/archives/000272.html)的话说：你可以用任何新的语言来写 [你的第一语言]。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-01-21T21:46:59.557

最重要的 JIT 优化之一是方法内联。如果 Java 可以保证运行时的正确性，它甚至可以内联虚拟方法。这种优化通常不能由标准静态编译器执行，因为它需要对整个程序进行分析，这很难因为单独编译（相比之下，JIT 拥有所有可用的程序）。方法内联改进了其他优化，提供更大的代码块进行优化。

Java/C# 中的标准内存分配也更快，而释放 (GC) 也不会慢很多，但确定性较低。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2011-06-06T14:40:18.287

[Orion Adrian](https://stackoverflow.com/questions/145110/c-performance-vs-java-c/145122#145122)，让我倒置你的帖子，看看你的言论有多么没有根据，因为关于 C++ 也可以说很多。并且告诉 Java/C# 编译器优化掉空函数确实让你听起来好像你*不是*我的优化专家，因为 a) 为什么一个真正的程序应该包含空函数，除了非常糟糕的遗留代码，b) 那真的不是黑色和出血边缘优化。

除了这句话之外，您还公然抱怨指针，但 Java 和 C# 中的对象不是基本上像 C++ 指针一样工作吗？它们不能重叠吗？它们不能为空吗？C（和大多数 C++ 实现）具有 restrict 关键字，两者都有值类型，C++ 具有非空保证的值引用。Java 和 C# 提供什么？

## >>>>>>>>>>

通常，C 和 C++ 可以同样快或更快，因为 AOT 编译器 - 一个在部署之前编译你的代码的编译器，一劳永逸地，在你的高内存多核构建服务器上 - 可以进行 C# 编译程序的优化不能，因为它有很多时间这样做。编译器可以判断机器是Intel还是AMD；Pentium 4、Core Solo 或 Core Duo；或者如果支持 SSE4 等，并且如果您的编译器不支持运行时调度，您可以通过部署一些专门的二进制文件自己解决这个问题。

AC# 程序通常在运行时编译，以便它在所有机器上运行良好，但没有针对单个配置（即处理器、指令集、其他硬件）进行尽可能多的优化，并且*必须*花费一些时间第一的。循环裂变、循环反转、自动矢量化、整个程序优化、模板扩展、IPO 等功能很难以不惹恼最终用户的方式完全解决。

此外，某些语言功能允许 C++ 或 C 中的编译器对您的代码做出假设，从而允许它优化某些部分，而这些部分对于 Java/C# 编译器来说是不安全的。当您无法访问泛型的完整类型 ID 或有保证的程序流程时，会有很多不安全的优化。

此外，C++ 和 C 只需增加一个寄存器增量即可一次执行许多堆栈分配，这对于垃圾收集器和代码之间的抽象层来说肯定比 Java 和 C# 分配更有效。

现在我不能在下一点上为 Java 说话，但我知道例如 C++ 编译器实际上会在知道方法体为空时删除方法和方法调用，它会消除常见的子表达式，它可能会尝试并重试为了找到最佳的寄存器使用，它不强制进行边界检查，它会自动矢量化循环和内部循环，并将内部反转为外部，将条件移出循环，拆分和取消拆分循环。它会将 std::vector 扩展为本地零开销数组，就像您使用 C 方式一样。它将进行程序间优化。它将直接在调用者站点构造返回值。它将折叠和传播表达式。它将数据重新排序为缓存友好的方式。它将执行跳转线程。它使您可以编写零运行时开销的编译时光线追踪器。它将进行非常昂贵的基于图的优化。它会降低强度，如果它用语法上完全不相等但语义上等效的代码替换某些代码（旧的“xor foo，foo”只是最简单的，尽管这种优化已经过时了）。如果您愿意的话，您可以省略 IEEE 浮点标准并启用更多优化，例如浮点操作数重新排序。在它按摩和屠杀你的代码之后，它可能会重复整个过程，因为通常，某些优化为更确定的优化奠定了基础。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。它是否用语法上完全不相等但语义上等效的代码替换了某些代码（旧的“xor foo, foo”只是最简单的，尽管这种优化已经过时了）。如果您愿意的话，您可以省略 IEEE 浮点标准并启用更多优化，例如浮点操作数重新排序。在它按摩和屠杀你的代码之后，它可能会重复整个过程，因为通常，某些优化为更确定的优化奠定了基础。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。它是否用语法上完全不相等但语义上等效的代码替换了某些代码（旧的“xor foo, foo”只是最简单的，尽管这种优化已经过时了）。如果您愿意的话，您可以省略 IEEE 浮点标准并启用更多优化，例如浮点操作数重新排序。在它按摩和屠杀你的代码之后，它可能会重复整个过程，因为通常，某些优化为更确定的优化奠定了基础。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。如果您愿意的话，您可以省略 IEEE 浮点标准并启用更多优化，例如浮点操作数重新排序。在它按摩和屠杀你的代码之后，它可能会重复整个过程，因为通常，某些优化为更确定的优化奠定了基础。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。如果您愿意的话，您可以省略 IEEE 浮点标准并启用更多优化，例如浮点操作数重新排序。在它按摩和屠杀你的代码之后，它可能会重复整个过程，因为通常，某些优化为更确定的优化奠定了基础。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。它也可能只是使用改组的参数重试，并查看其他变体在其内部排名中的得分情况。它会在你的代码中使用这种逻辑。

如您所见，某些 C++ 或 C 实现更快的原因有很多。

综上所述，可以在 C++ 中进行许多优化，这些优化将击败您可以使用 C# 做的任何事情，尤其是在数字运算、实时和接近金属的领域，但不仅限于此。你甚至不必触摸一个指针就能走很长一段路。

因此，根据您要写的内容，我会选择其中一个。但是，如果您正在编写不依赖于硬件的东西（驱动程序、视频游戏等），我不会担心 C# 的性能（同样不能谈论 Java）。它会做得很好。

## <<<<<<<<<<

*一般来说，某些笼统的论点在特定帖子中可能听起来很酷，但通常听起来并不一定可信。*

**无论如何，为了和平：*AOT*很棒，*JIT*也很棒。唯一正确的答案可能是：视情况而定。真正聪明的人知道，无论如何你都可以使用两全其美的东西。**

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-28T03:21:28.823

只有当 Java 解释器生成的机器代码实际上比您的编译器为您正在编写的 C++ 代码生成的机器代码优化得*更好*时，才会发生这种情况，以至于C++ 代码比 Java 和解释成本慢。

然而，这种情况实际发生的可能性非常低——除非 Java 有一个编写得很好的库，并且你有自己编写的 C++ 库。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-10-21T03:21:38.883

实际上，C# 并不像 Java 那样真正在虚拟机中运行。IL 被编译成汇编语言，完全是本机代码，运行速度与本机代码相同。您可以预先 JIT 一个完全消除 JIT 成本的 .NET 应用程序，然后您将运行完全本机代码。

.NET 的减速并不是因为 .NET 代码更慢，而是因为它在幕后做了很多事情，比如垃圾收集、检查引用、存储完整的堆栈帧等。这在以下情况下非常强大和有用构建应用程序，但也是有代价的。请注意，您也可以在 C++ 程序中执行所有这些操作（许多核心 .NET 功能实际上是您可以在 ROTOR 中查看的 .NET 代码）。但是，如果您手动编写相同的功能，您最终可能会得到一个慢得多的程序，因为 .NET 运行时已经过优化和微调。

也就是说，托管代码的优势之一是它可以完全可验证，即。您可以验证代码永远不会访问另一个进程的内存或在执行之前执行 unsage 事情。微软有一个完全托管操作系统的研究原型，令人惊讶地表明，通过利用此验证关闭托管程序不再需要的安全功能，100% 托管环境实际上可以比任何现代操作系统执行得更快。 （在某些情况下，我们说的是 10 倍）。SE电台有一个很棒的插曲谈论这个项目。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-28T03:38:25.057

在某些情况下，托管代码实际上可以比本机代码*更快*。例如，“mark-and-sweep”垃圾收集算法允许 JRE 或 CLR 等环境在一次传递中释放大量短期（通常）对象，其中大多数 C/C++ 堆对象被一次性释放。一次。

来自[维基百科](http://en.wikipedia.org/wiki/Garbage_collection_(computer_science))：

> 出于许多实际目的，在垃圾收集语言中实现的分配/解除分配密集型算法实际上可以比使用手动堆分配的等效算法更快。一个主要原因是垃圾收集器允许运行时系统以一种潜在的有利方式分摊分配和释放操作。

也就是说，我已经编写了很多 C# 和 C++，并且运行了很多基准测试。根据我的经验，C++ 在两个方面比 C# 快得多：(1) 如果您使用一些用 C# 编写的代码，将其移植到 C++，本机代码*往往*会更快。快多少？嗯，它变化很大，但看到 100% 的速度提升并不少见。(2) 在某些情况下，垃圾收集会*大大*降低托管应用程序的速度。.NET CLR 在处理大堆（例如，> 2GB）时做得很糟糕，最终可能会在 GC 上花费大量时间——即使在具有很少——甚至没有——中间生命周期对象的应用程序中也是如此。

当然，在我所遇到的大多数情况下，托管语言在很长一段时间内都足够快，并且为 C++ 的额外性能而进行的维护和编码权衡根本不是一个好的选择。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-10-16T13:21:59.390

这是一个有趣的基准 [http://zi.fi/shootout/](http://zi.fi/shootout/)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-10-21T04:32:48.863

实际上 Sun 的 HotSpot JVM 使用“混合模式”执行。它解释方法的字节码，直到它确定（通常通过某种计数器）特定代码块（方法、循环、try-catch 块等）将被执行很多次，然后它 JIT 编译它。JIT 编译方法所需的时间通常比解释该方法（如果它是一个很少运行的方法）要长。“混合模式”的性能通常更高，因为 JVM 不会浪费时间 JITing 很少（如果有的话）运行的代码。C# 和 .NET 不这样做。.NET JIT 通常会浪费时间。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2009-09-10T19:14:02.777

这是 Cliff Click 的答案：[http ://www.azulsystems.com/blog/cliff/2009-09-06-java-vs-c-performanceagain](http://www.azulsystems.com/blog/cliff/2009-09-06-java-vs-c-performanceagain)

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-12-29T18:12:51.620

阅读有关 HP Labs 的[Dynamo](http://arstechnica.com/reviews/1q00/dynamo/dynamo-1.html)的信息，这是一种在 PA-8000 上运行的 PA-8000 解释器，它运行程序的速度通常比它们在本地运行时更快。那么它似乎一点也不奇怪！

不要将其视为“中间步骤”——运行一个程序已经涉及许多其他步骤，任何语言都可以。

它通常归结为：

*   程序有热点，所以即使你在运行 95% 的代码主体时速度较慢，如果你在热点 5% 处速度更快，你仍然可以在性能上具有竞争力

*   HLL 比 C/C++ 之类的 LLL 更了解您的意图，因此可以生成更优化的代码（OCaml 甚至更多，实际上通常更快）

*   JIT 编译器有很多静态编译器没有的信息（比如，你这次碰巧拥有的实际数据）

*   JIT 编译器可以在运行时进行传统链接器实际上不允许做的优化（例如重新排序分支，以便常见情况是平坦的，或内联库调用）

总而言之，C/C++ 在性能方面是相当糟糕的语言：关于数据类型的信息相对较少，没有关于数据的信息，也没有动态运行时允许在运行时优化方面做很多事情。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2010-07-09T17:50:27.980

当 Java 或 CLR 比 C++ 快时，您可能会遇到短暂的爆发，但总体而言，在应用程序的生命周期内性能更差：有关该结果的一些结果，请参见 www.codeproject.com/KB/dotnet/RuntimePerformance.aspx。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2011-09-06T10:34:47.393

> 我的理解是 C/C++ 生成在特定机器架构上运行的本机代码。相反，Java 和 C# 等语言在抽象出原生架构的虚拟机之上运行。从逻辑上讲，由于这个中间步骤，Java 或 C# 似乎不可能与 C++ 的速度相匹配，但是我被告知最新的编译器（“热点”）可以达到甚至超过这个速度。

这是不合逻辑的。使用中间表示不会固有地降低性能。例如，llvm-gcc 通过 LLVM IR（它是一个虚拟的无限寄存器机器）将 C 和 C++ 编译为本机代码，它实现了出色的性能（经常击败 GCC）。

> 也许这更像是一个编译器问题而不是语言问题，但是任何人都可以用简单的英语解释这些虚拟机语言中的一种如何可能比母语表现得更好吗？

这里有些例子：

*   具有 JIT 编译的虚拟机有助于生成运行时代码（例如`System.Reflection.Emit`在 .NET 上），因此您可以使用 C# 和 F# 等语言即时编译生成的代码，但必须求助于用 C 或 C++ 编写相对较慢的解释器。例如，实现正则表达式。

*   虚拟机的某些部分（例如写屏障和分配器）通常是用手工编码的汇编程序编写的，因为 C 和 C++ 不能生成足够快的代码。如果一个程序强调系统的这些部分，那么可以想象它的性能可能优于任何可以用 C 或 C++ 编写的程序。

*   本机代码的动态链接需要符合 ABI，这可能会阻碍性能并避免整个程序优化，而链接通常在 VM 上延迟，并且可以从整个程序优化中受益（如 .NET 的具体泛型）。

我还想解决上面 paercebal 高度赞成的答案的一些问题（因为有人不断删除我对他的答案的评论），这提出了适得其反的两极分化观点：

> 代码处理将在编译时完成...

因此，模板元编程仅在程序在编译时可用的情况下才有效，而情况通常并非如此，例如，不可能在 vanilla C++ 中编写具有竞争力的性能正则表达式库，因为它无法生成运行时代码（一个重要方面）元编程）。

> ...玩类型是在编译时完成的...Java 或 C# 中的等价物在最好的情况下编写起来很痛苦，并且即使在编译时已知类型也总是会变慢并在运行时解决。

在 C# 中，这仅适用于引用类型，不适用于值类型。

> 无论 JIT 优化如何，没有什么比直接指针访问内存更快...如果内存中有连续数据，通过 C++ 指针（即 C 指针...让我们给 Caesar 应得的）访问它会快几倍比在 Java/C# 中。

人们已经观察到[Java 在 SciMark2 基准测试的 SOR 测试中击败 C++，](http://blogs.oracle.com/dagastine/entry/sun_java_is_faster_than)正是因为指针阻碍了与别名相关的优化。

还值得注意的是，.NET 确实在链接后跨动态链接库对泛型进行类型特化，而 C++ 则不能，因为必须在链接之前解析模板。很明显，泛型相对于模板的最大优势是可理解的错误消息。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-28T03:26:52.243

除了其他人所说的之外，根据我的理解，.NET 和 Java 更擅长内存分配。例如，它们可以在内存碎片化时压缩内存，而 C++ 则不能（本机，但如果您使用聪明的垃圾收集器，它可以）。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-12-04T01:26:38.217

对于任何需要高速度的东西，JVM 只调用 C++ 实现，所以问题更多的是它们的库有多好，而不是 JVM 对于大多数与操作系统相关的东西有多好。垃圾收集将您的内存减半，但使用一些更出色的 STL 和 Boost 功能将产生相同的效果，但潜在的错误数倍。

如果您只是在具有许多类的大型项目中使用 C++ 库及其许多高级特性，那么您可能会比使用 JVM 慢。除了更容易出错。

但是，C++ 的好处是它允许您优化自己，否则您会被编译器/jvm 所做的事情所困扰。如果您制作自己的容器、编写自己的对齐内存管理、使用 SIMD 并在各处进行汇编，那么您可以将大多数 C++ 编译器自行执行的速度至少提高 2 到 4 倍。对于某些操作，16x-32x。那是使用相同的算法，如果您使用更好的算法并进行并行化，增长可能会非常惊人，有时比常用方法快数千倍。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-12-04T03:32:56.410

我从几个不同的角度来看待它。

1.  给定无限的时间和资源，托管或非托管代码会更快吗？显然，答案是非托管代码至少可以在这方面与托管代码联系在一起——因为在最坏的情况下，您只需对托管代码解决方案进行硬编码。
2.  如果你把一个程序用一种语言直接翻译成另一种语言，它的性能会差多少？可能很多，对于*任何*两种语言。大多数语言需要不同的优化并且有不同的陷阱。微观性能通常与了解这些细节有关。
3.  给定有限的时间和资源，两种语言中哪一种会产生更好的结果？这是最有趣的问题，因为虽然托管语言可能会产生稍慢的代码（给定为该语言合理编写的程序），但该版本可能会更快完成，从而有更多时间花在优化上。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-12-29T17:57:35.300

一个非常简短的回答：在固定预算的情况下，您将获得比 C++ 应用程序性能更好的 Java 应用程序（ROI 考虑）此外，Java 平台有更多体面的分析器，这将帮助您更快地查明热点

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2011-09-07T06:18:15.803

我认为这些天不需要考虑服务器的处理速度（毕竟多核处理器都进入市场）。它应该根据内存使用情况进行更多定义。这样java就有了一个小缺点。
但总的来说，编程语言仍然适用于不同的目的。那是他们的竞争领域，在每个部分都是不同的赢家。
而且我确信 Java 将在长期内获胜，因为它会在它产生的所有新特性中继续发展和竞争力。
我在这里找到了一个[链接](https://stackoverflow.com/questions/2163411/why-did-java-have-the-reputation-of-being-slow)，它将支持我投票给 java 的理由

# database - 单元测试数据库驱动应用程序的最佳策略是什么？

> ID：145131
> 
> 赞同：383
> 
> 时间：2008-09-28T03:26:42.120
> 
> 标签：database, unit-testing, orm, mocking

我使用许多由后端复杂程度不同的数据库驱动的 Web 应用程序。通常，有一个独立于业务和表示逻辑的[ORM层。](http://en.wikipedia.org/wiki/Object-relational_mapping)这使得对业务逻辑进行单元测试相当简单；事物可以在离散模块中实现，并且测试所需的任何数据都可以通过对象模拟来伪造。

但是测试 ORM 和数据库本身总是充满问题和妥协。

多年来，我尝试了一些策略，但没有一个完全让我满意。

*   使用已知数据加载测试数据库。针对 ORM 运行测试并确认返回正确的数据。这里的缺点是您的测试数据库必须跟上应用程序数据库中的任何模式更改，并且可能会不同步。它还依赖于人工数据，并且可能不会暴露由于愚蠢的用户输入而发生的错误。最后，如果测试数据库很小，它不会像缺少索引那样显示效率低下。（好吧，最后一个并不是真正应该用于单元测试的，但它并没有什么坏处。）

*   加载生产数据库的副本并对其进行测试。这里的问题是您可能不知道在任何给定时间生产数据库中有什么。如果数据随时间变化，您的测试可能需要重写。

有人指出，这两种策略都依赖于特定的数据，单元测试应该只测试功能。为此，我看到建议：

*   使用模拟数据库服务器，并仅检查 ORM 是否发送正确的查询以响应给定的方法调用。

您使用了哪些策略来测试数据库驱动的应用程序（如果有的话）？什么对你最有效？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2008-09-28T03:45:30.500

我实际上已经使用了您的第一种方法并取得了相当大的成功，但是我认为以稍微不同的方式可以解决您的一些问题：

1.  将整个架构和用于创建它的脚本保存在源代码管理中，以便任何人都可以在签出后创建当前的数据库架构。此外，将样本数据保存在由构建过程的一部分加载的数据文件中。当您发现导致错误的数据时，将其添加到您的示例数据中以检查错误不会再次出现。

2.  使用持续集成服务器来构建数据库模式、加载示例数据并运行测试。这就是我们保持测试数据库同步的方式（在每次测试运行时重建它）。虽然这要求 CI 服务器有权访问和拥有自己的专用数据库实例，但我说每天构建 3 次我们的 db 模式极大地帮助发现了可能直到交付之前才发现的错误（如果不是稍后）。我不能说我在每次提交之前都重建了架构。有人吗？使用这种方法，您不必这样做（也许我们应该这样做，但如果有人忘记了也没什么大不了的）。

3.  对于我的小组，用户输入是在应用程序级别（而不是数据库）完成的，因此这是通过标准单元测试进行测试的。

加载生产数据库副本：
这是我上一份工作中使用的方法。这是几个问题的巨大痛苦原因：

1.  该副本将从生产版本中过期
2.  将对副本的架构进行更改，并且不会传播到生产系统。在这一点上，我们会有不同的模式。不好玩。

模拟数据库服务器：
我们目前的工作也是这样做的。每次提交后，我们对注入了模拟数据库访问器的应用程序代码执行单元测试。然后，我们每天执行 3 次上述完整的数据库构建。我绝对推荐这两种方法。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2008-11-24T15:34:50.900

由于以下原因，我总是针对内存数据库（HSQLDB 或 Derby）运行测试：

*   它让您思考将哪些数据保留在测试数据库中以及为什么。只需将您的生产数据库拖入测试系统就可以转化为“我不知道我在做什么或为什么，如果出现问题，那不是我！！” ;)
*   它确保可以在新的地方轻松地重新创建数据库（例如，当我们需要从生产中复制错误时）
*   它极大地帮助了 DDL 文件的质量。

一旦测试开始，内存中的数据库就会加载新的数据，在大多数测试之后，我调用 ROLLBACK 来保持它的稳定。**始终**保持测试数据库中的数据稳定！如果数据一直在变化，则无法进行测试。

数据从 SQL、模板数据库或转储/备份加载。如果它们是可读格式，我更喜欢转储，因为我可以将它们放入 VCS。如果这不起作用，我使用 CSV 文件或 XML。如果我必须加载大量数据……我不会。您永远不必加载大量数据 :) 不适用于单元测试。性能测试是另一个问题，适用不同的规则。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-28T03:55:29.553

我一直在问这个问题很长时间，但我认为没有灵丹妙药。

我目前所做的是模拟 DAO 对象，并在内存中保留一个良好对象集合的表示，这些对象表示可能存在于数据库中的有趣数据案例。

我看到这种方法的主要问题是，您只涵盖与 DAO 层交互的代码，但从未测试 DAO 本身，根据我的经验，我发现该层也发生了很多错误。我还保留了一些针对数据库运行的单元测试（为了在本地使用 TDD 或快速测试），但这些测试从未在我的持续集成服务器上运行，因为我们没有为此目的保留数据库，我认为在 CI 服务器上运行的测试应该是独立的。

我发现另一种非常有趣但并不总是值得的方法，因为它有点耗时，即在仅在单元测试中运行的嵌入式数据库上创建用于生产的相同模式。

尽管毫无疑问，这种方法可以提高您的覆盖率，但也有一些缺点，因为您必须尽可能接近 ANSI SQL 才能使其与您当前的 DBMS 和嵌入式替代品一起使用。

无论您认为什么与您的代码更相关，都有一些项目可能会使其更容易，例如[DbUnit](http://dbunit.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-08-01T21:13:01.613

即使有工具可以让您以一种或另一种方式模拟您的数据库（例如[jOOQ](http://www.jooq.org)，[`MockConnection`](http://blog.jooq.org/2013/02/20/easy-mocking-of-your-database/)可以在[这个答案](https://stackoverflow.com/a/18004400/521799)中看到- 免责声明，我为 jOOQ 的供应商工作），我建议*不要*模拟复杂的大型数据库查询。

即使您只想集成测试您的 ORM，请注意 ORM 会向您的数据库发出一系列非常复杂的查询，这些查询可能会有所不同

*   句法
*   复杂
*   命令 （！）

模拟所有这些以生成合理的虚拟数据非常困难，除非您实际上在模拟中构建了一个小数据库，它解释了传输的 SQL 语句。话虽如此，请使用众所周知的集成测试数据库，您可以使用众所周知的数据轻松地对其进行重置，您可以在该数据库上运行集成测试。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-24T17:06:47.733

我使用第一个（针对测试数据库运行代码）。我看到你用这种方法提出的唯一实质性问题是模式不同步的可能性，我通过在我的数据库中保留版本号并通过脚本对每个版本增量应用更改来进行所有模式更改来处理。

我还首先针对我的测试环境进行了所有更改（包括对数据库模式的更改），所以它最终是相反的：在所有测试通过后，将模式更新应用到生产主机。我还在我的开发系统上保留了一对单独的测试与应用程序数据库，以便我可以在那里验证数据库升级是否正常工作，然后再接触真正的生产盒。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-12T12:18:13.340

对于基于 JDBC 的项目（直接或间接，例如 JPA、EJB 等），您可以不模拟整个数据库（在这种情况下，最好在真实的 RDBMS 上使用测试数据库），而只能在 JDBC 级别模拟.

优点是这种方式的抽象，因为 JDBC 数据（结果集、更新计数、警告......）无论后端是什么都是相同的：您的产品数据库、测试数据库或只是为每个测试提供的一些模型数据案子。

通过为每种情况模拟 JDBC 连接，无需管理测试数据库（清理，一次只有一个测试，重新加载固定装置，...）。每个模型连接都是隔离的，无需清理。每个测试用例中只提供了最少的固定装置来模拟 JDBC 交换，这有助于避免管理整个测试数据库的复杂性。

Acolyte 是我的框架，其中包括用于此类模型的 JDBC 驱动程序和实用程序：http: [//acolyte.eu.org](http://acolyte.eu.org)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-08T23:26:44.537

我使用的是第一种方法，但有点不同，可以解决你提到的问题。

为 DAO 运行测试所需的一切都在源代码控制中。它包括用于创建数据库的模式和脚本（docker 对此非常有用）。如果可以使用嵌入式数据库 - 我使用它来提高速度。

与其他描述的方法的重要区别在于，测试所需的数据不是从 SQL 脚本或 XML 文件加载的。一切（除了一些有效不变的字典数据）都是由应用程序使用实用程序函数/类创建的。

主要目的是让测试使用的数据

1.  非常接近考试
2.  显式（使用 SQL 文件获取数据使得查看哪些数据被哪些测试使用非常有问题）
3.  将测试与不相关的更改隔离开来。

这基本上意味着这些实用程序允许在测试本身中以声明方式仅指定测试所必需的内容，并省略不相关的内容。

为了了解它在实践中的含义，请考虑对某些 DAO 的测试，该测试与`Comment`s to `Post`s 编写的s 一起使用`Authors`。为了测试此类 DAO 的 CRUD 操作，应在数据库中创建一些数据。测试看起来像：

```
@Test
public void savedCommentCanBeRead() {
    // Builder is needed to declaratively specify the entity with all attributes relevant
    // for this specific test
    // Missing attributes are generated with reasonable values
    // factory's responsibility is to create entity (and all entities required by it
    //  in our example Author) in the DB
    Post post = factory.create(PostBuilder.post());

    Comment comment = CommentBuilder.comment().forPost(post).build();

    sut.save(comment);

    Comment savedComment = sut.get(comment.getId());

    // this checks fields that are directly stored
    assertThat(saveComment, fieldwiseEqualTo(comment));
    // if there are some fields that are generated during save check them separately
    assertThat(saveComment.getGeneratedField(), equalTo(expectedValue));        
} 
```

与带有测试数据的 SQL 脚本或 XML 文件相比，这有几个优点：

1.  维护代码要容易得多（例如在许多测试中引用的某些实体中添加强制列，例如作者，不需要更改大量文件/记录，而只需更改构建器和/或工厂）
2.  特定测试所需的数据在测试本身中描述，而不是在其他文件中。这种接近性对于测试可理解性非常重要。

## 回滚与提交

我发现测试在执行时提交更方便。`DEFERRED CONSTRAINTS`首先，如果提交从未发生，则无法检查某些效果（例如）。其次，当测试失败时，可以在数据库中检查数据，因为它不会被回滚还原。

当然，这有一个缺点，即测试可能会产生损坏的数据，这将导致其他测试失败。为了解决这个问题，我尝试隔离测试。在上面的示例中，每个测试都可能创建新的`Author`，并且所有其他实体都与其相关，因此很少发生冲突。为了处理可能被破坏但不能表示为数据库级别约束的剩余不变量，我使用一些编程检查可能在每次测试后运行的错误条件（它们在 CI 中运行，但通常在本地关闭以提高性能原因）。

# objective-c - 我的 Objective-C 单例应该是什么样的？

> ID：145154
> 
> 赞同：333
> 
> 时间：2008-09-28T03:38:53.743
> 
> 标签：objective-c, design-patterns, singleton, object-initializers

我的单例访问器方法通常是以下几种变体：

```
static MyClass *gInstance = NULL;

+ (MyClass *)instance
{
    @synchronized(self)
    {
        if (gInstance == NULL)
            gInstance = [[self alloc] init];
    }

    return(gInstance);
} 
```

我能做些什么来改善这一点？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2008-12-05T08:24:30.407

另一种选择是使用该`+(void)initialize`方法。从文档中：

> 运行`initialize`时恰好在类或从它继承的任何类从程序中发送其第一条消息之前向程序中的每个类发送一次。（因此，如果不使用该类，则可能永远不会调用该方法。）运行时`initialize`以线程安全的方式将消息发送到类。超类在其子类之前收到此消息。

所以你可以做类似这样的事情：

```
static MySingleton *sharedSingleton;

+ (void)initialize
{
    static BOOL initialized = NO;
    if(!initialized)
    {
        initialized = YES;
        sharedSingleton = [[MySingleton alloc] init];
    }
} 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2008-09-28T03:46:15.257

```
@interface MySingleton : NSObject
{
}

+ (MySingleton *)sharedSingleton;
@end

@implementation MySingleton

+ (MySingleton *)sharedSingleton
{
  static MySingleton *sharedSingleton;

  @synchronized(self)
  {
    if (!sharedSingleton)
      sharedSingleton = [[MySingleton alloc] init];

    return sharedSingleton;
  }
}

@end 
```

[[来源]](http://en.wikipedia.org/wiki/Singleton_pattern#Objective-C)

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2008-09-28T07:05:14.917

根据我在下面的其他答案，我认为您应该这样做：

```
+ (id)sharedFoo
{
    static dispatch_once_t once;
    static MyFoo *sharedFoo;
    dispatch_once(&once, ^ { sharedFoo = [[self alloc] init]; });
    return sharedFoo;
} 
```

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2010-03-15T18:56:31.293

由于[Kendall 发布](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like/2294440#2294440)了一个线程安全的单例，它试图避免锁定成本，我想我也会抛出一个：

```
#import <libkern/OSAtomic.h>

static void * volatile sharedInstance = nil;                                                

+ (className *) sharedInstance {                                                                    
  while (!sharedInstance) {                                                                          
    className *temp = [[self alloc] init];                                                                 
    if(!OSAtomicCompareAndSwapPtrBarrier(0x0, temp, &sharedInstance)) {
      [temp release];                                                                                   
    }                                                                                                    
  }                                                                                                        
  return sharedInstance;                                                                        
} 
```

好的，让我解释一下这是如何工作的：

1.  快速案例：在正常执行`sharedInstance`中已经设置好了，所以`while`循环永远不会执行，函数在简单地测试变量是否存在后返回；

2.  慢情况：如果`sharedInstance`不存在，则分配一个实例并使用比较和交换（'CAS'）将其复制到其中；

3.  有争议的情况：如果两个线程都尝试同时调用*并且*`sharedInstance`同时不存在，那么它们都将初始化单例的新实例并尝试将其 CAS 放置到位。无论谁赢了 CAS 都会立即返回，无论谁输了都会释放它刚刚分配的实例并返回 (now set) 。单个充当设置线程的写屏障和测试线程的读屏障。 *`sharedInstance``sharedInstance``OSAtomicCompareAndSwapPtrBarrier`*

 ** * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-09-28T04:34:43.423

```
静态 MyClass *sharedInst = nil;

+ (id)sharedInstance
{
    @同步（自我）{
        if ( sharedInst == nil ) {
            /* sharedInst 在 init 中设置 */
            [[自分配] 初始化];
        }
    }
    返回sharedInst；
}

- (id)初始化
{
    如果（sharedInst！= nil）{
        [NSException 引发：NSInternalInconsistencyException
            格式：@"[%@ %@] 不能被调用；使用 +[%@ %@] 代替"],
            NSStringFromClass([self class]), NSStringFromSelector(_cmd),
            NSStringFromClass([self class]),
            NSStringFromSelector(@selector(sharedInstance)"];
    } else if ( self = [super init] ) {
        sharedInst = 自我；
        /* 这里具体的类 */
    }
    返回sharedInst；
}

/* 这些可能在
   GC 应用程序。保持单身
   作为一个实际的单身人士
   非CG应用
*/
- (NSUInteger)retainCount
{
    返回 NSUIntegerMax；
}

- (oneway void)release
{
}

- (id)保留
{
    返回sharedInst；
}

- (id)自动释放
{
    返回sharedInst；
}

```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2011-06-07T20:14:59.147

**编辑：此实现已被 ARC 淘汰。请看一下[如何实现与 ARC 兼容的 Objective-C 单例？](https://stackoverflow.com/questions/7568935/how-do-i-implement-an-objective-c-singleton-that-is-compatible-with-arc)为正确实施。**

我在其他答案中读到的所有初始化实现都有一个常见错误。

```
+ (void) initialize {
  _instance = [[MySingletonClass alloc] init] // <----- Wrong!
}

+ (void) initialize {
  if (self == [MySingletonClass class]){ // <----- Correct!
      _instance = [[MySingletonClass alloc] init] 
  }
} 
```

Apple 文档建议您检查初始化块中的类类型。因为子类默认调用初始化。存在一种不明显的情况，即可以通过 KVO 间接创建子类。如果您在另一个类中添加以下行：

```
[[MySingletonClass getInstance] addObserver:self forKeyPath:@"foo" options:0 context:nil] 
```

Objective-C 将隐式创建 MySingletonClass 的子类，从而导致`+initialize`.

您可能认为您应该隐式检查 init 块中的重复初始化，如下所示：

```
- (id) init { <----- Wrong!
   if (_instance != nil) {
      // Some hack
   }
   else {
      // Do stuff
   }
  return self;
} 
```

但你会在脚下开枪；或者更糟的是让另一个开发人员有机会在脚下开枪。

```
- (id) init { <----- Correct!
   NSAssert(_instance == nil, @"Duplication initialization of singleton");
   self = [super init];
   if (self){
      // Do stuff
   }
   return self;
} 
```

**TL；DR，这是我的实现**

```
@implementation MySingletonClass
static MySingletonClass * _instance;
+ (void) initialize {
   if (self == [MySingletonClass class]){
      _instance = [[MySingletonClass alloc] init];
   }
}

- (id) init {
   ZAssert (_instance == nil, @"Duplication initialization of singleton");
   self = [super init];
   if (self) {
      // Initialization
   }
   return self;
}

+ (id) getInstance {
   return _instance;
}
@end 
```

（用我们自己的断言宏替换 ZAssert；或者只是 NSAssert。）

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-06-23T12:01:58.167

Singleton 宏代码的详尽解释在博客 Cocoa With Love

[http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2010-02-19T06:15:13.057

我对 sharedInstance 有一个有趣的变体，它是线程安全的，但在初始化后不会锁定。我还不确定是否可以按要求修改最佳答案，但我将其呈现以供进一步讨论：

```
// Volatile to make sure we are not foiled by CPU caches
static volatile ALBackendRequestManager *sharedInstance;

// There's no need to call this directly, as method swizzling in sharedInstance
// means this will get called after the singleton is initialized.
+ (MySingleton *)simpleSharedInstance
{
    return (MySingleton *)sharedInstance;
}

+ (MySingleton*)sharedInstance
{
    @synchronized(self)
    {
        if (sharedInstance == nil)
        {
            sharedInstance = [[MySingleton alloc] init];
            // Replace expensive thread-safe method 
            // with the simpler one that just returns the allocated instance.
            SEL origSel = @selector(sharedInstance);
            SEL newSel = @selector(simpleSharedInstance);
            Method origMethod = class_getClassMethod(self, origSel);
            Method newMethod = class_getClassMethod(self, newSel);
            method_exchangeImplementations(origMethod, newMethod);
        }
    }
    return (MySingleton *)sharedInstance;
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-02-08T03:12:32.100

简短的回答：太棒了。

长答案：像......

```
static SomeSingleton *instance = NULL;

@implementation SomeSingleton

+ (id) instance {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        if (instance == NULL){
            instance = [[super allocWithZone:NULL] init];
        }
    });
    return instance;
}

+ (id) allocWithZone:(NSZone *)paramZone {
    return [[self instance] retain];
}

- (id) copyWithZone:(NSZone *)paramZone {
    return self;
}

- (id) autorelease {
    return self;
}

- (NSUInteger) retainCount {
    return NSUIntegerMax;
}

- (id) retain {
    return self;
}

@end 
```

请务必阅读[dispatch/once.h 标头](http://opensource.apple.com/source/libdispatch/libdispatch-84.5/src/once.h)以了解发生了什么。在这种情况下，标题注释比文档或手册页更适用。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2010-11-30T10:00:44.253

我已经将单例滚动到一个类中，因此其他类可以继承单例属性。

单例.h：

```
static id sharedInstance = nil;

#define DEFINE_SHARED_INSTANCE + (id) sharedInstance {  return [self sharedInstance:&sharedInstance]; } \
                               + (id) allocWithZone:(NSZone *)zone { return [self allocWithZone:zone forInstance:&sharedInstance]; }

@interface Singleton : NSObject {

}

+ (id) sharedInstance;
+ (id) sharedInstance:(id*)inst;

+ (id) allocWithZone:(NSZone *)zone forInstance:(id*)inst;

@end 
```

单例.m：

```
#import "Singleton.h"

@implementation Singleton

+ (id) sharedInstance { 
    return [self sharedInstance:&sharedInstance];
}

+ (id) sharedInstance:(id*)inst {
    @synchronized(self)
    {
        if (*inst == nil)
            *inst = [[self alloc] init];
    }
    return *inst;
}

+ (id) allocWithZone:(NSZone *)zone forInstance:(id*)inst {
    @synchronized(self) {
        if (*inst == nil) {
            *inst = [super allocWithZone:zone];
            return *inst;  // assignment and return on first allocation
        }
    }
    return nil; // on subsequent allocation attempts return nil
}

- (id)copyWithZone:(NSZone *)zone {
    return self;
}

- (id)retain {
    return self;
}

- (unsigned)retainCount {
    return UINT_MAX;  // denotes an object that cannot be released
}

- (void)release {
    //do nothing
}

- (id)autorelease {
    return self;
}

@end 
```

这是某个类的示例，您想成为单身人士。

```
#import "Singleton.h"

@interface SomeClass : Singleton {

}

@end

@implementation SomeClass 

DEFINE_SHARED_INSTANCE;

@end 
```

Singleton 类的唯一限制是它是 NSObject 子类。但大多数时候我在我的代码中使用单例，它们实际上是 NSObject 的子类，所以这个类真的让我的生活变得轻松，让代码更干净。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-28T04:58:01.340

这也适用于非垃圾收集环境。

```
@interface MySingleton : NSObject {
}

+(MySingleton *)sharedManager;

@end

@implementation MySingleton

static MySingleton *sharedMySingleton = nil;

+(MySingleton*)sharedManager {
    @synchronized(self) {
        if (sharedMySingleton == nil) {
            [[self alloc] init]; // assignment not done here
        }
    }
    return sharedMySingleton;
}

+(id)allocWithZone:(NSZone *)zone {
    @synchronized(self) {
        if (sharedMySingleton == nil) {
            sharedMySingleton = [super allocWithZone:zone];
            return sharedMySingleton;  // assignment and return on first allocation
        }
    }
    return nil; //on subsequent allocation attempts return nil
}

-(void)dealloc {
    [super dealloc];
}

-(id)copyWithZone:(NSZone *)zone {
    return self;
}

-(id)retain {
    return self;
}

-(unsigned)retainCount {
    return UINT_MAX;  //denotes an object that cannot be release
}

-(void)release {
    //do nothing    
}

-(id)autorelease {
    return self;    
}

-(id)init {
    self = [super init];
    sharedMySingleton = self;

    //initialize here

    return self;
}

@end 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-03-02T06:26:11.253

[这是我放在一起的一个宏](http://github.com/cjhanson/Objective-C-Optimized-Singleton)：

[http://github.com/cjhanson/Objective-C-Optimized-Singleton](http://github.com/cjhanson/Objective-C-Optimized-Singleton)

它基于[Matt Gallagher 的工作，](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html) 但将实现更改为使用[方法 swizzling，如 Google 的 Dave MacLachlan 所述](http://googlemac.blogspot.com/2006/11/synchronized-swimming-part-2.html)。

我欢迎评论/贡献。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2010-03-17T11:13:55.320

这不应该是线程安全的并避免第一次调用后昂贵的锁定吗？

```
+ (MySingleton*)sharedInstance
{
    if (sharedInstance == nil) {
        @synchronized(self) {
            if (sharedInstance == nil) {
                sharedInstance = [[MySingleton alloc] init];
            }
        }
    }
    return (MySingleton *)sharedInstance;
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-05-21T22:39:30.867

有关 Objective-C 中单例模式的深入讨论，请看这里：

[在 Objective-C 中使用单例模式](http://www.duckrowing.com/2010/05/21/using-the-singleton-pattern-in-objective-c)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2011-12-29T18:32:32.070

怎么样

```
static MyClass *gInstance = NULL;

+ (MyClass *)instance
{
    if (gInstance == NULL) {
        @synchronized(self)
        {
            if (gInstance == NULL)
                gInstance = [[self alloc] init];
        }
    }

    return(gInstance);
} 
```

所以你避免初始化后的同步成本？

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-05-03T21:50:27.190

> KLSingleton 是：
> 
> 1.  可子分类（到第 n 级）
> 2.  ARC兼容
> 3.  安全`alloc`与`init`
> 4.  懒加载
> 5.  线程安全
> 6.  无锁（使用 +initialize，而不是 @synchronize）
> 7.  无微距
> 8.  无调酒
> 9.  简单的

[KLS单顿](https://github.com/kevinlawler/KLSingleton)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2010-01-13T22:01:52.067

你不想在 self 上同步......因为 self 对象还不存在！您最终锁定了一个临时 id 值。您要确保没有其他人可以运行类方法（ sharedInstance、alloc、allocWithZone: 等），因此您需要在类对象上进行同步：

```
@implementation MYSingleton

static MYSingleton * sharedInstance = nil;

+( id )sharedInstance {
    @synchronized( [ MYSingleton class ] ) {
        if( sharedInstance == nil )
            sharedInstance = [ [ MYSingleton alloc ] init ];
    }

    return sharedInstance;
}

+( id )allocWithZone:( NSZone * )zone {
    @synchronized( [ MYSingleton class ] ) {
        if( sharedInstance == nil )
            sharedInstance = [ super allocWithZone:zone ];
    }

    return sharedInstance;
}

-( id )init {
    @synchronized( [ MYSingleton class ] ) {
        self = [ super init ];
        if( self != nil ) {
            // Insert initialization code here
        }

        return self;
    }
}

@end 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2010-06-18T10:22:44.947

```
static mySingleton *obj=nil;

@implementation mySingleton

-(id) init {
    if(obj != nil){     
        [self release];
        return obj;
    } else if(self = [super init]) {
        obj = self;
    }   
    return obj;
}

+(mySingleton*) getSharedInstance {
    @synchronized(self){
        if(obj == nil) {
            obj = [[mySingleton alloc] init];
        }
    }
    return obj;
}

- (id)retain {
    return self;
}

- (id)copy {
    return self;
}

- (unsigned)retainCount {
    return UINT_MAX;  // denotes an object that cannot be released
}

- (void)release {
    if(obj != self){
        [super release];
    }
    //do nothing
}

- (id)autorelease {
    return self;
}

-(void) dealloc {
    [super dealloc];
}
@end 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-01-16T23:29:34.710

只是想把它留在这里，这样我就不会丢失它。这个的优点是它可以在 InterfaceBuilder 中使用，这是一个巨大的优势。[这取自我问的另一个问题](https://stackoverflow.com/questions/4609609/use-singleton-in-interface-builder)：

```
static Server *instance;

+ (Server *)instance { return instance; }

+ (id)hiddenAlloc
{
    return [super alloc];
}

+ (id)alloc
{
    return [[self instance] retain];
}

+ (void)initialize
{
    static BOOL initialized = NO;
    if(!initialized)
    {
        initialized = YES;
        instance = [[Server hiddenAlloc] init];
    }
}

- (id) init
{
    if (instance)
        return self;
    self = [super init];
    if (self != nil) {
        // whatever
    }
    return self;
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2011-11-22T20:00:41.577

我知道对这个“问题”有很多评论，但我没有看到很多人建议使用宏来定义单例。这是一种常见的模式，宏大大简化了单例。

以下是我根据我见过的几个 Objc 实现编写的宏。

`Singeton.h`

```
/**
 @abstract  Helps define the interface of a singleton.
 @param  TYPE  The type of this singleton.
 @param  NAME  The name of the singleton accessor.  Must match the name used in the implementation.
 @discussion
 Typcially the NAME is something like 'sharedThing' where 'Thing' is the prefix-removed type name of the class.
 */
#define SingletonInterface(TYPE, NAME) \
+ (TYPE *)NAME;

/**
 @abstract  Helps define the implementation of a singleton.
 @param  TYPE  The type of this singleton.
 @param  NAME  The name of the singleton accessor.  Must match the name used in the interface.
 @discussion
 Typcially the NAME is something like 'sharedThing' where 'Thing' is the prefix-removed type name of the class.
 */
#define SingletonImplementation(TYPE, NAME) \
static TYPE *__ ## NAME; \
\
\
+ (void)initialize \
{ \
    static BOOL initialized = NO; \
    if(!initialized) \
    { \
        initialized = YES; \
        __ ## NAME = [[TYPE alloc] init]; \
    } \
} \
\
\
+ (TYPE *)NAME \
{ \
    return __ ## NAME; \
} 
```

使用示例：

`MyManager.h`

```
@interface MyManager

SingletonInterface(MyManager, sharedManager);

// ...

@end 
```

`MyManager.m`

```
@implementation MyManager

- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here.
    }

    return self;
}

SingletonImplementation(MyManager, sharedManager);

// ...

@end 
```

为什么接口宏几乎是空的？头文件和代码文件之间的代码一致性；可维护性，以防您想添加更多自动方法或更改它。

我正在使用初始化方法来创建单例，就像这里最流行的答案中使用的那样（在撰写本文时）。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2012-02-10T22:35:08.610

使用 Objective C 类方法，我们可以避免以通常的方式使用单例模式，从：

```
[[Librarian sharedInstance] openLibrary] 
```

到：

```
[Librarian openLibrary] 
```

通过将类包装在另一个只有**Class Methods**的类中，这样就不会意外创建重复的实例，因为我们没有创建任何实例！

[我在这里](http://whackylabs.com/blog/?p=444)写了一个更详细的博客:)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2012-03-22T16:52:31.127

从@robbie-hanson 扩展示例...

```
static MySingleton* sharedSingleton = nil;

+ (void)initialize {
    static BOOL initialized = NO;
    if (!initialized) {
        initialized = YES;
        sharedSingleton = [[self alloc] init];
    }
}

- (id)init {
    self = [super init];
    if (self) {
        // Member initialization here.
    }
    return self;
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2012-12-23T22:01:09.113

我的方法很简单：

```
static id instanceOfXXX = nil;

+ (id) sharedXXX
{
    static volatile BOOL initialized = NO;

    if (!initialized)
    {
        @synchronized([XXX class])
        {
            if (!initialized)
            {
                instanceOfXXX = [[XXX alloc] init];
                initialized = YES;
            }
        }
    }

    return instanceOfXXX;
} 
```

如果单例已经初始化，则不会进入 LOCK 块。第二个检查 if(!initialized) 是确保当前线程获取 LOCK 时它尚未初始化。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-02-19T03:01:07.933

我还没有通读所有的解决方案，所以如果这段代码是多余的，请原谅。

在我看来，这是最线程安全的实现。

```
+(SingletonObject *) sharedManager
{
    static SingletonObject * sharedResourcesObj = nil;

    @synchronized(self)
    {
        if (!sharedResourcesObj)
        {
            sharedResourcesObj = [[SingletonObject alloc] init];
        }
    }

    return sharedResourcesObj;
} 
```

* * *

## 回答 #25

> 赞同：-4
> 
> 时间：2009-06-24T04:53:41.767

我通常使用与 Ben Hoffstein 的回答中的代码大致相似的代码（我也从 Wikipedia 中获得）。我使用它是出于 Chris Hanson 在评论中所述的原因。

但是，有时我需要将单例放入 NIB，在这种情况下，我使用以下内容：

```
@implementation Singleton

static Singleton *singleton = nil;

- (id)init {
    static BOOL initialized = NO;
    if (!initialized) {
        self = [super init];
        singleton = self;
        initialized = YES;
    }
    return self;
}

+ (id)allocWithZone:(NSZone*)zone {
    @synchronized (self) {
        if (!singleton)
            singleton = [super allocWithZone:zone];     
    }
    return singleton;
}

+ (Singleton*)sharedSingleton {
    if (!singleton)
        [[Singleton alloc] init];
    return singleton;
}

@end 
```

我将`-retain`（等）的实现留给读者，尽管上面的代码是你在垃圾收集环境中所需要的。

* * *

## 回答 #26

> 赞同：-5
> 
> 时间：2011-01-23T23:23:44.130

接受的答案虽然可以编译，但不正确。

```
+ (MySingleton*)sharedInstance
{
    @synchronized(self)  <-------- self does not exist at class scope
    {
        if (sharedInstance == nil)
            sharedInstance = [[MySingleton alloc] init];
    }
    return sharedInstance;
} 
```

根据 Apple 文档：

...您可以采取类似的方法来同步关联类的类方法，使用Class对象而不是self。

即使使用自我工作，也不应该，这对我来说似乎是一个复制和粘贴错误。类工厂方法的正确实现是：

```
+ (MySingleton*)getInstance
{
    @synchronized([MySingleton class]) 
    {
        if (sharedInstance == nil)
            sharedInstance = [[MySingleton alloc] init];
    }
    return sharedInstance;
} 
```

# python - 类似于 Python GUI 中资源管理器的图标网格视图

> ID：145155
> 
> 赞同：1
> 
> 时间：2008-09-28T03:39:35.473
> 
> 标签：python, user-interface

我正在制作一个需要复制 Windows gui 环境（即资源管理器）外观的 Python gui 项目。我有自己的自定义图标要绘制，但它们应该可以通过与往常相同的方法进行选择；单击，ctrl-click，拖动框等。是否有任何 gui 工具包可以帮助解决这个问题，或者我必须自己实现它。如果没有任何工具可以帮助您获得此建议，我们将不胜感激。

*编辑*我不想重新创建资源管理器，那太疯狂了。我只是希望能够获取图标并将它们布置在可滚动的窗口中。可以一次选择其中的任意数量。如果有一些东西可以以与 Windows 相同（至少出现）的方式选择/取消选择它们，那就太好了。然后我需要的只是所有选定图标的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T03:45:09.203

Python 有用于访问 Win32 API 的扩展，但祝你好运尝试自己重写资源管理*器*。最好的办法是使用[Qt](http://doc.trolltech.com/4.4/gallery-windowsxp.html)之类的工具包，但您仍然必须从头开始编写绝大多数应用程序。

有什么方法可以在项目中重用资源管理器本身？

* * *

更新了已编辑的问题：

[GTK+](http://www.gtk.org/)有一个您可以使用的[图标网格小部件。](http://library.gnome.org/devel/gtk/unstable/GtkIconView.html)请参阅[PyGTK+](http://www.pygtk.org/)的参考：[`gtk.IconView`](http://www.pygtk.org/docs/pygtk/class-gtkiconview.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T03:56:32.563

在 wxPython 中有大量现成的列表和树控件（CustomTreeCtrl、TreeListCtrl 等），您可以使用它们的混合物在几分钟内创建一个简单的资源管理器。wxPython 演示甚至有一些相关示例（参见 MVCTree 的演示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T03:44:07.337

我假设您是认真的，并建议您查看许多可用于 Python的精彩[GUI 库。](http://wiki.python.org/moin/GuiProgramming)

# gcc - Nintendo DS 与 Ada 的自制软件？

> ID：145157
> 
> 赞同：5
> 
> 时间：2008-09-28T03:41:01.307
> 
> 标签：gcc, embedded, ada, nintendo-ds, homebrew

注意：我对 GCC 工具链知之甚少，所以这个问题可能没有多大意义。

由于 GCC 包含一个 Ada 前端，并且它可以发出 ARM，而 devKitPro 是基于 GCC 的，是否可以使用 Ada 而不是 C/C++ 在 DS 上编写代码？

编辑：似乎 devKitARM 使用的目标是 arm-eabi。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-11-05T22:15:44.263

devkitPro 不是工具链、编译器或任何软件包。用于针对 DS 的工具链是 devkitARM，它是 devkitPro 提供的工具链之一。

可能可以构建 ada 编译器，但我非常怀疑您是否能够设法在 DS 本身上运行任何有用的东西。devkitPro 肯定不会在我们生产的软件包中提供 ada 编译器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-03-08T21:28:00.310

是的，有可能，请参阅我的项目[https://github.com/Lucretia/tamp](https://github.com/Lucretia/tamp)并根据我的脚本构建交叉编译器。然后您就可以使用 Ada 来定位 NDS。我还构建了一个基本的 RTS，它将为您提供本地异常处理。

还有@Martin Beckett，为什么认为 Ada 直接针对 DoD 的东西？几年前他们放弃了授权，Ada 很容易用于任何项目，您确实意识到 Ada 是一种***通用编程语言***，不是吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-05T10:58:57.553

One thing to consider when porting a language to the nintendo DS is the relatively small stack it has (16KB). There are possible workarounds such as swapping the SRAM stack content into DRAM (4MB) when stack gets full or just have the whole stack in DRAM (assumed to be auwfully slow).

And I second Dre on the fact that you'll have to provide yourself glue between the Ada library function you'd like to use and existing libraries on the DS (which are hopefully covering most of the hardware stuff).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-28T03:46:42.213

（免责声明：我不认识艾达）

可能。

您*可能*能够构建 devKitPro 以使用 Ada，但是，预先提供的二进制文件（至少对于 OS X）没有编译 Ada 支持。

但是，您可能会发现自己编写了大量的 C“胶水”代码来与各种硬件寄存器等接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-06-02T07:27:14.227

在实际平面上，这是不可能的。

在理论上，您可以使用一个自定义的 Ada 解析器（我在[ANTLR站点上找到](http://www.antlr.org)[了这个](http://www.antlr.org/grammar/ada)，但它很旧）将 Ada 翻译成 C/C++，然后将其提供给 devkitpro。

但是，构建这种翻译器的工作量可能与创建游戏本身相同（如果不是更高的话）。

# ruby-on-rails - 使用 Restful 身份验证的无意会话劫持问题

> ID：145169
> 
> 赞同：10
> 
> 时间：2008-09-28T03:50:53.573
> 
> 标签：ruby-on-rails, ruby, rest, restful-authentication

我正在使用在 github 上找到的当前版本的 restful_authentication 并且我遇到了一堆奇怪的会话问题。服务器似乎以某种方式将会话分配给不应该的用户。这只发生在越过注销/登录障碍时。

这是一个例子。在服务器上没有活动会话的情况下，我使用用户 A 登录了一个帐户。在另一台机器上，我使用用户 B 登录。然后当注销用户 B 时，在注销重定向发生后的某个时间，我将登录为用户 A. 从这一点开始，我可以继续浏览该站点，就好像我以该用户身份登录一样！我通过日志观察到的是，当这种劫持发生时，会话 ID 是不一样的。用户 A 在两个会话中都登录了，但会话 ID 完全不同。这只是可能发生的事情的一个例子。我无法可靠地重现该问题，因为它看似随机。

它似乎不是环境或运行它的服务器的症状。我可以使用杂种和乘客重现问题。我也在开发和生产中看到了它。我在这个应用程序中使用基于 db 的会话，它在 Rails 2.1.1 上运行。我在调用生成器时应用了有状态选项。否则，没有对如何处理会话进行其他修改。

更新这里是直接来自 restful_authentication 的违规方法。

```
# Accesses the current user from the session.
# Future calls avoid the database because nil is not equal to false.
def current_user
  @current_user ||= (login_from_session || login_from_basic_auth || login_from_cookie) unless @current_user == false
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T23:54:09.143

如果您（或编写 restful_authentication 的人）将当前用户缓存在类变量中，则可能会发生这种情况。我看过一堆提倡使用“ `User.current_user`”的文章，但是由于类是跨请求缓存的，这可能会导致会话污染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-09T03:21:32.100

我不知道这是否是一个答案，因为它是一种解决方法。我所做的只是切换到基于 cookie 的会话，一切运行顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-29T04:59:23.323

这个网站是远程的吗？您是否将其登录到同一网络上的两台不同的计算机上？

# emacs - 如何在 Emacs 中调用交互式 elisp 解释器？

> ID：145175
> 
> 赞同：39
> 
> 时间：2008-09-28T03:59:52.290
> 
> 标签：emacs, elisp, interpreter

现在我在`*scratch*`缓冲区中编写表达式并通过评估来测试它们`C-x` `C-e`。我非常感谢有一个像 SLIME 或 irb 这样的交互式解释器，我可以在其中测试 Emacs Lisp 表达式。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-09-28T16:59:20.793

在 Inferior Emacs-Lisp 模式下计算 Lisp 表达式很容易：

```
M-x ielm 
```

[您可以在Emacs 手册的“Lisp 交互”部分](http://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Lisp-Interaction)中阅读有关此功能的更多信息

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2010-01-19T00:42:47.733

[Eshell](http://www.gnu.org/software/emacs/manual/html_mono/eshell.html#Top)是交互式 Elisp 解释器的另一种选择。

```
M-x eshell 
```

它不仅是一个类似 bash（或 cmd.exe，如果在 Windows 上）的命令 shell，而且您还可以交互地编写和执行 Elisp 代码。

```
~ $ ls
foo.txt
bar.txt
~ $ (+ 1 1)
2 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-28T04:30:27.317

你最好的选择是`*scratch*`缓冲区。您可以通过首先打开调试器使其更像 REPL：

```
M-x set-variable debug-on-error t 
```

然后使用`C-j`instead of `C-x C-e`，它将计算表达式的结果插入到表达式后面的行的缓冲区中。`* * *`您只需在`*scratch*`缓冲区中移动并进行编辑，而不是命令历史记录等。

如果你想让事情像`* * *`通常的 REPL 一样正常工作，请尝试`ielm`.

```
M-x ielm 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-04T08:55:19.393

要只运行一个 elisp 表达式，您可以使用 M-: 快捷方式并在 mini-buffer 中输入表达式。对于其他情况，您可以使用*暂存*缓冲区

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T04:20:16.530

在`*scratch*`缓冲区中，只需键入 Cj 即可计算点之前的表达式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T04:26:09.137

好吧，如果您真的对 emacs 的文字 REPL 感兴趣，可以使用 emacs 的 -batch 模式编写一个：

```
(require 'cl)

(defun read-expression ()
  (condition-case
      err
      (read-string "> ")
    (error
     (message "Error reading '%s'" form)
     (message (format "%s" err)))))

(defun read-expression-from-string (str)
  (condition-case
      err
      (read-from-string str)
    (error
     (message "Error parsing '%s'" str)
     (message (format "%s" err))
     nil)))

(defun repl ()
  (loop for expr = (read-string "> ") then (read-expression)
        do
        (let ((form (car (read-expression-from-string expr))))
          (condition-case
              err
              (message " => %s" (eval form))
            (error
             (message "Error evaluating '%s'" form)
             (message (format "%s" err)))))))

(repl) 
```

您可以从命令行调用它，或者，如您所愿，从运行 shell 的 emacs 缓冲区中调用它：

```
kburton@hypothesis:~/projects/elisp$ emacs -batch -l test.el
Loading 00debian-vars...
> (defvar x '(lambda (y) (* y 100)))
 => x
> (funcall x 0.25)
 => 25.0
> 
kburton@hypothesis:~/projects/elisp$ 
```

# html - HTML被认为是一种编程语言吗？

> ID：145176
> 
> 赞同：203
> 
> 时间：2008-09-28T04:00:02.663
> 
> 标签：html

我想这个问题是不言自明的，但我想知道 HTML 是否有资格作为一种编程语言（显然“L”代表语言）。

问的原因更务实——我正在整理一份简历，不想看起来像个傻瓜，在语言下列出 HTML 和 XML 之类的东西，但不知道如何对它们进行分类。

* * *

## 回答 #1

> 赞同：496
> 
> 时间：2008-09-28T04:01:43.720

不，HTML 不是一种编程语言。“M”代表“标记”。通常，编程语言允许您描述某种做某事的过程，而 HTML 是一种向文本添加上下文和结构的方式。

如果您想在简历中添加更多字母汤，请不要对它们进行分类。只需将它们放在称为“技术”或您喜欢的任何东西的大堆中。但是请记住，您列出的任何问题都是公平的问题。

HTML 是如此普遍，以至于我希望几乎所有技术人员都已经知道它（尽管不是 CSS 之类的东西），因此您可能会考虑不要列出您遇到的所有首字母缩写词。我倾向于认为简历列出太多东西是可疑的，所以我会提出更多问题来清除不应该列出的东西。:)

但是，如果您的 HTML 体验包括严肃的网页设计内容，包括 Ajax、JavaScript 等，您可能会在“体验”部分讨论这些内容。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2008-09-28T04:01:14.423

是的，一种声明式编程语言。

你真的想在简历上列出你所知道的与你申请的工作相关的最重要的事情。如果您列出了 ASP.NET 但没有列出 HTML，即使它有些明显，也有很多经理和/或 HR 类型会假设您不知道 HTML，因为它没有列出。我以前也遇到过。

更新 - 有人说不，它不是一种编程语言，你可能不同意我的观点，但不管在简历上，它是一种编程语言。在招聘经理看到简历之前，您的 HR 类型就会查看您的简历。如果经理说你需要了解 HTML，但它没有列在“编程语言”部分，那么 HR 人员可能会忽略你，因为它没有列出，所以继续认为你不知道它。

2012 年 6 月 8 日更新：任何告诉计算机做某事的指令都是一种编程语言。所以即使过了这么多年，我仍然坚持我的答案。HTML 是一种编程语言。不是编程语言的东西就是 XML。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2008-09-28T04:01:37.870

不，线索在 M - 它是一种[标记语言](http://en.wikipedia.org/wiki/Markup_language)。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2008-09-28T04:16:02.033

在某种程度上，Chris Pietschmann 是正确的。SQL 不是[图灵完备](http://en.wikipedia.org/wiki/Turing_completeness)的（至少没有存储过程），但人们会将其列为一种语言，[TeX](http://www.tug.org/)是图灵完备的，但大多数人认为它是一种标记语言。

话虽如此：如果您只是申请工作，而不是争论形式逻辑，我会将它们都列为技术。.NET 之类的东西不是语言，但也可能会被列出。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2008-09-28T04:04:28.143

“M”代表“标记”。它是“标记语言”而不是编程语言。有些人会不同意这一点，但我的观点是，如果它缺乏逻辑结构（条件分支、迭代等），它就不是真正的编程语言。

至于简历，我建议将 HTML 和 XML 放在“技术”之类的部分下。我通常有一个这样的部分，其中列出了版本控制软件、我开发的操作系统、构建系统等内容。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2010-11-12T16:40:58.437

不，HTML 不是一种编程语言。出于这个原因，它被称为“标记”。

如果您要说 HTML 是一种编程语言，那么您不妨包括诸如 word 文档之类的东西，因为它们也是基于 ML 或“标记语言”的。

简单地说——HTML 定义了内容！

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2008-09-28T04:02:45.357

我认为不完全是一种编程语言，而是它的名字所说的：一种标记语言。我们不能只使用纯 HTML 进行编程。但只是注释如何呈现内容。

但是如果你考虑编程告诉计算机如何呈现内容的行为，它就是一种编程语言。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2010-03-26T19:38:55.833

在我上大学的高级编程语言课上，我们对“编程语言”有一个我认为非常好的定义：编程语言是能够表达所有可计算函数的任何（正式）语言，[Church-Turing 论文](http://en.wikipedia.org/wiki/Church-Turing_thesis)暗示了这一点是所有图灵可计算函数的集合。

根据这个定义，不，HTML 不是一种编程语言，甚至不是一种声明性语言。正如其他人所解释的，它是一种标记语言。

但是审阅你简历的人很可能并不关心这种形式上的区别。我会遵循其他人给出的好建议，并将其列在“技术”类型的部分下。

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2008-09-28T04:11:11.437

我认为它肯定在简历中占有一席之地。HTML 的知识很有价值，而且确实有很多东西要知道，什么是跨浏览器兼容性问题和应该遵循的标准。

我不会在“编程语言”下与 C# 或其他内容一起列出 HTML，但值得注意的是您的经验。

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2008-10-09T07:56:27.817

不——IT 界对网页设计有很大的偏见；但在这种情况下，“真正的”程序员是非常稳固的。

如果你做过很多网页设计工作，你可能已经做过一些 JavaScript，所以你可以把它放在“编程语言”下；如果您也想列出 HTML，那么我同意建议“技术”的答案。

但是，除非您的目标是那些试图打勾而不是为您找到一份好工作的代理商，否则您使用过的东西的简单清单看起来并不那么好。您最好列出您从事的项目并详细说明您在每个项目上使用的技术；这表明您拥有使用它们的真实经验，而不仅仅是您知道一些流行语。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2009-04-01T08:40:50.363

我通过在我的简历中没有“编程语言”部分来解决这个问题。相反，我将其简单地标记为“语言”，并在最后添加 HTML 和 CSS。我宁愿让审阅者的生活更轻松，这样他们就可以看到我的检查是否符合他们的所有要求。

只有傻瓜才会忽视申请人，因为他或她将 HTML 列在“语言”而不是其他标签下，特别是因为没有行业标准。谁愿意为傻瓜工作？

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-09-28T08:54:12.050

嗯，L 是语言，但它并不意味着编程语言。毕竟，英语或法语也是（自然）语言！;-)

如上所述，将它们放在子部分下，技术似乎是一个好词。

（看我自己的简历，有一段时间没更新了）我做了一个叫做“语言”的部分，所以我不会弄错...... :-D
我已经放了“（X）HTML和CSS，XML / DTD/Schema 和 SVG”在该部分的末尾，明确分开。

在法语中，我有一个“语言”部分（编程和标记）和另一个“语言”（法语/英语）。在英文版中，我将两者都命名为“Languages”，现在我想起来这很笨拙，尽管上下文澄清了这一点。我应该找到一个更好的配方。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2008-09-30T01:11:22.553

HTML 绝不是一种编程语言。

编程语言处理“处理函数”等。HTML 只处理网页的可视界面，实际编程处理处理。以 PHP 为例。

如果有人真的懂编程，我真的看不出人们怎么会把 HTML 误认为是一种真正的编程语言。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2009-10-21T22:44:22.943

在招聘方面，一直在栅栏的两边，肯定把 HTML 放在“编程语言”下，或者也许更安全地放在“技术”下

是的，我们都知道它是一种标记语言而不是一种编程语言。但是 a) 招聘机构不知道也不关心，b) 雇主不知道也不关心。真的。

指出他们的无知只会对你不利。*最终*看到你简历的技术人员会感谢一个听说过 HTML 的候选人，并且不会担心分类。

老实说，这不是问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-28T04:02:10.957

把它列在技术或其他东西下。如果我是您，我会不考虑它，因为您现在应该知道 HTML 和 XML。

# sql-server - 将标签存储在 sql server 表中的最佳方法？

> ID：145185
> 
> 赞同：17
> 
> 时间：2008-09-28T04:03:05.603
> 
> 标签：sql-server, tags

为记录存储标签的最佳方式是什么？只使用 varchar 字段？选择包含标签 x 的行时怎么办？使用like 运算符？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-28T04:11:18.657

取决于两件事：
1）标签/标记记录的数量
2）您是否对规范化有宗教看法:-)

除非处理大量数据，否则我建议使用“标签”表将 varchar 值映射到整数标识符，然后将第二个表映射到标记记录到它们的标记 ID。我建议先实现它，然后检查它是否不满足您的性能需求。在这种情况下，为标记的行和标记的实际文本保留一个带有 id 的表，但在这种情况下，我建议您使用 char 列，因为如果优化器对您进行全表扫描，它将终止您的查询带有 varchar 列的大表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T18:05:46.420

使用具有最小允许主键的标签表。如果标签少于 255 个，则使用一个字节 (tinyint) 或一个字 (smallint)。键越小，主表中外键的索引越小越快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T04:13:12.350

不，将多条数据放在一个字段中通常是个坏主意。相反，使用单独的标签表（可能只有一个 TagID 和 TagName），然后为每条记录指明与其关联的 TagID。如果一条记录与多个标签相关联，您将拥有重复的记录，唯一的区别是 TagID。

这里的好处是您可以轻松地按标签、按记录查询，并单独维护标签表（即如果标签名称发生变化怎么办？）。

# algorithm - 从日语来源估计英语翻译单词数量的算法

> ID：145190
> 
> 赞同：4
> 
> 时间：2008-09-28T04:06:50.417
> 
> 标签：algorithm, internationalization, translation, text-processing

我试图想出一种方法来估计从日语翻译成的英语单词的数量。日语有三种主要的文字——[汉字](http://en.wikipedia.org/wiki/Kanji)、[平假名](http://en.wikipedia.org/wiki/Hiragana)和[片假名](http://en.wikipedia.org/wiki/Katakana)——每一种都有不同的平均字词比（汉字最低，片假名最高）。

**例子：**

*   电脑：コンピュータ（片假名 - 6 个字符）；计算机（汉字：3个字）
*   鲸鱼：くじら（平假名——3个字符）；鲸（汉字：1个字符）

作为数据，我有大量的日文词汇及其英文翻译，以及相当大的匹配日文源文档及其英文翻译的语料库。我想提出一个公式来计算源文本中的汉字、平假名和片假名字符的数量，并估计这可能变成的英语单词的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T05:02:00.160

以下是 Borland（现为 Embarcadero）对英语到非英语的看法：

[英文字符串的长度（以字符为单位）](http://www.podgoretsky.com/ftp/Docs/Delphi/D5/dg/intapps.html)

```
Expected increase
1-5      100%
6-12      80%
13-20     60%
21-30     40%
31-50     20%
over 50   10% 
```

我认为您可以将这个（稍加修改）应用于日语到非日语。

您可能要考虑的另一个因素是语言的语气。在英语中，指令被表述为命令式，如“Press OK”。但在日语中，祈使语气被认为是粗鲁的，你必须用敬语（或 keigo）来表达指令，如“OKボタンを押してください”。

注意三个字母的汉字组合。许多大词翻译成三四个字母的汉字组合，例如国际化（国际化：20个字符），高可用性（高可用性：17个字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T05:00:24.000

嗯，它比名词中的字符数与英语相比要复杂一些，例如，日语与英语相比也有不同的语法结构，所以在日语中某些句子会使用 MORE 词，而其他句子会使用 LESS 词. 我真的不懂日语，所以请原谅我以韩语为例。

在韩语中，句子通常比英语句子短，主要是因为它们通过使用上下文来填补缺失的单词而被缩短。例如，说“我爱你”可以短如사랑해（“sarang hae”，简称动词“love”），或者只要完全限定的句子저는 당신을 살앙해요（I [topic] you [object ] love [动词+礼貌修饰语]。在文本中如何写取决于上下文，这通常由段落中较早的句子设置。

无论如何，有一个算法来真正知道这种事情会非常困难，所以你可能会好得多，只使用统计数据。您应该做的是使用已知日文文本和英文文本具有相同含义的随机样本。样本越大（越随机）越好……虽然如果它们真的是随机的，那么你有多少超过几百不会有太大区别。

现在，另一件事是这个比例会完全改变正在翻译的文本类型。例如，高度技术性的文档很可能比一部烂小说具有更高的日文/英文长度比率。

至于简单地使用您的词对词翻译词典 - 这可能效果不佳（并且可能是错误的）。同一个词不会每次都用不同的语言翻译成同一个词（尽管在技术讨论中更有可能发生）。例如，美丽这个词。在韩语中我不仅可以指定一个以上的词（即有一个选择），而且有时我会失去那个选择，就像在句子（那个食物很美）中，我不是说食物看起来好的。我的意思是它的味道很好，而且我对这个词的翻译选项发生了变化。这是一个非常普遍的情况。

另一个大问题是最佳翻译。人类非常不擅长的事情，而计算机更不擅长的事情。每当我校对从其他文本翻译成英文的文档时，我总能看到各种方法将其缩短得多。

因此，尽管使用统计数据，您将能够计算出翻译之间的相当好的平均长度比率，但这与所有翻译都是最优的情况大不相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T18:26:47.027

我将从线性近似开始：`approx_english_words = a1*no_characters_in_script1 + a2 * no_chars_in_script2 + a3 * no_chars_in_script3`，系数 a1、a2、a3 使用线性最小二乘法从您的数据中拟合。

如果这不能很好地近似，那么看看最坏的情况，因为它们不适合（专业词等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-13T17:42:37.687

根据我作为翻译和本地化专家的经验，一个好的经验法则是每个英文单词 2 个日文字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-11T09:47:20.340

作为一名经验丰富的日英翻译，我可以说这很难量化，但根据我的经验，从日文翻译而来的英文文本通常几乎是源文本的 200%。在日语中，有许多文化特定的短语和名词无法直译，需要用英语解释。在翻译时，我通常会取一个日语句子并从中制作一个英语段落，以便将意思传达给读者。我这里的顶部是一个例子：

「懐かしい」</p>

这字面意思是怀旧。但是，在日语中，它可以用作感叹词中的单个短语。然而，在英语中，为了传达一种怀旧的感觉，我们需要更多的上下文。例如，您可能需要将单个短语变成一个句子：

“当我走过我的旧小学时，我被过去的记忆淹没了。”

这就是为什么日语和英语之间的机器翻译是不可能的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T04:38:18.140

看起来很简单——你只需要找出比率。

对于每个脚本，计算词汇表中脚本字符和英语单词的数量并计算出比率。

**假设**您可以检测日语单词在哪个脚本中以及翻译中的英语等效短语是什么，则可以使用日语源文档来增强这一点。否则，您将不得不猜测比率或将其作为源数据忽略，

然后，正如您所说，计算源文本的每个脚本中的单词数，进行乘法运算，您应该有一个粗略的估计。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-09T20:03:25.100

我（尽管很小）的经验似乎表明，无论是什么语言，文本块都需要相同数量的印刷空间来传达相同的信息。因此，对于较大的文本块，您可以为英文中的每个字符分配一个宽度计数（从 Times New Roman 等常见字体中获取），同样使用相同点大小的常见日文字体来计算需要的字符数。

# .net - 动态 .NET 语言性能？

> ID：145191
> 
> 赞同：8
> 
> 时间：2008-09-28T04:06:52.880
> 
> 标签：.net, performance, ironpython

我知道 IronPython 是 .NET 平台上的 Python 实现，就像 IronRuby 是 Ruby 的实现，而 F# 或多或少是 OCaml。

我似乎无法理解的是，这些语言在速度方面是否更接近于它们的“祖先”，或者更接近于 C# 之类的东西。例如，IronPython 是否以某种方式“编译”为 C# 使用的相同字节码，因此运行速度也一样快？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T04:10:34.323

IronPython 和 IronRuby 构建在 DLR（动态语言运行时）之上，并在运行时编译为 CIL（.NET 使用的字节码）。它们比 C# 慢，但比它们的非 .NET 对应物快。据我所知，那里没有任何像样的基准，但你会看到不同之处。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-28T05:57:10.807

IronPython 实际上是目前最快的 Python 实现。对于“最快”的某些定义，至少：例如，CLR 的启动开销与 CPython 相比是*巨大的。*此外，优化编译器 IronPython 仅在代码多次执行时才有意义。

IronRuby 具有与 IronPython 一样快的潜力，因为许多使 IronPython 快速的有趣特性已被提取到动态语言运行时中，IronPython 和 IronRuby（以及托管 JavaScript、动态 VB、IronScheme、VistaSmalltalk 等）都在动态语言运行时中被建造。

一般来说，语言实现的速度几乎与实际的语言特性无关，而更多地取决于投入其中的工程人工年数。IOW：动态与静态无关紧要，金钱才是。

例如，Common Lisp 是一种比 Ruby 或 Python 更具动态性的语言，但市面上有一些 Common Lisp 编译器甚至可以让 C 以它的价格运行。好的 Smalltalk 实现与 Java 一样快（这并不奇怪，因为主要的 JVM，Sun HotSpot 和 IBM J9，实际上只是稍微修改过的 Smalltalk VM）或 C++。在过去的 6 个月里，主要的 JavaScript 实现（Mozilla TraceMonkey、Apple SquirrelFish Extreme 和新推出的 Google V8）已经取得了10 倍甚至更多的*巨大*性能提升，使 JavaScript 与非优化 C.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T04:11:48.547

目前 IronRuby 在大多数方面都很慢。总体而言，它肯定比 MRI（Matz 的 Ruby 实现）慢，尽管在某些地方它们更快。

IronRuby 确实具有更快的潜力，尽管我怀疑它们在速度方面是否会接近 C#。在大多数情况下，这无关紧要。例如，数据库调用可能会占 Web 请求总持续时间的 90%。

我怀疑团队会首先追求语言的完整性而不是性能。这将允许您在 1.0 发布时运行 IronRuby 并运行大多数 ruby​​ 程序，然后它们可以在运行时提高性能。

我怀疑 IronPython 也有类似的故事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-19T09:51:51.543

通过假设现代 .NET 实现的性能将介于祖先和 C# 的性能之间，您的想法是正确的。原因是 C# 与 .NET 本身非常匹配。

F# 是显而易见的，因为 C# 和 OCaml 本身具有相似的性能特征。

IronPython 更难，因为 Python 和 C# 具有截然不同的性能特征。事实上，答案取决于 IronPython 实现本身，它将尽可能将低效的 Python 风格的评估转换为高效的 C# 风格的评估。预计 IronPython 通常会比 C# 慢很多，偶尔会在同一领域出现峰值。[你可以在这里](http://strangelights.com/blog/archive/2007/06/17/1588.aspx)看到这个效果。

干杯，乔恩·哈罗普。

# filesystems - 在 CentOS 5.2 上挂载 NTFS 文件系统

> ID：145209
> 
> 赞同：2
> 
> 时间：2008-09-28T04:23:12.733
> 
> 标签：filesystems, centos, ntfs

我想在 CentOS 5.2 中安装一些内部和外部 NTFS 驱动器，最好在启动时自动安装。不管它是读/写还是只读，但如果它是安全的，读/写将是首选。

编辑：感谢所有答案，我在下面总结了它们=）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-28T04:31:12.620

首先做一个

```
fdisk -l 
```

获取硬盘分区，即/dev/sda2

然后

```
mount /dev/sda2 /mnt/windows 
```

如果失败，请尝试

```
yum install ntfs-3g 
```

* 刚刚注意到默认情况下不包含此功能，因此您可以在此处查看[NTFS-3g](http://www.ntfs-3g.org/)，并为您的系统找到合适的包。

要自动挂载它，在 /etc/fstab 中添加一行说

```
/dev/sda2      /mnt/temp     ntfs    defaults 0 0 
```

这应该在重新启动时自动安装

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-28T05:03:58.390

回答我自己的问题：PostMan 和 mgb 将我引向了正确的道路，但他们的答案并不包含完整的解决方案。

注意：关于这个问题的简短手册/wiki 在这里：[http ://wiki.centos.org/TipsAndTricks/NTFSPartitions](http://wiki.centos.org/TipsAndTricks/NTFSPartitions)

所以，我正在使用带有最新更新的全新、裸机安装的 CentOS 5.2。首先，我运行`su`命令以避免任何权限问题。

我为几个外部 NTFS 驱动器创建了挂载点：

```
mkdir /mnt/iomega80
mkdir /mnt/iogear250 
```

我不得不使用 fdisk 命令，但它不在我的系统中。这是安装它的内容：

```
yum install util-linux 
```

然后我跑了`/sbin/fdisk -l`，找到了设备名称：

```
Disk /dev/sdc: 250.0 GB, 250059350016 bytes
255 heads, 63 sectors/track, 30401 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
**/dev/sdc1**   *           1       30401   244196001    7  HPFS/NTFS

Disk /dev/sdd: 82.3 GB, 82348278272 bytes
255 heads, 63 sectors/track, 10011 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
**/dev/sdd1**   *           1       10011    80413326    7  HPFS/NTFS 
```

对我来说，它们是`/dev/sdc1`和`/dev/sdd1`。

我必须安装 NTFS-3G，这是一个在 CentOS 上启用 NTFS 支持的软件包。要安装 NTFS-3G，我首先必须在 YUM 存储库列表中包含 RPMFORGE。

为了在 YUM 存储库列表中包含 RPMFORGE，我使用了以下说明：[http](http://rpmrepo.org/RPMforge/Using) ://rpmrepo.org/RPMforge/Using 。对于我的系统，我必须运行的两个命令是：

```
wget http://packages.sw.be/rpmforge-release/rpmforge-release-0.3.6-1.el5.rf.i386.rpm
rpm -Uhv rpmforge-release-0.3.6-1.el5.rf.i386.rpm 
```

最后，我使用这个 YUM 命令安装了 NTFS-3G：

```
yum install fuse fuse-ntfs-3g dkms dkms-fuse 
```

最后，我可以使用 mount 命令挂载文件系统：

```
mount -t ntfs-3g /dev/sdc1 /mnt/iogear250
mount -t ntfs-3g /dev/sdd1 /mnt/iomega80 
```

通过将这两行添加到`/etc/fstab`，就像以前的答案所建议的那样，我让驱动器在启动时挂载：

```
/dev/sdc1               /mnt/iogear250          ntfs-3g rw,umask=0000,defaults 0 0
/dev/sdd1               /mnt/iomega80           ntfs-3g rw,umask=0000,defaults 0 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T04:26:10.230

您应该已经有可用的 ntfs，读写支持现在非常可靠。
您可以使用“mount -t ntfs /dev/sdX1 /mnt/tmp”对其进行测试，您需要知道外部磁盘被识别为哪个驱动器（检查 dmesg）并且您需要创建一个安装点。

要每次在 /etc/fstab 中添加一行时自动挂载，请使用现有行之一作为示例 - 您必须是 root 才能执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-20T18:34:41.707

您忘记提及安装保险丝等后需要重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-05T20:25:22.430

首先启用存储库 Epel

```
yum install epel-release 
```

然后安装ntfs

```
yum install ntfs-3g 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-31T13:52:47.180

*   **启用 EPEL 存储库**

yum -y 安装 epel-release

*   **安装 ntfs-3g**

yum -y 安装 ntfs-3g

*   **更新蛴螬**

grub2-mkconfig -o /boot/grub2/grub.cfg

# patch - 小软件补丁如何纠正大软件？

> ID：145236
> 
> 赞同：9
> 
> 时间：2008-09-28T05:02:28.817
> 
> 标签：patch, software-distribution

我一直想知道的一件事是软件补丁是如何工作的。许多软件似乎只是在其二进制文件上发布了需要安装在旧版本之上的新版本，但一些软件（尤其是像 Windows 这样的操作系统）似乎能够发布非常小的补丁来纠正错误或为现有的添加功能软件。

大多数时候，我看到的补丁不可能替换整个应用程序，甚至是应用程序中使用的小文件。在我看来，实际的二进制文件似乎正在被修改。

这些补丁是如何实际实施的？任何人都可以向我指出任何解释其工作原理的资源，还是就像替换应用程序中的链接库之类的小组件一样简单？

我可能永远不需要以这种方式进行部署，但我很想知道它是如何工作的。如果我的理解是正确的，补丁实际上只能修改二进制文件的一部分，那么这可以在.NET 中实现吗？如果是我想学习它，因为这是我最熟悉的框架，我想了解它是如何工作的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-28T05:07:16.137

这通常使用二进制差异算法来实现——将最近发布的版本与新代码进行差异。如果用户运行的是最新版本，您只需要应用差异。对软件特别有效，因为编译后的代码通常在版本之间非常相似。当然，如果用户没有运行最新版本，那么无论如何您都必须下载整个内容。

* * *

有几个通用二进制差异算法的实现：[bsdiff](http://www.daemonology.net/bsdiff/)和[xdelta](http://code.google.com/p/xdelta/)是很好的开源实现。我找不到 .NET 的任何实现，但由于所讨论的算法与平台无关，因此如果您喜欢一个项目，移植它们应该不会太难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T12:03:17.633

如果您正在谈论修补 Windows 应用程序，那么您想要查看的是 .MSP 文件。这些类似于 .MSI，但只是补丁和应用程序。

查看MSDN 文档中的[修补和升级](http://msdn.microsoft.com/en-us/library/aa370579(VS.85).aspx)。

.MSP 文件的作用是将更新的文件加载到应用程序安装中。这通常是更新的 dll 和资源文件，但可以包括任何文件。

In addition to patching the installed application, the repair files located in C:\WINDOWS\Installer are updated as well. Then if the user selects "Repair" from Add / Remove programs the updated patch files are used as well.

I'm thinking that the binary diff method discussed by John Millikin must be used in other operating systems. Although you could make it work in windows it would be somewhat alien.

# javascript - 在可排序选项卡中将文本框的值更改为其当前顺序

> ID：145241
> 
> 赞同：2
> 
> 时间：2008-09-28T05:05:49.213
> 
> 标签：javascript, jquery, html

## **编辑：我自己解决了这个问题。请看[下面我的回答](https://stackoverflow.com/questions/145241/change-the-value-of-a-text-box-to-its-current-order-in-a-sortable-tab/145388#145388)**

我用 jQuery 设置了一个不错的可排序表，它非常好。但现在我想扩展它。

每个表格行都有一个文本框，我想要的是，每次删除一行时，文本框都会更新以反映文本框的顺序。**例如，顶部的文本框的值始终为“1”，第二个始终为“2”，依此类推。**

我正在使用 jQuery 和[Table Drag and Drop JQuery 插件](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)

### 代码

**Javascript：**

```
<script type = "text/javascript" >
  $(document).ready(function () {
    $("#table-2").tableDnD({
      onDrop: function (table, row) {
        var rows = table.tBodies[0].rows;
        var debugStr = "Order: ";
        for (var i = 0; i < rows.length; i++) {
          debugStr += rows[i].id + ", ";
        }
        console.log(debugStr)
        document.forms['productform'].sort1.value = debugStr;
        document.forms['productform'].sort2.value = debugStr;
        document.forms['productform'].sort3.value = debugStr;
        document.forms['productform'].sort4.value = debugStr;
      },
    });
  }); 
</script> 
```

**HTML表格：**

```
<form name="productform">
  <table cellspacing="0" id="table-2" name="productform">
    <thead>
      <tr>
        <td>Product</td>
        <td>Order</td>
      </tr>
    </thead>
    <tbody>
      <tr class="row1" id="Pol">
        <td><a href="1/">Pol</a></td>
        <td><input type="textbox" name="sort1"/></td>
      </tr>
      <tr class="row2" id="Evo">
        <td><a href="2/">Evo</a></td>
        <td><input type="textbox" name="sort2"/></td>
      </tr>
      <tr class="row3" id="Kal">
        <td><a href="3/">Kal</a></td>
        <td><input type="textbox" name="sort3"/></td>
      </tr>
      <tr class="row4" id="Lok">
        <td><a href="4/">Lok</a></td>
        <td><input type="textbox" name="sort4"/></td>
      </tr>
    </tbody>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T06:56:28.497

#jquery 中的 Hardnrg 最终为我解决了这个问题。

它涉及为每个输入添加一个 id="" ：

```
<form name="productform">
    <table cellspacing="0" id="table-2" name="productform"> 
        <thead>
            <tr><td>Product</td>    <td>Order</td></tr> 
        </thead>

        <tbody>
            <tr class="row1" id="Pol">  <td><a href="1/">Pol</a></td>   <td><input id="Pol_field" type="textbox" name="sort1"/></td>    </tr>
            <tr class="row2" id="Evo">  <td><a href="2/">Evo</a></td>   <td><input id="Evo_field" type="textbox" name="sort2"/></td>    </tr>
            <tr class="row3" id="Kal">  <td><a href="3/">Kal</a></td>   <td><input id="Kal_field" type="textbox" name="sort3"/></td>    </tr>
            <tr class="row4" id="Lok">  <td><a href="4/">Lok</a></td>   <td><input id="Lok_field" type="textbox" name="sort4"/></td>    </tr>
        </tbody> 
    </table>
</form> 
```

并将这个 js 添加到 OnDrop 事件中：

```
for (var i=0; i < rows.length; i++) {
    $('#' + rows[i].id + "_field").val(i+1);
} 
```

十分简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T05:45:26.343

嗯..我想你想做这样的事情：

```
$("input:text", "#table-2").each( function(i){ this.value=i+1; }); 
```

$().each() 函数的信息在这里：[http ://docs.jquery.com/Core/each](http://docs.jquery.com/Core/each)

# mouse - 协作桌面共享 - 多鼠标

> ID：145246
> 
> 赞同：1
> 
> 时间：2008-09-28T05:11:49.027
> 
> 标签：mouse, remote-desktop, collaboration

我正在使用 Windows Xp，我正在寻找一种软件，我可以在其中看到远程桌面的屏幕并能够显示第二个鼠标（或任何类型的指针），我可以通过鼠标来显示某些内容。

我想通过网络与同伴一起工作，很像 XP 编程方法。我觉得它很有用，但是在互联网上很难做到这一点。

我不想控制电脑，但它会是一个加号。我想要的只是查看远程桌面并让我的指针（或标记）指向需要更改的代码行或类似的东西。

你知道这样的软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T05:31:37.653

您追求的是 Microsoft [SharedView](http://www.microsoft.com/downloadS/details.aspx?familyid=95AF94BA-755E-4039-9038-63005EE9D33A&displaylang=en)之类的东西。

它允许使用多个指针共享应用程序等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T05:26:45.623

我已经使用过 windows messenger，但我不记得它能够显示第二个鼠标指针。由于我不想打扰使用计算机的人，这只是为了一些指示。

我已经在谷歌上搜索了一些 VNC 解决方案，但我发现的唯一一个是协作 VNC，它仅适用于 Unix。

# helpfile - 是否有免费软件可以为您的程序创建 Windows 帮助文件？

> ID：145247
> 
> 赞同：24
> 
> 时间：2008-09-28T05:12:03.457
> 
> 标签：helpfile

是否有免费软件可以为您的程序创建 Windows 帮助文件？

我想要允许输出 CHM 和 HTML 文件的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-28T05:17:22.960

是的。来自[sourceforge](http://sourceforge.net/projects/helpmaker/)的 HelpMaker （原网站[www.vizacc.com](http://www.vizacc.com)已关闭）。有史以来最好的免费帮助实用程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-28T05:24:04.757

[Microsoft 的HTML 帮助研讨会](http://www.microsoft.com/downloads/details.aspx?FamilyID=00535334-c8a6-452f-9aa0-d597d16580cc&displaylang=en)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-28T05:16:19.593

如果您正在为 .NET 开发并且希望生成 XML 文档帮助文件，您应该查看 Microsoft 的共享源[Sandcastle](http://www.codeplex.com/Sandcastle)项目，以及它的前端 GUI“ [Sandcastle Help File Builder](http://www.codeplex.com/SHFB) ”。

它非常好并且高度可配置。您可以使用它制作一些非常好的帮助文档。

我上次使用它时（超过 6 个月前）有点慢，但从那以后它可能已经优化了......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-28T05:21:32.483

我不确定“免费”，但[解释博士](http://www.drexplain.com/)的价格略高于 100 美元，每一分钱都值得。我们使用它为具有单个 CHM 的桌面应用程序和使用 HTML 导出的 Web 应用程序生成帮助。最好的部分是它“自动”挖掘您的网页或应用程序页面并为您开始基本的帮助构建。我们的投资回报率约为 1 天。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-28T15:49:22.087

[HelpNDoc](http://www.helpndoc.com)是免费供个人使用的。它可以根据要求生成 CHM 和 HTML 帮助文件，以及来自同一来源的 Word DocX、PDF、ePub 和 Kindle 电子书。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-11T01:48:33.690

DocBook 是用于编写软件文档的通用标准文件格式。

DocBook 是一种 XML 文件格式，因此已受到 Microsoft 的支持。它是声明性的，为它赢得了更多的赞誉。

DocBook 允许您向它识别哪些图片是屏幕截图，哪些字符串实际上是命令，等等。是的，实际上意味着它是语义网的真实部分。

因此，您可以使用 XPath 表达式来搜索所有屏幕截图、所有命令等。体面的 IDE 都支持 XPath 搜索，许多小的免费实用程序也是如此。

一旦您确定了哪个 XPath 搜索字符串返回了您想要的内容，您就可以自己编写一个小 XSLT 样式表，或者在其他人的帮助下编写。样式表可以收集信息并生成 HTML 项目符号列表 (UL LI)、定义列表 (DL DT,DD) 或快速参考卡。随你喜欢。XPath、XSLT 和各种 *ML 语言非常灵活。

阅读[从 DocBook 到集成帮助系统，了解](http://www.kosek.cz/xml/dboscon/dbhelp/frames.html)有关如何将 DocBook 标准文件自动转换为专有且非常实用的 Microsoft Windows HTML 帮助文件的信息。

有关 DocBook 本身的更多信息，请访问[http://www.docbook.org/](http://www.docbook.org/) - 并获取最新版本的免费 XSLT 样式表。

除了 Microsoft Windows WinHelp 文件中使用的一种格式之外，DocBook 文件还可以自动转换为多种文件格式。有关详细信息，请参阅 docbook.org 网站。这是一长串支持的文件格式，所以准备好迎接惊喜吧！

如果您已经有一个结构化的 XML 文本编辑器，您可能想要使用它。如果您正在编写一个非常大的在线帮助文​​件，请考虑[使用 oXygenXML](http://www.oxygenxml.com/)和/或 Open Office Writer。前者是商业产品，后者是免费的开源软件。

有关使用 Open Office Writer 创建/编辑 DocBook 文件的更多信息，请阅读[Open Office 上的 DocBook 入门](http://xml.openoffice.org/xmerge/docbook/UserGuide.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T05:22:20.220

[Doxygen](http://www.doxygen.nl/)虽然最初是为了生成代码文档，但可以很容易地生成任何类型的帮助。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-15T17:11:27.967

它不是“免费的”，但我遇到过的最好的软件是来自 Just Great Software 的 HelpScribble。我在 Windows 7 上使用它没有任何问题。我最喜欢的是它能够将 SHG 文件集成到帮助文件中。一张图片值一千字，所以我倾向于使用屏幕图像来捕捉按钮、文本框或其他任何东西。用户可以看到该屏幕，然后只需单击他们想要有关“BOOM！”的更多信息的显示。……解释一下子就出来了！无需翻阅手册或屏幕页面。

# performance - 有编译 VBScript 的经验吗？

> ID：145262
> 
> 赞同：1
> 
> 时间：2008-09-28T05:27:10.707
> 
> 标签：performance, winapi, optimization, compiler-construction, vbscript

我有一个自制的 2000 行 VBScript 脚本，随着我添加的每个附加代码，它变得越来越慢。它是作为私人调试辅助工具创建的，现在它已经变得非常有用。我想打磨它并与我们的产品一起发货。

我想我可以通过编译它并使其成为 EXE 来加速它。此外，我希望我的工具有一个用户界面，一旦我使用编译平台可能给我的额外库，这可能是可能的。我还在考虑通过调用[Win32](http://en.wikipedia.org/wiki/Windows_API)函数来扩展脚本，以实现我需要的任何缺失功能。

我有 VB 6.0 或者我可以购买外部编译器。但我还需要创建的程序（而不是编译器本身）在 Windows Vista 中运行良好。我最好的选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T05:31:16.173

我建议下载 Visual Basic Express Edition ( [http://www.microsoft.com/express/vb/](http://www.microsoft.com/express/vb/) ) 并将您的工具移植到 VB.Net。但是，这种方法有一个缺点 - 您的程序将依赖于 .Net。在大多数情况下，这不应该是一个大问题，因为现在大多数机器都应该有 .Net 2.0，但最好记住它。

我会远离 VB6.0；但是，除了 VB.Net，我不知道您可以使用任何其他好的基本编译器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T05:36:20.560

缓慢的原因可能不仅仅是它正在被解释的事实。您可能可以对其进行各种优化以使其更快。尝试找出代码的哪些部分减慢它的速度并尝试加快它们的速度。

根据代码的作用，VB6 可能会很好。如果要处理自然文本/文件名，那么最好使用 VB.net，因为 VB6 不能很好地支持 Unicode。

但我感觉即使编译后，它仍然可能很慢，因为编译只会让它运行得更快，而不是更高效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-04T04:30:27.557

嗯......那里有许多“好的” BASIC 编译器：

*   [BCX](http://bcx-basic.sourceforge.net/)
*   [xbLite](http://pagesperso-orange.fr/xblite/)

是那些立即浮现在脑海中的。[mindteq](http://basic.mindteq.com/)网站上列出了很多。（Jabaco 特别有趣 - VB6 用 Ja​​va 重新表达。我已经摆弄过它，它看起来很有前途！）

但是回到 VBScript 编译器，它们确实存在……有点。他们所做的是将代码标记化并在它们周围放置某种包装器。他们是否跑得更快是没有实际意义的。

*   [VBS2EXE](http://www.vbs2exe.com/about.html)
*   [VBScript2Exe](http://www.studio-catapano.com/html/vbscript2exe_eng.htm)
*   [执行脚本](http://www.hide-folder.com/products/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-13T08:16:10.317

如果不了解程序正在做什么或正在处理多少数据，就很难说。

我同意 Franci - VB6 不再销售或支持，因此 VB.Net 将成为编译代码的方式。（Express 是免费的。）VBScript 与 VB.Net 不太相似，因此移植可能是一项不错的工作，除非它是所有 WMI 或 LDAP 查询或类似的东西。

我会开始计时，看看你的瓶颈在哪里。除非您正在执行大量循环和多级函数调用，否则您可能会陷入外部调用。

```
wscript.echo "Begin: " & Time
tStartTime = Timer
'... do stuff ...
tStopTime = Timer
wscript.echo "Elapsed time: " & tStopTime - tStartTime 
```

干杯

# programming-languages - 什么是“全函数式编程”？

> ID：145263
> 
> 赞同：20
> 
> 时间：2008-09-28T05:27:49.910
> 
> 标签：programming-languages, functional-programming

[维基百科](http://en.wikipedia.org/wiki/Total_functional_programming)有这样的说法：

> 全函数式编程（也称为强函数式编程，与普通或弱函数式编程相比）是一种编程范式，它将程序的范围限制在可证明终止的程序范围内。

和

> 这些限制意味着整个函数式编程不是图灵完备的。然而，可以使用的算法集仍然是巨大的。例如，任何已经为其计算了渐近上界的算法都可以通过使用上限作为额外参数来简单地转换为可证明终止的函数，该额外参数在每次迭代或递归时递减。

还有一篇关于[Total Functional Programming](http://lambda-the-ultimate.org/node/2003)的论文的 Lambda The Ultimate Post 。

直到上周我在邮件列表中才发现这一点。

是否有更多您知道的资源、参考资料或任何示例实现？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-28T06:10:07.483

如果我理解正确的话，Total Functional Programming 的意思就是：使用 Total Functions 进行编程。如果我没记错我的数学课程，总函数是在其整个域中定义的函数，部分函数是在其定义中有“漏洞”的函数。

现在，如果您有一个函数，该函数对于某些输入值`v`进入无限递归或无限循环，或者通常不会以其他方式终止，那么您的函数不是为 定义的`v`，因此不是部分的，即不是全部的。

Total Functional Programming 不允许您编写这样的函数。所有函数总是为所有可能的输入返回一个结果；并且类型检查器确保是这种情况。

我的猜测是，这极大地简化了错误处理：没有。

您的报价中已经提到了缺点：它不是图灵完备的。例如，操作系统本质上是一个巨大的无限循环。事实上，我们不*希望*操作系统终止，我们称这种行为为“崩溃”，并为此对我们的计算机大喊大叫！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-04T02:30:55.050

虽然这是一个老问题，但我认为到目前为止没有一个答案提到完全函数式编程的真正*动机*，那就是：

如果程序是证明，而证明是程序，那么带有“漏洞”的程序作为证明没有任何意义，并且会引入逻辑不一致。

Basically, if a proof is a program, an infinite loop can be used to prove *anything*. This is really bad, and provides much of the motivation for why we might want to program totally. Other answers tend to not account for the flip side of the paper. While the languages are *techincally* not turing complete, you can recover a lot of interesting programs by using co-inductive definitions and functions. We're very prone to think of *inductive* data, but *codata* serves an important purpose in these languages, where you can totally define a definition which is infinite (and when doing real computation which terminates, you will potentially use only a finite piece of this, or maybe not if you're writing an operating system!).

It is also of note that most proof assistants work based on this principle, Coq, for example.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-09T05:47:12.530

Charity 是另一种保证终止的语言：http:
[//pll.cpsc.ucalgary.ca/charity1/www/home.html](http://pll.cpsc.ucalgary.ca/charity1/www/home.html)

休谟是一种有 4 个等级的语言。外层是图灵完备的，最内层保证终止：
[http ://www-fp.cs.st-andrews.ac.uk/hume/report/](http://www-fp.cs.st-andrews.ac.uk/hume/report/)

# http - OS X 上的 HTTP 通信监控

> ID：145264
> 
> 赞同：9
> 
> 时间：2008-09-28T05:28:25.837
> 
> 标签：http, macos, monitoring

您使用什么应用程序来监控 OS X 上的 HTTP 通信？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-28T05:50:54.020

[查尔斯代理](http://www.charlesproxy.com/)

> Charles 是一个 HTTP 代理/HTTP 监视器/反向代理，使开发人员能够查看他们的机器和 Internet 之间的所有 HTTP 流量。这包括请求、响应和 HTTP 标头（其中包含 cookie 和缓存信息）。

在 JAVA 上运行。在 OSX、Linux 和 Windows 上可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-09-01T20:43:11.423

我喜欢 TcpCatcher。它是免费的，并且 100% 基于 Java，因此它在 Mac OS X 上运行良好。不仅，您将能够监控 HTTP 通信，而且您还能够即时更改请求/响应，这开启了非常有趣的可能性 [。是关于捕获 iPhone 的 HTTP 通信的专门教程。](http://www.tcpcatcher.org/iphone_HTTP_communication.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-30T05:26:04.250

如果您正在寻找跟踪应用程序流量，[Wireshark](http://www.wireshark.org/)是我发现的最好的工具 - 它可以记录和解码 HTTP 和[许多其他协议](http://www.wireshark.org/docs/dfref/)，并且 GUI 的搜索工具可以快速轻松地找到您感兴趣的消息。

我推荐这个的其他原因：

*   安装速度很快
*   它直接从网卡捕获流量，无需更改应用程序或设置代理等。它甚至可以离线读取从 tcpdump 和类似工具捕获的转储
*   它是多平台的（适用于 Windows/Mac/Linux 等）
*   它是开源的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T05:39:28.323

[HTTP跟踪器](http://simile.mit.edu/wiki/HTTPTracer)

[http://simile.mit.edu/wiki/HTTPTracer](http://simile.mit.edu/wiki/HTTPTracer)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T05:55:23.977

如果需要，您还可以使用 dTrace 进行更详细的监控。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T06:03:39.963

我第二次使用 Charles，它是一个非常出色的 HTTP 检查工具。当与 iPhone 模拟器（或任何其他 OS X 应用程序）一起使用时，Charles 会自动设置系统设置以将自己用作代理，因此您只需启动并运行。它也很容易以几种不同的方式检查流量，并且有一个功能齐全的非常宽松的免费试用版（时间限制为一个小时，有几个唠叨屏幕），所以你可以试一试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-30T05:03:36.130

看你说的监控是什么意思了...

如果您只是想知道/停止已安装的应用程序（或操作系统）何时尝试“打电话回家”，那么我推荐[LittleSnitch](http://www.obdev.at/products/littlesnitch/index.html)。

您获得的安心非常值得您从银行账户中减轻体重。

# c++ - 从 Python 调用 C/C++？

> ID：145270
> 
> 赞同：575
> 
> 时间：2008-09-28T05:34:20.177
> 
> 标签：c++, python, c

将 Python 绑定到 C 或 C++ 库的最快方法是什么？

（如果这很重要，我正在使用 Windows。）

* * *

## 回答 #1

> 赞同：737
> 
> 时间：2008-09-28T10:53:31.063

[ctypes](https://docs.python.org/3/library/ctypes.html)模块是标准库的一部分，因此比[swig](http://www.swig.org/)更稳定和更广泛可用，后者总是会给我[带来问题](http://groups.google.com/group/comp.lang.python/browse_thread/thread/d94badd9847fe43a?pli=1)。

使用 ctypes，您需要满足对 python 的任何编译时依赖性，并且您的绑定将适用于任何具有 ctypes 的 python，而不仅仅是编译它的那个。

假设你有一个简单的 C++ 示例类，你想在一个名为 foo.cpp 的文件中与之交谈：

```
#include <iostream>

class Foo{
    public:
        void bar(){
            std::cout << "Hello" << std::endl;
        }
}; 
```

由于 ctypes 只能与 C 函数对话，因此您需要提供那些将它们声明为 extern "C"

```
extern "C" {
    Foo* Foo_new(){ return new Foo(); }
    void Foo_bar(Foo* foo){ foo->bar(); }
} 
```

接下来，您必须将其编译为共享库

```
g++ -c -fPIC foo.cpp -o foo.o
g++ -shared -Wl,-soname,libfoo.so -o libfoo.so  foo.o 
```

最后你必须编写你的 python 包装器（例如在 fooWrapper.py 中）

```
from ctypes import cdll
lib = cdll.LoadLibrary('./libfoo.so')

class Foo(object):
    def __init__(self):
        self.obj = lib.Foo_new()

    def bar(self):
        lib.Foo_bar(self.obj) 
```

一旦你有了它，你可以这样称呼它

```
f = Foo()
f.bar() #and you will see "Hello" on the screen 
```

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2008-09-28T07:51:37.660

你应该看看[Boost.Python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)。以下是从他们的网站上摘录的简短介绍：

> Boost Python 库是一个用于连接 Python 和 C++ 的框架。它允许您快速、无缝地将 C++ 类函数和对象公开给 Python，反之亦然，无需使用特殊工具 - 只需您的 C++ 编译器。它旨在以非侵入方式包装 C++ 接口，因此您根本不必更改 C++ 代码来包装它，这使得 Boost.Python 成为向 Python 公开第 3 方库的理想选择。该库对高级元编程技术的使用为用户简化了其语法，因此包装代码呈现出一种声明性接口定义语言 (IDL) 的外观。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2008-09-28T05:44:11.260

最快的方法是使用[SWIG](http://www.swig.org/)。

来自 SWIG[教程](http://www.swig.org/tutorial.html)的示例：

```
/* File : example.c */
int fact(int n) {
    if (n <= 1) return 1;
    else return n*fact(n-1);
} 
```

接口文件：

```
/* example.i */
%module example
%{
/* Put header files here or function declarations like below */
extern int fact(int n);
%}

extern int fact(int n); 
```

在 Unix 上构建 Python 模块：

```
swig -python example.i
gcc -fPIC -c example.c example_wrap.c -I/usr/local/include/python2.7
gcc -shared example.o example_wrap.o -o _example.so 
```

用法：

```
>>> import example
>>> example.fact(5)
120 
```

请注意，您必须拥有 python-dev。此外，在某些系统中，python 头文件将根据您的安装方式位于 /usr/include/python2.7 中。

从教程：

> SWIG 是一个相当完整的 C++ 编译器，几乎支持所有语言功能。这包括预处理、指针、类、继承，甚至 C++ 模板。SWIG 还可用于将结构和类打包成目标语言的代理类——以非常自然的方式公开底层功能。

* * *

## 回答 #4

> 赞同：55
> 
> 时间：2014-05-26T08:30:54.493

我从此页面开始了我的 Python <-> C++ 绑定之旅，目的是链接高级数据类型（多维 STL 向量与 Python 列表）:-)

在尝试了基于[ctypes](https://docs.python.org/2/library/ctypes.html)和[boost.python](http://www.boost.org/doc/libs/1_55_0/libs/python/doc/tutorial/doc/html/index.html)的解决方案（并且不是软件工程师）之后，我发现当需要高级数据类型绑定时它们很复杂，而我发现[SWIG](http://swig.org)对于这种情况要简单得多。

因此，此示例使用 SWIG，并且已经在 Linux 中进行了测试（但 SWIG 可用并且在 Windows 中也被广泛使用）。

目标是使 Python 可以使用 C++ 函数，该函数采用 2D STL 向量形式的矩阵并返回每行的平均值（作为 1D STL 向量）。

C++ 中的代码（“code.cpp”）如下：

```
#include <vector>
#include "code.h"

using namespace std;

vector<double> average (vector< vector<double> > i_matrix) {

  // Compute average of each row..
  vector <double> averages;
  for (int r = 0; r < i_matrix.size(); r++){
    double rsum = 0.0;
    double ncols= i_matrix[r].size();
    for (int c = 0; c< i_matrix[r].size(); c++){
      rsum += i_matrix[r][c];
    }
    averages.push_back(rsum/ncols);
  }
  return averages;
} 
```

等效的标头（“code.h”）是：

```
#ifndef _code
#define _code

#include <vector>

std::vector<double> average (std::vector< std::vector<double> > i_matrix);

#endif 
```

我们首先编译 C++ 代码来创建一个目标文件：

```
g++ -c -fPIC code.cpp 
```

然后，我们为 C++ 函数定义一个[SWIG 接口定义文件](http://swig.org/Doc3.0/SWIG.html)（“code.i”）。

```
%module code
%{
#include "code.h"
%}
%include "std_vector.i"
namespace std {

  /* On a side note, the names VecDouble and VecVecdouble can be changed, but the order of first the inner vector matters! */
  %template(VecDouble) vector<double>;
  %template(VecVecdouble) vector< vector<double> >;
}

%include "code.h" 
```

使用 SWIG，我们从 SWIG 接口定义文件生成 C++ 接口源代码。

```
swig -c++ -python code.i 
```

我们最终编译生成的 C++ 接口源文件并将所有内容链接在一起以生成可直接由 Python 导入的共享库（“_”很重要）：

```
g++ -c -fPIC code_wrap.cxx  -I/usr/include/python2.7 -I/usr/lib/python2.7
g++ -shared -Wl,-soname,_code.so -o _code.so code.o code_wrap.o 
```

我们现在可以在 Python 脚本中使用该函数：

```
#!/usr/bin/env python

import code
a= [[3,5,7],[8,10,12]]
print a
b = code.average(a)
print "Assignment done"
print a
print b 
```

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2016-07-23T13:53:34.603

还有`pybind11`，它就像[Boost.Python](http://www.boost.org/doc/libs/release/libs/python/doc/index.html)的轻量级版本，兼容所有现代 C++ 编译器：

[https://pybind11.readthedocs.io/en/latest/](https://pybind11.readthedocs.io/en/latest/)

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2018-03-05T23:02:57.677

对于现代 C++，使用 cppyy： [http ://cppyy.readthedocs.io/en/latest/](http://cppyy.readthedocs.io/en/latest/)

它基于 Cling，Clang/LLVM 的 C++ 解释器。绑定是在运行时进行的，不需要额外的中间语言。感谢 Clang，它支持 C++17。

使用 pip 安装它：

```
 $ pip install cppyy 
```

对于小型项目，只需加载相关库和您感兴趣的头文件。例如，从 ctypes 示例中获取代码就是这个线程，但分为头文件和代码部分：

```
 $ cat foo.h
    class Foo {
    public:
        void bar();
    };

    $ cat foo.cpp
    #include "foo.h"
    #include <iostream>

    void Foo::bar() { std::cout << "Hello" << std::endl; } 
```

编译它：

```
 $ g++ -c -fPIC foo.cpp -o foo.o
    $ g++ -shared -Wl,-soname,libfoo.so -o libfoo.so  foo.o 
```

并使用它：

```
 $ python
    >>> import cppyy
    >>> cppyy.include("foo.h")
    >>> cppyy.load_library("foo")
    >>> from cppyy.gbl import Foo
    >>> f = Foo()
    >>> f.bar()
    Hello
    >>> 
```

大型项目支持自动加载准备好的反射信息和创建它们的 cmake 片段，因此已安装包的用户可以简单地运行：

```
 $ python
    >>> import cppyy
    >>> f = cppyy.gbl.Foo()
    >>> f.bar()
    Hello
    >>> 
```

由于 LLVM，高级功能成为可能，例如自动模板实例化。继续这个例子：

```
 >>> v = cppyy.gbl.std.vector[cppyy.gbl.Foo]()
    >>> v.push_back(f)
    >>> len(v)
    1
    >>> v[0].bar()
    Hello
    >>> 
```

注意：我是cppyy的作者。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-11-05T10:39:23.013

我认为 python 的 cffi 可以是一个选择。

> 目标是从 Python 调用 C 代码。您应该能够在不学习第三种语言的情况下做到这一点：每种替代方法都需要您学习他们自己的语言（Cython、SWIG）或 API（ctypes）。因此，我们试图假设您了解 Python 和 C，并尽量减少您需要学习的额外 API。

[http://cffi.readthedocs.org/en/release-0.7/](http://cffi.readthedocs.org/en/release-0.7/)

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2020-02-24T11:28:49.120

**pybind11 最小可运行示例**

pybind11 之前在[https://stackoverflow.com/a/38542539/895245](https://stackoverflow.com/a/38542539/895245)中提到过，但我想在这里给出一个具体的使用示例和一些关于实现的进一步讨论。

总而言之，我强烈推荐 pybind11，因为它非常易于使用：您只需包含一个标头，然后 pybind11 使用模板魔术来检查您想要公开给 Python 的 C++ 类并透明地执行此操作。

这个模板魔法的缺点是它会立即减慢编译速度，给任何使用 pybind11 的文件增加几秒钟的时间，例如，请参阅[在这个问题上完成的调查](https://gem5.atlassian.net/browse/GEM5-277)。[PyTorch 同意](https://discuss.pytorch.org/t/how-are-python-bindings-created/46453)。已在以下位置提出了解决此问题的建议：[https ://github.com/pybind/pybind11/pull/2445](https://github.com/pybind/pybind11/pull/2445)

这是一个最小的可运行示例，让您了解 pybind11 是多么的棒：

class_test.cpp

```
#include <string>

#include <pybind11/pybind11.h>

struct ClassTest {
    ClassTest(const std::string &name, int i) : name(name), i(i) { }
    void setName(const std::string &name_) { name = name_; }
    const std::string getName() const { return name + "z"; }
    void setI(const int i) { this->i = i; }
    const int getI() const { return i + 1; }
    std::string name;
    int i;
};

namespace py = pybind11;

PYBIND11_PLUGIN(class_test) {
    py::module m("my_module", "pybind11 example plugin");
    py::class_<ClassTest>(m, "ClassTest")
        .def(py::init<const std::string &, int>())
        .def("setName", &ClassTest::setName)
        .def("getName", &ClassTest::getName)
        .def_readwrite("name", &ClassTest::name)
        .def("setI", &ClassTest::setI)
        .def("getI", &ClassTest::getI)
        .def_readwrite("i", &ClassTest::i);
    return m.ptr();
} 
```

class_test_main.py

```
#!/usr/bin/env python3

import class_test

my_class_test = class_test.ClassTest("abc", 1);
print(my_class_test.getName())
print(my_class_test.getI())
my_class_test.setName("012")
my_class_test.setI(2)
print(my_class_test.getName())
print(my_class_test.getI())
assert(my_class_test.getName() == "012z")
assert(my_class_test.getI() == 3) 
```

编译并运行：

```
#!/usr/bin/env bash
set -eux
sudo apt install pybind11-dev
g++ `python3-config --cflags` -shared -std=c++11 -fPIC class_test.cpp \
  -o class_test`python3-config --extension-suffix` `python3-config --libs`
./class_test_main.py 
```

标准输出：

```
abcz
2
012z
3 
```

如果我们尝试使用错误的类型，如下所示：

```
my_class_test.setI("abc") 
```

它按预期爆炸：

```
Traceback (most recent call last):
  File "/home/ciro/test/./class_test_main.py", line 9, in <module>
    my_class_test.setI("abc")
TypeError: setI(): incompatible function arguments. The following argument types are supported:
    1\. (self: my_module.ClassTest, arg0: int) -> None

Invoked with: <my_module.ClassTest object at 0x7f2980254fb0>, 'abc' 
```

这个例子展示了 pybind11 如何让你毫不费力地将`ClassTest`C++ 类暴露给 Python！

值得注意的是，Pybind11 自动从 C++ 代码中理解`name`为`std::string`，因此应该映射到 Python`str`对象。

编译生成一个名为的文件`class_test.cpython-36m-x86_64-linux-gnu.so`，该文件`class_test_main.py`自动作为`class_test`本地定义模块的定义点。

也许只有当您尝试使用本机 Python API 手动执行相同的操作时，才会意识到这有多棒，例如，请参见执行此操作的示例，它有大约 10 倍的代码：[https ://github.com /cirosantilli/python-cheat/blob/4f676f62e87810582ad53b2fb426b74eae52aad5/py_from_c/pure.c](https://github.com/cirosantilli/python-cheat/blob/4f676f62e87810582ad53b2fb426b74eae52aad5/py_from_c/pure.c)在该示例中，您可以看到 C 代码如何使用它包含的所有信息（成员、方法、进一步元数据...）。也可以看看：

*   [python-C++扩展可以获取一个C++对象并调用它的成员函数吗？](https://stackoverflow.com/questions/31391400/can-python-c-extension-get-a-c-object-and-call-its-member-function)
*   [将 C++ 类实例暴露给 python 嵌入式解释器](https://stackoverflow.com/questions/8225934/exposing-a-c-class-instance-to-a-python-embedded-interpreter)
*   [具有 Python C 扩展的类（不是方法）的完整和最小示例？](https://stackoverflow.com/questions/56203127/a-full-and-minimal-example-for-a-class-not-method-with-python-c-extension)
*   [在 C++ 中嵌入 Python 并使用 Boost.Python 从 C++ 代码调用方法](https://stackoverflow.com/questions/32604292/embedding-python-in-c-and-calling-methods-from-the-c-code)
*   [Python C++ 扩展中的继承](https://stackoverflow.com/questions/2200912/inheritance-in-python-c-extension)

[pybind11 声称与https://stackoverflow.com/a/145436/895245](https://stackoverflow.com/a/145436/895245)`Boost.Python`中提到的类似，但更小，因为它摆脱了 Boost 项目内部的臃肿：

> pybind11 是一个轻量级的仅头文件库，它在 Python 中公开 C++ 类型，反之亦然，主要用于创建现有 C++ 代码的 Python 绑定。它的目标和语法类似于 David Abrahams 的优秀 Boost.Python 库：通过使用编译时自省来推断类型信息，从而最大限度地减少传统扩展模块中的样板代码。
> 
> Boost.Python 的主要问题——以及创建这样一个类似项目的原因——是 Boost。Boost 是一个庞大而复杂的实用程序库套件，几乎可以与现有的所有 C++ 编译器一起使用。这种兼容性是有代价的：为了支持最古老和漏洞最多的编译器样本，需要使用晦涩难懂的模板技巧和变通方法。现在，兼容 C++11 的编译器已广泛使用，这种重型机器已成为一个过大且不必要的依赖项。
> 
> 将此库视为 Boost.Python 的一个小型自包含版本，其中剥离了与绑定生成无关的所有内容。如果没有注释，核心头文件只需要大约 4K 行代码，并且依赖于 Python（2.7 或 3.x，或 PyPy2.7 >= 5.7）和 C++ 标准库。由于一些新的 C++11 语言特性（特别是：元组、lambda 函数和可变参数模板），这种紧凑的实现成为可能。自创建以来，该库在许多方面都超越了 Boost.Python，从而在许多常见情况下显着简化了绑定代码。

pybind11 is also the only non-native alternative hightlighted by the current Microsoft Python C binding documentation at: [https://docs.microsoft.com/en-us/visualstudio/python/working-with-c-cpp-python-in-visual-studio?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/python/working-with-c-cpp-python-in-visual-studio?view=vs-2019) ([archive](http://web.archive.org/save/https://docs.microsoft.com/en-us/visualstudio/python/working-with-c-cpp-python-in-visual-studio?view=vs-2019)).

Tested on Ubuntu 18.04, pybind11 2.0.1, Python 3.6.8, GCC 7.4.0.

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-08-28T06:38:12.427

如果我理解正确，问题是如何从 Python 调用 C 函数。那么最好的选择是 Ctypes（顺便说一句，可以在所有 Python 变体中移植）。

```
>>> from ctypes import *
>>> libc = cdll.msvcrt
>>> print libc.time(None)
1438069008
>>> printf = libc.printf
>>> printf("Hello, %s\n", "World!")
Hello, World!
14
>>> printf("%d bottles of beer\n", 42)
42 bottles of beer
19 
```

有关详细指南，您可能需要参考[我的博客文章](http://myunixworld.blogspot.in/2015/07/how-python-can-talk-to-other-language.html)。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2019-12-19T09:56:19.993

我喜欢 cppyy，它使使用 C++ 代码扩展 Python 变得非常容易，并在需要时显着提高性能。

它功能强大，坦率地说，使用起来非常简单，

这是一个如何创建 numpy 数组并将其传递给 C++ 中的类成员函数的示例。

**cpyy_test.py**

```
import cppyy
import numpy as np
cppyy.include('Buffer.h')

s = cppyy.gbl.Buffer()
numpy_array = np.empty(32000, np.float64)
s.get_numpy_array(numpy_array.data, numpy_array.size)
print(numpy_array[:20]) 
```

**缓冲区.h**

```
struct Buffer {
  void get_numpy_array(double *ad, int size) {
    for( long i=0; i < size; i++)
        ad[i]=i;
  }
}; 
```

您还可以非常轻松地创建 Python 模块（使用 CMake），这样您就可以避免一直重新编译 C++ 代码。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2015-12-29T17:27:16.030

Cython 绝对是要走的路，除非您期望编写 Java 包装器，在这种情况下，SWIG 可能更可取。

我推荐使用`runcython`命令行实用程序，它使使用 Cython 的过程变得非常简单。如果需要将结构化数据传递给 C++，可以看看 Google 的 protobuf 库，非常方便。

这是我使用这两种工具制作的最小示例：

[https://github.com/nicodjimenez/python2cpp](https://github.com/nicodjimenez/python2cpp)

希望它可以成为一个有用的起点。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-04-24T17:23:23.103

首先，您应该确定您的特定目的是什么。[上面提到了关于扩展和嵌入 Python 解释器](https://docs.python.org/2/extending/)的官方 Python 文档，我可以添加一个很好[的二进制扩展概述](http://web.archive.org/web/20160530183233/http://python-packaging-user-guide.readthedocs.io/en/latest/extensions/)。用例可分为 3 类：

*   **加速器模块**：比在 CPython 中运行的等效纯 Python 代码运行得更快。
*   **包装模块**：将现有的 C 接口暴露给 Python 代码。
*   **低级系统访问**：访问 CPython 运行时、操作系统或底层硬件的低级功能。

为了给其他感兴趣的人提供一些更广泛的视角，并且由于您最初的问题有点模糊（“对于 C 或 C++ 库”），我认为这些信息可能对您很感兴趣。在上面的链接中，您可以阅读使用二进制扩展及其替代方案的缺点。

除了建议的其他答案之外，如果您想要一个加速器模块，您可以尝试[Numba](http://numba.pydata.org/)。它“通过在导入时、运行时或静态（使用包含的 pycc 工具）时使用 LLVM 编译器基础架构生成优化的机器代码”来工作。

# java - Lambda Probe 死了吗？

> ID：145272
> 
> 赞同：11
> 
> 时间：2008-09-28T05:35:25.727
> 
> 标签：java, memory, tomcat, garbage-collection

有谁知道从哪里获得LambdaProbe的**源代码？**

或者，有谁知道该项目是否可以移动到社区存储库？

除了该工具一年多没有更新外，LambdaProbe 网站自 2008 年 9 月下旬以来一直处于关闭状态。

背景：Lambda Probe 是一个有用的工具，用于查看正在运行的 tomcat 服务器上的统计信息。它曾经可以在[http://www.lambdaprobe.org](http://www.lambdaprobe.org)找到。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-10-08T11:34:40.797

在[http://code.google.com/p/psi-probe/似乎有一个项目的分支](http://code.google.com/p/psi-probe/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-17T16:30:10.743

该网站似乎仍然很死。但是，我已经对可用的源代码和发行说明进行了一些研究，这是我发现的关于 lambda 探针的所有内容。我希望它有帮助！

谷歌缓存搜索：网站：www.lambdaprobe.org

发行说明： http: [//209.85.173.104/search ?q=cache:HB0527hDa5AJ:www.lambdaprobe.org/d/latest.shtml+release+site:www.lambdaprobe.org&hl=en&gl=us&strip=1](http://209.85.173.104/search?q=cache:HB0527hDa5AJ:www.lambdaprobe.org/d/latest.shtml+release+site:www.lambdaprobe.org&hl=en&gl=us&strip=1)

最新发布下载： http: [//209.85.173.104/search ?q=cache:t5jXPCYgiCsJ:www.lambdaprobe.org/d/download.htm+download+1.7b+site:www.lambdaprobe.org&hl=en&gl=us&strip=1](http://209.85.173.104/search?q=cache:t5jXPCYgiCsJ:www.lambdaprobe.org/d/download.htm+download+1.7b+site:www.lambdaprobe.org&hl=en&gl=us&strip=1)

[http://www.lambdaprobe.org/downloads/1.7/probe.1.7b.zip](http://www.lambdaprobe.org/downloads/1.7/probe.1.7b.zip) [http://www.lambdaprobe.org/downloads/1.7/probe.1.7b.src.zip](http://www.lambdaprobe.org/downloads/1.7/probe.1.7b.src.zip) [http://www.lambdaprobe。 org/downloads/1.7/probe.1.7b-jb.zip](http://www.lambdaprobe.org/downloads/1.7/probe.1.7b-jb.zip)

[http://www.lambdaprobe.org/downloads/1.6/probe.1.6.zip](http://www.lambdaprobe.org/downloads/1.6/probe.1.6.zip) [http://www.lambdaprobe.org/downloads/1.6/probe.1.6.src.zip](http://www.lambdaprobe.org/downloads/1.6/probe.1.6.src.zip) [http://www.lambdaprobe.org/下载/1.6/probe.1.6-jb.zip](http://www.lambdaprobe.org/downloads/1.6/probe.1.6-jb.zip)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:10:00.727

该项目目前托管在这里：[https ://launchpad.net/lambdaprobe/+download](https://launchpad.net/lambdaprobe/+download)

这些文件也可以在这里托管在 Softpedia 上：[http ://webscripts.softpedia.com/scriptDownload/Lambda-Probe-Download-69093.html](http://webscripts.softpedia.com/scriptDownload/Lambda-Probe-Download-69093.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T12:22:00.397

我不知道该网站的状态，但看起来你可以[在 Softpedia](http://webscripts.softpedia.com/script/Server-Management/Lambda-Probe-69093.html)上获取一份副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-10T08:04:43.417

实际上该站点的某些部分不起作用：它没有在[http://www.lambdaprobe.org/](http://www.lambdaprobe.org/)打开主页，但 Softpedia 外部链接指向[http://www.lambdaprobe.org/downloads/ 1.5/probe.1.5.0.1.zip](http://www.lambdaprobe.org/downloads/1.5/probe.1.5.0.1.zip)，你可以从那里下载。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-15T20:59:38.827

刚刚玩了 Zloster 发送的链接并获得了 1.6 版。这是 [http://www.lambdaprobe.org/downloads/1.6/probe.1.6.zip](http://www.lambdaprobe.org/downloads/1.6/probe.1.6.zip) 享受！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-14T03:42:43.640

它已被分叉，现在在 GitHub 上：[https ://github.com/psi-probe/psi-probe](https://github.com/psi-probe/psi-probe)

# emacs - Emacs 中的智能家居

> ID：145291
> 
> 赞同：39
> 
> 时间：2008-09-28T05:50:36.330
> 
> 标签：emacs

你可以在 Emacs 中为 home 键设置智能行为吗？智能我的意思是，它应该转到第一个非空白字符，然后在第二次按下时转到 0，然后在第三次按下时返回到第一个非空白字符，而不是转到第 0 个字符，以此类推。拥有聪明的结局也会很好。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-09-28T06:36:27.700

```
(defun smart-beginning-of-line ()
  "Move point to first non-whitespace character or beginning-of-line.

Move point to the first non-whitespace character on this line.
If point was already at that position, move point to beginning of line."
  (interactive "^") ; Use (interactive) in Emacs 22 or older
  (let ((oldpos (point)))
    (back-to-indentation)
    (and (= oldpos (point))
         (beginning-of-line))))

(global-set-key [home] 'smart-beginning-of-line) 
```

我不太确定 smart end 会做什么。你通常有很多尾随空格吗？

**注意：**这个函数和 Robert Vuković 的主要区别在于他总是在第一次按键时移动到第一个非空白字符，即使光标已经在那里。在这种情况下，我的会移动到第 0 列。

另外，他`(beginning-of-line-text)`在我用过的地方用过`(back-to-indentation)`。它们非常相似，但它们之间存在一些差异。 `(back-to-indentation)`总是移动到一行的第一个非空白字符。 `(beginning-of-line-text)`有时会移过它认为无关紧要的非空白字符。例如，在仅注释行上，它移动到注释文本的第一个字符，而不是注释标记。但是这两个函数都可以在我们的任何一个答案中使用，具体取决于您喜欢哪种行为。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-28T06:37:38.853

这适用于 GNU Emacs，我没有用 XEmacs 尝试过。

```
 (defun My-smart-home () "Odd home to beginning of line, even home to beginning of text/code."
    (interactive)
    (if (and (eq last-command 'My-smart-home)
            (/= (line-beginning-position) (point)))
    (beginning-of-line)
    (beginning-of-line-text))
)

(global-set-key [home] 'My-smart-home) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-09-27T10:26:40.620

感谢这个方便的功能。我现在一直在使用它并且喜欢它。我只做了一个小改动：（交互式）变为：（交互式“^”）

来自 emacs 帮助：如果以 shift-select-mode' 开头的字符串`^' and`为非 nil，则 Emacs 首先调用函数 `handle-shift-select'。

基本上，如果您使用 shift-select-mode，这会使 shift-home 从当前位置选择到行首。它在 minibuffer 中特别有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-29T01:57:39.750

请注意，已经有一个返回缩进功能，它可以执行您希望第一个智能家居功能执行的操作，即转到行上的第一个非空白字符。它默认绑定到 Mm。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-27T04:19:31.833

现在有一个包可以做到这一点，[`mwim`](https://github.com/alezost/mwim.el)（移动我的意思）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-11T18:59:45.677

我的版本：移到视线的开头，第一个非空白或行首。

```
(defun smart-beginning-of-line ()
    "Move point to beginning-of-line or first non-whitespace character"
  (interactive "^")
  (let ((p (point)))
    (beginning-of-visual-line)
    (if (= p (point)) (back-to-indentation))
    (if (= p (point)) (beginning-of-line))))
(global-set-key [home] 'smart-beginning-of-line)
(global-set-key "\C-a" 'smart-beginning-of-line) 
```

和`[home]`( `"\C-a"`control+a) 键：

*   将光标（点）移动到视线的起点。
*   如果它已经在可视行的开头，则将其移动到该行的第一个非空白字符。
*   如果它已经存在，则将其移至行首。
*   移动时，保持区域 ( `interactive "^"`)。

这取自@cjm 和@thomas；然后我添加了视觉线的东西。（对不起我的英语不好）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-06T10:13:49.430

我将@Vucovic 代码调整为`beggining-of-line`首先跳转到：

```
(defun my-smart-beginning-of-line ()
  "Move point to beginning-of-line. If repeat command it cycle
position between `back-to-indentation' and `beginning-of-line'."
  (interactive "^")
  (if (and (eq last-command 'my-smart-beginning-of-line)
           (= (line-beginning-position) (point)))
      (back-to-indentation)
    (beginning-of-line)))

(global-set-key [home] 'my-smart-beginning-of-line) 
```

# c# - 何时在 C# 中使用线程池？

> ID：145304
> 
> 赞同：127
> 
> 时间：2008-09-28T06:00:10.627
> 
> 标签：c#, multithreading, threadpool

我一直在尝试学习 C# 中的多线程编程，但我对何时最好使用线程池与创建自己的线程感到困惑。一本书建议仅将线程池用于小任务（无论这意味着什么），但我似乎找不到任何真正的指导方针。

线程池与创建自己的线程相比有哪些优缺点？每个都有哪些示例用例？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-09-28T06:13:46.227

出于与任何其他语言相同的原因，我建议您在 C# 中使用线程池。

当您想限制正在运行的线程数或不希望创建和销毁它们的开销时，请使用线程池。

小任务，你读的书是指生命周期短的任务。如果创建一个只运行一秒钟的线程需要十秒钟，那是您应该使用池的地方（忽略我的实际数字，这是重要的比率）。

否则，您会花费大量时间来创建和销毁线程，而不是简单地做它们打算做的工作。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-09-28T06:09:17.423

如果您有许多需要持续处理的逻辑任务，并且您希望并行完成，请使用 pool+scheduler。

如果您需要同时执行与 IO 相关的任务，例如从远程服务器下载内容或访问磁盘，但需要每隔几分钟执行一次，然后创建自己的线程并在完成后终止它们。

编辑：关于一些考虑，我将线程池用于数据库访问、物理/模拟、AI（游戏）以及在处理大量用户定义任务的虚拟机上运行的脚本任务。

通常，一个池由每个处理器 2 个线程组成（现在可能是 4 个），但是如果您知道需要多少线程，您可以设置所需的线程数量。

编辑：创建自己的线程的原因是因为上下文的变化，（那是当线程需要交换进出进程以及它们的内存时）。有无用的上下文更改，比如当你不使用你的线程时，只是让它们像人们所说的那样闲置，很容易使你的程序性能减半（比如你有 3 个休眠线程和 2 个活动线程）。因此，如果那些下载线程只是在等待，它们会消耗大量 CPU 并为您的实际应用程序冷却缓存

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-09-28T06:13:51.530

这是.Net中线程池的一个很好的总结：http: [//blogs.msdn.com/pedram/archive/2007/08/05/dedicated-thread-or-a-threadpool-thread.aspx](http://blogs.msdn.com/pedram/archive/2007/08/05/dedicated-thread-or-a-threadpool-thread.aspx)

该帖子还说明了何时不应使用线程池而应启动自己的线程。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2010-09-29T14:09:37.757

我强烈推荐阅读这本免费的电子书： [Joseph Albahari 的 C# 线程](http://www.albahari.com/threading/)

*至少*阅读“入门”部分。这本电子书提供了很好的介绍，还包括大量高级线程信息。

知道是否使用线程池只是开始。接下来，您将需要确定哪种进入线程池的方法最适合您的需求：

*   任务并行库 (.NET Framework 4.0)
*   ThreadPool.QueueUserWorkItem
*   异步委托
*   后台工作者

这本电子书解释了所有这些，并建议何时使用它们与创建自己的线程。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-28T07:27:18.127

线程池旨在减少线程之间的上下文切换。考虑一个运行多个组件的进程。这些组件中的每一个都可以创建工作线程。进程中的线程越多，在上下文切换上浪费的时间就越多。

现在，如果这些组件中的每一个都将项目排队到线程池中，那么上下文切换开销就会少得多。

线程池旨在最大化跨 CPU（或 CPU 内核）完成的工作。这就是为什么默认情况下，线程池会为每个处理器启动多个线程。

在某些情况下，您不想使用线程池。如果您正在等待 I/O，或等待事件等，那么您会占用该线程池线程，并且其他任何人都无法使用它。同样的想法也适用于长期运行的任务，尽管构成长期运行的任务是主观的。

Pax Diablo 也提出了一个很好的观点。旋转线程不是免费的。这需要时间，并且它们会为堆栈空间消耗额外的内存。线程池将重用线程来分摊这个成本。

注意：您询问了有关使用线程池线程下载数据或执行磁盘 I/O 的问题。您不应该为此使用线程池线程（出于我上面概述的原因）。而是使用异步 I/O（又名 BeginXX 和 EndXX 方法）。对于`FileStream`那将是`BeginRead`and `EndRead`。对于`HttpWebRequest`那将是`BeginGetResponse`and `EndGetResponse`。它们使用起来更复杂，但它们是执行多线程 I/O 的正确方法。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-30T10:59:15.477

当心 .NET 线程池中的操作可能会阻塞其处理的任何重要、可变或未知部分，因为它容易出现线程饥饿。考虑使用 .NET 并行扩展，它为线程操作提供了大量的逻辑抽象。它们还包括一个新的调度程序，这应该是对 ThreadPool 的改进。看[这里](http://blogs.msdn.com/pfxteam/archive/2008/06/02/8567093.aspx)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-28T13:38:32.633

仅将线程池用于小任务的一个原因是线程池线程的数量有限。如果一个被使用了很长时间，那么它会阻止该线程被其他代码使用。如果这种情况发生很多次，那么线程池可能会被用完。

用完线程池可能会产生微妙的影响——例如，一些 .NET 计时器使用线程池线程并且不会触发。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-28T13:47:55.543

如果您的后台任务会存在很长时间，例如应用程序的整个生命周期，那么创建自己的线程是合理的事情。如果您有需要在线程中完成的短作业，请使用线程池。

在创建许多线程的应用程序中，创建线程的开销会变得很大。使用线程池创建线程一次并重用它们，从而避免线程创建开销。

在我处理的一个应用程序中，从创建线程更改为使用线程池来处理短期线程确实有助于提高应用程序的吞吐量。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-27T15:42:54.570

为了获得并发执行单元的最高性能，请编写您自己的线程池，其中一个线程对象池在启动时创建并进入阻塞（以前暂停），等待上下文运行（具有由实现的标准接口的对象你的代码）。

很多关于任务、线程和 .NET 线程池的文章都未能真正为您提供做出性能决定所需的内容。但是当你比较它们时，线程会胜出，尤其是线程池。它们在 CPU 中分布得最好，而且启动速度更快。

需要讨论的是Windows（包括Windows 10）的主要执行单元是线程，OS上下文切换开销通常可以忽略不计。简而言之，我一直无法找到其中许多文章的令人信服的证据，无论是文章声称通过节省上下文切换或更好的 CPU 使用来获得更高的性能。

现在有点现实主义：

我们中的大多数人不需要我们的应用程序是确定性的，而且我们中的大多数人都没有使用线程的硬知识背景，例如开发操作系统时经常会出现这种情况。我上面写的不适合初学者。

所以可能最重要的是讨论什么是易于编程的。

如果您创建自己的线程池，您将需要编写一些内容，因为您需要关注跟踪执行状态、如何模拟挂起和恢复以及如何取消执行——包括在应用程序范围内关闭。您可能还必须关心是否要动态增长池以及池将具有哪些容量限制。我可以在一个小时内写出这样一个框架，但那是因为我已经做过很多次了。

也许编写执行单元的最简单方法是使用任务。任务的美妙之处在于您可以创建一个并在代码中内联启动它（尽管可能需要谨慎）。当你想取消任务时，你可以传递一个取消令牌来处理。此外，它使用 Promise 方法链接事件，您可以让它返回特定类型的值。此外，使用 async 和 await，存在更多选项，并且您的代码将更具可移植性。

从本质上讲，了解 Tasks vs. Threads vs. .NET ThreadPool 的优缺点很重要。如果我需要高性能，我将使用线程，并且我更喜欢使用自己的池。

一个简单的比较方法是启动 512 个线程、512 个任务和 512 个线程池线程。您会发现 Threads 开始时会出现延迟（因此，为什么要编写线程池），但所有 512 个线程将在几秒钟内运行，而 Tasks 和 .NET ThreadPool 线程则需要几分钟才能全部启动。

以下是此类测试的结果（i5 四核，16 GB RAM），每运行 30 秒。执行的代码在 SSD 驱动器上执行简单的文件 I/O。

[测试结果](https://i.stack.imgur.com/ElG9s.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-28T06:07:46.350

当您要处理的任务多于可用线程时，线程池非常有用。

您可以将所有任务添加到线程池中，并指定在某个时间可以运行的最大线程数。

在 MSDN 上查看[此](http://msdn.microsoft.com/en-us/library/3dasc8as(VS.80).aspx)页面：http: [//msdn.microsoft.com/en-us/library/3dasc8as (VS.80).aspx](http://msdn.microsoft.com/en-us/library/3dasc8as(VS.80).aspx)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-28T06:08:25.040

如果可以，请始终使用线程池，尽可能在最高抽象级别上工作。线程池为您隐藏创建和销毁线程，这通常是一件好事！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-28T08:01:06.780

大多数情况下，您可以使用池来避免创建线程的昂贵过程。

但是在某些情况下，您可能想要创建一个线程。例如，如果您不是唯一使用线程池的人，并且您创建的线程是长期存在的（以避免消耗共享资源），或者例如，如果您想控制线程的堆栈大小。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-06-26T05:48:24.447

不要忘记调查后台工作人员。

我发现在很多情况下，它给了我我想要的东西，而不需要繁重的工作。

干杯。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-16T13:42:47.570

每当我需要在另一个线程上做某事并且并不真正关心它何时运行或结束时，我通常会使用线程池。诸如日志记录甚至后台下载文件之类的东西（尽管有更好的方法可以实现异步风格）。当我需要更多控制时，我会使用自己的线程。我还发现，当我有多个需要在 >1 线程中处理的命令时，使用 Threadsafe 队列（破解你自己的）来存储“命令对象”很好。因此，您可能会拆分一个 Xml 文件并将每个元素放入一个队列中，然后让多个线程对这些元素进行一些处理。我在 uni (VB.net!) 中写了一个这样的队列方式，我已经转换为 C#。我没有特别的原因将它包含在下面（此代码可能包含一些错误）。

```
using System.Collections.Generic;
using System.Threading;

namespace ThreadSafeQueue {
    public class ThreadSafeQueue<T> {
        private Queue<T> _queue;

        public ThreadSafeQueue() {
            _queue = new Queue<T>();
        }

        public void EnqueueSafe(T item) {
            lock ( this ) {
                _queue.Enqueue(item);
                if ( _queue.Count >= 1 )
                    Monitor.Pulse(this);
            }
        }

        public T DequeueSafe() {
            lock ( this ) {
                while ( _queue.Count <= 0 )
                    Monitor.Wait(this);

                return this.DeEnqueueUnblock();

            }
        }

        private T DeEnqueueUnblock() {
            return _queue.Dequeue();
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2010-02-08T03:44:21.660

我想要一个线程池以尽可能少的延迟在内核之间分配工作，并且不必与其他应用程序很好地配合。我发现 .NET 线程池的性能并没有达到应有的水平。我知道我希望每个核心有一个线程，所以我编写了自己的线程池替代类。[该代码是作为对此处](https://stackoverflow.com/questions/2215911/how-can-i-most-effectively-take-advantage-of-multiple-cores-for-short-computation/2218329#2218329)另一个 StackOverflow 问题的回答而提供的。

至于最初的问题，线程池对于将重复计算分解成可以并行执行的部分很有用（假设它们可以在不改变结果的情况下并行执行）。手动线程管理对于 UI 和 IO 等任务很有用。

# c# - .NET 应用程序中的最大线程数？

> ID：145312
> 
> 赞同：151
> 
> 时间：2008-09-28T06:05:50.740
> 
> 标签：c#, .net, multithreading

您可以在 C# 应用程序中创建的最大线程数是多少？当你达到这个限制时会发生什么？是否抛出了某种异常？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2008-09-28T06:13:26.167

没有固有的限制。最大线程数由可用的物理资源量决定。有关详细信息，请参阅[Raymond Chen](https://devblogs.microsoft.com/oldnewthing/20050729-14/?p=34773)的这篇文章。

如果您需要询问最大线程数是多少，您可能做错了什么。

[**更新**：只是出于兴趣：.NET 线程池默认线程数：

*   Framework 4.0（32 位环境）中的 1023
*   Framework 4.0（64 位环境）中的 32767
*   框架 3.5 中每个核心 250
*   Framework 2.0 中每个核心 25 个

（这些数字可能因硬件和操作系统而异）]

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-09-28T07:19:59.517

米奇是对的。这取决于资源（内存）。

尽管 Raymond 的文章专门针对 Windows 线程，而不是针对 C# 线程，但逻辑应用相同（C# 线程映射到 Windows 线程）。

但是，就像我们在 C# 中一样，如果我们想要完全精确，我们需要区分“已启动”和“未启动”线程。只有启动的线程才会真正保留堆栈空间（正如我们所料）。未启动的线程仅分配线程对象所需的信息（如果对实际成员感兴趣，可以使用反射器）。

您实际上可以自己测试它，比较：

```
 static void DummyCall()
    {
        Thread.Sleep(1000000000);
    }

    static void Main(string[] args)
    {
        int count = 0;
        var threadList = new List<Thread>();
        try
        {
            while (true)
            {
                Thread newThread = new Thread(new ThreadStart(DummyCall), 1024);
                newThread.Start();
                threadList.Add(newThread);
                count++;
            }
        }
        catch (Exception ex)
        {
        }
    } 
```

和：

```
 static void DummyCall()
    {
        Thread.Sleep(1000000000);
    }

    static void Main(string[] args)
    {
        int count = 0;
        var threadList = new List<Thread>();
        try
        {
            while (true)
            {
                Thread newThread = new Thread(new ThreadStart(DummyCall), 1024);
                threadList.Add(newThread);
                count++;
            }
        }
        catch (Exception ex)
        {
        }
    } 
```

在 VS 中的异常（当然是内存不足）中放一个断点来查看计数器的值。当然，有一个非常显着的区别。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-11T20:56:22.747

我在带有 c# 控制台的 64 位系统上进行了测试，例外是内存不足类型，使用 2949 个线程。

I realize we should be using threading pool, which I do, but this answer is in response to the main question ;)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-07-04T23:00:41.833

您应该使用线程池（或异步委托，后者反过来使用线程池），以便系统可以决定应该运行多少线程。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-12-27T10:59:58.503

I would recommend running ThreadPool.GetMaxThreads method in debug

```
ThreadPool.GetMaxThreads(out int workerThreadsCount, out int ioThreadsCount); 
```

Docs and examples: [https://docs.microsoft.com/en-us/dotnet/api/system.threading.threadpool.getmaxthreads?view=netframework-4.8](https://docs.microsoft.com/en-us/dotnet/api/system.threading.threadpool.getmaxthreads?view=netframework-4.8)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-28T06:16:37.593

Jeff Richter 在 CLR 中通过 C#：

“在 CLR 2.0 版本中，机器中每个 CPU 的最大工作线程数默认为 25 个，而最大 I/O 线程数默认为 1000。1000 的限制实际上根本没有限制。”

请注意，这是基于 .NET 2.0。这在 .NET 3.5 中可能已经改变。

[编辑] 正如@Mitch 所指出的，这是特定于 CLR 线程池的。如果您要直接创建线程，请查看@Mitch 和其他评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-22T21:28:03.603

You can **test** it by using this snipped code:

```
private static void Main(string[] args)
{
   int threadCount = 0;
   try
   {
      for (int i = 0; i < int.MaxValue; i ++)
      {
         new Thread(() => Thread.Sleep(Timeout.Infinite)).Start();
         threadCount ++;
      }
   }
   catch
   {
      Console.WriteLine(threadCount);
      Console.ReadKey(true);
   }
} 
```

Beware of 32-bit and 64-bit mode of application.

# macos - 如何设置 OS X 终端的默认主页？

> ID：145321
> 
> 赞同：8
> 
> 时间：2008-09-28T06:12:01.083
> 
> 标签：macos, terminal, bootcamp

由于某种原因，在我安装了 Boot Camp 之后，我的 os x 终端开始默认指向 Boot Camp 驱动器，而不是我的 os x 主目录！一旦进入终端，我就知道如何来回切换并且能够做到这一点，但我想知道如何让我的终端默认回到我的 os x 主文件夹？

我在系统偏好设置->帐户->控制下检查了我的主目录-单击我的帐户，它指向正确的位置。我也试过卸载它没有运气。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-28T06:23:29.603

这有点在幕后摆弄，但您可以简单地输入

```
cd <directory>

in /Users/<yourUserName>/.profile 
```

并启动一个新的终端。然后你应该在你想要的目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T06:18:08.790

您可能需要这些关于如何使用命令行的说明：

[https://superuser.com/questions/154193/setting-a-users-home-directory-on-mac-os-x-server-from-the-command-line](https://superuser.com/questions/154193/setting-a-users-home-directory-on-mac-os-x-server-from-the-command-line)

基本上，使用**dscl**命令行工具来查看系统认为您的主目录设置为什么，或者尝试重置它....

# asp.net - WebFocus - 是否有免费/开源的替代方案？

> ID：145322
> 
> 赞同：0
> 
> 时间：2008-09-28T06:13:00.643
> 
> 标签：asp.net, olap

[WebFOCUS](http://en.wikipedia.org/wiki/WebFOCUS)的免费/开源替代品是什么？

是否有从 OLAP 多维数据集获取信息的 ASP.NET 方式？

**更新：**我选择了 Magnus Smith 的答案作为正确答案，但[Alexmac 的答案](https://stackoverflow.com/questions/145322/webfocus-is-there-a-freeopen-source-alternative#145467)也非常好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T08:14:02.583

我不知道免费的分析套件。但是你想要完成的是什么？

您可以通过 ADO.net 使用 MDX 查询来查询 OLAP 多维数据集。

[http://msdn.microsoft.com/en-us/library/ms144785.aspx](http://msdn.microsoft.com/en-us/library/ms144785.aspx)

例如，您可以将结果绑定到数据网格。MDX 有点像 SQL，但要小心，因为它有几个语法差异。我认为 Excel 有一个查询工具，可用于以图形方式构建查询，这很有帮助。

在相关说明中查看 SQL 报告服务。使用 SQL express，您可以使用精简版的 sql 报告服务，它可以完成您想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-20T18:31:48.530

注意，MDX 很糟糕——尽管看起来像 SQL，但它一点也不像 SQL。

您可以获得一个 .NET 控件来在网页上显示 OLAP 数据。我们公司测试了一款来自 Dundas 的产品，它还可以。不过我从来没有参与过，所以我不知道它是出色的还是仅仅是可用的。 [http://www.dundas.com/Gallery/Chart/NET/index.aspx?ImgGroup=OLAP](http://www.dundas.com/Gallery/Chart/NET/index.aspx?ImgGroup=OLAP)

我们放弃了 SQL Reporting Services，因为它不适合 Internet 使用（虽然在 Intranet 上很好）。

# windows - 什么是符合此条件的 Windows 文本编辑器

> ID：145327
> 
> 赞同：6
> 
> 时间：2008-09-28T06:15:32.447
> 
> 标签：windows, text-editor

我的情况：我喜欢[电子编辑器](http://www.e-texteditor.com)，但是我在一台新电脑上，我的许可证正在我的旧电脑上使用。我买不起另一个许可证，所以我正在寻找符合以下条件的免费编辑器：

*   体面的语法突出显示
*   能够在侧面板上查看目录及其内容，*而*无需将其创建为“项目” **（非常重要）**
*   易于主题化（我喜欢深色主题）
*   标签

也很好：

*   S/FTP 支持
*   代码片段/包
*   多行编辑

而且不是（*简单列出是因为它们是常见的建议，但我已经尝试过但没有发现它们符合我的标准*）：

*   Vim/Emacs
*   记事本++
*   深红色/翡翠编辑器
*   程序员的记事本
*   写字板/记事本：P

谢谢。哦，作为参考，这是我当前设置的图片：[链接](http://screencast.com/t/ftyoxrg05v)

**编辑**：感谢所有建议的人。所有 3 个（JEdit、Cream 和 PsPad）对于任何查看此线程的人来说都是可靠的候选者。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-28T06:20:53.917

您愿意花费所有这些时间和精力询问和评估几乎肯定不会具有您想要的所有功能的其他编辑器，但您不能花 35 美元购买另一个许可证吗？

当我做出这样的决定时，我总是以每小时 100 美元来衡量我的时间，所以如果这要花我 20 多分钟的时间，我会再买一个许可证。

时间是你无法挽回的一种商品；你总是可以赚更多的钱...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T06:19:27.383

你可能会对此嗤之以鼻，但[Cream](http://cream.sourceforge.net/)是 Vim 的一个非常不像 Vim 的分支。这是[一篇](http://alexyoung.org/articles/show/12/vim_for_textmate_fans)专为想要尝试的Textmate（和e）粉丝编写的文章。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-28T06:23:14.287

[杰迪特](http://www.jedit.org/)_ 我相信它可以完成您愿望清单上的所有事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-28T06:19:51.813

[平板电脑](http://www.pspad.com/)。优秀的自由文本代码编辑器。

还可以像在本地文件夹中一样进行基于 FTP 站点的编辑。非常便利。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-28T06:45:55.587

> 当您注册 e 时，许可证将绑定到您，而不是一台特定的计算机。这意味着您可以在任意数量的计算机上使用您的许可证。平台也没有限制，因此它也适用于 Linux 或任何其他操作系统的未来版本。

[http://e-texteditor.com/blog/2007/licensing](http://e-texteditor.com/blog/2007/licensing)

无需购买其他许可证！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T06:24:18.137

在这里选择你的毒药：[http ://en.wikipedia.org/wiki/Comparison_of_text_editors](http://en.wikipedia.org/wiki/Comparison_of_text_editors)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-28T07:30:39.490

我想推荐Gedit。有[Windows 版本](http://live.gnome.org/Gedit/Windows)。

我从未使用过 Mac，但我认为 Textmate 一定是最好的文本编辑器。当我在 Windows 上时，我真的很喜欢电子文本编辑器。但后来，我必须转向 Linux（Ubuntu）以满足需求。我搜索了 Textmate/e-Text 编辑器，例如 Linux 的文本编辑器。

我发现，Gedit 不是一个坏的。这是[我的Gedit](http://www.novasteps.com/Screenshot-1.png) ...

根据您的要求，Gedit 已经有了不错的语法高亮和 Tab。我认为没有项目窗格，但文档列表和文件浏览器组合还不错。

容易主题化？Gedit 没有很多现成的主题。但是您可以通过基于默认主题创建 xml 颜色方案来轻松创建自己的主题（在 ubuntu 8.04 中，默认主题目录是 /usr/share/gtksourceview-2.0/styles）。

对我来说，嵌入式终端、单词完成和代码片段也很重要。Gedit 为这些功能提供了大量有用的插件。

Gedit有很多[定制](http://grigio.org/textmate_gedit_few_steps) [教程](http://www.micahcarrick.com/09-29-2007/gedit-html-editor.html)。您可能需要花时间进行定制。:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-28T08:04:03.247

尝试 Komodo 编辑，它是免费的，可以做你提到的事情 afaik。

[http://activestate.com/Products/komodo_ide/komodo_edit.mhtml](http://activestate.com/Products/komodo_ide/komodo_edit.mhtml)

侧边栏文件夹功能称为“实时文件夹”，位于右侧栏。它还具有 vi 仿真、深色主题、选项卡、sftp 支持等。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-28T08:09:37.743

您可能还想看看[EditPlus](http://www.editplus.com)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-31T01:58:47.697

e 文本编辑器许可证是每个用户而不是每台机器。因此，您无需购买另一个许可证即可在不同的机器上使用它，只需复制许可证即可。

# terminal - 如何使 rxvt 系列终端的颜色变亮？

> ID：145335
> 
> 赞同：0
> 
> 时间：2008-09-28T06:22:30.217
> 
> 标签：terminal, colors, rxvt

我知道如何减轻某些命令的颜色，但是我想减轻所有命令的标准 ansi 颜色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-28T08:00:05.537

我在这里找到了为 Xterm 和 aterm 执行此操作的说明：

[http://gentoo-wiki.com/TIP_Linux_Colors_in_Aterm/rxvt](http://gentoo-wiki.com/TIP_Linux_Colors_in_Aterm/rxvt)

通过添加以下内容，我能够获得更亮的颜色：

```
rxvt*background:  #000000
rxvt*foreground:  #7f7f7f
rxvt*color0:      #000000
rxvt*color1:      #9e1828
rxvt*color2:      #aece92
rxvt*color3:      #968a38
rxvt*color4:      #414171
rxvt*color5:      #963c59
rxvt*color6:      #418179
rxvt*color7:      #bebebe
rxvt*color8:      #666666
rxvt*color9:      #cf6171
rxvt*color10:     #c5f779
rxvt*color11:     #fff796
rxvt*color12:     #4186be
rxvt*color13:     #cf9ebe
rxvt*color14:     #71bebe
rxvt*color15:     #ffffff 
```

到我`~/.Xdefaults`文件的底部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T07:29:24.580

一个简单的解决方案是调高显示器亮度 :)

[更严重的是，请参阅手册](http://seth.positivism.org/man.cgi/rxvt)的资源部分。

# php - 检查数组是否是多维的？

> ID：145337
> 
> 赞同：154
> 
> 时间：2008-09-28T06:23:12.897
> 
> 标签：php, arrays, loops, multidimensional-array, element

1.  **检查数组是原始值的平面数组**还是**多维数组**的最有效方法是什么？
2.  有没有办法做到这一点，而无需实际循环遍历数组并`is_array()`在其每个元素上运行？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2009-06-15T05:33:45.783

使用 count() 两次；一次在默认模式下，一次在递归模式下。如果值匹配，则数组*不是*多维的，因为多维数组将具有更高的递归计数。

```
if (count($array) == count($array, COUNT_RECURSIVE)) 
{
  echo 'array is not multidimensional';
}
else
{
  echo 'array is multidimensional';
} 
```

此选项的第二个值`mode`是在 PHP 4.2.0 中添加的。来自[PHP 文档](http://us.php.net/count)：

> 如果可选模式参数设置为 COUNT_RECURSIVE（或 1），count() 将递归地对数组进行计数。这对于计算多维数组的所有元素特别有用。count() 不检测无限递归。

但是这种方法检测不到`array(array())`。

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2008-09-28T06:29:31.087

简短的回答是不，如果“第二维度”可以在任何地方，你至少不能隐式循环。如果它必须在第一个项目中，你就这样做

```
is_array($arr[0]); 
```

但是，我能找到的最有效的通用方法是在数组上使用 foreach 循环，只要找到命中就短路（至少隐式循环比直接 for() 更好）：

```
$ more multi.php
<?php

$a = array(1 => 'a',2 => 'b',3 => array(1,2,3));
$b = array(1 => 'a',2 => 'b');
$c = array(1 => 'a',2 => 'b','foo' => array(1,array(2)));

function is_multi($a) {
    $rv = array_filter($a,'is_array');
    if(count($rv)>0) return true;
    return false;
}

function is_multi2($a) {
    foreach ($a as $v) {
        if (is_array($v)) return true;
    }
    return false;
}

function is_multi3($a) {
    $c = count($a);
    for ($i=0;$i<$c;$i++) {
        if (is_array($a[$i])) return true;
    }
    return false;
}
$iters = 500000;
$time = microtime(true);
for ($i = 0; $i < $iters; $i++) {
    is_multi($a);
    is_multi($b);
    is_multi($c);
}
$end = microtime(true);
echo "is_multi  took ".($end-$time)." seconds in $iters times\n";

$time = microtime(true);
for ($i = 0; $i < $iters; $i++) {
    is_multi2($a);
    is_multi2($b);
    is_multi2($c);
}
$end = microtime(true);
echo "is_multi2 took ".($end-$time)." seconds in $iters times\n";
$time = microtime(true);
for ($i = 0; $i < $iters; $i++) {
    is_multi3($a);
    is_multi3($b);
    is_multi3($c);
}
$end = microtime(true);
echo "is_multi3 took ".($end-$time)." seconds in $iters times\n";
?>

$ php multi.php
is_multi  took 7.53565130424 seconds in 500000 times
is_multi2 took 4.56964588165 seconds in 500000 times
is_multi3 took 9.01706600189 seconds in 500000 times 
```

隐式循环，但是一旦找到匹配项我们就不能短路...

```
$ more multi.php
<?php

$a = array(1 => 'a',2 => 'b',3 => array(1,2,3));
$b = array(1 => 'a',2 => 'b');

function is_multi($a) {
    $rv = array_filter($a,'is_array');
    if(count($rv)>0) return true;
    return false;
}

var_dump(is_multi($a));
var_dump(is_multi($b));
?>

$ php multi.php
bool(true)
bool(false) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2008-09-29T21:02:18.860

对于 PHP 4.2.0 或更新版本：

```
function is_multi($array) {
    return (count($array) != count($array, 1));
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-05-10T18:16:29.323

我认为这是最直接的方式，也是最先进的：

```
function is_multidimensional(array $array) {
    return count($array) !== count($array, COUNT_RECURSIVE);
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-03-22T17:28:42.370

你可以简单地执行这个：

```
if (count($myarray) !== count($myarray, COUNT_RECURSIVE)) return true;
else return false; 
```

如果可选的 mode 参数设置为`COUNT_RECURSIVE`（或 1），count() 将递归地对数组进行计数。这对于计算多维数组的所有元素特别有用。

如果相同，则意味着任何地方都没有子级别。简单快捷！

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-28T06:25:25.933

您可以检查`is_array()`第一个元素，假设如果数组的第一个元素是数组，那么其余元素也是。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-04-11T10:47:47.473

在 PHP 7 之后，您可以简单地执行以下操作：

```
public function is_multi(array $array):bool
{
    return is_array($array[array_key_first($array)]);
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-07-26T02:22:15.703

所有很好的答案......这是我一直在使用的三行

```
function isMultiArray($a){
    foreach($a as $v) if(is_array($v)) return TRUE;
    return FALSE;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-28T06:26:18.100

此函数将返回数组维度的 int 数（从[此处](http://theserverpages.com/php/manual/en/ref.array.php)窃取）。

```
function countdim($array)
{
   if (is_array(reset($array))) 
     $return = countdim(reset($array)) + 1;
   else
     $return = 1;

   return $return;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-06-10T11:37:12.027

我想你会发现这个函数是最简单、最有效、最快的方法。

```
function isMultiArray($a){
    foreach($a as $v) if(is_array($v)) return TRUE;
    return FALSE;
} 
```

你可以像这样测试它：

```
$a = array(1 => 'a',2 => 'b',3 => array(1,2,3));
$b = array(1 => 'a',2 => 'b');

echo isMultiArray($a) ? 'is multi':'is not multi';
echo '<br />';
echo isMultiArray($b) ? 'is multi':'is not multi'; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-04-13T13:17:26.997

即使这样也有效

```
is_array(current($array)); 
```

如果为**假**，则为**单维**数组，如果为**真**，则为**多维**数组。

**current将为您提供数组的第一个元素，并通过****is_array**函数检查第一个元素是否为数组。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-02-25T16:06:41.770

不要使用 COUNT_RECURSIVE

[点击此网站了解原因](https://pageconfig.com/post/checking-multidimensional-arrays-in-php)

使用 rsort 然后使用 isset

```
function is_multi_array( $arr ) {
rsort( $arr );
return isset( $arr[0] ) && is_array( $arr[0] );
}
//Usage
var_dump( is_multi_array( $some_array ) ); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-25T05:51:30.200

你也可以像这样做一个简单的检查：

```
$array = array('yo'=>'dream', 'mydear'=> array('anotherYo'=>'dream'));
$array1 = array('yo'=>'dream', 'mydear'=> 'not_array');

function is_multi_dimensional($array){
    $flag = 0;
    while(list($k,$value)=each($array)){
        if(is_array($value))
            $flag = 1;
    }
    return $flag;
}
echo is_multi_dimensional($array); // returns 1
echo is_multi_dimensional($array1); // returns 0 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-04-01T19:25:47.903

尝试如下

```
if (count($arrayList) != count($arrayList, COUNT_RECURSIVE)) 
{
  echo 'arrayList is multidimensional';

}else{

  echo 'arrayList is no multidimensional';
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-03-27T10:41:32.377

就我而言。我陷入了各种奇怪的状态。
第一种情况 =`array("data"=> "name");`
第二种情况 =`array("data"=> array("name"=>"username","fname"=>"fname"));`
但是如果`data`有数组而不是值，则 sizeof() 或 count() 函数不适用于这种情况。然后我创建自定义函数来检查。
如果数组的第一个索引有值，那么它返回“唯一值”
但是如果索引有数组而不是值，那么它返回“有数组”
我用这种方式

```
 function is_multi($a) {
        foreach ($a as $v) {
          if (is_array($v)) 
          {
            return "has array";
            break;
          }
          break;
        }
        return 'only value';
    } 
```

特别感谢[Vinko Vrsalovic](https://stackoverflow.com/questions/145337/checking-if-array-is-multidimensional-or-not/145348#145348)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-10-17T00:30:10.260

我认为这个很优雅（对另一个我不知道他的用户名的用户的道具）：

```
static public function isMulti($array)
{
    $result = array_unique(array_map("gettype",$array));

    return count($result) == 1 && array_shift($result) == "array";
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-04T10:17:11.660

以上所有方法都过于复杂，无法快速推出。如果数组是平面的，测试第一个元素应该返回一个原始元素，例如 int、string 等。如果它是多维的，它应该返回一个数组。通过扩展，您可以快速而整洁地使用这一衬里。

```
echo is_array(array_shift($myArray)); 
```

如果返回 true，则数组是多维的。否则它是平的。请注意，数组很少有不同的维度，例如，如果您从模型生成数据，它将始终具有可以被循环遍历的相同类型的多维或平面结构。 [![机器制造的循环](https://i.stack.imgur.com/nsUWA.png)](https://i.stack.imgur.com/nsUWA.png) 如果不是，那么您已经手动定制了它，这意味着您知道所有内容将在哪里并且它可以正常工作而无需编写循环算法 [![在此处输入图像描述](https://i.stack.imgur.com/LY5OD.png)](https://i.stack.imgur.com/LY5OD.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-04-01T19:19:48.463

除了前面的答案之外，还取决于您要检查的数组的架构：

```
function is_multi_array($array=[],$mode='every_key'){

    $result = false;

    if(is_array($array)){

        if($mode=='first_key_only'){

            if(is_array(array_shift($array))){

                $result = true;
            }
        }
        elseif($mode=='every_key'){

            $result = true;

            foreach($array as $key => $value){

                if(!is_array($value)){

                    $result = false;
                    break;
                }
            }
        }
        elseif($mode=='at_least_one_key'){

            if(count($array)!==count($array, COUNT_RECURSIVE)){

                $result = true; 
            }
        }
    }

    return $result;
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-01-28T13:27:23.990

它很简单

```
$isMulti = !empty(array_filter($array, function($e) {
                    return is_array($e);
                })); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-24T06:33:18.107

```
$is_multi_array = array_reduce(array_keys($arr), function ($carry, $key) use ($arr) { return $carry && is_array($arr[$key]); }, true); 
```

这是一个很好的衬里。它遍历每个键以检查该键的值是否为数组。这将确保真实

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-02-28T11:39:11.913

```
if($array[0]){
//enter your code 
} 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2015-03-25T17:09:36.710

```
if ( array_key_exists(0,$array) ) {

// multidimensional array

}  else {

// not a multidimensional array

} 
```

*仅适用于具有数字索引的数组

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2010-12-01T18:09:21.097

```
function isMultiArray(array $value)
{
    return is_array(reset($value));
} 
```

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2018-10-05T16:27:09.207

本机 print_r 函数返回人类可读的字符串。只需计算“数组”实例。

尝试...

```
substr_count(print_r([...array...], true), 'Array') > 1;

$a = array(1 => 'a',2 => 'b',3 => array(1,2,3));
$b = array(1 => 'a',2 => 'b');
$c = array(1 => 'a',2 => 'b','foo' => array(1,array(2)));
$d = array(array());
$e = array(1, array());
$f = array(array(), array());
$g = array("hello", "hi" => "hi there");
$h[] = $g;

var_dump(substr_count(print_r($a, true), 'Array') > 1);
...

//a: bool(true)
//b: bool(false)
//c: bool(true)
//d: bool(true)
//e: bool(true)
//f: bool(true)
//g: bool(false)
//h: bool(true) 
```

在我的盒子上，“is_multi 在 500000 次中花费了 0.83681297302246 秒”

礼貌：Ruach HaKodesh

* * *

## 回答 #25

> 赞同：-3
> 
> 时间：2010-06-11T14:25:59.813

```
is_array($arr[key($arr)]); 
```

没有循环，简单明了。

不仅可以与不能包含 0 的数字数组一起使用，还可以与关联数组一起使用（就像在前面的示例中一样，如果数组没有 0，则会向您发出警告。）

# c++ - C/C++ 的广泛执行

> ID：145350
> 
> 赞同：4
> 
> 时间：2008-09-28T06:29:59.900
> 
> 标签：c++, c, exec, wchar-t

是否有（即用作路径和参数的`wchar_t`版本）？在，我可以做，但是在，我被卡住了（即没有纯粹的等价物）。我正在尝试为我的程序添加支持（自动运行）。`exec[lv][pe]``exec``wchar_t``wchar_t``Windows``CreateProcessW(process, cmdline)``*nix``POSIX``UTF-16`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T06:33:39.207

那没有。在 UNIX 中，习惯上在与环境交互时使用 UTF-8。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-24T08:46:47.163

但是有一个问题：UNIX/Linux 上的文件系统与编码无关。所有文件名都只是“一堆字节”

因此，如果我执行 LANG=ja_JAP.EUC_JP，创建一个具有日文名称的文件，然后执行 LANG=ja_JP.UTF8，当我查看我的文件名时会看起来像垃圾，并且它将是无效的 UTF-8 字符串.

你可能会说：为什么要这么做？但是想象一下，你有一个被数百名国际用户使用的系统，每个用户都使用俄语/中文/韩语/阿拉伯语文件，你必须编写一个备份应用程序:-(

“解决方案”是要求每个人将语言环境设置为 something.UTF8，但这只是一个约定，系统本身并不强制执行任何操作。

# macos - 将自定义日志位置添加到 OS X 控制台应用程序

> ID：145354
> 
> 赞同：27
> 
> 时间：2008-09-28T06:34:37.970
> 
> 标签：macos, logging, console

在线搜索后，到目前为止我发现的最佳解决方案是在“/Library/logs/”或“~/Library/logs/”中创建一个符号链接，使其显示在控制台应用程序中。

我想知道是否可以直接在控制台的“日志文件”部分下将新目录或日志文件添加到“根”级别。

这是一个快速截图：

![OS X 控制台](https://i.stack.imgur.com/0QsJz.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-02-07T02:33:18.393

有一种方法可以让您的日志文件进入控制台。

您可以将符号链接添加到日志文件或将日志目录添加到列表中的目录之一。该目录`~/Library/Logs`似乎是添加您自己的日志文件的合理选择。

* * *

对我自己来说，我想要轻松访问 apache2 日志。[我使用macports](http://www.macports.org/)安装了 apache2 ，默认日志文件位于`/opt/local/apache2/logs`.

因此，我所做的只是创建指向该目录的符号链接。

```
# cd ~/Library/Logs
# ln -s /opt/local/apache2/logs/ apache2 
```

现在我可以轻松地使用 console.app 来获取日志。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-22T16:40:53.773

我的 macOS Sierra 解决方案：

第一步和最后一步，您必须创建一个从源（日志）目录到（例如）现有官方日志目录之一的硬链接，您可以在 console.app 中看到。

我为此拿了我的`~/Library/Logs`目录。

`hln /usr/local/var/log /Users/dierk/Library/Logs/_usr_local_var_log`

*交叉发布这个[伟大的工具，用于创建](https://stackoverflow.com/a/5118678/195835)最初由[Sam](https://stackoverflow.com/users/634331/sam)发布的硬链接。*

**简短介绍：**

要安装 Hardlink，请确保您已安装自制软件，然后运行：

`brew install hardlink-osx`

安装后，创建一个硬链接：

`hln [source] [destination]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-08-27T06:30:40.490

实际上，我刚刚遇到了这个对我来说非常有用的选项：

实际上，如果您打开终端并...

$ cd /库/日志

然后符号链接到您的新日志目录。例如，我希望我的 chroot'ed apache 日志为“www”

$ ln -s /chroot/apache/private/var/log www

然后重新打开 Console.app

深入到 /Library/Logs ，你会发现你的符号链接目录。

;-)

莫克利普斯。

[http://forums.macosxhints.com/showthread.php?t=35680](http://forums.macosxhints.com/showthread.php?t=35680)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-21T20:38:55.553

在终端中运行此命令...附加您要添加​​的任何日志文件目录

默认写入 com.apple.Console LogFolderPaths -array '~/Library/Logs/' '/Library/Logs/' '/var/log/' '/opt/local/var/log/'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-21T11:26:39.440

自 Mavericks 以来，符号链接行为发生了变化，因此“ln - s”不再起作用。使用[hardlink-osx](https://github.com/selkhateeb/hardlink)来创建指向您的目录的硬链接（可以通过自制软件安装）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-15T11:09:03.080

我知道非常旧的帖子，但是这是我可以让它工作的唯一方法。

```
cd /Library/Logs
sudo mkdir log_files
sudo ln -s /Users/USERNAME/Sites/website/logs/* log_files 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-06T12:49:02.333

在 mac os 10.11 中，您可能无法链接到日志文件夹，而是需要链接到侧控制台中的每个日志文件夹。

```
ln -s /opt/local/apache2/logs/error_log ~/Library/Logs/Apache2/error_log 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-08-18T06:43:09.020

您可以使用 console.app 打开任何文本文件，它会添加并保留它。文件夹虽然，还没有运气。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-08T11:07:48.967

我能够通过运行将文件硬链接到 ~/Library/logs 中：

```
ln /usr/local/var/logs/postgres.log ~/Library/logs 
```

注意没有-s。

目录虽然没有运气。OSX 塞拉利昂 10.12.6

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2011-02-11T00:11:43.307

只是试图做类似的事情。

我在终端中输入这个，而 Console.app 正在运行。

```
sudo mkdir -p /usr/local/var/log/apache2
sudo mv /private/var/log/apache2 /usr/local/var/log/apache2/apache2-old
sudo ln -s /usr/local/var/log/apache2 /private/var/log/apache2 
```

现在，每当我打开 Console.app 时，它都会崩溃。

真的希望有一种在文件中添加日志文件的方法。您可以通过将文件夹拖放到 Console.app 上来做到这一点（给它一个目录路径作为参数），但添加的文件夹仅显示其直接内容并且不允许递归下降到文件夹中。

---------在下面编辑----------

**没关系**，我愚蠢地做了这样的事情，导致 Console.app 中的无限递归

```
sudo mkdir -p /usr/local/var/log/apache2
sudo ln -s /private/var/log/apache2/apache2 /usr/local/var/log/apache2
sudo mv /private/var/log/apache2 /usr/local/var/log/apache2/apache2-old
sudo ln -s /usr/local/var/log/apache2 /private/var/log/apache2 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2008-09-28T09:42:37.503

我不相信这是可能的。

如果您正在生成日志文件，则无论如何都应该将它们生成到标准位置之一，因此这不会成为问题。

# sharepoint - 调试 SharePoint 2007 代码

> ID：145361
> 
> 赞同：5
> 
> 时间：2008-09-28T06:38:45.963
> 
> 标签：sharepoint, debugging, moss

您如何调试您的 SharePoint 2007 代码？由于 SharePoint 在远程服务器上运行，并且我在 windows xp 机器上进行开发（将必要的 .dll 文件复制到我的 GAC 中），因此我没有找到简单的调试方法。断点不起作用等。

我想出的最好方法是在 web.config 文件中启用页面跟踪，在我的代码中写入跟踪消息，并在需要调试时访问 trace.axd。

有没有人有更好的调试建议？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T06:42:46.143

来自Andrew Connell关于该主题[的博文：](http://www.andrewconnell.com/blog/archive/2008/06/11/SharePoint-Debugging-and-Logging-Tips-and-Tricks.aspx)

> 将调试器附加到 GAC 的程序集：“为什么我的断点没有被命中？！？！” 去过那里吗？我也是……那是什么皮塔饼！这是怎么回事？好吧，程序集在 GAC 中，Visual Studio 调试器看不到调试符号（又名：*.pdb）。除非您在设置所有 PDB 所在的符号存储区时遇到了麻烦，否则您需要将调试符号放在与程序集相同的位置。诀窍是在 GAC 中找到包含您的 DLL 的文件夹。
> 
> c:\windows\assembly 文件夹不是真正的文件夹，它是一个虚拟文件夹。要访问 REAL 文件夹，请执行以下操作：
> 
> *   开始运行
> *   %systemroot%\assembly\gac [ENTER]
> 
> 这将打开 GAC 文件夹。现在，四处寻找，直到找到一个看起来像这样的文件夹（您可能需要跳到一个文件夹并深入到 MSIL 文件夹）：[程序集文件名 -.DLL 扩展名][程序集版本，格式为 **> #.#。 #.#]__[程序集公钥令牌]。**
> 
> 当你找到那个文件夹时，打开它，你会看到你的程序集。将 PDB 文件复制到该文件夹​​，然后附加调试器以获得一些调试乐趣！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T15:16:33.240

最好的方法（即使是微软认可的方法）是拥有一台带有 Sharepoint 的 Windows 2003 Server 作为您的本地开发机器。

另请参阅[此主题](https://stackoverflow.com/questions/11676/creating-a-development-environment-for-sharepoint)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-29T05:25:29.407

不要将您的程序集放入 GAC，将它们放在 bin 目录中 - 然后您可以使用 VS 远程调试器。Google 创建用于分发的 .WSP 文件。

这还有一个优点，即在编译后（构建后步骤）更容易将新构建复制到服务器上，这也是提高安全性的推荐方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T07:48:47.700

我建议您使用 Sharepoint 在 Windows 2003 服务器上进行开发。在远程服务器上调试很麻烦。如果您的工作站上有 XP，您可以在带有 VMWare 或 Virtual PC 的虚拟机中执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T08:03:06.963

虚拟机是唯一的出路。您不想将整台机器专用于开发（除非您有额外的东西）并且在生产服务器上进行开发只是自找麻烦。我更喜欢 VMWare，但还有其他的也可以。

跟踪与正常调试一样有效，这并不是一个真正的选择。

我要做的其他事情是尝试在常规的 asp.net 网站上开发所有逻辑（不依赖于 SharePoint 的东西），然后在测试*后将*其集成到 SharePoint 中。

希望这是有道理的。

您是在谈论开发 Web 部件吗？自定义页面？还有什么？

# c# - 如何将对象而不是类型传递给 Windsor 容器？

> ID：145364
> 
> 赞同：2
> 
> 时间：2008-09-28T06:39:38.787
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, castle-windsor

我有以下课程：

```
public class ViewPage<TView,TPresenter> : Page 
    where TView : IView
    where TPresenter : Presenter<TView>
{
    public ViewPage()
    {
        if (!(this is TView))
            throw new Exception(String.Format("The view must be of type {0}", typeof(TView)));

        IWindsorContainer container = new WindsorContainer();
        container.AddComponent("view", typeof(IView), typeof(TView));
        container.AddComponent("presenter", typeof(Presenter<TView>), typeof(TPresenter));
        TPresenter presenter = container[typeof(TPresenter)] as TPresenter;
    }
} 
```

这是演示者代码：

```
public class Presenter<T> where T : IView
{
    public T View { get; private set; }

    public Presenter(T view)
    {
        this.View = view;
    }
} 
```

我想将当前实例传递`ViewPage`给`TPresenter`via`Windsor`而不是让它实例化一个新对象。我怎样才能做到这一点？谢谢。

# c# - vs2008中默认的智能感知快捷键是什么？

> ID：145371
> 
> 赞同：15
> 
> 时间：2008-09-28T06:46:57.350
> 
> 标签：c#, visual-studio, visual-studio-2008, keyboard-shortcuts

我想在不输入字符然后退格的情况下打开智能窗口。我似乎不记得这个的快捷方式。它是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-28T06:53:48.877

`Ctrl`+`Space`用于普通 Intellisense，`Ctrl`++用于参数 Intellisense（例如，查看您实际上已经填写的方法调用中可用的重载）`Shift`。`Space`我发现后者非常方便:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-28T06:47:30.560

`Ctrl`+ `Space`?

此外，转到[Tools -> Options -> Environment -> Keyboard](https://msdn.microsoft.com/en-us/library/5zwses53.aspx) or [Default Keyboard Shortcuts in Visual Studio](https://msdn.microsoft.com/en-us/library/da5kh0wa.aspx)，然后您可以搜索命令并查看分配给该命令的内容（并重新映射）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T06:48:20.183

`Ctrl`+`Space`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-09-06T03:19:45.053

如果您已安装 MSG Plus，则问题是信使锁键，尝试在 msg plus 中更改它们，Intellisense 将再次工作。祝你好运！

# php - PHP 的 SPL：其涉及数组的接口是否涵盖所有数组属性？

> ID：145376
> 
> 赞同：6
> 
> 时间：2008-09-28T06:49:12.960
> 
> 标签：php, arrays, spl

是否可以通过实现所有必要的 SPL 接口来编写一个与实际 PHP 数组几乎无法区分的类？他们是否遗漏了任何重要的东西？

我想构建一个更高级的 Array 对象，但我想确保如果我用自定义 Array 类替换它们，我不会破坏到处使用数组的现有应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-28T07:38:55.010

我能想到的唯一问题是 gettype() 和 is_array() 函数。检查您的代码

```
gettype($FakeArray) == 'array' 
is_array($FakeArray) 
```

因为虽然您可以像使用数组一样使用对象，但它仍然会被识别为对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-29T12:43:40.277

除了上述几点之外，您将无法使用户空间数组类型提示与您的类的实例一起使用。例如：

```
<?php
function f(array $a) { /*...*/ }

$ao = new ArrayObject();
f($ao); //error
?> 
```

输出：

```
Catchable fatal error: Argument 1 passed to f() must be an array, object given 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T10:11:16.280

其他差异包括数组的“+”运算符（合并）和整个`array_*`函数的失败，包括常用的`array_merge`and `array_shift`。

# sql-server - 如何通过 Internet 远程连接和管理 SQL Server 数据库？

> ID：145383
> 
> 赞同：5
> 
> 时间：2008-09-28T06:53:03.917
> 
> 标签：sql-server, database-connectivity, remote-administration

如何远程连接到 SQL Server 并管理我的数据库对象？我需要连接到位于网络托管公司服务器上的数据库。我有服务器名称、IP 地址、我的数据库用户名和密码。我的机器上安装了 SQL Server 2000。

我可以为此使用 SQL Server 企业管理器吗？一步一步的指南将非常有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T07:10:10.710

是的，您可以使用 Enterprise Manager（或 SQL Server Management Studio，即使它是 Express 版本）连接到具有 TCP/IP 连接的任何 SQL Server（与您使用的工具相同或更低版本）。只需启动它，在“服务器名称”框中输入 DNS 主机名或 IP 地址，然后点击连接。

有两件事可能会阻止它起作用：

*   您的 SQL Server 未设置 TCP/IP 连接。这是从 2005 版开始的默认设置，可以使用[SQL Server 配置管理器](http://msdn.microsoft.com/en-us/magazine/cc164138.aspx)进行更改。

*   您和您的 SQL Server 之间有防火墙阻止 TCP/IP 通信。这是一个完全合理的结构：您**不**希望您的数据库服务器可以从通用 Internet 上访问，因为这是一个巨大的安全风险。事实上，如果您的托管公司默认允许这种访问，我会寻找不同的提供商......

无论如何，您的方案中似乎需要的是：a）托管公司在您的 SQL Server 实例上启用 TCP/IP，b）他们为您提供对运行该实例的 IP 地址的*安全*访问。这将涉及某种 VPN 或 SSH 端口转发解决方案，或者至少是一个 IP 过滤器，其中只有“受信任的”IP 地址可以访问 SQL Server（这不是一个很好的解决方案，但如果没有别的办法，可以使用实施的）。您必须与您的托管公司讨论这些要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T08:20:00.743

是的，你可以这样做，但你如何做到这一点将取决于你的主机设置。

正如 Brannon 建议的那样，您需要在防火墙上打开端口 1433。单独进行这将是一件危险的事情，因此您可以将其与 VPN 结合使用。设置它可能非常棘手，您最终可能会阻止自己访问服务器并需要托管公司帮助重置它。

另一种选择是一些 Web 管理工具，例如： http: [//www.microsoft.com/downloads/details.aspx](http://www.microsoft.com/downloads/details.aspx?familyid=C039A798-C57A-419E-ACBC-2A332CB7F959&displaylang=en) [?familyid=C039A798-C57A-419E-ACBC-2A332CB7F959&displaylang=en http://www.mylittleadmin。 com/en/welcome.aspx](http://www.mylittleadmin.com/en/welcome.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T07:13:23.400

这是可能的，但是很多事情需要调整才能使您能够连接。

Enterprise Manager 和 SQL Management Studio 仅使用标准客户端连接到 SQL。默认 TCP/IP 端口是 1433，但主机需要允许该端口通过防火墙。如果您使用的是命名实例，那么我相信您还需要能够连接到端口 1434。

大多数管理员不允许从防火墙外部直接访问 SQL Server。在这种情况下，如果您可以通过 VPN 连接到主机，那么您应该能够使用 Enterprise Manager 或 SQL Management Studio 直接连接到服务器。

# language-agnostic - for-loop机制效率提示

> ID：145389
> 
> 赞同：5
> 
> 时间：2008-09-28T07:00:21.873
> 
> 标签：language-agnostic

当我在大型多维数组上使用 for 循环时，任何对 for 循环机制本身的节省都是有意义的。

因此，我正在寻找有关如何减少这种开销的任何提示。

例如：倒计时使用 uint 而不是 int 和 != 0 作为停止而不是 >0 允许 CPU 做更少的工作（听过一次，不确定它是否总是正确的）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-28T07:03:55.530

一个重要的建议：将尽可能多的计算移到外循环。并非所有编译器都可以自动执行此操作。例如，而不是：

```
for row = 0 to 999
    for col = 0 to 999
        cell[row*1000+col] = row * 7 + col 
```

采用：

```
for row = 0 to 999
    x = row * 1000
    y = row * 7
    for col = 0 to 999
        cell[x+col] = y + col 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-28T07:23:22.067

尝试使您的循环在内存中连续，这将优化缓存使用。也就是说，不要这样做：

```
for (int i = 0; i < m; i++)  
    for (j = 0; j < n; j++)  
        s += arr[j][i]; 
```

*   如果处理图像，请在具有单个索引的像素上将两个循环转换为一个循环。
*   不要创建将运行零次的循环，因为管道已优化为假设循环将继续而不是结束。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-28T07:06:06.710

你测量过开销吗？您知道处理 for 循环所花费的时间与执行应用程序代码所花费的时间吗？你的目标是什么？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-28T07:04:54.980

循环展开可以是一种方式。那是：

```
for (i=0; i<N; i++) {
  a[i]=...;
} 
```

转变为：

```
for (i=0; i<N; i+=4) {
  a[i]=...;
  a[i+1]=...;
  a[i+2]=...;
  a[i+3]=...;
} 
```

在上面的示例中，当 N 不是 4 的倍数时，您将需要特殊处理。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-28T07:06:51.653

这不是一个与语言无关的问题，它不仅高度依赖于语言，还依赖于编译器。我相信大多数编译器都会等效地编译这两个：

```
for (int i = 0; i < 10; i++) { /* ... */ }

int i = 0;
while (i < 10) {
    // ...
    i++;
} 
```

在大多数语言/编译器中，for 循环只是后面的 while 循环的语法糖。Foreach 又是另一个问题，它的实现方式高度依赖于语言/编译器，但它的效率通常低于普通的 for/while 循环。更重要的是，语言和编译器依赖。

您最好的选择可能是在一个主题上运行一些具有几种不同变体的基准测试，然后看看最重要的是什么。

编辑：为此，[这里的建议](https://stackoverflow.com/questions/145389/for-loop-mechanisem-efficiency-tips#145392)可能会为您节省更多时间，而不是担心循环本身。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-28T07:52:14.477

顺便说一句，除非您需要后增量，否则您应该始终使用前增量运算符。这只是一个微小的差异，但它更有效。

在内部，这是不同的：

*   后增量

    `i++;`

    是相同的：

    `int postincrement( int &i )
    {
    int itmp = i;
    i = i + 1;
    return itmp;
    }`

*   预增量

    `++i;`

    是相同的：

    `int preincrement( int &i )
    {
    i = i + 1;
    return i;
    }`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-12T18:43:56.160

首先，不要为小事出汗。诸如向上计数和向下计数之类的细节通常与运行时间完全无关。众所周知，人类不善于发现代码中需要加速的区域。使用分析器。除非分析器另有说明，否则很少或根本不注意循环中未重复的任何部分。请记住，在内循环中编写的内容不一定在内循环中执行，因为现代编译器非常聪明地避免了不必要的重复。

话虽如此，在现代 CPU 上展开循环要非常小心。它们越紧，它们就越适合缓存。在我去年工作的一个高性能应用程序中，我通过使用循环而不是直线代码显着提高了性能，并尽可能地收紧它们。（是的，我进行了分析；有问题的函数占用了 80% 的运行时间。我还对典型输入的时间进行了基准测试，所以我知道这些更改会有所帮助。）

此外，养成有利于高效代码的习惯并没有什么坏处。在 C++ 中，您应该养成使用前置增量 (++i) 而不是后置增量 (i++) 来递增循环变量的习惯。它通常无关紧要，但可以产生重大影响，它不会降低代码的可读性或可写性，并且不会造成伤害。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-28T07:11:03.173

我同意@Greg。您需要做的第一件事是进行一些基准测试。在你证明你的所有处理时间都花在了哪里之前，优化任何东西都没有什么意义。“过早优化是万恶之源”！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-28T07:04:21.690

由于您的循环将具有 O(n^d) 复杂度（d=维度），因此真正重要的是您放入循环中的内容，而不是循环本身。从循环内部低效算法的数百万个循环中优化循环框架中的几个循环只是蛇油。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-01T00:12:08.347

顺便问一下，如果保证 Int16 容量足够，那么使用`short`而不是for-loop 好不好？`int`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-28T07:54:49.293

我认为大多数编译器可能无论如何都会这样做，降到零应该更有效，因为检查零对于处理器来说非常快。不过，无论如何，任何有价值的编译器都会对大多数循环执行此操作。你需要看看编译器在做什么。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-28T10:46:19.443

没有足够的信息来准确回答您的问题。你在你的循环里面做什么？一次迭代中的计算是否取决于前一次迭代中计算的值。如果没有，假设您至少有一个双核处理器，只需使用 2 个线程，您几乎可以将时间缩短一半。

要查看的另一件事是您如何访问数据，如果您正在进行大型数组处理，以确保您按顺序访问数据**，因为它存储在内存中**，避免在每次迭代时刷新您的 L1/L2 缓存（看到这个之前在较小的 L1 缓存上，差异可能很大）。

再次，我会先看看循环内部是什么，大部分增益（> 99％）将在哪里，而不是外部循环管道。

但是话又说回来，如果你的循环代码是 I/O 绑定的，那么花在优化上的任何时间都是浪费的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-28T23:46:47.017

在另一个stackoverflow问题的答案中有一些相关信息，[缓存内存是如何工作](https://stackoverflow.com/questions/218117/how-cache-memory-works)的。我发现[此](https://stackoverflow.com/questions/218117/how-cache-memory-works/218617#218617)答案中提到的[Ulrich Drepper](http://people.redhat.com/~drepper/)的论文特别有用。

# c# - 如何指定 clickOnce 应用程序的目标文件夹？

> ID：145400
> 
> 赞同：9
> 
> 时间：2008-09-28T07:07:28.953
> 
> 标签：c#, deployment, installation, clickonce

如何指定 clickOnce 应用程序的目标文件夹？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-28T07:29:39.773

ClickOnce 无法做到这一点。ClickOnce 应用程序始终安装在`Apps`本地应用程序数据的子目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T07:34:59.120

作为对上述内容的进一步说明，这是一项安全功能。允许网站在某种程度上自动将软件安装到某人硬盘上的任意位置是一个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T11:26:18.990

一键式应用程序直接安装到用户配置文件目录中。您无法将其安装到您的程序文件中。要自定义您的应用程序，请使用 Installaware Admin [http://www.installaware.com/studio-admin-features.htm](http://www.installaware.com/studio-admin-features.htm)

# php - 你能推荐 PHP 的性能分析工具吗？

> ID：145402
> 
> 赞同：11
> 
> 时间：2008-09-28T07:09:00.713
> 
> 标签：php, performance, testing

谁能推荐一些有用的 PHP 脚本性能分析工具？任何可以帮助我找到有问题或异常缓慢的代码块、有关执行时间的详细信息等的东西都会非常有帮助。我知道那里有工具，但我想知道人们推荐什么是最有用和设计良好的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-28T07:24:40.427

尝试[webgrind](http://code.google.com/p/webgrind/ "网络研磨")。它以易于阅读、基于浏览器的格式为您提供 CacheGrinder 的分析。我在 Mac 上，它使分析变得轻而易举。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T07:17:41.207

XDebug 的[分析器](http://www.xdebug.org/docs/profiler)很好。但是我是一个 KDE 用户......我认为你可以在其他窗口管理器中安装 KCacheGrind。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T07:20:20.810

Xdebug 分析器非常好，但 CacheGrinder 可能有点难以解释。

Zend 平台（如果您没有运行开发人员许可证，价格会很高）会提醒您发布代码和资源使用不当。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-26T00:36:54.113

我个人是[Facebook 的开源计划](http://developers.facebook.com/xhprof/)之一[XHProf](http://pecl.php.net/package/xhprof)的粉丝。这与 XDebug 转储一起，对于确定性能瓶颈至关重要。此外，用户界面（尤其是基于加权图像的调用图功能）非常震撼。

我过去曾在 Gawker Media 网络中使用过它（同样，与 XDebug 样式的转储一起使用），以帮助集中我们以性能为导向的开发工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-26T00:26:51.043

请参阅 SD 的[PHP Profiler](http://www.semanticdesigns.com/Products/Profilers/PHPProfiler.html)。测量整个应用程序的执行频率，并提供高度执行代码的热点图形显示。无需更改 PHP 服务器即可安装它。

# testing - 如何在没有 wlan 的情况下免费在移动设备上测试网络应用程序？

> ID：145426
> 
> 赞同：0
> 
> 时间：2008-09-28T07:36:41.067
> 
> 标签：testing, web-applications, mobile, usability, emulation

我尝试使用蓝牙连接到我的计算机然后连接到互联网的 GNUBOX。设置起来很痛苦（windows下比linux下多，但还是很痛苦，1次就3次）。

我拥有诺基亚 6630，因此不支持 WLAN。有模拟器吗？我需要知道最大宽度、最大高度等...一般的可用性，有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T07:48:04.673

这可能听起来很愚蠢，但您可以考虑获得无限数据的移动资费。在大多数欧洲国家，这些现在都可以买到，而且价格也不贵。

我不相信您会从任何模拟器中获得可靠的体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-04T00:09:54.500

不知道你是不是只限6630……如果不是，Opera Mini 有[免费模拟器](http://www.operamini.com/demo/)。

如果您发现自己需要在多台设备上进行更多测试，总有[Device Anywhere](http://www.deviceanywhere.com/) ......但它绝对不能免费满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T11:12:57.507

可以用数据线和IP直通吗？

由于 6630 是 Symbian 手机，您应该能够使用 GNUbox 来处理连接。请参阅[http://xan.dnsalias.org/gnubox/](http://xan.dnsalias.org/gnubox/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-17T23:22:39.573

Keynote 的 MITE 刚刚推出了内容测试的免费版本；它包括 6630 以及 1600 多个其他配置文件和 11,000 个用户代理字符串。您可以通过 LAN 访问获取协议详细信息。

# .net - 使用 .resx 文件和卫星程序集是否有任何性能差异？

> ID：145430
> 
> 赞同：5
> 
> 时间：2008-09-28T07:45:00.533
> 
> 标签：.net, asp.net, localization

在构建本地化的 aspx Web 应用程序、卫星程序集的 .resx 文件时，哪种方法最好？网络上是否有任何性能比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T11:54:56.313

嗯，我不知道比较是否有效..

ResX 是一种以 XML 格式存储资源的存储格式。在嵌入（如果指定）到程序集中之前，它会使用 resgen 工具编译为二进制形式 (.resources)。

附属程序集是您的主要程序集资源和本地化资源的差异/增量。因此，如果您在 MainAssembly.dll 中有一个包含 100 个字符串的 Strings.resx，其中 10 个在法裔加拿大文化中发生了变化，那么您应该有一个 MainAssembly.resources.dll（卫星程序集），在DLL 文件夹。当您使用 ResourceManager 查询字符串资源时，它会考虑当前的文化。如果是 fr-CA，它将首先在 fr-CA 文件夹中的附属程序集中查找字符串，如果找不到，它将回退到 DLL 本身中的资源并返回。该机制是始终按以下顺序搜索它。

```
 - [fr-CA subfolder]\MyAssembly.resources.dll 
  - [fr subfolder]\MyAssembly.resources.dll 
  - DLL itself 
```

有关详细信息，请查看[http://www.dotneti18n.com/](https://web.archive.org/web/20090211132440/http://dotneti18n.com/)或“Programming WPF”的资源章节

# deployment - 将桌面快捷方式部署到运行 Windows CE 4.2 (VS2005) 的设备

> ID：145440
> 
> 赞同：9
> 
> 时间：2008-09-28T07:56:21.003
> 
> 标签：deployment, windows-mobile, visual-studio-2005, cab, desktop-shortcut

我有一个使用 VS2005 在 C# 中针对 Compact Framework 2.0 SP2 编写的应用程序。作为解决方案的一部分，我有 CAB 部署项目，它可以毫无问题地部署到设备上。我不能做的是在设备桌面上创建我的应用程序的快捷方式。

我花了几个小时阅读各种文档（为什么在 MSDN 网站上的搜索如此糟糕？），按照说明进行操作，但没有任何乐趣。

我所做的是：

*   将“Windows 文件夹”节点添加到文件系统
*   在名为“桌面”的文件夹下创建了一个文件夹
*   创建应用程序主输出的快捷方式并将其放在“桌面”文件夹中

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-08-11T10:07:24.427

有点晚了，但也许这会帮助像我这样搜索这个问题的人，我解决了这样的问题：

我在根节点（本地机器上的文件系统）上添加了一个自定义文件夹，并将其命名为 %CE3%。这是\Windows\Desktop 的快捷方式。我添加了我的快捷方式（右键单击创建新快捷方式）并为其命名。就是这样，然后我建立！

在分析生成的 inf 中的 Shortcuts 部分时，它看起来不错。

```
[Shortcuts]
"ShortCutName",0,"MyApp.exe","%CE3%" 
```

当我部署时，它运行良好！

我正在使用 VS2008 并在 windows CE 5.0 上部署

以下是快捷方式列表：[windows CE 快捷方式](http://www.cabextract.org.uk/wince_cab_format/#app_b)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-28T14:45:11.427

Windows CE 快捷方式（任何版本或风格的 CE，包括 WinMo）使用基于 ASCII 文本的文件。它们采用以下形式：

{XX}#{路径}

在哪里：

*   XX = 路径中的字符数，包括数字和 # 符号
*   PATH = 要运行的文件的完全限定路径

例如：

20#\Windows\calc.exe

另一种选择是使用用于生成 CAB 的 INF 文件的 CEShortcuts 部分。

在 INF 的 [DefaultInstall] 部分中，将 CEShortcuts 设置为您选择的部分名称（类似于“快捷方式”），然后使用您的快捷方式描述符添加该部分。MSDN[在这里详细介绍了它](http://msdn.microsoft.com/en-us/library/ms938387.aspx)。

MSDN 也有一篇关于创建部署项目以生成 cab 的文章（[可在此处获得](http://msdn.microsoft.com/en-us/library/aa446504.aspx)），但老实说，项目功能有限，而且 IMO 该工具通常很糟糕。直到今天，我们仍然使用手写的 INF 文件直接调用 CABWIZ（这也很糟糕，但这是我们唯一的选择）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T17:53:45.083

我遇到了同样的问题并找到了一个简单的解决方案，如果有人仍然需要这个。

无需添加 Windows 特殊文件夹，只需添加一个名为 Windows 的自定义文件夹，然后在其中添加一个名为 Desktop 的文件夹，然后将快捷方式放在那里。

这对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-01T09:55:05.643

最简单的方法是进入 Cab 项目（设置）中的应用程序文件夹，右键单击您的 EXE 程序（要为其创建快捷方式的应用程序 exe）并选择“创建快捷方式”并将该文件移动到您想要的任何文件夹例如“开始菜单文件夹”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T15:29:30.150

Mitch：像以前一样创建 LNK 文件，但给它起一个类似“shortcut.lnkx”的名称（注意末尾的“x”）。然后，您可以将其添加到 CAB 项目中的“桌面”文件夹中。添加文件后，将 TargetName 属性更改为“shortcut.lnk”并编译。 **我认为**这会奏效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T12:56:52.067

假设您使用 Windows Mobile（5.0 或 6.x），您可以使用该语法将文件创建为 shourtcut(*,lnk)：

```
SHORTCUT = XX#"\Program Path..."?\Icon File Path...,-Icon Number 
```

在哪里：

XX = 要在要处理的程序路径之后包含在参数中的字符数。程序路径 = 目标 exe 文件位置。Icon File Path = 如果 exe 文件不包含图标图像或您想使用另一个，这是包含图标图像的文件的位置。图标编号 = 文件内图标图像的索引，从 0 开始。

```
Ex: 86#"\Storage Card\Logical Sky CEdit\cedit.exe"?\Storage Card\Logical Sky CEdit\cedit.exe,-101 
```

我已经对其进行了测试，并且工作正常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-01T07:20:07.533

1.复制文件。

2.转到桌面（或您要创建快捷方式的任何地方）。

3.在空白处右击，点击**粘贴快捷方式**。

就是这样。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-11T08:47:51.127

其实，这很简单！（使用 VS 2008 和 Smart Device CAB 项目）

1- 在 VS 的解决方案资源管理器中，转到您的 CAB 项目并右键单击它。

2-转到查看->文件系统

3-在这里，在左栏中，右键单击并“添加特殊文件夹”

4-选择开始菜单文件夹作为快捷方式文件夹

5-转到上面的应用程序文件夹

6- 在右栏中，右键单击主输出并选择“创建 bla bla bla 的快捷方式”

7-然后您只需将其移动到左侧的开始菜单文件夹并重命名文件:)

可选：您甚至可以使用“添加特殊文件夹”菜单中的“字体文件夹”将字体添加到设备！

干杯

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-28T08:23:57.710

我假设您正在使用“智能设备 CAB 项目”？我不认为这个项目以正确的方式为 Windows CE 4.2 创建快捷方式。我认为您可以从 Microsoft 下载一个 SDK，在安装后会显示类似“Windows CE CAB Project”之类的项目选项。

不过，我认为您可以手动执行此操作。Windows CE 快捷方式是一个带有 *.lnk 扩展名的文件，因此如果您想要一个标有“我的应用程序”的快捷方式，请在您的 PC 上创建一个名为“我的应用程序.lnk”的文本文件。该文件的内容应该是：

> 46#\Program Files\My Application\MyApplication.exe（# 应该是完整路径长度）

或您的应用程序在 Windows CE 设备上的任何完整路径。

在您的 CAB 项目中，继续添加“Windows”文件夹，然后像以前一样添加“Desktop”文件夹。在 Desktop 文件夹中，右键单击并添加您创建的 LNK 文件。您可能必须软重置设备才能在安装后显示快捷方式。

# windows - 多个存储库，单一设置

> ID：145443
> 
> 赞同：2
> 
> 时间：2008-09-28T07:58:54.897
> 
> 标签：windows, svn

如果我使用多个存储库，所有存储库都位于一个根文件夹下，我该如何设置它以便他们使用单个主`svnconf`/`passwd`文件进行设置，但如果需要，我仍然允许我自定义每个？

这是在 Windows 上，但我想这个过程在其他系统上会相似。

**更新：**我使用 svnserve 作为服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T08:10:38.397

`svnserve`不适用于大型部署。如果您需要更细粒度的权限或集成等，请使用 Web 服务器（如[Apache](http://en.wikipedia.org/wiki/Apache_HTTP_Server)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T08:05:54.977

如果您使用的是 svnserve，那么`conf/svnserve.conf`每个存储库中的文件都有一个配置项，用于命名密码数据库文件。这是该部分中的`password-db`项目`[general]`，只需将它们都设置为指向同一个文件。

如果您不使用 svnserve，那么这可能不适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T08:13:26.283

有不同的方法可以做到这一点，具体取决于您想要实现的目标以及您使用的设置。

**服务**

如果您使用`svnserve`，则每个存储库中都有一个文件`svnserve.conf`，您可以在其中定义正在使用的密码文件。您可以将密码文件放在服务器根目录中，并将所有存储库指向那里。

它看起来像这样：

```
c:\svn\passwd
c:\svn\project1\conf\svnserve.conf
c:\svn\project2\conf\svnserve.conf 
```

然后在两个`svnserve.conf`文件中都有一个像

```
[general]
password-db = c:\svn\passwd 
```

应该可以解决问题，并且仍然会`authz`为每个存储库保留不同的 ACL（文件）

**阿帕奇**

这有点复杂，但是

```
<Location /project1>
  DAV svn
  SVNPath C:/Repositories/project1

  AuthType Basic
  AuthName "Subversion Project1 repository"
  AuthUserFile c:/etc/svn-auth-file

  Require valid-user

  AuthzSVNAccessFile c:/etc/svn-acl
</Location>
<Location /project2>
  DAV svn
  SVNPath C:/Repositories/project2

  AuthType Basic
  AuthName "Subversion Project2 repository"
  AuthUserFile c:/etc/svn-auth-file

  Require valid-user

  AuthzSVNAccessFile c:/etc/svn-acl
</Location> 
```

只要您对每个启用 SVN 的位置使用相同的 authuserfile，您就会得到结果。

# php - 在 PHP 的页面中嵌入 svn 修订号的简单方法？

> ID：145449
> 
> 赞同：6
> 
> 时间：2008-09-28T08:04:06.757
> 
> 标签：php, svn, versioning, revision

请注意此页面右下角的 SVN 修订版 ID？我假设这是动态的。

我很想将它添加到我的一些网站中，就像源代码中的注释一样，以确保代码推送正在通过。

注意：您还可以假设相关站点的工作目录是相关 repo 的 svn checkout。

**编辑：**我正在寻找全局修订号，而不是我正在查看的文件的修订号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T08:18:09.687

您可以使用[`svnversion`](http://svnbook.red-bean.com/en/1.5/svn-book.html#svn.ref.svnversion)CLI 实用程序更具体地查看修订版，包括最高编号。然后，您可以使用正则表达式来解析它。

Subversion 没有全局修订的概念；相反，您必须递归地查看工作副本以找到最高修订号。`svnversion`为你做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T08:22:39.803

关键字替换方法不可靠，因为它将提供文件的修订版本，而不是您正在部署的整个代码库，我认为这就是您所追求的。

通常，我使用 ANT 从 subversion 进行部署，在构建脚本中，我将使用替换任务将布局模板或公共头文件中的修订标记替换为我正在部署的代码库的修订号 - 见下文。虽然如果有人有更好的方法，我很想听听！

```
 <svn username="${svn.username}" password="${svn.password}" javaHL="${svn.javahl}">      
   <status path="${dir.build}" revisionProperty="svn.status.revision" />
 </svn>

 <replace dir="${dir.build}" token="%revision%" value="${svn.status.revision}">
   <include name="**/*.php" />
 </replace> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T08:05:34.430

阅读关键字替换。看

[http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)

# javascript - 为什么 Stackoverflow 使用 javascript 动态绑定用户操作？

> ID：145480
> 
> 赞同：6
> 
> 时间：2008-09-28T08:26:35.283
> 
> 标签：javascript, jquery

检查我看到的问题的 HTML 源代码，例如：

```
<a id="comments-link-xxxxx" class="comments-link">add comment</a><noscript>&nbsp;JavaScript is needed to access comments.</noscript> 
```

然后在javascript源代码中：

```
// Setup our click events..
$().ready(function() {    
        $("a[id^='comments-link-']").click(function() { comments.show($(this).attr("id").substr("comments-link-".length)); });    
}); 
```

似乎所有用户点击事件都以这种方式绑定。

对于没有 javascript 浏览网站的人来说，这种方法的缺点是显而易见的，但是使用 javascript 动态添加事件而不是直接声明它们有什么优势？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-28T09:07:58.523

*   您不必在 HTML 中一遍又一遍地键入相同的字符串（如果没有其他方法会增加要调试的拼写错误的数量）
*   您可以将 HTML/CSS 交给不需要任何 javascript 技能的设计师
*   您可以通过编程控制调用什么回调以及何时调用
*   它更优雅，因为它符合布局和行为之间的概念分离
*   更容易修改和重构

最后一点，想象一下如果你想在模板的其他地方添加一个“显示评论”图标。将相同的回调绑定到图标非常容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T10:16:44.847

通过事件 API 而不是在标记中附加事件是不显眼的 javascript 的核心。欢迎您阅读[这篇维基百科文章](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，全面了解为什么不显眼的 javascripting 很重要。

就像您将样式与标记分开一样，您也希望将脚本与标记分开，包括事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T17:51:21.090

我认为这是良好软件开发的基本原则之一：

*表示和逻辑的分离。*

HTML/CSS 本质上是一种表示语言。Javascript用于创建逻辑。如果可能，最好将任何逻辑与演示文稿分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T08:36:23.013

通过这种方式，您可以拥有一个轻量级页面，您可以在其中通过 javascript 处理所有操作。不必使用嵌入到页面中的大量不同 url 和操作，只需编写一个 javascript 函数来查找链接并将其连接起来，无论您在页面上的哪个位置转储该“评论”链接。这样可以节省*大量*重复的 html :)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-28T08:32:08.780

我看到的唯一优势是减少了页面大小，从而降低了带宽需求。

编辑：当我被否决时，让我们再解释一下我的答案。

我的观点是，将链接用作空锚只是一种不好的做法，仅此而已！当然，将 JavaScript**逻辑**与 HTML 分离是很棒的。当然，重构和调试更容易。但在这里，它违反了不显眼的 JavaScript 的主要原则：**优雅降级**！

一个好的解决方案是必须可能调用评论：一个通过 REAL 链接指向一个显示评论的简单页面，另一个仅返回评论（以 JSON 表示法或类似格式），目的是通过AJAX调用直接在主页面注入。

这样做，使用 AJAX 方法的方法还应该注意取消其他调用，以避免用户被重定向到简单页面。那将是不显眼的 JavaScript。这里只是将 JavaScript 放在一个误用的锚标记上。

# c# - 为 C# 寻找最新的 eclipse 插件

> ID：145484
> 
> 赞同：37
> 
> 时间：2008-09-28T08:30:04.637
> 
> 标签：c#, eclipse, eclipse-plugin

我曾经使用 eclipse 处理几乎所有我需要的语言。我被要求使用 C# 开发的工具，因此，我想留在同一个熟悉的环境中。

我找到了[改进的插件](http://www.improve-technologies.com/alpha/esharp/)，但它的最后一个版本是 2004 年和 .NET 1.1，它已经很老了。是否有更新的插件可以在 Eclipse 中用 C# 编程，还是我被迫看一下 VS？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-28T08:33:10.073

[Emonic](http://emonic.sourceforge.net/)将 mono 集成到 eclipse 框架中，这可能有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T08:34:18.090

我担心，没有好的 Eclipse 插件。试试[http://www.monodevelop.com/Main_Page](http://www.monodevelop.com/Main_Page)或[http://www.icsharpcode.net/OpenSource/SD/](http://www.icsharpcode.net/OpenSource/SD/)。并且免费的视觉 2008 速成版值得一看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-02-08T22:35:34.790

我发现以下 2 篇文章有助于尝试在 Eclipse 中获取 C# Formatting：

*   [C# 类似 format.xml](https://gist.github.com/244796)
*   [解释如何更改格式的文章](http://www.wikihow.com/Change-the-Default-Format-Settings-in-Eclipse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T23:35:53.070

正如 Jasper 建议的那样，Emonic 值得一看。我过去自己安装过它，但一年多以前。检查网站上的更改日志，从那时起他们似乎没有任何新版本。最糟糕的是它不提供调试器或任何重构工具。我发现，如果您要使用 Microsoft 产品，最好吃掉整个猪。

您将有一个从 Eclipse 进入 Visual Studion 的学习曲线，但它可能会为您节省一些时间来解决尝试构建 .NET 代码的产品的细微差别。

Visual Studio 是一个非常好的工作环境，速成版是免费的，所以我的建议是借此机会看看 VS 开发环境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-04T00:50:10.640

[MonoDevelop](http://monodevelop.com/)刚刚发布了一个 Windows Beta，它看起来非常好。这是一个跨平台的 C# IDE。它可能有用。

# asp.net - 我应该坚持使用 ReportViewer 控件还是购买第三方工具？

> ID：145494
> 
> 赞同：2
> 
> 时间：2008-09-28T08:45:35.550
> 
> 标签：asp.net, reporting-services, reportviewer

我们的 Web 应用程序中需要报告，并且有来自 microsoft 的免费 ReportViewer 控件（通常用于显示来自报告服务的报告）。我喜欢这样一个事实，即来自 ReportViewer 的报告格式 (.RDL-Format) 是文档化的 XML 格式。但是，当没有 ReportingServices 使用 ReportViewer 时，功能会受到一定的限制。

是否有基于 .RDL 格式或与 .RDL 格式兼容的良好替代品？

第一个报告是在应用程序中构建的，但后来，客户应该自己制作报告。

**该应用程序是一个 ASP.NET Web 应用程序**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T08:56:44.870

这取决于您的要求。我不清楚你的要求是什么。

您的应用程序是 Web 应用程序还是桌面应用程序？

如果您的应用程序是**Web 应用程序**，那么您可以使用任何其他报告服务。我喜欢**[i-net Clear Reports](http://www.inetsoftware.de/products/crystalclear/)**。还有一个免费且功能齐全的 GUI[报表设计](http://www.inetsoftware.de/products/crystal-clear/designer)器，易于使用。您的客户可以创建自己的报告。

如果您有**桌面应用程序**，那么您将受限于应用程序的语言。

您还应该考虑平台。报告服务仅限于 Windows，并且需要 SQL Server。您的所有客户都有 SQL Server 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T09:12:22.803

抱歉，我忘记写了，该应用程序是一个 asp.net 网络应用程序

# dll - 将多个原生 DLL 合并为一个 DLL

> ID：145499
> 
> 赞同：8
> 
> 时间：2008-09-28T08:49:53.857
> 
> 标签：dll, merge, unmanaged

我有很多小 DLL，我想将它们制作成一个大的（呃）DLL（如[这里所建议](https://stackoverflow.com/questions/127029/comparing-cold-start-to-warm-start#129090)的那样）。我可以通过合并我的项目来做到这一点，但我想要一种不那么侵入性的方式。

可以将多个 DLL 合并为一个单元吗？

快速搜索发现[这个线程](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/22fed4ab-a3f8-4d5f-be03-6d5e7dc3db01/)声称这是不可能的。还有人知道吗？

*请注意，我说的是本机 C++ 代码而不是 .NET，因此 ILMerge 已经出局。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T09:04:48.610

我不知道合并 dll，但我相信您可以将中间对象文件链接到一个 dll 中。这只需要更改您的构建脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T09:05:11.260

据我所知，您不能直接合并 DLL 文件。但它应该可以使用静态库或目标文件。如果您可以构建项目的静态库，您可以使用库管​​理[器](http://msdn.microsoft.com/en-us/library/7ykb2k5f(VS.80).aspx)通过从所有库中提取目标文件并将它们打包到一个新库中来合并它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T13:57:41.760

此外，还有一种产品可以用 .DLL 制作 .LIB。然后，您可以将您的 exe 链接到该 .LIB 并完全摆脱 .DLL。也许您可以从 .LIB 链接一个 .DLL - 我不确定。

该产品在这里： http: [//www.binary-soft.com/dll2lib/dll2lib.htm](http://www.binary-soft.com/dll2lib/dll2lib.htm) 我不确定它是否可以工作，是否受支持甚至已售出。它确实看起来很贵，但它曾经有（启用nag的）免费试用期。

# coding-style - 你认为软件公司应该强加开发人员编码风格吗？

> ID：145508
> 
> 赞同：18
> 
> 时间：2008-09-28T08:58:48.763
> 
> 标签：coding-style, conventions

如果您认为不应该，请解释原因。

如果是，您认为指南应该有多深？例如，应该包括代码的缩进吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-09-28T09:10:45.833

我认为一个*团队*（而不是一个*公司*）需要就一套合理一致的风格达成一致。它使维护更加简单。

有多深？尽可能肤浅，你可以同意。它越短越清晰，就越有可能所有团队成员都同意并遵守它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-28T09:09:13.200

您希望每个人都以标准方式阅读和编写代码。有两种方法可以实现这一目标：

1.  多次克隆一个开发人员，并确保他们都经过相同的培训。希望他们都应该能够编写相同的代码库。
2.  向您现有的开发人员明确说明您的需求。用于缩进的制表符或空格。大括号所在的位置。怎么评论。版本控制提交指南。

**您留下的未定义越多，开发人员在风格上发生冲突的可能性就越高。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-28T09:10:50.513

公司应该强制要求遵循某种风格。那是什么风格以及指南的深度应该由公司的开发人员社区共同决定。

我肯定会制定关于大括号、缩进、命名等的指导方针……你编写代码是为了可读性和可维护性。始终假设其他人会阅读您的代码。有一些工具可以自动神奇地格式化你的代码，你可以强制每个人都使用这个工具。

如果您在 .Net 上，请查看 stylecop、fxcop 和 Resharper

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-28T09:47:54.497

> 你认为软件公司应该强加开发人员编码风格吗？

不是自上而下的方式。软件公司的开发人员应该就通用的编码风格达成一致。

> 如果是，您认为指南应该有多深？

他们应该只描述与众所周知的约定的差异，尽量保持偏差最小。这对于 Python 或 Java 这样的语言来说很容易，对于 C/C++ 来说有些模糊，对于 Perl 和 Ruby 几乎是不可能的。

> 例如，应该包括代码的缩进吗？

是的，它使代码更具可读性。在空格与制表符和（如果您选择空格）空格字符数方面保持缩进一致。此外，就长行的边距（例如 76 个字符或 120 个字符）达成一致。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-28T09:07:35.200

是的，但在合理范围内。

所有现代 IDE 都提供漂亮的一键式代码，因此在我看来，“缩进”点是完全无关紧要的。

更重要的是建立最佳实践：例如，尽可能少地使用“out”或“ref”参数......在这个例子中，您有两个优点：提高可读性并修复了很多错误（很多out 参数是代码异味，可能应该重构）。

超出这个范围，老实说，对于开发人员来说，有点“肛门”并且不必要地烦人。

* * *

哈米什·史密斯的好观点：

> 风格与最佳实践完全不同。遗憾的是，“编码标准”倾向于将两者结合在一起。如果人们可以将样式部分保持在最低限度并专注于可能会增加更多价值的最佳实践。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-08T21:55:45.360

我不认为开发团队应该有他们必须遵循的风格指南作为一般规则。有例外，例如[在#include statements 中使用 <> 与 ""](https://stackoverflow.com/questions/179213/c-include-semantics#179786)，但这些例外应该来自必要性。

我听到人们用来解释为什么需要样式指南的最常见原因是，以通用样式编写的代码更容易维护以单独样式编写的代码。我不同意。当一个专业的程序员看到这个时，他们不会陷入困境：

```
for( int n = 0; n < 42; ++42 ) {
 // blah
} 
```

...当他们习惯于看到这个时：

```
for(int n = 0; n < 42; ++42 )
{
 // blah
} 
```

此外，我发现在某些情况下，如果您可以通过简单地识别他们的风格来识别编写原始代码的程序员，那么在某些情况下维护代码实际上会更容易。去问问他们为什么他们在 10 分钟内以如此复杂的方式实现了这个小发明，而不是花一天的大部分时间来弄清楚他们为什么做了一些意想不到的事情的技术原因。诚然，程序员应该对代码进行注释以解释他们的推理，但在现实世界中，程序员通常不会这样做。

最后，如果 Joe 需要 10 分钟退格并移动他的花括号，以便 Bill 可以少花 3 秒查看代码，是否真的节省了让 Bill 做一些他不自然的事情的时间？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-28T09:01:53.607

我相信拥有一致的代码库很重要。它增加了你的代码的可维护性。如果每个人都期望相同类型的代码，他们可以很容易地阅读和理解它。

此外，鉴于当今的 IDE 及其自动格式化功能，这并不麻烦。

PS：我有个讨厌的习惯，就是把牙套放在下一行:)。似乎没有人喜欢它

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-28T09:06:48.387

我认为程序员应该能够适应其他程序员的风格。如果一个新程序员无法适应，那通常意味着新程序员太固执，无法使用公司的风格。如果我们都能做自己的事就好了；但是，如果我们都按照一些粗俗的准则进行编码，它会使调试和维护变得更容易。仅当标准经过深思熟虑且不太严格时，这才是正确的。

[虽然我并不同意所有的观点，但这本书包含了一个很好的标准起点](http://cc2e.com/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-28T10:08:48.020

最好的解决方案是 IDE 将这种格式视为元数据。例如，左大括号位置（当前行或下一行）、缩进和运算符周围的空格应该是可配置的，而无需更改源文件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-28T09:04:00.810

在我看来，我认为标准和风格指南是非常必要的。因为当你的代码库增长时，你会希望它保持一致。

作为旁注，这就是我喜欢 Python 的原因；因为它已经对如何构建应用程序等施加了很多规则。将其与 Perl、Ruby 或任何您拥有极大自由的地方（在这种情况下并不是那么好）进行比较。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-28T09:14:08.180

标准有很多充分的理由来定义应用程序的开发方式和代码的外​​观。例如，当每个人都使用相同的标准时，可以使用自动样式检查器作为项目 CI 的一部分。使用相同的标准可以提高代码的可读性，并有助于减少团队成员之间以不同方式重构相同代码的紧张关系。所以：

*   特定团队开发的所有代码都应遵循完全相同的标准。
*   为特定项目开发的所有代码都应遵循完全相同的标准。
*   属于同一公司的团队最好使用相同的标准。

在外包公司中，如果客户想要执行他们自己的标准，那么为客户工作的团队可以例外。在这种情况下，团队采用客户的标准，这可能与他们公司使用的标准不兼容。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-08T15:55:11.690

就像其他人提到的那样，我认为这需要由工程或团队来决定——公司（即业务部门）不应该参与那种决策。

但我要补充的另一件事是，任何实施的规则都应该由工具而*不是*人来执行。最坏的情况，IMO，是一些过分热心的语法势利小人（是的，我们存在；我知道是因为我们可以闻到我们自己的味道）写了一些文档，概述了一组绝对没有人真正阅读或遵循的编码指南。随着时间的推移，它们会变得过时，随着新人加入团队和老年人离开，它们就会变得陈旧。

然后，一些冲突出现了，某人被置于不得不就编码风格与其他人对抗的尴尬境地——这种对抗应该由工具而不是人来完成。简而言之，在我看来，这种强制执行方法是最不可取的，因为它太容易被忽视，而且只会乞求程序员争论愚蠢的事情。

一个更好的选择（同样，IMO）是在编译时抛出警告（或类似的东西），只要您的构建环境支持这一点。在 VS.NET 中配置它并不难，但我不知道其他具有类似功能的开发环境。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-08T16:42:43.667

风格指南非常重要，无论是用于设计还是开发，因为它们加快了协作工作（甚至是单独工作，按顺序工作，就像拾取旧项目的碎片时）的人们的沟通和绩效。*公司内部没有*约定俗成的系统只是要求人们尽可能地低效。大多数项目都需要协作，即使是那些不需要协作的项目也容易受到我们锻炼编程能力和保持最新的自然愿望的影响。我们的学习欲望阻碍了我们的一致性——这本身就是一件好事，但会让新员工疯狂地尝试学习他们正在学习的系统。

就像任何其他善而不恶的系统一样，指南的真正力量掌握在其人民的手中。开发人员自己将确定基本和有用的部分是什么，然后有希望地使用它们。

就像法律一样。或者英语。

风格指南应该尽可能深入——如果它出现在头脑风暴会议中，它应该被包括在内。您对问题的措辞很奇怪，因为归根结底，没有办法“强加”样式指南，因为它只是一个指南。

RTFM，然后收集好东西并继续使用它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-28T09:12:36.780

是的，我认为公司应该这样做。开发人员可能需要习惯编码风格，但在我看来，一个好的程序员应该能够使用任何编码风格。正如 Midhat 所说：拥有一致的代码库很重要。

我认为这对于开源项目也很重要，没有主管告诉你如何编写代码，但许多语言都有关于代码的命名和组织方式的规范。在将开源组件集成到您的项目中时，这很有帮助。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-28T09:12:57.950

当然，指导方针是好的，除非它是使用不当的匈牙利符号（哈！），否则它可能会提高一致性并使阅读其他人的代码更容易。不过，这些指导方针应该只是指导方针，而不是对程序员强制执行的严格规则。你可以告诉我把大括号放在哪里或者不使用像 temp 这样的名称，但你不能做的是强迫我在数组括号中的索引值周围有空格（他们尝试过一次......）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-28T09:14:47.180

是的。

编码标准是确保特定组织内的代码遵循最小意外原则的常用方法：从变量命名到缩进到大括号使用的标准一致性。

拥有自己风格和自己标准的编码人员只会产生不一致、混乱和令人沮丧的代码库，尤其是在大型项目中。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-28T09:17:59.187

[这些](http://www.vbulletin.com/docs/html/codestandards)是我曾经工作过的公司的编码标准。它们定义明确，虽然我花了一段时间才习惯它们，但这意味着我们所有人都可以阅读代码，并且始终保持统一。

我确实认为编码标准在公司内部很重要，如果没有设置，开发人员之间就会发生冲突，并且会出现可读性问题。

使代码始终保持一致，为最终用户提供了更好的代码（因此它看起来好像是由一个人编写的——从最终用户的角度来看，它应该——那个人是“公司”，它还有助于团队内的可读性...

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-28T09:31:21.277

共同的编码风格促进了一致性，并使不同的人能够轻松地理解、维护和扩展整个代码库，而不仅仅是他们自己的代码。它还使新人更容易更快地学习代码。因此，任何团队都应该对如何编写代码有一个指导方针。

重要的指导方针包括（不分先后）：

*   空格和缩进
*   标准注释——文件、类或方法头
*   命名约定——类、接口、变量、命名空间、文件
*   代码注释
*   项目组织 - 文件夹结构、二进制文件
*   标准库——使用什么模板、泛型、容器等
*   错误处理 - 异常、hresults、错误代码
*   线程和同步

另外，要警惕那些不能或不会适应团队风格的程序员，无论他们多么聪明。如果他们不遵守其中一项球队规则，他们可能也不会遵守其他球队规则。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-28T10:06:28.540

我同意一致性是关键。您不能依靠 IDE 漂亮打印来挽救局面，因为您的一些开发人员可能不喜欢使用 IDE，并且因为当您浏览包含数千个源文件的代码库时，漂亮根本不可行当你开始处理它们时打印所有文件，然后执行回滚，这样你的 VCS 就不会尝试提交所有更改（用不必要的更新阻塞存储库，给每个人带来负担）。

我建议至少标准化以下内容（按重要性降序排列）：

*   空白（如果您选择符合某些共享工具的自动漂亮打印的样式，这是最简单的）
*   命名（文件和文件夹、类、函数、变量……）
*   评论（使用允许自动生成文档的格式）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-28T13:45:37.733

我的意见：

*   一些基本规则很好，因为它可以帮助每个人阅读和维护代码
*   太多的规则是不好的，因为它会阻止开发人员以更清晰的代码布局方式进行创新
*   单个样式可用于确定代码文件的历史。可以使用差异/责备工具，但提示仍然有用

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-28T15:14:34.930

现代 IDE 允许您定义格式模板。如果有企业标准，那么开发一个配置文件，定义您关心的所有格式化值，并确保每个人在签入代码之前都运行格式化程序。如果您想更加严格，您可以为您的版本控制系统添加一个提交挂钩，以便在代码被接受之前缩进代码。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-28T17:20:57.807

是的，就使用通用命名标准以及类和代码隐藏文件的通用布局而言。其他一切都是开放的。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-28T17:28:38.493

每个公司都应该。一致的编码风格可确保整个团队的代码库具有更高的可读性和可维护性。

我工作的商店没有统一的编码标准，我可以说我们（作为一个团队）深受其害。当个人没有意愿时（比如我的一些同事），团队负责人必须用拳头敲桌子并强加某种形式的标准化编码准则。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-28T18:01:05.030

任何语言都有社区使用的通用标准。您应该尽可能地遵循这些，以便您的代码可以由习惯该语言的其他人维护，但没有必要对它进行独裁。

制定官方标准是错误的，因为公司编码标准通常过于死板，无法与使用该语言的一般社区交流。

如果您对某个团队成员的编码风格有问题，那么团队温和地建议这在代码审查中不是一个好主意是一件好事。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-10-01T05:26:27.533

编码标准：是。由于此线程中已涵盖的原因。

造型标准：NO。你的可读性，是我眼花缭乱的垃圾，反之亦然。好的注释和代码分解有更大的好处。还有gnu缩进。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-10-08T15:44:34.847

我喜欢 Ilya 的回答，因为它结合了可读性的重要性，以及使用持续集成作为执行机制。Hibri 提到了 FxCop，我认为在构建过程中将其用作确定构建是否通过或失败的标准之一将比仅仅记录标准更加灵活和有效。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-10-08T15:53:53.220

我完全同意应该应用编码标准，并且应该几乎总是在团队级别。但是有几个例外。

如果团队正在编写供其他团队使用的代码（这里我的意思是其他团队将不得不查看源代码，而不仅仅是将其用作库），那么在所有团队中制定通用标准是有好处的使用它。同样，如果公司的政策是经常将程序员从一个团队转移到另一个团队，或者处于一个团队经常想要重用另一个团队的代码的位置，那么最好在整个公司范围内实施标准。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-12-29T13:35:27.157

有两种类型的约定。

A 类约定：“请做这些，这样更好”

和B型：“请在马路的右侧行驶”，而在另一侧行驶也可以，只要每个人都按照相同的方式行驶即可。

没有单独的团队这样的事情。一家好公司的所有代码都以某种方式连接在一起，并且风格应该是一致的。**习惯一种新风格比适应二十种不同的风格更容易**。

此外，新开发人员应该能够尊重现有代码库的实践并遵循它们。

# c# - 为什么 "abcd".StartsWith("") 返回 true？

> ID：145509
> 
> 赞同：88
> 
> 时间：2008-09-28T08:59:49.353
> 
> 标签：c#, java, startswith

标题是整个问题。有人可以给我一个发生这种情况的原因吗？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2008-09-28T09:04:31.167

是的 - 因为它确实以空字符串开头。实际上，空字符串逻辑上出现在每对字符之间。

这么说吧：你能给出什么“开始于”的定义来排除这种情况？这是一个简单的“开始于”的定义，它不是：

“如果 x 的第一个字符与 y 的第一个`y.Length`字符匹配，则 x 以 y 开头。”

另一种（等效）定义：

"x 以 y 开头如果`x.Substring(0, y.Length).Equals(y)`"

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2008-10-10T22:03:54.520

我将尝试详细说明 Jon Skeet 所说的内容。

假设 x、y 和 z 是字符串，而 + 运算符实际上是连接，那么：

如果我们可以将 z 拆分为 z = x + y，这意味着 z 以 x 开头。因为每个字符串 z 都可以拆分为 z = "" + z，所以每个字符串都以 "" 开头。

所以，因为 ("" + "abcd") == "abcd" 所以 "abcd" 以 "" 开头

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-12-24T05:11:57.833

我将从一个更容易理解的相关事实开始。

**空集是每个集合的子集。**

为什么？如果 的每个元素都是 的元素，则*子集*状态的[定义](http://en.wikipedia.org/wiki/Subset)是的子集。相反，不是 的子集，如果有 的元素不是 的元素。*`A``B``A``B``A``B``A``B`*

 *现在修一套`B`。我将确定空集是 的子集`B`。我将通过证明空集不是`B`. 如果空集不是的子集，`B`那么我可以找到不在的空集的元素`B`。但是空集没有任何元素，因此我找不到不在`B`. 因此，空集并不是 的子集`B`。因此，空集必须是 的子集`B`。

**任何字符串都以空字符串开头。**

首先，我们必须同意我们对以*开头*的定义。Let `s`and `t`be `string`s 我们说`s` *以* `t`if开头，并且match`s.Length >= t.Length`的第一个`t.Length`字符。也就是说，对于每一个这样的，都是真的。相反，我们会说if 语句不以 if 开头`t``s``s.Length >= t.Length``Int32 index``0 <= index < t.Length``s[index] == t[index]``s``t`

`s.Length < t.Length`或者`s.Length >= t.Length`并且有一个`Int32 index`这样的`0 <= index < t.Length`和`s[index] != t[index]`

是真的。在简单的英语中，`s`比 短`t`，或者，如果不是，则有一个字符在`t`不匹配字符作为相同位置的字符`s`。

现在修复一个字符串`s`。我将从`s`空字符串开始。我将通过证明它不是`s`不以空字符串开头的情况来做到这一点。If`s`不以空字符串开头 then `s.Length < String.Empty.Length`or `s.Length >= String.Empty.Length`and 有一个`Int32 index`这样的`0 <= index < String.Empty.Length`。但是`s.Length >= 0`and`String.Empty.Length`等于 0，所以不可能为`s.Length < String.Empty.Length`真。同样，由于``String.Empty.Length `is equal to zero, there is no`Int32 index `satisfying`0 <= index < String.Empty.Length`。所以

`s.Length < String.Empty.Length`或者`s.Length >= String.Empty.Length`并且有一个`Int32 index`这样的`0 <= index < String.Empty.Length`

是假的。因此，不是`s`不以空字符串开头的情况。因此，`s`必须以空字符串开头。

下面是一个以编码为扩展的*开头*`string`的实现。

```
public static bool DoStartsWith(this string s, string t) {
    if (s.Length >= t.Length) {
        for (int index = 0; index < t.Length; index++) {
            if (s[index] != t[index]) {
                return false;
            }
        }
        return true;
    }
    return false;
} 
```

以上两个加粗的事实是[空洞真实的陈述](http://en.wikipedia.org/wiki/Vacuous_truth)的例子。它们是正确的，因为定义它们的语句（*子集*和*开头*）是对空宇宙的[普遍量化。](http://en.wikipedia.org/wiki/Universal_quantification)空集中没有元素，所以不能有任何不在其他固定集中的空集元素。空字符串中没有字符，因此不能有一个字符作为空字符串中的某个位置与其他某个固定字符串中相同位置的字符不匹配。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-09-28T09:04:25.943

该方法将 value 参数与该字符串开头的与 value 长度相同的子字符串进行比较，并返回一个表明它们是否相等的值。**要相等，value 必须是空字符串 (Empty)、对同一实例的引用或匹配此实例的开头。**

[.NET String.StartsWith](http://msdn.microsoft.com/en-us/library/6k0axhx9.aspx)

如果参数表示的字符序列是此字符串表示的字符序列的前缀，则为 true；否则为假。另请注意，如果参数是空字符串或等于由 equals(Object) 方法确定的此 String 对象，**则将返回 true 。**

[Java String.startsWith](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#startsWith(java.lang.String))

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-10-16T14:58:42.223

让我们说`"abcd".StartsWith("")`返回false。

如果是这样，那么下面的表达式 eval 是什么，真或假：

```
 ("abcd".Substring(0,0) == "") 
```

事实证明，evals 为真，所以字符串确实以空字符串开头;-)，或者换句话说，“abcd”的子字符串从位置 0 开始并且长度为 0 等于空字符串“”。很合乎逻辑的海事组织。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-28T09:05:42.397

在 C# 中，这是[规范](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)告诉它做出反应的方式；

> 要相等，value 必须是空字符串 (Empty)、对同一实例的引用或匹配此实例的开头。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-28T09:05:25.580

两个字符串的前 N ​​个字符相同。N 是第二个字符串的长度，即零。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2011-06-21T23:10:09.387

> *为什么“abcd”.StartsWith(“”) 返回 true？*

真正的答案：

必须是这样，否则你会遇到这样的情况

```
 "".startsWith("") == false 
    "".equals("") == true

    but yet

    "a".startsWith("a") == true
    "a".equals("a") == true 
```

然后我们将再次拥有千年虫，因为所有依赖于以自身开头的相同字符串的银行软件都会混淆我们的账户，突然间比尔盖茨将拥有我的财富，而我将拥有他的财富，该死！命运对我不是那么好。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-01-27T17:39:45.177

只是为了记录，`String.StartsWith()`内部调用了`System.Globalization.CultureInfo.IsPrefix()`明确进行以下检查的方法：

```
if (prefix.Length == 0)
{
    return true;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-28T09:05:56.890

因为字符串以“nothing”开头。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-28T09:14:26.590

如果您以正则表达式的形式考虑它，那是有道理的。每个字符串（不仅是 "abcd"，还有 "" 和 "sdf\nff"）在评估“以空字符串开头”的正则表达式时都返回 true。

# .net - WWF 是否提供 BPEL 集成？

> ID：145511
> 
> 赞同：2
> 
> 时间：2008-09-28T09:01:01.973
> 
> 标签：.net, workflow-foundation, bpel

我从 Microsoft 找到了用于此类集成的 CTP，但它似乎从未正式发布和支持。

另外 - 您知道 WWF 到 BPEL 活动映射的列表吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T10:08:47.223

可能我们不能指望微软真正的 WF-BPEL 集成。即使是您找到的 CTP，也不是集成工作，而是导入/导出工具。David Chappel 的[帖子](http://www.davidchappell.com/blog/2007/02/windows-workflow-foundation-and-bpel.html)（和评论）表明我们不能对此抱有太多期望。

# asp.net-mvc - sutekishop 中的 System.Web.HttpContextWrapper2 错误 - MVC 3

> ID：145523
> 
> 赞同：1
> 
> 时间：2008-09-28T09:06:09.433
> 
> 标签：asp.net-mvc

我目前正在尝试使用[sutekishop .Net CMS 产品](http://code.google.com/p/sutekishop/)，但收到错误“无法加载类型'System.Web.HttpContextWrapper2'...”这是 MVC 程序集不匹配吗？我已经卸载了 mvc 5 并安装了 3（根据设置需要），但我仍然遇到问题。有任何想法吗？

里斯

完整错误：

无法从程序集“System.Web.Abstractions，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”加载类型“System.Web.HttpContextWrapper2”。

[TypeLoadException：无法从程序集“System.Web.Abstractions，版本=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”加载类型“System.Web.HttpContextWrapper2”。] System.Web.Mvc.MvcHandler.ProcessRequest(HttpContext httpContext）+0 System.Web.Mvc.MvcHandler.System.Web.IHttpHandler.ProcessRequest（HttpContext httpContext）+36 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute（）+181 System.Web.HttpApplication。 ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-29T19:45:58.387

您最近是否升级到 .NET 3.5 SP1？我们做到了，它在我们的 MVC 网站上导致了这个确切的错误消息（我们使用的是 MVC Preview 2）。

卸载 .NET 3.5 SP1 后，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T23:44:02.317

是的，我已经升级了。由于这不是任务关键的东西，它是我 GF 的新贵业务，所以我决定我想要最新的，所以我想把它移植到 MVC 5，我对倒退不感兴趣。如果这是我走的路，我想我将不得不受苦。反正加油。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-01T07:48:51.823

谢谢，但我（可能是愚蠢的）试图将整个事情移植到 MVC 5。作为一个 ASP.net MVC 菜鸟，这可能会变得非常有趣......在这个阶段项目构建但测试没有。我真的希望有一些像样的文档，或者至少是一个重大更改文档可供参考。:(

# linux - 在 Linux 上沙箱 Apache 的最佳方法

> ID：145540
> 
> 赞同：18
> 
> 时间：2008-09-28T09:16:36.147
> 
> 标签：linux, security, apache, debian, sysadmin

我在面向公众的 Debian 服务器上运行 Apache，有点担心安装的安全性。这是一台承载几个空闲时间爱好项目的机器，所以我们使用这台机器的人都没有真正有时间持续关注上游补丁、注意安全问题等。但我想让坏人远离，或者如果他们进来了，就把他们放在沙箱里。

那么这里最好的、易于设置、易于维护的解决方案是什么？在 Debian 上设置用户模式 ​​linux 沙箱容易吗？或者也许是 chroot 监狱？我想从外部轻松访问 sadbox 内的文件。这是我非常清楚我是程序员而不是系统管理员的时候之一。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-28T09:24:33.163

当您运行一个完整的沙盒环境时，Chroot 监狱可能真的很不安全。攻击者可以完全访问内核功能，例如可以挂载驱动器来访问“主机”系统。

我建议你使用 linux-vserver。您可以将 linux-vserver 视为一个改进的 chroot 监狱，其中包含完整的 debian 安装。它非常快，因为它在一个内核中运行，并且所有代码都是本地执行的。

我个人使用 linux-vserver 来分离我的所有服务，并且几乎没有明显的性能差异。

查看[linux-vserver wiki](http://linux-vserver.org/Installation_on_Debian)以获取安装说明。

问候，丹尼斯

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T14:04:03.740

我赞同 xardias 的说法，但推荐使用[OpenVZ](http://wiki.openvz.org/)。

它类似于 Linux-Vserver，因此您可能希望在走这条路线时比较这两者。

我已经设置了一个带有代理 http 服务器（[nginx](http://nginx.net/)）的网络服务器，然后它将流量委托给不同的 OpenVZ 容器（基于主机名或请求的路径）。在每个容器中，您可以设置 Apache 或任何其他网络服务器（例如 nginx、lighttpd、..）。这样一来，您就不需要一个 Apache 来处理所有事情，而是可以为任何服务子集（例如，每个项目）创建一个容器。

OpenVZ 容器可以很容易地完全更新（“for i in $(vzlist); do vzctl exec apt-get upgrade; done”）

不同容器的文件存储在硬件节点中，因此您可以通过 SFTP 轻松访问它们到硬件节点。除此之外，您*可以*向某些容器添加公共 IP 地址，在其中安装 SSH，然后直接从容器中访问它们。我什至听说过 SSH 代理，所以即使在这种情况下，额外的公共 IP 地址也可能是不必要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T09:18:04.270

您始终可以在虚拟机中设置它并保留它的映像，以便在需要时重新滚动它。这样，服务器就从您的实际计算机中抽象出来，并且任何病毒等都包含在虚拟机中。正如我之前所说，如果您保留图像作为备份，则可以很容易地恢复到以前的状态。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-28T09:40:42.547

可以肯定的是，CHRoot Jails 很少是一个好主意，尽管有意图，但很容易突破，事实上我看到它是用户不小心做的！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-28T13:37:21.170

无意冒犯，但如果您没有时间关注安全补丁并时刻注意安全问题，那么无论您的设置如何，您都应该担心。另一方面，您正在考虑这些问题这一事实使您与其他 99.9% 的此类机器所有者区分开来。你在正确的道路上！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-28T18:08:58.100

令我惊讶的是，没有人提到[mod_chroot](http://core.segfault.pl/~hobbit/mod_chroot/)和[suEXEC](http://httpd.apache.org/docs/2.2/suexec.html)，它们是你应该开始的基本东西，而且很可能是你唯一需要的东西。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-03T14:31:50.260

你应该使用 SELinux。我不知道它在 Debian 上的支持情况如何；如果不是，只需在 VM 中安装启用 SELinux 的 Centos 5.2。不应该做太多的工作，而且比任何业余 chrooting 安全得多，这并不像大多数人认为的那样安全。SELinux 以难以管理而著称，但如果您只是在运行网络服务器，那应该不是问题。您可能只需要执行一些“sebool”即可让 httpd 连接到数据库，但仅此而已。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-30T11:14:09.720

虽然以上都是很好的建议，但我还建议添加一个 iptables 规则来禁止意外的传出网络连接。由于大多数自动化 Web 漏洞所做的第一件事就是下载其余的有效载荷，因此阻止网络连接会减慢攻击者的速度。

可以使用一些类似的规则（注意，您的网络服务器可能需要访问其他协议）： iptables --append OUTPUT -m owner --uid-owner apache -m state --state ESTABLISHED,RELATED --jump ACCEPT iptables - -append OUTPUT -m owner --uid-owner apache --protocol udp --destination-port 53 --jump ACCEPT iptables --append OUTPUT -m owner --uid-owner apache --jump REJECT

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-30T11:21:23.107

如果使用 Debian，debootstrap 是你的朋友，再加上 QEMU、Xen、OpenVZ、Lguest 或其他许多。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-28T09:19:23.660

做一个虚拟机。尝试类似 vmware 或 qemu

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-28T17:40:44.377

你真正想解决什么问题？如果您关心该服务器上的内容，则需要防止入侵者进入它。如果您关心入侵者会对您的服务器做什么，您需要限制服务器本身的功能。

这些问题都不能通过虚拟化来解决，而不会严重削弱服务器本身。我认为您的问题的真正答案是：

1.  运行一个为您提供简单的操作系统更新机制的操作系统。
2.  使用供应商提供的软件。
3.  经常备份一切。

# reflection - 通用反射 API？

> ID：145551
> 
> 赞同：2
> 
> 时间：2008-09-28T09:24:41.900
> 
> 标签：reflection

前段时间我正在研究一种处理代码的算法，并且需要一个反射 API。我们对它在多种语言中的实现很感兴趣，但是一种语言的反射 API 不适用于任何其他语言。那么是否有任何类似“通用反射 API”的东西适用于所有语言，或者可能适用于一些主流语言（.NET、Java、Ruby、Python）

如果没有，是否有可能构建这样一个可以处理来自不同语言的类的东西。

您将如何使用一种统一的方式来处理来自多种语言的 OO 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T09:38:35.050

我不相信有通用的反射 API。任何反射 API 都依赖于编译器为语言构造生成的元数据，并且这些元数据可能因语言而异，即使在多种语言中有一个公共子集也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T14:04:44.893

反射 API 依赖于为代码生成的元数据，因此您可以为 JVM 上的所有语言或 CLR 上的所有语言提供通用 API……但实际上不可能制作出 Python 的通用 API， Java、VB等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T09:59:48.557

在 .NET 中有[CodeDOM](http://msdn.microsoft.com/en-us/library/650ax5cx.aspx)，它提供了一种生成通用语法树的方法，然后将其序列化为（C#、VB .NET 等）代码和/或编译它。当然，这是反射的镜像，但是如果有人编写了一个工具来直接从 IL 生成 AST，那么功能可能会开始重叠。

无论如何，它是我能想到的最接近的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-08T05:10:27.420

如果你想要一个通用的 API，你需要跳出语言。请参阅我们的[DMS 元工具](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)，用于处理任意语言并回答任意问题，包括您认为是反思的问题。（Op 要求支持各种语言：DMS 具有针对 C#、VB.net、Java 和 Python 的完整解析器。Ruby 尚未在列表中；我们正在努力）。

# shell - 如何编写 shell 脚本以将 grep 数据定向到基于日期的文件名？

> ID：145552
> 
> 赞同：5
> 
> 时间：2008-09-28T09:25:01.713
> 
> 标签：shell, grep, date, scripting, filenames

我基本上想这样做：

```
grep 'example.com' www_log > example.com.YYYY-MM-DD-H:i:S.log 
```

...当然文件名是**example.com.2008-09-27-11:21:30.log**

然后我把它放在 crontab 中每天运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T09:27:50.783

详细方法：

```
grep 'example.com' www_log > `date +example.com.%Y-%m-%d-%H:%M:%S.log` 
```

简洁的方法：

```
grep 'example.com' www_log > `date +example.com.%F-%T.log` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T09:30:42.463

```
grep 'example.com' www_log > example.com.$(date +%F-%T).log 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T09:41:07.227

这是我通常使用的另一种方式：

```
grep 'example.com' www_log > example.com.`date +%F-%T`.log 
```

* * *

反引号是命令替换的一种形式。另一种形式是使用 $()：

```
$(command) 
```

这与以下内容相同：

```
`command` 
```

# c++ - 查找给定数字组中数字的频率

> ID：145563
> 
> 赞同：8
> 
> 时间：2008-09-28T09:38:37.093
> 
> 标签：c++, c, algorithm, puzzle, frequency

假设我们有一个 C++ 中的向量/数组，我们希望计算这 N 个元素中哪些元素的重复出现次数最多，并输出最高次数。哪种算法最适合这项工作。

例子：

```
int a = { 2, 456, 34, 3456, 2, 435, 2, 456, 2} 
```

输出为 4，因为 2 出现了 4 次。这是 2 出现的最大次数。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-28T09:44:55.953

对数组进行排序，然后快速通过以计算每个数字。该算法具有 O(N*logN) 复杂度。

或者，使用数字作为键创建一个哈希表。在哈希表中为您键入的每个元素存储一个计数器。您将能够一次计算所有元素；但是，算法的复杂性现在取决于您的 hasing 函数的复杂性。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-28T10:17:17.123

**空间优化：**

快速排序（例如）然后迭代项目，仅跟踪最大计数。充其量是 O(N log N)。

**针对速度进行了优化：**

遍历所有元素，跟踪单独的计数。该算法将始终为 O(n)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-28T10:47:35.943

如果您有 RAM 并且您的值不是太大，请使用[计数排序](http://en.wikipedia.org/wiki/Counting_sort)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-28T10:49:35.410

使用 STL 的可能 C++ 实现可能是：

```
#include <iostream>
#include <algorithm>
#include <map>

// functor
struct maxoccur
{
    int _M_val;
    int _M_rep;

    maxoccur()
    : _M_val(0),
      _M_rep(0)
    {}

    void operator()(const std::pair<int,int> &e)
    {
        std::cout << "pair: " << e.first << " " << e.second << std::endl;
        if ( _M_rep < e.second ) {
            _M_val = e.first;
            _M_rep = e.second;
        }
    }
};

int
main(int argc, char *argv[])
{
    int a[] = {2,456,34,3456,2,435,2,456,2};
    std::map<int,int> m; 

    // load the map
    for(unsigned int i=0; i< sizeof(a)/sizeof(a[0]); i++) 
        m [a[i]]++;

    // find the max occurence...
    maxoccur ret = std::for_each(m.begin(), m.end(), maxoccur());
    std::cout << "value:" << ret._M_val << " max repetition:" << ret._M_rep <<  std::endl;

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T09:46:02.207

一些伪代码：

```
//split string into array firts
strsplit(numbers) //PHP function name to split a string into it's components
i=0
while( i < count(array))
 {
   if(isset(list[array[i]]))
    {
      list[array[i]]['count'] = list + 1
    }
   else
    {
      list[i]['count'] = 1
      list[i]['number']
    }
   i=i+1
 }
usort(list) //usort is a php function that sorts an array by its value not its key, Im assuming that you have something in c++ that does this
print list[0]['number'] //Should contain the most used number 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T20:26:52.247

哈希算法（在基本线性时间内构建 count[i] = #occurrences(i)）非常实用，但理论上不是严格意义上的 O(n)，因为在此过程中可能存在哈希冲突。

这个问题的一个有趣的特例是多数算法，如果存在任何这样的元素，您想要找到至少存在于 n/2 个数组条目中的元素。

这是一个[快速解释](http://www.cs.utexas.edu/~moore/best-ideas/mjrty/example.html)，以及如何在线性时间内执行此操作的[更详细解释](http://people.cis.ksu.edu/~subbu/Papers/Majority%20Element.pdf)，没有任何散列技巧。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T16:47:37.670

如果元素的范围与元素的数量相比很大，我会像其他人所说的那样进行排序和扫描。这是时间 n*log n 并且没有额外的空间（可能是额外的 log n）。

计数排序的问题在于，如果值的范围很大，则初始化计数数组可能比排序花费更多时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-18T05:19:43.937

这是我完整的、经过测试的版本，使用`std::tr1::unordered_map`.

我使这个大约为 O(n)。首先，它遍历 n 个输入值以插入/更新 中的计数`unordered_map`，然后执行`partial_sort_copy`O(n)。2*O(n) ~= O(n)。

```
#include <unordered_map>
#include <vector>
#include <algorithm>
#include <iostream>

namespace {
// Only used in most_frequent but can't be a local class because of the member template
struct second_greater {
    // Need to compare two (slightly) different types of pairs
    template <typename PairA, typename PairB>
    bool operator() (const PairA& a, const PairB& b) const
        { return a.second > b.second; }
};
}

template <typename Iter>
std::pair<typename std::iterator_traits<Iter>::value_type, unsigned int>
most_frequent(Iter begin, Iter end)
{
    typedef typename std::iterator_traits<Iter>::value_type value_type;
    typedef std::pair<value_type, unsigned int> result_type;

    std::tr1::unordered_map<value_type, unsigned int> counts;

    for(; begin != end; ++begin)
        // This is safe because new entries in the map are defined to be initialized to 0 for
        // built-in numeric types - no need to initialize them first
        ++ counts[*begin];

    // Only need the top one at this point (could easily expand to top-n)
    std::vector<result_type> top(1);

    std::partial_sort_copy(counts.begin(), counts.end(),
                           top.begin(), top.end(), second_greater());

    return top.front();
}

int main(int argc, char* argv[])
{
    int a[] = { 2, 456, 34, 3456, 2, 435, 2, 456, 2 };

    std::pair<int, unsigned int> m = most_frequent(a, a + (sizeof(a) / sizeof(a[0])));

    std::cout << "most common = " << m.first << " (" << m.second << " instances)" << std::endl;
    assert(m.first == 2);
    assert(m.second == 4);

    return 0;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-23T04:29:24.783

它将在 O(n) 中............但问题是大号。数组可以取另一个相同大小的数组............

对于（我=0；我

马尔=计数[o]；指数=o;

对于（我=0；我

那么输出将是............元素**索引**发生在**最大**编号。在这个数组中的次数............

这里 a[] 是我们需要搜索某个数字的最大出现次数的数据数组。在一个数组中......

count[] 具有每个元素的计数........注意：我们已经知道数据范围将在数组中.. 比如说。该数组中的数据范围从 1 到 100 ......然后有 100 个元素的计数数组来跟踪，如果它发生，则将索引值增加一......

# user-interface - 用于基于 Web 的管理界面的免费表单、图标、样式等

> ID：145565
> 
> 赞同：8
> 
> 时间：2008-09-28T09:39:22.597
> 
> 标签：user-interface

是否有任何免费的表单、图标、样式、图像等用于构建基于 Web 的管理界面？如果是，哪个是最好的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-28T09:45:07.827

一个特别常见的选择是[Silk](http://www.famfamfam.com/lab/icons/silk/)。这是一个非常全面的免费套装。还有[Silk Companion 1](http://damieng.com/creative/icons/silk-companion-1-icons)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T09:52:41.163

[Tango 图标](http://tango.freedesktop.org/Tango_Desktop_Project)是一组免费的语音图标。它包含在[CC Attribution Share Alike 2.5](http://creativecommons.org/licenses/by-sa/2.5/)许可下，因此它应该适用于商业工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T12:26:33.960

**[图标存档](http://www.iconarchive.com/) ![http://www.iconarchive.com/static/images/ia/logo/logo.png](https://i.stack.imgur.com/LvfHc.png)**

是任何类型图标的最佳来源之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T09:43:12.947

[http://www.iconspedia.com/](http://www.iconspedia.com/)

# c++ - 现有的标准样式和编码标准文档

> ID：145570
> 
> 赞同：15
> 
> 时间：2008-09-28T09:41:41.750
> 
> 标签：c++, coding-style, documentation, standards

为即将到来的 C++ 项目提出了以下建议。

*   C++ 编码标准，Sutter 和 Alexandrescu 着
*   JSF Air Vehicle C++ 编码标准
*   C++ 风格的元素
*   有效的 C++ 第 3 版，作者 Scott Meyers

还有其他选择吗？还是上面的列表应该在 C++ 项目中使用？

一些相关链接

*   [你认为软件公司应该强加开发人员编码风格吗？](https://stackoverflow.com/questions/145508/do-you-think-a-software-company-should-impose-developers-a-coding-style)
*   [https://stackoverflow.com/questions/66268/what-is-the-best-cc-coding-style-closed](https://stackoverflow.com/questions/66268/what-is-the-best-cc-coding-style-closed)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T11:14:05.913

[C++ 编码标准：101 条规则、指南和最佳实践](https://rads.stackoverflow.com/amzn/click/com/0321113586)（C++ 深度系列），作者 Herb Sutter 和 Andrei Alexandrescu。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-28T10:10:01.993

我真的认为，你采用哪一个并不重要，只要每个人都同意它。有时这可能很难，因为某些风格似乎不符合人们的口味。也就是说，它归结为争论所有成员变量的前缀`m_`是否*漂亮*。

我一直在使用和修改[Geosoft](http://geosoft.no/development/cppstyle.html)标准，这些是针对 C++ 的。[在你最喜欢的编码指南](https://stackoverflow.com/questions/409/what-is-your-favorite-coding-guidelines-checklist#139459)清单线程中还有一些其他内容

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-28T09:54:27.117

嗯，奇怪的问题。只需选择大多数团队成员都熟悉的标准。为您的团队进行某种民意调查。不知道SO如何在这里提供帮助:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-20T13:19:17.097

[高完整性 C++ 编码标准手册 - 2.4 版](http://www.codingstandard.com/HICPPCM/index.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-28T09:55:43.557

试试这个，它是美国宇航局戈达德太空飞行中心使用的那个。

[http://software.gsfc.nasa.gov/AssetsApproved/PA2.4.1.3.pdf](http://software.gsfc.nasa.gov/AssetsApproved/PA2.4.1.3.pdf)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-28T11:05:09.427

我为一家大型英国公司编写了一个编码标准，并且非常清楚为什么我选择某些东西而不是仅仅让它成为一堆“你应该”声明的原因。（-：

作为一个快速的出路，我建议强制：

*   Scott Meyers 的 Effective C++ 第 3 版（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0201924889)）——如果您能找到本书第 1 版的副本，请购买它以了解后来版本中删除的 OO 设计概述。)-:
*   Scott Meyer 的《Effective STL》一书（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0201749629)）——你必须使用 STL 才能有效地使用 C++。
*   Steve McConnell 的书 Code Complete 2（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0735619670)）- 不是 C++ 特定的，但充满了深刻的见解。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-28T11:11:03.330

编码标准只有在帮助您编写代码时才有意义。因此，他们只需要保持您的代码一致（即，如果有人将 m_ 用于变量成员而有人没有，则与他们都使用相同的样式相比，可能需要更长的时间来理解代码）。

这就是他们（应该）做的所有事情，所以只需拿起您现有的代码并确保您的团队代码风格相同。

我喜欢把它想象成卡通片。如果你成为辛普森一家的漫画家，你必须以官方的方式画眼睛，否则一切都看起来很裤子，但如果你去 Family Guy，你必须以不同的方式画它们。两种方式都没有错。

太多的标准是关于无意义的限制，由不自己编码（或认为自己太好以至于无法遵守）的人编写。其他人试图教你如何编码。两者都没有在一个好的标准中占有一席之地，那些只是让你更容易查看一些代码并理解它在做什么。

例如。我的标准包括命名目录的规则 - 您将始终将代码放在与项目同名的目录中，所有二进制文件都放在 bin 子目录中，所有配置文件都在同一个地方，还有一个变更日志等。简单的东西，但我保证我永远不会在我不知道对其进行了哪些更改的根目录中找到一个与其二进制文件不同的项目。简单，容易的东西，产生巨大的差异。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-28T19:34:50.030

我同意 Harald Scheirich 的观点，最重要的是让团队就规则应该是什么达成一致，而不是仅仅选择外人推荐的系列。

我个人的建议是阅读史蒂夫·麦康奈尔 (Steve McConnell) 的[Code Complete, 2nd Edition](http://cc2e.com/)，其中描述了（在许多其他有用的东西中）几种常见的编码标准并提供了对每个标准的评论。这可能有助于您的团队建立自己的标准。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-02-28T12:04:30.467

Lockheed Martin 的 JSF Air Vehicle C++ Coding Standards 是一本有趣的读物，但它有点矫枉过正，除非你在一个 bug 可以杀死人的领域工作。从计算机伦理的角度来看，它仍然是一个非常重要的例子，它是一个关于如何以安全和正确性为重中之重的编程示例。

对于通用 C++ 编码，我个人推荐Herb Sutter 的*C++ 编码标准*。从一开始，它就强调什么*不能*标准化（与风格或偏好有关的事情，而不是促进安全、正确和效率的做法）。它也是您列表中最简单的读物之一，为每个标准提供了非常简短但简洁的论据，使其易于向您的同事展示。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-28T22:36:09.347

[Poco C++ 编码风格指南.pdf](http://www.appinf.com/download/CppCodingStyleGuide.pdf)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-20T16:30:54.357

*   可可的Apple[编码指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.pdf)

*   [GNU 编码标准](http://www.gnu.org/prep/standards/standards.html)

*   贝尔实验室[推荐的 C 风格和编码标准](http://www.maultech.com/chrislott/resources/cstyle/indhill-cstyle.pdf)

*   [来自 POSIX / ISO 的保留名称](http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html)

*   Facebook [HHVM 编码约定](https://github.com/facebook/hhvm/blob/master/hphp/doc/coding-conventions.md)

*   [GeoSoft C++ 编程风格指南](http://geosoft.no/development/cppstyle.html)

*   [LLVM 编码标准](http://llvm.org/docs/CodingStandards.html)

*   [SunOS 的 C 风格和编码标准](http://www.cis.upenn.edu/~lee/06cse480/data/cstyle.ms.pdf)

# c++ - 从 C++ 创建、打开和打印 word 文件

> ID：145573
> 
> 赞同：16
> 
> 时间：2008-09-28T09:44:05.927
> 
> 标签：c++, windows, automation, ms-word

我有三个相关的问题。

我想创建一个名称来自 C++ 的 word 文件。我希望能够将打印命令发送到该文件，以便在用户不必打开文档并手动执行的情况下打印该文件，并且我希望能够打开该文档。打开文档应该只打开 word 然后打开文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-28T10:01:39.067

您可以使用 Office 自动化来完成此任务。[您可以在http://support.microsoft.com/kb/196776](http://support.microsoft.com/kb/196776)和[http://support.microsoft.com/kb/238972](http://support.microsoft.com/kb/238972)找到有关使用 C++ 的 Office 自动化的常见问题的答案。

请记住，要使用 C++ 进行 Office 自动化，您需要了解如何使用 COM。

以下是一些如何在 word usign C++ 中执行各种任务的示例：

*   [http://support.microsoft.com/kb/220911/en-us](http://support.microsoft.com/kb/220911/en-us)
*   [http://support.microsoft.com/kb/238393/en-us](http://support.microsoft.com/kb/238393/en-us)
*   [http://support.microsoft.com/kb/238611/en-us](http://support.microsoft.com/kb/238611/en-us)

这些示例中的大多数显示了如何使用 MFC 来完成，但使用 COM 操作 Word 的概念是相同的，即使您直接使用 ATL 或 COM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-04-28T07:08:26.617

作为对[类似问题](https://stackoverflow.com/questions/5813954/how-can-an-openoffice-document-be-created-in-c)的回答，我建议您查看[此页面](http://sebsauvage.net/wiki/doku.php?id=word_document_generation)，其中作者解释了他在服务器上生成 Word 文档所采用的解决方案，没有 MsWord 可用，没有自动化或第三方库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T10:16:13.930

如果您拥有该文件并且只想打印它，请查看Raymond Chen 博客上的[此条目。](http://blogs.msdn.com/oldnewthing/archive/2004/11/26/270710.aspx)您可以使用动词“打印”进行打印。

有关详细信息，请参阅[shellexecute msdn 条目](http://msdn.microsoft.com/en-us/library/bb762153.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T10:02:19.703

您可以使用自动化打开 MS Word（在后台或前台），然后发送所需的命令。

一个好的起点是知识库文章[Office Automation Using Visual C++](http://support.microsoft.com/kb/196776/)

[How To Use Visual C++ to Access DocumentProperties with Automation](http://support.microsoft.com/kb/238393/)中提供了一些 C 源代码（标题是 C++，但它是纯 C）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T09:58:11.727

我没有与 Microsoft Office 集成的经验，但我想你可以使用一些 API。

但是，如果您想要完成的是打印格式化输出并将其导出到可以在 Word 中处理的文件的基本方法，您可能需要查看 RTF 格式。该格式很容易学习，并且由 RtfTextBox（或者是 RichTextBox？）支持，它还具有一些打印功能。rtf 格式与 Windows 写字板 (write.exe) 使用的格式相同。

这还具有不依赖 MS Office 来工作的好处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-30T21:11:45.653

我对此的解决方案是使用以下命令：

```
start /min winword <filename> /q /n /f /mFilePrint /mFileExit 
```

这允许用户指定打印机，否。副本等

替换`<filename>`为文件名。如果包含空格，则必须用双引号括起来。（例如`file.rtf`，`"A File.docx"`）

它可以放在系统调用中，如下所示：

```
system("start /min winword <filename> /q /n /f /mFilePrint /mFileExit"); 
```

这是一个 C++ 头文件，其中包含处理此问题的函数，因此如果您经常使用它，则不必记住所有开关：

```
/*winword.h
 *Includes functions to print Word files more easily
 */

#ifndef WINWORD_H_
#define WINWORD_H_

#include <string.h>
#include <stdlib.h>

//Opens Word minimized, shows the user a dialog box to allow them to
//select the printer, number of copies, etc., and then closes Word
void wordprint(char* filename){
   char* command = new char[64 + strlen(filename)];
   strcpy(command, "start /min winword \"");
   strcat(command, filename);
   strcat(command, "\" /q /n /f /mFilePrint /mFileExit");
   system(command);
   delete command;
}

//Opens the document in Word
void wordopen(char* filename){
   char* command = new char[64 + strlen(filename)];
   strcpy(command, "start /max winword \"");
   strcat(command, filename);
   strcat(command, "\" /q /n");
   system(command);
   delete command;
}

//Opens a copy of the document in Word so the user can save a copy
//without seeing or modifying the original
void wordduplicate(char* filename){
   char* command = new char[64 + strlen(filename)];
   strcpy(command, "start /max winword \"");
   strcat(command, filename);
   strcat(command, "\" /q /n /f");
   system(command);
   delete command;
}

#endif 
```

# c++ - 哪种持续集成工具最适合 C++ 项目？

> ID：145586
> 
> 赞同：19
> 
> 时间：2008-09-28T09:55:31.450
> 
> 标签：c++, continuous-integration

Cruisecontrol 和 Hudson 是两个流行的持续集成系统。尽管这两个系统都能够很好地进行自动连续构建，但创建批处理或 bash 构建脚本，然后使用 Windows 调度程序或 cron 来安排构建似乎要容易得多。

是否有更好的 C++ 项目可用的持续集成系统？或者只是使用脚本和调度程序更简单？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-28T12:22:26.683

我们一直在 C++ 项目中使用[CruiseControl进行 CI。](http://cruisecontrol.sourceforge.net/)虽然它是我们使用 ant 的唯一用途，但 CruiseControl 的 ant 构建脚本只是启动了我们正常的构建脚本，所以它非常简单，我们很长一段时间都不需要更新它。因此，CrusieControl 基于 Java 的事实对我们来说根本不是问题。

使用巡航控制之类的主要好处是

*   一个显示构建状态的漂亮网页
*   每次构建后或构建失败后发送电子邮件
*   提交到源代码控制系统后自动构建
*   一个用于监控构建状态的 Firefox 插件
*   显示任何构建错误的输出。
*   显示自上次构建以来发生了哪些文件更改（有助于查看哪个开发人员破坏了构建）

当然，您可以自己编写一个脚本来完成所有这些工作，但为什么所有这些工作都有效呢？从长远来看，设置 CruiseControl（或类似的东西）的额外初始成本可能远低于维护和更新自定义 CI 构建脚本的成本。

如果您只需要启动每日构建并且由 cron 启动的简单脚本就足以满足您的需求，那么请务必这样做。但是，CI 的优点之一是您在每次签入后都会获得构建状态报告。编写脚本来完成这项工作需要更多的工作，而 CruiseControl 已经做到了。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-17T03:53:08.793

我们将[Hudson](http://hudson-ci.org/)用于 CI，[SonarQube](http://www.sonarqube.org/)用于代码度量。它们是集成的，而且 Hudson 有一些 cronjob 无法击败的插件。

一个很棒的插件是 CI Game，它记录了谁破坏了构建以及谁在没有破坏它的情况下提交。Hudson 有插件可以使用 VMWare、Selenium、SVN、CSV、Git。它具有 RSS 联合功能，可以帮助您将其他所有内容自动化。

哈德森很好...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-28T11:17:57.917

我一直在成功地将[Buildbot](http://buildbot.net/trac)用于[Spring RTS 引擎](http://spring.clan-sy.com/)项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-28T13:38:39.217

我们一直在使用[Dart Dashboard](http://www.itk.org/Dart/HTML/Index.shtml)。它是开源的，但由[KitWare](http://www.kitware.com/)驱动。从那以后，他们将名称更改为[Cdash](http://www.cdash.org/)，我认为它仍然有能力。我们正在进行多种测试，包括在调试和发布模式下跨 10 个不同平台的夜间和持续集成，以及运行 1000 次应用程序测试并在那里报告结果。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-28T13:46:13.580

您也可以尝试[JetBrains 的 TeamCity](http://www.jetbrains.com/teamcity/)。它是一个商业产品，但它提供了最多 20 个构建配置的免费许可证。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-02T17:56:17.600

持续集成 (CI) 工具的优点之一是每次将某些内容签入源代码控制存储库时都会触发构建。

如果这不是您需要的，那么您可能最好使用 Windows 任务调度程序或 cron 作业。

此外，CI 工具还带有（Web）仪表板和高级日志记录功能。

Your question seems to me more "why would I use a CI tool" then "which CI tool should I use". If a batch script serves your needs, please use that. (Re)creating a build environment only becomes easier if you do not need a CI tool as an additional component. If you want source control triggered build, a dashboard, storage of old build results or other logging, use a CI tool and avoid developing all such functions in batch or shell scripts.

# c# - 文本差异算法

> ID：145607
> 
> 赞同：42
> 
> 时间：2008-09-28T10:12:25.497
> 
> 标签：c#, python, diff

我需要一种算法，可以比较两个文本文件并突出它们的差异，并且（甚至更好！）可以以有意义的方式计算它们的差异（比如两个相似文件的相似度分数应该高于两个不同的文件，用“相似”这个词以正常术语定义）。这听起来很容易实现，但事实并非如此。

实现可以在 c# 或 python 中。

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-09-28T11:04:31.520

我可以推荐看看 Neil Fraser 的代码和文章：

[谷歌差异匹配补丁](http://code.google.com/p/google-diff-match-patch/)

> 目前可用于 Java、JavaScript、C++ 和 Python。无论使用哪种语言，每个库都具有相同的 API 和相同的功能。所有版本还具有全面的测试工具。

[尼尔弗雷泽：差异策略](http://neil.fraser.name/writing/diff/)- 理论和实施说明

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-28T23:02:33.917

在 Python 中，有[difflib](https://docs.python.org/3/library/difflib.html)，正如其他人所建议的那样。

`difflib`提供[SequenceMatcher](https://docs.python.org/3/library/difflib.html#difflib.SequenceMatcher)类，可用于为您提供相似率。示例函数：

```
def text_compare(text1, text2, isjunk=None):
    return difflib.SequenceMatcher(isjunk, text1, text2).ratio() 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-09-28T10:14:43.793

看看[difflib](http://docs.python.org/lib/module-difflib.html)。（Python）

这将计算各种格式的差异。然后，您可以使用上下文差异的大小来衡量两个文档的差异程度？

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-01-26T00:44:40.810

我目前的理解是，最短编辑脚本 (SES) 问题的最佳解决方案是带有 Hirschberg 线性空间细化的迈尔斯“中蛇”方法。

Myers 算法描述于：

> E. Myers，“O(ND) 差分算法及其变体”，
> Algorithmica 1, 2 (1986), 251-266。

GNU diff 实用程序使用 Myers 算法。

您所说的“相似度分数”在文献中称为“编辑距离”，它是将一个序列转换为另一个序列所需的插入或删除次数。

请注意，许多人引用了 Levenshtein 距离算法，但尽管很容易实现，但不是最佳解决方案，因为它效率低下（需要使用可能巨大的 n*m 矩阵）并且不提供“编辑脚本" 这是可用于将一个序列转换为另一个序列的编辑序列，反之亦然。

要获得良好的 Myers / Hirschberg 实施，请查看：

[http://www.ioplex.com/~miallen/libmba/dl/src/diff.c](http://www.ioplex.com/~miallen/libmba/dl/src/diff.c)

它包含的特定库不再维护，但据我所知 diff.c 模块本身仍然是正确的。

麦克风

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-09-28T10:35:02.603

[Bazaar](http://bazaar-vcs.org/)包含另一种差异算法，称为[耐心差异](http://bramcohen.livejournal.com/37690.html)（该页面上的评论中有更多信息），据称它比传统的差异算法更好。bazaar 发行版中的文件 'patiencediff.py' 是一个简单的命令行前端。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-28T10:27:49.440

如果您需要比线条更细的粒度，则可以使用 Levenshtein 距离。Levenshtein 距离是关于如何相似两个文本的直接度量。
您还可以使用它来提取编辑日志，并且可以进行非常细粒度的差异，类似于 SO 的编辑历史页面上的差异。请注意，尽管 Levenshtein 距离计算起来可能会占用大量 CPU 和内存，因此正如 Douglas Leder 所建议的那样，使用 difflib 很可能会更快。

参照。也是[这个答案](https://stackoverflow.com/questions/132478/how-to-perform-string-diffs-in-java#132547)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-28T19:21:45.303

有许多距离指标，正如 paradoja 提到的，有 Levenshtein 距离，但也有[NYSIIS](http://en.wikipedia.org/wiki/New_York_State_Identification_and_Intelligence_System)和[Soundex](http://en.wikipedia.org/wiki/Soundex)。在 Python 实现方面，我之前使用过[py-editdist](http://www.mindrot.org/projects/py-editdist/)和[ADVAS](http://advas.sourceforge.net/)。从某种意义上说，两者都很好，因为您可以将一个数字作为分数返回。先看看 ADVAS，它实现了一堆算法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-28T10:33:09.083

如前所述，使用 difflib。一旦你得到了不同的输出，你可能会发现不同字符串的[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)，以便给出它们之间差异程度的“值”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-12-21T01:31:09.693

您可以使用[最长公共子序列 (LCS) 问题](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem#Code_for_the_dynamic_programming_solution)的解决方案。另请参阅有关优化此解决方案的可能方法的讨论。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-12-21T01:39:30.260

我为不同的功能采用的一种方法是计算修改后的文件中有多少新数据，也许对您也有用。

我有一个差异/补丁实现 C#，它允许我获取两个文件，大概是同一文件的旧版本和新版本，并计算“差异”，但不是通常意义上的。基本上，我计算了一组可以在旧版本上执行的操作，以将其更新为与新版本具有相同的内容。

为了将它用于最初描述的功能，查看有多少新数据，我简单地运行了操作，并且对于从旧文件逐字复制的每个操作，具有 0 因子，以及插入新文本的每个操作（作为补丁的一部分分发，因为它没有出现在旧文件中）有一个 1 因素。所有字符都被赋予了这个工厂，它基本上给了我一长串 0 和 1 的列表。

然后我所要做的就是计算 0 和 1。在您的情况下，通过我的实现，与 0 相比，1 的数量较少意味着文件非常相似。

此实现还将处理修改后的文件从旧文件中插入副本的情况，甚至是重复的（即，您从文件开头复制一部分并将其粘贴到底部附近），因为它们都是旧文件中相同原始部分的副本。

我尝试了称重副本，以便第一个副本计为 0，并且相同字符的后续副本具有逐渐更高的因子，以便为复制/粘贴操作提供一些“新因子”，但我从未完成它作为项目被取消。

如果您有兴趣，可以从我的 Subversion 存储库中获得我的差异/补丁代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-03T12:11:29.180

看看[Fuzzy](http://pypi.python.org/pypi/Fuzzy)模块。它具有用于 soundex、NYSIIS 和双变音器的快速（用 C 语言编写）算法。

一个很好的介绍可以在：[http ://www.informit.com/articles/article.aspx?p=1848528](http://www.informit.com/articles/article.aspx?p=1848528)

# c# - 有终止子句时的最佳做法是什么......请参阅解释:)

> ID：145617
> 
> 赞同：4
> 
> 时间：2008-09-28T10:22:46.503
> 
> 标签：c#

情况如下：您有一个名为 FullScreenEnabled 的布尔属性。您输入某个方法，并且该方法中的代码在 FullScreenEnabled 为真时执行。您在日常编程中使用以下两种方法中的哪一种：

```
 private bool FullScreenEnabled { get; set; }
    // Check if FullScreenEnabled is false and return;
    private void Case1()
    {
        if (FullScreenEnabled == false)
        {
            return;
        }

        // code to be executed goes here!
    }

    // Surround the code by an if statement.
    private void Case2()
    {
        if (FullScreenEnabled)
        {
            // code to be executed goes here!
        }
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-28T10:29:16.940

```
private void MyMethod(bool arg){
   if(arg)
       return;
   //do stuff
}; 
```

（用于投票）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T10:30:33.707

我通常更喜欢第一个版本（在方法开始时保释）。它减少了嵌套，从而略微提高了可读性。如果您决定将来不需要检查条件，在第一个版本中删除 if 条件也更容易，特别是如果您有多个这样的检查。另外，它可以很容易地写成一行： if (!FullScreenEnabled) return;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T10:30:34.800

这取决于方法的长度和复杂性。如果方法很短，那么在 if 中嵌套是没有问题的（并且可能更清晰）。如果该方法有很多嵌套语句，那么立即返回将减少必要的缩进量，并可能略微提高可读性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T11:45:47.490

**如果**添加案例，第一种方法（使用**保护子句**）可以更好地扩展。第二种方法的问题在于，添加更多**if**语句将导致代码呈现[箭头反模式](http://c2.com/cgi/wiki?ArrowAntiPattern)，其中代码开始像箭头一样标识。

 ****有一篇非常好的文章在下面更详细地解释了这一点：

[编码恐怖：扁平箭头代码](http://www.codinghorror.com/blog/archives/000486.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T10:26:41.580

两种方法都没有发布。您应该阅读[编辑帮助](https://stackoverflow.com/editing-help)以确保代码实际出现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T10:31:22.893

它是关于是否应该测试正面或负面，即如果条件不满足则在方法开始处返回，或者仅在条件满足时执行代码。简而言之，我会选择后一种情况，而长期而言，我会选择前者。当有几个条件需要测试时，我总是选择提前退出。但这并没有什么不同。

但是请注意，在您的示例中是与 false 的比较。你应该改写 !FullScreenEnabled 。使代码更具可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T11:12:28.240

```
if (!FullScreenEnabled)
    throw new InvalidOperationException("Must be in fullscreen mode to do foo."); 
```

我的两分钱，值得。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-28T11:15:35.283

无论哪种方式都一样。

但是，如果您为单元测试运行代码覆盖率指标，`if (!FullScreenEnabled) return;`它将被视为一个单独的块，您必须创建一个单元测试来覆盖它以达到 100%。

当然，即使使用其他方法，您也可能希望有一个单元测试来验证您没有在 FullScreenEnabled 为 false 时执行您的代码。但是，如果你作弊而不写它，你仍然得到 100%。:-)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-28T12:05:15.227

我会采用第一种方法，我发现它比第二种方法更具可读性。基本上我认为：

1.  `if (FullScreenEnabled == false)`那么更具可读性`if (FullScreenEnabled)`。
2.  如果您继续在方法的开头进行“健全性”检查，则该方法将获得一个非常容易理解的良好结构。

然而，我认为这里有一条不需要跨越的细线，将`return`语句放在方法中间的太多地方确实会使它更复杂

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-28T10:30:25.987

```
private void MyMethod(bool arg){
    if(!arg){
        //do stuff
    }
} 
```

（用于投票）

# c++ - 将 C++ 代码移植到 MacOS 有哪些建议？

> ID：145621
> 
> 赞同：4
> 
> 时间：2008-09-28T10:25:44.093
> 
> 标签：c++, macos, g++, portability

对于即将到来的项目，计划将在 Windows 和 Linux 上编译的现有 C++ 代码移植到 MacOS（豹）。该软件是命令行应用程序，但可能会计划一个 GUI 前端。MacOS 使用 g++ 编译器。通过使用与 Linux 相同的编译器，似乎不会有任何问题，但总会有。

港口期间有什么建议或问题需要注意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-28T10:51:23.673

您的应用程序是否有 GUI，以及哪个（本机/Qt/Gtk+）？

如果没有，需要注意的问题（与 Linux 相比）主要在动态链接区域。OS X 使用“-dylib”和“-bundle”，实际上有两种动态库（运行时可加载库和普通库）。Linux只有一种（-shared），无论如何都比较宽松。

如果你的应用有 GUI，你需要在 Cocoa 中使用 Objective-C 重新编码。这意味着您也将进入一门新*语言*。有些人（比如 MS）已经使用了 Carbon（C++ API），但它正在被逐步淘汰。我不会向新项目推荐这个。

你最好的运气是使用 Qt 或 Gtk+。几天前已经（重新）宣布了一个原生 Gtk+ 端口（参见[Imendio](http://osnews.com/story/20326/Binary_Build_for_Native_Gtk_Mac_OS_X_Port_Released)）。

ps OS X 当然也运行 X11 二进制文件，但是将其推向您的任何客户可能是一条艰难的道路。他们习惯于使用 Aqua 界面，并因此而富有成效。考虑 X11 只是一个非常短期的解决方案。

pps OS X 附带的开源插件库的数量是有限的，它们的版本可能会落后。而在 Linux 中，您可以轻松地要求用户安装“libxxx vyy”，而在 OS X 中，有多种打包方法（fink、macports），对于商业工具，所需的库应该包含在应用程序中。OS X 为此提供了“应用程序包”和“框架”（本地副本，使应用程序自给自足）。Linux 没有这样的概念。这也会对你的构建系统产生很大的影响；也许您想在所有平台上尝试[SCons 之类的东西？](http://www.scons.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-07T14:29:22.503

您不需要将*所有内容*重新编码为 Objective-C。C++ 和 Objective-C 有一个奇怪的混蛋，它允许你使用 Objective-C 中的 C++ 代码，因此你可以智能地拆分 C++ 中的模型代码和 Objective-C 中的视图/控制器代码。要使用 Objective-C，只需使用 .mm 而不是 .m 为源代码文件添加后缀，即使在同一行中，您也可以混合大多数合法的 C++ 和 Objective-C 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T10:37:46.450

我们还没有移植到 MacOS，但一直在从 Linux 移植到各种 Unix，主要工作领域是安装和启动系统，所以希望将大部分工作放在那里（假设你现有的已经可以在 Linux 之间移植）和窗口）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T18:15:26.243

Macintosh (macosx) 本质上是底层的 FreeBSD（尽管它已经过调整）。Linux 和 FreeBSD 在系统编程方面存在一些差异。这些差异主要存在于各种系统调用之间......所以这对您的影响程度将取决于您的应用程序正在做什么以及您在执行期间进行的操作系统系统调用类型。

# asp.net - 为 ASP .NET 网站部署数据库

> ID：145638
> 
> 赞同：1
> 
> 时间：2008-09-28T10:37:41.117
> 
> 标签：asp.net, sql-server, database

我只是在浏览有关堆栈溢出的问题，并且我提出了一个帖子，它建议通过简单地复制 app_data 文件夹中的 mdf 文件并修改连接字符串来部署数据库。

我知道有些人在开发过程中确实在 app_code 中创建了一个 mdf 文件，但是为了上线，这真的是部署数据库的可行方式和良好实践吗？

我在开发期间通常做的是编写自己的 SQL 脚本文件来构建数据库，并在我的本地 SQL 服务器上运行它。当站点即将上线时，我在目标服务器上运行脚本并将我的站点设置为与数据库通信。老实说，我从来没有使用 app_code 文件夹来存储数据库，我通常用它来存储我的数据访问层逻辑。

我在这里做错了吗？利用 app_data 文件夹存储数据库真的是一个好习惯吗？我可以用这种方法看到的一个问题是，部署会很慢。通过 Internet 传输 mdf 文件肯定比运行我的 sql 脚本文件慢得多。期待听到您在这件事上的想法和经验。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T11:03:33.457

我个人更喜欢您部署数据库的方法，我认为这样做有一个很大的优势：通常 Web 和 DBServer 不应该是一台机器（安全性、可维护性等），并且使用 app_code 文件夹来保存您的数据库似乎有点轻信.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T11:08:19.373

另一个缺点是 MDF 文件部署只能在第一次工作。一旦您活着并需要保留数据，这将是不够的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T11:15:17.797

app_data 部署方案对于没有独立数据库服务器的网站很有用（许多免费/较便宜的主机使您能够做到这一点）。

这在理论上类似于使用 access 作为小型经典 ASP 网站的数据库的旧方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T12:54:22.380

根据我的经验，最佳实践涉及使用某种构建过程（可能是自动化的或您提到的脚本）。然后你把你的数据库分成以下几部分： 1）一次性事件——通常你会创建一次数据库；您可以插入数据一次或初始部署；架构更改 - 这些是在构建过程之外处理的。2) 存储过程、用户函数和其他可重复事件——由构建过程处理。

然后，构建过程在部署代码时部署数据库结构。

存储过程等是这样编写的，如果它们存在，则首先将其删除，然后再创建。

然后将这些脚本存储在您的代码存储库中 - 而不是 mdf。现在您可以进行版本控制、历史记录、控制您的构建过程等。至于文件夹——我将为核心数据库结构创建一个单独的项目文件夹——这些与“代码”不同，应该这样对待。但它们可能应该成为您解决方案的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T12:58:31.683

实际上，在我看来，数据库部署对于站点工具、大规模部署等很有用。部署包含数据库的预制应用程序可能是一个简单的过程。如果此版本的后续版本得到更新，它需要做的就是知道它是否升级。如果是，则运行更新本地数据库的脚本，否则复制到新数据库中。可以简化某些有限的场景。

# java - 如何在 Eclipse 中正确设置由 appfuse 创建的多模块 SpringMVC 应用程序？

> ID：145641
> 
> 赞同：4
> 
> 时间：2008-09-28T10:40:30.330
> 
> 标签：java, eclipse, spring, maven-2, appfuse

我正在尝试在 Eclipse 中设置一个多模块 SpringMVC appfuse 应用程序，但在 Eclipse 中导入项目后，我似乎在 Eclipse 中遇到了很多错误。谁能帮助我一步一步的指导，显示在 Eclipse 中设置此类应用程序的理想方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-01T05:39:58.857

您是否尝试过使用 Maven Eclipse 插件？您可以转到项目根文件夹（包含您的 pom.xml 文件的文件夹）并从命令行运行“mvn eclipse:eclipse”。

这将为您的每个模块构建项目文件，并创建相互依赖关系。您可以将您的多模块项目视为具有多个项目的工作区。

在加载时出现的大多数错误，在 mvn eclipse:eclipse 之后是因为存储库变量。您可以使用“mvn -Declipse.workspace= eclipse:add-maven-repo”来配置它。

有关 maven eclipse 插件的更多信息，请访问[http://maven.apache.org/plugins/maven-eclipse-plugin/](http://maven.apache.org/plugins/maven-eclipse-plugin/)。

问候， 博格丹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T14:16:15.460

有哪些错误？我能想到的最常见的问题是库错误，在这种情况下，您必须编辑构建路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-01T05:34:35.563

根据我对多模块项目的回忆，eclipse 不能很好地处理这个问题。这将有助于查看您遇到的具体错误，然后从那里开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-14T18:13:29.677

我知道这个问题，它与 Appfuse 无关，而是与 Maven 本身有关。我建议按照以下步骤操作：

*   设置你的项目；
*   创建所需的每个目录/源：主要是 java 源和资源文件，用于应用程序和单元测试；
*   确保一切都编译并且所有测试都通过。为此，您可以检查

    mvn包

*   使用 Eclipse Maven 插件：

    mvn 日食：日食

这样，项目将包含类路径中所需的所有内容：Spring 和 Log4j 配置文件、资源等。

如果您已经执行了 mvn eclipse:eclipse 命令，只需从 Eclipse 中删除项目（不要删除文件！），从目录中删除 Eclipse 特定文件，重新运行 mvn eclipse:eclipse

我的 2 美分

# google-app-engine - 在 Google App Engine 中使用 Cron 作业

> ID：145651
> 
> 赞同：31
> 
> 时间：2008-09-28T10:55:32.180
> 
> 标签：google-app-engine, cron

如何在 Google App Engine 上使用 Cron？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-08T21:10:43.707

Google 已在 AppEngine 中正式启用 cron，更多详情请查看：

用于 Python 的 Cron： [http ://code.google.com/appengine/docs/python/config/cron.html](http://code.google.com/appengine/docs/python/config/cron.html)

Java 的 Cron： [http ://code.google.com/appengine/docs/java/config/cron.html](http://code.google.com/appengine/docs/java/config/cron.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T10:59:13.077

[本页](http://groups.google.com/group/httpmr-discuss/browse_thread/thread/1648611a54c01aa)列出了如何在 Google Appengine 上实现类似 Cron 的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-09T10:21:09.377

您现在可以使用 google appengine 运行计划任务

[http://code.google.com/appengine/docs/python/config/cron.html#Securing_URLs_for_Cron](http://code.google.com/appengine/docs/python/config/cron.html#Securing_URLs_for_Cron)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T11:19:07.210

阅读[问题 6](http://code.google.com/p/googleappengine/issues/detail?id=6)的评论以了解可能的解决方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-29T08:21:08.083

这是一个示例[http://cron-tab.appspot.com/](http://cron-tab.appspot.com/ "cron 选项卡")，python 源代码可在 code.google.com/p/cron-tab/ 的相关项目中获得

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-06T15:21:59.497

看[这篇文章](http://groups.google.com/group/google-appengine/msg/9a94aaf4a3b9415f)——也许很快我们就会在 GAE 中获得类似 cron 的功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-18T13:40:31.727

使用[http://schedulerservice.appspot.com/](http://schedulerservice.appspot.com/)或[http://code.google.com/p/gaeutilities/wiki/Cron](http://code.google.com/p/gaeutilities/wiki/Cron)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-19T07:42:15.070

根据官方 AppEngine 博客的公共[路线图更新](http://googleappengine.blogspot.com/2009/02/roadmap-update.html)两周前，计划任务（以及后台任务队列）将于近期发布（“在未来六个月内”，截至 2009 年 2 月 6 日） .

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2010-11-23T16:21:05.990

以下是使用 Google App Engine Cron Job 发送自动电子邮件的教程：

[http://www.fishbonecloud.com/2010/11/automated-email-using-google-app-engine.html](http://www.fishbonecloud.com/2010/11/automated-email-using-google-app-engine.html)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-06-18T09:53:21.877

您可以使用 GAE Cron 作业，但要小心，因为它们不支持 HTTPS！

# testing - 比较大量 PDF 文件的工具？

> ID：145657
> 
> 赞同：84
> 
> 时间：2008-09-28T11:02:13.100
> 
> 标签：testing, pdf, compare

我需要比较大量 PDF 文件的光学内容。由于 PDF 文件是在不同平台上创建的，并且使用不同版本的软件，因此存在结构差异。例如：

*   文本的分块可以不同
*   写入顺序可以不同
*   位置可以不同一些像素

它应该像人一样比较内容，而不是内部结构。我想测试我们使用的不同版本的 PDF 生成器之间的回归。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2010-02-16T08:34:47.007

因为没有我们编写过的可用工具。您可以下载[i-net PDF 内容比较器](http://www.inetsoftware.de/products/pdf-content-comparer)并使用它。我希望能帮助其他有同样问题的人。如果您有任何问题或您有反馈给我们，那么您可以联系我们的支持。

![在此处输入图像描述](https://i.stack.imgur.com/CvV5W.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2011-05-03T11:49:15.717

实际上有一个 diffpdf 工具。

[http://www.qtrac.eu/diffpdf.html](http://www.qtrac.eu/diffpdf.html)

它的弱点是当添加使新文本部分转移到新页面时，它反应不佳。例如，如果要将旧的第 4 页与第 5 页的末尾和第 6 页的开头进行比较，则需要转换参数以分别比较两个切片。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2010-02-10T08:59:38.717

我使用了一个自制的脚本

*   将两个 PDF 上的所有页面转换为位图
*   将 PDF 1 的页面着色为红底白字
*   在 PDF 2 的页面上将白色变为透明
*   将 PDF 2 中的每一页覆盖在 PDF 1 中相应页面的顶部
*   在多个内核上并行运行转换/着色和覆盖

使用的软件：

*   用于 PDF 到位图转换的 GhostScript
*   ImageMagick 用于着色、透明度和叠加
*   inotify 用于同步并行进程
*   任何支持 PNG 的图像查看器，用于查看结果

优点：

*   简单的实现
*   使用的所有工具都是开源的
*   非常适合发现布局中的微小差异

缺点：

*   转换很慢
*   PDF 之间的主要差异（例如分页）导致混乱
*   位图不可缩放
*   仅适用于黑白文本和图表
*   没有易于使用的 GUI

我一直在寻找一种可以在 PDF/PostScript 级别上执行相同操作的工具。

以下是我们的脚本调用实用程序的方式（注意 ImageMagick 在后台使用 GhostScript 进行 PDF->PNG 转换）：

```
$ convert -density 150x150 -fill red -opaque black +antialias 1.pdf back%02d.png
$ convert -density 150x150 -transparent white +antialias 2.pdf front%02d.png
$ composite front01.png back01.png result01.png # do this for all pairs of images 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2011-05-08T06:36:38.637

我似乎无法在这里看到这个，所以这里是：通过[超级用户：如何比较两个 PDF 文件之间的差异？（答案＃229891，@slestak）](https://superuser.com/questions/46123/how-to-compare-the-differences-between-two-pdf-files/229891#229891)，有

[https://github.com/vslavik/diff-pdf](https://github.com/vslavik/diff-pdf)

（Ubuntu Natty 的构建步骤可以在[get-diff-pdf.sh](http://sdaaubckp.svn.sourceforge.net/viewvc/sdaaubckp/source-build-scripts/get-diff-pdf.sh?content-type=text%2Fplain)中找到）

据我所知，它基本上覆盖了pdf（s）中每一页的文本/图形，让您轻松查看是否有任何变化......

干杯!

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2010-02-10T09:08:33.220

我们还使用[pdftotext](http://en.wikipedia.org/wiki/Pdftotext)（请参阅 Sklivvz 的答案）生成 PDF 的 ASCII 版本，并使用[wdiff](http://www.gnu.org/software/wdiff/)来比较它们。

使用 pdftotext 的`-layout`开关来增强可读性并了解布局的变化。

要从 wdiff 获得漂亮的彩色输出，请使用以下包装脚本：

```
#!/bin/sh
RED=$'\e'"[1;31m"
GREEN=$'\e'"[1;32m"
RESET=$'\e'"[0m"
wdiff -w$RED -x$RESET -y$GREEN -z$RESET -n $1 $2 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-29T15:04:11.670

我认为您最好的方法是将 PDF 转换为具有不错分辨率的图像，而不是进行图像比较。

要从 PDF 生成图像，您可以使用 Adob​​e PDF Library 或[Best way to convert pdf files to tiff files](https://stackoverflow.com/questions/75500/best-way-to-convert-pdf-files-to-tiff-files)中建议的解决方案。

为了比较生成的 TIFF 文件，我发现 GNU [tiffcmp （对于](http://www.libtiff.org/man/tiffcmp.1.html)[GnuWin32 tiff](http://gnuwin32.sourceforge.net/packages/tiff.htm)的 windows 部分）和[tiffinfo](http://www.libtiff.org/man/tiffinfo.1.html)做得很好。使用 tiffcmp -l 并计算输出的行数以找出任何差异。如果您乐于进行少量内容更改（例如抗锯齿差异），则使用 tiffinfo 计算像素总数，然后您可以生成百分比差异值。

顺便说一句，对于任何在结构没有改变的情况下进行简单 PDF 比较的人，都可以使用命令行 diff 并忽略某些模式，例如使用 GNU diff 2.7：

```
diff --brief -I xap: -I xapMM: -I /CreationDate -I /BaseFont -I /ID --binary --text
```

这仍然存在一个问题，即它并不总是能捕捉到生成的字体名称的变化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-08-03T00:09:37.030

我们的产品 PDF 比较器 - [http://www.premediasystems.com/pdfc.html](http://www.premediasystems.com/pdfc.html) “ - 将非常优雅和高效地完成此操作。它也不是免费的，并且是仅 Mac OS X 的应用程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-02-04T00:52:26.357

根据您的需要，转换为文本的解决方案将是最简单和最直接的。我确实认为位图的想法很酷。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-03-23T13:55:31.710

blubeam pdf 软件将为您执行此操作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-03-28T21:13:48.163

您可以使用 Tarkware Pdf Comparer批量[比较 pdf文件。](http://www.tarkware.com/comparer.html)但它不是免费的，需要 Adob​​e Acrobat。

# language-agnostic - 如何处理复杂的事情？

> ID：145676
> 
> 赞同：7
> 
> 时间：2008-09-28T11:22:07.483
> 
> 标签：language-agnostic, abstraction

您知道代码中对项目至关重要但可能需要大量时间才能完成的特定部分吗？您是否曾经觉得您宁愿从事其他事情（可能不太重要）或根本不编写代码而不是从事那部分工作？你那么努力避免并使用你知道的每一个懒惰的技巧来延迟它不可避免的实施？

现在，我可能只是懒惰，但我总是不得不处理这样的代码。写一些我不想写的东西（如果你是为了好玩而没有得到报酬，那就更糟了！）。一个大型系统需要花费大量时间才能进入一个阶段，在该阶段您可以获得任何有用的结果或表明它正在工作的迹象。你如何开始编写这样的代码？大多数人可能会建议分而治之和类似的架构技术，但这与您如何做无关；这是关于你如何让自己开始做这件事的。你会采取的第一步是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-28T11:30:37.540

我将讲述一个发生在我身上的案例。

我想为使用前向动态编程（维特比算法）的 x264 实现一种新的帧类型决策算法。但它会变得复杂、凌乱、丑陋等等。我真的不想这样做。我试图将这个项目抵押到 Google Summer of Code 上，但由于某种糟糕的运气，我们让一个学生简单地放弃了他的项目……就是选择那个项目的学生。

所以经过两个月的抱怨和回避之后，我终于开始研究算法了。这就是我的做法。

首先，我与另一位开发人员进行了交谈，他显然已经对如何做到这一点有了一些想法。我们讨论过，他向我解释，直到我从算法的角度完全理解了这个过程。这是任何此类项目的第一步：充分了解其背后的算法，以便您可以对整个事物进行伪代码。

然后，我和我的另一位同事交谈。我们走到一块白板上，我把它画出来，直到*他*也理解为止。通过向别人解释它，我获得了自己的理解。这是第二步：向其他人解释算法，以便*他们*可以对其进行伪编码。这是对编程过程的模拟，因为编程是向计算机“解释”算法的一种形式。

然后，我编写了一个简单的 Java 原型，它使用任意假值作为成本函数，并且仅用于测试 Viterbi 搜索。我完成了它，并通过详尽的搜索检查了它——它完全匹配。我的动态编程是正确的。这是第三步：在最简单的环境中编写最简单的算法形式。

然后我将它移植到 x264 的母语 C。它再次起作用了。这是第四步：将算法的简单形式移植到完整的环境中。

然后，最后，我用真实的成本函数替换了假成本函数。经过一些错误搜索和修复后，它起作用了。这是最后一步：将算法与环境完全集成。

这个过程只用了一周时间，但从项目开始时的我的角度来看，这完全是令人生畏的，我什至无法开始——然而把它分解成这样一个循序渐进的过程，我不仅[能够完成它](http://git.videolan.org/?p=x264.git;a=commitdiff;h=9818865c1f5eccbc04fb51f062cb1b3abff02db0)，而且比我预期的要快得多。

好处远远超出了 x264；我现在对维特比了解得如此透彻，以至于我现在可以向其他人解释……其他人也可以从中受益匪浅。例如，一个 ffmpeg 开发人员正在使用我的算法和代码的改编来优化解决一个稍微不同的问题：音频文件中的最佳标题放置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T11:30:40.117

一般来说，我喜欢大而复杂的部分。它们是真正扩展挑战并迫使我仔细考虑我在做什么的部分。这是我不喜欢的所有小而乏味的部分。然而，当谈到做任何我一直在拖延的事情时，我发现一个简单的建议很重要：做

*它！*

说真的，一旦开始，完成就容易多了。我总是发现我把事情推迟到开始之前，然后突然发现，现在我开始了，它并没有我想象的那么糟糕，你看，它已经快完成了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-28T11:31:19.770

分而治之不仅仅是构建代码，它还可以作为一种使项目在概念上易于管理的方法。如果我很难开始一个项目，那几乎总是因为它又大又**可怕**。通过划分成概念上可管理的部分，它变得不那么可怕了。

我也相信务实的程序员所描述的“[追踪子弹”。](http://www.artima.com/intv/tracer.html)**将**项目简化为核心部分的最简单的“概念证明”，例如没有 UI、特殊情况、错误处理等。也许它只是一些带有相关单元测试的核心例程。有了这个，你已经征服了可怕的部分，并且可以从核心开始构建。

基本上开始的技巧（至少对我来说）是：不要从整个项目开始。从一个小的（最好是核心）部分开始，然后从那里开始构建。如果我*还是*很难入手，那是因为我决定的那个小部分还很大，所以我必须进一步划分和减少它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T11:27:34.990

我同意你的观点，软件的许多大而重要的部分编写起来并不有趣。我通常从一些较小的事情开始我的开发日，比如在这里添加一个功能，或者在那里修复一个错误。时间到了，我会从大部分开始，但是当我再也看不到东西时，我会做一些不同的事情。如果您仍然按时完成所有工作，那很好。记住，如果你在做之前、做的时候和做完之后和其他人谈论那个大型野兽，这可能会让事情变得更容易。这不仅可以解放你的思想，还可以从不那么主观的角度获得其他人的意见。一起计划这些事情也有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T11:29:39.477

有趣的是，我恰恰相反。当我开始解决问题时，我会先解决大问题。问题的核心通常是我感兴趣的。

如果我正在为自己做一个项目，我通常不会费心去实现边缘周围的所有模糊位，所以它们永远不会完成。如果我真的在做某事，我最终会得到所有模糊的部分，但这不是我最喜欢的部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T11:30:17.993

我认为这里有两个问题。

首先实际上是开始。正如你所说，这可能非常棘手。就我个人而言，我只是从任何一点开始，只是为了在纸/屏幕上得到一些东西。它可能是错误的，需要编辑，但总的来说，批评比创造更容易，即使是在你自己的工作上。

然后是解决难题的实际过程。有一本很棒的书叫做“概念大片”，它讨论了解决问题的各种方法。我学到了很多关于如何解决问题和使用那本书的盲点。强烈推荐。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T11:35:12.633

我试图为系统试图做的事情建立一个隐喻。当我可以用隐喻来描述行为时，我总是会感觉更舒服。

然后我从测试驱动开发的角度来处理它，即通过设置将验证正确行为的测试来开始描述系统需要做什么。

HTH。

干杯，

抢

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-28T12:10:08.570

该项目最困难的部分是从无所事事到第一线。只要把任何东西写在纸上，这个过程就开始了，令人惊讶的是，其余的东西可以如此迅速地从这里流出。

我自己是“[分而治](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)之”型方法的粉丝。

当系统中有一项特别大的任务悬在我头上时，我会离开计算机，拿起笔和纸，将任务分解为所有逻辑组件和工作流程。

然后完成这些任务中的每一个，并将其分解为所需的最基本功能/调用。

然后我可以放入我认为我需要的存根方法。并将它们一一充实。在这一点上，这些“子任务”中的每一个都不比围绕同一个项目的较小的开发任务大，所以感觉就像一个不那么繁重的任务悬在我头上。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-05T19:38:18.837

我通常在家里用一支笔和一张纸来解决这类问题。我想象算法和/或逻辑流程，然后存根（在纸上！）类和方法存根，当我遇到一个/计算机我可以更轻松地做到这一点......可能只是我......

# design-patterns - 关系数据库设计模式？

> ID：145689
> 
> 赞同：290
> 
> 时间：2008-09-28T11:29:56.980
> 
> 标签：design-patterns, database-design, rdbms

设计模式通常与面向对象的设计有关。
**是否有用于创建和编程[关系数据库的](http://en.wikipedia.org/wiki/Relational_database)[设计模式](http://en.wikipedia.org/wiki/Design_pattern_(computer_science))？**
许多问题肯定有可重用的解决方案。

示例将包括用于表设计、存储过程、触发器等的模式......

是否有此类模式的在线存储库，类似于[martinfowler.com](http://martinfowler.com)？

* * *

模式可以解决的问题示例：

*   存储分层数据（例如，具有类型的单个表与具有 1:1 键和差异的多个表......）
*   存储具有可变结构的数据（例如，通用列 vs xml vs 分隔列...）
*   非规范化数据（如何在影响最小的情况下做到这一点，等等......）

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2008-09-28T11:44:48.520

Martin Fowler 的签名系列中有一本名为[Refactoring Databases](http://www.ambysoft.com/books/refactoringDatabases.html)的书。这提供了重构数据库的技术列表。我不能说我听过很多数据库模式列表。

我还强烈推荐 David C. Hay 的[Data Model Patterns](//www.amazon.com/dp/0120887983)和后续的[A Metadata Map](//www.amazon.com/dp/0120887983)，它建立在第一个之上，并且更加雄心勃勃和有趣。单是序言就很有启发性。

Len Silverston 的 Data Model Resource Book Series[第 1 卷](//www.amazon.com/dp/0471380237)包含普遍适用的数据模型（员工、帐户、运输、采购等），[第 2 卷](//www.amazon.com/dp/0471353485)包含行业特定的数据模型（会计、医疗保健等），[第 3 卷](//www.amazon.com/dp/0470178450)提供了数据模型模式。

最后，虽然这本书表面上是关于 UML 和对象建模的，但 Peter Coad 的《[使用 UML 进行颜色建模](//www.amazon.com/dp/013011510X)》提供了一个“原型”驱动的实体建模过程，前提是任何对象/数据模型都有 4 个核心原型

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-09-28T13:36:52.167

设计模式不是简单的可重用解决方案。

根据定义，设计模式是可重用的。它们是*您*在其他好的解决方案中检测到的模式。

模式不是简单可重用的。但是，您可以按照该模式实施您的羽绒设计。

关系设计模式包括以下内容：

1.  使用外键的一对多关系（主从关系、父子关系）。

2.  与桥接表的多对多关系。

3.  在 FK 列中使用 NULL 管理可选的一对一关系。

4.  Star-Schema：维度和事实，OLAP 设计。

5.  完全标准化的 OLTP 设计。

6.  一个维度中的多个索引搜索列。

7.  包含一个或多个应用程序使用的 PK、描述和代码值的“查找表”。为什么有代码？我不知道，但是当必须使用它们时，这是一种管理代码的方法。

8.  单表。[有人称之为反模式；这是一种模式，有时很糟糕，有时很好。] 这是一张包含许多违反第二和第三范式的预连接内容的表。

9.  数组表。这是一个违反第一范式的表，列中有一个数组或值序列。

10.  混合使用数据库。这是一个为事务处理而标准化的数据库，但有许多额外的索引用于报告和分析。这是一种反模式——不要这样做。无论如何，人们都会这样做，所以它仍然是一种模式。

大多数设计数据库的人都可以轻而易举地说出六个“这是另一个”；这些是他们经常使用的设计模式。

这不包括使用和管理的管理和操作模式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-10T09:19:17.710

[AskTom](http://asktom.oracle.com)可能是有关 Oracle 数据库最佳实践的最有用的资源。（我通常只输入“asktom”作为特定主题的谷歌查询的第一个词）

I don't think it's really appropriate to speak of design patterns with relational databases. Relational databases are already the application of a "design pattern" to a problem (the problem being "how to represent, store and work with data while maintaining its integrity", and the design being the relational model). Other approches (generally considered obsolete) are the Navigational and Hierarchical models (and I'm nure many others exist).

Having said that, you might consider "Data Warehousing" as a somewhat separate "pattern" or approach in database design. In particular, you might be interested in reading about the [Star schema](http://en.wikipedia.org/wiki/Star_schema).

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-28T11:55:34.470

经过多年的数据库开发，我可以说在开始之前您应该回答一些不可行的问题和一些问题：

**问题：**

*   你想在未来使用另一个 DBMS 吗？如果是，则不要使用当前 DBMS 的特殊 SQL 内容。删除应用程序中的逻辑。

**不使用：**

*   表名和列名中的空格
*   表名和列名中的非 ASCII 字符
*   绑定到特定的小写或大写。并且永远不要使用仅在小写和大写上有所不同的 2 个表或列。
*   不要对表或列名称使用 SQL 关键字，例如“FROM”、“BETWEEN”、“DELETE”等

**建议：**

*   使用 NVARCHAR 或等效的 Unicode 支持，那么您对代码页没有任何问题。
*   给每一列一个唯一的名称。这使得加入时更容易选择列。如果每个表都有一列“ID”或“名称”或“描述”，这将非常困难。使用 XyzID 和 AbcID。
*   对复杂的 SQL 表达式使用资源包或等号。它使切换到另一个 DBMS 变得更加容易。
*   不对任何数据类型进行强制转换。另一个 DBMS 不能有这种数据类型。例如 Oracle 没有 SMALLINT 只有一个数字。

我希望这是一个好的起点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T12:18:05.930

你的问题有点含糊，但我想[`UPSERT`](http://en.wikipedia.org/wiki/Upsert)可以被认为是一种设计模式。对于不实现 的语言`MERGE`，[存在许多解决问题的替代方案](https://stackoverflow.com/questions/108403/solutions-for-insert-or-update-on-sql-server)（如果存在合适的行，则`UPDATE`; else `INSERT`）存在。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-30T04:12:35.097

取决于你所说的模式是什么意思。如果您正在考虑 Person/Company/Transaction/Product 等，那么是的 - 已经有很多通用数据库模式可用。

如果您正在考虑 Factory，Singleton ......那么不 - 您不需要任何这些，因为它们对于 DB 编程来说太低级了。

如果您正在考虑数据库对象命名，那么它属于约定类别，而不是设计本身。

顺便说一句，S.Lott，一对多和多对多关系不是“模式”。它们是关系模型的基本构建块。

# php - 在同一个应用程序中结合 Lisp 和 PHP 代码

> ID：145699
> 
> 赞同：17
> 
> 时间：2008-09-28T11:33:39.703
> 
> 标签：php, web-applications, interop, lisp

目前，我为 Web 开发的几乎所有东西都使用 PHP，但它的语言限制开始让我烦恼。然而，当我开发了一些实践并维护了一些对我有很大帮助的 PHP 库时，我觉得我还没有准备好切换到 LISP 来丢弃我所有的 PHP 输出。在我只能访问常规 LAMP 托管帐户的服务器上，这甚至是不可能的。

因此，我的问题是：LISP 代码可以与 PHP 代码结合使用吗？是否有并行 LISP/PHP 的解决方案，它们的互操作性接口或可能只是一个实现另一个？或者它是一个相互排斥的选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T11:55:57.497

这不是一个相互排斥的选择，您可以在一个系统上同时运行两者，就像 perl 和 php（例如）在许多系统上并行运行一样。

这里有一篇关于类似主题的[好帖子，建议使用套接字在两种语言之间进行通信 -](http://ubuntuforums.org/archive/index.php/t-277873.html)

> 如果你想走 PHP<->Lisp 路线，最简单的事情就是让 PHP 使用套接字与你的 Lisp 进程通信。
> 
> [http://php.net/manual/en/ref.sockets.php](http://php.net/manual/en/ref.sockets.php)
> 
> [http://www.sbcl.org/manual/Networking.html](http://www.sbcl.org/manual/Networking.html)

这种方法仍然会给您留下由于在项目中使用 2 种语言而可能增加的复杂性和维护问题，但可能适合您的特定用例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T12:16:31.503

一旦开始使用 Lisp 进行开发，您很可能不想用 PHP 编写代码。（顺便说一下，大约 80 年代以来的新大写字母）

Hunchentoot 是一个流行的服务器，它为您提供了将调度程序连接到请求方面的基础知识。在 LispCast.com上有一系列[关于编写 reddit 克隆的截屏视频](http://lispcast.com/drupal/node/3)

[UnCommon Web](http://common-lisp.net/project/ucw/)（听起来像是 Peter Norvig 对 PAIP 中 Scheme 的描述的双关语）来自我可以说的一个更完整的框架，该框架主要基于延续的想法，就像Smalltalk 的[Seaside](http://seaside.st)。

[Weblocks](http://common-lisp.net/project/cl-weblocks/)是另一个看起来不错的基于 continuation 的 Web 框架。作者 (at `defmacro.org`) 写的文章不错，我喜欢我在 Weblocks 示例应用程序中看到的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T22:11:52.523

我现在的情况几乎相同。我掌握了很多 PHP，但这种语言真的开始让我烦恼。我尝试过不同的语言，但最近对方案做了很多修改，我正在考虑逐步切换。也许我们应该启动一个用户组或其他什么？

由于具有 PHP 背景，您可能习惯于对 HTTP 协议进行较薄的抽象。我认为这实际上使过渡到新语言变得更加容易；尤其是其中没有一个占主导地位的框架。这样看来，PHP 和 Lisp 社区有一些相似之处（但其他碎片化的开源平台也有，比如 Python 和 Perl）。

Lisp 的一个问题是有太多的选择。我已经决定我更喜欢 Scheme 而不是 Common Lisp，这样可以稍微缩小范围。经过一些实验，我现在专注于[plt-scheme](http://plt-scheme.org/)，这似乎是最有动力的一个 Scheme。除此之外，它还捆绑了一个网络服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T11:57:59.847

不幸的是，我想不出任何库，但是我处于类似的情况，我有 PHP 代码，但厌倦了“尝试”在 PHP 中编写逻辑（游戏逻辑），所以我使用 PHP 套接字进行连接到 Lua，因此现在我在 Lua 中编写所有服务器端逻辑并使用 PHP（LAMP 设置）作为我的前端服务器。

希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-29T17:27:47.860

我建议您尝试一下[Weblocks](http://common-lisp.net/project/cl-weblocks.)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-01T05:28:19.117

对于 PHP 中的普通网页开发，我制作了一个名为 xilla_tags 的库。

概述[在这里](http://quantblog.wordpress.com/2009/10/01/xilla_tags-php-library-make-html-with-lispy-php-code/)

Jacob Hanssens bitchware 网站上也有一些很好的技术。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T08:33:39.697

查看一个有趣的解决方案来结合 Lisp 和 PHP [https://github.com/lisphp/lisphp](https://github.com/lisphp/lisphp)

# debugging - Windbg的gu和pc命令

> ID：145701
> 
> 赞同：0
> 
> 时间：2008-09-28T11:34:51.540
> 
> 标签：debugging

谁能给我看一个关于如何在 Windbg 中使用这两个命令的示例？我在 debugger.chm 中阅读了文档，但很困惑。我在 Google 和 MSDN 中进行了搜索，但没有找到易于学习的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T12:42:06.713

根据以下伪代码考虑功能级别：

```
 1  x = 0
 2  y = 0
 3  call 8
 4  x = 5
 5  y = 7
 6  call 8
 7  halt

 8  print x
 9  print y
10  call 12
11  return

12  print x + y
13  print x * y
14  return 
```

这些命令基本上是“运行直到事件发生”。该事件导致调试器中断（停止执行并等待您的命令）。

" `gu`" 命令一直运行直到它上升到下一个最高堆栈级别。如果您在第 8、9、10 或 11 行，您最终会在 4 或 7 行，具体取决于哪个“ `call 8`”调用了该代码。如果您在第 12、13 或 14 行，您将在 11 处中断。

将其视为运行，直到您向上移动堆栈。请注意，如果您第一次下降，则必须上升两次。

“ `pc`”命令一直运行到下一次调用，因此，如果您在第 1 行，它将在第 3 行中断。这与“ `gu`”相反，因为它在您尝试**降低**堆栈级别时停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-07T09:58:03.110

Windbg 输出有问题——“无法继续完成的步骤”。这是Windbg的相关输出和源代码，有什么想法吗？

（我在 main 中设置了一个断点，然后使用 p 命令执行下一步，然后使用 gc 命令 - 然后发生错误。）

(204.18c0): 中断指令异常 - 代码 80000003 (第一次机会) ntdll!DbgBreakPoint: 00000000 `77ef2aa0 cc int 3 0:000> bp main 0:000> g Breakpoint 0 hit TestDebug1!main: 00000001`40001090 4057 push rdi 0:000> p TestDebug1!main+0x1a: 00000001 `400010aa c7442424c8000000 mov dword ptr [rsp+24h],0C8h ss:00000000`0012feb4=cccccccc 0:000> p TestDebug1!main+0x2 00000001`400010b2 488d442424 lea rax,[rsp+24h] 0:000> gc 无法继续完成的步骤

# 包括

使用命名空间标准；

int foo() { int b = 300;

```
return b; 
```

}

int goo() { int a = 400;

```
return a; 
```

}

int main() { int a = 200;

```
int* b = &a;

foo();

a = 400;

goo();

return 0; 
```

}

# code-reuse - 您使用什么技术来最大化代码重用？

> ID：145720
> 
> 赞同：15
> 
> 时间：2008-09-28T11:50:28.790
> 
> 标签：code-reuse

几年前，有人告诉我一项关于代码重用的研究。显然，发现平均而言，程序员在搜索要重用的代码时有 7 分钟的窗口。如果他们在该窗口中找不到适合他们需要的代码，他们将编写自己的代码。

这是在需要仔细管理代码以供重用以确保您可以在窗口中找到所需内容的背景下提出的。

您（个人和组织）如何管理您的资源以使其更易于重用？您是否专门维护重用库？如果是这样，你如何索引它以最大化你的命中率？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-28T11:58:43.963

一个复杂的问题：

*   代码的某些部分可以概括为库或 API。我们有一个公共图书馆，它会及时更新常见问题的解决方案。通常：验证、缓存、数据访问类、日志记录等...

*   有些部分是特定于应用程序的。它们不能轻易概括。我们将它们转换为 HowTos 并进行内部演示。代码也可以通过使用易于浏览的 SCM（在我们的例子中为 SVN）来回收。

*   我们还有一些工具可以生成一方面无法回收的代码，另一方面它总是相似的（想想调用存储过程）。

*   结对编程也是传播现有解决方案知识的有用方式。我们会在可能或适当的情况下使用它。

*   最后一种技术是补习。每个编码员都有一个导师可以参考。由于导师很少，他们之间有很多分享，这些知识可以自上而下的方式传播。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T12:00:51.557

无情地重构并希望最好。

**更新（4 年后，希望更明智）**

*   就像 S.Lott 的评论所说：注意命名。将这个词传播给团队中的所有“提交者”。好的名称使事物可搜索，从而减少重复。
*   有一种做某事的方式，并保持它的可访问性和可搜索性。
*   为普通（LCD）程序员编写代码。不要在简单就足够的地方聪明。（这包括设计模式的鞋拔强迫症和相关疾病）
*   尽早采用一套通用的约定、风格、指南、标准等。确保团队的认同和合规性。（这意味着每个人都使用制表符（或空格）！）。选择什么并不重要 - 目标是代码应该看起来一致
*   有一个看门人（受到团队的尊重），他会密切关注所有签到的红旗。
*   编写代码测试优先/由外而内。这通常可以确保您的代码可供多个客户端使用。（参见 GOOS 关于上下文无关的项目符号）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T12:02:59.197

*   有一个积极支持的框架。

*   了解现有代码库/让其他开发人员了解代码库。如果您的团队/公司足够大，请有了解代码库的人来寻求指导。

*   文件，文件，文件。未记录的代码对于重用是没有用的，因为它需要很长时间才能理解其内部工作原理。

*   有良好的接口。简单的类型、简单的结构或类。越复杂的东西，在其他项目中使用的越少。

*   优化和调试可重用代码。第 n 次在其他人的代码中遇到错误的开发人员将开始重新编写已经存在的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T12:02:43.003

如果您还不是我的初始回复，请尝试使用[TDD 。](http://en.wikipedia.org/wiki/Test-driven_development)

我认为使用 TDD 是保持低代码耦合的好方法，还有其他好处。虽然这本质上不会阻止相同的行为被实施两次，但当您确定可以删除重复的区域时，它会变得容易得多。

另一个好处是，TDD 有一个步骤可以将重复（重构）作为循环的一部分。

此外，测试是代码文档的一部分，因此更容易识别重复行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T12:11:39.220

组织是关键。如果命名空间和智能感知可用，则可以缩小范围并最终找到正确的功能。如果他们没有找到他们真正想要的东西，他们可能会找到一些接近或相关的东西。将代码拼凑在一个庞大的组中很容易找到，但人们永远不会足够快地找到他们想要的方法。

一致性也很关键，无论是命名还是位置。如果您决定在项目期间的某个时间点更改您的样式，请返回并更改所有内容以适应该样式。这很容易成为一个非常漫长而无聊的过程，但总比尝试使用不一致的库要好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-09-17T01:11:00.813

分析整个应用程序并从较重的代码部分开始重构。（80% 的时间花在 20% 最常用的代码上）

使用能够识别内存泄漏、重复调用、冗长调用、未释放内存、未释放资源等的分析工具。

按照规则，新代码总是使用最佳实践。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-14T07:44:51.397

> 您（个人和组织）如何管理您的资源以使其更易于重用？您是否专门维护重用库？如果是这样，你如何索引它以最大化你的命中率？

我没有，而且我在这里有一个公认的有争议的观点，但我发现最大化代码重用的想法适得其反（我将“最大化”解释为将其优先于所有其他事情，而不是认为它既有优点也有缺点考虑平衡）。相反，我更愿意让团队中大量的冗余工作滑到有利于更好地解耦和隔离每个开发人员的模块。首先，在大家开始左右不同意我之前，我认为我们可以在一些事情上达成一致：

1.  重用错误代码会让您花费数小时调试其他人的代码是不可取的。
2.  重用代码来平衡如此广泛的不同需求，以至于它几乎不能满足您自己的需求，并且需要您跳过很多圈子才能最终得到一个笨拙且低效的解决方案，这是不可取的。
3.  如果您本可以在半小时内以不需要设计的方式自己实现解决方案，那么重用不断需要更改设计并经历一种要求您每 6 个月使用它重写一次代码的弃用代码是不可取的未来的变化，因为它只满足您的精确需求。
4.  与以惯用和熟悉的方式使用更多语言和标准库的代码库相比，一个充满外星人代码的代码库是不可取的，即使这需要更多的代码。
5.  开发人员互相踩着脚尖，因为他们俩都想对同一设计进行不兼容的更改，同时争吵和争论以及进行导致彼此实现错误的更改是不可取的。
6.  将大量依赖项扔给尚未证明自己的不成熟设计（没有全面的测试覆盖范围，没有时间对设计进行真正的隔音并确保它有效满足用户端需求而不需要进一步的设计更改）是不可取的。
7.  必须包含/导入/链接大量库和类/函数与最复杂的构建脚本来编写简单的东西是不可取的。
8.  最重要的是，以一种在短期和长期都比不重用代码花费更多时间的方式重用代码是不可取的。

希望我们至少能在这些观点上达成一致。我从过度热情的同事那里发现最大化代码重用的问题是它经常导致上述一个或多个问题。根本问题并不是对代码重用的热情，而是优先级偏向于代码重用而不是测试覆盖率、隔音设计、确保在我们疯狂地重用它们之前已经足够成熟等等。

当然，如果我们重用的所有代码都运行良好，具有全面的测试覆盖率，被证明能够以比不重用更高效的方式满足所有使用它的需求，并且多年来无需进行任何设计更改最后，我会对代码重用感到欣喜若狂。但是我的经验经常发现，在代码重用可能成为维护问题而不是解决方案的情况下，事情远未达到理想状态。

> 您（个人和组织）如何管理您的资源以使其更易于重用？您是否专门维护重用库？如果是这样，你如何索引它以最大化你的命中率？

因此，我再次不寻求在团队内部编写的专有代码中“最大化”代码重用。我试图确保团队不会在多余的工作上花费大量时间，但如果物理学家和渲染人员都实现了他们自己的轴对齐边界框类，我会让事情滑倒很多，例如不一定即使是多余的，因为物理学家可能会使用对他的目的更有效的最小/最大表示，而渲染开发人员可能会使用中心/半尺寸表示。我确实尝试确保我们尽可能多地重用标准库，因为这是一种实际上可以保证是可靠的、经过严格测试的代码重用，

相反，我将重点转移到测试上。如果您问我它是否以使用户真正满意的方式完美地工作，具有全面的测试覆盖率并且不需要无休止的更改，那么在这里复制一些代码的模块完全没问题。当我们使用可能复制我们内部代码库中的某些代码的第三方库时，我们始终接受这种重复。当冗余不会导致冗余维护工作时，这不是问题。

所以我建议稍微放松一下最大化代码重用的想法。但是，如果您想尽可能轻松地重用真正可靠、经过良好测试、非平凡的代码，那么我发现组织非常单一用途的库会更有帮助，比如“数学”库、 “图像”处理库等——而不是试图将它们全部融合成“核心”或“通用”之类的东西。后一种类型倾向于诱使开发人员投入各种不拘一格的实用功能，这些功能对使用它们的团队几乎没有好处，而且大多数情况下，它往往会变得混乱，开始变得难以找到任何感兴趣的东西。

# java - 验证用户输入 JDBC 的最佳方法？

> ID：145728
> 
> 赞同：1
> 
> 时间：2008-09-28T11:55:23.427
> 
> 标签：java, mysql, validation, jdbc

有没有一种内置的方法来使用 java 中的用户输入转义`JDBC`？类似于 php 版本`mysql_real_escape()`功能的东西。验证输入的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-28T11:58:44.433

如果您的意思是如何确保用户输入不能用于 SQL 注入攻击，那么做到这一点的方法（以及所有 SQL 应该用 JDBC 编写的方式）是使用准备好的语句。JDBC 将自动处理任何必要的转义。

[http://java.sun.com/docs/books/tutorial/jdbc/basics/prepared.html](http://java.sun.com/docs/books/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T13:09:39.753

只是为了补充@skaffman 的建议，PreparedStatements 解决了大多数应用程序的问题。但是，在某些应用程序中，SQL 语句的（部分）（而不仅仅是参数值）取自用户输入（例如，包含 ORDER BY 子句的 URL 参数）。只要确保您也对它们进行消毒，或者更好的是，尽可能避免此类设计。

# visual-studio - Visual Studio 项目属性中的各种“构建操作”设置是什么？它们的作用是什么？

> ID：145752
> 
> 赞同：886
> 
> 时间：2008-09-28T12:15:38.540
> 
> 标签：visual-studio, projects-and-solutions

在大多数情况下，您只需将 Visual Studio 为您设置的任何内容作为默认设置...我指的是在解决方案资源管理器中选择的每个文件的[BuildAction](https://docs.microsoft.com/en-us/visualstudio/ide/build-actions?view=vs-2019)属性。有很多选择，很难知道它们中的每一个会做什么。

* * *

## 回答 #1

> 赞同：1063
> 
> 时间：2008-09-28T12:29:21.287

*   **None**：该文件不包含在项目输出组中，并且不在构建过程中编译。一个示例是包含文档的文本文件，例如自述文件。

*   **编译**：文件被编译到构建输出中。此设置用于代码文件。

*   **Content**：允许您通过 Application.GetContentStream(URI) 将文件（与程序集位于同一目录中）作为流检索。要使此方法起作用，它需要一个 AssemblyAssociatedContentFile 自定义属性，当您将文件标记为“内容”时，Visual Studio 会优雅地添加该属性

*   **嵌入资源**：将文件嵌入到专有程序集清单资源中。

*   **资源** *（仅限 WPF）*：将文件嵌入到名为 AppName.g.resources 的共享（由具有类似设置的程序集中的所有文件）程序集清单资源中。

*   **页面** *（仅限 WPF）*：用于将`xaml`文件编译为`baml`. 然后嵌入与（即作为`AppName.g.resources）`baml`相同的技术`Resource`

*   **ApplicationDefinition** *（仅限 WPF）*：标记定义应用程序的 XAML/类文件。您使用 x:Class="Namespace.ClassName" 指定代码隐藏，并使用 StartupUri="Window1.xaml" 设置启动表单/页面

*   **SplashScreen** *（仅限 WPF）*：标记为的图像`SplashScreen` [在 WPF 应用程序加载时自动显示，然后淡出](https://msdn.microsoft.com/en-us/library/cc656886(v=vs.100).aspx)

*   **DesignData**：编译 XAML 视图模型，以便可以在 Visual Studio 中使用示例数据预览用户控件（使用模拟类型）

*   **DesignDataWithDesignTimeCreatableTypes**：编译 XAML 视图模型，以便可以在 Visual Studio 中使用示例数据预览用户控件[（使用实际类型）](https://docs.microsoft.com/en-gb/archive/blogs/mcsuksoldev/designdata-mvvm-support-in-blend-vs2010-and-wpfsilverlight)

*   **EntityDeploy** : *(Entity Framework)* :[用于部署实体框架工件](http://msdn.microsoft.com/en-us/library/microsoft.data.entity.build.tasks.entitydeploy.aspx)

*   **CodeAnalysisDictionary**：一个 XML 文件，其中包含用于[拼写规则的](https://web.archive.org/web/20160113163100/http://blogs.msdn.com/b/codeanalysis/archive/2007/08/12/new-for-visual-studio-2008-spelling-rules.aspx)[自定义单词词典](https://web.archive.org/web/20160113083108/http://blogs.msdn.com/b/codeanalysis/archive/2007/08/20/new-for-visual-studio-2008-custom-dictionaries.aspx)

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2008-09-28T12:20:35.347

从文档中：

> BuildAction 属性指示在执行构建时 Visual Studio 对文件执行的操作。BuildAction 可以具有以下几个值之一：
> 
> 无 - 文件不包含在项目输出组中，并且不在构建过程中编译。一个示例是包含文档的文本文件，例如自述文件。
> 
> 编译 - 文件被编译到构建输出中。此设置用于代码文件。
> 
> 内容 - 文件未编译，但包含在内容输出组中。例如，此设置是 .htm 或其他类型的 Web 文件的默认值。
> 
> 嵌入式资源 - 此文件作为 DLL 或可执行文件嵌入到主项目构建输出中。它通常用于资源文件。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2008-09-28T16:12:14.510

页面——获取指定的 XAML 文件，并编译成 BAML，并将该输出嵌入到程序集的托管资源流中（特别是 AssemblyName.g.resources），此外，如果您在文件，它将创建一个 blah.g.cs 文件，其中将包含该页面的“代码隐藏”的部分类；这基本上涉及调用 BAML goop 以将文件重新水合到内存中，并将类的任何成员变量设置为现在创建的项目（例如，如果您将 x:Name="foo" 放在项目上，您将能够执行 this.foo.Background = Purple; 或类似操作。

ApplicationDefinition - 类似于 Page，除了它更进一步，并定义了应用程序的入口点，该入口点将实例化您的应用程序对象，在其上调用 run，然后实例化 StartupUri 属性设置的类型，并为您的主窗口提供.

此外，需要明确的是，这个问题总体上在其结果集中是无限的；任何人都可以通过构建 MSBuild 任务来定义额外的 BuildAction。如果您查看 %systemroot%\Microsoft.net\framework\v{version}\ 目录，并查看 Microsoft.Common.targets 文件，您应该能够破译更多内容（例如，使用 VS Pro 及更高版本，有一个“影子”操作允许您生成私有访问器来帮助对私有类进行单元测试。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2013-04-09T21:37:14.857

VS2010 具有“构建操作”和“复制到输出目录”的属性。因此，如果复制属性设置为“如果较新则复制”或“始终复制”，则“无”操作仍将复制到构建目录。

因此，应保留“内容”的构建操作以指示您将通过“Application.GetContentStream”访问的内容

对于某些外部链接的 .config 包含，我使用了“无”的“构建操作”设置和“如果更新则复制”的“复制到输出目录”设置。

G。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-31T17:53:36.640

在 VS2008 中，似乎最有用的文档条目是：

Windows Presentation Foundation 构建 WPF 应用程序 (WPF)

ms-help://MS.VSCC.v90/MS.MSDNQTR.v90.en/wpf_conceptual/html/a58696fd-bdad-4b55-9759-136dfdf8b91c.htm

ApplicationDefinition 标识包含应用程序定义的 XAML 标记文件（根元素为 Application 的 XAML 标记文件）。当 Install 为 true 且 OutputType 为 winexe 时，ApplicationDefinition 是必需的。一个 WPF 应用程序，因此，一个 MSBuild 项目只能有一个 ApplicationDefinition。

Page 标识其内容被转换为二进制格式并编译为程序集的 XAML 标记文件。页面项通常与代码隐藏类一起实现。

最常见的页面项目是 XAML 文件，其顶级元素是以下之一：

```
Window (System.Windows..::.Window).

Page (System.Windows.Controls..::.Page).

PageFunction (System.Windows.Navigation..::.PageFunction<(Of <(T>)>)).

ResourceDictionary (System.Windows..::.ResourceDictionary).

FlowDocument (System.Windows.Documents..::.FlowDocument).

UserControl (System.Windows.Controls..::.UserControl). 
```

Resource 标识编译成应用程序程序集的资源文件。如前所述，UICulture 处理资源项。

内容 标识与应用程序一起分发的内容文件。描述内容文件的元数据被编译到应用程序中（使用 AssemblyAssociatedContentFileAttribute）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-05-13T01:34:04.007

构建操作控制项目中每个项目的 MSBuild 项目类型。例如，`Compile`构建操作`MyClass.cs`在您的文件中意味着类似这样的`.csproj`内容：

```
<ItemGroup>
  <Compile>MyClass.cs</Compile>
</ItemGroup> 
```

根据约定，项目类型具有特定含义。常见的类型是`Compile`,`Content`和`None`，但还有其他类型。

例如，`.editorconfig`文件有自己的项目类型 ( `EditorConfigFiles`)。可以通过使用“C# 分析器附加文件”( `AdditionalFiles`) 标记文件来将文件传递给分析器。

您还[可以](https://docs.microsoft.com/en-us/visualstudio/msbuild/visual-studio-integration-msbuild?view=vs-2019#additional-build-actions)通过`AvailableItemName`. 例如：

```
<ItemGroup>
  <AvailableItemName Include="Foo" />
</ItemGroup> 
```

这样做会产生：

[![在此处输入图像描述](https://i.stack.imgur.com/2Vud0.png)](https://i.stack.imgur.com/2Vud0.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-10-10T07:01:45.973

[Microsoft Connect 的这个页面](http://connect.microsoft.com/VisualStudio/feedback/details/536461/designdatawithdesigntimecreatabletypes)怎么样（解释 DesignData 和 DesignDataWithDesignTimeCreatableTypes）类型。报价：

*下面描述了示例数据文件的两个构建操作。*

*必须为示例数据 .xaml 文件分配以下构建操作之一：*

***DesignData***：*样本数据类型将被创建为虚假类型。当示例数据类型不可创建或具有要为其定义示例数据值的只读属性时，请使用此构建操作。*

***DesignDataWithDesignTimeCreatableTypes***：*将使用示例数据文件中定义的类型创建示例数据类型。当示例数据类型可使用其默认的空构造函数创建时，请使用此构建操作。*

不是*那么*令人难以置信的详尽，但它至少给出了一个提示。[这个 MSDN walkthrough](http://msdn.microsoft.com/en-us/library/ff602279%28v=vs.95%29.aspx)也给出了一些想法。我不知道这些构建操作是否也适用于非 Silverlight 项目。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-01-26T15:53:37.790

*   **Fakes：** Microsoft Fakes（单元测试隔离）框架的一部分。并非在所有 Visual Studio 版本上都可用。Fakes 用于支持项目中的单元测试，通过用存根或填充程序替换应用程序的其他部分来帮助您隔离正在测试的代码。更多信息：[https ://msdn.microsoft.com/en-us/library/hh549175.aspx](https://msdn.microsoft.com/en-us/library/hh549175.aspx)

# windows-vista - 现代操作系统上的 FAT-16

> ID：145753
> 
> 赞同：3
> 
> 时间：2008-09-28T12:16:08.087
> 
> 标签：windows-vista, windows-xp, filesystems, basic

我有一个用 BASIC 编写的项目。我不确定确切的原因，但除非从 FAT-16 文件系统运行，否则该应用程序将无法运行。

我宁愿尝试在现代操作系统（Vista/XP）中设置和支持该应用程序的环境，而不是重写它。

有谁知道如何通过某种代码更改（到 BASIC 代码）或 FAT-16“模拟器”（如果存在这样的东西）让这样的应用程序在 XP/Vista 中运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-28T12:32:43.290

您可以尝试通过[DOSBOX](http://www.dosbox.com/)运行它：

> DOSBox 模拟 Intel x86 PC，配有声音、图形、鼠标、操纵杆、调制解调器等，这是运行许多无法在现代 PC 和操作系统（例如 Microsoft Windows XP、Windows）上运行的许多旧 MS-DOS 应用程序所必需的Vista、Linux 和 FreeBSD

（来自他们的[维基](http://www.dosbox.com/wiki/Main_Page)）

我现在用了好几年了。它很好，稳定且非常强大。有几个第三方图形用户界面，让您的生活更轻松

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T12:35:14.920

正如已经建议的那样，除了让应用程序在虚拟化环境中保持活跃之外，首先要做的是弄清楚*为什么*代码似乎需要 FAT-16。

如果应用程序（或其运行时）特别邪恶，FAT-16 要求可能源于它试图绕过操作系统进行直接磁盘 I/O 的事实。如果 BASIC 代码本身试图实现该特技，您应该会在 I/O 例程中看到大量的 CALL、PEEK、POKE 甚至偶尔的 IN 和 OUT 语句。确定运行时的用途更加困难：如果它来自 Microsoft、基于 DOS 且不太古老（例如 GWBASIC 或 QuickBASIC/PDS），或者基于 Windows，它应该没问题。

无论如何，如果应用程序或运行时尝试直接磁盘 I/O，你就会失败：如果没有大量的、类似重写的代码更改，几乎不可能让事情在现代操作系统上运行。

如果应用程序使用普通的 BASIC 工具进行输入和输出（例如 OPEN "file" FOR 不管 AS #1），并且运行时也使用普通的操作系统接口，那么它仅适用于 FAT-16 的最可能原因是它被长文件名彻底弄糊涂了。

首先要尝试将应用程序放在一个具有短名称的目录中（例如 c:\myapp），然后看看接下来会发生什么。可能它只是工作：否则，您应该能够通过单步执行 BASIC 代码来弄清楚发生了什么（假设调试器是其运行时环境的一部分）。

如果没有有关您的应用程序运行的确切解释器/编译器的更多信息，就不可能更详细地回答您的问题。如果到目前为止的答案没有帮助，您可能需要编辑您的问题以包含此信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T12:17:16.667

在 VMWare 虚拟机中运行旧版本的 Windows，该虚拟机本身在现代操作系统中运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T14:11:17.453

从闪存、压缩驱动器或您获得的任何可移动媒体运行它。
Windows XP 将 1GB USB 闪存驱动器格式化为 FAT 没有问题，不需要额外的工具。
此外，如果应用程序真的很**邪恶**，那么您希望通过驱动器的边界来限制它的邪恶。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T12:43:49.177

取决于环境：在现代操作系统上创建 Fat-16 文件系统仍然是可能的，您可能只需要额外的工具，例如 Acronis DiskDirector 甚至一些 Linux 的 fdisk 变体。

请记住，FAT-16 的分区大小限制为 2 GB。

但如前所述：最好找出原因。听起来像是某种 WTF-Copy-Protection。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T14:16:33.290

我同意@eugensk00 的建议，我们有一些有点古怪的仪器软件，它不会保存到 NTFS 硬盘，但会保存到一个小记忆棒（1GB）......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T14:17:47.750

您也许可以将代码直接导入 VB.NET（尽管几乎可以肯定它需要一些修改）。然后，您可以用 VB.NET 调用替换原始应用程序的文件 IO 调用（几乎可以肯定是您的问题），从而摆脱 FAT16 问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-08-30T05:46:38.580

另请注意，一些老式程序在写入文件之前首先检查是否有足够的磁盘空间，如果驱动器太大以至于溢出它显然正在使用的 16 位计数器，则会导致古怪的问题。（如果是这种情况，那么它要么工作，要么不工作，这取决于溢出的性质）。

# xcode - .gdbinit 配置文件与 Xcode 调试冲突

> ID：145765
> 
> 赞同：2
> 
> 时间：2008-09-28T12:25:36.147
> 
> 标签：xcode, debugging, macos, gdb

我的主目录中有一个相当大的 .gdbinit（因此未在此处复制）。

现在，如果我想在 Xcode 中调试代码，我会收到此错误：

```
Failed to load debugging library at:

/Developer/Applications/Xcode.app/Contents/PlugIns/GDBMIDebugging.xcplugin/Contents/Resources/PBGDBIntrospectionSupport.A.dylib

Custom data formatters are disabled.

Error message was:
0x1005c5 "dlopen(/Developer/Applications/Xcode.app/Contents/PlugIns/GDBMIDebugging.xcplugin/Contents/Resources/PBGDBIntrospectionSupport.A.dylib, 16): image not found" 
```

实际上 - 如下所示 - 调试在 Xcode 中仍然有效，但数据格式化程序中断。移出 .gdbinit 或禁用数据格式化程序确实会让 Xcode 中的 gdb 恢复工作状态，但这显然很痛苦（包括数据格式化程序，在第一种情况下）

关于 gdbinit 中的哪些设置可能导致 Xcode 中出现此错误的任何想法？

回复中的注释：似乎（来自谷歌搜索）链接到 wxWidgets 库时可能会发生此错误。我没有在这里做的事情。

注意：如果需要，我可以提供我的（长）.gdbinit 的副本

WIP：我将查看我的 .gdbinit 的详细信息，看看是否可以缩小问题范围

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-30T16:16:19.240

## 我的“简短”回答：

* * *

您可能已经注意到这一点，但以防万一：

首先，即使你看到那个错误（假设你点击过去并继续），那么你应该**仍然能够使用**Xcode 中 99% 的调试功能。换句话说，该错误意味着对于给定的调试会话，调试器只有非常小的特定部分“损坏”。这并不***意味着***给定程序执行的调试完全停止和/或不可能。

鉴于上述事实，如果您只是想摆脱错误而不关心自定义数据格式化程序是否正常工作，那么请删除以下菜单项旁边的复选标记：

*   运行 -> 变量视图 -> 启用数据格式化程序

## 我的“长”回答：

* * *

我办公室的开发人员在很长一段时间内都遇到了同样的 Xcode 错误，直到有人发现某些第三方库是原因所在。

在我们的例子中，这个错误只发生在使用 wxWidgets 的项目中。我并不是要暗示 wxWidgets 的使用是唯一可能的原因。我只是想提供更多信息，可能会为您的案例提供正确的解决方案。

同样有趣的是：我们（在我的办公室）在没有任何使用或存在任何 .gdbinit 文件的情况下遇到此错误。

事实证明，触发此错误的 wxWidgets 的“属性”与“dlopen”的“自定义/通用”实现有关。在 Mac OS X 10.3 之前，操作系统中没有提供 dlopen，因此显然有些库编写了自己的版本。当使用此类库时，显然尝试打开 PBGDBIntrospectionSupport.A.dylib 的 dlopen 调用可能会失败。

[阅读有关此 sourceforge 补丁提交的评论，以了解有关 10.3 及更高版本中的 dlopen 的更多详细信息。](http://sourceforge.net/tracker/index.php?func=detail&aid=1896410&group_id=9863&atid=309863)

另外，这里是另一个相关链接：

[Xcode 用户邮件列表上关于 PBGDBIntrospectionSupport 和自定义数据格式化程序的消息](http://lists.apple.com/archives/Xcode-users/2008/Mar/msg00240.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-30T01:01:23.950

奇怪...环顾我的 Mac，我发现那个库很好，而且看起来很正常。

您是否尝试过使用 dtrace 来查看发生错误时 Xcode 和 GDB 正在尝试做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-23T01:40:09.213

您的错误实际上与我使用 wxWidgets 得到的错误有点不同。自从我发现 dlopen 冲突已经有一段时间了，但我确实记得我必须在那个特定的调试会话中使用 gdb 本身来弄清楚发生了什么。此外，由于 wxWidgets 问题，十六进制地址每次都不同。

在 gdb 中，在错误消息中的十六进制地址上调用“信息符号”。这可能会为您提供有关无法加载的确切内容的详细信息。

# .net - 如何在 .NET 中设计 MVC 设计模式的控制器层

> ID：145766
> 
> 赞同：1
> 
> 时间：2008-09-28T12:26:32.477
> 
> 标签：.net, model-view-controller, controller

以下是我的想法： 使用 MVC 的目的是分离关注点和 gui 逻辑的可测试性。视图应该能够与不同的模型一起工作，模型应该能够与不同的视图一起工作。

我认为控制器类出于模拟/测试的原因必须实现一个接口，并且视图应该通过这个接口调用控制器方法。但是如果我们这样做，那么在控制器中处理视图元素（文本框、网格等）就变得很困难。因此，控制器必须以某种方式知道这些元素。

1.你通过界面暴露这些gui元素吗？将控制器类定义为部分类，以便控制器可以直接处理 gui 元素（那么接口呢）？你做什么来解决这个问题？

2\. 基本上，控制器应该实现多个接口吗？一个用于视图，另一个用于模型层，以使视图/模型能够通过控制器与不同的模型/视图一起工作？

3\. 模型层也应该实现模拟/测试接口？

我们如何才能最好地实现我们的测试、松散耦合、SoC 的目的？请分享您的经验/想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T12:52:43.990

我相信*视图*应该实现一个接口并传递给控制器​​，通常是通过构造函数。这样，控制器可以使用视图界面的字段来获取视图使用的控件的值。它也可以使用您选择的任何模型。这将为您提供所需的模型和视图之间的松散耦合。

通过通过构造函数传入模型的存储库，可以对模型执行相同的操作。然后，存储库方法可以返回模型类必须实现的接口。

然后，您可以让控制器实现一个接口并在运行时使用 IoC 容器获取适当的控制器（这将自动为控制器提供适当的视图和模型存储库。这将使您的控制器能够轻松更换以替换当前视图/模型组合用于不同的视图。但是，总的来说，我发现这是不必要的，因为我对每种类型的视图（视图界面）只有一个控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T13:09:15.293

如果 gui 有数百个元素，那么通过界面公开 gui 元素可能是一项漫长的任务。但我看不到另一种选择：部分分类会使 gui 逻辑更难测试，并且也会破坏 MVC 基础。因此要处理的元素可以作为方法中的参数传递。这可以减少编码量。

# javascript - DOM 的 Firefox Sidebar 和 Document 对象

> ID：145770
> 
> 赞同：3
> 
> 时间：2008-09-28T12:31:02.700
> 
> 标签：javascript, firefox, sidebar

Firefox 侧边栏中加载了一个网页，主文档中加载了另一个网页。现在，我如何要求通过 Firefox 侧边栏访问主文档对象？通过 Firefox 侧边栏文档中的 Javascript 代码访问主文档的示例会有所帮助。

感谢您的回答。但是，我必须完善我的问题。主窗口加载了一些网页，侧边栏有一个网页。当单击侧边栏窗口上的链接时，我希望侧边栏窗口知道用户在主窗口上选择了哪些文本。我知道如何从窗口中获取选定的文本。只是侧边栏元素增加了我无法超越的问题的复杂性。

@PConory：

我喜欢你的回答，但是当我尝试时出现错误：

> 错误：为类 UnnamedClass 的对象创建包装器的权限被拒绝。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T13:24:28.047

据我所知，您实际上是在边栏中加载网站（选中“在边栏中加载此书签”）。如果是这种情况，并且侧边栏正在打开主窗口页面。您可以使用 window.postMessage 在它们之间进行通信。但是就像我说的那样，侧边栏页面必须打开主页，因为您需要窗口引用才能发布消息。

侧边栏.js

```
var newwin = window.open('http://otherpage')
newwin.onload = function()
{
 newwin.postMessage('Hey newwin', 'http://sidebar');
};

mainpage.js
window.addEventListener('message',function(e)
{
 if(message.origin == 'http://sidebar')
  alert('message from sidebar');
},false); 
```

使用它您仍然无法访问文档，但可以在它们之间进行通信并编写您想要执行的任何更改。

编辑：多考虑一下，如果您从侧边栏打开窗口，您将拥有它的 DOM。var newwin = window.open('blah'); newwin.document 使 postMessage 漏洞变得毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T12:54:11.537

从侧边栏访问主窗口比返回其他方式要复杂得多。

[根据Mozilla 的开发者中心](http://developer.mozilla.org/en/Working_with_windows_in_chrome_code#Accessing_the_elements_of_the_top-level_document_from_a_child_window)，您需要遍历的 DOM 树是：

```
#document
  window                 main-window
    ...
      browser
        #document
          window         sidebarWindow 
```

从上面的链接中，以下代码将允许您获取`mainWindow`对象：

```
var mWin = window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
               .getInterface(Components.interfaces.nsIWebNavigation)
               .QueryInterface(Components.interfaces.nsIDocShellTreeItem)
               .rootTreeItem
               .QueryInterface(Components.interfaces.nsIInterfaceRequestor)
               .getInterface(Components.interfaces.nsIDOMWindow); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T15:54:30.620

您是否正在尝试编写允许侧边栏页面和标签页之间通信的页面内 javascript？哪些页面可以互相看到和交流是有限制的：

*   如果页面不在同一个域中，则不允许它们交谈（同域限制）。
*   如果一个页面没有打开另一个页面，则任何一个页面都无法获得对另一个页面的引用。

我不确定页面如何请求在侧边栏中打开页面，反之亦然。但是**，如果**您可以做到这一点，请使用`var child = window.open(...)`获取一个方向的参考并`window.opener`获取另一个方向的参考。

# linux - 在 Linux 上使用 C++ 的 DLL-s

> ID：145771
> 
> 赞同：2
> 
> 时间：2008-09-28T12:32:07.520
> 
> 标签：linux, gcc, shared-libraries

我试图找到如何使用谷歌在 linux 上创建 DLL-s，但得到的信息非常混乱。

是否可以在 linux 上编写动态链接库？如果没有，是否有其他方法可以从多个正在运行的程序中调用另一个模块中的代码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-28T12:37:30.843

那是因为 DLL 是一个 Windows 术语。在 Linux 中，它们被称为共享库。

[http://www.linux.org/docs/ldp/howto/Program-Library-HOWTO/shared-libraries.html](http://www.linux.org/docs/ldp/howto/Program-Library-HOWTO/shared-libraries.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-28T12:55:55.107

正如[Sklivvz](https://stackoverflow.com/questions/145771/dlls-using-c-on-linux#145779)所说，您在 linux 上使用的术语是共享对象。这些文件扩展名为`.so`.

使用 gcc，您可以`.so`使用`-shared`选项创建一个。

例如。

```
 gcc -shared -o libfoo.so foo.c 
```

如果您将共享对象命名为 lib*.so，您可以使用`-l`链接器上的选项对其进行编译。请注意，在这种情况下会推断出“lib”。

IE。

```
 ld -o a.out -lfoo someobject.o 
```

或者，您可以在运行时加载`.so`文件，就像使用`.dll`s 一样，使用 dlopen() 和 dlsym()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T19:48:17.580

如果您刚刚开始，这*很多*，但在某些时候您需要参考 Ulrich Drepper 的“<a href="http://people.redhat.com/drepper/dsohowto.pdf" rel="nofollow noreferrer ">如何编写共享库。"</p>

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-28T12:38:05.133

我猜 .SO 文件而不是 DLL 文件，意思是共享对象，而不是 StackOverflow :)，是你想要的。

# javascript - 关于 JavaScript 编程的播客

> ID：145775
> 
> 赞同：32
> 
> 时间：2008-09-28T12:34:14.113
> 
> 标签：javascript, podcast

作为一名热情的 JavaScript 开发人员，我想知道是否有任何致力于 JavaScript 的优质 Podcast。（视频和音频）。

我目前正在订阅：

*   [YUI 剧院](http://developer.yahoo.com/yui/theater/)
*   [可听的阿贾克斯](http://ajaxian.com/by/category/podcasts)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-06-23T18:40:03.283

[JavaScript Show](http://www.javascriptshow.com)刚刚推出，我可能有偏见，但认为它非常棒。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-12-30T21:44:18.860

我真的很喜欢 yayquery 播客 ( [http://yayquery.com/](http://www.yayquery.com/) ) 还有官方 jquery 播客 ( [http://feeds.feedburner.com/jQueryPodcast](http://feeds.feedburner.com/jQueryPodcast) )

他们都很新。我更喜欢 yayquery 播客，因为它感觉更底层。他们谈论插件和优化以及“隐藏的改进”。jquery podcast 更加抽象。他们谈论诸如 jquery 的方向以及该语言的总体目标和动机之类的事情。

yayquery 是音频或视频。jquery podcast 只是音频。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-29T10:41:06.420

There's been a couple of good ones recently on Hanselminutes ([http://www.hanselminutes.com/](http://www.hanselminutes.com/)) where he's spoken to a blind developer about useability, an interview with John Resig (jQuery creator), and several others.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-28T12:45:43.273

您可以查看 OpenWeb 播客：

[http://openwebpodcast.com/](http://openwebpodcast.com/)

# testing - 开源或免费测试解决方案

> ID：145783
> 
> 赞同：0
> 
> 时间：2008-09-28T12:43:10.690
> 
> 标签：testing, open-source, center

1.  是否有可以将测试用例、测试、错误和可能的修复（源代码）集成在一起的开源或免费套件。在这个系统中维护需求不是必需的（尽管在自定义字段中为每个测试用例输入需求 ID 会很好）。我们是一家小型组织，无法负担 HP Quality Center 之类的费用。

2.  我们有编码技能（Java、SQL），所以如果涉及到使用 Java API 集成不同的工具，这应该不是问题。同样，使用导出/导入结果/数据的实用解决方案也应该没问题（我们可以尽可能自动化）。

3.  有没有人使用 PushToTest TestMaker 作为这种解决方案的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T13:13:12.850

此链接[http://www.testingfaqs.org/t-management.html](http://www.testingfaqs.org/t-management.html)有一个测试用例管理工具列表，包括免费软件和商业软件。也许该列表中有一些可以满足您的需求的东西。

另一种可能性是像[Trac](http://www.testingfaqs.org/t-management.html)。这并不是真正设计为测试用例管理工具，但它集成了 Subversion 存储库浏览器、错误跟踪器和 Wiki。如果您可以管理在 Wiki 上组织测试用例，那么这将允许您将 Wiki 页面链接到错误并将错误链接到 Subversion 提交。我们曾经使用过 Trac 并且对它非常满意。我们切换到 Jira 是因为我们想要更多的错误跟踪功能。

我没有使用它，但 Trac 确实在他们的网页上列出了一个测试用例管理[插件。](http://www.trac-hacks.org/wiki/TestCaseManagementPlugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T15:11:01.443

也许这会有所帮助？

[http://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:25:57.483

使用 Testlink 并将其与错误跟踪链接 Mantis 集成。

如果您需要任何帮助，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T13:15:46.323

JIRA 有用于扫描 CVS 提交评论的插件，使用它们将源代码更改与跟踪的问题相关联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-21T13:46:11.033

在[www.opensourcetesting.org](http://www.opensourcetesting.org)上有一个完整的[开源测试管理工具](http://www.opensourcetesting.org/testmgt.php)列表。我最近在一个项目中遇到的一个是[TestLink](http://www.teamst.org/)，它看起来很不错。它还有一个开放的 API。

# image - 二维精灵最喜欢的图像文件格式

> ID：145800
> 
> 赞同：9
> 
> 时间：2008-09-28T13:03:19.473
> 
> 标签：image, 2d, file-format, sprite

您最喜欢的游戏无损图像格式（即 2d 游戏）是什么？为什么？

需要考虑的一些事情是磁盘大小、转换为可用格式的开销以及格式的特性（即 alpha 支持）。

没有最佳答案，但请务必尽您所能支持您的最佳答案！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-28T13:07:12.537

我建议PNG。大多数软件都支持编写它，大多数库都支持读取它，它是无损的并且支持 alpha 透明度。这是一种标准格式。

而且，对于爱好者 2D 游戏来说可能很重要，非常小的图像也会导致非常小的文件（即 16x16 图标可以是 1KB 或更小）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-28T13:07:45.653

有一个最佳答案，显然是PNG *。*

良好的压缩，支持调色板 alpha，可扩展（因为您可以将任意 blob 附加到 PNG），有什么不喜欢的？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T13:11:06.303

我非常喜欢png。它具有良好的压缩性，支持 alpha 通道，并支持调色板，因此文件大小可以更小。而且它是免费的，所以每个人都可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-24T06:06:32.737

PNG 不支持 alpha 透明度，它有一个半透明通道，这是不同的。这可能会导致问题，具体取决于您将精灵渲染到屏幕的方式。TGA，放下手。

# .net - .NET：Castle Project 的状态如何？

> ID：145802
> 
> 赞同：3
> 
> 时间：2008-09-28T13:04:29.673
> 
> 标签：.net, castle

如果看到下载的最后一个版本已经**超过一年**，并且它也“只是”版本 1.0的**候选发布版，请点击进入下载页面。**真的没有任何发展的消息。

是的，您可以从每晚构建中找到更新的版本，但这不是一个真正严肃的选择。

此外，“入门”和描述页面有时甚至没有开始，有些还没有完成。

这是怎么回事？即将推出的任何 C# 3.0 功能还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T13:12:07.237

项目创始人 Hamilton Verissimo于 8 月[在微软任职。](http://hammett.castleproject.org/?p=312)

> **城堡会发生什么？**
> 
> 这对我来说是一个微妙的话题，但令人惊讶的是，这对他们来说不是问题。我得到了一份书面许可，可以根据需要继续为 Castle 工作。所以什么都没有改变……</p>
> 
> **城堡要塞会发生什么？**
> 
> 尽管我是 CS 的主唱，但那里有一些才华横溢的人。我们第一次很幸运地聘请了一名初级开发人员——我简直不敢相信自己——而且我很肯定公司会有一个美好的未来。
> 
> 我将拥有公司的一小部分股份，但不会再参与其中。Stronghold 也刚刚向我们的一位客户出售了股份，一旦签署，我将很快发布详细信息。

Hammett 最近发布了有关[.Net 3.5 SP1](http://hammett.castleproject.org/?p=321)的问题，因此显然仍在努力，但可能更多是从 MS 端收紧事情，而不是推动 Castle 的开发。

还有其他开发人员仍在发布每日构建等，开发人员社区在[Google Groups](http://groups.google.com/group/castle-project-devel)上仍然非常活跃，如果不是在项目主页上也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T15:18:50.160

首先，“Release Candidates”的名称是错误的。“里程碑”可能会更好。Castle的各个领域都还在不断的开发中，据我所知，大部分用户都使用trunk版（我也是）。除了汉密尔顿之外，还有许多非常活跃的开发人员正在研究它。

它有两个活跃的谷歌组：

[http://groups.google.com/group/castle-project-devel](http://groups.google.com/group/castle-project-devel)（用于城堡的开发）

[http://groups.google.com/group/castle-project-users](http://groups.google.com/group/castle-project-users)（适用于 Castle 用户）

> 即将推出的任何 C# 3.0 功能还是什么？

它现在与 .Net 3.5 完全兼容。目前在开发新闻组上有一项关于放弃 VS2005（即 C#2）支持并完全采用 C#3 的民意调查。（我相信大约是 20:1）CastleContrib 的某些部分已经在使用 C#3 功能。

# .net - 在同一解决方案/项目中使用 Visual Studio 以 32 位和 64 位为目标

> ID：145803
> 
> 赞同：111
> 
> 时间：2008-09-28T13:05:41.977
> 
> 标签：.net, visual-studio, 64-bit, x86-64

我对如何设置我的视觉工作室构建以实现多目标有点进退两难。

背景：c# .NET v2.0 带有 p/invoking 到第 3 方 32 位 DLL，SQL compact v3.5 SP1，带有安装项目。现在，平台目标设置为 x86，因此可以在 Windows x64 上运行。

第 3 方公司刚刚发布了他们的 DLL 的 64 位版本，我想构建一个专用的 64 位程序。

这提出了一些我还没有得到答案的问题。我想拥有完全相同的代码库。我必须使用对 32 位 DLL 集或 64 位 DLL 的引用来构建。（第 3 方和 SQL Server Compact）

这可以通过 2 组新配置（Debug64 和 Release64）来解决吗？

我必须创建 2 个单独的设置项目（std.visual studio 项目，没有 Wix 或任何其他实用程序），还是可以在同一个 .msi 中解决？

欢迎任何想法和/或建议。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2008-09-28T14:06:00.740

是的，您可以在同一个项目中使用相同的代码库同时定位 x86 和 x64。一般来说，如果您在 VS.NET 中创建正确的解决方案配置，一切都会正常工作（尽管对完全非托管的 DLL 的 P/Invoke 很可能需要一些条件代码）：我发现需要特别注意的项目是：

*   对具有相同名称但具有自己特定位数的外部托管程序集的引用（这也适用于 COM 互操作程序集）
*   MSI 包（如前所述，它需要以 x86 或 x64 为目标）
*   MSI 包中任何基于 .NET 安装程序类的自定义操作

程序集引用问题不能在 VS.NET 中完全解决，因为它只允许您将具有给定名称的引用添加到项目中一次。要解决此问题，请手动编辑您的项目文件（在 VS 中，右键单击解决方案资源管理器中的项目文件，选择卸载项目，然后再次右键单击并选择编辑）。添加对例如 x86 版本程序集的引用后，您的项目文件将包含以下内容：

```
<Reference Include="Filename, ..., processorArchitecture=x86">
  <HintPath>C:\path\to\x86\DLL</HintPath>
</Reference> 
```

将该 Reference 标记包装在 ItemGroup 标记中，指示它适用的解决方案配置，例如：

```
<ItemGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
   <Reference ...>....</Reference>
</ItemGroup> 
```

然后，复制并粘贴整个 ItemGroup 标记，并对其进行编辑以包含 64 位 DLL 的详细信息，例如：

```
<ItemGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x64' ">
  <Reference Include="Filename, ..., processorArchitecture=AMD64">
     <HintPath>C:\path\to\x64\DLL</HintPath>
   </Reference>
</ItemGroup> 
```

在 VS.NET 中重新加载您的项目后，Assembly Reference 对话框会因这些更改而有点混乱，并且您可能会遇到一些关于带有错误目标处理器的程序集的警告，但您的所有构建都可以正常工作。

接下来是解决 MSI 问题，不幸的是，这*将*需要一个非 VS.NET 工具：为此，我更喜欢 Caphyon 的[Advanced Installer](http://www.advancedinstaller.com/)，因为它完成了所涉及的基本技巧（创建一个通用 MSI，以及 32 位和 64 位特定的 MSI，并使用 .EXE 安装程序启动器来提取正确的版本并在运行时进行所需的修复）非常非常好。

您可能可以使用其他工具或[Windows Installer XML (WiX) 工具集](http://wix.sourceforge.net/)获得相同的结果，但是 Advanced Installer 使事情变得如此简单（而且价格相当实惠），以至于我从未真正看过替代品。

即使使用高级安装程序，您*可能*仍然需要 WiX 的一件事是用于您的 .NET 安装程序类自定义操作。尽管指定仅应在某些平台上运行的某些操作（分别使用 VersionNT64 和 NOT VersionNT64 执行条件）很简单，但内置 AI 自定义操作将使用 32 位框架执行，即使在 64 位机器上也是如此.

这可能会在未来的版本中得到修复，但现在（或在使用其他工具创建具有相同问题的 MSI 时），您可以使用 WiX 3.0 的托管自定义操作支持来创建具有适当位数的操作 DLL将使用相应的框架执行。

* * *

编辑：从 8.1.2 版开始，高级安装程序正确支持 64 位自定义操作。不幸的是，自从我最初的回答以来，它的价格已经上涨了很多，尽管与 InstallShield 及其同类产品相比它仍然非常物有所值......

* * *

编辑：如果您的 DLL 在 GAC 中注册，您也可以通过这种方式使用标准引用标记（以 SQLite 为例）：

```
<ItemGroup Condition="'$(Platform)' == 'x86'">
    <Reference Include="System.Data.SQLite, Version=1.0.80.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139, processorArchitecture=x86" />
</ItemGroup>
<ItemGroup Condition="'$(Platform)' == 'x64'">
    <Reference Include="System.Data.SQLite, Version=1.0.80.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139, processorArchitecture=AMD64" />
</ItemGroup> 
```

条件也减少到所有构建类型、发布或调试，并且只指定处理器架构。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-09-28T14:43:46.500

假设您为两个平台构建了 DLL，它们位于以下位置：

```
C:\whatever\x86\whatever.dll
C:\whatever\x64\whatever.dll 
```

您只需要从这里编辑您的 .csproj 文件：

```
<HintPath>C:\whatever\x86\whatever.dll</HintPath> 
```

对此：

```
<HintPath>C:\whatever\$(Platform)\whatever.dll</HintPath> 
```

然后，您应该能够针对这两个平台构建项目，MSBuild 将在所选平台的正确目录中查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T13:20:33.580

不确定您的问题的全部答案 - 但我想我会在[SQL Compact 3.5 SP1 下载页面](http://www.microsoft.com/downloads/details.aspx?FamilyId=DC614AEE-7E1C-4881-9C32-3A6CE53384D9&displaylang=en)的附加信息部分指出您正在查看 x64 的评论 - 希望它有所帮助。

> 由于 SQL Server Compact SP1 的更改和额外的 64 位版本支持，32 位版本的 SQL Server Compact 3.5 和 64 位版本的 SQL Server Compact 3.5 SP1 的集中安装和混合模式环境可能会产生看似间歇性的情况问题。为了最大限度地减少冲突的可能性，并启用托管客户端应用程序的平台无关部署，使用 Windows Installer (MSI) 文件集中安装 64 位版本的 SQL Server Compact 3.5 SP1 还需要安装 32 位版本的 SQL Server压缩 3.5 SP1 MSI 文件。对于只需要本机 64 位的应用程序，可以使用 64 位版本的 SQL Server Compact 3.5 SP1 的私有部署。

如果为 64 位客户端分发，我将其读作“包括 32 位 SQLCE 文件**以及**64 位文件”。

让生活变得有趣我猜……必须说我喜欢“似乎是间歇性问题”这句话……听起来有点像“你在想象事情，但以防万一，这样做……”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-03T09:57:24.907

**一个带有 x86/x64 依赖项的 .Net 构建**

虽然所有其他答案都为您提供了根据平台制作不同构建的解决方案，但我为您提供了一个选项，即仅具有“AnyCPU”配置并制作适用于您的 x86 和 x64 dll 的构建。

您必须为此编写一些管道代码。

**在运行时解析正确的 x86/x64-dll**

脚步：

1.  在 csproj 中使用 AnyCPU
2.  确定您是否仅在 csprojs 中引用 x86 或 x64 dll。使 UnitTests 设置适应您选择的体系结构设置。这对于在 VisualStudio 中调试/运行测试很重要。
3.  在 Reference-Properties 上将**Copy Local** & **Specific Version**设置为**false**
4.  通过将此行添加到所有引用 x86/x64 的 csproj 文件中 的第一个**PropertyGroup来消除架构警告：**`<ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>`
5.  将此 postbuild 脚本添加到您的启动项目中，使用并修改此脚本 sp 的路径，它将所有 x86/x64 dll 复制到构建 bin\x86\ bin\x64\ 的相应子文件夹中

    `xcopy /E /H /R /Y /I /D $(SolutionDir)\YourPathToX86Dlls $(TargetDir)\x86 xcopy /E /H /R /Y /I /D $(SolutionDir)\YourPathToX64Dlls $(TargetDir)\x64`

    --> 当你现在启动应用程序时，你会得到一个异常，即找不到程序集。

6.  在应用程序入口点的开头注册 AssemblyResolve 事件

    ```
    AppDomain.CurrentDomain.AssemblyResolve += TryResolveArchitectureDependency; 
    ```

    用这个方法：

    ```
    /// <summary>
    /// Event Handler for AppDomain.CurrentDomain.AssemblyResolve
    /// </summary>
    /// <param name="sender">The app domain</param>
    /// <param name="resolveEventArgs">The resolve event args</param>
    /// <returns>The architecture dependent assembly</returns>
    public static Assembly TryResolveArchitectureDependency(object sender, ResolveEventArgs resolveEventArgs)
    {
        var dllName = resolveEventArgs.Name.Substring(0, resolveEventArgs.Name.IndexOf(","));

        var anyCpuAssemblyPath = $".\\{dllName}.dll";

        var architectureName = System.Environment.Is64BitProcess ? "x64" : "x86";

        var assemblyPath = $".\\{architectureName}\\{dllName}.dll";

        if (File.Exists(assemblyPath))
        {
            return Assembly.LoadFrom(assemblyPath);
        }

        return null;
    } 
    ```

7.  如果您有单元测试，请使用具有 AssemblyInitializeAttribute 的方法创建一个 TestClass，并在那里注册上述 TryResolveArchitectureDependency-Handler。（如果您在 Visual Studio 中运行单个测试，有时不会执行此操作，引用将不会从 UnitTest bin 中解析。因此，步骤 2 中的决定很重要。）

好处：

*   一个安装/构建两个平台

缺点： - 当 x86/x64 dll 不匹配时，编译时不会出错。- 您仍然应该在两种模式下运行测试！

可以选择在构建后脚本中使用 Corflags.exe 创建一个专用于 x64 体系结构的第二个可执行文件

要尝试的其他变体： - 如果您确保在开始时将正确的 dll 复制到二进制文件夹中，则不需要 AssemblyResolve 事件处理程序（评估进程架构 -> 将相应的 dll 从 x64/x86 移动到 bin 文件夹并返回。 ) - 在安装程序中评估架构并删除错误架构的二进制文件并将正确的二进制文件移动到 bin 文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T13:29:03.140

关于你的最后一个问题。您很可能无法在单个 MSI 中解决此问题。如果您使用注册表/系统文件夹或任何相关内容，MSI 本身必须意识到这一点，您必须准备 64 位 MSI 才能在 32 位机器上正确安装。

有可能您可以将产品安装为 32 it 应用程序，并且仍然能够使其作为 64 位应用程序运行，但我认为这可能有点难以实现。

话虽如此，我认为您应该能够为所有内容保留一个代码库。在我目前的工作地点，我们已经做到了。（但确实需要一些杂耍才能让所有东西一起玩）

希望这可以帮助。下面是一些与 32/64 位问题相关的信息的链接：http: [//blog.typemock.com/2008/07/registry-on-windows-64-bit-double-your.html](http://blog.typemock.com/2008/07/registry-on-windows-64-bit-double-your.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-26T15:29:06.760

如果您使用 .NET 编写的自定义操作作为 MSI 安装程序的一部分，那么您还有另一个问题。

运行这些自定义操作的“垫片”始终为 32 位，然后您的自定义操作也将运行 32 位，无论您指定什么目标。

更多信息和一些忍者移动（基本上将 MSI 更改为使用此 shim 的 64 位版本）

[在 Visual Studio 2005/2008 中构建 MSI 以在 SharePoint 64 上工作](http://www.sharepointonlinkedin.com/post/2008/07/25/Building-an-MSI-in-Visual-Studio-20052008-to-work-on-a-SharePoint-64-bit-installation-with-a-Custom-Action!.aspx)

[使用 Visual Studio 的 64 位托管自定义操作](http://blogs.msdn.com/heaths/archive/2006/02/01/64-bit-managed-custom-actions-with-visual-studio.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-26T23:26:00.797

您可以以不同的方式生成两个解决方案，然后将它们合并！我为 VS 2010 做了这个。它有效。我有 2 个由 CMake 生成的不同解决方案，我将它们合并

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-11T14:23:52.480

您可以对项目文件中的 dll 引用使用**ItemGroup的条件。**
这将导致 Visual Studio 在您更改活动配置时重新检查条件和引用。
只需为每个配置添加一个条件。

例子：

```
 <ItemGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <Reference Include="DLLName">
      <HintPath>..\DLLName.dll</HintPath>
    </Reference>
    <ProjectReference Include="..\MyOtherProject.vcxproj">
      <Project>{AAAAAA-000000-BBBB-CCCC-TTTTTTTTTT}</Project>
      <Name>MyOtherProject</Name>
    </ProjectReference>
  </ItemGroup> 
```

# c++ - 基于编译时类型的调度

> ID：145814
> 
> 赞同：4
> 
> 时间：2008-09-28T13:14:57.510
> 
> 标签：c++, templates

遵循“现代 C++ 设计”中的技术，我正在实现一个具有各种编译时优化的持久性库。如果该变量派生自给定类，我希望能够将函数分派给模板化成员变量：

```
template<class T, template <class> class Manager = DefaultManager> class Data
{
private:
   T *data_;

public:
   void Dispatch()
   {
      if(SUPERSUBCLASS(Container, T))
      {
         data_->IKnowThisIsHere();
      }
      else
      {
         Manager<T>::SomeGenericFunction(data_);
      }
   }
} 
```

其中 SUPERSUBCLASS 是用于确定对象继承的编译时宏。当然，在 T 确实从 Container 继承（或 T 是内在类型等）的所有情况下，这都会失败，因为编译器正确地抱怨 IKnowThisIsHere() 不是数据成员，即使永远不会遵循此代码路径，使用 T = int 进行预处理后，如下所示：

```
private:
   int *data_;

public:
   void Dispatch()
   {
      if(false)
      {
         data_->IKnowThisIsHere(); 
```

编译器清楚地抱怨这段代码，即使它永远不会被执行。使用 dynamic_cast 的建议也不起作用，因为在编译时再次尝试了不可能的类型转换（例如使用 T=double，std::string）：

```
void Dispatch()
   {
      if(false)
      {
         dynamic_cast<Container*>(data_)->IKnowThisIsHere();

error: cannot dynamic_cast '((const Data<double, DefaultManager>*)this)->Data<double, DefaultManager>::data_' (of type 'double* const') to type 'class Container*' (source is not a pointer to class)
error: cannot dynamic_cast '((const Data<std::string, DefaultManager>*)this)->Da<sttad::string, DefaultManager>::data_' (of type 'struct std::string* const') to type 'class Container*' (source type is not polymorphic) 
```

如果 T 确实从 Container 继承，我真的需要模拟（或确实说服！）让编译器发出一组代码，如果不是，则发出另一组代码。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T14:30:06.113

*正如Alexandrescu*在他的《现代 C++ 设计》一书中提出的，重载对于实现编译时调度很有用。

您可以使用这样的类在编译时将布尔值或整数转换为类型：

```
template <bool n>
struct int2type
{ enum { value = n}; }; 
```

以下源代码显示了一个可能的应用程序：

```
#include <iostream>

#define MACRO()   true  // <- macro used to dispatch 

template <bool n>
struct int2type
{ enum { value = n }; };

void method(int2type<false>)
{ std::cout << __PRETTY_FUNCTION__  << std::endl; }

void method(int2type<true>)
{ std::cout << __PRETTY_FUNCTION__  << std::endl; }

int
main(int argc, char *argv[])
{
    // MACRO() determines which function to call
    //

    method( int2type<MACRO()>()); 

    return 0;
} 
```

当然，真正完成这项工作的是 MACRO() 或作为元函数的更好实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T15:19:37.007

您需要一种 compile-time `if`。然后根据哪种情况调用一个函数`true`。这样，编译器就不会偶然发现它无法编译的代码（因为它被安全地存储在另一个永远不会被实例化的函数模板中）。

有几种方法可以实现这样的 compile-time `if`。最常见的是使用 SFINAE 成语：[substitution failure is not an error](http://en.wikipedia.org/wiki/SFINAE)。Boost 的`is_base_of`ist 实际上就是这个习语的一个实例。要正确使用它，您不会将其写在`if`表达式中，而是将其用作函数的返回类型。

未经测试的代码：

```
void Dispatch()
{
    myfunc(data_);
}

private:

// EDIT: disabled the default case where the specialisation matched
template <typename U>
typename enable_if_c<is_base_of<Container, U>::value, U>::type myfunc(U& data_) {
    data_->IKnowThisIsHere();
}

template <typename U>
typename disable_if_c<is_base_of<Container, U>::value, U>::type myfunc(U& data_) { // default case
    Manager<U>::SomeGenericFunction(data_);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T13:17:31.903

Boost 特征有一些东西：[is_base_of](http://www.boost.org/doc/libs/1_36_0/libs/type_traits/doc/html/boost_typetraits/reference/is_base_of.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T13:18:52.773

查看 boost 模板元编程库。此外，根据您要完成的任务，查看 boost 序列化库，因为它可能已经包含您需要的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T13:44:46.237

不幸的是，我也经历过（它也是一个运行时调用；））如果您以与以前类似的方式传入非多态或类类型，编译器会抱怨：

```
error: cannot dynamic_cast '((const Data<double, DefaultManager>*)this)->Data<double, RawManager>::data_' (of type 'double* const') to type 'class Container*' (source is not a pointer to class) 
```

或者

```
error: cannot dynamic_cast '((const Data<std::string, DefaultRawManager>*)this)->Data<std::string, DefaultManager>::data_' (of type 'struct std::string* const') to type 'class Container*' (source type is not polymorphic) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-28T13:20:50.133

作为一种教育好奇心，我对“从第一原则”做这件事很感兴趣。但是，我将查看 Boost 库。

无论如何，我认为 is_base_of 没有任何帮助 - 它与 SUPERSUBCLASS 宏完全相同......

# c++ - 包含具有 C++ 源代码的相关 Boost 库（使用 Visual Studio）

> ID：145828
> 
> 赞同：6
> 
> 时间：2008-09-28T13:26:19.977
> 
> 标签：c++, visual-studio, boost

我有一个我正在从事的项目（针对学校），我正在研究 Boost 库以获取解决方案。我需要某种方式将所需的 Boost 源代码与我的应用程序一起分发，以便可以在系统上不安装库的情况下对其进行编译。（学校电脑几乎没有你能提到的任何东西。学校去年刚刚安装了 CVS。但他们确实有 VS2005）

注意：我在 Vista 上使用 Visual Studio 2005。我的系统上有 Boost 1.34.1 我使用了[自动安装程序](http://www.boostpro.com/products/free)。我遇到的文档说明了有关使用 BCP 命令的内容，但该命令似乎没有复制任何内容。（我使用绝对路径来调用 BCP，所以我最终不会调用错误的命令。）

编辑：我正在尝试使用 RegEx 库。

编辑：我用于 BCP 的命令是：`"c:\Program Files\boost\boost_1_34_1\bin\bcp.exe" boost/regex.hpp regex\`

它返回：`no errors detected`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T13:57:38.343

这取决于您使用的库。如果您使用的是仅头文件库（大多数 boost 库都是，一些值得注意的例外是信号、序列化和日期/时间），您可以复制这些头文件。否则，您也需要复制 cpp 文件。我的建议是将它们包含在您的项目中。

所以，这就是你要做的：你从你的项目设置（工具->选项->项目和解决方案->vc++目录->包含文件）中删除boost包含路径。尝试编译。看看哪个包含失败。将该文件从您的 boost 目录复制到您的项目目录。起泡、冲洗、重复，直到您的项目编译完成。

如果您使用的库需要 .cpp 文件，您将在链接时收到错误消息。将您使用的库的所有 .cpp 文件复制到项目目录并将它们全部添加到您的解决方案中。重建并交叉手指。

有关更详细的答案，请发布您正在使用的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-29T15:24:36.520

根据您使用正则表达式的评论，您可以执行以下操作：下载“正常”提升分发 zip 文件。在某处解压。转到库/正则表达式/src。将该目录中的所有 .cpp 文件复制并粘贴到您的项目目录中。将它们添加到您的 Visual Studio 项目中（右键单击，“添加”->“现有项”）。然后转到 boost/regex 并将其中的所有内容（头文件）复制到您的项目目录（包括子目录）。将您自己的 .cpp 和 .h 文件中的所有包含从 #include 更改为“regex.hpp”，以便它包含本地目录中的标头，而不是系统范围内安装的标头。确保从您的项目设置中删除系统范围的包含路径，就像我在上一篇文章中所说的那样。

然后，编译你的代码。您将收到许多“缺少包含文件”错误，因为正则表达式依赖于其他 boost 库。重复整个过程：转到 boost/xxx ，其中 xxx 是正则表达式正在寻找的库。您可以从错误消息中推断出库。将编译器要求的所有内容复制到您自己的项目目录中。在它工作之前，您可能需要稍微调整一下目录布局。这实际上是一步一步的方法，每一步都是相同的：识别丢失的文件，复制它，查看是否找到并修复了该包含，然后继续下一步。恐怕这是无聊的工作。

您可以使用 bcp 将这一切自动化，但对于像学校项目这样的一次性项目，我不会打扰；仅当您认为将来的项目需要您提供独立的 zip 文件时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-29T10:24:30.687

Try calling bcp with this command:

```
"c:\Program Files\boost\boost_1_34_1\bin\bcp.exe" --boost="c:\Program Files\boost\boost_1_34_1" regex regex 
```

`--boost` tells bcp where boost is installed, the first `regex` is the name of the modules, the second is the destination directory.

Oh, and if you haven't already noticed, there are Visual C++ makefiles in `libs\regex\build\`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T14:23:15.067

这对我来说似乎有点奇怪。如果您正在分发源代码，那么您分发给的人应该能够安装 boost。然后，如果他们已经有了 boost，没有重复和混乱，或者如果他们没有并且您需要一个构建的库，他们将为他们的系统构建正确的库。如果您分发的人不适合安装 boost，那么我建议在安装包中分发二进制文件，以使其尽可能容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T14:06:34.763

我以前遇到过这种情况，将 boost 嵌入到我的项目中。每个单独的 boost 库都带有各种项目文件，用于使用不同的 make 系统（Jam、make、Visual Studio 6...）进行构建，但对于较新版本的 VS，它们从未如此出色。

我总是喜欢创建一个新的项目文件并将 boost 直接嵌入到我的项目中。这很简单，您只需添加所有源文件并正确设置项目选项。但是，有一个警告，那就是您必须将库输出文件命名为 boost 所做的那样，因为它们的包含文件依赖于此。

完成此操作后，您可以像分发项目中的任何其他文件一样分发 boost 库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-21T13:37:59.573

编译boost就是这样的PITA；只有积极进取的学生才能做到。您是否考虑过捆绑安装程序？

# c++ - C++ 中内联函数的好处？

> ID：145838
> 
> 赞同：269
> 
> 时间：2008-09-28T13:35:23.623
> 
> 标签：c++, inline-functions

在 C++ 中使用内联函数的优点/缺点是什么？我看到它只会提高编译器输出的代码的性能，但是对于今天优化的编译器、快速的 CPU、巨大的内存等（不像 1980 年那样，内存稀缺，所有东西都必须适合 100KB 的内存）什么他们今天真的有优势吗？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2008-09-28T14:37:39.917

## 好处

*   通过在需要的地方内联代码，您的程序将在函数调用和返回部分上花费更少的时间。它应该使您的代码运行得更快，即使它变得更大（见下文）。内联普通访问器可能是有效内联的一个例子。
*   通过将其标记为内联，您可以将函数定义放在头文件中（即它可以包含在多个编译单元中，而链接器不会抱怨）

## 缺点

*   它可以使您的代码更大（即，如果您将内联用于非平凡函数）。因此，它可能会引发分页并破坏编译器的优化。
*   它稍微破坏了您的封装，因为它暴露了您的对象处理的内部（但是，每个“私人”成员也会这样做）。这意味着您不能在 PImpl 模式中使用内联。
*   它稍微破坏了您的封装 2：C++ 内联在编译时解决。这意味着如果您更改内联函数的代码，您将需要使用它重新编译所有代码以确保它会被更新（出于同样的原因，我避免函数参数的默认值）
*   在头文件中使用时，它会使您的头文件变大，因此会用用户不关心的代码稀释有趣的信息（如类方法列表）（这就是我在 a 中声明内联函数的原因类，但将在类主体之后的标题中定义它，而不是在类主体内）。

## 内联魔术

*   编译器可能会也可能不会内联您标记为内联的函数；它还可能决定在编译或链接时内联未标记为内联的函数。
*   内联的工作方式类似于由编译器控制的复制/粘贴，这与预处理宏有很大的不同：宏会被强制内联，会污染所有的命名空间和代码，不容易调试，甚至会被完成如果编译器会裁定它效率低下。
*   在类本身内部定义的类的每个方法都被认为是“内联的”（即使编译器仍然可以决定不内联它
*   虚拟方法不应该是可内联的。尽管如此，有时，当编译器可以确定对象的类型时（即对象是在同一个函数体内声明和构造的），即使是虚函数也会被内联，因为编译器确切地知道对象的类型。
*   模板方法/函数并不总是内联（它们在标题中的存在不会使它们自动内联）。
*   “内联”之后的下一步是模板元编程。即通过在编译时“内联”您的代码，有时，编译器可以推断出函数的最终结果......因此，有时可以将复杂的算法简化为一种`return 42 ;`语句。这对我来说是*极端的内联*。它在现实生活中很少发生，它使编译时间更长，不会使您的代码膨胀，并使您的代码更快。但是就像圣杯一样，不要试图将它应用到任何地方，因为大多数处理都无法通过这种方式解决......不过，无论如何这很酷......
    :-p

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2008-09-28T13:36:29.953

内联函数更快，因为您不需要像参数和返回地址那样在堆栈上/从堆栈上推送和弹出东西；但是，它确实使您的二进制文件稍大一些。

它有很大的不同吗？对于大多数人来说，在现代硬件上不够明显。但它可以有所作为，这对某些人来说已经足够了。

将某些内容标记为内联并不能保证它是内联的。这只是对编译器的建议。有时这是不可能的，例如当你有一个虚函数时，或者当涉及到递归时。有时编译器只是选择不使用它。

我可以看到这样的情况会产生可察觉的差异：

```
inline int aplusb_pow2(int a, int b) {
  return (a + b)*(a + b) ;
}

for(int a = 0; a < 900000; ++a)
    for(int b = 0; b < 900000; ++b)
        aplusb_pow2(a, b); 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2011-09-14T14:47:08.367

在古老的 C 和 C++ 中，`inline`就像`register`：向编译器提出关于可能的优化的建议（无非是建议）。

在现代 C++ 中，`inline`告诉链接器，如果在不同的翻译单元中找到多个定义（不是声明），它们都是相同的，链接器可以自由地保留一个并丢弃所有其他的。

`inline`如果在头文件中定义了一个函数（无论多么复杂或“线性”），则它是强制性的，以允许多个源包含它而不会导致链接器出现“多重定义”错误。

默认情况下，在类中定义的成员函数是“内联”的，模板函数也是如此（与全局函数相反）。

```
//fileA.h
inline void afunc()
{ std::cout << "this is afunc" << std::endl; }

//file1.cpp
#include "fileA.h"
void acall()
{ afunc(); }

//main.cpp
#include "fileA.h"
void acall();

int main()
{ 
   afunc(); 
   acall();
}

//output
this is afunc
this is afunc 
```

请注意将 fileA.h 包含到两个 .cpp 文件中，从而产生两个 .cpp 实例`afunc()`。链接器将丢弃其中之一。如果没有`inline`指定，链接器将抱怨。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-09-28T13:44:15.630

内联是对编译器的建议，可以随意忽略。它非常适合少量代码。

如果您的函数是内联的，则它基本上是插入到对其进行函数调用的代码中，而不是实际调用单独的函数。这有助于提高速度，因为您不必进行实际通话。

它还协助 CPU 进行流水线操作，因为它们不必使用由调用引起的新指令重新加载流水线。

唯一的缺点是可能会增加二进制大小，但只要函数很小，这不会太重要。

我现在倾向于将这些决定留给编译器（好吧，无论如何都是聪明的）。编写它们的人往往对底层架构有更详细的了解。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-09-14T03:43:36.977

内联函数是编译器使用的优化技术。可以简单地将 inline 关键字添加到函数原型以使函数内联。内联函数指示编译器在代码中使用该函数的任何位置插入完整的函数体。

**[好处 ：-](http://tajendrasengar.blogspot.com/2010/03/what-is-inline-function-in-cc.html)**

1.  它不需要函数调用开销。

2.  它还节省了函数调用时变量压入/弹出堆栈的开销。

3.  它还节省了函数返回调用的开销。

4.  它通过利用指令缓存增加了引用的局部性。

5.  如果指定，内联编译器还可以应用程序内优化。这是最重要的一个，这样编译器现在可以专注于死代码消除，可以更加强调分支预测，归纳变量消除等。

要了解更多信息，可以点击此链接 [http://tajendrasengar.blogspot.com/2010/03/what-is-inline-function-in-cc.html](http://tajendrasengar.blogspot.com/2010/03/what-is-inline-function-in-cc.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-05-07T02:59:19.203

我想补充一点，当您构建共享库时，内联函数至关重要。如果不标记函数内联，它将以二进制形式导出到库中。如果导出，它也将出现在符号表中。另一方面，内联函数既不会导出到库二进制文件，也不会导出到符号表。

当库打算在运行时加载时，这可能很关键。它也可能会命中二进制兼容的库。在这种情况下，不要使用内联。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-28T15:53:06.007

在优化期间，即使您没有标记函数，许多编译器也会内联函数。如果您知道编译器不知道的内容，通常只需要将函数标记为内联，因为它通常可以自己做出正确的决定。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-09-14T10:03:19.537

`inline`允许您将函数定义放在一个头文件中，并将`#include`该头文件放在多个源文件中，而不会违反一个定义规则。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-28T16:02:47.840

一般来说，现在任何现代编译器担心内联任何东西都是浪费时间。编译器实际上应该通过自己对代码的分析以及您对传递给编译器的优化标志的规范为您优化所有这些考虑因素。如果您关心速度，请告诉编译器优化速度。如果您关心空间，请告诉编译器优化空间。正如另一个答案所暗示的那样，一个体面的编译器甚至会自动内联，如果它真的有意义的话。

此外，正如其他人所说，使用内联并不能保证内联任何内容。如果你想保证它，你将不得不定义一个宏而不是一个内联函数来做到这一点。

何时内联和/或定义宏以强制包含？- 仅当您对已知会影响应用程序整体性能的关键代码部分的速度有明显且必要的证明时。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-12-10T10:21:34.073

这不仅仅与性能有关。C++ 和 C 都用于嵌入式编程，位于硬件之上。例如，如果您要编写中断处理程序，则需要确保代码可以立即执行，而无需交换额外的寄存器和/或内存页面。这时候 inline 就派上用场了。当需要速度时，好的编译器会自己做一些“内联”，但“内联”会强制它们。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-01-08T14:59:39.683

将函数内联到 so 库中时遇到了同样的麻烦。似乎内联函数没有编译到库中。因此，如果可执行文件想要使用库的内联函数，链接器会发出“未定义的引用”错误。（发生在我用 gcc 4.5 编译 Qt 源代码时。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-28T19:46:57.593

为什么不让所有函数默认内联呢？因为这是一个工程权衡。至少有两种“优化”：加速程序和减少程序的大小（内存占用）。内联通常会加快速度。它摆脱了函数调用开销，避免了从堆栈中推入然后拉出参数。但是，它也使程序的内存占用更大，因为现在必须用函数的完整代码替换每个函数调用。更复杂的是，请记住 CPU 将经常使用的内存块存储在 CPU 的高速缓存中以实现超快速访问。如果您使程序的内存映像足够大，您的程序将无法有效地使用缓存，在最坏的情况下，内联实际上可能会减慢您的程序速度。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-06-17T15:02:59.953

我们的计算机科学教授敦促我们不要在 c++ 程序中使用内联。当被问及原因时，他亲切地向我们解释说，现代编译器应该自动检测何时使用内联。

所以是的，内联可以是一种优化技术，可以在任何可能的情况下使用，但显然，只要有可能内联函数，这已经为您完成了。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2008-09-28T15:58:15.073

[此处另一个讨论](https://stackoverflow.com/questions/60830/what-is-wrong-with-using-inline-functions)的结论：

**内联函数有什么缺点吗？**

显然，使用内联函数并没有错。

但值得注意的是以下几点！

*   过度使用内联实际上会使程序变慢。根据函数的大小，内联它可能会导致代码大小增加或减少。内联非常小的访问器函数通常会减少代码大小，而内联非常大的函数会显着增加代码大小。在现代处理器上，由于更好地使用指令缓存，较小的代码通常运行得更快。[- 谷歌指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Inline_Functions)

*   随着函数大小的增长，内联函数的速度优势趋于减弱。在某些时候，函数调用的开销与函数体的执行相比变得很小，并且失去了好处[- 来源](http://www-rocq.inria.fr/who/Marc.Thiriet/Langages/tic0324.html)

*   在少数情况下内联函数可能不起作用：

    *   对于返回值的函数；如果存在 return 语句。
    *   对于不返回任何值的函数；如果存在循环、switch 或 goto 语句。
    *   如果函数是递归的。[-来源](http://www-rocq.inria.fr/who/Marc.Thiriet/Langages/tic0324.html)
*   仅当您指定优化选项时，`__inline`关键字才会内联函数。如果指定了优化，是否`__inline`兑现取决于内联优化器选项的设置。默认情况下，只要运行优化器，内联选项就会生效。如果您指定 optimize ，如果您希望`__inline`关键字被忽略，则还必须指定 noinline 选项。[-来源](http://support.sas.com/documentation/onlinedoc/sasc/doc750/html/clug/zcoptinl.htm)

# data-structures - 从内到外了解最有用的数据结构是什么？

> ID：145842
> 
> 赞同：14
> 
> 时间：2008-09-28T13:36:41.763
> 
> 标签：data-structures

我有兴趣找出人们认为在编程中最有用的数据结构。你发现自己一直在使用什么数据结构？

这篇文章的答案应该可以帮助有兴趣为他们的问题找到有用的数据结构的新程序员。答案可能应该包括数据结构、关于它或相关链接的信息、它的使用情况以及为什么它是解决这个问题的好选择（例如理想的计算复杂性、简单性和理解等）

每个答案应该只与一个数据结构有关。

感谢人们可以分享的任何智慧和经验。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-09-28T15:05:28.460

我使用最多的数据结构之一（当然，除了向量）是 Hashtable。如果您需要能够在 O(1) 时间内搜索大量数据，那么它是唯一的选择，这意味着搜索时间不会随着集合大小的增长而增长。

问题是插入和删除时间比其他数据结构中的要长，并且您需要使用某种键来搜索集合。每个元素都必须有一个键。该算法获取每个元素的密钥并计算一个哈希码，该哈希码指示哈希表中要搜索的槽。然后根据实现，它要么遵循落在该存储桶上的项目列表来查找您的项目，要么搜索附近的存储桶。哈希表的大小决定了哈希的效率，而哈希的效率很大程度上受到键之间哈希码冲突数量的影响。

每当您需要映射并且映射的预期元素数量超过大约 10 时使用它。它比其他结构更占用内存，因为它需要在表中使用大量未使用的插槽才能提高效率。

C# 有一个很好的实现，`Dictionary<keytype, valuetype>`甚至有一个 HybridDictionary，它在内部决定何时使用哈希表或向量。任何好的编程书籍都会描述它，但维基百科会很好地为您服务： [http ://en.wikipedia.org/wiki/Hashtable](http://en.wikipedia.org/wiki/Hashtable)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T17:29:21.517

我将不得不忽略您对每个帖子一个数据结构的要求 - 这些是我使用最多的那些，我发现大多数程序大多需要其中一个或组合。

**数组**- 最基本的并提供最快的访问。**向量**是对普通旧数组的即兴创作，是当今常用的事实上的替代品。 **dequeue**是这个主题的另一个变体，它再次提供恒定时间/随机访问，但针对开始和结束的快速插入和删除进行了优化。

**链接列表**- 对于维护频繁删除和插入但迭代/搜索非常慢的数据列表非常有用。例如内存页面内的空闲/使用列表

**树**- 形成更复杂结构的基础的基本结构。这种结构有多种形式。当树保持排序时提供登录搜索时间。对于字典等大数据项很有用。二叉树/AVL 和红黑树是最常见的。

**映射和散列**- 不完全是数据结构，而是使用巧妙的逻辑和上述数据结构的组合实现的复杂快速查找算法。

这些数据结构及其实现在 C++ 的 STL 库中可用。其他语言也有它们的本地实现。一旦您了解了这些基本数据结构和它们的一些变体（队列、堆栈、优先队列）以及有关搜索算法的一些知识，我会说基础知识将得到很好的涵盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T13:47:07.823

我发现自己经常使用关联数组，基本上是以字符串为索引的数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T12:40:54.383

> 链表的优点是添加/删除节点非常便宜。与数组 [...] 不同，它们在扩展时不需要重新分配更多内存。

如果您有一个数组并且每次填充它时都将分配大小加倍，那么您将摊销 O(1) 附加。此外，由于缓存效果，循环遍历数组的所有元素可能比循环遍历链表更快（在墙上时间）（除非您将链接分配为大块并且不要过多地弄乱它们）。

此外，数组更小：您节省了每个元素的字开销，加上每个分配的开销（可能至少有两个字：一个用于大小，一个用于下一个空闲列表指针）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T13:47:47.213

## 链表/双向链表/其他变体

每个人都应该知道链表的优缺点，而且由于完全缺乏使用，它似乎是很多人似乎忘记的东西。

链表的优点是添加/删除节点非常便宜。与在核心使用数组的数组或数据结构不同，它们不需要在扩展时重新分配更多内存。

缺点是它们在搜索方面表现不佳。对于链表，数组中的 O(1) 查找是 O(n)。

像所有结构一样，链表仅在某些条件下才是理想的。但是在正确的时间使用，它们非常强大。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T14:38:06.250

我喜欢二叉树。特别是 Splay-Tree 变体。它有点类似于自平衡二叉树，但也适应应用程序的使用模式。您几乎从未遇到过最坏情况的 O(n) 行为。

一个很好的好处是它们也比其他自平衡二叉树更容易编写并且需要更少的代码。这是我最喜欢的数据结构之一，因为它在实践中表现得非常好。

[http://en.wikipedia.org/wiki/Splay_tree](http://en.wikipedia.org/wiki/Splay_tree)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-28T15:35:37.110

我发现自己经常将数组与“foreach”控制结构结合使用来遍历项目。过去，我使用带有数字索引和“for(i=1;i<n;i++)”的数组。我发现使用“foreach”而不是显式数字索引循环遍历数组提供了更通用和可读的解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-18T03:24:09.720

图是一种非常强大的被忽视的数据结构。

很多问题可以通过构建一个图来建模你的问题，然后在图上使用一个众所周知的算法来解决。一些示例自然语言处理（连接节点的边权重可以表示一个单词跟随另一个单词的可能性）视频游戏（使用图表来确定 AI 字符的最短路径）和网络拓扑。

我从Steve Yegge 在一篇[博文中推荐的](http://steve-yegge.blogspot.com/2008/03/get-that-job-at-google.html)[The Algorithm Design Manual](https://rads.stackoverflow.com/amzn/click/com/0387948600)中了解了图表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-28T13:40:53.673

这有点像询问木匠工具箱中的哪些工具最适合学习使用。它们中的每一个都适合某种类型的工作，你需要平等地学习基本的（地图、列表、包、套装等）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-28T13:41:08.007

我不认为必须知道一种数据结构。每个数据结构都有自己的属性，因此适用于特定问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-28T14:05:53.423

我一直发现堆栈有无数种用途，尽管在面向对象编程中使用较少。确实，所有数据结构都有其用途，而且它们并不复杂。尽你所能学习。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-28T14:08:02.140

我不认为这里有一个普遍的答案。它应该受限于某些用例。例如，在我 10 多年的程序员/经理职业生涯中，我从未使用过二叉树。我怀疑这是否意味着二叉树没有用，但在内核和嵌入式世界中，链表可能更适合。
实际上，当我考虑删除一些异常时，我只使用了简单的链表。
然后即使在嵌入式中，它也可能不是我生活在低级硬件协议世界中唯一使用的结构，可能“上山”使用更多的数据结构......

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-28T14:51:33.423

对于基本的了解，您应该了解一些抽象数据类型（集合、字典、有序列表、队列、堆栈等）以及实现每种数据类型及其相关权衡的几种方法。

这可能需要您了解数组、链表（单链和双链）、哈希表、二叉搜索树（对简单的平衡启发法有一些了解）和二叉堆。从里到外了解这些，您将在理解更复杂和有趣的数据结构方面走得很远。另外，如果您已经实现了所有这些，您将拥有一个现成的库，您可以理解它用于编程项目（尽管显然更多像 Boost 或其他更适合生产代码的久经沙场的库）。

这提供了一个非常有用的数据结构词汇表，这可能会对您编写程序的方式产生重大影响。您可能会发现您一直在解决队列的许多部分实现的问题，例如，您现在可以将其替换为规范实现。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2008-09-28T13:40:35.217

这个帖子太模糊了。有无数的数据结构：数组、字典等。每种数据结构都可以用来解决不同的问题。

针对特定问题要求 DS 会更有成效。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2009-02-01T12:50:30.867

**快速排序**

**合并排序**

**冒泡排序**

这些真的很好学习和理解它们是如何工作的。排序很有趣，可以应用于许多领域:)

# php - 无法访问 Web 服务代码中的 HTTP PUT 数据

> ID：145855
> 
> 赞同：1
> 
> 时间：2008-09-28T13:41:25.370
> 
> 标签：php, web-services, rest

全部，

作为我正在编写的应用程序的一部分，我需要一个 HTTP PUT 网络服务，它接受传入的图像数据，这些图像数据将通过分析、验证并添加到本地文件存储中。

我的问题是在尺寸验证后出现的

> `$_SERVER['CONTENT_LENGTH']`

具有 > 0 的值，并且该值与测试文件大小相同，因此我可以假设到目前为止一切顺利，*但是*当我尝试使用读取传入的流数据时

> `file_get_contents('php://stdin');`

我得到一个空字符串。我也尝试过使用

> `file_get_contents('php://input');`

这给了我与空字符串相同的结果。

任何帮助、建议或方向将不胜感激。

注意：我正在使用

*   PHP 5.2.6
*   阿帕奇 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-04T05:34:35.937

默认情况下，Apache HTTPD 拒绝 PUT 请求。您可以查看 mod_put：
[http ://perso.ec-lyon.fr/lyonel.vincent/apache/mod_put.html](http://perso.ec-lyon.fr/lyonel.vincent/apache/mod_put.html)

并将其添加到 httpd.conf：

```
<位置/上传/目录>
  启用穿上
  AuthType 基本
  AuthName "网络发布"
  AuthUserFile /www/etc/passwd
  AuthGroupFile /www/etc/group
  <限制PUT>
    需要有效用户
  </限制>
</位置>

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-30T08:17:04.963

我最好的猜测是您需要更改 httpd.conf 以不拒绝 PUT 请求。你检查过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T13:48:15.230

`r`你得到的第二个参数是不正确的 。`file_get_contents`不使用使用的`a/r/w/a+/r+/w+`参数`fopen`。您可能想删除它并执行以下操作：

```
file_get_contents('php://input'); 
```

请参阅[http://us3.php.net/file_get_contents](http://us3.php.net/file_get_contents)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T13:55:21.407

`file_get_contents`不采用“r”参数 - 请参阅[PHP 手册页](http://ie2.php.net/file_get_contents)：

```
string file_get_contents  ( string $filename  [, int $flags...) 
```

有效`$flag`值为`FILE_USE_INCLUDE_PATH, FILE_TEXT, FILE_BINARY`。

尝试删除“r”标志并重试

**编辑**- 问题已更新，“r”标志被忽略，因此显然不是问题的根源。

看起来[PHP](http://bugs.php.net/bug.php?id=33359)中有一个关于`file_get_contents`为 HTTP POST 返回空字符串的错误报告。从错误描述：

> `file_get_contents('php://input')`（并且`file, fopen+fread`）在使用 enctype="multipart/form-data" 提交表单时不返回 POST 数据。
> 
> 当提交没有指定 enctype 的相同表单时（因此使用默认的“application/x-www-form-urlencoded”），一切正常。

因此，看起来一种解决方法是将指定的表单 enctype 从 更改为`multipart/form-data`，这显然不适合图像上传-来自[W3 FORM 规范](http://www.w3.org/TR/html401/interact/forms.html)：

> 内容类型“application/x-www-form-urlencoded”对于发送大量二进制数据或包含非 ASCII 字符的文本效率低下。内容类型“multipart/form-data”应用于提交包含文件、非 ASCII 数据和二进制数据的表单。

**进一步编辑**

这个错误似乎已在您的 PHP 版本中得到解决。您是否检查过以确保正在读取的缓冲区不是以回车符/换行符开头的？[有一个与您在 Sitepoint 上](http://www.sitepoint.com/forums/showthread.php?t=555002)讨论过的问题有些相似的问题。

尝试[`strlen`](http://ie2.php.net/strlen)在输入上运行，看看长度是多少。

# c# - 如何将 int[] 加入 .NET 中的字符分隔字符串？

> ID：145856
> 
> 赞同：106
> 
> 时间：2008-09-28T13:42:28.457
> 
> 标签：c#, .net, .net-3.5

我有一个整数数组：

```
int[] number = new int[] { 2,3,6,7 }; 
```

将这些转换为单个字符串的最简单方法是什么，其中数字由字符分隔（如：）`"2,3,6,7"`？

我正在使用 C# 和 .NET 3.5。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2008-09-28T13:45:57.403

```
var ints = new int[] {1, 2, 3, 4, 5};
var result = string.Join(",", ints.Select(x => x.ToString()).ToArray());
Console.WriteLine(result); // prints "1,2,3,4,5" 
```

从（至少）.NET 4.5 开始，

```
var result = string.Join(",", ints.Select(x => x.ToString()).ToArray()); 
```

相当于：

```
var result = string.Join(",", ints); 
```

我看到几个解决方案宣传使用 StringBuilder。有人抱怨 Join 方法应该采用 IEnumerable 参数。

我会让你失望 :) String.Join 需要一个数组的原因只有一个——性能。Join 方法需要知道数据的大小才能有效地预分配必要的内存量。

下面是 String.Join 方法内部实现的一部分：

```
// length computed from length of items in input array and length of separator
string str = FastAllocateString(length);
fixed (char* chRef = &str.m_firstChar) // note than we use direct memory access here
{
    UnSafeCharBuffer buffer = new UnSafeCharBuffer(chRef, length);
    buffer.AppendString(value[startIndex]);
    for (int j = startIndex + 1; j <= num2; j++)
    {
        buffer.AppendString(separator);
        buffer.AppendString(value[j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2008-10-22T10:33:16.110

尽管 OP 指定了 .NET 3.5，但想要在 .NET 2.0 中使用 C# 2.0 执行此操作的人可以这样做：

```
string.Join(",", Array.ConvertAll<int, String>(ints, Convert.ToString)); 
```

我发现在许多其他情况下，使用 Convert.xxx 函数是 lambda 的一种更简洁的替代方案，尽管在 C# 3.0 中，lambda 可能有助于类型推断。

与 .NET 2.0 一起使用的相当紧凑的 C# 3.0 版本是：

```
string.Join(",", Array.ConvertAll(ints, item => item.ToString())) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-28T14:42:22.823

这两种方法的一种混合是在使用 StringBuilder 的 IEnumerable<T> 上编写扩展方法。这是一个示例，根据您是要指定转换还是仅依赖纯 ToString，具有不同的重载。我将方法命名为“JoinStrings”而不是“Join”以避免与其他类型的 Join 混淆。也许有人可以想出一个更好的名字:)

```
using System;
using System.Collections.Generic;
using System.Text;

public static class Extensions
{
    public static string JoinStrings<T>(this IEnumerable<T> source, 
                                        Func<T, string> projection, string separator)
    {
        StringBuilder builder = new StringBuilder();
        bool first = true;
        foreach (T element in source)
        {
            if (first)
            {
                first = false;
            }
            else
            {
                builder.Append(separator);
            }
            builder.Append(projection(element));
        }
        return builder.ToString();
    }

    public static string JoinStrings<T>(this IEnumerable<T> source, string separator)
    {
        return JoinStrings(source, t => t.ToString(), separator);
    }
}

class Test
{

    public static void Main()
    {
        int[] x = {1, 2, 3, 4, 5, 10, 11};

        Console.WriteLine(x.JoinStrings(";"));
        Console.WriteLine(x.JoinStrings(i => i.ToString("X"), ","));
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-28T13:47:32.500

```
String.Join(";", number.Select(item => item.ToString()).ToArray()); 
```

在加入它们之前，我们必须将每个项目转换为 a ，因此使用lambda 表达式`String`是有意义的。`Select`这相当于`map`在其他一些语言中。然后我们必须将生成的字符串集合转换回数组，因为`String.Join`只接受字符串数组。

我`ToArray()`觉得有点丑。`String.Join`应该真的接受`IEnumerable<String>`，没有理由将其限制为仅数组。这可能只是因为`Join`在泛型之前，数组是唯一可用的类型化集合。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-28T14:22:48.860

如果您的整数数组可能很大，则使用 StringBuilder 可以获得更好的性能。例如：

```
StringBuilder builder = new StringBuilder();
char separator = ',';
foreach(int value in integerArray)
{
    if (builder.Length > 0) builder.Append(separator);
    builder.Append(value);
}
string result = builder.ToString(); 
```

编辑：当我发布这个时，我错误地认为“StringBuilder.Append（int value）”在内部设法附加整数值的字符串表示，而不创建字符串对象。这是错误的：使用 Reflector 检查方法表明它只是附加了 value.ToString()。

因此，唯一潜在的性能差异是这种技术避免了创建一个数组，并稍微更快地释放字符串以进行垃圾回收。在实践中，这不会产生任何可衡量的差异，所以我赞成[这个更好的解决方案](https://stackoverflow.com/questions/145856/how-to-join-int-to-a-charcter-separated-string-in-c#145864)。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-11-29T00:31:24.960

问题是“将这些转换为单个字符串的最简单方法，其中数字由字符分隔”。

最简单的方法是：

```
int[] numbers = new int[] { 2,3,6,7 };
string number_string = string.Join(",", numbers);
// do whatever you want with your exciting new number string 
```

这仅适用于 .NET 4.0+。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-02-04T00:04:23.720

```
ints.Aggregate("", ( str, n ) => str +","+ n ).Substring(1); 
```

我还认为有一个更简单的方法。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-08-13T10:57:20.760

在 .NET 4.0 中，字符串连接有一个重载 for `params object[]`，所以它很简单：

```
int[] ids = new int[] { 1, 2, 3 };
string.Join(",", ids); 
```

### 例子

```
int[] ids = new int[] { 1, 2, 3 };
System.Data.Common.DbCommand cmd = new System.Data.SqlClient.SqlCommand("SELECT * FROM some_table WHERE id_column IN (@bla)");
cmd.CommandText = cmd.CommandText.Replace("@bla",  string.Join(",", ids)); 
```

在 .NET 2.0 中，这稍微有点困难，因为没有这样的重载。所以你需要你自己的通用方法：

```
public static string JoinArray<T>(string separator, T[] inputTypeArray)
{
    string strRetValue = null;
    System.Collections.Generic.List<string> ls = new System.Collections.Generic.List<string>();

    for (int i = 0; i < inputTypeArray.Length; ++i)
    {
        string str = System.Convert.ToString(inputTypeArray[i], System.Globalization.CultureInfo.InvariantCulture);

        if (!string.IsNullOrEmpty(str))
        {
            // SQL-Escape
            // if (typeof(T) == typeof(string))
            //    str = str.Replace("'", "''");

            ls.Add(str);
        } // End if (!string.IsNullOrEmpty(str))

    } // Next i

    strRetValue= string.Join(separator, ls.ToArray());
    ls.Clear();
    ls = null;

    return strRetValue;
} 
```

在 .NET 3.5 中，您可以使用扩展方法：

```
public static class ArrayEx
{

    public static string JoinArray<T>(this T[] inputTypeArray, string separator)
    {
        string strRetValue = null;
        System.Collections.Generic.List<string> ls = new System.Collections.Generic.List<string>();

        for (int i = 0; i < inputTypeArray.Length; ++i)
        {
            string str = System.Convert.ToString(inputTypeArray[i], System.Globalization.CultureInfo.InvariantCulture);

            if (!string.IsNullOrEmpty(str))
            {
                // SQL-Escape
                // if (typeof(T) == typeof(string))
                //    str = str.Replace("'", "''");

                ls.Add(str);
            } // End if (!string.IsNullOrEmpty(str))

        } // Next i

        strRetValue= string.Join(separator, ls.ToArray());
        ls.Clear();
        ls = null;

        return strRetValue;
    }

} 
```

所以你可以使用 JoinArray 扩展方法。

```
int[] ids = new int[] { 1, 2, 3 };
string strIdList = ids.JoinArray(","); 
```

如果将 ExtensionAttribute 添加到代码中，您还可以在 .NET 2.0 中使用该扩展方法：

```
// you need this once (only), and it must be in this namespace
namespace System.Runtime.CompilerServices
{
    [AttributeUsage(AttributeTargets.Assembly | AttributeTargets.Class | AttributeTargets.Method)]
    public sealed class ExtensionAttribute : Attribute {}
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-28T15:49:22.053

我同意 lambda 表达式的可读性和可维护性，但它并不总是最好的选择。使用 IEnumerable/ToArray 和 StringBuilder 方法的缺点是它们必须动态增长一个列表，无论是项目还是字符，因为它们不知道最终字符串需要多少空间。

如果在极少数情况下速度比简洁更重要，那么下面的效率更高。

```
int[] number = new int[] { 1, 2, 3, 4, 5 };
string[] strings = new string[number.Length];
for (int i = 0; i < number.Length; i++)
  strings[i] = number[i].ToString();
string result = string.Join(",", strings); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-22T10:18:32.317

你可以做

```
ints.ToString(",")
ints.ToString("|")
ints.ToString(":") 
```

查看

[用于数组、列表、字典、通用 IEnumerable 的分隔符分隔 ToString](http://www.codemeit.com/linq/c-array-delimited-tostring.html)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-02T17:39:49.797

忘记 .NET 3.5 并在[.NET Core](https://en.wikipedia.org/wiki/.NET_Core)中使用以下代码：

```
var result = string.Join(",", ints); 
```

# java - 最好的 Java/Swing 浏览器组件？

> ID：145863
> 
> 赞同：42
> 
> 时间：2008-09-28T13:45:56.920
> 
> 标签：java, swing, browser

什么是最好的跨平台 Java Swing 浏览器组件，至少能够在 Swing 界面（轻量级组件？）中很好地运行并且能够在 MacOSX 和 Windows 上运行？

比如：[FlyingSaucer](http://code.google.com/p/flying-saucer//)、[JDIC](https://jdic.dev.java.net/)，也许还有其他？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-09-28T14:01:07.943

我相信这会有所帮助：

[http://djproject.sourceforge.net/ns/index.html](http://djproject.sourceforge.net/ns/index.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T15:21:43.773

Lobo 浏览器可能是您正在寻找的：

[http://lobobrowser.org/index.jsp](http://lobobrowser.org/index.jsp)

它是 GPL 并呈现 JavaFX 以及 HTML

* * *

### 编辑

JavaFX 2.0 带有一个浏览器组件： [http ://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-09-30T05:21:03.790

您可以选择 Mozswing，它具有 mozilla firefox 3.0 支持的所有功能.. 但同样很重。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T23:06:43.987

我们 (@WebRenderer) 相信我们拥有最好的 Java 浏览器 SDK - [http://www.webrenderer.com/](http://www.webrenderer.com/) WebRenderer 基于 Swing，使用 Firefox 作为底层引擎，支持 32 位和 64 位系统上的 HTML5、SVG 等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-16T08:26:52.287

基于[http://code.google.com/p/jbrowser/](http://code.google.com/p/jbrowser/)的高性能浏览器。它使用 Canvas 组件。

# ocaml - 如何在 OCaml 中获取堆栈跟踪？

> ID：145880
> 
> 赞同：35
> 
> 时间：2008-09-28T13:53:16.077
> 
> 标签：ocaml, stack-trace

如果您要求恰到好处，Objective Caml 语言只会生成堆栈跟踪 - 字节码和本机代码的要求是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-28T13:56:53.430

使用 -g 编译并设置环境变量 OCAMLRUNPARAM=b

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-02-01T15:05:16.980

一些[Printexc](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printexc.html)函数允许您以编程方式执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-23T00:54:04.943

因为看起来您只能在 unix 上获取异常跟踪，所以您可以在第二个进程中分叉并抛出异常。这样主进程可以继续：

```
export OCAMLRUNPARAM=b
# compile with -g

flush_all(); let r = Unix.fork() in if r == 0 then raise Exit 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-30T03:23:25.700

如果您使用 Ocamlbuild 而不是直接调用编译器，则可以使用该`debug`标记。从[手册](https://github.com/ocaml/ocamlbuild/blob/master/manual/manual.adoc#tags-and-the-code-_tags-code-file)：

> 使用 OCamlbuild，您可以简单地将调试标记添加到程序的目标中，它会整理出何时插入 -g 标志。

例如，如果您正在`foo.ml`使用 package构建文件，`bar`那么您的`_tags`文件将有一行：

```
<foo.ml>: package(bar), debug 
```

`-g`这将在构建字节码/本机文件时插入适当的标志。但是，您仍然需要使用`export OCAMLRUNPARAM=b`其他答案中提到的设置环境变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-22T22:38:47.477

如其他答案所述，您需要使用调试信息编译项目并使用`OCAMLRUNPARAM=b`环境变量运行它。

让 Ocamlbuild 编译带有调试信息但不编辑`_tags`文件的整个项目的一种便捷方法是指定一个特殊的调试目标。从[手册](https://ocaml.org/releases/4.02/htmlman/ocamlbuild.html#sec404)：

> 编译适合调试`ocamldebug`或分析本机代码的代码的首选方法`ocamlprof`是使用适当的目标扩展，`.d.byte`用于调试或`.p.native`.

我使用这种技术在命令行上快速编译运行周期。例如，要运行`foo.ml`：

```
export OCAMLRUNPARAM=b

ocamlbuild -no-links foo.d.byte && _build/foo.d.byte 
```

# iphone - 哪种图像格式在 iPhone 的网络操作方面具有成本效益？

> ID：145887
> 
> 赞同：0
> 
> 时间：2008-09-28T13:58:18.093
> 
> 标签：iphone, image, format

我想在 a`cell`中显示缩略图`tableViewController`，该缩略图位于某个偏远的地方（地址的 URL 在 XML 文件中），那么哪种图像格式具有成本效益？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T14:02:29.627

创建一个示例缩略图，将其转换为 PNG、GIF 和 JPEG，然后查看哪个更小。

有时测量比猜测更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T14:04:35.067

实际上，它与 Web 上的内容基本相同。对于图形，PNG 通常效率更高；对于照片，您需要选择 JPEG。

我不确定 iPhone 是否支持 JPEG 2000（OS X 支持），所以这可能是更有效的照片选择。

还可以考虑使用 和 等工具`optipng`从`jpegtran`图像数据中减少一些额外的千字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T16:36:49.317

`UITableView`a中的图像推荐使用***PNG***，这具有最佳的渲染性能。

# macos - 如何使用 wx 在 mac osx 上设置菜单栏图标

> ID：145894
> 
> 赞同：5
> 
> 时间：2008-09-28T14:02:29.377
> 
> 标签：macos, wxpython, wxwidgets

我找不到任何关于如何使用 wx 在 OSX 上创建菜单栏图标的指示。我原本以为 wxTaskBarIcon 类可以，但它实际上在 Dock 上创建了一个图标。在 Windows 上，wxTaskBarIcon 创建一个 Systray 图标和相关菜单，我认为在 mac osx 上它会创建一个菜单栏图标，我猜不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T14:14:00.597

您必须设置`wxTaskBarIconType`为`STATUSITEM`，而不是`DOCK`。用于此的 Cocoa API 是`NSStatusBar`和`NSStatusItem`; [这是 wxWidgets 中调用它们的代码](http://trac.wxwidgets.org/attachment/ticket/6860/taskbar.diff)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-06-24T20:15:31.957

[wxPython 的创建者 Robin Dunn 的这篇文章](http://groups.google.com/group/wxpython-mac/browse_thread/thread/6e50401523c38903?pli=1)解释说 wxPython 还不支持 mac 上的菜单栏图标。他们只支持 Dock。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T09:53:42.403

从 wxPython 2.9.2.0 开始`wx.TaskBarIcon`，现在将在 OSX 上创建一个菜单栏图标，只要您调用`SetIcon`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T18:29:44.750

wiki.wxpython.org 上有一个示例，它将一个图标放在 macOS 菜单栏的“状态菜单”部分（右侧）（忽略页面标题）： [https ://wiki.wxpython.org/Custom %20Mac%20OsX%20Dock%20Bar%20Icon](https://wiki.wxpython.org/Custom%20Mac%20OsX%20Dock%20Bar%20Icon)

它适用于运行 python 2.7.14（使用 miniconda 安装）和 wxpython 3.0.0.0 osx-cocoa（经典）的 macOS High Sierra（10.13.3）。

同样，它适用于 python 3.6.4 和 wxpython 4.0.1 osx-cocoa (phoenix)；需要小的代码更改：

*   你必须导入 wx.adv
*   wx.TaskBarIcon 变成 wx.adv.TaskBarIcon
*   wx.IconFromBitmap 变成 wx.Icon

这也会在其他平台上生成状态/通知/任务栏类型的图标。

# installation - 如何确定 Windows Installer 正在执行升级而不是首次安装？

> ID：145900
> 
> 赞同：4
> 
> 时间：2008-09-28T14:05:28.963
> 
> 标签：installation, windows-installer

我有一个安装程序，如果它退出，它会升级以前版本的应用程序。当安装为升级模式时，我想跳过某些操作。如何确定安装是在升级模式还是首次安装模式下运行？

我正在使用 Wise Installer，但我认为这并不重要。我假设 Windows Installer 具有在安装程序处于升级模式时设置的属性。我似乎无法找到它。如果该属性存在，我假设我可以在条件语句中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T15:15:36.893

您能否详细说明您使用哪种工具来创建此安装程序？

我使用 Windows Installer XML( [WIX](http://wix.sourceforge.net/) )。在 WIX 中，您可以执行以下操作：

```
 <!-- Property definitions -->
  <?define SkuName = "MyCoolApp"?>
  <?define ProductName="My Cool Application"?>
  <?define Manufacturer="Acme Inc."?>
  <?define Copyright="Copyright © Acme Inc. All rights reserved."?>
  <?define ProductVersion="1.1.0.0"?>
  <?define RTMProductVersion="1.0.0.0" ?>
  <?define UpgradeCode="{EF9D543D-9BDA-47F9-A6B4-D1845A2EBD49}"?>
  <?define ProductCode="{27EA5747-9CE3-3F83-96C3-B2F5212CD1A6}"?>
  <?define Language="1033"?>
  <?define CodePage="1252"?>
  <?define InstallerVersion="200"?> 
```

并定义升级选项：

```
<Upgrade Id="$(var.UpgradeCode)">
      <UpgradeVersion Minimum="$(var.ProductVersion)"
              IncludeMinimum="no"
              OnlyDetect="yes"
              Language="$(var.Language)"
              Property="NEWPRODUCTFOUND" />

      <UpgradeVersion Minimum="$(var.RTMProductVersion)"
              IncludeMinimum="yes"
              Maximum="$(var.ProductVersion)"
              IgnoreRemoveFailure="no"
              IncludeMaximum="no"
              Language="$(var.Language)"
              Property="OLDIEFOUND" />

</Upgrade> 
```

然后，您可以进一步使用`OLDIEFOUND`和`NEWPRODUCTFOUND`属性，具体取决于您想要做什么：

```
<!-- Define custom actions -->
<CustomAction   Id="ActivateProduct" 
            Directory='MyCoolAppFolder' 
            ExeCommand='"[MyCoolAppFolder]activateme.exe"' 
            Return='asyncNoWait' 
        Execute='deferred'/>

<CustomAction   Id="NoUpgrade4U" 
            Error="A newer version of MyCoolApp is already installed."/> 
```

上述定义的动作必须在`InstallExcecuteSequence`

```
<InstallExecuteSequence>
    <Custom Action="NoUpgrade4U" 
        After="FindRelatedProducts">NEWPRODUCTFOUND</Custom>
    <Custom Action="ActivateProduct" 
        OnExit='success'>NOT OLDIEFOUND</Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-29T01:56:11.393

如果产品是在每台机器上安装或为当前用户安装，则有一个名为[Installed的 MSI 属性。](http://msdn.microsoft.com/en-us/library/aa369297(VS.85).aspx)您可以在条件布尔语句中使用它。

您还可以检查这些其他 MSI 安装状态[属性](http://msdn.microsoft.com/en-us/library/aa370905(VS.85).aspx#installation_status_properties)，以防其中一个效果更好。我从未使用过 Wise，但我认为有一种方法可以检索这些属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-28T14:41:20.610

我不确定我是否理解你的问题。
如果您自己编写安装脚本，那么在 Windows 上，最好的方法是检查此类程序通常创建的注册表项。与安装目录（和开始菜单条目等）不同，它是一个不变量。这些键之一甚至可以是软件的版本号，以检查用户是否尝试安装旧版本（或了解是否必须删除某些文件等）。

# eclipse - eclipse最好的小字体是什么？

> ID：145904
> 
> 赞同：14
> 
> 时间：2008-09-28T14:06:12.613
> 
> 标签：eclipse, font-size

默认的 Courier New 10pt 比我需要的大。但是，在 8pt 处使用该字体看起来不是很好。

是否有更好的选择来为 Eclipse 提供更易读、非常小的（例如 8pt）字体？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-28T14:08:45.837

如果在 Windows 上运行，您可以试一试 Microsoft Consolas（包含在 Vista 或更高版本中，可单独下载）。我到处都用它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-28T15:15:55.800

**我是Bitstream Vera Sans Mono**的忠实粉丝，我在 9pt 使用它。

它在这里可用：http: [//ftp.gnome.org/pub/GNOME/sources/ttf-bitstream-vera/1.10/](http://ftp.gnome.org/pub/GNOME/sources/ttf-bitstream-vera/1.10/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-28T14:08:40.733

第一次上谷歌：

[等宽/固定宽度程序员的字体](http://www.lowing.org/fonts/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-28T14:45:19.023

我绝对支持在 Windows 上使用 Consolas 字体的建议。在 Windows 上，我喜欢它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T21:55:38.100

我刚试过 Dina vs Consolas。没有 ClearType 的 Dina 在 8 号上看起来更好，但是当我在 24" 1920x1200 TFT 上激活 ClearType 时，Consolas 真的很棒，而且在 8 号上它消耗的空间比 Dina 少得多，即屏幕上可以容纳更多的编辑器内容。因为我还在Win XP上，我不得不[单独下载Consolas](http://www.microsoft.com/en-us/download/details.aspx?id=17879)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-29T01:03:07.930

Dina Programming 字体。 [http://www.donationcoder.com/Software/Jibz/Dina/](http://www.donationcoder.com/Software/Jibz/Dina/)

专为小尺寸设计，区分大写 Oh 和零，以及大写 I、小写 l 和数字 1。

都是固定间隔的。

这太棒了，我将它用于我所有与编程相关的应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T14:10:23.367

查看[Monospace/Fixed Width Programmer's Fonts](http://www.lowing.org/fonts/)。它解决了在编程中使用字体的许多重要方面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-29T11:18:54.627

我一直在使用 Proggy 字体。它们非常适合编码，而且非常紧凑。

[https://proggyfonts.net/download/](https://proggyfonts.net/download/)

# java - 如何在 Java 中查看堆中的内容？

> ID：145922
> 
> 赞同：18
> 
> 时间：2008-09-28T14:15:21.373
> 
> 标签：java, out-of-memory

我已经设法在我正在开发的 java 应用程序中获得内存“泄漏”。运行我的 JUnit 测试套件时，我随机出现内存不足异常 (java.lang.OutOfMemoryError)。

我可以使用什么工具来检查我的 java 应用程序的堆，以查看我的所有堆都用完了什么，这样我就可以弄清楚是什么保留了对应该能够被垃圾收集的对象的引用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-28T14:30:28.827

VisualVM 包含在最新版本的 Java 中。您可以使用它来创建堆转储，并查看其中的对象。

或者，您也可以使用 jmap（在您的 jdk/bin 目录中）创建 heapdump commandine：

```
jmap -dump:format=b,file=heap.bin <pid> 
```

您甚至可以使用它来获取所有对象的快速直方图

```
jmap -histo <pid> 
```

我可以推荐 Eclipse Memory Analyzer ( [http://eclipse.org/mat](http://eclipse.org/mat) ) 来进行堆转储的高级分析。它可以让您准确找出某个对象或一组对象存在的原因。这是一个博客条目，向您展示 Memory Analyzer 可以做什么： http: [//dev.eclipse.org/blogs/memoryanalyzer/2008/05/27/automated-heap-dump-analysis-finding-memory-leaks-with-one-点击/](http://dev.eclipse.org/blogs/memoryanalyzer/2008/05/27/automated-heap-dump-analysis-finding-memory-leaks-with-one-click/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-28T14:22:00.267

如果你需要一些免费的东西，试试[VisualVM](https://visualvm.github.io/)

从项目的描述：

> VisualVM 是一个集成了命令行 JDK 工具和轻量级分析功能的可视化工具。专为开发和生产时间使用而设计。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-05T21:08:53.423

这是一个相当古老的问题。自从最初回答以来，很多人可能已经开始使用 IntelliJ。IntelliJ 有一个可以显示内存使用情况的插件，称为[JVM Debugger Memory View](https://blog.jetbrains.com/idea/2016/08/jvm-debugger-memory-view-for-intellij-idea/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T08:14:39.310

使用[Eclipse 内存分析器](http://www.eclipse.org/mat/)

在分析堆转储时，我不知道有任何其他工具可以接近它的功能、性能和价格（免费和开源）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T14:17:51.413

使用像[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)或[YourKitProfiler这样的分析器](http://www.yourkit.com/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-28T14:18:51.023

JProfiler 对我来说工作得很好....

[http://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T14:16:33.070

如果您使用的是支持 GTK 的系统，您可以尝试使用[JMP](http://www.khelekore.org/jmp/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-29T23:34:56.230

您可以尝试使用 JRockit Mission Control 工具套件中的 Memory Leak Detector。它允许您在 JVM 运行时检查堆。您不需要一直拍摄快照。您可以在线连接到 JVM，然后查看堆在垃圾收集之间的变化。您还可以检查对象、以图形方式跟踪引用并从应用程序当前分配对象的位置获取堆栈跟踪。下面是一个简单的[介绍](http://blogs.oracle.com/hirt/2008/08/unorthodox_uses_of_the_memory.html)。

该工具可免费用于开发，您可以[在此处](http://www.oracle.com/technology/products/jrockit/missioncontrol/index.html)下载。

# visual-studio-2008 - 安装 Visual Studio 时要做的第一件事是什么？

> ID：145951
> 
> 赞同：29
> 
> 时间：2008-09-28T14:37:28.950
> 
> 标签：visual-studio-2008

安装 Visual Studio 时要做的第一件事是什么？我说的是任何定制方面的事情（所以我们不会得到基于“我创建一个新项目”的答案）。

你有最喜欢的字体吗？

你有一个必须有的扩展，你不可能没有？

你有你喜欢设置的键盘快捷键吗？

我很想知道你的最爱。

对我来说，我只是将字体改为 Calibri，我发现它更容易阅读，而且我可以在屏幕上容纳更多的文字。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-09-28T14:49:08.330

安装[Consolas](http://www.microsoft.com/downloads/details.aspx?familyid=22e69ae4-7e40-4807-8a86-b3d36fab68d3&displaylang=en)字体。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-09-28T14:45:34.233

我安装了[ReSharper](http://www.jetbrains.com/resharper/)（由 JetBrains 出售），因为它添加了许多我使用 Java IDE 变得依赖的 IDE 行为/功能。

我让其他人做的第一件事是打开所有文件类型的行号，因为如果你不知道你正在查看哪一行代码，就不可能与某人配对。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-09-28T15:40:24.353

启用行号

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2008-09-28T18:32:19.477

*   安装控制台
*   安装 Resharper
*   安装 TestDriven .Net
*   设置为在启动时显示空环境。
*   将最大最近文件列表设置为 24（最大）。
*   设置为 Visual Studio Dark 主题
*   设置项目默认路径。
*   设置病毒扫描程序以忽略我的项目目录

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-09-28T17:38:09.983

安装最新的服务包。修复的错误数量和它解决的不兼容性令人惊讶。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-09-28T14:44:23.957

安装[ViEmu](http://www.viemu.com/)。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-09-28T16:13:23.103

安装[视觉辅助](http://www.wholetomato.com/)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-11-27T16:52:30.210

关闭选项中的“动画环境工具”

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2008-09-28T14:44:32.817

毫无疑问：

*   **开启行号**
*   更改着色方案
*   导入设置
*   重新排序最常用的选项卡 - 自动隐藏和位置设置

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-28T17:38:40.387

安装

1.  [CodeRush/重构专业版](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)
2.  [VisualSVN 插件](http://www.visualsvn.com)
3.  设置一个宏，以便我可以右键单击网站文件夹并“使用 VisualStudio 打开”

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-09-28T16:29:32.660

安装[zenburn](http://www.codinghorror.com/blog/archives/000682.html)配色方案

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-28T14:38:57.713

我关闭了拖放文本编辑，因为它太容易意外地做到了。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-28T14:40:05.073

我还加载了我最喜欢的宏文件并将最常用的功能分配给键盘快捷键。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-28T14:42:48.547

切换到黑色背景上的亮文本

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-28T14:45:48.493

我将字体更改为 Consolas，并将背景更改为浅灰色（#FAFAFA）。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-03-07T21:43:03.433

将 /nosplash 添加到快捷方式以使其启动更快。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-11-27T16:36:50.197

Visual Studio 选项：

*   开启行号
*   打开“将制表符转换为空格”
*   开启“启动时加载上次保存的项目”
*   进入全屏模式（shift-alt-enter）

加载项：

*   安装 JetBrains [Resharper](http://www.jetbrains.com/resharper/download/)
*   安装[Slickedit Gadgets](http://www.slickedit.com/content/view/441)并打开线和缩进指南）
*   安装[Consolas](http://www.microsoft.com/downloads/details.aspx?familyid=22e69ae4-7e40-4807-8a86-b3d36fab68d3&displaylang=en)字体

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-28T14:40:10.550

将 vim 配置为外部编辑器，因此我可以通过 vim 上的宏和 vs 上的所有其他内容编写无聊的东西

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-28T14:44:30.790

安装 ViEmu。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-28T15:35:12.790

将字体更改为 Consolas 打开行号。设置为始终使用空格进行缩进。安装 VIEmu

我喜欢将设置文件保存在源代码管理中的想法。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-28T16:24:01.377

按住 Alt 键将我实际使用的工具栏按钮拖到菜单栏上，然后关闭所有工具栏。这是为了整理并恢复垂直空间，以便我可以一次看到更多代码。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-28T16:30:34.153

安装 Visual Assist 和 ViEmu。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-28T18:25:06.530

安装一个名为 VS.Php 的插件，这样我就可以使用 VS 开发和调试 PHP

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-02-24T00:02:40.330

搜索 feacp.dll，将其重命名为其他名称，然后安装 Visual Assist X。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2009-12-21T16:17:33.687

*   安装 SP1
*   安装团队资源管理器
*   打开行号
*   将解决方案资源管理器移动到屏幕右侧
*   打开源代码管理资源管理器并添加到屏幕左侧的选项卡
*   禁用起始页

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-03-07T21:26:49.510

Service Pack 和 VisualSVN 和 SlickEdit 工具。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-03-07T21:44:55.020

键入 Ctrl+D 和 ">alias ff Edit.FindinFiles" 以便下次我想在所有文件中搜索 $term 时执行 Ctrl+D ">ff $term"。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-10-01T15:27:29.087

1.  启用 80 列标记（需要在旧版本的 VS 中修改[注册表）](http://www.sowbug.org/mt/2004/11/vertical-column-marker-in-visu.html)
2.  将字体设置为 Lucida Console
3.  使用制表符进行缩进并将制表符宽度设置为 4
4.  启用行号

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-28T14:38:58.353

将字体更改为 FixedSys 和配色方案以适合我通常的风格。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-09-28T14:41:47.363

我打开一个项目和一些源文件。这样我就可以看到在开始工作之前我必须调整的大部分默认设置。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-09-28T14:47:38.753

*   安装 Consola 的
*   打开行号
*   安装 Paste as HTML Plugin 以导出代码片段。
*   上网无情地嘲笑 Eclipse 用户 ;-)

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2008-09-28T14:48:00.500

*   隐藏顶部所有那些花哨的按钮。
*   在源代码编辑器中启用行号
*   将解决方案资源管理器移动到屏幕右侧。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2008-09-28T14:52:42.983

安装 Resharper :)

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2008-09-28T17:19:40.807

我安装了“充满活力的墨水”主题的端口。[这里](http://blog.wekeroad.com/2007/10/17/textmate-theme-for-visual-studio-take-2/)

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2008-09-30T21:10:12.047

Re-order toolbars and windows, turn on line numbering, install Mole add-on, add custom snippets.

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2008-10-01T13:24:02.923

1) 将字体设置为 Tahoma（单行间距字体 - 呸！）。

2) CodeRush / Resharper

...对于 Web 项目，VS2008 '以管理员身份运行'，因为我更喜欢在 IIS 下运行 wep 应用程序

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2009-03-20T15:58:48.300

将键盘映射设置为 VC6 模式。我从不喜欢新的键盘快捷键:)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2008-09-28T14:52:58.850

导入我的设置文件（我保存在源代码管理中并在我的计算机之间共享）。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2008-09-28T14:53:34.263

*   在源代码编辑器中启用行号
*   安装 ReSharper
*   安装 GhostDoc
*   将配色方案更改为明暗，并将字体更改为 Consolas
*   隐藏导航下拉菜单，因为使用 R# 导航要快得多

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2008-09-28T14:54:06.757

添加到 Seb Nilsson：

*   将字体更改为**ProFont**，大小为 10
*   关闭动画以及任何不能提高生产力的花哨的东西
*   隐藏可以使用键盘快捷键访问的工具栏按钮。因此，要将所有工具栏保留在 1 行中
*   安装**ReSharper** -> 必须有

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2008-09-28T16:06:24.773

添加/安装我最喜欢的**代码片段**

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2008-09-28T18:52:12.877

**[在 Visual Studio 中设置键绑定以使用 Emacs。](http://msdn.microsoft.com/en-us/library/ms165509(VS.80).aspx)**

1.  工具 -> 选项 -> 环境 -> 键盘
2.  在“应用以下附加键盘映射方案：”下选择“Emacs”选项

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2008-09-28T16:23:57.820

*   将字体设置为 Lucida Console
*   切换到“文件”菜单的 MRU 区域的最大值为 24 的多个文档
*   取消停靠“属性”窗口并将其滑到我的第二台显示器上
*   关闭开始页面

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2008-09-28T18:22:36.490

1.  将键盘映射更改为 VC6（我必须在环境之间交换）
2.  将所有语言的选项卡设置更改为 3/插入空格（选项卡是恶​​魔生成的）
3.  更改为区分 0 和 O 的等宽字体（例如 Consolas）
4.  将错误列表、工具箱属性和输出窗口移动到另一个监视器*

*我希望 VS2008 能更了解多显示器。我希望它有多个顶级框架，所以我可以在每个框架内安排窗格，然后在监视器 1 上最大化一个框架，在监视器 2 上最大化另一个框架。当前的实现是错误的......次优.

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2009-03-06T04:46:43.760

安装[RockScroll](http://www.hanselman.com/blog/IntroducingRockScroll.aspx) ... 因为它很摇滚 ;-)

它提供了您打开的代码文件的图形摘要：

![](https://www.hanselman.com/blog/content/binary/WindowsLiveWriter/IntroducingRockScroll_C29C/RockScroll_5.png)

（图片来自 Scott Hanselman 的博客）。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2008-10-08T10:45:31.907

安装团队资源管理器。

紧随其后的是 reshaper

并打开行号

动画转

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2008-10-08T10:48:07.767

第一次准备 Visual Studio 时去抽根烟。

多亏了这一点，我在戒烟时遇到了真正的问题。

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2009-11-20T07:08:14.913

*   将所有这些调色板窗口移动到其他屏幕。
*   更改启动操作以显示空环境。
*   为所有内容启用行号*！*

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2009-02-23T23:56:17.847

*   安装视觉辅助
*   绑定 CTRL + ; 到 Edit.LineEnd

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2010-07-16T01:39:34.930

尝试编译我的项目，看看它们在 vanilla VS 上的表现如何。

如果我决定分享我的代码，它会给我一些保证。

* * *

## 回答 #51

> 赞同：-1
> 
> 时间：2008-09-28T16:03:46.323

确保我选择了“Visual C#”设置预设，打开行号，打开智能选项卡并将选项卡大小设置为 4。

# sql - Sql设计问题-多个部分中的项目

> ID：145969
> 
> 赞同：0
> 
> 时间：2008-09-28T14:43:34.677
> 
> 标签：sql, database-design

我有一个sections 表和一个items 表。

问题是每个项目可能位于一个或多个部分中，因此每个项目的简单“section_id”将不起作用，并且 sql 没有办法存储我可以说“section_ids 中的 WHERE 5”的数组。 ..

我考虑过将 id 列表存储为逗号分隔的字符串，问题是我看不到任何方法来检查项目是否在 sql 查询的给定部分中。我在这里看到的唯一选项是选择整个表，并在 php.ini 中解析字符串。不用说，有 1000 件物品，这不是一个好主意。

有没有更好的方法来“链接”具有多个部分的项目，并且能够轻松选择给定部分 ID 的所有项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T14:49:45.847

您需要一个中间查找表：

```
CREATE TABLE item_in_section (item_id int, section_id int) 
```

（我猜你的密钥类型，使用任何合适的）。

要在部分中查找项目：

```
SELECT item.* from item, item_in_section WHERE item_in_section.item_id = item.item_id AND item_in_section.section_id = X GROUP BY item_id 
```

查找项目所属的部分

```
SELECT section.* from section, item_in_section WHERE item_in_section.section_id = section.section_id AND item_in_section.item_id = Y GROUP BY section_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T14:47:35.353

为了表示多对多关系，您需要一个带有 SectionId 和 ItemId 的支持表。两者都应该是各自表的外键，并且该表的主键应该是两列。

来自[维基百科](http://en.wikipedia.org/wiki/Many-to-many_(data_model))：

> 由于大多数 DBMS 仅支持一对多关系，因此有必要通过第三个联结表物理实现这种关系，例如 AB 具有两个一对多关系 A -> AB 和 B -> AB。在这种情况下，AB 的逻辑主键由两个外键（即 A 和 B 的主键的副本）形成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T14:46:11.190

您需要第三个表 itemsPerSection，其主键由 itemid 和 sectionid 组成，这样您就可以建立 N 对 N 关系并且非常容易搜索。

所以：

```
Items   -   ItemsPerSection   -   Secion
itemid  <->   itemid
             sectionid        <->   sectionid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T14:47:03.827

您需要第三个表，称为联结表，它提供 N 到 N 关系以及指向父表的 2 个外键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T14:48:45.460

我知道的方式（但我不是一个经验丰富的数据库设计师！），我在几个数据库中看到，是有第三个表：它有两列，一列是 section 表的 ID，一列是 section 表的 ID。项目表。
它无需太多成本就可以在这些条目之间创建关系，如果您从两个 ID 中创建复合索引，则可以进行快速搜索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T14:49:53.693

你说的是多对多的关系。以规范化的形式，最好用第三个表处理：

```
items
sections
itemsections 
```

itemsections 中的每一行都有一个 item id 和一个 section id。对于正常的一对多关系，这不是必需的，但这是您正在查看的标准做法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T14:51:09.667

您需要在两者之间放置一个交集表，即描述哪些项目在哪些部分中的表。

就像是..

```
CREATE TABLE item_sections (
  ID datatype
  ITEM_ID datatype,
  SECTION_ID datatype); 
```

然后，您需要加入表以获取数据...

```
SELECT items.*
FROM   items, item_sections
WHERE  items.id = item_sections.item_id
and    item_sections.section_id = the-id-of the-section-you-want 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-28T14:51:09.713

您需要将部分关系存储在第二个表中。这是一个非常简单的例子：

```
CREATE TABLE foos (
    id              INTEGER,
    name            VARCHAR
)

CREATE TABLE foo_sections (
    foo_id              INTEGER,
    section_name        VARCHAR,
)

-- Add some 'foos'
INSERT INTO foos (1, 'Something');
INSERT INTO foos (2, 'Something Else');

-- Add some sections for each 'foo'
INSERT INTO foo_sections (1, 'Section One');
INSERT INTO foo_sections (1, 'Section Two');
INSERT INTO foo_sections (2, 'Section One');

-- To get all the section names for a specific 'foo' record:
SELECT section_name FROM foo_sections WHERE foo_id = 1
> Section One
> Section Two 
```

当然，在第二个表中，您可以存储对第三个“部分”表的引用，但为了清楚起见，我将其排除在外。

祝你好运 ：）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-28T14:51:26.980

您可以在一个字段中存储多个 ID，用逗号分隔，然后使用 FIND_IN_SET 命令：

```
SELECT * FROM items WHERE FIND_IN_SET(5, section_id); 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

# java - 如何在 Java 中设置 LookAndFeel 文件？

> ID：145972
> 
> 赞同：4
> 
> 时间：2008-09-28T14:43:52.570
> 
> 标签：java, swing, qt, gtk, look-and-feel

我需要在 JDK 1.6 中设置 LookAndFeel 文件。我有两个文件：

1.  餐巾纸-swingset2.jar

2.  餐巾纸.jar

我该如何设置和使用它？

我想要 GTK 外观或 Qt 外观，它们可用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T14:48:47.533

本页解释了 Look&Feels 的工作原理：http: [//java.sun.com/docs/books/tutorial/uiswing/lookandfeel/plaf.html](http://java.sun.com/docs/books/tutorial/uiswing/lookandfeel/plaf.html)

您可以在命令行中执行此操作：

```
java -Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel MyApp 
```

或在代码中：

```
UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel"); 
```

您需要确保包含外观和感觉的 jar 在应用程序类路径中。这如何工作取决于应用程序。一种典型的方法是将它放在 lib 文件夹中。

JDK 中默认可用的 Look&Feels 有：

```
com.sun.java.swing.plaf.gtk.GTKLookAndFeel
com.sun.java.swing.plaf.motif.MotifLookAndFeel
com.sun.java.swing.plaf.windows.WindowsLookAndFeel 
```

引用上面的链接：

> GTK+ L&F 只能在安装了 GTK+ 2.2 或更高版本的 UNIX 或 Linux 系统上运行，而 Windows L&F 只能在 Windows 系统上运行。与 Java（金属）L&F 一样，Motif L&F 可以在任何平台上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-28T16:36:18.167

Naplin 的类名是`net.sourceforge.napkinlaf.NapkinLookAndFeel`. 因此，要在命令行上将其设置为默认值，请使用：

```
java -Dswing.defaultlaf=net.sourceforge.napkinlaf.NapkinLookAndFeel
```

要安装它，请添加`napkinlaf.jar`方向`lib/ext`和线条：

```
swing.installedlafs=餐巾
swing.installedlaf.napkin.name=餐巾
swing.installedlaf.napkin.class=net.sourceforge.napkinlaf.NapkinLookAndFeel
```

在`lib/swing.properties`您的 Java 安装中（您可能必须创建该文件）。

请参阅[餐巾 wiki 页面](http://wiki.java.net/bin/view/Projects/NapkinLAF)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-10-01T04:53:07.613

Qt 的外观和感觉可以从[Trolltech](http://trolltech.com/)作为产品 Jambi 获得，它是 Qt for Java。******