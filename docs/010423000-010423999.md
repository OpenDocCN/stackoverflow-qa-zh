# StackOverflow 问答 10423000-10423999

# c++ - 启动一个程序，该程序将选择一个特定的 Ubuntu iso 并从中启动

> ID：10423005
> 
> 赞同：0
> 
> 时间：2012-05-02T23:10:27.317
> 
> 标签：c++, c, assembly, boot

我想创建一个程序，将其加载到外部硬盘驱动器上，以便计算机可以从中启动。这个程序的基础是列出一些 Ubuntu LiveCD。然后，用户将选择一个 LiveCD，然后我将启动所选的 LiveCD。

我想知道的是如何启动 ac 或 c++ 程序来列出（可能来自文本文件）可用的不同版本。我知道如何在 C++ 中做到这一点（很简单）。但是，我不知道如何启动该程序。我可以使用什么样的汇编代码来启动这样的程序？

我可以阅读有关此主题的任何书籍或教程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:14:26.617

你所问的非常困难。您在问如何编写[引导加载程序](http://en.wikipedia.org/wiki/Booting#Boot_loader)，这是一件非常复杂的事情。您将需要处理视频输出、鼠标/键盘、USB 驱动程序、安装磁盘等 - 实际上您正在编写一个迷你操作系统。

有关提示/示例，请查看[GRUB](http://www.gnu.org/software/grub/)。

* * *

您可能会“作弊”并使用现有的引导加载程序来加载一个微型 linux 内核，您可以从中使用 C 来引导 ISO，但这仍然是非常困难的事情。我建议寻找替代方案。

# android - 在android中从dp转换为px

> ID：10423008
> 
> 赞同：0
> 
> 时间：2012-05-02T23:10:38.650
> 
> 标签：android, screen, resolution

我在 Android 文档中找到了这个：

> dp 单位到屏幕像素的转换很简单：`px = dp * (dpi / 160)`

但我不明白它是什么`dpi`以及它是如何计算的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:40:02.027

dpi 代表每英寸点数。在android中，它用于表示手机的屏幕密度。

Android 智能手机支持 4 种 dpi

1.  低密度 (120), ldpi
2.  中等密度 (160), mdpi
3.  高密度 (240)、hdpi
4.  超高密度（320），xhdpi

您可以从[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)结构中获取有关显示的信息：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

有关屏幕尺寸的更多信息，请访问[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:35:04.847

`dpi`代表每英寸点数，是任何屏幕的物理特征。

`xdpi`您可以通过检查类的和`ydpi`字段来访问 x 和 y dpi 值`DisplayMetrics`。要`DisplayMetrics`使用类似以下内容...

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);
float x = metrics.xdpi; // Retrieve the x dpi value
float y = metrics.ydpi; // Retrieve the y dpi value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T09:33:40.047

也许玩 DP 计算器会说明这是如何工作的。在我看来，[这个漂亮的转换器最好地展示了它。](http://pixplicity.com/dp-px-converter/)

它说明了像素尺寸如何在不同密度的屏幕之间显示为不同的*物理尺寸。*例如，48px 将在两倍 DPI 的屏幕上显示一半大。

Android 已知有多种 DPI bin：

*   低密度像素，120 dpi
*   mdpi, 160 dpi
*   电视分辨率，213 dpi
*   高清，240 dpi
*   xhdpi, 320 dpi
*   xxhdpi，480 dpi
*   xxxhdpi, 640 dpi

基线 DPI 为 160 (mdpi)，其中 1dp = 1px。在该值的两倍处，320 (xhdpi)，1dp = 2px。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:49:43.850

请通过这篇文章，我想你会得到你的答案:)

[Android上的“px”、“dp”、“dip”和“sp”有什么区别？](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

# c# - 比较从文件中读取的字符串时出现 NullReferenceException？

> ID：10423015
> 
> 赞同：0
> 
> 时间：2012-05-02T23:11:25.870
> 
> 标签：c#, file-io, streamreader

我有一个以“a a”作为用户名和密码的clients.txt 文件。如果我没记错的话，这应该从中读取并告诉我它们是否存在于文件中。

编辑：在clients.txt文件的第二行我有“b b”作为用户名和密码，它们工作正常。

图片在这里：（新用户不能发布图片）

```
 StreamReader sr = new StreamReader("clients.txt");
    int findIndex = -1;
    string userpass = "#";
    while (findIndex == -1 && sr.ReadLine() != null)
    {
        findIndex = userpass.IndexOf(txtUserName.Text + " " + txtPassword.Password);
        userpass = sr.ReadLine();
    }
    sr.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:21:04.433

您的 while() 语句正在吞噬行。您需要在正文中移动 ReadLine() 调用：

```
 while (findIndex == -1) {
        userpass = sr.ReadLine();
        if (userpass == null) break;
        findIndex = userpass.IndexOf(txtUserName.Text + " " + txtPassword.Password);
    } 
```

不要将密码以明文形式放在文本文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T23:16:07.617

您在 while 语句中对 sr.Readline 的调用将读取（并忽略）文本文件的第一行，因此在第二次调用 sr.ReadLine 之后，被比较的第一行将是文本文件的第二行。

您需要重构您的代码，以便始终捕获来自对 sr.ReadLine 的调用的响应。

# c# - 对象序列化 - 从 C# 或 java 到 Objective C

> ID：10423016
> 
> 赞同：4
> 
> 时间：2012-05-02T23:11:41.327
> 
> 标签：c#, java, objective-c, serialization

服务器端 - C# 或 java

客户端目标 C

我需要一种在 C#\java 中序列化对象并在 Objective C 中反序列化它的方法。我是 Objective C 的新手，我想知道在哪里可以获得有关此问题的信息。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:31:14.320

除了显而易见的 JSON/XML 解决方案之外，[protobuf](http://code.google.com/p/protobuf/)也可能很有趣。它有 Java//c++/python 后端，第 3 方也为 C# 和 Objective-c 创建了后端（虽然从未使用过那个）。

主要优点是解析速度更快[1]，更小[2]，因为它是一种二进制格式，而且版本控制从一开始就是一个重要因素。

[1] google 声称是 XML 的 20-100 倍

[2] 3-10次同源

另一种类似于 protobufs 的技术是[Apache Thrift](http://wiki.apache.org/thrift/)。

> Apache Thrift 是一个用于可扩展的跨语言服务开发的软件框架。Apache Thrift 允许您在一个简单的定义文件中定义数据类型和服务接口。将该文件作为输入，编译器生成代码，用于轻松构建跨编程语言无缝通信的 RPC 客户端和服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:17:55.877

JSON 用于相对直接的对象图 XML/REST 用于更复杂的对象图（数组/集合/嵌套数组等之间的区别）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:22:14.163

在 iOS 上，有几个带有 Objective-C API 的 JSON 框架和库：

*   [JSONKit](https://github.com/johnezang/JSONKit/)
*   [SBJson](http://stig.github.com/json-framework/)
*   [TouchJson](https://github.com/TouchCode/TouchJSON)

可能是最突出的。

**JSONKit**快速简单，但只能解析 JSON 文本的连续部分。这意味着，您需要将下载的数据保存到临时文件中，或者您需要将所有下载的 JSON 文本保存到 NSMutableData 对象（保存在内存中）。只有在完全下载 JSON 文本后，您才能开始解析。

**SBJson**使用起来更灵活。它提供了一个额外的“SAX 风格”接口，可以解析部分输入，并且每个“输入”可以解析多个 JSON 文档（例如每个网络连接多个 JSON 文档）。当您想要连接到“流式 API”（例如 Twitter 流式 API）时，这非常方便，每个连接可以到达许多 JSON 文档。缺点是，它比 JSONKit 慢得多。

**TouchJson**甚至比 SBJson 还要慢一些。

不过，我个人的偏好是其他的。它比 JSONKit 快（在 arm 上快 20%），具有额外的 SAX 样式 API，可以处理“流式 API”，可以同时下载和解析，可以处理非常大的 JSON 字符串而不会严重影响内存占用，同时它是特别容易与 NSURLConnection 一起使用。（嗯，我可能有偏见，因为我是作者）。

你可以看看**JPJson** (Apache License v2)：

[JPJson](https://github.com/couchdeveloper/JPJson) - 不过它仍处于测试阶段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:59:12.317

**JSON**可能是最好的选择，因为：

*   使用简单
*   它是人类可读的
*   它是基于数据的，而不是依赖于任何更复杂的对象模型
*   您将能够找到适合大多数语言的导入/导出库。

恕我直言，从可移植性的角度来看，序列化更复杂的对象并不是一个好主意，因为通常一种语言/平台没有有效的方法来表达另一种语言/平台的概念。例如，一旦您开始声明序列化对象的“类型”或“类”，您就会遇到语言之间不同对象模型的棘手问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T01:48:02.707

[苏兹克](http://sudzc.com/)。我正在使用它。从 i-os 应用程序调用 Web 服务非常容易。

您不必编写代码来序列化对象。

# html - CSS 代码在 style="" 中有效，如果在外部 css 文件中则失败

> ID：10423024
> 
> 赞同：-3
> 
> 时间：2012-05-02T23:13:19.237
> 
> 标签：html, css

我有一些这种格式的html：

```
<ul id="foo">
    <li class="bar"><a href="#">Reports</a>
      <span>
        <a href="#" class="fooLink">First Report</a>
        <a href="#" class="fooLink">Second Report</a>
     </span>
  </li>
</ul> 
```

本质上，我希望菜单中的“报告”链接在单击时展开，并在其下方显示链接，填充到一侧，因此它看起来像这样：

```
Reports
   First report
   Second report 
```

这是我的 CSS 代码：

```
.fooLink
{
    padding-left: 20%; 
    padding-top: 0px;
    display:block;
} 
```

但是，这不起作用。如果我检查 firebug 中的链接，我会看到该`display:block;`行被阻塞。但是，如果我这样做：

```
<a href="#" 
   style="padding-left:20%; padding-top:0px; display:block;">Second Report</a> 
```

然后它可以按我的意愿工作。如果我把它放在 css 类中，为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:17:16.277

检查您的其他 CSS 声明中是否存在冲突样式，并密切注意[Specificity](http://www.w3.org/TR/css3-selectors/#specificity)。Firebug 应该为您提供实际应用的 CSS，以及它的来源。

[http://jsfiddle.net/PEbRQ/](http://jsfiddle.net/PEbRQ/)

似乎可以工作（尽管它是一个嵌入式 CSS 块，而不是外部文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:33:31.077

正如@Kirean 所提到的，由于特殊性，通过属性 always* 应用 CSS`style`胜过通过样式表提供的样式。

这意味着当您将 CSS 移动到外部样式表时，它必须与其他定义的样式竞争。

您可以使您的样式选择器比其他定义更具体，但您必须知道您要与什么竞争。

`.fooLink`比更具体`a`

`a.fooLink`比更具体`.fooLink`

`span a.fooLink`仍然更具体，等等，等等

根据 W3C 规范，如果`.fooLink`选择`.foo .fooLink`器适用于相同的元素。`.foo a``#foo *`

现在，需要注意的是（正如上面的星号所暗示的），您可以使用`!important`. `!important`胜过其他定义的样式属性。如果有多个`!important`声明，则根据标准特异性规则对其进行解析。

因此，最好的解决方案是使您的样式尽可能具体，并编辑其他可能相互冲突的样式。

但是，如果其他定义超出您的控制范围（站点范围的 CSS 样式表或类似的东西），请使用`!important`：

```
.fooLink
{
    padding-left: 20%; 
    padding-top: 0px;
    display:block !important;
} 
```

# r - RScript 用自己的值创建世界地图

> ID：10423025
> 
> 赞同：2
> 
> 时间：2012-05-02T23:13:25.807
> 
> 标签：r

我希望能够为充满国家的手绘制我自己的价值观。例如：**中国、美国、英国、加拿大和俄罗斯**。

我有自己的 txt 文件，它有 3 列 - ISO3V10、国家和文档编号。

```
ISO3V10 Country              No of Documents
CAN     Canada               30
CHN     China                20
RUS     Russia               10
GBR     United Kingdom       38
USA     United States        50 
```

我们的想法是为 绘制世界地图，`Country`并且绘制的数据是`No of Documents`。

到目前为止，我已经这样做了：

```
myData2 <- read.delim("noofdocuments.txt",header=T, sep='\t')
names(myData2)
myData2[]

jessdata <- data.frame(myData2=c("China", "United States", "United Kingdom", 
                                 "Russia", "Canada"))
sPDF <- joinCountryData2Map(jessdata, 
                            joinCode = "NAME", 
                            nameJoinColumn = "myData2")
par(mai=c(0,0,0.2,0),xaxs="i",yaxs="i")
mapCountryData(sPDF, nameColumnToPlot="REGION") 
```

理想情况下，我希望 sPDF 是：

```
sPDF <- joinCountryData2Map(countryExData, 
                            joinCode = "ISO3", nameJoinColumn = "ISO3V10") 
```

也为 REGION 是：

```
mapCountryData(sPDF, nameColumnToPlot="No.of.Documents") 
```

我已经尝试了所有可能的方法来做到这一点，这就是为什么我将 REGION 作为 nameColumnToPlot，因为这是我可以让它工作的唯一方法。

有人能告诉我代码哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:43:11.360

如果以下代码对您有用，那么您的文本文件的格式或将其读入 R 的方式可能存在问题。

```
library(rworldmap)

countryExData<-read.table(text="
ISO3V10\tCountry\tNo of Documents
CAN\tCanada\t30
CHN\tChina\t20
RUS\tRussia\t10
GBR\tUnited Kingdom\t38
USA\tUnited States\t50"
,sep="\t",header=TRUE)

# > countryExData
#   ISO3V10        Country No.of.Documents
# 1     CAN         Canada              30
# 2     CHN          China              20
# 3     RUS         Russia              10
# 4     GBR United Kingdom              38
# 5     USA  United States              50

sPDF <- joinCountryData2Map(countryExData, 
                            joinCode = "ISO3", nameJoinColumn = "ISO3V10")
# 5 codes from your data successfully matched countries in the map
# 0 codes from your data failed to match with a country code in the map
# 241 codes from the map weren't represented in your data

par(mai=c(0,0,0.2,0),xaxs="i",yaxs="i")
mapCountryData(sPDF, nameColumnToPlot="No.of.Documents") 
```

![带有文档数量的世界地图](../Images/c8df3a012babb8a15b7b80213ef5e405.png)

如果这有效，您应该检查您的`countryExData`对象（或者`myData2`？从您的帖子中不清楚）它与上述对象之间的差异。如果您没有发现任何问题，请`dput(head(countryExData))`在您的原始帖子中发布结果。

# javascript - 如何在正确的表格行中显示删除消息？

> ID：10423028
> 
> 赞同：0
> 
> 时间：2012-05-02T23:13:41.130
> 
> 标签：javascript, jquery

下面是一个函数，它控制文件在其自己的表行中完成上传后发生的任何事情。每个表行都包含一个文件输入，用户可以在其中上传文件，然后将文件名附加到它自己的表行中。

如果上传成功，则会显示一条成功消息，如果上传不成功，则会显示一条消息，说明存在错误。但是我在该功能中还有另一个功能，用户可以通过单击“删除”按钮来删除文件。我唯一的问题是这行代码：

```
 $(".imagemsg" + counter).html(data); 
```

假设我有 2 个表行，我在第一行删除了一个文件，.imagemsg 中的消息应该只显示在第一行，因为那是删除发生的行，它不应该在第一排和第二排。

另一个例子是，如果我有 4 个表行并且我删除了第三行中的文件，那么该消息应该显示在第三行，因为那是发生删除的地方。

所以我的问题是我需要添加什么， `$(".imagemsg" + counter).html(data);`以便消息仅显示在删除文件的行中，而不是`.imagemsg`每一行中的所有内容？

以下是完整代码：

```
function stopImageUpload(success, imagefilename){

      var result = '';
      var counter = 0;
      counter++;

      if (success == 1){
         result = '<span class="imagemsg'+counter+'">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

         var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $(".imagemsg" + counter).html(data);
       });

       $(this).parent().remove();

    });

      return true;   
} 
```

以下是 HTML 代码：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "</p><p class='listImage' align='left'></p>" +
    "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:31:15.730

我相信你的计数器变量将永远是 1。所以，你的`span.imagemsg1`都是一样的。这就是为什么您会在每一行中收到消息。在函数外设置计数器以递增计数器。

我相信这将阻止您所看到的行为，但我想对其他答案大声疾呼，因为他们为清理此代码提供了很好的建议。

坦率地说，你永远不应该在类中使用唯一标识符。为什么不使用 id 或 data-image-count 属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:33:08.220

在您的 html 代码中，您需要添加一个唯一标识符，我建议使用 id。这样，当您尝试引用要添加错误消息的元素时，它只会找到一个元素。目前它正在寻找 class = "imagemsg" 的元素的第一次出现。您需要一种方法来遍历每个“行”并制作 id 的“imagemgs1”、“imagemsg2”等......希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:18:43.343

能够看到 HTML 会很有帮助。此外，我无法在您的脚本中看到您对“结果”值做了什么。在这个阶段，我个人认为没有足够的信息可以让你满意。

但是，您无疑会看到一个问题是您的“计数器”变量。也许这是你的问题——如果没有我上面要求的细节，很难说。您的 jQuery.ajax 调用将在某个时候完成，但“counter”的值可能与您调用 jQuery.ajax() 方法时的值不同。这是因为“计数器”变量是在不同的范围内声明的。

例如看下面的代码。它有点证明了您对计数器变量的问题。看起来在 5 秒结束时它会吐出 1 到 10 的数字，但不会。它将吐出值“10”十次。

```
var x = 0;
for (var i = 0; i < 10; i++)
{
  x++;
  setTimeout(function() { console.log(x); }, 5000);
} 
```

此问题也适用于您的代码。您可以通过将变量值复制到本地范围的变量来解决上述问题。例如：

```
var x = 0;
for (var i = 0; i < 10; i++)
{
  var newScope = function() {
    x++;
    var y = x;
    setTimeout(function() { console.log(y); }, 5000);
  }();
} 
```

# ajax - 带有wordpress的阿贾克斯

> ID：10423030
> 
> 赞同：1
> 
> 时间：2012-05-02T23:13:53.593
> 
> 标签：ajax, wordpress

我正在做一个 ajax 调用来运行一个文件：

```
var data = 'index=exp' + index;
var go_url = get_bloginfo('template_url') + '/form/exp.php';
$.ajax({
   url: go_url, 
   type: "GET",     
   data: data,      
   cache: false
}); 
```

文件“exp.php”在 mysql 数据库中插入了一个新行并且它可以工作..但是使用 ajax 调用没有任何反应。好像他没有打开链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-10T05:13:32.853

我认为您应该为 wordpress 中的函数添加“add_action”，例如

`function yourfunction(){ ... } add_action('wp_ajax_your_function', 'yourfunction'); add_action('wp_ajax_nopriv_your_function', 'yourfunction');`

在你的jQuery中你可以调用'your_function'而不是php文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:17:11.297

ajax被调用了吗？

尝试将其放入准备好的文档中。

```
$(document).ready(function() {
    // put all your jQuery goodness in here.
}); 
```

# android - Android invalidate(Rect) 使整个区域无效

> ID：10423035
> 
> 赞同：2
> 
> 时间：2012-05-02T23:14:30.443
> 
> 标签：android, graphics, invalidation

我不明白为什么 invalidate(Rect) 会使整个区域无效。该区域分为 5 个部分，每个部分都绘制了一个折线图。每个部分包含 100 分。当数据到达时间 tn 到 tn+100 时，我调用 invalidate(new Rect(left, top, right bottom)) ，其中 top 是屏幕顶部的高度（但数值低于底部）。这会调用 onDraw() 方法。绘制从 tn 到 tn+100 的区域，但擦除区域 tn-100 到 tn 中先前绘制的段。它永远这样继续下去。每个无效仅绘制正确的区域（因为这是我拥有的唯一数据），但所有先前绘制的数据都被删除。所以我得到了一个游行部分！

换句话说，如果我调用 invalidate() 或 invalidate(Rect)，我会得到相同的行为。

我假设 Rect() 的参数是像素，并且正在根据正在绘制它的 AlertDialog 窗口的高度和宽度获取值。

希望最终减少“Rect()”的区域，这样我就可以模拟实时绘图，并且只使时间步 t 无效到 t+1 而不是区域。

我一定是在做一些愚蠢的事情。

我希望它在 AlertDialog 中完成的事实不是问题。

这部分是为了帮助“android 开发者”帮助像我这样的菜鸟做对。首先是事件序列：
1\. 在回调中通过蓝牙接收数据
2\. 如果是正确类型的数据，则向主活动（UI 线程）中的 BroadcastReceiver 发出信号，并从那里调用一个设置参数的例程WaveFormView 扩展 View 类，然后调用 ShowDialog(id) 调用主活动中的 onCreateDialog(id) 回调。
3\. 然后我调用 invalidate()。
4\. 弹出对话框，然后绘制图形。
5\. 所有后续对 ShowDialog(id) 的调用都会绕过 onCreateDialog(id)

这可行，但无论参数如何，整个区域始终无效。这里也没有用户事件。从您的示例中，我能想到的最好的方法是在 onShow() 中放置 invalidate 而不是在 showDialog(id) 之后调用自己

```
@Override
protected Dialog onCreateDialog(int id)
{
    Log.d(TAG, "Alert Dialog 'onCreateDialog' method has been called with id " + id);
    Builder bldr = new AlertDialog.Builder(this);
    AlertDialog alert = bldr.setView(waveForm).setNegativeButton("Dismiss " + id, 
            new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int id)
                {
                    dialog.cancel();
                } 
            }).create();
    // I tried adding this and invalidating here worked only first pass
    alert.setOnShowListener(
                    new DialogInterface.OnShowListener()
                    {
                        @Override
                        public void onShow(DialogInterface dialog)
                        {
                            // call to invalidate
                            waveForm.drawArea();
                        }
                    });

    //alert.getWindow().setLayout(alert.getWindow().getAttributes().width, alert.getWindow().getAttributes().height / 2);
    alert.getWindow().setLayout(waveForm.getCurrentWidth(), waveForm.getCurrentHeight());

    return alert;
} 
```

但是 onShow() 不会被调用。

调用 showDialog 的主要活动中的方法是

```
private void displayRtsa(int[] rtsaReceived)
{
    // rtsaReceived[0] has the agentsink hash code
    int agent = rtsaReceived[0];
    // rtsaReceived[1] has the index of the RtsaData object updated
    int index = rtsaReceived[1];
    TreeMap<Integer, RtsaData[]> agentRtsa = BluetoothPanService.getAgentRtsaMap();
    RtsaData[] rtsaDataValues = agentRtsa.get(agent);

    int dialogId = 0;
    synchronized(dialogIds)
    {
        int i = 0;
        if(dialogIds.containsKey(agent + index) == false)
        {
            for(i = 0; i < dialogIds.size(); i++)
            {
                if(dialogIds.containsValue(i) == false)
                {
                    break;
                }
            }
            dialogIds.put(agent + index, i);
        }
        dialogId = dialogIds.get(agent + index);
    }
    final int id = dialogId;
    Log.d(TAG, "Dialog id being shown = " + dialogId);
    waveForm.setPeriod(rtsaDataValues[index].getPeriod());
    waveForm.setMaxMin(rtsaDataValues[index].getMinValue(), rtsaDataValues[index].getMaxValue());
    waveForm.setColor(Color.argb(255, 255, 200, 0));
    waveForm.setData(rtsaDataValues[index].getData());
    waveForm.setTitle(rtsaDataValues[index].getType());
    showDialog(id);
    // invalidate
    // waveForm.drawArea(); (try to do in onCreateDialog callback)
} 
```

这可能是一个完全错误的方法。可能openGl是唯一的方法。

顺便说一句，谢谢你忍受我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:39:17.650

我认为这取决于您究竟对什么进行了失效。如果您调用失效的视图没有处理矩形失效，则发生默认失效。

无论如何，如果你想改变行为，你可以自己改变。对于“onDraw”方法，使用下面的代码来获取无效的矩形：

```
public class InvalidateTestActivity extends Activity
{
    static class CustomView extends ImageView

    {

        public CustomView(Context context)
        {
            super(context);
        }

        @Override
        protected void onDraw(Canvas canvas)
        {
            final Rect r = canvas.getClipBounds();
            Log.d("DEBUG", "rectangle of invalidation:" + r);
            super.onDraw(canvas);
        }

    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        CustomView customView = new CustomView(this);
        customView.setLayoutParams(new FrameLayout.LayoutParams(200, 200));
        customView.setBackgroundColor(0xffff0000);
        customView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v)
            {
                v.invalidate(new Rect(0, 0, 49, 49));
            }
        });
        setContentView(customView);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T19:51:51.973

如果您启用了硬件加速，它看起来只会使整个视图无效......

视图组：

```
public final void invalidateChild(View child, final Rect dirty) {
    final AttachInfo attachInfo = mAttachInfo;
    if (attachInfo != null && attachInfo.mHardwareAccelerated) {
        // HW accelerated fast path
        onDescendantInvalidated(child, child);
        return;
    } 
```

# c++ - 如何将字符串传递给函数？

> ID：10423042
> 
> 赞同：-1
> 
> 时间：2012-05-02T23:15:18.683
> 
> 标签：c++

我正在尝试使用重载函数来获取字符串。

```
void get(char prompt[], int size,const std::string b = "")
{
    std::cout << prompt << ": ";  
    std::cin.get(b, size);  
    std::cin.ignore(10, '\n');  
} 
```

现在我只是根据本网站上另一位海报的建议将最后一个参数从字符数组更改为字符串，所以我有点迷茫。我在“。”处收到错误消息。在cin和get之间。我也试过 cin.getline （我不知道是否有区别或它是什么）

> 错误消息：无法将参数 1 从 'const std::string' 转换为 'char *'

这个错误还有很多其他的东西，但我认为这是重要的一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:19:22.880

我通过建议一种替代方法来间接回答您的问题。这是我的实现，以及如何使用它的示例。

```
#include <string>
#include <iostream>
#include <ostream>

std::string get(std::string const& prompt)
{
  std::string ret;
  std::cout << prompt << ": ";
  getline(std::cin, ret);
  return ret;
}

int main()
{
  std::cout << get("Please enter your answer") << std::endl;

  // or
  std::string prompt("Enter your answer");
  std::string response = get(prompt);
  std::cout << response << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:20:04.430

处理字符串时，您需要使用字符串头中的自由函数 getline，而不是 iostream 中的成员函数 getline。所以它会`std::getline(std::cin, b);`。

话虽这么说`getline`，但不会接受 a`const string`作为其参数，原因很简单，即调用的全部`getline`目的是写入字符串。另请注意，除非您进行`b`（非常量）引用，否则您在方法`b`内部执行的任何更改`get`都不会在方法外部可见，因为如果您按值传递字符串，则会复制字符串。

`istream::get(char*, streamsize)`和之间的区别在于`istream::getline(char*, streamsize)`后者丢弃换行符（就像`getline`字符串的方法一样），而前者没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:10:59.823

[http://www.cplusplus.com/reference/iostream/istream/get/](http://www.cplusplus.com/reference/iostream/istream/get/)

[http://www.cplusplus.com/reference/iostream/istream/ignore/](http://www.cplusplus.com/reference/iostream/istream/ignore/)

您对 get() 的调用与任何现有的 istream 方法都不匹配。如果它有效，它最终可能会递归？

```
#include <string>

namespace std {
    //I am attempting to use an overloaded function to get a string.
    class Ciostream : public iostream {
        public:
        void get(char prompt[], int size,const std::string b = "")
        {
            cout << prompt << ": ";
            cin.get(b, size);
            cin.ignore(10, '\n');
        }

    };
}
//1.cpp:11:28: error: no matching function for call to 'std::basic_istream<char>::get(const string&, int&)' 
```

# haml - 流星与haml

> ID：10423046
> 
> 赞同：12
> 
> 时间：2012-05-02T23:15:52.137
> 
> 标签：haml, meteor

Meteor 是否支持haml？

如果需要创建一个包，推荐使用什么库？

haml和车把一起玩好吗？

我想编写 haml，它将被处理成流星演示中显示的 html 样式（带把手）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T15:27:03.287

我为 9elements haml-coffee 创建了一个智能包。

你可以在这里克隆我的流星叉：[https](https://github.com/huetsch/meteor/tree/devel) ://github.com/huetsch/meteor/tree/devel 。

我还创建了一个位于此处的拉取请求：[https](https://github.com/meteor/meteor/pull/138) ://github.com/meteor/meteor/pull/138 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T22:45:32.150

Meteor 目前没有用于 haml 的智能包。Haml 和车把应该可以很好地协同工作，就像咖啡脚本一样，haml 是经过预处理的，meteor 只会看到生成的 html。

关于流星智能包的文档在这里：[http ://docs.meteor.com/#smartpackages](http://docs.meteor.com/#smartpackages)

但正如它所说，api 正在迅速变化并且没有记录，所以你最好的选择是查看现有的包并从那里开始。这是咖啡脚本的：[https ://github.com/meteor/meteor/tree/master/packages/coffeescript](https://github.com/meteor/meteor/tree/master/packages/coffeescript)

# jquery - Jquery 关闭子子菜单

> ID：10423047
> 
> 赞同：0
> 
> 时间：2012-05-02T23:15:56.847
> 
> 标签：jquery, menu, submenu

好的，当我将鼠标悬停在“Link 3”上时，它会打开子子菜单（ex_subnav），但是当我将“Link 3”鼠标移到子菜单中的其他选项时，我还需要关闭 ex_subnav 菜单。使用当前代码它可以工作，但是当我将鼠标从“链接 3”移动到 ex_subnav 菜单时，它会重新加载它，因为`$(".ex_dropdown").mouseleave(function(){`

```
<script type="text/javascript">
    $(document).ready(function(){
        $("ul.topnav li a").mouseenter(function() {
            $(this).parent().find("ul.subnav").slideDown('fast').show();
        });  

        $(".dropdown").mouseleave(function(){ 
            $(this).parent().find("ul.subnav").slideUp('fast');
        });

        $(".ex_level").mouseenter(function() {
            $(this).parent().find("ul.ex_subnav").stop(true, true).slideDown('slow').show();
        });

        $(".ex_dropdown").mouseleave(function(){ 
            $(this).parent().find("ul.ex_subnav").stop(true, true).slideUp('slow');
        });
    }); 
```

HTML：

```
<ul class="topnav">  
    <li><a href="#">Home</a></li>  
    <li class="dropdown">  
        <a href="#">About Us</a>  
        <ul class="subnav dropdown">  
            <li><a href="#">Sub Nav Link 1</a></li>  
            <li><a href="#">Sub Nav Link 2</a></li>
            <li><a class="ex_level ex_dropdown" href="#">Link 3</a>
                <ul class="ex_subnav ex_dropdown">
                    <li><a href="#">One</a></li>  
                    <li><a href="#">Two</a></li>
                    <li><a href="#">Three</a></li>
                    <li><a href="#">Four</a></li>
                </ul>  
            </li>    
        </ul>
    </li>  
</ul>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:44:47.443

它正在重新加载，因为

`$(".ex_dropdown").mouseleave()`<-这适用于

```
<a class="ex_level ex_dropdown" href="#"> 
```

这意味着如果您保留“a”标签，则`mouseleave()`功能有效。

如果要为子菜单布局设置 mouseleave() 函数，只需更改此行，

```
<li><a class="ex_level ex_dropdown" href="#">Link 3</a> 
```

像这样在你的html中，

```
<li class="ex_level ex_dropdown"><a href="#">Link 3</a> 
```

这将解决您的问题。

[无样式演示](http://jsfiddle.net/cDDZr/2/)

# excel - 从 LEFT 函数创建链接

> ID：10423048
> 
> 赞同：1
> 
> 时间：2012-05-02T23:16:07.143
> 
> 标签：excel

我正在尝试在 Excel 2010 中创建动态链接。下面我创建了一个函数，该函数为我提供了父文件夹工作簿以供参考。当我尝试将 ' 添加到 LEFT 关键字时，excel 不接受它。我要做的是在父文件夹中参考工作簿，并希望确保在移动父文件夹时所有文件都保持链接。

我的问题是如何从下面的 LEFT 函数创建一个链接。谢谢

```
=LEFT(CELL("filename"),LARGE((MID(CELL("filename"),ROW(1:255),1)="\")*IFERROR(SEARCH("\",CELL("filename"),ROW(1:255)),0),2)) & CONCATENATE("[Book1.xlsx]Sheet1'!$A$1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:25:05.553

This should work, assuming your left formula is correct (not tested):

```
=INDIRECT("'["& LEFT(CELL("filename"),LARGE((MID(CELL("filename"),ROW(1:255),1)="\")*IFERROR(SEARCH(" \",CELL("filename"),ROW(1:255)),0),2))&"Book1.xlsx]Sheet1'!$A$1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:34:10.343

要创建指向文件的链接，您需要输入完整路径并直接引用到公式中（INDIRECT 不起作用）。在活动单元格中放置指向父文件夹的链接的一种方法是使用此 VBA 命令：

```
activecell = "='" & activeworkbook.path & "\..\[Book1.xlsx]Sheet1'!$A$1" 
```

路径是相对于工作簿存储的，如对上一个链接问题的响应中所述。也可以使用 udf 从已关闭的工作簿中检索值，例如：

```
Function Eval(Text As String)
Set xl = CreateObject("excel.application")
eval = xl.ExecuteExcel4Macro(Application.ConvertFormula(Text, xlA1, xlR1C1, True))
Set xl = Nothing
End Function 
```

或者通过下载 Laurent Longre 的 Morefunc.xll 免费加载项，该加载项具有 INDIRECT.EXT 功能（但请注意，这些方法效率较低，并且不会创建链接，因此在移动文件夹时不会更新）。

# ruby - 未定义的方法，MIDI

> ID：10423050
> 
> 赞同：0
> 
> 时间：2012-05-02T23:16:11.430
> 
> 标签：ruby, macos, methods, midi, ruby-1.9

我一直在使用《实用红宝石宝石》一书。它给了我下面的代码，我写在：

```
require 'dl/import'
class LiveMIDI
ON = 0x90
OFF = 0x80
PC = 0xC0
  def initialize
    open
  end
  def noteon(channel, note, velocity=64)
    message(ON | channel, note, velocity)
  end
  def noteoff(channel, note, velocity=64)
    message(OFF | channel, note, velocity)
  end
  def programchange(channel, preset)
    message(PC | channel, preset)
  end
  module C
    extend DL::Importer
    dlload '/System/Library/Frameworks/CoreMIDI.framework/Versions/Current/CoreMIDI'
    extern "int MIDIClientCreate(void *, void *, void *, void *)"
    extern "int MIDIClientDispose(void *)"
    extern "int MIDIGetNumberOfDestinations()"
    extern "void * MIDIGetDestination(int)"
    extern "int MIDIOutputPortCreate(void *, void *, void *)"
    extern "void * MIDIPacketListInit(void *)"
    extern "void * MIDIPacketListAdd(void *, int, void *, int, int, int, void *)"
    extern "int MIDISend(void *, void *, void *)"
  end
  module CF
    extend DL::Importer
    dlload '/System/Library/Frameworks/CoreFoundation.framework/Versions/Current/CoreFoundation'
    extern "void * CFStringCreateWithCString (void *, char *, int)"
  end
  def open
    client_name = CF.CFStringCreateWithCString(nil, "RubyMIDI", 0)
    @client = DL::PtrData.new(nil)
    C.mIDIClientCreate(client_name, nil, nil, @client.ref);

    port_name = CF.cFStringCreateWithCString(nil, "Output", 0)
    @outport = DL::PtrData.new(nil)
    C.mIDIOutputPortCreate(@client, port_name, @outport.ref);

    num = C.mIDIGetNumberOfDestinations()
    raise NoMIDIDestinations if num < 1
    @destination = C.mIDIGetDestination(0)
  end

  def close
    C.mIDIClientDispose(@client)
  end

  def message(*args)
    format = "C" * args.size
    bytes = args.pack(format).to_ptr
    packet_list = DL.malloc(256)
    packet_ptr  = C.mIDIPacketListInit(packet_list)
    # Pass in two 32 bit 0s for the 64 bit time
    packet_ptr  = C.mIDIPacketListAdd(packet_list, 256, packet_ptr, 0, 0, args.size, bytes)
    C.mIDISend(@outport, @destination, packet_list)
  end
end 
```

当我尝试运行它时，我收到以下错误，我不明白，我以前从未使用过 DL。：

```
livemidi.rb:36:in `open': undefined method `cFStringCreateWithCString' for LiveMIDI::CF:Module (NoMethodError)
    from livemidi.rb:7:in `initialize'
    from livemidi.rb:63:in `new'
    from livemidi.rb:63:in `<main>' 
```

为什么是这样？？？我在 Mac OS X 上使用 Ruby 1.9.3 你能帮我修复这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:00:29.780

如果您搜索 Apple 开发人员文档，您会发现一个名为[`CFStringCreateWithCString`](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Reference/CFStringRef/Reference/reference.html). 的方法签名与`CFStringCreateWithCString`您定义的不同。正确的方法定义是。

```
CFStringRef CFStringCreateWithCString (
   CFAllocatorRef alloc,
   const char *cStr,
   CFStringEncoding encoding
); 
```

这意味着你应该改变。

```
extern "void * CFStringCreateWithCString (void *, char *, int)" 
```

到。

```
extern "CFStringRef CFStringCreateWithCString(CFAllocatorRef, const char*, CFStringEncoding)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:08:42.443

您的问题似乎是您正在调用`cFStringCreateWithCString`，但是调用了该函数`CFStringCreateWithCString`-大写很重要。

# javascript - Javascript：使用参数对函数进行原型设计以提高性能

> ID：10423051
> 
> 赞同：3
> 
> 时间：2012-05-02T23:16:13.730
> 
> 标签：javascript, optimization, prototype

在 John Resig 关于[Javascript 中的简单“类”实例化](http://ejohn.org/blog/simple-class-instantiation/)的帖子中，他指出：

“...如果您有一个希望人们与之交互的经常访问的函数（返回一个对象），那么将对象属性放在原型链中并实例化它对您有利。这里是，在代码中:"

```
// Very fast
function User(){}
User.prototype = { /* Lots of properties ... */ };
// Very slow
function User(){
    return { /* Lots of properties */ };
} 
```

我想将此应用于如下函数（恰好位于“类”声明中）

```
//...
this.get_subscription = function(args)
{
    return {
        property_one: "value",
        property_two: {
            sub_prop: args.something
        }
    }
} 
```

但不知道将参数放在哪里。如果我做

```
this.get_subscription = function(args) {}
this.get_subscription.prototype = {
    property_one: "value"
    //...
} 
```

它会说 args 是未定义的。我已经尝试了几种变体，但都不起作用。我应该如何正确地做到这一点，而不是将 args 放在父类的范围内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:32:48.937

您似乎误解了`prototype`. 原型包含对象的所有实例应该通用的方法和字段。因此，如果`property_two`是基于`args`传递给构造函数的，那么它**就不**属于原型！

毕竟，在这段代码中

```
this.get_subscription = function(args) {}
this.get_subscription.prototype = {
    property_one: "value"
    //...
} 
```

首先，`get_subscription`创建函数，然后将其原型设置为对象字面量。在调用构造函数之前是没有`args`的，所以`args`在原型中做一些事情是没有意义的。

所以，你常用的 javascript 对象应该看起来像这个例子 - 一个 2D 点类。

```
function Point(x, y) {
    /*  In constructor:
     *  initialize fields that are related to the constructor parameters
     *  and are different for different instances
     */
    this.x = x;
    this.y = y;
}

// in prototype, define fields that are  common to all instances
Point.prototype.RED = '#FF0000';

/*  in prototype, also define the methods; as they can use the "this" keyword,
 *  they can reference their own instance, so you don't have to include them
 *  in each instance manually
 */

Point.prototype.toString = function() { return '[' + this.x + ', ' + this.y + ']'; }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:34:31.417

是的，这就是“一切到原型”理念的缺点：您无权访问构造函数参数——它们只能*在*函数体内使用（除非您将它们放入那里的公共属性中）。所有需要用到它们的东西*都不*属于原型；您只会在原型上填写“默认属性”（通常是所有实例通用的方法）。

我认为你在这里无论如何都不需要那个。该模式仅对真正的构造函数有用，您在这里似乎没有（我会期望`this.Subscription`）。此外，承诺的“性能提升”可以忽略不计。

如果你真的想在这里使用它，它会是：

```
function Class() {
   this.Subscription = function(args) {
       this.propertyTwo = {
           subprop: args.something
       };
   };
   this.Subscription.prototype = {
       property_one: "value",
       property_two: {}
   };
}
// a method callable without the "new" operator:
Class.prototype.get_subscription = function(args) {
     return new this.Subscription(args);
} 
```

用法：

```
var object = new Class();
var sub = new object.Subscription();
var sub2 = new object.Subscription();
// the promised boost is less memory usage for:
sub.propertyOne === object.Subscription.prototype.propertyOne === sub2.propertyOne; 
```

还要注意[Crockford 的原型继承 -](https://stackoverflow.com/q/10131052/1048572)当您尝试在`propertyTwo`-Object(s) 上设置/更改/删除属性时，嵌套对象的问题。

# android - 搜索特定的 Play 商店类别

> ID：10423061
> 
> 赞同：4
> 
> 时间：2012-05-02T23:17:42.963
> 
> 标签：android, uri, google-play

我用它`URI`来搜索**Play Store**，但[Android 文档](http://developer.android.com/guide/publishing/publishing.html#PerformingSearch)没有提到搜索特定类别（如游戏、音乐或书籍）的方法。

```
URI marketUri = Uri.parse("market://search?q= "); 
```

**Play Books**和**Play Music**应用程序都将 Play Store 应用程序打开到**正确**的类别，所以如果它们可以打开到特定的类别，那么我想我可以搜索一个。有没有人有一些关于这样做的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T04:52:19.670

我找到了解决方案。这是我用来购买**音乐**类别的当前方法。

```
public static void shopFor(Context context, String artistName) {
    String str = "https://market.android.com/search?q=%s&c=music&featured=MUSIC_STORE_SEARCH";
    Intent shopIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(String.format(str, Uri.encode(artistName))));
    shopIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    shopIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
    context.startActivity(shopIntent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:32:24.773

我在 play.google.com 的图书类别中进行了搜索，URL 如下所示：

[https://play.google.com/store/search?q=android&c=books](https://play.google.com/store/search?q=android&c=books)

尝试在查询后添加“&c=books”，看看会发生什么。

# integer - gnuplot：只有轴 x 上的整数值

> ID：10423067
> 
> 赞同：6
> 
> 时间：2012-05-02T23:18:55.367
> 
> 标签：integer, gnuplot, granularity

如何在轴 x 上仅可视化整数值？

我绘制这样的文件中描述的函数

```
0   0.5
1   0.25
2   0.125
3   0.0625
4   0 
```

使用这些命令：

```
set xrange [0:4]
plot "./data_file" using 1:2 with line lw 2 
```

问题是，通过这样做，我在轴 x 上可视化值 0；0.5; 1个；1.5; 2；2.5；3；3.5；4 如何仅可视化整数值 0；1个；2；3；4？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T23:35:20.363

```
help set

help set xtics

set xtics 1 
```

正如 mgilson 在评论中指出的那样，`set xtics`使用单个参数定义 x 轴的增量。

# .net - 数据透视缓存类型不匹配错误 VB.NET Excel

> ID：10423071
> 
> 赞同：1
> 
> 时间：2012-05-02T23:19:16.133
> 
> 标签：.net, vb.net, excel, pivot-table

请参阅底部编辑了解我目前所处的位置，谢谢。

我创建了一个数据透视表，当数据透视缓存定义为：

```
 Dim ptCache As Excel.PivotCache = mainHighway.PivotCaches.Add(SourceType:=Excel.XlPivotTableSourceType.xlDatabase, SourceData:=mainHighwayData.Range("a1:v7500")) 
```

我的问题是行数每天都在变化，所以我找出工作表中的行数，然后在我的数据透视缓存中使用它：

```
Dim highlRow As Integer
highlRow = mainHighwayData.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Row
Dim ptCache As Excel.PivotCache = mainHighway.PivotCaches.Add(SourceType:=Excel.XlPivotTableSourceType.xlDatabase, SourceData:=mainHighwayData.Range("a1:V" & highlRow)) 
```

从历史上看，这个解决方案对我来说效果很好，但是当我在这里这样做时，我得到：

```
Type mismatch. (Exception from HRESULT: 0x80020005 (DISP_E_TYPEMISMATCH)) 
```

我一直在摆弄它，发现如果我这样做：

```
highlRow = 7000
Dim ptCache As Excel.PivotCache = mainHighway.PivotCaches.Add(SourceType:=Excel.XlPivotTableSourceType.xlDatabase, SourceData:=mainHighwayData.Range("a1:V" & highlRow)) 
```

它工作正常，所以我想知道如何使用 specialcells 命令定义 highlRow 并将其存储为整数有什么问题。我觉得这里有某种类型或铸造问题，但我无法解决。我试过了：

```
highlRow = CType(mainHighwayData.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Row, Integer) 
```

这也不好。也许我找到最后一行的方法在这里不适用？无论如何，我已经花了很长时间修补它，此时我只是在转动我的轮子。如果您有任何想法，将不胜感激。

一如既往地谢谢你。

编辑：我也试过：

```
UsedRange.Rows.Count 
```

这在历史上一直有效，但也无法运行。在这一点上，我很好奇为什么枢轴缓存似乎特别有这个问题。

@charles 有一个好主意，可以尝试其他方法来获取最后一个单元格。我试过了：

```
highlRow = mainHighwayData.Range("A65535").End(XlDirection.xlUp).Row 
```

我让它给出正确的行，但它仍然抛出类型不匹配错误。

```
highlRow = mainHighwayData.Cells.Find("*", SearchOrder:=Excel.XlSearchOrder.xlByRows, SearchDirection:=XlSearchDirection.xlPrevious).Row 
```

这将返回最后一行的正确数字，但再次引发相同的类型不匹配错误。

编辑：我发现了另一点信息，但我不确定如何处理它。如果数据透视表中的值 <= 65536，则数据透视表可以正常工作，但是第二次我将范围增加到 65537，我得到了一直困扰我的类型不匹配。对于所有 >= 65537 的数字都是如此。我知道 65535 左右曾经是 excel 中的最后一行，但现在已经不是这样了。此外，当我在 excel 中手动创建数据透视表时，我没有遇到任何问题，并且它包含所有数据。我使用的是 int 或 long，所以它不应该是溢出或任何东西。有人对为什么 VB.NET 不允许我根据超过 65537 行的数据制作数据透视表有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:45:44.910

好吧，这有点像一场噩梦，但我找到了一个有效的修复方法。我注意到 vba 中的人也有同样的麻烦，他们正在切换到 r1c1 表示法，但我也无法让它工作，但我找到了这篇[文章](https://stackoverflow.com/questions/8450450/type-mismatch-error-when-creating-a-pivot-table-in-excel-with-vba)，最后对答案的评论有解决方案。

```
highlRow = mainHighwayData.Range("A500000").End(XlDirection.xlUp).Row
Dim rng As Excel.Range
rng = mainHighwayData.Range("A1:Q" & highlRow)
mainHighway.Names.Add(Name:="Range1", RefersTo:=rng)
Dim ptCache As Excel.PivotCache = mainHighway.PivotCaches.Add(SourceType:=Excel.XlPivotTableSourceType.xlDatabase, SourceData:="Range1") 
```

因此，您创建了一个命名范围，然后引用它。我想这个想法是你需要从简单的范围对象中抽象出来，这将允许你制作你的数据透视表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T13:29:29.617

以这种方式解决了这个问题：

```
Excel.Worksheet oSheet = oBook.Worksheets.get_Item(sourceSheet);

Excel.Range oRange = oSheet.UsedRange;

oBook.Names.Add(Name: "Range1", RefersTo: oRange);

Excel.PivotCache oPivotCache = oBook.PivotCaches().Add(SourceType: Excel.XlPivotTableSourceType.xlDatabase, SourceData: "Range1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:26:20.730

SpecialCells(XlCellType.xlCellTypeLastCell) 为您提供最后使用的单元格。Used 包括任何类型的格式，因此最后一个单元格可能不包含任何有效数据，因此可能导致 pivotCache 创建失败。
尝试一种更强大的方法来查找包含数据的最后一个单元格
您可以尝试 LastRow = Range("A65535").end(xlup).row
或 LastRow = Cells.Find("*",SearchOrder:=xlByRows,SearchDirection:=xlPrevious ）。排

# vb.net - 模拟应用程序中的按钮单击 (VB.NET)

> ID：10423079
> 
> 赞同：8
> 
> 时间：2012-05-02T23:20:22.527
> 
> 标签：vb.net

再会，

在我的应用程序`Private Sub btnSendSMS_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSendMessage.Click`中，我的程序中有。

当收到短信时，我想在我的另一个子（短信接收检测器）中模拟上面的按钮点击。

我该怎么做呢？我知道这不是最好的做事方式，只是为了学习。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-02T23:30:48.027

You can call the [`Button.PerformClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.performclick.aspx#Y0) method:

```
btnSendSMS.PerformClick() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T23:25:03.383

You can call the function directly.

```
btnSendSMS_Click(Me, EventArgs.Empty) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T05:19:37.993

为什么不将代码放在单独的方法中

```
Private Sub SendSMS()
    ' do your thing
End Sub 
```

并在您的按钮事件处理程序中，调用该方法。

```
Private Sub btnSendSMS_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSendMessage.Click
    Call SendSMS()
End Sub 
```

现在，您可以`SendSMS()`在课堂上的任何地方打电话，而不必做一些时髦的事情，比如模拟按钮点击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T23:37:37.700

或者如果在 WPF 中使用 VB：

```
Dim peer As New ButtonAutomationPeer(btnSendSMS)
Dim invokeProv As IInvokeProvider = TryCast(peer.GetPattern(PatternInterface.Invoke), IInvokeProvider)
invokeProv.Invoke() 
```

# unix - 关于套接字编程的逻辑地址和物理地址

> ID：10423082
> 
> 赞同：0
> 
> 时间：2012-05-02T23:20:47.580
> 
> 标签：unix, networking, operating-system

谁能帮助我逻辑地址和物理地址模型如何工作（从网络/套接字的角度）？为什么需要有两种不同类型的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:31:48.867

不同的网络使用不同的物理地址，例如 IEEE 802 MAC 地址使用 48 位地址。

为了连接不同的网络并且仍然能够寻址单个机器，他们必须克服这些不同模式的问题，因此他们创建了 IP（IPv4 和后来的 IPv6）地址。

因此，当您将 IP 数据包从一台机器发送到另一台机器时，它可以通过各种网络传输，每个网络都使用自己的寻址模式发送数据包。

# jquery - 如何在 jQuery 中动态创建和填充文本字段？

> ID：10423085
> 
> 赞同：3
> 
> 时间：2012-05-02T23:21:09.423
> 
> 标签：jquery

这是一个我认为很常见的问题（或设计模式？），所以我希望这篇文章可以帮助其他有类似问题的人......

我有一种很常见的情况，即复杂的表单需要动态地允许用户编辑取决于用户做出的其他选择的数据。我使用 Ajax、jQuery 和 PHP 和 postgres 作为后端数据库。

我已经弄清楚了如何使用 jQuery Ajax 技术根据用户选择的两个值返回单个记录的数据（Ajax 比 php 更漂亮）；通常返回值将是我的 HTML 表单可以处理的一条记录。但有时返回值会是两三条记录。在这种情况下，我需要动态添加输入字段并使用返回的数据填充它们。

这是我表格中的代码；Fetch 按钮使用 Selected Marker 值和 Selected LabID 值来查找相关记录，其中包含 Allele_1、Allele_2 和运行日期：

```
<fieldset>
      <LEGEND><b>Edit Genotype</b></LEGEND>
      <p>
    <boldlabel>Selected Marker</boldlabel><input name=sel_marker length=15 DISABLED>
    <boldlabel>Selected LabID</boldlabel><input name=sel_labid length=10 DISABLED><br>
    <boldlabel>Allele_1</boldlabel><input id=allele1 name=allele_1 size=5 >
    <boldlabel>Allele_2</boldlabel><input id=allele2 name=allele_2 size=5 >
    <boldlabel>Run date</boldlabel><input id=run_date name=run_date size=10 >
    <br>
      </p>              
    <input type="button" name="fetch" id="fetchbutton" value="Fetch" sclass="btn">
    <input type="button" name="save"  value="Save" onclick="savegenotype()" class="btn">
    <br>
    </fieldset> 
```

这是链接到 Fetch 按钮的 javascript 代码：

```
 function fetchgenotype() {
    // here's where we use an Ajax function to fetch the allele values without reloading the page.
    // Get the index number of the genotype record to retrieve; retrieve it; populate the alleles.

    var mndx = document.EditGenotype.marker.options[document.EditGenotype.marker.selectedIndex].value;
    var sndx = document.EditGenotype.labid.options[document.EditGenotype.labid.selectedIndex].value;

    $.post("fetchAlleles.php", {mndx: mndx, sndx: sndx},
    function(result) {        
      i=0;
      result.each(
        a1='allele1_'||i.toString();
        a2='allele2_'||i.toString();
        r='rundate_'||i.toString();

        $("#run_date").after(a1);
        $("#run_date").after(a2);
        $("#run_date").after(r);
      )
    }, "json");

    return false;
  } 
```

这是单独的 PHP 脚本，它是查找相关数据的 Ajax 部分：

```
 // query the database.
    $dbconnect = pg_pconnect("host=".$hostname." user=".$dbuser." dbname=".$dbname);    
    if (!$dbconnect)    {
        showerror(0,"Failed to connect to database",'fetchAlleles',16,"username=".$dbuser.", dbname=".$dbname);
        exit;
    }
    $sql = "SELECT allele1, allele2, run_date FROM geno.genotypes WHERE markers_id=".$mndx." AND gsamples_id=".$sndx;

    $fetchresult = pg_exec($dbconnect, $sql);
    if ($fetchresult) {
        $arr = pg_fetch_array($fetchresult, 0, PGSQL_NUM);
        // for debugging
        //print_r($arr);
    } else {
        echo "(25) Failed to retrieve results.<BR>SQL: ".$sql."</br>";
    }

    // It appears necessary to return the array as json encapsulated.
    echo json_encode($arr);
?>
} 
```

我知道，这部分适用于单值情况；但是当返回值是多个记录的数组时，我的表单的 javascript 部分中的 jQuery 代码的语法不正确。我在 a1='allele1_'||i.toString(); 行中遇到错误

任何可以让我直截了当的 jQuery 大师都将*不胜*感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:40:08.703

我的第一个想法：使用[pg_affected_rows](http://php.net/manual/en/function.pg-affected-rows.php)找出你是否有一个或多个记录。

我的第二个想法：为什么不[pg_fetch_object](http://www.php.net/manual/en/function.pg-fetch-object.php)？我认为你会得到更好（可读）的json。

我的第三个想法：你应该统一 JSON 输出。很常见的做法是 - JSON 响应应该看起来像一个对象数组。如果 DB 只返回一条记录 -> JSON-response 是一个数组，其中只有一个项目。如果 DB 返回多个 -> JSON-response 是一个包含多个项目的数组

JSON 响应示例

```
//DB return only ONE record
    {
      "items": [
            { 
                "allele1" : "the-value",
                "allele2" : "the-value",
                "run_date" : "the-date"
            }
        ],
      "totalItems : 1
    }

//DB returns more than one records
{
  "items": [
        { 
            "allele1" : "the-value_1",
            "allele2" : "the-value_1",
            "run_date" : "the-date_1"
        },
        { 
            "allele1" : "the-value_2",
            "allele2" : "the-value_2",
            "run_date" : "the-date_2"
        },
        ...
        { 
            "allele1" : "the-value_n",
            "allele2" : "the-value_n",
            "run_date" : "the-date_n"
        }
    ],
  "totalItems : n
} 
```

如果你得到这样的结果，你可以更容易地动态创建输入字段。首先，您可以轻松检查是否收到了一条或多条记录

```
if(response.totalItems === 1 ) {
    // handle single record
}else if (response.totalItems > 1) {
    // handle multiple records
} 
```

如果有多个记录，您可以使用 jQuery.each() 和 jQuery.map() 进行迭代并生成输入字段

```
if (response.totalItems > 0) {
    //iterate through all items in JSON-response
    $.each(response.items, function(index, object) {
        // create FIELDSET element
        var $fieldset = $('<fieldset>', {'html' : '<legend>#'+(index+1)+'</legend>'});

        $.map(object, function(value ,key) {
           //create LABEL element and appendInto FIELDSET
           $fieldset.append($('<label>', {'text' : key, 'for' : key}));
           //create INPUT element and appendInto FIELDSET
           $fieldset.append($('<input>', {'id': key, 'name': key, 'value' : value}));
           //create LineBreak
          $fieldset.append('<br />');
        });
        // Append whole FIELDSET with LABEL, INPUT and BR to body (or whatever your placeholder is)
        $('body').append($fieldset);
   });
} 
```

# ruby - 从 Ruby 中的 lib/GEM_NAME 请求

> ID：10423087
> 
> 赞同：1
> 
> 时间：2012-05-02T23:21:22.883
> 
> 标签：ruby, gem, require

我有一个具有以下结构的宝石：

```
gem
|
|- lib/
   |
   |- gem.rb
   |- gem/
      |
      |- router.rb 
```

在里面`gem.rb`，有以下代码：

```
module Gem
    VERSION = '0.1.8.beta'
end

require 'gem/router' 
```

但是，尽管使用了我所知道的数百种功能和方法，`router.rb`但不能要求！

有小费吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:36:57.940

可能会发生两件事之一。如果您使用的是 1.8.7 和朋友，Ruby 可能会看到一些名为的标准库文件夹`gem`（不要以标准库命名）。如果您使用的是 Ruby 1.9.*，则必须使用一个名为`require_relative`仅搜索相对于当前工作目录的方法。

# android - Use of Async Task

> ID：10423094
> 
> 赞同：0
> 
> 时间：2012-05-02T23:22:33.383
> 
> 标签：android, android-asynctask

Is there anyway to use AsyncTask without passing in any parameters? I am currently passing in an empty string, but I'm not doing anything with it:

```
 DownloadWebPageTask task = new DownloadWebPageTask();
    task.execute(new String[] { "" });

    class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    private final ProgressDialog dialog = new ProgressDialog(MainScreen.this);
     @Override
        protected void onPreExecute() {
            dialog.setMessage("Gathering data for\n"+selectedSportName+".\nPlease wait...");
            dialog.show();
        }

    @Override
    protected String doInBackground(String... urls) {
        //go do something
        return "";
    }

    @Override
    protected void onPostExecute(String result) {
      dialog.dismiss();
      startTabbedViewActivity();
    }
}

private void startTabbedViewActivity(){
    Intent intent = new Intent(MainScreen.this, TabbedView.class);
    intent.putExtra(SPORT_NAME_EXTRA, selectedSportName);
    intent.putExtra(HEADLINES_FOR_SPORT_EXTRA, existingSportHeadlines.get(selectedSportName));
    intent.putExtra(SCORES_FOR_SPORT_EXTRA, existingSportScores.get(selectedSportName));
    intent.putExtra(SCHEDULE_FOR_SPORT_EXTRA, existingSportSchedule.get(selectedSportName));
    startActivity(intent);
} 
```

For some reason, when I run the code as shown, with nothing happening in doInBackground(), the dialog dissapears, and the TabbedView activity starts.

But, when I use doInBackground() to run some code, the dialog dissapears, but, the TabbedView activity won't start. So I'm wondering if I could be doing anything differently?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:24:43.460

Yes you can use `AsyncTask` without passing a `String` to the `doInBackground()` method.

Just change the first and third generic types from `String` to `Void`:

```
class DownloadWebPageTask extends AsyncTask<Void, Void, Void> {

} 
```

[From the doc:](http://developer.android.com/reference/android/os/AsyncTask.html)

> The three types used by an asynchronous task are the following:
> 
> 1)Params, the type of the parameters sent to the task upon execution.
> 
> 2)Progress, the type of the progress units published during the
> 
> 3) background computation. Result, the type of the result of the background computation.

For the signature of `onPostExecute`try this:

```
@Override
protected void onPostExecute(Void unused) {

} 
```

**EDIT**:

For the parameters it's actually very simple.

Consider this:

```
class MyTask extends AsyncTask<Type1, Type2, Type3> {
    @Override
    protected void onPreExecute() {
    }

    @Override
    protected Type3 doInBackground(Type1... param) {
    }

    @Override
    protected void onProgressUpdate(Type2... progress) {
    }

    @Override
    protected void onPostExecute(Type3 result) {
    }
} 
```

In order to determine what *Type1*, *Type2* and *Type3* should be, you'll have to ask yourself 3 questions:

*   What parameter should I pass to my task? => *Type1*

*   What is the type of the intermediate results that need to be shown during processing? =>
    *Type2*

*   What is the type of the resulting operation? => *Type3*

In your case, I don't know whether the URL that you are downloading data from is defined in a globally or you want to pass it to the task. If it's defined globally, then you don't *Type1* should be *Void*.

If you want to pass it to the task, then you can pass it to the `doInBackground()` method and *Type1* would be *String*.

Obviously for your case you don't need to worry about *Type2* since you aren't publishing any intermediate results and since you aren't doing anything with the result in `onPostExecute()` then `Type3` is `Void` too.

To summarize you'll have:

```
class DownloadWebPageTask extends AsyncTask<String, Void, Void> {
      @Override
      protected Void doInBackground(String... urls) {
         // do something with urls[0]
      }

      @Override
      protected void onPostExecute(Void unused) {
         // dismiss pd and start new intent
      }
} 
```

Or:

```
class DownloadWebPageTask extends AsyncTask<Void, Void, Void> {
      @Override
      protected Void doInBackground(Void... unused) {

      }

      @Override
      protected void onPostExecute(Void unused) {
         // dismiss pd and start new intent
      }
} 
```

Depending on your needs. Is that clear enough?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:25:52.413

You simple specify `Void` for `AsyncTask` generics

```
 class DownloadWebPageTask extends AsyncTask<Void, Void, Void> { 
```

Look at the [AsyncTask generics](http://developer.android.com/reference/android/os/AsyncTask.html) section

# jquery - 基于 span 标签的标题使用 onclick

> ID：10423095
> 
> 赞同：1
> 
> 时间：2012-05-02T23:22:41.340
> 
> 标签：jquery

我有一些跨度标签，我希望能够在其中单击它们并切换 div。我不能将 ID 放在 span 标签上。我如何根据独特的跨度上的标题来做到这一点？这是我的 HTML。

```
<span title="Silver" class="swatchColours swatchOneColour showPreview">
        <span style="background-color:#cccccc;" class="swatchColour swatchColour_1">&nbsp;</span>
</span>
<span title="Black" class="swatchColours swatchOneColour showPreview">
        <span style="background-color:#000000;" class="swatchColour swatchColour_2">&nbsp;</span>
</span>
<div id="colour_one">Silver</div>
<div id="colour_two">Black</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:24:51.837

```
$('span[title="Silver"]').click(function(){
    $('#colour_one').toggle();
});

$('span[title="Black"]').click(function(){
    $('#colour_two').toggle();
});​ 
```

[http://jsfiddle.net/AlienWebguy/XYfZV/](http://jsfiddle.net/AlienWebguy/XYfZV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:30:53.647

```
$('span.swatchColours').on('click', function() {
    var that = $(this);

    if(that.attr('title') == 'Silver') 
        $('div#colour_one').toggle();
    else if(that.attr('title') == 'Black')            
        $('div#colour_two').toggle();           

}); 
```

# perl - 为什么这个定义的值不被识别为包或对象引用？

> ID：10423108
> 
> 赞同：0
> 
> 时间：2012-05-02T23:25:42.557
> 
> 标签：perl, class, testing

我有以下代码：

```
my $content = $response->decoded_content((charset => 'UTF-8'));
my $feed = XML::Feed->parse(\$content) || $logger->error("When retrieving $URL: ", XML::Feed->errstr);
if (defined $feed) {
   for my $entry ($feed->entries) {
      #DO SOMETHING
   }
} 
```

对于某些站点，XML::FEED 表示它无法检测到提要类型。这是我必须要看的东西，但目前这不是我的问题。此示例代码在一个 while 循环中，我正在检索不同的 RSS，即使某些 URL 失败，我也希望脚本运行。

当我收到错误消息时，定义的函数似乎不起作用：

> 不能在没有包或对象引用的情况下调用方法“条目”

有人能告诉我处理测试的正确方法是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:15:30.973

您首先必须检查 $feed 的值。

您描述的错误消息很明显： $feed 不是包/对象引用，但它可以是例如简单的哈希。所以它被定义了。

在 if(defined) 前面添加我最喜欢的调试行：

```
warn Data::Dumper->new([ $feed ],[ '*feed' ])->Sortkeys(1)->Dump();use Data::Dumper; 
```

你会以一种很好的方式看到价值。如果没有测试，我会说 $feed 包含您的记录器的结果，可能是 1 或 0 或类似的值，因为您将 $feed 的值设置为 XML::Feed->parse，如果这不成功（未定义）它是 $logger->error 的结果。

你最好这样写：

```
my $feed = XML::Feed->parse(\$content);

if (defined $feed) {
    for my $entry ($feed->entries) {
        #DO SOMETHING
    }
}
else {
    $logger->error("When retrieving $URL: ", XML::Feed->errstr);
} 
```

因为据说 parse 会返回一个对象，我猜它会在错误时返回 undef。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:06:22.137

错误消息的意思是： `$feed`既不是包也不是对象引用。它通过了`defined`测试，因为有许多既不是包也不是对象引用的定义值。

在这种特殊情况下，您会看到此错误，因为您误用了`||`：

```
my $feed = XML::Feed->parse(\$content) || $logger->error("When retrieving $URL: ", XML::Feed->errstr); 
```

如果`parse`调用失败并返回`undef`，则计算结果为

```
my $feed = ( undef || $logger->error("When retrieving $URL: ", XML::Feed->errstr) ); 
```

评估为

```
my $feed = $logger->error("When retrieving $URL: ", XML::Feed->errstr); 
```

. 我不知道of 的返回值`$logger->error`，但大概它既不是包也不是对象引用。如果它是一个，那么放入一个名为 的变量可能是错误的`$feed`。

[`XML::Feed`](http://search.cpan.org/dist/XML-Feed/lib/XML/Feed.pm "XML::提要")提及使用类似结构解析[的文档](http://search.cpan.org/dist/XML-Feed/lib/XML/Feed.pm "XML::Feed")

```
my $feed = XML::Feed->parse(URI->new('http://example.com/atom.xml'))
        or die XML::Feed->errstr; 
```

**这不是一回事。**`||`它们各自的 优先规则`or`适用于不同的应用程序；具体来说，您应该只`||`在您想要某物右侧的值时使用。不要仅将其用于短路副作用。

您可以通过替换`||`with`or`来解决此问题，以获得正确的评估顺序。当您在那里时，您可能还应该消除冗余`defined`测试。

# php - php shell_exec 中的蹩脚编码器命令无法通过 http 服务器工作

> ID：10423111
> 
> 赞同：0
> 
> 时间：2012-05-02T23:26:10.377
> 
> 标签：php, shell-exec, lame

我在 php 中通过 shell_exec 脚本运行蹩脚的编码器时遇到问题。

而且我的问题只是这个脚本，并注意到如果我在终端中通过 php 命令运行它，该脚本可以工作，但如果我在浏览器中打开它就不能工作。为了以防万一，我将所有文件的权限设置为 777。

这是代码

```
< ?php

exec('lame -f -V 9 ../furniture/sound/107887.wav ../furniture/sound/107887.ogg'); 
```

问题是，如果我使用 php 命令在终端中运行脚本，但不通过浏览器运行，该脚本可以工作。

哦，这个脚本最多需要两秒钟，所以它不会是超时或任何东西。我也没有得到 php 或 nginx 错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:54:35.413

php的执行很蹩脚`PATH`吗？尝试替换`lame`为`/usr/bin/lame`或其他。

文件参数的相对路径名怎么样？`../furniture/`PHP 所见的当前目录等是否正确？如果有疑问，也用完整的路径名替换它们，看看是否能解决问题。

不太可能但值得一提：您可能想要检查其`lame`自身是否已设置所有可执行位。如果您拥有该文件并且它只能由所有者执行，则 apache 将无法运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T01:45:00.650

可能有很多原因导致它无法从网络服务器工作，可能与资源或权限相关。您可以通过使用 exec 的第二个可选参数来找出这一点：

```
<?php
$output = "";
exec('lame -f -V 9 ../furniture/sound/107887.wav ../furniture/sound/107887.ogg',$output);
echo $output;
?> 
```

# php - MSExchange URL 编码

> ID：10423116
> 
> 赞同：2
> 
> 时间：2012-05-02T23:27:04.147
> 
> 标签：php, exchange-server, webdav, url-encoding

我正在编写一个 PHP 服务来通过 WebDAV 查询 Exchange 服务器。这项服务已经运行了大约一个月，没有任何问题，但今天遇到了一个问题，当一封带有以下主题行的电子邮件到达邮箱时：

> FW：每日批准报告：供应商/主 007297

该消息存储在文件“FW: Daily Approval Report: Vendor/Master 007297.EML”中，并通过 url 引用为：

```
FW:%20Daily%20Approval%20Report:%20Vendor_xF8FF_Master%20007297.EML 
```

我一直在使用 PHP`rawurlencode()`函数将消息文件名转换为对应的 URL，但在这种情况下会`rawurlencode()`返回一个不匹配的字符串：

```
FW%3A%20Daily%20Approval%20Report%3A%20Vendor%2FMaster%20007297.EML 
```

我不是 Exchange 的专家，也不知道如何匹配它的编码。有人可以告诉我是否有一个映射可以用来编写我自己的函数吗？我假设简单地替换`/`和`\_xF8FF\_`跳过冒号会导致一个月后再次追查这个错误，但谷歌并没有帮助生成完整的例外列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:59:34.820

我用谷歌搜索了一下，但我无法找到您正在寻找的字符的完整参考。
我发现的唯一一件事是以下五个字符在 Exchange 中具有特殊编码：

*   正斜杠 '/' 编码为 _xF8FF_
*   问号“？” 编码为 _x003F_
*   反斜杠 '\' 被编码为 _xF8FE_
*   波浪号 '~' 被编码为 _x007E_
*   欧元符号“€”编码为 _x0080_

看看Microsoft Exchange 的 Ximian 连接器[的源代码](http://fossies.org/dox/evolution-exchange-3.5.2/e2k-uri_8c_source.html#l00280)可能会有所帮助，更准确地说是第 280 行的“ [e2k_uri_append_encoded](http://fossies.org/dox/evolution-exchange-3.5.2/e2k-uri_8c.html#a9a00c4e734614372dfd1d4190c1fdc66) ”函数。Ximian
连接器通过与 Microsoft 通信使 Ximian Evolution 能够充当 Microsoft Exchange 客户端通过 WebDAV 协议交换服务器，因此它必须完全处理您遇到的相同问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:18:47.133

您使用哪个 Exchange 服务器？请记住，不再支持 WebDAV。ES2007 支持 WebDAV 和 Exchange Web 服务。ES2010 仅支持 Exchange Web 服务。但是，编码是固定的；-)

# java - 3d Reconstruction from live video feed

> ID：10423119
> 
> 赞同：4
> 
> 时间：2012-05-02T23:27:58.077
> 
> 标签：java, video, 3d, 3d-reconstruction

i was wondering if anyone has knowledge on the recontruction of 3D objects from live video feed. Does any have any java based examples or papers JAVA based that i could be linked to as i have read up on algorithm's used to produce such 3d objects. If possible i would like to construct something such as the program demostrated in the link provided below. Currently my program logs live video feed.

[http://www.youtube.com/watch?v=brkHE517vpo&feature=related](http://www.youtube.com/watch?v=brkHE517vpo&feature=related)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:34:19.410

从单个角度对物体进行 3D 重建是不可能的。您有两种基本选择：a) 让立体摄像头系统捕捉物体，b) 只有一个摄像头，但旋转物体（因此您将拥有不同的物体视角），就像视频中的那个. [这是一个与极线几何](http://en.wikipedia.org/wiki/Epipolar_geometry)相关的基本概念。

还有其他选择，但更具侵入性。前段时间，我一直在研究基于单个摄像头和激光束的 3D 扫描仪。

![在此处输入图像描述](../Images/8b78d8dbfb14dd3b03c4fc9be67292a0.png)

为此，我使用了 C++ 代码的[OpenCV](http://sourceforge.net/projects/opencv/)，但现在我认为有 Java 的端口。请记住，3D 重建不是一件容易的事，而由此产生的应用程序。必须在很大程度上进行参数化才能获得良好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:25:00.857

这不是一个已解决的问题——某些技术可以在适当的条件下在一定程度上做到这一点。例如，链接的视频显示了一个相当简单的平面对象正在被分析，同时在相对均匀的照明条件下缓慢移动。

如果您可以获得第二个（立体视觉）视频源，则此类技术的有效性也可以大大提高。

但是你不太可能让它适用于一般的视频源。诸如照明不均匀、物体在相机前移动、快速运动、对焦问题等问题使问题极难解决。您可能希望的最好结果是部分重建，然后可以对其进行审查和手动编辑以纠正不可避免的错误。

如果您想进一步探索，[JavaCV和相关项目可能是最好的资源。](http://code.google.com/p/javacv/)但是不要对开箱即用的神奇解决方案寄予厚望！

# ios - Objective C解析打嗝

> ID：10423122
> 
> 赞同：1
> 
> 时间：2012-05-02T23:29:06.737
> 
> 标签：ios, objective-c, c

请多多包涵。我完全是 C 的新手，更不用说 Objective C。我正在尝试做一些应该简单但它不起作用的事情。我正在扫描一串数字，其中也包含符号。当 mini 函数遍历输入字符串时，它会将数字附加到一个新字符串，直到遇到一个运算符（我正在以自己的方式编写一个计算器作为学习练习。）现在我只是在做开始部分并扫描字符串和附加字符。这是我的代码：

```
char userInput[99];
NSMutableString *number = nil;
int i;

printf( "Please enter math: " );
scanf( "%s", userInput );
fpurge( stdin );

NSString *InputString = [NSString stringWithUTF8String:userInput];

for (i=0; i < [InputString length]; i++) {
    char current = [InputString characterAtIndex:i];
    if (isalnum(current)) {
        [number appendString:[NSString stringWithCharacters:&current length:1]];
        NSLog(@"%@ ", number);
    }
} 
```

对于我的生活，我似乎无法弄清楚为什么它会继续打印`2012-05-02 19:23:20.935 CALC[1447:403] (null)`而不是它遇到的每个数字的数值。因此，例如，如果输入的字符串中有 5 个数字，它将打印 5 次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T23:33:16.457

你从来没有初始化`number`——所以当你调用`-appendString:`它时，你只是追加到`nil`，结果就`nil`回来了。试试这个你的第二行：

```
NSMutableString *number = [NSMutableString string]; 
```

Now`number`是一个空字符串对象，它与being 非常不同`nil`，它根本就不是对象。

# c - Seg fault error in C

> ID：10423123
> 
> 赞同：0
> 
> 时间：2012-05-02T23:29:19.077
> 
> 标签：c, timer, segmentation-fault, signals, void-pointers

Getting seg-fault when I run this code. I commented where I'm getting the seg-fault (in `handler()` function). I'm not sure, may be I'm wrapping data twice that's why or what's the problem? It's printing correctly till "start_timer" method.

```
#include <time.h>
#include <stdio.h>
#include <signal.h>
#include <pthread.h>
#include <unistd.h>
#include <errno.h>

typedef struct _data{
    char *name;
}data;  

struct timer_list{
   void* timer_data;
   unsigned long expires;
   void (*function)(sigval_t);
};

volatile long int second = 0;  

void handler(sigval_t val)
{
    data *data_handler =  val.sival_ptr;
    printf("Handler: address of data: %p\n", data_handler);
    printf("Handler: address of &data_handler->name: %p\n", &data_handler->name);
    printf("Handler entered with value :%s\n", data_handler->name); `**//**SEG-FAULT HERE****` 
}  

void timer_handler(union sigval val)
{
    printf(" ----- Seconds: %ld\n", ++second);
}  

/* start timer with all we got as data is timer */
void start_timer(struct timer_list *timer)
{
    printf("\nStart_timer...: Timer->data address: %p\n", timer->timer_data);
    data *data_handler = timer->timer_data;
    printf("Start_timer...: entered with value :%s\n", data_handler->name);
    int Ret;
    pthread_attr_t attr;
    pthread_attr_init( &attr );
    //pthread_t tid;

    struct sched_param parm;
    parm.sched_priority = 255;
    pthread_attr_setschedparam(&attr, &parm);

    struct sigevent sig;
    sigval_t val;
    val.sival_ptr = timer->timer_data;
    sig.sigev_notify = SIGEV_THREAD;
    sig.sigev_notify_function = timer->function;
//  sig.sigev_value.sival_int = val;
    sig.sigev_value = val;
    sig.sigev_notify_attributes = &attr;

    data *data_handler1 = (data *)val.sival_ptr;
    printf("From sigval...: handler_data address: %p\n", data_handler1);
    printf("From sigval...: handler_data->name address: %p\n", &data_handler1->name);
    printf("From sigval...: Handler entered with value :%s\n", data_handler1->name);

//create a new timer.
    timer_t timerid;
    Ret = timer_create(CLOCK_REALTIME, &sig, &timerid);
    if (Ret == 0)
    {
        struct itimerspec in, out;
        in.it_value.tv_sec = timer->expires;
        in.it_value.tv_nsec = 0;
        in.it_interval.tv_sec = 0;
        in.it_interval.tv_nsec = 0;
    timer_settime(timerid, 0, &in, &out);

    }  
}  

/* Start_timer_on: wrapping up data into one timer structure, and starting timer */
void start_timer_on(data timer_data, unsigned long expires)
{
    struct timer_list *timer = (struct timer_list *)malloc(sizeof(struct timer_list)); //Problem was here ... forgot to use malloc 
    timer->timer_data = &timer_data;
    printf("\nTimer->data address: %p\n", &timer_data);
    timer->function = handler;
    timer->expires = expires;
    start_timer(timer);
}  

/* Main */
void main()
{
    data handler_data1 = {"Handler Data 1"};
    //data handler_data2 = {"Handler Data 2"};
    //void *data1 = &handler_data1;
    //void *data2 = &handler_data2;

    pthread_attr_t attr;
    pthread_attr_init( &attr );

    struct sched_param parm;
    parm.sched_priority = 255;
    pthread_attr_setschedparam(&attr, &parm);

    struct sigevent sig;
    sig.sigev_notify = SIGEV_THREAD;
    sig.sigev_notify_function = timer_handler;
    sig.sigev_notify_attributes = &attr;

//create a new timer - clock.
    timer_t timerid;
    timer_create(CLOCK_REALTIME, &sig, &timerid);

    struct itimerspec in, out;
    in.it_value.tv_sec = 1;
    in.it_value.tv_nsec = 0;
    in.it_interval.tv_sec = 1;
    in.it_interval.tv_nsec = 0;
    printf("*** *** *** Main clock starts *** *** ***\n");
    timer_settime(timerid, 0, &in, &out);
    printf("***** Start timer for data1 for 2 sec *****\n");
    start_timer_on(handler_data1, 2);
//    printf("***** Start timer for data1 for 5 sec  *****\n");
//    start_timer(data2, 5);     

    sleep(20);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:47:23.543

这可能是问题所在。在下面的代码中，`timer_data`函数是本地的`start_timer_on`。一旦函数退出，对象就会被销毁。因此，当访问`name`in 处理程序时，它会出现段错误。

```
void start_timer_on(data timer_data, unsigned long expires)
{
    struct timer_list *timer;
    timer->timer_data = &timer_data;
    printf("\nTimer->data address: %p\n", &timer_data);
    timer->function = handler;
    timer->expires = expires;
    start_timer(timer);
} 
```

您应该使用`void start_timer_on(data *timer_data, unsigned long expires)`, 以便在`main`退出之前不会释放数据。

# scala - Scala中的多个独立隐式

> ID：10423124
> 
> 赞同：0
> 
> 时间：2012-05-02T23:29:20.510
> 
> 标签：scala, implicit

斯卡拉很酷。但有时也非常令人沮丧，因为许多看似武断的限制以及不像我预期的那样工作的事情。

在这种情况下，我用 Scala 编写了一个参数解析库。它有这个功能：

```
def option[T](
  name1: String, name2: String = null, name3: String = null,
  name4: String = null, name5: String = null, name6: String = null,
  name7: String = null, name8: String = null, name9: String = null,
  default: T = null.asInstanceOf[T],
  metavar: String = null,
  choices: Seq[T] = null,
  aliases: Map[T, Iterable[T]] = null,
  help: String = "")
(implicit convert: (String, String, ArgParser) => T, m: Manifest[T]) = {
  optionSeq[T](nonNullVals(name1, name2, name3, name4, name5, name6,
    name7, name8, name9),
    metavar = metavar, default = default, choices = choices,
    aliases = aliases, help = help)(convert, m)
} 
```

本质上，这声明了给定类型的普通选项参数。有一个隐式函数，其中填充了适合该类型的默认转换器。还有一个隐含的清单，这是必要的，因为我需要能够在某些事情上以它为条件。

这一直有效，直到我尝试实际提供非默认转换器。正如所写，您不能只提供转换器，还必须提供清单，我不知道该怎么做，而且无论如何它都非常丑陋 - 清单是一个令人讨厌的组合，旨在解决一个主要部分JVM 中的损坏，不应该暴露给最终用户。

我已经知道 Scala 不允许您在单个参数列表中混合隐式和非隐式参数 - IMO 是任意且不必要的限制，但就这样吧。所以我尝试将隐式参数列表拆分为两个单独的参数列表，每个列表都有一个隐式。不走运——Scala 似乎也阻止了你拥有多个隐式参数列表（另一个看似任意的限制）。

我对如何解决这个问题一无所知。建议？

此外，目前是否有任何尝试在未来的 Scala 版本中修复对隐式的一些限制（和/或提出一种比清单更不可见的解决类型擦除损坏的方法，IMO 是丑陋的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:56:29.677

您始终可以在上下文中获取`implicit`of 类型。因此，如果您需要显式编写编译器将提供的隐式，您可以使用.`T``implicitly[T]``Manifest[T]``implicitly[Manifest[T]]`

每当您想在隐式参数列表中提供一个参数并保持另一个不变时，这都可以使用，只需将隐式 [TheTypeOfTheImplicit] 用于您不想更改的参数。

对于 Manifests，`Predef`恰好有一个捷径，即 just `manifest[T]`(which is just `implicitly[Manifest[T]]`)

注意：`implicitly`不是魔术，它只是`def implicitly[T](implicit e: T) = e`, in`Predef.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T00:44:47.727

这是一个非常尴尬的方法。九个显式名称参数？隐式选择转换函数？我不确定清单是这里最严重的问题。

无论如何，你可以

```
class Converter[T: Manifest](val f: (String, String, ArgParser) => T) {
  def m = manifest[T]
}
implicit def function_to_converter[T: Manifest](f: (String, String, ArgParser) => T) =
  new Converter { def apply(s1: String, s2: String, ap: ArgParser) = f(s1,s2,ap) }
} 
```

然后用它代替你得到的两个论点。定义所有默认转换器，例如

```
implicit val convert_to_int: Converter = (s1: String, s2: String, ap: ArgParser) => ... 
```

然后如果用户需要显式填写一个，他们可以只提供该函数并对其进行隐式转换。

# google-chrome - 如何静默安装 Chrome 或是否有便携式版本？

> ID：10423125
> 
> 赞同：-1
> 
> 时间：2012-05-02T23:29:31.587
> 
> 标签：google-chrome, web-applications, portability, offline, chromium

**请先阅读：**此解决方案适用于有限数量的老年用户，他们当然更关心安装“其他东西”而不是静默安装（他们甚至不信任互联网也不使用它）而且他们充分意识到我将为他们保存该过程；是的，我告诉了他们，他们同意了。如果您有更好的解决方案，请与我分享。

**现在的问题是：**我需要在没有互联网的 Windows 计算机上静默安装/复制 Google Chrome，同时安装我在 CD 中提供的另一个离线 Web 应用程序。有可靠的便携式 Chrome 版本吗？

换句话说：我需要将chrome安装过程保存给用户，所以他们只需要执行一个安装程序。

**额外信息：**我目前正在使用[http://www.advancedinstaller.com/](http://www.advancedinstaller.com/)来生成安装程序。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:32:43.087

这是 Chrome 便携式[http://portableapps.com/apps/internet/google_chrome_portable](http://portableapps.com/apps/internet/google_chrome_portable)

# java - Android 致命信号 11

> ID：10423128
> 
> 赞同：72
> 
> 时间：2012-05-02T23:30:31.963
> 
> 标签：java, android, crash, signals

在我在 Android 上开发的应用程序中，我不断收到致命信号 11 错误。

我认为这与我访问内存的方式有关，但我无法弄清楚是什么原因造成的。

任何帮助都感激不尽！

这是 LogCat：

```
05-02 23:47:17.618: D/dalvikvm(590): GC_FOR_ALLOC freed 68K, 4% free 6531K/6787K, paused 101ms
05-02 23:47:17.638: I/dalvikvm-heap(590): Grow heap (frag case) to 7.619MB for 1228816-byte allocation
05-02 23:47:17.738: D/dalvikvm(590): GC_CONCURRENT freed 1K, 4% free 7730K/8007K, paused 5ms+14ms
05-02 23:47:17.878: D/dalvikvm(590): GC_FOR_ALLOC freed <1K, 4% free 7730K/8007K, paused 37ms
05-02 23:47:17.888: I/dalvikvm-heap(590): Grow heap (frag case) to 8.790MB for 1228816-byte allocation
05-02 23:47:17.998: D/dalvikvm(590): GC_CONCURRENT freed <1K, 4% free 8930K/9223K, paused 4ms+4ms
05-02 23:47:17.998: A/libc(590): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-03T18:02:13.437

我一直试图在另一个类中调用未初始化的画布，所以当它试图获取它的高度或宽度时，它会崩溃。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-27T14:25:08.917

我对 android.media.MediaRecorder 的实例有同样的问题。

在 MediaRecorder 实例`#getMaxAmplitude()`之后`#reset()`和之后访问的代码已被调用。`#release()`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-01T17:02:56.797

今天早上我遇到了同样的问题，并且能够追溯到意外地将 800 像素宽的图像保存在 drawable-mdpi 文件夹中。当我意识到发生了什么时，我调整了一下。我试着压缩它，看看它是否与文件大小有关，但不是。然后我尝试以 650 像素宽再次保存它，它在该文件夹中起作用。因此，我猜测的每个文件夹之间都有一个断点。然后我将 800 p 宽的图像放在预期的 hdpi 文件夹中，将 480 p 宽的图像放在 mdpi 中并修复它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-19T08:21:54.103

我也遇到了同样的问题，在睡了一夜好觉，早上喝了杯咖啡后，我发现我已经傻到用未初始化的位图来支持画布了。似乎大部分（如果不是全部）画布绘图代码都是本机代码，并且未在任何地方检测到未初始化对象的传递。

具有空地址 (0x00000000) 的 SIGSEGV 意味着您的应用程序已取消引用空指针，因此请注意将空指针（即对您首先未实例化的对象实例的空引用）传递给支持的代码的位置通过本机代码，并且没有正确检查此错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-21T23:03:30.383

我在使用 Canvas 类时遇到了同样的致命错误。
我的代码看起来像这样。下面的一段代码初始化了一个 Arc 并将其绘制在画布上。

```
private RectF r1 = null;
private final Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);

public Arc(Context ctx) {
    super(ctx);
    mPaint.setColor(0xFFFF0000);
    r1 = new RectF(200, 200, 400, 400);
}

protected void onDraw(Canvas canvas) {
   super.onDraw(canvas);
   canvas.drawArc(r1, 0, 90, true, mPaint);
} 
```

出现问题是因为我的 RectF 实例未初始化，导致 NullPointerException 和致命错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-28T01:31:32.950

我在 android 上制作 cocos2d-x 应用程序时遇到了这个问题。问题是我的图层是 CCLayer：

```
 CCLayer::init() 
```

但在头文件中我有：

```
 class HelloWorld : public cocos2d::CCLayerColor 
```

我将 CCLayerColor 更改为 CCLayer 并且我的应用程序正常工作

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-06-19T09:35:24.780

在使用 Android 的 LibGDX 框架进行游戏开发期间，我也发生了同样的事情，原因如下：

我有 2 个屏幕 -`GameScreen`和`BattleScreen`. `GameScreen`是我在地图上移动我的角色的地方。当我与敌人精灵发生碰撞时，我立即使用`game.setScreen(new BattleScreen(this))`并将当前屏幕更改为`BattleScreen`. 这里是致命信号 11 曾经发生的地方。起初我认为这与加载资产有关，因为我的资产管理器实例是静态的。我尝试了多种加载方式，但没有任何效果。原来我在错误的地方更换了屏幕。就我而言，`GameScreen`我有一个例子。我正在使用and inside的方法。里面`WorldController``WorldRenderer``worldController.update()``worldRenderer.render()``GameScreen``render(float deltaTime)``worldController.update()`我一发现敌人就在检查碰撞并更换屏幕。这对 Android 不好，可能是因为它发生在更新和渲染之间，或者它需要一些时间，而更新仍在运行并导致冲突 - 我不知道。但这是我修复它的方法：

1.  我在里面添加了一个布尔标志（默认为 false）`WorldController`，每次与敌人发生碰撞时，我都将其设置为 true
2.  在`GameScreen`'s`render()`我正在检查这个标志 - 如果它是真的，我会将屏幕更改为`BattleScreen`，否则我会更新和渲染`GameScreen`

现在它每次都能完美运行，没有任何致命信号错误11

这是我`GameScreen`的`render()`方法：

```
@Override
public void render(float deltaTime) {

    if(worldController.isCollisionWithEnemy()) {

        game.setScreen(game.battleScreen);

    } else {

        if(!paused) {
            worldController.update(deltaTime);
        }

        Gdx.gl.glClearColor(57.0f / 255.0f, 181.0f / 225.0f, 115.0f / 255.0f, 1.0f);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        worldRenderer.render();
    }

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-30T16:17:17.790

就我而言，这是 onDraw 事件中的一个空指针异常，它阻止了在画布上完成绘制。我认为这是出现平局问题时给出的一般错误消息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-20T06:36:21.973

I too had this error when using Libgdx for android, and I found out this error is caused by Box2d which uses native code, it is better to look at part of your code which uses Box2d and see if there is any null pointers.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-16T11:53:45.117

在我的情况下`BluetoothSocket`，尝试建立蓝牙连接时为空

# css - CSS 表达式使浏览器崩溃

> ID：10423133
> 
> 赞同：1
> 
> 时间：2012-05-02T23:30:49.577
> 
> 标签：css, internet-explorer, internet-explorer-6, css-expressions

在我的网站中，我希望`body`标签的最小宽度为 640 像素。事情是，IE6 不识别`min-width`，所以我试图用我的 IE6 样式表中的 CSS 表达式来解决这个问题：

```
body {
    width : expression(this.clientWidth < 639 ? "640px" : "auto");
} 
```

但是，当我调整它的大小时，这会使浏览器崩溃。我试过用`document.body.clientWidth`而不是`this.clientWidth`但它也崩溃了。有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:40:03.340

如果`body`has `padding:0`，那么这应该工作：

```
body {
    width : expression(this.clientWidth < 641 ? "640px" : "auto");
} 
```

演示：http: [//jsfiddle.net/kt2m8/embedded/result/](http://jsfiddle.net/kt2m8/embedded/result/)

* * *

如果有一些`padding`你可以使用这样的东西：

```
body {
    width : expression(this.clientWidth < 641+parseInt(document.body.currentStyle.paddingLeft,10)+parseInt(document.body.currentStyle.paddingRight,10) ? "640px" : "auto");
} 
```

演示`padding:10px`和`margin:10px`：http: [//jsfiddle.net/vL689/embedded/result/](http://jsfiddle.net/vL689/embedded/result/)

# java - 数组的Java复制部分

> ID：10423134
> 
> 赞同：21
> 
> 时间：2012-05-02T23:30:51.883
> 
> 标签：java, arrays, copy, java1.4

有没有一种方法可以复制数组的一部分（不是数组列表）并从中创建一个新数组？

```
Example:
[1,2,3,4,5] 
```

并从中创建一个新数组：

```
[1,2,3] 
```

是否有任何一条线/方法可以做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T23:31:55.827

看方法[`Arrays.copyOfRange`](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#copyOfRange-T:A-int-int-)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-02T23:38:42.207

这是一个兼容 java 1.4 的 1.5-liner：

```
int[] array = { 1, 2, 3, 4, 5 };
int size = 3;

int[] part = new int[size];
System.arraycopy(array, 0, part, 0, size); 
```

您可以在一行中执行此操作，但您不会引用结果。

要制作单线，您可以将其重构为一种方法：

```
private static int[] partArray(int[] array, int size) {
    int[] part = new int[size];
    System.arraycopy(array, 0, part, 0, size);
    return part;
} 
```

然后像这样调用：

```
int[] part = partArray(array, 3); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-02T23:37:01.427

: 中有一个预先存在的`java.util.Arrays`方法`newArray = Arrays.copyOfRange(myArray, startindex, endindex)`。或者您可以轻松编写自己的方法：

```
public static array[] copyOfRange(array[] myarray, int from, int to) {
    array[] newarray = new array[to - from];
    for (int i = 0 ; i < to - from ; i++) newarray[i] = myarray[i + from];
    return newarray;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-02T23:36:44.540

```
int [] myArray = [1,2,3,4,5];

int [] holder = new int[size];

System.arraycopy(myArray,0,holder,size); 
```

其中 0 代表复制开始的源数组的索引。和

size 代表复制操作的数量。您可以根据需要进行更改。

copyOfRange of Arrays 和许多其他方法可以实现这一点

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-02T23:32:59.637

[Arrays#copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)可以解决问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-18T20:57:14.380

正如其他人所说，您可以使用 Arrays.copyOfRange 方法。一个例子是：

```
String[] main = {"one", "two", "three", "four", "five"};
int from = 2;
int to = 4;
String[] part = Arrays.copyOfRange(main, from, to); 
```

现在**部分**将是：**{“二”，“三”，“四”** }

# .htaccess - How to redirect undefined RewriteRule in .htaccess

> ID：10423138
> 
> 赞同：1
> 
> 时间：2012-05-02T23:31:06.810
> 
> 标签：.htaccess

Here's what I've currently written in my `.htaccess` file:

```
RewriteEngine on
RewriteRule ^contact contact.php 
RewriteRule ^browse browse.php 
RewriteRule ^contact/ contact.php 
RewriteRule ^privacy privacy-policy.php
RewriteRule ^signup register.php
RewriteRule ^register register.php 
```

So when a user requests [http://mydomain.com/welcome](http://mydomain.com/welcome), which is not defined in the `.htaccess` file, it will result in a "404 Not Found" page.

Instead, I'd like to redirect pages that aren't explicitly defined in the `.htaccess` to another script, and pass the original URL. I don't want to use `ErrorDocument`s here. How can I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:28:18.753

```
RewriteEngine on

RewriteRule ^contact contact.php 
RewriteRule ^browse browse.php 
# why is contact the only one with a slash at the end?
RewriteRule ^contact/ contact.php 
RewriteRule ^privacy privacy-policy.php
RewriteRule ^signup register.php
RewriteRule ^register register.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /other.php [L] 
```

# objective-c - UITextField / UITextView：我需要能够检测到用户的“返回”键，并且我需要能够做多行......什么可以同时做？

> ID：10423142
> 
> 赞同：5
> 
> 时间：2012-05-02T23:31:33.470
> 
> 标签：objective-c, cocoa-touch

> **可能重复：**
> [如何创建多行 UITextfield？](https://stackoverflow.com/questions/1345561/how-to-create-a-multiline-uitextfield)

UITextField 委托将捕获返回键：`- (BOOL)textFieldShouldReturn:(UITextField *)textField`

但它不会像 UITextView 那样做多行。但是 UITextView，它可以捕获返回键吗？

我需要捕获关键事件：（返回）并做多行：`"\n"....` 我能做什么？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T23:40:30.910

一个快速的谷歌搜索“UITextView 检测返回”想出了这个线程：

[UITextView（编辑） - 检测下一行事件发生](https://stackoverflow.com/questions/4873772/uitextview-editing-detecting-that-next-line-event-occured)

（为方便起见，我在下面发布了代码）

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text;
{
    if ( [text isEqualToString:@"\n"] ) {
        //Do whatever you want
    }
    return YES;
} 
```

# git - 如何从 git grep 搜索中排除某些目录/文件

> ID：10423143
> 
> 赞同：168
> 
> 时间：2012-05-02T23:31:46.410
> 
> 标签：git, grep

有没有办法在使用搜索 git 存储库时排除某些路径/目录/文件`git grep`？类似于`--exclude`普通`grep`命令中的选项？

我需要使用`git grep`，因为`grep`直接使用在大型 git 存储库上运行速度太慢。

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2015-05-06T18:18:41.640

在 git 1.9.0 中，“魔法词”`exclude`被添加到`pathspec`s. `foobar`因此，如果您想在除匹配文件之外的每个文件中进行搜索，`*.java`您可以执行以下操作：

```
git grep foobar -- ':(exclude)*.java' 
```

或使用`!`“简短形式”排除：

```
git grep foobar -- ':!*.java' 
```

请注意，在 v2.12 之前的 git 版本中，使用 exclude 时`pathspec`，您必须至少有一个 "inclusive" `pathspec`。在上面的示例中，您还希望在`./*`之后的某个位置添加（递归地包括当前目录下的所有内容）`--`。在 git v2.13 中，这个限制被解除并且`git grep foobar -- ':!*.java'`没有`./*`.

`pathspec`在[git-scm.com](http://git-scm.com/docs/gitglossary#def_pathspec)（或只是`git help glossary`）中允许的所有“魔术词”都有很好的参考。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-01-09T00:47:59.123

**更新：**对于 git >= 1.9 有对排除模式的原生支持，请参见[onlyone's answer](https://stackoverflow.com/a/30084612/396967)。

这可能看起来倒退，但您可以传递与排除模式不匹配的文件列表，`git grep`如下所示：

```
git grep <pattern> -- `git ls-files | grep -v <exclude-pattern>` 
```

`grep -v`*返回每个不*匹配的路径`<exclude-pattern>`。请注意，`git ls-files`它还带有一个`--exclude`参数，但仅适用于*未跟踪的文件*。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-02T23:37:17.257

这是不可能的，但[最近已经讨论过了](http://git.661346.n2.nabble.com/git-grep-while-excluding-files-in-a-blacklist-td7195648.html)。链接中建议的解决方法：

> 然后您可以放入`*.dll`.gitignore 文件`git grep --exclude-standard`。

编辑看到[onlynone 的答案](https://stackoverflow.com/a/30084612)，因为 git 1.9.0 是可能的。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-07-27T19:52:25.370

您可以通过在存储库中创建属性文件来将文件或目录标记为二进制文件，例如

```
$ cat .git/info/attributes 
directory/to/ignore/*.* binary
directory/to/ignore/*/*.* binary
another_directory/to/also/ignore/*.* binary 
```

二进制文件中的匹配项在不包含行的情况下列出，例如

```
$ git grep "bar"
Binary file directory/to/ignore/filename matches
other_directory/other_filename:      foo << bar - bazz[:whatnot] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-20T12:23:12.087

以@kynan 的示例为基础，我制作了这个脚本并将其放在我的路径（`~/bin/`）中 `gg`。它确实使用`git grep`但避免了一些指定的文件类型。

在我们的 repo 中有很多图像，所以我排除了图像文件，如果我搜索整个 repo，这会将 serchtime 降低到 1/3。但是可以轻松修改脚本以排除其他文件类型或geleralpatterns。

```
#!/bin/bash                                                                    
#                                                                              
# Wrapper of git-grep that excludes certain filetypes.                         
# NOTE: The filetypes to exclude is hardcoded for my specific needs.           
#                                                                              
# The basic setup of this script is from here:                                 
#   https://stackoverflow.com/a/14226610/42580                                  
# But there is issues with giving extra path information to the script         
# therefor I crafted the while-thing that moves path-parts to the other side   
# of the '--'.                                                                 

# Declare the filetypes to ignore here                                         
EXCLUDES="png xcf jpg jpeg pdf ps"                                             

# Rebuild the list of fileendings to a good regexp                             
EXCLUDES=`echo $EXCLUDES | sed -e 's/ /\\\|/g' -e 's/.*/\\\.\\\(\0\\\)/'`      

# Store the stuff that is moved from the arguments.                            
moved=                                                                         

# If git-grep returns this "fatal..." then move the last element of the        
# arg-list to the list of files to search.                                     
err="fatal: bad flag '--' used after filename"                                 
while [ "$err" = "fatal: bad flag '--' used after filename" ]; do              
    {                                                                          
        err=$(git grep "$@" -- `git ls-files $moved | grep -iv "$EXCLUDES"` \  
            2>&1 1>&3-)                                                        
    } 3>&1                                                                     

    # The rest of the code in this loop is here to move the last argument in   
    # the arglist to a separate list $moved. I had issues with whitespace in   
    # the search-string, so this is loosely based on:                          
    #   http://www.linuxjournal.com/content/bash-preserving-whitespace-using-set-and-eval
    x=1                                                                        
    items=                                                                     
    for i in "$@"; do                                                          
        if [ $x -lt $# ]; then                                                 
            items="$items \"$i\""                                              
        else                                                                   
            moved="$i $moved"                                                  
        fi                                                                     
        x=$(($x+1))                                                            
    done                                                                       
    eval set -- $items                                                         
done                                                                           
# Show the error if there was any                                              
echo $err 
```

**注1**

根据[这](https://stackoverflow.com/questions/10978257/extending-git-functionality)一点，应该可以命​​名事物`git-gg`并能够将其称为常规 git 命令，例如：

```
$ git gg searchstring 
```

但我无法让这个工作。我在 my 中创建了脚本`~/bin/`并`git-gg`在`/usr/lib/git-core/`.

**笔记2**

该命令不能成为常规的`sh`git-alias，因为它将在 repo 的根目录中调用。这不是我想要的！

# java - 如何为旧版本的 Eclipse 获取 JRE？

> ID：10423145
> 
> 赞同：0
> 
> 时间：2012-05-02T23:31:52.900
> 
> 标签：java

对于学校作业，我们需要使用 eclipse 3.6。我下载了它，但现在找不到合适的 JRE。它说我应该使用 JavaSE-1.6，但它不在 [这里](http://www.oracle.com/technetwork/java/archive-139210.html)

任何人都知道我在哪里可以找到这个，或者另一个 JRE 版本是否可以完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:37:16.437

JRE 1.6 与 JRE 6 相同

在 1.5 版中，他们开始将它们命名为 5、6、7 等。

所以在那个网站上下载 Java SE 6

JRE 6 最新版本的链接在这里。

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jre-6u31-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html#jre-6u31-oth-JPR)

选择适合您环境的一种。

# javascript - 用于文本渐变的 jQuery 插件

> ID：10423147
> 
> 赞同：1
> 
> 时间：2012-05-02T23:32:04.893
> 
> 标签：javascript, jquery, html, css, font-face

我有一个嵌入字体的文本，它必须有一个垂直渐变，你能提供一个 jQuery 插件吗？我需要保留字体系列、大小和其他属性，并且只添加垂直渐变。

我找到了一个（[http://www.codefocus.ca/goodies/gradienttext](http://www.codefocus.ca/goodies/gradienttext)），但它覆盖了我所有的字体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T19:20:11.917

是的你可以

只需调用 css() 方法再次应用字体

首先，您为什么不在一个 READY 函数中编写两个代码？

其次，解决方案（可能是：））

```
jQuery(document).ready(function($){ // yup, I like to use it this way - safe

    var test1Opts = {
            colors: ['#FFF', '#EB9300'],
            style: 'vertical',
            shadow:             true,
            shadow_color:       '#000000',
            shadow_offset_x:    1,
            shadow_offset_x:    1,
            shadow_blur:        1
        },
        test2Opts = {
            colors: [
                '#FF0000',
                '#FF6600',
                '#CCFF00',
                '#00FF00',
                '#0066FF',
                '#FF00FF'
            ],
            style: 'horizontal'
        }

    $('#test1')
        .gradienttext(test1Opts)
        .css('font-family', 'YOUR CUSTOM FONT NAME')
    //  optionally you can call the following to apply font on all child items
    //  by uncommenting the 2 lines below
    //  .find('*')
    //  .css('font-family', 'YOUR CUSTOM FONT NAME');

    //  you can also use the short "font" syntax, 
    //  if you have a lot of options in your font-face

    $('#test2')
        .gradienttext(test2Opts)
    //  .css('font', 'style weight size/line-height YOUR CUSTOM FONT NAME')
        .css('font', 'normal bold 11px/16px YOUR CUSTOM FONT NAME')
        .find('*')
        .css('font-family', 'YOUR CUSTOM FONT NAME');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:44:52.157

你只需要给你想要的文本一个 id，然后在 jquery 代码中使用这个 id。这里有一个演示：

```
<html>
<head>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="jquery.gradienttext-0.1.min.js"></script>
<style>
    p{ font-size: 30px; }
</style>

<script>

    $(document).ready(function(){
        $('#test1').gradienttext({
            colors: ['#FFF', '#EB9300'],
            style: 'vertical',
            shadow:             true,
            shadow_color:       '#000000',
            shadow_offset_x:    1,
            shadow_offset_x:    1,
            shadow_blur:        1
        });
    });

    $(document).ready(function(){
        $('#test2').gradienttext({
            colors: [
                '#FF0000',
                '#FF6600',
                '#CCFF00',
                '#00FF00',
                '#0066FF',
                '#FF00FF'
            ],
            style: 'horizontal'
        });
    });
</script>
</head>
<body>
        <p id="test1">test 1</p>
        <p id="test2">test 2</p>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:16:27.457

实际上，您可以使用纯 CSS 进行文本渐变。该技术涉及用透明的渐变 PNG 覆盖文本（您也可以使用 CSS3 `linear-gradient`）。

你可以在这里阅读更多：[http ://webdesignerwall.com/tutorials/css-gradient-text-effect](http://webdesignerwall.com/tutorials/css-gradient-text-effect)

`span`您可以使用 JS（或 jQuery）自动执行此操作，而不是在实际标记中添加所需的s。

这种效果根本不会改变字体（@font-face 链接或其他）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-03T00:10:36.813

你可以只使用 css 来做线性渐变。

```
background-image: linear-gradient(bottom, #666666 23%, #908c8c 62%);
background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.23, #666666),
    color-stop(0.62, #908c8c)
); 
```

# javascript - Javascript 代码的内存占用

> ID：10423150
> 
> 赞同：0
> 
> 时间：2012-05-02T23:32:33.877
> 
> 标签：javascript, memory

我有一个较大的 Web 应用程序，它使用 Javascript 继承样式，为每个实例复制每个对象的方法。

谁能告诉我如何估计为每个实例存储每个函数的副本所消耗的内存量？

我看过有助于估计变量使用情况的帖子，但是指令和代码本身呢？

例如：

```
function createAnimal() {
    var self = {};
    self.think = function () {
        consol.log("thinking");
    };
    return self;
}

function createDog () {
    var self = createAnimal();
    self.bark = function () {
        console.log("woof woof");
    };
    return self;
}

var spot = createDog();
var ralph = createDog(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:40:40.787

在 Firefox 中转到 about:memory。在 js 下它列出了内存使用情况：

```
├──19.78 MB (34.58%) -- js
│  ├───9.87 MB (17.25%) -- compartment([System Principal], 0x336e000)
│  │   ├──4.72 MB (08.25%) -- gc-heap
│  │   │  ├──2.33 MB (04.07%) -- objects
│  │   │  ├──1.48 MB (02.58%) -- shapes
│  │   │  ├──0.59 MB (01.03%) -- scripts
│  │   │  └──0.33 MB (00.57%) -- (6 omitted)
│  │   ├──1.18 MB (02.06%) -- script-data
│  │   ├──1.00 MB (01.75%) -- mjit-code
│  │   │  ├──0.92 MB (01.60%) -- method
│  │   │  └──0.08 MB (00.15%) -- (2 omitted)
│  │   ├──0.68 MB (01.19%) -- analysis-temporary
│  │   ├──0.60 MB (01.04%) -- (5 omitted)
│  │   ├──0.48 MB (00.84%) -- object-slots
│  │   ├──0.46 MB (00.81%) -- mjit-data
│  │   ├──0.41 MB (00.72%) -- property-tables
│  │   └──0.34 MB (00.59%) -- string-chars 
```

# django - django-compressor：在调试模式下使用lessc

> ID：10423159
> 
> 赞同：5
> 
> 时间：2012-05-02T23:33:19.383
> 
> 标签：django, less, django-compressor

我不确定我是否做对了，但问题是：

*   我正在使用`django-compressor`预`lessc`处理器
*   一些 LESS 文件具有相对图像 URL。有些是我的，有些是第 3 方库（*例如*Bootstrap）
*   `COMPRESS_ENABLED`什么时候`True`，一切正常
*   当`COMPRESS_ENABLED`is`False`时，`CssAbsoluteFilter`不再运行，这意味着所有相对图像 URL 都保持相对，因此被破坏（因为它们与`CACHE`目录无关）

我可以想出一个“聪明”的目录结构，其中相对路径解析为同一个文件，无论它们来自`CACHE`目录还是来自 LESS 文件目录，但这似乎是一个脆弱的解决方法。

当涉及到 LESS + 时，您通常如何工作`django-compressor`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T21:36:01.803

您可以使用一个简单的解决方法：

```
COMPRESS_PRECOMPILERS = (
    ('text/less', 'path.to.precompilers.LessFilter'),
) 
```

预编译器.py：

```
from compressor.filters.base import CompilerFilter
from compressor.filters.css_default import CssAbsoluteFilter

class LessFilter(CompilerFilter):
    def __init__(self, content, attrs, **kwargs):
        super(LessFilter, self).__init__(content, command='lessc {infile} {outfile}', **kwargs)

    def input(self, **kwargs):
        content = super(LessFilter, self).input(**kwargs)
        return CssAbsoluteFilter(content).input(**kwargs) 
```

请注意，这适用于`COMPRESS_ENABLED = True`和`False`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-06T16:16:45.190

这已在 django-compressor 1.6 中修复。从[变更日志](https://django-compressor.readthedocs.org/en/latest/changelog/)：

```
Apply CssAbsoluteFilter to precompiled css even when compression is disabled 
```

即，即使DEBUG = True，绝对过滤器也会在您的less 文件上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-03T20:55:06.697

如果您使用 django-libsass，过滤器代码如下所示：

```
from compressor.filters.css_default import CssAbsoluteFilter
from django_libsass import SassCompiler

class PatchedSCSSCompiler(SassCompiler):
    def input(self, **kwargs):
        content = super(PatchedSCSSCompiler, self).input(**kwargs)
        return CssAbsoluteFilter(content).input(**kwargs) 
```

然后在您的设置文件中：

```
COMPRESS_PRECOMPILERS = (
    ('text/x-scss', 'path.to.PatchedSCSSCompiler'),
) 
```

# dynamic - 将规则动态插入骆驼流口水组件

> ID：10423160
> 
> 赞同：1
> 
> 时间：2012-05-02T23:33:23.503
> 
> 标签：dynamic, runtime, apache-camel, rules, drools

有没有办法使用 Drools-Camel 组件在运行时插入（和删除）规则？根据这两个你只能插入事实。

[https://issues.jboss.org/browse/JBRULES-2804](https://issues.jboss.org/browse/JBRULES-2804)

[https://github.com/droolsjbpm/droolsjbpm-integration/blob/master/drools-camel/src/test/java/org/drools/camel/component/CamelEndpointActionInsertTest.java](https://github.com/droolsjbpm/droolsjbpm-integration/blob/master/drools-camel/src/test/java/org/drools/camel/component/CamelEndpointActionInsertTest.java)

如果在 drools-camel 组件中不支持执行此操作，还有哪些其他选项可用于在运行时插入和删除规则。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:13:25.730

drools-camel 使用 drools-spring。drools-spring 可以使用`KnowledgeAgent`弹簧配置`KnowledgeBase`从 Guvnor 获取。Guvnor 可用于添加或删除规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:25:03.237

至于这个日期，我找不到在骆驼流口水组件中实现这一目标的方法。

# mysql - 在 VPS 上将 Web 文件和 MySQL 备份到 Amazon S3 的 RAM 高效解决方案是什么？

> ID：10423164
> 
> 赞同：0
> 
> 时间：2012-05-02T23:33:38.433
> 
> 标签：mysql, amazon-s3, backup, vps, database-backups

这是当前的解决方案： [http ://www.tech-problems.com/backup-mysql-and-files-on-amazon-ec2-to-s3/](http://www.tech-problems.com/backup-mysql-and-files-on-amazon-ec2-to-s3/)

我目前正在使用一个使用 cron 每晚运行的 PHP CLI 脚本。问题是在脚本第一次运行之前有 300MB 的 RAM 在使用中，然后在它运行之后 RAM 翻倍到几乎 700MB。Web 文件备份使用的内存最多。脚本运行后，RAM 显示已使用。

任何具有 VPS / 低内存设置的人都可以建议更好 - 更有效 - 替代将 Web 文件和 MySql 数据库备份到 s3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:10:12.470

我建议您选择 CDP 3.0 备份解决方案。我正在使用 CDP 3.0 备份我的所有 VPS 节点（Linux 和 Windows）。它快速、高效并且对您的 VPS 进行增量备份。

# php - 为站点创建配置系统时遇到（警告：非法字符串偏移）

> ID：10423165
> 
> 赞同：3
> 
> 时间：2012-05-02T23:33:45.890
> 
> 标签：php, string, configuration

我喜欢这种配置，因为它更干净，因此我有一个包含以下内容的配置文件：

```
<?php
 $Config['option_1'] = 'some value';
 $Config['option_2'] = 'some value';
 $Config['option_3'] = 'some value';
?> 
```

然后我有一个类，它有一个加载这种配置文件的方法它与 CodeIgniter 加载配置文件的方式非常相似，除了当我包含这个文件时，我得到：

```
Warning: Illegal string offset 'option_1' in 'Path to the config file' on line #.
Warning: Illegal string offset 'option_2' in 'Path to the config file' on line #.
Warning: Illegal string offset 'option_3' in 'Path to the config file' on line #. 
```

等等。你明白了。

我到处搜索如何在站点上使用这种配置系统，但没有结果。因此，如果有人有一个教程或一些文档的链接，那么请帮助我了解它是如何工作的，或者当我使用其中一种方法从类内部需要配置文件时为什么会出现该错误。

笔记。当我将配置文件直接加载到浏览器中时，我没有收到任何错误，并且可以使用“echo $Config['option_1'];”成功回显任何值

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-02T23:35:56.937

如果你这样做

```
var_dump($Config); 
```

你会发现它不像你想象的那样是一个数组。

# android - 重新查询 VS 自定义更新

> ID：10423170
> 
> 赞同：1
> 
> 时间：2012-05-02T23:34:02.380
> 
> 标签：android

我有一个 ViewPager，它的数据来自游标，现在这个游标包含大约 5000 条记录，无论如何，如果用户单击此按钮，我在 ViewPager 的每个页面中都有一个按钮，数据库中的布尔字段应该会更新。所以哪个更好的问题，在每次更新后做一个`requery()`，`Cursor`或者我没有这样做，而是提出了这个解决方案

我定义了一个`Map<Integer,Boolean>` `Integer`：用于记录`_id` `Boolean`：对于将要更新的记录字段的值，此地图最初将开始为空，如果用户单击该按钮，它将从光标中获取字段值并将其翻转并添加该值将 _id 记录到地图，我有一个 HandlerThread，我用它来发布 Runnable 以对表进行真正的更新语句，这就是工作。我的解决方案是否比`requery()`每次更新都要好？

# jquery - 无法在 jQuery 中将点击处理程序附加到 iFrame

> ID：10423173
> 
> 赞同：0
> 
> 时间：2012-05-02T23:34:44.133
> 
> 标签：jquery, iframe

快速小提琴：http: [//jsfiddle.net/RP6WD/](http://jsfiddle.net/RP6WD/)

代码：

```
 $('div').click(function(){
    alert('clicked');        
 }); 
```

问题是，我在页面上有很多 iframe，我需要将点击处理程序附加到，所以我真的无能为力`.contents().get(0);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:59:49.433

我有点新手，但像[这样](http://jsfiddle.net/RP6WD/3/)

```
document.getElementById("<iframe_id>").contentWindow.document.body.onclick = 
function() {
 alert("iframe clicked");
} 
```

# javascript - jQuery每秒在for循环内重复

> ID：10423175
> 
> 赞同：0
> 
> 时间：2012-05-02T23:35:07.827
> 
> 标签：javascript, jquery, html

我有一个`for loop`并且我正在寻找路径。有用！但是，当我单击地图时，它的速度很快。我如何减慢`for loop`喜欢说......每个循环之间的一秒钟内发生的事情？

```
 for (i = 0; i < result.length; ++i) {

        var getCoords = new String(result[i]);
        var finalCoords = getCoords.split(",");
        var finalX = finalCoords[0];
        var finalY = finalCoords[1];

        currX = parseInt(x_block);
        currY = parseInt(y_block);

        moving = true;

        realSpawnX = finalX * 32;
        realSpawnY = finalY * 32;

        context.drawImage(playerImg, realSpawnX, realSpawnY, 32, 32);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:38:04.610

```
function loop(i) {
  ++i;

  your code

  if (i < result.length) {setTimeout("loop("+i+")", 1000); }
} 
```

在某个时候开始循环：

```
loop(0); 
```

**更新：**

[jsfiddle 上的示例](http://jsfiddle.net/snies/reSqc/7/)

**更新 2：**

定义辅助函数循环

```
function loop(i, result_length, payload) {
  if (i < result_length) {
    payload(i);
    ++i;          
    setTimeout(function() {loop(i, result_length, payload);} , 2000);
  }
} 
```

然后在原始循环的位置这样调用：

```
 loop(0, result.length, function(i) {
                getCoords = new String(result[i]);
                finalCoords = getCoords.split(",");
                finalX = finalCoords[0];
                finalY = finalCoords[1];

                currX = parseInt(x_block);
                currY = parseInt(y_block);

                moving = true;

                realSpawnX = finalX * 32;
                realSpawnY = finalY * 32;
                context.drawImage(playerImg, realSpawnX, realSpawnY, 32, 32);
                console.log("Step taken...");
          }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:48:00.840

试试这个：

```
function funcName(counter, end){
    if(counter < end){
        var getCoords = new String(result[i]);
        var finalCoords = getCoords.split(",");
        var finalX = finalCoords[0];
        var finalY = finalCoords[1];

        currX = parseInt(x_block);
        currY = parseInt(y_block);

        moving = true;

        realSpawnX = finalX * 32;
        realSpawnY = finalY * 32;

        context.drawImage(playerImg, realSpawnX, realSpawnY, 32, 32);

        setTimeout(function(){
            funcName(counter+1, end);
        },1000);
    }
    else{
        movingBlocked=false;
    }
}

//use it like this
movingBlocked = true;
funcName(0, result.length);
while(movingBlocked){
    ;//do nothing
} 
```

这是它的一个小提琴[http://jsfiddle.net/qcaYh/](http://jsfiddle.net/qcaYh/)

**更新**：

添加全局和忙碌等待以保持代码同步。这具有在等待移动完成时暂停的效果。

//全局变量movingBlocked = false;

# performance - 将 OpenCV 2.1 与 OpenCV 2.3.2 相结合，以保持 CPU 速度并利用 GPU 执行

> ID：10423176
> 
> 赞同：0
> 
> 时间：2012-05-02T23:35:14.677
> 
> 标签：performance, opencv, gpu

我注意到迁移到 OpenCV 2.3.1 会缩短执行时间。2.1 中基于 C 的代码运行速度比 2.3.1 等效的要快得多。我需要一种将两组代码组合到同一个 exe 中的方法。我曾尝试使用不同的库并尝试包装问题，但链接器会看到常见符号并显示错误。有没有人尝试过这样做，或者我应该接受 2.3.1 并将我的算法放入 GPU 并在那里运行它们以获得性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:43:29.403

从 2.1 -> 2.3.1 显着放缓的可能性很小，通常每个版本的速度都有所提高。

您确定您正确使用 2.3.1 吗？您是否使用 TBB 构建它（在 2.0 和 2.3 之间的某个地方，他们通过 OMP 切换到 TBB 以进行多线程）。您是否链接到调试版本？

发行版中有一组性能测量测试，您可以使用它来检查哪些（如果有）功能会降低您的速度。

# javascript - 返回的 Ajax 响应说明其属性值未定义

> ID：10423183
> 
> 赞同：0
> 
> 时间：2012-05-02T23:36:00.763
> 
> 标签：javascript, jquery, ajax

我有 2 个 JS 文件，一个包含要在多个名为“form.js”的文件之间共享的通用函数列表，另一个特定于我的 CMS 上的某个页面，名为“blog.form.js”。

在“form.js”中，我有一个通用的 JS 函数，每当我请求从数据库加载记录时，它都会发出 jQuery.ajax() 请求：

```
function load_record( field_id, class_name, entity_type ) {

// Send ajax request to load the record, and enable the form's state once the record's content has been received.
var response = $.ajax({
    async: false,
    dataType: "json",
    data: {
        action: "load_"+entity_type,
        id: $("#"+field_id+"_list").val()
    },
    success: function(response) {
        // Make visible the buttons to allow actions on record, such as deleting or renaming.
        $("#"+field_id+"_actions").show();

        // Make visible the container of all form elements related to the record.
        $("#"+field_id+"_form_inputs").show();

        // Must return response so the calling JS file can use the values returned to
        // populate the form inputs associated with the record that's just been loaded
        // with the correct values.
        return response;
    },
    type: "post",
    url: "/ajax/record/"+class_name
});
alert( response.link + " " + response + " " + response.responseText);
return response; 
```

}

在“blog.form.js”中，当我从包含它们列表的菜单中选择要加载的数据库记录时，我调用了函数：

```
// Select a link for editing.
$("#links_list").live( "change", function(){ 
    // Insert response returned from function call to load the db record into a variable.
    // This is so the form inputs associated with the record loaded can be populated with the correct values. 
    var response = load_record('links_edit', 'blog', 'link'); 
    alert( response.link );
    $("#links_edit_url").val( response.link );        
}); 
```

ajax 请求返回所需的响应。不幸的是，load_record() 中的调试警报语句“alert( response.link + " " + response + " " + response.responseText)" 返回以下内容： undefined [Object XMLHTTPRequest] {"link": "http://www .url.com”}。

因此，另一个函数中的调试警报语句“alert(response.link)”也返回未定义。

成功返回一个 XMLHTTPRequest 对象。那么，为什么 response.link 声明它的值是未定义的呢？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:36:58.043

你想做

`alert( response.link + " " + response + " " + response.responseText);`

**成功函数内部**。你也不想要

`var response = $.ajax(...`

你只需调用ajax ...

`$.ajax(...`

Ajax 是异步的（除非您告诉它不异步），这意味着请求可以随时返回。尝试在函数外部使用响应是没有意义的`success`（除非您在它周围包裹一个闭包或将其作为参数传递）。 `success`响应完成（成功）时触发，仅在该函数`response`中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:50:11.783

您完全在正确的轨道上，您可以创建一个返回 ajax 对象的函数。jQuery 将该 ajax 调用作为[Deferred](http://api.jquery.com/category/deferred-object/)对象返回 - 因此它有额外的方法可以在事后利用 ajax 响应。

```
$("#links_list").live( "change", function(){ 
    load_record('links_edit', 'blog', 'link').done( function( response ) {
        alert( response.link );
        $("#links_edit_url").val( response.link );     
    });
}); 
```

除非您将其添加到成功或完成处理程序中，否则`alert( response.link + " " + response + " " + response.responseText);`in将继续返回。`load_record`

如果您需要更多关于`.done()`真正内容的信息，请查看 jquerys 网站上的 Deferreds 以及上面的链接。我希望这有帮助。

# wolfram-mathematica - 横截面 - Mathematica

> ID：10423185
> 
> 赞同：4
> 
> 时间：2012-05-02T23:36:24.753
> 
> 标签：wolfram-mathematica

如果您有 Mathematica 和输入：

```
ParametricPlot3D[{Sin[u], Sin[v], Sin[u + v]}, {u, 0, 2 Pi}, {v, 0, 2 Pi] 
```

您将生成一个 3D 实体，它看起来像一个侧面被压碎的立方体。我想要做的是用水平面截取这个实体的横截面：`z = 0`、`z = 1`、`z= -1`、`z= 1/2`和`z= -1/2`。

生成这些横截面图的命令是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T02:52:33.113

这可以通过指定 a 来完成`RegionFunction`，这是一个布尔条件，用于确定允许在何处绘制曲面。在这里，您将使用

```
RegionFunction -> Function[{x, y, z}, z < a] 
```

`a`您希望相交平面的高度在哪里。为了说明这一点，我将制作一部电影：

```
t = Table[
  ParametricPlot3D[{Sin[u], Sin[v], Sin[u + v]}, {u, 0, 2 Pi}, {v, 0, 
    2 Pi}, RegionFunction -> Function[{x, y, z}, z < a], 
   PlotRange -> {{-1, 1}, {-1, 1}, {-1, 1}}], 
 {a, 1, -1, -.1}
] 
```

现在我将其导出为`GIF`动画以包含在以下内容中：

```
Export["section.gif", Join[t, Rest[Reverse[t]]]] 
```

![部分](../Images/f6ffc8a3fb4c79b88c2bd8f3ebdda820.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T08:09:07.053

要获得相交曲线，您可以使用`MeshFunctions`and`Mesh`选项，例如

```
ParametricPlot3D[{Sin[u], Sin[v], Sin[u + v]}, {u, 0, 2 Pi}, {v, 0, 2 Pi},
 MeshFunctions -> {#3 &}, Mesh -> {Range[-1, 1, 1/2]}, 
 PlotStyle -> None, PlotPoints -> 50] 
```

![数学图形](../Images/458de9577eba28acd178d2a6660dcbb4.png)

# linux - Linux 中 Perl 的 sysread 开销

> ID：10423187
> 
> 赞同：0
> 
> 时间：2012-05-02T23:36:33.443
> 
> 标签：linux, perl

我有一个网络守护程序，它在 TCP 套接字上接收固定长度（44 字节）的消息。

我正在尝试确定我应该使用 sysread 读取的最佳字节长度是多少。我当然可以做一个 sysread 44 字节的循环，但我想提出一个最佳大小。

我可以看到一个优势，而不是说，一个兆字节的数据来做 substr ，但我也可以看到为什么做一千个 sysread 调用会导致缓慢。

在公共互联网上进行 sysreads 是否有合适的大小推荐？

编辑：脚本得到一堆 44 字节的消息，它们被排队。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:10:55.913

越大越好！`sysread`将在任何字节可用时立即返回。

由于您永远无法保证收到完整的消息，并且您永远无法保证不会收到超过一条消息，因此您需要在 Perl 端有一个循环。由于您在 Perl 端已经有一个循环，因此您不妨一次性从系统中获取尽可能多的数据，以避免不必要的系统调用。

```
use constant READ_SIZE => 65*1024;

my $buf = '';
while (1) {
   my $rv = sysread($fh, $buf, READ_SIZE, length($buf));
   die if !defined($rv);
   last if !$rv;

   while ($buf =~ s/^(.{44})//s) {
      my $msg = $1;
      process_msg($msg);
   }
} 
```

选择一个尺寸和显示器`$buf`的尺寸。如果它经常接近`READ_SIZE`，增加`READ_SIZE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:48:03.983

我不确定开销是多少，只有你可以衡量一个是否比另一个快，但如果我要尝试从晴朗的蓝天中选择一个大小，我会先使用`4092`字节。这使您最多可以处理 93 条消息，并且它在神奇的 4Kb 大小之下，这听起来是一个不错的起点。

您可以在程序运行的系统上找出[页面大小，并进行相应调整。](http://en.wikipedia.org/wiki/Page_%28computer_memory%29#Unix_and_POSIX-based_operating_systems)我会先`int(PAGE_SIZE / MESSAGE_SIZE)`看看每条消息的性能是否优于一个`sysread`。

另一方面，[`perl`默认使用 8KB 缓冲区](http://perl5.git.perl.org/perl.git/blob/dc281e6088d189558b79a5121119b7196c8b3db0:/perlio.h#l192)：

```
 192 /* The default buffer size for the perlio buffering layer */
 193 #ifndef PERLIOBUF_DEFAULT_BUFSIZ
 194 #define PERLIOBUF_DEFAULT_BUFSIZ (BUFSIZ > 8192 ? BUFSIZ : 8192)
 195 #endif 
```

您可能还会发现[导致更改](http://www.nntp.perl.org/group/perl.perl5.porters/2010/11/msg165785.html)信息的讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:01:36.083

系统调用不会复制未传输的字节。如果你有一个 44 字节的消息 perl 将总是返回一个 44 字节的字符串。您提供的大小只是一个最大值，用于确定提供给内核的缓冲区大小。提供超过 44 个字节的价值在于，如果排队的消息不止一条，您将在一个系统调用中将它们全部获取。

# jquery - jQuery Validation Plugin - 挑战你解决这个问题（帮助？）

> ID：10423196
> 
> 赞同：-1
> 
> 时间：2012-05-02T23:37:33.823
> 
> 标签：jquery, validation, jquery-validate

很简单，为什么这不起作用......？jQuery 1.6.2 也包含在头部中，在此之上。它没有触发验证，现在它只是直接通过并说“已提交”，甚至没有验证字段。

头部验证：

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/additional-methods.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
$("#newcontract").validate({
    rules: {
        rec_name: {
            required: true
        }
    },
    messages: {
        rec_name: {
            required: 'You need to enter a contract receiver.'
        }
    },
    submitHandler: function() { 
    alert("Submitted!"); }
});
});
</script> 
```

表单被命名为 newcontract，所以我缺少什么：

```
<form name="newcontract" id="newcontract" method="post">
    <input type="text" name="rec_name" id="rec_name" size="42" class="required"/>
    <tr><td class="submit" colspan="3"><input type="submit" name="savelisting" id="savelisting" value="Save New Contract" /></td></tr>
</form> 
```

这是怎么回事？它不会验证此文本字段。帮助！！

**更新：上面的代码按预期工作。问题在于我删除了一个包装表单的表格，并且验证插件正在跳过表单。一旦我将表单移到我的 HTML 中的表格之外，它就可以正常工作。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:04:51.460

错误使用*tr*标签。

```
<form name="newcontract" id="newcontract" method="post">
<input type="text" name="rec_name" id="rec_name" size="42" class="required"/>
<p class="submit"><input type="submit" name="savelisting" id="savelisting" value="Save New Contract" /></p>
</form> 
```

第一步，制作正确的html表单。

# mysql - MySQL - 错误 1045，访问被拒绝

> ID：10423198
> 
> 赞同：1
> 
> 时间：2012-05-02T23:38:17.393
> 
> 标签：mysql, mamp

**编辑**：通过创建修复它`'fakaff'@'localhost'`。

* * *

第一次使用 MySQL，使用最新的 MAMP 安装。按照教程，我首先创建了一个数据库：

```
CREATE publications; USE publications; 
```

接下来，我创建了一个用户。我尝试了两种变体，但都给了我`ERROR 1045`：

```
GRANT ALL ON publications.* TO 'fakaff' IDENTIFIED BY '12345'; 
```

和

```
GRANT ALL ON publications.* TO 'fakaff@localhost' IDENTIFIED BY '12345'; 
//edit: clearly I screwed up the syntax here so it didn't work. 
```

当我尝试登录并输入密码时，我收到以下消息：

```
/Applications/MAMP/Library/bin/mysqp -u fakaff -p 
```

我得到：

```
ERROR 1045 (28000): Access denied for user 'fakaff'@'localhost' (using password: YES) 
```

* * *

知道是什么导致了错误吗？我没有玩过任何设置，也没有输入我列出的命令以外的任何命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:41:28.393

尝试“刷新特权”。要么就是这样，要么您不允许远程访问，但是由于这是本地的，因此不应该是这种情况。

# android - 在 textview 上生成 1 到 100 之间的随机数的按钮

> ID：10423209
> 
> 赞同：1
> 
> 时间：2012-05-02T23:39:57.607
> 
> 标签：android

对于那些在 android 编码领域待了很长时间的人来说，这是一个简单的问题！我做过研究，关于这个问题的研究。试过了，但是运行应用程序时总是出错。

问题是，我如何制作一个按钮，在 textview 上显示 1 到 100 之间的随机数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T23:43:19.630

```
final Random r = new Random();
Button b = (Button) findViewById(R.id.button1);
b.setOnClickListener(new View.onClickListener(){
    public void onClick(...){
        textView.setText(Integer.toString(r.nextInt(100)+1));
    }    
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:08:33.440

这是一些可能有帮助的示例代码。

```
public class SampleActivity extends Activity {

    private TextView displayRandInt;
    private Button updateRandInt;

    private static final Random rand = new Random();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(/* Your Activity's XML layout id */);

        /* Setup your Activity */

        // Find the views (their ids should be specified in the XML layout file)
        displayRandInt = (TextView) findViewById(R.id.displayRandInt);
        updateRandInt = (Button) findViewById(R.id.updateRandInt);

        // Give the Button an onClickListener
        updateRandInt.setOnClickListener(new View.onClickListener() {
            public void onClick(View v) {
                int randInt = rand.nextInt(100)+1;
                displayRandInt.setText(String.valueOf(randInt));
            }
        });
    }
} 
```

# opengl - 高效的 OpenGL 纹理加载 gxbase

> ID：10423210
> 
> 赞同：0
> 
> 时间：2012-05-02T23:40:01.630
> 
> 标签：opengl, loading, textures

使用 OpenGL 并使用 GxBase 我正在加载我的纹理。

```
if (Image.Load("ball.jpg"))
{
    Image.FlipY();
    glBindTexture(GL_TEXTURE_2D, MyTexture[0]);
    Image.gluBuild2DMipmaps();
} 
```

如何确保不会两次加载相同的纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:08:56.483

我从未使用过 GxBase，但我只是维护一个将文件名映射到纹理 ID（字符串到 GLuints）的映射

当你去加载一个新的时，首先查看地图，如果它在那里，返回纹理 id 而不是再次加载它。否则加载它，然后保存生成的纹理id

尝试类似：

```
std::map<std::string,GLuint> textures;
...

// Inside your method to load textures:

if (textures.count(textureName) == 0)
{
    // load texture
    textures[textureName] = // the GLuint texture id
}
else
{
    return textures[textureName];
} 
```

# mysql - SQL根据连续日期获取值的变化

> ID：10423217
> 
> 赞同：3
> 
> 时间：2012-05-02T23:40:44.783
> 
> 标签：mysql, sql, date, join

我想每天获得价格的变化。什么 SQL 查询将完成此任务？

原始表

```
Date       Company    Price
---------------------------
1/4/2012   Apple      458
1/3/2012   Apple      462
1/2/2012   Apple      451
1/1/2012   Apple      450 
```

所需表

```
Date       Company    Price   Day_Change
-------------------------------------
1/4/2012   Apple      458     -4    
1/3/2012   Apple      462     9
1/2/2012   Apple      451     1
1/1/2012   Apple      450     NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:43:15.030

将表连接到自身以获取公司昨天的价格，然后从今天的价格中减去它

```
select
    t1.date,
    t1.company,
    t1.price,
    t1.price - t2.price as day_change
from price_table t1
left join price_table t2 
    on t2.date = subdate(t1.date, 1)
    and t2.company = t1.company 
```

在此之后，您可以添加一个普通`where`子句，例如`where t1.date > subdate(current_date(), 7)`获取最近 7 天的价格

仅供参考`day_change`，`NULL`如果昨天的价格没有一行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:19:44.500

另一种方法，即使在不连续的日期也可以工作：

源数据：

```
CREATE TABLE fluctuate
    (Date datetime, Company varchar(10), Price int);

INSERT INTO fluctuate
    (Date, Company, Price)
VALUES
    ('2012-01-04 00:00:00', 'Apple', 458),
    ('2012-01-03 00:00:00', 'Apple', 462),
    ('2012-01-02 00:00:00', 'Apple', 451),
    ('2012-01-01 00:00:00', 'Apple', 450),
    ('2012-01-01 00:00:00', 'Microsoft', 1),
    ('2012-01-03 00:00:00', 'Microsoft', 7),
    ('2012-01-05 00:00:00', 'Microsoft', 5),
    ('2012-01-07 00:00:00', 'Microsoft', 8),
    ('2012-01-08 00:00:00', 'Microsoft', 12); 
```

输出：

```
DATE                       COMPANY             PRICE               DAY_CHANGE
January, 04 2012           Apple               458                 -4
January, 03 2012           Apple               462                 11
January, 02 2012           Apple               451                 1
January, 01 2012           Apple               450                 NULL
January, 08 2012           Microsoft           12                  4
January, 07 2012           Microsoft           8                   3
January, 05 2012           Microsoft           5                   -2
January, 03 2012           Microsoft           7                   6
January, 01 2012           Microsoft           1                   NULL 
```

询问：

```
select 

date, 
company, 
price, 
day_change

from
(    
  select 

     case when company <> @original_company then 
         -- new company detected, 
         -- reset the original price based on the new company
         @original_price := null
     end,
    f.*,
    price - @original_price as day_change,
    (@original_price := price),
    (@original_company := company)

  from fluctuate f

  cross join
  (
    select 
     @original_price := null,
     @original_company := company
     from fluctuate 
     order by company, date limit 1
  )
  as zzz

  order by company, date 

) as yyy
order by company, date desc 
```

来源：[http ://www.sqlfiddle.com/#!2/56de3/3](http://www.sqlfiddle.com/#!2/56de3/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:06:10.117

@Bohemian 的回答是正确的，将返回自*前一天*以来的价格差异，但实际上我怀疑您实际上会想要自前一天交易以来的价格差异（可能跨越周末、公共假期等）。

要做到这一点，必须首先使用子查询来确定每家公司交易的最后一天（个别公司可以暂停交易，或者可能在不同的市场交易受不同的假期）；然后使用该`(date,company)`对查找最后的价格...

```
SELECT current.*, current.Price - previous.Price AS Day_Change
FROM (
    SELECT yourtable.*, MAX(before.Date) AS prevDate
    FROM
           yourtable
      JOIN yourtable AS before
            ON before.Date    < yourtable.Date
           AND before.Company = yourtable.Company
    GROUP BY yourtable.Date, yourtable.Company
  ) AS current
  JOIN yourtable AS previous
        ON previous.Date   = current.prevDate
       AND previous.Company= current.Company 
```

# c# - 如何创建可以处理或强制转换未知类型的 lambda 表达式？

> ID：10423221
> 
> 赞同：3
> 
> 时间：2012-05-02T23:41:06.240
> 
> 标签：c#, casting, lambda, propertyinfo, setvalue

如何为可以处理未知类型的函数创建 lambda 表达式？抱歉，我知道这个问题很模糊，我很难形成它。我只能希望你有一点时间通读我的故事，这应该会让事情变得更清楚。

我的目标是使用预定义的数据协定将字符串值数组反序列化为对象。数据合约的成员有一个职位编号。反序列化器的简单工作是将值映射到数据成员（在进行适当的类型转换之后），并构建对象。

问题是反序列化性能很糟糕！运行 VS Profiler 后，我发现用于填充对象成员的 PropertyInfo.SetValue() 占用的时间最多。我的程序必须在任何给定时间反序列化数千个对象。一个数据合约通常有 100 个成员。因此，我们正在为每 1000 个对象调用 100,000 次 SetValue() 调用，并且它正在拖动。下面是调用 SetValue 的示例：

```
// for each data contract type
// go through each property and set the value
foreach(PropertyInfo pi in pis)
{
    object data = convertStringToMemberType(pi, attributeArray, valueStringArray);
    pi.SetValue(objectToBuild, data, null);
} 
```

然后我[从 Unknown Recipes 找到了这个页面](http://weblogs.asp.net/marianor/archive/2009/04/10/using-expression-trees-to-get-property-getter-and-setters.aspx)，它对这个性能问题有一个很有前途的解决方案。看起来我需要使用已编译的 lambda 表达式来替换 SetValue，但我遇到了转换问题。按照上面链接中的示例，我现在可以替换 SetValue()。替换的是动作委托，它们是编译的 lambda 表达式。

首先，我扩展了 PropertyInfo 类。

```
public static class PropertyInfoExtensions
{

    public static Action<object, object> GetValueSetter(this PropertyInfo propertyInfo)
    {
        var instance = Expression.Parameter(propertyInfo.DeclaringType, "i");
        var argument = Expression.Parameter(typeof(object), "a");
        var setterCall = Expression.Call(
            instance,
            propertyInfo.GetSetMethod(),
            Expression.Convert(argument, propertyInfo.PropertyType));
        return (Action<object, object>)Expression.Lambda(setterCall, instance, argument).Compile();
    }
} 
```

然后我构建了一个`Dictionary<PropertyInfo, Action<object, object>`对象，它将每个 propertyInfo 对象与其对应的 Action 委托联系起来。这样我可以“缓存”编译的 lambda 并在一批反序列化中重用它。这就是我现在所说的：

```
foreach(PropertyInfo pi in pis)
{
    object data = convertStringToMemberType(pi, attributeArray, valueStringArray);
    var setValueDelegate = _actionDelegateDict[pi];
    setValueDelegate(objectToBuild, data);
} 
```

但是，我收到以下异常：

```
Unable to cast object of type 'System.Action`2[Test.DataContract1,System.Object]' to type 'System.Action`2[System.Object,System.Object]'. 
```

这里 DataContract1 是我要构建的对象的类型。它仅在运行时已知，这与 Unknown Recipes 示例中的场景不同，其中类型在编译时已知。你将如何使这个 lambda 表达式工作？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:43:08.553

听起来很像我对[FastReflection](https://github.com/darrenkopp/FastReflection)库所做的事情。您几乎就在那里，您只需将实例参数更改为对象类型，然后将该表达式强制转换为实际类型。

我认为您现在拥有的代码如果更改为此将起作用。

```
public static class PropertyInfoExtensions
{
    public static Action<object, object> GetValueSetter(this PropertyInfo propertyInfo)
    {
        var instance = Expression.Parameter(typeof(object), "i");
        var argument = Expression.Parameter(typeof(object), "a");
        var setterCall = Expression.Call(
            Expression.Convert(instance, propertyInfo.DeclaringType),
            propertyInfo.GetSetMethod(),
            Expression.Convert(argument, propertyInfo.PropertyType));
        return Expression.Lambda<Action<object,object>>(setterCall, instance, argument).Compile();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T00:46:04.823

想象一下，您是直接创建这个 lambda，而不是使用`Expression`s。那会是什么样子？您要创建`Action<object, object>`：

```
Action<object, object> action = (object i, object a) => i.Property = a; 
```

但这不起作用，您需要同时转换`i`and `a`。所以：

```
Action<object, object> action =
    (object i, object a) => ((DataContract)i).Property = (PropertyType)a; 
```

在您的代码中，您正在强制转换`a`，但您也需要强制转换`i`：

```
public static Action<object, object> GetValueSetter(this PropertyInfo propertyInfo)
{
    var instance = Expression.Parameter(typeof(object), "i");
    var argument = Expression.Parameter(typeof(object), "a");
    var setterCall = Expression.Call(
        Expression.Convert(instance, propertyInfo.DeclaringType),
        propertyInfo.GetSetMethod(),
        Expression.Convert(argument, propertyInfo.PropertyType));
    return (Action<object, object>)Expression.Lambda(setterCall, instance, argument).Compile();
} 
```

# c# - 发布到 ReCAPTCHA

> ID：10423225
> 
> 赞同：4
> 
> 时间：2012-05-02T23:41:33.080
> 
> 标签：c#, asp.net-mvc, post, recaptcha

我正在尝试发布以从 c# 代码中重新捕获。

```
 var data = new NameValueCollection
        {
            { "privatekey", "my key" },
            { "remoteip ", "" },
            { "challenge ", model.recaptcha_challenge_field },
            { "response ", model.recaptcha_response_field }
        };

        using (var client = new WebClient())
        {

            var response = client.UploadValues("http://www.google.com/recaptcha/api/verify", data: data);

            var result = ASCIIEncoding.ASCII.GetString(response);

        } 
```

当我这样做时，结果正在返回

```
false invalid-request-cookie 
```

我需要设置远程IP吗？还有什么问题？

**更新**

[https://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)说错误意味着：

> [https://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)

页面html的值如下：

```
<INPUT id=recaptcha_challenge_field value=03AHJ_VusdI2SY_P2iM3VICgLmOw-7CE7F6zmOwvwfya4L8Jeiok_rCwVmHFJwJHxlelhp8By_QTA7SNF58fwijij5rxBLqgpoI3nuWy6S0HGL7U7lk_35aazPfaMyVwbeWuWJyxJ0DqjwDwrByD4AY70O0qlaTnCUxQ type=hidden name=recaptcha_challenge_field /> 
```

在我发回的对象中，如下所示：

`“recaptcha_challenge_field=03AHJ_VusdI2SY_P2iM3VICgLmOw-7CE7F6zmOwvwfya4L8Jeiok_rCwVmHFJwJHxlelhp8By_QTA7SNF58fwijij5rxBLqgpoI3nuWy6S0HGL7U7lk_35aazPfaMyVwbeWuWJyxJ0DqjwDwrByD4AY70O0qlaTnCUxQ&recaptcha_response_field=re`嗯+很多”

当我在服务器上得到它时，值是

```
03AHJ_VusdI2SY_P2iM3VICgLmOw-7CE7F6zmOwvwfya4L8Jeiok_rCwVmHFJwJHxlelhp8By_QTA7SNF58fwijij5rxBLqgpoI3nuWy6S0HGL7U7lk_35aazPfaMyVwbeWuWJyxJ0DqjwDwrByD4AY70O0qlaTnCUxQ 
```

因此，如果我们将所有 3 个值并排放置，我们将得到：

```
03AHJ_VusdI2SY_P2iM3VICgLmOw-7CE7F6zmOwvwfya4L8Jeiok_rCwVmHFJwJHxlelhp8By_QTA7SNF58fwijij5rxBLqgpoI3nuWy6S0HGL7U7lk_35aazPfaMyVwbeWuWJyxJ0DqjwDwrByD4AY70O0qlaTnCUxQ 
03AHJ_VusdI2SY_P2iM3VICgLmOw-7CE7F6zmOwvwfya4L8Jeiok_rCwVmHFJwJHxlelhp8By_QTA7SNF58fwijij5rxBLqgpoI3nuWy6S0HGL7U7lk_35aazPfaMyVwbeWuWJyxJ0DqjwDwrByD4AY70O0qlaTnCUxQ 
03AHJ_VusdI2SY_P2iM3VICgLmOw-7CE7F6zmOwvwfya4L8Jeiok_rCwVmHFJwJHxlelhp8By_QTA7SNF58fwijij5rxBLqgpoI3nuWy6S0HGL7U7lk_35aazPfaMyVwbeWuWJyxJ0DqjwDwrByD4AY70O0qlaTnCUxQ 
```

通过调用以下命令生成页面上的重新捕获：

```
Recaptcha.create("pub key",
    "myDiv",
    {
        theme: "clean",
        callback: Recaptcha.focus_response_field
    }
  ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T07:26:07.747

您在 remoteip、challenge 和 response 参数中留有空格。它应该是

```
var data = new NameValueCollection
        {
            { "privatekey", "my key" },
            { "remoteip", "192.168.1.111" },
            { "challenge", model.recaptcha_challenge_field },
            { "response", model.recaptcha_response_field }
        }; 
```

还需要 IP 地址，但您得到的当前错误是因为参数中的前导空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:35:30.920

reCAPTCHA 规范明确指出确实**需要**“remoteip”参数：

[https://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)

# excel - 如何从作为选定单元格内容的名称列表中创建多个工作表

> ID：10423228
> 
> 赞同：4
> 
> 时间：2012-05-02T23:42:38.690
> 
> 标签：excel, vba

实际上，我只需要帮助提供一些有关 Excel VBA 的课程，而不是代码。

**问题**：

![在此处输入图像描述](../Images/b7d620fb578504d4a8a4a5be9bdf9080.png)

主线代码很基础，虽然没有VBA经验，但我懂

```
Sheets.Add().Name = Name_of_Sheet 
```

如果我定义一个名称列表，`NameList =Array("SheetA", "SheetB", "SheetC","SheetD")`那么执行 for 循环

```
 For I = LBound(NameList) To UBound(NameList) 
    Sheets.Add().Name = Tabs(I) 
 Next I 
```

但是，很多时候，表格命名是有标准的，去Visual Basic编辑宏效率不是很高。我想从单元格的内容创建工作表

**我的问题**：

1）所选数据（一维列、一维行或多行x多列）的索引如何工作？

2) 如何访问这些单元格的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T03:39:36.027

你的问题很开放。这是解决“一维列”方面的开始。有很多方法可以做到这一点，但我已经包含了几个基本的 VBA 结构，比如`For Each`和`With/End With`. 您可以轻松地将变量指向其他工作簿、工作表或单元格。它有一些错误处理来解决尝试使用已经存在的工作表名称：

```
Sub AddSheets()
Dim cell As Excel.Range
Dim wsWithSheetNames As Excel.Worksheet
Dim wbToAddSheetsTo As Excel.Workbook

Set wsWithSheetNames = ActiveSheet
Set wbToAddSheetsTo = ActiveWorkbook
For Each cell In wsWithSheetNames.Range("A2:A5")
    With wbToAddSheetsTo
        .Sheets.Add after:=.Sheets(.Sheets.Count)
        On Error Resume Next
        ActiveSheet.Name = cell.Value
        If Err.Number = 1004 Then
          Debug.Print cell.Value & " already used as a sheet name"
        End If
        On Error GoTo 0
    End With
Next cell
End Sub 
```

另一种方法是将单元格内容加载到一个数组中，如果它实际上是二维的（并且如果有大量的名称），这可能很有用，但它也可能是矫枉过正的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T06:35:20.743

谢谢道格，这很棒。轻微修改以避免重新命名范围：

```
 'select list range before running procedure
Sub AddSheets()
Dim cell As Excel.Range
Dim wbToAddSheetsTo As Excel.Workbook

Set wbToAddSheetsTo = ActiveWorkbook
For Each cell In Selection
    With wbToAddSheetsTo
        .Sheets.Add after:=.Sheets(.Sheets.Count)
        On Error Resume Next
        ActiveSheet.Name = cell.Value
        If Err.Number = 1004 Then
          Debug.Print cell.Value & " already used as a sheet name"
        End If
        On Error GoTo 0
    End With
Next cell
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-29T22:02:55.160

我用它来满足我的需要：

```
Sub C_CreateEmptySheets()
    Dim MyCell As Range, MyRange As Range

    'This Macro will create separate tabs based on a list in Distribution Tab A2 down

    Set MyRange = Sheets("Distribution").Range("A2")
    Set MyRange = Range(MyRange, MyRange.End(xlDown))

    Application.Calculation = xlCalculationManual
    Application.ScreenUpdating = False
    Application.DisplayAlerts = False

    For Each MyCell In MyRange
        Sheets.Add After:=Sheets(Sheets.Count) 'creates a new worksheet
        Sheets(Sheets.Count).Name = MyCell.Value ' renames the new worksheet
    Next MyCell

    Application.Calculation = xlCalculationAutomatic
    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
End Sub 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-09-21T09:44:57.460

```
with sheets
     .add.name="SheetA"
     .add.name="SheetB"
     .add.name="Sheetc"
end with 
```

# html - HTML 列表项是否应该包含 标签？

> ID：10423235
> 
> 赞同：3
> 
> 时间：2012-05-02T23:43:16.100
> 
> 标签：html, html-lists, html-heading

我试图弄清楚这是否是好的编码风格。我知道它是有效的，至少在 HTML5 下是有效的，但我想知道它的语义是否符合我的意图。

```
<ol>
  <li>
    <h2>The First Item</h2>
    <p>a descriptive paragraph</p>
  </li>
  <li>
    <h2>The Second Item</h2>
    <p>a descriptive paragraph</p>
  </li>
  <li>
    <h2>The Third Item</h2>
    <p>a descriptive paragraph</p>
  </li>
</ol> 
```

我使用的是有序列表，因为这些项目在逻辑上是按顺序排列的，但每个项目似乎都应该有一个标题。从语义上讲，这段代码有意义吗？我应该使用其他类型的标签来表示列表项的标题吗？我应该完全丢弃列表而*只*使用标题标签吗？这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T03:38:56.693

它在任何版本的 HTML 中都有效。但有效性是一个正式的概念，也允许各种胡说八道。

在实践中，[`ol`表示项目的编号列表](http://www.cs.tut.fi/~jkorpela/html/ul-ol.html)。它不是一个列表的抽象概念，一个有序的序列。例如，一个段落在逻辑上是一个语句序列，连续的段落构成更高层次的序列。甚至一个单词的字母也是一个有序的序列。我们仍然不使用`ol`它们。我们使用`ol`浏览器生成的编号来列出相当短的项目的逐项列表，例如食谱或购物清单或支持想法的参数列表。项目的长度没有具体的上限，除非它们越长，就越不适合以编号列表的形式呈现。

因此，如果您的列表项需要标题，那么您不应该使用列表。在实际方面，如果您用作 a 中的第一个`h2`元素，则默认情况下，项目编号将以比标题小得多的字体显示（并且以正常重量显示，而不是粗体）。每当默认呈现非常奇怪时，您应该问自己是否正在使用 HTML 标记的*真正*用途。`li``ol`

 *该示例由以标题开头的段落组成。除了 or 之外，没有任何实际或理论上的理由为什么它应该具有标记`h2`，`p`除非出于样式或脚本的目的，您需要将标题和段落的组合视为一个单元，或将整个构造视为一个单元。如果您需要，请使用`div`，例如

```
<div class="foo">
  <div class="bar">
    <h2>The First Item</h2>
    <p>a descriptive paragraph</p>
  </div>
  <div class="bar">
    <h2>The Second Item</h2>
    <p>a descriptive paragraph</p>
  </div>
  <div class="bar">
    <h2>The Third Item</h2>
    <p>a descriptive paragraph</p>
  </div>
</div> 
```

将`foo`and替换`bar`为反映内容的名称，或替换为和 等通用`section`名称`subsection`。（这部分取决于品味和编码风格，部分取决于您是否打算对具有不同含义的内容使用类似的标记。）

或者，您可以`section`按照 HTML5 草案使用标记，但这会导致问题，因为一些旧浏览器根本无法识别，并且在功能或外观方面没有实际好处（尽管这可能会改变）。

与类一起使用`div`可以让您轻松地设置它们的样式（或在 JavaScript 中处理它们），而无需您首先需要防止的特殊默认呈现（作为带有边距的编号列表）的负担。

如果要对项目进行编号，最稳健的方法是最明显的方法：将数字放入标题中，例如`<h2>1 The First Item</h2>`。如果您认为创作中的灵活性，即重新排序部件、添加和删除部件的可能性，而无需手动更改数字，足以证明在最旧的浏览器中缺少数字，您可以使用 CSS（自动编号和生成的内容) 插入数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:58:59.633

从语义上讲，它有点多余，但如果它对您的内容有意义，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:18:30.843

如果您的列表没有按特定顺序排列，请使用无序列表。您甚至可以考虑使用嵌套列表，但在这种情况下，我会使用定义列表。

[http://jsfiddle.net/SmqFK/](http://jsfiddle.net/SmqFK/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:02:53.497

问问自己这是否真的是一个清单。如果是这样，我认为你正在做的事情很好。另请查看 CSS 计数器和编号：[http ://webdesign.about.com/od/css2/a/aa032807.htm](http://webdesign.about.com/od/css2/a/aa032807.htm)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-05-02T23:55:36.220

这真的取决于你想要完成什么。html 就是为了让事情看起来不错。无论如何，对我来说似乎很好。我也喜欢这个小标签。

```
<ol>
  <li>
      <fieldset>
        <legend><b>The Fist Item:</b></legend>
        a descriptive paragraph
      </fieldset>
  </li>
</ol> 
```*

# java - Java 泛型和数组类型，不是你想的那样（例如来自泛型类型的数组）

> ID：10423237
> 
> 赞同：17
> 
> 时间：2012-05-02T23:43:20.690
> 
> 标签：java, generics

我试图指定一个泛型类必须是一个数组，或者更好的是一个原始数组。到目前为止，这就是我的工作：

```
interface Foo<T> {
  void process( T data );
}

public class Moo implements Foo<int[]> {
  void process( int[] data ) {
     // do stuff here
  }
} 
```

这都是完全有效的 Java 代码并且可以工作，因为原始数组扩展了 Object。请注意，这个问题与我一直在寻找的所有其他 Java 数组通用问题**完全不同**。在这种情况下，人们希望从泛型类型中创建一个数组。

问题是类型 T 可以是扩展 Object 的任何东西。我想要做的是：

```
<T extends ONLY ARRAYS> 
```

或者

```
<T extends ONLY PRIMITIVE ARRAYS>. 
```

那可能吗？

编辑：最终目标是对传入的数组类型添加编译时检查。现在可以传入任何旧对象，它会编译得很好。只有在抛出类转换异常时，才会在运行时发现错误。事实上，这就是 Java 中泛型的重点，它可以添加更强大的编译时类型检查。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T23:50:15.303

你不可以做这个。没有类可以扩展数组，因此永远不会有满足泛型参数的类型`T extends Object[]`。（除了`Object[]`它本身，但你不会使用泛型。）

你可以做的是这样的：

```
public interface Foo<T extends Number> {
    public void process(T[] data);
} 
```

但是你可能会遇到拳击的性能问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T00:30:51.277

在 Java 中，类型参数[只能](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4)受子类型关系的约束，所有数组的唯一共同超类型[是](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3) `Object`,`Clonable`和`Serializable`。你能得到的最接近的是约束到`Object[]`，它是所有具有非原始组件类型的数组的超类型，或者可能约束到 ，它是, , ...`Number[]`的超类型`Integer[]``Long[]`

即使 Java 确实支持这样的约束，您将如何使用该数组做任何有用的事情？您无法读取单个元素，因为您无法声明一个变量来保存结果，也无法编写单个元素，因为您无法写下可分配给数组元素的表达式。

也就是说，我会将类型变量绑定到组件类型，而不是数组类型：

```
interface Foo<T extends Whatever> {
    void process(T[] data );
} 
```

因为你可以引用known ，但知道 a`T[]`并不能直接让你引用组件类型。`T``T extends Object[]`

编辑：Jeffrey 正确地指出数组类型不能用于类型边界，即`<T extends Whatever[]>`不能编译，所以你必须遵循我的声明`<T extends Whatever>`和使用`T[]`来引用数组类型的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T23:58:06.940

没办法。没有“有趣”的接口，也没有任何超类型，但 Object 存在于基元数组中：

```
public class SOTEST {    
    public static void main(String[] args) throws Exception {
        int[] arr = new int[] {};
        Class c = arr.getClass();
        for(Class clazz:c.getInterfaces()) {
            System.out.println(clazz.getName());
        }

        System.out.println(c.getSuperclass().toString());
    }
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-04T02:48:33.477

X 的数组没有类型层次结构。Integer[] 不是 Number[] 的子类。

为了得到你想要的，使用数组组件类型作为你的类型参数 T，并将参数和返回类型声明为 T 的数组。

# javascript - Javascript 拒绝工作...

> ID：10423239
> 
> 赞同：0
> 
> 时间：2012-05-02T23:43:57.253
> 
> 标签：javascript, html

这是我的代码：

```
<html>
<head>
<title>Date Test</title>
<script>
document.getElementById("date").innerHTML = Date();
</script>
</head>
<body>
<p>Today's date is <span id="date"></span></p>
</body>
</html> 
```

当我运行 HTML 文档时，它只显示“今天的日期是”......为什么？！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T23:46:05.327

执行`<span id="date">`脚本时不存在。你可以把它放在一个`onload`处理程序中来解决这个问题：

```
<script>
onload = function() {
    document.getElementById("date").innerHTML = Date();
};
</script> 
```

这将在整个 DOM 准备好后的某个时间运行脚本。当然，您可以`DOMContentLoaded`在 DOM 准备好时立即运行代码，而不是在其内容也加载后，但另一种（非常简单）的方法是将脚本放在结束`</body>`标记之前：

```
<html>
<head>
<title>Date Test</title>
</head>
<body>
<p>Today's date is <span id="date"></span></p>
<script>
document.getElementById("date").innerHTML = Date();
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T23:46:06.053

尝试将脚本放在末尾之前`body`以确保 DOM 已加载：

```
<html>
<head>
<title>Date Test</title>
</head>
<body>
<p>Today's date is <span id="date"></span></p>
<script type="text/javascript">
document.getElementById("date").innerHTML = Date();
</script>
</body>
</html> 
```

**示例：http:** [//jsfiddle.net/tQUUH/](http://jsfiddle.net/tQUUH/)

以下是一些对该主题更深入的资源：

*   [$(document).ready 没有 jQuery 的等价物](https://stackoverflow.com/q/799981/497356)
*   [活动( `window.onload`MDN)](https://developer.mozilla.org/en/DOM/window.onload)

如果你只是学习 JavaScript，MDN 是一个很好的资源。

# android - 将触摸发送到 ActivityInstrumentationTestCase2 测试时如何修复 INJECT_EVENT 权限异常

> ID：10423240
> 
> 赞同：4
> 
> 时间：2012-05-02T23:44:00.223
> 
> 标签：android, unit-testing, testing, emulation, instrumentation

尽管有很多例子表明这样的事情应该可以工作，但下面的代码失败了。此代码位于与实际项目关联的测试项目中。

```
public class MyTest extends ActivityInstrumentationTestCase2<MyActivity> {

    public MyTest(String name)
    {
        super("com.mypackage.activities", MyActivity.class);
        setName(name);
    }

    public void testTap() throws Throwable
    {
        //Required by MotionEvent.obtain according to JavaDocs
        long downTime = SystemClock.uptimeMillis();
        long eventTime = SystemClock.uptimeMillis();

        Instrumentation i = getInstrumentation();

        //Setup the info needed for our down and up events to create a tap
        MotionEvent downEvent = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_DOWN, 300, 20, 0);
        MotionEvent upEvent = MotionEvent.obtain(downTime, eventTime, MotionEvent.ACTION_UP, 300, 20, 0);

        //Send the down/up tap event
        i.sendPointerSync(downEvent);
        i.sendPointerSync(upEvent);

        //Delay to see the results
        Thread.currentThread().sleep(3000);
    }

} 
```

这将引发 java.lang.SecurityException: Injecting to another application requires INJECT_EVENTS 对 i.sendPointerSync() 调用的权限。我也试过 view.onTouchEvent(event) 和 view.dispatchTouchEvent(event) 没有成功。

我唯一能想到的是，如果这个工作的例子在被测试的项目中生活。这似乎很糟糕，因为建议是将测试分开到不同的项目，并能够从构建服务器运行它们，例如：

```
adb -e shell am instrument -w com.mypackage.activities.test/android.test.InstrumentationTestRunner 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T18:08:21.270

这可能意味着您的主项目、测试项目或模拟器版本不同步。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-21T12:01:12.090

它可能会帮助其他人。

我们遇到的问题是

> 无法执行手势。java.lang.SecurityException：注入到另一个应用程序需要 INJECT_EVENTS 权限 (RuntimeError")

就我而言，问题在于

> 网络未连接

. 一旦解决了网络连接问题，测试就会开始运行。

# c - 内核调用导致数据中止

> ID：10423244
> 
> 赞同：2
> 
> 时间：2012-05-02T23:44:41.500
> 
> 标签：c, exception-handling, linux-kernel

我在嵌入式 Linux 中很少遇到 data_abort 异常（kern=2.6.10）ARM 处理器

我的跟踪显示我从 __dabt_svc 获得 do_DataAbort，这是从 exit.c 中某处的 do_DataAbort do_page_fault 中的数据中止 do_page_fault 的处理程序命中 BUG_ON

BUG_ON(p == reaper || reaper->state >= EXIT_ZOMBIE || reaper->exit_state >= EXIT_ZOMBIE);

在函数 static inline void choose_new_parent - 在文件 exit.c 中，这个函数显然检查了 linux/kernel/sched.h 中任务的父级（struct task_struct）

当我调用任何这些时，这里的任何人都可以确认我正在启动或结束内核中的任务：

```
iowrite8 ioread8
__kfifo_get / reset / put / len
wake_up
wait_event_interruptible_timeout
free_irq / disable_irq / request_irq
release / request _mem_region
copy_to / from _user
s3c2410_gpio_cfgpin_outp / inp / alt / pullup
_raw_modifyl / writel / readl
local_irq_restore / save
unregister_chrdev_region
kmalloc
clk_get_rate 
```

其中任何一个都可能与向内核创建新任务有关？

我尝试追溯头文件，但它是一个真正的迷宫！提前致谢

# python - 具有别名应用程序 ID 的 get_application_id() 行为

> ID：10423245
> 
> 赞同：1
> 
> 时间：2012-05-02T23:44:41.700
> 
> 标签：python, google-app-engine

迁移到 High Replication Datastore 后，我被迫为我的应用程序名称设置别名。

我在整个应用程序中使用 google.appengine.api.app_identity.get_application_id() 方法，但现在即使通过旧的应用程序 ID url 访问，它也会返回新的应用程序 ID 而不是原来的应用程序 ID。

有没有办法输出原始应用程序ID？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:41:18.417

否 -`get_application_id`返回实际为您的请求提供服务的应用程序的 ID。您可以检查主机名以查看请求是否被定向到`oldappid.appspot.com`.

# ruby-on-rails - Rails 3.2.1 actionmailer 设置

> ID：10423246
> 
> 赞同：4
> 
> 时间：2012-05-02T23:44:46.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我在注册时设置 ActionMailer 时遇到困难：

`config/initializers/setup_mail.rb`

```
ActionMailer::Base.smtp_settings = {
 :address              => "smtp.gmail.com",
 :port                 => "587",
 :domain               => "mail.gmail.com",
 :user_name            => "my_gmail_user_name",
 :password             => "my_gmail_pw",
 :authentication       => "plain",
 :enable_starttls_auto => true
}

ActionMailer::Base.default_url_options[:host] = "localhost:3000"
Mail.register_interceptor( DevelopmentMailInterceptor ) if Rails.env.development? 
```

`users_controller.rb`

```
def create
  @user = User.new( params[:user] )

  respond_to do |format|
    if @user.save
      UserMailer.welcome_email( @user ).deliver

      format.html{ redirect_to( @user, :notice => 'Account successfully created.' ) }
      format.json{ render :xml => @user, :status => :created, :location => @user }
    else
      format.html { render :action => "new" }
      format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
    end
end 
```

`app/mailers/user_mailer.rb`

```
class UserMailer < ActionMailer::Base
  default :from "no-reply@myapp.com"

  def welcome_email( user )
    @user = user
    @url = "http://localhost:3000/login"
    mail( :to => user.email, :subject => 'Welcome to app' )
  end
end 
```

`lib/development_mail_interceptor.rb`

```
class DevelopmentMailInterceptor
  def self.delivering_email(message)
    message.subject = "#{message.to} #{message.subject}"
    message.to = "mydump@email.com"
  end
end 
```

我没有收到任何电子邮件发送到我的转储电子邮件中`DevelopmentMailInterceptor`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:33:49.273

gmail是肛门！无论如何，您可以使用不同的 smtp 主机吗？我认为，由于过于激进的垃圾邮件检测，他们会默默地拒绝他们认为是“潜在垃圾邮件”的 smpt 请求。在您的情况下，潜在的垃圾邮件是指来自“mail.gmail.com”以外的地址的电子邮件，在您的情况下是“email.com”。

我认为使用 gmail 作为 Rails 应用程序的 SMTP 主机是一个失败的提议，我将 godaddy.com (smtpout.secureserver.net) 用于我的 Rails 应用程序，并且没有问题。

# php - 修改 mail() 以在消息中包含变量

> ID：10423249
> 
> 赞同：-1
> 
> 时间：2012-05-02T23:45:22.840
> 
> 标签：php

> **可能重复：**
> [Php 邮件：如何发送 html？](https://stackoverflow.com/questions/4897215/php-mail-how-to-send-html)

我想在 PHP 中使用 Mail() 函数，但在消息中包含链接和变量时遇到了一些困难。

```
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent."; 
```

如何发送以下消息？

```
Please click <a href="http://domain.com/verify.php?token=$token">here</a> to veify. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:50:15.973

如果您想从头开始，您将不得不创建一个 HTML 电子邮件，这几乎是一项艰巨的工作，而且很多事情实际上都可能出错。

与其手动操作，不如使用**PHPMailer** ( [http://phpmailer.worxware.com/](http://phpmailer.worxware.com/) ) 及其`MsgHTML()`将 HTML 内容添加到消息正文的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:48:12.137

```
$var = "http://domain.com/verify.php?token=$token";
$message = "Please click <a href=\"{$var}\">here</a> to veify."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T23:48:52.743

尝试这个

```
$to = "someone@example.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$message .="Please click <a href=\"http://domain.com/verify.php?token=\"{$token}\">here</a> to veify.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
$headers .= "MIME-Version: 1.0\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\n";
mail($to,$subject,$message,$headers);
echo "Mail Sent."; 
```

# css - IE 修改 DIV 边框粗细的问题

> ID：10423250
> 
> 赞同：0
> 
> 时间：2012-05-02T23:45:26.647
> 
> 标签：css, flash, internet-explorer, html, border

好的，这次是一个非常简单的问题（尽管答案似乎难以捉摸，因为我在网上的任何地方都找不到它的引用）。

它与一个经典有关：IE 中的格式化问题。我想这可能是 IE 未能很好地与 Box Model 配合使用的一部分，尽管我找不到 IE 会修改 DIV 边框粗细的原因。此外，正如我将在下面进一步解释的那样，还有另一个变量：DIV 的内容，它决定了边框是否在 IE 中正确显示（无论在其他任何地方，它们都正确显示）。

首先，它是一个简单的 DIV，它的 CSS 如下：

```
#menu {
    width:1000px;
    border-top:#0072FF solid 10px;
    border-bottom:#FF0078 solid 20px
} 
```

然而，在 IE 中，顶部和底部边框的厚度大约是原来的两倍。

这是它在一个和另一个浏览器中的外观（它只是 DIV 的一部分，而不是整个 1000px 宽）：

![图。 参考。 与 IE 的边界问题](../Images/0774bdf5cf5e25f9deea2188cb6c58e6.png)

它里面有什么？它有一个嵌入式 Flash 菜单。

我已经从代码中删除了所有其他内容，只是测试了存在 Flash 内容问题的 DIV。结果：问题仍然存在。

但是，如果我取出嵌入式 Flash，则不会重现该问题。例如，如果我插入文本内容，问题又不会被复制。所以很明显，这与 Flash 内容和/或它的嵌入方式有关。（同样，这只发生在 IE 中......非常惊喜！）

从那以后，我尝试以几种不同的方式嵌入 Flash（尽管我以前从未遇到过这样的问题）。这是我目前正在使用的方式，我从一个网站上下载了它，该网站推荐它为“避免 IE 问题的最佳方式”：

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1000" height="30" id="menu" align="middle">
  <param name="movie" value="./swf/menu.swf"/>
  <!--[if !IE]>-->
  <object type="application/x-shockwave-flash" data="./swf/menu.swf" width="1000" height="30">
    <param name="movie" value="./swf/menu.swf"/>
    <!--<![endif]-->
    <a href="http://www.adobe.com/go/getflash"> <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/> </a>
    <!--[if !IE]>-->
  </object>
  <!--<![endif]-->
</object> 
```

我什至尝试查看它是否是 AC_RunActiveContent.js 问题，但不是。

我尝试了一些技巧和/或解决方法，但无济于事。（这些仍然适用于 IE 吗？当我偶然发现类似的问题时，我发现`* html`，例如，不再适用于我；格式化的问题仍然存在。）我真的宁愿避免解决方法，至少在这种情况下， ，似乎 CSS 解决方法不会有任何好处（当然，除非我需要格式化我的`<object>`标签——尽管这将是第一个）。

无论如何，任何见解都将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:18:56.693

我看到你的对象也有`id="menu"`。你说的时候是这个意思`div`吗？如果不是，我认为 IE 将`#menu`样式应用于`<object>` **and**而`<div>`其他浏览器仅将`<div>`as 视为`#menu`.

# c++ - 将渲染设备从 Sandy Bridge GPU 更改为主 GPU

> ID：10423251
> 
> 赞同：1
> 
> 时间：2012-05-02T23:45:41.673
> 
> 标签：c++, opengl, directx

我试图强制我的应用程序使用主 gpu。现在它会自动占用 CPU 上的那个。我用 DirectX9 和 OpenGL 都试过了。

当我调用 GetAdapterCount() 函数时，DirectX 仅返回 1 个适配器。当我调用 glGetString( GL_RENDERER ) 时，OpenGL 也只返回 1 个适配器。

有没有办法确保它使用正确的 GPU？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:03:58.817

我在我的 Nvidia Optimus + SandyBridge CPU 笔记本电脑上遇到了这个问题。每个人（DX、GL）都只返回了一个适配器，它给了我英特尔 GPU。

我通过更新 Nvidia 驱动程序解决了这个问题。安装最新版本的 DirectX 后，正确报告了两个适配器，并且基于 vendord id（Intel vs Nvidia），我可以选择在我的应用程序中使用哪个 GPU。

或者，您可以转到 Nvidia 控制面板，为您的可执行文件创建配置文件 - 并将其设置为始终使用 Nvidia GPU。当然，如果您将可执行文件提供给其他人以在他们的系统上运行带有错误驱动程序的系统，这当然不会解决同样的问题。

另一种选择是将您的可执行文件重命名为流行的游戏可执行文件名称。像 rage.exe 或 bf3.exe。这是因为 Nvidia 控制面板有很多带有流行游戏 exe 名称的预定义配置文件，并且它们都设置为使用 Nvidia GPU 而不是 Intel GPU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:58:29.267

这是复杂的并且依赖于硬件。您在使用混合显卡的笔记本电脑吗？如果是这样，通常会设置驱动程序为您提供用于 OpenGL 上下文的“主”GPU（回退到用于桌面渲染的集成显卡）。如果是台式机，通常两个 GPU 会驱动物理上不同的显示器输出。您是否将显示器插入独立显卡。

# sql - SQL Max 和双连接

> ID：10423253
> 
> 赞同：0
> 
> 时间：2012-05-02T23:45:57.473
> 
> 标签：sql

我有以下三个表：

```
student
-------
stnumb
stname
gender
grade
born

subject
-------
subjnumb
subjname
tname

results
-------
stnumb
subjnumb
percent 
```

我需要退回`highest result and its subject for each student`

*示例*：**鲍勃·史密斯，IPT，92**

我得到的两个最接近的结果是：

```
SELECT  stname
    ,   subjname
    ,   highestmark
FROM    (
            SELECT      MAX(results.percent) as "highestmark"
                    ,   student.stname
                    ,   subject.subjname
            FROM        student
                    ,   subject
                    ,   results
            WHERE       results.stnumb      = student.stnumb
            AND         results.subjnumb    = subject.subjnumb
            GROUP BY    stname
        ) maxresult 
```

...和...

```
SELECT      student.stname as Student
        ,   subject.subjname as Subject
        ,   results.percent as Mark
FROM        results 
JOIN        student
ON          results.stnumb = student.stnumb
JOIN        subject
ON          results.subjnumb = subject.subjnumb
ORDER BY    stname 
```

有人可以指出我正确的方向吗？我已经为此工作了好几天，但没有取得任何进展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:53:32.757

从 GROUP BY 中缺少**subjname**来看，这是 MySql。MySql 没有解析功能，所以需要调用 top 1 的旧形式。有派生表保存最大值的版本。此表用于过滤原始表：

```
SELECT      student.stname as Student
        ,   subject.subjname as Subject
        ,   results.percent as Mark
FROM        results 
JOIN        student
ON          results.stnumb = student.stnumb
JOIN        subject
ON          results.subjnumb = subject.subjnumb
JOIN
(
   SELECT stnumb, MAX(percent) percent
     FROM results
    GROUP BY stnumb
) top1GradePerStudent
  ON results.stnumb = top1GradePerStudent.stnumb
 AND results.percent = top1GradePerStudent.percent
ORDER BY    stname 
```

还有一种`not exists`方法，只检索百分比不高的学生记录：

```
SELECT      student.stname as Student
        ,   subject.subjname as Subject
        ,   results.percent as Mark
FROM        results 
JOIN        student
ON          results.stnumb = student.stnumb
JOIN        subject
ON          results.subjnumb = subject.subjnumb
WHERE       NOT EXISTS 
            (
                SELECT null
                  FROM results r2
                 WHERE r2.stnumb = results.stnumb
                   AND r2.percent > results.percent
            )
ORDER BY    stname 
```

两种方式都将返回关系。如果您必须为每个学生创建一条记录，请`subjname`用 MAX 或 MIN 括起来，因为行中的所有其他数据都将相同，因此您选择哪个科目并不重要。

PS我没有测试这个查询。可能有错字，但基本方法是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:53:44.067

```
SELECT pct, subjname, stname 
FROM
(SELECT r.pct, sub.subjname, std.stname,
RANK () OVER (PARTITION BY sub.subjname ORDER BY r.pct) as rk
FROM student std 
INNER JOIN results r ON r.stnumb = std.stnumb 
INNER JOIN subject sub ON sub.subjnumb = r.subjnumb 
GROUP BY sub.subjname, std.stname, r.pct ) a
WHERE rk = 1 
```

# visual-studio - Visual Studio 代码分析 Dispose 实现警告

> ID：10423259
> 
> 赞同：2
> 
> 时间：2012-05-02T23:46:53.620
> 
> 标签：visual-studio, code-analysis

我有以下代码：

```
/// <summary>
/// Dispose.
/// </summary>
public override sealed void Dispose()
{
    Dispose(true);
    GC.SuppressFinalize(this);
}

/// <summary>
/// Dispose.
/// </summary>
/// <param name="disposing">
/// Disposing parameter.
/// </param>
protected override void Dispose(bool disposing)
{
    if (disposing)
    {
    }
     Clear();
     base.Dispose(disposing);
} 
```

并有以下警告：

> 警告 435 CA2215：Microsoft.Usage：确保方法 'DSDump.Dispose()' 在所有可能的控制流路径中调用 base.'DSDump.Dispose()'。
> 警告 436 CA1063：Microsoft.Design：删除“DSDump.Dispose()”，覆盖 Dispose(bool disposing)，并将 dispose 逻辑放在“disposing”为 true 的代码路径中。

我不知道为什么......从我这边看一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:51:55.940

问题是您的基类定义不正确。

`public void Dispose()`不应该是基类中的虚拟方法。它应该处理 GC 抑制并调用虚拟`protected virtual void Dispose(bool)`方法，这是您应该覆盖的方法。

# regex - 在音译运算符中使用变量

> ID：10423261
> 
> 赞同：4
> 
> 时间：2012-05-02T23:47:12.887
> 
> 标签：regex, perl

这是一个愚蠢的问题；我需要这个来处理更复杂的事情，但让我们让它变得简单：

```
$i = quotemeta 'A';
$line =~ tr/a-z/$i-Z/; 
```

这是一个愚蠢的替换，这应该将小写字母变成大写字母，但是我尝试过的方法都行不通。

好的，所以我看到这带来了很多混乱，真正的代码应该是：

`$line =~ tr/A-Z/F-ZA-E/;`

它应该是一个 Caesers Chiper 算法。如果您想通过固定数量的字母更改它，这很好用，但我需要一个变量，所以我可以根据需要更改任意数量的字母。但我想运送 eval Thnx

PS 另外，为什么 s/// 不适用于范围？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:56:51.043

如果你真的需要 tr，你可以使用 eval：

```
$i = quotemeta 'A'
eval("\$line =~ tr/a-z/$i-Z/;"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T23:51:20.707

请注意`tr///`，您只能使用文字字符，而不能使用变量。所以，`tr/a-z/$i-Z/`不起作用，你必须使用`tr/a-z/A-Z/`. 在[perldoc perlop 中](http://perldoc.perl.org/perlop.html)，您可以阅读更多关于`tr///`插值或缺少插值的解释。

将字符串转换为大写，尽管还有其他方法。您可以使用该[`uc`](http://perldoc.perl.org/functions/uc.html)函数或正则表达式转义序列[`\U`](http://perldoc.perl.org/perlre.html#Character-set-modifiers)（大写）和[`\L`](http://perldoc.perl.org/perlre.html#Character-set-modifiers)（小写）。例如：

```
my $str = 'a';
my $uppercase = uc $str; 
```

正则表达式：

```
my $str = 'abcdef';
$str =~ s/([a-z]+)/\U$1/;  # $str is now 'ABCDEF' 
```

tchrist 指出`[a-z]`应该写`\p{CWU}`，这将包括所有受大小写影响的字符。

**更新：**

如果您正在尝试创建某种动态编码功能，我建议使用一个子程序来获取参数，并手动移动字符。

```
sub foo {
    my ($str, $num) = @_;  # num is how many characters to shift the alphabet
    my @in  = 'A' .. 'Z';
    my @out = @in[$num .. $#in, 0 .. $num-1];
    my %out = map { $in[$_] => $out[$_] } 0 .. $#in;
    $str =~ s#(.)# $out{$1} // $1 #eg;  # if key does not exist, use org
    return $str;
} 
```

请注意，它区分大小写，但您可以添加小写键来解决此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T23:56:11.277

不幸的是，你的例子不是一个好例子；操作员`tr`不接受任何变量插值（在任何一半）。如果您实际使用`tr`，除非您使用 ，否则您将不走运`eval`，不建议这样做。如果您不使用`tr`，请向我们展示实际代码，以便我们了解发生了什么并提供更多建议。

**更新**

这个怎么样？

```
my %map;
@map{'A'..'Z'} = ('F'..'Z','A'..'E');
s/[A-Z]/$map{$&}/g; 
```

不确定它是否仍然正确，但曾几何时，`$&`由于可怕的性能损失，要不惜一切代价避免。你可以很容易地做到这一点：

```
s/([A-Z])/$map{$1}/g; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T23:51:43.820

tr 不适用于变量；改用 s/// （替换）。

# asp.net-mvc - 具有多个可选参数的 ASP.NET MVC 路由

> ID：10423265
> 
> 赞同：1
> 
> 时间：2012-05-02T23:47:29.210
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个单页 Web 应用程序的情况。我使用客户端上的地址信息来确定要加载哪些数据。我希望能够将如下所有 URL 直接指向 HomeController 上的 Index 操作方法。

```
http://mysite.com/Home/Index/Value/23/Another/34
http://mysite.com/Home/Index/Value/23/Another/34/StillAnother/45 
```

在那个控制器方法中，我想要一个参数列表，例如：

```
{"Value", "23", "Another", "34"}
{"Value", "23", "Another", "34", "StillAnother", "45"} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:19:28.807

单页 Web 应用程序并不意味着只有一个 Controller 和 Action，所以我希望这不是您所追求的。如果你只是想绑定额外的 URL 参数，那么使用路由很容易完成。看看这个问题：[Infinite URL Parameters for ASP.NET MVC Route](https://stackoverflow.com/questions/7515644/infinite-url-parameters-for-asp-net-mvc-route)

# visual-studio-2010 - 在 Visual Studio 中对控制台应用程序进行单元测试

> ID：10423267
> 
> 赞同：3
> 
> 时间：2012-05-02T23:47:50.420
> 
> 标签：visual-studio-2010, unit-testing, console-application

我在 Visual Studio 中有一个测试项目，我想用它来测试我的控制台应用程序（在同一个解决方案中）。

我正在尝试设置使用特定参数调用控制台应用程序的测试，并将实际输出与我的期望进行比较，然后执行我通常的 Assert 语句以适当地通过/失败测试。

我能想到的最好的方法是在单元测试中使用 System.Diagnostics.Process 执行应用程序 exe。这行得通。我可以读取输出，一切都很好。

我遇到的问题是当我想在控制台应用程序代码中设置断点时，我可以进行一些调试。由于 Process 启动了控制台应用程序，Visual Studio 不会监视控制台应用程序，因此它不会中断。没有什么能像 Web 应用程序那样“等待来自外部应用程序的请求”，我明白为什么，但这基本上就是我想要的。

所以我的问题是，有没有办法在 Visual Studio 中设置这些单元测试，我仍然可以在其中调试控制台应用程序？我能想到的唯一解决方法是在控制台应用程序上设置启动操作以启动一个外部程序，该程序将调用 MSTest.exe，并以这种方式运行适当的单元测试。但这似乎是一个我只是想错了的问题，实际上有一个*更*明显的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T00:19:20.810

使您的控制台应用程序尽可能地精简，并将所有业务逻辑移至域类。例如

```
class Program
{
    static void Main(string[] args)
    {
       Foo foo = new Foo(args);
    }
} 
```

之后，您可以轻松地为您的 Foo 类编写单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:11:32.283

单元测试不应该需要人工交互。为了使您的应用程序*可单元测试*，控制台交互应该是抽象的——这可以使用`TextReader`和`TextWriter`类轻松完成。你可能会发现[这个问题](https://stackoverflow.com/q/8961655/343266)很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T18:10:22.133

There are a lot of answers in the present question, as well as in [Best way to unit test console c# app](https://stackoverflow.com/q/12104429/239394), [NUnit Test - Looping - C#](https://stackoverflow.com/q/8961655/239394), and possibly many others, indicating that direct unit testing of the unmodified, "untestable" console application is not a good way to test. They are all correct.

However, if you really need to test this way for some reason, and if you are able to refer to the console application as a reference from your test project (which, if the two are in the same solution, you likely can), it is possible to do so without resorting to `Process.Start`. In .NET 4.5 or later, using xunit syntax:

```
[Theory]
[MemberData("YourStaticDataProviderField")]
public async void SomeTest(string initialString, string resultString, params int[] indexes)
{
    using (var consoleInStream = new AnonymousPipeServerStream(PipeDirection.Out))
    using (var consoleOutStream = new AnonymousPipeServerStream(PipeDirection.In))
    using (var writer = new StreamWriter(consoleInStream, Encoding.Default, 1024, true))
    using (var reader = new StreamReader(consoleOutStream, Encoding.Default, false, 1024, true))
    using (var tokenSource = new CancellationTokenSource())
    {
        // AutoFlush must be set to true to emulate actual console behavior,
        // else calls to Console.In.Read*() may hang waiting for input.
        writer.AutoFlush = true;

        Task programTask = Task.Run(() =>
        {
            using (var consoleInReader =
                new StreamReader(new AnonymousPipeClientStream(PipeDirection.In,
                                                               consoleInStream.GetClientHandleAsString())))
            using (var consoleOutWriter =
                new StreamWriter(new AnonymousPipeClientStream(PipeDirection.Out,
                                                               consoleOutStream.GetClientHandleAsString())))
            {
                // Again, AutoFlush must be true
                consoleOutWriter.AutoFlush = true;
                Console.SetIn(consoleInReader);
                Console.SetOut(consoleOutWriter);
                // Of course, pass any arguments your console application
                // needs to run your test.  Assuming no arguments are
                // needed:
                Program.Main(new string[0]);
            }
        }, tokenSource.Token);

        // Read and write as your test dictates.
        await writer.WriteLineAsync(initialString.Length.ToString());
        await writer.WriteLineAsync(initialString);
        await writer.WriteLineAsync(indexes.Length.ToString());
        await writer.WriteLineAsync(String.Join(" ", indexes));

        var result = await reader.ReadLineAsync();

        await writer.WriteLineAsync();

        // It is probably a good idea to set a timeout in case
        // the method under test does not behave as expected (e.g.,
        // is still waiting for input).  Adjust 5000 milliseconds
        // to your liking.
        if (!programTask.Wait(5000, tokenSource.Token))
        {
            tokenSource.Cancel();
            Assert.False(true, "programTask did not complete");
        }

        // Assert whatever your test requires.
        Assert.Null(programTask.Exception);
        Assert.Equal(resultString, result);
    }
} 
```

This solution is likely adaptable to .NET 3.5 or later if you handle asynchronous methods differently. `AnonymousPipe(Server|Client)Stream` was introduced in .NET 3.5\. Other unit test frameworks should work with the appropriate syntax changes.

The pipe streams [`System.IO.Pipes.AnonymousPipeServerStream`](https://msdn.microsoft.com/en-us/library/system.io.pipes.anonymouspipeserverstream(v=vs.110).aspx) and [`System.IO.Pipes.AnonymousPipeClientStream`](https://msdn.microsoft.com/en-us/library/system.io.pipes.anonymouspipeclientstream(v=vs.110).aspx) are key to making this solution work. Because a stream has a current position, it does not work as reliably to have two different processes referring to the same [`MemoryStream`](https://msdn.microsoft.com/en-us/library/system.io.memorystream(v=vs.110).aspx) at the same time. Using the pipe streams instead allows the streams' use in parent and child processes, as is done here. Running `Program.Main(string[])` in a child task is necessary so that the unit test process can read and write from the console while the program is running. The `AnonymousPipeClientStream` objects should belong to the child task, according to the documentation, which is why they are created within the task runner.

You can obtain exception data from the `programTask` object if you need to test for exceptions (or, under xunit, use something like `Assert.ThrowsAsync<ExpectedException>(Func<Task>)` to run the child task).

# r - 如何检查数据是否每组具有相同数量的观察值？

> ID：10423269
> 
> 赞同：2
> 
> 时间：2012-05-02T23:48:12.027
> 
> 标签：r

我正在编写一些代码，我需要检查给定数据输入的所有组大小是否相等。例如，假设我想知道“mpg”数据集（在 ggplot2 包中）是否具有：

*   每个制造商的汽车数量相同
*   每种驱动类型（四轮、前轮、后轮）的汽车数量相等
*   每种发动机类型的汽车数量相同（4 缸、6 缸、8 缸）

对于像 mpg 这样的数据，其中一些问题可以通过检查摘要输出来回答

```
library(ggplot2)   # contains the mpg dataset
summary(mpg$drive) # shows the breakdown of cars by drive-type, 
                   # which we can verify is unequal 
```

但我觉得我缺少一种检查组大小是否相等的简单方法。我可以调用一些单一的、神秘的功能`are.groups.of.equal.size(x)`吗？还是会返回此类信息的另一个基本功能（或它们的组合）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:06:46.780

这是一种方法：

```
are.groups.of.equal.size <- function(x)length(unique(table(x))) == 1L

are.groups.of.equal.size(mpg$manufacturer)
# [1] FALSE
are.groups.of.equal.size(mpg$drv)
# [1] FALSE
are.groups.of.equal.size(mpg$year)
# [1] TRUE 
```

请注意，如果需要，`table`可以选择如何处理`NA`数据中的 s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:12:44.393

正如 Joran 所说，我们可以从这里到圣诞节发明 100 多种方法来解决这个问题。我闻到了微基准挑战：

```
are.groups.of.equal.size <- function(x) {
    y <- rle(as.character(sort(x)))$lengths
    all(y%in%mean(y))
}

are.groups.of.equal.size(c(3, 3, 3))
are.groups.of.equal.size(mtcars$cyl)
are.groups.of.equal.size(CO2$Plant)
are.groups.of.equal.size(mtcars$carb) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T19:29:32.603

使用 sd 方法：

```
are.groups.of.equal.size <- function(x) {
   x2 <- tapply(x, x, length)
   sd(x2)==0 | length(x2)==1
}

are.groups.of.equal.size(c(3, 3, 3))
are.groups.of.equal.size(mtcars$cyl)
are.groups.of.equal.size(CO2$Plant)
are.groups.of.equal.size(mtcars$carb) 
```

# teamcity - 如何将包发布到 TeamCity nuget 服务器？

> ID：10423272
> 
> 赞同：9
> 
> 时间：2012-05-02T23:48:40.937
> 
> 标签：teamcity, nuget, teamcity-7.0

我们为 nuget 配置了 TeamCity 7 服务器。它托管在没有外部连接的机器上。是否可以将包发布到 TeamCity nuget 服务器？例如，如果我们想将 log4net 包依赖项添加到我们的项目之一，则需要将其发布到 TeamCity 服务器，因为无法访问 nuget.org。到目前为止，我已经尝试发布到[http://teamcity:port/guestauth/app/nuget/v1/FeedService.svc](http://teamcity:port/guestauth/app/nuget/v1/FeedService.svc)上的变体，但到目前为止还没有运气。

谢谢，安迪

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T01:50:21.453

“解决方法是创建一个构建配置，将这些包发布为工件。”

[http://blogs.jetbrains.com/teamcity/2011/12/01/setting-up-teamcity-as-a-native-nuget-server/](http://blogs.jetbrains.com/teamcity/2011/12/01/setting-up-teamcity-as-a-native-nuget-server/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:02:38.777

确认，尚不支持： http: [//devnet.jetbrains.net/message/5456081#5456081](http://devnet.jetbrains.net/message/5456081#5456081)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:10:29.460

我们之前遇到过同样的问题，实际的解决方案是创建一个构建配置，正如@Robert 所说。但是 teamCity 免费版有 20 个构建配置的限制，有时您不想在单个 Nuget 包中使用它们，所以我们的解决方法是：

*   您需要对 TeamCity Server 上的包文件夹的写入权限。
*   为具有适当权限的包文件夹创建一个共享文件夹。
*   在项目文件夹中，使用以下语句创建一个 .cmd 文件：

> ```
> set output=\\teamcityserver\Packages
> <nuget.exe path>\nuget pack "MyProject.csproj" -o %output% -build -Properties Configuration=Release 
> ```

所以关键是将项目直接打包到服务器包文件夹中。

如果解决方案中有多个 nuget 包，只需为每个包重复“nuget pack”行，就完成了。注意 nuget.exe 的路径并正确更改它。

我也没有尝试在上一个 TeamCity 版本中发布。

# javascript - jQuery：在更改另一个 css 属性之前等待 css 动画完成

> ID：10423274
> 
> 赞同：0
> 
> 时间：2012-05-02T23:48:51.313
> 
> 标签：javascript, jquery, css

我有一堆图像，绝对定位在同一个地方，通过将 zIndex=-1 设置为除可见图像之外的所有图像，我一次只能看到一个图像。在页面的另一侧，我有一个所有图像名称的列表，当我将鼠标悬停在特定图像名称上时，我希望该图像通过淡入变得可见，而之前可见的图像淡出。我用这段代码做这个

```
$(this).hover(  //visible and hover below are variable names  
        visible.css({opacity: '0',zIndex: '-1'}); //the previous image diassapears
        hovered.css({ zIndex: '1', opacity: '1'}); //the new image fades in
    ) 
```

并通过 css 转换 opacity 属性。问题是，当我将鼠标悬停在新图像名称上时，旧图像会消失而不会淡出，而新图像会开始淡入。我想旧图像确实会淡出，但由于zIndex=-1 立即生效。我想问一下解决这个问题的最佳方法。请注意，我想在不使用 jQuery 动画的情况下执行此操作，而仅使用纯 css 动画只是为了利用 css 动画的（最低限度）更高速度。因此，一个几乎没有计算开销的解决方案（因此在这种情况下 css 动画仍然具有优势）将是可取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:59:36.120

您需要`z-index:-1`在它动画回不透明度 0 之后应用它，否则它只是在下面“弹出”而不显示不透明度变化。

您需要触发 transitionEnd 事件。请参阅这篇关于为所有浏览器规范化该事件的[SO 帖子。](https://stackoverflow.com/questions/5023514/how-do-i-normalize-css3-transition-functions-across-browsers)

但是一旦你解决了这个问题，它基本上只是附加一个一次性事件，回调设置最终的 z-index - 像这样：

```
visible.one('transitionEnd', function(){
    visible.css('z-index', -1);
}).css( 'opacity', 0 ); 
```

您只需要使用其他 SO 帖子中的脚本来获取标准化`'transitionEnd'`事件。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T23:51:21.237

使用`animate`- 它带有队列管理和回调支持“开箱即用”

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# jqgrid - jqgrid 计算总组单元格值

> ID：10423280
> 
> 赞同：2
> 
> 时间：2012-05-02T23:49:30.093
> 
> 标签：jqgrid, footer, calculated-columns

在 jqGrid 中，我想计算如下的总组单元格值。我见过的所有示例都是通过在加载完成后调用函数来为主页脚做的。任何想法如何计算以下场景的组总数？

![在此处输入图像描述](../Images/be1dd4b2cfa8b2e4c0b7f115916a6200.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:04:11.313

您可以使用`summarytype: 'sum'`，但这只会提供每列中值的摘要。因此，要完成您想要完成的工作，您需要为 Apples、Bananas 等提供单独的列。

# c# - 并行解析 xml 文件的最快方法是什么？

> ID：10423289
> 
> 赞同：0
> 
> 时间：2012-05-02T23:50:34.543
> 
> 标签：c#, .net, multithreading, performance, parallel-processing

我需要使用 XmlDocument 或 HAP 来解析几个文件，最快的方法是什么？我有一个 i7 处理器，但无论我使用多少线程，处理器的使用率都只有 30%。每个线程解析不同的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:52:05.153

`System.Xml.Linq.XElement.Parse()`比`XmlDocument.LoadXml()`解析 XML 字符串更快，并且 XElement.Load() 将直接从文件中解析。您可能还会发现 LINQ to XML 更易于使用。

但是如果你想使用 XmlDocument，那么你可以使用

```
XmlDocument xml = new XmlDocument();
xml.LoadXml(XElement.Load(someFileName).ToString(SaveOptions.DisableFormatting)); 
```

正如其他人所建议的那样，您可能不会达到 100% 的 CPU 利用率，因为 i7 的解析速度可能比硬盘发送数据的速度要快得多。

# sitecore - Sitecore 登录超时

> ID：10423291
> 
> 赞同：8
> 
> 时间：2012-05-02T23:51:00.793
> 
> 标签：sitecore

在我的本地机器上使用 sitecore。当我尝试登录“桌面”时，它挂在 /sitecore/shell/default.aspx?sc_lang=en 并最终超时。如果我登录到“内容编辑器”它工作正常任何想法如何调试它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T10:27:33.883

我曾经遇到过完全相同的问题。解决方案是将 Data 目录移动到不同的位置（及其全部内容）。我不知道它为什么会这样。

更奇怪的是，一旦它开始工作，您可以将文件夹移回原处，它会正常运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T08:55:54.877

我们昨天遇到了这个问题。我们在 Stack Overflow 上找到了这个问题，并尝试将数据文件夹从网站文件夹移动到单独的文件夹中。这立即解决了问题。然后，您需要在 Sitecore.config（或 Web.config）文件中更改此设置：

```
<sc.variable name="dataFolder" value="/Data"/> 
```

指向新文件夹。我们已询问 Sitecore 支持这是否是一个已知问题，他们并没有太多想法。他们唯一的猜测是这可能是由 Sitecore 缓存引起的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-03T23:06:40.563

这可能是因为您在 web.config 中的“数据文件夹”设置仍指向旧位置。将其更改为新位置，一切就绪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T02:04:29.407

我还无权评论其他答案，但只是认为添加我对这个问题的一点经验很好。

我按照@Maras 的建议将数据文件夹移到了其他地方，然后 sitecore 开始抱怨找不到许可证文件。如果这是您的情况，只需将数据文件夹移回，然后它就开始为我工作了。

# c# - 如何使用 linq-only 将多维数组展开为一维？

> ID：10423292
> 
> 赞同：1
> 
> 时间：2012-05-02T23:51:04.153
> 
> 标签：c#, linq

是否可以在不使用 foreach() 的情况下仅使用 LINQ 重写此函数？

```
 IEnumerable<string> Unwrap(IEnumerable<IEnumerable<string>> data)
    {
        var result = new List<string>();
        foreach (var d in data)
        {
            result.AddRange(d);
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:53:37.187

只需使用[Enumerable.SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)：

```
IEnumerable<string> Unwrap(IEnumerable<IEnumerable<string>> data)
{
    return data.SelectMany(d => d);
} 
```

# objective-c - Objective C - setImage 导致图像模糊

> ID：10423298
> 
> 赞同：1
> 
> 时间：2012-05-02T23:51:43.450
> 
> 标签：objective-c, uibutton

当用户单击它时，我正在交换按钮的图像。此按钮位于 UITableViewCell 中。

```
[btn setImage:[UIImage imageNamed:@"btn_on"] forState:UIControlStateNormal]; 
```

但是，图像显示模糊。如果我开始与桌子互动，模糊就会消失。

我怎样才能防止这种模糊首先出现？

谢谢，
三通

# postgresql - 消除从 postgresql 上的 JOIN SQL 查询返回的重复记录

> ID：10423301
> 
> 赞同：1
> 
> 时间：2012-05-02T23:51:51.543
> 
> 标签：postgresql, join

我有一个查询连接 4 个表中的数据以提供基于测试结果的数据。该查询工作正常，除了它为每行唯一数据返回两条相同的记录。如果我在连接中的一个表的主键列 (a.id) 前面抛出一个 DISTINCT，则可以消除所有重复项。但是，我已经阅读（并发现）DISTINCT 往往会导致性能下降，因此我希望尽可能找到性能更好的解决方案。希望我只是在用很容易修复的 JOINS 做一些愚蠢的事情。这是在 postgresql-9.0.x 上，是的，我知道如果我升级到 9.1.x，那么我可能会做一个“按 a.id 分组”，但现在我被困在 9.0.x 上。

这是查询：

```
SELECT a.id,a.suiteid,a.testname
     ,date_trunc('second',a.last_update) AS last_update
     ,regexp_replace(p.relname,E'tests','','g')
     ,o.osname 
FROM smoketests AS a
   , pg_class AS p
   , smoke AS t
   , osversmap AS o 
WHERE a.osversion=o.osversion
  AND a.suiteid=t.id
  AND a.tableoid=p.oid
  AND ( a.current_status='FAILED' )
  AND ( a.arch='i386' )
  AND ( a.os='Darwin' )
  AND a.last_update>'2012-05-01 04:00:00'
  AND a.last_update<'2012-05-02 14:20:45' 
ORDER BY a.id ; 
```

产生这个输出：

```
 id    | suiteid |     testname     |     last_update     | regexp_replace |   osname   
----------+---------+------------------+---------------------+----------------+------------
 32549818 |  668232 | bug377064        | 2012-05-01 08:38:07 | smoke          | OSX-10.7.x
 32549818 |  668232 | bug377064        | 2012-05-01 08:38:07 | smoke          | OSX-10.7.x
 32549819 |  668232 | funcmem_resize   | 2012-05-01 08:38:07 | smoke          | OSX-10.7.x
 32549819 |  668232 | funcmem_resize   | 2012-05-01 08:38:07 | smoke          | OSX-10.7.x
 32549820 |  668232 | leitest          | 2012-05-01 08:38:07 | smoke          | OSX-10.7.x
 32549820 |  668232 | leitest          | 2012-05-01 08:38:07 | smoke          | OSX-10.7.x 
```

该问题在 id 列中可见，其中每个值返回两个，即使 a.id 是烟表的唯一主键并且实际上没有重复项。'smoke' 表与smoketests 表有一对多的关系，但我仍然很困惑为什么我会得到所有内容的副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:03:04.547

您应该做的第一件事是停止执行隐式交叉连接。这些使得追踪这类问题变得更加困难。将您的查询重写为：

```
SELECT a.id,a.suiteid,a.testname
     ,date_trunc('second',a.last_update) AS last_update
     ,regexp_replace(p.relname,E'tests','','g')
     ,o.osname 
FROM smoketests AS a
JOIN pg_class AS p ON a.tableoid=p.oid
JOIN smoke AS t ON a.suiteid=t.id
JOIN osversmap AS o ON a.osversion=o.osversion
WHERE
  AND ( a.current_status='FAILED' )
  AND ( a.arch='i386' )
  AND ( a.os='Darwin' )
  AND a.last_update>'2012-05-01 04:00:00'
  AND a.last_update<'2012-05-02 14:20:45' 
ORDER BY a.id ; 
```

从那里您需要找出导致重复的原因。烟雾会导致重复吗？尝试返回更多记录。如果是这样，请尝试删除连接并将其替换为 IN 子查询。

# ruby-on-rails - rake db:create:all 错误：无法将 nil 转换为字符串

> ID：10423304
> 
> 赞同：0
> 
> 时间：2012-05-02T23:52:35.737
> 
> 标签：ruby-on-rails, postgresql, rake

`can't convert nil to String`尝试使用`rake db:create:all`我的 postgresql 数据库时出现错误。

当我跑步时，`rake db:create:all`我得到

“您已经激活了 rake 0.9.2.2，但您的 Gemfile 需要 rake 0.9.2。使用 bundle exec 可以解决这个问题。”

当我跑步时，`bundle exec rake db:create:all --trace`我得到

```
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:211: warning: Insecure world writable dir /usr/local in PATH, mode 040777
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:211: warning: Insecure world writable dir /usr/local in PATH, mode 040777
(in /Users/verdi/Documents/Rails/Terminal)
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/net-ping-1.5.0/lib/net/ping/external.rb:4: Use RbConfig instead of obsolete and deprecated Config.
rake aborted!
can't convert nil into String
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-rails-0.5.2/lib/cucumber/rails3.rb:3:in `dirname'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-rails-0.5.2/lib/cucumber/rails3.rb:3:in `<top (required)>'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `block in require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:596:in `new_constants_in'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:225:in `load_dependency'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.9/lib/active_support/dependencies.rb:239:in `require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/cucumber-rails-0.5.2/lib/cucumber/rails.rb:2:in `<top (required)>'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `rescue in block in require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:62:in `block in require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
/Users/verdi/Documents/Rails/Terminal/config/application.rb:7:in `<top (required)>'
/Users/verdi/Documents/Rails/Terminal/Rakefile:4:in `require'
/Users/verdi/Documents/Rails/Terminal/Rakefile:4:in `<top (required)>'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/rake_module.rb:25:in `load'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:495:in `raw_load_rakefile'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:78:in `block in load_rakefile'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:77:in `load_rakefile'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:61:in `block in run'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2/bin/rake:32:in `<top (required)>'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/bin/rake:23:in `load'
/Users/verdi/.rvm/gems/ruby-1.9.3-p194/bin/rake:23:in `<main>' 
```

我正在关注我 git 克隆的现有应用程序的 Ryan Bates 教程： [http ://railscasts.com/episodes/342-migrating-to-postgresql?view=asciicast](http://railscasts.com/episodes/342-migrating-to-postgresql?view=asciicast)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:00:48.383

仔细检查您的 database.yaml 文件以确保所有值都存在

# antlr - The Definitive ANTLR Reference - 第一个程序不工作

> ID：10423305
> 
> 赞同：5
> 
> 时间：2012-05-02T23:52:46.697
> 
> 标签：antlr, antlr3

我最近购买了[The Definitive ANTLR Reference](http://pragprog.com/book/tpantlr/the-definitive-antlr-reference)，我很高兴开始使用 ANTLR。
在第一章中，这个语法被展示：

```
grammar T;

options {
    language = Java;
}

r : 'call' ID ';' {System.out.println("invoke " + $ID.text);} ;
ID : 'a'..'z'+ ;
WS : (' '|'\n'|'\r')+   {$channel=HIDDEN;} ; 
```

我将这个语法复制到一个文件中（.g 扩展名），生成 Lexer 和 Parser，并创建了一个主类，如下所示：

```
import org.antlr.runtime.*;

public final class Test {
    public static void main(String[] args) throws Exception {
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        TLexer lexer = new TLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        TParser parser = new TParser(tokens);

        parser.r();
    }
} 
```

没有真正的错误，但是当我运行主类并输入时：

```
call foo; 
```

没发生什么事。“invoke foo”应该输出到屏幕上，但什么也没有发生。我不想在没有完成任何练习的情况下继续看书。如果重要的话，我在 Eclipse 中使用 ANTLR 3.4。抱歉，这似乎是一个简单的问题，但我是 ANTLR 的新手。

谢谢，
奥马尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T01:07:41.757

您需要输入 EOF 字符。

对于基于 UNIX 的系统，它是`Ctrl-D`.

对于基于 Windows 的系统，它是`Ctrl-Z`.

编辑

由于您通过控制台输入输入，并且 ANTLR 正在将数据作为流读取，因此它需要 EOF。在本书后面，您将通过文件输入数据，文件的 EOF 将结束流。您还可以将输入保存到文件中，然后将输入从文件通过管道传输到命令中。

# javascript - 每个选项卡的特定 URL，无需在 javascript 中重新加载

> ID：10423306
> 
> 赞同：0
> 
> 时间：2012-05-02T23:52:57.767
> 
> 标签：javascript, jquery, html

我有一个选项卡系统，我希望能够访问打开确定选项卡的 url。例如*www.site.com/tab2*（优先用于 SEO）或*www.site.com#tab2*。

我尝试过诸如*window.location*或*window.history.pushstate*之类的方法（[在此处发布](http://spoiledmilk.dk/blog/html5-changing-the-browser-url-without-refreshing-page)），但我不知道如何使它们发挥作用。

* * *

**Javascript：**

```
(function() {

        var $tabsNav    = $('.tabs-nav'),
            $tabsNavLis = $tabsNav.children('li'),
            $tabContent = $('.tab-content');

        $tabContent.hide();
        $tabsNavLis.first().addClass('active').show();
        $tabContent.first().show();

        $tabsNavLis.on('click', function(e) {
            var $this = $(this);

            $tabsNavLis.removeClass('active');
            $this.addClass('active');
            $tabContent.hide();

            $( $this.find('a').attr('href') ).fadeIn();

                    var hash = window.location.hash;
                    var tab = parseInt(hash.replace('#',''), 10);
                    $tabsNavLis.eq(tab - 1).click();

            e.preventDefault();
        });

    })(); 
```

* * *

**HTML：**

```
<ul class="tabs-nav">

    <li class="active">
        <a href="#1">TAB 1</a>
    </li>
    <li>
        <a href="#2">TAB 2</a>
    </li>
    <li>
        <a href="#3">TAB 3</a>
    </li>

</ul><!-- end .tabs-nav -->

<div class="tabs-container">
    <div class="tab-content" id="1">

        CONTENT OF TAB 1

    </div><!-- end #tab1 -->

    <div class="tab-content" id="2">

        CONTENT OF TAB 2

    </div><!-- end #tab2 -->

    <div class="tab-content" id="3">

        CONTENT OF TAB 3

    </div><!-- end #tab3 --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:21:25.957

您可以制作一个 lil 脚本来查看页面的哈希值`window.location.hash`。

因此，在文档准备好后，获取哈希值，然后模拟点击正确的选项卡。像这样的东西...

```
var hash = window.location.hash;
var tab = parseInt(hash.replace('#',''), 10);
$tabsNavLis.eq(tab - 1).click(); 
```

Tho，这只能像它一样工作，因为您的哈希值中包含选项卡的索引。但是，一旦有了哈希，您就会看到可以做什么。我希望这有帮助！

编辑：

这就是它应该的样子......虽然我自己没有尝试过代码。如果你想让我再弄乱它，把它放在一个[jsFiddle中。](http://jsfiddle.net/)

```
(function($){
    $(function() {

        var $tabsNav = $('.tabs-nav'),
            $tabsNavLis = $tabsNav.children('li'),
            $tabContent = $('.tab-content');

        $tabContent.hide();
        $tabsNavLis.first().addClass('active').show();
        $tabContent.first().show();

        $tabsNavLis.on('click', function(e) {
            var $this = $(this);

            $tabsNavLis.removeClass('active');
            $this.addClass('active');
            $tabContent.hide();

        });

        var hash = window.location.hash;
        var tab = parseInt(hash.replace('#', ''), 10);
        $tabsNavLis.eq(tab - 1).click();

    });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:01:48.343

阅读这篇文章，您应该能够弄清楚：

[http://spoiledmilk.dk/blog/html5-chang-the-browser-url-without-refreshing-page](https://web.archive.org/web/20120718061926/http://spoiledmilk.dk/blog/html5-changing-the-browser-url-without-refreshing-page)

# iphone - 你如何使 (NSString*)text 与 NSTimer 一起工作？

> ID：10423307
> 
> 赞同：0
> 
> 时间：2012-05-02T23:53:05.167
> 
> 标签：iphone, string, sdk, nstimer

我不能在 NSTimer 上使用 pokeme:@"1" 或 pokeme:1 或 pokeme:"sdfsdfs" 。我有错误出现。你如何解决这个问题？

```
- (void)Anything {

    [NSTimer scheduledTimerWithTimeInterval:06.00f target:self selector:@selector(Pokeme:@"1") userInfo:nil repeats:NO];
}

- (void)Pokeme:(NSString *)text {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:58:46.060

你不能这样做——选择器只是一个方法的*名称*，而该方法的参数将是计时器。您必须创建一个包含所需行为的新方法并将*其*作为选择器传递，或者使用类似[NSTimer+Blocks](https://github.com/jivadevoe/NSTimer-Blocks)的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T23:59:04.127

您没有正确调用选择器，也没有在 -Pokeme: 上采用正确的参数。

1.  您需要使用 @selector(Pokeme:) 调用选择器
2.  -PokeMe：需要将计时器作为参数（我建议您再次阅读[NSTimer 文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)）。
3.  请务必使用 userInfo 在 -Pokeme 中传递您需要的任何数据：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:02:27.933

这不是一个有效的选择器。选择器只是~~方法签名~~方法的名称，您不能将参数传递给它，因此您应该有

```
[NSTimer scheduledTimerWithTimeInterval:6.00f target:self selector:@selector(pokeMe:) userInfo:nil repeats:NO]; 
```

根据[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)文档，接收方法的签名应该不在表格中

```
- (void)timerFireMethod:(NSTimer *)theTimer 
```

所以你应该将你的方法定义为

```
- (void)pokeMe:(NSTimer *)timer; 
```

如果您想沿`userInfo`参数传递额外信息，则接受一种类型`id`并且可以从`timer`对象中检索。

一个工作示例是

```
[NSTimer scheduledTimerWithTimeInterval:06.00f target:self selector:@selector(pokeMe:) userInfo:@"I was passed" repeats:NO]; 
```

然后

```
- (void)pokeMe:(NSTimer *)timer;
{
    NSLog(@"%@", timer.userInfo);
}

#=> 2012-05-03 00:57:40.496 Example[3964:f803] I was passed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:05:28.940

见[`NSTimer Class Reference`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)。

这不是传递变量的正确方法，实际上会抛出编译器。用于**`userInfo`**传递一个对象，然后您可以将该对象转换为`NSString`您需要的任何内容。

```
/* INCORRECT */
[NSTimer scheduledTimerWithTimeInterval:06.00f target:self 
                        selector:@selector(Pokeme:@"1") userInfo:nil repeats:NO]; 
```

基本上，`userInfo`可以是一个对象：

## NSString

```
/* Pass @"1" as the userInfo object. */
[NSTimer scheduledTimerWithTimeInterval:6 target:self 
                           selector:@selector(Pokeme:) userInfo:@"1" repeats:NO];

/* Convert the object to NSString. */
-(void)Pokeme:(NSTimer*)timer {
    NSString *passedString = (NSString*)timer.userInfo;
} 
```

## NS词典

```
/* Create an NSDictionary with 2 Key/Value objects. */
NSDictionary *passTheseKeys = [NSDictionary dictionaryWithObjectsAndKeys:
                                   @"Some String Value 1", @"StringKey1", 
                                   @"Some String Value 2", @"StringKey2", nil];

/* Pass the NSDictionary we created above. */
[NSTimer scheduledTimerWithTimeInterval:6 target:self 
                  selector:@selector(Pokeme:) userInfo:passTheseKeys repeats:NO];

/* Convert the timer object to NSDictionary and handle it in the usual way. */
- (void)Pokeme:(NSTimer*)timer {
    NSDictionary *passed = (NSDictionary *)[timer userInfo];
    NSString * objectString1 = [passed objectForKey:@"StringKey1"];
    NSString * objectString2 = [passed objectForKey:@"StringKey2"];
} 
```

# ember.js - 如何在余烬视图中使用像这个 location.rating[issue.id] 这样的动态数组值

> ID：10423318
> 
> 赞同：0
> 
> 时间：2012-05-02T23:54:52.587
> 
> 标签：ember.js

我只想显示从数组中选择的内容，如果它们包含在另一个数组中，但似乎我不能这样做，如果你知道我应该怎么做，或者你有关于如何以不同方式做的建议我会很高兴听到它。

这是我的车把视图，

```
 {{#each App.User.issues}}
        {{#view App.LocationListItemIssueView issueBinding="this" locationBinding="parentView.location"}}
            {{#if location.rating[issue.id] != null}}
                {{location.rating[issue.id].value}}
           {{else}}         
                {{issue.name}} Not Rated    
           {{/if}}      
           {{issue.name}}   
        {{/view}} 
    {{/each}} 
```

我得到了他的错误

```
Uncaught Error: Parse error on line 1:
...                 {{#if location.rating[issue.id] != 
-----------------------^
Expecting 'ID' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:21:28.473

# if 不像 if() 那样工作。它不需要完整的语句并对其进行评估，而是需要一个指向属性的路径，该属性被转换为布尔值。

如果你想在一个集合视图中显示两个数组的交集，那么你应该创建一个 arrayController，并将该 arrayController 的内容作为计算属性来计算数组的交集。然后，将您的 collectionview 绑定到该数组控制器。

这看起来像：

```
MyApp.intersectionController = Em.ArrayController.create({
  arrayOneBinding: 'MyApp.firstArray',
  arrayTwoBinding: 'MyApp.secondArray',
  content: function() {
    ... create and return an array which is the intersection of both arrays ...
  }.property('arrayOne.@each', 'arrayTwo.@each').cacheable()
}); 
```

如果您想渲染数组中的所有项目，但以某种方式基于另一个数组更改模板，您可以在 itemViewClass 中执行以下操作：

```
rating: function() {
    return this.getPath('location.rating')[this.getPath(content.id)];
}.property('content', 'location').cacheable(); 
```

然后在你看来：

```
{{#if rating}}
  {{rating}}
{{else}}
  {{content.name}} not reated
{{/if}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:42:04.210

这也可以通过 Handlebars 助手解决。

```
Handlebars.registerHelper('compare', function(value, options){
    //This would be tweaked to fit your needs. 
    //I'm checking that a passed in value matches the bound value.
    return this.get('content_type') === value ? options.fn(this) : options.inverse(this);
}) 
```

[http://handlebarsjs.com/expressions.html](http://handlebarsjs.com/expressions.html)

# java - 您如何分析致命的 -javaagent 错误？

> ID：10423319
> 
> 赞同：3
> 
> 时间：2012-05-02T23:54:54.930
> 
> 标签：java, instrumentation, javaagents

我正在尝试使用 java.lang.instrument API 向 java.lang.Object 构造函数添加一个静态方法调用。我知道我的基础知识是正确的，因为如果我调用 System.gc() 方法，它就可以工作。我通过在有和没有仪器的情况下运行 -verbosegc 来验证这一点。如果我将方法调用更改为我自己的包中的静态类/方法，我会收到一个致命错误：

**本机方法中的线程“主”致命错误中的异常：-javaagent 的处理失败**

工作目录中没有创建转储文件，所以我发现很难找出问题所在。其他信息：

*   我确保静态方法类在转换之前加载到 premain 方法中
*   静态方法调用不会导致创建新对象
*   最后一个加载的类是 InterruptedIOException 虽然我认为这只是一个副作用

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-30T20:35:25.037

是的，正如@barry 在他的评论中指出的那样，您必须将`Boot-Class-Path`定义添加到 Java 代理的清单中。对我来说，我在代理中使用 javassist 来创建字节码，所以我的清单如下所示：

```
Manifest-Version: 1.0
Premain-Class: com.company.agent.Agent
Agent-Class: com.company.agent.Agent
Boot-Class-Path: javassist-3.18.2-GA.jar agent.jar 
```

我将所有应用程序的 jar 文件与 javassist 和代理 jar 放在同一个 lib 目录中。使用类路径上的所有内容，在同一个文件夹中，它可以工作。

# django - 如何使用 django-social-auth 查看/重定向到 google plus 用户个人资料？

> ID：10423321
> 
> 赞同：1
> 
> 时间：2012-05-02T23:55:21.023
> 
> 标签：django, oauth-2.0, google-plus, django-socialauth

重定向到 G+ 个人资料需要“https://plus.google.com/<\profile_id>/posts”格式。我的问题是我还没有找到如何为网站用户动态获取 profile_id 的解决方案。我当前的 django-social-auth 实现（未保存在数据库中）没有获取它，并且 google-oauth2 帐户记录的 UID 字段保存了 google 电子邮件，也许如果我能找到如何重定向到的实现使用电子邮件的 G+ 个人资料，这很好（尽管一些消息来源说目前不可能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:21:47.813

无法使用 Google+ API 从用户的电子邮件地址中确定用户的个人资料 ID。

但是，如果您能够通过 OAuth 2.0 流程发送用户，则可以使用 REST API 的[people get 方法](https://developers.google.com/+/api/latest/people/get)确定他们的个人资料 ID 。如果您使用的是[Google 的 API Python 客户端库](http://code.google.com/p/google-api-python-client/)，代码将如下所示：

```
import apiclient.discovery
import httplib2

flow = OAuth2WebServerFlow(
    client_id=client_id,
    client_secret=client_secret,
    scope='https://www.googleapis.com/auth/plus.me',
    user_agent='google-api-client-python-plus-cmdline/1.0',
    xoauth_displayname='Google Plus Client Example App'
    )
credentials_file = 'plus_auth.dat'
storage = Storage(credentials_file)
credentials = run(flow, storage)

http = credentials.authorize(http)
service = apiclient.discovery.build('plus', 'v1', http=http, developerKey=api_key)
people_resource = service.people()    
people_document = people_resource.get(userId='me').execute()

print "ID: " + people_document['id'] 
```

[您还可以在Google+ Python 入门应用](http://code.google.com/p/google-plus-python-starter/source/browse/cli/plus_cli.py)中找到更完整的示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T22:46:59.417

用户 ID 是 google 在 OAuth2 工作流程中发送的数据的一部分，您可以通过以下方式存储它然后访问它：

1.  定义此设置：

    GOOGLE_OAUTH2_EXTRA_DATA = [（'id'，'id'）]

2.  访问标识：

    社交 = user.social_auth.get(provider='google-oauth2')

    profile_id = social.extra_data['id']

# jquery - 这些 jQuery 脚本的正确包含顺序是什么？

> ID：10423322
> 
> 赞同：0
> 
> 时间：2012-05-02T23:55:23.117
> 
> 标签：jquery, asp.net-mvc-3, razor

这是在 asp.net mvc3 视图中。`@`标记来自剃须刀引擎。根据这些脚本的顺序，会发生不同的事情。正确的顺序是什么？这是我目前使用的顺序，它似乎有效。如果我更改订单错误开始出现。

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" 
 type="text/javascript</script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" 
 type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
 type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:18:20.610

validate 和 unobtrusive 的顺序并不重要，但两者都应该在 validate.unobtrusive 之前。您在此处复制的代码与 MVC3 模板相同，表明这是官方支持的路径。

# c# - 如何在不替换小数的情况下将小数转换为字符串？

> ID：10423326
> 
> 赞同：0
> 
> 时间：2012-05-02T23:56:10.083
> 
> 标签：c#

我有一个对象，`CellData`，等于`-0.000009482102880653542`。

我想在将其导出为`.csv`文件时按原样显示。为此，我必须将对象转换为字符串。

```
output = CellData.ToString();
output = string.Format("{0}", CellData); 
```

`output`上述两种情况导致`-9.48210288065354E-06`. 我希望它返回 `output`为`-0.0000094821028806535423`（带小数）。

无论如何我可以让这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:21:51.120

如果将数字存储为小数，它将以非科学（正常）表示法输出。根据数据的来源，您可能需要从双精度转换：

```
double myNumber = -0.0000094821028806535423;
Object CellData = new Decimal(myNumber); 
```

（给出 -0.00000948210288065354），或者您可以直接使用小数：

```
Object CellData = -0.0000094821028806535423m; 
```

如果您从双精度数转换，结果会不太精确，因为双精度数不能准确地表示所有数字，并且您对它们执行的计算越多，它们最终可能会离精确结果越远。

如果数字来源于您的代码并且您不需要对其执行任何计算，您也可以直接将其存储为字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T00:20:34.463

尝试不使用

```
output = string.Format("{0}", CellData); 
```

只留下

```
output = CellData.ToString(); 
```

# scala - 在 Scala 中废弃你的样板文件？

> ID：10423329
> 
> 赞同：7
> 
> 时间：2012-05-02T23:56:25.147
> 
> 标签：scala, haskell

Haskell 有这个很酷的通用遍历的东西，可以让你`map`在集合中的每个节点上调用类似的东西，无论是自下而上还是自上而下。它被调用`everywhere`，你会做类似的事情，`everywhere f tree`并且`f`会在你的树中的每个节点上被调用。

在 Scala 中编写等价的 for`Traversable`很容易，但 Haskell 也适用于元组和 case 类的等价物，或者更一般地，Scala 称之为`Product`s 的东西。

`Product`您可以使用该方法遍历 a 中的元素`productIterator`，但是一旦您知道构造函数的参数（实际上，我猜是该`apply`方法）应该是什么，是否有一些简单的方法可以将元组或案例类重新组合在一起？

```
def mapOnProduct[X](f: X -> X, prod: Product) {
  val newArgs = prod.productIterator.map {
    case x: X => f(x)
    case id => id
  }.toList
  [?].apply(newArgs: _*)
} 
```

我可以用什么代替`[?]`，以便有一些工作机会？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T05:09:18.807

请参阅 Miles Sabin 的 Shapeless [Shapeless](https://github.com/milessabin/shapeless)。有一个[sybclass测试中的where用法的例子](https://github.com/milessabin/shapeless/blob/master/core/src/test/scala/shapeless/sybclass.scala)

# java - Java中有没有办法从控制台调用方法？

> ID：10423331
> 
> 赞同：1
> 
> 时间：2012-05-02T23:56:36.113
> 
> 标签：java, io

Java中有没有办法从控制台调用方法？

我知道可以使用 args 数组，例如`args[0]`，获取输入文件的名称，但我不知道 Java 是否允许从控制台调用方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T23:59:39.297

好吧，您可以使用反射并将您想要调用的方法的名称作为程序的参数之一传递，然后使用它来反射调用它。

根据您真正想做的事情，您可能会考虑使用[BeanShell](http://www.beanshell.org/)之类的东西，它可以让您以更简单的方式从 Beanshell 控制台与 Java 进行交互，前提是您的问题是“如何从控制台使用 Java？” 而不是如何以编程方式执行此操作。

例如，从 Beanshell 控制台我可以执行以下操作：

```
print(eval("Math.max(1,2)")); 
```

它会在我的控制台中产生 2。

您还可以将 beanshell.jar 添加到应用程序类路径并以编程方式使用 eval 方法。

```
import bsh.Interpreter;
//...
Interpreter i = new Interpreter();  
Integer r = (Integer) i.eval("Math.max(1,2)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:05:52.663

您只是想从命令行触发方法的执行，还是在后台运行其他东西？

如果还有其他问题，那么您需要考虑线程，否则您的应用程序将被阻塞等待命令行上的 IO。

根据要调用的方法数量以及您想要的动态程度......您可以使用反射（它将类名和方法名作为参数并执行它们）。

# vb.net - VB 2010 中 do while 语句中的“预期语句结束”错误

> ID：10423332
> 
> 赞同：0
> 
> 时间：2012-05-02T23:56:45.140
> 
> 标签：vb.net, visual-studio-2010

我有一行代码在一个语句中工作，但不是在第二个语句中。我不确定我做错了什么，所以任何帮助将不胜感激。我正在缓慢但肯定地学习，并且由于我在这里找到的帮助，这是不小的差距=）错误发生在`intResult = intSelection x intCount`第二个`Do` `While`循环的行中。

蓝色波浪线位于“intCount”下方，仅供参考

```
Dim intSelection As Integer
Dim intCount As Integer = 0
Dim intResult As Integer
Dim strDisplay As String

Private Sub txtSelection_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSelection.TextChanged

End Sub

Private Sub btnSelection_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSelection.Click
    If intSelection >= 0 And intSelection <= 12 Then
        Do While AdditionToolStripMenuItem.Checked = True And intCount <= 12
            intResult = intSelection + intCount
            strDisplay = intSelection & " + " & intCount & " = " & intResult
            lstResults.Items.Add(strDisplay)
            intCount += 1
        Loop

        Do While MultiplicationToolStripMenuItem.Checked = True And intCount <= 12
            intResult = intSelection x intCount
            strDisplay = intSelection & " x " & intCount & " = " & intResult
            lstResults.Items.Add(strDisplay)
            intCount += 1
        Loop

    Else
        MsgBox("Please enter a value between 0 and 12", , "Input Error")

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:01:36.903

`intSelection x intCount` 应该是 intSelection [`*`](http://msdn.microsoft.com/en-us/library/583dwz2k.aspx)intCount 看看[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)，它解释了可用于 VB.Net 的运算符

# css - Div 背景在 IE 7、8 和 IE 9 中没有出现/在 IE 8 中没有滚动？

> ID：10423336
> 
> 赞同：0
> 
> 时间：2012-05-02T23:56:56.483
> 
> 标签：css, internet-explorer

我们正在完善这个网站：dev.underglassframing.com

在每个浏览器中一切都很好，除了主要内容 div (#main) 后面的背景在 IE 7、8 和 9 中的内容之前停止。我在末尾添加了一个 clear:both div，背景没有继续。

其次，网站在 IE8 中根本不滚动！！我不知道发生了什么。任何帮助都会非常棒！

谢谢！珍妮弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:08:41.000

您的问题似乎存在于您的代码的这一部分：

```
body {
   filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/index_bg.png', sizingMethod='scale')
} 
```

IE 过滤器有时会导致一些奇怪的显示问题，消除这似乎可以纠正您描述的所有问题（包括 IE8 滚动）。对于背景，该过滤器似乎正在切断`#main`浏览器窗口底部的背景渲染。

既然你已经有了这个`background-image: url("images/index_bg.png")`集合，我什至不确定你为什么觉得需要有`filter`代码。通过删除它，我无法检测到任何变化（除了它都按你的意愿工作）。

# macos - 在 Coda 中保存 FTP 服务器

> ID：10423337
> 
> 赞同：0
> 
> 时间：2012-05-02T23:57:01.447
> 
> 标签：macos, coda

我开始使用 Coda 因为我刚买了一台新的 Mac，我想知道是否可以保存 FTP 服务器，因为我经常在一个月内使用大约 9 或 10 台服务器，我真的不想一直插入用户信息！

希望你能帮忙！

问候安德烈亚斯·沃斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:06:40.723

是的，一点没错。你想要的是 Coda 的“网站”。在 coda 中将每个 FTP 服务器设置为“站点”，您可以在站点中保存服务器地址、用户名和密码。因此，要建立一个新站点：

1.  打开尾声
2.  Coda 应该会在“站点”页面自动打开。如果没有，请按 Command-1 转到站点
3.  右键单击，然后选择“添加站点”。
4.  填写网站的详细信息，然后保存。

每当您打开该站点时，Coda 都会自动连接到服务器。

一旦你看到它应该是不言自明的，但如果你有任何问题，请告诉我。

# python - 为什么我的代码一直停止？

> ID：10423338
> 
> 赞同：1
> 
> 时间：2012-05-02T23:57:06.417
> 
> 标签：python, python-2.7, urllib

我制作了一个 Python 脚本，它读取一个文本文件然后转到一个 url，并将文本文件中的扩展名添加到 url。问题是脚本在完成读取文件之前一直停止。我不知道为什么。

```
import urllib
f = open("extension/1.txt", 'r')

for x in f.readline():    
    a = f.readline()
    url = "http://www.link.com/whatever/%s" % a
    print url
    urllib.urlretrieve(url, a) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T23:59:41.083

通过调用`for x in f.readline():`，您将通过`string`作为可迭代的文件的第一行，然后通过 为第一行中的每个字符获取一个新行`a = f.readline()`。我不认为这是你的意图。

该`file`对象`f`本身是可迭代的，因此您可以简单地执行以下操作：

```
for line in f:
    value = line.rstrip('\n')
    url = "http://www.link.com/whatever/%s" % value
    print url
    urllib.urlretrieve(url, value)  # Not sure why you want to send value (your a) here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:13:14.340

您的代码执行以下操作：

1.  从文件中读取一行 ( `f.readline()`)。
2.  对于该行 ( `for x in f.readline()`) 中的每个字符，读取一个附加行 ( `a = f.readline()`) 并处理它。

因此，它只会处理与文件第一行中的字符一样多的行，并且永远不会处理第一行。

您可能希望将该循环编写为：

```
with open("extension/1.txt") as f:
    for a in f:
        a = a.strip()
        url = "http://www.link.com/whatever/%s" % a
        print url
        urllib.urlretrieve(url, a) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:03:48.773

也许一开始阅读所有的行是这样的：

```
fp = open(the_file)
lines = fp.readlines()
fp.close()

for line in lines:
    do something 
```

# arrays - $#vvv--; 是什么意思？对 Perl 中的哈希做些什么？

> ID：10423341
> 
> 赞同：3
> 
> 时间：2012-05-02T23:57:18.953
> 
> 标签：arrays, perl, hash, key

这是整个脚本，出于某种神秘的原因输出“642”

```
#!usr/bin/perl 
%vvv = (1,2,3,4,5,6);
$#vvv--;
%vvv = reverse %vvv;
print keys %vvv, "\n"; 
```

最后一条语句中的“键”还有什么作用？谢谢你的时间。我只是赶时间，没有适当的时间进行研究。因此，我再次感谢您的意见。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T00:13:26.017

您应该始终运行脚本

```
use strict;
use warnings; 
```

如果你有，你会注意到一个错误：

```
Global symbol "@vvv" requires explicit package name at ... 
```

这意味着`$#vvv`指的是数组的最大索引`@vvv`，而不是哈希。在 perl 中，`@vvv`和`%vvv`是两个独立的变量。所以`@vvv`与 无关`%vvv`，而且那个操作没有任何用处。

编写代码的人可能一直在想的是一种截断数组的方法：

```
my @array = 1 .. 6; # 1,2,3,4,5,6 but written as a range
$#array--;          # lower maximum index by 1
print "@array";     # prints "1 2 3 4 5" 
```

但是，这不起作用希望哈希。

正如 Friar 所解释的，[`reverse`](http://perldoc.perl.org/functions/reverse.html)这是一种交换散列键和值的方法。当用于字符串时，它会反转字符串，例如“foobar” -> “raboof”，但当用于列表时，它会反转它，所以`1,2,3,4,5,6`变成`6,5,4,3,2,1`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T00:02:57.960

$#vvv-- 看起来像评论。发生的事情是哈希，作为偶数元素数组，只是被反转了。所以它来自：

```
%vvv = (
    1 => 2,
    3 => 4,
    5 => 6
); 
```

至：

```
%vvv = (
    6 => 5,
    4 => 3,
    2 => 1
); 
```

因此，当打印键时，它会抓取 642 个，或哈希的新的当前键。

# jquery-ui - 无法使用 h:components 在 JQueryUI 对话框中显示文本

> ID：10423342
> 
> 赞同：1
> 
> 时间：2012-05-02T23:57:20.787
> 
> 标签：jquery-ui, jsf, jsp-tags

我正在尝试在 JSF 中创建 JQueryUI 对话框。我在父页面的 <div></div> 中包含了对话框代码，如 JQueryUI 对话框演示[http://jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)所示。当我使用像 <label> 或 <input> 这样的普通 HTML 标签时，我能够在对话框中显示所需的文本，但是当我尝试使用 h:outputLabel、h:outputText 等 h 组件时，文本会显示在父页面而不是对话框。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:47:26.133

在古老的 JSF 1.0/1.1 中，您需要将普通的 HTML 元素包装在`<f:verbatim>`.

例如

```
<f:verbatim><div></f:verbatim>
    <h:inputText ... />
<f:verbatim></div></f:verbatim> 
```

只有从 JSF 1.2 开始，才有可能在 JSF 视图中嵌入普通的 HTML 元素，而无需使用`<f:verbatim>`. 您可能需要考虑升级到 JSF 1.2 或者更好的 JSF 2.0。

# javascript - 带有 Javascript 拖动事件的 PageX 和 PageY

> ID：10423345
> 
> 赞同：2
> 
> 时间：2012-05-02T23:57:26.860
> 
> 标签：javascript, drag, crop

我有一个浏览器应用程序，可以在图像上放置一组裁剪标记。裁剪标记为 100 像素 x 100 像素，为黑色，在右上角和左下角形成一个角。裁剪标记从图像的右上角和左下角开始，然后可以独立拖动（在 iPad 上的 Mobile Safari 上尝试此操作）。拖动事件将通过 PageX 和 PageY 告诉我元素在哪里。我注意到两件事，虽然我不明白。

对于初学者来说，一旦我触摸一个裁剪标记，它就会跳到我手指下方约 100 像素，所以我从上方移动它。

其次，当我得到拖动事件，特别是在我的手指抬起之前的最后一个事件时，我不确定它在哪里计算 PageX 和 PageY。我需要确定这两个裁剪标记的角在哪里，以便确定裁剪区域的位置和尺寸。我不知道它是否根据我的手指在哪里计算位置，以及我是否可以确定角落在哪里。

有任何想法吗？

谢谢！

```
<!DOCTYPE html>
<html>
    <head>
        <title>Gestures</title>
        <link rel="stylesheet" href="resources/css/main.css">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="viewport" content="width=device-width, height=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

        <script type="text/javascript" src="resources/js/jquery-1.6.2.js"></script> 
        <script type="text/javascript" src="resources/js/jquery.min.js"></script>
        <script type="text/javascript" src="resources/js/jquery.event.drag.min.js"></script>        
        <!--script src="resources/js/prototype.js" type="text/javascript"></script-->    
        <script type="text/javascript">
        var ll_curX = 50;
        var ll_curY = 285;
        var ur_curX = 350;
        var ur_curY = 60;

        $(function () 
        {
            $('#ur_corner').bind('drag', function (event) 
            {
                curX = event.pageX;
                curY = event.pageY;
                offsetX = curX - ur_curX;
                offsetY = curY - ur_curY;
                document.all.log.innerHTML += "...Drag curX = " + curX + ", curY = " + curY + ", offX =  "  + offsetX + ", offY = " + offsetY + "...</br>";                                     
                var $this = $(this);
                $(this).css({
                    left: (event.pageX-100) + 'px',
                    top: (event.pageY) + 'px'
                });
                //ur_curX = event.pageX;
                //ur_curY = event.pageY;
                ur_curX = curX + offsetX;
                ur_curY = curY + offsetY;

                //document.all.log.innerHTML += "...Drag left = " + event.pageX + ", top = " + event.pageY + "...</br>";
            });
        });     

        $(function () 
        {
            $('#ll_corner').bind('drag', function (event) 
            {
                curX = event.pageX;
                curY = event.pageY;
                offsetX = curX - ll_curX;
                offsetY = curY - ll_curY;

                var $this = $(this);
                $(this).css({
                    left: (event.pageX) + 'px',
                    top: (event.pageY-100) + 'px'
                });
                //ll_curX = event.pageX;
                //ll_curY = event.pageY;
                ll_curX = curX + offsetX;
                ll_curY = curY + offsetY;

                //document.all.log.innerHTML += "...Drag left = " + event.pageX + ", top = " + event.pageY + "...</br>";
            });
        });                 

        $(function ()
        {
            $('#cropButton').bind('click', function(event)
            {
                crop_id = "crop";
                img_id = "page";
                x = ll_curX;
                y = ur_curY;
                width = ur_curX - 50; // - ll_curX;
                height = ll_curY - ur_curY;
                document.all.log.innerHTML += "...Crop ll_curyY = " + ll_curY + ", ur_curY = " + ur_curY + "...</br>";
                document.all.log.innerHTML += "...Crop x = " + x + ", y = " + y + ", width = " + width + ", height = " + height + "...</br>";
                $('#crop').html('<img id="crop_img" src="resources/images/cervelor3.jpg" />');
                $('#crop').css({
                    position: 'relative',
                    overflow: 'hidden' 
                });

                //var scale_x = $('#crop').getWidth() / width;
                //var scale_y = $('#crop').getHeight() / height;                    
                document.all.log.innerHTML += "...Crop ll_curyY = " + ll_curY + ", ur_curY = " + ur_curY + "...</br>";

                $('#crop_img').css({
                    position: 'absolute',
                    display: 'block',
                    left: x + 'px', //left: (-x * scale_x) + 'px',
                    top: y + 'px', //top: (-y * scale_y) + 'px',
                    width: width + 'px', //$('#page').getWidth() * scale_x) + 'px',
                    height: height + 'px' //($('#page').getHeight() * scale_y) + 'px'
                });

            /*              
                $(crop_id).update('<img id="' + crop_id + '_img" src="' +
                    $(img_id).getAttribute('src') + '" style="display:none" />');

                var scale_x = $(crop_id).getWidth() / width;
                var scale_y = $(crop_id).getHeight() / height;

                $(crop_id).setStyle({
                    position: 'relative',
                    overflow: 'hidden' 
                });

                $(crop_id + '_img').setStyle({
                    position: 'absolute',
                    display: 'block',
                    left: x + 'px', //left: (-x * scale_x) + 'px',
                    top: y + 'px', //top: (-y * scale_y) + 'px',
                    //width: width + 'px', //($(img_id).getWidth() * scale_x) + 'px',
                    height: height + 'px' //($(img_id).getHeight() * scale_y) + 'px'
                });
                //document.all.log.innerHTML += "...Crop left = " + x + ", top = " + y + ", scale_x = " + scale_x + ", scale_y = " + scale_y + "...</br>";
                document.all.log.innerHTML += "...Crop height = " + height + ", width = " + width + "...</br>";
            */
            });
        }); 

    </script>
</head>
<body>
    <div id="container" style="width:800px; height:40px;">              
        <div id="header" style="background-color:#FFA500;">
            <h1 style="margin-bottom:0;">Print Preview</h1>
        </div>
        <div id="preview" style="background-color:#FFD700;height:600px;width:400px;float:left;">
            <div id="paper">
                <!--div id="clipping" style="width:300px; height:225px"-->
                    <img id="page" src="resources/images/cervelor3.jpg" height="225px" width="300px">
                    <div id="clip"> 
                        <img id="ll_corner" src="resources/images/lowerleftcorner.png" height="100px" width="100px">                                                
                        <img id="ur_corner" src="resources/images/upperrightcorner.png" height="100px" width="100px">   
                    </div>                                              
                <!--/div-->                     
            </div>
            <div id = "buttonDiv">
                <!-- Pass crop() the original image id, the id of the div to receive the crop, the left and top position of the
                     area to crop, then the width, and height of the crop -->
                <button id="cropButton" type="button">Crop</button>
            </div>
            <div id="crop" style="width:300px; height:225px;">
                <img src="resources/images/cervelor3.jpg" style="height:225px; width:300px;">
            </div>
        </div>
        <div id="content" style="background-color:#EEEEEE;height:600px;width:400px;float:left;">
            <h2>Print Settings</h2>
            </br>
            <label class=copies>Copies</label>
            <textarea class="box" cols="1" rows="1">1</textarea>
            </br></br></br>
            <label class=duplex>2-Sided</label>
            <textarea class="box" cols="1" rows="1">Off</textarea>                              
            </br></br></br>
            <label class=contrast>Contrast</label>
            <input class=slider type="range"  min="0" max="100" value="50" step="5"/>
            <div id="log">
            </div>
        </div>
        <div id="footer" style="background-color:#FFA500;clear:both;text-align:center;">Copyright © 2012 www.hp.com</div>
    </div>      
    <!-- div id="trace"></div> -->          
    <!-- div id="gesture" style="background:red;width:300px;height:300px;z-index:5000;position:absolute"><div> -->          
</body>
</html> 
```

# jquery - jQuery “不显眼” ajax 导致大量警告爆炸

> ID：10423346
> 
> 赞同：0
> 
> 时间：2012-05-02T23:57:37.500
> 
> 标签：jquery, ajax, razor

每个点击事件都会触发大约 4 到 8 个警告，具体取决于您的尝试程度。加起来一百多很容易。警告显示`event.layerX and event.layerY are broken and deprecated in WebKit. They will be removed from the engine in the near future.`警告是在我的视图中包含此警告的结果（这是在 asp.net mvc3 视图中）

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

什么给出了，为什么所有的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:21:59.237

尝试将其与来自 MVC4 的 jquery.unobtrusive-ajax.js 进行比较和/或使用 Microsoft 的 CDN。 [http://www.asp.net/ajaxlibrary/cdn.ashx#ASPNET_MVC_Releases_on_the_CDN_10](http://www.asp.net/ajaxlibrary/cdn.ashx#ASPNET_MVC_Releases_on_the_CDN_10)

# cakephp - 为 AuthComponent 中的普通 MD5 哈希禁用安全盐？

> ID：10423352
> 
> 赞同：1
> 
> 时间：2012-05-02T23:58:24.437
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我的 CakePHP 2.1 应用程序与另一个应用程序共享其用户数据库表。为了让用户能够登录到这两个应用程序，密码字段需要在纯 MD5 中进行散列。更改其他应用程序或数据库不是一种选择。

我可以通过以下方式将散列算法从 SHA1（默认？）更改为 MD5：

```
<?php
// AppController.php

public function beforeFilter()
{
    Security::setHash('md5');
}
?> 
```

我可以使用纯 MD5 密码向系统添加新用户：

```
<?php
// User.php

public function beforeSave()
{
    if (isset($this->data['User']['password']))
    {
        $this->data['User']['password'] = Security::hash($this->data['User']['password'], 'md5', false);
    }
}
?> 
```

请注意，`false`布尔参数 for`Security::hash`告诉 Cake 不要在密码上使用安全盐。

问题出现在身份验证上。当我通过`$this->Auth->login()`使用表单身份验证登录用户时，我相信`AuthComponent`仍然使用 MD5 哈希来验证密码，但它仍在应用安全盐。

解决此问题的唯一方法是将 Security salt 和 cipherSeed 设置为空字符串：

```
<?php

// core.php
Configure::write('Security.salt', '');
Configure::write('Security.cipherSeed', '');

?> 
```

...或者只是将它们注释掉。

有没有办法告诉`$this->Auth->login()`忽略安全盐而不必将它们从`core.php`. 我仍然想使用`AuthComponent::password()`其他地方的散列功能。

解决此问题的最安全和最可靠的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:53:56.010

您可以通过将正确的用户传递给 Auth->login() 函数来手动登录：

```
$username = $this->request->data['User']['username'];
$password = Security::hash($this->data['User']['password'], 'md5', false);

$user = $this->User->find('first', array('conditions' => array('username' => $username, 'password' => $password)));
if($user !== false)
{
    $this->Auth->login($user['User']);
} 
```

# delphi - 如何使用 delphi VCL 组件子类化 WinApi Edit 控件？

> ID：10423358
> 
> 赞同：1
> 
> 时间：2012-05-02T23:59:28.277
> 
> 标签：delphi, winapi

我正在尝试[子类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633570%28v=vs.85%29.aspx#subclassing_window)化[WinApi 编辑控件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775458%28v=vs.85%29.aspx)并覆盖绘制方法。到目前为止，我正在使用[SetWindowLong](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx)函数和**GWL_WNDPROC**标志来覆盖原始窗口过程，然后我收到 WM_PAINT 消息并使用我自己的 Paint 逻辑，这很好用，但我想知道是否可以创建*阴影*TEdit组件并将 Winapi EDIT 控件的原始句柄传递给 Delphi TEdit 组件，这样我就可以使用影子 TEdit 来获取和设置 EDIT 控件的属性。那可能吗？

**更新**

按照 Remy 关于使用`WindowHandle`属性的建议，我以这段代码结束，但不起作用（设置编辑控件的颜色无效）。

```
type
   TWinControlCracker= class(TWinControl);

Var
 ShadowEdit : TEdit;
 newWndProc : Pointer;
 EditHandle : NativeInt;
begin
 EditHandle:=$00320530;//this is the handle to the EDIT control
 ShadowEdit:=TEdit.Create(nil);
 TWinControlCracker(ShadowEdit).WindowHandle:=EditHandle;
 newWndProc := MakeObjectInstance(ShadowEdit.WindowProc);
 SetWindowLong(EditHandle, GWL_WNDPROC, NativeInt(newWndProc));
 ShadowEdit.Color:=clLime;
 ShadowEdit.Refresh;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:30:55.130

`TWinControl`（`TEdit`派生自）具有`WindowHandle`您可以分配非 VCL 的公共属性`HWND`。只需确保在销毁之前将属性设置回 0`TEdit`或执行任何可能导致其在`RecreateWnd()`内部调用其方法的操作，否则 WinAPI 控件将被销毁。并且不要使用任何需要`TEdit.Parent`属性有意义的东西。

# jquery - jQuery 交叉淡入淡出图像无限

> ID：10423374
> 
> 赞同：0
> 
> 时间：2012-05-03T00:01:03.707
> 
> 标签：jquery, jquery-animate, infinite-loop

此代码无限交替 2 个图像，它的工作原理：

```
<img src="../images/opisSlike/nagrada2a.jpg" class = "nag2altImg" alt=""/>
<img src="../images/opisSlike/nagrada2b.jpg" class = "nag2altImg2" alt=""/>
//second image starts with opacity 0

<script type="text/javascript">

function myAnimate(){

    $('img.nag2altImg').delay(2500).animate({"opacity": "0"}, 1500);
    $('img.nag2altImg').delay(2500).animate({"opacity": "1"}, 1500);        

    $('img.nag2altImg2').delay(2500).animate({"opacity": "1"}, 1500);
    $('img.nag2altImg2').delay(2500).animate({"opacity": "0"}, 1500);       

    // this animation lasts for 8 seconds: 2500 delay + 1500 animation + 2500 delay + 1500 animation
}

$(document).ready(myAnimate());
$(document).ready(setInterval(function() {myAnimate()}, 8000));

</script> 
```

但我想知道，有没有更优雅的方式，可以这么说，制作这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:06:51.707

```
 function myAnimate(){ 

        $('img.nag2altImg').delay(2500).animate({"opacity": "0"}, 1500); 
        $('img.nag2altImg').delay(2500).animate({"opacity": "1"}, 1500);         

        $('img.nag2altImg2').delay(2500).animate({"opacity": "1"}, 1500); 
        $('img.nag2altImg2').delay(2500).animate({"opacity": "0"}, 1500);        

        // this animation lasts for 8 seconds: 2500 delay + 1500 animation + 2500 delay + 1500 animation 
        // run forever.
        myAnimate();
    } 

$(document).ready(myAnimate()); 
```

这将是一个更好的解决方案：

```
function myAnimate() {
    $('img.nag2altImg2').animate({
        opacity: 1.0
    }, {
        duration: 1500
    }).animate({
        opacity: 0
    }, {
        duration: 1500
    }).animate({
        opacity: 1.0
    }, {
        duration: 1500,
        complete: myAnimate
    })
}
$(document).ready(myAnimate()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:05:41.677

使用**一个**计时器。使其全球化。让您的所有动画都基于一个计时器。手动编码动画并将 jQuery 抛在脑后，因为它很慢并且在同时执行多个动画时存在问题。将整个内容包装在自定义库中。从您的前端拨打一个电话。

# c# - 多个 InfoPath 互操作自动化实例

> ID：10423375
> 
> 赞同：7
> 
> 时间：2012-05-03T00:01:09.043
> 
> 标签：c#, windows-services, infopath, office-interop, office-automation

我正在尝试通过 Windows 服务自动化 Office InfoPath 2010 的多个并行实例。我了解不支持通过服务自动化 Office，但这是我的客户的要求。

我可以以并行方式自动化其他 Office 应用程序，但是 InfoPath 的行为不同。

我发现，无论进行多少次并行调用，都只会创建一个 INFOPATH.EXE 进程实例`CreateObject("InfoPath.Application")`。与此相反，可以通过类似的机制创建多个 WINWORD.EXE 实例`CreateObject("Word.Application")`

要重现此问题，可以使用简单的控制台应用程序。

```
static void Main(string[] args) {
    // Create two instances of word in parallel
    ThreadPool.QueueUserWorkItem(Word1);
    ThreadPool.QueueUserWorkItem(Word2);

    System.Threading.Thread.Sleep(5000);

    // Attempt to create two instances of infopath in parallel
    ThreadPool.QueueUserWorkItem(InfoPath1);
    ThreadPool.QueueUserWorkItem(InfoPath2);
}

static void Word1(object context) {
    OfficeInterop.WordTest word = new OfficeInterop.WordTest();
    word.Test();
}

static void Word2(object context) {
    OfficeInterop.WordTest word = new OfficeInterop.WordTest();
    word.Test();
}

static void InfoPath1(object context) {
    OfficeInterop.InfoPathTest infoPath = new OfficeInterop.InfoPathTest();
    infoPath.Test();
}

static void InfoPath2(object context) {
    OfficeInterop.InfoPathTest infoPath = new OfficeInterop.InfoPathTest();
    infoPath.Test();
} 
```

InfoPathTest 和 WordTest 类 (VB) 在另一个项目中。

```
Public Class InfoPathTest
    Public Sub Test()
        Dim ip As Microsoft.Office.Interop.InfoPath.Application
        ip = CreateObject("InfoPath.Application")
        System.Threading.Thread.Sleep(5000)
        ip.Quit(False)
    End Sub
End Class

Public Class WordTest
    Public Sub Test()
        Dim app As Microsoft.Office.Interop.Word.Application
        app = CreateObject("Word.Application") 
        System.Threading.Thread.Sleep(5000)
        app.Quit(False)
    End Sub
End Class 
```

互操作类只是创建自动化对象、休眠然后退出（尽管在 Word 的情况下，我已经完成了更复杂的测试）。

运行控制台应用程序时，我可以看到（通过任务管理器）并行创建了两个 WINWORD.EXE 进程，并且只创建了一个 INFOPATH.EXE 进程。事实上，当 InfoPathTest 的第一个实例调用 ip.Quit 时，INFOPATH.EXE 进程就会终止。当 InfoPathTest 的第二个实例调用 ip.Quit 时，会引发 DCOM 超时异常 - 看起来这两个实例共享相同的底层自动化对象，并且在第一次调用 ip.Quit 后该对象不再存在。

在这个阶段，我的想法是每个用户登录只支持一个 INFOPATH.EXE。我扩展了 Windows 服务以启动两个新进程（一个名为 InfoPathTest 的控制台应用程序），每个进程都在不同的用户帐户下运行。然后，这些新进程将尝试自动化 INFOPATH.EXE

这就是有趣的地方，这确实有效，但仅在某些机器上有效，我无法弄清楚为什么会这样。

以及服务代码（在[AsproLock](http://asprosys.blogspot.com.au/2009/03/perils-and-pitfalls-of-launching.html)的帮助下）：

```
public partial class InfoPathService : ServiceBase {
    private Thread _mainThread;
    private bool isStopping = false;

    public InfoPathService() {
        InitializeComponent();
    }

    protected override void OnStart(string[] args) {
        if (_mainThread == null || _mainThread.IsAlive == false) {
            _mainThread = new Thread(ProcessController);
            _mainThread.Start();
        }
    }

    protected override void OnStop() {
        isStopping = true;
    }        

    public void ProcessController() {
        while (isStopping == false) {
            try {

                IntPtr hWinSta = GetProcessWindowStation();
                WindowStationSecurity ws = new WindowStationSecurity(hWinSta, System.Security.AccessControl.AccessControlSections.Access);
                ws.AddAccessRule(new WindowStationAccessRule("user1", WindowStationRights.AllAccess, System.Security.AccessControl.AccessControlType.Allow));
                ws.AddAccessRule(new WindowStationAccessRule("user2", WindowStationRights.AllAccess, System.Security.AccessControl.AccessControlType.Allow));
                ws.AcceptChanges();

                IntPtr hDesk = GetThreadDesktop(GetCurrentThreadId());
                DesktopSecurity ds = new DesktopSecurity(hDesk, System.Security.AccessControl.AccessControlSections.Access);
                ds.AddAccessRule(new DesktopAccessRule("user1", DesktopRights.AllAccess, System.Security.AccessControl.AccessControlType.Allow));
                ds.AddAccessRule(new DesktopAccessRule("user2", DesktopRights.AllAccess, System.Security.AccessControl.AccessControlType.Allow));
                ds.AcceptChanges();

                ThreadPool.QueueUserWorkItem(Process1);
                ThreadPool.QueueUserWorkItem(Process2);

            } catch (Exception ex) {
                System.Diagnostics.Debug.WriteLine(String.Format("{0}: Process Controller Error {1}", System.Threading.Thread.CurrentThread.ManagedThreadId, ex.Message));
            }

            Thread.Sleep(15000);
        }
    }

    private static void Process1(object context) {

        SecureString pwd2;

        Process process2 = new Process();
        process2.StartInfo.FileName = @"c:\debug\InfoPathTest.exe";

        process2.StartInfo.UseShellExecute = false;
        process2.StartInfo.LoadUserProfile = true;
        process2.StartInfo.WorkingDirectory = @"C:\debug\";
        process2.StartInfo.Domain = "DEV01";
        pwd2 = new SecureString(); foreach (char c in "password") { pwd2.AppendChar(c); };
        process2.StartInfo.Password = pwd2;
        process2.StartInfo.UserName = "user1";
        process2.Start();

        process2.WaitForExit();
    }

    private static void Process2(object context) {
        SecureString pwd2;

        Process process2 = new Process();
        process2.StartInfo.FileName = @"c:\debug\InfoPathTest.exe";
        process2.StartInfo.UseShellExecute = false;
        process2.StartInfo.LoadUserProfile = true;
        process2.StartInfo.WorkingDirectory = @"C:\debug\";
        process2.StartInfo.Domain = "DEV01";
        pwd2 = new SecureString(); foreach (char c in "password") { pwd2.AppendChar(c); };
        process2.StartInfo.Password = pwd2;
        process2.StartInfo.UserName = "user2";
        process2.Start();

        process2.WaitForExit();
    }

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr GetProcessWindowStation();

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr GetThreadDesktop(int dwThreadId);

    [DllImport("kernel32.dll", SetLastError = true)]
    public static extern int GetCurrentThreadId();

} 
```

InfoPathTest.exe 进程只调用上面详述的 InfoPathTest.Test() 方法。

总之，这有效，但仅在某些机器上有效。当它失败时，实际上创建了第二个 INFOPATH.EXE 进程，但立即退出，退出代码为 0。事件日志中没有任何内容，代码中也没有任何异常。

我已经查看了很多东西来尝试区分工作/非工作机器，但我现在卡住了。

任何指针表示赞赏，特别是如果您对如何并行自动化多个 InfoPath 实例有其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:16:25.620

我猜如果你尝试对 Outlook 做同样的事情，你会得到类似的行为，这意味着微软认为运行多个副本是个坏主意。

如果是这样，我看到两个选项。

选项一是让您的 Infopath 自动化同步，一次运行一个实例。

选项二，我*没有*知道它是否会起作用，看看您是否可以启动虚拟机来完成您的 InfoPath 工作。

我希望这至少可以激发一些新的尝试，尽管这将导致成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T18:24:11.977

我在 Outlook 中遇到了非常相似的问题。仅允许运行应用程序的单个实例的限制不适用于每个用户，而是适用于每个交互式登录会话。您可以在[Investigating Outlook's Single-Instance Restriction](http://malwareanalysis.com/CommunityServer/blogs/geffner/archive/2007/08/10/234.aspx)中了解更多信息：

> Outlook 正在确定另一个实例是否已经在交互式登录会话中运行。[…] 在 Outlook 初始化期间，它会检查是否存在名为“Microsoft Outlook”且类名为“mspim_wnd32”的窗口，如果存在，则假定另一个实例已在运行。

有一些方法可以绕过它——在[Hammer of God](http://www.hammerofgod.com/archive/download.html)网站上有一个用于启动多个 Outlook 实例的工具（向下滚动）——但它们可能会涉及拦截 Win32 调用。

至于您的代码仅适用于某些机器：这可能是由于竞争条件。如果两个进程设法同时启动得足够快，那么它们就不会检测到彼此的窗口，并假设它们是唯一运行的实例。但是，如果机器速度很慢，一个进程会先于另一个进程打开它的窗口，从而导致第二个进程检测到第一个进程的窗口并自行关闭。要重现，请尝试在启动第一个进程和第二个进程之间引入几秒钟的延迟——这样，只有第一个进程应该成功。

# iphone - UITableViewCell 中的 UIActivityIndi catorView，未在选择时显示

> ID：10423377
> 
> 赞同：0
> 
> 时间：2012-05-03T00:01:19.100
> 
> 标签：iphone, uitableview, uiactivityindicatorview

当在 UITableViewCell 中选择一行时，我有一个操作可能需要一两秒钟。当用户选择我正在做某事的单元格时，我想给他们反馈。目前它只显示 tableviewcell 突出显示。我在视图中添加了 UIActivityIndi​​catorView。我默认是隐藏的。我尝试在我的 didSelectRowAtIndexPath 中执行此操作：

```
{
CustomCell *cell = (CustomCell *)[tableView cellForRowAtIndexPath:indexPath];
            cell.activityIndicator.hidden = NO;
            [cell.activityIndicator startAnimating];

// do long task

            [cell.activityIndicator stopAnimating];
            cell.activityIndicator.hidden = YES;
} 
```

此代码未显示我的活动指示器。如果我删除

```
activityIndicator.hidden = YES; 
```

在里面

```
setCustomObject:(id)newObject 
```

在我的 CustomCell 类中，我确实看到了指标。虽然它只是静态的。我想隐藏它，直到他们单击单元格，在长任务运行时制作动画，然后在长任务结束时停止动画并再次隐藏。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:26:46.830

尝试在主线程中更新活动指示器

```
dispatch_async(dispatch_get_main_queue(), ^{
    cell.activityIndicator.hidden = NO;
    [cell.activityIndicator startAnimating];       
 });

 //do long task

 dispatch_async(dispatch_get_main_queue(), ^{
    cell.activityIndicator.hidden = YES;
    [cell.activityIndicator stopAnimating];       
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:23:02.000

在 setCustomObject:(id)newObject 方法中，不要将其设置为隐藏，请尝试以下操作：

```
activityIndicator.hidesWhenStopped = YES;
[acitivtyIndicator stopAnimating]; 
```

然后在 didSelectRowAtIndexPath 方法中，去掉设置“隐藏”与否的代码，只需使用 [activityIndi​​cator startAnimating] 或 [activityIndi​​cator stopAnimating] 来控制动画和是否隐藏。

# hyperlink - 什么是视图控制器？

> ID：10423383
> 
> 赞同：0
> 
> 时间：2012-05-03T00:01:48.073
> 
> 标签：hyperlink, viewcontroller, xcode3.2

我是新手，我想知道 ViewController 是什么。我试图查看描述，但我发现它太复杂了。我正在研究 Xcode 3，并试图将两个页面链接在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:19:13.433

既然你用 xcode3.2 标记了这个问题，我假设你问的是 UIViewController。

它是[UIKit 框架](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKit_Framework/_index.html)类之一。

它最重要的属性之一是它`view`（它是[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)的一个实例），它通常包含一个或多个子视图。它与简单 UIView 的区别在于它的内存管理方法、处理外观、在[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)层次结构中的实现......

可以在这里找到关于*枯燥*的信息： [UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926)`UIViewController`

你肯定想看看[View Controller Programming Guide for iOS](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)和[View Controller Catalog for iOS](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Introduction.html#//apple_ref/doc/uid/TP40011313)。

# python - 找到一个被三个大写字母包围的小写字母

> ID：10423385
> 
> 赞同：1
> 
> 时间：2012-05-03T00:01:59.500
> 
> 标签：python, regex, string

我有一个混合了大写和小写字母的字符串。我需要找到每个被 3 个大写字母包围的小写字母并将其从字符串中提取出来。

例如`ZZZaZZZ`，我想提取`a`上一个字符串中的。

我写了一个能够提取`ZZZaZZZ`但不是`a`单独的脚本。我知道我需要使用嵌套的正则表达式来执行此操作，但我无法完全了解如何实现这一点。以下是我所拥有的：

```
import string, re                                                                                                                                                                

if __name__ == "__main__":                                                                                                                                                       

    #open the file                                                                                                                                                               
    eqfile = open("string.txt")                                                                                                                                                
    gibberish = eqfile.read()                                                                                                                                                    
    eqfile.close()                                                                                                                                                               

    r = re.compile("[A-Z]{3}[a-z][A-Z]{3}")                                                                                                                                      
    print r.findall(gibberish) 
```

**编辑：** 谢谢你们的回答！我想我应该更具体一些。我需要找到被三个完全相同的大写字母包围的小写字母，例如在我的示例`ZZZaZZZ`中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T00:05:10.833

你是*如此*接近！阅读[MatchObjects](http://docs.python.org/library/re.html#match-objects)`.group`的* 方法。例如，如果您的脚本以

```
r = re.compile("[A-Z]{3}([a-z])[A-Z]{3}")
print r.match(gibberish).group(1) 
```

然后您将在第一组中捕获所需的字符。

为了解决匹配重复字母的新约束，您可以使用反向引用：

```
r = re.compile(r'([A-Z])\1{2}(?P<middle>[a-z])\1{3}')
m = r.match(gibberish)
if m is not None:
    print m.group('middle') 
```

内容如下：

1.  匹配一个字母 AZ 并记住它。
2.  匹配两次出现的第一个字母。
3.  匹配您的小写字母并将其存储在名为`middle`.
4.  匹配找到的第一个字母的另外三个连续实例。
5.  如果找到匹配项，则打印该`middle`组的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T00:03:47.537

```
r = re.compile("(?<=[A-Z]{3})[a-z](?=[A-Z]{3})") 
```

`(?<=...)`表示积极的后视，`(?=...)`是积极的前瞻。

[模块重新](http://docs.python.org/library/re.html)

> ### `(?=...)`
> 
> 匹配 if ... 匹配下一个，但不消耗任何字符串。这称为前瞻断言。例如，仅当它后面跟着. 时`Isaac (?=Asimov)`才会匹配。`'Isaac '``'Asimov'`
> 
> ### `(?<=...)`
> 
> 如果字符串中的当前位置前面有一个在当前位置结束的 ... 匹配，则匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T00:09:27.547

您需要使用括号捕获您感兴趣的字符串部分，然后使用以下命令访问它`re.MatchObject#group`：

```
r = re.compile("[A-Z]{3}([a-z])[A-Z]{3}")                                                                                                                                      
m = r.match(gibberish)
if m:
   print "Match! Middle letter was " + m.group(1)           
else:
   print "No match." 
```

# visual-studio-2008 - MSBuild 未使用所有内核构建

> ID：10423390
> 
> 赞同：3
> 
> 时间：2012-05-03T00:03:20.900
> 
> 标签：visual-studio-2008, msbuild, parallel-processing

我有一个使用 Visual Studios 2008 配置的项目。当我打开 IDE 并点击构建时，我系统上的所有内核都用于构建项目。但是，当我尝试从命令行构建时，只使用了 1 个核心。这是我正在运行的命令：

```
C:\Windows\Microsoft.NET\Framework\v3.5\MSBuild VTK.sln /m /fl /tv:3.5 /p:Configuration=RelWithDebInfo 
```

通过阅读文档，/m 开关似乎应该告诉 MSBuild 使用所有内核，但事实并非如此。任何想法如何使它使用所有核心？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:38:40.010

好吧，实际上该`/m`选项指定了“要构建的最大并发进程数”。也就是说，`msbuild.exe`并行启动以并行构建项目的最大进程数（每个进程最多将构建一个项目）。与“使用所有内核”完全不同的东西。虽然，不可否认，`/m`选项的长形式名称`/maxcpucount`可能暗示其他情况，但它的描述应该更好地说明正在发生的事情：

```
 /maxcpucount[:n]   Specifies the maximum number of concurrent processes to
                     build with. If the switch is not used, the default
                     value used is 1\. If the switch is used without a value
                     MSBuild will use up to the number of processors on the
                     computer. (Short form: /m[:n]) 
```

现在，如果您的解决方案不允许项目并行构建，例如因为您的每个项目都是另一个项目的依赖项（例如构建 P2 需要 P1，项目 P3 需要 P2 等），那么您赢了'没有看到任何并行构建发生。根据构建完成的速度，您也不会在所有内核上看到任何相关活动（例如，使用任务管理器），因为 CPU 图表的“闪烁”可能并不准确地反映实际发生的情况（请注意构建是也相当 I/O 密集型，这并没有显示查看 CPU 负载）。

但是，您应该查看（例如使用进程资源管理器或任务管理器）`msbuild.exe`与您拥有的内核/CPU 数量相匹配的进程数量（或作为可选数字传递给`/m`选项的等效数量。

您可能还想参考[这个 SO question](https://stackoverflow.com/q/997047/21567)。还搜索“parallel msbuild”会产生一些带有更多信息的好结果。

# sql - 使用 Select 语句作为参数值

> ID：10423391
> 
> 赞同：-2
> 
> 时间：2012-05-03T00:03:42.727
> 
> 标签：sql, sql-server, sql-server-2005

```
 EXEC [dbo].[SP]
   @Param = ( SELECT COUNT(id) FROM TABLE ) 
```

给出错误，那么下一个最好的事情是什么或者我做错了什么？

不使用`Declare` `Set`等等等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:07:14.633

在运行存储过程之前设置它？

```
SET @Para1 = (SELECT COUNT(id) FROM TABLE)
EXEC [dbo].[SP] @Param = @Para1 
```

# java - 更改列表对象休眠返回

> ID：10423396
> 
> 赞同：0
> 
> 时间：2012-05-03T00:04:00.400
> 
> 标签：java, hibernate

当我在休眠中的服务器端查询中创建时

```
(em.getEntityManagerFactory().createEntityManager().createNativeQuery("select...")) 
```

形成一些包含 java list hibernate return 的对象`org.hibernate.collection.PersistentList`

现在当我尝试发送这个对象我的java客户端他不知道这个

```
org.hibernate.collection.PersistentList 
```

当我尝试反序列化时对象（并且我不想将此 hibernate.jar 添加到客户端）。

有没有办法让休眠返回普通的java列表？现在我将此列表替换为普通的 java 列表或 java Arraylist，然后将此对象发送到客户端。（Json 不是一个选项）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:38:54.950

通常休眠对象是不可序列化的。如果要将它们发送给客户端，则必须将它们的数据复制到数据持有者对象中（或者您可以为您的客户端使用特殊的软件包）。这不仅适用于列表实现，也适用于单个 pojo，并且延迟加载通常在客户端也不起作用。

您已经以正确的方式进行操作，将列表的元素复制到客户端的新列表中。与从数据库读取数据所需的时间相比，这只需要非常少的时间。

（我不知道你在客户端使用的是哪个软件。如果是 GWT，[在这里](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)你可以找到一个很好的 hibernate 集成文档。但可能你没有使用 GWT，因为 GWT 有更大的障碍hibernate 集成不仅仅是 PersistentList。）

# objective-c - 覆盖不滚动 UITableView - iOS

> ID：10423399
> 
> 赞同：5
> 
> 时间：2012-05-03T00:04:47.983
> 
> 标签：objective-c, ios, uitableview, scroll, overlay

我有一个 UITableView 类，它使用以下方法在进入下一个屏幕时调用加载覆盖。问题是这个加载屏幕不会随着列表滚动......所以如果你滚动一点并点击一些东西，加载屏幕不会显示（因为它在顶部）。如何让加载屏幕始终保持在 UITableView 的顶部？请注意，每个 UITableView 都包含在 UINavBar 中，而 UINavBar 又包含在 UITabBar 中。这是我的代码：

```
-(void)createLoadScreen
{
    CGRect screenRect = [self.view bounds];
    CGRect overlayFrame = CGRectMake(0.0, 0.0, screenRect.size.width, screenRect.size.height);
    overlay = [[UIView alloc] initWithFrame:overlayFrame];
    overlay.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.7];
    CGRect frame = CGRectMake(screenRect.size.width / 2 - 25.0, screenRect.size.height / 2 - 70, 25.0, 25.0);
    loading = [[UIActivityIndicatorView alloc] initWithFrame:frame];
    [loading setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [loading sizeToFit];
    loading.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
                                UIViewAutoresizingFlexibleRightMargin |
                                UIViewAutoresizingFlexibleTopMargin |
                                UIViewAutoresizingFlexibleBottomMargin);
    loading.hidesWhenStopped = YES;
    [overlay addSubview:loading];
}

-(void)showActivityIndicator
{ 
    [self.view addSubview:overlay];
    [loading startAnimating];
}

-(void)removeActivityIndicator {
    [loading stopAnimating];
    [overlay removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T00:12:04.753

你在使用 UITableViewController 吗？

您应该能够通过将覆盖视图添加到表的超级视图而不是表视图本身来解决您的问题。这样，您的叠加层实际上位于滚动表视图之上并与滚动表视图分开

```
-(void)showActivityIndicator
{ 
    [[self.view superview] addSubview:overlay];
    [loading startAnimating];
} 
```

# c++ - C ++ 11从相同类类型的构造函数调用构造函数

> ID：10423401
> 
> 赞同：6
> 
> 时间：2012-05-03T00:05:00.417
> 
> 标签：c++, visual-studio-2010, visual-c++, constructor, c++11

有人告诉我，由于 C++11 的变化，以下是可能的：

```
class SomeType  {
int number;

public:
SomeType(int new_number) : number(new_number) {}
SomeType() : SomeType(42) {}
}; 
```

但是当我尝试构建时出现错误：

```
"SomeType" is not a nonstatic data member or base class of class "SomeType"

error C2614: 'SomeType' : illegal member initialization: 'SomeType' is not a base or member 
```

Visual Studio 2010 尚不支持此功能吗？我需要配置一些东西来构建它吗？怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T00:07:53.643

VS2010 不支持。VS2010（或 VS11）不支持大多数 C++11 功能

[这](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)是 VC10 和 VC11 中支持的功能的图表。

# regex - 使用正则表达式仅在特定行上用连字符替换文本文档中的空格

> ID：10423403
> 
> 赞同：0
> 
> 时间：2012-05-03T00:05:17.887
> 
> 标签：regex, osx-snow-leopard, textmate

我正在尝试在我的降价文本文件中的所有图像链接上用连字符替换空格。图像语法如下：

`![image](Leadership-0910 Fulfilling the Vision-06-build-vision/06-build-vision-1.jpg "06-build-vision-1.jpg")`

如您所见，单词和一些空格之间有一些连字符。我需要他们都成为炒作。但是，由于文档包含其他文本，我只想删除以`![image]...`. 我正在使用 osx (10.6.8) 和 textmate，它允许我使用正则表达式查找和替换。

目前我可以很容易地找到所有使用的行`^((\!\[([a-z]*)\]\())`

我遇到的问题是如何用连字符替换后面的空格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:16:29.727

您可以使用**Text→Filter Through Command (⌥⌘R)**通过 sed 管道传输文本：

```
 sed '/^!\[image\]/s/ /-/g' 
```

不过，不确定你会如何在纯 TextMate 中做到这一点。

# ruby - 为什么 Ruby 倾向于按降序分配对象 ID？

> ID：10423406
> 
> 赞同：8
> 
> 时间：2012-05-03T00:05:28.387
> 
> 标签：ruby, irb, object-identity

我注意到对象的 ID 以违反直觉的方式分配。对象创建得越早，其对象 ID 就越大。我原以为它们会按升序分配，而不是相反。

例如：

```
obj1 = Object.new
obj2 = Object.new
obj3 = Object.new

p obj1.object_id # => 4806560
p obj2.object_id # => 4806540
p obj3.object_id # => 4806520 
```

为什么它们以这种方式分配，为什么在 Ruby 解释器运行的代码中有 20 步而不是 1 步，但是 Ruby 的 irb 运行的代码的对象 ID 之间的差异要大得多？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T00:38:18.497

在处理许多细节后，ruby 分配了一块堆来放入对象：

```
1 | 2 | 3 | 4 | 5 
```

然后按顺序遍历它们并将它们添加到自由对象的链表中。这会导致它们在链表上的顺序相反：

```
freelist → NULL
freelist → 1 → NULL
freelist → 2 → 1 → NULL
freelist → 3 → 2 → 1 → NULL
freelist → 4 → 3 → 2 → 1 → NULL
freelist → 5 → 4 → 3 → 2 → 1 → NULL 
```

分配对象时，ruby 使用链表上的第一项：

```
object = freelist
freelist = object.next_free 
```

所以freelist现在看起来像：

```
freelist → 4 → 3 → 2 → 1 → NULL 
```

并且进一步分配的对象将在小分配中以相反的顺序出现。

当 ruby​​ 需要分配一个新的堆块来存储更多对象时，您会看到 object_id 跳起来然后又跑下来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:24:15.260

Ruby 解释器是一个 C 程序，您可能正在查看对象的相应内存地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T03:59:27.417

对于它的价值，您可以在不同的实现上看到完全不同的进展；每个人都以不同的方式分配他们的对象，使用不同大小的桶。

**核磁共振 1.9.3**

```
objs = [Object.new, Object.new, Object.new]
objs.each {|o| puts o.object_id}
# 70257700803740
# 70257700803700
# 70257700803680 
```

**杰鲁比**

```
objs = [Object.new, Object.new, Object.new]
objs.each {|o| puts o.object_id}
# 2048
# 2050
# 2052 
```

**RBX**

```
objs = [Object.new, Object.new, Object.new]
objs.each {|o| puts o.object_id}
# 3920
# 3924
# 3928 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:32:19.907

我刚刚运行了一个对象 id 的日志，看起来虽然事情是按顺序进行的，但垃圾收集似乎每隔一段时间就会让事情变得相反。我看到了从 like`20`到的跳转`80`，所以它似乎几乎是随机的。但是对于 Ruby 维护的内部对象的数量，对象 id 的顺序没有什么可依赖的。也可能是 Ruby 从本地平台的顶部开始，`int`或者`short`允许一个简单的测试用完（`if(current_id==0) { problem }`）。从我从我们的各种数字中看到的，它似乎完全不同且无法确定。它（几乎）在我看来就像 Ruby 甚至可能使用指向对象的指针，因为这保证了唯一性，并且可以解释对象之间的巨大差距（20 个字节）。当我查看返回的值时`object_id`，然后在我系统的本机指针大小（64 位 Intel）旁边查看它。

我刚刚在同一个系统上运行了一个测试 C++ 程序，它打印出一个指向`int`. 指针（十进制）是`140734848324996`，Ruby 对象 id 是`70118105405380`. 这些数字没有太多共同点，但它们都在同一范围内，看起来像指针。

当然，如果有人深入研究 Ruby 源代码并找出答案，那将是明确的答案。我正在努力。

# java - 如何从 JSP 将查询字符串附加到 url？

> ID：10423414
> 
> 赞同：0
> 
> 时间：2012-05-03T00:06:09.950
> 
> 标签：java, jsp

我有一个评论页面。我希望用户能够通过`oldest`或`newest`单击评论部分中显示的链接对这些评论进行排序。

我已经通过 url 预处理视图。因此，当用户浏览`book?id=20`它时，它会显示来自数据库`id`的书。`20`

直接去`book?id=20&sort=oldest`已经有效。如何让我的 JSP 在单击时附加到 URL？

我遇到的问题是我不能硬编码它们：例如，如果我只是编码`<a href="book?id=${param.id}&show=newest">Newest</a>`它会破坏其他查询字符串。如果用户已经在 URL 处`book?id=20&stars=5`（显示 5 星评级的评论）怎么办。

我希望 JSP 只附加到 URL 上，以便它包含任何当前查询，例如：用户当前位于`book?id=20&stars=5`，用户然后单击`sort by oldest`，然后 JSP 附加 make `&sort=oldest`it `book?id=20&stars=5&sort=oldest`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:42:10.460

你可以这样做：

```
<a href="book?id=${param.id}&show=newest" onclick="this.href=this.href+'&sort=oldest'">Newest</a> 
```

# ios - NSDictionary writeToFile 不写

> ID：10423419
> 
> 赞同：1
> 
> 时间：2012-05-03T00:06:27.933
> 
> 标签：ios, nsdictionary

我使用有效的字典运行以下代码，但仍然“未写入”：

```
 NSFileManager* fm = [[NSFileManager alloc] init];
 __autoreleasing NSError* err = nil;

 NSURL* DD = [fm URLForDirectory:NSDocumentDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:YES error:&err];
 if (!err) {
     NSString* debugPath = [[DD path] stringByAppendingPathComponent:@"debug.plist"];

     NSLog(@"login-signup write that file!");
     NSDictionary* remMe = [NSDictionary dictionaryWithObjectsAndKeys:[userJSON objectForKey:kRememberMeToken],kRememberMeToken,[userJSON objectForKey:@"id"],@"id",nil];

     NSMutableDictionary* toStore = [NSMutableDictionary dictionaryWithDictionary:dict];
     [toStore setObject:Password.text forKey:kPassword];
     NSMutableDictionary* toStoreTwo = nil;
     if([fm fileExistsAtPath:debugPath]){
           toStoreTwo = [NSMutableDictionary dictionaryWithContentsOfFile:debugPath];
           [toStoreTwo setObject:[toStore copy] forKey:@"signup"];
           [toStoreTwo setObject:remMe forKey:@"login"];
     }
     else{
           toStoreTwo = [NSMutableDictionary dictionaryWithObject:[toStore copy] forKey:@"signup"];
           [toStoreTwo setObject:remMe forKey:@"login"];
     }

     NSDictionary* sDict = [NSDictionary dictionaryWithObject:toStoreTwo forKey:[NSString stringWithFormat:@"signup-debug-%@",[NSDate date]]];

     NSLog(@"saving %@ to file",sDict);
     BOOL success = [sDict writeToFile:debugPath atomically:NO];
     if(!success){
            NSLog(@"not written");
     }
     else{
            NSLog(@"written");
     }
   } 
```

任何帮助都会很棒！

Stackoverflow 需要更多内容来解释代码，但我认为很容易看到发生了什么，如果您有任何问题，请发表评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:45:17.217

看看这个问题[write to file failed](https://stackoverflow.com/questions/7519996/writetofile-fails-how-do-i-debug-why-it-fails-what-tools)。我有一些问题，但是在检查了字典中的所有数据类型后发现错误。

# symfony1 - Symfony - sfGuardUser - 如何记录组或权限更改？

> ID：10423425
> 
> 赞同：0
> 
> 时间：2012-05-03T00:07:28.000
> 
> 标签：symfony1, symfony-1.4, propel, sfguard

通过检查对象在保存前后的差异，我在 processForm 函数中记录应用程序中对象的更改。我将其保存到数据库中的日志表中。

对于 sfGuardUser 后端，我使用生成的管理员，它会自动保存对嵌入式组或权限所做的更改。

我想记录这些更改 - 但我可以在哪里添加我的日志进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:57:46.157

好吧，我认为处理此类更改的最佳位置是在模型中而不是在 processForm 中。这是行为的完美工作。

有一种称为[versionable](http://www.propelorm.org/behaviors/versionable)的行为，它与您所做的完全一样：对模型的每个更改进行历史记录，您只需在 schema.yml 中定义它：

```
BlogPost:
  _propel_behaviors:
    versionable:
      log_created_at: true
      log_created_by: true
      log_comment: true
  columns:
    title: string(255)
    body: clob 
```

所以也许你可以从[这种行为](https://github.com/propelorm/Propel/tree/master/generator/lib/behavior/versionable)中获得灵感来创造你自己的。然后你只需要修改 sfGuard 的[schema.yml](http://trac.symfony-project.org/browser/plugins/sfGuardPlugin/branches/1.3/config/schema.yml)，比如：

```
sfGuardGroupPermission:
  _attributes:    { phpName: sfGuardGroupPermission }
  _propel_behaviors:
    versionable: { log_created_at: true, log_created_by: true, log_comment: true } 
```

**编辑：** 切换到推进。

# jquery - jQuery click() 在 Greasemonkey/Tampermonkey 脚本中不起作用

> ID：10423426
> 
> 赞同：2
> 
> 时间：2012-05-03T00:07:33.613
> 
> 标签：jquery, greasemonkey, tampermonkey

我在通过 Greasemonkey/Tampermonkey 触发 jQuery 点击时遇到问题...

```
jQuery('button').each(function() {
    jQuery(this).css('background', 'red');
    jQuery(this).click();
    location.assign("javascript:jQuery(this).click();void(0)");
}​ 
```

如您所见，我什至尝试了[location.assign hack](http://wiki.greasespot.net/Location_hack)，但没有任何效果，控制台中也没有错误。

有趣的是，是的，背景颜色确实变为红色，所以我假设它的`.click()`工作方式与其他 jQuery 方法不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T00:35:11.497

jQuery's`.click()`只是 jQuery's`.trigger()`和来自[Docs](http://www.jqapi.com/#p=trigger)的快捷方式：

> 当相应的事件发生时，任何附加了 .bind() 或其快捷方法的事件处理程序都会被触发。但是，可以使用 .trigger() 方法手动触发它们。

这意味着不是由 jQuery 设置的事件处理程序不能总是由`.click()`(or `.trigger()`) 触发。

为了解决这个问题，发送实际的鼠标事件：

```
jQuery ('button').each ( function () {
    jQuery (this).css ('background', 'red');

    var clickEvent  = document.createEvent ('MouseEvents');
    clickEvent.initEvent ('click', true, true);
    this.dispatchEvent (clickEvent);
} 
```

* * *

请注意，在极少数情况下，页面实际上会处理事件的组合，而不是`click`，并且理论上，页面可以区分***任何***人为产生的事件（尽管我还没有在野外看到）。
如果是这种情况，请链接到目标页面，以便我们可以解决问题。

# git - 忽略 Meteor JS 项目目录中的文件

> ID：10423430
> 
> 赞同：30
> 
> 时间：2012-05-03T00:07:54.517
> 
> 标签：git, meteor

我有一个基于 JavaScript 的库，我想将其包含在 Meteor JS 应用程序中。库源代码托管在 Git 存储库中，我想将存储库作为子模块包含在我自己的 Meteor 应用程序源代码存储库中。但是，我不需要 Meteor 处理的大部分文件，只需要几个选定的文件。确实，当它看到子模块中的许多文件时，Meteor barfs 会出现“错误：无法解析 .. um .. some HTML file, on some line. sorry”。

有没有办法选择性地将文件列入白名单或黑名单以包含在项目目录中的 Meteor 应用程序中？除了创建一个智能包之外，还有什么方法可以在我的 Meteor 应用程序项目目录中包含外部资源，例如 Git 子模块。

更新：正如[“如何创建包”](https://stackoverflow.com/questions/10114526/how-to-build-a-meteor-package)的相关问题中所解释的，如果您将智能包创建到 Meteor 本身的本地 Git 签出中，您将获得包中代码的热重载行为。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-03T00:32:18.887

除了`/public`jonathan 提到的目录之外，Meteor 还会忽略任何以“.”开头的目录。- 所以你可以创建一个`.submodules`目录并将文件放在那里，Meteor 不会加载它们。

这可能比让他们参与更可取，`/public`因为他们不是公开的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-04T23:22:31.700

更新：在即将发布的 Meteor (0.6.5) 中有一个`private`目录，您可以在其中放置客户端无法访问且不会自动加载到服务器上的文件。`Assets`全局对象和 API 允许您读取这些文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-19T08:34:12.100

现在还支持`.meteorignore`文件（[Meteor v1.5.2.1](https://docs.meteor.com/changelog.html#v152120170926)）。它的工作原理与`.gitignore`.

您可以在项目的任何目录中使用它们，并与文件监视系统完全集成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:26:40.013

不，唯一的方法是编写一个导入脚本。

如果您不知道，可以使用 /public 目录来保存所有文件。

但是，就我个人而言，我不会认为这是一个问题，因为您肯定不只是想根据特定路径导入文件，如果他们更改代码以添加新的所需文件，您的文件也会中断。这不是我想在部署时找到的东西，而是为依赖项版本的每次更改做计划。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-20T00:51:38.570

听起来有点奇怪，但在**Meteor 1.3**中有..

`/imports`

..directory，不是由流星自动包含的。

它是“意思”/名称建议的，用于您从其他代码“导入”的模块。但是你也可以将它用于你自己的应用程序代码，我认为它是一个更好的应用程序代码名称`/private`，但这是我个人的看法:-)

# vb.net - 使用 MySQL (VB.Net) 的服务器-客户端数据交换

> ID：10423433
> 
> 赞同：0
> 
> 时间：2012-05-03T00:08:09.430
> 
> 标签：vb.net

这是情况。我开发了一个带有注册表的简单考试系统。我使用 VB.Net 作为编程语言。我还没有尝试手动编码我的问题。无论如何，这是我作为实习生所在的公司的一个项目。

计划是让每台客户端电脑都有这个考试/注册应用程序，这个应用程序会将个人信息和分数发送到中央数据库（服务器电脑）。我使用 MySql 作为 dbms 并在同一台机器上开发应用程序，这意味着我使用的数据库服务器仅在本地主机上。

现在我正要尝试在一台客户端 pc 上实现应用程序（作为 beta 测试）并安装必要的文件（.net 框架），我还在服务器 pc 中安装了 MySQL 服务器（和工作台）。

当我在客户端 PC 中运行应用程序时，它没有检测/连接到 ServerPC 的 MySQL 服务器实例，因此无法记录我在客户端应用程序中输入的虚拟值。请注意，我将应用程序的连接字符串更改为指向 serverPC 的 IP 地址。

现在我的问题如下：

1）我做错了什么？

2）我是否应该将 MySQL 服务器（和 Workbench）安装到每个 ClientPC 上，以便我可以创建一个使用 REMOTE HOST 选项的服务器实例并将其配置为连接到 SERVERPC 的数据库？

3）我应该如何设置服务器，以便它可以访问我安装在所有客户端PC中的应用程序？

我对 VB.net 很陌生，主要是从互联网资源中学到的。我没有尝试过手动编码。主要是因为 VB.net 中的工具稍微容易理解，这要归功于智能感知、拖放工具以及帮助主题。

无论如何，我希望有人能帮助我。提前谢谢，如果我提供的信息不完整，请指出我忘记添加的信息。

编辑：附加信息，客户端电脑和服务器电脑在一个网络中。我还授予了 MySQL 的 serverPC 设置的所有权限。（这只是为了测试运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:22:04.293

您是否启用了 MySQL 用户仅访问本地主机？您可以通过浏览到您的“mysql”数据库、“users”表在 MySQL 控制中心检查这一点，确保用户的主机字段设置为 % 而不是 localhost，允许他们连接任何 NIC，而不仅仅是环回（本地主机）适配器。

# drupal-7 - Drupal 7 将批量用户添加到组或角色

> ID：10423434
> 
> 赞同：0
> 
> 时间：2012-05-03T00:08:17.557
> 
> 标签：drupal-7

有没有办法将用户批量添加到 Drupal 7 中的角色或组。

我想在（Gender=Male and Age>=18）等过滤器上添加基于 Profile 2 字段的用户。

我需要这样做才能使 Drupal 内容仅可供特定组或角色访问。

我浏览了一些模块（http://drupal.org/project/content_access，http://drupal.org/project/simple_access），[但](http://drupal.org/project/simple_access)我真的很困惑，什么最适合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:35:45.983

尝试[用户导入框架](http://drupal.org/project/uif)，它允许您使用 CSV 文件来创建新用户和分配角色

# javascript - 没有 Jquery 的 Javascript 轮播

> ID：10423436
> 
> 赞同：1
> 
> 时间：2012-05-03T00:08:28.117
> 
> 标签：javascript, javascript-events

我正在尝试构建一个与著名 JCarousel 的简单版本完全一样的 javascript 轮播，但我想完全不使用 Jquery。我为什么要这样做？好吧，因为我正在尝试真正学习和理解 javascript 的工作原理。

我一直在寻找一个不使用库的示例，但我找不到任何东西。如果有人能指出我需要的东西，我将不胜感激。

现在，基本上我在构建轮播时的问题与列表中图像的移动有关。所以我将所有图像都放在一个列表中，我有左右箭头的按钮，好的，但是当我触发事件时，我只是不知道从哪里开始向左或向右移动所有图像......

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:16:45.837

您可能会找到使用库的示例，因为其中一些内容非常密集。理论上，您需要制作一个非常宽的 div，其中所有图像水平排列，然后在按钮按下时，设置 div 的 css 左侧位置以添加或删除图像宽度的值。库非常擅长将按钮点击连接到回调函数，查询和设置元素的 css，测量元素的宽度，以及操作 dom 以获取（例如）`<li>`标签列表并将其制成非常宽的 div。添加图形设计约束，虽然我赞赏并尊重您手工完成的愿望，但您将花费很长时间重新发明轮子。

# mysql - 在mysql查询中只选择一列而不是所有列

> ID：10423439
> 
> 赞同：0
> 
> 时间：2012-05-03T00:08:55.423
> 
> 标签：mysql, database, search

我正在编写一个 PHP 脚本，我将在特定表中搜索关键字并返回该`id`关键字的。

到目前为止我所做的是：

```
SELECT * FROM 'table' WHERE column_name LIKE '%keyword%' 
```

这将返回关键字的整行。我想要的是一个只返回该行的 id 的查询，所以我可以把它放在一个变量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:10:24.030

首先，您可能应该用反引号替换`'table'`引号，否则您可能会在某处遇到语法错误。我的其余查询示例使用反引号作为表名。建议也将它们用于列名，以减少冲突的机会。

与其`*`用来获取所有列，不如明确列出要获取的列：

```
SELECT id FROM `table` WHERE column_name LIKE '%keyword%' 
```

`*`通配符选择您从原始查询中注意到的所有列。

* * *

如果要选择其他列，请将它们列为逗号分隔名称：

```
SELECT id, foo, bar FROM `table` WHERE column_name LIKE '%keyword%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:11:19.027

由于您使用的是 mySQL：

```
SELECT id FROM `table` WHERE column_name LIKE '%keyword%' 
```

# c# - Entity Framework 4.3.1 无法创建（/打开）数据库 [线程异常？]

> ID：10423445
> 
> 赞同：8
> 
> 时间：2012-05-03T00:09:38.710
> 
> 标签：c#, sql-server, entity-framework, sql-server-2008-r2, entity-framework-4.3

不久前，我在 MVC 3 项目中使用过 EF 4.1 ( **Code First** )，这很好。

今天我尝试在 WinForms 项目中使用 EF 4.3.1 ( **Code First** ) 并遇到了一些真正的巫术：（我正在处理的原始项目是 WinForms，但是对于*附加*的控制台应用程序代码也是如此。）

尝试将简单类输入数据库时​​，出现以下异常： **无法打开登录请求的数据库“测试”。登录失败。用户 '[ComputerName]\[Administrator]' 登录失败。**

我已尝试检查 SQL Server (2008 R2) 配置，但我的用户*确实*拥有服务器上的所有权限。

**注意：**当我第一次运行应用程序时，*数据库*不**存在。**

即使以下示例代码也不起作用：

```
class Program
{
    public static void Main()
    {
        var person = new Person { Name = "Nathan" };
        using (var db = new MyContext())
        { //#1
            db.Persons.Add(person);
            db.SaveChanges();
        }
        Console.Write("Person saved !");
        Console.ReadLine();
    }
}

public class Person
{
    public int PersonId { get; set; }
    public string Name { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<Person> Persons { get; set; }
    public MyContext()
        : base("Data Source=localhost;Database=Test;Integrated Security=True;")
    { }
} 
```

我尝试重新安装 EF 4.3.1 - 无济于事。重新启动 SQL Server 也没有任何效果。

**注意**：我注意到周围有很多类似的问题，但没有一个与我的问题相同*并且*得到了回答 - 我希望我能在这里幸运:)

**澄清一下：**被拒绝访问的用户是机器的所有者（本地管理员）。

**编辑：**我一直在进行一些实验，发现一些很奇怪的东西：

如果我在标记为“#1”的行暂停程序并通过*Watch窗口检查***db.Database.Exists()**的值，它会告诉我：**“函数评估需要所有线程都运行”**用那个小*波浪*按钮我可以点击使其运行所有线程。 ****![描述上述段落的图像](../Images/4adf2965896037f22b2f9c1e2e9b1b36.png)****

 ****如果我单击该按钮，则该函数的计算结果为***False***。

现在我可以做**两**件事：

1.  **继续执行**：在这种情况下，我得到完全相同的异常。
2.  **从 Watch 窗口执行 db.Database.Create()**：在这种情况下，程序成功运行到最后，我看到在我的*SQL Management Studio*中创建的数据库、表和行。

似乎是一个简单的解决方案，对吧？错误的！

我尝试通过调用**db.Database.CreateIfNotExists(); 来为数据访问添加前缀；**但后来我在那条线上得到了**完全相同的例外。**

**db.Database.Initialize(true);** 也没有效果...

**注意：**如果通过使用上述方法创建数据库，我可以从那时起正确使用它，所以这至少是一半的安慰：P 当然，当我添加**DropCreateIfModelChanges**或**DropCreateAlways** Initalizer 时会发生什么（因为我正在积极开发模型）。

谢谢。

[我怀疑它更多的是实体框架问题而不是 SQL Server。]

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T14:27:16.877

如果您碰巧打开了“抛出异常时中断”选项（Debug->Excptions），则在调试时可以看到此异常。EF 正在尝试连接到数据库，但由于数据库尚不存在而失败，因此引发了异常。由于打开了上述选项，您会看到异常。此异常实际上被实体框架捕获，然后 EF 将连接到主数据库以创建它在第一步中尝试连接的数据库。创建数据库后，它将再次使用原始连接字符串与数据库通信。因此，您可以按 F5 继续调试，因为该异常是将被处理的第一次机会异常，或者禁用关闭“抛出异常时中断”****

# php - 如果在同一页面上清除，会话变量不会回显？

> ID：10423446
> 
> 赞同：1
> 
> 时间：2012-05-03T00:09:46.217
> 
> 标签：php

当我在尝试回显它的同一页面上清除它时，我遇到了一个奇怪的会话变量为空的问题。这是我正在尝试做的快速类型。

举个例子；

**页面 A：**

```
$_SESSION['referer'] = 'abc123';
header('Location: http://www.test.com/pageb.php');
exit(); 
```

**B页：**

```
function get_referer() {

    $referer = '';
    if (isset($_SESSION['referer'])) {
        $referer = $_SESSION['referer'];
        $_SESSION['referer'] = null;
        unset($_SESSION['referer']);
    }
    echo $referer;
} 
```

现在，当我使用功能在 B 页上执行此操作时...

如果我自己运行它，它可以工作：

```
 get_referer(); 
```

当我在输入的 value 属性中运行 echo 时（确保在页面上只运行一次函数，因为它在被调用后被删除），当我查看页面的源代码时它没有回显任何内容。

```
<input type="hidden" name="referer" value="<?php get_referer(); ?>" /> 
```

然而，有趣的是，如果我输入 type="text" 它工作正常。

```
<input type="text" name="referer" value="<?php get_referer(); ?>" /> 
```

该问题仅出现在 input type="hidden" 的 value 属性上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:45:57.447

You're outputting the content with

```
<input type="hidden" name="referer" value="<?php get_referer(); ?>" /> 
```

you're not viewing it on the same page as you would have if you were using `type="text"`. When using `type="hidden"`, you're most likely right-clicking the window and choosing *View Source* in your browser. The problem is that same browsers (like Chrome) refresh the page when you do so. This means, that once you load the page, the `value` attribute actually contains `abc123`, but when you attempt to see it, the page is refreshed, and therefore the session no longer exists, hence `value` is empty.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:33:43.347

也许你打电话`get_referer()`两次？

In the first it will echo the referer and unset. When you call in the input, the referer don't exists anymore in the session, so prints nothing.

# php - 为mysql连接定义

> ID：10423447
> 
> 赞同：2
> 
> 时间：2012-05-03T00:09:48.357
> 
> 标签：php, mysql, html

我的情况：文件夹结构是/resources/website/inc/（/resources/是存储配置的地方，/website/包含index.php和/inc/

我在资源文件夹中的 config.php / 中定义了数据库连接的常量。

```
 define ( 'DB_HOST', 'localhost' );
   define ( 'DB_USER', 'my_username' );
   define ( 'DB_PASSWORD', 'my_password' );
   define ( 'DB_NAME', 'my_database' ); 
```

在 index.php 中访问数据库并显示数据。

我得出的结论是，它试图将 config.php 中定义的常量与 index.php 中的连接语句一起使用，但常量没有通过。

这是我的连接语句：

```
$connect = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD) or 
                         die("MySQL Error: " . mysql_error());
$db = mysql_select_db(DB_NAME) or die("MySQL Error: " . mysql_error()); 
```

当我将这两个部分添加到 config.php 中时，它可以完全正常工作，但是我想在各个区域进行连接和关闭连接，我不想再次定义变量

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T01:34:57.857

您需要在可以通过 Web 服务器访问的每个其他文件中要求（包含）配置文件。

仅此而已：

`config.php`

```
define ( 'DB_HOST', 'localhost' );
define ( 'DB_USER', 'my_username' );
define ( 'DB_PASSWORD', 'my_password' );
define ( 'DB_NAME', 'my_database' ); 
```

`public/index.php`

```
require_once __DIR__ . '/../config.php';
// The rest of you code here 
```

`public/contact.php`

```
require_once __DIR__ . '/../config.php';
// The rest of you code here 
```

# java - 在没有模拟器的情况下访问 SQLite DB？

> ID：10423449
> 
> 赞同：0
> 
> 时间：2012-05-03T00:10:01.307
> 
> 标签：java, android, sqlite

我一直在尝试将我的 SQLite 数据库从我的 android 应用程序中提取到我的计算机上。
当我在 eclipse android 模拟器上运行我的应用程序然后我可以访问数据库时，我只会得到结果。但问题是使用模拟器速度很慢，而且它没有我在手机上的应用程序中存储的所有数据。
我已经在谷歌上搜索了一天，我所看到的只是“使用模拟器”。

没有模拟器就不行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:19:10.703

在商业发布的 Android 设备上，不允许您访问应用程序的内部 SQLite 数据库（出于安全原因）。因此，如果您根本无法忍受模拟器，或者您只想在实际设备上测试您的应用程序以确保其正常工作，那么有两个选项可供考虑。

1.  根您的设备。这将使您能够访问`/data`存储应用程序内部 SQLite 数据库的文件夹。
2.  使用第三方库将数据库的内容写入 SD 卡。如果您不想打扰您的设备，这是一个很好的解决方法。检查[这篇文章](https://stackoverflow.com/a/4202099/844882)以获得这样的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:17:12.447

您应用程序中的 SQLite 数据库只是一个文件。您可以使用 Eclipse 中的 DDMS 文件视图将文件从您的设备中提取出来，但前提是您有根设备或开发设备，或者您正在使用模拟器。

一旦你在你的计算机上获得了文件，你就可以使用 sqlite3 命令（根据你的系统，你可能需要[安装](http://www.sqlite.org/download.html)）来运行查询。

# php - 用于从 tracklist.xspf 文件中提取轨道详细信息的 PHP 脚本

> ID：10423452
> 
> 赞同：1
> 
> 时间：2012-05-03T00:10:30.793
> 
> 标签：php, xml, xslt, xspf

我想从存储在远程服务器上的 tracklist.xspf 文件中提取音频流轨道详细信息，并将网页上的输出打印为 div 内的滚动文本，因此 PHP 脚本应该打印当前轨道信息。我想从标签“标题”、“注释”（仅流标题：）和“信息”中获取详细信息。对于最后一个“信息”标签，我想让它可以关闭，而是滚动我的自定义（预设）文本。页面上的曲目信息需要定期刷新以获取当前曲目详情。

tracklist.xspf 文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<playlist xmlns="http://xspf.org/ns/0/" version="1">
  <title/>
  <creator/>
  <trackList>
    <track>
      <location>http://geodesic1.streams.audioaddict.com:80/di_chillout3</location>
      <title>Ulrich Schnauss - Between Us And Them</title>
      <annotation>Stream Title: Chillout - ambient psy chillout.

Content Type:audio/mpeg
Current Listeners: 0
Peak Listeners: 0
Stream Genre: Electronic Chillout Ambient</annotation>
      <info>http://www.di.fm</info>
    </track>
  </trackList>
</playlist> 
```

有人可以展示如何使用 php 脚本完成此任务吗？示例解决方案将不胜感激。

# ruby-on-rails - Rails 复选框重置为默认值

> ID：10423454
> 
> 赞同：0
> 
> 时间：2012-05-03T00:10:45.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我的视图中有几个复选框设置为默认为活动状态：

```
<%= check_box "product[pr_attributes]", "ag_type", {:checked => @product.issenior?, :multiple => true, :checked => true}, checked_value = "ag:senior", unchecked_value = nil %>Senior(65-100) 
```

问题是，当我取消选中其中一个默认值并保存更改时，它默认回到选中状态。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:38:39.517

你的意思是有两个选项键 `:checked`吗？

大多数情况下，第二个`:checked => true`是导致您的问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:53:51.010

我认为在您的情况下执行此操作的最佳方法是使用 check_box_tag 因为您为一个属性做了多个答案

句法

> check_box_tag "id", "value", "boolean_if_checked"

所以在你的情况下：

> <%= check_box_tag "product[pr_attributes][]", "ag_type", @product.issenior?, { } %>

然后只需在 @product.issenior 之后的哈希上添加其他属性？

这样，您可以为 pr_attributes 创建多个复选框，然后当您提交表单时，pr_attributes 将是您选择的数组。

# java - 根据选择动态更改视图部分内容

> ID：10423458
> 
> 赞同：0
> 
> 时间：2012-05-03T00:11:10.067
> 
> 标签：java, eclipse, eclipse-rcp

是否可以根据选择更改视图部分内容？我有一个订阅选择事件的视图部分，并且根据某些条件，视图中会显示不同的控件集。

这听起来很像摇摆卡布局，但是我不确定 swt 中是否有类似物，并且我不想在 java 代码中硬编码视图内容。

像eclipse命令框架`<visibleWhen>`表达式这样的东西真的很值得期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:57:20.633

我认为[StackLayout](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/StackLayout.html)是您正在寻找的。Swing 的 CardLayout 非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:05:05.467

> 是否可以使用声明性表达式来选择视图部分内容？我正在尝试实现类似历史视图的功能，其中一个视图部分可能包含由不同插件贡献的控件（例如 org.eclipse.egit.ui、org.eclipse.team.ui）

不，您需要为此创建自己的扩展点。好消息是[它并不难](http://www.vogella.com/articles/EclipseExtensionPoint/article.html)。

# ios - 如何在 iOS 中录制声音？

> ID：10423462
> 
> 赞同：3
> 
> 时间：2012-05-03T00:11:31.393
> 
> 标签：ios, ipad, audio-recording

我目前想知道如何在 iOS 中录制音频。我知道很多人将其理解为从麦克风录制并播放，但事实并非如此。我正在为 iPad 制作录音应用程序。在 Apple 在 iOS App Store 上的 GarageBand 应用程序中，您可以录制自己的声音并在应用程序中播放。如果这没有意义，请认为它是这样的：

我要做的就是制作一个播放声音的按钮。我需要知道如何录制该按钮的声音并能够播放声音序列。因此，如果我按下“录制”，然后按下“A、F、J”按钮，然后按下“停止”，然后按下“播放”，它将播放它录制的内容（声音为 AF 和 J）。

我正在努力做到这一点，以便您可以在此应用程序中录制和制作自己的音乐。抱歉，如果这令人困惑，请尽您的能力帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:56:25.403

您可以创建两个 NSMutableArrays 并在点击记录时清空它们。您还需要一个 NSTimer 和一个 int。所以在标题中：

```
NSTimer *recordTimer;
NSTimer *playTimer;
int incrementation;
NSMutableArray *timeHit;
NSMutableArray *noteHit; 
```

在您的标题中包含所有的空隙和 IBActions 等等。

让你的声音按钮都有不同的、独特的标签。

然后在你的主文件中：

```
-(void)viewDidLoad {

    timeHit = [[NSMutableArray alloc] init];
    noteHit = [[NSMutableArray alloc] init];

}

-(IBAction)record {

    recordTimer = [NSTimer scheduledTimerWithTimeInterval:0.03 target:self selector:@selector(timerSelector) userInfo:nil repeats:YES];
    [timeHit removeAllObjects];
    [noteHit removeAllObjects];
    incrementation = 0;
}

-(void)timerSelector {

    incrementation += 1;

}

-(IBAction)hitSoundButton:(id)sender {

    int note = [sender tag];
    int time = incrementation;

    [timeHit addObject:[NSNumber numberWithInt:time]];
    [noteHit addObject:[NSNumber numberWithInt:note]];
    [self playNote:note];
}

-(IBAction)stop {

    if ([recordTimer isRunning]) {

        [recordTimer invalidate];
    } else if ([playTimer isRunning]) {

        [playTimer invalidate];
    }

}

-(IBAction)playSounds {

    playTimer = [NSTimer scheduledTimerWithTimeInterval:0.03 target:self selector:@selector(playback) userInfo:nil repeats:YES];

    incrementation = 0;

}

-(void)playback {

    incrementation += 1;

    if ([timeHit containsObject:[NSNumber numberWithInt:incrementation]]) {

        int index = [timeHit indexOfObject:[NSNumber numberWithInt:incrementation]];

        int note = [[noteHit objectAtIndex:index] intValue];

        [self playNote:note];
    }
}

-(void)playNote:(int)note {

    //These notes would correspond to the tags of the buttons they are played by.

    if (note == 1) {
        //Play your first note
    } else if (note == 2) {
        //Play second note
    } else if (note == 3) {
       //And so on
    } else if (note == 4) {
            //etc.
    }

} 
```

稍微摆弄一下（我怀疑这段代码是否完美），你可能会让它工作。就像您可能希望在按下其中一个按钮后禁用播放/录制按钮一样。祝你好运！

# ruby-on-rails - 验证条款的接受：如果 terms_accepted 为 nil，则 validate_acceptance_of 成功

> ID：10423464
> 
> 赞同：1
> 
> 时间：2012-05-03T00:11:40.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

创建用户时，我正在检查使用条款是否被接受，如下所示：

```
# user.rb
class User < ActiveRecord::Base
  validates_acceptance_of :terms, :message => :terms_not_accepted, :on => :create
  attr_accessible :terms, :on => :create # required because I completely disable mass-assignment in an initializer
end 
```

我的表单视图中有以下字段：

```
<label class="checkbox"><%= f.check_box :terms %><span><%=t "users.form.label.terms" %></span></label> 
```

到目前为止，一切都按预期工作。如果用户不接受条款，则会出现错误消息。**但是，如果我只是使用 Chrome 开发人员工具从 HTML 页面中删除复选框（以及视图助手生成的相应隐藏字段），则将创建用户！**

我可以在控制台中重现它：

```
irb(main):001:0> u = User.new # => #<User ...>
irb(main):002:0> u.terms # => nil
irb(main):003:0> u.save! # => other validations fail, but terms check succeeds!
irb(main):004:0> u.terms = false # => false
irb(main):005:0> u.save! # => terms validation fails as expected 
```

另一个信息：`validates :terms, :acceptance => true`产生相同的结果

我知道我可以`false`在`after_initialize`回调中初始化 terms 属性，但我不想这样做，因为验证器应该能够处理这种`nil`情况。那么**这是rails中的错误还是我做错了什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T00:56:33.170

如果您想确保用户接受条款，那么您可以将 allow_nil 设置为 false

[http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000082](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000082)

```
:allow_nil - Skip validation if attribute is nil (default is true). 
```

所以改为

```
validates_acceptance_of :terms, :on => :create, :allow_nil => false, :message => :terms_not_accepted, 
```

# assembly - 在汇编语言中增加 ecx

> ID：10423465
> 
> 赞同：2
> 
> 时间：2012-05-03T00:11:42.177
> 
> 标签：assembly, x86

我需要增加一个数字，以便代码永远增加，但它保持为零。

这是我的代码：

```
section .data
FORMAT: db '%c', 0
FORMATDBG: db '%d', 10, 0
EQUAL: db "is equal", 10, 0
repeat:
    push  ecx  ; just to print
    push  FORMATDBG ; just to print
    call  printf ; just to print
    add esp, 8 ; add the spaces
    inc ecx ; increment ecx
    cmp ecx, 0 ; compare ecx to zero
    ja repeat ; if not equal to zero loop again 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T00:28:41.290

```
repeat:
    xor ecx, ecx
    push  ecx  ; just to print
    push  FORMATDBG ; just to print
    call  printf ; just to print
    add esp, 8 ; add the spaces
    inc ecx ; increment ecx
    cmp ecx, 0 ; compare ecx to zero
    ja repeat ; if not equal to zero loop again 
```

`xor ecx, ecx`设置`ecx`为零。我不确定你是否知道这一点。您可能不希望它在每次迭代中都发生。此外，您的循环条件`ja repeat`当前仅在`ecx > 0`可能不是您想要的（或者不是？）时才会导致循环。

最后一件事，`printf`可能是垃圾`ecx`（我假设`cdecl`或`stdcall`）。阅读调用约定（不确定您使用的是什么编译器/操作系统）并查看哪些寄存器可以保证在函数调用中保留。

就您的代码而言，您可能想要更接近此的东西：

```
 xor ebx, ebx

repeat:
    push  ebx  ; just to print
    push  FORMATDBG ; just to print
    call  printf ; just to print
    add esp, 8 ; add the spaces
    inc ebx ; increment ecx
    cmp ebx, 0 ; compare ecx to zero
    ja repeat ; if not equal to zero loop again 
```

但这不会导致无限循环。当`ebx`达到最大值时，它的值将回绕回 0，这将导致循环条件 ( `ebx>0`) 评估为 false 并退出循环。

# api - 如何获得有关体式任务的更多详细信息？

> ID：10423466
> 
> 赞同：2
> 
> 时间：2012-05-03T00:11:46.653
> 
> 标签：api, asana

我看到了“查询任务”的示例，但它只返回任务的 ID 和名称，我想通过使用 API 查询来获取有关任务的更多信息（例如 created_at、completed、due_on、followers 等） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:35:54.380

（我为 Asana 工作）

请参阅文档中有关输入/输出选项的部分：[https ://asana.com/developers/documentation/getting-started/input-output-options](https://asana.com/developers/documentation/getting-started/input-output-options)

默认情况下，作为子对象或从查询返回的对象以“紧凑”形式输出，通常只是 ID 和名称。如果您想要这些对象的更多详细信息，您可以使用参数指定要包含在输出中的特定字段`opt_fields`。您可以通过使用“扩展”对象来获取对象上的*所有*可用字段`opt_expand`。因此，如果您正在查询任务并想要完整记录而不是紧凑记录，请使用`opt_expand=.`

# javascript - 如何修复此错误，说明某些内容不是函数？

> ID：10423467
> 
> 赞同：0
> 
> 时间：2012-05-03T00:11:59.727
> 
> 标签：javascript, jquery

我试图附加这个：`'<div>' + htmlEncode(imagefilename) + '</div>'`当用户点击取消按钮（.imageCancel）时。但它给了我这个错误：`$('<div/>').text(value).html();`不是一个函数。如何修复此错误？是不是因为

```
$('.cancelImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '</div>'); 
```

在`$(".imageCancel").on("click", function(event) {`函数中？

```
function htmlEncode(value) {
    return $('<div/>').text(value).html();
}

function startImageUpload(imageuploadform, imagefilename) {

    $(".imageCancel").on("click", function (event) {

        $('.cancelImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '</div>');

        var image_file_name = $(this).attr('image_file_name');
        jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)

        $(this).parent().remove();

        $('.upload_target').get(0).contentwindow

        return stopImageUpload();

    });

    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:15:43.120

尝试将功能更改为

```
function htmlEncode(value) { return $('<div/>').text(value || '').html(); } 
```

我怀疑`.text()`测试它的参数可能有点不严谨，并将 a 解释`null`为您希望函数返回所选元素的当前文本内容的含义。

现在，至于*为什么*参数会是`null`，这取决于您的代码的其余部分。

# javascript - javascript中的三个斜杠有什么作用？

> ID：10423469
> 
> 赞同：4
> 
> 时间：2012-05-03T00:12:06.557
> 
> 标签：javascript, syntax-highlighting

我还是 Javascript 的新手，所以当我的编辑突出显示它时，我很感兴趣。它到底是做什么的？

例子：`/// things go after here`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T00:14:18.567

一些文档生成器将三个斜杠 /// 视为向 JavaScript 引入*文档*注释。

看

[http://msdn.microsoft.com/en-us/library/bb514138(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb514138(v=vs.110).aspx)

因此，就 JavaScript 而言，三个斜杠与两个斜杠的工作方式相同（它是对行尾的注释），但文档生成器可以解释三个斜杠以指示文档部分。

例子：

```
 function getArea(radius)
  {
      /// <summary>Determines the area of a circle that has the specified radius parameter.</summary>
      /// <param name="radius" type="Number">The radius of the circle.</param>
      /// <returns type="Number">The area.</returns>
      var areaVal;
      areaVal = Math.PI * radius * radius;
      return areaVal;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:13:16.667

前两个斜杠开始注释。第三个斜线什么也不做。

JS中主要的两种注释方式：

```
/* This way
Can go multi-line */

// This way is one line only 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:15:59.537

我相信这是在某些编辑器/文档程序中定义“更高级别”单行注释的一种方式：

例如，在 macrabbit 的 espresso 编辑器中，它会在导航窗格中突出显示这些单行注释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:15:36.653

JavaScript（和其他一些语言，如 C#）中的三个斜杠用于文档注释。这些用于生成 XML 文档，并在函数等之前以某种格式完成，以指定函数及其参数和参数类型的描述。

[http://msdn.microsoft.com/en-us/library/bb514138(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb514138(v=vs.110).aspx)

# app-config - 我可以在 InstallShield 2012 的 XML 文件更改区域中获取项目输出 app.config 文件吗？

> ID：10423470
> 
> 赞同：0
> 
> 时间：2012-05-03T00:12:14.860
> 
> 标签：app-config, installshield, installshield-2012

我需要将调试/测试 App.config 文件中的几个路径更改为最终用户计算机上的最终主页。通过 Visual Studio 编辑安装程序项目时，我看到了 XML File Changes 选项，并且帮助表明我应该导入要更改的 xml 文件。

但...

有没有办法为 XML 文件导入项目的输出？如果我直接浏览到文件本身，我必须使用 Debug 或 Release 配置文件，这似乎很烦人。否则我可以使用基本的 App.config 但如果在构建时应用了任何转换，它们就会丢失。

那么我是坚持只浏览一个文件，还是可以像获取 .exe 文件一样获取“项目输出”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T00:34:53.637

XML 文件更改是相当弱的茶。要执行您正在寻找的内容，您必须创建一个自定义操作来加载 .config 文件并在 InstallShield 之外对其进行更新。

如果您使用的是 2012 C# Wizard 项目类型，则选项应该是创建一个 .rul，以在 After Move Data 中捕获 OnEnd() 事件。通过 UseDLL 从 .rul 调用到 dll 并调用一个方法，该方法接受配置的目标路径和将值更新到的值。

以下是我正在测试的代码...使用 C# Wizard 项目类型，我添加了以下 InstallScript 规则来调用 C# dll：

```
function OnEnd()
string basePath;
BOOL bResult;
string dllPath;
OBJECT oAppConfig;
begin

dllPath = TARGETDIR ^ APPCONFIG_DLL;
try
    set oAppConfig = DotNetCoCreateObject(dllPath, "AppConfig.ConfigMgr", "");
catch
    MessageBox("Error Loading" + dllPath + ": "  + Err.Description, INFORMATION); 
    abort;
endcatch;

try
    basePath = "C:\\Program Files (x86)\\MyCompany\\Config Test\\";
    bResult = oAppConfig.ConfigureSettings(basePath + "appsettings.xml", basePath + "app.config", "someAppSection");
catch
    MessageBox("Error calling ConfigureSettings " + dllPath + " " + Err.Number + " " + Err.Description, INFORMATION);
endcatch;

end; 
```

C#测试代码： public bool ConfigureSettings(string configFilePath, string targetAppConfigPath, string targetAppName) { bool completed = true;

```
 try
        {
            XmlDocument configFileDoc = new XmlDocument();
            configFileDoc.Load(configFilePath);

            string installerTargetFileDoc = targetAppConfigPath; // InstallShield's build process for Visual Studio solutions does not rename the app.config file - Awesome!
            System.IO.FileInfo fi = new System.IO.FileInfo(installerTargetFileDoc);
            if (fi.Exists == false) installerTargetFileDoc = "app.config";
            XmlDocument targetAppConfigDoc = new XmlDocument();
            targetAppConfigDoc.Load(installerTargetFileDoc);

            // ensure all required keys exist in the target .config file
            AddRequiredKeys(configFileDoc.SelectSingleNode("configuration/" + targetAppName + "/requiredKeys"), ref targetAppConfigDoc);

            // loop through each key in the common section of the configuration file
            AddKeyValues(configFileDoc.SelectSingleNode("configuration/common/appSettings"), ref targetAppConfigDoc);

            // loop through each key in the app specific section of the configuration file - it will override the standard configuration
            AddKeyValues(configFileDoc.SelectSingleNode("configuration/" + targetAppName + "/appSettings"), ref targetAppConfigDoc);

            // save it off
            targetAppConfigDoc.Save(targetAppConfigPath);
        }
        catch (Exception ex)
        {
            completed = false;
            throw ex;
        }
        return completed;
    }
    private void AddKeyValues(XmlNode configAppNodeSet, ref XmlDocument targetAppConfigDoc)
    {
        foreach (XmlNode configNode in configAppNodeSet.SelectNodes("add"))
        {
            XmlNode targetNode = targetAppConfigDoc.SelectSingleNode("configuration/appSettings/add[@key='" + configNode.Attributes["key"].Value + "']");
            if (targetNode != null)
            {
                targetNode.Attributes["value"].Value = configNode.Attributes["value"].Value;
            }
        }
    }
    private void AddRequiredKeys(XmlNode targetAppNodeSet, ref XmlDocument targetAppConfigDoc)
    {
        foreach (XmlNode targetNode in targetAppNodeSet.SelectNodes("key"))
        {
            // add the key if it doesn't already exist
            XmlNode appNode = targetAppConfigDoc.SelectSingleNode("configuration/appSettings/add[@key='" + targetNode.Attributes["value"].Value + "']");
            if (appNode == null)
            {
                appNode = targetAppConfigDoc.SelectSingleNode("configuration/appSettings");
                XmlNode newAddNode = targetAppConfigDoc.CreateNode(XmlNodeType.Element, "add", null);
                XmlAttribute newAddNodeKey = targetAppConfigDoc.CreateAttribute("key");
                newAddNodeKey.Value = targetNode.Attributes["value"].Value;
                XmlAttribute newAddNodeValue = targetAppConfigDoc.CreateAttribute("value");
                newAddNodeValue.Value = "NotSet";
                newAddNode.Attributes.Append(newAddNodeKey);
                newAddNode.Attributes.Append(newAddNodeValue);
                appNode.AppendChild(newAddNode);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:30:32.613

虽然它看起来应该可以工作，但 Installshield 无法正确理解项目输出（依赖项经常丢失，合并模块即使在它们不适用时也会重复），或者为您提供一种处理项目输出中单个文件的方法。

我有不少于 5 个关于使用项目输出的问题与他们一起打开的错误，他们的解决方法始终是“手动添加文件”。

如果您刚刚开始使用 install shield，我建议您尝试另一种选择。如果您必须使用它，要么向他们的支持团队抱怨这不起作用，并使用建议的解决方法，直到他们把它放在一起。

这可能不是您问题的“答案”，但希望在处理此产品中的损坏功能集时能帮助您保持理智。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:54:30.803

您可以导入您想要的任何文件（通过浏览），并在您喜欢的任何运行时位置对其进行更改。我建议只投入您进行更改所需的最少金额；毕竟它是 XML 文件*更改*视图。这样，对文件的大多数更新都不会导致或需要对您的 XML 文件更改设置进行任何更改，无论它是如何包含的。

# php - PHP 变量和极慢的 MySQL 查询

> ID：10423472
> 
> 赞同：0
> 
> 时间：2012-05-03T00:12:23.110
> 
> 标签：php, mysql, performance, variables

我有以下从表单获取数据的 PHP 代码，以及需要 15 分钟以上才能完成的 MySQL 查询。它需要更快。我想知道我是否忽略了使用 PHP 变量和 MySQL 查询的任何最佳实践，和/或查询结构本身是否对完成所需的不可接受的时间长度负责。

查询的基本目的是统计选民 PK 作为选票 FK 出现的次数，如果计数超过预定义的数量（百分比基于最终计算PHP 条件语句，以及过滤掉 2004 年以后所有内容的查询部分）。

voters 表有 100 万行，而 votes 表有 700 万行，两个 CountyEMSID 键都已编入索引，但是我不允许更改表结构，并且只能从中读取数据，而不会写入数据。任何有关如何加快速度的建议或建议将不胜感激！

另外，对这篇文章感到抱歉：P

```
/* ========== GET VALUES ========== */
if (isset($_GET["StreetName"])) { $searchStreetName = $_GET["StreetName"]; } else { $searchStreetName = "%"; }
if (isset($_GET["City"])) { $searchCity = $_GET["City"]; } else { $searchCity = "%"; }
if (isset($_GET["Zip"])) { $searchZip = $_GET["Zip"]; } else { $searchZip = "%"; }
if (isset($_GET["DOBY"])) { $searchDOBY = $_GET["DOBY"]; } else { $searchDOBY = "%"; }
if (isset($_GET["DOBM"])) { $searchDOBM = $_GET["DOBM"]; } else { $searchDOBM = "%"; }
if (isset($_GET["DOBD"])) { $searchDOBD = $_GET["DOBD"]; } else { $searchDOBD = "%"; }
if (isset($_GET["Gender"])) { $searchGender = $_GET["Gender"]; } else { $searchGender = "%"; }
if (isset($_GET["Party"])) { $searchParty = $_GET["Party"]; } else { $searchParty = "%"; }
if (isset($_GET["ED"])) { $searchED = $_GET["ED"]; } else { $searchED = "%"; }
if (isset($_GET["AD"])) { $searchAD = $_GET["AD"]; } else { $searchAD = "%"; }
if (isset($_GET["CD"])) { $searchCD = $_GET["CD"]; } else { $searchCD = "%"; }
if (isset($_GET["CO"])) { $searchCO = $_GET["CO"]; } else { $searchCO = "%"; }
if (isset($_GET["SD"])) { $searchSD = $_GET["SD"]; } else { $searchSD = "%"; }
if (isset($_GET["CC"])) { $searchCC = $_GET["CC"]; } else { $searchCC = "%"; }
if (isset($_GET["VoterActivity"])) { $searchVoterActivity = (($_GET["VoterActivity"] / 100) * 18); } else { $searchVoterActivity = "0"; }

/* ========== GET DATA ========== */
$sql = "SELECT voters.*, COUNT(votes.CountyEMSID) AS 'activity'
FROM voters INNER JOIN votes ON voters.CountyEMSID = votes.CountyEMSID
WHERE voters.StreetName LIKE '$searchStreetName%'
AND voters.City LIKE '$searchCity%'
AND voters.Zip LIKE '$searchZip%'
AND voters.DOBY LIKE '%$searchDOBY'
AND voters.DOBM LIKE '%$searchDOBM'
AND voters.DOBD LIKE '%$searchDOBD'
AND voters.Gender LIKE '$searchGender%'
AND voters.Party LIKE '$searchParty%'
AND voters.ED LIKE '%$searchED'
AND voters.AD LIKE '%$searchAD'
AND voters.CD LIKE '%$searchCD'
AND voters.CO LIKE '%$searchCO'
AND voters.SD LIKE '%$searchSD'
AND voters.CC LIKE '%$searchCC'
AND votes.ElectionDateY >= 2004
AND (
votes.ElectionType = 'GE'
OR votes.ElectionType = 'PR'
OR votes.ElectionType = 'PP'
)
GROUP BY votes.CountyEMSID
HAVING COUNT(votes.CountyEMSID) >= '$searchVoterActivity'
ORDER BY voters.LastName, voters.FirstName, voters.DOBY, voters.DOBM, voters.DOBD ASC
LIMIT $start, $limit";

/* ========== CREATE TABLE ========== */
CREATE TABLE voters (
    CountyEMSID varchar(9) NOT NULL,
    LastName varchar(30) NOT NULL,
    FirstName varchar(30) NOT NULL,
    MiddleInitial varchar(1) NOT NULL,
    NameSuffix varchar(4) NOT NULL,
    HouseNumber varchar(10) NOT NULL,
    HouseNumberSuffix varchar(10) NOT NULL,
    ApartmentNumber varchar(15) NOT NULL,
    StreetName varchar(50) NOT NULL,
    City varchar(40) NOT NULL,
    Zip varchar(5) NOT NULL,
    ZipCode4 varchar(4) NOT NULL,
    MailingAddress1 varchar(50) NOT NULL,
    MailingAddress2 varchar(50) NOT NULL,
    MailingAddress3 varchar(50) NOT NULL,
    MailingAddress4 varchar(50) NOT NULL,
    DOBY varchar(4) NOT NULL,
    DOBM varchar(2) NOT NULL,
    DOBD varchar(2) NOT NULL,
    Gender varchar(1) NOT NULL,
    Party varchar(3) NOT NULL,
    Other varchar(30) NOT NULL,
    ED varchar(3) NOT NULL,
    AD varchar(2) NOT NULL,
    CD varchar(2) NOT NULL,
    CO varchar(2) NOT NULL,
    SD varchar(2) NOT NULL,
    CC varchar(2) NOT NULL,
    RegY varchar(4) NOT NULL,
    RegM varchar(2) NOT NULL,
    RegD varchar(2) NOT NULL,
    Status varchar(2) NOT NULL,
    VoterType varchar(1) NOT NULL,
    StatusChangeY varchar(4) NOT NULL,
    StatusChangeM varchar(2) NOT NULL,
    StatusChangeD varchar(2) NOT NULL,
    LastVoted varchar(4) NOT NULL,
    Telephone varchar(12) NOT NULL,
    KEY CountyEMSID (CountyEMSID)
)

/* ========== CREATE TABLE ========== */
CREATE TABLE votes (
    CountyEMSID varchar(9) NOT NULL,
    County varchar(2) NOT NULL,
    AD varchar(2) NOT NULL,
    ED varchar(3) NOT NULL,
    Party varchar(3) NOT NULL,
    ElectionDateY varchar(4) NOT NULL,
    ElectionDateM varchar(2) NOT NULL,
    ElectionDateD varchar(2) NOT NULL,
    ElectionType varchar(2) NOT NULL,
    VoterType varchar(1) NOT NULL,
    KEY CountyEMSID (CountyEMSID)
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:14:31.923

表面上看起来很简单：您需要使用索引。我在您的架构转储中看不到任何内容。

# mysql - MySQL使用内部连接语法从两个表中检索数据

> ID：10423479
> 
> 赞同：3
> 
> 时间：2012-05-03T00:13:43.113
> 
> 标签：mysql, sql

我的两张桌子是

```
Entry
event_id   competitor_id   place
101        101             1
101        102             2
101        201             3
101        301             4
102        201             2
103        201             3 
```

第二张表列出了为活动提供的奖品

```
Prize
event_id   place          money
101        1              120
101        2              60
101        3              30
102        1              10
102        2              5
102        3              2
103        1              100
103        2              60
103        3              40 
```

由此，我希望显示参赛表中的所有信息以及他们因受人尊敬的排名而赢得的金额。如果他们未能投入资金，则将显示 0。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T00:24:26.970

试试这个：

```
SELECT  a.Event_ID, 
        a.Competitor_ID,
        a.Place,
        COALESCE(b.money, 0) as `Money`
FROM    entry a left join prize b
            on  (a.event_id = b.event_ID) AND
                (a.place = b.Place) 
```

希望这可以帮助。

```
EVENT_ID    COMPETITOR_ID   PLACE   MONEY
101           101            1      120
101           102            2       60
101           201            3       30
101           301            4        0   -- << this is what you're looking for
102           201            2        5
103           201            3       40 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:18:23.950

```
SELECT * FROM Entry NATURAL LEFT JOIN Prize; 
```

如果您在没有中奖时绝对想要`0`而不是`NULL`“钱”（但是您如何区分 0 奖和没有奖？）：

```
SELECT Entry.*, COALESCE(money, 0) AS money FROM Entry NATURAL LEFT JOIN Prize; 
```

[在 sqlfiddle 上](http://sqlfiddle.com/#!2/76a5c/2)看到它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T00:26:27.537

试试这个：

```
select e.*, coalesce(p.money, 0) money from entry e
left join prize p
on e.event_id = p.event_id and e.place = p.place 
```

[你可以在这里](http://sqlfiddle.com/#!2/3b190/2)玩小提琴。

# asp.net-mvc - LINQ - OrderBy 的动态表达式

> ID：10423482
> 
> 赞同：3
> 
> 时间：2012-05-03T00:14:19.033
> 
> 标签：asp.net-mvc, linq, entity-framework

我有一个小问题，我将尝试详细解释。

在我的系统上，我有一个使用 EF 4.1 的通用存储库。一切都很好，但是在某些情况下我遇到了一个问题，我需要对一些查询进行动态 orderBy。

我通过参数收到一个代表我班级字段的“字符串”，以执行 orderBy（如“id”或“description”）

部分代码：

```
 public class SomeClass
        {
            public int id { get; set; }
            public string description { get; set; }
        }

        // First we define the parameter that we are going to use
        // in our OrderBy clause. This is the same as "(parameter =>"
        // in the example above.
        var param = Expression.Parameter(typeof(SomeClass), "parameter");

        // Now we'll make our lambda function that returns the
        // request.SortingName property by it's name.
        var expression = Expression.Lambda<Func<SomeClass, int>>(Expression.Property(param, request.SortingName), param); 
```

好吧，如果 "request.SortingName" 是类型 "int" (id) ，则此代码有效，但如果我想通过 "string" (description) 或其他类型进行 orderBy，则此代码不起作用。

我将表达式更改为使用“对象”：

```
 var expression = Expression.Lambda<Func<SomeClass, object>>(Expression.Property(param, request.SortingName), param); 
```

但是当我运行代码时，编译器会抛出下一个异常： 'System.Int32' 类型的表达式不能用于返回类型 'System.Object'

如果属性是字符串类型，则例外是“System.String”类型的表达式不能用于返回类型“System.Object”

换句话说，代码不适用于“对象”类型。

任何人都知道我该如何解决这个问题？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T01:19:02.853

下面是我如何使用 EF4 和我在标准开发库中创建的一些通用方法进行动态排序和分页。重要的是您用来为 SortBy 方法创建 Lambda 表达式的第二段代码。

```
public enum SqlOrderByDirecton
{
    ASC,
    DESC
} 
```

* * *

```
 //Derive Lambda Expression from string

 string sortByKey = "BusinessId";
 string value = "DESC";

 var p = Expression.Parameter(typeof(T));

 this.SortBy = Expression.Lambda<Func<T, dynamic>>(Expression.TypeAs(Expression.Property(p, sortByKey), typeof(object)), p).Compile();

 this.SortOrder = (DevCore.SqlOrderByDirecton)Enum.Parse(typeof(DevCore.SqlOrderByDirecton), value, true); 
```

* * *

```
public static List<T> SortAndPaginate<T>(IEnumerable<T> query,
                                             Func<T, object> sortBy,
                                             SqlOrderByDirecton sortOrder,
                                             int rowLimit,
                                             int startRecord,
                                             out int recordCount)
    {
        recordCount = query.Count();

        List<T> list = new List<T>();

        if (sortOrder == SqlOrderByDirecton.ASC)
        {
            list = query.OrderBy(sortBy).Skip(startRecord).Take(rowLimit).ToList();
        }
        else
        {
            list = query.OrderByDescending(sortBy).Skip(startRecord).Take(rowLimit).ToList();
        }

        return list;
    } 
```

# apache-pig - 如何在 Pig 中删除带有约束的重复项？

> ID：10423484
> 
> 赞同：2
> 
> 时间：2012-05-03T00:14:26.507
> 
> 标签：apache-pig

我对 Pig 完全陌生，遇到了一些麻烦。

我有一个数据列表，我想删除重复项。然而，问题是重复是通过具有相同的用户名和具有相同阈值内的访问时间来定义的。例如：

A: [用户 1, 10]

B: [用户 1, 20]

C: [用户 1, 11]

D: [用户 2, 10]

如果阈值为 2，则应将 A 和 C 标识为重复项。我如何在 Pig 中做到这一点？目前看起来我应该使用 UDF 和 DISTINCT 的某种组合，但我不确定如何告诉 DISTINCT 我想将“重复”定义为什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:22:47.017

```
a=load 'data' as (user, access_time:int) using ...;
b=foreach a generate user as user, (access_time > $threshold ? $threshold : access_time) as access_time;
c=group b by user;
d=foreach c generate group as user, FLATTEN(DISTINCT(b.access_time)) as access_time;
store d; 
```

我没有测试脚本，但想法是按用户分组，将高于阈值的所有内容替换为阈值，然后使用内置的不同 UDF。

# wordpress - 在外观页面的活动主题下添加链接

> ID：10423486
> 
> 赞同：0
> 
> 时间：2012-05-03T00:14:35.267
> 
> 标签：wordpress, themes

在主题选择页面中，链接显示在显示其功能的活动主题下方。大多数时候，如果您运行，这些是*小部件*、*菜单*和*主题选项*`add_theme_page()`链接。

由于我创建了自己的顶级菜单并且没有使用 add_theme_page()，因此我的路径重定向到`admin.php?page=chosen-slug`而不是，`themes.php?page=chosen-slug`并且外观部分中没有*主题选项*链接。有没有办法我仍然可以显示该链接以显示我的主题有选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:12:36.500

我想现在需要一个 jQuery 解决方案。这不是我的第一选择，但至少它有效。

PHP：

```
// Create the theme options link
add_action("admin_menu", "setup_theme_admin_menus"); 
function setup_theme_admin_menus(){
    add_theme_page('', 'Theme Options', 'manage_options', 'sample-slug', '');
} 
```

jQuery：

```
// Redirect link in Appearance to your top-level menu
$('#current-theme div.theme-options a[href="themes.php?page=sample-slug"]').attr('href', 'admin.php?page=sample-slug');

/*
 * Hide the link created by add_theme_page(). Use each() since our <li> has no
 * name and this makes sure the script always works even if its position changes.
 */
$('#menu-appearance a[href="themes.php?page=sample-slug"]').each(function(){
    $(this).parent().hide();
}); 
```

# iphone - iTunes Connect 重新添加测试用户？

> ID：10423488
> 
> 赞同：0
> 
> 时间：2012-05-03T00:14:43.580
> 
> 标签：iphone, ios, testing, app-store-connect

前段时间我一直在测试我的一个应用程序并遇到了一些应用程序内购买错误，所以我决定删除我的测试用户并尝试使用新用户。我想再次将我的旧测试用户添加到我的帐户，但收到以下消息：

> 发生以下错误：您输入的电子邮件地址已属于现有 Apple 帐户。请再试一次。

如何解决此问题并在 iTunes Connect 中再次添加旧的测试用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:35:41.973

不幸的是，您无法再次添加旧用户，即使您将其删除。只需创建一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:15:50.463

来自苹果文档：

> 您只能使用分配有管理员或技术角色的 iTunes Connect 帐户创建测试用户帐户。测试用户无权访问 iTunes Connect，但可以在已注册的测试设备上的开发环境中测试应用内购买。

[链接在这里](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html)

# c# - 正则表达式初学者困惑

> ID：10423489
> 
> 赞同：0
> 
> 时间：2012-05-03T00:14:45.313
> 
> 标签：c#, regex

**输入 ：**

你好，我的名字是**X。**等等等等等等

**编辑 1：**任何用户都可以输入他的名字替换为 X。所以**X**是一个长度可变的变量。

**所需输出：**

你好，我的名字是 Ahmed
*其中 X = Ahmed*

**图案 ：**

```
(Hello my name is .+)\. 
```

真的，这是一个新手问题：（，，我刚开始学习。
**不工作！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:22:47.133

我真的不知道你的模式试图完成什么，所以我将从头开始。你要做的是匹配`Hello my name is X`。我们可以这样做。

```
/Hello my name is X\./ 
```

但是我们不想捕获*字母*X，我们想匹配 X 的位置。所以现在我们的正则表达式变成了。

```
/Hello my name is .+\./ 
```

所以以前的正则表达式现在匹配任何字符一次或多次。现在我们要捕获它并在正则表达式之外使用它。我们可以使用 capture, `()`, 操作符来做到这一点。

```
/Hello my name is (.+)\./ 
```

现在的问题是，“我们如何获得捕获？” 那么`Regex.Match`返回一个`Match`. 现在`Match`有一个名为的属性`Groups`，它是正则表达式中所有捕获的集合。所以我们的最终代码是。

```
var match = Regex.Match("Hello my name is dunsmoreb.", @"Hello my name is (.+)\.");
Console.WriteLine(match.Groups[1]); // Prints `dunsmoreb`. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:40:34.857

当您看到一个带有反斜杠的正则表达式时，正则表达式引擎需要将其解释为文字反斜杠。这意味着，如果您的编程语言`\`用于在字符串中转义，则对于`\`正则表达式中的每个，您都需要`\\`在字符串中。

例如，要使用正则表达式`Hello my name is (.+)\.`，您可能需要使用以下字符串：

```
"Hello my name is (.+)\\." 
```

请注意，这可能不是您想要的确切正则表达式，例如带有“Hello my name is Ahmed. Blah blah”之类的字符串。你会得到“Ahmed. Blah blah”作为名字，因为`(.+)`它是贪婪的。您可以更改`(.+)`to`(.+?)`来解决此问题，但如果`.`是名称中的有效字符（例如“JRR Tolkien”），您将遇到匹配不足的类似问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:22:16.210

使用以下内容：

```
Hello my name is (\w+) 
```

`(\w+)`匹配组成单词的字符。如果名称中有空格，请说“John Doe”，这将仅匹配“John”

在此处查看有关正则表达式用法的更多说明：http: [//msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

# android - 什么是系统测试？

> ID：10423491
> 
> 赞同：1
> 
> 时间：2012-05-03T00:15:37.387
> 
> 标签：android, unit-testing, testing

我已经用谷歌搜索了有关测试 uni 和系统测试的信息。但我很困惑到底什么是系统测试？我正在开发一个移动应用程序，想知道如何进行这项技术测试。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:15:36.153

**系统测试**是调试软件的一种更详尽的方法。目标是针对各种输入测试软件，以便发现尽可能多的缺陷/错误。系统测试的困难部分通常是提出要测试的输入/情况（尤其是在 Android 开发的情况下，因为很多事情都可能出错）。配置更改后您的应用程序是否正常工作？你的`EditText`盒子指定正确`inputType`吗？系统测试提供了一种发现此类错误的方法，并且通常会产生更安全/更强大的应用程序。

Android 团队提供了几种工具可以自动执行此类测试（尽管显然不能保证它会涵盖所有情况）。一个这样的工具是[monkeyrunner](http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html)。查看 Android 开发者[测试](http://developer.android.com/guide/topics/testing/index.html)指南了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-14T17:51:29.467

系统测试是一种测试，其中

1.  设置已定义，
2.  系统地选择输入，
3.  结果记录在案，并根据测试前定义的标准进行评估

# javascript - .JS 和 XSL 的性能和转换问题

> ID：10423492
> 
> 赞同：0
> 
> 时间：2012-05-03T00:15:38.243
> 
> 标签：javascript, xslt

我是这个 java 脚本和 xsl 的新手。我们正在使用 .js 将 .csv 文件转换为 xml，在 .js 代码中使用 xsl。

它会产生很多性能问题，并且不会为某些 .csv 文件创建任何 xml 文件。任何帮助将不胜感激。

```
showAbsolutePath("InvoiceAdjustment.js");

function showAbsolutePath(path)
 {
 var fso = new ActiveXObject("Scripting.FileSystemObject");
 var s = "";
 s += fso.GetAbsolutePathName(path);

 var foldername = s.substring(0,s.indexOf(path,0));
 showFolderFileList(foldername);
 }

 function showFolderFileList(foldername)
 {
  var fso, f, fc, filename;

 fso = new ActiveXObject("Scripting.FileSystemObject");
  f = fso.GetFolder(foldername);
 fc = new Enumerator(f.files);

 for (; !fc.atEnd(); fc.moveNext())
 {
  filename = "";
  filename += fc.item();

  if (filename.slice(-4) == ".csv")
  {
    convertCSVtoXML(foldername, filename);
    }
   }  

  fso = null;
  }

function  convertCSVtoXML(foldername, filename)
{ 
var objDOMDocument = new ActiveXObject("MSXML2.DOMDocument.4.0"); 
objDOMDocument.async = false; 

 //Create Header
 objDOMDocument.appendChild(XMLHeader(objDOMDocument)); 
 var objXMLDOMNode = objDOMDocument.documentElement.selectSingleNode("//Document"); 

 // Declare XML object -- this makes it easier to pass as a parameter 
 var objXML  = new Object(); 

 // Open the extracted csv from zip file
 var fso = new ActiveXObject("Scripting.FileSystemObject");

 var csvFilename = filename;

 var tso = fso.OpenTextFile(csvFilename, 1); 
 var strInput; 

 // Loop through the file 
 while(!tso.AtEndOfStream)  
 { 
 strInput = tso.ReadLine();

var vInputLine = strInput.split(","); 
objXML.a = vInputLine[0];
objXML.b = vInputLine[1];
objXML.c = vInputLine[2];
objXML.d = vInputLine[3];
objXML.e = vInputLine[4];

if (objXML.a != 'RebateInvoiceID')
{
  objXMLDOMNode.appendChild(XMLFileNode(objDOMDocument,objXML));
  }    
 } 
 tso.Close();

 // Load Transform file
  var TransformXSL = new ActiveXObject("MSXML2.DOMDocument.4.0");
 TransformXSL.async = false  
 TransformXSL.load(foldername + "\\InvAdj.xsl");

 // Load XML file and transform it
 var TempStagingDoc = new ActiveXObject("MSXML2.DOMDocument.4.0");
 TempStagingDoc.async = false; 
 TempStagingDoc.loadXML(objDOMDocument.xml);      
 var FinalStr = TempStagingDoc.transformNode(TransformXSL);

 // Grab just the file name minus any extension
 var fn = filename.substring(0, filename.indexOf(".csv")); 
 tmpxml = fn + ".xml";  

 // Write out the transformed file. If writing out just the xml file before transform  
 //  FSObject.WriteLine(objDOMDocument.xml);     

  var FSObject = fso.CreateTextFile(tmpxml, true);
  FSObject.WriteLine(FinalStr);
  FSObject.Close();

 /*
 // Create empty .flag file then rename it
  tmpxml += ".flag";
  var fsoEmptyFile = fso.CreateTextFile(tmpxml, true);
   fsoEmptyFile.Close();

  // Rename the .flag file to .done
 var donefilename = tmpxml.substring(0,tmpxml.indexOf(".flag",0));
 donefilename += ".done";
 fso.MoveFile(tmpxml, donefilename);

 // Delete the corresponding .csv file
  fso.DeleteFile(csvFilename);

  */

 // Clear all objects
 objDOMDocument = null; 
 fso = null;
 TransformXSL = null;
 objXML = null;
 TempStagingDoc = null;
  }

 function XMLHeader(objDOMDocument)
 { 
  var XMLHead;
  XMLHead = objDOMDocument.createNode(1, "Document",""); 

  var objXMLDOMAttribute = objDOMDocument.createAttribute("Version"); 
  objXMLDOMAttribute.text = "1.0";
   XMLHead.attributes.setNamedItem(objXMLDOMAttribute);

    var objXMLDOMAttribute = objDOMDocument.createAttribute("CreationTimestamp"); 
   objXMLDOMAttribute.text = getTimestamp();
   XMLHead.attributes.setNamedItem(objXMLDOMAttribute);

   return(XMLHead);
    } 

 function XMLFileNode(objDOMDocument,objXML)
 {     
 var objXMLDOMNode = objDOMDocument.createNode(1, "RawXMLRow","");

 objXMLDOMElement = objDOMDocument.createElement("RebateInvoiceID"); 
 objXMLDOMElement.text = objXML.a;
 objXMLDOMNode.appendChild(objXMLDOMElement);

  objXMLDOMElement = objDOMDocument.createElement("RebateEventID"); 
  objXMLDOMElement.text = objXML.b;
  objXMLDOMNode.appendChild(objXMLDOMElement);

   objXMLDOMElement = objDOMDocument.createElement("BusinessUnitCode");
   function getBusinessUnitCode(){
     var r = String(objXML.c).length;
    if(r == 4)
    return String(objXML.c);
    if( r == 3)
  return "0"+String(objXML.c);
  if(r == 2){
          return "00"+String(objXML.c);
    }
     else
          return "000"+String(objXML.c);

     }
    objXMLDOMElement.text = getBusinessUnitCode();
    objXMLDOMNode.appendChild(objXMLDOMElement);

    objXMLDOMElement = objDOMDocument.createElement("CategoryID"); 
   objXMLDOMElement.text = objXML.d;
   objXMLDOMNode.appendChild(objXMLDOMElement);

    objXMLDOMElement = objDOMDocument.createElement("PaymentAmount"); 
   objXMLDOMElement.text = objXML.e;
    objXMLDOMNode.appendChild(objXMLDOMElement);

    return(objXMLDOMNode);
    }

  function getTimestamp()
   {
  var d = new Date();
   var mm = padZeros(d.getMonth()+1);
   var dd = padZeros(d.getDate());
   var hh = padZeros(d.getHours());
   var mn = padZeros(d.getMinutes());
   var ss = padZeros(d.getSeconds());

   return d.getFullYear()+"-"+ mm +"-"+ dd +"T"+ hh +":"+ mm +":"+ ss;
    }

   function padZeros(s)
     {
        if (s < 10)
        {
        s = "0" + s;
           }
       return(s);
          }

         function getDate(stringDate)
        {
        var a = String(stringDate).split( "/" );
        var strXML ;

          strDate = "" ;

       for ( var i = 0 ; i < a.length; i++ )
       {
         if (a[i].length == 1)
     strDate += "0" + a[i];
        else
     strDate += a[i];
           }

         strDate += "" ;

        return strDate;
        }

    /* code for xsl */
       <?xml version="1.0"?>
     <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"  
                        xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
       xmlns:script="script" exclude-result-           prefixes="msxsl">
         <xsl:output omit-xml-declaration="yes"/>

        <!-- ROOT -->
        <xsl:template match="/">
      <EnterpriseDocument>
      <xsl:attribute name="InterfaceName">RebateInvoiceAdjustmentImport</xsl:attribute>
       <xsl:attribute name="ClientID">
        <xsl:choose>
       <xsl:when test="normalize-space(ClientID)">
        <xsl:value-of select="//Document/RawXMLRow/ClientID"/>
       </xsl:when>
      <xsl:otherwise>1000001</xsl:otherwise>
       </xsl:choose>
        </xsl:attribute>
        <xsl:attribute name="ClientName">XXXX</xsl:attribute>
          <xsl:attribute name="Version">1.0</xsl:attribute>
        <xsl:attribute name="CreationSource">File</xsl:attribute>
          <xsl:attribute name="CreationTimestamp">
           <xsl:value-of select="script:getTimestamp()"/>
         </xsl:attribute>
           <xsl:call-template name="InvAdjData"/>
         </EnterpriseDocument>
         </xsl:template>

         <xsl:template name="InvAdjData">
            <xsl:for-each select="//Document/RawXMLRow[not(RebateInvoiceID=preceding- 
             sibling::RawXMLRow/RebateInvoiceID)]">
          <xsl:sort select="RebateInvoiceID"/>
           <RebateInvoice>
           <xsl:attribute name="RebateInvoiceID">
           <xsl:value-of select="RebateInvoiceID"/>
              </xsl:attribute>
                <xsl:variable name="InvoiceID">
         <xsl:value-of select="RebateInvoiceID"/>
             </xsl:variable>
           <xsl:for-each select="//Document/RawXMLRow[not(RebateEventID=preceding-
         sibling::RawXMLRow[RebateInvoiceID=$InvoiceID]/RebateEventID)]">
         <xsl:if test="RebateInvoiceID=$InvoiceID">
           <xsl:variable name="EventID">
            <xsl:value-of select="RebateEventID"/>
          </xsl:variable>
          <RebateProgram>
            <xsl:attribute name="RebateEventID">
              <xsl:value-of select="RebateEventID"/>
            </xsl:attribute>

           <xsl:for-each select="//Document/RawXMLRow[not(BusinessUnitCode=preceding- 
          sibling::RawXMLRow[RebateInvoiceID=$InvoiceID and  
             RebateEventID=$EventID]/BusinessUnitCode)]">
              <xsl:if test="RebateInvoiceID=$InvoiceID and RebateEventID=$EventID">
                <xsl:variable name="BUCode">
                  <xsl:value-of select="BusinessUnitCode" />
                </xsl:variable>
                <BusinessUnit>
                  <xsl:attribute name="BusinessUnitCode">
                  <xsl:value-of select="BusinessUnitCode"/>
                </xsl:attribute>

                  <xsl:for-each select="//Document/RawXMLRow[not(CategoryID=preceding-
            sibling::RawXMLRow[RebateInvoiceID=$InvoiceID and RebateEventID=$EventID 
             and BusinessUnitCode=$BUCode]/CategoryID)]">
                    <xsl:if test="RebateInvoiceID=$InvoiceID and RebateEventID=$EventID
                     and BusinessUnitCode=$BUCode">
                      <ItemCategoryPayment>

                        <xsl:attribute name="CategoryID">
                          <xsl:value-of select="CategoryID"/>
                        </xsl:attribute>
                        <xsl:attribute name="PaymentAmount">
                          <xsl:value-of select="PaymentAmount"/>
                        </xsl:attribute>
                      </ItemCategoryPayment>
                    </xsl:if>
                        </xsl:for-each>
                       </BusinessUnit >
                          </xsl:if>

                     </xsl:for-each>

                    </RebateProgram >
                   </xsl:if>
                  </xsl:for-each>
                </RebateInvoice >
              </xsl:for-each>

              </xsl:template>

                <!-- BEGIN JSCRIPT HELPER CODE, KEEP THIS SECTION AS SMALL AS POSSIBLE  
               IT'S A PERFORMANCE HOG -->
      <msxsl:script language="JScript" implements-prefix="script">
        <![CDATA[

            function getTimestamp()
               {
            var d = new Date();
           var m, dy, hr, mn, se;

         if (d.getMonth()+1 < 10)
       {
       m = "0"+(d.getMonth()+1);
        }
      else if (d.getMonth()+1 > 9)
       {
         m = d.getMonth()+1;
        }

      if (d.getDate() < 10)
         {
       dy = "0"+(d.getDate());
         }
        else if (d.getDate() > 9)
            {
         dy = d.getDate();
         }

       if (d.getHours() < 10)
       {
           hr = "0"+(d.getHours());
          }
          else if (d.getHours() > 9)
          {
             hr = d.getHours();
           }

     if (d.getMinutes() < 10)
       {
       mn = "0"+(d.getMinutes());
         }
        else if (d.getMinutes() > 9)
         {
         mn = d.getMinutes();
          }

         if (d.getSeconds() < 10)
         {
           se = "0"+(d.getSeconds());
          }
      else if (d.getSeconds() > 9)
       {
         se = d.getSeconds();
          }

          return d.getFullYear()+"-"+ m +"-"+ dy +"T"+ hr +":"+ mn +":"+ se;
           }

                ]]>
           </msxsl:script>
         </xsl:stylesheet> 
```

我不知道如何附加我的 .csv 文件。但是这个代码有什么办法可以让它变得更好吗？？？请分享你的想法。

/* sample .csv file data */ RebateInvoiceID RebateEventID BusinessUnitCode CategoryID PaymentAmount 1001655 1002652 406 1000043 696.81 1001655 1002650 423 1000043 8.85 1001655 1002652 423 1000043 443.39 1001655 1002650 433 1000043 15.93 3001655 8002652 433 1000043 432.29 3001655 8002652 434 1000043 55.46 3001655 8002653 434 1000043 590.6 3001655 8002653 435 1000043 10.03 5001655 2002652 435 1000043 329.31 5001655 2002652 436 1000043 21.83 5001655 2002655 436 1000043 501.71 5001655 2002655 437 1000043 32.45 5001655 2002655 437 1000043 674.81

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:29:08.883

这段代码：

```
<xsl:for-each select="//Document/RawXMLRow[not(RebateInvoiceID=preceding- 
             sibling::RawXMLRow/RebateInvoiceID)]"> 
```

重复出现是一种非常低效的分组（或消除重复项）方式 - 性能与数据中的行数成二次方。假设您坚持使用 XSLT 1.0，请查看使用键的 Muenchian 分组。

# android - 在 Android 的 sd 卡上保存/重命名拍摄的照片

> ID：10423494
> 
> 赞同：1
> 
> 时间：2012-05-03T00:15:56.040
> 
> 标签：android, image, android-sdcard, mediastore

我使用了下面链接中的代码，非常有帮助，谢谢： [http ://www.tutorialforandroid.com/2010/10/take-picture-in-android-with.html](http://www.tutorialforandroid.com/2010/10/take-picture-in-android-with.html)

需要帮助解决一些照片问题！takePhoto() 启动 MediaStore.ACTION_IMAGE_CAPTURE，getFile() 创建“Image keeper”目录，然后将拍摄的照片保存在“Image-SOMENUMBER.jpg”名称下！在 onActivityResult() 我想将拍摄的照片显示为 ImageView，我想喜欢将图片重命名为用户在edittext中输入的内容！

有两个问题：

1) 为什么我不能让 ImageView 在 try{} 部分显示我的图片？我究竟做错了什么？如何获取保存图像的路径？

2）有没有一种方法可以让用户按照他们想要的方式命名照片？（比如“另存为”或在某些按钮单击等上重命名。）

欢迎任何想法！谢谢！

这是代码：

```
private static final int TAKE_PHOTO_CODE = 1;  

private void takePhoto(){  
  final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
  intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getFile(this)) );   
  startActivityForResult(intent, TAKE_PHOTO_CODE);  
}  

private File getFile(Context context){  

  final File path = new File( Environment.getExternalStorageDirectory(), "Image keeper" );  
  if(!path.exists()){  
    path.mkdir(); 
  }
  String name;
  int n = 100000;
  int rand;
  rand = new Random().nextInt(n);
  name = "Image-" + rand + ".jpg";
  File file = new File(path,name);

  return file;  
}  

@Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
  if (resultCode == RESULT_OK) {
      switch(requestCode){  
      case TAKE_PHOTO_CODE:  
        final File file = getFile(this);
        try {  
          Bitmap captureBmp;
          captureBmp = Media.getBitmap(getContentResolver(), Uri.fromFile(file) );  

          iv = (ImageView) findViewById(R.id.imageView1);
          iv.setImageBitmap(captureBmp);

        } catch (FileNotFoundException e) {  
          e.printStackTrace();  
        } catch (IOException e) {  
          e.printStackTrace();  
        }  
      break;  
    }  
  }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:28:17.557

无法解决重命名我的问题的一部分，但这段代码对我有用！我敢肯定它可以做得更好，但它有效！它涉及拍照、保存到 SD 卡和获取路径！

```
ImageView iv;
static File image;
Uri ImageUri;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   Button btn = (Button) findViewById(R.id.button1);

   btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        takePhoto();

    }
});
}

private static final int TAKE_PHOTO_CODE = 1;  

private void takePhoto(){
  image = getFile(this);
  final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
  intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(image) );   
  startActivityForResult(intent, TAKE_PHOTO_CODE);  
}  

private File getFile(Context context){  

  final File path = new File( Environment.getExternalStorageDirectory(), "Image keeper" );  
  if(!path.exists()){  
    path.mkdir(); 
  }
  String name;
  int n = 100000;
  int rand;
  rand = new Random().nextInt(n);
  name = "Image-" + rand + ".jpg";
  File fileimage = new File(path, name);

  return fileimage;  
}  

@Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
  if (resultCode == RESULT_OK) {
      switch(requestCode){  
      case TAKE_PHOTO_CODE:  

        try {  
          Bitmap captureBmp;
          captureBmp = Media.getBitmap(getContentResolver(), Uri.fromFile(image) );

          ImageUri = Uri.fromFile(image);
          String pathToImage = ImageUri.getPath();

          iv = (ImageView) findViewById(R.id.imageView1);
          iv.setImageBitmap(captureBmp);

        } catch (FileNotFoundException e) {  
          e.printStackTrace();  
        } catch (IOException e) {  
          e.printStackTrace();  
        } 
        iv.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        iv.setAdjustViewBounds(true);

      break;  
    }  
  }  
} 
```

# java - Java - 无限递归 for 循环

> ID：10423498
> 
> 赞同：0
> 
> 时间：2012-05-03T00:16:17.337
> 
> 标签：java, recursion, for-loop, infinite-loop

我正在尝试计算可以堆叠的序列组合（ArrayList）的数量，但每一行不能包含相邻行中包含的任何元素，直到指定的“HEIGHT”。我有一个列表列表，“rowCombos”（全局），它是每行中元素的所有可能组合。我的代码应该循环遍历“rowCombos”，以查看哪一行 Combo 可以放置在前一行的顶部，遵循上述限制。一旦“面板”达到 HEIGHT 输入参数，它应该增加计数器，然后退出递归方法。我遇到的问题是stackOverflow，我运行了一个调试来查看它挂在哪里。似乎每个线程都通过该方法工作，

```
public static void
buildPanels(ArrayList<ArrayList<Float>> panel, int HEIGHT)
{
    if (panel.size() == HEIGHT)
    {
        mainCount++;
        return;
    }
    else
    {
        for ( List<Float> row:rowCombos)
        {
            boolean duplicateFound = false;
            if (!panel.isEmpty())
            {
                for (Float element:row)
                {
                    if (panel.get(panel.size() - 1).contains(element))
                    {
                        duplicateFound = true;
                    }
                }
            }
            if (panel.isEmpty() || !(duplicateFound))
            {
                panel.add((ArrayList<Float>) row);
                buildPanels(panel, HEIGHT);
            }
        } // end of for
    } // end of else
} // end of buildPanels 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:29:19.823

此代码乞求运行到堆栈溢出。阅读逻辑：

假设面板是空的....

1.  称呼`buildPanel`
2.  设置`duplicateFound`为`false`
3.  如果没有`!(duplicateFound)`，请致电`buildPanel`

    ```
    boolean duplicateFound = false;
    if (!panel.isEmpty())
    {
        for (Float element:row)
        {
            if (panel.get(panel.size() - 1).contains(element))
            {
                duplicateFound = true;
            }
        }
    }
    if (panel.isEmpty() || !(duplicateFound))
    {
        panel.add((ArrayList<Float>) row);
        buildPanels(panel, HEIGHT);
    } 
    ```

# c++ - 静态方法会减少我的开销吗？

> ID：10423501
> 
> 赞同：0
> 
> 时间：2012-05-03T00:16:40.517
> 
> 标签：c++, memory-management, static

每次创建新实例时，类是否必须为其非静态成员函数分配内存？

为了更好地说明这一点，如果我正在编写一个`v3d`表示 3 空间向量的类，我会通过定义来使用更少的内存吗？

`static v3d::dotProduct(v3d v1, v3d v2)`

与

`v3d::dotProduct(v3d v2)`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:23:30.423

每个实例都不会存储静态和非静态成员函数。在非静态成员函数的情况下，我理解的方式是它们被翻译成类似的东西（可能比这更不可读）：

```
v3d_dotProduct(v3d this, v3d v2) 
```

对它们的调用也会相应地进行翻译。如果你想提高性能，我建议使用内联函数，因为这些函数本质上是将函数内容复制到你调用它的地方。我认为这不会减少您的内存使用量，但值得将其用于每秒调用多次的类函数（静态和非静态）。

[http://www.cplusplus.com/forum/articles/20600/](http://www.cplusplus.com/forum/articles/20600/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:22:24.930

内存中有一个函数实例。它与静态与否无关。您不为成员函数分配内存。

或者，也许我误解了。也许您的意思是该函数以某种方式占用了对象中的空间？不，它没有。在目标代码级别，成员资格本质上只是一个名称约定和一个隐藏的“this”参数。如果是虚拟的，则通常有一个 vtable，所有实例都使用相同的 vtable。

但是，在您的示例中，您似乎正在按值传递所有 v3d 对象。这意味着在静态情况下，您制作 2​​ 个对象副本（每个 arg 一个），而在非静态情况下，您只制作 1 个对象副本。

如果您通过引用传递 args，则可以避免复制 - 除非点积算法可能要求，无论那是什么（很久以来我没有做过任何数学）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:26:46.160

在任何一种情况下，函数的代码在代码内存中都只有一个副本。静态函数使用相同数量的代码内存，但使用更少的堆栈内存，因为当它们被调用时，堆栈上传递的参数少了。非静态类成员函数有一个附加参数（this 指针），在调用时会添加到堆栈中。如果你没有在对象中使用任何需要使用“this”指针的东西，你应该将函数声明为静态的。

您将节省的堆栈内存量可能微不足道。但是，如果函数每秒被调用数百万次，则静态函数*可以*看到速度的提高，因为不必在堆栈上传递额外的参数。

# grails - 使用圣杯

> ID：10423504
> 
> 赞同：0
> 
> 时间：2012-05-03T00:17:01.550
> 
> 标签：grails, gsp, grails-2.0, grails-controller

我正在使用 a 来显示配置文件名称列表。

```
<g:select name="ProfileSelector" from='${ProfileList?.profileName}' id='ProfileSelect' noSelection="['null':' SELECT VT']" disabled="true" /> 
```

所以配置文件列表是具有配置文件名称、配置文件ID、配置文件描述的配置文件类型。在提交时，我只能访问在控制器中选择为参数的 profileName。有什么方法可以将相应 profileName 的 profileId 作为参数传递。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:03:59.827

是的，通过使用 optionKey 和 optionValue 参数。查看[http://grails.org/doc/2.0.x/ref/Tags/select.html](http://grails.org/doc/2.0.x/ref/Tags/select.html)了解更多信息。

# php - 从其他计算机上的文件执行 PHP 代码

> ID：10423506
> 
> 赞同：0
> 
> 时间：2012-05-03T00:17:37.570
> 
> 标签：php

是否可以将 PHP 代码包含在另一台计算机上的单独文件中。如果是这样，怎么做？

例如：

在第一台计算机上：

```
#Host 1 Script
$username = "dfgd";
$password = "sdff";

#Code I need help with 
```

然后在第二个：

```
#Host 2 Script

#Code which needs to be run on Host 1 which will manipulate $username and $password 
```

显然，我无法将主机 2 上的脚本存储在 .php 文件中，因为当读取它时，什么都不会打印出来……但这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:20:40.750

只要在服务器中开启了通过 HTTP 读取文件，就可以使用`include*()`或`require*()`读取文件并执行返回的 PHP。只需告诉其他系统不要在他们的 PHP 引擎中解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:41:20.073

也许你想检查一下肥皂是如何工作的： [soapclient](http://php.net/manual/en/class.soapclient.php)、[soapserver](http://www.php.net/manual/en/class.soapserver.php)

# android - 在 Android 应用程序上执行基于 Root 访问的命令

> ID：10423507
> 
> 赞同：1
> 
> 时间：2012-05-03T00:17:42.997
> 
> 标签：android, c, adb

我基本上想`/system/bin/...`从 Application`java`命令启动一个驻留在其中的进程。我尝试了所有类型的`Runtime.process.exec()`选项也尝试了`su`和`ouputStream`组合，但没有任何东西能够启动应用程序。我在设备和模拟器中使用代码，两者都没有运气。我能够从 ADB Shell 成功运行相同的命令（因为它具有 root 权限）。

该设备已root，当我使用adb调试我的设备时，我可以看到#，它也可以通过adb进入su。根据我的搜索，我发现（在从 adb shell 执行 ps 之后）我能够从应用层运行具有 lrwz--x--x 权限的任何命令，例如 (ls->toolbox, ps->toolbox) 但我我无法执行未链接到工具箱的任何其他命令。

这不执行`ls`：

```
Process p = Runtime.getRuntime().exec("su");
DataOutputStream os=new DataOutputStream(p.getOutputStream());
os.writeBytes("ls \n");
os.flush(); 
```

但这确实执行`ls`：

```
Process p = Runtime.getRuntime().exec("ls"); 
```

如果我能在这里得到任何帮助，我将不胜感激！经过大量研究后，我将其发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T21:58:51.357

`ls \n`与其发送到`su`命令的标准输入，不如尝试运行：

```
su -c ls 
```

要求它以提升的权限运行命令而不是启动交互式 shell的`-c`选项。`su(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:57:15.317

尝试创建一个 shell 脚本文件（例如：init.sh）并在其中写入以下命令：

苏

重启

现在尝试通过 Runtime.getRuntime().exec("sh init.sh"); 执行这个 shell 脚本。

如果这重新启动了您的机器人，那么您可以在 init.sh 文件中编写所需的代码并运行它。

# vmware - 使用多线程 PowerCLI 并行克隆多个 VM

> ID：10423515
> 
> 赞同：0
> 
> 时间：2012-05-03T00:19:00.453
> 
> 标签：vmware, powercli

我承担了在 VMware 中克隆大量虚拟机的任务。我不想通过克隆向导单击数百次，而是希望尽可能地自动执行此操作。

我已经配置并“密封”了模板机。克隆并打开电源后，新克隆的实例将启动，在系统准备过程中坐在那里一段时间，等等。这大约需要 20 分钟左右。

[我在 MSFT TechNet 上](http://gallery.technet.microsoft.com/scriptcenter/c74b4a23-e4ec-4829-b38e-54252b40fdec)找到了一个非常好的脚本，它可以完成我需要它做的所有事情。我已经对其进行了一些修改，因此我不必更改值并为流程的每个步骤重新保存脚本。而不是整个脚本中的 $Step 计数器，我只是用一些 Start-Sleep 延迟替换它。此时，它工作正常并成功克隆了它从 CSV 文件中读取的所有机器。每台机器大约需要 35 分钟才能准备就绪（机器移动到不同的 AD OU）。

唯一的问题是它全部串行运行，等待整个过程（克隆、更改 VLAN、启动机器并等待域加入，并将最终机器对象移动到不同的 AD OU）完成，然后再开始另一个克隆。

我真正想要的是多线程以使整个操作更快。我在测试中发现，一旦运行大约五个单独的克隆作业，vSphere 中的克隆就会开始减慢，因此我想修改此脚本以一次运行四个克隆（执行整个工作流程）。

有任何想法吗？如果需要，我可以粘贴代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:49:06.800

您最多可以从一个模板并行克隆 8 个虚拟机。如果您使用 -RunAsync 运行 new-vm。使用 -RunAsync 命令立即返回，输出由一个或多个 Task 对象组成。

如果你想克隆多个虚拟机，下面应该会有所帮助。只是循环它。

```
Write-host "Deploying VM " -ForegroundColor Green -NoNewline; Write-Host $vmname -ForegroundColor Yellow
get-OScustomizationspec $cs | get-OScustomizationNicMapping | set-OSCustomizationNicMapping -IpMode UseStaticIP -IpAddress $vm.IP -SubnetMask $vm.subnet -DefaultGateway $vm.gateway -Dns $vm.Dns1, $vm.Dns2

$vms = New-VM -Name $vm.Name -Location $vm.cluster -VMhost $vm.vmhost -Template $vm.template -Datastore $vm.datastore -OSCustomizationSpec $cs -confirm:$false **-RunAsync**

if ($vm1.error) {
    Write-Host "Error in deploying $vmname" -ForegroundColor Red
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-04T01:29:43.267

以下是我在过去几天编写的一个脚本，它将一个 VM 模板部署到我们大约 650 台服务器上。它从全国不同数据中心的 3 个不同的 VM 主机部署它。它同时从欧文部署 5 个，从普莱诺部署 15 个，同时从亚特兰大部署 15 个。它在周一至周五晚上 7 点至早上 6 点之间运行，周六和周日全天运行。如果它在任何其他时间运行，它就会退出。

当我试图弄清楚在使用 Start-Job 调用该函数时如何将多个参数传递给一个函数时，我没时间了，所以我只是为这三个位置创建了一个单独的函数。

使用此脚本，我们能够在大约一周内的晚上和周末将新的 RDC 映像部署到 650 多个位置。

参数（[参数（ValueFromPipelineByPropertyName=$true）] [字符串]$InputFile = $null）

```
Get-Module -ListAvailable VMware* | Import-Module | Out-Null
Import-Module ActiveDirectory

$Global:CompletedHosts = @()

$MAXVMHostCount = 50
$IrvingMaxJobs = 6
$PlanoMaxJobs = 15
$AtlantaMaxJobs = 15

Function Add-VMHosts() {
    param(
        [Parameter(Mandatory=$true)][int]$MAXVMHostCount,
        [Parameter(Mandatory=$false)][string]$InputFile
    )

    $AllVMHosts = @()

    If ($InputFile) {
        $AllVMHosts = Get-Content $InputFile
    }
    Else {
        $Jobs = (Get-Job).Name
        If ($Jobs -ne $null) {
            $Jobs = $Jobs.Trim("-TXINTATL")
        }

        ForEach ($Server in (Get-ADComputer -Server *************** -SearchBase "OU=************************" -Filter { Name -like "**********" })) {
            If ($Server.Name.Substring(10,1) -eq "0") {
                $IP = "10." + $Server.Name.Substring(11,1) + "."
            }
            Else {
                $IP = "10." + $Server.Name.Substring(10,2) + "."
            }
            If ($Server.Name.Substring(12,2) -eq "00") {
                $IP += "100"
            }
            ElseIf ($Server.Name.Substring(12,1) -eq "0") {
                $IP += $Server.Name.Substring(13,1)
            }
            Else {
                $IP += $Server.Name.Substring(12,2)
            }
            $IP += ".252"

            If ($IP -notin $Global:CompletedHosts -and $IP -notin $Jobs) {
                $AllVMHosts = $AllVMHosts + $IP
            }
        }
    }

    Connect-VIServer ******************** -User "********************" -Password "********************" | Out-Null

    $CurrentVMHostCount = (Get-VMHost -Location (Get-Datacenter "Profit Centers")).Count

    $HostCount = 0
    ForEach ($VMHost in $AllVMHosts) {
        If ($HostCount -ge ($MaxVMHostCount - $CurrentVMHostCount)) {
            Break
        }
        Else {
            $AddFailed = $false
            $ConnectFailed = $false
            $Test = $null

            $Test = Get-VMHost $VMHost -ErrorAction SilentlyContinue
            If (!$Test -and (Test-Connection $VMHost -Quiet)) {
                Try {
                    Connect-VIServer $VMHost -User "********************" -Password "********************" -WarningAction SilentlyContinue | Out-Null
                }
                Catch {
                    $ConnectFailed = $true
                }

                If (!$ConnectFailed -and (Get-VMHost $VMHost -ErrorAction SilentlyContinue | Get-VM -ErrorAction SilentlyContinue | Where { $_.Name -like "*********************" }) -eq $null -and (Test-Connection $VMHost -Quiet)) {
                    Set-VMHost -VMHost $VMHost -LicenseKey "********************" | Out-Null
                    Disconnect-VIServer -Server $VMHost -Confirm:$false | Out-Null

                    Add-VMHost $VMHost -Location (Get-DataCenter -Name "Profit Centers") -User "********************" -Password "********************" -Force:$true -ErrorAction SilentlyContinue | Out-Null
                    Start-Sleep -Seconds 5
                    Write-Host "$VMHost added to vCenter successfully"

                    $myVMHost = Get-VMHost $VMHost
                    $myVMHost | Get-VirtualPortGroup | Get-NicTeamingPolicy | Set-NicTeamingPolicy -InheritLoadBalancingPolicy $true -InheritNetworkFailoverDetectionPolicy $true -InheritNotifySwitches $true -InheritFailback $true -InheritFailoverOrder $true -WarningAction SilentlyContinue | Out-Null
                    $myVMHost | Get-VirtualPortGroup | Get-SecurityPolicy | Set-SecurityPolicy -AllowPromiscuousInherited $true -ForgedTransmitsInherited $true -MacChangesInherited $true | Out-Null

                    ForEach ($PortGroup in (Get-VirtualPortGroup -VMHost $VMHost)) {
                        $netSys = Get-View (Get-VMHost -Name $VMHost).ExtensionData.ConfigManager.NetworkSystem
                        $spec = (Get-VirtualPortGroup -Name $PortGroup.Name -VMHost $VMHost).ExtensionData.Spec
                        $spec.Policy.ShapingPolicy.Enabled = $null
                        $netSys.UpdatePortgroup($PortGroup.Name,$spec)
                    }

                    $DisconnectedNICs = Get-VMHostNetworkAdapter -VMHost $VMHost -Physical | Where-Object { $_.BitRatePerSec -eq "0" }
                    If (($DisconnectedNICs.Count -gt 0)) {
                        If (($DisconnectedNICs.DeviceName).Contains("vmnic0")) {
                            $myVMHost | Get-VirtualSwitch -Name vSwitch0 | Get-NicTeamingPolicy | Set-NicTeamingPolicy -MakeNicActive vmnic1,vmnic0 | Out-Null
                        }
                    }
                    $HostCount++
                }
                ElseIf ($ConnectFailed) {
                    Write-Host "Failed to connect to $VMHost" -ForegroundColor Yellow
                }
                Else {
                    Write-Host "$VMHost already has RDC Image" -ForegroundColor Yellow
                    If ($VMHost.Name -notin $Global:CompletedHosts) {
                        $Global:CompletedHosts = $Global:CompletedHosts + $VMHost.Name
                    }
                }
            }
            Else {
                Write-Host "$VMHost already exists in vCenter" -ForegroundColor Yellow
            }
        }
    }

    Get-AlarmDefinition "Network uplink redundancy lost" -ErrorAction SilentlyContinue | Set-AlarmDefinition -Enabled $false | Out-Null
    Get-AlarmDefinition "Network uplink redundancy lost" -ErrorAction SilentlyContinue | Set-AlarmDefinition -Enabled $true | Out-Null

    Disconnect-VIServer -Server * -Confirm:$false
}

Function CopyVMToHostIrving([string]$VMHost) {

    Connect-VIServer ******************** -User "********************" -Password "********************" | Out-Null

    If ((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -eq $null) {
        $NewVMName = "CED-RDC-PC" + (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-DC-PC*" }).Name.Substring(9,4)

        New-VM -VMHost $VMHost -Name $NewVMName -Datastore (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-DC-PC*" } | Get-Datastore).Name -Template "W2k19Std-Template-TX" -OSCustomizationSpec "Windows Server 2019 Customizations" | Out-Null

        Start-Sleep -Seconds 10
        Start-VM $NewVMName | Out-Null
        Start-Sleep -Seconds 5

        If ((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -eq $null -or (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }).PowerState -eq “PoweredOff”) {
            Exit
        }

        Write-Verbose -Message "Verifying that Customization for VM $NewVMName has started ..." -Verbose
        While($True) {
            $DCvmEvents = Get-VIEvent -Entity $NewVMName
            $DCstartedEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationStartedEvent" }
            If ($DCstartedEvent) {
                Break
            }
            Else {
                Start-Sleep -Seconds 5
            }
        }

        Write-Verbose -Message "Customization of VM $NewVMName has started. Checking for Completed Status......." -Verbose
        While($True) {
            $DCvmEvents = Get-VIEvent -Entity $NewVMName
            $DCSucceededEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationSucceeded" }
            $DCFailureEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationFailed" }
            If ($DCFailureEvent) {
                Write-Warning -Message "Customization of VM $NewVMName failed" -Verbose
                Break
            }
            If ($DCSucceededEvent) {
                Break
            }
            Start-Sleep -Seconds 5
        }

        Write-Verbose -Message "Customization of VM $NewVMName Completed Successfully!" -Verbose

        Start-Sleep -Seconds 30
        Write-Verbose -Message "Waiting for VM $NewVMName to complete post-customization reboot." -Verbose
        Wait-Tools -VM $NewVMName -TimeoutSeconds 500 | Out-Null
        Start-Sleep -Seconds 30

        Shutdown-VMGuest $NewVMName -Confirm:$false | Out-Null
    }

    Disconnect-VIServer -Server * -Confirm:$false
}

Function CopyVMToHostPlano([string]$VMHost) {

    Connect-VIServer ******************** -User "********************" -Password "********************" | Out-Null

    If ((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -eq $null) {
        $NewVMName = "CED-RDC-PC" + (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-DC-PC*" }).Name.Substring(9,4)

        New-VM -VMHost $VMHost -Name $NewVMName -Datastore (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-DC-PC*" } | Get-Datastore).Name -Template "W2k19Std-Template-INT" -OSCustomizationSpec "Windows Server 2019 Customizations" | Out-Null

        Start-Sleep -Seconds 10
        Start-VM $NewVMName | Out-Null
        Start-Sleep -Seconds 5

        If ((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -eq $null -or (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }).PowerState -eq “PoweredOff”) {
            Exit
        }

        Write-Verbose -Message "Verifying that Customization for VM $NewVMName has started ..." -Verbose
        While($True) {
            $DCvmEvents = Get-VIEvent -Entity $NewVMName
            $DCstartedEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationStartedEvent" }
            If ($DCstartedEvent) {
                Break
            }
            Else {
                Start-Sleep -Seconds 5
            }
        }

        Write-Verbose -Message "Customization of VM $NewVMName has started. Checking for Completed Status......." -Verbose
        While($True) {
            $DCvmEvents = Get-VIEvent -Entity $NewVMName
            $DCSucceededEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationSucceeded" }
            $DCFailureEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationFailed" }
            If ($DCFailureEvent) {
                Write-Warning -Message "Customization of VM $NewVMName failed" -Verbose
                Break
            }
            If ($DCSucceededEvent) {
                Break
            }
            Start-Sleep -Seconds 5
        }

        Write-Verbose -Message "Customization of VM $NewVMName Completed Successfully!" -Verbose

        Start-Sleep -Seconds 30
        Write-Verbose -Message "Waiting for VM $NewVMName to complete post-customization reboot." -Verbose
        Wait-Tools -VM $NewVMName -TimeoutSeconds 500 | Out-Null
        Start-Sleep -Seconds 30

        Shutdown-VMGuest $NewVMName -Confirm:$false | Out-Null
    }

    Disconnect-VIServer -Server * -Confirm:$false
}

Function CopyVMToHostAtlanta([string]$VMHost) {

    Connect-VIServer ******************** -User "********************" -Password "********************" | Out-Null

    If ((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -eq $null) {
        $NewVMName = "CED-RDC-PC" + (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-DC-PC*" }).Name.Substring(9,4)

        New-VM -VMHost $VMHost -Name $NewVMName -Datastore (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-DC-PC*" } | Get-Datastore).Name -Template "W2k19Std-Template-ATL" -OSCustomizationSpec "Windows Server 2019 Customizations" | Out-Null

        Start-Sleep -Seconds 10
        Start-VM $NewVMName | Out-Null
        Start-Sleep -Seconds 5

        If ((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -eq $null -or (Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }).PowerState -eq “PoweredOff”) {
            Exit
        }

        Write-Verbose -Message "Verifying that Customization for VM $NewVMName has started ..." -Verbose
        While($True) {
            $DCvmEvents = Get-VIEvent -Entity $NewVMName
            $DCstartedEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationStartedEvent" }
            If ($DCstartedEvent) {
                Break
            }
            Else {
                Start-Sleep -Seconds 5
            }
        }

        Write-Verbose -Message "Customization of VM $NewVMName has started. Checking for Completed Status......." -Verbose
        While($True) {
            $DCvmEvents = Get-VIEvent -Entity $NewVMName
            $DCSucceededEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationSucceeded" }
            $DCFailureEvent = $DCvmEvents | Where { $_.GetType().Name -eq "CustomizationFailed" }
            If ($DCFailureEvent) {
                Write-Warning -Message "Customization of VM $NewVMName failed" -Verbose
                Break
            }
            If ($DCSucceededEvent) {
                Break
            }
            Start-Sleep -Seconds 5
        }

        Write-Verbose -Message "Customization of VM $NewVMName Completed Successfully!" -Verbose

        Start-Sleep -Seconds 30
        Write-Verbose -Message "Waiting for VM $NewVMName to complete post-customization reboot." -Verbose
        Wait-Tools -VM $NewVMName -TimeoutSeconds 500 | Out-Null
        Start-Sleep -Seconds 30

        Shutdown-VMGuest $NewVMName -Confirm:$false | Out-Null
    }

    Disconnect-VIServer -Server * -Confirm:$false
}

$Functions = [scriptblock]::Create(@"
    Function CopyVMToHostIrving { $Function:CopyVMToHostIrving([string]$myVMHost) }
    Function CopyVMToHostPlano { $Function:CopyVMToHostPlano([string]$myVMHost) }
    Function CopyVMToHostAtlanta { $Function:CopyVMToHostAtlanta([string]$myVMHost) }
"@)

$TotalHostNum = (Get-ADComputer -Server ******************** -SearchBase "OU=********************" -Filter { Name -like "*CED-SQL-PC*" }).Count

While ($Global:CompletedHosts.Count -lt $TotalHostNum) {
    Connect-VIServer ******************** -User "********************" -Password "********************" | Out-Null

    Write-Host "Removing completed hosts from vCenter..."
    ForEach ($VMHost in (Get-VMHost -Location (Get-Datacenter "Profit Centers") | Where-Object { $_.Parent -ne "Upgrade Failures" })) {
        If (((Get-VMHost $VMHost | Get-VM | Where { $_.Name -like "CED-RDC-PC*" }) -ne $null -and $VMHost.Name -notin (Get-Job -State Running).Name.Trim("-TXINTATL")) -or (Get-VMHost $VMHost).ConnectionState -ne "Connected") {
            Remove-VMHost $VMHost -Confirm:$false | Out-Null
            If ($VMHost.Name -notin $Global:CompletedHosts) {
                $Global:CompletedHosts = $Global:CompletedHosts + $VMHost.Name
            }
        }
    }

    Write-Host "Adding additional hosts to vCenter..."
    If ($InputFile) {
        Add-VMHosts -MAXVMHostCount $MAXVMHostCount -InputFile $InputFile
    }
    Else {
        Add-VMHosts -MAXVMHostCount $MAXVMHostCount
    }

    $VMHosts = (Get-VMHost -Location (Get-Datacenter "Profit Centers") | Where-Object { $_.Parent -ne "Upgrade Failures" })

    Disconnect-VIServer -Server * -Confirm:$false

    ForEach ($VMHost in $VMHosts) {
        Write-Host "Checking if max job count has been reached..."
        While ((Get-Job -State Running).Count -ge ($IrvingMaxJobs + $PlanoMaxJobs + $AtlantaMaxJobs)) {
            If (((Get-Date).hour -ge 6 -and (Get-Date).hour -lt 18) -and (Get-Date).DayOfWeek -ne "Saturday" -and (Get-Date).DayOfWeek -ne "Sunday") {
                Write-Host "Total count of hosts that new VM was copied to: $Global:CompletedHosts.Count"
                Exit
            }
            Else {
                Start-Sleep -Seconds 60
            }
        }

        Write-Host "Removing completed jobs..."
        ForEach ($Job in (Get-Job -State Completed)) {
            If ($Job.Name.Trim("-TXINTATL") -notin $GlobalCompletedHosts) {
                $Global:CompletedHosts = $Global:CompletedHosts + $Job.Name.Trim("-TXINTATL")
            }
            Remove-Job -Id $Job.Id
        }

        Write-Host "Starting jobs..."
        If ((Get-Job | Where { $_.Name.Trim("-TXINTATL") -eq $VMHost.Name }) -eq $null -and $VMHost.Name -notin $Global:CompletedHosts) {
            If ((Get-Job | Where { $_.Name -like "*-TX" }).Count -lt $IrvingMaxJobs) {
                Write-Host "Starting job for $VMHost using Irving Source" -ForegroundColor Yellow
                Start-Job -InitializationScript $Functions -Script { CopyVMToHostIrving($Args[0]) } -ArgumentList $VMHost.Name -Name ($VMHost.Name + "-TX") | Out-Null
            }
            ElseIf ((Get-Job | Where { $_.Name -like "*-INT" }).Count -lt $PlanoMaxJobs) {
                Write-Host "Starting job for $VMHost using Plano Source" -ForegroundColor Yellow
                Start-Job -InitializationScript $Functions -Script { CopyVMToHostPlano($Args[0]) } -ArgumentList $VMHost.Name -Name ($VMHost.Name + "-INT") | Out-Null
            }
            ElseIf ((Get-Job | Where { $_.Name -like "*-ATL" }).Count -lt $AtlantaMaxJobs) {
                Write-Host "Starting job for $VMHost using Atlanta Source" -ForegroundColor Yellow
                Start-Job -InitializationScript $Functions -Script { CopyVMToHostAtlanta($Args[0]) } -ArgumentList $VMHost.Name -Name ($VMHost.Name + "-ATL") | Out-Null
            }
        }
    }
} 
```

# java - Java检测浮点数是正数还是负数

> ID：10423516
> 
> 赞同：1
> 
> 时间：2012-05-03T00:19:07.493
> 
> 标签：java, android, numbers, floating-point

我正在使用 Android 手势和 onFling 方法。有两个浮点变量通过velocityX 和velocityY。论文可以是 0.0、正数或负数。显然 0.0 很容易检测到，但我如何检测它是正浮点数还是负浮点数。

我找到了一些 int 和 double 的代码，但没有专门与 float 相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T00:20:37.600

你试过`<`吗`>`？这些运算符用于那种事情......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T00:22:04.387

只需与 0.0 比较。像这样：

```
var x = 0.01;
var y = -0.01;
if (x > 0.0) { /* positive */ }
if (y < 0.0) { /* negative */ } 
```

# netty - ExecutionHandler 和 Boss 线程

> ID：10423518
> 
> 赞同：3
> 
> 时间：2012-05-03T00:19:13.327
> 
> 标签：netty

我从一个项目中的“裸”网络开始。

我仍在阅读所有令人惊叹的 javadocs，但有一点我没有得到。

到目前为止，我得到了什么：

有一个 Boss 线程启动引导程序并将服务器绑定到套接字端口，对吗？工作线程（可能很多）处理传入的连接并创建适当的通道和管道，对吗？

但是我们有 ExecutionHandler，它也可以向其他几个线程发送垃圾邮件，对吧？我的观点是，如果我有 10 个工作线程，以及 corepoolsize=16 的 ExecutionHandler，这意味着我的系统上可能会在负载非常重的情况下以 160 个并发线程结束？

抱歉，这个问题感觉很愚蠢，但我只是想从文档中的这部分理解。

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T06:16:37.537

你对老板和工人的理解是对的。

对于 ExecutionHandler 它有点不同。ExecutionHandler 将事件处理交给一个额外的ThreadPool。这有助于确保您不会“阻塞”工作线程。ExecutionHandler 必须在不同的 Channel 之间共享，也必须在 Worker 之间共享。

因此，如果您的 Worker 数量为 10，核心线程池大小为 16，您将拥有 26 个线程 + 老板线程。

希望这可以说清楚。

# ruby-on-rails - Rails 控制器查询

> ID：10423522
> 
> 赞同：0
> 
> 时间：2012-05-03T00:19:54.467
> 
> 标签：ruby-on-rails, controller

我正在尝试根据当前用户的属性在页面上显示用户列表。如果当前用户的实例变量名为 :position 为“High School”，则列出所有具有 :position “College”的用户（反之亦然）。我知道我在控制器中使用 if else 语句执行此操作，但我无法弄清楚查询调用应该是什么。现在我有：

```
if current_user.position= "High School"
  @user = User.all
else
  @user= User.all 
```

作为模板。但是，我需要切换 @user= 语句，但我不知道如何限制它。有什么帮助吗？谢谢！

```
<% @quizzes.each do |quiz| %>
  <tr>
    <td><h6><%= quiz.userName%></h6></td>
    <td><h6><%= quiz.q1 %></h6></td>
    <td><% for q in quiz.q2 %>
      <% if q != nil %>
        <h6><%= q  %></h6>
      <% end %>
    <% end %>
    <td><h6><%= quiz.q3 %></h6></td>
    <td>X</td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:27:10.043

一种可能的解决方案是`scope`在模型类中使用。

在用户模型中定义范围

```
class User < ActiveRecord::Base
  ...

  scope :college,    where(position: 'College')
  scope :highschool, where(position: 'High School')
end 
```

在你的控制器中，

```
if current_user.position == "High School"
  @users = User.college
else
  @users = User.highschool
end 
```

希望会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:29:29.703

导轨 3：

```
if current_user.position == "High School"
   @user = User.where(:position => "College")
else
   @user = User.where(:position => "High School")
end 
```

导轨 2：

```
if current_user.position == "High School"
  @user = User.find_all_by_position("College")
else
  @user = User.find_all_by_position("High School")
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:28:39.470

也许这就是你要找的？

```
if current_user.position == "High School"
   @users = User.where(:position => "College")
else
   @users = User.where(:position => "High School")
end 
```

# sql - 实现 SQL 多对多连接的最佳方法

> ID：10423524
> 
> 赞同：1
> 
> 时间：2012-05-03T00:20:08.583
> 
> 标签：sql, many-to-many

我有三个表，它们的相关列是：

```
tPerson
-> PersonID

tPersonStatusHistory
-> PersonStatusHistoryID
-> PersonID
-> StatusID
-> PersonStatusDate

Status
-> StatusID 
```

我想存储一个人曾经拥有的所有状态的完整历史记录。但我也希望轻松访问当前状态。

查询以获取当前状态：

```
SELECT TOP 1 StatusID FROM tPersonStatusHistory 
WHERE PersonID = ? ORDER BY PersonStatusDate DESC 
```

我想要的是一个查询，它将获取我的个人记录列表，他们最近的 StatusID 作为查询中的一列。

我们尝试了以下方法：

1.  将上述查询作为子查询包含在 select 中。
2.  将 CurrentPersonStatusHistoryID 列添加到 tPerson 表并使用调用用户定义函数的计算列对其进行维护。
3.  使用 tPersonStatusHistory 表上的触发器维护 CurrentPersonStatusHistoryID 列。

拉取 Person 记录的查询使用率很高，所以我不想每次都查找 History 表。触发方法最接近我想要的，因为数据保存在 Person 表中，并且仅在进行更新时才更改（相比之下，这并不经常发生）。

我发现触发器难以维护，我宁愿远离它们。我还发现，在执行插入选择或涉及多条记录的更新查询时，触发器仅在第一条记录上调用，而不在其他记录上调用。

我真正想要的是在 CurrentPersonStatusHistoryID 的列定义中添加一些逻辑，按下 Save 并让它在幕后保持和更新，而无需我的干预。

鉴于多对多关系很常见，我想知道是否有其他人遇到过类似的情况，并对实现这一点的最高性能、最好是最少麻烦的方式有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:50:43.047

另一种方法是使用类似于以下查询的内容，可能作为视图。它将为您提供每个人的最新状态 ID。

```
SELECT PersonID, StatusID
FROM (
    SELECT PersonID, StatusID,
        rank() OVER(PARTITION BY PersonID ORDER BY PersonStatusDate DESC) as rnk
    FROM tPersonStatusHistory
) A
WHERE rnk = 1 
```

我不确定这是否满足您对性能的要求，但您可以研究一下。

# javascript - 如何更改文件夹在浏览器中的显示方式？

> ID：10423530
> 
> 赞同：0
> 
> 时间：2012-05-03T00:21:23.433
> 
> 标签：javascript, file, google-chrome

当您将文件夹拖到 chrome 中时（我确定它在其他浏览器中几乎相同），是否可以更改该文件夹的内容如何使用 css/html/javascript 或其他方式呈现？我已经阅读了一些关于 html5 文件 API 的信息，但我不确定这是否适用于此？

只是觉得如果可以的话会很酷，从未见过任何关于你的主题的文章

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:29:13.253

您可以`file://`使用 Chrome 扩展程序更改目录在浏览器中的呈现方式。通过使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)，您可以将 CSS 和 JavaScript 注入任何页面，包括`file://`页面。将一个简单的`manifest.json`文件放在一个新目录中：

```
{
    "name": "Style My Directories",
    "version": "1.0",
    "content_scripts": [
      {
        "matches": ["file:///*"],
        "css":["my_styles.css"]
      }
    ]
} 
```

还要将名为 的 CSS 文件`my_styles.css`与`manifest.json`.

最后，转到`chrome://extensions`，启用“开发者模式”，然后使用“加载解压的扩展...”按钮导入新的扩展目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:04:33.460

大多数在 HTML5 王者浏览器中运行的网站都使用 Flash 支持拖放文件/文件夹上传（也意味着在撰写邮件时在 Gmail 中拖放文件）

安装像[**FlashBlock** (Chrome)](https://chrome.google.com/webstore/detail/cdngiadmnkhgemkimkhiilgffbjijcie)这样的扩展来检查这个

如果找不到 flash，或者您只是在空白选项卡上拖动文件夹，则取决于浏览器要向您显示的内容

到目前为止，您会在 Chrome 中获得文件和目录列表 :)

# objective-c - How can I retrieve a textfields text and store it as an integer 32 in core data?

> ID：10423546
> 
> 赞同：0
> 
> 时间：2012-05-03T00:22:49.343
> 
> 标签：objective-c, ios, core-data, ios5

I'm trying to get the textfields text, convert it to an int, and store it in a core data integer 32 attribute. I'm getting an error in the process:

```
Implicit conversion of 'int' to 'NSNumber' disallowed  with arc 
```

Here is What I've tried:

```
// trying to convert
int intLength = [self.length.text intValue];

// trying to set the current garden attribute to the converted int
self.currentGarden.length = intLength; 
```

How can I fix this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:25:15.817

NSNumber is an object and is not the same as int. Try creating a NSNumber using the constructor:

```
self.currentGarden.length = [NSNumber numberWithInt:intLength]; 
```

# node.js - Node.js 中的分阶段执行递归循环

> ID：10423549
> 
> 赞同：1
> 
> 时间：2012-05-03T00:23:40.357
> 
> 标签：node.js, loops, recursion, implementation, sync

我是 Node.js 和一般异步编程的新手，我有一个问题。我需要一个递归循环中的连续工作服务器，这些步骤将始终如一地执行，并且每个阶段都应该包括通过 websotskets 异步接收数据（这已经理解），或者在计时器到期时进入下一个阶段。我知道这不是一项微不足道的任务，而是如何实现它，哪些库可以提供帮助？我试图了解[Step.js](https://github.com/creationix/step)和 Node.js 事件，这就是我需要的吗？

如果我同步写了所有这些：

```
//CODE FOR STACKOVERFLOW
var previous_round = 'qwerty';// this is string, selected in previous cycle
var round_users = users;// 'users' is array of soceket.id all connected users and here a put them into new array 'round_users' with sockets for current cycle
io.sockets.emit('users_round', { number: round_users.length }); // send to users information about number of users in new round
for (var i = 0; i < round_users.length; i++) {
      io.sockets.socket(round_users[i]).emit('round', { text: previous_round });//for each socket in 'round_users' emit event to enter chat message
}                                                                               // and send selected in previous round message
var messages = []; // array of users messages
//now we must listen users events and start timer for next stage
  //listen users events
  for (var i = 0; i < round_users.length; i++) {
        io.sockets.socket(round_users[i]).on('message', function (data) {
          messages[messages.length] = data.text;//write text from users to array
          if (messages.length == round_users.length) { /* GO TO NEXT STAGE */ } // it's after previous operation in this function
        });
  } 
  //or set timeout
  setTimeout(/* GO TO NEXT STAGE */,15000);
for (var i = 0; i < round_users.length; i++) {
      io.sockets.socket(round_users[i]).emit('voting', { messages_array: messages });//for each socket in 'round_users' emit event to vote perfect chat message
}                                                                                    // and send messages, which they send to server
//i'm not quite sure about this decision of vote counting :-)
var votes = []; //array with users votes
for (var i = 0; i < messages.length; i++) {
      votes[i] = 0;
}   
//now we must listen users events and start timer
  //listen users events
  for (var i = 0; i < round_users.length; i++) {
        io.sockets.socket(round_users[i]).on('vote', function (data) {
          votes[data.number]++;//increment selected message
          if (votes.length == messages.length) { /* GO TO NEXT STAGE */ } // it's after previous operation in this function
        });
  } 
  //or set timeout
  setTimeout(/* GO TO NEXT STAGE */,10000);
var max_id = 0; //now select max number from 'votes' array
for (var i = 0; i < votes.length; i++) {
      if (votes[i]>votes[max_id]) {max_id = i;} //yet without the same values
}   
var previous_round = messages[max_id]; //set up string value of selected message
//restart cycle 
```

[pastebin 上的这段代码](http://pastebin.com/LstUpUku)带有语法高亮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:25:08.270

最基本意义上的递归只是一个反复调用自身的函数，但在这种情况下，使用 node 您可能希望利用[process.nextTick()](http://nodejs.org/api/process.html#process_process_nexttick_callback)来允许在此递归期间发生其他事件。

这是一个简单的示例，说明您可能可以使用的一种方法：

```
function someFunction(args, callback) {
  // Check requirements
  if (typeof callback !== 'function') return console.log('Callback required');
  if (typeof args === 'undefined') return callback('Arguments required');

  // Set defaults
  var err = false;
  var result = false;

  // Do other stuff
  anotherFunctionWithAcallback(args, function(err, result) {
    if (err) return callback(err);
    // This way, the nextTick only occurs after processing completes
    return callback(err, result); 
  }
}

(function loop(stage) {
  // When the stage argument is not provided, default to stage 1
  stage = (typeof stage === 'undefined') ? 1 : stage;
  switch(stage) {
    case 1:
      /* stage 1 */
      someFunction(args, function(err, result){
        process.nextTick(loop(2));
      });
    break;
    case 2:
      /* stage 2 */
      someFunction(args, function(err, result){
        process.nextTick(loop(3));
      });
    break;
    case 3:
      /* stage 3 */
      someFunction(args, function(err, result){
        // No stage argument, restart at stage 1 by default
        process.nextTick(loop());
      });
    break;
  }
})(); // Execute this function immediately 
```

# javascript - 用于比较数组的javascript函数

> ID：10423550
> 
> 赞同：1
> 
> 时间：2012-05-03T00:23:51.280
> 
> 标签：javascript, jquery, arrays, comparison

> **可能重复：**
> [使用 jQuery 比较两个数组](https://stackoverflow.com/questions/1773069/using-jquery-to-compare-two-arrays)

我需要一个 Javascript 或 jQuery 函数来确定一个数组是否包含另一个数组的**所有**值。第二个数组可以有比第一个更多的值。

这应该返回`true`or `false`。例如。

```
comparing  array1 = [1,2,3]  and  array2 = [1,2]      should return false

comparing  array1 = [1,2,3]  and  array2 = [1,1,2]    should return false

comparing  array1 = [1,2,3]  and  array2 = [3,2,1]    should return true

comparing  array1 = [1,2,3]  and  array2 = [1,2,1,3]  should return true 
```

性能不是问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:30:24.097

检查第一个数组中的每个元素并查看它是否存在于第二个数组中。

注意。这是纯 javascript，可能是 jQuery 中更简单的方法。

```
var notFound = false;

for(var i = 0, len = firstArray.length; i < len; i++){
    if(secondArray.indexOf(firstArray[i]) === -1)
    {
         notFound = true;
         break;
    }
}

if(notFound)
{
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:33:00.833

**更新：**阅读问题太快了，只有在相同的顺序下才有效

```
function same_elements(array1, array2){  
  var result = true; 
  $(array1).each(function(index, value) {
    if (value != array2[index]) {result = false};
  });
  return result;
} 
```

# r - 从不规则时间序列创建规则的 15 分钟时间序列

> ID：10423551
> 
> 赞同：8
> 
> 时间：2012-05-03T00:23:57.070
> 
> 标签：r, time-series, xts, zoo

我在 csv 文件中有一个不规则的时间序列（带有 DateTime 和 RainfallValue）`C:\SampleData.csv`：

```
 DateTime,RainInches
1/6/2000 11:59,0
1/6/2000 23:59,0.01
1/7/2000 11:59,0
1/13/2000 23:59,0
1/14/2000 0:00,0
1/14/2000 23:59,0
4/14/2000 3:07,0.01
4/14/2000 3:12,0.03
4/14/2000 3:19,0.01
12/31/2001 22:44,0
12/31/2001 22:59,0.07
12/31/2001 23:14,0
12/31/2001 23:29,0
12/31/2001 23:44,0.01
12/31/2001 23:59,0.01 
```

**注意：**不规则的时间步长可以是 1 分钟、15 分钟、1 小时等。此外，在所需的 15 分钟间隔内可能会有多个观察。

我正在尝试创建一个从 2000-01-01 到 2001-12-31 的常规 15 分钟时间序列，应该如下所示：

```
 2000-01-01 00:15:00 0.00
2000-01-01 00:30:00 0.00
2000-01-01 00:45:00 0.00
...
2001-12-31 23:30:00 0.01
2001-12-31 23:45:00 0.01 
```

**注意：**时间序列以 15 分钟为间隔，将缺失的数据填充为 0。如果 15 分钟的间隔中有多个数据点，则将它们相加。

这是我的代码：

```
 library(zoo)
library(xts)

filename = "C:\\SampleData.csv"
ReadData <- read.zoo(filename, format = "%m/%d/%Y %H:%M", sep=",", tz="UTC", header=TRUE) # read .csv as a ZOO object
RawData <- aggregate(ReadData, index(ReadData), sum) # Merge duplicate time stamps and SUM the corresponding data (CAUTION)
RawDataSeries <- as.xts(RawData,order.by =index(RawData)) #convert to an XTS object

RegularTimes <- seq(as.POSIXct("2000-01-01 00:00:00", tz = "UTC"), as.POSIXct("2001-12-31 23:45:00", tz = "UTC"), by = 60*15)
BlankTimeSeries <- xts((rep(0,length(RegularTimes))),order.by = RegularTimes)

MergedTimeSeries <- merge(RawDataSeries,BlankTimeSeries)
TS_sum15min <- period.apply(MergedTimeSeries,endpoints(MergedTimeSeries, "minutes", 15), sum, na.rm = TRUE )

TS_align15min <- align.time( TS_sum15min [endpoints(TS_sum15min , "minutes", 15)], n=60*15) 
```

**问题：**输出时间序列`TS_align15min`：（a）具有重复的时间戳块（b）从 1999 年开始（神秘地），如：

```
`1999-12-31 19:15:00    0
1999-12-31 19:30:00    0
1999-12-31 19:45:00    0
1999-12-31 20:00:00    0
1999-12-31 20:15:00    0
1999-12-31 20:30:00    0` 
```

`我究竟做错了什么？`

 `感谢您的任何指导！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T00:33:02.307

xts 扩展了 zoo，zoo 在其小插曲和文档中有大量示例。
这是一个工作示例。我想我过去做得更优雅，但这就是我现在想出的全部：

```
R> twohours <- ISOdatetime(2012,05,02,9,0,0) + seq(0:7)*15*60
R> twohours
[1] "2012-05-02 09:15:00 GMT" "2012-05-02 09:30:00 GMT" 
[3] "2012-05-02 09:45:00 GMT" "2012-05-02 10:00:00 GMT" 
[5] "2012-05-02 10:15:00 GMT" "2012-05-02 10:30:00 GMT" 
[7] "2012-05-02 10:45:00 GMT" "2012-05-02 11:00:00 GMT"
R> set.seed(42)
R> observation <- xts(1:10, order.by=twohours[1]+cumsum(runif(10)*60*10))
R> observation
                           [,1]
2012-05-02 09:24:08.883625    1
2012-05-02 09:33:31.128874    2
2012-05-02 09:36:22.812594    3
2012-05-02 09:44:41.081170    4
2012-05-02 09:51:06.128481    5
2012-05-02 09:56:17.586051    6
2012-05-02 10:03:39.539040    7
2012-05-02 10:05:00.338998    8
2012-05-02 10:11:34.534372    9
2012-05-02 10:18:37.573243   10 
```

一个两小时的时间网格，一些随机观察使一些单元格空着，一些被填充。

```
R> to.minutes15(observation)[,4]
                           observation.Close
2012-05-02 09:24:08.883625                 1
2012-05-02 09:44:41.081170                 4
2012-05-02 09:56:17.586051                 6
2012-05-02 10:11:34.534372                 9
2012-05-02 10:18:37.573243                10 
```

这是一个 15 分钟的网格聚合，但不在我们的时间网格上。

```
R> twoh <- xts(rep(NA,8), order.by=twohours)
R> twoh
                    [,1]
2012-05-02 09:15:00   NA
2012-05-02 09:30:00   NA
2012-05-02 09:45:00   NA
2012-05-02 10:00:00   NA
2012-05-02 10:15:00   NA
2012-05-02 10:30:00   NA
2012-05-02 10:45:00   NA
2012-05-02 11:00:00   NA

R> merge(twoh, observation)
                           twoh observation
2012-05-02 09:15:00.000000   NA          NA
2012-05-02 09:24:08.883625   NA           1
2012-05-02 09:30:00.000000   NA          NA
2012-05-02 09:33:31.128874   NA           2
2012-05-02 09:36:22.812594   NA           3
2012-05-02 09:44:41.081170   NA           4
2012-05-02 09:45:00.000000   NA          NA
2012-05-02 09:51:06.128481   NA           5
2012-05-02 09:56:17.586051   NA           6
2012-05-02 10:00:00.000000   NA          NA
2012-05-02 10:03:39.539040   NA           7
2012-05-02 10:05:00.338998   NA           8
2012-05-02 10:11:34.534372   NA           9
2012-05-02 10:15:00.000000   NA          NA
2012-05-02 10:18:37.573243   NA          10
2012-05-02 10:30:00.000000   NA          NA
2012-05-02 10:45:00.000000   NA          NA
2012-05-02 11:00:00.000000   NA          NA 
```

新的 xts 对象和合并的对象。现在使用`na.locf()`向前推进观察：

```
R> na.locf(merge(twoh, observation)[,2])
                           observation
2012-05-02 09:15:00.000000          NA
2012-05-02 09:24:08.883625           1
2012-05-02 09:30:00.000000           1
2012-05-02 09:33:31.128874           2
2012-05-02 09:36:22.812594           3
2012-05-02 09:44:41.081170           4
2012-05-02 09:45:00.000000           4
2012-05-02 09:51:06.128481           5
2012-05-02 09:56:17.586051           6
2012-05-02 10:00:00.000000           6
2012-05-02 10:03:39.539040           7
2012-05-02 10:05:00.338998           8
2012-05-02 10:11:34.534372           9
2012-05-02 10:15:00.000000           9
2012-05-02 10:18:37.573243          10
2012-05-02 10:30:00.000000          10
2012-05-02 10:45:00.000000          10
2012-05-02 11:00:00.000000          10 
```

然后我们可以再次合并为时间网格 xts 上的内部连接`twoh`：

```
R> merge(twoh, na.locf(merge(twoh, observation)[,2]), join="inner")[,2]
                    observation
2012-05-02 09:15:00          NA
2012-05-02 09:30:00           1
2012-05-02 09:45:00           4
2012-05-02 10:00:00           6
2012-05-02 10:15:00           9
2012-05-02 10:30:00          10
2012-05-02 10:45:00          10
2012-05-02 11:00:00          10
R> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-10T11:39:47.347

这是一个 data.table 解决方案，这可以使用滚动连接巧妙地完成：

```
library(data.table)
library(xts)

lu <- data.table(index=as.POSIXct("2012-05-02") + (0:7)*15*60)

observation <- xts(1:10,
                   order.by=lu[1,index +cumsum(runif(10)*60*10)])

observation.dt <- as.data.table(observation)
observation.dt[lu,on="index",roll=T] 
````

# knockout.js - 如何将某些东西绑定到 knockout.js 中的函数

> ID：10423556
> 
> 赞同：0
> 
> 时间：2012-05-03T00:24:24.337
> 
> 标签：knockout.js, upshot

我正在使用 knockout.js 和 upshot.js 从服务器上的 API 控制器获取项目列表。这基本上是我的视图模型：

```
self.templatesDataSource = upshot.dataSources.Templates.refresh();
self.templates = self.templatesDataSource.getEntities(); 
```

绑定到属性工作得很好：

```
<div data-bind="foreach: templates">
    <a href="#" data-bind="text: Title"></a><br />
</div> 
```

但是假设我希望文本不仅显示标题，还显示标题和其他值的组合？假设我想要`Title + ' ' + Id`. 基于[此处](http://knockoutjs.com/documentation/options-binding.html)的“示例 4” ，我认为我应该能够执行以下操作：

```
<div data-bind="foreach: templates">
    <a href="#" data-bind="text: function(item){return item.Title + ' ' + item.Id; }"></a><br />
</div> 
```

但是，我看到的是函数文本（`function(item){...`等）而不是结果。我还需要此功能来为链接构建正确的 href。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:24:51.577

你可以直接写你的陈述，比如：

```
data-bind="text: Title + " " + Id" 
```

如果您的属性是可观察的，那么您会这样做：

```
data-bind="text: Title() + " " + Id()" 
```

为了对你有约束力，`href`你会这样做：

```
data-bind="attr: { href: Url }" 
```

计算值时的另一个选项是使用[计算的 observable](http://knockoutjs.com/documentation/computedObservables.html)来表示该值。

# java - 尝试将 BufferedImage 转换为 int 数组时出错

> ID：10423562
> 
> 赞同：0
> 
> 时间：2012-05-03T00:25:39.110
> 
> 标签：java, arrays, bufferedimage

我正在尝试将 my`BufferedImage`转换为整数数组，但出现以下错误：“`java.awt.image.DataBufferByte`无法转换为`java.awt.image.DataBufferInt`”

这是我的一段代码：

```
public class Test {
  public static void main (String []  args) { 
    BufferedImage img = null;
    try {
      img = ImageIO.read(new File("G.bmp"));
    } catch (IOException e) { }

    int[] imgarray = ((DataBufferInt)img.getRaster().getDataBuffer()).getData();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:29:38.590

试试这个：

```
byte[] imgarray = ((DataBufferByte)img.getRaster().getDataBuffer()).getData(); 
```

# ms-media-foundation - 使用 MediaFoundation 指定完整拓扑

> ID：10423563
> 
> 赞同：1
> 
> 时间：2012-05-03T00:25:44.943
> 
> 标签：ms-media-foundation

我为仅包含一个流（无音频）的视频文件创建了拓扑。

它包含三个按顺序连接的节点：

*   源流节点
*   一个`Mpeg4Part2VideoDecoder`as 变换节点
*   EVR的[激活](http://msdn.microsoft.com/en-us/library/windows/desktop/ms703039%28v=vs.85%29.aspx)对象作为输出节点

调用[SetTopology()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms704785%28v=vs.85%29.aspx)，允许部分拓扑导致工作回放。但是，我正在尝试自己解决完整的拓扑。

因此，[我首先需要将我的输出节点绑定到一个媒体接收器](http://msdn.microsoft.com/en-us/library/windows/desktop/bb250383%28v=vs.85%29.aspx)。我遵循手册中指定的指导方针，所有必需的调用似乎都成功了。设置完整拓扑时，我收到[`MESessionTopologySet`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms695270%28v=vs.85%29.aspx)事件。

不幸的是，播放不起作用，但我没有收到任何错误。

*   **创建完整拓扑时是否还需要其他任何东西？**
*   我记得在 msdn 文档的某处读到，设置部分拓扑时使用的拓扑加载器也设置了媒体类型。这是必需的吗？如果需要，我在哪里可以找到更多相关信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:44:51.723

Matt Andrews[在 msdn 论坛上为我回答了这个问题](http://social.msdn.microsoft.com/Forums/en-US/mediafoundationdevelopment/thread/20615e4e-adb7-4169-821c-4c1e00eff0b1)。

> 如果您绕过拓扑加载器，您肯定需要协商自己的媒体类型。这意味着从 IMFMediaTypeHandler 获取源的媒体类型，将其设置在下游转换中，然后为链下的每个节点查询可用的输入和输出类型以找到兼容的媒体类型。除非您特别需要避免使用 topoloader，否则使用它要容易得多。

# orchardcms - 从多个 IRepository 获取结果

> ID：10423564
> 
> 赞同：2
> 
> 时间：2012-05-03T00:26:04.243
> 
> 标签：orchardcms

我有一个用户和订单列表。

```
public class UserRecord
{
    public virtual int UserId { get; set; }
    public virtual string Name { get; set; }
}

public class OrderRecord
{
    public virtual int UserId { get; set; }
    public virtual int OrderId { get; set; }
} 
```

我有两个存储库 - IRepository 和 IRepository。我怎样才能像这样加入两者并获取结果？

SELECT UserRecord.UserId, Name, OrderId FROM UserRecord, OrderRecord WHERE UserRecord.UserId = OrderRecord.UserId

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:07:39.767

请改用 ContentManager 上的 HQL API。存储库用于对单个表进行简单的 CRUD 操作。

# twitter - 用于查找最常见转发者的 Twitter API

> ID：10423566
> 
> 赞同：1
> 
> 时间：2012-05-03T00:26:20.107
> 
> 标签：twitter

是否可以使用 Twitter API 搜索用户“A”的推文并找到转发“用户 A”推文最多的帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:09:11.660

是的，`statuses/retweets_of_me`如果您拥有用户“A”的令牌和秘密（他正在使用您的应用程序），您可以这样做。

或者，您可以使用`statuses/mentions`查找所有包含`RT @A ....` “A”转发的推文并手动计算它们。

# android - Android - 如何跟踪我的应用何时在下载的设备上崩溃？

> ID：10423574
> 
> 赞同：1
> 
> 时间：2012-05-03T00:26:56.910
> 
> 标签：android

今天有人给我发邮件说我的应用在他们的设备上崩溃了。我无法在我的设备上重现它。当我的应用在另一台设备上出现问题时，有什么方法可以获取错误报告？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:36:18.343

[http://code.google.com/p/acra/](http://code.google.com/p/acra/)

是一种可能的方式。要开始，您必须将库添加到您的项目中，并在您的 google 文档帐户上创建一个表单。设置完成后，每当应用程序崩溃时，都会在电子表格中添加一个新行。它可以为您提供有关应用程序崩溃的环境和情况的大量信息。

# java - 给定一组 n 个整数，返回总和为 0 的 k 个元素的所有子集

> ID：10423575
> 
> 赞同：5
> 
> 时间：2012-05-03T00:26:59.450
> 
> 标签：java, time-complexity, subset-sum

给定一组未排序的`n`整数，返回所有大小为 k 的子集（即每个集合有 k 个唯一元素），总和为 0。

所以我给了面试官以下解决方案（我在[GeekViewpoint](http://geekviewpoint.com/Numbers_functions_in_java/)上研究过的）。没有使用额外的空间，一切都完成了，等等。但当然，成本是解决方案中 O(n^k) 的高时间复杂度`k=tuple`。

```
public void zeroSumTripplets(int[] A, int tuple, int sum) {
  int[] index = new int[tuple];
  for (int i = 0; i < tuple; i++)
    index[i] = i;
  int total = combinationSize(A.length, tuple);
  for (int i = 0; i < total; i++) {
    if (0 != i)
      nextCombination(index, A.length, tuple);
    printMatch(A, Arrays.copyOf(index, tuple), sum);
  }// for
}// zeroSumTripplets(int[], int, int)

private void printMatch(int[] A, int[] ndx, int sum) {
  int calc = 0;
  for (int i = 0; i < ndx.length; i++)
    calc += A[ndx[i]];
  if (calc == sum) {
    Integer[] t = new Integer[ndx.length];
    for (int i = 0; i < ndx.length; i++)
      t[i] = A[ndx[i]];
    System.out.println(Arrays.toString(t));
  }// if
}// printMatch(int[], int[], int) 
```

但随后她提出了以下要求：

*   必须在答案中使用 hashmap 以降低时间复杂度
*   必须绝对——绝对——为一般情况提供时间复杂度
*   当 k=6, O(n^3) 时提示

她对时间复杂性比其他任何事情都更感兴趣。

有谁知道可以满足新约束的解决方案？

* * *

编辑：

假设，在正确的解决方案中，映射将存储输入的元素，然后映射用作查找表，就像`k=2`.

当子集的大小为 2（即`k=2`）时，答案很简单：循环并将所有元素加载到地图中。然后再次循环输入，这次在地图上搜索`sum - input[i] where i is the index from 0 to n-1`，这就是答案。据说这个微不足道的案例可以扩展到 where `k`is anything。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T04:50:24.340

由于没有其他人尝试过，我不妨至少提供一个部分解决方案。正如我在之前的评论中指出的那样，这个问题是[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的一个变体，我在开发这个解决方案时严重依赖于该问题的文档化方法。

我们正在尝试编写一个函数`subsetsWithSum(A, k, s)`来计算 A 的所有 k 长度子集，总和为 s。这个问题以两种方式适用于递归解决方案：

1.  subsetsWithSum(x [1] ... x [n] , k, s) 的解可以通过计算 subsetsWithSum(x [2] ... x [n] , k, s) 并添加包括 x [1]的所有有效子集（如果有）来找到; 和
2.  可以通过计算 subsetsWithSum(A - x [i] , k-1, sx [i] ) 并将 x [i]添加到结果的每个子集（如果有）来找到包含元素 x [i的所有有效子集。]

递归的基本情况发生在 k 为 1 时，在这种情况下，subsetsWithSum(A, 1, s) 的解是该元素等于 s 的所有单元素子集的集合。

所以第一次尝试解决方案是

```
/**
 * Return all k-length subsets of A starting at offset o that sum to s.
 * @param A - an unordered list of integers.
 * @param k - the length of the subsets to find.
 * @param s - the sum of the subsets to find.
 * @param o - the offset in A at which to search.
 * @return A list of k-length subsets of A that sum to s.
 */
public static List<List<Integer>> subsetsWithSum(
        List<Integer> A,
        int k,
        int s,
        int o)
{
    List<List<Integer>> results = new LinkedList<List<Integer>>();

    if (k == 1)
    {
        if (A.get(o) == s)
            results.add(Arrays.asList(o));
    }
    else
    {
        for (List<Integer> sub : subsetsWithSum(A, k-1, s-A.get(o), o+1))
        {
            List<Integer> newSub = new LinkedList<Integer>(sub);
            newSub.add(0, o);
            results.add(0, newSub);
        }
    }

    if (o < A.size() - k)
        results.addAll(subsetsWithSum(A, k, s, o+1));

    return results;
} 
```

现在，请注意，此解决方案通常会使用与之前调用过的相同参数集调用 subsetsWithSum(...)。[因此， subsetsWithSum](http://en.wikipedia.org/wiki/Memoization)只是乞求被记忆。

为了记住这个函数，我将参数 k、s 和 o 放入一个三元素列表中，这将是从这些参数映射到之前计算的结果（如果有的话）的关键：

```
public static List<List<Integer>> subsetsWithSum(
        List<Integer> A,
        List<Integer> args,
        Map<List<Integer>, List<List<Integer>>> cache)
{
    if (cache.containsKey(args))
        return cache.get(args);

    int k = args.get(0), s = args.get(1), o = args.get(2);
    List<List<Integer>> results = new LinkedList<List<Integer>>();

    if (k == 1)
    {
        if (A.get(o) == s)
            results.add(Arrays.asList(o));
    }
    else
    {
        List<Integer> newArgs = Arrays.asList(k-1, s-A.get(o), o+1);

        for (List<Integer> sub : subsetsWithSum(A, newArgs, cache))
        {
            List<Integer> newSub = new LinkedList<Integer>(sub);
            newSub.add(0, o);
            results.add(0, newSub);
        }
    }

    if (o < A.size() - k)
        results.addAll(subsetsWithSum(A, Arrays.asList(k, s, o+1), cache));

    cache.put(args, results);
    return results;
} 
```

要使用 subsetsWithSum 函数来计算总和为零的所有 k 长度子集，可以使用以下函数：

```
public static List<List<Integer>> subsetsWithZeroSum(List<Integer> A, int k)
{
    Map<List<Integer>, List<List<Integer>>> cache =
            new HashMap<List<Integer>, List<List<Integer>>> ();
    return subsetsWithSum(A, Arrays.asList(k, 0, 0), cache);
} 
```

遗憾的是，我的复杂度计算技能有点（阅读：非常）生疏，所以希望其他人可以帮助我们计算这个解决方案的时间复杂度，但这应该是对蛮力方法的改进。

**编辑：**为了清楚起见，请注意，上面的第一个解决方案在时间复杂度上应该等同于蛮力方法。在许多情况下，记忆函数应该会有所帮助，但在最坏的情况下，缓存永远不会包含有用的结果，并且时间复杂度将与第一个解决方案相同。另请注意，子集和问题是[NP 完全的](http://en.wikipedia.org/wiki/Subset_sum_problem)，这意味着任何解决方案都具有指数时间复杂度。**结束编辑。**

为了完整起见，我对此进行了测试：

```
public static void main(String[] args) {
    List<Integer> data = Arrays.asList(9, 1, -3, -7, 5, -11);

    for (List<Integer> sub : subsetsWithZeroSum(data, 4))
    {
        for (int i : sub)
        {
            System.out.print(data.get(i));
            System.out.print(" ");
        }

        System.out.println();
    }
} 
```

它打印：

```
9 -3 5 -11
9 1 -3 -7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T22:48:35.467

我认为您的答案非常接近他们正在寻找的内容，但是您可以通过注意到 size 的任何子集都`k`可以被认为是 size 的两个子集来提高复杂性`k/2`。因此，不要查找所有 size 的子集`k`（`O(n^k)`假设`k`它很小），而是使用您的代码查找 size 的所有子集`k/2`，并将每个子集放入哈希表中，并以其总和作为键。

然后用正和遍历每个大小子集`k/2`（称为 sum `S`）并检查哈希表中总和为 的子集`-S`。如果有一个，那么这两个大小子集的组合就是一个总和为零`k/2`的大小子集。`k`

所以在`k=6`他们给出的情况下，你会找到所有大小的子集`3`并计算它们的总和（这需要`O(n^3)`时间）。然后检查哈希表将花费`O(1)`每个子集的时间，因此总时间为`O(n^3)`. 一般来说，这种方法会`O(n^(k/2))`假设`k`很小，并且您可以`k`通过采用大小`floor(k/2)`和的子集将其推广到奇数值`floor(k/2)+1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T04:57:49.620

@kasavbere -

最近，一位朋友在谷歌接受了一个 C++ 编程工作的令人痛苦的全天面试。他的经历与你相似。

它启发了他写这篇文章 - 我想你可能会喜欢它：

[务实的防御](http://pragprog.com/magazines/2012-04/the-pragmatic-defense)

# c# - 对数学公式的实现感到困惑

> ID：10423578
> 
> 赞同：0
> 
> 时间：2012-05-03T00:27:40.217
> 
> 标签：c#, formula

你能帮我用C#实现数学公式吗？这里是：

R(t)=∑((x[i]-M)*(x[i+t]-M))

∑ 从 i=0 到 Nt

M = const, t =[0,...,n], x 是带有随机数据的向量。

我的实现不正确，我不知道错误在哪里（我知道，我希望你为我做这件事，但我没有其他人可以寻求帮助（你的帮助将不胜感激！ 谢谢！

有我的代码：

```
 for (int i = 0; i < tvect.Lenght; i++)
        {
            sum[i] = 0;
            t = tvect[i];
            for (int j = 0; j < (N - t); j++)
            {
                sum[i] = sum[i] + (data[j] - M) * (data[j + t] - M);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:32:39.337

```
float[] R(int[] t)
{ 
  float[] sum = new float[t.length];
  for (j=0;j<t.length;j++)
  {
    sum[j] = 0;
    for (int i=0; i<N-t[j]; i++)
    {
       sum[j] += (x[i]-M)*(x[i+t[j]]-M);
    }
  }
  return sum;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:34:49.763

```
float sum = 0.0;
for(int j = 0; j < t.Length; j++) {
    for(int i = 0; i < N - t[j]; i++) {
        sum += (x[i]-M)*(x[i+t[j]]-M);
    }
} 
```

# c++ - 如何从长 N 位中切出一个 int 并计算它（并获得可读的 int）？

> ID：10423581
> 
> 赞同：0
> 
> 时间：2012-05-03T00:28:13.993
> 
> 标签：c++, int, bit-manipulation, long-integer

如何从长 N 位中切出一个 int 并计算它（并获得可读的 int）？我试试

```
 int count = sizeof(long) - sizeof(int);
    int int_val =(long_val>> (sizeof(long) - count)); 
```

但是得到一些可怕的 cout ......我该怎么办 - 如何从长 N 位中切割以获得一个 int 并 cout 它（并获得可读的 int）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:57:27.817

尝试以下（未优化）：

```
#include <limits>
#include <iostream>

using namespace std;

int lowerBits(long in) {
    // use unsigned so that sign bit is not propagated
    // when compiler casts it to a long
    return in & (unsigned) -1;
}

int upperBits(long in) {
    return lowerBits(in >> numeric_limits<unsigned int>::digits);
}

int main(int, char **) {
    cout << hex << lowerBits(0x4321432112341234) << endl;
    cout << hex << upperBits(0x4321432112341234) << endl;
} 
```

使用 gcc 在 64 位机器上输出：

```
12341234
43214321 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:54:06.217

原代码有两个问题：

1.  `sizeof`运算符使用字节*单位*，但`>>`运算符使用*位*单位。

2.  你正在移动`sizeof(long) - sizeof(long) + sizeof(int)`，这可能只是偶然的。

如果您想以可移植的方式获取低位字节，您可以使用：

```
unsigned int_val = (unsigned) (long_val & UINT_MAX); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:48:58.287

要获得较低的 N 位，请尝试`(long_val & ((1<<(N-1)) - 1))`

# c# - keydown 与按钮向下对应

> ID：10423584
> 
> 赞同：0
> 
> 时间：2012-05-03T00:28:44.787
> 
> 标签：c#, keydown

您好，我正在尝试将按钮按下的视觉效果（在 WinForm 上，按钮边框变暗一点，表明它已被按下）与 keydown 事件相匹配。首先，我只需要检测数字的按键。然后当按键按下时，表单上相应的数字按钮应该看起来也被按下了。抱歉，如果已经使用不同的行话回答了这个问题。我已经知道如何使用 keydown 执行按钮单击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:39:01.323

在 KeyDown 事件上编写测试代码。写下你从 0 到 9 看到的键盘代码。然后在 KeyDown 的 if 语句中使用这些键盘代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:42:45.107

您可以使用 a`Checkbox`并将外观设置为`Button`。然后你可以做这样的事情：

```
 private void OnKeyDown(object sender, KeyEventArgs e)
    {
        //if key
        checkBox1.Checked = true;
    }

    private void OnKeyUp(object sender, KeyEventArgs e)
    {
        //if key
        checkBox1.Checked = false;
    } 
```

至于键，你可以只使用[KeyEventArgs.KeyCode](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)

```
e.KeyCode == Keys.D0 || .. || e.KeyCode == Keys.D9 
```

# web-services - 是否有任何网络服务可以返回所有路由号码及其在美国的相应银行

> ID：10423585
> 
> 赞同：1
> 
> 时间：2012-05-03T00:28:52.277
> 
> 标签：web-services, banking

我需要获取一个 API，通过它我可以获取所有路由号码及其在美国的相应银行名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-20T12:51:46.830

不确定开放 API，但此列表由许多 ACH 提供商维护，您应该能够访问它。

该文件通常称为 FED ACH 目录，其中列出了美国每家银行分行的银行名称、路由号码、地址。

我有一个 2 年前的副本，你可以[从这里下载](https://www.dropbox.com/s/bymbmovwkyj05m0/FedACHdir.txt?dl=0)（它是一个文本文件）

# ruby-on-rails - CarrierWave 和嵌套表单 Gem 重新显示

> ID：10423586
> 
> 赞同：0
> 
> 时间：2012-05-03T00:29:18.903
> 
> 标签：ruby-on-rails, nested-forms, carrierwave

我安装了 CarrierWave (0.6.1) 和 Nested Form gem。我有一个带有许多附件的资源模型，这些附件有一个 FileUploader。

我有一个嵌套表单，用户可以使用一个资源上传多个文件。我正在关注 github (https://github.com/jnicklas/carrierwave) 上的部分，该部分说如何使上传工作跨重新显示不幸的是它仅适用于 1:1 的比例。

这是我的代码：

```
<%= nested_form_for @resource, :html=>{:multipart => true } do |f| %>
    <p>
        <%= f.label :title %>
        <%= f.text_field :title %>
    </p>
    <%= f.fields_for :attachments, @attachment do |attachment_form|  %>
      <p>
          <%= attachment_form.label :file %>
          <%= attachment_form.file_field :file %>
          <%= attachment_form.hidden_field :file_cache %>
          <%= image_tag(attachment_form.file_url) if attachment_form.file? # DOESN'T WORK!!! %>
      </p>
      <%= attachment_form.link_to_remove "Remove this attachment" %>
    <% end %>
    <%= f.link_to_add "Add attachment", :attachments %>
    <p><%= f.submit %></p>
<% end %> 
```

一切正常，它为 attachment_form 填充了 file_cache 变量，但是我需要在其中添加以下行以向用户显示文档的图像：

```
<%= image_tag(attachment_form.file_url) if attachment_form.file? %> 
```

然而，这有很多问题。首先 attachment_form 是引用 form_builder 而我想要实际的附件。其次，附件对文件一无所知。

可能需要使用另一种类型的循环机制，但我是 Ruby 新手，因此不胜感激。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:46:59.530

如果你试试这个：

```
<%= image_tag(attachment_form.object.file_url) if attachment_form.object.file? %> 
```

您将能够显示以前上传的图像。但是如果你想立即显示上传，你需要使用别的东西。例如：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-v4-for-Rails-3) ://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-v4-for-Rails-3 对不起，如果我误解了你的问题。

# pyqt4 - Python：QTableWidget 列中的 CheckBox-es

> ID：10423590
> 
> 赞同：0
> 
> 时间：2012-05-03T00:29:41.930
> 
> 标签：pyqt4, python-2.6, qt-designer, qtablewidgetitem

我刚开始使用python，所以遇到了问题。我到处搜索，但找不到类似的例子。因此，问题如下：我使用 QT-Designer 制作了一个简单的 GUI。通过单击按钮分析来填写 QTableWidget。（如您在图片上看到的）图片 [链接](http://desmond.imageshack.us/Himg41/scaled.php?server=41&filename=picuu.png&res=landing)

当我选择一个复选框时，其余的都是随机选择的，我不知道为什么。正如我所说，我是 Python 的新手，所以好的解释对我来说意义重大。这是源代码：

```
import sys
from PyQt4 import QtGui,QtCore
from IDCS import *

class MyForm(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)

        self.connect(self.ui.analyseButton, QtCore.SIGNAL('clicked()'), self.doAnalyse)
        self.connect(self.ui.quitButton, QtCore.SIGNAL('clicked()'), QtGui.qApp, QtCore.SLOT('quit()'))

    def doAnalyse(self):
        self.ui.tableWidget.setRowCount(10)

        chkBoxItem = QtGui.QTableWidgetItem()
        chkBoxItem.setFlags(QtCore.Qt.ItemIsUserCheckable | QtCore.Qt.ItemIsEnabled)
        chkBoxItem.setCheckState(QtCore.Qt.Unchecked)       

        for i in range(10):
            self.ui.tableWidget.setItem(i, 0, chkBoxItem)
            self.ui.tableWidget.setItem(i, 1, QtGui.QTableWidgetItem("description %s" % (i+1)))
            self.ui.tableWidget.setItem(i, 2, QtGui.QTableWidgetItem("name %s" % (i+1)))
if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MyForm()
    myapp.show()
    sys.exit(app.exec_())e 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:49:37.363

您只制作了 CheckBox 的一个实例并将其放在 10 个不同的地方，这是错误的。您必须创建 10 个 CheckBox 实例，您将通过在下面的 for 循环下移动您正在创建 CheckBox 实例的那 3 行代码来做到这一点。

# python - Python中Excel单元格中不需要的字符

> ID：10423593
> 
> 赞同：3
> 
> 时间：2012-05-03T00:30:12.403
> 
> 标签：python, excel, ms-word, character

我在设置 Excel 单元格的值时遇到问题。我从 MS-Word 文档（dcx）中的表格单元格获取数据并将其打印在输出控制台上。

问题是单元格的数据只是一个单词“小时”，没有明显的其他前导或尾随可打印字符，如空格。但是当我使用 python 的 print() 函数打印它时，它显示了一些意想不到的字符，更像是一个小的“？” 在一个矩形中。

我不知道它是从哪里来的。

当我将包含单词“Hour”的相同变量写入 Excel 单元格时，它会在单元格中显示一个粗点 ( **.** )。

可能是什么问题？

任何帮助深表感谢。

我在 Win7 上使用 Python 3.2 和 PyWin32 3.2。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T11:54:22.517

当我从 word 文档中的表格中获取数据时，我遇到了同样的问题。我为解决这个问题所做的是编写一个小函数来删除所有这些不必要的字符：

```
import re

def removechars(cellvalue):
    text = re.sub(r"[\r\n\t\x07\x0b]", "", cellvalue)
    return text 
```

然后我使用：

```
value = table.Cell(Row = 1, Column = 1).Range.Text
value = removechars(value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T01:24:37.223

尝试使用删除字符串末尾的`value.rstrip('\r\n')`任何回车符 ( `\r`) 或换行符 ( ) 。`\n``value`

# jquery - 如何在 jQuery .click 函数中添加和减去数字？

> ID：10423594
> 
> 赞同：0
> 
> 时间：2012-05-03T00:30:13.583
> 
> 标签：jquery

我将使用 jQuery 来执行以下操作：

单击具有“复选框”类的元素后：

*   添加类“复选标记”
*   删除类“复选框”
*   使用“您的请求列表中有 x 个应用程序”更新 div，其中 x 是已单击的数字
*   当单击带有“复选标记”的类时，它将从显示的数字中减去

我的示例代码没有显示所有这些功能，但除了更新已单击/“未单击”的数字外，我能够完成此操作。

`

```
$("span.checkbox").click(function() {

    if(!oldVal) {
        var oldVal = "0";
    }

    var newVal = parseFloat(oldVal) + 1;

    var oldVal = newVal;

    $("#wishlistapps").html('<li>You have ' + newVal + ' apps in your request list</li>');

}); 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:40:12.773

您需要在点击处理程序之外声明您的计数器变量。当调用处理程序时，您当前正在执行的方式`oldVal`将*始终*为零。

```
var totalChecked = 0;
$("span.checkbox, span.checkmark").click(function() {
     var el = $(this);
     if(el.hasClass('checkbox')) {
         el.removeClass('checkbox');
         el.addClass('checkmark');
         totalChecked++;
     } else {
         el.removeClass('checkmark');
         el.addClass('checkbox');
         totalChecked--;
     }
     $("#wishlistapps").html('<li>You have ' + totalChecked + ' apps in your request list</li>');
}); 
```

演示：http: [//jsbin.com/ufopok/2](http://jsbin.com/ufopok/2)。

您也可以`$('.checkmark').length`按照我在上面的评论中所说的那样使用，但是使用许多复选框可能会变慢。

# iphone - 如何使用同一应用查找附近的 iOS 设备（GPS 位置）

> ID：10423596
> 
> 赞同：3
> 
> 时间：2012-05-03T00:30:33.277
> 
> 标签：iphone, ios, xcode

我想创建一个应用程序，允许用户使用登录到同一个应用程序的 GPS 坐标找到附近的其他用户位置。它还可以跟踪正在移动的设备（登录到同一个应用程序）的位置在车里 。

有人可以给我一个概述，我可以如何做到这一点。是否有任何免费的 API 可用于完成此任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:41:48.693

Danielbeard 是正确的 - 您需要在某处的服务器上不断存储/更新位置。您的应用程序在后台运行时确实有一些运行时间，但我不确定它是否足以运行您需要的网络流量。

查看这篇文章：[在后台运行应用程序并发送频繁的 http 请求](https://stackoverflow.com/questions/4954661/iphone-sdk-running-app-in-background-and-send-frequent-http-request)

并在此处查看多任务指南：[多任务指南](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

您还可以查看推送通知。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-09T16:51:59.023

在 iOS7 中引入了 MultiPeerConnectivity 来查找附近的应用程序，因此如果您有一家咖啡店并且有人经过或进来他们可以获得最新的优惠，或者您走进一个房间并且随着您的设备交换音乐会变成您喜欢的音乐与另一个信息。

[http://nshipster.com/multipeer-connectivity/](http://nshipster.com/multipeer-connectivity/)

# c++ - 可以在 CUDA 中使用的数组大小是否有限制？

> ID：10423601
> 
> 赞同：3
> 
> 时间：2012-05-03T00:31:19.730
> 
> 标签：c++, visual-studio, cuda

编写了一个计算简单函数积分的程序。在测试它时，我发现如果我使用一个大小超过 1000 万个元素的数组，它会产生错误的答案。我发现一旦在 CUDA 内核中操作了数组，似乎就会发生错误。1000 万个及以下的元素工作正常并产生了正确的结果。

可以传输到 GPU 或在 GPU 上计算的元素数量是否有大小限制？

PS 使用包含浮点数的 C 样式数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T03:31:33.330

There are many different kinds of memory that you can use with CUDA. In particular, you have

*   Linear Memory (`cuMemAlloc`)
*   Pinned Memory (`cuMemHostAlloc`)
*   Zero-Copy Memory (`cuMemAllocHost`)
*   Pitch Allocation (`cuMemAllocPitch`)
*   Textures Bound to Linear Memory
*   Textures Bound to CUDA Arrays
*   Textures Bound to Pitch Memory
*   ...and cube maps and surfaces, which I will not list here.

Each kind of memory is associated with its own hardware resource limits, many of which you can find by using `cuDeviceGetAttribute`. The function `cuMemGetInfo` returns the amount of free and total memory on the device, but because of alignment requirements, allocating `1,000,000` floats may result in more than `1,000,000 * sizeof(float)` bytes being consumed. The maximum number of blocks that you can schedule at once is also a limitation: if you exceed it, the kernel will fail to launch (you can easily find this number using `cuDeviceGetAttribute`). You can find out the alignment requirements for different amounts of memory using the CUDA Driver API, but for a simple program, you can make a reasonable guess and check the value of allocation function to determine whether the allocation was successful.

There is no restriction on the amount of bytes that you can transfer; using asynchronous functions, you can overlap kernel execution with memory copying (providing that your card supports this). Exceeding the maximum number of blocks you can schedule, or consuming the available memory on your device means that you will have to split up your task so that you can use multiple kernels to handle it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T16:51:04.573

对于计算能力> = 3.0，最大网格尺寸为 2147483647x65535x65535，因此对于一个应涵盖大小高达 2147483647x1024 = 2.1990233e+12 的任何一维数组。

10 亿个元素数组绝对没问题。

1,000,000,000/1024=976562.5，向上取整到 976563 个块。只要确保如果 threadIdx.x+blockIdx.x*blockDim.x>= 您从内核返回而不进行处理的元素数。

# c# - 是否可以在 C# 中通过网络发送 MessageBox - 在接收端没有任何监听软件？

> ID：10423602
> 
> 赞同：0
> 
> 时间：2012-05-03T00:31:31.870
> 
> 标签：c#, networking, send, messagebox

到目前为止，我已经找到了很多通过网络发送和接收文件的方法（主要来自这个站点），但是我还没有找到关于如何在接收端没有监听软件的情况下进行操作的教程。

**例子：**

我想发送一个标题为 Hello 和正文的消息框。

通常，我会写出`MessageBox.Show("Hello","There");`

但是，我希望能够`MessageBox`通过网络发送。

我将如何做到这一点，请记住：

*   两台电脑都没有管理员权限
*   我在两台计算机上都使用 Windows 7
*   接收方不会有监听软件。

提前感谢任何帮助我解决这个问题的人。

**编辑：**它不必是一个`MessageBox`，我可以制作一个看起来像一个的论坛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:42:02.490

这就像在说，“即使你不听我说的话，我能强迫你做我告诉你的事吗？”

显然，答案是否定的。

如果对方不打算回应你所说的话，那么，好吧，他不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:39:05.043

你不能用 MessageBox 做到这一点，因为那将是一个很大的漏洞。

如果您使用的是 Windows XP，您可能可以从命令行使用“net send”命令（因此可以从 C# 程序或批处理文件中以某种方式调用；无论您的船如何漂浮），具体取决于配置的机器。

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_send.mspx](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_send.mspx)

在 Windows Vista 中有一个名为 msg.exe 的等效程序，但在 Windows 7 中被完全删除。

-

总之，不与Windows 7 没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T00:46:29.113

您可以从 Sysinternals 调用 PsExec 以复制并在网络上的远程计算机上运行程序 - 该程序可以是您编写的侦听器，也可以只是显示在命令中给出的消息的程序线。PsExec 并没有做任何你通过调用 Windows API 和直接使用 RPC 做不到的事情，但这是很多工作:) 权限可能是一个问题。归根结底，开箱即用的非管理员用户无法与网络上的另一台机器进行交流。您需要放宽权限 - 也许使用组策略？但是，如果您有组策略，只需使用 .msi 或登录脚本安装侦听器。

你能提供更多关于你为什么要这样做的信息吗？也许有更好的方法来实现您所追求的通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-02T19:01:57.350

可以使用 windows 中包含的 msg.exe 工具。使用命令

```
Shell("cmd.exe /c msg * /SERVER:" & ipAddress & " " & deineNachricht) 
```

如果您的 PC 没有 msg，请从某处下载。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T00:39:05.463

尝试查看这个项目的代码 - 它使用 net send 命令行程序将消息发送到远程机器，尽管我不确定没有管理员权限你的里程会如何：

[http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&ved=0CCcQFjAA&url=http%3A%2F%2Fwww.codeproject.com%2FArticles%2F9466%2FThe- NetSend-Plus-NET-C&ei=hNOhT6ewH82RiQe--eCNCQ&usg=AFQjCNHzAjhU7SU7kuPSCQBLElR5vb1sIg](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&ved=0CCcQFjAA&url=http%3A%2F%2Fwww.codeproject.com%2FArticles%2F9466%2FThe-NetSend-Plus-NET-C&ei=hNOhT6ewH82RiQe--eCNCQ&usg=AFQjCNHzAjhU7SU7kuPSCQBLElR5vb1sIg)

# javascript - 无法创建 Sencha Touch 2 jsb3 文件，TypeError: 'undefined'？

> ID：10423603
> 
> 赞同：0
> 
> 时间：2012-05-03T00:31:35.193
> 
> 标签：javascript, sencha-touch, sencha-touch-2

目前正在尝试设置和部署 Sencha Touch 2 应用程序。我正在关注本指南：[http ://docs.sencha.com/touch/2-0/#!/guide/building](http://docs.sencha.com/touch/2-0/#!/guide/building)

当我去运行时`sencha create jsb`，响应是：

```
TypeError: 'undefined' is not a function
phantomjs://webpage.evaluate():6
  phantomjs://webpage.evaluate():1
  C:\Program Files (x86)\SenchaSDKTools-2.0.0-beta3\compat\scripts\phantomjs-jsb.js:230 
```

怎么了？这是 SDK 工具的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:14:15.580

app.json 文件的一些调整解决了这个问题。不完全确定我做了什么，但我又去构建它，它很好。

# r - 在 R 中，如何在运行具有大量变量的多重回归后仅提取重要变量

> ID：10423604
> 
> 赞同：1
> 
> 时间：2012-05-03T00:31:40.697
> 
> 标签：r, linear-regression, data-analysis

在 R 中运行多元回归后，回归摘要用星号指示显着变量。在我正在处理的数据集中，有近 2000 个变量，R 识别的重要变量包括 50 多个变量。有什么方法可以从回归摘要中单独获取重要变量的列表。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T01:14:06.860

这是为什么您不应该做您要求我们做的事情的一个例子：

```
randf <- as.data.frame(matrix(rnorm(800*400), 800, 400))
names(randf)[1] <- "Y"
big.mod <- lm(Y ~ ., data=randf)
sum( summary(big.mod)$coefficients[ ,4] < 0.05 )
#[1] 22 
```

所以我们得到 22 个显着系数（其中一些“非常显着”），只是将 400 个随机变量与另一个随机变量进行回归。

# php - 为我的网站创建仪表板功能

> ID：10423605
> 
> 赞同：-3
> 
> 时间：2012-05-03T00:31:46.050
> 
> 标签：php, mysql, sorting, dashboard

我正在为我的网站创建仪表板功能。我无法正确排序。仪表板将包含他们关注的人的所有最近状态更新。我为此使用 MySQL 和 PHP。

```
Status Table:

id: key value, auto-increments
user: the username of the poster of the status
status: the actual status that was posted
date: an int value, has the time that the status was posted

Users table: (Unneeded rows are excluded)
username: The user's name
following: All of the users that he is following. This is a text field, and is delimited by semicolons. 
```

它需要按发布日期排序。我遇到麻烦的原因是我必须让用户关注的人。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:41:14.537

在这里我会试一试。我不得不稍微改变一下 sql 表

**继承人SQL：**

```
CREATE TABLE IF NOT EXISTS `status` (
  `id` int(3) NOT NULL AUTO_INCREMENT,
  `user_id` int(3) NOT NULL,
  `user_status` text NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

INSERT INTO `status` (`id`, `user_id`, `user_status`, `date`) VALUES
(1, 1, 'Hi, Im Dave, User One.', '2012-05-03'),
(2, 2, 'Hi, Im Amy, User Two.', '2012-05-01'),
(3, 3, 'Hi, Im Lisa user 3', '2012-05-01'),
(4, 4, 'Hi, Im Joe user 4', '2012-05-02');

CREATE TABLE IF NOT EXISTS `users` (
  `id` int(3) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `following` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

INSERT INTO `users` (`id`, `username`, `following`) VALUES
(1, 'Dave', '2:3'),
(2, 'Amy', '1:4'),
(3, 'Lisa', '1:4'),
(4, 'Joe', '1:2:3'); 
```

**继承人是php（这假设您已经连接到数据库）：**

```
 // Get user 2 (id 2) details from user table
    $res = mysql_query("SELECT * FROM users WHERE id='2'");
    while ($row = mysql_fetch_assoc($res)) {

        $username = $row['username'];
        $following = $row['following'];

    }

    if(!empty($following)) {
        $data = explode(':',$following);

        foreach($data as $user){

            // Now get user 2 (id 2) followers statuses
            $res = mysql_query("SELECT * FROM status WHERE user_id='$user'");
            while ($row = mysql_fetch_assoc($res)) {
                echo $user_status = $row['user_status'].'<br>';
                echo $date = $row['date'].'<br>';

            }

        }
    } 
```

我测试过，它似乎工作得很好

希望这是你需要的:)

# javascript - 从 iPhone 向 PHP 提交表单

> ID：10423606
> 
> 赞同：2
> 
> 时间：2012-05-03T00:31:46.920
> 
> 标签：javascript, ios, ajax, forms, post

当然我错过了一些简单的东西......下面是我试图提交给 PHP 脚本的简单表单。它在 PC 和 Mac 上运行良好，但在 ipad、iphone 等设备上的 Safari 中却不行。我猜我缺少一个移动组件？

```
<html>
<head>
    <title>Title</title>
    <script src="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.js"></script>
    <script type="text/javascript">

$('form').submit(function(){
    var postData = $(this).serialize();

    $.ajax({
        type: 'POST',
        data: postData,
        url: "http://www.norwichandyork.com/pocketleads/utilities/accounts.php",
        success: function(data){
            console.log(data);
            alert('Your comment was successfully added');
        },
        error: function(){
            console.log(data);
            alert('There was an error adding your comment');
        }
    });

    return false;
});
</script>
</head>
<body>

<form method="post" action="http://www.norwichandyork.com/pocketleads/utilities/accounts.php">
    <label for="email">
        <b>Email</b>
        <input type="text" id="email" name="email">
    </label>

    <label for="fname">
        <b>fname</b>
        <input type="text" id="fname" name="fname">
    </label>

    <input type="submit" value="Save">
</form>

</body>
</html> 
```

我重新发布了我的完整代码并留下了操作网址，以便任何人都可以轻松尝试。提前感谢您的所有帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:54:14.543

解决了！不确定它是 Xcode 还是 PhoneGap 的东西，但您必须将您从应用程序访问的每个域都列入白名单。虽然我确实将我的域列入了白名单，但它仍然不起作用。我在检查编译错误日志时发现了这一点。我发现了这个： http: [//www.prosoxi.com/2011/10/08/xcode-phonegap-white-list-rejection/](http://www.prosoxi.com/2011/10/08/xcode-phonegap-white-list-rejection/)并通过将 *.mydomain.com 添加到白名单中，现在一切正常。感谢大家的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:33:47.060

```
<script type="text/javascript"> 
```

代替

```
<script language="JavaScript"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:38:59.630

> `<form action="post">`

元素的`action`属性`form`指定数据应该发送到哪里。除非您的 PHP 脚本被调用，否则`post`我认为您应该更改`action`为`method`并包含实际操作。

> `<script language="JavaScript">`

此外，您不应该指定元素的`language`属性`script`（很久没有使用过），但在 HTML5 之前，您应该使用该`type`属性，对于 JS，它的值应该是`text/javascript`. 从 HTML5`script`开始，除非另有说明，否则所有元素都假定为 JavaScript。

我写了所有这些，然后意识到你无论如何都在劫持表单，所以`action`/`method`事情并不重要。无论如何它可能会有所帮助，所以我会留下答案。

# android - Android 上的 GoogleMap ap - 创建叠加层

> ID：10423617
> 
> 赞同：2
> 
> 时间：2012-05-03T00:33:54.237
> 
> 标签：android, google-maps, overlay

我正在创建一个使用 GPS 向用户显示其当前位置的 Android 应用程序。我让应用程序的这一部分工作并且位置显示在地图视图上，但我想知道如何在位置上添加标记？我知道它与创建叠加层有关，但不确定如何去做。

我还希望在添加放大/缩小控制按钮方面得到帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:38:10.180

检查以下链接

[http://blog.pocketjourney.com/2008/03/19/tutorial-2-mapview-google-map-hit-testing-for-display-of-popup-windows/](http://blog.pocketjourney.com/2008/03/19/tutorial-2-mapview-google-map-hit-testing-for-display-of-popup-windows/)

您不仅可以在地图上绘制任何内容，还可以为视图设置动画。使用这个我在Android中实现了与iPhone一样的drop pin效果

使用 Canvas 和 onDraw 方法很困难，但却是处理事情的最佳和核心方法。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:57:31.297

您可以使用此项目来实现您想要的：

[地图视图气球](https://github.com/jgilfelt/android-mapviewballoons)

希望这可以帮助。

# autocomplete - 从浏览器调用 Google 的自动完成功能时收到 REQUEST_DENIED

> ID：10423619
> 
> 赞同：1
> 
> 时间：2012-05-03T00:34:09.290
> 
> 标签：autocomplete

我已经注册了 Google Places Autocomplete API 并通过转到以下 url 创建了一个新密钥。

[http://code.google.com/apis/console/](http://code.google.com/apis/console/)

我正在使用生成的密钥在我的浏览器上进行一些测试。我正在输入以下网址以搜索以“San”开头的城市名称。

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=San&types=cities&sensor=false&key=](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=San&types=cities&sensor=false&key=)

我不断收到“REQUEST_DENIED”错误消息。有什么我想念的吗？每次我尝试使用浏览器进行测试时，我都会看到我的使用计数器上升，但我不断收到 REQUEST_DENIED 消息。根据谷歌文档，它说此消息与“传感器”参数有关。我尝试将此参数设置为 True/False，但得到相同的结果。请帮忙！

谢谢，

# objective-c - 有什么方法可以用预处理器替换部分单词？

> ID：10423620
> 
> 赞同：5
> 
> 时间：2012-05-03T00:34:09.530
> 
> 标签：objective-c, c

我的 Objective-C 课上有类似的东西

```
@interface PREFIX_MyClass {
...
@end 
```

我想使用预处理器将其转换为：

```
@interface AwesomeMyClass {
...
@end 
```

所以像

```
#define PREFIX_ Awesome 
```

不起作用，因为它是单词的一部分。还有什么办法吗？我知道我可以使用这样的东西：

```
#define PrefixClass(NAME) Awesome##NAME

@interface PrefixClass(MyClass) 
```

但我不喜欢这样，因为它破坏了代码的完整并在开发工具中引用了以下内容（即：在这种情况下为 Xcode）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:58:54.970

这不是很优雅，但是您可以使用预处理器来替换整个类名，而不仅仅是部分。

```
#define PREFIX_MyClass AwesomeMyClass
@interface PREFIX_MyClass 
```

当然，如果您多次使用前缀并且它会更改，这将成为一个问题。您可以通过使用另一个调用另一个宏来添加前缀来解决此问题，这样只有一个宏包含实际的前缀。

```
#define ADD_PREFIX(name) Awesome##name
#define PREFIX_MyClass ADD_PREFIX(MyClass)
@interface PREFIX_MyClass 
```

这仍然需要为您想要添加前缀的所有内容添加一个宏，但代码完成将识别该`PREFIX_MyClass`名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:32:33.653

这并不完全是您所要求的，但它可能是实现目标的另一条途径。Xcode 允许你为你的项目定义一个类前缀。在文件导航器中选择您的项目，然后在文件检查器（右侧边栏的第一个“选项卡”）中，您将拥有以下内容：

![在此处输入图像描述](../Images/5ae421ecc51b0e6b29aea2f8944d725c.png)

您在“类前缀”字段中输入的任何文本都将添加到您在该项目中创建的任何类的名称之前。

# coffeescript - 将变量传递给咖啡脚本

> ID：10423622
> 
> 赞同：1
> 
> 时间：2012-05-03T00:34:32.070
> 
> 标签：coffeescript

从命令行，如何将变量传递给coffeescript，以便它可以替换相应的占位符，如下所示：

```
$ echo "module.exports = {version: '$VERSION'}" | coffee -p -s VERSION=0.0.0 
```

预期的JS：

```
(function() {

  module.exports = {
    version: '0.0.0'
  };

}).call(this); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:42:12.080

两件事情：

*   您需要`VERSION`在 echo 中定义，而不是在 coffeescript 编译器中；当咖啡脚本编译器看到它时，它已经被翻译`$VERSION`成`''`.
*   `echo`是内置的 shell，因此标准`VERSION=0.0.0 echo "$VERSION"`构造不起作用。

所以你想创建一个新的子shell，这样 VERSION 的设置就不会传播到你的主 shell 中，然后执行 echo 和 coffee，如下所示：

```
$ (VERSION=0.0.0; echo "module.exports = {version: '$VERSION'}" | coffee -ps)       
(function() {

  module.exports = {
    version: '0.0.0'
  };

}).call(this); 
```

表达式周围的括号停止设置 VERSION：

```
$ echo $VERSION                                                              

$ 
```

# php - php xdebug wamp 自动创建配置文件

> ID：10423623
> 
> 赞同：0
> 
> 时间：2012-05-03T00:34:38.627
> 
> 标签：php, debugging, profile, xdebug

这件事快把我逼疯了。我在 WAMP 上使用 xdebug，但无法让它自动生成配置文件……这是我的 php.ini 代码：

```
zend_extension = "c:/wamp/bin/php/php5.3.10/zend_ext/php_xdebug-2.1.2-5.3-vc9-x86_64.dll"
xdebug.profiler_enable=1
xdebug.profiler_output_dir="C:\wamp\tmp\xdebug"

xdebug.auto_trace=1
xdebug.trace_output_dir="C:\wamp\tmp\xdebug"
xdebug.collect_params=1
xdebug.collect_return=1 
```

不过，我已经尝试了您能想象到的所有 .ini 配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:48:26.793

大声笑我正在编辑错误的 php.ini 文件。对不起，伙计们，它发生了。

# c# - 读/写串行端口（用于 UBW）

> ID：10423625
> 
> 赞同：1
> 
> 时间：2012-05-03T00:35:01.060
> 
> 标签：c#, serial-port, communication

我正在尝试在 C# 中对 UBW 进行编程以接收命令并将输入返回给我。例如，当我在 TeraTerm 中建立 USB 连接时，输入 v 将为我提供我正在使用的 UBW 的当前固件版本的输出。

我在 C# 中建立了连接。我想我发送的命令是正确的，但我的 datareceived 处理程序从未在调试器中调用。

这是尝试写入端口的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (port.IsOpen)
        {
           //write command to port
           port.WriteLine(textBox1.Text);

        }

        else
        {
            MessageBox.Show("Serial port is closed! Try again!");
        }

        textBox1.Clear();

    } 
```

这是尝试从中读取的代码（从未从调试器中调用）

```
private void port_dataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            port.ReadLine();

        }

        catch { }

    } 
```

这是 UBW 主页，展示了它是如何工作的。[http://schmalzhaus.com/UBW/](http://schmalzhaus.com/UBW/)

我的组合框代码来设置我的端口：

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        string portName = comboBox1.SelectedItem.ToString();
        port = new SerialPort(portName, 9600, Parity.None, 8, StopBits.One);
        port.DataReceived += new SerialDataReceivedEventHandler(port_dataReceived);
        try
        {
            port.Open();
            //port.DataReceived += new SerialDataReceivedEventHandler(port_dataReceived);
        }
        catch
        {
            MessageBox.Show("The selected serial port cannot be opened!");
            Application.Exit();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:29:33.623

进入 TeraTerm 的 COM 端口属性，并确保您在代码中使用相同的属性。

Try using this class (it wraps up a lot of serial stuff to make it easier):

[http://code.google.com/p/flux3gui/source/browse/Flux3GUI/SerialCommunication.cs?r=b4a4f8546b936eeabe60b7de32e3027493498dc6](http://code.google.com/p/flux3gui/source/browse/Flux3GUI/SerialCommunication.cs?r=b4a4f8546b936eeabe60b7de32e3027493498dc6)

# sql - 什么是正确的方法？sql server 和服务帐户

> ID：10423626
> 
> 赞同：0
> 
> 时间：2012-05-03T00:35:01.530
> 
> 标签：sql, sql-server

我一直在阅读有关如何为每个 sql 服务设置特定服务帐户的信息，但从我所阅读的内容来看，没有一个关于如何正确创建一个足够详细的信息，有人介意解释如何操作的步骤吗？为windows上的sql服务创建一个本地的低权限帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:43:26.867

一些基本信息可在[http://msdn.microsoft.com/en-us/library/cc281953.aspx](http://msdn.microsoft.com/en-us/library/cc281953.aspx)

除了帐户通常会收到的内容（例如域用户）之外，我倾向于在网络上创建没有特定权限的域用户帐户。在 SQL Server 安装期间，您将这些帐户提供给 SQL 安装程序 - 它会为您正确配置帐户（将它们添加到某些组等）。

如果您在安装 SQL 之后执行此操作，更改服务帐户的正确方法是使用 SQL Server 配置管理器（在您的开始菜单中），因为它将再次确保正确配置帐户。

使用域帐户非常棒，因为您可以授予服务帐户访问特定网络共享（备份）和其他数据库服务器（链接服务器等）的权限。

作为一项附加措施，如果您的网络资源（文件共享等）使用自定义安全组而不是“域用户”来保护，您的 SQL Server 服务将无法访问它们不应该访问的这些网络区域到达。我个人没有尝试删除“域用户”成员资格——你不能通过在虚拟机上尝试来破坏任何东西吗？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:21:14.867

该站点描述了使用最低权限的不同选项以及其他选项的危险：

*   何时使用域用户帐户？
*   何时使用网络服务帐户？何时使用本地用户帐户？
*   何时使用本地系统帐户？

## -

-

[http://goo.gl/vG55n](http://goo.gl/vG55n)

# c++ - WM6.1上的C ++锁定tabskbar但也锁定Windows键

> ID：10423631
> 
> 赞同：0
> 
> 时间：2012-05-03T00:35:34.943
> 
> 标签：c++, windows, mobile

我在下面有一个代码来锁定任务栏（WM6.1 屏幕上的顶部窗口栏），但它也锁定了 windows 键。windows 键在运行代码之前工作，但运行代码后，任务栏被锁定，但 windows 键在按下时没有响应。如何只锁定任务栏？

谢谢。

```
TaskBar(BOOL lock)
{
    if(lock == TRUE)
    {
        CWnd* pWnd = CWnd::FindWindowW(TEXT("HHTaskBar"), NULL);

        if(pWnd)
        {
            pWnd->ShowWindow(SW_HIDE);
            pWnd->EnableWindow(FALSE);                    
        }
    }
    else if(lock == FALSE)
    {
        CWnd* pWnd = CWnd::FindWindowW(TEXT("HHTaskBar"), NULL);

        if(pWnd)
        {
            pWnd->ShowWindow(SW_SHOWNORMAL);
            pWnd->EnableWindow(TRUE);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T01:16:24.477

如果您只想锁定任务栏，请删除代码 EnableWindows(boolean)。但只是为了让您知道 Windows 6.1 具有与任务栏共享的开始/Windows 图标，因此它也会锁定该开始\Windows 按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:02:29.027

你的问题真的没有任何意义。您正在*禁用*任务栏。winkey单独按下时唯一能做的就是打开任务栏。

使用键处理程序来检测 winkey 的按下，重新启用任务栏以显示，然后再次禁用它，如果这是你真正想要的。

# .htaccess - Apache VirtualHost URL 的抽象

> ID：10423634
> 
> 赞同：0
> 
> 时间：2012-05-03T00:36:00.220
> 
> 标签：.htaccess, mod-rewrite, apache2, document-root

所以我有几个 mod_rewrite 规则来使 URL 更漂亮。

我的意思是我希望更改这样输入的网址：

```
http://test.domain.com/cheese/wine/ 
```

到 test.php 的背景关联，如下所示：

```
http://test.domain.com/test.php?client=test&page=cheese/wine 
```

PS：上面的client变量其实就是[test].domain.com。

根据重写日志，所有 RewriteRule 似乎都可以正常工作，但我得到的只是 400 错误。

* * *

虚拟主机文件：

```
<VirtualHost *:80>
  ServerName *.domain.com
  DocumentRoot /var/www/dir/

  ...

  RewriteEngine on

  # drop www. from subdomains
  RewriteCond %{HTTP_HOST} ^www\.(.*)\.domain.com$
  RewriteRule ^/?(.*)$ http://%1.domain.com/$1 [R=301]

  # rewrite x.domain.com/abc to abc?client=x
  RewriteCond %{HTTP_HOST} ^([^.]+)\.domain.com$
  RewriteRule ^/?(.*)$ $1?client=%1 [QSA]

  RewriteRule ^/?(.*)$ test.php?page=$1 [QSA,L]

  ...
</VirtualHost> 
```

有没有人有任何想法？

* * *

编辑：请求主机名 (*.domain.com) 需要保持不变，因为 (www.)domain.com 以不同的方式处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:25:03.297

您的代码会生成一个无限循环。

```
<VirtualHost *:80>
  ServerName *.domain.com
  DocumentRoot /var/www/dir/

  ...

  RewriteEngine on

  # drop www. from subdomains
  # also drop www. from main domain
  RewriteCond %{HTTP_HOST} ^www\.(.*\.)?domain.com$
  RewriteRule ^/?(.*)$ http://%1domain.com/$1 [R=301]

  # rewrite x.domain.com/abc to abc?client=x
  RewriteCond %{REQUEST_URI} !^test\.php
  RewriteCond %{HTTP_HOST} ^([^.]+)\.domain.com$
  RewriteRule ^/?(.*)$ test.php?page=$1&client=%1 [QSA,L]

  ...
</VirtualHost> 
```

我还修改了代码，因此`www.domain.com/`重定向到`domain.com/`

# php - JavaScript getElementById() 获取数据的问题

> ID：10423637
> 
> 赞同：0
> 
> 时间：2012-05-03T00:36:33.733
> 
> 标签：php, javascript, html

好的：我有 HTML 代码，例如：

```
<form method="post">
  <ul>
    <li>
      <label for="username">Username</label>
      <input type="text" id="username" size="30" onblur="checkUser()" />
      <div id=user></div>
    </li>
    <li>
      <label for="email">Email</label>
      <input type="text" name="email" id="email" size="30" />
    </li>
    <li>
      <label for="first_name">First Name</label>
      <input type="text" name="first_name" id="first_name" size="30" />
    </li>
    <li>
      <label for="last_name">Last Name</label>
      <input type="text" name="last_name" id="last_name" size="30" />
    </li>
    <li>
      <label for="cell">Cell</label>
      <input type="text" name="cell" id="cell" size="30" />
    </li>
    <li>
      <label for="street">Street</label>
      <input type="text" name="street" id="street" size="30" />
    </li>
    <li>
      <label for="city">City</label>
      <input type="text" name="city" id="city" size="30" />
    </li>
    <li>
            <label for="zip">Zip</label>
      <input type="text" name="zip" id="zip" size="30" />
    </li>
    <li>
            <label for="password">Password</label>
      <input type="password" name="password" id="password" size="30" />
    </li>
    <li><label for="password2">Repeat Password</label>
      <input type="password" name="password2" id="password2" size="30" />
    </li>
    <li>
            <label for="submit"></label>
      <button type="submit" name="submit" id="submit">Register</button>
    </li>
  <ul>
</form> 
```

带有 JS 功能

```
function checkUser()
{   
    var userID=document.getElementById('username').value;
    alert(userID);
    createRequest();
    var url= "userCheck.php?username="+userID;
    //alert(url);
    request.open("GET",url,true);
    request.onreadystatechange=updatePage;
    request.send(null);
} 
```

我被困在`document.getElementById('username').value;`. 警报说值是`username`。

我正在尝试使用此函数从所述文本框中提取值并将其传递给`userCheck.php`查询以查看用户名是否已被使用。

有什么帮助吗？

更新 - 代码的其余部分

```
<? include "heading.php" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<?php
function mailer($to,$username,$hash){

        $subject = "Test mail";
        $message = "http://www.me.com/verify.php?username=$username&hash=$hash";
        $from = "me@myself.com";
        $headers = "From:" . $from;
        mail($to,$subject,$message,$headers);
        echo "Mail Sent.";

    }

if(isset($_POST['submit'])){
        if($_POST['password']==$_POST['password2'] && !empty($_POST['password']) && !empty($_POST['username']) && !empty($_POST['email']) && !empty($_POST['last_name'])){
            if(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $_POST['email'])){
                $msg = 'The email you have entered is invalid, please try again.';  
                }else{
                    require_once "UserManagement.php";
                    $hash = md5(rand(0,1000));
                    $usman=new UserManagement();
                    $usman->createUser($_POST['username'],$_POST['email'],$_POST['first_name'],$_POST['last_name'],$_POST['cell'],$_POST['street'],$_POST['city'],$_POST['zip'],md5($_POST['password']),$hash);
                    mailer($_POST['email'],$_POST['username'],$hash);
                    $msg = 'Your account has been made, <br /> please verify it by clicking the activation link that has been send to your email.';  
                    header('Location: http://www.me.com/me');
                    }
                    }else{
                        $msg = 'Form Data Incorrect';
                        sleep(10);
                        header('Location:http://www.me.com/me');

                    }
}

?>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Registration</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<link href="css/templatemo_style.css" rel="stylesheet" type="text/css" />

<script language="javascript" type="text/javascript">
function clearText(field)
{
    if (field.defaultValue == field.value) field.value = '';
    else if (field.value == '') field.value = field.defaultValue;
}
</script>

<link rel="stylesheet" type="text/css" href="css/ddsmoothmenu.css" />

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/ddsmoothmenu.js">

/***********************************************
* Smooth Navigational Menu- (c) Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
***********************************************/

</script>

<script type="text/javascript">

ddsmoothmenu.init({
    mainmenuid: "templatemo_menu", //menu DIV id
    orientation: 'h', //Horizontal or vertical menu: Set to "h" or "v"
    classname: 'ddsmoothmenu', //class added to menu's outer DIV
    //customtheme: ["#1c5a80", "#18374a"],
    contentsource: "markup" //"markup" or ["container_id", "path_to_menu_file"]
})

</script>

</head>
<body id="sub_page">
<div id="templatemo_wrapper">
    <div id="templatemo_top">
        <div id="templatemo_login">
        <?include "loginbox.php"?>
        </div>
    </div> <!-- end of top -->

    <div id="templatemo_header">
        <div id="site_title"><h1><a href="http://www.spaladonna.com">SPA LaDonna</a></h1></div>
        <div id="templatemo_menu" class="ddsmoothmenu">
            <? include "mainmenu.php" ?>
        </div> <!-- end of templatemo_menu -->
    </div> <!-- end of header -->
    <? include "checkuser.php"?>
    <div id="templatemo_main">
        <div id="templatemo_content">
            <div class="col_fw">
                <h1>Register User</h1>

                <fieldset>
                    <legend>New User Signup</legend>
                    <form method="post">
                        <ul>

                                <li><label for="username">Username</label>
                                <input type="text" id="username" size="30" onblur="checkUser()" />
                                <div id=user >   </div>
                                </li>

                                <li><label for="email">Email</label>
                                <input type="text" name="email" id="email" size="30" />
                                </li>

                                <li><label for="first_name">First Name</label>
                                <input type="text" name="first_name" id="first_name" size="30" />
                                </li>

                                <li><label for="last_name">Last Name</label>
                                <input type="text" name="last_name" id="last_name" size="30" />
                                </li>

                                <li><label for="cell">Cell</label>
                                <input type="text" name="cell" id="cell" size="30" />
                                </li>

                                <li><label for="street">Street</label>
                                <input type="text" name="street" id="street" size="30" />
                                </li>

                                <li><label for=city">City</label>
                                <input type="text" name="city" id="city" size="30" />
                                </li>

                                <li><label for="zip">Zip</label>
                                <input type="text" name="zip" id="zip" size="30" />
                                </li>

                                <li><label for="password">Password</label>
                                <input type="password" name="password" id="password" size="30" />
                                </li>

                                <li><label for="password2">Repeat Password</label>
                                <input type="password" name="password2" id="password2" size="30" />
                                </li>

                                <li><label for="submit"></label>
                                <button type="submit" name="submit" id="submit">Register</button>
                                </li>

                        <ul>
                    </form>
                </fieldset>
<script type="text/javascript">
var request=null;
function createRequest()
{
    try{

        request= new XMLHttpRequest();

        }catch(tryMicrosft){
            try{
                request= new ActiveXObject("Msxml2.XMLHTTP");

            }catch(otherMicrosoft){
                try{

                        request=new ActiveXObject("Microsoft.XMLHTTP");
                }catch(failed){

                    request=null;
                }
            }   
        }
        if(request==null)
        alert("Error creating request object!");
//else alert("Successfully created");
}

function checkUser()
{   
    var userID=document.getElementById('username').value;
    alert(userID);
    createRequest();
    var url= "userCheck.php?username="+userID;
    //alert(url);
    request.open("GET",url,true);
    request.onreadystatechange=updatePage;
    request.send(null);
}
function updatePage()
{
    if(request.readyState==4)
    replaceText('user',request.responseText);
}

function clearText(el) {
  if (el != null) {
    if (el.childNodes) {
      for (var i = 0; i < el.childNodes.length; i++) {
        var childNode = el.childNodes[i];
        el.removeChild(childNode);
      }
    }
  }
}

function replaceText(el, text) {
  if (el != null) {
    el=document.getElementById(el);
    clearText(el);
   //setTimeout("alert("HELLO")", 4000);

    var newNode = document.createTextNode(text);

   el.appendChild(newNode);

  }
}

</script>
                </div>
<div class="col_fw_last">                 

                <div class="col_w300 float_l">

                </div>

                <div class="col_w300 float_r">

                </div>

                <div class="cleaner"></div>
            </div>  
        </div> <!-- end of content -->

        <div id="templatemo_sidebar">
        <h4>Categories</h4>
            <div class="sidebar_box">
                <ul class="templatemo_list">
                    <li><a href="#">Aliquam pretium porta odio</a></li>
                    <li><a href="#">Integer sit amet erat sit</a></li>
                    <li><a href="#">Nunc elementum mollis</a></li>
                    <li><a href="#">Quisque dictum pharetra</a></li>
                </ul>
            </div>

            <div class="cleaner h40"></div>

            <h4>Cool Links</h4>
            <div class="sidebar_box">
                <ul class="templatemo_list">
                    <li><a href="http://www.templatemo.com" target="_parent">Free CSS Templates</a></li> 
                    <li><a href="http://www.flashmo.com/page/1" target="_parent">Flash XML Galleries</a></li>
                    <li><a href="http://www.flashmo.com" target="_parent">Flash Templates</a></li>
                    <li><a href="http://www.webdesignmo.com/blog" target="_parent">Web Design Resources</a></li>
                </ul>
            </div>
            <div class="cleaner h40"></div>
                <h4>Latest Updates</h4>
                <div class="news_box">
                    <a href="#">Donec eu orci dolor</a>
                    <p>Pellentesque in nunc quam. Sed molestie ultricies ante, vel scelerisque diam varius sed. </p>
                </div>
                <div class="news_box">
                    <a href="#">Aliquam bibendum vulputate</a>
                    <p>Auris nisl mi, aliquet ac lobortis ut, tincidunt in tortor nisl vitae lectus dapibus pellentesque.</p>
                </div>
                <div class="news_box">
                    <a href="#">Nunc viverra vestibulum </a>
                    <p>Nunc viverra vestibulum magna, nec dignissim turpis rhoncus tincidunt. Donec ac nibh arcu. </p>
                </div>
                <div class="news_box">
                    <a href="#">Fusce placerat ultrices</a>
                    <p>Integer ac ultricies nisi. Curabitur velit ante, porttitor ac feugiat a, porta ut lectus.</p>
                </div>
        </div> <!-- end of sidebar -->

        <div class="cleaner"></div>
    </div> <!-- end of main -->
</div> <!-- end of wrapper -->

<div id="templatemo_footer_wrapper">
    <div id="templatemo_footer">
        Copyright © 2012 <a href="#"></a>
        <div class="cleaner"></div>
    </div>
</div> 

</body>
</html>
<? ob_flush(); ?> 
```

和 header.php

```
<? ob_start(); ?>
<?php 
session_start(); 
$_SESSION['url'] = $_SERVER['REQUEST_URI'];
if(isset($_POST['login'])){
        require_once "UserManagement.php";
        $usman=new UserManagement();
        if($usman->authenticate($_POST['username'],md5($_POST['password']))){
                header('Location: http://www.me.com')
        }else {
                echo "Authentication error";
                echo '<a href="index.php">Home</a>';            
        }
        die();
}
?> 
```

如果需要的话，我也可以发布所有的菜单和东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:05:47.997

试试这个

```
//replace

var userID=document.getElementById('username').value;

//for this

var userID = document.forms[0]['username'].value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:57:22.283

是的 - 所以这绝对是我的 ID 10 T 错误 - 我正在调用 loginbox.php 并没有意识到它正在为 ID='username' 设置一个值作为实际单词“用户名”作为占位符

将表单上的一个更改为 id='newuser' 等 - 一切都很好

# android - 在模拟器上复制数据库表单资产失败

> ID：10423642
> 
> 赞同：0
> 
> 时间：2012-05-03T00:37:51.287
> 
> 标签：android, sqlite

我使用[本](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)教程将数据库文件包含到我的 android 应用程序中。它在我的 HTC Decire HD 上运行良好。我想在模拟器上运行它，看看平板电脑的布局是否好看。不幸的是，该应用程序因错误而失败。

```
private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){  <------ HERE, at first iteration
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

} 
```

此错误的消息只是“空”，仅此而已。这可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:37:10.197

```
private void copyfromAsset()
{
  try {
            String FILE_TO_READ="data.txt"; //file in asset folder
            String TEMP_FILE_NAME="temp.txt"; //or whatever file name you want to give
            byte[] buffer = new byte[1024];
            int len1 = 0;

            InputStream istr=(con.getAssets().open(FILE_TO_READ));
            FileOutputStream fos=openFileOutput(TEMP_FILE_NAME,MODE_WORLD_READABLE);

            while ((len1 = istr.read(buffer)) !=-1) {
                fos.write(buffer, 0, len1); // Write In FileOutputStream.
            }
            fos.flush();
            fos.close();

            istr.close();

        }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

试试这个方法，它对我来说很好用..如果你觉得有用，请点击接受..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:51:11.077

```
public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    }
    else {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are going to be able to overwrite that
        // database with our database.

        try {

            copyDataBase();
        }
        catch (IOException e) {

            throw new Error("Error copying database");

        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transferring byte-stream.
 */
private void copyDataBase() throws IOException {

    // Open your local DB as the input stream
    InputStream myInput = mContext.getAssets().open(DB_NAME);

    // Path to the just created empty DB
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty DB as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the input-file to the output-file
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

} 
```

# asp.net - HTTPS 和 MITM 攻击

> ID：10423647
> 
> 赞同：0
> 
> 时间：2012-05-03T00:38:21.920
> 
> 标签：asp.net, wcf, security, azure

我计划在 HTTPS 中运行我的应用程序的登录部分，从登录屏幕开始。一旦用户登录并完全在 HTTPS 中继续他的会话，如何执行 MITM 攻击？这种攻击，不就是要弄清楚双方在说什么吗？

我将 asp.net 与 WCF 服务一起使用，稍后将移植到 Azure。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:47:33.900

如果您的登录会话使用 HTTPS 加密，那么您可以安全地抵御 MITM 攻击。客户端将使用服务器的公钥加密的数据发送到服务器，该公钥只能使用服务器的私钥解密。然后，客户端和服务器将使用此安全通道就用于他们通信的密钥达成一致。

MITM 攻击者无法获取私钥，因为它是私有的。他们不能为目标域提供证书，因为证书只能从 CA 获得，并且（理论上）您的浏览器信任的 CA 不会为域签署证书，除非他们证明他们拥有它。他们无法获得会话密钥，因此不可能进行 MITM 攻击。

# javascript - 如何在 HTML5 Canvas 中动画绘图

> ID：10423650
> 
> 赞同：1
> 
> 时间：2012-05-03T00:38:38.713
> 
> 标签：javascript, html, canvas

我是 HTML5 的新手。我在画布中有一个动画序列，显示铅笔写着不同的字母，如 ABC 等。我希望将其保存并作为教程供用户播放，然后用户自己尝试在画布上写 ABC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:51:27.553

[在这里](https://stackoverflow.com/questions/3474608/what-is-the-current-state-of-the-art-in-html-canvas-javascript-libraries-and-fra)检查——这个话题之前已经在 SO 上提到过。

可能还值得考虑使用像[raphaelJS](http://raphaeljs.com/)之类的 SVG 库而不是 canvas ——如果您打算在这些教程中包含任何交互性，这将极大地简化您的生活，并且它们肯定会使字形渲染特别容易（使用[Cufon](http://cufon.shoqolate.com/generate/)）。

# javascript - 自动填写WebView android中的字段

> ID：10423651
> 
> 赞同：1
> 
> 时间：2012-05-03T00:38:45.813
> 
> 标签：javascript, android, webview, field

我想用这段代码填写字段，但它给了我错误

```
Account[] accounts = AccountManager.get(this).getAccounts();
    for (Account account : accounts) {
      // TODO: Check possibleEmail against an email regex or treat
      // account.name as an email address only for certain account.type values.

      String possibleEmail = account.name;

    myWebView.setWebViewClient(new HelloWebViewClient());

    setTitleColor(Color.GRAY); //the title bar color
    myWebView.loadUrl("http://m.gmail.com");
    myWebView.loadUrl("javascript: {document.getElementById('id_email').value ='"+possibleEmail+"'};");

} 
```

它给了我这个错误

05-02 20:28:24.191：E/Web 控制台（1402）：未捕获的类型错误：无法在 :1 处设置 null 的属性“值”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:50:14.640

loadURL 是异步的；换句话说，调用 loadUrl 会启动 HTTP 请求，但会在文档下载和呈现之前立即返回。您看到的错误是因为您尝试过早地执行 javascript（在文档下载、解析和呈现之前）。

您需要使用[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageFinished)，并等待页面完成加载，然后再执行您的 javascript。尝试 onPageFinished 回调，但要注意有时会因为 iFrame 等而获得多个回调。

希望有帮助。

**编辑** 如果您的目标是 KITKAT 及更高版本，那么您还必须根据 android 版本注意使用哪种方法。以下代码给出了更好的解释：

```
 if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT)
 {
        webView.evaluateJavascript(yourScript, null);
 }
 else
 {
       webView.loadUrl(yourScript);

 } 
```

# php - 选择存在于一列中但不在所有其他列中的值

> ID：10423652
> 
> 赞同：2
> 
> 时间：2012-05-03T00:38:46.573
> 
> 标签：php, mysql, sql, select

假设我有列`col1`, `col2`, `col3`, `col4`in`myTable`并且我需要打印出**只有一列独有的值** 。

所以如果上面看起来像

```
 col1    col2    col3    col4
  s        e       c        b 
  c        c       a        s
  n        s       e        a
  d        d       q        c 
```

那么输出应该是**n, qb**因为它们分别只对`col1`,`col3`和是专有的`col4`。

如何通过 mysql php 中的查询来实现这一点？

**编辑**重复项**不必在一行中**。我现在更改了表格布局以使其清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:05:30.653

如果您正在寻找仅 SQL 的解决方案，您可以像这样对每列进行查询：

```
SELECT 
    col1 AS unique_on_col1
FROM table
WHERE     col1 NOT IN (SELECT col2 FROM table)
      AND col1 NOT IN (SELECT col3 FROM table)
      AND col1 NOT IN (SELECT col4 FROM table) 
```

可以将所有四个查询组合在一起，`UNION`但这可能不是必需的，具体取决于您要对数据执行的操作。此外，对于大型数据集，此查询不应该执行得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:10:59.543

一种更紧凑的方式来一次获取所有这些：

```
select distinct col1 
  from myTable 
 where col1 not in (select a.col1 
                     from myTable a join myTable b 
                       on a.col1 = b.col2 or a.col1=b.col3 or a.col1=b.col4)
 union
select distinct col2 
  from myTable 
 where col2 not in (select a.col2 
                     from myTable a join myTable b 
                       on a.col2 = b.col1 or a.col2=b.col3 or a.col2=b.col4)
 union
select distinct col3 
  from myTable 
 where col3 not in (select a.col3 
                     from myTable a join myTable b 
                       on a.col3 = b.col1 or a.col3=b.col2 or a.col3=b.col4)
 union
select distinct col4 
  from myTable 
 where col4 not in (select a.col4 
                     from myTable a join myTable b 
                       on a.col4 = b.col1 or a.col4=b.col2 or a.col4=b.col3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:55:17.257

尝试这个：

```
SELECT col1 AS unique_on_col1
FROM table
WHERE col1 NOT IN (SELECT col2 FROM table)
  AND col1 NOT IN (SELECT col3 FROM table)
  AND col1 NOT IN (SELECT col4 FROM table) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T00:49:16.227

```
$sql = "
    SELECT DISTINCT 'col1' as descr,col1 as val FROM myTable
    UNION
    SELECT DISTINCT 'col2' as descr,col2 as val FROM myTable
    UNION
    SELECT DISTINCT 'col3' as descr,year as val FROM myTable";

$result = @mysql_query($sql, $con) or die(mysql_error());

while($row = mysql_fetch_array($result)) {
    $make_array[$row['descr']][]=$row['val'];
} 
```

我猜这应该可行。尝试一下代码，但试一试，让我们知道。

# windows - 在 Windows 应用程序中捕获 CTRL+BREAK

> ID：10423659
> 
> 赞同：1
> 
> 时间：2012-05-03T00:40:20.113
> 
> 标签：windows, console, signals, break, ctrl

这是一个简单的问题 - 无论如何非控制台（即 CWinApp）应用程序可以接收和处理`CTRL`+ `BREAK`，它会出现 SetConsoleCtrlHandler 不做这项工作，也不安装信号处理程序？

不幸的是，我正在使用一个在 Microsoft HPC 的控制下运行的基于 CDialog 的遗留应用程序，而 HPC 使用`CTRL`+`BREAK`取消该程序（假设我猜他们头脑正常的人不会在后台运行非控制台应用程序）

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:38:21.610

调用[AttachConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952%28v=vs.85%29.aspx)`ATTACH_PARENT_PROCESS`应该可以解决问题。这会将您的进程附加到 HPC 控制台，以便它可以接收控制中断信号。您可能应该在调用[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)之前执行此操作。

如果这不起作用，请尝试[AllocConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)。如果 HPC 没有自己的控制台，它可能会假设子进程将创建一个新的控制台组（这对于控制台模式应用程序会自动发生），在这种情况下它将发送一个控制中断信号到子进程PID。如果是这样，控制台组是自动创建还是显式创建都无关紧要。

您可能希望首先通过检查[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)对于控制台模式应用程序是否按预期工作来确保 HPC 确实正在发送控制中断信号（可能是通过[GenerateConsoleCtrlEvent ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683155%28v=vs.85%29.aspx)如果它改为调用[TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)，那么您无能为力。

# c++ - Netbeans 7.1.2 中的 C++ 探查器在哪里

> ID：10423662
> 
> 赞同：4
> 
> 时间：2012-05-03T00:40:47.463
> 
> 标签：c++, netbeans, profiler

Netbeans 6.9 有一个用于 C++ 的分析器工具（我们必须安装 sun studio 才能使用它）。但是，我在 netbeans 7.1 中找不到 C++ 分析器。sun studio 12.3 已经安装并与 netbeans 7.1 一起使用。我也找不到 NB 7.1 中的 c++ 项目属性中的“配置文件”部分，而 NB 6.9 中存在该部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T22:30:49.063

根据 Netbeans 7.1 发行说明，C/C++ 分析工具已从 IDE 的标准发行版中删除。

发行说明链接：http: [//netbeans.org/community/releases/71/relnotes.html](http://netbeans.org/community/releases/71/relnotes.html)

# git - git - 更改所有全局设置

> ID：10423665
> 
> 赞同：3
> 
> 时间：2012-05-03T00:41:25.820
> 
> 标签：git, msysgit

我有两个存储库，我希望有不同的信息与之关联。

例如，一个 repo 被命名`site`，我想要

```
user.name = admin
user.email =  admin@mysite.com 
```

对于我想要的所有其他回购

```
user.name = qwertymk
user.email = qwertymk@blah.com 
```

有没有办法在 git 中切换配置文件或类似的东西？

我在 Windows 上，所以我正在使用`msysgit`. `linux/mac`（尽管随意为其他人提供唯一的解决方案）

编辑：

我现在意识到我可以编写一个批处理脚本来交换`c:\users\<me>\.gitconfig`，但这似乎更像是一个 hack。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T00:53:11.780

Git 具有全局设置和每个存储库设置。

采用：

```
$ git config --global user.name "qwertymk"
$ git config --global user.email "qwertymk@blah.com" 
```

然后 cd 进入“站点”存储库并使用：

```
$ git config user.name "admin"
$ git config user.email "admin@mysite.com" 
```

# objective-c - 澄清 Cocoa 语法中的星号和下划线

> ID：10423666
> 
> 赞同：0
> 
> 时间：2012-05-03T00:41:42.677
> 
> 标签：objective-c, ios, macos, cocoa

我最近拿起了 BigNerdRanch 关于 Cocoa for Mac OSX 的书，我正在寻找一个关于星号和下划线使用的很好的解释，这些星号`*`和下划线`_`似乎在整个语言中的使用不一致。一些例子：

这些似乎在功能上是等效的：

```
NSString* myString;
NSString *myString; 
```

有时新变量会带有下划线，而其他变量则不会：

```
NSString _myString;
NSString myString; 
```

有时它会变得很疯狂：

```
NSString *myString;
NSString *_myString; 
```

我还看到了方法中带有星号的变化：

```
- (void)speechSynthesizer:(NSSpeechSynthesizer *)sender
            willSpeakWord:(NSRange)characterRange
                 ofString:(NSString *)string; 
```

那么星号或下划线的功能用途是什么，什么时候应该使用（或不使用），什么时候应该组合使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:01:15.553

指示一个指针，`*`所有 Objective-C 对象都是。（您在内存中传递指向这些对象的指针）。在基本级别上，这些是普通的 C 指针。如果我没记错的话，您可以通过 go 访问 Objective-C 对象中的一些数据`object->data`，就像使用指向 C 结构的指针一样。

这`_`是 Cocoa（和其他一些语言）的约定，意思是“应该被视为该对象私有的数据片段”。

Objective-C 有一个`@private`声明，但它也是该语言的一个相对较新的补充 - 如果您的代码超过 2 或 3 年（或针对更旧版本的 OS X），它可能不会使用`@private`

由于最初缺乏语言基础设施，`_`Cocoa 社区（经常）使用它来标记“嘿，你可能不应该直接设置或阅读这个，拜托”。

所以：

*   在处理 Objective-C 类时，您总是需要`*`跟随类名（如`NSString`），因为它们始终是指针。我对`NSString somestring`代码中的行感到困惑-要么会生成编译器警告，要么会在您尝试使用它时崩溃
*   `_`表示私有数据。你会在你的 Objective-C 类`NSString* _name`的一部分中做一些事情。如果您在类的方法中调用或操作该数据，`@interface`您将单独使用。`_name`

假设你创建了一个 Student 类：

```
// Student.h
@interface Student : NSObject {
  NSString* _name;

}

- (NSString*) name_as_caps;
@end

// Student.m

@implementation Student
- (NSString*) name_as_caps {
   return [_name uppercase];
} 
```

在这里，我们声明了一个带有“私有”数据成员的类：`_name`。由于某种原因，我们的`Student`类需要返回这个大写的，所以我们创建了一个方法来做到这一点，我们在其中使用`_name`和调用该`uppercase`方法。

我们需要在这里多次引用类型（或类名）或_name：一次，声明变量。因为`name_as_caps`我们需要说：`this method returns a pointer to an NSString object`，因此我们使用了`NSString *`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T00:35:34.667

作为 Ryan 答案的附录，当您看到类似

```
-(void)speechSynthesizer:(NSSpeechSynthesizer *)sender willSpeakWord:(NSRange)character
RangeofString:(NSString *)string; 
```

诸如`(NSSpeechSynthesizer *)sender`仅说明参数的类型之类的东西-在这种情况下是 NSSpeechSynthesizer*

# google-chrome-extension - 单击时复制图像 URL 的 Chrome 扩展程序

> ID：10423670
> 
> 赞同：2
> 
> 时间：2012-05-03T00:42:09.617
> 
> 标签：google-chrome-extension

我是制作 Chrome 扩展程序的新手，并且已经完成了简单的教程，但我无法找到我需要的东西。我希望扩展程序允许用户在网页上选择图像，然后将该图像的 URL 复制到扩展程序中。谁能帮我吗？我敢肯定，如果我看到一个示例，我会更好地掌握扩展如何与页面交互。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T04:50:57.940

根据我对您的问题的理解，我想说您想创建一个[上下文菜单](http://code.google.com/chrome/extensions/contextMenus.html)项，当您右键单击图像时会显示该菜单项。例如，在您的后台脚本中，使用：

```
chrome.contextMenus.create({
    title: "Use URL of image somehow",
    contexts:["image"],
    onclick: function(info) {
        handleImageURL(info.srcUrl);
    }
});

function handleImageURL(url) {
    // now do something with the URL string in the background page
} 
```

这将添加一个显示在所有页面上的上下文菜单项，但仅当您右键单击图像时。当用户选择它时，`onclick`菜单项的处理程序`handleImageURL`以图像的 URL 作为参数触发。可以以任何您喜欢的方式处理 URL，例如，保存在`localStorage`列表中，通过 Ajax 发送到服务器，或[将消息传递](http://code.google.com/chrome/extensions/messaging.html)到当前选项卡中的侦听[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)。

**编辑与替代：**

您可能希望将[内容脚本](https://code.google.com/chrome/extensions/content_scripts.html)注入每个页面。该脚本可以在加载时将事件侦听器绑定到每个图像元素：

```
// in my_content_script.js...
var imgs = document.getElementsByTagName("img");
for(var i = 0, i < imgs.length; ++i) {
    imgs[i].addEventListener("click", function() {
        alert(this.src);
        // do things with the image URL, this.src
    });
} 
```

要将其注入 的所有子域`example.com`，您的清单将包括：

```
...
"content_scripts": {
    "matches":["*://*.example.com/*"],
    "scripts":["my_content_script.js"]
},
... 
```

请注意，此纯 JS 解决方案不会将侦听器附加到加载时间后动态添加的图像。要使用 jQuery 在您的内容脚本中执行此操作，请使用：

```
$(document).on("click", " img", function() {
    alert(this.src);
}); 
```

并将您的 jQuery 文件名添加到`scripts`清单中的数组中，位于`my_content_script.js`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:15:12.433

Based on this [Google Chrome Extension sample](http://code.google.com/chrome/extensions/samples.html#9e4fd06300ee2b3a171e1f30d1b70f8f10152c2b):

```
var images = [].slice.apply(document.getElementsByTagName('img'));
var imageURLs = images.map(function(image) {
  return image.src;
});
chrome.extension.sendRequest(images); 
```

For a more detailed example (e.g. how to handle the request), you can check out this extension I wrote called [Image Downloader](https://github.com/vdsabev/image-downloader)

# salesforce - 在代码行中，“典型”Salesforce 安装/配置代码库有多大？

> ID：10423674
> 
> 赞同：0
> 
> 时间：2012-05-03T00:42:34.047
> 
> 标签：salesforce

我知道“代码行”可能不是一个完全准确的衡量标准，因为许多 Salesforce 配置可能是通过 gui 完成的。尽管如此，为了争论，我们假设在 gui 中手动填写的每个配置字段就像一行代码，或者让我们想象配置完全在源代码中完成，如果 Force 平台允许的话。

那么，典型的“专业”或“企业”级 Salesforce 安装代码库有多大？它像1K线吗？10K 行？那里有很多 100K 甚至更多的案例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:37:44.157

你很难得到有意义的答案。举个例子，我的一个客户是 ISP，我们已经在他们的企业实例上工作了 5 年，我们有一个大约 600KB 的代码库（+测试代码以满足 75% 的要求），有超过 100 个类和甚至更多页面、大约 20 个自定义选项卡、30 个自定义对象和工厂对象上的 150 个自定义字段，所有这些都辅之以在管理自定义方面完成的大量工作。相比之下，他们在另一个地区经营相同业务的姊妹公司有自己的实例，没有一行代码，但他们仅将其用于机会跟踪，并从不同的（传统）系统进行配置、操作、案例管理和其他工作.

总体平均统计数据是销售人员只知道的，他们似乎没有分享这些信息。无论哪种方式，您都应该试用您想要的任何实例，并查看您的业务需求方面缺少什么并相应地计划。

# c++ - 您可以使用 Qt foreach 循环遍历每个可能的枚举值吗？

> ID：10423675
> 
> 赞同：12
> 
> 时间：2012-05-03T00:42:34.480
> 
> 标签：c++, qt, enums, foreach

给定一个枚举：

```
enum AnEnum { Foo, Bar, Bash, Baz }; 
```

您可以使用 Qt 的 foreach 循环遍历这些枚举中的每一个吗？

这段代码无法编译（不是我期望的......）

```
foreach(AnEnum enum, AnEnum)
{
// do nothing
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T01:36:33.653

如果它被移动到 QMetaEnum 中，那么您可以像这样迭代它：

```
QMetaEnum e = ...;
for (int i = 0; i < e.keyCount(); i++)
{
    const char* s = e.key(i); // enum name as string
    int v = e.value(i); // enum index
    ...
} 
```

[http://qt-project.org/doc/qt-4.8/qmetaenum.html](http://qt-project.org/doc/qt-4.8/qmetaenum.html)

使用作为 QMetaEnum 的 QNetworkReply 的示例：

```
QNetworkReply::NetworkError error;
error = fetchStuff();
if (error != QNetworkReply::NoError) {
    QString errorValue;
    QMetaObject meta = QNetworkReply::staticMetaObject;
    for (int i=0; i < meta.enumeratorCount(); ++i) {
        QMetaEnum m = meta.enumerator(i);
        if (m.name() == QLatin1String("NetworkError")) {
            errorValue = QLatin1String(m.valueToKey(error));
            break;
        }
    }
    QMessageBox box(QMessageBox::Information, "Failed to fetch",
                "Fetching stuff failed with error '%1`").arg(errorValue),
                QMessageBox::Ok);
    box.exec();
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:03:44.353

`foreach`在 Qt 中绝对只适用于 Qt 容器。[此处](http://qt-project.org/doc/qt-4.8/qtglobal.html#foreach)的文档中有说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-14T08:44:23.160

检索 QMetaEnum 对象有一个更简单的版本（Qt 5.5 及更高版本）：

```
 QMetaEnum e = QMetaEnum::fromType<QLocale::Country>();
    QStringList countryList;

    for (int k = 0; k < e.keyCount(); k++)
    {
        QLocale::Country country = (QLocale::Country) e.value(k);
        countryList.push_back(QLocale::countryToString(country));
    } 
```

# javascript - Mocha JS 测试页面上的奇怪片段？

> ID：10423678
> 
> 赞同：0
> 
> 时间：2012-05-03T00:42:52.940
> 
> 标签：javascript, google-chrome, tdd, mocha.js

我正在为我的 JS 测试尝试[mocha](https://github.com/visionmedia/mocha)，我得到了这个奇怪的片段：

![奇怪的片段](../Images/4d1e61f74ca667ea8ac93490820f70db.png)

奇怪的是，我正在关注的[教程在他的屏幕截图中也有这个片段，但作者没有提到任何错误。](http://www.joeytrapp.com/posts/mocha-js-tests-from-command-line)我正在使用 Chrome 18。我似乎也无法在网络检查器的任何地方找到它......

有谁知道这是怎么回事？使我抓狂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:45:57.437

看起来一些 UTF-8 被解释为另一个字符集（可能是 Latin-1）。尝试将浏览器的编码设置为 UTF-8——你看到什么更有用的东西了吗？（可能是复选标记：✔）

**编辑**：是的，它是“✔”的 UTF-8 编码，解释为 Latin-1。您可能需要`<meta charset="utf8">`在`<head>`.

# java - 使用 Java 和 sql 数据库动态创建搜索条件和结果

> ID：10423683
> 
> 赞同：0
> 
> 时间：2012-05-03T00:43:16.883
> 
> 标签：java, sql, performance, hibernate, search

我目前正在使用由 Hibernate 支持的基于 Java 的 Web 应用程序 (JSF)，该应用程序具有针对不同区域的各种不同搜索页面。

搜索页面包含搜索字段部分，用户可以自定义他们感兴趣的搜索字段。可以添加一系列不同的搜索字段类型（精确文本、开头、包含、多选列表框, 逗号分隔值等等）。搜索字段不需要填写并被忽略，而其他一些搜索字段需要不同的搜索字段才能具有此搜索字段的值才能工作。

我们目前使用每个区域的自定义搜索对象，该对象特定于该区域，并具有硬编码的 getter 和 setter 搜索字段。

```
public interface Search {
  SearchFieldType getSearchPropertyOne();
  void setSearchPropertyOne(SearchFieldType searchPropertyOne);

  AnotherSearchFieldType getSearchPropertyTwo();
  void setSearchPropertyTwo(AnotherSearchFieldType searchPropertyTwo);

  ...
} 
```

在此示例中，SearchFieldType 和 AnotherSearchFieldType 表示不同的搜索类型，例如 TextSearchField 或 NumericSearchField，它们分别具有搜索类型（以、包含等）或（大于、等于、小于等）和搜索值他们可以输入或留空（忽略搜索字段）。

我们使用这个搜索对象来准备一个 Criteria 对象

搜索结果部分是一个表格，用户也可以自定义它以仅包含他们感兴趣的结果对象的列。大多数列可以按升序或降序排列。

我们在每个结果的 Result 对象中支持我们的结果，该对象还对可以显示的列进行硬编码。该表由 hibernate 注释支持，但我们正在尝试使用平面数据，而不是允许其他支持 hibernate 的对象来最小化延迟连接数据。

```
@Entity(table = "result_view")
public interface Result {
  @Column(name = "result_field_one")
  Long getResultFieldOne();
  void setResultFieldOne(Long resultFieldOne);

  @Column(name = "result_field_two")
  String getResultFieldTwo();
  void setResultFieldTwo(String resultFieldTwo);

  ...
} 
```

搜索页面由我们数据库中的视图支持，该视图处理每个可能结果所需的所有表的连接。这个视图已经变得非常庞大，我们每次搜索都会对性能造成巨大影响，即使用户只想在一个字段上搜索并显示几列，因为我们有超过 30 个搜索字段选项和 30 个不同的列可以显示这一切都得到了一种观点的支持。

最重要的是，用户一直请求新的搜索字段和列，他们希望将其添加到页面中。我们最终不得不更改搜索和结果对象以及支持视图来进行这些更改。

我们正试图调查此事并寻找替代方案。提到的一种方法是创建不同的视图，我们根据在结果表中搜索或显示的字段动态选择这些视图。不同的视图可能会加入不同的列，我们会为任何给定的搜索挑选我们需要的视图。

我试图以不同的方式思考这个问题。我认为最好不要使用视图，而是根据请求的搜索字段和结果列动态连接我们需要的表。我还认为搜索和结果对象不应该包含硬编码的 getter/setter，而应该是搜索字段的集合和结果列的集合（或映射）。我还没有完全充实我的想法。

hibernate 仍然是这个问题的有效解决方案吗？我不想创建在休眠条件中使用的 Result 对象，因为它们的结果列可能不同。搜索字段和/或结果列都可能需要连接表。

有没有可以帮助解决问题的框架？我一直在寻找一些东西，我找到的最接近的是SqlBuilder。

有没有其他人动态地解决了类似的问题？

如果解决方案已经存在，我宁愿不要重新发明轮子。

我很抱歉这最终变成了一堵文字墙。这是我的第一篇 stackoverflow 帖子，我想确保我彻底定义了我的问题。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:09:51.370

我不完全理解这个问题。但是 JPA Criteria API 看起来非常灵活，可以用来构建基于用户提交的过滤条件的查询。

# codeigniter - 测试版邀请码 + codeigniter

> ID：10423687
> 
> 赞同：0
> 
> 时间：2012-05-03T00:44:15.993
> 
> 标签：codeigniter, codeigniter-2, beta-testing

我想限制 beta 用户访问我的应用程序（在 Codeigniter 中）。想知道是否有人知道可以帮助我入门的库、火花或其他选项。

如果那里已经有东西，宁愿不要重新发明轮子。我在谷歌和其他资源上的搜索没有产生任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:32:32.437

只需使用任何身份验证库 - 并在注册页面上添加一个名为“Beta 代码”的字段。如果“测试代码 = 您的秘密测试代码”，则允许注册。如果代码不正确，则不允许他们注册。

当您准备好上线时，您可以进一步扩展，并将其变成“促销代码”，如果代码 = X，则应用 10% 的折扣、额外的空闲时间等（如果这是上线时的付费服务）。

# cakephp - cakephp2中的元素和获取

> ID：10423690
> 
> 赞同：0
> 
> 时间：2012-05-03T00:44:59.257
> 
> 标签：cakephp, cakephp-2.0

cakephp2中的'fetch'和'element'有什么区别？我有这个代码

```
 echo $this->fetch('meta'); 
```

在 default.ctp 中并且不知道它为什么在那里。我不能只使用 $this->element('meta') 并且必须在元素文件夹中创建 meta.ctp 。

还有这段代码

```
echo $this->fetch('content'); 
```

在内容部分。有人可以解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:37:49.867

`fetch`将获取数据并在那里渲染。

```
 echo $this->fetch('meta'); 
```

将获取您在页面中定义的元数据。

```
 echo $this->Html->meta(
        'keywords',
        'enter any meta keyword here'
    );
    // Output
    <meta name="keywords" content="enter any meta keyword here" />

    echo $this->Html->meta(
        'description',
        'enter any meta description here'
    );
    // Output
    <meta name="description" content="enter any meta description here" />` 
```

`echo $this->fetch('content');`

将呈现视图文件中定义的内容。

# iphone - 跨类型 NSData 发送时数据丢失

> ID：10423691
> 
> 赞同：0
> 
> 时间：2012-05-03T00:45:03.997
> 
> 标签：iphone, objective-c, encoding, nsdata, decoding

我目前正在实施我的游戏的网络层，我正在取得进展，但是我遇到了一些非常奇怪的事情，我希望有人能对此有所了解：

在发送我的数据之前，我将其编码为 NSData 类型（message.cards = [MovePlayer beginEncodeMyCards:myCards];），然后将其分配给指针（message.cards）

```
MessageMove message;
message.message.messageType = kMessageTypeMove;
/**/message.cards = [MovePlayer beginEncodeMyCards:myCards];/**/
NSData *data = [NSData dataWithBytes:&message length:sizeof(message)]; 
```

如果我在客户端进行所有解码，如下所示：

```
MessageMove *myMessage  = (MessageMove *) [data bytes];
/**/myCards = [MovePlayer beginDecodeMyCards:myMessage->cards cardArray:myCards];/**/ 
```

一切正常，我能够解码 myMessage->cards，但是当我在远程发送对象后尝试执行相同操作时，我可以看到正确的消息类型（kMessageTypeMove），但看不到卡片数据（myMessage->cards）。

如果有人可以请对此有所了解，我将不胜感激

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:44:24.723

**tl;博士，使用 NSCoding 序列化你的对象。**

您不能将指针发送到不同的进程，因为指针在另一端都是错误的。

让我们在发送机器上说，你有这个：

```
NSLog(@"cards: %p", message.cards);
//prints "cards: 0xDEADBEEF" 
```

这表示 NSArray* 对象的内存块从内存地址 0xDEADBEEF 开始。在这一点上这一切都是正确的。

现在，您将该`0xDEADBEEF`指针发送到另一台计算机。计算机获取指针，**但另一台计算机上的内存中`0xDEADBEEF`没有 NSArray**。那个记忆区域里可能有*任何东西*。您已经发送了一个指针，但实际上并没有发送任何数据。

长话短说，只`NSCoder`用于序列化，因为它非常好。

# android - 有没有办法改变 toast 的颜色和文本大小/颜色，但保留系统 toast 布局？

> ID：10423694
> 
> 赞同：2
> 
> 时间：2012-05-03T00:45:55.200
> 
> 标签：android, toast, android-xml

我知道我可以使用自定义 toast 布局轻松完成所有这些操作，但是在创建自定义布局时，我将不再使用系统的默认 toast 视图。

示例：在 Android 2.2 和 Android 4.0 中，Toast 看起来当然不同。如果我为我的 toast 创建一个自定义视图，那么它在两个版本中看起来完全一样，但我想要的是它保留它的......“Androidiness”，因为没有更好的词。基本上，有人知道默认的 toast XML 布局吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T00:54:17.830

这是 . 使用的默认布局`Toasts`。

**瞬态通知**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/toast_frame">

<TextView
    android:id="@android:id/message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:textAppearance="@style/TextAppearance.Small"
    android:textColor="@color/bright_foreground_dark"
    android:shadowColor="#BB000000"
    android:shadowRadius="2.75"/>
</LinearLayout> 
```

**这些是进入和退出动画**

**进入**

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
        android:interpolator="@interpolator/decelerate_quad"
        android:fromAlpha="0.0" android:toAlpha="1.0"
        android:duration="@android:integer/config_longAnimTime" /> 
```

**出口**

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
        android:interpolator="@interpolator/accelerate_quad" 
        android:fromAlpha="1.0" android:toAlpha="0.0"
        android:duration="@android:integer/config_longAnimTime" /> 
```

**toast_frame_holo.9**是用于背景的资源的名称。搜索 SDK 以查找所有尺寸。

[**这是完整的来源`Toasts`**](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/Toast.java)

如果您不确定其中任何一个，请在 SDK 中搜索所有资源，这就是我查看的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:33:55.547

在我的 ICS 设备上，由于连接丢失，我最近收到一条消息发送失败。它看起来像吐司，但字体大小不同，有两行长，有红色边框。它基本上说消息发送失败（或连接错误）。

这可能与您正在寻找的相似？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:59:36.080

我也想保留默认的 toast，但找到了解决方案，该解决方案向我展示了如何为所有系统创建单个 toast 布局。所以我创建了这个助手。我知道，这是一个 hack，但它对我来说很好。

在这里，我在文本前面的 toast 中添加了一个图像，而没有触及其原始外观。您可以在此处轻松修改文本颜色和大小。

也许有人可能对此代码片段感兴趣......

```
private static Toast makeImageToast(int imageResId, CharSequence text, int duration) {
    Toast toast = Toast.makeText(mContext, text, duration);

    View rootView = toast.getView();
    LinearLayout linearLayout = null;
    TextView messageTextView = null;

    // check (expected) toast layout
    if (rootView instanceof LinearLayout) {
        linearLayout = (LinearLayout) rootView;

        if (linearLayout.getChildCount() == 1) {
            View child = linearLayout.getChildAt(0);

            if (child instanceof TextView) {
                messageTextView = (TextView) child;
            }
        }
    }

    // cancel modification because toast layout is not what we expected
    if (linearLayout == null || messageTextView == null) {
        // failed to create image toast layout, using usual toast
        return toast;
    }

    ViewGroup.LayoutParams textParams = messageTextView.getLayoutParams();
    ((LinearLayout.LayoutParams) textParams).gravity = Gravity.CENTER_VERTICAL;

    // convert dip dimension
    int imageSize = dipToPixel(25);
    int imageMargin = dipToPixel(15);

    // setup image view layout parameters
    LinearLayout.LayoutParams imageParams = new LinearLayout.LayoutParams(imageSize, imageSize);
    imageParams.setMargins(0, 0, imageMargin, 0);
    imageParams.gravity = Gravity.CENTER_VERTICAL;

    // setup image view
    ImageView imageView = new ImageView(mContext);
    imageView.setId(TOAST_IMAGE_ID);
    imageView.setImageResource(imageResId);
    imageView.setLayoutParams(imageParams);

    // modify root layout
    linearLayout.setOrientation(LinearLayout.HORIZONTAL);
    linearLayout.addView(imageView, 0);

    return toast;
}

public static int dipToPixel(float dip) {
    return (int) (dip * mContext.getResources().getDisplayMetrics().density + 0.5f);
} 
```

# objective-c - 为什么我的 UITableView 没有更新？

> ID：10423698
> 
> 赞同：0
> 
> 时间：2012-05-03T00:46:26.417
> 
> 标签：objective-c, ios

为什么我的 UITableView 没有更新？这是我尝试更新它的方式。

```
- (void)viewWillAppear:(BOOL)animated
{
    NSArray* arrValues = [self.defaults objectForKey:@"values"];
    [self.tableScores insertRowsAtIndexPaths:arrValues withRowAnimation:UITableViewRowAnimationNone];
} 
```

`arrValues`现在是一个 NSNumbers 数组。我确信它不是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T00:54:45.513

呼入`[tableScores reloadData];`_**`- (void)viewWillAppear:(BOOL)animated`**

## 更新 1

此外，您需要在标题中定义**arrValues**。每次 viewWillAppear 时，您都在创建一个新实例，但您将无法在控制器的其余部分中使用它。这是除了断点之外你什么都看不到的主要原因。

## 更新 2

根据您在下面的评论，您尚未实现`cellForRowAtIndexPath:`单元格的创建方式。下面是一个示例，但您可能想在网上搜索示例项目，因为这个**UITableView 的 101**。当涉及到数组和 tableViews 时，你还需要学习很多东西。

## 例子`cellForRowAtIndexPath:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"FriendCellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [arrValues objectAtIndex:indexPath.row];

    return cell;
} 
```

# android - 使用 ListView 时出错，需要 id 属性 `android.r.id.list`

> ID：10423702
> 
> 赞同：0
> 
> 时间：2012-05-03T00:46:47.177
> 
> 标签：android, android-listview

我有我`main.xml`这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

  <ListView android:id="@+id/list"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      />

</LinearLayout> 
```

和`row.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <ImageView 
        android:id="@+id/icon"
        android:padding="2dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/accept"
        />
    <TextView 
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="40sp"
        />
</LinearLayout> 
```

我的程序是这样做的（我从书中举了一个例子）：

```
public class FancyListActivity extends ListActivity {

    private TextView selection;
    private static final String[] items= {"lorem", "ipsum","dolor","sit", "amet",
        "consectetuer", "adipiscing", "elit", "morbi", "vel", "ligula", "vitae", "arcu",
        "aliquet", "mollis", "etiam", "vel", "erat", "placerat", "ante",
        "porttitor","sodales","pellentesque","augue", "purus"};
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.row);
        setListAdapter(new ArrayAdapter<String>(this, R.layout.row, R.id.label, items));
        selection= (TextView)findViewById(R.id.label);
    }

    public void onListItemClick(ListView parent, View v, int position, long id){
        selection.setText(items[position]);
    }
} 
```

但现在我得到这个错误：

```
Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

如果我有我的 android:id="@+id/list"，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:51:31.740

您正在使用 ListActivity。根据 Google 文档中的说明，您*需要在**main.xml*文件中指定您的列表，如下所示：

`<ListView android:id="@android:id/list" ...`

而且，您应该调用而不是像现在那样`setContentView(R.layout.main);`将您的活动内容设置到您的文件中！`row.xml`

最后，在这些更改之后，这两行将存在问题：

```
selection= (TextView)findViewById(R.id.label); 
```

...和：

```
selection.setText(items[position]); 
```

将它们注释掉，您的代码将再次起作用。至于这个 TextView 的事情，我不确定你首先要实现什么，但如果目的是以某种方式在放置在列表顶部/底部的 TextView 对象中显示所选列表项的内容，那么这个TextView 应该放在您的*main.xml*文件中。

# c# - 在表单加载时和表单关闭之前执行代码

> ID：10423703
> 
> 赞同：0
> 
> 时间：2012-05-03T00:46:55.510
> 
> 标签：c#, winforms, events

我目前正在开发一个使用 Windows 窗体 GUI 的应用程序。应用程序的主要工作将在另一个线程上执行 - 但它可能取决于表单的状态。
因此，在创建线程之前，我必须确保表单已**完全**加载。另外，我需要确保线程在表单开始关闭**之前终止。**

此问题的可能解决方案可能是覆盖`OnShown`和`OnFormClosing`方法。只有在加载了表单的所有资产后才真正调用
该方法吗？`OnShow`那`OnFormClosing`-我可以确定在此方法中执行的任何代码都将在表单开始关闭/处置**之前执行吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:53:04.140

Windows 窗体事件可能很棘手，并且它们触发的顺序不可靠。例如，'Shown' 事件仅在 Form 首次显示时触发一次，但就在昨天，我找到了一种通过在正确的时间操作 Form.Visible 标志来完全防止该事件触发的方法。

因此，您需要非常具体地了解您的需求。例如 - 当你说“完全加载”时，你是什么意思？控件已创建，表单可见，表单构造函数已执行完毕？

同样，FormClosing 事件可能会被主 aUI 线程中的未处理异常所规避，这会导致在没有触发事件的情况下删除 Form。

我建议永远不要对这些事件做出任何假设。使您的工作线程能够处理表单状态不可用或未准备好。在不知道您的确切要求的情况下，很难更具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T00:53:07.927

我建议您阅读 MSDN 上发布的 WinForms 事件排序：

[http://msdn.microsoft.com/en-us/library/86faxx0d.aspx](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T17:06:18.113

您是否尝试过在主 WinForm 的构造函数上使用 InitializeComponent 并使用**OnLoad**（在加载所有内容时调用）？

# java - 在java中将String转换为double时出现NullpointerException

> ID：10423704
> 
> 赞同：0
> 
> 时间：2012-05-03T00:47:01.487
> 
> 标签：java, string, nullpointerexception, double

我有一个 html 表单，其中包含`String`我需要将其转换为`double`. 然后将其存储在 MS Access 数据库中。我尝试使用：

```
Double d = Double.parseDouble(String); 
```

但它抛出了 NullpointerException。谁能解释为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:49:16.153

查看[API](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)会发现`Double.parseDouble`如果`NullPointerException`参数为`null`.

# node.js - 如何在 Express 中构建 app.configure

> ID：10423706
> 
> 赞同：7
> 
> 时间：2012-05-03T00:47:24.310
> 
> 标签：node.js, coffeescript, express

我正在使用 Express 3.0 alpha 构建应用程序，但对应用程序配置结构有点困惑

```
app.configure ->
  app.set "views", __dirname + "/views"
  app.set "view engine", "jade"
  app.use express.bodyParser()
  app.use express.methodOverride()

app.configure "development", ->
  app.use express.logger("dev")

app.configure "production", ->
  app.use express.logger() 
```

1.  第一个是`app.configure, ->`必需的吗？我一直在浏览其他人的应用程序，我是否使用它似乎并不重要。

2.  订购如何工作`app.configure, ->`？正如我在其他应用程序中看到的那样，将特定环境（开发和生产）放在第一个之后似乎是正确的，`app.configure, ->`但它似乎不适用于我的应用程序（即记录器根本不会在我的控制台中打印任何内容）。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T00:50:45.323

它们只是按顺序执行。第一个将在所有环境中调用，所以它是否被包裹并不重要`configure()`；它看起来更好。但是，如果您查看 Express 问题队列，它们可能会在未来消失，因为它们实际上只是美化了*if*语句。

# iphone - 为什么我不能使用 NSDateFormatter dateFromString 从 NSString 中获取年份？

> ID：10423707
> 
> 赞同：0
> 
> 时间：2012-05-03T00:47:33.750
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

这是我的代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy"];

if ([dateFormatter dateFromString:@"11/09/2010"])
{
   //PASS
}
else
{
   //FAIL
} 
```

为什么每次都进入FAIL部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:55:14.027

尝试像这样设置日期格式：

```
[dateFormatter setDateFormat:@"dd/MM/yyyy"]; 
```

或者反过来，取决于哪个字段是天，哪个是月。

# telnet - Telnet 阅读器将在 1448 个字符后拆分输入

> ID：10423710
> 
> 赞同：0
> 
> 时间：2012-05-03T00:47:52.347
> 
> 标签：telnet

我正在编写一个 java 小程序，它将打印 telnet 客户端发送到连接的内容。不幸的是，客户端拆分为 1448 个字符。

被证明是一个问题的代码：

```
char[] l = new char[5000];
Reader r = new BufferedReader(new InputStreamReader(s.getInputStream(), "US-ASCII"));
int i = r.read(line); 
```

我无法更改 telnet 客户端读取内容的来源，所以我希望这是上述三行的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T01:37:34.477

您期望从 TCP 层获取 telnet 协议数据单元。它只是不那样工作。您只能从实现 telnet 协议的代码中提取 telnet 协议数据单元。TCP 层数据字节的分段是任意的，高层负责重建协议数据单元。

您看到的行为是正常的，除非您正在诊断性能问题，否则您应该完全忽略在 TCP 级别拆分数据的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:03:54.790

您一次只能获得 1448 个字节的原因是底层协议将传输划分为数据包。通常，此大小约为 1500，并且有一些字节用于记账，因此您会留下 1448 字节的块。协议不保证如果您在“单次”中发送 X 字节，客户端将在单次中接收 X 字节（例如，对接收方法的一次调用）。

正如在上面的评论中已经提到的，由接收程序以对客户端有意义的方式重新组装这些数据包。通常，您执行接收并将接收到的数据附加到某个缓冲区，直到找到商定的“数据块结束”标记（例如换行符、换行符、回车符、某些符号不会出现在数据等中）。

如果服务器是真正的 telnet 服务器——它的输出可能是基于行的（例如，单个数据块以“行尾”结束：回车和换行字符）。RFC 854 可能会有所帮助——它详细说明了最初指定的 Telnet 协议。

# asp.net - 为 ASP.NET Web API 项目编写测试

> ID：10423712
> 
> 赞同：0
> 
> 时间：2012-05-03T00:48:04.170
> 
> 标签：asp.net, web-services, unit-testing, asp.net-web-api

我注意到在[ASP.NET Web API 入门教程](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)之一中，添加测试项目的选项被禁用，我不确定为什么会这样。我会像任何其他 MVC 项目一样测试 ASP.NET Web API 项目吗？

我正在制作原型，我很懒惰，只是使用 MVC 项目并从一些控制器返回 JSON 来模拟 Web 服务。随着事情开始变得更加严重，我需要开始“更正确地”做事。

那么，我应该如何为 ASP.NET Web API 项目编写测试，更广泛地说，我该如何自动化实际 Web 服务的测试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:04:06.837

我已经这样做了：

```
 [TestFixture]
    public class CountriesApiTests
    {
        private const string BaseEndPoint = "http://x/api/countries";

        [Test]
            public void Test_CountryApiController_ReturnsListOfEntities_ForGet()
            {
                var repoMock = new Mock<ISimpleRepo<Country>>();

                ObjectFactory.Initialize(x => x.For<ISimpleRepo<Country>>().Use(repoMock.Object));
                repoMock.Setup(x => x.GetAll()).Returns(new List<Country>
                                                                           {
                                                                               new Country {Name = "UK"},
                                                                               new Country {Name = "US"}
                                                                           }.AsQueryable);

                var client = new TestClient(BaseEndPoint);
                var countries = client.Get<IEnumerable<CountryModel>>();
                Assert.That(countries.Count(), Is.EqualTo(2));
            }
    } 
```

测试客户端代码：

```
public class TestClient
    {
        protected readonly HttpClient _httpClient;
        protected readonly string _endpoint;

        public HttpStatusCode LastStatusCode { get; set; }

        public TestClient(string endpoint)
        {
            _endpoint = endpoint;

            var config = new HttpConfiguration();
            config.ServiceResolver.SetResolver(new WebApiDependencyResolver());
            config.Routes.MapHttpRoute("default", "api/{controller}/{id}", new { id = RouteParameter.Optional });                                

            _httpClient = new HttpClient(new HttpServer(config));            
        }       

        public T Get<T>() where T : class
        {
            var response = _httpClient.GetAsync(_endpoint).Result;
            response.EnsureSuccessStatusCode(); // need this to throw exception to unit test

            return response.Content.ReadAsAsync<T>().Result;
        }
    } 
```

# ruby-on-rails - SELECT DISTINCT 的 PG 错误，尝试在 Heroku 上查看时，ORDER BY 表达式必须出现在选择列表中

> ID：10423713
> 
> 赞同：18
> 
> 时间：2012-05-03T00:48:19.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku, acts-as-taggable-on

在我为我的项目添加更多关系后，我收到了这个跟随错误。在 localhost 上，页面显示得非常好。但是，尝试在 heroku 上查看时出现错误。

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  for SELECT DISTINCT, ORDER BY expressions must appear in select list 
```

这是我的 traveldeal 控制器：

```
 def show
    @traveldeal = @commentable = Traveldeal.find(params[:id])
    @comments = Comment.all
    @title = @traveldeal.title
    @eventdeals = Eventdeal.tagged_with(@traveldeal.location_tag_list, :any => true, :order => 'RANDOM()', :limit => 3)
  end 
```

traveldeal/show.html

```
<% unless @eventdeals.blank? %>

  <h1>Events in the area:</h1>

  <% @eventdeals.each do |eventdeal| %>
    <%= link_to eventdeal do %>
      <!-- content -->
    <% end %>
  <% end %>

<% end %> 
```

Heroku 日志

`SELECT DISTINCT eventdeals.* FROM "eventdeals" JOIN taggings event_taggings_e9f0e2e ON event_taggings_e9f0e2e.taggable_id = eventdeals.id AND event_taggings_e9f0e2e.taggable_type = 'Eventdeal' WHERE (event_taggings_e9f0e2e.tag_id = 1 OR event_taggings_e9f0e2e.tag_id = 3 OR event_taggings_e9f0e2e.tag_id = 4 OR event_taggings_e9f0e2e.tag_id = 5) ORDER BY RANDOM()):`

此代码有效，因此我只显示了 3 个与位置匹配的随机事件交易（通过 act-as-taggable-on）与 traveldeal。

但是，在我添加了一个关系（与 eventdeals 但与 traveldeals 无关）后，我开始收到 pg 错误。

以下是添加的关系：

行程.rb

```
class Trip < ActiveRecord::Base
  has_many :eventdealtrips, :dependent => :destroy
  has_many :eventdeals, :through => :eventdealtrips
end 
```

eventdeal.rb

```
class Eventdeal < ActiveRecord::Base
  has_many :eventdealtrips
  has_many :trips, :through => :eventdealtrips, :dependent => :destroy
end 
```

eventdealtrip.rb

```
class Eventdealtrip < ActiveRecord::Base
  belongs_to :eventdeal
  belongs_to :trip
end 
```

关于如何仍然获得 3 个事件交易的随机数组的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T16:24:40.963

我遇到了这个问题，并通过`order`在菊花链的末端运行来解决它。

# java - 将 Java Initial 和 Maximum memory 设置为相同值的性能

> ID：10423715
> 
> 赞同：3
> 
> 时间：2012-05-03T00:48:43.797
> 
> 标签：java, memory, memory-management

在我的工作环境中，我们有许多在 Windows Server 2008 硬件上运行的企业 Java 应用程序。一位外部顾问一直在审查我们的 Java 应用程序的性能，并建议我们将初始内存值和最大内存值更改为相同。

所以，目前，我们正在运行一个初始内存为 1GB，最大内存为 2GB 的应用程序。他们的建议是将初始内存和最大内存都更改为 2GB。

他们的推理是2倍的......

1.  通过将初始和最大值分配为 2GB，当 Java 应用程序启动时，它将直接获取 2GB 内存块。这可以防止任何其他应用程序访问此内存块，因此 Java 应用程序将始终可以使用此内存。这与目前的情况相反，它只会获得 1GB 的初始块，这意味着其他应用程序可能会消耗服务器上剩余的可用内存，而企业 Java 应用程序将无法增长到 2GB 内存最大。
2.  每次 Java 需要在初始大小和最大大小之间分配内存时，都会对性能造成很小的影响。这是因为它需要转到 Windows，分配所需大小的新块，然后使用它。每次在初始大小和最大大小之间需要内存时，都会发生这种性能损失。因此，将它们都设置为相同的值意味着消除了这种性能影响。

我认为他们的第一点从安全角度来看是有效的，因为这意味着无论其他应用程序在服务器上做什么，Java 应用程序都将始终可以访问最大内存。但是，我也认为这可能是一个负面因素，因为这意味着有一大块内存不能被其他应用程序使用，如果他们需要它，这可能会导致一般的服务器性能问题。

我认为他们在第 2 点中讨论的性能影响可能微不足道，因此不值得担心。如果他们关心性能，他们最好调整诸如 Java 的垃圾收集方面的东西，而不是担心分配内存块对性能的微小影响。

谁能告诉我他们将初始内存和最大内存分配给相同值的请求是否有真正的好处。是否有任何一般性建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T00:58:49.673

IMO，即使是第一个建议也不那么重要。现代操作系统具有虚拟内存。因此，即使您为 Java 进程分配 2GB 内存，也不能保证这些 2GB 内存将始终驻留在物理内存中。如果同一个盒子里有其他应用程序消耗大量内存，那么无论何时分配内存，性能都会很差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:06:05.420

将它们设置为相同会增加可预测性。如果您在 GC 决定需要更多内存时不将它们设置为相同，则需要时间来分配和随机分配对象以腾出空间。这是对 GC 活动的补充。当这种情况发生时，请求会变慢，您的吞吐量会受到影响。在 2GB 堆上，每次需要更多内存时，您可能会分配大约 400mb 的内存，而每次不需要内存时会删除 100mb。增加堆大小，这些数字就会增加。堆将在您的值之间不断变化，它不像它只是分配并保留该内存。

对于关于确保操作系统始终为您提供可用内存的论点#1，我认为这是一个有争议的问题。如果您的服务器内存不足，并且您已经限制机器运行该软件，那么您在错误的服务器上运行它。获取您需要的硬件并为其提供发展空间。如果您说您的应用程序可以使用 2GB，那么我个人会在具有 4GB 或更多免费空间的机器上使用它。如果我的客户/用户群增长，则可以自由增加堆以容纳新用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:16:20.213

第二点非常有效。抢内存是一个缓慢的 IO 操作。尤其是大块。但是，2GB 是一个大块。你在什么硬件上运行这个？如果它有相当多的内存，那将是一个好主意。

但是，假设您的计算机实际上并没有很多内存，分配 2GB 块可能是危险和贪婪的。相反，您应该创建一个对象池方案。请记住，垃圾收集器会占用内存并做自己的内存池，但在 2GB 的情况下，很可能会向操作系统释放一些内存。

做一些分析，你会惊讶于不浪费内存和一直分配内存可以节省多少时间。垃圾收集器会保护你免受很多垃圾的影响，但对于 2GB 的块来说并没有那么多。

最终，如果可能的话……您应该考虑使用 LESS 内存。为了获得真正的性能，请考虑将缓冲区和数组保留在缓存中。这有点复杂，但它可以产生巨大的结果。

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T05:34:32.710

当您启动 JVM 时，无论您是否设置初始大小，它都会将最大堆大小作为一个连续块来获取。它的使用量取决于使用情况。例如，初始大小为 2G 的 ..ga hello world 不会使用 2G。初始大小所做的不是尝试限制使用，直到达到初始大小。（但如果实际上不需要，它不会为其分配主内存）

设置初始值可以提高启动时间。我倾向于将初始大小设置为 JVM 增长到的大小（或者如果启动时间很短则不打扰）

真正的影响是，较小的堆大小可能会导致临时对象移入永久空间，清理起来代价高昂。较大的堆大小可能意味着临时对象在被多次复制并使用完整 gc 删除之前被丢弃。

# asp.net-mvc - 实体框架不会更新从数据库中所做的数据值更改

> ID：10423721
> 
> 赞同：1
> 
> 时间：2012-05-03T00:49:44.560
> 
> 标签：asp.net-mvc, entity-framework

我不知道该怎么说这个。我有一个 ASP.NET MVC 3 Web 应用程序，它带有一个非常标准的 EF 4.1 代码，首先使用现有的数据库（非自动生成）存储库模式。Web 应用程序与之交谈的数据服务下有一个上下文。

我遇到的问题是：假设我有一个带有整数列的数据库表。该值为10。如果我进入数据库本身并在表中输入25，无论我在浏览器上点击刷新，关闭浏览器并重新打开它，清除浏览器历史记录等多少次，它仍然保留该值10\. 我必须重新发布该网站。

为什么这样做？我在这里责备正确吗？这是一个EF问题吗？ASP.NET 问题？服务器问题？...我不知道在哪里调查这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:58:11.920

是的，我在自己的应用程序中遇到了这个问题。

Entity Framework 跟踪的“实体”（对象实例）缓存在内存中，并且在您重新查询数据库时不会更新，以防覆盖它们会破坏您对缓存版本所做的任何更改。

您可以通过强制 EF 覆盖现有值来绕过它，但请注意，这*将*覆盖您已更改的任何内容，因此只有在您知道已先保存任何待处理的更改时才这样做。

我编写了这个扩展方法来完成这项工作：

```
public static class DbSetExtensions
{
    public static System.Data.Objects.ObjectSet<T> Uncached<T>(this IObjectContextAdapter context)
        where T : class
    {
        var set = context.ObjectContext.CreateObjectSet<T>();
        set.MergeOption = System.Data.Objects.MergeOption.OverwriteChanges;
        return set;
    }
} 
```

所以使用它，我可以说：

```
var orders = myDbContext.Uncached<Order>().Where(...); 
```

...并且该`orders`集合将包含来自数据库的新订单，覆盖`Order`先前查询的任何对象的属性。

# jquery - jquery replaceWith 变量返回未定义

> ID：10423724
> 
> 赞同：0
> 
> 时间：2012-05-03T00:50:19.757
> 
> 标签：jquery

```
var item='<input class="item" type="text" value="1"/>';
$('#div1').replaceWith(item);
var val1 = $('.item').val(); 
```

这返回未定义。我认为这与替换 DOM 元素有关，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:53:32.953

似乎对我有用：

[http://jsfiddle.net/YMBeX/](http://jsfiddle.net/YMBeX/)

我怀疑您的代码中的其他地方有问题。

# django - 使用Django+Redis+Socket.io搭建聊天室，从何入手？

> ID：10423726
> 
> 赞同：4
> 
> 时间：2012-05-03T00:50:23.487
> 
> 标签：django, socket.io

我听说这三项巨大的技术将允许开发人员构建 pub/sub 范式，从而带来快速的服务器推送体验。

我有 Django 的背景，但没有其他两个。所以只是想知道，我可以从哪里开始？

我目前使用 Gunicorn 作为 django 服务器，使用 Nginx 作为代理来提供静态文件，使用 Haproxy 作为前端负载均衡器。采用新技术堆栈后，我可以保持它们不动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:43:03.507

在 Nginx 中使用 Socket.io（将尝试使用 websocket）时，您可能会遇到问题。Nginx 1.0 不支持 HTTP/1.1 的代理。您可以使用 tcp_proxy 来解决它。不过，您也许可以找到一些支持 websocket 的 Nginx 1.1 分支。

看看[这个](https://github.com/LearnBoost/socket.io/wiki/Nginx-and-Socket.io)和[这个](https://stackoverflow.com/questions/9256454/websocket-connection-invalid-when-using-nginx-on-node-js-server)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:09:34.560

从这里开始：

*   [http://gevent-socketio.readthedocs.org](http://gevent-socketio.readthedocs.org)

和这里：

*   [https://github.com/abourget/gevent-socketio](https://github.com/abourget/gevent-socketio)

有一些关于如何开始的 Django 示例。你的技术。堆栈应该允许您运行它而没有太多问题。

# linux-kernel - 每当调用程序a时，我将如何编写运行程序b的内核模块

> ID：10423730
> 
> 赞同：0
> 
> 时间：2012-05-03T00:50:49.990
> 
> 标签：linux-kernel

我对 linux 很陌生，我有一些关于内核模块编程的问题。我正在使用 ubuntu 和 C 来制作我的 .ko 文件。我正在尝试制作一个在调用程序 /a 时将执行程序 /b 而不是 /a 的模块。有小费吗？

此外，即使使用 printk (KERN_EMERG...)，它也不会打印到终端。是否有我缺少的设置，或者 ubuntu 没有这样做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:08:29.557

您可能需要修改 中的设置`/proc/sys/kernel/printk`，这些设置控制将哪些级别打印到控制台。来自`proc(5)`：

```
 /proc/sys/kernel/printk
          The four values in this file are console_loglevel,
          default_message_loglevel, minimum_console_level, and
          default_console_loglevel.  These values influence
          printk() behavior when printing or logging error
          messages.  See syslog(2) for more info on the
          different loglevels.  Messages with a higher priority
          than console_loglevel will be printed to the console.
          Messages without an explicit priority will be printed
          with priority default_message_level.
          minimum_console_loglevel is the minimum (highest)
          value to which console_loglevel can be set.
          default_console_loglevel is the default value for
          console_loglevel. 
```

请注意，与`nice(2)`值一样，*较低*的值具有*较高的*优先级。

制作 for执行`execve()`路径的最简单方法是绑定安装在：`/foo/a``/foo/b``/foo/b``/foo/a`

```
mount -obind /foo/b /foo/a 
```

不需要内核模块。

使用内核模块执行相同的任务会显着增加工作量；LSM 界面可能会为您提供一些帮助，帮助您确定目标的确切执行时间。如果您正在寻找一个起点，`do_execve()`in`fs/exec.c`是开始阅读的地方。确保已`ctags`安装、运行并知道如何使用您的编辑器的`ctags`集成，以显着更轻松地阅读代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:10:43.370

Answer about `printk`:
It prints to the console, not the terminal. But what's the console?
You can find its TTY in `/proc/cmdline`. Normally it's `tty0`, which means the screen connected to the computer.
If you connect via SSH/TELNET, surely you won't see this.
If you're working in a graphical environment (Gnome/KDE), you may need something like alt-F1/F2 to switch to a text mode TTY.

You can also use the `dmesg` command to see the messages.

# cakephp - 使用 CakePHP 1.3 但没有数据库

> ID：10423731
> 
> 赞同：1
> 
> 时间：2012-05-03T00:50:56.927
> 
> 标签：cakephp, cakephp-1.3

为什么我的网站使用 CakePHP 1.3 有什么好处，但我没有数据库，因为该网站是静态的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:42:07.637

您可以使用简单的 HTML 来开发一个包含所有静态内容的站点。如果它有一个单一的联系页面或者你可以用简单的 PHP 开发的东西。你不需要为此使用 CakePHP。

CakePHP 框架用于需要与数据库进行更多交互的 Web 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:16:05.960

虽然我一般同意 gvLearner 的观点，如果您想拥有一个静态 html 站点，但仍然使用 CakePHP 的一些功能，并且将来能够轻松地将站点转换为动态站点，您可以使用 Cake 内置的[Pages Controller](http://book.cakephp.org/1.3/en/view/958/The-Pages-Controller)。

CakePHP 核心附带一个称为 Pages Controller 的默认控制器，通常用于提供静态页面。查看我发送的文档链接，我希望它会对你有好处。

干杯，鲍里斯拉夫。

# php - php 上传文件错误 #8 当它是一个 linux 可执行文件时

> ID：10423733
> 
> 赞同：2
> 
> 时间：2012-05-03T00:51:20.100
> 
> 标签：php, linux, apache, debian

我有一个表格可以很好地处理（上传）许多文件（tgz、microsoft 可执行文件、macosx 可执行文件），并且大小不同（包括的文件比给我错误的文件大）。

所以没有文件大小，......是问题所在。

但是当我尝试使用 apache（apache 2.2.16）将文件（linux exe 32bits）上传到我的 debian（squeeze）64bits 时，我总是收到错误 #8，即 UPLOAD_ERR_EXTENSION 错误。

php (php 5.3.3) $_FILES 数组给了我'size'==0，没有'tmp_name'和正确的'name'。

我的表格是这样的：

```
<form action=\"emUpload_file.php\" method=\"post\" enctype=\"multipart/form-data\"> 
```

有任何想法吗？。

谢谢。

负载处理得很好，因为当我上传任何其他类型的文件时它可以工作，我只有一个 linux 可执行文件的问题。对我来说这很奇怪，但我认为这不是我的 html/php 代码的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:29:31.283

最后，我发现了将可执行文件 (linux) 上传到我的 apache 服务器 (linux) 的问题。开发是在与生产服务器不同的服务器上完成的，而这个服务器有一个额外的安全模块，它是 Suhosin。

现在我刚刚删除了 /etc/php5/conf.d/suhosin.ini ，重新启动了服务器，错误 8 已经消失了。

谢谢。

# asp.net - Asp.net 会员密码

> ID：10423739
> 
> 赞同：4
> 
> 时间：2012-05-03T00:52:12.767
> 
> 标签：asp.net, web-config, asp.net-membership

我正在使用 sql server 和自定义数据库来存储成员提供程序表。在我的 webconfig 文件中，我降低了密码强度，但成员仍需要应用默认密码强度。以下是webconfig设置

```
 <membership>
  <providers>
    <add name = "AspNetSqlProvider"
     type = "System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, 
     Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
     connectionStringName = "LocalSqlServer"
     enablePasswordRetrieval = "false"
     enablePasswordReset = "true"
     requiresQuestionAndAnswer = "true"
     applicationName = "/"
     requiresUniqueEmail = "false"
     passwordFormat = "Hashed"
     maxInvalidPasswordAttempts = "5"
     minRequiredPasswordLength = "6"
     minRequiredNonalphanumericCharacters = "0"
     passwordAttemptWindow = "10"
     passwordStrengthRegularExpression = "" />
  </providers>
 </membership> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T01:32:18.630

您需要将您的会员提供者设置为默认提供者。否则它将使用`Machine.Config`.

```
<membership defaultProvider="AspNetSqlProvider" userIsOnlineTimeWindow="30">
  <providers>
    <clear/>
    <add name = "AspNetSqlProvider"
 type = "System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, 
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
 connectionStringName = "LocalSqlServer"
 enablePasswordRetrieval = "false"
 enablePasswordReset = "true"
 requiresQuestionAndAnswer = "true"
 applicationName = "/"
 requiresUniqueEmail = "false"
 passwordFormat = "Hashed"
 maxInvalidPasswordAttempts = "5"
 minRequiredPasswordLength = "6"
 minRequiredNonalphanumericCharacters = "0"
 passwordAttemptWindow = "10"
 passwordStrengthRegularExpression = "" />
  </providers>
</membership> 
```

# mysql - 将记录从一个表更新到其他 MySQL 非唯一列

> ID：10423741
> 
> 赞同：0
> 
> 时间：2012-05-03T00:52:39.737
> 
> 标签：mysql

我在两个数据库中有两个表。名为 db1 的数据库 1 具有表地址。数据库 2 名称为 db2，具有表县。

结构如下：

地址：

```
_id | address | countyID | cityID | stateID | postalCode | countryID 
```

县：

```
_id | stateID | countyName 
```

当前，addresses 表中的countyID 具有县名。我需要做的是获取addresses.countyID 中的值，在counties 中找到它并从counties 表中选择countyID，然后使用countyID 更新addresses 表。

最终结果，addresses.countyID 需要有countyID 而不是countyName。

谢谢，任何帮助都会很棒。我一直在尝试各种事情。我尝试了简单`WHERE`，`JOIN`但似乎没有任何效果。我使用 MySQL 作为我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:05:53.287

你的意思是这样的吗？

UPDATE DB1 SET COUNTYID =（在 DB1.COUNTYID=DB2.ID 上从 DB2 INNER JOIN DB1 中选择 ID）

我不确定您匹配的是 DB2 中的哪一列，我阅读您的问题越多，我就越困惑！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:07:33.383

我刚刚从选择结果中创建了一个新表。

```
CREATE TABLE AddressesCounties 
SELECT db1.addresses._id, db1.addresses.address, db2.counties._id, db1.addresses.cityID, db1.addresses.stateID, db1.addresses.postalCode, db1.addresses.countryID 
WHERE db1.addresses.countyID = db2.counties.countyName; 
```

与更改真实数据相比，创建此临时表要容易一些。这样我就可以运行我的 SELECT 命令并在应用它们之前测试我的结果。

# mysql - SQL根据连续日期获取值的变化，按值分组

> ID：10423748
> 
> 赞同：0
> 
> 时间：2012-05-03T00:53:58.753
> 
> 标签：mysql, sql, join

我想每天获得价格的变化。什么 SQL 查询将完成此任务？

原始表

```
Date       Company    Price
---------------------------
1/4/2012   Apple      458
1/3/2012   Apple      462
1/2/2012   Apple      451
1/1/2012   Apple      450

1/4/2012   Google     553
1/3/2012   Google     541
1/2/2012   Google     535
1/1/2012   Google     531 
```

所需表

```
Date       Company    Price   Day_Change
-------------------------------------
1/4/2012   Apple      458     -4    
1/3/2012   Apple      462     9
1/2/2012   Apple      451     1
1/1/2012   Apple      450     NULL

1/4/2012   Google     553     13
1/3/2012   Google     541     6
1/2/2012   Google     535     4
1/1/2012   Google     531     NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T00:58:54.760

加入前一天自己的表和公司

```
SELECT t1.price-t2.price FROM
Table t1
INNER JOIN Table t2 on date_add(t1.date,INTERVAL 1 DAY) =t2.date  
       AND t1.company=t2.company 
```

# java - 为什么这个方法调用不起作用？

> ID：10423754
> 
> 赞同：0
> 
> 时间：2012-05-03T00:54:32.410
> 
> 标签：java, methods

我正在创建一种方法来获取用户的输入并验证它以确保它是正确的。如果正确，它将调用一个方法并将用户输入输入其中。但是由于某种原因，方法调用不起作用。它不会产生任何错误，只是根本不这样做。我在代码的末尾放置了一个打印语句，以确保它确实到达那里并且确实到达了那里，但由于某种原因，它只是没有像它应该的那样调用方法。如果我自己调用它并通过参数输入字符串，则另一种方法可以正常工作。

代码是：

```
public void getGetScheduledShowByFilmInput()////new - omar////
{
    BufferedReader reader;
    reader = new BufferedReader(new InputStreamReader(System.in));

    String filmInput;
    filmInput = "";

    boolean foundFilm;
    foundFilm = false;

    System.out.println("Here is a list of films that are currently showing:");
    for(Film film : films){
        System.out.println(film.getFilmName());
    }

    System.out.println("");
    System.out.println("Please type the film name that you wish to view the corresponding shows for and press enter.");
    System.out.println("Type 'exit' and press enter to exit this process.");

    while(foundFilm == false){
        try{
            filmInput = reader.readLine();
        }
        catch (IOException e){
            System.out.println("Error");
        }

        //If user enters "exit" then return.
        if(filmInput.equals("exit")){
            return;
        }

        //Check to see if the film name input by the user corresponds to any film showing.
        for(Film film : films){
            if(film.getFilmName() == filmInput){
                foundFilm = true;
                break;
            }
        }

        if(foundFilm = true){
            System.out.println("Film found.");
        }
        else{
            System.out.println("The film name you entered has not been recognised.  Please try again.");
        }
    }

    //Call the function and input the film name input by the user.
    getScheduledShowsByFilm(filmInput);  ////This is the code that seems to be the problem.
    System.out.println("reached bottom");

} 
```

第二种方法是：

```
 public void getScheduledShowsByFilm(String inputFilmName)
{
    ArrayList<Show> scheduledShows;
    scheduledShows = new ArrayList<Show>();
    for(Film film : films){
        if(inputFilmName == film.getFilmName()){
            for(Schedule schedule : schedules){
                scheduledShows.add(schedule.getShowsOfFilm(film));
                if(scheduledShows.get(scheduledShows.size() - 1) == null){
                    scheduledShows.remove(scheduledShows.size() - 1);
                }
            }
        }
    }

    for(Show show : scheduledShows){
        System.out.println("**********************************");
        show.getShowDetails();
        System.out.println("**********************************");
    }
} 
```

当我自己调用第二种方法并手动输入参数时，第二种方法效果很好。

这可能是我不理解的非常简单的事情！哈哈，谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T00:57:48.593

foundFilm 永远不会是 false，因为您总是将 true 分配给它：

```
 if(foundFilm = true){
            System.out.println("Film found.");
 } 
```

尝试将其更改为：

```
if(foundFilm)
{
   System.out.println("Film found.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:13:12.063

`getGetScheduledShowByFilmInput()`避免使用相等运算符 (==)进行`getScheduledShowsByFilm(String)`字符串比较。== 运算符测试对象是否相等，但您想测试两个字符串是否包含相同的字符序列。因此，请`equals`改用：

```
 //Check to see if the film name input by the user corresponds to any film showing.
    for(Film film : films){
        if(film.getFilmName().equals(filmInput)){
            foundFilm = true;
            break;
        }
    } 
```

和

```
for(Film film : films){
    if(inputFilmName.equals(film.getFilmName())){
        for(Schedule schedule : schedules){
            scheduledShows.add(schedule.getShowsOfFilm(film));
            if(scheduledShows.get(scheduledShows.size() - 1) == null){
                scheduledShows.remove(scheduledShows.size() - 1);
            }
        }
    }
} 
```

# javascript - 纯 javascript 到 jquery - clientHeight

> ID：10423759
> 
> 赞同：7
> 
> 时间：2012-05-03T00:54:49.367
> 
> 标签：javascript, jquery

我有以下脚本

```
(function(win){
    var doc = win.document;
    if (doc.querySelector && doc.addEventListener) {
        var toggler = doc.querySelector('.toggle-menu')
        var menu = doc.querySelector('.main-nav ul');
        menu.style.height = '0px';
        toggler.addEventListener('click',function(e) {
            e.preventDefault();
            if (menu.style.height == '0px') {
                menu.style.height = 'auto';
                if (menu.clientHeight != 0) {
                    menu.style.height = menu.clientHeight+'px';
                }
            } else {
                menu.style.height = '0px';
            }
        });
    }
})(this); 
```

该脚本的 jQuery 版本将是什么，因为我找不到与 clientHeight 等效的 jQuery。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T00:59:32.160

`clientHeight`不是 jQuery 属性。它是在 Internet Explorer 中引入的，但不是 W3C 规范的一部分。看起来它仅在 Firefox 和 Internet Explorer 中受支持。不过，我刚刚测试过它可以在最新版本的 Chrome 中运行。不确定结果是否跨浏览器是标准的，尽管我在下面发布的链接表明不是。

此外，Mozilla 建议将以下公式用于不支持它的浏览器：

> clientHeight 可以计算为 CSS 高度 + CSS 填充 - 水平滚动条的高度（如果存在）。

我假设这是元素本身的滚动条，而不是整个浏览器窗口，除非元素占据了整个窗口。

资料来源：

*   [clientHeight/clientWidth 在不同的浏览器上返回不同的值](https://stackoverflow.com/questions/833699/clientheight-clientwidth-returning-different-values-on-different-browsers)
*   [https://developer.mozilla.org/en/DOM/element.clientHeight](https://developer.mozilla.org/en/DOM/element.clientHeight)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:00:30.573

有[.height()](http://api.jquery.com/height/)。它将返回元素的高度。

```
var menu = $('.main-nav ul');
....
menu.height()+'px'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T12:04:45.383

就今天 - 2016 年**9 月**而言，我可以看到 jQuery（版本 3.1.0）仍然不包含自己的方法来以标准化方式跨不同浏览器获取`element.clientWidth`和`element.clientHeight`。

尽管如此，对不同来源的调查发现，**这些 JavaScript 原生属性**在当今使用的大多数浏览器上都得到了很好的支持。
在[MDN clientHeight 文章中](https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight)，我可以阅读 Chrome、Firefox (Gecko)、Internet Explorer、Opera、Safari (WebKit) 支持它，但没有指定版本控制。

QuirksMode 指定[这些属性](http://www.quirksmode.org/mobile/tableViewport_desktop.html)在应用于`window`和`document`对象时受 IE 9+ 和其他浏览器的支持。

在另一篇关于应用于页面元素的两个属性的 QuirksMode 文章中，没有给出关于浏览器支持的规范，但是可以使用一个非常有用的页面测试器在您拥有的浏览器上自行测试元素尺寸的一致性：

[http://www.quirksmode.org/dom/tests/elementdimensions.html](http://www.quirksmode.org/dom/tests/elementdimensions.html)

在[这篇处理 clientHeight 属性的文章](http://help.dottoro.com/ljcadejj.php)中，重点关注 IE < 8 和 IE >= 8 上的物理像素和逻辑像素之间的差异：

> 在早于版本 8 的 Internet Explorer 中，它以物理像素大小检索高度，而从版本 8 开始，它以逻辑像素大小返回高度。

假设在浏览器上使用缩放主要是在移动设备上使用，我认为：

*   使用桌面受众页面/网络应用程序`element.clientWidth`足够安全；`element.clientHeight`
*   对于跨设备页面/网络应用程序，使用相对度量单位（例如 em）可以解决物理像素和逻辑像素之间的差距。

为了更简单的维度管理，**em** unit 可以改进跨平台开发（[W3 org specs on units 和 rem's draft](https://www.w3.org/Style/Examples/007/units.en.html)），这似乎[在现代浏览器上得到支持](http://caniuse.com/#feat=rem)。我仍然没有关于 CSS 媒体查询中的相对度量单位的经验，但是阅读[这篇关于 CSS 媒体查询的最佳单位度量的有趣文章](http://zellwk.com/blog/media-query-units/)也许值得研究。

对这些考虑的任何意见表示赞赏。

# vb.net - 如何在 vb.net 中使用浏览器 chrome

> ID：10423760
> 
> 赞同：0
> 
> 时间：2012-05-03T00:54:52.470
> 
> 标签：vb.net, visual-studio-2010

我是新手，在 vb.net 2010 中学习

我计划使用 vb.net 这段代码创建简单的浏览器

```
 Form2.WebBrowser2.Navigate("http://xxxxx.com") 
```

目前 。用壁虎检测浏览器 mozilla firefox 本教程 [http://code.google.com/p/geckofx/wiki/GettingStarted](http://code.google.com/p/geckofx/wiki/GettingStarted)

当我在 vb.net 中使用 tbrowser 时，你能帮我检测浏览器 chrome 吗？

谢谢jk

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T16:50:17.670

做

```
webbrowser1.setdefaultbrowser("chrome.google.browserid") 
```

# javascript - 使用 Node.js 和 Kue，有没有办法指定我希望任务执行的日期？

> ID：10423766
> 
> 赞同：2
> 
> 时间：2012-05-03T00:57:00.137
> 
> 标签：javascript, node.js, redis, job-scheduling

显然，我可以将延迟设置为我想要的日期之前的毫秒数，但在某些情况下这并不能很好地工作，最大 int 值将是一个问题。如果 Kue 做不到，我可以将距离太远的特定日期作业存储在面向客户端的应用程序使用的主数据库中，或者可能是第三个商店，我只是想避免使用多个商店这个过程。

更新：这是一个愚蠢的问题，我很快就在脑海中做了一些数学运算，但可怕地失败了，我猜，然后问，我应该在我问之前准确计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:41:46.403

不幸的是，Kue 没有其他方法可以安排工作。我确实想知道你有哪些工作需要安排到溢出整数。考虑到 Kue 是由 Redis 支持的，我可能不想依赖它来安排未来很多年的工作。

如果您确实必须这样做，那么您可以将执行日期与作业一起存储，并将延迟设置得尽可能高。当需要执行时，检查该日期是否已经过去，如果没有，则只需使用剩余的 ms 重新排队作业，或者如果剩余时间仍然太高，则使用最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:38:10.873

[由于JavaScript 中最大整数](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)的大小，我不会担心它。

[文档指出日期是相对于 now 的](https://github.com/learnboost/kue#delayed-jobs)，因此您可以安排作业在未来 285,427.017 年（9,007,199,254,740,992 毫秒）内启动。尽管它说它很可能将日期转换为绝对日期，该日期具有较小但仍然相当大的限制，略低于：243,090.534 年 97,671,189,983,570,992 毫秒）。

在时间方面，我会更多地考虑 2038 年的 32 位秒溢出。

# mysql - SQL：多次重复结果行，并对行进行编号

> ID：10423767
> 
> 赞同：25
> 
> 时间：2012-05-03T00:57:02.790
> 
> 标签：mysql, sql, sql-server, oracle, postgresql

我有一个 SQL 查询，结果如下：

```
value | count
------+------
foo   |     1
bar   |     3
baz   |     2 
```

现在我想扩展它，以便`count`大于 1 的每一行出现多次。我还需要对这些行进行编号。所以我会得到：

```
value | count | index
------+-------+------
foo   |     1 |     1
bar   |     3 |     1
bar   |     3 |     2
bar   |     3 |     3
baz   |     2 |     1
baz   |     2 |     2 
```

我必须在所有主要数据库（Oracle、SQL Server、MySQL、PostgreSQL 甚至更多）上进行这项工作。因此，适用于不同数据库的解决方案将是理想的，但值得赞赏的是使其适用于任何数据库的巧妙方法。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-03T01:01:39.887

你可以使用数字表

```
SELECT value, count, number
FROM table
    JOIN Numbers 
        ON table.count >= Numbers.number 
```

[这是一个使用 MSSQL 的 SQLFiddle](http://sqlfiddle.com/#!3/fcf3d/3)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-03T13:09:37.367

对于 MySQL，使用穷人的[generate_series](https://www.google.com/search?q=mysql%20generate_series)，这是通过视图完成的。MySQL 是[四大](https://stackoverflow.com/a/10424245)中唯一没有任何 CTE 功能的 RDBMS。

实际上，您可以在支持视图的数据库上使用此技术。这就是几乎所有的数据库

源自此处的生成器技术：http: [//use-the-index-luke.com/blog/2011-07-30/mysql-row-generator#mysql_generator_code](http://use-the-index-luke.com/blog/2011-07-30/mysql-row-generator#mysql_generator_code)

我们所做的唯一小的修改是我们分别用乘法和加法替换了原始技术中的按位（**左移**和**按位或）技术；**因为 Sql Server 和 Oracle 没有左移运算符。

这种抽象 99% 保证适用于除 Oracle 之外的所有数据库；Oracle`SELECT`没有任何表是无法运行的，为此，需要从 dummy table 中进行选择，Oracle 已经提供了一张，它被称为`DUAL`table。数据库可移植性是一个白日梦:-)

这是适用于所有 RDBMS 的抽象视图，在所有主要数据库中没有按位操作（在这种情况下无论如何都不是必需的）和功能细微差别（我们删除`OR REPLACE`on `CREATE VIEW`，只有 Postgresql 和 MySQL 支持它们）。

Oracle 警告：只需放在`FROM DUAL`每个`SELECT`表达式之后

```
CREATE VIEW generator_16
AS SELECT 0 n UNION ALL SELECT 1  UNION ALL SELECT 2  UNION ALL 
   SELECT 3   UNION ALL SELECT 4  UNION ALL SELECT 5  UNION ALL
   SELECT 6   UNION ALL SELECT 7  UNION ALL SELECT 8  UNION ALL
   SELECT 9   UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL
   SELECT 12  UNION ALL SELECT 13 UNION ALL SELECT 14 UNION ALL 
   SELECT 15;

CREATE VIEW generator_256
AS SELECT ( ( hi.n * 16 ) + lo.n ) AS n
     FROM generator_16 lo, generator_16 hi;

CREATE VIEW generator_4k
AS SELECT ( ( hi.n * 256 ) + lo.n ) AS n
     FROM generator_256 lo, generator_16 hi;

CREATE VIEW generator_64k
AS SELECT ( ( hi.n * 256 ) + lo.n ) AS n
     FROM generator_256 lo, generator_256 hi;

CREATE VIEW generator_1m
AS SELECT ( ( hi.n * 65536 ) + lo.n ) AS n
     FROM generator_64k lo, generator_16 hi; 
```

然后使用这个查询：

```
SELECT t.value, t.cnt, i.n
FROM tbl t
JOIN generator_64k i 
ON i.n between 1 and t.cnt
order by t.value, i.n 
```

Postgresql：[http ://www.sqlfiddle.com/#!1/1541d/1](http://www.sqlfiddle.com/#!1/1541d/1)

甲骨文：[http ://www.sqlfiddle.com/#!4/26c05/1](http://www.sqlfiddle.com/#!4/26c05/1)

Sql 服务器：[http ://www.sqlfiddle.com/#!6/84bee/1](http://www.sqlfiddle.com/#!6/84bee/1)

MySQL：[http ://www.sqlfiddle.com/#!2/78f5b/1](http://www.sqlfiddle.com/#!2/78f5b/1)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-03T02:18:23.130

MySQL 确实是数据库世界的 IE，在标准和特性方面它是如此的顽固。

适用于除 MySQL 之外的所有主要 RDBMS：

```
with 
-- Please add this on Postgresql:
-- RECURSIVE
tbl_populate(value, cnt, ndx) as
(
  select value, cnt, 1 from tbl

  union all

  select t.value, t.cnt, tp.ndx + 1
  from tbl t
  join tbl_populate tp 
  on tp.value = t.value  
  and tp.ndx + 1 <= t.cnt
)
select * from tbl_populate
order by cnt, ndx 
```

SQL 服务器：[http ://www.sqlfiddle.com/#!6/911a9/1](http://www.sqlfiddle.com/#!6/911a9/1)

甲骨文：[http ://www.sqlfiddle.com/#!4/198cd/1](http://www.sqlfiddle.com/#!4/198cd/1)

Postgresql：[http ://www.sqlfiddle.com/#!1/0b03d/1](http://www.sqlfiddle.com/#!1/0b03d/1)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-03T08:07:32.030

您要求提供与 db 无关的解决方案，@Justin 给了您一个不错的解决方案。
你还要求

> 使其适用于任何数据库的巧妙方法

**PostgreSQL[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)**有一个：开箱即用地满足您的要求：

```
SELECT val, ct, generate_series(1, ct) AS index
FROM   tbl; 
```

顺便说一句，我宁愿不使用`value`and`count`作为列名。使用[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)作为标识符是不好的做法。使用`val`and`ct`代替。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-03T01:06:24.460

创建一个数字表 - 它的定义可能会因平台而略有不同（这适用于 SQL Server）：

```
CREATE TABLE Numbers(Number INT PRIMARY KEY);

INSERT Numbers 
SELECT TOP 1000 ROW_NUMBER() OVER (ORDER BY name)
FROM sys.all_columns; 
```

现在这个 temp 也是 SQL Server，但演示了应该在您指定的 RDBMS 中有效的连接语法（尽管我承认我不使用它们，所以我无法测试）：

```
DECLARE @foo TABLE(value VARCHAR(32), [count] INT);

INSERT @foo SELECT 'foo', 1
UNION ALL SELECT 'bar', 3
UNION ALL SELECT 'baz', 2;

SELECT f.value, f.[count], [index] = n.Number
FROM @foo AS f, Numbers AS n
WHERE n.Number <= f.[count]; 
```

结果（再次，SQL Server）：

```
value | count | index
------+-------+------
foo   |     1 |     1
bar   |     3 |     1
bar   |     3 |     2
bar   |     3 |     3
baz   |     2 |     1
baz   |     2 |     2 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T02:31:11.733

仅供欣赏，SQL Server 2005 及更高版本可以递归处理：

```
declare @Stuff as Table ( Name VarChar(10), Number Int )
insert into @Stuff ( Name, Number ) values ( 'foo', 1 ), ( 'bar', 3 ), ( 'baz', 2 )

select * from @Stuff

; with Repeat ( Name, Number, Counter ) as (
  select Name, Number, 1
    from @Stuff
    where Number > 0
  union all
  select Name, Number, Counter + 1
    from Repeat
    where Counter < Number
  )
select *
  from Repeat
  order by Name, Counter -- Group by name.
  option ( maxrecursion 0 ) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-22T10:42:08.153

通过一个简单的`JOIN`你可以达到重复记录n次的目的。
以下查询将每条记录重复 20 次。

```
SELECT  TableName.*
FROM    TableName
JOIN    master.dbo.spt_values on type = 'P' and number < 20 
```

**注意`master.dbo.spt_values on type = 'P'`：**
此表用于获取一系列数字，这些数字是通过条件硬编码在其中的`type='P'`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-06T13:39:51.663

在 Oracle 中，我们可以使用`LEVEL`和的组合`CROSS JOIN`。

```
 SELECT *
    FROM yourtable
         CROSS JOIN (    SELECT ROWNUM index_t
                           FROM DUAL
                     CONNECT BY LEVEL <= (SELECT MAX (count_t) FROM yourtable))
   WHERE index_t <= count_t
ORDER BY VALUE, index_t; 
```

[**演示**](http://sqlfiddle.com/#!4/148f9e/14)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-13T11:46:47.950

您可以使用 CTE ：

```
WITH Numbers(Num) AS
(
    SELECT 1 AS Num
    UNION ALL 
    SELECT Num + 1
    FROM   Numbers c
    WHERE  c.Num < 1000
)

SELECT VALUE,COUNT, number
FROM   TABLE
       JOIN Numbers
            ON  TABLE.count >= Numbers.Num
OPTION(MAXRECURSION 1000) 
```

# java - Hibernate 中的一对一共享主键映射可以是可选的/空的吗？

> ID：10423769
> 
> 赞同：2
> 
> 时间：2012-05-03T00:57:30.940
> 
> 标签：java, hibernate, postgresql, annotations, one-to-one

我在网上看到了很多使用 Hibernate 注释进行一对一共享主键映射的示例/教程。但是，在我看到的所有示例中，映射似乎不是可选的，或者如果它是可选的，则它不能位于主键上。我有以下情况，我在 Company 表和 CompanyDocs 表之间有一个一对一的主键映射。CompanyDocs 表是一个弱实体，即虽然存在Company 对象，但它一定不会从一开始就链接CompanyDocs 实体，但是这可能会在以后创建。

Company 对象由外部应用程序创建和保存，但使用 Hibernate 应用程序进行更新。这就是我所拥有的......（请注意这不是实际的例子）

```
Company table
- companyid (Pk)
- name
- desc
- test1
- test2

CompanyDocs table
- docsid (Pk) (Fk) 
- detail1
- detail2
- detail3 
```

模型类

```
Company.java
@Entity
@Table(name = "company", schema = "public")   
public class Company implements java.io.Serializable {

  private String companyid
  private CompanyDocs companydocs;

  @Id
  @Column(name = "companyid", unique = true, nullable = false, length = 20)
  public String getCompanyid() {
    return this.companyid;
}

  public void setCompanyid(String companyid) {
    this.companyid = companyid;
}

  @OneToOne(fetch = FetchType.LAZY, mappedBy = "companydocs")
  @NotFound(action = NotFoundAction.IGNORE)
  @PrimaryKeyJoinColumn(name = "companyid", referencedColumnName = "docsid")
  public CompanyDocs getCompanydocs() {
    return this.companydocs;
}

  public void setCompanydocs(CompanyDocs companydocs) {
    this.companydocs = companydocs;
} 
```

}

```
CompanyDocs.java

@Entity
@Table(name = "companydocs", schema = "public")
public class CompanyDocs implements java.io.Serializable {

    private String docsid;
    private Company company;

    @GenericGenerator(name = "generator", strategy = "foreign", parameters =  
    @Parameter(name = "property", value = "company"))
    @Id
    @GeneratedValue(generator = "generator")
    @Column(name = "docsid", unique = true, nullable = false, length = 20)
    public String getDocsid() {
        return this.docsid;
    }

    public void setDocsid(String docsid) {
        this.docsid = docsid;
    }

    @PrimaryKeyJoinColumn(name = "docsid", referencedColumnName = "companyid")      
    @OneToOne(fetch = FetchType.LAZY)
    @NotFound(action = NotFoundAction.IGNORE)
    public Company getCompany() {
        return this.company;
    }

    public void setCompany(Company company) {
        this.company = company;
    } 
```

公司DAOImpl.java

```
public Company getCompany(String companyid) {
Criteria c = sessionFactory.getCurrentSession().createCriteria(Company.class)
                 .add(Restrictions.eq("companyid", companyid));     
    try {       
        return (Company) c.list().get(0);
    }
    catch(IndexOutOfBoundsException e) {        
        logger.info("GetCompany threw exception " +e);
        return null;
    }       

}

public void storeCompany(Company c) {
sessionFactory.getCurrentSession().saveOrUpdate(c);
 }

public void storeCompanyDocs(CompanyDocs cd) {
sessionFactory.getCurrentSession().saveOrUpdate(cd);
 }

public CompanyDocs getCompanyDocs(String companyid) {       
    try{
       Criteria c = sessionFactory.getCurrentSession()
      .createCriteria(CompanyDocs.class).add(Restrictions.eq("companyid", companyid));
        logger.info("getCompanyDocsreturned"+c.list().get(0));
        return (CompanyDocs)c.list().get(0);            

    }catch(IndexOutOfBoundsException e){
        logger.info("getCompanyDocs threw exception " +e);
        return null;            
    }

} 
```

CompanyServiceImpl.java

```
 @Transactional(propagation = Propagation.REQUIRED, readOnly= false,       
 noRollbackFor=IllegalArgumentException.class)
 @ExceptionHandler(NullPointerException.class)

 public CompanyResponse updateCompany(Service parameters) throws SOAPException { 
 LOG.info("In updateCompany");
 Company c = companyDao.getCompany(parameters.getId());
 //CompanyDocs cd = companyDao.getCompanyDocs(parameters.getId());
 CompanyDocs cd = c.getCompanyDocs();       
  LOG.info("CompanyDocs object is:- " + cd);
    if(cd == null)
      {
        cd = new CompanyDocs(parameters.getId());
        c.setCompanyDocs(cd);
            cd.setCompany(c);
            LOG.info("CompanyDocs object created new :- " + cd);
            companyDao.storeCompanyDocs(cd);
        LOG.info("CompanyDocs object stored :- " + cd.getDocsid());     
      } 

        c.setDetail1();
        c.setDetail2();
        c.setDetail3();
        .............
        companyDao.storeCompany(c)
        LOG.info("Stored Company");
        LOG.info("CompanyService Response Return------:")
        return new CompanyResponse();

 } 
```

我的日志文件打印了这个。

```
 2012-05-02 22:57:18,951 INFO [au.com.CompanyServiceImpl] - <In updateCompany>
   2012-05-02 22:57:18,975 INFO [au.com.CompanyDAOImpl] - <getCompany returned        
   au.com.Company@2738ef1d>[au.com.CompanyServiceImpl] - <CompanyDocs object is:- null>
   2012-05-02 22:57:18,991 INFO [au.com.CompanyServiceImpl] - <CompanyDocs object 
   created new :- au.com.CompanyDocs@373ee92>
   2012-05-02 22:57:18,995 INFO [au.com.CompanyServiceImpl] - <CompanyDocs object 
   updated :- CO12345>
   2012-05-02 22:57:19,338 INFO [au.com.CompanyDAOImpl] - <Stored Company >
   2012-05-02 22:57:19,338 INFO [au.com.CompanyServiceImpl] - <CompanyService 
   Response  Return------:>
   2012-05-02 22:57:19,498 ERROR [org.hibernate.jdbc.AbstractBatcher] - <Exception    
   executing batch: >
   org.hibernate.StaleStateException: Batch update returned unexpected row count from  
   update [0]; actual row count: 0; expected: 1 at 
   org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:61)
   at   
   org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:46)
at org.hibernate.jdbc.BatchingBatcher.checkRowCounts(BatchingBatcher.java:68)
at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:168)
at org.hibernate.event.def.AbstractFlushingEventListener
    .performExecutions(AbstractFlushingEventListener.java:298)
at org.hibernate.event.def.DefaultFlushEventListener.
    onFlush(DefaultFlushEventListener.java:27)
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
at org.springframework.orm.hibernate3.HibernateTransactionManager.
    doCommit(HibernateTransactionManager.java:656)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.
    processCommit(AbstractPlatformTransactionManager.java:754)
at org.springframework.transaction.support.AbstractPlatformTransactionManager
     .commit(AbstractPlatformTransactionManager.java:723)
at org.springframework.transaction.interceptor.TransactionAspectSupport
    .commitTransactionAfterReturning(TransactionAspectSupport.java:393)
at org.springframework.transaction.interceptor.TransactionInterceptor
    .invoke(TransactionInterceptor.java:120)
at org.springframework.aop.framework.ReflectiveMethodInvocation
    .proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.
    invoke(JdkDynamicAopProxy.java:202)
at $Proxy28.login(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.
    invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.cxf.service.invoker.AbstractInvoker.
    performInvocation(AbstractInvoker.java:173)
at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:89)
at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:60)
at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75)
at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.
     run(ServiceInvokerInterceptor.java:58)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at org.apache.cxf.workqueue.SynchronousExecutor.
       execute(SynchronousExecutor.java:37)
at org.apache.cxf.interceptor.ServiceInvokerInterceptor.
     handleMessage(ServiceInvokerInterceptor.java:106)
at org.apache.cxf.phase.PhaseInterceptorChain.
      doIntercept(PhaseInterceptorChain.java:255)
at org.apache.cxf.transport.ChainInitiationObserver.
    onMessage(ChainInitiationObserver.java:113)
at org.apache.cxf.transport.servlet.ServletDestination.
    invoke(ServletDestination.java:97)
at org.apache.cxf.transport.servlet.ServletController.
      invokeDestination(ServletController.java:461)
at org.apache.cxf.transport.servlet.ServletController.
     invoke(ServletController.java:188)
at org.apache.cxf.transport.servlet.AbstractCXFServlet.
     invoke(AbstractCXFServlet.java:148)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.
     handleRequest(AbstractHTTPServlet.java:179)
at org.apache.cxf.transport.servlet.
     AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.
    service(AbstractHTTPServlet.java:159)
at org.apache.catalina.core.ApplicationFilterChain.
    internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.
    doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.
      invoke(StandardWrapperValve.java:233) 
at org.apache.catalina.core.StandardContextValve.
     invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.
    invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.
     process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:662)
   2012-05-02 22:57:19,501
  ERROR [org.hibernate.event.def.AbstractFlushingEventListener]     
  -   <Could not synchronize database state with session> 
```

我尝试使用@non annotation，optional = false/true，也尝试使用单向映射并使用标准加载 companydocs 对象。但似乎 Hibernate 总是排除现有公司的 CompanyDocs 对象。

奇怪的是，当我们使用早期版本的 hibernate 并使用映射文件而不是注释时，它可以正常工作。这是一个共享键映射但单向，因此公司 hbm 文件没有 CompanyDocs 对象的映射。我正在使用 hibernate 3.3.1.GA.jar 进行注释。是不是我做错了什么，或者新版本的 Hibernate 不再可能了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:40:27.290

问题是 Hibernate 发出了 update ，而不是 companydocs 对象的 insert 命令。这是因为如果对象的主键为空，那么 Hibernate 将进行插入，如果它不为空，它将进行更新，在我的情况下，因为我在实现类中设置键，如下所示，它正在执行更新.

原始代码

```
if(cd == null)
  {
    cd = new CompanyDocs(parameters.getId());
    c.setCompanyDocs(cd);
    cd.setCompany(c);
    LOG.info("CompanyDocs object created new :- " + cd);
    companyDao.storeCompanyDocs(cd);
    LOG.info("CompanyDocs object stored :- " + cd.getDocsid());     
  } 
```

新代码

```
if(cd == null)
  {
    cd = new CompanyDocs();//no-arg constructor
    c.setCompanyDocs(cd);
    cd.setCompany(c);
    LOG.info("CompanyDocs object created new :- " + cd);
    companyDao.storeCompanyDocs(cd);
    LOG.info("CompanyDocs object stored :- " + cd.getDocsid());     
  } 
```

工作精美！

我发现此链接对解决此问题很有用

[休眠 StaleStateException](http://www.coderanch.com/t/219125/ORM/java/StaleStateException)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:05:05.437

`@PrimaryKeyJoinColumn`应该只用在可选的一面，所以去掉`@PrimaryKeyJoinColumn`那个注解的`Company`。

此外，`mappedBy`的属性 `@OneToOne`应该是指`@OneToOne`被标记的实体的属性名称。所以应该是：

```
@OneToOne(fetch = FetchType.LAZY, mappedBy = "company") 
```

# jquery - 将常规json添加到jstree？

> ID：10423772
> 
> 赞同：1
> 
> 时间：2012-05-03T00:58:01.167
> 
> 标签：jquery, json, jstree

我刚刚遇到了 jstree 库。看起来是一个很棒的资源，但我无法将我的数据（它是普通的 json）转换为 jstree 似乎需要的花哨格式（带有状态、图标、子项等）。

例如，假设我有 json 对象：

```
{
    "A" : [1,2,3],
    "B" : {
        "x" : 4,
        "y" : 5,
        "z" : 6
    }
} 
```

似乎应该有一种直接的方法将其转换为 jstree 想要的格式，将 1,2 和 3 作为 A 的子级，将 x、y 和 z 作为 B 的子级。但我没有能够找到一个。

这可能吗？如何？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:30:22.820

您将不得不手动进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T22:45:07.303

*   如果我们的三个是静态的，那么您必须手动执行一次
*   如果您的树是动态的，则必须为其编写代码

# c# - GZIP 解压 C# OutOfMemory

> ID：10423776
> 
> 赞同：6
> 
> 时间：2012-05-03T00:58:39.170
> 
> 标签：c#, gzip, out-of-memory, compression, gzipstream

我有许多从 ftp 下载的要解压缩的大型 gzip 文件（大约 10MB - 200MB）。

所以我试图谷歌并找到一些gzip解压缩的解决方案。

```
 static byte[] Decompress(byte[] gzip)
    {
        using (GZipStream stream = new GZipStream(new MemoryStream(gzip), CompressionMode.Decompress))
        {
            const int size = 4096;
            byte[] buffer = new byte[size];
            using (MemoryStream memory = new MemoryStream())
            {
                int count = 0;
                do
                {
                    count = stream.Read(buffer, 0, size);
                    if (count > 0)
                    {
                        memory.Write(buffer, 0, count);
                    }
                }
                while (count > 0);
                return memory.ToArray();
            }
        }
    } 
```

它适用于 50mb 以下的任何文件，但是一旦我输入超过 50mb 的文件，我就会遇到系统内存不足异常。异常前的最后位置和内存长度是 134217728。我认为它与我的物理内存无关，我知道我使用 32 位，所以我不能拥有超过 2GB 的对象。

我还需要在解压缩文件后处理数据。我不确定内存流是否是这里最好的方法，但我真的不喜欢写入文件然后再次读取文件。

我的问题

*   为什么我得到 System.OutMemoryException？
*   解压缩 gzip 文件并在之后进行一些文本处理的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T02:03:52.690

MemoryStream 的内存分配策略对海量数据不友好。

由于 MemoryStream 的合同是将连续数组作为底层存储，因此它必须经常为大流重新分配数组（通常为 log2(size_of_stream)）。这种重新分配的副作用是

*   重新分配的长时间复制延迟
*   新数组必须适合已被先前分配严重碎片化的空闲地址空间
*   新数组将位于有其怪癖的 LOH 堆上（没有压缩，GC2 上的收集）。

因此，通过 MemoryStream 处理大型 (100Mb+) 流可能会在 x86 系统上出现内存不足异常。此外，返回数据的最常见模式是像您一样调用 GetArray，这还需要与用于 MemoryStream 的最后一个数组缓冲区大致相同的空间量。

解决方法：

*   最便宜的方法是将 MemoryStream 预先增长到您需要的近似大小（最好稍微大一点）。您可以通过读取不存储任何内容的假流来预先计算所需的大小（浪费 CPU 资源，但您将能够读取它）。还考虑返回流而不是字节数组（或返回 MemoryStream 缓冲区的字节数组以及长度）。
*   如果您需要整个流或字节数组，另一种处理方法是使用临时文件流而不是 MemoryStream 来存储大量数据。
*   更复杂的方法是实现流，将底层数据分成更小的（即 64K）块，以避免在 LOH 上分配和在流需要增长时复制数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:03:30.580

您可以尝试如下测试，以了解在获取 OutOfMemoryException 之前可以向 MemoryStream 写入多少数据：

```
 const int bufferSize = 4096;
        byte[] buffer = new byte[bufferSize];

        int fileSize = 1000 * 1024 * 1024;

        int total = 0;

        try
        {
            using (MemoryStream memory = new MemoryStream())
            {
                while (total < fileSize)
                {
                    memory.Write(buffer, 0, bufferSize);
                    total += bufferSize;
                }

            }

            MessageBox.Show("No errors"); 

        }
        catch (OutOfMemoryException)
        {
            MessageBox.Show("OutOfMemory around size : " + (total / (1024m * 1024.0m)) + "MB" ); 
        } 
```

您可能必须先解压缩到一个临时物理文件，然后以小块的形式重新读取它，然后在进行时进行处理。

旁白：有趣的是，在 Windows XP PC 上，上面的代码给出：当代码针对 .net 2.0 时，“OutOfMemory 大小约为 256MB”，而在 .net 4 上，“OutOfMemory 大小约为 512MB”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T02:06:41.587

您是否碰巧在多个线程中处理文件？这会消耗大量的地址空间。OutOfMemory 错误通常与物理内存无关，因此 MemoryStream 的用完可能比您预期的要早得多。检查此讨论[http://social.msdn.microsoft.com/Forums/en-AU/csharpgeneral/thread/1af59645-cdef-46a9-9eb1-616661babf90](http://social.msdn.microsoft.com/Forums/en-AU/csharpgeneral/thread/1af59645-cdef-46a9-9eb1-616661babf90)。如果您切换到 64 位进程，那么对于您正在处理的文件大小可能会更好。

不过，在您当前的情况下，您可以使用内存映射文件来绕过任何地址大小限制。如果您使用的是 .NET 4.0，它会为 Windows 函数[http://msdn.microsoft.com/en-us/library/dd267535.aspx](http://msdn.microsoft.com/en-us/library/dd267535.aspx)提供本机包装器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T01:16:49.290

> 我知道我的对象不能超过 2GB，因为我使用的是 32 位

这是不正确的。您可以根据需要拥有尽可能多的内存。32 位限制意味着您只能拥有 4GB（操作系统占用一半）的虚拟地址空间。虚拟地址空间不是内存。[这](https://stackoverflow.com/questions/5276574/is-2-gb-really-my-maximum/)是一个很好的阅读。

> 为什么我得到 System.OutMemoryException？

因为分配器无法为您的对象找到连续的地址空间，或者它发生得太快并且阻塞了。（很可能是第一个）

> 解压缩 gzip 文件并在之后进行一些文本处理的最佳解决方案是什么？

编写一个下载文件的脚本，然后使用 gzip 或 7zip 等工具对其进行解压缩，然后进行处理。根据处理类型、文件数量和总大小，您必须在某些时候保存它们以避免此类内存问题。解压后保存，一次处理1MB。

# c# - 创建 RDP 连接时出现转换错误

> ID：10423779
> 
> 赞同：2
> 
> 时间：2012-05-03T00:59:00.767
> 
> 标签：c#, com, casting

我正在尝试使用 Windows 窗体 anf 创建一些 RDP 客户端`AxMsTscAxNotSafeForScripting`

我有以下方法：

```
_rdpList = new List<AxMsTscAxNotSafeForScripting>();

public bool addRDP(string ip, string username, string pass)
    {
        for (int i = 0; i < number ; i++)
        {

            if (_rdpList[i].Connected.ToString() != "1")
            {
                try
                {
                    _rdpList[i].Server = ip;
                    _rdpList[i].UserName = username;

                    IMsTscNonScriptable secured = (IMsTscNonScriptable) _rdpList[i].GetOcx());
                    secured.ClearTextPassword = pass;
                    _rdpList[i].Connect();
                    _picList[int.Parse(_rdpList[i].Name)].ImageLocation = greenPath;
                    return true;

                }
                catch (Exception Ex)
                {
                    MessageBox.Show("Error Connecting", "Error connecting to remote desktop " + ip + " Error:  " + Ex.Message, MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
            }
        } 
```

我从线程调用此方法，当它尝试执行以下操作时：`IMsTscNonScriptable secured = (IMsTscNonScriptable) _rdpList[i].GetOcx());`

它失败并出现以下错误：

> 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“MSTSCLib.IMsTscNonScriptable”。此操作失败，因为 IID 为“{C1E6743A-41C1-4A74-832A-0DD06C1C7A0E}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

我整天都在研究它，但我无法理解这个问题？

奇怪的是，如果我从 Windows 窗体事件（例如按钮单击）调用此方法，每项工作都很好，当我从 WCF 服务调用此方法时会出现唯一的问题。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-07T14:02:10.467

在您的代码中替换：

```
IMsTscNonScriptable secured = (IMsTscNonScriptable) _rdpList[i].GetOcx());
secured.ClearTextPassword = pass; 
```

和：

```
_rdpList[i].AdvancedSettings2.ClearTextPassword = pass; 
```

注意：如果 AdvancedSettings2 在对象 _rdpList[i] 上不可用，请删除对 MSTSCLib 的引用并重新添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:10:29.307

可能有很多解决方案，但我认为最简单的方法是在`dynamic`这里使用。据我了解，这是他们创建`dynamic`关键字的部分原因。只要你知道接口，那么你就可以使用它而不必担心投射。您将失去智能感知，但省去了在 COM 上拔头发的麻烦

[一些关于动态的文档](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

您的代码如下所示：

```
dynamic secured = _rdpList[i].GetOcx()); 
```

# java - 递归方法不起作用

> ID：10423780
> 
> 赞同：-1
> 
> 时间：2012-05-03T00:59:09.133
> 
> 标签：java, algorithm, list, recursion, linked-list

我对填充结构的递归方法有疑问`LinkedHashMap<String,LinkedHashMap<String, Integer>>`。我不知道最后一次返回中的函数调用是否在正确的位置 - 我现在尝试将它放在三个不同的位置：

```
public static LinkedHashMap<String, LinkedHashMap<String, Integer>> GetXMLRegularExpression(
        Node node, LinkedHashMap<String, LinkedHashMap<String, Integer>> a) {
    List<Element> children = getChildren(node);
    List<String> childrenString = ConversionString(children);
    List<String> Clear = RemoveDuplicate(children);
    LinkedHashMap<String, Integer> lhm = new LinkedHashMap<String, Integer>();

    // System.out.println(childrenString);
    if (!isLeaf(node)) {
        for (int i = 0; i < Clear.size(); i++) {
            int count = NumberOfAppear(childrenString, Clear.get(i));
            lhm.put(Clear.get(i), count);
        }
        a.put(node.getNodeName(), lhm);
        return a;

    } else {
        lhm.put(node.getNodeName(), 0);
        a.put(node.getNodeName(), lhm);
        return a;
    }

    for (int j = 0; j < children.size(); j++) {
        return GetXMLRegularExpression(children.get(j), a);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:04:23.527

代码看起来有问题。您在循环中嵌入了“return”语句，这很奇怪。您是否尝试从此函数返回多个值？在循环的第一次迭代中，将执行“return”语句，结束该函数的执行。

# sql - SQL 数据范围最小值最大值类别

> ID：10423781
> 
> 赞同：2
> 
> 时间：2012-05-03T00:59:09.847
> 
> 标签：sql, range, max, break, min

我想确定 2 个类别的范围。类别 A 和类别 B。A 从 1 到 15 开始，B 从 16 到 31 开始，然后 A 再次从 32 到 40 开始。现在如果运行此查询

```
select min(range), max(range) 
from table
group by category
order by category 
```

它给了我从 1 到 40 的 A 类范围和从 16 到 31 的 B 类范围。我想打破范围并希望看到结果

```
Category A 1 to 15
Category B 16 to 31
Category A 32 to 40 
```

我怎么做？我需要第三列吗？我知道如果我有新类别的第 3 列，可以分别说 CDE，我可以按这些进行分组并获得结果。但我不知道该怎么做。

请帮帮我。

谢谢-Adeel

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:18:59.310

假设您试图将类别分成由连续整数组成的组，那么以下将起作用：

```
select category, diff, min(range), max(range)
from 
(
   select category, range,
      (range - row_number() over (partition by category order by range)) as diff
   from table
) t
group by category
order by 1, 3 
```

此查询基于以下观察：在给定的类别分组内，数字按顺序增加。因此，减去一个整数序列将产生一个常数，然后可以将其用于识别该特定范围。

`Row_Number()`是一个标准的 SQL 函数，因此它在大多数数据库中都可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:40:42.037

听起来[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.100%29.aspx)应该适合您，但这取决于您的 RDBMS 如何工作（以及是否支持）但是，您可能可以做某种增量计数，可以用作每个的乘数拼凑直到最大限制。如果您让我们知道 RDBMS，我可以提供一个示例。

# javascript - 如何使用 iframe 取消文件上传

> ID：10423785
> 
> 赞同：3
> 
> 时间：2012-05-03T00:59:53.637
> 
> 标签：javascript, jquery

我从上一个 stackoverflow 问题的答案中看到了这段代码：

```
if (iframeObj.contentWindow.document.execCommand)
    { // IE browsers
        iframeObj.contentWindow.document.execCommand('Stop');
    }
else
    { // other browsers
        iframeObj.contentWindow.stop();
    } 
```

这个问题可以在[这里](https://stackoverflow.com/questions/5280855/is-it-possible-to-cancel-file-upload-that-uses-hidden-iframe)查看但基本上他问的问题是隐藏的 iframe 是否有可能阻止文件上传。

现在我有一个“取消”按钮，当我上传文件时，如果我想取消上传，那么如果我点击“取消”按钮，我希望文件的上传停止。

但我的问题是，对于我拥有的 iframe 和我拥有的“取消”按钮功能，它是如何实现的，以便上面的代码可以用来取消我的代码中的文件上传？

下面是由表单和 iframe 组成的表单代码：

```
 var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return stopImageUpload(this);' class='imageuploadform' >" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "</p><p class='imagef1_cancel' align='center'><label>" + 
    "<input type='button' name='imageCancel' class='imageCancel' value='Cancel' /></label>" + 
    "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>"); 
```

下面是开始上传图片的 startImageUpload 函数，取消按钮点击处理函数显示在该函数中：

```
function startImageUpload(imageuploadform){

              $(".imageCancel").click(function() {
              $('.upload_target').get(0).contentwindow
          return stopImageUpload();

    });

      return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:58:25.930

我不确定，如果我理解你的问题。但是，如果您要问，为什么您的代码不起作用，那么问题如下：

1.) 您的函数名称是 startImageUpload，但在 onsubmit 处理程序中您调用 stopImageUpload

2.) 该行`$('.upload_target').get(0).contentwindow`缺少分号。更大的问题是，它什么也没做。

3.) 我不知道你的 stopImageUpload 函数究竟是如何工作的，因为你还没有在这里发布它。

希望这可以帮助。

# symfony - 带有学说的数据库翻译

> ID：10423786
> 
> 赞同：2
> 
> 时间：2012-05-03T01:00:15.990
> 
> 标签：symfony, doctrine-orm

在考虑了很多如何支持 i18n 之后，我想出了一个公认的解决方案来拥有一张单独的桌子。
**可翻译的问题**
我按照建议从学说扩展安装了可翻译，但没有按我的意愿工作，有经验的用户建议我不要使用它。即使有一个单独的表，它在主表和翻译表中都有可翻译的列，并以一种方式存储这些值。此外，如果默认语言环境更改（发生在我身上并可能再次发生），它会使事情变得复杂，因为主表中的默认值似乎没有指定的语言环境。另外我有几个可翻译字段（5~）。这将导致 5或者在回退的情况下甚至更多的左连接。

**其他解决**
方案 我认为的另一个解决方案是有一个单独的表，其中仅包含每个表的翻译，并可能通过 postLoad 事件侦听器设置默认语言环境和回退。这样我可以在没有 obj.translations['en' 的情况下调用 obj.getTitle() ].getTitle() ，无需提供语言环境。

**问题**
这种方法的问题是回退。一种解决方法是在加入期间添加“WITH locale in ('en','de') 例如。这将返回更多数据但回退会起作用。另一种方法是正在使用合并，但教义不可能将其映射到实体。有没有办法有效地实施后备？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T14:07:17.683

您可以查看[https://github.com/KnpLabs/DoctrineBehaviors#translatable](https://github.com/KnpLabs/DoctrineBehaviors#translatable)，这是我们深入研究后找到的最佳解决方案。

我们目前正在将它用于许多实体，并且效果很好。您可以查询翻译作为任何其他实体，连接，例如使用 DQL。

是的，你可以很容易地想象一个备用机制，使用现有的 api。

# c++ - 如何以编程方式刷新通知区域图标页面

> ID：10423787
> 
> 赞同：3
> 
> 时间：2012-05-03T01:00:21.933
> 
> 标签：c++, vb.net, windows-7, windows-explorer

背景：如果你看这里：http: [//msdn.microsoft.com/en-us/library/ee330740%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ee330740%28v=vs.85%29.aspx) 在底部你会看到：

> **注意** 卸载应用程序后，其通知区域图标仍可作为选项显示在控制面板的通知区域图标页面中长达 7 天。但是，在那里所做的任何更改都不会产生任何影响。

是的，当您卸载应用程序时，图标仍然存在于“通知区域图标页面”中，直到您杀死 Explorer.exe 并重新启动它 - 这是我要解决的问题。

您可以通过以下方式进入“通知区域图标页面”（在 Windows 7 中）：右键单击任务栏 > 属性 > 自定义

所以我想做的是以编程方式从该列表中删除图标，甚至删除所有图标，然后让 Windows 在您重新打开该列表页面时重新创建它们（这可以通过删除`PastIconsStream`and `IconStreams`in来完成`HKEY_CURRENT_USER\Software\Classes\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify`）

但同样，问题是您仅在杀死并重新启动 Explorer.exe**后**才能看到结果- 我假设当您重新启动 explorer.exe 时，它​​会重建列表，但这次使用正确的图标（即不包括已卸载的图标应用）。

所以为了让事情更简单，我会问这个：我如何以编程方式让资源管理器在我删除后刷新“通知区域图标页面列表” `PastIconsStream`并且`IconStreams`不杀死/重新启动 explorer.exe 并且不重新启动/注销，这样列表将不包括已卸载的应用程序图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-01T09:22:46.163

强制 Windows 重建其内部图标缓存应该可以解决问题。

为此，您需要：

*   更改`Shell Icon Size`注册表中的参数
*   发送`HWND_BROADCAST`通知 UI 设置已更改
*   恢复默认`Shell Icon Size`值（否则整个Windows UI都会乱七八糟）
*   重新发送广播消息

这是用 VB6（不是 VB.NET）编写的演示代码（不幸的是）：

```
Private Sub RebuildIconCache()

    Dim IconSize As Integer
    Dim r As Long

    IconSize = QueryValue(HKEY_CURRENT_USER, "Control Panel\Desktop\WindowMetrics", "Shell Icon Size")
    SetKeyValue HKEY_CURRENT_USER, "Control Panel\Desktop\WindowMetrics", "Shell Icon Size", CStr(IconSize - 1)

    SendMessageTimeout HWND_BROADCAST, _
                        WM_SETTINGCHANGE, _
                        SPI_SETNONCLIENTMETRICS, _
                        0&, SMTO_ABORTIFHUNG, _
                        10000&, r

    DoEvents

    If IconSize < 32 Then IconSize = 32
    SetKeyValue HKEY_CURRENT_USER, "Control Panel\Desktop\WindowMetrics", "Shell Icon Size", CStr(IconSize)

    SendMessageTimeout HWND_BROADCAST, _
                        WM_SETTINGCHANGE, _
                        SPI_SETNONCLIENTMETRICS, _
                        0&, SMTO_ABORTIFHUNG, _
                        10000&, r

End Sub 
```

# php - 如果找不到类中的属性，如何在函数/方法中返回 null？

> ID：10423792
> 
> 赞同：3
> 
> 时间：2012-05-03T01:00:32.367
> 
> 标签：php, oop, multidimensional-array, php-5.3, stdclass

我`stdClass`用来将数组转换为对象，

```
function array_to_object($array)
{
    if(!is_array($array)) {
        return $array;
    }

    $object = new stdClass();
    foreach($array as $key => $value)
    {
        $key = (string) $key ;
        $object->$key = is_array($value) ? array_to_object($value) : $value;
    }

    return $object;
}

$type = array(
    "category"  => "admin",
    "person"    => "unique"
);

$type = array_to_object($type);

var_dump($type->category); // string(5) "admin" 
```

当然，当我想首先获取未在数组中设置的属性时会出错，

```
var_dump($type->image); 
```

错误信息，

```
Notice: Undefined property: stdClass::$image in C:\wamp\www\test\2012\php\array_to_object.php on line 52
NULL 
```

`null`我想知道如果**没有找到属性**，我是否可以让函数返回？

```
 var_dump($type->image); //NULL 
```

**编辑：**

决定把上面的那个函数变成一个类，但还是不能`__get()`正常工作，

```
class objectify
{
    public function __get($name)
    {
        if (isset($this->$name) === true){
            return $this->$name;
        } else {
            return null;
        }
    }

    public function array_to_object($array)
    {
        if(!is_array($array)) {
            return $array;
        }

        $object = self::__get($name);
        foreach($array as $key => $value)
        {
            $key = (string) $key ;
            $object->$key = is_array($value) ? self::array_to_object($value) : $value;
        }
        return $object;
    }
}

$object = new objectify();

$type = array(
    "category"  => "admin",
    "person"    => "unique"
);

$type = $object->array_to_object($type);
var_dump($type->category);
var_dump($type->image); 
```

错误信息，

```
Notice: Undefined variable: name in C:\wamp\www\test\2012\php\array_to_object.php on line 85
string(5) "admin" 
Notice: Undefined property: stdClass::$image in C:\wamp\www\test\2012\php\array_to_object.php on line 107
NULL 
```

我认为这条线是错误的来源，但我不知道如何处理它......

```
$object = self::__get($name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:41:17.273

将约翰关于 __get() 的答案结合在一起：

```
<? //PHP 5.3+

class maybeBag {
    public function __get($name){
        if (isset($this->$name) === true){
            return $this->$name;
        } else {
            return null;
        }
    }

    public static function ensureIsObject($values){
        if (\is_array($values) !== true){
            return $values;
        }
        $o = new static(); //Late-bound make instance of own class
        foreach($values as $key => $value){
            $o->$key = static::ensureIsObject($value);
        }
        return $o;
    }
}

//Demo

$type = array(
    'category' => 'admin',
    'person'   => 'unique'
);
$type = maybeBag::ensureIsObject($type);

var_dump($type->category); //string(5) "admin"
var_dump($type->image); //NULL

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-04T18:33:48.540

在你的课堂上使用这个神奇的方法。每当请求未定义的属性时，都会返回 null。

对于 PHP 7：

```
public function __get($prop){
    return $this->$prop ?? null;
} 
```

对于 PHP 5：

```
public function __get($prop){
    return isset($this->$prop) ? $this->$prop: null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:07:10.263

未经测试，但我认为使用魔法方法`__get()`可能在这里工作：

```
public function __get($parameter)
{
    return (isset($this->$parameter)) ? $this->$parameter : null;
} 
```

# android - 如何在线性布局中同样分离图像视图

> ID：10423797
> 
> 赞同：2
> 
> 时间：2012-05-03T01:01:35.390
> 
> 标签：android, layout, view

我有 4 个水平放置在 LinearLayout 中的 ImageView。我需要两件事：

1.  如果空间受限于它们的高度，我希望它们在 LinearLayout 上均匀分布，即彼此之间的空间相等
2.  如果空间受到宽度的限制，我希望图像缩小，以便它们都适合视图。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T01:22:07.190

你可以试试`weightSum`

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:orientation="horizontal"
        android:weightSum="4">
        <!-- Put your imageViews here and set android:layout_weight="1" each -->
</LinearLayout> 
```

您还可以设置 minHeight 和 minWidth

```
 <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:minHeight="20dp"
            android:minWidth="20dp"
    ></LinearLayout> 
```

# php - 使用 PHP 的基本 JSON

> ID：10423799
> 
> 赞同：0
> 
> 时间：2012-05-03T01:01:56.797
> 
> 标签：php, json

我在 PHP 中有一些这样的数据：

```
NumberOfPeople.php
<?php
$numberOfPeople = 5;
?> 
```

如何将该变量转换为 JSON 对象，然后将其输出到 HTML 文件中。

像这样的东西：

```
RandomHTMLFile.html
<script type="text/javascript">
  var NumberOfPeople = JSON VARIABLE FROM THE PHP FILE
</script> 
```

这是 JSON 的用途，对吗？

请注意，输出文件是 HTML 文件而不是 PHP 文件，因此它必须完全基于 Javascript。

此外，HTML 文件将位于与 PHP 文件不同的服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:04:25.547

将其更改为 PHP 数组并使用[`json_encode()`](http://php.net/json-encode)函数

```
$jsonArray = array('numberOfPeople' => 5); //Now the value will be accessible under `numberOfPeople` json index
$json = json_encode($jsonArray);
echo $json; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:03:47.403

[`json_encode`](http://php.net/json-encode)是您需要的主要内容。请注意 UTF-8 编码要求。[`utf8_encode`](http://php.net/utf8-encode)需要时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:05:28.017

要从静态 html 页面访问在服务器端生成的 json 输出，您可以使用`jquery`的内置`$.getJSON`函数。

```
RandomHTMLFile.html
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
<script type="text/javascript">
  var NumberOfPeople;
  $.getJSON('NumberOfPeople.php',{},function(response){ 
     NumberOfPeople = response;
  });
</script> 
```

在服务器端，您需要使用 php 的`json_encode`函数将变量转换为 json：

```
NumberOfPeople.php
<?php
$numberOfPeople = 5;
echo json_encode($numberOfPeople);
?> 
```

当然，您可以考虑使用预先计算的变量生成 html 页面。可以使用 php 输出 html 并提供它，就好像它们像静态 html 页面一样被请求。您可能需要阅读有关`mod_rewrite`实现此目的的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T01:39:35.940

将标头设置为 json，然后使用 javascript 获取它。

```
header("Content-type: application/json"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T07:03:42.807

**NumberOfPeople.php**

```
<?php
$data['NumberOfPeople'] = 5;
echo json_encode($data);
?> 
```

**RandomHTMLFile.html**

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
    <script type="text/javascript">
      var NumberOfPeople;
      $.getJSON('NumberOfPeople.php',function(data){ 
         var NumberOfPeople = data.NumberOfPeople;
      });
    </script> 
```

# iphone - 双击换屏方法

> ID：10423800
> 
> 赞同：0
> 
> 时间：2012-05-03T01:02:00.530
> 
> 标签：iphone, touch-event

我已经成功地使用了双击操作，`- (void) touchesEnded`但我想创建一个双击事件来切换到另一个视图，就像你按下按钮一样。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:15:32.837

使用手势将是有用且简单的。只需设置触摸次数即可完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:10:29.237

我认为您需要在代码中执行此操作。您可以在界面生成器中创建 segue，给它一个标识符，然后在捕获双击事件时调用 performSegueWithIdentifier。

# salesforce - 您是否可以进行多个 Salesforce 部署，将大多数用户放在更便宜的一个和几个具有最佳功能的用户中？

> ID：10423801
> 
> 赞同：0
> 
> 时间：2012-05-03T01:02:28.297
> 
> 标签：salesforce, crm

由于 Salesforce 需要为具有一些高级功能的部署支付高额的每位用户费用，因此是否有人尝试在用户很少的单独部署中获得高级功能（在日常工作中可能比基本功能更不需要这些功能）并从大多数员工实际使用的更便宜的基本部署中传输数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:19:19.917

我们使用类似的方案从辅助实例同步数据，然后再将它们提升到完整功能实例。Jitterbit 4 具有 salesforce 连接器，可以非常轻松地创建同步任务（查询/upsert，但即使没有向导，它也易于使用 sf api 服务），您只需要链接成对操作（一个 Web 服务调用以从源加载数据，另一个在目的地使用源记录 ID 作为目的地中的外部 ID 来打乱）。

# javascript - WebDB：查找预先存在的数据库和/或预先存在的表

> ID：10423803
> 
> 赞同：0
> 
> 时间：2012-05-03T01:02:40.603
> 
> 标签：javascript, html, google-chrome, web-sql

我已经开始探索使用 web 数据库（在本例中是 chrome 中的数据库），您可以使用 javascript 运行调用。在文档加载时，我首先运行以下函数：

```
dbUtils = {
    db : null,
    initDatabase : function(){
        try
        {
            if(window.openDatabase)
            {
                this.db = openDatabase("testDB", "1.0", "Test Database", 2*1024*1024);
            }
        }
        catch(e)
        {
            alert("There was an error loading the database");
        }
    }
}; 
```

我想知道的是，有没有办法验证 testDB 是否存在或者它是否已经有任何表？还有一种方法可以列出数据库中的所有表名吗？这个测试只是为了弄清楚我是应该用新数据初始化用户数据库还是应该使用预先存在的数据。我一直在寻找解决方案，但似乎找不到任何东西。我不确定我是否输入了错误的搜索词，我应该在 webDB 下搜索吗？还是我应该使用其他术语/名称？

谢谢你的帮助！

# python - 数据库连接 - Django 是自动重命名什么的！混乱

> ID：10423804
> 
> 赞同：0
> 
> 时间：2012-05-03T01:02:41.980
> 
> 标签：python, mysql, database, django

制作博客、数据库等。事情是，我有一个名为“帖子”的数据库。

```
'default': {
    'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'posts',                      # Or path to database file if using sqlite3.
    'USER': '*******',                      # Not used with sqlite3.
    'PASSWORD': '*******',                  # Not used with sqlite3.
    'HOST': '/Applications/MAMP/tmp/mysql/mysql.sock',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '****',                      # Set to empty string for default. Not used with sqlite3.
} 
```

模型.py

```
from django.db import models

class posts(models.Model):
    author = models.CharField(max_length = 30)
    title = models.CharField(max_length = 100)
    bodytext = models.TextField()
    timestamp = models.DateTimeField() 
```

视图.py

```
from django.shortcuts import render_to_response
from models import posts 

#from settings import default
def index(request):
    entries = posts.objects.all()[:10]
    return render_to_response('homepage/index.html', {'posts' : entries} 
```

输出

```
OperationalError at /
(1049, "Unknown database 'posts.homepage_posts'")
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4
Exception Type: OperationalError
Exception Value:    
(1049, "Unknown database 'posts.homepage_posts'")
Exception Location: /Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg/MySQLdb/connections.py in __init__, line 187
Python Executable:  /usr/bin/python
Python Version: 2.7.1
Python Path:    
['/Users/thor/Sites/FirstBlog',
 '/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.7-intel.egg',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
 '/Library/Python/2.7/site-packages']
Server time:    Wed, 2 May 2012 19:56:53 -0500 
```

它会自动为数据库名称添加后缀`.homepage_posts`，使其无法访问。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:32:53.853

django 自动生成表的默认命名约定是在表名前面加上`<app_label>_`
你显然在名为“主页”的应用程序中有这个模式/视图。这是有效的，不是你的问题。django 这样做是为了在不同应用程序之间命名您的各种表，并在混合 3rd 方应用程序时防止名称冲突。

此错误告诉您整个数据库不存在。它几乎 100% 意味着你没有告诉 django 从你的模型结构中填充你的数据库：

```
python manage.py syncdb 
```

现在运行它，每次添加新应用程序或创建新模型时也运行它。它将生成您的数据库和表。

如果您真的关心，您还可以通过为模型设置元“db_table”字段来控制数据库表的实际名称：[https ://docs.djangoproject.com/en/dev/ref/models/options/#db -桌子](https://docs.djangoproject.com/en/dev/ref/models/options/#db-table)

```
class posts(models.Model):
    class Meta:
        db_table = 'foo_bar' 
```

...但同样，这完全是一个单独的问题。

# vb.net - 修改 XSD 架构 - 添加新元素显示为灰色

> ID：10423807
> 
> 赞同：1
> 
> 时间：2012-05-03T01:03:29.547
> 
> 标签：vb.net, visual-studio, xsd, visual-studio-2003

我想修改我的 XSD 架构以添加一个新元素，但该选项显示为灰色。只能添加新的关系或键。如何通过模式图做到这一点？

![在此处输入图像描述](../Images/b989cc62cc707c2cc91a8d127ef7e90c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-30T17:46:21.233

我也有这个问题。我以管理员身份重新打开 Visual Studio 并解决了。我认为更改封装目录和/或 schema.cs 的安全性也可能解决此问题，但就像我说的，我以管理员身份运行 VS。

# c# - Windows Mobile 6 优化应用程序内存消耗

> ID：10423808
> 
> 赞同：1
> 
> 时间：2012-05-03T01:03:32.130
> 
> 标签：c#, windows-mobile, compact-framework

我支持基于 Windows Mobile 6 .Net 紧凑框架表单的应用程序。我们现在已经达到了应用程序中使用的数据量导致内存不足错误的地步。虽然该应用程序的预期寿命有限，但我希望它能够继续充分发挥作用，直到开发出替代平台/应用程序。应用程序中使用的数据量并没有变小，因此一种选择是减少应用程序代码的大小。

前段时间，我偶然发现了一篇博客文章或文档，我记得它指出了将应用程序代码占用的内存最小化的一种方法是将所有源代码移动到单独的程序集中并使用小型启动 shell 启动应用程序。在开始研究该方法之前，我想确认这是正确的方法并量化这样做可能实现的节省。

上述方法是否正确，如果正确，是否有支持它的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:24:16.107

您描述的将所有应用程序代码放入托管 dll 并创建一个非常小的可执行存根以启动的方法确实减少了进程所需的内存量。您将节省的内存量等于与下一个最高 64Kb 边界对齐的可执行文件的大小。

有关详细信息，请参阅此博客条目：http: [//blogs.msdn.com/b/robtiffany/archive/2009/04/09/memmaker-for-the-net-compact-framework.aspx](http://blogs.msdn.com/b/robtiffany/archive/2009/04/09/memmaker-for-the-net-compact-framework.aspx)

该博客条目还包含有关 WinCE 5 内存管理系统的更详细说明的链接，以及为什么可怕的“dll 紧缩”是一个如此大的问题。

但是，请注意，自从推出 Windows Mobile 6.1 以来，情况发生了一些变化。本机 Dll 不再映射到与以前版本相同的位置，从而使您的进程有更多的内存空间进行操作。您在问题中提到了 Windows Mobile 6，因此请注意，虽然这个建议的重构确实会给您更多的内存来使用，但它可能不会给您足够的内存（除非您的 .exe 很大）。

有关 Windows Mobile 6.1 中引入的内存管理更改的更多信息，请参见此处：

[http://bolingconsulting.com/2008/windows-mobile-6-1-memory-management-changes/](http://bolingconsulting.com/2008/windows-mobile-6-1-memory-management-changes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:51:05.563

我曾经遇到过这个“内存不足”的问题。我必须创建一个特殊的类来保存我的数据，它所包含的信息不如我的 PC 应用程序使用的类那么多。

[除了我在使用MS-DOS](http://www.microsoft.com/en-us/download/details.aspx?id=21936)中阅读的内容之外，我从未见过您引用的关于使用小型启动 shell 脚本的文档。

# c# - Winform闪烁问题

> ID：10423813
> 
> 赞同：2
> 
> 时间：2012-05-03T01:04:33.163
> 
> 标签：c#, winforms, paint, flicker, drawimage

我有一个闪烁非常糟糕的 Winform 用户控件。控件的功能运行良好。它只是闪烁真的很糟糕。我正在将所有绘图都绘制到位图上，然后将`DrawImage`位图复制到屏幕上，所以我对发生的闪烁程度感到惊讶。这是我所拥有的摘录：

```
 private void ScrollPanel_Paint(object sender, PaintEventArgs e)
    {
        var c = (Calendar)Parent;

        Bitmap bmp = c.RequestImage();
        if (bmp == null)
            return;

        e.Graphics.DrawImage(bmp, new Rectangle(0, 0, ClientSize.Width, ClientSize.Height),
                             new Rectangle(0, _scrollOffset, ClientSize.Width, ClientSize.Height),
                             GraphicsUnit.Pixel);
        _bmpSize = bmp.Height;
        e.Graphics.Dispose();
        bmp.Dispose();
    }

    private void ScrollPanel_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            _mouseDown = true;
            _oldMouseCoords = e.Location;
        }
    }

    private void ScrollPanel_MouseUp(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
            _mouseDown = false;
    }

    private void ScrollPanel_MouseMove(object sender, MouseEventArgs e)
    {
        if (_mouseDown && e.Location.Y < _oldMouseCoords.Y && _scrollOffset < _bmpSize - _scrollOffset - ClientSize.Height)
        {
            int offset = _oldMouseCoords.Y - e.Location.Y;
            _scrollOffset += offset;
            Refresh();
        }
        if (_mouseDown && e.Location.Y > _oldMouseCoords.Y && _scrollOffset > 0)
        {
            int offset = e.Location.Y - _oldMouseCoords.Y;
            _scrollOffset -= offset;
            Refresh();
        }
        _oldMouseCoords = e.Location;
    } 
```

它应该做的是，当我用鼠标拖动时，它应该滚动位图，就是这样。就像我说的那样，功能一切正常。从`Paint`事件中可以看出，我所做的只是获取我的位图，然后将其直接复制到屏幕上。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:55:40.207

看看这个关于双缓冲的另一个问题，以确保你设置正确...... [启用双缓冲](https://stackoverflow.com/questions/302614/enabling-double-buffering)

根据我的经验，一旦设置了双缓冲，闪烁是由正在绘制的控件背景引起的，即使您选择自己进行所有绘制。我通过从正在绘制的控件派生我自己的控件类、覆盖 OnPaintBackground 方法并且不在该方法中调用基类实现来避免这种情况。

所以在你的情况下，我假设 ScrollPanel 是一个面板。我会从 Panel 派生一个类，并使用它来代替 Panel。然后我将覆盖 OnPaintBackground，并将该方法的主体留空。

完成所有这些后，我得到了与 WinForms 一样平滑的滚动。

# ruby-on-rails - Postgresql 破轨查询功能

> ID：10423823
> 
> 赞同：1
> 
> 时间：2012-05-03T01:07:09.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我有一个在 sqlite 上运行良好的 rails 应用程序，但是在切换到 postgre 时，我遇到了这个查询的问题：

```
User.find(1).ratings 
```

仅查询作品，例如

```
User.find(1) 
```

生产

```
SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]] 
```

但是，如果我像这样附加评级：

```
User.find(1).ratings 
```

生产

```
 User Load (1.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rating Load (0.9ms)  SELECT "ratings".* FROM "ratings" WHERE "ratings"."user_id" = 1
PG::Error: ERROR:  operator does not exist: character varying = integer
LINE 1: ...CT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = 1
                                                                    ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = 1
ActiveRecord::StatementInvalid: PG::Error: ERROR:  operator does not exist: character varying = integer
LINE 1: ...CT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = 1
                                                                    ^ 
```

无论是将 :id 作为 int 还是 string 传递，它仍然会产生上述错误。模型设置为 :ratings belongs_to User which has_many :ratings。有任何想法吗？提前致谢。

版本：Rails 3.1.1、Ruby 1.9.2、设计 1.5.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T01:44:25.347

这个错误

> 错误：运算符不存在：字符变化 = 整数

通常意味着您正在尝试比较两种不同的数据类型是否相等。有些平台会让你通过默默地强制一个到另一个来做到这一点。SQLite 会，它会让你做很多不符合 SQL 标准的事情。PostgreSQL 通常不允许这样的比较。因为它打印

```
WHERE "ratings"."user_id" = 1 
```

在错误消息中，它告诉您，尽管您提供了一个整数 ( `1`)，但 rating.user_id 列实际上是一个 varchar()。

* * *

SQLite 不是 SQL。这里我使用通用数据类型“wibble”。

```
sqlite> create table test (n integer not null, s wibble not null);
sqlite> insert into test values (1, 'Wibble');
sqlite> insert into test values ('Wibble', 1);
sqlite> select * from test;
1|Wibble
Wibble|1 
```

SQLite 很高兴让我将“Wibble”插入一个整数列。如果不是噩梦，那至少应该让你停下来。

PostgreSQL 是免费的，可用于许多平台。如果您希望在 Heroku 上进行部署，我看不出有任何理由不安装 PostgreSQL 并针对它进行开发而不是使用 SQLite。

# java - 使用邻接矩阵问题的 Dijkstra 算法

> ID：10423826
> 
> 赞同：3
> 
> 时间：2012-05-03T01:07:20.467
> 
> 标签：java, algorithm, matrix, dijkstra, adjacency-matrix

'正在尝试检索第一个和最后一个节点之间的最短路径。问题是我的代码总是返回 0。我有一种感觉，这是因为它正在计算第一个节点和第一个节点之间的距离，它会变为零，但我不是 100%。为什么我的代码总是返回 0？

adj矩阵为[10][10]且所有节点都连通，g.network[][]为矩阵。

```
private static int dijkstras(Graph g) {
    // Dijkstra's Algorithm
    int[] best = new int[g.network.length];
    boolean[] visited = new boolean[g.network.length];
    int max = 10000; // Infinity equivalent.
    for (int i = 0; i < g.network.length; i++)
    {
        best[i] = max;
        visited[i] = false;
    }

    best[0] = 0;

    for(int i = 0; i < g.network.length; i++)
    {
        int min = max;
        int currentNode = 0;
        for (int j = 0; j < g.network.length; j++)
        {
            if (!visited[j] && best[j] < min)
            {
                currentNode = j;
                min = best[j];
            }
        }
        visited[currentNode] = true;
        for (int j = 0; j < g.network.length; j++)
        {
            if (g.network[currentNode][j] < max && best[currentNode] + g.network[currentNode][j] < best[j])
            {
                best[j] = best[currentNode] + g.network[currentNode][j];
            }
        }
    }
            return best[g.network.length - 2];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T23:11:53.223

我想我可能已经解决了这个问题，通过如下修改代码（我现在传入一个起点而不是硬编码在“0”中）：

```
 private static int dijkstras(Graph g, int start) // Added a start point.
    {
    // Dijkstra's Algorithm
    int[] best = new int[g.network.length];
    boolean[] visited = new boolean[g.network.length];
    int max = 10000; // Infinity equivalent.
    for (int i = 0; i < g.network.length; i++)
    {
        best[i] = max;
        visited[i] = false;
    }

    best[start] = start; // Changed the 0 to variable start.

    for(int i = 0; i < g.network.length; i++)
    {
        int min = max;
        int currentNode = 0;
        for (int j = 0; j < g.network.length; j++)
        {
            if (!visited[j] && best[j] < min)
            {
                currentNode = j;
                min = best[j];
            }
        }
        visited[currentNode] = true;
        for (int j = 0; j < g.network.length; j++)
        {
            if (g.network[currentNode][j] < max && best[currentNode] +   g.network[currentNode][j] < best[j])
            {
                best[j] = best[currentNode] + g.network[currentNode][j];
            }
        }
    }
            return best[g.network.length - 2];
} 
```

我通过 for 循环运行这段代码，瞧……现在不只是返回零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:56:17.087

我阅读了您的代码，并且几乎可以确定它是正确的 dijkstra 算法，所以我认为您的第一个节点和最后一个节点之间的路径可能为零。

# php - 我需要 PHP 帮助来查看整数是正数还是负数

> ID：10423834
> 
> 赞同：-1
> 
> 时间：2012-05-03T01:09:00.647
> 
> 标签：php

好的，我已经做了很多研究，但仍然没有发现任何东西可以使这项工作：

> 编写一个调用的 PHP 函数`isPositive`，该函数接受一个表示整数的参数，当整数为正时返回 true，当整数为负时返回 false。顺便说一句，0是一个正数。

这就是我需要做的。我尝试了不同的东西，但我没有得到任何东西来测试我的数字是正数还是负数。

谢谢你的帮助！

我得到了这个，但是，它不起作用：

```
function isPositive($val = NULL)    // Add default to save php errors if nothing is passed
{
    if ((int)$val)          // type cast for security
    {
            if ($val >= 0)
            {
                    return TRUE;
            }
    }
} 
```

这是我尝试过的其他代码，但仍然无法正常工作：

```
function isPositive($number = NULL)
    if ($number = <0)
        return true;
    else
        return false; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T01:22:32.993

```
function isPositive($number) {
    return is_numeric($number) && ($number >= 0);
} 
```

如果您希望该函数仅适用于整数，您可以更改`is_numeric`为。`is_int`让我们看看你的函数有什么问题：

```
function isPositive($val = NULL)    // Add default to save php errors if nothing is passed
{
    if ((int)$val)          // type cast for security
    {
            if ($val >= 0)
            {
                    return TRUE;
            }
    }
} 
```

1.  如果两个子句中的任何一个子句失败，您都不会返回任何内容，那里应该有一个`return false;`地方。`NULL`如果任何子句失败，您的函数将返回， `NULL !== false`.
2.  `if ((int)$val)`是完全错误的。您正在检查类型转换是否有效？这没用，您需要检查的是`$val`数字还是整数，最简单的方法是使用`is_int`,`is_float`和`is_numeric`。查看他们的手册页了解更多信息。
3.  `($val = NULL)`完全没有必要。当有人没有正确使用函数时，您希望 PHP 抛出错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T01:14:32.767

我将用另一个问题来回答你的问题：

积极或消极的定义是什么？

正数大于零。

负数小于零。

那么，如何在 PHP 中比较两个数字呢？

有这样的运营商吗？

奖金：你如何处理零？它是积极的还是消极的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:21:42.440

就像上面有人提到的

```
$int = (int)-2;

function test( $int ){

    return (bool) ( $int >= 0 );
}

var_dump(test( $int )); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-03T01:12:17.483

```
function NegativeOrNot($number)
{    
    if ($number >= 0)
        return true;
    else
        return false;
} 
```

很简单。

# css - 如何在 GWT 中的另一个小部件（图像）之上显示一个小部件（Horizo ntalPanel）？

> ID：10423835
> 
> 赞同：2
> 
> 时间：2012-05-03T01:09:03.957
> 
> 标签：css, gwt, uibinder, gwt-widgets

我试图让 Horizo​​ntalPanel 中的两个按钮显示在图像顶部。不是在上面，因为您看到按钮，然后进一步向下看页面并看到图像，但是您查看图像并且它上面有按钮。

这是我的 Page.ui.xml 文件中的代码：

```
 <g:FocusPanel ui:field="profileImagePanel" addStyleNames="{style.headerImage}">
     <g:AbsolutePanel addStyleNames="{style.innerImagePanel}">
         <g:Image ui:field="profileImage" addStyleNames="{style.profileImage}"/>
         <g:HorizontalPanel ui:field="imageEditButtons" addStyleNames="{style.imageEditButtons}">
             <w:MultiUseButton ui:field="clearImage" addStyleNames="{style.change}" type="secondary" text="{i18n.clearImage}" visible="false"/>
             <w:MultiUseButton ui:field="changeImage" type="secondary" text="{i18n.changeImage}" visible="false"/>
         </g:HorizontalPanel>
     </g:AbsolutePanel>
 </g:FocusPanel> 
```

样式是：

```
.headerImage {
    position: absolute;
    top: 0;
    left: 0;
    width: 150px;
}

.profileImage {
    width: 150px;
    position: relative;
}

.change {
    float: right;
}

.headerImage a {
    display: block;
}

.imageEditButtons {
    width:100%;
}

.innerImagePanel {
    width:150px;
} 
```

我尝试使用 FlowPanel 而不是 AbsolutePanel，但这不起作用。我试过制作 profileImage`position:relative`和 imageEditButtons `position:absolute`，但这会破坏页面其余部分的整个显示。我也尝试设置 imageEditButtons`margin-top:-20px`但它位于图像下方而不是顶部。如果我将 Horizo​​ntalPanel 放在 Image 之前的 AbsolutePanel 中，则按钮位于图像上方，如果我尝试更改上边距，它会将按钮和 Image 向下移动。

我的想法不多了。任何有关如何使这项工作的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:44:55.630

应用样式`background-image`而不是使用小部件*Image*。这是我想象你的 UiBinder 文件内容的方式：

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
     xmlns:g="urn:import:com.google.gwt.user.client.ui">
   <ui:style>
       /* requirement style */
       .myPanel {
           width: 200px; /* width of your background image */
           height: 400px; /* height of your background image */     
           background-image: url(images/myimage.jpg); /* your image */
           background-repeat: no-repeat;
       }

       /* optional style */
       .myButton {
           margin: 10px;
           width: 80px;
           height: 40px;
       }
   </ui:style>
   <g:HTMLPanel>
       <g:FocusPanel ui:field="profileImagePanel">
           <g:AbsolutePanel addStyleNames="{style.myPanel}">
               <g:HorizontalPanel ui:field="imageEditButtons">
                   <g:Button ui:field="clearImage" text="clear image" addStyleNames="{style.myButton}" />
                   <g:Button ui:field="changeImage" text="second button" addStyleNames="{style.myButton}" />
               </g:HorizontalPanel>
           </g:AbsolutePanel>
       </g:FocusPanel>
   </g:HTMLPanel> 
```

`g:Button`用您的替换我的标签`w:MultiUseButton`并添加所需的其他样式。您可以在 css 文件中引入的样式。结果，你应该得到你想要的。在这种情况下，不需要 AbsolutePanel。简单的 FlowPanel 也适用。

# libxml2 - libxml2 保留空标签

> ID：10423839
> 
> 赞同：3
> 
> 时间：2012-05-03T01:09:37.657
> 
> 标签：libxml2

libxml2（用于 C）在保存时不会以原始形式保留空元素。它取代`<tag></tag>`了`<tag/>`技术上正确但给我们带来问题的技术。

```
xmlDocPtr doc = xmlParseFile("myfile.xml");
xmlNodePtr root = xmlSaveFile("mynewfile.xml", doc); 
```

我尝试过使用各种选项（使用`xlmReadFile`），但似乎没有一个会影响输出。这里的一篇文章提到了禁用标签压缩，但这个例子是针对 PERL 的，我没有找到 C 的模拟。

是否有禁用此行为的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:15:08.297

刚刚`enum`在[`xmlsave`模块文档](http://xmlsoft.org/html/libxml-xmlsave.html)中找到了这个：

```
 Enum xmlSaveOption {
     XML_SAVE_FORMAT = 1 : format save output
     XML_SAVE_NO_DECL = 2 : drop the xml declaration
     XML_SAVE_NO_EMPTY = 4 : no empty tags
     XML_SAVE_NO_XHTML = 8 : disable XHTML1 specific rules
     XML_SAVE_XHTML = 16 : force XHTML1 specific rules
     XML_SAVE_AS_XML = 32 : force XML serialization on HTML doc
     XML_SAVE_AS_HTML = 64 : force HTML serialization on XML doc
     XML_SAVE_WSNONSIG = 128 : format with non-significant whitespace
 } 
```

也许您可以重构您的应用程序以使用此模块进行序列化，并使用这些选项进行一些操作。特别与`XML_SAVE_NO_EMPTY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T15:30:37.397

您的代码可能如下所示：

```
xmlSaveCtxt *ctxt = xmlSaveToFilename("mynewfile.xml", "UTF-8", XML_SAVE_FORMAT | XML_SAVE_NO_EMPTY);
if (!ctxt || xmlSaveDoc(ctxt, doc) < 0 || xmlSaveClose(ctxt) < 0)
  //...deal with the error 
```

# ios - 如何对pdf（iOS）中的图像进行下采样？

> ID：10423842
> 
> 赞同：0
> 
> 时间：2012-05-03T01:10:12.080
> 
> 标签：ios, pdf

我的问题与[这个](https://stackoverflow.com/questions/9497120/how-to-downsample-images-within-pdf-file)问题类似，只是我想在 iOS 中进行，而不是使用 java 或命令行。

给定：我从我的包（或 Documents 目录或其他任何地方）读入了一个 pdf 文件。

*   它包含图像吗？
*   如果是这样，它们的分辨率是多少？
*   如果 > myMaxResolution，如何使用在 myMaxResolution 渲染的图像创建 PDF 视图？

例如：如果 pdf 是以 300dpi 扫描的一堆页面，我想以 72dpi 显示它们，我的目标是获得 17 倍的加速。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:26:50.073

我假设您想定义一个目标分辨率以支持包含太大而无法加载到 iOS 设备内存中的图像的文档（根据显示 PDF 页面的要求）？

查看 Apple 示例代码项目[Large Image Downsizing](http://developer.apple.com/library/ios/samplecode/LargeImageDownsizing/)。您可以修改该示例以呈现 PDF 页面（而不是图像），同时受益于相同的增量下采样。您可以定义目标分辨率，并且永远不会尝试将整个源文档一次全部加载到内存中。相反，目标 PDF 呈现以增量方式“组装”，在您定义的目标分辨率下。无论源分辨率实际是什么，您都可以执行此操作。

增量图像解码仅适用于 iOS 中的 TIFF、JPEG、PNG。但是，不支持 BMP、GIF、隔行扫描图像。在您的上下文中，这仅意味着如果您的 PDF 包含后一种类型的图像，它们将被完整解码到内存中，因此希望这些图像相对较小并且您的 PDF 中的大图像是前一种格式。

如示例自述文件中所述，源 PDF 可以存在于应用程序包、照片卷或其他位置（例如下载的 OTA）中。

> 此外，我修改了示例以支持 PDF。你可以[在这里下载](http://bobjt.com/code/DownsizeImageOrPDF_iOS.zip)。在我的测试中，目标 PDF 以适当的目标分辨率呈现，包括您所期望的任何文本、字形或矢量元素。

# javascript - 用javascript改变表格的颜色

> ID：10423846
> 
> 赞同：-1
> 
> 时间：2012-05-03T01:10:40.193
> 
> 标签：javascript, html

我正在努力为我的考试而学习，我认为我做对了......我想根据您单击的单元格更改表格的颜色（字体或背景）我以为我指的是表格的权利，但这段代码不起作用......我不知道我做错了什么，我会很感激你能提供的任何帮助或解释

```
<html>
     <script language="text/JavaScript">
            function changeFont(color){
                document.getElementbyId("miTabla").style.backgroundColor = color;
            }
            function changeBack(color){
                 document.getLementbyId("miTabla").style.font.color = color;
            }
        </script>
    <body>
         <header>Tabla de ejemplo</header>
         <table id="miTabla" border="2">
                <tr>
                <td>changeFont</td>
                <td onclick="changeFont('#FF0000');">red</td>
                <td onclick="changeFont('#FFFF00');">yellow</td>
                <td onclick="changeFont('#0000FF');">blue</td>
            </tr><tr>
                <td>changeBack</td>
                <td onclick="changeBack('#FFFFFF');">white</td>
                <td onclick="changeBack('#808080');">gray</td>
                <td onclick="changeBack('#000000');">black</td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:12:37.120

更改为`getLementbyId`和更改为。`getElementbyId``getElementById``font.color``color`

```
 function changeFont(color){
            document.getElementById("miTabla").style.color = color;
        }
        function changeBack(color){
             document.getElementById("miTabla").style.backgroundColor = color;
        } 
```

`changeFont`也可能更恰当地命名为`changeForeground`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:12:09.863

设置`backgroundColor`是正确的，但是怎么回事`font.color`？那个是从哪里来的？

只需使用`style.color`.

此外，修复第二个中的拼写错误“get� ***El�ementById*** ”。

# uitextview - UITextView 使用 Word 而不是地址链接到 iTunes

> ID：10423849
> 
> 赞同：1
> 
> 时间：2012-05-03T01:11:54.967
> 
> 标签：uitextview, hyperlink

我正在尝试在 textview 中编写简历，并希望将 cd 的名称链接到相应的 iTunes 链接。这可能吗？我不想每次提到 cd 时都在简历中间放一个长链接地址。任何帮助，将不胜感激。而且我认为您可以在网络视图中执行此操作，但我宁愿使用文本视图来输入我的文本。我对 html 编码并不熟悉，所以这可能很容易。请帮忙！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:24:08.730

我无法找到一种方法来做我想做的事，所以我继续使用 HTML。这并不像我想象的那么难。谢谢 TheNavigator！

# javascript - 需要从变量中获取/显示属性

> ID：10423857
> 
> 赞同：-3
> 
> 时间：2012-05-03T01:12:58.150
> 
> 标签：javascript

我已经搜索过，但也许只是不明白，需要一个真实的人来帮助解释。我有一个生成以下变量的脚本：

```
var trackerResult = {
    "sessionId": "16zA06FJt5sp",
    "customerId": "16zA06FJt5so",
    "contact": {
        "firstName": "Bilbo",
        "lastName": "Baggins",
        "email": "bbshireguy@gmail.com"
    },
    "orders": [{
        "orderId": "16zA06FJt5ss",
        "number": 11512,
        "items": [{
            "price": 97,
            "productId": "16zA06FJt3of",
            "productName": "Main"
        }]
    }, {
        "orderId": "16zA06FJt5sw",
        "number": 11513,
        "items": [{
            "price": 49,
            "productId": "16zA06FJt3op",
            "productName": "Upsell"
        }]
    }],
    "demoMode": "1"
}; 
```

我需要能够简单地显示产品名称和价格。如果生成的脚本更简单一点，我可以做到，但据我了解，我正在查看的内容在技术上是孩子的孩子？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:20:21.137

```
trackerResult.orders.forEach( function ( order ) {
    order.items.forEach( function ( item ) {
        console.log( item.productName, item.price );
    });
}); 
```

（`forEach`在 IE8/7 中没有实现，所以你需要为那些浏览器[填充它）](https://github.com/kriskowal/es5-shim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:23:10.427

首先，您在`"contact"`.

现在，在`trackerResult`变量内部，您感兴趣的字段是`orders`数组。在`orders`数组的每个成员中，都有一个`items`数组。每个项目都包含名称和价格。

所以我们将在两个嵌套循环中遍历这两个字段。

```
var trackerResult = {"sessionId":"16zA06FJt5sp","customerId":"16zA06FJt5so","contact": {"firstName":"Bilbo","lastName":"Baggins","email":"bbshireguy@gmail.com"},"orders":[{"orderId":"16zA06FJt5ss","number":11512,"items":[{"price":97,"productId":"16zA06FJt3of","productName":"Main"}]},{"orderId":"16zA06FJt5sw","number":11513,"items":[{"price":49,"productId":"16zA06FJt3op","productName":"Upsell"}]}],"demoMode":"1"};

var result = '';

for (var i = 0; i < trackerResult.orders.length; i++) {
    for (var j = 0; j < trackerResult.orders[i].items.length; j++) {
        result += trackerResult.orders[i].items[j].productName + ': ' +  trackerResult.orders[i].items[j].price + '\n';
    }
}

alert(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:23:31.217

首先， var 中有一个错误 - 它缺少`:`after `"contact"`。解决这个问题将使我们能够继续:)

然后，一旦设置好，您需要遍历您的订单以查看所有产品及其价格。

```
for ( var i = 0, l = trackerResult.orders.length; i < l; i++ ) {
    var order = trackerResult.orders[i];
    for ( var j = 0, k = order.items.length; j < k; j++ ) {
        var item = order.items[j];

        // here are the values you need to do something with
        // so do something with them now!
        var productName = item.productName;
        var price = item.price;
        console.log( productName, price );
    }
} 
```

不知道你想用这些产品做什么，但这会让你接触到它们！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T01:24:49.750

要访问，请说出您将使用的订单项目：

```
trackerResult.orders[1].items[0].price
trackerResult.orders[1].items[0].productId
trackerResult.orders[1].items[0].productName 
```

要将此信息放到 HTML 页面上，您需要执行以下操作：

```
document.getElementById('price').innerHTML = trackerResult.orders[1].items[0].price;
document.getElementById('productId').innerHTML = trackerResult.orders[1].items[0].productId;
document.getElementById('productName').innerHTML = trackerResult.orders[1].items[0].productName; 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/tNmRW/1/](http://jsfiddle.net/tNmRW/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T01:25:10.157

> 但据我了解，我所看到的是技术上是孩子的孩子的属性？

是的！你还有一个属性，它是一个数组。

要访问对象中的属性，只需编写以下代码：

```
alert(trackerResult.sessionId); 
```

这是一个值类型属性。数字是值类型的另一个例子。

要访问子对象的属性，只需遵循相同的逻辑：

```
alert(trackerResult.contact.firstName); 
```

它与第一个示例没有太大区别。您正在访问一个属性，该属性是一个包含它自己的属性的类型。您可以通过大括号来判断这一点`{}`。

最后一个例子是数组类型。访问这些有点不同。首先，您需要确定数组的大小。您可以通过访问所有数组可用的长度属性来做到这一点。

```
alert("There are " + trackerResult.orders.length + " order(s)!"); 
```

一旦你有了数组的长度，你就可以使用 for 循环来遍历它们，如下所示：

```
for(var x = 0; x < trackerResult.orders.length; x++)
    alert("Order number " + trackerResult.orders[x].number + " has " + trackerResult.orders[x].items.length + " items!"); 
```

从那里您可以创建另一个循环来遍历每个订单的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T01:21:35.290

首先，获取该对象并添加一些空格，以便您可以实际看到发生了什么：

```
var trackerResult = {
    "sessionId":"16zA06FJt5sp",
    "customerId":"16zA06FJt5so",
    "contact":{
        "firstName":"Bilbo",
        "lastName":"Baggins",
        "email":"bbshireguy@gmail.com"
    },
    "orders":[
        {
            "orderId":"16zA06FJt5ss",
            "number":11512,
            "items":[
                {
                    "price":97,
                    "productId":"16zA06FJt3of",
                    "productName":"Main"
                }
            ]
        },
        {
            "orderId":"16zA06FJt5sw",
            "number":11513,
            "items":[
                {
                    "price":49,
                    "productId":"16zA06FJt3op",
                    "productName":"Upsell"
                }
            ]
        }
    ],
    "demoMode":"1"
}; 
```

现在，要获取产品名称和价格，您可以执行以下操作：

```
var orders = trackerResult.orders,
    ordercnt = orders.length,
    items, itemcnt, i, j,
    output = "";
for( i=0; i<ordercnt; i++) {
    output += "Order #"+orders[i].number+"\n==========\n";
    items = orders[i].items;
    itemcnt = items.length;
    for( j=0; j<itemcnt; j++) output += items[j].productName+" "+items[j].price;
    output += "\n";
}
// do something with "output"; 
```

# java - Google App Engine 无法在 NetBeans 上启动 - 卡在部署上

> ID：10423861
> 
> 赞同：2
> 
> 时间：2012-05-03T01:13:34.770
> 
> 标签：java, google-app-engine, netbeans

我尝试的时间比我想承认的要长，我尝试使用 NetBeans 6.9 到 7.1.2，我尝试使用多个 JDK 等。

我正在按照此处的说明进行操作：[http](http://rocky.developerblogs.com/tutorials/getting-started-google-app-engine-netbeans/) ://rocky.developerblogs.com/tutorials/getting-started-google-app-engine-netbeans/我正在尝试在 NetBeans 中简单地运行留言簿示例项目。

我进入了系统属性并编辑/创建了以下变量：

```
ANT_HOME: C:\Program Files\NetBeans 6.9\java\ant
CLASSPATH: C:\Program Files (x86)\Java\jdk1.6.0_31
JAVA_HOME: C:\Program Files (x86)\Java\jdk1.6.0_31
PATH: C:\Program Files (x86)\Java\jdk1.6.0_31\bin 
```

尽管更改了变量，NetBeans 仍会运行该项目并一直说找不到`tools.jar`. 我最终只是复制`tools.jar`到它正在查找的文件夹中（一直在 JRE 文件夹中查找......无论如何我都无法更改它）。

该程序运行“正常”，但它在启动 Google App Engine 并尝试部署项目时卡住了，但没有任何反应......它只是坐在那里，什么也不做......我注意到在“服务”选项卡中，Google App Engine 的图标有一点时间玻璃，永远不会出现绿色的播放图标...

有任何想法吗？是蚂蚁的问题吗？如果这是基本的，我很抱歉 - 我已经尝试了好几天了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T19:10:37.770

**GAE-Java 项目的 Netbeans 用户的好消息！**

可以从此存储库中获得适用于 Netbeans 7.3 和 GAE Java SDK v.1.8 的良好插件：
[https ://github.com/Valery-Sh/NbAppEngine](https://github.com/Valery-Sh/NbAppEngine)

有了这个插件，像留言簿样本或新的个人项目这样的 GAE 项目运行得非常好..

方法：
1\. 彻底删除您Netbeans的App Engine服务器（我必须重新安装Netbeans才能完全删除该服务，但必须有办法做到） 2\. 从： [https](https://code.google.com/p/nb-gaelyk-plugin/downloads/detail?name=nbappengine-7.3-gae1.8.x.zip)
://code.google 下载插件。 [com/p/nb-gaelyk-plugin/downloads/detail?name=nbappengine-7.3-gae1.8.x.zip](https://code.google.com/p/nb-gaelyk-plugin/downloads/detail?name=nbappengine-7.3-gae1.8.x.zip)到任何文件夹..
3\. 安装插件：工具/插件/
已下载 4\. 验证插件更新..
5\. 使用 SDK for Java 6 的 1.8.x 版本创建一个新的服务器 appengine
。创建一个新的 JavaWeb 项目，用于在 appengine 服务器上运行和/或测试留言簿示例..

..这就是全部！
最好的问候
@Mlaynes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:05:42.550

考虑以下：

1.  使用 Netbeans 7.2 版：GuestBook 示例抛出“属性 jvmargs 的缺失值”消息..（kenai 问题）并且无法创建新项目 appengine（netbeans 问题）

2.  使用 Netbeans 7.1.2 及之前版本，只需在 appengine-web.xml 中添加以下语句：

    错误的

    一切正常！（新项目中的“留言簿”示例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T05:10:14.533

这是要在 appengine-web.xml 中添加的代码：

```
<!-- TODO review code for thread-safety. -->
<threadsafe>false</threadsafe> 
```

# html - 调整 SVG 背景图像的大小

> ID：10423862
> 
> 赞同：1
> 
> 时间：2012-05-03T01:13:36.467
> 
> 标签：html, background, svg

请查看 CSS 以了解我如何尝试调整图像大小。我不确定如何使中心“内容”（文本和标题栏）浮动在 SVG 图形的中心之上。是否最好尝试将内容居中并浮动在旗帜背景上？还是我想在背景图像上设置框大小？或者有没有更简单的方法让中心的内容“浮动”在背景中缅甸的SVG标志之上

网址是 [http://morpheus.dce.harvard.edu/~squinn/BlitZEN86/cscie12_assignment2/LAYOUT4.html](http://morpheus.dce.harvard.edu/~squinn/BlitZEN86/cscie12_assignment2/LAYOUT4.html)

（这些是我试图定位背景和内容的非工作 CSS 规则）

```
.content {
   background-image: url(1000px-Flag_of_Myanmar.svg.png;
   background-repeat: no-repeat;
   padding: 10px 0;
   height:600px;
   overflow: hidden;    
   margin-top:10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-16T20:21:27.220

我看不到你的网址，但答案是/曾经（5 年你会得到答案）：[https ://www.wonderflags.pro/css-embed](https://www.wonderflags.pro/css-embed)

```
.content{
  width:128px;
  height:96px;
  background-size: 100% 100%;
  background-repeat: no-repeat;}
  img.wf{background-size:640px 480px;}
  div.wf{display:inline-block;}
  span.wf{display:inline-block;}
  } 
```

# cocoa - UINavigationController 内部的 UITabBar 使用 Storyboard

> ID：10423863
> 
> 赞同：3
> 
> 时间：2012-05-03T01:13:44.060
> 
> 标签：cocoa, uiviewcontroller, uinavigationcontroller, storyboard, uitabbar

这是一个[两年前的问题](https://stackoverflow.com/questions/576764/tab-bar-controller-inside-a-navigation-controller-or-sharing-a-navigation-root)的延伸：如何在 UINavigationController 中实现 UITabBar？

Robert Conn 的教程非常出色，我大部分时间都可以学习。问题是，正如我所说，它有两到三年的历史。从那时起就引入了 Storyboard，我想尽量减少对单个 .xib 文件的使用。这是我调整它的努力：

![UITabBar + UINavigationController](../Images/258a184729d44693a5b78676c8ac4de6.png)

所有的框架都是 UIViewController 的子类。当我运行它时，它可以用于表格单元格选择。作为响应推送的 Tabbed Book View 是完全黑色的，并且缺少标签栏。显然我不能发布所有代码，但基于这些症状，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:41:45.280

您是否检查过方法中的一切是否正常`prepareForSegue:sender:`？在那里，检查您是否获得了正确的实例`segue.destinationViewController`。否则，AFAIK 可能实际上不支持将 UITabBarController 推到 UINavigationController 上。

# iphone - 如何在 iOS 设置包中指定多行标题？

> ID：10423867
> 
> 赞同：6
> 
> 时间：2012-05-03T01:14:59.133
> 
> 标签：iphone, ios, settings.bundle

我在我的 iOS 应用程序中添加了一个[Settings.bundle 。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/UserDefaults/)我的设置之一是带有长标题的拨动开关。这个标题被截断了。

我试过了：

1.  “我的超长\n标题”
2.  《我的超长`&#xA;`标题》

但两者都不起作用：\n 并`&#xA`显示为标题的一部分。我的标题中是否可以有换行符/换行符？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-19T12:05:11.690

**是**的，您可以在组标题或页脚中添加换行符：

1.  `Group`在 Settings.bundle 文件中添加新的类型行
2.  在该组中插入新行
3.  将密钥名称设置为`FooterText`（在下拉列表中不可用）
4.  为您的长文本设置值
5.  打开 Root.plist 作为源代码（右键单击，打开为...）
6.  `&#xA;`在需要换行的地方插入

**不**，您不能在附加到控件（文本字段、切换开关、滑块）的标签中添加换行符。如果文本太长，它会被省略号截断……这就是为什么你应该有一个非常短的标签（对于 iPhone 纵向），然后你可以使用上面解释的组页脚在控件下方添加一个长描述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T03:17:15.700

不，您对 Settings.bundle 几乎没有控制权，而且多行标题不是一个选项。最好的办法是减少单元格标题并创建一个组标题或组页脚。

![在此处输入图像描述](../Images/08be549c9264a15c5595ecbfbb1d58d2.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-02T12:36:26.203

我投票给@riobidon 的答案。但是，我发现这`&#xA;`在本地化中不起作用。

如果您需要本地化，这就是您应该做的。

在`Root.plist`中，使用一些词来表示占位。例如，对组页脚使用“页脚文本”。

然后在本地化中，执行以下操作。

中`en.lproj/Root.strings`，添加

```
"footer text" = "the real footer you want.\nSome other descriptions"; 
```

您可以在本地化中使用 \n。

在其他语言的本地化中，您可以这样做。没有人会看到“页脚文本”，因为英语是默认部署语言。用户要么看到你本地化的语言，要么看到英语失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T07:55:09.770

我通过在包含切换开关的组中添加 FooterText 来解决这个问题

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T03:01:48.207

你有没有尝试过：

```
Top&#xA;Bottom 
```

只是为了看看它是否适用于短字符串？我认为标题有字符限制，换行符将计入该字符限制。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-03T03:23:53.513

你的 Title 不能换行，iOS 操作系统限制了 App 图标下可以显示的字符。一个例子是“我的水在哪里？”，尽管它的官方标题是“水先生在哪里？” 它显示为“水？” 在应用程序图标下

# android - 如何求解通过 3 点的抛物线方程？

> ID：10423870
> 
> 赞同：-5
> 
> 时间：2012-05-03T01:15:30.243
> 
> 标签：android

您如何找到通过这些点的抛物线方程：( .0344,.9285), ( .4014, 1.4672), (1.002, -0.313)。

你如何找到通过这些点的抛物线方程：（.0344，-.75），（.4014，-1.612），（1.002，-2.752）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T01:29:49.537

这是一个我永远不会知道的Android问题......

无论如何，这是简单的高中数学。所以对于你们那里的高中生：

假设你有一个标准的二次方程：

`y = a*x^2 + b*x + c`

您有 3 个未知变量：和`a`，因此您确实需要 3 个点来解决这些未知数。假设您有 3 分：、、。`b``c``(x1, y1)``(x2, y2)``(x3, y3)`

这产生了一个由 3 个方程组成的系统：

`y1 = a*x1^2 + b*x1 + c`

`y2 = a*x2^2 + b*x2 + c`

`y3 = a*x3^2 + b*x3 + c`

这对应于以下矩阵方程：

```
|  x1^2   x1   1   | | a |     | y1 |
|  x2^2   x2   1   | | b |  =  | y2 |
|  x3^2   x3   1   | | c |     | y3 | 
```

只需使用高斯消元法或任何其他平凡矩阵求解方法即可解决此问题。请参阅此处的维基百科条目：

[http://en.wikipedia.org/wiki/Gaussian_elimination](http://en.wikipedia.org/wiki/Gaussian_elimination)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:26:07.723

让我们假设抛物线的形式为 y=ax**2 + bx + c。插入 x 和 y，你会得到三个方程和三个未知数。然后，您可以使用高斯消元法计算 ab 和 c。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T01:24:22.787

使用 wolfram alpha [http://www.wolframalpha.com/input/?i=equation+of+a+parabola+that+passes+through++%28+.0344%2C-.75%29%2C+%28+.4014 %2C+-1.612%29%2C+%281.002%2C+-2.752%29](http://www.wolframalpha.com/input/?i=equation+of+a+parabola+that+passes+through++%28+.0344%2C-.75%29%2C+%28+.4014%2C+-1.612%29%2C+%281.002%2C+-2.752%29)

# javascript - 用 Mocha 在浏览器中测试 CS 类？

> ID：10423875
> 
> 赞同：0
> 
> 时间：2012-05-03T01:16:31.490
> 
> 标签：javascript, tdd, coffeescript, mocha.js

让我的 mocha 测试了解我的测试类（在浏览器中运行 Mocha）的约定是什么？由于两者都包装在闭包中，因此都不在全局范围内......

![找不到 Monkey 类，因为它不是全球性的，我想......](../Images/6a8f4b4957af8a3e562391b0e219b97d.png)

* * *

**猴子规格咖啡**

```
describe "Monkey", ->
  it "adds two to the given number", ->
    expect Monkey.add2(4).to.equal(6) 
```

**猴子咖啡**

```
class Monkey 
```

**test_runner.html**

```
<!DOCTYPE html>
<html>
  <head>
    <title>Mocha Test Runner</title>
    <meta charset="utf8">
    <link rel="stylesheet" href="mocha.css">
    <script src="mocha.js"></script>
    <script src="expect.js"></script>
    <script>
      mocha.setup('bdd');
    </script>

    <!-- Load in files under test -->
    <script src="monkey.js"></script>

    <!-- Load in spec files -->
    <script src="monkey.spec.js"></script>
  </head>
  <body>
    <div id="mocha"></div>

    <script>
      mocha.run();
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:39:09.717

```
class Monkey 
```

创建一个`Monkey`在文件范围内的类。你要

```
class window.Monkey 
```

或者

```
class @Monkey 
```

简而言之。

# php - 提交表单后如何在php中重新加载页面（方法=发布）

> ID：10423877
> 
> 赞同：0
> 
> 时间：2012-05-03T01:16:53.110
> 
> 标签：php

我有一个 php 页面，其中包含一个包含我发布到另一个 php 页面的信息的表单。

当我单击提交时，它会在 target="_blank" 中打开一个新页面并发布表单数据。但是，在那之后，我想重新加载当前页面。这可能吗？如果无法重新加载，我也愿意将现有页面重定向到另一个页面。

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T01:22:18.473

快速解决方案：

```
<form action="..." target="_blank" 
  onsubmit="setTimeout('location.reload()', 500);">
...
</form> 
```

或用于重定向：

```
<form action="..." target="_blank" 
  onsubmit="setTimeout('location.href=\'/new/url\'', 500);">
...
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:18:42.363

只需使用您希望用户重定向到的页面的 URL 设置一个隐藏的表单字段。然后在处理表单后使用`header()`将用户重定向到该页面。您也可以为此使用会话。

# asp.net-mvc - 从 MVC4 应用程序调用 WCF 服务不返回响应

> ID：10423878
> 
> 赞同：0
> 
> 时间：2012-05-03T01:17:20.553
> 
> 标签：asp.net-mvc, wcf, amazon-web-services, asp.net-mvc-4

我有一个调用 Amazon Web Services 的 MVC4 应用程序。亚马逊服务客户端在单独的程序集中实现。所以架构就像：MVC4 -> WCF 客户端程序集 -> AmazonWebService

如果我用 ASP.Net 或控制台应用程序替换 MVC4 Web 应用程序，这种安排非常有效。但是当我使用 MVC4 应用程序时，请求没有返回任何响应。看起来来自 Web 服务的响应只是请求本身。我没有从亚马逊网络服务获得任何结果。我在 MVC4 配置文件中是否缺少某些东西，或者需要添加一些路由或类似的东西。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:29:26.557

VS 生成的 xml 序列化程序存在一个小问题，它不断在soap 请求的参数之一中插入空格。这导致 AWS 不发送任何响应值。

# json - JSON“传入的对象无效，需要成员名称”

> ID：10423879
> 
> 赞同：0
> 
> 时间：2012-05-03T01:17:46.010
> 
> 标签：json, parsing

我们的一位客户对我们使用的 Web 面板软件有任何问题，该软件会解析各种 .json 文件。我们和客户已联系开发人员让他们调查此问题，但他们表示一切都很好。但是，他们的软件正在打印错误“传入的对象无效，预期的成员名称”。

经过一番搜索，我证实了我的怀疑，这确实是 json 文件中的格式问题。我在网上把它粘贴到各种格式化程序中，他们都认为它是有效的，所以我现在很茫然。

是否有任何体面的方法来查找 .json 文件中的语法问题，因为这是一个相当长的配置。

[http://pastebin.com/sqw5EKSf](http://pastebin.com/sqw5EKSf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:35:31.900

一种简单的方法是将 JSON 粘贴到 Firebug（Firefox 附加组件）控制台中，看看它是否会抱怨。例如，如果我将其粘贴到控制台中：

```
var x = {"abc,
}; 
```

我收到此错误：

```
SyntaxError: invalid property id (line 2) 
```

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:30:56.527

问题似乎是这部分：

在第 1024 行：

```
"": {
    "Members": [

    ] 
```

看看：[Parse Google JSON response in VB.NET](https://stackoverflow.com/q/7753326/511300)

# python - Python：类实例可以评估为任何类型吗？

> ID：10423880
> 
> 赞同：0
> 
> 时间：2012-05-03T01:17:46.603
> 
> 标签：python, class, tuples

一个类可以通过它的 __str__ 方法作为一个字符串，或者通过它的 __call__ 方法作为一个函数。例如，它可以充当列表或元组吗？

```
class A (object):
    def __???__ (self):
        return (1, 2, 3)

>>> a = A()
>>> a * 3
(1, 2, 3, 1, 2, 3, 1, 2, 3) 
```

**编辑...**

这是一个更好的例子来帮助澄清上述内容。

```
class Vector (object):
    def __init__ (self):
        self.vec = (1,2,3)
    def __???__ (self):
        # something like __repr__; non-string
        return self.vec

class Widget (object):
    def __init__ (self):
        self.vector = Vector()

>>> w = Widget()
>>> w.vector
(1, 2, 3) # not a string representation (at least, before being repr'd here) 
```

基本上，我想要像 __repr__ 这样的东西，它不返回字符串，而是在我简单地调用指向 Vector 实例的名称时返回一个元组（或列表），但我不想失去其余的能力实例，就像访问其他属性和方法一样。我也不想使用`w.vector.vec`来获取数据。我希望向量像 w 的元组属性一样起作用，同时仍然能够执行类似的操作`w.vector.whatever()`，或者覆盖 __mul__ 以便我可以通过`w.vector * 5`. 可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:01:06.303

根据您的目标，您可以创建一个继承自内置类的类，例如`list`or `tuple`：

```
>>> class A(tuple):
...     def speak(self):
...         print "Bark!"
... 
>>> a = A((1,2,3)) # extra parens needed to distinguish single tuple arg from 3 scalar args
>>> a * 3
(1, 2, 3, 1, 2, 3, 1, 2, 3)
>>> a.speak()
Bark! 
```

鉴于您的 Vector 用例，子类化元组可能会成功。

```
import math

class Vector(tuple):
    def magnitude(self):
        return math.sqrt( self[0]*self[0]+self[1]*self[1]+self[2]*self[2] ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T01:39:02.680

对于您的示例中的特定行为（在 中`A*3`提供数据的三个连接副本`A`），您想要实现`__mul__()`运算符。

例如，这些是等价的：

```
>>> a = [1,2,3]
>>> a*3
[1, 2, 3, 1, 2, 3, 1, 2, 3]
>>> a.__mul__(3)
[1, 2, 3, 1, 2, 3, 1, 2, 3]
>>> 
```

更一般地说，如果你想实现一个序列类型，你必须实现[为序列类型定义的所有操作](http://docs.python.org/release/2.5.2/ref/sequence-types.html)。你必须定义 -

*   什么`A[3]`意思 ( `__getitem__()`, `__setitem__()`)
*   什么`A[1:10]`意思 ( `__getslice__()`)
*   什么`for item in A:`意思 ( `__iter__()`)

等等。

这是在 s 上定义的方法的完整列表`list`：

```
>>> pprint.pprint(dict(list.__dict__))
{'__add__': <slot wrapper '__add__' of 'list' objects>,
 '__contains__': <slot wrapper '__contains__' of 'list' objects>,
 '__delitem__': <slot wrapper '__delitem__' of 'list' objects>,
 '__delslice__': <slot wrapper '__delslice__' of 'list' objects>,
 '__doc__': "list() -> new empty list\nlist(iterable) -> new list initialized from iterable's items",
 '__eq__': <slot wrapper '__eq__' of 'list' objects>,
 '__ge__': <slot wrapper '__ge__' of 'list' objects>,
 '__getattribute__': <slot wrapper '__getattribute__' of 'list' objects>,
 '__getitem__': <method '__getitem__' of 'list' objects>,
 '__getslice__': <slot wrapper '__getslice__' of 'list' objects>,
 '__gt__': <slot wrapper '__gt__' of 'list' objects>,
 '__hash__': None,
 '__iadd__': <slot wrapper '__iadd__' of 'list' objects>,
 '__imul__': <slot wrapper '__imul__' of 'list' objects>,
 '__init__': <slot wrapper '__init__' of 'list' objects>,
 '__iter__': <slot wrapper '__iter__' of 'list' objects>,
 '__le__': <slot wrapper '__le__' of 'list' objects>,
 '__len__': <slot wrapper '__len__' of 'list' objects>,
 '__lt__': <slot wrapper '__lt__' of 'list' objects>,
 '__mul__': <slot wrapper '__mul__' of 'list' objects>,
 '__ne__': <slot wrapper '__ne__' of 'list' objects>,
 '__new__': <built-in method __new__ of type object at 0x1E1DACA8>,
 '__repr__': <slot wrapper '__repr__' of 'list' objects>,
 '__reversed__': <method '__reversed__' of 'list' objects>,
 '__rmul__': <slot wrapper '__rmul__' of 'list' objects>,
 '__setitem__': <slot wrapper '__setitem__' of 'list' objects>,
 '__setslice__': <slot wrapper '__setslice__' of 'list' objects>,
 '__sizeof__': <method '__sizeof__' of 'list' objects>,
 'append': <method 'append' of 'list' objects>,
 'count': <method 'count' of 'list' objects>,
 'extend': <method 'extend' of 'list' objects>,
 'index': <method 'index' of 'list' objects>,
 'insert': <method 'insert' of 'list' objects>,
 'pop': <method 'pop' of 'list' objects>,
 'remove': <method 'remove' of 'list' objects>,
 'reverse': <method 'reverse' of 'list' objects>,
 'sort': <method 'sort' of 'list' objects>} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:36:31.640

**当您调用str**时，该类不充当字符串。它创建并返回一个新的字符串对象。基本上当你调用`str(something)`一个对象时，这就是真正发生的事情：

```
a = str(someObject)

a = someObject.__str__() 
```

所以这个`str`函数基本上可以被认为是这样做的：

```
def str(variable):
    return variable.__str__() 
```

调用`list()`,`tuple()`等时`set()`也是如此。如果我认为您的要求是正确的：

`tuple()`, `list()`, 并且`set()`都调用`__iter__()`一个类的方法，所以你想要做的是：

```
class MyClass(object):
    ...
    def __iter__(self):
        ...
        return myIterable 
```

# php - 将数据库表中特定列的数据相加

> ID：10423888
> 
> 赞同：0
> 
> 时间：2012-05-03T01:19:35.927
> 
> 标签：php, mysql

我有这些来自表格的数据。例如，我有一个名为 tbl_points 的点表。tbl_points 包含：

```
ptsID, team1, team2.
1       10      20
2       20      10
3       30      5 
```

如何创建一个查询来总结 team1 和 team2 的积分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:25:00.050

未经测试：

```
 SELECT SUM(p1.team1) AS team1_score
        , SUM(p2.team2) AS team2_score
     FROM tbl_points AS p1
        , tbl_points AS p2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:31:43.083

以下查询：

```
SELECT 
  SUM(team1) AS team1_points, 
  SUM(team2) AS team2_points
FROM
  tbl_points 
```

结果会给你一个单行表：

```
| team1_points | team2_points |
| 60           | 35           | 
```

此外，使用名称`tbl_points`也不好。最好不使用前缀。只需为您的表命名`points`，就足够清楚了。

# tsql - 如何将成员组合分配到特定组（对于 OLAP 维度）

> ID：10423891
> 
> 赞同：0
> 
> 时间：2012-05-03T01:20:06.683
> 
> 标签：tsql, ssis, ssas, olap, dimensional-modeling

我有我认为在 OLAP 中相当常见的场景，但解决它的一个非常好的方法并没有让我跳出来：

我得到了一个包含多个项目的销售交易，每个项目都有不同的产品..

![在此处输入图像描述](../Images/78014bd258357a3c3f4bdeb86d875087.png)

我想要做的是将产品组组合分配到一个类别中，即“仅限狗”、“仅限猫”、“猫和狗”

所以你最终会得到类似..

![在此处输入图像描述](../Images/7cb3a3582aaab2ee77e0bf2fcc2f6a26.png)

如果可能的话，我希望在 Transact-SQL 或 SSIS 中实现这一点，我发现计算的成员/度量很慢，如果这是最好的方法，我愿意接受那个解决方案

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:01:26.700

如果您想遵循维度建模的最佳实践（Kimball 方法），您应该只有一个包含所有产品分组的产品维度表。换句话说，您在一维中对所有产品属性进行非规范化。此产品维度将有一个代理键 ProductKey（使用 SQL Server 中的标识列）。这个是 PK 的键，将是您的事实表中的 FK，它包含所有的事务。因此，根据您的简单模型，您将拥有一个用于销售信息的事实表，其中包含您的所有度量（数量、数量）和一个针对您的产品维度（ProductKey）的 FK。您的产品维度将包含所有产品属性，包括类别。

在 SSAS 中，只需将两个表带入您的 DSV 并创建一个维度（产品），一切都会为您处理好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:35:44.907

好吧，如果您想在 T-SQL 中执行此操作并且您只有一个表（如您的第二个示例），那么这样的事情就可以解决问题：

```
update [transactions_table] set [product_group] = 'dog only'
where [product] in ('labrador', 'st bernard')

update [transactions_table] set [product_group] = 'cat and dog'
where [product] in ('chihuahua', 'tabby')

update [transactions_table] set [product_group] = 'cat only'
where [product] in ('persian') 
```

但我建议将信息分成不同的表格：

1.  交易，只有产品 ID，没有名称
2.  产品，具有 ID、名称和类别 ID
3.  类别，有 id 和 name

这样可以节省空间并在大桌子上更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:35:03.940

理想情况下，您应该有一个产品组表，并将此信息添加到您的产品维度上。

如果您已经有并且您的问题来填充此信息，您应该使用 SSIS 上的查找转换来获取产品组

# java - 带有“...”数组的Java主要方法？

> ID：10423894
> 
> 赞同：6
> 
> 时间：2012-05-03T01:20:29.413
> 
> 标签：java, arrays, string, variadic-functions, ellipsis

> **可能重复：**
> [此方法签名中的省略号 (...) 是什么？](https://stackoverflow.com/questions/2367398/what-is-the-ellipsis-for-in-this-method-signature)
> [java：如何创建一个支持任意数量参数的函数？](https://stackoverflow.com/questions/4215698/java-how-can-i-create-a-function-that-supports-any-number-of-parameters)

好吧，我正在尝试找出一些示例，并且在 main 方法中找到了这种用于参数的数组定义。这个“...”有什么特别之处，普通的 String[] args 有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T01:25:10.640

这是 Java 5 中用于可变长度参数列表的符号。它大致相当于一个字符串数组，但允许您传递自动组合成一个数组的各个参数。

```
void mymethod(String... a) {
    for (String s : a) {
        ...
    }
}

mymethod("quick", "brown", "fox"); 
```

这仅在您计划从程序中调用方法时才有意义，因此我不明白为什么需要在 main() 中使用这种语法。但是，它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T01:27:31.467

省略号 (...) 是可变参数。当您要创建具有任意数量参数的方法时，可以使用它们。[**Oracle 在这里**](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)详细解释了可变参数的工作原理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:20:50.523

这称为可变参数，这意味着可以传递该类型 ( `String`) 的任意数量的参数。

**1.它应该在最终位置**

**2.将作为数组处理**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T03:12:13.117

... 用于可变参数。

例如

公共无效我的方法（对象...参数）{}

params 变量是可选的，被视为对象的可为空数组。

# jquery - 为什么切换（）不起作用？

> ID：10423896
> 
> 赞同：0
> 
> 时间：2012-05-03T01:20:46.613
> 
> 标签：jquery, toggle

我有一个 jsFiddle 按我的意愿工作：http: [//jsfiddle.net/6wuUc/64/](http://jsfiddle.net/6wuUc/64/)

但是由于某种原因，当我使用完全相同的代码时，单击按钮时我没有得到动画。这是我在我的页面上使用的代码。

```
<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">

<link rel="stylesheet" href="_/css/style.css">

<script src="_/js/jquery-1.7.1.min.js" type="text/javascript"></script> 
<script>
    $('.sv_play_button').toggle(function(){
        $('#video').animate({left: '346'}, "fast");
    },function(){
        $('#video').animate({left: '0'}, "fast");
    });​
</script>

</head>

<body>

<div id="video">
    <div class="sublime">
        <p class="sv_play_button">Click</p>
    </div>    
</div>

</body>
</html> 
```

和CSS：

```
#video, #video .sv_play_button {position: absolute;}

#video { margin-left: -346px; width: 670px; height: 546px; background-color: blue;}

.sublime { width: 1016px; height: 546px; background-color: red; opacity: 0.8; }

.sv_play_button {padding: 5px; background-color: yellow; top: 0px; right:0px; }​ 
```

任何人都知道为什么 toggle() 在我的页面上不起作用？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T01:24:03.620

**问题**

您尚未将 jquery 包装在[`$(document).ready()`](http://www.learningjquery.com/2006/09/introducing-document-ready)运行任何 jquery 事件所需的 a 中。

正在发生的事情是 javascript 甚至在加载 jquery 之前尝试运行 jquery 代码，这就是为什么您必须等到文档加载（使用`.ready()`）。

您的新 javascript 应如下所示：

```
$(document).ready( function() {
$('.sv_play_button').toggle(function(){
        $('#video').animate({left: '346'}, "fast");
    },function(){
        $('#video').animate({left: '0'}, "fast");
    });​
}); 
```

**注意：**请记住，您的所有函数都必须在此之外，否则它们将不可调用。还要记住，这个包装器是一个函数，因此必须在它之外定义全局变量。

如果您还没有引用它，则需要像这样在脑海中引用 jquery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script> 
```

**参考**

*   [$(文档).ready()](http://www.learningjquery.com/2006/09/introducing-document-ready)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T01:22:47.260

它不起作用，因为您在加载页面之前执行了脚本。当您的脚本运行时，您搜索的元素尚不存在，因此您的 jQuery 选择器找不到任何可操作的元素。

将你的函数包装在一个文档就绪块中，你应该已经准备好了。

```
jQuery(function(){
    your code here
}) 
```

参考：[http ://api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)

~~切换也不支持您调用它的方式。 [http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)~~

~~你不能传递两个函数（据我所知），因为切换只显示或隐藏一个元素。~~编辑：MagicDev 指出[切换事件 api](http://api.jquery.com/toggle-event/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T01:42:28.827

您也可以将脚本移动到`</body>`标签正上方的页面底部。

```
...
<script>
    $('.sv_play_button').toggle(function(){
        $('#video').animate({left: '346'}, "fast");
    },function(){
        $('#video').animate({left: '0'}, "fast");
    });​
</script>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T09:58:01.337

您尚未将 jquery 包装在运行任何 jquery 事件所需的 $(document).ready() 中。

# ruby-on-rails - 将 Windows 上的 Rails 部署迁移到 Ubuntu

> ID：10423897
> 
> 赞同：-1
> 
> 时间：2012-05-03T01:21:17.770
> 
> 标签：ruby-on-rails, deployment, ubuntu

我开始为 Windows 开发我的 Rails 应用程序（我知道，这是个坏主意）。我现在想使用 Linux 来部署应用程序。

问题：

如何使用 MySQL 将 Windows 中的应用程序移植到 Ubuntu？我不是一个精通 Ubuntu 的人，所以我需要一些帮助。我已经安装了带有 Apache 和 MySQL 的 Ubuntu。根据我的研究，大多数人都建议在 Apache 上运行 Rails 时使用 Phusion 的Passenger。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:26:39.750

尝试按照[此说明](http://www.modrails.com/install.html)进行操作。通常，您在哪个操作系统上开发应用程序并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:49:19.897

我曾经在 Windows 上开发并在 Open Solaris 上部署。我遇到的只有一个真正的问题，它涉及在本机操作系统上打开/读取/写入文件。如果您在本机操作系统上读/写文件，请告诉我，我会给您详细信息。

除此之外，您的实际 Rails 应用程序代码不必更改。

就 Phusion Passenger 而言，这是一个不错的选择，但它与在 Windows 上开发/在 Unix 上部署无关。乘客只是使部署更容易。乘客将自省它要求部署的应用程序，并找出您通常必须手动执行的配置内容。它消除了学习很多关于 Apache 配置的需要。

它的作用远不止于此，但只需将Passenger 视为一个智能中介，它了解Rails 和Apache，并完成大量繁重的工作以确保您的Rails 应用程序在生产环境中运行良好。

当您说“不精通 Ubuntu”时，这是否意味着不精通 Unix？

我精通“Solaris”，但老实说，我从来没有在 Linux 发行版上做过任何事情。

因此，如果您是 Windows 人，刚接触 Unix，那么我认为您只需要保持手指交叉，并希望您的托管服务提供商得到所有必要的支持，这样您就可以说“与乘客一起安装 apache”，然后您只需要告诉您的安装，“好的，Apache/Passenger”，这是我的 Rails 应用程序，让它运行！

希望这是有道理的！

# javascript - 放置在地图上后，除了谷歌地图中的前五个图标外，所有图标都消失了

> ID：10423905
> 
> 赞同：2
> 
> 时间：2012-05-03T01:22:13.777
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我有一个带有谷歌地图的网页。我使用 javascript 根据来自 json 文件的地址在地图上放置标记。json文件中有7个地址。

当地图加载时，我在地图上看到所有 7 个图标，但它们立即消失，然后使用边界框调整地图的大小。

我的代码是错误的还是我在地图上可以拥有的数字图标有限制。无论查找多少个地址，它始终在地图上保留 5 个图标。所有其他都被删除。我怀疑是否存在限制，因为我看过带有数百个图标的地图。

我确实为每个地址使用了不同的图标。所以我删除了自定义图标并使用了谷歌提供的标准图标。同样的问题。所以，它似乎在代码中。帮助任何人。

```
// JavaScript Document
$(document).ready(function() {

var addresses = [];
var address, company;
var geocoder, marker, thumbtack;

var bounds = new google.maps.LatLngBounds();    

// Set map options
    var options = {
    zoom:11,
    center: new google.maps.LatLng(Lat, Lng),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: true,
    mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    }
};

// Create the map
var map = new google.maps.Map(document.getElementById('map'), options);
marker = new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(Lat, Lng),
    title: "Your Zip Code"
});
//bounds.extend(new google.maps.LatLng(Lat, Lng));

    // Get the data
    // var listing is already set in footer.php
    processFile(listings);

function processFile(listings) {
        $.each(listings,function(business, info) {
            address = info[2];
            company = info[0];
            thumbtack = info[4];
            getCoordinates(address, company, thumbtack);
        });
    }

    function getCoordinates(address, company, thumbtack) {
    var counter = 0;
            // Check to see if we already have a geocoded object.  If not we create one.
    if(!geocoder) {
        geocoder = new google.maps.Geocoder();
    }

    // Create a GeocoderRequest object
    var geocoderRequest = {
        address: address
    }

    // Making the geocode request and adding marker
    geocoder.geocode(geocoderRequest, function(results, status) {
        // Check if status is OK before proceding
        if (status == google.maps.GeocoderStatus.OK) {
            addresses.push(results[0].geometry.location);
            counter++;
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                title: company,
                //icon: "http://gmaps-samples.googlecode.com/svn/trunk/markers/blue/marker" + thumbtack + ".png"
                                    icon: thumbtack
            });
            //bounds.extend(results[0].geometry.location);

            // Adjusting the map to new bounding box
                            //map.fitBounds(bounds);

        }

    });

}; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T17:06:09.833

在我看来，您一次只能看到一个标记。我建议添加一个 createMarker 函数，该函数可以使用函数闭包来创建 7 个标记。

使用 createMarker 函数的[示例。](http://www.geocodezip.com/v3_MW_example_map1.html)

# css - 溢出：隐藏在某个高度>悬停显示全部？

> ID：10423909
> 
> 赞同：0
> 
> 时间：2012-05-03T01:22:55.933
> 
> 标签：css

我有一个：

```
.itembox { 
```

类，其中显示了目录类型网站中的许多项目。`overflow:hidden` 我认为在某个高度上会很酷，并且有一个小`1px solid #AAA`底，**然后当悬停在 > 它显示完整。**使用我的全局类是否相当简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:25:16.520

这几乎是微不足道的。添加 a`max-height`以及您的`overflow:hidden`，然后在`:hover`该类的版本上删除`max-height`（通过将其设置为非常高的数字）。

```
.itembox {
    max-height: 200px;
    overflow: hidden;
    border-bottom: 1px solid #aaa;
}
.itembox:hover {
    max-height: 9999px;
} 
```

# ios - 应用内购买后端服务

> ID：10423917
> 
> 赞同：3
> 
> 时间：2012-05-03T01:24:25.443
> 
> 标签：ios, in-app-purchase

是否有像 UrbanAirship 这样的在线解决方案提供后端系统来管理应用程序内的 IAP？UrbanAirship 修改了他们的产品方案，目前 IAP 功能可以在 Basic（每个用户花费 10 美分，以及每个注册 10 个中心）或针对拥有超过 100,000 个活跃用户的发布商的 Enterprise 订阅中找到。有什么选择吗？谢谢

干杯

# r - 需要帮助将数字范围（例如：0-7）转换为 R 中的平均值（例如：3.5）

> ID：10423922
> 
> 赞同：0
> 
> 时间：2012-05-03T01:25:03.953
> 
> 标签：r

这是我在 R 中使用的数据：

```
library(Sleuth2)
ex22.20 
```

我正在尝试将“年”列从数字范围（0-7）转换为两个数字之间的平均值（3.5）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T01:55:15.997

`ex22.20$Years`这是一个解决方案，其中在应用之前的水平上计算平均值。

```
library(Sleuth2)
head(ex22.20)
#   Exposure Years Deaths Risk
# 1        0   0-7     10  262
# 2        0  8-11     12  243
# 3        0 12-15     19  240
# 4        0 16-19     31  237
# 5        0 20-23     35  233
# 6        0 24-27     48  227

levels(ex22.20$Years)
# [1] "0-7"   "8-11"  "12-15" "16-19" "20-23" "24-27" "28-31"

mid.values <- sapply(strsplit(levels(ex22.20$Years), "-"),
                     function(x)mean(as.numeric(x)))
mid.values
# [1]  3.5  9.5 13.5 17.5 21.5 25.5 29.5

ex22.20$Years <- mid.values[ex22.20$Years]

head(ex22.20)
#   Exposure Years Deaths Risk
# 1        0   3.5     10  262
# 2        0   9.5     12  243
# 3        0  13.5     19  240
# 4        0  17.5     31  237
# 5        0  21.5     35  233
# 6        0  25.5     48  227 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:08:39.813

这是一个从数据中获取特定行平均值的单行代码（第一个，在本例中为 0-7）：

```
mean(range(lapply(strsplit(levels(ex22.20$Years)[1],"-"),as.numeric))) 
```

哪个返回

```
[1] 3.5 
```

解释：

1.  用于`levels`提取所需的数据字符串`"0-7"`
2.  用于`strsplit`将其转换为数字字符串列表`[["0" "7"]]`
3.  用于`lapply`申请`as.numeric`并将其变成数字列表`[[0 7]]`
4.  用于`range`生成以这些数字为端点的范围
5.  用于`mean`计算平均值。

# macos - 如何使用 XQuartz（或 X11.app）和 XMingw 创建 32 位深度像素图

> ID：10423928
> 
> 赞同：1
> 
> 时间：2012-05-03T01:26:07.957
> 
> 标签：macos, x11

我正在尝试在 mac 和 windows 下将 ARGB 像素图与 XRender 一起使用，但两台服务器似乎都没有 32 位视觉效果。

*   我不需要 32 位深度的窗口。我只需要服务器端像素图
*   渲染扩展可用，服务器端渲染合成工作正常（使用具有透明度但没有像素图、ei 渐变的渲染图片）
*   根据[Keith Packard](https://bugzilla.gnome.org/show_bug.cgi?id=88662#c2)的说法，带有渲染扩展的评论服务器必须提供 32 位深度的视觉效果
*   在连接握手期间服务器返回 32 位视觉效果列表，但该列表为空
*   根据 CreatePixmap 请求*的 x11 协议规范：深度必须是指定可绘制对象的根所支持的深度之一（或 Value 错误结果）*

如果服务器实现是正确的，那么使用 XQuartz（或 X11.app）或使用 windows+XMingw 创建 32 位深度像素图的最简单方法是什么？

如果 X 服务器坏了，有什么办法可以解决（使用 24 位像素图创建渲染图片并将 alpha 通道附加到它？）

**编辑**：我[可以创建像素图](https://gist.github.com/2583100)，但现在使用 XPutImage 将缓冲区上传到它时遇到问题。

我正在使用我自己的[X 客户端库，](https://github.com/sidorares/node-x11)[这里](https://gist.github.com/2583233)有 PutImage 的示例。我将尝试使用 XCreateImage/XPutImage 转换为 C/XLib

# svg - 如何在下定义 SVG 文档 ，并与 标签？

> ID：10423933
> 
> 赞同：0
> 
> 时间：2012-05-03T01:27:16.103
> 
> 标签：svg, d3.js

我正在尝试执行以下操作：

```
<svg>
    <defs>
        <svg id="importeddoc">...</svg>
    </defs>
    <use x="0" y="0" width="100" height="100" xlink:href="#importeddoc"></use>
</svg> 
```

我认为原始 SVG 文档的子部分会出现在 100x100 的框中。但相反，什么也没有发生。从[SVG 规范](http://www.w3.org/TR/SVG/struct.html#UseElement)看来，这应该可以工作。任何指针？

* * *

原来它是构建我的图像的 d3.js 库，它出于某种原因剪断了命名空间。我必须做`.attr("xlink:xlink:href", "...")`才能让它工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:19:11.993

如果将所有命名空间声明添加到`svg`元素，则确实应该可以引用嵌入的 SVG。以下示例产生如下所示的输出。这适用于我测试的所有浏览器，也适用于 Batik Squiggle：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1" width="5cm" height="5cm" viewBox="0 0 100 100"
  xmlns="http://www.w3.org/2000/svg" 
  xmlns:xlink="http://www.w3.org/1999/xlink">      
  <defs>
    <svg id="importeddoc">
      <rect width="2cm" height="1cm"/>
      <circle cx="1cm" cy="5mm" r="3mm" fill="red"/>
    </svg>
  </defs>
  <use x="0" y="0" width="100" height="100" xlink:href="#importeddoc"/>
  <use x="0" y="60" width="40" height="20" transform="scale(1.5, 1)" xlink:href="#importeddoc"/>
</svg> 
```

![在此处输入图像描述](../Images/a2ab77da865bc43682039e249cf4293f.png)

如果它不适合您，您使用什么 SVG 查看器？

# c++ - OpenCV 2.2 不打开相机

> ID：10423934
> 
> 赞同：0
> 
> 时间：2012-05-03T01:27:28.783
> 
> 标签：c++, qt, opencv, camera

我想使用相机并对输入流执行图像处理，但是当程序执行时，会出现一个窗口询问“捕获源”，然后当“确定”或“应用”时没有任何反应。

但是如果我使用视频文件而不是相机，程序运行得很好。

这是代码：

```
int MainWindow::on_CameraOpen_triggered()
{
// programming done in Qt and using Opencv 2.2.
// all the variables are defined & declared in private of header file
// there is no compilation error
// return type of the function is 'int'
// Following program works fine if name of video file is mentioned 
// instead of '0' is the line below
VideoCapture capture(0);

if(!capture.isOpened())
    return 1;

    bool stop(false);
    double rate = capture.get(CV_CAP_PROP_FPS);
    namedWindow("Extracted Frame");
    int delayVideo = 1000/rate;

    while(!stop)
    {
        if(!capture.read(frame))
        {
            break;
        }
        imshow("Extracted frame", frame);
        if(waitKey(delayVideo)>=0)
        {
            stop = true;
        }
    }

capture.release();
} 
```

我试图删除已在以下链接中纠正的错误： [https ://code.ros.org/trac/opencv/changeset/4400](https://code.ros.org/trac/opencv/changeset/4400)

[https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/highgui/src/precomp.hpp?rev=4400](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/highgui/src/precomp.hpp?rev=4400)

相机在 gtalk 和其他相机软件上运行良好。

请建议/指导可以做什么。

非常感谢。

问候，数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:50:29.483

试试这个代码：

```
# include <opencv2/highgui/highgui.hpp>

CvCapture *_capture;

_capture = cvCaptureFromCAM(-1);
//_capture = cvCaptureFromFile("test1.mp4");
if (!_capture)
{
    //"Unable capture video"
    return 1;
}

double rate = cvGetCaptureProperty(_capture, CV_CAP_PROP_FPS);

//...

cv::Mat = cvQueryFrame(_capture);

//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:10:32.160

这是另一个可以用来检查 OpenCV 是否一切正常的最小示例：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>

int main () {
    cv::VideoCapture cam = cv::VideoCapture(0);
    cv::Mat frame;
    cv::namedWindow ("Demo", CV_WINDOW_AUTOSIZE);

    while (1) {
        cam >> frame;
        imshow ("Demo", frame);
    }

    cam.release();
    return 0;
} 
```

试试看问题出在 OpenCV 还是你的 Qt 程序上。

# verilog - 如何使用 VPI PLI 查找两个 Verilog 模块是否连接 - Verilog VCS

> ID：10423936
> 
> 赞同：3
> 
> 时间：2012-05-03T01:27:31.763
> 
> 标签：verilog, hdl

```
module A (
    output A_OPORT_1 
    ); 
endmodule

module B (
    input B_IPORT_1
    ); 
endmodule

module TestBench;
wire A_to_B; 
A A_inst (
        .A_OPORT_1  (A_to_B)
        );
B B_inst (
        .B_IPORT_1  (A_to_B)
        );

endmodule 
```

这里基本上输出端口 A:A_inst:A_OPORT_1 连接到 B:B_inst:B_IPORT_1

如何使用 verilog PLI 检索该信息？例子赞赏。

我有一些代码可以获取端口并检索 highconn 并能够获取线/网 A_to_B。

但是，我无法使用 vpiPortInst 找出哪些端口连接到 A_To_B。我得到一个为空的迭代器。

```
 vpiHandle high = vpi_handle(vpiHighConn, port); 
        vpi_printf(" High conndata type is %s\n",
            vpi_get_str(vpiType, high));
        vpi_printf(" High conndata Net type is %s\n",
            vpi_get_str(vpiNetType, high));                    
        vpi_printf(" High conndata Name is %s\n",
            vpi_get_str(vpiFullName, high));     

        vpiHandle iter = vpi_iterate(vpiPortInst,high);
        vpiHandle p2ref;
        if (iter == NULL)
        {
            vpi_printf(" Port Iterator is null\n");                      
        } 
```

输出/输出：

```
 High conndata type is vpiNet
 High conndata Net type is vpiWire
 High conndata Name is $unit::A_to_B
 Port Iterator is null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:50:02.683

上面的代码有效。正如工具指出的那样，必须连接两个端口。

现在这可行，我可以打印出扇出。

# mysql - MySql Select Query Help - 如何计算查询出现的次数

> ID：10423937
> 
> 赞同：1
> 
> 时间：2012-05-03T01:27:46.310
> 
> 标签：mysql, select

我目前有这个查询：

```
SELECT s_id FROM orderline,order_t WHERE orderline.o_id=order_t.o_id AND c_name='John Smith'; 
```

它返回这个：

```
+------+
| s_id |
+------+
|  12  |
+------+
|  11  |
+------+
|  10  |
+------+
|  10  |
+------+ 
```

但我希望输出有两列，右列计算左列出现在查询中的次数..所以我希望输出与这个完全一样：

```
+------+-------+
| s_id | count |
+------+-------+
|  12  |   1   |
+------+-------+
|  11  |   1   |
+------+-------+
|  10  |   2   |
+------+-------+ 
```

是否可以？

我试过这个查询，但它显然是错误的，因为它计算了 s_id 的行数。

```
SELECT s_id,count(*) FROM orderline,order_t WHERE orderline.o_id=order_t.o_id AND c_name='John Smith'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:31:56.910

您忘记了 GROUP BY 子句将每个“S_ID”放在自己的行上

select S_ID, count(*) from ... 按 S_ID 分组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:33:33.417

您需要使用 GROUP BY：

```
SELECT s_id, count(*) AS `count`
FROM orderline,order_t 
WHERE orderline.o_id=order_t.o_id AND c_name='John Smith'
GROUP BY s_id; 
```

# android - Android手势onFling不起作用

> ID：10423941
> 
> 赞同：0
> 
> 时间：2012-05-03T01:28:27.100
> 
> 标签：android, gesture

我的 onFling 手势代码运行良好。然后，我在该方法中添加了一些 if 语句，并在 Activity 代码中进行了一些其他小的调整。Plus 在不同的类 PassGen 中编写了几个新方法。以及一些代码重新排序。

除了被他们调用之外，我没有添加带有手势的接口，但现在 onFling 手势甚至不会触发。双击手势仍然有效。

日志中没有错误。

这是来自活动的代码

```
package com.mystraldesign.memorable;

import java.io.IOException;
import android.app.Activity;
import android.content.Context;
import android.graphics.Typeface;
import android.os.Bundle;
import android.text.ClipboardManager;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.MotionEvent;
import android.view.Window;
import android.widget.TextView;
import android.widget.Toast;
import com.mystraldesign.memorable.PassGen;

public class MemorableActivity extends Activity implements android.view.GestureDetector.OnGestureListener,OnDoubleTapListener  
{
    //Define text views
    private TextView textView1;
    private TextView textView2;
    private TextView textView3;
    private TextView textView4;
    private TextView textView5;

    //Previous password holder
    private String prevPass;

    //Gesture Detectors
    private GestureDetector gTap; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        gTap  = new GestureDetector(this,(android.view.GestureDetector.OnGestureListener) this);

        //Remove title bar
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        //Define textView
        textView1 = (TextView) findViewById(R.id.textView1);
        textView2 = (TextView) findViewById(R.id.textView2);
        textView3 = (TextView) findViewById(R.id.textView3);
        textView4 = (TextView) findViewById(R.id.textView4);
        textView5 = (TextView) findViewById(R.id.textView5);

        //Load font file
        Typeface type = Typeface.createFromAsset(getAssets(),"fonts/optima.ttf"); 

        //Set various textViews to font
        textView1.setTypeface(type);
        textView2.setTypeface(type);
        textView3.setTypeface(type);
        textView4.setTypeface(type);

        prevPass = "Memorable";

    }

    //Password call
    public void newPass()
    {
        //Store Return
        String retn = null;
        PassGen passWord = new PassGen();

        //Generate password
        try 
        {
            retn = passWord.passwordGen(this);
        } 
        catch (IOException e) 
        {

            //Message about Error
            Context context = getApplicationContext();
            CharSequence text = "Ooops Something Went Wrong!";
            int duration = Toast.LENGTH_SHORT;

            //Display message
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

            textView1.setText("Memorable");

            e.printStackTrace();
        }

        //Update prevpass
        prevPass = textView1.getText().toString();

        textView1.setText(retn);
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
              float velocityY) 
    {

        if(velocityX == 0.0 && velocityY > 0.0001)
        {
            //Call new password generation or generate random if set
            if(textView4.getText() == "Memorable")
            {
                newPass();
            }
            else if(textView4.getText() == "Random")
            {
                //create new password method
                PassGen pass = new PassGen();

                //Set password
                textView4.setText(pass.randomPassword());
            }
        }
        else if(velocityY == 0 && velocityX > 0.0001)
        {
            if(textView4.getText() == "Memorable")
            {
                textView4.setText("Random");
            }
            else if(textView4.getText() == "Random")
            {
                textView4.setText("Memorable");
            }
            else if(velocityX == 0.0 && velocityY > -0.0001)
            {
                textView4.setText(prevPass);
            }

            textView5.setText("VelocityX: " + velocityX + " VelocityY: " + velocityY);
        }

              return false;
    }

    //Method to copy password
    public boolean onDoubleTapEvent(MotionEvent e) {

        //clipboard shite
        ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
        clipboard.setText(textView1.getText());

        //Message about coping
        Context context = getApplicationContext();
        CharSequence text = "Password has been copied to clipboard.";
        int duration = Toast.LENGTH_SHORT;

        //Display message
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

      return false;
    }

    /*--------------------------------------*/
    /*Additional geasture code below. */
    /* */
    /*J. Krawczyk 3/5/12*/
    /*--------------------------------------*/

    public boolean onTouchEvent(MotionEvent me){ 
      this.gTap.onTouchEvent(me);
     return super.onTouchEvent(me); 
    }

    public boolean onDown(MotionEvent e) {

      return false;
    }

    public void onLongPress(MotionEvent e) 
    {

    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
      float distanceY) {

     return false;
    }

    public void onShowPress(MotionEvent e) {

    }

    public boolean onSingleTapUp(MotionEvent e) {

     return false;
    }

    //Method to copy password - Depreciated
    public boolean onDoubleTap(MotionEvent e) {

     return false;
    }

    public boolean onSingleTapConfirmed(MotionEvent e) {

     return false;
    }

} 
```

编辑：

我将 onTouchEvent 移到 onCreate 下方，现在它触发了 onFling 函数，但 if 语句没有执行任何操作，尽管 velocityX 和 velocityY 分别为 1410.8032 和 0.0 应该触发一个。它也没有检测到正确，向上或向下。只剩下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:02:13.193

原来是代码顺序和 if 语句。我需要`onFling`回到下面`onTouchEvent`并在 if 语句中添加额外的 () 以隔离 &&

# image - png、jpg/jpeg、bmp、gif等常见图形格式的表头尺寸是多少？

> ID：10423942
> 
> 赞同：13
> 
> 时间：2012-05-03T01:28:42.717
> 
> 标签：image, graphics, header

我在谷歌搜索。我在这里找到了一些东西，[http](http://paulbourke.net/dataformats/bmp/) ://paulbourke.net/dataformats/bmp/ ，但我无法理解标题的大小。

阅读一些网页我感到困惑。[http://en.wikipedia.org/wiki/JPEG](http://en.wikipedia.org/wiki/JPEG)

任何人都可以提供有关所有这些格式的正确标题信息吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T01:41:17.650

**PNG**文件包含[8 字节的标头](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header)。

**JPEG**文件（参见[规范](https://web.archive.org/web/20120403212223/http://class.ee.iastate.edu/ee528/Reading%20material/JPEG_File_Format.pdf)）包含 2 字节标题 (SOI)，后跟一系列标记，一些标记后面可以跟数据数组。每种类型的标记都有不同的标题格式。存储图像的字节遵循 SOF0 标记（10 字节长度）。但是，在 JPEG 标头和 SOF0 标记之间可以有其他段。

**BMP**文件包含[14 字节的标头](http://en.wikipedia.org/wiki/BMP_file_format#File_structure)。

**GIF**文件的标头[中至少包含 14 个字节](http://www.onicos.com/staff/iz/formats/gif.html#header)。

# perl - 带有 -pl 命令行选项的 Perl 单行程序

> ID：10423943
> 
> 赞同：-5
> 
> 时间：2012-05-03T01:29:09.133
> 
> 标签：perl, command-line-arguments

我在跑

```
perl -ple '$_=length' datafile 
```

数据文件包含以下内容：

```
algorithm
student government
Fiumichino 
```

结果是它打印

```
9
18
10 
```

-p 和 -l 选项有什么作用？还有，什么是`$_`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T01:34:54.997

[`$_`](http://perldoc.perl.org/perlvar.html#$_)是默认输入和模式搜索变量。`-p`是一个命令行开关，它在你的程序周围放置一个隐式`while(<>)`循环，最后有一个打印语句。`-l`开关将and`$/`设置`$\`为“\n”（换行符）并`chomp`作为您的输入，或者用外行的话来说，它为您处理换行符。

菱形运算符`<>`是“神奇的”，因为它会自动选择您的输入通道。如果您的脚本有参数，它会将其解释为文件名，然后打开该文件并读取它。如果不是，它会检查 STDIN。在您的情况下，它会打开文件“datafile”。

oneliner 所做的是读取数据文件的每一行`$_`并将长度设置为`$_`（因为如果没有提供参数则[`length`](http://perldoc.perl.org/functions/length.html)使用），然后打印该数字。`$_`

您可以解析单行代码并查看代码的样子：

```
$ perl -MO=Deparse -ple '$_=length' datafile
BEGIN { $/ = "\n"; $\ = "\n"; }
LINE: while (defined($_ = <ARGV>)) {
    chomp $_;
    $_ = length $_;
}
continue {
    die "-p destination: $!\n" unless print $_;
}
-e syntax OK 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T01:43:05.643

`-p`导致 Perl 解释器循环其输入并`-e`每行运行一次代码（在本例中是通过提供的），而不是总共运行一次。在每次循环迭代的底部，它会打印出该行。

实际的行被读入`$_`变量，该变量的内容就是循环体底部打印的内容，所以通过改变`$_`循环内部的内容，你可以改变输出的内容。

不带参数的`length`运算符计算 的长度`$_`。所以`$_=length`在打印之前用它的长度替换行。

`-l`只是导致 Perl 解释器从输入中删除换行符（因此它们不会被计算在此处的长度值中）并自动将它们放回输出中（否则输出将作为 91810 卡在一起）。

# linux - 对大量文件运行相同的 sed 转换

> ID：10423944
> 
> 赞同：1
> 
> 时间：2012-05-03T01:29:31.747
> 
> 标签：linux, shell, sed

我编写的某些代码中的一个错误导致某些文件的格式不正确。如果只有一个文件，我可以写

```
cat filename | sed 's/bad/good/g' >filename2
mv filename2 filename 
```

并修复它。但是，我有数百个文件，我想对所有文件进行相同的转换。

**有没有办法使用 sed 对大量文件应用相同的转换，保持文件名相同？**

**sed 甚至是这项工作的正确工具吗？如果没有，我应该使用什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T01:32:51.593

在现代版本的 sed 上使用`-i`（就地）选项。

```
sed -i 's/bad/good/g' file*pattern 
```

或者，使用查找

```
find . -type f -name 'file*pattern' -print0 | xargs -0 sed -i 's/bad/good/g' 
```

如果您担心出现问题，您可以提供一个后缀作为 的参数`-i`，并且在应用转换之前，每个文件的备份副本将使用该后缀保存：

```
sed -i.bak 's/bad/good/g' filename
diff filename.bak filename 
```

如果您的 sed 版本不支持该`-i`选项，您始终可以使用 perl，这就是 sed 的想法（公平地说，因为 perl 的大部分命令行语法来自 sed）：

```
perl -pi.bak -e 's/bad/good/g' filenames 
```

# asp.net - OnResultExecuted 和 OnResultExecuting 到底什么时候触发？

> ID：10423955
> 
> 赞同：24
> 
> 时间：2012-05-03T01:32:33.290
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在创建一个自定义`ActionFilterAttribute`，以便在 ajax 请求期间将`ViewResult`s 和重定向转换为s 。我已经通过单元测试连接了大部分内容，出于某种原因，`JsonResult`我假设我的转换必须发生在返回一个结果。`OnResultExecuting``OnActionExecuted`

我的问题是确切的时间`OnResultExecuted`和`OnResultExecuting`被调用的时间，因为我在所有四个覆盖中都有断点，并且只有在`OnActionExecuting`和中的那些覆盖`OnActionExecuted`都在触发。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T06:00:22.800

让我们看下面的例子，它执行你描述的转换：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            var result = filterContext.Result as ViewResultBase;
            if (result != null && result.Model != null)
            {
                filterContext.Result = new JsonResult
                {
                    Data = result.Model,
                    JsonRequestBehavior = JsonRequestBehavior.AllowGet
                };
            }
        }
    }

    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
    }

    public override void OnResultExecuted(ResultExecutedContext filterContext)
    {
    }
} 
```

该[`OnResultExecuting`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onresultexecuting.aspx)方法将在动作结果的[`ExecuteResult`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionresult.executeresult.aspx)方法运行之前立即调用，之后立即调用该[`OnResultExecuted`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onresultexecuted.aspx)方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-04T23:40:40.007

在寻找了一段时间并试图理解接受的答案后，我发现了这一点。我相信这表明执行顺序是

1.  OnAction执行
2.  OnActionExecuted
3.  OnResultExecuting
4.  OnResultExecuted

检查清单 2 下的此链接。[http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/understanding-action-filters-cs)

# primefaces - 动态调整大小 可以吗？

> ID：10423963
> 
> 赞同：1
> 
> 时间：2012-05-03T01:33:43.193
> 
> 标签：primefaces

我在 PrimeFaces 论坛上问了这个问题，但没有得到回应，所以我想我会在这里尝试。

*   使用 PrimeFaces 3.0 -

我有一个包含 [p:layout] 和 [p:layoutUnit] 的页面，我想在支持 bean 中动态调整其大小。我有两种使用方法：

1) [p:commandButton] 调用一个支持 bean，它为 p:layoutUnit 组件中的 size 参数设置 bean 属性。我可以这样做，但为了使其工作，我必须设置 ajax="false" 和 update="@all" （可能不需要更新）以强制页面重绘。当我这样做时，将重置 的宽度，并且面板以所需的宽度绘制。

2）我有一个带有 p:ajax event="overlaySelect" 的 [g:map] 组件我想在激活 overlayEvent 时以类似的方式调整面板的大小。我遇到的问题是，如果没有完整的页面刷新，我似乎无法调整 [p:overlayUnit] 的大小，而且我似乎无法让 overlaySelect 事件导致页面刷新（或者它不这样做所以以一种会调整 [p:layoutUnit] 的方式。如果我刷新页面，它将调整大小。

我有两个问题：1）有没有办法动态调整 [p:layoutUnit] 组件的大小而无需进行完整的页面刷新？我似乎无法让它以任何其他方式工作。

2) 有没有办法强制 [p:ajax event="overlaySelect"] 强制完成页面刷新，以便我可以像在第一个场景中那样强制调整大小？

谢谢

如果有人感兴趣，这是页面代码：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view id="mapPolygonView" contentType="text/html" beforePhase="#{mappingSessionBean.beforePhase}"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:comp="http://java.sun.com/jsf/composite/ezcomp"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<html>
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="./resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <script src="./resources/js/Raphael.js" type="text/javascript"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
        <style type="text/css">
            .ui-layout-north {
                z-index:20 !important;
                overflow:visible !important;;
            }
            .ui-layout-north .ui-layout-unit-content {
                overflow:visible !important;
            }
        </style>
        <title>Map Polygon Edit</title>
    </h:head>
    <h:body>
        <p:layout fullPage="true" onResize="onResizeEvent(event)" >
            <p:layoutUnit position="north" size="82" resizable="true" >
                <h:form id="formNorth" prependId="=false" >
                    <p:outputPanel id="panelNorth"  >
                        <comp:header id="headerComp" />
                        <comp:menuBar id="menuBarComp" />
                    </p:outputPanel>
                </h:form >
            </p:layoutUnit>
            <p:layoutUnit id="layoutWest" position="west" size="#{mappingSessionBean.optionPanelWidth}" resizable="true" collapsible="true" header="Options" >
                <h:form id="formWest" prependId="=false" >
                    <p:outputPanel id="panelWest"  >
                        <h:panelGrid columns="1" style="padding-top: 5px; width: 98%;" rendered="#{mappingSessionBean.displayOptionGridWest}" >
                            <h:commandLink value="Add Polygon" style="margin-left: 5px;" action="#{mappingSessionBean.addNewPolyAction}" disabled="#{mappingSessionBean.disableAddPolygonLink}" rendered="#{mappingSessionBean.displayAddPolygonLink}" update="@form :formCenter:mapPanel :formCenter:polygonAddPanelComp:polygonAddPanel" />
                            <h:commandLink value="Edit Polygon" style="margin-left: 5px;" action="#{mappingSessionBean.editPolyAction}" disabled="#{mappingSessionBean.disableEditPolygonLink}" rendered="#{mappingSessionBean.displayEditPolygonLink}" update=":formCenter:messageComp:messagePnl" />
                            <h:commandLink value="Disable Polygon" style="margin-left: 5px;" action="#{mappingSessionBean.disablePolyAction}" disabled="#{mappingSessionBean.disableDisablePolygonLink}" rendered="#{mappingSessionBean.displayDisablePolygonLink}" update=":formCenter:messageComp:messagePnl" />
                            <h:commandLink value="Locate Address" style="margin-left: 5px;" action="#{mappingSessionBean.locateAddressAction}" disabled="#{mappingSessionBean.disableLocateAddressLink}" rendered="#{mappingSessionBean.displayLocateAddressLink}" update="@form" />
                            <p:separator />
                            <h:outputText value="Locate Address:" style="margin-left: 5px;" rendered="#{mappingSessionBean.displayLocateAddress}" />
                            <p:inputTextarea value="#{mappingSessionBean.searchAddress}" style="width: 125px;; height: 40px;" autoResize="false" maxHeight="40" rendered="#{mappingSessionBean.displayLocateAddress}" />
                            <p:commandButton value="Find" action="#{mappingSessionBean.findAddressAction()}" update="@form :formCenter:gmap :formCenter:messageComp:messagePnl" rendered="#{mappingSessionBean.displayLocateAddress}" />
                            <p:separator rendered="#{mappingSessionBean.displayLocateAddress}" />
                            <p:commandButton id="btn3" value="Save Polygon" style="width: 135px;" disabled="#{mappingSessionBean.disableSavePolyBtn}" onclick="confirmDialog.show();" update="@form :formCenter:gmap :formCenter:messageComp:messagePnl" />
                            <p:commandButton id="btn5" value="Refresh Polygons" style="width: 135px;" disabled="#{mappingSessionBean.disablePolyBtns}" action="#{mappingSessionBean.refreshPolygons}" update="@form :formCenter:gmap" />
                            <p:commandButton id="btn6" value="Test State" style="width: 135px;" action="#{mappingSessionBean.testStatePolygon}" onclick="confirmDialog.show();" update="@form :formCenter:gmap" />
                            <p:separator />
                        </h:panelGrid>
                        <h:panelGrid columns="3" style="width: 145px;" >
                            <h:outputText value="Map Height: " style="margin-left: 5px;" />
                            <p:commandButton value="+" action="#{mappingSessionBean.polyMapPlus}" update=":formCenter:gmap" />
                            <p:commandButton value="-" action="#{mappingSessionBean.polyMapMinus}" update=":formCenter:gmap" />
                        </h:panelGrid>
                        <h:panelGrid columns="1" style="padding-top: 5px; width: 98%;" >
                            <p:commandButton value="Restore Original" style="width: 135px;" disabled="#{mappingSessionBean.disablePolyBtns}" action="${mappingSessionBean.restoreOriginalPolyView}" update=":formCenter:gmap :formEast:panelEast"  />
                        </h:panelGrid>
                        <comp:polygonAddPanel id="polygonAddPanelComp" />
                        <comp:polygonEditPanel id="polygonEditanelComp" />
                    </p:outputPanel>
                </h:form >
            </p:layoutUnit>
            <p:layoutUnit position="center" resizable="true"  >
                <h:form id="formCenter" prependId="false" >
                    <p:idleMonitor onidle="idleDialog.show();" timeout="#{sessionBean1.timeout}" >
                        <p:ajax event="idle" listener="#{sessionBean1.idleListener}" update="@form" />
                    </p:idleMonitor>
                    <comp:message id="messageComp" message="#{sessionBean1.message}" />
                    <p:outputPanel id="mapAddPolyPanel" >
                        <h:panelGrid id="mapAddPolyPanelGrid" style="width: 90%; height: 35px; margin-top: 10px; display: block; position: relative;" columns="4" >
                            <h:outputText value="Account:" />
                            <p:selectOneMenu style="width: 250px;" value="#{mappingSessionBean.selectedAccount}" >
                                <f:selectItems value="#{sessionBean1.custAccountList}"/>
                                <p:ajax listener="#{mappingSessionBean.accountSelectAction}" update="polyGrpDD gmap" />
                            </p:selectOneMenu>
                            <h:outputText value="Polygon Group:" />
                            <p:selectOneMenu id="polyGrpDD" style="width: 250px;" value="#{mappingSessionBean.selectedPolyGroup}" >
                                <f:selectItems value="#{mappingSessionBean.polygonGroupList}"/>
                                <p:ajax listener="#{mappingSessionBean.polyGroupSelectAction}" update="@form :formEast:panelEast :formWest:panelWest gmap" />
                            </p:selectOneMenu>
                        </h:panelGrid>
                        <p:outputPanel id="mapPanel" style="top: 0px; width: 98%; left: 10px; position: relative;" rendered="#{mappingSessionBean.displayMapPanel}" >
                            <p:gmap id="gmap" center="#{mappingSessionBean.mapCenter}" zoom="#{mappingSessionBean.mapZoom}" type="HYBRID" 
                                    style="#{mappingSessionBean.polygonGmapStyle}" fitBounds="#{mappingSessionBean.fitBoundsFlag}"
                                    model="#{mappingSessionBean.mapModel}" disableDoubleClickZoom="true"
                                    widgetVar="map" >
                                <p:ajax id="gmapAjax1" event="overlaySelect" listener="#{mappingSessionBean.onMapOverlaySelect}" update="@all :formEast:polyDetailPnl gmap messageComp:messagePnl :formCenter:mapPanel :formWest"  />
                                <p:ajax id="gmapAjax3" event="pointSelect" listener="#{mappingSessionBean.onMapPointSelect}" update="gmap" />
                                <p:ajax id="gmapAjax2" event="stateChange" listener="#{mappingSessionBean.onMapStateChange}" />
                                <p:ajax id="gmapAjax4" event="markerDrag" listener="#{mappingSessionBean.onMapMarkerDrag}" update="gmap" />
                            </p:gmap>
                        </p:outputPanel>
                    </p:outputPanel>
                </h:form >
            </p:layoutUnit>
            <p:layoutUnit position="east" size="205" resizable="true" collapsible="true" header="Polygons" >
                <h:form id="formEast" prependId="=false" >
                    <p:outputPanel id="panelEast"   >
                        <h:panelGrid id="grid2" columns="1" style="height: 500px; width: 96%; display: block;" >
                            <h:panelGrid columns="2" >
                                <p:selectBooleanCheckbox value="#{mappingSessionBean.displayAllPolygons}" >
                                    <p:ajax listener="#{mappingSessionBean.displayAllPolyAction}" update="@form :formCenter:gmap polyTable" />
                                </p:selectBooleanCheckbox>
                                <h:outputText id="txt2" value=" Select all (Checked = visible)" />
                            </h:panelGrid>
                            <!-- p:outputPanel id="panel2" style="position: relative; width: 100%; height: 300px; display: block; border-width: 1px; border-style: solid; border-color: #000000; overflow: auto;" -->
                            <p:dataTable id="polyTable" var="polys" style="width: 98%;" value="#{mappingSessionBean.polyDataList}" rowKey="#{polys.name}" 
                                         paginator="true" paginatorPosition="bottom" rows="10"
                                         selection="#{mappingSessionBean.selectedPolyData}" selectionMode="single" >
                                <p:column headerText="" style="width: 20px;"  >
                                    <p:selectBooleanCheckbox value="#{polys.visible}" >
                                        <p:ajax listener="#{mappingSessionBean.visibleCheckBoxAjax(polys)}" update="@form :formCenter:gmap" />
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                <p:column headerText="Name" >
                                    #{polys.name}
                                </p:column>
                                <p:ajax event="rowSelect" listener="#{mappingSessionBean.selectedPolyListener}" update="@form :formCenter:gmap" />
                            </p:dataTable>
                            <!-- /p:outputPanel -->
                            <h:outputText id="rxt3" value="Polygon Details" />
                            <p:outputPanel id="panel3" style="position: relative; width: 98%; height: 175px; display: block; border-width: 1px; border-style: solid; border-color: #000000; overflow: auto;" >
                                <p:outputPanel id="polyDetailPnl" >
                                    <h:panelGrid columns="2" >
                                        <h:outputText value="Polygon Id: " />
                                        <h:outputText value="#{mappingSessionBean.selectedPolyData.polygonId}" />
                                        <h:outputText value="Name: " />
                                        <h:outputText value="#{mappingSessionBean.selectedPolyData.name}" />
                                        <h:outputText value="Active Flag: " />
                                        <h:outputText value="#{mappingSessionBean.selectedPolyData.active}" />
                                        <h:outputText value="Color: " />
                                        <h:outputText value="#{mappingSessionBean.selectedPolyData.lineColor}" />
                                    </h:panelGrid>
                                    <h:panelGrid columns="1" >
                                        <h:outputText value="Polygon Points:  Lat., Lon." />
                                        <h:outputText value="#{mappingSessionBean.selectedPolyPoints}" escape="false" />
                                    </h:panelGrid>
                                </p:outputPanel>
                            </p:outputPanel>
                        </h:panelGrid>
                    </p:outputPanel>
                </h:form >
            </p:layoutUnit>
        </p:layout>
        <p:confirmDialog id="confirmDialog" widgetVar="confirmDialog" header="Confirm Polygon Add / Update / Disable" message="#{mappingSessionBean.polyConfirmMsg}" >
            <h:form>
                <p:commandButton value="Yes" style="margin-left: 10px;" actionListener="#{mappingSessionBean.confirmAddPolyContinueAction}" oncomplete="confirmDialog.hide();" update=":formCenter:gmap :formCenter:messageComp:messagePnl" />
                <p:commandButton value="No" style="margin-left: 25px;" actionListener="#{mappingSessionBean.confirmAddPolyQuitAction}" oncomplete="confirmDialog.hide();" update="@form :formCenter:gmap" />
            </h:form>
        </p:confirmDialog>
    </h:body>
</html>
</f:view> 
```

# css - LESS css - JS 解析器与编译

> ID：10423964
> 
> 赞同：5
> 
> 时间：2012-05-03T01:33:47.693
> 
> 标签：css, less

我想知道是否有人知道 LESS css 的 JS 解释器是否会导致页面加载出现明显的延迟。我更喜欢使用 JS 解析器，因为它更易于使用，因为我不必在每次编辑后都运行编译器，并且更容易管理源代码，因为 SCM 工具不会同时跟踪 .less 和 .css文件

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T01:37:54.283

它在快速的计算机/浏览器上并不慢。但是，根据您的目标受众，我不会使用它。

我宁愿设置`lessc`观看文件/目录并在保存时生成 css 文件。然后将 less 和 css 文件都提交到您的 SCM（这实际上是我所做的）。

这样做也允许持续集成构建。

[http://en.wikipedia.org/wiki/Continuous_integration](http://en.wikipedia.org/wiki/Continuous_integration)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T01:52:57.310

我还建议将 LESS 样式解析为普通的 CSS。仍然有人关闭了 JS 或使用了一些 JS-blocking 插件。在这种情况下，您将获得无样式的页面，这**不是**打动您的观众的最佳方式。

如果你在 Mac 上 - 试试[Less.App](http://incident57.com/less/) 如果你在 Windows 上 - 试试[WinLess](http://winless.org/) 如果你在 Linux 上 - 试试[SimpleLess](http://wearekiss.com/simpless)

所有应用程序都有一个“监视目录”选项（使用 LESS 样式）并在更改时自动编译。Less.App 和 WinLess 有很多其他选项，例如：编译缩小、从系统开始、最小化开始等...

# c# - 线程完全冻结了 GUI

> ID：10423966
> 
> 赞同：0
> 
> 时间：2012-05-03T01:34:11.750
> 
> 标签：c#, multithreading, user-interface, delegates, invoke

```
private delegate void Runner();   //A delegate, but this attempt didn't work
public void Run()
{
    Stager.InstructionsMemory = InstructionsTextBox.Text.Split('\n');
    Stager.InintializeLists();
    InstructionThread = new Thread[Stager.InstructionsMemory.Length];
    PipelineInitializor();
    BlockingCollection<Func<object>>[] tasks = new BlockingCollection<Func<object>>[Stager.InstructionsMemory.Length];
    PCounterLabelUpdate up = new PCounterLabelUpdate(PCounterLabelUpdater);
    MemoryUpdater MemUp = new MemoryUpdater(UpdateMemoryLists);
    ButtonControl del = new ButtonControl(ButtonController);
    ExecuteBtn.Invoke(del, new bool[] { false, true });

    Cycle = 0;

    for (APCounter = 0; APCounter < Stager.InstructionsMemory.Length; APCounter++)
    {

        int i1 = APCounter;
        int i = APCounter;  //Local Copy of Counter
        tasks[i] = new BlockingCollection<Func<object>>();
        tasks[i].Add(() => Fetch(i1));
        tasks[i].Add(() => Decode(i1));
        tasks[i].Add(() => ALURes(i1));
        tasks[i].Add(() => Memory(i1));
        tasks[i].Add(() => WriteB(i1));
        InstructionThread[i] = new Thread(() => Worker(i1, tasks[i1]));
        InstructionThread[i1].Start();  //Start a Thread
        CycleLbl.Invoke(up);  // Update GUI Control
        this.Invoke(MemUp);  // UPdate GUI
        _wait.WaitOne();  //Wait
    }

    ExecuteBtn.Invoke(del, new bool[] { true, false });
} 
```

GUI 完全冻结，不允许我调用 set 方法。

上面的函数是一个线程启动器，我想午餐一定数量的线程，但我想根据一个条件延迟午餐。我使用 for 循环和 _wait.WaitOne();

什么叫跑？一个按钮控制

它卡在哪条线上？_wait.WaitOne()

什么是等待？自动复位事件

为什么是在第一个线程的午餐之后？我想控制启动线程组，让他们完成工作（“使用业务逻辑”），然后午餐更多线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:56:09.677

您正在调用`AutoResetEvent.WaitOne`UI 线程。`WaitOne`不会泵送消息，因此会导致 UI 冻结。这里的一般建议是避免在 UI 线程等待来自另一个线程的信号时调用任何阻塞 UI 线程的方法。这可以防止 UI 线程调度所有发生的事件（如按钮单击、刷新屏幕等）。更糟糕的是，如果使用不当，可能会导致死锁，这可能是您的情况。没有看到这`AutoResetEvent`是怎么回事，`Set`我不能确定问题是什么，但调用`WaitOne`UI 线程绝对是一个问题。

顺便说一句，您还调用`Control.Invoke`了 UI 线程，这有点奇怪。这使我相信，除了您在问题中提出的内容之外，还有很多事情要做，或者您对应该如何`Invoke`使用存在根本性的误解。

# syntax - NSIS 有两种声明变量和条件语句的方法

> ID：10423969
> 
> 赞同：0
> 
> 时间：2012-05-03T01:34:43.753
> 
> 标签：syntax, nsis

NSIS 真正让我烦恼的是为什么有两种不同的做事方式？

1.  为什么有两种执行条件语句/逻辑的方法。即，使用'$if' 还是使用'StrCmp'？
2.  为什么能够以多种不同的方式存储变量。即，使用 '$myvar' 或使用 'var myVar' 我认为还有更多
3.  为什么要有程序集来访问存储变量？为什么不直接使用上述方法
4.  为什么你可以同时使用';'来创建评论 或者 '＃'

你能推荐一个记录所有全局变量的链接吗？比如 $INSTDIR 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:43:51.863

您显然还没有完全了解 NSIS 的工作原理。

1.  `${If}`而所有这些东西都来自LogicLib，它是在NSIS标准库存在很长时间后才被添加到的。以前，您必须使用`StrCmp`,`IntCmp`或其中一个跳转运算符。`${If} a == b`只是语法糖`StrCmp`，所有标签都得到了照顾。它产生更多可维护的代码。

2.  `Var foo`是变量*声明*。`$foo`正在*访问*变量。因此，它们是完全不同的东西。你不能在没有`$foo`指定的情况下使用`Var foo`。

3.  我不知道你这是什么意思。

4.  有关系吗？

5.  看说明书。这一切都在眼前。试试[变量](http://nsis.sourceforge.net/Docs/Chapter4.html#4.2)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T01:44:01.447

保留变量的列表可在文档中找到。可写变量在 4.2.2 节，常量在 4.2.3 节。

[http://nsis.sourceforge.net/Docs/Chapter4.html#4.2.2](http://nsis.sourceforge.net/Docs/Chapter4.html#4.2.2)

# regex - 解析带有嵌套括号的字符串

> ID：10423970
> 
> 赞同：1
> 
> 时间：2012-05-03T01:34:50.280
> 
> 标签：regex, parsing, nested, brackets

我正在编写一个应用程序来解析一些命令。命令以下列形式给出：

甲{乙}

我只想要 A 和 B。A 是可选的，但这很容易处理。我遇到的问题是 A 和 B 都可以包含几乎任何字符，包括空格和“{”和“}”。括号也不需要平衡。这可以用正则表达式解析吗？如果不是，您认为可以做的最简单的事情是什么？

例如，给定：

“parsme { foo { “你好” } { “再见” } {{{ } { bar { “up”} { “down” } }”

然后：

A = "parseme { foo { "hello" } { "goodbye" } {{{ }" and B = "bar { "up" } { "down" }"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T02:37:51.623

您不能使用正则表达式来解析任何需要像括号这样的任意嵌套的内容（这是正则表达式的一个公认的限制，在这里稍微搜索一下会有所帮助）。

为此，您需要使用 Antlr 之类的工具来使用上下文无关语法。

# jsf - 更新绑定组件

> ID：10423974
> 
> 赞同：1
> 
> 时间：2012-05-03T01:35:08.550
> 
> 标签：jsf

我有一个`panelGrid`：

```
 <h:form id="form_add">
         <h:panelGrid columns="4" id="binding" binding="#{myBean.pnGrid}">
         </h:panelGrid>
    </h:form> 
```

并且更新此 panelGrid 的 AJAX 是：

```
<p:ajax event="tabChange" listener="#{leftprocess.onChange}" update=":form_main:form_left:form_add"/> 
```

但 AJAX 不会更新`panelGrid`. 我在互联网上搜索，但我无法解决问题。

# javascript - 我如何自动在用户墙 Facebook 图表上发帖

> ID：10423975
> 
> 赞同：0
> 
> 时间：2012-05-03T01:35:23.380
> 
> 标签：javascript, facebook, facebook-graph-api

嗨，当他连接时，我怎样才能简单地在用户墙上发布一些东西？

我试过这个：

```
 <div id="fb-root"></div>
        <script src="//connect.facebook.net/en_US/all.js"></script>
          <script  type="text/javascript"> 

            FB.init({
              appId      : '35455XXXX46207', // App ID
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

var publish = {
  method: 'feed',
  message: 'getting educated about Facebook Connect',
  name: 'Connect',
  caption: 'The Facebook Connect JavaScript SDK',
  description: (
      'A small JavaScript library that allows you to harness ' +
      'the power of Facebook, bringing the user\'s identity, ' +
      'social graph and distribution power to your site.'
  ),
  link: 'http://www.fbrell.com/',
  picture: 'http://www.fbrell.com/f8.jpg',
  actions: [
    { name: 'fbrell', link: 'http://www.fbrell.com/' }
  ],
  user_message_prompt: 'Share your thoughts about RELL'
};

FB.ui(publish, Log.info.bind('feed callback'));
</script> 
```

这会打开一个 facebook 弹出窗口，但我想直接使用一些代码来执行此操作..（就像 spotify 一样）

问题是什么？（我已经得到了 ext_perms ）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:13:40.383

Spotify 使用 Open Graph。

Joe Bloggs {action} 在 {app} 上添加了一个 {object}

所以 Joe Bloggs {'listened to'} {'Spotify'} 上的 {'song name and title'}

您可以配置这些是什么，并且在接受应用程序时需要获得这些权限。

在 FB 开发人员 > 应用程序 > 编辑应用程序 > 打开图表中转到您的应用程序。

这就是你可以做到的。至于自动共享，我不确定，我自己正在寻找它，但怀疑它不可行。想象一下虐待的能力。但听起来 open Graph 会做你想做的事。

# google-maps - Google Maps SetCenter 功能拒绝工作

> ID：10423979
> 
> 赞同：1
> 
> 时间：2012-05-03T01:35:40.297
> 
> 标签：google-maps, google-maps-api-3, maps

试图让我的 SetCenter 函数工作，但它没有。

这是代码：

```
$("#searchclick").click(function(){

    var address = document.getElementById('searchbar').value;
    var geocoder = new google.maps.Geocoder();

    geocoder.geocode( { 'address': address}, function(results, status) {

        if (status == google.maps.GeocoderStatus.OK) {

            var latitude2 = results[0].geometry.location.lat();

            var longitude2 = results[0].geometry.location.lng();

            var relocate = ("(" + latitude2 + ", " + longitude2 + ")");

            alert("setting the center to: " + relocate);

            map.setCenter(relocate);

            } //when status is OK

        }); // geocode

    }); 
```

警报正确返回以下内容：`setting the center to: (40.7143528, -74.0059731)`

但它没有使地图的中心成为正确的点......

任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T01:41:25.593

设置中心取一个`google.maps.LatLng`对象。将您的代码更改为：

```
var relocate = new google.maps.LatLng(latitude2, longitude2);
alert("setting the center to: " + relocate);
map.setCenter(relocate); 
```

看：

[设置中心](https://developers.google.com/maps/documentation/javascript/reference#Map)

[纬度](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

# ruby-on-rails - Rails 查看未定义的方法

> ID：10423980
> 
> 赞同：0
> 
> 时间：2012-05-03T01:36:20.497
> 
> 标签：ruby-on-rails, belongs-to

我的应用程序的一点背景。我的用户有 1 个测验和一个属于用户的测验。我正在尝试列出用户参加的测验，但出现错误。

用户中的 NoMethodError#index

显示 /Users/Daniel/Documents/cis196/CollegeConnection/app/views/users/index.html.erb 其中第 24 行提出：

nil:NilClass 的未定义方法 `userName' 提取的源代码（第 24 行附近）：

```
<% @user.each do |u| %>
  <tr>
    <td><h6><%= u.quiz.userName%></h6></td>
    <td><h6><%= u.quiz.q1 %></h6></td>
    <td><% for q in u.quiz.q2 %>
      <% if q != nil %> 
```

Rails.root：/Users/Daniel/Documents/cis196/CollegeConnection

应用程序跟踪 | 框架跟踪 | 完整跟踪 app/views/users/index.html.erb:24:in `block in _app_views_users_index_html_erb__3921348574137420689_70261694365660' app/views/users/index.html.erb:22:in`_app_views_users_index_html_erb__3921348574137420689_70261694365660' app/controllers/users_controller.rb:25:in `index'

这是一些相关的代码。

```
class User < ActiveRecord::Base

has_one :quiz, :class_name => 'Quiz'

attr_accessible :name, :email, :password, :password_confirmation, :position, :remember_me
validates :name, :presence => true
validates_length_of :name, :maximum=>30
validates :name, :format => { :with => /\A[a-zA-Z]+\z/,
:message => "Only letters allowed" }
validates_presence_of :position
validates :email, :presence => true
validates :email, :uniqueness => true

scope :college,    where(position: 'College')
scope :highschool, where(position: 'High School')

end

class Quiz < ActiveRecord::Base
belongs_to :user

validates :q1, :presence => true
validates :q2, :presence => true
validates :q3, :presence => true
serialize :q2
has_many :activities

 end

def create
@quiz = current_user.quizzes.build(params[:quiz])
# @quiz = Quiz.new(params[:quiz])
@quiz.userName=current_user.name
@activities = Activity.all

respond_to do |format|
  if @quiz.save
    format.html { redirect_to @quiz, notice: 'Thank You for Taking the Quiz!.' }
    format.json { render json: @quiz, status: :created, location: @quiz }
  else
    format.html { render action: "new" }
    format.json { render json: @quiz.errors, status: :unprocessable_entity }
  end
end
end

<% @user.each do |u| %>
<tr>
  <td><h6><%= u.quiz.userName%></h6></td>
  <td><h6><%= u.quiz.q1 %></h6></td>
  <td><% for q in u.quiz.q2 %>
  <% if q != nil %>
    <h6><%= q  %></h6>
  <% end %>
<% end %>
<td><h6><%= u.quiz.q3 %></h6></td>
<td>X</td>
</tr>
<% end %> 
```

这是有错误的视图。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:02:25.243

您正在从您的视图中调用实例变量@user，但您没有在控制器中的任何地方实例化它，因此它为零（不存在）。

在调用视图文件的控制器中，您必须像这样实例化变量：

```
# assuming you've already did something like
# @quiz = Quiz.find(params[:id]
# in order to retrieve the quiz
@user = @quiz.user 
```

这应该使 @user 在视图中可用。有关更多信息，请参阅 ActiveRecord 关联指南： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:37:11.207

我假设第 24 行是以下行：

```
<td><h6><%= u.quiz.userName%></h6></td> 
```

由于错误告诉您“nil”没有“.userName”方法，因此试图调用该方法的东西必须是 nil。因此，在您的用户迭代中，其中一个很可能没有“.quiz”。

如果您使用 ruby​​-debug，您可以在该行上指定一个断点并检查所有值（或者只使用“puts u.quiz.inspect”将其转储到控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:39:29.853

我注意到您正在遍历@user，这意味着@user 是一个数组对象（可能是一个用户数组）。

您必须检查 @user 是否在控制器操作或视图中正确初始化。在这种情况下，检查是否在 users_controller 中设置了 @user，操作“index”。

此外，由于它是一组用户，请使用@users 而不是@user。

# mysql - 在 MySql 中组合来自多个表的结果

> ID：10423983
> 
> 赞同：1
> 
> 时间：2012-05-03T01:36:33.300
> 
> 标签：mysql, join

我有两张桌子。一个包含`members`和其他成员`dogs`。

该`dogs`表包含一个会员编号，该编号将其链接到“会员”表。

该`members`表包含所有地址信息。

每周，我必须选择新的付费注册并发送卡片。所以我需要将`dog`表格中的详细信息与来自的信息结合起来，`member`并将它们全部放在一行中。然后我可以将其导出并发送到我们的证卡打印机。

做这个的最好方式是什么？我一直在玩 JOINS，只是无法让它发挥作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T01:39:43.960

导出到打印机我留给你，但这`JOIN`是基本的。替换`membership_number`为正确的列名。

```
SELECT
  members.*,
  dogs.*
FROM
  members
  JOIN dogs ON members.membership_number = dogs.membership_number 
```

以上内容很简短，但实际上最好明确命名列表中的所有列`SELECT`，尤其是当您在连接的两个表中具有相同的命名列时。

```
SELECT
  members.membership_number,
  members.address,
  members.state,
  members.someothercolumn,
  dogs.name,
  dogs.breed,
  dogs.someotherdogcolumn
FROM
  members
  JOIN dogs ON members.membership_number = dogs.membership_number 
```

[MySQL`JOIN`语法参考](http://dev.mysql.com/doc/refman/5.0/en/join.html)中有许多示例可以指导您将来的查询。

# android - Android：从网站检索 XML 信息时如何加快加载时间？

> ID：10423984
> 
> 赞同：0
> 
> 时间：2012-05-03T01:36:33.413
> 
> 标签：android, xml, listview, load-time

当我按下一个按钮时，它应该从网页中检索数据并根据我的布局显示它。这样做很好，但只有当我单击返回时，才返回我的主要活动（家庭活动）并再次按下按钮。

我第一次按下按钮时加载需要很长时间，有时不起作用。但第二次是即时加载[工作正常]。

这是代码 - 三个类 - HomeActivity.java、News.Java 和 MyNewsHandler.java

```
public class HomeActivity extends Activity
{
String username = " ";
Button alog;
Button news;
Button forumTime;
EditText usernameEntry;
SharedPreferences preferences;
ImageView image;
TextView usernametv;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    forumTime = (Button)findViewById(R.id.timeButton);
    news = (Button) findViewById(R.id.newsButton); // <--- Heres the problem
    alog = (Button) findViewById(R.id.alogButton);
    usernameEntry = (EditText) findViewById(R.id.username);

    //For news button
    OnClickListener newsListener = new OnClickListener()
    {
        public void onClick(View v)
        {
            Intent intent = new Intent(HomeActivity.this, News.class);
            startActivity(intent);
        }
    };

    //Attaching listeners
    //forumTime.setOnClickListener(timeListener);
    //alog.setOnClickListener(alogListener);
    news.setOnClickListener(newsListener);
}

public void display(String string)
{
    Toast.makeText(getBaseContext(), string, 300000).show();
} 
```

}

```
public class MyNewsHandler extends DefaultHandler
{
private Boolean inTitle = false;
private Boolean inDescription = false;
private Boolean inItem = false;
private Boolean inCategory = false;
static public ArrayList<String> title = new ArrayList<String>(),
    description = new ArrayList<String>(), category = new ArrayList<String>();
private StringBuilder buff = null;
// All methods auto called in this order - start, characters, end
/*
 * Called when an xml tag starts
 * imgView.setImageResource(R.drawable.newImage);
 */
@Override
public void startElement(String uri, String localName, String qName,Attributes attributes) 
{
    if (inItem) 
    {
        if (localName.equals("title")) 
        {
            inTitle = true;
            buff = new StringBuilder();
        }
        if (localName.equals("description")) 
        {
            inDescription = true;
            buff = new StringBuilder();
        }
        if (localName.equals("category")) 
        {
            inCategory = true;
            buff = new StringBuilder();
        }

    }
    if (localName.equals("item")) 
    {
        inItem = true;
    }
}
/*
 * Called when an xml tag ends
 */
@Override
public void endElement(String uri, String localName, String qName)throws SAXException 
{
    if (!inTitle && !inDescription && !inCategory) 
    {
        inItem = false;
    } 
    else 
    {
        if (inTitle) 
        {
            String check = buff.toString().trim();
            title.add(check);
            inTitle = false;
            buff = null;
        }
        if (inDescription) 
        {
            String check2 = buff.toString().trim();
            String array [];
            int index = 0;
            if (check2.contains("/>"))
            {
                array = check2.split("/>");
                index = check2.indexOf("10;");
                description.add(array[array.length - 1].trim());
            }

            else description.add(check2);
            //description.add(array[1]);
            inDescription = false;
            buff = null;
        }
        if(inCategory)
        {
            String check = buff.toString().trim();
            category.add(check);
            inCategory = false;
            buff = null;
        }
    }
}
/*
 * Called to get tag characters
 */
@Override
public void characters(char ch[], int start, int length) 
{
    if (buff != null) 
    {
        for (int i = start; i < start + length; i++) 
        {
            buff.append(ch[i]);
        }
    }
} 
```

}

```
public class News extends ListActivity
{
String url;
TextView text1;
TextView text2;
static ImageView img;
// newsList contains the list items 
static ArrayList<HashMap<String, Object>> newsList = new ArrayList<HashMap<String, Object>>();
// to store drawable id's
static HashMap<String, Integer> images = new HashMap<String, Integer>();
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    //Load xml containing image view and a linear layout with 2 textviews
    setContentView(R.layout.aloglistview); 

    img = (ImageView)findViewById(R.id.imageView2);
    text1 = (TextView) findViewById(R.id.text1);
    text2 = (TextView) findViewById(R.id.text2);

    // url we are retrieving from
    url = "http://services.runescape.com/m=news/latest_news.rss";

    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    String result = ""; // result of http Post
    try
    {
        // Execute HTTP get Request
        HttpResponse response = httpclient.execute(httpget);

        // Extract the page content returned from the response
        BufferedReader in = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null)
        {
            sb.append(line + NL);
        }
        in.close();
        result = sb.toString(); // resulting content of the page
    } catch (ClientProtocolException e)
    {
        Log.d("ERROR", "ClientProtocolException=" + e);
        System.err.println("ClientProtocolException=" + e);
    } catch (IOException e)
    {
        Log.d("ERROR", "IOException=" + e);
        System.err.println("IOException=" + e);
    }
    try
    {
        //Parse the resulting page 
        Xml.parse(result, new MyNewsHandler());
    } catch (SAXException e)
    {
        e.printStackTrace();
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    //needs to match formulate list thing
    SimpleAdapter adapter = new SimpleAdapter(this, newsList,
            R.layout.newsitem, new String[] { "Title", "Description", "Image"},
            new int[] { R.id.textnews1, R.id.textnews2, R.id.imageView2});

    populateList(); //Add all items to the newslist 
    setListAdapter(adapter);
}
public  void populateList()
{
    //Method to add to images hashmap 
    initMap();
    //reset each time the list is populated
    newsList = new ArrayList<HashMap<String, Object>>();
    //Display 10 items
    for (int i = 0; i < 11; i++)
    {
        HashMap<String, Object> temp = new HashMap<String, Object>();
        String title = MyNewsHandler.title.get(i);
        String category = MyNewsHandler.category.get(i);
        //default drawable
        int drawable = R.drawable.item;
        //Match title text to hash keys to set correct image
        for (Map.Entry<String, Integer> entry : images.entrySet()) 
        {
            String key = entry.getKey();
            Object value = entry.getValue();
            if(category.contains(entry.getKey()))
            {
                drawable = entry.getValue();
                break;
            }
            else drawable = R.drawable.item;
        }
        temp.put("Title", title);
        temp.put("Description", " " + MyNewsHandler.description.get(i));
        temp.put("Image",drawable);
        newsList.add(temp);
    }
}
public void display(String string)
{
    Toast.makeText(getBaseContext(), string, 1000202).show();
}
public void initMap()
{
    images.put("Behind the Scenes News",R.drawable.behindthescenes);
    images.put("Customer Support News",R.drawable.customerservice);
    images.put("Game Update News",R.drawable.gameupdate);
    images.put("Website News",R.drawable.devblog);
    images.put("Technical News",R.drawable.technicalnews);
} 
```

}

对不起，代码太长了..问题是它可以工作（哈..），但是当我第一次想要它时它不会立即加载。

它这样做：启动应用程序>点击新闻按钮>“不加载，空白屏幕”

但是当我这样做时它会起作用：启动应用程序>点击新闻按钮>回击>点击新闻按钮>“即时加载”

我遵循了一个建议，我在点击按钮之前进行了预解析，还做了另一次尝试，我完全摆脱了图像（认为这可能是延迟）。没有不同。仍然是相同的行为。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:58:38.200

树点：

1.  用于`AsyncTask`与 UI 没有直接关系的任何事物
2.  缓存一切。从网站获得 XML 后，将其保存在某处，下次在开始下载之前从文件中加载。
3.  预加载。不要等待用户点击按钮。应用程序启动后，立即启动`AsyncTask`（参见第 1 页）以执行后台下载和 XML 解析。当用户按下按钮时，结果就准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T21:45:07.850

列尼克所说的一切。

我的解决方案只是略有不同。我做了这样的事情：

1.  On（按钮按下或其他触发事件）发出启动 IntentService（而不是 AsyncTask）的 Intent。为什么？它的语法比较简单，我想从几个地方调用它。
2.  立即开始显示结果并在结果滴入时用结果填充它。我这样做的简单方法是通过 ContentProvider 公开我的所有数据并运行 ListFragment 。

# objective-c - ABRecordRef 的 NSMutableArray。如何序列化？

> ID：10423987
> 
> 赞同：1
> 
> 时间：2012-05-03T01:36:58.497
> 
> 标签：objective-c, serialization, nsmutablearray, nsdictionary

我有一个带有 ABRecordRef 的 NSMutableArray

我想将它保存到磁盘，我的同事告诉我序列化它。我不知道他在说什么？

我在网上浏览过很多“解决方案”，但我不明白它是如何工作的或为什么需要它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:12:33.337

ABRecord 是一个不透明的核心基础类，没有相应的免费桥接目标 c 类。如果它是一个 Objective-C 类，你可以像@Toro 建议的那样使用 NSCoder。

假设您的可变数组是 ABPerson 引用的列表，您可以执行以下操作：

```
NSMutableArray newArr = [NSMutableArray array];
for(id obj in mutableArray) {
    ABRecordRef ref = (ABRecordRef)obj;
    ABRecordID recordID = ABRecordGetRecordID(ref);
    NSValue* v = [NSValue value:recordID withObjCType:@encode(ABRecordID)];
    [newArr addObject:v];
}
// newArr is a list of NSValues holding ABRecordIDs, which can be serialized. 
```

反序列化时，从每个 NSValue 中获取 ABRecordID，然后在其上调用 ABAddressBookGetPersonWithRecordID() 以获取 ABRecordRef。请记住，用户可能会删除记录，因此，您可能会从该函数返回 NULL 值。

# c# - 获取所有 Outlook 文件夹和子文件夹的列表

> ID：10423989
> 
> 赞同：9
> 
> 时间：2012-05-03T01:37:13.013
> 
> 标签：c#, outlook

很长一段时间以来，我一直试图弄清楚如何获取所有 Outlook 文件夹的列表，但只能获取默认文件夹的列表（即收件箱、发件箱、已发送邮件、已删除邮件等）。如果我有已创建的个人或自定义文件夹怎么办？例如，如果我向 Outlook 添加一个名为“Receipts”的文件夹，这将不是默认文件夹，也不会显示在“默认文件夹”下。如何在 c# 中使用 Microsoft.Office.Interop.Outlook 访问此文件夹。

我正在尝试创建一种方法来自动将某些新消息从任何给定文件夹下载到电子表格中。我想如果我可以获得所有文件夹的列表，那么我只能从所选文件夹中获取消息。

```
Outlook._Folders oFolders;          
Outlook.MAPIFolder oPublicFolder = olNS.GetDefaultFolder(Outlook.OlDefaultFolders.olFolder‌​Inbox).Parent;
foreach (Outlook.MAPIFolder Folder in oFolders) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T07:53:54.097

This should print out all the folders in your outlook including your public folders.

```
foreach (MAPIFolder folder in olNS.Folders)
{
    GetFolders(folder);
}

public void GetFolders(MAPIFolder folder)
{
    if (folder.Folders.Count == 0)
    {
         Console.WriteLine(folder.FullFolderPath);
    }
    else
    {
         foreach (MAPIFolder subFolder in folder.Folders)
         {
              GetFolders(subFolder);
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:34:30.550

请参阅 MSDN“如何：枚举文件夹”：http: [//msdn.microsoft.com/en-us/library/ff184607.aspx](http://msdn.microsoft.com/en-us/library/ff184607.aspx)

# hadoop - 如何使用 PIG 包含外部 jar 文件

> ID：10423990
> 
> 赞同：11
> 
> 时间：2012-05-03T01:37:15.800
> 
> 标签：hadoop, apache-pig

当我使用 hadoop 命令运行 mapreduce 作业时，我使用 -libjars 将我的 jar 设置到缓存和类路径。如何在 PIG 中做这样的事情？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-23T06:52:01.070

有两种方法可以将外部 jars 添加到 Pig 环境中。

1.  使用“-Dpig.additional.jars”启动 Pig

    `pig -Dpig.additional.jars=/local/path/to/your.jar`

2.  在 Pig 脚本或 grunt 中使用“注册”命令

    `register /local/path/to/your.jar;`

您可以根据自己的要求使用任何一种。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-03T21:17:22.170

```
register /local/path/to/myJar.jar 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-13T10:02:07.027

[zsxwing](https://stackoverflow.com/questions/10423990/how-to-include-external-jar-file-using-pig/16162785#16162785)答案的扩展。
您还可以将多个 jar 路径指定为

```
pig -Dpig.additional.jars="/local/path/1/*:/local/path/2/*" 
```

# php - 简单的 Mod_rewrite

> ID：10423991
> 
> 赞同：0
> 
> 时间：2012-05-03T01:37:26.113
> 
> 标签：php, .htaccess, url, mod-rewrite, redirect

出于某种原因，我可以在网上找到的所有 mod_rewrites 文档都在处理大型查询等。我只想让用户输入：

```
http://domain.com/page/faq 
```

他们将只访问 /faq.php 的地方

对不起，我的经验不足，但我希望你能原谅我！谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:57:23.070

如果你只想要常见问题

```
RewriteRule ^page/faq.php faq.php 
```

否则 Ignacio 有更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:54:31.913

将此规则放入`.htaccess`您的文档根目录中，并根据需要添加标志：

```
RewriteRule ^page/(.*) $1.php 
```

# c++ - 使用 Valgrind 运行时 malloc 返回 null

> ID：10423992
> 
> 赞同：5
> 
> 时间：2012-05-03T01:37:34.747
> 
> 标签：c++, c, linux, memory-management, valgrind

在正常情况下工作的 malloc 调用发生了巨大的分配（数十 GB）。该系统确实具有巨大的 RAM，并且是运行 2.6 x86_64 内核的 64 位机器。

mem rlimit 已使用 setrlimit 作为 INFINITY 完成。

我想用 Valgrind 运行它来进行内存分析并检查泄漏。

但是当使用 valgrind 运行时，malloc 失败并返回 NULL 指针。

我尝试减少分配的大小，但这无济于事。

任何输入？

问候，-J

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T01:49:28.337

请注意，这`malloc(3)`是在骗你——它实际上并没有一次分配所有内存，它只是向操作系统询问它，而操作系统对`malloc(3)`. 这是完全正常的行为，大部分时间都可以正常工作。`/proc/sys/vm/overcommit_memory`in的描述`proc(5)`包含详细信息：

```
 /proc/sys/vm/overcommit_memory
          This file contains the kernel virtual memory
          accounting mode.  Values are:

                 0: heuristic overcommit (this is the default)
                 1: always overcommit, never check
                 2: always check, never overcommit

          In mode 0, calls of mmap(2) with MAP_NORESERVE are not
          checked, and the default check is very weak, leading
          to the risk of getting a process "OOM-killed".  Under
          Linux 2.4 any nonzero value implies mode 1\.  In mode 2
          (available since Linux 2.6), the total virtual address
          space on the system is limited to (SS + RAM*(r/100)),
          where SS is the size of the swap space, and RAM is the
          size of the physical memory, and r is the contents of
          the file /proc/sys/vm/overcommit_ratio. 
```

Valgrind 不能这么轻率。它实际上跟踪进程的已分配、已初始化和未初始化的内存。因此，它需要比进程本身*更多*的内存，并且它对过度使用内存没有相同的容忍度。

我不知道在 valgrind 下运行程序需要多少内存，但请尝试添加更多 GB 的交换空间。您可以通过将零写入文件来创建新的交换*文件*`dd`——不要使用稀疏文件——然后`mkswap(8)`在文件上运行以初始化它并`swapon(8)`使用文件名运行以告诉系统将其用作交换文件.

# javascript - 用javascript改变表格的颜色

> ID：10423993
> 
> 赞同：-2
> 
> 时间：2012-05-03T01:37:51.303
> 
> 标签：javascript, html

> **可能重复：**
> [使用 javascript 更改表格的颜色](https://stackoverflow.com/questions/10423846/change-colors-of-table-with-javascript)

对于这个问题，我试图根据单击的单元格更改整个表格的字体颜色或背景颜色（黄色单元格将表格中的所有字体变为黄色......）我很确定我的语法是正确的，但遗憾的是我的逻辑不是...... .你们能指出我正确的方向吗？这是代码：

```
<html>
<script language="text/JavaScript">
        function changeFont(color){
            document.getElementById("miTabla").style.color = color;
        }
        function changeBack(color){
            document.getElementById("miTabla").style.backgroundColor = color;
        }
    </script>
<body>
    <header>Tabla de ejemplo</header>
    <table id="miTabla" border="2">
           <tr onclick="changeFont('red');">
            <td>changeFont</td>
            <td onclick="changeFont('#FF0000');">red</td>
            <td onclick="changeFont('#FFFF00');">yellow</td>
            <td onclick="changeFont('#0000FF');">blue</td>
        </tr><tr>
            <td>changeBack</td>
            <td onclick="changeBack('#FFFFFF');">white</td>
            <td onclick="changeBack('#808080');">gray</td>
            <td onclick="changeBack('#000000');">black</td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T01:52:41.327

```
<html>
<head>
<script>
        function changeFont(color){
            document.getElementById("miTabla").style.color = color;
        }
        function changeBack(color){
            document.getElementById("miTabla").style.backgroundColor = color;
        }
    </script>
</head>
<body>
    <header>Tabla de ejemplo</header>
    <table id="miTabla" border="2">
           <tr>
            <td>changeFont</td>
            <td onclick="changeFont('#FF0000');">red</td>
            <td onclick="changeFont('#FFFF00');">yellow</td>
            <td onclick="changeFont('#0000FF');">blue</td>
        </tr><tr>
            <td>changeBack</td>
            <td onclick="changeBack('#FFFFFF');">white</td>
            <td onclick="changeBack('#808080');">gray</td>
            <td onclick="changeBack('#000000');">black</td>
        </tr>
    </table>
</body>
</html> 
```

# jsp - 用tomcat保护jsp动作页面

> ID：10423997
> 
> 赞同：0
> 
> 时间：2012-05-03T01:38:58.890
> 
> 标签：jsp, tomcat

对不起，这是基本的，但我不容易找到答案。

目前我的大部分页面都符合这种模式

```
page.html -> action.jsp -> result.jsp 
```

page.html 有一个表单并将数据提交给 action.jsp，然后它重定向到 result.jsp。用户通常不会看到操作页面，但如果他们知道名称，他们就可以导航到

```
action.jsp?parameter=thisisbad 
```

例如。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:17:17.130

使用 servlet 代替`action.jsp`并隐藏`result.jsp`in`/WEB-INF/lib`文件夹。在`doGet()`servlet 的方法中只转发到`/WEB-INF/result.jsp`. 在`doPost()`servlet的方法中，处理表单提交，最后转发到`/WEB-INF/result.jsp`。

这样最终用户将永远无法`result.jsp`直接打开。在 servlet 中，您可以完全控制对 GET 和 POST 请求执行的操作。

### 也可以看看：

*   [我们的 servlets 标记 wiki 页面](https://stackoverflow.com/tags/servlets/info)