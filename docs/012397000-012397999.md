# StackOverflow 问答 12397000-12397999

# highcharts - Highcharts-serverside-export 不使用 Rhino 1.7R3 渲染图形

> ID：12397000
> 
> 赞同：2
> 
> 时间：2012-09-12T22:29:33.330
> 
> 标签：highcharts, server-side, rhino

我需要使用带有 Rhino/Batik (One2team) 的 Highcharts-serverside-export 导出图形以在我的 PDF 中使用。问题

1.  将 HighChart 与 Rhino-1.7R2 一起使用时，我能够获得带有图形的漂亮 SVG。

2.  当将 HighChart 与 Rhino-1.7R3 一起使用时，我得到了没有图表的 SVG。

我需要使用 Rhino1.7-R3，因为在我的项目中我们使用的是 WRO4J（WRO4J 依赖于 Rhino-1.7R3）。如果我使用的是 Rhino-1.7R2，它可以解决我的问题，但会通过破坏我的应用程序的整个 UI 来制造更大的问题。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:16:30.317

Highcharts-serverside-export 是否部署为您的 Web 应用程序的一部分？由于它需要旧版本的 rhino，因此您有以下选择：

1.  使用与 rhino-1.7.R2 兼容的旧版本 wro4j (<=1.4.5)
2.  在不同的 Web 应用程序中部署 highchart。这样它就可以使用 rhino-1.7.R2 并且不会与使用 rhino-1.7.R3 的使用 wro4j 的 Web 应用程序冲突。

# php - jQuery 自定义文件输入插件 - 文件未上传

> ID：12397002
> 
> 赞同：1
> 
> 时间：2012-09-12T22:29:38.853
> 
> 标签：php, jquery

** 面向未来的读者 **

尽管我接受了答案，但这个问题并没有为我解决。用户`dbf`显然知道他的东西，也许他的答案对你有用。如果没有，我道歉。水对我来说太深了，我没有时间花在这上面，所以我重新编写了我的代码以删除自定义文件输入的细节。我将完成我的项目，然后，如果可能，返回此代码并发布我的解决方案。然而，归根结底，用户`dbf`付出了很多努力，值得信任。

* * *

ajax 调用返回一个表格结构，该结构被放置在表单标签内。

ADD ROW 按钮克隆表格行，并带有用于上传文件的链接（自定义文件输入作为锚标记）。

我从[这里](http://www.daimi.au.dk/~u061768/file-input.html)用 jquery-custom-file-input.js 插件替换 INPUT TYPE=FILE 元素。这个 jquery 插件允许将任何元素转换为文件输入元素，因此我使用锚标记`#change_pd`作为文件输入元素。但是要实际上传文件，最小的文档说“将输入元素附加到表单元素”。

[这个 StackOverflow 问题](https://stackoverflow.com/questions/6875962/jquery-custom-file-input-plugin)正好解决了这个问题，但我无法让它在我的情况下工作。

一个标准的提交按钮提交表单，除了上传的文件之外的所有内容都被接收。

* * *

HTML - 在 DIV #reportstable 中插入 AJAX 生成的表

```
<form action="" method="post" name="upd" enctype="multipart/form-data" id="AFrm">
    <div id="reportstable">
    </div>
</form> 
```

* * *

AJAX - 返回的表如下所示。该表位于上面的 div #reportstable 中。

```
<table id="DocTable">
<tr>
    <td>New Document</td>
    <td>
        <span id="span_pd"></span>
        <input type="hidden" id="proj_id" name="proj_id" value="'.$project_id.'">
        <input type="hidden" id="status_pd" name="status_pd">
    </td>
    <td>
        <a id="change_pd" href="#">change</a>
        <input type="hidden" id="new_pd" name="new_pd">
    </td>
</tr>
</table> 
```

* * *

JQUERY - 这是插入文件的代码。它*确实*将选择的文件名作为文本放入 SPAN，并放入隐藏的输入文件#new_pd，该文件在 $POST 数据中接收。

但是，文件本身并未上传。

我不确定将 .appendTo() 放在哪里，或者如何编写 jquery。这是我尝试过的。除 .appendTo() 外，一切正常。

```
$(document).on('click','#change_pd',function() {
    $(this).file().choose(function(e, input) {
        $('#new_pd').val(input.val());
        $('#span_pd').html(input.val());
        $('#span_pd').css('color','grey');
        $('#status_pd').val('CHANGED');
    });
    $(this).css('text-transform','uppercase');
    $(input).appendTo('#AFrm').
        attr('name', 'a-name').
        attr('id', 'an-id');
    }); 
```

* * *

PS - 如果有人可以推荐一个更好的（首选？）自定义文件输入插件，我会全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:49:43.077

如果您查看您提供的插件中的代码

```
 var file = $('<div><form></form></div>').appendTo('body').css({
        'position': 'absolute',
        'overflow': 'hidden',
        '-moz-opacity': '0',
        'filter':  'alpha(opacity: 0)',
        'opacity': '0',
        'z-index': '2'      
    });

    var form = file.find('form');
    var input = form.find('input');

    function reset() {
        var input = $('<input type="file" multiple>').appendTo(form);
        input.change(function(e) {
            input.unbind();
            input.detach();
            btn.trigger('choose', [input]);
            reset();
        });
    };
    reset(); 
```

然后你会看到`<form>`and`<input type="file" multiple>`被附加到`body`. 这意味着您的表单`id="AFrm"`将不包含任何`<input type="file">`元素，这就是您不上传任何文件而只接收所选文件名称的原因。

您可以调整插件以通过像这样的对象将输入附加到由参数作为选项给出的特定形式`{ 'form':$('#AFrm') }`

# apache - 解释 CouchDB 的网站服务，CouchDB 是否以某种方式与 Apache 捆绑在一起，它是如何工作的？

> ID：12397005
> 
> 赞同：0
> 
> 时间：2012-09-12T22:29:53.717
> 
> 标签：apache, authentication, couchdb, oauth-2.0, mod-proxy

我试图了解 CouchDB 是如何工作的。它是与单独的 Apache 捆绑在一起，还是在系统中使用 Apache。我试图了解它如何确定在哪里为网站提供服务以及不同的方向是如何完成的。这是重要的信息，因为我试图了解如何在[这里](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)实现 Apache 2.2 mod-proxy -module 。我需要调整 CouchDB 还是需要调整单独的 Apache 进程？假设你有 10 个 CouchDB 进程，并且你想将它们的结果定向到站点 A，你怎么做呢？

抱歉，我现在含糊不清，但我正在尝试了解如何将不同的东西从一个站点组合到另一个站点，具有不同的授权 cookie 等。我遇到了一个问题，我有两个单独的站点`hello.com/myCouchDb/`并`hallo.de/someOthersite.html`分别工作。当我合并代码时，身份验证失败——我认为至少有三个不同的候选解决方案：

> **A）**将验证内容从另一个站点重定向到另一个站点（有点骇人听闻）和/或
> 
> **B）**以某种方式配置 CouchDB Apache -settings，我在 Futon 中尝试过但失败了。
> 
> **C）**将身份验证cookie存储到某个目录或数据库并在它们变旧时刷新它们（或使用永不旧的cookie）

那么如何将不同的 CouchDB 实例与不同的身份验证设置合并在一起呢？假设您有十个人使用不同的身份验证 cookie，并且您希望以某种方式将他们合并到同一个站点。你怎么能这样做？您是否调整网络设置、Apache 设置或 CouchDB 设置？还是您只是将 cookie 存储到某个目录或数据库中，每次它们变旧时您都会刷新它们？

*Ps 我是管理员，所以不用担心 OAuth2.0，我有身份验证 cookie 可以对不同的实例做任何我想做的事情。我只是不明白如何合并不同的实例。*

**也许相关**

> 2.  [CouchDB 代理？Apache 作为反向代理？](https://stackoverflow.com/questions/3398306/couchdb-proxy-apache-as-a-reverse-proxy)
>     
>     
> 3.  [https://stackoverflow.com/questions/12398389/different-definitions-of-the-term-proxy](https://stackoverflow.com/questions/12398389/different-definitions-of-the-term-proxy)
>     
>     
> 4.  [什么是代理？在 Apache 中是什么？它有很多不同的含义吗？](https://stackoverflow.com/questions/12397349/what-is-a-proxy-what-is-it-in-apache-does-it-have-many-different-meanings)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:47:34.937

听起来您对 CouchDB 的结构感到困惑。CouchDB 是具有 HTTP API 的原生 JSON 数据库。该 API 是通过 Mochiweb 提供的，Mochiweb 是一个捆绑在 CouchDB 中的基于 Erlang 的网络服务器。只有一个 CouchDB 服务器在运行，但它在 Erlang 虚拟机 (BEAM) 中运行，并且与典型的 Apache httpd 方法具有根本不同的架构。

关于身份验证，CouchDB 有一个每个实例（服务器）的 _users 数据库，其中包含密码和最少的帐户详细信息。作为管理员，您可以使用 Futon 看到这一点，尽管普通用户只能访问他们自己的个人资料。您可以将用户分配到各种角色，然后将这些角色和用户应用到每个数据库。在数据库上设置 _security 对象后，您需要经过身份验证才能读取，并且可以使用验证更新函数来强制执行写入约束。[关于http://blog.couchbase.com/what%E2%80%99s-new-couchdb-10-%E2%80%94-part-4-security%E2%80%99n-stuff-users](http://blog.couchbase.com/what%E2%80%99s-new-couchdb-10-%E2%80%94-part-4-security%E2%80%99n-stuff-users-authentication-authorisation-and-permissions)的一些简要信息[-authentication-authorisation-and-permissions](http://blog.couchbase.com/what%E2%80%99s-new-couchdb-10-%E2%80%94-part-4-security%E2%80%99n-stuff-users-authentication-authorisation-and-permissions)和[http://blog.mattwoodward.com/2012/03/definitive-guide-to-couchdb.html](http://blog.mattwoodward.com/2012/03/definitive-guide-to-couchdb.html)以及 wiki。

# symfony - Symfony 2.1 中的单元测试自定义验证约束但不访问容器？

> ID：12397011
> 
> 赞同：14
> 
> 时间：2012-09-12T22:30:33.517
> 
> 标签：symfony, phpunit, symfony-2.1

我如何对`ContainsItalianVatinValidator`自定义验证器进行单元测试，但*不访问容器** 和`validator`服务（因此，创建一个存根对象）？

```
class ContainsItalianVatinValidator extends ConstraintValidator
{
    /**
     * @param mixed $value
     * @param \Symfony\Component\Validator\Constraint $constraint
     */
    public function validate($value, Constraint $constraint)
    {    
        if (!preg_match('/^[0-9]{11}$/', $value, $matches)) {
            $this->context->addViolation($constraint->message, array(
                '%string%' => $value
            ));
        }

        // Compute and check control code
        // ...
    }
} 
```

在我的测试用例中，我知道我应该访问[`ConstraintViolationList`](http://api.symfony.com/2.1/Symfony/Component/Validator/ConstraintViolationList.html)，但我不知道如何从验证器本身进行访问：

```
class ContainsItalianVatinValidatorTest extends \PHPUnit_Framework_TestCase
{
    public function testEmptyItalianVatin()
    {
        $emptyVatin = '';
        $validator  = new ContainsItalianVatinValidator();
        $constraint = new ContainsItalianVatinConstraint();

        // Do the validation
        $validator->validate($emptyVatin, $constraint);

        // How can a get a violation list and call ->count()?
        $violations = /* ... */;

        // Assert
        $this->assertGreaterThan(0, $violations->count());
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-12T22:47:59.377

当您查看验证器的父类时，`Symfony\Component\Validator\ConstraintValidator`您会看到有一个方法被调用`initialize`，它接受一个实例`Symfony\Component\Validator\ExecutionContext`作为参数。

创建验证器后，您可以调用该`initialize`方法并将模拟上下文传递给验证器。您不必测试该`addViolation`方法是否正常工作，您只需测试它是否被调用以及是否使用正确的参数调用它。您可以使用 PHPUnit 的模拟功能来做到这一点。

```
...
$validator  = new ContainsItalianVatinValidator();
$context = $this->getMockBuilder('Symfony\Component\Validator\ExecutionContext')-> disableOriginalConstructor()->getMock();

$context->expects($this->once())
    ->method('addViolation')
    ->with($this->equalTo('[message]'), $this->equalTo(array('%string%', '')));

$validator->initialize($context);

$validator->validate($emptyVatin, $constraint);
... 
```

在此代码中，您必须将 [message] 替换为存储在`$constraint->message`.

实际上，这个问题与 PHPUnit 的关系比与 Symfony 的关系更大。您可能会发现 PHPUnit 文档的[Test Doubles](http://www.phpunit.de/manual/current/en/test-doubles.html)章节很有趣。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-03T18:02:30.610

为 Symfony 2.5+ 更新。为每个可能的消息添加一个测试，`validate()`验证器中的方法可能会添加触发该消息的值。

```
<?php

namespace AcmeBundle\Tests\Validator\Constraints;

use AcmeBundle\Validator\Constraints\SomeConstraint;
use AcmeBundle\Validator\Constraints\SomeConstraintValidator;

/**
 * Exercises SomeConstraintValidator.
 */
class SomeConstraintValidatorTest extends \PHPUnit_Framework_TestCase
{
    /**
     * Configure a SomeConstraintValidator.
     *
     * @param string $expectedMessage The expected message on a validation violation, if any.
     *
     * @return AcmeBundle\Validator\Constraints\SomeConstraintValidator
     */
    public function configureValidator($expectedMessage = null)
    {
        // mock the violation builder
        $builder = $this->getMockBuilder('Symfony\Component\Validator\Violation\ConstraintViolationBuilder')
            ->disableOriginalConstructor()
            ->setMethods(array('addViolation'))
            ->getMock()
        ;

        // mock the validator context
        $context = $this->getMockBuilder('Symfony\Component\Validator\Context\ExecutionContext')
            ->disableOriginalConstructor()
            ->setMethods(array('buildViolation'))
            ->getMock()
        ;

        if ($expectedMessage) {
            $builder->expects($this->once())
                ->method('addViolation')
            ;

            $context->expects($this->once())
                ->method('buildViolation')
                ->with($this->equalTo($expectedMessage))
                ->will($this->returnValue($builder))
            ;
        }
        else {
            $context->expects($this->never())
                ->method('buildViolation')
            ;
        }

        // initialize the validator with the mocked context
        $validator = new SomeConstraintValidator();
        $validator->initialize($context);

        // return the SomeConstraintValidator
        return $validator;
    }

    /**
     * Verify a constraint message is triggered when value is invalid.
     */
    public function testValidateOnInvalid()
    {
        $constraint = new SomeConstraint();
        $validator = $this->configureValidator($constraint->someInvalidMessage);

        $validator->validate('someInvalidValue', $constraint);
    }

    /**
     * Verify no constraint message is triggered when value is valid.
     */
    public function testValidateOnValid()
    {
        $constraint = new SomeConstraint();
        $validator = $this->configureValidator();

        $validator->validate('someValidValue', $constraint);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-08T12:10:06.223

3.4 更新：

我已经将上下文创建放在一个特征中，因此我们可以将它重用于我们所有的自定义约束。

```
class SomeConstraintValidatorTest extends TestCase
{
    use ConstraintValidationTrait;

    /** @var SomeConstraint */
    private $constraint;

    protected function setUp()
    {
        parent::setUp();

        $this->constraint = new SomeConstraint();
    }

    public function testValidateOnInvalid()
    {
        $this->assertConstraintRejects('someInvalidValue', $this->constraint);
    }

    public function testValidateOnValid()
    {
        $this->assertConstraintValidates('someValidValue', $this->constraint);
    }
} 
```

特质：

```
<?php

use PHPUnit\Framework\MockObject\MockObject;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Validator\Context\ExecutionContext;

trait ConstraintValidationTrait
{
    /**
     * The assertion is done in the mock.
     *
     * @param mixed $value
     */
    public function assertConstraintValidates($value, Constraint $constraint): void
    {
        $validator = $this->createValidator($constraint, true);
        $validator->validate($value, $constraint);
    }

    /**
     * The assertion is done in the mock.
     *
     * @param mixed $value
     */
    public function assertConstraintRejects($value, Constraint $constraint): void
    {
        $validator = $this->createValidator($constraint, false);
        $validator->validate($value, $constraint);
    }

    /** This is the phpunit mock method this trait requires */
    abstract protected function createMock($originalClassName): MockObject;

    private function createValidator(Constraint $constraint, bool $shouldValidate): ConstraintValidator
    {
        $context = $this->mockExecutionContext($shouldValidate);

        $validatorClass = get_class($constraint) . 'Validator';

        /** @var ConstraintValidator $validator */
        $validator = new $validatorClass();
        $validator->initialize($context);

        return $validator;
    }

    /**
     * Configure a SomeConstraintValidator.
     *
     * @param string|null $expectedMessage The expected message on a validation violation, if any.
     *
     * @return ExecutionContext
     */
    private function mockExecutionContext(bool $shouldValidate): ExecutionContext
    {
        /** @var ExecutionContext|MockObject $context */
        $context = $this->createMock(ExecutionContext::class);

        if ($shouldValidate) {
            $context->expects($this->never())->method('addViolation');
        } else {
            $context->expects($this->once())->method('addViolation');
        }

        return $context;
    }
} 
```

# c++ - 要求使用 cout/cin 进行有效输入

> ID：12397016
> 
> 赞同：2
> 
> 时间：2012-09-12T22:31:21.600
> 
> 标签：c++

我有一个游戏，用户需要输入一定范围内的 x 和 y 坐标，一次一个。现在我的输入代码如下：

```
do {
    printf("\n");
    cout << "X: ";
    cin >> x;
    cout << "Y: ";
    cin >> y;
} while (cin.fail()); 
```

我是 C++ 新手，但阅读文档让我相信这是验证用户输入的可接受方法。当输入有效时它可以完美地工作，但是当输入是不同的类型（例如输入“a”）时，它会无限循环“X：Y：”。我需要做些什么不同的事情才能让它等待用户输入，就像第一次读取这些行一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:36:58.543

您应该检查每个输入操作：

```
std::cout << "X: ";
if (!(std::cin >> x)) { /* error */ }
std::cout << "Y: ";
if (!(std::cin >> y)) { /* error */ } 
```

如何处理错误取决于您。你可以提前返回，从循环中中断，抛出异常......这一切都取决于。

请注意，您*可以*循环直到获得可解析的内容，但如果用户关闭输入流，这很危险。最好逐行阅读并解析：

```
std::cout << "Please enter an integer X: ";
int x;
bool success = false;

for (std::string line; std::getline(std::cin, line); )
{
    std::istringstream iss(line);
    if (iss >> x >> std::ws && iss.get() == EOF)  // #1
    {
        success = true;
        break;
    }
    std::cout << "Sorry, please try again: ";
}

if (!success)
{
    std::cerr << "Unexpected end of input stream!\n";
    std::exit(1);
} 
```

这样，如果用户在会话中间按下 [Ctrl]-D，程序会立即关闭，并且不会尝试从关闭的输入流中读取更多值。

行上的条件标记`#1`测试是否成功解析整数以及是否已到达行尾（吞噬中间空白）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T22:41:06.047

尝试解析每个变量的最大问题是，当用户犯错时，他们的整个输入都会变得可疑。

考虑我是否跳过无效输入并输入：“3e4 40”。我的意思是“34 40”，但跳过 e 可能会变成“3 4”，然后留下“40”，或者可能会留下“4 40”。

考虑使用[getline](http://en.cppreference.com/w/cpp/string/basic_string/getline)读取整行并解析它，例如使用[istringstream](http://en.cppreference.com/w/cpp/io/basic_istringstream)，就像现在一样 - 任何错误都会变成错误，而不会使输入流处于奇怪的状态。

# web - 与网站交互的脚本语言

> ID：12397022
> 
> 赞同：2
> 
> 时间：2012-09-12T22:31:46.237
> 
> 标签：web, interaction

我正在尝试编写一个脚本，以便能够自动访问网站、填写表单字段、提交表单、登录到我的电子邮件并发送电子邮件。基本的网络交互性。你会建议我使用什么语言，以及我应该如何开始编写这个脚本？（是否需要安装编译器、环境等）

我看过 AutoIt、Javascript 和 VBScript，但它们似乎并没有完全做到我想要的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:22:50.530

对于浏览器自动化，请尝试[Selenium](http://seleniumhq.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:07:11.933

发送邮件的最简单 API 是 apache commons mail [http://commons.apache.org/email/](http://commons.apache.org/email/) 10 行 java 代码就可以解决问题。

# ruby - HAML for 循环在 HTML 渲染中打印单词“true”

> ID：12397024
> 
> 赞同：1
> 
> 时间：2012-09-12T22:32:00.150
> 
> 标签：ruby, haml

我正在从一个数组对象打印一个列表，当它遍历数组中的所有项目时，它会在 HTML 中打印单词“true”。

代码如下所示：

```
%ul 
  = for i in users
    %li
      = i.username 
```

这打印：

```
username1
username2
username3
true 
```

在 html 输出中看起来像这样：

```
<ul>
  <li>username1</li>
  <li>username2</li>
  <li>username3</li>
  true
</ul> 
```

为什么会`true`被打印出来，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:34:54.953

您的问题是您正在使用`=`for 循环，这会导致输出表达式的结果。当您想运行 Ruby 代码但没有将值发送到输出中时，请`-`改用：

```
%ul 
  - for i in users
    %li
      = i.username 
```

这可以更简单地写成：

```
%ul 
  - for i in users
    %li= i.username 
```

证明：

```
C:\>haml
- users = %w[user1 user2 user3]
%ul
  - for name in users
    %li= name
^Z
<ul>
  <li>user1</li>
  <li>user2</li>
  <li>user3</li>
</ul> 
```

* * *

顺便说一句，我个人觉得`for`Ruby 中的这种用法令人厌恶。相反，我个人建议：

```
%ul 
  - users.each do |user|
    %li= user.username 
```

# c# - 我可以在 C# 中创建一个同时包含长字符串和字符串的列表吗

> ID：12397026
> 
> 赞同：3
> 
> 时间：2012-09-12T22:32:08.937
> 
> 标签：c#

我有以下课程：

```
public abstract class BaseGridViewModel
{
    protected BaseGridViewModel()
    {
        Timer = new List<long>();
    }
    public List<long> Timer { get; set; }
} 
```

要更新计时器，我有：

```
vm.Timer.Add(sw.ElapsedMilliseconds); 
```

我对列表不太熟悉。我是否有可能拥有一个包含长字符串和字符串的列表，以便我可以执行以下操作：

```
vm.Timer.Add(sw.ElapsedMilliseconds, "After event 1");
vm.Timer.Add(sw.ElapsedMilliseconds, "After event 2"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T22:33:42.827

创建一个类来保存这两个值，并将它们存储在列表中。

```
public sealed class TimeEvent
{
  public long Elapsed {get; private set;}
  public string Description { get; private set;}
  public TimeEvent(long elapsedTime, string descriptionOfEvent)
  {
    this.Elapsed = elapsedTime;
    this.Description = descriptionOfEvent;
  }
}

public IList<TimeEvent> TimerEvents {get; set;}

vm.Timer.Add(new TimeEvent(sw.ElapsedMillisends, "After event 1")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:37:31.917

您可以创建一个`class`，然后创建`List`一个`class`。

```
public class TimerData
{
    public long time;
    public string description;

    public TimerData(long t, string d)
    {
        this.time = t;
        this.description = d;
    }
} 

List<EventData> list = new List<EventData>();
list.Add(new TimerData(50, "Description")); 
```

你可以用你的类做更高级的事情，但是这个方法很简单。

# gnuradio - FFT 和 IQ 数据之间的关系

> ID：12397027
> 
> 赞同：1
> 
> 时间：2012-09-12T22:32:16.847
> 
> 标签：gnuradio, usrp

我一直在研究 USRP 的工作原理，尤其是如何从信号中感知能量。到目前为止，我已经了解到 USRP 感知 IQ 数据，然后应用 FFT 对其进行处理。（我一直在看 usrp_spectrum_sense.py ）IQ 样本的单位是什么？FFT完成后的单位是什么？开发 FFT 所需的唯一数据是 IQ 样本？

先谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:15:35.250

不幸的是，IQ 样本没有单位，它只是一个幅度（对于 UHD 驱动器，它介于 -1 和 1 之间）。USRP 的许多子板的规范没有指定接收器灵敏度。您不能单独使用 IQ 样本来计算输入功率，您需要自己进行校准，例如使用信号发生器在 USRP 输入中生成已知功率的信号，并使用 GNURadio 记录您看到的内容。然后，您需要使用从您收集的校准数据派生的计算来包装来自 FFT 的数据。

# frameworks - 数据库更改后刷新？

> ID：12397033
> 
> 赞同：0
> 
> 时间：2012-09-12T22:32:47.540
> 
> 标签：frameworks, entity, entity-framework-5

尽管我已经在各种情况下看到过这个问题，但我似乎无法找到我的方案的答案。

我是 EF 的菜鸟，我使用数据库优先方案和“逆向工程师”代码工具开始了一个新项目。我对我的数据库进行了一些更改，出于“绝望”，再次运行了相同的工具，这似乎工作正常，但让我隐约感到紧张。

我已经看到有关使用“从数据库刷新”工具的讨论，但我不仅找不到它，而且在我的解决方案中根本找不到 edmx 文件。我将需要将一个全新的表添加到我的数据库中，并且我想确保我遵循正确的程序在之后进行更新。

我应该采取什么程序来更新我的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:39:39.997

如果您更改了数据库并且现在想要更新/重新创建模型，只需右键单击 EF 设计器图面并选择“从数据库更新模型”。如果由于某种原因您可以从头开始，通常只需删除 edmx 文件，然后右键单击您的项目 -> 添加新项目（或 Ctlr + Shift + A）并添加新的 ADO.NET 数据实体模型即可. 然后在向导中，您需要从数据库中选择模型并指向您的数据库。如果您的项目中也没有 .edmx 文件，则需要按照上述步骤操作。

# android - Android 图片按钮大小限制

> ID：12397035
> 
> 赞同：1
> 
> 时间：2012-09-12T22:33:05.753
> 
> 标签：android, image, imagebutton

在我的应用程序中，我让用户用相机拍照，然后使用该图像作为 imageButton 的来源。我使用 android:scaleType fitCenter 来缩小图像，但无论我为最大按钮高度设置什么，按钮的大小仍然翻倍。有没有办法在我把图片放进去之后限制按钮的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:50:37.720

尝试将按钮的宽度和高度设置为特定的 dp 而不是使用 wrap_content

```
<Button
    android:layout_width="10dp"
    android:layout_height="10dp" /> 
```

类似的东西

# c# - SqlConnection 未读取

> ID：12397036
> 
> 赞同：0
> 
> 时间：2012-09-12T22:33:14.537
> 
> 标签：c#, asp.net, sql-server

我有一个 SQL 命令，它查询数据库表并检索信息....非常基本。

我可以看到阅读器在调试时从 DB 表中得到结果，但由于某种原因，它总是跳过“While Reader.Read”，然后跳过并关闭连接，从不读取数据。

```
 SqlConnection con = new SqlConnection(connectionString);
    SqlCommand cmd = new SqlCommand("lbx_EmailDomains_SELECT", con);
    cmd.CommandType = CommandType.StoredProcedure;

    con.Open();
    SqlDataReader reader = cmd.ExecuteReader();

    if (reader.HasRows)
    {
        while (reader.Read())
        {
           // Never Reaches Here
        }
    }

    reader.Close();
    con.Close(); 
```

**更新：删除 reader.HasRows 解决了这个问题。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:35:47.697

我的猜测是，实际上它并没有达到`reader.Read()`. 我怀疑那`reader.HasRows`是假的，正是因为你还没有打电话`reader.Read()`。

老实说，我认为测试根本没有`HasRows`用 - 我只是摆脱它。

请注意，最好使用`using`语句并摆脱手动`Close()`调用，这样即使发生异常，连接/读取器也会关闭。

编辑：根据评论：

*   它*应该可以*工作，并且这种模式显示在一些 MSDN 文档中
*   `HasRows`显然在返回 false`true`之前返回`reader.Read()`
*   删除`HasRows`测试显然解决了这个问题。奇怪的。

我想知道这里是否有一些我们不知道的调试器交互......

# javascript - d3 中的条件转换

> ID：12397040
> 
> 赞同：0
> 
> 时间：2012-09-12T22:33:52.637
> 
> 标签：javascript, animation, d3.js, axis-labels, timelinemarkers

我正在 d3 中编写双层时间轴。第一层是按刻度轴的正常刻度，就像内置的那样。第二层有“更大规模”的上下文日期，比如年份。

例如，它可能看起来像这样

```
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
2008    2009                  2010 
```

稍微拖一下之后会是这个样子

```
 |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
 2009                       2010              2011 
```

我想要做的是让标签动画到它们的新位置，但前提是它们具有相同的标签。所以这里 2009 年和 2010 年会下滑。

问题是 d3 可能会将新的 2009 标签分配给之前的 2008 标签，从而破坏效果。这可以避免吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:22:28.640

不看更多代码很难说，但听起来你需要[operator的](https://github.com/mbostock/d3/wiki/Selections#wiki-data)[`key`参数`.data()`](https://github.com/mbostock/d3/wiki/Selections#wiki-data)。这允许您将数据连接到具有关键功能的元素，该功能可能基于现有元素和/或其现有数据。[在此条形图教程](http://mbostock.github.com/d3/tutorial/bar-2.html)的“对象恒定性”部分中有一个很好的解释。

# xml - XSLT：根据元素是否存在获取xpath的值

> ID：12397043
> 
> 赞同：1
> 
> 时间：2012-09-12T22:34:20.923
> 
> 标签：xml, xslt, xhtml

我会检查文档是否包含给定的值和 xpath，如果它确实使用了选定的值，则使用另一个值。我在 XSLT 方面真的很糟糕，但这是我开始的：

```
 <xsl:choose>
          <xsl:when test="p//section.std[@type = 'SpecialSection']/p/img/@alt">
            <xsl:apply-templates select="p//section.std[@type = 'SpecialSection']/p/img/@alt"/>
          </xsl:when>
          <xsl:otherwise>
            <xsl:apply-templates select="p//meta-data.titles/meta-data.title"/>
          </xsl:otherwise>
        </xsl:choose> 
```

当前未选择任何值。我怀疑我不能像以前那样编写我的选择测试。我不确定空值是否计算为布尔值。基本上我想测试第一个 xpath 是否返回一个值以及它是否使用它，如果不使用块中的那个。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:08:46.080

**您可以仅使用以下单个表达式**（以下`select`属性`xsl:variable`）选择想要的节点：

```
<xsl:variable select=
 "p//section.std[@type = 'SpecialSection']/p/img/@alt
 |
  p[not(.//section.std[@type = 'SpecialSection']/p/img/@alt)]
                                           //meta-data.titles/meta-data.title
 "/> 
```

# node.js - 当所需文件不导出任何内容时，require() 会做什么？设置猫鼬+快递的正确方法是什么？

> ID：12397044
> 
> 赞同：3
> 
> 时间：2012-09-12T22:34:21.077
> 
> 标签：node.js, express, mongoose, require

我正在使用 express.js+mongoose（在 github 上：[https](https://github.com/dreamerslab/express-todo-example) ://github.com/dreamerslab/express-todo-example ）查看这个简单的待办事项应用程序示例。在 db.js 文件中，它定义了模式并连接到 mongodb：

```
var mongoose = require( 'mongoose' );
var Schema   = mongoose.Schema;
var Todo = new Schema({
user_id    : String,
content    : String,
updated_at : Date
});
mongoose.model( 'Todo', Todo );
mongoose.connect( 'mongodb://localhost/express-todo' ); 
```

但它不出口任何东西。然而，在 app. 的文件中，需要 db.js 文件，如下所示：

```
// mongoose setup
require( './db' ); 
```

而不将其分配给任何变量。

所以这里出现了我不明白的部分：在 /routes/index.js 文件中，您只需像这样要求 mongoose 就可以使用模型和模式

```
var mongoose = require( 'mongoose' );
var Todo     = mongoose.model( 'Todo' );
Todo.find(...)
... 
```

那么 index.js 如何确定 Todo 模型中的内容，因为 mongoose 实例没有传递给它，而是重新需要它。

此外，如果我想将我的架构分成不同的文件，例如拥有 todo.js、user.js 等，那么设置结构的正确方法是什么？我是否应该在制作之前简单地要求 db.js 中的架构文件联系？

提前致谢！

待办事项应用程序的结构：

```
todo
|-- node_modules
|   |-- ejs
|   |-- express
|   `-- mongoose
|
|-- public
|   |-- images
|   |-- javascripts
|   `-- stylesheets
|       |-- style.css
|
|-- routes
|   `-- index.js
|
|-- views
|   |-- index.ejs
|   `-- layout.ejs
|
|-- .gitignore
|
|-- app.js
|
`-- package.json 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:08:56.083

```
// mongoose setup
require( './db' ); 
```

该代码只会导致 db.js 模块运行，这就是本例中所需的全部内容。大多数模块都会导出一些东西，但在这种情况下，顶层代码只需要运行，所以不需要导出任何东西。

至于 mongoose 如何允许您在一个文件中定义模型并在另一个文件中使用它们，它使用了一种在`required`. 看到[这行代码](https://github.com/LearnBoost/mongoose/blob/master/lib/index.js#L305)：

```
module.exports = exports = new Mongoose; 
```

所以这意味着你得到的`require('mongoose')`是一个全局共享的实例，`Mongoose`它有状态跟踪所有定义的模型。在我看来，这有点“神奇”，但这就是它的工作原理。`Mongoose`如果您想避免这种模式，您也可以创建自己的实例。

# php - 仅通过名称和属性值使用 PHP DOM 访问 XML 元素？

> ID：12397049
> 
> 赞同：0
> 
> 时间：2012-09-12T22:34:34.483
> 
> 标签：php, domdocument

如果您只有元素的名称和能力 ID，您将如何在以下 XML 上打印*Ability* -elements *Default -attribute 值？*

例如，如果我有名称“史蒂夫”和 ID 1003，那么我将如何选择并打印该能力默认值“假”。

```
<Item Id="1">
<Name>Batman</Name>
<Ability Id="3001" Default="true">Super Strength</Ability>
<Ability Id="3002" Default="false">Master martial artist</Ability>
<Ability Id="3003" Default="false">Access to high tech</Ability>
</Item>

<Item Id="2">
<Name>Superman</Name>
<Ability Id="3004" Default="true">Flight</Ability>
<Ability Id="3005" Default="false">Super Strength</Ability>
<Ability Id="3006" Default="false">Super Speed</Ability>
<Ability Id="3007" Default="true">Stamina</Ability>
<Ability Id="3008" Default="false">Invulnerability</Ability>
</Item>

<Item Id="3">
<Name>Spiderman</Name>
<ScopeNotes/> <HistoryNotes/>
<Ability Id="219" Default="false">Super Reflex & Agility</Ability>
<Ability Id="567" Default="true">Spider Sense</Ability>
</Item>

<Item Id="4">
<Name>Steve</Name>
<Ability Id="1007" Default="false">Cake eating</Ability>
<Ability Id="1001" Default="true">Swearing</Ability>
<Ability Id="1002" Default="false">Watching movies</Ability>
<Ability Id="1003" Default="false">Steve</Ability>
</Item> 
```

问题是每个元素都有不同数量的能力节点，并且名字“史蒂夫”出现在名字和能力节点中。

我已经阅读了 php dom 文档，并且之前使用过它来遍历项目并获取名称（例如新的 DOMDocument、加载文件、getElementsByTagName），但是当您尝试执行我上面解释的操作时，我很难理解它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:10:42.287

正如 Bob Finchemer 所建议的，XPath 应该是一个很好的方法。以下路径应该会给你结果

```
//Item[Name="Steve"]/child::Ability[@Id="1003"]/@Default 
```

路径说明：

1.  `//`
    选择文档中各处的节点（我不知道完整的 xml）
2.  `Item`
    选择`<Item>`-节点
3.  `[Name="Steve"]`
    `<Name>`选择具有nodeValue "Steve" 的子元素的节点
4.  `child::Ability`
    选择子节点`<Ability>`
5.  `[@Id="1003"]`
    选择 ID 属性设置为 1003 的节点
6.  `@Default`
    选择默认属性

对于给定的 XML，它将返回一个带有 1 个属性节点的 DOMNodeList`(@Default="false")`

如何使用它？[http://www.php.net/manual/de/domxpath.query.php](http://www.php.net/manual/de/domxpath.query.php)

演示：[http ://codepad.org/qtgWXFtm](http://codepad.org/qtgWXFtm)

# c# - 使用带有 protobuf-csharp-port 的文件记录和重放人类可读的 protobuf 消息

> ID：12397051
> 
> 赞同：1
> 
> 时间：2012-09-12T22:34:37.990
> 
> 标签：c#, protocol-buffers

我正在使用 protobuf-csharp-port，我需要能够记录一些 protobuf 消息以便以后重播。XML 对我来说是理想的，但我很灵活，只要有人可以进入文件，进行更改，然后重播文件中的消息。

使用此 C# 代码：

```
 MyRequest req =
            MyRequest.CreateBuilder().SetStr("Lafayette").Build();

        using (var stringWriter = new StringWriter())
        {
            var xmlWriterSettings = new XmlWriterSettings
                {
                    ConformanceLevel = ConformanceLevel.Fragment
                };

            var xmlWriter = XmlWriter.Create(stringWriter, xmlWriterSettings);

            ICodedOutputStream output = XmlFormatWriter.CreateInstance(xmlWriter);
            req.WriteTo(output);
            output.Flush();
            string xml = stringWriter.ToString();

            using (var streamWriter = new StreamWriter(@"Requests.txt"))
            {
                streamWriter.WriteLine(xml);
                streamWriter.WriteLine(xml);
                streamWriter.WriteLine(xml);
            }
        } 
```

我生成 Requests.txt 文件，其中包含：

```
<str>Lafayette</str>
<str>Lafayette</str>
<str>Lafayette</str> 
```

但是，当我尝试使用以下方法将它们反序列化时：

```
 var xmlReaderSettings = new XmlReaderSettings
        {
            ConformanceLevel = ConformanceLevel.Fragment
        };

        using (var xmlReader = XmlReader.Create(@"Requests.txt", xmlReaderSettings))
        {
            ICodedInputStream input = XmlFormatReader.CreateInstance(xmlReader);
            MyRequest reqFromFile;

            while(!input.IsAtEnd)
            {
                reqFromFile =
                    ReverseRequest.CreateBuilder().MergeFrom(input).Build();
            }
        } 
```

只有一个`MyRequest`被反序列化，另外两个被忽略。（`reqFromFile`建成后，`input.IsAtEnd == true`.）

回到我的问题：有没有办法从一个文件中读取多个人类可读的 protobuf 消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:38:00.770

> 回到我的问题：有没有办法从一个文件中读取多个人类可读的 protobuf 消息？

好吧，您当前正在创建一个包含多个根元素的文本文件——它不是一个有效的 XML 文件。

最简单的方法可能是创建一个包含所有这些请求的单个 XML 文档，然后加载它（例如使用 LINQ to XML）并`XmlReader`在每个根元素的子元素处创建一个定位。然后，这些`XmlReader`对象中的每一个都应该能够反序列化为单个 protobuf 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:51:57.403

您可以查看[协议缓冲区编辑器](http://code.google.com/p/protobufeditor/)

或者有谷歌自己的文本格式，有点像 JSon。您可以使用 protoc 命令在 2 之间进行转换（查看编码/解码选项，您还需要 proto 定义）

# ios5 - 传入短信无法识别 iOS 自定义 URL 方案

> ID：12397052
> 
> 赞同：2
> 
> 时间：2012-09-12T22:34:40.697
> 
> 标签：ios5

我创建了一个注册新 url 方案的 iOS 应用程序。在我的开发手机上，一切正常。在 SMS 应用程序、便笺、电子邮件和 safari 中，新方案的所有 url 都以链接形式显示为下划线。我可以点击链接，我的应用程序将被调出。

但是，当我使用 Adhoc 配置文件将应用程序分发到其他手机时，URL 不会*仅*在传入的 SMS 中被识别。如果有人向我发送包含 url 的消息，它不会作为链接加下划线。如果我向自己发送包含 url 的消息，则链接仅出现在发送的消息中，而不出现在收到的消息中。

有人经历过吗？有任何想法吗？我用完了选项....

谢谢！

# mysql - MySql 安全地将值从一行转移到另一行

> ID：12397053
> 
> 赞同：1
> 
> 时间：2012-09-12T22:34:40.843
> 
> 标签：mysql, sql, transactions, innodb

我在表格中有一个名为 balance 的列。这些值代表真钱。我需要从一排安全地转移到另一排。

因此从第 1 行中减去该值并添加到第 2 行。如果第 1 行余额低于该值，则整个传输操作将失败，并且两行 ramin 均保持不变。

因为我使用的是innodb，所以我可以使用事务来包装选择和更新，但是如果出现故障，如果有一个有效的原子操作来防止锁定长时间回滚，那就太好了。

有更新这两行的有效方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:28:26.483

您需要做的是这样的一系列操作。

```
 START TRANSACTION;
 SELECT (the row you're going to decrement) FOR UPDATE;
 SELECT (the row you're going to increment) FOR UPDATE;
 Your updates, whatever they are.
 COMMIT; 
```

使用 InnoDB 或[Aria](http://mariadb.org/)存储引擎，这将满足您的需求。这是一个解释：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-locking-reads.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-locking-reads.html)

首先，您是要递减的行还是要递增的行都没有关系`SELECT ... FOR UPDATE`，只要您*始终*以相同的顺序选择它们即可。否则你的[哲学家会饿死](http://en.wikipedia.org/wiki/Dining_philosophers_problem)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:54:44.583

我开发了自己的解决方案：表名是 Balance 列是 id 和 balance。存在此工作源和目标 id 的先决条件

```
UPDATE
  Balance
RIGHT JOIN
  (SELECT id FROM (SELECT :srcId AS id UNION ALL SELECT :dstId AS id) as v WHERE EXISTS(SELECT id FROM Balance WHERE id = :srcId AND balance >= :value)) AS ids ON Balance.id = ids.id
SET
  balance = balance + IF(ids.id = :srcId, -:value, :value) 
```

php PDO::prepare 的参数语法是 ":< 参数 >"

请检查是否有任何问题

# mod-rewrite - 新安装的 SSL 在 apache2 上不起作用 - 收到 310 错误 - 重定向太多

> ID：12397059
> 
> 赞同：0
> 
> 时间：2012-09-12T22:35:27.570
> 
> 标签：mod-rewrite, ssl, apache2

免责声明 - 在这方面我完全是新手。继承了这个问题。

我刚刚在我们的网站上安装了 SSL 证书。安装似乎很顺利。每当我尝试通过 https 访问页面时，我都会收到 310 - Too many redirects 错误。我怀疑这与我的虚拟主机的设置方式有关，但我对我正在查看的内容知之甚少。

这是来自 SSL 虚拟主机的代码

```
 <VirtualHost *:443>
    SSLEngine On
    SSLCertificateFile "/path/file.crt"
    SSLCertificateKeyFile "/path/file.key"
    SSLCertificateChainFile "/path/file.crt"
    ServerAdmin admins@email.com
    ServerName domain.com
    DocumentRoot /var/www/domain.com/www
    <Directory /var/www/domain.com/www>
            SSLRequireSSL
            Options -Indexes +FollowSymLinks
            RewriteEngine On
            RewriteBase /
        RewriteRule ^labs$ http://www.mdlabtests.com/ [L]
        RewriteRule ^imaging$ http://prepaidimaging.com/ [L]
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^([0-9a-zA-Z]*)$ /index.php?aid=$1 [L]
    </Directory>
    ErrorLog /path/file.log
    TransferLog /path/file.log
    LogLevel warn
    Alias /comp /var/www/domain.com/www/comp.php
    <Location /card>
        DirectoryIndex create_card.php
    </Location>
    php_admin_value session.cookie_domain "domain.com"
    php_admin_flag session.cookie_secure off
    php_admin_value open_basedir "/var/www/domain.com/:/var/www/sub_dir/cg/:/usr/share/php/"
    php_value include_path ".:/var/www/domain.com/includes:/usr/share/php"
    php_admin_flag  file_uploads off 
```

我试图访问的页面是[https://domain.com/enrollment.php](https://domain.com/enrollment.php)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:00:12.700

或者您的文件系统中是否有一个 .htaccess 文件？

# javascript - JavaScript：点击时相对于父级增加变量值

> ID：12397060
> 
> 赞同：2
> 
> 时间：2012-09-12T22:35:29.683
> 
> 标签：javascript, jquery, ajax, onclick, click

我有一个复杂的问题，所以我会尽量保持简短。

我的用例是为移动网站构建 RSS 提要。该界面将类似于仅基于浏览器的 Pulse 阅读器。

我正在使用 PHP 进行繁重的工作，以连接到 XML API 并在页面加载时提取初始数据。我正在尝试使用 jQuery 构建一个 AJAX 调用，它将修改我的 URI 查询字符串`click()`并拉入一组新的结果并将它们附加到我现有的元素中。

我的 URI 看起来像这样：

`http://www.domain.com/request.php?subcategoryId=1&page=1`

我正在运行一个 PHP`foreach()`循环来填充我的页面：

```
<?php // Collect Subcategories and Titles
 foreach ($phpObjects->SubcategoryResult as $SubcategoryResult) { ?>

<?php // Callback to subcategoryArticleRequest() to recieve article data
 $subcategoryObjects = subcategoryArticleRequest($SubcategoryResult->subcategoryId); ?>

<div class="subcategory">
  <h2><?php echo $SubcategoryResult->subcategoryName; ?></h2>
  <div class="articleFeed overthrow">
    <table>
      <tr>
        <?php foreach ($subcategoryObjects->articleResult as $articleResult) { ?>
        <td>

          <!-- ARTICLE CONTENT POPULATED HERE -->

        </td>
        <?php } ?>

        <td data-subcategoryId="<?php echo $SubcategoryResult->subcategoryId; ?>" onClick="page++">
          <a class="loadMore" href="#">Load More</a>
        </td>

      </tr>
    </table>
  </div><!-- .articleFeed -->
</div>
<?php } ?> 
```

主要关注的领域是我在 foreach 运行后附加到表中的这个元素。我将使用此链接单击并通过 AJAX 加载更多文章（我`data-subcategoryId`在此处进行了硬编码）：

```
<td data-subcategoryId="1">
  <a class="loadMore" href="#">Load More</a>
</td> 
```

本质上当有人点击这个按钮时，它会进行AJAX调用和检索`&page=2`等等。

这是我的 JavaScript：

```
var page = 1;

$('.loadMore').click(function() {
  page++;
  var subcategoryId = $(this).parent().attr('data-subcategoryId');
  var url = 'http://www.domain.com/request.php?subcategoryId='+subcategoryId+'&page='+page;

  console.log(url);
}); 
```

我一直遇到的问题是，当我单击`.loadMore`链接时，它会增加`page`变量，但它会全局执行。如果我尝试移动`var page = 1;`click 函数内部，它只会增加一次到`2`.

一旦我得到了这个函数，我就可以将`url`变量传递给我的 AJAX 函数以获取新的内容。

我设置了一个 JSFiddle 以防万一，尽管它一直将 subcategoryId 显示为未定义：

[JSFiddle](http://jsfiddle.net/jd657/12/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:41:48.573

所以听起来每个元素都应该有自己的`page`变量。

一个简单的解决方案是使用`.each()`分配处理程序，并在回调中创建`page`变量。`each`

```
$('.loadMore').each(function() {

    var page = 1;

    $(this).click(function() {
      page++;
      var subcategoryId = $(this).parent().attr('data-subcategoryId');
      var url = 'http://www.domain.com/request.php?subcategoryId='+subcategoryId+'&page='+page;

      console.log(url);
    });

}); 
```

因为 JavaScript 函数是闭包，所以每个`.click`处理程序都是在其自己的新变量环境中创建的，并且每个处理程序将始终引用创建时范围内的变量。

这意味着每个处理程序都有自己的个人`page`变量来增加。

另一种解决方案是使用“事件数据”。您可以通过对象将数据与特定元素相关联`event`。

```
$('.loadMore').each(function() {
    $(this).bind("click", {page:1}, loadMoreHandler);
});

function loadMoreHandler(e) {
  e.data.page++;
  var subcategoryId = $(this).parent().attr('data-subcategoryId');
  var url = 'http://www.domain.com/request.php?subcategoryId='+subcategoryId+'&page='+e.data.page;

  console.log(url);
} 
```

由于不再使用闭包，为了函数对象的重用，我为处理程序使用了一个命名函数。如果对您不重要，您可以将其更改回匿名函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:39:02.707

将新数据添加到：

```
<td data-subcategoryId="1" data-page="1"> 
```

然后增加`page`并更新`data-page`：

```
$('.loadMore').click(function() {
  var page = $(this).parent().data('page');
  page++;
  $(this).parent().data('page',page);
  ... 
```

# vb.net - visual .net savefiledialog 对话框永远不会出现

> ID：12397066
> 
> 赞同：-1
> 
> 时间：2012-09-12T22:35:44.017
> 
> 标签：vb.net

我有一个问题，我花了很多时间寻找解决方案，但我没有很好的答案。问题是我正在尝试使用“savefiledialog”，当我在我的电脑的本地主机中运行它时，它运行良好，对话框出现没有任何问题，我可以保存文件，因为它应该可以工作...但是当我在iis服务器上发布它并尝试使用它时，它没有出现，我的意思是对话框保存文件没有出现，我放了一个Try Catch，但它没有给我发送任何错误留言，我不知道问题出在哪里，希望有人对正在发生的事情有所了解。在此先感谢，我的代码是：

Protected Sub Button1_Click(sender As Object, e As System.EventArgs) 处理 Button1.Click

```
 Dim _newThread As New Threading.Thread(AddressOf Descarga)
    _newThread.SetApartmentState(ApartmentState.STA)
    _newThread.Start("C:\Compras\Prueba.txt")

End Sub 
```

Private Sub Descarga(ByVal _ruta As Object)

```
 Dim Dialog As New System.Windows.Forms.SaveFileDialog

    Dialog.InitialDirectory = "C:\"
    Dialog.Title = "Save text Files"
    Dialog.CheckFileExists = True
    Dialog.CheckPathExists = True
    Dialog.DefaultExt = "txt"
    Dialog.Filter = "Text files (*.txt)|*.txt|All files (*.*)|*.*"
    Dialog.FilterIndex = 2
    Dialog.RestoreDirectory = True

    If Dialog.ShowDialog() = Windows.Forms.DialogResult.OK Then
        FileCopy(_ruta, Dialog.FileName)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:52:24.027

您正在使用 Windows 窗体 SaveFileDialog。当您执行 ShowDialog 时，它将在服务器上打开它，而不是在客户端浏览器中。

您需要将文件作为响应发送给客户端。

**编辑**
这样的事情应该提示客户端保存文件：

```
Dim FileName As String = "Prueba.txt"
Dim FilePath As String = "C:\Compras\"
Dim response As System.Web.HttpResponse = System.Web.HttpContext.Current.Response
response.ClearContent()
response.Clear()
response.ContentType = "text/plain"
response.AddHeader("Content-Disposition", "attachment; filename=" + FileName + ";")
response.TransmitFile(FilePath + FileName)
response.Flush()
response.End() 
```

# objective-c - 什么时候触发 NSFireDelayedPerform

> ID：12397068
> 
> 赞同：2
> 
> 时间：2012-09-12T22:36:11.563
> 
> 标签：objective-c, ios, cocoa

我试图弄清楚什么时候会`NSFireDelayedPerform`被触发以及这个的基本规则是什么。但我找不到任何提及此的文档或源代码。有人可以提供一点提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T09:27:01.770

我也遇到过这种情况，并且相信只要在指定延迟（低于 2 秒）后执行选择器时，就会调用它。

```
[foo performSelector:@selector(f1) withObject:nil afterDelay:2]; 
```

下面是主线程上的堆栈跟踪，其中应用程序在延迟 20.060 秒后被杀死。尽管指定了 2 秒延迟，但系统执行此选择器的时间要长得多（超过 10 秒）。这意味着系统使用 NSTimer 来处理带有*afterDelay*参数的*performSelector*调用。不幸的是，它似乎可能将调用放在主线程的事件队列上，然后等待指定的延迟（或更多）：

 *> 6 基础 0x35bfaa6a __NSFireDelayedPerform
> 
> 7 核心基础 0x3add45dc **CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION** + 12

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:21:48.337

我会从这里开始

[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)

没有提及，`NSFireDelayedPerform`但它在某种程度上是有道理的，因为这通常在`CFRunLoop`.

也许你也想看看这里：

[iOS runloop 机制有什么指南吗？](https://stackoverflow.com/questions/6216664/is-there-any-guide-for-ios-runloop-mechanism)

或者实际上更基本：

[http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/MainEventLoop.html](http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/MainEventLoop.html)*

# ruby-on-rails - Ruby/Rails：遍历文件夹并将元数据解析为种子数据库

> ID：12397070
> 
> 赞同：0
> 
> 时间：2012-09-12T22:36:27.167
> 
> 标签：ruby-on-rails, ruby, parsing, pdftk

我有一堆文档要在 Rails 应用程序中编制索引。我想使用各种 rake 任务来梳理目录层次结构以查找文件并从这些文件中捕获元数据以在 Rails 中建立索引。

我不确定如何在 Ruby 中执行此操作。我找到了一个名为[pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)的实用程序，它可以从 PDF 文件中提取元数据（我索引的大部分内容是 PDF），但我不确定如何捕获这些数据的各个部分？

例如，抓取 the`ModDate`或 each`BookmarkTitle`和`BookmarkPageNumber`below。

具体来说，我想遍历文件层次结构，`pdftk $filename dump_data`为找到的每个 .pdf 执行命令，然后将该输出的重要部分捕获到 rails 模型中。

pdftk 的输出：

```
$ pdftk BoringDocument883c2.pdf dump_data
InfoKey: Creator
InfoValue: Adobe Acrobat 9.3.4
InfoKey: Producer
InfoValue: Adobe Acrobat 9.34 Paper Capture Plug-in
InfoKey: ModDate
InfoValue: D:20110312194536-04'00'
InfoKey: CreationDate
InfoValue: D:20110214174733-05'00'
PdfID0: 2f28dcb8474c6849ae8628bc4157df43
PdfID1: 3e13c82c73a9f44bad90eeed137e7a1a
NumberOfPages: 126
BookmarkTitle: Alternative Maintenance Techniques&#13;
BookmarkLevel: 1
BookmarkPageNumber: 3
BookmarkTitle: CONTENTS&#13;
BookmarkLevel: 1
BookmarkPageNumber: 4
BookmarkTitle: EXHIBITS&#13;
BookmarkLevel: 1
BookmarkPageNumber: 6
BookmarkTitle: I - INTRODUCTION&#13;
BookmarkLevel: 1
BookmarkPageNumber: 8
BookmarkTitle: II - EXECUTIVE SUMMARY&#13;
BookmarkLevel: 1
BookmarkPageNumber: 13
BookmarkTitle: III - REMOTE DIAGNOSTICS - A STATUS REPORT&#13;
BookmarkLevel: 1
BookmarkPageNumber: 30
BookmarkTitle: IV - ALTERNATIVE TECHNIQUES&#13;
BookmarkLevel: 1
BookmarkPageNumber: 55
BookmarkTitle: V - COMPANYA - A SERVICE PHILOSOPHY&#13;
BookmarkLevel: 1
BookmarkPageNumber: 66
BookmarkTitle: VI - COMPANYB - REDUNDANT HARDWARE ARCHITECTURE&#13;
BookmarkLevel: 1
BookmarkPageNumber: 77
...shortened for brevity...
PageLabelNewIndex: 1
PageLabelStart: 1
PageLabelPrefix: F-E12_0001.jpg
PageLabelNumStyle: NoNumber
PageLabelNewIndex: 2
PageLabelStart: 1
PageLabelPrefix: F-E12_0002.jpg
PageLabelNumStyle: NoNumber
PageLabelNewIndex: 3
PageLabelStart: 1
PageLabelPrefix: F-E12_0003.jpg
PageLabelNumStyle: NoNumber
... 
```

编辑：我最近发现了[pdf-reader](https://github.com/yob/pdf-reader) gem，它看起来很有希望，并且可以避免在 shell 中以某种方式触发的需要`pdftk`？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:52:14.680

首先，我说我对Rake的了解不是很好，所以可能会有一些错误。让我知道是否有问题，我很乐意尝试解决问题。

为了解决这个问题，我将使用 2 个 rake 任务。其中一个 rake 任务将是递归目录遍历任务，另一个将是启动递归的任务。

```
desc "Populate the database with PDF metadata from the default PDF path"
task :populate_all_pdf_metadata do
  pdf_path = "/path/to/pdfs"

  Rake::Task[:populate_pdf_metadata].invoke(pdf_path)
end

desc "Recursively traverse a path looking for PDF metadata"
task :populate_pdf_metadata, :pdf_path do |t, args|
  excluded_dir_names = [".", ".."] # Do not look in dirs with these names.

  pdf_path = args[:pdf_path]

  Dir.entries(pdf_path).each do |file|
    if Dir.directory?(file) && !excluded_dir_names.include?(file)
      Rake::Task[:populate_pdf_metadata].invoke(pdf_path + "/" + file)
    elsif File.extname(file) == ".pdf"
      reader = PDF::Reader.new(file)

      # Populate the database here
    end
  end
end 
```

我相信上面的代码与您想要做的类似。为了访问数据库，您需要将`:environment`依赖项添加到您的任务中。您可以在 Google 上搜索如何从 rake 任务中访问 ActiveRecord 模型。我希望这有帮助。

# c++ - c++ floats 和 valgrind 奇怪的行为

> ID：12397072
> 
> 赞同：3
> 
> 时间：2012-09-12T22:36:51.643
> 
> 标签：c++, floating-point, segmentation-fault, valgrind, stringstream

我有 valgrind 3.6.0，我到处搜索，一无所获。

问题是，当我在使用 valgrind 时尝试访问浮点数时，会出现段错误，但是当我按原样运行程序时，没有 valgrind，一切都按预期进行。

这是一段代码：

```
class MyClass {
    public:
    void end() {
        float f;
        f = 1.23;
        std::stringstream ss;
        ss << f;
        std::cout << ss.str();
    }
};

extern "C" void clean_exit_on_sig(int sig) {
    //Code logging the error
    mc->end();
    exit(1);
}

MyClass *mc;
int main(int argc, char *argv[]) {
    signal(SIGINT , clean_exit_on_sig);
    signal(SIGABRT , clean_exit_on_sig);
    signal(SIGILL , clean_exit_on_sig);
    signal(SIGFPE , clean_exit_on_sig);
    signal(SIGSEGV, clean_exit_on_sig);
    signal(SIGTERM , clean_exit_on_sig);
    mc = new MyClass();
    while(true) {
        // Main program loop
    }
} 
```

当我按 Control+C 时，程序正确捕获信号并且一切正常，但是当我使用 valgrind 运行程序时，当尝试执行此命令时`ss << f; // (Inside MyClass)`会抛出段错误：-/

我也试过这个：

```
std::string stm = boost::lexical_cast<std::string>(f); 
```

但是当 boost 也访问浮点数时，我继续收到一个段错误信号。

这是当我通过 boost 获得段错误时的回溯：

```
./a.out(_Z17clean_exit_on_sigi+0x1c)[0x420e72]
/lib64/libc.so.6(+0x32920)[0x593a920]
/usr/lib64/libstdc++.so.6(+0x7eb29)[0x51e6b29]
/usr/lib64/libstdc++.so.6(_ZNKSt7num_putIcSt19ostreambuf_iteratorIcSt11char_traitsIcEEE15_M_insert_floatIdEES3_S3_RSt8ios_baseccT_+0xd3)[0x51e8f43]
/usr/lib64/libstdc++.so.6(_ZNKSt7num_putIcSt19ostreambuf_iteratorIcSt11char_traitsIcEEE6do_putES3_RSt8ios_basecd+0x19)[0x51e9269]
/usr/lib64/libstdc++.so.6(_ZNSo9_M_insertIdEERSoT_+0x9f)[0x51fc87f]
./a.out(_ZN5boost6detail26lexical_stream_limited_srcIcSt15basic_streambufIcSt11char_traitsIcEES4_E9lcast_putIfEEbRKT_+0x8f)[0x42c251]
./a.out(_ZN5boost6detail26lexical_stream_limited_srcIcSt15basic_streambufIcSt11char_traitsIcEES4_ElsEf+0x24)[0x42a150]
./a.out(_ZN5boost6detail12lexical_castISsfLb0EcEET_NS_11call_traitsIT0_E10param_typeEPT2_m+0x75)[0x428349]
./a.out(_ZN5boost12lexical_castISsfEET_RKT0_+0x3c)[0x426fbb]
./a.out(This line of code corresponds to the line where boost tries to do the conversion) 
```

这是默认的字符串流转换：

```
./a.out(_Z17clean_exit_on_sigi+0x1c)[0x41deaa]
/lib64/libc.so.6(+0x32920)[0x593a920]
/usr/lib64/libstdc++.so.6(+0x7eb29)[0x51e6b29]
/usr/lib64/libstdc++.so.6(_ZNKSt7num_putIcSt19ostreambuf_iteratorIcSt11char_traitsIcEEE15_M_insert_floatIdEES3_S3_RSt8ios_baseccT_+0xd3)[0x51e8f43]
/usr/lib64/libstdc++.so.6(_ZNKSt7num_putIcSt19ostreambuf_iteratorIcSt11char_traitsIcEEE6do_putES3_RSt8ios_basecd+0x19)[0x51e9269]
/usr/lib64/libstdc++.so.6(_ZNSo9_M_insertIdEERSoT_+0x9f)[0x51fc87f]
./a.out(This line of code corresponds to the line where I try to do the conversion) 
```

`a.out`是我的程序，我以这种方式运行 valgrind：`valgrind --tool=memcheck ./a.out`

另一个奇怪的事情是，当我`mc->end();`在程序运行良好时调用（收到任何信号，Object 刚刚完成他的工作），我不会以任何方式出现段错误（就像 valgrind 一样）。

请不要告诉我“不要用 Control+C 等等来关闭你的程序……”这段代码用于记录程序可能出现的任何错误，而不会在发生段错误的情况下丢失数据，因为死锁而杀死它或者是其他东西。

**编辑：**也许是一个 valgrind 错误（我不知道，在谷歌上搜索但什么也没找到，不要杀我），任何解决方法也将被接受。

**EDIT2：**刚刚意识到boost也调用了ostream（这里比使用vim更清楚：-/），将尝试sprintf float转换。

**EDIT3：**试过这个`sprintf(fl, "%.1g", f);`但仍然崩溃，回溯：

```
./a.out(_Z17clean_exit_on_sigi+0x40)[0x41df24]
/lib64/libc.so.6(+0x32920)[0x593a920]
/lib64/libc.so.6(sprintf+0x56)[0x5956be6]
./a.out(Line where sprintf is) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:43:38.290

好的，经过几个小时的阅读和研究，我发现了问题，我将回答我自己的问题，因为没有人这样做，只有@Kerrek SB 的评论 [ [https://stackoverflow.com/users/596781/kerrek- sb](https://stackoverflow.com/users/596781/kerrek-sb) ] 但我不能接受评论。（谢谢）

它就像在信号处理程序中一样简单，您只能安全地调用一堆函数：http: [//pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)

如果您调用一些非异步安全的函数，它们可以工作，但并非总是如此。

如果要在信号处理程序中调用非异步安全函数，可以这样做：

*   创建 2 个管道。`int pip1[2]; int pip2[2]; pipe(pip1); pipe(pip2);`
*   创建一个新线程并让线程等待从第一个管道接收一些数据`read(pip1[0], msg, 1);`
*   调用信号处理程序时，使用`write`异步安全函数写入第一个管道`write(pip1[1], "0", 1);`
*   然后让信号等待第二个管道`read(pip2[0], msg, 1);`
*   线程将唤醒并完成他必须做的所有工作（在这种情况下将数据保存到数据库），然后让线程将数据写入第二个管道`write(pip2[1], "0", 1);`
*   现在主线程将唤醒并以`_Exit(1)`其他方式结束。

信息：

我正在使用 2 个管道，因为如果我写入一个管道，然后我读取它，第二个线程可能永远不会唤醒，因为主线程已经读取了刚刚写入的数据。而且我正在使用辅助管道来阻止主线程，因为我不希望它在第二个线程正在保存数据时退出。

请记住，在修改共享资源时可能已调用信号处理程序，如果您的第二个线程访问该资源可能会遇到第二个段错误，因此在使用第二个线程访问共享资源时要小心（全局变量或其他） .

如果您正在使用 valgrind 进行测试，并且不想在接收信号时收到“错误”内存泄漏，您可以在退出之前执行此操作，`pthread_join(2ndthread, NULL)`而`exit(1)`不是`_Exit(1)`. 这些是非异步安全功能，但至少您可以测试内存泄漏并使用信号关闭应用程序而不会收到“错误”内存泄漏。

希望这可以帮助某人。再次感谢@Kerrek SB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:25:48.347

调试器和其他东西有时会向您通常不会得到的进程发送信号。例如，我不得不改变一个使用 recv 的函数在 gdb 下工作。检查您的信号是什么，并在尝试使用它之前验证 mc 不为空。看看这是否开始让你更接近答案。

我在想也许你使用 new （或其他东西）可能会导致 valgrind 在初始化 mc 之前发送一个被你的处理程序捕获的信号。

很明显，您没有粘贴实际代码，因为您使用“类”而不公开 end() 函数意味着这不应该编译。

# javascript - 显示隐藏的 div 时 nicescroll 不滚动

> ID：12397075
> 
> 赞同：1
> 
> 时间：2012-09-12T22:37:04.887
> 
> 标签：javascript, jquery, html, scrollbar, hide

我正在尝试在我的网站上使用 nicescroll，它在任何地方都可以使用，除了在我有隐藏 div 的一个页面上。基本上，我有一个链接，单击该链接会显示之前隐藏在页面上的一些内容。问题 - 单击链接并显示内容后它溢出并且不可见且不可滚动。Nicescroll 由于某种原因无法正常工作。

两者都在页面上独立工作 - 意思是 - 如果我取出 nicescroll 代码并保留显示/隐藏 div 代码，那么我可以单击链接，页面会变得更长，并且会出现一个常规滚动条，我可以滚动一直到内容的底部。相反，如果我取出显示/隐藏代码（只是在页面加载时显示内容）并保留 nicescroll 代码，则页面将加载为长页面，并且 nicescroll 栏将显示并正常工作.

我就是不能让他们一起工作。我认为它与第一次加载时不需要滚动的页面以及最初调用 nicescroll 时的页面有关，所以它只是说“我不需要为这个页面工作”然后放弃。因此，我尝试复制在我看来类似于“nicescroll 启动代码”的内容

```
<script>
  $(document).ready(function() {    
    $("#right").niceScroll();
  });
</script> 
```

进入单击显示/隐藏链接时调用的函数，希望这会“重新启动”它，但这也不起作用。

显示/隐藏函数如下所示：

```
function showHide(shID) {
    if (document.getElementById(shID)) {
        if (document.getElementById(shID+'-show').style.display != 'none') {
            document.getElementById(shID+'-show').style.display = 'none';
            document.getElementById(shID).style.display = 'block';
        }
        else {
            document.getElementById(shID+'-show').style.display = 'inline';
            document.getElementById(shID).style.display = 'none';
        }
    }
} 
```

页面的实际 div 部分如下所示：

```
 <a href="#" id="example-show" class="showLink" onclick="showHide('example');return false;">-Show Stuff</a>
                <div id="example" class="more">
                    <p>
                    "Stuff here"
                    </p>
                    <p><a href="#" id="example-hide" class="hideLink" 
                    onclick="showHide('example');return false;">-Hide Stuff-</a></p>
                </div> 
```

一切都包含在 id="right" 的 div 中，这就是 nicescroll 脚本将其应用于 #right 的原因（同样，当我没有显示/隐藏功能时，它也可以正常工作。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-08T19:38:51.477

我不知道它是什么正确的解决方案，但在我的 div 出现并调用方法后工作正常：

```
$("#myHiddenDiv").getNiceScroll().onResize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T08:26:21.770

首先，将内联 onclick 移动到 docready。如果 nicescroll 附加到 #right 容器，您可以尝试以下操作：

```
// cache container:
var $right = $('#right');

// use .on() jquery on container:
$right.on('click', '.showLink', function(e){
e.preventDefault()
$right.find('#example').show();

// resize nicescroll
$right.getNiceScroll().show().resize();

}).on('click', '.hideLink',function(e){
e.preventDefault();
$right.find('#example').hide();

// also hide nicescroll:
$right.getNiceScroll.hide();

}); 
```

# internet-explorer-8 - Simplemodal 在 ie8 中无法正常工作

> ID：12397077
> 
> 赞同：1
> 
> 时间：2012-09-12T22:37:17.320
> 
> 标签：internet-explorer-8, simplemodal

我已经直接从 simplemodal 站点获取了 simplemodal 的示例代码。虽然该网站上的示例在该网站上的 ie8 上运行良好，但在我将所有内容复制并粘贴到我自己的页面中（并复制到相关的 js 文件中）后，模式窗口会在 html 页面的底部打开，而不是在顶部居中其中。这只发生在 ie8 中——它在 iOS6 和 OSX 的 Safari 上都能正常工作。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:03:22.853

在您的情况下，很可能 IE8 是在怪癖/兼容模式下打开的。使用[IE Developer Tools](http://msdn.microsoft.com/en-us/library/dd565630%28v=vs.85%29.aspx)手动控制渲染模式。也可以[强制 IE 以标准模式呈现](https://stackoverflow.com/questions/5374099/how-do-i-force-internet-explorer-to-render-in-standards-mode-and-not-in-quirks)。

# c# - 如何将元素绑定到选定的菜单项 wpf

> ID：12397079
> 
> 赞同：1
> 
> 时间：2012-09-12T22:37:32.597
> 
> 标签：c#, wpf, xaml, binding, menuitem

我通过 itemsSource 属性将项目添加到菜单项。（元素名称是 videoCapDevices）

```
ItemsSource="{Binding Source={x:Static Devices}}" 
```

现在我想响应选定的菜单项，可能是用选定的相机设备显示视频流

```
VideoCaptureDevice="{Binding Path=SelectedItem, ElementName=videoCapDevices}" 
```

但这仅适用于组合框或列表框。

如何更改“路径选择器”以到达选定的菜单项。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:11:41.297

尝试使用**转换器进行投射**

```
public class DeviceConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
       if(value==null)
          return null;

        return ((Device)value).CaptureDeviceName;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    }
} 
```

和

```
 VideoCaptureDevice="{Binding Converter=DeviceConverter ,Path=SelectedItem, ElementName=videoCapDevices}" 
```

# html - 将 div 修复到窗口顶部，同时允许水平滚动以在窗口调整大小时溢出

> ID：12397080
> 
> 赞同：0
> 
> 时间：2012-09-12T22:37:39.743
> 
> 标签：html, css

我想将我的导航栏固定在浏览器窗口的顶部，但允许水平滚动导航项目，以便在浏览器宽度减小时可能溢出的导航项目。一个例子是 gmail 导航栏被固定到顶部，但当窗口宽度减小时仍然可以水平滚动。

目前我为 div 使用以下 css 将 div 固定到顶部但不允许水平滚动，因为它是固定的（尝试溢出：滚动但不做任何事情）：

```
position: fixed;
top:0
overflow:scroll;//does nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:57:02.970

如果`overflow:auto;`不起作用，则可能是缺少文档类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:44:17.483

如果你给它一个`right`和`left`值，它应该滚动：http: [//jsbin.com/edopor/4/edit](http://jsbin.com/edopor/4/edit)

# python - 如何从字典中创建给定大小的列表列表？

> ID：12397084
> 
> 赞同：2
> 
> 时间：2012-09-12T22:38:08.600
> 
> 标签：python, list, dictionary

假设我有一本`a`字典

```
a = {'a':1,'b':2,'c':3,'d':4,'e':5} 
```

现在如果我给出`size=2`的输出应该是一个列表列表，其中每个列表大小应该等于 2 ，最后一个列表大小无关紧要，就像在这种情况下它应该是这样的

```
[[('a', 1), ('c', 3)], [('b', 2), ('e', 5)], [('d', 4)]] 
```

或者如果`size = 3`它应该是这样的`[[('a', 1), ('c', 3), ('b', 2)], [('e', 5), ('d', 4)]]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:39:20.657

首先将您的字典转换为列表，您可以像这样轻松完成

```
In [1]: a = {'a':1,'b':2,'c':3,'d':4,'e':5}

In [2]: b = a.items()

In [3]: b
Out[3]: [('a', 1), ('c', 3), ('b', 2), ('e', 5), ('d', 4)] 
```

而不是使用这种方法来制作给定大小的列表块

```
In [4]: def chunks(c, n):
   ...:     return [c[i:i+n] for i in range(0, len(c), n)]
   ...: 

In [5]: list(chunks(b,2))
Out[5]: [[('a', 1), ('c', 3)], [('b', 2), ('e', 5)], [('d', 4)]]

In [6]: list(chunks(b,3))
Out[6]: [[('a', 1), ('c', 3), ('b', 2)], [('e', 5), ('d', 4)]] 
```

# magento - 添加自定义 Magento 菜单

> ID：12397086
> 
> 赞同：1
> 
> 时间：2012-09-12T22:38:15.340
> 
> 标签：magento, content-management-system

我已经寻找了一个多小时，但找不到看似简单任务的答案。我想添加指向自定义菜单的链接，该菜单链接到 Magento 中的页面，而不是类别页面。

有人有答案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:25:44.023

你想让它自动生成页面链接吗？

如果不是，您可以只使用静态块来创建菜单，然后将该块添加到您的布局中。

1) 创建一个名为**left_menu**的新静态块并将 HTML 添加到静态块。

2）添加此布局更新以在左列中显示块：

```
<reference name="left">
    <block type="cms/block" name="left_menu_block" before="-">
        <action method="setBlockId"><block_id>left_menu</block_id></action>
    </block>    
</reference> 
```

# wpf - 如何将表格保存在 FlowDocument 中？

> ID：12397089
> 
> 赞同：3
> 
> 时间：2012-09-12T22:38:40.170
> 
> 标签：wpf, xaml, flowdocument

我想如果我将表格放在段落中，我可以使用 KeepTogether 属性将表格保持在一起。该表用于报告的总计，客户不希望它们超过两页。设想！表中有 5 行，我快疯了，不知道接下来要尝试什么。

最后一行代码：

```
myFlowDocument.Blocks.Add(footerParagraph); 
```

footerParagraph 的输出开始于：

```
<Paragraph KeepTogether="True">
    <Floater HorizontalAlignment="Center">
        <Table CellSpacing="0" FontFamily="Arial" FontSize="14" Foreground="#FF000000"> 
```

KeepTogether 通常可以工作，但是当它包含 Floater 和 Table 时为什么不能呢？有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:43:23.543

我遇到了类似的问题，您是否尝试过使用 Figure 而不是 Floater。对于我来说，我需要将 Figure 的 CanDelayPlacement 设置为 false。

# knockout.js - 如何使用 ko.mapping 插件刷新我的视图模型的一部分？

> ID：12397095
> 
> 赞同：1
> 
> 时间：2012-09-12T22:39:32.457
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个像这样的复杂视图模型：

```
 function DiaryBundleViewModel() {
        var self = this;

        self.existingJobSearchViewModel = new ExistingJobSearchViewModel(self);

        self.DiaryBundle = ko.observable();
        self.Appointment = ko.observable();
... 
```

我已将我的视图模型绑定到我的 UI，如下所示：

```
var vm = new DiaryBundleViewModel();
ko.applyBindings(vm); 
```

在我的视图模型中，我有一个从服务器获取约会的功能。

当我从服务器取回我的结果时，我这样做：

```
self.Appointment(result); 
```

并且 UI 会更新显示约会的字段。

但是，只有 Appointment 本身是 ko.observable。我的 Appointment 对象上有一些相互关联的属性，我想在 UI 中触发更改。所以，我需要 ko.mapping 插件。

但是，我在纠结如何在这种情况下使用它。

如果我这样做：

```
self.Appointment = ko.mapping.fromJS(result); 
```

它不起作用，因为 UI 已经绑定到 self.Appointment 并且我刚刚覆盖了它，所以它不会看到变化。

所以，我尝试了：

```
ko.mapping.fromJS(result, self.Appointment); 
```

但这也不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:48:04.303

首先，您需要创建一个 AppointmentVm 并使用 Mapping 插件。

预约：

```
 var AppointmentVm= function(data) {
    ko.mapping.fromJS(data, { }, this);
}; 
```

在您使用的主视图模型中：

```
ko.mapping.fromJS(data, {
        'Appointments': {
            create: function(options) {
                return new AppointmentVm(options.data);
            }
        }
    },this); 
```

这映射了子对象。

# java - 在java中组合/比较颜色

> ID：12397096
> 
> 赞同：1
> 
> 时间：2012-09-12T22:39:50.237
> 
> 标签：java

我想做两件事：

1.  比较两种颜色（RGB），如果颜色相同，比较器给我说 1，如果比较的颜色在 RGB 的相反两侧，如黑色和白色，则给我说 0，如果它们以某种方式相等，则为从 0 到 1 的某个数字（就像两者都是带红色的）
2.  将两种或多种颜色混合在一起产生一种新的颜色：混合蓝色和黄色应该得到绿色，混合红色和绿色应该得到黑色等。

**问题：** java API 的任何部分可以为我做这样的事情吗？如果没有，是否有任何第三部分开源 java 库可以促进这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:36:05.723

1.

比较颜色有很多不同的方法。如果您想要感知差异，请查看其他用户的评论。如果您只想要一些简单的指示：使用以下代码：

> ```
> int rgb1 = ...
> int rgb2 = ...
> int r, g, b;
> 
> r = (rgb1 >> 16) & 0x000000ff;
> g = (rgb1 >> 8) & 0x000000ff;
> b = rgb1 & 0x000000ff;
> 
> r -= (rgb2 >> 16) & 0x000000ff;
> g -= (rgb2 >> 8) & 0x000000ff;
> b -= rgb2 & 0x000000ff;
> 
> double answer = (r*r+g*g+b*b)/(255*255*3.0); 
> ```

它计算欧几里得距离并将其缩放到从 0 到 1 的范围。

2.

正如有许多不同的方法来比较颜色一样，也有许多方法可以组合颜色。这取决于你想要什么。你可以取平均值，但这不是你想要的。因为它会使生成的颜色变暗。

编辑：这是取平均值的代码：

> ```
> r = (rgb1 >> 16) & 0x000000ff;
> g = (rgb1 >> 8) & 0x000000ff;
> b = rgb1 & 0x000000ff;
> 
> r += (rgb2 >> 16) & 0x000000ff;
> g += (rgb2 >> 8) & 0x000000ff;
> b += rgb2 & 0x000000ff;
> 
> int average = ((r/2)<<16)+((g/2)<<8)+(b/2); 
> ```

如果您有点数学倾向，请考虑一下您实际寻找的行为，并尝试将其放入一个公式（或者更确切地说是 3 个公式，一个用于红色，一个用于绿色，一个用于蓝色）它应该不难转换java代码的公式。

您可以使用将单个 r、g 和 b 值放回单个 rgb 值

> 整数 RGB = (r<<16) | (g<<8) | b

编辑：请注意计算机使用“red GREEN blue”，其中黄色是绿色和蓝色的组合，而不是相反。可以转换，但是我还没做。也许[rgb 和 ryb 颜色空间之间的转换](https://stackoverflow.com/questions/4945457/conversion-between-rgb-and-ryb-color-spaces)可能会有所帮助。

# vim - vim 中的隐藏功能仍然让我移动所有字符

> ID：12397103
> 
> 赞同：3
> 
> 时间：2012-09-12T22:40:25.143
> 
> 标签：vim

这就是我所做的
`:syntax match conceal Test +[A-Z0-9]\{6}+`
`:set conceallevel=2`
`:set concealcursor=nvi`
所以当我用`123456`vim 编写时，我希望它在那里什么都没有。但是，当我移过该区域时，实际发生的情况是，我必须向要移动的方向移动 6 次，光标才能通过该区域。

有没有办法解决这个问题？我希望 vim 看到它，好像那里什么都没有，当我移过那个区域时，就好像那里什么都没有。但我仍然希望能够搜索并删除它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T04:43:12.457

目前没有内置的方法可以做到这一点。您可以使用`synconcealed()`来确定光标下是否有隐藏字符以及隐藏字符并重新映射所有移动键以尊重它：像这样：

```
function! ForwardSkipConceal(count)
    let cnt=a:count
    let mvcnt=0
    let c=col('.')
    let l=line('.')
    let lc=col('$')
    let line=getline('.')
    while cnt
        if c>=lc
            let mvcnt+=cnt
            break
        endif
        if stridx(&concealcursor, 'n')==-1
            let isconcealed=0
        else
            let [isconcealed, cchar, group]=synconcealed(l, c)
        endif
        if isconcealed
            let cnt-=strchars(cchar)
            let oldc=c
            let c+=1
            while c<lc && synconcealed(l, c)[2]==group | let c+=1 | endwhile
            let mvcnt+=strchars(line[oldc-1:c-2])
        else
            let cnt-=1
            let mvcnt+=1
            let c+=len(matchstr(line[c-1:], '.'))
        endif
    endwhile
    return ":\<C-u>\e".mvcnt.'l'
endfunction
nnoremap <expr> l ForwardSkipConceal(v:count1) 
```

. 注意：这对单个动作 ( `l`) 和在正常模式下执行此操作，只是为了显示它可能完成的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-14T21:43:36.830

ZyX 从上面的解决方案对我不起作用：显然隐藏文本区域的 ID 在遍历它时会发生变化，导致运动过早停止。

我一直在使用下面粘贴的替代版本（也缺少`BackwardSkipConceal`功能）。它不是很漂亮，但在替换 LaTeX 文档或 C++ 代码中的数学字符时效果很好。

```
function! ForwardSkipConceal(count)
    let cnt=a:count
    let mvcnt=0
    let c=col('.')
    let l=line('.')
    let lc=col('$')
    let line=getline('.')
    while cnt
        if c>=lc
            let mvcnt+=cnt
            break
        endif
        if stridx(&concealcursor, 'n')==-1
            let isconcealed=0
        else
            let [isconcealed, cchar, group] = synconcealed(l, c)
        endif
        if isconcealed
            let cnt-=strchars(cchar)
            let oldc=c
            let c+=1
            while c < lc
              let [isconcealed2, cchar2, group2] = synconcealed(l, c)
              if !isconcealed2 || cchar2 != cchar
                  break
              endif
              let c+= 1
            endwhile
            let mvcnt+=strchars(line[oldc-1:c-2])
        else
            let cnt-=1
            let mvcnt+=1
            let c+=len(matchstr(line[c-1:], '.'))
        endif
    endwhile
    return ":\<C-u>\e".mvcnt.'l'
endfunction

function! BackwardSkipConceal(count)
    let cnt=a:count
    let mvcnt=0
    let c=col('.')
    let l=line('.')
    let lc=0
    let line=getline('.')
    while cnt
        if c<=1
            let mvcnt+=cnt
            break
        endif
        if stridx(&concealcursor, 'n')==-1 || c == 0
            let isconcealed=0
        else
            let [isconcealed, cchar, group]=synconcealed(l, c-1)
        endif
        if isconcealed
            let cnt-=strchars(cchar)
            let oldc=c
            let c-=1
            while c>1
              let [isconcealed2, cchar2, group2] = synconcealed(l, c-1)
              if !isconcealed2 || cchar2 != cchar
                  break
              endif
              let c-=1
            endwhile
            let c = max([c, 1])
            let mvcnt+=strchars(line[c-1:oldc-2])
        else
            let cnt-=1
            let mvcnt+=1
            let c-=len(matchstr(line[:c-2], '.$'))
        endif
    endwhile
    return ":\<C-u>\e".mvcnt.'h'
endfunction

nnoremap <expr> l ForwardSkipConceal(v:count1)
nnoremap <expr> h BackwardSkipConceal(v:count1) 
```

# c# - C# 64 位 Release 代码的反汇编视图比 32 位 Debug 代码长 75%？

> ID：12397108
> 
> 赞同：5
> 
> 时间：2012-09-12T22:41:15.053
> 
> 标签：c#, assembly, compiler-construction, visual-studio-2012, disassembly

**编辑**

我测试了 32 位版本，代码很紧凑。因此，以下是 64 位问题。

* * *

我正在使用 VS 2012 RC。Debug 是 32 位的，Release 是 64 位的。下面是调试然后发布反汇编的一行代码：

```
 crc = (crc >> 8) ^ crcTable[((val & 0x0000ff00) >> 8) ^ crc & 0xff];
0000006f  mov         eax,dword ptr [ebp-40h] 
00000072  shr         eax,8 
00000075  mov         edx,dword ptr [ebp-3Ch] 
00000078  mov         ecx,0FF00h 
0000007d  and         edx,ecx 
0000007f  shr         edx,8 
00000082  mov         ecx,dword ptr [ebp-40h] 
00000085  mov         ebx,0FFh 
0000008a  and         ecx,ebx 
0000008c  xor         edx,ecx 
0000008e  mov         ecx,dword ptr ds:[03387F38h] 
00000094  cmp         edx,dword ptr [ecx+4] 
00000097  jb          0000009E 
00000099  call        6F54F5EC 
0000009e  xor         eax,dword ptr [ecx+edx*4+8] 
000000a2  mov         dword ptr [ebp-40h],eax
-----------------------------------------------------------------------------
         crc = (crc >> 8) ^ crcTable[((val & 0x0000ff00) >> 8) ^ crc & 0xff];
000000a5  mov         eax,dword ptr [rsp+20h] 
000000a9  shr         eax,8 
000000ac  mov         dword ptr [rsp+38h],eax 
000000b0  mov         rdx,124DEE68h 
000000ba  mov         rdx,qword ptr [rdx] 
000000bd  mov         eax,dword ptr [rsp+00000090h] 
000000c4  and         eax,0FF00h 
000000c9  shr         eax,8 
000000cc  mov         ecx,dword ptr [rsp+20h] 
000000d0  and         ecx,0FFh 
000000d6  xor         eax,ecx 
000000d8  mov         ecx,eax 
000000da  mov         qword ptr [rsp+40h],rdx 
000000df  mov         rax,qword ptr [rsp+40h] 
000000e4  mov         rax,qword ptr [rax+8] 
000000e8  mov         qword ptr [rsp+48h],rcx 
000000ed  cmp         qword ptr [rsp+48h],rax 
000000f2  jae         0000000000000100 
000000f4  mov         rax,qword ptr [rsp+48h] 
000000f9  mov         qword ptr [rsp+48h],rax 
000000fe  jmp         0000000000000105 
00000100  call        000000005FA5D364 
00000105  mov         rax,qword ptr [rsp+40h] 
0000010a  mov         rcx,qword ptr [rsp+48h] 
0000010f  mov         ecx,dword ptr [rax+rcx*4+10h] 
00000113  mov         eax,dword ptr [rsp+38h] 
00000117  xor         eax,ecx 
00000119  mov         dword ptr [rsp+20h],eax 
```

64 位版本中的所有额外代码在做什么？它在测试什么？我没有对此进行基准测试，但 32 位代码应该执行得更快。

**编辑**

整体功能：

```
public static uint CRC32(uint val)
{
    uint crc = 0xffffffff;

    crc = (crc >> 8) ^ crcTable[(val & 0x000000ff) ^ crc & 0xff];
    crc = (crc >> 8) ^ crcTable[((val & 0x0000ff00) >> 8) ^ crc & 0xff];
    crc = (crc >> 8) ^ crcTable[((val & 0x00ff0000) >> 16) ^ crc & 0xff];
    crc = (crc >> 8) ^ crcTable[(val >> 24) ^ crc & 0xff];

    // flip bits
    return (crc ^ 0xffffffff);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T23:22:19.977

我怀疑您在调试发布版本以获取汇编代码时正在使用“转到反汇编”。

转到工具-> 选项、调试、常规并禁用“在模块加载时抑制 JIT 优化”后，我得到了一个没有错误检查的 x64 程序集列表。

默认情况下，即使在发布模式下，如果附加了调试器，代码也不会优化。在尝试对代码进行基准测试时请记住这一点。

PS：基准测试显示 x64 比 x86 稍快，10 亿次函数调用分别为 4.3 秒和 4.8 秒。

编辑：断点仍然对我有用，否则取消选中后我将无法看到反汇编。上面的示例行如下所示（VS 2012 RC）：

```
crc = (crc >> 8) ^ crcTable[((val & 0x0000ff00) >> 8) ^ crc & 0xff];
00000030  mov         r11d,eax 
00000033  shr         r11d,8 
00000037  mov         ecx,edx 
00000039  and         ecx,0FF00h 
0000003f  shr         ecx,8 
00000042  movzx       eax,al 
00000045  xor         ecx,eax 
00000047  mov         eax,ecx 
00000049  cmp         rax,r9 
0000004c  jae         00000000000000A4 
0000004e  mov         eax,dword ptr [r8+rax*4+10h] 
00000053  xor         r11d,eax 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:09:56.233

查看代码，这与访问 crcTable 的错误检查有关。在开始挖掘数组之前，它已经完成了你的界限。

在 32 位代码中，您会看到这个

```
0000008e  mov         ecx,dword ptr ds:[03387F38h] 
....
0000009e  xor         eax,dword ptr [ecx+edx*4+8] 
```

在这种情况下，它从 03387F38h 加载数组的基地址，然后使用标准指针算法访问正确的条目。

在 64 位代码中，这似乎更复杂。

```
000000b0  mov         rdx,124DEE68h 
000000ba  mov         rdx,qword ptr [rdx] 
```

这会将地址加载到 rdx 寄存器中

```
000000da  mov         qword ptr [rsp+40h],rdx 
...
00000105  mov         rax,qword ptr [rsp+40h] 
0000010a  mov         rcx,qword ptr [rsp+48h] 
0000010f  mov         ecx,dword ptr [rax+rcx*4+10h] 
```

这会将地址移动到堆栈上，然后将其移动到 rax 寄存器并执行相同的指针工作以访问数组。

000000da 和 00000100/00000105 之间的几乎所有内容似乎都是验证码。其余代码在 64 位和 32 位代码之间映射得非常好，在 64 位代码中寄存器使用率较低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T23:48:25.593

exp ^ crc & 0xff 编译为 exp ^ (cr & 0xff)：

```
00000082  mov         ecx,dword ptr [ebp-40h]  
00000085  mov         ebx,0FFh  
0000008a  and         ecx,ebx  
0000008c  xor         edx,ecx 
```

你应该把表达式写成 ?

```
(exp ^ crc) & 0xff 
```

64 位版本的优化肯定不如 32 位版本。CLR 有两个单独的 JIT 编译器实现。

此外，如果性能很关键，请使用不安全代码来删除边界检查。

# php - jquery 将表单发布到另一个 php 文件

> ID：12397111
> 
> 赞同：0
> 
> 时间：2012-09-12T22:41:47.150
> 
> 标签：php, jquery, ajax, forms, post

我已经使用 jquery 牛奶进行验证，但不知何故我无法将表单传递给我的其他文件 registerUser_process.php。我想我应该在 javascript 中传递它，但我需要了解如何将表单发布到 javascript 中的另一个 php 文件。谁能帮我？

```
 The form:

<form id="signupform" autocomplete="off" method="get" action="registerUser_process.php">
          <table id="table-3">
          <tr>
            <td class="label"><label id="lfirstname" for="firstname">First Name</label></td>
            <td class="field"><input id="firstname" name="firstname" type="text" value="" maxlength="100" /></td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="label"><label id="llastname" for="lastname">Last Name</label></td>
            <td class="field"><input id="lastname" name="lastname" type="text" value="" maxlength="100" /></td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="label"><label id="lusername" for="username">Username</label></td>
            <td class="field"><input id="username" name="username" type="text" value="" maxlength="50" /></td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="label"><label id="lpassword" for="password">Password</label></td>
            <td class="field"><input id="password" name="password" type="password" maxlength="50" value="" /></td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="label"><label id="lpassword_confirm" for="password_confirm">Confirm Password</label></td>
            <td class="field"><input id="password_confirm" name="password_confirm" type="password" maxlength="50" value="" /></td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="label"><label id="lemail" for="email">Email Address</label></td>
            <td class="field"><input id="email" name="email" type="text" value="" maxlength="100" /></td>
            <td class="status"></td>
          </tr>

          <tr>
            <td class="label">&nbsp;</td>
            <td class="field" colspan="2">
                    <input id="terms" type="checkbox" name="terms" />
                    <label id="lterms" for="terms">I have read and accept the Terms of Use.</label>
            </td>
          </tr>
          <tr>
            <td class="label"><label id="lsignupsubmit" for="signupsubmit">Signup</label></td>
            <td class="field" colspan="2">
            <input id="signupsubmit" name="signup" type="submit" value="Signup" />
            </td>
          </tr>

          </table>
      </form>

 //Javascript

<script type="text/javascript">
$(document).ready(function() {
// validate signup form on keyup and submit
var validator = $("#signupform").validate({
    rules: {
        firstname: "required",
        lastname: "required",
        username: {
            required: true,
            minlength: 2,
            remote: "checkUserAvailability.php"
        },
        password: {
            required: true,
            minlength: 5
        },
        password_confirm: {
            required: true,
            minlength: 5,
            equalTo: "#password"
        },
        email: {
            required: true,
            email: true,
            remote: "checkEmailAvailability.php"
        },
        dateformat: "required",
        terms: "required"
    },
    messages: {
        firstname: "Enter your firstname",
        lastname: "Enter your lastname",
        username: {
            required: "Enter a username",
            minlength: jQuery.format("Enter at least {0} characters"),
            remote: jQuery.format("{0} is already in use")
        },
        password: {
            required: "Provide a password",
            rangelength: jQuery.format("Enter at least {0} characters")
        },
        password_confirm: {
            required: "Repeat your password",
            minlength: jQuery.format("Enter at least {0} characters"),
            equalTo: "Enter the same password as above"
        },
        email: {
            required: "Please enter a valid email address",
            minlength: "Please enter a valid email address",
            remote: jQuery.format("{0} is already in use")
        },
        dateformat: "Choose your preferred dateformat",
        terms: " "
    },
    // the errorPlacement has to take the table layout into account
    errorPlacement: function(error, element) {
        if ( element.is(":radio") )
            error.appendTo( element.parent().next().next() );
        else if ( element.is(":checkbox") )
            error.appendTo ( element.next() );
        else
            error.appendTo( element.parent().next() );
    },
    // specifying a submitHandler prevents the default submit, good for the demo
    submitHandler: function() {

        window.location.replace("http://knowyourchampion.com?message=succes");
    },
    // set this class to error-labels to indicate valid fields
    success: function(label) {
        // set &nbsp; as text for IE
        label.html("&nbsp;").addClass("checked");
    }
});

// propose username by combining first- and lastname
$("#username").focus(function() {
    var firstname = $("#firstname").val();
    var lastname = $("#lastname").val();
    if(firstname && lastname && !this.value) {
        this.value = firstname + "." + lastname;
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:43:21.597

在验证脚本的成功功能上添加 ajax 调用

```
Your ajax request with form details 
$.ajax({
    type:"POST",
    url:"registerUser_process.php",
    data:$("#signupform").serialize(),
    complete:function(data){
    // response of ajax
   console.log(data);or alert(data)
    }
}); 
```

在你的`registerUser_process.php`回声你的表单域

# twitter-bootstrap - 导航崩溃不适用于 twitter bootstrap - 图标未出现

> ID：12397117
> 
> 赞同：0
> 
> 时间：2012-09-12T22:42:25.493
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

我遇到了与此已回答帖子中所述完全相同的问题-[导航折叠不起作用[Twitter Bootstrap]](https://stackoverflow.com/questions/9624918/nav-collapse-not-working-twitter-bootstrap?answertab=active#tab-top)

我为自己是新手而道歉，但我认为这里的答案意味着我应该放置：

```
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

在我的 application.html.erb 文件的 HEAD 部分中。

好吧，我已经这样做了，但图标仍然没有出现。还有什么我需要做的吗？

这是我的 GEMFILE 来源：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bcrypt-ruby', '3.0.1'
gem "possessive" 
  #gem 'therubyracer', :platforms => :ruby
gem 'bootstrap-sass', '2.0.4'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'

gem 'annotate', '2.5.0', group: :development

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-ui-rails'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes

end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:50:53.460

确保这些文件的行正确。

```
 # app/assets/stylesheets/application.css
 /*
 *= require_self
 *= require_tree .    <-- Require all files in stylesheets directory
 */

 # app/assets/stylesheets/bootstrap_and_overrides.css.less
 @import "twitter/bootstrap/bootstrap";
 @import "twitter/bootstrap/responsive";   <-- These two lines in the beginning of file

 # app/views/layout/application.html.erb
 = stylesheet_link_tag "application", media: "all" <-- Yes, it should be in head section 
```

你跑了吗`$ rails g bootstrap:install`- 它应该自动为你完成所有这些工作。

# javascript - 键名中的 MongoDB 点 (.)

> ID：12397118
> 
> 赞同：104
> 
> 时间：2012-09-12T22:42:28.520
> 
> 标签：javascript, mongodb, nosql

似乎 mongo 不允许插入带有点 (.) 或美元符号 ($) 的键，但是当我使用 mongoimport 工具导入包含点的 JSON 文件时，它工作正常。驱动程序抱怨试图插入该元素。

这是文档在数据库中的样子：

```
{
    "_id": {
        "$oid": "..."
    },
    "make": "saab",
    "models": {
        "9.7x": [
            2007,
            2008,
            2009,
            2010
        ]
    }
} 
```

我做这一切都错了吗，不应该使用像外部数据（即模型）这样的哈希映射，还是我可以以某种方式转义点？也许我想太多类似 Javascript 的东西。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-12T22:59:57.447

MongoDB 不支持[其中带有点](http://docs.mongodb.org/manual/reference/limits/#Restrictions-on-Field-Names)的键，因此您必须在导入 JSON 文件之前对其进行预处理以删除/替换它们，否则您将为各种问题做好准备。

这个问题没有标准的解决方法，最好的方法过于依赖于具体情况。但是，如果可能的话，我会避免使用任何关键的编码器/解码器方法，因为您将永远继续为此付出的不便，其中 JSON 重组可能是一次性成本。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-05-15T08:22:54.517

[正如其他答案中提到的，由于字段名称的限制，](http://docs.mongodb.org/manual/reference/limits/#Restrictions-on-Field-Names) MongoDB 不允许`$`或`.`字符作为映射键。但是，正如[美元符号运算符转义中所述，](http://docs.mongodb.org/manual/faq/developers/#faq-dollar-sign-escaping)**此限制不会阻止您*****插入*****带有此类键的文档，它只会阻止您更新或查询它们。**

 *简单地替换`.`为`[dot]`or `U+FF0E`（如本页其他地方所述）的问题是，当用户合法地想要存储密钥时会发生什么情况`[dot]`or `U+FF0E`？

[Fantom 的](http://fantom-lang.org/) [afMorphia 驱动程序](http://eggbox.fantomfactory.org/pods/afMorphia)采用的一种方法是使用类似于 Java 的 unicode 转义序列，但要确保首先转义转义字符。实质上，进行了以下字符串替换 (*)：

```
\  -->  \\
$  -->  \u0024
.  -->  \u002e 
```

随后*从*MongoDB 读取映射键时会进行反向替换。

或者在[Fantom](http://fantom-lang.org/)代码中：

```
Str encodeKey(Str key) {
    return key.replace("\\", "\\\\").replace("\$", "\\u0024").replace(".", "\\u002e")
}

Str decodeKey(Str key) {
    return key.replace("\\u002e", ".").replace("\\u0024", "\$").replace("\\\\", "\\")
} 
```

用户需要注意此类转换的唯一时间是为此类键构建查询时。

鉴于出于配置目的而存储在数据库中很常见，`dotted.property.names`我相信这种方法比简单地禁止所有此类映射键更可取。

(*) afMorphia 实际上执行完整/正确的 Unicode 转义规则，如[Java 中的 Unicode 转义语法中](https://stackoverflow.com/questions/21522770/unicode-escape-syntax-in-java)所述，但所描述的替换序列也同样有效。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-09-19T15:24:35.737

[Mongo 文档](https://docs.mongodb.org/manual/faq/developers/#dollar-sign-operator-escaping)建议用它们的unicode 等价物替换非法字符，例如`$`和。`.`

> 在这些情况下，密钥需要替换保留的 $ 和 . 人物。任何字符都已足够，但请考虑使用 Unicode 全宽等效字符：U+FF04（即“＄”）和 U+FF0E（即“．”）。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-01-11T07:30:42.680

MongoDB 的最新稳定版本 (v3.6.1) 现在确实支持键或字段名称中的点 (.)。

[字段名称现在可以包含点 (.) 和美元 ($) 字符](https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2015-12-23T19:02:23.953

我刚刚实现的一个让我非常满意的解决方案是将键名和值拆分为两个单独的字段。这样，我可以保持角色完全相同，而不必担心任何解析噩梦。该文档看起来像：

```
{
    ...
    keyName: "domain.com",
    keyValue: "unregistered",
    ...
} 
```

您仍然可以很容易地查询这个，只需`find`对字段**keyName** *和* **keyValue**执行操作。

所以而不是：

```
 db.collection.find({"domain.com":"unregistered"}) 
```

这实际上不会按预期工作，您将运行：

```
db.collection.find({keyName:"domain.com", keyValue:"unregistered"}) 
```

它将返回预期的文档。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-04-28T03:05:10.360

您可以尝试在键中使用哈希而不是值，然后将该值存储在 JSON 值中。

```
var crypto = require("crypto");   

function md5(value) {
    return crypto.createHash('md5').update( String(value) ).digest('hex');
}

var data = {
    "_id": {
        "$oid": "..."
    },
    "make": "saab",
    "models": {}
}

var version = "9.7x";

data.models[ md5(version) ] = {
    "version": version,
    "years" : [
        2007,
        2008,
        2009,
        2010
    ]
} 
```

然后，您稍后将使用哈希访问模型。

```
var version = "9.7x";
collection.find( { _id : ...}, function(e, data ) {
    var models = data.models[ md5(version) ];
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-07-19T06:24:42.180

**现在支持**

**MongoDb 3.6**及更高版本支持字段名称中的**点**和**美元**。见下文JIRA：[https ://jira.mongodb.org/browse/JAVA-2810](https://jira.mongodb.org/browse/JAVA-2810)

将您的 Mongodb 升级到 3.6+ 听起来是最好的方法。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-04-26T21:38:57.037

来自[MongoDB 文档](http://www.mongodb.org/display/DOCS/Legal+Key+Names)“'.' 字符不得出现在键名中的任何位置”。看起来你必须想出一个编码方案或者不做。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-10-28T01:36:33.483

您需要转义密钥。由于似乎大多数人不知道如何正确转义字符串，因此步骤如下：

1.  选择一个转义字符（最好选择一个很少使用的字符）。例如。'~'
2.  要转义，首先将转义字符的所有实例替换为以转义字符开头的某个序列（例如，'~' -> '~t'），然后将您需要转义的任何字符或序列替换为以转义字符开头的某个序列. 例如。'。' -> '~p'
3.  要取消转义，首先从第二个转义序列的所有实例中删除转义序列（例如 '~p' -> '.'），然后将转义字符序列转换为单个转义字符（例如 '~s' -> '~ ')

另外，请记住 mongo 也不允许键以'$'开头，所以你必须在那里做类似的事情

这是一些执行此操作的代码：

```
// returns an escaped mongo key
exports.escape = function(key) {
  return key.replace(/~/g, '~s')
            .replace(/\./g, '~p')
            .replace(/^\$/g, '~d')
}

// returns an unescaped mongo key
exports.unescape = function(escapedKey) {
  return escapedKey.replace(/^~d/g, '$')
                   .replace(/~p/g, '.')
                   .replace(/~s/g, '~')
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-09-26T14:06:11.433

一个迟到的答案，但如果你使用 Spring 和 Mongo，Spring 可以为你管理转换`MappingMongoConverter`。这是 JohnnyHK 的解决方案，但由 Spring 处理。

```
@Autowired
private MappingMongoConverter converter;

@PostConstruct
public void configureMongo() {
 converter.setMapKeyDotReplacement("xxx");
} 
```

如果您存储的 Json 是：

```
{ "axxxb" : "value" } 
```

通过 Spring (MongoClient)，它将被读取为：

```
{ "a.b" : "value" } 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-05-26T21:28:39.147

正如另一位用户提到的，编码/解码将来可能会出现问题，因此替换所有带点的键可能更容易。这是我用“。”替换键的递归函数。发生：

```
def mongo_jsonify(dictionary):
    new_dict = {}
    if type(dictionary) is dict:
        for k, v in dictionary.items():
            new_k = k.replace('.', '-')
            if type(v) is dict:
                new_dict[new_k] = mongo_jsonify(v)
            elif type(v) is list:
                new_dict[new_k] = [mongo_jsonify(i) for i in v]
            else:
                new_dict[new_k] = dictionary[k]
        return new_dict
    else:
        return dictionary

if __name__ == '__main__':
    with open('path_to_json', "r") as input_file:
        d = json.load(input_file)
    d = mongo_jsonify(d)
    pprint(d) 
```

您也可以修改此代码以替换“$”，因为这是 mongo 不允许在键中使用的另一个字符。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-09-03T17:39:00.060

我在 JavaScript 中为每个对象键使用以下转义：

```
key.replace(/\\/g, '\\\\').replace(/^\$/, '\\$').replace(/\./g, '\\_') 
```

我喜欢它的是它只`$`在开头替换，并且不使用在控制台中使用起来可能很棘手的 unicode 字符。`_`对我来说比 unicode 字符更具可读性。它也不会将一组特殊字符 ( `$`, `.`) 替换为另一组 (unicode)。但正确地使用传统`\`的 .

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-10-04T16:09:18.847

不完美，但在大多数情况下都可以使用：用其他东西替换禁止的字符。由于它在键中，因此这些新字符应该相当少见。

```
/** This will replace \ with ⍀, ^$ with '₴' and dots with ⋅  to make the object compatible for mongoDB insert. 
Caveats:
    1\. If you have any of ⍀, ₴ or ⋅ in your original documents, they will be converted to \$.upon decoding. 
    2\. Recursive structures are always an issue. A cheap way to prevent a stack overflow is by limiting the number of levels. The default max level is 10.
 */
encodeMongoObj = function(o, level = 10) {
    var build = {}, key, newKey, value
    //if (typeof level === "undefined") level = 20     // default level if not provided
    for (key in o) {
        value = o[key]
        if (typeof value === "object") value = (level > 0) ? encodeMongoObj(value, level - 1) : null     // If this is an object, recurse if we can

        newKey = key.replace(/\\/g, '⍀').replace(/^\$/, '₴').replace(/\./g, '⋅')    // replace special chars prohibited in mongo keys
        build[newKey] = value
    }
    return build
}

/** This will decode an object encoded with the above function. We assume the structure is not recursive since it should come from Mongodb */
decodeMongoObj = function(o) {
    var build = {}, key, newKey, value
    for (key in o) {
        value = o[key]
        if (typeof value === "object") value = decodeMongoObj(value)     // If this is an object, recurse
        newKey = key.replace(/⍀/g, '\\').replace(/^₴/, '$').replace(/⋅/g, '.')    // replace special chars prohibited in mongo keys
        build[newKey] = value
    }
    return build
} 
```

这是一个测试：

```
var nastyObj = {
    "sub.obj" : {"$dollar\\backslash": "$\\.end$"}
}
nastyObj["$you.must.be.kidding"] = nastyObj     // make it recursive

var encoded = encodeMongoObj(nastyObj, 1)
console.log(encoded)
console.log( decodeMongoObj( encoded) ) 
```

和结果 - 请注意，这些值没有被修改：

```
{
  sub⋅obj: {
    ₴dollar⍀backslash: "$\\.end$"
  },
  ₴you⋅must⋅be⋅kidding: {
    sub⋅obj: null,
    ₴you⋅must⋅be⋅kidding: null
  }
}
[12:02:47.691] {
  "sub.obj": {
    $dollar\\backslash: "$\\.end$"
  },
  "$you.must.be.kidding": {
    "sub.obj": {},
    "$you.must.be.kidding": {}
  }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-27T11:04:18.657

有一些丑陋的查询方法**不建议在应用程序中使用它**而不是用于调试目的（仅适用于嵌入式对象）：

```
db.getCollection('mycollection').aggregate([
    {$match: {mymapfield: {$type: "object" }}}, //filter objects with right field type
    {$project: {mymapfield: { $objectToArray: "$mymapfield" }}}, //"unwind" map to array of {k: key, v: value} objects
    {$match: {mymapfield: {k: "my.key.with.dot", v: "myvalue"}}} //query
]) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-07-19T21:14:02.787

对于 PHP，我将 HTML 值替换为句点。那就是`"&#46;"`。

它像这样存储在 MongoDB 中：

```
 "validations" : {
     "4e25adbb1b0a55400e030000" : {
     "associate" : "true" 
    },
     "4e25adb11b0a55400e010000" : {
       "associate" : "true" 
     } 
   } 
```

和PHP代码...

```
 $entry = array('associate' => $associate);         
  $data = array( '$set' => array( 'validations.' . str_replace(".", `"&#46;"`, $validation) => $entry ));     
  $newstatus = $collection->update($key, $data, $options); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-10-02T09:48:20.927

[Lodash 对](https://lodash.com/docs#pairs)将允许您更改

```
{ 'connect.sid': 's:hyeIzKRdD9aucCc5NceYw5zhHN5vpFOp.0OUaA6' } 
```

进入

```
[ [ 'connect.sid',
's:hyeIzKRdD9aucCc5NceYw5zhHN5vpFOp.0OUaA6' ] ] 
```

使用

```
var newObj = _.pairs(oldObj); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-28T10:26:10.947

您可以按原样存储它并在之后转换为漂亮

我在 Livescript 上写了这个例子。您可以使用 livescript.net 网站对其进行评估

```
test =
  field:
    field1: 1
    field2: 2
    field3: 5
    nested:
      more: 1
      moresdafasdf: 23423
  field3: 3

get-plain = (json, parent)->
  | typeof! json is \Object => json |> obj-to-pairs |> map -> get-plain it.1, [parent,it.0].filter(-> it?).join(\.)
  | _ => key: parent, value: json

test |> get-plain |> flatten |> map (-> [it.key, it.value]) |> pairs-to-obj 
```

它会产生

```
{"field.field1":1,
 "field.field2":2,
 "field.field3":5,
 "field.nested.more":1,
 "field.nested.moresdafasdf":23423,
 "field3":3}
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-12-28T02:41:15.557

给你我的提示：你可以使用 JSON.stringify 保存 Object/ Array 包含键名有点，然后使用 JSON.parse 将字符串解析为 Object 以在从数据库获取数据时进行处理

另一种解决方法：重组您的架构，如：

```
key : {
"keyName": "a.b"
"value": [Array]
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-03-22T16:24:46.690

最新的 MongoDB 确实支持带点的键，但 java MongoDB-driver 不支持。所以为了让它在 Java 中工作，我从[java-mongo-driver 的 github repo 中](https://github.com/mongodb/mongo-java-driver)提取代码，并在他们的 isValid Key 函数中进行了相应的更改，从中创建了新的 jar，现在使用它。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-06-12T04:01:54.133

将点（`.`）或美元（`$`）替换为在真实文档中永远不会使用的其他字符。并在检索文档时恢复点（`.`）或美元（ ）。`$`该策略不会影响用户读取的数据。

您可以从[所有字符中选择字符](https://www.copypastecharacter.com/all-characters)。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-01-22T09:19:48.907

奇怪的是，使用 mongojs，如果我自己设置 _id，我可以创建一个带点的文档，但是在生成 _id 时我无法创建一个文档：

是否有效：

```
db.testcollection.save({"_id": "testdocument", "dot.ted.": "value"}, (err, res) => {
    console.log(err, res);
}); 
```

不工作：

```
db.testcollection.save({"dot.ted": "value"}, (err, res) => {
    console.log(err, res);
}); 
```

我首先认为 dat 使用点键更新文档也可以，但是它将点标识为子键！

看到 mongojs 如何处理点（子键），我将确保我的键不包含点。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-04-08T03:51:19.110

就像[@JohnnyHK](https://stackoverflow.com/users/1259510/johnnyhk)提到的那样，删除标点符号或“。” 从您的密钥中提取，因为当您的数据开始累积到更大的数据集中时，它会产生更大的问题。这会导致问题，尤其是当您调用像 $merge 这样需要访问和比较会引发错误的键的聚合运算符时。我已经很难学会了，请不要对那些刚开始的人重复。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-01-07T23:38:41.340

在我们的例子中，带有句点的属性永远不会被用户直接查询。但是，它们可以由用户创建。

所以我们首先序列化我们的整个模型并用字符串替换特定字段的所有实例。我们的周期字段可以出现在许多位置，并且无法预测数据的结构是什么。

```
 var dataJson = serialize(dataObj);
    foreach(pf in periodFields) 
    {  
         var encodedPF = pf.replace(".", "ENCODE_DOT");
         dataJson.replace(pf, encodedPF);
    } 
```

然后在我们的数据被展平后，我们替换编码PF的实例，以便我们可以在我们的文件中写入解码版本

没有人会需要一个名为 ENCODE_DOT 的字段，所以在我们的例子中这不会是一个问题。

结果是以下 color.one 将作为 colorENCODE_DOTone 在数据库中

当我们编写文件时，我们将 ENCODE_DOT 替换为 .

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2017-10-16T10:17:05.087

`/home/user/anaconda3/lib/python3.6/site-packages/pymongo/collection.py`

在错误消息中找到它。如果您使用`anaconda`（如果没有，请查找对应的文件），只需将上述文件中的值从 更改`check_keys = True`为`False`。那行得通！*

# java - 如何将 FlowLayout 与绝对定位混合使用

> ID：12397119
> 
> 赞同：1
> 
> 时间：2012-09-12T22:42:33.033
> 
> 标签：java, swing, netbeans, awt, layout-manager

我有这段代码可以加载 5 张图像并使用 FlowLayout 将它们放入框架中：

```
public class Main
{
    private static final int verticalGap=50;
    private static final int horizontalGap=30;
    private static final int width= 800;
    private static final int height= 800;
    public static void main(String[] args)
    {
        FlowLayout layout=new FlowLayout(FlowLayout.LEADING,horizontalGap,verticalGap);
        JButton button= new JButton("Discard");
        ImagePanel[] panels= new ImagePanel[5];
        Deck deck= new Deck();
        JFrame frame= new JFrame("Poker");
        frame.setSize(width, height);
        frame.setLayout(layout);
        frame.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
        deck.mix();
        for(int i=0; i<5; i++)
        {
            panels[i]= new ImagePanel();
            panels[i].setImage(deck.getCard(i));
            frame.getContentPane().add(panels[i]);
        }
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

代码加载 5 张卡片并正确识别它们。
但问题是现在我想在框架上放置一个按钮。这个按钮应该放在屏幕的大约中央，但是如果我将它添加到窗格中，则按钮放置在其他面板附近，使用水平流布局设置的间隙。
如何在不改变面板位置的情况下将其放置在绝对位置（因此我希望使用流布局添加 5 个面板，并在绝对位置添加一个按钮）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:24:52.970

您不能将绝对布局与 LayoutManager 混合使用。

在这种情况下：

1.  我会将 5 张卡片包装在单独的 JPanel 中（使用您的 FlowLayout）。
2.  我会将该面板放在内容窗格中。
3.  并使用另一个 JPanel 作为我将添加到内容窗格的 SOUTH 的按钮（默认情况下，内容窗格使用 BorderLayout）。在这个面板中，我将简单地使用一个 FlowLayout，并将对齐设置为 CENTER。
4.  使用 SwingUtilities.invokeLater 将您的 GUI 初始化代码移动到 EDT（始终在 EDT 上运行 GUI 的东西！）

这是与该解决方案相对应的代码（但我无法测试它，因为我没有您的其他类）。

```
import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.FlowLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Main {
    private static final int verticalGap = 50;
    private static final int horizontalGap = 30;
    private static final int width = 800;
    private static final int height = 800;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Main().initUI();
            }
        });
    }

    private void initUI() {
        FlowLayout layout = new FlowLayout(FlowLayout.LEADING, horizontalGap, verticalGap);
        JButton button = new JButton("Discard");
        ImagePanel[] panels = new ImagePanel[5];
        Deck deck = new Deck();
        JFrame frame = new JFrame("Poker");
        frame.setSize(width, height);
        frame.setComponentOrientation(ComponentOrientation.LEFT_TO_RIGHT);
        deck.mix();
        JPanel deckPanel = new JPanel(layout);
        for (int i = 0; i < 5; i++) {
            panels[i] = new ImagePanel();
            panels[i].setImage(deck.getCard(i));
            deckPanel.add(panels[i]);
        }
        frame.getContentPane().add(deckPanel);
        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        buttonPanel.add(button);
        frame.getContentPane().add(buttonPanel, BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();// Sets the frame size to its preferred size.
        // You can also call setSize() instead
        frame.setVisible(true);
    }
} 
```

# .htaccess - htaccess 重写以删除部分 url

> ID：12397120
> 
> 赞同：0
> 
> 时间：2012-09-12T22:42:57.943
> 
> 标签：.htaccess, mod-rewrite, rewrite

我找不到答案，所以我希望有人能提供帮助。

如何使用 .htaccess 在此示例中更改 url：

```
domain.com/product/sku/a=code&rss=1 
```

至

```
domain.com/product/sku/a=code 
```

（我只需要`&rss=1`删除）

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:46:02.133

将这些规则添加到您的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*&|^)rss=[0-9]+&?(.*)$
RewriteRule ^ /%{REQUEST_URI}?%1%2 [L,R=301] 
```

# rpm - 如何解释 rpm install/erase 额外详细命令的目录输出？

> ID：12397128
> 
> 赞同：0
> 
> 时间：2012-09-12T22:44:02.833
> 
> 标签：rpm

我有一个问题，例如 rpm 擦除

`rpm -e <package>`

导致软链接目录被删除。而如果该目录不是一个链接，而只是一个目录，它就可以正常工作。

为了调查这一点，我开始使用额外的详细输出 -vv，它显示了很多信息，其中一些是关于被操作的目录和文件的信息。但是，我不知道如何阅读输出，也无法搜索任何解释细节的资源。

有问题的输出示例如下：

```
D:     erase: waitpid(4409) rc 4409 status 0 secs 1.107
D: fini      100755  1 (65534,65533)       105 /usr/foobar/tomcat/logs/om_be/dummy.log 
D: fini      040755  2 (65534,65533)      4096 /usr/foobar/tomcat/logs/om_be 
D: fini      100755  1 (65534,65533)       105 /usr/foobar/tomcat/logs/mc_be/dummy.log 
D: fini      040755  2 (65534,65533)      4096 /usr/foobar/tomcat/logs/mc_be 
D: fini      100755  1 (65534,65533)       105 /usr/foobar/tomcat/logs/dummy.log 
D: fini      120755  1 (65534,65533)        24 /usr/foobar/tomcat/logs 
D: fini      040755  2 (65534,65533)      4096 /usr/foobar/tomcat 
D: fini      100755  1 (   0,   1)      4293 /usr/foobar/share/mrtg2/icons/mrtg-ti.png 
[1]          [2]    [3]     [4]         [5]     [6] 
```

[1] 我怀疑这`D:`是指示调试输出。但是呢`fini`？它有什么意义吗？

[2] 这组数字（6个）怎么样。它们看起来可能是权限模式设置，但数字太多。至少最后三位数字看起来像八进制模式值，我不知道前三位是什么。

[3] 我不知道这个专栏代表什么

[4] 我猜这`(##,##)`部分是所有者和组权限，因为它们与预期值匹配。

[5] 我不知道这个数字代表什么。也许尺寸？

[6] 我认识目录和文件名。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T09:00:15.760

调试输出来自`lib/fsm.c`(function `fsmStage`)。相关代码片段：

```
rpmlog(RPMLOG_DEBUG, " %8s %06o%3d (%4d,%4d)%10d %s %s\n",
            cur,
            (unsigned)st->st_mode, (int)st->st_nlink,
            (int)st->st_uid, (int)st->st_gid, (int)st->st_size,
            (fsm->path ? fsm->path : ""),
            _fafilter(fsm->action)); 
```

正在执行的操作的当前状态的字符串表示形式在哪里`cur`（在您的情况下，操作是擦除，后续任务的当前状态是 * *fini* *shed 成功）。`st`是一个标准`struct stat`，所以你有, , , , ,`mode`的数量。`hardlinks``uid``gid``file/dir size``path`

你猜对了大部分调试项。至于模式不仅仅是一个简单的 4 位八进制数，它有点复杂。来自`stat`2 手册页：为 st_mode 字段定义了以下标志：

```
 S_IFMT     0170000   bit mask for the file type bit fields
       S_IFSOCK   0140000   socket
       S_IFLNK    0120000   symbolic link
       S_IFREG    0100000   regular file
       S_IFBLK    0060000   block device
       S_IFDIR    0040000   directory
       S_IFCHR    0020000   character device
       S_IFIFO    0010000   FIFO
       S_ISUID    0004000   set UID bit
       S_ISGID    0002000   set-group-ID bit (see below)
       S_ISVTX    0001000   sticky bit (see below)
       S_IRWXU    00700     mask for file owner permissions
       S_IRUSR    00400     owner has read permission
       S_IWUSR    00200     owner has write permission
       S_IXUSR    00100     owner has execute permission
       S_IRWXG    00070     mask for group permissions
       S_IRGRP    00040     group has read permission
       S_IWGRP    00020     group has write permission
       S_IXGRP    00010     group has execute permission
       S_IRWXO    00007     mask for permissions for others (not in group)
       S_IROTH    00004     others have read permission
       S_IWOTH    00002     others have write permission
       S_IXOTH    00001     others have execute permission 
```

# cuda - CUDA C编程指南的矩阵乘法示例结果错误

> ID：12397129
> 
> 赞同：1
> 
> 时间：2012-09-12T22:44:04.220
> 
> 标签：cuda, gpgpu, matrix-multiplication

我正在做《CUDA C Programming Guide》第 35 页中的矩阵乘法示例，为了练习，我复制了代码并完成了缺失的代码。我了解程序的逻辑以及它应该如何工作，但我没有得到预期的结果。

这是我制作的完整代码，我不知道错误是我的还是来自示例？

编码：

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <iostream>    
#include <stdio.h>
#include <stdio.h>

using namespace std;
#define BLOCK_SIZE 16

typedef struct
{
    int width;
    int height;
    float *elements;
}Matrix;

__global__ void MatMulKernel(const Matrix,const Matrix, Matrix C);

void MatMul(const Matrix A,const Matrix B, Matrix C) 
{
    size_t size;
    //Matrix A creation y storage in device memory 
    Matrix d_A;
    d_A.width=A.width;
    d_A.height=A.height;
    size=A.height*A.width*sizeof(float);
    cudaMalloc(&d_A.elements,size);
    cudaMemcpy(d_A.elements,A.elements,size,cudaMemcpyHostToDevice);
    //Matrix B creation y storage in device memory 
    Matrix d_B;
    d_B.width=B.width;
    d_B.height=B.height;
    size=B.height*B.width*sizeof(float);
    cudaMalloc(&d_B.elements,size);
    cudaMemcpy(d_B.elements,B.elements,size,cudaMemcpyHostToDevice);
    //Matrix C creation y storage in device memory         
    Matrix d_C;
    d_C.width=C.width;
    d_C.height=C.height;
    size=C.height*C.width*sizeof(float);
    cudaMalloc(&d_C.elements,size);
    //        
    dim3 dimBlock(BLOCK_SIZE,BLOCK_SIZE);
    dim3 dimGrid(B.width/dimBlock.x,A.height/dimBlock.y);
    MatMulKernel<<<dimGrid,dimBlock>>>(d_A,d_B,d_C);
    //Copy the result in the matrix C from the device to the host.        
    cudaMemcpy(C.elements,d_C.elements,size,cudaMemcpyDeviceToHost);  
    //edit the missing code.
    // for(int i=0;i<BLOCK_SIZE*BLOCK_SIZE;i++){cout<<C.elements[i]<<endl;}      
    // result in random numbers
    cudaFree(d_A.elements);
    cudaFree(d_B.elements);
    cudaFree(d_C.elements);
}

__global__ void MatMulKernel(Matrix A, Matrix B, Matrix C)
{
    float Cvalue=0;
    int row=blockIdx.y*blockDim.y+threadIdx.y;
    int col=blockIdx.x*blockDim.x+threadIdx.x;
    for(int e=0;e<A.width;++e)
    {
        Cvalue+=A.elements[row*A.width+e]*B.elements[e*B.width+col];
    }
    C.elements[row*C.width+col]=Cvalue;
}

int main()
{
    cout<<"Matrices"<<endl;
    //Declarationd of the A,B,C matrix´s
    float a[15][15];        
    float b[15][15];
    float c[15][15];
    //Fill the matrix whit some numbers.
    int cont0=0;
    for(int c=0;c<15;c++)
    {
        for(int v=0;v<15;v++)
        {
            a[v][c]=cont0;
            b[v][c]=cont0;
            cont0++;
        }
    }
    //Flatten the matrix for the passing to the kernel
    int offset=0;
    float a_t[256];
    float b_t[256];
    for(int y=0;y<15;y++)
    {                        
        for(int x=0;x<15;x++)
        {
            a_t[x+offset]=a[x][y];
            b_t[x+offset]=a[x][y];
        }
        offset=offset+15;
    }
    float t_C[256];
    //Completing the matrix format for the kernel.
    Matrix m_A;
    m_A.height=15;
    m_A.width=15;
    m_A.elements=a_t;
    Matrix m_B;
    m_B.height=15;
    m_B.width=15;
    m_B.elements=b_t;
    Matrix m_C;
    m_C.height=15;
    m_C.width=15;
    m_C.elements=t_C;
    //Passing the formated matrix to the kernel.
    MatMul(m_A,m_B,m_C);                
    cout<<"Final"<<endl;        
return 0;
} 
```

程序编译并运行，但结果矩阵`C.elements`来自： `cudaMemcpy(C.elements,d_C.elements,size,cudaMemcpyDeviceToHost);` 是一个随机数。我试图将它用作指向数组的指针，但我没有从中得到任何东西，并且像数组一样对待它也不起作用。

如果有人能帮我完成这件事，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:19:46.123

您的代码在内核中的数组索引和 CPU 上的初始化之间存在轻微的不匹配。这是@harrism建议的带有调试的更正代码：

```
 #include "cuda_runtime.h"
    #include "device_launch_parameters.h"
    #include "cuda_runtime.h"
    #include "device_launch_parameters.h"
    #include <iostream>
    #include <stdio.h>
    #include <stdio.h>

    using namespace std;
    #define BLOCK_SIZE 16

    typedef struct
    {
        int width;
        int height;
        float *elements;
    }Matrix;

    __global__ void MatMulKernel(const Matrix,const Matrix, Matrix C);

    void MatMul(const Matrix A,const Matrix B, Matrix C)
    {
        size_t size;
        //Matrix A creation y storage in device memory
        Matrix d_A;
        d_A.width=A.width;
        d_A.height=A.height;
        size=A.height*A.width*sizeof(float);
        cudaMalloc(&d_A.elements,size);
        cudaMemcpy(d_A.elements,A.elements,size,cudaMemcpyHostToDevice);
        //Matrix B creation y storage in device memory
        Matrix d_B;
        d_B.width=B.width;
        d_B.height=B.height;
        size=B.height*B.width*sizeof(float);
        cudaMalloc(&d_B.elements,size);
    cudaMemcpy(d_B.elements,B.elements,size,cudaMemcpyHostToDevice);
    //Matrix C creation y storage in device memory
    Matrix d_C;
    d_C.width=C.width;
    d_C.height=C.height;
    //cudaMalloc(&d_C,sizeof(Matrix));
    //cudaMemcpy(d_C,C,sizeof(Matrix),cudaMemcpyHostToDevice);
    size=C.height*C.width*sizeof(float);
    cudaMalloc(&d_C.elements,size);
    //
    dim3 dimBlock(BLOCK_SIZE,BLOCK_SIZE);
    dim3 dimGrid(B.width/dimBlock.x,A.height/dimBlock.y);
    MatMulKernel<<<dimGrid,dimBlock>>>(d_A,d_B,d_C);
    //Copy the result in the matrix C from the device to the host.
    printf("error code: %s\n",cudaGetErrorString(cudaGetLastError()));
    cudaMemcpy(C.elements,d_C.elements,size,cudaMemcpyDeviceToHost);
    //
    cudaFree(d_A.elements);
    cudaFree(d_B.elements);
    cudaFree(d_C.elements);
}

__global__ void MatMulKernel(Matrix A, Matrix B, Matrix C)
{
        //printf("%d\n",threadIdx.x);
    float Cvalue=0;
    int row=blockIdx.y*blockDim.y+threadIdx.y;
    int col=blockIdx.x*blockDim.x+threadIdx.x;
    for(int e=0;e<A.width;++e)
    {
        Cvalue+=A.elements[row*A.width+e]*B.elements[e*B.width+col];
    }
    C.elements[row*C.width+col]=Cvalue;
}

int print_matrix(Matrix A){
        printf("Matrix:\n");
        int i;
        for(i=0; i<A.width*A.height; i++){
                if(i%A.width==0) printf("\n");
                printf("%6.4f\t",A.elements[i]);
        }
        printf("\n");
}
int main()
{
    cout<<"Matrices"<<endl;
    //Declarationd of the A,B,C matrix.s
    float a[BLOCK_SIZE][BLOCK_SIZE];
    float b[BLOCK_SIZE][BLOCK_SIZE];
    float c[BLOCK_SIZE][BLOCK_SIZE];
    //Fill the matrix whit some numbers.
    int cont0=0;
    for(int c=0;c<BLOCK_SIZE;c++)
    {
        for(int v=0;v<BLOCK_SIZE;v++)
        {
            a[v][c]=cont0;
            b[v][c]=cont0;
            cont0++;
        }
    }
    //Flatten the matrix for the passing to the kernel
    int offset=0;
    float a_t[BLOCK_SIZE*BLOCK_SIZE];
    float b_t[BLOCK_SIZE*BLOCK_SIZE];
    for(int y=0;y<BLOCK_SIZE;y++)
    {
        for(int x=0;x<BLOCK_SIZE;x++)
        {
            a_t[x+offset]=a[x][y];
            b_t[x+offset]=a[x][y];
        }
        offset=offset+BLOCK_SIZE;
    }
    float t_C[BLOCK_SIZE*BLOCK_SIZE];
    //Completing the matrix format for the kernel.
    Matrix m_A;
    m_A.height=BLOCK_SIZE;
    m_A.width=BLOCK_SIZE;
    m_A.elements=a_t;
    Matrix m_B;
    m_B.height=BLOCK_SIZE;
    m_B.width=BLOCK_SIZE;
    m_B.elements=b_t;
    Matrix m_C;
    m_C.height=BLOCK_SIZE;
    m_C.width=BLOCK_SIZE;
    m_C.elements=t_C;
    //Passing the formated matrix to the kernel.
    print_matrix(m_A);
    print_matrix(m_B);
    MatMul(m_A,m_B,m_C);
    print_matrix(m_C);
    cout<<"Final"<<endl;
return 0;
} 
```

检查输出。如果您看到结果错误，请检查系统上的内核错误，该错误会在输出中报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:07:37.423

首先，请参阅[此处](https://stackoverflow.com/tags/cuda/info)了解如何为您的问题获得有用的答案。特别是，您应该*始终*检查 CUDA API 调用和内核启动的返回值。此外，运行`cuda-memcheck`通常对于检测这样的越界访问非常有帮助。

@harrism 问你怎么知道结果是错误的，因为你似乎没有对它做任何事情。

但更重要的是，您使用 16x16 线程块计算 15x15 矩阵，但您没有注意禁用越界线程。由于您正在尝试创建一个简单的示例，只需将矩阵大小增加到 16x16 - 如果您想处理奇数大小，那么您需要实现控制逻辑（或使用 cuBLAS！）。

# ios - 在过渡到 iOS 6 期间提交 iOS 5 应用程序

> ID：12397130
> 
> 赞同：2
> 
> 时间：2012-09-12T22:44:07.610
> 
> 标签：ios, ios5, app-store, ios6

Apple 是否已宣布他们将在多长时间内接受使用 iOS 5 SDK（而不是新的 iOS 6）构建的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:49:44.387

不，他们也不倾向于发布任何此类公告。

也就是说，您通常会针对 iOS 6 SDK 构建并简单地将部署目标设置为 5.0。许多错误修复通常发生在与新功能无关的版本之间的 SDK 的编译器端部分。

旧版模拟器将允许您继续直接在您的计算机上进行适当的测试，显然您可以继续连接真正的 iOS 5 设备。

真正的问题是 Apple 何时会停止接受 App Store 的 5.x 部署目标。因为他们现在仍然接受 4.0，所以我怀疑这需要一段时间。

# post - HttpClient POST 请求到 https

> ID：12397133
> 
> 赞同：0
> 
> 时间：2012-09-12T22:44:35.523
> 
> 标签：post, https, windows-8, httpclient

我正在开发一个登录网页并获取一些数据的 WinRT 应用程序。问题是我收到“HttpRequestException：发送请求时出错”消息。这是代码：

```
Uri url = new Uri("https://miyoigo-b.yoigo.com/selfcare/login");
HttpContent msg = new StringContent("account[cli]=" + number + "&password=" + pass);
HttpClientHandler handler = new HttpClientHandler();
handler.UseDefaultCredentials = true;
handler.UseCookies = true;
handler.CookieContainer = new CookieContainer();

HttpClient req = new HttpClient(handler);
req.DefaultRequestHeaders.Add("Host", "miyoigo-b.yoigo.com");
req.DefaultRequestHeaders.ExpectContinue = false;
HttpResponseMessage response = await req.PostAsync(url, msg);
string responseBody = await response.Content.ReadAsStringAsync(); 
```

我一直在尝试我在互联网上找到的很多东西，甚至禁用了我的防火墙，但没有任何效果。我正在从 Windows Phone 应用程序移植它，它确实适用于：

```
Uri url = new Uri("https://miyoigo-b.yoigo.com/selfcare/login");
HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(url);
req.Method = "POST";
req.Headers["Host"] = "miyoigo-b.yoigo.com";
req.CookieContainer = new CookieContainer();
req.BeginGetRequestStream(new AsyncCallback(WriteCallback), req); 
```

之后，在回调中，我创建了一个 Stream 并编写了凭据。

任何的想法？？我知道问题出在这个网页上，可能是我忘记发送某些内容或 POST 内容的格式不正确...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:11:18.980

最后的问题是 Win8 Metro Apps 只接受 SSL3.1 而这个网页使用的是 SSL3.0。解决方案是使用新版本的网页。

谢谢你们

# c - 如何在 Xcode 中安装/导入库？

> ID：12397134
> 
> 赞同：0
> 
> 时间：2012-09-12T22:44:38.637
> 
> 标签：c, xcode

第一次在 Mac 上写 C。我正在使用 Xcode。

我编译了 .c 文件，并收到一条错误消息，提示找不到 gsl/gsl_math.h 文件。

我知道在 Cygwin 中，这已经安装了，我不知道 Mac。

所以，我来到这里下载了图书馆。[http://www.gnu.org/software/gsl/](http://www.gnu.org/software/gsl/)

我在使用终端安装时遇到问题。命令是什么？谢谢！

# maven - Maven 3 复制依赖项给出了意想不到的结果

> ID：12397137
> 
> 赞同：1
> 
> 时间：2012-09-12T22:44:54.153
> 
> 标签：maven, maven-3, maven-dependency-plugin

我们有一个在 Maven 2 中运行良好的项目，但是在 Maven 3 中，当它被配置为项目 pom 中的执行时，我们遇到了复制依赖问题。

```
<execution>
    <id>copy-plugin-dependencies</id>
    <phase>package</phase>
    <goals>
        <goal>copy-dependencies</goal>
    </goals>
    <configuration>
        <excludeTypes>war,warpath</excludeTypes>
        <excludeGroupIds>org.mortbay.jetty</excludeGroupIds>
        <outputDirectory>${dir.server}/lib</outputDirectory>
    </configuration>
</execution> 
```

当使用 mvn 包运行时，我们的构建缺少一些依赖项。但是，从命令行运行等效项：

```
mvn dependency:copy-dependencies -DexcludeTypes=war,warpath -DexcludeGroupIds=org.mortbay.jetty -DoutputDirectory=${dir.server}/lib 
```

我们得到与使用 Maven 2 运行它时相同的依赖项。

如果我为dependency:tree 添加执行配置，我会看到打印出的所有依赖项。

Maven 3 中发生了什么变化导致了这种情况？

# javascript - Javascript，输出结果后页面不断刷新

> ID：12397141
> 
> 赞同：1
> 
> 时间：2012-09-12T22:46:01.500
> 
> 标签：javascript, html, css, forms

我有一个小问题。

我正在学习 Javascript，我决定制作一个货币转换器，但是在显示数据后我的页面不断刷新。

谁能帮我弄清楚为什么它会这样？谢谢

网站： http: [//nonlocalhost.uphero.com/index.html](http://nonlocalhost.uphero.com/index.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style type="text/css">
        * {font-size:13px;font-family:arial;background-color:black;color:white;padding:0;margin:0;}
        #wrapper {width:640px;margin:0px auto;}

        input {color:lime;width:150px;height:22px;}
        #money_to_convert, label:nth-child(3) {position:relative;top:100px;right:95px;}
        #my_currency {width:53px;height:22px;position:relative;top:100px;left:232px;}
        #converted_input, label:nth-child(5) {position:relative;top:134px;right:298px;}
        #convert_currency {width:53px;height:22px;position:relative;top:134px;left:175px;}
        #submit_button {width:52px;height:25px;position:relative;top:117px;right:230px;}
    </style>
    <script type="text/javascript">
        function output_value() {
            var my_input = Number(document.getElementsByName("user_input")[0].value);
            var my_output;
            var my_currency = document.convertions.currency_to_convert.value;
            var convert_to = document.convertions.convert_currency_to.value;

            if(my_currency == "USD"){
                if(convert_to == "CAD"){
                    my_output = my_input * 0.975;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "EUR"){
                    my_output = my_input * 0.775;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "GBP"){
                    my_output = my_input * 0.620;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "AUD"){
                    my_output = my_input * 0.956;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else{
                    alert("You can't convert the same currency.");
                }
            }else if(my_currency == "CAD"){
                if(convert_to == "USD"){
                    my_output = my_input * 1.025;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "EUR"){
                    my_output = my_input * 0.795;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "GBP"){
                    my_output = my_input *  0.636;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "AUD"){
                    my_output = my_input *  0.980;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else{
                    alert("You can't convert the same currency.");
                }
            }else if(my_currency == "EUR"){
                if(convert_to == "USD"){
                    my_output = my_input * 1.289;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "CAD"){
                    my_output = my_input * 1.257;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "GBP"){
                    my_output = my_input * 0.800;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "AUD"){
                    my_output = my_input * 1.233;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else{
                    alert("You can't convert the same currency.");
                }
            }else if(my_currency == "GBP"){
                if(convert_to == "USD"){
                    my_output = my_input * 1.610;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "EUR"){
                    my_output = my_input * 1.249;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "CAD"){
                    my_output = my_input * 1.571;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "AUD"){
                    my_output = my_input * 1.541;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else{
                    alert("You can't convert the same currency.");
                }
            }else if(my_currency == "AUD"){
                if(convert_to == "USD"){
                    my_output = my_input * 1.045; 
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "EUR"){
                    my_output = my_input * 0.810;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "GBP"){
                    my_output = my_input * 0.648;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else if(convert_to == "CAD"){
                    my_output = my_input * 1.019;
                    document.getElementsByName("convertion_output")[0].value = my_output;
                }else{
                    alert("You can't convert the same currency.");
                }
            }else{
                alert("Fatal Error, refresh the page.");
            }
        }
    </script>
</head>

<body>
    <div id="wrapper">
        <form name="convertions">
            <select name="currency_to_convert" id="my_currency">
                <option value="USD" selected>USD</option>
                <option value="CAD">CAD</option>
                <option value="EUR">EUR</option>
                <option value="GBP">GBP</option>
                <option value="AUD">AUD</option>
            </select>
            <select name="convert_currency_to" id="convert_currency">
                <option value="USD">USD</option>
                <option value="CAD" selected>CAD</option>
                <option value="EUR">EUR</option>
                <option value="GBP">GBP</option>
                <option value="AUD">AUD</option>
            </select>
            <label for="user_input">Amount:</label>
            <input type="text" name="user_input" id="money_to_convert" />
            <label for="convertion_output">Result:</label>
            <input type="text" name="convertion_output" id="converted_input" disabled="disabled" />
            <button onclick="output_value()" id="submit_button">Submit</button>
        </form>     
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T22:52:48.197

如果按钮位于表单内，则按钮的默认行为类似于提交按钮。如果您添加 type='button'，它将不再像提交按钮一样

```
<button onclick="output_value()" type="button" id="submit_button"> 
```

您也可以只从处理程序返回 false （就像您可以使用`<input type="submit">`）来防止默认行为。

```
<button onclick="output_value(); return false" id="submit_button"> 
```

并不是说您在这里真的不需要表格，因为您没有提交它。删除表单也可以解决您的问题。

请参阅[如何防止按钮提交表单](https://stackoverflow.com/questions/932653/how-to-prevent-buttons-from-submitting-forms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:02:39.957

这并不是真正解决您问题的答案，但我只是想重构该功能。

```
/* USD to... */
var rates = {
  USD: 1,
  CAD: 0.975,
  EUR: 0.775,
  GBP: 0.620,
  AUD: 0.956
};
function output_value() {
  var my_input = parseFloat(document.getElementsByName("user_input")[0].value);
  var my_currency = document.convertions.currency_to_convert.value;
  var convert_to = document.convertions.convert_currency_to.value;
  var output = document.getElementsByName('convertion_output')[0];

  // side note. "conversion" is spelt with an 's' not a t.
  output.value = my_input / rates[my_currency] * rates[convert_to];
} 
```

它实际上可能是单行的，因为这些变量中的每一个都只使用一次，但这可能更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:56:06.867

表单正在提交，因此页面在此之后刷新。解决方法是将您的侦听器放在表单上并让提交处理程序调用它，然后返回 false 以便表单不提交。这样，如果 javascript 被禁用、不可用或无法成功运行，表单就会提交，您可以在服务器上进行转换。

一个常见的策略是让表单在没有任何脚本的情况下正常运行，然后添加脚本以尽可能避免服务器调用。为此，您需要将名称属性添加到表单控件或将 ID 属性更改为名称属性。

表单中的按钮默认是提交类型。

要“刷新页面”，您只需调用表单的 reset 方法，您可以从其提交处理程序传递对表单的引用，这样：

例如在 HTML 中：

```
<form name="convertions" onsubmit="return output_value(this)">

    ...
    <button>Submit</button> 
```

并在函数中：

```
function output_value(form) {

    // var my_currency = document.convertions.currency_to_convert.value;
    var my_currency = form.currency_to_convert.value;

    // and so on
    ...

    alert("Fatal Error, refresh the page.");
    // reset the form
    form.reset(); 

    // stop the form submitting
    return false;
} 
```

# api - 跨云存储适配器？

> ID：12397146
> 
> 赞同：27
> 
> 时间：2012-09-12T22:46:53.533
> 
> 标签：api, cloud, cloud-storage

是否存在任何用作适配器/提供者接口的 API/库/工具，用于通过通用接口访问不同的云存储服务？类似于 ODBC 或 OLE-DB 的东西，除了云存储而不是数据库。

这样，如果我编写了一个用于记笔记的前端，并且我使用了这样的 API，并让用户提供他们拥有帐户的云存储提供商的配置，那么 API 库将处理我的 cloud.Save() 调用使用特定于提供者的命令。这将允许我的前端应用程序与云存储提供商无关。

因此，也许我编写了一些 chrome 扩展程序或便携式拇指驱动器应用程序来存储笔记，或加密和存储密码等，然后你告诉它你有哪个云存储提供商的帐户，它使用它来同步。这样，您对该工具的使用不会将您与特定的云提供商联系在一起。只要您备份数据，您就可以迁移到另一个提供商，如果您对该提供商不满意或他们破产，您只需重新配置应用程序即可。

例如，WebDAV 是一个潜在的候选者，因为似乎一些存储服务提供了它，但这并不是我的想法，因为它取决于存储提供商是否提供它作为选项。我对 WebDAV 的了解也不够多，不知道它是否真的能发挥我想象的能力。但请随时将其作为一个选项发布，并附上优点/缺点以供评论/讨论。

我更想象的是每个云提供商外部的中间层。当然，由于每个提供者都提供不同的 Web 服务来与文件交互，因此中间层将为每个后端提供适配器。但在前端，它将公开一个与提供者无关的通用 API。

这种类型的东西存在吗？

即使只是一个允许您将文件存储在任何提供程序中的开源 GUI，这也意味着在其源代码中存在这样一个中间层的开始。我认为有人已经制作了一个工具，可以帮助您统一您可以从各种服务中获得的所有免费 GB。有点像云的 JBOD 层（尽管这不是本文的目标，关键是这样一个工具可以访问许多不同的服务，这意味着它已经开始了一个中间层来标准化对它们的访问）。

**不过，我的主要兴趣是个人云存储服务的抽象，这将适用于个人使用的应用程序，将存储控制权交到个人手中，以便他们可以自由地在个人云存储服务之间移动。**到目前为止，我发现的似乎更面向 CDN、网站或服务。

请为每个建议单独发布帖子，以便可以针对该建议进行投票和评论/讨论。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-15T07:19:30.697

[Kloudless](https://kloudless.com/ "无云")为几种不同的云存储 API（Dropbox、Box、GDrive、OneDrive 等）提供了一个通用 API。Kloudless 还提供流行语言的 SDK 和 UI 小部件来处理身份验证和其他用户交互。

您可以在此处找到更多信息并注册：[https ://kloudless.com/](https://kloudless.com/)

披露：我在 Kloudless 工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T22:59:38.387

Apache jclouds 提供了与云无关的抽象，具有 ComputeService 和 BlobStore 的稳定实现。

访问[https://jclouds.apache.org/](https://jclouds.apache.org/)

> Apache jclouds® 是适用于 Java 平台的开源多云工具包，让您可以自由地创建可跨云移植的应用程序，同时让您可以完全控制使用特定于云的功能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-12T23:00:36.560

Apache Libcloud：“云的统一接口”

[http://libcloud.apache.org/](http://libcloud.apache.org/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-13T19:28:03.567

几个月前，我对个人云存储聚合器服务和应用程序进行了[调查](http://codecrafter.wordpress.com/2012/09/02/cloud-storage-aggregators/)。一个似乎与您的问题有关。

[Oxtio](http://otixo.com/product)是一项连接多个云存储服务的服务，并包括一个用于访问其自己的服务的 WebDAV 服务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T04:52:41.833

每个云存储提供商都有不同的细节，这使得很难为所有（甚至部分）使用一个接口。[我们的 SecureBlackbox 产品的CloudBlackbox](http://www.eldos.com/sbb/desc-cloud.php)包为主要存储提供商（S3、Azure、Google Drive、SkyDrive/OneDrive、Dropbox）提供了一个统一的接口，重点是数据的安全性，但由于提到的细节，我们有单独的类（一个超类的后代) 为每个供应商服务。SecureBlackbox 可用于 .NET、Java、Windows 和 Delphi 上的 C++。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T02:25:59.990

查看 Boto，这是一个备受推崇的 Python 库，它在 Amazon 的 S3 和 Google Cloud Storage 之上提供了一个抽象层。

[https://github.com/boto/boto](https://github.com/boto/boto)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-27T07:23:06.857

-StorageMadeEasy (SME)
-Otixo (But they do not offer FREE tier anymore since Feb 2013)
-Joukuu
-Gladinet
-Egistec CloudHub
...

All of above allows you to connect several cloud storages, but they do not actually combine it.

If you wan to combine several personal cloud storages, you need to make it yourself, which is what I am doing for the past few months.

So far I have combined several clouds (Dropbox, Box, Google Drive, Skydrive) using their Android API/SDK, then I process the data splitting/merging/compression/encryption inside my Android application (not a good choice, just for the sake of prototype)

In the future, maybe I will add more providers that has an API, such as Amazon S3, SugarSync, but right now there is lack of manpower.

If you just want to connect multiple clouds on Android (not combining), then you can try ES File Explorer or ASTRO File Manager, and several other applications

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-08T09:16:02.250

我认为 webdav 是终极协议：

```
webdav->dropdav->dropbox
webdav->box.net
webdav->DAV-pocket->google drive
webdav->Otixo(free for 14 days)->SugarSync 
```

# php - php中包含文件的范围丢失

> ID：12397149
> 
> 赞同：3
> 
> 时间：2012-09-12T22:47:18.187
> 
> 标签：php, include, scope

有一些与此相关的帖子，但我没有看到任何接近我正在努力解决的情况。

我继承了一个相当大的代码库，原始设计师采用了一些有趣的设计方法。我正在尝试调用已定义类的方法。类文件本身设置了一些全局变量。我从一个函数中调用这个方法，我也包含了这个文件。当方法运行时，不再定义全局变量。见下文：

**我的档案：**

```
<?php //myScript.php

echo("Calling foo(): ");
foo();

function foo() {
   include '../../php/class.bar.php';
   $bar = new bar();
   $bar->doSomething();
}
?> 
```

**../../php/class.bar.php：**

```
$GLOBAL_ARRAY_ONE[0] = 'Here I am';
$GLOBAL_ARRAY_ONE[1] = 'JT';

class bar {
   public $itsFoo = array();
   public $itsBar = array();

   public function doSomething() {
      global $GLOBAL_ARRAY_ONE;
      $this->itsFoo[0] = $GLOBAL_ARRAY_ONE[0];
      $this->itsFoo[1] = $GLOBAL_ARRAY_ONE[1];

      var_dump($this->itsFoo);
   }
} 
```

所以，当我运行“myScript.php”时，输出是：`calling foo(): NULL`

我个人不会在这样的脚本中声明全局数组，但是我看不出为什么我不应该访问它们。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:53:07.183

由于您`include`在函数内的文件 -`GLOBALS`不能在那里定义（既不是 a `class`）。您可能想要做的是`include class.bar.php`外部（的`foo()`）：

```
<?php //myScript.php

include '../../php/class.bar.php';

echo("Calling foo(): ");
foo();

function foo() {   
   $bar = new bar();
   $bar->doSomething();
}
?> 
```

# php - 在javascript循环中睡觉？

> ID：12397150
> 
> 赞同：0
> 
> 时间：2012-09-12T22:47:36.897
> 
> 标签：php, jquery, loops, sleep

我将首先解释我正在尝试做什么:)

我的应用程序是使用 PHP（Zend 框架）和 Javascript 实现的。我想为我的申请制作一份问卷，到目前为止，我已经完成了以下工作：

我的页面由一系列`<div class='question #'>`元素组成，其中 # 表示特定问题的索引。例如，我的 HTML 如下所示：

```
<div class="question 1 active">
</div>
<div class="question 2">
</div>
<div class="question 3">
</div>
.
.
.
etc. 
```

现在用户应该在特定的预选时间看到每个问题，直到问题变为可能的答案，并且用户应该根据他认为答案是否正确单击“是”或“否”。一次只有一个`<div class="question #">`元素处于活动状态，其他元素都有`display:none;`。在问题更改为下一个问题后`active`，-属性将从当前问题中删除并设置为下一个问题，以便用户循环所有问题。

对于每个`question/possible answer`-pair，我关联了两个整数，它们指定用户有多长时间查看问题以及用户有多长时间来回答问题。让我举个例子：

用户看到这个（或多或少）：

```
QUESTION 1/10

The name of the President of U.S.? -------------- 5 sec 
..
The name of the President of U.S.? -------------- 4 sec
..
The name of the President of U.S.? -------------- 3 sec
..
etc. THE TIME ENDS and the question changes to answer mode(buttons YES/NO appear also in this part):

Bruce Wayne? ------------------------------7 sec 
 [YES] [NO]  
...
Bruce Wayne? ------------------------------6 sec 
 [YES] [NO]  
...
Bruce Wayne? ------------------------------5 sec 
 [YES] [NO]  
...
etc. 
```

当 ANSWER 阶段的时间用完或用户单击任一按钮 YES/NO 时，jQuery`ACTIVE`从当前问题中删除并将其设置为下一个问题。用户单击的值也存储在隐藏元素中。这个过程应该在整个问卷调查过程中一直重复。

现在关于问答阶段的计时器。它们不是固定的，而是为每个问题指定的。例如，`question1`可能有问答时间（以秒为单位）`5/10`等等。

现在我的问题是......如何在 javascript 端实现这个？？？当我在 javascript 中循环遍历包含有关问题的所有信息（PHP 在服务器中设置）的数组时，我的问题就出现了......我应该能够遍历`question/answer`客户端中的所有 -pairs，然后在每次迭代停止时从移动到下一个（下一个问题）的迭代，直到用户单击答案或时间用完。但问题是，据我所知，我不能在 for-loop 或 jQuery 的 .each 中睡觉......你看到我的问题了吗？:)

任何有关实施的建议表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:50:58.493

将 for 循环更改为通过 setTimeout 调用的递归函数

```
var timeLeft = 10,
    countdown = function(){
        $('#mySpan').html('The name of the President of U.S.? -------------- ' + timeLeft + ' sec');
        timeLeft -= 1;

        if (timeLeft) {
            setTimeout(countdown, 1000);
        }
    };

countdown(); 
```

采用该逻辑，您可以扩展它以在 X 秒后更改您的问题等，然后您可以通过接收参数来扩展它，例如`maxTime`，显示输入字段或单选按钮集。`questionText``questionType`

快速演示：http: [//jsfiddle.net/AlienWebguy/aW9mH/](http://jsfiddle.net/AlienWebguy/aW9mH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:56:04.573

这是我最近一直在尝试的一种古怪的方法。我没有必要建议您在没有信心自己理解的情况下做这样的事情，但是玩起来很整洁。

```
function countdown(loops, pause, id) {
    (function setup(timer, el, text) {
        (function loop(invalid) {
            (function check(stop) {
                return stop || !loops-- || timer(loop, pause);
            })(invalid || !loops, el[text] = loops);
        })(!loops || !pause);
    })(setTimeout, document.getElementById(id) || {}, 'innerHTML');
}​

countdown(10, 1000, 'timer'); 
```

[http://jsfiddle.net/userdude/ghN3m/1](http://jsfiddle.net/userdude/ghN3m/1)

这看起来有点奇怪，但尝试起来很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T23:27:13.077

Javascript 可以使网站反应性而**不是**主动性。

所以它不应该只是死了。

如果它真的死了，你的客户就***出门了***

# c# - 列出方法并在运行时调用它们

> ID：12397156
> 
> 赞同：0
> 
> 时间：2012-09-12T22:48:33.083
> 
> 标签：c#, reflection, singleton, invoke

情况如下：

我想创建一个测试应用程序，它能够检索 dll 中的所有类和方法，并允许我在运行时调用它们。

我所拥有的是这样的：

假设我有这些课程：

```
public static class FirstManagerSingleton
{
    public static SecondManager Instance
    {
       return mInstance; // which is a SecondManager private static object
    }
}

public class SecondManager
{
    public Service1 service1 {get; private set;}
    public Service2 service2 {get; private set;}
    ...
}

public class Service1
{
    public bool Method1()
    {
      return true;
    }
    public int Method2()
    {
      return 1;
    }
    ...
}

public class Service2
{
    public bool Method1()
    {
      return false;
    }
    public int Method2(int aNumber)
    {
      return aNumber - 1;
    }
    ...
} 
```

我希望能够选择每个“服务”类，调用任何方法并显示其结果。

是否可以使用反射来做到这一点？如果它不是多层的（2 个经理类），我不会那么挣扎。事实是我需要通过如下所示的调用访问服务类：

```
FirstManagerSingleton.Instance.Service1.Method1; 
```

到目前为止，我已经能够加载程序集并检索几乎所有方法并打印它们。

```
Assembly assembly = Assembly.LoadFrom("assemblyName");

// through each type in the assembly
foreach (Type type in assembly.GetTypes())
{
  // Pick up a class
  if (type.IsClass == true)
  {
    MethodInfo[] methodInfo;
    Console.WriteLine("Found Class : {0}", type.FullName);
    Type inter = type.GetInterface("I" + type.Name, true);
    if (inter != null)
    {
      methodInfo = inter.GetMethods();
      foreach (MethodInfo aMethod in test2)
      {
        Console.WriteLine("\t\tMethods : " + aMethod);
      }
    }
  }
} 
```

从那里开始，我真的不知道接下来要做什么来调用这些方法。顺便说一句，这些方法可以接受一些参数并有一些返回类型。

我正在使用该接口来检索方法，以便从从另一个接口继承的方法中进行过滤。

我希望我足够清楚。抱歉，我无法发布真正的代码示例，但我想这足以说明这个概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:26:15.210

您应该从程序集中获取类，然后递归获取属性值并执行方法。下面是一些简单的代码，您应该根据自己的需要定制：

```
 public void ExecuteAssembly(string anAssemblyName)
    {
        Assembly assembly = Assembly.LoadFrom(anAssemblyName);

        foreach (Type type in assembly.GetTypes())
        {
            if (type.IsClass)
            {
                TypeAttributes atts = type.Attributes;
                if ((atts & TypeAttributes.Sealed) != 0) // identify the static classes
                    ExecuteEverything(type);
            }
        }
    }

    private void ExecuteEverything(Type type)
    {
        // get only the public STATIC properties and methods declared in the type (i.e. not inherited)
        PropertyInfo[] props = type.GetProperties(BindingFlags.Public | BindingFlags.Static | BindingFlags.DeclaredOnly);
        MethodInfo[] meths = type.GetMethods(BindingFlags.Public | BindingFlags.Static 
            | BindingFlags.DeclaredOnly);
        // execute the methods which aren't property accessors (identified by IsSpecialMethod = true)
        foreach (MethodInfo aMeth in meths)
            if (!aMeth.IsSpecialName)
                Execute(aMeth, type);
        // for each property get the value and recursively execute everything
        foreach (PropertyInfo aProp in props)
        {
            object aValue = aProp.GetValue(type, null);
            if (aValue != null)
                RecursivelyExecuteEverything(aValue);
        }
    }

    private void RecursivelyExecuteEverything(object aValue)
    {
        Type type = aValue.GetType();
        // get only the public INSTANCE properties and methods declared in the type (i.e. not inherited)
        PropertyInfo[] props = type.GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly);
        MethodInfo[] meths = type.GetMethods(BindingFlags.Public | BindingFlags.Instance
            | BindingFlags.DeclaredOnly);
        // execute the methods which aren't property accessors (identified by IsSpecialMethod = true)
        foreach (MethodInfo aMeth in meths)
            if (!aMeth.IsSpecialName)
                Execute(aMeth, aValue);
        // for each property get the value and recursively execute everything
        foreach (PropertyInfo aProp in props)
        {
            object newValue = aProp.GetValue(aValue, null);
            if (newValue != null)
                RecursivelyExecuteEverything(newValue);
        }

    }

    private void Execute(MethodInfo aMeth, object anObj)
    {
        // be careful that here you should take care of the parameters. 
        // this version doesn't work for Method2 in Service2, since it 
        // requires an int as parameter
        aMeth.Invoke(anObj, null);
    } 
```

# c++ - 用于 C++ 的类型安全构建系统（类似于 SBT）

> ID：12397157
> 
> 赞同：13
> 
> 时间：2012-09-12T22:48:34.720
> 
> 标签：c++, cmake, sbt, build-automation

在使用 Scala 的简单构建工具 (SBT) 并喜欢它之后，我正在开发一个广泛使用 CMake 的 C++ 项目。CMake 文件相当复杂，修改它们甚至理解它们都非常痛苦。相比之下，我发现即使是大型项目的 SBT 配置也是可读的，我认为这是由于静态类型和不变性。

是否有任何努力将 SBT 风格的优点带入 C++？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:46:54.577

使用 SCons，您拥有 Python 的类型安全性——因此只是动态的运行时类型安全性。其他任何事情都取决于您的 IDE（即静态代码分析）。因此，我认为 SBT 有其优势，因为您拥有 Scala 的编译时类型安全性。

但对于 C/C++，我认为 SCons 更适合（我是 SConsolidator 的作者 - 所以我可能有偏见）。它具有内置扫描器来检测包含依赖项和生成器以生成目标文件、静态和共享库——SBT 目前没有的所有东西——至少据我所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:55:09.213

我和它一起工作`boost`了很长时间，我非常喜欢它，所以也许我夸大了这一点，但你应该看到`boost.build`它非常容易并且适用于非常大的项目（比如`boost`它自己）。

# javascript - 如何获得可滚动 div 的可见尺寸？

> ID：12397158
> 
> 赞同：1
> 
> 时间：2012-09-12T22:48:40.503
> 
> 标签：javascript, jquery

我正在尝试获取 div 的可见高度，但我找不到这样做的方法。 [http://jsfiddle.net/MVupa/1/](http://jsfiddle.net/MVupa/1/)

甚至图书馆碎片：http: [//larsjung.de/fracs/](http://larsjung.de/fracs/)

似乎没有给我正确的号码：http: [//jsfiddle.net/MVupa/2/](http://jsfiddle.net/MVupa/2/)

有任何想法吗？

（最终目标是根据窗口高度动态调整元素最大高度。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:01:14.933

这就是我想出的：[jsFiddle](http://jsfiddle.net/MVupa/4/)

```
$('.height').text($('.inner').height())
$('.scrollHeight').text($('.inner')[0].scrollHeight)
$('.inner').height($('.outer').height());
$('.visibleHeight').text($('.inner').height()); 
```

你可以将它设置为一个`$(window)resize();`函数。

# maven - 我可以阻止 maven 解决本地依赖关系吗？

> ID：12397161
> 
> 赞同：1
> 
> 时间：2012-09-12T22:49:10.477
> 
> 标签：maven

这是为了测试我设置的远程 maven 存储库是否正常运行，我想停止 maven 在本地（./m2）查找 jar，并且只从远程存储库中获取它们。关于如何实现这一目标的任何想法表示赞赏

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:01:51.017

您可以简单地删除您的 .m2/repository。

否则，当您构建项目时，您可以使用 -U 选项来更新快照。

你也可以使用 maven 依赖插件：dependency:purge-local-repository。您将在插件网页上找到更多详细信息：[http ://maven.apache.org/plugins/maven-dependency-plugin/](http://maven.apache.org/plugins/maven-dependency-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:18:55.940

您可以查看与清除项目依赖项相关的这篇[文章](http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)并重新解决它们。
删除`.m2`不是一个好的选择，因为您还将删除所有其他 jar，并且您每次都这样做。
`-U`选项将每次强制更新，这也可能适合您。

# c# - JSON 的 HttpClient PostAsync

> ID：12397167
> 
> 赞同：0
> 
> 时间：2012-09-12T22:49:50.317
> 
> 标签：c#, json, windows-8, http-post, httpclient

我正在尝试使用 Google OAuth，并且我已经完成了第一部分，但现在它希望我发布以下内容：

> 代码=client_id=client_secret=redirect_uri=grant_type=authorization_code

目前我正在尝试做：

```
var http = new HttpClient();
http.MaxResponseContentBufferSize = Int32.MaxValue;
var response = await http.GetStringAsync(uri); 
```

这将发送但收到一个错误，因为它要求我进行 Post 发送（可以使用 PostAsync），但我没有要发送到“POST”的内容，它应该返回一个 JSON Feed ...

有任何想法吗？

# windows-phone-7 - 使用 ListBox 从服务器延迟加载数据

> ID：12397168
> 
> 赞同：0
> 
> 时间：2012-09-12T22:49:51.703
> 
> 标签：windows-phone-7, events, asynchronous, listbox, lazy-loading

相当简单的 Windows Phone 问题，但在网上找不到任何关于它的信息。

我想在用户滚动到 a 的末尾（最初包含 100 个项目）时触发一个事件`ListBox`，以便我可以从我的 API 异步加载更多项目。

IntelliSense 没有显示任何我认为有用的事件 - 也许这里有人可以向我展示如何拥有这种功能的正确方向？

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:47:53.077

使用[此处](http://blogs.msdn.com/b/slmperf/archive/2011/06/30/windows-phone-mango-change-listbox-how-to-detect-compression-end-of-scroll-states.aspx)给出的内容，您可以检测到滚动的结束并在代码后面触发一个事件，该事件将调用更多项目。一旦您将它们添加到您的`Observable Collection`哪个将绑定到您的列表框的 itemsource。项目将自动出现。我希望它有帮助:)

# macos - 如何从 Mac 上的终端关闭打开的端口？

> ID：12397175
> 
> 赞同：257
> 
> 时间：2012-09-12T22:50:45.657
> 
> 标签：macos, port

我从 java 类中打开端口 #5955 以与客户端通信。完成后如何关闭此端口？还有哪个命令可以告诉我端口是打开还是关闭？

* * *

## 回答 #1

> 赞同：496
> 
> 时间：2013-07-17T14:48:05.357

1.  找出占用您想要释放的端口号（例如 5955）的进程 ID (PID)

    ```
    sudo lsof -i :5955 
    ```

2.  使用其 PID 杀死当前正在使用该端口的进程

    ```
    sudo kill -9 PID 
    ```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-10-06T05:55:14.260

要查找该过程，请尝试：

```
sudo lsof -i :portNumber 
```

使用其 PID 杀死当前正在使用该端口的进程

```
kill PID 
```

然后检查端口是否关闭。如果没有，请尝试：

```
kill -9 PID 
```

如果前一个不起作用，我只会执行以下操作

```
sudo kill -9 PID 
```

只是为了安全。再次取决于您打开端口的方式，这可能无关紧要。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2018-12-19T05:18:30.603

在 2018 年，这对我使用 MacOS HighSierra 有用：

`sudo lsof -nPi :yourPortNumber`

然后：

`sudo kill -9 yourPIDnumber`

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2018-11-10T07:14:10.780

很简单的找到5900端口：

```
sudo lsof -i :5900 
```

然后将 59553 视为 PID

```
sudo kill 59553 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2012-09-12T22:57:26.977

无论您如何打开端口，都以相同的方式关闭它。例如，如果您创建了一个套接字，将其绑定到端口 0.0.0.0:5955，并调用 listen，关闭同一个套接字。

您也可以直接终止打开端口的进程。

如果您想找出哪个进程打开了端口，请尝试以下操作：

```
lsof -i :5955 
```

如果你想知道一个端口是否打开，你可以执行相同的 lsof 命令（如果任何进程打开它，它是打开的；否则，它不是），或者你可以尝试连接它，例如：

```
nc localhost 5955 
```

如果它立即返回而没有输出，则端口未打开。

值得一提的是，从技术上讲，它不是开放的端口，而是主机：端口组合。例如，如果您以 10.0.1.2 的身份插入 LAN，则可以将套接字绑定到 127.0.0.1:5955 或 10.0.1.2:5955，其中一个不会影响另一个，或者您可以绑定到 0.0.0.0 :5955 同时处理两者。您可以查看计算机的所有 IPv4 和 IPv6 地址`ifconfig`您可以使用该命令

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2019-11-06T10:01:08.220

一个班轮是最好的

```
kill -9 $(lsof -i:PORT -t) 2> /dev/null 
```

示例：在 mac 上，想清除端口 9604。以下命令就像一个魅力

```
 kill -9 $(lsof -i:9604 -t) 2> /dev/null 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-11-10T13:11:47.447

您还可以使用第一个命令来终止拥有特定端口的进程：

```
sudo netstat -ap | grep :<port_number> 
```

例如，假设这个进程持有TCP ***8000***端口，然后运行命令：

```
sudo netstat -ap | grep :8000 
```

***将输出与持有端口8000***的进程对应的行，例如：

```
tcp  0  0 *:8000   *:* LISTEN  4683/procHoldingPort 
```

在这种情况下，***procHoldingPort***是打开端口的进程的名称，***4683***是它的 pid，***8000***（注意它是 TCP）是它持有的端口号（您希望关闭它）。

然后按照上面的例子杀死进程：

```
kill  4683 
```

正如其他人在这里提到的那样，如果这不起作用（您可以尝试使用 kill 和 -9 作为参数）：

```
kill -9 4683 
```

同样，一般来说，如果可以的话，最好避免发送`SIGKILL`(-9)。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-03-06T08:34:45.263

如上所述，我使用`lsof`组合 with ；`kill`但是写了一个快速的小 bash 脚本来自动化这个过程。

使用此脚本，您可以`killport 3000`在任何地方简单地键入，它会杀死在 port 上运行的所有进程`3000`。

[https://github.com/xtrasimplicity/killport](https://github.com/xtrasimplicity/killport)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-10-27T07:59:45.723

为此，我创建了一个函数。

```
function free_port() {
    if [ -z $1 ] 
    then
        echo no Port given
    else
        PORT=$1;
        PID=$(sudo lsof -i :$PORT) # store the PID, that is using this port 

        if [ -z $PID ] 
        then
            echo port: $PORT is already free.
        else
            sudo kill -9 $PID # kill the process, which frees the port
            echo port: $PORT is now free.
        fi
    fi
}

free_port 80 # you need to change this port number 
```

在您的终端中复制并粘贴这段代码应该可以释放您想要的端口。请记住在最后一行更改端口号。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-12-08T13:09:15.690

试试下面，假设正在运行的端口是`8000`：

```
free-port() { kill "$(lsof -t -i :8000)"; } 
```

[我在这里](https://medium.freecodecamp.org/find-and-kill-port-processes-on-a-mac-using-bash-c5e95b9e704e)找到了参考

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-09-08T13:46:47.280

这似乎对我有用。只需将 your_port_number 更改为您要停止的端口号。

sudo lsof -t -i tcp:your_port_number | xargs 杀死 -9

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-09-22T06:46:47.683

使用命令查找进程 ID

```
lsof -n -i4TCP:8080 
```

得到processId后

```
sudo kill -9 processID 
```

然后提供您的系统密码。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-09-28T06:03:48.227

当打开端口的程序退出时，端口会自动关闭。如果您终止运行此服务器的 Java 进程，则应该这样做。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-07-31T11:52:37.050

1.  首先找出占用了所需端口的Procees id（pid）。（例如5434）

    ps辅助| grep 5434

2.杀死那个进程

```
 kill -9 <pid> 
```

# java - 参数化运行器中的 Junit 测试用例构造函数调用

> ID：12397176
> 
> 赞同：3
> 
> 时间：2012-09-12T22:50:46.837
> 
> 标签：java, junit, parameterized-unit-test, junit-runner

我写了一个长参数化测试，其中一个参数是一个构造函数调用，使用双括号语法为二维数组的每一行构造一个不同的对象：

```
Object[][] data = new Object[][] {
{ 1, 2, 3, new Blah() {{ setA(); }} }
{ 1, 2, 3, new Blah() {{ setB(); }} }
... 
```

由于 JUnit 的理念是在每个 @Test 上调用测试用例构造函数，我假设它会对参数化测试执行相同的操作 - 但我看到它只是调用该构造函数（为参数化测试定义的构造函数）每行一次，而不是每行每次测试一次。

因此，测试字段在全局范围内运行，并且测试相互影响。我想知道是否有一种方法可以强制运行器为每个测试调用构造函数，就像常规的 JUnit 运行器一样。谷歌和 JUnit 页面在这个案例上没有帮助我。我真的不想重写整个测试，在这一点上它是广泛且相当可读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T02:27:53.087

我不确定我是否完全跟随你，但是当测试运行时，会发生这种情况：

1.  您使用 @Parameters 方法注释的方法只被调用一次。
2.  为注释方法返回的集合中的每一行创建一个测试运行程序实例。
3.  **使用其构造函数为参数集合中的每一行**实例化测试，但它在从初始调用缓存的相应参数值行中传递。

您可以通过单击[此处](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/runners/Parameterized.java#L314)和[此处](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/runners/Parameterized.java#L192)查看发生这种情况的位置。如果您在调用之间改变状态（使用静态方法或其他方法）期望看到奇怪的事情。

编辑：在代码中四处寻找之后，我更好地理解了你现在在问什么。我刚刚使用 JUnit 4.10 调试了一个参数化测试，它确实在每次测试中每行调用一次构造函数。

# c# - Windows 8 Live Tile - 删除文本和小图标？

> ID：12397177
> 
> 赞同：3
> 
> 时间：2012-09-12T22:50:50.187
> 
> 标签：c#, xaml, windows-8, microsoft-metro, monogame

当您完成游戏中的不同关卡时，我们正在使用`TileWideImage`和`TileSquareImage`适当的 XML（如此[处](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)所述）在我们的 Windows 8 游戏中设置我们的自定义图块。

我们的磁贴的设计方式，我们根本不希望显示任何文本或图标（除了我们为每个版本的磁贴创建的单个图像）。

出于某种原因，`TileWideImage`将我们应用程序的小图标（我认为是 30x30 像素）放在左下方。我们还注意到，当您安装应用程序时，我们的默认图标上有文字。 *这些都不*是所希望的。

有没有办法得到我们想要的行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T00:47:08.867

您可以通过应用程序清单关闭默认磁贴上的文本：

![在此处输入图像描述](../Images/5b36eaca02182d6fdbbbcf03bc6c2cc9.png)

但是，如果您发送磁贴更新，则可以在[XML 架构](http://msdn.microsoft.com/en-us/library/windows/apps/br212859.aspx)中通过or标记的`branding`属性覆盖该设置。[`visual`](http://msdn.microsoft.com/en-us/library/windows/apps/br212857.aspx)[`binding`](http://msdn.microsoft.com/en-us/library/windows/apps/br212854.aspx)

在这种情况下，您需要发送类似于以下内容的磁贴更新：

```
<tile>
    <visual branding="none">
        <binding template="TileWideText03">
            <text id="1">Hello World! My very own tile notification</text>
        </binding>
        <binding template="TileSquareText04">
            <text id="1">Hello World! My very own tile notification</text>
        </binding>
    </visual>
</tile> 
```

顺便说一句，[App Tiles 和 Badges Sample](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)是一个很好的资源，可以对此类磁贴进行快速测试、确认行为等。

# c# - 在 Linq 中 LEFT JOIN 时的非 Nullable 值类型问题

> ID：12397179
> 
> 赞同：1
> 
> 时间：2012-09-12T22:50:53.210
> 
> 标签：c#, linq

我将从事一个需要使用**Linq**的 WinForms 项目，但我对此一无所知，所以我才开始学习。

在阅读了有关 Linq 的教程后，我使用Microsoft Windows SDK 附带的工具创建了`System.Data.Linq.DataContext`该工具。`SqlMetal`我用作示例的数据库是**"Northwind"**。

我已经能够进行如下简单的查询：

```
Northwind db = new Northwind("Data Source=local;Initial Catalog=Northwind;Integrated Security=True");

var query = from c in db.Customers
            join o in db.Orders on c.CustomerID equals o.CustomerID 
            select new
            {
                Customer_ID = c.CustomerID,
                Customer_Name = c.ContactName,
                Order_ID = o.OrderID
            }; 
```

然后我在 a 中显示结果，`DataGridView`一切顺利。

但是现在我面临一个我无法解决的问题。

我试图修改以前的查询以制作 a `LEFT OUTER JOIN`，所以我所做的如下：

```
 var query = from c in db.Customers
            join o in db.Orders on c.CustomerID equals o.CustomerID into j
            from or in j.DefaultIfEmpty()
            select new
            {
                Customer_ID = c.CustomerID,
                Customer_Name = c.ContactName,
                Order_ID = or.OrderID
            }; 
```

但是，当我尝试在`DataGridView`错误中显示这些数据集时：

```
The null value cannot be assigned to a member with type System.Int32 which is a non-nullable value type. 
```

我知道这个问题是由没有“订单”的“客户”引起的，因此系统会尝试为`null`变量`int`赋值。

但是，**我怎样才能`LEFT OUTER JOIN`没有这个错误？**

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T18:12:38.247

您不应该将类型转换为字符串。简单地将其转换为等效的可为空类型：

```
var query = from c in db.Customers
            join o in db.Orders on c.CustomerID equals o.CustomerID into j1
            from or in j1.DefaultIfEmpty()
            select new
            {
                Customer_ID = c.CustomerID,
                Customer_Name = c.ContactName,
                Order_ID = (int?)or.OrderID
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:55:12.253

我想我刚刚找到了答案：

```
var query = from c in db.Customers
            join o in db.Orders on c.CustomerID equals o.CustomerID into j1
            from or in j1.DefaultIfEmpty()
            select new
            {
                Customer_ID = c.CustomerID,
                Customer_Name = c.ContactName,
                Order_ID = or.OrderID == null ? "[null]" : or.OrderID.ToString()
            }; 
```

但如果有人有更好的答案，我会很感激

# python - 用正则表达式替换字符串内容

> ID：12397182
> 
> 赞同：0
> 
> 时间：2012-09-12T22:51:02.633
> 
> 标签：python, html, regex

我正在尝试删除我从网页中寻找的数据周围的所有 html，这样剩下的就是我可以输入数据库的原始数据。所以如果我有类似的东西：

```
<p class="location"> Atlanta, GA </p> 
```

以下代码将返回

```
Atlanta, GA </p> 
```

但我所期望的不是返回的。[这是我在这里](https://stackoverflow.com/questions/2582138/finding-and-replacing-elements-in-a-list-python)找到的基本问题的更具体的解决方案。任何帮助将不胜感激，谢谢！代码如下。

```
def delHTML(self, html):
    """
    html is a list made up of items with data surrounded by html
    this function should get rid of the html and return the data as a list
    """

    for n,i in enumerate(html):
        if i==re.match('<p class="location">',str(html[n])):
            html[n]=re.sub('<p class="location">', '', str(html[n]))

    return html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:08:18.303

正如评论中正确指出的那样，您应该使用特定的库来解析 HTML 和提取文本，以下是一些示例：

*   [html2text](http://www.aaronsw.com/2002/html2text/)：功能有限，但正是您所需要的。
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)：更复杂，更强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:18:56.177

假设您只想提取`<p class="location">`标签中包含的数据，您可以使用 Python`HTMLParser`模块（一个简单的 HTML SAX 解析器）的快速且肮脏（但正确）的方法，如下所示：

```
from HTMLParser import HTMLParser

class MyHTMLParser(HTMLParser):
    PLocationID=0
    PCount=0
    buf=""
    out=[]

    def handle_starttag(self, tag, attrs):
        if tag=="p":
            self.PCount+=1
            if ("class", "location") in attrs and self.PLocationID==0:
                self.PLocationID=self.PCount

    def handle_endtag(self, tag):
        if tag=="p":
            if self.PLocationID==self.PCount:
                self.out.append(self.buf)
                self.buf=""
                self.PLocationID=0
            self.PCount-=1

    def handle_data(self, data):
        if self.PLocationID:
            self.buf+=data

# instantiate the parser and fed it some HTML
parser = MyHTMLParser()
parser.feed("""
<html>
<body>
<p>This won't appear!</p>
<p class="location">This <b>will</b></p>
<div>
<p class="location">This <span class="someclass">too</span></p>
<p>Even if <p class="location">nested Ps <p class="location"><b>shouldn't</b> <p>be allowed</p></p> <p>this will work</p></p> (this last text is out!)</p>
</div>
</body>
</html>
""")
print parser.out 
```

输出：

```
['This will', 'This too', "nested Ps shouldn't be allowed this will work"] 
```

这将提取任何`<p class="location">`标签中包含的所有文本，剥离其中的所有标签。单独的标签（如果不是嵌套的 - 无论如何都不应该允许用于段落）将在`out`列表中具有单独的条目。

请注意，对于更复杂的需求，这很容易失控；在这些情况下，DOM 解析器更合适。

# r - 从 Access 导入 R 中的数据

> ID：12397183
> 
> 赞同：4
> 
> 时间：2012-09-12T22:51:13.397
> 
> 标签：r, import

我正在尝试将表从 Microsoft Access (.accdb) 导入到 R。

我使用的代码是：

```
library(RODBC)

testdb <- file.path("modelEAU Database V.2.accdb")

channel <- odbcConnectAccess2007(testdb)

WQ_data <- sqlFetch(channel, "WaterQuality") 
```

似乎它可以工作，但问题是导入日期和时间数据。在 Access 文件中有两列，一列带有日期字段 (dd/mm/yyyy)，另一列带有时间字段 (hh:mm:ss)，当我将它们导入 R 时，在日期列中显示日期为 yyyy- mm-dd 格式并进入时间列，格式为 1899-12-30 hh:mm:ss。此外，R 无法将这些格式识别为变量，我无法使用它们。

另外，我尝试了 mdb.get 功能，但效果不佳。

有人知道如何从定义日期和时间格式的 Access 导入 R 中的数据吗？知道如何将 Access 文件作为文本文件导入吗？

注意：我正在使用 Office 2010 和 R 版本 2.14.1

非常感谢先进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:09:04.400

查看在`str`数据框上运行的结果。这将告诉您更多有关数据实际存储方式的信息。通常，日期和时间存储为起始日期的数字（Access 使用 1899 年 12 月 30 日，因为 MS 认为 1900 年是闰年）。有时它存储为自起源以来的天数，时间表示为一天的一小部分，有时它是自起源以来的秒数（或毫秒）。

您将需要查看数据是如何发送的（无论是 access 和 odbc 先转换为字符串，还是发送几天或几秒），然后您将对如何在 R 中使用这些（可能是转换）有更好的感觉。

[2004 年 6 月版的R News](http://cran.r-project.org/doc/Rnews/) （R Journal 的前身）中有一篇文章详细介绍了在 R 中处理日期和时间的常用方法，可能对您非常有用。

你应该决定你想要结束什么，一列 DateTimes，两列数字，两列字符，等等。

# sql - SQL 如何从关系数据库中的游戏中获取玩家 VS 玩家游戏计数

> ID：12397184
> 
> 赞同：1
> 
> 时间：2012-09-12T22:51:18.660
> 
> 标签：sql, select

我正在编写一个应用程序来保持飞镖得分。我创建了一个关系数据库，如下所示：

游戏信息 gameId | numberOfPlayer | 总局数 | 游戏类型
0 | 2 | 13 | 0
1 | 2 | 14 | 0
2 | 2 | 20 | 0
3 | 3 | 16 | 0

PlayersByGame 游戏 ID | 玩家ID | 局| mpr
0 | 0 | 13 | 1.538
0 | 1 | 13 | 1.651
1 | 0 | 14 | 1.500
1 | 1 | 14 | 2.012
2 | 0 | 20 | 1.658
2 | 2 | 20 | 2.123
3 | 2 | 16 | 2.001
3 | 1 | 16 | 1.325
3 | 0 | 16 | 1.001

球员
姓名 | 伊德
戴农 | 0
安迪 | 1
基思 | 2

我熟悉简单的 SQL 查询，但不知道如何获取与玩家 (Andy) 对战的玩家 (Dainon) 玩过的游戏数量，而游戏中没有超过 2 名玩家且只有 Dainon 和 Andy 玩过互相反对。在查询时，我有 Dainon 和 Andy 的玩家 ID。

任何人都可以提供有关我如何编写 SELECT 语句来做到这一点的任何见解。

我从错误的查询开始，例如：

```
SELECT * FROM PlayersByGame WHERE playerId LIKE 0 and playerId LIKE 1;

SELECT gameId, numberOfPlayers, totalInnings, gameType
FROM GameInformation
WHERE (numberOfPlayers = 2)
UNION
SELECT gameId, playerId, innings, mpr
FROM PlayersByGame
WHERE (playerId = 0)
UNION
SELECT gameId, playerId, innings, mpr
FROM PlayersByGame AS PlayersByGame_1
WHERE (playerId = 1) 
```

谢谢，感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:03:32.890

我会尝试类似的东西（未测试）

```
SELECT count(gi.id)
FROM GameInformation gi
JOIN PlayersByGame pbg1 ON pbg1.gameId=gi.id AND pbg1.playerId = {idPlayer1}
JOIN PlayersByGame pbg2 ON pbg2.gameId=gi.id AND pbg2.playerId = {idPlayer2}
WHERE gi.numberOfPlayer = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:11:35.007

尝试这个。点击她获取它的[Sqlfiddle](http://www.sqlfiddle.com/#!2/19bc5/14)版本

```
select count(*) as NumOfGames
from
(
select gameid,count(*)
from 
(
    select gameId,playerId
    from PlayersByGame
    where gameId in
    (
        SELECT gameId from GameInformation
        where numberOfPlayer =2
    )
    AND
    playerId in
    (
        select id from Players
        where Name in('Dainon','Andy')
    ) 
) as A
group by A.gameId
having count(*) =2
) as B 
```

# php - 使用 PHP 输出 UTF-8 特殊字符

> ID：12397186
> 
> 赞同：2
> 
> 时间：2012-09-12T22:52:01.237
> 
> 标签：php, mysql, character-encoding

我正在尝试`JSON_encode`从 MySQL 数据库中获取数据。数据库中的字符应如此。

例如，一些数据包含以下内容：*è*

当我打印到浏览器时，这是所有具有特殊字符的项目的结果：

```
{"category":null} 
```

这是我用来测试的代码的非常基本的淡化版本：

```
$sql = mysql_query("SELECT category FROM master_cat ORDER BY category ASC");
    while ($row = mysql_fetch_assoc($sql))
        $output[] = $row;

print(json_encode($output)); 
```

当我在网页上阅读 JSON 而不是时，如何让实际数据出现在浏览器中`null`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:58:00.253

您可以`utf8_encode`在文本字段上使用，但您可以检查数据是否确实存在？也许以 HTML 格式而不是 JSON 编码输出数据？因为在我的系统上 UTF8 要么被识别，要么给出错误，要么某些字符被截断。

NULL 数据库数据丢失的气味。

如果数据在那里，那么：

```
mysql_query('SET NAMES utf8;');
$sql = mysql_query("SELECT category FROM master_cat ORDER BY category ASC");
while ($row = mysql_fetch_assoc($sql))
    $output[] = array_map('utf8_encode', $row);

print(json_encode($output)); 
```

您可能还想明确指定 MIME 类型和字符集：

```
Header('Content-Type: application/json; charset=UTF-8'); 
```

请参阅[什么是正确的 JSON 内容类型？](https://stackoverflow.com/questions/477816/the-right-json-content-type)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-25T16:40:33.467

您应该使用 [JSON_UNESCAPED_UNICODE](http://www.php.net/manual/en/json.constants.php)对多字节 Unicode 字符进行逐字编码（默认转义为 \uXXXX）。自 PHP 5.4.0 起可用。在这种情况下：

```
echo json_encode($output, JSON_UNESCAPED_UNICODE); 
```

# css - Firebug 中缺少 CSS 规则中的样式

> ID：12397193
> 
> 赞同：1
> 
> 时间：2012-09-12T22:52:45.423
> 
> 标签：css, firebug

如果 CSS 规则中缺少样式，这意味着什么？它对元素也没有影响。

firebug 中有一个空的 CSS 规则。我知道如果某种样式被覆盖，则样式会被交叉，但我不确定如果样式在 css 规则中丢失意味着什么。我创建了规则来影响下面元素的 padding-top。

```
<div id="leadspace-head" class="alternate">
  <div id="leadspace-body">
    <ul id="navigation-trail">
      <li>test</li>
    </ul> 
    <h1 class="small">Title for this page</h1>
  </div>
</div> 
```

这是场景。对于上面的 html 代码，我在下面有 3 个 css 规则。第一个在正文中，其他 2 个规则可以在 css 文件中找到。第二条规则覆盖第三条规则。我添加了第一条规则来覆盖第二条规则，但它没有效果并在萤火虫中显示空规则。

正文中的 CSS

```
.landing-page #leadspace-head.alternate #navigation-trail + h1 {
  padding-top: 9px !important;
} 
```

mystyle.css 中的 CSS

```
.landing-page #leadspace-head.alternate #navigation-trail + h1 {
  padding-bottom: 10px;
  padding-top: 9px;
}

.landing-page #leadspace-head #navigation-trail + h1 {
  padding-top: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:29:40.793

你们的风格似乎相互覆盖了很多。您可能想要研究更好地使用 CSS 中的继承规则的方法。

除此之外，尝试将您的规则重写为：

```
#navigation-trail h1.small { padding-top: 9px; } 
```

这将专门针对那些属于您的 #navigation-trail 列表元素的 H1 元素。

# wpf - Silverlight Scrollviewer 鼠标滚轮仅在数据网格上滚动时滚动。在数据网格外滚动时页面不滚动

> ID：12397198
> 
> 赞同：0
> 
> 时间：2012-09-12T22:55:12.977
> 
> 标签：wpf, silverlight, expression-blend, scrollviewer

当鼠标悬停在数据网格上时，页面滚动没有任何问题。如果数据网格页面外的鼠标不滚动。

```
<navigation:Page>
<Grid x:Name="LayoutRoot" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
     <ScrollViewer x:Name="scrollMainQueue" VerticalScrollBarVisibility="Auto" >
        <StackPanel>
            <StackPanel>
            </StackPanel>
            .......
            <StackPanel>
                <data:DataGrid AutoGenerateColumns="False" Name="grdWorkingDocs" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MinHeight="50" Margin="5,0,5,5" CanUserResizeColumns="False" CanUserReorderColumns="False" LoadingRow="grdWorkingDocs_LoadingRow" AlternatingRowBackground="White" RowBackground="White" HorizontalGridLinesBrush="White" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Disabled" />
            </StackPanel>
            </StackPanel>
            ......              
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

scrollMainQueue.SetIsMouseWheelScrollingEnabled(true);

* * *

经过一番研究得到了答案。基本上我们需要为滚动查看器设置背景颜色。在那之后它起作用了。

```
<ScrollViewer x:Name="scrollMainQueue" VerticalScrollBarVisibility="Auto" Background="White"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:43:17.880

答案如上所述。应用于滚动查看器的背景颜色是可滚动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T21:06:55.037

我使用内容控件来保存用滚动查看器包裹的内部视图，当指针位于任何字段而不是空白区域时，滚动查看器仅在鼠标滚轮上工作。

看到上面的帖子后，我设置了背景颜色，它开始工作正常，虽然解决方案看起来无关[不知道与问题有多大关系]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:24:25.660

如果您因为设计要求不能使用任何颜色，Background="Transparent" 也可以。

# javascript - (jquery) 防止 div 在页面加载期间显示

> ID：12397199
> 
> 赞同：1
> 
> 时间：2012-09-12T22:55:16.917
> 
> 标签：javascript, jquery, fouc

如果你转到 www.rambocats.com，当页面加载时，你会看到这个底部中心的 div 显示一两秒钟，然后消失。（Div 用粉色字母表示“Gallery II”）。它应该只在您向下滚动到页面的大约 2/3 时才会出现。如何防止它在初始加载期间显示？

这是jQuery：

```
$(document).ready(function(){
var open = false;
$('#homiesSlideButton').click(function() {
    if(open === false) {
        $('#homiesSlideContent').animate({ height:'610px' });
        $(this).css('backgroundPosition', 'bottom left');
               $("#homies-wrapper img").peTransitionHilight({   // image highlight/transitions plugin
                                        slideshow:true, 
                                        transition:"all", 
                                        duration:1500, 
                                        delay:4444, boost:0.3
                                  });
        open = true;
    } else {
        $('#homiesSlideContent').animate({ height: '0px' });
        $(this).css('backgroundPosition', 'top left');
        open = false;
    }
});
});

$("#homiesSlideButton").hide();
$(window).scroll(function(){
if($(window).scrollTop()>4444){               // position on page when button appears
     $("#homiesSlideButton").fadeIn();
  }else{
     $("#homiesSlideButton").fadeOut();
  }
});  

$(window).scroll(function(){
if($(window).scrollTop()>4444){               // position on page when button disappears
     $("#homiesSlideContent").fadeIn();
  }else{
     $("#homiesSlideContent").fadeOut();
  }
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T23:03:24.323

发生的事情是它默认设置为可见，因此它会在 javascript/jquery 运行之前显示以隐藏它。

我倾向于对从一开始就不可见的项目做的是向它们添加一个设置为`display: none;`or的 CSS 类`visibility: hidden;`，如下所示：

```
.hide {
    display: none;
} 
```

然后在调用`.hide()`. 在元素上：

```
$('#elementId').hide().removeClass('hide'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:48:45.493

它可以很简单：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Let's hide and show a div</title>

<style type="text/css">
#myHiddenDiv { visibility: hidden; }
</style>

</head>

<body>

<div id="myHiddenDiv">
Hidden until after the script loads. It will be imperceptible in most cases. But if    you comment out or remove the script, the div will indeed be hidden!
</div>

<script type="text/javascript">
document.getElementById('myHiddenDiv').style.visibility = 'visible';
</script>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T23:02:38.397

我认为它正在为`.hide()`事件设置动画，尝试`style="display:none;"`作为`$("#homiesSlideButton")`元素的 html 的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T23:03:11.373

在您的 div 的 CSS 中，将 div 设置为具有该属性

```
visibility: hidden; 
```

页面加载完毕后，

```
$("#yourDivId").show(); 
```

# ajax - JSF 2.0 AJAX 调用不适用于第三个命令链接

> ID：12397200
> 
> 赞同：1
> 
> 时间：2012-09-12T22:55:41.047
> 
> 标签：ajax, jsf-2

我有以下代码使用 AJAX 在单击时弹出一个框。我不明白为什么只有前两个项目有效，但链接 3 之后的链接无效。在调试器中，我观察到单击第一项或第二项会触发侦听器中指定的断点，但单击第三项或更高项则不会。有关如何解决的任何建议？

```
<ui:repeat var="lrhid" value="#{fn:split(lrrItem.lrHeaderId, ',')}" varStatus="loop" rendered="#{fn:length(lrrItem.lrHeaderId)>1}">
<h:commandLink id="xlrhid" value="#{lrhid}" onclick="ShowContent('xlrdetail1');">
    <c:set var="lrhparts" value="#{fn:split(lrhid,'-')}" />
    <f:param name="strlrhid" value="#{lrhparts[0]}"></f:param>
    <f:param name="strlrdseq" value="#{lrhparts[1]}"></f:param>
    <f:ajax execute="xlrhid" event="action" render=":leaveRequestReportForm:lrdetail" listener="#{lRViewDtlMB.getLeaveRecord}" />
</h:commandLink>&nbsp;
</ui:repeat> 
```

弹出 xlrdetail1 的代码：

```
<h:panelGroup id="xlrdetail1"  style="z-index:999;display:none;position:absolute;background-color: white;padding: 5px;">
<h:panelGroup id="lrdetail">
<ui:include src="lrViewById.xhtml"></ui:include>
<a onmouseover="HideContent('xlrdetail1'); return true;"
href="javascript:HideContent('xlrdetail1')">
[hide]</a>
</h:panelGroup>                 
</h:panelGroup> 
```

# php - php - 使用 preg_replace 在字符串中查找和替换两种类型的匹配项

> ID：12397204
> 
> 赞同：0
> 
> 时间：2012-09-12T22:56:08.047
> 
> 标签：php, string, preg-replace

我正在尝试替换字符串上的破折号和“.php”扩展名，例如：

原始字符串：

我的真棒link.php

结果字符串：

我的绝妙链接

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:00:01.750

您可以使用`str_replace`摆脱“-”和“.php”，然后`UCWords`从“我的真棒链接”转到“我的真棒链接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:08:31.387

完整的解决方案是这样的：

```
$pageName = ucwords(str_replace(['-','.php'],[' ',''], $getPageName[1])); 
```

# javascript - 截取cellSubmit jqGrid

> ID：12397205
> 
> 赞同：1
> 
> 时间：2012-09-12T22:56:39.770
> 
> 标签：javascript, jqgrid

我正在尝试拦截 jqGrid 中特定单元格的 cellSubmit。我想以这样的方式覆盖它，它允许我使用自定义代码处理我自己的提交。
但我只想在特定单元格上执行此操作。其余的单元格我想允许它通过 jqGrids 提交提交机制。这可能吗？我一直在寻找解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:52:05.270

您可以以不同的方式实现您的要求。如果您在某些情况下只需要发送**自定义数据**或**自定义序列化数据**`serializeCellData`，则使用回调就足够了。可能`beforeSaveCell`，`beforeSubmitCell`或者`afterSaveCell`也有帮助。

或者，您可以“子类化”`saveCell`函数（参见[答案](https://stackoverflow.com/a/9482049/315935)，[这个](https://stackoverflow.com/a/9181899/315935)或[另一个](https://stackoverflow.com/a/12230794/315935)作为示例）。对应的代码可能如下

```
var orgSaveCell = $.fn.jqGrid.saveCell;

$.jgrid.extend({
    saveCell: function (iRow, iCol) {
         var res;

         // make some tests and do your own implementation of saveCell
         // or call the original one
         res = orgSaveCell.call (this, iRow, iCol);

         // As one more option you can do some modification or do
         // additional actions before calling of original saveCell
         // or after it

         return res;
    }
}); 
```

# ruby-on-rails - 空的 Rails 应用程序中的内存无限增长

> ID：12397208
> 
> 赞同：19
> 
> 时间：2012-09-12T22:57:13.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我不明白为什么我的 Rails 应用程序（托管在 Heroku (cedar) 上）不断分配越来越多的内存。如果我不知道更好，我会说这是 Ruby/Rails 中的内存泄漏，但由于我对 Ruby/Rails 完全陌生，我觉得我错过了一些非常明显的东西。

我正在使用由 生成的 Rails 默认值`rails new`，以及完全最新的 gem：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

group :development do
  gem 'sqlite3'
end

group :assets do
  gem "sass-rails", "~> 3.2.5"
  gem "coffee-rails", "~> 3.2.2"
  gem "uglifier", "~> 1.3.0"
end

gem "jquery-rails", "~> 2.1.2"

group :production do
  gem 'newrelic_rpm'
  gem "pg", "~> 0.14.1"
end 
```

我正在使用[默认的 newrelic 配置](https://raw.github.com/gist/2253296/newrelic.yml)。我有零个模型和一个控制器`nothing_controller.rb`，它是使用生成的`rails generate controller nothing`：

```
class NothingController < ApplicationController
  def index
  end
end 
```

我删除`public/index.html`并添加了一个空的`views/nothing/index.html.erb`. 我对生成的应用程序所做的唯一另一件事是添加一个路由`routes.rb`：

```
Nothing::Application.routes.draw do
  root :to => "nothing#index"
end 
```

我承诺，将其推送到 Heroku，然后编写了一个快速脚本，每 10 秒加载一次我的 Heroku 页面。这是我的新遗物报告：

![http://i.imgur.com/djZZn.png](../Images/b0e4841721645be6894935278e7bb3c7.png)

这里的所有都是它的。内存就这样不断增加，直到超过 Heroku 的 512MB 限制。[这个应用程序中的代码与我在我遵循的教程](http://ruby.railstutorial.org/)中看到的代码几乎相同。我不明白我做错了什么。

任何指导将不胜感激。

编辑（9/12）：如果相关，我使用的是 ruby​​ 1.9。

我用来访问服务器的代码（C#）：

```
using (var wc = new WebClient())
  for (;; Thread.Sleep(10000))
    wc.DownloadString("http://vast-earth-9859.herokuapp.com/"); 
```

编辑（9/13）：尝试禁用 New Relic 并查看它是否仍然是 R14s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T12:14:08.367

尝试移除新遗物宝石。我在heroku上遇到了同样的问题，罪魁祸首是newrelic gem。您可以检查您当前的内存对象。下面的代码显示了对象计数。

```
ObjectSpace.each_object.with_object(Hash.new(0)){|obj, h| h[obj.class] +=1 }.select{|k,v| puts "#{k} => #{v}" if k == String || k == Array || k == Hash} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T11:59:03.637

一旦内存超过（512 MB）heroku 的限制，它不会通过重新启动应用程序或更改代码来立即降低内存。它将继续增长并进一步减慢它，当它达到 heroku 的内存阈值时，heroku 本身会终止进程（不确定它是多少）。

导致内存泄漏的原因有很多，以下是几个 1\. 连续抛出异常 2\. 在单个请求中获取大量数据。

在本地机器上测试它不会有帮助，因为你的机器上没有任何内存限制。

执行以下操作以查看 heroku 日志并确定最新错误是什么项目需要时间。

```
heroku logs -a <application name> -n<number of lines> 
```

停止应用程序一天左右，然后您可以更改代码并启动应用程序。

# r - 根据（部分）匹配的列名计算行均值

> ID：12397210
> 
> 赞同：3
> 
> 时间：2012-09-12T22:57:39.640
> 
> 标签：r

我从 3 个大型数据表（名为 A1、A2、A3）开始。每个表有 4 个数据列 (V1-V4)、1 个在所有三个表中保持不变的“日期”列以及数千行。

这是一些近似于我的表格的虚拟数据。

```
A1.V1<-c(1,2,3,4)
A1.V2<-c(2,4,6,8)
A1.V3<-c(1,3,5,7)
A1.V4<-c(1,2,3,4)

A2.V1<-c(1,2,3,4)
A2.V2<-c(2,4,6,8)
A2.V3<-c(1,3,5,7)
A2.V4<-c(1,2,3,4)

A3.V1<-c(1,2,3,4)
A3.V2<-c(2,4,6,8)
A3.V3<-c(1,3,5,7)
A3.V4<-c(1,2,3,4)

Date<-c(2001,2002,2003,2004)

DF<-data.frame(Date, A1.V1,A1.V2,A1.V3,A1.V4,A2.V1,A2.V2,A2.V3,A2.V4,A3.V1,A3.V2,A3.V3,A3.V4) 
```

所以这就是我的数据框最终的样子：

```
 Date A1.V1 A1.V2 A1.V3 A1.V4 A2.V1 A2.V2 A2.V3 A2.V4 A3.V1 A3.V2 A3.V3 A3.V4
1 2001     1     2     1     1     1     2     1     1     1     2     1     1
2 2002     2     4     3     2     2     4     3     2     2     4     3     2
3 2003     3     6     5     3     3     6     5     3     3     6     5     3
4 2004     4     8     7     4     4     8     7     4     4     8     7     4 
```

我的目标是计算每个数据表中每个匹配列的行平均值。因此，在这种情况下，我希望所有以 V1 结尾的列、所有以 V2 结尾的列、所有以 V3 结尾的列和所有以 V4 结尾的列的行均值。

最终结果看起来像这样

```
 V1  V2  V3  V4
2001   1   2   1   1
2002   2   4   3   2
2003   3   6   5   3
2004   4   8   7   4 
```

所以我的问题是，如何根据列名中的部分匹配来计算行均值？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T23:48:14.553

```
colnames = c("V1", "V2", "V3", "V4")
res <- sapply(colnames, function(x) rowMeans(DF [, grep(x, names(DF))] )  )
rownames(res) <- DF$Date
res
     V1 V2 V3 V4
2001  1  2  1  1
2002  2  4  3  2
2003  3  6  5  3
2004  4  8  7  4 
```

R`grep`函数返回一个整数向量，用于从较大的数据帧中选择性地“拉”包含单个“V”列名称的列。

如果您需要自动生成名称：

```
> unique(sapply(strsplit(names(DF)[-1], ".", fixed=TRUE), "[", 2) )
[1] "V1" "V2" "V3" "V4" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T23:25:32.373

```
library(plyr)
ddply(DF, .(Date), function(x) {
    foo <- melt(x, id.vars = 1)
    foo$variable <- substr(foo$variable, 4, 6)
    return(dcast(foo, Date ~ variable, mean))
    })
Date V1 V2 V3 V4
1 2001  1  2  1  1
2 2002  2  4  3  2
3 2003  3  6  5  3
4 2004  4  8  7  4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T23:26:23.213

您可以使用`grep`with`value = T`来获取适当的名称，然后`eval`在 a 的`j`组件中创建调用`data.table`

```
library(data.table)
# convert to a data.table
DT <- data.table(DF)
 # the indices we wish to group
.index <- paste0('V',1:3)
# a list containing the names
name_list <- mapply(grep, pattern = as.list(.index ), 
                  MoreArgs = list(x= names(DT),value=T ), SIMPLIFY=F)
 # create the expression
.e <- parse(text=sprintf('list( %s)', paste(mapply(sprintf, .index, lapply(name_list, paste, collapse = ', '), 
            MoreArgs = list(fmt = '%s = mean(c(%s), na.rm = T)')), collapse = ',')))

DT[, eval(.e),by=Date]

##    Date V1 V2 V3
## 1: 2001  1  2  1
## 2: 2002  2  4  3
## 3: 2003  3  6  5
## 4: 2004  4  8  7

# what .e looks like
.e 
## expression(list( V1 = mean(c(A1.V1, A2.V1, A3.V1), na.rm = T),V2 = mean(c(A1.V2, A2.V2, A3.V2), na.rm = T),V3 = mean(c(A1.V3, A2.V3, A3.V3), na.rm = T))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T23:14:47.250

我确信它可以做得更优雅，但这是一种似乎可行的可能性。

```
# declare the column names
colnames = c("V1", "V2", "V3", "V4")

# calculate the means
means = lapply(colnames, function(name) { apply(DF[,grep(name, names(DF))], 1, mean) })

# build the result
result = do.call(cbind, means)
result = as.data.frame(t(result))
rownames(result) = DF$Date 
```

我还应该描述，我做了什么。

首先，我声明列名部分匹配。

然后，使用该`grep`命令部分选择数据框中的列（与特定子字符串匹配的列）。该`apply`命令计算均值，并对`lapply`与子字符串部分匹配的所有列进行计算。

使用`do.call`and `cbind`（如 DWin 所建议的），我们连接各个列。`Date`最后，我们从原始数据框的列中设置列名。

该问题可以更优雅、更有效地解决，请参阅 DWin 和 Maiasaura 的解决方案。

# iframe - IBM Portal Server 与非 wsrp 应用程序的集成

> ID：12397213
> 
> 赞同：0
> 
> 时间：2012-09-12T22:58:40.533
> 
> 标签：iframe, integration, websphere-portal, wsrp

该项目有一种情况可以描述为：必须构建一个门户应用程序。预计这将成为许多现有的非 Portlet 应用程序的所在地（有些基于 Java EE，有些则不是）。

显然，门户将提供 SSO。将非 portlet 应用程序呈现到门户的选项似乎使用 iFrame 或 URL 重定向。无论哪种情况，看起来请求都必须通过门户服务器 (??)。

该解决方案面临哪些挑战？实现这一点的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T08:21:29.510

这就是门户解决方案旨在提供的：访问应用程序、服务、人员、流程的中心点......

还有第三种用于集成遗留 Web 应用程序的选项（我假设您询问的是 WebSphere Portal Server），那就是“Web Application Integrator”。[你可以在这里](http://www-10.lotus.com/ldd/lcwiki.nsf/dx/19082008174536WEBTJ3.htm)找到一些关于它的信息

该解决方案的挑战与以下方面有关： 1\. SSO - 这可能会带来一些复杂性，具体取决于基础设施。2\. 外观和感觉统一——门户主题应该适合要集成的 Web 应用程序。3\. 在某些情况下，需要更改 Web 应用程序才能实现集成。

是的，每个请求都需要通过 Portal Server。

希望这可以帮助..

# visual-studio-2010 - Visual Studio、MSMQ 和 WCF 调试

> ID：12397214
> 
> 赞同：2
> 
> 时间：2012-09-12T22:59:04.747
> 
> 标签：visual-studio-2010, wcf, msmq

我正在尝试在 VS2010 中调试一条消息，该消息由 WCF 从我的事务性 MSMQ 分派。

我在队列中有 1 条消息。

问题是，如果我放置一个调试断点并将其保留几秒钟，然后进入下一行，我会看到消息再次重新分派给应用程序，导致框架跳回到起始点/入口点再次申请。

关于如何让它与 1 条消息一起工作的任何想法？（队列中只有一条消息，所以我的问题是如何防止它多次发送）

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:37:34.093

我怀疑您在这里处理 WCF 超时。

我相信您的服务会在您调试时结束会话。由于消息未在您的调试会话中完全处理，因此它会再次从队列中读取消息，并且一切都会从入口点重新启动。

您可能想尝试将您`Web.config`或`ServiceReferences.ClientConfig`文件中的绑定的超时设置为更高的值：

```
<binding name="yourEndpointName" closeTimeout="00:10:00" openTimeout="00:10:00" 
                receiveTimeout="00:10:00" sendTimeout="00:10:00"
                <!-- other config values here --> > 
```

您必须增加（至少）绑定`receive timeout`，绑定接收超时负责会话超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:57:50.923

好的，将 WCF 服务设置为 InstanceContext.Single 并将并发模式设置为单似乎工作正常。这很痛苦，因为您必须在调试和发布之间切换，并确保修改应用程序配置或服务本身以使其成为 MT

# jquery - jQuery 验证：在 IE8 中忽略了表单验证

> ID：12397215
> 
> 赞同：0
> 
> 时间：2012-09-12T22:59:09.580
> 
> 标签：jquery, validation

我的表格完整粘贴在下面，在 IE8 中没有验证。没有错误——验证只是被忽略了，所以人们可以提交任何东西。我正在使用 jquery 1.8.1 和验证插件版本 1.9。是语法问题吗？在 IE9、Chrome 或 Firefox 中没有问题。

粘贴下面的所有内容，因为我不知道问题出在哪里。

```
<!DOCTYPE HTML>
<html>
<head>
<!-- HTML5 biolerplace stuff below -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="">
<meta name="viewport" content="">
<link rel="stylesheet" href="css/normalize.css">
<link rel="stylesheet" href="css/main.css">
<script src="js/vendor/modernizr-2.6.1.min.js"></script> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="js/vendor/jquery.defaultvalue.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>

<style>
#formwrapper {
    height:275px; 
    width:250px; 
    background-color: #f8f8f8; 
    border: 1px solid #cccccc; 
    padding: 25px 0 25px 25px;
    font-family: arial;
    font-size: 12px;
    }

.entry {
    border: 1px solid #cccccc; 
    margin: 5px 0; 
    width: 212px; 
    /* height: 26px; */
    color: black;
    padding: 7px 0 7px 10px;
    }

#form_title, #button {
    font-size: 18px;
    }

#form_title {
    color: #00589f;
    margin-bottom: 20px;
    }

#button {
    width: 80px;
    height: 24px;
    position: relative;
    left: 143px;
    top: 15px;
    background-color: #00589f;
    border: none;
    color: white !important;
    }

.error {
    border: 1px solid red; 
    background:#FFFFFF;
    content: "text"
    }

.empty {
    color: #ccc;
    }

</style>

<script type="text/javascript">
    //form validation start
   $(document).ready(function() {
        //$('form').submit(function(){
        //  $('.incomplete').val('');
        //}); 
        //reject default values
       $("#form").validate({
            wrapper: ".formwrapper",
            keyup: false,
            //onfocusout: false,
            //onclick: false,
            //onchange: false,
            errorLabelContainer: ".form",
            //errorClass: "incomplete",
            rules: {
                organization: {
                    required: true,
                    minlength: 2
                    },
                firstname: {
                    required: true,
                    minlength: 2
                    },
                lastname: {
                    required: true,
                    minlength: 2
                    },
                email: {
                    required: true,
                    email: true
                    },
                phone: {
                    required: true,
                    minlength: 10,
                    digits: true
                    }
            }
        });
    }); 

</script>

</head>
<body>

<div id="formwrapper">
    <div id="form_title">REQUEST INFO</div>
    <form id="form" name="form_container" action="#">
        <!-- fields -->
        <input class="entry" id="organization" type="text" name="organization" placeholder="Organization"/>
        <input class="entry" id="firstname" type="text" name="firstname" placeholder="First Name"/>
        <input class="entry" id="lastname" type="text"  name="lastname" placeholder="Last Name"/>
        <input class="entry" id="email" type="text" name="email" placeholder="Email"/>
        <input class="entry" id="phone" type="text" name="phone" placeholder="Phone"/>
        <!-- submit button -->
        <input id="button" class="button" type="submit" value="Submit" /> 
    </form>
</div>
<script>
    //talks to defaultvalue plugin to make placeholders work in IE
    $('#organization, #firstname, #lastname, #email, #phone').defaultValue();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T20:49:21.097

我正在使用带有 Razor 视图的 MVC 4，并且每个字段都根据 IE8 的要求触发，包括复选框、文本框、在我的 MVC 模型中不需要的下拉列表。

我能够通过降级 jquery 和 jquery.validate 版本来解决它。

**不工作**

```
<script src="~/javascript2/Menu/jquery-2.0.1.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script> 
```

**作品**

```
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:11:25.473

您需要更新 jquery.validate 库。

看到这个[帖子](http://blog.degree.no/2012/01/jquery-validation-not-working-in-ie7-and-ie8/)

享受 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T22:22:50.593

如果任何未来的人有同样的问题，我会回答我自己的问题。问题是与使占位符在 IE 中工作的插件不兼容。我将占位符转换插件更改为[https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)，以下代码有效：

```
<!DOCTYPE HTML>
<html>
<head>
<!-- HTML5 biolerplace stuff below -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="">
<meta name="viewport" content="">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script >window.jQuery || document.write('<script src="js/vendor/jquery-1.8.1.min.js"><\/script>')</script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script >window.jQuery || document.write('<script src="js/vendor/jquery.validate.min.js"><\/script>')</script>
<script src="js/vendor/jquery.placeholder.min.js"></script>
<script src="js/vendor/modernizr-2.6.1.min.js"></script> 
<link rel="stylesheet" href="css/normalize.css">
<link rel="stylesheet" href="css/main.css">
<script src="js/vendor/modernizr-2.6.1.min.js"></script> 

<style>
#formwrapper {
    height:275px; 
    width:250px; 
    background-color: #f8f8f8; 
    border: 1px solid #cccccc; 
    padding: 25px 0 25px 25px;
    font-family: arial;
    font-size: 12px;
    }

.entry {
    border: 1px solid #cccccc; 
    margin: 5px 0; 
    width: 212px; 
    /* height: 26px; */
    color: #000;
    padding: 7px 0 7px 10px;
    }

.entry[attr="placeholder"] {
    color: #ccc;
    }

#form_title, #button {
    font-size: 18px;
    }

#form_title {
    color: #00589f;
    margin-bottom: 20px;
    }

#button {
    width: 80px;
    height: 24px;
    position: relative;
    left: 143px;
    top: 15px;
    background-color: #00589f;
    border: none;
    color: white !important;
    }

.error {
    border: 1px solid red; 
    background:#FFFFFF;
    content: "text"
    }

input:-moz-placeholder {
    color: #ccc;
    }

</style>

<script type="text/javascript">
    //form validation start
$(document).ready(function() {
    //reject defaults for IE placeholder fix
    jQuery.validator.addMethod("defaultInvalid", function(value, element) {
    switch (element.value) {

        case "Organization": 
        if (element.name == "Organization") return false;
        break;

        case "First Name": 
        if (element.name == "First Name") return false;
        break;

        case "Last Name": 
        if (element.name == "Last Name") return false;
        break;

        case "Email": 
        if (element.name == "Email") return false;
        break;

        case "Phone": 
        if (element.name == "Phone") return false;
        break;

        default: return true;
        break;
    } 
    }); 
    //form validation start
   $("#form").validate({
        wrapper: ".formwrapper",
        keyup: false,
        //onfocusout: false,
        //onclick: false,
        onchange: false,
        errorLabelContainer: ".form",
        rules: {

            organization: {
                defaultInvalid: true,
                required: true,
                minlength: 2
                },

            firstname: {
                defaultInvalid: true,
                required: true,
                minlength: 2
                },

            lastname: {
                defaultInvalid: true,
                required: true,
                minlength: 2
                },

            email: {
                defaultInvalid: true,
                required: true,
                minlength: 2,
                email: true
                },

            phone: {
                defaultInvalid: true,
                required: true,
                minlength: 9,
                digits: true
                }
        }
    });
        //placeholders in IE
    $('input').placeholder();
});

</script>

</head>
<body>

<div id="formwrapper">
    <div id="form_title">REQUEST INFO</div>
    <form id="form" name="form_container" action="#">
        <!-- fields -->
        <input class="entry" id="organization" type="text" name="organization" placeholder="Organization"/>
        <input class="entry" id="firstname" type="text" name="firstname" placeholder="First Name"/>
        <input class="entry" id="lastname" type="text"  name="lastname" placeholder="Last Name"/>
        <input class="entry" id="email" type="text" name="email" placeholder="Email"/>
        <input class="entry" id="phone" type="text" name="phone" placeholder="Phone"/>
        <!-- submit button -->
        <input id="button" class="button" type="submit" value="Submit" /> 
    </form>
</div>
<script>
    //clear invalids w/ error class on submit
    $('form').submit(function(){
        $('.error').val('');
    }); 
</script>
</body>
</html> 
```

# ios - 如何在应用商店 xcode 4.4.1 之上安装 XCode 4.5GM？

> ID：12397216
> 
> 赞同：5
> 
> 时间：2012-09-12T22:59:15.827
> 
> 标签：ios, xcode

我在这里寻找这个问题的答案，但找不到任何东西。我之前在使用 GM 版本的 xcode 时遇到了问题，想知道执行此操作的程序是什么。我从应用商店安装了 XCode 4.4.1，我想安装 4.5 GM。是同时安装在机器上还是可以升级的唯一方法？删除 4.4.1 并安装 GM 版本是否有意义，或者只需等待一周，xcode 将自动更新。

我只是不想安装这个，然后在应用商店版本出来时必须重新安装，因为那时将通过应用商店安装升级。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T23:02:00.270

您可以并排安装 AppStore 版本 (4.4.1) 和 beta 版本 (4.5)，没有任何问题。只需从开发人员门户下载测试版，它将安装为“Xcode45-GM”。

# python - Dynamodb 中的缓存有什么问题？

> ID：12397218
> 
> 赞同：1
> 
> 时间：2012-09-12T22:59:20.300
> 
> 标签：python, caching, network-programming

我有一个访问 Web 服务（DynamoDB）的 Python 应用程序。它执行 15,000 次 POST 操作，但被限制为每秒 1,000 次。

添加日志后，我注意到每个 POST 之前都有一个资源刷新，返回总是相同的信息。

以下是日志的样子：

```
DynamoDB_20111205.DescribeTable: id=... time=27ms
DynamoDB_20111205.PutItem: id=... time=22ms
DynamoDB_20111205.DescribeTable: id=... time=27ms
DynamoDB_20111205.PutItem: id=... time=22ms
DynamoDB_20111205.DescribeTable: id=... time=27ms
DynamoDB_20111205.PutItem: id=... time=22ms
DynamoDB_20111205.DescribeTable: id=... time=27ms
DynamoDB_20111205.PutItem: id=... time=22ms 
```

与预期相比：

```
DynamoDB_20111205.DescribeTable: id=... time=27ms
DynamoDB_20111205.PutItem: id=... time=22ms
DynamoDB_20111205.PutItem: id=... time=22ms
DynamoDB_20111205.PutItem: id=... time=22ms
DynamoDB_20111205.PutItem: id=... time=22ms 
```

当然，我的反应是缓存“DescribeTable”操作的结果，因为它总是相同的（除了一些我不关心的位）并且对性能“增益”感到好奇。以下是我的测试的数量级：

*   **无**缓存：37.5 秒
*   **班级水平**缓存：41.8 秒（由所有实例共享）
*   **实例级**缓存：41.7 秒

我在类似的条件下重复了每一次 6 次，但没有尝试任何类型的“科学质量”测量。

编辑：这是我的代码的精简版。这是高度简化的。在真实版本中，我使用未发布版本的 Boto、DynamoDB-mapper 和 gevent 的 greenlets

```
#!/usr/bin/env python

class RemoteTableInfo(objects):
    def __init__(self):
        load_remote_table_info() # Triggers the "DescribeTable" in logs

class Item(objects):
    def save(self, table, ...):
        do_some_IO() # Triggers the "PutItem" in logs

class ObjectMapper_with_cache(object):
    table = None

    def __init__(self):
        cls = type(self)
        if cls.table is None:
            self.table = RemoteTableInfo()

    def do_work(self):
        cls = type(self)
        Item(cls.table, ...).save()

class ObjectMapper_no_cache(object):
    def do_work(self):
        table = RemoteTableInfo()
        Item(table, ...).save()

# Slow version
for i in range(15000):
    ObjectMapper_with_cache().do_work()

# Fast version
for i in range(15000):
    ObjectMapper_no_cache().do_work() 
```

为什么**没有缓存的版本快*4**秒***我的“最聪明”尝试（类级别）

注意：我真的相信这与 Python 的内部结构有关，而不是与底层框架有关

# sql-server - 带有子查询的 INSERT 的原子性

> ID：12397224
> 
> 赞同：3
> 
> 时间：2012-09-12T22:59:53.340
> 
> 标签：sql-server, tsql, sql-server-2012

假设

```
CREATE TABLE TableA
(
    IntColumn INT NOT NULL PRIMARY KEY
)
INSERT INTO TableA VALUES (0) 
```

以下是原子的吗？即，如果多个应用程序线程执行以下操作，我是否有最终违反 PK 的风险？

```
INSERT INTO TableA
VALUES ((SELECT MAX(IntColumn) FROM TableA) + 1) 
```

你能指点我有关这方面的任何文件吗？我的 google-fu 失败了...

[我知道自动递增的列，但这对于我实际做的事情来说还不够。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:14:20.160

[这个答案](https://stackoverflow.com/a/2525343/426028)显示了所需的锁定提示：

```
INSERT INTO TableA
WITH (TABLOCKX,HOLDLOCK) -- added
VALUES ((SELECT MAX(IntColumn) FROM TableA) + 1) 
```

[在Adam 的实用程序](http://www.datamanipulation.net/sqlquerystress/)中进行了尝试，它正在工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:47:10.913

您使用 SQL 2012 标记了这个问题。如果这是您的环境，您可以使用新的序列功能：http: [//msdn.microsoft.com/en-us/library/ff878091.aspx](http://msdn.microsoft.com/en-us/library/ff878091.aspx)和[http://msdn.microsoft.com /en-us/library/ff878370.aspx](http://msdn.microsoft.com/en-us/library/ff878370.aspx)

# c++ - 高度压缩数字网格

> ID：12397233
> 
> 赞同：4
> 
> 时间：2012-09-12T23:01:09.270
> 
> 标签：c++, c

我有一个包含数字的方形网格，我需要对其进行大量压缩，以便可以轻松地通过网络传输。例如，我需要能够将 40x40 的网格压缩为小于 512 字节，而不管网格中数字的值如何。这是我的基本要求。

每个网格的单元格都包含一个从 0 到 7 的数字，因此每个单元格可以容纳 3 位。

有谁知道可以实现我想要的好的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:48:13.753

您可以对信息进行不同的编码。您不需要为所有数字 0 到 7 分配具有相同位数的代码。您可以根据序列中的次数进行分配。

首先阅读整个序列，计算每个数字的出现次数。基于此，您可以将代码分配给每个号码。如果您分配以下代码，例如[霍夫曼代码](http://en.wikipedia.org/wiki/Huffman_coding)，代码将是前缀代码，这意味着没有额外的字符来分隔数字。

您可以根据测试结果在算法上引入某些变体，以微调压缩比。

我在一个项目（大学）中使用了这种技术，总的来说，它提供了很好的结果。至少它应该近似于每个字符的理论 3 位，如果概率分布有帮助，它会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T16:50:38.640

正如其他人所说，所陈述的问题是不可能的，因为需要 600 个字节来表示所有可能的网格。600 字节来自 40 行、40 列、每单元 3 位和每字节 8 位 ( `40 * 40 * 3 / 8`)。正如 Kerrek SB 在评论中解释的那样，您将 8 个单元打包成 3 个字节。

在您自己的评论中，您提到这是通过网络传输的游戏状态。假设您有一种机制来确保数据的可靠传输，那么如果在更新之间可以更改的单元格数量有合理的限制，或者如果允许您在一定数量的单元格更改时发送更新，您可以实现 512 字节的表示。如果您使用 1 位来表示单元格是否已更改，则需要 200 个字节。然后，您有 312 个剩余字节来表示已更改单元格的新值。因此，您最多可以表示已`312*8/3 = 832`修改的单元格。

顺便说一句，这种表示可以在不到 600 字节的时间内表示多达 1064 个更改的单元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T17:31:15.363

您要做的是对数据执行“burrowes-wheeler”转换，然后对其进行压缩。在这种情况下，运行长度编码就足够了。

[http://en.wikipedia.org/wiki/Burrows%E2%80%93Wheeler_transform](http://en.wikipedia.org/wiki/Burrows%E2%80%93Wheeler_transform)

在您的情况下，这可能会胜过霍夫曼。

确实在某些情况下您需要超过 512 个字节。因此，在您的协议中，只需对“反常”网格进行例外处理。但在一般情况下，您应该轻松低于 512。

# .net - 接受属于另一个类的结构的函数原型

> ID：12397238
> 
> 赞同：0
> 
> 时间：2012-09-12T23:01:46.697
> 
> 标签：.net, vb.net, structure

我有一个包含一个结构的类，该结构必须传递给属于不同类的另一个函数。(VB.NET)

```
Public Class A_one
         Private Structure Profile
            Dim strUIConfig as String
            Dim blah blah as String
            Dim Xyz as string
         End Structure

         Dim testProfile as New Profile()
         'inititialize testProfile Here

        toObj.send_profile(testProfile)

Public Class B_one
        send_profile(ByVal x as A_one.Profile)    ' How should I provide the declaration here ?
        'blah blah blah do stuff
        p = x.strUIconfig    '??? 
```

我觉得奇怪的是 A_one 类没有 dll，因此我可以将该 dll 作为参考添加到 B 类中 - 当我将 A_one 类的 dll 导入 B 类时，这将在技术上解决问题。我的理解正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:03:55.557

您已将其声明为`Profile`私有*-*`A_one`所以它甚至在`B_one`. 如果您将其公开，您将能够使用：

```
send_profile(ByVal as A_one.Profile) 
```

我*通常*会鼓励您避免创建非私有嵌套类型。它当然很有用，但也可能有点痛苦。

# c# - 私有类中的公共字段：“字段 [FieldName] 从未分配给，并且始终具有其默认值 null”

> ID：12397243
> 
> 赞同：1
> 
> 时间：2012-09-12T23:02:08.550
> 
> 标签：c#, linq-to-sql, null, compiler-warnings, default-value

我有一个看起来像这样的私人课程：

```
private class PocoUserWithResourceId
{
    public USER User;
    public string ResourceId;
} 
```

我用这个类做事（在同一个封装的公共类中），比如：

```
var uQuery = from u in db.USERS.All()
select new PocoUserWithResourceId {User = u, ResourceId = arv.Resource_Id}; 
```

我收到警告：

> 字段“PocoUserWithResourceId.ResourceId”从未分配给，并且始终具有其默认值 null

我错过了什么？我在我的 LINQ to SQL 代码中分配值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:02:46.317

> Is it just because I'm assigning property values during the declaration that the compiler doesn't see the fact that I'm using them?

No, that's just because you're assigning [field](http://msdn.microsoft.com/en-us/library/ms173118.aspx) values, not [property](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx) values ...

You have choice between 2 good practices :
- Use a constructor
- Use accessors (properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T18:56:04.363

您可以使用 #pragma 暂时禁用特定情况的警告

```
// turn it off
#pragma warning disable 0649
private class Foo
{
   public string FieldName
}
// turn it back on
#pragma warning restore 0649 
```

要找出错误号，请检查原始输出或右键单击警告并选择显示错误帮助。即使页面本身与警告无关，您也会发现隐藏在 URL (CS0649) 中的错误。

# php - perl 中 $_ 的 php 等价物是什么？

> ID：12397251
> 
> 赞同：-1
> 
> 时间：2012-09-12T23:03:44.683
> 
> 标签：php, arrays, perl, variables, loops

在 Perl 中，您可以通过以下方式引用循环的当前变量`$_`

例如：

```
my @array = (1,2,3,4);
foreach(@array)
{
    print $_." ";
} 
```

将打印：

```
1 2 3 4 
```

有没有这方面的 php 等价物？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T23:04:45.007

```
foreach ($array as $value) {
    echo $value . ' ';
} 
```

[http://php.net/foreach](http://php.net/foreach)

# vb.net - 同一算法的两种实现之间的性能差异

> ID：12397253
> 
> 赞同：0
> 
> 时间：2012-09-12T23:04:13.060
> 
> 标签：vb.net, performance, algorithm

我正在开发一个需要 Levenshtein 算法来计算两个字符串相似度的应用程序。

很久以前，我将一个 C# 版本（可以在互联网上很容易找到）改编为 VB.NET，它看起来像这样：

```
Public Function Levenshtein1(s1 As String, s2 As String) As Double
    Dim n As Integer = s1.Length
    Dim m As Integer = s2.Length

    Dim d(n, m) As Integer
    Dim cost As Integer
    Dim s1c As Char

    For i = 1 To n
        d(i, 0) = i
    Next
    For j = 1 To m
        d(0, j) = j
    Next

    For i = 1 To n
        s1c = s1(i - 1)

        For j = 1 To m
            If s1c = s2(j - 1) Then
                cost = 0
            Else
                cost = 1
            End If

            d(i, j) = Math.Min(Math.Min(d(i - 1, j) + 1, d(i, j - 1) + 1), d(i - 1, j - 1) + cost)
        Next
    Next

    Return (1.0 - (d(n, m) / Math.Max(n, m))) * 100
End Function 
```

然后，试图调整它并提高它的性能，我以版本结束：

```
Public Function Levenshtein2(s1 As String, s2 As String) As Double
    Dim n As Integer = s1.Length
    Dim m As Integer = s2.Length

    Dim d(n, m) As Integer
    Dim s1c As Char
    Dim cost As Integer

    For i = 1 To n
        d(i, 0) = i
        s1c = s1(i - 1)

        For j = 1 To m
            d(0, j) = j

            If s1c = s2(j - 1) Then
                cost = 0
            Else
                cost = 1
            End If

            d(i, j) = Math.Min(Math.Min(d(i - 1, j) + 1, d(i, j - 1) + 1), d(i - 1, j - 1) + cost)
        Next
    Next

    Return (1.0 - (d(n, m) / Math.Max(n, m))) * 100
End Function 
```

基本上，我认为距离数组 d(,) 可以在主循环内部初始化，而不是需要两个初始（和附加）循环。我真的认为这将是一个巨大的改进......不幸的是，不仅没有比原来的改进，它实际上运行得更慢！

我已经尝试通过查看生成的 IL 代码来分析这两个版本，但我就是无法理解。

所以，我希望有人能对这个问题有所了解并解释为什么第二个版本（即使它的循环次数更少）比原来的运行速度慢？

注意：时间差约为 0.15 纳秒。这看起来并不多，但是当您必须检查数以百万计的字符串时……差异变得非常显着。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:24:34.683

正因为如此：

```
 For i = 1 To n
        d(i, 0) = i
        s1c = s1(i - 1)

        For j = 1 To m
            d(0, j) = j 'THIS LINE HERE 
```

你刚开始初始化这个数组，但现在你初始化它*n*次。像这样访问数组中的内存是有代价的，现在你要多做*n*次。您可以将行更改为：`If i = 1 Then d(0, j) = j`。但是，在我的测试中，您基本上仍然会得到比原始版本稍慢的版本。这又是有道理的。您正在执行此 if 语句 n*m 次。再次有一些成本。像原始版本一样将其移出要便宜得多它最终是 O(n)。由于整体算法是 O(n*m)，因此您可以移出 O(n) 步骤的任何步骤都将是一场胜利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:12:31.570

您可以拆分以下行：

```
d(i, j) = Math.Min(Math.Min(d(i - 1, j) + 1, d(i, j - 1) + 1), d(i - 1, j - 1) + cost) 
```

如下：

```
tmp = Math.Min(d(i - 1, j), d(i, j - 1)) + 1
d(i, j) = Math.Min(tmp, d(i - 1, j - 1) + cost) 
```

这样你就避免了一次求和

此外，您可以将最后一个“min”比较放在 if 部分中并避免分配成本：

```
tmp = Math.Min(d(i - 1, j), d(i, j - 1)) + 1
If s1c = s2(j - 1) Then
   d(i, j) = Math.Min(tmp, d(i - 1, j - 1))
Else
   d(i, j) = Math.Min(tmp, d(i - 1, j - 1)+1)
End If 
```

所以当 s1c = s2(j - 1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:28:13.977

不是您问题的直接答案，但为了获得更快的性能，您应该考虑使用锯齿状数组（数组数组）而不是多维数组。[多维数组和 C# 中的数组数组有什么区别？](https://stackoverflow.com/questions/597720/what-is-differences-between-multidimensional-array-and-array-of-arrays-in-c)为什么 .NET中[的多维数组比普通数组慢？](https://stackoverflow.com/questions/468832/why-are-multi-dimensional-arrays-in-net-slower-than-normal-arrays)

您将看到锯齿状数组的代码大小为 7，而多维数组的代码大小为 10。

下面的代码是使用一个交错数组，一维数组

```
Public Function Levenshtein3(s1 As String, s2 As String) As Double
    Dim n As Integer = s1.Length
    Dim m As Integer = s2.Length

    Dim d()() As Integer = New Integer(n)() {}
    Dim cost As Integer
    Dim s1c As Char

    For i = 0 To n
        d(i) = New Integer(m) {}
    Next

    For j = 1 To m
        d(0)(j) = j
    Next

    For i = 1 To n
        d(i)(0) = i
        s1c = s1(i - 1)

        For j = 1 To m
            If s1c = s2(j - 1) Then
                cost = 0
            Else
                cost = 1
            End If

            d(i)(j) = Math.Min(Math.Min(d(i - 1)(j) + 1, d(i)(j - 1) + 1), d(i - 1)(j - 1) + cost)
        Next
    Next

    Return (1.0 - (d(n)(m) / Math.Max(n, m))) * 100
End Function 
```

# java - 设置和获取光标位置？带有 OpenGL 的 JAVA

> ID：12397254
> 
> 赞同：2
> 
> 时间：2012-09-12T23:04:35.510
> 
> 标签：java, mouse

在`Java /w OpenGL`中，如何获取和设置光标位置？很多人说用来`GLUTWarpPointer`定位，那是哪个Class呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:31:50.057

您不需要使用 OpenGL 特定的库来执行此操作，它可以通过包含[`mouseMove()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Robot.html#mouseMove%28int,%20int%29)方法的 Robot 类轻松完成 - 它执行它在锡上所说的。

据我所知，Robot 和 GLUTWarpPointer 都会生成低级系统事件来移动鼠标，从而实现相同的目的。我假设您正在使用 JOGL，据我所知，它不会公开 GLUTWarpPointer 的鼠标移动功能，所以如果这是正确`Robot`的可能是唯一明智的选择。

# macos - OSX launchd：监控有线连接的可靠方法？

> ID：12397256
> 
> 赞同：2
> 
> 时间：2012-09-12T23:05:16.703
> 
> 标签：macos, plist, osx-mountain-lion, launchd, launch-agent

我不想看 /Library/Preferences/SystemConfiguration 来处理 [network] 位置更改 b/c 这样做会导致我的脚本在每次更改时连续运行两次。

观看 /Library/Preferences/SystemConfiguration/com.apple.airport.preferences.plist 适用于 wifi，但无法捕捉到，例如，我在 WiFi 上并插入我的迅雷以太网。

有没有可以查看有线连接的 plist？或者我是否坚持添加第二个 LaunchAgent，每 5 秒轮询一次，然后在有线以太网变为活动状态时触摸 ~/Library 中的某个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T15:15:52.657

这种变化会起作用

```
<key>LaunchEvents</key>
<dict>
    <key>com.apple.notifyd.matching</key>
    <dict>
        <key>com.apple.system.config.network_change</key>
        <dict>
            <key>Notification</key>
            <string>com.apple.system.config.network_change</string>
        </dict>
    </dict>
</dict> 
```

但它会产生很多通知......它需要在守护程序堆中进行一些搜索才能发现正确的语法:) 享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:56:54.157

理论上，您应该能够在您的已启动 plist 中注册通知。我从来没有真正让它工作，但我也没有那么努力。有人告诉我这是可行的：

```
<key>LaunchEvents</key>
<dict>
    <key>com.apple.distnoted.matching</key>
    <dict>
        <key>com.apple.system.config.network_change</key>
        <dict>
            <key>Name</key>
            <string>com.apple.system.config.network_change</string>
        </dict>
    </dict>
</dict> 
```

# python - 使用不同的 XPathSelector 进行 Scrapy、递归爬取

> ID：12397259
> 
> 赞同：1
> 
> 时间：2012-09-12T23:05:52.437
> 
> 标签：python, scrapy

晚上好，感谢您的帮助。

我正在挖掘 Scrappy，我需要从网站获取信息并重新创建网站的相同树结构。例子：

```
books [
python [
    first [
    title = 'Title'
    author = 'John Doe'
    price = '200'
    ]

    first [
    title = 'Other Title'
    author = 'Mary Doe'
    price = '100'
    ]
]

php [
    first [
        title = 'PhpTitle'
        author = 'John Smith'
        price = '100'
        ]

        first [
        title = 'Php Other Title'
        author = 'Mary Smith'
        price = '300'
    ]
]
] 
```

从教程我已经正确地完成了我的基本蜘蛛：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from pippo.items import PippoItem

class PippoSpider(BaseSpider):
    name = "pippo"
    allowed_domains = ["www.books.net"]
    start_urls = [
        "http://www.books.net/index.php"
    ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//div[@id="28008_LeftPane"]/div/ul/li')
        items = []
        for site in sites:
        item = PippoItem()
        item['subject'] = site.select('a/b/text()').extract()
        item['link'] = site.select('a/@href').extract()
        items.append(item)
        return items 
```

我的问题是，我的结构的任何级别都比站点更深一层，所以如果在我的基本级别中，我获得了我需要的书籍主题，那么我需要抓取相应的 itemitem['link'] 以获取其他项目。但在接下来的网址中，我将需要一个不同的 HtmlXPathSelector 来正确提取我的数据，依此类推，直到结构结束。

你能基本上帮助我并把我放在正确的方式吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:17:27.390

您将需要手动请求*链接*：（另请参阅[CrawlSpider](http://doc.scrapy.org/en/latest/topics/spiders.html#crawlspider)）

```
from urlparse import urljoin

from scrapy.http import Request
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

from pippo.items import PippoItem

class PippoSpider(BaseSpider):
    name = "pippo"
    allowed_domains = ["www.books.net"]
    start_urls = ["http://www.books.net/"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//div[@id="28008_LeftPane"]/div/ul/li')

        for site in sites:
            item = PippoItem()
            item['subject'] = site.select('.//text()').extract()
            item['link'] = site.select('.//a/@href').extract()
            link = item['link'][0] if len(item['link']) else None
            if link:
                yield Request(urljoin(response.url, link),
                    callback=self.parse_link,
                    errback=lambda _: item,
                    meta=dict(item=item),
                    )
            else:
                yield item

    def parse_link(self, response):
        item = response.meta.get('item')
        item['alsothis'] = 'more data'
        return item 
```

# android - 当我点击 Android 中的任何链接时，如何让我的应用显示在浏览器列表中？

> ID：12397260
> 
> 赞同：0
> 
> 时间：2012-09-12T23:06:15.823
> 
> 标签：android

```
 <intent-filter> 
     <action android:name="android.intent.action.VIEW" /> 
     <category android:name="android.intent.category.DEFAULT" /> 
     <category android:name="android.intent.category.BROWSABLE" />
     <data android:scheme="appname"/> 
</intent-filter> 
```

我试过了，但是当我点击任何链接时，我的应用程序仍然不会出现在浏览器列表中。可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:10:10.867

使用这个过滤器：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http"/>
        </intent-filter> 
```

# c# - 上传文件而无需整页回发

> ID：12397265
> 
> 赞同：0
> 
> 时间：2012-09-12T23:07:20.517
> 
> 标签：c#, jquery, asp.net, ajax, file-upload

# 计划

1.  我需要上传文件而不导致整页刷新。
2.  上传的文件应存储在临时位置*（会话或 cookie）*。
3.  如果用户成功填写所有表单字段，我只会将文件保存在服务器中。

*注意：这是 jQuery 滑块的幻灯片之一。因此，完全刷新会破坏用户体验。*

* * *

# 问题

如果我在 AJAX 更新面板中放置一个 Fileuploader 控件，我将无法在服务器端访问该文件。

*注意：从我目前发现的情况来看，这是出于安全原因。*

> 如果没有在客户端上安装合作的二进制文件，就无法完成。AJAX 框架没有安全的机制来读取文件的内容并因此能够将其发送到服务器。浏览器仅支持作为来自文件输入框的多部分表单发布。

* * *

# 问题

1.  将文件存储在临时位置时，我应该使用会话还是 cookie？*（如果用户禁用了 cookie 怎么办？）*
2.  如果阻止回发，则确实违反了用户安全标准。它会损害我的网站声誉吗？*（关于搜索引擎优化等）*
3.  走哪条路？
    *   C# ASP.Net 与 AJAX？*（有解决方法吗？）*
    *   C# ASP.Net + AJAX 控制工具包？它有帮助吗？*（使用 AsyncFileUpload 控件）*
    *   C# ASP.Net + jQuery 控件？*（从 JavaScript 获取数据不会有问题吗？）*
    *   C# ASP.Net + iFrame？*（不是最优雅的解决方案）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:26:34.103

1.  您可以使用的 cookie 总量限制为几千字节，因此这不是存储文件的可行选项。所以会话将是唯一剩下的。还要考虑将文件保存在文件系统中并在不使用时将其删除，因为将文件存储在内存（会话）中会限制您一次可以处理的用户数量。

2.  不，对于上传文件等功能，您不必担心。搜索引擎在扫描页面时不会尝试使用此类功能。

您可以在支持直接文件访问的浏览器中使用 AJAX 上传，但如果您需要支持所有浏览器，则无法发布帖子。但是，帖子不必最终加载新页面，您可以将表单放在 iframe 中，或者将表单的目标指向 iframe。

# java - Java - 一种用于反转 ArrayList 或对象列表的通用方法

> ID：12397267
> 
> 赞同：0
> 
> 时间：2012-09-12T23:07:35.617
> 
> 标签：java, android, arrays, reverse, generic-programming

我已经看到有一种非常方便的方法来反转，`ArrayList` [就像这里](https://stackoverflow.com/a/5412542/461212)使用`Collections.reverse()`方法一样，但是我需要为几种类型的原始对象实现这样的反转操作，至少`ArrayList`和`List`我的自定义对象一样。所以`Collections`无法挽救我的生命以延长使用单一方法。

到目前为止，我设法让 stg 工作（见下面的代码），但我必须写两次：一次用于 ArrayList，一次用于 List。我将它们命名为相同，因此使用非常方便，但是一些..优化会更方便:-)。

如何将这两种方法通用化为一个（真正的）通用方法？

谢谢

* * *

```
/**
 * Generic Reverse Method for ARRAYLIST using Iterator
 * @param ArrayList<Obj_item> notReversed
 * @return ArrayList<Obj_item> reversed
 */
@SuppressWarnings("unchecked")
public static <Obj_item> ArrayList<Obj_item> GenReverseArrayByIterator(ArrayList<Obj_item> mylist) {
                       // ^^^^^^^^^^^^^^^^^^ how to make this generic ?
    // Instanciate
    ArrayList<Obj_item> tmp = new ArrayList<Obj_item>();
    ArrayList<Obj_item> reversed = new ArrayList<Obj_item>();

    // Copy original list
    tmp = mylist;

    // Generate an iterator, starting right after the last element.
    @SuppressWarnings("rawtypes")
    ListIterator myIterator = tmp.listIterator(tmp.size());

    // Iterate in reverse direction
    while (myIterator .hasPrevious()) {
        reversed.add((Obj_item) myIterator.previous());
    }
    return reversed;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T23:18:00.017

[`Collections.reverse`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#reverse%28java.util.List%29)需要一个`List<?>`. `ArrayList`实现- 您可以在一个或任何实现`List`上使用该方法。你在做什么似乎完全没有必要，除非我误解了这个问题。`ArrayList``List`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T23:17:46.543

[`Collections.reverse()`](http://developer.android.com/reference/java/util/Collections.html#reverse%28java.util.List%3C?%3E%29)反转[`List`](http://developer.android.com/reference/java/util/List.html). 所以是的，您可以`Collections.reverse()`在[`ArrayList`](http://developer.android.com/reference/java/util/ArrayList.html)或 的任何实例上使用[`List`](http://developer.android.com/reference/java/util/List.html)。

但无论如何，如果你愿意，这里是你如何手写的：

```
static void reverse(List<?> list) {
  for (int i = 0, l = list.size() / 2, j = list.size() - 1; i < l; i++, j--) {
    Object tmp = list.get(i);
    list.set(i, list.get(j));
    list.set(j, tmp);  
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-02T12:22:42.123

下面的通用方法应该反转任何类型的 List 或 ArrayList

```
public static <T> List<T> reverseList(List<T> listToReverse){
    List<T> reverseList = new ArrayList<>(listToReverse);
    Collections.reverse(reverseList);
    return reverseList;
} 
```

# php - str 浮动问题；我究竟做错了什么？

> ID：12397268
> 
> 赞同：-1
> 
> 时间：2012-09-12T23:07:42.053
> 
> 标签：php, arrays, types

我想把一个字符串变成一个浮点数，这样我就可以用它做数学了。我尝试了很多方法，包括 floatval()。答案总是回到一个大的、胖的、0。我也尝试过投射并得到相同的结果。我已经尝试过使用单个变量和数组。这是我正在努力的当前代码：

```
<?php
$sim = array("$1.99","$0.75","$0.25");

for($i=0;$i<=2;$i+=1)
    $som[$i] = floatval($sim[$i]);

for($i=0;$i<=2;$i+=1)
{
    echo $som[$i];
    echo "<br/>";
} 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:10:24.907

首先删除美元符号`str_replace('$', '', $sim[$i])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:14:58.553

您还可以使用 substr 删除字符串中的 $ 。

```
$sim = array("$1.99","$0.75","$0.25");

    for($i=0;$i<=2;$i+=1)
        $som[$i] = (float)(substr($sim[$i], 1));

    for($i=0;$i<=2;$i+=1)
    {
        echo $som[$i];
        echo "<br/>";
    } 
```

这里有一些有用的链接。

[http://us2.php.net/language.types.type-juggling](http://us2.php.net/language.types.type-juggling)

[http://us2.php.net/manual/en/language.types.string.php#language.types.string.conversion](http://us2.php.net/manual/en/language.types.string.php#language.types.string.conversion)

# ruby-on-rails - 将查询字符串中的多维数组传递给 Rails 中的控制器

> ID：12397276
> 
> 赞同：3
> 
> 时间：2012-09-12T23:08:27.250
> 
> 标签：ruby-on-rails, controller, query-parameters

将多维数组传递给 rails 控制器时，它似乎无法正确解析。我做错了吗？

```
url: http://localhost:3000/people?sort[][]=lastname&sort[][]=1&sort[][]=firstname&sort[][]=1
params: {
          "sort" => [
        [0] nil,
        [1] nil,
        [2] nil,
        [3] nil
    ],
        "action" => "index",
    "controller" => "people"
} 
```

应该：

```
params: {
          "sort" => [
        [0] => [
          [0] => 'lastname',
          [1] => 1
        ],
        [1] = > [
          [0] => 'firstname',
          [1] => 1
        ]
    ],
        "action" => "index",
    "controller" => "people"
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T16:16:57.373

Rails 不支持查询字符串中的多维数组。

它支持一维数组：

```
http://localhost:3000/people?sort[]=lastname&sort[]=firstname
# params[:sort] == ['lastname', 'firstname'] 
```

并且还支持哈希：

```
http://localhost:3000/people?sort[lastname]=asc&sort[firstname]=desc
# params[:sort] == {:lastname => 'asc', :firstname => 'desc'} 
```

# python - 使用预先计算的文字 JSON 在 Python 中自定义 JSON 编码器

> ID：12397279
> 
> 赞同：9
> 
> 时间：2012-09-12T23:09:01.527
> 
> 标签：python, json

考虑我有一个特殊的对象，它可能包含一个文字 json 字符串，我打算将其用作更大 JSON 对象中的一个字段，作为文字值本身（不是包含 JSON 的字符串）。

我想编写一个可以完成此任务的自定义编码器，即：

```
> encoder.encode({
>     'a': LiteralJson('{}')
> })
{"a": {}} 
```

我不相信子类化 JSONEncoder 和覆盖默认值会起作用，因为充其量我可以返回字符串，这将使结果`{"a": "{}"}`。

当 LiteralJson 嵌套在另一个字典中的某个地方时，覆盖编码似乎也不起作用。

如果您有兴趣，这样做的背景是我将 JSON 编码的值存储在缓存中，在我看来，反序列化然后一直重新序列化是一种浪费。它是这样工作的，但其中一些值相当长，看起来像是一种巨大的浪费。

以下编码器将完成我喜欢的事情（但似乎不必要地慢）：

```
class MagicEncoder(json.JSONEncoder):

    def default(self, obj):
        if isinstance(obj, LiteralJson):
            return json.loads(obj.content)
        else:
            return json.JSONEncoder.default(self, obj) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T03:59:14.310

我刚刚意识到我最近有一个[类似的问题](https://stackoverflow.com/q/13188719/372643)。答案建议使用替换令牌。

可以使用自定义或多或少透明地集成此逻辑，该自定义`JSONEncoder`使用随机 UUID 在内部生成这些令牌。（我所说的“ `RawJavaScriptText`”相当于你的“ `LiteralJson`”。）

然后就可以`json.dumps(testvar, cls=RawJsJSONEncoder)`直接使用了。

```
import json
import uuid

class RawJavaScriptText:
    def __init__(self, jstext):
        self._jstext = jstext
    def get_jstext(self):
        return self._jstext

class RawJsJSONEncoder(json.JSONEncoder):
    def __init__(self, *args, **kwargs):
        json.JSONEncoder.__init__(self, *args, **kwargs)
        self._replacement_map = {}

    def default(self, o):
        if isinstance(o, RawJavaScriptText):
            key = uuid.uuid4().hex
            self._replacement_map[key] = o.get_jstext()
            return key
        else:
            return json.JSONEncoder.default(self, o)

    def encode(self, o):
        result = json.JSONEncoder.encode(self, o)
        for k, v in self._replacement_map.iteritems():
             result = result.replace('"%s"' % (k,), v)
        return result

testvar = {
   'a': 1,
   'b': 'abc',
   'c': RawJavaScriptText('{ "x": [ 1, 2, 3 ] }')
}

print json.dumps(testvar, cls=RawJsJSONEncoder) 
```

结果（使用 Python 2.6 和 2.7）：

```
{"a": 1, "c": { "x": [ 1, 2, 3 ] }, "b": "abc"} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-02-12T05:04:20.477

> 在我看来，反序列化然后一直重新序列化是一种浪费。

这很浪费，但以防万一有人在寻找快速解决方法，这种方法可以正常工作。

抄袭布鲁诺的例子：

```
testvar = {
   'a': 1,
   'b': 'abc',
   'c': json.loads('{ "x": [ 1, 2, 3 ] }')
}

print json.dumps(testvar) 
```

* * *

结果：

```
{"a": 1, "c": {"x": [1, 2, 3]}, "b": "abc"} 
```

# php - 即使只有一行，是否有必要循环遍历 MySQL 查询结果？

> ID：12397282
> 
> 赞同：-2
> 
> 时间：2012-09-12T23:09:20.143
> 
> 标签：php, mysql, while-loop

在使用 PHP 进行特定查询后，我有一个 `$result`变量，其中只有数据库返回的 1 行数据。

我想从这一行中检索数据，但不太热衷于需要整个 while 循环来完成这个看似简单的请求。

有没有更好的方法来获取数据？我认为`mysqli_fetch_row()`可能会成功，但它似乎只允许通过整数索引进行访问。

有更好的解决方案吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:11:39.853

如果您确定总是只有一行，那么不，您不能使用循环。

此外，您可以使用[`mysqli_fetch_assoc()`](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)而不是`mysqli_fetch_row()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:12:09.697

如果您知道只需要 1 行，则不需要循环，只需像在循环中一样分配变量即可。在查询中也使用“limit 1”。

# javascript - 当 div 向上或向下滚动时更改光标

> ID：12397287
> 
> 赞同：0
> 
> 时间：2012-09-12T23:10:14.613
> 
> 标签：javascript, jquery, html, scroll, cursor

我有一个实现 Scriptperlative 的 CursorDivScroll 脚本的 div。如何在使用脚本的 div 中实现两个自定义光标；一个在向下滚动时显示，一个在向上滚动时显示？这是我目前拥有的 javascript 和 HTML。javascript 只是 CursorDivScroll 脚本。

```
 <script type='text/javascript' >
     $(document).ready(function() {
 CursorDivScroll( 'repertoirescroll', 40, 40 ).noHorizontal();
     });
 </script> 

 #repertoirescroll {
 cursor: url(../images/arrow.png), auto;
 position:relative;

 } 
```

感谢您提前提供任何帮助。我想我需要实现一个 if 语句，如果 mousemove = mousedown 使用此光标，否则如果 mousemove = up 使用此光标...？不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:47:48.313

检查scrollTop是减少还是增加应该告诉你它是向上还是向下滚动，然后在滚动时根据它设置光标，并在滚动停止时使用超时重置光标：

```
var top=0, timer;

$(window).on('scroll', function() {
    clearTimeout(timer);
    var scrollTop = $(this).scrollTop(),
        cursor = scrollTop > top ? 'pointer' : 'wait';
    $('body').css('cursor', cursor);
    top = scrollTop;
    timer = setTimeout(function() {
        $('body').css('cursor', 'default');
    }, 500);
});​ 
```

[**小提琴**](http://jsfiddle.net/JjjtN/)

# gwt - 根据内容自动调整选项卡面板的大小

> ID：12397288
> 
> 赞同：1
> 
> 时间：2012-09-12T23:10:16.910
> 
> 标签：gwt

你好我已经实现了类似的东西

```
private VerticalPanel resultPanel;
private TabLayoutPanel tabPanel = new TabLayoutPanel(2.5, Unit.EM);
ResizeLayoutPanel resizePanel = new ResizeLayoutPanel();

myMethod(){
    resizePanel.setWidth("100%");
    resizePanel.setHeight("415px");
    resizePanel.setWidget(tabPanel);

    resultPanel = new VerticalPanel();
    resultPanel.setWidth("100%");
        resultPanel.add(resizePanel);

        tabPanel.add(myVerticalPanel, tabHeader);
} 
```

所以 myVerticalPanel 是高度稍大的实际内容。由于 resizePanel 高度设置为 415px，因此其余内容被隐藏。

我正在寻找两件事来实现：1.如果有更大的屏幕可用，则增加 tabPanel 区域以自动显示更多内容 2.如果屏幕很小，则出现滚动以查看其余内容

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:39:14.503

您可以尝试`TabLayoutPanel`用[HeaderPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HeaderPanel.html)替换：

> 包含页眉（顶部）、页脚（底部）和内容（中间）区域的面板。页眉和页脚区域会自然调整大小。内容区域分配了页眉和页脚区域之间的所有剩余空间。

或者，您可以覆盖计算嵌入内容高度的`onResize()`方法并设置适当的高度。`ResizeLayoutPanel`

如果你想要滚动功能，你必须将你嵌入`VerticalPanel`到[ScrollPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/ScrollPanel.html)或使用 CSS 来设置 oferflow 属性。

# xml - 无法在 xmldp 查询中传递参数

> ID：12397299
> 
> 赞同：0
> 
> 时间：2012-09-12T23:10:49.757
> 
> 标签：xml, web-services, visual-studio-2008, reporting-services

我有一个 Web 服务，我正在使用 xmldp 查询调用一个方法。它看起来像这样：

```
<Query>
<Method Name="MyRequest" Namespace="MySchema">
    <Parameters>
        <Parameter Name="db">
           <DefaultValue>DefaultDB</DefaultValue>
        </Parameter>
        <Parameter Name="Param1">
           <DefaultValue>DefaultParam1</DefaultValue>
        </Parameter>
        <Parameter Name="Param2">
           <DefaultValue>DefaultParam2</DefaultValue>
        </Parameter>
    </Parameters>
</Method>
<ElementPath IgnoreNamespaces="true">
            MyPath/path....
</ElementPath>
</Query> 
```

我看到的问题是，当我执行查询时，db 和 Param1 参数传递正常，但 Param2 参数总是作为 null 传递！关于为什么它总是 null 而不是我的默认值的任何想法？我已经确认该参数在到达 Web 服务之前已经以 null 的形式出现，因此我在 Web 服务中的方法没有问题。我还检查了报告参数，三者之间的一切都是一样的。对不起，如果我太含糊了，我是 SSRS 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:14:07.447

我为将来遇到此问题的任何人找到了答案...

我的查询本身没有问题，但事实证明您需要在 Dataset Properties 中按字母顺序设置查询参数。不知道为什么会这样，但这就是让我的数据集工作的原因。

```
Right Click the Dataset > Dataset Properties > Parameters 
```

# php - 一些数组和多维数组一起显示

> ID：12397308
> 
> 赞同：0
> 
> 时间：2012-09-12T23:13:00.370
> 
> 标签：php

以下是变量：

```
$ids = array_unique($_POST['id']);
$total_ids = count($ids);

$name = $_POST['name'];

$positions = $_POST['position'];
$total_positions = count($positions); 
```

这是 print_r 显示的内容：

```
[id] => Array ( 
    [0] => 3 
    [1] => 7 ) 

[name] => Array ( 
    [0] => George 
    [1] => Barack ) 

[position] => Array ( 
    [1] => Array ( 
        [0] => 01 
        [1] => 01 ) 
    [2] => Array ( 
        [0] => 01 
        [1] => 01 
        [2] => 01 ) ) 
```

这是我想在刷新/提交时得到的结果：

```
[id][0];
    [name][0];
        [position][1][0];[position][1][1]
[id][1];
    [name][1];
        [position][2][0];[position][2][1];[position][2][2] 
```

为了使想要的结果很清楚：

```
User with [id][0] 
    is called [name][0] 
        and works at [position][1][0];[position][1][1]
BUT

User with [id][1]
    is called [name][1];
        and works at [position][2][0];[position][2][1];[position][2][2] 
```

请注意，`[position]`s 以 开头`[1]`，而不是`[0]`。

**我怎样才能按我显示的顺序显示数组？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:24:56.677

我不是 100% 确定我了解您的需求，但是为了尝试匹配您显示的输出的最终示例，我想出了以下内容：

```
// iterate through each of the `$ids` as a "user"
foreach ($ids as $key => $value) {
    // output the user's ID
    echo 'User with ' . $value;
    if (isset($name[$key])) {
        // output the user's name
        echo ' is called ' . $name[$key];
    }
    if (isset($position[$key + 1])) {
        // output a ';'-delimited list of "positions"
        echo ' and works at ';
        $positions = '';
        // the `$positions` array starts with index 1, not 0
        foreach ($position[$key + 1] as $pos) {
            $positions .= (($positions != '') ? ';' : '') . $pos;
        }
        echo $positions;
    }
    echo '<br />';
} 
```

这将提供类似于以下内容的输出：

> 拥有 1 的用户称为 Bill，在 pos1;pos2;pos3 工作
> 拥有 14 的用户称为 Jill，在 pos134 工作

# php - MongoDB $where 递归

> ID：12397310
> 
> 赞同：0
> 
> 时间：2012-09-12T23:13:10.597
> 
> 标签：php, mongodb, nosql

我想在 $where 表达式中使用递归，但下面的代码不起作用。我哪里错了？谢谢！)

```
$code = new MongoCode('

function foo(bar) {
   if (bar.catId == 100) {
      return true;
   } else {
     if (bar.child) {
        foo(bar.child);
     }
   }

}

foo(this);

');

$result = $db->categories->find(
    array(
        '$where' => $code
    )
)->count(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:52:37.877

你真的不想使用这种[服务器端代码执行](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution)；JavaScript 子句的评估`$where`是一个严重的性能障碍。

您应该尽可能使用内置运算符。

在这种情况下，[$or](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)会更合适：

```
$result = $db->categories->find(
    array('$or' => array(
            array("catId" => 100),
            array("child.catId" => 100)
        )
    )
); 
```

# sencha-touch - 煎茶触摸石斑鱼属性转换

> ID：12397312
> 
> 赞同：1
> 
> 时间：2012-09-12T23:13:20.387
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个从 Json 商店读取的列表，其中包含 int 类型字段的石斑鱼。该字段在下面的示例模型中称为“req”。但是，我不想按 int 值分组，而是分配一个文本值，例如，如果是“1”，我会按“是”分组，如果是“0”，我会按“否”分组”。转换可以硬编码，因为它不会改变。在我的代码中哪里进行这种转换？谢谢你的帮助

```
Ext.define('MyApp.store.MyStore', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.MyData'
    ],

    config: {
        model: 'MyApp.model.MyData',
        storeId: 'MyStore',
        proxy: {
            type: 'ajax',
            url: '/path/to/data.json',
            reader: {
                type: 'json',
                rootProperty: 'items'
            }
        },
        grouper: {
            property: 'req',
            sortProperty: 'req'
        },
        groupDir: 'DESC'
    }
}); 
```

模型：

```
Ext.define('Mypp.model.MyModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {
                name: 'example',
                type: 'string'
            },
        {
                name: 'req',
                type: 'int'
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:20:56.010

[使用convert()](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Field-cfg-convert)函数将计算字段添加到模型中：

```
Ext.define('Mypp.model.MyModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {
                name: 'example',
                type: 'string'
            },
            {
                name: 'req',
                type: 'int'
            },
            {
                name: 'reqDisplay',
                type: 'string',
                convert: function (value, record) {
                    if (value == null) {
                         var req = record.get('req');
                         value = req ? 'Yes' : 'No'
                    }
                    return value;
                 }
            }
        ]
    }
}); 
```

...并改用它

```
 grouper: {
        property: 'reqDisplay',
        sortProperty: 'reqDisplay'
    }, 
```

干杯，奥列格

# python - Python：每小时检查一次 url 请求

> ID：12397313
> 
> 赞同：1
> 
> 时间：2012-09-12T23:13:42.800
> 
> 标签：python, time, urlrequest

我正在访问一个 api 并提取一个 json，但我想确保我保持在每小时请求限制内，最好的方法是什么？

这是我提出请求的地方：

```
# return the json
def returnJSONQuestion(id):
    url = 'http://someApi.com?index_id={0}&output=json'
    format_url = url.format(id)
    try:
        urlobject = urllib2.urlopen(format_url)
        jsondata = json.loads(urlobject.read().decode("utf-8"))
        print jsondata
        shortRandomSleep()
    except urllib2.URLError, e:
        print e.reason
    except(json.decoder.JSONDecodeError,ValueError):
        print 'Decode JSON has failed'
    return jsondata 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:58:07.167

我通常使用廉价的 hack，通过检查当前时间使脚本每隔一分钟运行一次。这是函数的一般形式：

```
def minuteMod(x, p=0):
    import datetime
    minute = datetime.datetime.now() + datetime.timedelta(seconds=15)
    minute = int(datetime.datetime.strftime(minute, "%M"))
    if minute % x == p:
        return True
    return False 
```

`p`是这里的余数，并且有一个默认值，`0`所以不需要特别传入第二个参数。

所以基本上，如果你希望你的脚本每隔一分钟运行一次，你可以像这样使用它：

```
def returnJSONQuestion(id):

    if not minuteMod(2):
        return None or ''

    # rest of the code 
```

如果当前分钟不均匀，这将停止请求。考虑到这不是最好的处理方式，您可以使用此功能来缓存结果（取决于是否允许这样做）。所以基本上，你会做这样的事情：

```
def returnJSONQuestion(id):

    if minuteMod(3): # current minute is a factor of 3
        return jsonFromCache # open a file and output cached contents
    else:
        url = 'http://...'
        storeJSONToFile(url)
        return json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:18:32.457

您可以使用[令牌桶算法](http://en.wikipedia.org/wiki/Token_Bucket)，如下所示：[http ://code.activestate.com/recipes/511490/](http://code.activestate.com/recipes/511490/)

以 API 允许您发出请求的速率将令牌添加到存储桶中，并在您每次发出请求时从存储桶中获取一个令牌。

# objective-c - Objective C 语法：什么是->？

> ID：12397315
> 
> 赞同：0
> 
> 时间：2012-09-12T23:13:54.650
> 
> 标签：objective-c, runtime

> **可能重复：**
> [Objective C 中的“->”是什么？](https://stackoverflow.com/questions/4486048/what-is-in-objective-c)

初学者问题在这里。我正在浏览目标 c 运行时的介绍（[http://mikeash.com/pyblog/friday-qa-2009-03-13-intro-to-the-objective-c-runtime.html](http://mikeash.com/pyblog/friday-qa-2009-03-13-intro-to-the-objective-c-runtime.html)），我看到了这个时髦带有 -> 的语法。似乎无法找到关于这意味着什么的解释。

容易点任何人？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T23:16:07.367

这实际上是 C 语法。它用于访问指向结构的指针的字段（变量）。

当你有一个指针时，你必须使用`*`语法来取消引用它：

```
int var = 1;   // regular int variable
int *ptr = &var;  // pointer to that variable
int sum = (*ptr) + 3;   // if you want to use it regularly, you have to dereference it first. 
```

现在，如果这个指针恰好是一个结构指针，它会变得很丑：

```
// Define and typedef a struct.
typedef struct {
    int num1;
    int num2; 
} MyStruct;

MyStruct myStruct = (MyStruct){1, 2};   // Regular struct.
MyStruct *pointer = &myStruct;          // Pointer to that struct.
int sum = (*pointer).num1 + (*pointer).num2;   // The ugly part.
int niceSum = pointer->num1 + pointer->num2;   // Same thing with cleaner code. 
```

# php - PHP乘以十进制变量

> ID：12397318
> 
> 赞同：-1
> 
> 时间：2012-09-12T23:14:34.330
> 
> 标签：php, xml

我正在尝试创建一个将插入 mysql 表的全局价格标记。我从 simplexml 元素中获取一个变量，并将其乘以一个由表单插入的数字，但得到的答案不正确。

从 xml 文件调用的变量四舍五入为整数，然后乘以 $_post 变量。

样本..

```
$myprodprice = $myproduct->PRODUCTS_PRICE; // the xml value (sample is 2.33)
$mymarkup = $_post['mymarkup'];
echo $myprodprice;
echo $mymarkup;
$mymultiply = $myprodprice * $mymarkup;
echo $mymultiply; 
```

结果将是

2.33

3.5

7

它最终会在相乘时忽略 xml 变量十进制数字，但否则它将正确回显。

欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:35:26.020

用于`floatval()`在乘法之前将字符串转换为浮点值。

# java - 如何实现结果不可预知的服务器端分页

> ID：12397320
> 
> 赞同：1
> 
> 时间：2012-09-12T23:14:38.520
> 
> 标签：java, caching, pagination, server-side

我将一堆工具存储在一个表中，每个工具关联的事务存储在其子表中。我有一个算法，可以根据它在事务表条目中的性能来确定要购买的工具。我的算法输出可能会建议购买工具，并且可能不会基于其性能。

我的最终目标只是逐页（带有服务器端分页）显示算法推荐购买的工具列表。我的问题是，如果我获取前 10 个工具及其交易并将其作为算法的输入，我的算法可能会或可能不会推荐购买所有工具，在这种情况下，有资格显示的工具是不够的对于当前页面。我必须再次返回数据库并获取更多数据，直到我的结果足以显示当前页面（其中包括太多的数据库迭代）。

我目前正在获取所有内容并在服务器端（使用 Ehcache）缓存结果集合，并对我的集合应用服务器端分页。但是，如果太多并发用户访问此页面，这会导致服务器内存不足。

这种问题的最佳解决方案是什么..!!？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:51:14.217

恐怕没有灵丹妙药的解决方案，但我想在这里分享我的想法

通常，如果您想要准确的分页结果，理想情况下您需要在同一个事务中运行所有迭代，否则由于可以对持久存储进行并行更新，数据将不会保持一致。但是，我不确定您的帖子是否可行。

因此，请考虑以下事项：

*   不要像现在那样将所有内容都存储在内存中，而是在内存中维护一些共享对象池，并且并行客户只会存储指向您的对象而不是整个对象的指针。

*   对结果进行某种序列化。除了琐碎的序列化之外，您可能对它与 ehcache 一起使用的“堆外内存”感兴趣：http: [//ehcache.org/documentation/user-guide/bigmemory](http://ehcache.org/documentation/user-guide/bigmemory)

*   考虑在整个迭代过程中只存储工具 ID，并且可能只存储算法做出决策所需的最少数据。然后，当您准备好显示结果时，发出额外的请求，并通过提供一系列 id 作为输入，从持久层带来显示结果所需的内容。您可能仍然不需要所有数据，这将节省您的内存

*   增加堆。琐碎的 ：-）

希望这可以帮助

# treeview - 每个 TreeItem 的唯一 ContextMenu

> ID：12397321
> 
> 赞同：0
> 
> 时间：2012-09-12T23:14:42.123
> 
> 标签：treeview, contextmenu, javafx

我可以通过自定义 cellFactory 为 TreeView 设置 ContextMenu，但问题是该菜单适用于树中的所有项目。有没有办法将不同的 contextMenus 绑定到不同的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:30:51.187

根据设计，`TreeCell`您定义的自定义将在呈现树视图项值时多次重用，这是一件好事。在`updateItem`方法中，您可以根据作为参数传递给此`updateItem`方法的项目来更改“当前”上下文菜单的内容。

# performance - for循环的运行时间

> ID：12397326
> 
> 赞同：4
> 
> 时间：2012-09-12T23:15:18.893
> 
> 标签：performance, big-o

我似乎理解了更简单循环的基本概念......第一个循环在 O(n) 中运行，内部循环也是如此。因为它们都是嵌套的，所以乘以得到 O(n^2) 的总运行时间。

```
sum = 0; 
for ( i = 0; i < n; i++ ) 
  for j = 0; j < n; j++ ) 
    ++sum; 
```

虽然当事情开始发生转变时，我完全不知道如何解决这个问题。有人可以向我解释如何计算以下两项的运行时间吗？此外，任何可以进一步帮助我改进的易于理解的参考资料的链接也值得赞赏。谢谢！

```
sum = 0; 
for( i = 0; i < n; i += 2 ) 
  for( j = 0; j < n; j++ ) 
    ++sum; 
```

我可以从中收集到的唯一信息是内部循环在 O(n) 中运行。i+=2 真的让我陷入了外循环。

```
sum = 0; 
for( i = 1; i < n; i *= 2 ) 
  for( j = 0; j < n; j++ ) 
    ++sum; 
```

根据我的尝试...外循环是 O(log(n))，内循环是 O(n)，所以总是 O(n log(n))？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:52:00.417

考虑 Big-O 性能的一个好方法是假设代码的每个元素都是一个数学函数，它接受`n`项目并返回对这些项目执行的计算次数。

例如，一个`for`类似的循环`for ( i = 0; i < n; i++ )`相当于一个函数`i()`，其中`i(n) = n`表示对每个输入执行一次计算`n`。

如果您有两个嵌套循环，则功能等价于

```
for ( i = 0; i < n; i++ ) 
   for j = 0; j < n; j++ ) 
```

看起来像这两个函数：

```
i(n) = n * j(n)
j(n) = n 
```

处理这两个函数会产生最终结果`n*n = n^2`，因为`j(n)`可以替换为`n`。

这意味着只要您可以解决任何单个循环的 Big-O，您就可以将这些解决方案应用于一组嵌套循环。

例如，让我们看看您的第二个问题：

```
for( i = 0; i < n; i += 2 ) 
  for( j = 0; j < n; j++ ) 
```

`i+=2`意味着对于输入的一组`n`项目`(n0, n1, n2, n3, n4)`，您只接触该组的所有其他元素。假设您初始化了`i=0`，这意味着您只接触了 的集合`(n0,n2,n4)`。这意味着您将用于处理的数据集的大小减半，并且意味着功能等价物的结果如下：

```
i(n) = (n/2) * j(n)
j(n) = n 
```

解决这些让你`(n/2) * n = (n^2)*(1/2)`。由于这是 Big-O 工作，我们删除常量以产生 的 Big-O 值`(n^2)`。

这里要记住的两个关键点：

1.  Big-O 数学从一组`n`数据元素开始。如果您尝试确定`for`循环遍历该组`n`元素的 Big-O，则第一步是查看增量器如何更改`for`例程实际接触的数据元素的数量。

2.  Big-O 数学就是*数学。*如果您可以单独解决每个`for`表达式，您可以使用这些解决方案来构建您的最终答案，就像您可以解决一组具有共同定义的方程一样。

# c# - 从模型优先迁移到代码优先：使用 EF 5.x DbContext Fluent Generator 的复杂类型

> ID：12397329
> 
> 赞同：0
> 
> 时间：2012-09-12T23:15:56.947
> 
> 标签：c#, entity-framework, visual-studio-2012, entity-framework-5

我正在使用来自 NuGet 的最新 EntityFramework 5。我不知道我是否做错了，但复杂类型似乎不适用于此模板！（？？？）无论我做什么，我总是得到这个编译时错误：

**运行转换：System.InvalidCastException：无法将“System.Data.Metadata.Edm.ComplexType”类型的对象转换为“System.Data.Metadata.Edm.PrimitiveType”类型。**

例如：

1.  我创建了一个空模型“SimpleModel”，然后在其中添加了一个简单实体“Foo”和一个复杂类型“Bundle”的名为“Something”的复杂属性。使用 EDM 设计器完成所有这些工作。

2.  我去了“从模型生成数据库”，以便将模型保存在 SQLEXPRESS DB 中。运行脚本，一切顺利。我测试了使用新实体模型编写一些东西，它运行良好，即 SaveChanges() 运行良好。

3.  我去“添加代码生成项”并选择了这个模板：*EF 5.x DbContext Fluent Generator*创建“SimpleModel.tt”系列模板文件，我立即得到了上面的错误。

在查看“SimpleModel.Mapping.tt”模板生成的“SimpleModel.Mapping.cs”文件时，我看到这个代码文件不完整。这是唯一不完整的文件，即映射代码的生成中断。此模板是否与最新的 EF 5 兼容？

我有一个现有的数据库，其中有几个表和一个基于 and 的实体模型`ObjectContext`（`EntityObjects`即模型优先的东西）。最重要的是，我有一个现有的数据层，它利用映射到这些表的实体，并且大量数据被适当地捆绑在复杂类型中（捆绑的数字和文本内容没有身份）。

**关键是我需要将我的实体模型从使用`ObjectContext`and迁移`EntityObjects`到`DbContext`and `POCOs`，然后我想去 Code-First。**我该怎么做？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:38:43.957

> 我该怎么做？

恕我直言，要么使用[EF Power 工具](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)（但我认为它们还不支持 EF 5）和反向工程数据库，要么自己编写代码先映射。

该生成器不是由 MS 提供的，如果您对它有任何问题，您应该将其作为错误报告给它的开发人员。如果您[在 Visual Studio 库中检查此生成器的 Q/A，](http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c)它声称不支持复杂类型。

# sql - 如何只选择 SQL 中具有不同版本的文档列表的最大版本？

> ID：12397330
> 
> 赞同：0
> 
> 时间：2012-09-12T23:16:00.120
> 
> 标签：sql, oracle11g

我有一个如下所示的数据库表：

```
| ID | TITLE | VERSION | 
| 1  | file1 |    1    |
| 2  | file2 |    1    |
| 3  | file1 |    2    |
| 4  | file2 |    2    | 
```

我需要一个返回第 3 行和第 4 行的 SQL 查询，因为它们是 file1 和 file 2 的最新版本。

如果我在如下所示的表上运行查询：

```
| ID | TITLE | VERSION | 
| 1  | file1 |    1    |
| 2  | file2 |    1    |
| 3  | file1 |    2    |
| 4  | file2 |    2    |
| 5  | file3 |    1    | 
```

它应该返回第 3,4 和 5 行，因为“file3”version1 是 file3 的最新版本。

我知道我需要在 SQL 中使用“MAX”函数，但是我被“GROUP BY”关键字抛弃了。我不是很熟悉如何使用它。

将不胜感激所有/任何建议！

我们正在使用 Oracle 11g。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:20:04.587

实际上，使用子查询来获取`MAX`按 分组的版本， `TITLE`然后将其结果与您的表连接以获得`ID`：

```
SELECT t.*
FROM tbl t INNER JOIN 
     (SELECT title, MAX(version) version
      FROM tbl
      GROUP BY title
     ) max_t ON (t.version = max_t.version AND t.title = max_t.title); 
```

**[演示](http://sqlfiddle.com/#!4/58558/2)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:54:40.353

实际上，最好的方法是使用排名函数：

```
select id, title, version
from (select t.*
             row_number() over (partition by id order by version desc) as seqnum
      from t
     ) t
where seqnum = 1 
```

函数 row_number() 在 Oracle 中称为解析函数。它分配数字 1, 2, 3 。. . 到每一行，基于分区子句。数字从每个 id 开始，最大的版本从 1 开始。

# android - addTextChangedListener 动态获取 EditText

> ID：12397335
> 
> 赞同：1
> 
> 时间：2012-09-12T23:16:11.603
> 
> 标签：android, android-edittext, textwatcher

我有动态生成并动态添加 addTextChangedListeners 的 EditTexts 向量。

问题是“afterTextChanged”上返回的 Editable 并没有让我知道该侦听器与哪个 EditText 相关联。

有没有办法从 TextWatcher 中调用相应的 EditText？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:16:50.987

我建议创建自己的 TextWatcher，但在我在这里放下未经测试的伪代码之前，我发现还有另一个名叫 Sebastian Roth 的人已经这样做了。

查看他的答案： [TextWatcher for more than one EditText](https://stackoverflow.com/questions/4283062/textwatcher-for-more-than-one-edittext)

# email - 是否可以运行在 AppHarbor 上发送电子邮件的 Windows 服务？

> ID：12397337
> 
> 赞同：0
> 
> 时间：2012-09-12T23:16:23.500
> 
> 标签：email, service, appharbor

AppHarbor 是否仅用于网站托管，或者是否可以在其上运行 Windows 服务以每天在 X 时间发送电子邮件。我有一个电子邮件发送服务，我想与我的网站集成。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:08:13.930

AppHarbor 还支持[后台工作人员](http://blog.appharbor.com/2012/03/08/background-workers-in-beta)，使用它们来安排任务[非常简单](http://blog.appharbor.com/2012/4/18/scheduled-tasks-using-quartz-and-appharbor-background-workers)。

对于发送电子邮件，您应该考虑使用其中一种[电子邮件插件](https://appharbor.com/addons)。

# python - Python：将列表元组的嵌套列表转换为字典？

> ID：12397339
> 
> 赞同：1
> 
> 时间：2012-09-12T23:17:01.520
> 
> 标签：python, list, recursion, dictionary, nested

我有一个嵌套的列表元组列表（元组等），如下所示：

```
[(' person', 
[(('surname', u'Doe', True),), 
(('name', u'John', False),), 
('contact', 
[(('email', u'john@doe.me', True),), 
(('phone', u'+0123456789', False),), 
(('fax', u'+0987654321', False),)]), 
('connection', 
[(('company', u'ibcn', True),), 
('contact', 
[(('email', u'mail@ibcn.com', True),), 
(('address', u'main street 0', False),), 
(('city', u'pythonville', False),), 
(('fax', u'+0987654321', False),)])])])] 
```

既无法知道列表中（双）元组的数量，也无法知道嵌套的深度。

我想将其转换为嵌套字典（字典），消除布尔值，如下所示：

```
{'person': {'name': 'John', 'surname': 'Doe', 
    'contact': {'phone': '+0123456789', 'email': 'john@doe.me','fax': '+0987654321',
    'connection': {'company name': 'ibcn', 'contact':{'phone': '+2345678901',
                   'email': 'mail@ibcn.com', 'address': 'main street 0'
                   'city': 'pythonville', 'fax': +0987654321'
}}}}} 
```

到目前为止，我所拥有的只是一种递归方法，可以以每行的方式打印嵌套结构：

```
def tuple2dict(_tuple):
    for item in _tuple:
        if type(item) == StringType or type(item) == UnicodeType:
            print item
        elif type(item) == BooleanType:
            pass
        else:
            tuple2dict(item) 
```

但是，我不确定我是否走在正确的轨道上......

编辑：我已经编辑了原始结构，因为它缺少逗号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:27:39.593

你在正确的轨道上。递归方法将起作用。据我从您的示例数据中可以看出，每个元组*首先*都有字符串项，其中包含键。之后，您有另一个元组或列表作为值，或者一个字符串值后跟一个布尔值 true 或 false。

**编辑：**

递归的诀窍是你必须知道什么时候停止。基本上，在您的情况下，最深的结构似乎是嵌套的三个元组，将名称与值匹配。

偷偷摸摸。我可耻地承认这是世界上最丑陋的代码。

```
def tuple2dict(data):
    d = {}
    for item in data:
        if len(item) == 1 and isinstance(item, tuple):
            # remove the nested structure, you may need a loop here
            item = item[0]
            key = item[0]
            value = item[1]
            d[key] = value
            continue
        key = item[0]
        value = item[1]
        if hasattr(value, '__getitem__'):
            value = tuple2dict(value)
        d[key] = value
    return d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:38:49.440

不漂亮......但它有效......基本上

```
def t2d(t):
 if isinstance(t,basestring):return t
 length = len(t)
 if length == 1:
     return t2d(t[0])
 if length == 2:

     t1,t2 = t2d(t[0]),t2d(t[1])
     print "T:",t1,t2
     if isinstance(t1,dict) and len(t1) == 1:
         t2['name'] = t1.values()[0]
         t1 = t1.keys()[0]
     return dict([[t1,t2]])
 if length == 3 and isinstance(t[2],bool):
     return t2d(t[:2])

 L1 =[t2d(tp) for tp in t]
 L2 = [lx.items() for lx in L1]
 L3 = dict( [i[0] for i in L2])
 return L3 
```

我应该提到它特别适用于您发布的 dict...（似乎公司设置不正确，所以我破解了它（参见 t2['name']...））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T23:31:06.037

你绝对是在正确的轨道上。递归函数是要走的路。

可以从长度为 2 的可迭代元组构建字典。现在，要摆脱布尔值，您可以使用切片。只需切掉除前两个元素之外的所有内容。

```
 >> (1,2,3)[:3]
 (1,2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:37:33.293

这是我的最终解决方案。不是很优雅，我必须承认。它还通过将密钥与现有条目连接来处理密钥的多个条目。

```
def tuple2dict(_obj):
    _dict = {}
    for item in _obj:
        if isinstance(item, tuple) or isinstance(item, list):
            if isinstance(item[0], basestring):
                _dict[item[0]] = tuple2dict(item[1])
            else:
                if isinstance(item[0], tuple):
                    # if the key already exists, then concatenate the old
                    # value with the new one, adding a space in between.
                    _key = item[0][0]
                    if _key in _dict:
                        _dict[_key] = " ".join([_dict[_key], item[0][1]])
                    else:
                        _dict[_key] = item[0][1]
    return _dict 
```

# c++ - 错误：“类 std::stack<>”没有名为“pop_back”的成员

> ID：12397341
> 
> 赞同：0
> 
> 时间：2012-09-12T23:17:19.100
> 
> 标签：c++

```
void MazeSolver::solveMaze()
{
    stack<Cell> myStack;
    Cell current = myVector.getAt(0, 0);
    myStack.push_back(current);
    int x, y;
    while (myStack.size() != 0)
    {
        current = myStack.pop_back();
        x = current.x_coord;
        y = current.y_coord;
    }
} 
```

我收到以下编译时错误：

`/Users/snihalani/dev/c++rec/c++hw at 7:11PM`

`➜ main.cpp: In member function 'void hw1::MazeSolver::solveMaze()':`

`main.cpp:55:17: error: 'class std::stack<hw1::Cell>' has no member named 'push_back'` `main.cpp:59:31: error: 'class std::stack<hw1::Cell>' has no member named 'pop_back'`

`[1] + 18262 exit 1 g+ --std=c++11 main.cpp`

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T23:18:54.177

更改`push_back`为`push`和。`pop_back`_ `pop`有关更多信息，请使用[良好的参考](http://en.cppreference.com/w/cpp/container/stack)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T23:18:55.553

`std::stack<>`有一个名为 的成员函数`pop`和另一个名为`push`. 堆栈只能在后面进行操作，它只是`push`and `pop`。

# java - GWT addSubmitCompleteHandler 调用了两次

> ID：12397345
> 
> 赞同：0
> 
> 时间：2012-09-12T23:17:45.423
> 
> 标签：java, gwt, submit, double-submit-problem

我有一个表单面板（myForm），在一个简单的面板上添加了一个提交按钮。每次按下提交时 myForm.addSubmitCompleteHandler 被调用两次

```
 mySubmit.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {         
                myForm.submit();
        }});
         ...
         myForm.addSubmitCompleteHandler(new SubmitCompleteHandler() {
            @Override
            public void onSubmitComplete(SubmitCompleteEvent event) {
                // what ever's here happens twice
            }
        }); 
```

我已经仔细检查了我的代码以及小部件和面板的排序和放置。这可能是什么原因造成的？

我想要实现的是提交已完成的警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:44:02.310

好像加了一行

```
event.preventDefault() 
```

在提交按钮的 addClickHandler 中有帮助。还要确保表单没有重复的 setAction 调用

# java - playOrm - 调试/运行 - TestManyToOne.java 带断点@ line79

> ID：12397348
> 
> 赞同：1
> 
> 时间：2012-09-12T23:18:16.473
> 
> 标签：java, eclipse, playorm

按照建议，深入研究测试用例 TestManyToOne.java 并运行/调试 readWriteBasic(NoSqlEntityManager)

我得到 1 个错误。
readWriteBasic - （找不到方法）
*和*
无根测试
初始化​​错误

我在这里担心的是我没有选择介入。

![在此处输入图像描述](../Images/625be5ff3c99739076081e44172d616f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:01:47.133

你遇到了一个恼人的 Eclipse 错误。试试这个

1.  将光标放在文件中的其他位置（不在测试方法上），然后右键单击并运行为 -> Junit 测试。这行得通吗？它应该。
2.  现在将光标放在测试方法上，然后右键单击测试方法和运行方式-> Junit 测试。现在应该可以了。
3.  现在做与 #2 相同的操作，只是选择 Debug As -> Junit test

如果 #1 失败，则右键单击该项目，选择刷新，然后单击 Project -> Clean...，然后再次尝试所有 3 个步骤。

# apache - 什么是代理？在 Apache 中是什么？它有很多不同的含义吗？

> ID：12397349
> 
> 赞同：0
> 
> 时间：2012-09-12T23:18:16.887
> 
> 标签：apache, networking, proxy, distributed-system, osi

它与文件描述符无关。它是不同协议之间的某种联系吗？还有更多这样的存在吗？反向代理？直接代理？间接代理？代理是指 OSI 参考模型中的 3 层、7 层还是不同的层？如果您有 NAT，则您有 3 层，而 7 层是根据 Wikipedia [here](http://en.wikipedia.org/wiki/Proxy_server)的通用代理。维基百科继续`"Because NAT operates at layer-3, it is less resource-intensive than the layer-7 proxy, but also less flexible"`——有不同种类的代理方式：

![在此处输入图像描述](../Images/918b737b113d400573110f49a523362f.png)

![在此处输入图像描述](../Images/1da85fbc87d0fd559b5e41a93eefcc5e.png)

所以现在是一个非常愚蠢和傲慢的问题`"What is a proxy in Apache?"`

**我试图更深入地了解代理的其他无知问题**

> 2.  [https://stackoverflow.com/questions/12397242/explain-apache-mod-proxy-module-is-it-overused-and-many-times-a-red-herring-w](https://stackoverflow.com/questions/12397242/explain-apache-mod-proxy-module-is-it-overused-and-many-times-a-red-herring-w)
>     
>     
> 3.  [解释 CouchDB 的网站服务，CouchDB 是否以某种方式与 Apache 捆绑在一起，它是如何工作的？](https://stackoverflow.com/questions/12397005/explain-couchdbs-serving-of-websites-is-couchdb-bundled-somehow-with-apache-an)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:32:20.400

Apache 是第 7 层代理（就 OSI 而言），它不使用网络地址转换或任何类型的数据包修改/重写。它接收请求并根据一些规则/配置，代表客户端发出请求。Apache 可以充当正向代理和/或反向代理。在上面的图片中，apache 将在红色的 blob 上运行。

*   在第一个图像中，apache 将充当反向代理，它接收来自 Internet 的 HTTP 请求，并将其代理到内部的特定位置。

*   在第二张图片中，apache 充当正向代理。本地用户正在使用它来请求互联网上的任何内容（在规则/配置内）。

*   在反向代理中，接收到对特定资源的请求，例如`http://my.homepage.com/`，apache 知道内容实际上在内部位于`http://192.168.2.45/my.homepage/`，将请求代理到内部位置。

*   在转发代理中，LAN 上的用户请求`http://www.google.com/`，浏览器或操作系统知道将请求代理到本地代理服务器（apache，图像中的红色 blob），然后 apache 向 www.google 发出请求。 com 代表用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:33:01.617

有不同种类的代理！关键是中间人，它以某种方式位于 A 和 B 的中间。我现在将使用 Tanenbaum 的术语（更多[在这里](https://stackoverflow.com/questions/12398389/different-definitions-of-the-term-proxy/12398390#12398390)）。例如，他在 Globus 安全模型的上下文中定义了两个不同的代理：**用户代理**和**资源代理**。然后他定义了**对象代理**，它是对象分布式系统中的一个接口。然后，他定义了一个**网络代理**，当客户端网络浏览器错过了诸如 ftp 支持之类的功能时，这是一种古老的想法。

现在根据 Jon Lin 的说法，反向/正向代理分别类似于资源/用户。对象代理和网络代理是特殊类型的实现。我认为它们实际上可以是资源代理或用户代理。如果你有 object -proxy，它可以用不同的方式实现：你可以实现它，以便用户授予使用它的权限，因此是用户代理，或者更多的全局活动，它有不同的方法与本地合作来自某个全局设置的环境，因此是资源代理。

**有关的**

> 1.  [https://stackoverflow.com/questions/12398389/different-definitions-of-the-term-proxy/12398390#12398390](https://stackoverflow.com/questions/12398389/different-definitions-of-the-term-proxy/12398390#12398390)

# c# - SettingsProviderAttribute 替换应用程序级自定义 SettingsProvider

> ID：12397351
> 
> 赞同：9
> 
> 时间：2012-09-12T23:18:22.497
> 
> 标签：c#, app-config, application-settings, settingsprovider

在 .NET 应用程序中，如果您有特定的设置需要，例如将它们存储在数据库中，那么您可以替换`LocalFileSettingsProvider`为您的自定义设置提供程序，例如：

[创建自定义设置提供程序以在应用程序之间共享设置](http://www.codeproject.com/Articles/136152/Create-a-Custom-Settings-Provider-to-Share-Setting)

[创建自定义设置提供程序](http://www.codeproject.com/Articles/20917/Creating-a-Custom-Settings-Provider)

`ApplicationSettingsBase`要声明要使用特定提供程序的设置类（继承的），请使用它进行装饰并将`SettingsProviderAttribute`提供程序类型作为参数传递`[SettingsProvider(typeof(MyCustomProvider))]`，否则它将使用默认值`LocalFileSettingsProvider`。

我的问题：**是否可以使用配置或技巧来强制我的应用程序在整个应用程序中使用我的自定义提供程序而不使用属性？**

原因是我正在通过 MEF 加载插件，并且插件可能是通过 3rd 方编写的，我不希望他们关心如何处理设置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:58:34.417

你可以试试下面的代码。它基本上在设置对象的构造过程中将默认提供者更改为任意提供者。请注意，我从未测试过此代码。

```
internal sealed partial class Settings {

    public Settings() {

        SettingsProvider provider = CreateAnArbitraryProviderHere();

        // Try to re-use an existing provider, since we cannot have multiple providers
        // with same name.
        if (Providers[provider.Name] == null)
            Providers.Add(provider);
         else
            provider = Providers[provider.Name];

        // Change default provider.
        foreach (SettingsProperty property in Properties)
        {
            if (
                property.PropertyType.GetCustomAttributes(
                    typeof(SettingsProviderAttribute),
                    false
                ).Length == 0
             )
             {
                 property.Provider = provider;
             }
         }
     }
} 
```

# actionscript-3 - AS3 > 在同一个动态文本字段中使用不同的文本样式（粗体和常规）

> ID：12397359
> 
> 赞同：1
> 
> 时间：2012-09-12T23:18:56.500
> 
> 标签：actionscript-3, flash, fonts, textfield

我已经使用 as3 很多年了，但每次我需要操纵字体时，我都会发疯:(

我的设置：我正在通过代码填充一个带有很多动态文本字段的movieClip。它们的值来自外部 XML。

我的问题：我的客户想要在 xml 中插入 html 标签，以便在其中包含粗体文本。例如，他们想要：“**此部分为粗体**的此字符串”。Xml 部分没问题，用 CDATA 等格式化。如果我跟踪来自 xml 的值是 html，但它在文本字段中显示为常规文本....

文本字段使用客户端自定义字体（不是系统字体），并通过图形设计师在 Flash 中嵌入对话框面板嵌入字体。

有什么帮助吗？

* * *

这是填充文本字段的代码部分（在 for 循环内）

```
 var labelToWrite:String = labelsData.label.(@id == nameOfChildren)[VarHolder.activeLang];
    if (labelToWrite != "") {
        foundTextField.htmlText = labelToWrite; 
        // trace ("labelToWrite is -->" +labelToWrite);
    } 
```

跟踪输出我

```
 This should be <b>bold text with b tag</b> and this should be <strong>strong text </strong>. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:50:25.453

你的代码看起来不错。所以问题将出在嵌入式字体上。当您在 Flash 中嵌入字体时，它不会嵌入任何单独的粗体版本，因此您可能需要嵌入字体的粗体版本。

一些资源： [带有 htmlText 的 Flash CS4 <b> 标记](https://stackoverflow.com/questions/2363903/flash-cs4-b-tag-in-with-htmltext)

我发现使用样式表来声明字体而不是文本格式时，html 文本效果最好。

```
 var style:StyleSheet = new StyleSheet();
               style.setStyle(".mainFont", { fontFamily: "Verdana", fontSize: 50, color: "#ff0000"            } );
           var foundTextField:TextField = new TextField();
           foundTextField.embedFonts = true;
           foundTextField.autoSize = TextFieldAutoSize.LEFT;
           foundTextField.antiAliasType = AntiAliasType.ADVANCED;
           foundTextField.styleSheet = style;
           foundTextField.htmlText = "<div class=\"mainFont\">" + labelToWrite + "</div>"; 
```

请参阅： [使用嵌入字体的 htmlText 中呈现的 flash as3 xml cdata 粗体标签](https://stackoverflow.com/questions/5035098/flash-as3-xml-cdata-bold-tags-rendered-in-htmltext-with-an-embedded-font)

其他原因可能是：您是否嵌入了正确的字体类型（TLF 与 CFF）？如果不使用 flash IDE 来制作你的 textField，你是在注册字体吗？

```
Font.registerFont(MyFontClass); 
```

# cordova - 原生、Web 还是混合移动应用程序？PhoneGap、Titanium 还是其他？

> ID：12397363
> 
> 赞同：1
> 
> 时间：2012-09-12T23:19:28.707
> 
> 标签：cordova, titanium, smartphone, mobile-application

我是移动领域的新手。

目前，我正在开发一个网站，用户可以在其中注册和创建个人资料。提供搜索功能，以便用户可以找到其他用户。它与约会网站非常相似。

在不久的将来，我想为我的用户提供一个可以在智能手机上运行的移动应用程序。这款手机的目标是：

*   身份验证/授权，希望使用网站的身份验证/授权功能，用户输入电子邮件地址/密码（或通过 Google/Yahoo OpenId 或 FB 的 OAuth 登录）。我不想尝试实现我自己的 OpenId/OAuth 系统。我希望它就像用户正在登录网站一样。就这么简单。
*   获取用户的地理位置信息。这样，我可以返回使用移动应用程序的其他用户列表以及他们计算出的距离（将使用简单的 Haversine 公式）
*   可能通过嗡嗡声或哔哔声向用户发送通知，只是为了引起用户的注意，以便他们查看他们的智能手机

由于 HTML5 支持地理定位，我可以将其作为我网站的一部分吗？例如：`if geolocation information is avalable, then do these, else just be the normal website`。我可以通过什么方式从网站上对用户的智能手机发出嗡嗡声或哔哔声？

如果无法将此作为我网站的一部分，我应该查看 PhoneGap、Titanium 还是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T23:25:25.597

您可以使用 Phonegap 和 Titanium 访问所有这三个功能。

**身份验证/授权 -** PhoneGap 的功能与您当前的网站几乎完全相同，因为 PhoneGap 只是包装 HTML 并允许您访问本机功能。Titanium 您必须设置一个 Web 服务，然后可以使用 HTTPClient 调用该服务。有很多[关于如何使用它的免费资源，比如这个链接。](http://developer.appcelerator.com/blog/2011/08/handling-remote-data-with-httpclient-and-json.html)

**振动和哔声警报 -** Phonegap 有`navigator.notification.vibrate()`和`navigator.notification.beep()`. Titanium 也有对这两者的 API 调用，`Titanium.Media.vibrate( [Number[] pattern] )`并且`Titanium.Media.beep()`.

**Geolocation** -Phonegap 地理定位也很容易通过这个调用来使用[`geolocation.getCurrentPosition`](http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html)。Titanium 也很简单，[请查看此视频以了解如何操作。](http://www.vimeo.com/9960118)

更大的问题是你是否应该使用这些，因为实际上只要使用 HTML5 就可以进行地理定位，而且音频也很容易实现，[尤其是使用 HTML5。](https://stackoverflow.com/a/1934325/874257)

如果您打算拥有一个功能与您的网站不同的应用程序，那么您真的应该只使用其中一种技术。如果您确实想制作一个应用程序，听起来 Phonegap 最适合您想要包装一些当前网站代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:13:39.450

这个问题的答案是相对的，但很明显。

如果您想在不打开他们的应用程序的情况下向使用移动应用程序的用户推送通知。您必须在他们的设备上安装本机应用程序。

现在是PhoneGap 和Titanium 之间的问题。基本的不同是

Titanium - 使用 Java Script 代码生成本机外观和感觉控件，用户可以享受比 PhoneGap 更多的动画和图形。Titanium 目前支持 iPhone 和 Android。

PhoneGap - 通过将控件呈现到移动设备的 Web 视图中来生成控件。这在外观上可能没有钛那么好，但优点是它支持 7 个平台。

现在你必须基于 UI 元素来思考。

# php - PHP：为什么 CURL 工作不一致？

> ID：12397372
> 
> 赞同：1
> 
> 时间：2012-09-12T23:20:51.953
> 
> 标签：php, curl

我正在尝试在 php 中执行这个简单的脚本：

```
$ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_HEADER, 0); // no headers in the output
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // output to variable
        curl_setopt($ch, CURLOPT_PROXYPORT, $proxy_port);
        curl_setopt($ch, CURLOPT_PROXYTYPE, 'HTTP');
        curl_setopt($ch, CURLOPT_PROXY, $proxy_ip);
        curl_setopt($ch, CURLOPT_PROXYUSERPWD, $opts['credentials']);
        $data = curl_exec($ch);
        curl_close($ch);

        echo $data; 
```

我不知道这是否是一些 TimeOut 提示的问题，或者它需要另一个参数但有时会带来页面而其他人不会，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:46:52.540

我所做的是用“curl_error”检查错误，这导致了我的问题。谢谢。

# asp.net-mvc-3 - T4MVC 排除文件或控制器

> ID：12397373
> 
> 赞同：0
> 
> 时间：2012-09-12T23:20:54.667
> 
> 标签：asp.net-mvc-3, t4, t4mvc

我有一个仅在 Debug 中构建的控制器（使用 #if DEBUG），我用它来容纳一些我不希望在生产服务器上使用的测试方法。

我遇到的问题是，使用 T4MVC 我得到了一个基于控制器的派生类，其中所有方法都重载。一旦我尝试在发布模式下构建，基类和虚拟操作方法不再存在并且我得到构建错误。

理想情况下，我希望能够从 T4MVC 中排除控制器，但我在设置文件中看不到这样做的方法，并且这个问题的答案：[T4MVC 如何排除单个文件](https://stackoverflow.com/questions/10887728/t4mvc-how-to-exclude-individual-files)表明它不可能。

任何人都知道这样做的方法或可以想到一个好的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-21T18:41:07.630

**在控制器上使用 T4MVC 属性**

```
[T4MVC(false)]
public Controller ControllerToIgnore //... 
```

为我的目的工作（排除特定控制器的生成）。

来自[T4MVC 文档](https://github.com/T4MVC/T4MVC/wiki/Documentation#force-includeexclude-some-controllers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T00:32:30.130

考虑将您的测试方法和控制器分离到一个单独的项目中，该项目取决于您的生产代码。这样你就不需要有`#if Debug`东西了。我不确定您的设置是什么，但您可以尝试使用包含在子句中的[NonActionAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.nonactionattribute%28v=vs.98%29.aspx)`#if !Debug`。因此，您的生产代码不会将这些方法作为控制器上的操作运行。但这与项目的错误布局有关。

# python - 身份验证和 python 请求

> ID：12397375
> 
> 赞同：5
> 
> 时间：2012-09-12T23:21:10.423
> 
> 标签：python, python-requests

我正在尝试使用请求下载一些文档，但该页面将我重定向到用户登录屏幕并因此下载 HTML 页面。

我试过做：

```
c=requests.get(url,auth=HTTPBasicAuth('user','pass')) 
```

但我没有通过身份验证。

我也试过香草和文摘。

表单本身如下所示：

```
<input id="username" name="username" class="required" tabindex="1" type="text" value="" size="25" autocomplete="false"/>
<br/>

<label for="password">Password</label>
<input id="password" name="password" class="required" tabindex="2" type="password" value="" size="25" autocomplete="off"/> 
```

我是否需要将用户名和密码作为有效负载的一部分传递？如果是这样，我该怎么做？到目前为止，我已经尝试了几种不同的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T17:26:17.813

基本上，它与从页面中获取身份验证 ID 并传入 cookie 有关。

这基本上就是我所做的：

```
from bs4 import BeautifulSoup as bs
import requests
s = requests.session()
url = r'url_i_care_about'

def authenticate(s, url):
    headers = {'username': 'myuser', 'password': 'mypasss', '_Id': 'submit'}
    page=s.get(url)
    soup=bs(page.content)
    value=soup.form.find_all('input')[2]['value']
    headers.update({'value_name':value})
    auth = s.post(url, params=headers, cookies=page.cookies) 
```

# forms - Symfony2渲染复选框选择字段未选中

> ID：12397377
> 
> 赞同：0
> 
> 时间：2012-09-12T23:21:45.767
> 
> 标签：forms, symfony, checkbox, choicefield

我在 Symfony 2.0.4 中显示一个带有多个复选框的选择字段。Symfony 总是将第一个复选框显示为选中状态，我想禁用此行为。在构建表单之前，我尝试将基础实体的字段设置为空数组，但这没有任何效果。这是 Symfony 版本中的一个小故障，还是有一种特殊的方法可以实现这一点？

**编辑：**
通过带有多个复选框的选择字段，我的意思是选择字段的*扩展*和*多个*选项设置为**true**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:28:03.357

看来这是我的愚蠢错误。我覆盖了表单主题，在choice_widget_expanded 块中，我为选择数组的第一个元素添加了选中的标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:37:55.570

您需要在表单类中添加：

```
$builder->add('yourField', 'choice', array(
    'choices'     => $choices
    'required'    => false,
    ....
)); 
```

`ChoiceField type`您可以在文档[http://symfony.com/doc/2.0/reference/forms/types/choice.html](http://symfony.com/doc/2.0/reference/forms/types/choice.html)中找到更多信息

还要检查您是否没有任何 JavaScript 正在检查第一个值。

# hadoop - 使用 Hadoop 映射两个数据集

> ID：12397378
> 
> 赞同：4
> 
> 时间：2012-09-12T23:21:47.443
> 
> 标签：hadoop, mapreduce

假设我有两个键值数据集——数据集 A 和 B，我们称它们为。我想用 Set B 中的数据更新 Set A 中的所有数据，其中这两个数据在键上匹配。

因为我要处理如此大量的数据，所以我使用 Hadoop 来 MapReduce。我担心的是，要在 A 和 B 之间进行密钥匹配，我需要将所有 Set A（大量数据）加载到每个映射器实例的内存中。这似乎相当低效。

是否有推荐的方法来做到这一点，不需要每次都重复在 A 中加载的工作？

一些伪代码来澄清我目前在做什么：

```
Load in Data Set A # This seems like the expensive step to always be doing
Foreach key/value in Data Set B:
   If key is in Data Set A:
      Update Data Seta A 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:34:38.670

根据文档，MapReduce 框架包括[以下步骤](http://hadoop.apache.org/docs/r1.0.3/mapred_tutorial.html#Payload)：

1.  地图
2.  排序/分区
3.  结合（可选）
4.  减少

您已经描述了一种执行连接的方法：将所有 Set A 加载到每个 Mapper 的内存中。你是对的，这是低效的。

相反，请注意，如果两个集合都按键排序和分区，则可以将一个大连接划分为任意多个较小的连接。MapReduce 在上面的步骤 (2) 中通过 key 对每个 Mapper 的输出进行排序。排序后的 Map 输出然后按 key 分区，以便每个 Reducer 创建一个分区。对于每个唯一键，Reducer 将接收来自 Set A 和 Set B 的所有值。

为了完成你的连接，Reducer 只需要输出键和来自 Set B 的更新值（如果存在）；否则，从 Set A 输出 key 和原始值。要区分 Set A 和 Set B 的值，请尝试在 Mapper 的输出值上设置一个标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T18:30:44.513

到目前为止发布的所有答案都是正确的——这应该是一个 Reduce-side 连接......但没有必要重新发明轮子！您是否为此考虑过[Pig](http://pig.apache.org)、[Hive](http://hive.apache.org/)或[Cascading](http://www.cascading.org/)？它们都内置了连接，并且进行了相当好的优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T17:50:51.707

[Cloudera 的这个视频教程](http://www.cloudera.com/resource/mapreduce_algorithms/)很好地描述了如何通过 MapReduce 进行大规模连接，从大约 12 分钟开始。
以下是他列出的基本步骤，用于使用伪代码将文件 B 中的记录连接到密钥 K 上的文件 A 中的记录。如果这里有任何不清楚的地方，我建议您观看视频，因为他的解释比我做得更好。

在您的映射器中：

```
K from file A:
  tag K to identify as Primary Key
  emit <K, value of K>

K from file B:
  tag K to identify as Foreign Key
  emit <K, record> 
```

编写一个将忽略 PK/FK 标记的 Sorter 和 Grouper，以便您的记录被发送到同一个 Reducer，无论它们是 PK 记录还是 FK 记录并被分组在一起。

编写一个比较器，它将比较 PK 和 FK 密钥并首先发送 PK。

这一步的结果将是所有具有相同键的记录将被发送到同一个 Reducer 并在同一组要归约的值中。带有 PK 标记的记录将首先出现，然后是 B 中需要加入的所有记录。现在，减速器：

```
value_of_PK = values[0] // First value is the value of your primary key
for value in values[1:]:
  value.replace(FK,value_of_PK) // Replace the foreign key with the key's value
  emit <key, value> 
```

结果将是文件 B，所有出现的 K 都替换为文件 A 中的 K 值。您还可以扩展它以实现完全内部连接，或者将两个文件全部写出以直接进行数据库存储，但是一旦你得到这个工作，这些都是非常微不足道的修改。

# php - 查询结果数组修改

> ID：12397381
> 
> 赞同：1
> 
> 时间：2012-09-12T23:22:32.840
> 
> 标签：php, mysql, arrays, pdo

作为 MySQL 查询的结果，我得到了以下数组：

```
Array
(
    [0] => Array
        (
            [id] => 11
            [owner] => Mark
        )

    [1] => Array
        (
            [id] => 10
            [owner] => David
        )

    [2] => Array
        (
            [id] => 9
            [owner] => Poul
        )

    [3] => Array
        (
            [id] => 8
            [owner] => Peter
        )

    [4] => Array
        (
            [id] => 7
            [owner] => Peter
        )

    [5] => Array
        (
            [id] => 6
            [owner] => Lucas
        )

) 
```

有没有办法修改它，使用 PHP 函数并省略该`foreach`过程？

我希望它看起来如下：

```
Array
(
    11 => Mark
    10 => David
    9 => Poul
    8 => Peter
    7 => Peter
    6 => Lucas
) 
```

`id`所以，基本上它应该从和`owner`值构建这个数组。喜欢`id => owner`。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:31:15.137

如果您使用的是 PDO，则可以执行以下操作：

```
$stmt = $dbh->query("SELECT id, owner FROM table");
$arr = $stmt->fetchAll(PDO::FETCH_COLUMN|PDO::FETCH_GROUP); 
```

这应该给你一个数组，其中数组的索引是结果中第一列的值，即 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:38:23.887

如果您的原始数组是`$arr`那么以下代码将根据需要更改它：

```
$tot = count($arr);
for($i=0;$i<$tot;$i++) {
   $key = $arr[$i]['id'];
   $val = $arr[$i]['owner'];
   unset($arr[$i]);
   $arr[$key] = $val;
} 
```

# c++ - boost & g++：没有匹配的函数调用'current_path()'

> ID：12397385
> 
> 赞同：3
> 
> 时间：2012-09-12T23:23:45.407
> 
> 标签：c++, boost, g++

我有以下代码：

```
boost::filesystem::path p = boost::filesystem::current_path(); 
```

但我从 g++ 得到这个错误：

```
filesystem.cc: In function ‘int main(int, char**)’:
filesystem.cc:11: error: no matching function for call to ‘current_path()’
/usr/include/boost/filesystem/operations.hpp:769: note: candidates are: void boost::filesystem::current_path(const boost::filesystem::path&)
/usr/include/boost/filesystem/operations.hpp:771: note:                 void boost::filesystem::current_path(const boost::filesystem::wpath&) 
```

在 /usr/include/boost/filesystem/operations.hpp 中，我有以下内容：

```
template< class Path >
Path current_path()
{
  typename Path::external_string_type ph;
  system::error_code ec( detail::get_current_path_api( ph ) );
  if ( ec )
      boost::throw_exception( basic_filesystem_error<Path>(
        "boost::filesystem::current_path", ec ) );
  return Path( Path::traits_type::to_internal( ph ) );
} 
```

所以功能就在那里。我正在使用它，就像 boost 文档中的示例一样。我在这里错过了什么愚蠢的东西吗？如果我用“。”创建路径，它可以工作，但我想要完整的路径名，而不仅仅是“。”。

我在 RedHat 企业 6.2 上有 g++ 4.4.6，带有 boost 1.41.0（我知道它很旧，但我没有升级的选项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:41:41.523

看`current_path`...的定义

`template< class Path > Path current_path() ...`

*   `current_path`是一个**函数模板**，模板参数类型不能从它的参数中推断出来（其中没有参数）——所以我们必须显式地提供模板参数。
*   the return type of `current_path()` has the same type as the template argument.

The reason for this is so we can return narrow and wide character paths ie:

```
namespace fs = boost::filesystem;

// get the current path    
fs::path p = fs::current_path<fs::path>();

// get the current path in wide characters    
fs::wpath wp = fs::current_path<fs::wpath>(); 
```

`wpath` is the wide character version of `path` (akin to `wstring` and `string`).

# shibboleth - Shibboleth 身份服务器使用外部 Shibboleth 身份服务器进行身份验证

> ID：12397387
> 
> 赞同：1
> 
> 时间：2012-09-12T23:23:51.233
> 
> 标签：shibboleth

我正在设计一项服务来处理跨多个托管平台的身份验证。该服务需要能够为用户管理许多不同的协议：LDAP、Shibboleth，毫无疑问还有其他。

我希望在内部使用 Shibboleth 协议并将服务作为 Shibboleth IdP 运行，其中取决于用户类别、受保护资源的性质等。身份验证的艰苦工作被传递到本机 LDAP、Shibboleth 或其他服务器用户已经有一个帐户。

似乎这应该是可能的，但我还没有从 Shibboleth 文档中获得足够的清晰度来确定它是否是，更不用说如何去做了。

这可能吗？我该怎么做？非常感谢有用的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:11:37.967

Shibboleth 不是协议；它是使用 SAML 协议的软件 stak 的名称。

Shibboleth 可以验证来自 LDAP、AD（和通过 JAAS 插件的数据库）的用户。

有关连接 Shibboleth 以使用 LDAP 进行身份验证和属性检索的文档位于：[https ://wiki.shibboleth.net/confluence/display/SHIB2/ResolverLDAPDataConnector](https://wiki.shibboleth.net/confluence/display/SHIB2/ResolverLDAPDataConnector)

# php - Codeigniter 和 i18n 的第 3 段

> ID：12397394
> 
> 赞同：0
> 
> 时间：2012-09-12T23:24:49.400
> 
> 标签：php, codeigniter, internationalization

我对 i18n-codeigniter 集成有疑问。我今天集成了 i18n 我的最后一个项目。在 i18n 之前我有一些自定义路线。现在我根据 i18n 路线风格改变了它们。但我对第三段有一些问题。我的意思是，我有这样的路线：

```
$route['default_controller'] = "welcome";
$route['404_override'] = '';

$route['^(tr|en)/hakkimizda'] = 'Bilgi/Hakkimizda';
$route['^(tr|en)/kampanyalar'] = 'Bilgi/Kampanyalar';
$route['^(tr|en)/haberler'] = 'Haberler';
$route['^(tr|en)/kampanyalar/(.+)$'] = 'Bilgi/Kampanyalar/$1';
$route['^(tr|en)/haberler/(:any)'] = 'Haberler/HaberDetay/$1';
$route['^(tr|en)/urunler'] = 'Urunler';
$route['^(tr|en)/urunler/(:any)'] = 'Urunler/Detay/$1';
$route['^(tr|en)/urunler/kategori/(:any)'] = 'Urunler/Kategori/$2';
$route['^(tr|en)/kesif-talebi'] = "Iletisim/Kesif_Talebi";
$route['^(tr|en)/iletisim'] = "Iletisim";
$route['^tr$'] = $route['default_controller'];
$route['^en'] = $route['default_controller']; 
```

一些链接运行良好。当我进入[http://webadress.com/en/urunler](http://webadress.com/en/urunler)时，它运行良好，但是当我输入[http://webadress.com/en/urunler/kategori/parameter](http://webadress.com/en/urunler/kategori/parameter)时，它给了我空白页。 ..

我该如何解决这个问题？谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:32:18.497

您的（任何：）路线优先。

尝试切换顺序：

```
$route['^(tr|en)/urunler/(:any)'] = 'Urunler/Detay/$1';
$route['^(tr|en)/urunler/kategori/(:any)'] = 'Urunler/Kategori/$2'; 
```

到

```
$route['^(tr|en)/urunler/kategori/(:any)'] = 'Urunler/Kategori/$2';
$route['^(tr|en)/urunler/(:any)'] = 'Urunler/Detay/$1'; 
```

来自 CI 文档：

> 路由将按照它们定义的顺序运行。较高的路线总是优先于较低的路线。

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:32:41.637

交换这两行应该没问题

```
$route['^(tr|en)/urunler/(:any)'] = 'Urunler/Detay/$1';
$route['^(tr|en)/urunler/kategori/(:any)'] = 'Urunler/Kategori/$2'; 
```

到

```
$route['^(tr|en)/urunler/kategori/(:any)'] = 'Urunler/Kategori/$2';
$route['^(tr|en)/urunler/(:any)'] = 'Urunler/Detay/$1'; 
```

# python - 用于网络文件夹的 Python tkFileDialog.ask 目录

> ID：12397398
> 
> 赞同：2
> 
> 时间：2012-09-12T23:25:00.473
> 
> 标签：python, tkinter

我正在尝试编写一个脚本来解析文件夹中的数据并提示用户首先使用：`tkFileDialog.askdirectory(initialdir=" //network/folder/", parent=root)`.

但是，我的数据位于网络文件夹中，我无法创建初始目录来显示网络文件夹。代码：

```
root=Tkinter.Tk()
root.withdraw()
dirSelected = tkFileDialog.askdirectory(initialdir=" //network/folder/", parent=root) 
```

tk ask 目录对话框中的初始目录将显示为“我的电脑”。但是，如果我将地址复制并粘贴到 tk ask 目录对话框中，我的代码就可以工作并且可以解析网络文件夹中的数据。

有什么方法可以使初始目录显示为我的网络文件夹？这样我就不必每次都复制粘贴地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:45:24.123

如果您在 Windows 上，则可以使用该`os.system("net use e: \\fin\letters")`命令。将其映射到驱动器并使用它，例如在`e:\`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:20:42.703

与[此答案](https://stackoverflow.com/a/7170763/404469)类似，如果您使用正确的字符转义，您应该能够使其工作。例如，以下行对我有用，尽管 tkFileDialog 窗口似乎出现得很慢（尽管可能是由于我的网络）。

```
dirSelected = tkFileDialog.askdirectory(initialdir='\\\\<HOST>\\<path>\\', parent=root) 
```

* * *

[作为参考，您可以在此处](http://docs.python.org/reference/lexical_analysis.html#string-literals)阅读转义序列。

# sql - 查询具有不同时间戳的列的表

> ID：12397399
> 
> 赞同：0
> 
> 时间：2012-09-12T23:25:06.147
> 
> 标签：sql, postgresql-9.1

我有一个名为 pmoy.data5min2010 的表和列 det_id、time_stamp、speed、volume。我需要查询一个包含以下列的表：det_id、早上 8 点的速度、下午 12 点的速度和下午 5 点的速度，都在 2010 年 8 月 11 日。按检测器 id 升序排列表。

到目前为止，我所拥有的是：

```
select det_id, speed as t1_speed, speed as t2_speed, speed as t3_speed
From pmoy.data5min2010 where t1_speed =  time_stamp '2010-08-11 08:00:00-4' 
```

这给了我 det_id 列、3 个速度列，但它们在 t1、t2、t3 速度中都具有相同的值。如何制作列 t1 - 8am 数据、t2 - 12pm 数据和 t3 - 7pm 数据？

我的老师说要使用左连接，但我不知道该怎么做。

样本数据

```
det_id; time_stamp              ; speed  ; volume
311903; "2010-08-11 05:00:00-04"; 63.7885; 899
311903; "2010-08-11 05:05:00-04"; 63.8465; 859
311903; "2010-08-11 05:10:00-04"; 60.9926; 1007
311903; "2010-08-11 05:15:00-04"; 63.37;   1205
311903; "2010-08-11 05:20:00-04"; 61.5896; 1119 
```

# python - 在 Python 中将 Unicode 映射到 ASCII

> ID：12397400
> 
> 赞同：0
> 
> 时间：2012-09-12T23:25:17.537
> 
> 标签：python, unicode, mapping, ascii

我通过 urlopen 以 JSON 格式查询后收到字符串：

```
def get_clean_text(text):
    return text.translate(maketrans("!?,.;():", "        ")).lower().strip()

for track in json["tracks"]:
    print track["name"].lower()
    get_clean_text(track["name"].lower()) 
```

对于字符串 "türlich, türlich (sicher, dicker)" 然后我得到

> 文件“main.py”，第 23 行，在 get_clean_text
> 
> ```
> return text.translate(maketrans("!?,.;():", "        ")).lower().strip() 
> ```
> 
> TypeError：字符映射必须返回整数、无或 unicode

我想将字符串格式化为“türlich türlich sicher dicker”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:56:22.410

这个问题不是一个完整的独立示例；我不能确定它是 Python 2 还是 3，`maketrans`来自哪里等等。我很有可能会猜错，这就是为什么你应该确保适当地标记你的问题并提供一个[简短、自包含、正确的例子](http://sscce.org). （那个，还有很多其他人——他们中的一些人可能比我聪明——可能忽略了你的问题，因为它是模棱两可的。）

假设您使用的是 2.x，并且您已经完成了`from string import *`get`maketrans`并且`json["name"]`是 unicode 而不是 str/bytes，这就是您的问题：

有两种翻译表：旧式 8 位表（只是 256 个字符的数组）和新式稀疏表（只是将一个字符的序数映射到另一个字符的 dict）。该`str.translate`函数可以使用其中任何一个，但`unicode.translate`只能使用第二个（如果您仔细考虑一下，原因应该很明显）。

该`string.maketrans`函数制作旧式 8 位转换表。所以你不能将它与`unicode.translate`.

您始终可以编写自己的“makeunitrans”函数作为替代，如下所示：

```
def makeunitrans(frm, to):
  return {ord(f):ord(t) for (f,t) in zip(frm, to)} 
```

但是如果你只是想映射出某些字符，你可以做一些更特殊的事情：

```
def makeunitrans(frm):
  return {ord(f):ord(' ') for f in frm} 
```

但是，从您的最终评论来看，我`translate`什至不确定您想要什么：

> 我想将字符串格式化为“türlich türlich sicher dicker”

如果你做对了，你将把字符串格式化为“türlich türlich sicher dicker”，因为你将所有这些标点符号映射到空格，而不是什么都没有。

使用新型翻译表，您可以将任何您想要的内容映射到无，从而解决了这个问题。但是您可能想退后一步，问为什么您`translate`首先使用该方法，而不是例如多次调用`replace`（人们通常说“为了性能”，但您不会在线构建翻译表每次如果这是一个问题）或使用一个简单的正则表达式。

# xquery - GET 和 .xq 文件

> ID：12397401
> 
> 赞同：0
> 
> 时间：2012-09-12T23:25:17.853
> 
> 标签：xquery, exist-db

使用exist-db 时，GET 消息将从集合中获取整个文件（通过提供URI）。但是，对于 .xq 文件，相同的 GET 消息将改为执行该文件。

我想知道是否有任何东西可以附加到 GET 消息以导致存在数据库返回文件而不是执行它。我应该拥有所有必要的权限，或者我应该能够设置它们。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:17:26.720

假设您将 eXist 作为独立服务器运行：

“GET 接受以下请求参数，这些参数必须是 URL 编码的” `_source=yes | no`——它“指定查询是否应该显示其源代码而不是被执行”——请参阅[在线开发人员指南](http://exist-db.org/devguide_rest.xml#d63098e367)以获取完整的详细信息和示例用法。

`<allow-source></allow-source>`eXist 在其配置中将此功能设置为“否”作为默认值 - 但是您可以通过将特定文件添加到从 Web 应用程序的 WEB-INF 目录读取的 Web 应用程序描述符文件 (descriptor.xml)的部分中来永久覆盖此功能或来自exist.home 系统属性指定的目录。

希望有帮助。

# iphone - 确定 iPhone 设备的型号

> ID：12397403
> 
> 赞同：2
> 
> 时间：2012-09-12T23:25:33.877
> 
> 标签：iphone, ios

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

因此，随着今天 iPhone 5 的发布和更大的屏幕高度，我们如何在我们的应用程序中适应不同 iPhone 变体的不同屏幕尺寸。我知道没有为 iPhone 5 更新的应用程序将被“装箱”，但是向后兼容性呢？

有没有办法检查应用程序是否在 iPhone 3、4 或 5 上运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T23:37:35.687

你通常不需要那个，因为**检查硬件不是正确的方法**。

如果你需要在你的应用程序中根据屏幕尺寸做出决定，比如适应你的 UI 的屏幕尺寸，你应该……**测试屏幕尺寸**，而不是在硬件上做一些条件。始终测试真正需要的东西。

用于`[UIScreen mainScreen].bounds`那个（你应该一直这样做）。请注意，即使在 iPhone 5 之前，人们也可以将其 iPhone 插入视频投影仪或外部屏幕，并在分辨率与 iPhone 不同的屏幕上显示其应用程序。这就是为什么我希望你永远不要在你的代码中使用幻数（如果你这样做了，你知道为什么它现在很糟糕；））并且已经在使用常量或者在运行时询问你的屏幕大小。

* * *

无论如何，为了适应不同的屏幕尺寸，如果您在视图中正确配置了自动调整**掩码**，您的应用程序将自动调整大小。您只需要提供一个**`Default-h568@2x.png`**启动图像，您的应用程序就会占据 4 英寸屏幕的全尺寸。

此外，从 iOS6 开始，您将能够使用**AutoLayout**对视图进行更精细的约束布局。请参阅详细解释它的 WWDC'12 视频会议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:30:39.233

查看[UIDevice-Hardware](https://github.com/erica/uidevice-extension)扩展，它甚至最近更新以添加对 iPhone 5 的支持。

# python - heapy 报告内存使用情况 << top

> ID：12397411
> 
> 赞同：3
> 
> 时间：2012-09-12T23:27:01.590
> 
> 标签：python, memory-management

注意：这是我第一次尝试使用 Python 进行内存分析，所以也许我在这里问错了问题。建议重新改进问题表示赞赏。

我正在编写一些代码，我需要将几百万个小字符串存储在`set`. 据 说，这使用了[heapy](http://guppy-pe.sourceforge.net/)`top`报告的内存量的约 3 倍。我不清楚所有这些额外内存的用途以及我如何才能弄清楚我是否可以 - 如果可以的话如何 - 减少占用空间。

内存测试.py：

```
from guppy import hpy
import gc

hp = hpy()

# do setup here - open files & init the class that holds the data

print 'gc', gc.collect()
hp.setrelheap()
raw_input('relheap set - enter to continue') # top shows 14MB resident for python

# load data from files into the class

print 'gc', gc.collect()
h = hp.heap()
print h

raw_input('enter to quit') # top shows 743MB resident for python 
```

输出是：

```
$ python memtest.py 
gc 5
relheap set - enter to continue
gc 2
Partition of a set of 3197065 objects. Total size = 263570944 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0 3197061 100 263570168 100 263570168 100 str
     1      1   0      448   0 263570616 100 types.FrameType
     2      1   0      280   0 263570896 100 dict (no owner)
     3      1   0       24   0 263570920 100 float
     4      1   0       24   0 263570944 100 int 
```

所以总而言之，heapy 显示 264MB，而 top 显示 743MB。额外的 500MB 有什么用？

**更新：**
我在 Windows 7 的 VirtualBox 中的 Ubuntu 12.04 上运行 64 位 python。
我按照[这里](https://stackoverflow.com/questions/6750563/how-do-i-use-heapy-in-python-2-7)的答案安装了 guppy ：
`sudo pip install https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy`

# python - 我知道 scipy curve_fit 可以做得更好

> ID：12397412
> 
> 赞同：9
> 
> 时间：2012-09-12T23:27:02.657
> 
> 标签：python, scipy, curve-fitting

我正在使用 python/numpy/scipy 来实现此算法，以根据地形坡向和坡度对齐两个数字高程模型 (DEM)：

“用于量化冰川厚度变化的卫星高程数据集的配准和偏差校正”，C. Nuth 和 A. Kääb，[doi:10.5194/tc-5-271-2011](http://dx.doi.org/10.5194/tc-5-271-2011)

我已经建立了一个框架，但是 scipy.optimize.curve_fit 提供的拟合质量很差。

```
def f(x, a, b, c):
    y = a * numpy.cos(numpy.deg2rad(b-x)) + c
    return y

def compute_offset(dh, slope, aspect):
    import scipy.optimize as optimization

    idx = random.sample(range(dh.compressed().size), 10000)
    xdata = numpy.array(aspect.compressed()[idx], float)
    ydata = numpy.array((dh/numpy.tan(numpy.deg2rad(slope))).compressed()[idx], float)

    #Generate synthetic data to test curve_fit
    #xdata = numpy.arange(0,360,0.01)
    #ydata = f(xdata, 20.0, 130.0, -3.0) + 20*numpy.random.normal(size=len(xdata))

    print xdata
    print ydata

    x0 = numpy.array([0.0, 0.0, 0.0])

    fit = optimization.curve_fit(f, xdata, ydata, x0)[0]
    #optimization.leastsq(f, x0[:], args=(xdata, ydata))
    genplot(xdata, ydata, fit)
    return fit

def genplot(x, y, fit):
    a = (numpy.arange(0,360))
    f_a = f(a, fit[0], fit[1], fit[2])
    idx = random.sample(range(x.size), 10000)
    plt.figure()
    plt.xlabel('Aspect (deg)')
    plt.ylabel('dh/tan(slope) (m)')
    plt.plot(x[idx], y[idx], 'r.')
    plt.axhline(color='k')
    plt.plot(a, f_a, 'b')
    plt.ylim(-80,80)
    plt.show()

#Input DEMs
dem1_fn = sys.argv[1]
dem2_fn = sys.argv[2]

dem1_ds = gdal.Open(dem1_fn, gdal.GA_ReadOnly)
dem2_ds = gdal.Open(dem2_fn, gdal.GA_ReadOnly)

#Extract band 1 from each dataset as masked array using internal nodata value
dem1 = getperc_new.gdal_getma(dem1_ds, 1)
dem2 = getperc_new.gdal_getma(dem2_ds, 1)

#Produce slope and aspect maps using gdaldem and load into masked arrays
dem1_slope = gdaldem_slope(dem1_fn)
dem1_aspect = gdaldem_aspect(dem1_fn)

#Compute common mask and apply to all products
common_mask = dem1.mask + dem2.mask + dem1_slope.mask + dem1_aspect.mask

diff_euler = numpy.ma.array(dem2-dem1, mask=common_mask)
dem1_slope.__setmask__(common_mask)
dem1_aspect.__setmask__(common_mask)

#Compute relationship between elevation difference, slope and aspect
fit = compute_offset(diff_euler, dem1_slope, dem1_aspect)
print fit 
```

这是我的数据的拟合，最初由约 200 万个点组成，但我随机抽样用于测试/绘图目的：

[-14.9639559 216.01093596 -41.96806735]

![plot_one](../Images/8e76fd9aed4c652642bcab6c050e280d.png)

那里有大量数据可以很好地拟合，但curve_fit的结果很差。当我使用合成数据运行时，我很适合：

原始输入参数 [20.0, 130.0, -3.0]

曲线拟合的结果 [-19.66719631 -49.6673076 -3.12198723]

![plot_two](../Images/c27a835829146797115d09f90a428ba5.png)

不确定这是否与使用屏蔽数组、curve_fit 的限制有关，或者我只是忽略了一些简单的事情。感谢您的任何建议。

===========================

编辑 2013 年 9 月 4 日 16:30 PDT

正如@Evert 和其他人所建议的那样，这个问题肯定与异常值有关。去除异常值后，我能够获得更好的拟合。查看我的旧代码，似乎我计算了每个方面的中值绝对偏差，然后在拟合之前删除了 2*mad 之外的任何内容。

我在 2012 年 11 月生成了一些额外的图：

![直方图](../Images/0cd81f4e7ae69200f3d7d2dbc3ddf151.png)

![在此处输入图像描述](../Images/1747191250deb9e734bcc8820a6ad599.png)

但是再看看这些，我几乎可以肯定它们是为不同的输入数据生成的。这就是我现在能找到的所有内容，所以我将它们包括在这里作为有偏抽样的例子。这种 DEM 对齐方法对于此类情况肯定会失败 - 它与 scipy 的曲线拟合能力无关。

我最终开发了一种不同的对齐方法，包括两个蒙版 2D numpy 阵列的归一化互相关、亚像素细化和垂直偏移去除。它更快且始终如一地提供更好的结果。尽管这种方法已被 Oleg Alexandrov 作为[NASA Ames Stereo Pipeline](http://ti.arc.nasa.gov/tech/asr/intelligent-robotics/ngt/stereo/)的一部分开发的迭代最近点 (ICP) 工具 (pc_align) 所取代。

感谢您的所有回复，对于放弃这个问题，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:52:00.493

如果您只是想获得具有相位偏移的正弦波，则不需要非线性拟合。

您可以将其替换`a * sin(x - b) + c`为`a * sin(x) + b * cos(x) + c`，因为任何带有偏移的正弦都可以写为正弦和余弦的适当组合（“相量加法”，如傅立叶变换）。

如果这给出了相同的结果，那么问题就不是“非线性”拟合。

# java - 计时器 - 如何使用 Joda Time 计算两个日期之间的差异？

> ID：12397413
> 
> 赞同：9
> 
> 时间：2012-09-12T23:27:15.803
> 
> 标签：java, jodatime

我想使用 Joda Time 获得两次 P（开始时间）和 Q（结束时间）之间的差异。P 和 Q 可以是不同日期甚至同一天的时间。我想获得 HH-MM-SS 格式的差异，其中 H=小时，M=分钟，S=秒。

我想在计时器中使用此功能。我假设没有人会使用我的计时器来测量超过 24 小时。

请指导我这样做。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T23:29:50.483

查看 Joda 时间常见问题解答 [http://joda-time.sourceforge.net/faq.html#datediff](http://joda-time.sourceforge.net/faq.html#datediff)

您可以使用 a`PeriodFormatter`来获取您选择的格式。试试下面的示例代码。

```
DateTime dt = new DateTime();
DateTime twoHoursLater = dt.plusHours(2).plusMinutes(10).plusSeconds(5);
Period period = new Period(dt, twoHoursLater);
PeriodFormatter HHMMSSFormater = new PeriodFormatterBuilder()
        .printZeroAlways()
        .minimumPrintedDigits(2)
        .appendHours().appendSeparator("-")
        .appendMinutes().appendSeparator("-")
        .appendSeconds()
        .toFormatter(); // produce thread-safe formatter
System.out.println(HHMMSSFormater.print(period)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T23:27:06.063

我很欣赏 Joda 日期/时间 API。它提供了一些很酷的功能，如果我需要一个不可变的日历或它提供的一些深奥的日历选项，我会全力以赴。

虽然它仍然是一个外部 API。

所以......为什么在你不需要的时候使用它。在 Joda API 中，“即时”与 Java API“日期”完全相同（或非常接近）。这些都是围绕 long 的瘦包装器，表示 POSIX EPOCH UTC 时间（这是自 1970 年 1 月 1 日凌晨 00:00 UTC 以来经过的毫秒数。

如果您有两个 Instants 或两个 Dates，计算它们之间的天数是微不足道的，并且绝对不需要 Joda 库单独用于此目的：

```
public double computeDaysBetweenDates(Date earlier, Date later) {
    long diff;

    diff = later.getTime() - earlier.getTime();
    return ((double) diff) / (86400.0 * 1000.0);
} 
```

这假设一天中的秒数是 86400 ......这基本上是正确的。

一旦你有一个双精度的差异，将答案的小数部分（即一天的小数）转换为 HH:MM:SS 是微不足道的。

# magento - 编辑类别布局，但将部分应用于产品

> ID：12397417
> 
> 赞同：0
> 
> 时间：2012-09-12T23:28:19.663
> 
> 标签：magento, magento-1.7

我有这个类别的自定义类别 view.phtml： [http ://www.touchfix.nl/onderdelen](http://www.touchfix.nl/onderdelen)

子类别使用其父级的 XML 更新，即：

```
<reference name="catalog_category_default">
<reference name="content">
<remove name="category.products" />
<block type="catalog/category_view" name="alphabase.parts" template="catalog/category/view.parts.phtml">
<block type="catalog/product_list" name="product_list" template="catalog/product/list.parts.phtml"></block>
</block>
</reference>
</reference>

<reference name="right">
<remove name="cms_waaromkiezen" />
<block type="cms/block" name="block_speerpunten_onderdelen">
<action method="setBlockId"><block_id>block_speerpunten_onderdelen</block_id></action>
</block>
</reference>

<reference name="head">
<action method="addCss"><stylesheet>css/categoryblocks.css</stylesheet></action>
</reference> 
```

我想实现对“正确”的更改也适用于这些类别的产品。但是，当我在类别设置中也将这些更改应用于产品时，“内容”引用会搞砸我的页面，并返回一个空白页面。

如何引用 catalog_category 视图，以便“内容”更新仅在类别视图而不是产品视图中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:24:35.510

我设法做到了以下几点：

```
<reference name="content">
    <reference name="category.products">
        <action method="setTemplate"><template>catalog/category/view.repair.phtml</template></action>
        <reference name="product_list">
            <action method="setTemplate"><template>catalog/product/list.repair.phtml</template></action>
        </reference>
    </reference>
</reference>

<reference name="right">
    <remove name="cms_waaromkiezen" />
    <block type="cms/block" name="block_speerpunten_reparatie">
        <action method="setBlockId"><block_id>block_speerpunten_reparatie</block_id></action>
    </block>
</reference>

<reference name="head">
    <action method="addCss"><stylesheet>css/categoryblocks.css</stylesheet></action>
</reference> 
```

不同之处不是删除块并使用正确的模板添加新块，而是更改相应项目的模板文件。我现在还可以使用 参考产品视图块`<reference name="product.info">`，这将是我的下一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:21:45.147

catalog_category_default 不是参考，它是一个句柄

您是否尝试过更改为：

```
<catalog_category_default> 
```

# jquery - jquery“慢”值的持续时间是多少？

> ID：12397420
> 
> 赞同：2
> 
> 时间：2012-09-12T23:28:41.220
> 
> 标签：jquery, animation

我想知道当你调用这样的东西时，是否有人知道jquery实际上会为某些东西设置动画多长时间：

```
.animate({ marginLeft: '-91px' }, 'slow'); 
```

比如，什么相当于`'slow'`？1000？1500？

谢谢，我到处找，似乎找不到！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T23:31:51.453

慢是 600 毫秒

快速为 200 毫秒

它可以在 [http://api.jquery.com/animate/中找到](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:30:30.467

从[animate() 的文档中](http://api.jquery.com/animate/)：

期间：

> 持续时间以毫秒为单位；较高的值表示较慢的动画，而不是较快的动画。默认持续时间为 400 毫秒。*可以提供字符串 'fast' 和 'slow' 分别表示 200 和 600 毫秒的持续时间*。

# mysql - 查找与其他表中的选定行没有定义关系的行？

> ID：12397421
> 
> 赞同：-2
> 
> 时间：2012-09-12T23:28:51.753
> 
> 标签：mysql, join

我有两个如下表：

```
users
-----
id | name
_________
 1 | mert
 2 | ersin
 3 | faruk

friends
-------
id | follower | following
_________________________
1  |    2     |    3     |
2  |    3     |    1     |
__________________________ 
```

我想找到不关注所选人员的人。

例如：

```
get_people_not_follow(2) // "ersin"
Result: array(array(1, 'mert'), array(3, 'faruk'));

get_people_not_follow(1) // "mert"
Result: array(array(2, 'ersin')); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:32:52.183

```
SELECT users.id, name
FROM users LEFT JOIN friends ON (following = users.id AND follower = ##)
WHERE friends.id IS NULL 
```

`##`你感兴趣的ID在哪里。

# css - 输入和文本区域不跨浏览器兼容

> ID：12397423
> 
> 赞同：0
> 
> 时间：2012-09-12T23:29:07.153
> 
> 标签：css, firefox, google-chrome, cross-browser, opera

因此，我在跨浏览器兼容性方面遇到了一些问题。我不得不承认我不知道如何纠正跨浏览器问题，所以我愿意接受任何建议。

幸运的是，这个例子只影响了一些属性。这些属性是输入和文本区域字段。我正在使用谷歌浏览器版本 21.0.1180.89。我用这个浏览器构建了网络，但我的机器上可用的其他浏览器有问题。

我想知道如何解决这个跨浏览器兼容性问题：

结果 Google Chrome 版本 21.0.1180.89：（它应该看起来如何）（Safari 看起来一样） ![在此处输入图像描述](../Images/0aa662c3bd622b17bd0c4bb7d49333cb.png)

结果 Firefox 版本 15.0.1：

![在此处输入图像描述](../Images/e63cd1237d46369188406f37185f99d7.png)

结果歌剧版本 12.01：

![在此处输入图像描述](../Images/e23ce9bdba23041bcc29601d3b6c2397.png)

我对任何跨浏览器兼容性代码持开放态度。

非常感谢！

编辑 ///////////////////////////////////////////////// /////////////////////////////////

在这里，我根据您的要求放置了必要的代码，以更好地理解问题。谢谢！

HTML：

```
<form name="form1" action="<?php echo $config->urls->templates?>../_php/form-to-email.php" method="post">
                            <div id="form_box" class="gradient">
                                <div id="center_box">
                                    <h3>WANT TO BOOK ME?</h3>
                                    <div id="form_data">
                                        <table>
                                            <tr>
                                                <td><input type="text" value="Company name" class="gradient" name="company" /></td>
                                                <td class="tdright"><input type="text" value="Name" class="gradient" name="name" /></td>
                                            </tr>
                                            <tr>
                                                <td><input type="text" value="Telephone" class="gradient" name="telephone" /></td>
                                                <td class="tdright"><input type="text" value="Email" class="gradient" name="email" /></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <!--  <input type="text" id="dateField" name="description" value="Description" onclick="this.value='';"/> -->
                                                    <?php
                                                        $myCalendar = new tc_calendar("date3", true, false);
                                                        $myCalendar->setIcon("../_php/calendar/images/iconCalendar.png");
                                                        $myCalendar->setPath("../_php/calendar/");
                                                        $myCalendar->setYearInterval(2012, 2022);
                                                        $myCalendar->dateAllow('2012-08-30', '2022-08-31');
                                                        $myCalendar->setDateFormat('j F Y'); 
                                                        $myCalendar->writeScript();  
                                                    ?>
                                                </td>
                                                <!-- <td><input type="button" /></td> -->
                                            </tr>
                                        </table>
                                    </div>  
                                    <div id="form_text">
                                        <br>
                                        <textarea rows="7" cols="35" class="gradient" name="message">Your text...</textarea>
                                        <input type="submit" value="SEND" id="input_sub" name="submit" />
                                    </div>
                                    <input type="image" id="input_img" src="<?php echo $config->urls->templates?>_img/submit_button.png" name="submit" />
                                </div>
                            </div>
                        </form>

                        <!-- Form validator -->
                        <script language="JavaScript">
                            /* Visit http://www.javascript-coder.com/html-form/javascript-form-validation.phtml */
                            var frmvalidator  = new Validator("myemailform");
                            frmvalidator.addValidation("company_name","req","Please provide your company name"); 
                            frmvalidator.addValidation("name","req","Please provide your name"); 
                            frmvalidator.addValidation("message","req","Please provide a small description");
                            frmvalidator.addValidation("email","req","Please provide your email");  
                            frmvalidator.addValidation("email","email","Please enter a valid email address"); 
                        </script> 
```

CSS 代码：

```
/*FORM*/

/*First white box*/
#form_box{
    height: 370px;
    width: 320px;
    font-family: verdana;
    font-size: 1em;
    border-radius: 4px;

    /*Gradient CSS3*/
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgIDxzdG9wIG9mZnNldD0iNTQlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(45deg,  rgba(255,255,255,0) 0%, rgba(255,255,255,1) 54%, rgba(255,255,255,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left bottom, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(54%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(45deg,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 54%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(45deg,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 54%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(45deg,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 54%,rgba(255,255,255,1) 100%); /* IE10+ */
    background: linear-gradient(45deg,  rgba(255,255,255,0) 0%,rgba(255,255,255,1) 54%,rgba(255,255,255,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-8 fallback on horizontal gradient */

}

/*Gradient CSS3*/
/*CROSS: This is to make it compatible with IE9*/
.gradient {
       filter: none;
}

h3{
    padding-top: 20px;
    padding-bottom: 10px;
    padding-left: 10px;
}

/*Second box in form*/
#form_data{
    width: 300px;
    height: 105px;
    background-color: #f2f2f2;
    /* this is to stop collapsing margins. This way the margin-top of table works */
    padding-top: 1px;
    margin-top: -1px;
}

#center_box{
    margin-left: 10px;
    width: 300px;
}

input#input_sub{
    margin-top: 8px;
    margin-left: -3px;
}

input#input_img{
    margin-top: 8px;
    margin-left: 10px;
}

table{
    margin-top: 10px;
}

table td{
    padding-left: 10px;
    padding-top: 5px;
}

td.tdright{
        padding-left: 10px;
}

input{
    text-transform: uppercase;
    border: 1px solid #e1e0e0;
    border-radius: 7px;

    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4KICAgIDxzdG9wIG9mZnNldD0iMjElIiBzdG9wLWNvbG9yPSIjZGVkY2RkIiBzdG9wLW9wYWNpdHk9IjAuNSIvPgogICAgPHN0b3Agb2Zmc2V0PSI3OCUiIHN0b3AtY29sb3I9IiNkZWRjZGQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNiNWI1YjUiIHN0b3Atb3BhY2l0eT0iMC41Ii8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(top,  rgba(255,255,255,0.5) 0%, rgba(222,220,221,0.5) 21%, rgba(222,220,221,0.5) 78%, rgba(181,181,181,0.5) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0.5)), color-stop(21%,rgba(222,220,221,0.5)), color-stop(78%,rgba(222,220,221,0.5)), color-stop(100%,rgba(181,181,181,0.5))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#80ffffff', endColorstr='#80b5b5b5',GradientType=0 ); /* IE6-8 */
}

input:not([type=submit]):not([type=image]){ 
/*input[type=text]{*/
    height: 20px;
    line-height: 20px;
    padding-left: 10px;
}

input:not([type=text]){
    background: transparent;
    border: none;
    color: #df0643;
}

/*Third box in form*/
#form_text{
    height: 165px;
    width: 290px;
    margin-top: 2px;
    padding-left: 10px;
    background-color: #f2f2f2;
}

textarea{
    border: 1px solid #e1e0e0;
    padding: 10px;
    border-radius: 7px;

    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjUiLz4KICAgIDxzdG9wIG9mZnNldD0iMjElIiBzdG9wLWNvbG9yPSIjZGVkY2RkIiBzdG9wLW9wYWNpdHk9IjAuNSIvPgogICAgPHN0b3Agb2Zmc2V0PSI3OCUiIHN0b3AtY29sb3I9IiNkZWRjZGQiIHN0b3Atb3BhY2l0eT0iMC41Ii8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNiNWI1YjUiIHN0b3Atb3BhY2l0eT0iMC41Ii8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(top,  rgba(255,255,255,0.5) 0%, rgba(222,220,221,0.5) 21%, rgba(222,220,221,0.5) 78%, rgba(181,181,181,0.5) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0.5)), color-stop(21%,rgba(222,220,221,0.5)), color-stop(78%,rgba(222,220,221,0.5)), color-stop(100%,rgba(181,181,181,0.5))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(255,255,255,0.5) 0%,rgba(222,220,221,0.5) 21%,rgba(222,220,221,0.5) 78%,rgba(181,181,181,0.5) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#80ffffff', endColorstr='#80b5b5b5',GradientType=0 ); /* IE6-8 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:58:50.810

Passerby was right. I applied some width to input:not(type=submit):not(type:image) and to textarea. Once I did this all browsers display the same dimensions.

Thank you for the help!

# javascript - 如何在 javascript SRC 中获取哈希标签

> ID：12397424
> 
> 赞同：0
> 
> 时间：2012-09-12T23:29:10.427
> 
> 标签：javascript, jquery, html, hash

有没有简单的方法在脚本源中获取哈希标签？

例子：

```
<script src='myscript.js#result=5235'></script> 
```

我想`result=5235`使用变量`myscript.js`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:35:11.307

```
var hash = $('script').attr('src').split('#')[1]; 
```

或者

```
var hash = document.getElementsByTagName('script')[0].src;
    hash = hash.split('#')[1]; 
```

假设它是第一个脚本，否则更改`[0]`为脚本具有的任何索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:35:47.923

[http://jsfiddle.net/cjc343/h6Zzw/](http://jsfiddle.net/cjc343/h6Zzw/)

您可能想要使用比这更具体的选择器，但它明白了这一点。

编辑：如果您不想要 jQuery，为什么要标记 jQuery？

纯：http: [//jsfiddle.net/cjc343/h6Zzw/1/](http://jsfiddle.net/cjc343/h6Zzw/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T23:38:03.233

对于此示例，假设您想要对页面上的所有脚本标签执行获取该结果的操作=whatever。执行以下操作：

```
var whatever = [];

$('script').each(function(){
   var src = $(this).attr('src');
   var splitonhash-arrReturned = src.split('#');
   var yourAnswer = splitonhash-arrReturned[1];
   whatever.push(yourAnswer);
}); 
```

纯 JS 示例：

```
var whatever = [];

var items = document.getElementsByTagName('script');

for (i=0; i< items.length; i++)
{
   whatever.push(items[i].attributes.getNamedItem("src").split('#')[1]); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T23:35:04.607

```
 var srcVariable = $(script).attr("src");
           var hashText = srcVariable.substring(srcVariable.indexOf('#')); 
```

# java - 方法同步与对象同步有什么不同？

> ID：12397427
> 
> 赞同：5
> 
> 时间：2012-09-12T23:29:25.257
> 
> 标签：java, multithreading, thread-safety, thread-synchronization

> **可能重复：**
> [同步块与同步方法？](https://stackoverflow.com/questions/574240/synchronized-block-vs-synchronized-method)

如果有人可以帮助我提供有关方法同步与对象同步之间有什么不同的真实示例，那就太好了。

方法同步示例

```
public class MyClassExample {
private int i;
public synchronized void increment(){
    i = i + 1;
}
} 
```

对象同步示例

```
public class MyClassExample {
private int i;
Object writeLock = new Object();
 public void increment(){
    synchronized(writeLock) {
        i = i + 1;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T23:46:10.843

tl;dr - 外部同步使您容易受到攻击（有意或无意），并且还迫使您进行可能不必要的锁定检查。在这个答案的最底部还有书呆子的好信息。

同步方法*几乎与同步方法相同*（见底部）：

```
synchroinzed void foo() {

}

void foo() {
    synchronized(this) {

    }
} 
```

通过使方法本身不是`synchronized`，您可以让自己锁定任何东西`Object`，而不仅仅是`this`。我个人建议在 internal 上同步`Object`，就像这样

```
private final Object foolock = new Object();

void foo() {
    synchronzied(foolock) {

    }
} 
```

原因是，如果您使用一种`synchronized`方法，可以有效地将`this`其他人`synchronize`锁定在您身上，并将您锁定在您的`Object`! 想象一下：

```
class FooDoer {
    // removed! using synchronized methods instead
    //final Object foolock = new Object();

    synchronized void foo() {

    }
}

// thread 1 - attacker
FooDoer f = new FooDoer();
globalMap.put("TheFoo",f);
synchronized(f) {
    while(true); // haha!
}

// thread 2 - victim
FooDoer f = globalMap.get("TheFoo");
f.foo(); // locked, because Thread 1 has locked us out! 
```

它使您面临拒绝服务攻击。这不好！通过将锁定设置为内部，您作为类的作者可以准确控制谁可以锁定对象的哪些区域以及在什么条件下锁定。

另一个问题是您可能没有要检查的受保护数据。例如：

```
synchronized void foo() {
    if(expensiveAccessCheck()) {
        update();
    }
}

void foo() {
    if(expensiveAccessCheck()) {
        synchronized(foolock) {
            update();
        }
    }
} 
```

在这种情况下，您不必让其他人在您坐在那里旋转车轮时等待。也许您正在从 URL 中抓取数据，然后进行更新。为什么要让其他人远离数据？在这种情况下，粒度越低越好。

现在你可能还记得我之前说的几乎相同。两者之间有一个微小的，微小的，微小的差异。同步方法会将同步指令直接烘焙到字节码中的方法签名中。这将使字节码缩短 1 个字节，因为它不需要进行额外的调用。这可能会产生很小的影响，因为方法字节码中的字节数是确定是否内联的因素之一。尽管有这些细节，我强烈建议将它们视为相同，因为这是一种微优化，在生产环境中几乎不会发挥重要作用。当它们不是相同时，将其称为相同是不完整的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T23:35:48.647

实例方法在`synchronized`上同步`this`。

所以

```
public synchronized void increment(){
    i = i + 1;
} 
```

相当于

```
public void increment(){
    synchronized (this) {
        i = i + 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T23:37:44.457

Java 语言规范[写道](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)：

> 同步方法在执行之前获取监视器（第 17.1 节）。
> 
> 对于类（静态）方法，使用与方法类的 Class 对象关联的监视器。
> 
> 对于实例方法，使用与`this`（调用该方法的对象）关联的监视器。

和

> 这些是同步语句（第 14.19 节）可以使用的相同监视器。
> 
> 因此，代码：
> 
> ```
> class Test {
>     int count;
>     synchronized void bump() {
>         count++;
>     }
>     static int classCount;
>     static synchronized void classBump() {
>         classCount++;
>     }
> } 
> ```
> 
> 与以下效果完全相同：
> 
> ```
> class BumpTest {
>     int count;
>     void bump() {
>         synchronized (this) { count++; }
>     }
>     static int classCount;
>     static void classBump() {
>         try {
>             synchronized (Class.forName("BumpTest")) {
>                 classCount++;
>             }
>         } catch (ClassNotFoundException e) {}
>     }
> } 
> ```

# ios - 将 FaceTime 功能集成到 iPad 应用程序中

> ID：12397428
> 
> 赞同：4
> 
> 时间：2012-09-12T23:29:33.977
> 
> 标签：ios, ipad, facetime

我的公司正计划开发一个严重依赖视频通话的 iPad 应用程序，我正在尝试决定使用哪些 API/工具。

我们的要求如下：

*   具有最小延迟或掉线的高质量视频（前提是每一端的用户都有良好的连接）
*   安全性好
*   可定制的用户界面；移动/调整视频窗口大小的能力
*   能够在 FaceTime 和 iSight 摄像头之间切换；用户通常会使用 FaceTime，但在需要更好的分辨率时可以将 iPad 转过来使用 iSight

我很清楚没有 FaceTime API。我可以使用其他一些类似 WebRTC 的 API/SDK 来满足这些要求吗？根据我目前的研究，OpenTok (TokBox) 似乎是最好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:31:47.383

AddLive 是另一个 API，但在这一点上，它似乎不完整。至少从今天开始，它缺少 iOS SDK 中的文件。

# c# - UDP 侦听器使用套接字生成类型错误

> ID：12397430
> 
> 赞同：1
> 
> 时间：2012-09-12T23:29:40.827
> 
> 标签：c#, sockets, udp, listener, udpclient

我通常是 Sockets 和 C# 的新手，并且很难实现一个简单的 upd 侦听器函数。我花了很多时间在网上搜索，但未能成功地整合在线众多示例中的任何一个。因此，任何建议、链接、示例将不胜感激！

此时，我有一个第三方应用程序通过端口 6600 广播一条通用 UPD 消息，其中包含有关应用程序服务器位置（服务器名称、IP 地址等）的信息。我想设计我的侦听器客户端应用程序来捕获 UPD 广播并生成可用于将来处理的可用服务器的集合。

我遇到的问题是，当我尝试使用 listener.Listen(0) 创建侦听器时，如果失败并生成一般类型错误。如果我尝试使用 UdpClient 类，我的应用程序将挂起并且永远不会返回任何数据。下面列出了这两个示例的代码：

```
namespace UDPListener
{
    class Program
    {
        static void Main(string[] args)
        {
            Socket listener = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            listener.Bind(new IPEndPoint(IPAddress.Any, 6600));
            listener.Listen(6);
            Socket socket = listener.Accept();
            Stream netStream = new NetworkStream(socket);
            StreamReader reader = new StreamReader(netStream);

            string result = reader.ReadToEnd();
            Console.WriteLine(result);
            socket.Close();
            listener.Close();

        }
    }
} 
```

和 UdpClient：

```
private void IdentifyServer()
    {
        //Creates a UdpClient for reading incoming data.
        UdpClient receivingUdpClient = new UdpClient(6600);

        //Creates an IPEndPoint to record the IP Address and port number of the sender.  
        // The IPEndPoint will allow you to read datagrams sent from any source.
        IPEndPoint RemoteIpEndPoint = new IPEndPoint(IPAddress.Any, 0);
        try
        {

            // Blocks until a message returns on this socket from a remote host.
            Byte[] receiveBytes = receivingUdpClient.Receive(ref RemoteIpEndPoint);

            string returnData = Encoding.ASCII.GetString(receiveBytes);

            Output.Text = ("This is the message you received " +
                                        returnData.ToString());
            Output.Text = ("This message was sent from " +
                                        RemoteIpEndPoint.Address.ToString() +
                                        " on their port number " +
                                        RemoteIpEndPoint.Port.ToString());
        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:19:54.237

dtb 绝对是写的！经过大量研究和朋友的帮助后，我意识到我真正在寻找的是多播的解决方案。我将包括下面的链接。

@dtb，感谢您帮助我指出正确的方向！

[http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C](http://www.codeproject.com/Articles/1705/IP-Multicasting-in-C)

[http://codeidol.com/csharp/csharp-network/IP-Multicasting/Csharp-IP-Multicast-Support/](http://codeidol.com/csharp/csharp-network/IP-Multicasting/Csharp-IP-Multicast-Support/)

# c++ - 将指针转换为浮点数？

> ID：12397432
> 
> 赞同：4
> 
> 时间：2012-09-12T23:29:52.813
> 
> 标签：c++, type-conversion

我有一个`unsigned char*`. 通常这指向一块数据，但在某些情况下，指针是数据，即。将`int`值转换为`unsigned char*`指针 ( `unsigned char* intData = (unsigned char*)myInteger;`)，反之亦然。

但是，我需要使用一个`float`值来执行此操作，并且它不断给我转换错误。

```
unsigned char* data;
float myFloat = (float)data; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:10:11.240

bit_cast：

```
template <class Dest, class Source>
inline Dest bit_cast(Source const &source) {
    static_assert(sizeof(Dest)==sizeof(Source), "size of destination and source objects must be equal");
    static_assert(std::is_trivially_copyable<Dest>::value, "destination type must be trivially copyable.");
    static_assert(std::is_trivially_copyable<Source>::value, "source type must be trivially copyable");

    Dest dest;
    std::memcpy(&dest, &source, sizeof(dest));
    return dest;
} 
```

用法：

```
char *c = nullptr;
float f = bit_cast<float>(c);
c = bit_cast<char *>(f); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T23:37:46.353

使用给定变量存储其他数据的唯一正确方法是按字节复制数据：

```
template <typename T>
void store(unsigned char * & p, T const & val)
{
    static_assert(sizeof(unsigned char *) >= sizeof(T));

    char const * q = reinterpret_cast<char const *>(&val);
    std::copy(q, q + sizeof(T), reinterpret_cast<char *>(&p));
} 
```

用法：

```
unsigned char * p;
store(p, 1.5);
store(p, 12UL); 
```

匹配检索功能：

```
template <typename T>
T load(unsigned char * const & p)
{
    static_assert(sizeof(unsigned char *) >= sizeof(T));

    T val;
    char const * q = reinterpret_cast<char const *>(&p);
    std::copy(q, q + sizeof(T), reinterpret_cast<char *>(&val));

    return val;
} 
```

用法：

```
auto f = load<float>(p); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T01:35:45.097

如果您的编译器支持它（GCC 支持），则使用联合。根据 C++ 标准，这是未定义的行为。

```
union {
    unsigned char* p;
    float f;
} pun;

pun.p = data;
float myFloat = pun.f; 
```

如果`sizeof(unsigned char *) == sizeof(float)`. 如果指针大于浮点数，那么您必须重新考虑您的策略。

[请参阅关于类型双关语](http://en.wikipedia.org/wiki/Type_punning)的维基百科文章，特别是关于[使用 union](http://en.wikipedia.org/wiki/Type_punning#Use_of_union)的部分。

只要您直接使用联合而不是类型转换为联合，GCC 就允许使用联合进行类型双关......[请参阅 IBM 关于类型双关问题](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtpm1%2Fm1rhpun.html)的讨论，了解使用 GCC 进行类型双关的正确和不正确方法。

另请参阅维基百科关于[强类型和弱类型](http://en.wikipedia.org/wiki/Strong_and_weak_typing)的文章以及一篇关于[类型双关和严格别名](http://labs.qt.nokia.com/2011/06/10/type-punning-and-strict-aliasing/)的深入研究的文章。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T23:32:16.983

```
unsigned char* data;
float myFloat = *(float*)data; 
```

# javascript - OAuth (Instagram) 不刷新

> ID：12397433
> 
> 赞同：9
> 
> 时间：2012-09-12T23:30:03.187
> 
> 标签：javascript, cookies, oauth-2.0, instagram

我有一个单页 javascript 应用程序，我想知道是否可以在不刷新页面的情况下在 Instagram 上对用户进行身份验证。我想尝试使用 javascript 执行类似于 Facebook 连接的操作，其中 Facebook 对话框在弹出窗口中打开，然后调用回调脚本。

这就是我认为它会做的事情......

1.  单击时，会打开一个对话框（弹出）窗口，用户在其中登录 Instagram 并授予应用程序权限。
2.  在弹出窗口中，用户将被重定向回我的网站，我的网站会转到 Instagram 以获取 access_token，然后在用户会话中设置访问令牌或设置为 cookie。
3.  不知何故......主应用程序需要识别何时设置了访问令牌。这是我真的不确定的一点。我会使用计时器继续调用服务器来检查它吗？有没有人有更好的检测方法？将它设置在cookie中会更好吗？

我想我会在开始编码之前先在这里问一下，以防有人对这是否可行/不可行或其他建议有任何想法！也许这已经存在，我错过了什么？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T07:30:38.413

最后，使用 tdun 和 Jan 的评论弹出一个弹出窗口非常容易。谢谢大家！使用 9lessons 中的 Instgram 类，并使用 window.opener.processAuthData(authData) 回调原始窗口。而且我确实必须进行刷新，但它是在弹出窗口中，而不是在主应用程序窗口中，这正是我想要的。

# jquery - 支持 jQuery 的 jwplayer 事件？

> ID：12397436
> 
> 赞同：0
> 
> 时间：2012-09-12T23:30:22.340
> 
> 标签：jquery, jquery-events, jwplayer

我正在尝试获取一个 jwplayer 事件来利用 jQuery API，这样我就可以将 jQuery 效果从 jwplayer 事件传递给外部 div。

我试图让一个 div 在玩家开始播放时淡出到 100% 透明度`onPlay`，就像这样：

```
jwplayer('div-player').onPlay(
        function(event) {
            document.getElementById('h1_title').fadeOut('slow', function(){
                // animation complete
            });
        }
    ); 
```

然后，当视频暂停或结束时，我希望 div 淡入，如下所示：

```
 jwplayer("div-player").onPause(
        function(event) {
            document.getElementById('h1_title').fadeIn('slow', function(){
                //animation complete
            });
        }
    ); 
```

jwplayer 函数在`(document).ready(function)`Qquery 函数之外，但我想我可以使用命名空间点语法引用 jQuery 库，如下所示：

```
jwplayer('div-player').onPlay(
        function(event) {
            document.getElementById('h1_title').jQuery.fadeOut('slow', function(){
                // animation complete
            });
        }
    ); 
```

但是，情况似乎并非如此。

我对任何可行的解决方案持开放态度，要么将 jwplayer 函数放在文档就绪函数中（我已经摸索过但无法弄清楚），要么在 jwplayer 函数中再次调用 jQuery - 或者编写任何必要的函数 - 我只是不知道怎么做。令人惊讶的是，我找不到任何参考资料可以做到这一点。

我还尝试了初始 jwplayer 调用中的 jwplayer 事件，其中包括视频 url、尺寸等（以上是外部的附加调用），但这也不起作用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:55:31.970

解决方案是一种语法解决方案。这是我自己修复的代码示例，可以按需要工作：

```
 jwplayer('div-player').onPlay(
        function(event) {

            $('.title').fadeOut('slow', function(){
                // animation complete

            });
        }
    );
    jwplayer("div-player").onPause(
        function(event) {

            $('.title').fadeIn('slow', function(){
                //animation complete

            });
        }
    ); 
```

我最初没有使用美元符号 ($)，因此我很困惑。

# php - 使用基于 PHP 的 CMS 时如何编辑 html？

> ID：12397437
> 
> 赞同：-2
> 
> 时间：2012-09-12T23:30:23.343
> 
> 标签：php, html

我在 HTML 和 CSS 之外没有经验。

我在一个不太知名的 CMS 上有一个网站，叫做 Ushahidi。编辑 CSS 很好，但现在我需要更改 img 选择。目前，页面上的图像具有以下代码：

```
<a class="photothumb" rel="lightbox-group1"    href="http://trashswag.com/media/uploads/35_1_1347312096.jpg"><img src="http://trashswag.com/media/uploads/35_1_1347312096_t.jpg"></a> 
```

我需要删除该站点使用第二张图片的能力（请注意，第二个 src 附加了“_t.jpg”略有不同。

我将如何更改站点以仅选择第一张图像，即删除“_t”字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:39:22.340

名称中带有 的图像版本`_t`可能是第一张图像的缩略图。您所拥有的是一个小图像，单击该图像会带您进入更大的图像。如果要显示全尺寸图像并摆脱链接，只需使用

```
<img src="http://trashswag.com/media/uploads/35_1_1347312096.jpg"> 
```

# javascript - parseInt 不适用于 window.document

> ID：12397438
> 
> 赞同：0
> 
> 时间：2012-09-12T23:30:29.323
> 
> 标签：javascript

有没有理由这不起作用？

```
 var xcurrent = parseInt(window.document.getElementById('firstdiv').style.left);
 var ycurrent = parseInt(window.document.getElementById('firstdiv').style.top); 
```

我被告知它不是整数 NaN。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:33:42.557

u̶̶n̶e̶e̶d̶̶t̶o̶̶r̶e̶m̶o̶v̶e̶̶̶f̶r̶o̶m̶̶t̶h̶e̶̶s̶t̶r̶i̶n̶g̶̶ `̶p̶x̶`（在现代浏览器上无关紧要）

确保`window.document.getElementById('firstdiv').style.left`已定义。如果仅在 CSS 中定义，则无法访问此属性

例子：

*   CSS：http: [//jsfiddle.net/zuKYr/](http://jsfiddle.net/zuKYr/)
*   内联：http: [//jsfiddle.net/zuKYr/1/](http://jsfiddle.net/zuKYr/1/)
*   JS：http: [//jsfiddle.net/zuKYr/2/](http://jsfiddle.net/zuKYr/2/)

只有 JS 定义的样式和内联 CSS 才能被 JS 读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:37:03.580

这并不是`parseInt`说不起作用，`NaN`这表明您尝试引用的元素不能被解释为整数。虽然很难确定，但请确保您引用的元素确实存在，并在操作它们之前查看您是否可以访问它们。即在尝试对它做更多之前检查它`window.document.getElementById('firstdiv')`会给你任何东西。

您还需要确保您的 css 确实设置了您尝试检索的属性，否则您将收到`undefined`/`Nan`错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T00:00:59.913

如果您尝试获取元素的 x 和 y 位置，则可以使用`offsetLeft`and`offsetTop`代替。

```
var firstDiv = document.getElementById('firstdiv');
var xcurrent = firstDiv.offsetLeft;
var ycurrent = firstDiv.offsetTop; 
```

这将获得 x 和 y 位置（相对于`offsetParent`），无论它们是否通过 CSS 定位设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T00:15:52.820

> 有没有理由这不起作用？
> 
> var xcurrent = parseInt(window.document.getElementById('firstdiv').style.left);

不少，但可能的有：

1.  如果 id 为 'firstdiv' 的元素不存在，`window.document.getElementById('firstdiv')`将返回`null`. 尝试访问 的*style*属性`null`将引发错误。这不是您指定的结果。

2.  返回的值`.style.left`是一个空字符串。在这种情况下，[parseInt](http://ecma-international.org/ecma-262/5.1/#sec-15.1.2.2)`NaN`根据 ECMA-262返回。

更安全的方法是：

```
var el = document.getElementById('firstdiv');
var xcurrent

if (el) {
  xcurrent = parseInt(el.style.left);

  if (isNaN(xcurrent)) { 
    // there was no value for xcurrent, what now? 
```

正如 Nathan 所说，您可以改用[offsetLeft](http://www.w3.org/TR/cssom-view/#offset-attributes)。

# android - “Mavenising”ActionBarSherlock 库

> ID：12397444
> 
> 赞同：1
> 
> 时间：2012-09-12T23:30:56.630
> 
> 标签：android, maven

这是此问题的延续：[ActionBarSherlock + maven + eclipse: 在工作区中找不到依赖项](https://stackoverflow.com/questions/12043237/actionbarsherlock-maven-eclipse-dependency-not-found-in-workspace)

我收到了错误：

```
dependency=[com.actionbarsherlock:library:apklib:4.1.0:compile] not found in workspace 
```

我下载了 ActionBarSherlock 代码并将其添加到我的工作区。

但是，当我尝试构建自己的项目时，出现以下错误：

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: 
Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoIcsImpl; 
```

我相信这是因为生成了重复的 jar。我认为这是因为 v4 支持库出现在我的项目和 ActionBarSherlock 库中。

解决此问题的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:05:13.277

m2e-android 对 Android 库的支持仍在开发中：

[https://github.com/rgladwell/m2e-android/issues/8](https://github.com/rgladwell/m2e-android/issues/8)

您在使用 ActionBarSherlock 库时遇到的问题是我们希望在不久的将来解决的已知问题：

[https://github.com/rgladwell/m2e-android/issues/104](https://github.com/rgladwell/m2e-android/issues/104)

# android - 使用 Robolectric 进行 Android 单元测试会引发错误 AndroidManifest.xml not found or not a file

> ID：12397445
> 
> 赞同：4
> 
> 时间：2012-09-12T23:31:03.140
> 
> 标签：android, junit, robolectric

我正在尝试使用 Robolectric 在 Eclipse 中的应用程序上运行测试用例，如[本博客](http://digitaldumptruck.jotabout.com/?p=749)所述，但是当我运行 JUnit 测试时，出现以下错误

```
java.lang.RuntimeException: java.io.FileNotFoundException: C:\Users\abc\workspace\SumTestCases\AndroidManifest.xml not found or not a file; it should point to your project's AndroidManifest.xml
    at com.xtremelabs.robolectric.RobolectricTestRunner.createResourceLoader(RobolectricTestRunner.java:269)
    at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:229)
    at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:177)
    at com.xtremelabs.robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:157)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.io.FileNotFoundException: C:\Users\abc\workspace\SumTestCases\AndroidManifest.xml not found or not a file; it should point to your project's AndroidManifest.xml
    at com.xtremelabs.robolectric.RobolectricTestRunner.createResourceLoader(RobolectricTestRunner.java:256)
    ... 17 more 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:55:53.500

你有两个选择：

1.  您应该在放置 AndroidManifest.xml 的文件夹中运行 JUnit
2.  [您可以扩展 RobolectricTestRunner 并使用 AndroidManifest.xml 的路径调用父构造函数](http://pivotal.github.com/robolectric/customizing.html)

# assembly - 为什么我不能保存 rip 的值？

> ID：12397451
> 
> 赞同：7
> 
> 时间：2012-09-12T23:32:00.660
> 
> 标签：assembly, x86

```
#include <stdint.h>
uint64_t rip;
int main()
{
    asm(
        "movq %%rip, %0\n" : "=m" (rip)
        );

    sleep(10);
} 
```

当我编译时，我得到

```
cc -m64    rip.c   -o rip
/tmp/ccwNbZi1.s: Assembler messages:
/tmp/ccwNbZi1.s:12: Error: suffix or operands invalid for `movq'
make: *** [rip] Error 1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T23:57:36.670

您无法阅读`(E|R)IP`，因为没有 x86(/64) 指令可以直接阅读。

`CALL`“阅读”它的唯一方法是使用该指令进行调用。它会将返回地址保存在堆栈中，并且您可以读取该地址。

**更新**：在 64 位模式下，您可以利用`RIP`-relative 寻址，因此`LEA RAX, [RIP]`将在`RAX`. 另一种解决方法是`MOV RAX, $`在组装中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-22T08:14:47.697

我能想到的在 x86_64 下获取/设置 %rip 的唯一方法是使用 ptrace()。以下是从 ltrace 的源代码复制而来的。

```
void* addr = ptrace(PTRACE_PEEKUSER, pid, (8 * RIP), 0);
ptrace(PTRACE_POKEUSER, pid, (8 * RIP), addr); 
```

其中 RIP 是在 /usr/include/sys/reg.h 中定义的宏

# jquery - Twitter 任何地方 Tweet Box Json 响应

> ID：12397458
> 
> 赞同：1
> 
> 时间：2012-09-12T23:32:28.177
> 
> 标签：jquery, json, twitter, twitter-oauth, twitter-anywhere

首先，这是我的基本代码：

```
 <div id="example-ontweet"></div>

<script type="text/javascript">

  twttr.anywhere(function (T) {

    T("#example-ontweet").tweetBox({

      onTweet : function(plaintext, html) {

        alert(plaintext);
        alert(html);

      }

    });

  });

</script> 
```

当我发送我提交一条推文时，它可以正常工作。当我尝试提交重复的推文时，它不允许这样做，并且加载微调器只是旋转而没有错误消息——也是默认行为。当我在提交重复推文时查看萤火虫控制台时，我看到：

```
POST https://api.twitter.com/1/statuses/update.json 403 forbidden 
```

在响应控制台选项卡下有以下信息：

```
{"error":"Status is a duplicate.","request":"\/1\/statuses\/update.json"} 
```

我想做的就是在失败时提醒响应消息——要么是整个对象，要么最好只是“错误”。我试过了：

```
me.tweetBox.$button.click(function(){   
    $.getJSON('https://api.twitter.com/1/statuses/update.json', function(data) {
        alert(JSON.stringify(data));
    });
}); 
```

无论是在 settimeout 函数内部还是不在，它看起来都可以工作，但是当它尝试时，它会将其吐出到控制台下面：

```
GET https://api.twitter.com/1/statuses/update.json    401 Unauthorized 
```

关于如何将该错误消息拉入警报的任何想法？看起来它应该如此简单，但我正在用头撞墙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:39:22.953

尝试

```
me.tweetBox.$button.click(function(){   
    $.getJSON('https://api.twitter.com/1/statuses/update.json', function(data) {
        alert(JSON.stringify(data));
    }).error(function(jqXHR, textStatus, errorThrown){
        alert(jqXHR.responseText);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:18:18.693

我相信 Twitter API 的新变化不允许重复消息。

[https://dev.twitter.com/docs/api/1.1/post/statuses/update](https://dev.twitter.com/docs/api/1.1/post/statuses/update)

对于每次更新尝试，都会将更新文本与验证用户最近的推文进行比较。任何会导致重复的尝试都将被阻止，从而导致 403 错误。因此，一个用户不能连续两次提交相同的状态。

# coldfusion - 在 Coldfusion 中对 HREF 标记使用 Onclick

> ID：12397459
> 
> 赞同：1
> 
> 时间：2012-09-12T23:32:29.167
> 
> 标签：coldfusion, coldfusion-9, cfajaxproxy

我想知道是否有人可以告诉我这段代码有什么问题，因为它不起作用，也没有给我任何错误。

使用此代码，我试图访问一个组件，该组件每次有人按下链接时都会更新数据库表。

```
<cfajaxproxy bind="url:http://www.example.com/admin/CRM/linktracking.cfc" />
<cfscript>
    SSLtype = (CGI.HTTPS EQ 'off')?'http://':'https://';
</cfscript>

<cfset domainname = CGI.SERVER_NAME>
<cfset domainURL = SSLtype&CGI.SERVER_NAME&CGI.SCRIPT_NAME&'?'&CGI.QUERY_STRING>

    <script>    
        function insertTracking(href) {
        var instance = new ajaxjsclass();
        instance.setCallbackHandler();
        <cfoutput>
            instance.insertTrack(href,'#surveymain.contactid#','#domainname#','#domainURL#');
        </cfoutput>
        }       
    </script> 
```

这是我试图访问的组件。

```
<cfcomponent>

<cffunction name="insertTrack" access="remote" returntype="void" >
<cfargument name="clickedURL" required="yes">
<cfargument name="contactid" required="yes">
<cfargument name="domainName" required="yes">
<cfargument name="domainURL" required="yes">

<cfquery name="q_inserttrack" datasource="dpsigweb">
update survey_tracking
set surveystarted = <cfqueryparam value="#now()#" cfsqltype="CF_SQL_TIMESTAMP">
where contactid= '#contactid#'
</cfquery>

<cfif ARGUMENTS.contactid NEQ ''>
    <cfscript>
        additionalInfo = '<b>Clicked URL</b> - <i>#ARGUMENTS.clickedURL#</i><br><br><b>From Site</b> - <i>#ARGUMENTS.domainURL#</i>';
        gaCFC = CreateObject("component","mod_sigweb.components.guestaccount");
        gaCFC.AddCorrespondenceCurDoctorProcedureRemote(
            functionPassword = 'password',
            contactid = '#ARGUMENTS.contactid#',
            theMessage = additionalInfo,
            statustype = 'Survey Started',
            contactresult ='Survey Started'
            );
    </cfscript>
</cfif>

</cffunction>
</cfcomponent> 
```

这是我试图从以下位置访问该功能的地方：

```
<a href="http://dev.example.com/surveys/survey.cfm?id=#id#&contactid=#contactid#&doctorid=#doctorid#" onClick="insertTracking(this.href)" > 
```

我怀疑我的`<cfajaxproxy>`标签可能有语法错误，但是当我按下链接时，我没有收到任何错误。

我把我改成`cfajaxproxy`这个

```
<cfajaxproxy cfc="linktracking" jsclassname="ajaxjsclass"  /> 
```

但该功能似乎仍然不起作用。我什至将组件和 cfm 文件移动到同一个文件夹中，但它仍然不起作用。

编辑：我忘了提到我在电子邮件模板中发送此代码。我不知道这是否重要。我创建了一个在本地测试的测试页面，并且我的代码运行良好。如果有什么我需要改变的，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:04:53.830

找到解决方案。我将更新查询代码直接放在页面上，因此当用户按下链接并打开页面时，查询从那里运行，而不是从链接运行。

上面的代码运行良好我只是遇到了问题，因为我通过电子邮件将页面发送给用户。至少这是我怀疑的。

# java - 为什么启用断言时java代码覆盖率仍然显示黄色

> ID：12397464
> 
> 赞同：3
> 
> 时间：2012-09-12T23:33:01.177
> 
> 标签：java, eclipse, unit-testing

![在此处输入图像描述](../Images/cc449420aabdae353bb281488d58bc4f.png)

我通过设置 jvm 参数运行 Eclipse 中代码的代码覆盖率：-ea，但语句仍显示黄色。并且test2显示红色，为什么？

更重要的是，当我使用 -ea 时，是否启用了系统断言（-esa）？似乎当我使用-esa 时，-ea 无法工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:20:30.810

您从未使用 null 键值运行它，因此从未使用过断言路径。

（我之所以想到这一点，是因为我在 1980 年左右遇到了同样的问题。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-13T01:13:37.533

我得到答案：

0x9a ife栈顶int分数型不当0时跳转。

0x2b

aload_1
将调用类型至第二个顶。

0x59 dup 复制栈顶分数顶和复制值压入栈顶。 0xbf 抛出将栈顶的异常抛出。

0xb1 return 从当前返回void。 0xb2 getstatic 获取指定类的入栈域，并取其压值方法。

0xb6 invokevirtual 调用实例方法。

一次只启用断言或禁用它。所以不能覆盖所有的分支。

# jquery - 如何检测一个元素是否浮动在另一个元素下方？

> ID：12397466
> 
> 赞同：0
> 
> 时间：2012-09-12T23:33:47.207
> 
> 标签：jquery, css, web

我有一个盒子，里面有两个漂浮的盒子。如果视口很大，则这些框彼此相邻。如果视口很小，则这些框一个在另一个之上（带有固定宽度和高度的 jsFiddle 只是为了说明我的两种情况：http: [//jsfiddle.net/5wpH9/](http://jsfiddle.net/5wpH9/)）

我想使用 jQuery 给容器框一个高度（不相关，但我的包装器中的每个元素都需要有一个固定的高度，不能有元素自由浮动而不占用垂直空间）。我需要**根据里面的元素是否相互浮动来计算这个容器框的高度**。

里面的小盒子有固定的高度，所以结果会是这样的：

*   如果元素彼此相邻，则使容器高度为 200px
*   如果元素一个在另一个之上，则使容器高度为 400px

我能想到的唯一方法是从第二个框的顶部到容器的顶部进行`offset()`or`position()`计算（如果超过 10px，则应用更改）。但我想知道**是否有更好的方法**，更直接的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:42:37.363

检查`.position()`还不错：

```
if($("#topElement").position().top - $("#bottomElement").position().top > 10) {
    $("#bottomElement").css("height", "400px");
} 
```

当然，您会想要更改 ID——但您明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:45:50.917

我不明白，我的意思是你不能用 CSS 让容器适应它的内容吗？
`overflow: hidden`在容器上应该可以解决问题，`height`不需要。

**演示：http:** [//jsfiddle.net/elclanrs/5wpH9/3/](http://jsfiddle.net/elclanrs/5wpH9/3/)

# python - 将 STDIN 管道传输到本身通过管道传输到 Python 解释器的脚本？

> ID：12397469
> 
> 赞同：7
> 
> 时间：2012-09-12T23:33:50.030
> 
> 标签：python, bash, svn, pipe, pre-commit-hook

我需要实现一个 SVN 预提交钩子，它执行一个本身存储在 SVN 中的脚本。

我可以使用该`svn cat`命令将该脚本通过管道传输到 Python 解释器，如下所示：

```
svn cat file://$REPO/trunk/my_script.py | python - --argument1 --argument2 
```

但是，`my_script.py`它本身需要在 STDIN 上传输数据。

该数据未存储在文件中；它存储在网络上。我宁愿不必将数据下载到临时文件中，因为通常我可以将其通过管道传输到 Python 程序：

```
curl http://example.com/huge_file.txt | python my_script.py 
```

我不确定如何结合这两个管道。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T01:48:26.517

我想出了如何在不创建任何临时文件的情况下做到这一点，但不严格使用“管道”。

`curl http://example.com/huge_file.txt | python <(svn cat file://$REPO/trunk/my_script.py) --argument1 --argument2`

我在 Bash 中使用了“匿名文件描述符”结构，它可以用来代替任何文件路径。

例如 `python my_script.py` 将相当于 `python <(cat my_script.py)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:50:23.797

我不认为这是可能的。您将脚本作为标准输入提供给 python 解释器。这意味着 python 解释器已经附加到输入流。我不认为脚本内容可以创建第二个标准输入来读取。

# wpf - 如何冻结WPF网格上的第一行和第一列

> ID：12397470
> 
> 赞同：4
> 
> 时间：2012-09-12T23:34:08.030
> 
> 标签：wpf, scrollview, grid-layout

有没有办法在 WPF 中冻结网格（不是数据网格）的第一行和第一列？我的应用程序有一个包含折线图控件的网格，我希望第一行保存在我垂直滚动时保持静止的标签，并让第一列保存在我水平滚动时保持不动的标签。任何人都可以分享一个如何做到这一点的例子？

# php - 简单查询上的复杂PHP？

> ID：12397471
> 
> 赞同：0
> 
> 时间：2012-09-12T23:34:22.673
> 
> 标签：php

所以我进行了一个比最初对我说的更复杂的项目。

我的大问题是我不确定执行以下操作的简单方法：

该网站旨在拥有大量流量。将有一个页面***domain.com/signup***或可能有 50 个页面***domain.com/STATE/signup***

每个页面都是相同的，除了它会为每个人 iframe 一个不同的网站。所以***externalsite.com/thepersonspage***基于此人的姓名（可能还有城市/州）。

理论上，我可以在每次有新成员加入时创建包含不同 iframe 的页面（我们预计在发布的第一个月会有 500-1000 个。

这样做会更好（或更容易/更有效）吗？也许类似于状态下拉列表，然后显示所有标记为该状态并通过php动态生成的人？

如果我们有 20,000 人参与，我需要尽可能简单的方法来管理它。单独的页面似乎有点矫枉过正，因为页面完全相同，但 iframe 页面不同（因此特定用户会因他们注册的人而获得信用）。

或者有没有一种简单的方法可以查询字符串或者`$_POST`从一个简单的形式，包括城市、州、名字和姓氏？

不幸的是，我不知道***externalsite.com/notsureofthisformat***的格式，所以我无法真正将其与此联系起来。

我知道这是一个非常具体的广泛问题，但我只是在寻找一个“大方向”来简化对 10,000 多名成员的管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:43:40.013

永远不要基于每个用户生成页面。如果您有 100 万注册用户会怎样？目录中的一百万个文件？没有文件系统可以优雅地处理它。只是不要这样做。

有一个数据库表（如果你愿意，可以是一个平面文件），它将为每个用户存储 iframe url。还有一个登录页面，它将查找表格，将用户与他们的 iframe url 匹配。只需在 iframe src 属性中打印该 url。类似的东西（我有一段时间没有做过php，也没有在任何地方设置它，所以我只做伪代码）

```
// username to be replaced by a parameter
$query = "select url from table where user = 'username'";

//run query against the database
$url = $query[url];
echo "<iframe src='".$url."' />"; 
```

# java - 从数据库甚至 Java 中删除 Pilcrow 标志时遇到问题

> ID：12397473
> 
> 赞同：0
> 
> 时间：2012-09-12T23:34:44.457
> 
> 标签：java, mysql, jsp, special-characters

我一直在尝试使用替换函数（）从数据库或我的 jsp 页面中删除“Pilcrow”标志，但似乎没有什么对我有用。请指导我我做错了什么。

我确实经历了之前在 SO 上提出的一些问题，就像我在数据库级别进行了替换但什么也没发生，pilcrow 标志仍然存在。

虽然我还想在我的 JSP 页面中进行拆分，例如在其中定义 pilcrow 的 ASCII 代码的字节数组，它是 244，但我需要一个无符号字节。我正在粘贴我尝试过的这个

```
if(tempDesc.contains("¶")|| tempDesc.contains("&para;") ){
  tempDesc = tempDesc.replace("¶",""); 
  v[3] = tempDesc;
}else{
  v[3] = tempDesc; 
} 
```

我已经尝试了很多东西，只是粘贴了我尝试过的一些东西。

我只是想要一些我应该用来实现这个目标的想法。

谢谢

# php - 根据在邮件服务器上接收电子邮件设置 CRON JOB

> ID：12397477
> 
> 赞同：0
> 
> 时间：2012-09-12T23:35:04.477
> 
> 标签：php, email, cron

当我的邮件服务器收到新电子邮件并根据通知设置 cron 作业时，有什么方法可以得到通知？

例如，假设我的邮件服务器是 xxx.com。当我不在办公室时，someone@gmai.com 会在晚上 7 点向 myacc@xxx.com 发送邮件。我想使用与邮件服务器关联的 Web 服务器中的 php 回复该邮件。

我想定期运行一个 php 脚本，它将检查邮件服务器上收到的新电子邮件，如果收到新电子邮件，获取发件人电子邮件等信息，我想使用另一个 php 脚本回复该电子邮件。是否可以？

希望我能够清楚地描述它。谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:20:56.070

老实说，这听起来像是 PHP [IMAP 模块](http://php.net/manual/en/book.imap.php)的工作。设置一个cron作业来运行一个登录邮箱的PHP脚本；然后，您可以使用[邮件](http://us2.php.net/manual/en/function.mail.php)功能向您确定需要处理的任何邮件发送回复。

# facebook - 识别元标记中带有 fb:app_id 的网站

> ID：12397479
> 
> 赞同：0
> 
> 时间：2012-09-12T23:35:41.883
> 
> 标签：facebook, web-crawler

我想抓取许多网站，检查它们是否在元标记中有 fb:app_id 并将这些网站 url 存储在一个文件中。

你知道我可以使用这种方法的任何工具、软件或服务吗？

提前致谢！

最好的，奥利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:32:14.210

如果您使用 php，请查看[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)。用法与jQuery非常相似。

# iphone - Objective-c 中的高效循环

> ID：12397483
> 
> 赞同：1
> 
> 时间：2012-09-12T23:36:01.040
> 
> 标签：iphone, objective-c, ios, loops

我使用[Parse](https://parse.com/)作为我的后端服务，但是对于这个示例，我创建了两个示例数组 (`songs`和`ratings`) 来模仿我的后端架构。`songs`包含将填充我的应用程序表的歌曲数据。`ratings`包括当前用户对歌曲的评分。

最终，我需要遍历`songs`并将`ratings`其嵌入到`userRating`相应的`songs`字典中。我在下面包含了我的循环代码。这可以更有效地完成吗？如果对象太多，我担心会花费太长时间`ratings`。

```
 NSMutableArray *songs = [@[ @{
                                @"objectId" : @"111",
                                @"title" : @"Song Title" },
                                @{
                                @"objectId" : @"222",
                                @"title" : @"Song Title"
                             } ] mutableCopy];

    NSMutableArray *ratings = [@[ @{
                               @"objectId" : @"999",
                               @"parentObjectId" : @"111",
                               @"userRating" : @4
                               } ] mutableCopy];

    for (NSInteger a = 0; a < songs.count; a++) {

        NSMutableDictionary *songInfo = [songs objectAtIndex:a];
        NSString *songObjectId = [songInfo objectForKey:@"objectId"];
        NSNumber *userRating = @0;

        for (NSInteger i = 0; i < ratings.count; i++) {

            NSDictionary *userRatingInfo = [ratings objectAtIndex:i];
            NSString *parentObjectId = [userRatingInfo objectForKey:@"parentObjectId"];

            if ([parentObjectId isEqualToString:songObjectId]) {
                userRating = [userRatingInfo objectForKey:@"userRating"];
            }
        }
    [songInfo setObject:userRating forKey:@"userRating"];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:10:24.117

建立一个评级字典，而不是有一个内部循环。您的时间复杂度将从 n*m 变为 n+m 因为字典查找是摊销的常数时间：

```
NSMutableDictionary* ratingsDict = [NSMutableDictionary dictionaryWithCapacity:ratings.count];
for (NSDictionary* rating in ratings) {
    NSString *parentObjectId = [rating objectForKey:@"parentObjectId"];
    [ratingsDict setObject:rating forKey:parentObjectId];
}

for (NSMutableDictionary* song in songs) {
    NSString *songObjectId = [song objectForKey:@"objectId"];
    NSNumber *userRating = [ratingsDict objectForKey:songObjectId];
    if (userRating)
        [song setObject:userRating forKey:@"userRating"];
} 
```

# qt - 如何在事件中设置自定义数据，如拖放？

> ID：12397492
> 
> 赞同：1
> 
> 时间：2012-09-12T23:37:23.220
> 
> 标签：qt, drag-and-drop, qlistwidget, qtreewidget

我有一个列表小部件和一个树小部件。我希望 listwidgetitems 能够通过拖放在 listwidget 内移动，并且我还希望 listwidget 接受从 treewidget 中拖放的项目，但在此之前，我想对数据进行一些处理。

我现在可以做所有这些事情，但我不知道如何从树小部件开始将自定义数据设置为拖动事件。

例如，我的 treewidget 中有一个 topLevelItem，带有文本“Add DrawEffect”和一个 QIcon，当我在 listwidget 中拖放时，我想向 listwidget 添加一个新项目，说：

```
DrawEffect 0x0x0x0 effect-here 
```

并不是

```
Add DrawEffect (showing its QIcon as well) 
```

我应该在什么时候设置这些数据？

到目前为止，这是我的代码，在 listwidget 中拖放 listwidgetitems 时工作得很好，它适用于在 listwidget 中拖放 qtreewidgetitems，但它按原样复制它们，而我想在添加它们之前进行进一步处理：

在我的 treewidget 的构造函数中：

```
this->setDragDropMode(QAbstractItemView::DragOnly);
this->setDefaultDropAction(Qt::CopyAction); 
```

在我的列表小部件的构造函数中：

```
this->setAcceptDrops(true);
this->setDragDropMode(QAbstractItemView::DragDrop);
this->setDefaultDropAction(Qt::MoveAction); 
```

重新实现listwidget的dropEvent：

```
if(event->source()->inherits("QTreeWidget"))
    qDebug() << "The dragged item comes from the TreeWidget.";
else
    qDebug() << "The dragged item comes from the ListWidget itself.";
QListWidget::dropEvent(event); 
```

如您所见，我可以区分 treewidget 和 listwidget 项目，但我不知道在此之后该怎么做......

我想这样的事情就可以了：

```
if(event->source()->inherits("QTreeWidget")){
    //treewidget item, it needs further processing
}
else
    QListWidget::dropEvent(event); //listwidget item, no further processing needed 
```

谢谢 ：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:23:16.120

回答一下，正如cmannett85所说，当进入drag时，会自动将mime数据添加到drag事件中。您可以通过覆盖 QTableWidget::mimeData() 来覆盖添加的 mimedata。在此方法中，您可以为该位置的项目设置一些标识符（例如：行号，列号，索引到某个数据结构）

然后，覆盖列表小部件中的 dropMimedata 方法以读取您添加的此数据并执行插入操作

看，[当在 QTableWidget 中拖动一行时，我怎样才能找出它被拖动的 FROM 和 TO 的行索引？](https://stackoverflow.com/questions/1776712/when-dragging-a-row-in-a-qtablewidget-how-can-i-find-out-what-row-index-it-was)了解更多详情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:40:11.730

AFAIK 拖动操作不“包含”该项目，它只包含描述它的数据。因此，您需要从`event->mimeData()`对象中的文本、图标等数据创建一个新项目，并将其手动插入到您的小部件中`event->pos()`。

# sql - 从 SQL JOIN 语句返回的重复值

> ID：12397493
> 
> 赞同：2
> 
> 时间：2012-09-12T23:37:23.570
> 
> 标签：sql

当我使用事务表的内部联接时，我得到了重复的帐号。如何限制它，所以我看不到重复的帐号。

```
SELECT     A01_AccountMaster.AccountNumber, A01_AccountMaster.FamilyMemberType,
           A01_AccountMaster.AccountType, A01_AccountMaster.FamilyId, 
           A01_AccountMaster.Title, A01_AccountMaster.FirstName, 
           A01_AccountMaster.MiddleName, A01_AccountMaster.LastName,
           A01_AccountMaster.Suffix, A01_AccountMaster.OrganizationName,
           A01_AccountMaster.Status,
           T01_TransactionMaster.Date,
           T01_TransactionMaster.AccountNumber AS T01_Accountnumber  
FROM       A01_AccountMaster
INNER JOIN T01_TransactionMaster
      ON A01_AccountMaster.AccountNumber = T01_TransactionMaster.AccountNumber
WHERE      (A01_AccountMaster.Title = 'The')
           AND (T01_TransactionMaster.Date between '01/01/2010' and '09/12/2012')
ORDER BY   AccountNumber; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:54:20.770

由于您从交易表中检索元素，如“T01_TransactionMaster.Date”，并且 2 个交易可以属于同一个帐户，这意味着对于 1 个帐户行，您可以返回多个交易日期。

您希望计算机如何返回适当的数据？

你有不同的选择。

就像删除事务列的选择语句并使用 DISTINCT 一样，这对于这样的选择语句来说似乎有点重：

```
SELECT DISTINCT A01_AccountMaster.AccountNumber, A01_AccountMaster.FamilyMemberType, A01_AccountMaster.AccountType, A01_AccountMaster.FamilyId, A01_AccountMaster.Title, A01_AccountMaster.FirstName, A01_AccountMaster.MiddleName, A01_AccountMaster.LastName, A01_AccountMaster.Suffix, A01_AccountMaster.OrganizationName, A01_AccountMaster.Status
FROM A01_AccountMaster 
INNER JOIN T01_TransactionMaster on (A01_AccountMaster.AccountNumber) = T01_TransactionMaster.AccountNumber 
WHERE (A01_AccountMaster.Title = 'The') 
and (T01_TransactionMaster.Date between '01/01/2010' and '09/12/2012') 
order by AccountNumber 
```

或者如果您需要返回交易日期，您可以在所有帐户字段上使用 groupBy 有不同的策略，并在交易字段上进行聚合（例如，返回最大日期以获取帐户最后一次交易的日期）

```
SELECT A01_AccountMaster.AccountNumber,A01_AccountMaster.AccountType,........,max(T01_TransactionMaster.Date)
FROM A01_AccountMaster 
INNER JOIN T01_TransactionMaster on (A01_AccountMaster.AccountNumber) = T01_TransactionMaster.AccountNumber 
WHERE (A01_AccountMaster.Title = 'The') 
and (T01_TransactionMaster.Date between '01/01/2010' and '09/12/2012') 
group by A01_AccountMaster.AccountNumber,A01_AccountMaster.AccountType,........
order by AccountNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:50:15.910

我的建议是总结事务表以从中获得您想要的东西。

要聚合数据，请使用如下查询：

```
select am.*, tm.NumTransactions
from A01_AccountMaster am join
     (select AccountNumber, count(*) as numtransactions
      from T01_TransactionMaster
      group by AccountNumber
     ) tm
     on am.AccountNumber = tm.AccountNumber
where . . . 
```

在子查询级别进行聚合简化了整个查询，因为您不必使用大量字段进行分组。此外，如果您引入更多表，在子查询级别进行聚合可以防止其他表中的记录之间的交互导致的问题。

# ruby-on-rails - 路由怎么知道这么多？

> ID：12397502
> 
> 赞同：1
> 
> 时间：2012-09-12T23:38:21.440
> 
> 标签：ruby-on-rails, routing

我正在关注关于路线的整洁的 ruby​​ on rails[教程。](http://www.youtube.com/watch?v=g3SuV-A9bak&feature=bf_prev&list=UUS7Rh2UstIN09_eCjsIJ1LA)所以我想知道，路由怎么知道这么多？

我有一个名为 posts_controller 的控制器和一个 post 模型。在 routes.rb 文件中，我添加了

```
# config/routes.rb
resources :posts 
```

据我了解，这会自动为与帖子关联的所有控制器操作创建适当的路由。到目前为止，我的posts_controller 中只有一种方法：

```
# app/controllers/posts_controller.rb
def index

end 
```

但奇怪的是，当我执行

```
$ rake routes 
```

它给了我这一切：

```
 posts GET    /posts(.:format)          posts#index
          POST   /posts(.:format)          posts#create
 new_post GET    /posts/new(.:format)      posts#new
edit_post GET    /posts/:id/edit(.:format) posts#edit
     post GET    /posts/:id(.:format)      posts#show
          PUT    /posts/:id(.:format)      posts#update
          DELETE /posts/:id(.:format)      posts#destroy 
```

路由机制怎么知道这么多，却从来没有告诉它我想要创建和更新帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:45:50.450

使用“资源”与您定义的操作无关。它只是在控制器中创建您可能需要的所有宁静路由。

如您所见，它创建：索引、创建、新建、编辑、显示、更新和销毁

它实际上是不智能的，因为它为不存在的操作创建了路线。

如何将其限制为仅您需要的操作的示例。

```
resources :posts, :only => [:show, :index] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:45:38.563

来自[Ruby on Rails 指南，资源路由：Rails 默认值](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)：

> 资源路由允许您快速声明给定资源控制器的所有公共路由。资源丰富的路由不是为您的索引、显示、新建、编辑、创建、更新和销毁操作声明单独的路由，而是在一行代码中声明它们。

这是 Rails 轻松快速地定义路线的方式。它不会检查控制器中的方法。

您对其工作原理的理解是正确的。话虽如此，如果您不想要所有路由，而只想拥有索引、创建和更新，您可以选择这样做：

```
resources :posts, :only => [:index, :create, :update] 
```

# python - 使用 Turtle 绘制形状

> ID：12397506
> 
> 赞同：0
> 
> 时间：2012-09-12T23:38:38.940
> 
> 标签：python, python-3.x, turtle-graphics

我正在尝试使用 Python/Turtle 来实现这样的结果：

[http://i.imgur.com/2eoAB.png](http://i.imgur.com/2eoAB.png)

我画了不均匀的正方形，但我的意思是它们是均匀的。正方形也可以是任何形状，具体取决于用户输入（例如，5 用于多边形）。

到目前为止，这是我的代码：

```
import turtle
import time
import random

print ("This program draws shapes based on the number you enter in a uniform pattern.")
num_str = input("Enter the side number of the shape you want to draw: ")
if num_str.isdigit():
    squares = int(num_str)

angle = 180 - 180*(squares-2)/squares

turtle.color(random.random(),random.random(), random.random())
turtle.begin_fill()

count = 0
x = -80
y = -80
turtle.setpos(x,y)
turtle.down()

while count < 8:
    x += 50
    y += 50
    turtle.goto(x,y)
    for i in range(squares):
        count += 1
        turtle.forward(20)
        turtle.left(angle)
        turtle.forward(20)      
        print (turtle.pos())

turtle.end_fill()

time.sleep(15)
turtle.bye() 
```

这就是我得到的：

[http://i.imgur.com/7hAje.png](http://i.imgur.com/7hAje.png)

我得到的错误是：我怎样才能让它打印出总共 8 个形状，而不是只有 2 个，尽管由于计数 += 1 < 8，循环会使其重复 8 次？

我认为循环会通过每次添加 50、50 来改变 x 和 y 的位置，然后我会调整它以提供正确的坐标来制作我想要的形状，但它甚至不会显示全部 8？

我花了一段时间重新配置代码，但不是永远反复试验，我想也许一些帮助会起作用，谢谢。

我正在使用 Python 3.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:46:14.537

如果您选择显示一个有四个边的形状，您只需要绘制两个形状。这是因为您要为*每个 shape**每边增加一次*循环计数器。

 *这不是做循环的好方法，很少需要计数器，当它们是 - 使用`enumerate`

你想尝试这样的事情。

```
numshapes = 8
for x in range(numshapes):
  x += 50
  y += 50
  turtle.goto(x,y)
  for i in range(squares):
      turtle.forward(20)
      turtle.left(angle)
      turtle.forward(20)      
      print (turtle.pos()) 
```*

# linux - 在 ubuntu 中创建别名，在 .profile

> ID：12397508
> 
> 赞同：3
> 
> 时间：2012-09-12T23:39:00.113
> 
> 标签：linux, alias, .profile

我不明白为什么这个简单的别名不起作用。我在网上阅读了一个关于创建它的示例，但不知道我哪里出错了......

我`.profile`在底部的文件中添加了以下内容：

`alias profile='sudo nano ~/.profile'`

当我在终端中输入“配置文件”时，它说找不到命令...

我有一种感觉，这是我正在犯的一个非常非常简单的错误。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T23:42:57.830

如果您注销并重新登录会发生什么？

或者你可以只输入

```
source .profile 
```

这应该会激活您的别名。许多人使用在文件`bash`中设置他们的别名。`.bashrc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T05:58:45.210

要添加永久别名，您可以编辑`~/.bashr`c 并为其添加别名

```
gedit ~/.bashrc 
```

最后添加别名

```
alias update_linux='sudo apt-get update' 
```

不要忘记刷新 bashrc 配置。

```
source ~/.bashrc 
```

有关创建别名的更多详细信息，您可以阅读以下博客：[Codebucket](http://codebucket.co.in/create-an-alias-for-terminal-commands-linux/)

# php - 有没有一起工作的 phpFiddle 和 sqlFiddle？

> ID：12397509
> 
> 赞同：24
> 
> 时间：2012-09-12T23:39:10.293
> 
> 标签：php, sql, jsfiddle, sqlfiddle

是否有一个在线 phpFiddle 和 sqlFiddle 可以一起工作，以便我可以对测试 sql 数据做一些事情？

使用[http://phpfiddle.org/](http://phpfiddle.org/)和[http://sqlfiddle.com/](http://sqlfiddle.com/)但如果它们可以一起工作会很棒。

我敢肯定有人已经创建了一个多合一的 SQL、PHP 和 JS 小提琴。不？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T00:44:45.427

好的，所以这不完全是你要求的，但它很接近。

[http://jsfiddle.net/S3DR9/](http://jsfiddle.net/S3DR9/)

在这里，您可以看到一个 JS Fiddle，它使用 AJAX 成功调用了 SQL Fiddle（现在可能由于我的 apache 配置允许它通过）。您所需要的只是一个 SQL Fiddle 哈希片段（# 之后的所有内容；例如，此 SQL Fiddle 链接[http://sqlfiddle.com/#!2/a2581/1](http://sqlfiddle.com/#!2/a2581/1)的 has 片段为 !2/a2581/1）您可以看到我如何将其传递到 URL 以获取 JSON 响应。该 JS Fiddle 链接中的其余代码只是我从我的主代码库中获取的部分，并根据需要进行了简化。我想这足以了解基础知识，以及如何将它们组合在一起。

现在，尝试在某种试图模拟实际数据库驱动程序的 PHP 库中封装对 SQL Fiddle 的调用将是一个完整的“另一个练习”。我认为这将是您想要在 php 沙箱中做的事情，因此您可以模拟实际的 db 调用。如果有人有兴趣建立它，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T03:00:26.870

在撰写本文时，我认为没有像这样的组合（php/db）小提琴工具。拥有这个在线工具会非常有用。

我认为目前您能做的最好的事情就是拥有便携式服务器、Apache、Mysql db，或者您可以使用 XAMPP 便携式。您可以在 USB 中运行的东西。

拥有便携式版本而不是在线小提琴有好处。

*   您可以更快地运行代码，无需在线等待输出
*   即使你的网速很慢，或者没有互联网，你仍然可以编码。
*   您可以在自己喜欢的 IDE 中编写代码
*   嗯，还有什么人？

那么你也可以将它集成到Dropbox中，如果你是在网上分享网址之后

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T17:00:28.383

您可以将 PHP fiddle 连接到保管箱，然后使用基于文件的数据库，如 sqlite。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-18T20:32:48.897

PHPize.online[具有](http://PHPize.online)所有需要的功能。它提供 SQL fiddle（MySQL 5.7/8.0、MariaDB 10、PostgreSQL 11-14、SQLite 3 和 MS SQL 2017/19）和 PHP fiddle（5.6、7.4、8.0）。

> PHPize.online 是一个免费的在线环境，用于快速运行、试验和共享 PHP 和 SQL 代码。您可以在最流行的 RDBMS 上运行 SQL 代码，并运行可以使用相同数据库的 PHP 代码。对于数据库使用，您可以使用 PDO ($pdo) 和 mysqli ($mysqli) 的预定义实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-08T19:28:18.810

**是 - 故障**

一个名为 Glitch 的帮助演示代码的服务帮助我在 Stack Overflow 上演示了一个 NodeJS 答案，以及用于 PHP 答案的 PHP/SQLite 和 JS 文件。它适用于最近的编辑器，并且是基于各种服务器风格（如 NodeJS 或 PHP）构建的。应用程序演示将 SlimPHP 框架用于 PHP 项目。您可以添加编辑文件并在线发布输出以及使用代码共享实时结果。

在 glitch 上搜索示例 SlimPHP，SQLite 演示返回了这个项目，您可以从中分叉。

[https://glitch.com/~notarazi-slim-php-sqlite](https://glitch.com/%7Enotarazi-slim-php-sqlite)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2022-01-11T10:00:15.740

我是一个旋钮，一个新手，一个搞乱代码的黑客，看看我是否可以让它工作（即我不是一个“开发人员”）。

我使用带有代码管理器插件的 Wordpress 与我的托管公司一起创建环境。我在一个选项卡中打开了代码管理器来摆弄，另一个选项卡显示一个页面，其中包含来自代码管理器的所需短代码以查看结果。

我使用可用的小提琴来测试部分代码（JSFiddle、PHP 沙箱、SQL Fiddle），然后将它们放在 Wordpress 环境中。

有点令人费解，但完成了工作。

# javascript - 有没有办法在 tinymce iframe 中加载外部 javascript 文件？

> ID：12397513
> 
> 赞同：5
> 
> 时间：2012-09-12T23:39:27.020
> 
> 标签：javascript, jquery, tinymce

有没有一种简单的方法来加载可以在 TinyMCE iframe 内工作的外部 javascript？

我发现的唯一东西（可能是答案）是：[http ://www.tinymce.com/wiki.php/API3:class.tinymce.dom.ScriptLoader](http://www.tinymce.com/wiki.php/API3:class.tinymce.dom.ScriptLoader)

但我不确定如何正确加载它或者它是否有效。我试图在`tinymce.init`指令之前和之后加载它，甚至在它内部，但似乎没有任何效果。只是想知道如何初始化“ScriptLoader”功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T10:10:56.883

您可以使用 setup init 配置参数来使用脚本加载器

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onInit.add(function(ed, evt) {

        // Load a script from a specific URL using the global script loader
        tinymce.ScriptLoader.load('somescript.js');

        // Load a script using a unique instance of the script loader
        var scriptLoader = new tinymce.dom.ScriptLoader();

        scriptLoader.load('somescript.js');

      });
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-05T19:17:31.250

为了用 jquery 插件做到这一点，我需要这样做：

```
$('textarea').tinymce({
...
  setup: function(editor) {

    var scriptLoader = new tinymce.dom.ScriptLoader();
    scriptLoader.add("Your first script");
    scriptLoader.add("Your second script");
    scriptLoader.loadQueue();

    ...
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-12T00:14:10.473

下面提到了另一种肯定尝试的方法，现在在编辑器初始化之后，我们可以访问 iframe 的元素并在那里插入或 js。请注意，如果您想使用 html 源代码保存脚本路径，则将脚本添加到侧正文中，否则我将其添加到 head 部分，因为我只想预览这些内容。

```
tinymce.init({
    ...,
    setup : function(ed){

              ed.on('init',function(){
                  console.log('Initialized')
                  var head = ed.dom.select('head')[0]
                  //for body //var body = ed.dom.select('body')[0]
                  ed.dom.add(
                            head,
                            'script',
                            {
                                src: "/path/to/file1.js",
                                type: 'text/javascript'
                            }
                        );

                  ed.dom.add(
                            head,
                            'script',
                            {
                                src: "/path/to/file1.js",
                                type: 'text/javascript'
                            }
                        );

              })

          }
}); 
```

这样，您可以在编辑器完全初始化后添加多个 JS 文件。

# delphi - 进程外 COM 服务器执行

> ID：12397514
> 
> 赞同：6
> 
> 时间：2012-09-12T23:39:27.917
> 
> 标签：delphi, com

我已经将一个古老但仍然有用的 Delphi 5 应用程序变成了一个进程外 COM 服务器。我隐约记得有一种方法可以判断它是由用户直接启动还是作为服务器启动。我知道我以前做过，但我不记得/不知道怎么做。一个命令行开关，也许？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T07:05:09.503

我不知道这在 Delphi 5 中是否可用，但在 Delphi 2010 中，您可以查询全局 ComServer 对象的启动模式：

```
if ComServer.StartMode = smAutomation then
  ShowMessage('started as automation server')
else if ComServer.StartMode = smStandalone then
  ShowMessage('started manually'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T02:38:12.533

当作为 COM 服务器启动时，似乎该 exe 是通过开关“-Embedding”启动的。

# regex - sed 文件删除前导文本

> ID：12397521
> 
> 赞同：0
> 
> 时间：2012-09-12T23:40:42.463
> 
> 标签：regex, bash, sed, file-rename

我一直在努力让它工作一段时间......[这个问题](https://stackoverflow.com/questions/2372719/using-sed-to-mass-rename-files)有所帮助，但我仍在努力让它发挥作用。我不想安装自制软件，因为这是我现在正在执行的一项罕见任务。

我有几千个文件，其中包含一串文本、一个下划线、更多文本、下划线，最后是我想要保留的重要文件名。尝试`*_*_`使用`\(*\)/\1/`.

我尝试了几种不同的方法，但我得到的只是原始文件名再次被吐出。任何帮助表示赞赏。- 不确定这是正则表达式问题，还是 sed，或者可能两者兼而有之。

```
ls | sed 's/^*_*_\(*\)/\1/' > ouput.txt;
ls | sed 's/^*_*_\(*\$\)/\1/' > out.txt
ls | sed 's/\(^*_*_\)\(*\$\)/\2/' > out.txt
ls | sed 's/\(^.*_+.*_+\)\(.*\$\)/mv & \2/' > out.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:47:15.173

这个正则表达式能解决问题吗？如果没有，请报告它的输出是如何关闭的（详细信息），我会帮你调整它。

```
ls -1 | sed -e 's/^[^_]*_[^_]*_//' 
```

注意 1：您可能希望使用`ls -1`将文件格式化为单列。

注意 2：上述方法只是删除了文件名中不需要的部分，而不是尝试将您想要的部分存储在正则表达式缓冲区中。

* * *

**编辑**

这是一个执行重命名的 bash 脚本。

```
for f in `ls -1`
do
    new_name=`echo "$f" | sed 's/^[^_]*_[^_]*_//'`
    mv "$f" "$new_name"
done 
```

可以写成单行，但我是为了简洁而不是简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:52:28.230

`command | sed 's;^.*_;;'`会成功的。使用`find`命令而不是`ls`.

例如，

```
 find . -type f | sed 's;^.*_;;' 
```

# c++ - Qt3D中QGLView（不是QGLWidget）的重绘和渲染后效果

> ID：12397522
> 
> 赞同：13
> 
> 时间：2012-09-12T23:40:44.950
> 
> 标签：c++, opengl, qml, qt5, qt3d

我目前正在使用 Qt3D 模块在 C++/Qt5 中编写游戏。

我可以在 QGLView 上渲染场景（QGLSceneNodes），但现在我坚持**使用一些 GUI 元素对场景**进行重绘。我还没有决定是使用 QML 还是 C++ 来定义界面的外观和感觉，所以我对两者的解决方案持开放态度。（请注意，QML 模块称为 QtQuick3D，C++ 模块称为 Qt3D，它们都是 Qt5 的一部分。）

*我非常喜欢基于 QML 的解决方案。*

**我怎样才能做一些过度绘画？**

以下事情必须是可能的：

*   在给定的屏幕坐标处绘制 2D 项目（图像），当然支持 alpha 通道。
*   使用系统字体绘制文本，可能首先在图像上绘画并将其用作 Qt3D OpenGL 上下文中的纹理。
*   对屏幕坐标中的鼠标输入做出反应（与 3D 场景对象拾取相反）。

我认为这一切都是可能的，只需将另一个 QGLSceneNode 用于 2D GUI 部分。但我认为定位和定向某些场景节点以便在渲染期间重新定向和重新定位（使用顶点着色器）没有意义，会引入数值错误并且似乎效率低下。

*使用另一个“GUI”顶点着色器是否正确？*

**（如何）我可以使后期渲染效果和重绘一起工作吗？**

如果我能做以下渲染后效果，那就太好了：

*   阅读之前渲染的场景，应用一些 2D 图像效果（我可以想象将它们实现为片段着色器，并使用此效果着色器在最终屏幕上渲染之前渲染的缓冲区）。这使我能够使 GUI 的某些部分看起来像具有模糊效果的玻璃。
*   一些更高级的效果可以使场景看起来更逼真：深度和运动模糊、热相关的空气闪烁、发光效果。它们都可以使用片段着色器（这不应该是问题的一部分）和渲染期间的附加缓冲区来描述。它们应该放在主屏幕渲染过程和 GUI 重绘之间，这就是我将它包含在这个问题中的原因。

当我使用特殊的着色器程序实现重绘时，我发现了一个问题：我无法访问 GUI 后面的像素以应用高斯模糊等效果来使 GUI 看起来像玻璃。**我必须将场景渲染到另一个缓冲区而不是 QGLView。这是我的主要问题...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:26:57.807

如果您从 qglwidget 继承一个类，则调整大小和事件很容易实现这里是一个简短的视频，可以帮助您入门

[https://www.youtube.com/watch?v=1nzHSkY4K18](https://www.youtube.com/watch?v=1nzHSkY4K18)

关于绘制图像和文本 qt 有 qpainter 可以帮助您做到这一点，使用 QGLContext ( [http://qt-project.org/doc/qt-4.8/qglcontext.html](http://qt-project.org/doc/qt-4.8/qglcontext.html) ) 将当前上下文传递给它并渲染您的标签/图像/小部件在特定坐标处，但请确保此函数调用是您的绘画事件中的最后一个，否则它不会在顶部

要对鼠标事件做出反应，让您的类包含 QMouseEvent 标头，然后您可以在小部件中获取鼠标的坐标，并通过重载受保护的事件 mouseMoveEvent(QMouseEvent *event){event->pos();} 将它们传递给 opengl

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:03:51.173

我在通过 qglwidget 制作 opengl 游戏时也遇到过类似的问题，我想出的解决方案是使用正交投影来渲染从头构建的控件。在主绘制函数结束时，我调用了一个单独的函数来设置视图，然后绘制 2d 位。至于鼠标事件，我捕获发送到主小部件的事件，然后使用命中测试、递归坐标偏移和允许嵌套控件的伪回调的组合。在我的实现中，我一次将命令转发到顶层控件（主要是滚动框），但如果您需要动态添加控件，则可以轻松添加链表结构。我目前只是使用四边形将部件渲染为彩色面板，但添加纹理甚至使它们成为响应动态照明的 3d 组件应该很简单。

```
void GLWidget::paintGL() {
  if (isPaused) return;
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

  glPushMatrix();

  glLightfv(GL_LIGHT0, GL_POSITION, FV0001);

  gluLookAt(...);

  // Typical 3d stuff

  glCallList(Body::glGrid);

  glPopMatrix();

//non3d bits
  drawOverlay(); //  <---call the 2d rendering

  fpsCount++;
} 
```

这是为 2d 渲染设置模型视图/投影矩阵的代码：

```
void GLWidget::drawOverlay() {
  glClear(GL_DEPTH_BUFFER_BIT);

  glPushMatrix();   //reset
  glLoadIdentity(); //modelview

  glMatrixMode(GL_PROJECTION);//set ortho camera
  glPushMatrix();
  glLoadIdentity();
  gluOrtho2D(0,width()-2*padX,height()-2*padY,0); // <--critical; padx/y is just the letterboxing I use
  glMatrixMode(GL_MODELVIEW);

  glDisable(GL_DEPTH_TEST);  //  <-- necessary if you want to draw things in the order you call them
  glDisable( GL_LIGHTING );  //  <-- lighting can cause weird artifacts

  drawHUD();  //<-- Actually does the drawing

  glEnable( GL_LIGHTING );
  glEnable(GL_DEPTH_TEST);

  glMatrixMode(GL_PROJECTION); glPopMatrix();
  glMatrixMode(GL_MODELVIEW); glPopMatrix();
} 
```

这是处理 hud 的主要绘图函数；大多数绘图功能类似于大的“背景面板”块。您基本上推送模型视图矩阵，像在 3d 中一样使用平移/旋转/缩放，绘制控件，然后使用 popmatrix：

```
void GLWidget::drawHUD() {
  float gridcol[] = { 0.5, 0.1, 0.5, 0.9 };
  float gridcolB[] = { 0.3, 0.0, 0.3, 0.9 };

//string caption
  QString tmpStr = QString::number(FPS);
  drawText(tmpStr.toAscii(),120+padX,20+padY);

//Markers
  tGroup* tmpGroup = curGroup->firstChild;

  while (tmpGroup != 0) {
    drawMarker(tmpGroup->scrXYZ);
    tmpGroup = tmpGroup->nextItem;
  }

//Background panel
  glEnable(GL_BLEND);
  glTranslatef(0,height()*0.8,0);
  glBegin(GL_QUADS);
    glColor4fv(gridcol);
    glVertex2f(0.0f, 0.0);
    glVertex2f(width(), 0);
    glColor4fv(gridcolB);
    glVertex2f(width(), height()*0.2);
    glVertex2f(0.0f, height()*0.2);
  glEnd();
  glDisable(GL_BLEND);

  glLoadIdentity(); //nec b/c of translate ^^
  glTranslatef(-padX,-padY,0);

//Controls
  cargoBox->Draw();
  sideBox->Draw();
  econBox->Draw();
} 
```

现在是控件本身。我的所有控件（如按钮、滑块、标签等）都继承自一个具有空虚函数的公共基类，这些空虚函数允许它们与彼此进行类型无关的交互。基础具有典型的东西，如高度、坐标等，以及一些处理回调和文本渲染的指针。还包括通用的 hittest(x,y) 函数，它告诉它是否被点击。如果你想要椭圆控制，你可以把它变成虚拟的。这是基类、hittest 和一个简单按钮的代码：

```
class glBase {
public:
  glBase(float tx, float ty, float tw, float th);

  virtual void Draw() {return;}

  virtual glBase* mouseDown(float xIn, float yIn) {return this;}
  virtual void mouseUp(float xIn, float yIn) {return;}
  virtual void mouseMove(float xIn, float yIn) {return;}

  virtual void childCallBack(float vIn, void* caller) {return;}

  bool HitTest(float xIn, float yIn);

  float xOff, yOff;
  float width, height;

  glBase* parent;

  static GLWidget* renderer;
protected:
  glBase* callFwd;
};

bool glBase::HitTest(float xIn, float yIn) { //input should be relative to parents space
  xIn -= xOff; yIn -= yOff;
  if (yIn >= 0 && xIn >= 0) {
    if (xIn <= width && yIn <= height) return true;
  }
  return false;
}

class glButton : public glBase {
public:
  glButton(float tx, float ty, float tw, float th, char rChar);

  void Draw();

  glBase* mouseDown(float xIn, float yIn);
  void mouseUp(float xIn, float yIn); 
private:
  bool isPressed;
  char renderChar;
};

glButton::glButton(float tx, float ty, float tw, float th, char rChar) :
glBase(tx, ty, tw, th), isPressed(false), renderChar(rChar) {}

void glButton::Draw() {
  float gridcolA[] = { 0.5, 0.6, 0.5, 1.0 };//up
  float gridcolB[] = { 0.2, 0.3, 0.2, 1.0 };
  float gridcolC[] = { 1.0, 0.2, 0.1, 1.0 };//dn
  float gridcolD[] = { 1.0, 0.5, 0.3, 1.0 };
  float* upState;
  float* upStateB;

  if (isPressed) {
    upState = gridcolC;
    upStateB = gridcolD;
  } else {
    upState = gridcolA;
    upStateB = gridcolB;
  }

  glPushMatrix();
  glTranslatef(xOff,yOff,0);

  glBegin(GL_QUADS);
    glColor4fv(upState);
    glVertex2f(0, 0);
    glVertex2f(width, 0);
    glColor4fv(upStateB);
    glVertex2f(width, height);
    glVertex2f(0, height);
  glEnd();

  if (renderChar != 0) //center
    renderer->drawChar(renderChar, (width - 12)/2, (height - 16)/2);

  glPopMatrix();
}

glBase* glButton::mouseDown(float xIn, float yIn) {
  isPressed = true;
  return this;
}

void glButton::mouseUp(float xIn, float yIn) {
  isPressed = false;
  if (parent != 0) {
    if (HitTest(xIn, yIn)) parent->childCallBack(0, this);
  }
} 
```

由于像滑块这样的复合控件有多个按钮，并且滚动框有图块和滑块，因此对于绘图/鼠标事件，它们都需要递归。每个控件还有一个通用的回调函数，它传递一个值和它自己的地址；这允许父母测试它的每个孩子，看看谁在打电话，并做出适当的回应（例如向上/向下按钮）。请注意，子控件是通过 c/dtors 中的 new/delete 添加的。此外，在父控件自己的 draw() 调用期间调用子控件的 draw() 函数，这允许所有内容都是独立的。以下是来自包含 3 个子按钮的中级滑动条的相关代码：

```
glBase* glSlider::mouseDown(float xIn, float yIn) {
  xIn -= xOff; yIn -= yOff;//move from parent to local coords
  if (slider->HitTest(xIn,yIn-width)) { //clicked slider
    yIn -= width; //localize to field area
    callFwd = slider->mouseDown(xIn, yIn);
    dragMode = true;
    dragY = yIn - slider->yOff;
  } else if (upButton->HitTest(xIn,yIn)) {
    callFwd = upButton->mouseDown(xIn, yIn);
  } else if (downButton->HitTest(xIn,yIn)) {
    callFwd = downButton->mouseDown(xIn, yIn);
  } else {
    //clicked in field, but not on slider
  }

  return this;
}//TO BE CHECKED (esp slider hit)

void glSlider::mouseUp(float xIn, float yIn) {
  xIn -= xOff; yIn -= yOff;
  if (callFwd != 0) {
    callFwd->mouseUp(xIn, yIn); //ok to not translate b/c slider doesn't callback
    callFwd = 0;
    dragMode = false;
  } else {
    //clicked in field, not any of the 3 buttons
  }
}

void glSlider::childCallBack(float vIn, void* caller) { //can use value blending for smooth
  float tDelta = (maxVal - minVal)/(10);

  if (caller == upButton) {//only gets callbacks from ud buttons
    setVal(Value - tDelta);
  } else {
    setVal(Value + tDelta);
  }
} 
```

现在我们已经拥有了呈现到opengl 上下文中的自包含控件，所需要的只是来自顶级控件的接口，例如来自glWidget 的鼠标事件。

```
void GLWidget::mousePressEvent(QMouseEvent* event) {
  if (cargoBox->HitTest(event->x()-padX, event->y()-padY)) { //if clicked first scrollbox
    callFwd = cargoBox->mouseDown(event->x()-padX, event->y()-padY); //forward the click, noting which last got
    return;
  } else if (sideBox->HitTest(event->x()-padX, event->y()-padY)) {
    callFwd = sideBox->mouseDown(event->x()-padX, event->y()-padY);
    return;
  } else if (econBox->HitTest(event->x()-padX, event->y()-padY)) {
    callFwd = econBox->mouseDown(event->x()-padX, event->y()-padY);
    return;
  }

  lastPos = event->pos(); //for dragging
}

void GLWidget::mouseReleaseEvent(QMouseEvent *event) {
  if (callFwd != 0) { //Did user mousedown on something?
    callFwd->mouseUp(event->x()-padX, event->y()-padY); 
    callFwd = 0; //^^^ Allows you to drag off a button before releasing w/o triggering its callback
    return;
  } else { //local
    tBase* tmpPick = pickObject(event->x(), event->y());
    //normal clicking, game stuff...
  }
} 
```

总的来说，这个系统有点hacky，我没有添加一些功能，如键盘响应或调整大小，但这些应该很容易添加，可能需要回调中的“事件类型”（即鼠标或键盘）。您甚至可以将 glBase 子类化到最顶层的小部件中，它甚至会允许它接收 parent->childcallback。虽然工作量很大，但这个系统只需要 vanilla c++/opengl，而且它使用的 cpu/内存资源比原生 Qt 的东西要少得多，可能是一两个数量级。如果您需要更多信息，请询问。

# silverstripe - [Silverstripe 2.4]：如何从一对多关系中获取包含列的记录？

> ID：12397524
> 
> 赞同：0
> 
> 时间：2012-09-12T23:40:57.380
> 
> 标签：silverstripe, data-objects

有两个具有一对多关系的数据对象类“A”和“B”。我想从父数据对象和子数据对象中获取包含列的数据。如何在 Silverstripe 的 ORM 或 SQL 查询中实现这一点。

示例：数据对象“A”有两个事件，第一个事件包含一个日期信息（开始和结束日期）。第二个事件包含两个日期信息（开始日期和结束日期）。

我想查询数据库以获取包含“A”和“B”列的信息，它应该显示 3 行作为结果。一个来自“A”，两个来自“B”。

我正在使用 Silverstripe 2.4。一部电影可以有多个日期显示。Movie 数据对象与 MovieDate 数据对象具有一对多的关系。我想从 Movie 中获取所有列，重复与其关联的 MovieDate 的每条记录。这意味着如果电影有两个日期，那么我想获得两条记录

```
Title   Desc   StartDate   EndDate
-----   ----   ---------   -------
Matrix  AAA    2012-09-20  2012-09-20
Matrix  AAA    2012-09-29  2012-09-29 
```

这是供您考虑的代码

```
<?php
class Movie extends DataObject
{
 public static $db = array(
    'Title'    => 'Varchar',
    'Desc'     => 'Text',
 );

 public static $defaults = array(
      'RedirectionType' => 'Internal',
 );

 public static $has_one = array(
      'Image'         => 'Image',
      'Parent'        => 'Page',
      "LinkTo"        => "SiteTree"
 );

public static $has_many = array(
      'MovieDates'     => 'MovieDate'
 );

 static $summary_fields = array(
    'Title'      => 'Movie Title',
    'Desc'       => 'Movie Description'
 );

 function getRequirementsForPopup() {

      Requirements::customCSS("
        .iframe_wrap {
                top: 35%;
            }
      ");

 }

 public function getCMSFields()
 {
    $fields = new FieldSet(new TabSet('Root', $tab1 =  new Tab('Main')));

    $fields->addFieldsToTab('Root.Main', new TextField('Title', 'Movie Title'));
    $fields->addFieldsToTab('Root.Main', new TextareaField('Desc', 'Movie Description'));

    $tablefield = new DataObjectManager(
        $this,
        'MovieDates',
        'MovieDate',
        array('MovieStartDate' => 'Movie Start', 'MovieEndDate' => 'Movie End')
     );

    $tablefield->setPopupWidth(900);
    $tablefield->setAddTitle("Movie Date/Time");
    $fields->addFieldsToTab('Root.Main', $tablefield);
    $fields->addFieldsToTab('Root.Main', new LiteralField("Space", "</br></br></br></br></br>") );
    return $fields;
 }

}

    <?php
class MovieDate extends DataObject{
static $db = array(
    'MovieStartDate'             => 'Datetime',
    'MovieEndDate'               => 'Datetime',
);

static $has_one = array(
    'Movie' => 'Movie'
);

function getCMSFields(){

        $fields = new FieldSet();

        $movieStartDate = new DateField('MovieStartDate', 'Movie Start');
        $movieStartDate->setConfig('showcalendar', true);
        $fields->push($movieStartDate);

        $movieEndDate = new DateField('MovieEndDate', 'Movie End');
        $movieEndDate->setConfig('showcalendar', true);
        $fields->push($movieEndDate);

        $space = new LiteralField("Space", "</br></br></br></br></br>");
        $fields->push($space);

    return $fields;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:13:47.137

您可以创建`DataObjectSet`包含单独`DataObject::get()`调用的结果。

```
$a = DataObject::get(...);
$b = DataObject::get(...);

$all = new DataObjectSet();

$all->merge($a);
$all->merge($b);

$all->sort('date','desc'); 
```

该代码未经测试，但希望您能理解。[参考 DataObjectSet 文档以查看完整的 API](http://api.silverstripe.org/2.4/sapphire/model/DataObjectSet.html)。

编辑：这假设您使用的是 SilverStripe 2.x - 请参阅[更新的 3.0 数据模型文档](http://doc.silverstripe.org/framework/en/topics/datamodel)以了解与 SS 3.0 的使用情况，尤其是`DataObject::get()`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:32:43.727

我想你所追求的是“左加入”。不幸的是，silverstripe 无法使用内置的 ORM 查询检索连接表上的数据（请参阅[http://doc.silverstripe.org/framework/en/2.4/topics/datamodel#joining](http://doc.silverstripe.org/framework/en/2.4/topics/datamodel#joining)）

所以你需要在这里使用一个普通的 sql 查询：

```
 $query = "
        SELECT `Movie`.*, `MovieDate`.*
        FROM `Movie`
        LEFT JOIN `MovieDate` ON `Movie`.`ID` = `MovieDate`.`MovieID`
        ORDER BY `Movie`.`Title`
    ";
    $records = DB::query($query); 
```

您`$records`现在可以使用以下方法循环`foreach`：

```
 foreach($records as $record) {
        print_r($record);
    } 
```

另请参阅此论坛主题以获取更多信息： [http ://www.silverstripe.org/general-questions/show/12745](http://www.silverstripe.org/general-questions/show/12745)

# python - 我可以将 ssh/scp 与存储在数据库中的私钥一起使用吗？

> ID：12397526
> 
> 赞同：3
> 
> 时间：2012-09-12T23:41:14.230
> 
> 标签：python, database, ssh, ssh-keys

我正在开发一个 python/django 应用程序，除其他外，它需要通过 ssh/scp 将文件推送到另一台主机。为了安全起见，我想使用基于密钥的身份验证，但我想将私钥存储在 django 数据库中，而不是文件系统中。有没有办法做到这一点，除了从数据库中检索密钥，写入临时文件，然后指定该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:58:03.133

使用 paramiko，您可以做一些技巧来避免将密钥写入文件系统。使用[paramiko connect](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html#connect)你可以指定一个 pkey 作为参数。

`PKey`object 有一个[`from_private_key`](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html#from_private_key)获取文件对象的方法（`StringIO`使用从数据库中提取的密钥），例如：

```
f = StringIO.StringIO()
# retreive your key from db
f.write(your_key)
private_key = paramiko.RSAKey.from_private_key(f)
ssh.connect(server, username=username,pkey=private_key) 
```

[从字符串中获取后如何在 paramiko 中包含私钥？](https://stackoverflow.com/questions/11994139/how-to-include-the-private-key-in-paramiko-after-fetching-from-string)

# c++ - C++ - 扩展数据类型

> ID：12397529
> 
> 赞同：2
> 
> 时间：2012-09-12T23:42:09.833
> 
> 标签：c++, arrays, methods, char, extend

有没有办法在 C++ 中扩展数据类型，就像在 JavaScript 中一样？

我想这有点像这样：

```
char data[]="hello there";
char& capitalize(char&)
{
    //Capitalize the first letter. I know that there
    //is another way such as a for loop and subtract
    //whatever to change the keycode but I specifically 
    //don't want to do it that way. I want there
    //to be a method like appearance.
}

printf("%s", data.capitalize()); 
```

这应该以某种方式打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:54:02.170

在 C++ 中没有办法做到这一点。在我看来，最接近这一点的是创建一个行为类似于内置类型但会提供额外功能的类。永远不可能让它们像内置类型一样 100% 工作，但“代理”类型并不总是理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:56:49.217

您可以获得的最接近的是使用运算符重载，例如

```
#include <iostream>
#include <string>
#include <cctype>
#include <algorithm>

std::string operator!(const std::string& in) {
  std::string out = in;
  std::transform(out.begin(), out.end(), out.begin(), (int (*)(int)) std::toupper);
  return out;
}

int main() {
  std::string str = "hello";
  std::cout << !str << std::endl;
  return 0;
} 
```

替代方法包括创建一个具有`operator std::string`重载的类和一个构造函数以使用`std::string`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T23:48:07.893

不，[JavaScript](http://en.wikipedia.org/wiki/JavaScript)基于对象的原型。这个概念不适用于[C++](http://en.wikipedia.org/wiki/C_%28programming_language%29)。它们是如此不同的语言，我什至无法为您的问题举一个反例。

# php - php mongodb聚合（断言13111错误）

> ID：12397530
> 
> 赞同：3
> 
> 时间：2012-09-12T23:42:12.010
> 
> 标签：php, mongodb, aggregation-framework, mongodb-php

我正在尝试使用 php 中的新 mongodb 聚合框架。

我在 OSX Mountain Lion 上使用 mongod v2.2、php 5.3.13 和 mongodb pecl 库 v1.3.0beta2

我在门口跌跌撞撞...

我从 php 文档页面中获取了其中一个示例并将其缩减为...

```
$m = new Mongo;
$c = $m->selectDB("test")->selectCollection("zips");
$out = $c->aggregate(array('$group' => array('_id' => '$state')));
var_dump($out); 
```

当我查看页面时，我的 mongod 出现错误...

> 断言 13111：：字段（管道）3 的错误类型！= 4

我一辈子都看不到代码有什么问题。

如果我`db.zips.aggregate({$group : {'_id': "$state"}})`在 mongo 控制台中运行它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:14:51.187

这听起来可能很愚蠢，我知道[MongoCollection::aggregate 文档](http://www.php.net/manual/en/mongocollection.aggregate.php)说该方法接受多个参数作为管道的步骤，但我设法完成这项工作的唯一方法是发出包含所有管道的单个参数步骤，像这样：

```
$out = $c->aggregate(array(
    array(
    '$group' => array('_id' => '$state')
    )
); 
```

我希望这有帮助。

# c++ - range-for循环中的访问索引

> ID：12397532
> 
> 赞同：44
> 
> 时间：2012-09-12T23:42:39.467
> 
> 标签：c++, c++11

我有一个对象向量，并正在使用 range-for 循环对其进行迭代。我正在使用它从对象中打印一个函数，如下所示：

```
vector<thisObject> storedValues;
//put stuff in storedValues
for(auto i:storedValues)
{
   cout<<i.function();
} 
```

但我也想打印索引。我想要的输出是：

```
1: value
2: value
//etc 
```

我打算只使用一个每次都增加的计数器，但这似乎非常低效。有没有更好的办法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-12T23:46:15.253

你不能。*索引*是向量的特定概念，而不是集合的通用属性。另一方面，基于范围的循环是一种通用机制，用于迭代*任何*集合的每个元素。

如果您确实想使用特定容器实现的细节，只需使用普通循环：

```
for (std::size_t i = 0, e = v.size(); i != e; ++i) { /* ... */ } 
```

重复这一点：基于范围的循环用于操作任何集合的*每个元素*，其中集合本身并不重要，并且在循环主体中从未提及容器。它只是您工具箱中的另一个工具，您不会被迫将它用于所有事情。相反，如果您想改变集合（例如删除或随机播放元素），或者使用有关集合结构的特定信息，请使用普通循环。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-04-05T00:50:27.990

我创建了一个预处理器宏（@Artyer 大大简化了），它以相对干净的方式为您处理这个问题：

```
#define for_indexed(...) for_indexed_v(i, __VA_ARGS__)
#define for_indexed_v(v, ...) if (std::size_t v = -1) for (__VA_ARGS__) if ((++v, true)) 
```

示例用法：

```
std::vector<int> v{1, 2, 3};
for_indexed (auto const& item : v) {
    if (i > 0) std::cout << ", ";
    std::cout << i << ": " << item;
} 
```

要使用不同的循环变量：

```
for_indexed_v (my_counter, auto const& item : v) ... 
```

额外的控制流逻辑应该在任何非调试版本中被优化掉。剩下的是相对容易阅读的循环语法。

**2020 年注意事项：**使用基于 lambda 的解决方案而不是宏诡计可能更明智。当然，语法不会那么“干净”，但它的优点是可以被识别为实际的 C++ 语法。这是你的选择。

**2017 年 5 月 28 日更新**：使`break;`语句正常工作
**2019 年 1 月 28 日更新**：`for`输入宏名称，使该词`indexed`成为有效的变量名称。我怀疑`for_indexed`会引起任何冲突。
**2020/12/23 更新**：大大简化（感谢@Artyer）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-02-13T14:19:48.650

您可以使用[range-v3](https://github.com/ericniebler/range-v3)`enumerate`的视图：

```
std::vector<thisObject> storedValues;
for (auto const& [idx, value] : storedValues | ranges::views::enumerate) {
  std::cout << idx << ": " << value << '\n';
} 
```

C++20 将在 range-for 循环中引入[额外的初始化：](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0614r0.html)

```
std::vector<thisObject> storedValues;
for (size_t idx = 0; auto value : storedValues) {
  std::cout << idx << ": " << value << '\n';
  ++idx;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-10-22T17:38:13.050

使用`range-v3`. `Range-v3`是由 ISO C++ 委员会成员 Eric Niebler 设计和实现的下一代范围库，旨在并有望在未来合并到 C++ 标准中。

通过使用`range-v3`OP 的问题可以很容易地解决：

```
using ranges::v3::view::zip;
using ranges::v3::view::ints;

for(auto &&[i, idx]: zip(storedValues, ints(0u))){
    std::cout << idx << ": " << i.function() << '\n';
} 
```

您将需要一个支持 C++17 或更高版本的编译器来编译这段代码，不仅因为[结构化绑定](http://wg21.link/p0217r3)语法，而且因为返回类型`begin`和`end`返回值的函数`ranges::v3::view::zip`不同。

[您可以在此处](https://godbolt.org/g/NQc9VD)查看在线示例。的文档在`range-v3`这里[，](https://ericniebler.github.io/range-v3/index.html#range-views)源代码本身托管[在这里](https://github.com/ericniebler/range-v3)。如果您使用的是 MSVC 编译器，也可以查看[此处。](https://github.com/Microsoft/Range-V3-VS2015)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-13T07:19:55.740

老实说，这很简单，只需弄清楚你可以减去地址:)

**&i**将引用内存中的地址，并且它会从索引到索引递增 4，因为它保存了定义向量类型的整数。现在**&values[0]**引用了第一点，当你减去 2 个地址时，两者之间的差异分别为 0,4,8,12，但实际上它减去了通常为 4 个字节的整数类型的大小。所以对应 0 = 0th int,4 = 1st int, 8 = 2nd int, 12 = 3rd int

这是在一个向量中

```
vector<int> values = {10,30,9,8};

for(auto &i: values) {

cout << "index: " <<  &i  - &values[0]; 
cout << "\tvalue: " << i << endl;

} 
```

这是一个常规数组，几乎是一样的

```
int values[]= {10,30,9,8};

for(auto &i: values) {

cout << "index: " <<  &i  - &values[0];
cout << "\tvalue: " << i << endl;

} 
```

**请注意**这是针对 C++11 的，如果您使用的是 g++，请记住使用**-std=c++11**参数进行编译

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-14T05:48:46.700

这是 c++17 的预处理器宏版本的更新版本。与手动使用索引编写循环相比，Clang 生成相同的调试和优化代码。MSVC 生成相同的优化代码，但在调试中添加了一些额外的指令。

```
#define for_index(...) for_index_v(i, __VA_ARGS__)
#define for_index_v(i, ...) if (size_t i##_next = 0; true) for (__VA_ARGS__) if (size_t i = i##_next++; true) 
```

我试图深入研究 MSVC 在调试版本中添加的额外代码，我不太确定它的目的是什么。它在循环开始时添加以下内容：

```
 xor     eax, eax
        cmp     eax, 1
        je      $LN5@for_i 
```

这将完全跳过循环。使用示例：[https ://godbolt.org/z/VTWhgT](https://godbolt.org/z/VTWhgT)

# c - 在屏幕上的任何位置打印文本

> ID：12397534
> 
> 赞同：0
> 
> 时间：2012-09-12T23:42:56.957
> 
> 标签：c

我想知道如何使用 C 程序在不同位置打印文本。我想将屏幕分成四个季度，我想在每个季度打印不同的值集。

例如：数据 X 将在第 1 季度打印，数据 Y 将在第 2 季度打印，等等。

我如何在 Linux 平台上实现这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:54:51.990

在 linux 下，最简单的方法是使用[ncurses](http://www.gnu.org/software/ncurses/)。它是 GNU 软件，可靠且开源。检查页面上的链接。
您还可以查看[libyui](http://www.slideshare.net/hedgehogpainter/3-uis-for-the-price-of-one-code)，它是用于开发 YAST (opensuse) 的工具包，可在[sourceforge](http://sourceforge.net/projects/libyui/)上下载。我从未使用过它，但它可以让您生成控制台 UI 和 GUI（GTK+ 和 Qt）......
为了完整起见，您也可以使用[屏幕多路复用器](https://unix.stackexchange.com/questions/549/tmux-vs-gnu-screen)，但这超出了您的问题范围。

# html - 保留在 HTML 选择标记中选择的值

> ID：12397537
> 
> 赞同：0
> 
> 时间：2012-09-12T23:43:10.700
> 
> 标签：html, html-select

![在此处输入图像描述](../Images/0c423d5fc32ca7373f4f02005229ea71.png)

我正在为客户创造一种在订单之上给小费的方式。但是，当您“更新”总数时，选择值将始终回到 $0。有没有办法保留该值，以便即使刷新页面，也会显示用户选择的提示？

我知道 select 标签有一个“selected”属性，但我不确定如何让它为我工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:45:49.170

在提示选择菜单的更改事件上，您可以设置 cookie 或使用本地存储并以这种方式保存值。然后在 DOM 准备就绪时，只需读取 cookie 或本地存储值并更新选择菜单。

如果您不关心 http 流量，您还可以在同一更改事件处理程序上对您的服务器进行 ajax 调用并设置会话变量。然后，当您输出 HTML 时，`selected`可以将该属性应用于与会话 var 匹配的选项。

未经测试，但这样的事情应该可以工作：

```
$(function(){
    var savedTip = localStorage.getItem('tipVal');
    if (savedTip) {
        $('#tip').val(savedTip);
        localStorage.removeItem('tipVal'); // garbage collection
    }

    $('#tip').on('change', function(e) {
        localStorage.setItem('tipVal', $(this).val());
    });
}); 
```

# iphone - 使用 passsource.com 为 ipassbook 创建优惠券，有人知道 iphone 如何根据 url 确定要打开哪个应用程序吗？

> ID：12397541
> 
> 赞同：-1
> 
> 时间：2012-09-12T23:43:35.223
> 
> 标签：iphone

我正在使用 passsource.com 为 ipassbook 创建优惠券，有人知道 iphone 如何根据 url 确定要打开的应用程序吗？

我使用 passsource.com API 创建了一个示例优惠券，它将我重定向到以下 URL [http://www.passsource.com/create.php?data=eNortjIxsVIKCUpyyzRIiwox1Q4Jjig38rNwNw73145wtkiqLE43zYsIsSjxjYxyDHZ1tVWyBlwwl9EPgQ,,&template_id=2](http://www.passsource.com/create.php?data=eNortjIxsVIKCUpyyzRIiwox1Q4Jjig38rNwNw73145wtkiqLE43zYsIsSjxjYxyDHZ1tVWyBlwwl9EPgQ,,&template_id=2)

要求将此发送给用户，如果用户在 iphone 中打开此 URL，则会打开存折应用程序。我不明白怎么办？我什至验证了特定的标题，但没有具体的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:41:44.277

我尝试了 chrome 的 Override user-agent 设置，看看实际发生了什么。iphone ios6 的用户代理是

`Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_2 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8H7 Safari/6533.18.5`

如果我如上所述修改用户代理，则会下载扩展名为 .pkpass 的文件，而不是打开页面。我假设 safari 将具有到 ipassbook 的 mime 类型映射，以打开具有 .pkpass 扩展名的文件

# jquery - Jquery 悬停事件 + css.animate

> ID：12397543
> 
> 赞同：1
> 
> 时间：2012-09-12T23:44:00.997
> 
> 标签：jquery, hover, jquery-animate, mouseevent

我创建了一个简单的工具提示，当您将鼠标悬停在 (i) 图标上时会淡入。将鼠标悬停在专辑封面上时会出现该图标。目前有一个奇怪的错误，我认为这是由于 .more-info opacity css animate jQuery 方法造成的。我想知道如何解决这个问题或如何更改它可以工作的代码。

错误：当悬停在 (i) 图标上，工具提示出现然后离开它或 (i) 图标时，工具提示会淡出，但如果您在专辑封面完全淡出之前将鼠标悬停在专辑封面上，它会闪烁一点。只有将鼠标悬停在 (i) 图标上或悬停在其自身的工具提示上时，工具提示才会出现。

该错误的视频：[http ://www.screenr.com/tIJ8](http://www.screenr.com/tIJ8)

出现问题的网站：http: [//www.midnightlisteners.com/](http://www.midnightlisteners.com/)

工具提示 css 文件： http: [//www.midnightlisteners.com/wp-content/themes/midnightlisteners-v2.0wp/css/the-tooltip.css](http://www.midnightlisteners.com/wp-content/themes/midnightlisteners-v2.0wp/css/the-tooltip.css)

HTML 代码：

```
<div class="more-info">
    <div class="the-tooltip top center black">
        <span class="too-tip-text">
        <h3>Similar than: <span><?php the_title(); ?> &rsaquo; </span></h3>
        <div class="related">
           <ul>
           </ul>
        </div>
        </span>
    </div>
</div> 
```

​</p>

jQuery代码：

```
 $(".play").mouseenter(function() {
        $(this).next('.more-info').stop(true, false).animate({
            opacity: '1'
        }, 800, 'linear');
        $(".more-info").mouseenter(function() {
            $(this).stop(true).animate({
                opacity: '1'
            }, 800, 'linear');
        });
    });
    $(".play").mouseleave(function() {
        $(this).next('.more-info').stop(true, false).animate({
            opacity: '0'
        }, 1000, 'linear');
        $(".more-info").mouseleave(function() {
            $(this).stop(true).animate({
                opacity: '0'
            }, 1000, 'linear');
        });
    });

    $(".more-info").mouseenter(function() {
        clearTimeout($(this).data('timeoutId'));
        $(this).find(".the-tooltip").fadeIn('150', 'linear');
    }).mouseleave(function() {
        var someElement = $(this);
        var timeoutId = setTimeout(function() {
            someElement.find(".the-tooltip").fadeOut('150', 'linear');
        }, 1200);
        //set the timeoutId, allowing us to clear this trigger if the mouse comes back over
        someElement.data('timeoutId', timeoutId);
    }); 
```

CSS 代码：

```
.more-info{
    position: absolute;
    top: 75px;
    left: 85px;
    z-index: 9999;
    display: block;
    width: 19px;
    height: 18px;
    background: transparent url(images/midnightlisteners-bgs-matrix.png) no-repeat -60px -44px;
    cursor: pointer;
    opacity: 0;
    display: block;
}

.more-info:hover{

}​ 
```

编辑：如何使代码更简单而不是自我重复。如何实现 var 元素

```
$(".play").mouseenter(function(){
        $(this).next('.more-info').stop(true, false).animate({
            opacity: '1'
            }, 800, 'linear');
        $(".more-info").mouseenter(function(){
            $(this).stop(true).animate({
                opacity: '1'
                }, 800, 'linear');
        });
        $(".the-tooltip-wrap").mouseenter(function(){
            $(this).prev(".more-info").stop(true).animate({
                opacity: '1'
                }, 800, 'linear');
        });
    });
    $(".play").mouseleave(function(){
        $(this).next('.more-info').stop(true, false).animate({
            opacity: '0'
            }, 1000, 'linear');
        $(".more-info").mouseleave(function(){
            $(this).stop(true).animate({
                opacity: '0'
                }, 1000, 'linear');
        });
        $(".the-tooltip-wrap").mouseleave(function(){
            $(this).prev(".more-info").stop(true).animate({
                opacity: '0'
                }, 1000, 'linear');
        }); 
    }); 
```

​</p>

# .net - 如何在 C# 任务并行库中获取 TaskExecutionTime？

> ID：12397545
> 
> 赞同：0
> 
> 时间：2012-09-12T23:44:12.307
> 
> 标签：.net, task-parallel-library

我正在使用任务库并使用带有超时参数的等待。如何设置 taskExecutionTime？

```
int taskExecutionTime=5000;
try
{
    bool hasTimeout=!myTask.Wait(5000);
    if (!hasTimeout)
       taskExecutionTime=???     
}
catch (AggregateException)
{
    taskExecutionTime=???
} 
```

更新：

我不需要 myTask 的实时性能。例如，我将 .NET 的 HtpWebRequest 与不同的代理一起使用。我想知道和比较代理性能。通用解决方案会更好，所以我们每个人都可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:01:18.277

由于您正在执行 Wait 调用，我认为您只需按照同步代码的正常方式进行计时 - Stopwatch.StartNew() 或 var startTime = DateTime.Now 或启动任务时的其他任何权利，然后查看Wait 返回 false 或 throws 的经过时间。

我是否误解了您要执行的操作？

# jquery-tools - jQuery Tools 可滚动的流体宽度

> ID：12397546
> 
> 赞同：1
> 
> 时间：2012-09-12T23:44:13.383
> 
> 标签：jquery-tools, scrollable

我想知道是否有人知道让 jQuery 工具可滚动插件以流畅的布局/100% 宽度滚动内容的方法。

它是 Intranet 站点上的新闻滚动条。我让它在固定宽度下工作得很好，但正在转向流体宽度布局并且无法让它工作，因为它的设置只能在固定宽度下工作。

如果有人知道任何替代方案，它将通过导航以流畅的宽度滑动文本，我很想听听它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T11:27:57.323

使可滚动响应的唯一方法是添加 javascript 来计算显示的屏幕/浏览器/视口宽度，然后在您的 HTML 中设置它。

有关示例代码，请参见[http://cooshtee.com/blog/2013/04/making-jquery-tools-scrollable-responsive/](http://cooshtee.com/blog/2013/04/making-jquery-tools-scrollable-responsive/)。

# reflection - 我可以在 Go 中使用反射创建一个新函数吗？

> ID：12397557
> 
> 赞同：13
> 
> 时间：2012-09-12T23:45:41.417
> 
> 标签：reflection, go

我有一个想法在 Go 中使用接口来定义 RPC 样式接口。所以对于给定的服务，我可能会创建一个这样的接口：

```
type MyService interface{
  Login(username, password string) (sessionId int, err error)
  HelloWorld(sessionId int) (hi string, err error)
} 
```

我想做的是使用反射来实现该接口，将方法调用转换为 RPC 调用，编组输入参数，并将结果解组回方法的输出。我知道如果我可以获得输入参数的 []interface{}，我可以使用反射来进行服务调用。但是，我看不到任何使用反射的方法来动态创建一个值，该值将通过调用我的反射使用函数来实现接口。有谁知道这样做的方法，即使使用不安全？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T11:53:10.977

您不能通过反射创建带有附加方法的类型，以实例化该类型的对象。

您可以通过该`unsafe`软件包进行大量黑客攻击来实现这一目标。但即便如此，这将是一个巨大的痛苦。

如果您详细说明了您要解决的问题，社区可以提出解决问题的替代方法。

编辑（2015 年 7 月 23 日）：从 Go 1.5 开始，有`reflect.FuncOf`and `reflect.MakeFunc`，这正是你想要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T16:19:56.620

看来 reflect 包将获得在 Go 1.1 中创建新的任意类型函数的能力：[reflect.MakeFunc](https://golang.org/pkg/reflect/#MakeFunc)。

（以下添加以响应@nemo）

可以创建结构类型，而不是接口：

```
type MyService struct{
  Login func(username, password string) (sessionId int, err error)
  HelloWorld func(sessionId int) (hi string, err error)
}

autorpc.ImplementService(&MyService, MyServiceURL)
session, err := MyService.Login(username, password)
stringout, err := MyService.HelloWorld(session) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:15:19.830

我认为，如果可以完全实现`reflect.Type`您无法实现的接口（未导出的方法），则可以实现您想要的。然后，也许可以通过使用来实例化您的自定义类型`unsafe_New`。

总而言之，这样做不是一个好主意。

你想要的下一个最好的事情可能是使用像[gob](http://golang.org/pkg/encoding/gob/)这样的东西。您可以使用 gob 作为中间语言，使用反射从接口中读取方法，将它们编写为 gob 并将创建的 gob 代码解码为真正的 Go 对象。但我不确定这是否值得。

大多数情况下，通过在客户端手动实现接口并转发方法调用会更安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T18:55:23.790

由于语言的静态特性，目前无法在 Go 中动态实现接口。

我了解您想要实现的目标，并且还有其他场景也可以受益于更高级的反射功能（例如，用于单元测试的良好模拟框架）

* * *

也就是说，有一种方法可以解决这个问题。您可以编写自己的工具来生成包含给定 RPC 接口实现的 Go 源代码文件。

您必须使用[AST](http://golang.org/pkg/go/ast/)库以及其他库来解析和处理源接口。

沿着这条路走（[gostub](https://github.com/momchil-atanasov/gostub)工具；可以用作参考），我可以说它一点也不有趣和容易。尽管如此，最终结果还是可以忍受的，因为 Go 提供了该`go:generate`功能，这至少使重新运行该工具，一旦界面发生变化，会更容易一些。

# javascript - 揭示模块模式在 Knockout 中设置模型的新实例

> ID：12397559
> 
> 赞同：1
> 
> 时间：2012-09-12T23:45:46.803
> 
> 标签：javascript, knockout.js, revealing-module-pattern

我有 MVVM 和类似的模型；

```
var my = my || {};

$(function () {

 my.ListModel = (function () {
    var 
        data = ko.observableArray([]),
        totalCount = ko.observable(),
        page = ko.observable(),
        limit = ko.observable(),
        goTo = function (d) {
            $.getJSON("/prices/GetByFilterViaJSON", { limit: limit, page: d }, function (list) {
                data(list.Data);
                page(list.Page);
            });
        },
        loadData = function (url) {
            $.ajax({
                type: 'GET',
                url: url,
                dataType: 'json',
                success: function (list) {
                    data(list.Data);
                    page(list.Page);
                    totalCount(list.TotalCount);
                },
                data: { limit: limit },
                async: false
            });
        };
    return {
        Data: data,
        TotalCount: totalCount,
        Page: page,
        Limit: limit,
        GoTo: goTo,
        LoadData: loadData
    };
})();

my.PriceListViewModel = (function () {

    var
        grid1 = ko.observable(),
        grid2 = ko.observable(),
        loadGrid = function () {
            grid1(my.ListModdel);
            grid1().Limit(5);
            grid1().LoadData('/prices/GetByFilterViaJSON');

            grid2(my.ListModel);
            grid2().Limit(3);
            grid2().LoadData('/prices/GetByUserViaJSON');
        };
    return {
        Grid1: grid1,
        Grid2: grid2,
        LoadGrid: loadGrid
    };
})();

my.PriceListViewModel.LoadGrid();
ko.applyBindings(my.PriceListViewModel);
}); 
```

我对他们有意见。如您所见，当触发 LoadData（在 PriceListViewModel 中）时，Grid1 与 Grid2 具有相同的值。是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:19:58.930

您应该使用 new 来实例化 ListModel：

```
var my = my || {};

$(function () {

 my.ListModel = function () {
    var 
        data = ko.observableArray([]),
        totalCount = ko.observable(),
        page = ko.observable(),
        limit = ko.observable(),
        goTo = function (d) {
            $.getJSON("/prices/GetByFilterViaJSON", { limit: limit, page: d }, function (list) {
                data(list.Data);
                page(list.Page);
            });
        },
        loadData = function (url) {
            $.ajax({
                type: 'GET',
                url: url,
                dataType: 'json',
                success: function (list) {
                    data(list.Data);
                    page(list.Page);
                    totalCount(list.TotalCount);
                },
                data: { limit: limit },
                async: false
            });

    return {
        Data: data,
        TotalCount: totalCount,
        Page: page,
        Limit: limit,
        LoadData: loadData
    };
};

my.PriceListViewModel = (function () {

    var
        grid1 = ko.observable(),
        grid2 = ko.observable(),
        loadGrid = function () {
            grid1(new my.ListModel());
            grid1().Limit(5);
            grid1().LoadData('/prices/GetByFilterViaJSON');

            grid2(new my.ListModel());
            grid2().Limit(3);
            grid2().LoadData('/prices/GetByUserViaJSON');
        };
    return {
        Grid1: grid1,
        Grid2: grid2,
        LoadGrid: loadGrid
    };
})();

my.PriceListViewModel.LoadGrid();
ko.applyBindings(my.PriceListViewModel);
}); 
```

# php - array_merge 更改键

> ID：12397563
> 
> 赞同：6
> 
> 时间：2012-09-12T23:45:55.270
> 
> 标签：php, arrays, array-merge

我得到以下数组：

```
$arr = array(6 => 'Somedata', 7 => 'Somedata1', 8 => 'Somedata2'); 
```

问题是，当我使用 时`array_merge( (array) "Select the data", $arr);`，它确实将数组键更改为：

```
Array
(
    [0] => Not specified
    [1] => Somedata
    [2] => Somedata1
    [3] => Somedata2
) 
```

是否可以跳过`array_merge`key preversion 使输出看起来像这样？

```
Array
(
    [0] => Not specified
    [6] => Somedata
    [7] => Somedata1
    [8] => Somedata2
) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T23:48:27.237

使用[`+`运算符](http://www.php.net/manual/en/language.operators.array.php)创建 2 个数组的并集：

```
$arr = array(6 => 'Somedata', 7 => 'Somedata1', 8 => 'Somedata2');

$result = (array)'Select the data' + $arr;

var_dump($result); 
```

结果：

```
array(4) {
  [0]=>
  string(15) "Select the data"
  [6]=>
  string(8) "Somedata"
  [7]=>
  string(9) "Somedata1"
  [8]=>
  string(9) "Somedata2"
} 
```

# c++ - 检查由 3 个点定义的角度是内角还是外角

> ID：12397564
> 
> 赞同：3
> 
> 时间：2012-09-12T23:45:55.580
> 
> 标签：c++, math, geometry, convex, concave

给定一组折线，我发现检测角度类型（无论是**内部**还是**外部**轴的原点）存在问题。我发现了几十个非常相似的问题，但没有一个能解决我的问题，所以我把它放在这里，希望能有结果。

![角度分类](../Images/d177b69c280fcdb7bc28a29d49fdbf61.png)

我所拥有的只是一组折线。我需要找到角度（具有接近矩形的给定公差），并将它们分类为*内部*或*外部*。

对于每条折线，我将顶点 3 乘以 3，并且我能够识别中心是否是角度，并将其值测量为 0 到 180 度之间的数字。

现在我需要给这个角度一个方向（比如说一个符号，如果锐角远离原点，则为负，如果指向中心，则为正），我想我会用以下两种方法之一来实现它，但他们都没有工作。

1）只是“二维叉积的符号”（我知道这不是数学上正确的术语）：

```
//given 3 contiguous vertices a,b,c
//check if b is a inner (+1) or outer (-1) vertex (0 in other cases)

double cross = ((b.x - a.x)*(c.y - a.y)) - ((b.y - a.y)*(c.x - a.x));

if(cross > 0){
  return 1;
} else if (cross < 0) {
  return -1;
}
return 0; 
```

但它似乎只在左下象限有效，在右上角的工作方式正好相反，而它在其他象限中起作用，我不明白为什么。

2）比较顶点的范数

```
if b.norm() < a.norm() && b.norm() < c.norm 
then return +1
else return -1 
```

这仅适用于基本情况，并且总体上没有穿过轴的折线（包含原点）。我可以检查所有情况，但我宁愿避免这种情况。

显然，有更安全的方法，例如检查顶点是否在原点的同一侧，而不是通过位于 2 个向量上的 2 个邻居之间的线。但我需要尽可能优化它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:59:57.550

**简短版本：**

将来自中心点的两个角向量描述为`a`和`b`。并将从中心点到原点的向量描述为`center`。

如果出现以下情况，该角度将被描述为“内”：

```
dot( a + b, center ) > 0.0 && dot( cross( a, center ), cross( b, center ) ) < 0.0 
```

**说明：**

这可以通过使用**叉积**和**点积**来解决。（幸运的是，根本没有角度。这可以完全通过加法、乘法和比较来解决。）

在这里，分两步解决。

**1\. 角度是否指向原点*而*不是指向原点？**

如果您通过对两个角度向量求和来定义“角度指向的方向”，则角度指向的 方向*多于*远离*方向。*

*请注意，如果 和 的各个长度* `a` *不同* `b` *，对于非常宽的角度，您可能会得到一些不正确的边缘情况。规范化* `a` *并将* `b` *解决该问题。*

```
`dot( a + b, center ) > 0.0` 
```

**2\. 向量`a`和`b`指向原点的对边吗？**

如果它们的叉积指向相反的方向，则向量`a`和`b`指向原点的相反两侧。

```
`dot( cross( a, center ), cross( b, center ) ) < 0.0` 
```

当且仅当这些都为真时，您的角度被定义为“内”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T01:06:43.483

要检测角度 abc 是否在内部，您必须检查向量 b0（从 b 到原点）是否是向量 ba 和 bc 的凸组合。

如果向量 px + qy 是向量 p1x + q1y 和 p2x + q2y 的凸组合，则存在正常数 r 和 s 使得 r * (p1, q1) + s *(p2, q2) = (p, q) . 如果我们以代数方式求解 r 和 s，我们得到 r = (pq2 - p2q)/(p1q2 - q1p2) 和 s = (p1q - pq1)/(p1q2 - q1p2)。如果 r 和 s 都是正数，则 abc 是内部的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:30:19.520

就个人而言，我只会使用点积。具体来说（如果`a`表示*从*您的顶点*到*原点的向量，并且`b`和`c`是指向顶点外的边向量），那么如果两者`a dot b`和`a dot c`都是正数，则角度是外部的。否则是内在的。

但我对你对“内在”和“外在”的真正定义有点困惑......

# jquery - jQuery 在设置新站点时不起作用

> ID：12397573
> 
> 赞同：0
> 
> 时间：2012-09-12T23:47:19.153
> 
> 标签：jquery

我正在为足球队的球迷建立一个小爱好网站，我正在尝试添加一些 jQuery，但我似乎无法让 jQuery 被触发。

我在右侧列的表单内创建了一个提交按钮，单击该按钮时应该调用 jQuery 函数，但它没有调用 jQuery 函数。

我认为链接到该站点比在此处粘贴一堆复杂的代码更容易。

有人知道为什么不调用 jQuery 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:51:03.727

用[`$(document).ready()`](http://api.jquery.com/ready/). 否则，您将尝试绑定浏览器**尚未加载的元素：**

```
$(document).ready(function () {
  $("#search_fans").click(function () {
    alert('2');
  }
}); 
```

这也相当于（并且不那么冗长）：

```
$(function () {
  $("#search_fans").click(function () {
    alert('2');
  }
}); 
```

# javascript - 如何使用 JQuery 在 HTML 中使用包含引号的字符串参数创建 onclick javascript 链接？

> ID：12397575
> 
> 赞同：0
> 
> 时间：2012-09-12T23:47:28.933
> 
> 标签：javascript, jquery, html

我正在尝试在 HTML 中创建如下链接：

`<a href="javascript:void(0) onclick="print(string)">`

我正在使用 JQuery 执行此操作，如下所示：

`html = '<a href="javascript:void(0)" onclick="print(\'' + string + '\')">'`

`string`但是，当它本身包含单引号时，我遇到了问题。有没有什么方法可以让我做这种事情，而不管其中包含的字符是`string`什么？我要弄清楚的主要是单引号和双引号。

最好的，感谢您的任何建议，
萨米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:55:31.230

我不确定我是否理解您的问题，但您是否已经尝试过该`escape`功能？

像这样：

```
html = '<a href="javascript:void(0)" onclick="print(\'' + escape(string) + '\')">' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:57:06.380

您可以很容易地做到这一点，只需将字符串编码为 URIComponent，然后再将其放入，然后在需要时对其进行解码。

IE。

```
var NoQuotesString = encodeURIComponent(string);
//to encode the string without quotes

var BringBackMyQuotes = decodeURIComponent(NoQuotesString);
//decodes the string back to the original 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:02:33.233

既然您使用 jQuery，为什么不使用它提供的事件监听器呢？

给你的链接一个 id 值：

```
<a href="#" id="someID">anchor</a> 
```

使用 jQuery 定义所需的行为：

```
$('#someID').click(function(e) {
    e.preventDefault();// prevent the default anchor behavior
    $('#someID').text('New anchor text');// this is an example of the functionality
}); 
```

一个例子：http: [//jsfiddle.net/BfHrW/](http://jsfiddle.net/BfHrW/)

# android - Android 接收分块的 JSON 响应

> ID：12397579
> 
> 赞同：0
> 
> 时间：2012-09-12T23:47:51.560
> 
> 标签：android, json, http, progress, chunked

我遇到需要接收恒定分块 JSON 响应的情况，每次收到响应时，我都需要解析 JSON 以更新操作当前状态的 UI。

我找不到单独接收每个响应并将信息发布回 UI 的直接方法，直到响应完成接收。

如果有人能对此有所了解，我将不胜感激！

我有 101 种不同的方式进行 http 调用。我只需要正确的方式和正确的方式来读取响应。

--编辑 -- 只是添加到这一点。我遇到的问题不是读取 JSON 数据，而是分别获取每个数据块并在每个块之间发回 UI – NathofGod 27 秒前编辑

```
 DefaultHttpClient http_client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        HttpResponse response = http_client.execute(httpGet);

        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        HttpEntity entity = response.getEntity();

        InputStream in = entity.getContent();
        StringBuffer out = new StringBuffer();
        byte[] b = new byte[4096];
        int n =  in.read(b);
        out.append(new String(b, 0, n));        
        String resultdata = out.toString(); 
```

一些示例 JSON

```
 23a
{"header":{"status":{"code":0,"desc":"Ok"},"sessionId":"3olpgjktvj0a52dbim6lk8hvet"},"summary":{"status":{"code":0,"desc":"Ok"},"inProgess":18,"errored":0},"storeItems":[{"storeItemId":"4ff41f0bdc6d34b3daaf4d8a","name":"Mcvities Digestive 250G","quantity":1,"itemPrice":0.89,"totalPrice":0.89,"recipeIngredients":[{"name":"250 g/8¾oz digestive biscuits, crushed","amount":1.0,"recipe":{"url":"http://www.bbc.co.uk/food/recipes/baileysandchocolatec_72293","title":"Baileys and chocolate cheesecake"}}],"status":{"code":3101,"desc":"Store item send to supermarket Ok"}}]}
3c1
{"header":{"status":{"code":0,"desc":"Ok"},"sessionId":"3olpgjktvj0a52dbim6lk8hvet"},"summary":{"status":{"code":0,"desc":"Ok"},"inProgess":17,"errored":0},"storeItems":[{"storeItemId":"4ff41f0bdc6d34b3daaf4d8a","name":"Mcvities Digestive 250G","quantity":1,"itemPrice":0.89,"totalPrice":0.89,"recipeIngredients":[{"name":"250 g/8¾oz digestive biscuits, crushed","amount":1.0,"recipe":{"url":"http://www.bbc.co.uk/food/recipes/baileysandchocolatec_72293","title":"Baileys and chocolate cheesecake"}}],"status":{"code":3101,"desc":"Store item send to supermarket Ok"}},{"storeItemId":"4ff41a73dc6d34b3daaf46da","name":"Rachels Organic Unsalted Butter 250G","quantity":1,"itemPrice":1.65,"totalPrice":1.65,"recipeIngredients":[{"name":"100 g/3½oz butter","amount":0.4,"recipe":{"url":"http://www.bbc.co.uk/food/recipes/baileysandchocolatec_72293","title":"Baileys and chocolate cheesecake"}}],"status":{"code":3101,"desc":"Store item send to supermarket Ok"}}]}
550
{"header":{"status":{"code":0,"desc":"Ok"},"sessionId":"3olpgjktvj0a52dbim6lk8hvet"},"summary":{"status":{"code":0,"desc":"Ok"},"inProgess":16,"errored":0},"storeItems":[{"storeItemId":"4ff41f0bdc6d34b3daaf4d8a","name":"Mcvities Digestive 250G","quantity":1,"itemPrice":0.89,"totalPrice":0.89,"recipeIngredients":[{"name":"250 g/8¾oz digestive biscuits, crushed","amount":1.0,"recipe":{"url":"http://www.bbc.co.uk/food/recipes/baileysandchocolatec_72293","title":"Baileys and chocolate cheesecake"}}],"status":{"code":3101,"desc":"Store item send to supermarket Ok"}},{"storeItemId":"4ff41a73dc6d34b3daaf46da","name":"Rachels Organic Unsalted Butter 250G","quantity":1,"itemPrice":1.65,"totalPrice":1.65,"recipeIngredients":[{"name":"100 g/3½oz butter","amount":0.4,"recipe":{"url":"http://www.bbc.co.uk/food/recipes/baileysandchocolatec_72293","title":"Baileys and chocolate cheesecake"}}],"status":{"code":3101,"desc":"Store item send to supermarket Ok"}},{"storeItemId":"4ff417c0dc6d34b3daaf28d3","name":"Menier Milk Chocolate Patissier 100G","quantity":1,"itemPrice":1.0,"totalPrice":1.0,"recipeIngredients":[{"name":"100 g/3½oz grated chocolate","amount":1.0,"recipe":{"url":"http://www.bbc.co.uk/food/recipes/baileysandchocolatec_72293","title":"Baileys and chocolate cheesecake"}}],"status":{"code":3101,"desc":"Store item send to supermarket Ok"}}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:18:26.347

```
int n = in.read(b);
while(n>0){
    out.append(new String(b, 0, n);
    n = in.read(b);
}

String resultData = out.toString(); 
```

# c++ - 适用于 Windows 应用商店的 Facebook SDK？

> ID：12397580
> 
> 赞同：0
> 
> 时间：2012-09-12T23:47:54.270
> 
> 标签：c++, facebook, facebook-graph-api, windows-store-apps

我正在使用 C++ 编写 Metro 应用程序。我在 Facebook SDK 中看不到任何我可以轻松使用的东西。在这种情况下我该怎么办？我确实编写了一个正常运行的 HTTP 通信类。我需要手动执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:34:04.993

我在 SDK 级别上没有找到任何东西，但您可以在此处使用该类：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.authentication.web.webauthenticationbroker)

使用 Facebook 或 G+ 等进行 oauth... MSDN 上有一个很好的例子。

# maven - Maven 发布期间丢失的属性：执行

> ID：12397581
> 
> 赞同：7
> 
> 时间：2012-09-12T23:47:56.397
> 
> 标签：maven, teamcity, maven-release-plugin, system-properties

我正在从 TeamCity 运行 maven 构建，并使用 build.vcs.number 将 Subversion 修订写入我的清单。在任何使用 Subversion 作为 VCS 的 Maven 构建中，TeamCity 添加

```
-Dbuild.vcs.number=1234 
```

到 maven 命令行，其中 1234 是正在构建的分支中的最新版本。

然后在我的 pom.xml 中，我有

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
            </manifest>
            <manifestEntries>
                <build>${build.vcs.number}</build>
            </manifestEntries>
        </archive>
    </configuration>
</plugin> 
```

这一切正常，直到我运行 Maven release:perform（也来自 TeamCity），此时 ${build.vcs.number} 变为空，即使我可以在 TeamCity 构建日志中看到该属性是在命令中传入的线。

maven-release-plugin 文档暗示 Maven 在执行目标期间的某个时间点运行分叉进程 - 这就是我遇到问题的原因吗？

有没有办法可以确保这个特定的属性被传递到那个分叉的进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T00:16:36.047

```
-Darguments=-Dbuild.vcs.number=1234 
```

有一个用于发布的分叉进程，以确保它具有干净的可重现命令行，因此您需要指定要通过的内容。

理想情况下，您在 Pom 上配置发布插件以传递属性，但如果失败，则使用覆盖（除非有人在您的 Pom 中禁用了覆盖......在您重新启用它之前，您会被卡住。

注意：如果有多个属性或属性中有空格，请密切注意引用

# php - 使用 PHP 或 MySQL 将 AM/PM 时间转换为 24 小时格式？

> ID：12397591
> 
> 赞同：5
> 
> 时间：2012-09-12T23:49:59.633
> 
> 标签：php, mysql, date

我有一串时间，例如：6:00 AM、7:30 PM 等。它也可以轻松更改为 6:00:00 AM、7:30:00 PM 等。

我正在寻找一种方法来快速将此时间转换为 24 小时格式，例如 7:30 PM = 19:30:00。

是否有任何具有此功能的 PHP 或 MySQL 函数，还是我必须自己设计？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T23:55:46.677

```
STR_TO_DATE( `column_here`, '%l:%i %p' ) 
```

[在这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)阅读更多。

# 编辑

编辑`'%l:%M %p'`为`'%l:%i %p'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:01:50.480

尝试[strtotime](http://php.net/manual/de/function.strtotime.php)，它检索任何英文日期/时间格式的 Unix 时间戳。如果它不能开箱即用，则可以在您传递的时间字符串前面添加任意日期。然后您可以使用[strftime](http://www.php.net/manual/de/function.strftime.php)将时间戳转换为 24 小时格式。

我也听说过一个`DateTime`对象，它也可以处理这两种转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T05:40:21.003

**那样做**

```
SELECT STR_TO_DATE('08:35 PM', '%l:%i %p'); 
```

**回答：'20:35:00'**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T07:00:28.173

试试下面的查询，

```
SELECT STR_TO_DATE( '2019-06-19 10:00 pm', '%Y-%m-%d %h:%i %p' ); 
```

我们必须使用日期来获得 24 小时内的正确时间。您可以在时间之前添加任何静态日期，上述解决方案对我有用:)

# regex - 用于快速解析、正则表达式生成的 Perl 有限状态机

> ID：12397592
> 
> 赞同：1
> 
> 时间：2012-09-12T23:50:01.683
> 
> 标签：regex, perl, fsm

我需要匹配非常短的文本段（1 到 7 个字母），并且我知道如何在有限状态机中指定可接受的字符串。我认为为这个应用程序构建一个正则表达式会变得过于混乱且难以维护。我需要一个易于使用的模块，我可以在其中编写 FSM，如果该模块可以生成一个正则表达式供我使用，那将是一个很大的好处。有谁知道可以简单地做到这一点的模块？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T00:51:31.083

即使没有模块，编写 FSM 也很容易。

```
my $state = 0;
while (my $token = shift @input) {
  $state = $state_table{$state}->($token);
} 
```

其中状态表是一个散列，状态为键，匿名子为值：

```
0 => sub {
  my $nextstate;
  given (shift) {
    when ('a') {print "its an a"; $nextstate = 2}
    default    {$nextstate = 1}
  }
 return $nextstate;
},
1 => sub {
  my $token = shift;
  my $nextstate = ({
    a => sub {print "Its an a"; 2}
  }->{$token} // sub {1})->();
  return $nextstate;
},
2 => ... 
```

（请注意，在这种情况下，状态 0 和 1 是等效的）

等等。要在 Perl 中编写开关，您可以在源过滤器、`given`-`when`构造和散列之间进行选择，这应该会使您的任务变得简单。特别是散列（散列的散列......子例程的散列）可以使表驱动编程变得非常容易。

但是，如果可以使用正则表达式轻松表达问题，则可能值得这样做。请注意，Perl 正则表达式不仅限于正则表达式，因此您必须小心使用哪些功能。正则表达式相对于状态机的主要优势是执行速度，因为正则表达式引擎是高度优化的。语法也更简洁，这使得它们更容易编写。不要忘记您可以在`/x`修饰符中包含非语义空格：

```
m{
   .*?    # match anything
   (?:
       a  # followed by an a
     | b  # or a b
   )
}x 
```

绝对等同于（但比可读性更好）

```
/.*?(?:a|b)/ 
```

所以手写正则表达式不仅可能要短得多（而且每个优秀的程序员都很懒惰），而且还很有趣。

你可以这样定义你的状态：

```
my $state_machine = qr{
   ^(?&STATESTART)$

   (?(DEFINE)
     (?<STATESTART> (?&STATE0)    )
     (?<STATE0>     a (?&STATE2)
              |     . (?&STATE1) )
     (?<STATE1>     a (?&STATE2)
              |     . (?&STATE1) )
     (?<STATE2>     ...  )
   )
}x;
print "->$x<- is part of the language" if $x =~ $state_machine; 
```

这将对应于使用哈希的状态机的上述草图。请注意，在使用命名正则表达式模式对 FSM 建模时，您应该只使用尾递归。

# coldfusion - 当前的 CF9.02 会话 Cookie 管理最佳实践是什么？

> ID：12397599
> 
> 赞同：6
> 
> 时间：2012-09-12T23:50:49.370
> 
> 标签：coldfusion, session-cookies, coldfusion-9

ColdFusion cookie 会话 cookie 管理的常见“最佳实践”是实现如下内容：

```
<cfset this.setClientCookies = false />
<cfif NOT IsDefined( "cookie.cfid" ) OR NOT IsDefined( "cookie.cftoken" )>
    <cfcookie name="cfid" value="#session.cfid#" domain=".#cgi.HTTP_HOST#" path="/test/sessiontest">
    <cfcookie name="cftoken" value="#session.cftoken#" domain=".#cgi.HTTP_HOST#" path="/test/sessiontest">
</cfif> 
```

或者

```
<cfif IsDefined("Cookie.CFID") AND IsDefined("Cookie.CFTOKEN")>
    <cfcookie name="CFID" value="#Cookie.CFID#">
    <cfcookie name="CFTOKEN" value="#Cookie.CFTOKEN#">
</cfif> 
```

取决于你和谁说话。

Adobe 随后发布了[http://www.adobe.com/support/security/bulletins/apsb11-04.html](http://www.adobe.com/support/security/bulletins/apsb11-04.html)以及后来针对此原始修复的修复，此处讨论：http: [//www.shilpikhariwal.com/2011 /03/update-on-security-hot-fix-feb-2011.html](http://www.shilpikhariwal.com/2011/03/update-on-security-hot-fix-feb-2011.html)

原始修复会导致此处描述的许多问题：http: [//cfsimplicity.com/4/coldfusion-security-hotfix-changes-session-behaviour](http://cfsimplicity.com/4/coldfusion-security-hotfix-changes-session-behaviour) 此修复（以及网络上的许多其他类似修复）通过修改上面的cfcookie代码。

一年后，我想知道在运行 CF9.02 时，人们目前正在为 CFID/CFToken 管理做什么（即，应用了会话固定修复。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:29:06.593

嗯，不使用 CFID/CFToken。多年来我没有使用这些客户端变量，而是使用 ColdFusion 会话管理。相信来自客户的那些（在我看来）太冒险了。

Adobe 文档实际上有一篇关于管理客户端状态的很好的文章：[管理客户端状态](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0c35c-7fef.html)

您仍然需要使用 CFID/CFToken 的理由是什么？

该 Adob​​e 文章的摘录：

> 拥有用户 CFToken 和 CFID cookie 的黑客可以通过在用户会话期间使用被盗的 CFToken 和 CFID cookie 访问网页来访问用户数据。虽然这种情况不太可能发生，但理论上是可能的。
> 
> 您可以通过选择 ColdFusion 管理员内存变量页面上的使用 J2EE 会话变量选项来消除此漏洞。J2EE 会话管理机制为每个会话创建一个新的会话标识符，并且不使用 CFToken 或 CFID cookie 值。

# c++ - C++ 未定义引用`_imp__glewInit@0`

> ID：12397603
> 
> 赞同：2
> 
> 时间：2012-09-12T23:51:30.530
> 
> 标签：c++, makefile, glew

注意：我在 C 语言中看到了关于这个人有这个问题的帖子，因为 glew.c 脚本没有为他加载，我不认为这是我的问题。从尽可能接近 GLEW 文档网站上的确切步骤（并且我没有看到需要添加名为 glew.c 的文件）我已经使用 MinGW 设置了 glew 并将 dll 和库提取到适当的文件夹但在编译时我收到此消息：

```
undefined reference to `_imp__glewInit@0` 
```

这是我的主文件 main.cpp：

```
#include <stdlib.h>
#include <iostream>
#include <windows.h>
#include <GL/glew.h>
#include <GL/glut.h>

using namespace std;

 int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutCreateWindow("Glew Test");
    GLenum err = glewInit();

    if (GLEW_OK != err)
    {
        cout << "Something effed up";
    }

    cout << "Awwwwwwwwhhhhh Yeeeeeeeaaaaah!!!";

return 0;
} 
```

这是我的 MakeFile：

```
MY_LIBS = -lglut32 -lglew32 -lopengl32 
glewex:
    g++ -g main.cpp -o glewex $(MY_LIBS) 
```

关于我为什么会收到此错误的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T15:08:41.503

为什么你坚持要在外部链接到这个库？它造成的麻烦比它的价值要多。

添加`glew.c`到您的项目中。只需将其与其余的源文件一起编译即可。只要你`#define GLEW_STATIC`会正常工作。问题解决了。

即使您成功地将其链接到库，您也会被绑定到一个特定的架构/构建/版本。如果您只包括在内`glew.c`，您几乎可以在任何地方自由构建项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T19:42:17.670

我有一个类似的问题。glewGetErrorString 和 glewInit 被报告为我未定义。无法追踪问题。

然后我记得我已经下载了 64 位版本的 glew 而 free-glut 并且我下载的其他所有内容都是 32 位的

所以重新下载了32位的glew。一切都很完美！希望对将来的人有所帮助。

# java - 如何让 JEditorpane 保留空格

> ID：12397611
> 
> 赞同：0
> 
> 时间：2012-09-12T23:52:15.780
> 
> 标签：java, swing, jeditorpane

在用于格式化的 JEditorPane 中，我使用的是 Courier New 字体类型。但是，由于 HTML 对空格不敏感，因此正在删除空格。因此，如果我尝试打印这样的内容：“1 3 4”，它会删除多余的空格并在实践中打印“1 3 4”。有什么想法吗？

```
 public  JEditorPane  editorPane;
  editorPane.setEditable(false);
  editorPane.setContentType("text/html");
  // add a HTMLEditorKit to the editor pane
  HTMLEditorKit kit = new HTMLEditorKit();
  editorPane.setEditorKit(kit);
   //...
   //...
  // add some styles to the html
  StyleSheet styleSheet = kit.getStyleSheet();
  styleSheet.addRule("body {color:#0f0; font-family:times; margin: 1px; }");
  styleSheet.addRule("h1 {color:blue;}");
  styleSheet.addRule("h2 {color:#ff0000;}");
  styleSheet.addRule("."+StyleCourierNew+" {font-family:\"Courier New\"; font: 11px monaco; color: black; }"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:57:06.257

我得到了答案：

```
sString=sString.replaceAll(" ", "&nbsp;"); 
```

# sql - 如何从 SQL 中的文档列表中选择文档的最大版本？

> ID：12397614
> 
> 赞同：0
> 
> 时间：2012-09-12T23:52:36.577
> 
> 标签：sql, oracle11g

> **可能重复：**
> [如何仅选择 SQL 中具有不同版本的文档列表的最大版本？](https://stackoverflow.com/questions/12397330/how-do-you-select-only-the-maximum-version-of-a-list-of-documents-that-have-diff)

我有一个存储文件版本的表以及与这些文件关联的页面

```
CREATE TABLE tbl (id int, title varchar(32), version int, pageid int);
insert into tbl values (1, 'file1', 1, 25);
insert into tbl values (2, 'file2', 1, 25);
insert into tbl values (3, 'file1', 2, 25);
insert into tbl values (4, 'file2', 2, 25);
insert into tbl values (5, 'file3', 1, 25);
insert into tbl values (6, 'file1', 1, 24);
insert into tbl values (7, 'file2', 1, 24);
insert into tbl values (8, 'file1', 2, 24);
insert into tbl values (9, 'file2', 2, 24);
insert into tbl values (10, 'file3', 1, 24); 
```

我想生成一个查询，它只返回附加到 pageid=25 的文档的最大版本，而不是 pageid=24。运行查询应该只产生第 3、4、5 行而不是第 8、9、10 行（因为它们与 pageid=24 相关联）。

我已经为这个问题整理了一个[SQL Fiddle](http://sqlfiddle.com/#!2/33a3b/3)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:57:11.670

假设问题上的标签是正确的（您发布的小提琴是针对 MySQL 的），您可以使用分析函数

```
SELECT id, title, version, pageid
  FROM (SELECT t.*, 
               MAX(version) OVER (partition by title) max_version
          FROM tbl t
         where pageid=25)
 WHERE version = max_version; 
```

您可以看到[SQL Fiddle 为此](http://sqlfiddle.com/#!4/33a3b/1/0)返回有问题的三行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T00:09:26.030

这是一个简单的查询，可以解决问题：

```
select *
from tbl t1
inner join (select title, max(version) as version from tbl where pageid=25 group by 1) t2 on(t1.title=t2.title and t1.version=t2.version)
where t1.pageid=25 
```

这是它的[SQL Fiddle 输出](http://sqlfiddle.com/#!2/33a3b/38)——它是否符合您的要求？

# dns - 安装 Front tmg 2010 后外部域的 DNS 超时

> ID：12397617
> 
> 赞同：0
> 
> 时间：2012-09-12T23:53:42.170
> 
> 标签：dns, windows-server-2008, isaserver

我在所有计算机上都遇到了 DNS 查找超时的问题。我启用了 TMG DNS 系统策略并添加了另一个防火墙策略以允许所有 DNS 从任何地方到任何地方。监视器显示没有拒绝的 DNS 连接。

DC/DNS/DHCP/Wins 服务器是 Windows 2008 R2 64 位服务器。DNS 有 2 个外部转发服务器，它们无法解析和反向查找所有计算机的指针。

这是 ipconfig 和 dnslookup 控制台日志：

```
C:\>ipconfig/all

   Host Name . . . . . . . . . . . . : APOLLO
   Primary Dns Suffix  . . . . . . . : estar.com
   Node Type . . . . . . . . . . . . : Hybrid
   IP Routing Enabled. . . . . . . . : No
   WINS Proxy Enabled. . . . . . . . : No
   DNS Suffix Search List. . . . . . : estar.com

Ethernet adapter Local Area Connection 4:

   Connection-specific DNS Suffix  . :
   Description . . . . . . . . . . . : Local Area Connection - Virtual Network
   Physical Address. . . . . . . . . : 84-2B-2B-00-8F-BF
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   Link-local IPv6 Address . . . . . : fe80::c0a8:fe0f%16(Preferred)
   Link-local IPv6 Address . . . . . : fe80::7802:18:9370:4669%16(Preferred)
   IPv4 Address. . . . . . . . . . . : 192.168.254.15(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : fe80::c0a8:fe0b%16
                                       192.168.254.11
   DHCPv6 IAID . . . . . . . . . . . : 293874475
   DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-15-1B-27-53-84-2B-2B-00-8F-BF

   DNS Servers . . . . . . . . . . . : 192.168.254.15
                                       68.87.68.162
                                       68.87.74.162
   Primary WINS Server . . . . . . . : 192.168.254.15
   NetBIOS over Tcpip. . . . . . . . : Enabled

C:\>nslookup
DNS request timed out.
    timeout was 2 seconds.
Default Server:  UnKnown
Address:  192.168.254.15

C:\>nslookup www.google.com
DNS request timed out.
    timeout was 2 seconds.
Server:  UnKnown
Address:  ::1

DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
*** Request to UnKnown timed-out 
```

Gateway/ForeFront TMG 服务器是 Windows 2008 R2 64 位服务器。这是 ipconfig 和 dnslookup 控制台日志：

```
C:\>ipconfig/all

   Host Name . . . . . . . . . . . . : AGUIRRE
   Primary Dns Suffix  . . . . . . . : estar.com
   Node Type . . . . . . . . . . . . : Hybrid
   IP Routing Enabled. . . . . . . . : Yes
   WINS Proxy Enabled. . . . . . . . : No
   DNS Suffix Search List. . . . . . : estar.com

Ethernet adapter Internal NIC:

   Connection-specific DNS Suffix  . :
   Description . . . . . . . . . . . : Broadcom BCM5708C NetXtreme II GigE (NDIS
 VBD Client) #2
   Physical Address. . . . . . . . . : 00-1C-23-CD-87-24
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   Link-local IPv6 Address . . . . . : fe80::211c:a611:bba9:6c09%12(Preferred)
   IPv4 Address. . . . . . . . . . . : 192.168.254.11(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . :
   DHCPv6 IAID . . . . . . . . . . . : 301997091
   DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-17-D8-60-67-00-1C-23-CD-87-22

   DNS Servers . . . . . . . . . . . : 192.168.254.15
                                       68.87.68.162
                                       68.87.74.162
   Primary WINS Server . . . . . . . : 192.168.254.15
   NetBIOS over Tcpip. . . . . . . . : Enabled

Ethernet adapter External NIC:

   Connection-specific DNS Suffix  . :
   Description . . . . . . . . . . . : Broadcom BCM5708C NetXtreme II GigE (NDIS
 VBD Client)
   Physical Address. . . . . . . . . : 00-1C-23-CD-87-22
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   Link-local IPv6 Address . . . . . : fe80::c574:e9c8:3e05:ab%11(Preferred)
   IPv4 Address. . . . . . . . . . . : 70.91.104.193(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.252
   Default Gateway . . . . . . . . . : 70.91.104.194
   DHCPv6 IAID . . . . . . . . . . . : 234888227
   DHCPv6 Client DUID. . . . . . . . : 00-01-00-01-17-D8-60-67-00-1C-23-CD-87-22

   DNS Servers . . . . . . . . . . . : 192.168.254.15
                                       68.87.68.162
                                       68.87.74.162
   NetBIOS over Tcpip. . . . . . . . : Disabled

C:\ >nslookup
Default Server:  apollo.estar.com
Address:  192.168.254.15

C:\>nslookup www.google.com
Server:  apollo.estar.com
Address:  192.168.254.15

DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
*** Request to apollo.estar.com timed-out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:53:56.510

您是否允许 TCP/53 和 UDP/53 入站和出站 DNS 流量？不确定 TMG 是否有自动允许所有这些在一个设置中的规则集，或者您是否需要单独指定它们。

# .htaccess - .htaccess 来保护我网站的文件夹

> ID：12397618
> 
> 赞同：-1
> 
> 时间：2012-09-12T23:53:49.097
> 
> 标签：.htaccess

例如，当某些人尝试访问时，我想给出 301 错误

[http://www.mypage.com/images](http://www.mypage.com/images)

或其他文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:30:14.193

如果用户尝试访问某些文件夹，也许您想将他们重定向到主页？一种方法是根据尝试访问不存在的文件或目录的用户进行重定向。为了使其工作，您的文件夹中的 DocumentIndex（index.html、index、html、index.php 等）中不能有任何内容。这将进入一个 .htaccess 文件，该文件必须放置在您要“保护”的每个文件夹中。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ / [R] 
```

# search - windows 7 查找

> ID：12397619
> 
> 赞同：0
> 
> 时间：2012-09-12T23:53:56.683
> 
> 标签：search, grep, windows-7-x64, findstr

我使用`findstr`并试图在输出文件中找到一些关键字错误。我将所有错误代码保存在`finddata.txt`. 搜索确实运行了一段时间，但我查看了结果，搜索将每一行放在`$findstr /c: "ORA-" text.err`结果文件中。结果文件很大，所以我知道出了点问题。

`findstr`我显然只在为我找到东西时才需要结果。

`findstr /g:finddata.txt /f:text.err > text_err.out`

-- 这是 MSFT 技术网手册：

[http://technet.microsoft.com/en-us/library/bb490907.aspx](http://technet.microsoft.com/en-us/library/bb490907.aspx)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:18:54.693

在文档中，您将看到：

```
/f: file   : Reads file list from the specified file. 
```

对于您要求 FindStr 在输入行中查找具有数据名称的文件的每个输入行，您不需要这样做。只需指定文件就行了。

删除**/f：**

```
findstr /g:finddata.txt text.err > text_err.out 
```

# python - python：根据修改日期+迭代器重命名文件

> ID：12397622
> 
> 赞同：2
> 
> 时间：2012-09-12T23:54:00.697
> 
> 标签：python

我有一个不断添加的文件目录。有时每天有几个文件进入，但数量可能会有所不同。我想定期运行一个脚本来扫描文件并根据文件的创建日期重命名它们+如果当天有多个文件，则使用一些迭代器。

这是我到目前为止所得到的

```
#!/usr/bin/python
import os
import datetime
target = "/target_dir"
os.chdir(target)
allfiles = os.listdir(target)
for filename in allfiles:
        if not os.path.isfile(filename):
                continue
        t = os.path.getmtime(filename)
        v= datetime.datetime.fromtimestamp(t)
        x = v.strftime('%Y%m%d')
        loop = 1
        iterator = 1
        temp_name = x + "_" + str(iterator)
        while loop:
                if not os.path.exists(temp_name + '.mp4'):
                        os.rename(filename, temp_name + '.mp4')
                        loop = 0
                else:
                        temp_name = x + '_' + str(iterator)
                        iterator+=1 
```

这似乎可行，但如果我第二次运行脚本，它会过早地更改文件名（即 date1-1.mp4 变为 date1-2.mp4 等）

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:40:46.047

添加额外支票`if filename == tempname: continue`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T00:45:48.027

当您第一次重命名文件时，您将拥有一个文件文件夹：*date1-1.mp4, date2-1.mp4*，如您所说。

在第二次运行时，该行`if not os.path.exists(temp_name + '.mp4'):`会说文件*date1-1.mp4*已经存在 - 即文件本身 - 然后将继续循环，直到未使用的文件名可用：*date1-2.mp4*。

我的解决方案如下：（基本上相当于汉斯的回答）

```
#!/usr/bin/python
import os
import datetime
target = + "/target_dir"
os.chdir(target)
allfiles = os.listdir(target)
for filename in allfiles:
    if not os.path.isfile(filename):
        continue
    t = os.path.getmtime(filename)
    v= datetime.datetime.fromtimestamp(t)
    x = v.strftime('%Y%m%d')
    loop = 1
    iterator = 1
    temp_name = x + "_" + str(iterator) + '.mp4'

    while filename != temp_name:
        if not os.path.exists(temp_name):
            os.rename(filename, temp_name)
            filename = temp_name
        else:
            iterator+=1
            temp_name = x + '_' + str(iterator) + '.mp4' 
```

# ios - iOS App 兼容所有设备版本

> ID：12397626
> 
> 赞同：0
> 
> 时间：2012-09-12T23:54:45.860
> 
> 标签：ios, iphone, ipad

我已经为 iPhone 和 iPad 开发应用程序已经有一段时间了，我正在为每个版本的设备开发每个应用程序，因为我担心它不会在没有视网膜显示器的较低版本上运行。

有没有办法开发一个可以在所有版本的设备上运行的应用程序？因为现在新的 iPhone 和 iPad 都带有 iOS6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:52:06.643

是的，旧版本的应用程序将适用于新的 iOS6。但是，为旧版本创建的应用程序将被装箱。我会说先为3GS创建一个应用程序并测试它的兼容性。您可能会错过一些新设备上的基本功能。我的建议是创建一个通用应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:03:16.137

较旧的应用程序将在新的 iOS6 上正常运行。由于新的 iphone5 具有高纵横比，旧的应用程序将被黑框化，即以黑色边框运行。有关更多信息，您可以访问[http://techcrunch.com/2012/09/12/first-party-apple-apps-optimized-for-iphone-5-display-existing-apps-will-run-letterboxed/](http://techcrunch.com/2012/09/12/first-party-apple-apps-optimized-for-iphone-5-display-existing-apps-will-run-letterboxed/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:03:18.203

通用应用程序是二进制文件将在 iPad 和 iPhone 上运行的应用程序。客户为一台设备购买它，并且可以自动在两台设备上运行它。拥有两个不同版本的应用程序（一个用于 iPhone，另一个用于 iPad）可能是出于商业原因。从客户的角度来看，最好只买一次。一些游戏开发者认为这是合理的，因为必须为更大尺寸的 iPad 重做图形，这可能需要很多时间。

关于视网膜显示的问题与您在应用程序中包含的资产有关。通常对于基于 UIKit 的应用程序，通过将“@2x.png”附加到文件名表示该资产将在支持 Retina 的设备上使用。否则，设备将自动将正常大小的图像大小加倍。此页面上有更多信息：http: [//developer.apple.com/library/ios/#qa/qa1686/_index.html](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

当您提到“设备的所有版本”时，另一个问题与 iOS 的版本有关。如果您不使用较新的框架，您通常可以让应用程序轻松向后兼容。您可以编写一个 App 来检查它正在运行的 iOS 版本，然后动态链接到这些库并在运行时执行此操作，然后不支持旧版本上不可用的某些功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T00:41:07.557

您可以选择“最小公分母”，或者...

以最新最好的设备为目标，并准备编写代码以选择性地禁用功能，支持多种分辨率和指令集，并接受这将带来的大量测试。

琐碎的最小公分母是在针对 iPhone 1 的现代 xcode 上编译的应用程序。它将在所有后续平台上运行，但会有以下“问题”：

*   iPhone5、iPad 界面周围的黑框或条。
*   所有 iPad 和 iPhone 4+ 上的像素外观图形
*   没有相机支持
*   不支持 GPS
*   没有指南针支持
*   没有多任务处理或推送通知
*   没有内置的快速电子邮件/消息支持
*   没有社交网络支持
*   没有游戏中心支持
*   等 - 查看任何苹果功能列表。

如果您想支持上述任何一项，您可以随时测试设备是否支持特定的 API、功能或分辨率——Apple 的开发人员文档对此非常有帮助。

* * *

注意：您不必选择 iPhone 1 作为最低公分母 - 3GS 也是一个不错的选择，因为它直到最近才开始销售。

# python - 在 OS X Lion 上使用 macports 将 python 从 2.7.1 升级到 2.7.3 会破坏 os.urandom

> ID：12397629
> 
> 赞同：2
> 
> 时间：2012-09-12T23:55:07.033
> 
> 标签：python, macos, osx-lion

我在 Mac OS Lion 上使用 macports 安装了 python 2.7.3，并使用了`port select python python27`. 但是 python 版本仍然显示 2.7.1 （虽然`which python`显示了正确的 macport 安装目录 ie `/opt/local/bin/python`）。此外，这导致python不再识别`os.urandom`。

```
>>> import os
>>> os.urandom
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'urandom' 
```

任何想法为什么会发生这种情况？以及如何解决？

# php - 无法修改标头信息 - 标头已发送...这是我的错误的原因吗？

> ID：12397632
> 
> 赞同：0
> 
> 时间：2012-09-12T23:55:45.127
> 
> 标签：php, apache, mod-rewrite, url-rewriting, zend-studio

我正在开发一个 PHP 网站，其代码是从开发团队继承的。我试图让它在我的本地机器（Windows 7/Apache/Zend Studio）上正常运行，但我在登录时遇到了问题。它没有将我引导到首页，而是将我发送到带有一堆调试信息的空白屏幕。如果我再试一次并手动转到首页，那么它会准确地显示我的登录状态。除了 PHP 错误之外，我几乎没有调试线索：

```
Source File: 
    C:\Program Files (x86)\Zend\Apache2\htdocs\weatherbell.com\public\fitch\lib\FJF_BASE.php : 113

Error String:
    Warning: Cannot modify header information - headers already sent by (output started at C:\Program Files (x86)\Zend\Apache2\htdocs\weatherbell.com\public\fitch\lib\FJF_BASE.php:28) in C:\Program Files (x86)\Zend\Apache2\htdocs\weatherbell.com\public\fitch\lib\FJF_BASE.php on line 113 
```

**回溯：** ![在此处输入图像描述](../Images/23a4b717e794ff108ecc893526d3bf05.png)

*   [FJF_BASE.php](http://pastebin.com/mMvZ6hPY)
*   [session_model.php](http://pastebin.com/zcudJcV4)
*   [登录.php](http://pastebin.com/2ntaA8Ts)
*   [索引.php](http://pastebin.com/JkN29AZ4)

这是一些额外的调试信息：

```
**FUNCTION DATA:**

Function Name: header
Function Arguments:
'Location: /'

**REQUEST:**

GET
array (
  'cmd' => 'login',
)
POST
array (
  'cmd' => 'login',
  'username' => '********'
  'password' => '********',
)
COOKIE
array (
  'PHPSESSID' => '2jhhjib1el57ic8jm62sokcpq7',
  'ZDEDebuggerPresent' => 'php,phtml,php3',
)

**SERVER VARIABLES:**

SERVER
array (
  'ALLUSERSPROFILE' => 'C:\\ProgramData',
  'APPDATA' => 'C:\\Windows\\system32\\config\\systemprofile\\AppData\\Roaming',
  'CLASSPATH' => '.;C:\\Program Files (x86)\\Java\\jre6\\lib\\ext\\QTJava.zip',
  'CommonProgramFiles' => 'C:\\Program Files (x86)\\Common Files',
  'CommonProgramFiles(x86)' => 'C:\\Program Files (x86)\\Common Files',
  'CommonProgramW6432' => 'C:\\Program Files\\Common Files',
  'COMPUTERNAME' => 'MIKE-PC',
  'ComSpec' => 'C:\\Windows\\system32\\cmd.exe',
  'COR_ENABLE_PROFILING' => '1',
  'COR_PROFILER' => 'MyProfiler',
  'CYGWIN' => 'tty',
  'DB2INSTANCE' => 'DB2',
  'FP_NO_HOST_CHECK' => 'NO',
  'GTK_BASEPATH' => 'C:\\Program Files (x86)\\GtkSharp\\2.12\\',
  'LOCALAPPDATA' => 'C:\\Windows\\system32\\config\\systemprofile\\AppData\\Local',
  'NUMBER_OF_PROCESSORS' => '2',
  'OS' => 'Windows_NT',
  'Path' => 'C:\\Users\\Mike\\AppData\\Local\\Google\\Chrome\\Application;C:\\Program Files (x86)\\PlayCap 0.1.1...cut...',
  'PATHEXT' => '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.RB;.RBW',
  'PHPRC' => 'C:\\Program Files (x86)\\Zend\\ZendServer\\etc',
  'PHP_FCGI_MAX_REQUESTS' => '10000',
  'PROCESSOR_ARCHITECTURE' => 'x86',
  'PROCESSOR_ARCHITEW6432' => 'AMD64',
  'PROCESSOR_IDENTIFIER' => 'Intel64 Family 6 Model 23 Stepping 10, GenuineIntel',
  'PROCESSOR_LEVEL' => '6',
  'PROCESSOR_REVISION' => '170a',
  'ProgramData' => 'C:\\ProgramData',
  'ProgramFiles' => 'C:\\Program Files (x86)',
  'ProgramFiles(x86)' => 'C:\\Program Files (x86)',
  'ProgramW6432' => 'C:\\Program Files',
  'protector_attach' => 'true',
  'PSModulePath' => 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\',
  'PUBLIC' => 'C:\\Users\\Public',
  'QTJAVA' => 'C:\\Program Files (x86)\\Java\\jre6\\lib\\ext\\QTJava.zip',
  'SAN_DIR' => 'C:\\Program Files\\SiSoftware\\SiSoftware Sandra Lite 2012.SP5',
  'SystemDrive' => 'C:',
  'SystemRoot' => 'C:\\Windows',
  'TEMP' => 'C:\\Users\\Mike\\AppData\\Local\\Temp',
  'TMP' => 'C:\\Windows\\TEMP',
  'USERDOMAIN' => 'WORKGROUP',
  'USERNAME' => 'MIKE-PC$',
  'USERPROFILE' => 'C:\\Windows\\system32\\config\\systemprofile',
  'VS100COMNTOOLS' => 'E:\\Microsoft Visual Studio 10.0\\Common7\\Tools\\',
  'windir' => 'C:\\Windows',
  'windows_tracing_flags' => '3',
  'AP_PARENT_PID' => '3828',
  '_FCGI_CLIENT_PID_' => '5632',
  '_FCGI_MUTEX_' => '1444',
  '_FCGI_NTAUTH_IMPERSONATE_' => '1',
  '_FCGI_SHUTDOWN_EVENT_' => '1440',
  'FCGI_ROLE' => 'RESPONDER',
  'REDIRECT_STATUS' => '200',
  'HTTP_HOST' => 'localhost',
  'HTTP_CONNECTION' => 'keep-alive',
  'CONTENT_LENGTH' => '37',
  'HTTP_CACHE_CONTROL' => 'max-age=0',
  'HTTP_ORIGIN' => 'http://localhost',
  'HTTP_USER_AGENT' => 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180...cut...',
  'CONTENT_TYPE' => 'application/x-www-form-urlencoded',
  'HTTP_ACCEPT' => 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'HTTP_REFERER' => 'http://localhost/login/',
  'HTTP_ACCEPT_ENCODING' => 'gzip,deflate,sdch',
  'HTTP_ACCEPT_LANGUAGE' => 'en-US,en;q=0.8',
  'HTTP_ACCEPT_CHARSET' => 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
  'HTTP_COOKIE' => 'PHPSESSID=2jhhjib1el57ic8jm62sokcpq7; ZDEDebuggerPresent=php,phtml,php3',
  'PATH' => 'C:\\Program Files (x86)\\PlayCap 0.1.1\\bin;C:\\Program Files\\Java\\jdk1.7.0_05\\bin;C:\\Program ...cut...',
  'COMSPEC' => 'C:\\Windows\\system32\\cmd.exe',
  'WINDIR' => 'C:\\Windows',
  'SERVER_SIGNATURE' => '',
  'SERVER_SOFTWARE' => 'Apache',
  'SERVER_NAME' => 'localhost',
  'SERVER_ADDR' => '127.0.0.1',
  'SERVER_PORT' => '80',
  'REMOTE_ADDR' => '127.0.0.1',
  'DOCUMENT_ROOT' => 'C:/Program Files (x86)/Zend/Apache2/htdocs/weatherbell.com/public',
  'SERVER_ADMIN' => 'webmaster@dummy-host.example.com',
  'SCRIPT_FILENAME' => 'C:/Program Files (x86)/Zend/Apache2/htdocs/weatherbell.com/public/fitch/index.php',
  'REMOTE_PORT' => '16495',
  'REDIRECT_QUERY_STRING' => 'cmd=login',
  'REDIRECT_URL' => '/login/',
  'GATEWAY_INTERFACE' => 'CGI/1.1',
  'SERVER_PROTOCOL' => 'HTTP/1.1',
  'REQUEST_METHOD' => 'POST',
  'QUERY_STRING' => 'cmd=login',
  'REQUEST_URI' => '/login/',
  'SCRIPT_NAME' => '/fitch/index.php',
  'PHP_SELF' => '/fitch/index.php',
  'REQUEST_TIME' => 1347486710,
  'argv' => 
  array (
    0 => 'cmd=login',
  ),
  'argc' => 1,
) 
```

我不确定这是否是问题的原因。该网站广泛使用 Mod_rewrite - 所以也许这就是原因......

这是我的`.htaccess`，以防万一：

```
IndexIgnore *

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>

ErrorDocument 404 /fitch/index.php?cmd=404error
RewriteEngine On

RewriteRule ^fitch/resources/ckfinder300/(.+)$ /fitch/resources/ckfinder/$1?maxWidth=300 [NC,L,QSA]

RewriteRule ^xd_receiver\.html$ /fitch/lib/facebook-platform/xd_receiver.html [NC,L,QSA]

RewriteCond %{HTTP_HOST} ^weatherbell\.com
RewriteRule ^(.*)$ http://www.weatherbell.com/$1 [R=301]

RewriteRule ^/?$ /fitch/index.php?cmd=homepage [NC,L,QSA]

#ADMIN
RewriteRule ^admin/?$ /fitch/index.php?cmd=admin [NC,L,QSA]
RewriteRule ^admin/logout/?$ /fitch/index.php?cmd=admin&logout=1 [NC,L,QSA]

#RewriteRule ^admin/users/?$ /fitch/index.php?cmd=admin_users [NC,L,QSA]
#RewriteRule ^admin/users/page/(\d+)/?$ /fitch/index.php?cmd=admin_users&page=$1 [NC,L,QSA]
#RewriteRule ^admin/users/page/(\d+)/keyword/([^\/]+)/?$ /fitch/index.php?cmd=admin_users&page=$1&keyword=$2 [NC,L,QSA]
RewriteRule ^admin/users/(admins|general)/?$ /fitch/index.php?cmd=admin_users&mode=$1 [NC,L,QSA]
RewriteRule ^admin/users/(admins|general)/page/(\d+)/?$ /fitch/index.php?cmd=admin_users&mode=$1&page=$2 [NC,L,QSA]
RewriteRule ^admin/users/(admins|general)/page/(\d+)/keyword/([^\/]+)/?$ /fitch/index.php?cmd=admin_users&mode=$1&page=$2&keyword=$3 [NC,L,QSA]
RewriteRule ^admin/users/export/?$ /fitch/index.php?cmd=admin_users_export [NC,L,QSA]

RewriteRule ^admin/users/(admins|general)/add/?$ /fitch/index.php?cmd=admin_users_edit&mode=$1 [NC,L,QSA]
RewriteRule ^admin/users/(admins|general)/edit/(\d+)/?$ /fitch/index.php?cmd=admin_users_edit&mode=$1&id=$2 [NC,L,QSA]
RewriteRule ^admin/users/(admins|general)/permissions/(\d+)/?$ /fitch/index.php?cmd=admin_users_permissions&mode=$1&id=$2 [NC,L,QSA]

RewriteRule ^admin/cms_content/?$ /fitch/index.php?cmd=admin_cms_content [NC,L,QSA]
RewriteRule ^admin/cms_content/add/?$ /fitch/index.php?cmd=admin_cms_content_edit [NC,L,QSA]
RewriteRule ^admin/cms_content/edit/(\d+)/?$ /fitch/index.php?cmd=admin_cms_content_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/site_vars/?$ /fitch/index.php?cmd=admin_site_vars [NC,L,QSA]

RewriteRule ^admin/seo_redirect_tool/?$ /fitch/index.php?cmd=admin_seo_redirect_tool [NC,L,QSA]
RewriteRule ^admin/seo_redirect_tool/add/?$ /fitch/index.php?cmd=admin_seo_redirect_tool_edit [NC,L,QSA]
RewriteRule ^admin/seo_redirect_tool/edit/(\d+)/?$ /fitch/index.php?cmd=admin_seo_redirect_tool_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/global_seo_controller/?$ /fitch/index.php?cmd=admin_global_seo_controller [NC,L,QSA]
RewriteRule ^admin/global_seo_controller/add/?$ /fitch/index.php?cmd=admin_global_seo_controller_edit [NC,L,QSA]
RewriteRule ^admin/global_seo_controller/edit/(\d+)/?$ /fitch/index.php?cmd=admin_global_seo_controller_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/cenzor/?$ /fitch/index.php?cmd=admin_cenzor [NC,L,QSA]
RewriteRule ^admin/cenzor/comments/?$ /fitch/index.php?cmd=admin_cenzor&comments=1 [NC,L,QSA]

RewriteRule ^admin/blogs/?$ /fitch/index.php?cmd=admin_blogs [NC,L,QSA]
RewriteRule ^admin/blogs/add/?$ /fitch/index.php?cmd=admin_blogs_edit [NC,L,QSA]
RewriteRule ^admin/blogs/edit/(\d+)/?$ /fitch/index.php?cmd=admin_blogs_edit&id=$1 [NC,L,QSA]
RewriteRule ^admin/blogs/entries/?$ /fitch/index.php?cmd=admin_blogs_entries [NC,L,QSA]
RewriteRule ^admin/blogs/entries/add/?$ /fitch/index.php?cmd=admin_blogs_entries_edit [NC,L,QSA]
RewriteRule ^admin/blogs/entries/edit/(\d+)/?$ /fitch/index.php?cmd=admin_blogs_entries_edit&id=$1 [NC,L,QSA]
RewriteRule ^admin/blogs/categories/?$ /fitch/index.php?cmd=admin_blogs_categories [NC,L,QSA]
RewriteRule ^admin/blogs/categories/add/?$ /fitch/index.php?cmd=admin_blogs_categories_edit [NC,L,QSA]
RewriteRule ^admin/blogs/categories/edit/(\d+)/?$ /fitch/index.php?cmd=admin_blogs_categories_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/comments/([^\/]+)/?$ /fitch/index.php?cmd=admin_comments&type=$1 [NC,L,QSA]
RewriteRule ^admin/comments/([^\/]+)/page/(\d+)/?$ /fitch/index.php?cmd=admin_comments&type=$1&page=$2 [NC,L,QSA]
RewriteRule ^admin/comments/([^\/]+)/edit/(\d+)/?$ /fitch/index.php?cmd=admin_comments_edit&type=$1&id=$2 [NC,L,QSA]
RewriteRule ^admin/comments/([^\/]+)/(\d+)/?$ /fitch/index.php?cmd=admin_comments&type=$1&id=$2 [NC,L,QSA]
RewriteRule ^admin/comments/([^\/]+)/(\d+)/page/(\d+)/?$ /fitch/index.php?cmd=admin_comments&type=$1&id=$2&page=$3 [NC,L,QSA]
RewriteRule ^admin/comments/([^\/]+)/(\d+)/edit/(\d+)/?$ /fitch/index.php?cmd=admin_comments_edit&type=$1&item_id=$2&id=$3 [NC,L,QSA]

RewriteRule ^admin/premium_categories/?$ /fitch/index.php?cmd=admin_premium_categories [NC,L,QSA]
RewriteRule ^admin/premium_categories/add/?$ /fitch/index.php?cmd=admin_premium_categories_edit [NC,L,QSA]
RewriteRule ^admin/premium_categories/edit/(\d+)/?$ /fitch/index.php?cmd=admin_premium_categories_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/premium_categories/edit/(\d+)/subcategories/?$ /fitch/index.php?cmd=admin_premium_categories&parent_id=$1 [NC,L,QSA]
RewriteRule ^admin/premium_categories/edit/(\d+)/subcategories/add/?$ /fitch/index.php?cmd=admin_premium_categories_edit&parent_id=$1 [NC,L,QSA]
RewriteRule ^admin/premium_categories/edit/(\d+)/subcategories/edit/(\d+)/?$ /fitch/index.php?cmd=admin_premium_categories_edit&parent_id=$1&id=$2 [NC,L,QSA]

RewriteRule ^admin/premium_cms_content/?$ /fitch/index.php?cmd=admin_premium_cms_content [NC,L,QSA]
RewriteRule ^admin/premium_cms_content/add/?$ /fitch/index.php?cmd=admin_premium_cms_content_edit [NC,L,QSA]
RewriteRule ^admin/premium_cms_content/edit/(\d+)/?$ /fitch/index.php?cmd=admin_premium_cms_content_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/videos/categories/?$ /fitch/index.php?cmd=admin_videos_categories [NC,L,QSA]
RewriteRule ^admin/videos/categories/add/?$ /fitch/index.php?cmd=admin_videos_categories_edit [NC,L,QSA]
RewriteRule ^admin/videos/categories/edit/(\d+)/?$ /fitch/index.php?cmd=admin_videos_categories_edit&id=$1 [NC,L,QSA]
RewriteRule ^admin/videos/?$ /fitch/index.php?cmd=admin_videos [NC,L,QSA]
RewriteRule ^admin/videos/add/?$ /fitch/index.php?cmd=admin_videos_edit [NC,L,QSA]
RewriteRule ^admin/videos/edit/(\d+)/?$ /fitch/index.php?cmd=admin_videos_edit&id=$1 [NC,L,QSA]
RewriteRule ^admin/videos/encoder_notification/?$ /fitch/index.php?cmd=admin_videos_encoder_notification [NC,L,QSA]

RewriteRule ^admin/videos_recipes/?$ /fitch/index.php?cmd=admin_videos_recipes [NC,L,QSA]
RewriteRule ^admin/videos_recipes/add/?$ /fitch/index.php?cmd=admin_videos_recipes_edit [NC,L,QSA]
RewriteRule ^admin/videos_recipes/(\d+)/?$ /fitch/index.php?cmd=admin_videos_recipes_edit&id=$1 [NC,L,QSA]

RewriteRule ^admin/premium_subscribers_mailer/?$ /fitch/index.php?cmd=admin_premium_subscribers_mailer [NC,L,QSA]

RewriteRule ^cron/check_subscriptions/?$ /fitch/index.php?cmd=cron_check_subscriptions [NC,L,QSA]
RewriteRule ^cron/check_trial_subscriptions/?$ /fitch/index.php?cmd=cron_check_trial_subscriptions [NC,L,QSA]
RewriteRule ^cron/premium_subscribers_mailer/?$ /fitch/index.php?cmd=cron_premium_subscribers_mailer [NC,L,QSA]

RewriteRule ^login/?$ /fitch/index.php?cmd=login [NC,L,QSA]
RewriteRule ^logout/?$ /fitch/index.php?cmd=login&logout=1 [NC,L,QSA]
RewriteRule ^forgot-password/?$ /fitch/index.php?cmd=forgot_password [NC,L,QSA]
RewriteRule ^register/?$ /fitch/index.php?cmd=register [NC,L,QSA]
RewriteRule ^register/payment/?$ /fitch/index.php?cmd=register_payment [NC,L,QSA]
RewriteRule ^account/edit/?$ /fitch/index.php?cmd=account_edit [NC,L,QSA]
RewriteRule ^refer-a-friend/?$ /fitch/index.php?cmd=referafriend [NC,L,QSA]

RewriteRule ^weather-maps/?$ /fitch/index.php?cmd=weather_maps [NC,L,QSA]
RewriteRule ^commercial/?$ /fitch/index.php?cmd=commercial [NC,L,QSA]
RewriteRule ^commercial/([\-a-zA-Z\d]+)/?$ /fitch/index.php?cmd=commercial_category&url=$1 [NC,L,QSA]
RewriteRule ^commercial/([\-a-zA-Z\d]+)/([\-a-zA-Z\d]+)/?$ /fitch/index.php?cmd=commercial_details&url=$1&item_url=$2 [NC,L,QSA]
RewriteRule ^premium/?$ /fitch/index.php?cmd=premium [NC,L,QSA]
RewriteRule ^premium/weather/?$ /fitch/index.php?cmd=weather [NC,L,QSA]

RewriteRule ^premium/([\-a-zA-Z\d]+)/?$ /fitch/index.php?cmd=blog&url=$1 [NC,L,QSA]
RewriteRule ^premium/([\-a-zA-Z\d]+)/page/(\d+)/?$ /fitch/index.php?cmd=blog&url=$1&page=$2 [NC,L,QSA]
RewriteRule ^premium/([\-a-zA-Z\d]+)/calendar/([\-\d]+)/?$ /fitch/index.php?cmd=blog&url=$1&calendar=$2 [NC,L,QSA]
RewriteRule ^premium/([\-a-zA-Z\d]+)/calendar/([\-\d]+)/page/(\d+)/?$ /fitch/index.php?cmd=blog&url=$1&calendar=$2&page=$3 [NC,L,QSA]
RewriteRule ^premium/([\-a-zA-Z\d]+)/([^\/]+)/?$ /fitch/index.php?cmd=blog_entry&blog_url=$1&entry_url=$2 [NC,L,QSA]

RewriteRule ^weather-news/?$ /fitch/index.php?cmd=blog&url=weather-news [NC,L,QSA]
RewriteRule ^weather-news/page/(\d+)/?$ /fitch/index.php?cmd=blog&url=weather-news&page=$1 [NC,L,QSA]
RewriteRule ^weather-news/calendar/([\-\d]+)/?$ /fitch/index.php?cmd=blog&url=weather-news&calendar=$1 [NC,L,QSA]
RewriteRule ^weather-news/calendar/([\-\d]+)/page/(\d+)/?$ /fitch/index.php?cmd=blog&url=weather-news&calendar=$1&page=$2 [NC,L,QSA]
RewriteRule ^weather-news/([^\/]+)/?$ /fitch/index.php?cmd=blog_entry&blog_url=weather-news&entry_url=$1 [NC,L,QSA]

RewriteRule ^weatherbell-press/?$ /fitch/index.php?cmd=blog&url=weatherbell-press [NC,L,QSA]
RewriteRule ^weatherbell-press/page/(\d+)/?$ /fitch/index.php?cmd=blog&url=weatherbell-press&page=$1 [NC,L,QSA]
RewriteRule ^weatherbell-press/calendar/([\-\d]+)/?$ /fitch/index.php?cmd=blog&url=weatherbell-press&calendar=$1 [NC,L,QSA]
RewriteRule ^weatherbell-press/calendar/([\-\d]+)/page/(\d+)/?$ /fitch/index.php?cmd=blog&url=weatherbell-press&calendar=$1&page=$2 [NC,L,QSA]
RewriteRule ^weatherbell-press/([^\/]+)/?$ /fitch/index.php?cmd=blog_entry&blog_url=weatherbell-press&entry_url=$1 [NC,L,QSA]

RewriteRule ^videos/?$ /fitch/index.php?cmd=videos [NC,L,QSA]
RewriteRule ^videos/([\-a-zA-Z\d]+)/?$ /fitch/index.php?cmd=videos_details&url=$1 [NC,L,QSA]

RewriteRule ^contact-us/?$ /fitch/index.php?cmd=contact [NC,L,QSA]
RewriteRule ^search/?$ /fitch/index.php?cmd=search [NC,L,QSA]

RewriteRule ^subscriptions_response/?$ /fitch/index.php?cmd=subscriptions_response [NC,L,QSA]
RewriteRule ^cron/subscriptions_date_updater/?$ /fitch/index.php?cmd=cron_subscriptions_date_updater [NC,L,QSA]

RewriteRule ^partner/rss/([\-a-zA-Z\d]+)/?$ /fitch/index.php?cmd=partner_rss&url=$1 [NC,L,QSA]

RewriteRule ^page-not-found/?$ /fitch/index.php?cmd=404error [NC,L,QSA]
RewriteRule ^([\w\/\-]+)/?$ /fitch/index.php?cmd=page&url_title=$1 [NC,L,QSA] 
```

为了完整起见，这是我的[httpd.conf](http://pastebin.com/ZRETqgKs)。

一般来说，我是 PHP、Mod_rewrite 和服务器安装的新手——所以我*非常*感谢一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:18:31.437

这是行：

```
$data = date("m/d/Y h:i:s") . " " . number_format(microtime(), 3) . "(" . $method . "): " . $str . "\n"; 
```

number_format 需要一个浮点数，但默认情况下 microtime 返回一个字符串，根据 error_reporting 可能会导致通知。该通知将作为输出。

我会简单地删除它：

```
number_format(microtime(), 3) 
```

...我认为以任何方式进行调试都不需要微秒。

# css - 视口设备宽度和宽度混淆

> ID：12397637
> 
> 赞同：0
> 
> 时间：2012-09-12T23:56:36.517
> 
> 标签：css, wordpress, responsive-design

这真让我抓狂。我设计了这个响应式网站，它可以在电脑、iPad 和 iPhone 上完美运行。但不是在我的安卓手机上。它显示 iPad 或桌面版本（两者看起来相似，所以我不确定是哪一个）

我正在为手机使用单独的 css，我都`viewport device-width`对 vs`width`和`max-width`vs感到困惑`width`。我想我已经把它们卡住了，但发现很难找到解决方案。你们能帮帮我，让我知道我做错了什么吗？

此外，当您调整浏览器窗口的大小时，响应式网站通常会缩小，但我的网站不会。我做错了吗？请帮忙。

我也试过`<meta name="viewport" content="width=device-width, initial-scale=1">`但没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:51:01.523

把你的`meta`换成这个，看看它是否有效：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# search - ModX Evo：搜索资源和电视 - 同上显示结果

> ID：12397638
> 
> 赞同：1
> 
> 时间：2012-09-12T23:56:38.213
> 
> 标签：search, filter, content-management-system, modx, modx-evolution

使用同上，我创建了一个产品目录。我现在希望添加搜索和过滤选项。有人知道最好的方法吗？我似乎找不到一个好的插件。

我正在运行 ModX Evolution 1.0.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:31:20.590

如果有人感兴趣，我放弃并自己制作：

**更新了完整的代码**

请随时要求我澄清任何事情或添加更改或改进。

请注意，我必须解决一个问题——您不能结合电视的搜索词来进行非常明确的搜索。我仍然会为此努力

```
//TV FILTERS
$sql = 'SELECT DISTINCT `contentid` FROM `modx_site_tmplvar_contentvalues`';
$where = array();
//ADD THE VARIABLES YOU WANT TO SEARCH TV's WITH BELOW
if ($searchlocation !== 'Any') $where[] = '`value` LIKE "%'.$searchlocation.'%"';
if ($searchmake !== 'Any')  $where[] = '`value` LIKE "%'.$searchmake.'%"';
if ($searchtype !== 'Any') $where[] = '`value` LIKE "%'.$searchtype.'%"';
if (count($where) > 0) {
  $sql .= ' WHERE '.implode(' OR ', $where);
} else {
  // OPTIONAL
  // Error out; must specify at least one!
}

$tvqresult = mysql_query($sql);
$num_rowstvq = mysql_num_rows($tvqresult);
while ($rowtvq = mysql_fetch_array($tvqresult)) {
$contid =  $rowtvq['contentid'];

//MAIN QUERY RETRIEVES RESOURCE - TEMPLATE LIMITS SEARCH TO PARTICULAR TYPE THAT WILL BE USED IN DITTO
$mainsql = 'SELECT * FROM `modx_site_content` WHERE `id` = ' . $rowtvq['contentid'] . '  AND `template` = 12';

$resultmain = mysql_query($mainsql);
$num_rowsmain = mysql_num_rows($resultmain);
if (!$resultmain) {
continue;
}
elseif ($num_rowsmain == 0){
echo "Sorry - nothing matches your search";
}

else {
while ($row = mysql_fetch_array($resultmain )) {
  echo "[[Ditto? &parents=`134` &documents=" . $row['id'] . " &tpl=`usedtempchunk`]]";
}//END MAIN LOOP

}//END MAIN ELSE

}//END TV WHILE LOOP
?> 
```

# jquery - 在上一个/下一个图库中使用 jquery 从数组更改 URL

> ID：12397640
> 
> 赞同：0
> 
> 时间：2012-09-12T23:56:46.623
> 
> 标签：jquery, arrays

我有一个非常简单的上一张/下一张照片库，我还想更改每张照片的 URL，这是指向更大图像的灯箱链接。

```
var img = [
  "images/railing.jpg",
  "images/stairwell.jpg",
  "images/sunset_railing.jpg",
  "images/sunset_house.jpg"
];

img.current = 0;
function showImage(i) {
  $("#imag").fadeOut( function() {
    this.src = img[img.current];
    $(this).fadeIn();
  });
}

function NextImage() {
  img.current = (img.current+1) % img.length;
  showImage(img.current);
}

function PreviousImage() {
  if (--img.current < 0)
    img.current = img.length - 1;
  showImage(img.current);
}

onload = function() {
  showImage(0);
}; 
```

这在页面上使用 NextImage 和 PreviousImage 函数调用按钮，它可以漂亮地更改图像：

```
<a href="images/railing_detail.jpg" rel="lightbox">
  <img src="images/railing.jpg" alt="railing" name="BlackImage" 
       border="0" id="imag" />
</a> 
```

我还希望能够同时更改链接的 href 值，并且无法找到解决此问题的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:01:53.943

使用 { } 表示法而不是 [ ] 创建 img 数组的映射，例如

```
var img = {
  "images/railing.jpg" : "link",
  "images/stairwell.jpg" : "link",
  .. etc
}; 
```

回复您的第一条评论，如果img+link必须分配给索引，您可以尝试

```
var img = [
  {"images/railing.jpg" : "link"},
  {"images/stairwell.jpg" : "link"},
  .. etc
]; 
```

或者

```
var img = [
  ["images/railing.jpg","link"],
  ["images/stairwell.jpg", "link"],
  .. etc
]; 
```

`img[0][0]`是`"images/railing.jpg"`，`img[0][1]`是链接到`"images/railing.jpg"`

用你喜欢的

# python - 您可以将 if 语句分配为变量吗？当它是计算时如何打印 if 语句的结果

> ID：12397647
> 
> 赞同：0
> 
> 时间：2012-09-12T23:57:26.967
> 
> 标签：python, if-statement

大家好，我被困在我的 Python 作业上，我已经搜索了论坛，现在已经尝试了三个小时。我仍然找不到答案或弄清楚。它可能在那里，但我缺乏知识可能使我看不到它。

我正在使用 python 版本 3.2.3。

我无法弄清楚如何在我的打印语句中显示 if 语句的结果。因此，如果人的年龄小于 40，它会说“你很年轻”，如果人的年龄 > 40，它会打印出“你看起来很棒”。我很容易第一次打印它，但是我需要它在 msg 所在的最后打印我不知道如何。我包含了所有代码，以防我没有正确解释这一点。

```
print("Hello", firstname, lastname, "you're", age, "years old", msg) 
```

提前感谢您的帮助，如果答案已经在这里，我再次道歉

```
# ITP 100 Python Programming
# In Class Challenge September 10, 2012

# Getting users name and age as input
firstname = input("Hello. What is your first name? ")
lastname = input("What is your last name? ")

birthyear = input("What year where you born? ")
birthyear = int(birthyear)

age = 2012 - birthyear
print("\nYou're", age, "years old.")

if age < 40: 
    print("you are young.")

else:
    print("You look great.")

print("Hello", firstname, lastname, "you're", age, "years old", msg) 

input("\n\nPress n to exit") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:51:46.477

你可以这样做：

```
print("You " + "are young." if age < 40 else "look great.") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:59:29.550

那个怎么样 ？

```
if age < 40: 
    msg = "you are young."
else:
    msg = "You look great."
print(msg) 
```

现在，您已经定义`msg`并且可以稍后在您的 final 中使用它`print`。现在，做一个练习：找到一种在用户输入年龄时自动执行此操作的方法：您将定义一个函数，该函数将整数`birthyear`作为输入，并根据年龄输出给定消息...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:09:11.477

您可以创建一个存储字符串的变量（您的语句是`"you are young."`or `"You look great."`，或任何您想要的字符串！）并稍后在您的脚本中显示它。当您创建`firstname`和`lastname`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T02:41:13.497

问题是，你还没有初始化变量 msg。您还不能使用它，因为在打印语句之前，它还没有出现在程序中。您应该做的是将“You are young”等消息存储在一个变量中，例如 msg。这样您以后可以访问它。

# mysql - mysql范围过程子

> ID：12397648
> 
> 赞同：0
> 
> 时间：2012-09-12T23:57:34.873
> 
> 标签：mysql, scope, procedure

我正在尝试创建一个程序来计算一些利率价格等。这里有一点摘录。

但是，我收到一条错误消息：检查 'call due_form( in amtDue double, in extPrice double '

变量是否不在正确的范围内？可能是什么问题？任何建议表示赞赏。

```
 create procedure due_form(in amtDue double
                            , in extPrice double
                            , in discAmt double
                            , in discPrice double
                            , in p_taxRate double
                            , out   p_msg   varchar(255))
    begin
        set p_msg := concat(
    'Amount Due         ' , amtDue , '\n'
    , 'Ext Price        ', extPrice, '\n'
    , 'Disc Amount      ', discAmt, '\n'
    , 'After Discount   ', discPrice, '\n'
    , 'Sales Tax        ', p_taxRate);

    end;
    #
    create procedure due( in p_price double
                        , in p_quantity integer
                        , in p_discRate double
                        , in p_taxRate double
                        , in p_shipping double
                        , out p_amtDue  double
                        , out p_msg varchar(255) )
    begin
declare extPrice double;
declare discAmt double;
declare discPrice double;
declare amtDue double;
declare msg varchar(255);

select p_price, p_quantity, p_discRate, p_taxRate, p_shipping;

set extPrice := p_price * p_quantity;
set discAmt := extPrice *  p_discRate; 
set discPrice := extPrice - discAmt; 
set amtDue:= discPrice * p_taxRate + p_shipping;

set p_amtDue := amtDue;

set msg := call due_form( in amtDue double
                                    , in extPrice double
                                    , in discAmt double
                                    , in discPrice double
                                    , in p_taxRate double
                                    , out p_msg varchar(255) )

set p_msg := msg; 

select p_msg; 
```

结尾;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:02:08.993

您不能将过程的结果分配给变量，但`p_msg`会包含一个返回值，因为它`out`前面有关键字。
调用过程时，不能使用`in/out`，也不能重复每个参数的类型。该过程已经定义。

```
select p_price, p_quantity, p_discRate, p_taxRate, p_shipping;

set extPrice := p_price * p_quantity;
set discAmt := extPrice *  p_discRate; 
set discPrice := extPrice - discAmt; 
set amtDue:= discPrice * p_taxRate + p_shipping;

set p_amtDue := amtDue;

call due_form(amtDue, extPrice, discAmt, discPrice, p_taxRate, p_msg );

select p_msg; 
```

# regex - 扩展正则表达式字符串

> ID：12397652
> 
> 赞同：2
> 
> 时间：2012-09-12T23:57:59.580
> 
> 标签：regex

所以我对正则表达式不是很熟悉，看过一些教程以及它是如何工作的，但我还是不明白！

无论如何，这是我拥有的当前字符串：`^[a-zA-Z0-9]*$`

我希望它能够使用以下字符：（`[` `]` `(` `)` `|`并且能够使用空格）

编辑：对于空格，让我们说以下字符串：`[Something] Something`，是否可以使用正则表达式：`^[][a-zA-Z0-9 ]*$`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:50:51.120

`]`您需要在字符类中转义右方括号（仅）：

```
^[[\]a-zA-Z0-9 ()|]*$ 
```

您需要使用的所有其他字符都不需要转义。

顺便说一句，您需要在字符类中转义的唯一字符是：

*   `]`右括号（显然）
*   `\`反斜杠（显然）
*   `^`，但前提是不在负类中（以 开头`^`）
*   `-`，但前提是不是字符类中的第一个或最后一个字符

在字符类中使用时，所有其他字符都失去了它们的正则表达式含义。例如，这是一个有效的字符类：

```
[^^.*()|[\]\\-] 
```

这意味着“除任何字符之外的任何字符`^.*()|[]\-`”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T00:03:23.187

包括`]`在字符类的开头，如下所示：

```
^[]a-zA-Z0-9]*$ 
```

其余的可以不转义地插入：

```
^[][()|a-zA-Z0-9]*$ 
```

当然，除非您不是在谈论字符类。

**编辑：**左括号*可以*解释为括号表达式，因此转义该括号可能更安全：

```
^[]\[()|a-zA-Z0-9]*$ 
```

# python - 是否可以在 matplotlib hexbin 图中命名 x 和 y 轴？

> ID：12397657
> 
> 赞同：1
> 
> 时间：2012-09-12T23:58:13.107
> 
> 标签：python, matplotlib

我可以生成这样的 hexbin 图（代码取自[http://matplotlib.org/examples/pylab_examples/hexbin_demo.html](http://matplotlib.org/examples/pylab_examples/hexbin_demo.html)）

```
import numpy as np
import matplotlib.cm as cm
import  matplotlib.pyplot as plt

n = 100000
x = np.random.standard_normal(n)
y = 2.0 + 3.0 * x + 4.0 * np.random.standard_normal(n)
xmin = x.min()
xmax = x.max()
ymin = y.min()
ymax = y.max()

plt.subplots_adjust(hspace=0.5)
plt.subplot(121)
plt.hexbin(x,y, cmap=cm.jet)
plt.axis([xmin, xmax, ymin, ymax])
plt.title("Hexagon binning")
cb = plt.colorbar()
cb.set_label('counts')

plt.subplot(122)
plt.hexbin(x,y,bins='log', cmap=cm.jet)
plt.axis([xmin, xmax, ymin, ymax])
plt.title("With a log color scale")
cb = plt.colorbar()
cb.set_label('log10(N)')

plt.show() 
```

有没有办法用轴名称标记 hexbin 的 x 和 y 轴？我希望“x-label”之类的内容显示在 x 轴编号下方，而“ylabel”显示在 y 轴编号的左侧。这将是颜色条上标签的补充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:55:04.273

您可以使用[`xlabel`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xlabel)和[`ylabel`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.ylabel)matplotlib 命令：

```
plt.xlabel('x-label')
plt.ylabel('y-label') 
```

# iphone - 播放最大扬声器电话音量，然后使用 AVAudioPlayer 重置为以前的音量 --- IOS

> ID：12397658
> 
> 赞同：2
> 
> 时间：2012-09-12T23:58:18.707
> 
> 标签：iphone, ios, audio, media-player, avaudioplayer

我已经能够将我的音频路由到扬声器电话，但它仍然无法以最大音量播放。我已经尝试过 [audioAlert setVolume:1.0] 并且它仍然保持在用户当前设置的音量。如果有人知道我做错了什么，我会非常感激。

这是我的代码：

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:NULL];

    UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

    NSURL* soundUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"HsTR_soundEFX_2-1" ofType:@"mp3"]];
   audioAlert= [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];
    audioAlert.delegate = self;
    [audioAlert setVolume:1.0];
    [audioAlert prepareToPlay];
    [audioAlert play]; 
```

感谢保罗佩里！

现在解决了：

我添加了一些额外的内容，以便使用以下代码将其设置回上一卷：

```
 AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:NULL];

    UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

    NSURL* soundUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"HsTR_soundEFX_2-1" ofType:@"mp3"]];
   audioAlert= [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];
    audioAlert.delegate = self;
    [audioAlert prepareToPlay];
    float maxVolume = 1.0;
    float currentVolume=[MPMusicPlayerController applicationMusicPlayer].volume;
    [[MPMusicPlayerController applicationMusicPlayer] setVolume:maxVolume];
    [audioAlert play];
   //set up timer to wait until audioAlert is finished playing,
   // and then call the line below to set the volume back to it's original setting
    [[MPMusicPlayerController applicationMusicPlayer]setVolume:currentVolume]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:13:41.710

这会将整个系统的音量重置为最大值。

浮动体积 = 1.0; [[MPMusicPlayerController applicationMusicPlayer] setVolume:volume];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:06:53.560

您如何首先将其初始化为 0，然后在将其`[audioAlert prepareToPlay]`设置回 1 之后：

```
[audioAlert prepareToPlay]
[audioAlert setVolume:1.0] 
```

# iphone - NSCountedSet 没有对象

> ID：12397660
> 
> 赞同：0
> 
> 时间：2012-09-12T23:59:05.607
> 
> 标签：iphone, cocoa, duplicates, nscountedset

我正在尝试计算数组中重复对象的数量。当我将数组传递给我的 NSCountedSet 函数时，它没有对象。从我看到的示例中，通常将 NSArray 传递给 NSCountedSet，而我传递的是 NSMutableArray。但是，我找不到任何说明不允许这样做的文档。

```
-(void)GetDays
{
       ...
       BOOL goodDuplicates = NO;
       NSMutableArray *mostDaysAttended = [[NSMutableArray alloc] init];
       mostDaysAttended = [self gatherDays];
       goodDuplicates  = [self checkDuplicatesforIndex:mostDaysAttended];
       ...

{

-(BOOL)checkDuplicatesforIndex: (NSMutableArray *)mostDaysAttended
{

    NSCountedSet *set   = [[NSCountedSet alloc] initWithArray:mostDaysAttended];

    for (id item in set)  //<== at this point "set" has zero objects
    ...
    return(...)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:41:07.033

我的猜测是 mostDaysAttended 正在被释放，所以当你调用 checkDuplicatesIndex 时，里面什么都没有。您可以通过在 NSCountedSet *set..... 行之前记录 mostDaysAttended 轻松检查这一点。如果确实如此，请为 mostDaysAttended 创建一个保留（或强）属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T16:55:14.473

这是“NSCountedSet”声明之后和“for”循环之前的代码。

```
 //INITIALIZE
  for( int g =0;g<=11;g++)
    indexCount[g]=0; 
```

一旦我删除了这个循环并将它放在函数开头的所有其他声明之前，代码就开始按预期工作。我不确定为什么这会影响集合中的对象数量，但确实如此。

# xml - 使用 Xquery 替换某个字符串的 xml 节点

> ID：12397662
> 
> 赞同：0
> 
> 时间：2012-09-12T23:59:16.060
> 
> 标签：xml, xquery, xquery-update

我想使用 xquery（更新工具）将元素的“~”替换为元素的值。这可能吗？

示例.xml

```
<entry>
<keyword>ace</keyword>
<example>~ card</example>
</entry> 
```

结果.xml

```
<entry>
<keyword>ace</keyword>
<example>ace card</example>
</entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:51:48.270

Xquery 下面会修改节点值。

```
for $i in /entry
  return replace($i/example, '~', $i/keyword); 
```

现在，如果您想用这个值更新节点，您应该让我们知道您正在使用哪个引擎运行 Xquery。

# ajax - 使用 jquery 动画/显示 div，而 ajax 加载更多结果

> ID：12397664
> 
> 赞同：0
> 
> 时间：2012-09-12T23:59:21.673
> 
> 标签：ajax, jquery

我有一个循环遍历多个唯一 ID 的页面，并使用 ajax 将信息加载到与数据库表中的行相对应的 div 中。因为需要创建的 div 比较多，每个 div 都包含相当多的信息，所以这需要相当长的时间。我想做的是将每个 div 附加到 dom 后对其进行动画/显示，从而允许循环在创建时继续附加/显示更多 div。

我的代码看起来像这样：

```
// loop section unique IDs
$.each(uniqueIDs, function(key, uniqueID)
{

    // call AJAX synchronously
    // append resulting information to page

    // show newly appended div
    $("#" + uniqueID).slideDown();

}); 
```

我遇到的问题是动画非常不一致。有时第一个 div 是动画的，而所有后续的 div 只是没有动画显示。有时所有的 div 都只是显示而没有动画。我相信必须有一个更严格的方法来做到这一点......

**编辑**我一直在同步调用 ajax 以保持 div 的正确顺序（否则 div 会按照它们完成的顺序附加到 dom）。我很高兴找到一个使用异步 ajax 调用的解决方案，它保留了原始顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:05:59.470

为每个异步调用使用一个对象数组[`$.Deffered`](http://api.jquery.com/category/deferred-object/)，然后将其传递给[`$.when()`](http://api.jquery.com/jQuery.when/)，其[`.done()`](http://api.jquery.com/deferred.done/)回调只会在*所有*延迟对象都被解析时触发，即，当*所有*异步操作完成时：

```
var uniqueIDs = [1, 2, 3, 4];
var $deferreds = [];            

$.each(uniqueIDs, function (i, elem) {
    $deferreds.push(
      $.ajax({
        // options
      }).done(function (data) {
      })
    );
});

$.when.apply($, $deferreds).done(function () {
   console.log(arguments); // arguments will contain the result of each asynchronous call in order
}); 
```

因此，您可以使用该回调`div`按顺序为您的 s 设置动画。

这是一个**[演示](http://jsfiddle.net/KfTsD/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:06:54.083

同步运行AJAX往往会对事物产生这种影响，导致浏览器挂起并等待请求完成，同时无法运行动画。你应该做的是这样的：

```
// loop section unique IDs
var queue = uniqueIDs.splice(0); // copy array
function runQueue()
{
    if(queue.length == 0) return;
    var uniqueID = queue.shift();
    myAjaxLoadFunction(uniqueId, function() {

        // show newly appended div
        $("#" + uniqueID).slideDown();
        runQueue();

    });

});
runQueue(); 
```

Ofc 你可以用 jQuery 函数调用替换 myAjaxLoadFunction，或者你自己的加载函数需要一个回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:12:46.563

如何在您的 HTML 中添加带有旋转轮加载图像的父 div。所以是这样的：

您可能想要确定 DIV 的大小并在之前对其进行样式设置，但总体而言，这就是我所说的

```
<html>
...
<body>
...
<div id="div1"><img src="loading.gif"/></div>
<div id="div1"><img src="loading.gif"/></div>
<div id="div1"><img src="loading.gif"/></div>
... 
```

javascript:

```
result = $.ajax(...)
$("your divs").each(function(index, value) {
  $(this).empty().append(result[index]);
}); 
```

类似的东西，其中 $(this) 是 div 而 result[index] 是您从 ajax 请求中获得的行。
基本上 .empty() 函数保证您加载的 png 将被删除，然后替换为您想要的数据。

祝你好运。

# ruby - 复合输出的归一化数据的简化查询

> ID：12397666
> 
> 赞同：0
> 
> 时间：2012-09-13T00:00:28.210
> 
> 标签：ruby, ruby-on-rails-3, rest, activerecord, database-normalization

在 Rails 3 应用程序中，我们有一个高度规范化的数据库模式，出于多种原因，这是必要的。此外，我们需要提供一些只读 RESTful 路由，其虚拟资源来自多个模型的“组合”（非规范化）数据，我们必须将结果呈现为 JSON 文档。

例如，我们会有像州、城市和邻里这样的模型，每个模型都有自己的数据和关联。“RESTful 资源”是 Neighborhood，但我们总是希望包含关联的州和城市的名称。因此，对 URI“” 的“GET”请求`/neighborhood/nm/albuquerque`将返回一个包含新墨西哥州阿尔伯克基所有社区的 JSON 数组，例如：

```
[{"state":"NM","city":"Albuquerque","neighborhood":"North Valley"},
 {"state":"NM","city":"Albuquerque","neighborhood":"Northeast Heights"}, //... ] 
```

但是，在 URI (" ") 中省略城市名称`GET /neighborhood/nm`将返回新墨西哥州所有城市中所有社区的列表。

**在这种情况下生成数据库查询的 Rails 3 首选方法是什么？**

我能想象的最直接的方法是生成一个自定义 SQL 查询，该查询从数据库中选择必要的数据并将结果记录作为 JSON 返回，而不执行任何 ActiveRecord 对象反序列化（因为我们只需要未经处理的原始数据），例如：

```
def neighborhood # our Action in the target Controller...
  state, city, hood = params[:state], params[:city], params[:hood]
  query = <<-__HERE__
    SELECT s.name AS state, c.name AS city, n.name AS neighborhood
    FROM states AS s, cities AS c, neighborhoods AS n
    WHERE n.city_id=c.id AND c.state_id=s.id
  __HERE__
  query += ' AND s.slug=' + ActiveRecord::Base.sanitize(state) if state
  query += ' AND c.slug=' + ActiveRecord::Base.sanitize(city) if city
  query += ' AND n.slug=' + ActiveRecord::Base.sanitize(hood) if hood
  query += ' ORDER BY state, city, neighborhood ASC'
  render :json => ActiveRecord::Base.connection.select_all(query)
end 
```

这个解决方案在概念上很简单，并且依赖于数据库来完成繁重的工作，但感觉明显不像 Rails。我尝试使用 Arel/AR 查询和“as_json”覆盖的组合来实现相同的效果，但经过一段时间和挫折后，我似乎无法正确（和高效）。

我是否在 Rails 3 中遗漏了一些重要的、新的和很酷的东西，或者这只是一种快速而肮脏的解决方案是正确的方法的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:26:39.400

您可能想尝试使用 json 构建器。几个railscasts：

[http://railscasts.com/episodes/322-rabl](http://railscasts.com/episodes/322-rabl)

[http://railscasts.com/episodes/320-jbuilder](http://railscasts.com/episodes/320-jbuilder)

做直接的 sql 有点不合规矩。如果您不需要性能，基本查询会更容易填充一些变量，然后使用构建器来制作 json。

这*不是*性能方面最有效的方式，但这通常不是 rails 的目标......开发速度和维护是。

如果您遇到性能问题，请在“解决”之前使用分析器来查找问题！

**编辑** 至于查询，您可以使用连接和包含。我假设州有_许多城市，城市有_许多社区。

```
query = Neighborhood.includes(:city => :state)
query = query.order('states.name, cities.name, neighborhoods.name ASC')
query = query.where("cities.name =?", params[:city]) if params[:city]
query = query.where("neighborhoods.name =?", params[:hood]) if params[:hood]
query = query.where("states.name =?", params[:state]) if params[:state] 
```

从那里您可以构建您的 json 数据...

```
query.each do |hood|
  # code to build json row using:   hood.name, hood.city.name, and hood.city.state.name
end 
```

更好的是，定义一些方法来帮助：

```
class Neighborhood ...
  def city_name
    city ? city.name : "No city"
  end

  def state_name
    (city && city.state) ? city.state.name : "No state"
  end
end 
```

有了这个，我现在看到一个建设者是矫枉过正的。只需映射一个哈希数组，然后调用 to_json：

```
query = Neighborhood.includes(:city => :state)
query = query.order('states.name, cities.name, neighborhoods.name ASC')
query = query.where("cities.name =?", params[:city]) if params[:city]
query = query.where("neighborhoods.name =?", params[:hood]) if params[:hood]
query = query.where("states.name =?", params[:state]) if params[:state]

json = query.map { |hood|
  {"state" => hood.state_name, "city" => hood.city_name, "neighborhood" => hood.name}
}.to_json 
```

（未经测试，但我很确定这很接近）

# complexity-theory - 使用单头磁带的双头磁带图灵机的在线仿真

> ID：12397670
> 
> 赞同：0
> 
> 时间：2012-09-13T00:01:10.600
> 
> 标签：complexity-theory, turing-machines, automata-theory

我有一个问题，但我还没有找到答案。我需要使用单头磁带对双头磁带图灵机进行在线模拟。我在网上找到了一些文章，说明一个单头磁带不足以解决这个问题，应该使用两个单头磁带进行模拟，但我无法准确模拟两个-head TM 使用这些单头磁带。有没有关于如何做到这一点的想法？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T16:07:09.600

这是一种可能的方法：

1.  从多轨图灵机开始。如果您以前没有见过这个，这是一个 TM，其中每个磁带单元被分割成多个不同的行，每个行可以包含一个独立的符号。这相当于普通的图灵机，因为只有有限多种可能的符号组合可以存储在磁带单元中，因此您可以构建磁带字母表，为每个符号设置不同的符号。

2.  让顶部轨道保存您的输入，并让底部轨道存储磁带头的位置（通过将空白标记为“无”，1 表示“磁带头 1 在这里”，2 表示“磁带头 2 在这里”，以及3 表示“两个磁带头都在这里”。

3.  要模拟一个步骤，请扫描输入并找到标记。每次这样做时，您都可以在有限状态控制中存储这些磁带磁头下的符号。只有有限的多种可能性。然后，重新扫描磁带并根据需要模拟移动磁头。

希望这可以帮助！

# sql - 缓冲区随执行时间而变

> ID：12397671
> 
> 赞同：1
> 
> 时间：2012-09-13T00:01:34.457
> 
> 标签：sql, oracle, buffer, execution-time

我想问一下缓冲区的意义。随着缓冲区的减少，我可以假设我已经减少了所需的 I/O，但我也可以说它也与执行时间有关吗？大多数情况下，我发现减少缓冲区会减少执行时间，但在少数情况下，即使我的缓冲区增加，我的执行时间也会减少。那可能吗？提前致谢！

PS：我正在使用 Oracle 11g RDBMS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:22:43.617

缓冲区的减少通常会但并不总是与更快的运行时间相关。肯定存在相关性，但相关性并不完美。

根据数据库是否可以简单地从 SGA 缓存中提取块、是否可以从文件系统缓存中读取、是否可以从 SAN 缓存中读取，或者是否真的可以需要物理读取。进行物理读取所需的时间在很大程度上取决于 SAN 的结构以及它是否将不同的块存储在更快或更慢的磁盘上。在许多现代 SAN 中，您可能有少量固态磁盘用于最常读取的块，一些快速硬盘驱动器用于通常读取的块，而较慢的硬盘驱动器用于不常读取的块，每个块都有自己的性能特征。

您完全有可能减少查询所执行的逻辑 I/O 数量，但更改 I/O 的性质，使其更有可能被缓存。例如，如果您有一个不断进行索引扫描的嵌套循环，则很可能大部分索引将相对较快地缓存在 SGA 中，这意味着您的大部分逻辑 I/O在该索引上执行操作最终会满足相对较快的缓冲区获取，只需从 SGA 中获取块。例如，涉及执行全表扫描的替代计划可能会执行较少的逻辑 I/O，但由于表中可能缓存的块相对较少，因此大部分 I/O 可能需要物理读取。完全有可能，在这种情况下，

然而，在实践中，人类能够准确预测哪些缓冲区可能需要物理读取以及哪些通常会从缓存中获得服务的情况相对较少。您的非生产环境几乎肯定没有与生产环境相同的缓存利用率模式，因为您在这些环境中运行的工作负载类型不同。即使在生产系统上，缓存的块集在一天中也会发生巨大变化，人类开发人员很少有理由知道或理解这些变化。因此，仅仅因为当您测试一个查询时，您发现它比等效查询获得更多缓冲区但运行得更快，这可能并不表明您会在生产中看到类似的模式。

此外，查询等待的不仅仅是 I/O。查询在 CPU 上等待，在网络事件上等待，在锁和闩锁以及其他序列化设备上等待。Buffer 仅测量 I/O，它不会尝试考虑任何其他类型的等待。因此，您还可能遇到以下情况：一个计划执行的 I/O 大大减少，但在 CPU 或网络或 RAC 缓存融合或其他一些事件上等待的时间大大延长，因此尽管在 I/O 上等待的时间要少得多，但它的执行时间要长得多。

# python - 使用 argparse 时，是否应该在自定义类型或操作中进行验证和初始化？

> ID：12397681
> 
> 赞同：7
> 
> 时间：2012-09-13T00:02:28.890
> 
> 标签：python, argparse

Python 2.7 的 argparse 为您提供了两个扩展点，您可以在其中控制命令行参数的解析方式：类型函数和操作类。

从内置类型和操作来看，最佳实践似乎是类型函数应该包含验证/初始化代码，并且操作应该关注将值存储到命名空间中。这种方法的问题是当您的类型检查代码具有副作用时。考虑这个简单的例子：

```
from argparse import ArgumentParser, FileType
argp = ArgumentParser()
argp.add_argument('-o', type=FileType('w'), default='myprog.out')
argp.parse_args(['-o', 'debug.out']) 
```

如果你运行它，你会发现 python 会在系统上打开*两个*文件，`myprog.out`并且`debug.out`. `debug.out`仅在用户不提供`-o`参数时才打开会更有意义。

稍微戳了一下，似乎 argparse 只会在传递的参数或 str 类型的默认参数上调用您的类型函数。如果您的类型检查器有副作用，这是不幸的，因为即使传递了一个值，它也会在默认情况下被调用。所以对于有副作用的初始化，也许在action中做会更好。这样做的问题是，如果您提供默认值，则不会调用该操作！

考虑以下代码：

```
from argparse import ArgumentParser, Action

def mytype(arg):
    print 'checking type for ' + repr(arg)
    return arg

class OutputFileAction(Action):
    def __call__(self, parser, namespace, values, option_string=None):
        print 'running action for ' + repr(values)
        try:
            outstream = open(values, 'w')
        except IOError as e:
            raise ArgumentError('error opening file ' + values)
        setattr(namespace, self.dest, outstream)

argp = ArgumentParser()
argp.add_argument('-o', type=mytype, action=OutputFileAction, default='myprog.out') 
```

现在尝试使用它：

```
>>> argp.parse_args([])
checking type for 'myprog.out'
Namespace(o='myprog.out')
>>> argp.parse_args(['-o', 'debug.out'])
checking type for 'myprog.out'
checking type for 'debug.out'
running action for 'debug.out'
Namespace(o=<open file 'debug.out', mode 'w' at 0x2b7fced07300>) 
```

谁命令*了这种*行为？有没有一种理智的方法可以让默认值的行为与用户传入的完全一样？或者在提供值时不检查默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:43:49.643

As far as I am aware, there is no "sensible" way to do this. Of course, it is trivial to leave the `type` conversion off and then postprocess the `Namespace` returned from `parse_args`:

```
args = argp.parse_args()
args.o = open(args.o,'w') 
```

but I suppose that isn't what you're looking for.

# c++ - 将结构类型的地址传递给 boost::thread？

> ID：12397686
> 
> 赞同：1
> 
> 时间：2012-09-13T00:03:23.247
> 
> 标签：c++, pointers, struct, boost-thread

使用 Boost 1.43 线程，以下是可编译的：

```
void MyClass::threadFn(...) { ... }
void MyClass::doFn(...) {
    ...
    boost::thread(&MyClass::threadFn, this, ...);
} 
```

但以下内容*不可*编译：

```
void MyClass:doFn(...) {
    ...
    struct MyStruct {
        MyStruct(...) { ... };
    }

    boost::thread(&MyStruct, ...);
} 
```

这产生`'MyClass::doFn::MyStruct': illegal use of this type as an expression`. 请注意，我不是试图将指针传递给 ; 的实例`MyStruct`。我试图传递类型本身，就像我传递函数指针一样，这样`boost::thread`将调用该类型的构造函数。

根据[Boost 1.43 线程规范](http://www.boost.org/doc/libs/1_43_0/doc/html/thread/thread_management.html)：

> 通过传递可调用类型的对象来启动新线程

那么如何将`struct`类型的地址传递给`boost::thread`函数（AFAIK 这也适用于`boost::bind`）？

[进一步阅读如何使用函数来实现这一点](https://stackoverflow.com/questions/9361244/error-c2064-term-does-not-evaluate-to-a-function-taking-0-arguments-thread-hpp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:14:48.253

我不太确定目的是什么，但以下会调用`MyStruct()`：

```
boost::thread(boost::bind(boost::value_factory<MyStruct>())); 
```

您也可以传递参数，例如`MyStruct(int i, int j)`：

```
boost::thread(boost::bind(boost::value_factory<MyStruct>(), 1, 2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:16:16.840

MyStruct 不是可调用类型。您需要定义一个对 MyStruct 进行操作的函数，然后使用该函数来实例化线程。

线程是一个执行上下文，要实例化一个线程，您需要一组指令来执行它。

在 Java 中，我们以 Runnable 的形式看到这一点，它用于实例化一个 Thread，然后可以对其进行`start()`编辑。

在带有 Boost 的 C/C++ 中，您必须使用函数指针。

术语“可调用类型”大致翻译为“可与函数指针交换的类型”。

如果您想对任意结构进行操作，例如在您的示例中`MyStruct`，您首先必须定义一组对该类型进行操作的指令（一个函数）。

一旦你知道了这组指令，你就可以传递一个指向该函数的指针来实例化一个线程，然后使用 MyStruct 的任意实例运行该线程。

代码如下：

```
struct MyStruct {
        MyStruct(...) { ... }
    };

int frobnicateMyStruct( const MyStruct& msr ) {

    /* some operations on msr */

    return 0;
}    

void foo() {

    MyStruct myStructInstance;
    boost::thread(&frobnicateMyStruct, myStructInstance);

    /* ... */

    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:12:10.660

代替：

```
boost::thread(&MyStruct, ...); 
```

调用一个实例：

```
boost::thread(MyStruct(), ...); 
```

# .htaccess - 为什么这个 RewriteRule 不起作用？

> ID：12397693
> 
> 赞同：0
> 
> 时间：2012-09-13T00:05:12.547
> 
> 标签：.htaccess, mod-rewrite, cookies, url-rewriting

我有一个 .htaccess RewriteRule 将用户重定向到`/coming_soon/`如果他们没有`dev`cookie，但由于某种原因，即使我有 cookie，它也会重定向我。这条规则昨晚正常工作，直到我添加了另一个条件以允许对我的 Google 网站管理员工具验证文件的请求通过。这是我的 .htaccess 的内容：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_COOKIE} !^\dev=$ [NC]
RewriteCond %{REQUEST_URI} !/google********.html
RewriteRule ^(.*)$ coming_soon [QSA,L] 
```

老实说，我并不真正了解 RewriteRules 的语法，其中大部分是我从互联网上搜索的，这使得调试变得非常困难。

我在本地设置了 cookie 并验证它存在，所以有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:15:28.557

你有一个杂散的反斜杠：

```
# right hree ----------------v
RewriteCond %{HTTP_COOKIE} !^\dev=$ [NC] 
```

这使得它期待一个数字而不是“d”。

另请注意，这仅适用于只有 1 个 cookie 且恰好是`dev=`. 您可能希望通过将正则表达式更改为：

```
RewriteCond %{HTTP_COOKIE} !dev=(.*) [NC] 
```

# tsql - 查询以获取所有带参数的 SSRS 订阅列表

> ID：12397694
> 
> 赞同：11
> 
> 时间：2012-09-13T00:05:25.540
> 
> 标签：tsql, reporting-services

我已经搜索并尝试了几个小时来获取一个查询，该查询为我提供了来自 SSRS 服务的所有当前订阅以及参数及其值，以便可以在新服务器上重新创建它们（修剪后）。

例如，一个简单的报告可能是 HoursByDepartment，它采用三个参数：

```
@From =Today - 7 days (Default)
@To   = Today (Default)
@Dept = 2 (part of subscription) 
```

我想得到的是这些方面的东西（或者可以让我创建报告的东西）

```
Report            ParamName   ParamValue    Default
HoursByDepartment From        Today-7days    True
HoursByDepartment To          Today          True
HoursByDepartment Dept        2              False 
```

或者

```
Report             Param1Name   Param1Value   Param1Def   Param2Name   Param2Value    Param2Def     
HoursByDepartment  From         Today-7days   True        To           Today          True 
```

我对 XSl 非常满意，所以如果我能得到类似的东西，我可以使用它：

```
<subid>
    <report>
        <ParameterValues>
            <ParameterValue>
                <Name>MinAvailable</Name>
                <Value>10000</Value>
            </ParameterValue>
            <ParameterValue>
                <Name>OwnerIDs</Name>
                <Value>0</Value>
            </ParameterValue>
            <ParameterValue>
                <Name>ShowCosts</Name>
                <Value>False</Value>
            </ParameterValue>
            <ParameterValue>
                <Name>MinValue</Name>
                <Value>0</Value>
            </ParameterValue>
        </ParameterValues>
    </report>
</subid> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T15:12:19.673

这个脚本应该让你有一个好的开始。此查询将为每个报表订阅的每个参数返回一行，或者为不使用参数的订阅仅返回一行。如果您的偏好是转换它，您可能需要重新编写脚本以将其转换为 xml 格式。

这来自[列出订阅的 SSRS 报告，包括参数及其值](http://www.sqlservercentral.com/scripts/Reporting+Services+%28SSRS%29/69263/)（不确定我更改了多少原始文件，如果有的话。）

```
WITH
[Sub_Parameters] AS
(
SELECT 
[SubscriptionID],
[Parameters] = CONVERT(XML,a.[Parameters])
FROM [Subscriptions] a
),
[MySubscriptions] AS
(
SELECT DISTINCT
[SubscriptionID],
[ParameterName] = QUOTENAME(p.value('(Name)[1]', 'nvarchar(max)')),
[ParameterValue] = p.value('(Value)[1]', 'nvarchar(max)')
FROM 
[Sub_Parameters] a
CROSS APPLY [Parameters].nodes('/ParameterValues/ParameterValue') t(p)
),
[SubscriptionsAnalysis] AS
(
SELECT
a.[SubscriptionID],
a.[ParameterName],
[ParameterValue] = 
(SELECT
STUFF(( 
SELECT [ParameterValue] + ', ' as [text()]
FROM [MySubscriptions]
WHERE 
[SubscriptionID] = a.[SubscriptionID]
AND [ParameterName] = a.[ParameterName]
FOR XML PATH('')
),1, 0, '')
+'')
FROM [MySubscriptions] a
GROUP BY a.[SubscriptionID],a.[ParameterName]
)
SELECT
a.[SubscriptionID],
c.[UserName] AS Owner, 
b.Name,
b.Path,
a.[Locale], 
a.[InactiveFlags], 
d.[UserName] AS Modified_by, 
a.[ModifiedDate], 
a.[Description], 
a.[LastStatus], 
a.[EventType], 
a.[LastRunTime], 
a.[DeliveryExtension],
a.[Version],
e.[ParameterName],
LEFT(e.[ParameterValue],LEN(e.[ParameterValue])-1) as [ParameterValue],
SUBSTRING(b.PATH,2,LEN(b.PATH)-(CHARINDEX('/',REVERSE(b.PATH))+1)) AS ProjectName
FROM 
[Subscriptions] a 
INNER JOIN [Catalog] AS b
ON a.[Report_OID] = b.[ItemID]
LEFT OUTER JOIN [Users] AS c
ON a.[OwnerID] = c.[UserID]
LEFT OUTER JOIN [Users] AS d
ON a.MODIFIEDBYID = d.Userid
LEFT OUTER JOIN [SubscriptionsAnalysis] AS e 
ON a.SubscriptionID = e.SubscriptionID; 
```

但是，如果这是从 2005 到 2008 的升级，您可能需要考虑[使用此工具](http://www.mssqltips.com/sqlservertip/2627/migrating-sql-reporting-services-to-a-new-server/)。如果您要从此服务器中删除 SSRS 并移动到使用相同版本的不同服务器，则最好按照[Microsoft 此处的说明](http://technet.microsoft.com/en-us/library/ms156421.aspx)移动整个 reportserver 和 reportservertempdb 数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-21T14:29:17.067

下面是更新后的@dev_etter 查询的一个版本以返回扩展设置。

```
WITH
[Sub_Parameters] AS
    (SELECT 
        [SubscriptionID],
        [Parameters] = CONVERT(XML,a.[Parameters]),
        [ExtensionSettings] = CONVERT(XML,a.[ExtensionSettings])
     FROM [Subscriptions] a
    )

, [MySubscriptions] AS (
    SELECT --DISTINCT 
        [SubscriptionID],
        [ParameterName] = QUOTENAME(p.value('(Name)[1]', 'nvarchar(max)')),
        [ParameterValue] = p.value('(Value)[1]', 'nvarchar(max)')
    FROM [Sub_Parameters] a
    CROSS APPLY [Parameters].nodes('/ParameterValues/ParameterValue') t(p)
    UNION
    SELECT --DISTINCT 
        [SubscriptionID],
        [ExtensionSettingName] = QUOTENAME(e.value('(Name)[1]', 'nvarchar(max)')),
        [ExtensionSettingValue] = e.value('(Value)[1]', 'nvarchar(max)')
    FROM [Sub_Parameters] a
    CROSS APPLY [ExtensionSettings].nodes('/ParameterValues/ParameterValue') t(e)
    )

, [SubscriptionsAnalysis] AS (
    SELECT
        a.[SubscriptionID],
        a.[ParameterName],
        [ParameterValue] =
              (SELECT STUFF((SELECT [ParameterValue] + ', ' as [text()] 
               FROM [MySubscriptions] 
               WHERE [SubscriptionID] = a.[SubscriptionID] 
                   AND [ParameterName] = a.[ParameterName] FOR XML PATH('')),1, 0, '')+'')
    FROM [MySubscriptions] a
    GROUP BY a.[SubscriptionID],a.[ParameterName]
    )

SELECT
    a.[SubscriptionID],
    c.[UserName] AS [Owner], 
    b.[Name],
    b.[Path],
    a.[Locale], 
    a.[InactiveFlags], 
    d.[UserName] AS [Modified_by], 
    a.[ModifiedDate], 
    a.[Description], 
    a.[LastStatus], 
    a.[EventType], 
    a.[LastRunTime], 
    a.[DeliveryExtension],
    a.[Version],
    e.[ParameterName],
    LEFT(e.[ParameterValue],LEN(e.[ParameterValue])-1) as [ParameterValue],
    SUBSTRING(b.[PATH],2,LEN(b.[PATH])-(CHARINDEX('/',REVERSE(b.[PATH]))+1)) AS [ProjectName]
FROM [Subscriptions] a 
INNER JOIN [Catalog] AS b ON a.[Report_OID] = b.[ItemID]
LEFT OUTER JOIN [Users] AS c ON a.[OwnerID] = c.[UserID]
LEFT OUTER JOIN [Users] AS d ON a.[ModifiedByID] = d.[Userid]
LEFT OUTER JOIN [SubscriptionsAnalysis] AS e ON a.[SubscriptionID] = e.[SubscriptionID]
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-27T13:20:41.590

这对于评估给定报告的订阅中特定参数的使用非常有帮助，尤其是当参数变为必需时，查看哪些订阅需要更新。我采用了@Chumz 的查询，因为它比@dev_etter 的更易读，并对其进行了修改以显示数据驱动订阅的参数，其中参数 XML 中`<Value>`只有 a ：`<Field>`

```
WITH
[Sub_Parameters] AS
    (SELECT 
        [SubscriptionID],
        [Parameters] = CONVERT(XML,[Parameters]),
        [ExtensionSettings] = CONVERT(XML,[ExtensionSettings])
     FROM [Subscriptions]
    )

, [MySubscriptions] AS (
    SELECT --DISTINCT 
        [SubscriptionID],
        [ParameterName] = QUOTENAME(p.value('(Name)[1]', 'nvarchar(max)')),
        [ParameterValue] = ISNULL(p.value('(Value)[1]', 'nvarchar(max)'),p.value('(Field)[1]', 'nvarchar(max)')),
        [ParameterType] = CASE WHEN p.value('(Field)[1]', 'nvarchar(max)') IS NOT NULL THEN 'Query' ELSE 'Static' END
    FROM [Sub_Parameters] sp
    CROSS APPLY [Parameters].nodes('/ParameterValues/ParameterValue') t(p)
    UNION
    SELECT --DISTINCT 
        [SubscriptionID],
        [ExtensionSettingName] = QUOTENAME(e.value('(Name)[1]', 'nvarchar(max)')),
        [ExtensionSettingValue] = ISNULL(e.value('(Value)[1]', 'nvarchar(max)'),e.value('(Field)[1]', 'nvarchar(max)')),
        [ExtensionSettingType] = CASE WHEN e.value('(Field)[1]', 'nvarchar(max)') IS NOT NULL THEN 'Query' ELSE 'Static' END
    FROM [Sub_Parameters] sp
    CROSS APPLY [ExtensionSettings].nodes('/ParameterValues/ParameterValue') t(e)
    )

, [SubscriptionsAnalysis] AS (
    SELECT
        ms.[SubscriptionID],
        ms.[ParameterName],
        ms.[ParameterType],
        [ParameterValue] =
              (SELECT STUFF((SELECT [ParameterValue] + ', ' as [text()] 
               FROM [MySubscriptions] 
               WHERE [SubscriptionID] = ms.[SubscriptionID] 
                   AND [ParameterName] = ms.[ParameterName] FOR XML PATH('')),1, 0, '')+'')
    FROM [MySubscriptions] ms
    GROUP BY ms.[SubscriptionID],ms.[ParameterName],ms.[ParameterType]
    )

SELECT
    s.[SubscriptionID],
    o.[UserName] AS [Owner], 
    c.[Name],
    c.[Path],
    s.[Locale], 
    s.[InactiveFlags], 
    m.[UserName] AS [Modified_by], 
    s.[ModifiedDate], 
    s.[Description], 
    s.[LastStatus], 
    CASE WHEN DATALENGTH(s.[DataSettings]) IS NULL THEN 'False' ELSE 'True' END AS [IsDataDriven],
    s.[EventType], 
    s.[LastRunTime], 
    CASE s.[DeliveryExtension] WHEN 'Report Server Email' THEN 'Email' WHEN 'Report Server FileShare' THEN 'File Drop' ELSE s.[DeliveryExtension] END AS SubscriptionType,
    sa.[ParameterName],
    sa.[ParameterType],
    LEFT(sa.[ParameterValue],LEN(sa.[ParameterValue])-1) as [ParameterValue]
FROM [Subscriptions] s
INNER JOIN [Catalog] AS c ON s.[Report_OID] = c.[ItemID]
LEFT OUTER JOIN [Users] AS o ON s.[OwnerID] = o.[UserID]
LEFT OUTER JOIN [Users] AS m ON s.[ModifiedByID] = m.[Userid]
LEFT OUTER JOIN [SubscriptionsAnalysis] AS sa ON s.[SubscriptionID] = sa.[SubscriptionID]; 
```

# wcf-client - 调用 wcf 函数，总是得到“Internet Explorer 无法显示网页”消息

> ID：12397696
> 
> 赞同：2
> 
> 时间：2012-09-13T00:05:28.677
> 
> 标签：wcf-client

希望有人给我任何想法如何处理这个

我添加了一个服务引用并想像`GetAllObjects()`在 C# 中那样调用一个函数，它应该

```
DataServiceClient dataClientService = new DataServiceClient();
Object[] adlist = dataClientService.GetAllObjects(startdateTime, enddateTime); 
```

错误是

> *窗口收到 HTTP 错误消息：来自检测到的“localhost”的 403(Forbidden)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:07:11.217

您的 WCF 服务客户端指向的 URL 可能不正确。尝试使用[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)连接到您的服务。

# jquery - 如何在 Jquery 中切换选中的单选按钮？

> ID：12397704
> 
> 赞同：0
> 
> 时间：2012-09-13T00:07:27.470
> 
> 标签：jquery, radio-button, draggable

我创建了两个单选按钮：

```
<form>
        <p><input type="radio" name="center" value="center">Center</p>
        <p><input type="radio" name="right" value="right">Lower Right</p>
    </form> 
```

和一个用于移动 div 位置的 jquery 脚本，它正在工作，但我有两个问题：

1）当我选中一个单选按钮时，当我选中另一个单选按钮时，它不会被取消选中，因为我使用了不同的名称，我将需要点击事件。

2）中心位置和右下角是硬编码的。

任何想法将不胜感激。

```
<script>
            $(function(){
                $(init);
                function init(){
                    $('#target').draggable();
                }
                $('input[name=center]:radio').click(function(){
                    $('#target').css({
                        position:'absolute',
                        top:200 + 'px',
                        left:45 + 'px'
                    });
                });
                $('input[name=right]:radio').click(function(){
                    $('#target').css({
                        position:'absolute',
                        top:550 + 'px',
                        right:200 + 'px'
                    });
                });
            });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:14:13.767

使用 ID 属性来区分单击事件处理程序中的元素。保持单选按钮名称相同。这样，您就不必破解解决方案；您可以只使用浏览器的默认功能：

```
<form>
    <p><input type="radio" id="center" name="someFormValue" value="center" />Center</p>
    <p><input type="radio" id="right" name="someFormValue" value="right" />Lower Right</p>
</form> 
```

# magento - Magento 从页脚链接中删除 SEO 术语和高级搜索

> ID：12397708
> 
> 赞同：3
> 
> 时间：2012-09-13T00:07:56.727
> 
> 标签：magento, magento-1.7

我在互联网上看到了很多解决方案，但考虑到 Magento 的向上兼容性，它们似乎都不完整。

我想从**footer_links**参考中删除“热门搜索词”和“高级搜索”链接。

因为我希望我的站点准备好升级，所以我想通过 local.xml 来做到这一点，而不是通过将 catalogsearch.xml 复制到本地版本，因为我认为这不是向上兼容的。我已经看到相关 .phtml 文件的一些更改，但我也认为这不是解决此问题的正确方法，应该可以通过 local.xml 对吗？

catalogsearch.xml 中的块中没有“名称”属性，如下所示：

```
 <reference name="footer_links">
        <action method="addLink" translate="label title" module="catalogsearch" ifconfig="catalog/seo/search_terms">
            <label>Search Terms</label>
            <url helper="catalogsearch/getSearchTermUrl" />
            <title>Search Terms</title>
        </action>
        <action method="addLink" translate="label title" module="catalogsearch">
            <label>Advanced Search</label>
            <url helper="catalogsearch/getAdvancedSearchUrl" />
            <title>Advanced Search</title>
        </action>
    </reference> 
```

我应该如何解决这个问题？

编辑：页脚中的“站点地图”链接同样重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T06:37:23.857

嗨，将此代码放在您的主题 local.xml 文件中，不要忘记删除缓存。这是在 CE 1.7.0.2 中测试的

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <default>
        <reference name="footer_links">
            <!-- Remove 'Site Map' -->
            <action method="removeLinkByUrl"><url helper="catalog/map/getCategoryUrl" /></action>
             <!-- Remove 'Search Terms' Link -->
            <action method="removeLinkByUrl"><url helper="catalogsearch/getSearchTermUrl" /></action>
             <!-- Remove 'Advanced Search' -->
            <action method="removeLinkByUrl"><url helper="catalogsearch/getAdvancedSearchUrl" /></action>
    </reference>
 </default>
</layout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T11:16:42.697

在布局文件夹内的所有 xml 文件中搜索：

**应用程序/设计/前端/主题/名称/布局/*.xml**

您将看到有多个文件使用 XML 添加链接到页脚链接块。您可以根据需要简单地注释掉 addLink 标签

```
<!--
<action method="addLink" translate="label" module="tag">
        <name>tags</name><path>tag/customer/</path><label>My Tags</label>
</action>
--> 
```

# python - 定义具有大量属性的 Python 类 - 样式

> ID：12397712
> 
> 赞同：8
> 
> 时间：2012-09-13T00:08:41.890
> 
> 标签：python, class, styles

我有一个具有许多属性的类。有人可以澄清设置属性（如下面的 a、b、c 和 x、y、z）之间的区别。我知道，如果您要输入参数，它们显然必须在**init**中，但是，仅用于设置一些默认变量，这是首选，优缺点是什么。

```
class Foo(object):
    a = 'Hello'
    b = 1
    c = False
    def __init__(self):
        self.x = 'World'
        self.y = 2
        self.z = True 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T00:15:48.883

变量`a`、`b`和`c`是类变量。它们在首次创建类时被评估和设置一次。变量`x`、`y`和`z`是实例变量，只要实例化该类的对象，就会对其进行评估和设置。

通常，如果类的每个实例都将使用相同的值，则使用类变量，并且只需要计算一次。您将实例变量用于该类的每个实例将不同的变量。

您可以通过实例变量语法访问类变量`self.a`，但有问题的对象在类的所有实例之间共享。这在使用不可变数据类型（如整数或字符串）时影响不大，但在使用可变数据类型（如列表）时，追加到`self.a`会导致所有实例看到新追加的值。

IDLE 中的一些示例可能有助于理解这一点：

```
>>> class Foo(object):
    a = 'Hello'
    b = []
    def __init__(self):
        self.y = []

>>> instance_1 = Foo()
>>> instance_2 = Foo()
>>> instance_1.a
'Hello'
>>> instance_2.a
'Hello'
>>> instance_1.a = 'Goodbye'
>>> instance_1.a
'Goodbye'
>>> instance_2.a
'Hello'
>>> instance_1.b
[]
>>> instance_2.b.append('12345')
>>> instance_1.b
['12345']
>>> instance_2.y
[]
>>> instance_2.y.append('abcde')
>>> instance_2.y
['abcde']
>>> instance_1.y
[] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T00:43:18.117

使用类属性为您打算成为特定于实例的数据提供默认值的主要缺点是，默认值将在类的所有实例之间共享，直到值被更改。例如：

```
class Foo(object):
    a = []

foo1 = Foo()
foo2 = Foo()

foo1.a.append(123)

foo1.a # [123]
foo2.a # [123] 
```

但是，以下将按预期工作：

```
class Bar(object):
    a = 123    

bar1 = Bar()
bar2 = Bar()

bar1.a = 456

bar2.a # 123 
```

为避免在使用此技术时出现此问题，您应该只使用它来设置*不可变*值的默认值。（例如数字、字符串、元组……）

Python 以这种方式运行的原因是，当您使用以下命令访问属性时：

```
foo.bar 
```

然后`bar`是先在对象中查找`foo`。如果在对象中找不到名称 in （即 in `foo.__dict__`），则在该对象的类型中查找名称。例如，这种机制是方法查找工作方式的一部分。（如果您查看`__dict__`对象的 ，您会注意到它的方法不存在。）

其他小问题是，当它们打算特定于实例时，这会通过类型对象公开默认值；并且如果您有任何默认值，它将混合特定于类的属性（如常量）的定义。前者的推论是，这将允许您稍后通过分配给类属性为尚未更改值的所有对象重新定义默认值。（这可能有用，也可能令人困惑；对可变“全局”变量的预防措施同样适用。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T00:19:00.463

正如您声明的那样，a、b 和 c 将可用，而无需创建 Foo 的实例。
例如，你可以说：

```
Foo.a = "Goodbye" 
```

相反，在创建 Foo 的实例之前不会创建 x、y 和 z，它们特定于该实例：

```
bar = Foo()
bar.x = 42 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T00:39:25.197

这个问题被问了无数遍……

`a,b,c`是在所有实例之间共享的类变量，一个很好的用途将是一个计数器来计算已创建的此类的所有出现次数，`x,y,z`是属于该单个实例的实例变量，因此`self`用于设置它们......

请注意，您实际上可以像`self.a = 3`这样隐藏类变量并不会改变`a`而是隐藏它......并且让一些人感到惊讶。

演示：

```
>>> class Foo(object):
...     a = 3
...     def __init__(self):
...         self.x = 6
... 
>>> Foo.a
3
>>> b = Foo()
>>> b.a = 5
>>> b.a
5
>>> Foo.a
3
>>> b.a
5
>>> Foo.a = 9
>>> Foo.a
9
>>> b.a
5
>>> c = Foo()
>>> c.a
9 
```

# objective-c - UIActionSheet 上的 UIDatePicker 不适用于 ipad 4.3

> ID：12397714
> 
> 赞同：0
> 
> 时间：2012-09-13T00:08:57.853
> 
> 标签：objective-c, ipad, ios4, uipickerview, uiactionsheet

一直在论坛里翻找，找不到答案，所以发帖。我有几个应用程序使用带有 UIPickerView 或 UIDatePickerView 的 UIActionSheet 来提示用户输入。这些输入用于配置值。所以提示出现在 ipad 的弹出窗口之上。

这段代码在 ipad 和 iphone 5 上运行良好，iphone 4.3 也很喜欢。ipad 4.3 根本不工作。行为很奇怪。PickerView 也不会出现（只有顶部的标题，如“Hour”和“Min”）。或者它在左侧显示为一个 10 像素宽的块，而无法与之交互或使用它。

截图和代码如下。有任何想法吗？下面的代码生成第一个屏幕截图外观。第一个屏幕截图代码几乎相同，但使用 UIPickerView 这些是从模拟器中获取的，但我让用户在他们的物理设备上报告了同样的问题。

在此先感谢 - 凯文

![只有标题的弹出框](../Images/1e7954fe7d7e14c4b25d72aff0e118ed.png)

![带有侧面小部件奇怪的弹出框](../Images/ce1f47baacf1e0d525d71b875678083d.png)

```
// create enough space for the UIPicker to show up above the selection button
NSString *title = @"\n\n\n\n\n\n\n\n\n\n\n\n";
if ((UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation)) && 
    (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad)) {
    title = @"\n\n\n\n\n\n\n\n\n";
}

UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:title delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:NSLocalizedString(@"Choose", @"Click to finilize Value - Timer"), nil];
[actionSheet showInView:self.view];

UIDatePicker *pickerView = [[UIDatePicker alloc] init];
[pickerView setDatePickerMode: UIDatePickerModeCountDownTimer];
if (timerInterval == 0) timerInterval = 5;
[pickerView setMinuteInterval: timerInterval];
[pickerView setCountDownDuration: [timerRec.timerDuration intValue]];
[actionSheet addSubview:pickerView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:27:13.613

`UIActionSheets`仅用于按钮。即使它们可以在 iPhone 上添加日期选择器，但它们不能在 iPad 上工作。如果您想继续使用操作表来保存 datePicker，则需要创建自定义视图或在 popOver 中显示您的视图。

我遇到了同样的问题。

# pdf - ABCpdf 中的渲染选项未正确保存

> ID：12397715
> 
> 赞同：1
> 
> 时间：2012-09-13T00:08:59.420
> 
> 标签：pdf, abcpdf, cmyk

我在这个网站上看到了一些 ABCpdf 问题，但还没有看到这个。我正在开发一个需要带有一些相当特定选项的 PDF 输出的项目。ABCpdf 似乎能够通过他们的 API 提供这个，但文档令人困惑和/或不完整。

```
using (var xpsStream = (MemoryStream)xps.Write(doc))
{
    xpsStream.Position = 0;
    pdfDoc.Clear();

    pdfDoc.Read(xpsStream, new XReadOptions
    {
        FileExtension = "xps"
    });

    pdfDoc.Rendering.DotsPerInch = 72;
    pdfDoc.Rendering.ColorSpace = XRendering.ColorSpaceType.Cmyk;
    pdfDoc.Rendering.IccCmyk = "device";

    pdfDoc.Save(stream);
} 
```

这会呈现一个没有设置呈现属性的 PDF。文档确实指出，为了保存渲染属性，必须通过 XRendering 类中的 Save() 方法保存它们。所以我必须做类似的事情：

```
 pdfDoc.Rendering.DotsPerInch = 72;
    pdfDoc.Rendering.ColorSpace = XRendering.ColorSpaceType.Cmyk;
    pdfDoc.Rendering.IccCmyk = "device";
    pdfDoc.Rendering.Save("blah", stream);   // they want a "name" argument 
```

他们文档中的 name 参数被描述为“*用于确定所需图像类型的虚拟文件名。* ”后来他们说“*可以使用的文件扩展名是 .TIF、.TIFF、.JPG、.GIF、. PNG、.BMP、.JP2、.EMF、.PS 和 .EPS。* "

然后在后一个版本的代码运行后，我确实得到了输出，但它不是 PDF，它是 TIF、JPG 或我从该列表中选择的任何内容。如果我说“mom.pdf”，则会引发错误。这很糟糕，因为他们在 XRendering 中对 Save() 方法的描述是“*使用此方法呈现 PDF* ” 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:27:19.437

这里有两个不同的东西。

1) Doc.Save 方法，将文档保存为 PDF、XPS 或其他类似文档格式。

2) 将当前页面的当前部分呈现为 TIFF 或 JPEG 等图像格式的 Doc.Rendering.Save。

Doc.Rendering 属性用于控制渲染。不保存文档。

为了控制保存文档，您需要 Doc.SaveOptions。

你不能混合和匹配两者。

所以...

在我看来，从您的代码来看，您要做的是导入 XPS 文档并将其转换为 CMYK。

这样做的方法是在使用 Doc.Save 保存文档之前更改文档的颜色空间。

要更改 PDF 的色彩空间，您需要使用 RecolorOperation 类。这将允许您将文档的颜色空间更改为 RGB、CMYK、灰度、ICC / ICM 或任何您喜欢的颜色。

如果我错了，那么大概您希望以 TIFF、JPEG、JPEG 2000、PSD 或类似格式输出 CMYK。为此，您需要使用 doc.Rendering 选项来控制色彩空间和位深度（每个组件 8 位或 16 位），然后调用 doc.Rendering.Save。

# javascript - Javascript / DOMImageObject ondata 事件

> ID：12397720
> 
> 赞同：0
> 
> 时间：2012-09-13T00:09:44.577
> 
> 标签：javascript, html, canvas

是否有可能（或有技术）为**DOM Image Element**`image.ondata`获取事件客户端？又名，类似于.**`onload`**

 ****问题上下文**
标准'jpeg'从上到下渲染到浏览器图像元素中，一次像素行。玩这个会很有趣：动画向下滑动；一次绘制块。

**可能**
的解决方案 从服务器获取 base64 或二进制数据并在 Canvas 元素上呈现。还有其他想法吗？以前有人这样做吗*？

**是的，这是作弊，但如果你已经这样做了，它会省去我重新发明轮子的麻烦。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:20:44.973

当图像数据到达时，我不知道如何对图像进行自定义渐进式渲染。您可以做的是不显示图像，等待整个图像加载（通过`onload`事件），然后自定义显示图像。

该自定义显示可以通过多种方式完成，例如许多可用于浏览器的基于 javascript/CSS 的幻灯片。

1.  CSS 过渡可用于进行各种渲染（在现代浏览器中）。IE 有它自己的一组过滤器转换，可以在 IE 中使用（因为它还没有 CSS3 转换）。
2.  可以结合使用图像大小和图像上方对象的移动/大小来构建基于 Javascript 的过渡。例如，你可以做幻灯片、擦拭、百叶窗等......
3.  您可以使用画布自己绘制图像的任何部分。**

# xml - XML 数据类型方法“value”的参数 1 必须是字符串字面量

> ID：12397722
> 
> 赞同：5
> 
> 时间：2012-09-13T00:10:15.597
> 
> 标签：xml, tsql

我已通读 SO：[XML 数据类型方法“值”必须是字符串文字](https://stackoverflow.com/q/11029674/62576)，但我的问题有点不同。我在一个变量中有一些 xml，我想把它分开并给出一条路径。最初我试过这个：

```
declare @x xml
select @x = '....'
select @x.value('(' + @path + ')[1]', 'varchar(max)') 
```

但是，当然，这失败了。然后我找到了 sql:variable 并尝试了这个：

```
select @x.value('(sql:variable("@path"))[1]', 'varchar(max)') 
```

但这奇怪地返回了@path 的值（为什么？）。我一直在弄乱它，但无法让它做正确的事情。

有人想吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:12:59.873

您的选择返回值 of`@path`因为`sql:variable()`返回一个文字值，因此实际上您是在要求 SQL 服务器`@path`从文档中选择文字值，它会这样做。我知道做你想做的事情的唯一方法是使用动态 SQL，如下所示：

```
declare @xml xml = '
<root>
    <element attr="test">blah</element>
</root>';

declare @p nvarchar(max) = '(//element/text())[1]';
declare @sql nvarchar(max) 
    = 'select @x.value(''' + @p + ''', ''nvarchar(max)'')';

exec sp_executesql @sql, @parameters = N'@x xml', @x = @xml; 
```

但我应该警告你，这不是很好的做法（想想 SQL 注入、验证输入等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T23:21:59.957

[在 Microsoft 网站上wBob](http://goo.gl/d3PtG)的帮助下，我现在有了一个干净的解决方案。当然，性能是一个问题，因为整个文档将被映射为单一路径，但改进留给读者作为建议的可能性:)

```
if object_id('VMConfigVal') is not null
drop function VMConfigVal
go
create function VMConfigVal(@x xml, @path varchar(max))
returns nvarchar(max)
as
begin
    declare @ret nvarchar(max)

    ;with cte as
    (
    select  value = x.c.value('.', 'varchar(50)')
    ,       path = cast ( null as varchar(max) )
    ,       node = x.c.query('.')
    from    @x.nodes('/*') x(c)
    union all
    select  n.c.value('.', 'varchar(50)')
    ,       isnull( c.path + '/', '/' )
        +       n.c.value('local-name(.)', 'varchar(max)')
    ,       n.c.query('*')
    from    cte c
    cross   apply c.node.nodes('*') n(c)
    )
    select @ret = value from cte where path = @path
    return @ret
    end
go 
```

所以我现在可以做类似的事情：

```
select dbo.VMConfigVal(MyXMLConfig, '/hardware/devices/IDE/ChannelCount')
from someTable 
```

甜的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:23:03.153

如果您只需要按名称查找子元素并想从 XPath 文字中抽象出名称，这里有一些选项：

```
// Returns the /root/node/element/@Value with @Name contained in @AttributeName SQL variable.
SELECT @Xml.value('(/root/node/element[@Name=sql:variable("@AttributeName")]/@Value)[1]', 'varchar(100)')

// Returns the text of the child element of /root/node with the name contained in @ElementName SQL variable.
SELECT @Xml.value('(/root/node/*[name(.)=sql:variable("@ElementName")]/text())[1]', 'varchar(100)')

// Searching the xml hierarchy for elements with the name contained in @ElementName and returning the text().
SELECT @Xml.value('(//*[name(.)=sql:variable("@ElementName")]/text())[1]', 'varchar(100)') 
```

您需要声明@ElementName 或@AttributeName SQL 变量来运行这些。我测试了第一个语句，但没有明确测试其他 2 个语句，仅供参考。

# java - 在 jsp/java ee Web 应用程序中加载图像/css/javascript

> ID：12397723
> 
> 赞同：1
> 
> 时间：2012-09-13T00:10:20.363
> 
> 标签：java, model-view-controller, jsp, servlets

今天我刚上了第一堂关于 Java ee 和动态 Web 项目的课程……我有一个问题要问你。

我的老师要求我们在一个非常基本的 mvc 概念中创建一个控制器。

她给了我们一些代码示例，并要求我们从控制器调用视图。好的，它有效！但是，如果我尝试添加图像`<img src="images/img.jpg" />`，我认为我的控制器会重新路由文件夹 images/img.jpg 并且我的 images/img.jpg 是文件标题中的类型文本......

任何帮助，将不胜感激...

这是我的 servlet **Controller.java**

```
package ca.qc.lacmegantic.ville;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class Controller
 */
@WebServlet("/Controller")
public class Controller extends HttpServlet
{
private static final long serialVersionUID = 1L;

/**
 * Processes requests for both HTTP <code>GET</code> and <code>POST</code>
 * methods.
 * 
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    String urlCP = request.getRequestURI();

    String url = urlCP.substring(request.getContextPath().length());

    if (url.equals("/") || url.equals(""))
    {
        request.getRequestDispatcher("WEB-INF/views/view.jsp").forward(request, response);
    }

}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    processRequest(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    processRequest(request, response);
}

} 
```

这是我的**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">
    <servlet>
        <servlet-name>Controller</servlet-name>
        <servlet-class>ca.qc.lacmegantic.ville.Controller</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Controller</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
</web-app> 
```

这是我的**view.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Hello World!</title>
</head>
<body>
<h1>Hello World!</h1>
<img src="images/img.jpg" />
</body>
</html> 
```

**文件结构：** ![文件结构](../Images/bf5d593cbbe529d1d63ddf1b365e059d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:17:44.877

您不应该将前端控制器 servlet 映射到`/`. 这将覆盖 servletcontainer 的“默认”servlet，该 servlet 负责提供静态资源，例如图像。这不是你想要的。

将控制器映射到更具体的 URL 模式，例如`/pages/*`。或者，也许`/Controller`，就像您在`@WebServlet`注释中那样，实际上根本没有注册，因为您`web.xml`没有声明符合 Servlet 3.0。

```
<servlet-mapping>
    <servlet-name>Controller</servlet-name>
    <url-pattern>/Controller</url-pattern>
</servlet-mapping> 
```

您的另一个问题是您已将图像放在`/WEB-INF`文件夹中。此文件夹中的内容不可公开访问。它仅适用于应该由前端控制器 servlet 或另一个 JSP 转发或包含的 JSP 文件。将`/images`文件夹向上移动一层，在`/WEB-INF`文件夹外。

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 也包含一些 hello world 示例
*   [servlet 映射 url 模式中 / 和 /* 之间的区别](https://stackoverflow.com/questions/4140448/difference-between-and-in-servlet-mapping-url-pattern/)
*   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316)
*   [在WEB-INF下移动资源](https://stackoverflow.com/questions/12088103)

# google-app-engine - python 应用程序引擎后端在 SDK 中工作，但在部署时不工作

> ID：12397728
> 
> 赞同：0
> 
> 时间：2012-09-13T00:11:28.327
> 
> 标签：google-app-engine

我在我的 backends.yaml 中有一个这样定义的测试后端

```
backends: 
- name: mailer 
  class: B1
  instances: 1 
  start: loaders/mail_backend.py 
```

我的 mail_backend.py 脚本如下所示：

```
from google.appengine.api import mail
from google.appengine.api import logservice
import logging

logservice.AUTOFLUSH_ENABLED = False
logging.error("Backend started!")
logservice.flush()

mail.send_mail(sender="email@email.com", to="email@email.com", subject="Testing Backend", body="Testing if backend is running")

logging.error("Backend finished running!")
logservice.flush() 
```

当我在 SDK（Mac OS X 上的 v 1.7.1）中本地运行它时，它工作正常（就像我所有其他后端一样）但是当我部署和更新后端时没有任何反应。后端显示它正在运行，并且显示了一个停止按钮，但日志中没有显示任何内容。

我如何调试这里发生的事情？我似乎无法判断后端是否被调用。只是为了好玩，我还重写了我的后端，使其表现得像一个请求处理程序，当我尝试以这种方式运行它并点击我指定运行它的 URL 时，我收到一个错误页面，要求将问题报告给 App Engine 团队，如果它仍然存在发生。我还没有这样做，因为我真的不想将它作为请求处理程序运行，因为我的后端只需要运行一次即可将数据加载到数据存储中。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:13:17.320

不幸的是，这不是一个理想的答案，但出于直觉，我决定创建一个新的 App Engine 应用程序并将我的代码推送到它。

我刚刚这样做了，现在我的后端工作正常（顺便说一句，没有代码更改）。

不幸的是，我在这个过程中丢失了我的应用程序引擎名称，这有点拖累。如果您删除了一个应用程序名称，我希望有一种方法可以将应用程序名称保留在同一帐户中。

# c# - 在 TinyIoC 中注入命名注册

> ID：12397730
> 
> 赞同：3
> 
> 时间：2012-09-13T00:11:55.477
> 
> 标签：c#, tinyioc

我有一个带有以下构造函数签名`IRofl`的实现的接口：`DefaultRofl`

```
public DefaultRofl(ICanHasCheezburger cheez) 
```

`ICanHasCheezburger`有几个实现，其中我需要通过 IoC 容器解决多个，我认为命名注册是正确的方法。

假设我有两个预先创建的实例，希望一个作为默认注册，另一个命名为：

```
container.Register<ICanHasCheezburger>(cheez1);
container.Register<ICanHasCheezburger>(cheez2, "x2"); 
```

现在我需要指定 for `DefaultRofl`，应该解决“x2”注册 - 这就是我卡住的地方。我知道 Autofac 可以做到这一点，但我找不到 TinyIoC 的方法。

我本来希望这样做的方法是

```
container.Register<IRofl, DefaultRofl>().UsingConstructor(() => new DefaultRofl(container.Resolve<ICanHasCheezburger>("x2"))); 
```

但事实证明（我什至有点理解为什么），`ICanHasCheezburger`构造函数参数只是一个虚拟参数，并没有实际评估。这意味着名称也将被忽略，并且接口的默认注册已解决 - 但这是`cheez1`，我不想在这里使用它。

实际上，在杰夫阿特伍德的橡皮鸭问题解决的另一个案例中，我只是想通了：

```
container.Register<IRofl>((c, p) => new DefaultRofl(container.Resolve<ICanHasCheezburger>("x2"))); 
```

成功了。但是，如果我有更多的构造函数参数，我必须明确声明所有的 container.Resolve() 调用，对吧？史蒂文? ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:38:04.347

如果您使用命名注册，那么检索它们的唯一三种方法是使用您在那里拥有的 Resolve 重载（使用名称）、手动使用 ResolveAll 或采用 IEnumerable 的依赖项，这将为您提供 Foo 的所有命名注册。

# debugging - 在 MATLAB 中使用 try 和 catch 语句进行调试

> ID：12397732
> 
> 赞同：2
> 
> 时间：2012-09-13T00:12:29.153
> 
> 标签：debugging, matlab, editor

我在调用一堆嵌套函数的 MATLAB 文件中有一个 try/catch 语句。简单地说，try/catch 运行在“顶级”级别，迭代一个我调用函数的文件列表。

```
for i=1:length(FILELIST)
try
dosomething(FILELIST(i)
catch
disp(exception.message)
rethrow(exception)
end 
```

我的问题是，说 dosomething() 有很多子函数 dosomethingchild() 我怎样才能访问它的调试工作区？我必须删除所有父项中的 try/catch 语句才能访问调试工作区，并将“如果错误/警告设置为完整则停止”。

try/catch 使调试变得更加困难，但我想保留它，因为有时代码会因为文件的性质而在某些文件上失败……而不是代码本身。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T05:39:55.820

只需删除它`try..catch`。由于您只是显示和重新抛出错误，而没有实际捕获任何特定内容，因此对于文件性质引起的错误具有鲁棒性是不可行的生产代码。它将与没有 的行为相同`try..catch`，因此在出现错误后它将停止执行。

`stop if error`启用后，它将在您的错误处理程序中停止，正如您已经注意到的那样，这是无用的。从那里不可能返回到被调用函数的工作区，因为这些工作区已经关闭（调用已经返回）。

在现实生活中，您也可以尝试`dbstop if caught error`与 your 一起尝试`try..catch`，但在这种情况下，我建议要么摆脱 要么`try..catch`至少让它捕获特定错误。您可能还想在（特定）错误发生时立即捕获它们；离实际发生的越远，特定错误通常产生的意义就越小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:25:26.377

为什么不添加 `keyboard`到您的 catch 语句并检查代码失败时发生的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T09:21:38.977

一般来说，我同意[Egon](https://stackoverflow.com/a/12400067/5763431)的观点，即您的 try/catch 块根本没有帮助。但是，对于您的调试情况，这可能不是最糟糕的主意。我对调试此代码的建议：

1.  去掉rethrow，`dbstop if error`一旦出现错误就执行切换到debug模式。或者，在带有`disp(execption.message)`.
2.  现在你有两件事可以做：
    *   运行脚本，当发生肯定是由无效输入文件引起的错误时，您可以捕获错误并实际处理它（通常打印一条错误消息，指出名称为 xyz.csv 的文件已被忽略）
    *   如果您不知道错误的来源，您*现在*可以在函数中放置一个断点`doSomething()`，最好尽可能靠近错误（错误为您提供调用堆栈，因此您应该非常接近），然后`doSomething()`再次手动执行从控制台。它将在您的断点处停止，然后您可以单步执行（快捷方式：F10）或单步执行您的子功能（单步执行，F11）。
3.  有时错误消息是在原始错误发生之后出现的，那么您将不得不重复这些步骤。然而，一旦你在一个函数中，你就有了该函数的完整工作空间，因此可以手动（再次）执行所有先前的命令，以回溯出错的地方。

# c# - 反序列化包含字典的对象列表

> ID：12397733
> 
> 赞同：6
> 
> 时间：2012-09-13T00:12:29.307
> 
> 标签：c#, .net, json, serialization

我看到很多例子似乎表明我正在做的事情应该有效，但无论出于何种原因，它都没有。我正在尝试反序列化一组对象，其中一个属性是字典，如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        var json = "{\"Collection\":[{\"ID\":\"1243\",\"Dictionary\":[{\"Key\":\"color\", \"Value\":\"red\"},{\"Key\":\"size\",\"Value\":\"large\"}]},{\"ID\":\"1243\",\"Dictionary\":[{\"Key\":\"color\", \"Value\":\"blue\"},{\"Key\":\"size\",\"Value\":\"small\"}]}]}";
        //var json = "[{\"ID\":\"1243\",\"Dictionary\":[{\"Key\":\"color\", \"Value\":\"red\"},{\"Key\":\"size\",\"Value\":\"large\"}]},{\"ID\":\"1243\",\"Dictionary\":[{\"Key\":\"color\", \"Value\":\"blue\"},{\"Key\":\"size\",\"Value\":\"small\"}]}]";
        List<MyObject> myObjects = new JavaScriptSerializer().Deserialize<List<MyObject>>(json);
    }
}

[DataContract]
public class MyObject
{
    [DataMember]
    public string ID { get; set; }

    [DataMember]
    public Dictionary<string, string> Dictionary { get; set; }
} 
```

第一个 json 字符串将整个内容封装在一个对象中 - 如果我运行那个它运行良好，但 myObjects 只是一个空列表。如果我运行第二个字符串（没有被包装），我会收到以下错误：

> 键入'System.Collections.Generic.Dictionary`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.String, mscorlib, Version=4.0.0.0, Culture=neutral , PublicKeyToken=b77a5c561934e089]]' 不支持数组的反序列化。

从我所做的研究来看，这似乎应该很简单——任何人都知道我应该使用哪种 JSON 格式以及出了什么问题？如果我只做一个对象而不是一组对象，那么 JSON 反序列化就好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T04:07:28.767

是的，如果你有任何复杂的类型和日期，反序列化器不会反序列化字典对象。解决方案是使用 Newtonsoft.Json 使用 Jobject 进行反序列化，您可以以此为例进行尝试。在您的情况下，您可以将其用于 var 或 Jobject

```
 JArray resources=(JArray)JsonConvert.DeserializeObject(objJson);
                     itemStores = resources.Select(resource => new Resource`enter code here`
                     {
                         SpaceUsed = long.Parse(resource["indexDiskMB"].ToString()),
                         ItemId =resource["id"].ToString(),
                         CountItems =Int32.Parse(resource["numItems"].ToString()),
                         ItemType=resource["type"].ToString()

                     }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:36:44.643

看起来不像`Dictionary<string, string>`您期望的那样可序列化。我尝试`List<KeyValuePair<string, string>>`了，但这似乎也不起作用。

我能想到的只有一些丑陋的东西，它们会将您的 JSON 转换为自定义类型，然后将其转换为字典。因此，完全按原样使用您的第二个 JSON 示例，您可以执行以下操作：

```
// Inside of MyObject class
[DataMember]
public Kvp<string, string>[] Dictionary { get; set; }

public Dictionary<string, string> GetDictionary()
{
    return Dictionary.ToDictionary(x => x.Key, x => x.Value);
}

//////////////////

public class Kvp<T1, T2>
{
    public T1 Key { get; set; }
    public T2 Value { get; set; }
}

Dictionary<string, string> myDictionary = myObjects[0].GetDictionary(); 
```

我确信有更好的方法，但这至少应该有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T14:24:52.533

显然，对于 OP 的部分来说有点晚了 :) 但我今天遇到了类似的问题并使用以下方法来解决它：

```
 //var json = "[{'firstName':'John', 'lastName':'Doe'},{'firstName':'Anna', 'lastName':'Smith'},{'firstName':'Peter','lastName': 'Jones'} ]";
        //var json = "{ 'glossary': { 'title': 'example glossary','GlossDiv': { 'title': 'S','GlossList': { 'GlossEntry': { 'ID': 'SGML','SortAs': 'SGML','GlossTerm': 'Standard Generalized Markup Language','Acronym': 'SGML','Abbrev': 'ISO 8879:1986','GlossDef': { 'para': 'A meta-markup language, used to create markup languages such as DocBook.','GlossSeeAlso': ['GML', 'XML'] },'GlossSee': 'markup' } } } } }";
        var json = "{ 'A': 'A0' , 'B' : { 'B2' : 'B2 - Val', 'B3' : [{'B30' : 'B30 - Val1' ,'B31' : 'B31 - Val1'}]}, 'C': ['C0', 'C1']}";
        var jss = new JavaScriptSerializer();

        try
        {
            // Deal with an Object root
            var dict = jss.Deserialize<Dictionary<string, object>>(json);
            //<do stuff>
        }
        catch (InvalidOperationException ioX)
        {
            // Deal with an Array Root
            var dictionaries = jss.Deserialize<Dictionary<string, object>[]>(json);
            foreach (var dict in dictionaries)
            {
                //<do stuff for each dictionary>
            }
        } 
```

# matlab - 在 MATLAB 中正确使用 clearvars

> ID：12397739
> 
> 赞同：7
> 
> 时间：2012-09-13T00:13:08.637
> 
> 标签：matlab

该功能`clearvars`具有[此处](http://www.mathworks.com.au/help/matlab/ref/clearvars.html)提供的说明。

所以说我有一组变量，

```
 a, b, c, d 
```

我想清除这些变量，除了**d**我应该能够做到这一点：

```
clearvars * -except d 
```

但我收到以下错误：

```
 clearvars * -except d
                |
Error: Unexpected MATLAB expression. 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-19T01:25:58.753

这有效：`clearvars '*' -except d`

Matlab 在单独转换`*`为字符串时一定会遇到问题。`a*`和都可以`*a`，但不能`*`。

此外，这有效：

```
clearvars('*', '-except', 'd') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T00:20:48.263

`*`不需要字符。

# php - 检查 WordPress 中 WP_Http 之前的 URL 是否存在

> ID：12397740
> 
> 赞同：0
> 
> 时间：2012-09-13T00:13:18.423
> 
> 标签：php, wordpress, web-scraping

我在 WordPress 核心中发现了一个非常好的类 WP_Http，用于抓取外部网页内容。

问题是找不到 url 时会抛出 PHP 错误，`Fatal error: Cannot use object of type WP_Error as array.`

```
$url = 'http://asklsahgioa.fdjeoiao.griawpo';   // non-existent url
$oHttp = new WP_Http;
$output = $oHttp->request($url);
print_r($output['body']); 
```

所以我想确定 url 在类方法之前是否存在。以下代码有效，但速度很慢，当找到 url 时，我可以看到响应需要一秒钟左右。这意味着如果 url 很好，它会降低速度。

```
$handle = @fopen($url,'r');
if($handle !== false)
   echo 'true';
else
   echo 'false'; 
```

我也试过`get_headers()`了；但是，找到 url 也需要一秒钟。

```
$siteHeader = @get_headers($url , 1);
if ($siteHeader > 1) 
    echo 'true';
else 
    echo 'false'; 
```

那么，有没有更好的方法来做到这一点？也许 WordPress 已经有一个函数或者扩展类来嵌入错误处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:17:07.143

如何检查是否`$output`是`WP_Error` [由失败的请求返回的](http://codex.wordpress.org/HTTP_API#Helper_Functions)？

```
$output = $oHttp->request($url);

if ($output instanceof WP_Error) {
  // handle error
  echo 'something terrible has happened';
} else {
  print_r($output['body']);
} 
```

（请注意，该`instanceof`运算符不适用于旧版本的 PHP）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:11:42.690

这个片段实际上不是检查请求是否失败的正确方法。

我指的是[我在 Stack Overflow 上发布的答案](https://stackoverflow.com/a/12485062/367226)，它将向您展示此类任务的最佳实践。

# java - Java 程序在 Windows 下工作，但在 Mac OS JVM 中失败

> ID：12397741
> 
> 赞同：2
> 
> 时间：2012-09-13T00:13:23.743
> 
> 标签：java, macos, jvm

好吧，我有一个在 Windows 下编写的 java 程序，它运行良好。基本上它与算法相关，在它运行期间它通常会消耗几乎全部的 CPU 容量，这是正常的。

但是在 MacOS 下，它总是卡在某个特定点，即有大量数据并且内存消耗达到约 240M。该程序仍在运行，但不会继续。内存没有释放，但 CPU 使用率下降到 0。我不知道这到底是什么意思，也不知道发生了什么。

抱歉，我无法提供代码片段，因为这不是代码特定部分的问题。任何熟悉JVM的人都可以提供一些提示/建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:18:56.113

我要做的第一件事是进行线程转储并找出谁在做什么。您可以发出 a`kill -3`来获取线程转储，或者您也可以连接分析器。详情请看这个答案：[线程转储分析工具/方法](https://stackoverflow.com/questions/3156434/thread-dump-analysis-tool-method)

如果您无法弄清楚发生了什么，您可能想在此处发布线程转储。

我的疯狂猜测是并发错误，就像死锁一样，但我们必须看到线程转储！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T00:26:12.020

如果发生这种情况时您的硬盘驱动器正忙，则意味着您的 JVM 使用的物理内存超出了可用的物理内存，它只是在交换交换文件。交换过程本身并不使用太多 CPU，但该过程涉及大量 I/O。因此CPU使用率很低。

**尝试将您的堆大小限制为可用的物理 RAM**（不要增加到总数，因为 4 GB 的机器在启动 JVM 时可能只有 1 GB 可用）。

# compilation - ubuntu 中 Cuda SDK 示例时的问题

> ID：12397744
> 
> 赞同：1
> 
> 时间：2012-09-13T00:13:42.293
> 
> 标签：compilation, cuda, installation, ubuntu-11.04

我正在使用 ubuntu 11.04 和 cuda 4.2。我安装了工具包和 SDK。我使用[https://help.ubuntu.com/community/Cuda](https://help.ubuntu.com/community/Cuda)网站进行安装。之后，我使用以下命令为 GPU SDK 中给出的示例问题提供 make 命令

cd ~/NVIDIA_GPU_Computing_SDK/C LINKFLAGS=-L/usr/lib/nvidia-current/ make cuda-install=/opt/cuda

但是在这样做的同时，我收到了大量的警告和错误。从错误消息的类型来看，错误消息似乎是在粒子示例开始编译后开始出现的。我将在下面粘贴错误消息：

```
make[2]: Entering directory `/home/duttasankha/NVIDIA_GPU_Computing_SDK/C/src/particles'
/usr/bin/ld: error: cannot open //usr/lib/libGL.so: No such file or directory
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function reshape(int, int):particles.cpp(.text+0x160): error: undefined reference to 'glMatrixMode'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function reshape(int, int):particles.cpp(.text+0x165): error: undefined reference to 'glLoadIdentity'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function reshape(int, int):particles.cpp(.text+0x19e): error: undefined reference to 'glMatrixMode'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function reshape(int, int):particles.cpp(.text+0x1ab): error: undefined reference to 'glViewport'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function initGL(int*, char**):particles.cpp(.text+0x399): error: undefined reference to 'glEnable'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function initGL(int*, char**):particles.cpp(.text+0x3b4): error: undefined reference to 'glClearColor'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x8a5): error: undefined reference to 'glClear'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x8af): error: undefined reference to 'glMatrixMode'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x8b4): error: undefined reference to 'glLoadIdentity'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x92f): error: undefined reference to 'glTranslatef'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x948): error: undefined reference to 'glRotatef'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x961): error: undefined reference to 'glRotatef'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x972): error: undefined reference to 'glGetFloatv'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x985): error: undefined reference to 'glColor3f'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x997): error: undefined reference to 'glPushMatrix'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x9b8): error: undefined reference to 'glTranslatef'
/usr/bin/ld: obj/x8
6_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x9cb): error: undefined reference to 'glColor3f'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0x9ee): error: undefined reference to 'glPopMatrix'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0xb06): error: undefined reference to 'glDisable'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0xb12): error: undefined reference to 'glBlendFunc'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0xb1c): error: undefined reference to 'glEnable'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0xb3b): error: undefined reference to 'glDisable'
/usr/bin/ld: obj/x86_64/release/particles.cpp.o: in function display():particles.cpp(.text+0xb45): error: undefined reference to 'glEnable'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_
drawPoints():render_particles.cpp(.text+0x41): error: undefined reference to 'glBegin'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0x66): error: undefined reference to 'glVertex3fv'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0x9e): error: undefined reference to 'glVertexPointer'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0xa8): error: undefined reference to 'glEnableClientState'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0xbb): error: undefined reference to 'glDrawArrays'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0xcf): error: undefined reference to 'glDisableClientState'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0xff): error: undefined reference to 'glColorPointer'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0x109): error: undefined reference to 'glEnableClientState'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x143): error: undefined reference to 'glColor3f'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x14d): error: undefined reference to 'glPointSize'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x186): error: undefined reference to 'glEnable'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x19a): error: undefined reference to 'glTexEnvi'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x1ae): error: undefined reference to 'glDepthMask'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x25b): error: undefined reference to 'glColor3f'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0x74): error: undefined reference to 'glEnd'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::_drawPoints():render_particles.cpp(.text+0xdd): error: undefined reference to 'glDisableClientState'
/usr/bin/ld: obj/x86_64/release/render_particles.cpp.o: in function ParticleRenderer::display(ParticleRenderer::DisplayMode):render_particles.cpp(.text+0x28f): error: undefined reference to 'glDisable'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function glewGetExtension:glew.c(.text+0x39e9): error: undefined reference to 'glGetString'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function _glewInit_GL_EXT_texture_perturb_normal:glew.c(.text+0x3a6a): error: undefined reference to 'glXGetProcAddressARB'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function _glewInit_GL_EXT_texture_object:glew.c(.text+0x3aa3): error: undefined reference to 'glXGetProcAddressARB'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function _glewInit_GL_EXT_texture_object:glew.c(.text+0x3ab7): error: undefined reference to 'glXGetProcAddressARB'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function _glewInit_GL_EXT_texture_object:glew.c(.text+0x3ad9): error: undefined reference to 'glXGetProcAddressARB'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function glewContextInit:glew.c(.text+0x967b): error: undefined reference to 'glGetString'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function glxewGetExtension:glew.c(.text+0xe62a): error: undefined reference to 'glXGetClientString'
/usr/bin/ld: ../../common/lib/linux/libGLEW_x86_64.a(glew.o): in function glxewContextInit:glew.c(.text+0xe701): error: undefined reference to 'glXQueryVersion'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0xb): error: undefined reference to 'glMatrixMode'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0x10): error: undefined reference to 'glPushMatrix'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0x15): error: undefined reference to 'glLoadIdentity'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0x47): error: undefined reference to 'glTranslatef'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0x5f): error: undefined reference to 'glScalef'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0x6e): error: undefined reference to 'glPushMatrix'
/usr/bin/ld: ../../
lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0x73): error: undefined reference to 'glLoadIdentity'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function beginWinCoords():paramgl.cpp(.text+0xab): error: undefined reference to 'glOrtho'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function endWinCoords():paramgl.cpp(.text+0xcf): error: undefined reference to 'glPopMatrix'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function glPrint(int, int, char const*, void*):paramgl.cpp(.text+0x109): error: undefined reference to 'glRasterPos2f'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function glPrintShadowed(int, int, char const*, void*, float*):paramgl.cpp(.text+0x19d): error: undefined reference to 'glColor3fv'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x37a): error: undefined reference to 'glColor3fv'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render
(int, int, bool):paramgl.cpp(.text+0x41a): error: undefined reference to 'glColor3fv'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x424): error: undefined reference to 'glBegin'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x440): error: undefined reference to 'glVertex2f'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x45f): error: undefined reference to 'glVertex2f'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x481): error: undefined reference to 'glVertex2f'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x4a0): error: undefined reference to 'glVertex2f'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x4a5): error: undefined reference to 'glEnd'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x4b1): error: undefined reference to 'glColor3fv'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function ParamListGL::Render(int, int, bool):paramgl.cpp(.text+0x527): error: undefined reference to 'glRectf'
/usr/bin/ld: ../../lib/libparamgl_x86_64.a(paramgl.cpp.o): in function endWinCoords():paramgl.cpp(.text+0xe2): error: undefined reference to 'glPopMatrix'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckFBO::readback(unsigned int, unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x143): error: undefined reference to 'glReadBuffer'
/usr/bin/ld: ../../
lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckFBO::readback(unsigned int, unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x18d): error: undefined reference to 'glReadPixels'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckFBO::readback(unsigned int, unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x20c): error: undefined reference to 'glReadPixels'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckFBO::readback(unsigned int, unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x31c): error: undefined reference to 'glReadBuffer'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckBackBuffer::readback(unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x3b4): error: undefined reference to 'glReadPixels'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckBackBuffer::readback(unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x446): error: undefined reference to 'glReadBuffer'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckBackBuffer::readback(unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x471): error: undefined reference to 'glReadPixels'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckFBO::readback(unsigned int, unsigned int):rendercheck_gl.cpp(.text+0x671): error: undefined reference to 'glReadBuffer'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xaa5): error: undefined reference to 'glBindTexture'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xabc): error: undefined reference to 'glBindTexture'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xad2): error: undefined reference to 'glClearColor'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xadc): error: undefined reference to 'glClear'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb01): error: undefined reference to 'glDisable'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb0b): error: undefined reference to 'glBegin'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb21): error: undefined reference to 'glTexCoord2f'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb3d): error: undefined reference to 'glTexCoord2f'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb5f): error: undefined reference to 'glTexCoord2f'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb7b): error: undefined reference to 'glTexCoord2f'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::renderQuad(int, int, unsigned int):rendercheck_gl.cpp(.text+0xb80): error: undefined reference to 'glEnd'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::freeResources():rendercheck_gl.cpp(.text+0xbeb): error: undefined reference to 'glDeleteTextures'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(renderchttps://help.ubuntu.com/community/Cudaheck_gl.cpp.o): in function CFrameBufferObject::freeResources():rendercheck_gl.cpp(.text+0xc2a): error: undefined reference to 'glDeleteTextures'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CheckBackBuffer::checkStatus(char const*, int, bool):rendercheck_gl.cpp(.text+0x116c): error: undefined reference to 'glGetError'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a16): error: undefined reference to 'glGenTextures'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a21): error: undefined reference to 'glBindTexture'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a32): error: undefined reference to 'glTexParameteri'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a43): error: undefined reference to 'glTexParameteri'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a54): error: undefined reference to 'glTexParameteri'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a65): error: undefined reference to 'glTexParameteri'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::createTexture(unsigned int, int, int, int, unsigned int):rendercheck_gl.cpp(.text+0x2a8e): error: undefined reference to 'glTexImage2D'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x30bd): error: undefined reference to 'glGenTextures'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x30c8): error: undefined reference to 'glBindTexture'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x3102): error: undefined reference to 'glTexImage2D'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x3123): error: undefined reference to 'glTexParameterf'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x3138): error: undefined reference to 'glTexParameterf'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x314d): error: undefined reference to 'glTexParameterf'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x3162): error: undefined reference to 'glTexParameterf'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x31f3): error: undefined reference to 'glGetIntegerv'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x320f): error: undefined reference to 'glGetIntegerv'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x32ad): error: undefined reference to 'glGetIntegerv'
/usr/bin/ld: ../../lib/limake[2]: Entering directory `/home/duttasankha/NVIDIA_GPU_Computing_SDK/C/src/particles'brendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x32d2): error: undefined reference to 'glGenTextures'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::create(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x3356): error: undefined reference to 'glTexImage2D'
/usr/bin/ld: ../../lib/librendercheckgl_x86_64.a(rendercheck_gl.cpp.o): in function CFrameBufferObject::initialize(unsigned int, unsigned int, fboConfig&, fboData&):rendercheck_gl.cpp(.text+0x3747): error: undefined reference to 'glGetIntegerv'
collect2: ld returned 1 exit status
make[2]: *** [../../bin/linux/release/particles] Error 1
make[2]: Leaving directory `/home/duttasankha/NVIDIA_GPU_Computing_SDK/C/src/particles'
make[1]: *** [src/particles/Makefile.ph_build] Error 2
make[1]: Leaving directory `/home/duttasankha/NVIDIA_GPU_Computing_SDK/C'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:43:00.540

一个解法：

1-检查是否已经安装了 libgl。

```
locate libGL.so 
```

它显示了这样的内容：

```
facu@nvd:~$ locate libGL.so
/usr/lib/libGL.so
/usr/lib/libGL.so.1
/usr/lib/libGL.so.304.33
/usr/lib32/libGL.so
/usr/lib32/libGL.so.1
/usr/lib32/libGL.so.304.33 
```

2-如果安装了 libgl，请转到 3，如果不是：

```
sudo apt-get install libgl1-mesa-dev 
```

3-如果无法正确编译，则链接已损坏。修理它：

```
sudo rm /usr/lib/libGL.so
sudo ln -s /usr/lib/libGL.so.304.33 /usr/lib/libGL.so 
```

**记得检查版本，在我的例子中是 304.33。**

# haskell - 向 typeclass 实例添加类约束

> ID：12397751
> 
> 赞同：3
> 
> 时间：2012-09-13T00:14:32.223
> 
> 标签：haskell, typeclass

我正在尝试将 Cantor Pairing Function 实现为通用 Pair 类型类的实例，如下所示：

```
module Pair (Pair, CantorPair) where

-- Pair interface
class Pair p where
    pi :: a -> a -> p a
    k :: p a -> a
    l :: p a -> a

-- Wrapper for typing
newtype CantorPair a = P { unP :: a }

-- Assume two functions with signatures:
cantorPair :: Integral a => a -> a -> CantorPair a
cantorUnpair :: Integral a => CantorPair a -> (a, a)

-- I need to somehow add an Integral a constraint to this instance,
-- but I can't work out how to do it.
instance Pair CantorPair where
    pi = cantorPair
    k = fst . cantorUnpair
    l = snd . cantorUnpair 
```

如何向实例添加适当的积分约束？我有一种模糊的感觉，我可能需要修改 Pair 接口本身，但不知道如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:33:08.677

如果您有权访问类定义，则可以向、和方法添加`Integral`约束。但是，这有点令人不满意：没有什么可以说这将成为所有实例的正确约束，而且您毕竟不想仅仅因为您没有足够的远见而拒绝某些实例。所以，这里有一个概括：我们将允许约束在每个实例中变化。`pi``k``l``Integral`

```
{-# LANGUAGE ConstraintKinds, TypeFamilies #-}
import GHC.Exts

newtype CantorPair a = P { unP :: a }
cantorPair :: Integral a => a -> a -> CantorPair a
cantorUnpair :: Integral a => CantorPair a -> (a, a)
cantorPair = undefined
cantorUnpair = undefined

class Pair p where
    type Ctxt p a :: Constraint
    pi :: Ctxt p a => a -> a -> p a
    k  :: Ctxt p a => p a -> a
    l  :: Ctxt p a => p a -> a

instance Pair CantorPair where
    type Ctxt CantorPair a = Integral a
    pi = cantorPair
    k  = fst . cantorUnpair
    l  = snd . cantorUnpair

-- just for fun
data DataPair a = DataPair a a

instance Pair DataPair where
    type Ctxt DataPair a = ()
    pi = DataPair
    k (DataPair a _) = a
    l (DataPair _ a) = a

-- this one made GHC panic! neat, I get to file a bug
data Unit a = Unit

instance Pair Unit where
    type Ctxt Unit a = a ~ ()
    pi _ _ = Unit
    k _ = ()
    l _ = () 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:28:48.947

您是否希望所有对始终包含整数元素？在这种情况下，您可以将约束添加到方法的签名中：

```
class Pair p where
  pi :: Integral i => i -> i -> p i
  k :: Integral i => p i -> i
  l :: Integral i => p i -> i 
```

这将使您的配对类不那么通用，但会确保您的`CantorPair`类型可以成为其中的一部分。

如果你想让你的`Pair`类有点通用，你可以使用多参数类型类。（这将需要两个扩展名：`MultiParamTypeClasses`和`FlexibleInstances`。）

```
class Pair p a where
  pi :: a -> a -> p a
  k :: p a -> a
  l :: p a -> a

instance Integral i => Pair CantorPair i where
    pi = cantorPair
    k = fst . cantorUnpair
    l = snd . cantorUnpair 
```

我不知道从设计的角度来看这是否一定是最佳选择，但这是了解多参数类型类如何工作的好方法。（诚​​然，这相当简单。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T00:49:22.123

此解决方案使用[类型族](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-families.html)，因此您需要`-XTypeFamilies`. 我们将类型约束放在类型本身上，而不是类型构造函数上：

```
class Pair p where
    type First p :: *
    type Second p :: *
    pi :: First p -> Second p -> p
    k :: p -> First p
    l :: p -> Second p 
```

然后我们创建如下实例：

```
instance Integral a => Pair (CantorPair a) where
    type First (CantorPair a) = a
    type Second (CantorPair a) = a
    pi = cantorPair
    k = fst . cantorUnpair
    l = snd . cantorUnpair

instance Pair (a, b) where
    type First (a, b) = a
    type Second (a, b) = b
    pi = (,)
    k = fst
    l = snd 
```

# git - 如何结束 Git Cherry-Pick？

> ID：12397752
> 
> 赞同：70
> 
> 时间：2012-09-13T00:14:47.440
> 
> 标签：git, version-control, cherry-pick, git-cherry-pick

昨天我在我的主分支中挑选了两个提交，其中一个导致了合并冲突，我解决了它们，提交并将它们推送到原点。今天，当我收到以下错误时，我试图从服务器中提取：

```
$ git pull
fatal: You have not concluded your cherry-pick (CHERRY_PICK_HEAD exists).
Please, commit your changes before you can merge.
$ 
```

Git状态读取：

```
$ git status
# On branch main
# Your branch is behind 'origin/main' by 2 commits, and can be fast-forwarded.
#
$ 
```

我尝试了以下方法无济于事：

```
$ git cherry-pick --continue
usage: git cherry-pick [options] <commit-ish>
$ 
```

关于如何解决这个问题的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-09-13T13:52:57.410

下次试试`git cherry-pick --abort`，否则你所做的应该或多或少的工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-13T01:08:43.500

解决了以下问题：`rm .git/CHERRY_PICK_HEAD`我意识到这很危险，因为这不能保证 git 内部的一致性，但到目前为止对我来说没有问题......

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-21T21:38:09.323

自从我[之前的回答 2014](https://stackoverflow.com/a/25138563/6309)以来，现在（2018 年）正确的命令是`git cherry-pick --quit`.
在 Git 2.19（2018 年第 3 季度）之前，" `git cherry-pick --quit`" 无法删除`CHERRY_PICK_HEAD`，即使我们不会在它返回后进行挑选会话，这已得到纠正。

请参阅[Nguyễn Thái Ngọc Duy ( ) 的](https://github.com/pclouds)[提交 3e7dd99](https://github.com/git/git/commit/3e7dd9920823fc2a88f8ec5390bd100d707f9129)（2018 年 8 月 16 日[）](https://github.com/pclouds)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 39e415c](https://github.com/git/git/commit/39e415cfd1390ed31a61ca0ca175530302c9a58c))^(中，2018 年 8 月 20 日）)[`pclouds`](https://github.com/pclouds)
^([`gitster`](https://github.com/gitster))

> ## cherry-pick：修复 --quit 不删除 CHERRY_PICK_HEAD
> 
> `--quit`应该是`--abort`但没有恢复`HEAD`。
> 留下`CHERRY_PICK_HEAD`可能会导致其他`cherry-pick`仍在进行的命令错误（例如“ `git commit --amend`”将拒绝工作）。**也清洗一下**。
> 
> 因为`--abort`，这个删除工作`CHERRY_PICK_HEAD`在“ `git reset`”上，所以我们不需要做任何其他事情。但是让我们在测试中添加额外的检查`--abort`来确认。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-05T12:13:59.887

如果`git cherry-pick --continue`不起作用，则意味着 git 太旧：在[提交 5a5d80f中为 git 1.7.8（2011 年 12 月）引入了该选项](https://github.com/git/git/commit/5a5d80f4ca16fdb1f2577474ad94135839853a3e)

> 它的工作原理是从 .git/sequencer/todo 中删除第一条指令并执行那里列出的剩余的樱桃选择，并使用“ ”中列出的初始命令中的选项（想想“ `-s`”和“ ”） 。`-X``.git/sequencer/opts`

这些天（2014 年），这将是您看到“ `You have not concluded your cherry-pick`”时使用的命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-21T03:31:36.957

另一种选择：使用 Git 2.23（2019 年第三季度），a`git cherry-pick --continue`将真正起作用！

当多步cherry-pick 或revert 中的一个步骤被reset 或commit 时，命令行提示脚本未能注意到当前状态，已改进。

请参阅[Phillip Wood ( ) 的](https://github.com/phillipwood)[commit e981bf7](https://github.com/git/git/commit/e981bf75251ecab712fa70ea2fe995a973ed5dba)（2019 年 7 月 1 日[）](https://github.com/phillipwood)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([8a4acc5 提交中](https://github.com/git/git/commit/8a4acc5f4cdd811476ffa0b5c63ae4cc35ef288f))^(，2019 年 7 月 19 日）)[`phillipwood`](https://github.com/phillipwood)
^([`gitster`](https://github.com/gitster))

> ## `git-prompt`：改善`cherry-pick`/`revert`检测
> 
> 如果用户在一系列选择或恢复的过程中提交或重置冲突解决方案，则`CHERRY_PICK_HEAD`/`REVERT_HEAD`将被删除，因此在没有这些文件的情况下，我们需要检查**`.git/sequencer/todo`**是否存在选择或恢复进步。
> 
> 查看是否`cherry-pick`正在进行`revert`中，如果用户`git commit`在一系列选择或恢复过程中使用 ' ' 提交了冲突解决方案，则`CHERRY_PICK_HEAD`/`REVERT_HEAD`将不存在，因此我们必须读取`todo`文件。

# mysql - MYSQL：可以实时镜像/同步不同数据库（同一服务器）中的两个表吗？

> ID：12397755
> 
> 赞同：1
> 
> 时间：2012-09-13T00:15:15.943
> 
> 标签：mysql, sql, mysql-5.1

我有两个结构完全相同的数据库（基本上是两个 vbulletin 论坛），但是数据库中包含的数据不同，并且每分钟都会有所不同。我想在两个数据库之间的一个表中同步/镜像数据（这些表具有相同的结构并位于同一物理服务器上）。通过同步，它将获取最新更改的数据并将其应用于另一个数据库表，无论哪个表被更改

这可能吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:35:14.660

如果你有自动递增的主键，你会被淹没，所以我希望你有 GUID...

如果听起来像触发器对您有用，但每个数据库都必须知道它是否是行的*来源*，以便在另一个数据库上运行插入。

在更改数据之前设置一个包含当前数据库名称的会话变量。触发器可以将该值与`DATABASE()`;的值进行比较。如果相同，也将记录写入另一个数据库。

# java - Jsoup 和 ICS 登录失败

> ID：12397758
> 
> 赞同：0
> 
> 时间：2012-09-13T00:15:49.523
> 
> 标签：java, android, jsoup

我正在编写一个 Android 应用程序，它登录到我公司的服务器 (SSL) 并通过模拟浏览器登录来获取我的工作计划。以下代码在 Android 2.2 和 Java 中运行良好，但在 Android 4 中导致登录失败。它不会导致应用程序崩溃，但无法登录。不仅登录失败，而且将用户关闭服务器的。除非您有树连续失败的登录尝试，否则这通常不会发生。

```
static final Sting host0 = "http://someplace.com"
static final Sting host1 = "https://someplace.com/login";
static final String userAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0)"
System.setProperty("http.keepAlive", "true");

try{
Connection.Response res = Jsoup.connect(host0)
        .userAgent(userAgent)
        .followRedirects(true)
        .method(Method.GET)
        .execute();
cookies1 = res.cookies();

Connection.Response res1 = Jsoup.connect(host)
        .data("label1","calue1",
                "label2","calue2",
                "label3","calue3",
                "label4","calue4")
                .cookies(cookies1)
                .userAgent(userAgent)
                .followRedirects(true)
                .method(Method.POST)
                .execute();

Connection.Response res2 = Jsoup.connect(host)
        .data("label5","calue15",
                "label6","calue6",
                "label7","calue7",
                "label18","calue8")
                .cookies(cookies1)
                .userAgent(userAgent)
                .followRedirects(true)
                .method(Method.POST)
                .timeout(10000)
                .execute();
}
catch (IOException ioe) {
    ioe.printStackTrace();
    System.out.println("IOException handled in initializeDocArray()");
}
finally {} 
```

我已经为此苦苦挣扎了几个星期，现在我向您寻求帮助。

1.  Android 4 中可能有什么不同导致这不起作用（该过程未在 UI 线程中执行）。我是否可以在 apache 库中使用 HttpClient 时遇到同样的问题，或者它可能是 Jsoup 问题。
2.  And more importantly How can I make this work. Any hints appreciated.

The IT-department is saying the server only support login through the IE8 browser, but I have never experienced my code not to work in Android 2.2 or Java

I anyone can help me solve this I will be very thankful!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:50:51.823

I solved it by using the apache library iso Jsoup. Then I use Jsoup to parse the resposeBody from HttpClient. Works great.

# javascript - 我可以在 Javascript/jQuery 中使用变量作为键吗？

> ID：12397762
> 
> 赞同：0
> 
> 时间：2012-09-13T00:16:46.183
> 
> 标签：javascript, jquery

基本的 Javascript/jQuery 问题：如何使用非文字作为键/值对中的键？我认为以下语法（如下）会解析，但事实并非如此。我正在尝试制作一个动态的对话。我希望按钮文本是可变的。我怎样才能用 Javascript/jQuery 做到这一点？还是我必须在我的 .js 文件上调用 PHP？（所以不想这样做......）

```
function see_menu_custom(t1, m1, t2, m2, t3, m3, t4, m4, t5, m5)
{   
    $(document).simpledialog2(
    { 
        mode: 'button',
        headerText: 'Send Message',
        headerClose: true,
        showModal: true,
        animate: false,
        buttons :
        {
            t1: /******** How can I make this a nonliteral? *********/
            {
                click: function () { 
                    sendMessage(username, token, t1, m1);
                },
                iconpos : "right",
                icon : "arrow-r",
                theme : "e"
            },
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:17:54.347

使用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)。

```
buttons[var] = {}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:00:15.513

括号符号是正确的答案，但是当您似乎也在问如何通过它时，像这样构造

```
function see_menu_custom(t1, m1, t2, m2, t3, m3, t4, m4, t5, m5)
{   
    var myButtons = {};
    myButtons[t1] = {
        click: function () { 
            sendMessage(username, token, t1, m1);
        },
        iconpos : "right",
        icon : "arrow-r",
        theme : "e"
    };
    // rest of buttons
    ...
    // then pass into next step
    $(document).simpledialog2(
    { 
        mode: 'button',
        headerText: 'Send Message',
        headerClose: true,
        showModal: true,
        animate: false,
        buttons : myButtons, // here
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:19:25.767

您只能将字符串用于对象文字，要使用表达式，您必须使用方括号和赋值：

```
buttons[expression] = value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T00:53:27.150

正如其他人指出的那样，您不能使用文字对象表示法来做到这一点。

但是，与将按钮放在数组中相比，我认为使用标题作为键是一种不太自然的表示：

```
function see_menu_custom(t1, m1, t2, m2, t3, m3, t4, m4, t5, m5)
{   
    $(document).simpledialog2(
    { 
        mode: 'button',
        ...
        buttons :
        [
            {
                label: 'My arbitrary string value',
                click: function () { 
                    sendMessage(username, token, t1, m1);
                },
                ...
                theme : "e"
            },
        ] 
```

# prolog - prolog中的代数简化

> ID：12397769
> 
> 赞同：1
> 
> 时间：2012-09-13T00:17:38.470
> 
> 标签：prolog

我正在阅读代数表达式的序言简化，有些部分我不明白。

所以这些是基本的简化

```
 x+0, x-0, 0+x, 0-x   --> x.
  x*1, x/1, 1*x        --> x.
  -1*x, x*(-1), x/(-1) --> –x.
  x+(-x)               --> x–x. 
```

所以给出一个表达式

```
 (x+4)*(2-x) 
```

我该如何推导

```
 (1+0)*(2-x)+(x+4)*(0-1) 
```

?

我不明白推导是如何产生的。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:44:14.037

我猜你的导数是指函数 f(x) = (x+4)*(2-x) 的数学导数。这是一个非常著名的古老且不那么难的计算机代数问题，解决方案最初是用 lisp 编写的。

Prolog 版本是直截了当的。您实施派生规则，例如：

```
d/dx (f + g) = d/dx f + d/dx g  
d/dx (f * g) = d/dx f * g + d/dx g * f
etc.. 
```

我建议您先自己尝试一下，然后再检查例如[deriv.p](http://github.com/jburse/jekejeke-samples/blob/master/jekrun/benchmark/tests/deriv.p)。基于计算机代数的 autodiff 在这里[deriv.p](https://github.com/jburse/jekejeke-devel/blob/master/jekmin/headless/jekmin/frequent/leibniz/deriv.p)。

再见

# facebook - 来自外部网页的直接帖子/消息

> ID：12397772
> 
> 赞同：0
> 
> 时间：2012-09-13T00:17:53.873
> 
> 标签：facebook, external, message, contact, facebook-wall

我希望我们网站的用户能够通过 facebook 与我们联系，而不是仅仅链接到我们的页面，用户必须手动选择在墙上或消息上的帖子，我希望当他们点击 facebook 时是这样的f' 在网站上，它会自动引导他们立即在我们的墙上发帖或向我们发送消息。

这可能吗？

谢谢，

罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:21:13.020

如何将它们链接到

```
https://www.facebook.com/messages/<YourPage> 
```

如果他们以前没有给你发过消息，该页面会自动弹出一个框给你发消息。如果他们有，那么它将显示对话并允许他们像往常一样在底部回复。

# ios5 - ld: 未找到架构 i386 的符号 使用 AVFoundation 时出错

> ID：12397774
> 
> 赞同：2
> 
> 时间：2012-09-13T00:18:05.013
> 
> 标签：ios5, video, avfoundation

我正在尝试使用 AVFoundation Framework 创建视频缩略图。我已正确添加并导入`#import <AVFoundation/AVFoundation.`以下是创建缩略图的代码：

```
AVURLAsset *asset=[[AVURLAsset alloc] initWithURL:[NSURL URLWithString:moviePath] options:nil];
AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
generator.appliesPreferredTrackTransform=TRUE;
CMTime thumbTime = CMTimeMakeWithSeconds(0,30);

AVAssetImageGeneratorCompletionHandler handler = ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error){
    if (result != AVAssetImageGeneratorSucceeded) {
        NSLog(@"couldn't generate thumbnail, error:%@", error);
    }
    [imageButton setImage:[UIImage imageWithCGImage:im] forState:UIControlStateNormal];
    //UIImage *thumbImg=[UIImage imageWithCGImage:im];
};

CGSize maxSize = CGSizeMake(320, 180);
generator.maximumSize = maxSize;
[generator generateCGImagesAsynchronouslyForTimes:[NSArray arrayWithObject:[NSValue valueWithCMTime:thumbTime]] completionHandler:handler]; 
```

当我构建它时，我收到以下错误：

```
Undefined symbols for architecture i386:_CMTimeMakeWithSeconds", referenced from:
  -[photojournal generateImage] in photojournal.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经在 Google 和 Stack Overflow 上查看了类似的问题，共识似乎是添加丢失的文件来编译源代码。我的问题是 - AVFoundation 缺少哪些文件？当我导入框架时，它们不应该都来吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T16:34:17.913

您需要将 Core Media 框架添加到您的项目中，并且

```
#import <CoreMedia/CoreMEdia.h> 
```

CMTime 是核心媒体框架的一部分。我有同样的错误，这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:35:30.017

扩展andrewmobile的答案。除了#import <CoreMedia/CoreMedia.h>，您还需要在构建阶段下的“Link binary with libraries”中添加 CoreMedia.framework。

# ruby-on-rails - Ruby on rails，在更新其他列值时更改列值

> ID：12397776
> 
> 赞同：6
> 
> 时间：2012-09-13T00:18:22.163
> 
> 标签：ruby-on-rails, ruby, activerecord

我在 Rails 模型中有两列相互关联：

```
Article.body
Article.body_updated_on 
```

我想更改`Article.body_updated_on`为`Time.now`，每次`Article.body`都更新。如果任何其他字段更新，则无需发生任何事情。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-13T01:08:25.730

只需在保存回调之前添加到您的文章模型

```
class Article < ActiveRecord:Base

  before_save :update_body_modified

private       # <--- at bottom of model

  def update_body_modified
    self.body_updated_on = Time.now if body_changed?
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:52:49.580

您可以覆盖 body 的默认设置器，或者更好的是，在更新之前使用[回调来设置它。](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)您可以从以下几个选项中进行选择：before_save、before_update ... 取决于您需要的确切时间。

```
 before_save do |article|
   article.body_updated_on = Time.now if article.body_changed?
 end 
```

# javascript - 根据两个条件退出 While 循环

> ID：12397779
> 
> 赞同：5
> 
> 时间：2012-09-13T00:18:37.360
> 
> 标签：javascript

我有一个与这篇文章的答案有关的问题[Javascript code to parse CSV data](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data/1293163#1293163)

我发现我`"\r\n"`最后得到了一个我不想添加到数组中的额外内容。我试图打破while循环......

原来的工作线是

```
 while (arrMatches = objPattern.exec( strData )){ 
```

但我需要打破如果`arrMatches = "\r\n"`

```
while ((arrMatches[ 1 ] != "\\r\\n") && arrMatches = objPattern.exec( strData )){ 
```

但得到一个`Invalid left-hand side in assignment`错误。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T00:37:42.047

只需将两个条件分开，使其更具可读性和可理解性

```
while(arrMatches = objPattern.exec( strData )){

    if(arrMatches[ 1 ] == "\r\n"){
        break;
    }
    /*
     *if(arrMatches[ 1 ] == "\r\n")
     *   break;
     */
     // rest of code
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T01:00:46.497

这种方法应该有效，唯一的问题是 arrMatches 也应该介于两者之间`( )`，以避免`arrMatches`从第二个条件设置为 true。

```
while ((arrMatches = objPattern.exec( strData )) && (arrMatches[ 1 ] != "\\r\\n")) { 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T07:26:06.597

另一种方式：运算符的表达式块`while`可以很容易地拆分为逗号分隔的表达式链，一旦最后一个表达式的计算结果为 0/false，循环就会中断。

**它不等同于逻辑 && 链接**，因为 JS 中的逗号`','`运算符总是返回最后一个表达式。（*感谢 GitaarLab 提醒我这一点*）

在这些示例中，一旦最后一个变量达到 0，循环就会停止，因此计算结果为 false。

```
var i = 10, j = 10;
while (i--, j--) console.log(i);
/*9
8
7
6
5
4
3
2
1
0*/

var i = 10, j = 5;
while (i--, j--) console.log(i);
/*9
8
7
6
5*/

var i = 10, j = 5, k = 3;
while (i--, j--, k--) console.log(i);
/*9
8
7*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T00:38:08.917

您可以尝试一个`while`处理一个条件的循环，在`while`循环内，您有一个`if`检查另一个条件的语句。

例子：

```
while (one condition) {
   if (other condition) {
       do something;
   }
} 
```

这是否是适当的方法，我不完全确定。如果我发现更好的东西，我会更新我的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T00:23:25.800

试试： while ((arrMatches[ 1 ] != "\r\n") && arrMatches == objPattern.exec( strData )){

使用单个“=”，您实际上是在为**arrMatches**分配一个值。为了比较值，您应该使用**==**。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-10-14T18:13:53.643

```
collection = [];
// while loop will run over and over again
while (true) { 
  //declare a variable which will store user input
  var conditionToo = prompt('What is the condition of the weather?');
  if (conditionToo == 'yes') { 
    // if the variable conditionToo contains the string 'yes'
    do something; //append values to the collection
  }
  if else(conditionToo == 'no') {
    // if the variable conditionToo contains string 'no'
    alert('Goodbye cool human :-)');
    break;
   }
} 
```

# android - 如何在 Android 中更改 logcat 缓冲区的大小？

> ID：12397780
> 
> 赞同：32
> 
> 时间：2012-09-13T00:18:52.327
> 
> 标签：android

我注意到 logcat 缓冲区的大小在不同的设备上有所不同。假设我在我的设备上有 root 权限，有没有办法在运行时更改主缓冲区的缓冲区大小？如果不是，那么假设我可以重建 Android 映像，我该如何在编译时更改它？我希望将其放大以用于诊断目的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-03-07T09:12:24.443

**“开发者选项”中的“记录器缓冲区大小选项”**

它允许将大小更改为 64k 和 16M 之间的几个值。

`adb logcat -g`然后立即显示更新限制。

在 5.1.1 上测试，[这个答案](https://stackoverflow.com/a/32094784/895245)声称它是最近添加的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-05-26T11:05:49.370

设置日志环缓冲区的大小

```
adb logcat -G <size> 
```

附加 K 或 M 以指示千字节或兆字节

例子：`adb logcat -G 512K`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-06-24T04:51:20.677

### 查看当前缓冲区大小

```
adb logcat -g 
```

### 设置所有类型的缓冲区大小（main、system、crash）

```
adb logcat -G 16M # 16M can be replace by (128K ~ 16M) 
```

### 设置特定类型的缓冲区大小（main、system、crash）

```
adb logcat -b system -G 8M # system can be replaced with 'main' or 'crash' 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-13T00:30:56.267

根据新闻组*Android 开发者*，*[logcat 缓冲区大小](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/fsMZFz9IoNo)*：

> 设备上的日志缓冲区为 64 KB。时间戳、进程 ID 和日志级别以紧凑格式存储，因此您实际上可能会从`logcat -d -v <mode>`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-12T10:08:11.057

缓冲区大小由内核决定，位于 */drivers/staging/android/logger.c 中。

使用哪些缓冲区以及大小随 Android 版本而变化。[Android 3.0](https://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29) (Honeycomb) 和更新版本也有一个系统缓冲区，这四个都是 256 KB。您必须重新编译内核才能更改它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-13T00:31:44.080

不，根据[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/fsMZFz9IoNo)，设备上的日志缓冲区似乎是 64 KB。时间戳、进程 ID 和日志级别以紧凑格式存储，因此您实际上可能会从`logcat -d -v <mode>`.

另请参阅 Stack Overflow 问题*[Logcat 的大小限制是多少？](http://developer.android.com/tools/debugging/debugging-log.html)*.

无论如何，为了将日志保存在其他地方，您可以使用*[Reading and Writing Logs](http://developer.android.com/tools/debugging/debugging-log.html)*。那也许可以帮助你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-07T09:29:13.857

为了通过 adb 将特定 Android 设备的 logcat 缓冲区设置为 16Mb，我使用了：

`adb -s 2615a1d4e3174a6e logcat -G 16M`

但你可以只使用：

`adb logcat -G 16M`

或设置以前的缓冲区大小：

`adb logcat -G 256K`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-12T18:05:27.137

您可以在属性文件 android-studio\bin\idea.properties 中增加idea.cycle.buffer.size=1024 的值。这对我有用。

# themes - Sublime Text 2 查看主题的属性

> ID：12397787
> 
> 赞同：0
> 
> 时间：2012-09-13T00:19:53.240
> 
> 标签：themes, sublimetext2, sublimetext

我想查看用于 PHP 的 Sublime Text 2 主题中使用的所有属性。在哪里可以查看设置？

例如，我在哪里可以查看 Monokai 的所有属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:43:36.787

在 Windows7 上：（注意 - 您必须查看隐藏文件/文件夹才能看到 AppData）

`C:\Users\username\AppData\Roaming\Sublime Text 2\Packages\Color Scheme - Default\Monokai.tmTheme`

您可以复制该文件并将其移动到一个新文件夹`...\Packages\Users`中，这样如果有更新会更改它，它就不会被覆盖。我为 Twilight 主题做了这个，所以我可以有一个更灰色的文本，而不是纯文本的白色。如果你这样做，`Preferences`=>`Color Scheme`现在将有两个选项。将鼠标悬停在用户（或您命名的文件夹）上，它将具有您修改后的主题。

**注意：** PHP 没有明确的设置；这些设置似乎适用于所有语法。你会`<string>Comment</string>`在下面几行看到类似的标签和一个十六进制值。这将是任何语法中注释的颜色代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:22:52.567

```
~/Library/Application Support/Sublime Text 2/Packages/Color Scheme - Default/Monokai.tmTheme 
```

和

```
~/Library/Application Support/Sublime Text 2/Packages/PHP 
```

# android - Android 尺寸，真正值得关注。使用什么文件夹？

> ID：12397788
> 
> 赞同：0
> 
> 时间：2012-09-13T00:20:06.473
> 
> 标签：android, scale, resolution, pixel, android-screen-support

我已经阅读了很多关于 Android 缩放的内容，并且有很多不同的意见。但我觉得理解这一点非常重要，所以也许有人可以解释一下。

例如，我正在使用大量 .png-pics 的位图制作游戏，我将所有内容都放在 res/drawable/mdpi 文件夹中。我只打算为手机推出这款游戏，所以没有平板电脑。

我使用的是 hdpi 的银河系，一切看起来都很好。但是在带有 mdpi 和 xhdpi 的手机上看起来会很好吗？我没有使用任何密度像素，我尝试使用`canvas.setDensity(320)`但后来我在某处读到应该避免这种情况。

有人对这个有经验么？因为我没有，也无法在其他手机上测试，因为我所有的朋友都有 iPhone。

我只是担心我的位图在其他不像我的 hdpi 的手机上看起来很大或很小，这当然会毁了游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:23:58.873

如果您不提供 hdpi 资源，您的游戏在 hdpi 设备上看起来会很糟糕。这就是为什么 - 你的基本密度是 mdpi。因此，您的 400x400 dp 图像将仅在 mdpi 设备上按原样呈现。如果您想在 ldpi 上具有相同的大小，则必须将图像缩放 0.75（没什么大不了的），但是对于 hdpi，您的图像需要大 1.5 倍，对于 xhdpi 设备，则需要 mdpi 大小的 2.0 倍。因此，如果没有专用的可绘制对象，则会发生高档。而且这很少看起来不错（在大多数情况下，您最终会得到模糊的图形）。所以我在开发时总是把drawables放在res/drawable-mdpi文件夹中。一旦我准备好发布代码，我就会将 hdpi 资源添加到 res/drawables-hdpi。我个人并不关心 ldpi 设备，因为我的目标设备几乎没有比 mdpi 密度低的设备，如果有人会拥有这样的设备，那么我可以使用 android 框架进行缩减。但是升级是另一回事-您总是会得到不好的结果（模糊的图像），因为您根本无法在没有伪像的情况下从较小的位图制作更大的位图（不，CSI 谎言；）-您根本没有足够的数据，因此您必须进行推断。所以最好自己提供合适的drawables，否则你的最终用户会抱怨，你的应用程序可能看起来不像它应该的那么好。

# javascript - 如何防止 jQuery onclick 事件中的 Ruby 方法在页面刷新时执行

> ID：12397789
> 
> 赞同：0
> 
> 时间：2012-09-13T00:20:21.993
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我有一个嵌套在 jQuery onclick 事件中的 Ruby 方法，我希望在单击 div 时执行该方法。这行得通；但是，该方法也在页面刷新时执行。为什么它也会在页面刷新时执行，有没有办法将其限制为仅 onclick？

```
 $(function() { 
   $('.myDiv').click(function(){
      <% foo_bar %>
   });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:25:44.847

`foo_bar`当您单击 div 时，我看不到如何执行。Ruby 在服务器端执行，jQuery 在客户端执行。您无法从客户端执行 ruby​​ 代码。
您`foo_bar`是在刷新页面上执行的，因为服务器需要对其进行解释以将其结果放入`<% %>`标签中。但是，当您单击 div 时，什么都不会发生，因为 jquery 函数将为空（因为您没有编写`<%= %>`）。即使你写了`<%= %>`，*jQuery 也只会执行`foo_bar`结果*，而不是函数本身。

也许您可以在`foo_bar`. 如果您想与服务器交互，您将需要类似`Ajax`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:32:45.417

请查看我写的[这篇博文。](http://dgrmm.wordpress.com/2012/07/13/web-application-101/)简而言之，ruby 代码在服务器上执行，而在客户端运行的 javascript 什么也看不到。要让 javascript 与 ruby​​ 交互，您需要通过某种 ajax 请求向服务器发起一个请求。像 jquery 这样的库可以帮助解决这个问题。

# jquery - 更新输入的插入符号位置并在放置事件上插入文本

> ID：12397792
> 
> 赞同：6
> 
> 时间：2012-09-13T00:20:39.353
> 
> 标签：jquery, asp.net, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

## 背景

我正在尝试使用 jQuery UI Draggable 和 Droppable 组件`<div>`在内部拖放一个元素。`<input>`目前，我必须将插入符号放在我希望文本出现的位置，然后将插入拖放`<div>`到`<input>`.

## 问题

我不是 100% 确定这是否可行，但我想要做的是让插入符号自动更新其位置，因为我`<div>`拖动`<input>`.

[jsFiddle 示例在这里...](http://jsfiddle.net/Seany84/pnRyY/)

## CSS

```
.draggable
{
    width: 250px;
    height: 20px;
    background-color: #e6eaff;
    border: 2px solid #3399cc;
    margin-bottom: 1em;
    padding: 4px;
    cursor: default;
}

.active
{
    border: 2px solid #6699ff;
}

#droppable
{
    font-size: 14pt;
    width: 400px;
}

#droppableHolder
{
    margin-top: 5em;
} 
```

​</p>

## HTML

```
<div class="draggable">Text 1</div>
<div class="draggable">Text 2</div>
<div class="draggable">Text 3</div>
<div class="draggable">Text 4</div>
<div id="droppableHolder">
    Drop in the text box below:<br />
    <br />
    <input type="text" id="droppable" value="INSERT ANYWHERE" />
</div>​ 
```

## Javascript

```
$(".draggable").draggable({
    revert: true,
    //revert: false,
    helper: 'clone',
    start: function(event, ui) {
        $(this).fadeTo('fast', 0.5);
        //$(this).css('cursor', 'text');
        //$(this).hide();
    },
    stop: function(event, ui) {
        $(this).fadeTo(0, 1);
        //$(this).show("explode", { pieces: 16 }, 2000);
    }
});

$("#droppable").droppable({
    hoverClass: 'active',
    drop: function(event, ui) {
        //this.value += $(ui.draggable).text();
        //alert($("#droppable"));
        insertAtCaret("droppable", $(ui.draggable).text());
    },
    over: function(event, ui) {
        //$(this).css('cursor', 'text');
    }
});

function insertAtCaret(areaId,text) {
    var txtarea = document.getElementById(areaId);
    var scrollPos = txtarea.scrollTop;
    var strPos = 0;
    var br = ((txtarea.selectionStart || txtarea.selectionStart == '0') ? 
        "ff" : (document.selection ? "ie" : false ) );
    if (br == "ie") { 
        txtarea.focus();
        var range = document.selection.createRange();
        range.moveStart ('character', -txtarea.value.length);
        strPos = range.text.length;
    }
    else if (br == "ff") strPos = txtarea.selectionStart;

    var front = (txtarea.value).substring(0,strPos);  
    var back = (txtarea.value).substring(strPos,txtarea.value.length); 
    txtarea.value=front+text+back;
    strPos = strPos + text.length;
    if (br == "ie") { 
        txtarea.focus();
        var range = document.selection.createRange();
        range.moveStart ('character', -txtarea.value.length);
        range.moveStart ('character', strPos);
        range.moveEnd ('character', 0);
        range.select();
    }
    else if (br == "ff") {
        txtarea.selectionStart = strPos;
        txtarea.selectionEnd = strPos;
        txtarea.focus();
    }
    txtarea.scrollTop = scrollPos;
}
​ 
```

[jsFiddle 示例在这里...](http://jsfiddle.net/Seany84/pnRyY/)

# stream - 为什么不可能将 memHtoD 与 GPU 内核与 GTX 590 重叠

> ID：12397798
> 
> 赞同：1
> 
> 时间：2012-09-13T00:21:05.587
> 
> 标签：stream, gpu, overlap

我用 cudaSDK“simpleStreams”测试了我的 GTX590 和 GTX680。时间线结果如图所示。谁能解释为什么在 GTX 590 memC!pyDtoH 不能与 GTX 680 中发生的先前内核计算重叠？

![GTX590](../Images/94e37018632f2680222e8bdda6bfb5ab.png)

![GTX680](../Images/f8ffb31a0da4b6627c5fbe9027ad40bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:17:21.053

我的 GTX 480 也有类似的行为。我怀疑 Fermi 有问题？也许与wddm有关？（此处使用 Windows 7 x64）

我尝试了许多不同的驱动程序，并且所有驱动程序都显示出相同的错误行为。你知道 GK104 的测试证明是正确的，我已经在旧的 8800 GTS 上测试过它，它确实有效。看来费米卡不起作用：/![在此处输入图像描述](../Images/5503ff301da6a27d35a0e02b9b3cc5fe.png)

**编辑：**

另请参阅 [如何在 CUDA 应用程序中重叠内存传输和内核执行？](https://stackoverflow.com/questions/14456236/how-can-i-overlap-memory-transfers-and-kernel-execution-in-a-cuda-application)

# jquery - 如何将我的简单内容滑块变成插件？

> ID：12397799
> 
> 赞同：0
> 
> 时间：2012-09-13T00:21:09.917
> 
> 标签：jquery, plugins

我创建了一个非常简单的 jQuery 内容滑块。我想把它变成一个插件，这样我就可以轻松地初始化并在初始化时指定的元素上使用它，而不必更改`.each`. 这是代码：

```
$('.subSlider').each(function(){
    var numberOfSlides = parseInt($(this).find("ul li").length);
    var eachWidth = parseInt($(this).find("ul li").css("width").replace("px", ""));
    var eachBorder = parseInt($(this).find("ul li").css("border-right-width").replace("px",""))+parseInt($(this).find("ul li").css("border-left-width").replace("px",""));
    var eachPadding = parseInt($(this).find("ul li").css("padding-right").replace("px", ""))+parseInt($(this).find("ul li").css("padding-left").replace("px", ""));
    var totalItemWidth = eachWidth+eachBorder+eachPadding;
    var totalWidth = totalItemWidth*numberOfSlides;

    function showHideNav(elementToMove){
        if (elementToMove.css("margin-left") == "0px"){
            elementToMove.parent().parent().find('.subSliderNav').not('.next').hide();
        } else {
            elementToMove.parent().parent().find('.subSliderNav').not('.next').show();
        };

        var overlap = totalWidth-elementToMove.parent().parent().width();
        if (parseInt(elementToMove.css("margin-left").replace('px','')) <= -overlap){
            elementToMove.parent().parent().find('.subSliderNav.next').hide();
        } else {
            elementToMove.parent().parent().find('.subSliderNav.next').show();
        }
    }

    $(this).parent().prepend('<div class="subSliderNav"></div>');
    $(this).parent().prepend('<div class="subSliderNav next"></div>');

    $(this).parent().find('ul').width(totalWidth);
    $(this).parent().on("click", ".subSliderNav", function(){
        var direction = "+";
        if ($(this).hasClass('next')){
            direction = "-";
        }
        var elementToMove = $(this).parent().find('.subSlider ul');
        elementToMove.animate({
            "margin-left": direction+"="+totalItemWidth
        }, 200, function(){
            showHideNav(elementToMove);
        });
    });
    showHideNav($(this).find('ul'));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:52:41.250

我会试一试，有很多猜测，因为那里发生了一些奇怪的事情，我尝试至少尽可能多地清理，并得到了这个，不知道它是否适用于您的标记或不是 ：

```
(function( $ ) {
    $.fn.subSlider = function() {
        var elems = this.find("ul li"),
            numberOfSlides = elems.length,
            eachWidth = parseInt(elems.css("width")),
            eachBorder = parseInt(elems.css("border-right-width"))+parseInt(elems.css("border-left-width")),
            eachPadding = parseInt(elems.css("padding-right"))+parseInt(elems.css("padding-left")),
            totalItemWidth = eachWidth+eachBorder+eachPadding,
            totalWidth = totalItemWidth*numberOfSlides;

        function showHideNav(elementToMove){
            var overlap = totalWidth-elementToMove.parent().parent().width();
            elementToMove.parent().parent()
                         .find('.subSliderNav').not('.next')
                         .toggle(elementToMove.css("margin-left") == "0px")
                         .end().end()
                         .find('.subSliderNav.next')
                         .toggle(parseInt(elementToMove.css("margin-left")) <= -overlap);
        }

        this.parent().prepend('<div class="subSliderNav next"></div><div class="subSliderNav"></div>') 
            .find('ul').width(totalWidth)
            .end().on("click", ".subSliderNav", function(){
                var direction = $(this).hasClass('next')?"-":"+";
                $(this).parent().find('.subSlider ul').animate({
                    "margin-left": direction+"="+totalItemWidth
                }, 200, function(){
                    showHideNav($(this));
                });
            });
        showHideNav($('ul', this));
    };
})( jQuery );
​ 
```

# c# - Web 服务捕获响应

> ID：12397801
> 
> 赞同：0
> 
> 时间：2012-09-13T00:21:21.443
> 
> 标签：c#, .net, web-services, httpwebrequest, asmx

我的 Web 服务调用一个返回值的 url，我必须在不同的函数中捕获和使用该值。

我最近才开始使用 Web 服务，并且对在 Web 服务中调用 url 的概念非常陌生*（以前在这个论坛上询问并回答了那些需要更多信息的人）*

[调用 url 的 Webservice 方法](https://stackoverflow.com/a/12378568/1270384)

我的网络服务是：保险服务。

我的客户通过保险服务向我发送数据，该服务调用返回保险号码的 url。

我如何获取这个保险号码？我以为我可以使用 session 来捕获它，但我错了，保险 Number 为 null 并带有对象引用错误。

```
int insuranceNo;
insuranceNo = Convert.ToInt16(HttpContext.Current.Session["insuranceNo"]); 
```

它必须与响应有关吧？

我以为我可以尝试用谷歌搜索我正在寻找的东西，但老实说，我不知道该怎么称呼它才能搜索它。我想我会在这个论坛上再试一次，因为我在这里找到了这个函数第一部分的答案。

调用url的代码：

```
 string url = string.Format("www.insuranceini.com/insurance.asp?fileno1={0},&txtfileno2={1‌​}&username={2}&userid={3}&dteinsured={4}&dteDob={5}&InsurerName={6}", txtfileno1, txtfileno2, username, userid, dteinsured,dteDob,InsurerName)
WebRequest request = HttpWebRequest.Create(url);
using(WebResponse response = request.GetResponse())
{
    using(StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        string urlText = reader.ReadToEnd();
        //Do whatever you need to do
    }
} 
```

我将不胜感激任何类型的指针或地方开始寻找或任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:11:16.380

代码开始给出不同的错误。关闭它并参考：[Datetime Conversion and Parsing](https://stackoverflow.com/q/12417770/1270384)

谢谢大家的有用意见。

# jquery - jQuery哪个性能更好？

> ID：12397804
> 
> 赞同：0
> 
> 时间：2012-09-13T00:22:01.093
> 
> 标签：jquery, html

哪个性能更好？

```
$('input[data-confirm],a[data-confirm],button[data-confirm]'); 
```

或者

```
$('[data-confirm]'); 
```

显然`$('[data-confirm]')`选择器的版本更加灵活，这是否意味着 jQuery 必须扫描页面中的每个元素以查看它是否具有 data-confirm 属性。我会更好地使用一个类吗？我喜欢使用，`data-confirm`因为我可以把它放在值中。

```
<input type="submit" data-confirm="Are you sure you want to do this sir?" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:27:40.210

为什么不使用一个类 AND `data-confirm`，这将允许您具体并使用该`data-confirm`属性来精确定位您想要的确切元素，而无需让 jquery 浏览其他所有内容。这将确保无论使用哪种浏览器，您的定位都能更快地工作。`id`如果你使用一个而不是一个类，你可能会再次减少几纳秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:30:41.300

基于[http://www.componenthouse.com/article-19](http://www.componenthouse.com/article-19)使用元素选择器比单独使用属性选择器要快得多（这里有一个关于选择器性能的很好的讨论[提高 jQuery 选择器性能的好方法？](https://stackoverflow.com/questions/46214/good-ways-to-improve-jquery-selector-performance)）。

就我个人而言，我会首先使用属性选择器，就像您说的那样它更灵活，如果您遇到性能问题，您可以适当地审查这个选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T00:32:57.137

正如@Guffa 所说，这真的取决于浏览器。使用 Chrome 21.0.1180.89 进行测试，属性 equals 选择器*稍*快：

这是 jsperf：http: **[//jsperf.com/attrvstag](http://jsperf.com/attrvstag)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T00:29:09.077

这取决于浏览器支持什么。如果选择器可以交给浏览器进行评估，那么任何一个都足够快。

如果没有，第一个会更快，因为内置了查找元素的函数，可以被 Sizzle 引擎使用。对于第二个，它必须遍历文档中的所有元素。

# objective-c - 如何支持更高的 iPhone 5 屏幕尺寸？

> ID：12397811
> 
> 赞同：22
> 
> 时间：2012-09-13T00:22:59.933
> 
> 标签：objective-c, ios, iphone-5

我的应用程序显示为字母盒，我希望它正确拉伸以填满整个屏幕。我正在创建我的主窗口：

```
self.mainWindow = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

但我仍然得到信箱行为。是否需要设置其他设置才能获得设备上主屏幕的完整尺寸？

如果可以的话，我会尽量避免使用任何启动图像。我试过这个：

```
self.mainWindow.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

它似乎没有帮助。我查看了所有 Info.plist 选项，发现没有任何匹配项。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T01:10:48.050

我不支持您避免启动图像的想法，因为它们存在是有原因的，但如果您*真的*出于某种原因想要这样做，您应该使用`Default-568h@2x.png`文件（640x1136 像素），就像您在创建新项目时获得的文件一样。它只是纯黑色，不占用大量磁盘空间，并且看起来好像没有任何启动图像。

除了设置 4 英寸的视网膜启动图像外，目前还没有已知的方法可以在新屏幕上获得 1136 像素的完整高度。

# asp.net-mvc - 将 Linq 与 LLBLgen Pro 一起使用

> ID：12397812
> 
> 赞同：0
> 
> 时间：2012-09-13T00:23:03.660
> 
> 标签：asp.net-mvc, vb.net, llblgenpro

## 我正在尝试使用 MVC3、LLBLGEN PRO 执行以下操作，它向我抛出了以下错误：

映射类型：LLBLGenProQuery `1 -> LLBLGenProQuery`1 SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery `1[[Mail.DAL.EntityClasses.TblCostCentreEntity, Mail.DAL, Version=1.0.4638.16064, Culture=neutral, PublicKeyToken=null]] -> SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery`1[[Mail.Model.CostCentre, Mail.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]

目标路径：LLBLGenProQuery`1

源值：SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery`1[Mail.DAL.EntityClasses.TblCostCentreEntity]

* * *

```
Public Function GetAllCostCentres() As SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery(Of Model.CostCentre) Implements ICostCentreRepository.GetAllCostCentres

    Dim metaData As New LinqMetaData
    Dim q = From p In metaData.TblCostCentre _
                Select p
    Mapper.CreateMap(Of SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery(Of CostCentre), EntityClasses.TblCostCentreEntity)()
    Mapper.Map(Of SD.LLBLGen.Pro.LinqSupportClasses.LLBLGenProQuery(Of CostCentre))(q)
    'Select New CostCentre With {.Active = p.Active, .CostCentre = p.CostCentre, .CreatedBy = p.CreatedBy, .DateCreated = p.DateCreated, .DateLastModified = p.DateLastModified, .ModifiedBy = p.ModifiedBy, .CostCentreID = p.CostCentreId}

    Return q
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:58:05.120

可查询的

（http://llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/hh_goto.htm#Using%20the%20generated%20code/Linq/gencode_linq_gettingstarted.htm#LinqMetaData）

这是一个查询，它将使编译器生成代码，该代码在运行时创建一个表达式实例树，代表整个查询，简而言之就是一个表达式树。表达式树不能直接执行，必须对其进行解释才能执行表达式树中指定的内容。这就是 Linq 提供程序（如 Linq to LLBLGen Pro）所做的：它接受一个表达式树，将其转换为它可以理解的元素，解释这些元素并生成该查询的可执行形式。

ILLBLGenProQuery (http://llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/hh_goto.htm#Using%20the%20generated%20code/Linq/gencode_linq_gettingstarted.htm#ILLBLGenProQuery)

在 LinqMetaData 生成的 IQueryable 元素上定义的接口。该接口允许您通过调用 Execute 方法来执行查询。这样做的好处是您可以在其本机容器中获取查询结果，例如实体集合。另一个优点是，要获取结果列表，提供者不必完整遍历结果，并将结果复制到列表中：返回的结果已经在它们最初存储的容器中。

# apache - 如何使用 .htaccess 获取自定义（和友好）的 url？

> ID：12397814
> 
> 赞同：0
> 
> 时间：2012-09-13T00:23:13.460
> 
> 标签：apache, .htaccess

假设我有一个类似的网址`http://abc.com/index.php?cat=37&subsubcat=0&subcat=199&page=product_detail&product_id=1661`

我可以用它`.htaccess`来重定向/重写这个 URL`http://abc.com/simplerName`吗？

我在 SO 上发现了很多要求友好 URL 的帖子，但我想更进一步，即我想指定**子文件夹**名称应该是什么（在上面的示例中，它是“ `simplerName`”）。现在，我有 10 个要自定义的 URL，并且为每个 URL 指定 10 条规则非常棒。

但我不确定如何使用`.htaccess`. 这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:38:36.270

因为您使用不存在的“子文件夹”来指示哪个规则应该匹配什么，所以这将非常简单：

你想要这样的东西：

```
RewriteEngine On

RewriteRule ^/?category/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/ /index.php?cat=$1&subsubcat=$2&subcat=$3&page=$4&product_id=$5 [L]

RewriteRule ^/?something-else/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/ /index.php?something=$1&subsub=$2&sub=$3&page=$4&something_id=$5 [L] 
```

等等

然后，您需要将提供的所有 URL 更改为外观友好的 URL，而不是带有查询字符串的 URL。

# google-analytics - 带有消息“经过身份验证后无法添加服务”的“Google_Exception”

> ID：12397815
> 
> 赞同：3
> 
> 时间：2012-09-13T00:23:15.407
> 
> 标签：google-analytics, oauth-2.0, google-authentication

我正在使用 Oauth 2.0 使用 Google Analytics 开发 WP 插件。

我所有的身份验证和数据提取都可以正常工作，除了这个问题：我第一次获得新的 Google 授权码（例如：“4/-xbSbg....”）并进行身份验证，然后尝试调用新的 Google_AnalyticsService() 对象，它会抛出错误：

带有消息“经过身份验证后无法添加服务”的“Google_Exception”

这是在第 109 行：[http ://code.google.com/p/google-api-php-client/source/browse/trunk/src/apiClient.php?r=258](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/apiClient.php?r=258)

一旦我刷新调用此代码的页面，它就可以正常工作 - 即 check_login() 的第一个分支正常，但身份验证调用无法正常工作。

您会看到代码似乎在抱怨，因为我首先进行了身份验证，并且消息说我不应该这样做。评论和代码真的让我很困惑我的问题是什么（登录代码还不是很干净，我意识到）。

重要提示：我正在使用 Google Auth for Installed Apps，因此我们要求用户提供身份验证代码，并使用它来获取身份验证令牌。

get_option()、set_option() 和 update_option() 是不属于问题的 WP 本机函数

这是我的代码：

```
class GoogleAnalyticsStats
{
var $client = false;

function GoogleAnalyticsStats()
{       
$this->client = new Google_Client();

$this->client->setClientId(GOOGLE_ANALYTICATOR_CLIENTID);
$this->client->setClientSecret(GOOGLE_ANALYTICATOR_CLIENTSECRET);
$this->client->setRedirectUri(GOOGLE_ANALYTICATOR_REDIRECT);  
$this->client->setScopes(array(GOOGLE_ANALYTICATOR_SCOPE));

// Magic. Returns objects from the Analytics Service instead of associative arrays.
$this->client->setUseObjects(true);
}

function checkLogin()
{
$ga_google_authtoken  = get_option('ga_google_authtoken');
if (!empty($ga_google_authtoken)) 
{
        $this->client->setAccessToken($ga_google_authtoken);
}
else
{
    $authCode = get_option('ga_google_token');

    if (empty($authCode)) return false;

    $accessToken = $this->client->authenticate($authCode);
    $this->client->setAccessToken($accessToken);
    update_option('ga_google_authtoken', $accessToken);         

}   

return true;
 }

function getSingleProfile()
{
$analytics = new Google_AnalyticsService($this->client);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:52:29.623

您需要进入`$analytics = new Google_AnalyticsService($this->client);`内部`function GoogleAnalyticsStats()`，最好将 $analytics 转换为成员变量。

```
class GoogleAnalyticsStats
{
  var $client = false;
  var $analytics = false;

  function GoogleAnalyticsStats()
  {       
    $this->client = new Google_Client();

    $this->client->setClientId(GOOGLE_ANALYTICATOR_CLIENTID);
    $this->client->setClientSecret(GOOGLE_ANALYTICATOR_CLIENTSECRET);
    $this->client->setRedirectUri(GOOGLE_ANALYTICATOR_REDIRECT);  
    $this->client->setScopes(array(GOOGLE_ANALYTICATOR_SCOPE));

    // Magic. Returns objects from the Analytics Service instead of associative arrays.
    $this->client->setUseObjects(true);

    $this->analytics = new Google_AnalyticsService($this->client);
  }
  ... 
```

现在，您可以从内部调用分析 API `getSingleProfile`。

# jquery - 使用多个 jquery 版本库

> ID：12397816
> 
> 赞同：1
> 
> 时间：2012-09-13T00:23:17.217
> 
> 标签：jquery

我有一个滑块和一个导航栏，都需要使用不同的 jquery 版本。

滑块使用 1.7.2 而导航使用 1.4.2

```
 <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>

    <script type="text/javascript" src="js/jquery-1.4.2.js"></script>
    <script type="text/javascript">
    var $jq = $.noConflict(true);
    </script>

<!-- NAVIGATION -->
    <script type="text/javascript">
    $jq(document).ready(function() {
        $jq('#main-image-box').children().removeClass('facets').end().facets({
            control: 'ul#mainlevel',
            clipSpacing: 1,
            animationSpeed: 400,
            beforeMax: function(index) {
                $('#main-image-box .clip:eq('+index+') .container').show();
            },
            beforeMin: function(index) {
                $('#main-image-box .clip:eq('+index+') .container').hide();
            }
        });
    });
    </script>

<!-- SLIDER -->
    <script type="text/javascript" src="js/jquery.nivo.slider.js"></script>
        <script type="text/javascript">

       (window).load(function(){
            ('#slider').nivoSlider();
        });
        </script> 
```

如您所见，我尝试使用 noconflict 但它不起作用，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:25:48.933

导航*需要*1.4.2吗？？如果确实如此，我会感到惊讶。

因此，只需摆脱旧版本，然后尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:26:53.207

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script>
var $jVersion7 = $.noConflict(true);
</script>

<script type="text/javascript" src="js/jquery-1.4.2.js"></script>
<script type="text/javascript">
var $jVersion4 = $.noConflict(true);
</script> 
```

请注意，如果您使用的导航插件**必须使用 jQuery 1.4.2 ONLY**，最好选择一个新插件并处理旧版本。

jQuery 有很多插件。

# video - 是否可以在 phonegap 中播放 flv/mp4？

> ID：12397822
> 
> 赞同：0
> 
> 时间：2012-09-13T00:24:11.437
> 
> 标签：video, cordova, flv, mp4

是否可以有一个在 phonegap 中播放 flv/mp4 的内置播放器？我不想使用第三方应用程序，只是打开链接的内置播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:03:23.300

要播放 flv，您需要第三方库，因为没有 ios 或 android 天真地支持它，但对于 mp4，您可以使用 phonegap media api：

```
 // Audio player
    //
    var my_media = new Media(src, onSuccess, onError);

    // Update media position every second
    var mediaTimer = setInterval(function() {
        // get media position
        my_media.getCurrentPosition(
            // success callback
            function(position) {
                if (position > -1) {
                    console.log((position) + " sec");
                }
            },
            // error callback
            function(e) {
                console.log("Error getting pos=" + e);
            }
        );
    }, 1000); 
```

有关更多信息，请参阅：[http ://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html)

# sql - SQL：连接操作的并行性如何在“无共享”架构中准确工作？

> ID：12397824
> 
> 赞同：0
> 
> 时间：2012-09-13T00:25:07.607
> 
> 标签：sql, join, parallel-processing, relation

我目前正在阅读一本关于 DBMS 中的并行性的书，我发现很难理解并行性在连接操作中是如何工作的。

假设我们有 10 个系统，每个系统都有各自的磁盘空间和主存。有一个网络，系统可以通过该网络相互通信，例如共享数据。

现在假设我们有以下操作：*A(X,Y) JOIN B(Y,Z)*

表 A 和 B 太大，所以我们想使用并行性来获得更好的整体计算速度。

我们所做的是对 A 和 B 表的每条记录的“Y”属性应用哈希函数，然后将这些记录发送到不同的系统。然后，每个系统都可以使用本地算法来加入他们获得的记录。

我不明白的是，初始哈希函数到底在哪里应用，初始表 A 和 B 到底存储在哪里？

当我阅读时，我认为我们有另一个“主”系统，它也有自己的磁盘空间，在这个空间里我们有所有的初始信息，即表 A 和 B 及其所有记录。该系统使用自己的主存储器来应用初始散列函数，该函数为每条记录确定系统最终将去往并被处理的总共 10 条记录。

但是在阅读后我陷入了以下示例（我从希腊语翻译）

*假设我们有两个表 R(X,Y) JOIN S(Y,Z)，其中 R 有 1000 页，S 有 500 页。假设我们有 10 个可以并行使用的系统。所以我们首先使用哈希函数来确定我们应该将每条记录发送到哪里。读取表 R 和 S 所需的 I/O 总数为 1500，即每个系统为 150。**每个系统将有 15 页数据，这些数据是其余系统所必需的，因此它将 135 页发送到其他九个系统。因此，总通信量为 1350 页。***

我真的不明白粗体部分。为什么一个系统必须向其他系统发送任何数据？我之前所说的“主要”系统不做这项工作吗？

我想象这样的事情：

```
 main_system
                  ||
                  \/
            apply_hash(record)
                  ||
                  \/
              send record to the appropriate system
              / /  /  /  /  /  /  /  /  /  
            s1 s2 s3 s4 s5 s6 s7 s8 s9 s10 
```

现在所有系统都有自己的记录，它们应用本地算法并将结果提供给输出。系统之间没有通信，我在这里缺少什么？这本书是否使用了不同的方法，如果是这样，是哪种方法，因为我已经阅读了同一个单元 3 次，但我仍然不明白（也许翻译不好，但不确定）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:29:03.427

我猜测您的连接是您的本地客户端。因为它连接到所有机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:44:17.240

在无共享系统中，数据通常在创建数据时跨处理器进行分区。尽管数据库可以无共享，但最好的文档可能是 Hadoop 和 HDFS（Hadoop 分布式文件系统）。

函数将行分配给分区。一些示例是： 循环，其中新行一个接一个地分配给处理器；基于范围，其中根据列的值将行分配给处理器；基于散列，其中行根据值的散列分配给处理器。对数据进行分区的过程与 SQL Server 和 Oracle 等不在无共享环境中的数据库中的“分区”非常相似。

如果您的联接对两个表都使用了分区键，并且分区方法相同，则数据已经是本地的。否则，需要重新分配一个或两个表以继续处理。

在您引用的部分中，您可能对算术感到困惑。请记住，如果您在 10 个处理器上有 1500 个页面，则每个处理器平均有 150 个页面。这些页面需要重新分发。假设您是处理器 3。大约 15 页将转到处理器 1；另一个 15 到处理器 2。另一个到处理器 3。等等！您不必发送这些；他们已经在正确的位置。您只需将 9*15 = 135 个页面发送到其他处理器。

关键思想是，相同的处理器在无共享环境中存储数据作为处理。

# c - 与向控制台输出相同内容相比，为什么我的 C 程序的文件输出缺少最后几行？

> ID：12397830
> 
> 赞同：0
> 
> 时间：2012-09-13T00:25:47.700
> 
> 标签：c, file-io

我正在使用以下代码。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(void)
{   
 int two=0, two2 = 0;
 int cast11, cast12,c1157,c1257;
 static const char filename[] = "clearedacg_filter.txt";
 static const char filename2[] = "FinalVariantReferenceTable_FilterHomVarArcLiverDR_sorted.txt";
 char* chrarray[22] = {"chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chrX","chrY","chrM"};    
 FILE *file3 = fopen("AllSNPcounts_filter.txt","w");
 FILE *file4 = fopen("AllSNPcounts_nonhits.txt","w");
 char word[3];
 char temp[] = "chr1";
 char* dp4 = "DP4";
 FILE *file = fopen(filename, "r");
 unsigned int i,j,k,sum;
 int count = 0;
 int dp4_field = 0;

 FILE *file2;
 file2 = fopen(filename2, "r");
 if ( file != NULL )
 {
  char line[BUFSIZ],line2[BUFSIZ];
  char one[20], three[22], five[100], four[20], four2[20], one2[20], three2[22], five2[100], six[20], six2[20], seven[20], seven2[20];

  fgets(line, sizeof line, file); 
  fgets(line2, sizeof line2, file2);

  while(1)
  {  
   sscanf(line, "%19s %21s %*s %19s %19s %19s %*s %99s", one, three, four, six, seven, five);
   two = atoi(three);
   sscanf(line2, "%19s %21s %*s %19s %19s %19s", one2, three2, four2, six2, seven2);
   two2 = atoi(three2);
   if(!strcmp(temp,one))
   {
    if(!strcmp(temp,one2))
    {
     if(two == two2)
     {
      dp4_field = 0; 
      for(i=5; i < strlen(five);i++)
      {
       sum = 0;
       for(j=i,k=0; k<3;j++,k++)
       {
        *(word+k) = five[j];
       }
       if(strcmp(word,dp4) == 0)
       {
        dp4_field = 1;
        sscanf(five+4+i, "%d,%d,%d,%d",&cast11 , &cast12, &c1157, &c1257);
       }

      }
      if(dp4_field)
      {
       printf("%s\t%s\t%d\t%d\t%s\t%s\t%s\t%s\t%s\t%s\t\n", one2, three2, cast11+cast12, c1157+c1257, four, six, seven, four2, six2 , seven2);
       fprintf( file3,"%s\t%s\t%d\t%d\t%s\t%s\t%s\t%s\t%s\t%s\t\n", one2, three2, cast11+cast12, c1157+c1257, four, six, seven, four2, six2 , seven2);
      }
      if(fgets(line2, sizeof line2, file2) == NULL)
       break;
      if(fgets(line, sizeof line, file) == NULL)
       break;
     }

     else if(two > two2)
     {
      fprintf( file4,"%s\t \n", line2);
      if(fgets(line2, sizeof line2, file2) == NULL)
       break;
     }

     else 
     {
      if(fgets(line, sizeof line, file) == NULL)
       break;
     }

    }
    else
    {
     count++;
     strcpy(temp,chrarray[count]);
     while(strcmp(temp,one))
     {
      if(fgets(line, sizeof line, file) == NULL)
       break;

      sscanf(line, "%19s %21s %*s %19s %19s %19s %*s %99s", one, three, four, six, seven, five);
     }
    }
   }
   else
   {
    count++;
    strcpy(temp,chrarray[count]);
    while(strcmp(temp,one2))
    {
     if(fgets(line2, sizeof line2, file2) == NULL)
      break;
     fprintf( file4,"%s\t \n", line2);
     sscanf(line2, "%19s %21s %*s %19s %19s %19s %*s %99s", one2, three2, four2, six2, seven2, five2);  
    }
   }
  }
  fclose(file);
  fclose(file2);
  fclose(file3);
  fclose(file4);
 }
 else
 {
  perror(filename);
 }
 return 0;

} 
```

我正在控制台上打印并打印到此代码中的文件中。它在控制台上显示良好，但在打印到文件时跳过了最后几行，如 20 到 40 行。我无法弄清楚这里的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:30:36.890

您有一个简单的错误，显然是在没有执行`fclose`底部调用集的情况下退出您的程序。您永远不会显式刷新输出，因此它通常只会在您最后关闭文件流时刷新最终缓冲的内容，但如果程序失败（或挂起），则不会调用这些内容。

对于每个换行符（典型），控制台输出显然会自动刷新；因此它们之间的区别。

当然，真正的问题不是缺少刷新，而是导致程序失败或挂起的错误。如果这是你认真编码的东西，而不是家庭作业或测试问题，那么你应该能够找出问题所在，或者通过它进行调试并解决它。我不会为你做那部分。;)

**补充：**但我会给你一个提示：数组是有限的，如果你访问它们的末尾，就会发生坏事。

# javascript - jQuery document.ready 不工作

> ID：12397834
> 
> 赞同：0
> 
> 时间：2012-09-13T00:26:20.370
> 
> 标签：javascript, jquery

我已经为此工作了几天，但一直无法找到解决方案。基本上，我必须在脑海中编写不会执行`$(document).ready(...)`. 奇怪的是，我还有其他可以很好地使用它的脚本。这是我遇到的两个问题：（我添加了一些关于我尝试过的评论）

```
<% content_for(:head) do %>
<script type="text/javascript">
    $(document).ready(function() {
        $('.button-print-ticket').click(function(e) {
            e.preventDefault();
            var header = $('.social-header');
            header.queue(function() {
              var search_string ='#map-canvas img[src=https://maps.gstatic.com/mapfiles/google_white.png]';
              var glink = $(search_string).parent().parent();
              glink.replaceWith(glink.html());
              $(this).dequeue();
            });
            header.hide();
            header.queue(function() {
              window.print();
              $(this).dequeue();
            });
            header.queue(function() {
              $('.social-header').show();
              $(search_string).parent().replaceWith(glink);
              $(this).dequeue();
            });
        });
    });
</script>
<script type="text/javascript">
//an alert here works
if(screen.width >= 800) {
  //an alert here works too
  $(document).ready(function() {
    //an alert here only works in the console
    $(document).ready(function(){
      $('#overlay').fadeIn('fast',function(){
          $('#box').animate({'top':'160px'},500);
      });
    });
    $('#boxclose, #bt-fbshare, #bt-tweet, #bt-email').click(function(){
        $('#box').hide("drop", { direction: "up" }, 100, function(){
            $('#overlay').fadeOut('fast');
        });
    });
    $(document).keyup(function(e) {
      if (e.keyCode == 27){
         $('#box').hide("drop", { direction: "up" }, 100, function(){
             $('#overlay').fadeOut('fast');
         });
      }
    });

  });
}
</script>
<% end %> 
```

我还包括了 Ruby On Rails 标记，因为这是我能辨别的唯一区别。（JS 显示在 Firebug 中）我的`onload`标签`<body>`中也没有。另一个奇怪的是它曾经可以工作，我不记得对这些脚本中的任何一个进行过任何更改。

编辑2：另一件事：我也可以放在`console.log($)`前面`if (screen-width >= 800)`，它告诉我这`$`是一个函数。

编辑：这是生成的 HTML：

```
<head>
<style type="text/css">@media print {  .gmnoprint {    display:none  }}@media screen {  .gmnoscreen {    display:none  }}</style>
<title>Web Page</title>

<meta content="text/html;charset=UTF-8" http-equiv="content-type"/>
<meta content="ALL" name="robots"/>
<meta content="5 Days" name="revisit-after"/>
<meta content="EN" name="language"/>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale = 1.0"/>

<link type="text/css" rel="stylesheet" media="screen, projection, print" href="/stylesheets/screen.css?1347374478"/>
<link type="text/css" rel="stylesheet" media="screen, projection, print" href="/stylesheets/global.css?1346943598"/>
<link type="text/css" rel="stylesheet" media="print" href="/stylesheets/print.css?1343928684"/>

<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!--[if lte IE 7]><link href="/stylesheets/ie7.css?1343928684" media="screen, projection" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if !IE]><link href="/stylesheets/media.css?1343928684" media="screen, projection" rel="stylesheet" type="text/css" /><![endif]-->

<script type="text/javascript" src="/javascripts/jquery.min.js?1343928684"></script>
<script type="text/javascript" src="/javascripts/jquery.ui.min.js?1343928684"></script>
<script type="text/javascript" src="/javascripts/jquery.ajax-submit.js?1343928684"></script>
<script type="text/javascript" src="/javascripts/modernizr-2.js?1343928684"></script>
<script type="text/javascript" src="/javascripts/date.format.js?1343928684"></script>
<script type="text/javascript" src="/javascripts/geo.js?1343928684"></script>
<script type="text/javascript" src="/javascripts/spin.min.js?1343928684"></script><style></style>
<script type="text/javascript" src="/javascripts/application.js?1347326686"></script>
<script type="text/javascript" src="/javascripts/global.js?1345692570"></script>

<script type="text/javascript">
    var logged_in = true;

    $(function() {
        if (logged_in) {
            $('.signed-in').show();
            $('.signed-out').hide();
        } else {
            $('.signed-in').hide();
            $('.signed-out').show();
        }

        $('.sign-out-link').click(function(e) {
            e.preventDefault();
            $('.signed-in').hide();
            $('.signed-out').show();
            logged_in = false;e
            window.location='/customers/destroy_session';
        });
    });
</script>
<!--<script type="text/javascript">

document.write(unescape("%3Cscript src='" + ((document.location.protocol=="https:")?"https://snapabug.appspot.com":"http://www.snapengage.com") + "/snapabug.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">

SnapABug.addButton("--------","0","55%");

</script>-->

<style type="text/css">
    #map-canvas { width : 100%; height: 100%; }
</style>
<script src="https://maps.googleapis.com/maps/api/js?v=3&amp;sensor=true" type="text/javascript"></script><script type="text/javascript" src="https://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/14/main.js"></script>
<script src="/javascripts/google.maps.styled-marker.js" type="text/javascript"></script>
<script type="text/javascript">

    var directionsDisplay;  
    var directionsService = new google.maps.DirectionsService();
    var venueMarker = new google.maps.Marker;
    var pu_map;

    var map;
    $(function() {
        var latlng = new google.maps.LatLng(40.256676, -111.644755);
        var mapOptions = {
            zoom                : 13,
            center              : latlng,
            mapTypeId           : google.maps.MapTypeId.ROADMAP,
            disableDefaultUI    : true,
            zoomControl         : true
        };
        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

        new google.maps.Marker({
            position : latlng,
            map : map
        });

    });

    $(function() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var latlng = new google.maps.LatLng(40.256676, -111.644755);
        var mapOptions = {
            zoom                : 13,
            center              : latlng,
            mapTypeId           : google.maps.MapTypeId.ROADMAP,
            disableDefaultUI    : true,
            zoomControl         : true
        };
        pu_map = new google.maps.Map(document.getElementById("popup_map_cont"), mapOptions);
        directionsDisplay.setMap(pu_map);
    });

</script>

<script type="text/javascript">
    $(document).ready(function() {
        $('.button-print-ticket').click(function(e) {
            e.preventDefault();
            var header = $('.social-header');
            header.queue(function() {
                var search_string ='#map-canvas img[src=https://maps.gstatic.com/mapfiles/google_white.png]';
                var glink = $(search_string).parent().parent();
                glink.replaceWith(glink.html());
                $(this).dequeue();
            });
            header.hide();
            header.queue(function() {
                window.print();
                $(this).dequeue();
            });
            header.queue(function() {
                $('.social-header').show();
                $(search_string).parent().replaceWith(glink);
                $(this).dequeue();
            });
        });
    });
</script>
<script type="text/javascript">
    if(screen.width >= 800) {
        $(document).ready(function() {
            $(document).ready(function(){
                $('#overlay').fadeIn('fast',function(){
                    $('#box').animate({'top':'160px'},500);
                });
            });
            $('#boxclose, #bt-fbshare, #bt-tweet, #bt-email').click(function(){
                $('#box').hide("drop", { direction: "up" }, 100, function(){
                    $('#overlay').fadeOut('fast');
                });
            });
            $(document).keyup(function(e) {
                if (e.keyCode == 27){
                    $('#box').hide("drop", { direction: "up" }, 100, function(){
                        $('#overlay').fadeOut('fast');
                    });
                }
            });

        });
    }
</script>

<script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/14/%7Bcommon,util,marker%7D.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/14/%7Bmap%7D.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/14/%7Bonion%7D.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/14/%7Bcontrols%7D.js"></script><script type="text/javascript" charset="UTF-8" src="https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/9/14/%7Bstats%7D.js"></script><script async="true" type="text/javascript" src="http://a.adroll.com/j/roundtrip.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:47:11.633

也许您应该尝试将所有 JS 代码放在同一个标​​记脚本和 $(document).ready() 函数中

```
<% content_for(:head) do %>
<script type="text/javascript">
    $(document).ready(function() {
        $('.button-print-ticket').click(function(e) {
            e.preventDefault();
            var header = $('.social-header');
            header.queue(function() {
              var search_string ='#map-canvas img[src=https://maps.gstatic.com/mapfiles/google_white.png]';
              var glink = $(search_string).parent().parent();
              glink.replaceWith(glink.html());
              $(this).dequeue();
            });
            header.hide();
            header.queue(function() {
              window.print();
              $(this).dequeue();
            });
            header.queue(function() {
              $('.social-header').show();
              $(search_string).parent().replaceWith(glink);
              $(this).dequeue();
            });
        });
        if(screen.width >= 800) {
            $('#overlay').fadeIn('fast',function(){
                $('#box').animate({'top':'160px'},500);
            });
            $('#boxclose, #bt-fbshare, #bt-tweet, #bt-email').click(function(){
                $('#box').hide("drop", { direction: "up" }, 100, function(){
                    $('#overlay').fadeOut('fast');
                });
            });
            $(document).keyup(function(e) {
                if (e.keyCode == 27){
                    $('#box').hide("drop", { direction: "up" }, 100, function(){
                        $('#overlay').fadeOut('fast');
                    });
                }
            });
         }
    });
</script>
<% end %> 
```

正如 marteljn 评论，请务必在 head 部分引用 JQuery

```
<script type="text/javascript" src="jquery.js"></script> 
```

如果它仍然不起作用，您可以按照 jfriend00 的建议发布generetad HTML。

# javascript - 在 Rails 中使用 js.erb 文件处理 Ajax 响应加载的正确方法

> ID：12397840
> 
> 赞同：0
> 
> 时间：2012-09-13T00:27:20.570
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-3

我是 Rails 新手，但我来自 PHP，几乎总是这样，每当我有 HTML AJAX 响应时，我总是可以使用 jquery 的 .load() 将它加载到容器（任何元素）中

我也使用 Rails 做到了这一点，但最近使用了另一种方法：使用 .js.erb 文件。将 getScript() 用于控制器操作，然后 js.erb 文件将响应 js (ajax) 请求，在 .js.erb 文件中进行加载。

给定general.js：

```
$.getScript(url, function(){}); 
```

给定 index.js.erb：

```
$('#products').html("<%= escape_javascript(render_cell :products, :index, {:products => @products})%>"); 
```

但是当我可以在 general.js 中加载时，这似乎是相当重复的！向控制器具有的此模板发出 ajax 请求并将其加载到容器中（我可以使用 jquery .load() 的选择器来选择我想要的元素，并且我可以使用 application_controller 条件来不呈现布局） ：

```
<ul>
<%= render_cell :products, :index, {:products => @products} %>
</ul> 
```

在这种情况下，有什么方法可以更有效地使用 .js.erb 文件？

注意：我必须使用第二种方法，因为我使用的是 twitter-bootstrap 选项卡。我最初使用第一种方法，但我认为第二种方法更像是“Rails 方式”。这是一个学习项目，为什么不呢？XD

# php - PHP单选按钮返回错误值

> ID：12397841
> 
> 赞同：0
> 
> 时间：2012-09-13T00:27:24.037
> 
> 标签：php, mysql

我有以下代码生成的 PHP 单选按钮：

```
while($a_row = mysql_fetch_array($answers_result))
    {
        // print each answer choice
        ?>
        <input type='radio' name='question_<?php echo $current_question['id'] ?>'                     
                value='<?php echo $a_row['prompt']?>'><?php echo $a_row['prompt']?>
        <br />

    <?php
    } 
```

然后我用这段代码定义用户的选择：

```
$user_answer = $_POST["question_{$_SESSION['current_question']['id']}"]; 
```

但是，这并不总是返回值，它应该是 $a_row['prompt'] 是什么。如果它是列表中的第一个单选按钮，它会返回“答案 1”，等等。它没有得到我的 sql 表中的正确值。我是否在我的代码中做错了什么导致它在用户选择它并提交表单时实际上没有获得每个单选按钮的“值”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:43:28.747

当你从他们开始时，你需要逃避''

```
<input type='radio' name='question_<?php echo $current_question[\'id\']; ?>'                     
            value='<?php echo $a_row[\'prompt\'];?>'><?php echo $a_row['prompt'];?> 
```

另请注意，您需要使用 ; 来完成您的 PHP 命令。事实并非如此。

为避免“”麻烦，当您知道必须在代码中添加一些“”时，我建议您使用“”，这样它们就不会干扰。

```
<input type='radio' name="question_<?php echo $current_question['id']; ?>"                     
            value="<?php echo $a_row['prompt'];?>"><?php echo $a_row['prompt'];?> 
```

# c# - 是否可以使用 EF Code First 和 Oracle 数据库通过函数调用来选择数据？

> ID：12397843
> 
> 赞同：0
> 
> 时间：2012-09-13T00:27:39.930
> 
> 标签：c#, oracle, entity-framework, ef-code-first

我在 Oracle 数据库上使用 EF Code First。给定这样的表

```
public class Entity
{
    public int Id { get; set; }
} 
```

是否可以构造一个包含对函数的调用的 where 子句？

例如

```
MyDatabase database = new MyDatabase();

var results = database.Entity.Where(c => c.Id < 1000 
                            && "Schema.Package.Function(" + c.Id + ")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:26:01.873

您可以使用[SqlQuery](http://msdn.microsoft.com/en-us/library/gg696332%28v=vs.103%29.aspx)方法

```
var results = database.Entity
  .SqlQuery("select c.* from Entity c where c.Id < 1000 and Schema.Package.Function(c.Id)"); 
```

# paypal - 使用 Paypal Adaptive Payments 设置标题图片

> ID：12397846
> 
> 赞同：1
> 
> 时间：2012-09-13T00:28:08.993
> 
> 标签：paypal, paypal-adaptive-payments

我希望以类似于使用**API的****Express Checkout的方式在****Paypal Chained Payment**上设置标题图像。要使用 Express Checkout 实现此目的，您只需在 HDRIMG 上设置一个 URL，例如。[https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp)

 ****但是，我找不到任何参考来使用 Adaptive Payments API 做类似的事情。[https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)

甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T02:31:16.320

尝试使用 SetPaymentOptions API 操作。

这是链接：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APSetPaymentOptions](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APSetPaymentOptions)****

# java - 字段成员错误

> ID：12397850
> 
> 赞同：0
> 
> 时间：2012-09-13T00:28:30.743
> 
> 标签：java

好的，我可能会发疯，但我以前从未遇到过这个错误。

这不编译：

我得到的错误是：“找不到访问的符号变量”

**已编辑**

这是整个功能：

```
public void depthFirstTraverse(Node startNode) {
    Stack<Node> myStack = new Stack<Node>();
    myStack.push(startNode);

    while (!myStack.empty()) {
        Node top = myStack.pop();
        top.visited = true;
        System.out.println(top.item);
        for (int i = 0; i < top.getAdjList().size() ; i++) {
            //Node temp = (Node)top.getAdjList().get(i);
            if (!(Node)top.getAdjList().get(i).visited) {
                myStack.push((Node)top.getAdjList().get(i));
            }
        }
        top.visited = false;
    }

} 
```

这部分不起作用

```
if (!top.getAdjList().get(i).visited) {  // this line gives me an error 
```

这样做：

```
for (int i = 0; i < top.getAdjList().size() ; i++) {
            Node temp = (Node)top.getAdjList().get(i);
            if (temp.visited) {
                myStack.push(temp);
            }
        } 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:05:58.783

`if (!(Node)top.getAdjList().get(i).visited)`看起来您正在尝试将 a`boolean`转换为 a`Node`

也许试试这个：

`if (!((Node)top.getAdjList().get(i)).visited)`然后演员会检查`visited`财产

# sql - 大丑光标

> ID：12397851
> 
> 赞同：2
> 
> 时间：2012-09-13T00:28:40.083
> 
> 标签：sql, sql-server-2008, tsql, cursor, dynamic-sql

我正在从大约 1000 列的表中填充大约 15 列的表。我需要从大桌子上抓紧时间。该时间分为分钟和小时 [rn-min] 和 [rn-hr]，我需要在新表中以 am/pm 格式使用它们。该表由一家外部公司填充，因此我无法对其进行太多更改，我确实让他们放入了一个转移列供我检查。它又大又慢，我只需要几列，并且有很多重复/相似的行。在任何情况下，我都会从更大的桌子上制作更小的桌子。我写了一个游标，它很慢，我想知道是否有更好的方法来做到这一点。我不能只使用简单的插入（选择列），因为我想更改时间和日期的存储方式。谢谢，任何帮助或建议表示赞赏

```
declare data CURSOR READ_ONLY FORWARD_ONLY
for   
    select [raID],
            (otherfields),
            CAST([RA-rent-mm] as varchar(2)) + '/' + CAST([RA-rent-dd] as varchar(2)) + '/' +
            CAST([RA-Rent-CC] as varchar(2)) + CAST([RA-RENT-YY] as varchar(2)) [Date_Out],
            CAST([RA-Rtrn-mm] as varchar(2)) + '/' + CAST([RA-Rtrn-dd] as varchar(2)) +
            '/' + CAST([RA-Rtrn-CC] as varchar(2)) + CAST([RA-Rtrn-YY] as varchar(2)) [Date_In],
            CAST([RA-RENTAL-HOURS] as varchar(2)),
            CAST([RA-RENTAL-Minutes] as varchar(2)),
            CAST([RA-RTRN-HOURS] as varchar(2)),
            CAST([RA-RTRN-MINUTES] as varchar(2)),
            (other fields)
      from table_name
     where Transfered is null
       and [RA-rtrn-mm] != 0 --this keeps me from getting the duplicate/similar rows, once this doesn't equal 0 there aren't anymore rows so I just grab this one

declare @sql as varchar(max)
declare @raID int;
    (other fields),
declare @rentDate varchar(8);
declare @rtrnDate varchar(8);
declare @rentHours varchar(2);
declare @rentMinutes varchar(2);
declare @rtrnHours varchar(2);
declare @rtrnMinutes varchar(2);
    (other fields)

open data
    fetch next from data into 
        @raID,
        (other fields),
        @rentDate ,
        @rtrnDate ,
        @rentHours ,
        @rentMinutes ,
        @rtrnHours ,
        @rtrnMinutes ,
        (other fields),
    while @@FETCH_STATUS = 0
    begin
        set @rentMinutes = left('0' + @rentMinutes,2);--padding with 0 if minutes is 1-9
        set @rtrnMinutes = left('0' + @rtrnMinutes,2);

        --turning the varchar times into a time then back to varchar with correct am/pm notation
        declare @rentT time = @rentHours + ':' + @rentMinutes;
        declare @rtnT time = @rtrnHours + ':' + @rtrnMinutes;
        declare @rentTime varchar(7) = convert(varchar(15),@rentT, 100);
        declare @returnTime varchar(7) = convert(varchar(15),@rtnT, 100);

        --print @rentTime;
        set @sql = 'INSERT other_tbl_name(raID, (other fields), Date_Out, Date_In, Time_Out, Time_In,    (other fields))
                values ('+cast(@raID as varchar(max))+', (other fields),'''+@rentDate+''',
                            '''+@rtrnDate+''', '''+@rentTime+''', '''+@returnTime+''',
                            (other fields))';

        --exec(@sql)
        print @sql

        --need a way to make sure the insert worked before updating
        --need to update transferred to keep from updating the same info

        declare @update as varchar(max) = '
        UPDATE Capture.icokc_data
           SET Transfered = 1
         WHERE [raID] = '+cast(@raID as varchar(10))

        --exec(@update)
        --print @update

        fetch next from data into 
            @raID,
            (other fields)
            @rentDate ,
            @rtrnDate ,
            @rentHours ,
            @rentMinutes ,
            @rtrnHours ,
            @rtrnMinutes ,
            (other fields)
    end

close data;
deallocate data; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:07:29.910

为什么不批量插入它，并在选择中转换日期和时间？

像这样的东西：

```
INSERT other_tbl_name(raID, (other fields), Date_Out, Date_In, Time_Out, Time_In, (other fields))
select 
[raID],
(otherfields),
CAST([RA-rent-mm] as varchar(2)) + '/' + CAST([RA-rent-dd] as varchar(2)) + '/' + CAST([RA-Rent-CC] as varchar(2)) + CAST([RA-RENT-YY] as varchar(2)) [Date_Out],
CAST([RA-Rtrn-mm] as varchar(2)) + '/' + CAST([RA-Rtrn-dd] as varchar(2)) + '/' + CAST([RA-Rtrn-CC] as varchar(2)) + CAST([RA-Rtrn-YY] as varchar(2)) [Date_In],
CONVERT(varchar(15),DATEADD(minute, [RA-RENTAL-Minutes], DATEADD(hour, [RA-RENTAL-HOURS], '00:00')), 100) as [Time_out],
CONVERT(varchar(15),DATEADD(minute, [RA-RTRN-MINUTES], DATEADD(hour, [RA-RTRN-HOURS], '00:00')), 100) as [Time_in],
(other fields)
from table_name
where Transfered is null
and [RA-rtrn-mm] != 0

UPDATE Capture.icokc_data
SET Transfered = 1
WHERE [raID] IN
(
select 
[raID]
from table_name
where Transfered is null
-- and [RA-rtrn-mm] != 0  -- not sure about this one
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T00:57:40.610

由于它是直接转换，即一条记录输入和一条记录输出，我真的看不出有任何理由无法通过单个插入查询来完成。

无论如何，不​​要动态创建查询。每次迭代都会解析和规划动态查询，这很可能是大多数性能问题的原因。

例如，而不是：

```
declare @update as varchar(max) = '
UPDATE Capture.icokc_data
SET Transfered = 1
WHERE [raID] = '+cast(@raID as varchar(10))

exec(@update) 
```

做就是了：

```
UPDATE Capture.icokc_data
SET Transfered = 1
WHERE [raID] = @raID 
```

# python - 将 MySQL 查询的结果存储到 python 变量中

> ID：12397855
> 
> 赞同：3
> 
> 时间：2012-09-13T00:29:04.470
> 
> 标签：python, mysql

当我使用 python 编程语言和 MySQL 数据库执行以下代码时

```
cursor.execute("select max(propernoun_SRNO) from tblauto_tagged")
starting_index = cursor.fetchone()
ending_index = starting_index +len(s) 
```

* * *

我收到以下错误：

```
Traceback (most recent call last):
File "<pyshell#0>", line 1, in <module>
batch(1,1)
File "C:\Users\vchauhan\Dropbox\Code\proper_noun_function_batch_file_mysql_sept_12.py", line 97, in batch
ending_index = starting_index +len(s)
TypeError: unsupported operand type(s) for +: 'pyodbc.Row' and 'int' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T00:37:35.507

## 问题

这里的问题是您将`pyodbc.Row`实例（由 返回`.fetchone()`）分配给`starting_index`，这使得无法将其添加到整数（因此出现“ *TypeError：不支持的操作数类型*”错误）。

## 解决方案

尝试替换这一行：

```
starting_index = cursor.fetchone() 
```

用这条线：

```
starting_index = cursor.fetchone()[0] 
```

## 更多阅读

*   [PEP 249 - Python 数据库 API 规范 v2.0](http://www.python.org/dev/peps/pep-0249/)（尤其是关于 的部分`fetchone()`）

# php - 登录后在整个网络上保留用户信息。 PHP MVC

> ID：12397857
> 
> 赞同：-2
> 
> 时间：2012-09-13T00:29:14.380
> 
> 标签：php, model-view-controller, session, login

我确实知道如何使用会话/cookie。我确实为登录的用户保留会话和 cookie + 令牌。

我正在使用 MVC 结构（我自己的）并且我有一个 Login.php 控制器。我也有 User.php 类，它是一个只有 1 个实例的单例类。

我的基本控制器获取 User 的实例并存储在如下变量中：

```
 abstract class Controller {
    private $model;
    private $user;

    function __construct($model = '') {
        ..... //some code

        $this->user = User::getInstance();
    }

    public function user() {
        return $this->user;
    }
   } 
```

在我的 login.php 中，一旦用户使用用户名提交表单并通过，我就有以下内容：

```
function logUserIn() {
    if (! isset($_POST['UName']) || ! isset($_POST['UPass'])) {
        $this->_404();
    }

    $uname = strtolower($_POST['UName']);
    $pass = Hash::strongHashMD5($_POST['UPass']);
    $token = $_POST['token'];
    $isValid = $this->model->userCheck($uname, $pass);

    $res = $this->validateUser($isValid, $token, $uname);

    if ($res === false) {
        echo 'User Does Not Exist!';
    } else if ($res === 'Token_Error') {
        echo 'Invalid Form Submission';
    } else if ($res === true) {
        //update token
        $this->model->updateToken($isValid['ID'], $token, $_SERVER['REMOTE_ADDR']);
        header("Location: ../login");   
    }
    exit;
} 
```

这是我验证用户的方法

```
private function validateUser($UInfo, $token, $UName) {
    if ($UInfo !== false && isset($UInfo['ID']) && $UInfo['ID'] > 0) {
        if ($UInfo['token'] == $token) {
            return 'Token_Error';
        } else {
            $this->user()->setValues($UInfo['ID'], $UName, $token);
            $this->user()->setSessions();
            return true;
        }
    }

    return false;
} 
```

setsessions() 方法只是设置该用户的会话/cookies

现在每次我想访问以查看用户是否登录时，我都必须通过控制器进行操作并将其传递给其他任何地方。

有没有更好的方法来做到这一点？我的代码在安全问题等方面是否有任何问题......

任何建议/建议将不胜感激，谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:27:29.807

目前，您的领域业务逻辑到处泄漏。它应该留在模型层*（是的，在正确的 MVC 中，模型是一个层而不是类或对象）*，而不是在表示层中。

另外，请停止使用 MD5 散列密码。如果这样做，您不妨将它们保留为纯文本。相反，您应该使用[`crypt()`](http://php.net/manual/en/function.crypt.php)with`CRYPT_BLOWFISH` 或 PBKDF2 算法。

哦 .. 将人们重定向到 404，如果其中一个表单字段为空，似乎有点反应过度。

反正 ..

* * *

## 主题：

用户身份验证应该完全发生在模型层（更准确地说：在某些`Recognition`服务中）。控制器应该只向模型层提供数据，并通知当前`POST`已发送请求的视图。

服务在接收到数据后，应该为和分配值创建[域对象。](http://c2.com/cgi/wiki?DomainObject)`User`如果数据通过验证（这是域对象的职责之一），则服务应实例化适当的[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)并从存储（可能是也可能不是 SQL 数据库）中获取数据。如果考虑到任何问题（例如存储中缺少记录），域对象应该符合凭据。

如果其中任何一个在某个时候失败，服务应该对错误状态采取行动并将其放入临时存储（最有可能 - 会话）。

当应用程序到达视图应该生成响应的部分时，视图实例将`POST`通过检查模型层中的错误状态来对有关请求的指示做出反应，并通过发送 HTTP 标头作为唯一的响应来执行重定向，具体取决于是否出现错误。

# c# - 通过 jQuery 访问 CheckBoxList.DataValueField 值

> ID：12397858
> 
> 赞同：0
> 
> 时间：2012-09-13T00:29:33.113
> 
> 标签：c#, jquery, checkboxlist

在 a`CheckBoxList`中，如何获取`value`使用设置的复选框`checkboxlist.DataValueField`？

在 C# 中，如果我调用 ，则可以访问该值，`checkboxItem.value`但在 HTML 中，该值呈现为`value="on"`.

编辑：如果这是不可能的，我可以通过数据源添加一个属性`ListItem`，还是可以通过 HTML 访问每个单独的属性？比如`input`属性`name`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:20:37.200

**DataValueField**是从复选框数据源到复选框值的列的绑定。HTML 中的值来自名称来自**DataValueField**的数据源列，并且该字段在 HTML 中不可见。[这](http://www.4guysfromrolla.com/articles/050703-1.aspx)应该进一步解释。

编辑：

您可以将属性添加到 ListItem。您没有提供任何您现在拥有的示例，但您可以定义复选框列表：

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server">
</asp:CheckBoxList> 
```

在后面的代码中添加带有属性的列表项：

```
ListItem li = new ListItem("text_value", "value_value", true);
li.Attributes.Add("id", "id_value");

CheckBoxList1.Items.Add(li); 
```

这将导致生成这样的标记：

```
<span id="id_value">
    <input id="MainContent_CheckBoxList1_0" type="checkbox" 
        name="ctl00$MainContent$CheckBoxList1$0" value="value_value">
    <label for="MainContent_CheckBoxList1_0">text_value</label>
</span> 
```

因此，您可以使用 span id 从 jQuery 访问您的输入字段：

```
jQuery('#id_value input').val() 
```

你可能也对[这篇](http://www.4guysfromrolla.com/articles/091405-1.aspx)文章感兴趣。

# c# - 对齐已失效

> ID：12397859
> 
> 赞同：0
> 
> 时间：2012-09-13T00:30:03.567
> 
> 标签：c#, stored-procedures, teradata

我得到以下代码以返回字符串。然而，输出返回的是一个杂乱无章的代码，所有的对齐都出来了。无论如何将存储过程作为原始编码返回？

```
command = "SHOW PROCEDURE Inventory.pr_demand_curr()"

using (TdConnection cn = new TdConnection(connectionString))
        {
            cn.Open();
            TdCommand cmd = cn.CreateCommand();
            cmd.CommandText = command;

            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
               output += reader.GetString(0);
            }
        }
        return output; 
```

# c# - 使用 JSon.Net 反序列化 LiveSDK 日历

> ID：12397860
> 
> 赞同：-1
> 
> 时间：2012-09-13T00:30:07.700
> 
> 标签：c#, json.net

我是 JSon 的新手，尤其是 JSon.Net。我正在尝试在 Windows Phone 上使用 LiveSDK，但在解析 JSon 响应时遇到问题。我正在尝试读取日历信息，但无法解析。下面是我下载 Json 的代码和我的类定义。我在定义“用户”的行出现异常。

```
 void getCal_DownloadCompleted(object sender, LiveDownloadCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            using (var reader = new StreamReader(e.Result))
            {
                var json = reader.ReadToEnd();
                var user = JsonConvert.DeserializeObject<Calendar>(json);
            }
        }
    } 
```

我的日历课

```
 [JsonObject(MemberSerialization.OptIn)]
public class Calendar
{    
    [JsonProperty(PropertyName="name")]
    public string Name{get; set;}
    [JsonProperty(PropertyName = "id")]
    public string Id{get; set;}
    [JsonProperty(PropertyName = "description")]
    public string Description{get; set;}
    [JsonProperty(PropertyName = "created_time")]
    public string CreatedTime{get; set;}
    [JsonProperty(PropertyName = "updated_time")]
    public string UpdatedTime{get; set;}
    [JsonProperty(PropertyName = "from")]
    public object From{get; set;}
    [JsonProperty(PropertyName = "is_default")]
    public bool IsDefault{get; set;}
    [JsonProperty(PropertyName = "subscription_location")]
    public string SubscriptionLocation{get; set;}
    [JsonProperty(PropertyName = "permissions")]
    public string Permissions{get; set;}
} 
```

收到的 JSON 格式

```
 {
    "data": [
  {
     "id": "calendar.42d4dbc866f94c83849c88c6eb9985bc", 
     "name": "Birthday calendar", 
     "description": "If you have birthdays listed for your contacts, they'll appear on this calendar. You can add more birthdays, but you can't add other types of events.", 
     "created_time": "2011-08-05T19:41:04+0000", 
     "updated_time": "2011-08-05T19:41:04+0000", 
     "from": {
        "name": null, 
        "id": null
     }, 
     "is_default": false, 
     "subscription_location": null, 
     "permissions": "read"
  },{
     ...
  } 
```

] }

我在使用 LiveSDK GetAsync() 时运气不佳，所以我改用了 DownloadAsync()。这种方法更好吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:09:16.663

您的序列化类似乎与 JSON 不匹配。JSON 正在返回一个对象，该对象具有一个名为的属性，该属性是一个包含您定义`data`的类的元素的数组。`Calendar`

尝试添加一个新类，例如：

```
[JsonObject(MemberSerialization.OptIn)]
public class AppointmentList
{
    [JsonProperty(PropertyName="data")]
    public List<Calendar> data {get; set;}
} 
```

并像反序列化：

```
var user = JsonConvert.DeserializeObject<AppointmentList>(json); 
```

# glassfish - 将 GlassFish 日志文件捕获到 SQL/JPA 数据库中

> ID：12397861
> 
> 赞同：1
> 
> 时间：2012-09-13T00:30:13.733
> 
> 标签：glassfish, glassfish-3, java.util.logging

我需要一点帮助才能开始。我有一个新的 JSF-2 Web 应用程序，打算在 GlassFish 3.1（或更高版本）下部署。通常，服务器将其所有日志文件作为文本存储在其私有目录之一中，其中还包括我使用 ether **System.println( .. )**或类似**java.util.logging.Logger.getLogger( ... )所做的日志记录**

我想要做的不是将那些日志条目转到文本文件，而是捕获它们并将它们归档到我的 SQL 数据库中。然后，我可以为时间戳和键值添加表列，这样就可以轻松地将其作为应用程序中管理网页的一部分进行搜索，而不必转到管理控制台。也可以将其中一些数据暴露给用户。

这可以做到吗？怎么做？

后续问题：这可以以可移植到 Tomcat 或其他容器的方式完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:35:48.910

您将需要编写自定义日志处理程序。自定义日志处理程序是一个扩展类`java.util.logging.Handler`：

```
package test.stackoverflow;
import java.util.logging.Handler;
..
public class AlanHandler extends Handler {
..
        @Override
        public void publish(LogRecord record) {
              //CODE THAT STORES LOG RECORD INTO THE DATABASE
        }
} 
```

此外，您将不得不稍微更改`logging.properties`文件：

```
handlers=java.util.logging.ConsoleHandler, test.stackoverflow.AlanHandler 
```

在 Glassfish 上部署 AlanHandler 的 JAR（作为库），重新启动服务器就可以了。

# iphone - 使用新版本的 iPhone 应用程序减少 NIB

> ID：12397863
> 
> 赞同：0
> 
> 时间：2012-09-13T00:30:32.850
> 
> 标签：iphone, ios, app-store, nib

我开始了一个转换过程以从我的 iPhone 应用程序中删除 NIB 文件，以将整个界面传递给仅以编程方式进行的版本。

我注意到，当我的 iPhone 连接到 Xcode 测试应用程序时，旧的 NIB 仍在使用（屏幕上出现新旧界面的奇怪混合），直到我没有从设备中删除应用程序并重新安装从头开始的应用程序。

我问自己，当我将这个新版本上传到 App Store 时，我的现有用户是否会受到这个问题的影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:54:01.440

现有用户不会受到此问题的影响。

我之前也注意到了这个问题，我相信这可能与 iOS 在加载后如何缓存 NIB 的内容有关。

# java - 将信息从 Servlet 发送到 JSP

> ID：12397871
> 
> 赞同：2
> 
> 时间：2012-09-13T00:31:54.973
> 
> 标签：java, jsp, servlets

**我想做的事：**

我有一个包含很多字段（昵称、电子邮件、姓名、姓氏等）的表单，但用户必须先填写 Nick 和 Email 才能填写其他字段（这是因为我们要检查在他可以介绍他的其余信息（姓名，姓氏等）之前，另一个客户没有使用昵称和邮件。因此，用户介绍 Nick 和 Email，然后他必须按下一个名为“Validate”的按钮，如果值可用（成功验证），则启用其余字段并且用户可以继续填写表单，否则字段保留禁用并向用户显示错误。

表单将位于 JSP 中，它将被提交给 Servlet，一旦进入 servlet，我必须验证表单中的信息（我有一个 .JAR 文件包含在这个 servlet 中，验证在于调用一个函数从该库中，该函数返回一个布尔值），然后我必须将表示验证函数结果的布尔值返回**到同一个 JSP 。**现在在 JSP 中，我必须启用（或不启用，取决于布尔值）其余的 TextField。

我不确定这是否正确，但我试图用按钮提交，同时运行一个 javascript(onclick)，它将使用 servlet 在进行验证后发送回 JSP 的这个布尔值。javascript 包含一个评估布尔值的 IF 语句，如果它为真，则启用 JSP 上的所有字段。

**到目前为止的问题：**

我能够将尼克和电子邮件从 JSP 发送到 Servlet 并验证值，现在我有了布尔值，但我不知道如何将它从 Servlet 发送到同一个 JSP 并使用它我用来提交信息的同一个按钮的 onclick 事件。我什至不知道是否有可能做到这一点......

如果有人能帮我解决这个问题，我将不胜感激，我是 Java 编程的新手，所以如果可能的话，我会很感激简单的解释。另外，如果有更好的方法来做我想做的事，请分享，如果有任何疑问，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:03:52.513

根本不需要 JavaScript。

在您的 servlet 中，您可以将验证结果存储到请求上下文中：

```
req.setAttribute('checkResult', checkResult); 
```

where`req`是类型`HttpServletRequest`并且`checkResult`是 a `Boolean`。

然后你可以转发到你的 JSP：

```
RequestDispatcher dispatcher = req.getRequestDispatcher("/your.jsp");
dispatcher.forward(req, resp); 
```

在您的 JSP 中，您可以将表单元素设置为只读，具体取决于`checkResult`您放入请求上下文的属性：

```
<textarea name="text" cols="50" rows="10" 
  <%= request.getAttribute("checkResult") != null && request.getAttribute("checkResult") ? "" : "readonly" %>
>...</textarea> 
```

因此，如果检查无效，则`<textarea>`元素将包含该`readonly`属性。否则`readonly`不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:36:55.543

正如 Roy 提到的 AJAX 最适合您的问题。你可以使用[DWR](http://directwebremoting.org/)！，它使普通的java类作为AJAX服务可用，只需调用它们的方法并得到结果。太简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:26:27.913

我认为 AJAX 更适合您的应用程序，它不需要提交整个表单，您可以将验证标志作为 plain`responseText`或 well-formatted发回`responseXML`。你也可以使用很多好的 javascript 库，比如`jQuery`帮助你快速简单地发送 AJAX 请求。

# xcode - 从 Xcode 断点运行 shell 命令

> ID：12397872
> 
> 赞同：2
> 
> 时间：2012-09-13T00:32:16.887
> 
> 标签：xcode, shell, breakpoints

我正在尝试从 Xcode 4.5 DP 3 中的断点运行 shell 脚本。我使用“选择”按钮设置断点。

![Shell 脚本命令](../Images/4f40dd54140e7776e445082da5e67b5e.png)

但是，在达到断点时，我收到以下消息：

```
Error in shell command for breakpoint "(selector name)". The command "/Users/Max/Developer/saveToLog.sh" does not exist. 
```

我尝试使用常规的 shell 命令，例如“say test”，但 Xcode 会打印相同的消息（当然，使用不同的命令名称）。当我从终端运行 shell 脚本时，它运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T06:34:15.520

好的，首先检查以确保您正确设置了 shell 权限。在终端类型中：

```
chmod u+x saveToLog.sh 
```

而且我还会在项目文件夹中找到 shell 脚本（当脚本位于我的桌面上时，我似乎无法正常工作）。

这是我测试过的脚本：

```
#!/bin/bash 
touch ~/Desktop/ItWorks.txt 
echo "This actually works!" > ~/Desktop/ItWorks.txt 
```

# linux - 无法使用 tr 转换 IP 地址

> ID：12397875
> 
> 赞同：0
> 
> 时间：2012-09-13T00:32:42.053
> 
> 标签：linux, translate, tr

我有一个包含很多 IP 地址的文件。我需要将这些 IP 地址更改为一些数字。以下是文件“数据”的外观

```
152.14.12.1
152.14.12.2
152.14.12.3 
```

当我执行`cat data | tr -s '152.14.12.1' '9'`时，它会替换所有内容，输出为`9 9 9 9`. 这该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:44:44.163

也许您更喜欢使用`sed`, 来替换字符串，而不是`tr`用于一组字符，例如：

`cat data | sed "s/152.14.12.1/9/g"`

给你：

```
9

152.14.12.2

152.14.12.3 
```

# iphone - Core Data 模型更改后如何从备份中恢复 SQLite 数据库（轻量级迁移）

> ID：12397877
> 
> 赞同：4
> 
> 时间：2012-09-13T00:32:50.647
> 
> 标签：iphone, sqlite, core-data, migration, restore

我有一个核心数据应用程序，可以将其 sqlite 数据库备份到 Dropbox，用户可以在需要时通过覆盖当前数据库来恢复它。

在下一个应用程序版本中，核心数据模型发生了变化，现有用户的数据库将通过轻量级迁移过程自动更新。

我关心的是已经备份的数据库。如果用户去恢复迁移前备份的 sqlite 数据库，它将与最新的模型不匹配，并且会导致应用程序崩溃。

有什么方法可以在还原过程中更新数据库以匹配我的核心数据模型？是我可以运行的过程，还是我可以采取一些步骤来确保备份不会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T12:29:37.503

如果您打开带有核心数据的 sqlite 数据库，轻量级迁移确实会自动发生。主要作为应用程序更新的一部分，但也可以在您打开恢复的数据库时。

您可以添加检查以查看还原后是否需要迁移：

```
-(BOOL) storeRequiresMigration: (NSURL *) storeURL {
NSError *error = nil;
NSPersistentStoreCoordinator * temporaryPersistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

//Check if migration is needed
NSDictionary *sourceMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:storeURL error:&error];
NSManagedObjectModel *destinationModel = [temporaryPersistentStoreCoordinator managedObjectModel];
BOOL isCompatibile = [destinationModel isConfiguration:nil compatibleWithStoreMetadata:sourceMetadata];
NSLog(@"Store requires migration: %d", !isCompatibile);
return !isCompatibile; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:14:01.723

只要您在应用程序中保留以前的数据模型版本，轻量级迁移就应该为您处理这个过程。从您的问题来看，我相信这正是轻量级迁移所需要的。它从以前的数据模型版本中推断出变化，并将旧数据映射到新数据模型中

在您希望重命名数据模型中的某些内容的特殊情况下，您可以使用位于“版本控制”下的检查器中的重命名 ID 来执行此操作。

# php - 我的 MySQL 函数在乘以小数时完全失去了数学精度。这是为什么？

> ID：12397879
> 
> 赞同：7
> 
> 时间：2012-09-13T00:33:04.683
> 
> 标签：php, mysql, sql, database

我做了这个简单的函数，结果返回 1 而不是 0.5

我做错什么了？

```
DELIMITER //

DROP FUNCTION IF EXISTS test_decimal //

CREATE FUNCTION test_decimal(input DECIMAL)
  RETURNS DECIMAL
BEGIN
  SET @_credit = 0.5;
  RETURN input * @_credit;
END //

DELIMITER ;

SELECT test_decimal(1); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T00:36:06.720

因为您没有指定`precision`，`scale`这就是它对值进行四舍五入的原因。精度表示为值存储的有效位数，小数位数表示可以存储在小数点后的位数。默认情况下，precision`10`的值为 ，scale 的值为`0`。所以，`RETURNS DECIMAL`是一样的`RETURNS DECIMAL(10,0)`。如果比例为 0，则*DECIMAL 值不包含小数点或小数部分*。尝试在您的函数中指定。

```
RETURNS DECIMAL(5,2) -- 999.99 
```

**[十进制、数字](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)**

# [SQLFiddle 示例](http://sqlfiddle.com/#!2/bd177/1)

# c# - 使用 LINQ，如何有条件地选择某些项目，但没有条件时选择全部？

> ID：12397880
> 
> 赞同：5
> 
> 时间：2012-09-13T00:33:22.380
> 
> 标签：c#, linq, select, subset

我想使用 myFilters 从 myCollection 中选择元素进行过滤：

```
var myFilters = new List<string> {"111", "222"};
var myCollection = new List<SomeClass> {
                      new SomeClass ("111"), 
                      new SomeClass ("999")
                   };

from filter in myFilters
from item in myCollection
where item.Name == filter
select item 
```

将返回“111”项目。

但是，如果 myFilters 为空，我想从 myCollection 返回所有项目。

```
var myFilters = new List<string> ();
var myCollection = new List<SomeClass> {
                          new SomeClass ("111"), 
                          new SomeClass ("999")
                    };

// Here's where I'm lost...
from filter in myFilters
from item in myCollection
where item.Name == filter
select item 
```

将返回所有项目（“111”和“999”）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T01:17:17.130

如果这些集合非常大，那么我建议使用连接。它看起来像这样：

```
var result = 
    myFilters.Any() ?
        from item in myCollection
        join filter in myFilters
        on item.Name equals filter into gj
        where gj.Any()
        select item
    : myCollection; 
```

使用连接的机会很容易被忽视。当列表远程很大时，这种连接方法将优于包含方法。如果它们很小并且性能可以接受，那么使用看起来最清晰的那个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T04:45:40.903

```
var result = myCollection
                   .Where(i => (!myFilters.Any() || myFilters.Contains(i.Name))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T00:46:12.777

您能做的最好的事情就是将过滤器投影到 SomeClass 中。就像是：

```
var results = myCollection.Any() ?
    myCollection.Where(item => myFilters.Contains(item.Name)) :
    myFilters.Select(f => new SomeClass (f)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T01:24:53.477

这个怎么样？

```
var myFilters = new List<string> ();
var myCollection = new List<SomeClass> {new SomeClass ("111"), new SomeClass ("999")};

// Here's where I'm lost...
from filter in myFilters
from item in myCollection
where item.Name == filter || !myFilters.Any()
select item 
```

从两个集合中进行选择会根据您的 where 子句执行连接。上面的加入条件说加入 item.Name 等于过滤器，如果没有可用的过滤器，则选择它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T00:58:20.910

尝试这个：

```
var result = myCollection.Where(s => !myFilters.Any() ||
                                     myFilters.Contains(s.Name));
//EDIT: commented these lines..based on comment by @Servy
//var result = myCollection.Where(s => myFilters.Count == 0 ||
//                                     myFilters.Contains(s.Name)); 
```

也许最好只计算一次过滤器集合：

```
bool isFilterEmpty = !myFilters.Any(); 
//bool isFilterEmpty = myFilters.Count == 0;    //...or like this
var result = myCollection.Where(s => isFilterEmpty || 
                                     myFilters.Contains(s.Name)); 
```

**编辑**

我什至会说@itsme86 的答案是正确的，但是，我猜，他混淆了你的收藏。所以他的答案应该是这样的：

```
var results = myFilters.Any()
                 ? myCollection.Where(item => myFilters.Contains(item.Name))
                 : myCollection; 
```

# mediaelement.js - 多个音频播放器不工作 mediaelement.js

> ID：12397881
> 
> 赞同：3
> 
> 时间：2012-09-13T00:33:59.010
> 
> 标签：mediaelement.js

我在尝试将 2 个音频播放器添加到一页时遇到问题

[http://www.brad-holmes.co.uk/sites/jameswilliams/index.html](http://www.brad-holmes.co.uk/sites/jameswilliams/index.html)

第一个加载正常，但第二个根本不加载控件，我直接从 mediaelements.js 网站使用 unedit .js 文件我需要编辑什么才能使多个音频播放器工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:06:59.187

看你的JS为玩家的启蒙

```
$(document).ready(function() {
    $('#audio-player').mediaelementplayer({
        alwaysShowControls: true,
        features: ['playpause','volume','progress'],
        audioVolume: 'horizontal',
        audioWidth: 400,
        audioHeight: 120
    });
}); 
```

您正在为这两个元素使用 DIV 选择器 (#audio-player)。您的 HTML 文档中应该有唯一的 DIV id，最好使用以下内容...

```
$(document).ready(function() {
    $('audio').mediaelementplayer({
        alwaysShowControls: true,
        features: ['playpause','volume','progress'],
        audioVolume: 'horizontal',
        audioWidth: 400,
        audioHeight: 120
    });
}); 
```

这将为您页面中的所有 <audio> 元素启动媒体播放器。如果你想给每个玩家不同的设置，你应该为每个玩家使用唯一的 DIV id。

# asp.net-mvc-3 - EF、POCO、DB First...如何在“设置”属性中进行业务逻辑？

> ID：12397884
> 
> 赞同：1
> 
> 时间：2012-09-13T00:34:39.607
> 
> 标签：asp.net-mvc-3, entity-framework, poco

好的，所以我一直在构建我的第一个大型（ish）EF 4.1 POCO + MVC 应用程序。它是旧系统的替代品，所以我使用的是现有数据库。

我已经使用 DbContext T4 生成生成了我的 POCO 类。我有一些非常好的表单正在进行，并且在我的 MVC 类中使用许多性感的泛型进行了一些非常好的验证，以减少样板代码......一切都很好。

突然间，我意识到（对我而言）最明智的事情是让一些业务逻辑位于我的 POCO 对象的一些属性的“集合”中。

例如，假设以下类是由 T4 生成的；

```
public partial class SalesOrderLine
{
    public int ID { get; set; }
    public int SalesOrderID { get; set; }
    public int ProductID { get; set; }
    public decimal UnitPrice { get; set; }
    public int Quantity { get; set; }
    public decimal ExtendedPrice { get; set; }

    public virtual Product Product { get; set; }
    public virtual SalesOrder SalesOrder { get; set; }
} 
```

暂时忽略一个明显的论点，即计算字段“ExtendedPrice”甚至不应该*存储*在数据库中，和我一起去兜风......

...那么，在我看来，从逻辑上讲，如果这个对象真的应该代表一个销售订单行，我应该能够构造我的对象，以便以下单元测试可以工作：

```
SalesOrderLine sol = new SalesOrderLine();
sol.UnitPrice = 100;
sol.Quantity = 5;
Assert.IsEqual(sol.ExtendedPrice, 500); 
```

...显然，只要我希望 T4 生成基本 POCO，我就不能这样做。在我看来，我有几个选择：

1.  将生成的代码文件的属性设置为“不编译”，将生成的代码复制粘贴到另一个文件中，修改“set”，做设置UnitPrice或Quantity时设置扩展价格的业务逻辑。这里的缺点是，只要从数据库加载对象，就会运行逻辑（因为 EF 将设置公共属性而不是我的私有字段）。此外，当数据库发生更改时，该对象将需要在项目的剩余生命周期内手动维护。

2.  创建一个 UpdateTotals 函数，该函数在我的对象的 Validate 例程中调用，该函数由 DbContext 上的 SaveChanges() 调用。显然，上面的单元测试在这种情况下不起作用。然而，系统和我的集成测试将起作用，并且只会在对对象进行更改时调用代码。

3.  确定我问错了问题，我应该真正向名为“SetPrice”和“SetQuantity”的对象添加方法，然后将 UnitPrice 和 Quantity 的 set 访问器限定为“内部”。这里的缺点是 MVC 将尝试从表单更新模型，并且无法设置这些属性。

4.  一些解决方案涉及下载两个或三个以上的框架，这些框架创建了比我已经拥有的更多级别的抽象......存储库模式，或“使用 NHibernate”或类似的东西......你可以提出这个建议，但我正在成长厌倦了以“学术上正确”的方式进行设置的工作量。对于这个项目，我宁愿在长期可维护性与开发速度方面进行中途会面，而不是用大量额外的工具和 dll 使我的项目过于复杂......但我会试着保持开放的心态:)

**--- 编辑：另一个想法 ---**

[5.] 另一个想法，因为字段总是简单地计算，所以真的不需要设置它们——无论是从数据库还是其他地方。因此，这样的事情可能会起作用：

```
 public decimal ExtendedAmount
 {
     get { return UnitPrice * Quantity; }
     internal set { }
 } 
```

...我的想法是 EF 实例化会尝试调用“set”，但该 set 不会做任何事情，然后，当对象被保存或检查更改时，它会调用“get”并返回计算的值，该值将存储在数据库中。这里唯一的缺点是当您尝试使用对象模型来验证数据库时，当数据库的 ExtendedAmount 字段中存储的值不正确时。我知道，这有点古怪，但我认为这将是一个有趣的技巧......事实上，如果 (value != UnitPrice * Quantity)，“set”可能会引发异常

**--- 结束编辑 ---**

我很想知道其他人在这种情况下做了什么，因为我相信这很常见。似乎很多教程都将您带到“从数据库生成 POCO 类”，然后将其余的项目开发留给您。

干杯，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:00:32.983

几个想法：

1.  为什么不使用[代码优先](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)？这样，您可以将业务逻辑（例如，计算的属性）直接放入您的实体类中。

    例子

    ```
    public partial class SalesOrderLine
    {
        public int ID { get; set; }
        public int SalesOrderID { get; set; }
        public int ProductID { get; set; }

        private decimal _unitPrice;
        public decimal UnitPrice
        {
             get { return _unitPrice; }
             set
             {
                  if (value == _unitPrice) return;
                  _unitPrice = value;
                  CalculateExtendedPrice();
             }
        }

        private decimal _quantity;
        public decimal Quantity
        {
             get { return _quantity; }
             set
             {
                  if (value == _quantity) return;
                  _quantity= value;
                  CalculateExtendedPrice();
             }
        }

        public decimal ExtendedPrice { get; set; }

        public virtual Product Product { get; set; }
        public virtual SalesOrder SalesOrder { get; set; }

        private void CalculateExtendedPrice()
        {
            ExtendedPrice = UnitPrice * Quantity;
        }
    } 
    ```

2.  如果 Code First 不是一个选项，那么如何让您的实体成为[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.100%29.aspx)（如果还没有的话）并将您的业务逻辑放在单独的代码文件中（但具有相同的类名）。这样，您的主代码文件将在您生成时被覆盖，但您的辅助代码文件将保留。这是处理生成代码的常用方法。

# java - 将主页重定向到前端控制器

> ID：12397885
> 
> 赞同：1
> 
> 时间：2012-09-13T00:35:13.353
> 
> 标签：java, model-view-controller, servlets

我有一个映射到 URL 模式的前端控制器`/Controller`，因此可以在`http://localhost:8080/myproject/Controller`. 如何配置我的 Web 应用程序，以便主页`http://localhost:8080/myproject`自动重定向到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:04:54.437

最简单的方法之一是将其注册为`<welcome-file>`in `web.xml`。

```
<welcome-file-list>
    <welcome-file>Controller</welcome-file>
</welcome-file-list> 
```

# .net - 编写自动登录到 www.yahoo.com 的 .NET 应用程序的正确方法是什么？

> ID：12397888
> 
> 赞同：5
> 
> 时间：2012-09-13T00:35:21.123
> 
> 标签：.net, httprequest

以下代码未登录 yahoo。应该如何重写？

（当然，“用户名”和“密码”将替换为我的实际帐户名和密码。）

```
 static void Main(string[] args)
    {
        string input = string.Format("username={0}&passwd={1}", "<username>", "<password>");

        WebRequest request = HttpWebRequest.Create("https://login.yahoo.com/config/login");
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";

        StreamWriter writer = new StreamWriter(request.GetRequestStream());
        writer.Write(input);
        writer.Close();

        StreamReader reader = new StreamReader(request.GetResponse().GetResponseStream());

        string x = reader.ReadToEnd();

        Console.Read();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T18:49:47.330

查看 yahoo 页面的 html 源代码时，您会注意到有很多隐藏字段

![显示表单隐藏字段的图像](../Images/1aa6eb686c56141a4290f730fc0ce35f.png)

用于保护用户，例如针对[CSRF](http://de.wikipedia.org/wiki/Cross-Site_Request_Forgery)

可能是，您应该首先向 yahoo 发送请求以获取有效的反 CSRF 令牌，然后将其包含到您的请求中。您还必须查看网站使用的 javascript。也许在客户端站点上有一些计算，然后与登录数据一起发送。

请注意，因为这些站点经常更改，也许明天您的实施将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:51:29.667

您将很难像这样登录，我认为这不太可能。如果您确实需要以编程方式登录，则需要 OpenID 或 OAuth。

在此处阅读有关[雅虎身份验证的更多信息](http://developer.yahoo.com/auth/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:33:55.733

表单上有几个隐藏的输入元素。很有可能在服务器端检查它们的存在，可能还有 cookie 来验证请求是否来自该登录页面。您是否尝试过通过 HttpWebRequest 将它们添加到请求中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T21:38:44.310

我有一个 html 页面，它使用他们的登录页面中的一些代码登录到雅虎邮件。它已经工作了一段时间，所以我建议在他们的登录页面上查看“[登录]”按钮附近的 html，并确定哪些值需要包含在 http 请求中。

查看我为登录 yahoo 邮件而编写的 html 页面，您只需将正确的 HIDDEN 值传递给服务器，显然还有您的用户并通过。因此，我建议您检查 html 表单中的 HIDDEN 值标签并尝试查看哪些需要与 http Web 请求一起发送。基本上以 .Net Framework 样式重新创建他们的登录页面表单

我希望这有帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T17:40:01.383

不久前我有一个类似的任务——我必须登录一个网站并从中提取一些数据。没有网络服务可以帮助我。我使用的是 VB6，我最终做的是创建一个 webbrowser 对象，加载网页并像这样登录，然后屏幕抓取我需要的数据。

这种方法粗糙且不可靠，如果登录过程包含验证码保护，它将无法工作，但它的速度很快，并且在您尝试找出更优雅和永久的方法时可能会对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-22T08:24:13.690

这是一个使用工作流和代码解释 OAuth 的链接。除了雅虎，Twitter 也是一个值得学习的好网站。链接中的一些代码使用 Twitter。请注意，OAuth 2.0 已经发布。

[http://www.codeproject.com/Articles/131978/Demystifying-OAuth](http://www.codeproject.com/Articles/131978/Demystifying-OAuth)

# php - 如果其他表中不存在则返回行

> ID：12397890
> 
> 赞同：0
> 
> 时间：2012-09-13T00:35:37.260
> 
> 标签：php, mysql, database, join

我有 2 张桌子

```
members
=======
id
f_name  // get these values.
l_name
email

friends
=======
to
from 
```

用户的 Id 是值 $member_id，如果它存在于“to”或“from”中，我希望它不返回该行的其他值，因此只显示非朋友。

我正在创建一个页面以允许成员搜索数据库以通过电子邮件或姓名添加他们的朋友。

我想返回朋友表的“to”或“from”列中没有用户 ID 记录的成员的所有行。

我知道如何做最基本的mysql，但连接对我来说是个问题，我真的不明白如何编写它们，如果有人可以帮助我，甚至可以解释一下，那就太好了！

```
My query now:
  $query = "SELECT * FROM members WHERE f_name LIKE '%" . $word . "%' OR l_name LIKE '%" . $word . "%' OR mc_name LIKE '%" . $word . "%' OR email LIKE '%" . $word . "%' LIMIT 10";
//Where $word is the search term. 
```

修改后的查询

```
SELECT * FROM members WHERE id NOT IN (SELECT to FROM friends WHERE frm=$member_id) AND $member_id NOT IN (SELECT frm FROM friends WHERE to=$member_id) AND f_name LIKE '%" . $word . "%' OR l_name LIKE '%" . $word . "%' OR mc_name LIKE '%" . $word . "%' OR email LIKE '%" . $word . "%' LIMIT 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:46:30.310

您也许可以使用 LEFT Join 来做到这一点，即使朋友的表上没有相应的行，它也会返回成员的所有行。

像这样的东西：

```
SELECT a.*, f.* FROM members m LEFT JOIN friends f 
```

一篇很好的文章来了解有很多连接是[这个。](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:50:17.900

已编辑

所以，假设一个 id 为 3 的用户：

```
SELECT * 
FROM members
WHERE id <> 3 
AND id NOT IN (SELECT to FROM friends WHERE from = 3)
AND id NOT IN (SELECT from FROM friends WHERE to = 3)
[Other conditions....]; 
```

或者

```
SELECT * 
FROM members
LEFT JOIN friends
ON (members.id = friends.to
    OR members.id = friends.from)
AND (members.to = 3 
     OR members.from = 3)
WHERE friends.to IS NULL
AND id <> 3
[Other conditions....]; 
```

也许考虑更改“from”和“to”列的名称，以避免混淆，因为 FROM 和 TO 是保留字。

此外，您可以在查询之前使用保留字 EXPLAIN 来查看正在获取的行数的差异。

# ruby-on-rails - NameError 与多对多关联

> ID：12397892
> 
> 赞同：0
> 
> 时间：2012-09-13T00:35:44.283
> 
> 标签：ruby-on-rails, nameerror

我正在尝试向用户创建的事件添加加入/取消加入按钮，类似于用户的关注/取消关注按钮。

我不确定在事件#show 中如何定义@rsvps

事件中的名称错误#show undefined local variable or method `event' for #<#:0x007f9dfaf9d978>

显示.html.erb

```
<%= link_to "Join Event", rsvps_path(:event_id => event), :method => :post %> 
```

events_controller.rb

```
def show
  @event = Event.find(params[:id])
  @user = current_user
  #@rsvp = ???? something here ????
end 
```

rsvps_controller.rb

```
class RsvpsController < ApplicationController
  before_filter :signed_in_user

  def create
    @rsvp = current_user.rsvps.build(:event_id => params[:event_id])
    if @rsvp.save
      flash[:notice] = "Joined event."
      redirect_to root_url
    else
      flash[:error] = "Unable to join event."
      redirect_to root_url
    end
  end

  def destroy
    @rsvp = current_user.rsvps.find(params[:id])
    @rsvp.destroy
    flash[:notice] = "Unjoin Event."
    redirect_to current_user
  end
end 
```

这里是模型

rsvp.rb

```
class Rsvp < ActiveRecord::Base
  attr_accessible :event_id, :user_id

  belongs_to :user
  belongs_to :event

end 
```

用户.rb

```
has_many :rsvps
has_many :events, through: :rsvps, dependent: :destroy 
```

事件.rb

```
belongs_to :user

has_many :rsvps
has_many :users, through: :rsvps, dependent: :destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:47:39.087

我认为这段代码会更像rails-ish。

```
# user.rb
has_many :users_events
has_many :events, through: :users_events

# event.rb
has_many :users_events
has_many :users, through: :users_events

# users_event.rb
belongs_to :user
belongs_to :event 
```

ActiveRecord 做其他所有事情。8)

例如`user.events`和`event.users`方法。

加入和取消加入用户操作可能由`events controller`. 更新方法可以如下所示

```
# events_controller.rb
def update
  respond_to do |format|
    @event = Event.find(params[:id])
    @event.users << current_user if params[:action] == 'join'
    @event.users.delete(current_user) if params[:action] == 'unjoin' 
    if @event.update_attributes(params[:event])
      format.html { redirect_to @event, notice: 'Event was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "edit" }
      format.json { render json: @event.errors, status: :unprocessable_entity }
    end
  end
end 
```

有点混乱，但我希望这个想法很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:58:16.307

您未定义的局部变量或方法错误似乎来自试图`:event_id => event`通过 rsvp_path 传递给您的控制器。相反，您应该像这样传递事件对象

```
<%= link_to "Join Event", rsvps_path(event), :method => :post %> 
```

控制器中的行将`@event = Event.find(params[:id])`负责确定您传递给它的事件。

# c# - 如何将文件从一个磁盘复制到具有相同文件夹结构的另一个位置？

> ID：12397893
> 
> 赞同：1
> 
> 时间：2012-09-13T00:35:50.137
> 
> 标签：c#, vb.net, file, copy, .net

我想对我的 USB 驱动器上的一些文件、目录和子目录进行精确复制，`I:/`并希望它们在其中`C:/backup` *（例如）*

我的 USB 驱动器具有以下结构：

*（只是要知道，这是一个例子，我的驱动器有更多的文件，目录和子目录）*

> *   课程/data_structures/db.sql
>     
>     
> *   游戏/pc/pc-game.exe
>     
>     
> *   考试/exam01.doc

* * *

好吧，我不确定如何开始，但我的第一个想法是让所有这些都`files`这样做：

```
string[] files = Directory.GetFiles("I:"); 
```

下一步可能是创建一个循环并使用`File.Copy`指定目标路径：

```
string destinationPath = @"C:/backup";

foreach (string file in files)
{
  File.Copy(file, destinationPath + "\\" + Path.GetFileName(file), true);
} 
```

此时一切正常，但不是我想要的，因为这不会复制文件夹结构。还有一些错误发生如下......

*   第一个发生是因为我的 PC 配置显示每个文件夹的隐藏文件，而我的 USB 有一个`AUTORUN.INF`不再隐藏的隐藏文件，循环尝试复制它，并在此过程中生成此异常：

> 拒绝访问路径“AUTORUN.INF”。

*   当某些路径太长时会发生第二种情况，这会产生以下异常：

> 指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。

* * *

所以，我不确定如何实现这一点并验证每个可能的错误情况。我想知道是否有另一种方法可以做到这一点以及如何（可能是某个库）或更简单的方法，例如具有以下结构的已实现方法：

`File.CopyDrive(driveLetter, destinationFolder)`

*（VB.NET 的答案也将被接受）。*

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:19:15.763

```
public static void Copy(string src, string dest)
{
    // copy all files
    foreach (string file in Directory.GetFiles(src))
    {
        try
        {
            File.Copy(file, Path.Combine(dest, Path.GetFileName(file)));
        }
        catch (PathTooLongException)
        {
        }
        // catch any other exception that you want.
        // List of possible exceptions here: http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx
    }

    // go recursive on directories
    foreach (string dir in Directory.GetDirectories(src))
    {

        // First create directory...
        // Instead of new DirectoryInfo(dir).Name, you can use any other way to get the dir name,
        // but not Path.GetDirectoryName, since it returns full dir name.
        string destSubDir = Path.Combine(dest, new DirectoryInfo(dir).Name);
        Directory.CreateDirectory(destSubDir);
        // and then go recursive
        Copy(dir, destSubDir);
    }
} 
```

然后你可以调用它：

```
Copy(@"I:\", @"C:\Backup"); 
```

没有时间测试它，但我希望你能明白......

编辑：在上面的代码中，没有像 Directory.Exists 这样的检查，如果目标路径中存在某种目录结构，您可以添加这些检查。如果您正在尝试创建某种简单的同步应用程序，那么它会变得有点困难，因为您需要删除或对不再存在的文件/文件夹采取其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:56:00.653

这通常从递归下降解析器开始。这是一个很好的例子：http: [//msdn.microsoft.com/en-us/library/bb762914.aspx](http://msdn.microsoft.com/en-us/library/bb762914.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:11:02.100

您可能想查看重载的`CopyDirectory`类

```
CopyDirectory(String, String, UIOption, UICancelOption) 
```

它将遍历所有子目录。

如果你想要一个独立的应用程序，我已经编写了一个应用程序，它可以从一个选定的目录复制到另一个目录，覆盖较新的文件并根据需要添加子目录。

给我发电子邮件。

# android - 实现 OnClickListener 的正确方法是什么

> ID：12397899
> 
> 赞同：2
> 
> 时间：2012-09-13T00:36:28.827
> 
> 标签：android, onclicklistener

有这么多在 Android 中实现 OnClickListener 的方法，我想知道是否有最佳实践或更推荐的方法来完成它（即：我记得阅读某些方式需要比其他方式更多的内存）？

目前我知道实现 OnClickListener 的四种方法，它们是：

1.  让您的 Activity 实现 OnClickListener 接口。
2.  内部类 OnClickListener。
3.  内联类 OnClickListener。
4.  在 Button 的 XML 定义中使用 android:onClick 属性。

在这四个选项中，我倾向于 XML 实现，因为它看起来更简洁，其他人可以发表意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:50:41.750

我不知道内存效率，但这是我的方法。

1.  我不喜欢它，`onClick`如果你有多个按钮，它需要多个 if-else（或 switch）
2.  如果第三个选项导致我的方法太大，我会使用它，例如`onCreate()`太大和凌乱
3.  我的最爱。它使您可以很容易地找出每个按钮的作用，但是如果它`onClick`不太长，我通常会使用它，以保持代码的可读性
4.  我几乎不使用它，它使代码更干净，但我不习惯这个，因为我不在 Java 的 SWING 中使用它。

但归根结底，就像@Lazy_Ninja 所说，这一切都归结为品味。他们四个都有效。

我认为在选择时最重要的是保持代码的干净和可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:43:44.637

这要看情况。起初我喜欢数字 1（让你的 Activity 实现 OnClickListener 接口），因为这样源代码看起来很整洁。
但最后我还是选择了 2.Inner Class OnClickListener，因为我发现它更容易阅读，也更容易实现，特别是如果你使用 eclipse 并且知道自动完成的快捷方式。
最后，我认为这取决于口味。

# android - 如何在 Android 中实现分段列表？

> ID：12397900
> 
> 赞同：3
> 
> 时间：2012-09-13T00:36:30.553
> 
> 标签：android, listview, indexer

我有一个在 ListView 中显示结果的搜索功能。我发现很难实现按字母顺序排列的列表。请告诉我如何去做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T04:22:36.363

您可以使用 Google 找到大量此主题。在我看来，这里有一些最好的教程。基本上，您使用适配器`SectionIndexer`的方法创建索引和显示（或隐藏）视图。`getView`

1、[ListView 提示和技巧#2：](http://android.cyrilmottier.com/?p=440) Cyril Mottier 对您的 ListView 进行切片。

2、Peter Kuterna[在联系人应用程序中的固定标题列表视图。](http://blog.peterkuterna.net/2011/05/pinned-header-listview-as-in-contacts.html)

3、Daniel Nam 的[IndexableListView](https://github.com/woozzu/IndexableListView)

# ruby - 如何在ruby中将显示的数值显示为字符串？

> ID：12397901
> 
> 赞同：0
> 
> 时间：2012-09-13T00:36:33.913
> 
> 标签：ruby

```
def sumof
     s = 12 + 17
     puts "The sum of 12 and 17 is: " + s
end 
```

当我调用 **sumof**时，出现错误

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:45:36.813

确实有一种方法可以转换为字符串，但它可以以多种方式使用。该方法被调用`to_s`（到字符串）。

方式1（手动）：

```
"Some string " + num.to_s 
```

方式2（插值）：

```
"Some string #{num}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T00:39:51.780

你会想做

`"The sum is " + s.to_s`或者`"The sum is #{s}"`

问题是在您的原始示例中没有隐式地转换为字符串。

# regex - 如何在命令行管道中匹配 IPv6 地址

> ID：12397902
> 
> 赞同：2
> 
> 时间：2012-09-13T00:36:35.693
> 
> 标签：regex, grep, command-line-interface, ipv6

如何制作一个在其标准输入中查找 IPv6 地址的 shell 命令？

一种选择是使用：

```
grep -Po '(?<![[:alnum:]]|[[:alnum:]]:)(?:(?:[a-f0-9]{1,4}:){7}[a-f0-9]{1,4}|(?:[a-f0-9]{1,4}:){1,6}:(?:[a-f0-9]{1,4}:){0,5}[a-f0-9]{1,4})(?![[:alnum:]]:?)' 
```

此 RE 基于“[匹配有效 IPv6 地址的正则表达式](https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses)”中的想法，但这并不十分准确。我可以使用更丑陋的正则表达式，但有没有更好的方法，一些我不知道的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:36:35.693

由于我找不到使用 shell 脚本命令的简单方法，因此我在 Python 中创建了自己的：

```
#!/usr/bin/env python

# print all occurences of well formed IPv6 addresses in stdin to stdout. The IPv6 addresses should not overlap or be adjacent to eachother. 

import sys
import re

# lookbehinds/aheads to prevent matching e.g. 2a00:cd8:d47b:bcdf:f180:132b:8c49:a382:bcdf:f180
regex = re.compile(r'''
            (?<![a-z0-9])(?<![a-z0-9]:)
            ([a-f0-9]{0,4}::?)([a-f0-9]{1,4}(::?[a-f0-9]{1,4}){0,6})?
            (?!:?[a-z0-9])''', 
        re.I | re.X)

for l in sys.stdin:
    for match in regex.finditer(l):
        match = match.group(0)
        colons = match.count(':')
        dcolons = match.count('::')
        if dcolons == 0 and colons == 7:
            print match
        elif dcolons == 1 and colons <= 7:
            print match 
```

# ios - 动画完成后播放视频 iOS

> ID：12397906
> 
> 赞同：0
> 
> 时间：2012-09-13T00:36:57.420
> 
> 标签：ios, animation, uiview, mpmovieplayercontroller

嗯..我有一个简单的动画，可以左右滑动 2 个图像视图.. 完成后，我想播放视频，但使用我现有的代码（如下），动画永远不会发生，视频开始播放。我该如何解决这个问题？谢谢..

```
NSString *movpath = [[NSBundle mainBundle] pathForResource:@"testvideo" ofType:@"m4v"];
    mpviewController = [[MPMoviePlayerViewController alloc]
                        initWithContentURL:[NSURL fileURLWithPath:movpath]];
    [mainView addSubview:mpviewController.view];

    [UIView animateWithDuration:0.5 animations:^{
        leftView.frame = CGRectOffset(leftView.frame, 160, 0);
        rightView.frame = CGRectOffset(rightView.frame, -160, 0);
    }completion:(void (^)(BOOL)) ^{

        MPMoviePlayerController *mp = [mpviewController moviePlayer];

        [mp prepareToPlay];
        [mp setFullscreen:YES animated:YES];
        mp.controlStyle = MPMovieControlStyleNone;

        [[mpviewController moviePlayer] play];

    }
     ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:57:43.293

您的动画完成块看起来不对。试试这个：

```
 [UIView animateWithDuration:0.5 animations:^{
        leftView.frame = CGRectOffset(leftView.frame, 160, 0);
        rightView.frame = CGRectOffset(rightView.frame, -160, 0);
    } completion:^(BOOL finished){

        MPMoviePlayerController *mp = [mpviewController moviePlayer];

        [mp prepareToPlay];
        [mp setFullscreen:YES animated:YES];
        mp.controlStyle = MPMovieControlStyleNone;

        [[mpviewController moviePlayer] play];

    }]; 
```

# apache - Mod重写陷阱/ABC

> ID：12397907
> 
> 赞同：1
> 
> 时间：2012-09-13T00:36:59.857
> 
> 标签：apache, .htaccess, mod-rewrite

假设我有一个这样的 URL： [http ://example.com/ABC](http://example.com/ABC)

如何在 / 之后捕获 ABC 并将其放入 partner_code 中？ABC 始终是一个 3 或 4 个字母的字符串，后面没有任何内容。

这会导致站点图像、CSS 文件等爆炸：RewriteRule ^(.*)$ index.php?partner_code=$1&utm_source=partner&utm_medium=link&utm_campaign=$1 [L]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:50:15.993

你在正确的轨道上。如果您包含一些条件，使其忽略对现有资源的请求（如 css/images/etc.）并且对正则表达式更加严格，它应该可以工作。

尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z]{3,4})$ index.php?partner_code=$1&utm_source=partner&utm_medium=link&utm_campaign=$1 [L] 
```

# objective-c - iOS - 旋转图像或图片

> ID：12397909
> 
> 赞同：0
> 
> 时间：2012-09-13T00:37:35.557
> 
> 标签：objective-c, ios, xcode, image

我的 iOS 应用程序从 Internet 下载一些图像并将它们显示在屏幕上（iPhone 纵向布局）。其中一些图像比更高更宽，在这种情况下，当图像呈现在屏幕上时，它们看起来会被挤压（想象一下宽屏电视的图片缩小到 iPhone 的宽度）。我想要做的是每次图像的宽度比图像的高度宽时，我想将图片顺时针旋转90度（进入横向布局模式），将其保存在应用程序的文档文件夹中，然后呈现它在屏幕上 - 这样，宽屏电视（例如）的图片看起来旋转了 90 度，但图像纵横比并未完全破坏。

由于各种复杂的原因，我不能使用我的应用程序的横向布局 - 太多其他副作用。所以这是我写的代码：

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imageURL]]];

    CGFloat width = image.size.width;
    CGFloat height = image.size.height;

    if(width > 1.2*height) {
        NSLog(@"rotate the image");
        CGImageRef imageRef = [image CGImage];
        image = [UIImage imageWithCGImage:imageRef scale:1.0 orientation:UIImageOrientationLeft];
    } 
```

然后我将图像保存到 App 的文档文件夹中。然后打开一个新的 UIViewController 读取保存在文档文件夹中的图像文件，然后打开该图像。问题是，图像根本没有旋转 - 只是看起来与原始图像相同 - 没有任何旋转。我确实知道上面的代码试图做它应该做的事情，因为我确实在控制台中看到了 NSLog “旋转图像”。但不知何故，这张图片并没有被保存为旋转后的图片。

那么，我应该如何处理这个问题呢？

编辑：保存我的图像的代码：

```
NSString *documentsDirectory = [NSHomeDirectory()        stringByAppendingPathComponent:@"Documents"];

    // Create image name
    NSString *path = [@"" stringByAppendingFormat:@"%@%@", @"image", @".png"];

    // Create full image path
    path = [documentsDirectory stringByAppendingPathComponent:path];

    path = [NSString stringWithFormat:@"%@", path];

    // Write image to image path
    NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];
    [data1 writeToFile:path atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:18:53.297

以下网站的解决方案最终对我有用：

[http://www.catamount.com/blog/uiimage-extensions-for-cutting-scaling-and-rotating-uiimages/](http://www.catamount.com/blog/uiimage-extensions-for-cutting-scaling-and-rotating-uiimages/)

# cakephp - 使用 CakePHP 在 AppModel 中保存数据数组

> ID：12397913
> 
> 赞同：0
> 
> 时间：2012-09-13T00:37:58.027
> 
> 标签：cakephp, cakephp-2.1

我在 CakePHP 的 AppModel 中有这个功能（这用于在 CakePHP 中安装初始数据） 但是，我似乎无法让它保存我的数据，并且我没有收到任何错误。

这是我在 App/Model/AppModel.php 中的函数：

```
public function importData() {
$initialOptionData = array(
array( 'Option' => array( 'name' => 'version', 'value' => '1.0.0', )),
array( 'Option' => array( 'name' => 'site-name', 'value' => 'Site Title', )),
    );
$this->create();
$this->saveMany($initialOptionData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:00:30.627

从您发布的代码看来，您正在尝试将数据保存到`options`表中，为此您需要使用`Option`模型。

但是你的代码在里面`AppModel`，所以首先导入`Option`模型，然后执行你的保存语句。

***您的代码应如下所示：***

```
public function importData() {

  $initialOptionData = array(
       array( 'Option' => array( 'name' => 'version', 'value' => '1.0.0', )),
       array( 'Option' => array( 'name' => 'site-name', 'value' => 'Site Title', )),
    );

   App::import('model','Option');  // Import the Option Model
   $Option = new Option();  // create instance of Option class

   // save statements

   $Option->create();
   $Option->saveMany($initialOptionData);

} 
```

### 笔记

`app/model/Option.php`如果您在文件中编写代码，您正在尝试的代码将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:44:59.797

我想将值存储为模型属性就足够了。无需致电`$this->save...`

```
public $initialOptionData = array(
  array( 'Option' => array( 'name' => 'version', 'value' => '1.0.0', )),
  array( 'Option' => array( 'name' => 'site-name', 'value' => 'Site Title', )),
); 
```

所有模型都将继承 initialOptionData...

# php - HTML 标记位置结束 preg_replace_callback

> ID：12397915
> 
> 赞同：1
> 
> 时间：2012-09-13T00:38:10.233
> 
> 标签：php, regex

这是我目前正在处理的一个奇怪的扳手。我一直在使用它，使用各种正则表达式、间距和引号变体，但似乎只有结束`</a>`标记的位置存在问题。

我已经构建了一个 RegEx 解析器（我知道）来从 HTML 输出中获取标签，并从我们称为“短代码”的库中为每个标签触发自定义闭包。它只是将标签换成闭包的返回值，如果闭包不存在，则将标签留在原处。

当它`</a>`与我正在抓取的标签放在同一行时，它会导致`preg_replace_callback`失败。当我添加换行符时，一切都完美无缺。我们在所有地方都使用这些标签作为我们模板系统的核心部分，并且它们在其他所有实例中都运行良好。

所以我的问题是……为什么？！这是一个错误还是我是错误？

**编辑：**更新模式以限制不情愿。关闭`</a>`标签仍然会终止该进程。（@艾伦摩尔）

**编辑2：**所以，正则表达式是罪魁祸首。在某些情况下，它会在同一行的标签之外拉入内容，但这种模式解决了问题 - `'#\[\s*(\w[^\]\s]*)(.*?)\s*\]#i'`.

**失败的 HTML**

```
<div>
    <a href="[ make_url post_id='200' ]">Some Link</a>
</div> 
```

**成功的 HTML**

```
<div>
    <a href="[ make_url post_id='200' ]">
        Some Link
    </a>
</div> 
```

或者

```
<div>
    <a href="[ make_url post_id='200' ]">Some Link
    </a>
</div> 
```

**PHP**

没什么特别的，即使我把它简化为基础，它仍然失败。

```
$content = 'HTML output from an output buffer';
//$old_pattern = '#\[\s*?(\w+?(?:\.?\w+?)*?(?=\s|\]))(.+)*?\s*?\]#i';
$pattern = '#\[\s*(\w+(?:\.?\w+)*(?=\s|\]))(.+)\s*\]#i';

$content = preg_replace_callback( $pattern, function( $matches ) {
    // Do things with the matches
}, $content );

// Send content back to the template
return $content; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:05:43.203

嗯，像这样基本的东西不适合你吗？

```
/<a.*?(\[.*?\]).*?>.*?<\/a>/is 
```

例如

```
$matches = null;
$result = 
    preg_match_all('/<a.*?(\[.*?\]).*?>.*?<\/a>/is', '
        <div>
            <a href="[ make_url post_id=\'200\' ]">Some Link</a>
        </div>
        <div>
            <a href="[ make_url post_id=\'200\' ]">
                Some Link
            </a>
        </div>
        <div>
            <a href="[ make_url post_id=\'200\' ]">Some Link
            </a>
        </div>
    ', $matches);
var_dump($matches); 
```

[http://codepad.viper-7.com/PM70m1](http://codepad.viper-7.com/PM70m1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:57:18.167

事实证明，正则表达式是罪魁祸首。在某些情况下，它会在同一行的标签之外拉入内容，但这种模式解决了问题 - `#\[\s*(\w[^\]\s]*)(.*?)\s*\]#i`.

# python - 使用 Python Django BeautifulSoup 和 Curl 正确抓取和显示日文字符

> ID：12397918
> 
> 赞同：9
> 
> 时间：2012-09-13T00:38:33.550
> 
> 标签：python, django, utf-8, beautifulsoup, iso-8859-1

我正在尝试使用 python、curl 和 BeautifulSoup 抓取日语页面。然后我将文本保存到使用 utf-8 编码的 MySQL 数据库中，并使用 Django 显示结果数据。

这是一个示例网址：

[https://www.cisco.apply2jobs.com/ProfExt/index.cfm?fuseaction=mExternal.showJob&RID=930026&CurrentPage=180](https://www.cisco.apply2jobs.com/ProfExt/index.cfm?fuseaction=mExternal.showJob&RID=930026&CurrentPage=180)

我有一个函数用于将 HTML 提取为字符串：

```
def get_html(url):
    c = Curl()
    storage = StringIO()
    c.setopt(c.URL, str(url))
    cookie_file = 'cookie.txt'
    c.setopt(c.COOKIEFILE, cookie_file)
    c.setopt(c.COOKIEJAR, cookie_file)
    c.setopt(c.WRITEFUNCTION, storage.write)
    c.perform()
    c.close()
    return storage.getvalue() 
```

然后我将它传递给 BeautifulSoup：

```
html = get_html(str(scheduled_import.url))
soup = BeautifulSoup(html) 
```

然后对其进行解析并将其保存到数据库中。然后我使用 Django 将数据输出到 json。这是我正在使用的视图：

```
def get_jobs(request):
    jobs = Job.objects.all().only(*fields)
    joblist = []
    for job in jobs:
        job_dict = {}
        for field in fields:
            job_dict[field] = getattr(job, field)
        joblist.append(job_dict)
    return HttpResponse(dumps(joblist), mimetype='application/javascript') 
```

结果页面显示字节码，例如：

xe3\x82\xb7\xe3\x83\xa3\xe3\x83\xaa\xe3\x82\xb9\xe3\x83\x88

\xe8\x81\xb7\xe5\x8b\x99\xe5\x86\x85\xe5\ xae \xb9\xe3
\x82\xb7\xe3\x82\xb9\xe3\x82\xb3\xe3\x82\xb7\xe3\x82\xb9\xe3\x83\x86\xe3\x83\xa0\xe3\x82\ xba\xe3\x81\xae\xe3\x82\xb3\xe3\x83\xa9\xe3\x83\x9c\xe3\x83\xac\xe3\x83\xbc\xe3\x82\xb7\xe3\x83\xa7\ xe3\x83\xb3\xe4\xba\x8b\xe6\xa5\xad\xe9\x83\xa8\xe3\x81\xa7\xe3\x81\xaf\xe3\x80\x81\xe4\xba\xba\xe3\ x82\x92\xe4\xb8\xad\xe5\xbf\x83\xe3\x81\xa8\xe3\x81\x97\xe3\x81\x9f\xe3\x82\xb3\xe3\x83\x9f\xe3\x83\ xa5\xe3\x83\x8b\xe3\x82\xb1\xe3\x83\xbc\xe3\x82\xb7\xe3\x83\xa7\xe3\x83\xb3\xe3\x81\xab\xe3\x82\x88\ xe3\x82\x8a\xe3\

而不是日语。

我整天都在研究并将我的数据库转换为 utf-8，尝试将文本从 iso-8859-1 解码并编码为 utf-8。

基本上我不知道自己在做什么，如果我能得到任何帮助或建议，我将不胜感激，这样我就可以避免再花一天时间来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:11:42.757

您发布的示例不知何故是字符串的 ascii 表示。您需要将其转换为 python unicode 字符串。通常你可以使用[字符串编码和解码](http://docs.python.org/library/stdtypes.html#string-methods)来完成这项工作。如果您不确定哪一个是正确的方法，只需在 python 控制台中进行试验。

尝试`my_new_string = my_string.decode('utf-8')`获取 python unicode 字符串。这应该在 Django 模板中正确显示，可以保存到数据库等。作为示例，您也可以尝试`print my_new_string`并看到它正在输出日文字符。

# c# - 如何从文本框中删除最后一个字符？

> ID：12397924
> 
> 赞同：2
> 
> 时间：2012-09-13T00:39:07.320
> 
> 标签：c#

我正在尝试编写 MS Windows Calculator 的副本 - 只是为了锻炼我在我正在做的课程中获得的知识 - 我在编写`Backspace`密钥时遇到问题，但我不知道如何删除`TxtResult.Text`（文本框）上的最后一个字符。那么，有人可以教我如何做到这一点吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ZigndSuperCalc
{
    public partial class FrmZigndSC : Form
    {
        Int64 aux, result;
        Int16 cont = 0;
        bool sucess;
        public FrmZigndSC()
        {
            InitializeComponent();
        }

        private void BtnSoma_Click(object sender, EventArgs e)
        {
            sucess = Int64.TryParse(TxtInput.Text, out aux);
            result += aux;
            TxtInput.Text = Convert.ToString(result);
            TxtInput.Focus();
        }

        private void BtnCE_Click(object sender, EventArgs e)
        {
            TxtInput.Text = "0";
        }

        private void BtnC_Click(object sender, EventArgs e)
        {
            result = 0;
            TxtInput.Text = "0";
        }

        private void BtnBackspace_Click(object sender, EventArgs e)
        {
            // write here a method to delete the last character from 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T00:47:08.913

如果我们在模仿`calc.exe`，那么它可能是这样的：

```
string s = TxtResult.Text;

if (s.Length > 1) {
    s = s.Substring(0, s.Length - 1);
} else {
    s = "0";
}

TxtResult.Text = s; 
```

编辑：根据要求，`Substring`我在这里使用的方法提取字符串的一部分并将其分配给`Text`文本框的属性。请参阅：http: [//msdn.microsoft.com/en-us/library/aka44szs.aspx](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T00:43:10.483

尝试

```
TxtResult.Text = TxtResult.Text.Substring(0, TxtResult.Text.Length - 1);` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-28T19:48:49.390

```
if (textBox1.TextLength > 0) 
{ 
    textBox1.Text = textBox1.Text.Substring(0, (textBox1.TextLength - 1)); 
} 
else 
{ 
    MessageBox.Show("No Number.");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-13T18:18:19.860

我使用这种方法：

```
private void button_Click(object sender, EventArgs e)
{
    if (textbox.Text.Length > 0)
    {
        textbox.Text = textbox.Text.Remove(textbox.Text.Length - 1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-31T08:03:12.410

```
 //CLICK ON BUTTON1

 private void button1_Click(object sender, EventArgs e)
        {
            if (textBox1.Text.Length > 1)
            {
                textBox1.Text = textBox1.Text.Substring(0, textBox1.Text.Length - 1);
            }![enter image description here][1]
            else
            {
                textBox1.Text = "0";
            }
        } 

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-25T20:11:17.233

您必须创建一个名为“buttonDel”的按钮然后

```
 private void buttonDel_Click(object sender, EventArgs e)
        {
               if (sender == buttonDel)
            {
                s = textBox1.Text;

                if (s.Length > 1)
                {
                    s = s.Substring(0,s.Length - 1);
                    textBox1.Text = s;
                }
                else
                {
                    textBox1.Text = "0";
                }
            }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-03T20:03:33.190

这对我有用！

```
 private void txtNumCL_TextChanged(object sender, EventArgs e)
    {
        bool ctrl = Int32.TryParse(txtNumCL.Text, out int outParse);
        if (!ctrl && txtNumCL.Text.Length > 0)
        {
            txtNumCL.Text = txtNumCL.Text.Substring(0, txtNumCL.Text.Length - 1);
            txtNumCL.SelectionStart = txtNumCL.Text.Length;
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-08T13:36:49.953

**更新：**

```
output.Text=output.Text.Remove(output.Text.Length-1, 1); 
```

旧：您可以使用：

```
TxtInput.Text = TxtInput.Text.ToString().Remove(TxtInput.Text.ToString().Length-1,1); 
```

# linux - 如何使 GNU Parallel 从具有记录分隔符的多个文件中获取输入

> ID：12397929
> 
> 赞同：3
> 
> 时间：2012-09-13T00:39:44.210
> 
> 标签：linux, multithreading, unix, parallel-processing, gnu

我有一个可以通过以下方式执行的代码：

```
$ ./mycode [param1] [param2] [input1-fasta] [input2-fasta] [output-file] 
```

例如执行它：

```
 $ ./mycode 4 4 input.fasta input2.fasta output.txt 
```

通常，该代码会进行全反全序列比较。

Fasta 文件如下所示：

```
>Seq_1 
TTTGTTTGCTTCATATTGTAATTAATTTTAAAGAAA
>Seq_2
CTGTGACAAATTGCCCTTAACCCTGTGACAAATTGC 
```

请注意，两个输入的序列数可能不同。

我想要做的是使用多核运行该代码命令并使用[GNU Parallel](http://www.gnu.org/software/parallel/)自动分块文件。希望它能跑得更快。

所以我尝试了这个命令：

```
$ parallel --pipe --recstart '>' "./mycode 4 4 input.fasta input2.fasta output.txt" 
```

但它无法执行，而是给了我这个：

```
parallel: Warning: Input is read from the terminal. Only experts do this on purpose. Press CTRL-D to exit. 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:03:04.070

目前尚不清楚您期望这样做会做什么：

```
parallel --pipe --recstart '>' "./mycode 4 4 input.fasta input2.fasta output.txt" 
```

如果您想要全部反对，我建议您将大文件分成块，然后针对小文件测试每个块。所以像：

```
cat big.fasta | parallel --pipe --recstart '>' "./mycode 4 4 small.fasta - output{#}.txt" 
```

要使用 --pipe 您的程序必须能够从标准输入（stdin）读取，因此是“-”。如果它不能尝试 bash 的重定向魔法：

```
cat big.fasta | parallel --pipe --recstart '>' "./mycode 4 4 small.fasta <(cat -) output{#}.txt" 
```

# php - 如何从 symfony2 中的 yml 文件中获取数据

> ID：12397932
> 
> 赞同：-2
> 
> 时间：2012-09-13T00:40:01.410
> 
> 标签：php, symfony

我想创建一个名为 setting.yml 的文件，它会有类似的数据

```
Route1: users
Route2 : profile 
```

这样在我的控制器中我就可以从那个 Yml 文件中获取 route1

文件`/app/config/settings.yml`在 config.yml 中但不包含在其中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:41:45.367

你可以做两件事：

如果您的配置很简单，请在主 config.yml 文件或从主 config.file 导入的文件中的“参数”条目下添加您需要的值。例如：

```
parameters:
    Route1: users
    Route2 : profile 
```

然后在您的控制器中，使用此代码获取参数之一：

```
$route = $this->container->getParameter('Route1'); 
```

或者，如果你想要一个真正灵活的配置，你可以为你的包实现一个语义配置。有关您需要的所有信息，请参阅此链接：

[http://symfony.com/doc/master/cookbook/bundles/extension.html](http://symfony.com/doc/master/cookbook/bundles/extension.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:57:17.117

您需要将其导入配置文件才能正常工作

**配置.yml**

```
imports:
    - { resource: settings.yml } 
```

但我不确定您是否正确使用路由

请参阅文档以了解如何正确使用[路由](http://symfony.com/doc/current/book/routing.html)

# jquery - JQuery：显示/隐藏带有复选框的文本框

> ID：12397933
> 
> 赞同：-1
> 
> 时间：2012-09-13T00:40:20.053
> 
> 标签：jquery, jquery-ui

我分别有 6 个复选框和 6 个文本框，如下面的脚本所示，

[http://jsfiddle.net/ramu_steve/H6dBW/1/](http://jsfiddle.net/ramu_steve/H6dBW/1/)

当我检查一个复选框（单选按钮功能）时，会显示相应的文本框..但是当我移动到检查其他复选框时，在我们取消选中复选框之前，为前一个复选框显示的文本框不会被隐藏......提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:13:32.810

更简单的代码怎么样？

现场示例：http: [//jsbin.com/ewekit/1/edit](http://jsbin.com/ewekit/1/edit)

```
 <ul>
    <li>
      <label for="r1">
        <input type="checkbox" id="r1" name="r1" /> First Hotel Visit
      </label>
      <input type="text" id="t1" name="t1" />
    </li>
    <li>
      <label for="r2">
        <input type="checkbox" id="r2" name="r2" /> Repeat Hotel Visit
      </label>
      <input type="text" id="t2" name="t2" />
    </li>
    <li>
      <label for="r3">
        <input type="checkbox" id="r3" name="r3" /> Fish Bowl
      </label>
      <input type="text" id="t3" name="t3" />
    </li>
    <li>
      <label for="r4">
        <input type="checkbox" id="r4" name="r4" /> Large Party
      </label>
      <input type="text" id="t4" name="t4" />
    </li>
    <li>
      <label for="r5">
        <input type="checkbox" id="r5" name="r5" /> Generic
      </label>
      <input type="text" id="t5" name="t5" />
    </li>
    <li>
      <label for="r6">
        <input type="checkbox" id="r6" name="r6" /> Corp Marketing
      </label>
      <input type="text" id="t6" name="t6" />
    </li>
  </ul> 
```

Javascript

```
$(function() {

  // hide all text inputs
  hideAllTextInputs();

  // radio click
  $("ul input[type='checkbox']").click(function() {

    // current <li>
    var li = $(this).closest("li");

    // show it's text
    li.find("input[type='text']").show();

    // hide all again
    hideAllTextInputs();
  });

});

function hideAllTextInputs() {
  // hide all text inputs
  $("ul input[type='checkbox']")
    .not(":checked")
    .closest("li")
    .find("input[type='text']")
    .hide();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:35:05.820

看起来您为每个文本框编写了一个单独的事件。只需使用单个事件即可完全实现此代码..

```
$(function() {
    // Hide all Textboxes on DOM ready
    $('.typ').hide();

    //Create the click event for check box
    $('input[type="checkbox"]').on('click', function() {
        // Hide All Text Boxes
        $('.typ').hide();
        var isChecked = $(this).is(':checked');
        if(isChecked){  
            // Uncheck ALl the checkboxes
            $('.lettertyp').attr('checked', false);
            // Check curret checkbox
            $(this).attr('checked', true);
            // Find the Sibling of the TextBox and SHow it
            $(this).parent().parent().find('input[type=text]').show();
        }         
        else{
        }   
    });
});​ 
```

在这里检查[FIDDLE](http://jsfiddle.net/sushanth009/fNtzT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:50:30.833

你应该做的是当一个框被点击时，隐藏所有的文本框，然后显示被点击按钮的文本框。**[查看这个更新的 jsFiddle。](http://jsfiddle.net/H6dBW/3/)**我所做的是添加`id='table'`到您的表格元素中，然后在您的代码下`lettertyp`添加此代码的类：

```
$('#table input[type="text"]').hide(); 
```

这将选择所有文本框并将它们全部隐藏。然后您的代码在此之后继续并显示被选中的框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T01:01:13.873

我想也许这就是你试图用所有这些代码做的事情，不太确定，因为我只完成了一半？

```
$(function() {
    $('[id^="typ"]').hide();
    $(".lettertyp").on('change', function() {
        $(".lettertyp").not(this).prop('checked', false);
        $('[id^="typ"]').hide();
        $("#"+this.id.replace('letter', '')).toggle(this.checked);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/H6dBW/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T01:10:04.110

[http://jsfiddle.net/H6dBW/11/](http://jsfiddle.net/H6dBW/11/)

```
//Select Promo Letter Type 
$(document).ready(function(){
    //CheckBoxes behaviour
    $(".lettertyp").click(function(){
        $(".lettertyp").attr('checked',false);
        $(this).attr('checked', true);
    });

    //Hide all textboxes   
    $('.typ').hide();

    //Hide FisrtHotelVist
    $('#lettertyp1').click(function(){
        $('.typ').hide();
        $('#typ1').show();
    }); 
    // Hide Repeat HotelVisit
    $('#lettertyp2').click(function(){
        $('.typ').hide();
        $('#typ2').show();
    }); 
    //Hide Fish bowl
    $('#lettertyp3').click(function(){
        $('.typ').hide();
        $('#typ3').show();
    }); 
    //Hide LargeParty
    $('#lettertyp4').click(function(){
        $('.typ').hide();
        $('#typ4').show();
    }); 
    //Hide Generic 
    $('#lettertyp5').click(function(){
        $('.typ').hide();
        $('#typ5').show();
    }); 
    //hide corpMarketing
    $('#lettertyp6').click(function(){
        $('.typ').hide();
        $('#typ6').show();
    }); 
}); 
```

好的 balexandre，然后[http://jsfiddle.net/H6dBW/18/](http://jsfiddle.net/H6dBW/18/)

```
//Select Promo Letter Type 
$(document).ready(function(){
    //Hide all textboxes   
    $('.typ').hide();

    //CheckBoxes behaviour
    $(".lettertyp").click(function(){
        $(".lettertyp").attr('checked',false);
        $(this).attr('checked', true);
        $('.typ').hide();
        var id = $(this).attr('id');
        id = id.substr(id.length - 1);
        $('#typ' + id).show();
    });
}); 
```

# python - 使用 Python 从字符串中提取链接

> ID：12397938
> 
> 赞同：1
> 
> 时间：2012-09-13T00:41:33.473
> 
> 标签：python, beautifulsoup

首先，我想做的是向用户询问搜索词。然后程序搜索 yahoo 并打印出第一个结果的链接。这是我到目前为止的代码。

```
from urllib import urlopen

import re, time
from BeautifulSoup import BeautifulSoup

print "What Would You Like to Search For?"

user_input = raw_input('') #Gets Search Term from User

search = "http://search.yahoo.com/search;_ylt=A2KLtaJX_1BQfT4AwX2bvZx4?p=baker&toggle=1&cop=mss&ei=UTF-8&fr=yfp-t-701" 

new_search = search.replace('baker', user_input)           
content = urlopen( new_search ).read()                       

soupcontent = BeautifulSoup(content)                    

link1 = soupcontent.find(id="link-1")            
print link1 
```

一切正常。它接受用户输入并搜索雅虎。我遇到的问题是可以说我搜索了“狗”

然后程序将打印如下内容： "a id="link-1" class="yschttl spt" href="http://www.dog.com/" data-bk="5101.1>b>Dog/b > 用品 | b>狗/b> 食物，b>狗/b> 床，b>狗/b> wbr>/wbr>跳蚤控制和更多.../a>"

这确实是页面上的第一个链接。但是我只希望它打印出“http://www.dog.com/”有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T00:49:37.247

尝试使用正则表达式。请参阅：[http](http://docs.python.org/library/re.html) ://docs.python.org/library/re.html 。

```
match = re.search(r'href="(http://.*?)"', str(link1))
print match.group(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:01:01.773

BeautifulSoup 实际上使这非常容易：

```
>>> from bs4 import BeautifulSoup
>>> from urllib2 import urlopen
>>> 
>>> url = 'http://search.yahoo.com/search?p=dog'
>>> content = urlopen(url).read()
>>> soup = BeautifulSoup(content)
>>> 
>>> soup.find(id="link-1")
<a class="yschttl spt" data-bk="5097.1" href="http://www.dog.com/" id="link-1"><b>Dog</b> Supplies | <b>Dog</b> Food, <b>Dog</b> Beds, <b>Dog</b> <wbr></wbr>Flea Control &amp; More ...</a>
>>> soup.find(id="link-1").get("href")
'http://www.dog.com/' 
```

根据您对 UTF-8 的请求，您可能会看到

```
 u'http://www.dog.com/' 
```

相反，Unicode 版本也很好。

标准警告：请务必检查 Yahoo! 的最终用户许可证是否允许您做任何事情，因为许多许可证排除了某些自动使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:50:13.597

`link = your_full_link_string.split('href="')[1].split('"')[0]`

# java - Spring和MVC正确的项目结构

> ID：12397940
> 
> 赞同：17
> 
> 时间：2012-09-13T00:41:57.337
> 
> 标签：java, spring, swing, model-view-controller

我正在使用 Maven 开发 Swing 独立应用程序。我尝试遵循 MVC 模式。我对我的项目结构感到困惑。我有这样的事情：

```
/src/main/java/myName/appName             
/src/main/java/myName/appName/model       
/src/main/java/myName/appName/view
/src/main/java/myName/appName/controller 
```

现在我想合并 Spring 框架，是什么让我将 DAO 和 BO 接口和实现放在某个地方。我已阅读此文章[链接](http://www.mkyong.com/spring/maven-spring-hibernate-annotation-mysql-example/)，建议的项目结构不适合我的。我想到的是添加以下内容：

```
/src/main/java/myName/appName/dao
/src/main/java/myName/appName/bo 
```

dao 目录的内容如下所示（模型目录中有 Client 和 Customer 类）：

```
/src/main/java/myName/appName/dao/ClientDAO.java
/src/main/java/myName/appName/dao/ClientDAOImpl.java
/src/main/java/myName/appName/dao/CustomerDAO.java
/src/main/java/myName/appName/dao/CustomerDAOImpl.java 
```

这很糟糕吗？我想学习好的做法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T04:22:40.640

分类

```
/src/main/java/myName/appName/model        
/src/main/java/myName/appName/view 
/src/main/java/myName/appName/controller 
```

以后会给你带来麻烦。
您提供的链接中提到的包结构应该适合您。每个模块/实体都应该有一个包。
例如`/src/main/java/myName/appName/customer`
，您应该将所有相关的、、和类都`model`放在`view`这个`controller`包中。`dao``customer`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T07:12:10.583

您可以遵循您在问题中定义的两个项目结构中的任何一个，但这应该取决于您的应用程序大小。

如果您的应用程序中有大量模块，则可以遵循@basijames 描述的项目结构。因为这将有助于管理代码和在团队中分配工作。

如果您没有很多模块，那么我更喜欢您应该使用如下所示的项目结构。

```
/src/main/java/myName/appName/controller   
/src/main/java/myName/appName/model
/src/main/java/myName/appName/service
/src/main/java/myName/appName/dao
/src/main/java/myName/appName/bo 
```

但是根据我的说法，在创建 Maven 项目时，您应该跳过选择架构类型。

希望这对您有所帮助。干杯。

# android - 使用动态数据填充 Android ViewPager

> ID：12397941
> 
> 赞同：0
> 
> 时间：2012-09-13T00:42:20.040
> 
> 标签：android, android-fragments, android-viewpager

大半夜的时间里，我一直在绞尽脑汁。我已经尝试了无数次（不成功）尝试自己解决它。

下面是我的完整代码。此外，它可以在[Github](http://wdtr.kr/r9a2a)上找到。

当我运行应用程序时，显示的数据很少是显示在标题栏或我放在屏幕上的（临时）TextViews 中的月份（以确保我得到了我期望的正确日期/月份。

```
public class MainActivity extends FragmentActivity {
    ArrayList<DataSummary> summary;
    int mMonth = 0, mYear = 0;
    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    static DbHelper mDbHelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mDbHelper = DbHelper.getInstance(this);

        summary = mDbHelper.getDataSummary(DbHelper.TABLE_HISTORY);

        setContentView(R.layout.activity_main);
        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the primary sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            DataSummary sumItem = summary.get(i);
            args.putString(DummySectionFragment.YEAR, sumItem.getYear());
            args.putString(DummySectionFragment.MONTH, sumItem.getMonth());
            args.putString(DummySectionFragment.COUNT, sumItem.getCount());
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return summary.size();
        }

        @Override
        public CharSequence getPageTitle(int position) {
            DataSummary sumItem = summary.get(position);
            String monthName = Utility.getMonth(Integer.valueOf(sumItem.getMonth())).toUpperCase();
            CharSequence pageTitle = monthName + " " + sumItem.getYear() + "(" + sumItem.getCount() + ")";
            return pageTitle;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        public static final String YEAR = "year";
        public static final String MONTH = "month";
        public static final String COUNT = "count";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            Bundle args = getArguments();
            String strYear = args.getString(YEAR);
            String strMonth = args.getString(MONTH);
            Integer iMonth = Integer.valueOf(strMonth);
            ArrayList<History> wods = mDbHelper.getHistoryByMonth(strYear, 
                    Utility.pad(iMonth), Constants.SORT_BY_DATE);

            View mFragmentView = inflater.inflate(R.layout.wod_history, null);
            TextView tvMonth = (TextView) mFragmentView.findViewById(R.id.wodHistoryMonth);
            TextView tvYear = (TextView) mFragmentView.findViewById(R.id.wodHistoryYear);
            ListView listHistory = (ListView) mFragmentView.findViewById(R.id.listHistory);

            tvMonth.setText(strMonth);
            tvYear.setText(strYear);
            CustomHistoryView chv = new CustomHistoryView(container.getContext(), wods);
            listHistory.setAdapter(chv);
            return mFragmentView;
        }
    }
} 
```

这是一些屏幕截图。 ![在此处输入图像描述](../Images/0eae8311224b7e1f15890782d9737dc6.png) ![在此处输入图像描述](../Images/dad127ee3aeb9973226256e0dc289397.png) ![在此处输入图像描述](../Images/db108cff38c2d7a3182f9c018f7f992a.png) ![在此处输入图像描述](../Images/98eaa4d50896711619ffb36fa087011b.png)

编辑（回应@dymmeh）：这是摘要中值的屏幕截图`ArrayList` ![摘要数组列表](../Images/8b29c5ebe2da6ed892a20b6c85203bfe.png)

# android - 绘制纹理映射矩形

> ID：12397944
> 
> 赞同：0
> 
> 时间：2012-09-13T00:42:31.330
> 
> 标签：android

我正在尝试将 2 个三角形一起绘制为一个矩形，并在其上绘制整个纹理，我认为这只是 1.0 坐标。我得到了 1 个带有很多微小褪色纹理的三角形。我对 opengl 很陌生，有点迷失了这些电话的情况。有没有人在我的 QUAD 类中看到任何明显错误的东西，比如我的坐标错误或绘图顺序错误？

```
 public class MyRenderer implements GLSurfaceView.Renderer {
        private Quad myquad;
        private Context context;
        int texture[] = new int[1];
        private int width,height;
        int x,y;
        private long startframe,timediff,sleeptime,frameskip;
        private final static int MAX_FPS = 25;
        private final static int MAX_FRAME_SKIPS = 5;
        private final static int FRAME_PERIOD = 1000/MAX_FPS;
        private static Direction move_direction=Direction.NONE;

        public MyRenderer (Context context){
          this.myquad = new Quad();
          this.context = context;
        }
        public void onSurfaceCreated(GL10 gl, EGLConfig config) {
            myquad.loadGLTexture(gl, this.context);

            //turn on alpha blending
            gl.glEnable(GL10.GL_BLEND);
            gl.glBlendFunc(gl.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

            gl.glEnable(GL10.GL_TEXTURE_2D);
            gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
            gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
            gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
            gl.glDisable(GL10.GL_DEPTH_TEST);

            x=y=0;
        }

        public void onSurfaceChanged(GL10 gl, int w, int h) {
            width=w;
            height=h;
            gl.glViewport(0, 0, w, h);
            gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix          
            gl.glLoadIdentity();
            gl.glOrthof(0.0f, 320, 0.0f, 480, 1.0f, -1.0f);        
        }

        public void onDrawFrame(GL10 gl) {
            startframe=SystemClock.elapsedRealtime();
            // define the color we want to be displayed as the "clipping wall"
            gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
            // clear the color buffer to show the ClearColor we called above...
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
          //  gl.glLoadIdentity(); 
            switch (move_direction)
            {
            case UP:
                gl.glTranslatef(0, 1, 0);
                y=y+1;
                break;
            case DOWN:
                gl.glTranslatef(0, -1, 0);
                y= y-1;
                break;
            case LEFT:
                gl.glTranslatef(-1, 0, 0);
                x=x-1;
                break;
            case RIGHT:
                gl.glTranslatef(1, 0, 0);
                x=x+1;
                break;
            case NONE:
                //gl.glTranslatef(0, 0, 0);
                break;
            }
            myquad.Draw(gl);

class Quad {
    private FloatBuffer vertices;
    private int[] textures = new int[1];
    private ShortBuffer indexbuffer;
    //private float vertices[] = {
    //      50.0f, 50.0f,  // 0\. 
    //         100.0f, 50.0f,   // 1\. 
    //        100.0f,  100.0f,   // 2\. 
    //         50.0f,  100.0f // 3\. 
    //};

    private float texture[] = {          
             0.0f, 0.0f,   //0
             1.0f, 0.0f,    //1
             1.0f, 1.0f,     //2
             1.0f, 0.0f        //3
    };

    private short indices[] = {0,1,2,0,3,2};

              public Quad(){
                try
            {
                    float[] coords={50.0f, 50.0f,  //0
                    300.0f,50.0f, //1
                    300.0f, 300.0f,  //2
                    300.0f, 50.0f}; //3

            short[] indices = {0,1,2,0,3,2};

            ByteBuffer verticesbuffer =     ByteBuffer.allocateDirect(coords.length*4);
            verticesbuffer.order(ByteOrder.nativeOrder());
            vertices = verticesbuffer.asFloatBuffer();
            vertices.put(coords);
            //vertices.position(0);
            vertices.flip(); 

        ByteBuffer idb = ByteBuffer.allocateDirect(indices.length * 2);
        idb.order(ByteOrder.nativeOrder());
        indexbuffer = idb.asShortBuffer();
        indexbuffer.put(indices);
        //indexbuffer.position(0);
        indexbuffer.flip();
        }catch(Exception e)
         {
            Log.d("buffers","not working",e);
         }
    }

     public void loadGLTexture(GL10 gl, Context context) {
          //Get the texture from the Android resource directory
          //Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.herowalkback);
         try
         {
         Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.herowalkback);

          if (bitmap == null) 
          {
              Log.i ("info", "bitmap could not be decoded");
          }
          //Generate one texture pointer...
          gl.glGenTextures(1, textures, 0);
          //...and bind it to our array
          gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

          //Create Nearest Filtered Texture
          gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
          gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_NEAREST);

          gl.glTexEnvf(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, GL10.GL_REPLACE);

          //Use the Android GLUtils to specify a two-dimensional texture image from our bitmap
          GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0,bitmap, 0);

          //Clean up
          bitmap.recycle();
         }catch(Exception e)
         {
            Log.d("load texture","not working");
         }
       }

    public void Draw(GL10 gl)
    {   
        // set the color for the triangle
        gl.glColor4f(0.0f, 1.0f, 0.0f, 0.5f);

        //Enable the vertex and texture state
        vertices.position(0);
        gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertices);
        vertices.position(2);
        gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, vertices);

        // Draw the vertices as triangle strip
        gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indexbuffer);

    }
}

public class test extends Activity {
    private GLSurfaceView glsurface;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        glsurface = new GLSurfaceView(this);
        glsurface.setRenderer(new MyRenderer(this));
        setContentView(glsurface);
        glsurface.setOnKeyListener(watchkeys);
        glsurface.setFocusable(true);
        glsurface.setFocusableInTouchMode(true);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:32:52.957

你没有做错任何事。这称为纹理映射，您需要习惯这种情况。

例如，记住要水平映射三角形（x 坐标），您使用了 0.0 和 1.0。涉及两个三角形，您需要相应地划分坐标。所以它是 0.0、0.5、1.0。Y 轴也是如此。

理想情况下，您会使用 Blender 之类的建模工具对对象进行纹理映射，因此您不必担心将 1.0 划分为 x 个三角形。

# context-free-grammar - 在 Context Free Grammar 中，如何定义一对标签，比如 数据 ?

> ID：12397945
> 
> 赞同：4
> 
> 时间：2012-09-13T00:43:04.593
> 
> 标签：context-free-grammar, bnf, ebnf

预期的语言如下：

```
<hat>Nike</hat><car>Toyota</car>... 
```

我遇到的困难是如何指定以确保在一对标签中，开始标签和结束标签都具有相同的名称。

`tag`是长度小于 10 的 [a-zA-Z] 的组合。

```
<tag>data</tag> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:05:04.250

tldr; *BNF 和 EBNF 都不能以合理的方式表达这个 CFG。*

考虑使用 EBNF*并*明确地 - 通过 EBNF 注释或外部上下文 - 要么：

1.  在 Pair 产生中施加限制性规则，或；
2.  介绍一种表示一组有限“模板”非终结符的方法。

根据使用情况，可能需要证明这些更改/限制仍会产生 CFG。

* * *

（这个老前奏与非 CFG 相关，因为问题是第一次写的。）

据我所知，`<x>..</x>`对于*任意和未知* `x`的不是 CFL，因为[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)仅限于终端和非终端的*有限集合。*`x`然而，根据上面的定义，*不能保证*在该集合中。

但是，如果有*一点余地*，可以向[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%2dNaur_Form)表示法添加非正式限制。当然，这些都*超出*了 EBNF 语法本身。

```
Pair = "<" Tag^1 ">" Content "</" Tag^2 ">"  (* Where Tag^1 equals Tag^2 *)
Tag = .. (* If a finite set, this could still be converted to
            formal EBNF by rewriting the above Pair as all possible alterations
            as shown in the next section.
            Only small values of "finite" are reasonable to express. *)
Content = .. 
```

[像ECMAScript](http://es5.github.com/#A-toc)这样的规范包括一些这样的限制，这些限制*可能*位于 CFG 之外，因此位于 EBNF 之外。

但是，如果这种语言*是*CFL，那么它可以由 CFG 表示，例如：

```
Pair = HatTagPair | CarTagPair | .. (* All possible non-terminal Pairs *)
HatTagPair = "<hat>" Content "</hat>"
CarTagPair = .. (* And so on.
                   While it's technically possible to have non-terminals
                   A, B .. AA, AB .. and so on, this quickly
                   becomes very impractical in EBNF. *) 
```

BNF 和 EBNF 都没有一种“速记”方式来正式表示这种重复，我认为“标签是长度小于 10 的 [a-zA-Z] 的组合”不是一个*合理*的有限终端集，尽管它*是*有限，因此在 CFG 的范围内..

可能还有*其他* [CFG 元语法形式](http://en.wikipedia.org/wiki/Metasyntax)可用于正式描述这种语言，但不是在普通的 BNF/EBNF 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:51:04.003

这是 XML 的 EBNF： [http](http://www.w3.org/TR/REC-xml/#sec-starttags) ://www.w3.org/TR/REC-xml/#sec-starttags将元素定义为以 STags 开头并以 ETags 结尾很容易：

```
element ::= EmptyElemTag | STag content ETag 
```

但是至于保持它们相同，我认为您需要在词法分析策略中定义的超前思考。xml 模式的相关 SO 帖子[bnf/ebnf](https://stackoverflow.com/questions/1578100/bnf-ebnf-for-xml-schema)表明最好放弃 CFG 的目标并在代码中采用更基本的方法。说了这么多，我不知道有多少 XML 解析器实际上是在做这件事。

# makefile - 如何将多行输入 (stdin) 传递到我在 Makefile 中执行的命令中？

> ID：12397955
> 
> 赞同：4
> 
> 时间：2012-09-13T00:44:16.977
> 
> 标签：makefile, stdin

我正在编写一个与 GHCi 和 gedit 一起使用的简单 Makefile。本质上，我定义了一个要加载的模块，以及一个要调用/测试的函数（连同它的参数）。Makefile 需要执行 GHCi，然后将必要的命令传递给它。我尝试使用 管道`echo`，它在普通 shell 中工作，但由于`make`处理空格、字符串和格式的方式而失败。它将整个内容作为一行提供，而不是单独的输入行。最重要的是，它有点乱。

```
# Sorry if backslashes are messed up do to tabs...
module   = somemodule
function = somefunction
params = 5 "Hello"

default: *.hs
    echo                \
        :l $(module)        \
                    \
        $(function) $(params)   \
        | ghci 
```

我怎么能*干净*优雅*地*做到这一点？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T05:29:10.067

您是否尝试过使用两个单独的`echo`命令？

```
( echo ":l $(module)"; echo "$(function) $(params)" ) | ghci 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:49:34.297

即将发布的 GNU Make 版本将具有在类似情况下提供帮助的[`$(file)`功能](http://cvs.savannah.gnu.org/viewvc/make/doc/make.texi?root=make&r1=1.76&r2=1.77)，尽管可能不完全是这个。

取而代之的是，基本方法是在关键时刻让换行符不是换行符：

```
define boilerplate
:l $(module)
$(function) $(params)
endef

define newline

endef

default: *.hs
    echo '$(subst $(newline),|,$(boilerplate))' | tr '|' '\n' | ghci 
```

（该`$(newline)`定义的源文本包含两个空行，因为在 .`define`之前吃了一个尾随换行符`endef`。）

如果您不能假设 GNU Make 并因此没有`subst`or ，您可以直接在 echo 命令`define`中编写-encoded 换行符：`|`

```
default: *.hs
    echo ':l $(module)|$(function) $(params)' | tr '|' '\n' | ghci 
```

...在这一点上，这是否比 Idelic 的 subshel​​l 建议更好或更差只是一个品味问题。

# c# - C#：多行文本框的正则表达式

> ID：12397961
> 
> 赞同：0
> 
> 时间：2012-09-13T00:45:07.067
> 
> 标签：c#, regex, line-breaks, multiline

基本上，我试图在多行文本框中找到以下模式：

**[p]随便一个字bla bla随便一个字[/p]**

1.）该模式可以在文本框中出现 n 次，我也希望找到它 n 次。

2.) [p] 和 [/p] 之间可以是任何字符，包括空格和换行符（C# 中的“\r\n”）

3.) 我想要整个模式，包括 [p] 和 [/p]

以下代码非常接近我想要的结果。问题是，[p] 和 [/p] 之间可能会出现多个换行符。我已经尝试了很多很多解决方案。没有什么对我有用。

```
private void getTextFromTag2(String Tag, String txt)
{
    txt = txt.Replace("\r", "");

    string re1 = "(\\[";    
    string re2 = "p";   
    string re3 = "\\]"; 
    string re4 = ".*";  // Here lies the problem
    string re5 = "";    // Left open for a solution => \r\n cann occur n-times
    string re6 = "\\["; 
    string re7 = "\\/"; 
    string re8 = "p";   
    string re9 = "\\])";    

    Regex r = new Regex(re1 + re2 + re3 + re4 + re5 + re6 + re7 + re8 + re9, RegexOptions.IgnoreCase | RegexOptions.Multiline);

    MatchCollection mc = r.Matches(txt, 0);

    foreach (Match match in mc)
    {
        String c1 = match.Groups[1].ToString();
        Console.Write(c1 + "\r\n");
    }

} 
```

如您所见，我已经将 txt 中的 "\r" 替换为 ""，因为 .NET 的 RegEx 引擎似乎只需要 "\n" 作为换行符。

我认为，我的代码中的问题可以在 re4 和 re5 中找到。re4 可以找到任何字符并且效果很好，只要没有换行符。

我认为，re4 应该说“任何字符，包括空格和 \n”。但我真的不明白。

所以再一次：即使模式在文本框中多次出现，Everting 也能正常工作。问题是，当 [p] 和 [/p] 之间发生换行时

这是一个不起作用的例子

```
[p]BlaBla BlaBla \r\n
BlaBla BlaBla \r\n
\r\n
BlaBla
[/p] 
```

这是一个有效的例子

```
[p]BlaBla BlaBla[/p]
\r\n
\r\n
[p]Even more BlaBla[/p]
\r\n
\r\n
[p]Much more BlaBla[/p] 
```

请原谅我的英语。我不是以英语为母语的人。

谢谢你。

**这是代码，现在对我有用。改变的东西是 //Changed Tagged**

```
private void getTextFromTag2(String Tag, String txt)
    {
        //txt = txt.Replace("\r", ""); //Changed

        string re1 = "(\\[";     
        string re2 = "p";    
        string re3 = "\\]";  
        string re4 = ".*";   
        string re5 = "?";   // Changed
        string re6 = "\\["; 
        string re7 = "\\/"; 
        string re8 = "p";   
        string re9 = "\\])";    

        Regex r = new Regex(re1 + re2 + re3 + re4 + re5 + re6 + re7 + re8 + re9, RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.Singleline); //Changed

        MatchCollection mc = r.Matches(txt, 0);

        foreach (Match match in mc)
        {
            String c1 = match.Groups[1].ToString();
            Console.Write(c1 + "\r\n");
        }

    } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:15:40.887

您需要指定 Singleline 选项

> 指定单行模式。更改点 (.) 的含义，使其匹配每个字符（而不是除 \n 之外的每个字符）。

基本上，您可能熟悉其他语言的“点匹配全部”选项。您设置的多行选项仅影响匹配行的开头和结尾的行为。有关详细信息，请参阅[RegexOption 类](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)。

```
Regex r = new Regex(regex, RegexOptions.IgnoreCase | RegexOptions.Singleline); 
```

您提供的正则表达式的另一个问题`*`是贪婪。所以 [p][/p][p][/p] 将是一个匹配项（它在第一个 [p] 和最后一个 [/p] 上匹配。将您的 re5 更改为：

```
string re5 = "?";    // Non-greedy match on * 
```

将解决此问题，以便您获得两个单独的匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:18:34.503

`.`匹配除换行符以外的任何字符。`\s`将匹配空格和换行符。

```
(.|\s)* 
```

# ios - 需要从 NSArray 或 NSMutableArray 存储/检索对象

> ID：12397966
> 
> 赞同：0
> 
> 时间：2012-09-13T00:46:22.860
> 
> 标签：ios, nsmutablearray, nsarray

我一直在尝试将 NSDate 对象存储到 NSMutableArray 中，然后稍后检索它（以获取经过的时间）。

这是我尝试的可变数组初始化和存储：

在 .h 文件中：

```
@property (nonatomic, strong) NSMutableArray *startTime; 
```

在实现（.m）文件中：

```
@synthesize startTime = _startTime;

// init the mutable array - create some temporary elements as placeholders

NSDate *temp = [NSDate date];

for (int i = 0; i < 3; i++) {
    [self.startTime addObject:temp];
} 
```

这是不起作用的：

```
[self.startTime replaceObjectAtIndex:iurl withObject:[NSDate date]]; //iurl is an NSUInteger

NSDate *now = [self.startTime objectAtIndex:iurl];

NSLog(@"Now = %@", now); 
```

我想做的只是a）在索引处存储一个NSDate对象（此处为NSUInteger iurl），然后b）检索并访问该对象。在上面的代码中，now 始终为 (null)。如何将 NSDate 对象存储到数组或可变数组中，以便以后检索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T02:40:35.027

您忘记实际初始化您的数组，这就是它为空的原因。

`self.startTime = [NSMutableArray array];`在初始化日期对象之前添加。

这会将 self.startTime 初始化为一个空数组，这将允许您向其中添加对象。

```
self.startTime = [NSMutableArray array];
NSDate *temp = [NSDate date];

// Now you can add temp to self.startTime
[self.startTime addObject:temp];

// Since temp is the only object in your array so far, its index is 0.
NSDate *now = [self.startTime objectAtIndex:0]; 
```

# java - JDialog 不当行为

> ID：12397980
> 
> 赞同：2
> 
> 时间：2012-09-13T00:48:24.137
> 
> 标签：java, swing, concurrency, jdialog, event-dispatch-thread

```
JDialog dialog = new JDialog(parent JFrame, "blabla");
dialog.setLayout(new BorderLayout());

JLabel label = new JLabel("more blabla");

dialog.getContentPane().add(label, BorderLayout.CENTER);

dialog.setSize(new Dimension(280, 80));
dialog.setLocationRelativeTo(parent JFrame);
dialog.setVisible(true);

//part of code that takes time to execute
//actually, I'm sending an email here, but it doesn't really matter what I do,
//as you will read below        

dialog.dispose(); 
```

我有上面的代码，它的用途是在执行某些代码时向用户显示一条消息（代码的执行大约需要 5-10 秒，我不希望用户认为程序冻结）。

问题是，添加到对话框中的 JLabel 根本没有出现。无论我添加到对话框中，确切地说，它都不会出现。

但是，如果我将 JDialog 设置为模态（将 true 作为上述构造函数的最后一个参数添加），它会出现，但是我想要执行的代码在对话框关闭之前不会运行，这违背了它的目的。

由于它在代码中的位置，将要执行的代码并不重要，我尝试将其保留在当前上方 - 根本没有执行代码 - 对话框会出现一瞬间，但我可以看到它是空的。

我知道我可以创建一个确认窗口并说“等待 10 秒，代码正在执行”，但我不想那样做。

我还尝试将 JDialog 换成 JFrame，文本仍然不会出现。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T01:30:13.453

如果长时间运行的任务在`Event Dispatch Thread`(EDT) 上执行，则对话框可能没有机会自行绘制/重绘，直到任务完成。有关 EDT 的更多详细信息，请查看[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程。

这是一个使用您的代码的示例，它演示了*行为不端的对话框*：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class TestDialog {

    private static void createAndShowGUI() {
        final JFrame frame = new JFrame("Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton button = new JButton("Execute");
        button.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {
                final JDialog dialog = new JDialog((JFrame)frame, "blabla");
                dialog.setLayout(new BorderLayout());
                JLabel label = new JLabel("more blabla");
                dialog.getContentPane().add(label, BorderLayout.CENTER);

                dialog.setSize(new Dimension(280, 80));
                dialog.setLocationRelativeTo(frame);
                dialog.setVisible(true);

                try {
                    Thread.sleep(3000);
                } catch (InterruptedException ex) {
                    ex.printStackTrace();
                }

                dialog.setVisible(false);
                dialog.dispose();
            }

        });

        frame.add(button);          
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

考虑通过在工作线程上执行长时间运行的任务来重构您的实现。例如，您可以使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)来实现。

这是一个演示，用一个简单的工作人员说明了相同的对话框：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingWorker;

public class TestDialogWithWorker {

    private static void createAndShowGUI() {
        final JFrame frame = new JFrame("Demo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton button = new JButton("Execute");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                new Worker(frame).execute();
            }

        });

        frame.add(button);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    static class Worker extends SwingWorker<Void, Void> {
        JDialog dialog;

        public Worker(JFrame parent) {
            dialog = new JDialog((JFrame) parent, "blabla");
            dialog.setLayout(new BorderLayout());
            JLabel label = new JLabel("more blabla");
            dialog.getContentPane().add(label, BorderLayout.CENTER);

            dialog.setSize(new Dimension(280, 80));
            dialog.setLocationRelativeTo(parent);
            dialog.setVisible(true);
        }

        @Override
        protected Void doInBackground() throws Exception {
            Thread.sleep(3000);
            return null;
        }

        @Override
        protected void done() {
            dialog.setVisible(false);
            dialog.dispose();

            try {
                get();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }       
} 
```

# ios - 如何获取单元格或任何子视图的相对屏幕坐标？

> ID：12397983
> 
> 赞同：3
> 
> 时间：2012-09-13T00:48:51.647
> 
> 标签：ios

我有一长串表格视图单元格。当我尝试从列表中获取其中一个框架时，我得到如下信息：`(0, 508) (56, 320) (x,y)(height, width)`

我想知道这些关于当前屏幕的坐标——在 320x480 范围内。在（通过convertRange）获得坐标后，我尝试过执行 508 % 480 之类的操作，`self.view.window`但我仍然没有看到我期望的结果。

我在单元格顶部初始化一个视图，然后伸展以填满整个屏幕。当单元格位于屏幕顶部时，这没有问题，但是当单元格在列表中的下方时，它会导致动画效果不佳。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T01:02:54.533

由于`UITableView`是 的子类`UIScrollView`，因此您可以使用[`contentOffset`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentOffset)属性来获取从表格视图顶部到显示内容顶部的像素数，然后从单元格的 y 位置减去该像素。

```
CGFloat relativeY = someCellFrame.origin.y - someTableView.contentOffset.y; 
```

# python - 为什么局部变量访问比 Python 中的类成员访问快？

> ID：12397984
> 
> 赞同：18
> 
> 时间：2012-09-13T00:48:55.087
> 
> 标签：python, performance, benchmarking

在尝试解决更复杂的问题时，我开始比较对局部变量和成员变量的访问速度。

这里有一个测试程序：

```
#!/usr/bin/env python

MAX=40000000

class StressTestMember(object):
    def __init__(self):
        self.m = 0

    def do_work(self):
        self.m += 1
        self.m *= 2

class StressTestLocal(object):
    def __init__(self):
        pass

    def do_work(self):
        m = 0
        m += 1
        m *= 2

# LOCAL access test
for i in range(MAX):
    StressTestLocal().do_work()

# MEMBER access test
for i in range(MAX):
    StressTestMember().do_work() 
```

`StressTestMember`我知道在每次迭代中实例化和实例化看起来可能是个坏主意，`StressTestLocal`但在这些基本上是 Active Record 的建模程序中它是有意义的。

经过一个简单的基准测试，

*   本地访问测试：0m22.836
*   MEMBER访问测试：0m32.648s

本地版本的速度提高了约 33%，同时仍然是课程的一部分。为什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-13T01:00:40.073

`self.m += 1`意味着您必须查找一个名为的局部变量`self`，然后找到名为的属性`m`

当然，如果你只需要查找一个局部变量，那么没有额外的步骤会更快。

查看幕后发生的事情可能很有用：

```
>>> import dis
>>> dis.dis(StressTestLocal.do_work)
 18           0 LOAD_CONST               1 (0)
              3 STORE_FAST               1 (m)

 19           6 LOAD_FAST                1 (m)
              9 LOAD_CONST               2 (1)
             12 INPLACE_ADD         
             13 STORE_FAST               1 (m)

 20          16 LOAD_FAST                1 (m)
             19 LOAD_CONST               3 (2)
             22 INPLACE_MULTIPLY    
             23 STORE_FAST               1 (m)
             26 LOAD_CONST               0 (None)
             29 RETURN_VALUE        
>>> dis.dis(StressTestMember.do_work)
 10           0 LOAD_FAST                0 (self)
              3 DUP_TOP             
              4 LOAD_ATTR                0 (m)
              7 LOAD_CONST               1 (1)
             10 INPLACE_ADD         
             11 ROT_TWO             
             12 STORE_ATTR               0 (m)

 11          15 LOAD_FAST                0 (self)
             18 DUP_TOP             
             19 LOAD_ATTR                0 (m)
             22 LOAD_CONST               2 (2)
             25 INPLACE_MULTIPLY    
             26 ROT_TWO             
             27 STORE_ATTR               0 (m)
             30 LOAD_CONST               0 (None)
             33 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T00:57:04.470

本地名称更快，因为 Python 做了一些优化，本地名称不需要 dict 访问，另一方面，实例属性需要访问`__dict__`对象的。

这也是局部名称比全局名称快的原因。

# jquery - 如何简化我的创建元素代码？

> ID：12397989
> 
> 赞同：0
> 
> 时间：2012-09-13T00:49:52.663
> 
> 标签：jquery

我正在尝试创建 2 个元素，1 个带有 id，1 个没有。我有以下代码，想知道如何简化它。有什么帮助吗？非常感谢。

```
 var element = $('<div/>').attr({'id': tool}).addClass('s-Tool')             
                .append(
                  $('<div/>').css({'padding': '0.5em 1em'}).html(text)
               );

//only different is attr id

 var elementClass = $('<div/>').addClass('s-Tool')             
                .append(
                  $('<div/>').css({'padding': '0.5em 1em'}).html(text) 
               ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:22:28.763

```
var elementClass = $('<div />', {'class': 's-Tool'})
                   .append($('<div/>').css('padding', '0.5em 1em').html(text)),
    element = elementClass.clone(true).attr('id', tool); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T00:55:04.217

您可以只使用实际的 HTML：

```
var element = $('<div id="tool" class="s-Tool"><div style="padding: 0.5em 1em;">' + text + '</div></div>') 
```

要使用不同的 id 执行此操作，您可以将其设为函数：

```
function makeMyElement(id, text) {
    var element = $('<div id="' + id + '" class="s-Tool"><div style="padding: 0.5em 1em;">' + text + '</div></div>')
    return(element);
} 
```

# ruby-on-rails - 什么 Ruby 可枚举方法对计算 Geokit 对象之间的距离最有意义

> ID：12397993
> 
> 赞同：1
> 
> 时间：2012-09-13T00:50:15.620
> 
> 标签：ruby-on-rails, ruby, geokit

我正在使用 Geokit 来计算两个位置对象之间的距离。[http://geokit.rubyforge.org/](http://geokit.rubyforge.org/)

我的问题是，如果我有一系列位置，那么通过它们来计算总距离旅行的最佳算法是什么？起初我认为 Enumerable#inject 是要走的路，传递 N-1 个位置对象之间行进距离的备忘录，但是没有办法存储您已经在实际数组中检查的位置对象的状态.

这将需要数组的大小、我们当前所在的索引以及注入的行为。理想情况下，您可以执行以下操作：

```
locations = [Geokit::LatLng, Geokit::LatLng, ...]
locations.inject(0) do |memo, location|
  memo += location.distance_from(previous_location)
end 
```

但是，在这种情况下，previous_location 是未定义的。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:08:16.993

这是您要完成的任务的一个非常简化的示例。我使用常规数字和绝对值作为距离度量，只是为了使迭代更清晰。

```
arr = [1, 2, 3, 4]
arr.each_cons(2).collect {|a| (a[1]-a[0]).abs }.reduce(:+)
=> 3 
```

1.  Each_cons(2) 采用每 2 个连续元素，在这种情况下，生成 [1,2]、[2, 3] 和 [3,4]
2.  收集是将每对映射到距离度量的映射操作。
3.  减少只是将它们加在一起。

# java - Liferay 设置会话并在特定页面上阅读

> ID：12397997
> 
> 赞同：0
> 
> 时间：2012-09-13T00:50:38.067
> 
> 标签：java, forms, session, liferay, liferay-6

我正在尝试设置可以跨页面操作的会话，我能够使用此代码设置会话

```
HttpSession session1 = request.getSession(false);
String foo = (String) session1.getAttribute("password");
session1.setAttribute("password","authenticated");
out.println(foo); 
```

这段代码是用自定义 JSP 钩子 ( **Journal_content/view.jsp** )编写的

我还检查了会话是否保存在浏览器上并且它在那里。当我从一页转到另一页时，我无法阅读会话，所以它要求我输入密码。

谁能告诉我如何在 Liferay 中制作这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:05:43.040

我认为您可以使用`PortletSession`而不是`HttpSession`这样：

```
PortletSession portletSession = renderRequest.getPortletSession();
portletSession.setAttribute("password", "authenticated", PortletSession.APPLICATION_SCOPE); 
```

...以及获取属性：

```
String pwd = (String) portletSession.getAttribute("password", PortletSession.APPLICATION_SCOPE); 
```

由于 liferay 的 OOTB portlet`<private-session-attributes>false</private-session-attributes>`在其中定义`liferay-portlet.xml`，上述代码`session`与整个门户共享。

`liferay-portlet.xml`DTD 中关于使用的一个小注释`<private-session-attributes>`：

> `private-session-attributes`如果 portlet 不与门户共享会话属性，则将该值设置为 true。默认值是true。portal.properties 中的属性`session.shared.attributes`指定共享哪些会话属性，即使 private-session-attributes 值为 true。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T02:55:29.693

我在[这里](http://www.liferay.com/community/forums/-/message_boards/message/27833542)发布了我的答案，以将对象从 Hooks 共享到 Portlet。

如果要在 portlet 之间共享对象，则必须在原始 portlet 的 liferay-portlet.xml 文件中设置为 false。