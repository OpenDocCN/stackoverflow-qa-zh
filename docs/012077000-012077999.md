# StackOverflow 问答 12077000-12077999

# xcode - 如何在 XCode 中调试进程？

> ID：12077000
> 
> 赞同：2
> 
> 时间：2012-08-22T15:57:13.240
> 
> 标签：xcode, debugging

这是我的情况。我的系统上安装了一个应用程序。它正在运行。我也有这个应用程序的源代码，我在 XCode 中构建了它并让它生成 dSYM 文件。我附加到 XCode 中的过程。我一直在尝试设置“-[ClassName methodName]”形式的断点（不带引号），但是我的断点都没有被命中。我是否必须以某种方式将 XCode 指向我的符号文件或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:28:20.253

我从未使用该方法进行过调试，但有一种更简单的方法。您只需单击代码承载行的行号，那里就会出现一个蓝色箭头（断点）。当应用程序到达带有断点的这些行之一时，执行将暂停并允许您一次单步执行代码。

# asp.net - 什么时候调用 HttpModule 的 Init 方法？

> ID：12077001
> 
> 赞同：2
> 
> 时间：2012-08-22T15:57:18.060
> 
> 标签：asp.net, .net, httpmodule

我知道每个 HttpApplication 都拥有一个 HttpModule。并且有许多由 ASP.NET Web 应用程序创建的 HttpApplications。所以每个 HttpApplication init 方法都会被调用。HttpModule.Init 什么时候发生的？换句话说，什么对象负责初始化HttpModule？

# c# - 如何防止文件被虚拟化，即从 ProgramData 文件夹复制到 AllUsers 文件夹？

> ID：12077003
> 
> 赞同：0
> 
> 时间：2012-08-22T15:57:25.070
> 
> 标签：c#, .net, wpf, windows-7, programdata

我将应用程序数据存储在

```
C:\ProgramData folder. 
```

我想防止这些数据被复制到

```
C:\Users\All Users\ 
```

我需要在我的应用程序中做什么才能禁用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:08:09.770

`C:\Users\All Users`是指向 的符号链接`C:\ProgramData`。`C:\ProgramData`是“真实”的位置，而`C:\Users\All Users`只是为了兼容性。

所以实际上没有任何内容被复制到`C:\Users\All Users`，它只是指向`C:\ProgramData`文件的实际位置。

[参考](http://technet.microsoft.com/en-us/query/bb756982)

**编辑：**我发现这个[有点相似的超级用户问题](https://superuser.com/questions/405097/are-c-programdata-and-c-users-all-users-the-same-do-i-need-both)

# silverlight - XAML 视图中的泛型：.xaml 文件（泛型类的内容）呢？

> ID：12077004
> 
> 赞同：1
> 
> 时间：2012-08-22T15:57:28.630
> 
> 标签：silverlight, xaml, generics

我一直在尝试**在 XAML 中实现一个通用视图**，这种东西在 MyView 中。**xaml.cs**文件：

```
public partial class MyView<T>: UserControl {
  // content...
} 
```

而且我知道我必须使用`x:TypeArguments`然后使用 MyView。没错，网上有相关的文档。

*但是...在 MyView* .xaml* * 文件中放入一些东西怎么样？

目前我有一个标准：

```
<UserControl x:Class="Some.Name.Space.Views.MyView" 
 *bunch of namespaces declarations*
>
  some content (a StackPanel, a grid, whatever...)
</UserControl> 
```

但是，当然，`.xaml`文件的内容将成为一个类`MyView`而不是`MyView<T>`. 而且我只是在互联网上找不到我们必须在 xaml 中使用哪个特定关键字来表示我们正在声明通用**视图**的**内容。**

 **谢谢**

# c++ - 没有 STL 的 C++ 动态数组

> ID：12077007
> 
> 赞同：5
> 
> 时间：2012-08-22T15:57:46.807
> 
> 标签：c++, arrays

这是作业的一部分，但我只是要求澄清：

> 当程序启动时，从 ATM.txt 加载数据并将它们存储在动态数组（ATM 类型，而不是 STL）中。

在没有 STL 的情况下，我究竟如何做动态数组？我想也许分配意味着使用指针，“ATM 类型”让我失望。

再次提到：

> 将 accounts.txt 文件放入动态数组（帐户类型，而不是 STL）

--不是作业的一部分

我从来不理解内存不安全操作的使用，例如从第一行提取文件中的项目数：

例如。

```
5
abc
def
hij
kml
mno 
```

使用 STL（向量或 C++11 数组）而不依赖文件中的数字会不会更聪明，因为它可能不准确导致缓冲区溢出等？

//Edit 在文件 Account.h 中定义一个类 Account，其中包含数据成员：客户 id、BSB 编号等。

我假设 Account 和 ATM 类型就是这些类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:16:31.957

动态数组的最基本形式是使用创建`new[]`和销毁使用`delete[]`：

```
ATM * atms = new ATM[count];
// do stuff with the array
delete [] atms; 
```

但是，这带来了使用数组的代码可能会引发异常、从函数返回或以其他方式阻止这种`delete[]`情况发生的危险。如果发生这种情况，那么您将丢失指向已分配内存的唯一指针，它将保持已分配但无法访问；这称为*内存泄漏*。出于这个原因，最好将数组包装在一个类中，其中：

*   成员变量来存储指向数组的指针，以及（可选）它的大小
*   分配数组的构造函数和/或函数
*   用于删除数组的析构函数
*   （可选）调整数组大小的函数

[在对象的析构函数中删除分配使用RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)的原理来确保数组一旦不再需要就被删除。

这留下了另一个危险：如果你复制这个数组对象，那么你最终会得到两个对象，它们都试图删除同一个数组，这是灾难性的。为了防止这种情况，您需要考虑[三法则](https://stackoverflow.com/questions/4172722)。要么编写一个复制构造函数和复制赋值运算符来分配一个新数组并复制内容；或删除它们。（如果你正在学习老式的 C++，那么你不能删除成员函数，所以你必须将它们声明为私有而不是实现它们）。

> 使用 STL 不是更聪明吗？

通常，是的。但是，如果您正在学习 C++，那么了解内存管理的工作原理以及如何让库为您处理它是一个好主意。这可能是本练习的重点之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:02:12.557

这种分配的一种常见方法是自己模拟向量的自动扩展行为。在堆上为您的数据分配一个数组，并跟踪它的长度和您存储在数组中的项目数。

用数据填充数组后，将最大大小扩大一些并分配一个新数组。这使您可以将旧数组中的数据复制到新数组中，然后继续添加项目，直到再次用完空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:10:38.743

基本上，如果您需要在不使用 STL 的情况下实现动态数组，则必须明确处理内存分配/释放。

基本上你必须：

*   在第一次构造或使用数组时使用 malloc 分配空间
*   跟踪插入/删除的元素
*   完成分配空间后使用 realloc
*   销毁数组时释放分配的空间

当然，实现一个像 std::vector 这样好的 STL 容器并不是一件容易的事（最终是一个很好的家庭作业！）。

我可以建议如下：

*   尽可能避免重新分配。空间完成后，分配更多空间以避免不断调用 realloc（参见 std::vector::reserve）
*   删除元素时避免重新分配空间。一旦分配完毕，除非内存使用率太高，否则让分配的空间保持原样，以免将来重新分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:14:45.687

> 使用 STL（向量或 C++11 数组）而不依赖文件中的数字会不会更聪明，因为它可能不准确导致缓冲区溢出等？

std::vector 的内部结构并不神奇。可以手动执行 std::vector 为您执行的操作。

听起来这就是你应该为这个任务做的事情；制作自己的“ATM 类型”，可以安全地管理从 ATM.txt 文件中读取数据，以及可以保存来自 accounts.txt 文件的数据的“帐户类型”。您可能应该从编写作业的人那里得到一些澄清，说明他们希望这些类型被设计/使用的准确程度。回顾一下你所拥有的任何课程材料，你应该告诉你在使用动态数组方面你需要知道什么。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T16:20:01.067

由于这是家庭作业，我们不想直接给出答案，但总的来说，我的建议是：

1.  创建一个类 myDynamicArray
2.  使类包含一个 int 或 long 来存储数组大小
3.  使用“new”为您的阵列分配内存。从作业来看，它可能是一个字符串数组，或者，如果教授严格禁止 STL（字符串现在被认为是 STL），它将是一个字符数组数组。
4.  编写一个插入方法，在插入之前检查数组的大小（参见 #2），如果不够大，则将其变大。一种不使用 pre-C++ 函数的方法（我认为这是最好的，因为这是一个 C++ 类）是分配一个更大尺寸的新数组 --> 从旧数组复制数据 --> 插入任何新数据。大多少？例如，您可能会选择每个新分配增加 20%。微软的 C# 分配“下一个最大的素数”元素，尽管它们具有非常快的内存分配例程。
5.  完成后不要忘记 delete() 动态数组（“完成”的含义取决于分配）。请注意，一旦程序退出，从技术上讲，内存应该会自动释放，但自己不释放它是非常糟糕的做法（想想不定期关闭的大型非学术程序）。

我会避免使用其他用户提供的模板代码。我确信它是很棒的代码，但是使用早期 C++ 类中先进的东西会引起人们的注意。

推荐阅读： [http ://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

# ipad - 无法在 ipad 上的 jquery ui 对话框中滚动 iframe

> ID：12077011
> 
> 赞同：3
> 
> 时间：2012-08-22T15:58:07.140
> 
> 标签：ipad, jquery-ui, scroll, jquery-ui-dialog

我有一个最初设计用于标准台式机和笔记本电脑的网络应用程序，现在我想看看它是否也可以在平板电脑上“按原样”工作。

我在 iPad 2 上尝试过，但遇到了一个主要问题：应用程序大量使用了使用 jQuery UI 1.8.22 创建的对话框，这些对话框用作“弹出窗口”，也就是说，每个对话框都包含一个 iframe，当内容溢出对话框大小出现垂直滚动条，但我无法滚动 iframe 内容，因为它总是会滚动主页内容。

如何解决这个问题？您认为这是我的应用程序还是 iPad 浏览器本身的问题？

如果它有任何用处，我将发布自己创建对话框的代码，现在我只想说，当使用标准计算机导航时，绝对没有滚动问题。

编辑：

我刚刚创建了这个小提琴[http://jsfiddle.net/MLGku/1/](http://jsfiddle.net/MLGku/1/)它展示了我们如何创建这样的弹出窗口，我尝试了 iPad 的小提琴，实际上我无法滚动 iframe 内容，我会非常感谢任何帮助你可以给我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T08:17:19.420

最后，我已经能够通过使用这段代码来解决问题：

```
if (/iPhone|iPod|iPad/.test(navigator.userAgent)) {
  $('iframe').wrap(function() {
    var $this = $(this);
    return $('<div />').css({
      width: $this.attr('width'),
      height: $this.attr('height'),
      overflow: 'auto',
      '-webkit-overflow-scrolling': 'touch'
    });
  });
} 
```

上面的代码在这里找到：http: [//home.jejaju.com/play/iframe-scroll.html](http://home.jejaju.com/play/iframe-scroll.html)

# ajax - 如何将成功行为绑定到另一个 ajax 表单提交？

> ID：12077016
> 
> 赞同：2
> 
> 时间：2012-08-22T15:58:17.507
> 
> 标签：ajax, jquery

与[此问题](https://stackoverflow.com/questions/4618173/jquery-given-a-form-how-to-bind-to-alert-after-the-submit-ajax-success)类似，我想在成功提交 ajax 表单时运行一个函数，但我无法直接访问加载表单的初始 ajax 代码。

鉴于我无法将代码添加到初始 ajax 成功调用，我将如何检查表单是否成功？

```
$('#registration-form').submit( function() {
  alert('registered successfully');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:05:32.930

尝试将 .ajaxSuccess() 绑定到您的元素[http://api.jquery.com/ajaxSuccess/](http://api.jquery.com/ajaxSuccess/)

```
$('#registration-form').ajaxSuccess(function() {
     alert('registered successfully');
}); 
```

> 每当 Ajax 请求成功完成时，jQuery 都会触发 ajaxSuccess 事件。此时会执行已使用 .ajaxSuccess() 方法注册的所有处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:05:23.273

您可以尝试使用[`ajaxSucess()`](http://api.jquery.com/ajaxSuccess/)全局 ajax 事件处理程序：

```
$(document).ajaxSuccess(function() {
     alert('registered successfully');
}); 
```

# c# - 如何使用针对 Excel 文件运行的多个 SELECT 查询来填充数据集？

> ID：12077017
> 
> 赞同：0
> 
> 时间：2012-08-22T15:58:19.353
> 
> 标签：c#, .net, sql, excel

我的命令是这样的：

```
string command = "SELECT * FROM [SheetName1$]; SELECT * FROM [SheetName2$]; ...." 
```

当我做

```
 DataSet set = new DataSet();
  using(OleDbDataAdapter adapter = new OleDbDataAdapter(command, connection))
  {
     adapter.Fill(ds)
  } 
```

我最终得到一个空的数据集（更具体地说，我最终得到一个异常，即在 SQL 语句结束后找到的字符）。但是，如果我只使用一个 SELECT 查询，这可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:09:07.633

Excel 不能执行多个语句。尝试在两个命令中进行此操作。

```
DataSet set1 = new DataSet();
using(OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [SheetName1$];", connection))
{
   adapter.Fill(set1 );
}

DataSet set2 = new DataSet();
using(OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [SheetName2$];", connection))
{
   adapter.Fill(set2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:15:27.140

不是填充`DataSet`s，而是填充`DataTable`s，然后将所述`DataTable`s 添加到 DataSet。

```
DataSet ds = new DataSet();

DataTable dt1 = ds.Tables.Add("set1");
using(OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [SheetName1$];", connection))
{
   adapter.Fill(dt1);
}

DataTable dt2 = ds.Tables.Add("set2");
using(OleDbDataAdapter adapter = new OleDbDataAdapter("SELECT * FROM [SheetName2$];", connection))
{
   adapter.Fill(dt2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:05:11.840

可以在 SQL 查询中试试这个：

```
SELECT * FROM [SheetName1$]
UNION ALL
SELECT * FROM [SheetName2$] 
```

我希望这会有所帮助

# bing-maps - 查找两点之间的路线（PushPin） - Windows Phone

> ID：12077018
> 
> 赞同：0
> 
> 时间：2012-08-22T15:58:23.653
> 
> 标签：bing-maps, windows-phone

我有两个不同图钉的坐标，我想在它们之间画出路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:08:38.977

看这个使用方向任务的例子：

[http://www.playingwith.net/2011/07/integrate-bing-maps-directions-in-your-wp7-app/](http://www.playingwith.net/2011/07/integrate-bing-maps-directions-in-your-wp7-app/)

# mysql - 如何对多个表中的一条记录进行 GROUP

> ID：12077023
> 
> 赞同：0
> 
> 时间：2012-08-22T15:58:43.707
> 
> 标签：mysql, join, group-by, record, group-concat

我有两张桌子课和科目。这是一个一对多的比例，因为在每节课中都可以归类为 1 个或多个科目，从而产生类似于“名称”主题的内容：数学、科学、社会研究

这将返回 3 条记录：
姓名、数学
名称、科学
名称、社会研究

这导致我循环并组合并弄乱了我的搜索计数
我怎样才能获得所有三个记录的一条记录？所以我的搜索计数是准确的，我不需要额外的 PHP 代码来检查名称是否相同并收集额外的主题？

我试过基本的

```
SELECT * FROM lesson INNER JOIN subjects ON subject.id = lesson.subject 
```

但这会导致 3 个条目

***编辑***
我的查询比我引导的要复杂。我有一个中间表跟踪上面的两个表及其关系
这个查询用于搜索。这就是我所拥有的。

```
SELECT name, subject        
FROM lesson As l
INNER JOIN lesson_sub As ls
  ON ls.lesson_id = l.id
INNER JOIN subjects As s
  ON s.id = ls.subject_id
WHERE CONCAT(l.name, s.subject) LIKE '%KEYWORD%' AND s.id = SUBJECT_ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:06:58.960

您可以在 JOIN 查询中使用 GROUP_CONCAT() 函数：

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

> GROUP_CONCAT(expr)
> 
> 此函数返回一个字符串结果，其中包含来自组的串联非 NULL 值。如果没有非 NULL 值，则返回 NULL。完整的语法如下：
> 
> GROUP_CONCAT([DISTINCT] expr [,expr ...] [ORDER BY {unsigned_integer | col_name | expr} [ASC | DESC] [,col_name ...]] [SEPARATOR str_val])
> 
> mysql> SELECT student_name, -> GROUP_CONCAT(test_score) -> FROM student -> GROUP BY student_name;
> 
> 或者：
> 
> mysql> SELECT student_name, -> GROUP_CONCAT(DISTINCT test_score -> ORDER BY test_score DESC SEPARATOR ' ') -> FROM student -> GROUP BY student_name;

所以：

```
SELECT lesson.name, GROUP_CONCAT(subjects.name SEPARATOR ', ')
    FROM lesson JOIN subjects ON (subject.id = lesson.subject)
    GROUP BY lesson.name; 
```

**测试**

```
CREATE TABLE lesson ( name varchar (20), subject integer );
CREATE TABLE subjects ( id integer, name varchar(20) );

INSERT INTO subjects VALUES ( 1, 'Math' ), ( 2, 'Physics' ), ( 3, 'Chemistry' );

INSERT INTO lesson VALUES ( 'Lesson A', 1 );
INSERT INTO lesson VALUES ( 'Lesson A', 2 );
INSERT INTO lesson VALUES ( 'Lesson A', 3 );
INSERT INTO lesson VALUES ( 'Lesson B', 2 );
INSERT INTO lesson VALUES ( 'Lesson B', 3 );
INSERT INTO lesson VALUES ( 'Lesson C', 1 );

SELECT lesson.name, GROUP_CONCAT(subjects.name SEPARATOR ', ')
    FROM lesson JOIN subjects ON (subjects.id = lesson.subject)
    GROUP BY lesson.name;

+----------+--------------------------------------------+
| name     | GROUP_CONCAT(subjects.name SEPARATOR ', ') |
+----------+--------------------------------------------+
| Lesson A | Math, Chemistry, Physics                   |
| Lesson B | Chemistry, Physics                         |
| Lesson C | Math                                       |
+----------+--------------------------------------------+
3 rows in set (0.00 sec) 
```

**更复杂的测试（带中间表）**

```
CREATE TABLE lesson ( id integer, name varchar (20) );
CREATE TABLE subjects ( id integer, name varchar(20) );
CREATE TABLE lesson_sub ( lesson_id integer, subject_id integer );

INSERT INTO subjects VALUES ( 1, 'Math' ), ( 2, 'Physics' ), ( 3, 'Chemistry' );
INSERT INTO lesson VALUES ( 1, 'Lesson A' ), ( 2, 'Lesson B' ), ( 3, 'Lesson C' );

INSERT INTO lesson_sub VALUES (1,1), (1,2),(1,3),(2,2),(2,3),(3,1);

SELECT lesson.name, GROUP_CONCAT(subjects.name SEPARATOR ', ') AS subjects
    FROM lesson_sub JOIN lesson ON ( lesson.id = lesson_sub.lesson_id )
                    JOIN subjects ON (subjects.id = lesson_sub.subject_id)
    WHERE CONCAT(lesson.name, subjects.name) LIKE '%Chem%'
    GROUP BY lesson.name;

SELECT name, subjects FROM (
    SELECT lesson.name, GROUP_CONCAT(subjects.name SEPARATOR ', ') AS subjects
    FROM lesson_sub JOIN lesson ON ( lesson.id = lesson_sub.lesson_id )
                    JOIN subjects ON (subjects.id = lesson_sub.subject_id)
    GROUP BY lesson.name ) AS lesson_clear
    WHERE CONCAT(name, subjects) LIKE '%Chem%';

+----------+--------------------------------------------+
| name     | GROUP_CONCAT(subjects.name SEPARATOR ', ') |
+----------+--------------------------------------------+
| Lesson A | Chemistry                                  |
| Lesson B | Chemistry                                  |
+----------+--------------------------------------------+
2 rows in set (0.00 sec)

+----------+--------------------------+
| name     | subjects                 |
+----------+--------------------------+
| Lesson A | Physics, Math, Chemistry |
| Lesson B | Physics, Chemistry       |
+----------+--------------------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:04:57.800

如果您只想要主题名称，为什么要使用内部连接？

```
SELECT subject
FROM lesson 
```

现在，如果你想要至少有一节课的科目，那么你可以简单地做

```
SELECT DISTINCT subject
FROM lesson
INNER JOIN subjects ON subject.id = lesson.subject 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:11:15.390

看起来您希望每人有一个记录，即 per `name`。

这是一种方法：

```
 SELECT name, count(*) subject_count
        FROM lesson 
  INNER JOIN subjects ON subject.id = lesson.subject
    GROUP BY name
    ORDER BY name 
```

如果您需要按名称显示在记录中的主题，请尝试以下操作：

```
 SELECT name, 
             count(*) subject_count,
             group_concat(subject) subjects
        FROM lesson 
  INNER JOIN subjects ON subject.id = lesson.subject
    GROUP BY name
    ORDER BY name 
```

# c# - 无法绑定到目标方法，因为它的签名或安全透明度与委托类型的不兼容

> ID：12077030
> 
> 赞同：16
> 
> 时间：2012-08-22T15:59:12.673
> 
> 标签：c#, delegates, visual-studio-2012, windowsformshost

除了安装 Visual Studio 2012 外，我们现有的应用程序现在在尝试创建委托时崩溃。

为什么在运行我们的应用程序时会出现此错误（未在调试中运行...只是正常运行 .exe...没有重新编译，或者除了安装 Visual Studio 2012 之外的任何其他操作）？

Visual Studio 2012 是否以某种方式更新 .net 4.0 WindowsFormsIntegration？

关于如何解决这个问题的任何建议？

> '对匹配指定绑定约束的'MyWindowsFormsHost'类型的构造函数的调用引发了异常。

内部例外：

> 无法绑定到目标方法，因为它的签名或安全透明度与委托类型的不兼容

违规的班级和线路：

```
internal class MyWindowsFormsHost : WindowsFormsHost
{
    private delegate void NotifyChildFocus(ref Message m);
    private readonly NotifyChildFocus childGotFocus;

    public MyWindowsFormsHost()
    {
         //this line crashes now (and did not before VS2012 install)
         this.childGotFocus = Delegate.CreateDelegate(typeof(NotifyChildFocus),
                                 this, "NotifyActivateApp") as NotifyChildFocus;
    }
} 
```

更新：发现 NotifyActiveApp 方法不再存在于 WindowsFormsHost 上。我不明白的是使用 Visual Studio 2012 安装 .net 4.5 如何影响我现有的 4.0 应用程序。

更新：为了解决这个问题，我使用反射来检查 NotifyActivateApp 方法是否存在。（如果它不存在，那么该应用程序正在修补的 .net 版本中运行……我不必担心编写此子焦点代码来修复的激活错误）。

```
 MethodInfo methodInfo = (typeof(WindowsFormsHost)).GetMethod("NotifyActivateApp", BindingFlags.NonPublic | BindingFlags.Instance);
if (methodInfo != null)
{
     this.childGotFocus = Delegate.CreateDelegate(typeof(NotifyChildFocus), this, "NotifyActivateApp") as NotifyChildFocus;
} 
```

微软注意：感谢您修复您的错误...我只是希望您能够以一种不会破坏现有代码的方式推出它。

# asp.net-mvc-3 - .NET MVC 3 中的命令模式（从控制器中删除垃圾）

> ID：12077031
> 
> 赞同：5
> 
> 时间：2012-08-22T15:59:14.657
> 
> 标签：asp.net-mvc-3, single-responsibility-principle, command-pattern

我正在尝试在我的 .NET MVC 3 应用程序上实现此[命令模式](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)，专门用于保存对事物的编辑。我不确定如何进行。在我解决实际问题之前，这里是简化的代码：

```
public class ThingController
{
    private readonly ICommandHandler<EditThingCommand> handler;

    public ThingController(ICommandHandler<EditThingCommand> handler)
    {
        this.handler = handler;
    }

    public ActionMethod EditThing(int id)
    {
        ...build EditThingViewModel and return with View...
    }

    [HttpPost]
    public ActionMethod EditThing(int id, EditThingViewModel vm)
    {
        var command = new EditThingCommand
        {
            ...not sure yet...
        };

        this.handler.Handle(command);

        ...redirect somewhere...
    }
} 
```

我的 EditThingViewModel 与我的域完全断开连接，该域由 POCO 类组成。看起来我的 EditThingCommand 应该是这样的：

```
public class EditThingCommand
{
    Thing ModifiedThing;
} 
```

但是，构建 ModifiedThing 仍然会在我的控制器中进行。这是本案例中的大部分工作。到 ModifiedThing 构建时（并且“旧”时间戳应用于它以进行乐观并发检查），剩下的就是命令在我的数据上下文上调用 Update。

显然，能够用其他命令轻松地装饰它是有价值的，但**我也希望能够将 ModifiedThing 的构造移到我的控制器之外**。（也许这个问题实际上就是这样。） EditThingCommand 在我的域中，并且没有对 EditThingViewModel 的引用，所以它不能去那里。**在我的表示层中有另一个命令用于将我的视图模型映射到我的 poco 实体是否有意义？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:38:55.140

我在我的域之外创建了一个 EditThingPostCommand，它将 EditThingViewModel 作为参数。EditThingPostCommandHandler 负责创建 EditThingCommand 并调用其处理程序。

它有效，但我不会认为这是我问题的最佳答案。可以说 EditThingPostCommandHandler 所做的大部分工作都可以在自定义 AutoMapper 配置中完成，这仍然可以用于清理控制器操作方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T20:36:21.303

在其他项目上使用这种模式几个月后，对我来说很明显这个特定项目上的命令太笼统了，因此太复杂了，需要太多的设置。例如，最好创建一个 EditThingTitleCommand 和一个 MoveThingPiecesCommand 等，并从它们自己的 ActionMethods 中调用它们。

换句话说，在使用命令模式时，不要只使用命令作为典型 CRUD 操作的替代品。更多的特异性带来更多的好处。

# resources - 在 Puppet 资源链中使用变量

> ID：12077040
> 
> 赞同：0
> 
> 时间：2012-08-22T15:59:53.173
> 
> 标签：resources, package, chaining, puppet, vagrant

我有一个木偶清单，它使用一个数组来定义一些需要由 APT 安装的包。我还发生了一些资源链接来指定依赖项（我不想使用'requires'或'before'，因为它使代码难以阅读。问题出在链接行中，数组被扩展并中断链接。我在这里遵循了自定义函数解决方法[Puppet Syntax: how to include a array of objects into an ordering -> chain?](https://stackoverflow.com/questions/11123462/puppet-syntax-how-to-include-an-array-of-objects-into-an-ordering-chain)这很有效，但定义函数似乎有点矫枉过正。

```
$my_deps = ["autoconf", "automake1.9", "autotools-dev", "binutils"]
package { $my_deps:
    ensure => installed,
}

exec {'c_update_apt':
    command => '/usr/bin/apt-get update',
    path => '/usr/bin/',
    }
Exec['c_update_apt'] -> Package[ $my_deps ] 
```

这个错误说'Package [autoconf]Package [automake1.9] ....不匹配'。任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:19:03.613

你可以使用'<| |>' 集合语法，以确保在安装*任何*包之前执行 Exec 块，而不仅仅是列表中的 4 个。

```
Exec['c_update_apt'] -> Package <| |> 
```

[请参阅http://docs.puppetlabs.com/guides/language_guide.html#chaining-resources](http://docs.puppetlabs.com/guides/language_guide.html#chaining-resources)部分的底部。

# c++ - 帮助减少在 C++ 程序中使用宏的工具

> ID：12077047
> 
> 赞同：4
> 
> 时间：2012-08-22T16:00:25.467
> 
> 标签：c++, refactoring, c-preprocessor, automated-refactoring

不同的 C++ 风格指南不赞成使用 C 预处理器宏。

我知道有一些工具可以帮助检测由于使用宏而导致的错误（CPPCHECKER、Check），以及在存在预处理器指令的情况下提供重构的工具（CSCout、XRefactory）。

我想知道是否有任何重构工具可以为 C++ 程序中的宏提供替代方案（如内联函数、常量表达式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-13T09:22:26.077

多年后，您的工作似乎被用作此类工具的基础，因为以前没有出现过。

后来成为 Cevelop IDE 一部分的[Macronator](http://cute-test.com/projects/macronator/wiki)[是](https://www.cevelop.com/)一种工具，可以将类对象和类函数宏重构为等效的 c++11 表达式。他们引用Kumar、Sutton 和 Stroustrup 的[“The demacrofier”](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=6405347&isnumber=6404866)论文作为他们软件的基础。我用它从代码库中删除了 ~15k 宏。

# actionscript-3 - AS3 Tween 翻转会影响舞台上的其他元素

> ID：12077049
> 
> 赞同：0
> 
> 时间：2012-08-22T16:00:35.710
> 
> 标签：actionscript-3, flash, animation, tweener

我使用 as3 tweener 创建了以下动画。

[http://circletest.richardbarberwebdevelopment.co.uk/](http://circletest.richardbarberwebdevelopment.co.uk/)

当您翻转圆圈的一部分时，圆圈动画并显示标题。当你推出它时，它会动画回到它的初始状态。

一切正常，但是由于某种原因，当您翻转一个部分时，会随机出现一个完全不同的部分的文本！！

我不知道它是如何发生的，我无法“让”它发生，所以我无法弄清楚它为什么会发生。我所能做的就是不断地将鼠标移到这些部分上，直到出现故障。

有人可以帮忙吗？

这是我的代码示例，抱歉有点长！！

```
import flash.filters.*;

import caurina.transitions.*;

import caurina.transitions.properties.FilterShortcuts;

FilterShortcuts.init();

// Label 1
Tweener.addTween(Object(this).main_lab_01.txt_fr_top, {x:50, y:40, width:114.35, height:18, time:0, alpha:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_01.txt_fr_bot, {x:0, y:69, width:116, height:23, time:0, alpha:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_01.label_01, {x:2, y:14, time:0, alpha:0, transition:"easeOutBounce"});
// label 2
Tweener.addTween(Object(this).main_lab_02.txt_fr_top, {x:50, y:40, width:114.35, height:18, time:0, alpha:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_02.txt_fr_bot, {x:0, y:69, width:116, height:23, time:0, alpha:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_02.label_02, {x:2, y:14, time:0, alpha:0, transition:"easeOutBounce"});
// label 3
Tweener.addTween(Object(this).main_lab_03.txt_fr_top, {x:50, y:40, width:114.35, height:18, time:0, alpha:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_03.txt_fr_bot, {x:0, y:69, width:116, height:23, time:0, alpha:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_03.label_03, {x:2, y:14, time:0, alpha:0, transition:"easeOutBounce"});

//GROUP 1 (INITIAL STATE)

Tweener.addTween(Object(this).icon_group_02.block2, {x:257.7, y:116, width:72.15, height:59.4, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.block1, {x:310, y:141.35, width:63.05, height:49.7, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush1, {x:194.95, y:96, width:68.95, height:22.45, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree1, {x:226.30, y:88.5, width:48.8, height:80.85, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree2, {x:223.85, y:80.05, width:17.8, height:33.15, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.chapel, {x:160.95, y:79.15, width:46.85, height:79.15, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush2, {x:113.35, y:89.8, width:49.35, height:25.2, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree3, {x:133.25, y:77.5, width:17.85, height:33.25, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree4, {x:124.45, y:83.1, width:13.6, height:25.3, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.cloud2, {x:125.65, y:19.25, width:25.5, height:17, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.cloud1, {x:86.25, y:43.75, width:41.2, height:26.35, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.block3, {x:70.25, y:97.80, width:55.65, height:50.5, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush3, {x:28.35, y:137.2, width:68.35, height:48.95, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bubble1, {x:20.2, y:102.85, width:40.90, height:32.5, time:0, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bubble2, {x:0, y:105.85, width:35.25, height:40.25, time:0, rotation:0, delay:0, transition:"easeOutBounce"});

//group 2 initial state

Tweener.addTween(Object(this).icon_group_04.tree2, {x:79.9, y:81.4, width:90.35, height:71.95, time:0, rotation:-18.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.sun, {x:127.4, y:2.4, width:38.75, height:41.9, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.cloud1, {x:125.55, y:12.7, width:20.7, height:34.95, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.tree5, {x:91.1, y:10.6, width:31.65, height:19.15, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.tree1, {x:90.8, y:16.85, width:46.25, height:27.85, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.bush1, {x:52.85, y:72.35, width:43.45, height:66.1, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.bench1, {x:62.9, y:106.95, width:33.9, height:37.9, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.bench2, {x:45.1, y:137.6, width:22.1, height:22.1, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.bush2, {x:0, y:153.7, width:46.75, height:42.8, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.tree4, {x:24.95, y:170.2, width:54.15, height:55.8, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_04.tree3, {x:18.65, y:182, width:20.9, height:23.95, time:0, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).wifi, {x:674, y:443, width:52, height:51.15, time:0, rotation:0, transition:"easeOutBounce"});

// Group 3 initial State

Tweener.addTween(Object(this).icon_group_03.runner, {x:29.45, y:29.95, width:27.85, height:24.35, time:0, rotation:0});
Tweener.addTween(Object(this).icon_group_03.golf, {x:20.70, y:33.9, width:60.6, height:63.15, time:0, rotation:-3.1});
Tweener.addTween(Object(this).icon_group_03.bike, {x:50.8, y:96, width:42.2, height:44.75, time:0, rotation:0, delay:0});
Tweener.addTween(Object(this).icon_group_03.shower, {x:60.1, y:63.8, width:80.45, height:68.25, time:0, rotation:-6.8});
Tweener.addTween(Object(this).cloud_bg_3, {x:748, y:192, width:179, height:203.1, time:0,  alpha:0});

Tweener.addTween(Object(this).cloud_bg_4, {x:530.1, y:725.8, width:261.8, height:196.95, rotation:-170.7, time:0, alpha:0});

// animate group 1 function
Object(this).segments.segment1.addEventListener(MouseEvent.ROLL_OVER, doThis1, false, 0, true);
Object(this).segments.segment1.addEventListener(MouseEvent.ROLL_OUT, doThat1, false, 0, true);
// animate group 2 function
Object(this).segments.segment2.addEventListener(MouseEvent.ROLL_OVER, doThis2, false, 0, true);
Object(this).segments.segment2.addEventListener(MouseEvent.ROLL_OUT, doThat2, false, 0, true);
// animate group 3 function
Object(this).segments.segment3.addEventListener(MouseEvent.ROLL_OVER, doThis3, false, 0, true);
Object(this).segments.segment3.addEventListener(MouseEvent.ROLL_OUT, doThat3, false, 0, true);

function doThis1(event:MouseEvent):void{
// group 1
Tweener.addTween(Object(this).icon_group_01.tree1, {x:61, width:40, height:44.2, rotation:-20, time:1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tree2, {y:-34, width:54, height:60.15, rotation:10, time:1.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.bush, {x:83.9, y:29.4, width:60, height:82.95, time:1.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.rainbow, {x:38, y:-8, width:60.5, height:92.55, rotation:-14, time:1.75, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower1, {x:48, y:-8, width:40, height:30.2, rotation:10, time:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower2, {x:43, y:4, width:66, height:40.3, rotation:0, time:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower3, {x:34.7, y:25, width:100, height:53.2, rotation:2, time:1, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower4, {x:21, y:75.15, width:44.05, height:28.4, rotation:-13, time:1, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.gmex, {x:50.4, y:82.2, width:53, height:98.75, rotation:0, time:1.5, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.beetham, {x:21.2, y:53.25, width:127, height:63.05, rotation:-9, time:1.5, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_01.txt_fr_top, {x:50, y:0, width:114.35, height:18, time:1, delay:0.25, alpha: 1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_01.txt_fr_bot, {x:0, y:109, width:116, height:23, time:1, alpha:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(this.main_lab_01.label_01, {x:2, y:14, time:1, delay:1, alpha:1, transition:"easeOutCubic"});
Tweener.addTween(Object(this).cloud_bg_2, {x:108, y:373, width:265, height:312.65, time:1, delay:0.5, alpha:1, transition:"easeOutBounce"});
}

function doThat1(event:MouseEvent):void{
//group 1
Tweener.addTween(Object(this).icon_group_01.tree1, {width:19.7, height:21.8, rotation:0, time:1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tree2, {width:27.75, height:30.95, rotation:0, time:1.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.bush, {x:70, y:3, width:32, height:44.25, time:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.rainbow, {x:38, y:-8, width:32, height:66.25, time:1.25, rotation:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower1, {x:48, y:-8, width:24.6, height:18.6, rotation:0, time:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower2, {x:42.8, y:-0.2, width:39.95, height:24.4, rotation:0, time:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower3, {x:34.7, y:19.75, width:64, height:34.05, rotation:0, time:0.75, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.tower4, {x:19.4, y:75.15, width:23.95, height:11.55, rotation:0, time:1, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.gmex, {x:43.1, y:64.05, width:39.35, height:73.35, rotation:0, time:1.5, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_01.beetham, {x:21.2, y:53.25, width:90.15, height:33.1, rotation:0, time:0.75, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_01.txt_fr_top, {x:50, y:20, width:114.35, height:18, time:1, delay:0.5, alpha:0, transition:"easeOutCubic"});
Tweener.addTween(Object(this).main_lab_01.txt_fr_bot, {x:0, y:69, width:116, height:23, alpha:0, time:1, delay:0.5, transition:"easeOutCubic"});
Tweener.addTween(this.main_lab_01.label_01, {x:2, y:14, time:1, delay:0, alpha:0, transition:"easeOutCubic"});
Tweener.addTween(Object(this).cloud_bg_2, {x:143, y:356, width:230, height:271.45, time:1, delay:0, alpha:0, transition:"easeOutCubic"});
}

function doThis2(event:MouseEvent):void{
// group 2
Tweener.addTween(Object(this).icon_group_02.block2, {x:244.05, y:117.85, width:116.55, height:98.45, time:1, rotation:6, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.block1, {x:305.55, y:141.35, width:88.3, height:72.6, time:1, rotation:4, delay:0.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush1, {x:177.75, y:104, width:103.4, height:35.25, time:1, rotation:-1, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree1, {x:231.7, y:79.35, width:85.9, height:115.9, time:1.5, rotation:14, delay:0.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree2, {x:230.9, y:80.6, width:40.5, height:65.4, time:1, rotation:-7, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.chapel, {x:165.8, y:78.2, width:70.1, height:106.85, time:1.5, rotation:6, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush2, {x:111.75, y:90.7, width:78.85, height:45.15, time:1, rotation:5, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree3, {x:131.55, y:71.9, width:43, height:58.65, time:1, rotation:18, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree4, {x:128.25, y:79.15, width:20, height:37.2, time:1.25, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.cloud2, {x:98.05, y:-6.75, width:55.5, height:37, time:1.25, rotation:0, delay:0.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.cloud1, {x:59.55, y:27.7, width:73.05, height:52.95, time:1.25, rotation:-9, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.block3, {x:52.85, y:100.1, width:79.9, height:72.5, time:1, rotation:0, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush3, {x:2.3, y:161.5, width:115.55, height:84.7, time:1.25, rotation:-2, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bubble1, {x:0.5, y:79.3, width:61.3, height:54.3, time:1, rotation:14, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bubble2, {x:-31.45, y:76.95, width:55.4, height:60, time:1, rotation:17, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_02.txt_fr_top, {x:50, y:0, width:114.35, height:18, time:1, delay:0.25, alpha: 1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_02.txt_fr_bot, {x:0, y:109, width:116, height:23, time:1, alpha:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(this.main_lab_02.label_02, {x:2, y:14, time:1, delay:1, alpha:1, transition:"easeOutCubic"});
Tweener.addTween(Object(this).cloud_bg_1, {x:330, y:0, width:360, height:249.9, time:1.5, delay:0.5, alpha:1, transition:"easeOutBounce"});
}

function doThat2(event:MouseEvent):void{
// group 2
Tweener.addTween(Object(this).icon_group_02.block2, {x:257.7, y:116, width:72.15, height:59.4, time:1, rotation:0, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.block1, {x:310, y:141.35, width:63.05, height:49.7, time:1, rotation:0, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush1, {x:194.95, y:96, width:68.95, height:22.45, time:1, rotation:0, delay:1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree1, {x:226.30, y:88.5, width:48.8, height:80.85, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree2, {x:223.85, y:80.05, width:17.8, height:33.15, time:1, rotation:0, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.chapel, {x:160.95, y:79.15, width:46.85, height:79.15, time:1, rotation:0, delay:0.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush2, {x:113.35, y:89.8, width:49.35, height:25.2, time:1, rotation:0, delay:0.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree3, {x:133.25, y:77.5, width:17.85, height:33.25, time:1, rotation:0, delay:0.75, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.tree4, {x:124.45, y:83.1, width:13.6, height:25.3, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.cloud2, {x:125.65, y:19.25, width:25.5, height:17, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.cloud1, {x:86.25, y:43.75, width:41.2, height:26.35, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.block3, {x:70.25, y:97.80, width:55.65, height:50.5, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bush3, {x:28.35, y:137.2, width:68.35, height:48.95, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bubble1, {x:20.2, y:102.85, width:40.90, height:32.5, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_02.bubble2, {x:0, y:105.85, width:35.25, height:40.25, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_02.txt_fr_top, {x:50, y:20, width:114.35, height:18, time:1, delay:0.5, alpha:0, transition:"easeOutCubic"});
Tweener.addTween(Object(this).main_lab_02.txt_fr_bot, {x:0, y:69, width:116, height:23, alpha:0, time:1, delay:0.5, transition:"easeOutCubic"});
Tweener.addTween(this.main_lab_02.label_02, {x:2, y:14, time:1, delay:0, alpha:0, transition:"easeOutCubic"});
Tweener.addTween(Object(this).cloud_bg_1, {x:382.95, y:38.85, width:268, height:186, time:1, delay:0, alpha:0, transition:"easeOutCubic"});
}

function doThis3(event:MouseEvent):void{
// group 3
Tweener.addTween(Object(this).icon_group_03.cup, {x:8, y:-14, width:56, height:54.15, time:1, rotation:3, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.runner, {x:33, y:29, width:39.35, height:34.4, time:1.25, rotation:0, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.golf, {x:50.4, y:30.35, width:87.55, height:88.8, time:1, rotation:34.9, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.bike, {x:56.05, y:79.7, width:65.8, height:67.9, time:1.5, rotation:16.5, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.shower, {x:68.7, y:55.3, width:82.7, height:67.35, time:1, rotation:0.4, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).cloud_bg_3, {x:876.3, y:239.15, width:287, height:406.65, time:1, rotation:93.8, delay:0, alpha:1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_03.txt_fr_top, {x:50, y:0, width:114.35, height:18, time:1, delay:0.25, alpha: 1, transition:"easeOutBounce"});
Tweener.addTween(Object(this).main_lab_03.txt_fr_bot, {x:0, y:109, width:116, height:23, time:1, alpha:1, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(this.main_lab_03.label_03, {x:2, y:14, time:1, delay:1, alpha:1, transition:"easeOutCubic"});

}

function doThat3(event:MouseEvent):void{
// group 3
Tweener.addTween(Object(this).icon_group_03.cup, {x:7, y:-3, width:45, height:43.45, time:1.25, rotation:0, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.runner, {x:29.45, y:29.95, width:27.85, height:24.35, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.golf, {x:20.70, y:33.9, width:60.6, height:63.15, time:1, rotation:-3.1, delay:0.5, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.bike, {x:50.8, y:96, width:42.2, height:44.75, time:1, rotation:0, delay:0, transition:"easeOutBounce"});
Tweener.addTween(Object(this).icon_group_03.shower, {x:60.1, y:63.8, width:80.45, height:68.25, time:1, rotation:-6.8, delay:0.25, transition:"easeOutBounce"});
Tweener.addTween(Object(this).cloud_bg_3, {x:849.55, y:273.85, width:233.6, height:333.95, rotation:93.8, time:1, delay:0, alpha:0, transition:"easeOutCubic"});
Tweener.addTween(Object(this).main_lab_03.txt_fr_top, {x:50, y:20, width:114.35, height:18, time:1, delay:0.5, alpha:0, transition:"easeOutCubic"});
Tweener.addTween(Object(this).main_lab_03.txt_fr_bot, {x:0, y:69, width:116, height:23, alpha:0, time:1, delay:0.5, transition:"easeOutCubic"});
Tweener.addTween(this.main_lab_03.label_03, {x:2, y:14, time:1, delay:0, alpha:0, transition:"easeOutCubic"});

}

Object(this).segments.segment1.addEventListener(MouseEvent.CLICK, myBtnClicked1);
Object(this).segments.segment2.addEventListener(MouseEvent.CLICK, myBtnClicked);
Object(this).segments.segment3.addEventListener(MouseEvent.CLICK, myBtnClicked3);

function myBtnClicked(e:MouseEvent):void {
var url:String = "home.php";
var request:URLRequest = new URLRequest(url);
try {
navigateToURL(request, '_self');
} catch (e:Error) {
trace("Error occurred!");
}
}

function myBtnClicked1(e:MouseEvent):void {
var url:String = "home.php";
var request:URLRequest = new URLRequest(url);
try {
navigateToURL(request, '_self');
} catch (e:Error) {
trace("Error occurred!");
}
}

function myBtnClicked3(e:MouseEvent):void {
var url:String = "home.php";
var request:URLRequest = new URLRequest(url);
try {
navigateToURL(request, '_self');
} catch (e:Error) {
trace("Error occurred!");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:10:28.883

在我看来，您有时会触发多个补间，通过滚动一个部分而另一个部分已经在补间。

最好的解决方案是在开始一个新的补间时检查是否有任何正在运行的补间，并在播放新的补间之前停止并倒回它们，但这需要更多的代码。

在您的任何 do... 函数（doThis1 等）的开头，尝试添加：

```
// Remove all tweenings
Tweener.removeTweens(target:object); 
```

根据[http://hosted.zeh.com.br/tweener/docs/en-us/](http://hosted.zeh.com.br/tweener/docs/en-us/)，这应该会阻止任何现有的补间继续执行。

让你的对象回到它们的起始位置为下一个补间做好准备是比较棘手的，因为 Tweener 库似乎并不容易倒带或重置补间。

不过，您可以试试这个：如果您的 do... 函数正在移动对象 a、b、c，那么我会添加一些初始化代码，在您开始补间之前将它们放在它们的起始位置，这样您的函数就会执行：

```
// Do all of this for each object tweened in this function:
{
    // Remove the current tween
    Tweener.removeTweens(Object(this).icon_group_02.block2);
    // Reposition the object in its starting blocks, if necessary:
    Object(this).icon_group_02.block2.x = 100; // Or whatever...
    // Now begin your tweens:
    Tweener.addTween(Object(this).icon_group_02.block2 etc...)
} 
```

基本原则是确保在开始下一个补间之前整理所有正在执行的补间（以及任何放错位置的对象）。

Greensock TweenLite 和 TweenMax 库提供比 Tweener 库更多的控制，并且可以轻松取消、回滚和分组补间：http: [//www.greensock.com/v11/](http://www.greensock.com/v11/)

# php - 我们如何才能为社区页面的粉丝发布的帖子取消 fbid？

> ID：12077052
> 
> 赞同：0
> 
> 时间：2012-08-22T16:00:42.100
> 
> 标签：php, facebook, facebook-page, facebook-insights

我们正在努力收集有关社区页面上帖子的信息。我们目前能够从页面管理员发布的帖子中提取 fbid，我们也希望为社区粉丝发布的帖子提取 fbid。

例如，如果某个粉丝在产品的墙上发布了诸如“我喜欢这个产品”之类的帖子，我们目前无法可靠地访问有关该帖子的信息。

我们注意到的具体区别在于，对于大多数链接，fbid 以 xxxxxxxxxxxxxx 格式显示，而来自粉丝的 feed 上的帖子将表示为 xxxxxxxxx_xxxxxxx。当给出直接指向这篇文章的链接时，是否有可靠的方法来获取这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:33:22.607

不完全确定你在这里问什么。

您可以在 FQL 中轻松获取其他人在粉丝页面上发布的所有帖子：

```
SELECT post_id, actor_id, message FROM stream WHERE source_id = $page_id 
  AND filter_key = 'others' 
```

如果您知道`post_id`，则此查询将告诉您发布者：

```
SELECT actor_id FROM stream WHERE post_id = $post_id 
```

# ios - iPad 减少移动 Safari/UIWebView 中的 JPEG 尺寸

> ID：12077054
> 
> 赞同：0
> 
> 时间：2012-08-22T16:00:55.137
> 
> 标签：ios, image, ipad, mobile-safari, jpeg

通过 iPad（2 和 3）查看图像时，我发现 jpeg 图像的尺寸减半。

例如，带有维度的图像`1500 * 1000`将被渲染为`750 * 500`. 如果我从 iPad 复制图像并将其通过电子邮件发送给自己，那么我可以看到尺寸仍然是`1500 * 1000`.

有谁知道是什么原因造成的以及如何阻止它发生？

具有相同尺寸的 PNG 图像可以正确显示而没有问题，我认为这与文件大小无关，因为某些 jpg 图像的大小比 png 图像小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:23:45.723

要阻止 iOS“缩小”JPEG 图像，您需要使用[渐进式 JPEG 文件](http://www.faqs.org/faqs/jpeg-faq/part1/section-11.html)。

要即时创建这些（以及优化 iamge），您可以使用以下命令使用[JpegTran ：](http://linux.about.com/library/cmd/blcmdl1_jpegtran.htm)

```
jpegtran -copy none -progressive -optimize -outfile output.jpg input.jpg 
```

我发现了一篇有趣的文章，讨论了我们是否应该在 iPad 上使用渐进式 JPEG，并推测为什么渐进式 Jpeg 可以在其他人失败的地方工作：

[http://duncandavidson.com/blog/2012/03/retina_web_thoughts](http://duncandavidson.com/blog/2012/03/retina_web_thoughts)

如果您对此主题有任何进一步的信息或建议，请随时对此答案做出贡献或发表评论。

# datetime - RavenDB 中日期查询的问题

> ID：12077055
> 
> 赞同：3
> 
> 时间：2012-08-22T16:00:55.230
> 
> 标签：datetime, indexing, mapreduce, ravendb

当尝试在我的应用程序中比较 MapReduce 中的日期属性时，我得到一个奇怪的行为。

```
var queryDate = DateTime.Now.Date;
IQueryable<VisitsByMediaSourceAndVersion.MapReduceResult> queryable =
    _documentSession
    .Query<MyIndex.MapReduceResult>(MyIndex.INDEX_NAME)
    .Where(mapReduceResult => mapReduceResult.Date == queryDate);
var count = queryable.Count(), 
```

调用 queryable.Count() 时会引发异常。从异常中查看 url 似乎“日期：2012-08-22T00:00:00.0000000”作为查询参数生成，然后 RavenDB 客户端将“22T00:”解释为索引中的新字段名称。

> System.InvalidOperationException 未被用户代码 Message=Url 处理：“/indexes/VisitsByMediaSourceAndVersion?query=Date%253A2012-08->22T00%253A00%253A00.0000000&start=0&pageSize=0&aggregation=None”

为什么是这样？有解决办法吗？我是唯一一个有这个问题的人吗？

我无法在 RavenDB 的 EmbeddableDocumentStore 版本中重现这个问题，这有意义吗？如果我删除它返回结果的日期查询，那么索引本身就可以工作。

使用 RavenDB 客户端 1.2.0.0 和服务器 960。

感谢所有帮助！

完整的堆栈跟踪：

System.InvalidOperationException 未被用户代码 Message=Url 处理：“/indexes/VisitsByMediaSourceAndVersion?query=Date%253A2012-08-22T00%253A00%253A00.0000000&start=0&pageSize=0&aggregation=None”

System.ArgumentException：字段“22T00”未编入索引，无法查询在 c:\Builds\RavenDB-Stable\Raven.Database\Indexing 中的 Raven.Database.Indexing.Index.IndexQueryOperation.AssertQueryDoesNotContainFieldsThatAreNotIndexes() 中未编入索引的字段\Index.cs：Raven.Database.Indexing.Index.IndexQueryOperation.d_ *2e.MoveNext() 中的第 819 行：\Builds\RavenDB-Stable\Raven.Database\Indexing\Index.cs：System.Linq 中的第 635 行.Enumerable.WhereSelectEnumerableIterator `2.MoveNext() at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext() at System.Collections.Generic.List `1.InsertRange(Int32 index, IEnumerable`1 collection) at Raven.Database.DocumentDatabase.<>c* _DisplayClass82.b__78(IStorageActionsAccessor actions) in c:\Builds\RavenDB-Stable\Raven.Database \DocumentDatabase.cs：Raven.Storage.Esent.TransactionalStorage.ExecuteBatch 的第 838 行（操作`1 action) in c:\Builds\RavenDB-Stable\Raven.Storage.Esent\TransactionalStorage.cs:line 376 at Raven.Storage.Esent.TransactionalStorage.Batch(Action`1 个操作）在 c:\Builds\RavenDB-Stable\Raven.Storage.Esent\TransactionalStorage.cs:第 337 行，位于 c:\Builds\RavenDB-Stable\ 中 Raven.Database.DocumentDatabase.Query（字符串索引，IndexQuery 查询） Raven.Database\DocumentDatabase.cs：Raven.Database.Server.Responders.Index.PerformQueryAgainstExistingIndex 的第 781 行（IHttpContext 上下文，字符串索引，IndexQuery indexQuery，Guid& indexEtag）在 c:\Builds\RavenDB-Stable\Raven.Database\Server \Responders\Index.cs：Raven.Database.Server.Responders.Index.ExecuteQuery(IHttpContext context, String index, Guid& indexEtag) 中的第 214 行 c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs 中 Raven.Database.Server.Responders.Index.GetIndexQueryRessult（IHttpContext 上下文，字符串索引）的第 179 行：c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs 中 Raven.Database.Server.Responders.Index.OnGet(IHttpContext context, String index) 的第 119 行：Raven.Database 的第 91 行。 c:\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs 中的 Server.Responders.Index.Respond(IHttpContext context)：Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) 中的第 46 行c:\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs: 第 550 行位于 c:\Builds\RavenDB-Stable\Raven.Database\Server 中 Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) \HttpServer.cs：第 316 行\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs: 第 46 行 Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) 在 c:\Builds\RavenDB-Stable\Raven.Database\Server \HttpServer.cs：Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) 中的第 550 行：\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs：第 316 行\Builds\RavenDB-Stable\Raven.Database\Server\Responders\Index.cs: 第 46 行 Raven.Database.Server.HttpServer.DispatchRequest(IHttpContext ctx) 在 c:\Builds\RavenDB-Stable\Raven.Database\Server \HttpServer.cs：Raven.Database.Server.HttpServer.HandleActualRequest(IHttpContext ctx) 中的第 550 行：\Builds\RavenDB-Stable\Raven.Database\Server\HttpServer.cs：第 316 行

Source=Raven.Client.Lightweight StackTrace：在 c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 中的 Raven.Client.Connection.HttpJsonRequest.HandleErrors(WebException e) `1 getResponse) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 292 at Raven.Client.Connection.HttpJsonRequest.ReadResponseJson() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 202 at Raven.Client.Connection.ServerClient.DirectQuery(String index, IndexQuery query, String operationUrl, String[] includes) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\ServerClient.cs:line 745 at Raven.Client.Connection.ServerClient.<>c__DisplayClass43.<Query>b__42(String u) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\ServerClient.cs:line 727 at Raven.Client.Connection.ReplicationInformer.TryOperation[T](Func`c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\ReplicationInformer.cs中 Raven.Client.Connection.HttpJsonRequest.ReadJsonInternal（Func 2 操作，字符串 operationUrl，布尔避免投掷，T& 结果）的 422 ：Raven.Client.Connection.ReplicationInformer.ExecuteWithReplication[T] 的第 548 行（字符串方法，字符串 primaryUrl，Int32 currentRequest，Int32 currentReadStripingBase，Func`2 operation) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\ReplicationInformer.cs:line 520 at Raven.Client.Connection.ServerClient.ExecuteWithReplication[T](String method, Func`2 操作）在 c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\ServerClient.cs：Raven.Client.Connection.ServerClient.Query 的第 165 行（字符串索引，IndexQuery 查询，字符串 [ ] 包括）在 c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Connection\ServerClient.cs:line 727 at Raven.Client.Document.AbstractDocumentQuery `2.ExecuteActualQuery() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 462 at Raven.Client.Document.AbstractDocumentQuery`2.InitSync() 在 c:\Builds\ RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs：Raven.Client.Document.AbstractDocumentQuery `2.get_QueryResult() in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Document\AbstractDocumentQuery.cs:line 430 at Raven.Client.Linq.RavenQueryProviderProcessor`1.GetQueryResult[TProjection] 的第 444 行（`1 finalQuery) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 1456 at Raven.Client.Linq.RavenQueryProviderProcessor`c:\Builds\RavenDB-Unstable 中的 IDocumentQuery 1.ExecuteQueryTProjection -v1.2\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs：Raven.Client.Linq.RavenQueryProviderProcessor 的第 1376 行`1.Execute(Expression expression) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 1359 at Raven.Client.Linq.RavenQueryProvider`1.Execute(Expression expression) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Linq\RavenQueryProvider.cs:line 138 at Raven.Client.Linq.RavenQueryProvider `1.System.Linq.IQueryProvider.Execute[S](Expression expression) in c:\Builds\RavenDB-Unstable-v1.2\Raven.Client.Lightweight\Linq\RavenQueryProvider.cs:line 183 at System.Linq.Queryable.Count[TSource](IQueryable`1 source) at TotallyMoney.CreditCards .Admin.Web.Controllers.DailyReportController.Report(ReportPostModel reportPostModel) 在 C:\Development\Git\MediaIngenuity\TotallyMoney.CreditCards\TotallyMoney.CreditCards.Admin.Web\Controllers\DailyReportController.cs: lambda_method 的第 33 行（闭包，ControllerBase , Object[] ) 在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase 控制器, Object[] 参数) 在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary `2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 参数) 在 System.Web.Mvc.ControllerActionInvoker .<>c_ *DisplayClass15.b*_12() 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter（IActionFilter 过滤器，ActionExecutingContext preContext，Func`1 延续）InnerException：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T23:48:55.893

发生此异常是因为您在 1.0 服务器上使用 1.2（现在是 2.0）客户端。这是不支持的。

您可以将较旧的客户端与较新的服务器一起使用，但不能反过来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:57:25.390

如果它生成正确的日期并且之后您不需要其余数据，您是否可以使用子字符串仅提取日期，或者可能在方法 queryable.Count() 周围使用 GetDate()？

# ios - 是否可以使用 Apple Store 分发未完成的 iOS 应用程序进行内测？

> ID：12077056
> 
> 赞同：9
> 
> 时间：2012-08-22T16:00:55.483
> 
> 标签：ios, app-store, beta

我们想使用 App Store 对我们的应用程序进行一些封闭式 beta 测试。

我们知道 ad-hoc 方式，但它需要预先收集测试人员的 UDID 并将其嵌入到配置文件中，这并不理想，因为我们希望避免向 100 名测试人员询问他们的 UDID。

另一种方法是使用不需要收集和存储 UDID 的 Enterprise Distribution，但让我们谈谈另一种可能性......

用户需要在应用程序启动时登录。无法从应用程序创建用户帐户，因此我们正在考虑在服务器上创建一些 beta 测试人员帐户，将应用程序的 beta 版本提交到 Apple Store 并通过电子邮件将凭据发送给 beta 测试人员。

唯一的问题是是否建议将未完成的应用程序提交到 Apple Store。提交后，所有 iOS 用户都可以下载该应用程序，但只有 beta 测试人员才能登录。它还有一个额外的优势，那就是更早地了解 Apple 的反馈，因此也可以更早地解决任何问题。你认为苹果会批准一个未完成的应用程序吗？

此外，是否可以禁用提交到 Apple Store 的应用程序的应用程序审查？我们不想在 beta 测试期间收到用户的差评...

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-04-08T05:00:24.200

现在可以使用[TestFlight Beta 测试](https://developer.apple.com/testflight/)，目前的邀请限制为 1,000 个，并且无需询问和注册 UDID。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-22T16:04:15.870

简单的回答。不。

详细解答。不，Apple 要求应用商店中的应用程序必须是最终产品。只要您不将其称为测试版或提及未完成，您就可以尝试将其滑过。在执行此方法时，您正在绕过 Apple 的规则，这可能会导致您的开发人员许可证被吊销。

更多信息可以在这里找到--> [https://developer.apple.com/app-store/review/guidelines/](https://developer.apple.com/app-store/review/guidelines/) <--HERE

编辑添加：不，您不能在应用商店中禁用评论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-22T20:49:23.783

Apple 的应用商店指南明确禁止 Beta 测试应用。

但是，如果您没有明确将应用程序标记或宣传为 Beta 测试，并且该应用程序看起来功能齐全并且可以接受，那么 Apple 可能会批准提交。

实际上，开发人员提交未完成的应用程序并将其放入 App Store 是很常见的（参见“最小可行产品”开发风格）。然而，未完成的功能必须不明显，并且在应用程序描述或文档中的任何地方都没有提及，这样应用程序对审阅者来说似乎是完全功能的（例如，如果缺少某些功能，则隐藏它的按钮和文档，以便没有人知道缺少某些东西）。我在 App Store 中有一个应用程序，它在我的原始设计规范中只有几十个功能中的 5 个左右。没有人知道（直到现在:)

无法将应用下载限制为仅限特定测试人员（使用 Ad Hoc、Enterprise 或 B2B 帐户除外）进行封闭式测试，也无法防止差评和评级。您可以按国家和日期限制应用可用性，并且不提交搜索关键字以限制曝光。如果你愿意给苹果每份高价的 30%，你可以尝试将你的应用定价过高，并将应用赠送给你的测试人员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T16:05:14.430

我有 99% 的把握苹果不会允许这样做，主要是因为你阻止了大多数人使用该应用程序。还因为您要提交未完成的应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-10T20:36:36.143

如果我正确理解 Apple 开发者指南，除了使用 TestFlight 的外部测试套件之外，您不能将您的 beta 应用程序分发给**任何**外部实体（公共客户、朋友等）*。*很多人（你的问题提到了它）谈论 AdHoc 作为解决这个问题的一种方式。如果您查看 Apple Developer 网站并尝试将设备添加到您的开发帐户，他们会非常清楚地发出警告（[请参阅此处的 SO 问题的图片](https://stackoverflow.com/questions/37125241/ios-apps-external-beta-testing-apple-restrictions)），指出 Ad Hoc 设备仅用于**内部**组织使用，或者如果您是该组织的合法代理人（即受雇为公司创建应用程序的咨询公司）。基于此，我认为 AdHoc 不会让您摆脱使用 TestFlight 进行外部 beta 测试的麻烦。

# c# - 在 Windows 窗体应用程序中获取标签文本的 C# 线程安全方法

> ID：12077057
> 
> 赞同：0
> 
> 时间：2012-08-22T16:00:55.513
> 
> 标签：c#, multithreading, delegates

有人可以给我一些关于从表单中获取标签文本的正确“线程安全”方式的想法吗？我目前收到一个 CrossThreadingMessaging 异常。我知道我应该使用委托，但我在让它正常工作时遇到问题。有人可以给我一个例子吗？我的主表单中有一个标签，我想从中获取文本。我必须从另一个班级打来电话。这里的任何指导将不胜感激。

抢

这是我的场景：

我必须创建一个应用程序，该应用程序将从 USB 秤中获取重量，并通过 DDE 调用将此等待传递回旧系统。遗留系统对我的可执行文件进行 DDE 调用，以通过仿真程序获取权重。我试图在 C# 应用程序中模仿旧的 VB 5 应用程序。相信我，我还有很多其他方法可以做到这一点，但管理层告诉我要这样做。我已经捕获了标签文本中的权重，但是现在我必须从主窗体上的标签中获取权重，并在执行 DDE OnRequest 方法时返回它。这是我得到 CrossThreading 异常的地方。OnRequest 当然是在主表单类之外的一个类中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:02:08.943

可以从线程中调用 Label 的 Text 属性的属性 getter，而无需调用通常会遇到的 IllegalOperationException。这是一个实现细节，Text 属性的值被缓存在一个内部字符串中。例如：

```
 private void button1_Click(object sender, EventArgs e) {
        var t = new Thread(() => Console.WriteLine(label1.Text));
        t.Start();
    } 
```

没有例外。但是设置 Text 属性肯定会调用锤子。否则，使用这种代码并不是一个好主意。使用线程来执行非 UI 相关的工作，当你启动它们时给它们他们需要的东西。并且喜欢 BackgroundWorker 类，它非常方便地提供线程安全的进度更新和线程安全的结果。

# objective-c - 使用委托与 TabBarController 中的视图控制器对话

> ID：12077061
> 
> 赞同：0
> 
> 时间：2012-08-22T16:01:18.207
> 
> 标签：objective-c, ios, xcode, delegates, protocols

我正在尝试使用协议和委派将消息发送到选项卡栏控制器中的不同视图。我已经像下面这样设置它，但我似乎没有收到消息；

```
@class RaprTabBarViewController;

@protocol RaprTabBarViewControllerDelegate <NSObject>
@optional
- (void)initActivites:(NSArray *)activities;

@end

@interface RaprTabBarViewController : UITabBarController <RKObjectLoaderDelegate>

@property (nonatomic, weak) id <RaprTabBarViewControllerDelegate> delegated;

@end 
```

然后在实现中

```
- (void)someMethodThatIsCalled:(NSArray *)objects {
    NSLog(@"Delegating..");
    [self.delegated initActivites:objects];
} 
```

现在我得到了 NSLog 所以这个方法肯定被调用了。现在这是一个嵌入在导航控制器中的视图控制器；

```
@interface ActivitesViewController : UITableViewController <RaprTabBarViewControllerDelegate>

@property (nonatomic, strong) NSArray *activites;

@end 
```

以及实施

```
- (void)initActivites:(NSArray *)activities {
    NSLog(@"Called initActivities");
    self.activites = activities;
} 
```

我没有在视图控制器中获得 NSLog，因此永远不会调用 initActivites 方法。我究竟做错了什么？

谢谢你的帮助。

# android - 传递结果失败 ResultInfo{who=null, request=1, result=-1, data=Intent..)

> ID：12077062
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:01:19.860
> 
> 标签：android, android-intent, android-camera

我需要一点帮助。我有上下文菜单，用户可以从中选择如何从图库或相机中拍摄图像，但是当我从图库中选择图像或使用相机拍摄图像并单击“确定”时，出现此错误。

在这里你可以看看这个错误：[HERE](http://pastebin.com/4VNsib68)

在这里你可以看看我的整个代码：[[这里]](http://pastebin.com/v478SiUR)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:04:59.527

您使用 setContentView 为整个活动设置的视图不包含 R.id.ivCar1。

您所做的只是为动画师添加了一些视图。您将不得不对包含 ivCar1 的布局执行 setcontentview 否则 ivCar1 将为空，这会给您带来异常

# ios - 我将如何在 IOS 项目中实现嵌套的选项卡栏控制器

> ID：12077065
> 
> 赞同：0
> 
> 时间：2012-08-22T16:01:32.823
> 
> 标签：ios, user-interface, uitabbarcontroller

我正在尝试在线框中实现类似的东西，我基本上想要底部的选项卡导航控制器，然后在视图中，有另一个选项卡，如控制器。我只是有点困惑我将从哪里开始这个。

![在此处输入图像描述](../Images/6cc9a995ddd10bc85993b721f572c109.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:15:57.800

我非常怀疑您想要的那种类似顶部选项卡的控件是否有标准用户控件。您可能必须为此构建自己的控制器和视图，然后在点击“视图 1”和“视图 2”标签时手动管理中心视图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-24T08:00:34.493

你不应该使用标签栏控制器，而是导航控制器`toolbar`属性。它看起来像标签栏项目，但在实现中不需要另一个控制器实例。查看[UINavigationController 参考页](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UINavigationController_Class/index.html)

> 导航控制器对象管理其视图层次结构中的可选工具栏。显示时，此工具栏从活动视图控制器的 toolbarItems 属性中获取其当前的项目集。当活动视图控制器发生变化时，导航控制器会更新工具栏项以匹配新的视图控制器，并在适当的时候将新项设置为动画。

这是一些 UIViewController 类：

```
- (void)createToolbarItems
{
  UIImage *background = [[UIImage imageNamed:@"navbar"] resizableImageWithCapInsets:UIEdgeInsetsMake(2, 2, 2, 2)];
  [self.navigationController.toolbar setBackgroundImage:background forToolbarPosition:UIBarPositionBottom barMetrics:UIBarMetricsDefault];
  self.navigationController.toolbar.delegate = self; // optional
  //... create some UIBarButtonItem items
  self.toolbarItems = @[item1, space, item2, space, item3, space, item4]; // we set items not to navigation controller instance, but the current controller
}

- (void)showToolbarAnimated:(BOOL)animated
{
  if(!self.toolbar)
    return;
  [self.navigationController setToolbarHidden:YES animated:animated];
} 
```

# c# - 在 Windows CE 7 中使用 .NET WebBrowser 控件缩小内容

> ID：12077069
> 
> 赞同：1
> 
> 时间：2012-08-22T16:01:57.897
> 
> 标签：c#, webbrowser-control, windows-ce

我最近为我用 C# 编写的个人项目之一升级到了 Windows CE7。您可能知道，CE7 引入了触摸支持，因此 WebBrowser 控件在平移和缩放方面的工作方式不同。

这是我的设置：

*   在 Atom 处理器上运行的 Windows CE7
*   使用鼠标和键盘作为输入
*   **编辑**：目标框架 2.0

问题：

*   在 WebBrowser 中加载页面时，默认显示为缩小
*   我似乎找不到以原始大小呈现页面的方法
*   我无法使用鼠标滚动放大
*   因此，网页中的图像看起来像素化了

知道为什么会发生这种情况，是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:50:14.780

原来我的问题和这个[类似](https://stackoverflow.com/questions/8516497/phonewebbrowser-disable-pan-zoom-wp7)

您需要将元数据添加到要显示的网页。谢天谢地，我可以访问那些让我的工作更轻松的页面。否则，您需要围绕内容播放并以编程方式添加此标签。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" /> 
```

PS。老实说，我不知道 WP7 和 CE7 的关系有多密切。现在我知道。

# c# - 从 ViewModel 引用 ResourceDictionary

> ID：12077071
> 
> 赞同：1
> 
> 时间：2012-08-22T16:02:11.427
> 
> 标签：c#, silverlight, mvvm, com, resourcedictionary

我一直在尝试在我的视图模型中加载资源字典 XAML 文件。我能够实例化它，并且调用它不会立即导致错误，但是在控制返回 UI 后，会弹出错误消息“错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回”。

我正在执行以下操作：

*   ResourceDictionary 文件`ViewModelsResources.xaml`位于我`MyApp/ViewModels`的`MyApp`Silverlight 应用程序的根文件夹中
*   `ViewModelsResources.xaml`标记为 Build Action: `Content`, Copy to Output Directory: `Copy always`, Custom Tool:`MSBuild:Compile`
*   ResourceDictionary 对象被实例化（并且此代码与资源字典文件位于同一文件夹中的类中）

    ```
    ResourceDictionary VMResources = new ResourceDictionary()
    {
        Source = new Uri("/ViewModels/ViewModelsResources.xaml", UriKind.Relative)
    };
    ```

*   然后通过基于 x:Key 值的索引引用该对象：（`Template1 = VMResources["myTemplate"] as ControlTemplate;`与上面的代码示例相同的类）

调试表明`VMResources`并被`Template1`赋予了良好的价值。我不知道为什么这会引发有关 COM 组件的错误，但我已将其隔离到引用此 ResourceDictionary 时。如果我取出引用的行`VMResources[x]`，则没有错误。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:26:14.417

事实证明这确实像我描述的那样工作，但是您不能在资源字典中找到的模板中指定事件。我应该意识到这会导致问题，但 COM 让我失望了。为了解决对事件处理程序的需求，我使用了 Behaviors。有大量关于行为的读物。我从[这里](http://www.wintellect.com/CS/blogs/jlikness/archive/2009/10/16/silverlight-behaviors-and-triggers-making-a-true-behavior.aspx)和[这里](http://wpftutorial.net/Behaviors.html)开始。

注意：如果有人认为我应该删除这个问题，因为它实际上按照建议的方式工作，请按此评论。我认为离开这可能会帮助尝试做与我相同的事情的人。

# memory-management - 托管代码的大小如何影响内存占用？

> ID：12077073
> 
> 赞同：2
> 
> 时间：2012-08-22T16:02:12.457
> 
> 标签：memory-management, windows-ce

我的任务是减少`Windows CE 5.0`应用程序的内存占用。我遇到了[Rob Tiffany 的高引用文章](http://robtiffany.com/memmaker-for-the-net-compact-framework/)，该文章建议使用托管 DLL 将代码保留在进程的插槽之外。但是有一点我不明白。

文章说

> JIT 编译器在您的插槽中运行，它根据需要从 1 GB 空间中提取 IL 以编译当前调用堆栈。

这意味着托管 DLL 中的所有代码最终都可能最终出现在进程的插槽中。虽然这将通过不在公共区域加载代码来帮助*其他进程，但它如何帮助**这个进程*？FWIW文章确实提到了

> 它还减少了必须在您的内部分配的内存量

我唯一的想法是，就像将代码拉入插槽一样，它也会被推/换出。但这只是一个疯狂的猜测，可能完全是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:32:43.747

CF 程序集不会像原生 DLL 那样加载到进程槽中。它们实际上是作为内存映射文件访问的。这意味着 DLL 的大小实际上是无关紧要的。

托管堆也位于共享内存中，而不是您的进程槽中，因此对象分配不太可能导致进程槽碎片或 OOM。

JITter 也不只是 JIT 并且永远保持。它编译必要的内容，并且在 GC 期间可能会很好地推销未使用或一段时间未使用的已编译代码。您永远不会看到整个程序集被 JTTed 并缓慢地拉入流程（如果它可能是一个小程序集，但它肯定不是典型的）。

显然，必须使用一些进程槽内存来创建一些指针、堆栈存储等，但总的来说，托管代码对进程槽限制的影响要小于本地代码。当然，您仍然可以通过大堆栈、P/Invokes、本机分配等来达到极限。

以我的经验，人们在使用 CF 应用程序时最常遇到麻烦的领域是 GDI 对象和绘图。位图占用大量内存。尽管它主要在共享内存中，但创建大量它们（以及画笔、钢笔等）而不是缓存和重用是最常导致大量托管应用程序内存占用的原因。

[有关Compact Framework 内存管理的 MSDN 网络广播](https://msevents.microsoft.com/cui/EventDetail.aspx?culture=en-US&EventID=1032318791&CountryCode=US)的更多详细信息，虽然很旧，但仍然非常相关。

# ruby-on-rails-3 - Rails - 生成器模块 - 如何将方法插入到 application_controller？

> ID：12077074
> 
> 赞同：0
> 
> 时间：2012-08-22T16:02:21.317
> 
> 标签：ruby-on-rails-3, methods, gem, documentation-generation

我很想清理这段代码：

```
 def insert_general_methods
    inject_into_file "app/controllers/application_controller.rb", after: "protect_from_forgery"  do
      a = "\n\n  private\n\n  def current_user\n"
      b = "    @current_user ||= User.find_by_auth_token!(cookies[:auth_token]) if cookies[:auth_token]\n"
      c = "  end\n"
      d = "\n  helper_method :current_user\n\n"
      e = "  def authorize\n"
      f = "    redirect_to login_url, alert: 'Not authorized. Please login.' if current_user.nil?\n"
      g = "  end\n"
      a+b+c+d+e+f+g
    end
  end 
```

在 Rails 中的 Thor 或 Generator 模块上是否有任何方法可以让我以更优雅的形式注入此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:44:12.643

使用 heredoc 语法：

```
 inject_into_file 'app/controllers/application_controller.rb', after: "protect_from_forgery"  do <<-RUBY
   # some code
 RUBY
 end 
```

# ios - UISplitViewController 的主视图是否总是必须是 UITableView？

> ID：12077075
> 
> 赞同：0
> 
> 时间：2012-08-22T16:02:26.367
> 
> 标签：ios, uitableview, uisplitviewcontroller

我之前多次使用 UISplitViewController 没有问题（好吧，我已经解决了问题;-) 但是，我以前一直使用 UITableView 作为主视图，因为这是显而易见的选择。今天我需要一些不同的东西，所以我只是提供一个 UIView。

但是，我得到了例外，

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UITableViewController loadView] loaded the "MyViewController" nib but didn't get a UITableView.' 
```

我在 Apple 文档中找不到主视图必须始终是文档中的 UITableView 的提及，只是对用于显示列表的主视图的引用。

是否有主视图必须始终是 UITableView 的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:08:18.423

不，它没有。

我通过更改 iPad 习语的代码犯了一个错误，但在 iPhone 上进行测试 - 哎呀！

# objective-c - 使用简单的 RKClient 发送 JSON

> ID：12077080
> 
> 赞同：1
> 
> 时间：2012-08-22T16:02:44.757
> 
> 标签：objective-c, restkit

我正在尝试使用 RestKit 发送请求。我希望它以 JSON 格式发送，但似乎 RKClient 的默认发布方法使用某种 FORM 数据格式（我使用 [request HTTPBodyString] 检查它）。

我需要使用简单的 POST 发送数据，如下所示（我没有使用对象映射）：

```
[[RKClient sharedClient] post:path usingBlock:^(RKRequest* req) {
    req.params = params;
    req.delegate = self;
}]; 
```

我找到了一些使用 NSJSONSerialization 的解决方案，但是当我将 NSDate 对象放入我的 JSON 字典时，该方法会崩溃。

有没有办法告诉 RKClient 使用 JSON 发送请求？

**更新：** params 是一个 NSDictionary。我希望能够告诉 RestKit 在通过 POST 发送字典时使用 JSON 序列化我的字典。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:11:45.677

您可以通过将 RestKit 的[serializationMIMEType](http://restkit.org/api/master/Classes/RKObjectManager.html#//api/name/serializationMIMEType)属性设置为**RKMIMETypeJSON**来做到这一点。

例如

```
[RKObjectManager sharedManager].acceptMIMEType = RKMIMETypeJSON;
[RKObjectManager sharedManager].serializationMIMEType = RKMIMETypeJSON; 
```

另见[http://restkit.org/api/master/Classes/RKObjectManager.html](http://restkit.org/api/master/Classes/RKObjectManager.html)：

> 通过设置 serializationMIMEType 属性来配置所需的序列化格式。RestKit 目前支持序列化为 RKMIMETypeFormURLEncoded 和 RKMIMETypeJSON。

**更新**：

发布具有正确 Mime 类型的纯 JSON 字符串的示例：

```
RKParams *params = [RKRequestSerialization serializationWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]
                                                        MIMEType:RKMIMETypeJSON];
[[RKObjectManager sharedManager].client post:@"/mypath"
                                      params:params
                                    delegate:self]; 
```

**更新 2：**

从 NSDictionary 对象获取 JSON：

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:myNSDictionaryObject
                                                   options:NSJSONWritingPrettyPrinted
                                                     error:&error];
jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
```

# vba - 在可变范围内测试数据以查找缺失信息并通知提交者

> ID：12077082
> 
> 赞同：1
> 
> 时间：2012-08-22T16:02:49.910
> 
> 标签：vba, excel

我是 VBA 的新手，并且是基于其他人的代码构建的，他对 VBA 的了解比我还新！提前感谢您提供的任何提示和建议。

由于我无法发布图像，我将尝试描述数据集。数据来自用户表单，大部分内容在表格范围 A14:M34 中，A 列中包含问题，BM 列中包含数据。第一行是用户填充的标题，用于标识检查的单元。下面的数据填充了带有空白、Yes 和 NO 作为选项的下拉列表，以及带有数字或字符串的几行。

我想在不同大小的范围内测试每个单元格是否有未回答的问题，并通知用户是否有任何问题，并让他们选择在提交之前完成数据集。

* * *

```
 Sub new_p()
        Static AbortProc As Boolean
        Dim iRow As Long
        Dim LastColumn As Long
        Dim aCol As Long
        Dim ws As Worksheet, WS1 As Worksheet
        Dim InputRange As Range

        Set ws = Worksheets("PreparationData")
        Set WS1 = Worksheets("ColdWeatherPreparation")
        Set InputRange = WS1.Range("B15:M34")

        If AbortProc Then Exit Sub

        'find last column in range
        LastColumn = WS1.Cells(14, 2).End(xlToRight).Column

        'define variable range of columns
        For aCol = 2 To LastColumn
            'check that the circuit row is not blank
            'If Cells(14, aCol) Is Not Nothing Then
                If IsEmpty(InputRange) Then
                Msg = "All fields are not populated. Stop submission to resume editing?"
                Ans = MsgBox(Msg, vbYesNo)
                    'if yes stop process
                    If Ans = vbYes Then
                    AbortProc = True
                    Exit Sub
                    End If
                    'if no run rest of script
                    If Ans = vbNo Then
                    MsgBox "Run without Correcting?"
                    AbortProc = False
                    Exit Sub
                    End If
                End If
            'End If
        Next
'more code here that seems to be working
End Sub 
```

* * *

你会看到我已经注释掉了我认为多余的一行。如果 End(xlToRight) 生成标题行的最后填充列，则它们不是空白的，因此无需测试。尽管如此，我会保留我不使用的代码，直到最终检查完成并且它被证明是完全无用的。过多的评论是为了帮助一大群非 VBA 工作人员在实施之前跟踪并验证我的代码。

所以 LastColumn 的定义似乎起作用了，我稍后再使用它。当我单步执行代码时，它会为我的虚假数据集循环正确的次数。我觉得 isEmpty 是我跌倒的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:27:25.783

如果 B15:M34 中的每个单元格都应该是非空白的，那么你可以这样做：

```
If Application.CountBlank(InputRange)>0 Then
    If Msgbox(Msg, vbYesNo) = vbYes Then
        'rest of your code
    End If
End If 
```

编辑：这将根据相应的标题单元格检查每个数据单元格。

```
Sub new_p()
    Static AbortProc As Boolean
    Dim iRow As Long
    Dim LastColumn As Long
    Dim aCol As Long
    Dim ws As Worksheet, WS1 As Worksheet
    Dim InputRange As Range, rw As Range
    Dim HeaderRange As Range
    Dim x As Long, Msg As String

    Set ws = Worksheets("PreparationData")
    Set WS1 = Worksheets("ColdWeatherPreparation")
    Set HeaderRange = WS1.Range("B14:M14")
    Set InputRange = WS1.Range("B15:M34")

    'are you sure about this next line?
    'once validation has failed once how does it re-run?
    If AbortProc Then Exit Sub

    For Each rw In InputRange.Rows

        For x = 1 To rw.Cells.Count
            If Len(rw.Cells(x).Value) = 0 And _
               Len(Headerange.Cells(x).Value) > 0 Then

                Msg = "All fields are not populated. Stop submission" & _
                       " to resume editing?"

                If MsgBox(Msg, vbYesNo) = vbYes Then
                    AbortProc = True
                    Exit Sub
                Else
                    MsgBox "Run without Correcting?"
                    AbortProc = False
                    Exit Sub
                End If
            End If
        Next x

    Next rw

    'more code here that seems to be working
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:52:12.187

Len 线上的错误？也许是因为 Cells 有 2 个参数？`Cells(RowIndex,ColumnIndex)`.

此外，您可以通过以下方式设置 LastColumn：

```
LastColumn = ActiveSheet.UsedRange.Columns.Count 
```

可以对行做同样的事情：

```
LastRow = ActiveSheet.UsedRange.Rows.Count 
```

也许你应该`If AbortProc Then Exit Sub`进入 For 循环（作为第一行/最后一行）

# gradle - allprojects和subprojects有什么区别

> ID：12077083
> 
> 赞同：154
> 
> 时间：2012-08-22T16:02:50.613
> 
> 标签：gradle

在多项目 gradle 构建中，有人能告诉我“allprojects”部分和“subprojects”部分之间到底有什么区别吗？只是父目录？有人同时使用吗？如果是这样，您是否有一般规则来确定每个规则中通常放置的内容？

相关问题：这两种语法有什么区别（真的适用于所有项目和子项目）：

```
subprojects {  ...
} 
```

和

```
configure(subprojects) { ...
} 
```

你什么时候会一个比一个？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-08-22T16:14:39.210

在多项目 gradle 构建中，您有一个 rootProject 和子项目。两者的结合是 allprojects。rootProject 是构建的起点。一个常见的模式是 rootProject 没有代码，子项目是 java 项目。在这种情况下，您只将 java 插件应用于子项目：

```
subprojects {
    apply plugin: 'java'
} 
```

这相当于一个仅构建子模块的 maven 聚合 pom 项目。

关于这两种语法，它们做的事情完全相同。第一个看起来更好。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-08-22T16:32:51.810

添加到 Ryan 的答案中，`configure`当您想要配置对象的自定义子集时，该方法变得很重要。例如`configure([project(":foo"), project(":bar")]) { ... }`或`configure(tasks.matching { it.name.contains("foo") }) { ... }`。

何时使用`allprojects`vs.`subprojects`取决于具体情况。通常你会同时使用两者。例如，Java 插件等与代码相关的插件通常应用于 . `subprojects`，因为在许多构建中，根项目不包含任何代码。另一方面，Eclipse 和 IDEA 插件通常应用于`allprojects`. 如果有疑问，请查看示例和其他构建和/或实验。总体目标是避免不相关的配置。从这个意义上说，只要它给出预期的结果`subprojects`就更好。`allprojects`

# php - Doctrine2 ManyToMany 自引用

> ID：12077084
> 
> 赞同：11
> 
> 时间：2012-08-22T16:02:52.623
> 
> 标签：php, doctrine-orm, many-to-many

我在坚持多对多自引用关系时遇到了问题。我收到错误：

> 在链配置的命名空间中找不到类“Doctrine\ORM\Persisters\ManyToManyPersister”

当我删除与他们一起保存的所有子表单项时，就会发生这种情况。至少留下一个不会导致错误发生。此外，如果我最初保存没有孩子的实体，一切正常。

```
/**
  * West\AlbumBundle\Entity\Album
  *
  * @ORM\Table(name="albums")
  * @ORM\Entity(repositoryClass="West\AlbumBundle\Entity\AlbumRepository")
  * @ORM\HasLifecycleCallbacks
  */
 class Album extends Entity implements CrudEntity
 {

     /**
      * @ORM\ManyToMany(targetEntity="Album")
      * @ORM\JoinTable(name="albums_relations",
      *         joinColumns={@ORM\JoinColumn(name="album_id", referencedColumnName="id")},
      *         inverseJoinColumns={@ORM\JoinColumn(name="related_album_id", referencedColumnName="id")}
      * ) 
      * @var ArrayCollection
      */
      protected $related_albums;
} 
```

如果您使用 Symfony2 表单进行测试，请记住设置

> “by_reference” => 假

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:02:15.000

我发现问题发生在*UnitOfWork.scheduleCollectionDeletion*被调用时，例如，从*MergeDoctrineCollectionListener.onBind()*并且*PersistentCollection*对象已被克隆（'by_reference' = false）

快速解决此问题的方法是在*MergeDoctrineCollectionListener*类中注释以下行：

```
//$collection->clear(); 
```

# c# - 副本与参考

> ID：12077090
> 
> 赞同：0
> 
> 时间：2012-08-22T16:03:18.493
> 
> 标签：c#

为什么此代码导致 shipping.Items.Count 和 combinedShipment.Items.Count 都为零？

```
private static InboundShipment CombineLikeIsbns(InboundShipment shipment)
{
    // shipment.Items has a count of 3

    var distinctIsbns = shipment.Items.Select(i => i.ISBN).Distinct().ToList();

    var combinedShipment = shipment;
    combinedShipment.Items = new List<InboundShipmentItem>();

    // Now both combinedShipment and shipment have an empty List in the .Items property

    ...

    return combinedShipment;
} 
```

[编辑] 当我将 combineShipment.Items 设置为相同时，我该怎么做才能避免将 shipping.Items 设置为新列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:06:19.397

这个说法：

```
var combinedShipment = shipment; 
```

将 的值复制`shipment`到`combinedShipment`。假设`InboundShipment`是一个类，它的值`shipment`是一个*引用*——而不是一个对象本身。

所以现在我们有两个变量都引用同一个对象。使用哪个变量来更改对象并不重要 - 更改将*通过*两个变量可见。

如果要创建原始对象的新“副本”，则必须明确地执行此操作。很难确切知道您需要在这里做什么，因为您没有向我们提供有关该`InboundShipment`类型的太多信息。

有关更多详细信息，请参阅我[关于值类型和引用类型的文章。](http://pobox.com/~skeet/csharp/references.html)请注意，这是 C# 和 .NET 的*重要*组成部分，在继续深入之前，您应该对它充满信心 - LINQ（及其 lambda 表达式、延迟执行等）等高级主题在您掌握之前很难理解很好地掌握基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:07:10.700

线

```
var combinedShipment = shipment; 
```

将 combineShipment 引用设置为指向与货件相同的实例。因此，当您清除 combineShipment 上的项目时，它会为该单个实例清除它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:10:17.050

赋值`var combinedShipment = shipment;`导致`combinedShipment`and`shipment`引用完全相同的对象。这有点像在同一个纸板箱上贴两个不同的标签。

因此，将所有物品从标有标签的框中取出的下一行`combinedShipment`也会导致标有标签的框`shipment`被清空。因为它们只是带有两个不同标签的同一个盒子。

如果您想创建一个包含不同项目的新货件对象，您需要首先执行以下操作：创建一个新货件对象。

```
var combinedShipment = new InboundShipment(); 
```

实际的代码可能看起来不完全一样。假设您希望`combinedShipment`' 的某些属性与 ' 相同`shipment`，则必须手动确保发生这种情况。根据`InboundShipment`设计方式，这将需要将所需的值传递给构造函数，通过属性设置所需的值，或者两者兼而有之。

# php - 仅在 Internet Explorer 中为 foreach 提供的参数无效

> ID：12077097
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:03:41.887
> 
> 标签：php, internet-explorer, foreach, warnings

为什么我在使用 IE 时会出现此警告？

```
Warning: Invalid argument supplied for foreach() 
```

它适用于所有其他浏览器..

循环的功能：

```
function wdsearch(PDO $dbh){
    if(!isset($_POST['wdsubmit'])) {
    } else {
        $term = $_POST['wdsearchvalue'];
        $stmt = $dbh->prepare("
            SELECT      *
            FROM        posts
            WHERE       category = :designer
            AND         (full_text LIKE CONCAT('%', :term, '%')
            OR          heading LIKE CONCAT('%', :term, '%'))
            ORDER BY    post_date DESC
        ");
        $designer = 'Designer';
        $stmt->bindParam(":designer", $designer);
        $stmt->bindParam(":term", $term);
        $stmt->execute();
        return $stmt->fetchAll();
    }
}
wdsearch($dbh);
$wdsearch = wdsearch($dbh); 
```

循环在这里..

```
<?php foreach($wdsearch as $wds) : ?>
<!-- HTML here -->
<?php endforeach; ?> 
```

任何可能的 IE 相关警告？就像我说的所有其他浏览器都可以处理它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:13:13.563

问题出在你的`wdsearch`功能上；如果`$_POST['wdsubmit']`未设置，则不返回任何内容，如果任何 db 操作中出现任何问题，它也不会返回数组。

您需要为您的数据库操作添加一些错误处理，并且在失败或非发布的情况下，返回一个空数组**和**/**或**在使用之前检查是否`$wdsearch`是一个数组`foreach`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:14:32.733

指定的错误发生在您的 PHP 代码中，而不是任何特定的浏览器中。

问题是， 的数据类型`$wdsearch`没有实现[`iterator`](http://php.net/manual/en/language.oop5.iterations.php). 这可能是由`$wdsearch`存在`null`、字符串/数字/等引起的。- 或者只是一个不支持的对象。

在进入`foreach`循环之前尝试验证数据是否为数组`is_array($wdsearch)`，或者使用 验证变量不为空`isset($wdsearch)`。如果您认为那里有有效数据，请检查其中的对象是否`$wdsearch`真的支持迭代器，如果不支持，请更新它以实现！

例子：

```
<?php
if (isset($wdsearch)):
    foreach($wdsearch as $wds) :
        ?>
        <!-- HTML here -->
        <?php
    endforeach;
endif;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T17:02:13.950

如果对于相同的参数，它适用于 Chrome 和 FF，但不适用于 IE。

您在 IE 中提交的具体内容是什么。有没有一些愚蠢的东西，比如带有图片提交的按钮？这会将您的条款作为点击的位置传递，而不是实际值。

在输出到 foreach 之前调试 $POST 中的传入参数。另外你如何处理空结果集？

# javascript - 在 https 和 http 之间维护私钥

> ID：12077099
> 
> 赞同：2
> 
> 时间：2012-08-22T16:03:46.230
> 
> 标签：javascript, jquery, rest, asp.net-web-api, javascriptmvc

我正在开发一个利用面向服务架构的新站点，前端使用纯 JavaScript，通过 RESTful AJAX 调用访问 Web 服务以获取数据。

它不应该特别重要，但我的堆栈是：

*   javascriptMVC
*   jQuery
*   引导程序
*   ASP.NET Web API（.NET 4.0 上的 C#）
*   微软 SQL

从[这篇文章中](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)，我找到了一些在客户端 (JavaScript) 和服务器（通过 Web API 的 REST 服务）之间共享私钥后保护 Web 服务调用的好方法。但是，我正在为如何建立用于加密的私钥而苦苦挣扎。

**坏主意#1**

最初的设置是在登录时通过 HTTPS 进行设置，然后将其存储在客户端的 cookie 中以供重复使用。问题是我们的 SSL 证书适用于[https://secure.example.com](https://secure.example.com)，而我们的网站位于[http://www.example.com](http://www.example.com) - 所以我无法访问 secure.example.com cookie来自 www.example.com。

**坏主意#2**

我的下一个想法是通过 URL 参数将其加密并签名，从 HTTPS 登录到 HTTP 登录后页面，如下所示：

`http://www.example.com/processLogin?key=[encryptedKey]&sig=[encryptedSig]&user=[userid]`

encryptedKey 和 encryptedSig 都将使用另一个仅针对该交易存在的私钥进行加密。它将在登录时创建并分配给数据库中的该用户。在 HTTP 端，所有这些都被传递到解密它的服务器，验证签名，删除该私钥（以防止重放攻击 - 本质上是一个[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)）并返回解密的私钥（`[encryptedKey]`解密）。

从那时起，解密后的值`[encryptedKey]`将用于所有未来的交易。问题是解密的私钥必须通过 HTTP 通过线路发送，这很糟糕。

**坏主意#3**

我还短暂地想到在 JavaScript 中有一个硬编码的密钥，用于解密这个值，但无论我如何尝试和混淆它，黑客都可以找到并使用它。

**坏主意#4**

我还考虑过在初始握手时使用公钥加密进行某种[密钥交换，但如](http://en.wikipedia.org/wiki/Key_exchange)[其他地方](https://stackoverflow.com/questions/9833527/client-side-encryption-over-http-with-diffie-hellman-key-exchange-and-aes#comment12541094_9833722)所述，除非结束，否则您不能在客户端真正确信在初始握手期间没有篡改SSL - 让我回到第一方。

**大问题**

那么，你们如何在不通过 HTTPS 的情况下管理这些*事情呢？*我的 HTTP 和 HTTPS 是否*必须*具有相同的域名，以便我可以将此私钥存储在 cookie 中？

请注意，该站点的非 SSL 部分不会共享信用卡或登录信息等。我只是不想让这个傻瓜敞开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:56:16.920

如果不实施 SSL，您将无法在 javascript 客户端和服务器之间进行安全和加密的通信。是不可能的。如果您真正想要完成的不是加密流量，而只是确保您正在与之交谈的客户端已被授权发出请求并且客户端不是模仿者，那么 OAuth 可能就足够了。请参阅[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)了解标准 OAuth .net 实施。

如果 OAuth 不是您想要参与的，而您只是想在已经构建的基础上进行构建，您应该向 javascript 客户端分发令牌以及公钥和私钥。公钥和令牌是每次请求来回发送的内容，而私钥永远不会来回发送，而是用于生成某种类型的签名哈希。每个请求都应该有这个签名和一个基于时间的随机数来防止重放。您还应该非常频繁地使令牌过期，并要求客户端使用他们的签名和公钥请求“刷新”令牌。本质上，我所描述的是 OAuth 1.0a，如果您确实想走这条路，我会参考 DotNet OpenAuth 而不是自己尝试推出它。

但是，重申一下，如果没有 SSL，您仍然容易受到其他类型的攻击。此外，除非您对初始令牌请求进行 SSL 加密，否则黑客总是可以嗅探令牌/公钥/私钥对的初始交付，因此，首先消除您为确保事情安全而付出的所有努力。

上述方法的替代方法是在您的客户端和 REST API 之间放置一个代理服务器。对 API 的请求只能通过代理服务器。客户端登录并 使用基本身份验证从[https://secure.example.com获取 cookie。](https://secure.example.com)然后，客户端继续向 secure.example.com 发出请求，然后 secure.example.com 向您的 API 发出请求并将数据返回给客户端。

无论如何，希望有足够的信息让你深思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:58:03.900

您可以通过查看以下答案来查看如何使用子域和 cookie：[在域上创建 javascript cookie 并跨子域读取它](https://stackoverflow.com/questions/5671451/creating-a-javascript-cookie-on-a-domain-and-reading-it-across-sub-domains)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T23:17:19.800

关于**坏主意＃3：**

我早就知道我可以使用[http://jsbeautifier.org对使用](http://jsbeautifier.org)[http://dean.edwards.name/packer/](http://dean.edwards.name/packer/)与“收缩变量”复选框和/或“Base62 编码”进行混淆的任何内容进行反混淆“复选框。因此 JavaScript 是完全不安全的，不应依赖于保存任何类型的 SSL 加密、用户身份验证令牌或浏览器中的可编辑帐户统计信息。否则有人会简单地尝试编辑他们的游戏帐户并给自己+1000万游戏币。

当一切都通过 SSL 时，它只能防止“中间人”攻击。这实际上是一种“中间服务器”攻击。它不会阻止最终用户自己成为黑客。

在下一个示例中，SSL 将阻止服务器 a 到 e 看到任何从客户端传递到终端服务器的数据，但如果没有 SSL，服务器 C 将窃取数据。这就是服务器跃点的工作方式，无需加密，客户端 + 所有服务器都可以读取数据：

```
client > a > b > server c's bot sniffs http traffic > d > e > terminus server 
```

服务器 c 的机器人记录了一个信用卡号，这是一个加密的银行帐号。（大多数人没有意识到信用卡号是经过加密和转换的银行帐号。如果信用卡号被泄露，银行很容易从银行帐号重新签发新的加密 CC# 并发送邮寄一张新卡。他们不必更改原始银行帐号，也不必打印底部印有银行帐号的新支票。）

使用 TLS/SSL/https 加密的服务器跃点将像这样工作，只有客户端和服务器可以读取任何内容：

```
client > all servers from a-e are blind & pass the data through > terminus server 
```

如果服务器 c 的机器人可以使用 SSL 读取任何内容，则服务器 c 的机器人会看到类似：as65a89as7df08 而不是 1234-5678-9012-... 的垃圾。

iOS 最酷的地方在于，当它与 HTML 5 和 CSS 一起使用时，它使得阅读 JS 代码变得更加困难。用户不能像在桌面浏览器中那样右键单击以在他们的 iPhone 上进行检查。使用后端语言在终端服务器中隐藏密码很容易。

目前无法防止 JavaScript 被最终用户（客户端）入侵。每个最终用户都可能是黑客。如果我想出别的东西，我可以把它贴在这里供未来的开发人员阅读。

# ios - 哪些图形库和函数用于在图像上叠加文本和图形

> ID：12077106
> 
> 赞同：0
> 
> 时间：2012-08-22T16:04:01.937
> 
> 标签：ios, graphics, uiimage, core-graphics

我需要编写一个可以拍照的应用程序，然后我希望能够预览它并覆盖图形和一些文本，然后将其保存回图像库。

因此，我的用户将启动我的应用程序，然后使用 UIImagePickerController 访问相机并通过委托获取图像数据。

然后我想将它显示在屏幕上，然后显示控件以添加可见图像（或特别是徽标），并让用户可以选择添加一两行文本，然后将这些文本定位在图片的某个区域上。

然后用户将单击保存，生成的合成图像将被写入相机胶卷/照片库，然后用户可以根据需要将图像上传到 twitter、facebook 等（我不希望实现 OAuth2 的开销可以是别人的问题）。

那么，我需要知道的是 SDK 中提供的众多库中的哪一个可以让我这样做？CG图像？鉴于我的叠加徽标将是透明的 PNG，我如何将一个叠加在另一个上？

我听说您可以使用 CALayer 进行演示，但我不知道您如何将所有图层一起抓取（将它们展平）。

在 PHP 中你会使用类似 imagecopymerge() 的东西，我很难找出等价物。

我不想将数据传递给网络服务器并返回，因为我知道它可以在本地完成。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:15:58.653

好吧，要在图像上添加文本，我相信您可以只使用文本字段来获取输入，然后将文本放入标签中。这部分可以通过几种不同的方式完成，但相当容易。

至于抓取所有图层的组合图像，您可以使用 Quartz。

每个`UIWindow`（继承自`UIView`）`UIView`并由 CALayer 支持。该`CALayer/-renderInContext:`方法允许您将图层及其子图层渲染​​到图形上下文。因此，要获取整个屏幕的快照，您可以遍历屏幕上的每个窗口并将其层层次结构渲染到目标上下文。完成后，您可以通过该`UIGraphicsGetImageFromCurrentImageContext`功能获取屏幕截图，如下所示。

请注意，`CALayer/-renderInContext:`仅捕获您的 UIKit 和 Quartz 绘图。它不捕获 OpenGL ES 或视频内容。

```
#import <QuartzCore/QuartzCore.h> 
```

......

```
- (UIImage*)screenshot 
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;
} 
```

至于上传到 Facebook 和 Twitter 看看[ShareKit](http://getsharekit.com/)。它是一个拖放库，用于与 Facebook、Twitter、Tumblr、电子邮件等共享。拥有它会为您的应用程序增加价值。我建议实施它。

# java - 数组 必需，但找到了 java.lang.String

> ID：12077111
> 
> 赞同：6
> 
> 时间：2012-08-22T16:04:14.777
> 
> 标签：java

我试图隐藏从文本文件的列表中检索到的随机单词，但代码不断给我以下错误：`Array Required, but java.lang.String found`

```
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import java.util.List;

public class Hangman extends JFrame
{
private static final char HIDECHAR = '_';
String imageName = null;
String Path = "D:\\Varsity College\\Prog212Assign1_10-013803\\images\\";
static int guesses =0;
private String original = readWord();
private String hidden;
int i = 0;
static JPanel panel;
static JPanel panel2;
static JPanel panel3;
static JPanel panel4;

public Hangman(){
JButton[] buttons = new JButton[26];

this.original = original;
this.hidden = this.createHidden();
panel = new JPanel(new GridLayout(0,9));
panel2 = new JPanel();
panel3 = new JPanel();
panel4 = new JPanel();

JButton btnRestart = new JButton("Restart");
btnRestart.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
    {

    }
});

JButton btnNewWord = new JButton("Add New Word");
btnNewWord.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
{
try
{
    FileWriter fw = new FileWriter("Words.txt", true);
    PrintWriter pw = new PrintWriter(fw, true);

    String word = JOptionPane.showInputDialog("Please enter a word: ");

    pw.println(word);
    pw.close();
}
catch(IOException ie)
{
    System.out.println("Error Thrown" + ie.getMessage());
}
}
});

JButton btnHelp = new JButton("Help");
btnHelp.addActionListener(new ActionListener(){
   public void actionPerformed(ActionEvent e)
   {
       String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word."
               + "\nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions."
               + "\nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
               + "\n"
               + "\nThe game is over when:"
               + "\nThe guessing player completes the word, or guesses the whole word correctly"
               + "\nThe other player completes the diagram";
       JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
   }
});

JButton btnExit = new JButton("Exit");
btnExit.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e)
    {
        System.exit(0);
    }
});
JLabel lblWord = new JLabel(original);

if(guesses >= 0) imageName = "Hangman1.jpg";
if(guesses >= 1) imageName = "Hangman2.jpg";
if(guesses >= 2) imageName = "Hangman3.jpg";
if(guesses >= 3) imageName = "Hangman4.jpg";
if(guesses >= 4) imageName = "Hangman5.jpg";
if(guesses >= 5) imageName = "Hangman6.jpg";
if(guesses >= 6) imageName = "Hangman7.jpg";
ImageIcon icon = null;
if(imageName != null){
    icon = new ImageIcon(Path + File.separator + imageName);
}

JLabel label = new JLabel();
label.setIcon(icon);
String  b[]={"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
for(i = 0; i < buttons.length; i++)
{
    buttons[i] = new JButton(b[i]);

    panel.add(buttons[i]);
}

panel2.add(label);

panel3.add(btnRestart);
panel3.add(btnNewWord);
panel3.add(btnHelp);
panel3.add(btnExit);
panel4.add(lblWord);
}
public String readWord()
{
try
{
BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
String line = reader.readLine();
List<String> words = new ArrayList<String>();
while(line != null)
{
    String[] wordsLine = line.split(" ");
    boolean addAll = words.addAll(Arrays.asList(wordsLine));
    line = reader.readLine();
}
Random rand = new Random(System.currentTimeMillis());
String randomWord = words.get(rand.nextInt(words.size()));
return randomWord;

}catch (Exception e){
    return null;
}

}
private String printWord(){
StringBuilder sb = new StringBuilder();
for (int i = 0; i < this.original.length(); i++){
    sb.append(HIDECHAR);
}
return sb.toString();
}
public boolean check(char input){
boolean found = false;
for (int i = 0; i < this.original.length(); i++){
    if(this.original.charAt(i)== input)){
        found = true;
        this.hidden[i] = this.original.charAt(i);
    }
}
return found;
}

public static void main(String[] args) 
{

    System.out.println();
    Hangman frame = new Hangman();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Box mainPanel = Box.createVerticalBox();
    frame.setContentPane(mainPanel);
    mainPanel.add(panel, BorderLayout.NORTH);
    mainPanel.add(panel2);
    mainPanel.add(panel4);
    mainPanel.add(panel3);
    frame.pack();
    frame.setVisible(true);
}

} 
```

好的，有整个代码<错误现在在第 151 行和第 149 行...我也尝试根据其中一篇文章修复它

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-22T16:06:04.117

您不能使用数组下标: `[]`, 来索引 a `String`，以及两者`hidden`和`original`are `Strings`。

您可以改为使用`original.charAt(i)`来*读取*索引处的字符。

至于在索引处*写*一个字符：java`Strings`是不可变的，所以你不能改变单个字符。而是制作`hidden`一个`StringBuilder`，或简单地制作一个`char[]`：

```
// in your class member declarations:
char hidden[] = createHidden();

// possible implementation of createHidden:
char[] createHidden()
{
    if (original != null)
        return new char[original.length()];
    else return null;
} 
```

然后你的循环可以`original.charAt`像这样使用：

```
if (this.original.charAt(i) == input)
{
    found = true;
    this.hidden[i] = this.original.charAt(i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:08:34.937

**1.**当您使用`original.length()`它的字符串时，因为 length() 方法适用于字符串，而不适用于`Array`，对于数组，**长度是一个实例变量。**

**2.**试试这样......

`this.hidden[i] = original.charAt(i);`

**3.**由于**char 不是对象**而是**原始的**，所以使用`"=="`

```
 if (this.original[i] == input) 
```

# javascript - Coffeescript 语法：结构错误

> ID：12077114
> 
> 赞同：0
> 
> 时间：2012-08-22T16:04:30.560
> 
> 标签：javascript, jquery, coffeescript

我简化了代码以显示问题。当我使用这个 Coffeescript 片段时：

```
$("<div>")
.text "hi"
.appendTo "body" 
```

我希望它像这样编译：

```
$("<div>").text("hi").appendTo("body") 
```

相反，它的作用是：

```
$("<div>").text("hi".appendTo("body")) 
```

我发现你可以保留括号并且它可以工作，但我想这不是你应该编写 Coffeescript 的方式。

谁能告诉我应该如何编写它以便编译为所需的输出？非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:36:40.560

添加括号。

就一种好的风格而言，你应该只在语法混乱时才省略它。在这种情况下，省略它们会失去您的意图。形式服从功能。您需要这里的括号来声明先例，Coffeescript 为此支持它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T16:37:29.000

> 我发现你可以保留括号并且它可以工作，但我想这不是你应该编写 Coffeescript 的方式。

CoffeeScript 中的括号是可选的，但这并不意味着您不*应该*使用它们。随意使用它们！在某些情况下，例如您的情况，它们甚至是必需的。

对我来说，使用可选括号的最大好处是匿名回调和其他括号会跨越多行的情况，如下所示：

```
foo 'bar', (err, res) ->
  # Do stuff 
```

对我来说，哪个优于

```
foo('bar', (err, res) ->
  # Do stuff
) 
```

但即使那是你的风格，去吧！

所以，总结一下，只需写：

```
$("<div>")
  .text("hi")
  .appendTo("body") 
```

**编辑：**甚至

```
$("<div>").text("hi").appendTo("body") 
```

但是，在这种特殊情况下，您当然可以这样做：

```
$("<div>", text: "hi").appendTo("body") 
```

蒂姆托迪 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:17:58.927

coco 和[livescript](http://gkz.github.com/LiveScript/)（在 npm 或 github 上）都是从 coffeescript 派生的，并且更“空间敏感”，它允许您执行以下操作：

```
$ "<div>" .text "hi" .appendTo "body" 
```

和

```
$("<div>")
  .text "hi"
  .appendTo "body" 
```

两者都编译为

```
$("<div>").text("hi").appendTo("body"); 
```

# php - Zend Framework 2中如何访问route、post、get等参数

> ID：12077126
> 
> 赞同：98
> 
> 时间：2012-08-22T16:05:25.380
> 
> 标签：php, file-upload, zend-route, zend-framework2

zf2中如何获取与页面请求相关的各种参数？像 post/get 参数、被访问的路由、发送的 headers 和上传的文件。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-08-22T16:05:25.380

最简单的方法是使用beta5 中引入的[Params 插件。](https://github.com/zendframework/zend-mvc/blob/master/src/Controller/Plugin/Params.php)它具有实用方法，可以轻松访问不同类型的参数。与往常一样，阅读[测试](https://github.com/zendframework/zend-mvc/blob/master/test/Controller/Plugin/ParamsTest.php)对于了解应该如何使用某些东西是很有价值的。

## 获取单个值

要在控制器中获取命名参数的值，您需要为要查找的参数类型选择适当的方法并传入名称。

### 例子：

```
$this->params()->fromPost('paramname');   // From POST
$this->params()->fromQuery('paramname');  // From GET
$this->params()->fromRoute('paramname');  // From RouteMatch
$this->params()->fromHeader('paramname'); // From header
$this->params()->fromFiles('paramname');  // From file being uploaded 
```

## 默认值

如果没有找到具有给定名称的参数，所有这些方法还支持将返回的默认值。

### 例子：

```
$orderBy = $this->params()->fromQuery('orderby', 'name'); 
```

访问[http://example.com/?orderby=birthdate](http://example.com/?orderby=birthdate)时， *$orderBy*将具有值***birthdate***。
访问[http://example.com/](http://example.com/)时， *$orderBy*将具有*默认*值***name***。

## 获取所有参数

要获取一种类型的所有参数，只需不传递任何内容，Params 插件将返回一个值数组，其名称作为键。

### 例子：

```
$allGetValues = $this->params()->fromQuery(); // empty method call 
```

当访问[http://example.com/?orderby=birthdate&filter=hasphone](http://example.com/?orderby=birthdate&filter=hasphone) *$allGetValues*将是一个数组，如

```
array(
    'orderby' => 'birthdate',
    'filter'  => 'hasphone',
); 
```

## 不使用参数插件

如果您检查 Params 插件的[源代码](https://github.com/zendframework/zend-mvc/blob/master/src/Controller/Plugin/Params.php)，您会发现它只是其他控制器的一个薄包装器，以允许更一致的参数检索。如果您出于某种原因想要/需要直接访问它们，您可以在源代码中查看它是如何完成的。

### 例子：

```
$this->getRequest()->getRequest('name', 'default');
$this->getEvent()->getRouteMatch()->getParam('name', 'default'); 
```

**注意：**您可以使用超全局变量 $_GET、$_POST 等，但不鼓励这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-10T08:24:01.020

例如，获取已发布的 json 字符串的最简单方法是读取 'php://input' 的内容，然后对其进行解码。例如，我有一个简单的 Zend 路线：

```
'save-json' => array(
'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route'    => '/save-json/',
                'defaults' => array(
                    'controller' => 'CDB\Controller\Index',
                    'action'     => 'save-json',
                ),
            ),
        ), 
```

我想使用 Angular 的 $http.post 向它发布数据。帖子很好，但 Zend 中的检索方法

```
$this->params()->fromPost('paramname'); 
```

在这种情况下没有得到任何东西。所以我的解决方案是，在尝试了各种方法（如 $_POST 和上述其他方法）之后，从 'php://' 读取：

```
$content = file_get_contents('php://input');
print_r(json_decode($content)); 
```

最后我得到了我的 json 数组。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-08T20:18:33.097

```
require_once 'lib/Zend/Loader/StandardAutoloader.php';
$loader = new Zend\Loader\StandardAutoloader(array('autoregister_zf' => true));

$loader->registerNamespace('Http\PhpEnvironment', 'lib/Zend/Http'); 

// Register with spl_autoload:
$loader->register();

$a = new Zend\Http\PhpEnvironment\Request();
print_r($a->getQuery()->get()); exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-07T08:07:51.443

如果您无权访问控制器之外的插件，您可以像这样从服务定位器获取参数

```
//from POST
$foo = $this->serviceLocator->get('request')->getPost('foo'); 
//from GET
$foo = $this->serviceLocator->get('request')->getQuery()->foo;
//from route
$foo = $this->serviceLocator->get('application')->getMvcEvent()->getRouteMatch()->getParam('foo'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-31T06:17:51.123

如果您的内容类型是“application/-www-form-urlencoded”，上述所有方法都可以正常工作。但是，如果您的内容类型是“application/json”，那么您必须执行以下操作：

$params = json_decode(file_get_contents('php://input'), true); print_r($params);

原因：参见[https://www.toptal.com/php/10-most-common-mistakes-php-programmers-make中的 #7](https://www.toptal.com/php/10-most-common-mistakes-php-programmers-make)

# jquery - jQuery迭代逻辑问题..函数中的逻辑

> ID：12077131
> 
> 赞同：1
> 
> 时间：2012-08-22T16:05:32.533
> 
> 标签：jquery

JQuery 菜鸟在这里。我需要一些基本的帮助，但如果有人能帮助我，我将不胜感激。我正在处理一个旧的怪诞页面，该页面需要比较出发/到达日期以查看它们是否无效。这是我想出的比较完美的日期（一个日期）的逻辑。

我遇到的问题是有 9 个日期需要比较，#AD1 和 #DD1 到 #AD9 和 #DD9，每一行都在一个单独的表行中，类名为“.dateVal”。我将如何封装此代码以在函数中运行这 9 个日期？我真的很感谢提前提供的帮助。非常感谢！

```
 var strErrors = '';
  var strRequired = '';

  var iniString = '';
  var endString = '';
  var dateIni = $('#AD1').val().split('/');
  var dateEnd = $('#DD1').val().split('/');
  $.each(dateIni, function (index, value) {
   iniString = iniString + value;
  })
  $.each(dateEnd, function (index, value) {
   endString = endString + value;
  })

  iniString = parseInt(iniString, 10);
  endString = parseInt(endString, 10);

  if (iniString > endString) {
   strErrors = strErrors + ' - Departure/Arrival dates are incorrect.  \n'
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:11:37.767

一种方法是在 jQuery 选择器和一个简单的 JavaScript for 循环中使用连接：

```
var strErrors = '';

var iniString = '';
var endString = '';

for (var ii = 1; ii <= 9; ii++) {
    var dateIni = $('#AD' + ii).val().split('/');
    var dateEnd = $('#DD' + ii).val().split('/');

    $.each(dateIni, function (index, value) {
        iniString = iniString + value;
    });

    $.each(dateEnd, function (index, value) {
        endString = endString + value;
    });

    iniString = parseInt(iniString, 10);
    endString = parseInt(endString, 10);   

    if (iniString > endString) {
        strErrors = strErrors + ' - Departure/Arrival dates are incorrect.  \n'
    }
} 
```

现在，如果您想将该逻辑封装到几个函数中：

```
var strErrors = '';

function checkAllDates() {
    for (var ii = 1; ii <= 9; ii++) {
        checkDate(ii);
    }
}

function checkDate(ii) {
    var iniString = '';
    var endString = '';

    var dateIni = $('#AD' + ii).val().split('/');
    var dateEnd = $('#DD' + ii).val().split('/');

    $.each(dateIni, function (index, value) {
        iniString = iniString + value;
    });

    $.each(dateEnd, function (index, value) {
        endString = endString + value;
    });

    iniString = parseInt(iniString, 10);
    endString = parseInt(endString, 10);   

    if (iniString > endString) {
        strErrors = strErrors + ' - Departure/Arrival dates are incorrect.  \n'
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:25:40.090

您可以`$.each`通过使用`replace`而不是`split`摆脱`/`字符来避免使用。

```
var strErrors = '',
    iniNum,
    endNum,
    dateIni,
    dateEnd,
    numDates = $('.dateVal').length / 2; // assumes matching pairs of dates

// assuming your date values are always yyyy/mm/dd format?
for (var i = 1; i <= numDates; i++) {
    dateIni = $('#AD' + i).val().replace('/','');
    dateEnd = $('#DD' + i).val().replace('/','');

    iniNum = parseInt(iniString, 10);
    endNum = parseInt(endString, 10);   

    if (iniNum > endNum) {
        strErrors += ' - Departure/Arrival dates are incorrect.  \n';
    }
} 
```

# c# - 正则表达式提取可选组

> ID：12077136
> 
> 赞同：3
> 
> 时间：2012-08-22T16:05:46.870
> 
> 标签：c#, regex

我有一些格式的日志字符串：

`T01: Warning: Tag1: Message`

`T23: Tag2: Message2`

我正在尝试在一个正则表达式中提取`T`数字，检测是否存在`Warning:`，然后是标签和消息的文本。“警告：”的可选要求虽然让我绊倒。

```
 private const string RegexExpression = @"^T(?<Number>\d+): (?<Warning>Warning:)? (?<Tag>[^:]+): (?<Message>.*)";
    private const string Message = "blar blar blar: some messsage";

    //this test works
    [TestMethod]
    public void RegExMatchByTwoNamedGroupsWarningTest()
    {
        var rex = new Regex(RegexExpression);
        const string wholePacket = "T12: Warning: logtag: " + Message;
        var match = rex.Match(wholePacket);
        Assert.IsTrue(match.Groups["Warning"].Success); //warning is present
        Assert.IsTrue(match.Success);
        Assert.IsTrue(match.Groups["Number"].Success);
        Assert.AreEqual("12", match.Groups["Number"].Value);
        Assert.IsTrue(match.Groups["Tag"].Success);
        Assert.AreEqual("logtag", match.Groups["Tag"].Value);
        Assert.IsTrue(match.Groups["Message"].Success);
        Assert.AreEqual(Message, match.Groups["Message"].Value);
    }

    [TestMethod]
    public void RegExMatchByTwoNamedGroupsNoWarningTest()
    {
        var rex = new Regex(RegexExpression);
        const string wholePacket = "T12: logtag: " + Message;
        var match = rex.Match(wholePacket);
        Assert.IsFalse(match.Groups["Warning"].Success); //warning is missing
        Assert.IsTrue(match.Success); //fails
        Assert.IsTrue(match.Groups["Number"].Success); //fails
        Assert.AreEqual("12", match.Groups["Number"].Value);
        Assert.IsTrue(match.Groups["Tag"].Success); //fails
        Assert.AreEqual("logtag", match.Groups["Tag"].Value);
        Assert.IsTrue(match.Groups["Message"].Success); //fails
        Assert.AreEqual(Message, match.Groups["Message"].Value);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:12:11.253

尝试设置`RegexOptions.IgnorePatternWhitespace`：

```
var rex = new Regex(RegexExpression, RegexOptions.IgnorePatternWhitespace); 
```

或者，更新正则表达式模式：

```
private const string RegexExpression = @"^T(?<Number>\d+):\s*(?<Warning>Warning:)?\s*(?<Tag>[^:]+):\s*(?<Message>.*)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:18:59.357

你的问题是你的正则表达式中的空格。

如果警告组不存在，那么它会尝试匹配可选警告模式之前的空格和之后的空格。显然，您只想匹配其中之一。

解决方案是在可选模式中包含一个空格以及警告。IE：

```
^T(?<Number>\d+): (?<Warning>Warning: )?(?<Tag>[^:]+): (?<Message>.*) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:20:02.987

```
@"^T(?<Number>\d+): ((?<Warning>Warning:.*) )?(?<Tag>[^:]+): (?<Message>.*)$"; 
```

我不确定行尾（美元）符号，因为我不熟悉 c#，但是......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T17:08:53.860

此正则表达式考虑空间并尽力而为！

```
@"^T(?'Number'\d+)\s*:\s*((?'Warning'\bWarning\b)\s*:)?\s*(?'Tag'.*?Tag.*?):\s*(?'Message'.*?)$" 
```

将此正则表达式与`RegexOptions.IgnoreCase`

# asp.net - Visual Studio 2010 ASP.NET 4.0 中的设计视图不保持 HTML 格式，（它变得一团糟）

> ID：12077139
> 
> 赞同：0
> 
> 时间：2012-08-22T16:05:55.263
> 
> 标签：asp.net, c, visual-studio-2010

我在 asp.net 中的设计视图有问题。我有一个母版页，当我调试 eerything 时它很好，但是当我在窗口中选择设计视图时，所有控件都放错了位置。

知道如何解决这个问题吗？再次使用 Chrome、IE9、Firefox 进行调试时，页面显示得很好。

谢谢 :D 截图

[http://i49.tinypic.com/2n9j7r.png](http://i49.tinypic.com/2n9j7r.png)

# sql - 内部加入到内部选择语句的 where 子句引用外部选择的选择语句？

> ID：12077145
> 
> 赞同：10
> 
> 时间：2012-08-22T16:06:19.057
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

这是对我的更大问题的精简查询，但要点是我正在尝试内部连接到选择受外部选择限制的选择。那可能吗？我在内部选择中收到有关多部分标识符 S.Item 和 S.SerialNum 的错误。

要点是这样，我们必须按项目/序列进行分组，并且查询足够大，我们不想返回并将整个查询中的所有内容分组为这个小连接。

```
SELECT S.Item, S.SerialNum, S.ReceiveDate
    FROM SALES S
    INNER JOIN (SELECT W.Item, W.SerialNum, MIN(W.SalesDate)
                    FROM WARRANTY W
                    WHERE W.Item        = S.Item    AND
                          W.SerialNum   = S.SerialNum
                    GROUP BY Item, SerialNum, SalesDate) WW
        ON S.Item = WW.Item AND WW.SerialNum 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T16:15:14.453

看起来你的`JOIN`参考资料放错了地方。

```
SELECT S.Item, S.SerialNum, S.ReceiveDate
FROM SALES S
INNER JOIN 
(
    SELECT W.Item, W.SerialNum, MIN(W.SalesDate) MinSalesDate
    FROM WARRANTY W
    GROUP BY Item, SerialNum
) WW
        ON S.Item = WW.Item 
       AND S.SerialNum = WW.SerialNum 
```

编辑，根据您对过滤的评论，您可以`WHERE`在您的 inner 上放置一个子句`SELECT`：

```
SELECT S.Item, S.SerialNum, S.ReceiveDate, WW.MinSalesDate
FROM SALES S
INNER JOIN 
(
    SELECT W.Item, W.SerialNum, MIN(W.SalesDate) MinSalesDate
    FROM WARRANTY W
    WHERE yourFilter here
    GROUP BY Item, SerialNum
) WW
        ON S.Item = WW.Item 
       AND S.SerialNum = WW.SerialNum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:44:51.127

您也可以尝试使用 common_table_expression 而不是 JOIN。[在此处检查 WITH 子句。](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

它可能是这样的：

```
WITH Warranty_CTE (Item, SerialNum, MinSalesDate)
AS
(
 SELECT W.Item, W.SerialNum, MIN(W.SalesDate) MinSalesDate
    FROM WARRANTY W
    GROUP BY Item, SerialNum
)
SELECT S.Item, S.SerialNum, S.ReceiveDate
FROM SALES S
INNER JOIN Warranty_CTE  WC
        ON S.Item = WC.Item 
       AND S.SerialNum = WC.SerialNum 
```

# c# - 启动 MVC4 基本模板项目

> ID：12077146
> 
> 赞同：3
> 
> 时间：2012-08-22T16:06:20.660
> 
> 标签：c#, visual-studio-2010, asp.net-mvc-4

我正在尝试使用基本模板启动一个新的 MVC4 C# 项目，当我调试项目时出现“找不到资源”错误，我将如何解决这个问题，所以我只显示一个可以处理的空白页面？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T22:03:15.643

你需要添加控制器和视图页面来显示一些东西！

添加 HomeController : 控制器文件

```
public string Index()
{
return "Hello";
} 
```

如果你现在运行，你将能够在页面上看到 hello

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T18:50:26.707

“基本”模板中没有任何控制器或视图。您必须至少为要显示的页面创建一个 HomeController 和一个关联的视图。如果您想从一个示例应用程序开始，无需添加任何内容即可查看，请选择“Internet 应用程序”模板。它创建一个默认的 HomeController 和 Index 视图以及帐户登录页面。

# mysql - Grails：更改休眠方言时 SQL 语法错误

> ID：12077148
> 
> 赞同：2
> 
> 时间：2012-08-22T16:06:26.230
> 
> 标签：mysql, grails

我正在将 Grails 与 mySQL 数据库一起使用，并且正在尝试更改数据库引擎。据我研究，这可以做到最好

```
 dialect = "org.hibernate.dialect.[MyDialect]" 
```

在 DataSource.groovy 配置中。但是当我将方言设置为 org.hibernate.dialect.MySQLMyISAMDialect 时，我的表的创建失败并出现错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'type=MyISAM' 附近使用正确的语法

稍后我还尝试使用以下方法更改表格：

```
sql.execute("ALTER TABLE book ENGINE = MYISAM;") 
```

这实际上有效，但是在创建后更改引擎时，表的所有外键都会被删除。

我应该如何避免错误并正常更换引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:04:51.270

为什么要使用 MyISAM ？？？它不支持外键或事务。而且它很少比 InnoDB 快，因为 InnoDB 使用行锁和 MVCC，而不是 MyISAM 的全表锁。

话虽如此，你可以让它工作。您必须使用较新版本的 MySQL，因为该`type`属性已被弃用一段时间并且现在不受支持 - 您必须改用该属性`ENGINE`。没有支持这一点的方言（请注意，`org.hibernate.dialect.MySQL5InnoDBDialect`这对 InnoDB 是正确的），因此您需要创建自己的方言。

在 src/groovy 或 src/java 中创建此类（更改包和/或类名）：

```
package com.mycompany.myapp

import org.hibernate.dialect.MySQLMyISAMDialect

class MySQL5MyISAMDialect extends MySQLMyISAMDialect {
   String getTableTypeString() {
      " ENGINE=MyISAM"
   }
} 
```

并在 DataSource.groovy 中引用它，如您在问题中所示：

```
dialect = com.mycompany.myapp.MySQL5MyISAMDialect 
```

# innerhtml - jquery .html() 删除 html 内容

> ID：12077149
> 
> 赞同：0
> 
> 时间：2012-08-22T16:06:31.543
> 
> 标签：innerhtml

我有一些问题伙计们。我必须用 .html() jquery 函数删除我的内容。一切正常，但我的 iphone phonegap 应用程序的页脚转到上部。但是当我直接在我的 html 代码中评论或删除我的内容时，一切正常，我的应用程序的页脚留在他的位置。请帮我。这是我的代码片段：

```
<script id="div_mainheader" type="text/html">

        <div id="check_place">
            <div id="idcheckin" style="width: 210px; position: relative;" align="left" class="mystatus2 clickable" onclick='showPartnersNearYouPopUp();'>
                <div id="leave" style="top: 81px;"><img src="graphics/picker.png" style="margin-left: 5px; margin-top: 5px; margin-bottom: -1px;">

                    CHECK A PLACE ...

                </div>
            </div> 

            <div id="idbtleave" style="position: absolute; top: 81px; left: 270px;">
                <button id="btleave" class="checkout-button" type="button">{{Localize.quit}}</button>
            </div>
        </div>

    </script> 
```

这是我调用来删除我的内容的函数：

```
$('#check_place').html(''); 
```

我也尝试过`document.getElementById('check_place').innerrHTML = '';` ，但与 .html() 相同

请帮我。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:10:31.927

利用

```
$('#check_place').empty(); 
```

# c# - 读取外部 xml 文件并使其可用于在同一环境中运行的 JavaScript

> ID：12077150
> 
> 赞同：0
> 
> 时间：2012-08-22T16:06:31.573
> 
> 标签：c#, .net

我在使用 jQuery 读取外部 xml 文件并构建树时遇到了一些问题。为了解决这个问题，我正在编写 C# 代码来读取外部 xml 文件并将数据呈现给 jQuery。到目前为止，这是我的代码：

我想读取外部 xml 文件并按原样打印出来。有人可以帮助我如何按原样打印 xml 文件吗？

```
 <%@ Page Language="C#" %>  
<%@ Import Namespace="System.Xml" %>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  

<script runat="server">  
    protected void Page_Load(object sender, System.EventArgs e)   
  {   
        string xmlFile = "http://192.168.101.1/img/jstree.xml";   
        XmlReaderSettings settings = new XmlReaderSettings();   
        settings.IgnoreComments = true;   
        settings.IgnoreWhitespace = true;   
        Console.WriteLine(xmlFile); 
       try   
        {   
            using (XmlReader reader = XmlReader.Create(xmlFile, settings))   
            {   
                string xmlContent;   
                while (reader.Read())   
                {   
                    if (reader.NodeType == XmlNodeType.Element)   
                    {   
                        xmlContent = "";   
                        if (reader.Name == "root")   
                        {   
                            xmlContent += "<root>" + "<br />" "reader.ReadString().ToString() + "<br />";   
                        }   
                        if (reader.Name == "item id")   
                        {   
                            xmlContent += reader.ReadString().ToString() + "<br />";   
                        }   

                        if (reader.Name == "content")   
                        {   
                            xmlContent += reader.ReadString().ToString() + "<br />";   
                        }   

                         if (reader.Name == "name")   
                        {   
                            xmlContent += reader.ReadString().ToString() + "<br />";   
                        }   
                        Label1.Text += xmlContent;   
                    }   
                }   
            }   
        }   
        catch (Exception ex)   
        {   
            Label1.Text = "An Error Occured: " + ex.Message;   
        }   
    }   
</script>  

<html xmlns="http://www.w3.org/1999/xhtml" >  
<head id="Head1" runat="server">  
    <title>XmlReader: How to read and process Xml file element data in asp.net</title>  
</head>  
<body>  
    <form id="form1" runat="server">  
    <div>  
             <asp:Label    
             ID="Label1"  
             runat="server"  
             Font-Bold="false"  
             ForeColor="Crimson"  
             Font-Size="Large"  
             Font-Names="Comic Sans MS"  
             >  
        </asp:Label>  
    </div>  
    </form>  
</body>  
</html> 
```

有人可以帮助我如何阅读这个 jstree.xml 并将其呈现给 jQuery。在 jQuery 中，我应该能够做到这一点：

```
$(document).ready(function () {
    $("#div").jstree({
        "xml_data": {
            "ajax": { 
                "url": "jstree.xml" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:00:49.917

Jquery 应该向 ASP.NET 页面请求，例如“jstree.aspx”，这个页面 jstree.aspx 应该返回一个 XML 流。

在您的 ASPX 中，在您编写的代码之后：

> ```
>  Response.Clear();
>     Response.ContentType = "text/xml";
>     Response.Charset = "utf-8";
> 
>     XmlWriterSettings settings = new XmlWriterSettings();
>     settings.Encoding = Encoding.UTF8;
>     settings.Indent = true;
>     using (XmlWriter writer = XmlWriter.Create(Request.OutputStream, settings))
>     { 
>        //Write here
>     } 
> ```

# .htaccess - 弹性负载均衡器上的 HTTPS 未保持 HTTPS 状态

> ID：12077152
> 
> 赞同：1
> 
> 时间：2012-08-22T16:06:39.583
> 
> 标签：.htaccess, https, amazon-web-services, apache

我在使用 PHP 运行 Apache 的负载均衡器后面有几台服务器，我们发现人们无法进行 SSL 会话。您可以通过将 https:// 添加到 URL 来使用 https 访问站点上的任何页面，但是当您单击链接时，即使该链接将显示 https，您也会被重定向回标准 http 页面。

在负载均衡器侦听器页面上，我将其设置为：

```
HTTP 80 to HTTP 80
TCP (SSL) 443 to TCP 80 
```

我尝试过非 TCP 并使用 https，我尝试过 443 到 443，但这会引发服务器 503 错误（服务器过载）。我已经`*:443`在服务器上添加了一个 VirtualHost，但这没有用。

我什至还尝试了一个：

```
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} ^mydomain\.com [NC]
RewriteCond %{SERVER_PORT} 80
RewriteRule (.*) https://www.mydomain.com/$1 [R=301,L] 
```

作为 .htaccess 规则。但是用户在导航时仍然被重定向回 HTTP。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:53:14.177

我猜正确的做法是使用 HTTPS 443 到 HTTP 80，而不是 TCP。您能否提供有关以这种方式配置时会发生什么的更多详细信息？

# database - Redis 使用高内存和小数据集

> ID：12077154
> 
> 赞同：3
> 
> 时间：2012-08-22T16:06:40.347
> 
> 标签：database, redis

我正在运行 redis-server 并根据`prstat`它使用 3721M 的内存。当我`info`在 redis-cli 中运行时，我得到这个以供记忆：

```
used_memory:8739028 
used_memory_human:8.33M
used_memory_rss:8739028
mem_fragmentation_ratio:1.00 
```

这是在一个 2GB 的云实例上运行的，所以我的内存利用率总是结束。但是，即使我`flushall`在 redis 上，它似乎也不会影响内存消耗。

这是否适用于可能正在分配内存的设置或任何想法为什么 redis 在我的实际数据上使用了这么多？

谢谢！

编辑：

还要补充一点，我在另一个实例上运行相同的设置（应用程序/redis），内存消耗只有 554M`used_memory_human:5.68M`的数据。

来自 pmap 的回应：

[root@]# pmap -x 27425

```
27425:  /opt/local/bin/redis-server /opt/local/etc/redis.conf
 Address  Kbytes     RSS    Anon  Locked Mode   Mapped File
08046000       8       8       8       - rw---    [ stack ]
08050000     208     160       -       - r-x--  redis-server
08093000       8       8       4       - rwx--  redis-server
08095000 3807836 3804160 3764928       - rwx--    [ heap ]
FE9BD000      12      12       -       - r-x--  libpthread.so.1
FEAF0000     456     456       -       - r-x--  libnsl.so.1
FEB72000       8       8       4       - rw---  libnsl.so.1
FEB74000      20      16       4       - rw---  libnsl.so.1
FEBA0000     304     304       -       - r-x--  libm.so.2
FEBFB000      16      16       -       - rwx--  libm.so.2
FEDA0000       4       4       -       - r--s-  dev:531,392 ino:3736139179
FEDB0000       4       4       -       - rwxs-    [ anon ]
FEDC0000      24      12       8       - rwx--    [ anon ]
FEDD0000       4       4       4       - rwx--    [ anon ]
FEDE0000    1216    1216       -       - r-x--  libc.so.1
FEF10000      36      36      24       - rwx--  libc.so.1
FEF19000       8       8       4       - rwx--  libc.so.1
FEF20000       4       4       4       - rwx--    [ anon ]
FEF30000      56      56       -       - r-x--  libsocket.so.1
FEF4E000       4       4       -       - rw---  libsocket.so.1
FEF50000       4       4       4       - rwx--    [ anon ]
FEF60000       4       4       -       - r-x--  libdl.so.1
FEF70000       4       4       -       - r--s-  ld.config
FEF80000       4       4       4       - rw---    [ anon ]
FEF90000       4       -       -       - rw---    [ anon ]
FEFA0000       4       4       4       - rwx--    [ anon ]
FEFB0000       4       4       -       - rwx--    [ anon ]
FEFB7000     208     208       -       - r-x--  ld.so.1
FEFFB000       8       8       4       - rwx--  ld.so.1
FEFFD000       4       4       -       - rwx--  ld.so.1 
```

配置中没有启用限制，这里是虚拟内存和高级：

```
VIRTUAL MEMORY
vm-enabled no
vm-swap-file /tmp/redis.swap
vm-max-memory 0
vm-page-size 32
vm-pages 134217728
vm-max-threads 4

ADVANCED CONFIG
hash-max-zipmap-entries 512
hash-max-zipmap-value 64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:35:38.033

问题有点老了，但我以前遇到过这个问题。如果我没记错的话，我关闭了我的 redis 实例，删除了 RDB 文件（如果适用）并重新启动了 redis。 *如果不想删除 RDB 文件，因为它包含您需要的数据，我不建议这样做。* 你可以尽 `DEL`你所能，然后做一个`SAVE`（我相信redis`SAVE`在它关闭时会这样做，所以这可能是多余的）然后重新启动。

如果你还没有升级 redis 到最新的稳定版，那将是个好时机。

# python - 让我的 python c++ 扩展在 Windows 上使用 Swig 和 Distutils 进行编译

> ID：12077155
> 
> 赞同：2
> 
> 时间：2012-08-22T16:06:44.423
> 
> 标签：python, linker-errors, distutils, extending

我正在尝试在 Windows 上创建一个 python c++ 扩展。我的问题是，即使在使用 swig 和 distutils 之后，我似乎也无法生成 .pyd 文件（链接错误）。以下是我所做的一步一步：

在 Microsoft Visual Studio 2010 中，我创建了一个类 Hello.cpp：

```
#include "StdAfx.h"
#include "Hello.h"
#include <iostream>
using namespace std;

Hello::Hello(void)
{
}

void Hello::greeting(void){
   cout<<"Hello World!!"<<endl;

}

Hello::~Hello(void)
{
} 
```

你好.h：

```
 #pragma once
      class Hello
      {
         public:
            Hello(void);
            ~Hello(void);
            void greeting(void);
      }; 
```

然后我创建了一个 .i 文件 HelloWorld.i

```
%module HelloWorld

%{
#include "Hello.h"
%}

%include "Hello.h" 
```

然后我痛饮

```
swig -c++ -python -o Hello_wrap.cpp HelloWorld.i 
```

这似乎很成功，生成了我期望的文件。接下来我创建了 setup.py。

```
from distutils.core import setup, Extension

module1=Extension('HelloWorld', sources=['Hello.cpp'])

setup(name='Hello_Package', version='1.0', description='This is a demo', \
      ext_modules=[module1]) 
```

写完之后，切换到所有文件存储在一起的目录后，我进入了命令行

```
python setup.py build 
```

不幸的是，这是我得到的错误

```
running build
running build_ext
building 'HelloWorld' extension
creating build
creating build\temp.win32-2.7
creating build\temp.win32-2.7\Release
c:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Ox /MD /W
3 /GS- /DNDEBUG -IC:\Python27\include -IC:\Python27\PC /TpHello.cpp /Fobuild\tem
p.win32-2.7\Release\Hello.obj
Hello.cpp
c:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE\xlocale(342) : warning C
4530: C++ exception handler used, but unwind semantics are not enabled. Specify
/EHsc
creating build\lib.win32-2.7
c:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL /nologo /INCRE
MENTAL:NO /LIBPATH:C:\Python27\libs /LIBPATH:C:\Python27\PCbuild /EXPORT:initHel
loWorld build\temp.win32-2.7\Release\Hello.obj /OUT:build\lib.win32-2.7\HelloWor
ld.pyd /IMPLIB:build\temp.win32-2.7\Release\HelloWorld.lib /MANIFESTFILE:build\t
emp.win32-2.7\Release\HelloWorld.pyd.manifest
LINK : error LNK2001: unresolved external symbol initHelloWorld
build\temp.win32-2.7\Release\HelloWorld.lib : fatal error LNK1120: 1 unresolved
externals
error: command '"c:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\link.exe"'
failed with exit status 1120 
```

我该怎么办这个链接错误？我假设 swig 和 distutils 工作正常，所以我不必更改代码。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:33:57.490

尝试以下

模块1=扩展（'_HelloWorld'，来源=['Hello.cpp']）

# html - 来自游戏广播的 cURL

> ID：12077158
> 
> 赞同：0
> 
> 时间：2012-08-22T16:06:56.473
> 
> 标签：html, curl, web

我想知道是否有办法从使用 javascript 或 flash 动态更新内容的游戏直播中获得分数。下面是一个例子：[http://www.cstv.com/gametracker/launch/gt_wlacros.html?sport=wlacros&camefrom=&startschool=md&event=952412&school=cs&](http://www.cstv.com/gametracker/launch/gt_wlacros.html?sport=wlacros&camefrom=&startschool=md&event=952412&school=cs&) 我怎样才能从这个页面中提取球队的分数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:19:29.623

真正需要做的是嗅探引擎盖下发出的请求。您可以获得任何类型的 HTTP 嗅探器。我为 firefox 使用[Live HTTP Headers](https://addons.mozilla.org/en-us/firefox/addon/live-http-headers/)扩展。您开始捕获，然后单击上面的链接。你会看到各种各样的请求。基础数据似乎来自[http://origin.livestats.www.cstv.com](http://origin.livestats.www.cstv.com)。我收到了这个请求，其中包含很多有用的游戏玩家统计信息：

[http://origin.livestats.www.cstv.com/livestats/data/w-lacros/952412/player_stats.xml?344026907808](http://origin.livestats.www.cstv.com/livestats/data/w-lacros/952412/player_stats.xml?344026907808)

[http://origin.livestats.www.cstv.com/livestats/data/w-lacros/952412/summary.xml?644493847800](http://origin.livestats.www.cstv.com/livestats/data/w-lacros/952412/summary.xml?644493847800) （注意第二个 url 会引发 XML 解析错误，但您仍然可以尝试手动解析）

# apache-flex - 带有 itemrenderer 的 Flex 4.6，里面带有 textinput

> ID：12077159
> 
> 赞同：0
> 
> 时间：2012-08-22T16:06:57.550
> 
> 标签：apache-flex, itemrenderer

我有一个 itemrenderer，它包含：

```
<s:TextInput x="10" y="41" width="60" name="txtprice"/> 
```

我想从外部访问这个字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:45:34.393

你可以这样做：

```
<s:List id="list" itemRenderer="com.myDomain.myProject.MyRenderer" />
<s:Button label="click me" click="onButtonClick()"/>

<fx:Script>
    <![CDATA[
        import mx.core.IVisualElement;

        protected function button1_clickHandler(event:MouseEvent):void
        {
            var myRenderer:CustomItemRenderer = list.dataGroup.getElementAt(0) as CustomItemRenderer;
        }
    ]]>
</fx:Script> 
```

由于 itemRenderer 通常会被回收，因此不会为屏幕外的元素创建 itemRenderer。也就是说，如果您的列表有 20 个元素，并且只有前 10 个是可见的，`getElementAt()`那么如果您尝试获取第 11-20 个元素，则将返回 null。如果将元素滚动到视图中，则会创建/回收渲染器，然后您可以检索它。

我似乎记得有一种更好的方法来处理这个问题，但我并没有想到。

请注意，还有另一种方法：`list.dataGroup.getVirtualElementAt()`但这对我来说似乎与非虚拟方法的行为相同。

最后，请务必`TextInput`在渲染器中分配一个，`id`以便在检索渲染器后可以引用它：

```
<s:TextInput id="txtprice" /> 
```

# jquery - 即使调整大小，谷歌地图也不居中

> ID：12077161
> 
> 赞同：4
> 
> 时间：2012-08-22T16:06:58.867
> 
> 标签：jquery, google-maps

好的，所以我有一个 Jquery Dialog 和一个 Google Maps v3 画布。单击链接时会打开对话框，并且地图以与链接关联的标记为中心。现在，第一次一切正常。地图显示并以标记的位置为中心。当我关闭对话框时，单击另一个链接。地图已显示，但标记位于地图区域之外，即众所周知的左上角。我需要稍微拖动地图以使标记出现。好的，所以我在代码中添加了多个调整大小和 setCenter，但它仍然不起作用。

怎么了？？？

这是代码var映射；

```
 $(document).ready(function() {

            $("#map_container").dialog({
                autoOpen : false,
                resizable : false,
                resizeStop : function(event, ui) {
                    google.maps.event.trigger(map, 'resize')
                },
                open : function(event, ui) {
                    google.maps.event.trigger(map, 'resize');
                },
                close : function(event, ui) {
                    map = null;
                }
            });

            $(".show_on_map").click(function(e) {

                alert("click");

                var lat = $(this).attr('lat');
                var lng = $(this).attr('lng');
                var placeName = $(this).attr('placeName');
                var placeAddress = $(this).attr('placeAddress');

                initialize(lat, lng);
                plotPoint(lat, lng, placeName, '<span class="gBubble"><b>' + placeName + '</b><br>' + placeAddress + '</span>');

                $("#map_container").dialog("open");

            });

        function plotPoint(srcLat, srcLon, title, popUpContent, markerIcon) {
            var myLatlng = new google.maps.LatLng(srcLat, srcLon);
            var marker = new google.maps.Marker({
                position : myLatlng,
                map : map,
                title : title,
                icon : markerIcon
            });
            var infowindow = new google.maps.InfoWindow({
                content : popUpContent
            });
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
            });

                            google.maps.event.trigger(map, 'resize');

            map.setCenter(myLatlng);

        }

        function initialize(lat, lng) {

            var latlng = new google.maps.LatLng(lat, lng);
            var myOptions = {
                zoom : 13,
                center : latlng,
                mapTypeId : google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            google.maps.event.trigger(map, 'resize');

            map.setCenter(latlng);
        }
</script> 
```

这是DIV。

```
<div id="map_container" style="width:300px;height:300px;">
        <div id="map_canvas" style="width:250px;height:250px;"></div>
    </div> 
```

任何帮助是极大的赞赏。科恩

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T08:41:09.110

你可以试试这个示例代码：

```
lastCenter=map.getCenter(); 
google.maps.event.trigger(map_canvas, 'resize');
map.setCenter(lastCenter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T07:35:32.317

就我而言，我需要添加延迟以使其正常工作

```
google.maps.event.trigger(map_canvas, "resize");

setTimeout(function() {
    map_canvas.setCenter(your_latlng);
}, 100) 
```

# eclipse - 无法加载“文件名”的代理处理程序

> ID：12077169
> 
> 赞同：1
> 
> 时间：2012-08-22T16:07:27.227
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我收到运行时错误

org.eclipse.cpre.runtime - org.eclipse.ui - 0 -`filename`无法加载代理处理程序

似乎找不到处理程序类文件。但是处理程序文件中的代码会执行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T17:49:42.420

我正在调用一个不在正确目录位置的类。

# solr - SOLR 在 Alfresco 4.0.2 中停止索引

> ID：12077170
> 
> 赞同：1
> 
> 时间：2012-08-22T16:07:27.570
> 
> 标签：solr, indexing, alfresco

我在 Alfresco 中的 SOLR 索引有问题。无法索引新创建的内容。日志文件中没有异常。

我为*org.alfresco.solr.tracker.CoreTracker*启用了调试，发现 from Transaction id 没有增加。它看起来像无限循环。

```
 INFO: Scanning transactions ...
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker        trackTransactions
    INFO: .... from Transaction [id=335, commitTimeMs=1345501423910, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... from Transaction [id=335, commitTimeMs=1345501423910, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... to Transaction [id=342, commitTimeMs=1345504959777, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... to Transaction [id=342, commitTimeMs=1345504959777, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: Scanning transactions ...
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: Scanning transactions ...
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... from Transaction [id=335, commitTimeMs=1345501423910, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... from Transaction [id=335, commitTimeMs=1345501423910, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... to Transaction [id=342, commitTimeMs=1345504959777, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions
    INFO: .... to Transaction [id=342, commitTimeMs=1345504959777, updates=0, deletes=0]
    Aug 22, 2012 9:36:09 AM org.alfresco.solr.tracker.MultiThreadedCoreTracker trackTransactions 
```

我试图修复这个调用 admin/cores?action=FIX （修复 SOLR 中的问题），但它没有帮助，我在日志中看不到任何异常。

还有其他方法可以开始索引吗？

编辑：我解决了这个问题，升级到 Alfresco 4.0.29 并重建索引。我想我在 Alfresco Jira 上看到了类似的问题，但我找不到。感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:46:14.607

尝试使用 JConsole 连接到 Alfresco。

导航到 MBean 选项卡。

在 Alfresco > SolrIndexes > alfresco > Operations 下，您将找到一个方法 checkAndFixIndex。调用它来修复您的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:18:50.703

您是否尝试在 alfresco.global.properties 中添加以下选项： **index.tracking.disableInTransactionIndexing=false**？

# vba - 尝试将图表、范围等插入 Word 时，Excel 2010 VBA 中的复制/粘贴出错

> ID：12077171
> 
> 赞同：5
> 
> 时间：2012-08-22T16:07:34.507
> 
> 标签：vba, excel

在研究此错误时，我得出的结论是，它与剪贴板没有像应有的清除方式有关，这在我们使用 2003 时不是问题，但现在我们使用的是 2010。（我也继承了此代码来自不再在这里工作的人）

> 运行时错误“4605”：
> 此方法或属性不可用，因为剪贴板为空或无效。

这是我的代码：

```
Worksheets("Exec Sum").Range("B140:I186").Copy

With myDoc.Bookmarks
  .Item("b3").Range.PasteSpecial Link:=True, DataType:=wdPasteMetafilePicture, Placement:=bmark, DisplayAsIcon:=False
End With

' Clears Clipboard
Application.CutCopyMode = False 
```

我已经尝试过先选择一个空单元格的 sendkeys ("^C") 但没有运气。有什么方法可以不使用复制/粘贴方法来执行此操作，或者使用其他方法来清除剪贴板？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T18:04:59.060

从 2003 年升级到 2010 年时，我开始收到此错误，但宏在 2003 年仍然有效。

桌子在那里，但我注意到有时复制不起作用。由于这在调试模式下从未发生过，因此我在复制前添加了 5 秒的等待时间。

这会使宏变慢，但至少它可以工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T10:46:12.563

我仍在测试我的解决方案，但它与提出的建议不同，并且到目前为止工作完美无缺。只是一种不同的方法：

我添加一个标签并用错误处理程序包围我的复制尝试......

```
Pg1CopyAttempt:
    DoEvents
    shSomeSheet.Range("A1:G30").Copy
    On Error GoTo Pg1PasteFail
    WordApp.Selection.PasteExcelTable False, False, False
    On Error goto 0 'disable the error handler 
```

我将标签称为“Pg1CopyAttempt”，因为我知道 Excel 可能无法将其复制到剪贴板，这不是我自己的错。如果 Excel 确实让我失望，直到我尝试粘贴我才会知道。当我尝试时，当粘贴方法失败时，我会被抛出错误处理程序（Pg1PasteFail）。这位于我例程的底部（在直接退出子程序或退出例程之后）。

```
Pg1PasteFail:
If Err.Number = 4605 Then ' clipboard is empty or not valid.
    DoEvents
    Resume Pg1CopyAttempt
 End If 
```

以编程方式测试空剪贴板比依赖错误处理程序更好，但这里的想法是强制循环，以便它不断尝试复制直到成功。对剪贴板进行编程测试的更简单的循环可以利用 Sean 的 ClipboardEmpty 函数（上图）。DoEvents 仍然被利用，但即使使用 DoEvents，例程也可能失败，只是被指示继续尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T18:14:07.767

这是我使用的代码：

```
Private Declare Function apiOpenClipboard Lib "user32" Alias "OpenClipboard" (ByVal hWnd As Long) As Long
Private Declare Function apiEmptyClipboard Lib "user32" Alias "EmptyClipboard" () As Long
Private Declare Function apiCloseClipboard Lib "user32" Alias "CloseClipboard" () As Long
Private Declare Function CountClipboardFormats Lib "user32" () As Long

Function ClipboardEmpty() As Boolean
    ClipboardEmpty = (CountClipboardFormats() = 0)
End Function

Sub EmptyClipboard()
  If apiOpenClipboard(0&) <> 0 Then
    Call apiEmptyClipboard
    Call apiCloseClipboard
  End If
End Sub 
```

该功能`ClipboardEmpty`是一个测试。例如`if clipboardempty then`
sub`EmptyClipboard`将简单地清除剪贴板

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-13T19:20:42.483

我尚未确认这是最终解决方案，但挂断似乎是在复制时 - 复制的数据从未进入剪贴板，因此尝试粘贴时代码失败。在启动下一个复制命令之前清除任何先前复制的数据的剪贴板似乎有帮助。我仍在使用上面显示的等待时间，但我似乎能够使用以下功能以更短的等待时间来清除剪贴板：

Application.CutCopyMode = False

# google-chrome - 2套镀铬显示绝对定位不同

> ID：12077172
> 
> 赞同：1
> 
> 时间：2012-08-22T16:07:37.343
> 
> 标签：google-chrome

我电脑上的 Chrome 可以很好地渲染我们的网页。在我老板的 Chrome 浏览器上，下拉菜单项的绝对位置比它应该的要高。有谁知道为什么会发生这种情况？我已经检查了 Chrome 的多个其他安装，它们都正确呈现。只是我老板的机器不对。请帮忙！

这是一些屏幕截图...

[http://www.security sell.com/img/Good-Menu-Screenshot.jpg](http://www.securityselling.com/img/Good-Menu-Screenshot.jpg)

[http://www.security sell.com/img/Bad-Menu-Screenshot.jpg](http://www.securityselling.com/img/Bad-Menu-Screenshot.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:10:23.300

可以是屏幕分辨率吗？或者也许是你老板的 Chrome 中的一些插件？

# spring-mvc - Spring autoGrowNestedPaths 不起作用

> ID：12077176
> 
> 赞同：0
> 
> 时间：2012-08-22T16:07:48.187
> 
> 标签：spring-mvc, collections

我有一个具有嵌套属性的对象列表，并且在层次结构的底部，每个对象都有一个 CommonsMultipartFile 属性。

一个*文件夹*有一个*Requisites*列表，每个 Requisites 都有一个*页面列表*

这些是 bean 定义，每个都在自己的文件中：

```
Page {
    private CommonsMultipartFile attributes;
    // Getter & Setter        
}

Requisite {       
    private List<Page> pages;
    // Other properties and Getters & Setters
}

Folder {
    private List<Requisite> requisites;
    // Getter & Setter
} 
```

然后我在 Controller 方法中将一个 Folder 对象添加到我的 modelMap 中：

```
@RequestMapping(value = "loadFiles", method = RequestMethod.GET)
public String initFiles(ModelMap model, HttpServletRequest request) {
    Folder folder = new Folder();
    folder.setRequisites(requisitesModel.getRequisitesFromDB());
    model.addAttribute("folder", folder);
    return "loadFiles";
} 
```

此时，模型属性“文件夹”有一个 Requisite 对象列表，其中初始化了各种属性，但是页面 (List `<Page>`) 在所有这些对象中都是空的。这种方法工作正常，允许用户加载一堆文件，并且发布请求按预期工作。

然后我添加了一个处理 MaxUploadSizeExceededException 的方法，并在**resolveException**方法中复制了上述控制器的行为。这是在总文件大小超过给定阈值时将用户重定向到相同的表单。

这是 resolveException 方法的定义：

```
public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse
    response, Object handler, Exception exception) {
    ModelMap model = new ModelMap();
    Folder folder = new Folder();
    folder.setRequisites(requisitesModel.getRequisitesFromDB());
    model.addAttribute("error", "The files exceed the maximum filesize");
    model.addAttribute("folder", folder);
    return new ModelAndView("loadFiles", model);
} 
```

问题是，在这一个中，autoGrowNestedPaths 不起作用，因为立即抛出**bean 类 [mypackage.Folder] 的 Invalid property 'requisites[0].pages[0]'：无法访问索引属性路径'pages 中引用的属性的索引值[0]'：返回 null**。

我的理解是，默认情况下，spring 会为所有 Collection 类型自动增长嵌套路径，即使不使用 LazyList 或 AutopopulatingList。我的理解错了吗？我需要添加其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:09:35.707

**Jorge，我自己解决了这个问题。**

WebDataBinder*默认*自动增长嵌套路径；这包括收藏。

但有趣的是，这取决于从属性 getter 方法获取 Collection 的“通用类型”。它使用反射——调用`Method.getGenericReturnType()`，它返回一个 java.lang.reflect.Type。

如果它有效，你会得到一个带有集合元素类型的 java.lang.reflect.ParameterizedType 来增长；如果没有，Spring 将获得一个“空”元素类型并且不会自动增长。

见`org.springframework.beans.BeanWrapperImpl.growCollectionIfNecessary()`。

**在我的情况下，发现 Hibernate 代理（子类）没有必要的泛型类型和方法签名信息..即使此信息在实体类上（直接使用时！）**

我在我的表单控制器“loadEntity”设置中取消了实体的代理，并且就像下雨一样。（有时，在 Hibernate 应用程序中，取消代理是有用且必要的，其他代理检查、比较和操作也是如此。）

代码示例：

```
public static <T>  T deproxy (T obj) {
    if (obj == null)
        return obj;
    if (obj instanceof HibernateProxy) {
        // Unwrap Proxy;
        //      -- loading, if necessary.
        HibernateProxy proxy = (HibernateProxy) obj;
        LazyInitializer li = proxy.getHibernateLazyInitializer();
        return (T)  li.getImplementation();
    } 
    return obj;
}

public static boolean isProxy (Object obj) {
    if (obj instanceof HibernateProxy)
        return true;
    return false;
}

public static boolean isSame (Object o1, Object o2) {
    if (o1 == o2)
        return true;
    if (o1 == null || o2 == null) 
        return false;
    Object d1 = deproxy(o1);
    Object d2 = deproxy(o2);
    if (d1 == d2)
        return true;
    return false;
}

public static Class getClassWithoutInitializingProxy (Object obj) {
    if (obj instanceof HibernateProxy) {
        HibernateProxy proxy = (HibernateProxy) obj;
        LazyInitializer li = proxy.getHibernateLazyInitializer();
        return li.getPersistentClass();
    } 
    // Not a Proxy.
    return obj.getClass();
} 
```

希望这可以帮助您解决问题..甚至给我一个赞成票！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:25:27.233

来自[BeanWrapper javadoc](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/BeanWrapper.html)

> **setAutoGrowNestedPaths**
> 
> 无效 setAutoGrowNestedPaths（布尔 autoGrowNestedPaths）
> 
> 设置此 BeanWrapper 是否应尝试“自动增长”包含空值的嵌套路径。如果为“true”，则将使用默认对象值填充空路径位置并进行遍历，而不是导致 NullValueInNestedPathException。打开此标志还可以在访问越界索引时启用集合元素的自动增长。
> 
> 在普通 BeanWrapper 上默认为“false”。

所以不，`BeanWrapperImpl`默认情况下不会自动增长列表的嵌套路径（假设您使用的是 spring 3）。就像您在帖子中提到的那样，您可以使用自动填充或惰性列表来解决此问题。您还可以使用 initbinder 将 autogrowNestedPaths 属性显式设置为 true。

# php - RecursiveIteratorIterator 在 PHP 中是如何工作的？

> ID：12077177
> 
> 赞同：93
> 
> 时间：2012-08-22T16:07:57.867
> 
> 标签：php, iterator, spl

如何`RecursiveIteratorIterator`工作？

PHP 手册没有太多的文档或解释。`IteratorIterator`和 和有什么不一样`RecursiveIteratorIterator`？

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-09-02T14:30:10.800

[`RecursiveIteratorIterator`](http://php.net/class.recursiveiteratoriterator)是一个具体的[`Iterator`](http://php.net/class.iterator)实现[树遍历](http://en.wikipedia.org/wiki/Tree_traversal)。它使程序员能够遍历实现`RecursiveIterator`接口的容器对象，请参阅[Wikipedia 中的 Iterator](http://en.wikipedia.org/wiki/Iterator)了解迭代器的一般原则、类型、语义和模式。

与之不同的[`IteratorIterator`](http://php.net/class.iteratoriterator)是，具体实现对象遍历以线性顺序（并且默认情况下在其构造函数中`Iterator`接受任何类型），允许循环遍历*有序对象树*中的所有节点，并且其构造函数采用.[`Traversable`](http://php.net/class.Traversable)`RecursiveIteratorIterator`*`RecursiveIterator`*

 *简而言之：`RecursiveIteratorIterator`允许您遍历树，`IteratorIterator`允许您遍历列表。我很快就会用下面的一些代码示例来展示这一点。

从技术上讲，这是通过遍历所有节点的子节点（如果有的话）打破线性来实现的。这是可能的，因为根据定义，节点的所有子节点都是 a `RecursiveIterator`。然后顶层`Iterator`在内部按它们的深度堆叠不同`RecursiveIterator`的s，并保持一个指向当前活动子的指针以`Iterator`进行遍历。

这允许访问树的所有节点。

基本原理与 with 相同`IteratorIterator`：接口指定迭代的类型，基迭代器类是这些语义的实现。与下面的示例相比，对于线性循环，`foreach`您通常不会过多考虑实现细节，除非您需要定义一个新的`Iterator`（例如，当某些具体类型本身没有实现时`Traversable`）。

对于递归遍历-除非您不使用`Traversal`已经具有递归遍历迭代的预定义-您通常*需要*实例化现有`RecursiveIteratorIterator`迭代，甚至编写一个`Traversable`您自己的递归遍历迭代来进行这种类型的遍历迭代`foreach`。

> *提示：*您可能没有自己实现一个或另一个，所以这对于您对它们之间差异的实践经验来说可能是值得做的事情。您会在答案的末尾找到一个 DIY 建议。

简而言之，技术差异：

*   虽然`IteratorIterator`需要任何`Traversable`用于线性遍历，但`RecursiveIteratorIterator`需要更具体`RecursiveIterator`地循环遍历树。
*   Where`IteratorIterator`暴露了它的 main `Iterator`via `getInnerIerator()`，仅通过该方法`RecursiveIteratorIterator`提供当前活动的 sub- 。`Iterator`
*   虽然`IteratorIterator`完全不知道父母或孩子之类的东西，但`RecursiveIteratorIterator`也知道如何获取和遍历孩子。
*   `IteratorIterator`不需要迭代器的堆栈，`RecursiveIteratorIterator`有这样的堆栈并且知道活动的子迭代器。
*   `IteratorIterator`由于线性而没有选择的顺序，可以选择进一步遍历，并且需要`RecursiveIteratorIterator`根据每个节点来决定（通过[模式 per`RecursiveIteratorIterator`](http://www.php.net/manual/en/recursiveiteratoriterator.construct.php)决定）。
*   `RecursiveIteratorIterator`有比 更多的方法`IteratorIterator`。

总结一下：`RecursiveIterator`是一种具体类型的迭代（在树上循环），它在自己的迭代器上工作，即`RecursiveIterator`. 这与 with 的基本原理相同`IteratorIerator`，但迭代的类型不同（线性顺序）。

理想情况下，您也可以创建自己的集合。唯一需要的是您的迭代器实现`Traversable`了可能通过`Iterator`or `IteratorAggregate`。然后，您可以将其与`foreach`. 例如，某种三叉树遍历递归迭代对象以及容器对象的相应迭代接口。

* * *

让我们用一些不那么抽象的现实例子来回顾一下。在接口、具体迭代器、容器对象和迭代语义之间，这可能不是一个坏主意。

以目录列表为例。假设您在磁盘上有以下文件和目录树：

> ![目录树](../Images/ae4aea0266736a62304c67ea150ff4dd.png)

虽然具有线性顺序的迭代器仅遍历顶层文件夹和文件（单个目录列表），但递归迭代器也遍历子文件夹并列出所有文件夹和文件（包含其子目录列表的目录列表）：

```
Non-Recursive        Recursive
=============        =========

   [tree]            [tree]
    ├ dirA            ├ dirA
    └ fileA           │ ├ dirB
                      │ │ └ fileD
                      │ ├ fileB
                      │ └ fileC
                      └ fileA 
```

您可以轻松地将其与`IteratorIterator`不递归遍历目录树进行比较。并且`RecursiveIteratorIterator`which 可以遍历到树中，如递归列表所示。

首先是一个非常基本的示例，[`DirectoryIterator`](http://php.net/class.directoryiterator)它实现[`Traversable`](http://php.net/Traversable)了允许[`foreach`](http://php.net/foreach)对其*进行迭代*：

```
$path = 'tree';
$dir  = new DirectoryIterator($path);

echo "[$path]\n";
foreach ($dir as $file) {
    echo " ├ $file\n";
} 
```

上面目录结构的示例输出是：

```
[tree]
 ├ .
 ├ ..
 ├ dirA
 ├ fileA 
```

如您所见，这尚未使用`IteratorIterator`or `RecursiveIteratorIterator`。相反，它只是使用`foreach`它在`Traversable`界面上进行操作。

由于`foreach`默认情况下只知道名为线性顺序的迭代类型，我们可能希望明确指定迭代的类型。乍一看，它可能看起来太冗长，但出于演示目的（以及`RecursiveIteratorIterator`稍后使差异更明显），让我们指定迭代的线性类型，明确指定`IteratorIterator`目录列表的迭代类型：

```
$files = new IteratorIterator($dir);

echo "[$path]\n";
foreach ($files as $file) {
    echo " ├ $file\n";
} 
```

此示例与第一个示例*几乎*`$files`相同，不同之处在于现在是 的`IteratorIterator`一种迭代`Traversable` `$dir`：

```
$files = new IteratorIterator($dir); 
```

像往常一样，迭代的行为是由执行的`foreach`：

```
foreach ($files as $file) { 
```

输出*完全相同*。那么有什么不同呢？不同的是在`foreach`. 在第一个示例中它是 a`DirectoryIterator`在第二个示例中它是`IteratorIterator`. 这显示了迭代器的灵活性：您可以将它们相互替换，里面的代码`foreach`继续按预期工作。

让我们开始获取整个列表，包括子目录。

由于我们现在已经指定了迭代的类型，让我们考虑将其更改为另一种迭代类型。

我们知道我们现在需要遍历整个树，而不仅仅是第一层。要使用简单的方法进行这项工作，`foreach`我们需要一种不同类型的迭代器：[`RecursiveIteratorIterator`](http://php.net/RecursiveIteratorIterator). 而那个只能遍历具有[`RecursiveIterator`接口](http://php.net/RecursiveIterator)的容器对象。

接口是一个契约。任何实现它的类都可以与`RecursiveIteratorIterator`. 此类的一个示例是[`RecursiveDirectoryIterator`](http://php.net/RecursiveDirectoryIterator)，它类似于 的递归变体`DirectoryIterator`。

在用 I 字写任何其他句子之前，让我们看第一个代码示例：

```
$dir  = new RecursiveDirectoryIterator($path);

echo "[$path]\n";
foreach ($dir as $file) {
    echo " ├ $file\n";
} 
```

第三个示例与第一个示例*几乎相同，但是它创建了一些不同的输出：*

```
[tree]
 ├ tree\.
 ├ tree\..
 ├ tree\dirA
 ├ tree\fileA 
```

好吧，没什么不同，文件名现在包含前面的路径名，但其余部分看起来也相似。

如示例所示，即使目录对象已经实现了`RecursiveIterator`接口，这还不足以`foreach`遍历整个目录树。这是`RecursiveIteratorIterator`开始行动的地方。*示例 4*展示了如何：

```
$files = new RecursiveIteratorIterator($dir);

echo "[$path]\n";
foreach ($files as $file) {
    echo " ├ $file\n";
} 
```

使用`RecursiveIteratorIterator`而不是仅使用前一个`$dir`对象将以`foreach`递归方式遍历所有文件和目录。然后列出所有文件，因为现在已经指定了对象迭代的类型：

```
[tree]
 ├ tree\.
 ├ tree\..
 ├ tree\dirA\.
 ├ tree\dirA\..
 ├ tree\dirA\dirB\.
 ├ tree\dirA\dirB\..
 ├ tree\dirA\dirB\fileD
 ├ tree\dirA\fileB
 ├ tree\dirA\fileC
 ├ tree\fileA 
```

这应该已经证明了平面遍历和树遍历之间的区别。能够以元素列表的`RecursiveIteratorIterator`形式遍历任何树状结构。因为有更多信息（例如迭代当前发生的级别），所以可以在迭代时访问迭代器对象，例如缩进输出：

```
echo "[$path]\n";
foreach ($files as $file) {
    $indent = str_repeat('   ', $files->getDepth());
    echo $indent, " ├ $file\n";
} 
```

*示例 5*的输出：

```
[tree]
 ├ tree\.
 ├ tree\..
    ├ tree\dirA\.
    ├ tree\dirA\..
       ├ tree\dirA\dirB\.
       ├ tree\dirA\dirB\..
       ├ tree\dirA\dirB\fileD
    ├ tree\dirA\fileB
    ├ tree\dirA\fileC
 ├ tree\fileA 
```

当然这不会赢得选美比赛，但它表明使用递归迭代器可以获得更多信息，而不仅仅是*key*和*value*的线性顺序。即使`foreach`只能表达这种线性，访问迭代器本身可以获取更多信息。

与元信息类似，也有可能如何遍历树并因此对输出进行排序的不同方式。这是 的[*模式*，`RecursiveIteratorIterator`](http://www.php.net/manual/en/recursiveiteratoriterator.construct.php)可以用构造函数设置。

下一个示例将告诉`RecursiveDirectoryIterator`我们删除点条目（`.`和`..`），因为我们不需要它们。但递归模式也将更改为先获取父元素（子目录），`SELF_FIRST`然后再获取子元素（子目录中的文件和子子目录）：

```
$dir  = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);
$files = new RecursiveIteratorIterator($dir, RecursiveIteratorIterator::SELF_FIRST);

echo "[$path]\n";
foreach ($files as $file) {
    $indent = str_repeat('   ', $files->getDepth());
    echo $indent, " ├ $file\n";
} 
```

输出现在显示正确列出的子目录条目，如果您与之前的输出进行比较，那些不存在：

```
[tree]
 ├ tree\dirA
    ├ tree\dirA\dirB
       ├ tree\dirA\dirB\fileD
    ├ tree\dirA\fileB
    ├ tree\dirA\fileC
 ├ tree\fileA 
```

因此，递归模式控制返回树中的分支或叶子的内容和时间，对于目录示例：

*   `LEAVES_ONLY`（默认）：只列出文件，不列出目录。
*   `SELF_FIRST`（上）：列出目录，然后是其中的文件。
*   `CHILD_FIRST`（无示例）：首先列出子目录中的文件，然后是目录。

*示例 5*的输出与其他两种模式：

```
 LEAVES_ONLY                           CHILD_FIRST

  [tree]                                [tree]
         ├ tree\dirA\dirB\fileD                ├ tree\dirA\dirB\fileD
      ├ tree\dirA\fileB                     ├ tree\dirA\dirB
      ├ tree\dirA\fileC                     ├ tree\dirA\fileB
   ├ tree\fileA                             ├ tree\dirA\fileC
                                        ├ tree\dirA
                                        ├ tree\fileA 
```

当您将其与标准遍历进行比较时，所有这些都是不可用的。因此，当您需要将头绕在它周围时，递归迭代会稍微复杂一些，但是它很容易使用，因为它的行为就像迭代器一样，您将其放入 a`foreach`并完成。

我认为这些足以作为一个答案的例子。您可以在此要点中找到完整的源代码以及显示漂亮 ascii 树的示例：[https ://gist.github.com/3599532](https://gist.github.com/3599532)

> ***自己动手：*逐行制作`RecursiveTreeIterator`。**

*示例 5*展示了有关迭代器状态的元信息可用。然而，这*在*`foreach`迭代中被有意地证明了。在现实生活中这自然属于`RecursiveIterator`.

一个更好的例子是[`RecursiveTreeIterator`](http://php.net/RecursiveTreeIterator)，它负责缩进、前缀等等。请参阅以下代码片段：

```
$dir   = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);
$lines = new RecursiveTreeIterator($dir);
$unicodeTreePrefix($lines);
echo "[$path]\n", implode("\n", iterator_to_array($lines)); 
```

`RecursiveTreeIterator`旨在逐行工作，输出非常简单，有一个小问题：

```
[tree]
 ├ tree\dirA
 │ ├ tree\dirA\dirB
 │ │ └ tree\dirA\dirB\fileD
 │ ├ tree\dirA\fileB
 │ └ tree\dirA\fileC
 └ tree\fileA 
```

当与 a 结合使用时，`RecursiveDirectoryIterator`它会显示整个路径名，而不仅仅是文件名。其余的看起来不错。这是因为文件名是由`SplFileInfo`. 这些应该显示为基本名称。所需的输出如下：

```
/// Solved ///

[tree]
 ├ dirA
 │ ├ dirB
 │ │ └ fileD
 │ ├ fileB
 │ └ fileC
 └ fileA 
```

创建一个可用于`RecursiveTreeIterator`代替`RecursiveDirectoryIterator`. 它应该提供当前的基本名称`SplFileInfo`而不是路径名。最终的代码片段可能如下所示：

```
$lines = new RecursiveTreeIterator(
    new DiyRecursiveDecorator($dir)
);
$unicodeTreePrefix($lines);
echo "[$path]\n", implode("\n", iterator_to_array($lines)); 
```

这些片段包括`$unicodeTreePrefix`是*附录中要点的一部分：自己动手：逐行制作`RecursiveTreeIterator`工作。*.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-02T11:58:45.540

> `IteratorIterator`和有什么区别`RecursiveIteratorIterator`？

要了解这两个迭代器之间的区别，首先必须了解所使用的命名约定以及我们所说的“递归”迭代器的含义。

### 递归和非递归迭代器

PHP 具有非“递归”迭代器，例如`ArrayIterator`and `FilesystemIterator`。还有“递归”迭代器，例如`RecursiveArrayIterator`and `RecursiveDirectoryIterator`。后者具有使它们能够被深入研究的方法，而前者没有。

当这些迭代器的实例自行循环时，即使是递归的，即使循环嵌套数组或带有子目录的目录，这些值也仅来自“顶层”级别。

递归迭代器*实现*递归行为（通过`hasChildren()`, `getChildren()`）但不*利用*它。

将递归迭代器视为“递归”迭代器可能会更好，它们具有递归迭代的*能力*，但简单地迭代这些类之一的实例不会这样做。要利用递归行为，请继续阅读。

### 递归迭代器迭代器

这就是`RecursiveIteratorIterator`发挥作用的地方。它知道如何调用“递归”迭代器，以便在正常的、扁平的循环中深入了解结构。它将递归行为付诸行动。它基本上完成了遍历迭代器中的每个值的工作，查看是否有“孩子”可以递归进入或没有，并进入和退出这些孩子的集合。您将一个实例粘贴`RecursiveIteratorIterator`到 foreach 中，*它会*潜入结构中，因此您不必这样做。

如果`RecursiveIteratorIterator`未使用 ，您将不得不编写自己的递归循环来利用递归行为，检查“递归”迭代器`hasChildren()`并使用`getChildren()`.

这是对 的*简要*概述`RecursiveIteratorIterator`，它与 有什么不同`IteratorIterator`？好吧，您基本上是在问与*小猫和树有什么区别？*仅仅因为两者都出现在同一个百科全书（或手册，对于迭代器）中并不意味着您应该在两者之间混淆。

### 迭代器迭代器

的工作`IteratorIterator`是获取任何`Traversable`对象，并将其包装以使其满足`Iterator`接口。这样做的一个用途是能够在非迭代器对象上应用特定于迭代器的行为。

举一个实际的例子，这个`DatePeriod`类是`Traversable`但不是一个`Iterator`. 因此，我们可以用迭代器循环它的值，`foreach()`但不能做我们通常用迭代器做的其他事情，比如过滤。

**任务**：在接下来的四个星期的星期一、星期三和星期五循环。

^(是的，通过`foreach`-ing和在循环中`DatePeriod`使用 an是微不足道的；`if()`但这不是这个例子的重点！)

```
$period = new DatePeriod(new DateTime, new DateInterval('P1D'), 28);
$dates  = new CallbackFilterIterator($period, function ($date) {
    return in_array($date->format('l'), array('Monday', 'Wednesday', 'Friday'));
});
foreach ($dates as $date) { … } 
```

上面的代码片段不起作用，因为它`CallbackFilterIterator`需要一个实现`Iterator`接口的类的实例，而`DatePeriod`事实并非如此。但是，由于它是`Traversable`我们可以通过使用轻松满足该要求`IteratorIterator`。

```
$period = new IteratorIterator(new DatePeriod(…)); 
```

如您所见，这与迭代迭代器类或递归*无关*`IteratorIterator`，这就是and之间的区别`RecursiveIteratorIterator`。

### 概括

`RecursiveIteraratorIterator`用于迭代`RecursiveIterator`（“递归”迭代器），利用可用的递归行为。

`IteratorIterator`用于将`Iterator`行为应用于非迭代器`Traversable`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:56:22.247

与 一起使用时`iterator_to_array()`，`RecursiveIteratorIterator`将递归遍历数组以查找所有值。这意味着它将展平原始数组。

`IteratorIterator`将保持原有的层次结构。

此示例将清楚地向您展示差异：

```
$array = array(
               'ford',
               'model' => 'F150',
               'color' => 'blue', 
               'options' => array('radio' => 'satellite')
               );

$recursiveIterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));
var_dump(iterator_to_array($recursiveIterator, true));

$iterator = new IteratorIterator(new ArrayIterator($array));
var_dump(iterator_to_array($iterator,true)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-11T09:14:12.047

RecursiveDirectoryIterator 它显示整个路径名，而不仅仅是文件名。其余的看起来不错。这是因为文件名是由 SplFileInfo 生成的。这些应该显示为基本名称。所需的输出如下：

```
$path =__DIR__;
$dir = new RecursiveDirectoryIterator($path, FilesystemIterator::SKIP_DOTS);
$files = new RecursiveIteratorIterator($dir,RecursiveIteratorIterator::SELF_FIRST);
while ($files->valid()) {
    $file = $files->current();
    $filename = $file->getFilename();
    $deep = $files->getDepth();
    $indent = str_repeat('│ ', $deep);
    $files->next();
    $valid = $files->valid();
    if ($valid and ($files->getDepth() - 1 == $deep or $files->getDepth() == $deep)) {
        echo $indent, "├ $filename\n";
    } else {
        echo $indent, "└ $filename\n";
    }
} 
```

输出：

```
tree
 ├ dirA
 │ ├ dirB
 │ │ └ fileD
 │ ├ fileB
 │ └ fileC
 └ fileA 
```*

# ruby-on-rails - Rails：状态与状态的比较失败

> ID：12077180
> 
> 赞同：21
> 
> 时间：2012-08-22T16:08:07.633
> 
> 标签：ruby-on-rails, ruby, sorting, social

我需要获取所有 current_user.friends 状态，然后按 created_at 对其进行排序。

```
class User < ActiveRecord::Base
 has_many :statuses
end

class Status < ActiveRecord::Base
 belongs_to :user
end 
```

在控制器中：

```
def index
    @statuses = []
    current_user.friends.map{ |friend| friend.statuses.each { |status| @statuses << status } }
    current_user.statuses.each { |status| @statuses << status }

    @statuses.sort! { |a,b| b.created_at <=> a.created_at }
end 
```

`current_user.friends`返回一个对象数组`User`

`friend.statuses`返回一个对象数组`Status`

错误：

```
comparison of Status with Status failed
app/controllers/welcome_controller.rb:10:in `sort!'
app/controllers/welcome_controller.rb:10:in `index' 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T16:11:36.030

我有一个类似的问题，用 to_i 方法解决了，但无法解释为什么会发生这种情况。

```
@statuses.sort! { |a,b| b.created_at.to_i <=> a.created_at.to_i } 
```

顺便说一下，这是按降序排列的。如果你想要升序是：

```
@statuses.sort! { |a,b| a.created_at.to_i <=> b.created_at.to_i } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-10T18:16:03.343

当 sort 从 <=> 返回 nil 时会出现此错误消息。<=> 可以返回 -1、0、1 或 nil，但 sort 无法处理 nil，因为它需要所有列表元素都是可比较的。

```
class A
  def <=>(other)
    nil
  end
end

[A.new, A.new].sort
#in `sort': comparison of A with A failed (ArgumentError)
#   from in `<main>' 
```

调试此类错误的一种方法是检查 <=> 的返回是否为 nil，如果是则引发异常。

```
@statuses.sort! do |a,b| 
  sort_ordering = b.created_at <=> a.created_at
  raise "a:#{a} b:#{b}" if sort_ordering.nil?
  sort_ordering
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T07:04:28.733

今晚我在一个小组项目中遇到了类似的问题。这个答案并没有解决它，但是我们的问题是，有人将其他 models.new 放在我们的 def show User 控制器中。例如...

```
Class UsersController < ApplicationController

def show

    @status = @user.statuses.new

end 
```

这在@user.statuses 和我试图在页面上调用的@status 之间造成了冲突。我取消了用户，只是做了......

```
def show

    @status = Status.new

end 
```

这对我有用。

# c# - C#按名称中的自然数排序对文件进行排序？

> ID：12077182
> 
> 赞同：11
> 
> 时间：2012-08-22T16:08:07.620
> 
> 标签：c#

我在这样的目录中有文件

```
0-0.jpeg
0-1.jpeg
0-5.jpeg
0-9.jpeg
0-10.jpeg
0-12.jpeg 
```

……

当我加载文件时：

```
FileInfo[] files = di.GetFiles(); 
```

他们的顺序错误（他们应该像上面那样）：

```
0-0.jpeg
0-1.jpeg
0-10.jpeg
0-12.jpeg
0-5.jpeg
0-9.jpeg 
```

如何解决？

我试图对它们进行排序，但没有办法：

```
1) Array.Sort(files, (f1, f2) => f1.Name.CompareTo(f2.Name));

2) Array.Sort(files, (x, y) => StringComparer.OrdinalIgnoreCase.Compare(x.Name, y.Name)); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-09-10T16:58:15.097

我知道这可能会迟到，但这是另一种完美的解决方案

```
FileInfo[] files = di.GetFiles().OrderBy(n => Regex.Replace(n.Name, @"\d+", n => n.Value.PadLeft(4, '0'))); 
```

在中使用正则表达式替换`OrderBy Clause`：

`Regex.Replace(n.Name, @"\d+", n => n.Value.PadLeft(4, '0'))`

那么这是做什么的，它`pads`是文件名中每个数字长度为 4 个字符的数值：

```
0-0.jpeg     ->   0000-0000.jpeg
0-1.jpeg     ->   0000-0001.jpeg
0-5.jpeg     ->   0000-0005.jpeg
0-9.jpeg     ->   0000-0009.jpeg
0-10.jpeg    ->   0000-0010.jpeg
0-12.jpeg    ->   0000-0012.jpeg 
```

但这仅发生在`OrderBy`子句中，它不会以任何方式触及原始文件名。您最终在数组中的顺序是“人类自然”顺序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T16:15:10.423

按字母顺序，“错误”的顺序实际上是正确的。如果您希望它按数字排序，那么您需要：

1.  将文件名转换为数字列表并对它们进行排序
2.  以字母和数字排序相同的方式命名文件（0-001.jpeg 和 0-030.jpg）
3.  依靠文件创建时间进行排序（假设文件是​​按顺序创建的）。

有关#3 的示例，请参见[Sorting Directory.GetFiles()](https://stackoverflow.com/questions/52842/sorting-directory-getfiles)的答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-22T16:22:10.373

[请参阅此处](https://stackoverflow.com/a/11052176/932418)的“CustomSort”功能。

```
List<string> list = new List<string>() { 
                    "0-5.jpeg",
                    "0-9.jpeg",
                    "0-0.jpeg",
                    "0-1.jpeg",
                    "0-10.jpeg",
                    "0-12.jpeg"};
list.CustomSort().ToList().ForEach(x => Console.WriteLine(x)); 
```

它的输出：

```
0-0.jpeg
0-1.jpeg
0-5.jpeg
0-9.jpeg
0-10.jpeg
0-12.jpeg 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-19T07:15:22.200

为了解决这个问题，您可以使用**StrCmpLogicalW** windows API。

有关详细信息，请参阅[这篇文章](http://www.codeproject.com/Articles/11016/Numeric-String-Sort-in-C)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-23T14:11:24.133

为您的特定情况实施[比较](https://docs.microsoft.com/en-us/dotnet/api/system.comparison-1?view=netframework-2.0)方法并将其用于`Array.Sort`.

```
private int CompareByNumericName(FileInfo firstFile, FileInfo secondFile)
{
    /* First remove '0-' and '.jpeg' from both filenames then... */

    int firstFileNumericName = Int32.Parse(firstFile.Name);
    int secondFileNumericName = Int32.Parse(secondFile.Name);

    return firstFileNumericName.CompareTo(secondFileNumericName);
} 
```

```
FileInfo[] files = di.GetFiles();
Array.Sort<FileInfo>(files, CompareByNumericName); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T17:02:26.683

您的文件名似乎是结构化的。如果您只是对它们进行排序，它们将作为普通字符串进行排序。你需要：

1.  将文件名解析为其组成部分。
2.  将数字段转换为数值。
3.  按所需顺序比较该结构以获得预期的整理顺序。

就个人而言，我会创建一个类来表示文件名中隐含的结构。也许它应该包装`FileInfo`. 该类的构造函数应将文件名解析为其组成部分并适当地实例化该类的属性。

该类应该实现`IComparable`/ `IComparable<T>`（或者您可以创建一个实现[Comparer](http://msdn.microsoft.com/en-us/library/cfttsh47.aspx)）。

对您的对象进行排序，然后它们应该按照您想要的整理顺序出现。

如果看起来您的文件名由 3 部分组成：

*   一个高阶数值（我们称之为'hi'），
*   一个低阶数值（我们称之为'lo'），
*   和一个扩展名（我们称之为'ext'）

所以你的班级可能看起来像

```
public class MyFileInfoWrapper : IComparable<MyFileInfoWrapper>,IComparable
{
  public MyFileInfoWrapper( FileInfo fi )
  {
    // your implementation here
    throw new NotImplementedException() ;
  }

  public int    Hi         { get ; private set ; }
  public int    Lo         { get ; private set ; }
  public string Extension  { get ; private set ; }

  public FileInfo FileInfo { get ; private set ; }

  public int CompareTo( MyFileInfoWrapper other )
  {
    int cc ;
    if      ( other   == null     ) cc = -1 ;
    else if ( this.Hi <  other.Hi ) cc = -1 ;
    else if ( this.Hi >  other.Hi ) cc = +1 ;
    else if ( this.Lo <  other.Lo ) cc = -1 ;
    else if ( this.Lo >  other.Lo ) cc = +1 ;
    else                            cc = string.Compare( this.Extension , other.Extension , StringComparison.InvariantCultureIgnoreCase ) ;
    return cc ;
  }

  public int CompareTo( object obj )
  {
    int cc ;
    if      ( obj == null              ) cc = -1 ;
    else if ( obj is MyFileInfoWrapper ) cc = CompareTo( (MyFileInfoWrapper) obj ) ;
    else throw new ArgumentException("'obj' is not a 'MyFileInfoWrapper' type.", "obj") ;
    return cc ;
  }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-29T21:33:18.250

这是我的解决方案。我首先解析了文件路径，然后定义了顺序规则。

对于以下代码，您需要命名空间`System.Text.RegularExpressions`。

```
Regex parseFileNameForNaturalSortingRegex = new Regex(
    @"
        ^
        (?<DirectoryName>.*)
        (?<FullFileName>
            (?<FileNameBasePart>[^/\\]*)
            (?<FileNameNumericPart>\d+)?
            (?>
            \.
            (?<FileNameExtension>[^./\\]+)
            )?
        )
        $
    ",
    RegexOptions.IgnorePatternWhitespace | RegexOptions.RightToLeft
);

FileInfo[] filesOrdered = System.IO.Directory.GetFiles(@"C:\my\source\directory")
    .Select(fi =>
    {
        Match match = parseFileNameForNaturalSortingRegex.Match(fi.FullName);
        return new
        {
            FileInfo = fi,
            DirectoryName = match.Groups["DirectoryName"].Value,
            FullFileName = match.Groups["FullFileName"].Value,
            BasePart = match.Groups["FileNameBasePart"].Value,
            NumericPart = match.Groups["FileNameNumericPart"].Success ? int.Parse(match.Groups["FileNameNumericPart"].Value) : -1,
            HasFileNameExtension = match.Groups["FileNameExtension"].Success,
            FileNameExtension = match.Groups["FileNameExtension"].Value
        };
    })
    .OrderBy(r => r.DirectoryName)
    .ThenBy(r => r.BasePart)
    .ThenBy(r => r.NumericPart)
    .ThenBy(r => r.HasFileNameExtension)
    .ThenBy(r => r.FileNameExtension)
    .Select(r => r.FileInfo)
    .ToArray(); 
```

# java - 将数组变量复制到另一个数组变量

> ID：12077185
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:08:09.490
> 
> 标签：java, arrays

我想将一个数组变量从一个数组复制到另一个数组的数组变量。我该怎么做？只是`Array1[1] = Array2[1]`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:10:18.993

如果你写

```
 array1[1] = array2[1]; 
```

这会将的第二个元素的*值*复制`array2`到 的第二个元素中`array1`。如果这就是你想做的一切，那很好。

它*不会*将两个数组关联在一起。如果你然后写：

```
 array2[1] = someNewValue(); 
```

那么该更改*将不会*在`array1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:12:38.183

这很简单...

`array1[1] = array2[1];`

**但是请注意，这两个是堆上的两个不同的 Array Object，其中一个的变化不会反映在另一个上。**

# git - Git - 将所有提交转移到另一个分支并创建一个新的主

> ID：12077189
> 
> 赞同：2
> 
> 时间：2012-08-22T16:08:19.193
> 
> 标签：git, branch, branching-strategy

*（关于这个有很多类似的问题，我也阅读了各种文档，但我找不到任何回答这个特定问题的东西。）*

给定一个没有远程和分支的存储库，在 master 上有 20 次提交。

目的是最终得到一个*空*的主人，所有的提交都在发展，但没有混乱的历史。

有没有区别：

```
git branch --move master develop
git checkout --orphan master 
```

和：

```
git checkout -b develop 
git merge master
git checkout master
git reset --hard HEAD^20 
```

?

第一个选项似乎是执行此操作的最简单方法，但我在任何地方都没有看到它建议 - 我一直在阅读的所有各种内容都倾向于使用第二个选项的变体（或变基，我认为这里不适用）。

第一个选项是否像我认为的那样做，与第二个选项相比，它有什么好处/缺点吗？

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:51:34.280

分支只是提交指针。当没有任何可指点时，你会进入一些奇怪的领域。老实说，如果您只是想获得“干净”的工作流程历史记录，那么任何重要的第一次提交都是从`develop`into合并`master`，请在 first 中添加一个无关紧要的提交`master`：

```
git branch --move master develop
git checkout --orphan master
git rm -rf . ;# abandon the staged, orphaned changes
echo README > README ;# put something in this working directory
git add README && git commit -m "Initial commit of <my_project>" 
```

为什么要犯什么？因为一旦您运行`--orphan`结帐，您将无法对`master`分支做任何有意义的事情。自己试试：

```
$ git checkout --orphan master
Switched to a new branch 'master'
$ git checkout develop && git checkout master
error: pathspec 'master' did not match any file(s) known to git. 
```

合并怎么样？

```
$ git checkout --orphan master
Switched to a new branch 'master'
$ git merge develop
fatal: Non-fast-forward commit does not make sense into an empty head 
```

没有骰子。解决这个问题的唯一真正方法是向那个空分支提交一些东西，任何东西。在你这样做的那一刻，你可以`develop`以任何你想要的方式合并：

```
$ git merge develop
Merge made by the 'recursive' strategy.
 README | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 README 
```

和日志：

```
$ git log --graph --oneline
*   867a1f9 Merge branch 'develop'
|\  
| * 22df145 README
* 15ba82a Initial commit of test project 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:27:05.877

我看到的唯一问题是第二个版本不起作用。HEAD^20 不会解决只有 20 次提交的历史记录，因此`git reset --hard HEAD^20`会失败。

您的初始版本应该可以正常工作。如果第二个版本有效，我看不出两者之间有显着差异。

# list - 有没有更好的方法将 Excel 工作簿中的工作表插入列表？

> ID：12077192
> 
> 赞同：1
> 
> 时间：2012-08-22T16:08:27.387
> 
> 标签：list, vsto, excel

我有这段代码用于从 Excel 工作簿中读取工作表，然后填充列表。

我得到一个范围，将其放入二维数组中，然后使用 for 循环遍历它并填充列表。

我的问题是，有没有更好的方法来达到相同的结果？我的意思是，代码更少，速度更快。我必须为 4 张纸执行此操作，并且需要 260 毫秒。

```
public static void LoadDdrDataIntoObjects(ref List<Receivables> recList, ref List<Dilution> dilList, ref List<Accountable> accList, ref List<Outstanding> outList, string sheet)
{
    Workbook pantaReiWorkBook = PantaReiApplication.ActiveWorkbook;
    Sheets pantaReiWorkSheets = pantaReiWorkBook.Sheets;

    Worksheet pantaReiWorkSheet = pantaReiWorkSheets[sheet];
    Range pantaReiLastCell =
        pantaReiWorkSheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell);

    Range pantaReiRange =
        pantaReiWorkSheet.Range["A1:" + pantaReiLastCell.Address.Trim(new char['$']), Type.Missing];

    object[,] pantaReidataRange = (object[,]) pantaReiRange.Value[Type.Missing];

    for (var row = 2; row <= pantaReidataRange.GetLength(0); row++)
    {
        Receivables pantaReiReceivable = new Receivables
        {
            FileID = fileID.ID,
            SheetType =
                pantaReidataRange[row, 1].ToString(),
            SellerCompany =
                pantaReidataRange[row, 2].ToString(),
            Contract = pantaReidataRange[row, 3].ToString(),
            DebitID = pantaReidataRange[row, 4].ToString(),
            CompanyCode =
                pantaReidataRange[row, 5].ToString(),
            NoteNumber =
                pantaReidataRange[row, 6].ToString(),
            Installment =
                Convert.ToInt32(pantaReidataRange[row, 7]),
            InvoiceDate =
                (DateTime) pantaReidataRange[row, 8],
            DueDate1 = (DateTime) pantaReidataRange[row, 9],
            DueDate2 =
                (DateTime) pantaReidataRange[row, 10],
            DueDate3 =
                (DateTime) pantaReidataRange[row, 11],
            Currency =
                pantaReidataRange[row, 12].ToString(),
            Amount =
                (float)
                Convert.ToDouble(pantaReidataRange[row, 13]),
            Sign = pantaReidataRange[row, 14].ToString(),
            ProductType =
                pantaReidataRange[row, 15].ToString(),
            DilutionType =
                Convert.ToString(pantaReidataRange[row, 16]),
            MaturityStatus =
                Convert.ToInt32(pantaReidataRange[row, 17]),
            DebitStatus =
                pantaReidataRange[row, 18].ToString(),
            DealerFlag =
                pantaReidataRange[row, 19].ToString(),
            CustomerDescription =
                pantaReidataRange[row, 20].ToString(),
            AssetType =
                Convert.ToInt32(pantaReidataRange[row, 21])
        };

        recList.Add(pantaReiReceivable);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:10:42.417

I managed on my own. I used reflection.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:48:48.757

最好的办法是分析您的代码。[JetBrains dotTrace](http://www.jetbrains.com/profiler/)是我经常使用的一个工具。

我的一个建议是，如果您要处理大量行，请考虑预先设置`List<T>`容量，甚至将单个记录对象的添加推迟`List`到您完成处理之前 - 将它们放入循环期间的数组。你可以在进入for循环之前声明数组；根据 for 循环的迭代次数，您已经知道数组的大小。完成处理后，您可以收集所有数组并 LINQ 将它们转换为您喜欢的列表。

# java - recaptcha 通过 http 而不是 https 进行调用

> ID：12077193
> 
> 赞同：0
> 
> 时间：2012-08-22T16:08:33.267
> 
> 标签：java, jsp, https, recaptcha

我在我的 java jsp 设置中使用了 recaptcha。我在我的jsp中使用以下代码

```
<%@ page import="net.tanesha.recaptcha.ReCaptcha"%>
<%@ page import="net.tanesha.recaptcha.ReCaptchaFactory"%>

<%
ReCaptcha c = ReCaptchaFactory.newReCaptcha("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX", "XXXXXXXXXXXXXXXXXXX", false);
out.print(c.createRecaptchaHtml(null, null));
out.flush();
%> 
```

但是该站点使用 https，因此我在 IE 上收到“仅显示安全内容”消息。

如果我查看源 recaptcha 已生成以下内容

```
<script type="text/javascript" src="http://api.recaptcha.net/challenge?k=XXXXXXXXXXXXXXXXXXXXXXX"></script> 
```

如何强制 recaptcha 使用 https 而不是 http？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T16:16:03.177

查看[源代码](http://grepcode.com/file/repo1.maven.org/maven2/net.tanesha.recaptcha4j/recaptcha4j/0.0.7/net/tanesha/recaptcha/ReCaptchaFactory.java)，您需要更改：

```
ReCaptchaFactory.newReCaptcha(  //... 
```

和：

```
ReCaptchaFactory.newSecureReCaptcha(  //... 
```

而已！

# 也可以看看

*   [.NET 验证码 https](https://stackoverflow.com/questions/2636809)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T09:53:48.123

您可以通过这种方式使其适用于安全和不安全的内容

```
ReCaptcha c=null;

if(request.getScheme().equals("https"))
{

     c= ReCaptchaFactory.newSecureReCaptcha(
            Constants.RECATCHA_PUBLIC_KEY,
            Constants.RECATCHA_PRIVATE_KEY, false);
}else{

     c = ReCaptchaFactory.newReCaptcha(
            Constants.RECATCHA_PUBLIC_KEY,
            Constants.RECATCHA_PRIVATE_KEY, false);

} 
```

# web - 我应该使用哪种类型的数据建模？

> ID：12077197
> 
> 赞同：0
> 
> 时间：2012-08-22T16:08:58.290
> 
> 标签：web, data-modeling

我目前正在开发一个网站，基本上我想存储和显示用户提交的内容。提交将仅是文本（很像 FML 或 MLIA），所以我想知道存储/操作这些数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:52:24.717

一般来说，对于任何网站，建模数据的最佳方式是使用数据库。

这在很大程度上取决于您网站的需求、规模和其他标准，因此无法说明您应该使用哪种数据库系统，或者您应该使用关系型数据库系统还是 NO-SQL 数据库系统。

# php - PHP：从数组中获取数据

> ID：12077198
> 
> 赞同：1
> 
> 时间：2012-08-22T16:09:03.570
> 
> 标签：php, arrays

我得到了一组看起来像这样的数据

```
 { [0]=> object(stdClass)#5 (19) { ["text"]=> string(39) "So true! :(" } object(stdClass)#5 (19) { ["text"]=> string(39) "Some other text"} 
```

我试过了，但它没有返回任何数据

```
$content->{0}->text;  
$content->{1}->text; 
```

如何获取这些数据？它没有返回任何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:10:17.850

这些是数组中的对象，您可以像这样访问它们：

```
$content[0]->text 
```

# php - 使用 aa order by 的意外结果

> ID：12077199
> 
> 赞同：0
> 
> 时间：2012-08-22T16:09:05.963
> 
> 标签：php, mysql

我正在制作一个通知脚本，目前有它来显示关于同一图像的多个通知，例如 john 喜欢 image_name，sarah 喜欢 image_name -> 2 个人喜欢 image_name。

这就是我到目前为止所拥有的。

```
$query = mysql_query("SELECT type, extra_id, COUNT(*), id AS count FROM `notifications` WHERE `receiver_id` = '14' AND `read` = '0' GROUP BY type, extra_id");
while($row = mysql_fetch_array($query)){

    if($row['count'] == 1){

        switch ($row['type']) {
            case "Following":
                echo "John Doe is now following you <br />";
            break;
            case "Liked":
                $image_id = $row['extra_id'];
                $image_q = mysql_query("SELECT * FROM `images` WHERE `id` = '$image_id' LIMIT 1");
                $image = mysql_fetch_array($image_q);
                echo "John Doe likes ".$image['heading']."<br />";
            break;
        }

    }   else   {

        switch ($row['type']) {
            case "Following":
                echo $row['count']." New Users are following you <br />";
            break;
            case "Liked":
                $image_id = $row['extra_id'];
                $image_q = mysql_query("SELECT * FROM `images` WHERE `id` = '$image_id' LIMIT 1");
                $image = mysql_fetch_array($image_q);
                echo $row['count']." Users Like ".$image['heading']."<br />";
            break;
        }

    }

} 
```

我的数据库对于通知表看起来像这样。 [http://i.minus.com/iZtrR0MNZ95Qn.png](http://i.minus.com/iZtrR0MNZ95Qn.png)

代码的输出是，

```
2 New Users are following you 
5 Users Like IMAGE_ID_29
John Doe likes IMAGE_ID_50 
```

它应该在哪里

```
2 New Users are following you
John Doe likes IMAGE_ID_29
2 Users like IMAGE_ID_50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:22:01.933

您当前的查询是：

```
SELECT type, extra_id, COUNT(*), id AS count FROM `notifications` WHERE `receiver_id` = '14' AND `read` = '0' GROUP BY type, extra_id 
```

也就是说，您正在使用该`id`字段作为您的`count`.

您可能希望将其重写为：

```
SELECT type, extra_id, COUNT(*) AS count, id FROM `notifications` WHERE `receiver_id` = '14' AND `read` = '0' GROUP BY type, extra_id 
```

# objective-c - Objective C综合属性添加与设置？

> ID：12077203
> 
> 赞同：1
> 
> 时间：2012-08-22T16:09:25.777
> 
> 标签：objective-c, properties

所以我当然知道基本的属性获取器和设置器。

```
- (void)setAnObject:(NSObject *)anObject
{

}

- (NSObject *)anObject
{
    return _anObject;
} 
```

但是我今天在代码完成中注意到，对于每个属性，这些添加方法也会被创建。我做了一些搜索，但找不到它们的参考。这些是什么，它们做什么？

```
- (void)addAnObject:(NSSet *)objects
{

}

- (void)addAnObjectObject:(<#object-type#> *)object
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:12:33.607

这些是[符合 KVC](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172-BAJEAIEE)的`anObject`属性访问器，Xcode 可能认为它是一个集合类型（例如 NSSet）。（**编辑：** Xcode 可能不这么认为，但无论如何都建议完成。）

# php - 删除调试代码后，PHP 邮件程序不发送电子邮件

> ID：12077204
> 
> 赞同：0
> 
> 时间：2012-08-22T16:09:31.157
> 
> 标签：php, joomla, joomla1.5, php-5.3, phpmailer

我有一个在提交表单时发送电子邮件的功能。此函数包含以下 if 语句：

```
if ($guestDetails) 
{
  $mailer->addRecipient($guestDetails->email);
  $mailer->addCC( $config->get('emails_admin_email'));

  $mailer->setSubject( $subject );
  $mailer->setBody($template_layout);
  $mailer->IsHTML($mode);          
  $mailer->setSender(array( $mailfrom, $fromname ));
  $sent = $mailer->send();
} 
```

最近，此功能已停止工作（即不再发送电子邮件）。为了调查发生了什么，我修改了代码以记录一些变量，因为 PHP 错误日志中没有记录任何内容。这是 if 语句现在的样子：

```
$testArr = array();
ClassName::_log_r("guestdetails", $guestDetails);
if ($guestDetails) 
{
  ClassName::_log_r("got into if", $testArr);
  $mailer->addRecipient($guestDetails->email);
  $mailer->addCC( $config->get('emails_admin_email'));

  $mailer->setSubject( $subject );
  $mailer->setBody($template_layout);
  $mailer->IsHTML($mode);          
  $mailer->setSender(array( $mailfrom, $fromname ));
  $sent = $mailer->send();
  ClassName::_log_r("mailer", $mailer);
  ClassName::_log_r("sent", $sent);
} else
  ClassName::_log_r("got into else", $testArr); 
```

_log_r 只是一个将给定变量的内容写入文本文件的函数。一旦我添加了这个“调试”代码，电子邮件就会再次开始发送，并且日志正确记录了“进入 if”。删除上述调试代码会阻止再次发送电子邮件。

我对这里可能发生的事情感到困惑。有没有人遇到过这样的事情？为什么删除调试代码后不发送电子邮件？如果需要更多信息，请告诉我。谢谢！

PS代码是用PHP编写的，服务器运行的是PHP 5.3.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:19:18.980

想到的唯一可能的答案是，无论出于何种原因，`$guestDetails`不再定义（例如，它被重命名到`$guestDetail`其他地方）。

`_log_r`如果参数不存在，这也需要函数重新定义参数。

如果您检查发送到 CC 的邮件：仅，它们会到达 - 无效`$guestDetails`可能不会阻止该过程完成。实际上只会生成给管理员的电子邮件。

尝试类似的东西

```
if (!defined($guestDetails))
    ClassName::_log_r("mailer", "Not defined");
if (empty($guestDetails))
    ClassName::_log_r("mailer", "empty"); 
```

看看是否可以担心一些更多的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:40:48.693

`_log_r`尝试捕获邮件异常并检查您是否获得有关正在发生的事情的更好信息，而不是使用 记录：

```
if ($guestDetails) 
{
    try
    {
        $mailer->addRecipient($guestDetails->email);
        $mailer->addCC( $config->get('emails_admin_email'));

        $mailer->setSubject( $subject );
        $mailer->setBody($template_layout);
        $mailer->IsHTML($mode);          
        $mailer->setSender(array( $mailfrom, $fromname ));
        $sent = $mailer->send();
    } 
    catch (phpmailerException $e) 
    {
        echo $e->errorMessage(); //you could do a _log_r here..
    } 
    catch (Exception $e) 
    {
        echo $e->getMessage(); //or here..
    } 
}
else
{
    echo "guestDetails empty!"; //or here..
} 
```

# android - ABBYY 识别名片工作但照片失败

> ID：12077205
> 
> 赞同：0
> 
> 时间：2012-08-22T16:09:34.397
> 
> 标签：android, abbyy, text-recognition

当我从 ABBYY 名片中识别出文本时，它就可以工作了。当我用照片尝试它时，我拍了它失败了。它确实适用于 ABBYY 的演示，所以它不是我的硬件。

有人知道为什么是这样吗？

我用来拍照的代码：

```
 Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
            startActivityForResult(intent, REQUESTCODE_PHOTO);

    if(requestCode == REQUESTCODE_PHOTO){
        if( resultCode == Activity.RESULT_OK){
            RecognizerManager.recognizeText((Bitmap)data.getExtras().get("data"), this);

        }
    }

public static void recognizeText(final Bitmap bitmap, final RecognitionCallback listener){
        RecognitionConfiguration config = new RecognitionConfiguration();
        config.setRecognitionLanguages(Engine.getInstance().getLanguagesAvailableForOcr());
        config.setRecognitionMode(RecognitionMode.FULL);
        config.setImageProcessingOptions(RecognitionConfiguration.ImageProcessingOptions.FIND_ALL_TEXT);
        RecognitionManager recManager = Engine.getInstance().getRecognitionManager(config);
        try {
            Object o = recManager.recognizeText(bitmap, listener);
            Log.i("RESULT!", o.toString());
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (RecognitionFailedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T19:56:06.370

我使用以下代码让它工作。

在我的 RecognizeActivy 中拍照：

```
 final File photo = new File( Environment.getExternalStorageDirectory(), genPhotoFileName() );
            RecognizeActivity.this.imageUri = Uri.fromFile( photo );
            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE)
                .putExtra( MediaStore.EXTRA_OUTPUT, imageUri );  
            startActivityForResult(intent, REQUESTCODE_PHOTO);

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode == REQUESTCODE_PHOTO){
            if( resultCode == Activity.RESULT_OK){
                if(this.imageUri != null){      
                    try{
                        final AssetFileDescriptor assetFileDescriptor =
                            getApplicationContext().getContentResolver().openAssetFileDescriptor(this.imageUri, "r" );
                        long imageFileSize = assetFileDescriptor.getLength();
                        if( imageFileSize == AssetFileDescriptor.UNKNOWN_LENGTH ) {
                            throw new IOException( "UNKNOWN_LENGTH" );
                        }
                        InputStream is = assetFileDescriptor.createInputStream();
                        byte[] imageData = new byte[(int) imageFileSize];
                        is.read( imageData );
                        if(this.bitmap != null){
                            this.bitmap.recycle();
                            this.bitmap = null;
                            System.gc();
                        }
                        this.bitmap = BitmapFactory.decodeByteArray( imageData, 0, (int) imageFileSize, new Options() );
                        RecognizerManager.recognizeText(this.bitmap, this);
                    } catch(Exception e){
                        e.printStackTrace();
                    }
                } else{
                    Log.e("ERROR", "img = null");
                }
            }
        }
    } 
```

我正在回收位图，因为如果我不这样做，我会在拍了几张照片后得到 OutOfMemory 异常。

照片处理：

```
public static void recognizeText(final Bitmap bitmap, final RecognitionCallback progressListener){
    final RecognitionConfiguration config = new RecognitionConfiguration();

    config.setImageResolution(0);
    config.setImageProcessingOptions( RecognitionConfiguration.ImageProcessingOptions.PROHIBIT_VERTICAL_CJK_TEXT);
    for(RecognitionLanguage e : Engine.getInstance().getLanguagesAvailableForOcr()){
        if(e.equals(RecognitionLanguage.English) || e.equals(RecognitionLanguage.Dutch)){
            final Set<RecognitionLanguage> languages = EnumSet.noneOf( RecognitionLanguage.class );
            languages.add(e);
            config.setRecognitionLanguages(languages);
        }
    }

    RecognitionManager recManager = Engine.getInstance().getRecognitionManager(config);
    try {
        Object o = recManager.recognizeText(bitmap, progressListener);
        Log.i("RESULT!", o.toString());
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (RecognitionFailedException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T22:22:10.673

如果您在同一个活动中实现 RecognitionCallback，您应该先实现它，然后调用：recognitionText(this.bitmap, this) 而不是 RecognizerManager.recognizeText(this.bitmap, this); 也不要忘记实现所需的 3 个方法：onPrebuiltWordsInfoReady、onRecognitionProgress、onRotationTypeDetected

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(requestCode == REQUESTCODE_PHOTO){
            if( resultCode == Activity.RESULT_OK){
                if(this.imageUri != null){      
                    try{
                        final AssetFileDescriptor assetFileDescriptor =
                            getApplicationContext().getContentResolver().openAssetFileDescriptor(this.imageUri, "r" );
                        long imageFileSize = assetFileDescriptor.getLength();
                        if( imageFileSize == AssetFileDescriptor.UNKNOWN_LENGTH ) {
                            throw new IOException( "UNKNOWN_LENGTH" );
                        }
                        InputStream is = assetFileDescriptor.createInputStream();
                        byte[] imageData = new byte[(int) imageFileSize];
                        is.read( imageData );
                        if(this.bitmap != null){
                            this.bitmap.recycle();
                            this.bitmap = null;
                            System.gc();
                        }
                        this.bitmap = BitmapFactory.decodeByteArray( imageData, 0, (int) imageFileSize, new Options() );
                        // CALL recognizeText(this.bitmap, this); instead of RecognizerManager.recognizeText(this.bitmap, this);
                        recognizeText(this.bitmap, this);
                    } catch(Exception e){
                        e.printStackTrace();
                    }
                } else{
                    Log.e("ERROR", "img = null");
                }
            }
        }
    } 
```

# git - 无法使用 .gitignore 排除文件夹

> ID：12077206
> 
> 赞同：20
> 
> 时间：2012-08-22T16:09:42.237
> 
> 标签：git, gitignore

我无法将文件`.idea`夹中的文件排除在 git 跟踪之外。它与`.gitignore`文件处于同一级别，我的`.gitignore`包含：

```
.idea 
```

乃至：

```
idea 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-22T16:13:15.967

附加斜线以排除目录。

```
.idea/ 
```

# perl - 无法解析命令行长选项

> ID：12077207
> 
> 赞同：6
> 
> 时间：2012-08-22T16:09:42.393
> 
> 标签：perl, command-line-arguments, getopt-long

```
#!/usr/bin/perl -sw
use strict;
use warnings;
use Getopt::Long;

my $remote = 0;
my $test = 0;
GetOptions ('remote' => \$remote, 'test' => \$test);
print "$remote:$test\n"; 
```

perl test.pl --remote --test

上面打印“0:0”。我是 Perl 的新手，所以我无法确定为什么这不起作用。

我还从[http://perldoc.perl.org/Getopt/Long.html#Simple-options](http://perldoc.perl.org/Getopt/Long.html#Simple-options)运行了“简单选项”部分，但这也没有产生任何结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T16:23:59.477

我相信`-s`您在 she-bang 行中包含的命令行选项正在咬您。根据[perlrun 文档](http://perldoc.perl.org/perlrun.html)，`-s`命令行选项：

> 在程序名称之后但在任何文件名参数之前（或在 -- 的参数之前）启用命令行上的开关的基本开关解析。

如果您删除该选项，事情应该会如您所愿。我还建议您删除，`-w`因为您已经在使用该`use warnings`指令（该`use warnings`指令功能更全面，基本上替换了该`-w`选项）。

所以，长话短说，做你的第一行：

```
#!/usr/bin/perl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-01T08:26:13.550

请注意，如果通过 cmd 在 Windows 上运行脚本，则必须`perl`在脚本名称之前指定，否则 GetOptions 不起作用。

当我尝试在命令行上简单地调用我的 script.pl 而不先`perl`运行脚本但所有选项都没有被解析。

# qt - Qt QNetworkAccessManager 和多个 QNetworkReply

> ID：12077211
> 
> 赞同：4
> 
> 时间：2012-08-22T16:09:58.367
> 
> 标签：qt, http, web, qnetworkaccessmanager

我有两个得到 QNetworkRequest。

我想处理来自不同方法的完成信号。

例如这是代码

```
 MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    GetUserData();
    connect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(GetUserDataCompleted(QNetworkReply*)));

    GetMessages();
    connect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(GetMessagesCompleted(QNetworkReply*)));
} 
```

这是我的一种方法

我试过 replay->deleteLater(); 但同样的结果

请给我一些有用的建议

```
void MainWindow::GetUserDataCompleted(QNetworkReply *replay)
{
    if(replay->error() == QNetworkReply::NoError)
    {
        QString getData = replay->readAll();
        QMessageBox msg;

        if(getData == "1")
        {
            msg.setText("User Is not Exits");
        }
        else
        {
            QDomDocument doc;

            if(doc.setContent(getData))
            {
                QDomElement domElem = doc.documentElement();

                QDomNode n = domElem.firstChild();
                while(!n.isNull()) {
                    QDomElement e = n.toElement(); // try to convert the node to an element.
                    if(!e.isNull()) {
                        msg.setText(e.namedItem("Image").childNodes().at(0).nodeValue());
                        msg.exec();
                    }
                    n = n.nextSibling();
                }
            }

            replay->deleteLater();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T02:51:58.560

您可以创建一个`RequestSender`负责处理请求的类。

每个`RequestSender`对象将处理一个唯一的请求。在创建`QNetworkRequest`将要发送的内容时，将使用该属性`RequestSender`“标记”它自己的请求。`originatingObject`此属性指示哪个对象发送了请求。当一个`RequestSender`对象收到回复时，它会通过`originatingObject`属性查看它是否是请求的发送者。有关更多信息`originatingObject`，您可以参考此处的文档：http: [//qt-project.org/doc/qt-4.8/qnetworkrequest.html#originatingObject](http://qt-project.org/doc/qt-4.8/qnetworkrequest.html#originatingObject)

以下是您可以执行的操作的示例。

请求者.hpp：

```
class RequestSender {
    public:
        RequestSender();
        ~RequestSender();
        void createRequest(/* Request parameters */);

    public slots:
        void endRequest(QNetworkReply* replay);
}; 
```

请求者.cpp：

```
RequestSender::RequestSender() {
    connect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(endRequest(QNetworkReply*)));
}

RequestSender::~RequestSender() {
    disconnect(nam, SIGNAL(finished(QNetworkReply*)), this, SLOT(endRequest(QNetworkReply*)));
}

void RequestSender::createRequest(/* Request parameters */) {
    QNetworkRequest * myRequest = 0;

    // Build myRequest with the request parameters

    myRequest->setOriginatingObject(this);
    nam->get(*myRequest);

}

void RequestSender::endRequest(QNetworkReply* replay) {
    if (replay->request().originatingObject() != this) {
        // That's not the request sent by the object -> stop the method here !
        return;
    }

    // Treatments on replay
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T17:28:49.253

您对 QNetworkAccessManager 执行的每个操作都将返回一个 QNetworkReply。这也有一个信号finished()。也许您可以将此信号连接到您的不同插槽。

# node.js - node.js 读取 USB 端口信号

> ID：12077223
> 
> 赞同：10
> 
> 时间：2012-08-22T16:10:20.760
> 
> 标签：node.js, serial-port

我已经使用 npm.( )为 node.js 安装了**串行端口模块。**`npm install serialport`现在我想通过我的电脑的usb端口从我的android手机发送一些消息到节点应用程序（假设节点可以读取串行端口信号）。有没有人这样做过？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:32:14.677

为什么，是的，这当然是可行的。[serialport 包主页](https://github.com/voodootikigod/node-serialport)本身列出了很多示例。

您的 node.js 应用程序将从...开始

```
var SerialPort = require("serialport").SerialPort
var serialPort = new SerialPort("/dev/tty-usbserial1");

serialPort.on('data', function(data) { /* processing data */ }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-15T10:49:33.073

在 Windows 上测试你的端口（*你可能需要安装 sf " **npm install sf** "*）：

```
var serialport = require('serialport');
var sf = require('sf');

serialport.list(function (err, results) {
  if (err) {
    throw err;
  }

  for (var i = 0; i < results.length; i++) {
    var item = results[i];
    console.log(sf('{comName,-15} {pnpId,-20} {manufacturer}', item));
  }
}); 
```

输出应该是这样的：

COM8 FTDIBUS\VID_0403+PID_6001+A100DKP7A\0000 FTDI
COM1 ACPI\PNP0501\4&2E24A907&0（标准型）

现在使用您的设备连接到的端口，在我的例子中是 COM8：

```
var SerialPort = require("serialport").SerialPort
var serialPort = new SerialPort("COM8"); 
```

问候

# python - Python MIME Base64 编码

> ID：12077225
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:10:22.490
> 
> 标签：python

我需要生成一个包含 Base64 编码文件的 MIME 附件。但是，我还需要允许的是在没有任何新行的情况下对附件进行***编码***。我的代码如下：

```
msg_obj = MIMEMultipart()
msg_atch = MIMEBase(mime_type, mime_subtype)
msg_atch.set_payload(file_data)
Encoders.encode_base64(msg_atch)
msg_obj.attach(msg_atch) 
```

我试图执行以删除附加 base64 消息中的新行是这样的：

```
msg_obj = MIMEMultipart()
msg_atch = MIMEBase(mime_type, mime_subtype)
msg_atch.set_payload(file_data)
Encoders.encode_base64(msg_atch)
msg_atch.strip()
msg_obj.attach(msg_atch) 
```

然而，这并没有改变数据的结果。如果有人对如何允许这样做有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:35:22.820

我注意到在您的第二个示例代码的倒数第二行中，您调用了该`msg_atch.strip()`函数。这样做的问题*是没有*任何功能`strip()`。`MIMEBase`

您可能想要做的事情是这样的：

```
msg_obj = MIMEMultipart()
msg_atch = MIMEBase(mime_type, mime_subtype)
msg_atch.set_payload(file_data)
Encoders.encode_base64(msg_atch)
msg_atch._payload = msg_atch._payload.replace('\n','')
msg_obj.attach(msg_atch) 
```

该`MIMEBase._payload`字符串是附件使用的实际（在本例中为 base64）内容。

此代码将采用 MIMEBase 附件的内部内容并消除额外的换行符 - 包括为“人类可读性”提供 base64 文本的良好格式的内部换行符（我的问题是他们为什么还要打扰）。如果您只想在最后摆脱换行符，只需使用`msg_atch._payload = msg_atch._payload.rstrip('\n')`.

请记住，附件的标题（`Content-Type: application/octet-stream`和`MIME-Version: 1.0`是部分）**需要**这些换行符。

另外，请记住，您通常不应该以这种方式编辑内部变量。然而，我觉得 Python 的优点之一是类中实际上没有私有成员，因此您可以在类中修改任何您想要的内容。我们可以为所欲为，尤其是在特殊情况下。

快乐编码！

# linux - 如何在使用套接字标识符时获得拥塞窗口

> ID：12077230
> 
> 赞同：1
> 
> 时间：2012-08-22T16:10:32.987
> 
> 标签：linux, ubuntu, tcp

我在客户端和服务器之间建立了 TCP 连接。我有连接的套接字标识符，我想知道如何使用它来获取 tcp 拥塞窗口。我尝试使用`tcp.info`结构。但我观察到它在整个会话期间从未改变。有没有其他办法，我可以得到拥塞窗口？

套接字缓冲区大小是否也指定了窗口大小？我想它不是。

任何可以执行上述操作的系统调用？

# ruby-on-rails - 运行配置文件测试时出现 Ruby 分段错误

> ID：12077232
> 
> 赞同：4
> 
> 时间：2012-08-22T16:10:39.413
> 
> 标签：ruby-on-rails, ruby, segmentation-fault, ruby-prof

运行时出现以下分段错误错误`rake test:profile`。我正在使用红宝石`1.9.2p290 (2011-07-09 revision 32553) [i686-linux]`。但是 Ruby 1.9.2 的 p320 版本也会发生这种情况，Ruby 1.9.3 也会发生类似的错误。

`active_support/testing/performance/ruby.rb:36`居然说只是`RubyProf.pause`。我正在使用配置文件选项运行测试`:runs => 5, :metrics => [:cpu_time], :formats => [:tree]`。也可以在帖子末尾查看我的宝石清单。

任何建议将不胜感激。

错误跟踪：

```
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance/ruby.rb:36: [BUG] Segmentation fault
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]

-- control frame ----------
c:0017 p:0058 s:0062 b:0062 l:000061 d:000061 METHOD /home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance/ruby.rb:36
c:0016 p:0060 s:0059 b:0059 l:000058 d:000058 METHOD /home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:140
c:0015 p:0044 s:0053 b:0053 l:000043 d:000052 BLOCK  /home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:52
c:0014 p:---- s:0049 b:0049 l:000048 d:000048 FINISH
c:0013 p:---- s:0047 b:0047 l:000046 d:000046 CFUNC  :each
c:0012 p:0056 s:0044 b:0044 l:000043 d:000043 METHOD /home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:50
c:0011 p:0091 s:0039 b:0039 l:000020 d:000038 BLOCK  /home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:656
c:0010 p:---- s:0034 b:0034 l:000033 d:000033 FINISH
c:0009 p:---- s:0032 b:0032 l:000031 d:000031 CFUNC  :each
c:0008 p:0026 s:0029 b:0029 l:000020 d:000028 BLOCK  /home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:650
c:0007 p:---- s:0026 b:0026 l:000025 d:000025 FINISH
c:0006 p:---- s:0024 b:0024 l:000023 d:000023 CFUNC  :each
c:0005 p:0082 s:0021 b:0021 l:000020 d:000020 METHOD /home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:649
c:0004 p:0188 s:0016 b:0016 l:000015 d:000015 METHOD /home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:609
c:0003 p:0057 s:0007 b:0007 l:001a1c d:000360 BLOCK  /home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:508
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:00207c d:00207c TOP
---------------------------
-- Ruby level backtrace information ----------------------------------------
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:508:in `block in autorun'
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:609:in `run'
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:649:in `run_test_suites'
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:649:in `each'
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:650:in `block in run_test_suites'
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:650:in `each'
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/minitest/unit.rb:656:in `block (2 levels) in run_test_suites'
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:50:in `run'
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:50:in `each'
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:52:in `block in run'
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance.rb:140:in `run_profile'
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/activesupport-3.2.8/lib/active_support/testing/performance/ruby.rb:36:in `run'

-- C level backtrace information -------------------------------------------
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_vm_bugreport+0x72) [0xb76aef72]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x54123) [0xb758b123]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_bug+0x33) [0xb758be13]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x1090c3) [0xb76400c3]
[0xb775440c]
/home/manuel/.rvm/gems/ruby-1.9.2-p290@dev3dynamic/gems/ruby-prof-0.11.2/lib/ruby_prof.so(+0x32c1) [0xb5f8a2c1]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_threadptr_exec_event_hooks+0xe4) [0xb76b3434]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16ca1d) [0xb76a3a1d]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16d460) [0xb76a4460]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_yield+0x55) [0xb76a92a5]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_ary_each+0x4a) [0xb755981a]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16345d) [0xb769a45d]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x1711f0) [0xb76a81f0]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x167ea0) [0xb769eea0]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16d460) [0xb76a4460]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_yield+0x55) [0xb76a92a5]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_ary_each+0x4a) [0xb755981a]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16345d) [0xb769a45d]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x1711f0) [0xb76a81f0]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x167ea0) [0xb769eea0]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16d460) [0xb76a4460]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_yield+0x55) [0xb76a92a5]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_ary_each+0x4a) [0xb755981a]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16345d) [0xb769a45d]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x1711f0) [0xb76a81f0]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x167ea0) [0xb769eea0]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x16d460) [0xb76a4460]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_vm_invoke_proc+0xf9) [0xb76a5459]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_proc_call+0x57) [0xb7596d87]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_call_end_proc+0x24) [0xb758f294]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(rb_exec_end_proc+0x208) [0xb7591af8]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(+0x5abb9) [0xb7591bb9]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(ruby_cleanup+0x128) [0xb7591d38]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/lib/libruby.so.1.9(ruby_run_node+0x3e) [0xb759209e]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/bin/ruby(main+0x68) [0x8048668]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3) [0xb73b8113]
/home/manuel/.rvm/rubies/ruby-1.9.2-p290/bin/ruby() [0x8048691]

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Aborted
rake aborted!
Command failed with status (134): [/home/manuel/.rvm/rubies/ruby-1.9.2-p290/b...]

Tasks: TOP => test:profile
(See full trace by running task with --trace) 
```

宝石清单：

```
actionmailer (3.2.8)
actionpack (3.2.8)
active_scaffold_vho (3.1.4)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
acts_as_versioned (0.2.3)
addressable (2.2.8)
airbrake (3.1.2)
analytics-logger (0.3.7)
ancestry (1.3.0)
annotate (2.5.0)
archive-tar-minitar (0.5.2)
arel (3.0.2)
authlogic (3.1.3)
authlogic_device_tokens (0.1.1)
aws-sdk (1.5.8)
best_in_place (0.2.3)
bootstrap-will_paginate (0.0.7)
bson (1.6.4)
bson_ext (1.6.4)
builder (3.0.0)
bundler (1.1.5)
capybara (1.1.2)
central_logger (0.3.2)
childprocess (0.3.4)
columnize (0.3.6)
daemons (1.1.8)
database_cleaner (0.8.0)
deadlock_retry (1.0.2)
delayed_job (3.0.3)
delayed_job_active_record (0.3.2)
diff-lcs (1.1.3)
engineyard (1.4.29)
engineyard-serverside-adapter (1.6.4)
erubis (2.7.0)
escape (0.0.4)
factory_girl (3.6.0)
fast_xs (0.8.0)
fastercsv (1.5.5)
ffi (1.1.2)
formtastic (2.2.1)
headless (0.3.1)
highline (1.6.13)
hike (1.2.1)
hpricot (0.8.6)
httparty (0.8.3)
i18n (0.6.0)
imagesize (0.1.1)
journey (1.0.4)
jquery-rails (2.0.2)
json (1.7.5)
json_pure (1.7.4)
kgio (2.7.4)
launchy (2.0.5)
libwebsocket (0.1.5)
linecache19 (0.5.12)
liquid (2.3.0)
macaddr (1.6.1)
mail (2.4.4)
memcache-client (1.8.5)
mime-types (1.19)
mongo (1.6.2)
mongoid (2.4.11)
multi_json (1.3.6)
multi_xml (0.5.1)
multipart-post (1.1.5)
mysql2 (0.3.11)
net-ssh (2.2.2)
newrelic_rpm (3.4.1)
nokogiri (1.5.5)
open4 (1.3.0)
polyglot (0.3.3)
pr_geohash (1.0.0)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8)
railties (3.2.8)
raindrops (0.10.0)
rake (0.9.2.2)
rdoc (3.12)
recurly (0.4.14)
redcarpet (2.1.1)
redis (3.0.1)
render_component_vho (3.2.1)
rest-client (1.6.7)
rinku (1.7.0)
rsolr (1.0.6)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.2)
rspec-mocks (2.11.1)
rspec-rails (2.11.0)
ruby-dbus (0.7.2)
ruby-debug-base19 (0.11.25)
ruby-debug19 (0.11.6)
ruby-prof (0.11.2)
ruby_core_source (0.1.5)
rubyzip (0.9.9)
selenium-webdriver (2.25.0)
shotgun (0.9)
spork (0.9.2)
sprockets (2.1.3)
sqlite3 (1.3.6)
stringex (1.4.0)
sunspot (1.3.0)
sunspot_cell (0.1.2)
sunspot_index_queue (1.1.3)
sunspot_rails (1.3.0)
sunspot_solr (1.3.3)
systemu (2.5.2)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
unicorn (4.3.1)
uuid (2.3.5)
uuidtools (2.1.3)
validatable (1.6.7)
watir-webdriver (0.6.1)
will_paginate (3.0.3)
workflow (0.8.1)
xpath (0.1.4)
yajl-ruby (1.1.0)
yard (0.8.2.1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T23:10:00.867

ruby-prof 在 1.9.2 上存在[已知问题](http://www.devheads.net/development/ruby/core/segmentation-fault-when-using-ruby-prof-and-ruby-192.htm)。如果由于某种原因您仍然停留在 1.9.2 上，您可以尝试使用[wycat 的 ruby​​-prof 分支](https://github.com/wycats/ruby-prof)，这应该可以改善段错误。

# android - Android 上是否总是有一个计费服务实例？

> ID：12077237
> 
> 赞同：0
> 
> 时间：2012-08-22T16:10:57.420
> 
> 标签：android, service

在 Google 的 In App Billing 示例（Dungeons）中，在主 Activity onCreate 中创建了一个 Service 实例：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mHandler = new Handler();
    mDungeonsPurchaseObserver = new DungeonsPurchaseObserver(mHandler);
    mBillingService = new BillingService();
    mBillingService.setContext(this);
    ....
 } 
```

在接收器中，服务由 context.startService 启动。

```
private void notify(Context context, String notifyId) {
    Intent intent = new Intent(Consts.ACTION_GET_PURCHASE_INFORMATION);
    intent.setClass(context, BillingService.class);
    intent.putExtra(Consts.NOTIFICATION_ID, notifyId);
    context.startService(intent);
} 
```

会以某种方式通知使用 onCreate 中创建的某个实例，还是会创建该类的另一个实例作为实际服务运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:23:36.950

“总是一个实例”是什么意思？那很重要吗？据我所知，当接收者得到它时，它会启动服务并检查用户是否实际购买了它（即获取购买信息）。服务完成后，它会向您发送一条广播消息，以便您采取相应措施。我不认为它总是在后台运行。

# email - 当操作在 Alfresco 4 中发送邮件时，对节点上的文档执行操作的含义？

> ID：12077238
> 
> 赞同：0
> 
> 时间：2012-08-22T16:11:02.333
> 
> 标签：email, alfresco

当我有代码时：

```
var mail = actions.create("mail");
mail.parameters.to = "...";
mail.parameters.subject = "...";
mail.parameters.from = "...";
mail.parameters.text = "some text, in case template is not found";
//// execute action against a document   
var doc = search.findNode("workspace://SpacesStore/eafb46a7-a139-42e1-b297-71402d279b68");
mail.execute(doc); 
```

我很好奇，为执行发送电子邮件提供节点是什么意思？这会影响某处的某些东西还是没有改变？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:53:59.450

动作通常需要一个上下文来运行。该上下文通常是一个节点（如文件夹或文档）。在这种情况下，它允许操作和 freemarker 邮件模板从文档中提取属性。就像您可能希望您的电子邮件具有文档名称或其他一些元数据。

“对节点执行的操作”是否受到对它运行的操作的影响取决于操作中的代码。在邮件操作的情况下，它不应该修改节点。

# apache-flex - 在 64 位 Windows 7 上调试 Flex 3

> ID：12077239
> 
> 赞同：0
> 
> 时间：2012-08-22T16:11:04.967
> 
> 标签：apache-flex, flex3

有谁知道任何 Flash 9 调试器是否适用于 64 位 Windows 7？我为第 9 版 Flash 调试器找到的存档没有提到 64 位。我正在更新我多年前创建的项目。

我尝试为 Flash 11 安装最新的调试器，但奇怪的事情正在发生。我明确初始化和分配的字符串变量没有显示在 Watcher 中，说“评估期间出错”，我什至不确定代码当前是否在调试模式下正确执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:20:11.897

> 有谁知道任何 Flash 9 调试器是否适用于 64 位 Windows 7

但是，没有 64 位版本的 Flash 调试器，因此您必须使用 32 位调试器。但是，是的，32 位 Flash 调试器应该可以在 64 位 Windows 7 上正常工作。

我想我目前在 64 位 Win7 上安装了 11.2 调试器，没有任何问题。

我确实偶尔会看到 Flash Builder 监视列表运行不稳定并显示与您描述的错误类似的情况。但这种情况很少见，通常通过启动新的/干净的调试会话来解决。不过，我从未尝试过复制该错误。

我建议删除所有监视变量，清理项目，然后重试。慢慢添加你想看的东西，看看错误是否再次发生。

# java - SwingUtilities.invokeLater 是什么

> ID：12077245
> 
> 赞同：15
> 
> 时间：2012-08-22T16:11:20.027
> 
> 标签：java, swing, swingutilities, invokelater

> **可能重复：**
> [SwingUtilities.invokeLater 做什么？](https://stackoverflow.com/questions/6567870/what-does-swingutilities-invokelater-do)
> [SwingUtilities.invokeLater](https://stackoverflow.com/questions/7196889/swingutilities-invokelater)

我已经看过数百次这样的小代码：

```
public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
          createAndShowGUI();
        }
    });
} 
```

现在我的问题是：做`invokeLater()`什么？如果我只是在主线程中创建并显示我的 GUI，会发生什么样的坏事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:17:01.197

**1.** `Event Dispatcher Thread`是GUI线程。

**2.**如果你在谈论`main() method`...那么**它在 Java Gui 中的寿命并不长**。 `main()`在 EDT 中调度 GUI 的构建后的方法退出，现在它的**EDT 处理 GUI。**

**3.** `invokeLater`表示此调用将在事件放入Event Dispatcher Queue 时**立即返回**`run()`，并且方法将**异步运行...**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T16:14:00.447

Swing 不是线程安全的，对 Swing 对象的所有更改都必须在 Event Dispatch Thread 中执行。如果你试图在它之外运行你的代码，你会得到未指定的行为，这在某些时候可能会变得很奇怪。

相反，Eclipse 使用的 SWT/JFace GUI 框架在每个公共入口点上断言正确的线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T16:15:11.913

如果您在遵循[指南](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)的同时从 EDT 更新它，则不会发生任何不好的事情。

那是...

> 如果从事件分派线程调用​​ invokeLater ——例如，从 JButton 的 ActionListener —— doRun.run() 仍将被推迟，直到所有未决事件都已处理完毕。

[来源](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)

如果不是这种情况，`invokeLater()`则需要。

它调度一个`Runnable`将在 EDT（事件调度线程）上执行的事件。

# matlab - 如何使用 MATLAB 代码进行蒙特卡罗模拟？

> ID：12077246
> 
> 赞同：-3
> 
> 时间：2012-08-22T16:11:28.357
> 
> 标签：matlab, statistics, montecarlo

```
`n = 10000; 
Min= Minimum Value;
Max= Maximum Value;
Mode= Most Likely Value;
X = [Min=5,Mode=7,Max=10];
Y = [Min=3,Mode=5,Max= 10];
Z = [Min=5,Mode=7,Max=12];
P= X*Y*Z;` 
```

我有三个参数，例如 X =( Min=5,Mode=7,Max=10); Y=(Min=3,Mode=5,Max=10); Z=（最小=5，模式=7，最大=12）。P = X *Y* Z；现在我如何编写一个 MATLAB 代码进行 10000 次迭代的蒙特卡罗模拟以获得 P 值？以及如何绘制输出 P 值的正态分布和累积分布？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:24:07.860

首先，您应该计算每个分布的均值和方差，用正态分布对其进行建模，然后：

```
Xrand = (Xvariance*randn(1,n)) + Xmean*ones(1,n);
Yrand = (Yvariance*randn(1,n)) + Ymean*ones(1,n);
Zrand = (Zvariance*randn(1,n)) + Zmean*ones(1,n);

P = Xrand.*Yrand.*Zrand;

plot(P); 
```

如果您不想使用正态分布建模，那么您将需要一些工具箱或自己实现分布。

# jquery - 使用 jquery 填充 Telerik 下拉列表

> ID：12077252
> 
> 赞同：0
> 
> 时间：2012-08-22T16:11:42.133
> 
> 标签：jquery, asp.net-mvc, telerik

我在使用 jquery 填充 Telerik 下拉列表时遇到问题。我收到以下错误：

> 'get(...).options' 为空或不是对象

在线的：

> $("#courseID").get(0).options.length = 0;

这是我的 Telerik 下拉列表：

```
 <%= Html.Telerik().DropDownList()
                .Name("courseID")
                .HtmlAttributes(new{ @id="courseID"})
                %> 
```

这是我尝试使用 jquery 填充它的方式：

我在“StudentID”focusout 事件上调用 populateDDL 函数，这里是函数。

```
function populateDDL() {

var link = '/Student/EnrollerCourse';
$.ajax({
    type: 'POST',
    url: link,
    data: { id: $('#StudentId').val() },
    dataType: 'json',
    success: function (result) {
         $("#courseID").get(0).options.length = 0;
        $("#courseID").get(0).options[0] = new Option("Select", "Select");
        $.each(result.courseID, function (item, value) {
            var courseID = value;
            $("#courseID").get(0).options[$("#courseID").get(0).options.length] = new Option(courseID);
        });          
    },
    error: function (result) {
        alert("Failed")
    }
});
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:11:12.977

**更新 8/24**

对困惑感到抱歉。正如我所说 - 我已经创建了一个 Visual C# - Web 项目 - 类型为“RadControls for Web Application”。这是一个屏幕截图：

![Rad 控制 Web 应用程序](../Images/720004ec46ccf8f2f0cbae425f368edd.png)

修改后的 Site.Master 代码如下所示：

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>

<!DOCTYPE html>
<html>
<head runat="server">
    <title><asp:ContentPlaceHolder ID="TitleContent" runat="server" /></title>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
<%: Html.Telerik().StyleSheetRegistrar().DefaultGroup(group => group.Add("telerik.common.css").Add("telerik.metro.css").Combined(true).Compress(true)) %></head>

<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <%: Html.Telerik().Menu()
                    .Name("menu")
                    .Items(menu => {
                        menu.Add().Text("Home").Action("Index", "Home");
                        menu.Add().Text("About").Action("About", "Home");
                    })
            %>
        </header>
        <section id="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server" />
            <footer>
            </footer>
        </section>
    </div>
<%: Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Combined(true).Compress(true)) %></body>
</html> 
```

请注意，我通过脚本标记添加了 JQuery 引用。那是我所做的唯一改变。其余代码保持原样。

我已经压缩了我的代码并上传到以下位置：

[http://sdrv.ms/T1EdBK](http://sdrv.ms/T1EdBK)

您可以下载相同的内容并查看代码。您需要从您的系统中设置对 Telerik.Web.Mvc.dll 的引用

希望这能解决你的问题

* * *

Telerik MVC 扩展控件具有丰富的客户端 API。因此，如果您使用了 DropDownList - 您将无法使用 jquery 语法 $("#id") 获取控件。相反，您将需要使用以下内容：

```
var dropDownList = $("#DropDownList").data("tDropDownList"); 
```

这是我能够为您的这种情况启动的代码片段：

看法：

```
 <%= Html.Telerik().DropDownList()
                      .Name("courseID")
                      .HtmlAttributes(new {@id="courseID" })
  %>
  <input type="button" id="btnPopulateDropdown" onclick="onDropDownListDataBinding()" value="Populate Dropdown" /> 
```

所以我有一个用名称和 id 属性定义的下拉列表。我有一个按钮，用于模拟您的失焦场景。想法是单击按钮时，我们将触发 AJAX 请求并获取 JSON 有效负载。我们将使用 JSON 有效负载来绑定下拉列表选项。

Java脚本：

```
function onDropDownListDataBinding(e) {
                var dropDownList = $('#courseID').data('tDropDownList');

                //Assume that we make a AJAX call and we have the JSON payload with us 

                dropDownList.dataBind([
                                        { Text: "Select", Value: "Select"},
                                        { Text: "Product 1", Value: "1" },
                                        { Text: "Product 2", Value: "2" },
                                        { Text: "Product 3", Value: "3" },
                                        { Text: "Product 4", Value: "4" },
                                        { Text: "Product 5", Value: "5" },
                                        { Text: "Product 6", Value: "6" },
                                        { Text: "Product 7", Value: "7" },
                                        { Text: "Product 8", Value: "8" },
                                        { Text: "Product 9", Value: "9" },
                                        { Text: "Product 10", Value: "10" },
                                        { Text: "Product 11", Value: "11" },
                                        { Text: "Product 12", Value: "12" },
                                        { Text: "Product 13", Value: "13" },
                                        { Text: "Product 14", Value: "14" },
                                        { Text: "Product 15", Value: "15" },
                                        { Text: "Product 16", Value: "16" },
                                        { Text: "Product 17", Value: "17" },
                                        { Text: "Product 18", Value: "18" },
                                        { Text: "Product 19", Value: "19" },
                                        { Text: "Product 20", Value: "20" }
                                    ]);
                                        dropDownList.select(0);
            } 
```

如您所见，函数的第一行是关于获取对下拉列表的引用。然后假设您发出了 AJAX 请求并且您已获得 JSON 有效负载。您使用 databind 方法来绑定 JSON 数据。然后我使用 select 方法将第一个选项设置为下拉列表中的选择项。

此场景在我们的在线演示应用程序页面中展示，网址为： http: [//demos.telerik.com/aspnet-mvc/combobox/clientsidebinding](http://demos.telerik.com/aspnet-mvc/combobox/clientsidebinding)

希望这能回答你的问题。

Lohith (Tech Evangelist, Telerik India)

# java - 任何可用于 LiquiBase 的 API

> ID：12077254
> 
> 赞同：3
> 
> 时间：2012-08-22T16:12:01.720
> 
> 标签：java, spring, maven, liquibase

如果当前 Spring Web 应用程序（使用 OpenJPA）有新的服务包，则用户界面需要提供升级数据库更改的选项。

似乎 LiquiBase 是一个不错的选择。但是我还没有找到任何关于 LiquiBase API 的文章或文档可以检测到新的架构更改（来自数据库或更改日志）。看起来 LiquiBase 更像是开发级别的“静默升级”选项，因此每次开发人员都可以创建新的更改日志并让 Maven 自动升级数据库架构。

但是我们有没有什么选项可以让前端用户单击一个按钮来根据他们的选择升级架构，然后在失败时显示用户错误并回滚？一般来说，有一些 Java API 可以用 Spring 框架包装吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:33:59.133

我不得不说一个非常讨厌的 Liquibase，主要是因为我出于某种原因无法让它工作。

您可能想尝试一下：

[http://flywaydb.org/](http://flywaydb.org/)

否则（因为这听起来像是您运送产品）您可以创建两个安装：一个旧版本和一个新版本。

为每次安装进行模式转储，然后对它们进行比较。根据差异创建一个向上和向下的 sql 脚本。

# oracle - TOAD for Oracle - 自动完成

> ID：12077258
> 
> 赞同：1
> 
> 时间：2012-08-22T16:12:18.307
> 
> 标签：oracle, toad

也许这是一个新手问题，但我是甲骨文世界的新手。我正在为 Oracle 9 使用 TOAD，并且有 2 台使用 Oracle 10g 的服务器，当我连接到服务器时 AI 可以使用 TOAD 的自动完成功能，但是当我连接到服务器 B 时，自动完成不会出现。两台服务器具有相同的数据库，A 用于开发，B 用于生产。我将衷心感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:21:00.833

我猜您在生产中连接到的任何架构都缺乏 TOAD 用于自动完成的系统视图的权限。您能否在生产环境中运行此查询，例如：

`Select column_name, data_type, column_id FROM SYS.user_tab_columns`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:12:52.150

如果您不指定架构，就会发生这种情况。可能在测试服务器上您使用实际模式登录，而在生产中您有一些只读用户。所以也许你用用户 P 登录 A，用用户 R 登录 B。所以你可能必须输入 P.MYTABLE 才能在 B 上自动完成。

# c++ - const_cast std::vector

> ID：12077259
> 
> 赞同：2
> 
> 时间：2012-08-22T16:12:22.817
> 
> 标签：c++, const-cast

我有一个带有类型的向量，`const std::vector<const Array*> &objects`它作为参数传递给该方法。

我想 const_cast 但由于某种原因我不能这样做。我试过了：

`vector<const Array*> obj = const_cast<const std::vector<const Array*> >(objects);`

和其他一些方式，但它一直在抱怨。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:15:54.657

首先，**不要**。更改函数的签名以获取非常量引用，这样做会冒 UB 风险：

```
const std::vector<const Array*> myData = /* fill */;
yourFunction(myData); // try to modify my stuff and you get UB! 
```

* * *

现在，如果您仍然确信无论出于何种原因（如遗留 API）都必须这样做，它是这样完成的：

```
vector<const Array*>& obj = const_cast<std::vector<const Array*>&>(objects); 
```

现在`obj`和`objects`引用同一个对象，但`obj`不是 const 限定的。至此，一切都已明确；它只是修改一个 UB 的 const*对象*，所以要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:14:28.260

> 我需要将它传递给一个需要对其进行迭代的函数（它不需要任何修改）

使用`const_iterator`.

您想将 a`const std::vector<const Array*>`转换为 a`const std::vector<const Array*>`吗？他们不是一模一样吗。如果要删除 const：

```
std::vector<const Array*> obj = const_cast<std::vector<const Array*> >(objects);
//                                         |
//                                      no const 
```

但更重要的问题是：**为什么**？如果`objects`是`const`，你不应该修改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:17:50.577

您不必在此处强制转换，因为无论如何您都在复制构造内容，并且复制构造函数接受`const`引用。

说啊：

```
std::vector<const Array*> obj = objects; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T16:20:01.100

如果您确定要做什么，这里是如何获取对向量的非常量引用。

```
const std::vector<const Array*> &objects;

vector<const Array*>& obj = const_cast<std::vector<const Array*>& >(objects); 
```

# google-bigquery - Bigquery：向/从云存储导出/导入数据失败

> ID：12077272
> 
> 赞同：0
> 
> 时间：2012-08-22T16:13:38.450
> 
> 标签：google-bigquery

提取作业日志 12:02pm publicdata:samples.shakespearetogs://OfficeTest/Shakes.csv 错误：后端错误。作业中止。作业 ID：job_8373291c210f4d04aab9ee04efa3559b 开始时间：2012 年 8 月 22 日下午 12:02 结束时间：2012 年 8 月 22 日下午 12:03 源表：publicdata:samples.shakespeare 源 URI：gs://OfficeTest/Shakes.csv

* * *

从 GS 错误导入的作业日志：无法读取源 URI：gs://OfficeTest/FLAT_CMPL.txt 作业 ID：job_900a741b2eab4f95924a293110fa562f 开始时间：2012 年 8 月 22 日上午 9:59 结束时间：2012 年 8 月 22 日上午 9:59 目标表： 726753267556:Test2.test 源 URI：gs://OfficeTest/FLAT_CMPL.txt

我能够上传一个简单的 csv 文件并且它有效。我是否缺少任何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:06:43.230

OfficeTest 不是有效的存储桶名称 - 根据[此](https://developers.google.com/storage/docs/bucketnaming)页面，存储桶名称必须全部小写。使用 gs://officetest/ 重试...

我将修复 BigQuery 验证代码，以便我们更早地将其标记为错误。

# vba - 在访问文本中导出 sql 查询

> ID：12077273
> 
> 赞同：1
> 
> 时间：2012-08-22T16:13:38.690
> 
> 标签：vba, ms-access

我目前在访问中使用 VBA 将数据从直通查询导出到文本，并且我想添加到 VBA。一旦它导出数据，我希望它将实际的 sql 查询导出到单独的文本中。有谁知道如何添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:46:07.167

您可以使用 FileSystemObject。下面的示例使用后期绑定，但您可以设置对 Windows 脚本宿主的引用并使用注释类型。

```
Dim fs As Object ''FileSystemObject
Dim tsOut As Object ''TextStream

sFileOut = "z:\docs\FileOut.txt"

Set fs = CreateObject("Scripting.FileSystemObject")
Set tsOut = fs.OpenTextFile(sFileOut, 8) ''ForAppending
''Or
'' Set tsOut = fs.CreateTextFile(sFileOut, True) ''Overwrite

sSQL = CurrentDB.QueryDefs(qry).SQL

tsOut.WriteLine sSQL

tsOut.Close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T19:00:43.693

如果您已将导出字符串导出到文本文件，则可以从以下位置获取查询的 SQL 文本：

```
Dim strSQL as string
strSQL = CurrentDb.QueryDefs("Your query name here").SQL 
```

# java - 在 OSGi 包中使用 Spring AOP

> ID：12077274
> 
> 赞同：2
> 
> 时间：2012-08-22T16:13:39.740
> 
> 标签：java, maven, osgi, spring-aop, apache-karaf

我正在尝试将`Spring AOP`用于记录目的。我已经设置了日志包，以及其中的`OSGi`服务。

我有其他`OSGi`捆绑包使用来自日志记录捆绑包的服务作为`OSGi`参考。

日志记录包已部署`Apache Karaf`并正在运行。我无法部署其他捆绑包。

我的 bundle 中的 spring 配置是这样的：

```
<osgi:reference id="loggingIterceptor" interface="com.groupgti.commons.log.LoggingInterceptorAdvice"/>
<aop:config>
    <aop:pointcut id="logger" expression="@annotation(com.groupgti.esb.assessments.kenexa.log.InOutLogger)"/>
    <aop:advisor pointcut-ref="logger" advice-ref="loggingIterceptor"/>
</aop:config> 
```

当我尝试启动我的捆绑包时，它给了我：

```
java.lang.NoClassDefFoundError: org/aspectj/weaver/reflect/ReflectionWorld$ReflectionWorldException
    at java.lang.Class.getDeclaredMethods0(Native Method)[:1.6.0_33]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)[:1.6.0_33]
    at java.lang.Class.getDeclaredMethods(Class.java:1791)[:1.6.0_33]
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:136)
    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.checkConfigurationClassCandidate(ConfigurationClassBeanDefinitionReader.java:318)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:175)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:161)
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.invokeBeanFactoryPostProcessors(AbstractDelegatedExecutionApplicationContext.java:479)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.invokeBeanFactoryPostProcessors(AbstractDelegatedExecutionApplicationContext.java:467)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.invokeBeanFactoryPostProcessors(AbstractDelegatedExecutionApplicationContext.java:395)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$3.run(AbstractDelegatedExecutionApplicationContext.java:281)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.startRefresh(AbstractDelegatedExecutionApplicationContext.java:247)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.stageOne(DependencyWaiterApplicationContextExecutor.java:214)[71:org.springframework.osgi.extender:1.2.1]
    at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor.refresh(DependencyWaiterApplicationContextExecutor.java:169)[71:org.springframework.osgi.extender:1.2.1]
    at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.refresh(AbstractDelegatedExecutionApplicationContext.java:175)[70:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.extender.internal.activator.ContextLoaderListener$2.run(ContextLoaderListener.java:716)[71:org.springframework.osgi.extender:1.2.1]
    at java.lang.Thread.run(Thread.java:662)[:1.6.0_33]
Caused by: java.lang.ClassNotFoundException: org.aspectj.weaver.reflect.ReflectionWorld$ReflectionWorldException not found by org.springframework.aop [57]
    at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:787)
    at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
    at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)[:1.6.0_33] 
```

我已将 maven 依赖项添加到我的`pom.xml`：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.2</version>
</dependency> 
```

仍然没有解决问题。我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:53:33.287

问题是您要导入的 Maven 依赖项没有正确的 OSGI 清单。清单中缺少所有其他 OSGI 标记旁边的 Export-Package 标记。

因此，org.aspectj.weaver.reflect 包没有被导出，在 OSGI 中，这意味着该包中的类不会被其他包知道。因此，ClassNotFoundException。

要解决您的问题，请将您的依赖项替换为以下内容：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>com.springsource.org.aspectj.weaver</artifactId>
    <version>1.6.2.RELEASE</version>
</dependency> 
```

springsource jar 基本上是官方版本的重新打包，但带有适当的 osgi 清单。

# java - JDBC 查询失败，尽管它从 pgAdmin 运行

> ID：12077275
> 
> 赞同：0
> 
> 时间：2012-08-22T16:13:43.267
> 
> 标签：java, jdbc

我有一个奇怪的问题。我的代码中有一个更新查询，它是从 Java 应用程序运行的。我有一个 PreparedStatement，为此我传递了 2 个 java.sql.Date 参数。当我运行查询时，它会记录此异常：

```
DatabaseObject - 无法执行更新查询：UPDATE data_cache_cycle_data dc SET last_7days_receipts = sq.x FROM (SELECT asin,count(asin) as x FROM inventory WHERE created_date = (date '2012-08-22 +02:00:00' - ' 6 天'::interval) GROUP BY asin ) AS sq WHERE dc.asin = sq.asin 。

org.postgresql.util.PSQLException：
错误：“$2”处或附近的语法错误

职位：177

    在 org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2101)
    在 org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1834)
    在 org.postgresql.core.v3.QueryExecutorImpl.execute（QueryExecutorImpl.java:255）
    在 org.postgresql.jdbc2.AbstractJdbc2Statement.execute（AbstractJdbc2Statement.java:510）
    在 org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags（AbstractJdbc2Statement.java:386）
    在 org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate（AbstractJdbc2Statement.java:332）

```

现在，如果我从异常日志中复制粘贴查询，查询在 pgAdmin 中执行没有问题。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:40:19.203

不要使用**'6 day'::interval**，而是使用适当的 CAST(): **CAST('6 day' AS interval)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T18:41:56.223

jdbc 中的 ':' 是命名参数的占位符。
[https://www.javaworld.com/article/2077706/core-java/named-parameters-for-preparedstatement.html](https://www.javaworld.com/article/2077706/core-java/named-parameters-for-preparedstatement.html)
您可能必须找到一种方法来逃避它。在休眠中，我们使用反斜杠 '\' 来转义 ':'。如果它不起作用，请找到逃避它的方法，因为肯定应该有一种方法可以做到这一点。

# c++ - 在列表或菜单中列出捕获设备

> ID：12077277
> 
> 赞同：0
> 
> 时间：2012-08-22T16:13:56.837
> 
> 标签：c++, directshow, win32com

我不明白如何使用菜单或列表来允许用户选择其适当的设备。有什么东西不见了。我不明白。你能启发我的思想吗？

```
void    fillDevices(HWND list)
{

IPropertyBag *tmpBag=NULL;
    tmpMonk->BindToStorage(0,0,IID_IPropertyBag,(void **)&tmpBag);
    VariantInit(&varName);
    //DevicePath-Description-FriendlyName
    checkIt(tmpBag->Read(L"FriendlyName",&varName,0));

// i need to fill it  with device names and be able to chose from the list 

    VariantClear(&varName);
    tmpBag->Release();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:37:52.747

Windows SDK [AMCap 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373424%28v=vs.85%29.aspx)正是这样做的：

```
// put all installed video and audio devices in the menus
//
void AddDevicesToMenu()
{
// ...
    while(hr = pEm->Next(1, &pM, &cFetched), hr==S_OK)
    {
        IPropertyBag *pBag=0;

        hr = pM->BindToStorage(0, 0, IID_IPropertyBag, (void **)&pBag);
        if(SUCCEEDED(hr))
        {
            VARIANT var;
            var.vt = VT_BSTR;
            hr = pBag->Read(L"FriendlyName", &var, NULL);
            if(hr == NOERROR)
            {
                AppendMenu(hMenuSub, MF_STRING, MENU_VDEVICE0 + uIndex,
                    var.bstrVal);
//... 
```

Windows SDK 中的相对路径：\Samples\multimedia\directshow\capture\amcap

# ruby-on-rails - belongs_to 关联中的第一个子元素是如何确定的？

> ID：12077280
> 
> 赞同：1
> 
> 时间：2012-08-22T16:14:01.087
> 
> 标签：ruby-on-rails, ruby

我有 3 张属于同一货物的发票。创建的第一张发票始终是货件的主发票。

```
Invoice 
id   shipment_id
21   55 # This is the main invoice
88   55
93   55 
```

如果我执行以下查询

```
s = Shipment.find(55)
s.invoices[0] # 21
s.invoices[1] # 88
s.invoices[2] # 93 
```

所以我猜子元素的顺序是由他们的id决定的。我对吗？或者还有更多的东西吗？

我问是因为我需要确定子元素的顺序，以确保我的一种方法始终有效。

```
def am_i_the_main_invoice?
  if self.shipment.invoices[0].id == self.id
    true
  else
    false
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:20:05.927

除非您明确设置，否则顺序是随机的。虽然您的数据库现在可能会以相同的顺序返回元素，但如果您更改任何内容（即使是看似不相关的内容），它也可以是任何其他顺序。再说一遍：不要相信从关系数据库中检索到的元素的顺序，除非您在查询中明确设置了顺序。

在您`Shipment`可能已经设置`has_many`关系的班级中，您可以添加类似`:order => "id ASC"`始终按 id 强制执行顺序的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:28:40.963

您可以向表中添加一个标志，而不是依赖于有序查询`invoices`：

```
# in migration
add_column :invoices, :is_primary, :boolean, {null: false, default: false}

# if your rdbms supports partial indexes, you can enforce it
execute 'create unique index uniq_single_primary on invoices (shipment_id) where is_primary = true'

# then query is easy ..
def am_i_the_main_invoice?
  self.is_primary?
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:31:31.403

返回的顺序通常取决于您使用的 SQL 数据库。通常它是基于主键的，但正如[Holger](https://stackoverflow.com/users/421705/holger-just)所说，不要相信它，因为它可以改变。

您可以通过 2 种方式解决此问题：

1.  在您的 Invoice 模型中添加一个范围，您可以在查看您的集合之前调用它，例如`scope :by_shipment, order("id ASC")`
2.  添加一个 default_scope 以便始终按该顺序检索它，例如`default_scope order("id ASC")`

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T16:49:38.817

为了可读性，我会添加一个关联扩展

```
class Shipment < ActiveRecord::Base
  has_many :invoices do
    def main
      @main_invoice ||=  first(:order => "id ASC")
    end

    def main?(id)
      main.try(:id) == id
    end
  end
end 
```

现在您可以获得主发票，如下所示：

```
shipment.invoices.main # returns main invoice
shipment.invoices.main?(23) # checks if the invoice is a main invoice 
```

这样，您就清楚地展示了`main`发票的概念。

# jquery - 更改 head 标签中的 CSS 类

> ID：12077288
> 
> 赞同：1
> 
> 时间：2012-08-22T16:14:35.830
> 
> 标签：jquery

我在 head 标签中添加了一个 CSS 类，例如：

```
$("head").append("<style type='text/css'>.classname{color: gold}</style>"); 
```

现在我需要更改颜色属性，即从金色变为绿色。有什么解决方案吗？

注意：我需要在 head 标签中执行此操作。就像是

```
$('.classname').css('color','green'); 
```

不符合我的要求。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:17:43.423

给你的风格标签一个标识符，比如一个ID，你可以稍后引用它并将它的内容更改为你喜欢的任何内容，如果这不可能，你将不得不找出另一种选择它的方法，比如根据它的内容，索引头部等：

```
$("head").append("<style type='text/css' id='myStyle'>.classname {color: gold}</style>");​​

$("#myStyle").html('.classname {color: green}') 
```

[**小提琴**](http://jsfiddle.net/ntrYr/)

**编辑：**

或者您可以在必须覆盖样式的标签下方插入一个新样式标签：

```
$("head").append("<style type='text/css'>.classname {color: gold; font-weight: bold}</style>");

$("head").append("<style type='text/css'>.classname {color: green}</style>"); 
```

[**小提琴**](http://jsfiddle.net/ntrYr/1/)

或者您可以只编辑内容并再次插入：

```
$("head").append("<style type='text/css' id='myStyle'>.classname {color: gold; font-weight: bold}</style>");

var css = $("#myStyle").text().replace('gold', 'green');
$("#myStyle").text(css); 
```

[**小提琴**](http://jsfiddle.net/ntrYr/2/)

我的观点是，当 javascript 已经拥有更好且更易于维护的方法时，通过将样式标签附加到 head 部分来使用 javascript 更改 CSS`element.style`或 jQuery 的`css()`版本。

# vba - 运行时错误“1004”：应用程序定义的或对象定义的错误

> ID：12077292
> 
> 赞同：1
> 
> 时间：2012-08-22T16:14:44.267
> 
> 标签：vba, excel

我正在制作一个宏，它将搜索一个列表并在第一个具有spectralseven 的列中找到所有条目。这会将这些记录复制到每个条目的工作表中。

到目前为止的代码失败了：

> 运行时错误“1004”：应用程序定义的或对象定义的错误。

```
Sub testWild()
startCell = 0
Dim FoundCell As Range
Dim LastCell As Range
Dim FirstAddr As String
cellRange = "A1:A20"
topCount = startCell
With Range("A1:A20")
Set LastCell = .Cells(.Cells.Count)
End With
Dim findString As String 
findString = "spectraseven*"
 Set FoundCell = Range(cellRange).Find(what:=findString, after:=LastCell)

If Not FoundCell Is Nothing Then
FirstAddr = FoundCell.Address
End If
Do Until FoundCell Is Nothing
    Debug.Print FoundCell.Address
Set FoundCell = Range(cellRange).FindNext(after:=FoundCell)

Count = FoundCell.Row
    Set FoundCell = Range(cellRange).FindNext(after:=FoundCell)

 --->   Sheets(1).Range("a" & topCount) = Sheets(1).Range("e" & Count)
    topCount = topCount + 1

If FoundCell.Address = FirstAddr Then
    Exit Do
End If
Loop
End Sub 
```

箭头指向错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:20:06.987

您设置`startCell`等于 0。

然后你设置`topCount`=`startCell`

`topCount`在开始循环之前，您无需执行任何其他操作。

因此，这：

```
Sheets(1).Range("a" & topCount) = Sheets(1).Range("e" & Count) 
```

评估为

```
Sheets(1).Range("a0") = Sheets(1).Range("e" & FoundCell.Row) 
```

没有像单元格 A0 这样的东西。尝试从`startCell`1 开始。

# c# - 如何在 propertygrid c# 的属性中设置 BrowseAttribute true 或 false？

> ID：12077294
> 
> 赞同：3
> 
> 时间：2012-08-22T16:14:49.163
> 
> 标签：c#, propertygrid

> **可能重复：**
> [有条件的“可浏览”属性](https://stackoverflow.com/questions/4690481/conditional-browsable-attribute)

我定义`AppSettings`了具有一些属性的类。在我的表单中，当 I 时`click Button1`，我想显示属性 1 和 2（显示 1,2，隐藏或不显示其他属性），当 时`click Button2`，我想显示属性 2 和 3（1 是隐藏，2,3 是显示，其他属性隐藏或不显示），我该怎么做？

```
public class AppSettings
{
    [BrowsableAttribute(true), CategoryAttribute("Document Settings"), DefaultValueAttribute(true)]
    public bool SaveOnClose{ get; set; }

    [BrowsableAttribute(true), CategoryAttribute("Global Settings"), ReadOnlyAttribute(true), DefaultValueAttribute("Welcome to AppDev!")]
    public string GreetingText { get; set; }

    [BrowsableAttribute(true), DescriptionAttribute("The rate in milliseconds that the text will repeat."), CategoryAttribute("Global Settings"), DefaultValueAttribute(10)]
    public int MaxRepeatRate { get; set; }

    [BrowsableAttribute(true), CategoryAttribute("Global Settings"), DefaultValueAttribute(4)]
    public int ItemsInMRUList { get; set; }

    [BrowsableAttribute(true), DefaultValueAttribute(false)]
    public bool SettingsChanged { get; set; }

    [BrowsableAttribute(true), CategoryAttribute("Version"), DefaultValueAttribute("1.0"), ReadOnlyAttribute(true)]
    public string AppVersion { get; set; }
} 
```

我想动态更改`BrowseAttribute`为真或假。我该怎么做 ？

表格代码是：

```
AppSettings AppSet = new AppSettings();

AppSet.AppVersion = "2.3";
AppSet.SaveOnClose = true;
AppSet.GreetingText = "Welcome to Dar!";
AppSet.ItemsInMRUList = 4;
AppSet.MaxRepeatRate = 10;
AppSet.SettingsChanged = false;

...

propertyGrid1.SelectedObject = AppSet; 
```

此更改有错误：

```
public static bool state = true;
BrowsableAttribute(state) 
```

错误：

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:11:06.103

对于过滤，我只会更改`BrowsableAttributes`. `PropertyGrid`在下文中，我：

*   定义一个自定义属性 ，`[DisplayMode(...)]`它描述什么时候应该可见
    *   覆盖`IsMatch`以指示何时应将属性视为等效
*   `AppSettings`用属性装饰你的类型的一些设置, ,
*   更改`BrowsableAttributes`网格上的 ，指定特定的`DisplayModeAttribute`，并显示
*   重复启用不同的设置

这是代码：

```
using System.ComponentModel;
using System;
using System.Windows.Forms;

[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class DisplayModeAttribute : Attribute
{
    private readonly string mode;
    public DisplayModeAttribute(string mode)
    {
        this.mode = mode ?? "";
    }
    public override bool Match(object obj)
    {
        var other = obj as DisplayModeAttribute;
        if (other == null) return false;

        if (other.mode == mode) return true;

        // allow for a comma-separated match, in either direction
        if (mode.IndexOf(',') >= 0)
        {
            string[] tokens = mode.Split(',');
            if (Array.IndexOf(tokens, other.mode) >= 0) return true;
        }
        else if (other.mode.IndexOf(',') >= 0)
        {
            string[] tokens = other.mode.Split(',');
            if (Array.IndexOf(tokens, mode) >= 0) return true;
        }
        return false;
    }
}

public class AppSettings
{
    [DisplayMode("A"), CategoryAttribute("Document Settings"), DefaultValueAttribute(true)]
    public bool SaveOnClose { get; set; }

    [DisplayMode("A,B")]
    [CategoryAttribute("Global Settings"), ReadOnlyAttribute(true), DefaultValueAttribute("Welcome to AppDev!")]
    public string GreetingText { get; set; }

    [DisplayMode("B"), BrowsableAttribute(true), DescriptionAttribute("The rate in milliseconds that the text will repeat."), CategoryAttribute("Global Settings"), DefaultValueAttribute(10)]
    public int MaxRepeatRate { get; set; }

    [BrowsableAttribute(true), CategoryAttribute("Global Settings"), DefaultValueAttribute(4)]
    public int ItemsInMRUList { get; set; }

    [BrowsableAttribute(true), DefaultValueAttribute(false)]
    public bool SettingsChanged { get; set; }

    [BrowsableAttribute(true), CategoryAttribute("Version"), DefaultValueAttribute("1.0"), ReadOnlyAttribute(true)]
    public string AppVersion { get; set; }
}
static class Program
{
    [STAThread]
    static void Main()
    {
        using (var form = new Form())
        using (var grid = new PropertyGrid())
        {
            grid.Dock = DockStyle.Fill;
            grid.SelectedObject = new AppSettings();
            grid.BrowsableAttributes = new AttributeCollection(
                new DisplayModeAttribute("A"));
            form.Controls.Add(grid);
            form.ShowDialog();

            grid.BrowsableAttributes = new AttributeCollection(
                new DisplayModeAttribute("B"));
            form.ShowDialog();
        }
    }
} 
```

# c# - 浏览 Web 服务中的 dll 函数和类

> ID：12077297
> 
> 赞同：1
> 
> 时间：2012-08-22T16:15:00.260
> 
> 标签：c#, web-services, vmware

我用 C# 编写了一个 Web 服务。我正在为 vmware API 使用 vmware.vim.dll 文件。我需要通过我的网络服务公开这个 dll 中的方法。

到目前为止，我已经在我的 IDE 中引用了 dll，并且能够使用 DEFINED 方法。通过定义，我的意思是已经明确编写的方法，例如：

[网络方法] 方法在这里....

但是dll的方法很多，一一暴露是不可行的。所以我想知道是否有更好的方法来公开 dll 的方法和类型。

干杯。

# c# - 如何从 MVC 中的 ViewPage 对 Razor 布局进行小的更改？

> ID：12077304
> 
> 赞同：0
> 
> 时间：2012-08-22T16:15:40.147
> 
> 标签：c#, asp.net-mvc, razor

我想向一个名为“.current”的 ul.li 导航项添加一个类。所有导航项都位于 _layout.cshtml 中，我有点不知道指定“.current”类的最佳方法是什么。

这是我想要的导航图片（[http://i.imgur.com/ng5RA.png](https://i.imgur.com/ng5RA.png)）：

![在此处输入图像描述](../Images/97d91b22e7d705e452e597dbd0cce2c8.png)

请注意，每当用户处于公司->概览或公司->设置中时；我基本上希望将“.current”类添加到名为“Company”的父级 ul.li 项中。这会在该部分的右侧添加视觉提示（白色三角形）。

出于这个原因 ，[这个 stackoverflow 线程](https://stackoverflow.com/questions/11408178/how-could-i-change-layout-page-from-viewpage-in-mvc)对我帮助不大。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:43:32.273

您可以将其基于它自己的 URL，如下所示：

```
public static IHtmlString MenuLink(this HtmlHelper htmlHelper, string text, string url)
    {
        var link = new TagBuilder("a");
        link.Attributes.Add("href", url);
        string currentUrl = HttpContext.Current.Request.RawUrl;
        if (string.Equals(url, currentUrl, StringComparison.OrdinalIgnoreCase))
        {
            link.AddCssClass("current");
        }

        link.InnerHtml = text;
        return new HtmlString(link.ToString());
    } 
```

你会像这样使用它：

```
@Html.MenuLink("About", "/home/about")
@Html.MenuLink("Contact", Url.Action("Contact", "Home")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:19:14.210

您可以使用 JQuery 处理此问题：

```
$(".current").removeClass("current");
$("#someID").addClass("current"); 
```

第一行将从已经拥有的任何东西中删除“当前”类。第二行将“当前”类分配给具有指定 id 的元素。

# javascript - 选中与背景颜色相关的单选按钮

> ID：12077309
> 
> 赞同：0
> 
> 时间：2012-08-22T16:16:03.980
> 
> 标签：javascript, asp.net

我有 2 列单选按钮。选择左侧的一项，对应的右侧将变为未选中，反之亦然。然后我添加了一些 Javascript，以便当前选择的单选按钮背景为蓝色，另一个为白色。这工作得很好。然后我添加了两个按钮，一个是选中左侧的所有单选按钮，另一个是选中右侧的所有单选按钮。这就是我的问题出现的地方。每当我使用按钮时，单选按钮都会被正确检查，但背景颜色永远不会正确显示。

**示例 1**

当我检查了第 1 列的单选按钮并且在启动时它们的背景为蓝色，然后按下按钮激活第 2 列，第 2 列的单选按钮全部被选中，其背景闪烁为蓝色片刻，然后第 1 列的背景保持蓝色。

**示例 2**

在启动时，我检查了第 1 列的单选按钮，但没有影响其背景颜色，然后按下按钮激活第 2 列，第 2 列的单选按钮全部被选中，其背景闪烁一会儿蓝色，然后返回白色。如果我现在单击第 1 列的按钮（收音机被选中，闪烁蓝色，返回白色），效果相同。

* * *

可能有什么问题？我想也许它可能是一个回发，但肯定无线电检查值也会刷新，所以我不认为它是。任何帮助将不胜感激。

**代码**

这是用于选择列的按钮。传递函数的控件只是一个 This （所以是被点击的按钮）。这有点复杂，因为单选按钮是动态创建的。要点是确定按下了哪个按钮，然后遍历相关的单选按钮并检查它们，并重新着色其父级父级（td 元素）的背景......如果这有意义的话。

```
function ColumnBtnSelect(control) {
  var btnNum = (control.id).substring((control.id).length - 1, (control.id).length);
  var objPart = "ctl00_ContentPlaceHolder1_GridView1_ctl";
  var objName;
  for (x = 3; x <= 15; x++) {
      if (btnNum == 1) {
         var num1 = "0" + x;
         objName = objPart + num1.substr(num1.length - 2) + "_" + ((x - 3) * 2);

         document.getElementById(objName).checked = true;
         $(document.getElementById(objName)).parent().parent().css("background-
color", "#A9D0F5");   

      }
      else {
         var num1 = "0" + x;
         objName = objPart + num1.substr(num1.length - 2) + "_" + (((x - 3) * 2) + 1);

         document.getElementById(objName).checked = true;
         $(document.getElementById(objName)).parent().parent().css("background-
color", "#A9D0F5");

      }
  } 
```

**更新**

在阅读了您的建议后，我回顾了我的代码。我有另一个 javascript 函数将相应的单选按钮设置为白色，但是自从我尝试了示例 2 之后，我已经将其注释掉了，这意味着我现在在代码中没有任何地方将任何内容设置为白色，但即使行似乎仍在切换暂时变为蓝色，然后变回白色。很奇怪。我还在 Firebug 中检查了我的 CSS。所有的 td 元素（应该是蓝色但实际上是白色的）似乎没有列出背景颜色的任何设置，既不是白色也不是蓝色。这看起来好像它没有被覆盖，但可能会返回默认值？不管怎样，我都难住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:36:00.300

您发布的代码将所选单选按钮的背景更改为蓝色。但它不会将未选中的单选按钮的背景颜色更改为白色。（意味着其他一些代码正在这样做）

您发布的代码看起来不错。它将所选单选按钮的背景颜色更改为蓝色。所以*问题可能出在当单选按钮被***取消选中**时将背景颜色变为白色的代码。

您究竟是如何将背景颜色更改为白色的？您应该查看该代码或在此处发布该代码以获得更多帮助：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:56:02.987

正如我所怀疑的那样，我的按钮有问题导致回发。奇怪的是复选框没有重置，但是一旦我确定没有回发，就像一个魅力！

# javascript - 如何检查表格是否至少填写了一个字段

> ID：12077311
> 
> 赞同：5
> 
> 时间：2012-08-22T16:16:05.233
> 
> 标签：javascript, jquery, forms

我正处于构建网站的最后阶段，还有一个关键任务：设置一些表单验证，阻止用户提交空白搜索。

我知道以下帖子，但发现不清楚如何让它工作，以及如何将它用于下拉列表（[jQuery Validate - 需要填写组中的至少一个字段](https://stackoverflow.com/questions/1300994/jquery-validate-require-at-least-one-field-in-a-group-to-be-filled)）

关于我如何做到这一点的任何想法，或者任何可能有帮助的指南指针，将不胜感激？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T17:12:16.700

这是一个适用于所有表单字段类型的函数：`text`、`select`、`radio`、`checkbox`、`textarea`、`file`和 HTML5 输入类型，如`email`. 这个函数所做的唯一假设是所有`select`元素都有一个`option`with`value=""`

```
/**
 * 1) gather all checkboxes and radio buttons
 * 2) gather all inputs that are not checkboxes or radios, and are not buttons (submit/button/reset)
 * 3) get only those checkboxes and radio buttons that are checked
 * 4) get only those field elements that have a value (spaces get trimmed)
 * 5) if the length of both resulting collections is zero, nothing has been filled out
 */
function checkFields(form) {
    var checks_radios = form.find(':checkbox, :radio'),
        inputs = form.find(':input').not(checks_radios).not('[type="submit"],[type="button"],[type="reset"]'),
        checked = checks_radios.filter(':checked'),
        filled = inputs.filter(function(){
            return $.trim($(this).val()).length > 0;
        });

    if(checked.length + filled.length === 0) {
        return false;
    }

    return true;
}

$(function(){
    $('#myForm').on('submit',function(){
        var oneFilled = checkFields($(this));
        // oneFilled === true if at least one field has a value
    });
});​ 
```

这是一个演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/gEWRd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:42:56.453

I'm not an expert, but this works for me. I have a select field and an input field for donations. If the amount isn't on the select options, then the user can add an amount into the input field. So at least one has to be submitted.

```
 function validateForm() {  
if (  myform.mySelectfield.value == "" 
    && myform.myInputfield2.value == "" 
    ) {
alert( "Please enter at least field" );
     return false;    
     }   
     } 
//--> 
```

And of course the input field needs to be numeric so I've added:

```
 function validateForm2() { 
```

var x=document.forms["myform"]["myInputfield2"].value;

```
if (/[^0-9]+$/.test(x))
    {
    alert("Please enter a numerical amount without a decimal point");
    myform.myInputfield2.focus();
    return false;
  } 
```

}

The numerical check is called onkeyup:

```
onkeyup="validateForm2()" 
```

I had to make a second function validateForm2(), because the numerical check didn't work in with the first one.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:36:42.213

```
//select all text inputs in form and filter them based on...
var isFilled = $('input[type="text"]', 'form').filter(function() {
    return $.trim(this.value).length;  //text inputs have a value
}).length;                             //get the selector length

//if selector contains at least one filled in text input, submit form
if (isFilled) {..submit form..} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:49:18.277

```
var filled = $('.property-list input[type="text"]').filter(function() {
    var v = $(this).val();
    // sanitize it first
    v = v.replace(/[\s]{2,}/g,' ').replace(/^\s*(.*?)\s*$/,'$1');
    $(this).val(v);
    // if you want it to contain min.
    // 3 consecutive alphanumeric chars, for example...
    return /[a-z0-9]{3,}/i.test(v);
}).get();
if (filled.length) {
    // do whatever with the result
    alert('all okay');
} else {
    $('.property-list input[type="text"]').focus().blur();
    // this is for the placeholders to refresh, at least in Safari...
    $('.property-list input[type="text"][value!=""]:first').focus();
    var msg = 'plase fill at least one field with min. 3 ';
    msg += 'consecutive alphanumeric characters';
    alert(msg);
} 
```

# visual-studio-2010 - vbscript 注释代码作为单行而不是多行

> ID：12077312
> 
> 赞同：2
> 
> 时间：2012-08-22T16:16:13.073
> 
> 标签：visual-studio-2010, asp-classic

```
<SCRIPT language="VBScript" RUNAT="Server">
    function f
        Dim rs
        Dim str
        Dim arr
    end function
</SCRIPT> 
```

如果我突出显示该函数，然后单击注释掉选定的行按钮，或按 Ctrl+K、Ctrl+C，它会将函数注释为 HTML，如下所示：

```
<SCRIPT language="VBScript" RUNAT="Server">
<!--    function f
        Dim rs
        Dim str
        Dim arr
    end function-->
</SCRIPT> 
```

我怎样才能让它用这样的引号来评论它：

```
<SCRIPT language="VBScript" RUNAT="Server">
    'function f
    '    Dim rs
    '   Dim str
    '    Dim arr
    'end function
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T12:30:37.717

Visual Studio 不可能。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-08T17:08:00.107

好吧，我已经开始了一个 Visual Basic 项目。它是一个 asp.net 项目。在这里，您可以注释掉上面提到的行。像下面这样启动项目。
启动VisualStudio2010-->文件-->新建项目-->VisualBasic-->Asp.Net Application

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="WebApplication1._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
<%  
    'Response.Write("ok")

    %>
</div>
</form>
</body>
</html> 
```

它已自动注释掉选择注释掉选项的行

# java - 使用静态函数的 Java 中的泛型和通配符 - “不适用于参数”错误

> ID：12077313
> 
> 赞同：1
> 
> 时间：2012-08-22T16:16:17.147
> 
> 标签：java, generics, wildcard

我无法弄清楚以下代码有什么问题，具体来说，为什么不`<A extends ClassA>`等同于`<? extends ClassA>`.

应该不能`bar()`打电话`foo()`吧？

编译器说**The method foo(...) is not applicable for the arguments (...)**
（确切的错误在下面的评论中指定）

```
static class ClassA {};
static class ClassB<A extends ClassA> {};

private static <A extends ClassA> Collection<ClassB<A>> foo(Collection<ClassB<A>> as) {
    return as;
}

private Collection<ClassB<? extends ClassA>> bar(Collection<ClassB<? extends ClassA>> as) {
    // Error:
    // The method foo(Collection<ClassB<A>>) is not applicable 
    // for the arguments (Collection<ClassB<? extends ClassA>>)
    return foo(as);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:12:39.630

问题是你试图将一些类型`Collection<ClassB<? extends ClassA>>`的东西传递给类型的东西`Collection<ClassB<A>>`。它们不兼容。

为了使两个泛型类型兼容，它们的类型参数（如果两者都不是通配符）必须*完全*匹配。在这里，类型参数是`ClassB<? extends ClassA>`and `ClassB<A>`(for some `A`); 通配符也不是，它们永远不可能完全相同——不管是什么`A`，它都代表一个特定的类型。确实`ClassB<A>`（无论`A`是什么）将是 ; 的子*类型*`ClassB<? extends ClassA>`。但这无关紧要——就像`String`是`Object`但不兼容`Collection<String>`的子类型。`Collection<Object>`

如果您`foo()`稍微更通用，以便通用参数位于顶层：

```
private static <T extends ClassB<? extends ClassA>> Collection<T> foo(Collection<T> as) {
    return as;
} 
```

然后您可以使用捕获来执行此操作：

```
private Collection<? extends ClassB<? extends ClassA>> bar(Collection<? extends ClassB<? extends ClassA>> as) {
    return foo(as);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:30:55.517

我不知道究竟是为什么...但是您需要将泛型类型添加到第二种方法:)

```
private <T extends ClassA> Collection<ClassB<T>> bar(Collection<ClassB<T>> as) {
    return foo(as);
} 
```

# asp.net - 将 sql 用户定义函数作为属性添加到 dbml

> ID：12077314
> 
> 赞同：0
> 
> 时间：2012-08-22T16:16:18.323
> 
> 标签：asp.net, sql, sql-server, linq-to-sql

我在 sql server 中有一个用户定义的函数，它返回一个字符串。我想在 linq to sql dbml 文件中将此作为属性添加到我的类中。My Class 代表 sql server 中的一个视图。（注意，我不想将此 UDF 添加到视图中）

我尝试手动创建一个属性，然后将源分配为我在 sql server 中的 UDF 的名称。不喜欢这个和错误。

我正在做的事情可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:51:21.457

您只能使用 FunctionAttribute 属性将在类上定义的客户端方法映射到用户定义的函数。

但是你可以用属性将你的函数包装在你的类中

```
CREATE FUNCTION Test(@string varchar(100))
RETURNS varchar(100)
AS
BEGIN
    RETURN "Test"
END

[Function(Name = "Test", IsComposable = true)]
[return: Parameter(DbType = "VarChar(100)")]

public string Test([Parameter(Name = "string",
    DbType = "VarChar(100)")] string @string)
{
    return ((string)(this.ExecuteMethodCall(this,
        ((MethodInfo)(MethodInfo.GetCurrentMethod())),
        @string).ReturnValue));
} 
```

# python - 在 Python 中使用 Tuple For Key 剪切字典的紧凑方法

> ID：12077315
> 
> 赞同：0
> 
> 时间：2012-08-22T16:16:19.673
> 
> 标签：python, dictionary, tuples

我不认为这是重复的，但我可能没有在搜索中使用正确的术语。如果是这种情况，我很抱歉。

我所拥有的是将元组（自定义对象，字符串）映射到浮点数的字典。确切地说，它是一个 2 元组。我想要做的是取回字典中与自定义对象匹配的所有条目的表示。

例子：

```
mydict[(co1, 'hello')] = 0.01
mydict[(co2, 'bye')] = 0.02 
```

其中 co1 和 co2 应该代表两个不同的自定义对象。我想在关键的元组中找到所有包含 co1 （它的逻辑等价物）的条目。

所以我的问题是当字符串是唯一的（不匹配的）元组时，如何将这个 2_tuple=>float 字典减少为 string=>float 字典。

我试过的：

```
for custom in custom_object:
    for k, v in mydict.iteritems():
        if custom in k:
           #store this particular entry into another data structure or otherwise process 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:19:32.130

您可以在理解中使用解包：

```
dict((s, v) for (o, s), v in mydict.iteritems() if o is co1) 
```

从 Python 2.7 开始：

```
{s: v for (o, s), v in mydict.iteritems() if o is co1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:31:12.840

听起来随着语料库[？] 大小的增加，您尝试做的事情将变得非常低效。

也许您想要做的是散列`[0]` **并** `[1]`进入第三个分配：`[2]`将存储在字典中。

然后在 tuple 的第四个分配上简单地存储一个指针数组（我知道它是 python，但是你这很容易通过重复来实现）`[3]`。

通过保留一个辅助结构来存储元组是否已`[3]`填充（以及可能的计数），您将能够在几乎保证的 O(1) 中执行这些查询：

1.  **枚举所有重复**
2.  **枚举 0.01 外观或无**
3.  **我插入的内容是重复的吗？**

享受`:]`

# android - 如何在运行时android中捕获未知异常

> ID：12077318
> 
> 赞同：2
> 
> 时间：2012-08-22T16:16:33.260
> 
> 标签：android, exception

我写了一些 android 应用程序，在做一些测试时它崩溃了。

但我不知道崩溃的原因..所以我需要将崩溃的原因保存在某个文件中，以便稍后我可以看到..因为在应用程序运行时我不会将它连接到 PC，我需要一些建议来保存崩溃的原因..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:19:25.143

只需执行以下操作：

```
try{
    //your code which throws exception
}
catch(Exception e){
   e.printStackTrace();   //optional

   //save your exception in a text file on sd-card
} 
```

稍后您可以阅读文本文件以了解例外情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:22:32.880

到目前为止我遇到的最好的方法是添加 Internet 权限，并使用[ACRA](http://code.google.com/p/acra/)。ACRA 允许您将报告发送到 Google Docs 电子表格，并用于测试和生产。

除了 ACRA，您还有两种选择：

1.  用块包围所有可能引发错误的代码，`try catch`并将数据保存在某处。
2.  [Thread.setDefaultUncaughtExceptionHandler()](http://developer.android.com/reference/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)可用于设置在所有未处理异常时调用的 Handler。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:27:12.157

抱歉，细节有限，但 android 还没有日志记录选项吗？

[http://developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

我还没有尝试过，可能会选择 try,catch 答案，但这只是另一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:27:13.320

你可以做一个 try catch 块：

```
try {
    //the code lies here
} catch(Exception e) {
    //here you can save the e.toString() to a FileOutputStream and then save the file
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-01T12:46:08.233

您需要使用应用程序类并设置“setDefaultUncaughtExceptionHandler”

```
public class YourApplication extends Application {

private Thread.UncaughtExceptionHandler defaultUEH;
// handler listener
private Thread.UncaughtExceptionHandler _unCaughtExceptionHandler =
        new Thread.UncaughtExceptionHandler() {
            @Override
            public void uncaughtException(Thread thread, Throwable ex) {

                // here I do logging of exception to a db
                PendingIntent myActivity = PendingIntent.getActivity(getApplicationContext(),
                        192837, new Intent(getApplicationContext(), YourActivity.class),
                        PendingIntent.FLAG_ONE_SHOT);

                AlarmManager alarmManager;
                alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
                alarmManager.set(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                        15000, myActivity);
                System.exit(2);

                // re-throw critical exception further to the os (important)
                defaultUEH.uncaughtException(thread, ex);
            }
        };

public YourApplication() {
    defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
    // setup handler for uncaught exception
    Thread.setDefaultUncaughtExceptionHandler(_unCaughtExceptionHandler);
} 
```

}

并在 Android Manifest 的 application 标签中设置标签 name="your.app.application.YourApplication"

# ios - Facebook照片上传不张贴照片到墙上

> ID：12077320
> 
> 赞同：0
> 
> 时间：2012-08-22T16:16:57.537
> 
> 标签：ios, xcode, facebook, sdk

好的，我可以确认会话处于活动状态。我可以确认令牌在 2012 年 10 月 21 日到期，所以这不是问题。当我收到类似于以下内容的响应时，我还可以确认请求已发送到 Facebook：

FB请求：0x9138950

这是我发送 facebook 请求的地方：

```
- (void)facebookPhotoUpload{
    UIImage *postImage = combinedImage;
    if(combinedImage == nil){
        postImage = badgeImage.image;
    }

    NSLog(@"%@", [appDelegate.facebook expirationDate]);

    NSMutableDictionary* params = [NSMutableDictionary dictionary];
    [params setObject:strMessage forKey:@"message"];
    if (postImage) {
        [params setObject:postImage forKey:@"source"];
        [appDelegate.facebook requestWithGraphPath:@"me/photos" andParams:params
                                     andHttpMethod:@"POST"
                                       andDelegate:self];
    } else { 
        [appDelegate.facebook requestWithGraphPath:@"me/feed" andParams:params
                                     andHttpMethod:@"POST"
                                       andDelegate:self]; }
} 
```

然后它到达这个函数：

```
- (void)requestLoading:(FBRequest *)request{
    NSLog(@"Your facebook request is loading... %@", request);
} 
```

并返回请求内存地址。太棒了，所以它工作得那么远。

但是，在此之后我没有得到其他回应...

有没有其他人遇到过这个问题？有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:17:10.130

解决方案是在主线程上调用您的 facebookPhotoUpload 请求。在另一个线程上运行它会导致它永远无法正确获取对 facebook 的请求。另外这里是另一个stackoverflow问题，具有相同/相似的问题，并更深入地解释了为什么存在这种行为。[Facebook请求线程问题](https://stackoverflow.com/questions/7228871/facebook-request-thread-problem)

# c++ - 为什么 .* 运算符不能在 C++ 中重载？

> ID：12077322
> 
> 赞同：2
> 
> 时间：2012-08-22T16:17:01.663
> 
> 标签：c++, operator-overloading

我发现这里很少有讨论运算符重载和在 c++ 中不能重载的运算符等的帖子`.` `::` `.*` `sizeof`。但我找不到确切的细节或为什么应该`.*`避免的原因？你们中很少有人会认为它是重复的，但如果我能获得关于我想要的链接的详细信息，我会非常高兴:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T16:23:26.043

从[马口中](http://www.stroustrup.com/bs_faq2.html#overload-dot)：

> 操作符`.`（点）原则上可以使用与 -> 相同的技术进行重载。但是，这样做可能会导致有关操作是否用于对象重载`.`或引用的对象的问题`.`例如：

```
class Y {
public:
    void f();
    // ...
};

class X {   // assume that you can overload .
    Y* p;
    Y& operator.() { return *p; }
    void f();
    // ...
};

void g(X& x)
{
    x.f();  // X::f or Y::f or error?
} 
```

> **这个问题可以通过多种方式解决。在标准化时，尚不清楚哪种方式最好。**

AFAIU 同样的推理适用于`.*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T16:11:46.467

It is very easy to understand, if you go through the internal mechanism of operator function invocation.

Say a class `Complex` can have two members; `r` for the real part and `i` for the imaginary part. For instance:

```
Complex C1(10,20),C2(10,2) // we assume there is an already a two argument constructor within class. 
```

Now if you write `C1+C2` as a statement, the compiler tries to find the overloaded version of the `+` operator on complex numbers. If you overload the `+` operator, so `C1+C2` is internally translated as `c1.operator+(c2)`.

But what would you translate an overloaded `.` operator as? For instance:

```
C1.disp()//display content of a complex object 
```

Now try to come up with an internal representation of `C1.operator.(------)`. Given that this syntax would modify it's own semantic meaning, the result is hopelessly messy. For that reason overloading the `.` is not allowed.

# python - 如何将此代码更改为 oop 格式，以便我可以重用代码

> ID：12077324
> 
> 赞同：1
> 
> 时间：2012-08-22T16:17:19.127
> 
> 标签：python, oop

```
import csv

datafile = csv.reader(open('datafile.csv','rb'), delimiter=",", quotechar='|')
date, data1, data2, data3 = [], [], [], []

for row in datafile:
    date.append(row[0])
    data1.append(row[1])
    data2.append(row[2])
    data3.append(row[3]) 
```

这就是我想要做的。如您所见，此代码需要 1 个 csv 文件并从中创建 4 个列表。现在我可以并且会在这些列表上做数学，比如`data1[4]-data2[30]`

但我还有一些其他文件也想从中创建列表。但我希望能够像上面看到的数学一样重用我的代码（`data1[4]-data2[30]`）。因此，理想情况下，包括数组在内的所有内容都应与其他文件的名称相同。

我对编程非常陌生，所以事实证明这有点困难。显然事情会与命名相同的所有内容发生冲突，我不希望这样。因此，不知何故，通过 oop，我希望能够重用我的数学逻辑，而不必复制一些庞大的数学算法并重命名所有内容。

显然我不想只对这 4 个数组进行数学运算，保存结果并更改文件名。不，一切都必须在我的程序中同时工作。

我希望我能得到一些关于如何做到这一点的提示。我正在尝试扩大我对 oop 如何工作的知识范围，但事实证明这很困难。我在想最好能解释一下如何解决我自己的问题。

回顾一下，我从 1 个文件创建了 4 个列表。我想从不同的文件创建 4 个额外的列表，但数组的名称相同。然后我只需要创建一次我的大量数学计算并让它适用于所有事情。让它适用于我的程序中引入的任何未来的新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:25:47.173

您想要一个数据容器，您可以通过使用适当的构造函数（此处为**init**方法）创建一个类来获得它。下面是从两个文件加载数据的示例。

```
import csv

datafile1 = csv.reader(open('datafile1.csv','rb'), delimiter=",", quotechar='|')
datafile2 = csv.reader(open('datafile2.csv','rb'), delimiter=",", quotechar='|')

class data(object):

    def __init__(self,data_file):

        self.date, self.data1, self.data2, self.data3 = [], [], [], []

        for row in data_file:
            self.date.append(row[0])
            self.data1.append(row[1])
            self.data2.append(row[2])
            self.data3.append(row[3])

data1 = data(datafile1)
data2 = data(datafile2) 
```

如果你想应用方法（你描述的数学东西）你可能想把这些方法放在课堂上，你能给出一些更具体的例子来说明你想要做什么吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:54:12.347

首先，您是否一定想做 OOP 而不是程序性的？您可以将大部分内容放在一个函数中并返回一个包含列表的元组（是的，这有点像 python 允许您从函数返回多个值的方式。）

OOP 版本就像@mike-vella 的答案。

在程序上，你可以写：

```
import csv

def get_datagroup(data):
    # data is the filename = 'datafile.csv'
    datafile = csv.reader(open(data,'rb'), delimiter=",", quotechar='|')
    date, data1, data2, data3 = [], [], [], []

    for row in datafile:
        date.append(row[0])
        data1.append(row[1])
        data2.append(row[2])
        data3.append(row[3])

    return (date, data1, data2, data3)

datagroup1 = get_datagroup('datafile1.csv')
datagroup2 = get_datagroup('datafile2.csv') 
```

问题：您想将每个连续文件的数据附加到相应的列表中吗？我猜是的，因为您使用过`append`：

```
import csv

def get_datagroup(data, data_tuples):
    # data is the filename = 'datafile.csv'
    # data_tuples holds date, data1,2,3
    datafile = csv.reader(open(data,'rb'), delimiter=",", quotechar='|')

    # you can use: data_tuples[0], data_tuples[1], data_tuples[2], data_tuples[3]
    # instead of : date,           data1,          data2,          data3
    date, data1, data2, data3 = data_tuples

    for row in datafile:
        date.append(row[0])
        data1.append(row[1])
        data2.append(row[2])
        data3.append(row[3])

    return (date, data1, data2, data3)

#initially, data tuples are empty
datagroup1 = get_datagroup('datafile1.csv', ([], [], [], []))
#then pass each subsequent call the last call's result tuple
#so that datagroup2 will have the results of datagroup1 and the new stuff
datagroup2 = get_datagroup('datafile2.csv', datagroup1) 
```

您可以通过以下方式进行递归：

```
datagroup = ([], [], [], [])
datagroup = get_datagroup('datafile1.csv', datagroup)
datagroup = get_datagroup('datafile2.csv', datagroup)
datagroup = get_datagroup('datafile3.csv', datagroup) 
```

# java - finally 块关闭资源真的可靠吗？更新了代码片段

> ID：12077325
> 
> 赞同：2
> 
> 时间：2012-08-22T16:17:20.383
> 
> 标签：java, web-applications, jdbc

我想知道 finally 块是否真的可以关闭资源；比如，数据库连接？

根据我们的架构师的说法，finally 块对于关闭数据库连接是不可靠的，尤其是在 Web 应用场景中。

根据理论，无论代码的执行状态如何，finally 块都必须在逻辑流程结束时运行。finally 块是最佳实践。

我正在开发使用 JDK-1.4、纯 SQL 查询并从连接池获取数据库连接的 Web 应用程序项目。大多数 SQL 语句都是嵌套语句，单个方法包含多个 Statement 和 ResultSet 对象。

在这种情况下，我对 finally 块持怀疑态度，因为根据测试，finally 块没有释放资源，而是 Web 应用程序正在获取更多连接。最后，Tomcat 5.5 每隔两三个小时就会挂掉一次。

然后，我在执行 SQL 操作后和 catch 块中删除了 finally 块并释放资源。之后，web 应用程序完美释放资源，tomcat 不再挂起。

因此，我对 finally 块的理论感到非常困惑。

**这是代码片段，如果编码技术错误，请告知：**

```
 ... .. . . .. . .. . . .. .. . 
    ........ . .. . . ... . .. . .

    Connection dbCon = null;
    Statement stmt1 = null;
    ResultSet rs1 = null;

    try {
        dbCon = DB.getConnection();

        stmt1 = dbCon.createStatement();            
        rs1  = stmt1.executeQuery("sql Query as String");

        while(rs1.next()){

            String col1 = rs1.getString("DB_COL_1");
            int col2 = rs1.getInt("DB_COL_2");
            String col3 = rs1.getString("DB_COL_3");

            if(col3 != null){   

                Statement stmt2 = null;
                ResultSet rs2 = null;

                try{
                    stmt2 = dbCon.createStatement();                                                        
                    rs2 = stmt2.executeQuery("sql Query as String");

                    ------- - ----

                    while(rs2.next()){
                        String col4 = rsTierMember.getString("DB_COL_4");

                        ... . .. . . . .....                                
                        . .. . .. . . . . . ..          
                    }

                    ... . .. .. ... .

                }catch(SQLException sqlExp){

                } catch (Exception e) { 

                }finally{
                    try{
                        if(rs2!=null)
                            rs2.close();
                        if(stmt2!=null)
                            stmt2.close();
                    }catch(Exception ex){}                                                                 
                }
            }

        }

         .... . .. .

    }catch (SQLException e) {

    } catch (Exception e) {     

    }finally{
        try{            
            if(rs1!=null)
                rs1.close();
            if(stmt1!=null)
                stmt1.close();
            if(dbCon!=null) 
                dbCon.close;                
        }catch(Exception ex){

        }
    }

    ...... . . . . . ...
    ... . .. . .. . . .. . 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T16:21:06.673

> 我想知道 finally 块是否真的可以关闭资源；比如，数据库连接？

这取决于您所说的“可靠”是什么意思。

*   如果 JVM 被硬中止（例如由于 JIT 中的错误），它可能不会执行
*   如果 JVM 正在正常终止，它可能不会执行（参见 Harmeet 的回答）
*   它不会执行它`try`块的内容永远挂起
*   电脑突然断电不执行

在所有这些情况下，我希望数据库注意到连接的另一端已经消失了。

如果您的架构师有一个他们认为该块不会执行的*特定*`finally`场景，他应该提供该场景的示例，此时您几乎可以肯定能够证明他们是错误的。如果他们拒绝提供任何细节，则忽略它们，并向管理层建议他们应该开始寻找不那么迷信的建筑师。

> 在这种情况下，我对 finally 块持怀疑态度，因为根据测试，finally 块没有释放资源，而是 Web 应用程序正在获取更多连接。最后，Tomcat 5.5 每隔两三个小时就会挂掉一次。

听起来测试可能无效，或者您正在其他地方泄漏连接，或者您没有关闭连接。但是很容易验证：将日志记录在`finally`块中，以验证您希望释放资源的代码是否至少被调用。如果它被调用但没有释放连接，那么它不再是`finally`块的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:26:01.697

这是一种`finally`不会执行的情况：

```
public class FinallyDemo {    
    public static void main(String[] args) {
        try {
            System.exit(0);
        } catch (Exception ex) {
            System.out.println(ex);
        } finally {
            System.out.println("finally");
        }
    }
} 
```

> 注意：如果在执行 try 或 catch 代码时 JVM 退出，则 finally 块可能不会执行。同样，如果执行 try 或 catch 代码的线程被中断或杀死，即使应用程序作为一个整体继续运行，finally 块也可能不会执行。[（参考）](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

并考虑**Jon Skeet**：*因为它取决于场景......以及“可靠”对您意味着什么。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T20:24:37.463

除了已经发布的出色答案之外，您的最后一个块有点错误

```
 try{            
        if(rs1!=null)
            rs1.close();
        if(stmt1!=null)
            stmt1.close();
        if(dbCon!=null) 
            dbCon.close;                
    }catch(Exception ex){

    } 
```

如果`rs1.close`抛出异常会发生什么？ `stmt1`并且`dbCon`没有关闭。

虽然它有点笨重，但它将确保在“正常”条件下关闭资源的最佳机会（不考虑其他帖子中提到的所有事情）

```
try {      
    rs1.close();
} catch (Exception exp) {}
try {      
    stmt1.close();
} catch (Exception exp) {}
try {      
    dbCon.close;                
}catch(Exception ex){} 
```

不，我们不需要检查`null`，因为 try/catch 会处理它以供使用。这也意味着如果`rs1.close`失败，我们不在乎，我们仍然可以尽最大努力关闭其他资源。

至少记录这些异常是个好主意，以防万一

# android - 具有不同背景的单元格的线性布局？可能的？

> ID：12077326
> 
> 赞同：1
> 
> 时间：2012-08-22T16:17:20.203
> 
> 标签：android, android-linearlayout

我有一个要求，我需要有一个 LinearLayout，对于这个布局的每个单元格，我会有不同的背景。这是设计师的例子：

[http://img823.imageshack.us/img823/1857/untilied.png](http://img823.imageshack.us/img823/1857/untilied.png)

有什么方法可以仅通过 XML 实现，还是应该在运行时完成？如何获取线性布局的单元格计数并处理此数字？

非常感谢，费利佩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:38:01.607

由于您不知道要添加的项目数量，您应该动态添加 TextViews 而不是通过 XML 静态添加。您应该首先获取设备屏幕的高度，然后根据以下公式将 TextViews 添加到父容器：

> 没有 TextViews = (显示高度) / (一个文本视图的高度)

现在您只需要动态创建 TextViews 并将它们循环添加到父容器中。

这是一个示例代码：

```
public class DynamicActiviy extends Activity {

/*parent container*/
LinearLayout root;

/*colors*/
Integer[] colors = {R.color.red1,R.color.red2,R.color.red3,R.color.red4,R.color.red5,
        R.color.red6,R.color.red7,R.color.red8,R.color.red9,R.color.red10};

/*text view height*/
final int MAX_HEIGHT = 60;

/*display height*/
int displayHeight;

/*no of text views to be added*/
int noTextViews;

TextView text;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.backs);

    root = (LinearLayout)findViewById(R.id.root);
    displayHeight = getWindowManager().getDefaultDisplay().getHeight();
    noTextViews = displayHeight / MAX_HEIGHT;

    int size = colors.length;
    LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, MAX_HEIGHT);

    for(int i=0; i<noTextViews; i++)
    {
        text = new TextView(this);
        text.setBackgroundResource(colors[i%size]);
        text.setGravity(Gravity.CENTER_VERTICAL);
        text.setPadding(20, 0, 0, 0);
        text.setText(colors[i%size]+ "");
        root.addView(text,lp);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:38:05.730

您可以在 XML 中为每个 TextView 定义背景。只需使用`android:background`

> [http://developer.android.com/reference/android/view/View.html#attr_android:background](http://developer.android.com/reference/android/view/View.html#attr_android:background)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="text"
        android:background="@color/blue" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="text"
        android:background="@color/red" />

</LinearLayout> 
```

要动态更改，您可以执行以下操作：

```
TextView txtView1 = (TextView) findViewById(R.id.textView1);
txtView1.setBackgroundResource(R.color.green); 
```

# api - OCR 字符跟踪

> ID：12077329
> 
> 赞同：1
> 
> 时间：2012-08-22T16:17:37.530
> 
> 标签：api, sdk, position, character, ocr

我需要能够识别图像中的一行字符，然后跟踪每个数字的位置，但不知道从哪里开始。

我不想编写任何我自己的算法（除非我绝对必须这样做），所以有没有人知道任何 API 或任何其他可以帮助我解决这个问题或为我指明正确方向的东西？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T09:30:38.847

[ABBYY Cloud OCR SDK](http://ocrsdk.com)将返回包含文本和坐标的 XML。

免责声明：我为 ABBYY 工作

# apache-flex - Flex中容器问题的动态minHeight

> ID：12077333
> 
> 赞同：1
> 
> 时间：2012-08-22T16:17:53.680
> 
> 标签：apache-flex, user-interface

我的 Flex 应用程序中的容器的动态最小高度存在问题。

该应用程序由几个选项卡组成，每个选项卡都根据需要设置了自己的 minHeight 属性。但是，在一个选项卡中，我在两个视图之间切换 - 一个列表视图和一个详细视图。

主要观点：

```
<mx:TabNavigator id="tabNavigator" width="100%" height="100%" change="MainViewModel.getInstance().onTabClick(event);" resizeToContent="true">
        <s:NavigatorContent label="Welcome" minWidth="950" width="100%" minHeight="300" height="100%">
            <startview:StartView width="100%" height="100%" x="0" y="0" />
        </s:NavigatorContent>
        <s:NavigatorContent id="documentTab" minWidth="950" width="100%" minHeight="300" height="100%" label="Document">
            <documentview:DocumentView width="100%" x="0" y="0" visible="{model.documentList}" />
            <documentdetailview:DocumentDetailView width="100%" x="0" y="0" visible="{model.documentDetail} "/>
        </s:NavigatorContent>
</mx:TabNavigator> 
```

在列表中，我有一列带有调用函数 setDocumentDetailView() 的“详细信息”链接：

```
public function setDocumentDetailView() : void {
    documentList = false; // the list is not displayed
    documentDetail = true; // the detail is displayed
} 
```

在详细视图中，我有一个返回列表调用函数 setDocumentListView() 的按钮：

```
public function setDocumentListView() : void {
    documentList = true; // tje
    documentDetail = false;
    setDocumentDetailViewHeight(300);
} 
```

到目前为止，它工作正常。

由于列表和细节的最小高度不同，出现了第一个问题。要显示垂直滚动条并显示特定视图的所有内容，必须设置 NavigatorContent id="documentTab" 的最小高度。这是在上面的函数中完成的。

由于详细信息取决于显示的文档，因此会出现更多问题。它由几个具有条件可见性的面板组成。因此，各种文档的最小高度是不同的（根据其类型以及文档文本的长度）。因此我需要根据内容确定minHeight，并相应地设置“documentTab”的minHeight。

我发现在呈现视图后调用的“updateComplete”事件。如果我得到包含所有条件面板的 VGroup 的高度值，则我需要为外部 NavigatorContent“documentTab”设置正确的高度。我将此高度传递给 MainModel 中设置选项卡的 minHeight 的函数。

```
public function onUpdateComplete(): void {
        if (MainViewModel.getInstance().documentDetail) {
            height = view.documentDetail.height;
            MainViewModel.getInstance().setDocumentDetailViewHeight(height);
        }
    } 
```

这似乎也能正常工作。直到 ...

我最近发现，如果我遵循以下场景，它会失败：

1.  显示文档列表。
2.  显示文档 A 的详细信息。
3.  返回列表。
4.  显示相同的文档 A。

在这种情况下，不会重新渲染详细视图，因为显示的对象具有相同的高度和宽度。因此，updateComplete 事件没有被触发，minHeight 保持设置为 300（因为在上一步中设置了列表 minHeight）。详细信息中的面板越过外部“documentTab”并且不会出现滚动条。当我转到另一个具有相似内容的文档（可见相同的面板和相同的比例）时，也会出现相同的情况。

有没有人有针对这种情况的有效解决方案？

我什至已经尝试过“显示”事件来将高度设置为存储在属性中的值。但它没有用。更糟糕的是，它开始表现得非常奇怪，因为“height”变量的值只设置为比以前更大的值，但从未变小。当视图可能更小时，变量会保留以前大小的值。当视图需要更大的高度时，该变量会采用新的更高值。这导致在访问各种文档的详细信息并保持这个大高度的同时将视图永久调整为最大发现大小 - 为所有文档详细信息提供大量空白空间和滚动条。

我真的厌倦了 Flex 的这种不可预测的行为 :( 所以，如果有人知道我应该尝试什么来完成这项工作，我会非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T11:52:25.543

我不确定这是否能解决您的问题，如果没有完整的代码很复杂，首先我建议您使用带有 View 堆栈的 tabBar，然后使用像这样的导航内容

```
<s:TabBar dataProvider="{myViewStack}" styleName="tabText" height="35"/>
   <mx:ViewStack id="myViewStack" paddingTop="0" width="100%" height="100%" resizeToContent="true" creationPolicy="all">    

        <!-- TAB 1-->                           
        <s:NavigatorContent id="familyTab" label="Familia" width="100%">
            <Code/>
        </s:NavigatorContent>

        <!-- TAB 2 -->
        <s:NavigatorContent id="subFamilyTab" label="SubFamilia" width="100%">
            <Code/>     
        </s:NavigatorContent>

    </mx:ViewStack> 
```

我不明白为什么你需要 minHeigh evrything 是动态的，所以如果你在你的 2n 选项卡中使用 hgroup，我肯定 evrything 会很好用/heigh。如果您对滚动有问题，只需使用滚动标签

```
<s:NavigatorContent id="documentTab" minWidth="950" width="100%" minHeight="300" height="100%" label="Document">
<s:VGroup width=100% heigh=100%>
            <documentview:DocumentView width="100%" x="0" y="0" visible="{model.documentList}" />
            <documentdetailview:DocumentDetailView width="100%" x="0" y="0" visible="{model.documentDetail} "/>
</s:VGroup>
        </s:NavigatorContent> 
```

在您在此 mxml 文件中使用的第一个组（vgroup 或 hgroup）上使用 s:scroller

# gnuplot - 如何在gnuplot中绘制缺少数据点的线

> ID：12077340
> 
> 赞同：8
> 
> 时间：2012-08-22T16:18:31.630
> 
> 标签：gnuplot

例子：

![在此处输入图像描述](../Images/20843e4164f12fc812f4b8b69360c4a6.png)

我想像上面一样绘制一个图表：一条缺少一些数据点的线，这意味着这条线是不连续的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T17:47:15.603

这取决于您的数据文件的外观。如果您在数据文件中插入空格，它将不会连接那些相邻的点（这是最简单的方法）：

考虑：

```
 #datafile
 1 2
 2 3

 4 2
 5 3 
```

然后是绘制它的脚本：

```
 plot 'datafile' u 1:2 w linespoints 
```

您还可以使用其他技巧来处理丢失的数据： `set datafile missing`. `help missing`内置帮助 ( )是一个很好的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T02:24:47.400

对于单个图，用于`set datafile missing`指定表示缺失值的字符串，以及`using $`用于确保 gnuplot 在行中为缺失值留出间隙的说明符。不同的`using`说明符[在`set datafile missing`](http://gnuplot.sourceforge.net/docs_4.2/node172.html).

在将列号指定为变量的情况下，这有点棘手。例如，要绘制文件的多个列，可以使用变量指定列号：

```
do for [i=2:10] {
    plot 'datafile' using ($1):i with lines
} 
```

但是，如果我们尝试使用该`$`语法，它就不起作用：

```
do for [i=2:10] {
    plot 'datafile' using ($1):($i) # ERROR!
} 
```

解决方案是使用[列函数](http://gnuplot.sourceforge.net/docs_4.2/node53.html)，它也会为缺失值留下空白：

```
do for [i=2:10] {
    plot 'datafile' using ($1):(column(i)) with lines
} 
```

# c# - 支持任何模型的通用 Web Api 控制器

> ID：12077361
> 
> 赞同：23
> 
> 时间：2012-08-22T16:19:53.540
> 
> 标签：c#, generics, asp.net-web-api

是否有可能拥有一个支持项目中任何模型的通用 Web api？

```
class BaseApiController<T> :ApiController
{
    private IRepository<T> _repository;

    // inject repository

    public virtual IEnumerable<T> GetAll()
    {
       return _repository.GetAll();
    }

    public virtual T Get(int id)
    {
       return _repositry.Get(id);
    }

    public virtual void Post(T item)
    {
       _repository.Save(item);
    }
    // etc...
}

class FooApiController : BaseApiController<Foo>
{
   //..

}

class BarApiController : BaseApiController<Bar>
{
   //..
} 
```

这是一个好方法吗？

毕竟，我只是重复 CRUD 方法？我可以使用这个基类为我做这项工作吗？

这个可以吗？你会这样做吗？有更好的主意吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-22T17:44:27.003

我为一个小项目做了这个，以便启动并运行一些东西来演示给客户。一旦我了解了业务规则、验证和其他注意事项的细节，我最终不得不从我的基类中重写 CRUD 方法，因此它没有成为长期实现。

我遇到了路由问题，因为并非所有东西都使用相同类型的**ID**（我正在使用*现有*系统）。有些表有`int`主键，有些有`strings`，有些有`guids`。

我最终也遇到了问题。最后，虽然当我第一次这样做时它看起来很流畅，但在现实世界的实现中实际使用它被证明是另一回事，并且根本没有让我走得更远。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T16:21:46.853

这绝对是可能的。我以前从来没有理由这样做，但如果它适合你的情况，那应该很好。

如果您的所有模型都可以以完全相同的方式保存和检索，也许它们应该都在同一个控制器中而不是？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-05T09:14:49.827

```
 public class GenericApiController<TEntity> : BaseApiController
    where TEntity : class, new()
{
    [HttpGet]
    [Route("api/{Controller}/{id}")]       
    public IHttpActionResult Get(int id)
    {
        try
        {
            var entity = db.Set<TEntity>().Find(id);
            if(entity==null)
            {
                return NotFound();
            }
            return Ok(entity);

        }
        catch(Exception ex)
        {
            return InternalServerError(ex);
        }
    }

    [HttpGet]
    [Route("api/{Controller}")]
    public IHttpActionResult Post(TEntity entity)
    {
        if (!ModelState.IsValid)
        {
            return BadRequest(ModelState);
        }

        try
        {
            var primaryKeyValue = GetPrimaryKeyValue(entity);
            var primaryKeyName = GetPrimaryKeyName(entity);
            var existing = db.Set<TEntity>().Find(primaryKeyValue);
            ReflectionHelper.Copy(entity, existing, primaryKeyName);
            db.Entry<TEntity>(existing).State = EntityState.Modified;
            db.SaveChanges();
            return Ok(entity);
        }
        catch (Exception ex)
        {
            return InternalServerError(ex);
        }
    }

    [HttpGet]
    [Route("api/{Controller}/{id}")]
    public IHttpActionResult Put(int id, TEntity entity)
    {
        try
        {
            if (!ModelState.IsValid)
            {
                return BadRequest(ModelState);
            }

            var existing = db.Set<TEntity>().Find(id);
            if (entity == null)
            {
                return NotFound();
            }
            ReflectionHelper.Copy(entity, existing);
            db.SaveChanges();
            return Ok(entity);
        }
        catch (Exception ex)
        {
            return InternalServerError(ex);
        }
    }

    [HttpDelete]
    [Route("api/{Controller}/{id}")]
    public IHttpActionResult Delete(int id)
    {
        try
        {
            var entity = db.Set<TEntity>().Find(id);
            if(entity==null)
            {
                return NotFound();
            }
            db.Set<TEntity>().Remove(entity);
            db.SaveChanges();
            return Ok();
        }
        catch (Exception ex)
        {
            return InternalServerError(ex);
        }
    }

    protected internal int GetPrimaryKeyValue(TEntity entity)
    {
        return ReflectionHelper.GetPrimaryKeyValue(entity);
    }

    protected internal string GetPrimaryKeyName(TEntity entity)
    {
        return ReflectionHelper.GetPrimaryKeyName(entity);
    }

    protected internal bool Exists(int id)
    {
        return db.Set<TEntity>().Find(id) != null;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T01:43:42.710

只要您处理存储库中的所有繁重工作，这没有任何问题。您可能希望在基本控制器中包装/处理模型状态异常。

实际上，我正在为一个用户可以定义自己的实体和 API 的大型项目做类似的事情——即：一个用户可能想要拥有用户和帐户，而另一个用户可能想要跟踪汽车和其他任何东西。它们都使用相同的内部控制器，但它们都有自己的端点。

不确定我们的代码对您有多大用处，因为我们不使用泛型（每个对象都作为元数据维护，并作为 JObject 字典来回操作/传递），但这里有一些代码可以让您了解我们在做什么和也许提供思考的食物：

```
[POST("{primaryEntity}", RouteName = "PostPrimary")]
public async Task<HttpResponseMessage> CreatePrimary(string primaryEntity, JObject entity)
{
   // first find out which params are necessary to accept the request based on the entity's mapped metadata type
   OperationalParams paramsForRequest = GetOperationalParams(primaryEntity, DatasetOperationalEntityIntentIntentType.POST);

   // map the passed values to the expected params and the intent that is in use
   IDictionary<string, object> objValues = MapAndValidateProperties(paramsForRequest.EntityModel, paramsForRequest.IntentModel, entity);

   // get the results back from the service and return the data to the client.
   QueryResults results = await paramsForRequest.ClientService.CreatePrimaryEntity(paramsForRequest.EntityModel, objValues, entity, paramsForRequest.IntentModel);
        return HttpResponseMessageFromQueryResults(primaryEntity, results);

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-17T09:03:48.590

如果您有预定义的设计时类，例如从 EF 模型或 Code First 生成的类，那么这对您的系统来说太复杂了。如果您没有预定义的类（例如在我的项目中在运行时生成数据实体类），这将非常有用。

我的解决方案（尚未正确实现）是创建自定义 IHttpControllerSelector ，它为所有请求选择我的通用控制器，在那里我可以根据请求路径通过反射设置通用参数将控制器的描述符类型从通用设置为具体。

[http://entityrepository.codeplex.com/](http://entityrepository.codeplex.com/)也是一个很好的起点（我在 stackoverflow 的某个地方找到了这个）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-22T13:05:15.087

正如其他人所说，您所做的绝对是可能的。但是对于存储库依赖项，您应该使用依赖项注入。我的典型控制器（Api 或 MVC）如下。

```
public class PatientCategoryApiController : ApiController
{

    private IEntityRepository<PatientCategory, short> m_Repository;
    public PatientCategoryApiController(IEntityRepository<PatientCategory, short> repository)
    {
        if (repository == null)
            throw new ArgumentNullException("entitiesContext is null");

        m_Repository = repository;
    }
} 
```

这是典型的构造函数注入模式。您需要对 DI 和 NInject 或 Autofac 等容器有充分的了解。如果您不了解 DI，那么您还有很长的路要走。但这是一个很好的方法。看看这本书。[https://www.manning.com/books/dependency-injection-in-dot-net](https://www.manning.com/books/dependency-injection-in-dot-net)

# java - 使用 java 设置 Mac 防火墙

> ID：12077363
> 
> 赞同：1
> 
> 时间：2012-08-22T16:19:56.747
> 
> 标签：java

我要用java在我的防火墙中添加一些规则，我想用java执行这个命令：

```
String [] cmd = {"sudo ipfw delete 100 "};
Runtime.getRuntime().exec(cmd); 
```

但我得到这个错误

> 无法运行程序“sudo ipfw delete 100”：错误=2，没有这样的文件或目录

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:27:03.327

这是 *nix 平台上 Runtime.exec 的常见错误输出。确保两者`sudo`和`ipfw`都在您的运行时环境中。

或者，您可以指定完整路径位置：

```
String [] cmd = {"/path_to_sudo/sudo", "/path_to_ipfw/ipfw", "delete", "100"}; 
```

Wrt 的密码`sudo`，您可以[在命令](https://superuser.com/questions/67765/sudo-with-password-in-one-command-line)中使用密码，尽管 this(!) 存在明显的安全风险

一种解决方案是从您的应用程序中读取密码。

*   如果使用基于 Swing 的应用程序，您可以使用[JPasswordField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html)
*   如果使用基于控制台的应用程序，您可以使用[Console.readPassword](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html#readPassword%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:26:19.473

我会尝试 ipfw /sbin/ipfw 的完整路径，也可能尝试 sudo 。

一个问题是您打算如何处理输入这样的密码？

# asp.net - 在应用程序池回收期间，是否从应用程序域卸载程序集？

> ID：12077370
> 
> 赞同：1
> 
> 时间：2012-08-22T16:20:16.770
> 
> 标签：asp.net, iis-7, assemblies, appdomain

我刚刚在应用程序池回收之前和之后检查了 AppDomain.CurrentDomain.GetAssemblies，看起来就是这种情况。我不明白为什么在第一个实例中加载了一些 86 个程序集，即当我部署应用程序时，然后在回收后只加载了 28 个程序集。

会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-17T13:16:46.723

这是 IIS 的[已知行为](http://docs.autofac.org/en/latest/faq/iis-restart.html)。IIS 回收后，程序集会按需加载。

如果要获取所有可用的程序集，可以在类型上使用[`GetReferencedAssemblies`](http://msdn.microsoft.com/en-us/library/system.web.compilation.buildmanager.getreferencedassemblies.aspx)方法。[`System.Web.Compilation.BuildManager`](https://msdn.microsoft.com/en-us/library/System.Web.Compilation.BuildManager.aspx)

例如 ：

```
IEnumerable<Assembly> assemblies = AppDomain.CurrentDomain.GetAssemblies();
if (HostingEnvironment.InClientBuildManager)
{
    assemblies = assemblies.Union(BuildManager.GetReferencedAssemblies().Cast<Assembly>());
} 
```

# linq - 我填充了一个列表 使用 linq，但项目的顺序是随机的

> ID：12077371
> 
> 赞同：0
> 
> 时间：2012-08-22T16:20:22.657
> 
> 标签：linq

我有这个 linq 语法

```
var jsonData = new
            {
                total = 1,
                page = 1,
                records = per.Count(),
                rows = 
                           from r in per
                           select new
                           {
                               id = r.id,
                               cell = new List<string>()
                                  {
                                       SqlFunctions.StringConvert((double)  r.id),
                                       r.nombre,
                                       r.mail,
                                       r.documento
                                  }
                           }
            }; 
```

问题是单元格属性中每个列表的值具有随机的项目顺序。

示例结果：

```
 item 1:  id:"         1"    string
        nombre:"Medina Teto"    string
        mail: "soyelteto@hotmail.com"   string
        dni:"DNI 12312322"  string
    item 2:
            dni:"DNI 12312872"  string
            mail:"elancho@hotmail.com"  string
            nombre: "Peuchele Ruben"    string
            id: "         2"    string

        item 3:
            id: "         3"    string
            nombre: "la momia Blanca"   string
            mail: "soylamomiabuena@hotmail.com" string
            dni: "DNI 45612322" string 
```

项目 2 先是 dni，然后是邮件。其他项目具有第一个 ID，然后是名称

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:46:37.700

不知道为什么会发生（虽然我认为 a 中项目的枚举顺序`List<T>`并不能保证是稳定的），但是可以通过使用命名值来解决：

```
cell = new
{
    dni = SqlFunctions.StringConvert((double)  r.id),
    nombre = r.nombre,
    mail = r.mail,
    documento = r.documento
} 
```

额外的好处：接收方更清楚它正在处理什么。

* * *

**编辑**（在您发表评论后）

试试你的运气

```
cell = new SortedList<int,string>
{
    { 1, r.id.ToString() },
    { 2, r.nombre },
    { 3, r.mail },
    { 4, r.documento }
} 
```

但是您必须先转换为`IEnumerable`，EF 不支持具有多个元素的列表初始值设定项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:17:12.140

解决方案：

```
 var rows = per.AsEnumerable()
                        .Select(r => new
                           {
                               id = r.id,
                               cell = new[]
                                  {
                                       r.id.ToString(),
                                       r.nombre,
                                       r.mail,
                                       r.documento
                                  }
                           }).ToArray();

            var jsonData = new
            {
                total = 1,
                page = 1,
                records = per.Count(),
                rows
            }; 
```

# java - 使用 Axis java2wsdl / wsdl2java 生成的源类与原始类不同

> ID：12077372
> 
> 赞同：0
> 
> 时间：2012-08-22T16:20:33.490
> 
> 标签：java, web-services, wsdl2java, axis

我正在使用 Apache Axis 实现 WebService。该服务接收一个包含以下成员的*ParameterBean*类作为参数：

```
public class ParameterBean {
    protected String userName   = "";
    protected String password   = "";
    protected int    clientID   = 0;
    protected int    orgID  = 0;
    protected HashMap<String, String> mainTable = new HashMap<String, String>();
} 
```

加上传统的 getter 和 setter。我实现了一个特殊的构造函数：

```
public ParameterBean(String userName, String password, int clientID, int orgID) {
    this.userName = userName;
    this.password = password;
    this.clientID = clientID;
    this.orgID = orgID;
} 
```

另外，这个类有一些基本的方法，比如：

```
public void addColumnToMainTable(String columnName, String columnValue) {
    addColumnOnTable(mainTable, columnName, columnValue);
} 
```

但是，当我运行 java2wsdl 和 wsdl2java 时；生成的*ParameterBean*源代码差别很大。方法*addColumnToMainTable()*没了，生成的构造函数就是这个（和原来的不一样）：

```
public ParameterBean(
    int clientID,
    java.util.HashMap mainTable,
    int orgID,
    java.lang.String password,
    java.lang.String userName) {
    this.clientID = clientID;
    this.mainTable = mainTable;
    this.orgID = orgID;
    this.password = password;
    this.userName = userName;
} 
```

我的 build.xml：

```
<target name="generateWSDL" description="Generates wsdl files from the java service interfaces">  
<mkdir dir="${wsdl.dir}"/>  
<axis-java2wsdl classpathref="classpath"  
    output="${wsdl.dir}/ExampleWS.wsdl"  
    location="http://localhost:8080/axis/services/ExampleWS"  
    namespace="org.example.ws"  
    classname="org.example.ws.ExampleWS">  
</axis-java2wsdl>  
</target>  

<target name="generateWSDD" description="Generates wsdd files from the wsdl files">  
<mkdir dir="${wsdd.dir}"/>  
<axis-wsdl2java  
    output="${wsdd.dir}"  
    deployscope="Application"  
    serverside="true"  
    url="${wsdl.dir}\ExampleWS.wsdl">  
</axis-wsdl2java>  
</target> 
```

为什么生成的代码存在差异？我该如何解决？我正在使用轴 1.4。谢谢。

编辑：对我来说更重要的是：我应该使用哪个类（服务器端和客户端）？我的还是生成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T01:32:52.153

好吧，仔细阅读[Axis 文档](http://axis.apache.org/axis/java/user-guide.html#Java2WSDLBuildingWSDLFromJava)，生成的类会有所不同，因为 WSDL 不包含有关代码实现的任何信息，因此默认构造函数和除 getter/setter 之外的其他方法。

对于客户端，我可以使用生成的类或原始类，两者都可以正常工作。

# java - 位置并不总是出现

> ID：12077377
> 
> 赞同：0
> 
> 时间：2012-08-22T16:20:41.957
> 
> 标签：java, android, geolocation

我试图通过 LocationManager.NETWORK_PROVIDER 获取用户的位置，但它总是返回一个空白字符串。只有有时我会得到有效的数据。有没有办法让这个方法重新迭代，直到它给我一个位置？我认为该位置会很快到来，并且不需要这种方法。我尝试重新调用它，直到它不显示空白字符串，但什么也没有出现。

这是我调用的方法

```
 public String getLocation(Locale locale, Context context, boolean city, boolean postal, boolean state_prov) throws IOException{
       LocationManager locMan = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
       LocationListener locList = new MyLocList();
       Geocoder gC = new Geocoder(context,locale);
       Location gpsLocation = locMan.getLastKnownLocation(locMan.GPS_PROVIDER);
       locMan.requestLocationUpdates(locMan.NETWORK_PROVIDER, 500, 200, locList);
       Location networkLocation = locMan.getLastKnownLocation(locMan.NETWORK_PROVIDER);
       if (city)
           return (gC.getFromLocation(networkLocation.getLatitude(), networkLocation.getLongitude(), 1).get(0).getSubAdminArea());
       else if (postal)
           return (gC.getFromLocation(networkLocation.getLatitude(), networkLocation.getLongitude(), 1).get(0).getPostalCode());
       else if (state_prov)
           return (gC.getFromLocation(networkLocation.getLatitude(), networkLocation.getLongitude(), 1).get(0).getAdminArea());
       else
           return "Nothing";
    } 
```

我通常会询问城市或邮政编码，但大多数时候它都是空的。使用

```
 Location gpsLocation = locMan.getLastKnownLocation(locMan.GPS_PROVIDER); 
```

结果是 NullPointer，所以我使用的是 NETWORK_PROVIDER

我已经设置了这些权限：

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission> 
```

这就是我所说的

```
 String data = getLocation(Locale.getDefault(),getBaseContext(),true,false,false); 
```

结果，我不断得到一个空白字符串。

我之前问了一个关于没有收到城市的问题，但是现在似乎没有数据来了，如果是，它不是始终可用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:34:11.143

在您的代码中，您要求的是“最后一个已知位置”，而不是“当前位置”。其他一些应用程序之前要求提供位置，而您得到的结果与该应用程序相同。如果在启动您的应用程序之前没有请求位置，“最后已知位置”将为空。

正确的方法是注册监听器并等待位置更新到达。然后将结果存储为“最后已知位置”。

这个答案应该对您有所帮助：[在 Android 中获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/a/3145655/1565935)

编辑：为了澄清，这里是上面链接中提到的 MyLocation 类的正确用法。您不能立即获得位置，而是将代码放在回调方法中，当位置数据可用时，它将被调用。

```
LocationResult locationResult = new LocationResult(){
    @Override
    public void gotLocation(Location location){
        //Got the location!
        //Here goes your code
        //This method will be called when location data arrive
    }
};
MyLocation myLocation = new MyLocation();
myLocation.getLocation(this, locationResult); 
```

# regex - 电子邮件地址验证，如何？

> ID：12077380
> 
> 赞同：0
> 
> 时间：2012-08-22T16:20:48.717
> 
> 标签：regex, validation, exchange-server, email-validation

我正在 ac# 应用程序中验证电子邮件地址，除了正则表达式之外，我还计划通过与邮件交换器通信来添加一些高级验证，并获得此类电子邮件地址是否存在的响应

有没有人有这样做的好主意？我知道一个可以检查它的网站：

```
http://www.ip-address.org/verify/email-checker.php 
```

但我不确定网站用于验证的方法是什么。我尝试在我的邮件交换器上模拟 telnet 会话，然后发送命令

```
MAIL FROM and RCPT TO 
```

但它不起作用，要么连接被阻止，要么响应错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T21:25:15.940

The technique you describe no longer works and variations on it don't work either-- the mail server will respond incorrectly or mark you as a spammer, ref. [http://www.spamresource.com/2010/11/smtp-address-validation-bad-idea.html](http://www.spamresource.com/2010/11/smtp-address-validation-bad-idea.html)

Mail-Bee NET has some features like this and the documentation says it can work, but you need to convince the other mail servers that you are also a mail server. [http://www.afterlogic.com/mailbee-net/docs/getting_started_with_address_validator.html](http://www.afterlogic.com/mailbee-net/docs/getting_started_with_address_validator.html)

Either way, it sounds like a risky project and likely to get your mail server blacklisted.

# php - 带有ajax的子文件夹中的Php会话范围

> ID：12077384
> 
> 赞同：0
> 
> 时间：2012-08-22T16:21:13.113
> 
> 标签：php, javascript

我有一个在 / 级别上运行的用户登录会话，它工作正常，然后我有一个 javascript 正在调用文件 /php/ajax.php 以使用数据库后端。事情是我希望将会话数据从初始登录/级别传输到 ajax.php，但它没有。对这个话题有任何合理的想法吗？

登录页面检查：

```
<?php
session_start();
echo session_id();
if(!isset($_SESSION['loggedin']))
{
    die("To access this page, you need to <a href='login.php'>LOGIN</a>");
} 

define('WP_USE_THEMES', false); //loads wordpress
require('/home/content/70/9551370/html/alpha/wordpress/wp-blog-header.php');
query_posts('showposts=1');
?>
<head>
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/page.css" /-->
    <link rel="stylesheet" type="text/css" href="css/chat.css" />
<head>
<body>
<div class="background_container" style="">
<div style="text-align:center;">
<table style="text-align:center;"><!--three column division-->
<tr>
<td id="chat">
<div id="chatContainer">

    <div id="chatTopBar" class="rounded"></div>
    <div id="chatLineHolder"></div>

     <div id="chatBottomBar" class="rounded">
        <div class="tip"></div>

        <form id="loginForm" method="post" action="">
            <input id="name" name="name" class="rounded" maxlength="16" />
            <input id="email" name="email" class="rounded" />
            <input type="submit" class="blueButton" value="Login" />
        </form>

        <form id="submitForm" method="post" action="">
            <input id="chatText" name="chatText" class="rounded" maxlength="255" />
            <input type="submit" class="blueButton" value="Submit" />
        </form>

    </div>

</div>
    <!--table>
        <tr>
            <td class="window_top"></td>
        </tr>
        <tr>
            <td class="window_bottom"><div>chat form goes here</div></td>
        </tr>
    </table-->
</td>
<td class="lesson"><!--Wordpress posts-->
    <?php while (have_posts()): the_post(); ?>
      <h2><?php the_title(); ?></h2>
      <?php the_excerpt(); ?>
      <a href="<?php the_permalink(); ?>" class="text1">Read more...</a>
     <?php endwhile; ?>
    </td>
<td><!--End Wordpress-->
<h2>Tracking</h2>
<p><?php Print_r ($_SESSION); ?></p>

<form action="" method="">
<ul id="grade_list" style="list-style:none;">

    <li>1\. <Input type = 'radio' Name ='lesson1'  checked="checked" value= 'yes'>Yes</input>
        <Input type = 'radio' Name ='lesson1'  value= 'no'>No</input>
    </li>
    <li>2\. <Input type = 'radio' Name ='lesson2'  checked="checked" value= 'yes'>Yes</input>
        <Input type = 'radio' Name ='lesson2'  value= 'no'>No</input>
    </li>
    <li>3\. <Input type = 'radio' Name ='lesson3'  checked="checked" value= 'yes'>Yes</input>
        <Input type = 'radio' Name ='lesson3'  value= 'no'>No</input>
    </li>
</ul>
    <Input type = "Submit" Name = "Submit1" Value = "Submit">
</form>
</td>
</tr>
</table>

</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="js/jScrollPane/jquery.mousewheel.js"></script>
<script src="js/jScrollPane/jScrollPane.min.js"></script>
<script src="js/script.js"></script>
</body> 
```

阿贾克斯.php：

```
<?php

$dbOptions = array(

    'db_host' => 'ip',
    'db_user' => 'user',
    'db_pass' => 'password',
    'db_name' => 'db_name'
);

/* Database Config End */

error_reporting(E_ALL ^ E_NOTICE);

require "classes/DB.class.php";
require "classes/Chat.class.php";
require "classes/ChatBase.class.php";
require "classes/ChatLine.class.php";
require "classes/ChatUser.class.php";

session_start();

...
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:23:23.770

放在`session_start()`所有需要访问会话的文件的开头。

```
<?php //very first line of file (ajax.php, index.php, whatever.php)
session_start();
// other PHP scripting here
.
.
.
?>
<!-- HTML here if necessary -->
.
.
. 
```

# java - java中的hashcode实现

> ID：12077385
> 
> 赞同：0
> 
> 时间：2012-08-22T16:21:21.397
> 
> 标签：java, hashcode

我在弄清楚如何为以下示例实现有效的哈希码时遇到了一些麻烦：

我有 2 节课：

```
Class A
{
} 

Class B 
{
  protected List<A> constitutingObjects;
} 
```

已经覆盖了 equal，所以如果 A 是 B.构成对象的一部分，则对象 A 等于对象 B。我遇到的问题是我不确定如何为此实现哈希码。

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:26:05.240

TL; DR：您尝试做的事情没有意义。退后一步，尝试以不同的方式处理更大的任务。

> 已经被覆盖 equal 所以如果 A 是 B.构成对象的一部分，则 A 类等于 B 类

这听起来是个*非常糟糕的主意*。很难说这些对象代表什么，但包含集合的东西在逻辑上不等于该集合的元素——购物清单不等于“牛奶”。

不要忘记您*必须*遵循[`java.lang.Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)文档中指定的要求。许多其他代码将*取决于*这些保证。

Implementing `hashCode` will basically be impossible unless you just return a constant. The hash code of two equal objects has to be equal, which means the hash code of any instance of `ClassB` would have to be equal to the hash code of *every element* of `constitutingObjects`, which means that all of those elements would have to have the same hash code. Unless instances of `ClassA` somehow "knew" what their container was, I don't see how this could be possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:24:20.630

在 Java 中定义`equals`和定义`hashCode`时，您不是在测试 2 个类是否相等，您实际上是在根据`equals`方法测试相同类型（类）的 2 个对象是否相等，或者它们可以在同一个“桶”中（逻辑上对象组）根据`hashCode`.

因此，如果 x 和 y 是 A 类型的 2 个对象：

```
A x = new A();
A y = new A(); 
```

*   如果`x.equals(b)`为真则`x.hashCode()`必须等于`y.hashCode()`
*   如果`x.hashCode() == y.hashCode()`then`x.equals(y)`可以是真或假

# class - ASP Classic 与类合并 - 不确定如何构建演示文稿

> ID：12077390
> 
> 赞同：2
> 
> 时间：2012-08-22T16:21:42.180
> 
> 标签：class, asp-classic

我有一个我正在维护的 ASP Classic 站点，我想合并对对象和属性的访问。我编写了一些带有属性的简单类，用于获取数据、插入数据和更新特定对象的数据。这些类中的大多数对应于一个表。

我想知道我应该在哪里做一些事情，比如为屏幕创建 HTML 输出，或者我应该在哪里放置使用多个类的方法。例如，我可能有一个使用作业和学生信息来生成输出的学生年级班级。

我是否制作了一个“演示文稿”类，它从对象中获取记录集（或数组？）并呈现输出？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:39:23.583

首先，我想建议为此使用 WSC。与类不同，WSC 可以有条件地加载/实现。在我工作的公司，我们使用 WSC 构建了一个非常稳定和快速的多层 ORM。WSC 是用脚本代码编写的对象，具有属性和方法。

[WSC 说明](http://aspalliance.com/414_Windows_Scripting_Components_WSC_in_ASP)
[WSC 示例](http://precompiled.wordpress.com/tag/asp-wsc-sha1-hmac-encryption/)

和您一样，我们每个表都有一个 WSC，具有列属性。此外，每个 WSC 都有一个 initialise() 方法，该方法接受一个 ID，并使用数据库中该 ID 的值加载所有对象属性。它还有一个 save() 方法。这会检查是否存在 id。如果没有，它执行一个 INSERT，如果有一个 id，这是一个现有的记录，它执行一个 UPDATE。它还有一个删除函数（）。我们有一个小的 ASP 网页，可以为给定的表动态生成这些 WSC。

在 WSC 中，我们有一个数据访问层对象，它执行 WSC 中的所有查询。每个 WSC 只是构建 SQL 字符串并将它们发送到 DAL，DAL 返回一个记录集（或者只是执行而没有结果）。这个 DAL 是唯一需要知道数据库连接字符串的组件。如果需要，它还可用于记录所有查询。

我们还有用于记录/调试、翻译的 WSC，以及一个非常重要的用于转义所有 SQL 以防止 SQL 注入的 WSC。

回到你的问题；

通常，您会尽可能地将逻辑与表示分开。在诸如 asp.net mvc 或 django 之类的现代框架中，您只能将信息传递到可以添加到的通用字典中的页面，或者传递到页面的模型中。（模型是您的类映射表之一）。如果您可以模仿这种行为，那么您可以很好地分离逻辑和代码。

我会告诉你我们做了什么来解决你描述的问题，但我也会告诉你我们的解决方案并不理想，如果我们从头开始我会怎么做：

我们在当前应用程序中所做的是向我们的 WSC 添加方法。因此，假设我们有一个 user() wsc，它映射到一个用户表，我们已经可以执行以下操作：

```
user.firstname = "erik"
user.lastname = "test"
user.save() 
```

然后我们将“user-stuff”添加到这个 WSC，比如一个 login() 函数，它接受用户名和密码，并返回一个用户 ID（或者当登录不成功时不返回任何内容）：

```
dim userid
    userid = user.login("test", "test") 
```

通过这种方式，我们通过将属于特定实体的逻辑放在它所属的 WSC 中来分离属于它的逻辑。

所以我们实际上做的是给对象本身添加逻辑。这不是真正的面向对象风格的方式。在真正的面向对象编程中，您会将对象（如用户对象）作为参数或函数结果传递，并保持您的（处理）逻辑分开。经典 ASP 并不是真正面向对象的，因此我们选择将逻辑添加到对象本身，但事后看来，如果您愿意，可以在经典 ASP 中实现类似的东西。

此外，还有一些程序会引发它们属于何处的问题。向用户发送格式化的 PDF 信件，逻辑是放在用户对象还是信件对象中？我们回答这个问题的方法就是查看代码。我们是否已经有可用的用户 WSC 并已初始化？然后我们可以很容易地向用户添加一个方法。如果我们需要批量发送信件，并且我们从一个开放的 letters.wsc 开始，我们将功能添加到信件 wsc。老实说，它主要是自己安排的。

如果您要完全分离您的业务逻辑和您的 ORM（将表映射到类或 WSC），那么您将不会遇到这个问题。这就是为什么现代 OO 语言可以很好地解决这个问题的原因。在经典 ASP 中，您可以通过将处理逻辑放在 ASP 页面中来做到这一点，而对象就在那里供处理逻辑使用。

我们目前所做的是我们有一个专用的 WSC，可以将信息存储在数据库中。我们在一个 ASP 页面上进行处理，但我们不显示它。相反，我们将结果放在这个 WSC 中（它将它存储在一个大的键值表中）。然后我们重定向到不同的 ASP 页面，该页面显示来自同一个 WSC/表的数据，从而分离代码表单逻辑。

[用于经典 ASP 的 memcached](http://drcarter.info/2011/06/memcached-component-for-classic-asp/)

不久之后，就可以使用经典 ASP 中的 memcached。memcached 是一个完全在内存中的 key-value 存储，facebook 也使用它。它比用于存储的数据库快得多。我会重新开始吗，我会这样实现它：

1.  使用 WSC 来创建像我们现在这样的 ORM
2.  不要把业务逻辑放在WCS里，默认放在ASP页面里
3.  让 asp 页面将结果存储在 memcached 中（这可以是简单的变量，也可以是序列化的记录集，甚至是 json 对象，如果您使用的是 jscript 而不是 vbscript）
4.  重定向到可以显示存储在 memcached 中的信息的演示页面。

Dammit Caveatrob，正如你所看到的，我对这些东西非常热情，好像我写了一本关于实现它的小书。从头开始做这件事会做很多工作，我意识到我说的比你问的要多，但我不想在写完之后删除它。
我希望其中一些信息对您有利，即使您可能不会实现整个框架。（如果你这样做，请告诉我:)）

埃里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:34:34.050

在我工作的地方，我们将“页面”编写如下：

## 开始控制器

页面控制器代码（SQL 查询、参数、会话等）

在这里，我们计算整个事物以进行演示并根据用户操作采取行动

## 结尾

## 开始演示

使用服务器端显示 html 页面包括常见的 html 片段（分页、常见脚本等），以及在控制器端准备的数据。

## 结束演示

在演示方面（无论您在哪里/无论您如何做），您都可以调用您的对象方法来根据需要显示/检索数据

我认为，除非它真的很常见，否则您的业务对象的表示不应该被封装到它们的类中，而是在其他地方。

也许你可以为你的对象构建几个实现不同渲染器的类。但我认为大多数时候很难将整个演示文稿封装成对象:(

希望这可以帮助！干杯!

# java - java如何监控文件夹的变化？

> ID：12077391
> 
> 赞同：7
> 
> 时间：2012-08-22T16:21:45.410
> 
> 标签：java, multithreading, file, file-io

我有以下代码用于监视文件夹以了解 java 中的任何更改：

```
 public class FolderWatcher
    {
    // public List<Event> events = new ArrayList<Event>();

    public static Event call() throws IOException, InterruptedException
    {
        LOG.info("Watching folder");
        Path _directotyToWatch = Paths.get("data/input-files"); // this will be put in the configuration file
        WatchService watcherSvc = FileSystems.getDefault().newWatchService();
        WatchKey watchKey = _directotyToWatch.register(watcherSvc,  ENTRY_CREATE, ENTRY_DELETE, ENTRY_MODIFY);

        watchKey = watcherSvc.take();
        for (WatchEvent<?> event : watchKey.pollEvents())
        {
            WatchEvent<Path> watchEvent = castEvent(event);
            LOG.info(event.kind().name().toString() + " " + _directotyToWatch.resolve(watchEvent.context()));
            String eventName = event.kind().name();
            String fileName = _directotyToWatch.resolve(watchEvent.context()).toString();
            watchKey.reset();
            return new Event(eventName, fileName);
        }
        return null;

    }

@SuppressWarnings("unchecked")
static <T> WatchEvent<T> castEvent(WatchEvent<?> event)
{
    return (WatchEvent<T>) event;
}

} 
```

和：

```
public abstract class AbstractWatcher
{
    abstract void eventDetected(Event event);

    private final ScheduledExecutorService threadpool;

    public AbstractWatcher(ScheduledExecutorService threadpool)
    {
        this.threadpool = threadpool;
    }

    public AbstractWatcher()
    {
        threadpool = Executors.newSingleThreadScheduledExecutor();
    }

    public void handle()
    {
        final FolderWatcherHandler handler = new FolderWatcherHandler();

        final Runnable r = new Runnable()
        {
            @Override
            public void run()
            {
                try
                {
                    Event event = FolderWatcher.call();
                    if (event != null)
                    {
                        handler.eventDetected(event);
                    }
                }
                catch (IOException e)
                {
                        LOG.error("failed to watch the update", e);
                 }
                catch (InterruptedException e)
                {
                    LOG.info("thread interrupted", e);
                    Thread.currentThread().interrupt();
                    return;
                }

            }
        };

        Runtime.getRuntime().addShutdownHook(new Thread()
        {
            @Override
            public void run()
            {
                    threadpool.shutdown();

            }
        });

        threadpool.scheduleWithFixedDelay(r, 0, 1, TimeUnit.NANOSECONDS);
    }
} 
```

和：

```
public class FolderWatcherHandler extends AbstractWatcher
{
    @Override
    public void eventDetected(Event event)
    {
         // Do stuff
        }
} 
```

只要文件的修改（在我的情况下主要是添加）是 1 对 1 完成的，并且每次添加时都会有一点延迟，这整个事情就可以完美地工作。但是，如果我拖放或同时添加多个文件。此代码仅检测第一个文件的事件，而不检测其余文件。我什至将执行时间以纳秒为单位，但没有帮助。我想知道整个代码是一种正确的方法。有人能帮我吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:37:02.810

Why don't you store a `metadata` file in each folder (`recursively`), in that `metadata` file you can store `file list` and `modified date` and `size` of each file. Your thread should compare this `metadata` file in each folder with the `current files` present in the same. That is how you can detect any change within that folder.

Remember you should do it recursively for each `subfolder` within that. And the `metadata` file should be updated with each scan. Hope this helps..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-13T09:30:53.970

就我而言，这段代码是成功的：

```
try {
    Path rootFolder = Paths.get(ctxProperties.getProperty("rootFolder"));
    WatchService watcher = rootFolder.getFileSystem().newWatchService();
    rootFolder.register(watcher, StandardWatchEventKinds.ENTRY_CREATE);
    while (true) {
        WatchKey watchKey = watcher.take();
        if (watchKey != null) {
            for (WatchEvent event : watchKey.pollEvents()) {
                if (StandardWatchEventKinds.ENTRY_CREATE.equals(event.kind())) {
                    String fileName = rootFolder.toString() + "/" + event.context().toString();
                    String messageStr = convertFileToString(fileName);
                    if (messageStr != null) {
                        try {
                            sendMessage(jmsPublisher, messageStr, getJmsProperties());
                            moveMessageToProcessedDirectory(fileName, ctxProperties.getProperty("successFolder"), ".ok");
                            LOGGER.info("JMS message successfully sent");
    sleep(Long.parseLong(ctxProperties.getProperty("sleepBetweenMsgMse")));
                        } catch (Exception e) {
                            moveMessageToProcessedDirectory(fileName, ctxProperties.getProperty("errorFolder"), ".nok");
                        }
                    } else {
                        LOGGER.error("ERROR: error parsing file content to string with file: " + fileName);
                        moveMessageToProcessedDirectory(fileName, ctxProperties.getProperty("errorFolder"), ".nok");
                    }
                }
            }
            boolean valid = watchKey.reset();
            if (!valid) {
                LOGGER.error("ERROR: the watcher is no longer valid, the directory is inaccessible");
                break;
            }
        } else {
            LOGGER.error("ERROR: the watcher is null or not watchable");
            break;
        }
    }
} catch (InterruptedException interruptedException) {
    LOGGER.error("InterruptedException: thread got interrupted",interruptedException);
} catch (Exception exception) {
    LOGGER.error("Exception: " + exception.getMessage(), exception);
} 
```

# jquery - 使用 jQuery slideUp 的消失元素

> ID：12077394
> 
> 赞同：1
> 
> 时间：2012-08-22T16:21:57.277
> 
> 标签：jquery

我正在解决一个导致单个元素在第二次切换元素后消失的问题。

最初运行时，每个部分都有 3 个可见的按钮。要重现单击未展开的部分，请单击另一个，然后单击返回到您开始使用的原始部分。“在线表格”按钮消失。

罪魁祸首是这条线，但我还没有弄清楚是什么原因造成的。

```
$('.FormsHeader a').removeClass('current').nextAll().slideUp(430); 
```

这是我正在使用的小提琴当前版本的链接：http: [//jsfiddle.net/ddub/4SZGc/2/](http://jsfiddle.net/ddub/4SZGc/2/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T13:11:23.723

基于描述`SlideUp()`

> 如果在无序列表 () 上调用 .slideDown() 及其
> 
> *   元素具有位置（相对、绝对或固定），除非具有“布局”，否则效果可能无法在 IE6 到至少 IE9 中正常工作。要解决此问题，请添加位置：相对；和缩放：1；对 ul 的 CSS 声明。

即使 TAG 不是`ul`，也不是 for `slideUp()`，尝试设置 css 属性：`zoom:1`和`position: relative`

希望能帮助到你

# cuda - CUDA 内核的奇怪行为

> ID：12077400
> 
> 赞同：1
> 
> 时间：2012-08-22T16:22:16.153
> 
> 标签：cuda

我正在编写用于计算前缀总和的代码。这是我的内核

```
__global__ void prescan(int *indata,int *outdata,int n,long int *sums)  
{  
    extern __shared__ int temp[];  

    int tid=threadIdx.x;
    int offset=1,start_id,end_id;
    int *global_sum=&temp[n+2];

    if(tid==0)
    {
        temp[n]=blockDim.x*blockIdx.x;
        temp[n+1]=blockDim.x*(blockIdx.x+1)-1;
        start_id=temp[n];
        end_id=temp[n+1];
        //cuPrintf("Value of start %d and end %d\n",start_id,end_id);

    }
    __syncthreads();
    start_id=temp[n];
    end_id=temp[n+1];
    temp[tid]=indata[start_id+tid];
    temp[tid+1]=indata[start_id+tid+1];

    for(int d=n>>1;d>0;d>>=1)
    {
        __syncthreads();
        if(tid<d)
        {
            int ai=offset*(2*tid+1)-1;
            int bi=offset*(2*tid+2)-1;

            temp[bi]+=temp[ai];
        }
        offset*=2;
    }

    if(tid==0)
    {  
        sums[blockIdx.x]=temp[n-1];  
        temp[n-1]=0;
        cuPrintf("sums %d\n",sums[blockIdx.x]);
    }
    for(int d=1;d<n;d*=2)
    {
        offset>>=1;
        __syncthreads();
        if(tid<d)
        {
            int ai=offset*(2*tid+1)-1;
            int bi=offset*(2*tid+2)-1;
            int t=temp[ai];
            temp[ai]=temp[bi];
            temp[bi]+=t;
        }
    }

    __syncthreads();

    if(tid==0)
    {
        outdata[start_id]=0;
    }

    __threadfence_block();
    __syncthreads();
    outdata[start_id+tid]=temp[tid];
    outdata[start_id+tid+1]=temp[tid+1];
    __syncthreads();

    if(tid==0)  
    {  
        temp[0]=0;  
        outdata[start_id]=0;  

    }  

    __threadfence_block();
    __syncthreads();

    if(blockIdx.x==0 && threadIdx.x==0)
    {
        for(int i=1;i<gridDim.x;i++)
        {
            sums[i]=sums[i]+sums[i-1];
        }
    }

    __syncthreads();
    __threadfence();

    if(blockIdx.x==0 && threadIdx.x==0)
    {
        for(int i=0;i<gridDim.x;i++)
        {
            cuPrintf("****sums[%d]=%d ",i,sums[i]);
        }
    }

    __syncthreads();
    __threadfence();

    if(blockIdx.x!=gridDim.x-1)
    {
        int tid=(blockIdx.x+1)*blockDim.x+threadIdx.x;
        if(threadIdx.x==0)
            cuPrintf("Adding %d \n",sums[blockIdx.x]);
        outdata[tid]+=sums[blockIdx.x];

    }
    __syncthreads();

} 
```

在上面的内核中，sums 数组将累加每个块的前缀和，然后第一个线程将计算这个 sum 数组的前缀和。现在，如果我从设备端打印这个 sum 数组，它将在

> cuPrintf("添加 %d \n",sums[blockIdx.x]);

它打印出它正在使用旧值的这一行。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T03:35:47.690

您的代码不是多块前缀和的有效实现。您正在尝试使用块 0 的单个线程来计算部分块总和的前缀总和，然后保证这些部分块总和已写入内存。 `__syncthreads()`仅同步单个块中的线程，而不是跨块同步。所以在这段代码中：

```
__threadfence_block();
__syncthreads();

if(blockIdx.x==0 && threadIdx.x==0)
{
    for(int i=1;i<gridDim.x;i++)
    {
        sums[i]=sums[i]+sums[i-1];
    }
} 
```

在块 0 执行此代码之前，不能保证所有块都已计算出它们的 sum[blockIdx.x]。事实上，如果您启动的块数超过了设备上可以同时运行的块数，那么当您到达此代码时，甚至不能保证所有块都已启动。

为了使这段代码正确，您需要在这段代码之前结束内核，并启动一个新内核来计算块前缀和结果，然后另一个内核将其结果添加到每个线程块中。

# powerbuilder - PowerBuilder 12 中的“无法解析 WSDL 文件”错误

> ID：12077401
> 
> 赞同：0
> 
> 时间：2012-08-22T16:22:19.123
> 
> 标签：powerbuilder

在我的应用程序中，我正在尝试使用 Web 服务来处理信用卡。我正在使用 3DSI WSDL 来执行任务。问题是，每当我尝试通过 Web 服务向导、保持链接并点击服务按钮时，PB 都会抛出错误“无法解析 WSDL 文件”。我用 EasySoap 和 .net 都试过了。但结果是一样的。

下面提到了我的 WSDL 链接：

[https://services.PWSDemo.com/CreditCardTransactionService.svc](https://services.PWSDemo.com/CreditCardTransactionService.svc) https://services.PWSDemo.com/CreditCardTransactionService.svc?wsdl

信用卡交易处理 [https://services.PaymentWorkSuite.com/CreditCardTransactionService.svc](https://services.PaymentWorkSuite.com/CreditCardTransactionService.svc) https://services.PaymentWorkSuite.com/CreditCardTransactionService.svc?wsdl

谁能告诉我在我可以访问 WSDL 文件之前我需要做什么额外的事情，还是 PB 错误？

问候， 马纳布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-02T08:37:36.100

为时已晚，但可能仍然可以帮助周围的其他 PB 用户，比如我花了将近一天的时间试图找出问题所在。[@Slapout](https://stackoverflow.com/users/19072/slapout)给出的答案/回复 就像一个魅力。想知道为什么没有人将其标记为答案。

> 您可以尝试将 wsdl 的副本保存到您的计算机并尝试让 PB 从那里读取它。

# mapreduce - 数百万条记录的增量更新，索引与连接

> ID：12077405
> 
> 赞同：1
> 
> 时间：2012-08-22T16:22:33.657
> 
> 标签：mapreduce, cassandra, apache-pig, bigdata, full-table-scan

我目前正在制定一项增量更新用户数据的策略。我们假设我们的数据库中有 100_000_000 条记录，其中每个工作流更新大约 1_000_000 条记录。

这个想法是更新 MapReduce 作业中的记录。使用索引存储（例如 Cassandra）能够随机访问当前记录是否有用？还是最好从 HDFS 检索数据并将新信息加入现有记录。

记录大小为 O（200 字节）。用户数据具有固定长度，但应该是可扩展的。日志事件具有相似但不相等的结构。用户记录的数量可能会增加。近实时更新是可取的，即。3小时的时间间隔是不可接受的，几分钟就可以了。

您是否对这些策略和这种规模的数据有任何经验？pig JOIN 速度够快吗？总是读取所有记录是瓶颈吗？Cassandra 是否能够有效地保存这么多数据？哪种解决方案是可扩展的？系统的复杂性如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:03:36.343

您需要先定义您的需求。您的记录量不是问题，但您没有给出记录长度。它们是固定长度、固定字段编号、可能随时间改变格式吗？我们说的是 100 字节记录还是 100,000 字节记录？如果您希望按该字段/列查询，则需要在该字段/列上建立索引，除非您使用 map/reduce 完成所有工作。用户记录的数量会保持在 100mill（1 台服务器可能就足够了）还是会以每年 100% 的速度增长（可能随着时间的推移，多台服务器会添加新的服务器）。

您如何访问记录以进行更新取决于您是否需要实时更新它们，或者您是否可以运行批处理作业。更新是每分钟、每小时还是每月？

我强烈建议你做一些实验。你已经做过任何测试了吗？这将为您的问题提供一个背景，这将导致更客观的问题和答案。您不太可能根据您的问题“白板”解决方案。

# antlr - 来自行 0:0 的节点不匹配的树节点：UNIT 期望 UNIT

> ID：12077406
> 
> 赞同：0
> 
> 时间：2012-08-22T16:22:37.203
> 
> 标签：antlr, antlr3, tree-grammar

这个错误是什么意思？请注意，它需要一个 UNIT 节点并得到它所期望的......

```
Phase_2.g: node from line 0:0 mismatched tree node: UNIT expecting UNIT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:28:01.993

哎呀！我忘记了 Phase_2.g 上的“tokenVocab”部分。

```
options {
    (...)
    tokenVocab=Phase1;
} 
```

# groovy - groovy中闭包之间的右移运算符的名称是什么？

> ID：12077408
> 
> 赞同：4
> 
> 时间：2012-08-22T16:22:42.783
> 
> 标签：groovy

我发现了一个类似于下一个的 groovy 代码片段：

```
def f1 = { print "Hello, ${it}" }

def f2 = { "world" }​​​​​​​​

(f2 >> f1)() 
```

看起来这种构造只在闭包之间起作用。此代码也适用于左移运算符 ( `(f1 << f2)()`)。

我想知道这个运算符（或这种技术）是如何调用的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:29:41.403

它做闭包组合。

请参阅`rightShift`and`leftShift` [运算符重载 API 文档](http://docs.groovy-lang.org/latest/html/documentation/index.html#_operator_overloading)。

覆盖移位运算符是一种非常常见的技术，例如将项目添加到集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T11:01:33.967

[这是官方文档](http://docs.groovy-lang.org/latest/html/documentation/index.html#_operator_overloading "运算符重载")中所有运算符及其名称的不错列表，其中显示了 <<、>>、>>=、..、..<、<<=、>>= 等的名称。每当我在 Groovy 中偶然发现一些我不知道其名称的东西时，这就是我要去的地方（另请参阅同一侧关于[运算符优先级的段落）。](http://docs.groovy-lang.org/latest/html/documentation/index.html#_operator_precedence "运算符优先级")

# r - 在 r 中按多列对矩阵进行排序

> ID：12077413
> 
> 赞同：23
> 
> 时间：2012-08-22T16:23:00.160
> 
> 标签：r, sorting, matrix

我有一个矩阵

```
df<-matrix(data=c(3,7,5,0,1,0,0,0,0,8,0,9), ncol=2)
rownames(df)<-c("a","b","c","d","e","f")

[,1] [,2]
a    3    0
b    7    0
c    5    0
d    0    8
e    1    0
f    0    9 
```

我想先按第 1 列按降序排列矩阵，然后按第 2 列按降序排列，得到矩阵

```
df.ordered<-matrix(data=c(7,5,3,1,0,0,0,0,0,0,9,8),ncol=2)
rownames(df.ordered)<-c("b","c","a","e","f","d")

   [,1] [,2]
 b    7    0
 c    5    0
 a    3    0
 e    1    0
 f    0    9
 d    0    8 
```

关于如何实现这一目标的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-22T16:28:26.367

该`order`功能应该做到这一点。

```
df[order(df[,1],df[,2],decreasing=TRUE),] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-12T05:26:07.497

要完成主要答案，这是一种以编程方式完成的方法，而无需手动指定列：

```
set.seed(2013) # preparing my example
mat <- matrix(sample.int(10,size = 30, replace = T), ncol = 3)
mat
      [,1] [,2] [,3]
 [1,]    5    1    6
 [2,]   10    3    1
 [3,]    8    8    1
 [4,]    8    9    9
 [5,]    3    7    3
 [6,]    8    8    5
 [7,]   10   10    2
 [8,]    8   10    7
 [9,]   10    1    9
[10,]    9    4    5 
```

作为一个简单的例子，假设我想使用所有列的出现顺序来对矩阵的行进行排序：（可以很容易地为矩阵提供一个索引向量）

```
mat[do.call(order, as.data.frame(mat)),]   #could be ..as.data.frame(mat[,index_vec])..
      [,1] [,2] [,3]
 [1,]    3    7    3
 [2,]    5    1    6
 [3,]    8    8    1
 [4,]    8    8    5
 [5,]    8    9    9
 [6,]    8   10    7
 [7,]    9    4    5
 [8,]   10    1    9
 [9,]   10    3    1
[10,]   10   10    2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-22T16:33:18.763

`order`功能会帮助你，试试这个：

```
df[order(-df[,1],-df[,2]),] 
  [,1] [,2]
b    7    0
c    5    0
a    3    0
e    1    0
f    0    9
d    0    8 
```

前面的减号`df`表示订单正在减少。您将获得相同的结果设置`decreasing=TRUE`。

```
df[order(df[,1],df[,2],decreasing=TRUE),] 
```

# php - PHP查询 - 如何比较来自不同表的两列以匹配一列

> ID：12077414
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:23:01.067
> 
> 标签：php, mysql

抱歉，我不确定该给它取什么标题，也找不到任何其他关于它的帖子，尽管我确信它一定不是很困难——我只是不知道该怎么做。

在 php 查询中，我需要将数据库中的一列与另一列（在不同的表上）进行比较，以查看它们是否匹配（使用 == ）。但是，需要匹配的另一张表的第二列只能由与第一列来自的同一表上的第三列确定。

在我让它听起来更令人困惑之前，这里是我需要实现的基本概述：

```
if ($this->prefix == $user->special_id ??? $table2['CODE']) { 
```

我不知道该放什么？？？是..

special_id 是从 table2 生成的，在表 2 上还有一个名为 CODE 的列 - CODE 用于在表 1 上制作前缀

```
TABLE 1  
+--------+------------+  
| prefix | special_id |

TABLE 2  
+------------+------+  
| special_id | CODE | 
```

一些我需要比较`CODE`来自 table2 的方法，看看它是否等于`prefix`table1 上的 .. 两个表上的链接都是 special_id

（代码和前缀通常可以匹配，这就是我需要检查它的原因）

抱歉，如果我的解释不够清楚，任何建议都将不胜感激 - 我只是不知道如何编写 special_id 和 $table2['code'] 之间的代码以使它们可以一起运行。

感谢您的阅读。

编辑：

我有“A”版本的工作，虽然它通常会为我实现正确的结果，但在某些情况下它不会（由于其他因素），所以我仍然希望保持类似类型的行：

（这个确实带来了结果，但结果并不总是正确的（我不想将 special_id 与 special_id 进行比较，我需要将前缀与另一表中的 special_id 代码进行比较）所以如果有人仍然可以提供帮助，请提出建议)

if ($this->special_id == $user->special_id&&$this->prefix==$table2['CODE']) {

编辑：答案

如果没有看到所有代码，任何人都很难回答，但如果有人碰巧有类似的问题，这里是答案：

if ($this->prefix == $table2['CODE']) {

cj 的答案有一半是正确的，所以已经给了他正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:29:41.600

就 MySQL 语句（我建议您使用）而言，它看起来像：

```
SELECT t1.special_id as special_id 
    FROM table1 as t1
INNER JOIN table2 as t2
    ON t1.special_id = t2.special_id
WHERE t1.prefix = t2.CODE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:38:10.940

看起来您正在使用某种 ORM。我不建议在 PHP 中使用 ORM，但如果你正在这样做，我会尝试这样的事情：

```
if ($this->prefix == $user->special_id && $this->prefix == $table2['CODE']) 
{
} 
```

或者这个，为了清楚起见：

```
if (($this->prefix == $user->special_id) && ($this->prefix == $table2['CODE'])) 
{
} 
```

# python - 具有非比例 y 轴的箱线图

> ID：12077415
> 
> 赞同：0
> 
> 时间：2012-08-22T16:23:03.553
> 
> 标签：python, plot, matplotlib, boxplot, outliers

我有一些数据要进行箱线图。异常值（例如 20、30）离大多数值（例如 0.0002、0.0003）太远，因此我只能在使用 matplotlib 绘图时看到异常值。

无论如何放大中位数周围的值，然后让 y 轴的其余部分不按比例显示异常值吗？

编辑这是我在 python 中的代码。我想为我拥有的每个箱形图使用插入轴，如下所示。我怎样才能以简单的方式做到这一点？文档中的示例似乎有太多参数需要处理。

```
plt.figure()
        ax = plt.subplot(111)
        plt.boxplot(dataToPlot)
        axins = zoomed_inset_axes(ax, 6, loc=1) # zoom = 6
# what follows is taken from example linked in the answer below. 
# I didn't get if the first argument is indeed the data this zoomed image refers to or not. 
        axins.imshow(dataToPlot[1], interpolation="nearest", origin="lower")
# here I only need the y-axis to be in [0,0.1], x-axis is no of use with vertical boxplots
        x1, x2, y1, y2 = -1.5, -0.9, 0.0, 0.1
        axins.set_xlim(x1, x2)
        axins.set_ylim(y1, y2)
        plt.xticks(visible=True)
        plt.yticks(visible=True)
        plt.savefig( 'somewhere.jpeg', bbox_inches=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:48:15.313

您可以按照本页所述进行插入轴，大约向下 1/2。

[插入轴](http://matplotlib.sourceforge.net/mpl_toolkits/axes_grid/users/overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-15T22:51:48.833

非常老的问题，但我遇到了这个寻找类似的东西。我通过添加 sym='' 解决了这个问题（这个选项在 7 年前可能不存在！）它告诉 boxplot 不要显示传单（任何超出胡须的东西）。

因此，对于遇到此问题的其他任何人，您可以尝试将问题中的第 3 行更改为：

```
plt.boxplot(dataToPlot, sym='') 
```

# css - IE 中不显示 CSS 下拉菜单

> ID：12077416
> 
> 赞同：0
> 
> 时间：2012-08-22T16:23:03.970
> 
> 标签：css, internet-explorer, dropdownbox

我刚刚发现此站点上的 CSS 下拉菜单在 Internet Explorer 中不起作用。完全没有，绝对没有任何显示。菜单在 Firefox 和 Android 中工作得很好 这里是网站： [http](http://anlea.org) ://anlea.org 我已经尝试了许多修复，但没有任何东西可以显示下拉菜单。

任何（简单！）解决方案将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:27:54.833

IE 并不总是能很好地配合`li:hover`您的 CSS 菜单似乎依赖的东西。这个问题的公认答案可能会有所帮助：[IE8 does not hover when using an li with position:absolute](https://stackoverflow.com/questions/3296155/ie8-does-not-hover-when-using-an-li-with-positionabsolute)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:50:30.627

我正在使用 IE9 来查看站点并且菜单工作正常，只有在我切换回 IE9 标准模式之后。

您的站点默认为 IE9 中的 Quirks 模式。

您可以参考这里：[http](http://blog.timolthof.com/disable-quirks-mode/) ://blog.timolthof.com/disable-quirks-mode/尝试禁用 Quirks 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:38:51.887

您不会在悬停时显示嵌套的 ul，而只是在嵌套的 ul 中显示 li。尝试添加这个：

```
.main_menu > ul > li:hover > ul {
   display: block;
} 
```

我也建议您使用子选择器，如下所示：

```
.main_menu ul li  /* this would also apply to the submenu's, you overwrite them later in your code */ 
```

会成为

```
.main_menu > ul > li  /* this will only apply to the top level menu */ 
```

用于嵌套菜单。这不应该破坏代码，但会让您更好地控制并避免意外结果。

例如，如果您希望所有 li 具有相同的背景，无论是顶层还是嵌套的，您仍然可以使用

```
.main_menu li 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-19T11:45:30.027

下拉菜单的高度和宽度应以 px 为单位而不是 % 某些版本 IE 不支持以 % 为单位的宽度和高度

# actionscript-3 - FacebookMobile.init() 的偶尔（和经常性）问题

> ID：12077423
> 
> 赞同：2
> 
> 时间：2012-08-22T16:23:30.090
> 
> 标签：actionscript-3, facebook-graph-api, air, facebook-as3-api

似乎这个 API 被破坏和/或放弃了，因为在某些日子里，这个 API 调用总是在几个小时内失败。今天又发生了，但它比以前花费了更多的时间。

我不知道该怎么办。我有 2 个 Air 应用程序，但它们今天无法正常工作。对此有任何解决方案吗？

这是一段简单的代码：

```
FacebookMobile.init(APP_ID, onInit);

private function onInit(fbSession:Object, fail:Object):void 
{
    if (fbSession){
        trace(fbSession.accessToken);
    }
    else{
        traceV2(fail); // it's a "deep" trace
        // other API methods related to login
    }
} 
```

在 FacebookMobile.init() 中，我们必须期待一个会话对象（包含 FB 访问令牌）或“失败”对象。
失败对象将其返回给我：

```
[Object]
|   [error:Object]
    | code = 190 
    | message = Malformed access token AAAEWSUA8XjUBAJo4JuO5hUMwSnKC95LNRr1nHHIU8rwPGzxvHIuhUcDziZA9ZC3xDf4ZBwYcqjVU1ir5wf5jlEsJ5zwyMhnnWGyWxXeKQZDZD,AAAEWSUA8XjUBAJo4JuO5hUMwSnKC95LNRr1nHHIU8rwPGzxvHIuhUcDziZA9ZC3xDf4ZBwYcqjVU1ir5wf5jlEsJ5zwyMhnnWGyWxXeKQZDZD 
    | type = OAuthException 
```

提前致谢！

* * *

**问题已解决**。这个特定问题的解决方案位于 com.facebook.graph.FacebookMobile:560，在*handleLogin()*函数内。

```
 protected function handleLogin(result:Object, fail:Object):void {
        loginWindow.loginCallback = null;

        if (fail) {
            loginCallback(null, fail);
            return;
        }

        // ---------------||--------------------//
        // ---------------\/--------------------//
        // This line below solves this problem
        result.access_token = String(result.access_token).split(',')[0];
        // ---------------/\-------------------//
        // ---------------||-------------------//

        session = new FacebookSession();
        session.accessToken = result.access_token;
        session.expireDate = (result.expires_in == 0) ? null : FacebookDataUtils.stringToDate(result.expires_in) ;

        if (_manageSession) {
            var so:SharedObject = SharedObject.getLocal(SO_NAME);
            so.data.accessToken = session.accessToken;
            so.data.expireDate = session.expireDate;
            so.flush();
        }

        verifyAccessToken();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:40:57.063

Facebook 将访问令牌作为数组返回似乎是一个错误：http: [//developers.facebook.com/bugs/276418065796236 ?browse=search_5034a345a2cb15e92344737](http://developers.facebook.com/bugs/276418065796236?browse=search_5034a345a2cb15e92344737)

我会尝试通过删除其中的第二个访问令牌值来编辑返回的字符串。（逗号后的所有内容）并将其签名到您的本地会话访问令牌变量。它可能会解决问题

# c# - 如何在 Reactive Extensions 中的集合之间实现一个重要的映射？

> ID：12077425
> 
> 赞同：3
> 
> 时间：2012-08-22T16:23:41.657
> 
> 标签：c#, wpf, user-interface, f#, system.reactive

我想在属性编辑器中实现从选定对象到**属性条目的****映射。**例如，在 Visual Studio xaml 编辑器中。

 **目标地图是这样的（或者可能使用 ReactiveUI 中的 ReactiveCollection？）

```
 Selected objects             Filled categories to display in PropertyEditor  
 -------------------------    ---------------------------------------
 ObservableCollection<obj> -> ObservableCollection<Category> 
```

简单的英文地图：

1.  从对象中收集所有独特的属性类型
2.  按类别分组（例如文本、布局）
3.  根据需要添加/删除类别以反映所选对象
4.  根据需要从现有类别中添加/删除属性

挑战在于没有添加/删除分支的声明性/功能性代码。（我确实已经有一个基于命令/事件的代码，它非常丑陋且容易出错。）

我认为我们可以假设 Category 和 Property 集合是具有通常操作的集合：Union、Substract 和 IsMember。

灵感来自Paul Betts 的[ReactiveUI](http://www.reactiveui.net/)代码，它非常适合简单的一对一映射：

```
var Models = new ReactiveCollection<ModelClass>();
var ViewModels = Models.CreateDerivedCollection(x => new ViewModelForModelClass(x));
// Now, adding / removing Models means we
// automatically have a corresponding ViewModel
Models.Add(new Model(”Hello!”));
ViewModels.Count();
>>> 1 
```

使用 Seq 和 F#，直接的不可观察映射如下所示：

```
selectedObjects
|> Seq.collect GetProperties |> Seq.unique |> Seq.groupBy GetPropertyCategory
|> Seq.map (fun categoryName properies -> CreateCategory(properties)) 
```

上面的代码在理论上很好，但实际上它会在所选对象的每次更改时从头开始重新创建所有视图模型。我希望使用 Rex 实现的是将上述地图的版本**与增量更新相结合**，因此 WPF 将仅更新 GUI 的更改部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:58:59.873

这是一个非常有趣的问题:-)。遗憾的是，我认为没有任何 F# 库可以让您轻松解决这个问题。据我所知，[Bindable LINQ](http://bindablelinq.codeplex.com/)`Select`是实现 LINQ 查询模式（即`SelectMany`和`Where`方法）的一种尝试`ObservableCollection<T>`，这基本上是您所需要的。要从 F# 中使用它，您可以将 LINQ 操作包装在诸如`map`etc之类的函数中。

正如你所说，函数就像`Seq.map`工作一样`IEnumerable`，所以它们不是增量的。您在这里需要的是像`map`,`filter`和之类的函数`collect`，但是`ObservableCollection<'T>`以这样一种方式实现了它们以增量方式进行更改 - 当新元素添加到源集合中时，该`map`函数将处理它并将新元素添加到结果集合中.

我对此进行了一些实验，这是一个`map`增量的实现：

```
open System.Collections.Specialized
open System.Collections.ObjectModel

module ObservableCollection =
  /// Initialize observable collection
  let init n f = ObservableCollection<_>(List.init n f)

  /// Incremental map for observable collections
  let map f (oc:ObservableCollection<'T>) =
    // Create a resulting collection based on current elements
    let res = ObservableCollection<_>(Seq.map f oc)
    // Watch for changes in the source collection
    oc.CollectionChanged.Add(fun change ->
      printfn "%A" change.Action
      match change.Action with
      | NotifyCollectionChangedAction.Add ->
          // Apply 'f' to all new elements and add them to the result
          change.NewItems |> Seq.cast<'T> |> Seq.iteri (fun index item ->
            res.Insert(change.NewStartingIndex + index, f item))
      | NotifyCollectionChangedAction.Move ->
          // Move element in the resulting collection
          res.Move(change.OldStartingIndex, change.NewStartingIndex)
      | NotifyCollectionChangedAction.Remove ->
          // Remove element in the result
          res.RemoveAt(change.OldStartingIndex)
      | NotifyCollectionChangedAction.Replace -> 
          // Replace element with a new one (processed using 'f')
          change.NewItems |> Seq.cast<'T> |> Seq.iteri (fun index item ->
            res.[change.NewStartingIndex + index] <- f item)
      | NotifyCollectionChangedAction.Reset ->
          // Clear everything
          res.Clear()
      | _ -> failwith "Unexpected action!" )
    res 
```

实现`map`起来很容易，但恐怕功能`collect`会`groupBy`很棘手。无论如何，这里有一个示例，展示了如何使用它：

```
let src = ObservableCollection.init 5 (fun n -> n)
let res = ObservableCollection.map (fun x -> printfn "processing %d" x; x * 10) src

src.Move(0, 1)
src.Remove(0)
src.Clear()
src.Add(5)
src.Insert(0, 3)
src.[0] <- 1

// Compare the original and the result
printfn "%A" (Seq.zip src res |> List.ofSeq) 
```**

# android - 我可以将我的 Android 应用程序构建为调试但使用发布密钥库签名吗

> ID：12077426
> 
> 赞同：12
> 
> 时间：2012-08-22T16:23:42.257
> 
> 标签：android, ant, intellij-idea

我正在尝试在我的应用中测试应用内计费。我在 Play 商店中设置了计费和产品 ID，但要测试交易，我需要使用我的发布密钥库签署我的应用程序，否则它会失败。

我正在使用 IntelliJ Idea (Ver. 11 CE) 并且不太清楚如何配置项目以使用调试集构建并在部署到我的设备之前使用我的发布密钥库进行签名。

我看到我可以为配置设置一个 ant 目标，我假设这是要走的路，但由于我的 build.xml 导入了 Android SDK /tools/ant/build.xml，因此没有任何目标可供选择。

要调试，我只需要在清单中启用 set android:debuggable="true" 吗？有人对可以做我需要的事情的蚂蚁目标有建议吗？我可以添加到我的 build.xml 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:22:49.393

通过[Ixx](https://stackoverflow.com/a/12078181/85773)中正确方向的指针，我最终设置了 android:debuggable="true" 并使用命令行来构建和部署。然后附加到正在运行的进程进行调试。

我的应用程序设置为在命令行使用 ant build.xml 文件构建，该文件导入 androidSDK/tools/ant/build.xml 和支持的 build.properties 文件。我发现当我设置 android:debuggable="true" 然后执行 'ant release' 时，构建过程将创建一个可调试的 apk 并使用发布密钥对其进行签名。

我在我的 build.xml 文件中创建了一个目标，我可以为此案例设置一个名为 set-debuggable 的目标

```
<target name="set-debuggable" description="sets internal named property">
    <echo>Setting internal named property...</echo>
    <property name="set.debuggable" value="true" />
</target> 
```

然后在我的 -pre-build 目标中我添加了

```
 <if>
        <condition>
            <isset property="set.debuggable"/>
        </condition>
        <then>
            <replaceregexp
                    file="AndroidManifest.xml"
                    match="(android:debuggable=&#34;).*(&#34;)"
                    replace="\1true\2"/>

        </then>
        <else>
            <replaceregexp
                    file="AndroidManifest.xml"
                    match="(android:debuggable=&#34;).*(&#34;)"
                    replace="\1false\2"/>

        </else>
    </if> 
```

这将创建我的可调试 apk，当我使用“ant set-debuggable release”时，它使用我的发布密钥签名。然后我使用“adb install -r myApp-release.apk”重新安装新版本。然后我可以启动并附加到正在运行的应用程序以通过应用内购买进行调试。

似乎 IntelliJ Idea 和 Eclipse 都在系统某处使用自签名调试密钥来从 IDE 构建和部署调试 apk。

事后看来，我可能已经能够用我的发布密钥替换 IDE 创建的调试密钥，并尝试让构建使用该密钥签名（并找到使用密钥的密码）但上面的构建过程花了我很少的时间是时候设置和开始使用了。如果有人朝这个方向发展并让它发挥作用，请在我的回答中添加评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:55:04.820

从 IntelliJ IDEA 12 开始（不知道以前的版本），您可以在 Android 方面为顶级模块设置“自定义调试密钥库”。通过这种方式，您可以控制 APK 的签名方式并实际使用您的发布密钥从 IDE 进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T14:17:24.613

Given that Lint now advises against hardcoding of "android:debuggable" flag in AndroidManifest.xml I've come with a better solution (at least for my case). Just define a new ant target in your custom_rules.xml that does everything exactly the same as the android debug target does, but signs the apk with release key as well.

```
<target name="build-debug" depends="-set-debug-files, -do-debug, -release-sign, -post-build" /> 
```

The only subtask that needs to be added is "-release-sign" before "-post-build" and then run your "bulid-debug" instead of android "debug" target.

Or, you can just "-release-sign" to debug dependency like this:

```
<target name="build-debug" depends="debug, -release-sign" /> 
```

but this doesn't work for me, because I do some extra stuff on "-post-build" and need to sign the package before "-post-build".

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T01:20:57.087

IntelliJ 默认使用 .android/debug.keystore 文件对应用程序的调试版本进行签名。您可以使用您的发布密钥库更改此文件或将您的发布证书导入到 debug.keystore 文件。[我已在http://www.denizoguz.com/2013/01/12/failure-install_parse_failed_inconsistent_certificates/](http://www.denizoguz.com/2013/01/12/failure-install_parse_failed_inconsistent_certificates/)上为此准备了分步说明

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T17:13:15.597

我在 build.xml 中有这个来设置可调试属性：

```
<condition property="build.env" value="${build.env}" else="local">
    <isset property="build.env" />
</condition>

<!-- set debuggable=false for release and true for debug and others -->
<condition property="isDebuggable" value="false" else="true">
        <equals arg1="${build.env}" arg2="release" />
    </condition>
    <replaceregexp 
        file="AndroidManifest.xml"
        match="(android:debuggable=&#34;).*(&#34;)" 
        replace="\1${isDebuggable}\2"
        >
    </replaceregexp> 
```

像这样将 build.env 传递给 ant 程序的地方（在“发布”的情况下）：

```
ant <targets> -Dbuild.env=release 
```

为了签名，您将其添加到属性文件中：

```
key.store=C:/path/to/keystore/mykeystore.keystore 
```

调试应用程序有一个调试密钥库（尽管我目前不记得确切为什么需要这个密钥库）->[这里](https://stackoverflow.com/questions/9019833/specify-location-of-debug-keystore-for-android-commandline-ant-build)有更多信息。可能您只需要使用发布密钥库。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T03:28:25.327

尝试在您的 android 清单中将 debuggable 标志设置为 true。

```
 <application
        android:debuggable="true" 
```

[可调试标志](http://developer.android.com/guide/topics/manifest/application-element.html#debug)

# c# - ASP.NET MVC - 如何捕获多个复杂的 ListBox 值并将其保存到数据库

> ID：12077427
> 
> 赞同：0
> 
> 时间：2012-08-22T16:23:42.127
> 
> 标签：c#, javascript, asp.net, asp.net-mvc-3

因此，我创建了一个包含两个 ListBox、**AvailableServices**和**SelectedServices**的视图：

```
 @Html.ListBoxFor(x => x.AvailableServices, Enumerable.Empty<SelectListItem>(), new { id = "serviceID" })
                @Html.ValidationMessageFor(model => model.AvailableServices)

                @Html.ListBoxFor(x => x.SelectedServices, Enumerable.Empty<SelectListItem>(), new { id = "selectedserviceID" })
                @Html.ValidationMessageFor(model => model.SelectedServices) 
```

作为参考，这是我的 ViewModel：

```
namespace Services.ViewModels
{
public class SPServiceTypeViewModel
{
    public int Id { get; set; }
    public int SPCompanyAccountID { get; set; }

    [Display(Name = "Service Category")]
    public IEnumerable<SelectListItem> ServiceCategory { get; set; }

    [Display(Name = "Available Services")]
    public IEnumerable<SelectListItem> AvailableServices { get; set; }

    [Display(Name = "Your Services")]
    public IEnumerable<SelectListItem> SelectedServices { get; set; }
}
} 
```

我的控制器毫无问题地填充了**可用服务列表框。**我编写了一些 JavaScript，让用户将项目（包括**id**和**label**）从**AvailableServices**列表框移动到**SelectedServices**列表框。那里也没有问题。

现在这是我的问题......我已经阅读了各种帖子，但我仍然不明白如何在表单提交时最好地将数据从我的**SelectedServices** ListBox 传递回我的控制器，因为我需要同时捕获**id**和**标签**每个选择。

我的目标是在我的**SPServiceType**表中为**SelectedServices**列表框中的每个项目创建一个新的数据库行，而我一无所知。现在我用于保存数据的控制器如下所示：

```
[HttpPost]
    public ActionResult Create(SPServiceTypeViewModel viewModel)
    {
    foreach (var item in viewModel.SelectedServices)
           {
               var spServiceType = new SPServiceType
               {
                   SPCompanyAccountId = viewModel.SPCompanyAccountID,
                   ServiceCategory = ???,
               };
               db.SPServiceType.Add(spServiceType);
               db.SaveChanges();

        return RedirectToAction("Create", "SPServiceLocation");
    } 
```

我不需要在我的 ViewModel 中使用 IENumerable 吗？我是否需要在提交之前使用 JavaScript 将我的**SelectedServices**值传递给隐藏的 List<> 以便我的模型绑定更容易完成？

重申一下，我想捕获选择的**id**和**label**值。

任何有关如何在视图中处理此问题的代码示例，或控制器中的发布操作，或一般方法建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:38:37.317

我在[这里有一个类似的问题](https://stackoverflow.com/questions/5928135/mvc3-viewmodels-and-controller-functionalty-suggested-design-patterns)。

当时的建议是接受 POST 中的选定值并使用存储库模式（必要时缓存）根据需要将值转换为标签。

# android - android/phonegap Uncaught TypeError：无法读取文件中未定义的属性“下载器”

> ID：12077431
> 
> 赞同：1
> 
> 时间：2012-08-22T16:24:06.597
> 
> 标签：android, cordova, phonegap-plugins

```
$(document).ready(function() {
window.plugins.downloader.downloadFile("http://some_path/images/image1.jpg", {overwrite: true}, 
      function(res) {
        alert(JSON.stringify(result));
    }, function(error) {
        alert(error);
    }
); }); 
```

**错误：-未捕获的类型错误：无法读取文件中未定义的属性“下载器”：///android_asset/www/index.html:11**

我已经包含了正确的 js 文件，并且以正确的顺序仍然出现此错误...

我什至尝试用cordova替换所有对PhoneGap的调用......仍然给出相同的错误，例如

```
cordova.addConstructor(function() {
cordova.addPlugin("Downloader", new Downloader());
//window.plugins.Downloader = new Downloader();
//PluginManager.addService("Downloader", "com.phonegap.plugins.downloader.Downloader"); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T22:36:54.667

如果您仔细观察 LogCat 日志，您会注意到“downloader.js”文件中有错误。它是为旧版本的 phonegap 制作的。我一直在搜索如何解决与您相同的问题，但我只发现您的问题已发布在这里。所以，底线是我们必须修复脚本文件中的语法。那些白痴改变了整个语法而不关心向后兼容性:(

为了使代码正常工作，请将 downloader.js 代码替换为：

```
/* downloader.js */
function Downloader() {}
    Downloader.prototype.downloadFile = function(fileUrl, params, win, fail) {

    //Make params hash optional.
    if (!fail) win = params;
       cordova.exec(win, fail, "Downloader", "downloadFile", [fileUrl, params]);
};

if(!window.plugins) {
    window.plugins = {};
}
if (!window.plugins.Downloader) {
    window.plugins.Downloader = new Downloader();
} 
```

接下来，调用应该是：

```
window.plugins.Downloader.downloadFile(url, {dirName: contentDirectory, fileName: someFileName, overwrite: true},
             function(data){
                 if(data=="exist"){
                  /// alert("File already exist");
                     console.log("File allready exist!");
                 }
                 else{
                     console.log("Status: " + data.status);
                 }
             },
             function(data){
                 console.log("error: "+data); 
             }
     ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T08:43:05.273

I know this is an old question, but it is actual since the phonegap implementation of download doesn't work well...

@Marjan: I tried to work with the phonegap implementation on PhoneGap 2.8.1\. The best result I got was a working download, but all downloaded files had only 6 kilobyte and there was no error at all.

So... If anybody has an idea on the downloader plugin to get it to work (as described above), please let us know.

# javascript - jQuery mobile - 动态更改 ui 页面背景颜色

> ID：12077432
> 
> 赞同：2
> 
> 时间：2012-08-22T16:24:11.753
> 
> 标签：javascript, jquery, css, jquery-mobile

我有一个多页模板设置。我的主屏幕背景颜色与其他页面不同，但我发现我添加到页面中的某些内容不够长，无法到达页脚，并且我看到为背景和页脚之间的主屏幕。

有没有办法在切换到页面之前更改页面的 ui-page 背景颜色，以便正确填补空白？

我考虑过委托页面来做这件事：

```
$(document).delegate("#pageDetail", "pagecreate", function () {
        $('.ui-page').css('background-color', '#ECF2FE');
    }); 
```

但是当您按下后退按钮时，它会中断，因为它会留下更改。

有没有我可以用来进行此更改的事件，以便我可以为每个页面设置正确的背景颜色 - 或者我是否缺少更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T18:25:56.373

当`pagecreate`事件触发时，伪页面还没有被赋予`.ui-page`该类，因此按该类进行选择对您没有帮助。我建议使用`this`来选择当前的伪页面：

```
$(document).delegate("#pageDetail", "pagecreate", function () {
    $(this).css('background', '#ECF2FE');//`this` refers to `#pageDetail`
}); 
```

另请注意，我更新了`background`属性而不是`background-color`. 这是因为 jQuery Mobile 使用在`background-image`属性下指定的渐变背景，您不能`background-image`用`background-color`.

这是一个演示： http: [//jsfiddle.net/WSzq3/](http://jsfiddle.net/WSzq3/)（当您在页面之间单击时，每个`pagebeforeshow`事件的背景颜色都会发生变化）

# c# - 重复调用 DataContext.GetChangeSet() 是否有效？

> ID：12077435
> 
> 赞同：1
> 
> 时间：2012-08-22T16:24:16.217
> 
> 标签：c#, .net, linq, linq-to-sql, datacontext

我似乎找不到有关 LINQ-to-SQL 的 DataContext 类的 GetChangeSet() 函数性能的文档。我在我们自己的组织中看到了很多代码，并在网络上发布了对 GetChangeSet() 的重复调用，好像它对性能没有影响（而不是缓存第一次调用的值）。我知道它*可以*做大量的工作，但是在随后的调用中会跳过吗？例如，如果我看到循环中引用了 GetChangeSet().Inserts，我应该在代码审查期间有多担心？在缓存不是一件简单的事情的情况下，应该花多少精力来缓存 GetChangeSet 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:50:53.753

我根本不希望重复调用是高效的。

根据[方法的文档](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.getchangeset.aspx)，`GetChangeSet()`在每次调用时重新计算列表。

# grails - grails xml解组

> ID：12077437
> 
> 赞同：1
> 
> 时间：2012-08-22T16:24:21.417
> 
> 标签：grails, xml-parsing, grails-2.0

从 Grails 1.1.x 开始，它们支持 REST 请求的 XML 和 JSON 解组。我似乎无法在 2.1.0 版中使用它。以下是我用来测试功能的示例项目中的相关文件：

1.  UrlMappings.groovy

    ```
    static mappings = {
        "/$action/$id?"(controller:'verification',parseRequest:true)

        "/"(view:"/index")
        "500"(view:'/error')
    } 
    ```

2.  测试员.groovy

    ```
    class Tester {
        String name
        String vendor

        String toString() {
            return "$name $vendor"
        }
    } 
    ```

3.  验证控制器.groovy

    ```
    class VerificationController {

        def save() {
            Tester tester = new Tester(params.tester)
            log.error "Tester = ${tester}"
            log.error "Request XML = ${request.XML}"
        }
    } 
    ```

4.  使用 REST 调用发送 XML

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <tester>
        <name>Windows</name>
        <vendor>Microsoft</vendor>
    </tester> 
    ```

当我传入 XML 时，控制器日志语句会输出以下内容：

```
Tester = null null
Request XML = WindowsMicrosoft 
```

我的困惑是为什么它将它识别为 XML（通过将其放入请求的 XML 字段中）但不会解析它并将其放入[此处定义的参数中](http://grails.org/doc/latest/guide/single.html#REST)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:20:31.187

我有同样的问题，几乎完全相同的设置。我相信您的问题可能出在 UrlMapping 配置中。最初我有以下内容。

```
"/rest/airport/$iata?"(controller: "airport", action: "restHandler", parseRequest: "true") 
```

当我 PUT/POST XML 到那个 URI 时，它会在 request.XML 中正确显示，但它永远不会显示在 params 对象中。然后我意识到我在引号中有 parseRequest 布尔值。删除它解决了这个问题。

```
"/rest/airport/$iata?"(controller: "airport", action: "restHandler", parseRequest: true) 
```

现在，如果您的代码确实与上面的代码相同，那么您的问题可能并不完全相同。但是，可能有帮助的是对您的 UrlMappings 进行某种更改，看看您是否可以让它以不同的方式工作。

起初我以为它可能是你的单引号，但无论我尝试过，这似乎都很好。因此，我建议将您的 URI 映射更改为其他内容，并对格式非常挑剔。最后，解决我的问题的只是 UrlMappings.groovy 文件中的一个小格式问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T07:39:06.937

在尝试了几个小时解决同样的问题后，我找到了适合我的解决方案。

我的问题是我的 REST 调用中没有定义内容类型。

因此，如果您添加`content-type: application/xml`到休息电话中，它应该可以工作。

# objective-c - iOS：在 WebView 中显示 PDF

> ID：12077439
> 
> 赞同：0
> 
> 时间：2012-08-22T16:24:32.850
> 
> 标签：objective-c, ios, pdf, uiwebview

我试图在 webview 中显示 pdf，但 webview 总是白色/空白。如果我从本地文件记录路径，它可以被记录，所以文件在那里..

这是我的代码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request]; 
```

（webView 是一个 iboutlet）

迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T21:53:15.200

请确保启用用户交互和多点触控。 ![检查以下属性](../Images/26f22f80bd11c857cbe0578fafbb25af.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T07:55:31.707

您的 targetURL 可能为零，请调试它。

如果 targetUrl 为零，这可能是“路径”有空间。

所以你应该对路径进行编码：

```
//Encode Url
+(NSString *) urlEncodeString:(NSString *) str
{
    return [str stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T08:22:59.660

控制整个字符而不仅仅是控制空格更合适。试试这个来编码文件的路径。

```
-(NSString *)urlenc:(NSString *)val{
    CFStringRef safeString =
    CFURLCreateStringByAddingPercentEscapes(NULL,
                                            (CFStringRef)val,
                                            NULL,
                                            CFSTR("/%&=?$#+-~@<>|*,.()[]{}^!şığüöçĞÜŞİÖÇ"),
                                            kCFStringEncodingUTF8);
    return [NSString stringWithFormat:@"%@", safeString];
} 
```

# android - android Spinner：在微调器中垂直居中文本

> ID：12077440
> 
> 赞同：6
> 
> 时间：2012-08-22T16:24:36.543
> 
> 标签：android, android-layout, android-spinner

![哈哈](../Images/764b3c6aa848a01064ceeea6396deab0.png)

我需要这些微调器将文本垂直居中。我在 Spinner xml 定义中尝试过这样的东西：

```
<Spinner
    android:id="@+id/dir_spn"
    android:layout_gravity="center_vertical"
    android:gravity="center_vertical"
    android:layout_weight="1"/> 
```

我尝试构建自定义下拉布局：

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="@style/SpinnerDropDownItem"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:ellipsize="marquee" /> 
```

样式.xml：

```
<resources>
<style name="SpinnerDropDownItem">
    <item name="android:gravity">center_vertical</item>
    <item name="android:layout_gravity">center_vertical</item>
    <item name="android:textColor">?android:attr/textColorPrimary</item>
    <item name="android:textColorHighlight">#FFFF9200</item>
    <item name="android:textColorHint">?android:attr/textColorHint</item>
    <item name="android:textColorLink">#5C5CFF</item>
    <item name="android:textSize">16sp</item>
    <item name="android:textStyle">normal</item>
</style>
</resources> 
```

适配器下拉集：

```
adapter.setDropDownViewResource(R.layout.spinner_dropdown_item); 
```

如何让 Spinner 文本垂直居中？

编辑：值得一提的是，活动在清单中是主题，因此：

```
<resources>
<style name="SpeakNSpell" parent="@android:style/Theme">
    <item name="android:minHeight">68sp</item>
</style>
</resources> 
```

这使得所有视图至少高 68sp。这是否也会影响 Spinner 内的文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T16:54:50.490

**改写**

您似乎希望在项目资源中垂直居中文本，如下所示，但您的代码示例针对下拉菜单...

![比较布局](../Images/61d8d1d6acc65bfdf5530fbd3a6ff2c1.png)

顶部 Spinner 是默认的 android simple_spinner_item 布局，底部相同但已`android:gravity="center_vertical"`添加。

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="?android:attr/spinnerItemStyle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:gravity="center_vertical"
    android:singleLine="true" /> 
```

您可以看到我将您的主题与大型`minHeight`. 这是在适配器中使用此布局的基本示例：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.spinner_item, list);
// set whatever dropdown resource you want
spinner.setAdapter(adapter); 
```

我假设你想要“现金”、“选择产品”等从你的图片居中，如果你在哪里尝试做其他事情，请告诉我！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T18:22:28.340

如果有人在设置后仍然有问题`gravity`，请尝试设置填充`Spinner`：

```
 android:paddingTop="0dp"
                android:paddingBottom="0dp" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:54:10.657

在你`SpinnerAdapter`尝试这样的事情：

```
public View getDropDownView(int position, View convertView, ViewGroup parent) {
       View v = super.getDropDownView(position, convertView,parent);
       ((TextView) v).setGravity(Gravity.CENTER);
       return v;
} 
```

# amazon-s3 - S3 文件上传策略

> ID：12077442
> 
> 赞同：1
> 
> 时间：2012-08-22T16:24:50.757
> 
> 标签：amazon-s3, amazon-ec2

我有一个网站，允许用户定义他们的子域 xxx.mysite.com

我允许用户上传他们自己的头像和徽标——理想情况下，它应该直接上传到 s3。

1

我可以在这里生成策略[http://s3.amazonaws.com/doc/s3-example-code/post/post_sample.html](http://s3.amazonaws.com/doc/s3-example-code/post/post_sample.html)。

但是，我不知道该给什么 ["starts-with", "$success_action_redirect", "http://xxx.mysite.com/"]

我可以忽略它，但我不太愿意让任何人轻松上传。如何添加更多限制？

我目前将内容类型限制为图像

2 https 和 http

我知道我可以在整个站点上强制使用 ssl 并使用[https://xxx.mysite.com](https://xxx.mysite.com)进行成功操作重定向。

有我可以使用的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:15:48.520

我在回答我自己的问题。

无法进行通配符搜索。我们只能做开始。

我现在只是将其限制为 https。另一种方法是使用通用代码跨子域上传并使用 parent.xx 浏览器功能。由于它在同一个域中，浏览器不会抱怨，s3 策略会通过。

# mysql - 插入不重复的数据

> ID：12077443
> 
> 赞同：0
> 
> 时间：2012-08-22T16:24:51.723
> 
> 标签：mysql, unique-constraint

我正在尝试插入一些没有重复的数据，可能来自 2+ 个并发进程。

不幸的是，由于数据库设计的原因，在这种情况下我不能使用唯一约束（已删除的行带有标记，`deleted=1`并且可以作为重复项存在）。

似乎一个简单的事务是行不通的——我能想到的最好的方法是`SELECT ... FOR UPDATE`，但这还不够——如果还没有行，则不会锁定任何行，因此它不会阻止插入。另一方面，我想避免锁定整个表格进行写作。

有一些很好的方法可以解决这个问题吗？表引擎是 InnoDB。（第二个问题是 - 如何使其在 sqlalchemy 中工作，但如果它一般工作，我可以翻译解决方案）

编辑：您可以假设架构：

```
deleted tinyint(1) default null,
id int(11) not null auto_increment,
address varchar(255) default null,
... 
```

where address 对于 where 的条目应该是唯一的`deleted == 0`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:24:31.420

你可以试试这个插入查询：

```
INSERT IGNORE INTO tbl(id,deleted,address)
SELECT CASE WHEN EXISTS (SELECT id FROM tbl 
                         WHERE deleted=0 AND address='new_address')
       THEN id ELSE NULL END,
       0,
       'new_address'
FROM tbl
LIMIT 1 
```

如果具有给定地址且已删除=0 的行已经存在于您的表中，它将尝试插入具有相同 id 的行，这显然不会发生，因为 id 是主键。但是如果没有这样的行，它会尝试插入一个 NULL 作为 id 的行，这将成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:36:14.910

沿着这些思路：

```
insert into target
  select * from source1
  union
  (select * from source2 where not (source2.id in (select id from source1))) 
```

为更多表添加更多联合子句。

# c# - 正确实现 IDisposable 以清理带有长期可观察对象的 Rx 观察者？

> ID：12077450
> 
> 赞同：1
> 
> 时间：2012-08-22T16:25:21.037
> 
> 标签：c#, .net, mvvm, system.reactive, idisposable

我正在使用`IDisposable`with`CompositeDisposable`来清理我的 ViewModels 中的 Reactive Extension (Rx) Observers。

`IDisposable`在这种情况下，我的 ViewModel 中的正确实现是什么？通常，我不会实现终结器，因为没有非托管对象，但似乎终结器可能有助于捕获任何未接来电`Dispose`，从而确保始终释放我的观察者。（我的 Observable 在应用程序的整个生命周期内都会被实例化，而 ViewModel 则不会。）

谢谢！

**更新：**

一些澄清：在这种情况下，调用 Dispose 的需求略有不同。Reactive Extensions 中的 Observer 使用 Dispose 取消订阅 Observable。就我而言，我有一个长寿命的观察者和许多短寿命的观察者，因此观察者不会是 GC，除非由于 Observable->Observer 引用而显式处置。我对 Reactive Extensions 完全陌生，所以我的理解可能有误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T01:55:54.673

您不应该使用终结器来调用`Dispose()`以取消订阅 Rx 订阅。终结器仅在对象即将被垃圾收集时被调用，垃圾收集仅在对象不再能够被引用时发生。如果有当前订阅，那么它有引用并且不会被垃圾收集。

您必须明确地调用您`.Dispose()`自己，以便清理您的订阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:41:00.840

您不应该使用终结器在其他托管对象上调用 Dispose() （或实际上任何方法）。这些对象可能已经完成（因为无法保证完成的顺序：http: [//msdn.microsoft.com/en-us/library/system.object.finalize (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.object.finalize(v=vs.100).aspx)

由于这些对象本身是 IDisposable 的，因此它们的终结器（如果有的话）将负责在未调用 Dispose() 时需要完成的任何工作（假设它们已正确实现）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:14:07.850

您不需要 Dispose Rx IDisposables，除非您明确想要提前取消*订阅*。只是泄漏它们。它们不代表非托管内存，因此 CLR 将像任何其他对象一样对它们进行 GC。并且永远不要在这些对象上实现终结器。

您也不必担心引用循环，CLR 的 GC 足够聪明，可以检测到它们（就像您有 GC 一样`someA.B = someB; and someB.A = someA`）

# .net - 使用扩展名已更改的 sqlite db 文件作为注册的应用程序文件是一个坏主意吗？

> ID：12077451
> 
> 赞同：0
> 
> 时间：2012-08-22T16:25:22.253
> 
> 标签：.net, windows, sqlite, file-extension

我正在考虑将带有自定义扩展名（例如 *.myext）的 sqlite db 文件注册为我的 .NET 应用程序的注册文件，这样当双击它时它将启动我的应用程序，就像双击 *.doc 文件启动 M $ 字。

我想不出为什么这是一个坏主意的原因，你可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:58:20.710

例如，由于`.docx`or`.vsix`只是重命名的`.zip`文件，因此在您自己的扩展名下拥有任何现有文件格式应该没有任何问题。

# shopify - 通过 Shopify API 接受付款

> ID：12077452
> 
> 赞同：3
> 
> 时间：2012-08-22T16:25:28.837
> 
> 标签：shopify

在 Shopify 管理区域中，每个订单上都有一个“接受付款”按钮。是否有可以通过 API 执行的等效操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:00:24.887

是的。您可以创建交易并获取先前授权的金额。

```
 ShopifyAPI::Transaction.create({:order_id => order.id, :kind => 'capture'}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-26T03:16:22.023

是的，请确保原始订单是通过 API 创建的，并且状态为“待处理”，交易类型为“授权”，交易状态为“成功”。然后，当您捕获付款时，它只会改变财务状况。您不能只更改订单上的财务状态值而不捕获交易。

所以这是使用 API 创建订单的原始请求：

**发布 /admin/orders.json**

```
{
   "financial_status": "pending",
   "fulfillment_status": "fulfilled",
   "transactions": [{
      "amount": "21",
      "kind": "authorization",
      "gateway": "Gateway",
      "status": "success",
      "source_name": "My API"
   }]
} 
```

然后要捕获交易，请执行以下操作：

**发布 /admin/orders/{order_id}/transactions.json**

```
{
  "transaction": {
    "kind": "capture"
  }
} 
```

确保您为 API 上的订单启用了写入权限： [https ://redeeem.myshopify.com/admin/apps/private](https://redeeem.myshopify.com/admin/apps/private)

# jquery - KineticJS：通过 .on() 监听

> ID：12077454
> 
> 赞同：5
> 
> 时间：2012-08-22T16:25:31.817
> 
> 标签：jquery, bind, kineticjs

使用 KineticJS，是否可以只绑定一次函数？就像 jQuery 等价物一样......

例如。在 jQuery 中

```
// bad
$('.wrap a').on('click', myHandler);
// good
$('.wrap').on('click', 'a', myHandler); 
```

我也想用 KineticJS 来做这件事，因为会有很多对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T23:08:59.887

这是来自 KineticJS 的 Eric。目前，您可以使用 container.get() 来获取类似于 jQuery 的节点数组，如下所示：

```
layer.get('Rect'); // returns all rectangles inside of layer
layer.get('.foo'); // returns all nodes with name foo inside layer
stage.get('#bar'); // returns node with id 'bar' 
```

但是您还不能通过选择器将事件绑定到所有节点，如下所示：

layer.get('Rect').on('click', ...);

我会将它添加到我的待办事项列表中，因此它可能会在几周内发布:)

干杯!

埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:11:18.927

我不知道是否有任何方法可以将侦听器添加到某种类型的所有对象（如果那是您想要做的）。

尽管您可以创建一个组并将听众添加到整个组中。

**小提琴：http:** [//jsfiddle.net/9vsps/](http://jsfiddle.net/9vsps/)

请注意，如果您拖动组中的某些内容，则组中的所有内容都将被拖动。

# .net - GData OAuthUtil.GetAccessToken 不返回 refresh_token 值

> ID：12077455
> 
> 赞同：3
> 
> 时间：2012-08-22T16:25:31.520
> 
> 标签：.net, oauth, gdata

当我使用`Google.GData.Client`.NET 库并尝试启动`OAuth`会话时，它可以正常工作，直到会话过期。当我执行初始`GetAccessToken`请求时，该`RefreshToken`值似乎是`null`.

**第 1 步**（默认.aspx）：

```
OAuth2Parameters parameters = new OAuth2Parameters();
//<<build parameters with keys and CLIENT_IDs and such>>
string authorizationUrl = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters);
Response.Redirect(authorizationUrl); 
```

**第2步（ oauth.aspx**）：

```
Session["ACCESS_CODE"] = Request.QueryString["code"];
Response.Redirect("Results.aspx"); 
```

**第三步**（结果.aspx）

```
if (Session["ACCESS_CODE"] == null)
  Response.Redirect("Default.aspx");

parameters.AccessCode = Session["ACCESS_CODE"].To_String();
OAuthUtil.GetAccessToken(parameters);
Response.Write("OAuth Access Token: " + parameters.AccessToken);
Session["ACCESS_TOKEN"] = parameters.AccessToken;
Session["REFRESH_TOKEN"] = parameters.RefreshToken; 
```

当我此时检查代码时，我的`RefreshToken == null`. 因此我不能打电话

```
OAuthUtil.RefreshAccessToken(parameters); 
```

没有价值错误是*不可能`null`*的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:36:39.203

使用 OAuth 2.0 离线流程，您只会在用户第一次交换授权码并授予对您的应用程序的访问权限时收到刷新令牌。您应该将该刷新令牌存储在数据库中以供以后使用。

如果在任何时候您需要用户的刷新令牌并且您的数据库中没有它，或者您拥有的令牌已损坏或被撤销，您必须将用户发送回授权页面，以便它可以再次授予访问权限并为您提供新的刷新令牌。

[Google Drive SDK 文档](https://developers.google.com/drive/about-auth)彻底解释了这个过程。此外，还有[一个完整的 ASP.NET MVC 应用程序](https://developers.google.com/drive/examples/dotnet)，您可以将其用作参考。

# java - Struts2 链接为按钮

> ID：12077456
> 
> 赞同：0
> 
> 时间：2012-08-22T16:25:32.487
> 
> 标签：java, struts2

我想知道 struts2 链接 ( `<s:a>`) 是否可以具有与提交按钮 ( `<s:submit>`) 相同的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:27:39.903

当然，如果您使用 JavaScript 提交相关表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-31T09:55:46.633

```
 <script type="text/javascript">
        function logout() {
            document.getElementById("form1").action = "checkliveuser?action=logout";
            document.getElementById("form1").submit();
        }
    </script>
.
.
.
other HTML code
.
.
.
<s:form action="chkUser" method="post" id="form1"  >
<s:a onclick="logout();" href="#" >Logout</s:a>

</s:form> 
```

# grails - 只有在覆盖检查通过时才能成功构建 grails 项目

> ID：12077457
> 
> 赞同：5
> 
> 时间：2012-08-22T16:25:33.610
> 
> 标签：grails, code-coverage, cobertura

我正在开发一个 grails 应用程序。我们使用 cobertura 来生成代码覆盖率报告。现在我想修改 grails 项目，如果代码覆盖率低于 90%，构建应该会失败。我怎样才能在 grails 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T18:06:21.983

我不认为代码覆盖插件直接支持这一点，但通过连接到强大的 grails 构建事件基础设施很容易做到。通过将其放在您的 中`scripts/_Events.groovy`，如果覆盖率低于某个阈值，则构建将失败：

```
eventStatusFinal = { message ->
  if (message ==~ /.*Cobertura Code Coverage Complete.*/) {
    def report = new XmlSlurper().parse(new File("target/test-reports/cobertura/coverage.xml"))
    if (Float.parseFloat(report.'@line-rate'.text()) < 0.90) {
      throw new RuntimeException("coverage too low!")
    }
  }
} 
```

这需要您在以下位置打开 XML 报告生成`grails-app/conf/BuildConfig.groovy`：

```
coverage {
    xml = true
} 
```

根据需要调整属性 ( `line-rate`, `branch-rate`) 和值。

# wso2 - 更改代理生成的 URL

> ID：12077459
> 
> 赞同：1
> 
> 时间：2012-08-22T16:25:37.790
> 
> 标签：wso2, wso2esb

我希望更新代理生成的默认 URL。我已经关注[了如何更改 WSO2 ESB URL](https://stackoverflow.com/questions/10238512/how-to-change-wso2-esb-url)，但提供的解决方案不起作用，甚至我希望根据版本阻止为肥皂绑定生成两个 url。

请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T09:41:38.830

您必须从 ESB 的主序列重定向到默认 URL。以下文章解释了配置

[http://achala11.blogspot.com/2012/08/access-wsdl-for-customuri-wso2-esb.html](http://achala11.blogspot.com/2012/08/access-wsdl-for-customuri-wso2-esb.html)

# ravendb - 尝试向 RavenDb 添加数据时出错

> ID：12077465
> 
> 赞同：0
> 
> 时间：2012-08-22T16:26:07.180
> 
> 标签：ravendb, autofac

我正在使用 autofac 并且接口已正确解析，但此代码失败并显示“无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8081”

```
using (var store = GetService<IDocumentStore>())
{
    using (var session = store.OpenSession())
    {
        session.Store(new Entry { Author = "bob", Comment = "My son says this", EntryId = Guid.NewGuid(), EntryTime = DateTime.Now, Quote = "I hate you dad." });
        session.SaveChanges();
    }
 } 
```

这里是注册

```
builder.Register<IDocumentStore>(c =>
        {
            var store = new DocumentStore { Url = "http://localhost:8081" };
            store.Initialize();
            return store;
        }).SingleInstance(); 
```

当我导航到时，`http://localhost:8081`我确实得到了 silverlight 管理 UI。虽然我运行的是 Windows VM，但 vmware 和 Silverlight5 不能一起玩。这完全是另一个问题。无论如何，有没有人看到我在这里做错了什么或者我应该做些什么不同的事情？感谢您提供任何代码、提示或技巧。

附带说明一下，我可以从命令行界面输入一些虚拟记录吗？关于我如何做到这一点的任何文档或示例？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:41:45.553

只是好奇，您是在切换 RavenDB 以在 8081 上收听吗？默认值为 8080。如果你要让管理工作室出现，我怀疑你是。

我对 autofac 不太熟悉，但是看起来您将单例 DocumentStore 包装在 using 语句中。

尝试：

```
using (var session = GetService<IDocumentStore>().OpenSession())
{
} 
```

就虚拟记录而言，如果您的数据库为空，管理工作室会询问您是否要生成一些虚拟数据。如果您无法让 silverlight 在 VM 中工作，我不确定是否有另一种自动化方式可以做到这一点。

也许使用走私者：

[http://ravendb.net/docs/server/administration/export-import](http://ravendb.net/docs/server/administration/export-import)

但是你必须找到要导入的东西。

# javascript - 无法更改元素的“名称”属性

> ID：12077467
> 
> 赞同：2
> 
> 时间：2012-08-22T16:26:24.583
> 
> 标签：javascript, internet-explorer, dom, element

这是我的问题的非常简化的版本：

**我有什么：**

`<td id='cell'><input name="elem_1_Name"/></td>`

**我想要什么：**

`<td id='cell'><input name="elem_1_Name"/><input name="elem_5_Name"/></td>`

**我试过的：**

`var elem = document.getElementById("cell").lastChild.cloneNode(true);`

*接着：*

`elem.name = elem.name.replace("1","5");`

*或者*

`elem.name = "elem_5_Name";`

*或者*

`elem.setAttribute("name","elem_5_Name");`

*最后*

`document.getElementById("cell").appendChild(elem);`

**调试时我得到了什么：**

`elem.name : "elem_5_Name"`

**！！但！！**

`document.getElementById("cell").innerHTML : <input name="elem_1_Name"/><input name="elem_1_Name"/>`

当我尝试直接设置 innerHTML - 我有 IE 未知的运行时错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:47:59.167

`document.getElementById("cell").innerHTML : <input name="elem_1_Name"/><input name="elem_1_Name"/>`
应该：
`document.getElementById("cell").innerHTML='<input name="elem_1_Name"/><input name="elem_5_Name"/>';`

这适用于跨浏览器（在 IE6 中测试）。

正如 Bergi 所指出的，以下代码也应该可以工作（在 IE6 和 FF12 中测试）。
它使用条件注释来定位微软的 jscript（因此是 IE）：

```
/*@cc_on @if (@_jscript)
var elem = document.createElement('<input name="elem_5_Name">');
@else */
var elem = document.createElement("input");
elem.name = "elem_5_Name";
/* @end @*/

document.getElementById("cell").appendChild(elem); 
```

祝你好运！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:49:46.593

在早期的 IE 版本中，属性/属性是古怪的[`name`。](http://msdn.microsoft.com/de-de/library/ms534184)看

*   [http://javascript.about.com/library/bliebug2.htm](http://javascript.about.com/library/bliebug2.htm)
*   [http://thunderguy.com/semicolon/2005/05/23/setting-the-name-attribute-in-internet-explorer/](http://thunderguy.com/semicolon/2005/05/23/setting-the-name-attribute-in-internet-explorer/)

（从[这个问题](https://stackoverflow.com/q/1711100/1048572)）

# xml - 在 Flash AS3 中加载 XML

> ID：12077470
> 
> 赞同：0
> 
> 时间：2012-08-22T16:26:42.703
> 
> 标签：xml, actionscript-3, flash

我正在尝试创建一个可以显示 XML 选项列表的应用程序。然后，当单击一个选项时，从不同的 XML 加载数据以显示他们选择的选项，即 [j]。

我在这里的代码在通过循环后只进入最后一个变量，所以无论我点击哪个选项，它都会进入最后一个选项的数据。它也只删除原始按钮的最后一个子按钮。

有谁知道我怎样才能让它进入正确的页面？

```
import flash.events.Event;
import flash.text.TextField;

var xmlLoader:URLLoader = new URLLoader();
var xmlReq:URLRequest = new URLRequest("http://praxis2.cit.ie/~patrickhallihan/DynamicContent/autumn/classxml.php");
xmlLoader.load(xmlReq);

xmlLoader.addEventListener(Event.COMPLETE, getClasses);
function getClasses(e:Event):void
    {
        var xmlobject:XML = new XML(e.target.data);
        var classlist:XMLList = xmlobject.classgroup;
        var classArray:Array = new Array();

        for (var i:int = 0; i<classlist.length(); i++)
            {
                var classname:String = xmlobject.classgroup.classname[i];
                var classtxt:TextField = new TextField();

                classtxt.width = 70;
                classtxt.height = 20;
                classtxt.border = true; 
                classtxt.borderColor = 0x000000;
                classtxt.background = true; 
                classtxt.backgroundColor = 0x888888;
                classtxt.textColor = 0xFFFFFF;
                classtxt.text = "" + classname;
                addChild (classtxt);
                classArray[i] = classtxt;
            }

        for (var j:int = 0; j<classlist.length(); j++)
            {
                classArray[j].y = 40*j;
                classArray[j].x = 125;
                classArray[j].addEventListener(MouseEvent.CLICK, gotoSchedule);

                function gotoSchedule(event:MouseEvent):void
                    {
                        removeChild (classtxt);

                        var xmlLoader1:URLLoader = new URLLoader();
                        var xmlReq1:URLRequest = new URLRequest("http://praxis2.cit.ie/~patrickhallihan/DynamicContent/autumn/getschedule.php?id="+ j);
                        xmlLoader1.load(xmlReq1);

                        xmlLoader1.addEventListener(Event.COMPLETE, getExams);
                        function getExams(e:Event):void
                            {
                                trace (xmlLoader1.data);
                                var examtxt:TextField = new TextField();
                                examtxt.width = 260;
                                examtxt.height = 400;
                                examtxt.y = 30;
                                examtxt.x = 30;
                                examtxt.border = true; 
                                examtxt.borderColor = 0x000000;
                                examtxt.background = true; 
                                examtxt.backgroundColor = 0x888888;
                                examtxt.textColor = 0xFFFFFF;
                                examtxt.text = (xmlLoader1.data);
                                addChild (examtxt);
                            }
                    }
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:46:51.017

不确定这是否会解决您的问题（重构您的代码），但在其他函数中不要有一些匿名函数会更干净。另外，您完全不需要第二个 for 循环。

```
import flash.events.Event;
import flash.events.MouseEvent;
import flash.text.TextField;

var classArray:Array = new Array();    

var xmlLoader:URLLoader = new URLLoader();
var xmlReq:URLRequest = new URLRequest("http://praxis2.cit.ie/~patrickhallihan/DynamicContent/autumn/classxml.php");

xmlLoader.addEventListener(Event.COMPLETE, getClasses); //add your listeners BEFORE you call load
xmlLoader.load(xmlReq);

function getClasses(e:Event):void
{
    var xmlobject:XML = new XML(e.target.data);
    var classlist:XMLList = xmlobject.classgroup;

    for (var i:int = 0; i<classlist.length(); i++)
    {
        var classname:String = xmlobject.classgroup.classname[i];
        var classtxt:TextField = new TextField();

        classtxt.width = 70;
        classtxt.height = 20;
        classtxt.border = true; 
        classtxt.borderColor = 0x000000;
        classtxt.background = true; 
        classtxt.backgroundColor = 0x888888;
        classtxt.textColor = 0xFFFFFF;
        classtxt.text = "" + classname;
        addChild (classtxt);
        classArray[i] = classtxt;

        classtxt.y = 40 * i;
        classtxt.x = 125
        classtxt.addEventListener(MouseEvent.CLICK, gotoSchedule);
    }
}    

function getIndexFromTextField(tf:TextField):int {
    for (var i:int = 0; i < classArray.length; i++) {
        if (classArray[i] == tf) {
            return i;
        }
    }
    return -1;
}

function gotoSchedule(event:MouseEvent):void
{
    var tf:TextField = event.currentTarget as TextField;
    removeChild(tf);

    xmlLoader = new URLLoader();
    var xmlReq1:URLRequest = new URLRequest("http://praxis2.cit.ie/~patrickhallihan/DynamicContent/autumn/getschedule.php?id=" + getIndexFromTextField(tf));
    xmlLoader.addEventListener(Event.COMPLETE, getExams);
    xmlLoader.load(xmlReq1);
}

function getExams(e:Event):void
{
    trace(xmlLoader.data);
    var examtxt:TextField = new TextField();
    examtxt.width = 260;
    examtxt.height = 400;
    examtxt.y = 30;
    examtxt.x = 30;
    examtxt.border = true; 
    examtxt.borderColor = 0x000000;
    examtxt.background = true; 
    examtxt.backgroundColor = 0x888888;
    examtxt.textColor = 0xFFFFFF;
    examtxt.text = (xmlLoader.data);
    addChild(examtxt);
} 
```

# c++ - 找出类及其子类中的类类型

> ID：12077471
> 
> 赞同：0
> 
> 时间：2012-08-22T16:27:00.150
> 
> 标签：c++, boost, shared-ptr

可以说我有课

```
template<typename PointT>
class Parent {
  public:
  typedef boost::shared_ptr<Parent<PointT> > Ptr;

  inline Ptr
  makeShared ()
  {
    return Ptr (new Parent<PointT> (*this));
  }
};

template<typename PointT>
class Child : public Parent {
  public:
    typedef boost::shared_ptr<Child<PointT> > Ptr;
}; 
```

现在我想将 Ptr 和 makeShared() 的定义重写为通用的，以便从子类实例调用 makeShared() 将产生指向子类而不是父类的指针

为了更清楚，在任何继承 Parent 的类上调用 makeShared() 都会给出一个指向该继承类实例的指针。并在父类上调用 make shared() 会给出一个指向父类实例的指针有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:31:50.963

CRTP 将在这里工作：

```
template<typename Child>
class Parent {
  public:
  typedef boost::shared_ptr<Child> Ptr;

  inline Ptr
  makeShared ()
  {
    return Ptr (new Child(*static_cast<Child *>(this)));
  }
};

template<typename PointT>
class Child : public Parent<Child> {
}; 
```

请注意，这`makeShared`是一个相当混乱的名称，因为它可能会与[`shared_from_this`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this)（在 C++11 和 Boost 中）混淆。您的方法更典型的名称是`clone`.

# php - 通过 Google Apps 发送电子邮件 Gmail 服务中断？

> ID：12077474
> 
> 赞同：1
> 
> 时间：2012-08-22T16:27:05.423
> 
> 标签：php, gmail, google-apps, phpmailer

我构建并管理了大型 Web 应用程序，它使用 PHPMailer 库通过 Google Apps Gmail 帐户发送电子邮件。我收到了一份支持请求，指出有人没有收到他要求的密码回收电子邮件。

调查这个问题，我登录了管理电子邮件发送的 Google Apps Gmail 帐户，我注意到已发送电子邮件列表中有一个巨大的差距。系统会根据用户的需要每天发送电子邮件。但是，昨天下午 1 点 15 分，我收到了两封被拒绝的电子邮件，从那时起，直到今天上午 11 点 45 分左右都没有发送任何电子邮件。

我检查了[状态页面](http://www.google.com/appsstatus)，发现今天早上 2 点到 4 点左右出现了小中断，但只要我遇到问题就没有。

PHP 没有生成任何关于此问题的错误日志，Google Apps 也没有生成任何错误日志。我还使用`.com`没有任何垃圾邮件历史记录的合法域。

关于为什么这个问题浮出水面的任何想法，然后现在似乎不是问题？如果可以的话，我想防止将来发生这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:38:25.030

也许您刚刚达到了电子邮件配额。你知道这个限制吗？

[http://support.google.com/a/bin/answer.py?hl=en&answer=166852](http://support.google.com/a/bin/answer.py?hl=en&answer=166852)

[https://support.google.com/mail/bin/answer.py?hl=en&answer=22839](https://support.google.com/mail/bin/answer.py?hl=en&answer=22839)

# regex - 匹配正则表达式以从文件中删除密码

> ID：12077475
> 
> 赞同：1
> 
> 时间：2012-08-22T16:27:05.980
> 
> 标签：regex, linux, sed

我有一个文件，其中包含以下几行

```
app.mail.host = 10.1.1.1
app.mail.debug = true
app.db.username = spate
app.db.password = 1#4FnL&@7! 
```

出于安全目的，我想使用正则表达式更改实际密码并替换为 XXXXXXX。

我正在尝试遵循正则表达式，但它不起作用。

```
sed 's/app\.db\.password="[^"]\+/app\.db\.password="XXXXXXXX"/g' foo.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:39:44.520

正如 Hbcdev 指出的那样，由于空格，您不匹配。由于这似乎是“安全”代码（在这种情况下 - 为什么要以纯文本形式存储该密码？），容忍空格可能比逐字节匹配输入更好。就像是：

```
sed 's/app\.db\.password[ \t]*=.*/app.db.password="xxxxx"/ 
```

（未经测试）可能会更稳健地工作。请注意，即使它不以引号开头，它也会删除您的密码字段。

尽管如此，用 shell 脚本做这种骇客听上去还是很危险的。你想达到什么目的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:28:12.937

您没有在表达式中的`=`符号周围留下空格。`sed`一旦你这样做，我认为它会起作用。

# bash - 使用交错的单引号和双引号字符更好地编写别名

> ID：12077480
> 
> 赞同：1
> 
> 时间：2012-08-22T16:27:20.587
> 
> 标签：bash, escaping

关于转义，有什么更简洁的方法来编写以下别名？

`alias bs="echo \'{'\"'account'\"':'\"'a1'\"','\"'portfolio'\"':'\"'p1'\"'}\' | nc 0 9000"`

哎呀，这很丑陋；但它有效。当我扩展别名（使用`C-M-e`）时，我想要这个确切的结果：

`echo '{"account":"a1","portfolio":"p1"}' | nc 0 9000`

我很想知道我是否错过了一个技巧：主要是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:26:17.410

它必须是别名吗？

```
function bs { echo '{"account":"a1","portfolio":"p1"}' | nc 0 9000; } 
```

# ruby-on-rails - 如何在 Rails 中检查退回的电子邮件？

> ID：12077481
> 
> 赞同：4
> 
> 时间：2012-08-22T16:27:24.793
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-ses, email-bounces

我目前正在创建一个能够向许多用户发送电子邮件的电子邮件应用程序。但是，我想知道是否有退回的电子邮件。我目前正在使用 Amazon SES 在电子邮件被退回时通知我。但是，我希望将退回的电子邮件数据自动输入到我的 Rails 应用程序中，而不是根据我从 Amazon 获得的邮件程序守护程序手动输入。有没有办法这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T05:13:34.630

如果您愿意付费，这个名为[bouncely](http://bouncely.com/)的SaaS 站点似乎提供了一个接口和一个围绕SES 反弹的api 包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T10:58:41.370

[send_email()](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/SimpleEmailService.html#send_email-instance_method)返回一个[响应对象](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/Core/Response.html)，可以查询[响应元数据](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/Core/Http/Response.html)。

将此状态与您感兴趣的[代码（可能是 550）进行比较。](http://email.about.com/cs/standards/a/smtp_error_code_2.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-24T03:46:56.183

我找不到任何干净的现有解决方案，因此我编写了一个 gem ( `email_events`)，它允许您在邮件程序类中放置一个电子邮件事件处理程序方法（包括退回事件）： [https ://github.com/85x14 /email_events](https://github.com/85x14/email_events)。它支持 SES 和 Sendgrid，所以如果你仍然需要它应该可以为你工作。

# javascript - AppendChild 表单/表格 [Javascript/Html/PHP]

> ID：12077486
> 
> 赞同：0
> 
> 时间：2012-08-22T16:27:36.470
> 
> 标签：javascript, php, html-table, appendchild

我的主要问题是我有一个非常好的设置能力来添加表单/删除它们但是，问题是做一种类型的附加会使输入显示出来（正是我想要的）但实际上并没有被添加到表单，而另一个使表单不可见，但是您可以看到它在`$_POST`.

```
<script language="javascript">
    function addRow(tableID,texting,values) {

        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = texting+":";

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        element2.name = texting; // Change this dummy.
        if(tableID == "levelup")
            element2.name += "rate";
        if(values != "" && values != null && values != "undefined")
            element2.value = values;
        cell3.appendChild(element2); //This isn't hidden but no works, wat?
        //document.forms[1].appendChild(element2); //This works but is hidden
        //document.forms[1].write("hi!");

    }

    function deleteRow(tableID) {
        try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }

            }
        }catch(e) {
            alert(e);
        }
    }
</script>
<html>
    <table>
        <tr><td>Add statistic:</td></tr>
        <form action="<?php echo $PHP_SELF; ?>" method="post" enctype="multipart/form-data"> 
            <tr><td><input type="text" name="addme"><input type="button" value="add" onclick="addRow('formulas',document.forms[0].addme.value); addRow('levelup',document.forms[0].addme.value,'1+'+document.forms[0].addme.value)"/></td><td><input type="button" value="Delete" onclick="deleteRow('formulas'); deleteRow('levelup')"/></td></tr>
        </form>
        <form action="<?php echo $PHP_SELF; ?>" method="post" enctype="multipart/form-data">  
            <tr><td>Formula name:</td><td><input type="text" name="formulaname"></td></tr>
            <tr><td>Statistics at level 1(required)</td></tr>
            <tr>
            <table>
                <tr><td>Level 1:</td></tr>
                <tr><td>Move speed:</td><td><input type="text" value="1" name="movespeed"></td></tr>
                <tr><td>Stats:</td></tr>
                <tr><td><table id="formulas"></table></td></tr>
            </table></tr>
            <tr><td>Level up Formula Rates</td></tr>
            <table>
                <tr><td>Move speed:</td><td><input type="text" value="Mov+1" name="Movrate"></td></tr>
                <tr><td>Experience:</td><td><input type="text" value="(Exp*0.25)*Exp*Lvl+(0.25*Mov)" name="Exprate"></td></tr>
                <tr><td><table id="levelup"></table></td></tr>
            </table>
            <tr><td><input type="submit"  value="Save"/></td></tr>
        </form>
    </table>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:34:35.053

这不起作用，因为您在表单之外追加了一个新行。将您的表格分成两个单独的表格，一个用于第一个表格，一个用于第二个表格。然后将表格包装在当前位于其中的表单标签中。

结果应具有以下结构：

```
<form>
  <table> (add statistics form) </table>
</form>
<form>
  <table> (formulas) </table>
</form> 
```

# xml - 如何从 XML 中提取子节点值作为字符串

> ID：12077488
> 
> 赞同：3
> 
> 时间：2012-08-22T16:27:40.667
> 
> 标签：xml, delphi, xpath, xml-parsing

我正在尝试遍历一些 XML 并将字符串的值设置为等于特定节点的内容。XML 看起来像：

```
<RootNode>
    <SubNode>test<SubNode>
    <SubNode><ExtraMarkup>some value</ExtraMarkup><SubNode>
</RootNode> 
```

其中每个子节点可以包含一个值或其他 XML 子节点。对于第一个子节点，此代码可以正常工作：

```
for Node := 0 to RootNode.childNodes.length-1 do begin
    AttrValue := RootNode.childNodes[Node].selectSingleNode('SubNode').Text; 
    // More code here...
end; 
```

问题是当子节点包含子节点时。我希望 AttrValue 的值是 ' `test`' 或 ' `<ExtraMarkup>some value</ExtraMarkup>`' 作为字符串。

如果我得到 XML 属性而不是文本，则不会保留标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:32:49.997

我想你可能想要“IXmlNode.NodeValue”。

这是一个例子：

```
Function   TGlobalConfig.GetXmlItem(CurNode : IXMLNODE; Section : String; var Value : String; Default : String) : Boolean;
var
  ChildNode: IXMLNode;
begin
  if Assigned(CurNode) then
  begin
    ChildNode := CurNode.ChildNodes.FindNode(Section);
    if (ChildNode <> nil) then
       if   VarIsNull(ChildNode.NodeValue) then 
         Value := Default
       else Value := ChildNode.NodeValue;
       ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:54:27.243

而不是`.Text`您需要诸如`InnerText`or之类的属性`InnerXml`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T10:24:38.237

```
for Node := 0 to RootNode.childNodes.length-1 do begin

// Check if the Value stored in SubNode node is xml
    if (RootNode.childNodes[Node].selectSingleNode('SubNode').hasChildNodes and
        DealAttributesNode.childNodes[Node].selectSingleNode('SubNode').childNodes[0].hasChildNodes) then begin
        AttrValue := RootNode.childNodes[Node].selectSingleNode('SubNode').childNodes[0].Xml;
    end
    else begin
        AttrValue := RootNode.childNodes[Node].selectSingleNode('SubNode').Text;
    end;
end; 
```

# php - 带有 PHP 数组的 Paypal NVP TransactionSearch

> ID：12077490
> 
> 赞同：0
> 
> 时间：2012-08-22T16:27:45.013
> 
> 标签：php, arrays, paypal, nvp

您好，我正在使用 paypal API 执行查询，我的问题涉及一个数组并检索密钥的值（这是动态的）我知道查询有效并且凭据很好，因为返回了以下数组：

```
array(2) {
["L_TRANSACTIONID0"]=>
string(17) "9FX81733DJ079610B"
["L_TRANSACTIONID1"]=>
string(17) "5E083945JC6368706"
["L_TRANSACTIONID2"]=>
string(17) "7SP75180Y9281954W"
} 
```

我想在 foreach 循环中分解每个键，但每个键都是动态的（注意每个键的计数）。这如何在 foreach 循环中完成？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T13:57:26.160

前几天我刚刚回答了一个类似的问题，所以可能是重复的。无论如何，如果这对某人有帮助，请执行以下操作：

```
function process_response($str)
{
    $data = array();
    $x = explode("&", $str);

    foreach($x as $val)
    {
        $y = explode("=", $val);

        preg_match_all('/^([^\d]+)(\d+)/', $y[0], $match);

        if (isset($match[1][0]))
        {
            $text = $match[1][0];
            $num = $match[2][0];

            $data[$num][$text] = urldecode($y[1]);
        }
        else
        {
            $text = $y[0];
//          $data[$text] = urldecode($y[1]);
        }
    }

    return $data;
} 
```

只需将 curl 调用的结果输入其中，并将结果作为格式化数组。

注意注释掉的行，有一些字段是全局的，例如版本，如果你想要这些，取消注释，但是你可能需要在下游调整一些格式代码。

作为一个如何使用它的例子，假设你想把它输入 PHPExcel 对象，你可以这样做：

```
 $response = your_curl_call($request);
    $data = process_response($response);

    $index = 1;
    foreach($data as $row)
    {
        $objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A'.$index, $row['L_TIMESTAMP'])
            ->setCellValue('B'.$index, $row['L_TIMEZONE'])
            ->setCellValue('C'.$index, $row['L_TYPE'])
            ->setCellValue('D'.$index, $row['L_EMAIL'])
            ->setCellValue('E'.$index, $row['L_NAME'])
            ->setCellValue('F'.$index, $row['L_TRANSACTIONID'])
            ->setCellValue('G'.$index, $row['L_STATUS'])
            ->setCellValue('H'.$index, $row['L_AMT'])
            ->setCellValue('I'.$index, $row['L_CURRENCYCODE'])
            ->setCellValue('J'.$index, $row['L_FEEAMT'])
            ->setCellValue('K'.$index, $row['L_NETAMT']);
        $index++;
    } 
```

# seo - 避免一个域被搜索引擎索引

> ID：12077491
> 
> 赞同：0
> 
> 时间：2012-08-22T16:27:46.990
> 
> 标签：seo, robots.txt

我有一个可通过 2 个域访问的站点。一个域是我通过托管计划免费获得的并且不想推广的域。但是，当我执行搜索查询时，会弹出该域上我网站的页面。

有哪些技术可以避免一个域被索引而另一个域被完美索引？请记住，它是一个托管空间，上面有完全相同的文件。

我已经在谷歌网站管理员工具中提交了它，但这显然只适用于谷歌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T18:59:41.243

我会从您不想使用的域设置站点范围的 301 重定向。这样您就可以将其从索引中删除，并让人们使用正确的索引。您可能可以在 .htaccess 文件（apache 服务器）中执行此操作。我现在不在我的电脑前，所以不能轻易给你命令。

# shopify - 通过 Shopify API 检索 WorldPay 身份验证令牌

> ID：12077492
> 
> 赞同：0
> 
> 时间：2012-08-22T16:27:47.477
> 
> 标签：shopify

我们将 Shopify 与 WorldPay 一起用作支付处理器。有什么方法可以通过 Shopify API 获取订单的 WorldPay 授权令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:20:47.403

支付网关信息（除了网关名称）被排除在 API 之外，主要是出于安全原因。

# magento - Magento 除了注册欢迎信息外不发送任何电子邮件

> ID：12077493
> 
> 赞同：0
> 
> 时间：2012-08-22T16:27:50.580
> 
> 标签：magento, sendmail, magento-1.4, magento-1.5, magento-1.6

magento 1.7 和电子邮件发送的其他问题，这次是在测试服务器（Ubuntu 10.04.4 LTS）上，它只能为新注册的客户发送电子邮件。我检查了后端设置，似乎没问题：

配置->高级->系统->邮件发送设置：

*   禁用电子邮件通信-> 否
*   主机：本地主机
*   港口：25
*   返回路径：是

所有商店的电子邮件都已填满，缓存被禁用，配置了邮件代理（sendmail），我还从命令行检查了它是否适用于：

```
echo "<?php mail('me@mymail.com', 'Test mail', 'This is a test email.'); ?>" | php 
```

它有效！另外：另外：这不是 gmail 问题，我尝试发送到不同的电子邮件提供商（gmail 而不是 gmail），结果相同

会是什么呢？

谢谢

# java - Hibernate 在加入子表时寻找父字段名称

> ID：12077494
> 
> 赞同：2
> 
> 时间：2012-08-22T16:27:51.307
> 
> 标签：java, hibernate, jpa

我的数据库中有三个表：

```
create table A (
  a_id int primary key
);

create table B (
  b_id int primary key references A(a_id)
);

create table C (
  c_id int primary key,
  b_id int references B(b_id)
); 
```

我使用以下 JPA 注释类对它们进行建模：

```
@Entity(name = "A")
@Table(name = "A")
public class A {
    @SuppressWarnings("unused")
    @Id
    @Column(name = "A_ID")
    private int id;
}

@Entity(name = "B")
@Table(name = "B")
@PrimaryKeyJoinColumns({@PrimaryKeyJoinColumn(name = "B_ID", referencedColumnName = "A_ID")})
public class B extends A {
}

@Entity(name = "C")
@Table(name = "C")
public class C {
    @SuppressWarnings("unused")
    @Id
    @Column(name = "C_ID")
    private int id;

    @SuppressWarnings("unused")
    @OneToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})
    @JoinColumns(value = {
        @JoinColumn(name = "B_ID", referencedColumnName = "B_ID", insertable = false, updatable = false)})
    private B b;
} 
```

当我尝试将这些类与 Hibernate 实体管理器一起使用时，它会抱怨以下错误：

`Unable to find column with logical name: B_ID in org.hibernate.mapping.Table(A) and its related supertables and secondary tables`

将 C更改`referencedColumnName`为 B 加入`A_ID`似乎让它很开心。这是为什么？我不能对数据库中的关系进行建模吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:07:02.413

缺少的是继承策略的规范：

```
@Entity(name = "A")
@Table(name = "A")
@Inheritance(strategy = InheritanceType.JOINED)
public class A {
    @SuppressWarnings("unused")
    @Id
    @Column(name = "A_ID")
    private int id;
} 
```

JPA 默认为`SINGLE_TABLE`，它将整个类层次结构折叠到一个表中。

# ruby-on-rails - 有没有一种从 ActiveRecord 获取 PGconn 实例的简单方法？

> ID：12077496
> 
> 赞同：1
> 
> 时间：2012-08-22T16:27:57.110
> 
> 标签：ruby-on-rails, pg

我有一些代码依赖于`PGConn`连接到我的数据库。但是，我`ActiveRecord`已经建立了连接。

因此，无论如何我可以`PGConn`从 AR 中获得可用于相关代码的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:06:09.640

我认为您正在寻找以下的 #raw_connection 方法`ActiveRecord::Base.connection`：

```
pgconn = ActiveRecord::Base.connection.raw_connection 
```

您还可以从该类的 获取特定于模型类的连接`connection`：

```
pgconn = MyModelClass.connection.raw_connection 
```

Daniel Azuma 有一篇关于低级连接 API 的不错的[博客文章。](http://www.daniel-azuma.com/blog/archives/216)

希望这可以帮助！

# arrays - 基于重复字符位置创建数组的最简单方法

> ID：12077503
> 
> 赞同：3
> 
> 时间：2012-08-22T16:28:25.853
> 
> 标签：arrays, matlab

我想使用数组中的重复段对我的元素进行分组。中断基本上取决于重复段的位置，在我的真实数据中包含约 10000 个元素，我想知道是否有更简单的方法来做到这一点。

这是一个简短的示例来说明我想要什么：

假设我有一个数组，

```
A=[1 5 3 4 4 4 6 9 8 8 9 5 2]; 
```

我想要的是`A`闯入`[1 5 3],[6 9], and [9 5 2];`

使用matlab编写这个代码最简单的是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T19:39:38.237

对于矢量化解决方案，您可以找出与邻居的前向或后向差异为零的位置，然后使用`bwlabel`（来自图像处理工具箱）并`accumarray`收集数据。

```
A=[1 5 3 4 4 4 6 9 8 8 9 5 2];

d = diff(A)==0;
%# combine forward and backward difference
%# and invert to identify non-repeating elments
goodIdx = ~([d,false]|[false,d]);

%# create list of group labels using bwlabel
groupIdx = bwlabel(goodIdx);

%# distribute the data into cell arrays
%# note that the first to inputs should be n-by-1
B = accumarray(groupIdx(goodIdx)',A(goodIdx)',[],@(x){x}) 
```

**编辑**

如果您希望重复元素也出现在元胞数组中，请将最后两行代码替换为以下代码

```
 groupIdx = cumsum([1,abs(diff(goodIdx))]);
 B = accumarray(groupIdx',A',[],@(x){x}) 
```

**编辑2**

如果您还希望能够拆分相同数字的连续组，则需要计算`groupIdx`如下：

```
 groupIdx = cumsum([1,abs(diff(goodIdx))|~d.*~goodIdx(2:end)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:37:04.647

如果我正确理解了这个问题，这是一个可行的解决方案。它可能可以进一步优化。

```
A=[1 5 3 4 4 4 6 9 8 8 9 5 2];

% //First get logical array of non consecutive numbers
x = [1 (diff(A)~=0)];
for nn=1:numel(A)
    if ~x(nn)
        if x(nn-1)            
            x(nn-1)=0;
        end
    end
end

% //Make a cell array using the logical array
y = 1+[0 cumsum(diff(find(x))~=1)];
x(x~=0) = y;
for kk = unique(y)
    B{kk} = A(x==kk);
end

B{:} 
```

# ios - OpenGL-ES 共享顶点与重复顶点渲染问题

> ID：12077506
> 
> 赞同：0
> 
> 时间：2012-08-22T16:28:30.500
> 
> 标签：ios, opengl-es, glkit

我有一个奇怪的问题，我的所有模型都正确渲染。当我将模型从使用共享顶点（顶点集 + 索引数组）更改为使用重复顶点（需要这样做才能对我的模型进行纹理处理）时，我的所有模型在使用共享顶点时都可以正常工作。当我对重复的顶点进行交换时，除了我的一个模型之外，它们都可以工作，我不知道为什么。巧合的是，它是顶点数最多的模型（共享时为 20，复制时为 108），因此可能与此有关。

到目前为止我为尝试纠正这个问题所做的工作：

*   从头开始重新创建模型（这是一项简单的任务，因为它是一个非常简单的模型）
*   新模型没有正确渲染，将模型改回共享顶点，再次工作（不能像这样纹理它虽然没有帮助）
*   将我的索引数组从 GLubyte 更改为 GLushort 以防出现一些数据类型问题
*   玩弄索引数组的绘制顺序，看看它是否是某种三角形缠绕问题，这似乎不是这种情况（也取消了背面剔除以检查）

我所有的模型都是基本形状，金字塔，立方体......直到二十面体。十二面体是产生问题的形状（看起来像一个 12 面骰子）。当绘制形状所需的 36 个三角形中仅显示大约 8 个时，其余部分是透明的或根本不存在。我使用 SoftImage 以相同的方式制作了所有模型，所以我真的不认为这与模型本身有关。在可见的三角形上，纹理显示正确。所有模型同时出现在屏幕上，因此可以排除任何可能不是特定于渲染模型的内容。它们也使用相同的函数进行渲染，只是具有不同的数组。

关于我可以采取哪些步骤来找出可能导致这种情况的任何建议？

这是使用重复顶点的模型的样子[http://pastebin.com/2hg7D0Ga](http://pastebin.com/2hg7D0Ga) 这里是共享的[http://pastebin.com/tUqTUM91](http://pastebin.com/tUqTUM91)

也许如果你有可以渲染这些模型的东西，你可以在你的应用程序中快速测试它们，看看它是否适合你

这是我的相关渲染代码[http://pastebin.com/fRiKM89M](http://pastebin.com/fRiKM89M)

这是模型未正确渲染时的样子[http://imgur.com/2u4el](http://imgur.com/2u4el)

我希望有人能发现我忽略的东西。感谢您花时间阅读所有这些，如果您已经做到了这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:47:01.153

好吧，我现在觉得有点愚蠢，但这是一个诚实的错误。如果您查看我的代码，其中有 NumVertices 等，这些都是 GLubytes，我完全忘记了，我假设我已将它们定义为 int。因此，在具有最多顶点的一个模型上，数量超过了 GLubyte 最大值 255，但其他模型都没有。

对如此复杂的错误进行非常简单的修复哇！当 OpenGL 崩溃时，它总是让您认为某些技术确实出了问题，而您忽略了简单的问题

# c# - 如何创建一个可以采用一些原始类型的泛型类

> ID：12077510
> 
> 赞同：1
> 
> 时间：2012-08-22T16:28:49.233
> 
> 标签：c#, generics

我想创建一个这样的类

```
public class MyClass<T> where T:int || T:decimal || T:double || T:float ||T:long
{
public T DoSomething()
{}
} 
```

是否可以在 C# 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:31:34.703

你不能这样做，但你可以使用`struct`约束，这意味着类型参数必须是值类型：

```
public class MyClass<T> where T: struct
{
  public T DoSomething()
  {  
    // your code
  }
} 
```

看看[类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)

# ruby-on-rails - Rails 3引擎路由解析“匹配”到资产路径

> ID：12077514
> 
> 赞同：1
> 
> 时间：2012-08-22T16:29:09.387
> 
> 标签：ruby-on-rails, ruby

我很混乱。这是我的情况。最近，我将当前正在开发的应用程序拆分为三个 Rails 引擎。其中一个引擎是进行用户管理。我正在为此使用设计。默认情况下，设备使用名为（user_route）的路由在用户登录后重定向用户，因此我在引擎的 routes.rb 文件中定义了它。

所以，长话短说：

在主应用程序的 routes.rb 中，我有：

```
mount BackOffice::Engine,    at: '/bo' 
```

比在 BO 引擎的 routes.rb 中我有：

```
match 'user/logged_in' => 'users#logged_in',       as: 'user_root' 
```

引擎中的整个 routes.rb 是：

```
BackOffice::Engine.routes.draw do
  devise_for :admins, {
    class_name: 'BackOffice::Admin',
    module: :devise,
  }

  devise_for :users, {
    class_name: 'BackOffice::User',
    module: :devise,
  }

  resources :admins
  resources :users
  resources :life_promotions

  match ''               => 'life_quotations#index', as: 'life_quotations'
  match 'user/logged_in' => 'users#logged_in',       as: 'user_root'

  root to: 'life_quotations#index'
end 
```

而且，如果我这样做：

```
module BackOffice
  class ApplicationController < ActionController::Base
    before_filter lambda { raise user_root_path }
  end
end 
```

我看到以下结果：

```
/assets?action=logged_in&controller=back_office%2Fusers 
```

这与'user/logged_in'相去甚远。而且它还阻止我使用对我来说很方便的默认设计行为。但最重要的是，我真的无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:01:32.803

```
Rails.application.routes.draw do 
```

需要使用而不是

```
BackOffice::Engine.routes.draw do 
```

在您的引擎中，导致您在引擎路由中的匹配只存在于引擎的命名空间中，而不是整个应用程序中。

# c# - Fluent nHibernate 中的嵌套查询

> ID：12077517
> 
> 赞同：2
> 
> 时间：2012-08-22T16:29:29.900
> 
> 标签：c#, linq, fluent-nhibernate

我有这个查询：

```
IQueryable<OrderEntity> _records = All().Fetch(x => x.client).FetchMany(x => x.orderItems).ThenFetch(y => y.righeDistinte); 
```

就这个问题而言，这些是所涉及的实体：

```
public class OrderEntity : IEntity
{
    public virtual ClientEntity client { get; set; }
    public virtual ICollection<OrderItemEntity> orderItems { get; set; }
}

public class ClientEntity
{
    public virtual String cod_clifor { get; set; }
    public virtual String des_ragsoc { get; set; }
}

public class OrderItemEntity
{
    public virtual ICollection<DistintaItemEntity> righeDistinte { get; set; }
}

public class DistintaItemEntity
{
    public virtual OrderItemEntity orderItem { get; set; }
    public virtual DistintaEntity distinta { get; set; }
} 
```

因此，每个 OrderEntity 实例引用一个 ClientEntity 和 0 到多个 OrderItemEntity 对象。反过来，每个 OrderItemEntity 可以引用 0 到多个 DistintaItemEntity。

这篇文章顶部的查询返回具有相关客户端和订单项的所有订单的集合，并且每个订单项都具有提取的区别（所有映射都设置得很好）。只需一个 SQL 查询。

到目前为止，一切都很好。

问题在于 DistintaEntity，它不是强制加载的，所以如果我想访问它的一些属性，我需要打开会话，因为延迟加载（只要有一个打开的会话，它就可以工作，但是还有其他查询当然）。

我想在查询中添加一个指令，以强制直接获取与每个 DistintaItemEntity 关联的 DistintaEntity 对象，但我不知道如何在不丢失单个查询结果的情况下执行此操作。

所有一对多关系都是左连接。

谢谢，马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:39:11.070

跟进：我在之前的回答中提到的查询确实有效，但是，正如上面评论中的手印所述，由于 nHibernate 不正确地扫描笛卡尔积，很容易导致多个孩子。

我尝试了链接文章中提到的解决方案之一：更改映射以将 AsSet() 指令添加到 HasMany() 似乎也解决了这个问题。

此处的完整堆栈溢出问题：[NHibernate ThenFetchMany is retrieving duplicate children](https://stackoverflow.com/questions/6194734/nhibernate-thenfetchmany-is-retrieving-duplicate-children)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:24:17.557

在第一条评论之后，我设法找到了答案：通过将最后一个 ThenFetch 替换为 ThenFetchMany，我能够指定一个更进一步的链式 Fetch，它会产生完全想要的结果，仍然是一个带有添加连接的 SQL 查询，并且 DistintaEntity 加载不懒惰。

最后的查询是：

```
IQueryable<OrderEntity> _records = All().Fetch(x => x.client).FetchMany(x => x.orderItems).ThenFetchMany(y => y.righeDistinte).ThenFetch(p => p.Distinta); 
```

非常感谢您的帮助。

# javascript - 来自文本的 jQuery 正则表达式链接 - 将不需要的域添加到链接

> ID：12077518
> 
> 赞同：0
> 
> 时间：2012-08-22T16:29:30.127
> 
> 标签：javascript, jquery, twitter

所以，除了链接部分，我的脚本还可以。它是一个 jquery twitter 提要脚本，可以拉入我的推文。它通过正则表达式生成的链接应该是 - [http://twitter.com](http://twitter.com) - 而是以[http://www.mydomain.com/http://twitter.com](http://www.mydomain.com/http://twitter.com)的形式出现- obv 不起作用。

澄清 - 当一个 twitter 提要通过其中包含文本链接时 - 正则表达式将其转换为正确的链接，但将页面当前 url 放在它前面。

```
<script language="JavaScript">
$.getJSON("https://twitter.com/statuses/user_timeline.json screen_name=twitternamehere&count=2&callback=?",
function(data){
$.each(data, function(i,item){
ct = item.text;
mytime = item.created_at;
var strtime = mytime.replace(/(\+\S+) (.*)/, '$2 $1')
var mydate = new Date(Date.parse(strtime)).toLocaleDateString();
var mytime = new Date(Date.parse(strtime)).toLocaleTimeString();        

ct = ct.replace(/http:\/\/\S+/g,  '<a href="$&" target="_blank">$&</a>');
ct = ct.replace(/\s(@)(\w+)/g,    ' @<a href="http://twitter.com/$2" target="_blank">$2</a>');
ct = ct.replace(/\s(#)(\w+)/g,    ' #<a href="http://search.twitter.com/search?q=%23$2" target="_blank">$2</a>');

 $("#tweetRow").append("<div class='container'><div class='date'> "+mydate+" "+mytime+" </div><div class='tweet'> "+ct+" </div></div>");
            });
$('.container:last').addClass('container2'); 
            });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:00:16.183

```
function processTwitLnk(text) {
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
    text = text.replace(exp, "<a href='$1' target='_blank'>$1</a>");
    exp = /(^|\s)#(\w+)/g;
    text = text.replace(exp, "$1<a href='http://search.twitter.com/search?q=%23$2' target='_blank'>#$2</a>");
    exp = /(^|\s)@(\w+)/g;
    text = text.replace(exp, "$1<a href='http://www.twitter.com/$2' target='_blank'>@$2</a>");
    return text;
}

ct=processTwitLnk(ct); 
```

希望这可以帮助！！

# batch-file - 批处理文件回显开/关无法正常工作

> ID：12077525
> 
> 赞同：5
> 
> 时间：2012-08-22T16:30:08.700
> 
> 标签：batch-file

我真的不习惯制作批处理文件，所以我可能做错了什么，但我真的遇到了关闭/打开回声的问题。（也就是说，如果您发现我遗漏的任何其他错误，请随时指出）

这是我的代码的简化版本：

```
@echo off
setlocal
set args=
set dir="."

:getargs
IF "%2"=="" (
    set dir="%1"
    goto callbatch
)
set args=%args% %1
shift
goto getargs

:callbatch
for %%f in (%dir%\*.txt) do (
    echo processing %%f
    "%BATCHHOME%\batch.bat %args% %%f
    echo
) 
```

所以基本上，我在 BATCHHOME 中有一个批处理文件，它对单个 txt 文件执行某些操作，我想生成一个批处理文件来处理给定目录中的所有 txt 文件。循环中的唯一回声是为了更好地说明问题。

现在，这就是我遇到问题的地方。这个的输出看起来像：

```
processing foo\text1.txt
some output from batch.bat
ECHO is on.

C:\somedir>(
echo processing foo\text2.txt
   "C:\the\path\of\batch.bat" the arguments here foo\text2.txt
)
ECHO is on.

C:\somedir>(
echo processing foo\text3.txt
   "C:\the\path\of\batch.bat" the arguments here foo\text3.txt
)
ECHO is on.

(etc) 
```

好的...我不知道为什么我正在调用的批处理文件会打开回显，但我没有成功，所以我每次都将其关闭！我将最后一部分更改为：

```
:callbatch
for %%f in (%dir%\*.txt) do (
    echo processing %%f
    "%BATCHHOME%\batch.bat %args% %%f
    echo off
)
echo
echo on
echo
echo Finished! 
```

（同样，两个单独的“echo”用于调试）所以现在输出如下所示：

```
processing foo\text1.txt
some output from batch.bat
processing foo\text2.txt
some output from batch.bat
processing foo\text3.txt
some output from batch.bat
(etc.)
ECHO is off.
ECHO is on.
Finished! 
```

这几乎是完美的，但有些奇怪。如果回显打开，那么为什么它显示“完成！” 而不是“回声完成！”？然而，更大（但相关）的问题是，当批处理文件完成后，我不再显示我的路径。换句话说，而不是：

```
C:\Somedir>_ 
```

我只是得到

```
_ 
```

我需要手动输入“echo on”才能再次显示路径。我哪里做错了？

编辑：为了澄清，我知道“回声”本身会打印回声的当前状态。这就是我的意图。在第一个代码中，它们显示在我调用另一个批处理文件后 echo 神秘地打开了。在第二个中，它显示在批处理文件的末尾 echo 已打开，但行为却好像不是。那是我的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T23:22:38.020

我现在看到了你的问题 - 这是一个有趣的问题。您在不使用 CALL 的情况下从批处理文件中调用批处理文件。

如果批次 A 在没有 CALL 的情况下执行批次 B，那么一旦批次 B 完成，整个批次处理就会终止 - 批次 A 不会从中断的地方继续。一旦批处理终止，ECHO 状态将返回到批处理开始之前存在的原始状态，通常为 ON。

但是您的情况有点复杂，因为您对第二批的“调用”在 FOR 循环中。所以 FOR 循环继续执行缓存在内存中的 DO 命令，即使批处理已经终止。这些命令现在在 ECHO ON 的命令行上下文中执行。

在第二种情况下，您在 FOR DO 块中明确关闭 ECHO。在第一次“呼叫”之后，您再次处于命令行上下文中，然后您将 ECHO 关闭。因此您需要手动打开 ECHO。

我不确定 FOR 循环之后的行是如何执行的。你说你已经简化了代码，所以我假设你实际运行的代码在某种代码块中也有这些额外的行。然后这些行将被缓冲，即使在批处理终止后仍会执行。这也可以解释为什么打印“完成！”的行 即使 ECHO 为 ON，也不会回显。代码块中的所有命令都使用在进入最外层代码块之前存在的 ECHO 状态。一个例外是 FOR DO 块使用在进入 DO 块之前存在的 ECHO 状态。

您发布的两组代码都没有运行，因为每组代码在“调用”第二个批处理文件的行中都有一个不平衡的引号。

解决方法是简单地将 CALL 添加到执行第二个批处理文件的语句中。然后批处理将继续，ECHO 状态将保持关闭，父批处理将在正确停止的地方恢复。

我还改进了参数解析逻辑和引号的使用。`~`在明确添加自己的参数之前，您应该从每个参数中去掉引号。参数可能已经有自己的引号。并且任何时候将文件名或路径作为参数传递，都应该引用它以防它包含空格或特殊字符。您需要跟踪变量中的值是否被引用。我通常发现更容易让我的变量值不加引号，然后在需要时显式添加引号。

```
@echo off
setlocal
set args=
set "dir=."

:getargs
IF "%~2"=="" (
    if "%~1" neq "" set "dir=%~1"
    goto callbatch
)
set args=%args% %1
shift
goto getargs

:callbatch
for %%f in ("%dir%\*.txt") do (
    echo processing %%f
    call "%BATCHHOME%\batch.bat" %args% "%%f"
    echo
) 
```

# ruby-on-rails - 宝石的挑选日期

> ID：12077527
> 
> 赞同：0
> 
> 时间：2012-08-22T16:30:23.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Rails 的新手，想问下一个问题 - 如何在 reils 中处理日期？例如，我必须询问用户的出生日期。这个有什么特别的宝石吗？（就在标准中，您可以选择 2 月 31 日，这将是常态......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:09:01.140

Ryan bates 也对这个主题进行了精彩的直播。为专业剧集付费是非常值得的！

[http://railscasts.com/episodes/213-calendars](http://railscasts.com/episodes/213-calendars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:32:26.333

试试`date_select`。或者如果你喜欢 JS，你可以试试 `jqueryui`.`datepicker`

欢迎使用 Rails 和 stackoverflow！

# java - 如何在 Java 字符串的正则表达式中使用开始和结束标记？

> ID：12077531
> 
> 赞同：9
> 
> 时间：2012-08-22T16:30:33.770
> 
> 标签：java, android, regex, string

为什么以下内容不会在 Android 中为我更改文本？

```
String content = "test\n=test=\ntest";
content = content.replaceAll("^=(.+)=$", "<size:large>$1</size:large>") 
```

它返回原始值而不做任何更改。我希望它`=test=`用`<size:large>test</size:large>`

我在这里想念什么？

编辑：好的，我明白为什么`^`并且`$`不工作。关键是我需要在一行的开头和结尾都匹配文本的东西，例如只包含“=一些文本=”的行。给出的大多数答案是不够的，原因如下：

`=(.+)=`与行尾没有任何关系，因此匹配任何包含两个`=`不并排的行。

`.*=(.+)=.*`匹配整行，但与上一个问题相同

`\n=(.+)=\n`越来越近，但不会匹配一行中的两行（例如`test\n=test=\n=test=\ntest`）它也不会匹配第一行或最后一行的实例

`(?<=\n)=(.+)=(?=\n)`几乎可以工作，但再次与第一行或最后一行的实例不匹配

`(?<!.)=(.+)=(?!.)`是唯一一个似乎实际上会匹配以 开头和结尾的每一行，`=`例如，但 $1 包含替换字符串和原始字符串。

`content = content.replaceAll("(?<=(\n|^))=(.+)=(?=(\n|$))", "<size:large>$2</size:large>");`是唯一似乎真正做它应该做的事情的答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T00:37:30.490

如果您打开多行模式，您的原始正则表达式可以正常工作，使用`(?m)`：

```
content = content.replaceAll("(?m)^=(.+)=$", "<size:large>$1</size:large>"); 
```

现在确实在行边界处匹配`^`。`$`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T17:01:21.780

处理这个问题的最好方法是设置[`Pattern.MULTILINE`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#MULTILINE). 使用`MULTILINE`,`^`和`$`将匹配仅使用 , 分隔的行`\n`，并且将类似地处理输入的开头和输入的结尾。

使用`String.replaceAll`您需要使用嵌入式标志表达式在模式*中*`(?m)`设置这些，例如`MULTILINE`：

```
content = str.replaceAll("(?m)^=(.+)=$", "<size:large>$1</size:large>"); 
```

如果你*不*使用`MULTILINE`，你需要对 使用*积极*的前瞻和后瞻`\n`，并且正则表达式会变得复杂以匹配第一行，如果最后没有`\n`，则匹配最后一行，例如如果我们的输入是：`=test=\n=test=\n=test=\n=test=`。

```
String pattern = "(?<=(^|\n))=(.+)=(?=(\n|$))";
content = str.replaceAll(pattern, "<size:large>$2</size:large>"); 
```

在这种模式中，我们为后视提供选项：`\n` *或*输入的开头，`(^|\n)`; 对于前瞻：`\n` *或*输入结束，`(\n|$)`. *请注意，由于第一个or*`$2`引入的组，我们需要在替换中用作捕获的组引用。

 *我们可以通过在非捕获组中的前瞻/后视中引入替代方案来使模式更加复杂，如下所示`(?:)`：

```
String pattern = "(?<=(?:^|\n))=(.+)=(?=(?:\n|$))";
content = str.replaceAll(pattern, "<size:large>$1</size:large>"); 
```

现在我们回到`$1`在替换中使用作为捕获组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T16:36:53.267

在 Java 中，String 对象`\n`不被视为行首或行尾。这是一个换行符。为了匹配这一点，您需要将代码更改为

```
String content = "test\n=test=\ntest";
content = content.replaceAll("\n=(.+)=\n", "\n<size:large>$1</size:large>\n"); 
```

什么`^`和`$`匹配，是字符串对象本身的开始和结束。

如果您正在从文件中读取，则换行符可能是 CRLF 字符，在这种情况下您也想匹配`\r`。在这种情况下，您需要使用这样的正则表达式

```
content = content.replaceAll("[\n\r]=(.+)=[\n\r]", "\n<size:large>$1</size:large>\n"); 
```

如果您需要匹配以在同一字符串中的多个“行”中的多个实例中工作，则应首先将字符串拆分为多行。

```
String content = "test\n=test=\n=test=\ntest";
String[] pieces = content.split("[\r\n]");
StringBuilder replaced = new StringBuilder();

for (int i=0; i<pieces.length; i++) {
    String piece = pieces[i].replaceAll("^=(.+)=$", "<size:large>$1</size:large>");
    replaced.append(piece);
    replaced.append('\n');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T16:33:40.433

好吧，正如您已经说过的，这是正则表达式的开始/结束标记的问题。`^`不是一行的开头，而是整个字符串的开头，同样`$`是整个字符串的结尾。

尝试更改表达式：`^.*=(.+)=.*$`或忽略这些标记：`=(.+)=`

要匹配行的开头，您可以使用：`(?:^|\n)=(.*)=`. 从我在纯 Java 中的测试来看，似乎无法识别尾随换行符，但在 Android 中可能会有所不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T16:53:46.587

好的，我想我有一个答案......这似乎有效：

```
content = content.replaceAll("(?<!.)=(.+)=(?!.)", "<size:large>$1</size:large>") 
```

不是吗？

编辑：以上不起作用，由于某种原因，它复制了原始文本并将其放在替换文本之后......这是最终起作用的：

```
content = content.replaceAll("(?<=(\n|^))=(.+)=(?=(\n|$))", "<size:large>$2</size:large>"); 
```*

# sql-server - SQL Server NULLS：重复表中的最后一个已知值

> ID：12077532
> 
> 赞同：1
> 
> 时间：2012-08-22T16:30:36.240
> 
> 标签：sql-server, duplicates, isnull

我需要一些建议。

我在特定时间段的字段中有一个包含空值的列。

```
Name     Date
-----    -----
Cat      1/1/2012
Dog      1/2/2012
Fish     1/3/2012
NULL     1/4/2012
Goat     1/5/2012
NULL     1/6/2012
Sheep    1/7/2012 
```

在上面的示例中，当列中有空值时，我将如何编写 SQL 语句来选择列 Name 的最后一个已知值？

例如，我希望表格看起来像这样：

```
Name      Date
-----    -----
Cat        1/1/2012
Dog        1/2/2012
Fish       1/3/2012
Fish       1/4/2012
Goat       1/5/2012
Goat       1/6/2012
Sheep      1/7/2012 
```

* * *

这个伪代码会起作用吗？

```
Select 
isnull(Name, "Select Name from Table where Date = GetDate() - 1")
,Date
From Table 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:49:04.073

试试这个 [v 是原始的，v2 是计算出的新值]：

```
DECLARE @table table(v varchar(10), d varchar(10))
INSERT INTO @table 
SELECT 'Cat','1/1/2012' UNION
SELECT 'Dog','1/2/2012' UNION
SELECT 'Fish','1/3/2012' UNION
SELECT NULL,'1/4/2012' UNION
SELECT 'Goat','1/5/2012' UNION
SELECT NULL,'1/6/2012' UNION
SELECT 'Sheep','1/7/2012'

SELECT A.v, A.d, ISNULL(A.v,B.v) V2
FROM @table A
OUTER APPLY (   SELECT TOP 1 *
                FROM @table 
                WHERE d < A.d
                AND v IS NOT NULL
                ORDER BY d desc) B
order by d 
```

# xcode - 在 xc4.dp4 中打开工作区后 Xcode 4.3.3 持续崩溃

> ID：12077534
> 
> 赞同：0
> 
> 时间：2012-08-22T16:30:39.157
> 
> 标签：xcode, xcode4.3

Lion、Xcode 4.3.3 和 vex 代码 4.5 dp4

在创建一个新的本地 git 分支以专门避免此类问题后，在另一个分支中使用 xcode 4.5pd4 打开后，我无法使用 xcode 4.3.3 打开关键生产工作区。我还尝试再次从原点克隆，因为自从在 4.5 中打开工作区后我还没有推送到远程，但我也无法打开该版本的工作区。不管我做什么，Xcode 4.3.3 在启动后很快就会崩溃。我可以做些什么来重置、删除首选项，以使 4.3.3 再次运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:59:17.777

提交此以完成目的

我不得不无意中在不正确的分支上打开了工作区；这是唯一有意义的事情。我注意到在 4.5 下再次打开它后，我所有的 xib 在 IB 中都默认为不正确的兼容性，并且在使用当前工具版本手动将它们全部调整为正确的值并确保没有设置为使用新的功能（即由于 NDA 的目的，我没有在这里命名）我再次能够在 4.3.3 和 4.4 下打开工作区。

# c# - IIS - 400 错误请求 - 令人惊讶的奇怪 url 模式工作.. 或不，像随机

> ID：12077535
> 
> 赞同：0
> 
> 时间：2012-08-22T16:30:44.050
> 
> 标签：c#, http, iis, configuration

很确定这是一个 IIS 配置问题，因为它在我们的本地开发和测试环境中有效，但在生产环境中无效。虽然无法找到配置问题，因此提出了这个问题。

这是有问题的服务方法

```
 [WebInvoke(UriTemplate = "GetSpecificData/{type}/{id}/{categories}", Method = "POST", ResponseFormat = WebMessageFormat.Json)]
    [OperationContract]
    string GetSpecificData(string id, string type, string categories); 
```

例如，我们用这个 url 调用它：

*/Services/MapService.svc/GetSpecificData/Office/18.029788,59.332478/0*

在生产中，它会立即导致 http 状态 400 和来自服务器的“错误请求”。在本地和我们的测试环境中，它工作得很好。

我们认为问题与 ID 部分有关。如果我们将其更改为几乎任何其他内容，无论差异多么小，它似乎都有效。这里有些例子

不起作用：*18.029788,59.332478*

作品

*   19.029788,59.332478 作品
*   28.029788,59.332478 作品
*   18.129788,59.332478 作品
*   18.029788,59.432478 作品
*   18.029788,59.asdfasd332478
*   18.asdf029788,59.332478

不起作用：16.163657,60.146846

作品

*   16.263657,60.146846
*   16.363657,60.146846
*   16.463657,60.146846
*   16.563657,60.146846
*   16.663657,60.146846
*   16.163657,60.246846
*   16.363657adsfasdfasdfasdf,60.146846asdfasdfasdfa

在我们寻找答案和缩小范围的过程中，我们得出了一些结论

*   HTTP 或 HTTPS 无关紧要
*   没有 ISA 或 FW 导致它
*   url 中的奇怪字符（如逗号或点..）不是问题
*   请求的长度不是问题，它可以更长（260个字符）

拜托，拜托，希望有人对这可能是什么有想法。它让我发疯没有弄清楚。显然有办法通过重写服务以获取查询参数或类似的方法来解决问题，但我真的很想了解导致这个问题的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:58:35.150

显然“400 Bad request”并不意味着 IIS 拒绝了进入您的应用程序的请求（就像我们认为的那样）。我们设法在生产机器上设置了一个跟踪，最后发现它确实输入了代码，并且有一个 LINQ OrderBy 使用了一个有时为空的字段。所以最后一个简单的 NullReference ......

# sql - 如何在 ROW_NUMBER() OVER 中对日期时间进行排序（ ORDER BY 子句

> ID：12077538
> 
> 赞同：4
> 
> 时间：2012-08-22T16:30:58.840
> 
> 标签：sql, sql-server-2005

嗨，下面的查询是一个更大的复杂查询的原型问题是我应该能够根据用户输入以任何顺序（即 ASC 和 DESC）对任何列进行排序。

```
CREATE table #Table1(
Name varchar(10) PRIMARY key,
DOB DateTime,
Rate numeric(10,2)  
)

INSERT INTO #Table1 (Name,DOB,Rate) values ('Name1','2/2/2012',10.23)
INSERT INTO #Table1 (Name,DOB,Rate) values ('Name2','3/2/2012',120.23)
INSERT INTO #Table1 (Name,DOB,Rate) values ('Name3','4/2/2012',110.23)
INSERT INTO #Table1 (Name,DOB,Rate) values ('Name4','5/2/2012',140.23)
INSERT INTO #Table1 (Name,DOB,Rate) values ('Name15','6/2/2012',130.23)
INSERT INTO #Table1 (Name,DOB,Rate) values ('Name6','2/21/2012',1120.23)

Declare @SortColumn varchar(10)
DECLARE @SortExpression varchar (10)

SET @SortColumn = 'DOB'
SET @SortExpression = 'DESC' -- Need to sort in both ASC and DESC

Select 
            Name,
            DOB,
            Rate,
            ROW_NUMBER() OVER 
                (ORDER BY 
                    CASE WHEN @SortColumn = 'Name' then Name
                         WHEN @SortColumn = 'DOB' THEN DOB
                         WHEN @SortColumn = 'Rate' THEN Rate
                    END  +  @SortExpression 
                ) AS RowNumber  
                FROM 
                #Table1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:43:35.723

看起来你需要`CAST()`和`CONVERT()`中的项目`CASE`才能让它工作：

```
Declare @SortColumn varchar(10)
DECLARE @SortExpression varchar (10)

SET @SortColumn = 'DOB'
SET @SortExpression = 'DESC' -- Need to sort in both ASC and DESC

Select 
   Name,
   DOB,
   Rate,
   ROW_NUMBER() OVER 
   (ORDER BY 
       CASE WHEN @SortColumn = 'Name' then Name
            WHEN @SortColumn = 'DOB' THEN convert(char(10), DOB, 120)
            WHEN @SortColumn = 'Rate' THEN Cast(Rate as varchar(10))
       END  ASC
    ) AS RowNumberASC,
    ROW_NUMBER() OVER 
    (ORDER BY 
       CASE WHEN @SortColumn = 'Name' then Name
            WHEN @SortColumn = 'DOB' THEN convert(char(10), DOB, 120)
            WHEN @SortColumn = 'Rate' THEN Cast(Rate as varchar(10))
      END DESC
    ) AS RowNumberDESC
FROM Table1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/05127/27)

正如@Martin 指出的那样，`ASC`,`DESC`不能被参数化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:57:29.147

如果需要在`ASC`和`DESC`动态之间切换，则必须使用动态语句。
SQL Fiddle[在这里](http://www.sqlfiddle.com/#!3/351e53/1)。注意[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)！

```
EXECUTE(' SELECT Name, DOB, Rate,'
      + ' ROW_NUMBER() OVER( ORDER BY ' + @SortColumn + ' ' + @SortExpression
      + ' ) AS RowNumber'
      + ' FROM Table1'); 
```

如果您的查询很复杂，请考虑将其放入视图中并从该视图中进行选择以允许在编译时检查该部分。

# php - php 短代码到 jquery

> ID：12077539
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:06.117
> 
> 标签：php, javascript, jquery, wordpress, prepend

我有一个基于 Wordpress 的网站，其中一些内容是通过 javascript 加载的。例如：

```
jQuery(".portfolio-fs-slides").css({"display":"none"}).prepend('<div class="portfolio-fs-          slide current-slide portfolio-ppreview"><div class="project-coverslide"></div><div id="content" class="content-projectc contenttextwhite"></div></div>'); 
```

我想要做的是附加这个短代码： `<?php echo do_shortcode('[daisy]'); ?>`

但据我所知，实际上不可能在 javascript 中附加 php 代码。有什么解决方法可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:02:09.507

正如@Bergi 提到的，PHP 将运行在服务器端，而 JS 将运行在客户端。您可以通过 PHP 输出 JS（或您的 JS 的一部分）并让它在客户端运行，例如

```
<script>
    // extra code here
    jQuery(".portfolio-fs-slides").css({"display":"none"}).prepend('<div class="portfolio-fs-          slide current-slide portfolio-ppreview"><div class="project-coverslide"></div><div id="content" class="content-projectc contenttextwhite"></div></div>'); 
    <?php echo 'we can output valid js here' ?>
    // more code here
</script> 
```

一种思考方式是，由于 PHP 运行在服务器端，它总是会在 JS 被解析之前运行。

换句话说，你可以有这样的 javascript 行：

```
console.log(<?php echo $someVariable ?>); 
```

# ios - 堆栈中的iOS模式视图dissmiss

> ID：12077543
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:17.813
> 
> 标签：ios, views, stack, modal-dialog

我有以下问题：

我有一个故事板，其中包含三个带有 UIViewController 类的视图。我不使用序列，除了初始视图（称为视图 A）之外，所有其他视图都是使用 presentViewController 方法以编程方式创建的。我遇到的问题是，当A用presentViewController打开B，然后B用presentViewController打开C时，当我用dismissViewControllerAnimated解除C时（在C中有一个带有Outlet到C UIViewController的按钮，在self上调用dismissViewControllerAnimated），C View消失，B出现但仅持续 0.1 秒，然后我再次显示 C 视图，之后关闭按钮将不再起作用。

知道可能是什么原因吗？

最好的问候爱丁

* * *

```
//delegate definition used between controller A/B and B/C
@protocol ParentControllerDelegate <NSObject>

//called as delegate method from B on A and from C on B to dismiss B from A and C from B
- (void)dismissView:(UIViewController*)controller;

@end

// MainMenuViewController.h which is controller A
@interface MainMenuViewController : UIViewController <ParentControllerDelegate>

//Controller B property
@property (strong, nonatomic) ChooseLevelViewController *chooseLevelViewController;
//button to open controller B
@property (weak, nonatomic) IBOutlet UIButton *chooseLevelBtn;

@end

//MainMenuViewController.m - Controller A
@implementation MainMenuViewController

//called to present chooseLevelViewController which is controller B
- (IBAction)chooseLevelPressed:(id)sender
{
    if(self.chooseLevelViewController == nil)
    {
        self.chooseLevelViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ChooseLevelView"];
        self.chooseLevelViewController.parentControllerDelegate = self;
    }
    [self presentViewController:self.chooseLevelViewController animated:YES completion:nil];
}

//called from controller B over delegate mechanism to dismiss B
- (void)dismissView
{
    [self.chooseLevelViewController dismissViewControllerAnimated:YES completion:nil];
}
@end

// ChooseLevelViewController.h which is controller B
@interface ChooseLevelViewController : UIViewController <ParentControllerDelegate>

//Controller A as delegate
@property (assign, nonatomic) id <ParentControllerDelegate> parentControllerDelegate;
//Controller C property
@property (strong, nonatomic) ChoosePlayerViewController *choosePlayerViewController;
//button to dismiss B over delegate A
@property (weak, nonatomic) IBOutlet UIButton *backMainBtn;
//button to open C
@property (weak, nonatomic) IBOutlet UIButton *choosePlayerBtn;

@end

//MainMenuViewController.m - controller B
@implementation ChooseLevelViewController

//calling controller A as delegate to dismiss B
- (IBAction)backMainBtnPressed:(id)sender
{
    [self.parentControllerDelegate dismissView];
}

//presenting choosePlayerViewController which is controller C
- (IBAction)choosePlayerBtnPressed:(id)sender
{
    if(self.choosePlayerViewController == nil)
    {
        self.choosePlayerViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ChoosePlayerView"];
        self.choosePlayerViewController.parentControllerDelegate = self;
    }
    [self presentViewController:self.choosePlayerViewController animated:YES completion:nil];
}

//called from controller C over delegate mechanism to dismiss C
- (void)dismissView:(UIViewController*)controller
{
    [self.choosePlayerViewController dismissViewControllerAnimated:YES completion:nil];
}
@end

//ChoosePlayerViewController.h which is controller C
@interface ChoosePlayerViewController : UIViewController

//Controller B as delegate
@property (assign, nonatomic) id <ParentControllerDelegate> parentControllerDelegate;
//button to dismiss C over delegate B
@property (weak, nonatomic) IBOutlet UIButton *closeBtn;

@end

@implementation ChoosePlayerViewController

//calling controller B as delegate to dismiss C
- (IBAction)closeBtnPressed:(id)sender
{
    [self.parentControllerDelegate dismissView];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:42:54.400

你永远不应该有一个自我解散的观点。您应该始终让父视图解雇孩子。

*   B 应该解雇 C
*   A应该解雇B

查看[http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW14](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW14) 了解更多信息。

![在此处输入图像描述](../Images/9c06ef276ac5225d43b987c9e0b4bda4.png)

# c# - 从元素中检索日期到字符串中，然后从日期中检索年份

> ID：12077545
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:23.073
> 
> 标签：c#, xml

我有一个我写的从节点中提取日期的方法：

```
strRemoveByDate = element.SelectSingleNode("Date_Removed").InnerText 
```

这给了我“2012-01-01”或任何情况。

现在我只需要抓住年份。我尝试使用子字符串，但它不起作用：

```
String strYear = strRemoveByDate.Substring(0,4); 
```

我需要在这里做什么？

编辑:: 向斯基特先生道歉。我不想显得粗鲁。我很感激我能得到的任何帮助。“它不起作用”是指：

我尝试从字符串中仅解析年份的四位数字。什么都没发生。我进入我在 VS 中处理的页面，向 var strYear 添加一个快速监视，它说'strYear 在当前上下文中不存在'。没有任何内容被读入 strYear。

编辑2：原来这里发生了一些奇怪的事情......我尝试了所有这些解决方案，但都没有工作（等等......我会详细说明）。非常奇怪的行为。所以在我写的方法中，我把声明

```
String nonsenseString = "nonsense"; 
```

而 IDE 甚至没有接受它。所以.....看起来我的整体问题是我什至不能声明一个字符串，无论我如何尝试......

从那以后，我关闭并重新打开了页面，关闭了 IDE 并重新启动它，并关闭了我的工作站并重新启动它。

徒劳无功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:36:57.517

```
DateTime getyear = DateTime.Parse(strRemoveByDate);
String strYear =getyear.year.ToString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:37:07.677

`int year = DateTime.ParseExact("2012-01-01", "yyyy-MM-dd", CultureInfo.CurrentCulture).Year;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:33:46.303

你可以做：

```
String strYear = strRemoveByDate.Split('-')[0]; 
```

将第一部分拆分为`-`

# jquery - 未调用 jquery 类操作，如果设置 div 数据来自 POST

> ID：12077548
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:30.853
> 
> 标签：jquery, class, http-post

我正在发布并获取数据以设置为 text_div：

```
<div id="text_div">
    {{file.text|safe}}
</div>

$.ajax({
    ...
    success: function(data){
        $("#text_div").html(data);
    }
}); 
```

text_div 有如下段落：

```
<p>xxx <a title="FOO" class="bar" href="#">foo</a> xxx xxx. </p> 
```

返回数据可以是html，但不能调用链接动作。

```
$("a.bar").click(function(){
    alert('xxx');
}); 
```

奇怪的是，如果我用链接模式设置一个堆栈段落，就可以调用类动作。我通过 chrome 工具检查元素，静态段落与从 POST 请求获得的数据相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:36:40.480

```
$("a.bar").click(function(){
    alert('xxx');
}); 
```

不起作用，因为您正在动态插入它。您需要使用以下[`.on()`](http://api.jquery.com/on/)函数绑定点击事件：

```
$("#text_div").on('click', 'a.bar', function(){
    alert('xxx');
}); 
```

# java - MediaPlayer OnClicListener 在开始播放新的时停止

> ID：12077549
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:33.583
> 
> 标签：java, android, media-player

我正在做一个音板应用程序，这是我必须修复的最后一件事，感谢您的帮助！我希望声音停止，然后我点击一个新的。

```
package com.passaros;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;

import com.google.ads.AdRequest;    
import com.google.ads.AdView;
import com.murdersquirrel.newboard.R;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;    
import android.webkit.WebView;
import android.widget.Button;
import android.widget.Toast;

public class newBoard extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    Toast.makeText(this, "Long touch to save as Ringtones.", Toast.LENGTH_LONG).show();

    AdView layout = (AdView)this.findViewById(R.id.adView);

    AdRequest adRequest = new AdRequest();
    adRequest.setTesting(true);

    layout.loadAd(adRequest);

    final MediaPlayer sound01 = MediaPlayer.create(this, R.raw.sound01);
    final MediaPlayer sound02 = MediaPlayer.create(this, R.raw.sound02);
//more and more....

    Button s01 = (Button) findViewById(R.id.button01); 
    s01.setText(this.getString(R.string.quote01));
    s01.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                sound01.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            sound01.start();                
            }

    });
    registerForContextMenu(s01); 
```

再次感谢！

忽略这一点：我只是在输入一些东西，因为网站认为我没有使用足够的词来帮助编写代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:35:15.133

尝试这个 .....

```
public void onClick(View v) {
            try {
                sound01.prepare();
                sound01.start();    // Place your start() in try block.

            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:00:27.093

尝试做一个简单的方法来检查声音是否正在播放，如果为真，则停止声音并允许播放新声音？

此外，它可以帮助您只使用一个媒体播放器，因为您可以切换正在播放的声音。

# ios - 如何制作可重用的 UIView

> ID：12077552
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:47.457
> 
> 标签：ios, cocoa-touch, uiview

所以我想制作一个里面有一个图像和两个文本标签的 UIView，但我想在故事板上制作它并使其可重用，因为它们会出现在其他情况下。

制作非侵入式自定义 UIView 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:56:04.437

因此，对于情节提要，您仍然需要使用 .xib。我使用故事板，但没有找到其他方法来制作自定义 UIView。

*   在 xCode 中创建一个新视图并删除视图控制器。
*   在工作区中绘制一个 UIView
*   设置标识符并将其绑定到您的 UIView 类。
*   添加你的文本框，什么不是。
*   保存新创建的 .xib
*   将您的自定义视图调用到您的代码中

这是一步一步的过程的更多细节。[http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/](http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/)

# ruby-on-rails - 在字母表中显示按字母顺序排序的 AR 对象数组

> ID：12077553
> 
> 赞同：0
> 
> 时间：2012-08-22T16:31:48.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个 AR 对象数组，我已经能够按字母顺序排序，我需要按字母拆分，例如 { :a => [apple], :b => [banana] } 等等，基于我用于排序的属性。最终结果应该类似于

```
<ul>
  <li>A</li>
  <ul>
    <li> Apple </li>
  </ul>
  <li>B</li>
  <ul>
    <li> Banana </li> 
```

等等。我不知道该怎么做......数组已经使用数据库按字母顺序排序。

有人能帮我吗？ngw

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:39:15.637

```
objects.group_by { |obj| obj.name[0].to_sym } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:07:50.897

您可以将其放入助手中：

```
def my_objects_in_groups_by_first_letters(objects, name_method, &block)
  first_letters = objects.map {|o| o.send(name_method)[0, 1].upcase}.uniq
  first_letters.each do |c|
    yield c, objects.select {|o| o.send(name_method)[0, 1].upcase == c}
  end
end 
```

并在视图中使用此方法：

```
<ul>
  <% my_objects_in_groups_by_first_letters(@objects, :name) do |letter, objects| -%>
    <li>
      <%= letter %>
      <ul>
        <% objects.each do |o| -%>
          <li><%= o.name %></li>
        <% end -%>
      </ul>
    </li>
  <% end -%>
</ul> 
```

# jquery - 可主题化的 jquery UI 下拉菜单

> ID：12077558
> 
> 赞同：4
> 
> 时间：2012-08-22T16:32:00.400
> 
> 标签：jquery, jquery-ui

我正在寻找一个可以使用 jQuery UI 主题的 jQuery 下拉菜单。在[http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html)有一些示例，但现在 jQuery UI 1.8 不支持这些示例

还有什么我可以轻松使用的东西还是我需要创建自己的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T16:59:08.850

[想到](http://ivaynberg.github.com/select2/)[选择](http://harvesthq.github.com/chosen/)和选择2

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T17:01:29.010

自动完成小部件有一个使用他们所谓的组合框的示例，该组合框本质上是一个主题下拉菜单。

[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

您应该能够获取提供的源并对其进行修改以使用正常的`<select>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T11:10:43.853

似乎至少现在在 1.11.4 中支持 selectmenu

[https://jqueryui.com/selectmenu/](https://jqueryui.com/selectmenu/)

# facebook - 如何使用 FQL 获取 music.listens 数据

> ID：12077562
> 
> 赞同：0
> 
> 时间：2012-08-22T16:32:16.130
> 
> 标签：facebook, facebook-fql, spotify

我想将 spotify 数据集成到我在 Facebook 上发布的应用程序中。

我通过[https://developers.facebook.com/tools/explorer?method=GET&path=me%2Fmusic.listens](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Fmusic.listens)尝试使用 Graph API Explorer 。

为了获得有关单个音乐的简要信息，需要很长时间。

所以任何人都可以帮助在 FQL 中继续这个功能..

问候

拉贾潘迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:29:57.307

AFAIK 你不能使用 FQL 做到这一点。
您需要使用 Graph API 并拥有 user_actions.music 和 friends_actions.music 权限。
然后你可以做 - graph.facebook.com/USER_ID/music.listens?access_token=

# python - 在 CPython 中嵌入 Pig

> ID：12077566
> 
> 赞同：1
> 
> 时间：2012-08-22T16:32:27.753
> 
> 标签：python, hadoop, apache-pig

有谁知道在 cpython 脚本中嵌入 pig 的方法，类似于 RDBMS 可用的方法？我搜索了，但没有运气。

我宁愿不使用 Jython，因为我正在尝试使用 jython 中不可用的各种 cpython 库来处理数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T03:02:44.237

If by "similar to what is available for RDBMS" you mean an API, you could build out an object model using subprocess. I have used something like the following in the past.

```
import subprocess
from subprocess import Popen, PIPE

def execute(command):
    print command + "\n"
    p = subprocess.Popen(command, stdout=subprocess.PIPE, shell=True)
    stdout, stderr = p.communicate()
    print stdout
    return p.returncode

command = "pig.9 -p input=" + input + "/* -p output=" + output + " -f my.pig"
execute(command) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T17:58:30.193

最近在 Pig 0.12 中添加了对 CPython 的支持：http: [//blog.mortardata.com/post/62334142398/hadoop-python-pig-trunk](http://blog.mortardata.com/post/62334142398/hadoop-python-pig-trunk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T23:47:18.850

Jython 似乎是最受欢迎的选项，例如[此处](http://ofps.oreilly.com/titles/9781449302641/embedding.html)、[此处](https://cwiki.apache.org/confluence/display/PIG/UDFsUsingScriptingLanguages)和[此处](http://pig.apache.org/docs/r0.8.1/udf.html#Python+UDFs)，但您可能会发现[此](https://stackoverflow.com/questions/6622397/using-pig-and-python)线程很有帮助，尽管它也专注于 Jython。似乎通过 Python 对 UDF 的关注显然是在 Jython 上，所以除非您绝对需要 CPython 库，否则您可以考虑硬着头皮继续使用它。另一件需要考虑的事情是，Jython 2.7 版（[来源](http://fwierzbicki.blogspot.com/2012/05/on-behalf-of-jython-development-team-im.html)）已经成熟，尽管这对于您的需求可能不切实际。

# symfony - Symfony 2 BDD Behat 上下文“我没有登录”

> ID：12077567
> 
> 赞同：3
> 
> 时间：2012-08-22T16:32:40.827
> 
> 标签：symfony, bdd, behat

如何手动确保用户未在 BDD Behat 场景中登录我的 FeatureContext 类？例如我有这种情况：

```
Scenario: passing wrong values will not get me in
Given I am on "/login"
And I am not logged in
When I fill in "login" with "KtokolwiekWidzialKtokolwiekWie"
When I fill in "password" with "root_as_allways"
When I press "Login"
Then I should be on "/"
And I should see "Wrong login or password" 
```

我已经定义了这个上下文：

```
/**
 * @Given /^I am not logged in$/
 */
public function iAmNotLoggedIn()
{
    # logout currently login user, if any
    $request = $this->kernel->getContainer()->get('request');
    $request->getSession()->invalidate();
} 
```

但这在运行此功能测试时给了我一个错误。

> 您不能创建非活动范围（“请求”）的服务（“请求”）。

**注意：**我使用的是 Symfony 2.1 RC-1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T17:37:03.237

Here's the custom step you can use:

```
/**
 * @Given /^I am not logged in$/
 */
public function iAmNotLoggedIn()
{
    $this->getMink()
        ->getSession()
        ->visit($this->locatePath('/logout'))
    ;
} 
```

But you probably need to update your steps order:

```
Given I am not logged in
  And I am on "/login" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:00:08.140

只需访问“/logout”，您将被注销。在转到“/login”之前执行此操作

# html - 如何在 CSS 注释中使用 LESS 变量？

> ID：12077569
> 
> 赞同：6
> 
> 时间：2012-08-22T16:32:45.633
> 
> 标签：html, css, less

是否可以在 CSS 注释中为 mixins 使用 LESS 变量？我需要它来进行精灵。

例如（不工作/只有图像路径被替换）：

```
.sprite (@width) {
    /** sprite: sprite-@{width}; sprite-image: url('../img/@{width}/sprite-@{width}.png'); sprite-layout: vertical */

    .picture {
        background-image: url('../img/@{width}/picture.png'); /** sprite-ref: sprite-@{width}; */
    }
}

.sprite(800); 
```

额外的问题：我可以在使用lessc编译后防止背景图像和精灵评论之间的换行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:09:41.210

不，你不能在评论中做变量。

添加被浏览器忽略的属性“评论”怎么样。

您可以尝试使用转义字符串，例如

```
prop: ~"url('blah'); /* comment */"; 
```

但它会产生 2 个分号（有效的 CSS），而且非常 hacky。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T07:15:02.303

我偶然发现了这个问题，因为我想将自动语义注释输入 Kentico（一个 .NET CMS）。因为接受的答案似乎有点不满意，所以我自己尝试了一些东西，并设法以某种方式产生了更好的解决方案。也许这是由于从那时起 less 语法的变化......

```
// DEFINITIONS
@A:   (~"A Standard");
@X-1: (~"1 General");

// BASIC DEFINITIONS
@start: (~"/*# ");
@end:   (~" #*/");
@sep:    (~" / ");

// FORMULA
@{start} @{A} @{sep} @{X-1} @{end}
* { text-decoration: none; } 
```

那么输出是：

```
/*# A Standard / 1 General #*/ * {
     text-decoration: none;
} 
```

唯一困扰我的是评论后缺少的新行。不幸的是，我正在使用无法评估 js 函数的无点编译器。我在最后添加了一个空评论，这对我有用。

如果您使用浏览器版本，您可以使用以下变量插入新行：

```
@nl: (~`"\n"`) 
```

...导致：

```
@{start} @{A} @{sep} @{X-1} @{end} @{nl} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-08T04:43:39.330

## 我有一个很好的解决方案：

创建一个文件并命名它`start-comment.css`，在文件中添加这个内容`/*`，然后创建另一个文件`end-comment.css`，在里面只添加这个`*/`，最后创建另一个文件`description.txt`，例如在那里，在评论中添加你想要的所有内容，现在在你的`.less`文件中添加下一个代码：

```
@import (inline) "start-comment.css";
@import (inline) "description.txt";
@import (inline) "end-comment.css"; 
```

最后你会得到这样的东西：

```
/*
(The content that i add in my text file)
*/ 
```

# ruby-on-rails-3 - rails heroku查询帮助PGError：错误：运算符不存在：整数~~未知

> ID：12077574
> 
> 赞同：0
> 
> 时间：2012-08-22T16:32:51.243
> 
> 标签：ruby-on-rails-3, activerecord, heroku

我在heroku中部署了一个带有ruby 1.9.3的rails 3.2.8，本地查询将所有书籍显示为结果或没有，而在heroku中它只显示以下错误。

```
Started GET "/books/advanced_search?utf8=%E2%9C%93&title=elinor&author=&isbn=&commit=Search" for 157.253.204.87 at 2012-08-22 15:38:03 +0000

Parameters: {"utf8"=>"✓", "title"=>"elinor", "author"=>"", "isbn"=>"", "commit"=>"Search"}
Processing by BooksController#advanced_search as HTML
Rendered books/advanced_search.html.erb within layouts/application (24.0ms)
Completed 500 Internal Server Error in 25ms

ActionView::Template::Error (PGError: ERROR:  operator does not exist: integer ~~ unknown
LINE 1: ...tle LIKE '%elinor%' and author LIKE '%%' and isbn LIKE '%%')

HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

我试图通过标题（字符串）、作者（文本）和 isbn（整数）在我的迷你目录中查找书籍，其中任何一个或全部。

这是我的查询：

```
@books = Book.paginate(
      page: params[:page], per_page: 10,
      :conditions => ['
                    title like ? ||
                    author like ?  ||
                    isbn like ?',
          { :title => "%#{params[:title]}%",
            :author => "%#{params[:author]}%",
            :isbn => params[:isbn].to_i
          }
      ]
  ) 
```

继承人的模型：

```
class Book < ActiveRecord::Base
  attr_accessible :author, :isbn, :title, :description
  has_many :reviews, dependent: :destroy
  has_many :ratings, dependent: :destroy

  validates :author,      presence: true
  validates :description, presence: true
  validates :isbn,        presence: true
  validates :title,       presence: true

end 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:26:32.257

事实证明，错误发生是因为数据库不喜欢整数查询！

# mysql - MySQL 按月汇总并运行总计

> ID：12077575
> 
> 赞同：5
> 
> 时间：2012-08-22T16:32:53.043
> 
> 标签：mysql

> **可能重复：**
> [在 MySQL 中计算运行总计](https://stackoverflow.com/questions/664700/calculate-a-running-total-in-mysql)

我正在监控自 2011 年以来在应用程序中创建的用户数量，以使用 MySQL 和 PHP 制作图表。作为查询的一部分，我还想包括一个运行总计。

```
SELECT
  DATE_FORMAT(created,'%Y%m%d') as 'Date',
  COUNT(item_id) as 'NewUsers'
FROM AP_user
WHERE YEAR(created) > 2011
  AND user_groups = '63655'
  AND user_active = 1
  AND userID NOT IN $excludedUsers
GROUP BY MONTH(created) ASC 
```

我能够返回“按月计算的用户”，但如何将运行总计作为此查询的一部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T18:45:22.423

不幸的是，MySQL 没有像 Oracle 和 SQL Server 那样提供分析功能。

获得“运行总数”的一种方法是使用用户变量，如下所示：

```
 SELECT t.Date
       , t.NewUsers
       , @rt := @rt + t.NewUsers AS `Running Total`
    FROM (SELECT @rt := 0) i
    JOIN (
           SELECT DATE_FORMAT(created,'%Y%m%d') AS `Date`
                , COUNT(item_id) as `NewUsers`
             FROM AP_user
            WHERE YEAR(created) > 2011
              AND user_groups = '63655'
              AND user_active = 1
              AND userID NOT IN $excludedUsers
            GROUP BY DATE_FORMAT(created,'%Y-%m')
            ORDER BY DATE_FORMAT(created,'%Y-%m') ASC
         ) t 
```

注意：在这种情况下，不能保证上面使用的内存变量的行为。但是，如果我们小心查询，我们可以在 SELECT 语句中获得可预测、可重复的结果。内存变量的行为可能会在未来的版本中发生变化，从而使这种方法不可行。

注意：我基本上将您的查询包装在括号中，并给它一个别名作为内联视图（MySQL 称之为“派生表”）。我对您的查询进行了一些更改，您的 GROUP BY 有可能将 2012 年 1 月与 2013 年的 1 月组合在一起，我改变了这一点。我还添加了一个 ORDER BY 子句。

# python - Python 2 - 我如何使用“或”？

> ID：12077577
> 
> 赞同：1
> 
> 时间：2012-08-22T16:33:03.417
> 
> 标签：python

我对python真的很陌生，我刚刚做了一个小程序。如果您输入“Hello”或“hello”，它会说“working”，如果您输入其他任何内容，它会说“not working”。这是我到目前为止的代码：

```
print "Type in 'Hello'"
typed = raw_input("> ")
if (typed) == "Hello" or "hello":
   print "Working"
else:
    print "not working" 
```

代码不工作，无论我提交什么，它总是说“工作”，即使我输入“jsdfhsdkfsdhjk”。如果我取出“或”和“你好”，它确实有效，但我想检查两者。我怎样才能使脚本工作？

非常感谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T16:35:52.393

您正在检查是否`typed`等于`"Hello"`OR，如果`"hello"`作为*独立*表达式的计算结果为 true（它确实如此）。您不必链接多个值来检查原始变量。如果你想检查一个表达式是否等于不同的东西，你必须重复它：

```
if typed == 'Hello' or typed == 'hello': 
```

或者，类似：

```
if typed in ['Hello', 'hello']: # check if typed exists in array 
```

或者，像这样：

```
if typed.lower() == 'hello': # now this is case insensitive. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:34:30.627

`if (typed) == "Hello" or "hello":`应该`if typed == "Hello" or typed == "hello":`

目前的问题是`or`应该分开两个问题。它不能用于将同一问题的两个答案分开（我认为这是您期望的）。

因此 python 尝试将“你好”解释为一个问题，并将其转换为真/假值。碰巧“hello”转换为`true`（您可以查找原因）。所以你的代码真的说“if something or TRUE”，它总是`true`，所以总是输出“工作”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T16:35:58.913

您可能想尝试转换`typed`为小写，因此您只需检查一件事。如果他们输入“HELLO”怎么办？

```
typed = raw_input("> ")
if typed.lower() == "hello":
    print "Working"
else:
    print "not working" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T16:36:35.820

`or`( 和)两边的表达式`and`彼此独立计算。因此，右侧的表达式不共享左侧的“==”。

如果您想针对多种可能性进行测试，您可以这样做

```
typed == 'Hello' or typed == 'hello' 
```

（正如 Hbcdev 建议的那样），或使用`in`运算符：

```
typed in ('Hello', 'hello') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T16:36:47.317

你可以通过两种方式做到这一点（至少）

```
print "Type in 'Hello'"
typed = raw_input("> ")
if typed == "Hello" or typed == "hello":
   print "Working"
else:
    print "not working" 
```

或使用`in`

```
print "Type in 'Hello'"
typed = raw_input("> ")
if typed in ("Hello","hello",):
   print "Working"
else:
    print "not working" 
```

# r - 你如何使用 rugarch 包来包含稳定的发行版

> ID：12077584
> 
> 赞同：0
> 
> 时间：2012-08-14T14:18:48.530
> 
> 标签：r, time-series

在 R 中，我想一起使用`rugarch`和`stabledist`/`fBasics`包来拟合一个单变量时间序列对象，该对象被建模为 ARMA(1,1)-GARCH(1,1) 过程，其中创新项/条件分布项被建模为稳定的分布。有没有办法解决这个问题？鉴于 fBasics 包允许一个`dstable()`函数，我猜它会用于优化最大似然函数。

作为后续，假设它遵循相同的过程，如何模拟数千次 x 天的远期回报迭代。（我在这里猜测使用`rstable()`具有上述估计参数的函数。）

您可能认为可以更好地完成工作的任何其他软件包也很乐意被查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-11T15:42:49.570

是的，你可以使用`dstable`and `rstable`，但它们来自包**`stabledist`**......如果你想估计稳定的参数，你可以使用

```
fBasics::stableFit(data, type="mle") 
```

给你 MLE 估计，但通常需要几分钟来计算。

分位数方法更快，但不太精确（对于 stableFit 是隐含的，即不指定类型）。然后，如果您得到拟合，您可以从中提取结果估计值，`result@fit$estiamte`并可以使用它`rstable`来绘制随机变量。

# jquery - JS 动态下拉菜单适用于 FF，但不适用于 Chrome

> ID：12077585
> 
> 赞同：0
> 
> 时间：2012-08-22T16:33:36.927
> 
> 标签：jquery, firefox, google-chrome

我创建了一个动态下拉列表，用户在其中选择一个州，下一个下拉菜单将显示该州的城市。这些代码适用于 Firefox，但不适用于 chrome。为什么会这样？

这是我的脚本：

```
<?php $cityurl = get_the_city()."/js/data.json";?>
<script type="text/javascript">
jQuery(document).ready(function($) {    

    var dataurl = "<?php echo $cityurl; ?>";
        $("#stateid").change(function location() {

            var $dropdown = $(this);
            $.getJSON(dataurl, function(data) {

                var key = $dropdown.val();
                var vals = [];

                switch(key) {
                    case 'State 1':
                        vals = data.city1.split(",");
                        break;
                    case 'State 2':
                        vals = data.city2.split(",");
                        break;  
                    case 'State 3':
                        vals = data.city3.split(",");
                        break;
                    case 'State 4':
                        vals = data.city4.split(",");
                        break;  
                    case 'All':
                        vals = ['Choose a State First'];
                }

                var $jsontwo = $("#cityid");
                $jsontwo.empty();
                $jsontwo.append("<option value='all'>All Regions</option>");
                $.each(vals, function(index, value) {
                    $jsontwo.append("<option value='" 
                                     + value + "'>" 
                                     + value 
                                     + "</option>");
                });
           });
    });
});  
</script> 
```

我检查了控制台和 Firebug，但没有发现错误。任何想法？

# sql - SQL 触发器使用另一个表更新表

> ID：12077588
> 
> 赞同：1
> 
> 时间：2012-08-22T16:33:40.943
> 
> 标签：sql, sql-server-2008r2-express

大家好，我对 SQL 还是有点陌生​​，我有一个小问题，也许有人可以帮忙。

我已经研究了所有关于触发器和我读到的有意义的东西，但由于某种原因我无法从中得到我需要的答案，所以我将解释我需要做什么

我有 2 张桌子`Products`，`LabelPrint`

里面有`products`5列`upc, itemcode, description, price, labelprint`

里面有`LabelPrint`相同的列

我需要的是一个触发器，用于创建新项目或编辑旧项目并将列`LabelPrint`修改为 =1 表示是

我需要将相关项目复制到`labelprint`表中

`label print`一段时间后，表格会自动清除这些项目，我只是希望有人能给我一些帮助，了解如何让这个触发器按我希望的方式工作

谢谢布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:51:28.337

我会尝试这样的事情：

```
CREATE TRIGGER InsertProducts
ON dbo.Products
FOR INSERT
AS 
   INSERT INTO dbo.LabelPrint(upc, itemcode, description, price, labelprint)
      SELECT
         upc, itemcode, description, price, labelprint
      FROM Inserted
      WHERE labelprint = 1 
```

每当您将数据插入 table 时，都会触发第一个触发器`dbo.Products`，如果`labelprint`​​ column 设置为`1`，那么这些行也会插入`dbo.LabelPrint`。

`UPDATE`有点棘手：

```
CREATE TRIGGER UpdateProducts
ON dbo.Products
FOR UPDATE
AS 
   INSERT INTO dbo.LabelPrint(upc, itemcode, description, price, labelprint)
      SELECT
         i.upc, i.itemcode, i.description, i.price, i.labelprint
      FROM Inserted i
      INNER JOIN Deleted d ON i.itemcode = d.itemcode
      WHERE i.labelprint = 1 AND d.labelprint <> 1 
```

在这里，我检查该行是否已更新（不是 100% 确定是否`itemcode`是用于链接旧值和新值的最佳列 - 如果不是，则根据需要进行调整），并确保旧值（来自`Deleted`伪表）不是`1`，而新值（来自`Inserted`）是`1`- 在这种情况下，列`LabelPrint`已更新为 1，并且该行将被复制到`LabelPrint`表中。

提醒一句：您需要注意 SQL Server 不会**为**正在插入和/或更新的每一行触发触发器。触发器将为**每个语句触发一次**- 一个语句可以很好地更新 50 行 - 在这种情况下，触发器会触发**一次**`Inserted`，并且触发器 ( , )内的伪表`Deleted`每个将包含 50 行。只是永远不要假设`Inserted`只包含一行 - 这种假设是完全错误的。

# php - 本地主机中的 Wordpress 空白屏幕

> ID：12077589
> 
> 赞同：0
> 
> 时间：2012-08-22T16:33:44.510
> 
> 标签：php, database, wordpress, xampp, localhost

所以我试图从一个现场站点中获取我令人兴奋的 wordpress 博客并放入我的本地主机中。我正在使用 XAMPP 我本地主机上的所有其他测试站点都没有空白屏幕。

当我将我的 wordpress 博客带到本地主机时，我做到了

*   将数据库导入本地
*   将 wp_options 中的 site_url 和 home 更改为此`http://localhost:83`
*   更改了我在 wp-config.php 中的连接值

我得到一个空白屏幕.....有人知道为什么或如何解决它吗？

在 wp-config.php 中

我将 WP_DEBUG 设置为 true，它返回了这个......

```
Warning: mysql_connect() [function.mysql-connect]: MySQL server has gone away in C:\xampp\htdocs\taran\wp-includes\wp-db.php on line 1038

Warning: mysql_connect() [function.mysql-connect]: Error while reading greeting packet. PID=5832 in C:\xampp\htdocs\taran\wp-includes\wp-db.php on line 1038

Warning: mysql_connect() [function.mysql-connect]: MySQL server has gone away in C:\xampp\htdocs\taran\wp-includes\wp-db.php on line 1038

Fatal error: Maximum execution time of 30 seconds exceeded in C:\xampp\htdocs\taran\wp-includes\wp-db.php on line 1038 
```

让我的网站出现，但它非常混乱......这是我打开 WP_DEBUG 时遇到的错误

```
Notice: Use of undefined constant JQUERYCOLORBOX_TEXTDOMAIN - assumed 'JQUERYCOLORBOX_TEXTDOMAIN' in C:\xampp\htdocs\taran\wp-content\plugins\jquery-colorbox\jquery-colorbox.php on line 34

Notice: Constant WPECAUTHNET_PLUGIN_NAME already defined in C:\xampp\htdocs\taran\wp-content\plugins\gold_cart_plugin\merchants\wpec_auth_net\wpec_auth_net.php on line 11

Notice: Constant WPECAUTHNET_CLASSES already defined in C:\xampp\htdocs\taran\wp-content\plugins\gold_cart_plugin\merchants\wpec_auth_net\wpec_auth_net.php on line 13

Notice: register_sidebar_widget is deprecated since version 2.8! Use wp_register_sidebar_widget() instead. in C:\xampp\htdocs\taran\wp-includes\functions.php on line 2705

Notice: register_widget_control is deprecated since version 2.8! Use wp_register_widget_control() instead. in C:\xampp\htdocs\taran\wp-includes\functions.php on line 2705

Notice: Undefined index: authorized in C:\xampp\htdocs\taran\wp-content\plugins\wp-login\wp-login.php on line 63

Notice: Undefined index: scheme in C:\xampp\htdocs\taran\wp-includes\canonical.php on line 398 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:35:47.330

转到 wp-config.php，将 WP_DEBUG 设置为 true，看看会发生什么。

# c# - 当使用实体框架作为数据访问层时，如何实现业务逻辑层？

> ID：12077593
> 
> 赞同：4
> 
> 时间：2012-08-22T16:34:15.380
> 
> 标签：c#, .net, wpf, entity-framework, business-logic-layer

假设我有 3 层

第 1 层：WPF 项目（包含：xaml、viewmodels、mvvm 框架）

第 2 层：业务逻辑层（包含：普通 c# 类）

第 3 层：实体框架（包含：存储库/数据访问类）

当您不想将 DAL（第 3 层）暴露给视图（第 1 层）时，您如何很好地实现业务逻辑层？我很难在 BLL 对象和 DAL 实体之间来回设置值。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:40:52.250

实体框架在“断开连接”的模型中不能很好地工作。除非有什么改变，否则我永远无法让它轻松地工作。

您可以在第 2 层中使用 AutoMapper 创建 ViewModel 以呈现给第 1 层，但是您仍然必须将更改发送回第 3 层，这可能会很痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T17:42:59.937

如果你只是在开发一个在可预见的情况下不会改变的小应用程序，那么现在就做最快的事情。如果您想要一个长期可维护的应用程序，那么让我提出以下内容。

这种垂直层方法的问题在于，当您需要视图中的某些内容时，您必须将其添加到业务层（即使业务层不关心它）和数据层。这要求您的业务层看起来像 1) 数据的 UI 视图 2) 数据的业务视图和 3) 数据的数据库表示。那和/或您需要在层之间进行大量映射。所有这些都淡化了业务层表示业务逻辑的实际目的。然后往往会发生的是，所有业务逻辑都被迁移到事务方法（也可以是静态方法）中，以仅更改数据对象的状态。如果您的问题域只是没有复杂逻辑的 CRUD，那完全没有错。复杂的逻辑，

假设您有复杂的逻辑，数据的用户视图和数据的业务表示通常是非常不同的，因此 UI 视图最终会得到专门的数据模型。如果我是你，我会接受这一点并使用 CQRS 原则的简单版本。也就是说，让您的 UI 视图的数据来自与执行业务操作的地方不同的地方。在您的情况下，我可能在您的 DAL 中有一个 EF 模型，它只为您的 UI 视图提供服务，并准确地为它们提供所需的东西（无论是通过数据库视图、存储过程还是预编译的报告表）。然后创建一个单独的 EF 模型，该模型仅服务于您的业务实体的需求。然后，当您准备好执行实际业务操作时，UI 的 viewmodel 操作方法可以从业务 EF 模型加载业务对象（或者更好的是，从执行此操作的业务层调用对象工厂）并对业务对象运行适当的操作。请注意，我在这里还假设您的数据库是高度相关的（主要是第 2 和第 3 范式），并且您已准备好使用 EF。

我不会尝试将您的视图模型变成业务逻辑。这使得您的业务逻辑不容易在其他平台或应用程序（如 Web）上重用。MVVM 应该只服务于 UI。在我看来，V（视图）代表用户看到和操作的内容。M（模型）代表用户***在该视图上***选择的内容。VM（视图模型）在两者之间进行转换。然后，您的程序应采用用户的验证选择（UI 模型）并从中提取所需的数据以执行适当的业务操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T16:44:49.737

无需将所有 DAL 暴露给视图层，只需在所有层之间交换域对象（EF 对象）。该结构可能类似于以下内容：

1.  表示层-------- ^
2.  BLL --------------------------- | 数据对象
3.  DAL（存储库等）--- |

因此，您的所有层都将断开连接；但它们将共享相同的域对象。在现实世界中，您可以通过为所有层共享的实体框架实体创建单独的 dll 来实现类似的结构。请注意，ObjectContext 仅对 DAL 可见（默认情况下，实体和对象上下文在同一个 dll 中生成，您需要将其分成两个 dll）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T16:46:27.233

您`ViewModels` *是*MVVM 中的应用程序，因此它们应该通过您的存储库类或业务逻辑（直接或间接使用您的验证类）处理诸如数据访问之类的事情。

如果您不想直接引用这些类，请使用 an`Interface`但请注意，您需要通过某种方式将继承的类传递给 ViewModel。我曾经做过一个项目，我们有一个共享接口库，这样的`IRepository`接口，所有的东西都是使用 MEF 导入/导出的，所以这些层没有直接相互引用。

最终（简化的）布局是：

*   **模型**-> 包含可以对自己的数据（长度、最小/最大值等）进行简单验证但不进行任何高级验证或业务逻辑的纯数据对象。没有引用任何其他库。

*   **Common** -> 包含的接口、实用程序和其他常用共享类。仅引用模型库。

*   **DAL** -> 基于公共库中的存储库接口的包含数据访问和存储库。接口定义和实用程序的引用公共库，以及模型库，因为它包含在数据访问调用中使用或返回的数据模型

*   **ViewModels** -> 包含的应用程序和业务逻辑。引用 Common 的实用程序和接口，以及 Models 的数据模型

*   **客户端**-> 包含的视图。引用模型和视图模型，因此它可以`DataTemplates`为两种对象类型编写

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T16:50:43.470

除了 Daryal 的回答之外，您还可以将 BL 中的业务对象定义为 POCO，并在 DAL 层中使用 EF 从数据库中读取它们或将它们保存到数据库中。

如果您在 BL（或工作单元，无论您给它什么命名）中定义一个类似存储库的接口，并在您的 DAL 中实现该接口，那么您只需要一点 DI 即可获取存储库的实例 -类，而不必一直引用 DAL。它对我来说就像一个魅力。

有关更多信息，请参见[此处](http://huyrua.wordpress.com/2011/04/13/entity-framework-4-poco-repository-and-specification-pattern-upgraded-to-ef-4-1/)和[此处](http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T16:43:31.280

实体框架本身应该用作“逻辑层”。

你的想法可能有一定的意义，使用组合技术。

然而，我认为其中一些微型。设计为单独使用的库，除非在其网站中明确合并和提及。

祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-15T13:08:59.153

我是第二个，我已经在一些项目中实现了这一点。使用 POCO 作为业务对象是绝对可以的。

另一种方法不是创建 2 个项目（一个用于 DB 上下文，一个用于实体）是仅使用一个 DAL/DATA 项目并在 BLL 中引用它。然后继承 BLL 中的 POCO 类，并在 UI 层使用该类。以下是基本示例代码：

```
// assume this is EF generated POCO
namespace Owner.Project.Data{
    public partial class Product
    {
        public int ProductId { get; set; }
        public string ProductName { get; set; }
    }
}

// this is manually created class in BLL
using Owner.Project.Data;
namespace Owner.Product.Business{
    public class StoreProduct : Product {
        public bool Add (string productName){
            // TODO - add product using EF as you normally do
        }
    }
} 
```

现在您可以在您的 UI 项目中引用 BLL 并在那里使用 StoreProduct 类。要实现松耦合模式，当然您也可以从 IStoreProduct 接口继承 StoreProduct 类，并在 UI 或 Web 服务中使用它，但这是另一个话题。

# javascript - 在 Alfresco 中动态创建空间/文件夹的 Javascript 无法正常工作

> ID：12077597
> 
> 赞同：3
> 
> 时间：2012-08-22T16:34:47.317
> 
> 标签：javascript, security, debugging, node.js, alfresco

我目前正在 Oracle Linux 6 64 位虚拟机上使用 Alfresco 4.0.d 社区版（我也在 Alfresco 4.0.c 社区版上尝试过），使用 Firefox 作为我的浏览器。

最近，我一直在尝试创建一个脚本，该脚本可以通过在新项目进入空间/文件夹时动态创建子文件夹的规则来执行。

本质上，假设您有一个名为**fileOne**的新创建的内容。该文件将位于名为**mainFolder的空间中，当在文件上运行规则以执行脚本时，脚本将根据文件的****标题**和**作者**值查看是否存在子文件夹。如果没有，它将根据该文件的**标题值**--> 子文件夹和**作者值--> 子子文件夹在该****mainFolder**中创建子文件夹。然后我希望将该内容/文件移到现有或新创建的子文件夹中。

 ****最终我想要的东西看起来像：

```
Space: mainFolder
|---> Content: fileOne --> Properties: Name, Title, Author
|---> Space: Title
      |---> Space: Author
            |---> Content: fileOne --> Properties: Name, Title, Author 
```

下面是脚本...

```
function main()
{
    //mainFolder space/folder MUST exist under companyhome.
    var rootSpaceName = companyhome.childByNamePath("mainFolder");

    if(rootSpaceName == null)
    { 
        logger.log("Company Home/mainFolder does not exist, so we have nothing to do.");
        return;
    }
    else
    {
        logger.log("Company Home/mainFolder exists, so carry on our process.");

        var childList = rootSpaceName.children;
        var count = childList.length;
        var seconds = new Date().getTime() / 1000;

        if(count == 0)
        {
            logger.log("Company Home/mainFolder does not have child, nothing to do.");
            return;
        }
        else
        {
            for(var i = 0; i < count; i++)
            {
                // File Title MUST exist.
                var childTitle = childList[i].properties.title;

                if(childTitle == null)
                {
                    childTitle = "New Title " + seconds;
                }

                // File Author MUST exist.
                var childAuthor = childList[i].properties.author;

                if(childAuthor == null)
                {
                    childAuthor = "New Author " + seconds;
                }

                var child = childList[i];
                logger.log("This child is: " + child);

                if(child.isContainer == false)
                {
                    for(var j = 0; j < count; j++)
                    {
                        var newChildName = childList[j].properties.name;
                        logger.log("New child name: " + newChildName);
                        var newChild = childList[j];

                        if((newChild.isContainer == true) && (childTitle == newChildName))
                        {
                            var newSpaceName = rootSpaceName.childByNamePath(newChildName);
                            var newChildList = newSpaceName.children;
                            var newCount = newChildList.length;

                            for(var k = 0; k < newCount; k++)
                            {
                                var newNewChildName = newChildList[k].properties.name;
                                var newNewChildAuthor = newChildList[k].properties.author;
                                var newNewChild = newChildList[k];

                                if((newNewChild.isContainer == true) && (newNewChildAuthor == childAuthor))
                                {
                                    var currentSpace = newSpaceName.childByNamePath(newNewChildName);
                                    child.move(currentSpace);
                                }
                            }
                        }
                        else
                        {
                            // If title folder is already created, not need to create again.
                            var newSpaceName = companyhome.childByNamePath("mainFolder/" + childTitle);

                            if(newSpaceName == null)
                            {
                                newSpaceName = rootSpaceName.createFolder(childTitle);
                                logger.log("mainFolder/" + childTitle + " is created.");
                            }

                            // If author folder is already created, not need to create again.
                            var newNewSpaceName = companyhome.childByNamePath("mainFolder/" + childTitle + "/" + childAuthor);
                            if(newNewSpaceName == null)
                            {
                                newNewSpaceName = newSpaceName.createFolder(childAuthor);
                                logger.log("mainFolder/" + childTitle + "/" + childAuthor + " is created.");
                            }

                            child.move(newNewSpaceName);
                            logger.log("Moving file " + child.properties.name);
                        }

                    }

                }

            }
        }
    }
    return;
}

main(); 
```

所以为了测试这个，我一步一步地做：

1.  我点击**公司主页**。
2.  我点击**Create**，**Create Space**。
3.  然后，我创建了一个名为**mainFolder**的空间（位于 Company Home 下）。
4.  然后我单击新创建的文件夹，然后单击**More Actions**、**Manage Content Rules**。
5.  然后我点击**Create Rule**。
    5a。它告诉我选择一个条件，我选择**All Items**，然后单击**Add to List**，然后单击**Next**。

    5b。现在它告诉我选择一个动作，我选择**Execute Script**，然后单击**Set Values 和 Add**，这允许我选择名为**new-create-folders.js**的脚本，我之前已将其添加到**Data中的****Scripts**文件夹中**字典**。然后我单击**确定**，然后单击**下一步**。

    5c。在这里它要求我输入**类型**，我选择**项目已更新**。然后我输入一个标题，如**创建文件夹规则**。最后我**在后台检查运行规则**，然后点击**下一步**。

    5d。现在我单击**完成**以完成我的规则。
6.  现在创建规则后，我单击**Create**，**Create Content**。

    6a。我给我的内容起一个名字，比如**name001**，然后我点击**Next**，然后我输入一个标题，比如**title001**和一个作者，比如**author001**。然后我点击**OK**。

现在发生的事情让我感到困惑；它像我想要的那样创建了一个名为**title001的子文件夹，并在该子文件夹中创建了另一个名为****author001**的文件夹，并且在该文件夹中名为**name001**的文件已被移动。这就是我希望它工作的方式，但仍然存在问题。在**mainFolder**下，还有一个名为**New Title 1346102873.393 New Title 1346102873.393**的新子文件夹，其中有一个名为**New Author 1346102873.393**的文件夹，但该文件夹内没有文件。而且不知道为什么只在**mainFolder中添加了一条内容就创建了这个文件夹**? 此外，既然已经创建了文件夹，该规则看起来也已从**mainFolder**中删除，即不再有任何规则应用于该文件夹。当我返回在**mainFolder**上再次创建规则时，我收到错误：`Failed to create Rule due to error: null`. 以下是我在日志文件中遇到的错误...

**Alfresco 日志的输出/错误**

```
17:27:51,373 DEBUG [org.alfresco.repo.jscript.RhinoScriptProcessor] Imports resolved, adding resource '_root
17:27:53,389 DEBUG [org.alfresco.repo.jscript.ScriptLogger] Company Home/mainFolder exists, so carry on our process.
17:27:53,400 DEBUG [org.alfresco.repo.jscript.ScriptLogger] This child is: Node Type: {http://www.alfresco.org/model/content/1.0}systemfolder, Node Aspects: [{http://www.alfresco.org/model/content/1.0}auditable, {http://www.alfresco.org/model/system/1.0}referenceable, {http://www.alfresco.org/model/system/1.0}localized]
17:27:53,400 DEBUG [org.alfresco.repo.jscript.ScriptLogger] New child name: b8ea2cb0-6fb6-481e-bb7b-d5364d9c509e
17:27:53,422 DEBUG [org.alfresco.repo.jscript.ScriptLogger] mainFolder/New Title 1346102873.393 is created.
17:27:53,439 DEBUG [org.alfresco.repo.jscript.ScriptLogger] mainFolder/New Title 1346102873.393/New Author 1346102873.393 is created.
17:27:53,498 DEBUG [org.alfresco.repo.jscript.ScriptLogger] Moving file b8ea2cb0-6fb6-481e-bb7b-d5364d9c509e
17:27:53,499 DEBUG [org.alfresco.repo.jscript.ScriptLogger] New child name: name001
17:27:53,523 DEBUG [org.alfresco.repo.jscript.ScriptLogger] Moving file b8ea2cb0-6fb6-481e-bb7b-d5364d9c509e
17:27:53,524 DEBUG [org.alfresco.repo.jscript.ScriptLogger] This child is: Node Type: {http://www.alfresco.org/model/content/1.0}content, Node Aspects: [{http://www.alfresco.org/model/content/1.0}auditable, {http://www.alfresco.org/model/system/1.0}referenceable, {http://www.alfresco.org/model/content/1.0}titled, {http://www.alfresco.org/model/content/1.0}author, {http://www.alfresco.org/model/system/1.0}localized, {http://www.alfresco.org/model/application/1.0}inlineeditable]
17:27:53,524 DEBUG [org.alfresco.repo.jscript.ScriptLogger] New child name: b8ea2cb0-6fb6-481e-bb7b-d5364d9c509e
17:27:53,534 DEBUG [org.alfresco.repo.jscript.ScriptLogger] mainFolder/title001 is created.
17:27:53,546 DEBUG [org.alfresco.repo.jscript.ScriptLogger] mainFolder/title001/author001 is created.
17:27:53,561 DEBUG [org.alfresco.repo.jscript.ScriptLogger] Moving file name001
17:27:53,561 DEBUG [org.alfresco.repo.jscript.ScriptLogger] New child name: name001
17:27:53,577 DEBUG [org.alfresco.repo.jscript.ScriptLogger] Moving file name001
17:27:53,578 DEBUG [org.alfresco.repo.jscript.RhinoScriptProcessor] Time to execute script: 1976.9988ms
17:31:13,385 ERROR [org.alfresco.web.ui.common.Utils] Failed to create Rule due to error: null
java.lang.NullPointerException
    at org.alfresco.repo.rule.RuleServiceImpl.getLinkedToRuleNode(RuleServiceImpl.java:1516)
    at org.alfresco.repo.rule.RuleServiceImpl.isLinkedToRuleNode(RuleServiceImpl.java:1504)
    at org.alfresco.repo.rule.RuleServiceImpl.checkForLinkedRules(RuleServiceImpl.java:947)
    at org.alfresco.repo.rule.RuleServiceImpl.saveRule(RuleServiceImpl.java:740)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.alfresco.repo.security.permissions.impl.AlwaysProceedMethodInterceptor.invoke(AlwaysProceedMethodInterceptor.java:34)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:46)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:147)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy53.saveRule(Unknown Source)
    at org.alfresco.web.bean.rules.CreateRuleWizard.finishImpl(CreateRuleWizard.java:148)
    at org.alfresco.web.bean.dialog.BaseDialogBean$1.execute(BaseDialogBean.java:123)
    at org.alfresco.web.bean.dialog.BaseDialogBean$1.execute(BaseDialogBean.java:119)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388)
    at org.alfresco.web.bean.dialog.BaseDialogBean.finish(BaseDialogBean.java:129)
    at org.alfresco.web.bean.wizard.WizardManager.finish(WizardManager.java:593)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.myfaces.el.MethodBindingImpl.invoke(MethodBindingImpl.java:132)
    at org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:61)
    at javax.faces.component.UICommand.broadcast(UICommand.java:151)
    at javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:115)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:191)
    at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:32)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:105)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:80)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:143)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.repo.web.filter.beans.SessionSynchronizedFilter.doFilter(SessionSynchronizedFilter.java:67)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.web.app.servlet.AuthenticationFilter.doFilter(AuthenticationFilter.java:104)
    at sun.reflect.GeneratedMethodAccessor443.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.alfresco.repo.management.subsystems.ChainingSubsystemProxyFactory$1.invoke(ChainingSubsystemProxyFactory.java:116)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy238.doFilter(Unknown Source)
    at org.alfresco.repo.web.filter.beans.BeanProxyFilter.doFilter(BeanProxyFilter.java:82)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.repo.web.filter.beans.NullFilter.doFilter(NullFilter.java:68)
    at sun.reflect.GeneratedMethodAccessor443.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.alfresco.repo.management.subsystems.ChainingSubsystemProxyFactory$1.invoke(ChainingSubsystemProxyFactory.java:116)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy238.doFilter(Unknown Source)
    at org.alfresco.repo.web.filter.beans.BeanProxyFilter.doFilter(BeanProxyFilter.java:82)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

有谁知道为什么要创建该附加文件夹，以及为什么在对新创建的内容执行该规则后要删除该规则，以及为什么在第一次删除原始规则后我无法向该文件夹添加新规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T11:47:29.097

听起来您的规则运行了多次并且自己绊倒了。会不会是脚本本身正在执行的某些操作导致它再次运行？

检查您的规则是否未应用于子文件夹，而不是在向导的条件部分中选择“所有项目”，而是尝试更具体的内容，例如所有内容项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T23:51:36.050

我在 Alfresco 论坛的同一张海报上发布了这个确切问题的答案。答案是代码尝试使用与文档相同的名称创建文件夹。节点必须在文件夹中唯一命名，因此这是不允许的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:03:41.057

实际上我认为的问题应该是规则被多次触发，条件规则“所有项目”正在更新。所以每个节点都会在存储库中收到更新，在带有规则的空间内（也许还有子文件夹，我会检查一下），它会触发并可能创建一个循环。您是否尝试过使用带有“创建节点时”触发器的规则？

更新：

因此，我尝试在 Alfresco 3.4.7 Enteprise 和 4.0 Community x64（Linux 和 Windows）上对此进行调试。

*   我在 Alfresco 内的 Scripts 目录中创建了一个名为 /Company Home/Data Dictionary 的 js 文件。
*   然后我在 Company Home 空间内创建了一个文件夹 mainFolder。
*   我在文件夹 mainFolder 中上传了一个新的 PDF 文件。
*   然后我对 PDF 文件执行 fs 文件。因此，进入文档的详细视图，然后单击“运行操作”-“执行脚本”。
*   在那里，一切正常！

所以最后，问题出在规则执行中，它在“所有项目”上触发，因此，当脚本创建具有标题名称的新文件夹时，它会递归触发。我尝试使用“仅 PDF 类型”节点执行规则，它就像一个魅力！

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:16:58.363

可能您的要求是 mainFolder 中存在的文件具有标题和作者字段。您想将文件移动到**标题->作者**文件夹中。

就像那个 **mainFolder -> FileName: file1, Title: title1, Author: author1**

到 **mainFolder -> title1 ->author1 ->file1**

我尝试用我自己的代码编辑你的代码，并在 alfresco 端的 alfresco community 4.0c 中运行，并在 Windows 的共享端使用 java 脚本控制台。

**为 mainFolder 创建规则时**

1) 选择条件

1.1**类型或子类型的内容**作为选择条件

1.2**内容**作为设置条件值，不选中摘要下面的复选框 **是项目是“内容”的子类型**

2）选择与您相同的动作执行脚本

3) **创建或插入类型项目**

我选择这些是因为动态运行我们的代码会创建文件夹。所以规则只适用于内容。除了取消选中后台执行规则外，其他与您相同。如果创建的项目没有标题名称，则 alfresco 默认假定项目名称为标题。

**最后更新的代码：**

```
function main()
{
    //mainFolder space/folder MUST exist under companyhome.
    var rootSpaceName = companyhome.childByNamePath("mainFolder");

    if(rootSpaceName == null)
    { 
        logger.log("Company Home/mainFolder does not exist, so we have nothing to do.");
        return;
    }
    else
    {
        logger.log("Company Home/mainFolder exists, so carry on our process.");

        var childList = rootSpaceName.children;
        var count = childList.length;

        if(count == 0)
        {
            logger.log("Company Home/mainFolder does not have child, nothing to do.");
            return;
        }
        else
        {
            for(var i = 0; i < count; i++)
            {   
                var child = childList[i];
                logger.log("This child is: " + child);

                // If each of child is file
                if(child.isDocument)
                {
                    // Get title of file and
                    // If childTitle is null, we set DEFAULT value
                    var childTitle = childList[i].properties.title;
                    if(childTitle == null)
                    {
                        childTitle = "New Title";
                    }
                    else if(childTitle == child.properties.name)
                    {
                        childTitle = "Title " + childTitle;
                    }

                    // Get author of file.
                    // If childAuthor is null, we set DEFAULT value
                    var childAuthor = childList[i].properties.author;
                    if(childAuthor == null)
                    {
                        childAuthor = "New Author";
                    }
                    logger.log("Original Title :" + child.properties.title + "\tAuthor :" + child.properties.author);
                    logger.log("Setting Title :" + childTitle + "\tAuthor :" + childAuthor);

                    // If title folder does not exist, create title folder
                    var newSpaceTitle = companyhome.childByNamePath("mainFolder/" + childTitle);

                    if(newSpaceTitle == null)
                    {
                        newSpaceTitle = rootSpaceName.createFolder(childTitle);
                        logger.log("mainFolder/" + childTitle + " is created.");
                    }

                    // If author folder does not exist, create author folder
                    var newSpaceAuthor = companyhome.childByNamePath("mainFolder/" + childTitle + "/" + childAuthor);
                    if(newSpaceAuthor == null)
                    {
                        newSpaceAuthor = newSpaceTitle.createFolder(childAuthor);
                        logger.log("mainFolder/" + childTitle + "/" + childAuthor + " is created.");
                    }

                    child.move(newSpaceAuthor);
                    logger.log("Moving file " + child.properties.name);
                }
            }
        }
    }
    return;
}

main(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T23:17:53.550

该行：

```
 var rootSpaceName = companyhome.childByNamePath("mainFolder"); 
```

将尝试定位相对于`companyhome`存储库根目录的文件夹。该文件夹是否存在于您的存储库中？

如果您正在尝试编写一个对进入空间的文件进行操作的脚本，那么您是否不需要使用相对于该文件或空间的路径（使用`document`or`space`对象，而不是`companyhome`）？

如果没有，也许您可​​以多解释一下您要达到的目标？

如果您还没有使用它，那么 Alfresco [JavaScript 控制台](https://code.google.com/p/share-extras/wiki/JavascriptConsole)是一个非常有用的附加组件，用于尝试 JavaScript 代码，您可以使用`logger.log()`.****

# javascript - 使用 HTML5 将两个 div 设置为可拖动区域

> ID：12077598
> 
> 赞同：0
> 
> 时间：2012-08-22T16:34:58.393
> 
> 标签：javascript, html, dojo

您好 HTML5 开发人员，我正在尝试设置两个不同的 div 作为传入文件的可拖动区域。但是，似乎一次只能激活其中一个，我怎样才能让它们都准备好接受文件的 dnd。这是我的代码：

```
var node = dojo.byId("welcomeDialog1_Id");
var node2 = dojo.byId("firstDialogBackground");
    // Reference
    // http://www.html5rocks.com/features/file
    // http://www.html5rocks.com/tutorials/dnd/basics/
    // https://developer.mozilla.org/En/DragDrop/Drag_Operations
    dojo.connect(node, "dragenter", function(evt){
        // If we don't prevent default behavior here, browsers will
        // perform the default action for the file being dropped i.e,
        // point the page to the file.
        evt.preventDefault();
    });

    dojo.connect(node, "dragover", function(evt){
        evt.preventDefault();
    });
    dojo.connect(node, "drop", handleDrop);

  dojo.connect(node2, "dragenter", function(evt){
        evt.preventDefault();
    });

    dojo.connect(node2, "dragover", function(evt){
        evt.preventDefault();
    });
    dojo.connect(node2, "drop", handleDrop); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:34:49.393

确保您的拖放区没有相互嵌套或重叠......

我可以证明，至少对于 FF 和 Chrome，您的页面上可以有多个拖放区来接受传入的文件。我没有用IE测试。

当我使用文件 DnD 时，我发现以下文章非常有用：

> [http://www.sitepoint.com/html5-file-drag-and-drop/](http://www.sitepoint.com/html5-file-drag-and-drop/)

# trello - 通过 Trello 创建卡片失败并返回 400 响应

> ID：12077599
> 
> 赞同：4
> 
> 时间：2012-08-22T16:35:06.283
> 
> 标签：trello

我曾尝试通过 Chello（Trello API 的 .NET 包装器）和 Fiddler 执行此操作。在这两种情况下，我都会收到带有“名称无效值”的 400 响应。

这是请求和响应数据。请注意，出于安全原因，我已更改密钥、令牌和 idList。此外，令牌确实具有读/写权限。

```
POST https://api.trello.com/1/cards?key=<myKey>&token=<myToken> HTTP/1.1
User-Agent: Fiddler
Host: api.trello.com
Content-Length: 115

{ 
  name: "My new card name", 
  desc: "My new card description", 
  idList: "<myIdList>" 
}

HTTP/1.1 400 Bad Request
X-Powered-By: Express
Content-Type: text/plain; charset=utf-8
Content-Length: 23
Cache-Control: max-age=0, must-revalidate
Expires: Thu, 01 Jan 1970 00:00:00
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, PUT, POST, DELETE
Connection: keep-alive

invalid value for name 
```

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T00:56:10.967

尽管使用 POST，但 Trello API 实际上期望值在查询字符串中，而不是在 POST 正文中。您的示例应该更符合以下方面：

```
https://api.trello.com/1/cards?key=<myKey>&token=<myToken>&name=My+new+card+name&desc=My+new+card+description&idList=<myIdList> 
```

使用您发布的代码，您最终会得到“名称的无效值”，因为它是它检查但未找到的第一个参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T12:40:41.003

看起来好像您正在发送一个 JSON 对象作为帖子的内容；那正确吗？如果您在帖子内容中将其 url 编码为简单的键值对，那应该可以。抱歉，如果我误读了您的粘贴。

# objective-c - 在这种情况下正确的 pushViewController 方法？

> ID：12077600
> 
> 赞同：1
> 
> 时间：2012-08-22T16:35:06.527
> 
> 标签：objective-c, uinavigationcontroller, uitabbar, pushviewcontroller

我有一个自定义的 UITabBarController。在它上面，我添加了 3 个视图控制器，首先为每个视图控制器添加了一个 navigationController。看起来像这样

· customTabBarController.m viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    FirstViewController *firstController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UINavigationController *firstNavController = [[UINavigationController alloc] initWithRootViewController:firstController];

    SecondViewController *secondController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    UINavigationController *secondNavController = [[UINavigationController alloc] initWithRootViewController:secondController];

    self.viewControllers = [NSArray arrayWithObjects:firstNavController, secondNavController, nil];

    [self addLeftButtonImage];
    [self addRightButtonImage];
    self.selectedIndex = 1;
} 
```

现在，当我在视图控制器上并且想要 pushViewController 时，我必须如何调用它？

# javascript - 按下回车键时jQuery UI自动完成字段未提交

> ID：12077604
> 
> 赞同：4
> 
> 时间：2012-08-22T16:35:25.783
> 
> 标签：javascript, ruby-on-rails, jquery-ui, autocomplete, coffeescript

我正在关注关于这个主题的 Railscast，虽然自动完成功能有效，但当用户选择一个项目并按 Enter 键时，我无法让它提交表单。我有这个（咖啡脚本）代码，但它似乎不起作用......谁能看到我哪里出错了？

```
jQuery ->
  $('#search_bar').autocomplete( 
    source: $('#search_bar').data('autocomplete-source')
  ).keydown (e) ->
    $('#search_button').trigger "submit" if e.keyCode is 13 
```

理想情况下，我希望它也可以通过鼠标单击来提交选择项目 - 但不确定这是否可能？

更新：我试过这个......

```
jQuery ->
  $('#search_bar').autocomplete
    source: $('#search_bar').data('autocomplete-source'),
    select: (event, ui) ->
      $(this).parents("form").submit() 
```

...虽然它现在可以在您使用键盘选择一个项目（然后按 Enter）时工作，但如果您通过鼠标单击选择一个项目，它只会发送您输入的字符串，而不是自动发送的完整单词完整的下拉菜单。（我想我需要的是用鼠标悬停的文本内容更新搜索字段？）

更新 2：排序！只需将其添加到末尾

```
focus: (event, ui) ->
   $('#search_bar').val(ui.item.value) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T17:06:23.567

使用选择事件。[此处](http://jqueryui.com/demos/autocomplete/#event-select) 的文档 Enter 键被自动完成捕获以关闭菜单并且故意不传播。回车键和鼠标选择都会触发选择事件。但是，当单击表单时，将在标签有机会更改之前提交，因此必须先设置该值。根据您的数据源，您可能希望使用`item.label`而不是`item.value`.

```
$('#search_bar').autocomplete({
   source: $('#search_bar').data('autocomplete-source'),
   select: function(event, ui) {
         $(this).val(ui.item.value);
         $(this).parents("form").submit();  // this will submit the form.
   }
}) 
```

我相信咖啡脚本看起来像这样

```
$('#search_bar').autocomplete(
   source: $('#search_bar').data('autocomplete-source'),
   select: (event, ui) ->
         $(this).val(ui.item.value).parents("form").submit();
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:08:58.237

对咖啡脚本不太了解，但这就是我在javascript中的做法

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

您可以使用“选择”事件。当用户选择某些东西时，请提交：

```
$( ".selector" ).autocomplete({
    select: function(event, ui) {
        $('#theForm').submit();
    }
}); 
```

我相当肯定这将为您处理这两种情况。onEnter 和 onClick。

# linux - Git无法创建文件权限被拒绝

> ID：12077605
> 
> 赞同：7
> 
> 时间：2012-08-22T16:35:29.560
> 
> 标签：linux, git, ubuntu

我正在使用 Amazon EC2 托管一个通过 git 部署到服务器的网站。我之前在同一种 EC2 Ubuntu Linux Server 实例上使用过本教程，它运行良好。但是，当我尝试推送到服务器时，我收到以下错误跟踪：

教程：[http ://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)

痕迹：

```
$ git push origin master

Counting objects: 5, done.
Writing objects: 100% (3/3), 250 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
remote: error: unable to create file index.html (Permission denied)
To ssh://ubuntu@myserv.er/var/www/website.git
   8068aac..04eae11  master -> master 
```

我目前在存储库中只有一个文件，即`index.html`.

错误跟踪显示创建文件的权限被拒绝。请你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:53:07.977

我相信如果你跑

```
 sudo chown -R git:git /srv/git/ 
```

这来自[执行 git push 时如何修复 .git/ 目录的权限被拒绝？](https://stackoverflow.com/questions/6321742/permission-denied-issue-when-performing-git-push)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T16:46:32.793

您可能没有完成本教程的这一部分：

> 首先，工作树（上面的 /var/www/www.example.org）必须可由运行钩子的用户写入（或者用户需要 sudo 访问权限才能运行 git checkout -f 或类似的东西）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-16T15:39:01.613

FYI, I had this error because I made a hook to update files in a separate website root directory. For example:

```
/var/www/project.git  # (where we push updates)
/var/www/project.com  # (where the website exists) 
```

I forgot to add the group permission to the project.com directory. This made it all work, index.html appeared in the /var/www/project.com directory once I did the next commit/push!

Full code to make it work assuming you added your user to the "developers" group:

```
sudo chmod -R g+ws /var/www/project_name.git
sudo chgrp -R developers /var/www/project_name.git
sudo chmod -R g+ws /var/www/project_name
sudo chgrp -R developers /var/www/project_name 
```

And the git setting for shared repository:

```
git config core.sharedRepository group 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-21T10:10:51.020

您的防病毒软件或其他程序可能会阻止将该文件写入您的文件夹。如果您仔细观察，您会发现除了权限被拒绝的文件之外，所有其他文件都已创建。您可能拥有阻止创建某些文件类型的保护软件，并且无论您登录的用户类型是什么，在您禁用该软件之前都不会创建该文件。

因此，请检查您的防病毒软件是否不支持那些运行 Windows 的人。

# javascript - JavaScript 数组中项目的范围是什么

> ID：12077611
> 
> 赞同：1
> 
> 时间：2012-08-22T16:35:52.447
> 
> 标签：javascript

我正在玩 JavaScript 中的作用域，我对从数组调用函数时遇到的一些事情感到好奇。在下面的示例中，我使用三个不同的范围。一个绑定到名为 foobar 的对象，一个绑定到窗口，然后第三个绑定到函数本身。我只是好奇为什么该函数的范围仅限于自身而不是全局窗口对象。是不是因为数组访问本身就是一个函数调用，所以存储的函数在本地范围内？

```
var foobar = {
  doWork: function() {
      console.log('doing some work...');
      console.log(this);
  }
}

foobar.doWork(); // `this` will refer to foobar

var doWorkClone = foobar.doWork;
doWorkClone(); // `this` will refer to window

var workClones = [];
workClones.push(foobar.doWork);
workClones[0](); // `this` will refer to the doWork function itself 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:39:57.813

他们的行为方式相同。在`a.b()`中，该函数`a.b`在调用时`this`设置为`a`。

```
foobar.doWork();  // function is `foobar.doWork`, `this` is `foobar`
workClones[0]();  // function is `workClones[0]`, `this` is `workClones` 
```

这是因为 the`.`和`[]`notation 在功能上是相同的。使用哪一个无关紧要，是否处理数组也无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:52:40.467

为了理解这一点，了解 js 在后台是如何工作的可能会有所帮助。

当你写的时候`f(args)`，js会执行`f.call(this, args)`。因此`this`总是指你从哪里调用函数。

在你的情况下：

```
foobar.doWork()   --> foobar
doWorkClone()     --> window or wrapping expression
workClones[0]()   --> "0" is in workClones, so workClones 
```

# apache - 使用 .htaccess 将旧 URL 从 example.com/foo 重定向到 example.com/foo.php？

> ID：12077613
> 
> 赞同：0
> 
> 时间：2012-08-22T16:36:03.363
> 
> 标签：apache, .htaccess, redirect

我已经改造了一个网站，现在 URL 的格式不同了。

以前一页是`www.example.com/about`.

现在它是`www.example.com/about.php`

如何编写重定向规则，以便当用户单击旧 URL（来自搜索引擎或 whathaveyou）“www.example.com/about”时，它会收到 301 重定向到`www.example.com/about.php`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:44:10.603

试试这个：

```
RewriteEngine on
RewriteRule ^(.*) /$1.php [R=301,L] 
```

更新的答案：对不起，这并不像我想象的那么简单。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -f [NC,OR]
RewriteCond %{REQUEST_FILENAME} -d [NC] 
RewriteRule (.+?)(\.[^.]*$|$)$ $1.php 
```

它应该在您的 URL 映射到的根 Web 目录中，听起来像 public_html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:29:23.857

我发现使用 .htaccess 是一个可怕的现实，我发现我的主机（HostGator）在控制面板中有一个“重定向菜单”，我在那里手动进行了重定向。

# php - 防止 MySQL PDO 将数字作为字符串返回

> ID：12077614
> 
> 赞同：16
> 
> 时间：2012-08-22T16:36:05.973
> 
> 标签：php, mysql, pdo

我正在使用 PHP 的 PDO 来查询 MySQL 数据库。它以字符串形式返回数字和整数，并且弄乱了我的 JSON。

除了逐行类型转换值之外，还有更好的方法来修复它吗？

```
array(2) { 
  ["name"]=> string(11) "Preliminary" 
  ["sell_price"]=> string(6) "864.00"
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:50:16.713

如果您使用的是 php 5.3.3 或更高版本，则可以使用`JSON_NUMERIC_CHECK`第二个参数来`json_encode`执行此操作。

见：[http ://us3.php.net/manual/en/function.json-encode.php](http://us3.php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-04T13:00:51.447

尽管@Explosion Pills 在这种情况下可以满足@user1032531 的需求，但它并没有解决问题的第一个来源。

正如您在原始问题中看到的那样，在 PHP 端，值 from`sell_price`已经是 a `string`，尽管正如用户所说，它在数据库中存储为“数字”（我们不知道它是 a`DECIMAL`还是 a `FLOAT`）。

好吧，正如用户@jameshfisher 在他的评论中指出的那样，当将 PDO 与 MySQL 一起使用时，可能需要适当的配置才能将“数字”作为“数字”。您可以点击[他的链接](https://stackoverflow.com/questions/1197005/how-to-get-numeric-types-from-mysql-using-pdo)以获得使其正常工作所需的几乎所有内容。

Appart 从那开始，接受的答案是有效的，因为如果不使用，`JSON_NUMERIC_CHECK` `json_encode`无论变量的类型如何，都会将所有内容作为文本发送，并且在使用它时，它会将值转换为基于猜测而不是原始类型的类型变种。

# c# - c# Excel 2007 Addin - 安装在其他电脑上

> ID：12077615
> 
> 赞同：2
> 
> 时间：2012-08-22T16:36:06.910
> 
> 标签：c#, excel, vsto, add-in

我用vs2010创建了一个软件。它是一个 Excel 2007 加载项。它工作完美。但我想将它安装在另一台电脑上。所有安装程序包都安装无误。我添加了 .vsto 文件，但它不起作用，只是“非活动插件”......

我一步一步地按照官方[msdn](http://msdn.microsoft.com/en-us/library/bb332051.aspx)和非官方但完整[的 vsto-installer](http://www.clear-lines.com/blog/post/create-excel-2007-vsto-add-in-msi-installation.aspx)文章编写。但它不起作用。安装步骤成功运行。安装了所有需要的软件包（vsto4.0、.net framework、interop office），如果我通过双击自我安装添加 .vsto，它运行正常。但是 - 正如我在开头所写的 - 它不起作用，vsto 插件列为非活动插件。

我做错了什么，如何在另一台电脑上安装 vsto？

**更新** 我找到了答案。只需简单地重新安装整个电脑（windows、office）然后它就可以工作了。所以问题不仅在于安装程序，还在于系统集成。

我也尝试了 OneClick 解决方案，它也可以工作。在 msdn（上的链接），正确的注册密钥和正确的 installer-pre-req 非常重要（如果缺少某些东西，它永远不会正确运行/安装）。

# java - 如何在工作过程中刷新视图

> ID：12077620
> 
> 赞同：2
> 
> 时间：2012-08-22T16:36:16.803
> 
> 标签：java, jsf, primefaces, polling

我想询问有关“刷新视图”问题的帮助；）

我有一个应用程序检查数据库中的一些数据。整个过程需要一个小时的时间，所以我想告诉用户在特定时刻发生了什么（检查元素 1，检查元素 2 等等..）。我的问题是当“检查过程”在 bean 中工作时如何做到这一点。

我有一个带有对话框的模板，命令按钮在开始时调用它，并在方法完成时隐藏。这很好用，但是当我想把日志信息之类的东西放到这个对话框中时，就会出现问题。

代码：

1.  模板

    ```
    <h:body styleClass="workBody" onload="logToggle();">
    <h:form id="form">
        <p:ajaxStatus onstart="dialog.show();" onsuccess="dialog.hide();"/>
        <p:poll interval="2" update="logScroll"  global="false"/>
        <p:dialog id="dialog" header="LOADING.."  widgetVar="dialog" resizable="false"
                  width="400" modal="true" showEffect="clip" closable="false"
                  hideEffect="fold">
            <br />
            <p:scrollPanel style="height:300px"  id="logScroll" mode="native">
                <p:dataTable id="logPanel" var="log" value="#{viewBean.log}">
                <p:column  headerText="Log">
                    <h:outputText value="#{log}" />
                </p:column>
            </p:dataTable>
            </p:scrollPanel>
            <p:graphicImage value="resources/images/ajax-loader.gif" />
        </p:dialog>

        <p:layout fullPage="true"  id ="layout">
            <p:layoutUnit position="center" id="center">
                <ui:insert name="center"></ui:insert>
            </p:layoutUnit>
        </p:layout>
    </h:form> 
    ```

2.  UI插入

    ```
    <ui:define name="center">
        <p:panel >
            <p:commandButton value="Check" action="#{actionClass.checkProject}" />         
        </p:panel>
    </ui:define> 
    ```

3.  动作类

    ```
    public class AccionClass {
        static Logger logger = Logger.getLogger(actionBean.class);
        private ArrayList<String> log;

        public ArrayList<String> getLog() {
            return log;
        }

        public void setLog(ArrayList<String> log) {
            this.log = log;
        }

        public void checkProject() {
            try {
                logger.info("Project Checking : started");
                for (String sequence : selectedNodes) {
                    logger.info("Project Checking : node " + sourceNode.getName());
                    LinkedHashMap<String, Item> nodeElements = getNodeItems(sequence)
                    for (WsItem item : nodeElements.values()) {
                        checkItem(item);
                    }
                }
            } catch (Exception ex) {
                logger.info("Check project exception", ex);
            }
        }

        public void checkItem(Item item) {
            logger.info("Checking item : started");
            try {
                Item itemToClone = sourceInstance.getApi().getVersionItem(version);
                logger.info("Checking item : item " + itemToClone.getName() + " with version " + version);
                log("info", "Checking item : item " + itemToClone.getName() + " with version " + version, false);
            } catch (Exception e) {
                messages.put("error in check item with version " + version, "Error");
                logger.info("error in check item with version " + version);
            }
        }

        public void log(String severity, String message, Boolean isMessage) {
            log.add(message);
        }
    } 
    ```

4.  视豆

    ```
    @SessionScoped
    @ManagedBean
    public class ViewBean {

        private ArrayList<String> log;
        static Logger logger = Logger.getLogger(ViewBean.class);
        public ActionClass action = new ActionClass();

        public ArrayList<String> getLog() {
            if (page.equals("checkProject")) {
                return action.getLog();
            } else return log;
        }

        public void setLog(ArrayList<String> log) {
            this.log = log;
        }
    } 
    ```

我的想法是，在 checkProject 调用之后，该过程将正常工作（对于 actionClass 中的循环），并且 ajax poll 将使用 viewBean getLog 刷新带有数据表的对话框。
此时数据流如下所示：

1.  viewBean 中的 getLog 每 2 秒调用一次。在我单击命令按钮之前。
2.  在显示命令按钮单击对话框并获取没有值的日志后 - 数据表为空。
3.  checkProject 正在工作，内容已写入 log4j 记录器和 actionClass 日志，但 viewBean.getLog 没有调用。
4.  刷新方法完成视图并关闭对话框后。

当我没有清除 actionClass 中的日志并再次执行此方法时，在第二步中，我从上次调用中获取了值，因此方法有效。

感谢帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:44:51.500

我认为[p:poll](http://www.primefaces.org/showcase/ui/poll.jsf)正是您想要的。

* * *

# groovy - 用一个或两个参数关闭的 groovy 方法

> ID：12077622
> 
> 赞同：12
> 
> 时间：2012-08-22T16:36:27.300
> 
> 标签：groovy, closures

我想编写一个将闭包作为参数并将两个参数传递给它的方法，但是编写该闭包的人可以根据自己的喜好指定一个或两个参数

我试过这样：

```
def method(Closure c){
     def firstValue = 'a'
     def secondValue = 'b'
     c(firstValue, secondValue);
}

//execute
method { a ->
   println "I just need $a"
}
method { a, b ->
   println "I need both $a and $b"
} 
```

如果我尝试执行此代码，结果是：

```
Caught: groovy.lang.MissingMethodException: No signature of method: clos2$_run_closure1.call() is applicable for argument types: (java.lang.String, java.lang.String) values: [a, b]
Possible solutions: any(), any(), dump(), dump(), doCall(java.lang.Object), any(groovy.lang.Closure)
    at clos2.method(clos2.groovy:4)
    at clos2.run(clos2.groovy:11) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-22T17:16:37.637

[`maximumNumberOfParameters`](http://groovy.codehaus.org/api/groovy/lang/Closure.html#getMaximumNumberOfParameters%28%29)你可以在调用之前询问闭包：

```
def method(Closure c){
    def firstValue = 'a'
    def secondValue = 'b'
    if (c.maximumNumberOfParameters == 1)
        c(firstValue)
    else
        c(firstValue, secondValue)
}

//execute
method { a ->
    println "I just need $a"
}
method { a, b ->
    println "I need both $a and $b"
} 
```

输出：

```
I just need a
I need both a and b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T16:39:00.327

最简单的就是给它一个默认值：

```
method { a, b=nil ->
   println "I just need $a"
} 
```

您还可以使用数组：

```
method { Object[] a ->
  println "I just need $a"
} 
```

# iphone - API 调用根据空白编码返回不同的结果（%2520 与 %20）

> ID：12077624
> 
> 赞同：1
> 
> 时间：2012-08-22T16:36:36.553
> 
> 标签：iphone, ruby-on-rails, ruby, sphinx, yql

我刚从 ASIHTTPRequest 切换到 AFNetworking。

我的应用程序允许用户输入搜索词，然后我对我的服务器 (rails) 进行 api 调用以检索要在手机上显示的相关对象列表。很简单。

**太长了，看不懂**

使用 ASI 库，发送到服务器的搜索词将类似于`st%20helena`. 现在，使用 AFNetworking，我发送到服务器的搜索词是`st%2520helena`. 奇怪的是，这实际上有所作为。使用`%20`，我没有收到任何结果。使用`%2520`，我收到了我期望的结果。

我的问题是，**为什么这会有所作为**？我知道这`%2520`是一个编码的 '%' + 20，它等于一个空格字符，在我看来应该与 pass 相同`%20`。

**细节**

之前，我只是在第一次编码后将搜索词附加到 URL：

```
NSString *encoded = [@"st helena" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *url = [NSString stringWithFormat:@"http://www.example.com/?=%@, encoded]; 
```

`parameters`现在，使用AFNetworking ，我将 NSDictionary 传递给`AFHTTPClient#getPath`.

```
NSString *encoded = [@"st helena" stringByAddingPercentEscapesUsingEncoding:NSUTR8StringEncoding];
NSDictionary *dict = @{ @"q" : encoded };
[[myClient sharedClient] getPath:@"" parameters:dict ...] 
```

由于 AFNetworking 对字典中的项目进行编码，我的搜索字符串被双重编码，这就是为什么 '%20' 的 % 被转换为 '%25' 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:34:59.760

> 我的问题是，为什么这会有所不同？我知道这`%2520`是一个编码的 '%' + 20，它等于一个空格字符，在我看来应该与 pass 相同`%20`。

不，它们不相同。解析代码不应该只是一遍又一遍地解码，直到没有更多的百分号。如果是这种情况，就不可能传输实际的百分比字符。它应该只解码一次。这意味着，如果`%2520`通过线路，它会被解码为数据`%20`并在那里停止处理。如果`%20`通过电线，它会被解码一次进入一个空间。解码应该只发生一次。如果您的 Web 服务被`%2520`视为一个空间，那么它就有一个双重解码错误。

# objective-c - “detailItem”和“_detailitem”之间的区别

> ID：12077630
> 
> 赞同：0
> 
> 时间：2012-08-22T16:36:46.670
> 
> 标签：objective-c, ios, cocoa-touch

和 之间的id有什么区别和使用`detailItem`，`_detailItem`我在Splitview控制器模板中发现。

```
if (_detailItem != newDetailItem) {
    _detailItem = newDetailItem;

    // Update the view.
    [self configureView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:09:27.597

我不完全确定您的意思，但在大多数情况下，在 ObjC 类中，下划线前缀表示 an`ivar`是私有的或由属性公开的。

在这种情况下`_detailItem`，它似乎是一个实例变量，而`detailItem`可能是访问它的属性。

更多关于 ObjC 属性的信息：http: [//www.cocoacast.com/? q=node/103](http://www.cocoacast.com/?q=node/103)

# python - 在 Google App Engine 中预加载实体

> ID：12077635
> 
> 赞同：0
> 
> 时间：2012-08-22T16:37:13.917
> 
> 标签：python, google-app-engine

我刚刚在 GAE 上部署了一个站点，它需要我为下拉字段（即我们的状态、状态等）暂存一些数据。

在开发中，我为每种类型的数据（例如美国州实体）创建了一个实体，并且能够使用交互式控制台通过创建实体然后调用 put() 方法来预加载数据。

现在应用程序已部署，我不知道预加载此数据的方法。您如何建议在已部署的实例中执行此操作？

检索数据时，我使用的是 SDK 版本 1.7.0、python 2.7、High Replication Datastore (HRD) 和 memcache。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:58:26.607

If you want to do it programmatically, you may use the interactive console in production. Check out [How do I activate the Interactive Console on App Engine?](https://stackoverflow.com/questions/1782906/how-do-i-activate-the-interactive-console-on-app-engine)

You may also create a temporary request handler that'll do the job, deploy it (e.g. as a different version of the app to make it easy to delete) and launch the respective URL in your browser.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:48:08.757

您可以使用bulkloader 将您的实体上传到您部署的版本。有关详细信息和示例，请参阅文档[上传和下载数据](https://developers.google.com/appengine/docs/python/tools/uploadingdata)。

# c# - 有效而清晰地评估六个条件

> ID：12077643
> 
> 赞同：0
> 
> 时间：2012-08-22T16:37:55.217
> 
> 标签：c#, performance, algorithm, validation, nested-loops

对于我正在编写的表单，我有以下（简化的）条件需要验证：

a > b

a > c

a > d

b > c

b > d

c > d

从图形上看，这可以看作：

![在此处输入图像描述](../Images/eb6706dc03a7476697bdc2dc186b3cc0.png)

用户可以自由输入 a、b、c 和 d 的值，这就是为什么需要验证它们以确保它们遵守这些规则的原因。我遇到的问题是写一些清晰有效地评估每个陈述的东西。当然，最明显的方法是将每个语句单独评估为 if 语句。不幸的是，这占用了很多代码行，我宁愿避免用一堆几乎做同样事情的 if 块来混淆方法。我确实使用数组提出了以下嵌套的 for 循环解决方案。我构建了一个值数组，并循环了两次（用类似 Python 的伪代码演示）：

```
A = [a, b, c, d]
for i in range(3):
    for j in range(i, 4):
        if i > j and A[i] >= A[j]:
            print("A[i] must be less than A[j]")
        else if i < j and A[i] <= A[j]:
            print("A[j] must be greater than A[i]") 
```

我对这个解决方案的问题是很难阅读和理解 - 解决方案只是不清楚。

我有一种挥之不去的感觉，那就是那里有一个更好、更清晰的答案，但我一生都想不出它。这不是家庭作业或任何东西——我实际上正在做一个项目，这个问题（或它的细微变化）不止一次出现，所以我想制作一个清晰有效的可重用解决方案。任何输入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T16:39:52.277

```
if a > b > c > d:
    do ok
else:
    for x in range(3):
        if A[i] <= A[i+1]:
             print A[i], ' not greater than', A[i+1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:46:29.017

如果你不能假设比较的传递性：

```
from itertools import combinations
for x, y in combinations(A, 2):
    if x <= y:
        print("{} not greater than {}".format(x, y)) 
```

否则，f p 的解是最优的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:31:52.767

您可以为每个检查创建委托并将它们添加到数组中。创建适当的委托，例如 bool LargerCheck(a,b, string error) 并将它们添加到您可以循环的数组中......

虽然有很多工作，而且更复杂，如果更具可读性的话。我想我会在单个验证块中隐藏凌乱的检查，并在正常代码中进行易于阅读的单个检查。像这样的东西；

```
// Simple readable check in normal code
if (!ValidationOk(a,b,c,d,response) 
{
  ShowResponse(response);
  Break;
}

// messy routine
private bool ValidationOk(a,b,c,d,List<string> valerrors)
{
  valerrors.Clear();
  if (a<b) valerrors.Add("a < b");
  if (a<c) valerrors.Add("a < c");
  ....
  return valerrors.Count == 0;
} 
```

# .net - 在没有焦点的情况下将窗口置于前面

> ID：12077645
> 
> 赞同：3
> 
> 时间：2012-08-22T16:38:02.963
> 
> 标签：.net, windows, winforms, winapi, windows-7

我的 .NET 应用程序在后台运行，偶尔会创建并显示一个表单。表单应该在所有其他窗口上方可见，但没有焦点。

我的第一种方法是设置表单的 TopMost 属性，但在许多情况下由于我无法解释的原因而失败。

然后我尝试在 Shown 事件处理程序中调用 BringToFront，但这并没有做任何事情。

我还尝试了 BringWindowToTop API，它返回 true（= 成功），但没有结果。

现在我坚持使用 SetForegroundWindow，它可以工作，但也将焦点放在窗口上（应该如此）。

任何建议，将不胜感激。

（另外，我可以毫无问题地偷取焦点是正常的吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:40:19.633

这可能会帮助您：

```
[DllImport("user32.dll")]
public static extern bool SetWindowPos (IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, uint uFlags);
void Exmpl() {
    IntPtr HWND_TOPMOST = new IntPtr(-1);
    uint SWP_NOACTIVATE = 0x0010;
    uint SWP_NOMOVE = 0x0002;
    uint SWP_NOSIZE = 0x0001;
    SetWindowPos(form.Handle, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE);
} 
```

# python - 使用 Azure/Python 在 unicode 数据中检索表时出错

> ID：12077648
> 
> 赞同：2
> 
> 时间：2012-08-22T16:38:06.143
> 
> 标签：python, django, encoding, azure

我正在使用 Azure 和 python SDK。

我正在使用 Azure 的表服务 API 进行数据库交互。

我创建了一个包含 unicode 数据的表（例如希伯来语）。创建表并在 unicode 中设置数据似乎工作正常。我可以使用 Azure 存储资源管理器查看数据库中的数据，并且数据是正确的。

问题是在检索数据时。每当我检索特定行时，数据检索对于 unicode 数据都可以正常工作：

```
table_service.get_entity("some_table", "partition_key", "row_key") 
```

但是，当尝试使用过滤器获取多个记录时，对于其中包含非 ascii 字符的任何行都会引发编码异常：

```
tasks = table_service.query_entities('some_table', "PartitionKey eq 'partition_key'") 
```

这是 azure python SDK 上的错误吗？有没有办法预先设置编码以免崩溃？（azure 不允许访问 sys.setdefaultencoding 并且在 settings.py 上使用 DEFAULT_CHARSET 也不起作用）

我使用[https://www.windowsazure.com/en-us/develop/python/how-to-guides/table-service/](https://www.windowsazure.com/en-us/develop/python/how-to-guides/table-service/)作为对表服务 API 的引用

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:10:09.533

对我来说，这看起来像是 Python 库中的一个错误。我快速修复并在 GitHub 上提交了一个拉取请求：[https](https://github.com/WindowsAzure/azure-sdk-for-python/pull/59) ://github.com/WindowsAzure/azure-sdk-for-python/pull/59 。

作为目前的解决方法，请随意克隆我的 repo（记得签出 dev 分支）并通过`pip install <path-to-repo>/src`.

警告：我还没有非常彻底地测试我的修复，所以你可能想等待微软的人来看看它。

# javascript - 如何在 Google 电子表格脚本中测试范围参数的类型？

> ID：12077655
> 
> 赞同：9
> 
> 时间：2012-08-22T16:38:57.493
> 
> 标签：javascript, google-apps-script, google-sheets

我刚刚开始修改 Google 电子表格的脚本，但我遇到了一个问题：

如何测试函数参数的类型是否是单元格范围？

我想做这样的事情：

```
if(typeof intput != "range") {
  throw "input must be a range";
} 
```

从谷歌的例子[here](https://developers.google.com/apps-script/execution_custom_functions)（页面中间）：

```
if (typeof inNum != "number") {  // check to make sure input is a number
  throw "input must be a number";  // throw an exception with the error message
} 
```

所以这似乎是测试变量类型的正确方法。但我不知道如何测试类型是否是一系列单元格。

如果我可以指定范围是一维还是二维，那就更好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T17:25:41.057

一系列单元格只是一个数组（多维数组） Javascript 在这种情况下存在问题。数组被视为一个对象。所以首先检查你是否有“对象”类型，然后你可以像这样测试。

```
if(typeof intput=="object"&&intput.length!=undefined) {
  //input is a array
}else{
  //Not a array
} 
```

通过测试默认属性，您可以确定您有一个数组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-10T02:38:07.763

范围可以表示单个单元格（例如`'A1'`）或一组单元格（例如`'A1:A2'`）。

当作为自定义函数参数（例如 ）传递时，范围将转换为范围值`=processRangeVal(A1:A2)`。

如果范围是单个单元格，则范围值就是该单元格中的数据。

如果范围是一组单元格，则范围值是一个二维数组。第一个维度是行，第二个维度是每行中的列。

要测试代表一个单元格与一组单元格的范围值：

```
function processRangeVal(rangeVal) {
  if (Array.isArray(rangeVal[0])) {
    // do 2d-array handling
  } else {
    // do cell data handling
  }
} 
```

`rangeVal[0]``undefined`如果范围是单个单元格并且单元格数据不支持索引，则解析为。在这种情况下`Array.isArray(undefined)`解析为 false 这是我们想要的。

# php - 通过 codeigniter 创建会话并使用唯一 ID 登录用户的最佳方式

> ID：12077660
> 
> 赞同：0
> 
> 时间：2012-08-22T16:39:36.853
> 
> 标签：php, class, codeigniter, session

我一直在代码点火器中重建我的社交网络，并正在寻找一种最佳方式来启动用户登录时登录的会话（可能与使用代码点火器会话类相反？因为我想使用他们在何时创建的 ID他们记账）

我已经能够创建一个用户并对他们的密码进行哈希和加盐，并使用哈希密码登录他们。

我的网站将有很多“登录”和“注销”视图，这些视图因用户是否登录而异。

话虽如此，登录后我想使用注册时创建的 id 启动登录会话。

这是我的控制器，它将用户登录减去我正在尝试做的事情。

```
function validate_credentials()
{
    $this->load->model('user_model', 'um');
    $login = $this->input->post('submit');
        $this->load->library('encrypt');

    if($login) {
        $user = $this->um->
                    validate(array('email' => $this->input->post('email')));
        if( $user ) {
            if($user->password == $this->encrypt->sha1( $user->salt .
                         $this->encrypt->sha1($this->input->post('password')))) {
                  $this->session->set_userdata( array('email' => 
                                   $this->input->post('email')
                  ));
                  redirect('account/dashboard');
                  exit;
            }
        }
    }
    $this->index();
}

/*---------- EDIT ----------*/
Getting these errors:

  Message: Cannot modify header information - headers already sent by (output started at /Users/mycomputer/Sites/cl_ci_new/application/controllers/auth.php:44)

    Filename: libraries/Session.php

    Line Number: 672

    Message: Cannot modify header information - headers already sent by (output started at /Users/mycomputer/Sites/cl_ci_new/application/controllers/auth.php:44)

    Filename: helpers/url_helper.php

    Line Number: 542

and here are those lines in my code or the Session.php file:

    // Set the cookie
        setcookie(
            this->sess_cookie_name,
            $cookie_data,
            $expire,
            $this->cookie_path,
            $this->cookie_domain,
            $this->cookie_secure
                ); 
```

和 url_helpers.php：

```
switch($method)
        {
            case 'refresh'  : header("Refresh:0;url=".$uri);
                break;
            default         : header("Location: ".$uri, TRUE, $http_response_code);
                break;
        } 
```

我不明白问题是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:11:15.790

成功验证后，在会话中保存变量：

```
if ($user->password == ...) {
     $this->session->set_userdata('logged_in', TRUE);
}
else {
     $this->session->set_userdata('logged_in', FALSE);
} 
```

稍后，当需要时，检查：

```
if ($this->session->userdata('logged_in')) {

} 
```

# algorithm - 预先计算订单时的线性时间复杂度排序算法

> ID：12077666
> 
> 赞同：0
> 
> 时间：2012-08-22T16:40:05.037
> 
> 标签：algorithm, r, correlation, missing-data

我正在尝试用 C++ 编写一个有效的排名算法，但我将在 R 中展示我的案例，因为这样更容易理解。

```
> samples_x <- c(4, 10, 9, 2, NA, 3, 7, 1, NA, 8)
> samples_y <- c(5, 7, 9, NA, 1, 4, NA, 8, 2, 10)
> orders_x <- order(samples_x)
> orders_y <- order(samples_y)
> cbind(samples_x, orders_x, samples_y, orders_y)
      samples_x orders_x samples_y orders_y
 [1,]         4        8         5        5
 [2,]        10        4         7        9
 [3,]         9        6         9        6
 [4,]         2        1        NA        1
 [5,]        NA        7         1        2
 [6,]         3       10         4        8
 [7,]         7        3        NA        3
 [8,]         1        2         8       10
 [9,]        NA        5         2        4
[10,]         8        9        10        7 
```

假设上述内容已经预先计算。对每个样本集执行简单的排序需要线性时间复杂度（结果很像`rank`函数）：

```
> ranks_x <- rep(0, length(samples_x))
> for (i in 1:length(samples_x)) ranks_x[orders_x[i]] <- i 
```

对于我正在从事的工作项目，在线性时间复杂度中模拟以下行为对我很有用：

```
> cc <- complete.cases(samples_x, samples_y)
> ranks_x <- rank(samples_x[cc])
> ranks_y <- rank(samples_y[cc]) 
```

当给定 n 个相同长度的集合时，该`complete.cases`函数返回没有任何集合包含 NA 的索引。该`order`函数返回与已排序样本集对应的索引的排列。该`rank`函数返回样本集的等级。

这个怎么做？如果我提供了有关问题的足够信息，请告诉我。

更具体地说，我正在尝试基于 Spearman 的秩和相关系数测试构建一个相关矩阵，以便正确处理 NA。NA 的存在要求对每个成对样本集 ( `s n^2 log n`) 计算排名；我试图通过为每个样本集 ( `s n log n`) 计算一次订单并为每个成对比较使用线性复杂度来避免这种情况。这甚至可行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:20:12.393

看起来，当你计算出两个数组的等级相关性时，你想从两个数组中删除其中任何一个都有 NA 的位置的元素。

你有

for (i in 1:length(samples_x)) rank_x[orders_x[i]] <- i

你能把它改成类似

```
wp <- 0;
for (i in 1:length(samples_x)) {
if ((samples_x[orders_x[i]] == NA) ||
 (samples_y[orders_x[i]] == NA))
 {
   ranks_x[orders_x[i]] <- NA;
 }
 else
 {
   ranks_x[orders_x[i]] <- wp++;
 }
} 
```

然后您可以稍后继续并压缩 NA，或者希望相关子例程忽略它们。

# jquery - css - 在内容上方浮动页眉和页脚，使用 jquery 自动调整背景大小

> ID：12077667
> 
> 赞同：1
> 
> 时间：2012-08-22T16:40:10.270
> 
> 标签：jquery, css

我正在尝试重现类似于[bulgari.com](http://en.bulgari.com/department.jsp?cat=cat00002)的布局，就页眉、页脚和自动调整背景图像的大小而言（我知道 bulgari.com 有一个 flas 电影作为背景，但我需要使用自动调整大小的图像到内容 div）。我不太擅长解码css和jquery，所以如果有人能抽出几分钟，我想知道如何将页眉和页脚浮动到内容div上方，并在文档加载和窗口上调整内容背景图像的大小调整事件大小。

到目前为止我已经这样做了，但它非常基本。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-7">
<title>Untitled Document</title>
<link href="css/default.css" rel="stylesheet" type="text/css">
<link href="css/layout.css" rel="stylesheet" type="text/css">
<script src="http://cdn.jquerytools.org/1.2.5/full/jquery.tools.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    var divheight = $(document).height() - $(".header").height() - $(".footer").height();
    $(".main-container").height(divheight);
});

// for the window resize
$(window).resize(function() {
    var divheight = $(document).height() - $(".header").height() - $(".footer").height();
    $(".main-container").height(divheight);
});

//-->
</script>
</head>

<body class="bg">
<div class="header"></div> <!-- header end -->

<div class="main-container">
    <div class="content">abc</div>
</div> <!-- main-container end -->

<div class="footer"></div> <!-- footer end -->

<div class="bg-container"></div> <!-- bg-container end -->
</body>
</html> 
```

布局.css：

```
@charset "utf-8";
/* CSS Document */

.bg {
    background: url(../images/thematic.jpg) repeat scroll;
}
.header {
    background: transparent url("../images/trans.png") repeat scroll 0 0;
    height: 80px;
    min-width: 990px;
    width: 100%;
    z-index: 100;
}
.bg-container {
    background: #F00;
}

.footer {
  background: url("../images/trans.png") repeat scroll 0 0 transparent;
  bottom: 0;
  font-size: 10px;
  height: 30px;
  left: 0;
  min-width: 990px;
  overflow: hidden;
  width: 100%;
}
.content {
    width: 990px;
    margin: 0px auto;
    background: #999;
}
.main-container {
    min-height: 500px;
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:54:49.083

这就是你所追求的吗？[http://jsfiddle.net/7jd7t/](http://jsfiddle.net/7jd7t/)
我所做的只是将主体的背景设置为固定，并将背景大小设置为 100%。无需编写脚本。

如果这不是您所追求的，请随时告诉我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T11:22:41.503

复制另一个网站，帮不了你。但就浮动页眉和页脚而言，如果你想要的是它们粘在顶部和底部并出现在其他内容之上，这可以使用纯 css 轻松完成。

HTML：

```
<header id="fixedhead">
Your header content goes here
</header>

<footer id="fixedfoot">
Footer content
</footer> 
```

CSS：

```
#fixedhead{
position: absolute;
z-index:1000;
top: 0;
bacground-color: rgba(0,0,0,0.5) /*50% transparent black background*/
}
#fixedfoot{
position: absolute;
z-index:1000;
bottom: 0;
bacground-color: rgba(0,0,0,0.5) /*50% transparent black background*/
} 
```

# java - java中的ping值

> ID：12077669
> 
> 赞同：4
> 
> 时间：2012-08-22T16:40:14.213
> 
> 标签：java, ip, return-value, ping

我知道已经以不同的方式解决了这个问题，但是我检查了 stackoverflow 并没有找到我正在寻找的答案。

为了简单起见：有没有办法在*Windows下将***Time ping 值**获取到 IP 服务器？

 *我知道如何检查某些服务器是否可以访问，但我想有精确的值，就像我们可以在终端上阅读一样。

**感谢您**的帮助和理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T16:42:54.403

你可以这样做：

```
//The command to execute
String pingCmd = "ping " + ip + " -t";

//get the runtime to execute the command
Runtime runtime = Runtime.getRuntime();
Process process = runtime.exec(pingCmd);     

//Gets the inputstream to read the output of the command
BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));

//reads the outputs
String inputLine = in.readLine();
while ((inputLine != null)) {
    if (inputLine.length() > 0) {
       ........
    }
    inputLine = in.readLine();
} 
```

[参考](http://wikijava.org/wiki/Execute_external_program_%28ping_and_complain%29)

**更新：** 根据您的需要

```
public class PingDemo {    
    public static void main(String[] args) {
        String ip = "localhost";
        String time = "";

        //The command to execute
        String pingCmd = "ping " + ip;

        //get the runtime to execute the command
        Runtime runtime = Runtime.getRuntime();
        try {
            Process process = runtime.exec(pingCmd);

            //Gets the inputstream to read the output of the command
            BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));

            //reads the outputs
            String inputLine = in.readLine();
            while ((inputLine != null)) {
                if (inputLine.length() > 0 && inputLine.contains("time")) {
                     time = inputLine.substring(inputLine.indexOf("time"));
                     break;                        
                }
                inputLine = in.readLine();
            }    
            System.out.println("time --> " + time);    
        } catch (Exception ex) {
            System.out.println(ex);
        }
    }
} 
```

写的有点仓促。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:47:41.350

您可以调用**ping**命令并读取输出（如上一个答案中所述），或者如果您需要较低级别的访问权限（就像您可以使用 RAW 套接字一样），您可以查看**jpcap** java 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:51:47.767

[如此处](https://stackoverflow.com/a/12077703/1329572)所示，您将需要使用`Runtime`该类来发送 ping。您所需要做的就是解析输入流（可能使用正则表达式来获取时间 ping 值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-27T09:31:27.783

```
public static void main(String[] args) {

    System.out.println("Enter the host to be pinged : ");
    Scanner sc = new Scanner(in);
    String str = sc.next();
    System.out.println("Enter the no. of packets to be sent : ");
    int packets = sc.nextByte();
    String pingResult;
    int count=0;
    try{
        String command = "ping -c "+ packets +" -w 10 " + str;
        Process process = Runtime.getRuntime().exec(command);
        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String inputLine;
        while ((inputLine = reader.readLine()) != null) {
            if(count==packets+4) {
                pingResult = (inputLine.substring(inputLine.indexOf("=")));
                pingResult = (pingResult.substring
                        (pingResult.indexOf("/")+1,pingResult.indexOf("/")+7));
                System.out.println(pingResult + " ms");
            }
            count++;
        }
        in.close();
        if(count==0)System.out.println("Wrong host entered.");
    }catch(Exception e){
        System.out.println("Exception caught: " + e.toString());
    }
} 
```

}

输出：输入要ping的主机：8.8.8.8输入号码。要发送的数据包数：5 31.406 ms

进程以退出代码 0 结束*

# rest - Jersey Grizzly REST 服务在本地主机之外不可见

> ID：12077670
> 
> 赞同：31
> 
> 时间：2012-08-22T16:40:30.873
> 
> 标签：rest, glassfish, jersey, ip-address, jax-rs

我正在尝试使用 Jersey 和 Glassfish Grizzly 在 Java 中编写 REST 服务。我有一个非常简单的案例在内部工作，但似乎无法从外部地址调用服务器。我尝试使用具有外部可见 IP 的各种不同机器对，并尝试在服务器中指定实际 IP 地址而不是`localhost`，但没有任何效果。我有点松散地遵循[这里](http://jersey.java.net/nonav/documentation/latest/user-guide.html)的官方用户指南。我的资源：

```
package resources;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/simpleREST")
public class SimpleRESTResource
{
    @GET
    @Produces("text/plain")
    public String getMessage()
    {
        return "Message from server\n";
    }
} 
```

和服务器：

```
import java.io.IOException;
import java.net.URI;

import javax.ws.rs.core.UriBuilder;

import org.glassfish.grizzly.http.server.HttpServer;

import com.sun.jersey.api.container.grizzly2.GrizzlyServerFactory;
import com.sun.jersey.api.core.PackagesResourceConfig;
import com.sun.jersey.api.core.ResourceConfig;

public class Main
{
    public static final URI BASE_URI = UriBuilder.fromUri("http://localhost").port(9998).build();

    public static void main(String[] args) throws IOException
    {
        System.out.println("Starting grizzly...");
        ResourceConfig rc = new PackagesResourceConfig("resources");
        HttpServer myServer = GrizzlyServerFactory.createHttpServer(BASE_URI, rc);
        System.out.println(String.format("Jersey app started with WADL available at %s/application.wadl\n" +
                "Try out %s/simpleREST\nHit enter to stop it...", BASE_URI, BASE_URI));
        System.in.read();
        myServer.stop();
    }
} 
```

在同一台机器上，我可以使用成功与服务器交互

```
curl -X GET localhost:9998/simpleREST 
```

或者

```
curl -X GET [external numeric address]:9998/simpleREST 
```

非常感谢您的任何建议。

* * *

## 解决方案

我已通过将服务器 URI 设置为`http://0.0.0.0:9998`而不是`localhost`、`127.0.0.1`或实际地址来解决此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-05-07T09:47:40.790

要使服务器 IP 地址在 localhost 之外可见，您必须先打开必要的防火墙端口（如果有），或者使用“0.0.0.0”而不是“localhost”，以便服务器侦听所有 IP 地址和网络适​​配器。在您的本地网络中进行测试之前，请尝试从您的客户端设备 ping 您的服务器设备以检查是否存在实际连接或设备是否根本没有连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-06T22:45:25.707

使用 Jersey 和 Grizzly 2.30，它更简单：

```
final ResourceConfig rc = new ResourceConfig().packages("com.rest");

HttpServer httpServer = Grizzly

HttpServerFactory.createHttpServer(URI.create("http://0.0.0.0:9998/api/"), rc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-09T07:41:47.533

或者，您可以尝试以下代码：

```
 ResourceConfig rc = new PackagesResourceConfig("your-rest-packages");
    HttpHandler handler = ContainerFactory.createContainer(HttpHandler.class, rc);
    server = new HttpServer();
    server.getServerConfiguration().addHttpHandler(handler);
    //attach listeners

    InetAddress localHost = InetAddress.getLocalHost();
    String localHostAddr = localHost.getHostAddress();
    NetworkListener localHostListener = new NetworkListener("localhost", localHostAddr, port);
    server.addListener(localHostListener);
    InetAddress loopback = InetAddress.getLoopbackAddress();
    String loopbackAddr = loopback.getHostAddress();
    NetworkListener loopbackListener = new NetworkListener("loopback", loopbackAddr, port); 
```

现在您的服务器可以同时列出到 localhost 和环回

# wpf - WPF 找不到 DataConext

> ID：12077672
> 
> 赞同：0
> 
> 时间：2012-08-22T16:40:37.517
> 
> 标签：wpf

我有一个看起来像这样的 xaml 文件。

```
<Window x:Class="Space4it.Energilab.DataApplicationWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:Space4it.Energilab.DataApplicationWPF"
    Title="Space4it NetBitter database interface" Height="700" Width="1200" 
    x:Name="rootElement"
    Icon="program.ico">

<Window.DataContext>
<local:MainWindowDataModel/></Window.DataContext> 
```

MainWindowDataModel 位于主 WPF 项目中，它在“调试 - X86”中工作。但是当更改为“生产 - X64”时，我收到此错误：

> 错误 1 ​​命名空间“clr-namespace:Space4it.Energilab.DataApplicationWPF”中不存在名称“MainWindowDataModel”。C:\Users\tarp\Dropbox\Space4it\Development\Energilab\Development\Space4it.Energilab.Solution\Space4it.Energilab.DataApplicationWPF\MainWindow.xaml 10 5 Space4it.Energilab.DataApplicationWPF

我做了“清理”，重新编译....

有趣的是 DataGrid 获取数据，但网格内的这个 ComboBox 没有！这只是在其他计算机上安装程序时出现的问题。即 Windows Server 2008。

```
<DataGridComboBoxColumn Header="Key" SelectedValueBinding="{Binding Path=t_keys_id, UpdateSourceTrigger=PropertyChanged}">
                <DataGridComboBoxColumn.ElementStyle>
                  <Style TargetType="ComboBox">
                    <Setter Property="ItemsSource" Value="{Binding ElementName=rootElement, Path=DataContext.keyData}"/>
                    <Setter Property="IsEditable" Value="False"/>
                    <Setter Property="DisplayMemberPath" Value="nb_key" />
                    <Setter Property="SelectedValuePath" Value="id"/>
                  </Style>
                </DataGridComboBoxColumn.ElementStyle>
                <DataGridComboBoxColumn.EditingElementStyle>
                  <Style TargetType="ComboBox">
                    <Setter Property="ItemsSource" Value="{Binding ElementName=rootElement, Path=DataContext.keyData}"/>
                    <Setter Property="IsEditable" Value="True"/>
                    <Setter Property="DisplayMemberPath" Value="nb_key" />
                    <Setter Property="SelectedValuePath" Value="id"/>
                  </Style>
                </DataGridComboBoxColumn.EditingElementStyle>
              </DataGridComboBoxColumn> 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:22:04.300

猜测一下，我会说 Space4it.Energilab.DataApplicationWPF 程序集是用“x86”平台编译的，而不是“AnyCPU”或“x64”......所以当你切换配置时它无法访问该程序集的 64 位版本。

*   [如何确定 .NET 程序集是为 x86 还是 x64 构建的？](https://stackoverflow.com/questions/270531/how-to-determine-if-a-net-assembly-was-built-for-x86-or-x64)

如果它是第 3 方库，其来源您没有，那么您可以使用 CorFlags 破解它以允许将其 JITted 为 64 位（通过清除 32 位标志）。

*   [http://msdn.microsoft.com/en-us/library/ms164699(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms164699(v=vs.80).aspx)

*   [http://tipila.com/tips/53/how-to-check-if-a-dll-is-32-bit-or-64-bit](http://tipila.com/tips/53/how-to-check-if-a-dll-is-32-bit-or-64-bit)

如果您确实有源代码，那么您可以构建它以便在 64 位模式下使用它查看解决方案中的配置管理器，并检查“生产 - x64”中的项目使用了哪个平台配置

# regex - Visual Studio 使用正则表达式和单/双引号查找和替换

> ID：12077673
> 
> 赞同：1
> 
> 时间：2012-08-22T16:40:43.433
> 
> 标签：regex, visual-studio

如何使用 VS Find/Replace 进行替换：

**这**: $('a[name="lnkFind"]').on('click', 函数

**用这个**： $(document).on("click", "a[name='lnkFind']", function

我不确定哪些字符需要转义 - 单引号或双引号或两者兼而有之？我尝试过的所有模式似乎都找不到匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:23:33.063

您需要转义许多这些字符。

Find/Replace 会抱怨未转义的`(`and `)`，甚至是最后的裸露`(`，因为它缺少匹配的`)`. 还有方括号，用于字符集，最后是`$`.

所以这应该作为模式工作：

```
\$\('a\[name="lnkFind"\]'\).on\('click', function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:59:54.740

Except in special cases (such as vim regex), in general you can escape any and all special characters in regex to get their literal form, *i.e.* escaping a special character that doesn't need to be escaped, won't do any harm.

That said, here's the minimum that needs to be escaped:

```
\$\('a\[name="lnkFind"]')\.on\('click', function 
```

I don't think you'll need to escape anything in the replacement, because only a `$` or `\` followed by a number will be interpreted.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:54:23.643

您应该查看正则表达式中的特殊字符列表。

`$`, `.`, `[`,`]`都应该被转义。

[http://www.fon.hum.uva.nl/praat/manual/Regular_expressions_1__Special_characters.html](http://www.fon.hum.uva.nl/praat/manual/Regular_expressions_1__Special_characters.html)

# jquery - 提取带有特定文本的href

> ID：12077675
> 
> 赞同：0
> 
> 时间：2012-08-22T16:40:51.043
> 
> 标签：jquery, filter, siebel

我有几个在企业应用程序中动态生成的标签，如下所示

```
<a href='JavaScript:SWESubmitForm(document.SWEForm1_0,s_1,"s_1_1_1_0","1-SXPINW")' onclick='Edit_SList__0__Control__Renew_SPO__onclick(null, "s_1_1_1_0")'  tabindex=2997  id='s_1_1_1_0'>Renew PO</a>
<a href='JavaScript:SWESubmitForm(document.SWEForm1_0,s_2,"s_1_1_4_0","1-SXP9NW")' onclick='Edit_SList__0__Control__XRXAddFunds__onclick(null, "s_1_1_4_0")'  tabindex=2997  id='s_1_1_4_0'>Add Funds</a> 
```

我有以下 jQuery 代码来提取从标签中识别记录的唯一值

```
var href = $('a[href*="SWESubmitForm"]').attr('href');
var rowId = "";
    if( href != ""){
        hrefAr =  href.split('","');
        rowId = hrefAr[hrefAr.length - 1];
        rowId = rowId.substr(0,(rowId.length - 2));
    } 
```

上面的代码给了我**1-SXPINW**的值， 但我需要获得**1-SXP9NW 的**值（第二个链接，一页上可能有多个链接）。我需要为文本添加过滤器，基本上只检索具有特定文本的链接的值，例如“添加资金”。

我知道可以使用 each 并添加 if 语句来检查文本，但我想通过过滤器来完成。

请帮忙！！！

**编辑：**

我想我没有正确解释这个问题。我需要以这样的方式设置过滤器

```
if (text within a tag == "Add Funds") then get the value of ID within href attribute 
```

我想根据标签中的 text() 设置我的过滤器。我希望它能更好地澄清问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:53:57.257

您可以使用`.each()`循环链接并从 href 属性中提取所需的值。

```
$('a[href*="SWESubmitForm"]').each(function() {
    var rowId = "";
    var href = $(this).attr('href');
    if (href != "") {
        hrefAr = href.split('","');
        rowId = hrefAr[hrefAr.length - 1];
        rowId = rowId.substr(0, (rowId.length - 2));
        console.log(rowId);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:43:33.193

选择您想要的元素.. 如果其中有两个，只需使用 .eq() 因为它返回与您的选择器匹配的所有元素 - .eq 将返回一个 jquery 对象

```
var href = $('a[href*="SWESubmitForm"]').eq(1).attr('href'); // <- 
```

或将其转换为 dom 元素

```
var href = $('a[href*="SWESubmitForm"]')[1].href; 
```

此外，由于您有一个，`ID`您可以使用`ID`选择器选择您想要的

```
var href = $('#s_1_1_4_0').attr('href'); 
```

或者如果有太多，你需要找到一个 9NW.. 只需在你的支票中使用 indexOf

```
$('a[href*="SWESubmitForm"]').each(function(){
     var rowId = ""; 
     if(this.href.indexOf('1-SXP9NW') > -1){ // <-- use indexOf to see if href contains the string                  
         hrefAr =  this.href.split('","');
         rowId = hrefAr[hrefAr.length - 1];
         rowId = rowId.substr(0,(rowId.length - 2));    
     }
}); 
```

具有过滤功能

```
var href = $('a[href*="SWESubmitForm"]').filter(function(){
         return this.href.indexOf('1-SXP9NW') > -1;
}).attr('href'); 
```

毕竟这......你为什么不直接使用这个选择器？

```
$('a[href*="1-SXP9NW"]') 
```

**编辑：**

如果`Add Funds`是静态的.. 然后使用[:contains()](http://api.jquery.com/contains-selector/)选择器

```
var href = $('a:contains("Add Funds")').attr('href'); 
```

# javascript - 基本html页面和弹出窗口之间的数据交换

> ID：12077676
> 
> 赞同：2
> 
> 时间：2012-08-22T16:40:51.357
> 
> 标签：javascript, html, popup

我有这个 index.php 文件；

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Proj</title>
        <script type="text/javascript">
            function openWindow() {
                window.open("popup.php", "popup_id", "scrollbars=no,resizable,width=200,,left=300,top=300,height=200");
            }
        </script>
    </head>
    <body>
        <form name="form1" action="">
            <input name="initialdata" type="text" value="initial data" />
            <input type="button" value="Send" onClick="openWindow()" />
        </form>
    </body>
</html> 
```

和这个 popup.php 文件

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>popup</title>
        <script type="text/javascript">
            function putData() {
                //How to copy from that file -> document.formname.popupdata.value to 
                //index.php -> document.form1.initialdata.value???
                window.close();
            }
            function loadData() {
                //how to get the value "initial data"
                //from index.php -> document.form1.initialdata.value????????????
            }
        </script>
    </head>
    <body onLoad="loadData();">
        <form name="formname" action="">
            <input name="popupdata" type="text" value="" />
            <input type="button" value="Send" onClick="putData()" />
        </form>
    </body>
</html> 
```

如何从 index.php -> document.form1.initialdata.value 获取值“初始数据”以及如何从 popup.php -> document.formname.popupdata.value 复制到 index.php -> document.form1 .initialdata.value??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:44:10.280

使用

```
window.opener.document.getElementsByName("initialdata")[0].value; 
```

不过，这可能不适用于每个浏览器。有关详细信息，请参阅此问题：

[window.opener 替代品](https://stackoverflow.com/questions/4885765/window-opener-alternatives)

# apache - MOD_REWRITE：如何将 /something 重写为 /something.html？

> ID：12077682
> 
> 赞同：0
> 
> 时间：2012-08-22T16:41:07.720
> 
> 标签：apache, mod-rewrite

有人可以告诉我该怎么做吗？

我尝试使用以下代码，但我没有看到我做错了什么？

```
<IfModule mod_rewrite.c>
  RewriteEngine On
</IfModule>

<IfModule mod_rewrite.c>
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(*)$ $1.html
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:49:05.360

您`.`的正则表达式中缺少 a ：

这个：

```
RewriteRule ^(*)$ $1.html 
```

需要是：

```
RewriteRule ^(.*)$ $1.html 
```

您还可以添加此条件：

```
RewriteCond %{REQUEST_FILENAME}.html -f 
```

当有人请求一个不存在的页面并正确返回 404 时，防止出现 500 错误。

# javascript - 将值放回数组中的相应用户

> ID：12077685
> 
> 赞同：0
> 
> 时间：2012-08-22T16:41:22.600
> 
> 标签：javascript

从下面的代码示例中，我试图在遍历 text_array 的每个用户时从文本中获取位置。从文本中提取位置后，我试图将值放回与正确用户对应的数组中，但它给了我错误“text_array [i] 未定义”。我做错了什么？

```
function replace_undefined(text_array) {
    var userLocationText = {};
    for (i = 0, l = text_array.length; i < l; i++) {
        console.log(text_array[i].user);
        userLocationText[text_array[i].user] = text_array[i].location;
        var text = text_array[i].text;
        Placemaker.getPlaces(text, function (o) {
            console.log(o);
            if ($.isArray(o.match)) {
                if (o.match[0].place.name == "Europe" || o.match[0].place.name == "United States") {
                    var location = o.match[1].place.name;
                    userLocationText[text_array[i].user] = location;
                }
                if ($.isArray(o.match)) {
                    if (o.match[0].place.name !== "Europe") {
                        var location = o.match[0].place.name;
                        userLocationText[text_array[i].user] = location;
                    }
                }
            } else if (!$.isArray(o.match)) {
                var location = o.match.place.name;
                userLocationText[text_array[i].user] = location;
            }

            console.log(text_array);
        });
    }
}

}

text_array = [{
    user: a,
    user_id: b,
    date: c,
    profile_img: d,
    text: e,
    contentString: f,
    url: g,
    location: undefined
}, {
    user: a,
    user_id: b,
    date: c,
    profile_img: d,
    text: e,
    contentString: f,
    url: g,
    location: undefined
}, {
    user: a,
    user_id: b,
    date: c,
    profile_img: d,
    text: e,
    contentString: f,
    url: g,
    location: undefined
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:32:21.603

如上所述`Placemaker.getPlaces`肯定是异步的，所以这是一个肮脏的闭包：

```
Placemaker.getPlaces(text, (function () {
  var z = i;
  return function (o) {
    var i = z;
    ...
    console.log(text_array);
    };
})()); 
```

如果您使用除“i”之外的另一个变量，在它自己的回调中提取函数等，它会更干净。

基本上，不是发送一个函数作为 Placemaker.getPlaces 的第二个参数执行，而是将其包装在另一个立即执行的函数中。立即执行的包装函数保存“i”的当前值，并返回初始匿名函数。Placemaker.getPlaces 准备好后将使用初始函数，就像以前一样。

但是现在，由于闭包，我的“z”变量保存了在 for 循环中存在的“i”的值，并且可以在循环结束后很长时间内使用。

我知道，这不是很清楚。

编辑：好吧，也许[这个小提琴](http://jsfiddle.net/bChnx/)会有所帮助。

# android - 如何同时显示正常和拆分的ActionBar？

> ID：12077690
> 
> 赞同：18
> 
> 时间：2012-08-22T16:42:04.007
> 
> 标签：android, gmail, android-actionbar

我有更多的 ActionBar 项目，我正在使用 splitActionBarWhenNarrow 选项。最新的 Gmail 应用程序也使用它。但它在右上角也有一个自定义项目，显示当前未读电子邮件的数量。当我使用 splitActionBar 时，它会将我的所有操作项发送到底部。我怎样才能将它们中的一些发送到底部并迫使它们中的一些位于上侧。

![见右上角](../Images/dc7557d4cd950012f840117ddf3794ec.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-22T17:44:16.133

当 ActionBar 被拆分（使用`android:uiOptions="splitActionBarWhenNarrow"`）时，所有菜单项会自动转到底部栏，但自定义视图仍然可以放在顶部。

```
View customNav = LayoutInflater.from(this).inflate(R.layout.custom_view, null);
getActionBar().setCustomView(customView); 
```

# javascript - 主干.js 和不在模型中的状态

> ID：12077691
> 
> 赞同：2
> 
> 时间：2012-08-22T16:42:10.097
> 
> 标签：javascript, backbone.js

在 Backbone 的数据驱动范式中，主干视图/路由器应该订阅模型更改并根据模型更改事件采取行动。遵循这个原则，应用程序的视图/路由器可以相互隔离，这很好。

但是，模型中没有持久化的应用程序的状态有很多变化。例如，在待办事项应用程序中，可能有一些按钮可以让您查看“已完成”、“未完成”或“全部”的任务。这是模型中未保留的应用程序状态。请注意，任何任务的完成状态都是持久的，但视图中的当前过滤器是瞬态状态。

处理这种应用程序状态的好方法是什么？使用普通的、非主干状态意味着视图/路由器无法监听此状态的变化，因此在数据驱动范式中变得难以编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:55:27.300

您的*按钮过滤器示例*可以使用*Model events*正确解决。

我想您的*按钮处理程序*可以访问*任务 Collection*。*然后过滤所选模型*上的集合和触发事件，例如：

```
model.trigger( "filter:selected" ) 
```

或者

```
model.trigger( "filter:un-selected" ) 
```

*ModelView*可以在其模型上监听这些事件并采取相应的行动。

这是遵循您尊重未使用或*“不持久的属性”*的要求，例如*选择*但我没有任何创伤来使用特殊属性，即使它们不应该是持久的。因此，我还建议修改模型的*selected*属性以表示易变状态。

因此，在您的*按钮处理程序*中过滤集合并修改模型中的*选定*属性是我的首选解决方案：

```
model.set( "selected", true ) 
```

您始终可以覆盖`Model.toJSON()`之前进行清理，或者只是将此*特殊属性*`sync`保留到您的服务器并在那里被忽略。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:29:56.623

评论很长，所以我会产生第二个答案来比较。

首先，我觉得“已完成”、“未完成”完全是可以保留的项目模型属性。或者，如果您的项目由许多用户拥有，每个用户都有自己的“已完成”“未完成”状态，那么该项目将有一个 completedState 子模型或其他东西。重点是，虽然@fguillen 为您提供了两种可能的解决方案，但我也更喜欢他的第二种方式，让模型包含属性和按钮/视图来完成大部分工作。

对我来说，模型为此拥有自己的自定义事件是没有意义的。在我看来，过滤器按钮只需要处理提供适当的视图。（要显示哪些项目）因此，我只会让按钮元素调用一个函数，该函数或多或少地直接在集合上运行过滤器。

```
event: {
    'click filterBtnCompleted':'showCompleted'
},
showCompleted: function(event) {
    var completedAry = this.itemCollection.filter(function(item) {
        return item.get('completed');
    });

    // Code empties your current item views and re-renders them with just filtered models
} 
```

我倾向于将这些便利的过滤器函数隐藏在集合中，这样我就可以调用：

```
this.ItemCollection.getCompleted(); // etc. 
```

将这些属性留在模型中并在服务器上忽略它们很好。尽管如此，在我看来，它们确实是你想要坚持的属性。

还有一件事，您说使用普通的非主干状态会牺牲事件。（咧嘴笑：-）不是这样！您可以轻松扩展任何对象以具有 Backbone.Event 功能。

```
var flamingo = {};

_.extend(flamingo, Backbone.Events); 
```

现在您可以拥有 flamingo 触发器并像其他任何事情一样监听事件！

**编辑：解决路由器>查看数据交易-------------------//**

我对路由器所做的可能不是您所做的，但我将 appView 作为选项传递给路由器。我在 appView 中有一个名为 showView() 的函数，它创建子视图。因此，我的路由器可以直接访问我正在处理的视图。

```
// Router
initialize: function(options) {
    this.appView = options.appView;
} 
```

在我们的例子中，可能需要过滤 itemsView 以显示已完成的项目。注意：我还有一个管理子视图的 showView() 函数。您可能只是在您的场景中直接使用 appView。

所以当像 /items/#completed 这样的路由被调用时，我可能会做这样的事情。

```
routes: {
    'completed':'completed'
},
completed: {
    var itemsView = ItemCollectionView.create({
        'collection': // Your collection however you do it
    });
    this.appView.showView(itemsView);

    itemsView.showCompleted(); // Calls the showCompleted() from View example way above
} 
```

这有帮助吗？*

# java - 如何结合 Java 绘图代码和 Java 串行代码来读取 Arduino 传感器值？

> ID：12077692
> 
> 赞同：0
> 
> 时间：2012-08-22T16:42:12.777
> 
> 标签：java, charts, serial-port, arduino, jfreechart

更新：我使用的代码可以在这里找到：[https](https://dl.dropbox.com/u/2108381/MyArduinoPlot.java) ://dl.dropbox.com/u/2108381/MyArduinoPlot.java 我希望这有助于理解我的挑战。在此先感谢您的时间。

我想从 Arduino 读取传感器值并使用 Java 库 JFreeChart 绘制它们。

我在互联网上找到了一些代码（见下文），现在，我想将用于绘制动态折线图的代码和用于读取 Arduino 值的代码结合起来。两个代码都单独工作，但我被困在将它们结合起来。

绘制动态折线图的代码来自这里（绘制随机数据）： [http ://dirtyhandsphp.blogspot.in/2012/07/how-to-draw-dynamic-line-or-timeseries.html](http://dirtyhandsphp.blogspot.in/2012/07/how-to-draw-dynamic-line-or-timeseries.html)

在 Java 中读取 Arduino 值的代码来自这里： [http ://arduino.cc/playground/Interfacing/Java](http://arduino.cc/playground/Interfacing/Java)

我假设（Java 中的新手，不过）相关部分在这里：

```
/**
 * Handle an event on the serial port. Read the data and print it.
 */
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            int available = input.available();
            byte chunk[] = new byte[available];
            input.read(chunk, 0, available);

            // Displayed results are codepage dependent
            System.out.print(new String(chunk));

//              the code I tried

//              String MyValue = new String(chunk);
//              Double Value = Double.valueOf(MyValue); 

        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }
    // Ignore all the other eventTypes, but you should consider the other ones.
} 
```

和这里：

```
public void actionPerformed(final ActionEvent e) {

//      Original Code

    final double factor = 0.9 + 0.2*Math.random();
    this.lastValue = this.lastValue * factor;

    final Millisecond now = new Millisecond();
    this.series.add(new Millisecond(), this.lastValue);

    System.out.println("Current Time in Milliseconds = " + now.toString()+", Current Value : "+this.lastValue);

//        my code
//        this.series.add(new Millisecond(), Value);

} 
```

如何使`public synchronized void serialEvent`返回传感器值以及如何将其添加到`this.series.add`零件中？

我是Java的新手。

非常感谢任何直接帮助或与其他网站/帖子的链接。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:12:32.070

在此[示例](https://stackoverflow.com/a/5048863/230513)中， a`javax.swing.Timer`定期将新值添加到`dataset`计时器的`ActionListener`. 你会想从外面做。以下是如何进行的概述：

1.  向上移动`dataset`成为`newData`实例[*变量*](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)：

    ```
    DynamicTimeSeriesCollection dataset;
    float[] newData = new float[1]; 
    ```

2.  添加一个将数据附加到图表的方法`dataset`：

    ```
    public synchronized void addData(byte[] chunk) {
        for (int i = 0; i < chunk.length; i++) {
            newData[0] = chunk[i];
            dataset.advanceTime();
            dataset.appendData(newData);
        }
    } 
    ```

3.  从 调用方法`serialEvent()`：

    ```
    demo.addChunk(chunk); 
    ```

# windows-firewall - Windows 防火墙弹出窗口中的发布者字段

> ID：12077693
> 
> 赞同：1
> 
> 时间：2012-08-22T16:42:14.833
> 
> 标签：windows-firewall

大多数时候，我得到这个对话框，名称和发布者字段都非常无用。因此，将我们自己的应用程序列表“主要”作为名称，将“未知”作为发布者似乎并不令人惊讶，但我想知道我们如何实际指定这些字段。

![带有无用名称和发布者的示例防火墙提示](../Images/101ee9e6fb97d1551860268203fc2806.png)

我知道这是可能的（[一个例子](http://www.windows7taskforce.com/thumb/firewall%20allow%20program.png/x/560)），但我似乎找不到任何东西，这可能是不知道要搜索什么的副作用，这不会只是提出关于防火墙的完全不相关的文章。我不关心停止它，或者手动添加异常，我只是想让对话框对我们的应用程序更有帮助。

我知道它与数字签名无关，因为它是否已签名根本不会改变它。它是清单中的东西吗？除了依赖项和特权之外，我找不到清单中其他内容的一致定义。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-11T11:25:47.647

经过多次试验和错误 - 以及大量错误信息：

为了将 Publisher 从*Unknown*更改为*您的 Company's name*，您需要在 RC 文件中的以下行`BLOCK "StringFileInfo"`：

```
VALUE "Publisher", "My Company" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:50:23.190

像往常一样，在写完我的问题之后，我就明白了。它是资源文件中的[VERSIONINFO](http://msdn.microsoft.com/en-us/library/aa381058%28VS.85%29.aspx)垃圾，或者从 Visual Studio 资源视图中，添加新版本资源并在其中设置各种字段。除了图标，我一直避免嵌入资源，但在这种情况下，这似乎是不可避免的。

# javascript - 使用 Require.js 按依赖顺序加载 JavaScript

> ID：12077695
> 
> 赞同：1
> 
> 时间：2012-08-22T16:42:22.463
> 
> 标签：javascript, google-maps, requirejs

我正在深入研究 Require.js 以使用[此链接](http://blog.millermedeiros.com/requirejs-2-0-delayed-module-evaluation-and-google-maps/)和[此链接](http://experiencecraftsmanship.wordpress.com/2012/01/22/google-maps-hello-world-with-requirejs-and-jquery/)作为指南来构建 Google Maps 应用程序。**我的目标是构建一个模块化应用程序，首先加载“基本”功能，然后我可以“插入”客户端特定功能**-*无需重复代码*。所以每个项目都将使用“基础”JS，但每个项目的特定于客户端的 JS 会有所不同。下面是我的加载依赖项列表。这是我需要加载的顺序，列表中的前一项需要完全加载，然后才能进入下一项：

1.  加载 jQuery 和 Google Maps API（我得到了这个）
2.  加载 JavaScript 以使用基本应用程序功能在页面上初始化我的地图
3.  加载额外的/特定于客户端的 JavaScript。

我可以使用这个让 1 和 2 正常工作：

**主.js：**

```
require.config({
    paths:{
        jquery: "jquery-1.7.1.min",
        jqueryui: "jquery-ui-1.8.22.custom.min",
        async: "async",
        requiremap: "requiremap"
    }
});

require(
    [ "jquery", "jqueryui", "requiremap" ],
    function( $, jqueryui, requiremap ) {

    }
); 
```

**要求地图.js：**

```
define(
    [ "async!http://maps.google.com/maps/api/js?sensor=false" ],
    function() {
        require(['js/basemapfunctionality.js'], function() {

        });
    }
); 
```

但现在**我需要等到 #2 完全加载后再加载 #3**。Require.js 可以做到这一点，如果可以，怎么做？（如果没有，是否有替代框架可以做到这一点）我尝试添加另一个嵌套的 require 方法来加载附加功能（如下所示），但它的行为就像 #2 尚未加载。

```
define(
    [ "async!http://maps.google.com/maps/api/js?sensor=false" ],
    function() {
        require(['js/basemapfunctionality.js'], function() {
            require(['js/additionalfunctionality.js'], function() {
                // now everything should be loaded, but it ain't
            });
        });
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T01:19:59.337

得到这个工作。只需将 Google Maps API、基本功能和附加功能的加载分解到不同的模块中，并在 main.js 中声明每个模块。

**main.js**

```
require.config({
    paths:{
        jquery: "jquery-1.7.1.min",
        jqueryui: "jquery-ui-1.8.22.custom.min",
        async: "async",
        requiremap: "requiremap",
        basemapfunctionality: "basemapfunctionality",
        additionalfunctionality: "additionalfunctionality"
    }
});

require(
    [ "jquery", "jqueryui", "requiremap", "basemapfunctionality", "additionalfunctionality" ],
    function( $, jqueryui, requiremap, basemapfunctionality, additionalfunctionality ) {

    }
); 
```

**要求地图.js**

```
define([ "async!https://maps.google.com/maps/api/js?sensor=false" ], function() {}); 
```

**底图功能.js**

```
define(['requiremap'], function(requiremap) {
    // basemap functionality here
} 
```

**附加功能.js**

```
define(['requiremap', 'basemapfunctionality'], function(requiremap, basemapfunctionality) {
    // additional functionality here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:57:07.173

请参阅[**异步加载 API**](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)。有一个回调参数，您可以在其中指示 API 完全加载时将调用的回调函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:50:28.557

我不太喜欢 RequireJS，但[这个问题](https://github.com/jrburke/requirejs/issues/114)和评论暗示了一种解决问题的方法。

链接中的相关引用：

> 这是由于`$.extend`模块的交互和执行顺序造成的。
> 
> 在构建的文件中，“其他/配置”模块在内部调用之前被评估 `require(['other/controller']`，因为`$.extend`只混合属性，它会导致问题。您可以通过使用`Object.create()`type 的方法来避免它，您可以在其中创建一个原型为 的新对象`BaseConfig`，以便稍后您添加到 的任何属性都`BaseConfig`将自动显示在该新对象上。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T10:39:44.347

你试过 Order.js 插件吗？

# javascript - 如何删除特定文本短语的所有实例？

> ID：12077696
> 
> 赞同：2
> 
> 时间：2012-08-22T16:42:22.823
> 
> 标签：javascript, dom

在网页的正文区域是唯一可访问部分的情况下，有没有办法使用内联 JavaScript 或其他支持内联的语言删除特定文本短语（用 HTML 编写）的所有实例？

这在许多情况下可能很有用，例如人们使用 Tiny.cc/customurl 并希望删除说明“tiny.cc/”的部分

* * *

如果允许具体细节，我们将使用 Tiny.cc 修改日历插件以创建自定义 URL (tiny.cc/customurl)。该插件默认显示完整的 URL，因此我们想去除文本“tiny.cc/”并在我们的代码中保留“customurl”部分：

```
<div class="ews_cal_grid_custom_item_3">
  <div class="ews_cal_grid_select_checkbox_clear" id="wGridTagChk" onclick="__doPostBack('wGridTagChk', 'tiny.cc/Baseball-JV');" >&nbsp;</div>
                            tiny.cc/Baseball-JV
  </div> 
```

我们要删除的部分是`http://tiny.cc/`第 3 行本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:09:20.187

要在不替换所有 HTML（破坏所有事件处理程序）的情况下执行此操作并且不使用递归（通常更快）来执行此操作，您可以这样做：

```
function removeText(top, txt) {
    var node = top.firstChild, index;
    while(node && node != top) {
        // if text node, check for our text
        if (node.nodeType == 3) {
            // without using regular expressions (to avoid escaping regex chars),
            // replace all copies of this text in this text node
            while ((index = node.nodeValue.indexOf(txt)) != -1) {
                node.nodeValue = node.nodeValue.substr(0, index) + node.nodeValue.substr(index + txt.length);
            }
        }
        if (node.firstChild) {
            // if it has a child node, traverse down into children
            node = node.firstChild;
        } else if (node.nextSibling) {
            // if it has a sibling, go to the next sibling
            node = node.nextSibling;
        } else {
            // go up the parent chain until we find a parent that has a nextSibling
            // so we can keep going
            while ((node = node.parentNode) != top) {
                if (node.nextSibling) {
                    node = node.nextSibling;
                    break;
                }
            }
        }
    }
}​ 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/2y9eH/](http://jsfiddle.net/jfriend00/2y9eH/)

要对整个文档执行此操作，您只需调用：

```
removeText(document.body, "http://tiny.cc/Baseball-JV"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:47:44.807

只要您可以提供字符串格式的数据，您就可以使用正则表达式为您执行此操作。

您可以解析 body 标记的*整个*innerHTML，如果这是您可以访问的全部内容。这是一种缓慢且有点糟糕的做法，但为了解释起见：

```
document.body.innerHTML = document.body.innerHTML.replace(
    /http:\/\/tiny\.cc\//i,    // The regular expression to search for
    "");                       // Waht to replace with (nothing). 
```

整个表达式包含在正斜杠中，因此正则表达式中的任何正斜杠都需要使用反斜杠进行转义。

这适用于在正则表达式中具有特殊含义的其他字符，例如句点。单个句点 ( `.`) 表示匹配“任何”字符。要匹配句点，必须对其进行转义 ( `\.`)

编辑：

如果您希望在 onclick 中保留对 URL 的引用，您可以修改正则表达式以在单引号内不匹配（如您的示例）：

```
/([^']http:\/\/tiny\.cc\/[^'])/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:59:50.877

如果您不想替换 H​​TML 中该字符串的所有实例，则必须递归地遍历节点结构，例如：

```
function textFilter(element, search, replacement) {
    for (var i = 0; i < element.childNodes.length; i++) {
        var child = element.childNodes[i];
        var nodeType = child.nodeType;
        if (nodeType == 1) { // element
            textFilter(child, search, replacement);
        } else if (nodeType == 3) { // text node
            child.nodeValue = child.nodeValue.replace(search, replacement);
        }
    }
} 
```

然后您只需抓住适当的元素，并在其上调用此函数：

```
var el = document.getElementById('target');
textFilter(el, /http:\/\/tiny.cc\//g, "");​  // You could use a regex
textFilter(el, "Baseball", "Basketball");​   //  or just a simple string 
```

# ios - CoreData 链表？

> ID：12077699
> 
> 赞同：2
> 
> 时间：2012-08-22T16:42:35.633
> 
> 标签：ios, sorting, core-data, linked-list

这里的问题是，在使用 coredata 时创建一个链表来保持顺序/优先级是一个不错的选择，还是应该只使用一个简单的 var 来将优先级保持为数字。

如果一个新对象被插入到 N/2 位置的 N 个对象的数组中，则在保持一个数字的同时，必须修改来自 N/2+1 -> N/2 的对象的所有优先级值，这将导致那么多sql 查询，如果我没记错的话。

如果存在链表，则可以保持与该实体的自我关系，例如“下一个”。如果在 N/2 位置插入一个对象，则只有两个查询： 1\. N/2-1 -> next -> newObj 2\. newObj -> next ->N/2+1 但这里的问题在于使用 NSFetchedResultsController 不能使用这种关系对 fetchedresults 进行排序，还是可以以某种方式？

请回答与上述情况相关的两种技术中的哪一种更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:15:11.153

最好的解决方案是使用有序的多对多关系。这使用了一个`NSOrderedSet`像数组一样保持排序但也支持像集合一样的快速成员资格测试。这仅适用于 iOS 5.0 或 Mac OS X 10.7 或更高版本。

如果我需要支持早期版本的 iOS，我会选择带有额外属性的方法来进行排序。这使得获取更容易。链表结构可能更容易更新，但通常会更频繁地获取（用于显示数据），所以这种情况应该更容易。

如果您需要经常更新您的订单，您可以在订单号之间留下很大的空白。

# java - jpa“脏”交易

> ID：12077700
> 
> 赞同：1
> 
> 时间：2012-08-22T16:42:50.907
> 
> 标签：java, hibernate, jpa, transactions

我使用 java、jpa（和 hibernate）编写了一个桌面应用程序。

我有一个页面，用户可以在其中编辑 bean 字段并将其保存到数据库。豆的领域`codice`是独一无二的。数据库有 2 行，一行带有`codice`= `0`，第二行带有`codice`= `00`。

用途是编辑第一个 bean`0`并将`codice`字段更改为`00`，并尝试将其持久化。entityManager.commit() 将引发异常：

`ERROR: Duplicate entry '00' for key 'codice'`.

异常被捕获并显示给用户，它将`codice`字段修改为`11`（尚不存在）并尝试保持。

`entityManager.commit()`再次引发同样的异常

`(ERROR: Duplicate entry '00' for key )`

就像它再次尝试保留旧项目一样。

这里是一个案例：

```
EntityManager em = Persistence.createEntityManagerFactory(
            "testNewDataModel").createEntityManager();
Articolo a = em.find(Articolo.class, 1L);
EntityTransaction tx = em.getTransaction();
a.setNome("albi8");
// ---- 1 ---- just a normal commit, no errors
tx.begin();     
a = em.merge(a);        
tx.commit();        
System.out.println("---- 1 ----");
// ---- 2 ---- will cause Duplicate entry error
tx.begin();     
a.setCodice("00");  //  already exist an item with codice = 00 -> Duplicate entry '00' for key 'codice'
a = em.merge(a);        
try {
    System.out.println("---- 2 ---- pre commit");
    tx.commit();
    System.out.println("---- 2 ---- after commit");
} catch (Exception e) {
    System.out.println("Duplicate entry '00' for key 'codice'");
}

// ---- 3 ---- trying to correct the previous error 

tx.begin();

a.setCodice("11"); //this code don't exist yet
a.setNome("alby9");

a = em.merge(a);

try {
    System.out.println("---- 3 ---- pre commit");
tx.commit();
    System.out.println("---- 3 ---- after commit");
} catch (Exception e) {
    e.printStackTrace(); //Duplicate entry '00' for key 'codice'
} 
```

她的输出：

```
org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
22-ago-2012 18.41.02 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
Hibernate: select articolo0_._id as column1_12_0_, articolo0_.id_categoria as id10_12_0_, articolo0_.codice as codice12_0_, articolo0_.coefficiente_prezzo as coeffici3_12_0_, articolo0_.descrizione as descrizi4_12_0_, articolo0_.id_foto as id5_12_0_, articolo0_.nome as nome12_0_, articolo0_.posizione as posizione12_0_, articolo0_.prezzo_imponibile as prezzo8_12_0_, articolo0_.prezzo_vendita as prezzo9_12_0_, articolo0_1_.quantita as quantita13_0_ from inventario4.articolo articolo0_ left outer join inventario4.magazzino articolo0_1_ on articolo0_._id=articolo0_1_._id_articolo where articolo0_._id=?
---- 1 ----
---- 2 ---- pre commit
Hibernate: update inventario4.articolo set id_categoria=?, codice=?, coefficiente_prezzo=?, descrizione=?, id_foto=?, nome=?, posizione=?, prezzo_imponibile=?, prezzo_vendita=? where _id=?
22-ago-2012 18.41.02 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 1062, SQLState: 23000
22-ago-2012 18.41.02 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Duplicate entry '00' for key 'codice'
Duplicate entry '00' for key 'codice'
---- 3 ---- pre commit
Hibernate: update inventario4.articolo set id_categoria=?, codice=?, coefficiente_prezzo=?, descrizione=?, id_foto=?, nome=?, posizione=?, prezzo_imponibile=?, prezzo_vendita=? where _id=?
22-ago-2012 18.41.02 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 1062, SQLState: 23000
22-ago-2012 18.41.02 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Duplicate entry '00' for key 'codice'
javax.persistence.RollbackException: Error while committing the transaction
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:90)
    at org.lelmarir.test.Main.main(Main.java:79)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Duplicate entry '00' for key 'codice'
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:78)
    ... 1 more
Caused by: org.hibernate.exception.ConstraintViolationException: Duplicate entry '00' for key 'codice'
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:74)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy21.executeUpdate(Unknown Source)
    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3006)
    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2908)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:3237)
    at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:113)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:272)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:264)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:187)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1081)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:315)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:73)
    ... 1 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '00' for key 'codice'
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    at com.mysql.jdbc.Util.getInstance(Util.java:381)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1015)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3558)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3490)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2109)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2648)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2077)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2362)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2280)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2265)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 18 more 
```

最后是问题：**为什么事务仍然尝试使用`codice`=保持一行`00`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:05:00.193

尝试在提交失败后显式回滚事务

```
try {
System.out.println("---- 2 ---- pre commit");
tx.commit();
System.out.println("---- 2 ---- after commit");
} catch (Exception e) {
    System.out.println("Duplicate entry '00' for key 'codice'");

    tx.rollback(); // HERE

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:05:52.170

我怀疑问题是您在事务之间重用了相同的对象。我要么`clear`是实体管理器，要么是使用`find`. 但我不确定，我已经很久没有使用 JPA 了。

# wpf - Window.SourceInitialized 事件何时引发

> ID：12077707
> 
> 赞同：5
> 
> 时间：2012-08-22T16:43:09.113
> 
> 标签：wpf, interop, window, pinvoke

我能保证`Window.SourceInitialized`活动总是在`Window.Loaded`活动之前提出吗？我需要在我的**Window.Loaded 事件处理程序**`HwndSource`中进一步处理该对象，我不确定到那时它是否总是可用

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:58:31.713

这是您可以预期的事件序列（它应该在加载之前发生）：

*   [http://wpf.2000things.com/2012/07/30/613-window-event-sequence/](http://wpf.2000things.com/2012/07/30/613-window-event-sequence/)

如果您想仔细检查，或者不相信获得 SourceInitialized 事件...那么您可以尝试自己获取 HwndSource ....查看它是否已连接。

*   [http://blogs.msdn.com/b/digitalnetbizz/archive/2007/03/09/presentationsource.aspx](http://blogs.msdn.com/b/digitalnetbizz/archive/2007/03/09/presentationsource.aspx)**

# string - 如何在任何给定点将字符插入字符串？（加工）

> ID：12077713
> 
> 赞同：0
> 
> 时间：2012-08-22T16:43:33.350
> 
> 标签：string, insert, character, processing, stringbuffer

我正在尝试使用处理将字符插入字符串。

经过一番阅读后，我尝试了以下（我认为是 Java）代码：

```
1: String st = new String("abcde");
2: st = StringBuffer(st).insert(2, "C"); 
```

并得到以下回复：

```
the function StringBuffer(String) does not exist 
```

有没有不同/更简单的方法来做到这一点？我需要使用 StringBuffer 吗？我是一个相当新手的程序员，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:09:30.123

好的，所以我一直在查看[处理“扩展语言 API”](http://processing.org/reference/)，并且似乎没有开箱即用的功能。

如果您查看[String](http://processing.org/reference/String.html)类的[substring()](http://processing.org/reference/String_substring_.html)函数，您会看到一个示例，其中有一个字符串在位置 2 处被切割成两部分。然后打印出它们之间的其他字符。这会对你有进一步的帮助吗？

```
String str1 = "CCCP"; 
String str2 = "Rabbit"; 
String ss1 = str1.substring(2);     // Returns "CP"
String ss2 = str2.substring(3);     // Returns "bit"
String ss3 = str1.substring(0, 2);  // Returns "CC"
println(ss1 + ":" + ss2 + ":" + ss3);  // Prints 'CP:bit:CC' 
```

如果我们以您的为例，这将在正确的位置插入“C”：

```
String st = new String("abcde");
String p1 = st.substring(0,2); // "ab"
String p2 = st.substring(2); // "cde"
st = p1 + "C" + p2; // which will result in "abCcde" 
```

或者为它创建一个函数。请注意，不是超级健壮（不检查空字符串、溢出等），但可以完成工作：

```
String insert(original, toInsert, position){
  String p1 = original.substring(0,position);
  String p2 = original.substring(position);
  return p1 + toInsert + p2;
}

...

String st = new String("abcde");
st = insert(st, "C", 2); // "abCcde"
st = insert(st, "D", 4); // "abCcDde" 
```

*在[http://sketch.processing.org测试](http://sketch.processing.org)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-15T16:11:53.597

您可以通过为每个插入调用一次来使用此函数插入​​多个项目。为方便起见，请从右向左插入，否则插入位置会随着您向左插入而改变。

例子：

```
String original="The quick fox jumped over lazy dog";
// lets insert "brown" at position 10, "the" at 21, and "'s back" at 34 to make
// "The quick brown fox jumped over the lazy dog's back"
println( original );
original= insertInString( original, "'s back", 34 );
original= insertInString( original, "the ", 26 );
original= insertInString( original, "brown ", 10 );
println( original ); 
```

这产生了以下输出：

```
The quick fox jumped over lazy dog
The quick brown fox jumped over the lazy dog's back 
```

如果从左到右插入，则每次插入后必须调整位置。

# java - 交换 HashSet 和 TreeSet

> ID：12077715
> 
> 赞同：0
> 
> 时间：2012-08-22T16:43:53.230
> 
> 标签：java, set, comparable

> **可能重复：**
> [Hashset vs Treeset](https://stackoverflow.com/questions/1463284/hashset-vs-treeset)

你可以使用`HashSet`和`TreeSet`互换吗？如果我在一个程序中交换`TreeSet`，`Hashset`反之亦然，会有什么问题？我知道您需要`Comparable`为`TreeSet`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:52:54.733

如果某些 API 需要`Set`，那么您通过哪个实现绝对无关紧要。如果它需要具体类型（不太可能），则不能混合它们。

通常，它们的区别在于性能（`HashSet`更快），但这不应该影响您的程序的行为方式和顺序。项目的顺序`HashSet`是不可预测的。如果你的程序依赖于任何这样的顺序，它应该使用`LinkedHashSet`or `TreeSet`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:03:28.807

`HashSet`并且`TreeSet`都是`Set`s。它们大多是可互换的，但请记住`TreeSet`也是 a [`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)，因此它的元素必须实现`Comparable`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:45:28.920

如果您想订购您的套装，您应该使用`TreeSet`. 如果您使用 a`HashSet`代替，您将获得依赖于排序的操作的不可预知的结果。

另一方面，a`HashSet`比 a 快得多，`TreeSet`如果命令不是您担心的事情。

# c# - 在 windows phone 中访问非静态网格元素

> ID：12077718
> 
> 赞同：0
> 
> 时间：2012-08-22T16:44:00.593
> 
> 标签：c#, windows-phone

我有一个页面：

```
<phone:PhoneApplicationPage 
x:Class="VKClient.ConversationListPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">            
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel"  Grid.Row="1" Margin="12,0,12,0"></Grid>
</Grid>

<!--Sample code showing usage of ApplicationBar-->
<!--<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
            <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar>--> 
```

和上面的一个元素：

```
<Grid x:Name="ContentPanel"  Grid.Row="1" Margin="12,0,12,0"></Grid> 
```

我想从课堂外部更改 ContentPanel 的内容。问题是它是一个非静态字段，如果没有 ConversationListPage 类的实例，我无法访问它。我还没有找到既不访问此实例（我确定它存储在某个地方）也不使该字段成为静态的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:11:53.943

找到了解决方案。在 ConversationListPage 的构造函数中，我将它的实例传递给另一个类（）：

```
public ConversationListPage()
{
    //Change "OuterClass" to an actual class name where you'll be passing the instance
    InitializeComponent();
    OuterClass.setConversationListPage(this);
} 
```

在 OuterClass 我有：

```
public class OuterClass
{
    private static ConversationListPage conversationListPage;

    public static void setConversationListPage(ConversationListPage page)
    {
        conversationListPage = page;
    }
} 
```

因此，您将能够通过 conversationListPage 字段访问 ConversationListPage 中的任何内容。

# c# - 将 LinkLabels 动态添加到 TableLayoutPanel

> ID：12077725
> 
> 赞同：0
> 
> 时间：2012-08-22T16:44:17.687
> 
> 标签：c#, dynamic, linklabel

我一直有以下代码的问题：

```
namespace Viewer
{
    public partial class Form1 : Form
    {
        int count = 0;
        LinkLabel[] linkLabel = new LinkLabel[200];
        string filename;
        string extension;
        string filepath;

        private void btnLoad_Click(object sender, EventArgs e)
        {
            // Creates a Directory for the Movies Folder
            DirectoryInfo myDirectory = new DirectoryInfo(@"C:\Users\User\Movies");

            // Creates a list of "File info" objects
            List<FileInfo> ls = new List<FileInfo>();

            // Adds filetypes to the list
            ls.AddRange(myDirectory.GetFiles("*.mp4"));
            ls.AddRange(myDirectory.GetFiles("*.avi"));

            // Orders the list by Name
            List<FileInfo> orderedList = ls.OrderBy(x => x.Name).ToList();

            // Loop through file list to act on each item
            foreach (FileInfo filFile in orderedList)
            {
                // Creates a new link label
                linkLabel[count] = new LinkLabel();

                // Alters name info for display and file calling
                filepath = filFile.FullName;
                extension = filFile.Extension;
                filename = filFile.Name.Remove(filFile.Name.Length - extension.Length);

                // Write to the textbox for functional display
                textBox1.AppendText(filename + "\r\n");

                // Alters link label settings
                linkLabel[count].Text = filename;
                linkLabel[count].Links.Add(0, linkLabel[count].Text.ToString().Length, filepath);
                linkLabel[count].LinkClicked += new LinkLabelLinkClickedEventHandler(LinkedLabelClicked);

                // Adds link label to table display
                tblDisplay.Controls.Add(linkLabel[count]);

                // Indexes count up for arrays
                count = count + 1;
            }
        }

        private void LinkedLabelClicked(object sender, LinkLabelLinkClickedEventArgs e)
        {
            System.Diagnostics.Process.Start(filepath);
        }

    }
} 
```

我的目标是生成一个指向我在启动时添加的所有媒体文件的链接表，并让这些链接在各自的播放器中打开文件。

截至目前，它会正确生成所有链接，但是每当我单击其中任何一个时，它都会启动列表中的最后一项。

例如，如果列表包含“300”、“角斗士”和“壮志凌云”，无论我点击哪个链接，它都会打开“壮志凌云”。

我认为这与它在 click 事件中调用变量“filepath”有关，该变量处于最终状态。但是，我不太清楚如何在每个单独的链接上创建静态链接值或操作，因为我研究的所有答案都是关于单个链接标签的情况，而不是动态设置。

任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:23:59.800

尝试如下：
在 foreach 循环中添加一行更像：

```
linkLabel[count].Tag = filepath; 
```

然后在点击事件中得到这条路径作为打击，

```
private void LinkedLabelClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    string filepath = ((LinkLabel)sender).Tag.tostring();
    System.Diagnostics.Process.Start(filepath);
} 
```

# mobile - 移动 Safari 上的水平拖动

> ID：12077726
> 
> 赞同：1
> 
> 时间：2012-08-22T16:44:20.683
> 
> 标签：mobile, safari, drag, responsive-design

也许我患有近视，只是看不出哪里出了问题，但我只有在移动 safari 中发生了一些奇怪的水平拖动（我在浏览器和我的 android 手机上检查了它，它工作正常。）我是想知道是否有人对如何防止这种情况发生有任何见解？该网站的链接是[Yetisandbox](http://yeti.yetisandbox.com)

也许这是一个视口问题？我目前正在使用这个：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T01:17:15.507

我也遇到了这个。这为我修复了它：

```
html, body{
    overflow-x: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T20:50:38.177

```
.home-trail{
  ...
  width: 100%;
  position: absolute;
  ...
}
.home-intro{
  ...
  width: 1170px;
  margin-right: auto;
  margin-left: auto;
  ...
} 
```

您的 .home-trail 容器具有 100% 的宽度和一个绝对位置。它的父 .home-intro 的宽度可能小于视口宽度，但位置是静态的。因为 100% 不是指 .home-intro 宽度。所以它的 100vw 但由于其父级的 margin-left 加上缺少的 left:0 属性而获得了一个左距离。

# java - 如何准确确定双精度数是否为整数？

> ID：12077731
> 
> 赞同：6
> 
> 时间：2012-08-22T16:44:39.130
> 
> 标签：java, floating-point

特别是在 Java 中，如何确定 a`double`是否为整数？为了澄清，我想知道如何确定双精度实际上不包含任何分数或小数。

我主要关心浮点数的性质。我想到的方法（以及我通过谷歌找到的方法）基本上遵循这种格式：

```
double d = 1.0;
if((int)d == d) {
    //do stuff
}
else {
    // ...
} 
```

我当然不是浮点数及其行为方面的专家，但我的印象是，因为`double`存储的只是数字的*近似值*，所以`if()`条件只会在*某些*时候输入（甚至在*大多数*情况下） ）。但我正在寻找一种保证 100% 工作的方法，无论`double`值如何存储在系统中。

这可能吗？如果是这样，如何以及为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:48:30.627

`double`可以存储某些值的精确表示，例如小整数和（负或正）2 的幂。

如果它确实存储了一个精确的整数，那么`((int)d == d)`工作正常。事实上，对于任何 32 位整数 i，`(int)((double)i) == i`因为 double 可以精确地表示它。

请注意，对于非常大的数字（幅度大于 2**52），双精度数将始终显示为整数，因为它将不再能够存储任何小数部分。例如，如果您尝试转换为 Java `long`，这会产生影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:47:47.733

怎么样

```
 if(d % 1 == 0) 
```

这是有效的，因为所有整数都是 0 模 1。

*编辑*对于所有以速度慢为由反对它的人，我对其进行了分析，发现它比铸造慢了大约 3.5 倍。除非这是一个紧密的循环，否则我会说这是一种更好的解决方法，因为它非常清楚你正在测试什么，并且不需要任何关于整数转换的语义。

我通过在 javac 上的运行时间来分析它

```
class modulo {
    public static void main(String[] args) {
        long successes = 0;
        for(double i = 0.0; i < Integer.MAX_VALUE; i+= 0.125) {
            if(i % 1 == 0)
                successes++;
        }
        System.out.println(successes);
    }
} 
```

VS

```
class cast {
    public static void main(String[] args) {
        long successes = 0;
        for(double i = 0.0; i < Integer.MAX_VALUE; i+= 0.125) {
            if((int)i == i)
                successes++;
        }
        System.out.println(successes);
    }
} 
```

最后都打印了 2147483647。
Modulo 在我的机器上花费了 189.99 秒 - Cast 花费了 54.75 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T16:56:21.643

```
if(new BigDecimal(d).scale() <= 0) {
    //do stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T16:49:57.567

您的使用方法`if((int)d == d)`应该始终适用于任何 32 位整数。要使其工作到 64 位，您可以使用`if((long)d == d`，它实际上是相同的，只是它占更大的数量级。如果`d`大于最大值`long`（或小于最小值），则保证为精确整数。`d`然后可以按如下方式构造一个测试是否为整数的函数：

```
boolean isInteger(double d){
    if(d > Long.MAX_VALUE || d < Long.MIN_VALUE){
        return true;
    } else if((long)d == d){
        return true;
    } else {
        return false;
    }
} 
```

如果浮点数是整数，则它是该整数的精确表示。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-22T17:55:45.760

双精度数是具有二进制指数的二进制分数。你不能确定一个整数可以精确地表示为一个双精度数，尤其是如果它是从其他值计算出来的。

因此，解决这个问题的正常方法是说它需要“足够接近”一个整数值，其中足够接近通常意味着“在 X % 以内”（其中 X 相当小）。

即，如果 X 为 1，则 1.98 和 2.02 都将被视为足够接近 2。如果 X 为 0.01，则它需要介于 1.9998 和 2.0002 之间才能足够接近。

# c++ - 有什么更好的编码方式？

> ID：12077734
> 
> 赞同：1
> 
> 时间：2012-08-22T16:44:59.673
> 
> 标签：c++, casting, queue, breadth-first-search

我正在尝试制作一个使用队列实现广度优先搜索的程序。

```
// Queue.h

    #pragma once
    #include<iostream>

    struct node
     {
      int b1,b2,b3,b4;
      node* link;
     };

struct state
    {
     int b1,b2,b3,b4;
     state* rightChild;
     state* leftChild;
    };

class Queue
{
   private:
    node* front, *rear ;
   public:
        bool enqueue(node n);
        //......
}; 
```

* * *

```
 //BFS.cpp
  #include <iostream>
  #include "Queue.h"

  int main()
  {

   struct state
       {
          int b1,b2,b3,b4;
          state* rightChild;
          state* leftChild;
      };

    // now i define all the nodes of the tree, each node is of type state
    Queue Q;        // make a queue
    Q.enqueue(initialState);         //where initialState is the root
    //...

  } 
```

我创建的队列存储了 node- 类型的节点，而树中的节点是 State 类型的。我不能使用复制构造函数，因为两者都是单独的结构。那么组织代码以使树的节点在队列中被接受的有效方法是什么？

# postgresql - 分叉您的 Heroku 生产数据库 (postgresql) 如何影响性能？

> ID：12077737
> 
> 赞同：1
> 
> 时间：2012-08-22T16:45:14.867
> 
> 标签：postgresql, heroku

我计划定期 --fork 我的生产 Heroku Postgres 实例到一个登台应用程序。我的问题是，从性能的角度来看，这很糟糕吗？这对我的生产性能有什么影响（如果有的话）？

我考虑过 --forking 我的生产数据库的追随者，但是在尝试这样做时我总是遇到这个错误。

```
 !    You cannot fork a follower. The database you are attempting to fork is still too new. Please try again later. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:58:25.567

你的生产数据库的一个分支应该对你的生产数据库没有影响。追随者确实会产生一些维护连接的开销，但它非常小。

要创建分叉，您必须从生产数据库中分叉。您也可以将现有的追随者从主数据库中分离出来（这会导致分叉）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T15:37:26.120

请注意，创建分叉确实会重新启动您的应用程序，因此在生产环境中运行时要小心！分叉创建的输出：

`postgresql... is being created in the background. The app will restart when complete...`

# actionscript-3 - 从位图中删除 Whitepixels

> ID：12077738
> 
> 赞同：0
> 
> 时间：2012-08-22T16:45:21.040
> 
> 标签：actionscript-3, bitmap, alpha-transparency

我将具有大量未使用空间的影片剪辑转换为位图，但似乎在转换过程中已将许多白色像素添加到位图中，因此无法正确显示背景。

我的问题是如何以最聪明的方式去除背景......去除每一个白色像素，如果是这样怎么做？如果可能的话，如何从影片剪辑生成一个 alphamap？还是我不知道的其他方式？

提前谢谢 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:01:51.283

参考以下代码。此代码是如果像素为白色，则转换为透明色。

```
for(var i:int = 0; i<myBitmapData.width; i++)
{
    for(var j:int = 0; j<myBitmapData.height; j++)
    {
        if(myBitmapData.getPixel(i,j) == 0xffffff)
        {
            var transparent:uint = 0x00000000;
            myBitmapData.setPixel32(i, j, transparent);
        }
    }
} 
```

您已经检查了以下代码。在测试之前，必须将颜色更改为红色或蓝色或绿色......你想要的阶段。

```
import flash.display.Sprite;
import flash.events.Event;
import flash.display.BitmapData;
import flash.display.Bitmap;
import flash.events.MouseEvent;

var brush:Sprite =new Sprite();
brush.graphics.beginFill(0xffffff);
brush.graphics.drawRect(0,0,100,100);
brush.graphics.endFill();
//addChild(brush);

var myBitmap:Bitmap = new Bitmap(convertToBitmap(brush));
var bmd:BitmapData = myBitmap.bitmapData;
addChild(myBitmap);

for(var i:int = 0; i<bmd.width; i++)
{
    for(var j:int = 0; j<bmd.height; j++)
    {
        if(bmd.getPixel(i,j) == 0xffffff)
        {
            var transparent_color:uint = 0x00000000;
            bmd.setPixel32(i, j, transparent_color);
        }
    }
}

function convertToBitmap( clip:DisplayObject ):BitmapData
{
    var bounds:Rectangle = clip.getBounds( clip );
    var bitmap:BitmapData = new BitmapData( int( bounds.width + 0.5 ), int( bounds.height + 0.5 ), true, 0 );
    bitmap.draw( clip, new Matrix(1,0,0,1,-bounds.x,-bounds.y) );
    return bitmap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:04:30.530

另一种方法是在创建 BitmapData 对象时，使用 alpha 为 0 的 ARGB 颜色填充。这样您就不必遍历 BitmapData 并将每个像素设置为@bitmapdata 的答案。

```
var bitmapData:BitmapData = new BitmapData(100, 100, true, 0x00000000); 
```

这是一个示例应用程序，它显示了这一点：

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Graphics;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;

    public class TestAS3 extends Sprite
    {
        private var drawingObject:Sprite = new Sprite();
        private var bitmap:Bitmap = new Bitmap();
        private var backgroundObject:Sprite = new Sprite();

        public function TestAS3()
        {
            super();
            stage.scaleMode=StageScaleMode.NO_SCALE;
            stage.align=StageAlign.TOP_LEFT;

            // draw something on the background, so we can verify the
            // bitmap has transparency
            var g:Graphics = backgroundObject.graphics;
            g.beginFill(0xFF0000);
            g.drawRect(0,0,200,200);
            g.endFill();
            addChild(backgroundObject);

            // draw a black circle so we can make a bitmap out of it
            g = drawingObject.graphics;
            g.beginFill(0);
            g.drawCircle(100,100,50);
            g.endFill();

            // create the bitmap data
            // note use an ARGB color (here color is black, alpha is 0)
            // to default the BitmapData to a transparent fill 
            var bmd:BitmapData = new BitmapData(200,200,true,0x00000000);
            bmd.draw(drawingObject);
            bitmap.bitmapData=bmd;
            addChild(bitmap);
        }
    }
} 
```

# azure - 如何将 WebHttpRelayBinding 与 application/json 请求一起使用？

> ID：12077739
> 
> 赞同：0
> 
> 时间：2012-08-22T16:45:21.180
> 
> 标签：azure, servicebus, webhttprelaybinding

当我尝试使用通用消息处理程序时，如果我使用我自己的类型（例如 text/x-json），我会在接受或内容类型为 html/xml/json 时遇到错误，一切都按预期工作，消息被发送到我的处理程序和流将数据返回给 webclient。我已经使用调试器逐步完成了此操作，并且我的代码成功创建了消息，但是服务总线绑定中的某些内容阻塞并导致服务器不响应。是否需要更改设置以允许 application/json 并使服务总线发送原始数据而不是尝试重新序列化它？

```
[WebGet( UriTemplate = "*" )]
[OperationContract( AsyncPattern = true )]
public IAsyncResult BeginGet( AsyncCallback callback, object state )
{
    var context = WebOperationContext.Current;
    return DispatchToHttpServer( context.IncomingRequest, null, context.OutgoingResponse, _config.BufferRequestContent, callback, state );
}

public Message EndGet( IAsyncResult ar )
{
    var t = ar as Task<Stream>;
    var stream = t.Result;
    return StreamMessageHelper.CreateMessage( MessageVersion.None, "GETRESPONSE", stream ?? new MemoryStream() );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:36:37.543

而不是使用：StreamMessageHelper.CreateMessage，您可以在更改后使用以下一个：

```
WebOperationContext.Current.OutgoingResponse.ContentTYpe = "application/json"

public Message CreateJsonMessage(MessageVersion version, string action, Stream jsonStream)
{
    var bodyWriter = new JsonStreamBodyWriter(jsonStream);
    var message = Message.CreateMessage(version, action, bodyWriter);
    message.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Json));
    return message;
}

class JsonStreamBodyWriter : BodyWriter
{
    Stream jsonStream;
    public JsonStreamBodyWriter(Stream jsonStream)
        : base(false)
    {
        this.jsonStream = jsonStream;
    }

    protected override void OnWriteBodyContents(XmlDictionaryWriter writer)
    {
        writer.WriteNode(JsonReaderWriterFactory.CreateJsonReader(this.jsonStream, XmlDictionaryReaderQuotas.Max), false);
        writer.Flush();
    }
} 
```

# opengl - 使用单一字体纹理渲染文本 (SDL + OpenGL)

> ID：12077741
> 
> 赞同：3
> 
> 时间：2012-08-22T16:45:22.733
> 
> 标签：opengl, fonts, rendering, sdl, sdl-ttf

我一直在搜索和测试用 OpenGL 渲染文本的新方法，用 SDL 加载它的纹理，但我测试的每项技术似乎都既昂贵又缓慢。

考虑到这一点，我意识到实现它的最佳方法可能是通过加载具有所需每个字符的纹理（就像精灵表一样），获取有关它的相关数据（宽度，高度，前进，跳行......）以及何时渲染它（基本上我们会在场景中的所有其他渲染之后进行），我们只需要一个 glBindTexture() 来打印屏幕上需要的每个字符串。

我在这里假设它的昂贵部分是纹理创建和绑定，对吗？我测试的每个代码似乎都对每个字形或每个字符串使用了分离的纹理。

你们如何渲染文本？是渲染它的好方法吗？如果是这样，是否有任何库已经这样做了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T00:55:26.637

通过使用带有每个字母的“spritesheet like”纹理来渲染文本肯定会起作用，并且是一种非常常见的方法。

虽然不知道有任何库可以呈现这样的文本（我敢肯定有），但自己编写代码确实不难。如果您想编写自己的代码来执行此操作，您将需要某种方法来生成包含您需要的每个字母的纹理。[BMFont](http://www.angelcode.com/products/bmfont/)是一款可以生成此类纹理的程序。此外，BMFont 生成一个随附的“.fnt”文件，指示每个字母在纹理中的位置。

下面是 BMFont 生成的纹理的样子：

![大小为 22 Times New Roman 的 BMFont 纹理](../Images/db81b79c178e545e42568fbefd5cf41a.png)

和 .fnt 文件：

```
info face="Times New Roman" size=-22 bold=0 italic=0 charset="" unicode=1 stretchH=100 smooth=1 aa=1 padding=0,0,0,0 spacing=1,1 outline=0
common lineHeight=25 base=20 scaleW=256 scaleH=256 pages=1 packed=0 alphaChnl=0 redChnl=4 greenChnl=4 blueChnl=4
page id=0 file="Times22.png"
chars count=191
char id=32   x=253   y=37    width=1     height=1     xoffset=0     yoffset=20    xadvance=6     page=0  chnl=15
char id=33   x=253   y=21    width=2     height=15    xoffset=2     yoffset=5     xadvance=6     page=0  chnl=15
char id=34   x=195   y=118   width=6     height=6     xoffset=2     yoffset=5     xadvance=9     page=0  chnl=15
char id=35   x=72    y=42    width=11    height=16    xoffset=0     yoffset=4     xadvance=11    page=0  chnl=15
char id=36   x=17    y=43    width=9     height=17    xoffset=1     yoffset=4     xadvance=11    page=0  chnl=15
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:00:10.793

使用 FreeType 动态生成字形位图，并使用[您选择的](http://www.codeproject.com/KB/web-image/rectanglepacker.aspx)[盒子打包](http://en.wikipedia.org/wiki/Packing_problem#Packing_rectangles)算法将它们填充到一个（或多个）大纹理中。

正如你所说的那样，大多数字符串只需要一个，也许两个纹理绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T21:57:48.027

这是[另一个](https://github.com/SudoMike/SudoFont)可以构建紧凑字体位图的工具，可选择包括字距调整，并包含用于加载和显示字体的源代码

[https://github.com/SudoMike/SudoFont](https://github.com/SudoMike/SudoFont)

# java - 直接分配易失变量线程安全吗？和 AtomicReference 一样安全吗？

> ID：12077747
> 
> 赞同：1
> 
> 时间：2012-08-22T16:45:40.820
> 
> 标签：java, multithreading, concurrency, atomic

这和使用 AtomicReference 一样安全吗？

```
private volatile String myMember;

public void setMyMember(String s) { 
   myMember = s;
} 
```

对比

```
private final AtomicReference<String> myMember = new AtomicReference<>();

public void setMyMember(String s) {
    while (true) {
        String current = myMember.get();
        if (myMember.compareAndSet(current, s))
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:48:18.533

您的代码是“安全的”，但与`AtomicReference`代码的作用不同。通常，当有人试图将某些内容添加到列表或对象中并且他们想要防止具有多个线程的竞争条件时，使用`AtomicReference`循环。`compareAndSet`

例如：

```
private final AtomicReference<List<String>> listRef = new AtomicReference<>();
...
while (true) {
    List<String> currentList = listRef.get();
    List<String> newList = new ArrayList<String>(currentList);
    newList.add(stringToAdd);
    // if we update the list reference, make sure we don't overwrite another one
    if (listRef.compareAndSet(currentList, newList))
        break;
} 
```

在您的情况下，由于您使用的是一个简单的`String`对象，因此只需制作它就`volatile`可以了。这样做没有意义`compareAndSet`。如果你还想用`AtomicReference`，那就打电话吧`myMember.set(...)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T16:48:36.407

您的第一个代码片段是完全线程安全的，并且足够了，因为`String`它是线程安全的并且分配给变量是原子的。

第二个没有多大意义，这种结构在内部使用，例如`AtomicInteger`避免忽略并发环境中的分配。`volatile`在你的情况下很好。

# ruby-on-rails-3 - Rails 3提交标签+ html_safe

> ID：12077748
> 
> 赞同：3
> 
> 时间：2012-08-22T16:45:42.920
> 
> 标签：ruby-on-rails-3, html-sanitizing, font-awesome, html-safe

这行代码有什么问题？

```
<%= submit_tag "Delete <i class='icon-check'></i>".html_safe, :disable_with => "Deleting", :class => "btn btn-danger"%> 
```

这实际上产生：

![在此处输入图像描述](../Images/9da001a992d9ce1eca73b1d85cc1fdf4.png)

显然我的 html_safe 调用没有做任何事情。

**背景：**

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)和[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，我实际上是在尝试实现一个带有图标的提交按钮。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T17:18:42.717

为了扩展 Lukas 的回答，我需要一个按钮标签而不是输入。这段代码产生了我正在寻找的效果：

```
<button type="submit" class="btn btn-danger">
    Delete <i class="icon-check"></i> 
</button> 
```

结果是：

![结果](../Images/684548b8d13025bfee27a8f127788ab0.png)

[我在这里](https://stackoverflow.com/questions/9376192/add-icon-to-submit-button-in-twitter-bootstrap-2)找到了我正在寻找的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T16:57:52.163

它出什么问题了？提交按钮值不应包含嵌入的 HTML 代码。

这是提交按钮在 HTML 中的外观：

`<input type="submit" value="Submit" />`

属性中的HTML 标记`value`被解释为文本，而不是 HTML：

`<input type="submit" value="<i>Submit</i>" />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-04T06:03:14.480

```
<%= form.button :submit, class: 'btn btn-success' do %>
     <i class="fa fa-plus"></i> Add Funder <i class="fa fa-chevron-right"></i>
<% end %> 
```

这是一个很好的答案。

# android - 如何更改 Google Play 和 Android 主屏幕上的图标？

> ID：12077749
> 
> 赞同：0
> 
> 时间：2012-08-22T16:45:49.963
> 
> 标签：android, icons, smartphone, google-play

我是 android 应用程序开发人员，我想知道从 Google Play 下载后如何更改我的 android 图标。

我的意思是，您可以在 Google Play 上看到的我的应用程序图标和您可以在 Android 智能手机的主屏幕上看到的我的应用程序图标是不同的。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:47:13.583

您上传到开发者控制台（当您发布应用程序时）的 512x512 图标将在 Google Play 中看到。您放入资源文件夹中的 36x36、48x48、72x72 和 96x96 图标`drawable`将显示在设备主屏幕/应用程序抽屉上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T00:38:47.513

发布后，您无法更改应用的 Google Play 图片。所以一定要在第一时间做对。

# html - Chrome CSS 问题

> ID：12077753
> 
> 赞同：2
> 
> 时间：2012-08-22T16:46:24.447
> 
> 标签：html, css, google-chrome

我有一个搜索框和按钮，几周前在所有浏览器（Chrome、FF、IE7/8/9、Opera）中都可以使用，但现在仅在 Chrome 中被错误地偏移了一点。

这是在 Chrome 中 ![在此处输入图像描述](../Images/a18dfb17ead4de0ee1333838d3eb8418.png)

它在 Opera、FF、IE 中 ![在此处输入图像描述](../Images/b7179e515a2512023a623f08a620ced3.png)

注意 Chrome 中的轻微偏移。这是此搜索框的 HTML，

```
<form id="function_search_form" method="post" class="span-24 textcenter last">
    <input type="text" name="basic_search_input" id="basic_search_input" />
    <input type="image" src="images/magnifying_glass.png" name="basic_search_button" id="basic_search_button" alt="Search Blueprints" />&nbsp;&nbsp;

    <a id="switch_adv_search" style="cursor: pointer; color: #1C94C4; font-size: 15px;">advanced</a>
    <input type="hidden" name="search_type" value="basic" />
    <div id="autocomplete_choices" class="autocomplete"></div>
</form> 
```

这是这些元素的 CSS，

```
#function_search_form #basic_search_button {
    border: 1px solid #FFFFFF;
    border-radius: 0px 4px 4px 0px;
    background: #FFFFFF;
    vertical-align: middle;
    height: 25px;
    width: 27px;
    margin: 0.5em 0px;
    padding: 1px 0px;
}

#function_search_form #basic_search_input {
    border: 1px solid #FFFFFF;
    border-radius: 4px 0px 0px 4px;
    color: #050;
    font: bold 12px 'trebuchet ms', helvetica, sans-serif;
    width: 250px;
    height: 25px;
    padding-right: 5px;
    vertical-align: middle;
} 
```

我试图将输入包装在一个 div 中，并使用绝对位置或相对位置。但是，我更改的所有内容都在其他浏览器中破坏了它，但在 Chrome 中修复了它。如果我从在 Chrome 中修复它的文本输入中取出垂直对齐，似乎也是如此。

我不确定这是否是最新版本的 Chrome 中引入的新错误，但我记得之前在 Chrome 中工作过，此后没有任何改变。

**STEVE CAMPBELL 解决方案的更新**

我不确定你的工作情况如何，因为如果我取出除了我的 CSS 文件和这个 HTML 之外的所有内容，

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title></title>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
</head>

<body>
    <form id="function_search_form" method="post" class="span-24 textcenter last">
        <input type="text" name="basic_search_input" id="basic_search_input" />
        <input type="image" src="images/magnifying_glass.png" name="basic_search_button" id="basic_search_button" alt="Search Blueprints" />&nbsp;&nbsp;
        <a id="switch_adv_search" style="cursor: pointer; color: #1C94C4; font-size: 15px;">advanced</a>
        <input type="hidden" name="search_type" value="basic" />
        <div id="autocomplete_choices" class="autocomplete"></div>
    </form>
</body>
</html> 
```

如下所示，

![在此处输入图像描述](../Images/05e7c4a7de6ee74309d9abeb8e6676a1.png)

我唯一能想到的是Fiddle有一些不同的重置或其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:47:28.253

这个[小提琴](http://jsfiddle.net/9RMLY/)对我来说没问题。使用相对和绝对设置样式，并调整框大小以确保跨浏览器的一致性，并删除了 em 中的边距：

```
#function_search_form
{
    position: relative;
}
#function_search_form #basic_search_button {
    border: 1px solid #FFFFFF;
    border-radius: 0px 4px 4px 0px;
    background: #FFFFFF;
    height: 25px;
    width: 27px;
    margin: 0;
    padding: 1px 0px;
    box-sizing: content-box;
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box;
    position: absolute;
    top: 4px;
    left: 250px;
}

#function_search_form #basic_search_input {
    border: 1px solid #FFFFFF;
    border-radius: 4px 0px 0px 4px;
    color: #050;
    font: bold 12px 'trebuchet ms', helvetica, sans-serif;
    width: 250px;
    height: 25px;
    padding-right: 5px;
    box-sizing: content-box;
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box;    
    position: absolute;
    top: 4px;    
}

#function_search_form a {
    position: absolute;
    top: 8px;    
    left: 280px;
} 
```

# objective-c - 不能从另一个类访问静态变量

> ID：12077757
> 
> 赞同：5
> 
> 时间：2012-08-22T16:46:30.400
> 
> 标签：objective-c, variables, static

我有一个静态变量，我想从 X-Code 中同一个项目中的另一个类访问它。我已经在 .h 文件和 .m 文件中声明了它，给了它一个值，然后当我访问另一个类时，我收到一条错误消息：

“在‘​​yy’类型的对象上找不到属性‘xx’”

我在.h 中将变量声明为extern，并在.m 中将其重新声明为变量类型。我试图在 .h 中将其更改为静态，但它仍然不起作用。是的，我已经导入了包含变量的文件，以防万一。

谁能帮我？

编辑：

这是我目前正在使用的代码：

*源码.h*

```
static int anObject;

@interface source : NSObject 
```

*来源.m*

```
static int a = 2

@implementation source 
```

*目的地.m*

```
# include "source.h"

@implementation destination

- (void) anObjectTestFunction 

{     
  printf("%d", source.anObject); //the first version
  printf("%d", anObject); //second version  
} 
```

现在进入第二个版本后，destination.h中的变量anObject可以访问，但它的值不是2，而是0。我希望它跟随我在source.h中声明的那个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T17:04:30.177

我假设在 .h 文件中声明的静态变量在 .h 文件之外`@interface`。所以像：

```
static NSString *myObjectTest = @"Test";

@interface MyObject : NSObject 
@end 
```

如果是这种情况，那么您将无法使用以下方式访问它：

```
MyObject *obj = [[MyObject alloc] init];
[obj myObject] 
```

或者

```
obj.myObject 
```

这就是给你“在'yy'类型的对象上找不到属性'xx'”的原因。该静态变量不是 MyObject 对象的属性。

`myObjectTest`只要您导入 .h 文件，就可以访问该静态变量

**更新** 请参阅下面的 Chuck 评论，为什么这样做是个坏主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T17:03:11.317

您似乎对静态变量是什么感到困惑。在 Java 或 C++ 等其他语言中，“静态”可能意味着两件事之一。在文件或函数作用域中，它意味着在程序的整个生命周期中都存在于该文件或函数的变量。在类作用域中，它仅仅意味着一个类变量。

C++有两个定义，Java只有第二个定义，而Objective-C只有第一个定义：静态变量只能在声明它的地方使用。没有“外部静态”变量这样的东西，因为两者是矛盾的。您可能想要一个全局变量或一个带有类方法的静态变量来访问它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T16:51:35.760

这可能是命名空间问题吗？尝试完全限定您的访问权限。发布您的代码摘录确实会有所帮助，但我不擅长千里眼:-)

# attributes - Drupal 7 - Ubercart - 视图字段中的属性

> ID：12077759
> 
> 赞同：1
> 
> 时间：2012-08-22T16:46:32.620
> 
> 标签：attributes, drupal-7, views, drupal-modules, ubercart

我有具有“颜色”和“强度”属性的产品。我试图将这些属性下列出的选项作为视图字段，以便我可以将它们用作过滤器。例如，按颜色和强度排序。

我在谷歌上四处寻找，只能找到 Drupal 6 的模块。有人知道 7 的任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:07:50.797

就像在上一篇文章中所说的那样，我有 2 个属性“颜色”和“强度”，我需要匹配它们以匹配精确的产品匹配，但 ubercart 没有任何东西，所以我将它们写入 URL 以作为变量 1 和 2 获取语句，因此例如一个同时选择了两个属性的 URL 如下所示：

`www.website.com/node/68?1=96&2=7`

有时会设置一个变量但不会设置另一个变量，因此我还必须使用 % 通配符来弥补这一点。这是该部分的代码

```
//  Since PHP's serialize function sometimes serializes in the incorrect order,
//  here we manually build the comparison key
//  Additionally append the image links urls with provided strength/color data

if( isset( $_REQUEST['1'] ) ) {
    $_1 = $_REQUEST['1'];
    if( $_1 !== '%' ) $url[] = "1=$_1";
} else $_1 = '%';

if( isset( $_REQUEST['2'] ) ) {
    $_2 = $_REQUEST['2'];
    if( $_2 !== '%' ) $url[] = "2=$_2";
} else $_2 = '%';

$combination = "a:2:{i:1;s:";
$combination .= $_1 == '%' ? '%:"%";' : strlen($_1) . ':"' . $_1 . '";';
$combination .= "i:2;s:";
$combination .= $_2 == '%' ? '%:"%";' : strlen($_2) . ':"' . $_2 . '";';
$combination .= '}';

// if some products don't have a second attribute at all
$combination2 = "a:1:{i:1;s:";
$combination2 .= $_1 == '%' ? '%:"%"' : strlen($_1) . ':"' . $_1 . '";';
$combination2 .= ';}'; 
```

在此之下，我必须进行一些额外的查询，例如是否设置了分类并检查是否设置了一些动态属性，这就是将`WHERE`其存储在变量中的原因。坦率地说，他们只会让任何人感到困惑，所以我把他们排除在外。但是为了您的缘故，您只需要查询它的下一部分。

```
$where = "WHERE (pa.combination LIKE :pattern1 OR pa.combination LIKE :pattern2) AND s.stock IS NOT NULL";
$comparison = array( ':pattern1' => $combination,
                     ':pattern2' => $combination2 );

$filtered = db_query(
    "
        SELECT pa.nid, pa.model, pa.combination, n.title, p.sell_price, f.uri
        FROM {uc_product_adjustments} pa
        LEFT JOIN {node} n ON pa.nid = n.nid
        LEFT JOIN {uc_products} p ON pa.nid = p.nid
        LEFT JOIN {field_data_uc_product_image} i ON i.entity_type = 'node' AND i.entity_id = n.nid
        LEFT JOIN {file_managed} f ON f.fid = i.uc_product_image_fid
        LEFT JOIN {uc_product_stock} s ON pa.model = s.sku AND s.stock <> '0'
        $where
    ",
    $comparison
); 
```

最后循环结果并将它们存储在普通数组中

```
foreach( $filtered as $i => $record ) {
    if( is_int( array_search( $record->nid, $nids ) ) ) continue;
    else {
        $nids[] = $record->nid;
        $result[] = $record;
    }
} 
```

此代码检查与当前库存的任何属性值匹配的任何产品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:07:54.340

您可以看看这些沙盒项目：[UC Views Attributes Work](http://drupal.org/sandbox/NigelCunningham/1271796)和[UC 属性视图](http://drupal.org/sandbox/hachreak/1693408)。

我正在寻找类似的功能，因为似乎不可能将 UC 属性放入视图中。我现在无法测试自己，因为这个周末我有一个项目的截止日期，但我很高兴收到您的反馈。

# css - css左右两个框带transform

> ID：12077760
> 
> 赞同：-2
> 
> 时间：2012-08-22T16:46:36.663
> 
> 标签：css, html

正如我的标题，我有两个像这样的框，![图片](../Images/a20f6dd9eba94d42079a95d7927f5b16.png)伙计们，现在你可以理解我的问题了；）在响应式布局中，我想用背景黄色变换显示这个框，就像这个左侧是浮动左侧，另一个是浏览器窗口右侧浮动. 我觉得这太难了请帮我朋友的:(

我使用 css3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:01:42.757

这是您的（主要是）跨浏览器解决方案：

```
<style type="text/css">
#oneOfYourRectangles
{
    -ms-transform:rotate(10deg); /* IE 9 */
    -moz-transform:rotate(10deg); /* Firefox */
    -webkit-transform:rotate(10deg); /* Safari and Chrome */
    -o-transform:rotate(10deg); /* Opera */
}
#theOtherRectangle
{
    -ms-transform:rotate(350deg); /* IE 9 */
    -moz-transform:rotate(350deg); /* Firefox */
    -webkit-transform:rotate(350deg); /* Safari and Chrome */
    -o-transform:rotate(350deg); /* Opera */
}
</style> 
```

你知道，我从来没有测试过是否支持负值。

另外，请注意，显然 10 度和 350 度只是猜测。用最适合的值替换它们。

而且，只是为了好玩，请注意 webkit（Safari 和 Chrome）也支持 3D 转换。

# ios - Restkit 嵌套对象映射

> ID：12077762
> 
> 赞同：1
> 
> 时间：2012-08-22T16:46:42.723
> 
> 标签：ios, restkit

如何映射嵌套对象，例如

```
Category{
    "categoryID":1,
    "categoryName":blue,
    "parentCategory":{
          "categoryID":1,
          "categoryName":red,
     }
} 
```

如何在 JSON 响应中映射具有父子关系的对象。在这里，类别对象有一个父类别对象。

# python - 字符串格式化和连接

> ID：12077764
> 
> 赞同：0
> 
> 时间：2012-08-22T16:47:01.540
> 
> 标签：python, string

我正在阅读文本文件，它给了我类似的输出：

```
o hi! My name is Saurabh.

o I like python. 
```

我必须将上述输出转换为：

```
*1 hi! My name is Saurabh

*2 I like python. 
```

简单的字符串替换（用“”替换“\ no”）然后在python中添加数字给了我：

```
*1

o hi! My name is Saurabh

*2

o I like python. 
```

任何人都可以帮助我获得正确的输出

```
*1 hi! My name is Saurabh

*2 I like python. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:05:17.680

```
with open('sample.txt', 'r') as fin:
    lines = fin.readlines()

    with open('sample_output.txt', 'w') as fout:
        index = 1
        for line in lines:
            if line[0] == 'o':
                line = '*' + str(index) + line[1:]
                index += 1
            fout.write(line.rstrip() + '\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:08:43.400

如果您逐行阅读，则替换 '\no' 不是解决方案，因为 '\n' 不会位于行首。在这种情况下，您将需要使用正则表达式：

```
import re
f = open('test.txt')
h = open('op.txt','w')
gen = (line.strip() for line in f)

for line in enumerate(gen,1):
    h.write(re.sub('^o','*'+str(line[0]),line[1]) + '\n')
f.close()
h.close() 
```

PS：您可能想检查该行是否包含任何内容，然后，不要做任何事情；否则写入新文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T19:51:39.617

这是我的解决方案：

```
import re

f_in=open('data_in.txt', 'r')
f_out=open('data_out.txt', 'w')
ln=1
for line in f_in:
    s = re.sub('^o+','*%-3i' % ln,line)
    f_out.write(s)
    if not line=='\n': ln += 1
f_in.close()
f_out.close() 
```

# java - 将 hashmap 转换为 stringarray

> ID：12077769
> 
> 赞同：2
> 
> 时间：2012-08-22T16:47:27.227
> 
> 标签：java, mysql, hashmap, arrays, keyset

我正在尝试将哈希图转换为数组，我可以将其放入创建的字符串数组中。然而，我得到了 java.lang。我已将我的 Drinkar.keySet().toArray() 类型转换为 String[]，但它仍然无法正常工作。

```
public String[] receiveArrayList(){

String[] list = new String[0];

    try {
        ois = new ObjectInputStream(socket.getInputStream());
        drinkar = (HashMap<String, ArrayList<String>>) (ois.readObject());
        System.out.println(drinkar);

        System.out.println(Arrays.toString(drinkar.keySet().toArray()));
        list = (String[]) (drinkar.keySet().toArray());

        for(int i = 0; i < list.length; i++){
            System.out.println(list);
        }

    } catch (ClassNotFoundException ex) {
        System.out.println(ex);
    } catch (IOException ex) {
        System.out.println(ex);
    }
    return list;

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T18:38:18.367

使用[toArray(T[])](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#toArray%28T%5b%5d%29)作为：

```
String[] list = drinkar.keySet().toArray(new String[0]); 
```

通过给一个空数组作为参数，您告诉`toArray`为您创建一个相同类型的新数组，该数组将具有正确的大小。

* * *

请注意：如果您可以选择，使用集合（例如`ArrayList`而不是数组）通常更方便（也更安全）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T16:48:04.650

`drinkar.keySet().toArray()``Object[]`不返回`String[]`

其中一种方法可能是：

用户[Collections.toArray(StringArry)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collection.html#toArray%28T%5B%5D%29)

（或者）

遍历`keySet`并将每个元素添加到数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-24T19:57:59.710

String st[]=hm.keySet().toArray(new String[hm.size()]);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T18:11:04.277

另一种选择是创建`ArrayList<type>`和添加元素并返回`list.toArray()`。`toArray`这正是`entryset`Can not type code since not front of desktop 的作用

# bash - 反引号内的管道在 MinGW 下失败

> ID：12077771
> 
> 赞同：4
> 
> 时间：2012-08-22T16:47:30.073
> 
> 标签：bash, mingw

当我尝试使用 MinGW 在 Windows XP 机器上运行一些 Bash 脚本时，我收到以下错误：

```
./autogen.sh: pipe error: No such file or directory 
```

我已将问题定位到 Bash 行，如下所示，这些行在反引号内有一个管道：

```
__copyright="`grep Copyright ./autogen.sh | head -1`" 
```

但是，不在反引号内的管道可以正常工作：

```
grep Copyright ./autogen.sh | head -1 
```

您期望的所有程序（sh、head、grep）都可用并在命令行和 Bash 中愉快地运行。

我应该怎么做才能解决这个错误？没有它，我无法运行大多数 Bash 构建工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:26:58.827

```
$ msysinfo | head -3
msysinfo-1.3: Send this to the MSYS support list:

MSYS 1.0.11(0.46/3/2) 2004-04-30 18:55 i686 unknown; targ=MINGW32

$ echo '__copyright="`grep Copyright ./autogen.sh | head -1`" && echo $__copyright' >test.sh

$ cat test.sh 
__copyright="`grep Copyright ./autogen.sh | head -1`" && echo $__copyright

$ sh test.sh
# Copyright 2005, 2006, 2007, 2008 by 
```

对于这个测试，我从某个地方复制了 autogen.sh，比如......随机...... [http://svn.ghostscript.com/ghostscript/tags/freetype-2.3.7/autogen.sh](http://svn.ghostscript.com/ghostscript/tags/freetype-2.3.7/autogen.sh)

可能这意味着您的问题需要更多信息。

但是......有时当我遇到棘手的情况时，将破坏代码包含在`( )`. 从技术上讲，您也不需要`" "`反引号，这会使某些使用变得复杂，但是您的示例似乎没有问题。

我真的很讨厌提出以下建议，因为这似乎完全没有必要：

```
$ for item in `grep Copyright ./autogen.sh`;
  do
    __copyright="$__copyright $item";
  done;
  echo $__copyright 
```

更奇怪的是，您的错误消息似乎暗示 autogen.sh 本身产生了错误，就好像 autogen.sh 正在自我寻找一样，所以我这样做了：

```
$ sh test.sh
__copyright="`grep Copyright ./test.sh | head -1`" && echo $__copyright 
```

在将 test.sh 修改为 grep 本身之后，甚至可以正常工作。

因此，这听起来像是一个排序问题，而不是一个反引号问题，你知道，先有鸡还是先有蛋？

autogen.sh 是否试图阅读自己的版权评论？让评论作为数据的一种方法是将它们包装在此处的文档中：

```
_Copyright ()
{
  cat <<-END_OF_TEXT
# Copyright 2012, me
END_OF_TEXT
}

_Copyright 
```

# .net - 将实体框架模型从 SQL Server 切换到 DB2

> ID：12077773
> 
> 赞同：2
> 
> 时间：2012-08-22T16:47:31.607
> 
> 标签：.net, visual-studio-2010, entity-framework, web-config, db2

首先 - 如果有人有一个可以运行 DB2 的实体模型，你能把它贴出来吗？现在解释一下：

我有一个具有 SQL Server 数据库（仅用于开发）的开发环境和具有 DB2 数据库的 uat/生产环境（或多或少相同的数据库，只是在不同的平台上）

使用 Visual Studio 2010，我可以成功地针对 SQL Server 数据库生成实体框架模型，但不能针对 DB2。我安装了 DB2 9.7 客户端以及“IBM Database Add-ins for Visual Studio”，它允许我创建到 DB2 数据库的连接并通过 Server Explorer 连接到它，但是当我尝试从 DB2 Visual Studio 生成模型时挂起，最终我得到一个空模型。

因为我可以从 SQL Server 生成模型，所以我想知道当我的环境切换时，只需将 web.config 更改为指向 DB2 而不是 SQL Server 是否是一个简单的切换。

有没有人在 DB2 中使用实体框架，如果有，请您发布您的 web.config，以便我可以尝试切换提供程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:36:45.090

切换实体模型以连接到 DB2 需要进行两项更改。根据您所拥有的版本，这显然可能会改变。.edmx 更改：

```
<!-- SQL SERVER <Schema Namespace="Models.myDb2Model.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008"                  xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">-->
                <Schema Namespace="Models.myDb2Model.Store" Alias="Self" Provider="IBM.Data.DB2"          ProviderManifestToken="DB2, 09.01.0005, 0, 0" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl"> 
```

这是 web.config 更改：

```
 <!-- SQL SERVER<add name="db2Connection" 
     connectionString="metadata=res://*/Models.db2Entities.csdl|res://*/Models.db2Entities.ssdl|res://*/Models.db2Entities.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=mySqlServerDb;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> -->

  <add name="db2Connection" 
       connectionString="metadata=res://*/Models.db2Entities.csdl|res://*/Models.db2Entities.ssdl|res://*/Models.db2Entities.msl;provider=IBM.Data.DB2;provider connection string=&quot;Database=myDb2Db;User ID=myUserId;Password=MyPassword;Server=myServerName:myPort;DBName=myDbName;ConcurrentAccessResolution=Currentlycommitted;CurrentPackageSet=myCurrentPackageSet&quot;" 
       providerName="System.Data.EntityClient" /> 
```

**编辑**：显然您的机器需要设置为连接到 DB2，为 VS 安装适当的客户端和数据库插件。

# html - CSS 过渡错误

> ID：12077778
> 
> 赞同：1
> 
> 时间：2012-08-22T16:47:47.430
> 
> 标签：html, css, css-transitions

我在使用 CSS 时遇到了一些问题。我编写了一个简单的文本框，单击它时会下拉一个 div，但它似乎不起作用。如果有人可以帮助我，我会很高兴的。

**CSS：**

```
input {
    top:18px;
    left:20px;
    width:1230px;
    padding:4px;
    border:1px dashed #eeeeee;
    font:16px arial;
    font-weight:bold;
    color:#d8d8d8;
}

input:focus {
    height:200px;
}

div {
    overflow:hidden;
    padding:0;
    margin:0; 
    height:0; 
    width:1230px; 
    border:1px dashed #eeeeee; 
    background-color:transparent; 
    transition:height.5s; 
    -moz-transition:height 0.5s;
    -o-transition:height 0.5s; 
    -webkit-transition:height 0.5s;
}

body {
    background-image:url('pic.bmp');
    background-repeat:no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:28:36.287

您必须使用`input:focus + div`来选择您的部门。

这是您想要的纯 CSS 版本：[**jsFiddle**](http://jsfiddle.net/xtL7h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:00:42.457

我猜您需要更改`input:focus`为`input:focus div`（如果 div 在输入元素中）或类似的东西`input:focus + div`（如果 div 在输入之后），但是如果没有看到您的标记，很难说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:54:59.133

div 具有`overflow: hidden`属性，这将导致在呈现 div 的高度时忽略任何内部元素的高度。

# .net - 你调用的对象是空的

> ID：12077784
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:48:05.893
> 
> 标签：.net, vb.net

我知道这个错误已被问过很多次，但我仍然无法找出如何避免空值我将发布代码并指向导致错误的行

```
Private Sub loadRevFiles()
    ' load all the SVN information for the selected revision.'
    Dim a, b, RevNo, RevDataCnt As Integer
    ReDim filesAtRev(0 To SvnData(SvnData.Length - 1).RevNo)'this line throw the error'

    RevDataCnt = 0

    ' loading all the changes files into datastructure RevsionsReportDataStruct'
    For a = 0 To SvnData.Length - 1
        RevNo = SvnData(a).RevNo
        If RevNo > HeadRev Then Continue For
        For b = 0 To SvnData(a).changedFileNames.Length - 1
            If SvnData(a).changedFileNames(b).Contains(".dcm") Then
                ReDim Preserve RevisionsData(0 To RevDataCnt)
                RevisionsData(RevDataCnt).RevNumber = RevNo
                RevisionsData(RevDataCnt).FileName = SvnData(a).changedFileNames(b)
                RevisionsData(RevDataCnt).FilePathAndName =           SvnData(a).changedPathAndFileNames(b)
                RevisionsData(RevDataCnt).FileAction = SvnData(a).FileAction(b)
                RevisionsData(RevDataCnt).SVNNo = a
                RevDataCnt = RevDataCnt + 1
            End If
        Next
    Next
End Sub 
```

这是用于读取 dcm 文件的工具中的一个功能，在您提交更改时查找更改并将它们全部导出到 excel 文件中，您有一个新的修订版出于某种原因，当修订版数量很少但无法正常工作时，此功能工作得很好当修订的文件数很高时..

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:54:06.893

如果此行抛出`NullReference`异常：

```
ReDim filesAtRev(0 To SvnData(SvnData.Length - 1).RevNo) 
```

那么*要么* `SvnData`是`Nothing`，*要么*中的最后一个元素`SvnData`是Nothing。

很难说那是哪一个，因为我们对来自哪里一无所知`SvnData`，但是如果您能够重现问题，您应该能够轻松地通过它进行调试并自己检查值。

一旦你发现了什么是问题值`Nothing`，你需要找出*原因*，然后处理这种情况（如果它是合法的）或修复原因（如果它永远不应该`Nothing`）。

# entity-framework - 多对多关系优先与实体框架代码

> ID：12077786
> 
> 赞同：0
> 
> 时间：2012-08-22T16:48:12.350
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我有以下实体：

```
public class User : EntityBase
{
    [Required]
    [Key]
    public Guid Id { get; set; }
    public virtual ICollection<BlogEntry> BlogEntries { get; set; }
    public virtual ICollection<BlogEntry> [Name?] { get; set; } // User favourite blog entries
}

public class BlogEntry : EntityBase
{
    [Required]
    [Key]
    public Guid Id { get; set; }
    public virtual User User { get; set; }
    public virtual ICollection<User> [Name?] { get; set; } // Users who favourites blog entry
}

CREATE TABLE [dbo].[Favourites](
[BlogEntry_Id] [uniqueidentifier] NOT NULL,
[User_Id] [uniqueidentifier] NOT NULL,
) 
```

如果我要遵循 EF 代码优先命名约定，那么在这两种情况下应该使用什么属性名称？收藏夹表的名称也应该是 UserFavourites？

如果问题与 ICollection 的命名无关，我应该如何指示 EF 从收藏夹表中加载收藏 BlogEntry 的用户列表和用户收藏的 BlogEntrie(s) 列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:32:08.113

当您使用 Code First 时，您不应该自己创建表：让框架为您完成。

只需 在用户实体中创建一个`ICollection<User>`属性`BlogEntry`和一个。`ICollection<BlogEntry>`首先，从 中省略该`User`属性`BlogEntry`。然后，实体框架将为您创建联结表“UsersBlogEntries”。

当然，还有更多内容，但这应该可以帮助您入门。SO 充满了关于这个主题的优秀答案。

# opengl - 3D 滚动场景 - OpenGL

> ID：12077787
> 
> 赞同：1
> 
> 时间：2012-08-22T16:48:12.810
> 
> 标签：opengl, 3d, scroll, scene

我正在尝试在窗口中绘制云并将它们设置为朝向相机的动画。我遇到的问题是我想连续执行此操作，而不会突然重绘任何内容。有人可以告诉我我在这里缺少什么吗？

这是代码：

```
#include <gl/glut.h>

int width = 800, height = 600;
float theta = 0, distance1 = -600, distance2 = -600;
void drawCloud()
{
glPushMatrix();
glTranslated(1,0,-2);
glutSolidSphere(4,10,10);
glTranslated(-2,0,-5);
glutSolidSphere(4,10,10);
glTranslated(-1,0,3);
glutSolidSphere(4,10,10);
glPopMatrix();

}

void drawCloudFormation()
{
glPushMatrix();
glTranslated(-60,30,-300);
drawCloud();
glPopMatrix();

glPushMatrix();
glTranslated(15,3,-150);
drawCloud();
glPopMatrix();

glPushMatrix();
glTranslated(50,30,-200);
drawCloud();
glPopMatrix();

glPushMatrix();
glTranslated(-15,-15,-250);
drawCloud();
glPopMatrix();

glPushMatrix();
glTranslated(25,-25,-100);
drawCloud();
glPopMatrix();

glPushMatrix();
glTranslated(-30,0,-50);
drawCloud();
glPopMatrix();
}

void display()
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
//glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);

glPushMatrix();
glTranslated(0,0,distance1);
drawCloudFormation();
glPopMatrix();

glPushMatrix();
glTranslated(0,0,distance1-200);
glScaled(-1,1,1);
drawCloudFormation();
glPopMatrix();

glPushMatrix();
glTranslated(0,0,distance2-400);
glScaled(1,1,-1);
drawCloudFormation();
glPopMatrix();

glPushMatrix();
glTranslated(0,0,distance2-600);
glScaled(-1,1,1);
glScaled(1,1,-1);
drawCloudFormation();
glPopMatrix();

glutSwapBuffers();
}

void idle()
{
theta += 0.2;
if (theta == 360) theta = 360;

distance1 += 1;
if (distance1 > 200) distance1 = -600;

distance2 += 1;
if (distance2 > 600) distance2 = -600;

glutPostRedisplay();
}

void main(int argc, char** argv)
{
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
glutInitWindowSize(width, height);
glutInitWindowPosition(100, 200);
glutCreateWindow("Space Ship");
glClearColor(0, 0, 1, 1);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(120, 1, 0.1, 600);
//glOrtho(-2, 2, -2, 2, 0.1, 200);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
//gluLookAt(0, 0, -200, 0, 0, -600, 0, 1, 0);

glutDisplayFunc(display);
glutIdleFunc(idle);

glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:06:21.257

研究[粒子系统](http://en.wikipedia.org/wiki/Particle_system)。

您本质上想要一个矩形发射器在场景的另一侧以固定的速度向相机喷射云（粒子）。当云移动到摄像机后面时，将它们标记为非活动状态，粒子系统将在发射器处重新生成一个新的。

# ruby - 在云端保护我的服务器 API（Sinatra/Ruby）

> ID：12077788
> 
> 赞同：1
> 
> 时间：2012-08-22T16:48:13.380
> 
> 标签：ruby, cordova, sinatra, oauth-2.0, restful-authentication

我正在为客户端使用 PhoneGap 为 iphone、android 开发应用程序。在服务器端，我有一个带有 Sinatra/Ruby（不是 Rails）的 Restful API。该应用程序是免费的，任何人都可以访问这些服务，但我需要确保实现最低级别的安全性，以便我的 API 24/7 可用。

我听说过 oAuth，但我不确定这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:13:58.790

oAuth 是跨不同授权域（例如服务之间）的授权标准，可能不是您想要的。

保护 REST API 的最简单方法是使用 HTTPS。要保护 Sinatra，请查看[如何使 Sinatra 通过 HTTPS/SSL 工作？](https://stackoverflow.com/questions/3696558/how-to-make-sinatra-work-over-https-ssl)

# php - 搜索表单以搜索另一台服务器上的数据库

> ID：12077800
> 
> 赞同：0
> 
> 时间：2012-08-22T16:48:40.900
> 
> 标签：php, mysql

我以前从未需要这样做，但我正在开发一个将安装到用户网站的应用程序 - 但它需要查询存储在应用程序服务器上的数据库中的数据。

服务器 A（客户端 - 域：www.example.com）

服务器 B（应用程序）。

服务器 A 上会有一个表单（搜索表单），它将搜索数据连同有关服务器 A（域、IP）的一些信息一起发布到服务器 B（应用程序）。

服务器 B 处理程序将：-

1.）检查服务器A是否是一个实际的客户端（即是允许域列表中的域（www.example.com），并且请求是否来自服务器A的IP。

2.) 如果 1.) 为 TRUE，它将处理请求，并返回作为查询结果的响应。

我似乎在谷歌或这个网站上找不到任何人想要这样做的东西？不过，我可能正在寻找错误的东西。

此外，返回给服务器 A 的数组大小是否有限制？

我不想授予用户数据库访问权限 - 除非这是唯一的解决方案（即在激活应用程序时创建一个具有只读功能的新 mysql DB 用户）.??

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:29:22.220

如果您将数据发布到服务器 b（数据库主机），那么查询将在该服务器上本地运行。

您需要的是一些可以处理您的帖子的脚本，或者如果您想从服务器 A 连接到 db 并处理 post i 服务器 A，那么您必须授予该服务器连接到 db-server 的权利。

因此，您需要做的是在服务器 B 上编写一个脚本来处理该帖子。

我的猜测是，您最好为服务器 A 授予对服务器 B 上数据库的（适当）访问权限。

# jquery - 带有 mvc 3 razor 部分视图问题的 Jquery 模态窗口

> ID：12077801
> 
> 赞同：0
> 
> 时间：2012-08-22T16:48:45.920
> 
> 标签：jquery, asp.net-mvc, razor, jquery-ui-dialog

好的，所以我一直在为我目前正在处理的网站的一些功能使用一些 jquery 模态窗口。模态窗口全部打开，但它们绝对没有样式，也没有显示覆盖。这是我为模态定义 div 的方式：

```
<div class="ui-overlay"><div class="ui-widget-overlay"></div><div class="ui-widget-shadow ui-corner-all" style="width: 302px; height: 152px; position: absolute; left: 50px; top: 30px;"></div></div>
            <div  style="position: absolute; width: 280px; height: 130px;left: 50px; top: 30px; padding: 10px;" class="ui-widget ui-widget-content ui-corner-all"></div>
<div id="postEventPanel"></div> //this is the actual modal window 
```

我正在通过 jquery.load 加载视图的内容：

```
$('#postEventPanel').load(loadUrl); 
```

并像这样设置对话框选项：

```
 $('#postEventPanel').dialog({
    width: 650,
    modal:true,
    autoOpen: true,
    resizable: true,

    show: { effect: 'drop', direction: "up" }

}).show(); 
```

所以我遇到的问题是覆盖没有出现，任何样式也没有。我已使用主题滚轮生成我自己的主题，并将其包含在我的应用程序布局页面中。

这是我看到的问题的屏幕截图：

![这是我遇到的问题的屏幕截图，看到没有样式，甚至没有模式的默认样式。](../Images/08fc99a2b55ecc92cea83ed2a01b4293.png)

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:55:40.597

检查与模态窗口样式关联的 CSS 是否正确加载/引用。此外，如果您在 Firefox 中并且正在使用 Firebug 等调试器，请检查控制台选项卡上是否存在任何 javascript 问题。

# antlr - ANTLRWorks 未启动

> ID：12077802
> 
> 赞同：2
> 
> 时间：2012-08-22T16:48:48.030
> 
> 标签：antlr, osx-mountain-lion

我升级到 Mountain Lion，当我现在开始 ANTLRWorks 时，什么也没有发生。日志文件说：

```
8/22/12 6:43:24.881 PM com.apple.launchd.peruser.501[185]: ([0x0-0x241c41a].org.antlr.works[65060]) Job failed to exec(3) for weird reason: 86 
```

编辑：可运行的 jar 文件仍然有效，但打包的应用程序不能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:05:51.060

我在 Mountain Lion 上的 ALMWorks 的 JIRAClient.app 3.0.2 中看到了相同的行为。可执行 jar 到达启动屏幕然后崩溃。我现在正在联系支持人员。

更新：可执行 jar 在 JDK 7 下失败，但在 JDK 6 下成功启动应用程序。然而，这似乎没有影响打开 JIRAClient.app。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:10:13.843

看起来您需要 Java 更新 2012-006。Mountain Lion 更新后我遇到了同样的错误，这解决了它。

*   Almworks 吉拉：[https ://jira.almworks.com/browse/JCO-1183](https://jira.almworks.com/browse/JCO-1183)
*   苹果下载： http: [//support.apple.com/kb/DL1572](http://support.apple.com/kb/DL1572)

# flash - 为网站创建简单谜题的最佳技术应该是什么

> ID：12077803
> 
> 赞同：1
> 
> 时间：2012-08-22T16:48:57.730
> 
> 标签：flash, html, html5-canvas, game-engine

我们有一个儿童网站。我们想为孩子们添加一些谜题/游戏。我们需要能力，以便我们可以保存在我们的 mysql 数据库中取得的高分。

有点困惑要使用什么技术。如果我们使用 HTML5，我们不会获得很大的灵活性，因为它不像 flash 那样强大。另外，浏览器兼容性问题。

如果我们使用 Flash；它有它自己的挑战.. 慢慢地人们正在远离它.. 我们知道 iOS 根本不支持它。

考虑所有利弊；什么是最好的技术。它也可以是 html5 或 flash 以外的任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:55:10.590

HTML5 是 Web 交付的方式。
孩子们尤其会使用平板电脑和移动设备进行浏览，而且 Windows 8 Metro 也不支持 Flash（大部分情况下）。

现在有很多框架可以减轻跨浏览器问题和性能的负担。像 easleJS 或 raphael 这样的东西。

Flash 更优雅、更快、更一致，是的，但您现在可以使用大多数现代浏览器完成几乎所有事情。

查看 Grant Skinners EasleJS 和他的其他支持库，看看它们是否适合您的特定游戏需求。

[http://www.createjs.com/#!/CreateJS](http://www.createjs.com/#!/CreateJS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:35:57.203

我会选择 HTML5 只是因为它能够满足您在为孩子们创建拼图/游戏时可能遇到的大部分要求。如上所述，有各种可用的库，即 RaphaelJS 等。

有关使用基本 HTML5 Canvas 内容在 HTML5 中创建拼图/测验的一些简单教程，这里有一些链接：

*   [http://www.flashbynight.com/tutes/html5quiz/](http://www.flashbynight.com/tutes/html5quiz/)
*   [http://rhuno.com/flashblog/2012/08/01/tutorial-puzzle-game-basics-with-html5-and-javascript/](http://rhuno.com/flashblog/2012/08/01/tutorial-puzzle-game-basics-with-html5-and-javascript/)

# ios - 滚动：当ipad变成横向时实现滚动条？Xcode

> ID：12077804
> 
> 赞同：0
> 
> 时间：2012-08-22T16:48:59.937
> 
> 标签：ios, xcode, ipad, scroll

我的纵向视图很好。我所有的文本框和标签都是纵向可见的。但是当用户将 ipad 变成横向时，我的文本字段和标签很少会出现在下面，我无法滚动查看它们。任何人都可以帮忙吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:35:07.483

将您希望能够滚动的所有内容放在 UIScollView 中。

# html - 3-dim 腻子 (ssh)

> ID：12077807
> 
> 赞同：0
> 
> 时间：2012-08-22T16:49:10.477
> 
> 标签：html, opengl, 3d, jogl

想象一个 3 维腻子 - 一个多面体，每个面都是一个腻子壳。

几个问题： 1\. 有没有这种东西？2\. 我怎样才能轻松地实现一个自由​​旋转的立方体/多面体，以便在每个方面 - 我可以决定要显示什么（例如，油灰壳）。除非我必须这样做，否则我真的不想详述图形部分。所以任何容易准备的图形都会很好，只要它支持我的要求。openGL可以帮助我吗？JOGL？HTML5？（我不介意它在浏览器中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:38:16.593

真的很奇怪的问题，甚至不确定它是否属于这里，但无论如何似乎很有趣......

看看这里：[http ://www.jukie.net/bart/blog/popenRWE](http://www.jukie.net/bart/blog/popenRWE)

所以我想说：用popen的这个变体启动一个bash实例，它处理写入和读取，使用管道进行输入和输出，将键盘敲击转发到输入，并在OpenGL中渲染输出，可能在渲染纹理中。

对每一侧重复...

不过，不是 html5 或 jogl。普通的旧 C 或 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:48:37.807

Compiz 的[桌面立方体](http://wiki.compiz.org/Plugins/Cube)和六个全屏 Xterm。

# android - 重复的背景图像被拉伸

> ID：12077810
> 
> 赞同：3
> 
> 时间：2012-08-22T16:49:21.420
> 
> 标签：android, background, repeat, tile, stretch

我很难使用带纹理的背景。我有一个 60 像素 x 60 像素的位图纹理，我想将其设置为重复平铺图案中布局的背景。这是位于 res/layout 中的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/dark_texture_background" >

    ...
</RelativeLayout 
```

这是位于 res/drawable 中的 dark_texture_background：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/dark_background_texture"
    android:tileMode="repeat" /> 
```

dark_background_texture 是 60x60 像素的图像。

因此，问题在于纹理图像在被平铺的同时被放大。我在纹理图像的外部添加了一条红线，以查看纹理图像的确切位置，结果如下：

![平铺背景](../Images/5193d868fe6b3cacc73fb6c4b9119b1f.png)

我还根据getResources().getDisplayMetrics()添加了屏幕高度、宽度和密度。

由于屏幕宽度为 480 像素，因此纹理图像应重复 8 次 (480 / 60 = 8)。相反，只有 5 ~1/4。图像现在约为 90 像素并平铺。怎么回事？

当我明确告诉它重复时，为什么我的纹理图像会被拉伸？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T16:53:18.473

这是 Android 框架中的一个错误，从 ICS 开始就已修复。无论如何，这是前 ICS 版本的粗略解决方法：

```
public static void fixBackgroundRepeat(View view) {
    Drawable bg = view.getBackground();
    if (bg != null) {
        if (bg instanceof BitmapDrawable) {
            BitmapDrawable bmp = (BitmapDrawable) bg;
            bmp.mutate(); // make sure that we aren't sharing state anymore
            bmp.setTileModeXY(TileMode.REPEAT, TileMode.REPEAT);
        }
    }
} 
```

将其应用于所有具有平铺背景集的视图（即 findViewById() 它们）。

`anyDensity=true`有时，在 AndroidManifest.xml 中设置后，错误开始出现

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T21:10:09.877

我不确定 Raghav 到底指的是什么错误，但如果他们在 ICS+ 中更改了某些内容，那么肯定有*问题*。也就是说，我相当肯定其中的位图图像`drawable`被假定为`mdpi`，并从那里缩放（也许他们改变了这种行为？），鉴于您的 60px 图像变为 90px（60 * 1.5 缩放因子），这是有道理的。

您可以完全避免缩放，请记住物理尺寸会因密度不同而不同（尽管对于平铺背景可能并不重要），`drawable-nodpi`只需将位图放入文件夹即可。无论密度如何，Android 都将使用这些可绘制对象而不进行缩放。

# drawing - 用于创建和动态修改业务图的 Java 库

> ID：12077817
> 
> 赞同：5
> 
> 时间：2012-08-22T16:49:48.377
> 
> 标签：drawing, diagram, java

我正在寻找一个好的 java 库来操作框、箭头和标签，以便动态创建和填充如下图并将它们呈现为 png： ![在此处输入图像描述](../Images/df6486127b7bda786c32317c8d197d22.png) 另一个示例 ![在此处输入图像描述](../Images/b6cc7ff9f9b8e79bb3f1e2f9c6a6ddb4.png)

我可以创建一个稍后填充的静态模板，但我需要为图表中的每个框和边缘动态创建标签。

现在我已经尝试使用蜡染来操作 svg 模板，但是为边缘创建多行标签被证明是相当复杂的。蜡染的 SVG 方式似乎迫使我为每个标签行创建 1 个文本对象，每个标签行都具有绝对定位，这真的很痛苦。

我希望能够定义标签，仅指定它们相关的文本和链接，最终提供一些关于如何放置的提示，并让库放置它们。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:50:09.563

如果这是在商业场景中，Java 绘图库[yFiles](http://www.yworks.com/yfiles)可以很好地满足您的要求：

您可以使用方便的 API 来创建图表并设置图表样式，并使用大量选项自动布局图表，以限制生成的布局以满足您的需求。开箱即用支持多行和（简单）HTML 标签。您还可以导出为 PNG（以及其他基于像素的图像格式）和矢量图形格式，如 SVG、PDF、EPS。

这既可以在常规 Java (Swing) 应用程序中完成，也可以在无头环境中完成（例如，在服务器上创建图像并将它们动态发送到基于 Web 的瘦客户端）。

要了解使用该库可以做什么，我建议您查看基于 yFiles 的免费图形编辑器应用程序[“yEd”](http://www.yworks.com/yed)，并让您以交互方式尝试上述步骤。

（披露：我在 yWorks 工作，但在 Stackoverflow 上我不代表我的雇主。）

# android - Android：OnCLickListener 没有反应

> ID：12077820
> 
> 赞同：0
> 
> 时间：2012-08-22T16:50:04.713
> 
> 标签：android

我有三个按钮`Activity`，三个单独的按钮，`onClickListeners`就像我以前做过很多次一样。但是其中一位听众对点击事件没有反应，我不知道为什么。这是代码段：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_reminder_2);

    //References to layout resources
    edit2Back = (Button) findViewById(R.id.edit2Back);
    edit2Next = (Button) findViewById(R.id.edit2Next);
    edit2ChangeGPS = (Button) findViewById(R.id.edit2ChangeGPS);

    //Assigning listeners to Buttons
    edit2Back.setOnClickListener(listenerBack);
    edit2Next.setOnClickListener(listenerNext);
    edit2ChangeGPS.setOnClickListener(listenerChange);

}

final OnClickListener listenerNext = new OnClickListener() {

    public void onClick(View v) {
        Log.v("edit2Next","Click!");
        db.open();

        String sName = edit2ReminderName.getText().toString();
        String sNote = edit2ReminderText.getText().toString();
        int sRadius = Integer.parseInt(edit2Radius.getText().toString());
        String sUnits = (String) edit2SpinnerUnits.getSelectedItem();
        int sChecked = 0;
        if (edit2Check.isChecked()) {
            sChecked = 1;
        }

        db.insertReminder(sName, sNote, lat, lon, sRadius, sUnits, sChecked);

        db.close();

        Intent intent = new Intent(context, Reminders.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }

}; 
```

我以同样的方式写了我所有的其他听众，他们工作得很好，但这个没有。我查看了所有代码，但找不到原因。监听器根本没有启动，甚至 Log.v 指令也没有运行。谢谢你的建议！

**编辑：**

这是我定义我的 XML 代码的一部分`Buttons`：

```
<LinearLayout 
    android:id="@+id/edit2ControlLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@color/azure"
    android:padding="15dp"
    android:orientation="horizontal" >

    <Button 
        android:id="@+id/edit2Back"
        android:layout_height="wrap_content"
        android:layout_width="0.0dip"
        android:text="Back"
        android:background="@drawable/round_button_violet"
        android:textColor="@color/azure"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:layout_weight="1.0"
        android:layout_marginRight="5dp" />

    <Button 
        android:id="@+id/edit2Next"
        android:layout_height="wrap_content"
        android:layout_width="0.0dip"
        android:text="Next"
        android:background="@drawable/round_button_violet"
        android:textColor="@color/azure"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:layout_weight="1.0"
        android:enabled="false" />        

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:46:49.780

请在您的下一个按钮代码中删除 android:enabled="false" 以便使用下一个按钮。

```
<Button 
    android:id="@+id/edit2Next"
    android:layout_height="wrap_content"
    android:layout_width="0.0dip"
    android:text="Next"
    android:background="@drawable/round_button_violet"
    android:textColor="@color/azure"
    android:paddingTop="10dp"
    android:paddingBottom="10dp"
    android:layout_weight="1.0"
    android:enabled="false" /> 
```

# excel - 从单元格中提取多个文本 - Excel

> ID：12077822
> 
> 赞同：2
> 
> 时间：2012-08-22T16:50:08.350
> 
> 标签：excel, excel-2007

我有一个单元格，里面有一堆文本。我需要的信息在单元格中多次出现，但总是出现在不同的位置。

我用它来提取我需要的数据（1 组）。我需要的所有数据都以 00710 开头

```
 =MID(L2,FIND("00710",L2),18) 
```

这只返回一个，如果它出现在单元格中，我需要抓住其余部分。if 最多可以出现 5 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:15:44.777

也许这是第二次出现：

```
=MID(L2,FIND("α",SUBSTITUTE(L2,"00710","α",2)),18) 
```

`α`只是没有出现在您的字符串中的任何字符。您可以将 2 更改为 3、4 或 5。

# c++ - 如何将库指定到 Xcode 链接器和预处理器指令到 Xcode 编译器？

> ID：12077823
> 
> 赞同：0
> 
> 时间：2012-08-22T16:50:10.180
> 
> 标签：c++, xcode, macos

我想在Xcode IDE（mac os）中设置CPLEX（一个优化库），需要进行一些配置，但是我不知道如何做以下两个安装指示（我想知道如何在Xcode中做） IDE 构建设置，不在命令行终端中）。谁能帮帮我，谢谢：

1.编译器选项：通过选项-D给你的编译器一个预处理指令，像这样：

-DIL_STD

2.链接器选项：指定链接器的库，如下所示：

-lilocplex -lconcert

以下是库构建的正确顺序：

-lilocplex -lconcert -lcplex -lm -lpthread

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:40:26.943

就像bames53写的那样做。事实上我在上面提到的这两个步骤之后遇到了另一个问题，因为我在库搜索路径中分配了一个32位的库目录。为避免这种情况，应将库路径更改为 64 位。如果要使用 32bit lib，那么在 build settings 中将架构从“64-bit intel”更改为“32-bit intel”。事实上，mac os 通常是 64bit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:02:43.827

选择项目并转到项目编辑器中的构建设置。那里有用于将选项传递给编译器和链接器的设置。

# java - EDT 和运行时异常

> ID：12077826
> 
> 赞同：2
> 
> 时间：2012-08-22T16:50:19.007
> 
> 标签：java, swing

如果从 EDT 线程调用的某些方法出现未经检查的异常，会发生什么？它是保持 GUI 的响应能力还是什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T19:22:16.307

> 在重新启动之前，EDT 是否关闭了之前显示的所有组件？

`Runnable`不，EDT 只是像以前一样恢复执行实例；broken `Runnable`s 继续抛出异常。作为练习，检查调试器中[引用的示例。](https://stackoverflow.com/q/3020757/1076463)

附录：这是此[示例](https://stackoverflow.com/a/5048863/230513)中的典型堆栈跟踪。

```
chart.DTSCTest$1.actionPerformed(DTSCTest.java:53)
javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
java.awt.Component.processMouseEvent(Component.java:6373)
javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
java.awt.Component.processEvent(Component.java:6138)
java.awt.Container.processEvent(Container.java:2085)
java.awt.Component.dispatchEventImpl(Component.java:4735)
java.awt.Container.dispatchEventImpl(Container.java:2143)
java.awt.Component.dispatchEvent(Component.java:4565)
java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4621)
java.awt.LightweightDispatcher.processMouseEvent(Container.java:4282)
java.awt.LightweightDispatcher.dispatchEvent(Container.java:4212)
java.awt.Container.dispatchEventImpl(Container.java:2129)
java.awt.Window.dispatchEventImpl(Window.java:2478)
java.awt.Component.dispatchEvent(Component.java:4565)
java.awt.EventQueue.dispatchEventImpl(EventQueue.java:679)
java.awt.EventQueue.access$000(EventQueue.java:85)
java.awt.EventQueue$1.run(EventQueue.java:638)
java.awt.EventQueue$1.run(EventQueue.java:636)
java.security.AccessController.doPrivileged(AccessController.java)
java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
java.awt.EventQueue$2.run(EventQueue.java:652)
java.awt.EventQueue$2.run(EventQueue.java:650)
java.security.AccessController.doPrivileged(AccessController.java)
java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
java.awt.EventQueue.dispatchEvent(EventQueue.java:649)
java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T17:00:30.473

默认情况下，如果没有捕获到异常，堆栈跟踪将写入控制台输出。整个 GUI 并没有变得无响应（但是，正如垃圾神评论的那样，特定组件可以保持在看起来不自然的状态），EDT 继续工作：[当抛出异常时 EDT 是否重新启动？](https://stackoverflow.com/questions/3020757/java-does-the-edt-restart-or-not-when-an-exception-is-thrown)

好的做法是设置一个未捕获的异常处理程序，因为您想知道是否出了问题。请注意（取决于 Java 版本）这对于 EDT 的功能可能与其他线程不同：

[如何检测何时在 Java 中全局抛出异常？](https://stackoverflow.com/questions/75218/how-can-i-detect-when-an-exceptions-been-thrown-globally-in-java)

请注意，许多 SO 帖子中提到的“sun.awt.exception.handler”技巧不是必需的，并且在 Java 7 中不起作用。对于 Java 7，只需使用标准 Thread.setDefaultUncaughtExceptionHandler。当然，如果您同时使用这两种机制来注册异常处理程序，那么代码将适用于所有版本。

# java - 找出一个字段是什么类型的列表

> ID：12077829
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:50:23.027
> 
> 标签：java, class, dynamic, field

我试图弄清楚 List 在我的程序中实现什么类型的类。

我正在抓取 JSON 数据并将其放在根对象中。然后，此根对象中包含用于存储 JSON 数据的每个元素的列表。

例如，我有一个具有声明字段的根

```
List<Person> people
List<Location> locations 
```

所以我想要做的是遍历根类的每个字段，获取我当前正在查看的列表的类的类型，然后为该类调用特定的函数。（当我说特定函数时，我的意思是我声明了一个接口，这样我就可以返回实现该接口的类类型并运行它实现的函数以将列表分开。

调用`Class<?> clss = fieldObj.getType()`（其中 fieldObj 是字段类型）只返回它是一个列表。如何获取此字段的列表类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:02:03.537

如果您在运行时查找列表中包含的对象的类型，则无法从其`List`本身中执行此操作。这是因为类型擦除，这意味着在运行时所有`List`s 都是`List<Object>`. 如果您需要确定列表中对象的类型，请获取列表中的第一个元素并执行`instanceof`或`assignableFrom`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:35:02.193

在 Java 1.5+ 中，它可以部分地使用类中的[`getGenericType()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Field.html#getGenericType%28%29)方法来完成`Field`。

> Field.getGenericType() 将查询类文件中的签名属性（如果存在）。如果该属性不可用，它会退回到 Field.getType() ，这不会因引入泛型而改变。

[请参阅此处](http://docs.oracle.com/javase/tutorial/reflect/member/fieldTypes.html)的示例。查看代码打印的内容

`$ java FieldSpy FieldSpy list`

`> GenericType: java.util.List<java.lang.Integer>`

# java - Spring 表单标签和模型绑定转义

> ID：12077839
> 
> 赞同：1
> 
> 时间：2012-08-22T16:51:06.947
> 
> 标签：java, spring-mvc

我的 JSP 中有一个 Spring 表单标记，并且模型绑定到它。我希望表单内的一些输入作为单个 @RequestParam 值接收，但是无论我输入 Spring 输入还是纯 HTML 输入，值都会绑定到模型。我怎样才能摆脱这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:36:40.577

Simply put this inside your spring form:

```
<input type="text" id="yourParam" name="yourParam" value="3"/> 
```

and you will be able to get the value in your controller with `@RequestParam` without binding it to your model:

```
 @RequestMapping(value = "/yourMapping", method = RequestMethod.POST)
 public ModelAndView showForm(@RequestParam String yourParam, YourModelObject yourModelObject...) {
     // You can retrieve here the value of your JSP input

 } 
```

# python - 可以导入 numpy 模块但不能使用功能

> ID：12077842
> 
> 赞同：1
> 
> 时间：2012-08-22T16:51:14.247
> 
> 标签：python, python-2.7, numpy

我已成功安装 numpy (numpy-1.6.2-win32-superpack-python2.7.exe)。但是，每当我尝试调用任何函数时，都会出现以下错误。提前感谢您的帮助。

```
import numpy as np
if __name__ == "__main__":
    k = np.arange(10)

AttributeError: 'module' object has no attribute 'arange' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-15T07:20:29.817

回应上面的评论之一（因为我刚刚遇到这个问题，4 年后）：

您可能将文件命名为 numpy.py。尝试加载模块时，我相信路径首先检查当前目录，因此找不到它。

为了理智，要检查确实是这个问题，您应该运行 Python REPL ( `python`) 并输入：

`import numpy as np`， 其次是`dir(np)`

你应该看到所有的实际功能作为输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-06T09:49:08.233

这也可能发生，因为您可能将程序文件命名为 numpy.py（我犯了同样的错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T20:28:47.193

尝试以下操作：

```
for x in dir(np):
    print x 
```

这应该列出您导入的所有方法等，这样您就可以查看 arange() 是否可用。

你也可以试试

```
from numpy import * 
```

然后尝试：

```
print arange(10) 
```

想不到其他的了。奇怪的是，如果 arange 不存在，导入不会产生错误。

# ruby-on-rails - 带有rest-graph gem的Facebook Fangate

> ID：12077847
> 
> 赞同：0
> 
> 时间：2012-08-22T16:51:31.890
> 
> 标签：ruby-on-rails, ruby, facebook

fangate 是一种检查用户是否喜欢应用所在页面的方法，如果喜欢，他可以查看内容。

我一直在尝试用 rest-graph gem 做一个 fangate。

```
rest_graph_setup(
  :write_session => true,
  :iframe => true,
  :auto_authorize => true,
  :auto_authorize_scope => 'email',
  :app_id        => ENV['FB_ID'],
  :secret        => ENV['FB_SC'],
  :write_cookies => true,
)
raise rest_graph.get('me/likes/PAGE_ID').inspect 
```

这就是我连接到应用程序并在理论上获取状态（/USER_ID/likes/PAGE_ID）的方式。但是什么也没有发生，我得到了一个我喜欢的 PAGE_ID 的空数组。

我也试过fql方法

```
raise rest_graph.fql('SELECT uid FROM page_fan WHERE page_id=PAGE_ID AND uid=USER_ID').inspect 
```

但同样，我得到一个空数组。

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:32:13.183

看起来您没有`user_likes`范围内的权限。像这样添加

```
rest_graph_setup(
  :write_session => true,
  :iframe => true,
  :auto_authorize => true,
  :auto_authorize_scope => 'email,user_likes',
  :app_id        => ENV['FB_ID'],
  :secret        => ENV['FB_SC'],
  :write_cookies => true,
)
raise rest_graph.get('me/likes/PAGE_ID').inspect 
```

这可能会解决你的问题

# google-chrome-extension - 所选图像的 Google Chrome 扩展帖子内容

> ID：12077853
> 
> 赞同：1
> 
> 时间：2012-08-22T16:51:58.627
> 
> 标签：google-chrome-extension, webrequest, image-capture

我正在开发一个 Chrome 扩展程序，它将图像内容作为字节发布到我的服务（这是一个 C# Web 处理程序）并将其保存为 jpeg。

例如，我右键单击 StackOverflow 徽标并单击上下文菜单上的将此图像发送到服务按钮。它会将图像作为字节数组发布。

我可以通过发送图像 url 并稍后向该图像 url 发出请求并获取内容来做到这一点，但我不想打扰我的服务器发出请求或点击 stackoverflow 服务器。

有可能的？

谢谢。

# c# - 使用 LINQ 从文件中读取前 10 行

> ID：12077855
> 
> 赞同：3
> 
> 时间：2012-08-22T16:52:05.510
> 
> 标签：c#, .net, linq, file-io

谁能解释如何从 LINQ 中的文本文件中读取前 10 行。

使用 StreamReader 的代码：

```
using (var reader = new StreamReader(fileName))
{
    string ListLines = "";
    for (int i = 0; i < 10; i++)
    {
        ListLines[i] = reader.ReadLine();
    }
}
return ListLines; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T17:29:13.647

您可以使用：

```
var lines = File.ReadLines(path).Take(10)); 
```

通过使用`ReadLines`, 而不是`ReadAllLines`您将从文件中流式传输数据，而不是将整个内容读入内存。如果您仍在使用 C# 3.5，而不是 4（`ReadLines`添加时），您可以使用以下实现：

```
public static IEnumerable<string> ReadLines(string filename)
{
    using (TextReader tr = new StreamReader(filename))
    {
        string nextLine = tr.ReadLine();

        while (nextLine != null)
        {
            yield return nextLine;
            nextLine = tr.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T17:03:00.350

您的代码已经是实现目标的最佳选择：

```
var list = new List<string>();
using (var reader = new StreamReader(fileName))
{
    for (int i = 0; i < 10; i++)
    {
        list.Add(reader.ReadLine());
    }
}
return list; 
```

或者

```
using (var reader = new StreamReader(fileName))
{
    for (int i = 0; i < 10; i++)
    {
        yield return reader.ReadLine();
    }
} 
```

或者

```
var r = File.ReadLines(fileName)
            .Take(10)   // limit to first 10
            .ToArray(); // materialize, if needed 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T17:04:29.160

LINQ 风格：

```
using (var textReader = File.OpenText(fileName))
{
    return Enumerable.Range(1, 10).Select(i => textReader.ReadLine());
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T22:01:28.283

愿你对这个组合感兴趣:)

```
using (var reader = new StreamReader(filename))
{
    return (from p in Enumerable.Range(0, 10) select reader.ReadLine()).ToList();
} 
```

# c# - Process.Start返回null时查找进程ID？

> ID：12077856
> 
> 赞同：2
> 
> 时间：2012-08-22T16:52:07.353
> 
> 标签：c#, .net, process

如果我尝试通过直接调用打开图像文件、视频或网站`Process.Start(filepath)`，则通常会成功。但是，Process.Start 的返回值有时会为空。（[如此处所讨论](https://stackoverflow.com/a/3456414/1233949)）

我需要知道相关进程的 ID，以便稍后检索它并在必要时关闭它。（用例：用户使用我的程序打开一个图像文件，并希望使用我的程序关闭它）但是，检索返回 null 的进程的进程 ID 有点困难：P

除了直接指定我们可能遇到的每种类型的文件使用哪个程序之外，我应该如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:57:28.803

您必须直接指定使用哪个程序来获取进程的 id。我可以想象你可以问操作系统每个扩展使用什么程序，因为操作系统有一个列表。

# javascript - 变量与表达式作为 Javascript 参数

> ID：12077857
> 
> 赞同：1
> 
> 时间：2012-08-22T16:52:07.917
> 
> 标签：javascript, performance, arguments

将参数作为表达式传递，而不是首先将其设为变量，是否存在任何性能问题？

```
someFunction( x+2 ); 
```

对比

```
var total = x+2;
someFunction( total ); 
```

那么函数呢？

```
someFunction( someOtherFunction() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:53:26.167

不，更重要的是，这种微优化（几乎可以肯定）毫无意义。

话虽如此，如果您多次使用表达式的结果，那么保存计算结果可能会有一些完全难以察觉且完全不值得担心的好处。

写出来便于阅读。不要担心这些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T16:54:40.647

很明显：创建一个变量会创建一个变量。这会消耗内存并在执行时消耗一些时间。之后，它要么需要时间来垃圾收集它，要么在你的函数泄漏时不释放内存。

但是，您不会注意到任何差异。在那个级别上，性能是无法衡量的。经验法则：当你真正需要变量或当它们提高代码的可读性时使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T17:00:08.103

尽管差异很小，但答案确实是特定于实现的；JavaScript 引擎在分配事物的方式上几乎肯定是不同的。但是，我可以告诉您，这些差异很可能与大多数其他语言中的差异相似，我可以在调试器中检查内存和处理器寄存器。让我们研究一种情况：

```
var sum = x+2;
someFunction(sum); 
```

这会分配内存来保存 sum，只要函数在范围内，它就会一直存在。如果函数最终成为一个闭包，这可能是永远的。在递归函数中，这可能很重要。

```
someFunction(x+2); 
```

在大多数语言中，这将在堆栈上计算 x+2 并将结果传递给 someFunction。没有留下任何记忆。

对于函数返回值，答案将完全相同。

总而言之：

1.  确切的答案取决于 JavaScript 引擎的实现。

2.  您很可能不会注意到性能差异。

3.  当结果被重新使用时，或者当您想在调试器中轻松检查结果时，您可能想要使用变量。

这主要是个人喜好问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T17:23:52.177

创建一个范围不超出当前函数的局部变量与不创建局部变量并将表达式直接编写为函数的参数相比不会产生任何成本。事实上，没有什么可以告诉您编写`someFunction(x*2)`不会被转换为将变量绑定到`x*2`javascript 编译器内部结果的代码 - 事实上，许多编译器和 JIT 使用 SSA 作为它们的中间表示之一，其中变量的形式是*总是*绑定到每个子表达式的结果。请参阅相关的[Wikipedia 条目](http://en.wikipedia.org/wiki/Static_single_assignment_form)。无论是否关闭都没有区别。

在引入新变量和直接将表达式写为参数之间做出选择时，唯一需要考虑的两个相关问题是：

1.  **可读性：**命名表达式的结果是否使表达式正在计算的内容更清晰；

2.  **评估表达式的成本：**如果您将多次编写表达式，那么将变量绑定到结果将您可以重用，避免每次都重新计算结果。*仅*当您的表达式预计需要很长时间才能计算时，这才有意义。

如果您只需要在函数定义中编写一次表达式，那么将变量绑定到结果可能会使结果在内存中的生存时间超过严格必要的时间，但这几乎总是完全无关紧要：大多数函数调用的寿命都很短，在许多情况下，结果不会占用太多内存，并且分配在堆栈上的内存将在函数退出时回收，而在堆上分配的内存将很快被垃圾收集器回收。

# iphone - 解析问题预期标识符

> ID：12077858
> 
> 赞同：0
> 
> 时间：2012-08-22T16:52:15.247
> 
> 标签：iphone, ios, xcode, gamekit, void

我正在制作一个 iPhone 应用程序，但出现“预期标识符”错误。在错误日志中，上面有一个粗体的“解析问题”。它在这段代码中：

```
-(void) showLeaderboard:{
GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];

if (leaderboardController != nil)
{
    leaderboardController.leaderboardDelegate = self;
    [self presentModalViewController: leaderboardController animated: YES];  }}
-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
[self dismissModalViewControllerAnimated:YES];

} 
```

实际的错误就在这行："-(void) showLeaderboard:{" 并且小指针在小括号上。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:08:02.117

从方法中删除`:`。它应该只说`-(void) showLeaderboard {`

# jquery - $(this) 和 event.target 之间的区别？

> ID：12077859
> 
> 赞同：176
> 
> 时间：2012-08-22T16:52:19.523
> 
> 标签：jquery, this, jquery-events

我是 jQuery 的新手，并且正在按照**JavaScript 和 jQuery 中的教程制作选项卡式面板：缺少手册**，当作者这样做时，第一行是：

```
 var target = $(this); 
```

但我试着那样做

```
 var target = evt.target; 
```

我得到了那个错误：

> 未捕获的类型错误：对象 http://localhost/tabbedPanels/#panel1 没有方法“attr”

当我改`evt.target`回 时`$(this)`，它就像一个魅力。

`$(this)`我想知道和有什么区别`evt.target`？

如果您需要，这是我的代码：

**索引.html：**

```
<!DOCTYPE html>
<html>
    <head>
        <title>Tabbed Panel</title>
        <style>
            body {
               width : 100%;
               height: 100%;
            }

            #wrapper {
                margin : auto;
                width : 800px;                
            }

            #tabsContainer {
                overflow: hidden;
            }

            #tabs {                
                padding:0;
                margin:0;
            }                

            #tabs li {
                float : left;
                list-style:none;
            }

            #tabs a {
                text-decoration:none;
                padding : 3px 5px;                
                display : block;                
            }

            #tabs a.active {
                background-color : grey;                
            }            
            #panelsContainer {
                clear: left;
            }            
            #panel1 {
                color : blue;
            }            
            #panel2 {
                color : yellow;
            }
            #panel3 {
                color: green;
            }
            #panel4 {
                color : black;
            }         

        </style>
        <script type="text/javascript" src="jquery-1.8.0.min.js"></script>
        <script type="text/javascript" src="script.js"></script>        
    </head>

    <body>
        <div id="wrapper">
            <div id="tabsContainer">
                <ul id="tabs">
                    <li><a href="#panel1">Panel1</a></li>
                    <li><a href="#panel2">Panel2</a></li>
                    <li><a href="#panel3">Panel3</a></li>
                    <li><a href="#panel4">Panel4</a></li>
                </ul>
            </div>
            <div id="panelsContainer">
                <div id="panel1" class="panel">
                    this is panel1
                </div>
                <div id="panel2" class="panel">
                    this is panel2
                </div>
                <div id="panel3" class="panel">
                    this is panel3
                </div>
                <div id="panel4" class="panel">
                    this is panel4
                </div>                
            </div>
        </div>

    </body>

</html> 
```

**脚本.js：**

```
$(function(){
    $("#tabs a").click(function(evt){
       var target = evt.target,
           targetPanel = target.attr("href");
       $(".panel").hide();
       $("#tabs a.active").removeClass("active");
       target.addClass("active").blur();
       $(targetPanel).fadeIn(300);
       evt.preventDefault();
    });

    $("#tabs a:first").click();
}) 
```

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2014-02-10T00:14:49.187

There **is** a difference between `$(this)` and `event.target`, and quite a significant one. While `this` (or `event.currentTarget`, see below) always refers to the DOM element the listener was attached to, `event.target` is the actual DOM element that was clicked. Remember that due to event bubbling, if you have

```
<div class="outer">
  <div class="inner"></div>
</div> 
```

and attach click listener to the outer div

```
$('.outer').click( handler ); 
```

then the `handler` will be invoked when you click inside the outer div as well as the inner one (unless you have other code that handles the event on the inner div and stops propagation).

In this example, when you click inside the inner div, then in the `handler`:

*   `this` refers to the `.outer` DOM element (because that's the object to which the handler was attached)
*   `event.currentTarget` also refers to the `.outer` element (because that's the *current target* element handling the event)
*   `event.target` refers to the `.inner` element (this gives you the element where the event originated)

The jQuery wrapper `$(this)` only wraps the DOM element in a jQuery object so you can call jQuery functions on it. You can do the same with `$(event.target)`.

Also note that if you rebind the context of `this` (e.g. if you use Backbone it's done automatically), it will point to something else. You can always get the actual DOM element from `event.currentTarget`.

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-22T17:44:12.203

`this`是正在处理事件的 DOM 元素（当前目标）的引用。`event.target`指启动事件的元素。在这种情况下，它们是相同的，并且通常可以，但不一定总是如此。

您可以通过查看[jQuery 事件文档](http://api.jquery.com/category/events/)来很好地了解这一点，但总而言之：

> **事件.currentTarget**
> 
> 事件冒泡阶段中的当前 DOM 元素。
> 
> **event.delegateTarget**
> 
> 附加了当前调用的 jQuery 事件处理程序的元素。
> 
> **event.relatedTarget**
> 
> 事件中涉及的其他 DOM 元素（如果有）。
> 
> **事件.目标**
> 
> 启动事件的 DOM 元素。

要使用 jQuery 获得所需的功能，您必须使用 :`$(this)`或将其包装在 jQuery 对象中`$(evt.target)`。

该`.attr()`方法仅适用于 jQuery 对象，不适用于 DOM 元素。`$(evt.target).attr('href')`或者干脆`evt.target.href`给你你想要的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-03T23:18:28.970

jQuery 使用“on”方法处理 this 变量的方式有很大不同

```
$("outer DOM element").on('click',"inner DOM element",function(){
  $(this) // refers to the "inner DOM element"
}) 
```

如果您将此与以下内容进行比较：-

```
$("outer DOM element").click(function(){
  $(this) // refers to the "outer DOM element"
}) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-12T06:23:32.373

[http://api.jquery.com/on/](http://api.jquery.com/on/)状态：

> 当 jQuery 调用处理程序时，关键字是对**传递事件**`this`的元素的引用；对于直接绑定事件 是附加事件的元素，对于委托事件是元素匹配选择器。（请注意，如果事件从后代元素冒泡，则可能不等于。）**`this``this``this``event.target`**
> 
>  **要从元素创建 jQuery 对象以便它可以与 jQuery 方法一起使用，请使用 $(this)。**

 **如果我们有

```
<input type="button" class="btn" value ="btn1">
<input type="button" class="btn" value ="btn2">
<input type="button" class="btn" value ="btn3">

<div id="outer">
    <input type="button"  value ="OuterB" id ="OuterB">
    <div id="inner">
        <input type="button" class="btn" value ="InnerB" id ="InnerB">
    </div>
</div> 
```

检查以下输出：

```
<script>
    $(function(){
        $(".btn").on("click",function(event){
            console.log($(this));
            console.log($(event.currentTarget));
            console.log($(event.target));
        });

        $("#outer").on("click",function(event){
            console.log($(this));
            console.log($(event.currentTarget));
            console.log($(event.target));
        })
    })
</script> 
```

请注意，我使用`$`包装 dom 元素以创建 jQuery 对象，这是我们经常做的。

您会发现对于第一种情况，`this`, `event.currentTarget`,`event.target`都引用了同一个元素。

而在第二种情况下，当触发某个包装元素的事件委托时，`event.target`将引用被触发的元素，而`this`和`event.currentTarget`则引用到传递事件的位置。

对于`this`and ，根据[http://api.jquery.com/event.currenttarget/](http://api.jquery.com/event.currenttarget/)`event.currentTarget`，它们是完全相同的东西

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-22T18:14:10.950

这里存在跨浏览器问题。

一个典型的非 jQuery 事件处理程序是这样的：

```
function doSomething(evt) {
    evt = evt || window.event;
    var target = evt.target || evt.srcElement;
    if (target.nodeType == 3) // defeat Safari bug
        target = target.parentNode;
    //do stuff here
} 
```

jQuery 规范化`evt`并使目标`this`在事件处理程序中可用，因此典型的 jQuery 事件处理程序将是这样的：

```
function doSomething(evt) {
    var $target = $(this);
    //do stuff here
} 
```

使用 jQuery 的标准化`evt`和 POJS 目标的混合事件处理程序将是这样的：

```
function doSomething(evt) {
    var target = evt.target || evt.srcElement;
    if (target.nodeType == 3) // defeat Safari bug
        target = target.parentNode;
    //do stuff here
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-24T15:30:34.397

在事件处理函数或对象方法中，访问“包含元素”属性的一种方法是使用特殊的 this 关键字。this 关键字表示当前正在处理的函数或方法的所有者。所以：

*   对于全局函数，这表示窗口。

*   对于对象方法，this 表示对象实例。

*   在事件处理程序中，这表示接收事件的元素。

例如：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        function mouseDown() {
            alert(this);
        }
        </script>
    </head>
    <body>
        <p onmouseup="mouseDown();alert(this);">Hi</p>
    </body>
</html> 
```

该html渲染后的alert窗口内容分别为：

```
object Window
object HTMLParagraphElement 
```

事件对象与所有事件相关联。它具有提供“有关事件”信息的属性，例如网页中鼠标单击的位置。

例如：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
        function mouseDown(event) {
            var theEvent = event ? event : window.event;
            var locString = "X = " + theEvent.screenX + " Y = " + theEvent.screenY;
            alert(event);
                    alert(locString);
        }
        </script>
    </head>
    <body>
        <p onmouseup="mouseDown(event);">Hi</p>
    </body>
</html> 
```

该html渲染后的alert窗口内容分别为：

```
object MouseEvent
X = 982 Y = 329 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-03T07:21:16.300

' **this** ' 指的是事件侦听器已附加到的 DOM 对象。' **event.target** ' 指的是触发事件侦听器的 DOM 对象。一个自然的问题是，为什么事件侦听器会触发其他 DOM 对象。这是因为事件侦听器附加的父对象也触发了子对象。**

# ruby-on-rails - before_save & before_create 标题化麻烦

> ID：12077868
> 
> 赞同：1
> 
> 时间：2012-08-22T16:53:02.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个 Rails 应用程序，我试图在保存或创建属性之前为其命名。我很确定我已经正确地做到了这一点，但是，每当我尝试在我的 rails 控制台中创建新记录时，标题化都不会发生。这是我的模型代码：

```
class City < ActiveRecord::Base
  attr_accessible :name, :region_id

  belongs_to :region

  before_save :tileize_name
  before_create :tileize_name

  def tileize_name
    self.name.titleize
  end

end 
```

当我在控制台中读取属性时，titleize 方法有效。例如：

```
Region.find(4).name
 => "arizona" 

Region.find(4).name.titleize
 => "Arizona" 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T16:57:43.513

您正在为名称命名，但没有保存它。

```
string = "hello"
string.titleize
# => "Hello"
string
# => "hello"

string = string.titleize
# => "Hello"
string
# => "Hello" 
```

您需要将标题名称分配给您的名称属性。

```
def tileize_name
  self.name = self.name.titleize
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T01:53:17.603

实际上添加

`before_save { self.chefname = chefname.titleize }`

在“your_model.rb”中将解决这个问题。

所以看起来像

```
class Chef < ActiveRecord::Base
  before_save { self.chefname = chefname.titleize }
end 
```

另外值得一看[https://github.com/granth/titleize](https://github.com/granth/titleize)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T18:09:28.693

Or you can do this,

```
before_save { self.name.titleize! } 
```

The bag operator changes and saves the value. Then you won't need **before_create**.

# c - 如何使用 c 或 javascript 或 lua 查找 XML 文件的父节点？

> ID：12077871
> 
> 赞同：0
> 
> 时间：2012-08-22T16:53:17.977
> 
> 标签：c

我有一个如下所示的 xml 文件。

```
<?xml version="1.0"?>
-<dsl1> <host2> </host2> -<switch3> <host4> </host4> </switch3> <host5> </host5> -<switch6> <host7> </host7> <host8> </host8> </switch6> </dsl1> 
```

我想找到每个元素的父级。例如：host7 父级是 6。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T02:26:23.857

试试这个代码（`node_parent_dump.c`）：

```
/* Compile like this :
 * gcc -Wall node_parent_dump.c -o node_parent_dump `xml2-config --cflags` `xml2-config --libs` 
 */
#include <libxml/parser.h>
#include <libxml/tree.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int found = 0;

int walk_tree(xmlNode *node, xmlDocPtr doc, char *pattern)
{
        xmlNode *cur_node = NULL;

        for (cur_node = node; cur_node; cur_node = cur_node->next)
        {
                if ((!xmlStrcmp(cur_node->name, (const xmlChar *)pattern)))
                {
                        found++;
                        fprintf(stdout, "\n----> WE GOT IT\n\n");
                        fprintf(stdout, "The father's name is : %s\n", cur_node->parent->name);
                        fprintf(stdout, "\n<----\n");
                }
                walk_tree(cur_node->children, doc, pattern);
        }

        return found;
}

int main(int argc, char **argv)
{
        xmlDocPtr xml_doc;
        xmlNodePtr xml_root;
        int ret;
        char xml_file[] = "my_file.xml";

        if (argc != 2)
        {
                fprintf(stderr, "Usage : ./node_parent_dump node\n");

                exit(EXIT_FAILURE);
        }

        /* Read the XML file */
        if ((xml_doc = xmlParseFile (xml_file)) == NULL)
        {
                fprintf (stderr, "xmlParseFile failed\n");

                exit(EXIT_FAILURE);
        }

        /* Get the root node */
        if ((xml_root = xmlDocGetRootElement (xml_doc)) == NULL)
        {
                fprintf (stderr, "No root found\n");
                xmlFreeDoc (xml_doc);

                exit (EXIT_FAILURE);
        }

        /* Traverse all the tree to find the given node (pattern) */
        ret = walk_tree(xml_root, xml_doc, argv[1]);
        if (!ret)
                fprintf(stdout, "No luck, this node does not exit!\n");

        return 0;
} 
```

在linux下可以这样编译：

```
gcc -Wall node_parent_dump.c -o node_parent_dump `xml2-config --cflags` `xml2-config --libs` 
```

并像这样测试它：

```
toc@UnixServer:~$ ./node_parent_dump hello
No luck, this node does not exit!
toc@UnixServer:~$ ./node_parent_dump host7

----> WE GOT IT

The father's name is : switch6

<----
toc@UnixServer:~$ ./node_parent_dump host6
No luck, this node does not exit!
toc@UnixServer:~$ ./node_parent_dump host2

----> WE GOT IT

The father's name is : dsl1

<----
toc@UnixServer:~$ ./node_parent_dump host4

----> WE GOT IT

The father's name is : switch3

<----
toc@UnixServer:~$ ./node_parent_dump host23
No luck, this node does not exit! 
```

# javascript - 将选定的网络文本移动到 MS Word 的 Javascript

> ID：12077872
> 
> 赞同：1
> 
> 时间：2012-08-22T16:53:23.030
> 
> 标签：javascript, google-chrome-extension, ms-word

我很生气这似乎不可能，但我想与社区核实一下，看看是否有人开发了类似的工作版本。

我是一名研究生，花了很多时间在线研究，当我发现那个恰到好处的段落正是我一直在寻找的论点时，我必须从 chrome 中复制并粘贴它（在 mac os x ) 和 word (2011)。我已经构建了一个运行良好的“剥离所有格式”宏，但我想要的是一个从 chrome 到我的打开的 word 文档的管道，它给了我 1 个键“将选择发送到 word 文档”（比如 ~）。

我已经让 js 工作以获取选定的文本并将其移动，但我似乎无法打开我想要将文本移动到的文档。理想情况下，这将作为一个 chrome 插件工作（我之前已经构建过它们），但我没有在其他平台上看到关于 JS => Word 的文档（显然 activeX 控件不适合我）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:07:58.597

您可以使用自动化服务来执行此操作。打开 Applications > Automator，然后创建一个服务，该服务接收选定的文本（内置默认值之一）。这适用于任何应用程序，并且可以在您右键单击时通过“服务”菜单访问。

您可以使用 TextEdit 轻松完成此操作，例如使用以下两个操作：

```
Service receives selected text
New Textedit Document. 
```

我刚刚尝试确认它。如果需要，它还可以复制富文本等（包括链接）。我想类似的事情可以用 word 来实现，如果你安装了 TextWrangler（另一个文字处理器），那么已经有一个内置服务可以做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:08:19.267

出于安全原因，JavaScript 包含在浏览器中，因此您将无法使用 JavaScript 执行此操作。

我能想到的最好的事情是写一个“机器人”有点东西，只是复制粘贴，所以不是为了扩展。

# php - 使用 PHP 解析 XML 提要：按类别分组输出

> ID：12077881
> 
> 赞同：2
> 
> 时间：2012-08-22T16:54:09.147
> 
> 标签：php, xml

我正在尝试从工作板 XML 提要中解析数据。基本的提要语法如下所示：

```
<jobs>
<job>
    <title>
    <![CDATA[ Senior Data Analyst ]]>
    </title>
    <category>
    <![CDATA[ Analytics ]]>
    </category>
    <url>
    <![CDATA[
    http://www.mysite.com/careers/Senior-Data-Analyst.html
    ]]>
    </url>
</job>
<job>
    <title>
    <![CDATA[ Infrastructure Administrator ]]>
    </title>
    <category>
    <![CDATA[ Information Technology ]]>
    </category>
    <url>
    <![CDATA[
    http://www.mysite.com/careers/Infrastructure-Administrator.html
    ]]>
    </url>
</job>
</jobs> 
```

我已经知道如何使用 foreach 循环解析基本信息：

```
<?php
    $jobs = simplexml_load_file('jobfeed.xml');

    foreach ($jobs as $jobDetails):
        $category = $jobDetails->category;
        $title = $jobDetails->title;
        $url = $jobDetails->url;

        echo '<li>Category: ',$category,'<br>Title: ',$title,'<br>URL: ',$url,'</li>';
    endforeach;
?> 
```

但我想按类别对每个工作进行分组，所以它看起来像这样：

*   分析
    *   高级数据分析师
    *   其他类型的分析师
*   信息技术
    *   基础设施管理员

但我不知道如何遍历类别数据并对输出进行分组。建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:03:56.793

```
<?php
    $jobs = simplexml_load_file('jobfeed.xml');

    // We will store each category in an array. Each job in each category will be
    // an array storing the Title and URL.
    $categoryArray = array();

    // Loop over XML structure as before.
    foreach ($jobs as $jobDetails):
        $category = $jobDetails->category;
        $title = $jobDetails->title;
        $url = $jobDetails->url;

        // If the current category is not in the array yet, add it.
        if(empty($categoryArray[$category])) {
            $categoryArray[$category] = array();
        }
        // If the current category exists, add the job details to it.
        $categoryArray[$category][] = array(
            "Title" => $title, 
            "Url" => $url
        );
    endforeach;

    // Now we can loop over the sorted array, and output the data as required.
    foreach($categoryArray as $categoryName => $jobArray):
        echo '<li>Category: ' . $category;

        // Within each category, output an inner list for each job.
        echo '<ul>';    
        foreach($jobArray as $job) {
            echo '<li>Title: ' . $job["Title"] . '<br>URL: ' . $job["Url"] . '</li>';
        }

        echo '</ul>';
        echo '</li>';
    endforeach;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:06:04.297

不是 100% 确定您要做什么，但您可以轻松地将输出分组，如下所示：

```
function output_list($jobs = array())
{
    $data = array();

    foreach($jobs as $job_details)
    {
        $category = $job_details->category;
        $title    = $job_details->title;
        $url      = $job_details->url;

        if(!isset($data[$category]))
        {
            $data[$category] = array();
        }

        $data[$category][] = '<li>Category: '.$category.'<br>Title: '.$title.'<br>URL: '.$url.'</li>';
    }

    foreach($data as $category => $items)
    {
        $data[$category] = '<li><ul>'.implode('', $items).'</ul></li>';
    }

    return '<ul>'.implode('', $data).'</ul>'; 
}

echo output_list($jobs); 
```

# matlab - 等待将行添加到文件 MATLAB

> ID：12077884
> 
> 赞同：0
> 
> 时间：2012-08-22T16:54:17.850
> 
> 标签：matlab, select

我有一个日志文件，另一个进程正在向其中转储数据。我想在每次写入后立即在 MATLAB 中绘制文件的最后（最新）行。

我有“选择”posix系统调用的MATLAB（或八度）等价物吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:22:29.030

我找到了一种方法，但它不是可移植的，如果你需要，你不能用 Ctrl-C 把它扔掉：

```
system('inotifywait -qq -t 1 -e modify foo.dat'); 
```

您需要在安装了“inotify-tools”软件包的情况下运行 linux。

# python - tk destroy() 和 grid_forget() 并不总是有效

> ID：12077885
> 
> 赞同：0
> 
> 时间：2012-08-22T16:54:21.207
> 
> 标签：python, windows, tkinter

我希望任何人都可以在这里帮助我。我对我构建的 tkinter gui 有疑问。该问题仅发生在Windows中。我的 GUI 创建了一个带有一些标签的结果框架，当需要计算其他内容时，用户单击“newPort”按钮，该按钮应该删除结果框架并设置为`False`计算内部的一些实例属性。我遇到的问题（仅在 Windows 中很明显）有时结果`frame`及其后代`labels`不会每次都消失。有时他们会，有时他们不会。实例变量已正确设置为，`False`但小部件在主 GUI 上仍然可见。GUI 还包含几个`checkboxes`和`radiobuttons`但它们不会影响结果框架的创建或预期的破坏。`newPort`在单击导致`frame`and`labels`不会被破坏的按钮之前，我无法确定用户采取的操作模式。当我使用 py2exe 冻结我的应用程序以及从 Eclipse IDE 中的 python 解释器运行应用程序时，就会发生这种情况。我没有尝试直接从python解释器运行应用程序（即没有IDE），当我使用eclipse python解释器运行应用程序时，这个问题不会发生在我的Mac上。非常感谢大家！我的代码如下所示：

```
import Tkinter as TK
class widget(object):
    def __init__(self,parent=None):
        self.parent = TK.Frame(parent)
        self.parent.grid()
        self.frame = TK.Frame(self.parent)
        self.frame.grid()
        newLedger = TK.Button(self.parent,command=self.newPort).grid()
        self.calcButton = TK.Button(self.frame,command=self.showResults)
        self.calcButton.grid()
        self.calcVariable = True
    def newPort(self):
        self.calcVariable = False
        try:
            self.second.grid_forget()
            self.first.grid_forget()
            self.resultsFrame.grid_forget()
            self.second.destroy()
            self.first.destroy()
            self.resultsFrame.destroy()
        except:
            raise
        self.frame.update_idletasks()
    def showResults(self):
        self.resultsFrame = TK.Frame(self.frame)
        self.resultsFrame.grid()
        self.first = TK.Label(self.resultsFrame,text='first')
        self.first.grid()
        self.second = TK.Label(self.resultsFrame,text='second')
        self.second.grid()
if __name__ == '__main__':
    root = TK.Tk()
    obj = widget(root)
    root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:02:06.133

您不需要销毁或调用`grid_forget`标签，也不需要调用`grid_forget`resultsFrame；当您销毁 resultsFrame 时，它​​将导致其所有子项被销毁，并且当这些小部件被销毁时，它们将不再由网格管理。

我可以让小部件不被破坏的唯一方法是如果我连续两次单击“计算”按钮而不单击中间的“新”按钮。我通过从命令行运行你的程序来做到这一点。

# c# - 无法使用 C# SDK 将专辑添加到 Facebook 页面

> ID：12077892
> 
> 赞同：0
> 
> 时间：2012-08-22T16:54:38.890
> 
> 标签：c#, facebook, facebook-c#-sdk

我正在让自己绝望，试图使用 C# SDK 将专辑添加到 Facebook 页面。

我*认为*我的代码没问题，因为我可以通过 SDK 和 API 在自己的个人资料页面上成功创建相册。因此，我预计某些东西会与我的访问令牌和权限等混淆。

我的 C# 代码在这里：

```
string accessToken = "TOKEN HERE";

FacebookClient facebookClient = new FacebookClient(accessToken);
var albumParameters = new Dictionary<string, object>();
albumParameters["message"] = "new message";
albumParameters["name"] = "new name";
facebookClient.Post("/412639422128107/albums", albumParameters); 
```

我得到的错误是：（OAuthException - #1）发生了未知错误。

我在这里和网络上的其他地方阅读了大量关于获取页面访问令牌的帖子。我很确定我做对了 -

1.  我去这个页面：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)
2.  我输入“我/帐户”
3.  我看到几个我是管理员的页面，并获取与我试图将相册添加到的页面 id 对应的访问令牌 (412639422128107)
4.  我去这里检查这个访问令牌的权限： [https ://developers.facebook.com/tools/debug/access_token?q=](https://developers.facebook.com/tools/debug/access_token?q=)

5.  我看到我有以下权限：create_event、create_note、manage_pages、photo_upload、publish_actions、publish_stream、read_stream、share_item、status_update、video_upload

但是，我显然没有做正确的事情，因为它不起作用！请问有人能指出我正确的方向吗？

提前感谢负载:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:20:33.510

您可以使用此代码在 facebook 页面中创建相册。

```
string accessToken = "";

FacebookWebClient fbApp = new FacebookWebClient();

dynamic parametersForToken = new ExpandoObject();
parametersForToken.fields = "access_token";
try
{
  dynamic me = fbApp.Get(idExternalPage, parametersForToken);
  accessToken = me.access_token;
}
catch (Exception ex)
{
    return;
}

FacebookClient facebookClient = new FacebookClient(accessToken);
var albumParameters = new Dictionary<string, object>();
albumParameters["message"] = "new message";
albumParameters["name"] = "new name";
facebookClient.Post("/me/albums", albumParameters); 
```

或试试这个

```
https://developers.facebook.com/tools/explorer?method=GET&path='Page_Id'%3Ffields%3Daccess_token 
```

对不起，我正在测试我的脚本，我遇到了同样的问题。（仅用于创建画廊）

see this bug: [https://developers.facebook.com/bugs/376442565760536?browse=search_50361119879b15494037772](https://developers.facebook.com/bugs/376442565760536?browse=search_50361119879b15494037772) (the bug is fixed)

# jquery - 用于文本字段输入的 datepicker 式计算器

> ID：12077893
> 
> 赞同：0
> 
> 时间：2012-08-22T16:54:39.843
> 
> 标签：jquery

如果用户希望将一些数字相加然后让结果填充文本字段，是否有人获得了一个小图标的代码，我可以将其放置在文本字段中/附近？

Datepicker 正是我正在寻找的，但应该弹出一个标准计算器而不是日历。

谢谢！

```
 // datepicker
$("#Datepicker").datepicker({
    showOn: "button",
    buttonImage: "images/datepicker.png",
    buttonImageOnly: true,
    numberOfMonths: 2,
    altField: "#actualDate",
    altFormat: "yy-mm-dd"

}); 
```

CSS：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:59:59.663

检查以下链接。 [http://keith-wood.name/calculator.html](http://keith-wood.name/calculator.html)

它的工作原理与日期选择器完全相同

# vim - 在vim中自动保存缓冲区：make？

> ID：12077897
> 
> 赞同：8
> 
> 时间：2012-08-22T16:54:51.800
> 
> 标签：vim, macvim

有没有办法在发出 :make 之前自动保存缓冲区？我使用 MacVim 并且 make 绑定到 Command-B，这非常有用，但我似乎无法弄清楚如何在 make 之前编写缓冲区。我查看了所有的 autocmd 事件，似乎没有什么合适的。

有一个 QuickFixCmdPre 应该在 make 之前调用，但似乎无法让它工作：

~/.vimrc

```
function! AutoSaveOnMake ()
    if &modified
        write
    endif
endfunction

autocmd QuickFixCmdPre *.c :call AutoSaveOnMake() 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-23T06:12:12.910

Vim 有一个内置的设置：

```
:set autowrite 
```

> 在每个 :next、:rewind、:last、:first、:previous、:stop、:suspend、:tag、:!、:make、CTRL-] 和 CTRL 上写入文件的内容（如果已修改） -^ 命令；当 :buffer、CTRL-O、CTRL-I、'{A-Z0-9} 或 `{A-Z0-9} 命令将一个文件传送到另一个文件时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T17:02:43.777

与其创建`autocmd`命令，不如直接更新 Command-B 映射？

```
nnoremap <d-b> :update<bar>make<cr> 
```

# jaxb - 设置做“”空jaxb字段/属性

> ID：12077899
> 
> 赞同：-1
> 
> 时间：2012-08-22T16:54:58.327
> 
> 标签：jaxb

我有一个 xsd 说需要一些元素/属性，无论如何服务器端我可以发送一些“空”字段，例如：

```
<myEmptyField attr1="" attr2=""/> 
```

如何使用 jaxb 获得这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:09:26.987

您可以实现您正在寻找的**元素**，如下所示。还有[2 种其他替代方法可用于指定缺少数据](http://jaxb.java.net/tutorial/section_2_2_13-Defining-Subtypes.html)。

```
@XmlElement(name = "myEmptyField", required = true) 
```

对于**attributes**，我认为我们可以使用如下所示，但它不起作用（我需要检查原因），但另一种方法是将 POJO 上的值设置为空字符串。

```
@XmlAttribute(name = "attr1", required = true) 
```

# wix - WMIC 无法安装文件名中带有通配符的文件

> ID：12077903
> 
> 赞同：0
> 
> 时间：2012-08-22T16:55:11.363
> 
> 标签：wix, jenkins, windows-installer

我正在尝试使用 Jenkins 在目标机器上安装版本化的 msi，如下所示：

```
wmic /node:"[HOST]" /user:"[USER]" /password:"[PASS]" product call install true ,"", "\\[HOST]\D$\WebsitesDirectory\Product.*.msi" 
```

文件名将包含版本号，因此我无法将其硬编码到 wmic 命令中。但是 wmic 似乎无法使用通配符安装文件，并且在我运行此命令时悄悄地安装失败。看来它必须具有文件的确切路径和文件名才能安装它。有谁知道在文件名中使用通配符的方法或者更好的解决方法？

另一种可能性是 - 是否可以通过复制工件插件获取 Jenkins 提取的文件的确切名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:28:53.510

所以显然这不是 wmic 问题，而是 windows cmd 问题。我发现这可以解决问题：

```
for %%f in (*.msi) do (
  wmic /node:"[host]" /user:"[user]" /password:"[pass]" product call install true, "", "\\[host]\D$\WebsitesDirectory\%%f"
) 
```

# php - Zend From 文件上传不起作用

> ID：12077904
> 
> 赞同：0
> 
> 时间：2012-08-22T16:55:19.820
> 
> 标签：php, zend-framework, zend-form, zend-file

我在使用 Zend Framework 上传文件时遇到了一些问题。我创建了一个表单，如下所列，并将数据输入传递给我尝试上传文件的模型。IT 似乎只是获取文件名，但无法上传到我的上传目录。

形式

```
<?php

class Application_Form_Admin extends Zend_Form
{

    public function init()
    {
        // Set the method for the display form to POST
        $this->setMethod('post');

        // set the data format
        $this->setAttrib('enctype', 'multipart/form-data');

        // Add the title
        $this->addElement('file', 'ogimage', array(
            'label'      => 'Default App Image',
            'required'   => false
        ));

        // Add the submit button
        $this->addElement('submit', 'submit', array(
            'ignore'   => true,
            'label'    => 'Submit',
        ));

        // And finally add some CSRF protection
        $this->addElement('hash', 'csrf', array(
            'ignore' => true,
        ));

    }

} 
```

控制器

```
<?php

class AdminController extends Zend_Controller_Action
{

    /**
     * @var The Admin Model
     *
     *
     */
    protected $app = null;

    /**
     * init function.
     *
     * @access public
     * @return void
     *
     *
     */
    public function init()
    {

        // get the model
        $this->app = new Application_Model_Admin();

    }

    /**
     * indexAction function.
     *
     * @access public
     * @return void
     *
     *
     */
    public function indexAction()
    {
        // get a form
        $request = $this->getRequest();
        $form    = new Application_Form_Admin();

        // pre populate form
        $form->populate((array) $this->app->configData());

        // handle form submissions
        if($this->getRequest()->isPost()) {

            if($form->isValid($request->getPost())) {

                // save the clips
                $this->app->saveConfig($form);

                // redirect
                //$this->_redirect('/admin/clips');

            }

        }

        // add the form to the view
        $this->view->form = $form;
    }

} 
```

模型

```
class Application_Model_Admin
{

    /**
    * @var Bisna\Application\Container\DoctrineContainer
    */
    protected $doctrine;

    /**
    * @var Doctrine\ORM\EntityManager
    */
    protected $entityManager;

    /**
    * @var ZC\Entity\Repository\FacebookConfig
    */
    protected $facebookConfig;

    /**
     * Constructor
     */
    public function __construct(){

        // get doctrine and the entity manager
        $this->doctrine     = Zend_Registry::get('doctrine');
        $this->entityManager    = $this->doctrine->getEntityManager();

        // include the repository to get data
        $this->facebookConfig   = $this->entityManager->getRepository('\ZC\Entity\FacebookConfig');

    }

    /**
     * saveConfig function.
     * 
     * @access public
     * @param mixed $form
     * @return void
     */
    public function saveConfig($form){

        // get the entity
        $config = new \ZC\Entity\FacebookConfig();

        // get the values
        $values = $form->getValues();

        // upload the file
        $upload = new Zend_File_Transfer_Adapter_Http();
        $upload->setDestination(APPLICATION_PATH . '/../uploads/');
        try {
            // upload received file(s)
            $upload->receive();
        } catch (Zend_File_Transfer_Exception $e) {
            $e->getMessage();

        }

// get some data about the file
$name = $upload->getFileName($values['ogimage']);
$upload->setOptions(array('useByteString' => false));
//$size = $upload->getFileSize($values['ogimage']);
//$mimeType = $upload->getMimeType($values['ogimage']);
print_r('<pre>');var_dump($name);print_r('</pre>');
//print_r('<pre>');var_dump($size);print_r('</pre>');
//print_r('<pre>');var_dump($mimeType);print_r('</pre>');
die;
// following lines are just for being sure that we got data
print "Name of uploaded file: $name 
";
print "File Size: $size 
";
print "File's Mime Type: $mimeType";

// New Code For Zend Framework :: Rename Uploaded File
$renameFile = 'file-' . uniqid() . '.jpg';
$fullFilePath = APPLICATION_PATH . '/../uploads/' . $renameFile;

// Rename uploaded file using Zend Framework
$filterFileRename = new Zend_Filter_File_Rename(array('target' => $fullFilePath, 'overwrite' => true));
$filterFileRename->filter($name);

        // loop through the clips and add to object
        foreach($values as $k => $column){
            $config->__set($k, $column);
        }

        // save or update the clips object
        if(empty($values['id'])){
            $this->entityManager->persist($config);
        } else {
            $this->entityManager->merge($config);
        }

        // execute the query
        $this->entityManager->flush();

        // set the id
        $form->getElement('id')->setValue($config->__get('id'));

    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:52:47.250

问题是我在上传之前使用以下行访问表单数据：

```
// get the values
$values = $form->getValues(); 
```

现在将其放置在模型中上传之后，并使用以下内容访问文件数据：

```
$file = $upload->getFileInfo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:37:43.357

您必须将文件移动到您想要的位置。这是我在代码中使用的一个小片段

```
if($form->isValid($request->getPost())) {
 $uploadedFile = new Zend_File_Transfer_Adapter_Http();
 $uploadedFile->setDestination(APPLICATION_PATH.'/../public_uploads/');
 if($uploadedFile->receive()) {
  //Code to process the file goes here 
 } else {
  $errors = $uploadedFile->getErrors();
 }
 $this->app->saveConfig($form);
} 
```

希望这可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:59:40.800

要完成这项工作，您需要`setValueDisabled = true`在表单元素中进行设置，否则一旦调用`$form->getValues()`它就会将文件上传到系统临时文件夹。

目前`$form->getValues()`，您甚至在设置目标之前就在调用，因此文件将变为默认值（系统温度）。

# asp.net-mvc-3 - 更改 EDMX 文件中的一个表会影响项目中的所有操作。架构无效

> ID：12077905
> 
> 赞同：1
> 
> 时间：2012-08-22T16:55:21.730
> 
> 标签：asp.net-mvc-3, key, edmx

我们正在使用 VS2010 和 MVC 3。

这个项目运行良好。EDMX 模型中有 40 多个表。我们在 EDMX 文件上更改了一个表，然后没有任何效果。

所有操作（与更改相关或无关）都会出现此错误：

> 该方案无效。错误：
> 
> 该类型没有关键成员。作为EntityType 的RelationshipType 都必须具有具有BaseType 键或键成员的成员。该类型没有关键成员。作为EntityType 的RelationshipType 都必须具有具有BaseType 键或键成员的成员。
> 
> 说明：运行当前 Web 请求时出现未处理的异常。检查堆栈跟踪以获取有关错误及其在代码中的位置的更多信息。

所有表都有一个键...

我们正在恢复旧备份，并且工作正常......重建然后没有任何工作。！！！

任何想法，提前谢谢你...

例如：（这是一段Modelo.designer.cs）

`public ObjectSet Clientes { get { if ((_Clientes == null)) { _Clientes = base.CreateObjectSet("Clientes"); // ERROR HERE } return _Clientes; } }`

模型 (EDMX) 中所有表的相同错误。我们正在使用鼠标右键菜单选项“执行自定义工具”重建 Model.designer.cs

我们删除了旧模型，创建了一个新模型，然后......同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:31:05.920

更改 EDMX 模型，然后从数据库更新模型 -> 刷新 -> 表

# java - 实现忘记密码 ANDROID 时出错

> ID：12077906
> 
> 赞同：0
> 
> 时间：2012-08-22T16:55:25.987
> 
> 标签：java, android, eclipse

我试图使用 php 文件在我的应用程序中实现忘记密码功能，但遇到了一些错误。我向用户询问他们的电子邮件，然后我将它们存储在参数中，以便我的 php 文件可以获取电子邮件并将其发送给他们。

下面是我的代码：

```
btnPasswordSubmit.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // new ForgotPassword().execute();
            String recoveryPassword = txtRecoveryPassword.getText()
                    .toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("email", recoveryPassword));
            // getting JSON Object
            // Note that create event URL accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(
                    forgotPassword_url, "POST", params);

            // check log cat for response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully email sent
                    Intent intent = new Intent(getApplicationContext(),
                            ForgotPasswordSuccessActivity.class);
                    startActivity(intent);
                    finish();
                } else {
                    // failed to create event
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }); 
```

这是我的日志：

```
08-22 16:32:58.904: E/JSON Parser(271): Error parsing data org.json.JSONException: End of input at character 0 of 
08-22 16:32:58.924: E/AndroidRuntime(271): FATAL EXCEPTION: main
08-22 16:32:58.924: E/AndroidRuntime(271): java.lang.NullPointerException
08-22 16:32:58.924: E/AndroidRuntime(271):  at com.stts.sparetimetradingsystem.ForgotPasswordActivity$1.onClick(ForgotPasswordActivity.java:57)
08-22 16:32:58.924: E/AndroidRuntime(271):  at android.view.View.performClick(View.java:2408)
08-22 16:32:58.924: E/AndroidRuntime(271):  at android.view.View$PerformClick.run(View.java:8816)
08-22 16:32:58.924: E/AndroidRuntime(271):  at android.os.Handler.handleCallback(Handler.java:587)
08-22 16:32:58.924: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-22 16:32:58.924: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
08-22 16:32:58.924: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-22 16:32:58.924: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 16:32:58.924: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 16:32:58.924: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-22 16:32:58.924: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-22 16:32:58.924: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method)
08-22 16:39:22.534: E/JSON Parser(350): Error parsing data org.json.JSONException: End of input at character 0 of 
08-22 16:39:22.564: E/AndroidRuntime(350): FATAL EXCEPTION: main
08-22 16:39:22.564: E/AndroidRuntime(350): java.lang.NullPointerException
08-22 16:39:22.564: E/AndroidRuntime(350):  at com.stts.sparetimetradingsystem.ForgotPasswordActivity$1.onClick(ForgotPasswordActivity.java:57)
08-22 16:39:22.564: E/AndroidRuntime(350):  at android.view.View.performClick(View.java:2408)
08-22 16:39:22.564: E/AndroidRuntime(350):  at android.view.View$PerformClick.run(View.java:8816)
08-22 16:39:22.564: E/AndroidRuntime(350):  at android.os.Handler.handleCallback(Handler.java:587)
08-22 16:39:22.564: E/AndroidRuntime(350):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-22 16:39:22.564: E/AndroidRuntime(350):  at android.os.Looper.loop(Looper.java:123)
08-22 16:39:22.564: E/AndroidRuntime(350):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-22 16:39:22.564: E/AndroidRuntime(350):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 16:39:22.564: E/AndroidRuntime(350):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 16:39:22.564: E/AndroidRuntime(350):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-22 16:39:22.564: E/AndroidRuntime(350):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-22 16:39:22.564: E/AndroidRuntime(350):  at dalvik.system.NativeStart.main(Native Method)
08-22 16:43:45.264: E/JSON Parser(378): Error parsing data org.json.JSONException: End of input at character 0 of 
08-22 16:43:45.294: E/AndroidRuntime(378): FATAL EXCEPTION: main
08-22 16:43:45.294: E/AndroidRuntime(378): java.lang.NullPointerException
08-22 16:43:45.294: E/AndroidRuntime(378):  at com.stts.sparetimetradingsystem.ForgotPasswordActivity$ForgotPassword$1.run(ForgotPasswordActivity.java:85)
08-22 16:43:45.294: E/AndroidRuntime(378):  at android.os.Handler.handleCallback(Handler.java:587)
08-22 16:43:45.294: E/AndroidRuntime(378):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-22 16:43:45.294: E/AndroidRuntime(378):  at android.os.Looper.loop (Looper.java:123)
08-22 16:43:45.294: E/AndroidRuntime(378):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-22 16:43:45.294: E/AndroidRuntime(378):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 16:43:45.294: E/AndroidRuntime(378):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 16:43:45.294: E/AndroidRuntime(378):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-22 16:43:45.294: E/AndroidRuntime(378):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-22 16:43:45.294: E/AndroidRuntime(378):  at dalvik.system.NativeStart.main(Native Method)
08-22 16:46:22.954: E/JSON Parser(409): Error parsing data org.json.JSONException: End of input at character 0 of 
08-22 16:46:22.976: E/AndroidRuntime(409): FATAL EXCEPTION: main
08-22 16:46:22.976: E/AndroidRuntime(409): java.lang.NullPointerException
08-22 16:46:22.976: E/AndroidRuntime(409):  at com.stts.sparetimetradingsystem.ForgotPasswordActivity$1.onClick(ForgotPasswordActivity.java:62)

08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.View.performClick(View.java:2408)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.View.onKeyUp(View.java:4121)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.widget.TextView.onKeyUp(TextView.java:4431)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.View.dispatchKeyEvent(View.java:3740)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-22 16:46:22.976: E/AndroidRuntime(409):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
08-22 16:46:22.976: E/AndroidRuntime(409):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
08-22 16:46:22.976: E/AndroidRuntime(409):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.os.Looper.loop(Looper.java:123)
08-22 16:46:22.976: E/AndroidRuntime(409):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-22 16:46:22.976: E/AndroidRuntime(409):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 16:46:22.976: E/AndroidRuntime(409):  at java.lang.reflect.Method.invoke(Method.java:521)
08-22 16:46:22.976: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-22 16:46:22.976: E/AndroidRuntime(409):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-22 16:46:22.976: E/AndroidRuntime(409):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:23:04.803

您是否使用空字符串对此进行测试？基于来自 logcat 的这一行：

```
08-22 16:32:58.904: E/JSON Parser(271): Error parsing data org.json.JSONException: End of input at character 0 of 
```

看起来它正在尝试解析空字符串并失败。

# python - django上长时间运行的守护进程

> ID：12077911
> 
> 赞同：2
> 
> 时间：2012-08-22T16:55:47.760
> 
> 标签：python, django, celery, django-celery

我需要运行一个 python 脚本（它正在监听 Twitter），当它获取与特定主题标签匹配的推文时，它将在我的 django 应用程序上调用各种方法。

目前，我只是在命令行上手动运行脚本，但如果可能的话，我希望它在 django 中运行，这样我就可以从那里控制它，所以它在新的时候不必执行 HTTP POST数据。

我（简要地）看过芹菜，但这似乎是为了定期执行某些小任务。

有没有办法使用芹菜（或其他任何东西）来控制我拥有的这个长期运行的“听推特”脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:08:52.080

您应该使用[Supervisord](http://supervisord.org/)来运行您的 django 应用程序和脚本。使脚本成为 Django 项目的一部分，将允许您使用[Django 信号](https://docs.djangoproject.com/en/dev/topics/signals/)，您可以使用这些信号来编写自定义信号，该信号将在每次您的`twitter`逻辑完成它应该做的事情时发出。`Signals`正在阻塞。如果您希望它们是异步的，请[在 Django 中使用 Celery](http://pypi.python.org/pypi/django-celery)

另一种方法是通过运行您的 django 应用程序和 twitter 脚本`supervisord`，然后`REST API`向 Django 应用程序公开执行 HTTP POST 的 a。您可以为此使用[TastyPie](http://django-tastypie.readthedocs.org/en/latest/index.html)。

# java - 注释（bean 验证）不起作用

> ID：12077912
> 
> 赞同：1
> 
> 时间：2012-08-22T16:55:47.687
> 
> 标签：java, jsf-2, annotations

我添加了一些注释（bean 验证），如下所示，但它们不起作用。

```
@NotNull
@Min(value=3)
private double salario;

@NotNull
@Min(value=5)
@Max(value=19)

private Integer codigo; 
@NotNull
private Date aniversario; 
```

我导入了库：

```
com.sun.istack.internal.NotNull import;
javax.validation.constraints.Max import;
javax.validation.constraints.Min import; 
```

我的字段没有被验证。会是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:14:58.427

1.  你可能有错误的导入`@NotNull`（它应该在`javax.validation.constraints`包中）。如果值是 ，则其他注释无关紧要`null`。并且由于您的此注释错误，因此它们将被允许`null`除了 ，`double`顺便说一句， the`@NotNull`是无用的，因为`double`它始终具有价值。

2.  您确定您的应用程序中包含验证库吗？我不确定 jsf（无论您使用哪种 impl）是否带有一个。

您希望在什么时候进行验证？如果这是一个 jsf 托管 bean，它很可能会在设置值阶段结束时得到验证。

如果它不是 JSF 管理的，那么您很可能必须通过 API 验证自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:54:07.340

为马特+1。NotNull 导入来自错误的包。将其更改为`javax.validation.constraints.NotNull`. 此外，只有在类路径中存在 JSr 303 实现时，这才可以开箱即用。从[这里](http://andyschwartz.wordpress.com/2009/07/31/whats-new-in-jsf-2/#validation)

在存在 bean 验证实现的环境中，JSF 自动验证 UIInput 值引用的 bean 的约束。

此外，`<f:validateBean>`可用于微调 bean 验证行为。例如，validationGroups 属性可用于手动指定在验证特定组件时应考虑哪些验证组：

```
<h:inputText value="#{bean.foo}">
  <f:validateBean validationGroups="com.foo.validation.groups.Billable"/>
</h:inputText> 
```

当验证约束失败时，任何相关的错误消息都会由 JSF 实现自动转换为 FacesMessages，从而将失败传达给最终用户，而不会给应用程序开发人员带来任何负担。

**空字段验证**

在以前的 JSF 版本中，验证器未应用于具有 null/空提交值的 EditableValueHolder 组件。不幸的是，这种行为限制了实际检查空/空值的约束的效用，例如 JSR 303`@NotNull`约束。为了支持`@NotNull`和其他类似的约束，JSF 2 更改了 null/空值验证的行为。从 JSF 2 开始，当存在 JSR-303 实现时，将验证空值/空值。

由于这可能会导致不希望看到空值/空值的旧验证器实现出现问题，`javax.faces.VALIDATE_EMPTY_FIELDS`因此可以使用 context 参数来禁用此行为。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-02T11:03:41.743

尝试卸载最新的 Android SDK Build-tool。转到 Android SDK 管理器 -> 卸载 Android SDK Build-tool。

# html - 使用 perl 打印出正确的 html 表

> ID：12077914
> 
> 赞同：0
> 
> 时间：2012-08-22T16:55:50.733
> 
> 标签：html, perl

我`List::Compare`用来比较两个文件并在 html 中打印输出，但是由于我使用的是数组，所以输出是一行而不是不同的行。

例子

```
file1.txt
aaaa
bbbb
cccc
dddd 

file2.txt
aaaa
bbbb
cccc
eeee 
```

代码

```
use strict;
use warnings;
use Getopt::Long;
use List::Compare;

my $f1 = 'file1.txt';
open FILE1, "$f1" or die "Could not open file $f1 \n";
my $f2= 'file2.txt';
open FILE2, "$f2" or die "Could not open $f2 \n";
my $outputFile = 'finaloutput.txt';

my @body="";
push(@body, "<html> \n");
push(@body, "<head> \n");
push(@body, "<TABLE BORDER=\"0\" CELLPADDING=\"0\" CELLSPACING=\"0\" WIDTH=\"100%\"  \n");
push(@body, " <TD>");
push(@body, "<div align=\"left\"><Table border=2 bordercolor= \"black\"> \n");
push(@body, "<tr bgcolor=\"ORANGE\"><TH><b>uniq in file1</b></TH><TH>uniq in file 2</TH><TH>common</TH></TR>");
push(@body, "<br>\n");

my @latest=<FILE1>;
my @pevious=<FILE2>;
my $compare = List::Compare->new(\@latest, \@pevious);

my @intersection = $compare->get_intersection;
my @firstonly = $compare->get_unique;
my @secondonly = $compare->get_complement;

print "Common in both:\n"."@intersection"."\n";
push(@body, "<tr><td>@intersection</td>\n");
print "uniq in first file:\n"."@firstonly"."\n";
push(@body, "<td>@firstonly</td>\n");
print "Items uniq in Second File:\n"."@secondonly"."\n";
push(@body, "<td>@secondonly</td></tr>\n");

push(@body, "</div></Table>" );  
my $Joining= join('', @body);
push(@body, "</body></font>");
push(@body, "</html>");  
print FILE"$Joining";
close FILE;
close FILE1;
close FILE2; 
```

这是我为第一列获得的 html 输出：

```
<tr><td>aaaa 
bbbb
cccc </td></tr> 
```

我希望有：

```
<tr><td>aaaa</td> <td>bbbb</td><td>cccc</td></tr> 
```

我希望我已经正确解释了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:11:18.637

更改此行：

```
push(@body, "<tr><td>@intersection</td>\n"); 
```

到：

```
push @body, '<tr>', (map{'<td>'.$_.'</td>'}@intersection), '</tr>'; 
```

和其他数组`@firstonly`一样`@secondonly`

如果要删除换行符，可以执行以下操作：

```
my @latest=<FILE1>;
chomp @latest;
my @pevious=<FILE2>;
chomp @pevious; 
```

**编辑**

根据您的评论，如果我很好理解，请尝试以下操作：

更换此块

```
print "Common in both:\n"."@intersection"."\n";
push(@body, "<tr><td>@intersection</td>\n");
print "uniq in first file:\n"."@firstonly"."\n";
push(@body, "<td>@firstonly</td>\n");
print "Items uniq in Second File:\n"."@secondonly"."\n";
push(@body, "<td>@secondonly</td></tr>\n"); 
```

有了这个：

```
my $nbrows = @intersection;
$nbrows = @firstonly if @firstonly > $nbrows;
$nbrows = @secondonly if @secondonly > $nbrows;
push @intersection, ("&nbsp;")x($nbrows - @intersection);
push @firstonly, ("&nbsp;")x($nbrows - @firstonly);
push @secondonly, ("&nbsp;")x($nbrows - @secondonly);
for my $i(0..$nbrows-1) {
    push @body, "<tr>";
    push @body, "<td>$firstonly[$i]</td>";
    push @body, "<td>$secondonly[$i]</td>";
    push @body, "<td>$intersection[$i]</td>";
    push @body, "<tr>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:05:16.983

这段代码

```
 push(@body, "<tr><td>@intersection</td>\n"); 
```

简单地将数组的元素插入到由空格分隔的字符串中。

你想要类似的东西

```
 push(@body, "<tr>"); 
  push(@body, map {"<td>$_</td>"} @intersection);
  push(@body, "</tr>"); 
```

# javascript - 我如何在 Dojo form.select 选项中设置选中

> ID：12077916
> 
> 赞同：4
> 
> 时间：2012-08-22T16:55:59.897
> 
> 标签：javascript, dojo

您好 Dojo 开发人员，我有一个下拉 form.select，它有几个选项，如何设置要选择的选项。假设我想在选择元素中显示第三个选项。我正在查看 dojo 文档，但没有看到 setSelected() 或类似内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:04:16.770

除了 value 之外，您还需要使用 displayValue 属性来设置显示的选项。使用类似的东西：

selector.set("displayedValue", "the_text_of_the_option");

或者您可以使用以下命令搜索下拉列表的基础存储：

```
selectorStore.fetch({query:{id: value}, onComplete: function (items) {
              dojo.forEach(items, function(item){
                  selector.set("displayedValue", "the_text_of_the_option");
                  selector.set("value", "the_value_of_the_option");
              });
}}); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:25:26.457

我找到了，是 selector.attr("value", "the_name_of_the_option");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T23:05:00.060

谢谢，这是真的并且有效。我已经测试过了。但是我发现了我的错误：我正在动态创建选项，并且当我将 .selected = true 添加到选择器时，它会将饱和更改为第一个被选中的选项。或者如果我应用`selector.set("displayedValue", "the_text_of_the_option");` 它在视觉上显示选定的一个，但实际上在选定的后面仍然是第一个不计量，如果我用上面的 selector.set 更改它。所以我通过手动创建选定状态来解决它。这样，当我添加它时，字母 id 会保留在所需的位置并相应地更改它。

剪在这里：

```
 //populate latitude selector
    match = false;
    optionsArr = [];
    for(var i = 0; i < namesLength; i++){
        for(var j = 0, len2 = latNames.length; j < len2; j++){
            if(fieldNames[i].toLowerCase() == latNames[j]){

                for (var a = 0; a < namesLength; a++) {
                    var option = {};
                    option.label = fieldNames[i];
                    option.value = i+"";
                    if(i==a){
                        option.selected = true;
                    }
                    optionsArr.push(option);
                }
                    match = true;
            }
        }
    }
    if(match){
        var drop1 = dijit.byId("selectLatitude");
        drop1.addOption(optionsArr);
    }else{
        var drop1 = dijit.byId("selectLatitude");
        drop1.addOption(options);//options is an array of options created originally
    } 
```

# hibernate - 从 groovy 脚本调用时将 sessionFactory 注入 grails 服务

> ID：12077921
> 
> 赞同：4
> 
> 时间：2012-08-22T16:56:21.190
> 
> 标签：hibernate, grails, sessionfactory

我有一个 grails 服务：

```
MyService {   
   def sessionFactory    
   void someMethod() {
     //...
     sessionFactory.currentSession.createSQLQuery(sql);
     //...    
   } 
} 
```

我想从 groovy 脚本（位于 src/groovy 中）调用此服务。我通过 grails 命令调用 - grails test run-script src\groovy\CallMyService.groovy。

sessionFactory 在以这种方式调用时为空（作为集成测试运行时它工作正常）。但我想通过脚本调用它。如何将 sessionFactory 注入服务？我尝试修改 RunScript.groovy，例如：

```
def sessionFactory = appCtx.getBean("sessionFactory")
def session = SessionFactoryUtils.getSession(sessionFactory, true)
TransactionSynchronizationManager.bindResource(sessionFactory, new SessionHolder(session)) 
```

但这没有帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T18:13:31.933

在使用 运行的脚本中`run-script`，您应该能够通过以下方式获得服务：

```
myService = ctx.myService 
```

如果 spring 正在管理您的服务，则`sessionFactory`应该自动初始化。

# javascript - 如何确保只选择一个 h:selectOneRadio 按钮

> ID：12077922
> 
> 赞同：1
> 
> 时间：2012-08-22T16:56:45.870
> 
> 标签：javascript, jsf, jsf-2

我有一些 javascript 代码（我从 BalusC 借来的）用于确保在表中只选择一个 h:selectOneRadio 按钮。不幸的是，我的 glassfish 服务器出现格式错误的表达式错误：

```
Error Parsing /ClientSearch.xhtml: Error Traced[line: 13] The content of elements must consist of well-formed character data or markup. 
```

笔记：

```
 if (elements[i].name.substring(elements[i].name.lastIndexOf(':')) == id) { 
```

似乎是问题所在

我也不完全理解javascript（我是新手），我希望有人可以向我解释。

这是完整的javascript：

```
 function dataTableSelectOneRadio(radio) {
    var id = radio.name.substring(radio.name.lastIndexOf(':'));
    var elements = radio.form.elements;
    for (var i = 0; i < elements.length; i++) {
        if (elements[i].name.substring(elements[i].name.lastIndexOf(':')) == id) {
            elements[i].checked = false;
        }
    }
    radio.checked = true;
}
 </script> 
```

为什么我会收到错误消息？而且，脚本本身似乎是错误的。如果不等于 id 则代码不应该为 false （如下所示）。

```
 if (elements[i].name.substring(elements[i].name.lastIndexOf(':')) != id) {
    elements[i].checked = false;
 } 
```

显然我不明白。

这是表格的 facelets 代码：Clients

```
 <h:column headerText="First Name"  >
            <f:facet name="header"><h:outputText value="First Name" /></f:facet>
            #{client.firstName}
        </h:column>
        <h:column headerText="Last Name"  >
            <f:facet name="header"><h:outputText value="Last Name" /></f:facet>
            #{client.lastName}
        </h:column>

        <h:column headerText="Select"  >
            <f:facet name="header"><h:outputText value="Last Name" /></f:facet>
            <h:selectOneRadio valueChangeListener="#{clientSearchBean.setSelectedItem}" >
                <f:selectItem itemValue="null" />
            </h:selectOneRadio>
        </h:column>

        <h:column headerText="Address"  >
            <f:facet name="header"><h:outputText value="Address" /></f:facet>
            #{client.address}
        </h:column>
        <h:column headerText="Cell"  >
            <f:facet name="header"><h:outputText value="Cell" /></f:facet>
            #{client.cell}
        </h:column>
        <h:column headerText="Phone"  >
            <f:facet name="header"><h:outputText value="Phone" /></f:facet>
            #{client.phone}
        </h:column>

    </h:dataTable> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:58:36.017

我已经尝试（并且正在使用）a 中的 BalusC 代码`<h:dataTable>`并且工作得很好。你有两个问题：

1.  您根本没有使用 JavaScript 函数（或者看起来在您的代码中）：

    ```
    <h:column headerText="Select">
        <f:facet name="header">
            <h:outputText value="Last Name" />
        </f:facet>
        <!-- you forgot to add the onclick -->
        <h:selectOneRadio valueChangeListener="#{clientSearchBean.setSelectedItem}"
            onclick="dataTableSelectOneRadio(this);">
            <f:selectItem itemValue="null" />
        </h:selectOneRadio>
    </h:column> 
    ```

2.  您的 JavaScript 代码具有`<`符号。Facelets 对这个符号的使用非常严格。要使其工作，您应该在[Script 和 Style 元素中使用](http://www.w3.org/TR/xhtml1/#h-4.8)[XML CDATA](http://www.w3schools.com/xml/xml_cdata.asp)用法：

    ```
    <script type="text/javascript">
    //the CDATA must be used with JavaScript comments
    //<![CDATA[
        function dataTableSelectOneRadio(radio) {
            var id = radio.name.substring(radio.name.lastIndexOf(':'));
            var elements = radio.form.elements;
            for (var i = 0; i < elements.length; i++) {
                if (elements[i].name.substring(elements[i].name.lastIndexOf(':')) == id) {
                    elements[i].checked = false;
                }
            }
            radio.checked = true;
        }
    //]]>
    </script> 
    ```

# android - 当意图包含可打包的额外内容时未收到广播

> ID：12077924
> 
> 赞同：2
> 
> 时间：2012-08-22T16:56:56.957
> 
> 标签：android

我有一个 IntentService 正在进行网络调用并接收一些 JSON 数据。我将此响应数据打包在实现 parcelable 的自定义对象中。如果我将此 parcelable 对象作为额外内容添加到 Intent 中，然后使用该 Intent 启动 Activity，一切似乎都按预期工作，即我可以从新创建的 Activity 中的 Intent 中检索 Parcelable。但是，如果我从 IntentService 的 onHandleIntent() 方法中创建意图，然后使用 sendBroadcast()，则广播接收器的 onReceive() 方法永远不会触发。但是，如果我不将 parcelable 添加到意图中，onReceive() 方法会按预期触发。以下是一些相关的代码片段：

可包裹对象：

```
public class JsonResponse implements Parcelable {

private int responseCode;
private String responseMessage;
private String errorMessage;

public JsonResponse() {

}

/*
/   Property Methods
 */
public void setResponseCode(int code) {
    this.responseCode = code;
}

public void setResponseMessage(String msg) {
    this.responseMessage = msg;
}

public void setErrorMessage(String msg) {
    this.errorMessage = msg;
}

/*
/   Parcelable Methods
 */
public static final Creator<JsonResponse> CREATOR = new Creator<JsonResponse>() {

    @Override
    public JsonResponse createFromParcel(Parcel parcel) {
        return new JsonResponse(parcel);
    }

    @Override
    public JsonResponse[] newArray(int i) {
        return new JsonResponse[i];
    }
};

private JsonResponse(Parcel parcel) {
    responseCode = parcel.readInt();
    responseMessage = parcel.readString();
    errorMessage = parcel.readString();
}

@Override
public void writeToParcel(Parcel parcel, int i) {
    parcel.writeInt(responseCode);
    parcel.writeString(responseMessage);
    parcel.writeString(errorMessage);
}

@Override
public int describeContents() {
    return 0;
}
} 
```

IntentService 的 onHandle()：

```
protected void onHandleIntent(Intent intent) {

    service = new LoginService();
    service.login("whoever", "whatever");

    JsonResponse response = new JsonResponse();
    response.setResponseCode(service.responseCode);
    response.setResponseMessage(service.responseMessage);
    response.setErrorMessage(service.errorMessage);

    Intent i = new Intent();
    i.putExtra("jsonResponse", response);
    i.setAction(ResultsReceiver.ACTION);
    i.addCategory(Intent.CATEGORY_DEFAULT);
    sendBroadcast(i);
} 
```

有任何想法吗？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T18:09:18.333

看来问题与作为额外添加的对象的大小有关。当响应对象的字符串属性之一变得太大时，广播显然会失败。我没有任何来源可以证实这一点，只有在操作其中一个字符串时进行一些试验和错误，同时让方程的所有其他变量保持不变。

# matlab - 您可以在由矩阵和向量组成的单元格上使用 linsolve 吗？

> ID：12077927
> 
> 赞同：0
> 
> 时间：2012-08-22T16:57:11.533
> 
> 标签：matlab, matrix, cell

我需要在 Matlab 中制作一个矩阵矩阵，以便以后在求解线性方程组时使用。

我知道一种解决方案是创建一个 mxn 单元格，并用矩阵或向量填充每个单元格，但是您不能使用带有 linsolve() 的单元格，所以这对我没有帮助。

如何在 Matlab 中有一个矩阵矩阵，或者有没有办法在单元数据结构上使用 linsolve？

谢谢！

澄清：

我有一个细胞结构

```
 A =  [25x25 double]    [25x1 double]    [25x1 double]
         [ 1x25 double]    [          0]    [          0]
         [ 1x25 double]    [          0]    [          0] 
```

和另一个

```
 b = [          0]
        [25x1 double]
        [          1] 
```

而我想做的`linsolve(A, b)`。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:51:39.307

目前尚不清楚您要做什么（这可能是该函数`linsolve`不接受单元格的原因）。

如果您想求解 和 之间的所有*组合*，即系统`A``b`

```
A{1,1}*x = b{1}   A{1,1}*x = b{2}   A{1,1}*x = b{3}
A{2,1}*x = b{1}   A{2,1}*x = b{2}   A{2,1}*x = b{3}
...               ...               ...
A{1,2}*x = b{1}   A{1,2}*x = b{2}   A{1,2}*x = b{3}
A{2,2}*x = b{1}   A{2,2}*x = b{2}   A{2,2}*x = b{3}
...               ...               ...
A{3,3}*x = b{1}   A{3,3}*x = b{2}   A{3,3}*x = b{3} 
```

那么你可以通过发出来做到这一点

```
answers = cellfun(@(bb) ...
    cellfun(@(aa) linsolve(aa, bb), A, 'uni',false), ...
    b, 'uni',false) 
```

另一方面，如果您想求解 和 的每一对应行*，*即系统`A``b`

```
A{1,1}*x = b{1}   A{2,1}*x = b{2}   A{3,1}*x = b{3}
A{1,2}*x = b{1}   A{2,2}*x = b{2}   A{3,2}*x = b{3}
A{1,3}*x = b{1}   A{2,3}*x = b{2}   A{3,3}*x = b{3} 
```

你可以通过发行来做到这一点

```
answers = cell(3,1);
for ii = 1:3
    answers{ii} = ... 
        cellfun(@(aa) linsolve(aa, bb{ii}), A(ii,:), 'uni',false);
end 
```

（如果有人看到如何矢量化最后一个，请告诉我:)

# android - Android：我需要安排我的应用程序的布局

> ID：12077928
> 
> 赞同：0
> 
> 时间：2012-08-22T16:57:12.877
> 
> 标签：android, layout, webview

我使用 eclipse 制作了我的第一个 Android 应用程序。现在我需要安排布局，因为我的布局现在在主要内容上显示 Google AdMob 广告，在 WebView 上。此外，当我旋转手机并进入横向模式时，AdMob 广告仅在屏幕的一半上。我该如何解决这个问题以及如何让 Google AdMob 拥有自己的空间，就像进度条一样，而不是显示在 WebView 上。这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ProgressBar
android:id="@+id/web_view_progress_bar"
style="?android:attr/progressBarStyleHorizontal"
android:layout_width="fill_parent"
android:layout_height="15dip"
android:padding="2dip"
android:progressDrawable="@drawable/colorprogress" />

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ImageView
android:id="@+id/splash_view"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:contentDescription="@string/desc"
android:scaleType="fitXY"
android:src="@drawable/splash"
android:visibility="visible" />

<WebView android:id="@+id/web_view"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:scrollbars="none"
android:visibility="gone" />

<com.google.ads.AdView android:id="@+id/adView"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   ads:adUnitId="a1500108406597c"
   ads:adSize="BANNER"
   ads:loadAdsOnCreate="true"
   android:layout_alignParentBottom="true"/>

</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:04:37.523

您已将 放在 中`AdView`，`RelativeLayout`这会将其放在其中的项目之上。

你想把它放在`LinearLayout`唯一的；我已经向你展示了如果你想要在`ProgressBar`and之间你必须做什么`RelativeLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <ProgressBar
    android:id="@+id/web_view_progress_bar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="15dip"
    android:padding="2dip"
    android:progressDrawable="@drawable/colorprogress" />

    <com.google.ads.AdView android:id="@+id/adView"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       ads:adUnitId="a1500108406597c"
       ads:adSize="BANNER"
       ads:loadAdsOnCreate="true"
       android:layout_alignParentBottom="true"/>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

        <ImageView
        android:id="@+id/splash_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@string/desc"
        android:scaleType="fitXY"
        android:src="@drawable/splash"
        android:visibility="visible" />

        <WebView android:id="@+id/web_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scrollbars="none"
        android:visibility="gone" />

    </RelativeLayout>
</LinearLayout> 
```

当然，如果您想将其放在底部，请将其放在`</LinearLayout>`标签上方。

# java - 为什么类中有公共静态类

> ID：12077932
> 
> 赞同：16
> 
> 时间：2012-08-22T16:57:28.607
> 
> 标签：java, nested-class

我正在浏览一些代码，我看到了这个：

```
public class A {
    public A(SomeObject obj) {
      //Do something
    }
    //Some stuff
  public static class B {
    //Some other stuff
  }
} 
```

我想知道，因为即使是内部类也是`public`为什么要嵌套而不是单独的类？另外，我可以在这里这样做：`new A.B(SomeObject)`？我觉得这违背了静态类的目的，但我也看到了这个实现，所以很想知道。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T17:01:38.700

> 我想知道，因为即使内部类也是公共的，为什么将它作为嵌套类而不是单独的类？

这真的是要问写这门课的人的问题。虽然它可以允许外部类充当“迷你命名空间” - 如果嵌套类*仅*在外部类的上下文中有用，这似乎是合理的。它表明两个类之间故意紧密耦合。我最常在构建器模式的上下文中看到这一点：

```
Foo foo = new Foo.Builder().setBar(10).build(); 
```

`Foo.Builder`在这里，嵌套在`Foo`其中而不是作为可能被称为的对等类对我来说是有意义的`FooBuilder`。

请注意，与仅不相关的类相比，它还提供了一些可见性差异。

> 另外，我可以在这里这样做：`new A.B(SomeObject)`？

不，因为`B`没有带`SomeObject`参数的构造函数 - 只有`A`（在您给出的示例中）。

> 我觉得这违背了静态类的目的

您应该尝试弄清楚您认为静态类的目的是什么，以及这会以什么方式破坏该目的*。*目前，这种说法过于模糊，无法进行实际讨论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T17:01:14.190

你会有一个像这样的内部类

*   您可以保留一个仅存在以支持封装的外部类的类。
*   您希望能够访问`private`外部类或其他嵌套类的成员。
*   你想要一个带有静态字段的嵌套类（我知道的一个弱原因；）
*   您有一个具有非常通用名称的类，`Lock`或者`Sync`您不希望与同一包中的类使用的其他同名类混合。

> 我可以在这里这样做：新 AB(SomeObject) 吗？

你可以。

> 我觉得这违背了静态类的目的

这需要习惯，但是一旦开始，您可能无法将整个程序变成一个 file.java ;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T17:14:35.213

**1.**一个`static inner`类称为`Top-Level`类。

**2.**这`static class`可以**直接访问**其外部类的**静态方法和变量。**

**3.**您需要`static Inner class`从外部以这种方式初始化...

```
 A a = new A();
    A.B b = new A.B(); 
```

**4.** `new A.B(SomeObject)` **不会工作**......因为你**没有**`SomeObject`作为参数的构造函数......

**5.**但是当 Inner 类是 Non-static 时，它对 Outer 类有隐式引用。

**6.**外部和内部类可以**扩展到不同的类**。

**7.**`interface's method`可以使用内部类以不同或相同的方式**多次**实现一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T17:01:31.267

**我想知道，因为即使内部类也是公共的，为什么将它作为嵌套类而不是单独的类？**

看看这个线程：[为什么奇怪的命名约定“AlertDialog.Builder”而不是 Android 中的“AlertDialogBu​​ilder”](https://stackoverflow.com/questions/11810345/why-strange-namimg-convention-of-alertdialog-builder-instead-of-alertdialogbu/11976021#11976021)

**另外，我可以在这里执行此操作： new AB(SomeObject) 吗？**

*（更新）*不，你不能这样做，因为 B 没有要求 SomeObject 的构造函数。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T17:33:07.367

这种模式经常与建造者模式一起使用。它不仅明确了类和它的builder之间的关系，而且隐藏了丑陋的builder构造函数/工厂，使builder更具可读性。例如，如果您需要构建的对象具有可选属性而不是可选属性。

```
public class AnObject {
   public static class AnObjectBuilder {

       private AnObject anObject;

       private AnObjectBuilder() {
       }

       private void newAnObjectWithMandatory(String someMandatoryField, ...) {
           anObject = new AnObject(someMandatoryField,...)
       }

       public AnObjectBuilder withSomeOptionalField(String opt) {
           ...
       }
   }

   public static AnObjectBuilder fooObject() {
        return (new AnObjectBuilder()).newAnObjectWithMandatory("foo")
   }

   public static AnObjectBuilder barObject() {
        return (new AnObjectBuilder()).newAnObjectWithMandatory("bar")
   }
} 
```

这样，客户端代码必须首先调用`AnObjectBuilder`类上的静态方法，然后使用可选的构建器方法：

`AnObject.fooObject("foo").withSomeOptionalField("xxx").build();`无需创建构建器对象。

相当可读:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T17:03:02.700

> 我想知道，因为即使内部类也是公共的，为什么将它作为嵌套类而不是单独的类？

允许它的简单原因是包装方便。

[Java中的静态嵌套类，为什么？](https://stackoverflow.com/questions/253492/static-nested-class-in-java-why)

[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

是的，你可以做 new `A.B(SomeObject)`。但你不必相信我的话，试试看。

# c++ - 错误 LNK2019：未解析的外部符号 __imp__EnumDisplayDevicesA@16 在函数“private: struct _DISPLAY_DEVICEA __thiscall”中引用

> ID：12077939
> 
> 赞同：0
> 
> 时间：2012-08-22T16:57:57.573
> 
> 标签：c++, winapi, screen

我想做的是获取我的屏幕信息，如分辨率/刷新率等：

```
#pragma once
#include < windows.h >
#include <string>
#include <sstream>

struct DesktopScreenInfo
{
    int Width;
    int Height;
    int ScreenDepth;
    int FrameRate;
    std::string ScreenInfoString;
};

class DesktopScreen
{
public:
    DesktopScreen(void);
    ~DesktopScreen(void);

    DesktopScreenInfo GetScreenInfo();
private:
    DISPLAY_DEVICE GetPrimaryDevice();
};

#include "DesktopScreen.h"

DesktopScreen::DesktopScreen(void)
{
}

DesktopScreen::~DesktopScreen(void)
{
}

DISPLAY_DEVICE DesktopScreen::GetPrimaryDevice(){
    int index=0;
    DISPLAY_DEVICE dd;
    dd.cb = sizeof(DISPLAY_DEVICE);

    while (EnumDisplayDevices(NULL, index++, &dd, 0))
    {
        if (dd.StateFlags & DISPLAY_DEVICE_PRIMARY_DEVICE) return dd;
    }
    return dd;
}

DesktopScreenInfo DesktopScreen::GetScreenInfo(){
    DISPLAY_DEVICE dd = GetPrimaryDevice();
    DesktopScreenInfo info;
    DEVMODE dm;
    dm.dmSize = sizeof(DEVMODE);

    if (!EnumDisplaySettings(dd.DeviceName, ENUM_CURRENT_SETTINGS, &dm))
    {
        //printf("EnumDisplaySettings failed:%d\n", GetLastError());
        return info;
    }
    info.Width = dm.dmPelsWidth;
    info.Height = dm.dmPelsHeight;
    info.ScreenDepth = dm.dmBitsPerPel;
    info.FrameRate = dm.dmDisplayFrequency;
    std::stringstream ss;
    ss << info.Width << "x" << info.Height << ":" << info.ScreenDepth << "@" << info.FrameRate;
    info.ScreenInfoString = ss.str();
} 
```

但是当我尝试构建它时，它给了我这个错误

```
Error   2   error LNK2019: unresolved external symbol __imp__EnumDisplayDevicesA@16 referenced in function "private: struct _DISPLAY_DEVICEA __thiscall DesktopScreen::GetPrimaryDevice(void)" (?GetPrimaryDevice@DesktopScreen@@AAE?AU_DISPLAY_DEVICEA@@XZ)
Error   3   error LNK2019: unresolved external symbol __imp__EnumDisplaySettingsA@12 referenced in function "public: struct DesktopScreenInfo __thiscall DesktopScreen::GetScreenInfo(void)" (?GetScreenInfo@DesktopScreen@@QAE?AUDesktopScreenInfo@@XZ) 
```

我不知道出了什么问题：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:00:28.100

您需要与 链接`user32.lib`。

（[这些 API 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162609.aspx)会在页面底部告诉您要链接到哪个库。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:03:14.220

它找不到 EnumDisplayDevices 或 EnumDisplaySettings。

弄清楚这些是在哪里定义的，如果你在 .h 中定义了它们，请确保包括在内。我没有看到任何 #include "EnumDisplayDevices.h" 或类似的东西，并且使用您发布的代码，我没有看到声明的枚举。

无论如何，由于链接器不知道 EnumDisplayDevices 或 EnumDisplaySettings 声明的位置，因此导致错误，因此无法正确链接它。

# .net - .NET 二进制向后兼容性

> ID：12077940
> 
> 赞同：0
> 
> 时间：2012-08-22T16:58:15.107
> 
> 标签：.net, backwards-compatibility

为什么旧版本的 .net 编译的二进制文件不能在新版本的框架上运行，比如在 jdk 1.3 下编译的 java 'binary' 在 jre 1.6 下运行良好？

由于需要各种.net运行时的混合参考库，应用程序的安装基础规模很大。

# google-apps-script - 通过 Google Apps 脚本访问事件附件

> ID：12077941
> 
> 赞同：1
> 
> 时间：2012-08-22T16:58:25.143
> 
> 标签：google-apps-script, google-calendar-api

是否可以在谷歌应用脚​​本中获取日历事件附件？我意识到这仍然是“谷歌实验室”级别的功能，但 getAttachments() 对于我正在处理的一些东西来说真的很方便。如果做不到这一点，实验室是否会将其附件数据存储在我可以在幕后获取的巧妙位置（例如，包含 URL 的标签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:35:16.447

据我所知不可能。正如您所提到的，它是日历实验室的一项功能。Apps 脚本中没有许多常规功能，因此很难期待这一功能。您可以尝试打开功能请求

# ruby-on-rails-3 - rails 3 路由重定向错误：id => "routename"

> ID：12077942
> 
> 赞同：0
> 
> 时间：2012-08-22T16:58:26.323
> 
> 标签：ruby-on-rails-3, custom-routes

所以我试图让一个链接在我的控制器中查找一个方法，然后重定向到一个带有路径 /trials/my_plays 的自定义页面

我收到错误消息：“在“app/controllers/trails_controller.rb:48:in `show'”中找不到带有 id=my_plays 的 Trail

路线：

```
match '/trails/my_plays', :to => "trails#my_plays", :as => :my_plays 
```

关联：

```
<%= link_to "Your Trails", trails_my_plays_path %> 
```

控制器：

```
 def show
    @trail = Trail.find(params[:id]) #48
    @member = Member.find(current_user.member_id)
    respond_to do |format|
       format.html # show.html.erb
       format.json { render :json => @trail }
    end
  end

def my_plays
  @trails = Trail.all # once status is working, need to change to where(:publish => true)
  @follower = Play.where(:member_id => current_user.member_id)  
  @member = Member.find(current_user.member_id)
  @followed = [] #all trails followed by current user
  @follows = [] #the play record for that trail
  @trails.each do |trail|
     if @follower.count > 0
       @follower.each do |followr|
         if (followr.trail_id == trail.id)
                    @followed << trail
            @follows << followr
       end
     end
    end
 end
    respond_to do |format|
      format.html { redirect_to "trails/my_plays" }
    end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:32:56.540

您的路线正在被设置参数`match`的路线所取代。`/trails``id`

`trails`（或其他匹配路由，如）的资源路由`:controller/:id`需要*在*您的路由匹配器之后，否则路由将无法通过第一个路由匹配。

# spring - 如何在我的 Spring 配置文件中再添加一个 dtd？

> ID：12077947
> 
> 赞同：0
> 
> 时间：2012-08-22T16:58:43.693
> 
> 标签：spring, aspectj, dtd, xml

我在 applicationContext.xml 中使用了 .dtd，但现在我想使用 Spring 的基于注释的 AOP。我被告知要在我的 applicationContext.xml 中添加一个。

```
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
    <aop:aspectj-autoproxy />
... 
```

但是发生了一些错误。该文件似乎无法识别 aop 节点，所以我认为我应该再导入一个 .dtd 文件，我发现：

```
<!DOCTYPE aspectj PUBLIC
        "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj/dtd/aspectj.dtd"> 
```

但我可以同时使用 .dtd 吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:33:24.307

你不必`DOCTYPE`在这里使用，最好像这样声明 xml 命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd">

<beans>
    <aop:aspectj-autoproxy />
... 
```

`xmlns="http://www.springframework.org/schema/beans"`意味着这`beans`将是根名称空间（您不必使用`<beans:bean>`）并且`aop`可以根据需要访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:39:11.267

您引用的两个 DTD 的构造方式不允许它们一起使用。特别是`beans`http://www.springframework.org/dtd/spring-beans.dtd[中](http://www.springframework.org/dtd/spring-beans.dtd)的定义只是

```
<!ELEMENT beans (
              description?,
              (import | alias | bean)*
)> 
```

它不提供名为 的子`aop:aspectj-autoproxy`级，也不提供任何机制让像您这样的后续用户向`beans`.

可以构建 DTD 以实现可扩展性并支持来自多个名称空间的元素的集成，尽管它需要一些预先考虑和规划。当不包括扩展点时，通常很难或不可能在不重写 DTD 的情况下对其进行扩展。

# sql - 如何自动化 SSAS 的 MDX 测试

> ID：12077949
> 
> 赞同：2
> 
> 时间：2012-08-22T16:58:48.320
> 
> 标签：sql, visual-studio, testing, ssas, mdx

我开发了一些 MDX 查询，用于测试我们的 SSAS 多维数据集。我想自动化这些查询，以便我可以通过单击一个按钮来执行它们，理想情况下是基于它们的输出的绿色条/红色条。

有没有办法可以将这些查询与 Visual Studio 挂钩以获得这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T00:24:55.893

你可以在这里尝试任何单元测试框架。尽管单元测试不适合这种用途，但它们在那里很有用 - 测试运行器具有开箱即用的红色/绿色指示器。

编写使用 ADOMD.NET ( [http://j.mp/NtKFih](http://j.mp/NtKFih) ) 执行 mdx 的测试，执行期间的异常将失败测试。您还可以使用[CellSet](http://j.mp/OdUX8G)对象调查结果并确定测试是否通过。

使用 Microsoft 的单元测试框架的简单示例（需要对 System.Data.dll 和 Microsoft.AnalysisServices.AdomdClient.dll 的引用）：

```
using Microsoft.AnalysisServices.AdomdClient;
...
[TestMethod]
public void CubeHealthCheck1()
{
    using (AdomdConnection conn = new AdomdConnection("Data Source=localhost;
           Initial Catalog=SejmCube")) //your connection string here
    {
        conn.Open();
        AdomdCommand cmd = conn.CreateCommand();
        //your mdx here
        cmd.CommandText = "SELECT NON EMPTY { [Measures].[Glosow Przeciwko] } 
                           ON COLUMNS FROM [Sejm]";
        CellSet cs = cmd.ExecuteCellSet();
    }
} 
```

任何异常都将失败测试（例如无连接） - 您可以添加 try/catch 并在消息中告知出现了什么问题。

您可以从例如“测试列表编辑器”窗口运行此测试 ![测试列表编辑器窗口](../Images/4a0fc3173acbfce1b6dfbd4f945dfb70.png) ，然后在“测试结果”窗口中获得带有指示器的结果 ![测试结果窗口](../Images/3b13d9a7106743955fdcebd9a0074309.png)

如果您不想使用单元测试框架，您可以开发自定义 Visual Studio 扩展（[http://j.mp/QfMNQt](http://j.mp/QfMNQt)），其中包含类似的逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T23:57:03.003

你应该检查[Nbi](http://Nbi.codeplex.com "NBi")。该框架允许您检查多维数据集的结构和成员，还可以将查询、mdx 或 sql、结果与预定义或动态结果进行比较。对于开源项目，文档相对详尽。

与其他解决方案相比，您无需使用 C# 编写代码，只需一个描述您的测试的 Xml 文件就足够了。

# javascript - 编辑后更改 slickgrid 单元格数据

> ID：12077950
> 
> 赞同：9
> 
> 时间：2012-08-22T16:58:51.190
> 
> 标签：javascript, slickgrid

我使用 Slickgrids 取得了很大的成功。我有 ajax 编辑所有工作 - 但我正在尝试添加一个功能；

下面是我的代码，它允许我更新单元格 - 它按预期工作 - 但我希望能够在使用 json 数据的返回值对其进行编辑后更改单元格。请参阅下面的代码 - 我已经输入了大写字母，我需要一个命令来使用新返回的数据更新已编辑的单元格

```
 grid.onCellChange.subscribe(function(e, args) {
                  var dataString = "col="+grid.getColumns()[args.cell].name+"&row="+args.item.new_training_calendar_id+"&value="+data[args.row][grid.getColumns()[args.cell].field];

                $.ajax({
                    type: "POST",
                    url: "mydomain/update_cell",
                    data: dataString, dataType: "json",
                success: function(a) { 
                        if(a.status != "ok") { 
                             alert(a.msg); 
                             undo(); 
                           } else {
                             alert(a.msg);
                             **CHANGE_CELL_HERE TO (a.newdata);**
                            }
                     return false;
               } }); }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T13:10:03.120

如果您`DataView`在网格中使用，您可以使用：

```
grid.invalidateRow(args.row);
var row = dataView.getItem(args.row);
row[grid.getColumns()[args.cell].field] = a.msg;
dataView.updateItem(args.item.id, row);
grid.render(); 
```

如果您使用的是普通网格，则可以使用：

```
grid.invalidateRow(args.row);
data[args.row][grid.getColumns()[args.cell].field] = a.msg;
grid.render(); 
```

希望有帮助！

# c# - 遍历一次性对象

> ID：12077951
> 
> 赞同：1
> 
> 时间：2012-08-22T16:59:04.833
> 
> 标签：c#

以下是遍历一次性对象的安全方法吗？或者这会导致物体不安全吗？ETC？如果我使用 dispose 语句而不是 using 嵌套会怎样？

```
public static void Main()
{
   foreach (ChildObject oChild in webApp)
   {
        //On Noes!  Unexpected Error!
   }
}

public static IEnumerable<ChildObject> SafelyGetNextObjInWebApp(WebApplication webApp)
{
    foreach (ParentObject oParent in webApp.Parents)
    {
        using (parent)
        {
            foreach (ChildObject oChild in oParent.Children)
            {
                using (oChild)
                {
                    yield return oChild;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T17:08:08.043

除非您的调用者枚举**所有**由`SafelyGetNextObjInWebApp()`. 考虑以下语句中发生的情况：

```
ChildObject o = SafelyGetNextObjInWebApp(arg).First(); 
```

在这种情况下，执行将在语句`SafelyGetNextObjInWebApp()`处停止，并且永远不会继续。`yield`因此，此调用不会处理该对象。

如果要使用迭代器一次返回一个 Web 服务创建的对象，则应确保调用是异常安全的，并强制迭代器调用的调用者处置。为了显示：

```
public IEnumerable<ParentObject> GetParents(WebApplication webApp)
{
    // assumes webApp.Parents uses deferred execution.
    return webApp.Parents;
}

public void ProcessParent(WebApplication webApp)
{
    foreach (ParentObject p in GetParents())
    {
        // Assumes p.Dipsose() calls ChildObject.Dispose() for all p.ChildObjects.
        using(p)
        {
            foreach (ChildObject o in p.ChildObjects)
            {
                // do something with o
            }
        }
    }
} 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T17:06:34.980

毕竟，“安全”的方法可能不会更安全。如果在迭代所有父对象和子对象之前迭代中断（或失败）怎么办？剩余的对象不会被处理（至少，不是在那个特定的方法中）。

似乎迭代和处置应该分开。您将拥有更简洁的代码并更好地控制程序正在执行的操作。

**还有更多...**

C# 迭代器模式将使“安全”方法以一种微妙的方式失败。在您`yield`获得子对象之后，程序将有效地“退出”该`using {...}`块，从而处置子对象，使其对从 iterate 获得它的任何人都无法使用`SafelyGetNextObjInWebApp()`。

**可以做什么**

将`using`语句从`SafelyGetNextObjInWebApp()`. 将产生的子对象封装在“知道”何时处置子对象的“工作单元”类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T17:28:14.517

您的代码可能没问题，但可能会在正常使用中导致问题：您返回的对象将在下一次迭代中处理。所以如果你的调用者的代码看起来像

```
foreach(var i in SafelyGetNextObjInWebApp())
{
   if (IsInteresting(i))
   { 
     interestingItems.Add(i);
   }
}
// here interestingItems contains disposed items you can't use. 
```

通过提供迭代所有项目并`Action<T>`作为参数的方法来反转代码可能会突出每个项目的处理必须在动作内部完成的事实。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T17:03:39.723

在你的块使用你执行一个处置的末尾，所以在你的函数末尾使用或使用处置之间的结果相同

# macos - 如何以 root 身份获取 OS X 版本？

> ID：12077952
> 
> 赞同：2
> 
> 时间：2012-08-22T16:59:04.643
> 
> 标签：macos

作为普通用户，我可以使用以下命令获取 OS X 的版本

```
$ defaults read loginwindow SystemVersionStampAsString 
```

但是，如果我以 root 身份运行命令，它会失败：

```
$ sudo defaults read loginwindow SystemVersionStampAsString
2012-08-22 18:51:06.941 defaults[427:1707] 
The domain/default pair of (loginwindow, SystemVersionStampAsString) does not exist 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:15:36.457

有一个名为“sw_vers”的命令行工具：

```
$ sw_vers 
```

它应该打印出版本信息；例如：

```
ProductName:    OS X
ProductVersion: 10.3
BuildVersion:   7A100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:07:28.063

据我所知，默认值属于“域”，并且为超级用户运行默认命令意味着在子shell 中运行命令默认值，该子shell 没有域“登录窗口”，因此出现错误。只有直接在终端应用程序中运行的外壳程序才能将终端应用程序作为域“登录窗口”，但其他用户的子外壳程序不会有它。

尝试

```
 sudo defaults domains 
```

获取超级用户的可用域列表。

# android - Android：使用 SimpleCursorAdapter 从数据库获取数据到 ListView

> ID：12077955
> 
> 赞同：18
> 
> 时间：2012-08-22T16:59:15.497
> 
> 标签：android, database, listview, simplecursoradapter

我正在编写一个应该使用数据库来存储数据并从中读取数据的 android 应用程序。使用[本教程（在archive.org上）](http://web.archive.org/web/20130114103211/http://android10.org/index.php/articlesdatastorage/235-creating-and-using-databases-in-android-one)，我得到了创建数据库的应用程序，并且能够创建新条目，但是，我不知道如何读取数据库以获取ListView中存储的数据。我知道这个网站上有很多类似的问题，但似乎没有一个适用于教程中的数据库的方式。

代码：

```
import java.util.Calendar;

import maturarbeit.nicola_pfister.studenttools.database.DBAdapter;
import android.app.AlertDialog.Builder;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.ListView;

public class Marks extends ListActivity {

DBAdapter db = new DBAdapter(this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.marks);
}

@Override
protected void onPause() {
    super.onPause();
    db.close();
}

@Override
protected void onResume() {
    super.onResume();
    db.open();

    getData();
}

@SuppressWarnings("deprecation")
private void getData() {
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
            android.R.layout.simple_list_item_1, 
            db.getAllMarks(), 
            new String[] { "value" }, 
            new int[] { android.R.id.text1 });

    ListView listView = (ListView) findViewById(R.id.marks_list);
    listView.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.marks, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_add:
        Calendar cal = Calendar.getInstance();
        int day = cal.get(Calendar.DAY_OF_MONTH);
        int month = cal.get(Calendar.MONTH);
        final String date = day + "." + month;
        Builder builder = new Builder(this);
        builder
            .setTitle(R.string.dialog_addmarks)
            .setItems(R.array.markslist, new OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    @SuppressWarnings("unused")
                    long id;
                    String selection = getResources().getStringArray(R.array.markslist)[which];
                    id = db.insertMark(date, "Default", selection);
                    }
            })
            .show();
        getData();
        break;
    case R.id.menu_delete:
            //Deleting function yet to be implemented.
        break;
    }
    return super.onOptionsItemSelected(item);
}
} 
```

编辑：ListView ID 错误，因为它必须是 android:list。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-22T17:56:08.120

使用您链接到的教程中的数据库格式，每一行都有一个`_id`、`isbn`、`title`和`publisher`。现在让我们假设您想在 ListView 中显示每个标题：

```
db = new DBAdapter(this);
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
        android.R.layout.simple_list_item_1, 
        db.getAllTitles(), 
        new String[] { "title" }, 
        new int[] { android.R.id.text1 });

ListView listView = (ListView) findViewById(R.id.list);
listView.setAdapter(adapter); 
```

（您不需要自己遍历光标，适配器会为您完成这项工作！）

您的 SimpleCursorAdapter 构造函数中的最后两个参数是您所缺少的。它们是“from”和“to”参数：

*   我们想要获取存储在列 name 中的每本书的名称`title`，这是我们“从”获取信息的地方。
*   接下来我们需要告诉它“去”到哪里：`android.R.id.text1`是`android.R.layout.simple_list_item_1`布局中的 TextView。（您可以深入了解您的 SDK 并自己查看 simple_list_item_1.xml 文件，或者暂时相信我。）

现在“from”和“to”参数都是数组，因为我们可以传递不止一列的信息，也可以试试这个适配器：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
        android.R.layout.simple_list_item_2, 
        db.getAllTitles(), 
        new String[] { "title", "publisher" }, 
        new int[] { android.R.id.text1, android.R.id.text2 }); 
```

使用此适配器，其数据库中的书籍将按标题显示，然后按出版商显示。我们所要做的就是使用一个`android.R.layout.simple_list_item_2`包含两个字段并定义哪些列转到哪些 TextView 的布局。

我希望这会有所帮助。还有很多东西要学，但也许这会给你一些基础知识。

* * *

**最后评论**

在我的脑海中，添加新数据后刷新 ListView 试试这个：

```
public void onClick(DialogInterface dialog, int which) {
    String selection = getResources().getStringArray(R.array.markslist)[which];
    db.insertMark(date, "Default", selection);
    cursor.requery();
    adapter.notifyDataSetChanged();
} 
```

您必须定义`adapter`并创建一个变量，`cursor`但这很简单：

```
public class Marks extends ListActivity {
    SimpleCursorAdapter adapter;
    Cursor cursor;
    DBAdapter db = new DBAdapter(this);
    ... 
```

并相应地更改 getData() ：

```
private void getData() {
    cursor = db.getAllMarks();
    adapter = new SimpleCursorAdapter(this, 
            android.R.layout.simple_list_item_1, 
            cursor, 
            new String[] { "value" }, 
            new int[] { android.R.id.text1 });
    ...
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:06:48.620

不是在游标中的每个项目上都使用适配器，而是为整个游标创建一个适配器。您可以设置此列表视图以使用该游标。[尝试一些像这样](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)的 SimpleCursorAdapter 教程

# jquery - 使用命名空间解析 xml 的正确 jquery 1.7.1 查找语法是什么？

> ID：12077956
> 
> 赞同：0
> 
> 时间：2012-08-22T16:59:17.090
> 
> 标签：jquery, xml-namespaces

我正在使用 jQuery 1.7.1 和 IE8 来解析 SharePoint 列表中的一些 XML 命名空间数据。我已经尝试了[使用 namespaces 解析 jQuery XML](https://stackoverflow.com/questions/853740/jquery-xml-parsing-with-namespaces/12074483#12074483)中的所有“查找”语法，但没有一个对我有用。适用于带有 IE8 的 jQuery 1.7.1 的“查找”语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:08:05.977

您将在此博客文章中找到有关此问题和解决方法的更多详细信息：http: [//sympmarc.com/2011/11/08/problem-with-jquery-1-7-and-spservices/](http://sympmarc.com/2011/11/08/problem-with-jquery-1-7-and-spservices/)

现在，我的两分钱：不要将 jQuery 用于命名空间的 xml，只需使用常规 JavaScript。我已经在 SharePoint 中执行此操作多年，没有任何问题。您可以在此处找到几个示例（图像旋转器、饼图/条形图）：http: [//usermanagedsolutions.com/SharePoint-User-Toolkit/default.aspx](http://usermanagedsolutions.com/SharePoint-User-Toolkit/default.aspx)

# loops - 声音管理器、自动播放、静音和循环

> ID：12077957
> 
> 赞同：2
> 
> 时间：2012-08-22T16:59:19.193
> 
> 标签：loops, playback, autoplay, mute, soundmanager2

我想在我的网站打开时自动播放声音，我希望它无休止地循环播放，我希望用户能够通过一个静音/播放按钮来静音/播放它。

这是我的脚本：

```
<script type="text/javascript"> 

soundManager.setup({ 
url: 'scripts/soundmanager2/swf/',
flashVersion: 8,
onready: function() {
    soundManager.createSound({
        id: 'mySound',
            url: 'audio/ambiance.mp3',
            autoLoad: true,
            autoPlay: true,
            stream:true,
            onfinish: function() {loopSound(mySound);},
            volume: 50
    });
    }   
$('#mute-play').click(function(){soundManager.togglemute('mySound');})
});             
</script> 
```

静音/播放功能有效，因为我可以手动启动和停止声音，但是当网站打开并且声音根本不循环时，声音不会自动启动。

问题是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:31:14.917

你还没有定义`loopSound`函数。

尝试这个：

```
function loopSound(sound) {
  window.setTimeout(function() {
    sound.play({
       onfinish:  function() {
         loopSound(sound);
       },
    });
  }, 1);  // window.setTimeout
}

soundManager.setup({
  url: '/plugins/soundmanager2/swf/',
  onready: function() {
    var sound = soundManager.createSound({
    id: 'music',
    url: 'audio.mp3'
  });
  loopSound(sound);
 }
});

$('#mute-play').click(function(){
  var sound = soundManager.getSoundById('music');
  sound.toggleMute();
}) 
```

# sql - Oracle 查找相似但不完全匹配的重复记录

> ID：12077958
> 
> 赞同：3
> 
> 时间：2012-08-22T16:59:24.500
> 
> 标签：sql, oracle, search, duplicates, search-engine

我正在尝试找到一种方法来搜索文本字段以识别可能相似的行，以便我可以识别它们是否是应该合并的重复项。例如，如果我的数据如下所示：

**MyText_Column**

1.  鲍勃
2.  鲍比
3.  罗伯特
4.  简
5.  珍妮
6.  珍妮
7.  乔
8.  约翰
9.  乔纳森

GROUP BY 不起作用，因为没有一个值是完全相同的，但是如果我可以有一个查询来返回一行相似的可能性列表，那就太好了。也许有更好的布局，但我想象的是这样的结果：

**查询结果**

搜索比较 Likely_Match

1.  鲍比 96%
2.  鲍勃·罗伯特 12%
3.  鲍勃·简 0%
4.  鲍勃·珍妮 0%
5.  ......
6.  简珍妮 87%
7.  简珍妮 69%
8.  简乔 12%

然后有了这样的结果，我可以按可能性排序并进行视觉扫描以确定结果是否重复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T17:04:18.207

UTL_MATCH[包](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_match.htm)有几种方法可以做到这一点——我猜你会想要使用 Jaro-Winkler 相似性算法。就像是

```
SELECT a.mytext_column search,
       b.mytext_column compare,
       utl_match.jaro_winkler_similarity( a.mytext_column, b.mytext_column ) similarity
  FROM table_name a,
       table_name b
 WHERE a.<<primary key>> != b.<<primary key>>
 ORDER BY utl_match.jaro_winkler_similarity( a.mytext_column, b.mytext_column ) desc 
```

这将生成 N * (N-1) 行的结果集，根据原始数据集中的行数，这可能会很笨拙。您可能希望通过仅返回特定搜索词的最佳匹配或仅返回相似度得分大于某个阈值的行来限制事物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:58:20.820

You could also use the [`SOUNDEX`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions167.htm) function.

# windows - 为 Java WebStart 应用程序指定 JRE 位置

> ID：12077961
> 
> 赞同：1
> 
> 时间：2012-08-22T16:59:49.943
> 
> 标签：windows, java, java-web-start

是否有一种通用的方法可以指向特定的 JRE/JDK 来运行 JWS 应用程序？我正在研究指定 JRE 的实际位置，而不仅仅是通过 JNLP 文件的 Java SE 元素指定它的版本。考虑在具有本地相同版本的 Oracle 和 IBM JRE 之间进行选择。

我能想到的一种方法是简单地创建特定 javaws 的快捷方式，将 jnlp 文件位置作为参数传递，因此最终用户可以轻松地从他的桌面启动它。有没有其他方法可以实现这一目标？

JRE 可能没有在系统中注册，所以这也是一个困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:35:21.190

据我所知，使用 JNLP 文件语法只能参考 Java 库的版本（案例客户端的 + 安装路径尚未安装）。
没有这样的选项可以强制使用 JRE 的目录/供应商。

我认为您会错过的是基本 JWS 概念之一的灵活性和想法，您只需提供您的应用程序，技术负责执行环境、更新......（从现实生活中的应用程序我知道并非如此JWS 直截了当，但我认为这是最初的意图:))

是的，我认为部分您自己提供了一个可能的答案：编写自己的代码，为您想要实现的任何目标创建快捷方式，并在下次启动应用程序时启动快捷方式，或者在后台静默启动快捷方式应用程序以防止任何需要重新启动应用程序。

从现实生活中的经验来看，我们用程序创建的 shortuct 做了类似的解决方案（尽管供应商不是我们的情况）。

# android - Android：让应用程序“仅”记录我的日志记录

> ID：12077963
> 
> 赞同：4
> 
> 时间：2012-08-22T16:59:51.740
> 
> 标签：android, android-logcat

我计划签署一个 apk 并发布它（通过导出 Eclipse 工具）。然后上传到市场。我知道 debuggable 在签名时默认设置为 false ，这意味着不会捕获任何日志。同时，如果我将 debuggable 设置为 true 并释放 apk，那么我将获得所有日志。

我真正感兴趣的是仅由我添加的最后一个调试语句。目前，我正在使用 Log.i 语句添加信息日志。有没有办法让我的应用程序只记录信息日志（即只记录我的日志）。Mybe，如果我禁用日志并拥有 system.out.print 它会起作用吗？

我这样做的原因是因为我想在发生崩溃时发送最后 100 行日志，并且我只对我的日志语句感兴趣。

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:05:11.440

您必须在 Log 顶部放置一个包装器，您可以在其中放置控制日志级别的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:10:42.320

[ACRA](http://code.google.com/p/acra) Android 库已经实现了这种类型的功能。该库检测崩溃，并将崩溃信息发送到 Google Docs 电子表格或您自己的目的地。您可以使用[此处](http://code.google.com/p/acra/wiki/AdvancedUsage#Adding_logcat,_eventlog_or_radiolog_extracts_to_reports)显示的方法添加其他信息，例如日志的过去 100 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T18:20:14.153

我相信您需要做的是利用 ACRA 的内置过滤功能：

[在 Advanced Usage wiki](http://code.google.com/p/acra/wiki/AdvancedUsage#Adding_logcat,_eventlog_or_radiolog_extracts_to_reports)中，您可以看到您可以在配置中设置 logcat 参数。

在您的日志记录中，使用特定标记和调试级别标记您的自定义日志消息，然后在 logcat 参数中，然后设置一个参数：

```
logcatArguments = { "-t", "100", "-v", "long", "ActivityManager:I", "MyApp:D", "*:S" } 
```

以以下形式添加一个

```
"YourCustomTag:<YOUR_DEBUG_LEVEL>" 
```

and take out the ones you don't want to be logged (probably MyApp:D in this case.)

# java - pom.xml 如何解决接缝预订示例项目，Eclipse Maven 中的错误

> ID：12077966
> 
> 赞同：1
> 
> 时间：2012-08-22T17:00:02.363
> 
> 标签：java, eclipse, maven, jboss, seam

我刚开始学习 JBoss Seam 框架，我从未使用过 Maven。我从[这个页面](http://www.seamframework.org/Seam2/Seam2DistributionDownloads)下载了JBoss Seam 2.2.0。GA 和我想在 Eclipse中运行示例*预订项目。*

我将**import**选项与**Existing Maven Project**一起使用。接下来我右键单击项目并选择**Run As -> Maven install...**控制台显示：

```
...
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.372s
[INFO] Finished at: Wed Aug 22 18:43:01 CEST 2012
[INFO] Final Memory: 7M/73M
[INFO] ------------------------------------------------------------------------ 
```

但在书签问题是：

```
Description Resource    Path    Location    Type
maven-resources-plugin prior to 2.4 is not supported by m2e. Use maven-resources-plugin version 2.4 or later.   pom.xml /jboss-seam-booking line 8  Maven Project Build Lifecycle Mapping Problem 
```

我不知道如何解决它。我不尝试使用**Maven 构建**选项，因为我不知道“目标”中应该包含什么。

我的 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.jboss.seam.examples</groupId>
    <artifactId>jboss-seam-booking</artifactId>
    <parent>
        <groupId>org.jboss.seam</groupId>
        <artifactId>parent</artifactId>
        <version>2.2.0.GA</version>
    </parent>
    <packaging>ear</packaging>

</project> 
```

我使用 Eclipse Indigo SR2，maven 可能是用*JBoss Tools* for Eclipse 下载的。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:38:45.817

将以下内容添加到您的 pom.xml 中。这将覆盖父 pom 中定义的 maven-resources-plugin 版本。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-resources-plugin</artifactId>
      <version>2.6</version>
    </plugin>
  </plugins>
</build> 
```

由于 parent 似乎没有对 maven-resources-plugin 进行任何特殊配置，而只是声明了版本号，所以应该可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:32:17.410

看起来问题出在jboss pom上。它正在使用与 m2e 不兼容的插件。

# php - PHP - 析构函数是否可以访问任何方法或属性

> ID：12077974
> 
> 赞同：0
> 
> 时间：2012-08-22T17:00:35.890
> 
> 标签：php

在php中使用析构函数时，析构函数内部的代码是否仍然可以访问对象的任何方法和属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T17:03:09.650

是的，您可以在析构函数中访问方法和属性，正如[这个简单的测试用例所示](http://viper-7.com/DYHbuO)：

```
class Foo {
    private $bar = 'member variable - ';
    function bar() {
        return 'function';
    }
    function __destruct() {
        echo $this->bar;
        echo $this->bar();
    }
}
$o = new Foo;
unset( $o); 
```

哪个打印：

> 成员变量 - 函数

有关更多信息，请参阅有关[解构函数的 PHP 文档](http://php.net/manual/en/language.oop5.decon.php)，包括从析构函数中引用成员变量的示例。

# python - Python 2 - 如何使脚本转到特定行？

> ID：12077977
> 
> 赞同：1
> 
> 时间：2012-08-22T17:00:49.367
> 
> 标签：python

[这是对我上一个问题](https://stackoverflow.com/questions/12077577/python-2-how-do-i-use-or)的一种扩展，但我想知道如果发生事件，是否可以让脚本返回到特定行。

```
print "Type in 'Hello'"
typed = raw_input("> ")
if typed.lower() in ['hello', 'hi']:
    print "Working"
else:
    print "not working" 
```

在最后一行，如果“else”发生，你可以让它再次从第 2 行重新开始吗？任何帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T17:04:39.583

你可以把你的代码放在一个无限循环中，只有在输入正确的单词时才会退出：

```
print "Type in 'Hello'"
while True:
    typed = raw_input("> ")
    if typed.lower() in ['hello', 'hi']:
        print "Working"
        break
    else:
        print "not working" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T17:04:07.170

您可以让程序处于循环中，直到给出正确的输入

```
while True: 
    print "Type in 'Hello'"
    typed = raw_input("> ")
    if typed.lower() in ['hello', 'hi']:
        break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T17:50:10.600

有两种方法可以做到这一点，一种使用while循环，一种使用递归在我用while循环解决您的问题之前的两个答案，所以我会用递归解决您的问题

```
def Inp():
    print "Type in 'Hello'"
    typed = raw_input("> ")
    if typed.lower() in ['hello', 'hi']:
       print "Working"
    else:
      print "not working"
      Inp()
Inp() 
```

最后只需调用该函数`Inp`，它将继续要求输入您想要的值

# php - 使用标签创建 PHP 搜索

> ID：12077979
> 
> 赞同：0
> 
> 时间：2012-08-22T17:00:54.580
> 
> 标签：php, html, search, if-statement, tags

如何使用 php.ini 构建搜索。我想像这样标记页面：

```
<meta name="tag" content="plant, leaf, waterdroplet, water" /> 
```

我想搜索并让它显示一个链接，指向带有您搜索过的标签的页面。

这是我尝试过的，但我没有工作，这不是我想要的。

# 搜索.php

```
<form id="searchImput" action="search.php" method="get">
Search: <input type="text" name="input" />
<input type="submit" />
</form>
<?php
    $input = $_GET["input"];

$tags = get_meta_tags('http://s0ulp1xel.x10.mx/background-garage/?p=photo&photo=1');
$tags = array_map('trim', explode(',', $tags['tag']));
foreach($tags as $k => $v) {

if ($input == 'water')
{

 echo '<a href="/background-garage/?p=photo&photo=4">'. $v. '</a><br/>';
}
}
?> 
```

# 图像.php

```
<head>
<meta id="pageType" name="photo">
<img name="1.png" id="photo" src="/background-garage/fullphoto/id/1.png?<?php echo Time () ?>"/>
<meta name="tag" content="plant, leaf, waterdroplet, water" />
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:46:34.467

你应该使用`if ($input == $v)` 而不是 `if ($input == 'water')`

# python - 可以使用 REST 和 Tempo 记录工作吗？

> ID：12077981
> 
> 赞同：1
> 
> 时间：2012-08-22T17:01:06.390
> 
> 标签：python, rest, jira, tempo

开发一个小型多平台 python 程序，用于显示分配给登录此应用程序的用户的问题，并让该用户能够针对该问题记录工作。我们使用的服务器有 Tempo，这似乎是管理层想要记录时间的方式。

有没有办法将 REST 与 Tempo 一起使用来记录工作？还是我应该只使用 Tempo API 来记录工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:06:04.600

由于 Tempo 仅使用标准工作日志，您应该能够使用 REST api 来记录工作，并且应该以 tempo 显示。

可以在此处找到使用 REST 在 JIRA 中记录时间的 API：

[http://docs.atlassian.com/jira/REST/latest/#id123143](http://docs.atlassian.com/jira/REST/latest/#id123143)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-03T06:54:47.773

下面的 Tempo rest API 用于为给定范围日期的登录用户发布特定问题 (ISSUE-911) 的“工作日志”

[https://0.0.0.0/jira/rest/tempo-rest/1.0/worklogs/issue-911](https://0.0.0.0/jira/rest/tempo-rest/1.0/worklogs/issue-911)

# html - CSS 列 - 元素多于列

> ID：12077982
> 
> 赞同：0
> 
> 时间：2012-08-22T17:01:08.373
> 
> 标签：html, css, layout, two-columns

我正在处理具有 2 列的布局。但是，我在这样做时遇到了一些问题，因为我的模板非常复杂，而且我无法每列有一个 div。

例如，我可能有类似的东西：

```
<div class="column left">
  left column - part 1
</div>
<div class="column right">
  right column - part 1
</div>
<div class="column right">
  right column - part 2
</div>
<div class="column left">
  left column - part 2
</div> 
```

我想做的是创建两列，宽度相同，它们之间没有空洞（垂直）。通常，完成以下操作不会有问题：

```
<div class="column left">
  left column - part 1
  left column - part 2
</div>
<div class="column right">
  right column - part 1
  right column - part 2
</div> 
```

此外，我的目标是有一个适用于*死*浏览器的解决方案，比如 IE7。但是，我还希望看到仅在较新的浏览器中受支持的解决方案，因为我认为可能会有一些有趣的解决方案。当然，通过JS也有解决方案，例如将所有.column.left的元素合并到一个div中，.column.right也是如此，但CSS解决方案会更好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:05:13.013

是否需要以非特定顺序来自不同列的 div？如果是这样，那么您无法通过纯 css 来完成它，因为需要将一些元素放在另一列的元素之上。请参阅[使用 CSS 重新排序 DIV](https://stackoverflow.com/questions/220273/css-positioning-div-above-another-div-when-not-in-that-order-in-the-html)。

如果这不是问题，请尝试在代码中的右列 div 之前编写所有左列 div 并使用以下 css：

```
.left {
    float: left;
    width: 100px;
    clear: left;
}

.right {
    margin-left: 100px;
} 
```

它创建了一个两列布局。当其中一列具有恒定宽度时，该方法特别有效，但是您可以通过更改`100px`为例如来实现您想要的任何内容`50%`。此处示例：http: [//jsfiddle.net/uQwUT/](http://jsfiddle.net/uQwUT/)。

# python - 获取混合python元组/结构的值

> ID：12077989
> 
> 赞同：0
> 
> 时间：2012-08-22T17:01:35.127
> 
> 标签：python, struct

我正在使用 Python 2.7 将保存的元组转换为列表/字典。

目前我的代码如下所示：

```
mystring = "\x80\x02]q\x01(J\x03\x00\x01\x00J\x15\xf93PK\x01K\x01G@\x834\x00\x00\x00\x00\x00K\x01K\x00e}q\x02(M\x03\xbb]q\x03(U\x0bmteststringq\x04Ml0U\x05_L-A_q\x05K\x00K\x02eJ\x06M\xd1\x1d]q\x06(U\x08otherstrq"
mystruct = str(len(mystring)) + 'B'
mydict = struct.unpack(mystruct, mystring) 
```

实际上字符串更长，我缩短了它。这适用于整数值，但它还包含诸如“mteststring”或“otherstr”之类的名称 - 我如何将它们连同它们的值一起从字符串中取出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:43:21.750

正如小猫评论的那样，您需要在 mystruct 字符串中定义完整的结构，例如：

```
mystruct = "47B12s29B9s"
struct.unpack(mystruct, mystring) 
```

让你更接近一点，因为它正在提取两个字符串。当然，如果您正在编写此事务的两端，则可以使用许多其他编码方法，包括一些诸如[JSON](http://www.json.org/)或[YAML](http://www.yaml.org/)的方法，它们将使数据更具可读性/可移植性。

# jquery - 需要帮助将 AJAX 代码转换为 jQuery

> ID：12077991
> 
> 赞同：0
> 
> 时间：2012-08-22T17:01:41.800
> 
> 标签：jquery

有人可以帮我将下面的代码转换为 jQuery 吗？

```
var xmlhttp;

            if (window.XMLHttpRequest)
            {
                // Code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else
            {
                // Code for IE5, IE6
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.open("GET", "http://www.my.com", true);
            xmlhttp.setRequestHeader("MyHeader", "hello");
            xmlhttp.send();

            xmlhttp.onreadystatechange = function()
            {
                if (xmlhttp.readyState == 4)
                {
                    document.getElementById("responseText").innerHTML = xmlhttp.responseText;
                }   
            }
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:09:45.903

简单的例子...

```
$.ajax({
  "type": "get", // optional
  "url": "http://www.my.com",
  "headers": { "MyHeader": "hello" },
  "success": function (data) {
    document.getElementById("responseText").innerHTML = data;
  }
}); 
```

有关更多选项，请参阅[文档](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T17:06:29.127

```
$.ajax({
  type: 'GET', // get by default anyway
  url: 'http://www.my.com',
  contentType: 'your/header',
  success: function(data){
    $('#responseText').html(data);
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T17:05:34.407

[查看 API](http://api.jquery.com/jQuery.ajax/)。应该是这样的：

```
$.ajax({
  url: 'http://www.my.com',
  headers: {
     "key": "value"
  },
  onSuccess: function(data){
     $('#responseText').html(data);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T17:06:01.203

抱歉，我不是 AJAX 专家，但看起来您正在尝试发出 GET 请求并阅读响应。如果是这样 - 您需要执行以下操作：

```
$.get('http://www.my.com/page.php?variable1=value1', function(data){
   $('#responseText').html(data);
}) 
```

类似的东西。

# ruby - 像 `self` 这样引用实例的 Ruby 方法

> ID：12077993
> 
> 赞同：19
> 
> 时间：2012-08-22T17:01:43.097
> 
> 标签：ruby, oop

Ruby 中是否有引用类的当前实例的方法，以`self`引用类本身的方式？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-22T17:07:13.450

`self`总是引用一个实例，但一个类本身就是一个`Class`. 在某些上下文中`self`会提到这样一个实例。

```
class Hello
  # We are inside the body of the class, so `self`
  # refers to the current instance of `Class`
  p self

  def foo
    # We are inside an instance method, so `self`
    # refers to the current instance of `Hello`
    return self
  end

  # This defines a class method, since `self` refers to `Hello`
  def self.bar
    return self
  end
end

h = Hello.new
p h.foo
p Hello.bar 
```

输出：

```
Hello
#<Hello:0x7ffa68338190>
Hello 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T17:08:07.230

在类的实例方法中`self`引用该实例。要在实例中获取类，您可以调用`self.class`. 如果你`self`在一个类方法中调用，你会得到这个类。在类方法中，您无法访问该类的任何实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T17:13:45.730

引用始终可用，它指向的`self`对象取决于上下文。

```
class Example

  self  # refers to the Example class object

  def instance_method
    self  # refers to the receiver of the :instance_method message
  end

end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-22T17:26:54.553

该方法`self`引用它所属的对象。类定义也是对象。

如果你`self`在类定义中使用它是指类定义的**对象**（到类），如果你在类方法中调用它，它又是指类。

但是在实例方法中，它指的是作为类实例的对象。

```
1.9.3p194 :145 >     class A
1.9.3p194 :146?>         puts "%s %s %s"%[self.__id__, self, self.class] #1
1.9.3p194 :147?>         def my_instance_method
1.9.3p194 :148?>             puts "%s %s %s"%[self.__id__, self, self.class] #2
1.9.3p194 :149?>             end
1.9.3p194 :150?>         def self.my_class_method
1.9.3p194 :151?>             puts "%s %s %s"%[self.__id__, self, self.class] #3
1.9.3p194 :152?>         end
1.9.3p194 :153?>      end
85789490 A Class
 => nil 
1.9.3p194 :154 > A.my_class_method #4
85789490 A Class
 => nil 
1.9.3p194 :155 > a=A.new 
 => #<A:0xacb348c> 
1.9.3p194 :156 > a.my_instance_method #5
90544710 #<A:0xacb348c> A
 => nil 
1.9.3p194 :157 > 
```

您会看到 puts #1 在类声明期间执行。它表明这`class A`是一个 id ==85789490 的 Class 类型的对象。所以内部类声明 self 指的是类。

然后，当在类方法（#2）内部调用`self`类方法（#4）时，再次引用该类。

当一个实例方法被调用时（#5），它表明它内部（#3）`self`是指该方法所附加的类实例的对象。

**如果您需要在实例方法中引用类，请使用`self.class`**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-28T15:01:12.397

可能你需要 :itself 方法？

```
1.itself   =>  1
'1'.itself => '1'
nil.itself => nil 
```

希望这有帮助！