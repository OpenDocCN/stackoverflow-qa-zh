# StackOverflow 问答 11144000-11144999

# javascript - 如何调试 IE Facebook JS 错误？

> ID：11144005
> 
> 赞同：0
> 
> 时间：2012-06-21T17:57:22.727
> 
> 标签：javascript, internet-explorer, facebook-javascript-sdk

因此，我们有一个最终调用[https://connect.facebook.net/en_US/all.js](https://connect.facebook.net/en_US/all.js)的 Facebook 应用程序。

在 Firefox 和 Chrome 中，一切似乎都正常工作。在 IE 8（有/无兼容性视图）中，我收到一个 Javascript 错误（all.js 中的语法错误，第 17 行，字符 864）。

这是特定的代码仅供参考：

```
if(typeof ca==='function')return ca.apply(x,aa); 
```

（当我在 IE 中启用调试并使用内部调试器时，我看到了这一点。我想知道就 IE 而言，'===' 是否应该是 '=='，但也许它们都是正确的表达式。）

所以，我不知道 Javascript，但我希望能够调试到足以知道这是 Facebook 问题还是我们的问题。（一般IE Facebook JS调试技巧也欢迎。）

我应该提到我必须添加代码来调用 FB.init 以使 Firefox/Chrome 代码工作，所以也许我没有做 IE 需要的事情。真的，我已经超出了我的深度，我什至不确定要包括哪些其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:09:17.640

**==**是一个具有类型转换潜力的比较运算符。

**===**是一个比较运算符，无需任何转换即可运行（它要么是，要么不是，没有可能）。

这部分代码看起来不错。我可以推荐的最好的方法是使用 IE 中的开发人员工具进行故障排除并查看“脚本”选项卡。确保“Break on Error”已打开并按照调用堆栈返回。

# haskell - 使用fundep将类型同义词族添加到现有类

> ID：11144008
> 
> 赞同：4
> 
> 时间：2012-06-21T17:57:40.773
> 
> 标签：haskell, types

反射库中有一个现有的类

```
class Reifies s a | s -> a where ... 
```

（所以我不能改变这个类）。我觉得应该可以在包装类中将功能依赖表示为类型族同义词，以便我可以做类似的事情

```
class (Reifies s a) => ReifiesWrapper s a where
   type ReifiedType s 
```

然后在 ReifiesWrapper 集的实例中

```
type ReifiedType s = a 
```

我当然不能这样做，因为 a 没有出现在 LHS 上。这一切似乎都应该是可能的，因为（由于 Reifies 中的 FunDep），知道 s 就足以找到类型 a。

总体目标是隐藏“具体化类型”a：

```
class Reified q where
  ...

instance (Reified q) => Blah q
   type ReifiedBlah q = ReifiedType q 
```

我在这里期望太多了吗？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:34:45.447

如果您打算`Reifies`在包装器中复制方法，那么您可以编写如下内容：

```
class R s a | s -> a where
  r :: s -> a
  -- etc.

class R s a => RW s a where
  type RT s
  r' :: a ~ RT s => s -> RT s
  r' = r
  -- etc.

instance R Bool String where
  r = show
  -- etc.

instance RW Bool String where
  type RT Bool = String
  -- no need to write r' = r, etc.

-- > :t r
-- r :: R s a => s -> a
-- > :t r'
-- r' :: RW s (RT s) => s -> RT s
-- > :t r True
-- r True :: [Char]
-- > :t r' True
-- r' True :: RT Bool
-- > r True
-- "True"
-- > r' True
-- "True" 
```

`a`因此和之间的关联`RT s`可以表示为[等式约束](http://www.haskell.org/haskellwiki/GHC/Type_families#Equality_constraints)。

* * *

**更新**：对于具有类型族的 1 参数包装器，超过具有 Fundep 的 2 参数类：

```
class R s a | s -> a where
  r :: s -> a

class R' s where
  type RT s a
  r' :: (R s a, a ~ RT s a) => s -> RT s a
  r' = r

instance R Bool String where
  r = show

instance R' Bool where
  type RT Bool a = a 
```

以便：

```
> :t r
r :: R s a => s -> a
> :t r'
r' :: (R' s, R s a, RT s a ~ a) => s -> RT s a
> :t r True
r True :: [Char]
> :t r' True
r' True :: RT Bool [Char]
> r True
"True"
> r' True
"True" 
```

例如：

```
import qualified Data.Reflection as Reflection ( reflect )
import Data.Reflection hiding ( reflect )

class Reified s where
  type ReifiedType s a
  reflect :: (Reifies s a, a ~ ReifiedType s a) => proxy s -> ReifiedType s a
  reflect = Reflection.reflect 
```

# android - getIntent 辅助类

> ID：11144010
> 
> 赞同：0
> 
> 时间：2012-06-21T17:57:51.370
> 
> 标签：android, android-intent

我正在尝试设置一个名为“GetIntents”的 Intent 助手类。我的问题是，如何从活动中调用我的 GetIntents 助手类？

这是我的 GetIntents 助手类：

```
 public class GetIntents extends Intent {

public static Intent i;

public static String username = i.getExtras().getString("uid");
public static String password = i.getExtras().getString("pwd");
public static String firstName = i.getExtras().getString("firstName");
public static String lastName = i.getExtras().getString("lastName");
public static String lastLatitudeUpdate = i.getExtras().getString("lastLatitudeUpdate");

public static int checkedin = i.getExtras().getInt("checkedin");
public static int Minute = i.getExtras().getInt("Minute");
public static int Hour = i.getExtras().getInt("Hour");

} 
```

现在我不确定如何从我的活动中调用它。到目前为止，我已经尝试过：

```
 GetIntents intent = new GetIntents();
 intent.getIntent(); 
```

我也尝试了其他几种方法，但没有运气。关于我可以尝试什么的任何建议？

我的日志：

```
 06-21 11:26:18.249: D/AndroidRuntime(8978): Shutting down VM

 06-21 11:26:18.249: W/dalvikvm(8978): threadid=1: thread exiting with uncaught exception (group=0x40015578)
 06-21 11:26:18.253: E/AndroidRuntime(8978): FATAL EXCEPTION: main
 06-21 11:26:18.253: E/AndroidRuntime(8978): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.jetdelivery.mobile/com.jetdelivery.mobile.screen1}: java.lang.NullPointerException
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.os.Handler.dispatchMessage(Handler.java:99)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.os.Looper.loop(Looper.java:130)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.ActivityThread.main(ActivityThread.java:3687)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at java.lang.reflect.Method.invokeNative(Native Method)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at java.lang.reflect.Method.invoke(Method.java:507)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
  06-21 11:26:18.253: E/AndroidRuntime(8978):   at dalvik.system.NativeStart.main(Native Method)
 06-21 11:26:18.253: E/AndroidRuntime(8978): Caused by: java.lang.NullPointerException
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at com.jetdelivery.mobile.GetIntentHelper.getDataModel(GetIntentHelper.java:9)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at com.jetdelivery.mobile.screen1.<init>(screen1.java:66)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at java.lang.Class.newInstanceImpl(Native Method)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at java.lang.Class.newInstance(Class.java:1409)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
 06-21 11:26:18.253: E/AndroidRuntime(8978):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:07:31.750

你可以通过几种方式做到这一点。您的 GetIntent 类应该只是一堆静态方法的包装器。你的函数调用看起来像

```
String username = GetIntent.getUsername(intent); 
```

或者您可以在创建类时传入意图

```
GetIntent mIntent = new GetIntent(getIntent()); 
```

无论哪种方式，您仍然必须传递一个 Intent 并且您将无法将值静态分配给您的成员函数，除非这是一个内部类。但是，如果您这样做，那么当您可以使用我们的变量时，为什么还要首先使用 Class。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:07:40.743

你有点接近。

创建一个名为 DataModel 的 java 类，如下所示：

```
public class DataModel {
        public String getUsername() {
            return username;
        }

        public void setUsername(String username) {
            this.username = username;
        }

        public String getPassword() {
            return password;
        }

        public void setPassword(String password) {
            this.password = password;
        }

        public String getFirstName() {
            return firstName;
        }

        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }

        public String getLastName() {
            return lastName;
        }

        public void setLastName(String lastName) {
            this.lastName = lastName;
        }

        public String getLastLatitudeUpdate() {
            return lastLatitudeUpdate;
        }

        public void setLastLatitudeUpdate(String lastLatitudeUpdate) {
            this.lastLatitudeUpdate = lastLatitudeUpdate;
        }

        public int getCheckedin() {
            return checkedin;
        }

        public void setCheckedin(int checkedin) {
            this.checkedin = checkedin;
        }

        public int getMinute() {
            return Minute;
        }

        public void setMinute(int minute) {
            Minute = minute;
        }

        public int getHour() {
            return Hour;
        }

        public void setHour(int hour) {
            Hour = hour;
        }

        private String username;
        private String password;
        private String firstName;
        private String lastName;
        private String lastLatitudeUpdate;

        private int checkedin;
        private int Minute;
        private int Hour;
    } 
```

然后创建另一个名为 GetIntentHelper 的类，就像这样

```
public class GetIntentHelper {

    public static DataModel getDataModel(Intent i) {
        DataModel m = new DataModel();
        m.setUsername(i.getExtras().getString("uid"));
        m.setPassword(i.getExtras().getString("pwd"));
        m.setFirstName(i.getExtras().getString("firstName"));
        m.setLastName(i.getExtras().getString("lastName"));
        m.setLastLatitudeUpdate(i.getExtras().getString("lastLatitudeUpdate"));

        m.setCheckedin(i.getExtras().getInt("checkedin"));
        m.setMinute(i.getExtras().getInt("Minute"));
        m.setHour(i.getExtras().getInt("Hour"));

        return m;
    }
} 
```

至于用法，在您的活动中，请致电：

```
DataModel  mydata = GetIntentHelper.getDataModel(myIntent); 
```

这将返回一个名为 mydata 的 DataModel 实例，其中包含所有精美且整洁的数据供您使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:10:10.817

感谢大家的帮助。我决定走另一条路，而不是使用辅助类。

```
Intent i = getIntent();
username = i.getExtras().getString("uid");
password = i.getExtras().getString("pwd");
firstName = i.getExtras().getString("firstName");
lastName = i.getExtras().getString("lastName");
lastLatitudeUpdate = i.getExtras().getString("lastLatitudeUpdate");
checkedin = i.getExtras().getInt("checkedin");
Minute = i.getExtras().getInt("Minute");
Hour = i.getExtras().getInt("Hour"); 
```

# objective-c - 如何从 Core Data 中删除具有特定属性的项目？

> ID：11144012
> 
> 赞同：0
> 
> 时间：2012-06-21T17:57:53.383
> 
> 标签：objective-c, ios, core-data

我正在编写一个利用核心数据（NSManagedObject、NSManagedObjectContext..etc）的 iOS 应用程序，我想知道是否有办法从数据库中删除满足特定条件的对象。例如，假设我有一个“表单”实体的数据库。有没有一种快速的方法来删除属性`name`等于单词@“Untitled”的表单。我知道我可以获取对象然后使用`- (void)deleteObject:(NSManagedObject *)object`方法，`NSManagedObjectContext`但这似乎将整个实体获取到内存中非常慢，以便我们可以转身删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:26:44.850

不幸的是，您实际上必须获取要删除的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:02:43.940

我相信您需要在对象本身上调用 delete 。否则，如果您可以按照建议的方式进行操作，并且有几个对象的名称也等于 @"Untitled" Core Data 将不知道您要删除哪个对象/行。

# html - IE9 在鼠标悬停/jQuery 选择器功能之前不会调整 DIV 宽度

> ID：11144023
> 
> 赞同：1
> 
> 时间：2012-06-21T17:59:07.887
> 
> 标签：html, css, twitter-bootstrap

我注意到在 IE9 中为 CSS 使用 IE9 + twitter bootstrap 2.0.2 时出现一个奇怪的问题

当页面呈现时，如果我不移动鼠标，我有一个以巨大宽度呈现的 DIV，我有时能够使用控制台将其测试为 222448 的宽度。

如果我移动鼠标，或者例如调用：`$('.selector').focus();`或`$('.selector').width()`元素，宽度会立即反映每个样式表的准确宽度。

这在 Chrome、FF、Safari 和 IE8 中表现正常，我只在 IE9 中看到过

我正在使用`container-fluid`and`row-fluid`并且它似乎一直发生在父元素上（它在 Salesforce 中，因此 html 在更大页面的上下文中呈现在父“表”内。

但是引导程序中的哪个选择器会导致“div”的宽度以数十万像素的宽度显示！？

# backbone.js - 仅在 Safari 中保存 400 错误

> ID：11144026
> 
> 赞同：4
> 
> 时间：2012-06-21T17:59:17.463
> 
> 标签：backbone.js, http-status-code-400

我正在调用`save()`Backbone 模型。这适用于我尝试过的每个浏览器的每个版本，**除了**iOS 上的 Safari 和 Safari。

在这 2 个浏览器中，调用失败，然后出现`400 Bad Request`错误。电话看起来像`../common/User/`

我的`User`模型如下所示：

```
Backbone.Model.extend({

    idAttribute: "UserId",
    initialize: function() {
    }, 

    url: function () {
        var base = 'common/User/';
        return (this.isNew()) ? base : base + this.id;
    },... 
```

我试图保存的信息如下所示：

```
{"BrowserType":"Safari","BrowserVersion":5.1,"ApplicationPath":"index"} 
```

我不确定我可以提供哪些其他信息来提供帮助。

任何想法为什么会发生这种情况？

**编辑** 请求标头看起来像：

```
Accept:application/json, text/javascript, */*; q=0.01
Content-Type:application/json
Origin:http://localhost:1087
Referer:http://localhost:1087/index.html
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2
X-Requested-With:XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T17:03:42.050

更新`User`模型的`url`方法以包含尾部斜杠：

```
url: function () {
    var base = 'common/User/';
    return (this.isNew()) ? base : base + this.id + "/";
}, 
```

我在我的 Backbone 项目中遇到了同样的问题——尽管我在其他浏览器中没有问题，但在 Safari 和 Mobile Safari 中对特定模型的所有//请求都失败了`POST`。正如[@mu 的评论](https://stackoverflow.com/questions/11144026/save-400-error-in-safari-only#comment14609893_11144026)所暗示的那样，在我的模型方法中添加一个斜杠解决了这个问题。`PUT``PATCH``url`

# ruby-on-rails - 为一个属性使用多个输入字段

> ID：11144030
> 
> 赞同：10
> 
> 时间：2012-06-21T17:59:28.230
> 
> 标签：ruby-on-rails, datetime, datepicker

我是rails新手，如果这个太简单了，很抱歉。

我的模型中有一个 datetime 属性，我尝试使用 3 个表单元素将值放入其中。第一个用于日期并且是输入表单（我使用 bootstrap-datepicker-rails 并且我想坚持使用它）。在第二个中，我想有一个小时选择框，第三个是分钟选择框。

所以我看到我可以使用 DateHelpers datetime_select 但是我不能再使用 bootstrap-datepicker 了。那么通过使用多个表单输入元素来填充属性（日期时间）的正确方法是什么。我看到有类似assign_multiparameter_attributes的东西，但文档并没有太大帮助:-(

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T00:10:39.463

对我来说，这似乎是控制器要解决的问题。该模型仍然有效，如果它以“Rails”方式接收其属性，则可以正常工作。我的解决方案涉及控制器修改`params`散列，以便模型甚至不知道视图中的更改。这取决于[ActiveRecord](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_assignment.rb#L141)中可能被视为私有 API 的行为，所以……公平警告 :-)

假设你有这个模型：

```
# app/models/example.rb
class Example < ActiveRecord::Base
  attr_accessible :started_at    # this is a DateTime
end 
```

调整您的视图以使用正常`text_field_tag`的日期部分（将通过 bootstrap-datepicker 增强）和 Rails 的`time_select`时间部分：

```
# app/views/examples/_form.html.erb
<%= form_for(@example) do |f| %>
  <p>
    <%= f.label :started_at %>
    <%= text_field_tag :started_at, @example.started_at.try(:to_date) %>
    <%= f.time_select :started_at, :ignore_date => true %>
  </p>

  <p><%= f.submit %></p>
<% end %> 
```

请注意，我们正在使用此表单，`try`因为该表单将为新的*和*持久的记录呈现。这避免了`started_at`属性为时的问题`nil`。

`before_filter`然后在控制器中创建一个以在将`params`哈希发送到模型之前对其进行修改：

```
class ExamplesController < ApplicationController
  before_filter :fix_params, :only => [:create, :update]

  # ...

private

  def fix_params
    date = Date.parse(params.delete(:started_at))

    params[:example].merge!({
      'started_at(1i)' => date.year.to_s,
      'started_at(2i)' => date.month.to_s,
      'started_at(3i)' => date.day.to_s
    })
  end
end 
```

本质上，我们将其解析`params[:started_at]`为日期并将其分配给`params[:example]`. 然后当参数最终传递给模型时，ActiveRecord 会`started_at`正确分配模型的属性。

您需要进行一些错误检查和验证，但这应该适合您。

# javascript - JavaScript for 循环执行次数过多。

> ID：11144033
> 
> 赞同：1
> 
> 时间：2012-06-21T17:59:35.613
> 
> 标签：javascript, jquery

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

有人能告诉我为什么这段代码中'i'的值会打印出数字4吗？循环只转到 3，但它会在 menu_feedback div 内打印“i = 4”。

```
for(i=1; i<=3; i++){
    $('#file_button'+i).hover(function (){
        $('#menu_feedback').html('i = '+i+'<br/>');
    }, function(){
        $('#menu_feedback').html('');
    });
} 
```

.

```
<button type="button" id="file_button1">Door 1</button>
<button type="button" id="file_button2">Door 2</button>
<button type="button" id="file_button3">Door 3</button>

<div id="menu_feedback"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T18:01:42.733

欢迎来到封闭的世界。

用这个：

```
for(i=1; i<=3; i++) {
    (function(i) {
        // the code that depends on i
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:02:14.623

这是一个经典的 JavaScript 问题。这是因为函数中的变量与循环中的变量相同`i`。`hover`所以，当循环结束时，`i`是 4，所以它在函数中是 4。

尝试这样的事情：

```
var hoverFunc = function(i){
    return function(){
        $('#menu_feedback').html('i = '+i+'<br/>');
    };
};
for(i=1; i<=3; i++){
    $('#file_button'+i).hover(hoverFunc(i), function(){
        $('#menu_feedback').html('');
    });
} 
```

`hoverFunc`是一个闭包。它返回一个围绕 的值“关闭”的函数`i`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T18:04:19.013

看看[循环内的 JavaScript 闭包——简单的实用示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)，了解有关您面临的问题的更多信息。

但是，对于 jQuery 事件处理程序，还有另一种方法可以解决这个问题，将索引作为事件数据传递：

```
for(i=1; i<=3; i++){
    $('#file_button'+i).mouseenter({index: i}, function(event){
        $('#menu_feedback').html('i = '+ event.data.index + '<br/>');
    }).mouseleave(function(){
        $('#menu_feedback').html('');
    });
} 
```

# css - Css3 过渡理解

> ID：11144035
> 
> 赞同：2
> 
> 时间：2012-06-21T17:59:48.290
> 
> 标签：css, css-transitions

我想在我的导航栏链接上创建一个悬停，就像这个例子 [http://livedemo00.template-help.com/wt_39513/index.html](http://livedemo00.template-help.com/wt_39513/index.html)

我不一定想要答案，但我需要更多的资源或指南来了解正在发生的事情。从我目前阅读的内容来看，CSS3 有可以控制这个功能的转换？

我想了解它是如何工作的，尤其是我想要实现的示例。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:21:52.050

非常有趣的例子， Richlewis。`li`在您向我们展示的页面上，菜单中的每个元素都使用了过渡。在他们的样式表中，您可以找到以下几行：

```
-webkit-transition: all 0.3s ease;
-moz-transition: all 0.3s ease;
-o-transition: all 0.3s ease;
transition: all 0.3s ease; 
```

这基本上意味着“在这个 li 元素的所有属性上使用转换”。不过，在这个例子中，最重要的是`background-position`属性。当您将鼠标悬停在此元素上时，它用于滚动背景。

背景图案（可以在此处找到：http: [//livedemo00.template-help.com/wt_39513/images/nav_li.png](http://livedemo00.template-help.com/wt_39513/images/nav_li.png)）只是一个 1px 宽的绿色图像，带有两个透明间隙。

如果您想了解更多关于 CSS3 中的过渡的信息，我在这里找到了一篇很棒的文章：[http](http://www.alistapart.com/articles/understanding-css3-transitions/) ://www.alistapart.com/articles/understanding-css3-transitions/ 。

希望这可以帮助。:)

# c# - 清除年份的 LSB 并插入字节

> ID：11144040
> 
> 赞同：2
> 
> 时间：2012-06-21T18:00:20.590
> 
> 标签：c#

我的程序从硬件设备接收一个日期时间包，它是字节类型的。一个示例数据包是：

```
byte[] packet = new byte[] {0x0C, 0x01, 0x15};

//packet[0] is the last two numbers of the year 
```

如评论中所述，packet[0] 代表一年中的最后两个数字。因此，例如，这将转换为十进制的 2012。

现在我的问题是，如何将 2012 返回给用户？对于今年的前两个数字“20”，我知道我可以调用：

```
int systemYear = DateTime.Now.Year; 
```

返回：0x000007dc，或十进制的 20'12'。我不需要以某种方式删除年份的最后两个数字，在本例中为“12”，而是在该位置插入数据包 [0] 字节。

我并不总是想假设我们是在“20XX”年。如果这个程序在 2101 年运行，这将导致问题。

此外，我不能总是假设硬件会在我们生活的当年返回。这就是我的程序实际上要检查的内容。

因此，例如数据包 [0] = 0x02。这将假设硬件在 2002 年返回。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:04:10.093

```
int packetyear = year - year % 100 + packet[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:03:06.087

您可以使用模运算符获取年份的最后一位*小数：*

```
int systemYearLastTwoDigits = DateTime.Now.Year % 100; 
```

请注意，这与年份的最低有效字节无关，它等于年份的最后一个到*十六进制*数字。

# grails - 我需要 ActiveMQ 插件吗？

> ID：11144050
> 
> 赞同：1
> 
> 时间：2012-06-21T18:01:02.653
> 
> 标签：grails, activemq

作为一个关于 ActiveMQ 的新手，我只是尝试从 Grails 连接到队列。我查看了 JMS 插件、ActiveMQ 插件和“Grails 权威指南”一书。

这本书告诉我，我只需要放下一些罐子，把一些豆子串起来，就是这样：

```
jmsFactory(org.apache.activemq.pool.PooledConnectionFactory) { bean ->
    bean.destroyMethod = "stop"
    connectionFactory = { org.apache.activemq.ActiveMQConnectionFactory cf ->
        brokerURL = "tcp://localhost:61616"
    }
}
jmsTemplate(org.springframework.jms.core.JmsTemplate) {
    connectionFactory = jmsFactory
}
jmsMessageListener(org.springframework.jms.listener.adapter.MessageListenerAdapter, ref("messageService")) {
    defaultListenerMethod = "onMessage"
}
jmsContainer(org.springframework.jms.listener.DefaultMessageListenerContainer) {
    connectionFactory = jmsFactory
    destinationName = "demoQueue"
    messageListener = jmsMessageListener
    transactionManager = ref("transactionManager")
    autoStartup = false
} 
```

我对它进行了测试，它似乎很有魅力。甚至交易也有效。

那么我需要使用其中一个插件吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:50:09.187

不，如果您愿意自己集成插件，则无需使用该插件。

我使用 jms 插件并手动配置 ActiveMQ。

**您可以在BuildConfig.groovy**中自动包含 JMS 插件和 ActiveMQ jar ：

```
repositories {
    ...
    mavenCentral()
    ...
}
plugins {
    ...
    runtime ":jms:1.2"
    ...
}
dependencies {
    ...
    compile "org.apache.activemq:activemq-core:5.5.1"
    ...
} 
```

**并在spring/resources.groovy**中配置一个 ActiveMQ 嵌入式代理：

```
beans = {
    ...
    jmsConnectionFactory(SingleConnectionFactory) {
        targetConnectionFactory = { ActiveMQConnectionFactory cf ->
            brokerURL = "vm://localhost"
        }
    }
    ...
} 
```

* * *

> 我想我不需要嵌入式代理，因为我使用的是外部代理。

要使用外部代理，只需更改**spring/resources.groovy**中定义的 brokerURL 。

* * *

> JMS 插件怎么样。使用它有哪些好处？

JMS 插件提供了有用的 Grails 集成。有关详细信息，请参阅[Grails JMS 插件 1.2 参考](http://gpc.github.com/grails-jms/docs/manual/index.html)。

# java - 访问 SSRS 报告的 HTML 内容 使用 Java webservice for LifeRay 门户

> ID：11144053
> 
> 赞同：2
> 
> 时间：2012-06-21T18:01:06.960
> 
> 标签：java, ssrs-2008, liferay, reporting-services, reportingservices-2005

我开发了一个显示日志详细信息的 SSRS 报告。我想在 Liferay Portlet 中显示我需要开发 Java Web 服务的 HTML 内容。您能否建议实现这一目标的最佳解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:06:47.247

您可以使用[Liferay Service Buider](http://www.liferay.com/community/forums/-/message_boards/message/12557680)。请看一下链接，你可以创建一个 Liferay 服务，它可以是一个远程（Web）服务，编写你的服务的 localServiceImpl 类并获取 SSRS 数据，一旦你有了数据，就由你决定在 portlet 视图上显示数据或存储到数据库中以供以后使用。

# php - 将 header() 与 wordpress 队列一起使用

> ID：11144054
> 
> 赞同：1
> 
> 时间：2012-06-21T18:01:14.323
> 
> 标签：php, javascript, wordpress, content-type

我基本上是想让我的 js 和 css 文件动态化。我已经尝试了几种不同的方法来做到这一点，但它似乎对我不起作用。任何帮助将不胜感激！

函数.php

```
function fnp_add_js() {
    //I've tried fnp_jquery.js.php fnp_jquery.php and fnp_jquery.js
    wp_register_script( 'fnp_jquery', plugins_url( 'fnp_jquery.js.php', __FILE__ ));

    wp_enqueue_script('fnp_jquery');
} 
```

基础.php

```
add_action('wp_enqueue_scripts', 'fnp_add_js'); 
```

jquery.js（我试过 fnp_jquery.js.php fnp_jquery.php 和 fnp_jquery.js）

```
<?php 
header('Content-type: text/javascript');

//I've also tried surrounding $(document).ready(function() {}  with echo ''; 
?>

$(document).ready(function() {
   //Javascript here
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:43:40.847

你的问题到底是什么，你的脚本没有被排队，它没有得到正确的服务？

启动 firebug 或您在浏览器中使用的任何控制台（通常是 F12），并查看网络选项卡中的标题是否真的推出了 text/javascript 以及内容是否真的存在。

# java - 无法在另一台计算机上打开我的 jar 文件

> ID：11144059
> 
> 赞同：2
> 
> 时间：2012-06-21T18:01:29.720
> 
> 标签：java, jar

我已经为我的一个项目创建了 jar 文件并将其导出到我的计算机。我已经成功完成了所有这些工作，包括清单文件的生成和保存。

我可以在我的电脑上运行编译后的文件，但不能在另一台电脑上运行。我已经压缩了所有文件并邮寄给了朋友。当我单击 jar 可执行文件运行我的代码时，它说：“无法访问文件”。

我在另一台电脑上安装了 JRE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:29:09.153

也许您在开发项目期间将一些必需的文件或驱动程序放在您的 PC 上。因此，当您尝试在您的机器上打开您的 jar 时，它看起来并成功地找到了必要的文件。但是，当您将应用程序发送给您的朋友并且他尝试启动应用程序时，应用程序会查找并且在朋友的 PC 上找不到这些文件或驱动程序...

# iphone - 在IOS中将图像插入视频文件

> ID：11144060
> 
> 赞同：0
> 
> 时间：2012-06-21T18:01:32.560
> 
> 标签：iphone, ios

我想将图片动态插入到 iPhone 应用程序的视频文件中。我试图做的是`chromakey`, 并用我想要的图像替换视频中的颜色。有谁知道我可以使用的 IOS 教程或框架，或者我应该继续吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T23:47:44.693

我建议您看一下这个[AVRender](http://www.modejong.com/AVAnimator/examples.html#AVRender)示例，它会在 iOS 设备上将 2 个视频合并为 1 个视频并将结果捕获到一个文件中。这并不是你想要做的，但它非常接近并提供了一个可以使用的框架。进入色度替换或 OpenGL 会浪费大量时间，最好从已经设置了 alpha 通道的视频开始，这样设备上的处理就不那么复杂了。

# c++ - 引用二维数组中的一整行数组

> ID：11144064
> 
> 赞同：0
> 
> 时间：2012-06-21T18:01:57.287
> 
> 标签：c++, arrays, 2d, root-framework

我现在有一个二维数字数组，我需要做的是弄清楚如何用一个名字来引用它们的整个“行”......

我想要做的是在一个名为 ROOT 的程序中使每个“行”成为 TTree 上的一个 TBranch。每行是一个数字列表，对应于单个直方图上所有 bin 中的数据，每列都填充了与每个直方图中特定 bin（即：bin 3）对应的数字（如果有意义的话）。我只需要找到一种方法来按直方图/行分隔数据，并在可能的情况下将它们视为自己的独立事物。如果这不连贯，我深表歉意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:11:17.673

我不太了解您问题的第二部分，所以我将介绍如何访问二维数组（也称为矩阵）中的行。如果这不是您所问的，则必须扩展您的问题。

多维数组通常设置为包含其他数组（等等）的数组。二维数组可能如下所示：

```
std::vector<std::vector<int> > myMatrix;
for (int y = 0; y < LIMIT_Y; ++y) {
    std::vector row;
    for (int x = 0; x < LIMINT_X; ++x) {
        row.push_back(0);
    }
    myMatrix.push_back(row);
} 
```

此示例将为您生成一个用零填充的二维数组。但是，您指定是否`myMatrix`保存保存列值的行，或者是否`myMatrix`保存保存行值的列。在这种情况下，我选择它来包含行。您可以知道访问矩阵的特定行，`myMatrix[i]`这将返回第 i 行作为`std::vector<int>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T12:26:04.773

如果您像这样创建了一个二维数组：

```
char** arr;
// fill up arr with elements
int rows = 20, columns = 50;
arr = (char**) malloc (rows * columns * sizeof(char)); 
```

你想参考，比如说第5行，你这样做：

```
arr[4] // here, the index 4 refers to the entire 5th row of arr 
```

例如，您可以传递`arr[4]`给需要指针参数的函数。

# opengl - 旋转相机时的间隙

> ID：11144066
> 
> 赞同：0
> 
> 时间：2012-06-21T18:01:59.340
> 
> 标签：opengl

我有一个很奇怪的问题。请看这些截图：

![图像1](../Images/bfabb509a84089d8b16b46d4fc8f3548.png)

![img2](../Images/7f972c4cb45b65af4d0a53285d775684.png)

![图像3](../Images/f75a8875378a59b58ac24317b323bb76.png)

![img4](../Images/00a4af6f0c1dc0f9d8b80c556b077b50.png)

该对象的代码：

```
void prostopadloscian(float x, float y, float z, float red, float green, float blue)
{
    glBegin(GL_QUADS);
        glColor3f(red, green, blue);

        glNormal3f(-x,-y,-z);
        glVertex3f(-x,-y,-z);
        glNormal3f(x,-y,-z);
        glVertex3f(x,-y,-z);
        glNormal3f(x,-y,z);
        glVertex3f(x,-y,z);
        glNormal3f(-x,-y,z);
        glVertex3f(-x,-y,z);

        glNormal3f(-x,y,-z);
        glVertex3f(-x,y,-z);
        glNormal3f(x,y,-z);
        glVertex3f(x,y,-z);
        glNormal3f(x,y,z);
        glVertex3f(x,y,z);
        glNormal3f(-x,y,z);
        glVertex3f(-x,y,z);

        glNormal3f(-x,y,z);
        glVertex3f(-x,y,z);
        glNormal3f(-x,-y,z);
        glVertex3f(-x,-y,z);
        glNormal3f(-x,-y,-z);
        glVertex3f(-x,-y,-z);
        glNormal3f(-x,y,-z);
        glVertex3f(-x,y,-z);

        glNormal3f(-x,-y,-z);
        glVertex3f(-x,-y,-z);
        glNormal3f(x,-y,-z);
        glVertex3f(x,-y,-z);
        glNormal3f(x,y,-z);
        glVertex3f(x,y,-z);
        glNormal3f(-x,y,-z);
        glVertex3f(-x,y,-z);

        glNormal3f(x,y,z);
        glVertex3f(x,y,z);
        glNormal3f(x,-y,z);
        glVertex3f(x,-y,z);
        glNormal3f(x,-y,-z);
        glVertex3f(x,-y,-z);
        glNormal3f(x,y,-z);
        glVertex3f(x,y,-z);

        glNormal3f(-x,y,z);
        glVertex3f(-x,y,z);
        glNormal3f(-x,-y,z);
        glVertex3f(-x,-y,z);
        glNormal3f(-x,-y,-z);
        glVertex3f(-x,-y,-z);
        glNormal3f(-x,y,-z);
        glVertex3f(-x,y,-z);
    glEnd();
}
    void bed()
    {
        glPushMatrix();
            glTranslatef(-1.6, 0, 4.6);
            prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
        glPopMatrix();
        glPushMatrix();
            glTranslatef(1.6, 0, 4.6);
            prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
        glPopMatrix();
        glPushMatrix();
            glTranslatef(-1.6, 0, -4.6);
            prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
        glPopMatrix();
        glPushMatrix();
            glTranslatef(1.6, 0, -4.6);
            prostopadloscian(0.2, 0.25, 0.2, 0.35, 0.16, 0.14);
        glPopMatrix();

        glPushMatrix();
            glTranslatef(0.0, 0.55, 0.0);
            prostopadloscian(2,0.3,5,0.85,0.85,0.95);
        glPopMatrix();
    } 
```

我的 display() 函数开始于

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glClearColor(1.0, 1.0, 1.0, 1.0); 

glEnable(GL_DEPTH_TEST);
glDisable(GL_TEXTURE_2D);
glLoadIdentity(); 
```

如何摆脱这种丑陋的影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:18:32.007

是啊，那些prostopadloscians看起来确实有点奇怪。从这些照片中很难确定，但有几点需要注意：

*   是否启用了背面剔除？
*   如果是这样，您是否以正确的顺序指定顶点？
*   您的前后剪裁平面是否相距不远？
*   您的深度缓冲区是否有足够的位用于您正在使用的剪切平面距离？
*   你的法线都指向正确的方向吗？（提示：不。除非你很狡猾，否则每张脸应该只需要一个`glNormal`电话。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:25:07.810

如果这种影响是间歇性的，我认为可能会发生 Z-fighting。您是否尝试过使用[glPolygonOffset](http://www.opengl.org/sdk/docs/man/xhtml/glPolygonOffset.xml)绘制桌面？

# eclipse - Eclipse - 在运行配置中找不到服务器

> ID：11144068
> 
> 赞同：4
> 
> 时间：2012-06-21T18:02:10.423
> 
> 标签：eclipse, glassfish, run-configuration

我遇到了麻烦：我在 Eclipse 中配置了 GlassFish Server。现在，我需要在其类路径中添加一个项目：我转到运行配置 -> Glassfish -> “Glassfish 3.1.2\. at localhost”（当前服务器）。现在，正如您从所附图片中看到的那样，我无法选择任何服务器，因为下拉菜单中似乎没有服务器。

![下拉列表中没有可用的服务器](../Images/b06440acc072d423a8005df7d56beca8.png)

我想选择服务器，然后转到“类路径”并添加项目......有人可以帮助我吗？

对我来说听起来很奇怪的是，当我运行我的网络应用程序时，它会在该服务器上运行......那么为什么我不能从运行配置中看到它呢？

感谢任何人都可以提供帮助，AN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:33:48.443

您可能是为 GlassFish 配置的目标运行时，但不是服务器实例。启动配置对话框不是管理服务器的正确位置。您需要通过服务器视图执行此操作。在 Servers 视图中，您可以创建一个新的服务器实例、为其分配项目、启动/停止服务器、发布等。

如果您当前看不到 Servers 视图，请通过 Window -> Show View 找到它。

# matlab - linprog - “下标分配维度不匹配”错误

> ID：11144069
> 
> 赞同：0
> 
> 时间：2012-06-21T18:02:11.267
> 
> 标签：matlab, multidimensional-array, mathematical-optimization, linear-programming

“下标分配尺寸不匹配。' 运行 linprog 编码时。

我的代码是

```
for M = 1 : size(PV_output,1)
for N = 1 : size(WT_output,2)

    f(:,M:N ) = [((CRF*CC_PV(M)/PVenergy(M)+OM_PV)); ((CRF*CC_WT(N))/WTenergy(N))+OM_WT];  % Objective function coefficients

    %A(:,:) = [-PV_output(:,:,K)  -WT_output(:,:,L)];
    A (:,M,N) = [-PV_output(:,M)  -WT_output(:,N) ];

    b(:,:)  = -Demand(:);

    lb = zeros(2,1);

    ub = [max_PV_area/PV_area; max_WT_area/WT_area]';

end
end 
[x, fval, exitflag] = linprog(f,A,b,[],[],lb,ub) 
```

PV_output 为 8760x1x27，WT_output 为 8760x1x3

我试图在此代码中为 27 和 3 PV 和 WT 的所有组合找到下面的“f”系数有谁知道如何索引“f”来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:16:12.560

您的第一个问题是您需要获取矩阵第三维的大小：

```
for M = 1 : size(PV_output,3) %# <---3, not 1  
    for N = 1 : size(WT_output,3) %# <---3, not 1 
```

接下来，你不想要`(:,M:N)`，而是`(:,M,N)`

```
f(:,M,N) 
```

可能还有更多。这应该让你开始；并使用调试器查看矩阵的尺寸大小，并确保它们是您认为应该的尺寸。例如，您不能将不同大小的矩阵相加，因此请确保维度相同。

# c++ - 正则表达式：如何匹配语法？

> ID：11144073
> 
> 赞同：0
> 
> 时间：2012-06-21T18:02:35.967
> 
> 标签：c++, regex, syntax, c++11

我的简单正则表达式有一个错误。我一直在尝试使用 C++ 编写一些简单的正则表达式`std::regex`。到目前为止，这是我的代码。

```
#include <iostream>
#include <regex>
#include <string>

int main(void)
{
    std::string str = "Hello world";
    std::regex rx("\w+\s\w+"), rx2("ello");
    std::cout << std::boolalpha << std::regex_match(str.begin(), str.end(), rx) << "\n";
    std::cout << std::boolalpha << std::regex_search(str.begin(), str.end(), rx2) << "\n";
    return 0;
} 
```

该程序应打印（根据教程）

```
true
true 
```

但它打印

```
false
false 
```

我在哪里犯错？提前致谢。

**注意：**`g++ -std=c++0x %file.cpp% -o %file%`如果有帮助，我正在使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:49:54.993

如前所述，g++（GCC）没有正确的正则表达式实现（它未实现但仍然可以编译）。

[Boost 库](http://boost.org)有一个正则表达式实现，它几乎与 C++11 中的正则表达式完全兼容。您可以在代码中进行最少的更改（仅使用 boost:: 而不是 std::) 来使用它。

这是一个编译和工作的代码：

```
#include <iostream>
#include <boost/regex.hpp>
#include <string>

int main(void)
{
    std::string str = "Hello world";
    boost::regex rx("\\w+\\s\\w+"), rx2("ello");
    std::cout << std::boolalpha << boost::regex_match(str.begin(), str.end(), rx) << "\n";
    std::cout << std::boolalpha << boost::regex_search(str.begin(), str.end(), rx2) << "\n";
    return 0;
} 
```

请注意，我还修复了 rx 的反斜杠缺少的转义，因为没有它就无法工作。

要编译它，您必须安装 libboost-regex-dev 包（如果不使用 Ubuntu/Debian，则安装类似的包）并执行以下命令：

```
g++ -std=c++0x main.cpp -lboost_regex -o test 
```

# linux - 我应该如何配置我的 VirtualHosts？

> ID：11144076
> 
> 赞同：0
> 
> 时间：2012-06-21T18:02:40.457
> 
> 标签：linux, hosting, virtualhost, apache

我有一个网站可以工作，因为 URL 的构建方式似乎是在假设它将位于服务器根目录（仅限应用程序）的情况下创建的。

在我的开发服务器上，我有其他项目，到目前为止，一个简单的符号链接一直在为我工作，但现在情况并非如此，因为这个新应用程序想要坐在路线上并处理所有到达 :80 的 URL。

希望 httpd.conf 中的这个片段将有助于解释我想要实现的目标：

```
# default for any not matched elsewhere
<VirtualHost *:80>
  ServerName localhost
  DocumentRoot /var/www/html/newproject
</VirtualHost>
# now try to pick out specific URLs
<VirtualHost localhost/webdev>
 DocumentRoot /var/www/html/existingProject
 ServerName localhost/project
</VirtualHost> 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:09:01.283

我的建议：

在您的主机文件中添加一个值，以便您可以将该特定应用程序路由到具有 localhost2 的另一个域。然后添加服务器名称为 localhost2 的第二个虚拟主机。这也应该在[服务器故障上被问到](https://serverfault.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:24:20.410

我最终在 httpd.conf 中添加了一个“Listen 81”指令并将 newproject VirtualHost 设置为监听 *:81

# regex - Apache mod_rewrite 结束期

> ID：11144079
> 
> 赞同：2
> 
> 时间：2012-06-21T18:02:59.573
> 
> 标签：regex, .htaccess, mod-rewrite

我试图更好地理解 Apache 的 mod_rewrite，并且得到了意想不到的结果。我尝试了许多不同的表达方式，但似乎没有任何表现符合我的理解。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php?route=$1 [QSA,L] 
```

使用`www.domain.com/item1/item2/item3`产量`item1/item2/item3`
使用`www.domain.com/item1/item2/item3.php`产量`item1/item2/item3.php`
使用`www.domain.com/item1/item2/item3...........`产量`item1/item2/item3`

**为什么不是`item1/item2/item3...........`？**

奇怪的是，如果 URL 是`www.domain.com/item1/item2/item3..........a`，那么路由就是我所期望的，`item1/item2/item3..........a`

我尝试了其他一些正则表达式，但它们的作用相似。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:52:38.327

虽然我还没有找到任何文档来解释为什么 Apache/.htaccess/mod_rewrite 会以这种方式运行，但我确实有一个替代方案，以防万一有人遇到这种情况。

而不是使用 .htaccess 将请求的文件名传递给查询字符串变量，就像`route`我上面的问题一样，在 PHP 中有一些可以使用的服务器变量。因此，我将 index.php 中的逻辑从读取查询字符串更改为：

```
trim( $_SERVER['REDIRECT_URL'], "/" ); 
```

REDIRECT_URL（和 REQUEST_URI）服务器变量将保留尾随点，并且修剪将去掉前导和尾随斜杠，类似于重写规则发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:25:47.127

我遇到了同样的问题，这似乎是 Windows 平台上 Apache 的错误。但是，它适用于 Linux。

[https://issues.apache.org/bugzilla/show_bug.cgi?id=48687](https://issues.apache.org/bugzilla/show_bug.cgi?id=48687)

# php - codeigniter jquery动态数据

> ID：11144081
> 
> 赞同：2
> 
> 时间：2012-06-21T18:03:11.580
> 
> 标签：php, jquery, codeigniter

在 Codeigniter 中，我通过控制器加载视图并发送数据数组，如下所示

```
$results['data_array'] = $data_array;
$this->load->view('results', $results); 
```

是否可以通过 jQuery 函数访问此数据数组，如果可以，如何访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:15:36.567

在内部`results`视图中，您可以执行以下操作以将该数组放入 javascript 变量中

```
<script type="text/javascript">
  var dataArr = <?php echo json_encode($data_array); ?>;
</script> 
```

然后`dataArr`将包含您从控制器传递的相同数组。你可以在任何地方使用它。喜欢循环遍历它，您可以使用`$.each`like

```
$.each(dataArr,function(index,val){
   // perform operation
}); 
```

# iphone - 使用不同的 Bundle Identifiers 自动构建 iOS

> ID：11144083
> 
> 赞同：2
> 
> 时间：2012-06-21T18:03:15.753
> 
> 标签：iphone, ios, xcodebuild

我不想详细说明我使用它的目的，但基本上我有一个 python 脚本，可以将应用程序的内容下载到 Xcode 项目中的链接文件夹中。该脚本还包含有关应用程序名称的信息以及其他详细信息。

目前我只是让脚本下载文件，并对 Info.plist 文件进行更改，包括我手动生成的包标识符。之后我跑

```
xcodebuild -workspace <workspace> -scheme <scheme> -configuration Release archive 
```

我遇到了[这个问题](https://stackoverflow.com/questions/8562031/xcodebuild-arguments-ignored-when-using-archive)，这导致它构建和存档调试配置，所以我基本上删除了该配置，现在它使用发布配置构建。

该过程确实在我的“档案”选项卡中的组织器中放置了一个新项目；但是，如果我尝试将其安装在我的设备上（该设备为我的团队提供了任何捆绑包的配置文件），我会收到“找不到此可执行文件的有效配置文件”错误。我已经尝试使用我的开发人员和分发配置文件对其进行签名（两者都设置为通配符以匹配任何捆绑标识符）

现在，我在 Info.plist 中只更改了 3 件事（我最终将不得不修改图标文件，可能还有闪屏，但现在可以等待）

*   **CFBundleDisplayName**
*   **CFBundleName**
*   **CFBundle标识符**

通常这些值指向一个环境变量`${ProductName}`，我想我可以尝试将我的团队的前缀添加到 BundleIdentifier

我想我主要要问的是，我还需要设置什么吗？我是否需要为特定应用程序从 Apple 创建/下载配置文件？我是否应该考虑为每个应用程序创建新的目标，而不是破解项目 Info.plist 来创建新的应用程序存档？

任何帮助，将不胜感激。~谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:27:49.437

看来，当您存档时，您应该使用您的开发人员证书进行签名。**然后，当您单击分发...**按钮（App Store 或 Ad Hoc）时，XCode 的存档选项卡将对其进行适当的签名（可能会覆盖任何以前的签名）。*在您在 iTunesConnect 上创建并填写详细信息并且它处于“准备二进制上传*”状态之前，它不会执行 App Store（甚至验证） 。

In short I haven't found an *easy* way to take an archive file and load it directly onto a test device. You will have use the distribute functionality with an Ad Hoc provision and then install that to the device. Fortunately, if you use wildcard provisions you can enter the bundle identifier manually at iTunesConnect so there's no need to create and download new provision files using this functionality.

# php - 如何在 php 中将“$_POST”返回到同一页面或不同的结果页面？

> ID：11144087
> 
> 赞同：-11
> 
> 时间：2012-06-21T18:03:37.257
> 
> 标签：php, post

我写了一个**Calculator.php**将结果发布到**info.php**的 php 文件，我写了另一个 php 文件 - **Calculator2.php**将结果发布到同一页面。我怎样才能将它们结合在一起？我试着把一个接一个，它不起作用。

**计算器.php**

```
<FORM action="info.php" method="post">
<P>
<LABEL for="firstNum">First Number: </LABEL>
<INPUT type="text" name="firstNum" id="firstNumberLabel"><BR>
<LABEL for="secondNum">Second Number: </LABEL>
<INPUT type="text" name="secondNum" id="secondNumberlabel"><BR>

<INPUT type="radio" name="calc" value="1"> Add<BR>
<INPUT type="radio" name="calc" value="2"> Subtract<BR>
<INPUT type="radio" name="calc" value="3"> Multiply<BR>
<INPUT type="radio" name="calc" value="4"> Divide<BR>
<INPUT type="submit" value="Send">
<INPUT type="reset">
</P>
</FORM> 
```

**info.php 文件**

```
<?php

switch ($_POST["calc"]){
case "1":
 echo "Result: ", $_POST['firstNum']+$_POST['secondNum'], "<br>";
 break;
case "2":
 echo "Result: ", $_POST['firstNum']-$_POST['secondNum'], "<br>";
 break;
case "3":
 echo "Result: ", $_POST['firstNum']*$_POST['secondNum'], "<br>";
 break;
case "4":
 echo "Result: ", $_POST['firstNum']/$_POST['secondNum'], "<br>";
 break;
default:
 break;
}
?> 
```

**Calculator2.php**

```
<form action= <?php echo $_SERVER['PHP_SELF'] ?> method="post">
    <label for="text_field">First Number: </LABEL>
    <input type="text" name="user_text" id="text_field"><BR>
    <label for="text_field2">Second Number: </LABEL>
    <input type="text" name="user_text2" id="text_field2"><BR>

 <input type="submit" value="Add">

 </form>

 <?php
   if(isset($_POST['user_text'])&&isset($_POST['user_text2']))
   echo $_POST['user_text']+$_POST['user_text2'];
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:28:23.667

```
<FORM action="info.php" method="post">
 <P>
 <LABEL for="firstNum">First Number: </LABEL>
 <INPUT type="text" name="firstNum" id="firstNumberLabel"><BR>
 <LABEL for="secondNum">Second Number: </LABEL>
<INPUT type="text" name="secondNum" id="secondNumberlabel"><BR>

<INPUT type="radio" name="calc" value="1"> Add<BR>
<INPUT type="radio" name="calc" value="2"> Subtract<BR>
<INPUT type="radio" name="calc" value="3"> Multiply<BR>
<INPUT type="radio" name="calc" value="4"> Divide<BR>
<INPUT type="submit" value="Send">
<INPUT type="reset">
</P>
</FORM>

<form action= <?php echo $_SERVER['PHP_SELF'] ?> method="post">
<label for="text_field">First Number: </LABEL>
<input type="text" name="firstNum" id="text_field"><BR>
<label for="text_field2">Second Number: </LABEL>
<input type="text" name="secondNum" id="text_field2"><BR>

<INPUT type="radio" name="calc" value="1"> Add<BR>
<INPUT type="radio" name="calc" value="2"> Subtract<BR>
<INPUT type="radio" name="calc" value="3"> Multiply<BR>
<INPUT type="radio" name="calc" value="4"> Divide<BR>
<INPUT type="submit" value="Send">

</form>

<?php
 switch ($_POST["calc"]){
case "1":
 echo "Result: ", $_POST['firstNum']+$_POST['secondNum'], "<br>";
 break;
case "2":
 echo "Result: ", $_POST['firstNum']-$_POST['secondNum'], "<br>";
 break;
case "3":
 echo "Result: ", $_POST['firstNum']*$_POST['secondNum'], "<br>";
 break;
case "4":
 echo "Result: ", $_POST['firstNum']/$_POST['secondNum'], "<br>";
 break;
default:
break;
}
?> 
```

并使用与以前相同的 info.php

```
<?php
 switch ($_POST["calc"]){
case "1":
 echo "Result: ", $_POST['firstNum']+$_POST['secondNum'], "<br>";
 break;
case "2":
 echo "Result: ", $_POST['firstNum']-$_POST['secondNum'], "<br>";
 break;
case "3":
echo "Result: ", $_POST['firstNum']*$_POST['secondNum'], "<br>";
 break;
case "4":
echo "Result: ", $_POST['firstNum']/$_POST['secondNum'], "<br>";
 break;
default:
 break;
}
?> 
```

问题是我认为有很多重复的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:35:04.963

在需要的地方将您的数据插入下面的括号中。

```
<?php
if(sizeof($_POST) == 0){
    // echo html here
}
else{
    // Perform php actions here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T08:09:25.483

这是一个巧妙的解决方案。添加一个处理表单提交的通用脚本，然后将其与结果重定向到任何需要的地方。

# java - GWT(P) 中的包组织

> ID：11144093
> 
> 赞同：0
> 
> 时间：2012-06-21T18:04:08.143
> 
> 标签：java, gwt, gwt-platform

我最近发现了[GWT-Platform (GWTP)](http://code.google.com/p/gwt-platform/)，并且很喜欢这个架构。

但是，我发现我的包很容易因类而变得非常臃肿（因为您创建的每个 Presenter 都会生成三个单独的类，等等）。当然，这在任何 MVP GWT 框架中都可能存在问题。

对于在 GWT 中组织包，您有什么建议？我很难找到逻辑位置来分割我的演示者/视图/事件/操作。

我目前有类似以下的内容，但我发现每个子包中仍然有几十个难以导航的类。

*   client.presenters - 存储所有演示者
*   client.views - 存储所有视图
*   client.uibinder - 存储所有 UI 绑定器类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:30:12.520

```
Assume Package structure of GWTP project as below:
->Client package
com.gwtplatform.hplace.client

->Gin configuration package
com.gwtplatform.hplace.client.gin

Contain classes:
ClientGinjector
ClientModule

->Uibinder/View classes package
com.gwtplatform.hplace.client.view
file.java
file.ui.xml

->Presenter class package
com.gwtplatform.hplace.client.presenter

->Guice/Server package:
com.gwtplatform.hplace.server.guice

->Shared package
com.gwtplatform.hplace.shared 
```

# java - 意图崩溃的应用程序

> ID：11144096
> 
> 赞同：0
> 
> 时间：2012-06-21T18:04:16.880
> 
> 标签：java, android, arrays, android-intent

我正在使用 Intents 将数组从一个 Activity 传递到 Android 中的另一个。这是一类中的代码。

```
Button los = (Button) findViewById(R.id.starten);
        int[] a = new int[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49 };
        shuffleArray(a);

        final Intent intent;
        intent = new Intent(this, melderfragen.class);
        intent.putExtra("schuffledNumbers", a);

        los.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                startActivity(intent);

            }
        }); 
```

这是接收类中的代码。

```
Intent intent = getIntent();
        int[] questions = intent.getIntArrayExtra("shuffledNumbers"); 
```

到目前为止，它工作正常。但是，当我想从数组中访问一个数字时，应用程序会崩溃，如下所示：

```
int Fragenummer = questions[2]; 
```

我的代码有什么问题？我希望我没有问重复的问题，但到目前为止我还没有在这里找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:05:50.687

您正在发送`schuffledNumbers`并尝试阅读`shuffledNumbers`。请注意第一个中的额外**c**。

使用常量来防止这种情况是一种很好的做法。所以你可以定义：

```
public static final String EXTRA_SHUFFLED_NUMBERS = "shuffled_numbers"; 
```

并在两个地方都使用这样的常量。

# javascript - Javascript：分配给对象或数组原型导致括号不起作用

> ID：11144099
> 
> 赞同：0
> 
> 时间：2012-06-21T18:04:34.473
> 
> 标签：javascript, arrays, node.js, object, prototype

> **可能重复：**
> [将函数添加到 javascript 的 Array 类中断以进行循环](https://stackoverflow.com/questions/5020954/adding-functions-to-javascripts-array-class-breaks-for-loops)

在任何人说什么之前，我知道用 Object.prototype 分配某些东西通常是不好的做法，但如果包含这段代码，我希望所有对象都拥有这种东西。奇怪的是，当我也使用 Array 进行操作时也会发生这种情况。这发生在 Node.js 中，所以它使用 V8 javascript 引擎。无论如何，这就是发生的事情。我只是将一个函数分配给这两种类型之一的原型（我已经分别尝试了两种类型，但结果与结果相同，当我使用其他类型时不会发生这种情况）。

```
Array.prototype.test = function() { console.log("test"); }

var a = ["test1", "test2", "test3"],
    index,
    entry;

a.test(); //prints 'test'

for(index in a) {
  entry = (a[index]).split("e"); //throws an error
} 
```

错误是

```
Object Function () {console.log("test");} has no method 'split' 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:09:57.597

如果你运行它，你会看到发生了什么，因为你在数组上使用了原型，函数成为对象的一部分，然后拆分会引发错误。

```
Array.prototype.test = function() { console.log("test"); }

var a = ["test1", "test2", "test3"],
    index,
    entry;

a.test(); //prints 'test'

for(index in a) {
    console.log(index);
    console.log(a);
//  entry = (a[index]).split("e"); //throws an error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:11:52.313

您应该使用以下方法迭代该数组：

```
for(index=0;index<a.length;index++) 
```

因为当您添加成员时，它们会成为数组的一部分，使用

```
for(i in a) console.log(i); 
```

这将打印所有键以及函数名称“test”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:14:36.037

尝试

```
varTest = console.log("test");
Array.prototype.test = function() { varTest }

var a = ["test1", "test2", "test3"],
    index,
    entry;

a.test(); //prints 'test'

for(index in a) {
  entry = (a[index]).split("e"); //throws an error
} 
```

# php - 为什么需要密码加密时与 ASE 的连接会失败？

> ID：11144100
> 
> 赞同：1
> 
> 时间：2012-06-21T18:04:35.300
> 
> 标签：php, sap-ase

如何密码加密从 PHP 到 Sybase ASE 的数据库服务器连接？

在`net password encryption reqd = 1`.

我们如何通过密码加密与 ASE 建立 PHP DB 连接？我们需要在客户端连接上设置 PHP 关键字或参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:39:16.213

下面是这个问题的解决方案，它能够从具有 PHP 版本 5.3.6 和 Sybase CTISQL 的 Sybase 驱动程序的 Linux 64 位基础机器进行连接`Utility/15.7/P-EBF19975 ESD #3/DRV.15.7.0.3`。虽然我们得到了这个工作，但除此之外，我们还需要 Apache 工作，我希望 Sybase 支持能够帮助我们解决这个问题，以及他们为我们的问题提供以下解决方案。我在这里发布这个是为了每个人都受益。注意：AFAICT，这不是 Sybase 支持的解决方案。请自行承担风险。

要使其发挥作用，需要做几件事：

1.  我使用最新的 Debian Stable 6.05 压缩 64 位
2.  我已经安装了从 Sybase 下载的 ebf19977（带有开放客户端的开发工具包，是的，数字是关闭的，这不是错误，安装时会看到）
3.  从 php.net 网站下载 PHP 5.3.6 以从源代码编译。

**第 1 步）** 我认为应该很容易设置它。确保您具有 sudo 访问权限

**第 2 步）** 要安装开发工具包，您需要输入 setup.bin 文件所在位置的完整路径，如输入 sudo /home/btran/ebf19977/setup.bin ，这将开始安装，几乎按照说明进行操作在那里安装 OpenClient 及其相关工具。确保安装了 Open Client 和 PHP 库。

完成安装后，还需要执行其他一些步骤：

通过在 /opt/sybase 的根目录中执行 SYBASE.sh 来设置所有 Sybase 环境变量

```
sudo cat /opt/sybase/SYBASE.sh >> /etc/profile , if necessary source /etc/profile 
```

这将设置大部分变量，但您需要添加几个不存在的变量：

```
 PHPRC=/opt/sybase/OCS-15_0/config
    LD_LIBRARY_PATH=/opt/sybase/OCS-15_0/php/php536_64/lib:/opt/sybase/OCS-15_0/lib 
```

您的 /ect/profile 应该如下所示：

```
 # ------------------------------------
    #    Sybase Product Environment variables
    # ------------------------------------
    SYBASE="/opt/sybase"
    export SYBASE
    SYBASE_OCS="OCS-15_0"
    export SYBASE_OCS
    INCLUDE="/opt/sybase/OCS-15_0/include":$INCLUDE
    export INCLUDE
    LIB="/opt/sybase/OCS-15_0/lib":$LIB
    export LIB
    PATH="/opt/sybase/OCS-15_0/bin":$PATH
    export PATH
    LD_LIBRARY_PATH="/opt/sybase/OCS-15_0/php/php536_64/lib:/opt/sybase/OCS-15_0/lib:/opt/sybase/OCS-15_0/lib3p64:/opt/sybase/OCS-15_0/lib3p":$LD_LIBRARY_PATH
    export LD_LIBRARY_PATH

    PHPRC="/opt/sybase/OCS-15_0/config"
    export PHPRC

    JAVA_HOME="/opt/sybase/jre32"
    export JAVA_HOME

    RIBO_HOME="/opt/sybase/jutils-3_0/ribo"
    export RIBO_HOME
    # ------------------------------------ 
```

然后，您还需要对位于根目录 /opt/sybase 的接口文件进行修改，使其看起来像这样，请不要使用它，使用您的信息：

```
 dev
        master tcp ether dev.company.com 4425
        query tcp ether dev.company.com 4425

    prod
        master tcp ether prod.company.com 4425
        query tcp ether prod.company.com 4425

    ribo
        master tcp ether testhost.company.com 5005
        query tcp ether testhost.company.com 5005 
```

您还需要修改 ocs.cfg 以正确启动 PHP，它位于文件夹`/opt/sybase/OCS-15_0/config`中，如下所示：

```
 ;;;;;;;;;;;
    ; This is the default external configuration definition file. Feel free
    ; to add your own customizations.
    ;
    [DEFAULT]
    ; This is the default section loaded by applications that use
    CS_SEC_ENCRYPTION = CS_TRUE
    [ANSI_ESQL]
    ; This section defines configuration which an ANSI conforming
    CS_CAP_RESPONSE = CS_RES_NOSTRIPBLANKS
    CS_EXTRA_INF = CS_TRUE
    CS_ANSI_BINDS = CS_TRUE
    CS_OPT_ANSINULL = CS_TRUE
    CS_OPT_ANSIPERM = CS_TRUE
    CS_OPT_STR_RTRUNC = CS_TRUE
    CS_OPT_ARITHABORT = CS_FALSE
    CS_OPT_TRUNCIGNORE = CS_TRUE
    CS_OPT_ARITHIGNORE = CS_FALSE
    CS_OPT_ISOLATION = CS_OPT_LEVEL3
    CS_OPT_CHAINXACTS = CS_TRUE
    CS_OPT_CURCLOSEONXACT = CS_TRUE
    CS_OPT_QUOTED_IDENT = CS_TRUE
    ; End of default sections

    [isql]
    CS_SEC_ENCRYPTION = CS_TRUE

    [PHP]
    CS_SEC_ENCRYPTION = CS_TRUE

    ; This is a sample section showing how you might alter configuration
    ; properties for you Embedded SQL application.
    [SAMPLE_ESQL]
    ; use most of the ANSI properties defined above
    include = ANSI_ESQL
    ; but override some default properties
    CS_OPT_CHAINXACTS = CS_FALSE ; run in autocommit mode
    ;;;;;;;;; 
```

注意：检查同一目录下是否存在php.ini文件非常关键`/opt/sybase/OCS-15_0/config`（这里指向exention文件，查看环境变量`LD_LIBRARY_PATH="/opt/sybase/OCS-15_0/php/php536_64/lib`）

你的 php.ini 应该是这样的：

```
 extension=/opt/sybase/OCS-15_0/php/php536_64/lib/sybaseasephp.so 
```

**步骤 3)**从源代码编译 PHP，再次 Sybase 调用 64 位。

我将源代码下载到`/opt/php-5.3.6`大多数 Linux 应用程序的安装位置。

```
 cd to /opt/php-5.3.6 

    ./configure 
```

**非常重要**的是要注意，这是我们遇到障碍的地方，如果我选择任何其他配置选项而不是默认的 ./configure，PHP 将无法加载并出现以下错误：

```
btran@sls-baonix:/opt/php-5.3.6$ php ~/test-dev.php
PHP Warning:  PHP Startup: Unable to load dynamic library
'/opt/sybase/OCS-15_0/php/php536_64/lib/sybaseasephp.so' -
/opt/sybase/OCS-15_0/php/php536_64/lib/sybaseasephp.so: undefined
symbol: executor_globals in Unknown on line 0

Fatal error: Call to undefined function sybase_connect() in
/home/btran/test-dev.php on line 10
] 
```

我们需要其他选项的原因是我们也需要它来与 Apache 一起工作。我们现在可以使用 PHP，但是我们需要能够从网站启动 PHP，所以依赖项是 PHP 除了支持 Sybase，还需要支持 Apache。如果有任何 PHP 专家对此有解决方案，请加入并帮助我们。

# audio - ffmpeg“标题丢失”错误重新编码 mp3 文件

> ID：11144104
> 
> 赞同：4
> 
> 时间：2012-06-21T18:05:05.587
> 
> 标签：audio, ubuntu, encoding, ffmpeg, mp3

我有一个在 Ubuntu (natty) 上运行的 mp3 编码服务器。直到一两个星期前，这一直运行良好。我相信我运行了一个更新，这似乎破坏了我的编码器 - 每次我尝试运行编码脚本时，它都会失败并出现错误“Header Missing”。以前编码没有任何问题的文件不再编码。

当我运行一个基本的 ffmpeg 脚本（以前运行良好）时，我得到以下输出。有什么想法吗？

```
FFmpeg version 0.6.6-4:0.6.6-0ubuntu0.11.04.1, Copyright (c) 2000-2010 the Libav developers
  built on Jun 12 2012 16:28:21 with gcc 4.5.2
  configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --enable-shared --disable-static
  WARNING: library configuration mismatch
  libavutil   configuration: --extra-version=4:0.6.6-1ubuntu1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libdirac --enable-libgsm --enable-libopenjpeg --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-libopenjpeg --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libfaad --enable-libdirac --enable-libfaad --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavcodec  configuration: --extra-version=4:0.6.6-1ubuntu1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libdirac --enable-libgsm --enable-libopenjpeg --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-libopenjpeg --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libfaad --enable-libdirac --enable-libfaad --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavformat configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavdevice configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavfilter configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libswscale  configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libpostproc configuration: --extra-version=4:0.6.6-0ubuntu0.11.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --disable-stripping --enable-runtime-cpudetect --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/i686/cmov --cpu=i686 --enable-shared --disable-static --disable-ffmpeg --disable-ffplay
  libavutil     50.15\. 1 / 50.15\. 1
  libavcodec    52.72\. 2 / 52.72\. 2
  libavformat   52.64\. 2 / 52.64\. 2
  libavdevice   52\. 2\. 0 / 52\. 2\. 0
  libavfilter    1.19\. 0 /  1.19\. 0
  libswscale     0.11\. 0 /  0.11\. 0
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
[mp3 @ 0x8aafbc0]max_analyze_duration reached
Input #0, mp3, from '1340299085b3da8484f1b089d28460930d1467a749.mp3':
  Metadata:
    TLAN            : eng
    TRCK            : 8/11
    TPE1            : Big Wreck
    TALB            : Albatross
    TYER            : 2012
    TIT2            : Rest Of The World
    Rip date        : 2012-03-07
    TDAT            : 0603
    Source          : CD
    Release type    : Normal release
    TCON            : Rock
    TPUB            : Anthem Entertainment Group
  Duration: 00:02:51.38, start: 0.000000, bitrate: 320 kb/s
    Stream #0.0: Audio: mp3, 44100 Hz, 2 channels, s16, 320 kb/s
File 'test.mp3' already exists. Overwrite ? [y/N] y
Output #0, mp3, to 'test.mp3':
  Metadata:
    TSSE            : Lavf52.64.2
    Stream #0.0: Audio: libmp3lame, 44100 Hz, 2 channels, s16, 64 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
Press [q] to stop encoding
[mp3 @ 0x8ab0db0]Header missingrate=  64.0kbits/s    
Error while decoding stream #0.0
size=    1339kB time=171.42 bitrate=  64.0kbits/s    
video:0kB audio:1339kB global headers:0kB muxing overhead 0.002406% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:31:42.430

不幸的是，除了简单地下载最新版本的 FFMPEG 并从头开始重新安装之外，没有其他解决方法。不确定通过 apt-get 进行的最新更新发生了什么，但它肯定会破坏一些东西。

# xml - 使用 Linq to XML 读取 xml

> ID：11144106
> 
> 赞同：0
> 
> 时间：2012-06-21T18:05:10.373
> 
> 标签：xml, linq

请查看代码并建议需要进行哪些更改才能获得预期的输出。选择代码是伪代码。

xml:

```
<?xml version='1.0'  encoding='Cp1252' ?>
<RESULTS>
    <ROW>
        <COLUMN NAME="ID"><![CDATA[1234]]></COLUMN>
        <COLUMN NAME="FName"><![CDATA[Joe]]></COLUMN>
        <COLUMN NAME="LName"><![CDATA[Doe]]></COLUMN>
    </ROW>
    <ROW>
        <COLUMN NAME="ID"><![CDATA[5678]]></COLUMN>
        <COLUMN NAME="FName"><![CDATA[Jill]]></COLUMN>
        <COLUMN NAME="LName"><![CDATA[Martin]]></COLUMN>
    </ROW>
</RESULTS> 
```

代码：

```
static void Main(string[] args)
{    
    XDocument doc = XDocument.Load("C:\\test.xml");
    var query = from headrow in doc.Descendants("ROW")
                from COLUMN in headrow.Descendants("COLUMN")
                select new 
                { 
                    ID = COLUMN.Element where (string)COLUMN.Attribute== "ID",
                    FName = COLUMN.Element where (string)COLUMN.Attribute== "FName",
                    LName = COLUMN.Element where (string)COLUMN.Attribute== "LName"
                };

    foreach (var result in query)
    {    
        Console.WriteLine(result);               
    }    
} 
```

预期输出
1234 Joe Doe
5678 Jill Martin

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:21:34.153

看看以下是否有帮助：

```
var query = from headrow in doc.Descendants("ROW") 
            select new 
            {
                ID = headrow.Elements("COLUMN").First(c => c.Attribute("NAME").Value == "ID").Value,
                FName = headrow.Elements("COLUMN").First (c => c.Attribute("NAME").Value == "FName").Value,
                LName = headrow.Elements("COLUMN").First (c => c.Attribute("NAME").Value == "LName").Value
            };

foreach (var result in query) 
{     
    Console.WriteLine("{0} {1} {2}", result.ID, result.FName, result.LName);                
} 
```

# ocaml - 为什么 camlp4o 无法解析（或）为二进制函数？

> ID：11144107
> 
> 赞同：1
> 
> 时间：2012-06-21T18:05:14.663
> 
> 标签：ocaml, camlp4

在 vanilla OCaml 中，`(or)`它是一个二进制函数，就像`(+)`所有其他函数一样，所以这样的代码可以正常工作：

```
let any (truths:bool list) = List.fold_left (or) false truths 
```

但是在任何加载 camlp4o 的环境中，这都无法解析：

```
Error: Parse error: ")" or "module" or [expr] expected after "(" (in [expr]) 
```

同时，`(+)`其他整数算术运算符在任一环境中继续按预期工作：

```
let sum (nums:int list) = List.fold_left (+) 0 nums 
```

为什么是这样？这是camlp4o的限制还是错误？这发生在 OCaml 3.12.1 上（在 OS X 10.7.4 上，通过 GODI 引导程序全新安装）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T22:32:01.647

这是[一个已知的错误](http://caml.inria.fr/mantis/view.php?id=5495)，此后已修复。即将发布的 4.00 版本不会有这个问题。

PS：当我发现我强烈怀疑是错误的 OCaml 可疑内容时，我的技术是使用`site:caml.inria.fr/mantis`修饰符进行谷歌搜索，以在 OCaml 错误跟踪器中搜索类似内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:52:18.253

在“普通”OCaml 中，您可以`(or)`与`(||)`. 如果查看[修改后的语法](http://caml.inria.fr/pub/docs/manual-camlp4/manual007.html)定义，`(or)`不支持使用。你总是需要使用`(||)`. 也许这是这种变化的副作用？

无论如何，一些快速测试表明它`(||)`适用于camlp4o。

# cocos2d-iphone - (Cocos2d) 如何实现单个场景&图层的可选精灵？

> ID：11144108
> 
> 赞同：0
> 
> 时间：2012-06-21T18:05:15.360
> 
> 标签：cocos2d-iphone

我很抱歉这个问题的可怕描述。我正在制作一个游戏，用户必须尝试通过移动轮胎穿过足球。我用一个场景和图层设置了游戏，我想知道如何实现具有不同背景图像、轮胎和足球可供选择的选项。我不希望有人向我解释如何编写我的游戏。我想为不同的背景图像提供特定的对象。例如，监狱背景图像将有一个金属轮胎、不同的足球，并且在试图将足球从轮胎中扔出时，某些物体会飞过场景。我应该为每个背景图像及其相应的精灵创建一个单独的场景和图层，还是有更好的方法来解决这个问题。我所要求的只是有人向我指出一些示例代码或执行类似操作的项目。对不起，很长的帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:08:03.933

如果您愿意将所有内容保留在一个 png（背景 + 移动精灵）中并使用 a `CCSpriteBatchNode`，您可以轻松地保持元素的矩形对于所有不同的设置都相等，并且只需加载不同的文件。

否则只有一组文件并使用相同的文件`CGRect`，这应该不难..

# wpf - 如何使用自定义 ControlTemplate 以按钮样式执行 BorderBrush 动画？

> ID：11144110
> 
> 赞同：0
> 
> 时间：2012-06-21T18:05:21.937
> 
> 标签：wpf

我有一个这样定义的按钮样式：

```
<LinearGradientBrush x:Key="Brush_NavButtonBorder0" StartPoint="0,0" EndPoint="0,1" >
    <GradientStop Color="#00383f47" Offset="0" />
    <GradientStop Color="#FF383f47" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_NavButtonBorder4" StartPoint="0,0" EndPoint="0,1" >
    <GradientStop Color="#FF414f5a" Offset="0" />
    <GradientStop Color="#11414f5a" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_NavButtonBackground" StartPoint="0,0" EndPoint="0,1" >
    <GradientStop Color="#FF3f505a" Offset="0" />
    <GradientStop Color="#FF37454e" Offset="0.75" />
    <GradientStop Color="#FF2f3c44" Offset="1" />
</LinearGradientBrush>

<LinearGradientBrush x:Key="Brush_NavButtonPressedBackground" StartPoint="0,0" EndPoint="0,1" >
    <GradientStop Color="#FF3f505a" Offset="1" />
    <GradientStop Color="#FF37454e" Offset="0.25" />
    <GradientStop Color="#FF2f3c44" Offset="0" />
</LinearGradientBrush>

<Style x:Key="NavigationButton" TargetType="Button">
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Foreground" Value="Gainsboro" />
    <Setter Property="FontSize" Value="14" />
    <Setter Property="Background" Value="{StaticResource Brush_NavButtonBackground}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}" x:Name="MainControlTemplate">
                <Grid>
                    <Border x:Name="outerBorder" CornerRadius="5" BorderThickness="1" BorderBrush="{StaticResource Brush_NavButtonBorder0}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True" />
                    <Border Margin="1" CornerRadius="4" BorderThickness="1" BorderBrush="{StaticResource Brush_NavButtonBorder4}" Background="Transparent" SnapsToDevicePixels="True">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="content"/>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <!--<Setter TargetName="outerBorder" Property="BorderBrush" Value="Gray" />-->
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="outerBorder"
                                                    Storyboard.TargetProperty="(Border.BorderBrush).(GradientBrush.GradientStops)[0].(GradientStop.Color)"
                                                    To="Gray"
                                                    Duration="0:0:0.2" />
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <Setter Property="Background" Value="{StaticResource Brush_NavButtonPressedBackground}" />
                        <Setter TargetName="content" Property="RenderTransform" >
                            <Setter.Value>
                                <TranslateTransform X="2.0" Y="2.0" />
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Opacity" Value="0.5" />
                    </Trigger>
                    <Trigger Property="IsKeyboardFocused" Value="True">
                        <Setter Property="FocusVisualStyle" Value="{StaticResource MyFocusVisualStyle}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这种风格有几个问题： 1\. 当我将鼠标悬停在一个按钮上时，所有其他使用这种风格的按钮都会对动画做出反应，而不仅仅是我结束的按钮。2\. 我想为整个边框的颜色设置动画，而不仅仅是第 0 个渐变停止点，但我似乎找不到这样做的方法。

ColorAnimation 部分上方的注释行几乎完全符合我的要求，只是它立即在 MouseOver 上显示灰色 BorderBrush - 我希望它显示带有动画的灰色 BorderBrush。

这似乎应该很简单，但我不知道如何做到这一点。有谁知道如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:35:53.043

它更改所有按钮边框的原因是您实际上是在更改渐变画笔中的颜色。由于相同的渐变画笔在所有具有该样式的按钮实例之间共享，因此所有画笔的边框都会发生变化。

有很多方法可以解决这个问题，但其中之一是使有问题的画笔成为样式本身的资源，因此不会以相同的方式共享。以下代码片段演示了您需要更改的所有内容（从顶级资源中删除 Brush_NavButtonBorder0，并将其添加到按钮样式的资源中）：

编辑：包括更新的完整样式

```
<Color x:Key="BorderColor">#00383f47</Color>

<!-- Other Brushes (NOT Brush_NavButtonBorder0) -->

<Style x:Key="NavigationButton" TargetType="Button">
  <Setter Property="FocusVisualStyle" Value="{x:Null}" />
  <Setter Property="Foreground" Value="Gainsboro" />
  <Setter Property="FontSize" Value="14" />
  <Setter Property="Background" Value="{StaticResource Brush_NavButtonBackground}" />
  <Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type Button}" x:Name="MainControlTemplate">
            <ControlTemplate.Resources>
                <LinearGradientBrush x:Key="Brush_NavButtonBorder0" StartPoint="0,0" EndPoint="0,1" >
                            <GradientStop Color="{StaticResource BorderColor}" Offset="0" />
                    <GradientStop Color="#FF383f47" Offset="1" />
                </LinearGradientBrush>
            </ControlTemplate.Resources>
            <Grid>

                <Border x:Name="outerBorder" CornerRadius="5" BorderThickness="1" BorderBrush="{StaticResource Brush_NavButtonBorder0}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True" />

                <Border Margin="1" CornerRadius="4" BorderThickness="1" BorderBrush="{StaticResource Brush_NavButtonBorder4}" Background="Transparent" SnapsToDevicePixels="True">
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Name="content"/>
                </Border>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <!--<Setter TargetName="outerBorder" Property="BorderBrush" Value="Gray" />-->
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetName="outerBorder"
                                        Storyboard.TargetProperty="(Border.BorderBrush).(GradientBrush.GradientStops)[0].(GradientStop.Color)"
                                        To="Gray"
                                        Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetName="outerBorder"
                                        Storyboard.TargetProperty="(Border.BorderBrush).(GradientBrush.GradientStops)[0].(GradientStop.Color)"
                                        To="{StaticResource BorderColor}"
                                        Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="{StaticResource Brush_NavButtonPressedBackground}" />
                    <Setter TargetName="content" Property="RenderTransform" >
                        <Setter.Value>
                            <TranslateTransform X="2.0" Y="2.0" />
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Opacity" Value="0.5" />
                </Trigger>
                <!--<Trigger Property="IsKeyboardFocused" Value="True">
                    <Setter Property="FocusVisualStyle" Value="{StaticResource MyFocusVisualStyle}" />
                </Trigger>-->
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

这将意味着每个按钮实例都有自己的 LinearGradientBrush 副本，并且您的鼠标悬停触发动画只会影响鼠标悬停的按钮。

同样，有许多不同的方法可以解决这个问题，但上面的代码片段是我能想到的最简单的给定您当前的代码。

# php - 如何卷曲并避免超时死亡（Twitter Down）

> ID：11144112
> 
> 赞同：0
> 
> 时间：2012-06-21T17:15:24.777
> 
> 标签：php, twitter, cron, memcached

Twitter 现在已经关闭，我网站的一个主页依赖于从 Twitter 获取数据（依赖是问题 - 它应该更多是一个附属功能，因为它只是显示来自其提要的关注计数）。

这是有问题的代码：

```
function socials_Twitter_GetFollowerCount($username) {
    $method = function () use ($username) { return file_get_contents('https://api.twitter.com/1/users/show.json?screen_name='.$username.'&include_entities=true'); };
    $json = cache('bmdtwitter', 3600, $method, false);
    $json = json_decode($json, true);

    return intval($json['followers_count']);
} 
```

有什么好的方法可以做到这一点，如果 Twitter 关闭（或在一段合理的时间内没有响应），我们的网站似乎没有关闭（我认为超时可能默认为 30-60 秒或更多）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:00:14.363

您可以向`file_get_contents`请求添加上下文并指定超时，以便如果请求未在该时间内完成，它将退出。如果您在页面加载时直接轮询，您可能需要考虑一个非常低的超时时间，例如 2-3 秒左右，因为大多数请求应该在这个时间限制内完成。

更好的选择是通过 cron 进行获取并让您的网页使用缓存的数据，但这里是使用`file_get_contents`.

```
function socials_Twitter_GetFollowerCount($username) {
    $method = function () use ($username) {
        $opts = array('http' =>
            array(
                'timeout' => 3
            )
        );
        $context = stream_context_create($opts);

        return file_get_contents('https://api.twitter.com/1/users/show.json?screen_name='.$username.'&include_entities=true', false, $context);
    };

    $json = cache('bmdtwitter', 3600, $method, false);
    $json = json_decode($json, true);

    return intval($json['followers_count']);
} 
```

请参阅[file_get_contents()](http://php.net/file_get_contents)、[stream_context_create()](http://www.php.net/manual/en/function.stream-context-create.php)和[Context options and parameters](http://www.php.net/manual/en/context.php)。

# iphone - 在 Tapku 图书馆日历中显示特定日期

> ID：11144116
> 
> 赞同：0
> 
> 时间：2012-06-21T18:05:54.217
> 
> 标签：iphone, calendar, tapku

我已经在基于奥运会的 iphone 应用程序中实现了 Tapku Library 日历。我想在其上启用一组日期（奥运日期），以便用户只能选择这些日期。

不知道如何在我的应用程序中实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:31:26.770

您需要使用以下委托方法来获取选定的日期

```
- (void)calendarMonthView:(TKCalendarMonthView *)monthView didSelectDate:(NSDate *)d 
{
    NSLog(@"calendarMonthView didSelectDate");
} 
```

# c++ - C ++比较两个字符串文字

> ID：11144118
> 
> 赞同：5
> 
> 时间：2012-06-21T18:06:04.113
> 
> 标签：c++, string-literals

`==`使用运算符（或）将字符串文字与另一个字符串文字进行比较时`!=`，结果是否定义明确？

例如，以下是否保证成立？

```
assert("a" == "a");
assert("a" != "b"); 
```

请不要说“使用 std::string”之类的东西。我只是想知道这个具体案例。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T18:08:18.613

> ```
> "a" == "a" 
> ```

这个表达式可能产生`true`or `false`; 没有任何保证。这两个`"a"`字符串文字可能占用相同的存储空间，也可能存在于内存中的两个不同位置。

我认为 C++ 标准中最接近的语言是：“是否所有字符串文字都是不同的（即，是否存储在不重叠的对象中）是实现定义的”（C++11 §2.14.5/12）。没有其他要求或限制，因此未指定结果。

> ```
> "a" != "b" 
> ```

这个表达式必须屈服`false`，因为这两个字符串文字不可能占据内存中的相同位置： `"a"[0] != "b"[0]`.

* * *

当您以这种方式比较字符串文字时，您实际上是在比较指向数组中初始元素的指针。

因为我们正在比较指针，所以关系比较（`<`、`>`、`<=`和`>=`）比相等比较（`==`和`!=`）更成问题，因为使用关系比较只能执行一组受限的指针比较。如果两个指针都是指向同一数组的指针或指向同一对象的指针，则只能进行关系比较。

如果两个`"a"`字符串字面量在内存中占据相同的位置，那么`"a" < "a"`将是明确定义的并且会 yield `false`，因为两个指针都指向`'a'`同一个数组的初始元素 ( )。

但是，如果两个`"a"`字符串字面量在内存中占据*不同*`"a" < "a"`的位置，则结果是不确定的，因为被比较的两个指针指向完全​​不相关的对象。

因为`"a"`and`"b"`永远不能在内存中占据相同的位置，所以`"a" < "b"`总是有未定义的行为。其他关系比较运算符也是如此。

如果您出于某种原因想要对两个字符串文字进行关系比较并获得明确定义的结果，则可以使用`std::less`比较器，它为所有指针提供严格-弱排序。还有`std::greater`, `std::greater_equal`, 和`std::less_equal`比较器。鉴于具有相同内容的字符串文字可能比较不相等，我不知道为什么有人会想要这样做，但你可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:33:39.807

这个想法是在 C++ 中字符串文字是数组。由于数组没有为它们定义比较运算符，因此使用下一个最佳拟合比较它们 - 指针比较运算符，因为数组将隐式衰减为指针，因此任何比较都比较地址而不是内容。由于 "a" 和 "b" 不能位于同一内存位置，因此 "a" != "b" 是一个真正的断言。它还形成一个有效的静态断言。不能对“a”==“a”做出这样的保证，尽管带有 -fmerge-constants（隐含在 -O1 处）的 GCC 可以产生相当强的概率，并且 -fmerge-all-constants 可以给你一个保证（可能导致不合格行为）。

如果您碰巧想要基于内容的比较，您始终可以使用`assert(!strcmp("a", "a"))`. 或者，您可以将某种基于 constexpr 的 strcmp 用于静态断言：

```
constexpr bool static_strequal_helper(const char * a, const char * b, unsigned len) {
   return (len == 0) ? true : ((*a == *b) ? static_strequal_helper(a + 1, b + 1, len - 1) : false);
}

template <unsigned N1, unsigned N2>
constexpr bool static_strequal(const char (&str1)[N1], const char (&str2)[N2]) {
   return (N1 == N2) ? static_strequal_helper(&(str1[0]), &(str2[0]), N1) : false;
}

static_assert(static_strequal("asdf", "asdf"), "no error - strings are equal");
static_assert(static_strequal("asdf", "jkl;"), "strings are not equal");
assert(!strcmp("asdf", "jkl;")); //no compile error - runtime error
//cannot use strcmp in static assert as strcmp is not constexpr... 
```

然后，使用 g++ -std=c++0x （或 -std=c++11 用于 gcc >= 4.7）进行编译，然后...

```
error: static assertion failed: "strings are not equal" 
```

# html - CSS浮动重叠问题

> ID：11144119
> 
> 赞同：1
> 
> 时间：2012-06-21T18:06:12.017
> 
> 标签：html, css, css-float

任何人都可以帮助解决基本的 HTML/CSS 浮动问题吗？我有一个带有浮动左 div 框的常规 div。我想要一个带边框的 h1，但它与浮动左 div 重叠。有小费吗？示例代码显示下面的问题。

[编辑：这是问题的图片：http: [//anony.ws/i/2012/06/21/UCHvY.png](http://anony.ws/i/2012/06/21/UCHvY.png)。我希望最终结果只是允许我将蓝线用于 h1 而不会在左侧重叠。左栏的高度是动态的]

```
<style>
.wrapper {width:600px;}
.boxcolumn {
            float:left;
    width:150px;
    border:1px red solid;
    margin-right:12px;
}
h1 {border-bottom:1px #CCC solid;} 
```

```
<div class="wrapper">
<div class="boxcolumn">
Left Column is not a fixed height. Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a 
</div> 

<h1>Some Title Goes Here</h1>
blah blah blah blah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blah

<h1>Some Title Goes Here</h1>Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:13:35.910

试试这个......你的 h1 标签也需要向左浮动，并且它应该有一个宽度。它也应该出现在您的框列之前。

```
<style type="text/css">
.wrapper {width:600px;}
.boxcolumn {
    float:left;
    width:150px;
    border:1px red solid;
    margin-right:12px;
}
h1 {border-bottom:1px #CCC solid;float:left;width:100%;}
</style>

<div class="wrapper">
<h1>Some Title Goes Here</h1>
<div class="boxcolumn">
Left Column is not a fixed height. Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a 
</div> 

blah blah blah blah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blah
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:21:26.700

尝试使用标题和文本制作另一个 div 并将其浮动在它旁边：

```
<div class="wrapper">
   <div class="boxcolumn">
       Left Column is not a fixed height. Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a fixed height.Left Column is not a 
   </div> 

   <div class="title">
       <h1>Some Title Goes Here</h1>
       blah blah blah blah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blah
   </div>
</div> 
```

您需要为标题设置宽度：

```
 .title {
        float:left;
        width:400px;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:22:04.583

您可以尝试几种选择。

其中之一是将您的`h1`和文本包装成一个新的`div`. 然后给它`div`一个`float: left;`和`width: 436px;`（600 - 150 - 12 - 2*1 边框）。这可确保您的内容被包裹在 . 的右侧`boxcolumn`并保持这种方式，即使您的内容比`boxcolumn`.

```
<div class="content">
<h1>Some Title Goes Here</h1>
<p>blah blah blah blah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blahblah blah blah</p>
</div> 
```

CSS：

```
.content{ float:left; width: 436px; } 
```

完整的例子可以在[这里看到](http://jsfiddle.net/KsBAW/)

# windows - R 脚本的 GUI 前端

> ID：11144122
> 
> 赞同：7
> 
> 时间：2012-06-21T18:06:27.817
> 
> 标签：windows, r, user-interface

我们有一组 R 脚本，它们处理一些数据并产生一些结果。我们想让这些脚本对基本用户可用，这些脚本不用于 R 的命令行 - 我们希望**为他们提供一些不错的 GUI，这将允许：**

*   轻松从 MS Excel/Access 导入/导出数据（如果可能，还支持复制/粘贴）
*   允许用户更改过程的设置/参数
*   应该在 MS Windows 中运行。

**是否有任何简单的脚本环境可以尽可能快地为我们的 R 脚本开发如此好的 GUI？**不一定要用 R 语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:42:23.803

有 RExcel 工具将 R 作为 Excel 插件合并，因此主界面是 Excel，R 在后台进行计算。您可以设置一个工作表，以便用户输入他们的数据，然后突出显示一个框，然后选择一个菜单项或单击一个按钮，结果将放置在另一个单元格（或一组单元格）中。但是请注意，RExcel 和它用户的通信程序不是免费的。

另一种选择是在 R 中创建自己的 gui 函数，然后在启动 R 时自动运行该 gui（请参阅？STARTUP）并在用户计算机上进行设置。我之前为对 R 一无所知的客户做过这个，他们只是双击桌面上的图标（Windows），在打开主 R 窗口时最小化它，与我编程运行的 gui 交互（我使用了 tcltk，但还有其他的）并看到了提供的输出。

您可以通过让用户选择数据并单击复制来从 Excel 复制数据，然后在您的程序运行`newdata <- read.delim('clipboard')`中，数据将位于名为“newdata”的数据框中，您可以使用`write.table(outdata, file='clipboard', delim='\t')`从数据框“outdata”中放置数据' 到剪贴板上，然后用户可以将其粘贴到 Excel（或其他程序）中。

还有一个 Rcmdr 包，它为 R （基本工具）提供了一个通用的 GUI，但也有一个机制，您可以在其中创建自己的菜单和对话框以与 GUI 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T22:17:39.900

在[这个问题](https://stackoverflow.com/q/22723673/684229)中，我只是围绕 R 闪亮：

[http://www.rstudio.com/shiny/](http://www.rstudio.com/shiny/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:21:39.770

您没有说它必须是桌面程序。所以`Jeroen Ooms'`热闹[的 openCPU](http://public.opencpu.org/pages/)项目可能值得一看。他基本上称之为云中的统计计算。这些家伙最近真的很活跃（现在我再次检查了网站，我意识到它又是新的）。

此外，他早期的作品[stockplot](http://rweb.stat.ucla.edu/stockplot/)或[ggplot demo](http://labs.dataspora.com/ggplot2/)非常有趣。尤其是简单的看一下，`stockplot`你很快就会对他的方法有一个印象。

Afaik，使用 RApache，并使用`EXTJS`. 我认为文档可以比我更好地解释这种方法。

我认为网络服务器上的 R - 特别是对于 Intranet 使用是一个很好的解决方案（取决于您公司的规模），因为：

*   它独立于平台，客户可以使用他们喜欢的浏览器
*   脚本甚至整个 R 包的本地开发和部署都很容易
*   报告/发布是 R 的一大优势，并且可以使用基于 Web 的体系结构来促进（参见类似`knitr`或`sweave`

# javascript - 选择的多选在第一次单击时不显示下拉列表

> ID：11144123
> 
> 赞同：0
> 
> 时间：2012-06-21T18:06:33.480
> 
> 标签：javascript, jquery, jquery-ui, jquery-chosen

当从多选中删除所有选择选项时，它会显示数据占位符值，这很好，但是第一次单击选择框，它不会拉下拉。第二次单击多选工作正常。

这个问题在所有浏览器中都会发生。我在下面链接中显示的演示中也发现了同样的问题。

这个问题有什么解决办法吗？

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:19:48.187

它可能只是它的功能。清除选项后，他们可能希望您双击它以清除文本。

但是，如果您想报告该错误，我建议您在他们的 github 页面上进行。

[https://github.com/harvesthq/chosen/issues](https://github.com/harvesthq/chosen/issues)

# wcf - 如何从 hyper-v 虚拟机连接到 localhost 服务？

> ID：11144124
> 
> 赞同：5
> 
> 时间：2012-06-21T18:06:36.787
> 
> 标签：wcf, virtual-machine, hyper-v

我有一个在“http://localhost:12345/ServiceName”上运行的 WCF 服务。在 Windows 8 公共测试版中，我还有一个在 hyper-v 下运行的 VM。有什么方法可以从 VM 连接到此服务？我似乎无法在 hyper-v 管理器中设置桥接网络连接。另一种方法是将 WCF 服务绑定到 Win8 机器名称或 IP，但我不知道如何从 VM 端找出该端点是什么。可以以任何需要的方式更改 WCF 服务...

任何帮助将非常感激！

非常感谢，乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-17T13:11:21.217

不确定这是否适用于 Windows VM，但我设法从 Ubuntu VM 内部打开主机的 URL：

1.  在主机上禁用防火墙或添加规则以允许连接到相应的端口（在您的情况下为 12345）。
2.  在 VM 编辑`/etc/hosts`上，替换`127.0.0.1 localhost`为`IP_OF_HOST localhost`.

现在[http://localhost:12345/ServiceName](http://localhost:12345/ServiceName)应该从 VM 内部打开。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-07T05:45:21.313

您可以在 Hyper-V（虚拟交换机管理器）中创建虚拟交换机，然后您可以将其连接到您的虚拟机（右键单击虚拟机 -> 设置 -> 创建 Legaci 网络适配器 -> 将虚拟交换机连接到它）。之后，您应该在 VM 中为您的操作系统安装到 Hyper-V 的集成。然后您可以连接到虚拟机中的虚拟交换机。之后，您也可以访问互联网。你的主机有它。在 Web 浏览器中输入您的主机 IP 地址，您可以访问主机中的任何服务

您还需要在主机命令 shell 上以管理员身份运行，`netsh http add urlacl url=http://*:12345/ user=Everyone`其中 12345 是您的服务的端口号。

# sql-server - 如何在子查询中返回多个结果？

> ID：11144125
> 
> 赞同：2
> 
> 时间：2012-06-21T18:06:43.263
> 
> 标签：sql-server, sql-server-2008-r2, subquery

我有一个`visitor`看起来像这样的表：

```
VID    Name      Address        DOB
001    Bob       101 St         03/05/2001
002    James     505 Rd         02/06/1985
003    Jill      201 Place      04/06/1970 
```

还有一个`visits`看起来像这样的表：

```
VID    Date          Reason
001    05/07/2012    Family
001    06/01/2012    Family
003    03/02/2011    Other 
```

我想在 VID 上做这两者之间的连接查询（我已经做过），但也让查询显示访问的所有（多个）结果。所以结果看起来像：

```
Name         DOB              Visits
Bob          03/05/2001       05/07/2012 Family, 06/01/2012 Family
James        02/06/1985
Jill         04/06/1970       03/02/2011 Other 
```

这可能吗？我尝试了一个子查询，例如：

> SELECT Name, DOB, (SELECT Date, Reason FROM visits AS H WHERE H.VID=visitor.VID) As Visits FROM visitor;

但这给了我明显的`Subquery returned more than 1 value`错误。数据将由 PHP 解析，但我希望在一个查询中完成此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:12:41.183

您可以使用`FOR XML PATH`构造将结果连接到一列

```
SELECT   Name
         , DOB
         , STUFF((SELECT ', ' 
                         + CONVERT(VARCHAR(16), H.Date, 101)
                         + ' ' 
                         + H.Reason 
                  FROM   visits AS H 
                  WHERE  H.VID = visitor.VID 
                  FOR XML PATH('')), 1, 2, '')
FROM     visitor; 
```

请注意，转换支持各种日期格式。我`101`在示例中使用了转换为`mm/dd/yyyy`.

查看[MSDN](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)以了解 convert 支持的所有样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:17:02.123

您必须加入这两个表，然后在 php.ini 中进行处理。所以

SELECT a.Name, a.DOB, b.Date, b.Reason FROM visitor a, 访问 b where a.VID=b.VID order by 1,2 ;

然后，您只需浏览记录并在前两列之一发生更改时开始新行。

# java - JSF：在方法的返回对象上调用方法

> ID：11144132
> 
> 赞同：2
> 
> 时间：2012-06-21T18:07:26.993
> 
> 标签：java, jsf-2, el, method-call

我偶然发现了一个我似乎无法用我对 jsf 的基本知识自己解决的问题。

我有一个由**userSession**引用的会话范围对象。

因此，如果我想获得属性**loginTimestamp**，我只需调用**userSession.loginTimestamp**，这没问题并且工作得很好。

现在我还有一个**getLoggedInUser**方法，它给了我一个用户类型的对象。在那个对象上，我可以调用一个方法**getNickname**，它应该给我一个字符串。

问题是我想调用类似的东西

```
<div id="login">
    <h:outputText value="Welcome #{userSession.getLoggedInUser.getNickname}" />
    <h:form id="logoutForm">
        <h:commandButton class="Submit" value="logout"
            action="#{Logout.logout}" />
    </h:form>
</div> 
```

不，getLoggedInUser 方法没有属性 loggedInUser。但是我如何在值属性中调用该方法并在该返回类型上调用方法呢？

也许这甚至是不可能的，我在这里错过了一些至关重要的东西。但是，总是为您想要使用的任何东西设置一个属性而不是能够以这种方式分解它，这不是很烦人吗？

已经感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:14:17.930

丢失`get`前缀。这应该有效：

```
<h:outputText value="Welcome #{userSession.loggedInUser.nickname}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:15:00.020

用户会话

```
public String getLoggedUserNickname(){
   return getLoggedInUser().getNickname();
} 
```

看法

```
<h:outputText value="Welcome #{userSession.loggedUserNickname}" /> 
```

要不就

```
<h:outputText value="Welcome #{userSession.loggedInUser.nickname}" /> 
```

--

`myProp`例如，每当您调用属性时，`userSession.myProp`它都会寻找`getMyProp()`功能。区分大小写

# iphone - iPhone中任何音频的波形表示

> ID：11144139
> 
> 赞同：1
> 
> 时间：2012-06-21T18:07:47.207
> 
> 标签：iphone, objective-c, waveform

我必须在我的应用程序中为音频文件 (CMK.mp3) 绘制波形。为此，我尝试了此[解决方案](https://stackoverflow.com/questions/5032775/drawing-waveform-with-avassetreader/7388332#7388332)

由于此解决方案使用的是 AVAssetreader，因此显示波形需要花费两个时间。

谁能帮忙，有没有其他方法可以快速显示波形？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:21:56.717

AVAssetReader 是读取 AVAsset 的唯一方法，因此无法解决。您将需要调整代码以处理它，而不会产生不必要的开销。我还没有尝试过该代码，但我打算用它来构建一个示例项目，以便在我有时间时在 GitHub 上共享，希望很快。

我调整它的方法是执行以下操作：

1.  消除所有 Objective-C 方法调用并仅使用 C
2.  将所有工作移至主队列之外的辅助队列，并使用块回调完成的工作

渲染波形的一个障碍是一次不能运行多个 AVAssetReader，至少在我上次尝试时是这样。（可能随着 iOS 6 的变化而改变）一个新的阅读器取消另一个并中断播放，所以你需要按顺序完成你的工作。我用队列做到这一点。

在我构建的音频应用程序中，它将 CMSampleBufferRef 读取到可以容纳多个样本缓冲区的 CMBufferQueueRef 中。（请参阅 AVAssetReader 上的 copyNextSampleBuffer）您可以配置队列以在 AVAssetReader 完成读取资产后为您提供足够的时间来处理波形，以便当前播放不会在您开始读取更多缓冲区之前耗尽 CMBufferQueueRef 的内容下一首曲目。当我尝试时，这将是我的方法。我只需要注意不要通过使缓冲区太大或使缓冲区太大而导致播放问题来使用太多内存。我只是不知道处理波形需要多长时间，我会在我的旧 iPod 和 iPhone 4 上对其进行测试，然后再在我的 iPhone 5 上进行测试，看看它们是否都表现良好。

一定要尽可能靠近 C。在此处理期间对 Objective-C 资源的调用将导致潜在的线程切换和其他运行时开销成本，这些开销非常大，足以引起注意。你会想要避免这种情况。我可以做的是设置 Key-Value Observing (KVO) 来触发 AVAssetReader 快速启动下一个任务，这样我就可以保持音轨之间的无间隙播放。

一旦我开始我的音频实验，我会将它们放在 GitHub 上。我创建了一个存储库，我将在其中完成这项工作。如果你有兴趣，你可以“观看”那个 repo，这样你就会知道我什么时候开始提交更新。

[https://github.com/brennanMKE/Audio](https://github.com/brennanMKE/Audio)

# hl7 - 可以将附件拆分为 HL7 文件并在传输消息后重新创建吗？

> ID：11144140
> 
> 赞同：1
> 
> 时间：2012-06-21T18:07:52.803
> 
> 标签：hl7, hapi

我正在使用 HAPI 解析器来解析来自我公司的 HL7 文件。我们正在努力通过 HL7 文件的 OBX 段移动附件。我的堆栈使用的一些验证器不允许超过 64k 的附件通过。有没有办法获取多个 OBX 段并将附件分解，然后在它通过电线到达另一侧后重新创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-19T22:28:32.003

HL7 确定了两种可能的情况，并为每种情况使用延续指针协议。这些情况是：

*   单个段可能太大。HL7 使用“ADD”段来处理将单个段分成几个更小的段。
*   单个 HL7 消息可能太大。HL7 使用 DSC 段（连同 MSH-14 字段）和延续协议来处理消息分段。

HL7v2 规范的第 2 章“控制”更详细地讨论了它。

# java - 将 JRadioSelection 传递给 ActionLIstener 类

> ID：11144143
> 
> 赞同：0
> 
> 时间：2012-06-21T18:07:54.993
> 
> 标签：java, swing, jradiobutton, buttongroup

对于我的应用程序，我创建了两个`JRadioButton`分组为“选择” `ButtonGroup`。我添加了一个`ActionListener`名为“SelectionListener”。当我检查是否`RadioButton`使用`isSelected()`选择了 my 时，似乎我的选择没有传递给`ActionListener`.

```
public static void main(String[] args) {
    JRadioButton monthlyRadioButton = new JRadioButton("Monthly Payment", true);
    JRadioButton loanAmountButton = new JRadioButton("Loan Amount");
    ButtonGroup selection = new ButtonGroup();
    selection.add(monthlyRadioButton);
    selection.add(loanAmountButton);
    monthlyRadioButton.addActionListener(new SelectionListener());
    loanAmountButton.addActionListener(new SelectionListener());
} 
```

选择监听器.java

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

class SelectionListener implements ActionListener {
    public void actionPerformed(ActionEvent event){
      if(event.getSource() == monthlyRadioButton)
        System.out.println("You clicked Monthly");
      else
        System.out.println("You clicked Loan Amount");

    }
} 
```

参数`monthlyRadioButton`没有传递给我的`SelectionListener`班级。我收到一个错误，它没有得到解决。

**如何将我的`monthlyRadioButton`主要方法传递给我的`SelectionListener`班级？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:13:50.953

您的汽车检索正在处理的事件的发送者。

就像是：

```
class SelectionListener implements ActionListener {
    private JComponent monthlyRadioButton;
    private JComponent loanAmountButton;

    public SelectionListener(JComponent monthlyRadioButton, JComponent loanAmountButton) {
        this.monthlyRadioButton = monthlyRadioButton;
        this.loanAmountButton = loanAmountButton;
    }

    public void actionPerformed(ActionEvent event){
        if(event.getSource() == monthlyRadioButton)
            System.out.println("You clicked Monthly");
        else if(event.getSource() == loanAmountButton)
            System.out.println("You clicked Loan Amount");
    }
} 
```

在您的主要方法上，您可以像这样实例化它：

```
 monthlyRadioButton.addActionListener(new SelectionListener(monthlyRadioButton, loanAmountButton)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:16:23.147

You create a new variable in `main` named `monthlyRadioButton` (thius is local to `main`, not visible from anywhere else), but check another (not listed in your code) in `actionPerformed`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:16:48.997

The `actionListeners` registered on `JRadioButton` are called before the radio button becomes selected. That is why your `isSelected()` invocations return `false` (or to be more precise: they return the actual value, before the change).

If you want to handle state changes, you should register a [`ChangeListener`](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#addChangeListener%28javax.swing.event.ChangeListener%29).

# ssas - 新度量在仪表板设计器中不可见 - SharePoint 2010

> ID：11144145
> 
> 赞同：1
> 
> 时间：2012-06-21T18:07:56.570
> 
> 标签：ssas, cube, bids, dashboard-designer, measures

我在 Sql Server 分析服务中创建了一个多维数据集。我有一个名为 Orders 的表，其中有几个列，其中 Quantity、Price 和 Cost 很重要。我已经将这些字段添加为多维数据集中的度量，我可以在仪表板设计器中看到这些度量。

后来，我添加了三个计算列，如下所示。

1.  Sales_Amount = 数量 * 价格
2.  Cost_Amount = 数量 * 成本
3.  利润 = 数量 *（价格 - 成本）

我还能够将这些新的计算列添加为多维数据集中的度量。后来我部署了多维数据集，但这些新度量在仪表板设计器中不可见。

我重新部署了多维数据集，删除了仪表板设计器中的连接并重新读取，创建了一个新的工作区，但没有任何帮助，我不知道该怎么做。

请帮忙。

*   梅林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T00:29:52.457

您是否尝试过关闭仪表板设计器并重新打开它？我知道这听起来像是一个蹩脚的问题，但我们多次面临这个问题，解决方案似乎是完全关闭仪表板设计器并再次重新打开它。

# gnome - 对话不会在 Vala 结束

> ID：11144150
> 
> 赞同：1
> 
> 时间：2012-06-21T18:08:11.577
> 
> 标签：gnome, vala, gtk3

`dialog.run()`出于某种原因，即使通过标准调用显示，我的程序中的对话框也不会关闭。它们显示并返回代码，但按钮不会关闭它们。这是发生这种情况的一些代码：

```
//Inside constructor for my window class
load_dlg = new FileChooserDialog("Select file to open...", this,
FileChooserAction.OPEN,
Gtk.Stock.CANCEL, ResponseType.CANCEL,
Gtk.Stock.OPEN, ResponseType.ACCEPT, null);
//...
//Inside an event handler method
if(load_dlg.run() == Gtk.ResponseType.ACCEPT){
    image_backend = new Pixbuf.from_file(load_dlg.get_filename()); // This works, and it's in a try clause. 
```

一切都很好，只是返回代码后对话不会关闭。与 相同`AboutDialog`。不过，在 Python 中一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T05:22:48.510

你可以刚`load_dlg.hide()`回来`load_dlg.run()`。

# android - 重新启动时重新验证 - Android

> ID：11144155
> 
> 赞同：2
> 
> 时间：2012-06-21T18:08:23.790
> 
> 标签：android, android-activity, lifecycle, android-lifecycle, activity-lifecycle

每次调用 onRestart 时我都需要重新验证用户凭据（通常这意味着用户已锁定和解锁屏幕或将其置于后台然后返回）。

所以我这样做了：

```
@Override
protected void onRestart() {
    super.onRestart();

    Intent intent = new Intent(this, LoginActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.setAction(LoginActivity.REAUTHENTICATE);
    startActivity(intent);
} 
```

这有效，显示了 LoginActivity，但是当它完成时，再次调用第一个 Activity 的 onRestart 并再次打开 LoginActivity。

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:39:08.740

好吧，我用这个来解决它：

```
 private static final int REAUTHENTICATE = 80;

    private boolean authenticated;

    @Override
    public void onRestart() {
        if(authenticated)
            return;

        Intent intent = new Intent(this, LoginActivity.class);
        intent.setAction(LoginActivity.REAUTHENTICATE);
        startActivityForResult(intent, REAUTHENTICATE);
    }

    @Override
    public void onStop() {
        authenticated = false;
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(requestCode == REAUTHENTICATE)
            authenticated = true;
    } 
```

好吧，这不是我所期望的，但有效，我希望有人找到更好的解决方案。导致 onRestart 在 onActivityResult 之后不断被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:36:22.800

直到从任何人那里得到一个好的解决方案/建议都可以尝试这个。

```
1- Put a boolean variable in shared pref named AuthentacationNeeded
2- get that in OnRestart with default value true 
3-if value is true then only startActivity
4- put that variable true in onpuase 

in Login activity 
4-   put that variable false Before finish() 
```

# javascript - 如何访问以“[]”结尾的复选框组

> ID：11144158
> 
> 赞同：1
> 
> 时间：2012-06-21T18:08:26.730
> 
> 标签：javascript, checkbox

我有一组名为 modules[] 的复选框。我想通过 JavaScript 访问它们。我想将那里的值与其他一些值进行比较，如果它们匹配，请检查它们。以下是我的代码。

```
<script type="text/javascript">
        function check_boxes(){
            var chkd_vals = <?php echo json_encode($loaded); ?>;
            for(var i = 0; i < document.modules_form.modules[].length; i++){
                for(var j = 0; j < chkd_vals.length; j++){
                    if(chkd_vals[j] == document.modules_form.modules[][i].value){
                        document.modules_form.modules[][i].checked = true;
                    }
                }
            }
        }
 </script> 
```

上面的代码不起作用。我怎么可能做到这一点。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:11:05.200

尝试

```
document.modules_form["modules[]"] 
```

因为您需要防止 JS 将大括号解释为索引。

# javascript - Javascript数组未定义的值

> ID：11144161
> 
> 赞同：1
> 
> 时间：2012-06-21T18:08:55.940
> 
> 标签：javascript, arrays, undefined

我有一些代码在没有意义的数组中产生未定义的值。

这是代码：

```
gcc_py = 8;
gcc_pyd = 12;
var aci = 360/gcc_pyd;
var parcalar = new Array();
var renkler = new Array();

for(var i = 0;i<gcc_pyd;i++){   
    parcalar.push(aci);
    renkler.push('#000');
}

console.log(parcalar);
console.log(renkler); 
```

console.log(parcalar) 输出：

> [ 对象 , 对象 , 对象 , 对象 , 对象 , 对象 , 对象 , 对象 , 对象 , 对象 , 未定义 × 2]

您对数组中未定义的值有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:23:27.380

我猜你之后会改变数组。控制台将反映这些变化，例如然后显示对象而不是数字和字符串。此外，当从数组中删除属性时（通过`delete`，请参阅[在 JavaScript 中删除数组元素 - 删除与拼接](https://stackoverflow.com/q/500606/1048572)），它们仍将显示为已初始化但为空（请参阅[JavaScript 中的“未定义 x 1”是什么？](https://stackoverflow.com/q/10683773/1048572)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:13:19.310

我的输出显示

```
[30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30]

["#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000"] 
```

也许您在代码中的其他地方向 Array 添加了一些 .prototype 内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:15:33.713

当我运行相同的配置时：

```
<script>
  var gcc_py = 8;
  var gcc_pyd = 12;
  var aci = 360 / gcc_pyd;
  var parcalar = new Array();
  var renkler = new Array();

  for(var i = 0; i < gcc_pyd; i++){
      parcalar.push(aci);
      renkler.push('#000');
  }

  console.log(parcalar);
  console.log(renkler);
</script> 
```

我得到：

```
[30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30]
["#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000", "#000"] 
```

不知道你看到了什么。

# java - UML图中的依赖关系

> ID：11144168
> 
> 赞同：0
> 
> 时间：2012-06-21T18:09:27.373
> 
> 标签：java, uml

在 UML 中，如果有一个类 A 有一个 B 类型的对象作为成员，那么 A 依赖于 B。
但我不明白即使 A 没有任何 B 类型的字段，依赖项是否有效，但它使用在它的方法中有一个 B 类型的对象，例如：

```
public class A
{
    A()
    {}
    public void print()
    {
        B b=new B();
        System.out.println(b);
    }
} 
```

这种情况，是否意味着A依赖B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:12:46.127

是的，为了正常运行，这是一种`A`依赖。`B`此外，如果它具有 type 的成员`B`，或者它继承自`B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:13:42.680

这一切都取决于“依赖”是什么意思。

就 Java 而言，当 A 的代码在没有 B 存在的情况下将无法编译或运行时，A 依赖于 B。

就 UML 而言，“依赖”不是一个使用的术语。例如，如果您在 UML 图中有一个从 A 类到 B 类的箭头，这意味着 A 在某种程度上知道 B。这取决于您选择的编程语言如何实现。

**警告：**高度自以为是的声明如下！

避免像瘟疫一样的 UML。从长期使用它的人那里拿走它。

# android - 如何从短信中获取文本？

> ID：11144170
> 
> 赞同：-4
> 
> 时间：2012-06-21T18:09:32.650
> 
> 标签：android, sms

> **可能重复：**
> [如何在 Android 中以编程方式从收件箱中读取 SMS 消息？](https://stackoverflow.com/questions/848728/how-can-i-read-sms-messages-from-the-inbox-programmatically-in-android)

我想对我的应用程序进行编程以读取短信，并且需要从发送的消息中读取号码。

但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:16:25.503

我相信这已经被问过了。看这里：

[如何在 Android 中以编程方式从设备读取 SMS 消息？](https://stackoverflow.com/questions/848728/how-can-i-read-sms-messages-from-the-inbox-programmatically-in-android)

欲了解更多信息，请参阅：

[http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

[http://androidsourcecode.blogspot.com/2010/10/android-reading-inbox-sms.html](http://androidsourcecode.blogspot.com/2010/10/android-reading-inbox-sms.html)

# jquery - 向用户展示多对多表单的最佳方法

> ID：11144177
> 
> 赞同：0
> 
> 时间：2012-06-21T18:10:01.020
> 
> 标签：jquery, ruby-on-rails, forms, html

我有一个关于如何根据与用户的多对多关系最好地呈现表单的问题。我将解释我的模型以帮助了解我需要呈现哪些数据。

```
Models and Relationships
   Shipment  has_many :products :through => :shipment_products
   Product   has_many :shipments :through => :shipment_products
   ShipmentProducts belongs_to :shipment,  belongs_to :product 
```

所以基本上我有一个装运表格，其中包含创建提单所需的数据。除了该表格之外，我还需要选择多个产品及其数量。过去我在使用拖放时遇到过类似的问题，但我对体验有点麻烦感到不满意。在这种情况下，我相信容器中列出的产品太多而无法拖放。

所以我需要一个表格，让我可以填写货运数据、搜索产品、选择产品、添加数量并将其与货运相关联。设计表单以便将这些项目清楚地呈现给最终用户的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:28:21.553

一个流行的解决方案是 TokenInput，它是一个 jQuery 插件，通过 JSON 与您的应用程序通信。你可以在这里得到它：http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

还有一个 railscast 处理这个问题....

[http://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)

希望这对你有用，...

# javascript - 如何使用数据绑定从 div 获取文本？

> ID：11144179
> 
> 赞同：1
> 
> 时间：2012-06-21T18:10:10.017
> 
> 标签：javascript, greasemonkey

```
<div class="col-num-two" data-bind="CurrentJob.addr">I need this text</div> 
```

数据是 AJAX 格式的，我需要更改里面的文本。我只是使用 1 秒超时，但是由于没有 'id' ，我该如何选择该 div ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:35:05.610

超时触发后，使用如下代码：

```
var currentJobAddr  = document.querySelector ("div[data-bind='CurrentJob.addr']");
if (currentJobAddr)
    currentJobAddr  = currentJobAddr.textContent;
else
    alert ('Current job addr not found.') 
```

[**请参阅 jsFiddle 的实际代码。**](http://jsfiddle.net/vwsXY/)

# base64 - 艺术家与 base 64 合作

> ID：11144181
> 
> 赞同：1
> 
> 时间：2012-06-21T18:10:25.600
> 
> 标签：base64

嗨，我对 base64 代码相当陌生，可以使用一些信息/帮助等。我最近在将我的照片转换为代码时使用它，作为关于我的雕塑的实验的一部分，我使用在线将一张照片转换为 152 页的 base 64转换器，只是为了开始。我想知道如何才能扭转这种情况，而且如果我编辑掉一些代码，图像会改变还是根本不会转换！？就像我说的，我有兴趣用它来帮助我的实验。感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:17:21.377

Base64 解码函数将对其进行解码。如果您删除一些 base64 代码，它可能无法转换回有效的图像或根本无法转换为有效的 base64 代码，具体取决于您删除的程度。取决于图像最初的压缩方式，它可能会给你一些东西，但结果将是不可预测的......所以你永远不会知道最终产品的变化结果。base64 标准的一部分涉及填充宽度（这就是为什么某些字符串最多以 2 = 符号结尾的原因）。

# c++ - 传递一个向量 ::迭代器

> ID：11144183
> 
> 赞同：-1
> 
> 时间：2012-06-21T18:10:26.367
> 
> 标签：c++, vector, iterator

我有一个变量 f 声明为 vector::iterator 并且我让它指向一个 c_str() 因为我试图从一个目录中读取文件。代码一开始是编译的，但我的函数都没有被调用。显示我可以编写我的类和函数以允许我传递它并在另一个函数中使用它：这是 int main() 中代码的一部分。

```
int main() {
    vector<string> files;

    if (d) {
        //we successfully opened the directory
        //while there's still something we haven't looked at
        while ((dir = readdir(d)) != NULL) {
            //get the name of that thing
            string filename = dir->d_name;
            //filter out what we don't want
            if (filename == "." ||             //filter out current dir
                    filename == ".." ||            //filter out parent dir
                    filename.find(".csv") == string::npos)   //here is where you set up the match
                continue;

            //and add what we do want to our files data structure
            files.push_back(basepath + "/" + filename);
        } 
    }

    map<string, int> foo;

    double fail = 0;

    for (vector<string>::iterator f = files.begin(); f != files.end(); ++f) {
        Extract_Organize process;
        cout << "What";
        process.transform();
        process.create_file();
        cout << "Finished!\n";
    }
    return 0;
}

class Extract_Organize {
    public:
        Extract_Organize; 
        void transform();
        void create_file();
        string double_integrate(int, int); 
};
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:16:42.520

我猜问题是：

```
Extract_Organize process(); 
```

什么时候应该

```
Extract_Organize process; 
```

StackOverflow 上有很多*关于*最**棘手的解析**`process`的问题，但最重要的是你的代码声明了一个调用的函数而不是创建一个对象`Extract_Organize`。

# javascript - 如何保存带有缩进的 MSXML2.DomDocument？（我认为它使用 MXXMLWriter）

> ID：11144192
> 
> 赞同：9
> 
> 时间：2012-06-21T18:11:08.593
> 
> 标签：javascript, jscript, wsh, msxml6

我有一个 MSXML2.DomDocument 实例。

我挥手保存它，缩进。

此代码有效，但不缩进：

```
var dom = new ActiveXObject("MSXML2.DomDocument");
// fiddle with dom here
dom.save(filename); 
```

我想我可以使用 MXXMLWriter 对象来注入缩进。

如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T19:24:11.543

这应该做。

```
function saveDomWithIndent(dom, filename) {
    var writer =  new ActiveXObject("MSXML2.MXXMLWriter"),
        reader = new ActiveXObject("MSXML2.SAXXMLReader"),
        fso = new ActiveXObject("Scripting.FileSystemObject"),
        textStream = fso.CreateTextFile(filename, true);
    writer.indent = true;
    writer.omitXMLDeclaration = true;
    reader.contentHandler = writer;
    reader.parse(dom);
    textStream.Write(writer.output);
    textStream.Close();
} 
```

像这样使用它：

```
var root, node, newnode, 
    dom = new ActiveXObject("MSXML2.DOMDocument.6.0");
dom.async = false;
dom.resolveExternals = false;
dom.load(fullpath);
root = dom.documentElement;
node = root.selectSingleNode("/root/node1");
if (node !== null) {
    newnode = dom.createElement('node2');
    newnode.text = "hello";
    root.appendChild(newnode);
    saveDomWithIndent(dom, fullpath);
} 
```

我不知道如何调整缩进级别。它总是以 . 缩进`tab`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T17:23:33.483

还有另一种美化 xml 输出的方法，另外您可以手动调整缩进级别：**XSL**。

```
var adSaveCreateOverWrite = 2
var Indent = new ActiveXObject("MSXML2.DomDocument");
    Indent.async = false;
    Indent.resolveExternals = false;
    Indent.load("indent.xsl");
var Doc = new ActiveXObject("MSXML2.DomDocument");
    Doc.async = false;
    Doc.resolveExternals = false;
    Doc.load("dirty.xml");
with(new ActiveXObject("ADODB.Stream")){
    Charset = "utf-8";
    Open();
    WriteText(Doc.transformNode(Indent));
    SaveToFile("pretty.xml", adSaveCreateOverWrite);
    Close();
} 
```

**缩进.xsl**

```
<?xml version="1.0" encoding="ISO-8859-15"?>
<!-- http://x443.wordpress.com/2011/page/34/ -->
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml"/>

  <xsl:template match="@*">
    <xsl:copy/>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:value-of select="normalize-space(.)" />
  </xsl:template>

  <xsl:template match="*">
    <xsl:param name="indent" select="''"/>
    <xsl:text>&#xa;</xsl:text>
    <xsl:value-of select="$indent" />
    <xsl:copy>
      <xsl:apply-templates select="@*|*|text()">
        <xsl:with-param name="indent" select="concat($indent, '  ')"/>
      </xsl:apply-templates>
    </xsl:copy>
    <xsl:if test="count(../*)>0 and ../*[last()]=.">
      <xsl:text>&#xa;</xsl:text>
      <xsl:value-of select="substring($indent,3)" />
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T08:42:00.663

如果你不想使用 xsl，你可以插入 vbcrlfs。每个“>”都应该跟在 vbcrlf 之后，除非“>”后面跟一个数字。然后从该字符串创建新的 xml 文件 - 现在它有新的行和缩进。msaccess vba：

```
Dim objDom As DOMDocument
Set objDom = CreateObject("MSXML2.DOMDocument") 
```

使用 objDom.append 创建文档，然后使用字符串（我的 xml 中只有数字）：

```
ss = objectDom.XML
For i = 1 To Len(ss)
c = Mid(ss, i, 1)
    If InStr(1, Mid(ss, i, 1), ">") > 0 Then
        a = Asc(Mid(ss, i + 1, 1))
        If a < 48 Or a > 57 Then
            ss1 = Mid(ss, 1, i)
            ss2 = Mid(ss, i + 1, Len(ss))
            ss = Mid(ss, 1, i) & vbCrLf & Mid(ss, i + 1, Len(ss))
        End If
    End If

Next i

objDom.loadXML ss
objDom.Save (file_path) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T09:10:31.680

有点复杂？？
对我不起作用（在 WSH / **c**脚本中） - 错误和空文件。
然后发现您可以使用保存方法-我的新过滤掉VS（空）C++过滤器脚本

```
var arg = WScript.arguments(0);
var doc = readFile(arg);
var xml = doc.documentElement.firstChild;
do {
    var filters = {};
    while (xml && xml.nodeName != "ItemGroup") xml = xml.nextSibling;
    if (!xml) break;
    var xml2 = xml.firstChild;
    while (xml2 && (xml2.nodeName == "ClInclude" || xml2.nodeName == "ClCompile"))
    {
        var path = xml2.attributes.getNamedItem("Include").nodeValue;
        var filter = xml2.firstChild;
        if (filter != null) {
            filter = filter.text;
        }
        if (filters[path])
        { //WScript.Echo(path + " had " + filter);
            if (!filter)
            {
                var prev = xml2.previousSibling;
                xml.removeChild(xml2);
                xml2 = prev;
            }
        } else {
            if (filter != null) {
                filters[path] = filter;
            }
        }
        xml2 = xml2.nextSibling;
    }
    xml = xml.nextSibling;
} while (xml);
doc.save(arg);

function readFile(filename)
{
    var xml = new ActiveXObject("Msxml2.DOMDocument.6.0");  
    xml.async = false;
    xml.resolveExternals = false;
    xml.async = false;
    xml.load(arg);
    return xml;
} 
```

# html - HTML5 翻译方法，如何重置为默认值？

> ID：11144193
> 
> 赞同：26
> 
> 时间：2012-06-21T18:11:10.720
> 
> 标签：html, canvas

由于 HTML5 的 translate-method 显然将绘图的原点相对于其原来的原点移动。（当我连续两次使用 ctx.translate(20,20) 时，我得到的结果与使用 ctx.translate(40,40) 时相同）现在问题是我想将绘图的原点重置为它的原始位置（它在第一次使用 translate() 之前的位置），我该怎么做？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-21T18:17:43.480

您可以通过使用`.save()`和`.restore()`

```
ctx.save();
ctx.translate(// do some translations);
// draw whatever
ctx.restore(); 
```

您需要调用`save()`以“保存”当前上下文状态。然后您可以执行平移、旋转等。在您完成调用后将`restore()`上下文的状态重置为您最初调用时的状态`save()`。

**[现场演示](http://jsfiddle.net/gaZak/)**

[MDN 教程也解释了](https://developer.mozilla.org/en/Drawing_Graphics_with_Canvas)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-07-09T23:13:38.190

```
ctx.setTransform(1, 0, 0, 1, 0, 0); 
```

[MDN setTransform 文档](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setTransform)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-23T12:05:18.223

```
ctx.resetTransform(); 
```

有关详细信息，请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/resetTransform)。它具有非常低的浏览器兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-25T07:06:15.793

该问题询问如何重置`translate`操作的默认值，这是上述所有解决方案的子集。

无论您应用还是`save/reset`，您不仅会重置平移的值，还会重置倾斜和缩放的值（甚至是样式，在第一个的情况下）。`setTransform``resetTransform`

要**仅**撤消翻译，我们只需要恢复 Canvas 使用的变换矩阵的 6 个属性中的 2 个，其余的保持不变：

```
const currentTransform = ctx.getTransform();

// Properties deconstructed for illustrative purposes:
const hScale = currentTransform.m11;
const vSkew = currentTransform.m12;
const hSkew = currentTransform.m21;
const vScale = currentTransform.m22;
const hTranslation = currentTransform.dx;
const vTranslation = currentTransform.dy;

ctx.setTransform(hScale, vSkew, hSkew, vScale, 0, 0); 
```

这会将平移重置为原点 (0, 0)，而不会改变任何比例或倾斜。

* * *

*请注意，这也可以通过使用`transform(...)`和定义要与当前持有的一个画布相乘的转换矩阵来实现，再次改变平移并保持原样的缩放和倾斜。但是，编写这样的矩阵需要知道我们当前与原点的偏移量，并且知道这些信息将允许我们首先应用`translate`负值。*

# iis-7 - 按文件类型在 IIS7 中指定预压缩 (gzip) 与非预压缩内容

> ID：11144201
> 
> 赞同：1
> 
> 时间：2012-06-21T18:11:46.850
> 
> 标签：iis-7, gzip

我正在尝试为一系列嵌套文件夹设置一个 IIS7 Intranet CDN，其中包含一些预压缩 (gzip) css 内容以及图像文件（显然是未压缩的）。

文件夹结构本质上是这样的：

```
Skins
Skins\SkinName1\*.css
Skins\SkinName1\Control1\*.png
Skins\SkinName1\Control2\*.png
Skins\SkinName1\lots more controls..\*.png
Skins\SkinName2\...
Skins\lots more skins...\... 
```

..你明白了..

css 都是预压缩的（gzip'ed），所以我需要在它们上设置一个“gzip”的 Content-Encoding 标头。但我显然不能在图像文件上设置相同的标头。

我知道我可以在根目录设置 Content-Encoding gzip 文件夹，然后在所有控制（图像）文件夹上不继承它。但是有大量的图像文件夹需要经过。

有什么方法可以通过文件类型或其他方式来设置它，而不必单独浏览每个文件夹？

*不幸的是，我无法控制文件夹结构。

谢谢-

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T18:42:03.663

好的，我终于意识到我应该使用 URL Rewrite 模块并让它添加自定义标头。

我基本上只是用这个：

```
 <rewrite>
      <outboundRules>
        <rule name="Set custom HTTP response header" enabled="true">
          <match serverVariable="RESPONSE_Content_Encoding" pattern=".*" />
          <conditions>
            <add input="{REQUEST_URI}" pattern="\.css$" />
          </conditions>
          <action type="Rewrite" value="gzip"/>
        </rule> 
      </outboundRules>
    </rewrite> 
```

并让非预压缩的东西默认。

希望它可以帮助某人-

# php - 具有共同祖先冗余的 PHP 抽象对象设计

> ID：11144202
> 
> 赞同：0
> 
> 时间：2012-06-21T18:11:48.623
> 
> 标签：php, oop, inheritance, object, abstract

我帮助设计和实现了用 PHP 编写的 Droid API。虽然它工作得很好，但我一直在寻找重构我的代码。

可以在具有共同祖先的其他对象中拥有对象吗？

这可能是一个基本问题，但我似乎无法找到支持这是否是不良做法的信息。

目标是让类 foo 为所有人提供通用常量和方法。

例子：

```
 abstract class foo {
             //constants
             //common methods to all
            }

            class bar extends foo{
             //represents something
            }

            class widget extends foo {
             //represents something else
            }

            class controller extends foo{
                //controls flow
                public function __construct(){
                    $this->my_bar= new bar();
                    $this->my_widget= new widget();
             }
            } 
```

类 bar 和 widget 可能不需要扩展 foo，但是这些对象中的方法不会知道 foo 在不发送参数的情况下知道的常见事物。

似乎有太多的冗余，只是在寻找最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:16:51.467

如果它对您的应用程序有意义，那么它就没有问题。

例如，这正是 PHP 的 DOM 库的结构方式。几乎所有东西都是一个节点——文档、元素、属性、字符数据。它们都共享祖先`DOMNode`，即使它们相互嵌套。

因此，如果它真的有意义（在您的抽象示例中很难说出来），那么绝对没有理由不这样做。实际上，如果各种对象共享功能，那可能是“最佳实践”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:20:36.913

创建一个框架需要大量的尝试，这会让你跌倒然后重新站起来。

关于您的问题，最重要的是确保您不会陷入 Liskov 替换原则所描述的陷阱：

> “如果它叫起来像鸭子，看起来像鸭子但需要电池，它可能是鸭子，但可能不是。”</p>
> 
> Liskov 原则很简单，确保当你扩展某些东西时，你不会改变类的契约。如果一个类过去在函数上返回一些东西，而你扩展它以返回一些完全不同的东西，用户怎么知道如何适应？您正在破坏可重用性的目的，因为您提供了一个标识为它扩展的基类的类，但它的行为不像具有附加功能的基类。

我最建议的是，您始终尝试使您的类层次结构尽可能真实，但始终记住 SOLID 原则。有关 SOLID 的更多信息，请查看我的博客：

[http://crazycoders.net/2012/03/confoo-2012-make-your-project-solid/](http://crazycoders.net/2012/03/confoo-2012-make-your-project-solid/)

祝你好运

# javascript - 如何在单个“if”语句中压缩多个“indexOf”条件？

> ID：11144204
> 
> 赞同：3
> 
> 时间：2012-06-21T18:12:07.750
> 
> 标签：javascript, greasemonkey

我有一个要在访问特定 URL 路径时运行的函数，但是在该路径的下方还有其他页面，我不希望脚本在其中运行。例如：

```
website.com/names     **This is the only URL where the script should run**
website.com/names/24/places
website.com/names/648/groups
website.com/names/7340/questions 
```

“/names/”后面的数字的长度范围在 1 和 n 之间，但后三个示例是 URL 可能采用的唯一进一步路径。我只希望脚本在用户位于“website.com/names”页面时运行，而“页面”后面没有任何内容。截至目前，我有一个基于 document.URL.indexOf 的“if”语句的功能，但感觉有点乱：

```
if(document.URL.indexOf("names") >= 0 && (document.URL.indexOf("places") == -1 && document.URL.indexOf("groups") == -1 && document.URL.indexOf("questions") == -1)) 
```

这工作得很好，但我怀疑可能有更好/更清洁的方法来创建“if”语句。有没有办法压缩我当前的行，或者使用不同的代码以更简单的方式做同样的事情，而不会使事情过于复杂？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T18:14:41.430

*在某些情况下应该*使用正则表达式:)

```
if (/names$/.test(document.URL)) 
```

此条件仅在“名称”是 URL 的最后一部分且后面没有任何内容时才通过。表示匹配字符串的`$`结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T18:33:50.220

为什么不检查位于**document.URL**末尾的*名称*使用

 **```
if (document.URL.indexOf("names") == len(document.URL)-5) 
```

（除非 len(document.URL) != 4 不能假设...）。**

# c# - C#跳过/取消保存打开的Word文档

> ID：11144205
> 
> 赞同：0
> 
> 时间：2012-06-21T18:12:11.980
> 
> 标签：c#, winforms, office-interop

我使用以下方法在 FormLoad 上动态打开/创建了一个新的 Word 文档：

*   使用 Word = Microsoft.Office.Interop.Word；
*   oWord = new Word.Application();
*   oDoc = oWord.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing);

我有“保存按钮”，它使用以下方法保存所述文档：

*   oDoc.SaveAs(ref filename, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref o缺失）；

然后我在 FormClosed 上添加了关闭文档的语法：

*   oDoc.Close(ref oMissing, ref oMissing, ref oMissing);

场景：我运行我的程序并在之后关闭/退出。突然弹出文档的“另存为”对话框。我意识到我没有保存文档，因为保存过程在“保存按钮”中。

如何保存文档或自动选择“取消”进行保存？有帮助的人吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T18:17:36.327

Close 方法包括一个用于是否应保存更改的参数。只需将 wdDoNotSaveChanges 作为第一个参数传递。有关详细信息，请参阅[Close 方法](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.close%28v=vs.100%29.aspx)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T18:26:23.047

将属性 oDoc.Saved 设置为 true。那么关闭文档时Word不会提示保存

# google-chrome-extension - 在没有标签权限的情况下切换到 chrome 扩展页面

> ID：11144208
> 
> 赞同：0
> 
> 时间：2012-06-21T18:12:21.467
> 
> 标签：google-chrome-extension

我正在为 chrome 编写一个扩展程序，当用户从弹出窗口输入查询时，它会显示结果页面。我希望后续查询使用现有的结果页面而不是打开新的结果页面。

我曾经`chrome.extension.getViews({'type':'tab'})`获取当前打开的扩展页面并将查询传递给打开页面中的 javascript 函数。

我遇到的问题是在不需要“标签”权限的情况下切换到该页面。

这段代码在后台页面上运行良好。

```
chrome.tabs.getCurrent(function(tab){
    chrome.tabs.update(tab.id, {selected: true});
}); 
```

但是，tabs.getCurrent 需要 'tabs' 权限。有没有办法在没有标签许可的情况下做到这一点？

我可以使用`chrome.tabs.update`，但我不知道如何从返回的视图对象中获取选项卡 ID `chrome.extension.getViews`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:43:05.010

我相当肯定这不能在没有`tabs`许可的情况下完成。您已正确识别出这`chrome.tabs.update`是您需要的功能，但`tabs`未经许可，它只能通过提供选项卡 ID 参数对*当前选定的选项卡进行操作。*`null`由于您无法在`chrome.tabs.update`未经许可的情况下提供选项卡 ID，因此无法在选项卡之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:27:18.213

/edit：正如 appsilers 提到的那样，实际上并不可行。

如果您可以改为使用`chrome.tabs.create()`打开所需的选项卡，它还将在创建时返回其选项卡 ID。

否则，唯一的方法是在目标上下文中添加一个全局变量，并使用它`chrome.extension.getViews()`来识别目标并调用焦点窃取函数，例如`alert()`. 但我建议不要这样做，因为它更像是一种 hack，并且不能保证此功能在构建之间保持稳定。

# facebook - Facebook.addJSEventListener 回调函数未被调用

> ID：11144210
> 
> 赞同：0
> 
> 时间：2012-06-21T18:12:23.707
> 
> 标签：facebook, facebook-graph-api

我正在 Actionscript3 中的 Facebook 图形 API 的帮助下创建一个 facebook 应用程序。出于某种奇怪的原因，2 天前**Facebook.addJSEventListener**决定不再调用回调函数。

这是我的代码：

```
 static public function ConnectToApp(sAppID_:String , sPermissions_:String, sRedirectURL_:String):void
    {
        sAppID = sAppID_;
        sPermissions = sPermissions_;
        sRedirectURL = sRedirectURL_;
        Facebook.init(sAppID, loginHandler);
    }

    static private function loginHandler(objectSession_:Object,objectFail_:Object):void
    {
        if( objectSession_ == null)
        {
            ExternalInterface.call("redirect",sAppID, sPermissions,sRedirectURL);
        }

        Facebook.addJSEventListener('auth.statusChange', detectLogin);
    }

    static private function detectLogin(userInfo_:Object):void
    {
        if (userInfo_.status == "connected")
        {
            iUserStatus = Globals.FB_USER_CONNECTED;
            iUserID = userInfo_.authResponse.userID;
            Facebook.api('/me' ,getMeHandler);
            Security.loadPolicyFile("http://profile.ak.fbcdn.net/crossdomain.xml");
            sProfilePicURL = Facebook.getImageUrl(iUserID.toString());
            loadMyPicture();
        }
        else if (userInfo_.status == "not_authorized")
        {
            iUserStatus = Globals.FB_USER_NOT_AUTHORIZED;
        }
        else
        {
            iUserStatus = Globals.FB_USER_NOT_CONNECTED;
        }
    } 
```

**Facebook.init**正在调用 loginHandler 回调函数，但**Facebook.addJSEventListener('auth.statusChange', detectLogin);** 决定不。

预先感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:37:16.200

我能够让它工作。我做了以下代码更改：

```
 static public function ConnectToApp(sAppID_:String , sPermissions_:String, sRedirectURL_:String):void
    {
        sAppID = sAppID_;
        sPermissions = sPermissions_;
        sRedirectURL = sRedirectURL_;
        Facebook.init(sAppID, loginHandler);
    }

    static private function loginHandler(objectSession_:Object,objectFail_:Object):void
    {
        if( objectSession_ == null)
        {
            ExternalInterface.call("redirect",sAppID, sPermissions,sRedirectURL);
            return;
        }

        GetAllInfo();
    }

    static private function GetAllInfo():void
    {
        iUserStatus = Globals.FB_USER_CONNECTED;
        iUserID = int(Facebook.getAuthResponse().uid);
        Facebook.api('/me' ,getMeHandler);
        Security.loadPolicyFile("http://profile.ak.fbcdn.net/crossdomain.xml");
        sProfilePicURL = Facebook.getImageUrl(iUserID.toString());
        loadMyPicture();
    } 
```

所以基本上现在我没有添加一个在用户连接时调用回调函数的事件侦听器，如果会话未准备好我重定向并返回......当会话准备好时我会自动开始获取信息。

我不确定我是否会在完全登录之前开始询问信息时遇到问题，但到目前为止我做了很多测试并且它似乎有效。

如果有人有更好的解决方案，请告诉我。

# java - 搜索引擎优化，谷歌抓取

> ID：11144211
> 
> 赞同：1
> 
> 时间：2012-06-21T18:12:28.847
> 
> 标签：java, seo, google-crawlers

我已经实现了如下的分页

```
http://myhost.com/product-2/213-1 
```

这意味着共有 213 个产品，这是第一页。当我检查 Google 在我的网站中抓取了哪些页面时，我看到的结果如下

```
http://myhost.com/product-2/213-1-2/144-0/144-1/144-14/125-1/125-12/125-1/151-15/108-10/131-1/134-13/140-14/140-1/118-11/126-1/126-12/110-1/270-27/270-1/270-27 
```

这意味着谷歌以某种方式将所有页码附加到 URL 的末尾并抓取该 URL。有人可以给我一个解决方案来阻止这种情况吗？对于这种特殊情况，我希望 Google 只抓取一个包含所有产品信息的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:14:10.547

使用[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)告诉 Google 哪个页面是您要在搜索结果中显示的一个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:18:15.650

我将补充他们给你的很好的答案，你可以使用 rel next\prev 分页元素。让谷歌知道下一个链接是您列表中的下一页。

您可以在 google 网站管理员博客上找到更多信息，那里有[**帖子**](http://googlewebmastercentral.blogspot.co.il/2011/09/pagination-with-relnext-and-relprev.html)和[**视频教程**](http://googlewebmastercentral.blogspot.co.il/2012/03/video-about-pagination-with-relnext-and.html)。

他们都会向您解释如何实现和使用分页标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:01:45.730

这很奇怪。看起来您在分页中使用了相对链接，并且您的 URL-Router 以某种方式接受了这一点而没有抛出 404 ......相反，它显示了内容，因为它只解释了 URL 的一部分而不是全部。所以搜索引擎可以抓取这些 URL。

例子：

您正在链接到

```
next-side/ 
```

代替

```
/path/to/next-side/ 
```

如果您发布链接，社区可以尝试！

顺便说一句，我不建议按项目数更改 URL。使用固定的 URL 会好很多，并且项目的数量是无关紧要的。最好使用 /shop/category/subcategory/product 之类的东西。

# linq - 加入 LINQ 以避免在“new {}”中显式命名属性？

> ID：11144213
> 
> 赞同：6
> 
> 时间：2012-06-21T18:12:37.437
> 
> 标签：linq, linq-to-dataset

我想做这样的事情：

```
 DataTable q = from c in customers
            join o in orders on c.Key equals o.Key
            into outer
            from j in outer.DefaultIfEmpty()
            select new { c.*, j.* }; 
```

我目前得到的最接近的是以下内容：

```
 var q = from c in customers
            join o in orders on c.Key equals o.Key
            into outer
            from j in outer.DefaultIfEmpty()
            select new { c, j }; 
```

我希望我的结果 (q) 包含来自 c 和 j 的所有列。c 和 j 都包含很多列，所以我不想这样列出它们：

```
 select new { c.col1, c.col2, etc. } 
```

但我基本上希望最终的 DataTable 由 c.* 和 j.* 组成。

如果我在“select new”中指定所有 c 和 j 列，则此答案（不是已接受的答案，而是其下方的答案）有效： [如何将 LINQ 结果转换为 DATATABLE？](https://stackoverflow.com/questions/3509290/how-to-convert-a-linq-result-to-datatable) 但我想避免将它们全部列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:54:40.397

首先，我更愿意手动指定列，因为我想尽量减少底层（数据库模式、查询提供程序）对我的应用程序的影响。但是，如果您*真的*想这样做，则可以使用一些 hacky 方法来完成它。

当您使用实体框架（数据库优先）时：

```
var qs = ((ObjectQuery)q).ToTraceString();
var ds = new DataSet();
var da = new SqlDataAdapter(qs, new SqlConnection(((EntityConnection)context.Connection).StoreConnection.ConnectionString));
da.Fill(ds, "Result"); 
```

这个想法是在实际执行之前捕获发出的 SQL 并使用它来填充 a `DataTable`(in a `DataSet`)。

跟linq-to-sql基本一样，只是获取命令字符串和连接字符串的方式不同：

```
context.GetCommand(q).CommandText
context.Connection.ConnectionString 
```

使用 EF 代码优先：

```
q.ToString()
context.Database.Connection.ConnectionString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:04:49.490

我认为这是不可能的。您只能按照问题中显示的方式执行此操作：`select new { c, j };`或列出所有列。

这方面还有很多其他话题：

*   [http://social.msdn.microsoft.com/Forums/en/linqprojectgeneral/thread/d219ff26-6a8a-49b3-8b41-1ce381b7b278](http://social.msdn.microsoft.com/Forums/en/linqprojectgeneral/thread/d219ff26-6a8a-49b3-8b41-1ce381b7b278)
*   [在LINQ中选择JOIN之后的所有列](https://stackoverflow.com/questions/7861059/select-all-columns-after-join-in-linq)
*   [选择连接中所有表的所有列 + linq 连接](https://stackoverflow.com/questions/1671765/select-all-columns-for-all-tables-in-join-linq-join)

# css - 使 img 高度为 td 的 100%

> ID：11144215
> 
> 赞同：4
> 
> 时间：2012-06-21T18:12:41.563
> 
> 标签：css, html-table, html-email

我正在创建一个 HTML 电子邮件，因为背景图像不能用于任何东西，但`<body>`我认为我可以通过在单元格内将边框图像设置为 100% 高度来解决这个问题。也许是一厢情愿？我搜索了过去在现代浏览器中不再有效的解决方案。是否有任何特殊技巧可以在不为单元设置硬高度的情况下实现这一点？

以下是我迄今为止尝试过的事情：

```
<td width="25" style="margin:0; padding:0;">
    <img src="http://www.example.com/images/side-left.jpg" width="25" height="100%" alt="border" style="margin:0; padding:0; display: block;" />
</td> 
```

将图像拉伸到整个表格的 100% 高度（即使表格嵌套在`<td>`.

```
<td width="25" height="100%" style="margin:0; padding:0;">
    <div style="height:100%; diplay: block;">
        <img src="http://www.example.com/images/side-left.jpg" width="25" height="100%" alt="border" style="margin:0; padding:0; display: block;" />
    </div>
</td> 
```

同上

```
<td width="25" height="1" style="margin:0; padding:0;">
    <div style="height:100%; diplay: block;">
        <img src="http://www.example.com/images/side-left.jpg" width="25" height="100%" alt="border" style="margin:0; padding:0; display: block;" />
    </div>
</td> 
```

设置较小的`td`尺寸不会强制它按预期拉伸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:47:18.730

我假设您主要是在 Outlook 中遇到麻烦？

*   Hotmail 无法识别背景图片，但它似乎可以识别 height="100%"。

*   在我自己的测试中，在图像上声明 height="100%" 确实成功地将其拉伸到主要基于 Web 的客户端（Hotmail、Gmail、Yahoo）中的单元格高度。

*   Outlook 仅允许将图像拉伸到固定大小（并且图像只能在两个方向上按比例拉伸）。其他客户端允许在一个方向上显着拉伸（高达原始尺寸的约 4000%？）

**尖端：**

1) 使用尺寸适合 Outlook 或稍高的高图像。

2) 在大多数非 Outlook 客户端中，使用 height="100%" 仍会根据需要拉伸图像。

3) 为表格单元格声明一个垂直重复的背景图像也可用作后备（但它对 Outlook 或 Hotmail 没有帮助。）

**这是我对边框图像的首选解决方案：**

```
<td width="25" height="100%" valign="top" style="background:Transparent url('http://www.mysite.com/images/side-left.jpg') repeat-y;margin:0; padding:0;">
    <img style="margin:0; padding:0;display:block;" src="http://www.mysite.com/images/side-left.jpg" alt="border" width="25" height="100%" />
</td> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T21:11:36.753

尝试将单元格的高度设置为百分比而不是 css 中的像素。就像 Jezen Thomas 所说的那样，使用 css，但这次是这样做的。

```
td {border: 4px solid red; height: /*height in desired percentage*/%; valign:top;}
img {height: 100%; width: 100%;}​ 
```

另外，在表格中格式化网页或电子邮件是不好的做法。您应该尝试完全在 css 中完成，并且仅将表格用于表格数据。但既然这是你想做的，我不会阻止你。

如果您获得其余的 html 是否可以，这样如果您有兴趣，我可以展示正确的 css 方法吗？

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-02T11:25:27.403

永远不要在电子邮件中使用 div，gmail 和 android 不支持这一点。

at image 不可能在电子邮件中具有 100% 的高度或宽度。您必须以 px 为单位输入确切的大小。它很烦人

# linux - 如何编写一个 shell 脚本在没有 ssh 的多台远程机器上运行脚本？

> ID：11144217
> 
> 赞同：1
> 
> 时间：2012-06-21T18:12:43.007
> 
> 标签：linux, shell, amazon-ec2

谁能告诉我如何编写一个 bash shell 脚本，在没有 ssh 的情况下在几台远程机器上执行另一个脚本。

场景是我有几个脚本应该在 100 个 Amazon Ec2 云实例上运行。天真的方法是编写一个脚本来将两个源脚本 scp 到所有实例，然后通过在每个实例上执行 ssh 来运行它们。有没有更好的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:56:18.913

如果你只想并行做一些事情，你可以使用[Parallel SSH](http://code.google.com/p/parallel-ssh/)或[Cluster SSH](http://sourceforge.net/projects/clusterssh/)。如果实在不想使用 SSH，可以安装 celery 之类的任务队列系统。你甚至可以去老学校，只是有一个定期检查 s3 中的位置的 cron 作业，如果密钥存在，下载文件并运行它，尽管你必须小心只运行一次。如果您通常尝试管理一堆机器，您还可以使用[Puppet](http://www.puppetlabs.com/)和[Chef等工具。](http://www.opscode.com/chef/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:48:57.697

另一种选择是`rsh`，但要小心，它具有安全隐患。请参阅[rsh 与 ssh](http://www.linuxquestions.org/questions/linux-newbie-8/rsh-vs-ssh-772596/)。

# jquery - 简单的 jquery ui 滑块不起作用

> ID：11144224
> 
> 赞同：1
> 
> 时间：2012-06-21T18:12:55.273
> 
> 标签：jquery, jquery-ui, jquery-slider

我正在尝试重现一个适用于这个小提琴的简单 jquery 滑块示例：http: [//jsfiddle.net/mericson/5TTm4/6/](http://jsfiddle.net/mericson/5TTm4/6/)

这是我的代码：

```
<html>

    <head>
        <title>Jquery UI Slider</title>
        <link type="text/css" href="jquery-ui-1.8.20.custom.css"
        rel="stylesheet" />
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="jquery-ui-1.8.20.custom.min.js"></script>
        <script type="text/javascript">
            $("#slider").slider({
                value: 100,
                min: 0,
                max: 500,
                step: 50,
                slide: function (event, ui) {
                    $("#slider-value").html(ui.value);
                }
            });
            $("#slider-value").html($('#slider').slider('value'));
        </script>
        <style type="text/css">
            h1 {
                font-family: Helvetica, Arial;
                font-weight: bold;
                font-size: 18px;
            }
            body, p {
                font-family: Helvetica, Arial;
            }
        </style>
    </head>

    <body>
        <h1>HTML Slider Test</h1>
        <div id="slider"></div>
        <p>Your slider has a value of
            <span id="slider-value"></span>
        </p>
    </body>

</html> 
```

我有图像文件夹和以下文件

```
<link type="text/css" href="jquery-ui-1.8.20.custom.css" rel="stylesheet" />
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.20.custom.min.js"></script> 
```

在同一个文件夹中。我使用什么版本的 jquery 来让滑块工作是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:15:05.110

将您的 jQuery 放在`$(document).ready()`这样的处理程序中：

```
$(document).ready(function(){
    $("#slider").slider({
        value: 100,
        min: 0,
        max: 500,
        step: 50,
        slide: function (event, ui) {
            $("#slider-value").html(ui.value);
        }
    });

    $("#slider-value").html($('#slider').slider('value'));
}); 
```

# javascript - Request.Form.FindAllKeys 在 IE8 中不起作用

> ID：11144229
> 
> 赞同：1
> 
> 时间：2012-06-21T18:13:22.437
> 
> 标签：javascript, asp.net, internet-explorer-8

我正在我的页面客户端上创建文本框，就像这样..

```
 var _text = document.createElement("input");

        _text.setAttribute("type", "text");

        _text.setAttribute("id", "txtAsName" + num);

        _text.setAttribute("name", "txtAsName" + num); 
```

在服务器端代码中，我检索表单上任何文本框的 ID（您可以添加 txtAsName1、txtAsName2、txtAsName3，然后删除所有客户端的 txtAsName2，因此在我的情况下，在回发期间获取表单左侧的任何文本框很重要）

我正在使用以下方法获取服务器端剩余文本框的 ID：

```
 string[] allFormKeys = Request.Form.AllKeys;

                    foreach (string key in allFormKeys)
                    {

                     Response.Write("Key Name: " +key + "<br/>");

                        if (key.StartsWith("txtAsName"))
                        {
                            txtBoxes.Add(key);
                        }
                    } 
```

在 Firefox 中这工作正常，但在 IE8 Request.Form.AllKeys 中不返回文本框！我可以通过 Response.Write 看到这一点，在 Firefox 中我得到了文本框。

我检查了 html 中是否有 2 个表单标签，但事实并非如此

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:24:31.390

Is it possible that you are forgetting to append the newly created element to your form?

```
<script>
var input1 = document.createElement("input");
input1.setAttribute("type", "text");
input1.setAttribute("name", "testing123");
input1.setAttribute("value", "i like cake");
document.getElementById("formid").appendChild(input1);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T21:23:04.590

您没有在问题中说您将文本输入元素添加到什么。我使用了您的代码，确保将文本输入字段作为子项添加到表单元素内的某个位置，并且我肯定会看到它们被发布回服务器：

```
<div id="testDiv"></div>
<br />
<asp:Label ID="Label1" runat="server" />
<asp:Button runat="server" />
<script type="text/javascript">
    var num = 0;
    var _text = document.createElement("input"); _text.setAttribute("type", "text"); _text.setAttribute("id", "txtAsName" + num); _text.setAttribute("name", "txtAsName" + num);
    testDiv.appendChild(_text);
    num++;
    _text = document.createElement("input"); _text.setAttribute("type", "text"); _text.setAttribute("id", "txtAsName" + num); _text.setAttribute("name", "txtAsName" + num);
    testDiv.appendChild(_text);
    num++;
    _text = document.createElement("input"); _text.setAttribute("type", "text"); _text.setAttribute("id", "txtAsName" + num); _text.setAttribute("name", "txtAsName" + num);
    testDiv.appendChild(_text);
</script> 
```

和

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.Form.AllKeys.Length > 0)
        {
            string keys = string.Join(", ", Request.Form.AllKeys);
            Label1.Text = string.Format("Found {0} keys: {1}", Request.Form.AllKeys.Length, keys);
        }
        else
        {
            Label1.Text = "Form.AllKeys.Length == 0";
        }
    } 
```

当我运行它然后单击按钮时，标签显示：

```
Found 6 keys: __VIEWSTATE, __EVENTVALIDATION, txtAsName0, txtAsName1, txtAsName2, ctl00$MainContent$ctl00 
```

我正在使用 IE8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:08:15.670

查看生成的页面html。可能从服务器生成了不正确的 html 标记。即，一些 html 标记没有被关闭标记正确关闭。

# c - 通过 va_arg 解析结构

> ID：11144236
> 
> 赞同：1
> 
> 时间：2012-06-21T18:13:55.267
> 
> 标签：c, variadic-functions

说，在我想从 file1.c 解析 C 结构的其他元素中：

```
typedef struct mynode{
   int* x;
   int length;
}node;

int callerFunction(int myLength){
  //memory space  
  node* n = (node*)malloc(sizeof(node));

  //dummy values for explanation purpose only
  double d = 3.14;
  int max  = 100;

//populate struct
  n->length = myLength;
  for(int i =0; i < n->length; i++)
     n->x[i]= i;

  //calling foo passing an structure  
   int result = foo(3,d,max,n);
} 
```

我想通过 va_arg 将这个结构传递给另一个函数，在 file2.c

```
int foo(int n,...){

int foo_max;
double foo_d;
node* foo_n;
va_list ap;

va_start(ap,n);  
 d = va_arg(ap,double);
 foo_d = va_arg(ap,int);
 foo_n = va_arg(ap,node*);
va_end(ap);
....
} 
```

我以为我在做正确的事情，但是如果我包含结构，则 foo 收集的数据是完全错误的（不是正确的数据）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:25:54.767

内部`callerFunction`
似乎您没有分配内存`n->x`但正在使用它。

```
 //populate struct
 n->length = myLength;

 n->x = malloc(n->lenght * sizeof(int));     //////////add this line

 for(int i =0; i < n->length; i++)
     n->x[i]= i; 
```

# c++ - 使用 crypto++ 库的 RAW RSA 签名验证

> ID：11144239
> 
> 赞同：2
> 
> 时间：2012-06-21T18:14:07.410
> 
> 标签：c++, cryptography, rsa, crypto++

如何使用 crypto++ 库验证数字签名？

输入数据为：

*   public_key BASE64 编码的十六进制字符串。
*   来自公钥的公共指数。
*   签名为十六进制字符串。

我不知道私钥部分。我已经编写了这个测试函数，但它总是以“VerifierFilter：数字签名无效”错误结束。

这里的密钥是从有效的密钥对导出的！

```
void rawRSAVerificationTest()
{

// RSA 2048 digital signature verification
try {

    std::string pupKeyStr ("e0c3851114c758fb943a30ca8f9b4c7f506d52aa101c34ad5134f2cdbdddbef11ee6d1470d54caf3774d4d17d69488abf0b78beaebc046115cb29617610e98be3d5c303e19c14ae57ce0994701e3f24a628abf5c421777fb3c2b9b8b17f2a4cda4b9fd89e3c122085831c3e4502734bc3f3157d3ccd01198a8e3795f03661b55112acb69e8d5782bdf506bf5222777baf382d4d4bc2dd83e53af9236ed6e7a0fb8b5bb543ed4abbf478911bdc517e13e580b138f10f153eb2733ad60f3796e99b7d59f9abbd6666c69ba5ecc17a391424dc8ca3cf24a759c62d490056cda30265e11e316e7695028721c50eaf8e596161f0b59e4f598c85063bb3a847a5acb9d");
    //sha256 hashed data signature
    std::string signatureStr = "d8d1df600d6781a9c030d9c697ec928eac34bf0670cf469f7fffb9c046deaee359b4e1218b419ff2589434510db8470ccf7abd28876a04b8d5a27293723e897f97a9367d2fbb379f8c52ec2a04cb71a06891a3f44d00e8bb9622b2038dbe6f29d0118203c372853ae09fb820702f1c16ee772998bd8a3db9e5127992a18d999fc422822caf0a82d9c12d6231605457ce651b0350b1e98584f9d4e6b973d6668df863d4b73784bbc00d8449918a0f049ddbeffc0d79579ade13a2d9012906b7ded7aae934bc54c5b85c924aee6627d66b7b200a23cd9b6a9c14650f1f9384e9ef9b90ac217ece026a1802bc0623150057ecd2b31f5f758e4ff866bb2e81d28368";

    //Chinese Remainder Theorem (CRT)
    std::string pupExpStr ("0x10001");

    CryptoPP::AutoSeededRandomPool rng;
    CryptoPP::RSA::PublicKey pubKeyRaw;

    CryptoPP::Integer pup_key_cast( static_cast<CryptoPP::Integer> (pupKeyStr.c_str()));
    CryptoPP::Integer pup_exp_cast( static_cast<CryptoPP::Integer> (pupExpStr.c_str()));

    pubKeyRaw.Initialize(pup_key_cast, pup_exp_cast);
    if (!pubKeyRaw.Validate(rng, 3))
    {   
        std::cout << "Error while public key validation" << std::endl;
    }

    CryptoPP::RSASS<CryptoPP::PSS,  CryptoPP::SHA256>::Verifier verifier_sha256(pubKeyRaw);

    CryptoPP::StringSource( signatureStr, true,   
        new CryptoPP::SignatureVerificationFilter(   
        verifier_sha256, NULL,   
        CryptoPP::SignatureVerificationFilter::THROW_EXCEPTION   
        ) // SignatureVerificationFilter   
        ); // StringSource   

}
catch( CryptoPP::Exception& e )
{
    std::cerr << "ERROR: " << e.what() << std::endl;
}
catch( ... )
{
    std::cerr << "ERROR: Unknown verify signature error" << std::endl;
}
} 
```

我错过了什么？

我将非常感谢任何帮助！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T06:53:02.987

> 如何使用 crypto++ 库验证数字签名？

好吧，当您知道在哪里寻找时，这很容易。[来自RSA 签名方案](http://www.cryptopp.com/wiki/RSA_Signature_Schemes)的 Crypto++ wiki ：

```
RSA::PrivateKey privateKey = ...;
RSA::PublicKey publicKey = ...; 

////////////////////////////////////////////////
// Setup
string message = "RSA-PSSR Test", signature, recovered;    

////////////////////////////////////////////////
// Sign and Encode
RSASS<PSSR, SHA1>::Signer signer(privateKey);

StringSource ss1(message, true, 
    new SignerFilter(rng, signer,
        new StringSink(signature),
        true // putMessage for recovery
   ) // SignerFilter
); // StringSource

////////////////////////////////////////////////
// Verify and Recover
RSASS<PSSR, SHA1>::Verifier verifier(publicKey);

StringSource ss2(signature, true,
    new SignatureVerificationFilter(
        verifier,
        new StringSink(recovered),
        THROW_EXCEPTION | PUT_MESSAGE
   ) // SignatureVerificationFilter
); // StringSource

cout << "Verified signature on message" << endl;
cout << "Message: " << recovered << endl; 
```

* * *

```
CryptoPP::RSASS<CryptoPP::PSS,  CryptoPP::SHA256>::Verifier verifier_sha256(pubKeyRaw); 
```

几个问题：

*   那应该是`PSS`（带有附录的签名方案）还是`PSSR`（带有恢复的签名方案）？
*   你确定它不是，例如，PKCS1v15？
*   如果是恢复方案，签名是在十六进制的开头还是结尾`signatureStr`？

* * *

这个最初`Integer`的初始化可能是错误的。Crypto++ 将尝试将字符串解析为十进制整数，而不是十六进制整数，因为 in 缺少`0x`前缀和`h`后缀（应该存在一个或另一个）。

您应该添加前缀、后缀或使用字节数组构造函数。字节数组构造函数如下所示。

```
std::string pupKeyStr ("e0c3851114c758fb...");

string pupKeyBin;
StringSource ss1(pupKeyStr, true,
    new HexDecoder(
        new StringSink(pupKeyBin)
    )
);

CryptoPP::Integer pup_key_cast( (unsigned char*)pupKeyBin.data(), pupKeyBin.size() ); 
```

* * *

```
StringSource( signatureStr, true, ...
... 
```

这可能是错误的。你可能需要类似的东西：

```
string signatureBin;
StringSource ss1(signatureStr, true,
    new HexDecoder(
        new StringSink(signatureBin)
    )
);

StringSource ss2(signatureBin, true,
    new SignatureVerificationFilter(...
    ... 
```

* * *

`PSSA`我使用和尝试了带有二进制签名的代码`PSSR`。都没有奏效。我还尝试了[SignatureVerificationFilter`SIGNATURE_AT_BEGIN`和`SIGNATURE_AT_END`](http://www.cryptopp.com/wiki/SignatureVerificationFilter). 都没有奏效。我尝试了`SHA1`和的组合`RSASSA_PKCS1v15_SHA_Verifier`。没有任何效果。

你能准确地验证你拥有什么吗？

# performance - 为大量用户和高性能设计 XPage 应用程序

> ID：11144240
> 
> 赞同：4
> 
> 时间：2012-06-21T18:14:09.800
> 
> 标签：performance, xpages

以下问题是由一位即将编写大型 XPages 应用程序的客户提出的。虽然我认为这些问题实际上很广泛以适合 stackoverflow 风格，但它们很有趣，而且这里专家的集体知识可能会比一个人回答它们产生更好的结果：

1.  有多少并发用户可以在 1 台 Lotus Domino 服务器上使用 XPages 应用程序（Lotus Domino 服务器上有多个应用程序。没有一个）？
2.  当运行 XPages 应用程序时，我们如何定义和分析 Lotus Domino 服务器上的内存泄漏？
3.  我们如何以正确的方式编写 XPage 以实现最佳性能并避免内存泄漏？
4.  不应该使用哪些代码方法和对象？
5.  当 Lotus Script 开发人员开始为 XPage 编写代码时，典型的错误是什么？最好的做法是什么？
6.  我们如何在 XPage 上为 10000 - 15000 个用户构建集中的、整合的应用程序？我们需要多少台服务器？在这种情况下如何配置 XPages 应用程序？
7.  如何平衡用户？

我将提供我的见解，请分享你的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:36:32.177

1.  一根弦有多长？这取决于服务器的配置方式。“应用程序”可以是单一形式或数百种形式。只有一个测试可以告诉。一般来说：构建一个[高性能服务器](http://www.wissel.net/blog/d6plinks/SHWL-7RB3P5)，最好是 64 位架构和大量 RAM。使该 RAM[可用于 JVM](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Memory_Usage_and_Performance)。如果应用程序使用附件，请使用 DAOS，将其放在单独的磁盘上 - 当然，请确保您拥有最新版本的 Domino（撰写本文时为 8.5.3FP1）
2.  有一个包含内存和 CPU 分析器的[XPages Toolbox 。](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=xpages%20toolbox)
3.  这取决于应用程序的类型。巧妙地使用缓存、表达式语言和 bean 的范围而不是 SSJS。当你忘记时，你会泄漏内存`.recycle`。聘请一位经验丰富的首席开发人员并[阅读](http://www.ibmpressbooks.com/bookstore/product.asp?isbn=0132486318)另外[一本](http://www.ibmpressbooks.com/bookstore/product.asp?isbn=0132901811)和[两](http://www.ibmpressbooks.com/bookstore/product.asp?isbn=0132943050)本这本书。考虑将运行时间较长的代码线程化，这样用户就无需等待。
4.  取决于你的需要。Domino 开发的一般经验适用于 db 操作，因此 FTSearch 优于 DBSearch，范围使用优于 @DBColumn 参数。EL 超过 SSJS。
5.  典型错误包括：XPage 中的所有代码 -> 使用脚本库。太多@dblookup，@dbcolumn 而不是范围。在按钮而不是验证器中验证。违反分解原则。忘记使用 .recycle()。设计应用程序“像旧的 Notes 屏幕”而不是单页交互。部分刷新的使用太少。不使用缓存。面向对象太少（在脚本库中创建函数坟墓）。
6.  这是问题1-5的总结，没有什么新东西要回答
7.  当为 XPage 集群 Domino 服务器并在前面放置负载平衡器时，需要将负载平衡器配置为在同一台服务器上保持会话，因此部分刷新和 Ajax 调用会到达为该用户呈现组件树的服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:56:32.640

1.  这取决于服务器设置，我有 12000 个注册用户的 XPage 外联网，跨越大约 20 个 XPage 应用程序。它运行在 1 个具有 4GB Ram 和四核 cpu 的 Windows 2003 服务器上。这 20 个应用程序的数据量约为 60GB。没有 Daos，没有豆子，只有 SSJS。性能非常出色。因此，当我将此安装升级到 64 位和 Daos 时，应用程序将在更多时扩展。所以 64 位和大量内存是很多用户的关键。

2.  我没有做任何事情

3.  确保在执行文档循环时进行回收，使用 openntf.org 调试工具栏在我们为 XPages 提供调试器之前将节省大量时间。

4.  始终认为，当您在做某事时，这将由多个用户完成，因此请尽量减少查找或 getElementByKey 的数量。尽可能尝试使用 ViewNavigator。

5.  这完全取决于有多少用户同时使用系统。如果您有 10000 - 15000 个用户并发，那么您必须查看应用程序的功能以及有多少用户将同时使用同一个应用程序。

这就是我对这个问题的见解

# xslt - 如何使用 XSLT 对古希腊词进行排序？

> ID：11144243
> 
> 赞同：1
> 
> 时间：2012-06-21T18:14:18.717
> 
> 标签：xslt, sorting, unicode, diacritics

我只是花了太长时间试图找出如何使用 XSLT 和撒克逊语方便地对古希腊语进行排序，所以我在这里提出这个问题，以便其他人可以阅读答案，我稍后会发布。

在对古典希腊语进行排序时，通常会忽略变音符号。

但是，在 unicode 中表示带重音的希腊字母的方法不止一种。

因此，以下代码首先将我想要排序的希腊语分组键规范化为非预组合字符，然后删除变音符号以进行排序：

```
<xsl:sort select="translate(normalize-unicode(current-grouping-key(), 'NFD'), 
&#x0300;&#x0301;&#x0304;&#x0306;&#x0313;&#x0313;&#x0300;&#x0313;&#x0300;&#x0345;&#x0313;
&#x0301;&#x0313;&#x0301;&#x0345;&#x0313;&#x0342;&#x0313;&#x0342;&#x0345;&#x0313;&#x0345;
&#x0314;&#x0314;&#x0300;&#x0314;&#x0300;&#x0345;&#x0314;&#x0301;&#x0314;&#x0301;&#x0345;
&#x0314;&#x0342;&#x0314;&#x0342;&#x0345;&#x0314;&#x0345;&#x0345;', '')"/> 
```

然而，这从一开始就不清楚，我在这里发布这个希望人们会觉得这很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:50:05.187

你试过这个：

```
<xsl:sort select="..." collation="http://saxon.sf.net/collation?ignore-modifiers=yes"/> 
```

请参阅[http://www.saxonica.com/documentation/extensibility/collat​​ion.xml](http://www.saxonica.com/documentation/extensibility/collation.xml)

# c++ - 使用 fstream 写入文件将擦除文件

> ID：11144244
> 
> 赞同：0
> 
> 时间：2012-06-21T18:14:19.073
> 
> 标签：c++, file

我有一个问题，我有一个保存的文本文件，我想使用`fstream header`C++ 中的文件向该文件写入一些内容，但是`ofstream`一旦我运行编译的应用程序，使用会擦除整个文件，为什么以及如何避免它？

```
#include <fstream>
#include <iostream>
using namespace std;

int main()
{
    ofstream write("1.txt");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:16:01.043

您需要告诉 ofstream 附加到文件中。

```
std::ofstream write("1.txt",std::ios::app); 
```

还有其他几个标志可以控制流的类似特征，请阅读书籍或[参考](http://en.cppreference.com/w/)以获取更多信息。

# django - Django i18n 和缓存干扰

> ID：11144245
> 
> 赞同：0
> 
> 时间：2012-06-21T18:14:23.770
> 
> 标签：django, caching, internationalization

我意识到这是一个已知[问题](http://python.6.n6.nabble.com/Internationalization-and-caching-not-working-td84364.html)，[问题](http://www.mail-archive.com/django-users@googlegroups.com/msg63780.html)，但我仍然没有找到足够的解决方案。

我想将@cache_page 用于我的 Django 应用程序中的一些视图，如下所示：

```
@cache_page(24 * 60 * 60)
def some_view(request):
    ... 
```

问题是我还使用带有语言切换器的 i18n 来切换每个页面的语言。所以，如果我打开缓存，我不会得到我期望的结果。似乎我得到了最后一个缓存页面。

我试过这个：

```
@cache_page(24 * 60 * 60)
@vary_on_headers('Content-Language', 'Accept-Language') 
def some_view(request):
    ... 
```

**编辑**...这个：

```
@cache_page(24 * 60 * 60)
@vary_on_cookie 
def some_view(request):
    ... 
```

**结束编辑**

但我得到相同的结果。

当然，如果我删除缓存，一切都会按预期工作。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:16:35.087

好的 - 浏览器缓存似乎存在问题，而不是 Django 本身。从那以后，我发现关闭开发中的所有浏览器缓存很有用（我知道这似乎很明显）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-22T20:39:28.270

在 django 1.10 语言由装饰器处理

django.utils -> cache.py 的代码有方法 _generate_cache_key ，它作为 return **_i18n_cache_key_suffix** (request, cache_key)返回

如果我们研究它，它可以适应语言设置。

# ubuntu - 如何使用 Ubuntu 12-04 为 vim/vi 启用折叠和 256 色支持

> ID：11144249
> 
> 赞同：2
> 
> 时间：2012-06-21T18:14:36.190
> 
> 标签：ubuntu, vim, vi, folding

我刚刚在 Rackspace 中打开了一个新的 Ubuntu 12-04 实例，我似乎无法为 vim/vi 启用折叠和 256 色支持。

我想启用折叠以便自动折叠缩进（例如类、函数等）。当我尝试使用 zc 进行折叠时，响应是“E490：未找到折叠”。

我已经尝试了很多东西，目前安装了以下软件包：

vim vim-addon-manager vim-athena vim-common vim-dbg vim-doc vim-gnome vim-gtk vim-gui-common vim-latexsuite vim-lesstif vim-nox vim-runtime vim-scripts vim-tiny

对于 256 色支持，我在 /etc/vim/vimrc.local 和 ~/.vimrc 中尝试了以下内容：

设置 t_Co=256

这似乎没有帮助。有任何想法吗？

我在 Mac OS X 上使用 iTerm 1.0.0.20120203，在 Ubuntu 桌面上使用终端，它们在我的所有其他服务器上都可以显示折叠和 256 色。我尝试从一个有效的旧 Ubuntu 安装中复制 .vimrc 文件，但没有任何区别。进行更改后，是否需要重新启动任何内容，或者只需使用 vi 打开文件就足够了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:24:27.440

您的终端类型是否是声称支持颜色的终端类型，例如 xterm-color？

您可以通过以下方式找到：

```
$ echo $TERM 
```

如果它不支持颜色，你可以这样做：

```
$ export TERM=xterm-color 
```

我相信如果 vim 认为您的终端无法使用颜色设置，它会忽略它们。

# matlab - 注释某些行时，Matlab 中的单元格数组连接错误

> ID：11144252
> 
> 赞同：3
> 
> 时间：2012-06-21T18:14:54.253
> 
> 标签：matlab, syntax, comments, concatenation, cell-array

我正在尝试在 Matlab 中创建一个元胞数组。我目前拥有的代码完全符合我的需要。问题基本上是，如果我注释掉任何不是第一行、中间行或最后一行的行，我会收到错误消息：

错误使用 ==> vertcat CAT 参数尺寸不一致。

我已经研究了一段时间，我发现另一个人有完全相同的问题......

[http://www.programmersheaven.com/mb/ctocplusplustomatlab/424275/424275/mysterious-reason-for-cat-error-when-defining-cell-array/](http://www.programmersheaven.com/mb/ctocplusplustomatlab/424275/424275/mysterious-reason-for-cat-error-when-defining-cell-array/)

...但是，这篇文章没有解决方案。

这是我的代码（4s 代表变量持有的可能整数值）：

```
cell = {{4} ...
    {4} ...
    {4} ...
    {4} ...
    {} ...
    {4} ...
    {4} ...
    {4} ...
    {4} ...
    {4 4 4 4} ...
    {4} ...
    {4} ...
    {4} ...
    {4} ...
    {4} ...
    {4 4 4 4} ...
    {5} ...
    {} ...
    {4} ...
    {4} ...
    {} ...
    {} ...
    {} ...
    {} ...
    {} ...
    {} ...
    {} ...
    {} ...
    {} ...
    }; 
```

（我不能让它在这里看起来完全一样......在每个椭圆之后，代码在我的版本中移动到新行）

假设我注释掉其中包含 5 的行。它总是会返回连接错误。知道为什么会这样吗？

提前致谢，

妮可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:38:03.843

Matlab 将注释行解释为新行。尝试在您的单元格之间放置一个空行，您应该会看到相同的错误。如果在每个单元格后面加上分号，则可以避免该错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T18:54:37.877

这是一个较小的示例：

```
c = {...
    {1}... % you can comment out this line
    {2}... % error when commenting this line
    {3}... % you can comment this line (will make a 2-by-2 array)
    {4}... % error when commenting this line
    {5}... % you can comment out this line
    } 
```

注释行将被 Matlab 视为空行。连接时，一个（或多个）空行相当于一个分号，表示新行的开始。

最后，

```
c = {{1} {2}

     {3} {4}} 
```

结果是一个 2×2 数组，相当于

```
c = {{1},{2};{3},{4}} 
```

当你在每一行后面加上一个分号

```
c = {...
    {1};... 
    {2};... 
    {3};... 
    {4};...
    {5};... 
    } 
```

任何被注释掉的行都将等同于分号，并且由于多个分号是合法的（`c = {{1};;{2};}`有效），您现在可以注释掉任意数量的行。

请注意，输出现在是 a`n-by-1`而不是`1-by-n`数组，并且您不应该调用它`cell`，因为这是内置函数的名称。

# ruby-on-rails - 将jekyll部署到heroku时出错？

> ID：11144259
> 
> 赞同：1
> 
> 时间：2012-06-21T18:15:19.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, jekyll

我正在尝试将 jekyll 应用程序部署到 heroku ......它在本地运行没有问题。

这是heroku日志

```
2012-06-21T18:02:26+00:00 heroku[web.1]: State changed from crashed to created
2012-06-21T18:02:26+00:00 heroku[web.1]: State changed from created to starting
2012-06-21T18:02:28+00:00 heroku[web.1]: Starting process with command `jekyll --server 37139`
2012-06-21T18:02:29+00:00 app[web.1]: bash: jekyll: command not found
2012-06-21T18:02:30+00:00 heroku[web.1]: Process exited with status 127
2012-06-21T18:02:30+00:00 heroku[web.1]: State changed from starting to crashed
2012-06-21T18:02:31+00:00 heroku[router]: Error H10 (App crashed) -> GET furious-dusk-3604.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-06-21T18:02:32+00:00 heroku[router]: Error H10 (App crashed) -> GET furious-dusk-3604.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-06-21T18:02:36+00:00 heroku[router]: Error H16 (Redirect to herokuapp.com) -> GET furious-dusk-3604.herokuapp.com/ dyno= queue= wait= service= status=301 bytes= 
```

线

```
2012-06-21T18:02:29+00:00 app[web.1]: bash: jekyll: command not found 
```

引起了我的注意，但我真的不知道这里可能是什么问题。在我的 Gemfile 中，我确实指定了

```
gem 'jekyll' 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:06:40.747

我假设您正在使用带有 Heroku buildpack 的 rack-jekyll。我遇到了同样的问题，Heroku 记录了崩溃。我通过创建一个 Sinatra 服务器来解决它，如下所述：[Jekyll on Heroku](http://jstorimer.com/2009/12/29/jekyll-on-heroku.html)

# c - 如何学习编写控制台模拟器？

> ID：11144260
> 
> 赞同：7
> 
> 时间：2012-06-21T18:15:30.047
> 
> 标签：c, emulation, low-level, nintendo, gameboy

> **可能重复：**
> [模拟器如何工作以及它们是如何编写的？](https://stackoverflow.com/questions/448673/how-do-emulators-work-and-how-are-they-written)

我想尝试编写一个基本的游戏机模拟器，甚至可能是 NES。我知道 C 的基础知识，而且我相当擅长 Java，所以我知道必要的编程基础知识。但我不知道的是，人们如何将所有数据处理成 C 程序并从中创建一个模拟器。我知道我应该从源代码中学习，但是在不知道它们为什么存在以及它们应该做什么的情况下，很难看到一堆代码行。如果我想学习如何编写这样的模拟器，我应该从哪里开始？

我已经搜索了互联网，但我只发现了包含太多错误的不清楚的教程，无法自行解决。我应该从哪里开始？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T18:20:32.817

你没有。你模仿硬件。您根本不必“处理”程序数据，您需要编写模仿 CPU、图形硬件、输入设备等的代码。

一个好的第一步可能是编写一个 Z-Machine 模拟器，虽然它不是控制台，但它实际上是第一个广泛使用的“模拟器”。它被用于所有的信息通信文本冒险（zork 等）。由于它是一种面向文本的游戏格式，在图形或声音方面没有太多可以模仿的东西，唯一的输入设备是键盘，您不必担心执行速度/同步。

这里有很好的记录：[http ://www.gnelson.demon.co.uk/zspec/preface.html](http://www.gnelson.demon.co.uk/zspec/preface.html)

这实际上是我打算在这些日子里自己承担的一个项目，只是一直没有找到时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T18:22:04.330

您可能首先收集有关要模拟的硬件的信息。CPU 可能是最大的一块，也是最容易获得的，所以这是一个合理的起点。

CPU 仿真器基本上读取程序的字节，解码各个指令并执行它们。您通常会分配一个大数组来表示设备的内存，并分配一些变量来表示 CPU 的寄存器。您可以通过在这些“寄存器”/内存位置上一次执行一项操作来模拟指令的执行。

您还必须在您尝试模拟的设备上找到有关 I/O 的信息——例如，代表来自特定按钮的输入的端口或内存位置，哪些地址代表屏幕等。在较新的设备上 (但通常不是大多数较旧的处理器）您还需要模拟一个单独的图形处理器。您不仅需要模拟该处理器本身，还需要模拟它与主 CPU 的连接方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T18:53:51.800

控制台模拟器是一个非常大的项目，我预测它不会很有趣。在任何游戏开始运行之前，您都必须准备好*很多东西。*

找到一个试图模拟控制台的现有开源项目可能会更有趣，看看你是否能找到任何改进它的方法。

但是如果你只是在寻找一个很有教育意义的项目，我还有一个建议：写你自己的 Scheme 解释器，或者写你自己的 FORTH 解释器。这两种语言都是最小的、优雅的语言（并且都具有非主流的语法规则！）。您可以从头开始编写自己的 Scheme 或 FORTH，并在几天内运行程序。

这些不是玩具，编写它们将具有教育意义。

想象一下：获取一份 SICP[1] 并在您自己编写的系统中运行程序！或者得到一本 FORTH 书的副本并在你自己编写的系统上解决问题！

如果你对这些项目感兴趣，谷歌搜索“写一个 Scheme 解释器”和/或“写一个 FORTH 解释器”。

PS 当我第一次开始使用计算机时，我花了很多时间在 FORTH 中进行编程，它教会了我很多东西。这些年来，我从中学到的教训一直帮助我。

[1] [http://sicpebook.wordpress.com/](http://sicpebook.wordpress.com/)

# javascript - 如何加载文件夹中的所有图像？

> ID：11144261
> 
> 赞同：8
> 
> 时间：2012-06-21T18:15:30.227
> 
> 标签：javascript, image, load

```
var img = new Image();
img.src = "images/myFolder/myImage.png"; 
```

以上只会加载 myImage.png。如何加载 myFolder 的所有图像？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T18:52:42.193

如果您的图像名称像您所说的那样是连续的，您可以为名称创建一个循环，在每次迭代时检查图像是否存在 - 如果不存在 - 打破循环：

```
var bCheckEnabled = true;
var bFinishCheck = false;

var img;
var imgArray = new Array();
var i = 0;

var myInterval = setInterval(loadImage, 1);

function loadImage() {

    if (bFinishCheck) {
        clearInterval(myInterval);
        alert('Loaded ' + i + ' image(s)!)');
        return;
    }

    if (bCheckEnabled) {

        bCheckEnabled = false;

        img = new Image();
        img.onload = fExists;
        img.onerror = fDoesntExist;
        img.src = 'images/myFolder/' + i + '.png';

    }

}

function fExists() {
    imgArray.push(img);
    i++;
    bCheckEnabled = true;
}

function fDoesntExist() {
    bFinishCheck = true;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-21T18:17:31.770

JavaScript 不能直接访问文件系统的内容。您必须首先使用服务器端脚本（用 PHP 等编写）传递内容。

然后，一旦你有了它，你就可以在你的 JavaScript 中使用一个循环来单独加载它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:17:13.160

您需要一些方法来获取该文件夹中的文件列表。这可以手动定义为数组，也可以通过 AJAX 请求检索到为您列出文件的服务器端脚本。无论哪种方式，都没有“神奇”的方法来获取文件夹中的所有图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T18:18:46.657

如果您拥有文件夹中所有文件的名称，则需要遍历并按名称打开每个图像。您不能直接加载整个文件夹，也不能在 Javascript 中访问文件系统来获取名称，您需要通过 PHP 之类的方式将它们传递给页面。

# java - jetty security-constraint auth-constraint role-name *（星号）失败

> ID：11144266
> 
> 赞同：1
> 
> 时间：2012-06-21T18:15:40.780
> 
> 标签：java, servlets, jetty, security

我正在学习 Jetty 嵌入式（ jetty-all-8.1.3.v20120416.jar ），并且我有一个简单的 servlet，我已经启用了`<security-constraint>`（HTTP BASIC）。我的两个单元测试检查授权是否正确通过和失败（一个使用我的 realm.properties 中的用户名和密码发出请求，另一个尝试在不进行身份验证的情况下连接）`<role-name>users</role-name>`，但在`<role-name>*</role-name>`. JUnit 对不正确结果的总结（参见下面的方法定义）：

> ```
> testPingServletAuthenticated(): Expected: OK, Actual: Forbidden
> testPingServletUnauthenticated(): Passed 
> ```

文件片段包含在下面（'====' 将它们分开）。我希望这是足够的信息。提前致谢！——马特

==== web.xml ====

```
servlet-mapping
  servlet-name: hello-servlet
  url-pattern: /hello-web-xml

security-constraint
  url-pattern: /*
  auth-constraint:
    role-name: users

login-config
  auth-method: BASIC
  realm-name: test security realm

security-role
  role-name: users 
```

==== 领域.properties ====

```
theuser:password,users 
```

==== HelloServlet.java ====

```
very simple doGet() 
```

==== JettySetupTest.java ====

```
public static void startJettyServer() throws Exception {
    WebAppContext webAppContext = new WebAppContext();
    webAppContext.setDescriptor("out/artifacts/diy_embedded_testing_war_exploded/WEB-INF/web.xml");
    webAppContext.setResourceBase("out/artifacts/diy_embedded_testing_war_exploded/");
    webAppContext.setContextPath(CONTEXT_PATH);
    webAppContext.setParentLoaderPriority(true);    // Q: needed?

    LoginService loginService = new HashLoginService("test security realm", "test/embed/realm.properties"); // NB: must match realm name in web.xml's <login-config><realm-name>
    webAppContext.getSecurityHandler().setLoginService(loginService);

    SERVER = new Server(PORT);
    SERVER.setHandler(webAppContext);
    SERVER.start();
}

@Test
public void testPingServletAuthenticated() throws IOException {
    Client client = Client.create();
    WebResource webResource = client.resource(BASE_URL + "/hello-web-xml");     // http://localhost:8080/app/hello-web-xml
    webResource.addFilter(new HTTPBasicAuthFilter("theuser", "password"));
    ClientResponse clientResponse = webResource
            .accept(MediaType.TEXT_PLAIN)
            .get(ClientResponse.class);     // @GET
    assertEquals(ClientResponse.Status.OK, clientResponse.getClientResponseStatus());
    assertEquals(HelloServlet.GREETING + "\n", clientResponse.getEntity(String.class));
}

@Test
public void testPingServletUnauthenticated() throws IOException {
    Client client = Client.create();
    WebResource webResource = client.resource(BASE_URL + "/hello-web-xml");     // http://localhost:8080/app/hello-web-xml
    ClientResponse clientResponse = webResource
            .accept(MediaType.TEXT_PLAIN)
            .get(ClientResponse.class);     // @GET
    assertEquals(ClientResponse.Status.UNAUTHORIZED, clientResponse.getClientResponseStatus());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:21:54.730

我想到了。`<role-name>`我对如何在 web.xml 中使用有一个基本的误解。我想如果我在中使用“*” `<security-constraint><auth-constraint><role-name>`，那么它也应该在中列出`<security-role><role-name>`。但是，我发现后者应该列出应用程序中使用的实际角色，在我的例子中是“用户”。

# javascript - Javascript：更改 innerHTML 与显示

> ID：11144274
> 
> 赞同：2
> 
> 时间：2012-06-21T18:16:01.810
> 
> 标签：javascript, innerhtml, displaytag

我正在开发一个网络表单，我希望根据用户之前的选择显示不同的输入。所以我想知道拥有一个空的 div 和使用 innerHTML 更改它所包含的内容与拥有多个 div 元素、将显示设置为无以及根据用户输入更改要显示的内容之间有什么区别。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:18:24.303

通常，您应该尽可能少地触摸 innerHTML，而不是使用诸如 createElement 和 appendChild 之类的 JavaScript 命令。

很多 innerHTML 操作在 javascript 中被认为是一种反模式。

也就是说，如果您有一个表格或 2-3 个表格，您可以继续做适合您的事情。意思是你认为更容易理解和更易于维护的代码。

在这些规模上，我怀疑任何人都会注意到使用任何一种方法的性能增益/缺陷。就个人而言，我可能会将显示设置为无。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T18:19:37.037

根据需要隐藏和显示元素几乎总是更有效，而不是创建它们然后销毁它们。

这主要是因为向文档添加节点是一项计算成本很高的操作，即使`innerHTML`是高度优化的。其次，这是因为销毁元素也意味着您销毁存储在这些元素上的任何事件处理程序，这意味着您必须重新绑定它们，这自然需要时间和不必要的代码。

另一个优点是，如果用户禁用了 Javascript 或使用不支持它的浏览器（例如屏幕阅读器），Javascript 将无法工作。如果您的所有元素都存在于您的原始 HTML 中，那么该页面至少对这些用户有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:18:11.153

如果您准备好 div，只需更改显示：

*   代码更简单
*   您的内容只有一个存储位置（div）
*   dom不必由引擎重新计算

这是处理例如标签时的标准解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T18:18:42.897

如果您使用 更改元素`innerHTML`，则在提交表单时，仅会提交显示的输入。

通过使用 隐藏元素`display`，它们仍然存在于表单中并且仍将被提交。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T18:21:29.033

如果您按类和 id 选择 div 并打开和关闭它们，它会更快。但是，如果它只是简单的文本，我只会使用innerHTML，因为您不会注意到速度差异。除非有理由拥有不同的 div IE 选择具有截然不同的内容，即可能是图形、文本和表格，那么我会制作不同的 div。

简而言之，他们都做同样的事情。

# c# - 如何找到我的多人游戏的主机 IP

> ID：11144276
> 
> 赞同：1
> 
> 时间：2012-06-21T18:16:06.627
> 
> 标签：c#, xna

我正在编写一个简单的多人 2d 游戏，确切地说是 4 人 Pong。

游戏开始时 有一个开始菜单，您可以在其中选择主持或加入游戏。4 名玩家中的一名必须主持，另外 3 名将加入。我可以在房间对面对我的其他 3 位好友大喊大叫，并告诉他们我的 ip 和端口号，但我想知道是否有办法代替搜索主机。对我来说这听起来不可能，互联网上有数百万台计算机，我怎么可能找到一台正在等待我的电话的计算机。我知道星际争霸曾经在 90 年代中期这样做过。

我有一个关于如何实现这一目标的理论。那就是使用像 sql 这样的数据库来跟踪当前谁在托管。这将是数据库的唯一用途，因为我不保留用户统计信息或任何东西。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:28:40.263

假设您在 LAN 上，您可以使用 UDP 来发现客户端。

如果客户端充当主机，它会侦听 UDP 数据报。如果它收到一个包含发现请求的请求，它会用它的 IP、端口和客户端需要的任何其他信息进行响应。（您可以包括连接的玩家数量等）

如果客户端充当客户端，它会在“加入游戏”屏幕上发送发现数据报。当主机响应时，它们被添加到选择列表中。

当用户选择服务器时，使用您在发现响应中收到的 IP 和端口，通过 IP 进行连接。

[Lidgren 网络库](http://code.google.com/p/lidgren-network-gen3/)提供了一些可能有用的不错的发现功能。

如果您不在 LAN 上，您将需要某种可全球访问的中央目录 - 可能在网站上。当有人开始新游戏时，他们的客户端会在目录中注册他们的 IP 等。然后，客户端将轮询该站点以获取服务器列表，然后将其用于填充“加入游戏”屏幕。

值得注意的是，服务器/目录方法在 LAN 环境中的效果与在 Internet 上的效果一样好。UDP 更灵活，因为它不需要客户端对目录提供者有任何了解，因为它基本上会为您“在房间里大喊大叫”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T18:23:57.917

您需要一个中央代理来识别那些托管和参与的人。

您可能还希望通过同一主机传递游戏流量，因为在打开端口和在其他防火墙后面的远程计算机之间传递直接流量等方面存在很多问题。此外，如果您保持流量集中，您可以放置在一些制衡中反对作弊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:20:30.950

在 Internet 上使用某种可以写入文件的服务器（web/ftp）。当您托管游戏时，将 IP 和端口写入文件中。当客户想要加入游戏时，函数可以检查文件并读取它。这只是首先想到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T18:25:17.737

如果这仅用于 LAN，则每个客户端都可以将 UDP 广播发送到网络子网的广播地址。

主机（或其他客户端）侦听相同的 UDP 端口。

# ruby-on-rails-3 - 使用 rails .html.erb 文件中的 text_field_tag 帮助程序通过用户输入发出 ajax GET 请求

> ID：11144280
> 
> 赞同：1
> 
> 时间：2012-06-21T18:16:27.547
> 
> 标签：ruby-on-rails-3

如何在 .html.erb 文件中使用 form_tag 和 text_field_tag 帮助器将 ajax GET 请求发送到 url 并将 text_field 的内容用作参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:36:10.367

对于 Rails 3，可以使用带有选项的标准[表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html) `form_for``:remote => true`

```
<%= form_for(@article, :remote => true) do |f| %>
  <%= f.text_field(:content) %>
  <!-- or -->
  <%= text_field_tag("article[content]", @article.content) %>
  <%= f.submit %>
<% end %> 
```

[FormTagHelpers](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)提供了`text_field_tag`许多方法来创建不依赖于表单构建器对象的表单标签。相反，您手动提供名称和值。

# c# - WCF 服务 -> 最大值

> ID：11144290
> 
> 赞同：1
> 
> 时间：2012-06-21T18:16:55.367
> 
> 标签：c#, wcf, soap, web-config

貌似这个问题已经被问过千百次了，但是每个人的配置问题都不一样。我有提供图像并接收上传图像请求的 WCF 服务器。上传图片时，当大小超过 65k 时出现错误 400。

我在 WCF 上打开了跟踪，我得到了确切的错误

```
The maximum message size quota for incoming messages (65536) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element. 
```

我知道我需要增加这个参数，但我只能在我的 web.config 文件中找到它应该在哪里。这是我在 web.config 中的内容：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ITransferService" closeTimeout="04:01:00"
          openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
          maxReceivedMessageSize="2147483647"
          textEncoding="utf-8"
          transferMode="Streamed">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="returnFaults">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="ESLMobileIhaServiceClient.ServiceMobileIha" behaviorConfiguration="returnFaults">
        <endpoint contract="ESLMobileIhaServiceClient.ServiceMobileIha" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITransferService"/>
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex">
        </endpoint>
      </service>
    </services>
    </system.serviceModel>
  <system.webServer> 
```

这里的任何人都可以帮助我解决这个问题吗？;) 尝试了 4 个小时，在 stackoverflow 上找到了不同的方法，但没有任何帮助 - 不幸的是。

**更新：**

该请求是从客户端到服务器的文件上传。启用诊断时，错误出现在服务器日志文件中。

**服务器 Web.config**

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ITransferService" closeTimeout="04:01:00"
          openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
          maxReceivedMessageSize="2147483647"
          textEncoding="utf-8"
          transferMode="Streamed">
          <readerQuotas maxDepth="128" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="returnFaults">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="ESLMobileIhaServiceClient.ServiceMobileIha" behaviorConfiguration="returnFaults">
        <endpoint contract="ESLMobileIhaServiceClient.ServiceMobileIha" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITransferService"/>
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex">
        </endpoint>
      </service>
    </services>
    </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

**客户端 App.config**

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="InputFileLocation" value="U:\vorlagen\esl_evu_demo\Mobile Instandhaltung\Testdaten\Stammdaten\"/>
    <add key="OutputFileLocationOpen" value="U:\vorlagen\esl_evu_demo\Mobile Instandhaltung\Testdaten\offen\"/>
    <add key="OutputFileLocationClosed" value="U:\vorlagen\esl_evu_demo\Mobile Instandhaltung\Testdaten\abgeschlossen\"/>
    <add key="ImageObserveLocation" value="U:\vorlagen\esl_evu_demo\Mobile Instandhaltung\Testdaten\kamerabilder\"/>
    <add key="ImageSaveLocation" value="U:\vorlagen\esl_evu_demo\Mobile Instandhaltung\Testdaten\savedimages\"/>
    <add key="DeleteImageAfterCopy" value="true"/>
    <add key="HelpFile_de_DE" value="ESL_EVU_1031_Mobile_Instandhaltung.pdf"/>
    <add key="HelpFile_fr_FR" value=""/>
    <add key="BackupLocation" value="backup\"/>
    <add key="NumOfBackups" value="3"/>
    <add key="Language" value="de_DE"/>
    <add key="FontType" value="Arial"/>
    <add key="TextSize" value="10"/>
    <add key="TitleTextSize" value="12"/>
    <add key="ButtonTextSize" value="12"/>
    <add key="IdentifikationGeraet" value="Kontrolle/Instandhaltung"/>
    <add key="ClientSettingsProvider.ServiceUri" value=""/>
  </appSettings>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri=""/>
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400"/>
      </providers>
    </roleManager>
  </system.web>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ServiceMobileIha" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
            maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:51515/ServiceMobileIha.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ServiceMobileIha"
        contract="ServiceReference1.ServiceMobileIha" name="BasicHttpBinding_ServiceMobileIha" />
    </client>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:14:46.423

代替：

```
 <system.web>
    <httpRuntime maxRequestLength="2147483647" />
  </system.web> 
```

和

```
 <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2147483647" />
  </system.web> 
```

允许整体 httpRuntime -> maxRequestLenght 增加；）

祝大家周末愉快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:13:23.553

这确实会特别影响 maxReceivedMessageSize 配置，但它可能是客户端或服务器。因为客户端正在接收回复，但服务器正在接收请求。所以这取决于哪个太大。例如，如果客户端发送大负载，但服务器发送回 void 或 bool 或其他小东西，则必须更改服务器的配置，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:09:21.177

这可能是客户端的问题。你有没有改变`maxReceivedMessageSize`，在你`maxBufferPoolSize`的`maxBufferSize`客户端？

# c++ - std::vectors 是线程安全的吗？

> ID：11144294
> 
> 赞同：1
> 
> 时间：2012-06-21T18:17:12.040
> 
> 标签：c++, multithreading, vector

> **可能重复：**
> [stl 向量并发读取线程安全吗？](https://stackoverflow.com/questions/7455982/is-stl-vector-concurrent-read-thread-safe)

我有一个具有一定数量工人的多线程程序，每个工人都有一个'workerID'，它本质上只是该线程的唯一整数。我想使用结构向量来管理这些线程。我的问题是，如果线程 4 想要在线程 8 想要访问 myVector[8] 的同时访问 myVector[4]，我会有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:19:19.517

如果您在进入多线程场景之前设置了向量，然后您只想从多个线程中*读取向量**而不修改它*，那么它是线程安全的。您甚至可以同时从两个以上的线程中*读取*相同的元素，只需确保没有线程以任何方式*修改*向量。将向量及其所有元素视为只读。

但是，对于修改，标准库中的所有容器都不是线程安全的。您需要自己实现同步。

C++11 引入了很多[同步原语](http://en.cppreference.com/w/cpp/thread)，所以如果你的编译器支持，你可以使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:22:29.987

不可以。跨线程管理向量类是不安全的，您需要使用一些同步机制（例如互斥锁）来保护对`std::vector<>`实例的读/写访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:20:05.067

你不会有问题（afaik），除非他们使用相同的元素。

但是，如果他们删除了某些东西，或者 push_back 某些东西等等，那就是个坏主意。

为了安全起见，请使用锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T18:40:33.440

一般来说 std::vector 不是线程安全的。但你想做的是安全的。如果您只在多个线程中读取向量，这将起作用。如果每个线程只写入自己的偏移量，它也可以工作。如果您开始在线程中调整向量的大小，或者如果多个线程想要写入相同的偏移量，那么肯定不会起作用。

# javascript - JavaScript/jQuery - 拦截 for 循环

> ID：11144296
> 
> 赞同：1
> 
> 时间：2012-06-21T18:17:14.503
> 
> 标签：javascript, jquery, loops, for-loop

我有一个网站和一个带有`for`使用变量 () 的循环的脚本`i`；

所以，循环看起来像这样：

```
var i;
for(i=start_n;i<=end_n;i++){
//function to execute
} 
```

所以，我需要一个可以拦截`for`循环并在单击“停止”按钮时立即停止它的函数。

我尝试了以下功能：

第一个：

```
$('#btnStop').click(function(){
i=end_n;
}); 
```

第二：

```
$('#btnStop').click(function(){
stopLoading = true;
});

for(i=start_n;i<=end_n;i++){
if(stopLoading==true){break;}
//function to execute
} 
```

他们都没有工作。那么，有没有办法拦截那个for循环并停止它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:20:34.003

你不能中断 JS 的执行。您可以做的最好的事情是让循环在 a 内运行`setInterval`，并让按钮清除该间隔，但缺点是页面必须在每次迭代之间重绘，所以最好每秒获得 60 次迭代，而不是数百万您可以正常逃脱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:20:45.223

For 循环是阻塞和并发的，您可以通过使用某种超时运行的 for 循环而不是使用 for 循环来“模拟”这一点，比如说每 10 毫秒运行一次。然而，这并不会真正完成同样的事情。

就像评论说的那样，javascript（在浏览器上）是单线程的，所以一旦你进入 for 循环，在 for 循环结束之前什么都不会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:23:09.267

您是否尝试过 setInterval 而不是 for loop ？

前任。：

```
var interval = setInterval(function(){ /*do something many times*/}, 99);
$('#stop').click(function(){ clearInterval(interval); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T18:22:19.587

你不能真正做到你想要的，但你可以用一些开销来中断循环。例如，每次循环时，您都可以执行数据库请求（ajax）来检查循环是否应该被中断。然后你可以有一个按钮来设置循环检查的“应该中断”值。

不过，我不确定这是否会按预期工作......

# vb.net - VB.NET 绘制图像（设置像素）

> ID：11144297
> 
> 赞同：0
> 
> 时间：2012-06-21T18:17:15.240
> 
> 标签：vb.net, winforms, pixel

假设我想创建宽度和高度为 64 的图像并将所有像素设置为黑色

```
dim b as bitmap

b.width = 64
b.height = 64

for y = 0 to 64
    for x = 0 to 64
        b.setpixel(x,y ,color.black)
    next
next

dim p as new panel

p.width = b.width
p.hieght = b.height
p.backgroundimage(b) 
```

代码不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:24:54.943

```
 Dim b As Bitmap = New Bitmap(64, 64)

    For y = 0 To 64

        For x = 0 To 64

            b.SetPixel(x, y, Color.Black)

        Next

    Next

    b.Save("bitmap1.bmp") 
```

# log4j - 配置 Apache 的 Chainsaw 以查看除 XML 之外的文本日志文件

> ID：11144298
> 
> 赞同：0
> 
> 时间：2012-06-21T18:17:16.873
> 
> 标签：log4j

是否可以将 Chainsaw 配置为读取已定制为常规文本而不是 XML 布局的日志文件？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T04:45:07.807

是的，可以让 Chainsaw 读取常规文本日志文件。

最简单的方法是使用 Chainsaw 的最新开发人员快照，可在此处获得：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy) - 可以使用 Mac DMG，以及包含用于 linux 的二进制文件和 shell 脚本的 tarball 和视窗。有大量的新功能和性能改进。

如果您使用 log4j fileappender 定义来创建日志文件，您可以使用 File-Load Chainsaw 配置菜单，使用第一个选择的选项（使用配置文件中的 fileappender 条目），然后浏览到您的 log4j 配置文件。

然后，您可以从该屏幕保存这个以编程方式生成的配置，并在每次 Chainsaw 启动时通过选中底部的框自动加载新创建的配置。

如果您没有使用 log4j 生成文件（Chainsaw 不关心创建日志文件的内容），您可以使用“处理日志文件”选项并使用“日志文件格式”手动创建定义，以及 patternlayout 定义或 Chainsaw 的 LogFilePatternReceiver 模式语法。

Chainsaw 将生成一个读取日志文件的配置文件，它会解析和跟踪日志文件并自动处理对文件的更新。即使文件被删除并重新生成，Chainsaw 也会继续跟踪文件。

如果您有更多问题，请告诉我，或者随时在 log4j-user 邮件列表中提问。

# ruby-on-rails - Rails 以及如何进行选择 id 的子选择

> ID：11144299
> 
> 赞同：0
> 
> 时间：2012-06-21T18:17:18.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我是 Rails 新手，我知道这是一个简单的问题，但它让我发疯。我的应用是用 Ruby 1.9.2 和 Rails 3.1 构建的。我正在编写一个应用程序来管理类似酒店的客房预订。所以这个类代表住宿：

```
class Accommodation < ActiveRecord::Base
  has_many :reservations, :dependent => :destroy
end 
```

这是预订：

```
class Reservation < ActiveRecord::Base
  belongs_to :accommodation
end 
```

预订确实有一个名为`accommodation_id`存储住宿 ID 的字段

现在我必须检查给定日期范围内的可用住宿，所以我写了这个方法：

```
def self.check_availability(params)
    # This return the unavailables accommodations
    ids_to_exclude = Reservation.select(:accommodation_id).where('start_date < ? AND end_date > ?', params[:reservation_end_date], params[:reservation_start_date])

    # HERE IS THE PROBLEM
    accommodations = Accommodation.where("id NOT IN (?)", ids_to_exclude )

    accommodations
  end 
```

第一个查询有效，但第二个返回：

```
SELECT `accommodations`.* FROM `accommodation` WHERE (id NOT IN (NULL)) 
```

我试图输出`ids_to_exclude`并且不是NULL

我究竟做错了什么？

更新：

我用 Arel 解决了这个问题。我在下面的评论中写了解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:23:19.890

`ids_to_exclude`需要提取ID

尝试

```
 reservations_to_exclude = Reservation.select(:accommodation_id).where('start_date < ? AND end_date > ?', params[:reservation_end_date], params[:reservation_start_date])

 reservations_to_exclude.each do |r|
    ids_to_exclude << r.accommodation_id
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:04:42.413

您不需要为此进行两次数据库命中，并且您可能应该在您在那里时将其设为范围。此外，我将调用传递`params`给模型方法的错误形式，您应该明确说明参数以使事情更易于理解和维护：

```
class Accommodation < ActiveRecord::Base
    def self.available_between(start_date, end_date)
        joins(:reservations).where('reservations.start_date >= ? and reservations.end_date <= ?', end_date, start_date)
    end
end 
```

然后你可以这样说：

```
all_available = Accommodation.available_between(params[:reservation_start_date], params[:reservation_end_date]).all 
```

或这个：

```
some = Accommodation.available_between(params[:reservation_start_date], params[:reservation_end_date])
                    .where(some_other_conditions)
                    .limit(10)
                    .order(:price) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:08:04.360

最后我找到了 Arel 的解决方案：

```
reservations = Reservation.arel_table

available_rooms = Accommodation.where(:id => reservations.project(:accommodation_id)
      .where( reservations[:start_date].lt(params[:reservation_end_date]) )
      .where( reservations[:end_date].gt(params[:reservation_start_date]) )) 
```

# iphone - 游戏中心分数提交

> ID：11144303
> 
> 赞同：-1
> 
> 时间：2012-06-21T18:17:33.097
> 
> 标签：iphone, objective-c, ios, xcode

我有这个基于回合的游戏，我的游戏中心正在运行，排行榜仅在提交点工作时没有按应有的方式进行。在我的游戏中，我有一个`UILabel`显示我的分数，每次你玩游戏时，它都会得到你以前的高分，所以你可以让它更高，我使用这个代码：

```
if([GKLocalPlayer localPlayer].authenticated) 
{
    NSArray *arr = [[NSArray alloc] initWithObjects:[GKLocalPlayer localPlayer].playerID, nil];
    GKLeaderboard *board = [[GKLeaderboard alloc] initWithPlayerIDs:arr];

    if(board != nil)
    {
        board.timeScope = GKLeaderboardTimeScopeAllTime;
        board.range = NSMakeRange(1, 1);
        board.category = @"750";
        [board loadScoresWithCompletionHandler: ^(NSArray *scores, NSError *error) {

            if (error != nil)
            {
                // handle the error.
                NSLog(@"Error retrieving score.", nil);
            }
            if (scores != nil)
            {
                NSString *scrVal = [NSString stringWithFormat: @"%i", ((GKScore*)[scores objectAtIndex:0]).value + 1];
                //score += 2500;
                //NSString *scrVal = [NSString stringWithFormat:@"%d",score];
                lblScore.text = scrVal;

                GKScore *myScoreValue = [[[GKScore alloc] initWithCategory:@"750"] autorelease];
                myScoreValue.value = scrVal;

                [myScoreValue reportScoreWithCompletionHandler:^(NSError *error) {

                    if(error != nil)
                    {
                        NSLog(@"Score Submission Failed");
                    }
                    else {
                        NSLog(@"Score Submitted");
                    }
                }];
            }
        }];
    }
    [board release];
    [arr release];
} 
```

我刚刚尝试过，它确实提交了一个分数，但不是正确的分数，正如您在我的代码中看到的那样，我希望它提高 1 个分数。之前的分数是 2120，它显示了，但是当我输入正确的单词并且这段代码正在运行时，它使我的新排行榜得分为 287,343,904，所以这就像后来的另外 2.8 亿个单词，但我只是做了一个。

希望有人能解释我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:30:29.440

来自 GKScore 类参考：

```
value
The score earned by the player.

@property(nonatomic, assign) int64_t value 
```

value 是一个 int，但您正在设置一个指向它的字符串指针。

# .net - .NET 套接字的 perfmon 计数器，显示接收缓冲区状态

> ID：11144307
> 
> 赞同：1
> 
> 时间：2012-06-21T18:17:43.667
> 
> 标签：.net, sockets, udp, perfmon

有谁知道 perfmon.exe 中的计数器，它将显示为 .NET 套接字缓冲的字节数？我希望在读取大量 UDP 数据包时看到一些趋势。

# java - 如何使用 Maven 正确管理 Web 应用程序的站点？

> ID：11144308
> 
> 赞同：2
> 
> 时间：2012-06-21T18:17:46.850
> 
> 标签：java, eclipse, maven

对于我的 Web 应用程序，我使用的是 Maven 标准目录布局。除了我的站点位置（我在这里谈论模板文件、*.ftl、*.xslt 等）。

相反，在**src/main/webapp**下，它们位于**site/ftl**

原因是我在 Eclipse 中开发我的应用程序，它的根目录设置为项目文件夹。因此，我定义的所有文件都将从项目根目录访问。

我认为将指向源文件夹的文件路径提供给实际未编译的代码是错误的。

这里的标准方法是什么？我不使用 Tomcat 的 WAR 部署，而是使用 Jetty 作为集成的 Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:44:37.640

据我从 java 和 scala maven 项目中了解到，模板文件的标准位置是 **src/main/webapp/templates**或**src/main/resources**内的某个地方。

正如[标准目录布局简介中所述](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)，**src/main/webapp**用于 Web 应用程序源。并且这些源代码通常不应该被编译，因为它们已经准备好被浏览器执行。

Web应用程序源与java源不同，例如前者是由浏览器执行而无需编译，而后者则需要在java插件执行之前进行编译。

# tornado - 龙卷风认证

> ID：11144312
> 
> 赞同：2
> 
> 时间：2012-06-21T18:17:59.357
> 
> 标签：tornado

我正在使用 Tornado 与 twitter 等第三方进行身份验证。

我的登录处理程序看起来像这样

```
class AuthLoginHandler(BaseHandler, tornado.auth.TwitterMixin, tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        if self.get_argument('oauth_token', None):
            self.get_authenticated_user(self.async_callback(self._on_auth))
            return
        self.authorize_redirect("/auth/login")
        return

    def _on_auth(self, user):
        if not user:
            raise tornado.web.HTTPError(500, "Twitter auth failed")
        self.set_secure_cookie("user", tornado.escape.json_encode(user))
        return 
```

我的问题是，设置安全 cookie 后是否需要在 _on_auth 中使用重定向语句？不返回带您回到调用函数。登录装饰器正在调用此身份验证处理程序。在大多数示例中，/auth/login?next= 中的下一个含义是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:22:18.240

是的，您需要重定向自己。`_on_auth`被异步调用，所以`return`不会带你到调用函数：这已经完成了，已经消失了！

关于`/auth/login?next=xxx`，下一个参数设置为请求第一次重定向到登录页面的原始页面。一旦`_on_auth`成功重定向到它，它就会被使用。

在结束时`_on_auth`，重定向：

```
self.redirect(self.get_argument('next', '/')) 
```

# iphone - 在单独的类中创建的 UIImageview 层的参考

> ID：11144318
> 
> 赞同：1
> 
> 时间：2012-06-21T18:18:11.417
> 
> 标签：iphone

在 h 文件的 @interface 和 @end 块中定义了 resumeLayer 和 PauseLayer 方法。

```
@interface MainViewController : UIViewController

@property (nonatomic, retain) UIToolbar *toolbar;
@property (strong)AVAudioPlayer *audioPlayer;
@property (nonatomic, retain) NSTimer * timer;

- (void)resumeLayer:(CALayer *)layer;
- (void)pauseLayer:(CALayer *)layer;
@end 
```

m 文件中的方法

```
-(void)pauseLayer:(CALayer*)layer
{
  CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
  layer.speed = 0.0;
  layer.timeOffset = pausedTime;
}

-(void)resumeLayer:(CALayer*)layer
{
  CFTimeInterval pausedTime = [layer timeOffset];
  layer.speed = 1.0;
  layer.timeOffset = 0.0;
  layer.beginTime = 0.0;
  CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
  layer.beginTime = timeSincePause;
 } 
```

用于在 PlayPauseAction 方法中调用 resumeLayer 和 PauseLayer 方法

```
-(void)playpauseAction:(id)sender {

if([audioPlayer isPlaying])
{
[sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
[audioPlayer pause];
[self pauseTimer];
[self pauseLayer:ImageView.layer]; // Pause the CALayer of the UIImageView

}else{
[sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
[audioPlayer play];
[self resumeTimer];

if(isFirstTime == YES){
 self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                  target:self
                                                selector:@selector(displayviewsAction:)
                                                userInfo:nil
                                                 repeats:NO];
  isFirstTime  = NO;
}
} 
} 
```

ImageView 在名为 Third 的类中定义

```
 - (void)viewDidLoad
 {
// Displays UIImageView
UIImageView* ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 300, 235)];
self.view.backgroundColor = [UIColor brownColor];
// load all the frames of our animation
ImageView.animationImages = [NSArray arrayWithObjects:    
                             [UIImage imageNamed:@"3a.png"],
                             [UIImage imageNamed:@"3b.png"],
                             nil];
// all frames will execute in 24 seconds
ImageView.animationDuration = 24;
// start animating
[ImageView startAnimating];
ImageView.layer.borderWidth = 2;
ImageView.layer.borderColor = [[UIColor whiteColor]CGColor];    
[ImageView.layer setMasksToBounds:YES];
[ImageView.layer setCornerRadius:15.0f];
[self.view addSubview:ImageView]; } 
```

我想在 MainViewController 类中获取此 ImageView.layer 的引用以用于

```
 [self pauseLayer:ImageView.layer]; 
```

暂停 imageview.layer 动画

现在我怎样才能得到这个 ImageView 的参考使用

```
 UIImageView *myImageView = [OtherClass getTheImageView]; 
```

在 playpauseAction 中使用以下来暂停和恢复 Imageview 层动画

```
 [self pauseLayer:myImageView.layer]; // Pause the CALayer of the UIImageView 
```

任何人都可以帮助我这个如何在 MainviewController 中引用 ImageView.layer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:26:36.877

要么添加一个属性`MainviewController`并`ImageView`在它准备好时设置它的值，要么使用 NSNotificationCenter 将通知从 MainViewController 发送到 ImageView；

在`ImageView`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(pauseMyLayer) name:kPauseLayerNotif object:nil]; 
```

在`MainViewController`：

```
[[NSNotificationCenter defaultCenter] postNotificationName:kPauseLayerNotif object:self]; 
```

通知机制为您提供了两个类之间非常松散的耦合，并且非常易于使用。

# jsf-2 - 如何将方法表达式添加到自定义 JSF 组件

> ID：11144319
> 
> 赞同：4
> 
> 时间：2012-06-21T18:18:13.410
> 
> 标签：jsf-2

我正在尝试创建一个自定义 JSF 组件并向其添加一个方法表达式。这是我的自定义组件的代码：

```
 @FacesComponent(AjaxCommand2.COMPONENT_TYPE)
public class AjaxCommand2 extends UIComponentBase {

    public static final String COMPONENT_TYPE = "local.test.component.AjaxCommand2";
    public static final String COMPONENT_FAMILY = "local.test.component.AjaxCommand2";

    private MethodExpression listener;

    public MethodExpression getListener() {
        return listener;
    }

    public void setListener(MethodExpression listener) {
        this.listener = listener;
    }

    @Override
    public String getRendererType() {
        return null;
    }

    @Override
    public String getFamily() {
        return COMPONENT_FAMILY;
    }
} 
```

这是我的标签库文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<facelet-taglib id="test"
                xmlns="http://java.sun.com/xml/ns/javaee"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd" version="2.0">
    <namespace>http://local.test/ui</namespace>

    <tag>
        <tag-name>ajaxCommand2</tag-name>
        <component>
            <component-type>local.test.component.AjaxCommand2</component-type>
        </component>
        <attribute>
            <name>listener</name>
            <required>false</required>
            <type>javax.el.MethodExpression</type>
        </attribute>
    </tag>
</facelet-taglib> 
```

这是JSF页面中的相关代码：

```
<test:ajaxCommand2 listener="#{testSessionBean.testActionAjax}" /> 
```

我的问题是，在我的自定义组件中永远不会调用侦听器的设置器，并且我总是在侦听器属性中得到 null。

我看不出哪里有问题。有什么想法吗？我想将 listener 属性设置为指向一个支持 bean 的特定方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:47:59.410

像这样为组件编写一个处理程序：

```
public class MoveHandler extends ComponentHandler {
    public MoveHandler(ComponentConfig config) {
        super(config);
    }

    @Override
    protected MetaRuleset createMetaRuleset(Class type) {
        MetaRuleset metaRuleset = super.createMetaRuleset(type); 
        MetaRule metaRule = new MethodRule("listener", void.class, new Class[] {MoveEvent.class});
        metaRuleset.addRule(metaRule);
        return metaRuleset; 
    }
} 
```

# c# - 实体框架中的共享连接字符串

> ID：11144320
> 
> 赞同：5
> 
> 时间：2012-06-21T18:18:18.590
> 
> 标签：c#, asp.net-mvc, entity-framework-4

我想在我的 Web.config 中创建一个连接字符串，然后在所有模块声明的“提供者连接字符串”属性中重新使用它。

示例：以这种方式声明连接字符串：

```
<add name="MyConnectionString" connectionString="Data Source=.;Initial
Catalog=MyDB;User ID=username;Password=pwd;" /> 
```

然后在模块之间共享此连接：

```
<add name="Module1Context" connectionString="metadata=res//*/Module1.csdl| ... | 
...;provider=System.Data.SqlClient;provider connection string=MyConnectionString" 
providerName="System.Data.EntityClient" /> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:00:39.610

您可以使用 ConfigurationManager.ConnectionStrings [http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings.aspx在运行时管理您的连接字符串](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:04:03.940

按照您上面描述的方式，这不是直接可能的。

几乎可以肯定，解决这个问题的工作量要比复制连接字符串、评论或取消评论条目多得多。

确保您使用[配置转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)文件来管理它。

如果您真的必须这样做，那么您将需要自己构建连接字符串，使用[EntityConnectionStringBuilder](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder.aspx)类，从您的`MyConnectionString`值中提取提供程序连接字符串。实例化时在上下文对象中设置 EntityConnection 属性；有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb896325.aspx](http://msdn.microsoft.com/en-us/library/bb896325.aspx)。

# ruby - Ruby 命名空间礼仪和约定

> ID：11144325
> 
> 赞同：2
> 
> 时间：2012-06-21T18:18:37.247
> 
> 标签：ruby, namespaces, naming-conventions

如果我正在为已建立的库编写帮助程序，我应该`TheirLibrary::MyHelper`在他们的命名空间中创建一个模块，还是留在外面并自己制作`::TheirLibraryMyHelper`？

我认为是可预见的一致，库通常有在其命名空间中添加扩展的先例，例如`Spec::Rails`，它是 RSpec 的 Rails 助手插件，在现有的`::Spec`命名空间中。

另一方面，我不觉得我“拥有”其他作者的命名空间，所以我应该有任何业务添加子命名空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:49:20.880

我会远离他们的命名空间（无论你最终选择如何命名你的扩展命名空间），因为这意味着你不会意外地与他们决定在路上做的事情发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:33:47.057

环顾四周，我注意到“插件”或“扩展”宝石的约定是必需的：

`require 'coolthing/plugin'`对应命名空间`Coolthing::Plugin`

而其他项目是

`require 'coolthing-plugin'`对应于唯一的命名空间`CoolthingPlugin`

通常只有那些“官方的”被嵌入到原始命名空间中。那些来自不同方的后续添加应该使用他们自己的命名空间。

# php - 使用连接语法的动态 MySQL 记录集查询

> ID：11144326
> 
> 赞同：0
> 
> 时间：2012-06-21T18:18:42.923
> 
> 标签：php, mysql, sql

我无法正确使用 JOIN 语法来更改 PHP 中现有的 MySQL 查询以包含来自另一个表的连接。我有另一个表指定为 DB_TABLE2，其中包含列 InvmNumr 和 InvmDesc。InvmNumr 和 InvlNumr 在每个表中的值完全相同，我需要在此查询中显示表 2 中的 InvmDesc？

```
 $res = mysql_query('SELECT LocId, InvlNumr, InvlQuant FROM ' . DB_TABLE1
          . ' WHERE LocId = \'' . mysql_real_escape_string($cType) . '\'
        AND InvlNumr = \'' . mysql_real_escape_string($br) . "'");
        $markup = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:22:52.163

尝试这个

```
SELECT db1.LocId,db1.InvlNumr,db1.InvlQuant
FROM DB_TABLE1  db1
INNER JOIN DB_TABLE2 db2 ON db1.InvlNumr = db2.InvlNumr
WHERE dbq.LocId = $cType
AND db1.InvlNumr = $br 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:28:12.237

根据您的数据在`DB_TABLE2`表中的存储方式，阅读 LEFT JOIN 与 INNER JOIN。

```
$res = mysql_query('SELECT ' . DB_TABLE1 . '.LocId, ' . DB_TABLE1 . '.InvlNumr, ' .
    DB_TABLE1 . '.InvlQuant, ' . DB_TABLE2 . '.InvmDesc 
    FROM ' . DB_TABLE1 . ' LEFT JOIN ' . DB_TABLE2 . ' ON ' . 
    DB_TABLE1 . '.InvlNumr = ' . DB_TABLE2 . '.InvmNumr 
    WHERE ' . DB_TABLE1 . '.LocId = \'' . mysql_real_escape_string($cType) . '\' 
    AND ' . DB_TABLE1 . '.InvlNumr = \'' . mysql_real_escape_string($br) . "'"); 
```

# php - 我们如何访问 Magento 模块配置？

> ID：11144331
> 
> 赞同：0
> 
> 时间：2012-06-21T18:18:53.457
> 
> 标签：php, magento

我是 Magento 的新手，我想在我创建的模块的 /etc/local.xml 中放置一些 LDAP 配置，但我就是找不到如何...

很确定每个人都知道，我在网上找不到合适的文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:07:14.373

如何从 config.xml 文件中获取特定配置的示例：

[my_module]/etc/config.xml 中的设置

```
<connexions>
    <ldap>
        <host><![CDATA[LDAP_HOST]]></host>
        <username><![CDATA[USERNAME]]></username>
        <password><![CDATA[PASSWORD]]></password>
        <baseDn><![CDATA[BASE_DN]]></baseDn>
    </ldap>
</connexions> 
```

称呼它的方式：

```
Mage::getConfig()->loadModulesConfiguration( 'config.xml' )
                 ->getNode( 'connexions/ldap')
                 ->asXML() 
```

# javascript - 为什么从 javascript 调用 flash 函数但 FileReference 在 flash 中不起作用？

> ID：11144334
> 
> 赞同：0
> 
> 时间：2012-06-21T18:19:05.390
> 
> 标签：javascript, actionscript, filereference, addcallback

我需要从 javascript 调用 flash 函数。我使用 flash.external 和 addCallback 来执行此操作。一切正常，但是当我在 Flash 中使用 FileReference 时，功能没有打开我的浏览器......

请看下面的描述：
我用这段代码在javascript中调用我的函数： `<input type="button" value="Browse" onclick="sendToFlash('Hello World! from HTML');" />` 你可以看到我所有的HTML如下：

```
<html>
<head>
<title>Upload test</title>
</head>
<script>
function hello (size) {
    alert ("size hast: " + size);
}

function sendToFlash(val){
    var flash = getFlashObject();
    flash.new_browser(val);
}

var flash_ID = "Movie2";
var flash_Obj = null;
function getFlashObject(){
    if (flash_Obj == null){
        var flashObj;
        if (navigator.appName.indexOf( "Microsoft" ) != -1){
           flashObj = window[flash_ID];
        } 
        else{
           flashObj = window.document[flash_ID];
        }
        flash_Obj = flashObj;
    }
    return flash_Obj;
}
</script>

  <body>
    <center>

    <embed width="560" height="410" type="application/x-shockwave-flash" 
    flashvars="sampleVars=loading vars from HTML" 
    salign="" allowscriptaccess="sameDomain" allowfullscreen="false" menu="true" name="Movie2" 
    bgcolor="#ffffff" devicefont="false" wmode="window" scale="showall" loop="true" play="true" 
    pluginspage="http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" 
    quality="high" src="Movie2.swf">

    </center>

    <input type="button" value="Browse" onclick="sendToFlash('Hello World! from HTML');" />
  </body>
</html> 
```

当我点击`Browse`html 页面时，javascript 调用 sendToFlash 函数和`SendToFlash`函数将我的字符串（Hello World！来自 HTML）发送到 flash。
在闪存中，我使用以下代码得到这个字符串：

```
resultsTxtField.text = "";
uploadButton.onPress = function () {
   return browse_file("Hello World! from Flash");
}

import flash.external.*;
ExternalInterface.addCallback("new_browser", this, browse_file);

function browse_file (my_test_val) {
    _root.resultsTxtField.text = "val: " + my_test_val;
    import flash.net.FileReference;
    var fileTypes:Array = new Array();
    var imageTypes:Object = new Object();
    imageTypes.description = "Images (*.jpg, *.jpeg, *.gif, *.png)";
    imageTypes.extension = "*.jpg; *.jpeg; *.gif; *.png";
    fileTypes.push(imageTypes);

    var fileListener:Object = new Object();
    var btnListener:Object = new Object();
    var fileRef:FileReference = new FileReference();
    fileRef.addListener(fileListener);
    fileRef.browse(fileTypes);

    fileListener.onCancel = function(file:FileReference):Void
    {
      _root.resultsTxtField.text += "File Upload Cancelled\n";
    }

    fileListener.onSelect = function(file:FileReference):Void
    {
      _root.resultsTxtField.text += "File Selected: " + file.name + " file size: "+ file.size + " file type: " + file.type;
      getURL("javascript:hello("+file.size+");");
    }
} 
```

我只有一个场景，这段代码在这个场景的根目录上。我有一个名为的影片剪辑`uploadButton`，并且在此示例中只有一个用作按钮的矩形。
当您单击`browse_file("Hello World! from Flash");`调用的矩形并打开浏览器时，您可以选择要上传的照片。
当您在 html 中单击时`browse`，必须执行相同的过程，但正如您看到的变量发送到功能但`browser`选择照片不再打开。
我尝试了几种方法。例如，我将新功能设置为仅打开`picture browser`或设置新场景或使用 gotoAndPlay 等等，但还有另一个问题。

您可以从以下链接下载我的源代码：
[http](http://www.4shared.com/zip/YTB8uJKE/flash_uploader.html)
://www.4shared.com/zip/YTB8uJKE/flash_uploader.html 请注意 javascript`onclick="sendToFlash('Hello World! from HTML');"`不能直接打开。您必须在本地主机中打开它。

如果有任何线索，我会很高兴的。
非常感谢
礼萨·阿米亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:01:00.650

经过一天的阅读，我知道出于安全原因这是不可能的。
那么您无法以`addCallback`任何方式使用 javascript 代码打开文件引用。有关更多信息[，请从 js 中读取 fileReference 浏览，在 Flash 解决方法中模拟按键](https://stackoverflow.com/questions/10323976/filereference-browse-from-js-simulate-keypress-in-flash-workaround?rq=1)

再次感谢
礼萨·阿米亚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:30:02.950

您不能以编程方式调用`browse()`，它必须通过鼠标在 Flash 中单击：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#browse) ()

> 在 Flash Player 10 和 Flash Player 9 Update 5 中，您只能成功调用此方法以响应用户事件（例如，在鼠标单击或按键事件的事件处理程序中）。否则，调用此方法会导致 Flash Player 引发错误异常。

# javascript - 使用 javascript 获取母版页 ContentPlaceHolders 中文本框的值

> ID：11144336
> 
> 赞同：1
> 
> 时间：2012-06-21T18:19:34.623
> 
> 标签：javascript, asp.net, visual-studio-2010, master-pages

我有一个由 Masterpage 和 contentplaceholders 组成的 asp.net 4.0 框架应用程序。我有一个对用户输入的数据进行验证的 .js 文件。如何调用 ContentPlaceHodler "cphBody" 中的文本框 "txtFirstName"（来自 .js 文件）？

**更新（代码）**
**：.aspx**

```
<asp:TextBox id="txtFirstName" runat="server" CssClass="webForm" Width="250px" MaxLength="100"></asp:TextBox>

<asp:Button id="btnContinue" runat="server" ClientIDMode="Static" onclientclick="document.getElementById('cphHeaderContent_AlertTimeMsgBox').value = GetSeconds(); return ValidateUser(1);" CssClass="webButton" Text="Continue" OnClick="btnContinue_Click" /> 
```

**.js**

```
function ValidateUser(valFormCount)
{
    var objTextBox;

    objTextBox = document.getElementById("txtFirstName"); 
```

我已经尝试过`document.getElementById("<%= txtFirstName.ClientID %>")`，但没有奏效（传递了一个空值）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T18:24:40.640

这个 asp.net 表示法

```
document.getElementById("<%= txtFirstName.ClientID %>") 
```

在 js 文件中无效

你可以设置[`ClientIDMode="Static"`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)为`TextBox`. 如果你这样做，你将能够通过 id 获取元素

**ASPX**

```
<asp:TextBox ID="txtFirstName" runat="server" ClientIDMode="Static" /> 
```

**JS**

```
var textbox = document.getElementById("txtFirstName"); 
```

**关于`ClientIDMode="Static"`**

> 这种模式完全符合您的想法，它使客户端 ID 成为静态的。这意味着您为 ID 输入的内容将用于客户端 ID。警告，这意味着如果在重复控件中使用静态 ClientIDMode，则开发人员负责确保客户端 ID 的唯一性。

# jquery - 使用 JSON 对 jQuery 函数进行排序

> ID：11144337
> 
> 赞同：1
> 
> 时间：2012-06-21T18:19:34.540
> 
> 标签：jquery, json, callback

我通过 API 从两个不同的 Google 图书书架获取图书信息，并尝试将其放入我的自定义 HTML 中，但并非所有内容都显示，这似乎是因为我的函数按顺序触发，即使我有它们按照我想要的顺序排列，一切都在 $ready 中。我需要以某种方式使用回调吗？

这是我的小提琴：http: [//jsfiddle.net/bbrLv/](http://jsfiddle.net/bbrLv/)

这是控制台的截图，显示了乱序触发的步骤：http: [//min.us/mQ0LNVYYT](http://min.us/mQ0LNVYYT)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:28:24.953

[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)作为`$.ajax`jQuery 的 -based 函数之一，实现了强大的 Promise 接口。这意味着您实际上可以通过以下方式将这些调用与[$.then()](http://api.jquery.com/deferred.then/)方法链接起来：

```
$.getJSON(myquery, function(data) {
  ... 
}).then(function() {
  $.getJSON(myquery2, function(data) {
     ...
  } 
}); 
```

更新：这是一个[更新的小提琴](http://jsfiddle.net/7yNj7/)。我必须在那里快速破解：pubdateFixer 函数。您已将其放入`$(function(){})`第二个 getJSON 处理程序中，但这是不正确的：该函数应在 getJSON 内容到达后准确触发，而不是在初始页面加载时触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:22:49.980

您正在调用异步函数。

您根本无法预测来自服务器的响应以及您的回调将被调用的顺序（是的，您尚未使用回调，因为`$.getJSON`将回调作为最后一个参数）。

因此，如果您需要确保响应处理的特定顺序，您需要使用 jquery [then](http://api.jquery.com/deferred.then/)函数（首先由 raina77ow 引用）来链接调用，或者添加另一种保护机制，例如每个响应的布尔值和一些确保您按所需顺序执行操作的代码行。

例如 ：

```
function bigOperationNeedingBothAnswers() {
}

var answersStillNotArrived=2; 

$.getJSON(firstQuery, function (data) {
   // some things
   if (--answersStillNotArrived==0) bigOperationNeedingBothAnswers();
}
$.getJSON(otherQuery, function (data) {
   // some things
   if (--answersStillNotArrived==0) bigOperationNeedingBothAnswers();
} 
```

# ios - 在 cocos 2d 中实现 facebook api 的最佳方法

> ID：11144346
> 
> 赞同：0
> 
> 时间：2012-06-21T18:20:22.330
> 
> 标签：ios, facebook, api, cocos2d-iphone

我正在努力寻找一种在 cocos 2d 中实现 Facebook api 的方法，但我找不到。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:25:32.367

最好的方法是使用类似“共享实例”函数的单例模型对象。

这样，当应用程序开展业务并且您不需要 FB 时，您可以将会话保留在一边并按如下方式调用它。

```
//create a static void

static FacebookModel *sharedInstance = nil;

//In the model
+(FacebookModel *) sharedInstance {

if (sharedInstance == nil) {
<INSTANTIATE FACEBOOK with an FB property>
<LOG INTO FACEBOOK with that property>
    }
return sharedInstance;
}

-(void)selectorWhichPostsToFacebook {
<USE CODE HERE TO POST TO FB>
>

//In your view did load for any class that needs it...
FacebookModel *fM = [FacebookModel sharedInstance];

//then when you need to actually use fb to do something...
[fM selectorWhichPostsToFB]; 
```

# jmock - 如何在 jmock 中使用状态？

> ID：11144347
> 
> 赞同：0
> 
> 时间：2012-06-21T18:20:26.110
> 
> 标签：jmock

我正在编写一个集成测试来模拟来自前端的一系列动作。我正在设置这样的期望：

```
context.checking(new Expectations() {{
  States state = states("service");

  allowing(service).getPendingTxn();
  will(returnValue(null));
  when(state.isNot("has-pending-txn"));

  one(service).createPendingTxn();
  will(returnValue(txnId));
  then(state.is("has-pending-txn"));

  allowing(service).getPendingTxn();
  will(returnValue(transaction));
  when(state.is("has-pending-txn"));
}}); 
```

然后，被测代码按该顺序进行调用。

这对我不起作用。看起来 service.getPendingTxn() 正在返回一个 jMock 空对象，而不是提供的值。我认为当我在期望之后同时写 will(...) 和 when(...) 时，我做错了，但我不确定。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:29:40.913

根据 Duncan 的建议，答案是这正是您使用状态的方式。我在测试中遇到了另一个问题，我错误地将其归因于与州有关。

# c# - 只实现部分透明（winforms/Directx）

> ID：11144353
> 
> 赞同：0
> 
> 时间：2012-06-21T18:20:39.063
> 
> 标签：c#, .net, directx

我按照以下说明操作：[如何在透明窗口中绘制透明 DirectX 内容？](https://stackoverflow.com/questions/148275/how-do-i-draw-transparent-directx-content-in-a-transparent-window)，然后按照指示将 FormBorderStyle 更改为“none”，但这只会导致部分透明，而不是完全透明，我可能会遗漏什么吗？我正在使用 MS VS 2010。

# c - gdb步入动态函数

> ID：11144357
> 
> 赞同：0
> 
> 时间：2012-06-21T18:21:00.837
> 
> 标签：c, debugging, gdb, openssl, function-pointers

我正在调试函数调用的 OpenSSL 库中的段错误

```
s->method->ssl_read(s,buf,num) 
```

由动态函数指针设置。当它指向时我想进入它

```
ssl23_read 
```

但是设置断点`ssl23_read`不起作用。我不确定调试如何与动态函数指针一起工作，对我来说很直观答案可能是“不同”或“不是”。在这种情况下，您会使用什么调试策略？

顺便说一句，只是交换调用不起作用，或者至少不容易 - OpenSSL 库进行了一些检查，以确保您不直接调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:41:41.020

> 在 ssl23_read 中设置断点不起作用

以什么方式不起作用？

如果 GDB 设置了断点，但断点从不触发，那么要么

1.  该函数实际上没有被调用，或者
2.  GDB 中有一个错误，它错误地设置了断点。

如果是 2，请检查最近的 GDB 中是否仍然存在该错误，并为其提交错误报告。作为一种解决方法，可能*会*`break * &ssl23_read`设置断点以使其触发。

# ios - iOS 音频加速

> ID：11144362
> 
> 赞同：2
> 
> 时间：2012-06-21T18:21:21.743
> 
> 标签：ios, audio, opengl-es-2.0, signal-processing, vdsp

有人成功使用 OpenGLES2.0 着色器 (GLSL) 进行音频合成吗？

我已经在我的 iOS 应用程序中使用 vDSP 来加速音频，它提供了一个来自 C 代码的简单矢量指令集。vDSP 的主要问题是您必须编写相当于面向向量的汇编语言，因为每个样本的主循环被推入每个原始操作（向量加法、向量乘法）。将表达式编译到这些序列中是着色器语言为您自动化的本质。OpenCL 在 iOS 中不公开。有趣的是，GLSL 是在运行时编译的，这意味着如果大部分声音引擎都可以在 GLSL 中，那么用户可以做出不平凡的补丁贡献。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:49:38.780

尽管 iOS GPU 着色器可以相对“快速”，但从 GPU 加载和恢复数据（纹理、处理的像素等）的路径足够慢，足以抵消使用 GLSL 带来的任何当前着色器计算效率。

对于实时合成，GPU 像素卸载路径的延迟远大于仅使用 CPU 合成来馈送 RemoteIO 的最佳音频响应延迟。例如，显示帧速率（GPU 流水线锁定的）比最佳 RemoteIO 回调速率慢。在这些短音频缓冲区中没有足够的并行性可以利用。

# vba - 合并和删除数据行

> ID：11144365
> 
> 赞同：-1
> 
> 时间：2012-06-21T18:21:31.197
> 
> 标签：vba, excel

我需要编写一个宏来清理 Excel 文档。我现在可以使用大多数功能，但是在将两行数据合并在一起时遇到了麻烦。我需要先合并两行数据，然后删除第二行。这段代码来自我遇到问题的函数，我正在删除正确的行，但我想首先将我要删除的行与上面的行合并在一起，这样就不会丢失数据；有谁知道是否有一个快速命令可以将整行合并在一起，还是我必须逐个单元格地进行。

```
For RowCount = Selection.Rows.Count To 1 Step -1

    ' Delete rows that don't have text in col A
    If Selection.Cells(RowCount, 1).Text <> "" And IsNumeric(Selection.Cells(RowCount, 1).Value) Then
        'Is Number

    ElseIf Selection.Cells(RowCount, 1).Text = "Heading" Then
        'Its the Heading
    Else

        'Its not needed!
        '*********************************************************
        'CODE TO MERGE TWO ROWS SHOULD GO HERE********************
        '(MERGE ROWCOUNT-1 WITH ROWCOUNT AND DELETE ROWCOUNT)*****
        '*********************************************************

        Selection.Rows(RowCount).EntireRow.Delete
    End If

' Start next iteration of RowCount loop.
Next RowCount 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:57:25.680

我认为您需要逐个单元格地进行操作。

代替：

```
'*********************************************************
'CODE TO MERGE TWO ROWS SHOULD GO HERE********************
'(MERGE ROWCOUNT-1 WITH ROWCOUNT AND DELETE ROWCOUNT)*****
'********************************************************* 
```

和：

```
Dim ColumnCount As Integer, intCnt As Integer
ColumnCount = Selection.columns.count

For intCnt = 1 To ColumnCount

    Dim strRow As String, strPrevRow As String
    strRow = Selection.Cells(RowCount, intCnt).Text
    strPrevRow = Selection.Cells(RowCount, intCnt).offset(-1).Text

    Selection.Cells(RowCount, intCnt).offset(-1) = strRow & " " & strPrevRow

Next 
```

# asynchronous - 实现一个 IObservable 来计算 Pi 的位数

> ID：11144368
> 
> 赞同：0
> 
> 时间：2012-06-21T18:21:35.080
> 
> 标签：asynchronous, system.reactive, pi

这是一项学术练习，我是 Reactive Extensions 的新手，并试图了解这项技术。我为自己设定了一个目标，即制作一个返回 Pi 的连续数字的 IObservable（由于不相关的原因，我现在恰好对 Pi 很感兴趣）。Reactive Extensions 包含用于制作 observables 的运算符，它们给出的指导是您应该“几乎永远不需要创建自己的 IObsevable”。但是我看不到如何使用现成的运算符和方法来做到这一点。让我再解释一下。

我计划使用[一种算法](http://www.boyet.com/Articles/PiCalculator.html)，该算法将涉及扩展 Arctan 的泰勒级数。为了获得下一位 Pi，我将在该系列中扩展更多术语。

所以我需要异步进行系列扩展，偶尔将下一个计算数字扔给 IObserver。我显然不想为每个新数字从头开始重新计算。

有没有办法使用 RX 的内置运算符来实现这种行为，还是我必须从头开始编写一个 IObservable？什么策略表明自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:29:13.020

对于这样的事情，最简单的方法是使用[Subject](http://msdn.microsoft.com/en-us/library/hh229173%28v=vs.103%29.aspx)。Subject 既是 IObservable 又是 IObserver，这听起来有点奇怪，但它允许您像这样使用它们：

```
class PiCalculator
{
    private readonly Subject<int> resultStream = new Subject<int>();

    public IObservable<int> ResultStream
    {
        get { return resultStream; }
    }

    public void Start()
    {
        // Whatever the algorithm actually is
        for (int i = 0; i < 1000; i++)
        {
            resultStream.OnNext(i);
        }
    }
} 
```

所以在你的算法中，`OnNext`只要你想产生下一个值，你就可以调用这个主题。

然后使用它，你只需要这样的东西：

```
var piCalculator = new PiCalculator();
piCalculator.ResultStream.Subscribe(n => Console.WriteLine((n)));
piCalculator.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:17:10.590

最简单的方法是创建一个`Enumerable`然后转换它：

```
IEnumerable<int> Pi()
{
    // algorithm here
    for (int i = 0; i < 1000; i++)
    {
        yield return i;
    }
} 
```

用法（对于冷可观察，即每个新的“订阅”都从头开始创建 Pi）：

```
var cold = Pi().ToObservable(Scheduler.ThreadPool);
cold.Take(5).Subscribe(Console.WriteLine); 
```

如果你想做到`hot`（每个人都共享相同的基础计算），你可以这样做：

```
var hot = cold.Publish().RefCount(); 
```

它将在第一个订阅者之后开始计算，并在他们全部断开连接时停止。这是一个简单的测试：

```
hot.Subscribe(p => Console.WriteLine("hot1: " + p));
Thread.Sleep(5);    
hot.Subscribe(p => Console.WriteLine("hot2: " + p)); 
```

这应该`hot1`只显示打印一段时间，然后`hot2`在短暂等待后加入，但打印相同的数字。如果使用 完成此操作`cold`，则两个订阅都将从 0 开始。

# java - 在 context.xml 中不起作用。想启动一个用于单元测试的 sql 脚本

> ID：11144369
> 
> 赞同：4
> 
> 时间：2012-06-21T18:21:35.887
> 
> 标签：java, spring, hibernate, junit

这是我的上下文文件。：

```
<beans default-lazy-init="true" xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"> <!--Line 11-->

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">    <!---->
    <property name="driverClassName" value="org.hsqldb.jdbc.JDBCDriver"/>
    <property name="url" value="jdbc:hsqldb:mem:mydb"/>
    <property name="username" value="sa"/>
    <property name="password" value=""/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="configLocation" value="hibernate.cfg.xml.incDTD"/>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.connection.shutdown">true</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
<property name="sessionFactory" ref="sessionFactory"/>
 </bean>

<jdbc:embedded-database id="embedded" type="HSQL"/>
<jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="classpath:ctl_data-scrubd.sql"/>
</jdbc:initialize-database> 
```

我收到这个错误

```
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 11 in XML document from class path resource [PersistenceHelper-context.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 11; columnNumber: 64; <Line 11, Column 64>: XML-24500: (Error) Can not build schema 'http://www.springframework.org/schema/jdbc' located at 'http://www.springframework.org/schema/jdbc/spring-jdbc.xsd' 
```

我想启动一个用于测试的 sql 脚本。我需要从这个 xml 文件中启动它。我读过使用它不起作用。有谁知道我如何解决这个问题，或者从内部启动 .sql 文件的另一种方法。如果您想查看更多我的代码，请告诉我。

编辑：：

我在另一个网站上发布了同样的问题，我得到了一些建议。现在的错误是：

```
at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean   with name 'org.springframework.jdbc.datasource.init.DataSourceInitializer#0': Invocation of init method failed; nested exception is org.springframework.dao.DataAccessResourceFailureException: Failed to execute database script; nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement at line 1 of resource class path resource []: bin
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean 
```

这也是我现在的配置文件。我所做的只是添加一个版本并移动一些声明：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-This is the spring configuration file for test cases.-->
<beans default-lazy-init="true" xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:jdbc="http://www.springframework.org/schema/jdbc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/jdbc
http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

<tx:annotation-driven transaction-manager="transactionManager"/> 
```

其余的都是一样的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T11:24:34.207

只是为了完成答案，这就是对我有用的上下文（**Spring 3.2.1**）：

```
<beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:jdbc="http://www.springframework.org/schema/jdbc"
            xsi:schemaLocation="http://www.springframework.org/schema/beans
                                                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                                                    http://www.springframework.org/schema/jdbc
                                                    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">
    <jdbc:embedded-database id="dataSource" type="HSQL">
        <jdbc:script location="classpath:schema.sql" />
        <jdbc:script location="classpath:data.sql" />
    </jdbc:embedded-database>
</beans> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T21:54:12.990

通过将定义 xmlns:jdbc="http://www.springframework.org/schema/jdbc" 移到顶部并在定义中添加版本号“spring-jdbc-3.0.xsd”来解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T22:09:39.427

你能确认你的类路径中有spring-jdbc jar吗

# javascript - 在没有 jQuery mobile 的移动设备上使用 mousedown 事件？

> ID：11144370
> 
> 赞同：33
> 
> 时间：2012-06-21T18:21:38.293
> 
> 标签：javascript, jquery, jquery-mobile, mouseevent

我已经构建了一个 webapp，为了稍微润色一下，我想添加 mousedown 和 mouseup 处理程序来交换图像（在这种情况下，使按钮看起来像是被按下了）。

我的代码是这样的：

```
window.onload = function() {
    //preload mouse down image here via Image()
    $("#button_img").mousedown(function(){$("#button_img").attr("src","button_on.png");});
    $("#button_img").mouseup(function(){$("#button_img").attr("src","button_off.png")});
} 
```

这在桌面上运行得很好，但在移动设备上（在 iOS Safari 中测试），mousedown 和 mouseup 事件同时发生，所以实际上什么也没发生。

我尝试在 jQueryMobile 中使用 vmousedown 和 vmouseup 事件，但是这段代码：

```
//include jquerymobile.js and jquerymobile.css 
window.onload = function() {
    //preload mouse down image here via Image()
    $("#button_img").vmousedown(function(){$("#button_img").attr("src","button_on.png");});
    $("#button_img").vmouseup(function(){$("#button_img").attr("src","button_off.png")});
} 
```

只是给了我 vmousedown 和 vmouseup 不存在的错误。此外，jQueryMobile 覆盖了我已经为页面编写的 CSS。

那么有没有办法让 vmousedown 和 vmouseup 工作，并且在没有 jQuery Mobile 的 CSS 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-21T19:20:22.973

您正在寻找`touchstart`和`touchend`。它们是那些试图模仿`vmousedown`的事件。`vmouseup`

这是一个例子：

```
window.onload = function() {
    //preload mouse down image here via Image()
    $("#button_img").bind('touchstart', function(){
        $("#button_img").attr("src","button_on.png");
    }).bind('touchend', function(){
        $("#button_img").attr("src","button_off.png");
    });
} 
```

这在任何支持触摸事件的设备上都可以在没有任何框架的情况下工作。[你可以使用Modernizr](http://www.modernizr.com)之类的东西来做这个测试，如果设备不支持触摸事件，绑定到常规桌面事件。

当您使用`touchstart`//您会得到一些有趣的信息`touchend`，`touchmove`例如一次发生了多少次触摸，因此您可以检测用户是否在滚动或尝试缩放。

**更新**

由于`event`事件处理程序中的对象对于触摸事件和鼠标事件是不同的，如果你想知道事件的坐标，你可以做这样的事情（下面的例子假设 Modernizr 已经加载）：

```
//determine which events to use
var startEventType = 'mousedown',
    endEventType   = 'mouseup';

if (Modernizr.touch === true) {
    startEventType = 'touchstart';
    endEventType   = 'touchend';
}

//bind to determined event(s)
$("#button_img").bind(startEventType, function(event) {

    //determine where to look for pageX by the event type
    var pageX = (startEventType === 'mousedown')
                ? event.pageX
                : event.originalEvent.touches[0].pageX;

    ...
})... 
```

**更新**

我正在查看这个，似乎您不需要在绑定事件处理程序之前检测事件类型：

```
//bind to determined event(s)
$("#button_img").bind('mousedown touchstart', function(event) {

    //determine where to look for pageX by the event type
    var pageX = (event.type.toLowerCase() === 'mousedown')
                ? event.pageX
                : event.originalEvent.touches[0].pageX;

    ...
})... 
```

如果您担心快速连续接收这两个事件，您可以使用超时来限制事件处理程序：

```
//create timer
var timer = null;

//bind to determined event(s)
$("#button_img").bind('mousedown touchstart', function(event) {

    //clear timer
    clearTimeout(timer);

    //set timer
    timer = setTimeout(function () {

        //determine where to look for pageX by the event type
        var pageX = (event.type.toLowerCase() === 'mousedown')
                    ? event.pageX
                    : event.originalEvent.touches[0].pageX;

        ...

    }, 50);
})... 
```

注意：您可以使用开发人员工具快速连续地强制`mousedown`和`touchstart`事件，但我不确定这里的真实用例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-07T23:31:43.113

您是否考虑过使用 CSS 来设置按钮的样式？当`:active`用户单击/触摸元素时将触发状态。这是一个例子：

```
/* Default state */
#button_img {
    background-image: url('button_off.png');
}

/* Clicked/touched state */
#button_img:active { 
    background-image: url('button_on.png');
} 
```

CSS 的性能会更高，您还可以更好地分离关注点（显示与逻辑等）。

JSBin：http: [//jsbin.com/beyin/1/](http://jsbin.com/beyin/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-02T20:52:46.977

有一种方法可以获得 jQueryMobile 的`vmouseup`、`vmousedown`、`vmousemove`、`vclick`等功能，而无需获得 jquerymobile 的所有其余部分（尤其是副作用）（即增强、额外的 css 等）

*   转到[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)（用于下载自定义构建的 jquerymobile 的工具，其中仅包含您需要的组件）
*   仅选择“虚拟鼠标 (vmouse) 绑定”
*   下载它。

下载将仅包含一个 .js 文件（最小化和未压缩版本）。没有CSS。

在纯 jquery 之后将此脚本链接到 html 的头部，并像这样使用它：

```
<head>
  <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
  <script src="whatever/path/jquery.mobile.custom.min.js"></script>
  <script>
    $(function(){ // or replace this with window.onload for that matter
      // Your code here, e.g.
      $("#button_img").on("vmousedown", function() { 
        /*whatever*/
      });
      // CAUTION: this won't work (see note below):
      // $("#button_img").vmousedown(function(){/*whatever*/}); // WON'T WORK
    });
  </script>
</head> 
```

**注意**：方法`.vmousedown()`,`.vmouseup()`等将不起作用。您必须将事件侦听器与`.on("vmousedown", ...)`. 不知道为什么：我猜这是因为创建与事件同名的快捷方法的 jquerymobile 部分位于其他模块中。也许可以找出它是哪个模块并将其包含在下载中，但我认为它会迫使您包含其他不需要的依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-24T21:01:03.123

对触摸设备使用 touchstart 或 touchend。

大多数时候，您想要捕捉 touchstart 和 mousedown。您需要确保处理程序只触发一次。最简单的方法是同时捕获它们并调用 e.preventDefault()。

```
$("#button_img").on('touchstart mousedown', function(e) {
  //your code...

  e.preventDefault(); //prevents further events from being dispatched
} 
```

来源：[developer.mozilla.org](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events/Supporting_both_TouchEvent_and_MouseEvent)：

> 如果浏览器因为单个用户输入而同时触发触摸和鼠标事件，则浏览器必须在任何鼠标事件之前触发 touchstart。因此，如果应用程序不希望在特定触摸目标元素上触发鼠标事件，则该元素的触摸事件处理程序应调用 preventDefault() 并且不会调度其他鼠标事件。

# c# - 你在理解代表方面的“啊哈时刻”是什么时候？

> ID：11144372
> 
> 赞同：0
> 
> 时间：2012-06-21T18:21:46.240
> 
> 标签：c#, performance, delegates, unity3d

考虑到在 C# 中使用委托，有谁知道是否有性能优势或者是否方便程序员？如果我们正在创建一个包含方法的对象，听起来好像该对象将是内存中要调用的常量，而不是每次调用时都加载该方法。例如，如果我们查看以下基于 Unity3D 的代码：

```
public delegate H MixedTypeDelegate<G, H>(G g)

public class MainParent : MonoBehaviour // Most Unity classes inherit from M.B.
{
    public static Vector3 getPosition(GameObject g)
    {
        /* GameObject is a Unity class, and Vector3 is a struct from M.B.
        The "position" component of a GameObject is a Vector3\. This method
        takes the GameObject I pass to it & returns its position. */

        return g.transform.position;
    }

    public static MixedTypeDelegate<GameObject, Vector3> PositionOf;

    void Awake( ) // Awake is the first method called in Unity, always.
    {
        PositionOf = MixedTypeDelegate<GameObject, Vector3>(getPosition);
    }
}

public class GameScript : MainParent
{
    GameObject g = new GameObject( );
    Vector3 whereAmI;

    void Update( )
    {
        // Now I can say:
        whereAmI = PositionOf(g);

        // Instead of:
        whereAmI = getPosition(g);
    }
} 
```

. . . 但这似乎是一个额外的步骤 - 除非有额外的小东西可以帮助。

我想问第二个问题的最简洁的方式是说：当你在理解代表时有你的 aha 时刻，上下文/场景/来源是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:35:42.727

代表的目的是事件。将委托添加到事件的能力对我来说很有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:16:02.890

委托的目的是在代码中提供运行时分支点。

```
class Foo
{
    public void Method1()
    {
    }

    public SomeDelegateType Method2;
} 
```

Method1 是一个固定的代码点，调用它总是会导致执行相同的代码（Method1 的主体）。Method2 是一个委托。您可以将委托视为“指向零个或多个方法的指针”。分配给委托的每个方法都按照添加的顺序调用。调用它的结果可以在运行时改变，因为可以随意添加/删除方法。

将委托视为“变量方法”的另一种方式。您使用变量来保存可以更改的值。您使用委托来保存可以更改的方法“地址”。我在这里松散地使用术语“地址”以保持答案简单。

**添加**

针对您的评论，如果我理解正确，您想知道如何指定委托类型。

必须定义委托类型，就像任何其他类型一样：

```
// define a delegate type that returns 'float' and accepts zero parameters
delegate float AMethodThatReturnsSingle();

// here is a method that accepts one of those as a parameter
float Method(AMethodThatReturnsSingle d)
{
    // call the passed in delegate and return its value
    return d();
} 
```

.Net Framework 提供了许多对常见情况有用的委托类型。这是我们上面声明的使用通用`Func<>`委托类型的自定义委托的替代品：

```
float Method(Func<float> d)
{
    // call the passed in delegate and return its value
    return d();
} 
```

Func 有多种形式来支持参数：

```
// Encapsulates a method that has no parameters and returns a value of the type
//     specified by the TResult parameter.
delegate TResult Func<TResult>();
// Encapsulates a method that has one parameter and returns a value of the type
//     specified by the TResult parameter.
delegate TResult Func<T, TResult>(T arg);
// Encapsulates a method that has two parameters and returns a value of the type
//     specified by the TResult parameter.
delegate TResult Func<T1, T2, TResult>(T1 arg1, T2 arg2); 
```

还有`Action<>`一个不返回任何内容并采用您指定的类型的零个或多个参数（我相信最多定义四个）。

有`Predicate<>`一个返回 bool 并采用您指定的类型的一个或多个参数。

还有普遍存在的`EventHandler<T>`，这是推荐用于事件的类型。

仅举几个。

# django - 以 JSON 形式存储数据的最 RESTful 方式？

> ID：11144373
> 
> 赞同：1
> 
> 时间：2012-06-21T18:21:46.483
> 
> 标签：django, json, post, get, request

我有一个 Django 服务器，负责将 JSON 格式的文件提供给控制器机器。我的服务器从 POST 请求中获取数据，并在 GET 请求中提供 JSON 文件。我想知道在服务器上创建这个桥的最 RESTful 和最有效的方法是什么？

我正在考虑为每个 POST 请求创建一个 JSON 模型并将实例存储在我的数据库中，并将这些实例动态地打包到 JSON 文件中，并在 GET 请求上为它们提供服务。另一种方法是在 POST 请求上创建 JSON 文件，将它们保存在服务器上的文件夹中，并在 GET 请求上提供这些文件。

哪种方式更好，为什么？还是我没有看到更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:27:38.520

你为什么要创建文件？您可以让 Django 视图返回 JSON 响应而不是 HTML 响应：

```
import json

# in your view:
data = {}
return HttpResponse(json.dumps(data), mimetype="application/json") 
```

从可用数据动态构造 JSON 数据，如果 JSON 响应很大，则添加缓存（例如，[`memcached`](http://memcached.org/)或[`Varnish`](https://www.varnish-cache.org/)）。

这将防止某些问题（如果 GET 请求完成但还没有 JSON 文件怎么办？）。这样，您可以根据您拥有的数据生成 JSON，或者返回带有错误消息的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:06:52.937

我研究了带有自然键和依赖项等的[json 序列化](https://docs.djangoproject.com/en/dev/topics/serialization/#id2)，以控制被序列化的字段。我还尝试使用中间件[wodofstuff](http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers)来实现更深层次的外键序列化。但是，我决定使用模板来呈现 JSON 响应。

一些陷阱是

*   我负责格式化 JSON（更容易出错，例如缺少分号）
*   我负责转义字符
*   渲染比内置序列化慢？

一些优点是

*   我可以控制序列化的内容（即使基础模型已更改）
*   我可以格式化 JSON 文件上的多对多或外键关系，但我喜欢

低密度脂蛋白；就我而言，我需要的 JSON 文件的格式是非常自定义的。它在字典列表中有字典。有些字段是迭代的，所以我在模板中有 for 循环来呈现它们。但是，该格式要求将迭代对象中的某些字段封装在列表中，而不是字典。

这是我在考虑[simplejson](http://simplejson.readthedocs.org/en/latest/index.html)时遇到的障碍。通过使用类似的东西

```
import simplejson as json
def encode_complex(obj):
    if isinstance(obj, complex):
        return [obj.real, obj.imag]
    raise TypeError(repr(o) + " is not JSON serializable")
json.dumps(2 + 1j, default=encode_complex)
'[2.0, 1.0]' 
```

我可以设法返回迭代数据；但是，我需要迭代中的迭代和自定义对象类型（列表或字典）来封装某些迭代。最后，（可能是缺乏知识或缺乏耐心）我决定只在模板中进行。

我觉得通过模板渲染它不是最可扩展或“最智能”的方式，它可能以更好的方式完成吗？请随时证明我是对还是错。

# ruby - Ruby：选择一组元素通过测试的数组索引

> ID：11144374
> 
> 赞同：2
> 
> 时间：2012-06-21T18:21:49.380
> 
> 标签：ruby, arrays

Ruby 有一个`select`方法，它接受一个数组并返回一个子数组，该子数组由通过块中给出的测试的所有元素组成：

```
myarray.select{|e| mytest(e)}   #=> subarray of elements passing mytest 
```

我想知道是否有一种简单的方法可以不获取这些元素，而是获取它们的索引。我知道你可以这样做：

```
indices = []
myarray.each_with_index{|e,i| indices << i if mytest(e)} 
```

但我正在寻找单线。一个存在吗？请不要为 Array 类编写扩展，我知道您可以通过这种方式获得单行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T18:32:57.887

另一个单行：

```
(0...myarray.length).select {|i| mytest(myarray[i])} 
```

干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T18:30:55.253

这是给你的单线。它选择长度为 3 的元素的索引。

```
a = ['foo', 'bar', 't']
a.map.with_index{|el, i| i if el.length == 3}.compact # => [0, 1] 
```

或另一个（@fl00r 建议）：

```
a.reduce([]){|ar,el| ar << a.index(el) if el.size == 3; ar} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:58:26.330

还，

```
myarray.select{|e| mytest(e)}.map!{|e| myarray.index(e)} 
```

但是，如果您有任何重复的元素，这将无法正常工作。

# c# - C#，输出多个值的方法

> ID：11144375
> 
> 赞同：2
> 
> 时间：2012-06-21T18:21:51.403
> 
> 标签：c#

我正在使用 c#。

我有一个输出多个值的方法。我知道但这是一个参考类型**。**是否有任何等效于值类型但也可以从方法中输出多个值的东西。使用引用类型，值也会在方法之外更改，所以我想阻止。

```
 out 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T18:23:42.057

> 我知道但这是一个参考类型**。**

不清楚你的意思。`out`根本不是类型 - 它是参数的装饰器。您可以将其与引用类型或值类型一起使用：

```
// Nasty, but it does work...
void SplitInTwo(string input, out string x1, out string x2, 
                out int actualSplitCount)
{
    string[] bits = input.Split('/');
    x1 = bits[0];
    x2 = bits[1];
    actualSplitCount = bits.Length;
} 
```

所以你*可以*使用`out`任何一种方式。但是，我强烈建议您*不*要这样做。您可以将`Tuple`类型族用于特定的多个值，但如果返回的值实际上是相关的，则应考虑将它们封装到单独的类型中，并返回该类型的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:31:14.277

我建议创建一个类来描述您的返回值，并为您需要返回的每个值提供属性。

如果您不需要经常传递结果，元组是一个不错的选择，但通常它更难维护。我更喜欢使用有意义的属性名称，而不是 Tuple 提供的 Item1、Item2、Item3 等。out 参数也可以工作，但它们需要以不同的方式编写调用代码以适应方法实现，我建议尽可能避免使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:31:26.017

类似的东西：

```
class MultiValue
{
    type A {
        get { return m_A; }
        set { m_A = value; }
    }

    type B{
        get { return m_B; }
        set { m_B = value; }
    }

    private type m_A;
    private type m_B;
} 
```

可以根据您要执行的操作来工作（在单个实例中返回值，或者您是否需要在一段时间/方法内维护这些值）。

但是这些`Tuple`类型也会实现类似的效果，同样，根据您想要在程序中执行的操作，结果会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T18:23:00.163

`out`关键字（和`ref`关键字）用于表示一个变量是从调用者的作用域提供的。它们不会改变相关类型的性质。

[out 参数修饰符（C# 参考）@MSDN](http://msdn.microsoft.com/en-us/library/ee332485.aspx)

如果您担心要求调用者在`out`每次使用您的方法时都被强制指定，您可以使用 Helper 类或 a`Tuple`来包装返回的值集。

[元组类@MSDN](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

您提到您担心引用类型被更改。这不应该是您的方法的问题。指定的参数`out`并非在您的方法可能使用的所有情况下都共享，它们在调用您的方法的范围内是本地的。只有调用者需要担心，而且只在他们自己的范围内。

最后，如果您想指示可以更改或使用变量而不需要根据需要为其分配值`out`，请使用`ref`.

# java - 创建一种方法来确定两个数字中的较大者

> ID：11144377
> 
> 赞同：1
> 
> 时间：2012-06-21T18:21:55.913
> 
> 标签：java, methods

在这个作业中，我必须使用命令行参数编写一个 Java 程序。需要一种方法： `getMax`，它将两个整数变量作为输入并返回两者中较大的一个。您的主要方法必须如下所示（注释除外）。

```
 … main( String[] args)
  {   
 int num1, num2;
 num1 = Integer.parseInt(args[0]);
 num2 = Integer.parseInt(args[1]);
 System.out.println(“the bigger value of the two is : “ + getMax(num1, num2));
 } 
```

您的程序可能会像这样工作：

`java Assign5 23 67`

两者的较大值是67

到目前为止，这就是我所拥有的；这个对吗？

```
public class Assign5{
   public static void main(String[] args) {
     int num1, num2;
     num1 = Integer.parseInt(args[0]);
     num2 = Integer.parseInt(args[1]);
   System.out.println(“the bigger value of the two is : “ + getMax(num1, num2));
}
   public static int getMax(int num1, int num2) {
     int result;
     if (num1 > num2)
         result = num1;
     else
        result = num2;

   return result; 
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:28:35.387

您将方法与类混淆了。您应该编写的代码如下所示

```
/**
 * This this the class
 */
class NameOfSomeAssignment {

    /**
     * This is a method
     */
    public int getMax() {
         // Implement me
    }

    /**
     * This is a 'special' method, it launches your application
     */
    public static void main(String... args) {
          // Do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:32:08.917

`Assign5`类名不应该是`getMax`

```
public class Assign5 { 
```

保持主要方法与提供的相同。

并将您的`max`方法重命名为`getMax`.

编译`Assign5`类测试后，按如下方式运行：

```
java Assign5 23 67 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:27:18.640

你基本上是对的，也就是说，你`getMax/max`正确地实现了这个功能。

但是，您的解决方案存在两个问题：

*   它不需要两个命令行参数，而是使用两个硬编码的整数。您应该使用作业中提供给您的代码。
*   该`max`函数应放置在`getMax`类定义中。

通常，您应该始终尝试编译和执行您的代码，以查看它是否按预期工作。这样，您将能够看到我列出的两个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T20:13:33.183

```
class Five
{
public static void main(String args[])
{

int num1, num2;
num1 = Integer.parseInt(args[0]);
num2 = Integer.parseInt(args[1]);
System.out.println("the bigger value of the two is : " + getMax(num1, num2));
}
public static int getMax(int a, int b) 
{
int c;
if (a > b)
c = a;
else
c = b;

return c; 
}
} 
```

# html - 对被忽略的 CSS 文件感到困惑

> ID：11144378
> 
> 赞同：2
> 
> 时间：2012-06-21T18:22:01.400
> 
> 标签：html, css

一个简单得可笑的网络编码对我不起作用，对于我的生活，我无法弄清楚我做错了什么。

这是我的 HTML 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Experiment</title>
    <link rel="stylesheet/css" type="text/css" href="/team/css/style.css">
</head>

<body>
    <div id="user_box">
       <p>Hi.  Whassup?</p>
    </div>
</body>
</html> 
```

这是它链接到的 CSS 文件：

```
#user_box {
    position: fixed; 
    left: 10px; 
    top: 10px; 
    padding: 5px;
    z-index: 100; 
    height: 40em; 
    width: 16em;
    background-color: white;
    border: solid black;
} 
```

它不起作用。CSS 格式被完全忽略。但是，当我将 的内容复制`#user_box`到`style=`标签中时，它的工作方式完全符合我的想法。

我确认 CSS 文件在它应该在的位置并且浏览器可以看到它；当我查看源代码时，我可以单击该链接，并且下载得很好。

我怀疑我错过了一些明显/愚蠢的东西，但我无法弄清楚它是什么。我求求你，指出我的愚蠢并得到一个闪亮闪亮的复选标记。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T18:24:13.610

正确`rel`的样式表是简单的`stylesheet`，不是`stylesheet/css`。删除它`/css`，一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:25:42.053

将标签更改为：

```
rel="stylesheet" 
```

IE

```
<link rel="stylesheet" type="text/css" href="/team/css/style.css"> 
```

确保它是您的*web*`team`目录中的根文件夹，并且它有一个包含文件的子目录*`css``style.css`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:23:04.303

尝试删除`rel="stylesheet/css"`.*

# visual-studio-2010 - Ajax 日历不弹出文本框焦点

> ID：11144382
> 
> 赞同：1
> 
> 时间：2012-06-21T18:22:14.413
> 
> 标签：visual-studio-2010, c#-4.0, ajaxcontroltoolkit, asp.net-4.0

因此，我一直在尝试让 Ajaxcontroltoolkit 中的 CalendarExtender 在我的 Web 应用程序中工作，但都没有成功。我开始尝试使用小日历图片使其弹出，但是当它被点击时页面不断重新加载，我在网上找不到任何解决方案。我读到如果我没有选择弹出图像，它将在文本框成为焦点时激活，所以我清除了属性......但仍然没有我错过什么？

```
<asp:TextBox runat="server" ID="CustomerSignUpDate"
    style="z-index: 1; left: 1px; top: 0px; position: relative; height: 21px;"></asp:TextBox>
<ajaxToolkit:CalendarExtender ID="calendarButtonExtender"
runat="server" TargetControlID="CustomerSignUpDate"
Format="MM-dd-yyyy" StartDate="2012-06-20"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:33:07.910

```
<div style="position: relative;">
    <asp:TextBox runat="server" ID="CustomerSignUpDate"
        style="z-index: 1; left: 1px; top: 0px; position: relative; height: 21px;"/>
    <ajaxToolkit:CalendarExtender ID="calendarButtonExtender"
    runat="server" TargetControlID="CustomerSignUpDate"
    Format="MM-dd-yyyy" StartDate="2012-06-20"/>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:35:32.533

所以我昨晚不小心删除了我服务器上的所有内容，不得不重新部署我的 Web 应用程序……你知道什么……它自己修复了。

所以我说，确保你有你项目中的所有引用，也许删除服务器上的所有内容并重新部署。

# c# - 如何从我的母版页相对读取 css 文件？

> ID：11144385
> 
> 赞同：0
> 
> 时间：2012-06-21T18:22:20.523
> 
> 标签：c#, asp.net, file-io

在我的 ASP.NET 项目中。我把我的css文件放进去

```
\App_Themes\Default\theme.css 
```

这就在我的项目文件夹下，其中包含所有 aspx、master、web.config 等。

如何使用 .Master 页面中的相对路径将其读入字符串？在 C# 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:29:21.977

这应该返回您的 css 文件夹的完整路径

```
Server.MapPath("App_Themes\Default\theme.css") 
```

更多信息可以在这里找到[http://msdn.microsoft.com/en-us/library/ms178116.aspx](http://msdn.microsoft.com/en-us/library/ms178116.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:26:49.163

在 *.aspx 页面中：

```
<head runat="server">
    <link runat="server" href="~/App_Themes\Default\theme.css" 
          rel="stylesheet" type="text/css" />
</head> 
```

或者从后面的代码：

```
string path = ResolveUrl("~/App_Themes\Default\theme.css");
// or 
string path = ResolveClientUrl("~/App_Themes\Default\theme.css"); 
```

（行为描述及两者的区别可参见：[http](http://www.andornot.com/blog/post/ResolveUrl-vs-ResolveClientUrl.aspx) ://www.andornot.com/blog/post/ResolveUrl-vs-ResolveClientUrl.aspx ）

# python - 查找字符串的所有大写、小写和混合大小写组合

> ID：11144389
> 
> 赞同：26
> 
> 时间：2012-06-21T18:22:30.267
> 
> 标签：python, string

我想编写一个程序，它需要一个字符串，比如说`"Fox"`，然后它会显示：

```
fox, Fox, fOx, foX, FOx, FoX, fOX, FOX 
```

到目前为止我的代码：

```
string = raw_input("Enter String: ")
length = len(string)
for i in range(0, length):
    for j in range(0, length):
        if i == j:
            x = string.replace(string[i], string[i].upper())
            print x 
```

到目前为止的输出：

```
Enter String: fox
Fox
fOx
foX
>>> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-21T18:32:20.057

```
import itertools

s = 'Fox'
map(''.join, itertools.product(*zip(s.upper(), s.lower())))
>>> ['FOX', 'FOx', 'FoX', 'Fox', 'fOX', 'fOx', 'foX', 'fox'] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T18:30:46.280

我一直想试试这个。

不知道这是否符合您的资格（虽然它确实有效）。

```
str = raw_input()

def getBit(num, bit):
   return (num & 1 << bit) != 0

for i in xrange(0,2**len(str)):
   out = ""
   for bit in xrange(0,len(str)):
      if getBit(i,bit):
         out += str[bit].upper()
      else:
         out += str[bit].lower()

   print(out) 
```

这个想法是，当你以二进制递增时，你会得到 1 和 0 的所有可能排列。

然后你只需将这个 1 和 0 的列表转换为字符串，1 表示大写，0 表示小写。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T00:13:42.173

这是@ephemient 所接受的优秀答案，稍作修改。

变化：

*   小写在大写之前，所以列表以“fox”而不是“FOX”开头（问题的示例序列以“fox”开头）

*   使用列表理解而不是`map()`（无论哪种方式都很好，真的）

*   打破了生成小写/大写对的代码以使其更清晰

*   把它打包成一个函数。

编码：

```
import itertools as it

def cap_permutations(s):
    lu_sequence = ((c.lower(), c.upper()) for c in s)
    return [''.join(x) for x in it.product(*lu_sequence)] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T18:35:39.483

一个使用列表理解的班轮：

```
from itertools import permutations

strs='fox'
combin=[''.join(x) for x in permutations(list(strs)+list(strs.upper()),3) if ''.join(x).lower()=='fox']
print(combin)
>>> ['fox', 'foX', 'fOx', 'fOX', 'Fox', 'FoX', 'FOx', 'FOX'] 
```

使用 for 循环：

```
from itertools import permutations

strs='fox'
lis2=list(strs)+list(strs.upper())

for x in permutations(lis2,3):
    if ''.join(x).lower()=='fox':
        print(''.join(x))

>>> fox
    foX
    fOx
    fOX
    Fox
    FoX
    FOx
    FOX 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-09T07:31:52.853

使用 product (False, True) 查找字符串中更改字符的任何排列，用于上下：

```
def capitalize_char_permutation (string:str) -> str :
    conditions = product((0,1), repeat=len(string))
    for i in conditions:
        result = ''
        for j in range(len(i)):
            if i[j]==0 :
                result+= string[j].lower()
            else:
                result+= string[j].upper()
        yield result 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-20T09:02:20.703

虽然我尝试的是 c++，但我想你会明白其中的逻辑。我被困在同一个问题上，所以我四处搜索，这就是我最终写的......我知道它并不完美，如果有人帮助我改进这段代码并指出我的错误，我会很高兴。

```
#include <bits/stdc++.h>

using namespace std;

string decToBinary(int n,int l) 
{ 
    string ret="";
    for (int i = l-1; i >= 0; i--) { 
        int k = n >> i; 
        if (k & 1) 
            ret=ret+"1"; 
        else
            ret=ret+"0";
    }
    return ret; 
}

int main()
{
    string x;
    cin>>x;
    transform(x.begin(), x.end(), x.begin(), ::tolower); 
    int size=x.length();
    string bin;
    for(int i=0;i<pow(2,size);i++)
    {
        bin=decToBinary(i,size);
        for(int j=0;j<size;j++)
        {
            if(bin[j]=='1')
                cout<<(char)(x[j]-32);
            else
                cout<<x[j];
        }
        cout<<endl;
    }
} 
```

假设“狗”这个词……那么，将有 2^（字母数），即 2^3=8 组合。因此，在这个程序中，我们从 0 到 7 进行迭代，并将迭代器（在本例中为 i）转换为二进制，例如，进行第五次迭代，二进制为 101，则结果单词为 DoG（以 1 为大写和 0 作为小写）..这样你可以得到所有 2^n 结果词。

# dynamics-crm-2011 - CRM 2011 sdk - 在不检索数据行的情况下获取实体计数

> ID：11144390
> 
> 赞同：2
> 
> 时间：2012-06-21T18:22:33.007
> 
> 标签：dynamics-crm-2011

我正在使用 CRM 2011 SDK 来处理远程 CRM 2011 服务。我需要检索联系人总数，超过 20000。

我尝试了一个简单的 LINQ 查询，例如。`Aggregate c In service.ContactSet Into Count()`（来自[这些示例](http://msdn.microsoft.com/en-us/library/bb918069.aspx)，还有[这个建议](http://www.crmcodex.com/2012/01/using-linq-to-get-a-record-count-in-mscrm-2011/)和[这个建议](http://rostacik.net/2011/08/11/how-to-get-count-of-entities-in-microsoft-crm-2011/)）但是每个都需要很*长时间*，因为下载的生成的 XML 是一个完整的数据记录集（即使它只是 GUID，这仍然是 20000 个 GUID 和它们所有的 XML 绒毛）。

我似乎找不到如何简单地查询 CRM 2011，因为它返回*一个数字*- 实体中的记录总数。可以说是“标量查询”。这是怎么做到的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:32:20.630

不幸的是，LINQ 查询不支持聚合和分组。

文档说：

> FetchXML 支持 QueryExpression 的所有功能以及 **聚合**和分组。查询构建为 XML 语句。

因此，您唯一的选择是使用 FetchXML，如下所示：

```
string fetchQuery = @"<fetch distinct='false' mapping='logical' aggregate='true'> 
   <entity name='entity name'> 
      <attribute name='attribute name' aggregate='count' alias='aliasName'/> 
   </entity> 
</fetch>";

EntityCollection value = _serviceProxy.Execute(new FetchExpression(fetchQuery)); 
```

返回的结果如下：

```
<resultset morerecords="0"'> 
   <result>
      <aliasName>20</aliasName>
   </result>
</resultset> 
```

# ruby-on-rails - 在 Rails 中使用 Ajax 更新部分

> ID：11144391
> 
> 赞同：6
> 
> 时间：2012-06-21T18:22:34.120
> 
> 标签：ruby-on-rails, ajax

我是 Rails 的初学者程序员，我目前正在尝试创建一个简单的表单，其中包含姓名、电子邮件和电话号码，然后当您单击提交时，使用 Ajax 输入的内容更新页面。

即，如果您在表单的文本字段中输入用户、user@example.com 和 555-555-555 并单击提交，您应该得到

姓名：用户电子邮件：user@example.com 电话号码：555-555-555

我知道这是一个简单的问题，但我不太确定如何编写 JavaScript 以使其工作。

这是我的部分代码：

```
<%= form_for(@user, :remote => true) do |f| %>

Name: <div="Name"><%= f.text_field :name %></div>
Email: <div="Email"><%= f.text_field :email %></div><br/>
Phone Number: <div="Phone Number"><%= f.text_field :phone_number%></div><br/>
<%= f.submit "Submit" %> 
```

我的控制器如下所示：

```
class UsersController < ApplicationController

def new
    @user = User.new
end

def create
    @user = User.new(params[:user])
end
end 
```

在我的 create.js.erb 文件中，我是使用 .update 函数用输入的信息替换文本字段还是做其他事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T18:40:49.020

如果您将表单包装在 div 中，您可以稍后轻松地替换其内容：

```
<div id="theform">
<%= form_for(@user, :remote => true) do |f| %>

Name: <div="Name"><%= f.text_field :name %></div>
Email: <div="Email"><%= f.text_field :email %></div><br/>
Phone Number: <div="Phone Number"><%= f.text_field :phone_number%></div><br/>
<%= f.submit "Submit" %>
</div> 
```

然后在您的 create.js.erb 文件中：

```
$("#theform").html("<%= escape_javascript(render partial: "users/user", locals: {user: @user}) %>"); 
```

在你的 /app/views/users/_user.html.erb

```
Name: <%= user.name%> Email: <%= user.email%> Phone Number: <%= user.phone%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:54:42.923

你在你的表单上得到了远程 true 并让你的控制器响应一个 js

看法：

```
<%= form_for(@user, :remote => true) do |f| %>
  Name: <div="Name"><%= f.text_field :name %></div>
  Email: <div="Email"><%= f.text_field :email %></div><br/>
  Phone Number: <div="Phone Number"><%= f.text_field :phone_number%></div><br/>
<%= f.submit "Submit" %> 
```

控制器：

```
class UsersController < ApplicationController

  def create
    @user = User.new(params[:user])
    @user.save
    respond_to do |format|
      flash[:notice] = "saved successful"
      format.js # new.js.erb 
    end
  end
end 
```

并使用 ajax 代码创建一个名为 new.js.erb 的新文件，并随意使用 ruby​​ 嵌入式 sintax

```
$('div#my_id').html('<%= @user.name%> - <%= @user.phone %>');
$('div#notice').html('<%= flash[:notice] %>'); 
```

# haskell - Haskell 无法将预期类型与实际类型匹配

> ID：11144393
> 
> 赞同：2
> 
> 时间：2012-06-21T18:22:45.470
> 
> 标签：haskell

所以我正在尝试使用频率分析来破译代码。

```
import Data.Char
import Data.List
import Data.Function
import qualified Data.Map as DMap

codedMsg    = "V'Z GELVAT GB GRNPU GUR PNIRZRA GB CYNL FPENOOYR. VG'F HCUVYY JBEX. GUR BAYL JBEQ GURL XABJ VF 'HAU', NAQ GURL QBA'G XABJ UBJ GB FCRYY VG."

mostFreqLtr = ["E", "T", "A", "O", "I", "N", "S", "H", "R", "D", "L", "C", "U", "M", "W", "F", "G", "Y", "P", "B", "V", "K", "X", "J", "Q", "Z"]

--weed out non alphabetical characters from the list
alphaSort lst
    | null lst              = []
    | isAlpha (head lst)    = (head lst) : alphaSort (tail lst)
    | otherwise             = alphaSort (tail lst)

--sort the list by characters
msgSort []  = []
msgSort lst = sortBy (compare `on` ord) lst

--group each character into it's own list
grp []  = []
grp lst = group lst

--sort the list into most frequent character first
lSort []    = []
lSort lst   = reverse (sortBy (compare `on` length) lst)

--change the list into one instance of each character
oneChar []  = []
oneChar lst = take 1 (head lst) : oneChar (tail lst)

--Pairing letters and creating a map of tuples containing frequency related characters
msg     = zip (oneChar $ lSort $ grp $ msgSort $ alphaSort $ map toUpper $ codedMsg) mostFreqLtr
msg2    = DMap.fromList msg

--replace coded list with analyzed list
replaceChars lst
    | null lst              = []
    | isAlpha (head lst)    = DMap.lookup (head lst) msg2 : replaceChars (tail lst)
    | otherwise             = (head lst) : replaceChars (tail lst)

result = replaceChars codedMsg 
```

我不断收到此错误：

```
Couldn't match expected type `Char' with actual type `[Char]'
    Expected type: DMap.Map Char a0
      Actual type: DMap.Map [Char] [Char]
    In the second argument of `DMap.lookup', namely `msg2'
    In the first argument of `(:)', namely
      `DMap.lookup (head lst) msg2' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:28:29.437

在所有顶级函数上编写类型签名。然后你会发现

```
oneChar :: [[a]] -> [[a]] 
```

同时，从使用来看，我猜你打算

```
oneChar :: [[Char]] -> [Char] 
```

而不是`take 1`，您应该使用`head`，或者您应该`concat`编辑结果以获得`Char`s 列表。

照原样，您构造的映射`msg2`具有`[Char]`键，但您尝试使用它，就好像它具有`Char`s 作为键一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T20:30:14.177

嗯 - 我坐下来想了想你的代码

*   请使用类型签名它对您的代码有很大帮助-编译器也可以优化

*   起一些更有意义的名字

    *   `mostFreqLtr`-> `freqTable_EN`（这表明您正在破译英文文本）
    *   `alphaSort`-> `filterAlpha`（这是一种误导，因为您过滤的是非字母元素而不是排序任何东西
    *   `msgSort`- > `sort`（因为它是一样的，我认为）
*   使用模式匹配而不是`head`and `tail`
    ie lst ... head lst ... tail lst ->`lst@(c:cs)`
    *   然后 lst 可以作为它自己引用，并且`c`是它的头部和`cs`尾部（单个元素通常被称为单个字母，列表作为它们的准复数并附加*s*

## 代码：

```
import Prelude hiding (lookup)
import Data.Char ( isAlpha
                 , toUpper)
import Data.List ( group
                 , sort
                 , sortBy)
import Data.Function (on)
import Data.Map ( fromList
                , lookup
                , Map)
import Data.Maybe (mapMaybe) 
```

只导入必要的代码位

```
codedMsg :: String
codedMsg    = "V'Z GELVAT GB GRNPU GUR PNIRZRA GB CYNL FPENOOYR." ++ 
              "VG'F HCUVYY JBEX. GUR BAYL JBEQ GURL XABJ VF 'HAU'," ++
              "NAQ GURL QBA'G XABJ UBJ GB FCRYY VG."

freqTable_EN :: [Char]
freqTable_EN = ['E', 'T', 'A', 'O', 'I', 'N', 'S', 'H', 'R'] ++
               ['D', 'L', 'C', 'U', 'M', 'W', 'F', 'G', 'Y'] ++
               ['P', 'B', 'V', 'K', 'X', 'J', 'Q', 'Z'] 
```

不要使用太长的行——它会降低代码的可读性，姓氏`freqTable_EN`很不寻常，但在这种情况下，我可以随意偏离标准，因为它更具可读性。我还使用`[Char]`而不是`String`（等效的）来更清楚地表明它是一个字母表。

```
-- weed out non alphabetical characters from the list
filterAlpha :: String -> String
filterAlpha = filter isAlpha

-- sort a list by length
sortByLength :: [[a]] -> [[a]]
sortByLength = sortBy (compare `on` length)

-- sort the list into most frequent character first
sortByFreq :: [[a]] -> [[a]]
sortByFreq = reverse . sortByLength 
```

好的函数名不需要这样的注释

```
-- change the list into one instance of each character
reduceGroups :: [[a]] -> [a]
reduceGroups lst = map head lst 
```

你也可以让`lst`编译器足够聪明地从类型签名中获取所有信息，所以最后一行也可以是`reduceGroups = map head`

```
-- Pairing coded message with frequency table
pairs :: [(Char, Char)]
pairs = nonAlphaPairs ++ zip freqSortedMsg freqTable_EN
  where cleanedMsg    = (filterAlpha . map toUpper) codedMsg
        freqSortedMsg = (reduceGroups . sortByFreq . group . sort) cleanedMsg
        nonAlphaPairs = map (\x ->(x,x)) $ filter (not . isAlpha) codedMsg 
```

`(\x -> (x,x))`是一个 lambda 表达式，它只是转换成对中的单个字符，因为它们是由自己破译的

```
-- and creating a map for decryption
cipher :: Map Char Char
cipher = fromList pairs

-- replace encoded text by our cipher
decipher :: String -> String
decipher = mapMaybe (uplook cipher)
         where uplook = flip lookup

result :: String
result = decipher codedMsg

main :: IO ()
main = print result 
```

最后一行打印您的结果 - 因为我们想阅读该消息；-) 如果有不清楚的地方，请随时询问。

PS.：我真的很喜欢你的编码信息——尽管频率分析甚至没有找到一个字母。我只是猜到了你的加密算法。（`g?`对于 vim 用户），我认为您必须使用更长的文本。

# mysql - 按最强 LIKE 排序 SQL？

> ID：11144394
> 
> 赞同：25
> 
> 时间：2012-06-21T18:22:47.113
> 
> 标签：mysql, sql, database, full-text-search

我有以下查询：

```
SELECT * FROM table_name
WHERE (col_1 LIKE '%$keyword%'
    OR col_2 LIKE '%$keyword%'
    OR col_3 LIKE '%$keyword%')
  AND .... <some optional filters> ... 
```

是否有基于最相关结果进行排序的策略？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-21T18:33:11.930

如果您的意思是 col_1 比 col_2 更相关等等，那么：

```
select *
      ,case when col_1 like '%$keyword%' then 1
            when col_2 like '%$keyword%' then 2
            when col_3 like '%$keyword%' then 3
       end as [priority]
  from table_name
 where col_1 like '%$keyword%'
    or col_2 like '%$keyword%'
    or col_3 like '%$keyword%'
 order by [priority] 
```

如果您的意思是最多列匹配，那么：

```
select *
      ,(case when col_1 like '%$keyword%' then 1 else 0 end) +
      ,(case when col_2 like '%$keyword%' then 1 else 0 end) +
      ,(case when col_3 like '%$keyword%' then 1 else 0 end) as [priority]
  from table_name
 where col_1 like '%$keyword%'
    or col_2 like '%$keyword%'
    or col_3 like '%$keyword%'
 order by [priority] desc 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-06-21T18:34:46.407

当你谈到“相关性”时，你真的想要自然语言搜索，这是 MySQL[全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-natural-language.html)所支持的。语法与普通查询不同*，*您需要向表中添加特殊索引，但这种方式可以按相关性排序。

以下是 MySQL 计算相关性的方式（来自链接）：

> 在 WHERE 子句中使用 MATCH() 时，如前面的示例所示，返回的行会自动按照相关性最高的顺序进行排序。相关性值是非负浮点数。零相关性意味着没有相似性。相关性是根据行中的单词数、该行中唯一单词的数量、集合中的单词总数以及包含特定单词的文档（行）数来计算的。

要[在现有表上创建全文索引](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)，请使用*FULLTEXT*修饰符：

```
CREATE FULLTEXT INDEX index_name
ON table_name (col1, col2, col3) 
```

然后您可以执行这样的查询以按相关性顺序检索结果：

```
SELECT * FROM table_name
WHERE MATCH (col1,col2,col3)
AGAINST ('keyword' IN NATURAL LANGUAGE MODE); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T18:32:48.520

你不能。您要求您的 RDBMS 按“LIKE”列匹配最多的行对结果进行降序排序。

例如，MySQL 使用所谓的[FULLTEXT](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)索引来执行此操作。

# javascript - Rails 使用咖啡从 url 访问当前 GET 页面参数

> ID：11144396
> 
> 赞同：0
> 
> 时间：2012-06-21T18:22:51.763
> 
> 标签：javascript, ruby-on-rails, ruby, coffeescript

我正在对应用程序的一部分进行更改，该应用程序使用 js 咖啡脚本导航到网站的不同页面。我想将当前的获取请求附加到新的 url。

有没有一种简单的方法可以访问咖啡脚本中的 get 请求？

我知道在 javascript 中你可以使用 window.location 来获取完整的 url，但是你如何在 coffeescript 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:28:26.917

请看下面的代码

```
paramValue = (name) ->
  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]")
  regexS = "[\\?&]" + name + "=([^&#]*)"
  regex = new RegExp(regexS)
  results = regex.exec(window.location.href)
  unless results?
    ""
  else
    results[1] 
```

该方法的参数是您需要其值的参数的参数名称。它将返回该特定 url 的相应值

`window.location.href`将返回当前页面的 URL

# jquery - 当使用箭头键聚焦时，使用 Jquery 自动完成在输入上显示自定义标签

> ID：11144405
> 
> 赞同：1
> 
> 时间：2012-06-21T18:23:11.860
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

当悬停/关注项目结果时，如何覆盖在输入上显示项目标签的默认行为？

示例不起作用：

**JavaScript：**

```
$('#ac').autocomplete({
    source : ["hello", "how", "do", "you", "do"],
    focus: function(event, ui){
         console.log("print")
         $(this).val('my custom label to show in input');    
    }
}) 
```

**HTML：**

```
<input type="text" id="ac"/> 
```

[http://jsfiddle.net/34fSg/14/](http://jsfiddle.net/34fSg/14/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:26:12.447

[阻止 event 的默认操作，](http://api.jquery.com/event.preventdefault/)即将输入的值替换为焦点项的值：

```
$('#ac').autocomplete({
    source : ["hello", "how", "do", "you", "do"],
    focus: function(event, ui){
         this.value = 'my custom label to show in input';
         event.preventDefault(); // <-----
    }
}) 
```

**示例：http:** [//jsfiddle.net/4jJyb/](http://jsfiddle.net/4jJyb/)

# php - Smarty 局部变量与字符串的连接

> ID：11144406
> 
> 赞同：36
> 
> 时间：2012-06-21T18:23:12.840
> 
> 标签：php, smarty

如何使用连接的字符串分配本地模板变量，如下所示：

```
{$yes_src=const1.'yes'.const2} 
```

下面要在代码中使用的方式`{$yes_src}`。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-21T18:26:15.740

你这样做的方式是调用的“简短形式” `assign`，你只需要使用[正确的引用机制](http://www.smarty.net/docs/en/language.syntax.quotes.tpl)：

```
 {$yes_src="`$const1`yes`$const2`"} 
```

使用`assign`：

```
{assign var="yes_src" val="`$const1`yes`$const2`"} 
```

使用`cat`：

```
{$const1|cat:"yes"}{$const2} 
```

您也可以简单地将变量并排放置，而无需将其分配给变量：

```
{$const1}yes{$const2} 
```

...不需要变量。

**备注** 如果您发现自己经常使用`assign`，您可能**会对**将逻辑与表示分离的想法产生误解。通常，连接和其他变量工作将在涉及模板之前在 PHP 中完成。模板的作用*只是显示数据*，您应该避免在模板中创建或更改数据。

**文档**

*   聪明的报价 - [http://www.smarty.net/docs/en/language.syntax.quotes.tpl](http://www.smarty.net/docs/en/language.syntax.quotes.tpl)
*   Smarty `assign`- [http://www.smarty.net/docs/en/language.function.assign.tpl](http://www.smarty.net/docs/en/language.function.assign.tpl)
*   Smarty `cat`- [http://www.smarty.net/docsv2/en/language.modifier.cat](http://www.smarty.net/docsv2/en/language.modifier.cat)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-13T11:37:59.250

```
{ $yes_src = $variable|cat:"some string"|cat:$variable } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-21T18:26:14.790

试试这个：

```
{capture assign=yes_src}{$const1}.'yes'.{$const2}{/capture} 
```

然后使用新变量：

```
{$yes_src} 
```

# string - 在bash中将字符串转换为日期

> ID：11144408
> 
> 赞同：47
> 
> 时间：2012-06-21T18:23:23.323
> 
> 标签：string, bash, shell, unix, date

我有一个格式为“yyyymmdd”的字符串。它是 bash 中的字符串，我想将其转换为日期，以便可以在其上使用所有其他日期函数。

“20121212”字符串转换为“20121212”日期，格式为“%Y%m%d”。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-21T19:02:22.913

这对我有用：

```
date -d '20121212 7 days'
date -d '12-DEC-2012 7 days'
date -d '2012-12-12 7 days'
date -d '2012-12-12 4:10:10PM 7 days'
date -d '2012-12-12 16:10:55 7 days' 
```

然后你可以格式化输出添加参数'+%Y%m%d'

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-05-28T10:40:32.510

我们可以使用 date -d 选项

1）将格式更改为“%Y-%m-%d”格式，即20121212到2012-12-12

```
date -d '20121212' +'%Y-%m-%d' 
```

2）从给定日期= 20121212获取下一天或最后一天。就像以特定格式获取过去 7 天的日期

```
date -d '20121212 -7 days' +'%Y-%m-%d' 
```

3）如果我们在某个变量中获取日期，请说 dat

```
dat2=$(date -d "$dat -1 days" +'%Y%m%d') 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-12-16T03:48:07.370

date 仅适用于 GNU date（通常随 Linux 提供）

对于 OS X，有两种选择：

1.  更改命令（已验证）

    > ```
    > #!/bin/sh
    > #DATE=20090801204150
    > #date -jf "%Y%m%d%H%M%S" $DATE "+date \"%A,%_d %B %Y %H:%M:%S\""
    > date "Saturday, 1 August 2009 20:41:50" 
    > ```
    > 
    > [http://www.unix.com/shell-programming-and-scripting/116310-date-conversion.html](http://www.unix.com/shell-programming-and-scripting/116310-date-conversion.html)

2.  从 Coreutils 下载 GNU 实用程序 - GNU 核心实用程序（尚未验证） [http://www.unix.com/emergency-unix-and-linux-support/199565-convert-string-date-add-1-a.html](http://www.unix.com/emergency-unix-and-linux-support/199565-convert-string-date-add-1-a.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-21T18:28:16.140

只需使用 date 命令的 -d 选项，例如

```
date -d '20121212' +'%Y %m' 
```

# php - nginx：重写 PHP 不起作用

> ID：11144411
> 
> 赞同：-2
> 
> 时间：2012-06-21T18:23:28.123
> 
> 标签：php, regex, url-rewriting, nginx

我已经安装了后缀代理，并且我正在使用以下重写与通配符子域 DNS：

```
location / {
     if (!-e $request_filename) {
        rewrite ^(.*)$ /index.php last;
        break;
     }
} 
```

我的后缀代理具有以下 URL 格式：（子域和/或域 + 域扩展到代理）.proxy.org/（request-uri 到代理）

我的 index.php 中有这个 php 代码：

```
if(preg_match('#([\w\.-]+)\.example\.com(.+)#', $_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'], $match)) {
    header('Location: http://example.com/browse.php?u=http://'.$match[1].$match[2]);
    die;
} 
```

但是当请求一个带有 .php 扩展名的页面时，我会得到一个 404 not found 错误：

```
http://www.php.net.proxy.org/docs.php - HTTP/1.1 404 Not Found
http://www.utexas.edu.proxy.org/learn/php/ex3.php - HTTP/1.1 404 Not Found 
```

但其他一切都在工作（index.php 也在工作）：

```
http://php.net.proxy.org/index.php - HTTP/1.1 200 OK
http://www.php-scripts.com.proxy.org/php_diary/example2.php3 - HTTP/1.1 200 OK
http://www.utexas.edu.proxy.org/learn/php/ex3.phps - HTTP/1.1 200 OK
http://www.w3schools.com.proxy.org/html/default.asp - HTTP/1.1 200 OK 
```

有人有答案吗？我不知道为什么它不起作用，在 apache 上它工作正常。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:41:40.857

有几个层无法正常工作，因为有原始请求的处理，以及发出重定向标头后的第二个请求。

您可以在 PHP 中放置调试语句来检查“if”语句之前、“if”语句内部和之后的 URL。您将很快确定您对“php”脚本的请求是否进入该脚本，以及多远。

*其次，第二个*请求（browse.php）的日志显示了什么？到达的请求是否正确形成？

最后，您粘贴的响应代码并不能说明全部情况，因为它们没有显示重定向轨迹。使用 Perl 的 LWP 发行版中的“HEAD”之类的工具。（为许多操作系统打包）。然后，您将看到原始请求和重定向请求，以及每个请求的单独响应代码。以下示例显示了 google.com 如何重定向到 www.google.com：

```
$ HEAD -sSe 'http://google.com'
HEAD http://google.com
301 Moved Permanently
Cache-Control: public, max-age=2592000
Connection: close
Date: Thu, 21 Jun 2012 20:34:38 GMT
Location: http://www.google.com/
Server: gws
Content-Length: 219
Content-Type: text/html; charset=UTF-8
Expires: Sat, 21 Jul 2012 20:34:38 GMT
Client-Date: Thu, 21 Jun 2012 20:34:29 GMT
Client-Peer: 74.125.225.104:80
Client-Response-Num: 1
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block

HEAD http://www.google.com/
200 OK
Cache-Control: private, max-age=0
Connection: close
Date: Thu, 21 Jun 2012 20:34:38 GMT
Server: gws
Content-Type: text/html; charset=ISO-8859-1
Expires: -1
Client-Date: Thu, 21 Jun 2012 20:34:29 GMT
Client-Peer: 74.125.225.208:80
Client-Response-Num: 1
P3P: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Set-Cookie: PREF=ID=3d125e353127a33a:FF=0:TM=1340310878:LM=1340310878:S=D64LXQ4HKALmBZ_c; expires=Sat, 21-Jun-2014 20:34:38 GMT; path=/; domain=.google.com
Set-Cookie: NID=61=jEiVUOmNI_XWhc78fdGMXmZVfOK-j-7S1njjY9xedBR8CIZAy0pKgAtsiIzO4MLnvFKCJ_gUm4Zx-7TKl3gmHPrEzaWbSAB52LPgZlXoFdzJb7RW_wx-UGjQRCLag0Lt; expires=Fri, 21-Dec-2012 20:34:38 GMT; path=/; domain=.google.com; HttpOnly
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block 
```

或者，您可以使用 Chromium/Google-Chrome 中内置的开发者工具。打开它，选择网络选项卡，然后加载 google.com。您将看到一个“301”请求，然后是一个“200”请求。您可以单击左侧的名称以查看每个名称的完整请求/响应标头。

最后，考虑以问题的形式重写你的标题，以匹配本网站的问答格式。

# css - 当浏览器宽度发生变化时自动调整 div 中的两个图像的大小

> ID：11144412
> 
> 赞同：1
> 
> 时间：2012-06-21T18:23:34.400
> 
> 标签：css, image, width, scale

我看过很多不同的人对这个问题的回答，但他们只解释了一张图片。我在标题中放置的两个图像有问题，当我调整浏览器的大小时，我希望它们按比例缩小，这样它们就不会取代我的整个网站。

我将它托管在保管箱中，因此您可以看到我的问题是：[https ://dl.dropbox.com/u/13722201/Dorset%20Designs/home.html](https://dl.dropbox.com/u/13722201/Dorset%20Designs/home.html)

我遇到的另一个问题是从屏幕底部取消附加页脚并将其放在正文下方，因此用户必须向下滚动。ps 几个月前我将页脚附加到底部，但我忘记了如何撤消它。

抱歉代码乱七八糟

提前致谢

阿兰，16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:43:31.790

这就是我的做法。首先，使用 CSS 设置每个图像的样式，使其具有`width:100%`和`height:auto`. 这使他们响应容器的大小。从标签中丢失这些`width`和属性- 我什至不确定这些是否有效。`height``img`

现在，聪明的部分来了。你的图像很`550px`宽`298px`，大约是 65%:35% 的比例。当头球在断裂前处于最窄点时，它的宽度大约与两者之和一样宽。所以给大图的容器`max-width:65%`，小图的容器`div` `max-width:35%`。

这样，当浏览器窗口较小时，图像会相应缩小 - 并且不会变得大于窗口宽时所需的大小。我在您的页面上尝试过，我认为它有效 - 看看它是否适合您。:)

# android - 从 Android 设备连接到 Web 服务时出现 SocketTimeout 异常（仅限设备而非模拟器）

> ID：11144416
> 
> 赞同：0
> 
> 时间：2012-06-21T18:23:54.337
> 
> 标签：android, web-services, sockets, timeout

我能够从我的 android 应用程序成功调用 .net webservice。用模拟器（2.2 apilevel 8 到 4.0.3 api level 15）对其进行了测试，效果很好。

我现在正在尝试使用摩托罗拉 razr MAZZ 设备测试相同的代码。它已连接，能够打断点并且能够执行所有功能，除了调用 web 服务。我收到“java.net.SocketTimeoutException：连接超时”。我的代码写在下面。它适用于模拟器，但不适用于设备。

```
URL = UtilsAct.Instance().GetSettingString(ctx, "sett_url");
String str="";
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("IsEncrypted",false);
request.addProperty("routes", "EAST");

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,60000);
try
{
androidHttpTransport.call(SOAP_ACTION, envelope); // java.net.SocketTimeoutException:    Connection timed out
Object receivedObj = envelope.getResponse();
str = receivedObj.toString();
}
catch(Exception e) 
{
//e.printStackTrace();
String errmsg = "Exception:";
if(e.getMessage() != null)
errmsg = errmsg +  e.getMessage();
} 
```

我尝试了各种文章中给出的所有技巧，包括

```
HttpConnectionParams.setConnectionTimeout(params, timeout);

HttpConnectionParams.setSoTimeout(params, timeout);
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setConnectTimeout(timeout);
urlConnection.setReadTimeout(timeout); 
```

感谢帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:50:11.883

我真的很晚才更新。我发现托管 web 服务的服务器正在使用安全策略，并且不允许从任何使用 wifi 的设备进行呼叫。模拟器之所以有效，是因为它在网络内工作，因此不会干扰安全性。在我将服务器安全性更改为允许从使用我的 wifi 的设备进行呼叫后，我上面编写的代码现在可以工作了。

# linux - 调用 gdb 时是否可以从命令行参数“设置打印线程事件关闭”？

> ID：11144420
> 
> 赞同：2
> 
> 时间：2012-06-21T18:24:02.917
> 
> 标签：linux, debugging, command-line, gdb, alias

每次我启动 gdb 时，我都会立即执行以下操作：

```
set print thread-events off 
```

如果我可以从命令行参数执行此操作，那就太好了，这样我就可以设置一个别名，而不是每次都重新键入它。

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:36:00.703

gdb 启动脚本怎么样？`~/.gdbinit`使用启动时要执行的命令进行创建。

A`.gdbinit` [也可以](https://stackoverflow.com/a/500975/198536)在执行程序时所在的目录中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T21:36:10.773

是的：

```
gdb -ex "set print thread-events off" ...other-args... 
```

# android - 在Android中以动画方式将ImageView移动到不同的位置

> ID：11144421
> 
> 赞同：25
> 
> 时间：2012-06-21T18:24:13.587
> 
> 标签：android, animation, android-animation

我有几个`ImageView`s `RelativeLayout`。现在，当用户点击任何 ImageView 时，我希望它通过微妙的动画移动到指定位置。

例如; 我最初设置了与as`LayoutParams`关联的边距，然后将其添加到布局中。`ImageView``layoutparams1.setMargins(90,70,0,0);`

当点击 imageview 时，我希望它的新位置是`200,200`，带有动画。

那么，有可能吗？如果是，那么如何？

请注意，我以编程方式创建`RelativeLayout`了它的所有子代。`ImageView`

而且我是android开发的新手，所以需要一个详尽的答案。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-21T18:33:49.120

```
TranslateAnimation animation = new TranslateAnimation(0, 50, 0, 100);
animation.setDuration(1000);
animation.setFillAfter(false);
animation.setAnimationListener(new MyAnimationListener());

imageView.startAnimation(animation); 
```

**更新：** 问题是它`View`实际上仍然处于旧位置。所以我们必须在动画完成时移动它。要检测动画何时完成，我们必须创建自己的`animationListener`（在我们的`activity`类中）：

```
private class MyAnimationListener implements AnimationListener{

    @Override
    public void onAnimationEnd(Animation animation) {
        imageView.clearAnimation();
        LayoutParams lp = new LayoutParams(imageView.getWidth(), imageView.getHeight());
        lp.setMargins(50, 100, 0, 0);
        imageView.setLayoutParams(lp);
    }

    @Override
    public void onAnimationRepeat(Animation animation) {
    }

    @Override
    public void onAnimationStart(Animation animation) {
    }

} 
```

所以`onClickEvent`会在它的新地方再次被解雇。动画现在会将它向下移动，因此您可能希望将`x`and保存`y`在一个变量中，这样`onAnimationEnd()`您就不会将其移动到固定位置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-04T06:00:45.190

也更好用`ObjectAnimator`。此移动视图处于新位置。例如 ：

```
ImageView splash ;
@Override
public boolean onTouchEvent(MotionEvent event) {
    float tx = event.getX();
    float ty = event.getY();

    int action = event.getAction();
    switch(action) {
        case MotionEvent.ACTION_DOWN:
            tx = event.getX();
            ty = event.getY();

            //       findViewById(R.id.character).setX(tx-45);
            //      findViewById(R.id.character).setY(ty-134);

            ObjectAnimator animX = ObjectAnimator.ofFloat(splash, "x", tx-45);
            ObjectAnimator animY = ObjectAnimator.ofFloat(splash, "y", ty-134);
            AnimatorSet animSetXY = new AnimatorSet();
            animSetXY.playTogether(animX, animY);
            animSetXY.start();

            break;
        default:
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-12T05:55:23.317

你可以使用这个代码

```
imageView.animate().x(80).y(212).setDuration(300); 
```

或者

对于软动画，你可以使用这个库

[https://github.com/wirecube/android_additive_animations](https://github.com/wirecube/android_additive_animations)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-18T06:43:57.120

在下面的代码中，我在框架布局的中心动态添加了一个图像视图。添加后，我增加缩放并设置 alpha 以提供缩放效果，完成动画后，我只是将图像视图的一个位置转换到另一个位置。

在框架布局上添加图像视图

```
 imgHeart = new ImageView(getBaseContext());
    imgHeart.setId(R.id.heartImage);
    imgHeart.setImageResource(R.drawable.material_heart_fill_icon);
    imgHeart.setLayoutParams(new FrameLayout.LayoutParams(50, 50, Gravity.CENTER));
    mainFrameLaout.addView(imgHeart); 
```

在图像视图上添加动画

```
 imgHeart.animate()
            .scaleXBy(6)
            .scaleYBy(6)
            .setDuration(700)
            .alpha(2)
            .setListener(new Animator.AnimatorListener() {
                @Override
                public void onAnimationStart(Animator animation) {

                }

                @Override
                public void onAnimationEnd(Animator animation) {
                    imgHeart.animate()
                            .scaleXBy(-6f).scaleYBy(-6f)
                            .alpha(.1f)
                            .translationX((heigthAndWidth[0] / 2) - minusWidth)
                            .translationY(-((heigthAndWidth[1] / 2) - minusHeight))
                            .setDuration(1000)
                            .setListener(new Animator.AnimatorListener() {
                                @Override
                                public void onAnimationStart(Animator animation) {
                                }

                                @Override
                                public void onAnimationEnd(Animator animation) {
                                // remove image view from framlayout
                                }
                                @Override
                                public void onAnimationCancel(Animator animation) {
                                }

                                @Override
                                public void onAnimationRepeat(Animator animation) {
                                }
                            }).start();
                }

                @Override
                public void onAnimationCancel(Animator animation) {

                }

                @Override
                public void onAnimationRepeat(Animator animation) {

                }
            }).start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T15:29:00.937

您可以使用此代码:)

```
 private void animeView(View imageView){

        Handler handler = new Handler();
        final int[] deltaX = {50};
        final int[] deltaRotation = {45};
        handler.postDelayed(new Runnable() {
             @Override
             public void run() {
                 imageView.animate().translationX(deltaX[0])
                                    .rotation(deltaRotation[0]).setDuration(1000) ;
                 deltaX[0] *=-1 ;
                 deltaRotation[0] *=-1 ;
                 handler.postDelayed(this , 1000);
             }
         },1000);

    } 
```

# php - 在php中撤消strip_tags

> ID：11144425
> 
> 赞同：1
> 
> 时间：2012-06-21T18:24:32.353
> 
> 标签：php, wordpress

我正在尝试自定义 Word 新闻模板并且遇到了一些麻烦。该页面是[http://rexonmedia.com/?page_id=113](http://rexonmedia.com/?page_id=113)，每个部分下都有描述，描述中的所有文本都是纯文本（Actionscript，访问站点...）。我希望文本被格式化或具有链接，如源 (http://rexonmedia.com/?portfolio=audiomaya) 和超链接。

我发现这里的罪魁祸首是“strip_tags”标签。它用于两个不同的地方。我尝试了几个场景，但没有奏效。请帮忙

```
 public function customFormat($content,$strip_tags = false,$shortcode=true){
   $content =   stripslashes($content);
   if($shortcode)
   $content = do_shortcode( shortcode_unautop( $content ) ); 
   $content = preg_replace('#^<\/p>|^<br\s?\/?>|<p>$|<p>\s*(&nbsp;)?\s*<\/p>#', '', $content);

   if($strip_tags)
     $content = strip_tags($content,"<hades>,<tabend>");

   return $content;

    } 
```

* * *

```
<?php  
global $more;    // Declare global $more (before the loop).
    $more = 1;
$content = get_the_content('');
$content = apply_filters('the_content', $content);
    $content = str_replace(']]>', ']]&gt;', $content);
$this->shortenContent( $content_limit ,  strip_tags( $content  ) ); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:27:36.363

为 strip_tags 提供允许的标签。第一个代码块中的行将更改为：

```
$content = strip_tags($content,"<strong><a>"); 
```

第二个代码块中的行将更改为：

```
$this->shortenContent( $content_limit ,  strip_tags( $content, "<strong><a>" ) ); 
```

顺便说一句，如果未提供 $strip_tags 函数，该函数在函数定义中将其定义为 false。检查那个！

```
public function customFormat($content,$strip_tags = false,$shortcode=true){ 
```

# clojure - 我怎样才能为这个函数添加arity？

> ID：11144426
> 
> 赞同：2
> 
> 时间：2012-06-21T18:24:32.987
> 
> 标签：clojure

我想要这个功能

```
(defn ret-lowest-str-len
    "Computes the lengths of two strings. Returns default length -- len -- 
     if len is <= the length of str-1 and len is <= length of str-2.

     Else, returns smaller of length of str-1 and str-2."

    [str-1 str-2 len]

    (let [l1 (count str-1)
          l2 (count str-2)]

        (if (and (<= len l1) (<= len l2))
            len
            (if (< l1 l2)
                l1
                l2)))) 
```

能够有两个参数签名。该示例显示 str-1 str-2 和 len（固定长度）。这样做是为了如果字符串小于固定默认值 15，则将返回一个不会导致溢出异常的长度值。

我希望能够在没有 str-2 的情况下仅传递 str-1 和 len，但我不太确定该怎么做。

我知道如果没有传入l2，代码将不得不更改。我想知道如何设置arity。任何示例将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T18:28:12.100

defn 有两种语法

```
(defn foo [] (expression) (expression)) 
```

和

```
(defn foo
  ([] (exp1) (exp2)) ; arity 0
  ([x] (exp1) (exp2)) ;arity 1
  ([x y] (exp1) (exp2)) ; arity 2 
```

* * *

一个常见的模式是让较小的 arity 版本填充默认值并调用较高的 arity 情况：

```
(defn ret-lowest-str-len
([str-1 len] (ret-lowest-str-len str-1 "" len))
([str-1 str-2 len]
  (let [l1 (count str-1)
        l2 (count str-2)]
      (if (and (<= len l1) (<= len l2))
          len
          (if (< l1 l2)
              l1
              l2))))) 
```

* * *

在旁注中，您可以使用可变数量的参数编写一个非常相似的函数：

```
user> (defn ret-lowest-str-len [& args] (reduce min (map count args)))
#'user/ret-lowest-str-len
user> (ret-lowest-str-len "a" "aaaa" "aaaaaaaaa")
1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:45:41.110

我会更进一步，使其适用于*任意*数量的字符串，使用`&`可选参数列表的语法，使用以下内容：

```
(defn lowest-str-len [default-len & strs]
    (let [lens (map count strs)]
        (apply min default-len lens))) 
```

# c++ - 如何将在 Linux 中从命令行编译的 C 程序导出到 IDE？

> ID：11144435
> 
> 赞同：1
> 
> 时间：2012-06-21T18:25:15.600
> 
> 标签：c++, linux, ide, makefile, export

有很多开源的 C/C++ 项目，其中大部分都可以在 Linux 中使用“make”进行编译。是否有任何简单的方法可以将其导出到 IDE，例如 Microsoft Visual C++、CodeBlock 或 Eclipse？即使这是一项涉及的工作，是否有任何一步一步的帮助？

谢谢您的帮助。

TJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:27:56.407

考虑到大多数（如果不是全部）IDE 支持导入基于 makefile 或 cmake 的项目，这应该是显而易见的。

不过要小心配置脚本，因为它们通常会执行 IDE 不自动支持的重要内容。事实上，像 cmake、premake 和 scons 这样的构建系统被发明出来，因为没有标准的方法让 IDE 知道脚本在做什么。（这在牺牲灵活性的同时，使系统成为标准。）

# javascript - 如何在javascript中计算时间（也许用jquery）

> ID：11144437
> 
> 赞同：-1
> 
> 时间：2012-06-21T18:25:27.883
> 
> 标签：javascript, jquery, uptime

在我的应用程序上，我有一个命令：

`@uptime = 'uprecords -s | awk '{ print $5 }'`

从计算机返回当前正常运行时间（使用正常运行时间）。
它返回类似于 01:00:00 （小时、分钟、秒）的内容，我想计算一下这个时间。
我怎么做？我尝试了一些[计数 jquery 插件](https://www.google.com.br/search?aq=0&oq=javascript%20date%20&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8&q=javascript%20date%20format#hl=pt-BR&safe=off&sclient=psy-ab&q=javascript%20count%20time%20up&oq=javascript%20count%20time%20up&aq=f&aqi=g-bsK1g-bK2&aql=&gs_l=serp.3..0i8i10i30j0i8i30l2.385127.386624.1.386830.13.12.0.1.1.1.296.2741.0j1j10.11.0...0.0.HsApxFRJ_jo&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=9a0bb23a4407e97d&biw=1368&bih=656)，但它们都没有像我想要的那样工作你们如何计数？
提前致谢

**编辑**
我想我还不够清楚
我想要的是从我的服务器上捕获这个正常运行时间（已经完成了），并通过javascript，让它动态地计算这个当前的正常运行时间，所以如果用户离开键盘，通过例如，正常运行时间仍然增加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:35:48.220

您可以使用`setInterval`：

```
var seconds = 2642; // uptime in seconds
var timer = setInterval(
    function() {
        seconds++;
    }, 1000
); 
```

另外，请参阅[有关 JS 时间函数](http://www.w3schools.com/jsref/jsref_obj_date.asp)的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:42:30.017

我做过这样的事情（丑陋）：

```
 function atualizarTimer() {
    //span.uptimed is a string like 01:23:45
    var time = $('span.uptimed').text();
    var d = new Date();
    times = time.split(':');
    d.setHours(times[0]);
    d.setMinutes(times[1]);
    d.setSeconds(times[2]);
    d.setSeconds(d.getSeconds()+1);

    document.getElementById("uptimed").innerHTML = d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();
  } 
```

# r - 如何将一维数组/向量从 csv 读入 R

> ID：11144445
> 
> 赞同：0
> 
> 时间：2012-06-21T18:25:55.820
> 
> 标签：r, csv, plot

我有一段时间没有使用 R，我忘记了如何做到这一点。我正在输出大约 5000 个用逗号分隔的值。我想将它们导入 R 并绘制它们，以便我可以看到它们的分布方式。

文件：

```
1,2,3,4,5,6,7,8,9,0, 
```

代码：

```
x <- read.csv("output.csv", header=f, sep=",")
plot(x, axes=false, xlab="", ylab="") 
```

当我这样做时，我收到以下错误：

```
Error in pairs.default(data.matrix(x), ...) : object 'false' not found 
```

获得此结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:35:05.953

正如评论中所指出的，R 区分大小写。因此，`false`不等于`FALSE`，后者是正确的 R 语法。由于它不识别`false`为布尔值，因此搜索`false`不存在的名为的对象。作为说明，我认为使用`FALSE`而不是`F`. 这使您的意思更加明确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T08:34:16.933

海

这是我的解决方案：

这是您的文件 (numbers.csv) 中的数字：

```
1,2,3,4,5,6,7,8,9

x <- read.csv(numbers.csv,header=FALSE,sep=",")

plot(1:length(x),x,axes=F) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T05:41:39.037

您可以使用`scan`功能：

```
x <- scan("output.csv", sep=",")
plot(x, xlab="", ylab="") 
```

# css - 如何为 Rails 3 站点中的每个页面设置不同的背景图像？

> ID：11144454
> 
> 赞同：4
> 
> 时间：2012-06-21T18:26:18.783
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, background-image

我试图弄清楚如何为我的 Rails 3 站点的每个页面设置不同的背景图像。我怎样才能做到这一点，而不必为每个页面重复我的 css 文件中的内容？

**应用程序.html.erb**

```
<!DOCTYPE html>
<html>
<head>
  <title>Site title</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
<div class="container">
<div class="content">
    <%= yield %>
</div>
<%= render 'layouts/footer' %> 
</div>
</body>
</html> 
```

**pages.css.scss**

```
.container {
    width: 800px;
    height: 640px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-top: -320px;
    margin-left: -400px;
    background-image: url(amber1.jpg); 
    background-repeat: no-repeat; 
    background-color: black;
    font-family: times new roman, serif;
    text-align: center;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:32:14.567

我不认为你可以使用 css 做到这一点。即使使用 scss，您也必须先将其编译为纯 css，然后才能使用它，因此您无法即时更改它。但是您可以从css中省略背景图像，然后执行

```
<div class="container" style="background: url(<%= @my_computed_image_path %>)">
</div> 
```

然后你所要做的就是在控制器中的某种 before_filter 中设置@my_computed_image_path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:55:39.253

您可以创建一个**my_styles.scss.erb**文件并设置如下变量：

```
$body-background-color: <%= @page.body_background_color %> 
```

然后你可以在你的 scss 文件中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T23:04:57.377

您可以像这样直接在 html 中设置 background-image 属性：

```
<!DOCTYPE html>
<html>
<head>
  <title>Site title</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>
<div class="container" style="background-image: url(<%=@page.background_image%>); ">
<div class="content">
    <%= yield %>
</div>
<%= render 'layouts/footer' %> 
</div>
</body>
</html> 
```

您可以直接从 @page 变量或您想要的方式设置背景图像。

如果您愿意，您还可以使用如下样式表为每个页面设置不同的类：

```
.page_one{background-image: url(your_first_image.jpg)}
.page_two{background-image: url(your_second_image.jpg)}
.
. 
```

在你的 html 中：

```
<div class="container <%=dynamically set here the class from you @page%>"> 
```

# c - 为什么即使没有控制终端，getlogin() 也会成功

> ID：11144458
> 
> 赞同：2
> 
> 时间：2012-06-21T18:26:35.600
> 
> 标签：c, perl

我写了一个简单的C程序：

```
#include <unistd.h>
#include <stdio.h>

int main( int argc, char *argv[] ) {
  printf( "%s\n", getlogin() );
  return 0;
} 
```

...尝试一些事情。我尝试通过确保没有控制终端来使 getlogin() 失败，但它仍在获取登录名并打印它。证明这一点的最极端的例子：

```
#!/bin/bash
for i in $(env | grep -vP ^PATH\\b | awk -F= \{print \$1\}); do
  unset $i;
done;
(tty; perl -e 'setpgrp; sleep( 1 ); exec( qw( getlogin_test ) );' ) & 
```

以解释的方式：它取消设置除PATH之外的所有环境变量，然后运行一个执行'tty'的子shell，然后是一个perl实例；子外壳是背景的。调用 setpgrp 以确保它没有使用进程组来查找父级的控制终端（我不相信它会这样做，但我把它放在那里以防假设错误）。

在这一点上，我不知所措。它仍然打印用户名。我从很多来源看到的一个更简单的示例具有相同的行为：

```
sh -c 'time perl -e '"'"'$|=1; print getlogin(), chr(10);'"'"' &'
sh -c 'time perl -e '"'"'$|=1; print getlogin(), chr(10);'"'"' & wait' 
```

在 Solaris 10 和 Redhat 6 下，它们仍然会打印用户名，并使用不同版本的 perl、bash、sh 和 tcsh。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:48:55.573

关闭或将 STDIN 重定向到文件就可以了。

```
$ perl -wE'say getlogin()'
eric

$ perl -wE'open STDIN, "<", "/dev/null" or die $!; say getlogin()'
Use of uninitialized value in say at -e line 1. 
```

这是 Debian 机器上的自建 Perl（默认选项）。

# java - 从命令行运行 Android Junit 测试

> ID：11144466
> 
> 赞同：3
> 
> 时间：2012-06-21T18:26:59.637
> 
> 标签：java, android, bash, command-line, junit

我希望能够从命令行运行 Junit 测试，但是当我运行这个命令时

```
java -cp /usr/share/java/junit.jar org.junit.runner.JUnitCore [test class name] 
```

我得到的只是

```
OK (0 tests) 
```

它与它是一个 Android 项目有关吗？我之前运行过该命令并且没有太多问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T19:31:28.770

我只是设法从命令行运行 JUnit 测试，但使用 adb shell。

命令是

```
./adb shell am instrument -w com.dddforandroid.api/android.test.InstrumentationTestRunner 
```

更多细节[在这里](http://developer.android.com/tools/testing/testing_otheride.html#RunTestsDevice)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T18:54:19.663

模板：

```
adb shell am instrument -w <YOUR_PACKGE_NAME>.test/android.support.test.runner.AndroidJUnitRunner 
```

例子：

```
adb shell am instrument -w com.example.android.testing.blueprint.flavor2.test/android.support.test.runner.AndroidJUnitRunner 
```

谷歌 github 页面上的详细信息：[Android 测试蓝图](https://github.com/googlesamples/android-testing-templates/blob/master/AndroidTestingBlueprint/README.md)

# javascript - SVG 中的多个类

> ID：11144469
> 
> 赞同：6
> 
> 时间：2012-06-21T18:27:03.020
> 
> 标签：javascript, class, svg, d3.js

我对 SVG 非常陌生（使用 D3.js 调用所有内容）。最近，我刚刚在我正在做的一个项目中遇到了一个巨大的限制。我希望能够为我正在使用的每一类数据创建“g”类。不幸的是，我从仅以一种方式连接数据的 XML 文件获取数据（例如：person1 ---> person2，但不是 person2 ---> person1）。我想做的是将我的数据生成的每个形状放在根类和它连接的类中。如果我可以将此形状添加到两个或更多类（例如 g class = person1 和 person2），那将是我认为最快的解决方案......但是这样的事情可能吗？我可以将 SVG 形状设置为两个或更多类吗？或者它会在我定义新的时覆盖它。

我真的希望有人能理解我在问什么。在不泄露我最终项目的每一个细节的情况下，很难用语言表达我的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T20:00:26.227

是的，您可以设置多个类。例如，

```
<g class="person1 person2"> 
```

或者，在 D3 中：

```
g.attr("class", "person1 person2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T00:28:21.830

另一个注意事项：如果您从文件中调用函数：

```
.attr("class",function(d) { return d.person1+" "+ d.person2;}  ) 
```

# java - 如何从包含特定项目的arrayList 中生成所有可能的功率子集？

> ID：11144471
> 
> 赞同：1
> 
> 时间：2012-06-21T18:27:08.627
> 
> 标签：java, memory-management, collections, memory-leaks, subset

假设我有一个字符串数组列表，例如`[a, b, c, d, ....]`. 任何人都可以帮助我提供一个示例代码，我怎样才能得出一个包含此列表中所有可能的功率子集的结果，其中包括该列表中的特定字符串（单个和空子集除外）？

例如：如果我想`a`从示例列表中获取所有功率子集，那么输出将是：

```
[a,b], [a,c], [a,d], [a,b,c], [a,b,d], [a,c,d] without the empty and single subset([a]) 
```

同样，如果我想要，`b`那么输出将是：

```
[b,a], [b,c], [b,d], [b,a,c], [b,a,d], [b,c,d] without the empty and single subset([b]) 
```

由于示例列表中的所有项目都是字符串，因此当子集太丰富时，它们可能是内存问题。因为我需要一次将这些子集保存在内存中以保存一个字符串。因此，我还需要有关此场景的优化解决方案的帮助？

我需要 Java 的帮助。因为我不太擅长Java，如果我犯了任何错误，请原谅我！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:52:19.480

如果您的初始字符串数组列表包含 30 个或更少的项目，您可以使用 set 方法 powerSet (http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Sets.html# powerSet%28java.util.Set%29 - 谢谢，Jochen）。该文档声称该方法返回的集合的内存使用量仅为 O(n)。然后，您可以使用 if 条件对其进行迭代，以仅考虑包含“A”且大小为 2 或更大的集合。

我建议您先尝试上述或类似的简单解决方案，看看您是否遇到内存问题。

如果确实遇到内存问题，可以尝试通过最小化内存中保存的字符串的副本数量来进行优化。例如，您可以使用字节、短或整数列表（取决于您的数组列表的长度），其中每个列表都是字符串数组列表的索引。

然而，减少内存使用的最终方法是一次只在内存中保存一个子集（如果可能的话）。即生成（A，B），处理它，丢弃它，然后生成（A，C），处理它，丢弃它，等等。

# php - 使用 PHP 将数据输入 PHP 文件

> ID：11144472
> 
> 赞同：-4
> 
> 时间：2012-06-21T18:27:12.103
> 
> 标签：php, file, fwrite

这与我遇到的另一个问题是同一个项目。

我想知道如何使用 .php 将数据输入到另一个 php 文件的特定位置，所以将其视为远程添加数据。

我已经用谷歌搜索了，但没有找到太多，而且我确定我已经完成了 php 编辑，我只是​​对如何将数据输入到特定点一无所知。

任何帮助，将不胜感激。

```
<?php

// Parameters (Leave this Alone)
 $Message = $_GET["message"];
 $Username = htmlspecialchars($_GET["username"]);
 $time = ($_GET["time"]);

// User Banning
$data = file_get_contents('Banned.txt');
if(strpos($data, $Username) !== FALSE)
{
    die();
}
else
   {
// --------------- Staff Members ---------------- //
// Admins //
  If ($Username=="!divider!user")  $Username="!divider![Admin] user"; 
   If ($Username=="!divider!user2")  $Username="!divider![Admin] user2"; 

// File Writing (Leave this Alone) 
 $File = "Chat.txt"; 
 $Handle = fopen($File, "a"); 
 fwrite($Handle, $Username);
 fwrite($Handle, ": ");
 fwrite($Handle, $Message);
   fwrite($Handle, " -:-:- ");
 fwrite($Handle, $time);
 fwrite($Handle, "\r\n");
 print "Data Written"; 
 fclose($Handle); 
 }
 ?> 
```

我正在尝试使用另一个 php 文件在人员列表下添加人员。

所以在（edit.php）中有一个textarea输入，无论我提交什么，它都会在下面输入提交的数据：

```
 //-----Staff Members-----// 
```

我将使用的客户端将填写 php 用户名前后的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:40:49.280

您的问题不清楚，但听起来您想在代码中的某处添加另一个 php 文件。你可以 user `require`，`require_once`或者`include`来处理这个：

```
require_once('file-name-here.php'); 
```

# svg - Chrome SVG：使用 fill="freeze" 重用动画元素无法按预期工作

> ID：11144478
> 
> 赞同：2
> 
> 时间：2012-06-21T18:27:54.893
> 
> 标签：svg

我支持我们应用程序中的一些旧 SVG 图形。我在为矩形的填充颜色设置动画时遇到了一些问题，我想知道是否有其他人看到过同样的问题。

我们在 rec 上设置了一个动画元素，最终看起来像这样：

```
<svg id="svgEle" xmlns="http://www.w3.org/2000/svg" version="1.1">
<rect id="rect"
  width="100" height="100" 
  style="fill:#008000; stroke:#000000;">
    <animate id="animate" fill="freeze" 
      attributeName="fill" attributeType="CSS" 
      begin="indefinite" dur="1s"></animate>
  </rect>      
</svg> 
```

然后，根据来自 web 服务结果的值，我们更改矩形的颜色并尝试为颜色更改设置动画。目前，Chrome 似乎是唯一支持 beginElement 功能的原生 SVG 渲染器。动画在第一次运行时完美运行，但所有后续更新动画的尝试都没有按预期运行。它们似乎总是恢复到第一个动画的填充颜色。

我创建了以下示例来说明我的意思：http: [//jsfiddle.net/ssawchenko/ARXbs/](http://jsfiddle.net/ssawchenko/ARXbs/)

在 Chrome 中，当您单击按钮时，矩形应该通过动画循环显示所有 4 种颜色，但事实并非如此。在 IE9 中不支持动画，所以直接更改填充颜色。

我可以用 IE9 简单地设置填充，但是，在 Chrome 中颜色完全被破坏了。有谁知道这是否是一个错误，或者是否有解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:12:00.830

这个错误也出现在[SVG Edit](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)中。

```
<animate attributeName="opacity" begin="indefinite" dur="1" fill="freeze">
</animate> 
```

如果你在彼此的顶部绘制矩形，你会看到它们看起来是半透明的，而它们应该是完全不透明的。我已经看到 Chrome Canary 没有表现出这种行为，因此它可能会在下一个版本中得到修复。

我认为[这个提交的错误](http://code.google.com/p/chromium/issues/detail?id=104503&q=animate%20svg&sort=-id&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20Area%20Feature%20Status%20Owner%20Summary)是相关的。

# javascript - 在带有 iFrame 的页面上使用 document.getElementsByTagName - iframe 内的元素不会被拾取

> ID：11144479
> 
> 赞同：6
> 
> 时间：2012-06-21T18:27:55.520
> 
> 标签：javascript, iframe, getelementsbytagname

较新的 JavaScript。在我的页面（asp.net 应用程序，vb 作为服务器端语言）上，我使用 document.getElementsByTagName("img") 来获取所有带有 img 标记的 html 项目。我注意到一个特别没有出现在这个列表中（我能够将它们放入一个数组并单独访问这些项目 - 下面的代码）。此项目包含在 iframe 中（iframe 不使用 SRC 或其他任何东西，只是定义然后其中的 html 就在源代码中，不从另一个页面加载 - 这是由生成的水晶报告查看器自动生成的在运行时，这就是为什么我无法复制来显​​示这一点）。getElementsByTagName 是否因为它位于 iframe 内而没有拾取此图像？我需要能够访问这个 img 的 src（图像是水晶报表查看器中另一个自动生成的项目）。如果没有被拾取的原因是由于 iframe，有没有办法在 iframe 内的项目上运行它？或者只为 iframe 中的所有内容获取“innerhtml”类型属性，以便可以访问 img src。感谢您的帮助。

```
var IMGmatches = [];
        var IMGelems = document.getElementsByTagName("img");
        for (var j = 0; j < IMGelems.length; j++) {
            IMGmatches.push(IMGelems[j]);
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T18:31:58.943

这是因为 iframe 中的元素不是父文档的一部分。

要在 iframe 中获取任何内容，您需要访问 iframe 的`contentDocument`. 因此，您的代码可能如下所示：

```
var IMGmatches = [], IMGelems = document.getElementsByTagName("img"),
    iframes = document.getElementsByTagName('iframe'), l = IMGelems.length,
    m = iframes.length, i, j;
for( i=0; i<l; i++) IMGmatches[i] = IMGelems[i];
for( j=0; j<m; j++) {
    IMGelems = iframes[j].contentDocument.getElementsByTagName("img");
    l = IMGelems.length;
    for( i=0; i<l; i++) IMGmatches.push(IMGelems[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T06:25:25.060

这是一个函数，它将返回一组从（*并包括*）根开始的所有元素，包括可能的 iframe（非 CORS）和 shadow dom：

```
const subtreeSet = (root, theset) => {
	if (!theset) theset=new Set();
	if (!root || theset.has(root)) return theset;
	theset.add(root);
	if (root.shadowRoot) {
		Array.from(root.shadowRoot.children).forEach(child => subtreeSet(child, theset));
	} else {
		if (root.tagName === 'IFRAME') { try { root=root.contentDocument.body; theset.add(root); } catch (err) { root=null; /* CORS */ } }
	 	if (root && root.getElementsByTagName) for (const child of root.getElementsByTagName('*')) subtreeSet(child, theset);
	}
	return theset;
}

subtreeSet(document).forEach(elem => { 
  if (elem.style) elem.style.backgroundColor='yellow'; 
});
```

```
<div>TOP</div><br>
<div>IFRAME<br><iframe></iframe></div>
```

仅在 Chrome 中测试

# .net - 有没有办法知道某个路径是否是目录路径

> ID：11144481
> 
> 赞同：1
> 
> 时间：2012-06-21T18:27:59.170
> 
> 标签：.net, f#

我有一个表示路径的字符串 var (path)：

```
printfn "Please enter a path"
let path = System.Console.ReadLine() 
```

有没有办法知道这个路径是用于目录还是常规文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:33:02.700

使用[`Directory.Exists(path)`](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)和[`File.Exists(path)`](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)。

# c# - ASP MVC 3 服务器端 WP7 客户端应用程序

> ID：11144482
> 
> 赞同：0
> 
> 时间：2012-06-21T18:28:04.857
> 
> 标签：c#, asp.net-mvc, wcf, windows-phone-7

我将创建一个由 2 个模块组成的应用程序。

*   服务器端基于asp mvc 3 服务。这应该将来自 sql server 数据库的数据提供给一堆 WP7 客户端。
*   WP7 客户端。这个应该从服务器检索数据并将其存储在本地数据库中。

我想这两个应用程序只有一组模型是个好主意，我想使用实体框架。

我正在考虑以下方法：

将这两个项目放在一个解决方案上。在服务器端应用程序中生成实体框架模型，形成一个 sql server 数据库。在两个应用程序中使用它们。

服务器上的服务应该使用模型来检索数据，然后将它们作为 oData xml 返回。WP7 应用程序应获取此 oData xml 并使用相同的模型将其存储在本地数据库中。

我以前从未做过类似的事情，所以我不确定这是否是一个好方法。它会起作用吗？任何评论表示赞赏。

**编辑**

我已经有一个工作服务返回数据。我还创建了一个获取数据的测试 SL 应用程序。我使用服务器应用程序中的实体框架模型。下一步是创建一个 WP7 应用程序，将数据抓取到实体框架模型（与我之前提到的 SL 应用程序中的方式相同）。

在这里，您可以看到我如何通过服务创建读取上下文：

```
svc = new BlogContext(new Uri("/BlogService.svc", UriKind.Relative));
var q = svc.Blogs; 
```

但是还有一个问题不知道怎么解决。如何创建上下文以写入 WP7 本地数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:23:25.953

是的，它可以工作；我在我的一个应用程序中做着非常相似的事情（尽管将 oData 换成了 JSON/OAuth API）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:52:21.847

您可能希望使用[Project Linker](http://visualstudiogallery.msdn.microsoft.com/5e730577-d11c-4f2e-8e2b-cbb87f76c044/%20%22Project%20Linker)之类的东西来获得多目标解决方案，因为库在 Silverlight (WP7) 和服务器 (.NET) 之间是不可共享的。

坚持 POCO 类，并专门使用 EF POCO 类模板。仅在服务器上使用 EF 模型本身。我认为您不能在 Silverlight 中使用 DataAnnotations，因此您可能需要自己进行验证。

# asp.net - 用于 Excel 的 .Net 内联架构/XML 编程生成

> ID：11144483
> 
> 赞同：0
> 
> 时间：2012-06-21T18:28:05.787
> 
> 标签：asp.net, .net, xml, excel, xsd

我有一组使用 ASP.Net (VB.Net) 呈现到网页的数据。我现在想将该数据导出到 XML。我创建了一些代码来生成模式，但是，我不知道下一步该做什么。我希望架构与 XML 数据一致，并且我希望编译器检查以确保我为 XML 内容输入的数据针对包含的架构进行验证。有人知道这样做的方法吗？这个想法是让我能够在 Excel 中使用正确类型的字段打开生成的文件。

我以前构建过 XML 文档，这是我以编程方式创建的第一个模式文档。但是，我从来没有使用过内联模式，更不用说使用它们来强类型化添加到文档中的 XML。

我已经阅读了以下内容，这些内容非常有帮助，但都没有解决我上面提到的问题：

[http://www.aspfree.com/c/a/XML/Generating-XML-Schema-Dynamically-Using-VBNET-2005-Essentials/](http://www.aspfree.com/c/a/XML/Generating-XML-Schema-Dynamically-Using-VBNET-2005-Essentials/)

[http://blogs.msdn.com/b/kaevans/archive/2007/06/05/inline-an-xml-schema-into-your-xml-document.aspx](http://blogs.msdn.com/b/kaevans/archive/2007/06/05/inline-an-xml-schema-into-your-xml-document.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:40:19.343

我不知道您所说的“......我希望编译器检查以确保我为 XML 内容输入的数据根据​​包含的模式进行验证”是什么意思。

编译器从不检查。如果您想以编程方式根据架构验证您的 XML 文档，您可能应该使用[http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidator.aspx](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidator.aspx)。

但是为了将架构与文档内联，您有点回答了自己的问题。您问题中的第二个链接到[http://blogs.msdn.com/b/kaevans/archive/2007/06/05/inline-an-xml-schema-into-your-xml-document.aspx](http://blogs.msdn.com/b/kaevans/archive/2007/06/05/inline-an-xml-schema-into-your-xml-document.aspx)正是你想做什么。

您可以将内联 XML Schema 视为文档中的文档。好吧，使用 Kirk 的示例，最外层的文档更像是一个使用未定义命名空间（无模式）的容器。他的示例使用属于未定义命名空间的“DerekDoc”文档根。您可以随意命名。

在那个根目录里面基本上是*两个文件*。一种是内联 XML Schema。您只需将其添加为根的子元素。另一个是您打算符合 XML 模式的 XML 文档。您将需要使用该`xmlns`属性将此元素设置为您的 XML 模式定义的命名空间（模式的目标命名空间）。

*将根元素设置为模式的目标命名空间可能*有效（我没有尝试过），但客户端可能更难验证文档，因为它是前向引用。

# c++ - 如何使用 GCC-MP-4.7 在 OS X 上编译 ASL？

> ID：11144489
> 
> 赞同：0
> 
> 时间：2012-06-21T18:28:23.100
> 
> 标签：c++, gcc, clang, asl

我在尝试在运行 Lion 的 Mac 上编译[Adob​​e Source Libraries (ASL)时遇到了各种麻烦。](http://stlab.adobe.com/)我正在使用 MacPorts GCC-4.7（我喜欢 C++11）。

我通过将 url 更改为指向 downloads.sourceforge.net 下载并编辑了 asl_1.0.43_net_setup.sh。

我告诉 bjam 使用我的 gcc 并通过编辑 ~/user-config.jam 将 -std=c++11 标志传递给它：

```
import toolset : using ; using darwin ;
using gcc
    : 47 
    : g++-mp-4.7 
    : <cxxflags>"-std=c++11"
    ; 
```

我用标志告诉 bjam 制作 64 位版本： bjam toolset=gcc-47 -j 4 address-model=64 architecture=x86

我不断收到错误消息（多次）：documentation/examples/namespace.cpp:1:0: error: CPU you selected does not support x86-64 instructions set

即使我告诉它使用 64 位，bjam（愚蠢地）似乎正在设置 -march=i486 并导致上述问题。理想情况下，ASL 可以使用我现有的已安装 boost 和 TBB 进行编译，而无需构建自定义版本。

到目前为止，我已经花了几个小时，准备扔掉它。它似乎有很多希望，但构建系统不灵活（这就是我不使用 jam 或 bjam 的原因）。

有没有人有任何关于使用 clang 或 GCC 在现代 Mac 上构建这个东西的提示？（GCC：不是 XCode 附带的版本）。

[编辑] 我找到了 i486 位并将其删除。现在我遇到了用 C++11 编译器编译的问题：

```
./adobe/closed_hash.hpp:691:88: error: 'insert' was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
./adobe/closed_hash.hpp:691:88: note: declarations in dependent base    'adobe::version_1::closed_hash_set<adobe::pair<adobe::version_1::name_t, adobe::version_1::any_regular_t>, adobe::get_element<0, adobe::pair<adobe::version_1::name_t, adobe::version_1::any_regular_t> >, boost::hash<adobe::version_1::name_t>, std::equal_to<adobe::version_1::name_t>, adobe::version_1::capture_allocator<adobe::pair<adobe::version_1::name_t, adobe::version_1::any_regular_t> > >' are not found by unqualified lookup
./adobe/closed_hash.hpp:691:88: note: use 'this->insert' instead 
```

[编辑] 嗯，这实际上看起来像是 adobe 代码中的一个错误，g++ 过去是允许的，但现在不再允许了。叹息，现在看起来 ASL 还没有针对任何现代的（大部分）兼容的 C++11 编译器进行编译。

现在我在 adobe 脚本下载的 boost 版本中看到编译问题（信号库显然在某些移动构造函数中存在错误，并且 GCC 正在抱怨它）：

```
../boost_libraries/boost/smart_ptr/shared_ptr.hpp:168:25: note: 'boost::shared_ptr<boost::signals::detail::basic_connection>::shared_ptr(const boost::shared_ptr<boost::signals::detail::basic_connection>&)' is implicitly declared as deleted because 'boost::shared_ptr<boost::signals::detail::basic_connection>' declares a move constructor or move assignment operator 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:08:31.467

我已经放弃试图弄清楚 bjam 引入的所有复杂性。

相反，我在 ASL 的 github 上创建了一个分支，我正在使用 cmake、gcc-47 和 clang-3.2 构建它。我在代码中做了一些小修复，并且其中一个目录在没有警告的情况下编译。

[https://github.com/tfiner/adobe_asl](https://github.com/tfiner/adobe_asl)

[编辑] 经过几个小时的汗水，我终于有了两个由 clang 3.2 使用 boost 1.49、TBB 4.0 和 OS X 10.6 构建的闪亮库。随意从 github 克隆它，如果你设法让它工作，请告诉我。

# php - 使用 Laravel 传递 URL 参数

> ID：11144496
> 
> 赞同：9
> 
> 时间：2012-06-21T18:28:44.160
> 
> 标签：php, laravel

我想访问这样的页面...

```
http://mysitelocaltion/user_name/user_id 
```

这只是一个虚拟链接，我使用 .htaccess -rewrite 规则在内部传递“user_name”和“use_id”作为我实际页面的获取参数。

我如何在 Laravel 中达到同样的效果？

**更新：** 这会有所帮助（文档）

```
Route::get('user/(:any)/task/(:num)', function ($username, $task_number) {
    // $username will be replaced by the value of (:any)
    // $task_number will be replaced by the integer in place of (:num)
    $data = array(
        'username' => $username,
        'task' => $task_number
    );
    return View::make('tasks.for_user', $data);
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T18:35:34.583

```
Route::get('(:any)/(:any)', function($user_name, $user_id) {
    echo $user_name;
}); 
```

很高兴看到你使用 Laravel！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T05:51:44.393

您可以在路线中添加以下内容

```
Route::get('user_name/{user_id}', 'YourControllerName@method_name'); 
```

在您的控制器中，您可以按如下方式访问该值

```
public function method_name(Request $request, $user_id){
    echo $user_id;
    $user = User::find($user_id);
    return view('view_name')->with('user', $user);
} 
```

# facebook - 使页面选项卡可搜索？

> ID：11144497
> 
> 赞同：0
> 
> 时间：2012-06-21T18:28:46.623
> 
> 标签：facebook, search, tabs

我有一个客户希望他们的标签应用程序可以在 Facebook 中搜索。您可以很好地搜索应用程序本身，但结果与页面分开（无法返回页面本身）。

是否可以使页面选项卡可搜索？如果没有，有没有办法检测应用程序是否在选项卡中（以便我们可以显示返回页面的自定义链接）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:28:14.060

目前无法使页面选项卡可搜索。应用程序是可搜索的，因此解决方案应该是使用特定的应用程序。使用该应用程序，您可以在选项卡中呈现内容。但是当用户搜索时，他们将登陆您的应用画布（而不是标签），但您可以使用 javascript 重定向回您的标签 url。将此代码放在您的画布应用程序视图中：

```
window.location = "your_tab_url" 
```

# mysql - MySQL 不会在使用 Rubber 部署的 EC2 上连接

> ID：11144502
> 
> 赞同：2
> 
> 时间：2012-06-21T18:29:19.657
> 
> 标签：mysql, ruby-on-rails, amazon-ec2

我正在使用 Rubber 部署 Rails 应用程序，但无法连接到 MySQL。我是否必须在 EC2 上手动设置 MySQL，或者 Rubber 是否应该已经这样做了？虽然这不是很有帮助，但这里是运行 rake 时的日志输出：

```
 ** [out :: db01.memepluspl.us] rake aborted!
 ** [out :: db01.memepluspl.us] 
 ** [out :: db01.memepluspl.us] Access denied for user ''@'db01.memepluspl.us' to database 'meme_plus_plus_production'
 ** [out :: db01.memepluspl.us] 
 ** [out :: db01.memepluspl.us] 
 ** [out :: db01.memepluspl.us] Tasks: TOP => db:migrate => environment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T06:48:53.530

如果其他人遇到这个问题，那是因为 mysql 现在添加了默认匿名用户，但访问受限。

这个问题在[这里](https://github.com/wr0ngway/rubber/issues/185)讨论。

第一个解决方案不够全面，最后需要一个删除所有匿名用户（不仅仅是本地主机）的解决方案。这是因为 MYSQL 将在 USER 之前在 HOST 上进行身份验证，因此匿名用户 ''@'your.host.com' 将优先于 'dbuser'@'your.host.com' （记录在[mysql 文档](http://dev.mysql.com/doc/refman/4.1/en/connection-access.html)中）并且橡胶将正在尝试连接完整的主机名。

编辑您的**./config/rubber/deploy-mysql.yml：**

```
rubber.sudo_script "create_master_db", <<-ENDSCRIPT
  mysql -u root -e "create database #{env.db_name};"
  mysql -u root -e "delete from mysql.user where user='';"   <<-- ADD THIS LINE
  ...
ENDSCRIPT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T05:54:01.950

就我而言，我在 Rubber.yml 中输入的应用程序名称实际上与实际应用程序名称不同（项目文件保留占位符名称）...

我 ssh 进入实例，寻找`current/`然后`cat config/database.yml` 尝试运行连接命令 rake 会尝试从那里的东西运行并且错误在那里，所以我建议尝试更好地调试正在发生的事情

我猜我必须更改 Rubber-mysql.yml 配置...我现在重新创建暂存的东西，我认为它至少应该通过这个问题.. gl

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:35:03.957

我不太了解方向舵，但它看起来缺少一些配置。没有指定用户，也可能没有密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T18:47:04.053

我对 Rubber 一点都不熟悉，所以我不知道它是否应该为您创建 MySQL 帐户，但这里是手动操作的方法：

```
mysql -u root
mysql> grant all on meme_plus_plus_production.* to 'user'@'db01.memepluspl.us' identified by 'password';
mysql> flush privileges;
mysql> exit; 
```

您可能需要输入 MySQL 根帐户的密码；例如，在 Ubunutu 上，默认值为“密码”。

另请注意，我的示例将数据库中每个表的完全读写权限授予指定用户。如果您想使用降低的权限，请查找 MySQL grant 命令。

# sharepoint - sharepoint 2010 InfoPath 表单创建任务

> ID：11144504
> 
> 赞同：0
> 
> 时间：2012-06-21T18:29:33.640
> 
> 标签：sharepoint, sharepoint-designer

所以我有 1 个文档库和 1 个任务列表。

在工作流中，当根据各种问题保存新的信息路径表单时，任务列表中会创建任务。

我有一个 webart，显示按文档标题分组的所有任务。

我的问题是：

当文档批准的工作流程完成时，我如何隐藏/关闭这些相关任务？

我正在尝试从文档库中进行查找，以引入将成为我的 webpart 过滤器的 Date Closed 字段。

我无法将 2 条记录链接在一起以显示该文档的关闭日期。

不确定这是否有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:52:09.423

当任务完成时，它会将任务状态更新为已完成。尝试仅在 Webpart 中查询未完成的任务。

# ruby-on-rails-3 - RVM & GDAL - 链接外部库

> ID：11144510
> 
> 赞同：0
> 
> 时间：2012-06-21T18:30:07.290
> 
> 标签：ruby-on-rails-3, rvm, ubuntu-11.10, gdal

我在我的 rails 3 项目中使用 GDAL。如果不默认使用系统红宝石，我似乎无法弄清楚如何让它正常工作。Rails 抱怨说即使安装了它也找不到“gdal/org”。如何在 RVM 中创建此链接并仍然使用我的 ruby​​ gemset？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:52:26.703

听起来您安装了这些库，但您如何尝试让 Ruby 使用它们？根据我的理解，通过 apt 安装 libgdal-ruby 会将所有内容安装在系统路径中，默认情况下这些内容不会由通过 RVM 安装的 Ruby 或使用 Bundler 隔离 gem 的 Rails 应用程序自动加载。也许你可以尝试设置类似

`ENV['LD_LIBRARY_PATH'] = "#{ENV['LD_LIBRARY_PATH']}:/path/to/gdal/libs"`

在你的 environment.rb 中包含 gdal 的库。您可能还需要一个自定义初始化程序以在应用程序启动时要求它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:59:24.183

更好的是，我发现了这个完美运行的 gem：github.com/zhm/gdal-ruby。

# python - x 和 y 数组点的笛卡尔积到二维点的单个数组中

> ID：11144513
> 
> 赞同：183
> 
> 时间：2012-06-21T18:30:19.217
> 
> 标签：python, numpy, cartesian-product

我有两个 numpy 数组，它们定义了网格的 x 轴和 y 轴。例如：

```
x = numpy.array([1,2,3])
y = numpy.array([4,5]) 
```

我想生成这些数组的笛卡尔积来生成：

```
array([[1,4],[2,4],[3,4],[1,5],[2,5],[3,5]]) 
```

在某种程度上，这并不是非常低效，因为我需要在循环中多次执行此操作。我假设将它们转换为 Python 列表并使用`itertools.product`并返回到 numpy 数组并不是最有效的形式。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-06-21T20:58:40.823

## 规范的`cartesian_product`（几乎）

有许多方法可以解决这个具有不同属性的问题。有些比其他更快，有些更通用。经过大量测试和调整，我发现以下计算 n 维的函数`cartesian_product`对于许多输入来说比大多数其他函数更快。对于稍微复杂一些但在许多情况下甚至更快的方法，请参阅[Paul Panzer](https://stackoverflow.com/a/49445693/577088)的答案。

鉴于这个答案，这不再是我所知道的笛卡尔积的*最快实现。*`numpy`但是，我认为它的简单性将继续使其成为未来改进的有用基准：

```
def cartesian_product(*arrays):
    la = len(arrays)
    dtype = numpy.result_type(*arrays)
    arr = numpy.empty([len(a) for a in arrays] + [la], dtype=dtype)
    for i, a in enumerate(numpy.ix_(*arrays)):
        arr[...,i] = a
    return arr.reshape(-1, la) 
```

值得一提的是，这个功能的使用`ix_`方式不同寻常；虽然文档中的用途`ix_`是为*数组*生成[索引，但碰巧具有相同形状的数组可用于广播分配。](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ix_.html) 非常感谢[mgilson](https://stackoverflow.com/a/12955035/577088)，他激励我尝试使用这种方式，以及[unutbu](https://stackoverflow.com/users/190597/unutbu)，他提供了一些关于这个答案的非常有用的反馈，包括使用的建议。*`ix_`[`numpy.result_type`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.result_type.html)*

 *## 值得注意的替代品

有时以 Fortran 顺序写入连续的内存块会更快。这就是这种替代方案的基础，`cartesian_product_transpose`在某些硬件上证明它比`cartesian_product`（见下文）更快。但是，使用相同原理的 Paul Panzer 的答案更快。不过，我在这里为感兴趣的读者提供了这个：

```
def cartesian_product_transpose(*arrays):
    broadcastable = numpy.ix_(*arrays)
    broadcasted = numpy.broadcast_arrays(*broadcastable)
    rows, cols = numpy.prod(broadcasted[0].shape), len(broadcasted)
    dtype = numpy.result_type(*arrays)

    out = numpy.empty(rows * cols, dtype=dtype)
    start, end = 0, rows
    for a in broadcasted:
        out[start:end] = a.reshape(-1)
        start, end = end, end + rows
    return out.reshape(cols, rows).T 
```

在了解了 Panzer 的方法之后，我编写了一个几乎和他一样快的新版本，并且几乎就像这样简单`cartesian_product`：

```
def cartesian_product_simple_transpose(arrays):
    la = len(arrays)
    dtype = numpy.result_type(*arrays)
    arr = numpy.empty([la] + [len(a) for a in arrays], dtype=dtype)
    for i, a in enumerate(numpy.ix_(*arrays)):
        arr[i, ...] = a
    return arr.reshape(la, -1).T 
```

这似乎有一些恒定时间开销，使其在小输入时比 Panzer 运行得慢。但是对于更大的输入，在我运行的所有测试中，它的性能和他最快的实现一样好（`cartesian_product_transpose_pp`）。

在接下来的部分中，我包括了对其他替代方案的一些测试。这些现在有些过时了，但出于历史兴趣，我决定将它们留在这里，而不是重复努力。有关最新测试，请参阅 Panzer 的答案以及[Nico Schlömer](https://stackoverflow.com/a/45378609/577088)的。

## 针对替代品的测试

以下是一组测试，它们显示了其中一些功能相对于许多替代方案提供的性能提升。`numpy`此处显示的所有测试均在运行 Mac OS 10.12.5、Python 3.6.1 和1.12.1的四核机器上执行。众所周知，硬件和软件的变化会产生不同的结果，所以 YMMV。为自己运行这些测试以确保！

定义：

```
import numpy
import itertools
from functools import reduce

### Two-dimensional products ###

def repeat_product(x, y):
    return numpy.transpose([numpy.tile(x, len(y)), 
                            numpy.repeat(y, len(x))])

def dstack_product(x, y):
    return numpy.dstack(numpy.meshgrid(x, y)).reshape(-1, 2)

### Generalized N-dimensional products ###

def cartesian_product(*arrays):
    la = len(arrays)
    dtype = numpy.result_type(*arrays)
    arr = numpy.empty([len(a) for a in arrays] + [la], dtype=dtype)
    for i, a in enumerate(numpy.ix_(*arrays)):
        arr[...,i] = a
    return arr.reshape(-1, la)

def cartesian_product_transpose(*arrays):
    broadcastable = numpy.ix_(*arrays)
    broadcasted = numpy.broadcast_arrays(*broadcastable)
    rows, cols = numpy.prod(broadcasted[0].shape), len(broadcasted)
    dtype = numpy.result_type(*arrays)

    out = numpy.empty(rows * cols, dtype=dtype)
    start, end = 0, rows
    for a in broadcasted:
        out[start:end] = a.reshape(-1)
        start, end = end, end + rows
    return out.reshape(cols, rows).T

# from https://stackoverflow.com/a/1235363/577088

def cartesian_product_recursive(*arrays, out=None):
    arrays = [numpy.asarray(x) for x in arrays]
    dtype = arrays[0].dtype

    n = numpy.prod([x.size for x in arrays])
    if out is None:
        out = numpy.zeros([n, len(arrays)], dtype=dtype)

    m = n // arrays[0].size
    out[:,0] = numpy.repeat(arrays[0], m)
    if arrays[1:]:
        cartesian_product_recursive(arrays[1:], out=out[0:m,1:])
        for j in range(1, arrays[0].size):
            out[j*m:(j+1)*m,1:] = out[0:m,1:]
    return out

def cartesian_product_itertools(*arrays):
    return numpy.array(list(itertools.product(*arrays)))

### Test code ###

name_func = [('repeat_product',                                                 
              repeat_product),                                                  
             ('dstack_product',                                                 
              dstack_product),                                                  
             ('cartesian_product',                                              
              cartesian_product),                                               
             ('cartesian_product_transpose',                                    
              cartesian_product_transpose),                                     
             ('cartesian_product_recursive',                           
              cartesian_product_recursive),                            
             ('cartesian_product_itertools',                                    
              cartesian_product_itertools)]

def test(in_arrays, test_funcs):
    global func
    global arrays
    arrays = in_arrays
    for name, func in test_funcs:
        print('{}:'.format(name))
        %timeit func(*arrays)

def test_all(*in_arrays):
    test(in_arrays, name_func)

# `cartesian_product_recursive` throws an 
# unexpected error when used on more than
# two input arrays, so for now I've removed
# it from these tests.

def test_cartesian(*in_arrays):
    test(in_arrays, name_func[2:4] + name_func[-1:])

x10 = [numpy.arange(10)]
x50 = [numpy.arange(50)]
x100 = [numpy.arange(100)]
x500 = [numpy.arange(500)]
x1000 = [numpy.arange(1000)] 
```

测试结果：

```
In [2]: test_all(*(x100 * 2))
repeat_product:
67.5 µs ± 633 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
dstack_product:
67.7 µs ± 1.09 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
cartesian_product:
33.4 µs ± 558 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
cartesian_product_transpose:
67.7 µs ± 932 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
cartesian_product_recursive:
215 µs ± 6.01 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
cartesian_product_itertools:
3.65 ms ± 38.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

In [3]: test_all(*(x500 * 2))
repeat_product:
1.31 ms ± 9.28 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
dstack_product:
1.27 ms ± 7.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
cartesian_product:
375 µs ± 4.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
cartesian_product_transpose:
488 µs ± 8.88 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
cartesian_product_recursive:
2.21 ms ± 38.4 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_itertools:
105 ms ± 1.17 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)

In [4]: test_all(*(x1000 * 2))
repeat_product:
10.2 ms ± 132 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
dstack_product:
12 ms ± 120 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product:
4.75 ms ± 57.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_transpose:
7.76 ms ± 52.7 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_recursive:
13 ms ± 209 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_itertools:
422 ms ± 7.77 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

在所有情况下，`cartesian_product`如本答案开头所定义的那样是最快的。

对于那些接受任意数量的输入数组的函数，也值得检查性能`len(arrays) > 2`。（直到我可以确定为什么[`cartesian_product_recursive`](https://stackoverflow.com/a/1235363/577088)在这种情况下会引发错误，我已将其从这些测试中删除。）

```
In [5]: test_cartesian(*(x100 * 3))
cartesian_product:
8.8 ms ± 138 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_transpose:
7.87 ms ± 91.5 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_itertools:
518 ms ± 5.5 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

In [6]: test_cartesian(*(x50 * 4))
cartesian_product:
169 ms ± 5.1 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
cartesian_product_transpose:
184 ms ± 4.32 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
cartesian_product_itertools:
3.69 s ± 73.5 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

In [7]: test_cartesian(*(x10 * 6))
cartesian_product:
26.5 ms ± 449 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
cartesian_product_transpose:
16 ms ± 133 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
cartesian_product_itertools:
728 ms ± 16 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

In [8]: test_cartesian(*(x10 * 7))
cartesian_product:
650 ms ± 8.14 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
cartesian_product_transpose:
518 ms ± 7.09 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
cartesian_product_itertools:
8.13 s ± 122 ms per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

正如这些测试所示，`cartesian_product`在输入数组的数量增加到（大约）四个以上之前，它仍然具有竞争力。在那之后，`cartesian_product_transpose`确实有轻微的优势。

值得重申的是，使用其他硬件和操作系统的用户可能会看到不同的结果。例如，unutbu 报告使用 Ubuntu 14.04、Python 3.4.3 和`numpy`1.14.0.dev0+b7050a9 进行这些测试的结果如下：

```
>>> %timeit cartesian_product_transpose(x500, y500) 
1000 loops, best of 3: 682 µs per loop
>>> %timeit cartesian_product(x500, y500)
1000 loops, best of 3: 1.55 ms per loop 
```

下面，我将详细介绍我在这些方面运行的早期测试。对于不同的硬件和不同版本的 Python 和`numpy`. 虽然它对使用最新版本的人没有立即有用`numpy`，但它说明了自此答案的第一个版本以来情况发生了怎样的变化。

## 一个简单的选择：`meshgrid`+`dstack`

当前接受的答案使用`tile`and`repeat`一起广播两个数组。但该`meshgrid`功能实际上做同样的事情。这是传递给转置之前的`tile`输出`repeat`：

```
In [1]: import numpy
In [2]: x = numpy.array([1,2,3])
   ...: y = numpy.array([4,5])
   ...: 

In [3]: [numpy.tile(x, len(y)), numpy.repeat(y, len(x))]
Out[3]: [array([1, 2, 3, 1, 2, 3]), array([4, 4, 4, 5, 5, 5])] 
```

这是输出`meshgrid`：

```
In [4]: numpy.meshgrid(x, y)
Out[4]: 
[array([[1, 2, 3],
        [1, 2, 3]]), array([[4, 4, 4],
        [5, 5, 5]])] 
```

如您所见，它几乎完全相同。我们只需要重塑结果即可获得完全相同的结果。

```
In [5]: xt, xr = numpy.meshgrid(x, y)
   ...: [xt.ravel(), xr.ravel()]
Out[5]: [array([1, 2, 3, 1, 2, 3]), array([4, 4, 4, 5, 5, 5])] 
```

`meshgrid`不过，我们可以将 to 的输出传递给之后再进行整形，而不是此时进行整形，这样可以`dstack`节省一些工作：

```
In [6]: numpy.dstack(numpy.meshgrid(x, y)).reshape(-1, 2)
Out[6]: 
array([[1, 4],
       [2, 4],
       [3, 4],
       [1, 5],
       [2, 5],
       [3, 5]]) 
```

与[此评论](https://stackoverflow.com/questions/11144513/numpy-cartesian-product-of-x-and-y-array-points-into-single-array-of-2d-points/11146645#comment51266043_11144716)中的说法相反，我没有看到任何证据表明不同的输入会产生不同形状的输出，并且如上所示，它们做的事情非常相似，所以如果他们这样做会很奇怪。如果您找到反例，请告诉我。

## 测试`meshgrid`+`dstack`与`repeat`+`transpose`

随着时间的推移，这两种方法的相对性能发生了变化。在早期版本的 Python (2.7) 中，使用`meshgrid`+的结果`dstack`对于小输入明显更快。（请注意，这些测试来自此答案的旧版本。）定义：

```
>>> def repeat_product(x, y):
...     return numpy.transpose([numpy.tile(x, len(y)), 
                                numpy.repeat(y, len(x))])
...
>>> def dstack_product(x, y):
...     return numpy.dstack(numpy.meshgrid(x, y)).reshape(-1, 2)
... 
```

对于中等大小的输入，我看到了显着的加速。但是我在较新的机器上使用更新版本的 Python (3.6.1) 和`numpy`(1.12.1) 重试了这些测试。这两种方法现在几乎相同。

**旧测试**

```
>>> x, y = numpy.arange(500), numpy.arange(500)
>>> %timeit repeat_product(x, y)
10 loops, best of 3: 62 ms per loop
>>> %timeit dstack_product(x, y)
100 loops, best of 3: 12.2 ms per loop 
```

**新测试**

```
In [7]: x, y = numpy.arange(500), numpy.arange(500)
In [8]: %timeit repeat_product(x, y)
1.32 ms ± 24.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
In [9]: %timeit dstack_product(x, y)
1.26 ms ± 8.47 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each) 
```

与往常一样，YMMV，但这表明在 Python 和 numpy 的最新版本中，它们是可以互换的。

## 广义产品功能

一般来说，我们可能期望使用内置函数对于小输入会更快，而对于大输入，专用函数可能会更快。此外，对于广义的 n 维产品，`tile`也`repeat`无济于事，因为它们没有明确的高维类似物。因此，也值得研究专用函数的行为。

大多数相关测试出现在此答案的开头，但这里有一些在早期版本的 Python 上执行的测试并`numpy`用于比较。

[另一个答案](https://stackoverflow.com/a/1235363/577088)中定义的`cartesian`函数曾经在较大的输入中表现得很好。（与上面调用的函数相同。）为了比较，我们只使用两个维度。`cartesian_product_recursive``cartesian``dstack_prodct`

同样，旧测试显示出显着差异，而新测试几乎没有。

**旧测试**

```
>>> x, y = numpy.arange(1000), numpy.arange(1000)
>>> %timeit cartesian([x, y])
10 loops, best of 3: 25.4 ms per loop
>>> %timeit dstack_product(x, y)
10 loops, best of 3: 66.6 ms per loop 
```

**新测试**

```
In [10]: x, y = numpy.arange(1000), numpy.arange(1000)
In [11]: %timeit cartesian([x, y])
12.1 ms ± 199 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
In [12]: %timeit dstack_product(x, y)
12.7 ms ± 334 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

和以前一样，`dstack_product`仍然以较小的比例跳动`cartesian`。

**新测试**（*未显示多余的旧测试*）

```
In [13]: x, y = numpy.arange(100), numpy.arange(100)
In [14]: %timeit cartesian([x, y])
215 µs ± 4.75 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
In [15]: %timeit dstack_product(x, y)
65.7 µs ± 1.15 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

我认为这些区别很有趣，值得记录。但他们最终是学术的。正如这个答案开头的测试所显示的那样，所有这些版本几乎总是比`cartesian_product`这个答案开头定义的要慢 - 这本身比这个问题的答案中最快的实现要慢一些。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-06-21T18:43:01.553

```
>>> numpy.transpose([numpy.tile(x, len(y)), numpy.repeat(y, len(x))])
array([[1, 4],
       [2, 4],
       [3, 4],
       [1, 5],
       [2, 5],
       [3, 5]]) 
```

有关计算 N 个数组的笛卡尔积的通用解决方案，请参阅[使用 numpy 构建两个数组的所有组合的数组。](https://stackoverflow.com/questions/1208118/using-numpy-to-build-an-array-of-all-combinations-of-two-arrays)

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2013-10-18T22:00:34.490

你可以在 python 中做普通的列表理解

```
x = numpy.array([1,2,3])
y = numpy.array([4,5])
[[x0, y0] for x0 in x for y0 in y] 
```

这应该给你

```
[[1, 4], [1, 5], [2, 4], [2, 5], [3, 4], [3, 5]] 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2017-07-28T16:44:38.317

我对此也很感兴趣，并做了一些性能比较，可能比@senderle 的答案更清楚。

对于两个数组（经典案例）：

[![在此处输入图像描述](../Images/8d02df9446ddc62a9e660269473d33c1.png)](https://i.stack.imgur.com/GFsMV.png)

对于四个数组：

[![在此处输入图像描述](../Images/fdd797ea275a0239be8ca0a5446f0f93.png)](https://i.stack.imgur.com/4WQgQ.png)

（请注意，这里的数组长度只有几十个条目。）

* * *

重现绘图的代码：

```
from functools import reduce
import itertools
import numpy
import perfplot

def dstack_product(arrays):
    return numpy.dstack(numpy.meshgrid(*arrays, indexing="ij")).reshape(-1, len(arrays))

# Generalized N-dimensional products
def cartesian_product(arrays):
    la = len(arrays)
    dtype = numpy.find_common_type([a.dtype for a in arrays], [])
    arr = numpy.empty([len(a) for a in arrays] + [la], dtype=dtype)
    for i, a in enumerate(numpy.ix_(*arrays)):
        arr[..., i] = a
    return arr.reshape(-1, la)

def cartesian_product_transpose(arrays):
    broadcastable = numpy.ix_(*arrays)
    broadcasted = numpy.broadcast_arrays(*broadcastable)
    rows, cols = reduce(numpy.multiply, broadcasted[0].shape), len(broadcasted)
    dtype = numpy.find_common_type([a.dtype for a in arrays], [])

    out = numpy.empty(rows * cols, dtype=dtype)
    start, end = 0, rows
    for a in broadcasted:
        out[start:end] = a.reshape(-1)
        start, end = end, end + rows
    return out.reshape(cols, rows).T

# from https://stackoverflow.com/a/1235363/577088
def cartesian_product_recursive(arrays, out=None):
    arrays = [numpy.asarray(x) for x in arrays]
    dtype = arrays[0].dtype

    n = numpy.prod([x.size for x in arrays])
    if out is None:
        out = numpy.zeros([n, len(arrays)], dtype=dtype)

    m = n // arrays[0].size
    out[:, 0] = numpy.repeat(arrays[0], m)
    if arrays[1:]:
        cartesian_product_recursive(arrays[1:], out=out[0:m, 1:])
        for j in range(1, arrays[0].size):
            out[j * m : (j + 1) * m, 1:] = out[0:m, 1:]
    return out

def cartesian_product_itertools(arrays):
    return numpy.array(list(itertools.product(*arrays)))

perfplot.show(
    setup=lambda n: 2 * (numpy.arange(n, dtype=float),),
    n_range=[2 ** k for k in range(13)],
    # setup=lambda n: 4 * (numpy.arange(n, dtype=float),),
    # n_range=[2 ** k for k in range(6)],
    kernels=[
        dstack_product,
        cartesian_product,
        cartesian_product_transpose,
        cartesian_product_recursive,
        cartesian_product_itertools,
    ],
    logx=True,
    logy=True,
    xlabel="len(a), len(b)",
    equality_check=None,
) 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-10-08T02:06:48.753

截至 2017 年 10 月，numpy 现在有一个`np.stack`接受轴参数的通用函数。使用它，我们可以使用“dstack and meshgrid”技术获得“广义笛卡尔积”：

```
import numpy as np

def cartesian_product(*arrays):
    ndim = len(arrays)
    return (np.stack(np.meshgrid(*arrays), axis=-1)
              .reshape(-1, ndim))

a = np.array([1,2])
b = np.array([10,20])
cartesian_product(a,b)

# output:
# array([[ 1, 10],
#        [ 2, 10],
#        [ 1, 20],
#        [ 2, 20]]) 
```

注意`axis=-1`参数。这是结果中的最后一个（最里面的）轴。它相当于使用`axis=ndim`.

另一种评论，由于笛卡尔积很快爆发，除非我们出于某种原因*需要*在内存中实现数组，否则如果产品非常大，我们可能希望`itertools`即时使用和使用这些值。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2018-03-23T08:55:11.600

在@senderle 的示范性基础工作的基础上，我提出了两个版本——一个用于 C，一个用于 Fortran 布局——通常更快一些。

*   `cartesian_product_transpose_pp`是 - 与 @senderle`cartesian_product_transpose`完全不同的策略不同 - 一个版本`cartesion_product`使用更有利的转置内存布局 + 一些非常小的优化。
*   `cartesian_product_pp`坚持原来的内存布局。让它快速的原因是它使用连续复制。结果证明，连续副本的速度要快得多，即使只复制一个完整的内存块，即使其中只有一部分包含有效数据，也比只复制有效位更可取。

一些性能图。我为 C 和 Fortran 布局制作了单独的布局，因为这些是 IMO 不同的任务。

以“pp”结尾的名字是我的方法。

1）许多微小的因素（每个2个元素）

[![在此处输入图像描述](../Images/61a3a6855bbe23c2611761b35978f5f7.png)](https://i.stack.imgur.com/iq4b0.png)[![在此处输入图像描述](../Images/05830c4a69db36d690c0f7c283d7ae8b.png)](https://i.stack.imgur.com/IQLXt.png)

2）许多小因素（每个4个元素）

[![在此处输入图像描述](../Images/a5478070879813f7ebd43723bba2fb53.png)](https://i.stack.imgur.com/5aQYY.png)[![在此处输入图像描述](../Images/aebe62c11b1fd7b81c6a78333150e0f5.png)](https://i.stack.imgur.com/swfTv.png)

3）等长的三个因子

[![在此处输入图像描述](../Images/db72c696aeb27098121953db33d99ad8.png)](https://i.stack.imgur.com/hpw8r.png)[![在此处输入图像描述](../Images/703d249ab3b2aa291878e69258267ea8.png)](https://i.stack.imgur.com/wsjo4.png)

4) 两个等长的因子

[![在此处输入图像描述](../Images/4fde1d7f6f5b7486075db1be03d9c74e.png)](https://i.stack.imgur.com/kelwf.png)[![在此处输入图像描述](../Images/37a2bf843cfbac9aaf5f2e39abb64d61.png)](https://i.stack.imgur.com/YbTd0.png)

代码（需要为每个绘图 b/c 单独运行我不知道如何重置；还需要适当地编辑/注释/注释）：

```
import numpy
import numpy as np
from functools import reduce
import itertools
import timeit
import perfplot

def dstack_product(arrays):
    return numpy.dstack(
        numpy.meshgrid(*arrays, indexing='ij')
        ).reshape(-1, len(arrays))

def cartesian_product_transpose_pp(arrays):
    la = len(arrays)
    dtype = numpy.result_type(*arrays)
    arr = numpy.empty((la, *map(len, arrays)), dtype=dtype)
    idx = slice(None), *itertools.repeat(None, la)
    for i, a in enumerate(arrays):
        arr[i, ...] = a[idx[:la-i]]
    return arr.reshape(la, -1).T

def cartesian_product(arrays):
    la = len(arrays)
    dtype = numpy.result_type(*arrays)
    arr = numpy.empty([len(a) for a in arrays] + [la], dtype=dtype)
    for i, a in enumerate(numpy.ix_(*arrays)):
        arr[...,i] = a
    return arr.reshape(-1, la)

def cartesian_product_transpose(arrays):
    broadcastable = numpy.ix_(*arrays)
    broadcasted = numpy.broadcast_arrays(*broadcastable)
    rows, cols = numpy.prod(broadcasted[0].shape), len(broadcasted)
    dtype = numpy.result_type(*arrays)

    out = numpy.empty(rows * cols, dtype=dtype)
    start, end = 0, rows
    for a in broadcasted:
        out[start:end] = a.reshape(-1)
        start, end = end, end + rows
    return out.reshape(cols, rows).T

from itertools import accumulate, repeat, chain

def cartesian_product_pp(arrays, out=None):
    la = len(arrays)
    L = *map(len, arrays), la
    dtype = numpy.result_type(*arrays)
    arr = numpy.empty(L, dtype=dtype)
    arrs = *accumulate(chain((arr,), repeat(0, la-1)), np.ndarray.__getitem__),
    idx = slice(None), *itertools.repeat(None, la-1)
    for i in range(la-1, 0, -1):
        arrs[i][..., i] = arrays[i][idx[:la-i]]
        arrs[i-1][1:] = arrs[i]
    arr[..., 0] = arrays[0][idx]
    return arr.reshape(-1, la)

def cartesian_product_itertools(arrays):
    return numpy.array(list(itertools.product(*arrays)))

# from https://stackoverflow.com/a/1235363/577088
def cartesian_product_recursive(arrays, out=None):
    arrays = [numpy.asarray(x) for x in arrays]
    dtype = arrays[0].dtype

    n = numpy.prod([x.size for x in arrays])
    if out is None:
        out = numpy.zeros([n, len(arrays)], dtype=dtype)

    m = n // arrays[0].size
    out[:, 0] = numpy.repeat(arrays[0], m)
    if arrays[1:]:
        cartesian_product_recursive(arrays[1:], out=out[0:m, 1:])
        for j in range(1, arrays[0].size):
            out[j*m:(j+1)*m, 1:] = out[0:m, 1:]
    return out

### Test code ###
if False:
  perfplot.save('cp_4el_high.png',
    setup=lambda n: n*(numpy.arange(4, dtype=float),),
                n_range=list(range(6, 11)),
    kernels=[
        dstack_product,
        cartesian_product_recursive,
        cartesian_product,
#        cartesian_product_transpose,
        cartesian_product_pp,
#        cartesian_product_transpose_pp,
        ],
    logx=False,
    logy=True,
    xlabel='#factors',
    equality_check=None
    )
else:
  perfplot.save('cp_2f_T.png',
    setup=lambda n: 2*(numpy.arange(n, dtype=float),),
    n_range=[2**k for k in range(5, 11)],
    kernels=[
#        dstack_product,
#        cartesian_product_recursive,
#        cartesian_product,
        cartesian_product_transpose,
#        cartesian_product_pp,
        cartesian_product_transpose_pp,
        ],
    logx=True,
    logy=True,
    xlabel='length of each factor',
    equality_check=None
    ) 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-01-04T21:45:27.173

我使用@kennytm[回答](https://stackoverflow.com/a/11144716/5721839)了一段时间，但是当尝试在 TensorFlow 中做同样的事情时，我发现 TensorFlow 没有等效的`numpy.repeat()`. 经过一些实验，我想我找到了一个更通用的任意点向量的解决方案。

对于 numpy：

```
import numpy as np

def cartesian_product(*args: np.ndarray) -> np.ndarray:
    """
    Produce the cartesian product of arbitrary length vectors.

    Parameters
    ----------
    np.ndarray args
        vector of points of interest in each dimension

    Returns
    -------
    np.ndarray
        the cartesian product of size [m x n] wherein:
            m = prod([len(a) for a in args])
            n = len(args)
    """
    for i, a in enumerate(args):
        assert a.ndim == 1, "arg {:d} is not rank 1".format(i)
    return np.concatenate([np.reshape(xi, [-1, 1]) for xi in np.meshgrid(*args)], axis=1) 
```

对于 TensorFlow：

```
import tensorflow as tf

def cartesian_product(*args: tf.Tensor) -> tf.Tensor:
    """
    Produce the cartesian product of arbitrary length vectors.

    Parameters
    ----------
    tf.Tensor args
        vector of points of interest in each dimension

    Returns
    -------
    tf.Tensor
        the cartesian product of size [m x n] wherein:
            m = prod([len(a) for a in args])
            n = len(args)
    """
    for i, a in enumerate(args):
        tf.assert_rank(a, 1, message="arg {:d} is not rank 1".format(i))
    return tf.concat([tf.reshape(xi, [-1, 1]) for xi in tf.meshgrid(*args)], axis=1) 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-03-26T19:48:19.573

Scikit [-learn](http://scikit-learn.org/stable/)包可以快速实现这一点：

```
from sklearn.utils.extmath import cartesian
product = cartesian((x,y)) 
```

请注意，如果您关心输出的顺序，则此实现的约定与您想要的不同。对于您的确切订购，您可以

```
product = cartesian((y,x))[:, ::-1] 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-01-05T11:38:32.667

更一般地说，如果你有两个 2d numpy 数组 a 和 b，并且你想将 a 的每一行连接到 b 的每一行（行的笛卡尔积，有点像数据库中的连接），你可以使用这个方法：

```
import numpy
def join_2d(a, b):
    assert a.dtype == b.dtype
    a_part = numpy.tile(a, (len(b), 1))
    b_part = numpy.repeat(b, len(a), axis=0)
    return numpy.hstack((a_part, b_part)) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-03-26T21:33:45.353

最快的方法是将生成器表达式与 map 函数结合使用：

```
import numpy
import datetime
a = np.arange(1000)
b = np.arange(200)

start = datetime.datetime.now()

foo = (item for sublist in [list(map(lambda x: (x,i),a)) for i in b] for item in sublist)

print (list(foo))

print ('execution time: {} s'.format((datetime.datetime.now() - start).total_seconds())) 
```

输出（实际上打印了整个结果列表）：

```
[(0, 0), (1, 0), ...,(998, 199), (999, 199)]
execution time: 1.253567 s 
```

或使用双生成器表达式：

```
a = np.arange(1000)
b = np.arange(200)

start = datetime.datetime.now()

foo = ((x,y) for x in a for y in b)

print (list(foo))

print ('execution time: {} s'.format((datetime.datetime.now() - start).total_seconds())) 
```

输出（打印整个列表）：

```
[(0, 0), (1, 0), ...,(998, 199), (999, 199)]
execution time: 1.187415 s 
```

考虑到大部分计算时间都用于打印命令。生成器计算在其他方面非常有效。不打印计算时间为：

```
execution time: 0.079208 s 
```

对于生成器表达式 + 映射函数和：

```
execution time: 0.007093 s 
```

对于双生成器表达式。

如果您真正想要的是计算每个坐标对的实际乘积，最快的方法是将其求解为 numpy 矩阵乘积：

```
a = np.arange(1000)
b = np.arange(200)

start = datetime.datetime.now()

foo = np.dot(np.asmatrix([[i,0] for i in a]), np.asmatrix([[i,0] for i in b]).T)

print (foo)

print ('execution time: {} s'.format((datetime.datetime.now() - start).total_seconds())) 
```

输出：

```
 [[     0      0      0 ...,      0      0      0]
 [     0      1      2 ...,    197    198    199]
 [     0      2      4 ...,    394    396    398]
 ..., 
 [     0    997   1994 ..., 196409 197406 198403]
 [     0    998   1996 ..., 196606 197604 198602]
 [     0    999   1998 ..., 196803 197802 198801]]
execution time: 0.003869 s 
```

并且没有打印（在这种情况下，它并没有节省太多，因为实际上只打印了一小块矩阵）：

```
execution time: 0.003083 s 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-03-29T13:42:57.373

这也可以通过使用 itertools.product 方法轻松完成

```
from itertools import product
import numpy as np

x = np.array([1, 2, 3])
y = np.array([4, 5])
cart_prod = np.array(list(product(*[x, y])),dtype='int32') 
```

结果：array([
[1, 4],
[1, 5],
[2, 4],
[2, 5],
[3, 4],
[3, 5]], dtype=int32)

**执行时间：0.000155 s**

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-22T16:17:07.263

在需要对每一对执行简单操作（例如加法）的特定情况下，您可以引入一个额外的维度并让广播来完成这项工作：

```
>>> a, b = np.array([1,2,3]), np.array([10,20,30])
>>> a[None,:] + b[:,None]
array([[11, 12, 13],
       [21, 22, 23],
       [31, 32, 33]]) 
```

我不确定是否有任何类似的方法可以实际获得这些对。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-12T22:01:05.527

我参加聚会有点晚了，但我遇到了这个问题的一个棘手的变体。假设我想要几个数组的笛卡尔积，但笛卡尔积最终比计算机的内存大得多（但是，使用该积完成的计算速度很快，或者至少是可并行的）。

显而易见的解决方案是将这个笛卡尔积分成块，并一个接一个地处理这些块（以一种“流式”方式）。您可以使用 轻松做到这一点`itertools.product`，但速度非常慢。此外，这里提出的解决方案（尽可能快）都没有给我们这种可能性。我提出的解决方案使用 Numba，并且比 `cartesian_product` 这里提到的“规范”稍快。这很长，因为我试图在任何地方优化它。

```
import numba as nb
import numpy as np
from typing import List

@nb.njit(nb.types.Tuple((nb.int32[:, :],
                         nb.int32[:]))(nb.int32[:],
                                       nb.int32[:],
                                       nb.int64, nb.int64))
def cproduct(sizes: np.ndarray, current_tuple: np.ndarray, start_idx: int, end_idx: int):
    """Generates ids tuples from start_id to end_id"""
    assert len(sizes) >= 2
    assert start_idx < end_idx

    tuples = np.zeros((end_idx - start_idx, len(sizes)), dtype=np.int32)
    tuple_idx = 0
    # stores the current combination
    current_tuple = current_tuple.copy()
    while tuple_idx < end_idx - start_idx:
        tuples[tuple_idx] = current_tuple
        current_tuple[0] += 1
        # using a condition here instead of including this in the inner loop
        # to gain a bit of speed: this is going to be tested each iteration,
        # and starting a loop to have it end right away is a bit silly
        if current_tuple[0] == sizes[0]:
            # the reset to 0 and subsequent increment amount to carrying
            # the number to the higher "power"
            current_tuple[0] = 0
            current_tuple[1] += 1
            for i in range(1, len(sizes) - 1):
                if current_tuple[i] == sizes[i]:
                    # same as before, but in a loop, since this is going
                    # to get called less often
                    current_tuple[i + 1] += 1
                    current_tuple[i] = 0
                else:
                    break
        tuple_idx += 1
    return tuples, current_tuple

def chunked_cartesian_product_ids(sizes: List[int], chunk_size: int):
    """Just generates chunks of the cartesian product of the ids of each
    input arrays (thus, we just need their sizes here, not the actual arrays)"""
    prod = np.prod(sizes)

    # putting the largest number at the front to more efficiently make use
    # of the cproduct numba function
    sizes = np.array(sizes, dtype=np.int32)
    sorted_idx = np.argsort(sizes)[::-1]
    sizes = sizes[sorted_idx]
    if chunk_size > prod:
        chunk_bounds = (np.array([0, prod])).astype(np.int64)
    else:
        num_chunks = np.maximum(np.ceil(prod / chunk_size), 2).astype(np.int32)
        chunk_bounds = (np.arange(num_chunks + 1) * chunk_size).astype(np.int64)
        chunk_bounds[-1] = prod
    current_tuple = np.zeros(len(sizes), dtype=np.int32)
    for start_idx, end_idx in zip(chunk_bounds[:-1], chunk_bounds[1:]):
        tuples, current_tuple = cproduct(sizes, current_tuple, start_idx, end_idx)
        # re-arrange columns to match the original order of the sizes list
        # before yielding
        yield tuples[:, np.argsort(sorted_idx)]

def chunked_cartesian_product(*arrays, chunk_size=2 ** 25):
    """Returns chunks of the full cartesian product, with arrays of shape
    (chunk_size, n_arrays). The last chunk will obviously have the size of the
    remainder"""
    array_lengths = [len(array) for array in arrays]
    for array_ids_chunk in chunked_cartesian_product_ids(array_lengths, chunk_size):
        slices_lists = [arrays[i][array_ids_chunk[:, i]] for i in range(len(arrays))]
        yield np.vstack(slices_lists).swapaxes(0,1)

def cartesian_product(*arrays):
    """Actual cartesian product, not chunked, still fast"""
    total_prod = np.prod([len(array) for array in arrays])
    return next(chunked_cartesian_product(*arrays, total_prod))

a = np.arange(0, 3)
b = np.arange(8, 10)
c = np.arange(13, 16)
for cartesian_tuples in chunked_cartesian_product(*[a, b, c], chunk_size=5):
    print(cartesian_tuples) 
```

这将以 5 个 3-uples 的块输出我们的笛卡尔积：

```
[[ 0  8 13]
 [ 0  8 14]
 [ 0  8 15]
 [ 1  8 13]
 [ 1  8 14]]
[[ 1  8 15]
 [ 2  8 13]
 [ 2  8 14]
 [ 2  8 15]
 [ 0  9 13]]
[[ 0  9 14]
 [ 0  9 15]
 [ 1  9 13]
 [ 1  9 14]
 [ 1  9 15]]
[[ 2  9 13]
 [ 2  9 14]
 [ 2  9 15]] 
```

如果您愿意理解这里正在做什么，该`njitted`函数背后的直觉是在一个奇怪的数字基础中枚举每个“数字”，其元素将由输入数组的大小组成（而不是常规中的相同数字）二进制、十进制或十六进制基数）。

显然，这种解决方案对于大型产品来说很有趣。对于小型的，开销可能有点贵。

注意：由于 numba 仍在大量开发中，我正在使用 numba 0.50 和 python 3.6 来运行它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-19T15:19:22.360

还有一个：

```
>>>x1, y1 = np.meshgrid(x, y)
>>>np.c_[x1.ravel(), y1.ravel()]
array([[1, 4],
       [2, 4],
       [3, 4],
       [1, 5],
       [2, 5],
       [3, 5]]) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-02T03:52:29.680

受[阿什坎回答的](https://stackoverflow.com/a/68850503/12350727)启发，您也可以尝试以下方法。

```
>>> x, y = np.meshgrid(x, y)
>>> np.concatenate([x.flatten().reshape(-1,1), y.flatten().reshape(-1,1)], axis=1) 
```

这将为您提供所需的笛卡尔积！*

# wordpress - 使用 htaccess 将 wordpress 页面重定向到 facebook 页面

> ID：11144514
> 
> 赞同：0
> 
> 时间：2012-06-21T18:30:38.170
> 
> 标签：wordpress, .htaccess, redirect

嗨，我需要将一个页面从我的 wordpress 网站重定向到我的 facebook 页面。有谁知道我如何用 htaccess 做到这一点？任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:22:49.287

关于什么：

```
Redirect /pagename http://facebook.com/My-FB-Page 
```

# r - 将向量存储为数据框条目？

> ID：11144519
> 
> 赞同：6
> 
> 时间：2012-06-21T18:30:56.530
> 
> 标签：r

我对 R 很陌生，想知道是否有一种方法可以将向量存储在数据帧中，这样数据帧的每个条目都是一个向量。

我想将条目分配给一个向量，并且以后可以更改它：

```
df[2,]$Value <- c(1,2,0)
df[3,]$Value <- c(0,0,1)
df[3,]$Value <- df[3,]$Value + c(2,4,4) 
```

但只能通过替换数据框中的 3 个不同条目来完成这项工作。有谁知道这是否可能？

```
df: 
      V1    V2     V3 
1 c(1,2) c(2,3) c(0,0) 
2 c(1,1) c(0,0) c(2,2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:41:29.670

您不能拥有 3D 数据框。您可以通过多种方式实现这一点，但从概念上解释最简单的方法可能是在列表中包含一个列表：

```
> entries <- list(V1=list(c(1,2), c(1,1)), V2=list(c(2,3), c(0,0)), V3=list(c(0,0),c(2,2)))
> entries
$V1
$V1[[1]]
[1] 1 2

$V1[[2]]
[1] 1 1

$V2
$V2[[1]]
[1] 2 3

$V2[[2]]
[1] 0 0

$V3
$V3[[1]]
[1] 0 0

$V3[[2]]
[1] 2 2 
```

现在假设您想更改 V1 的第二个条目，您只需这样做

> 条目$V1[[2]] <- c(2,2)

或者

> 条目[[1]][[2]] <- c(2,2)

# c# - 当可能为空字符串值时，将字符串数组值转换为 int

> ID：11144520
> 
> 赞同：1
> 
> 时间：2012-06-21T18:30:59.777
> 
> 标签：c#, null, int, arrays

我无法将字符串数组中的值转换为 int，因为该值可能为 null。

```
StreamReader reader = File.OpenText(filePath);
string currentLine = reader.ReadLine();
string[] splitLine = currentLine.Split(new char[] { '|' });
object.intValue = Convert.ToInt32(splitLine[10]); 
```

这很好用，除非 splitLine[10] 为空。
引发错误：`System.FormatException：输入字符串的格式不正确。

有人可以就处理这个问题的最佳方法向我提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:32:54.343

不要使用转换，最好使用 `int.TryParse()`

例如

```
int val = 0;
if (int.TryParse(splitLine[10], out val))
   obj.intValue = val; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:34:13.360

您可以使用 TryParse 方法：

```
int value;
if(Int32.TryParse(splitLine[10], out value))
{
    object.intValue = value;
} 
else 
{
    // Do something with incorrect parse value
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T18:32:22.203

```
if (splitLine[10] != null)
    object.intValue = Convert.ToInt32(splitLine[10]);
else
    //do something else, if you want 
```

您可能还想`splitLine.Length > 10`在获取`splitLine[10]`.

如果您正在读取类似 CSV 文件的内容，并且它可能会有些复杂，例如读取多个值，那么使用连接字符串或其他库排序的东西来读取您的文件可能会有意义. [从http://www.connectionstrings.com/textfile](http://www.connectionstrings.com/textfile)获取示例连接字符串，`Delimited(|)`用于指定分隔符，然后像`using (var conn = new OleDbConnection(connectionString))`. 请参阅[http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom](http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom)中有关使用 Jet 引擎的部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T18:35:21.740

如果您正在寻找最少的代码编写，请尝试

```
object.intValue = Convert.ToInt32(splitLine[10] ?? "0"); 
```

如果要保留 null in 的含义`splitLine[10]`，则需要将类型更改为`intValue`type `Nullable<Int32>`，然后可以将 null 分配给它。这将代表更多的工作，但这是将空值与整数等值类型一起使用的最佳方法，无论您如何获取它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T18:38:38.730

我会去

```
object.intValue = int.Parse(splitLine[10] ?? "<int value you want>"); 
```

# foursquare - Foursquare API 上的照片错误

> ID：11144521
> 
> 赞同：0
> 
> 时间：2012-06-21T18:31:10.367
> 
> 标签：foursquare

2 或 3 周前，我有一个应用程序，它使用了一个已连接的foursquare 用户的照片。今天又测试了一下，好像API变了。我使用端点

[https://api.foursquare.com/v2/users/](https://api.foursquare.com/v2/users/)

现在，json 中的 photo 属性包含到 json 属性：前缀和后缀。这是我的问题：当我尝试连接这些字符串时，出现“内部服务器错误”。你可以在这里试试： [https ://irs0.4sqi.net/img/user/TLBKJFDZJ504Y5DO.jpg](https://irs0.4sqi.net/img/user/TLBKJFDZJ504Y5DO.jpg)

这是一个错误，还是我做错了？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-02T11:47:48.110

为了快速参考，在两者之间添加大小：

```
prefix + SIZE + suffix 
```

例如。[https://irs0.4sqi.net/img/user/100x100/TLBKJFDZJ504Y5DO.jpg](https://irs0.4sqi.net/img/user/100x100/TLBKJFDZJ504Y5DO.jpg)

有关尺寸，请参阅[https://developer.foursquare.com/docs/responses/photo](https://developer.foursquare.com/docs/responses/photo)

# ios5 - 如何使用 setRightBarButtonItem 在导航栏上添加自定义右对齐图像？

> ID：11144526
> 
> 赞同：3
> 
> 时间：2012-06-21T18:31:26.130
> 
> 标签：ios5, uinavigationbar, uibarbuttonitem, uinavigationitem, appearance

我在针对 iOS 5.1 的 xcode 4.3 中，我试图在我的应用程序中所有导航栏的右侧显示一个徽标。

首先，我在每个视图控制器中使用以下代码使其工作

```
UIButton* fakeButton = (UIButton *) [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"driftlogo_header.png"]];
UIBarButtonItem *fakeButtonItem = [[UIBarButtonItem alloc] initWithCustomView:fakeButton];
self.navigationItem.rightBarButtonItem = fakeButtonItem; 
```

问题是我必须在每个视图控制器中都这样做，但我的一些视图没有分类。我想减少代码并想使用 iOS 5 外观属性从应用程序委托全局设置它。我试过了

```
UIButton* fakeButton = (UIButton *) [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"driftlogo_header.png"]];
UIBarButtonItem *fakeButtonItem = [[UIBarButtonItem alloc] initWithCustomView:fakeButton];
[[UIBarButtonItem appearance] setRightBarButtonItem:fakeButtonItem animated:YES]; 
```

不起作用，错误无法识别的选择器发送到实例。同样的错误

```
UIButton* fakeButton = (UIButton *) [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"driftlogo_header.png"]];
UIBarButtonItem *fakeButtonItem = [[UIBarButtonItem alloc] initWithCustomView:fakeButton];
[[UINavigationBar appearance] setRightBarButtonItem:fakeButtonItem]; 
```

从应用程序委托设置它的正确方法是什么？

提前致谢。

# c++ - 如何通过串口发送请求从目录中检索数据？

> ID：11144529
> 
> 赞同：0
> 
> 时间：2012-06-21T18:31:37.030
> 
> 标签：c++, c, serial-port

我有一个具有串行端口和以太网的控制器。我想通过控制器的串行或以太网端口从事件目录中检索一个事件以及与该事件相关的数据。我确实有要检索的指定事件的数据包格式（请求数据包数据）。谁能告诉我如何通过串口发送请求来检索数据？我是初学者，对编程并不那么精通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:10:05.167

您需要在嵌入式平台上运行某种程序，监听串行端口并响应请求。这种程序通常被称为“daemon”（读音与“demon”相同；就像“Caesar”与“sea star”押韵一样）。

如果你已经有一个守护进程，你需要弄清楚它使用什么格式。由于我不知道您可能拥有什么，我什至无法猜测。

如果您要编写自己的守护程序，则需要选择某种协议。我个人喜欢串行协议的 JSON 格式；如果没有更好的库可用，您可以仅使用 C 库中提取数据，这很简单`sscanf()`，当然只需使用`sprintf()`.

[http://json.org/](http://json.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:30:40.683

您想要的是**[POSIX 操作系统的串行编程指南](http://www.easysw.com/~mike/serial/serial.html)**。如果您由于某种原因绑定到 Windows，您可以通过安装 Cygwin 获得 POSIX。期望熟悉手册页`termios`，`fcntl`因为您首先必须设置串行端口参数才能与您的设备一起使用，尽管它们可能在某种程度上是标准的 8-N-1。然后是读取和写入字节到端口的文件描述符的问题。您更有可能使用低级`open()`, `close()`, `read()`, 和`write()`，它们低于`stdio`( `printf`, `fopen`, `stdout`) 的级别，作为新程序员，您更有可能习惯使用这些级别。

现在的电脑经常没有 RS232 串口，所以如果你需要一个，你可以找到一个便宜的 USB 适配器。请注意，根据我的经验，USB 适配器不一定实现某些辅助信号（RTS、CTS 等）。

还可以根据您的特定需求和情况查看库。

您应该指定控制器以获得更有用的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:21:27.207

您的控制器应支持任何数据交换协议。您可以在文档中找到此信息。可能是，它支持 MODBUS 或 MODBUS TCP。在这种情况下，您可以使用任何与 modbus 兼容的软件。

# javascript - javascript - 解析 html 注释中的键值 json

> ID：11144530
> 
> 赞同：1
> 
> 时间：2012-06-21T18:31:37.933
> 
> 标签：javascript, jquery, html, regex

我有一个带有单行 javascript 注释的 html 页面，如下所示：

```
// {"key1":"value1"}, {"key2":"value2"}, {"key3":"value3"} 
<b> Sample Text </b> 
```

我想检索评论中的所有键值对并将它们放在 javascript 映射中。我将如何使用 js/jquery 解析它？我对正则表达式很糟糕，所以任何帮助都将不胜感激。如果有帮助，注释将始终只是 html 中的第一行。

**编辑：**

如果它使工作更容易，我也可以与 -

```
/* {"key1":"value1"}, {"key2":"value2"}, {"key3":"value3"} */ 
<b> Sample Text </b> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:53:18.713

不要将 javascript 写入 HTML 的顶部，而是将其写入脚本元素中，如下所示：

```
<!-- HTML -->
<head>
<script type="text/javascript">
var x = { "key1": "value1", "key2": "value2", "key3": "value3" } ;
</script>
</head>
<!-- REST OF HTML --> 
```

您应该可以像任何其他 javascript 对象一样使用您的数据访问 x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:35:45.443

您可以使用 jQuery 函数 parseJSON

像：

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

然后您可以将该值写入您的html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:36:15.410

`{"(\w+?)":"(\w+?)"}`

这将抓住你的关键和价值。键在第 1 组，值在第 2 组。

对于 Javascript，raynjamin 指出您需要`/g`修饰符来匹配键值对的*所有实例。*

[在这里玩正则表达式](http://regexr.com?31atq)。

# unix - 's' 字符在 VIM 中突出显示

> ID：11144531
> 
> 赞同：0
> 
> 时间：2012-06-21T18:31:40.433
> 
> 标签：unix, vim

我正在尝试一些命令来显示和替换空格字符，但现在每次打开 VIM 时，它都会突出显示文件中的所有 's' 字符。如何禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:45:24.473

```
:set nohls 
```

将关闭搜索突出显示。搜索模式保持不变，并且下一个搜索模式不会被突出显示（除非您`:set hls`重新打开它）。

```
:let @/ = '' 
```

将清空搜索模式，因此不会突出显示任何内容。另一个搜索将设置搜索模式并按预期突出显示。

而且，正如另一个答案所说，

```
:noh 
```

暂时关闭`hls`- 至少在下一次搜索之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:07:54.327

这可能是残留搜索突出显示。将其关闭，直到使用 进行下一次搜索`:noh`。

# php - Wordpress 选项页面多个权限

> ID：11144532
> 
> 赞同：0
> 
> 时间：2012-06-21T18:31:58.343
> 
> 标签：php, wordpress

您好，我有一个 word press 选项页面，我想让所有编辑或以上的用户都能看到它。我的代码如下：

```
add_menu_page('example', 'example', 'editor', __FILE__, array('example', 'example')); 
```

我尝试过多次粘贴不同的用户角色，甚至用逗号分隔每个用户角色，但这不起作用。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:34:25.267

相反，使用

```
if(current_user_can('editor')){
    add_menu_page(..., 'editor', ....);
}elseif(current_user_can('someotherrole')){
    add_menu_page(..., 'someotherrole', ....);
} 
```

# python - sqlalchemy - 使用 2 个条件连接子表

> ID：11144536
> 
> 赞同：29
> 
> 时间：2012-06-21T18:32:12.613
> 
> 标签：python, sqlalchemy

连接 2 个表时如何在 ON 子句中添加 2 个条件。我在层次结构中有 3 个三个表，每个表都带有已删除的标志。我必须在一个查询中加入所有这些表，并根据已删除标志进行过滤。目前，条件被添加到查询的 where 子句中，它不会过滤已删除的记录。它需要添加到 ON 子句中。请建议。

我目前的查询如下：

```
result = session.query(Host).filter(and_(Host.id.in_(ids), Host.deleted == False)).\
    join(Switch).filter(Switch.deleted == False).\
    join(Port).filter(Port.deleted == False).\
    options(joinedload('switches')).\
    options(joinedload('ports')).\
    all() 
```

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-27T23:55:08.993

尝试 contains_eager 而不是joinedload。可能发生的情况是您有 4 个连接，您使用 join 定义的两个连接，然后是 options(joinedload(...)) 中的两个连接

修改你的代码，应该给出这个：

```
from sqlalchemy import and_

result = (session.query(Host).filter(and_(Host.id.in_(ids), Host.deleted == False)).
    join(Switch, and_(Switch.host_id==Host.id, Switch.deleted == False)).
    join(Port, and_(Port.switch_id==Switch.id, Port.deleted == False)).
    options(contains_eager('switches')).
    options(contains_eager('ports')).
    all()
) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-10-12T19:47:13.603

[and_() 连词也可以使用 Python & 运算符](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.and_)（但请注意，复合表达式需要用括号括起来才能使用 Python 运算符优先级行为）：还有[| 对于 or_()](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.or_)和[~ 对于 not_()](http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.not_)

因此，使用 & 运算符，您的代码将如下所示：

```
result = session.query(Host).filter(Host.id.in_(ids) & (Host.deleted == False)).
    join(Switch, (Switch.host_id==Host.id) & (Switch.deleted == False)).
    join(Port, (Port.switch_id==Switch.id) & (Port.deleted == False)).
    options(contains_eager('switches')).
    options(contains_eager('ports')).
    all()
) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-22T10:35:21.287

您可以使用参数在调用中`ON`明确指定子句。然后您的查询应如下所示（*未经测试*）：[`Query.join`](http://docs.sqlalchemy.org/en/latest/orm/query.html?highlight=join#sqlalchemy.orm.query.Query.join)`onclause`

 *```
from sqlalchemy import and_

result = (session.query(Host).filter(and_(Host.id.in_(ids), Host.deleted == False)).
    join(Switch, and_(Switch.host_id==Host.id, Switch.deleted == False)).
    join(Port, and_(Port.switch_id==Switch.id, Port.deleted == False)).
    options(joinedload('switches')).
    options(joinedload('ports')).
    all()
) 
```*

# javascript - 运行无头 JsTestDriver？

> ID：11144537
> 
> 赞同：4
> 
> 时间：2012-06-21T18:32:13.817
> 
> 标签：javascript, unit-testing, js-test-driver, headless-browser

有没有办法在无头状态下使用 jsTestDriver，它加载浏览器但无头（你看不到浏览器）或加载它们最小化？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T11:38:14.663

您可以将*PhantomJS*与*JSTestDriver一起使用*

首先在*命令提示符下启动**JStestdriver*：

 *```
java -jar JsTestDriver-1.3.5.jar  --port 9876 --captureConsole --runnerMode DEBUG 
```

[从此处](https://github.com/larrymyers/js-test-driver-phantomjs/blob/master/phantomjs-jstd.js)下载并使用用于捕获*Phantom 浏览器的**javascript*。

 *```
phantomjs.exe phantomjs-jstd.js 
```

输出将如下所示：

```
 Wed Oct 31 2012 12:07:26 GMT+0530 (India Standard Time): Attempting (1) to load:

 http://localhost:9876/capture 
```

运行你的测试：

```
java -jar d:\Coding\lib\JsTestDriver-1.3.5.jar --tests all  --runnerMode DEBUG 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T18:39:27.073

没有办法配置 JsTestDriver 打开浏览器最小化。而且您必须打开浏览器，因为它们运行 JavaScript 代码。

您可以尝试创建一个虚拟监视器并在那里打开浏览器。

在 linux 下，您可以为此使用 xvfb，例如

```
xvfb-run java -jar JsTestDriver-1.3.3d.jar --tests all --port 4224 --browser firefox chromium-browser --testOutput jsTests 
```

应该在虚拟窗口中打开浏览器。**

# oracle - 在 Oracle 中为结果集生成插入语句

> ID：11144540
> 
> 赞同：1
> 
> 时间：2012-06-21T18:32:22.040
> 
> 标签：oracle, oracle11g, resultset

是否有用于为结果集生成插入语句的 oracle 工具？如果有任何不同，我正在使用 Oracle SQL 开发人员。

例如，对于一个表的查询`select * from t1 where this = 'that'`

```
Col1    Col2    Col3
a1      a2      a3
b1      b2      b3 
```

我想将结果集导出到

```
INSERT INTO T1 (Col1, Col2, Col3) values ('a1', 'a2', 'a3');
INSERT INTO T1 (Col1, Col2, Col3) values ('b1', 'b2', 'b3'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:33:22.340

在 SQL Developer 中运行您的查询。

在结果网格中，右键单击。选择导出...

将出现一个弹出对话框，询问如何导出结果。默认为插入。您可以选择要保存到或复制到剪贴板或各种其他选项的文件。

这是在 SQL Developer 3.0.4 上。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-22T02:50:49.780

通过导出，您可以执行以下操作：

```
exp userid=user/passwd tables=t1 query="""where this = 'that'""" 
```

# javascript - 如何在 javascript 中覆盖 Firefox 键绑定？

> ID：11144544
> 
> 赞同：1
> 
> 时间：2012-06-21T18:32:35.480
> 
> 标签：javascript, firefox, key-bindings

我正在编写一个带有一些自定义键绑定的 HTML5 应用程序。我想使用 F3 作为键绑定在我的应用程序中做一些工作。但是在 Firefox 中，F3 会打开搜索框。有谁知道如何从 javascript 覆盖（或删除）默认键绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:27:13.610

在我看来，F1-F5 键的绑定无法替换。我开始使用 F8，现在一切正常。如果有人对代码感兴趣，我可以发布一个片段（只需在下面发表评论）。

# r - 如何合并和维护一个输入的行顺序？

> ID：11144551
> 
> 赞同：7
> 
> 时间：2012-06-21T18:32:55.767
> 
> 标签：r, sorting, merge, dataframe

我有一个将瓶号与其体积相关联的数据框（`key`在下面的示例中）。我想编写一个函数，它将获取任何瓶号列表 ( `samp`) 并返回瓶子体积列表，**同时保持瓶号顺序`samp`**。

下面的函数正确匹配瓶号和体积，但按瓶号升序对输出进行排序。

我怎样才能保持`samp`with的顺序`merge`？设置`sort=FALSE`导致“未指定的顺序”。

**例子**

```
samp <- c(9, 1, 4, 1)
num <- 1:10
vol <- sample(50:100, 10)
key <- data.frame(num, vol)
matchFun <- function(samp, key)
  {
    out <- merge(as.data.frame(samp), key, by.x="samp", by.y="num")
    return(out$vol)
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:25:09.963

您可以使用结果进行此操作`match`并对其进行子集`key`化：

```
bottles <- key[match(samp, key$num),]
# rownames are odd because they must be unique, clean them up
rownames(bottles) <- seq(NROW(bottles)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T12:51:40.520

`join`包装中`plyr`非常适合这个...

```
samp <- c(9, 1, 4, 1)
num <- 1:10
vol <- sample(50:100, 10)
key <- data.frame(num, vol)
samp<-as.data.frame(samp)
names(samp)<-"num"
library("plyr")
join(key,samp,type="right") 
```

# objective-c - RestKit 无法将 JSON 请求中格式为字符串的日期保存到我的本地数据库

> ID：11144554
> 
> 赞同：0
> 
> 时间：2012-06-21T18:33:02.817
> 
> 标签：objective-c, ios, restkit

我正在使用 RestKit 将 JSON 同步到本地数据库，并且在保存日期时遇到了一些问题，我不断收到`Category is not key value coding-compliant for the key "createdAt".`从远程 Web 服务获得的 JSON 是一个字符串，如下所示：

```
"created_at":"2012-06-20T13:29:54Z" 
```

在我的本地`xdatamodeld`文件中，我尝试将`created_at`属性设置为我尝试过 NSSTring 和 NSdate 作为数据类型的地方。我有一个带有 created_at @property: 的实体的本地模型文件`@property (nonatomic, retain) NSDate *createdAt;`。我也在这里尝试过 NSString 和 NSDate 。我也尝试为 . 创建一个日期格式化程序`RKManagedObjectMapping`，但它也没有帮助。像这样：

```
NSDateFormatter* dateFormatter = [NSDateFormatter new];
[dateFormatter  setDateFormat:@"yyyy-MM-dd"];

categoryMapping.dateFormatters = [NSArray arrayWithObject: dateFormatter]; 
```

我的映射如下所示：

```
[categoryMapping mapKeyPath:@"categories.created_at" toAttribute:@"createdAt"]; 
```

关于我做错了什么的任何想法？

** 更新 **

我怀疑 Z 导致了错误。在映射请求之前，我怎么能把它从请求中去掉？

** 更新 #2 **

我现在也尝试添加一个新的 addDefaultDateFormatter，但这并没有奏效。像这样（在我创建自己的映射之前）：

```
// JSON date format: 2012-06-20T13:29:54Z 
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"]; 

[RKObjectMapping addDefaultDateFormatterForString:@"yyyy-MM-dd'T'HH:mm:ssZ" inTimeZone:nil];
[RKObjectMapping addDefaultDateFormatter:dateFormatter]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T06:44:40.227

两件事情。

1）您报告的错误与日期格式无关，它只是表示该实体没有名为 createdAt 的属性/属性。检查您的地图是否映射到正确的对象，并且您的对象实际上具有正确的属性。

2）您的日期格式化程序错误。它应该具有以下格式：

```
yyyy-MM-dd'T'HH:mm:ss'Z' 
```

但这已经是 RestKit 的默认日期格式化程序之一，因此您不需要指定它。顺便说一下，这是 ISO8601 格式（即：标准日期）。

# php - 是否可以在单引号字符串中插入变量？

> ID：11144555
> 
> 赞同：1
> 
> 时间：2012-06-21T18:33:03.090
> 
> 标签：php

```
<?php $header_string = '<a href="get_bloginfo('url')">Holiday</a>'; ?> 
```

如何`get_bloginfo('url')`在上面的单引号字符串中正确插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:33:44.420

```
<?php $header_string = '<a href="' . get_bloginfo('url') . '">Holiday</a>'; ?> 
```

注意点 ( `.`) 的使用，它用于[连接字符串](http://php.net/manual/en/language.operators.string.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:33:57.423

使用串联

```
<?php $header_string = '<a href="'.get_bloginfo('url').'">Holiday</a>'; ?> 
```

# box-api - 政策 API 支持

> ID：11144561
> 
> 赞同：0
> 
> 时间：2012-06-21T18:33:17.027
> 
> 标签：box-api

是否有任何用于对任何活动应用策略的 box-api？例如，每个用户的协作/共享限制，或每个用户或组织级别的文件类型上传限制。

我们有一个企业帐户，我们希望启用此类策略。作为管理员，我想知道哪些 API 可供我使用。

提前致谢-Praveen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T21:20:02.043

此类功能目前只能通过管理控制台 Web UI 使用，还不能通过 API 使用。

# jquery - jQuery - 获取 2 个标签之间的内容并将其包装在新元素中

> ID：11144563
> 
> 赞同：2
> 
> 时间：2012-06-21T18:33:23.413
> 
> 标签：jquery

我有一个问题，我只是不知道如何解决这个（相对）简单的功能。我想要实现的是以下。我的客户正在使用 CMS，它给了我这个输出。

```
<div class="foldOutEnabled">

    <h2>Title 01</h2>

        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tortor ligula, pulvinar eget vestibulum quis, lobortis et quam.</p>

        <h3>subtitle 01</h3>
        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tortor ligula, pulvinar eget vestibulum quis, lobortis et quam.</p>

    <h2>Title 02</h2>

        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tortor ligula, pulvinar eget vestibulum quis, lobortis et quam.</p>

        <h3>subtitle 02</h3>
        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tortor ligula, pulvinar eget vestibulum quis, lobortis et quam.</p>

</div> 
```

我想要做的是在'h2'标签之间获取所有HTML并将其包装在另一个div中（这样jQUery可以用它制作手风琴菜单）。为此，我需要输出变成这个，

```
<div class="foldOutItem">
    <div class="foldOutItemTitle">
        <h2>
            <a href="#"><img class="foldoutArrow" width="17" height="20" alt="" src="../images/footer-arrow.png">Title 01</a>
        </h2>
    </div>
    <div class="foldOutItemContent">

        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tortor ligula, pulvinar eget vestibulum quis, lobortis et quam.</p>

        <h3>subtitle 01</h3>
        <p>1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tortor ligula, pulvinar eget vestibulum quis, lobortis et quam.</p>

    </div>
</div>

etc... 
```

在尝试了许多不同的解决方案和方法之后，我所取得的成果如下，

```
if ($('.foldOutEnabled').length) {

    var newHtml = '<div class="foldOutTitle"><span><a id="foldOutAll" href="#">Alles uitklappen</a></span></div>';

    $('.foldOutEnabled h2, .foldOutEnabled h3, .foldOutEnabled table, .foldOutEnabled p, .foldOutEnabled span').each(function(i) {

        if (this.nodeName == 'H2')
        {
            if (i != 0) { newHtml += '</div></div>'; }
            newHtml += '<div class="foldOutItem"><div class="foldOutItemTitle"><h2><a href="#"><img src="../images/footer-arrow.png" alt="" width="17" height="20" class="foldoutArrow" />' + $(this).html() + '</a></h2></div><div class="foldOutItemContent">';
        } else {
            newHtml += $(this).html();
        }

    });

    newHtml += '</div></div>';
    $('.foldOutEnabled').html(newHtml);
} 
```

在我看来，这可以改进，但它可以工作，除了 .html() 剥离所有 html 标签。所以所有的“p”和“h3”以及内容包含的更多标签都消失了。

现在我的问题是，我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:42:30.540

试试这个：

## *[jsFiddle 演示](http://jsbin.com/oxelej/2/edit#javascript,html,live)*

在演示中，我为新类着色以帮助可视化更改。

```
$('.foldOutEnabled h2').each(function(){
  $(this).nextUntil('h2').andSelf().wrapAll('<div class="foldOutItem" />');
  $(this).nextAll().wrapAll('<div class="foldOutItemContent" />')
    .end().wrap('<div class="foldOutItemTitle" />');
}); 
```

[http://api.jquery.com/each/](http://api.jquery.com/each/)
[http://api.jquery.com/nextuntil/](http://api.jquery.com/nextuntil/)
[http://api.jquery.com/andself/](http://api.jquery.com/andself/)
[http://api.jquery.com/wrapall/](http://api.jquery.com/wrapall/)
[http: //api.jquery.com/nextall/](http://api.jquery.com/nextall/)
[http://api.jquery.com/end/](http://api.jquery.com/end/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-14T13:45:33.957

使用 JavaScript，您可以这样做。

```
let summ = 'your content here';

summ.split('/<h2>.*?<\/h2>/g');

result = summ.match(/<h2>(.*?)<\/h2>/g).map(function(val){
   return val;
});

let data = [];
let preData = '';
for(var i =0; i < result.length; i++) {
    const position = summ.indexOf(result[i]);
    if (i === 0) {
        if (position === 0) {
            preData = '';
        } else {
            preData = summ.substr(0, position);
        }
    }
    // Logic to find content and headers
    const obj = {content: '', title: ''};
    obj.title = result[i];
    if (i === result.length - 1) {
        obj.content = summ.substr(position + result[i].length, summ.length);
    } else {
        obj.content = summ.substr(position + result[i].length, summ.indexOf(result[i+1]));
    }
    data.push(obj);
} 
```

标题将是 h2 标签，内容将包含两个 h2 标签之间存在的所有标签。

您现在可以遍历数组以创建您选择的 html 结构。

# php - PDO 连接未按预期工作

> ID：11144564
> 
> 赞同：1
> 
> 时间：2012-06-21T18:33:25.920
> 
> 标签：php, pdo

我认为这主要是因为我是 PHP OOP 的新手，但我有一个快速的问题，我似乎无法找到答案。由于我对几种方法使用相同的连接信息，所以我厌倦了取出信息并将它们作为私有和静态放入属性变量中。但是，当尝试建立 PDO 连接时，这不起作用：

```
class MyClass {
    private static $DSN = "mysql:host=localhost;dbname=testdb";
    private static $USR = "user";
    private static $PWD = "password";

    public static function connection() {
        $pdo = new PDO($DSN, $USR, $PWD);
        //more code
    }
} 
```

然而，当我手动输入信息时，它工作正常：

```
class MyClass {
    public static function connection() {
        $pdo = new PDO("mysql:host=localhost;dbname=testdb", "user", "password");
        //more code
    }
} 
```

那么为什么不使用一组属性呢？我花了几个小时试图让它工作，但它没有，只是发现这是问题所在。我可以手动连接，但我想知道为什么第一个解决方案不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:36:00.203

您需要`self`关键字（以及范围解析运算符`::`）来访问这些私有静态属性。

```
$pdo = new PDO( self::$DSN, self::$USR, self::$PWD); 
```

否则，您没有引用正确的变量。

有关静态关键字的更多信息，请参阅[手册](http://php.net/manual/en/language.oop5.static.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:36:05.197

您错误地调用了您的价值观。

```
$pdo = new PDO( self::$DSN, self::$USR, self::$PWD); 
```

或者

```
$pdo = new PDO( MyClass::$DSN, MyClass::$USR, MyClass::$PWD); 
```

# ios - iOS 如何使用 ASyncSocket 进行 SSL 握手？

> ID：11144565
> 
> 赞同：1
> 
> 时间：2012-06-21T18:33:32.120
> 
> 标签：ios, ssl, asyncsocket, handshake

我已经使用 ASyncSocket 成功地将我的服务器与套接字连接连接起来。现在我正在尝试进行 SSL 握手以将服务器与 SSL 连接。知道如何进行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:02:30.147

AsyncSocket 的 ConnectTest 示例展示了如何实现安全设置。

```
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {
    NSMutableDictionary *settings = [NSMutableDictionary dictionaryWithCapacity:3];
     [settings setObject:@"www.paypal.com" forKey:(NSString *)kCFStreamSSLPeerName];
    [sock startTLS:settings];

// To connect to a test server, with a self-signed certificate, use settings similar to this:

//  // Allow expired certificates
    //  [settings setObject:[NSNumber numberWithBool:YES]
    //               forKey:(NSString *)kCFStreamSSLAllowsExpiredCertificates];
    //  
    //  // Allow self-signed certificates
    //  [settings setObject:[NSNumber numberWithBool:YES]
    //               forKey:(NSString *)kCFStreamSSLAllowsAnyRoot];
    //  
    //  // In fact, don't even validate the certificate chain
    //  [settings setObject:[NSNumber numberWithBool:NO]
    //               forKey:(NSString *)kCFStreamSSLValidatesCertificateChain];
    } 
```

# objective-c - 获取 Facebook 个人资料名称和图片 IOS 5.1

> ID：11144568
> 
> 赞同：1
> 
> 时间：2012-06-21T18:33:35.937
> 
> 标签：objective-c, ios, facebook-requests

我无法同时获取 Facebook 名称和图片。每个请求我只能接受其中一个。

```
-(void)fbDidLogin{
    // Save the access token key info.
    [self saveAccessTokenKeyInfo];

    // Get the user's info.
    [facebook requestWithGraphPath:@"me/?fields=first_name,picture" andDelegate:self];

}

-(void)request:(FBRequest *)request didLoad:(id)result{

    if ([result isKindOfClass:[NSArray class]]) {

        result = [result objectAtIndex:0];

        if ([result objectForKey:@"first_name"]) {
            [lblUser setText:[NSString stringWithFormat:@"Welcome %@!", [result objectForKey:@"first_name"]]];
            // Show the publish button.
            [btnPublish setHidden:NO];
        }
    }
    else {
       imageView.image = [UIImage imageWithData:result];
    }      
} 
```

我得到的错误

```
__NSCFDictionary length]: unrecognized selector sent to instance
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary length]: unrecognized selector sent to instance 
```

如果我提出两个请求

```
-(void)fbDidLogin{
    // Save the access token key info.
    [self saveAccessTokenKeyInfo];

    // Get the user's info.
    [facebook requestWithGraphPath:@"me/picture" andDelegate:self];
    [facebook requestWithGraphPath:@"me" andDelegate:self];
} 
```

并且使用相同的 -(void)request:(FBRequest *)request didLoad:(id)result 我得到的错误是

```
[__NSCFDictionary length]: unrecognized selector sent to instance 
```

那么我如何请求获取 Facebook 名称和图片以及如何处理传入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:55:27.567

我修复了它，以下代码可以正常获取 Facebook 名称和个人资料图片

```
-(void)request:(FBRequest *)request didLoad:(id)result{
    // With this method we’ll get any Facebook response in the form of an array.
    // In this example the method will be used twice. Once to get the user’s name to
    // when showing the welcome message and next to get the ID of the published post.
    // Inside the result array there the data is stored as a NSDictionary.    

    if ([result isKindOfClass:[NSData class]])
    {
        NSLog(@"Profile Picture");
        imageView.image = [UIImage imageWithData:result];
        //[profilePicture release];
        //profilePicture = [[UIImage alloc] initWithData: result];
    }

  if ([result isKindOfClass:[NSArray class]]) {
        // The first object in the result is the data dictionary.

        result = [result objectAtIndex:0];

    }

    if ([result isKindOfClass:[NSDictionary class]]) {
        // If the current result contains the "first_name" key then it's the user's data that have been returned.
        // Change the lblUser label's text.
        [lblUser setText:[NSString stringWithFormat:@"Welcome %@!", [result objectForKey:@"first_name"]]];
        // Show the publish button.
        [btnPublish setHidden:NO];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:57:13.493

Facebook 服务器给你的响应是一个字典，而不是一个数组。删除有关的两行`NSArray`并简单地使用：

```
if ([result objectForKey:@"first_name"]) {
        [lblUser setText:[NSString stringWithFormat:@"Welcome %@!", [result objectForKey:@"first_name"]]];
        NSLog(@"%@", lblUser);
        // Show the publish button.
        [btnPublish setHidden:NO];
} 
```

# algorithm - 范围内的快速位计数

> ID：11144578
> 
> 赞同：1
> 
> 时间：2012-06-21T18:33:59.847
> 
> 标签：algorithm, bitcount

我需要找到解决这个问题的算法：
在 [x,y] 范围内的数字中找到所有正位的总和。
警告：x 和 y 可能非常大（从 1 到 10^20）。
感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:56:32.673

看一个具体的例子来识别模式可能是有益的。例如，20 到 25。这是它们的二进制表示：

```
20: 10100
21: 10101
22: 10110
23: 10111
24: 11000
25: 11001 
```

按列查看，很明显最右边的列总是在 0 和 1 之间交替。由此我们可以得出结论，如果您的范围中有 N 个数字并且 N 是偶数，那么最右边的列中有 N/2 位。现在忽略最右边的列并尝试识别剩余位中的模式。

```
1010
1010
1011
1011
1100
1100 
```

列表中的每个数字都只重复一次。转换为十进制，我们看到这些数字是`1010 = 10`, `1011 = 11`, `1100 = 12`。使用这两个观察结果，我们可以得出结论`bitsInRange(20, 25) = (27 - 20 - 1) + 2*bitsInRange(10,12)`。我们确定的两种模式对于*任何*偶数开始数和奇数结束数都是正确的，因此该公式可以推广为：

```
bitsInRange(X,Y) =
if X is even and Y is odd:
    (Y - X - 1) + 2*bitsInRange(X/2, (Y-1)/2) 
```

但是，如果我们有一个奇数的起始编号或一个偶数的结束编号怎么办？上面的公式不适用于那些，因为我们确定的两种模式对于这些类型的数字并不完全相同。您可以尝试为偶数和奇数的每种可能组合编写单独的公式，但这种方式是危险的并且充满了[Fencepost Errors](http://en.wikipedia.org/wiki/Fencepost_error#Fencepost_error)。如果您利用这些关键属性，您将拥有更轻松的时间：

```
bitsInRange(X, Y) = bitsInRange(X, Y-1) + numBits(Y)
bitsInRange(X, Y) = bitsInRange(X+1, Y) + numBits(X) 
```

... where`numBits`给出`1`单个数字中的位数。

现在我们可以为偶数和奇数范围的每个可能组合编写一个递归公式。（顺便说一下，我们还需要一个基本案例）

```
function bitsInRange(X,Y):
    if X == Y:
        return numBits(X)
    if X is odd:
        return bitsInRange(X+1, Y) + numBits(X)
    if Y is even:
        return bitsInRange(X, Y-1) + numBits(Y)
    return (Y - X - 1) + 2*bitsInRange(X/2, (Y-1)/2) 
```

因为最终案例将问题空间切成两半，而所有其他案例都迅速将问题转化为最终案例，所以整个公式具有对数复杂度。如果您想获得像 [1, 10^20] 这样的大范围内的位，这很好。即使是这样的巨大数字，`bitsInRange`也只会运行大约 200 次左右。

# c++ - 根据 C++ 规则是否合法？

> ID：11144579
> 
> 赞同：2
> 
> 时间：2012-06-21T18:34:00.720
> 
> 标签：c++, arrays

> **可能重复：**
> [在 C++ 书籍中，数组绑定必须是常量表达式，但为什么下面的代码有效？](https://stackoverflow.com/questions/5947661/in-c-books-array-bound-must-be-constant-expression-but-why-the-following-cod)

看到这个代码

```
#include<iostream>
int main
{
using namespace std;
int a=7;
char arr[a];
return 0;
} 
```

在我的书中写到 array_size 必须是一个常量，但 codeblocks 没有给出错误......

这不是唯一的情况..还有其他几个例子。

谁是错误的IDE，编译器或任何其他东西？？？

使用新书或旧书会导致这样的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T18:37:54.960

代码格式不正确。数组的范围必须是常量表达式，而`i`不是常量表达式（未声明`const`）。

如果`a`声明为 a`const int`并使用常量表达式（如 ）进行初始化`7`，则代码格式正确，因为范围将是常量表达式。例如，以下是格式良好的：

```
int main()
{
    int const a = 7;
    char arr[a];
} 
```

一些 C++ 编译器（包括 gcc，在某些编译模式下）支持*可变长度数组*，这是 C 的一个特性，它允许本地数组具有非常量大小。但是，提供此功能的编译器将其作为语言扩展；它不是 C++ 的特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:44:10.580

由于[C99](http://en.wikipedia.org/wiki/C99)（[ISO/IEC 9899:1999 ，第 6.7.5.2 节），这在](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)**C**中是合法的：`arr`是可变长度数组 (VLA)。但是，[**C++**](https://stackoverflow.com/questions/8593643/does-c-support-variable-length-arrays)[中没有 VLA](https://stackoverflow.com/questions/8593643/does-c-support-variable-length-arrays)**。[这里](https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c)接受的答案解释了原因。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:49:41.853

**它在 C++98、C++03、C++11、C89 和 C90 中是非法的（可能在 C11 中也是如此）。**

它仅在 C99 中是合法的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T18:50:26.093

根据标准，这是不合法的，这里：

C++03 8.3.4/1 [dcl.array]

> 在声明 T D 中，其中 D 具有`D1 [constant-expressionopt]` 声明 T D1 中标识符的形式和类型是“派生声明符类型列表 T”，则 D 的标识符的类型是数组类型。T称为数组元素类型；此类型不应是引用类型、（可能是 cv 限定的）类型 void、函数类型或抽象类类型。如果常量表达式 (5.19) 存在，它应该是一个整数常量表达式并且它的值应该大于零。[...]

积分常数表达式在 5.19/1 中进一步定义：

> [...] 整数常量表达式只能涉及文字（2.13），枚举数，常量变量或整数或枚举类型的静态数据成员，用常量表达式（8.5）初始化，整数或枚举类型的非类型模板参数，和 sizeof 表达式。**

# c# - RowCommand 未触发

> ID：11144580
> 
> 赞同：1
> 
> 时间：2012-06-21T18:34:02.810
> 
> 标签：c#, asp.net, gridview

我正在尝试以编程方式添加一个按钮`ASP.NET`作为`C#`后端。我能够显示该按钮，但是当用户单击该按钮时，不会触发 RowCommand。

我相信问题是我在用户单击“提交”按钮后创建按钮。如果我在 page_load 中创建按钮，那么 RowCommand 可以工作。

这是网站应该如何流动：

1.  页面加载：显示基本数据。
2.  用户单击创建一个 的提交按钮，该按钮`GridView`具有一个`ButtonField`。the`GridView`和`ButtonField`get 都是在后端动态创建的。
3.  用户然后单击生成的按钮，它应该触发`RowCommand`

这是代码：

## `Page_load`

```
protected void Page_Load(object sender, EventArgs e)
    {
     //Nothing because we only want to create the button after the user
     //clicks on submit   
    } 
```

## `randomGridView`

生成 Gridview 和按钮

```
public void randomGridView(Table t, int x)
    {

        GridView gv1 = new GridView();
        GridView gv2 = new GridView();
        GridView gv3 = new GridView();
        GridView gv4 = new GridView();

        TableRow r = new TableRow();
        for (int i = 0; i < x; i++)
        {
            TableCell c = new TableCell();
            c.BorderStyle = BorderStyle.Solid;
            if (i == 0)
            {
                c.Controls.Add(gv1);
            }
            if (i == 1)
            {
                c.Controls.Add(gv2);
            }
            if (i == 2)
            {
                c.Controls.Add(gv3);
            }
            if (i == 3)
            {
                c.Controls.Add(gv4);
            }
            r.Cells.Add(c);
        }
        t.Rows.Add(r);

        //Where the xml gets bonded to the data grid
        XmlDataSource xds = new XmlDataSource();

        xds.Data = xml;
        xds.DataBind();
        xds.EnableCaching = false;

        gv1.DataSource = xds;

        ButtonField temp = new ButtonField();
        temp.ButtonType = ButtonType.Image;
        temp.ImageUrl = "~/checkdailyinventory.bmp";
        temp.CommandName = "buttonClicked";
        temp.HeaderText = " ";
        gv1.Columns.Add(temp);

        gv1.RowCommand += new GridViewCommandEventHandler(CustomersGridView_RowCommand);
        gv1.RowDataBound += new GridViewRowEventHandler(inventoryGridView_RowDataBound);
        gv1.DataBind();

        xds.Data = xml;
        xds.DataBind();
        xds.EnableCaching = false;

        gv2.DataSource = xds;
        gv2.DataBind();

        xds.Data = xml;
        xds.DataBind();
        xds.EnableCaching = false;

        gv3.DataSource = xds;
        gv3.DataBind();

        xds.Data = xml;
        xds.DataBind();
        xds.EnableCaching = false;

        gv4.DataSource = xds;
        gv4.DataBind();
    } 
```

## `inventoryGridView_RowDataBound`

我尝试在第一个单元格中手动添加一个按钮

```
public void inventoryGridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        Button temp = new Button();
        temp.CommandName = "buttonClicked";
        temp.Text = "temp button!";
        e.Row.Cells[0].Controls.Add(temp);
    } 
```

## `CustomersGridView_RowCommand`

这是需要被解雇的

```
public void CustomersGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "buttonClicked")
        {
            int index = Convert.ToInt32(e.CommandArgument);
            Label1.Text = index.ToString();

        }
    } 
```

## `Button1_Click`

什么实际创建了网格视图和按钮

```
public void Button1_Click(object sender, EventArgs e)
    {
        randomGridView(Table1, 1);
        randomGridView(Table2, 4);
    } 
```

那么如何让按钮触发`CustomersGridView_RowCommand`呢？还是无法链接动态生成的按钮？

## 编辑：这是 ASPX 页面：

```
 <table>
            <tr>
                <td>
                    <div id="div1" style="width: 257px; height: 500px; overflow-x: scroll; overflow-y: hidden;">
                        <asp:Table ID="Table1" runat="server">
                        </asp:Table>
                    </div>
                </td>
                <td>
                    <div id="div2" style="width: 500px; height: 500px; overflow: scroll;">
                        <asp:Table ID="Table2" runat="server">
                        </asp:Table>
                    </div>
                </td>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:42:54.917

这并非不可能。您需要了解，当页面从视图状态重新加载时，控件树（您使用 randomGridView 方法补充）会自动重建，但这些动态添加的控件的事件处理程序不会自动重建。

特别是，附加事件处理程序的这一行：

```
gv1.RowCommand += new GridViewCommandEventHandler(CustomersGridView_RowCommand); 
```

当您从视图状态重新加载页面时不会重新执行，当您单击网格中的一个按钮并且浏览器将页面发布回服务器时必须这样做。

您的解决方案是在 Load 事件阶段检查页面是否有回发条件。如果 Page.IsPostBack 为 true，则扫描您的控件树以查找这些动态生成的网格，并为 RowCommand 事件设置事件处理程序（如上面的代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:22:51.863

我终于能够在动态创建 RowCommand 后触发它。这是我的解决方案，尽管我不能说这是最好的做事方式：

```
protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        if (IsPostBack){
            if (Request.Form[Button1.UniqueID] != null)
            {
                //Get the data from the server
                randomGridView(Table1, 1);
                randomGridView(Table2, 4);
            }
            //Just display the form here

        }
    } 
```

现在，如果单击按钮，我将检查 OnInit，而不是等到我到达 button_click 事件。如果是，那么我知道用户希望我加载数据并显示它。目前在上面的代码中，我只是在同一个函数中制作和显示数据（这是一个糟糕的设计，但我只是简单地进行原型设计）。

然后，每当用户单击任何会导致回发的内容时，它都会将表格添加到控件中。然后控件可以触发（我不知道为什么或如何，但它有效..）

只是为了表明我们甚至不需要按钮功能：

```
 public void Button1_Click(object sender, EventArgs e)
    {
        //randomGridView(Table1, 1);
        //randomGridView(Table2, 4);
        //Session.Add("doIt",true);
    } 
```

同样，这可能不是最好的做事方式，但它确实有效。如果有人有更好的解决方案，请告诉我。

# facebook-fql - 通过 FQL 查询找出哪些朋友有照片标签

> ID：11144582
> 
> 赞同：1
> 
> 时间：2012-06-21T18:34:07.080
> 
> 标签：facebook-fql

我正在尝试获取在照片中标记的朋友列表。我对有多少、什么照片或其他任何东西不感兴趣——只是一个是或否。

以下查询尝试获取与我朋友列表中的用户关联的每个标签。我更愿意将其限制为每个用户的一个结果，因为结果在任何其他方面都太大了。

```
SELECT text, subject FROM photo_tag WHERE subject IN (SELECT uid2 FROM friend WHERE uid1=58015959) 
```

有任何想法吗？如果它也有效，我愿意使用 Graph API。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:54:57.390

这将为您提供在照片中被标记的朋友列表：

```
SELECT name FROM user WHERE uid IN 
   (SELECT subject FROM photo_tag WHERE subject IN 
       (SELECT uid2 FROM friend WHERE uid1=me())
    LIMIT {n} 1000 ) 
```

如果你有很多朋友都是活跃的标注者，你需要遍历这个查询`{n}`，其中`{n}`= 1000 * 你运行查询的次数 + 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T17:14:27.370

不幸的是，在 FQL 中没有简单有效的方法来获得对此查询的是/否答案。

但是，您可以查询`http://graph.facebook.com/{user-id}/photos`. 我过于复杂了这一步，错过了`/photos`只返回用户 ID 被标记的照片而不是他们上传的所有图像的事实。

# javascript - 在jQuery中跨多个元素插入多个值

> ID：11144583
> 
> 赞同：0
> 
> 时间：2012-06-21T18:34:11.740
> 
> 标签：javascript, jquery, html, css

我有一个几乎完全由 javascript 生成的页面。我有一个创建元素的主要功能，然后有一些可用于自定义每个属性的属性。大多数自定义都在 CSS 级别，但我需要在每个元素中插入一个唯一的文本元素。

这是对象函数：

```
function buildButton(s, b) {
        $(s).append('<div id='+b.name+'></div>');
        $('#'+b.name).css({
            'position': 'absolute',
            'display': 'inline-block',
            'left': b.x,
            'top': b.y,
            'height': b.height,
            'width': b.width,
            'cursor': 'pointer',
            'z-index':5,
        }); 
```

我正在尝试使用以下方法创建独特的文本元素：

```
$('div[id |="controllerButt"]').append(b.buttText); 
```

然后我们有函数调用：

```
buildButton(this, {
    name:'controllerButt-13',
    type: 'action',
    width:31, height:37,
    x:422, y:536,
    buttText: 'This is Button 13'
}); 
```

上述结果输出“This is Button 13”，但它还附加了已设置的任何其他 buttText 实例，因此您发送“This is Button 13 This is Button 14 This is Button 15”等。

我应该如何处理这个，所以我只有“这个”值而不是所有的 buttText 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:45:28.190

您可以在创建按钮的语句中设置文本

```
$(s).append('<div id='+b.name+'>'+b.buttText+'</div>'); 
```

或使用一根长链

```
$('<div id='+b.name+'></div>')
 .text(b.buttText)
 .appendTo.(s)
 .css({
        'position': 'absolute',
        'display': 'inline-block',
        'left': b.x,
        'top': b.y,
        'height': b.height,
        'width': b.width,
        'cursor': 'pointer',
        'z-index':5,
 }); 
```

# javascript - 我可以决定调用不存在的对象方法会发生什么吗？

> ID：11144589
> 
> 赞同：3
> 
> 时间：2012-06-21T18:34:33.673
> 
> 标签：javascript

我的代码如下所示：

```
obj.foo(); // obj might, or might not have a `foo` method. 
```

我想知道我是否可以覆盖`obj.foo`在我的代码中调用时发生的情况，例如：

```
obj.foo = function(){ alert ("Hello"); });
obj.onCallNonExistentMethod = function(){ // I know this is imaginary syntax
    alert("World");
}
obj.foo(); // alerts "Hello"
delete obj.foo;
obj.foo(); // alerts "World" , would TypeError without the method missing handler. 
```

据我了解，在 Ruby 中会是`method_missing`或`const_missing`类似的东西。

我可以覆盖调用 JavaScript 中不存在的对象方法时发生的情况吗？如果可以，我该怎么做？

目标是验证我提供给用户的 API，以便他们可以安全地使用 API，并且我可以更清楚地警告他们出现错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-25T22:15:40.440

两年前本杰明，你不太了解行为类型的概念是吗？

幸运的是，您很快就会意识到，自从编写该问题以来，JavaScript 中[的接口不是结构化](https://stackoverflow.com/a/4439733/1348195)的，甚至[编写了一个库](https://github.com/benjamingr/interface-js)来解决您在这里所说的确切问题，只是从不使用它。

所以，回答你的问题：

*   是的，完全有可能做到这一点。
*   对于您给出的案例，您可能不应该这样做。

## 怎么做

[如果您只需要通过Proxy API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)支持真正（真正）新的浏览器，这是完全可行的。

```
var realObject = { foo: function(){ alert("Bar"); }); // our fooable api
var api = new Proxy({}, {
    get: function(target, name){
        if(name in target){ // normal API call
            return target[name]; 
        }
        // return whatever you want instead of the method:
        return function(){ alert("Baz"); });
    }
});
api.foo(); //alerts Bar
api.bar(); //alerts Baz
api.IWillNotBuyThisRecordItIsScratched(); // alerts Baz 
```

因此，虽然浏览器支持非常不稳定，但它

## 为什么你不应该

接口传达行为，例如可以（并且应该）通常被静态分析工具（如 jshint 或 ternjs）捕获的拼写错误。

检查拼写错误的工具根本不足以传达 JavaScript 中的行为，类型检查通常被认为是一种反模式——在 JavaScript、Ruby 和 Python 等语言中，你知道你会得到哪些类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T18:36:32.910

不幸的是，这是不可能以任何广泛支持的方式实现的。您可以获得的最接近的方法是对所有调用使用代理功能，即`foo.bar()`您可以使用类似`foo.invoke('bar')`. 但是，这很丑陋，很可能与您在第一个“不感兴趣”部分中的意思很接近。

不过，在松散类型的语言中，期望开发人员传递兼容的对象是很常见的——即，在传递意外的东西时出错通常是可以的。

* * *

但是，如果您有幸使用了支持 ECMAScript-harmony 功能的 JS 引擎（显然 IE 不支持），您可以使用[Proxy 对象](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)来实现这一点。基本上，您将对象包装在 Proxy 中，它可以让您捕获对象上的[大多数操作](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy#Handler_API)，例如迭代它、**检索属性**，甚至创建属性。除了查看[这个问题的答案](https://stackoverflow.com/a/23860469/298479)的两个链接之外，可能值得一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:40:04.587

如果您正在使用严格定义的对象，则应该使用自定义对象而不是对象文字：

```
function Foo(bar, baz) {
  this.bar = bar;
  this.baz = baz;
}
Foo.prototype = {
  fizz: function () {
     alert(this.bar + ' ' + this.baz + '!');
  }
};

//elsewhere
f = new Foo('Hello', 'World');
f.fizz(); 
```

`Foo`然后您可以使用运算符判断对象是否为实例`instanceof`：

```
function Buzz(foo) {
  if (foo instanceof Foo) {
    foo.fizz();
  }
}
f = new Foo('Hello', 'World');
Buzz(f); 
```

* * *

如果您只是想检查一个对象是否在特定参数处包含一个函数，您可以使用类似的东西：

```
function hasFunction(obj, param) {
    return (typeof obj[param] === 'function');
}
o = {
    foo: function () {}
}
hasFunction(o, 'foo'); //true
hasFunction(o, 'bar'); //false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T19:21:22.980

这在今天并不是很有用（由于浏览器支持参差不齐），但是[代理 API](http://wiki.ecmascript.org/doku.php?id=harmony%3adirect_proxies)将允许您编写拦截对象属性访问的代码。换句话说，当你写：

```
obj.foo(); 
```

然后，代理的*陷阱*可以返回它想要（被调用）的任何内容，而不管该属性是否实际存在于原始对象上。

# mysql - 使用 mySQL 包含 300 页数据的正确方法？

> ID：11144596
> 
> 赞同：0
> 
> 时间：2012-06-21T18:35:13.160
> 
> 标签：mysql

所以我问了[https://stackoverflow.com/questions/11144014/does-mysql-update-add-a-row-if-it-doesnt-exist](https://stackoverflow.com/questions/11144014/does-mysql-update-add-a-row-if-it-doesnt-exist)并被告知我使用的列不正确。

所以我有 300 个页面需要从数据库中获取数据。可以通过转到管理面板，选择要更新的页面并使用所见即所得编辑器在文本区域中更改页面内容并简单地按下提交按钮来更新内容。我创建了一个包含 8 列的测试系统，所有列都有一行包含页面内容。但这不是正确的方法吗？

那么，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:40:33.903

我希望我不会误解你。我会把每一页放在一行中。所以只要有一个有两列`id`和的表`page_content`。这样您就可以毫无问题地删除、添加或修改每一行（页面）。

# symfony-1.4 - Symfony 内存问题

> ID：11144597
> 
> 赞同：0
> 
> 时间：2012-06-21T18:35:19.040
> 
> 标签：symfony-1.4

我在 symfony 和 cpu/内存泄漏方面遇到了困难，我是 symfony 的新手，我不知道我是否弄乱了任何技巧或技术来克服这个问题。

我在 vps 上托管我当前的 symfony 项目，它几乎每隔一小时就会停止一次。

我也想知道这些问题的答案：

当我使用 (fetchOne, fetchAll, execute) 执行一个学说查询时，我得到了很多额外的 symfony 东西，比如表名和结构......有没有办法只获取数据？

我应该怎么做才能优化我的 symfony 应用程序

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:11:30.147

你的问题看起来很抽象。如果没有更多信息，很难为您提供帮助。无论如何，我认为你应该看看这个问题并搜索关于 Doctrine hydration 选项： [什么是 Doctrine hydration？](https://stackoverflow.com/questions/2661762/what-is-doctrine-hydration).

记得使用 symfony 调试 web 栏。

# maven - 将 WebLogic 指向 Maven 目标目录

> ID：11144606
> 
> 赞同：0
> 
> 时间：2012-06-21T18:35:49.853
> 
> 标签：maven, weblogic

我的问题：我厌倦了更改 JSP 然后等待 3-4 分钟重新部署到 Web 服务器。

我想做的是将 Weblogic 指向 Maven 目标/应用程序目录。然后，当我保存文件时，我运行“mvn war:exploded”，它会注意到更新，但不会重新部署所有内容，只有我需要的文件。

现在在我的 maven POM 中，我将 war 插件输出目录设置为 Weblogic 自动部署目录。所以，只要我运行“mvn package”，它就会自动部署。但是，我必须等待 3-4 分钟才能进行部署。

有什么建议吗？

使用 Weblogic 10.3.6、Maven 3、Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:23:50.743

如果您在 target/$WAR_NAME 文件夹中创建新部署并将 Source Accessibility 设置为“我将使部署可从以下位置访问”（保留实际位置的默认值），则运行`mvn war:exploded`将更新目标和 WebLogic 中的 JSP将接受更改。

但是，这似乎不适用于通过`mvn install`.

# gridfs - 看似基本的 MongoDB GridFS 命令……我找不到

> ID：11144607
> 
> 赞同：2
> 
> 时间：2012-06-21T18:35:51.850
> 
> 标签：gridfs, mongodb

如何通过 mongo shell 将文件“上传”到我的 MongoDB 以及如何检索同一个文件？我想知道，即使这样做了，输出是什么。

我认为展示我所做的将表明我的尝试是多么愚蠢。

```
db.fs.files.insert("foo.txt"); 
```

这似乎只是插入实际文本而不是我想要的文档......并且检索，我发现

```
db.fs.files.retrieve() 
```

不是函数。find() 只是显示给我......但我想要打印实际文档的内容，无论是二进制数据还是我不在乎，哈哈。

对于这种悲惨的尝试，我感到很抱歉——但也许它表明我对 GridFS 能做什么知之甚少——也许除了使用之外，还有人可以为我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T18:44:38.143

从命令行你可以使用 mongofiles：[http ://www.mongodb.org/display/DOCS/GridFS+Tools](http://www.mongodb.org/display/DOCS/GridFS+Tools)

```
mongofiles put yourfile.txt
cd /tmp
mongofiles get yourfile.txt 
```

第一行将文件 yourfile.txt 放入 mongodb。第二个在文件系统的另一个位置检索它。

我认为直接从 mongo shell 使用 GridFS 是不可能的。

从python你可以使用：

```
 class gridfs.GridFS(database, collection='fs') 
```

[http://api.mongodb.org/python/current/api/gridfs/index.html#gridfs.GridFS](http://api.mongodb.org/python/current/api/gridfs/index.html#gridfs.GridFS)

对于应该使用什么 GridFS：

[http://www.mongodb.org/display/DOCS/When+to+use+GridFS](http://www.mongodb.org/display/DOCS/When+to+use+GridFS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T10:34:37.120

将文件从路径插入到gridFs

`mongofiles -d foorbar -l "D: \ Work \ MongoDB \ GridFS test .txt" put "GridFSTest.txt"`

# asp.net - 通过超链接打开文件会导致 VS 停止调试

> ID：11144608
> 
> 赞同：0
> 
> 时间：2012-06-21T18:35:53.283
> 
> 标签：asp.net, vb.net, visual-studio-2010, ms-office

这是我遇到的一个相当奇怪的问题

我目前有一个网页，我正在向该网页添加超链接，单击该网页将打开一个文件（通常是 Word 文件，尽管有一些 Excel 文件）。

这就是问题所在。但是，在调试所有文件时，所有文件都可以正确打开，但标记为 .doc、.docx 或 .xls 的文件在打开时都会停止调试模式。我有正确打开且不停止调试的 .docm 文件。似乎没有任何地方抛出错误，只是强制停止调试模式。

有没有人遇到过类似的问题？我只在本地测试过，但我不确定将它放在测试服务器上时是否会导致问题。我还没有完全完成页面的其余部分，所以我希望在完成项目之前停止这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:19:00.780

您是在调试的同一窗口中打开这些文档，还是使用锚点中的​​目标属性尝试在新窗口中打开它们？

此外，您可能将 VS 调试模式设置为自动附加到 IE 以调试脚本。当网页卸载时（有利于加载 Office 文档），它可能会向 VS 发出调试会话结束的信号。

与其按 F5（调试）来启动调试会话，不如使用调试菜单，附加到进程...命令，然后找到正在运行您的应用程序的 w3wp.exe。这将允许您在不连接到 IE 进行脚本调试的情况下调试应用程序的服务器端部分。

或者，您可以使用 IE 的高级选项关闭脚本调试。当您单击 Debug 时，您会收到来自 VS 的警告，但您也可以使用 VS Options 将其关闭。

# java - roundToDecimals 返回的数字太多

> ID：11144614
> 
> 赞同：0
> 
> 时间：2012-06-21T18:36:14.860
> 
> 标签：java, floating-point, floating-point-precision

我有一个返回浮点数的过程。然后我使用该`roundToDecimals`方法消除一些数字。

```
roundToDecimals(weight,3) 
```

----2012 年 6 月 22 日更新：凌晨 1.42 点----

```
public static double roundToDecimals(double d, int c) {
int temp=(int)((d*Math.pow(10,c)));
return (((double)temp)/Math.pow(10,c));
} 
```

---更新结束

它运行良好，但如果最后一位为零，则返回小数点后 3 位以上

```
0.0020
0.0060
0.333
0.071 
```

有谁知道如何处理这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:39:30.480

考虑您的 0.333 案例。没有*正好**是*0.333的二进制浮点 ( `double`, `float`) 表示。只有“最接近 0.333 的值”，如果你使用它，你会得到

 *```
double d = 0.333; 
```

（我假设您在抱怨您的`roundToDecimals`方法的结果，我假设它是 a `float`or `double`。从您的问题中很难判断。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T00:09:11.747

你的方法不可能奏效。您不能将浮点值四舍五入到特定的小数位数，因为浮点值没有*小数*位。它有二进制位置。如果您想要小数位，您必须转换为十进制基数，例如通过`DecimalFormat`或`BigDecimal`。*

# objective-c - NSSet containsObject 不工作？

> ID：11144616
> 
> 赞同：0
> 
> 时间：2012-06-21T18:36:20.380
> 
> 标签：objective-c, mkmapview, nsset

我试图在将注释添加到数组之前检查它是否存在。我不明白为什么 [visibleAnnotations containsObject:annotation] 总是返回 False。

```
MKMapRect mRect = self.locationView.visibleMapRect;
NSSet *visibleAnnotations =[self.locationView annotationsInMapRect:mRect];
NSLog(@"Annotation in Rect %@",visibleAnnotations);

for(NSArray * obj in JSON){
                coordinates.latitude=[[obj valueForKey:@"Latitude"] doubleValue];
                coordinates.longitude=[[obj valueForKey:@"Longitude"] doubleValue];
                NSString *title=[NSString stringWithFormat:@"%@",[obj valueForKey:@"DeviceId"]];
                MapAnnotation *annotation = [[MapAnnotation alloc] initWithTitle:title andCoordinate:coordinates] ;

                NSLog(@"New Annotation %@",annotation);

                if ([visibleAnnotations containsObject:annotation ]) {
                    //[addPins addObject:annotation];
                    NSLog(@"Contains obj");
                }
                [addPins addObject:annotation];
                [annotation release];
            } 
```

缩放至仅显示 1 个注释。

```
 Annotation in Rect {(<MapAnnotation: 0x1cd80720>)}
 New Annotation <MapAnnotation: 0x1cd79410> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:49:23.880

`MapAnnotation`如果您在创建实例并将其添加到集合后从不更改实例的属性，则可以覆盖该类的`hash`and`isEqual:`方法以获得您在此处寻找的行为。

`NSSet`使用这两种方法来测试对象；如果您重新定义`isEqual:`以比较`MapAnnontation`对象中包含的值，而不是对象本身的标识，则集合会将它们视为相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:42:42.383

因为您正在创建一个新对象，并且因为它是新对象，所以它显然不在您的集合中。

您需要检查集合中的每个对象，以查看它是否与您的新对象相等。

# android - 使用 values-swdp 在 Android 中定位不同的屏幕尺寸

> ID：11144619
> 
> 赞同：3
> 
> 时间：2012-06-21T18:36:23.910
> 
> 标签：android, width, screen, dimensions

我知道我之前已经在项目中使用过它，但是无论出于何种原因，当我尝试将尺寸放入“values-sw360dp”时，宽度 >= 360dp 的屏幕并没有接收到这些尺寸，它们是恢复到常规的“值”文件夹。任何想法为什么？如果您需要更多信息，请随时询问。

感谢您的时间。

编辑：获取屏幕分辨率的方法：（仿生出来到 360x640dp）

```
Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight();
Log.d("Screen width(px)", width+","+height);

float density = getResources().getDisplayMetrics().density;
Log.d("Screen density", density+"");

float widthDp = width / density;
float heightDp = height / density;
Log.d("Screen width(dp)", widthDp+","+heightDp); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:42:45.583

我也觉得你的数学不好。

Nexus One 是 480 x 800 像素，屏幕为 3.7 英寸，DPI 为 252dip。

你可以使用这个网站来计算密度：[dpi](http://members.ping.de/~sven/dpi.html)

或手动进行。

这解释了密度桶：[list-of-android-devices-with-pixel-density-buckets](http://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/)。

因此，如果要让 Google Nexus One 拿起它，您将拥有

`/values-sw530dp/`

顺便说一句，你声明

`android:minSdkVersion="7"`在您的清单中，因为您的尝试在 Android 1.5 上不起作用（如果您使用旧的模拟器或其他东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:25:25.433

我认为你的数学是错误的：

根据维基百科，显示器是 Display **4.3-inch 960 × 540 px qHD at 256 ppi**

`160/256 = 0.625`

`0.625*540 = 337.5`

试试看`values-sw335dp`是否有效

# python - 更改模型管理表单默认值

> ID：11144623
> 
> 赞同：3
> 
> 时间：2012-06-21T18:36:42.973
> 
> 标签：python, django, django-admin

我的项目中有典型的模型继承：

```
class A(models.Model):
    boolean_field = models.BooleanField(default=True)

class B(A):
    some_other_field = models.CharField() 
```

我想覆盖`boolean_field`in class的默认值，`B`我该怎么做？

我认为在数据库层上做这件事可能很棘手，所以至少我可以简单地覆盖 Django admin 中的默认值（我的意思是在`ModelAdmin`表单中为 class `B`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:25:20.150

`B`正如您所建议的，我认为最简单的方法是在 django admin 中更改用于模型的模型表单。

要更改表单字段的初始值，您可以重新定义该字段，或覆盖该`__init__`方法。

```
class BForm(forms.ModelForm):
    # either redefine the boolean field
    boolean_field = models.BooleanField(initial=False)

    class Meta:
        model = B

    # or override the __init__ method and set initial=False
    # this is a bit more complicated but less repetitive
    def __init__(self, *args, **kwargs):
        super(BForm, self).__init__(*args, **kwargs)
        self.fields['boolean_field'].initial = False 
```

在 django 管理员中使用您的自定义模型表单很容易！

```
class BAdmin(admin.ModelAdmin):
    form = BForm

admin.site.register(B, BAdmin) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:59:13.560

```
class A(models.Model):
    boolean_field = models.BooleanField(default=True)
    def __unicode__(self):
        return self. boolean_field 

class B():
    some_other_field = models.CharField()
    default_fiel_from_bool = models.ForeignKey(A) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-20T03:06:54.850

从[这个答案](https://stackoverflow.com/a/33648806/606725)中，我发现最简单的方法是覆盖该函数`get_changeform_initial_data`。

以下是我如何将它应用到我的项目中。

在这个例子中，我有一个叫做 ORM 的类`Step`和一个叫做 Admin 的类`StepAdmin`。该函数从表中的最新对象中获取`get_latest_step_order`。`step_order`

通过覆盖`get_changeform_initial_data`管理类中的函数，我可以为管理屏幕中创建的每个新对象设置步骤顺序。

```
class Step(models.Model):
    step_name = models.CharField(max_length=200)
    step_status = models.ForeignKey(StepStatus, null=True)
    step_order = models.IntegerField()

def get_latest_step_order():
    return Step.objects.latest('step_order').step_order+1

class StepAdmin(admin.ModelAdmin):
    fields = ["step_name","step_status","step_order"]

    def get_changeform_initial_data(self, request):
        return {
            'step_order': get_latest_step_order()
        } 
```

# mysql - MySQL 子查询在不匹配结果时省略整行

> ID：11144626
> 
> 赞同：1
> 
> 时间：2012-06-21T18:37:01.570
> 
> 标签：mysql, null, subquery

当与该链接关联的产品 ID 可能不再存在时，我试图在 MySQL SELECT 语句中包含一个子查询来组装产品链接。当该产品 ID 不存在时，子查询未找到任何结果，并且从最终结果中省略了整行。我希望无论如何都要返回该行（使用 NULL 就可以了）。

```
SELECT s.field_a, s.field_b, s.field_c,
    (SELECT CONCAT( '/', sma.name_link, '/', smo.name_link, '.html?pid=', spr.id )
        FROM sales_products AS spr, sales_sections AS see,
            sales_models AS smo, sales_manufacturers AS sma
        WHERE sse.id = spr.sales_section_id AND smo.id = sse.sales_model_id
            AND smo.sales_manufacturer_id = sma.id
            AND spr.id = s.sales_product_id
    ) AS product_link
    FROM sales_order_items AS s, sales_products AS p
    WHERE s.order_id = 100 AND p.id = s.sales_product_id
    ORDER BY shipment_id, sales_order_item_id 
```

我已经搜索了很长时间，但我只是没有设法将这个拼凑在一起。我期待任何可以提供的反馈或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:46:33.187

我在您的查询中的任何地方都没有看到`product_id`列引用，因此我假设您的意思是它的列是具有与 sales_product 表中的值`sales_product_id`不匹配的值的列。`id`

我认为“缺失行”的问题与 SELECT 列表中的子查询无关；我相信这与 sales_product 表的 INNER JOIN 有关。我建议您将其更改为 LEFT OUTER JOIN。

```
SELECT s.field_a
     , s.field_b
     , s.field_c
     , (SELECT CONCAT('/',sma.name_link,'/',smo.name_link,'.html?pid=',spr.id)
          FROM sales_products spr
          JOIN sales_sections see ON sse.id = spr.sales_section_id
          JOIN sales_models smo ON smo.id = sse.sales_model_id
          JOIN sales_manufacturers sma ON sma.id = smo.sales_manufacturer_id 
         WHERE spr.id = s.sales_product_id
         ORDER BY 1 LIMIT 1
       ) AS product_link
  FROM sales_order_items s
  LEFT
  JOIN sales_products p ON p.id = s.sales_product_id
 WHERE s.order_id = 100
 ORDER BY shipment_id, sales_order_item_id 
```

* * *

注意： SELECT 列表（别名为 product_link）中的该子查询的问题是，如果（何时？）该子查询返回多于一行，则该语句将引发异常。除非你有某种保证它永远不会那样做，否则你至少可以在它上面加上一个 ORDER BY 1 LIMIT 1，或者在 CONCAT 周围加上一个 MAX 聚合（这样它是确定性的。）

使用表别名限定 ORDER BY 子句中的列引用也是一个非常好的主意，以防止潜在的“模糊列”异常。我看到您所有的列引用都是合格的，这是一件非常好的事情。

您可能还注意到我重新格式化了您的原始查询，并引入了 JOIN 关键字（代替逗号），并将连接谓词从 WHERE 子句移至 ON 子句。我发现这使得语句更容易阅读，也更容易调试。它还让您指定一个 OUTER JOIN。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T18:41:03.070

如果值为空，您可能想尝试在查询中使用 UNION，甚至使用 IF sql 条件设置 NULL。

希望有帮助。

# mysql - 新手：mysql加入2个表来汇总并计算结果

> ID：11144627
> 
> 赞同：0
> 
> 时间：2012-06-21T18:37:02.847
> 
> 标签：mysql, sql, join, count

我试图加入 2 个表并计算结果。我有这些桌子；

```
SET NAMES utf8;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
--  Table structure for `segments`
-- ----------------------------
DROP TABLE IF EXISTS `segments`;
CREATE TABLE `segments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `substr_id` int(255) NOT NULL,
  `substr` varchar(255) NOT NULL,
  `count` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;

-- ----------------------------
--  Records of `segments`
-- ----------------------------
BEGIN;
INSERT INTO `segments` VALUES ('1', '1', 'book', '2'), ('2', '2', 'ooki', '1'), ('3', '2', 'okin', '1'), ('4', '2', 'king', '1');
COMMIT;

-- ----------------------------
--  Table structure for `words`
-- ----------------------------
DROP TABLE IF EXISTS `words`;
CREATE TABLE `words` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `substr_id` int(11) NOT NULL,
  `word` varchar(255) NOT NULL,
  `cleaned` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;

-- ----------------------------
--  Records of `words`
-- ----------------------------
BEGIN;
INSERT INTO `words` VALUES ('1', '1', 'book', '0'), ('2', '2', 'booking', '0'), ('3', '2', 'booking', '0'), ('4', '2', 'booking', '0');
COMMIT;

SET FOREIGN_KEY_CHECKS = 1; 
```

用 sql + 数据改变了问题。

我试图 ：

```
 SELECT words with there count from segments.count based upon there substr_id. 
```

任何人都可以帮我完成这件事吗？我不太擅长 SQL，有红色文档和一些教程，但不太明白我应该如何在单个查询中完成上述所有操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:41:42.467

```
 SELECT word, count
   FROM words NATURAL JOIN segments; 
```

应该做的伎俩。我建议做更多的研究。[http://en.wikipedia.org/wiki/Join_(SQL](http://en.wikipedia.org/wiki/Join_(SQL) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:40:47.443

您需要聚合函数 COUNT() 来计算查询结果。

有许多链接可以帮助解决这个问题，但是像[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)这样的链接应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:47:45.457

您可能需要某种连接条件，否则您将获得笛卡尔积，但这应该可以帮助您入门：

```
SELECT COUNT(*)
FROM words
JOIN count --add an ON condition here unless you want a cartesian product 
```

有点不清楚您要做什么，但如果这不是您要找的，请随时澄清。

祝你好运！

# javascript - IE8 解析这个简单的正则表达式与所有其他浏览器不同

> ID：11144628
> 
> 赞同：9
> 
> 时间：2012-06-21T18:37:07.497
> 
> 标签：javascript, regex, internet-explorer-8

我正在尝试使用此**功能**从`value`

```
function split(val){
  return val.split( /,\s*/ );
};
value = "Jim, ";
var terms = split( value );

terms; 
```

所有其他浏览器，包括 IE9，都会产生`terms = ["Jim", ""]`

但是，IE8 和可能的 IE7 会产生这个：`terms = ["Jim"]`

有没有人有任何可能适用于 IE8 的建议或替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:06:52.690

你可能会更好：

```
val.split(',') 
```

这似乎在所有浏览器中都有效。

逗号之后的任何尾随空格仍然必须在之后被剥离。类似于以下内容：

```
for (var i = 0; i < terms.length; i++) {
    terms[i] = terms[i].replace(/^\s\s*/, '').replace(/\s\s*$/, '');
} 
```

`split()`显然，在 IE8 及更早版本中，使用正则表达式参数时会忽略空字符串匹配。字符串参数可以正常工作：

```
'axx'.split('x')    // All browsers: ["a", "", ""]
'axx'.split(/x/)    // IE6/7/8: ["a"], all other browsers: ["a", "", ""] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T19:02:46.720

您将不得不重写正则表达式。

试试这个。

```
String.prototype.trim = String.prototype.trim || function() {
    return this.replace(/^\s+|\s+$/g, ''); 
}
function split( str ){
    return (""+str).trim().split( /\,/ );
} 
```

# scala - 是否可以将特征混合到已经存在的对象中？

> ID：11144630
> 
> 赞同：1
> 
> 时间：2012-06-21T18:37:11.897
> 
> 标签：scala, traits

> **可能重复：**
> [对象实例上的 scala 和特征](https://stackoverflow.com/questions/3893274/scala-and-traits-on-object-instances)

是否可以将特征混合到已经存在的对象中？

就像是：

```
val s = new MyClass
val sWithTrait = s with myTrait 
```

上面的代码不起作用，但也许语法错误或者根本不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:40:18.880

动态混合在常规 Scala 中是不可能的，但我似乎记得曾经尝试过一个名为[Autoproxy](http://www.artima.com/weblogs/viewpost.jsp?thread=275588)的编译器插件，它允许沿着这些思路做一些事情。虽然不确定它的状态。

# jquery - 两桌行高一直相同

> ID：11144632
> 
> 赞同：0
> 
> 时间：2012-06-21T18:37:24.040
> 
> 标签：jquery, css

我有两个表，比如说表 A 和表 B。它们的行数总是相等的。表 A 被冻结，表 B 可滚动。实际上，冻结和可滚动与我的问题并不真正相关，而只是将其扔掉。

现在为了确保表 A 的一行的高度始终等于具有相同索引的表 B 的一行的高度，我使用了如下所示的内容：

```
 $(function() {
var numberOfRows = $("#Scroll table tbody tr").length;      
        for(i=1; i<numberOfRows; i++)
        {
            var currentHeight = $("#Scroll table tbody tr").eq(i).height();
            $("#Fixed table tbody tr").eq(i-1).css("height", currentHeight).css("vertical-align", "middle");
        }
}); 
```

第一个表包含在 id 为“Fixed”的 div 中，其他表包含在 id 为“Scroll”的 div 中

我不是 jQuery 专家，所以不确定这是否是最有效、最可靠的方法。我在使用此解决方案时遇到的问题是，它渲染得很好，但是当我将页面缩放到 125% 或 150% 时，表格对齐会变得不合适。

任何建议，解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:24:41.117

我认为一个可能的问题是设置 s 的高度`tr`。不要认为它是有效的，并且可能与浏览器无关。相反，改变 s 的高度`td`只是为了看看它是否工作得更好。

# iphone - 为 UITextView 的文本添加描边

> ID：11144634
> 
> 赞同：1
> 
> 时间：2012-06-21T18:37:44.587
> 
> 标签：iphone, uitextview, quartz-graphics, core-text

我试图在 UITextView 的文本周围添加一个笔划。有没有人试过这个？

我能想到的复杂的事情是继承 UITextView 并覆盖 drawText: 并处理文本绘制，同时使用 NSAttributedString。

我希望在用户编辑时在文本周围显示笔画。有什么建议吗？谢谢。

# android - 为什么不将整个 Android 应用程序移至 SD 卡？

> ID：11144635
> 
> 赞同：1
> 
> 时间：2012-06-21T18:37:47.127
> 
> 标签：android, sd-card

当您单击“移至 SD 卡”按钮时，是否有资源说明将 Android 应用程序的哪些部分移至 SD 卡？在应用程序屏幕中，我的应用程序显示为 5.62MB，但是当我移动到 SD 卡时，它显示为 4.26MB，这仍然比我喜欢的要高。

我的大量应用程序是自动生成的 Java 代码。程序本身是否被移动到 SD 卡，还是只是 res 目录中的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:49:41.110

是的，似乎只有资源被移动到外部存储器，请参阅[此处](http://developer.android.com/guide/topics/data/install-location.html)更多详细信息。

# ios - 是否有关于应用程序界面与 Siri 的相似程度的指南？

> ID：11144639
> 
> 赞同：0
> 
> 时间：2012-06-21T18:38:04.013
> 
> 标签：ios, user-interface, siri

我想开发一个具有类似于 Siri 的语音命令界面的应用程序。（我知道，很难做到，有很多语音命令要输入，但希望这个应用程序不需要太多）。无论如何，我在某处读到，界面与 Siri 的界面过于相似会使您的应用程序无法进入商店，所以我想知道什么是“过于相似”？

# php - 如何让 PHP 脚本在浏览器中运行？

> ID：11144641
> 
> 赞同：7
> 
> 时间：2012-06-21T18:38:12.287
> 
> 标签：php

> **可能重复：**
> [PHP 脚本未在浏览器上运行](https://stackoverflow.com/questions/7168180/php-script-not-running-on-browser)

我正在尝试使用 PHP，并且对此非常陌生。我正在尝试用一个简单的 hello world 程序来试水。我试过这样：

```
<html>
<body>

<h>Php File</h>

<?php echo "hello world";?>

<p>Did it work?</p>

</body>
</html> 
```

然后在我的浏览器（当前是 chrome）中打开 html 文件。只有`did it work?`部分显示在浏览器中。不是我要运行的实际 PHP 东西。有任何想法吗？

我也试过了

```
<html>
<body>

<h>Php File</h>

<form action="helloworld.php" method="post"></form>

<p>Did it work?</p>

</body>
</html> 
```

作为 HTML 文件，然后在名为的文件中运行以下 PHP 脚本`helloworld.php`

```
<html>
<body>

<?php
echo "hello world";
?>

</body>
</html> 
```

我无法弄清楚为什么两者都不起作用。请帮助我克服这个简单的部分，以便我可以解决困难的部分！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T18:39:45.193

您不能只在网络浏览器中打开文件。您需要在 Web 服务器中运行它。根据您的平台，有

*   [WAMP](http://www.wampserver.com/en/)
*   [MAMP](http://www.mamp.info/en/index.html)
*   [XAMPP](http://www.apachefriends.org/en/xampp.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T18:39:38.283

PHP 不适合在浏览器中执行。它用于在安装了 PHP 的计算机上执行 Web 服务器或其他预处理。

* * *

PHP 安装在计算机上时以多种形式运行：

*   从命令行
*   从网络服务器
*   由 PHP 的 IDE 或 GUI 前端在内部生成

Web 服务器的使用很常见。浏览器要求 Web 服务器检索 somepage.html。网络服务器（如 Apache、IIS 等）检索 somepage.html 并对其进行预处理。如果检测到 PHP 标签，它会调用已安装的 PHP 系统来解析 PHP 标签。任何结果都将替换到正在呈现的网页中。Web 服务器对所有需要预处理的标签重复此过程，然后通过网络将呈现的页面传送到浏览器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T18:42:40.830

PHP 是一种服务器端语言（浏览器不会给它造成问题，**也不会**运行它，因为对 PHP 一无所知！！！）。您必须了解的重要一点是 PHP**生成 HTML**，它不是 HTML 扩展，而是允许您生成 html 页面的东西。

话虽如此，您的代码不起作用，因为您需要 PHP 解释器来解析您的 PHP 代码，然后为您提供通过此代码生成的 html 页面。

正如有人已经说过的那样，wamp 和 xampp 是您想要开始解析 php 代码并将其呈现在网页上的好点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T19:50:24.203

未处理 PHP 的原因可能有很多。但是第一个浏览器不执行 PHP。它是一个服务器端脚本，它是您服务器的业务。浏览器所做的只是解析它正在处理的 HTML。

所以可能的原因可能是：

1.  PHP 未正确安装在您的系统上或服务器未正确安装。PHP 模块未加载到您的 apache 中。
2.  您没有将脚本放在正确的位置。将您的文件放在 /XAMPP/htdocs 中，然后将您的浏览器指向：`http://localhost/my_php_script.php`
3.  扩展名是您的文件而不是 PHP。

如果您已正确完成上述所有操作，请检查您的服务器错误日志。当涉及到 php 时，几乎没有浏览器可以做。您需要检查服务器端的 php.ini 文件。在您尝试上述操作后，请查看您的 php 错误日志。检查您的`phpinfo`并搜索`error_log`并将其设置`display_errors`为`on`. 它可以帮助您解决可能导致错误的原因。

我犯了以上所有错误。所以我假设你可能也做了同样的事情。;)

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-21T18:42:19.753

你的文件的扩展名是什么？而当你查看html文件的源码时，php还在吗？代码需要由预处理器读取，您需要一个网络服务器来执行此操作。

# file - GTK+ 获取文件信息

> ID：11144642
> 
> 赞同：0
> 
> 时间：2012-06-21T18:38:15.147
> 
> 标签：file, gtk

如何从文件的 url 中获取信息？

例如：如果我有文件

```
 char *my_file = /home/user/music.mp3 
```

我该如何检索：

文件标题

艺术家

专辑

年

文件类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:44:02.950

您可以将 libid3tag 用于 MP3 内容。就像是：

```
struct id3_file *id3_file;
struct id3_frame const *frame;
struct id3_tag *tag;
id3_utf8_t *title=NULL;

id3_file = id3_file_open (filename, ID3_FILE_MODE_READONLY);

if (!id3_file)
{
    // fail
    return
}

tag = id3_file_tag (id3_file);
if (!tag) 
{
    // fail
    id3_file_close(id3_file);
    return;
}

/* get tag values */

frame = id3_tag_findframe (tag, ID3_FRAME_TITLE, 0);
if (frame && (field = &frame->fields[1]))
{
        if (id3_field_getnstrings (field) > 0)
        {
                title = id3_ucs4_utf8duplicate (id3_field_getstrings (field, 0));
        }
}

/* ... etc ...*/

id3_file_close (id3_file); 
```

# javascript - 为什么不调用 load() 和 beforeload()？

> ID：11144645
> 
> 赞同：0
> 
> 时间：2012-06-21T18:38:21.043
> 
> 标签：javascript, cordova, touch, extjs

煎茶触摸 2：

这是我的商店定义

```
var incidentsJson = loadJson();

Ext.define("App.store.EventsFeed", {
    extend: "Ext.data.Store",
    requires: ['Ext.data.proxy.JsonP'],

    config: {
            listeners: {
                    beforeload: function() {
                            console.log('before store load');
                            return true;
                    },
                    load: function(store, records) {
                            console.log(' store loaded', records);

                    }
            },
            model: 'App.model.Incident',
            autoLoad: true,
            data: incidentsJson,
            reader: {
                    type: 'json',
            }
    }
}); 
```

数据已加载，但`load()`没有`beforeload()`被调用，这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:21:25.300

前加载必须在“配置”之外。

例子：

```
 var incidentsJson = loadJson();

Ext.define("App.store.EventsFeed", {
    extend: "Ext.data.Store",
    requires: ['Ext.data.proxy.JsonP'],

    listeners: {
          beforeload: function() {
               console.log('before store load');
                return true;
           },
           load: function(store, records) {
                console.log(' store loaded', records);
           }
     },

    config: {
            model: 'App.model.Incident',
            autoLoad: true,
            data: incidentsJson,
            reader: {
                    type: 'json',
            }
    }
}); 
```

# c# - WPF 网格大小调整

> ID：11144652
> 
> 赞同：6
> 
> 时间：2012-06-21T18:38:43.797
> 
> 标签：c#, .net, wpf, xaml, user-interface

这个问题很难简洁地描述，所以请耐心等待。

目前我有一个两行的网格。第一行的高度是Auto，第二行的高度是*，所以当我调整窗口大小时，第二行会根据窗口的大小进行放大和缩小。

这是基本布局：

```
<Window>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border>
            ...
        </Border>
        <Border Grid.Row="2">
            ...
        </Border>
    </Grid>
</Window> 
```

这是现有行为的简略草图：

```
____    ____    ____
     ->      ->
____    ____    ____
                ____
        ____
____ 
```

我想在第二行添加一种“最小高度”，这样当我将窗口调整到足够小时，第二行停止收缩，而第一行开始收缩。

期望的行为：

```
____    ____    ____
     ->      -> ____
____    ____
                ____
        ____
____ 
```

有没有一种简单的方法来获得第二行的最小高度，并强制第一行缩小？

更多细节：

当我在第二行设置 MinHeight 时，当我将其调整到低于该大小时，它只会剪切网格。

第一行中控件的大小在编译时是未知的，但在运行时是已知的。如果它是解决方案的必要部分，我可以设置行的 MaxHeight，但现在自动高度正在工作。

第二行中的控件没有明确的大小。允许调整它们的大小，但我试图防止它们变得小于所需的最小高度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T18:52:54.833

> 第一行中控件的大小在编译时是未知的，但在运行时是已知的。如果它是解决方案的必要部分，我可以设置行的 MaxHeight，但现在自动高度正在工作。

我认为这可能是最简单的解决方案。将 MaxHeight 绑定到运行时的计算值：

```
<Grid.RowDefinitions>
    <RowDefinition Height="*" MaxHeight="{Binding MyProperty}"/>
    <RowDefinition Height="*" MinHeight="100"/>
</Grid.RowDefinitions> 
```

编辑：以前的解决方案很接近，但不正确。这是实现您想要的结果的一种方法，但是，不确定它是否是最佳方法：

```
<Grid ShowGridLines="True" Name="myGrid">
    <Grid.Resources>
        <local:RowHeightConverter x:Key="rowHeightConverter" />
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Name="row1" MaxHeight="{Binding MyProperty}">
            <RowDefinition.Height>
                <MultiBinding Converter="{StaticResource rowHeightConverter}">
                    <Binding Path="ActualHeight" ElementName="row2" />
                    <Binding Path="ActualHeight" ElementName="myGrid" />
                    <Binding Path="MaxHeight" ElementName="row1" />
                </MultiBinding>
            </RowDefinition.Height>
        </RowDefinition>
        <RowDefinition Name="row2" Height="*" MinHeight="300"/>
    </Grid.RowDefinitions>
</Grid> 
```

还有你的转换器：

```
public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    double row2Height = (double)values[0];
    double gridHeight = (double)values[1];
    double row1MaxHeight = (double)values[2];

    if (gridHeight - row2Height >= row1MaxHeight)
    {
        return gridHeight - row2Height;
    }

    return row1MaxHeight;
} 
```

# javascript - 没有 href="#" 的脚本链接

> ID：11144653
> 
> 赞同：57
> 
> 时间：2012-06-21T18:38:51.210
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-21T19:04:57.910

## `<a>`代表锚

如果您`[href]`在元素上包含该属性`<a>`，则它是指向某个位置的锚点，这意味着您可以转到新页面、当前页面的特定片段（因此`#`称为片段标识符）或特定的新页面的片段。

`<a>`历史上没有属性的元素`[href]`被分配了一个`[name]`属性，该属性可以用作片段标识符的目的地。浏览器后来添加了对链接到任何项目`[id]`属性的支持，现在这是链接到文档片段的首选方法。

## 这对独立`<a>`元素意味着什么？

`a[href]`元素是一个链接*（*这就是它们`:link`在 css 中匹配的原因）。*链接*是可点击的。[否则，没有该属性的`a`元素`[href]`只是可能放置链接的位置的占位符](https://www.w3.org/TR/html5/single-page.html#the-a-element)，并且不可点击，也不在页面的跳位顺序中。

如果您希望您的链接可通过键盘导航，这对于可访问性 ( [WAI-ARIA](http://www.w3.org/WAI/intro/aria.php) ) 很重要，您需要执行以下操作之一：

*   将元素更改为`<button type="button">`
*   保留`[href]`属性
*   添加`[tabindex="0"]`和其中之一`[role="button"]`或`[role="link"]`（可能还有一些样式）

有关该`[role]`属性的更多信息，请参阅[WAI-ARIA 文档](http://www.w3.org/TR/wai-aria/)[的角色模型部分](http://www.w3.org/TR/wai-aria/roles)。

## 更改标记

如果您没有理由保留该`[href]`属性，则不妨使用一个`<button>`元素：

```
<button type="button">
        ^^^^^^^^^^^^^ 
```

该`[type]`属性用于使元素成为通用按钮，否则`<button>`将默认为`[type="submit"]`，这可能是不可取的，因为它可能会触发表单提交。

如果您不能使用 a `<button>`（通常发生在内部标记必须包含 a 时`<div>`），您可以使用以下方法伪造 a `<button>`：

```
<div role="button" tabindex="0">Some clickable text</div> 
```

您需要侦听 和 的事件并`keypress`触发`click`事件。`Enter``Space`

## 保留标记

如果您要保留`<a>`元素及其`[href]`属性，则它的值有多种选择。

### 真实链接

前任

*   `<a href="/some/location/for/users/without/js">`
*   `<a href="#document-fragment">`

如果您需要为禁用 JS 的用户提供支持，您不妨将他们引导到在没有 JS 的情况下执行等效功能的页面。

通过扩展，这还包括提供文档片段链接以链接到同一文档中的内容。例如，可切换区域可以标记为：

```
<a href="#more" class="toggleable">Read More</a>
<div id="more">Lorem ipsum dolor sit amet</div> 
```

这样使用 JS 可以折叠和扩展区域，而没有 JS 链接会将用户带到页面上的适当内容。

### 一个无用的href

前任

*   `<a href="#">`
*   `<a href="javascript:void(0)">`
*   `<a href="about:blank">`

如果您在 JavaScript 中阻止默认行为，并且不支持禁用 JS 的用户，则可以使用“dud”href 值将链接保持在跳动顺序并自动启用`Enter`以触发`click`事件。您*应该*`[role="button"]`在语义上添加`<a>`标签不再用作链接，而是用作按钮。

```
<a href="#" role="button">Some clickable text</a> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-21T18:49:55.970

就我个人而言，我更喜欢使用`href="javascript:void(null);"`, 为浏览器提供一个不会弄乱哈希的任何其他使用的 href。

我注意到无 href 链接的唯一区别是浏览器默认不会给它们加下划线，所以只需添加该样式就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-05T18:42:02.157

我正在为 React 实现一个 HTML、CSS、JS 模板，这行代码非常适合我：

```
<a href={() => false}> Link </a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-07T05:17:57.823

我对 react js 也有同样的问题。

```
Line 273:  Links must not point to "#". Use a more descriptive href or use a button instead  jsx-a11y/href-no-hash 
```

像这样删除我使用的错误

前 ：

```
 <a 
      href="#"
      className="banner-signup signup-btn envy-font-sans-bold"
      onClick={(e) => this.gonext()}
    >
     NEXT
    </a> 
```

在 href="#" 的地方使用了 href="#/"

```
 <a 
      href="#/"
      className="banner-signup signup-btn envy-font-sans-bold"
      onClick={(e) => this.gonext()}
    >
     NEXT
    </a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-26T06:22:32.783

在 html 中使用

```
<a id="calendar" href="javascript:void(0)">
        <div class="icon-w">
          <div class="fa fa-calendar"></div>
        </div>
     <span>Calendar</span>
</a> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-21T18:48:00.370

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-04-30T16:19:57.693

我遇到了这个问题，特别需要一个手风琴标题，`<a>`以便它可以被标记但不能被点击。如果没有href，这将无法工作，因此我将id 文本放在href 中的“#”之后，它似乎可以工作。它使链接可用于选项卡，但无法单击。

`<a href="#${accordionGroup.id}"> Title </a>`

输出为：

`<a href="#acc234923"> Title </a>`

# jsp - fileupload jsp 不能传递额外的表单属性

> ID：11144657
> 
> 赞同：0
> 
> 时间：2012-06-21T18:39:20.060
> 
> 标签：jsp

我在jsp中有以下内容：

```
<form action="/ucReady2/uploadservlet" method="post"
        enctype="multipart/form-data">
        <label for="filename_1">File: </label> <input class="wfs_button"
            id="filename_1" type="file" name="filename_1" size="50" /> <input
            type="input" name="rowindex" value="<%=rowIndexObj%>" /><input
            class="wfs_button" type="submit" value="Upload File" />
</form> 
```

在 uploadservlet 中，我有：

```
String attribute = request.getParameter("rowindex"); 
```

该属性始终为空！。在我提交表单之前，输入字段本身就有一个值。servlet 无法读取此值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:35:53.283

好的。我从文件上传网站找到了解决方案：

```
if (item.isFormField()) {
  if ("rowindex".equalsIgnoreCase(item.getFieldName())) {
     attribute = item.getString();
   }
} 
```

# slickgrid - SlickGrid 中的批量编辑（填充/粘贴范围/多行编辑）

> ID：11144664
> 
> 赞同：3
> 
> 时间：2012-06-21T18:39:47.810
> 
> 标签：slickgrid

我试图弄清楚如何向 SlickGrid 添加“批量编辑”，即同时编辑多个单元格。[我在SlickGrid 示例页面](https://github.com/mleibman/SlickGrid/wiki/Examples)上没有看到任何示例。我认为我想要实现的 UI 有三个不错的选择（按优先顺序）：

1.  类似 Excel 的“填写”功能。我几乎没有在我发现的所有类似网格/电子表格的小部件中看到这一点，除了在[jquery-handsontable](http://handsontable.com/)中，它被称为“Drag-down”。粘贴过程中的一些智能，可以为每个单元格自动增加数字，这将是非常棒的。

2.  复制单个单元格，然后选择一个范围并将该单个单元格粘贴到该范围内。然后，这应该将该单个单元格的内容粘贴到所选范围内的每个单元格中。

3.  选择一系列单元格，然后编辑其中一个。当用户编辑一个单元格时，范围内的所有单元格都应该更新为用户输入的值。

我是一个相对的 JavaScript（和 SlickGrid）新手，所以我很想在 JavaScript 代码方面提供一些帮助来做到这一点。复制一个单元格并将其粘贴到一个范围内（选项 2）似乎并不难，但我不知道如何开始执行填充。任何帮助都会非常受欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-06T07:57:50.550

我为 SlickGrid 创建了一个小插件来进行下拉。

它在[这里](https://github.com/danny-sg/slickgrid-spreadsheet-plugins)可用。

添加插件后，您可以连接到一个事件 onFillUpDown，它会告诉您填充的范围。使用它，您可以做您喜欢的事情、复制值或包含排序逻辑。有一个在[这里](http://danny-sg.github.io/slickgrid-spreadsheet-plugins/examples/example-2-everything.htm)工作的例子（更新的链接）。

# javascript - 为什么在 Javascript 中 Number([]) === 0 和 Number({}) === NaN？

> ID：11144666
> 
> 赞同：12
> 
> 时间：2012-06-21T18:39:53.690
> 
> 标签：javascript

我正在查看[http://zero.milosz.ca/](http://zero.milosz.ca/)上的第一个表，并想了解原因，例如，`0 == []`和`0 != {}`。我假设这是因为`Number([]) == 0`和`Number({}) == NaN`。但是，这部分似乎是任意的。为什么空列表`0`和空对象 a `NaN`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T18:43:45.497

Using`Number(some_object)`将使用给定对象的字符串表示。对于您的示例，字符串表示形式为：

```
js> ({}).toString();
[object Object]
js> [].toString();

js> 
```

字符串`'[object Object]'`不能转换为数字，但空字符串`''`可以。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-21T18:50:20.993

为了详细说明 ThiefMaster 的回答，我查看了 ECMAScript 的[规范](http://ecma-international.org/ecma-262/5.1/#sec-9.3.1)：

将字符串转换为数字时，使用语法进行转换。特别是， 的数学值`StringNumericLiteral ::: [empty]`被定义为 0。事实上，对于任何空白，它都是 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T09:12:56.960

当一个值是对象 ([],{}) 而另一个是数字或字符串时，运算符 == 使用所有对象所在的内置转换方法将对象转换为原始值（在这种情况下为数字） Javascript 继承：*toString()*和*valueOf()*。

对于像 {} 这样的通用对象，使用*valueOf*，默认情况下它返回对象本身，即 != 0。

对于内置数组，使用*toString*。应用于数组的此方法返回一个字符串，其中包含用逗号连接的所有元素。对于空数组，它返回一个空字符串，''。

然后解释器将*valueOf*应用于该字符串；该方法对空字符串的返回值为 0，因此 [] == 0。

# events - 使用 Dojo 解除事件绑定

> ID：11144669
> 
> 赞同：2
> 
> 时间：2012-06-21T18:39:57.637
> 
> 标签：events, binding, dojo

我使用 .on() 来绑定 Dojo 中的 keydown 事件。事件触发后，我需要取消绑定事件，但似乎没有任何效果。他们的文档说该事件返回一个具有 .remove() 方法的对象，但我终其一生都无法弄清楚如何访问或应用此方法。

任何帮助将不胜感激。

谢谢！

```
 query('#video-topics-input').on('keydown',function(e){
        topicsDrop.keyDownFunc(e, e.keyCode);
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:56:41.177

dojo.on 返回一个事件句柄，该句柄具有上述 .remove 函数以取消绑定侦听器。但是，在您的情况下，您使用的是在 dojo.NodeList 上运行的链式 dojo.query。

这基本上意味着您必须考虑数组，上面的示例将返回一个包含一个条目的数组 - 因为选择器是一个 ID。

绑定事件监听器：

```
var eventHandles = query('#video-topics-input').on('keydown',function(e){
        topicsDrop.keyDownFunc(e, e.keyCode);
}); 
```

并取消绑定这些：

```
eventHandles.forEach(function(handle) { handle.remove() }); 
```

一种更有效的方法是不使用查询来查找 byId

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:17:46.423

有几件事要添加到@mschr 的答案中

正如他所提到的，如果您通过 id 查找，您可能应该使用返回单个 domNode`dojo/dom`的函数。`byid`如果你这样做，你还可以利用`dojo/on`'`once`函数，[它完全按照它所说](http://livedocs.dojotoolkit.org/dojo/on#once-function)的去做——它会触发事件处理程序一次然后断开它。

```
require(['dojo/dom','dojo/on',function(dom,on){
  var node = dom.byId('video-topics-input');
  on.once(node, 'keydown',function(e){
    //some event handler that should only be fired once.
  });
}); 
```

# android - 如何使用 Bing Maps for Android API/SDK

> ID：11144673
> 
> 赞同：1
> 
> 时间：2012-06-21T18:40:31.060
> 
> 标签：android, sdk, apk, bing-maps

我已经开始浏览 Bing Maps for Android API/SDK，并且我相当确定我已经准备好使用 Bing Maps 开始一个新项目。我已经从[这里](http://bingmapsandroidsdk.codeplex.com/)下载了 SDK ，但我不太确定如何使用它开始一个新项目。

我尝试将 SDK 导出为 .jar 文件并将其添加到我的新项目中，但我遇到了与 SDK 资源冲突的错误。有没有其他方法可以使用 SDK，或者每次我想使用 Bing Maps for Android 时我必须有多个 SDK 副本才能修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:50:59.570

通过转到 Project Properties > Android 并选中“Is Library”将其创建为库项目。

# emacs - 跳出交流块的快捷方式

> ID：11144676
> 
> 赞同：3
> 
> 时间：2012-06-21T18:40:36.113
> 
> 标签：emacs

我正在寻找一个 emacs 快捷方式/命令来跳出 c/c++ 块。例如

```
int func(int a, int b)
{
    if (a == b) {
        cout << "Equal" << endl; // <-- I am here
    }
    // <-- I want to get here        
} 
```

我想将此键盘快捷键与 yasnippet 结合使用，以便在 if 语句之后跳出块。理想情况下，移动命令会跳过成对的大括号并忽略注释中的大括号。

我找到了跳出功能的CM e，但我只想跳出块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:12:25.233

你试过了吗`M-x up-list`，它也有一个模拟，`M-x backward-up-list`. 我不相信两者都有默认绑定。

# css - 我在哪里可以下载 jQueryMobile 主题

> ID：11144682
> 
> 赞同：10
> 
> 时间：2012-06-21T18:40:50.330
> 
> 标签：css, jquery-mobile, styles, themes

jQueryMobile 默认主题是可以的，我知道我们可以使用主题滚轮来改变自己。但是有没有可以从列表/库中下载自定义主题的地方？

我不喜欢标题栏上的 18x18 px 微图像，并且想要更多开放和粗体的图标。此外，图标应该在高分辨率屏幕上运行良好。

如果色板和主题不错，也可以购买，但如果 github 上有不错的，那就太好了！

例如，这很好：[http ://taitems.github.com/iOS-Inspired-jQuery-Mobile-Theme/](http://taitems.github.com/iOS-Inspired-jQuery-Mobile-Theme/)

更多示例：

[https://github.com/jjoe64/jquery-mobile-android-theme](https://github.com/jjoe64/jquery-mobile-android-theme) [http://www.andymatthews.net/read/2012/02/13/New-jQuery-Mobile-theme:-Twitter-Bootstrap](http://www.andymatthews.net/read/2012/02/13/New-jQuery-Mobile-theme:-Twitter-Bootstrap)

谢谢你。

米

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T09:43:35.523

有一个名为 Graphite For jQuery Mobile 1.3.1 的新主题生成器。在这里你可以看到它：

[Graphite - jQuery Mobile 的主题包和生成器](http://driftyco.github.io/graphite/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T09:13:40.820

我喜欢这个：

[http://nativedroid.godesign.ch/](http://nativedroid.godesign.ch/)

您可以轻松自定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T22:33:29.650

我自己创建的，这是一个链接...

[http://jquerymobile.com/themeroller/?ver=1.1.0&style_id=20120622-116](http://jquerymobile.com/themeroller/?ver=1.1.0&style_id=20120622-116)

干杯，

米

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:42:26.233

好吧，你总是可以自己动手

*   [http://jquerymobile.com/themeroller/](http://jquerymobile.com/themeroller/)

搜索谷歌我找到了这些，但不确定它们是否好

*   [http://www.jquery4u.com/mobile/10-free-jquery-mobile-themes/](http://www.jquery4u.com/mobile/10-free-jquery-mobile-themes/)

# sql - 如何在 SQL Server 中透视存储过程的结果

> ID：11144683
> 
> 赞同：0
> 
> 时间：2012-06-21T18:40:58.117
> 
> 标签：sql, sql-server, stored-procedures, pivot, unpivot

我有一个存储过程，它以以下格式返回数据：

```
Date  |  Unit A Count  |  Unit B Count  |  Unit C Count
2010  |         335    |          52    |         540
2011  |         384    |          70    |         556
2012  |         145    |          54    |         345 
```

这个存储过程在内部调用了另一个存储过程，所以我不能再次嵌套它。
我所追求的是一种旋转上述输出的方法，它看起来像这样：

```
 |  2010  |  2011  |  2012
Unit A Count  |   335  |   384  |   145
Unit B Count  |    52  |    70  |    54
Unit C Count  |   540  |   556  |   345 
```

编辑：使用 3 个参数调用 StorProc，我确实需要保留原始输出。

有任何想法吗？

我正在使用 SQL Server 2005、Visual Studio 2008、C#，输出将转到 .aspx 页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:53:45.393

如果要转换存储过程的结果，则需要使用[UNPIVOT 和 PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)来获得最终产品：

查看[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1a896/1)

```
select *
from 
(
    select date, value, unit
    from 
    (
        select *
        from t1
    ) x
    unpivot ([value] for unit in ([unita], [unitb], [unitc])) u
) a
pivot
(
    sum(value)
    for date in ([2010], [2011], [2012])
) p 
```

您想在存储过程中转换这些值，然后您必须发布完整的查询以便我们可以看到它。

# ruby-on-rails-3 - 将 Rails 2.3.5 路由升级到 3.2.6 路由

> ID：11144685
> 
> 赞同：3
> 
> 时间：2012-06-21T18:41:28.780
> 
> 标签：ruby-on-rails-3

我刚刚完成从 rails 2.3.5 到 rails 3.2.6 的升级，我在 Windows 上使用 ruby​​ 1.8.7 并且我当前的路由不再有效。有人可以指导我了解 3.2.6 的新格式吗，我对 match 的工作方式有点困惑。

```
ActionController::Routing::Routes.draw do |map|
  map.resources :uom_conversions
  map.connect 'delete_old_data/delete_data', :controller => "items", :action => "delete_data"
  map.connect 'delete_old_data', :controller => "items", :action => "delete_old_data"
  map.connect 'pricelist_import', :controller => "items", :action => "pricelist_import"
  map.connect 'pricelist_import/match_pricelist_columns', :controller => "items", :action => "match_pricelist_columns"
  map.connect 'commit_pricelist', :controller => "items", :action => "commit_pricelist"
  map.connect 'pricelist_tool', :controller => "items", :action => "pricelist_tool"
  map.connect 'cross_reference_import', :controller => "items", :action => "cross_reference_import"
  map.connect 'commit_cross_references', :controller => "items", :action => "commit_cross_references"
  map.connect 'import_file/commit_import', :controller => "items", :action => "commit_import"
  map.connect 'import_file', :controller => "items", :action => "import_file"
  map.connect 'import_file/match_columns', :controller => "items", :action => "match_columns"
  map.connect 'set_default_matches', :controller => "items", :action => "set_default_matches"
  map.connect 'save_default_matches', :controller => "items", :action => "save_default_matches"
  map.connect 'search', :controller => "items", :action => "search"
  map.connect 'search/import_search_file', :controller => "items", :action => "import_search_file"
  map.connect 'search/import_search_file/pick_search_column', :controller => "items", :action => "pick_search_column"
  map.connect 'items/create_uom', :controller => "items", :action => "create_uom"
  map.connect 'items/remove_uom/:uom_id', :controller => "items", :action => "remove_uom"
  map.connect 'items/show_cross_references/:id', :controller => "items", :action => "show_cross_references"

  map.resources :items

  map.resources :vendors

  map.resources :manufacturers

  map.resources :sub_categories

  map.resources :categories

  map.resources :hospitals

  map.resources :ministry_organizations

  map.resources :agreements

  map.connect 'users/change_password', :controller => "users", :action => "change_password"
  map.connect 'users/update_password', :controller => "users", :action => "update_password"
  map.resources :users

  map.logout '/logout', :controller => 'login', :action => 'logout'
  map.logout '/switch_admin', :controller => 'login', :action => 'switch_admin' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T02:31:27.283

`map.resources :items`变成`resources :items`

所有符合此格式的行：

```
map.connect 'delete_old_data/delete_data', :controller => "items", :action => "delete_data" 
```

变得

```
match 'delete_old_data/delete_data', :to => "items#delete_data" 
```

这：

```
map.logout '/logout', :controller => 'login', :action => 'logout' 
```

会成为

```
match "/logout", :to => "login#logout", :as => :logout 
```

# pyparsing - 将命名组添加到 pyparsing 正则表达式逆变器

> ID：11144688
> 
> 赞同：2
> 
> 时间：2012-06-21T18:41:33.533
> 
> 标签：pyparsing

希望保罗·麦奎尔能发现这一点并救我……

我已经抓住了“正则表达式逆变器”示例脚本[http://pyparsing.wikispaces.com/file/view/invRegex.py](http://pyparsing.wikispaces.com/file/view/invRegex.py)

我正在尝试破解对 python 命名组的支持，例如`(?P<blob_key>[a-zA-Z0-9-_=]+)`

我是 pyparsing 的新手，我意识到正则表达式解析器可能不是最好的学习方式（我只是想用结果做一些实际的事情）。

我已经编辑了解析器函数，如下所示：

```
def parser():
    global _parser
    if _parser is None:
        lbrack = Literal("[")
        rbrack = Literal("]")
        lbrace = Literal("{")
        rbrace = Literal("}")
        lparen = Literal("(")
        rparen = Literal(")")
        pyspec = Literal("?P")
        langle = Literal("<")
        rangle = Literal(">")

        reMacro = Combine("\\" + oneOf(list("dws")))
        escapedChar = ~reMacro + Combine("\\" + oneOf(list(printables)))
        reLiteralChar = "".join(c for c in printables if c not in r"\[]{}().*?+|")

        reRange = Combine(lbrack + SkipTo(rbrack,ignore=escapedChar) + rbrack)
        reLiteral = ( escapedChar | oneOf(list(reLiteralChar)) )
        reDot = Literal(".")
        repetition = (
            ( lbrace + Word(nums).setResultsName("count") + rbrace ) |
            ( lbrace + Word(nums).setResultsName("minCount")+","+ Word(nums).setResultsName("maxCount") + rbrace ) |
            oneOf(list("*+?")) 
            )

        reNamedGroup = Combine(lparen + pyspec + langle + SkipTo(rangle) + rangle
                               + SkipTo(rparen, include=True) + rparen)

        reNamedGroup.setParseAction(handleNamedGroup)
        reRange.setParseAction(handleRange)
        reLiteral.setParseAction(handleLiteral)
        reMacro.setParseAction(handleMacro)
        reDot.setParseAction(handleDot)

        reTerm = ( reLiteral | reNamedGroup | reRange | reMacro | reDot )
        reExpr = operatorPrecedence( reTerm,
            [
            (repetition, 1, opAssoc.LEFT, handleRepetition),
            (None, 2, opAssoc.LEFT, handleSequence),
            (Suppress('|'), 2, opAssoc.LEFT, handleAlternative),
            ]
        )
        _parser = reExpr

    return _parser 
```

当我对我的测试正则表达式运行它时，`reNamedGroup`似乎正确地找到并处理了命名组（我坚持了一些登录`SkipTo`和其他方法......）但同时它似乎根本不参与输出，我的`handleNamedGroup`函数永远不会被调用。

日志输出如下所示：

```
invert(r'serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/')
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 12
DEBUG:root: *** 15, A-Z
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 12
DEBUG:root: *** 15, A-Z
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 24
DEBUG:root: *** 32, blob_key
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 33
DEBUG:root: * 49, [')'], [a-zA-Z0-9-_=]+
DEBUG:root: ** ['[a-zA-Z0-9-_=]+', ')']
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 24
DEBUG:root: *** 32, blob_key
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 33
DEBUG:root: * 49, [')'], [a-zA-Z0-9-_=]+
DEBUG:root: ** ['[a-zA-Z0-9-_=]+', ')']
DEBUG:root: handleLiteral: ['s']
DEBUG:root: handleLiteral: ['e']
DEBUG:root: handleLiteral: ['r']
DEBUG:root: handleLiteral: ['v']
DEBUG:root: handleLiteral: ['e']
DEBUG:root: handleLiteral: ['_']
DEBUG:root: handleLiteral: ['b']
DEBUG:root: handleLiteral: ['l']
DEBUG:root: handleLiteral: ['o']
DEBUG:root: handleLiteral: ['b']
DEBUG:root: handleLiteral: ['/']
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 12
DEBUG:root: *** 15, A-Z
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 12
DEBUG:root: *** 15, A-Z
DEBUG:root: handleRange: ['[A-Z]']
DEBUG:root: handleRepetition: [[[ABCDEFGHIJKLMNOPQRSTUVWXYZ], '{', '2', '}']]
DEBUG:root: handleLiteral: ['/']
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 24
DEBUG:root: *** 32, blob_key
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 33
DEBUG:root: * 49, [')'], [a-zA-Z0-9-_=]+
DEBUG:root: ** ['[a-zA-Z0-9-_=]+', ')']
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 24
DEBUG:root: *** 32, blob_key
DEBUG:root: serve_blob/[A-Z]{2}/(?P<blob_key>[a-zA-Z0-9-_=]+)/, 33
DEBUG:root: * 49, [')'], [a-zA-Z0-9-_=]+
DEBUG:root: ** ['[a-zA-Z0-9-_=]+', ')']
DEBUG:root: handleSequence: [[Lit:s, Lit:e, Lit:r, Lit:v, Lit:e, Lit:_, Lit:b, Lit:l, Lit:o, Lit:b, Lit:/, <libs.exreg.exreg.GroupEmitter object at 0x34cfa30>, Lit:/]] 
```

以 ** 为前缀的行是`skipRes`从 ...返回的值，`SkipTo`对我来说它看起来是正确的。我被难住的部分是为什么他们被忽略了。

我敏锐地意识到我只是在盲目地复制和粘贴东西......我试图密切复制有用的东西`reRange`......但是范围有效，而我的类似位则没有。

我猜可能周围的括号在解析的某个后期阶段从输出中“隐藏”解析的命名组，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:20:20.010

您不想对 reNamedGroup 表达式中的括号做任何事情。请注意，括号中的 re 组没有其他定义的语法，但它们绝对有效。在此解析器中，括号作为 operatorPrecedence 表达式的一部分进行处理。刚刚将您对 reNamedGroup 的定义更改为：

```
reNamedGroup = pyspec + langle + SkipTo(rangle) + rangle 
```

并让 operatorPrecedence 处理所有的paren分组。

**[由 OP 编辑​​]**
上述更改仅是一种工作，但命名组的所有输出都以任何一个开头，或者`P`该`?`部分`pyspec`以某种方式泄漏到输出中。最后我不需要以堆栈形式重写（见评论），以下附加更改使其正常工作：

```
reTerm = ( reLiteral | reRange | reMacro | reDot )
reExpr = operatorPrecedence( reTerm,
    [
    (reNamedGroup.suppress(), 1, opAssoc.RIGHT, handleNamedGroup),
    (repetition, 1, opAssoc.LEFT, handleRepetition),
    (None, 2, opAssoc.LEFT, handleSequence),
    (Suppress('|'), 2, opAssoc.LEFT, handleAlternative),
    ]
) 
```

# mobile-safari - 元视口地狱

> ID：11144689
> 
> 赞同：1
> 
> 时间：2012-06-21T18:41:39.143
> 
> 标签：mobile-safari, media-queries, viewport, compass-sass, device-orientation

我设计了一个响应式网站并使用 Compass Susy 构建了一个原型。

我在 iPad 和 iPhone 上的 Mobile Safari 上遇到的问题是，当我以纵向模式加载网站，然后旋转到横向时，整个布局可能会向右跳 30%（它还会放大缩放以适应480 像素横向宽度）。

我已经尝试了几件事，我注意到将元视口标签从更改 `<meta content="width=device-width, initial-scale=1" name="viewport">`为 `<meta content="width=device-width" name="viewport">`（删除初始比例）不会发生跳转。

但是，如果没有该属性，我的手机布局太小，即使在最初的纵向视图中也是如此。在两个方向上，它都与右边的排水沟齐平。

我已经尝试扩大 Susy 网格中的列，虽然它明显使其他平台上的布局更宽，但在手机上仍然会缩小以显示右侧的排水沟。所以这是某种视口问题。

使用初始比例设置，在 Android 上它适合，在旋转到横向时它不会跳跃，但保持 320 像素（左右边距）。

我需要在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T18:59:31.233

我会尽量不要太含糊，不知道你的 html 的结构是如何设置的......但你可以尝试以下步骤，让我知道它是否有效：

1.  使用提供的代码 Lokase，但删除“user-scalable=0”部分。
2.  将标签中的所有内容包装在两个空白 div 中。第一个给“id='x'”，第二个给“class='resizer'”。最后不要忘记你的标签。
3.  将以下内容添加到样式表中： div:firstchild div.resizer { width:100% } #x {display:block}

这应该以视口宽度加载文档，但仍为用户提供可伸缩性。

这是一种拙劣的工作，但它在我最近为客户做的一个移动网站上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:49:16.390

尝试这个：

```
<meta name="HandheldFriendly"   content="True">
<meta name="MobileOptimized"    content="320">
<meta name="viewport"           content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
```

# permutation - 以下排列系列 nP0 + nP1 + nP2 .... nPn 的总和是多少？

> ID：11144692
> 
> 赞同：2
> 
> 时间：2012-06-21T18:41:49.037
> 
> 标签：permutation, series

以下排列序列的总和是多少：

```
nP0 + nP1 + nP2 .... nPn? 
```

我知道

```
nC0 + nC1 + ... + nCn = 2^n 
```

但不是为了排列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:01:17.763

It is the largest integer less than *e* times *n*!

# java - 设置 Selenium 网格节点

> ID：11144694
> 
> 赞同：3
> 
> 时间：2012-06-21T18:41:51.543
> 
> 标签：java, selenium, selenium-grid

我设置了一个运行本地节点的 Selenium Grid 集线器。我正在使用Windows 7。

我使用以下命令在命令提示符下启动它：

```
java -jar selenium-server-standalone-2.22.0.jar -role node  -hub http://localhost:4444/grid/register 
```

我有许多虚拟机都运行不同版本的 Windows。我可以使用远程桌面连接访问所有这些。

我怎样才能让他们注册为网格上的节点？

我是否也必须在这些程序上安装任何硒程序？

PS它们都与我的本地机器具有相同的IP地址（不知道这是否有所不同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:23:13.707

Selenium 网格（2.0 及更高版本）以传统方式工作，通过拥有一个中央服务器，客户端连接到该中央服务器以等待请求。服务器（集线器）管理传入的作业并将作业移交给满足运行时要求（所需的浏览器、所需的操作系统等）的客户端（节点），您所拥有的 jar 文件就是您开始所需的一切。

首先，在将处理所有传入请求的机器上执行集线器角色中的 jar

```
java -jar selenium-server-standalone-2.22.0.jar -hub 
```

之后，跳出所有机器（在您的情况下是所有虚拟机）并启动与客户端相同的 jar

```
java -jar selenium-server-standalone-2.22.0.jar -role node  -hub http://[hostname]:4444/grid/register 
```

注意括号中的主机名。将此行替换为运行集线器的机器名称。如果您不确定您的机器的名称是什么，只需`hostname`从命令行输入。

您可以使用其他选项，但这应该足以在您的环境中设置基本网格。

有关详细信息，请参阅[官方文档](http://seleniumhq.org/docs/07_selenium_grid.html)。

# javascript - Facebook：有没有比 Like Button Event 更快的替代方案？

> ID：11144696
> 
> 赞同：0
> 
> 时间：2012-06-21T18:42:05.933
> 
> 标签：javascript, jquery, facebook, dom, facebook-like

我正在寻找一种更快的替代方法，以了解何时有人在我的网站上点击了“赞”按钮。目前我正在使用 Event.subscribe('edge.create') 来获得通知，但响应是在用户点击 Like 按钮后大约 3-4 秒发送的。

有没有人有更快（最好是即时）解决方案的想法？

我注意到，当我点击按钮时，评论框会弹出到点赞按钮下方，因此也许有一种方法可以将其用作事件的触发器。

显然，按钮位于 iFrame 中的事实是这里最具挑战性的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:01:24.063

> 显然，按钮位于 iFrame 中的事实是这里最具挑战性的问题。

这不是一个*具有挑战性*的问题——这是一个不会让你做**任何事情**的问题。

*同源策略*会阻止您与脚本中的 iframe 内容进行交互。Facebook 在后台进行一些跨域通信……这就是**为什么**在您注册的事件触发之前需要一些时间的原因。

我没有看到任何解决方法，抱歉。

# command-line - 实时发送新的电子邮件窗口 - 从命令行

> ID：11144697
> 
> 赞同：1
> 
> 时间：2012-06-21T18:42:08.867
> 
> 标签：command-line, batch-file, mailto, windows-live

我已阅读[本指南](http://email.about.com/od/outlookexpresshacks/qt/Command_Line_Mail_in_Windows_Live_Mail_or_Outlook_Express.htm)，以便直接使用 Windows Live Mail 从批处理文件创建新电子邮件，但双引号有问题。

这是我的批处理文件：

```
@echo off
"C:\Program Files\Windows Live\Mail\wlmail" /mailurl:mailto:"mymail@gmail.com?subject=blabla&body=Hi there"
exit 
```

这在 WLM 窗口中为我提供了以下结果：

> 至：“mymail@gmail.com
> 
> 主题：blabla
> 
> 身体：你好”

我有一个问题：

*   双引号出现在收件人之前和正文的末尾。

我试过：

```
"C:\Program Files\Windows Live\Mail\wlmail"
  /mailurl:mailto:mymail@gmail.com?subject=blabla&body=Hithere 
```

> 至：mymail@gmail.com
> 
> 主题：blabla
> 
> 正文：（空）

或者：

```
"C:\Program Files\Windows Live\Mail\wlmail"
  /mailurl:mailto:"mymail@gmail.com?subject=blabla&body=Hi there 
```

> 至：“mymail@gmail.com
> 
> 主题：blabla
> 
> 身体：你好

任何帮助，将不胜感激！

PS：这家伙的“Mailto URL Encoder”让事情变得更糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:27:42.313

我不使用 Windows Mail 或任何 Microsoft 邮件程序，但我想这应该适合你。

```
"C:\Program Files\Windows Live\Mail\wlmail" 
     /mailurl:mailto:mymail@gmail.com?subject=blabla^&body=Hithere 
```

由于您的示例看起来很正确，但是`&`之前`body=`会将命令行分成两部分，现在插入符号`^`将其转义，因此主体应该可见。

# c# - 从外部文件加载元素

> ID：11144699
> 
> 赞同：2
> 
> 时间：2012-06-21T18:42:18.223
> 
> 标签：c#, wpf, xamlreader

我想从外部文件加载 WPF 元素。示例我有一个`brush.xaml`这样的文件：

```
<SolidColorBrush>Black</SolidColorBrush> 
```

我想在我的代码中加载这个画笔：

```
using(FileStream stream = new FileStream("brush.xaml"))
  Brush myBrush = XamlReader.Load(stream) as Brush; 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:20:52.677

您的代码是正确的，但在 xaml 文件中使用：

```
<SolidColorBrush xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
   #FF0000
</SolidColorBrush> 
```

用十六进制格式。无论如何，如果您有任何疑问，可以使用[`XamlWriter`](http://msdn.microsoft.com/it-it/library/system.windows.markup.xamlwriter).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:44:37.500

而不是通过解析 XAML 来加载它。将这些元素放在资源字典中。您可以在 XAML 和 C# 中引用这些资源。

欲了解更多信息：

[http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/creating-and-sumption-resource-dictionaries-in-wpf-and-silverlight.aspx](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/03/creating-and-consuming-resource-dictionaries-in-wpf-and-silverlight.aspx)

[http://www.codeproject.com/Articles/35346/Using-a-Resource-Dictionary-in-WPF](http://www.codeproject.com/Articles/35346/Using-a-Resource-Dictionary-in-WPF)

[从 WPF UserControl 访问 ResourceDictionary](https://stackoverflow.com/questions/940879/accessing-resourcedictionary-from-wpf-usercontrol)

# jquery - jQuery、next() 或 prev() 或其他我不知道的？

> ID：11144702
> 
> 赞同：0
> 
> 时间：2012-06-21T18:42:20.843
> 
> 标签：jquery, html

我有这个列表，我想在点击链接时从 jquery 中选择 li 元素

```
<ul>
    <li><a class="accordion" href="#">1</a></li>    
    <li><a class="accordion" href="#">2</a></li>    
    <li><a class="accordion" href="#">3</a></li>    
    <li><a class="accordion" href="#">4</a></li>    
    <li><a class="accordion" href="#">5</a></li>    
    <li><a class="accordion" href="#">6</a></li>    
</ul> 
```

我写这个jQuery代码

```
 $('a.accordion').click(function() {
      var href = $(this).attr("href");
      div = $('<div/>', {
         id: 'intotheli',
         style: {width:200}
      });
      //console.log(div);

      // loading content  with ajax custom function  
      div.html( loadcontent(div,$(this).attr("href"))); 
      // on this point i want find the li tag that contain the clicked link
      div.slideDown('slow').appendTo($(this));                  

      return false;
}); 
```

我已经尝试使用 $(this) 中的 .next() 和 prev() 但我没有解决我的问题（也许我用错了）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:52:43.053

因为看起来你是新手，所以我将如何重写它：

```
<ul class="accordion">
    <li><a href="#">1</a></li>    
    <li><a href="#">2</a></li>    
    <li><a href="#">3</a></li>    
    <li><a href="#">4</a></li>    
    <li><a href="#">5</a></li>    
    <li><a href="#">6</a></li>    
</ul> 
```

这使得标记更小更整洁。

然后代替：

```
$('a.accordion').click(function() { 
```

我会使用：

```
$('.accordion').on("click", "a", function() { 
```

这意味着只绑定了一个事件处理程序，而不是 6 个，这稍微加快了速度，但同样只是保持简单。此更改仅适用于我的新标记。

您的其余代码将按原样工作，`$(this)`仍然指单击的链接。

要获取 所在的`li`元素`a`，请使用`$(this).parent('li')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:47:25.443

`.next()`并`.prev()`遍历兄弟姐妹。他们得到下一个/上一个兄弟姐妹。如果你想`<li>`从中得到`<a>`，你想要`.parent`。

```
$('a.accordion').click(function() {
    var $li = $(this).parent('li');
}); 
```

# maven - 在 Maven 中为不同的文件类型配置编码？

> ID：11144704
> 
> 赞同：16
> 
> 时间：2012-06-21T18:42:24.627
> 
> 标签：maven, encoding

我使用[maven-resource-plugin](http://maven.apache.org/plugins/maven-resources-plugin/faq.html)来过滤我的 maven 项目中的一些资源。在我的父项目中，我有：

```
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> 
```

在一个子项目中，我有一个**test.properties**文件，它是一个普通的[java 属性文件](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html)，默认编码 = ISO-8859-1。该文件包含：

```
aboutText=Version ${project.version} © 2012 blabla 
```

为了确保此文件正确过滤，我已将 maven-resource-plugin 拆分为单独的执行，每个执行都有其编码：

```
 <plugin>
    <artifactId>maven-resources-plugin</artifactId>
    <configuration>
      <nonFilteredFileExtensions>
        <nonFilteredFileExtension>ico</nonFilteredFileExtension>
        <nonFilteredFileExtension>jar</nonFilteredFileExtension>
      </nonFilteredFileExtensions>
    </configuration>
    <executions>
      <execution>
        <id>filter-properties-files</id>
        <phase>generate-resources</phase>
        <goals>
          <goal>copy-resources</goal>
        </goals>
        <configuration>
          <!-- java properties files are encoded in ISO-8859-1 so when 
            filtering those files we stick with that encoding. -->
          <encoding>ISO-8859-1</encoding>
          <outputDirectory>${basedir}/after</outputDirectory>
          <resources>
            <resource>
              <filtering>true</filtering>
              <directory>${basedir}/before</directory>
              <includes>
                <include>**/*.properties</include>
              </includes>
            </resource>
          </resources>
        </configuration>
      </execution>
      <execution>
        <id>filter-non-properties-files</id>
        <phase>generate-resources</phase>
        <goals>
          <goal>copy-resources</goal>
        </goals>
        <configuration>
          <encoding>${project.build.sourceEncoding}</encoding>
          <outputDirectory>${basedir}/after</outputDirectory>
          <resources>
            <resource>
              <filtering>true</filtering>
              <directory>${basedir}/before</directory>
              <includes>
                <include>**/*.product</include>
                <include>**/*.inf</include>
              </includes>
            </resource>
          </resources>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

这似乎有点矫枉过正，我觉得我要么没有正确使用插件，要么应该以另一种方式处理这个问题。也许坚持直接在属性文件中编码特殊字符：

```
aboutText=Version ${project.version} \u00a9 2012 blabla 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-06T23:34:13.033

这个问题本身就是一个非常宝贵的答案，因为显然作者提供的复杂过程是为各种过滤文件类型配置不同编码的唯一方法。然而，给出的示例是针对作者的非标准用例的，并且忽略了一些重要细节，没有这些细节，该示例的实际使用充满了陷阱：

*   这并不明显，但在作者的示例*中，默认的资源复制目标`resources`仍然启用*并在两个定义的目标之外运行！
*   您会注意到作者使用了生命周期阶段`generate-resources`而不是默认的`process-resources`. 这是绕过上述第一点的技巧；通过使这两个`copy-resources`目标发生在较早的生命周期阶段，根据给定的规则复制资源，然后当`default-resources`目标出现时，原始资源复制保持不变，显然是因为它的`overwrite`设置 defaults `false`。但最好[完全禁用](https://stackoverflow.com/a/7800764/421049)执行`default-resources`。
*   作者提供了一份`outputDirectory`声明。很自然地认为作者提供这个只是因为需要一个自定义的输出目录；毕竟，`resources`目标为此设置提供了默认值。但奇怪的是，对于`copy-resources`目标，这个设置实际上是必需的！但是，有一个标准的 Maven 变量`${project.build.outputDirectory}`可以用作值。

基于作者自己在问题中的示例，这里是一种使用 ISO-8859-1 过滤属性文件的剪切和粘贴方式，复制其他文件而不过滤，并防止发生默认资源复制；全部使用标准源和目标目录：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-resources-plugin</artifactId>
  <version>2.7</version>
  <executions>
    <execution>
      <!-- Turn off default resource copying. -->
      <id>default-resources</id>
      <phase />
    </execution>
    <execution>
      <!-- Filter resources in properties files. -->
      <id>filter-properties-files</id>
      <phase>process-resources</phase>
      <goals>
        <goal>copy-resources</goal>
      </goals>
      <configuration>
        <encoding>ISO-8859-1</encoding>
        <outputDirectory>${project.build.outputDirectory}</outputDirectory>
        <resources>
          <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
            <includes>
              <include>**/*.properties</include>
            </includes>
          </resource>
        </resources>
      </configuration>
    </execution>
    <execution>
      <!-- Do not do property substitution in files that are not properties files, such as binary files. -->
      <id>copy-other-resources</id>
      <phase>process-resources</phase>
      <goals>
        <goal>copy-resources</goal>
      </goals>
      <configuration>
        <outputDirectory>${project.build.outputDirectory}</outputDirectory>
        <resources>
          <resource>
            <directory>src/main/resources</directory>
            <filtering>false</filtering>
            <excludes>
              <exclude>**/*.properties</exclude>
            </excludes>
          </resource>
        </resources>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

*更新：*经过更多研究，我相信与其禁用默认执行，不如简单地修改默认执行以忽略属性文件，并添加对属性文件的过滤作为附加执行。此外，如果使用`resources`目标而不是`copy-resources`，则无需指示输出目录或阶段，因为`resources:resources`会自动绑定到`process-resources`阶段并输出到`${project.build.outputDirectory}`。请注意，我已经更新到插件的 3.1.0 版本，因此可能其中一些选项在我上面使用的版本中不可用。*我还没有测试过这个新的、更短的配置。*

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-resources-plugin</artifactId>
  <version>3.1.0</version>
  <executions>
    <execution>
      <!-- Ignore properties files by default. -->
      <id>default-resources</id>
      <configuration>
        <resources>
          <resource>
            <directory>${project.basedir}/src/main/resources</directory>
            <excludes>
              <exclude>**/*.properties</exclude>
            </excludes>
          </resource>
        </resources>
      </configuration>
    </execution>
    <execution>
      <!-- Filter resources in properties files using ISO-8859-1\. -->
      <id>filter-properties-files</id>
      <goals>
        <goal>resources</goal>
      </goals>
      <configuration>
        <encoding>ISO-8859-1</encoding>
        <resources>
          <resource>
            <directory>${project.basedir}/src/main/resources</directory>
            <filtering>true</filtering>
            <includes>
              <include>**/*.properties</include>
            </includes>
          </resource>
        </resources>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

也许有人可以测试这个新配置并让我知道它是否与我上面给出的原始配置相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:43:25.237

你是对的，你必须配置执行......如果你遵循标准目录布局，你可以使用两个执行而不是你似乎正在使用的三个，但你似乎将文件`${basedir}/before`放入`${basedir}/after`其中，因此默认执行`resources:resources`再加上向该部分添加多个`resources`将`build`不适合您。

过滤文件的编码是原始`pom`模型规范中的疏忽，可能会在某些尚未指定的 Maven 版本中得到修复

# android - 设置为使用 Android NDK

> ID：11144705
> 
> 赞同：1
> 
> 时间：2012-06-21T18:42:25.570
> 
> 标签：android, android-ndk

我正在努力学习如何使用Android NDK，但是对android环境都是新手，对C++的经验很少，对C没有经验。今天早些时候我被批评了一个类似的问题，所以我会尽量做到这一点。

我一直在通过以下两个链接阅读 NDK：http: [//mobile.tutsplus.com/tutorials/android/ndk-tutorial/](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)

[http://permadi.com/blog/2011/09/setting-up-android-jni-projects-in-windows-eclipse-and-sequoyah/](http://permadi.com/blog/2011/09/setting-up-android-jni-projects-in-windows-eclipse-and-sequoyah/)

我已经下载了 NDK、Sequoyah 和 Cygwin。它仍然告诉我我需要更新 'awk'，并下载 GNU Make 3.81。我查过awk，并不真正知道它是什么。我在 Eclipse 中工作，我的 minSDK 设置为 10，并且在 Windows 7 Professional 中工作。

我所要求的只是对 Sequoyah、Cygwin、awk 和 GNU Make 的用途以及它们的使用方式的解释。

如果这不是一个适合 SO 的问题，我很抱歉，但我不知道在哪里可以问它，而且对他们在教程中谈论的所有内容都没有什么经验，以至于我非常迷茫。如果有人知道我可以在其他地方寻求帮助，我会很感激这些信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:41:19.347

Sequoyah 是处理 NDK 构建的 Eclipse 的一部分。问题是 Sequoyah 中的 NDK 支持不是最新的。与使用 Sequoyah 相比，目前在 tools.android.com 的 Preview #3 中的 ADT 版本对您来说是更好的选择。它处理构建和调试工作流程。我们计划在 ADT20 发布后立即弃用该功能。

# php - PHP cURL 错误：无法解析代理

> ID：11144706
> 
> 赞同：2
> 
> 时间：2012-06-21T18:42:28.083
> 
> 标签：php, curl, proxy

我正在尝试使用 PHP（版本 5.3.12）从 Windows Server 2008 机器发送 cURL 请求并继续收到错误`Could not resolve proxy: http=127.0.0.1; Host not found`。据我所知，我没有使用代理 -`CURLOPT_PROXY`没有设置，我已经运行`netsh winhttp show proxy`以确保没有系统范围的设置，我什至检查了我机器上的所有浏览器以确认没有配置为使用代理（以防万一这可能会产生影响）。我无法弄清楚为什么 cURL 坚持告诉我 1）我正在使用代理和 2）它无法连接到它。

我可以通过显式禁用代理来解决错误`curl_setopt($curl, CURLOPT_PROXY, '');`，但这不是最好的解决方案——我使用 cURL 的很多地方都在库中，这会很痛苦（更不用说难以维护）绕过并将这条线破解到所有这些中。我宁愿找到根本原因并在那里修复它。

如果它有帮助，到目前为止，这仅发生在我的 POST 请求中。命令行 cURL（来自 Git bash 提示符）工作正常。这些调用在我们的开发机器上也可以正常工作，所以它似乎是我机器特有的。

如果我需要应用上述技巧，我会的，但我想在我诉诸之前，我会问 SO 的好人 - 有没有我遗漏的地方可以配置代理的使用？如果我忘记添加任何其他有用的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:33:48.230

cURL 依赖于代理设置的环境变量。您可以通过“高级系统设置”在 Windows 上进行设置。

您需要设置和/或更改以获得最佳控制的变量是“http_proxy”、“HTTPS_PROXY”、“FTP_PROXY”、“ALL_PROXY”和“NO_PROXY”。

但是，如果您只是想完全避免使用代理，您可以创建系统变量`http_proxy`并将其设置为`localhost`，然后另外创建系统变量`NO_PROXY`并将其设置为`*`，这将告诉 cURL 避免使用代理任何连接。

在任何情况下，请务必重新启动任何命令窗口以强制识别系统环境变量的更改。

[[来源 - cURL 手册]](http://curl.haxx.se/docs/manual.html)

# clojure - 如何编写宏以将元数据添加到函数

> ID：11144708
> 
> 赞同：1
> 
> 时间：2012-06-21T18:42:32.353
> 
> 标签：clojure

鉴于以下功能 -

```
(defn ^:export hi [] (+ 2 3)) 
```

我想写一个宏来做这个-

```
(defex hi [] (+ 2 3)) 
```

宏`defex`只是在函数前面添加 ^:export 元数据。我怎么做？

编辑 - 我检查了 repl (meta hi) 上的函数，它给出了 nil。所以很可能我不想添加元数据，而是以上述方式定义一个函数。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:22:32.090

您不想在函数本身上使用元数据，而是希望在 var 上使用元数据（或任何 clojurescript 的等价物）：

```
user> (defmacro defex [name & defn-args]
        `(defn ~(vary-meta name assoc :export true) ~@defn-args))
#'user/defex
user> (defex hi [] "hi")
#'user/hi
user> (meta #'hi)
{:arglists ([]), :ns #<Namespace user>, :name hi, :export true, :line 1, :file "NO_SOURCE_FILE"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:00:16.807

您可以使用构建函数并使用 def 将其保存在 var 中的基本模板宏

```
user> (defmacro defex [name args & body] `(def ~name ^{:export true} (fn ~args  ~@body)))
#'user/defex
user> (defex hi [] (+ 2 3))
#'user/hi
user> (meta hi)
{:export true}
user> 
```

# sdl - SDL：在非全屏模式下查找最大窗口大小

> ID：11144712
> 
> 赞同：4
> 
> 时间：2012-06-21T18:42:49.410
> 
> 标签：sdl, sdl-1.2

我有一个不以全屏模式运行的应用程序。在 SDL_init 之后，我执行 SDL_SetVideoMode(0, 0, SDL_OPENGL | SDL_HWSURFACE | SDL_ASYNCBLIT)。根据我的阅读，这应该分配一个最大尺寸的窗口。现在不幸的是，它分配了一个 1600x900 的窗口：这是显示器的物理尺寸，而不是显示器上的可用空间（其中一些被菜单行和窗口边框使用）。有什么想法可以找到有多少可用空间吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-30T16:46:51.993

我在运行全屏（隐藏菜单、停靠栏、面板等）的程序中拥有的是：

```
if ( SDL_Init( SDL_INIT_VIDEO | SDL_INIT_TIMER ) < 0 ) {
    throw SDL_GetError();
}
const SDL_VideoInfo* vidinfo = SDL_GetVideoInfo();
int max_w = vidinfo->current_w;
int max_h = vidinfo->current_h;
.
.
.
SDL_Surface *screen = SDL_SetVideoMode(max_w,max_h,0,SDL_FULLSCREEN); 
```

请务必在 SDL_SetVideoMode()*之前*调用 SDL_GetVideoInfo ()。

# jquery - 在本地使用 jquery 将 html 文件附加到另一个 html 文件

> ID：11144719
> 
> 赞同：1
> 
> 时间：2012-06-21T18:43:06.740
> 
> 标签：jquery, html, ajax, jquery-load, jquery-get

我试图使用`$.get`方法以及`$.ajax`和`.load`方法将html文件附加到html文件中。实际问题是文件在单独打开时还没有附加。可能是该站点是从计算机而不是服务器上运行的吗？或者是否需要在 html 文件中声明某些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:51:32.597

在 Chrome 中，除非您将其上传到服务器或使用本地服务器，否则它将无法工作。
我喜欢XAMPP

`cmd prompt`使用 cmd打开谷歌浏览器：
[chrome.exe --allow-file-access-from-files](http://forum.jquery.com/topic/load-and-ajax-not-working-on-google-chrome)
(PS: untested.)

# google-app-engine - 未找到类 org.datanucleus.api.jdo.PersistenceManagerFactoryClass

> ID：11144721
> 
> 赞同：7
> 
> 时间：2012-06-21T18:43:10.233
> 
> 标签：google-app-engine, jdo

我将 Google App Engine (appengine-java-sdk-1.6.6) 用于使用 JDO 和 maven (maven-gae-plugin) 用于项目结构和构建的应用程序。构建成功并使用 DataNucleus Enhancer 增强了我的域类。

运行应用程序时，我遇到了这个问题：Class org.datanucleus.api.jdo.PersistenceManagerFactoryClass was not found。任何人都可以请建议。谢谢

PS：我已经做了一个grep（在linux上）在APP Engine SDK文件夹中找到PersistenceManagerFactoryClass，我找不到它。

```
Could not instantiate bean class [com.peerbuccoss.apps.mtp.dao.impl.CommonDaoImpl]:  Constructor threw exception; nested exception is javax.jdo.JDOFatalUserException: Class     org.datanucleus.api.jdo.PersistenceManagerFactoryClass was not found.
NestedThrowables:
java.lang.ClassNotFoundException:     org.datanucleus.api.jdo.PersistenceManagerFactoryClass:
java.lang.ClassNotFoundException: org.datanucleus.api.jdo.PersistenceManagerFactoryClass
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at javax.jdo.JDOHelper$18.run(JDOHelper.java:2018)
at javax.jdo.JDOHelper$18.run(JDOHelper.java:2017)
at java.security.AccessController.doPrivileged(Native Method)
at javax.jdo.JDOHelper.forName(JDOHelper.java:2015)
at javax.jdo.JDOHelper.invokeGetPersistenceManagerFactoryOnImplementation(JDOHelper.java:1162)
at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:808)
at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:1093)
at javax.jdo.JDOHelper.getPersistenceManagerFactory(JDOHelper.java:919) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-05T09:25:49.503

就我而言，我使用的是 datanucleus-appengine- **2.1.2**而不是 datanucleus-appengine- **1.0.10**。对于 2.1.2 版，您必须使用以下*PersistenceManagerFactoryClass*更新您的 jdconfig.xml ：

```
<property name="javax.jdo.PersistenceManagerFactoryClass"
       value="org.datanucleus.api.jdo.JDOPersistenceManagerFactory"/> 
```

我的 jdconfig.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig">

   <persistence-manager-factory name="transactions-optional">
       <property name="javax.jdo.PersistenceManagerFactoryClass"
           value="org.datanucleus.api.jdo.JDOPersistenceManagerFactory"/>
       <property name="javax.jdo.option.ConnectionURL" value="appengine"/>
       <property name="javax.jdo.option.NontransactionalRead" value="true"/>
       <property name="javax.jdo.option.NontransactionalWrite" value="true"/>
       <property name="javax.jdo.option.RetainValues" value="true"/>
       <property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true"/>
       <property name="datanucleus.appengine.singletonPMFForName" value="true"/>
   </persistence-manager-factory>
</jdoconfig> 
```

# magento - 查找在 Magento 中使用优惠券代码的非会员的姓名和电子邮件地址

> ID：11144725
> 
> 赞同：1
> 
> 时间：2012-06-21T18:43:41.817
> 
> 标签：magento, magento-1.4, coupon

我们希望能够提取以访客身份购买商品的客户的姓名和电子邮件地址。有没有人有运气这样做？

我看过一些关于如何提取使用优惠券代码的客户姓名的帖子，但没有关于非客户的内容！

非常感谢你们的帮助！

-杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:06:14.763

这应该有效：

```
 $orderCollection = Mage::getModel('sales/order')->getCollection()
        ->addAttributeToSelect('customer_firstname')
        ->addAttributeToSelect('customer_lastname')
        ->addAttributeToSelect('customer_email')
        ->addAttributeToSelect('customer_group_id')
        ->addAttributeToFilter('customer_group_id', Mage_Customer_Model_Group::NOT_LOGGED_IN_ID)
 ; 
```

然后，您可以通过遍历集合来访问这些值...

```
foreach($orderCollection as $order) {
    $customerFirstname = $order->getData('customer_firstname');
    $customerLastname  = $order->getData('customer_lastname');
    $customerEmail     = $order->getData('customer_email');

    //Do what you want with the values here
} 
```

**编辑：**

上面的代码回答了您问题的第一段。第二段表明您正在寻找不同的东西。您是否正在寻找使用特定优惠券代码的客人客户？如果是这样，那么您应该像这样加载集合：

```
$orderCollection = Mage::getModel('sales/order')->getCollection()
    ->addAttributeToSelect('customer_firstname')
    ->addAttributeToSelect('customer_lastname')
    ->addAttributeToSelect('customer_email')
    ->addAttributeToSelect('customer_group_id')
    ->addAttributeToSelect('coupon_code')
    ->addAttributeToFilter('customer_group_id', Mage_Customer_Model_Group::NOT_LOGGED_IN_ID)
    ->addAttributeToFilter('coupon_code', 'your_awesome_coupon_code')
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:52:53.520

在另一篇类似的帖子中，Drew 给了我一个 SQL 语句，用于记录现有客户的姓名和电子邮件。要获取包括注册用户和访客在内的所有订单，您可以使用以下 SQL：

```
SELECT `customer_firstname`, `customer_lastname`, `customer_email` FROM `sales_flat_order` WHERE  `coupon_code` = 'your_awesome_coupon_code' 
```

像魅力一样工作！仔细检查了“salesrule_coupon”，并且 sql 中返回的行与使用优惠券的次数相匹配。

我会将 Drew 的答案标记为正确，因为在 magento 中可能会更好。任何寻找 SQL 的人，使用这个！

只有注册用户的 SQL 语句可以在这里找到：[如何在 magento 中查看每次使用某个优惠券代码时的完整订单详细信息？](https://stackoverflow.com/questions/11145059/how-can-i-see-full-order-details-for-each-time-a-certain-coupon-code-was-used-in/11145482#11145482)

# r - setClass 使表示为任何类

> ID：11144727
> 
> 赞同：2
> 
> 时间：2012-06-21T18:43:47.737
> 
> 标签：r, s4

有什么方法可以让我的一个班级成为**任何**班级吗？

即类似的东西

> setClass("myClass", 表示(A="any"))

我试过“S4”，但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:03:22.297

我在 Paul Gilbert 的 TSdbi 包的源代码中找到了一个很好的解决方法。

```
setClassUnion("OptionalChar",   c("character",   "logical"))
setClass("myClass", representation(A="OptionalChar")) 
```

当您期望`character`但也希望允许时`NA`，这可能会有所帮助。我知道这不是“任何”，但也许你可能想限制它，但不是单一模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:03:03.243

您可以使用“任何”。

```
> setClass("myClass", representation(A="ANY"))
> new("myClass", A=c(1,2,3))
An object of class "myClass"
Slot "A":
[1] 1 2 3
> new("myClass", A=unique)
An object of class "myClass"
Slot "A":
function (x, incomparables = FALSE, ...) 
UseMethod("unique")
<bytecode: 0x00000000071a8270>
<environment: namespace:base> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:59:36.463

如果您创建通用 S4 函数，您应该能够将方法参数的可接受签名设置为“ANY”。我不确定表示是否可以设置为“任何”，因为我对表示的看法比这更具体。未分配签名的参数确实会记录在“ANY”类中。您可以使用“向量”类型作为可以接受列表或原子对象的表示形式：

```
setClass("myClass", representation(A="vector"))
[1] "myClass"
> new("myClass", A=list(a=c(2,3,4), b="a")  )
An object of class "myClass"
Slot "A":
$a
[1] 2 3 4

$b
[1] "a" 
```

我不确定这是否像您要求的那样通用，但您也没有说任何关于需要属性的内容。我认为向量可能会丢失属性，但似乎没有：

```
> setClass("myClass", representation(A="vector"))
[1] "myClass"
> new("myClass", A=B  )
An object of class "myClass"
Slot "A":
$a
[1] 2 3 4

$b
[1] "a"

attr(,"myattr")
[1] "test" 
```

# ruby - Nokogiri 返回 XML 标签和数据

> ID：11144736
> 
> 赞同：3
> 
> 时间：2012-06-21T18:44:12.880
> 
> 标签：ruby, xml-parsing, nokogiri

XML 数据：

```
<configs>
<config>
<name>XP</name>
<browser>IE</browser>
<browser>FF</browser>
<browser>Chrome</browser>
</config>
</configs> 
```

我是 Ruby、Nokogiri 和一般编程的新手。我正在尝试编写一个 QA 工具来帮助实现自动化。

红宝石代码：

```
doc = Nokogiri::XML(open("configs.xml"))
configs = doc.xpath("//configs/config").map do |i|
  {'name' => i.xpath('name').to_s, 'browsers' => i.xpath('browser').to_s}
end

configs.each do |i|
  puts i['name']
  puts i['browsers']
end 
```

这符合我的要求，它返回数据，但包含 XML 标记。有没有办法剥离它们，我只是没有找到？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T18:52:41.590

用于`.text`获取文本节点数据：

```
:name => i.xpath('name').text 
```

`.to_s`是 XML 节点的字符串表示形式，这比您要查找的要多。

但是，如果您期望单独的浏览器条目，那么您的其余代码会有点损坏。

照原样它将文本数据粉碎成一个单一的斑点。而是将它们连接在一起，等等，例如：

```
configs = doc.xpath("//configs/config").collect do |cfg|
  browsers = cfg.xpath('browser').collect { |b| b.text }.join(', ')
  { name: cfg.xpath('name').text, browsers: browsers }
end

configs.each do |i|
  puts i[:name]
  puts i[:browsers]
end 
```

[你可能*想要*一个 blob `"IEFFChrome"`，在这种情况下没关系。]

# java - Enterprise Architect Java 代码生成文件导入

> ID：11144738
> 
> 赞同：4
> 
> 时间：2012-06-21T18:44:17.133
> 
> 标签：java, uml, enterprise-architect

我正在尝试从 EA UML 类图生成 Java 代码。我定义了两个类，它们有一个组合关系船。

比如说，A 类包含 B 类的列表。

我可以在代码生成对话框中将默认集合类设置为列表，它正确地生成代码为：

```
class B {
 public List<B> m_B;
}; 
```

但我无法自动生成导入语句。如下所示：

```
import java.util.List;
class B {
 public List<B> m_B;
}; 
```

我知道代码生成对话框中有一个部分可以指定完整的导入语句，但我有很多类，我希望 EA 自动生成导入语句。

我也摆弄了代码模板，但除了代码模板中的硬编码导入语句之外，我无法让它导入任何东西。

宏

```
importPackagePath
importClassName 
```

似乎是空的。

谁能帮我修改代码模板以找出要完成的导入？

谢谢，

问候，

维马尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T10:11:58.650

我认为您应该避开代码生成模板。这里的问题是集合类的处理超出了正常的代码生成范围。如果一个类有一个成员，其类型是另一个包中的类，EA 会生成正确的导入语句 - 但前提是模型中存在这些类，而集合类不存在。

有三种方法可以解决这个问题：

**1) 接受生成的代码已损坏。**

生成代码，然后在 IDE（NetBeans、Eclipse 或您正在使用的任何工具）中打开它，让它在添加正确的导入语句时进行有根据的猜测。

这既快速又简单，但您需要检查结果。还有一个风险：如果你的“B”类导入了一个包含“List”类的包，编译器不会抱怨，但引用的“List”类不是来自 java.util 的那个，这意味着你'没有得到你认为你做的代码。

**2) 对集合类建模。**

创建一个包含子“util”和模板类“List”的包“java”，然后更改模型，以便 A 与此“List”类型具有“1”关系，而不是与 B 的 0..* 关系（不是 B），而是用类型 B 实例化的。正确的关系是模板绑定。

对集合类进行建模的方法是将 rt.jar 导入到您的项目中。不过，这需要很长时间，并确保禁用自动图表生成，否则可能会耗尽内存。但是您将一劳永逸地导入所有实用程序类。

如果您想安全起见，请从 Java 选项（工具 - 选项 - 源代码工程 - Java）中删除集合类，这样 EA 就不会尝试使用它们。但如果您更改所有关系，EA 将不会使用配置的集合类。

这会产生最正确的模型，并且还解决了如何引用其他实用程序类（例如日历）的问题，但是如果您有一个没有集合类的大型模型，则可能需要做很多工作。

**3) 对集合类使用完全限定的名称。**

在 Java 选项中，而不是`List<#TYPE#>`输入`java.util.List<#TYPE#>`. 如果类型由它们的完全限定名称引用，Java 编译器不需要 import 语句。

这是非常快速和容易的，并且生成的代码是正确的。缺点是代码变得有点笨重。

如果您只需要收集类来工作，我会选择这个。如果您想参考其他常见的实用程序类，我会说导入 rt.jar 并重新设计模型。

# android - 双向轮播 ViewPager

> ID：11144739
> 
> 赞同：1
> 
> 时间：2012-06-21T18:44:21.830
> 
> 标签：android, carousel, android-viewpager

如何创建**2 向无限**ViewPager？在现有的元素中，元素的位置可以>= 0，但不能< 0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T18:52:46.047

viewpager 有一个适配器。适配器有一个 getView 方法。在 getView 中，使用“位置”以列表中元素的数量为模。让 getCount 返回一个高数字，并在范围中间的某个位置启动 viewpager。它不是无限的，而是几乎无限的。

# apache - Apache 多域设置

> ID：11144745
> 
> 赞同：9
> 
> 时间：2012-06-21T18:44:38.593
> 
> 标签：apache, apache2, subdomain, virtualhost, virtual-hosts

我正在设置的基于 linux 的 Apache 2.2 服务器有一个非常简单的问题。我想在同一台服务器上设置两个完全不同的域。但它只提供第一个标签的内容！我搜索了 StackOverflow 并阅读了 Apache.org 上的项目，但没有运气。

我按照 Apache.org 上的说明将这两个部分放在我的 http.conf 文件的底部。

```
<VirtualHost *:80>
    DocumentRoot /var/www/mydomain1
    ServerName sub1.mydomain1.com
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/mydomain2
    ServerName sub2.mydomain2.com
</VirtualHost> 
```

现在，当我使用浏览器访问：[http](http://sub1.mydomain1.com) ://sub1.mydomain1.com时，一切正常。但是，如果我访问[http://sub2.mydomain2.com](http://sub2.mydomain2.com)，我仍然只能获得位于 /var/www/webfiles/mydomain1 中的内容。

我做了很多显而易见的事情，例如： - service httpd restart - 我更改了我的 httpd.conf 中两个条目的顺序，并且再次，它只为列表中的第一个提供服务。- 我在 Google 上搜索过的一份支持文档说要确保在您的系统上具有以下指向有效域的入口点。所以我输入了这个（但它没有改变任何东西）： ServerName sub2.mydomain2.com:80

这一定是愚蠢的，但我无法弄清楚！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T19:10:03.723

好的，我想通了。这很愚蠢。我只需要取消注释这一行，这样我就可以实际使用所有虚拟主机：

```
NameVirtualHost *:80 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T18:48:25.043

您需要在两个单独的虚拟主机中设置这两个域。通常，当我这样做时，我喜欢拆分一个包含虚拟主机文件的包含目录，每个文件都包含一个虚拟主机。

```
<VirtualHost *:80>
  ServerName site1.com
  DocumentRoot "/var/www/site1"
</VirtualHost>
<VirtualHost *:80>
  ServerName site2.com
  DocumentRoot "/var/www/site2"
</VirtualHost> 
```

# jsf-2 - 当会话超时时，为什么基于 Phase Listener 的 JSF 重定向不适用于 AJAX 请求？

> ID：11144747
> 
> 赞同：1
> 
> 时间：2012-06-21T18:44:42.500
> 
> 标签：jsf-2

我有一个 JSF Phase Listerner 检查用户是否登录，如果没有，将他们重定向到登录页面。这适用于非 ajax 请求。但是，如果用户在一个页面上，在我的例子中，这个页面有一个 primefaces 数据表，并单击一个调用 ajax 请求的按钮——但他们的会话已超时——代码被执行以发出重定向（使用`ExternalContext#redirect`），但不会将用户导航到登录页面。

知道为什么这不起作用吗？

这是我的相位监听器：

```
private static final String IS_LOGGED_IN_INDICATOR = "loggedIn";
private static final String LOGIN_PAGE = "/login.jsp";

public PhaseId getPhaseId() {
    return PhaseId.RESTORE_VIEW;
}

public void beforePhase(PhaseEvent event) {
    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    HttpSession session = (HttpSession)ec.getSession(false);

    if (session==null || session.getAttribute(IS_LOGGED_IN_INDICATOR) == null) {
       try {
            ec.redirect(LOGIN_PAGE);
       }
       catch(IOException e) {
           // log exception...
       }            
    }
}

public void afterPhase(PhaseEvent event) {
    // no-op
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T04:22:23.863

它失败了，因为 ajax 上下文试图从视图根中获取渲染工具包，而根本没有视图根。那时还没有恢复。这导致了一个`NullPointerException`in `PartialViewContext#createPartialResponseWriter()`。反过来，这个异常不会被抛出，而是被放入一个应该由 custom 处理的 ajax 异常队列中`ExceptionHandler`。你显然没有任何人。如果您创建/使用这样的异常，则此异常是可见的[`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)（有关更多详细信息，另请参阅[此博客](http://balusc.blogspot.com/2012/03/full-ajax-exception-handler.html)）。

`afterPhase()`要解决特定问题，请改为执行该工作。然后完全恢复视图根，并且 ajax 上下文可以从中获取渲染工具包，以便编写专门的 XML 响应，指示 JavaScript 中的 JSF ajax 引擎更改窗口位置。如果没有 ajax，则不需要渲染工具包，因为重定向基本上只是设置响应标头的问题。

具体`NullPointerException`是否反过来是 Mojarra 中的错误是一个不同的问题，可以更好地在他们自己的问题跟踪器上以问题报告的形式发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T19:09:26.483

这是因为您必须在 XML 中为 Ajax 请求发送一个特殊响应才能进行重定向（检查[这个答案](https://stackoverflow.com/questions/10954319/jsf-2-response-sendredirect-is-not-working)），我已经在这样的过滤器中实现了这个..

```
// Check if it's an Ajax Request 
if ("partial/ajax".equals(((HttpServletRequest) request).getHeader("Faces-Request"))) {
      //redirect 
      response.setContentType("text/xml");
      response.getWriter()
           .append("<?xml version=  \"1.0\" encoding=\"UTF-8\"?>")
           .printf("<partial-response><redirect url=\"%s\"></redirect></partial-response>",url); 
```

你应该把它移植到你的 Phase Listener。

# wxpython - 如何在 wx.Notebook 面板中为 matplotlib FigureCanvas 获得正确的布局

> ID：11144750
> 
> 赞同：1
> 
> 时间：2012-06-21T18:44:53.400
> 
> 标签：wxpython, matplotlib, wxnotebook

我已经为此苦苦挣扎了几天。如果我不使用 wx.Notebook，我可以让 FigureCanvas 在 sizer 中正确调整大小，但是一旦我将 FigureCanvas 放在 wx.Notebook 面板中，绘图似乎会忽略面板大小调整器。它也有某种刷新问题，如果你把它从屏幕上拉下来再打开，情节就消失了。也许命令的顺序有问题，但我似乎找不到。这篇文章：[How to update a plot with python and Matplotlib](https://stackoverflow.com/questions/5160558/how-to-update-a-plot-with-python-and-matplotlib)帮助我做到了这一点，但我似乎无法弄清楚为什么一旦我在 wx.Notebook 中使用它时，情节的表现会有所不同。

这是它首次显示时的样子：http: [//static.inky.ws/image/2205/image.jpg](http://static.inky.ws/image/2205/image.jpg)

这是在我中途关闭屏幕之后：http: [//static.inky.ws/image/2206/image.jpg](http://static.inky.ws/image/2206/image.jpg)

```
#!/usr/bin/env python
import wx
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
from matplotlib.figure import Figure

class MyFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self,
                          parent,
                          id=wx.ID_ANY,
                          pos=wx.DefaultPosition,
                          size=wx.Size( -1,-1 ),
                          style=wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL)

        fgSizer8 = wx.FlexGridSizer(0, 1, 0, 0)
        self.m_notebook2 = wx.Notebook(self,
                                       wx.ID_ANY,
                                       wx.DefaultPosition,
                                       wx.DefaultSize,
                                       0)

        self.m_panel8 = wx.Panel(self.m_notebook2,
                                 wx.ID_ANY,
                                 wx.DefaultPosition,
                                 wx.DefaultSize,
                                 wx.TAB_TRAVERSAL)

        bSizer20 = wx.BoxSizer(wx.VERTICAL)

        self.fig = Figure()
        self.axes = self.fig.add_subplot(111)
        self.pts = self.axes.plot([1, 2, 3], [4, 5, 7], 'ro-', picker=5)
        self.canvas = FigureCanvas(self, -1, self.fig)

        bSizer20.Add(self.canvas, 1, wx.ALL|wx.EXPAND, 5)

        self.m_panel8.SetSizer(bSizer20)
        self.m_panel8.Layout()
        bSizer20.Fit(self.m_panel8)
        self.m_notebook2.AddPage(self.m_panel8, u"a page", False)

        fgSizer8.Add(self.m_notebook2, 1, wx.EXPAND |wx.ALL, 5)

        self.SetSizer(fgSizer8)
        self.Layout()
        fgSizer8.Fit(self)

        self.Centre(wx.BOTH)

if __name__ == "__main__":
    app = wx.App(0)
    frame = MyFrame(None)
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:57:17.490

改变

```
self.canvas = FigureCanvas(self, -1, self.fig) 
```

到

```
self.canvas = FigureCanvas(self.m_panel8, -1, self.fig) 
```

![在此处输入图像描述](../Images/d9bd84e098d29b02018c16b489237e52.png)

# sql-server - sql存储过程执行命令

> ID：11144751
> 
> 赞同：-1
> 
> 时间：2012-06-21T18:44:59.770
> 
> 标签：sql-server, tsql, stored-procedures

我在 sql 上创建了以下存储过程：

```
CREATE PROCEDURE Sp_generate_report (@YEAR  INT,
                                     @MONTH INT)
AS
    DECLARE @CATEGORY VARCHAR(20)
    DECLARE @BEGIN_DATE DATE
    DECLARE @END_DATE DATE
BEGIN
      SELECT @BEGIN_DATE = Cast(( Cast(@YEAR AS VARCHAR) + '-' 
                         + Cast(@MONTH AS VARCHAR) + '-' + '1' ) AS DATE)

      SELECT @END_DATE = Cast(( Cast(@YEAR AS VARCHAR) + '-' + 
                                Cast(@MONTH AS VARCHAR) + '-' + '32' ) AS DATE)

      SELECT TOP 1 @CATEGORY = Name
      FROM   dbo.Profitible_categories(@BEGIN_DATE, @END_DATE)

      INSERT INTO dbo.MONTHLY_SUMMARY_REPORTS
      VALUES      (@CATEGORY)
  END 
```

该过程已成功创建，但是当我尝试使用以下命令执行它时：

```
EXECUTE SP_GENERATE_REPORT 2012, 7 
```

我收到此错误消息：

> 消息 241，级别 16，状态 1，过程 SP_GENERATE_REPORT，第 8 行
> 从字符串转换日期和/或时间时转换失败。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:59:02.177

您可以计算该月的最后一天，而无需进行所有讨厌的字符串连接或尝试猜测它是哪一个月并选择最后一天。

```
CREATE PROCEDURE dbo.Sp_generate_report
  @YEAR  INT,
  @MONTH INT
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @BEGIN_DATE DATE = DATEADD(MONTH, @MONTH-1, CONVERT(DATE,
    CONVERT(CHAR(4), YEAR) + '0101'));
  DECLARE @END_DATE DATE = DATEADD(DAY, -1, DATEADD(MONTH, 1, @BEGIN_DATE));

  INSERT INTO dbo.MONTHLY_SUMMARY_REPORTS
    SELECT TOP (1) Name
      FROM   dbo.Profitible_categories(@BEGIN_DATE, @END_DATE);
END
GO 
```

# c# - C#反转字符串中的所有数字？

> ID：11144754
> 
> 赞同：5
> 
> 时间：2012-06-21T18:45:19.943
> 
> 标签：c#, .net, regex, string

我有一个字符串：

“*你好**7866592**这是我的**12432**字符串和**823**我需要翻转所有**123*** ”

我想成为

“*你好**2956687**这是我的**23421**字符串和**328**我需要翻转所有**321*** ”

我使用这个正则表达式来获取所有数字：

```
Regex nums = new Regex("\d+"); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T18:49:05.440

```
var replacedString = 
    Regex.Replace(//finds all matches and replaces them
    myString, //string we're working with
    @"\d+", //the regular expression to match to do a replace
    m => new string(m.Value.Reverse().ToArray())); //a Lambda expression which
        //is cast to the MatchEvaluator delegate, so once the match is found, it  
        //is replaced with the output of this method. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:49:12.697

在空格上拆分字符串。然后获取新字符串数组中的数字字符串并在它们上运行此函数：

```
public static string Reverse( string s )
{
   char[] charArray = s.ToCharArray();
   Array.Reverse( charArray );
   return new string( charArray );
} 
```

然后将您的数组重新组合成一个字符串。

# java - 自动化任务的 Java EE 身份验证/授权

> ID：11144756
> 
> 赞同：1
> 
> 时间：2012-06-21T18:45:24.667
> 
> 标签：java, jakarta-ee, ejb, java-ee-6, jaas

我正在制作一个 Java EE 应用程序，它需要根据一些事件调用一些 ejb 方法。由于这些 ejb 方法只能由管理员调用，因此事件侦听器需要以管理员身份登录。硬编码管理员用户名/密码不是一个选项。我认为这是一种常见的情况。关于如何解决这个问题的任何想法/见解？

一般来说，这种自动化（没有用户）任务如何执行身份验证/授权？

提前感谢塔库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:03:25.860

好吧，您可以使用几个框架来执行此任务 - 也许使用 Spring Security，或 Apache Shiro，甚至是[PicketBox](http://www.jboss.org/picketbox)，但我想问一下这是否真的需要？
也许您应该使用[JAAS](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jgss/tutorials/index.html)来实现登录机制，并实现您自己的 JAAS 模块，该模块可以工作在一些包含用户名 + 密码的源（您通过实现回调处理程序来提供凭据）。
我知道 JBoss 实现了一个基于属性文件的 JAAS 模块。开始研究这些想法，我认为它们会对你的工作有所帮助。

# facebook - Facebook Iframe 内的媒体查询失败

> ID：11144762
> 
> 赞同：2
> 
> 时间：2012-06-21T18:45:59.040
> 
> 标签：facebook, iframe, css, media-queries, facebook-iframe

我正在寻找为什么我的@media 查询在 Facebook Canvas iFrame 应用程序中不应该触发时触发。在 810 像素宽的页面选项卡上，将触发以下媒体查询：

```
@media only screen and (max-width: 767px) {} 
```

有人可以向我解释为什么会这样吗？html 和 body 显示 810px 宽。在浏览器中单独查看同一页面时，它可以正常工作，因为一旦我将浏览器缩小到 767 像素，查询就会触发......

仅供参考，这是 Facebook 在我的页面选项卡上显示的 iFrame 代码：

```
<iframe name="app_runner_fb_https4fe3673cce0ac5c25797649"
id="app_runner_fb_https4fe3673cce0ac5c25797649"
style="width: 810px; height: 941px;" frameborder="0"
src="https://s-static.ak.facebook.com/platform/page_proxy.php?v=5#app_runner_fb_https4fe3673cce0ac5c25797649">
</iframe> 
```

另外：查询在完整的应用程序页面（http://apps.facebook.com/...）上工作得很好，因为我将画布宽度设置为“流体”。页面选项卡似乎没有使用此设置，只有窄 520 像素或宽 810 像素选项。

感谢您的输入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:11:17.063

我已经解决了这个问题。原来是视口缩放或比例导致查询触发。我没有在我的浏览器上设置默认缩放级别，所以虽然它看起来是 810px 宽，但实际上是 729，由于缩放。为确保用户将视口缩放设置为默认值，请使用元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

# scala - 来自枚举的 Akka 远程 Actor 异常

> ID：11144766
> 
> 赞同：0
> 
> 时间：2012-06-21T18:46:18.250
> 
> 标签：scala, akka

下面的代码包含一个简单的 Akka 远程参与者示例，其中包含两个应用程序，`ChipShop`（服务器）和`Customer`（客户端）。它工作正常，客户发送打印出来的订单，但是如果我在其中切换实现`ChipShopOrder`以使用枚举，那么我会得到一个异常（java.io.IOException：unexpected exception type）。为什么是这样？

例外：

```
[INFO] [06/21/2012 19:40:54.1] [main] [ActorSystem(ShopSystem)] REMOTE: RemoteServerStarted@akka://ShopSystem@127.0.0.1:2552
[INFO] [06/21/2012 19:41:03.692] [ShopSystem-7] [ActorSystem(ShopSystem)] REMOTE: RemoteClientStarted@akka://CustomerSystem@127.0.0.1:2553
[ERROR] [06/21/2012 19:41:03.796] [ShopSystem-3] [ActorSystem(ShopSystem)] REMOTE: RemoteServerError@akka://ShopSystem@127.0.0.1:2552] Error[java.io.IOException:unexpected exception type
    at java.io.ObjectStreamClass.throwMiscException(ObjectStreamClass.java:1518)
    at java.io.ObjectStreamClass.invokeReadResolve(ObjectStreamClass.java:1097)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1780)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at scala.collection.mutable.HashTable$class.init(HashTable.scala:81)
    at scala.collection.mutable.HashMap.init(HashMap.scala:45)
    at scala.collection.mutable.HashMap.readObject(HashMap.scala:132)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1004)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1866)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at akka.serialization.JavaSerializer$$anonfun$1.apply(Serializer.scala:121)
    at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
    at akka.serialization.JavaSerializer.fromBinary(Serializer.scala:121)
    at akka.serialization.Serialization.deserialize(Serialization.scala:73)
    at akka.remote.MessageSerializer$.deserialize(MessageSerializer.scala:21)
    at akka.remote.RemoteMessage.payload(RemoteTransport.scala:210)
    at akka.remote.RemoteMarshallingOps$class.receiveMessage(RemoteTransport.scala:276)
    at akka.remote.netty.NettyRemoteTransport.receiveMessage(NettyRemoteSupport.scala:29)
    at akka.remote.netty.RemoteServerHandler.messageReceived(Server.scala:178)
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
    at akka.remote.netty.RemoteServerHandler.handleUpstream(Server.scala:150)
    at org.jboss.netty.channel.StaticChannelPipeline.sendUpstream(StaticChannelPipeline.java:366)
    at org.jboss.netty.channel.StaticChannelPipeline$StaticChannelHandlerContext.sendUpstream(StaticChannelPipeline.java:528)
    at org.jboss.netty.handler.execution.ChannelUpstreamEventRunnable.run(ChannelUpstreamEventRunnable.java:44)
    at org.jboss.netty.handler.execution.OrderedMemoryAwareThreadPoolExecutor$ChildExecutor.run(OrderedMemoryAwareThreadPoolExecutor.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

要运行，首先启动 ChipShop 应用程序，然后是客户应用程序。资源：

```
import com.typesafe.config.ConfigFactory
import akka.actor.{ ActorSystem, Actor, Props }

object Configs{
    val customerConfig = ConfigFactory.parseString( """
        akka.actor.provider = akka.remote.RemoteActorRefProvider
        akka.remote.netty.hostname = "127.0.0.1"
        akka.remote.netty.port = 2553
    """)

    val shopConfig = ConfigFactory.parseString( """
        akka.actor.provider = akka.remote.RemoteActorRefProvider
        akka.remote.netty.hostname = "127.0.0.1"
        akka.remote.netty.port = 2552
    """)
}

class ChipShopOrder extends Serializable{
    // - Working implementation -
    trait Food
    case object Chips extends Food
    case object Fish extends Food
    case class OrderableItem(item: Food, quantity: Int)
    //----------- End -----------

    // -- Broken implementation --
//  object Food extends Enumeration{
//      type Food = Value
//      val Chips, Fish, Sausage = Value
//  }
//  import Food._
//  case class OrderableItem(item: Food.Value, quantity: Int)
    //----------- End ------------

    case class CustomerOrder(items: Seq[OrderableItem])
    val anOrder = CustomerOrder(Seq(
        OrderableItem(Chips, 2), OrderableItem(Fish, 1)
    ))
}

object Customer extends App{
    val system = ActorSystem("CustomerSystem", Configs.customerConfig)
    val shopAddress = "akka://ShopSystem@127.0.0.1:2552/user/Staff" 
    system.actorFor(shopAddress) ! new ChipShopOrder().anOrder
}

object ChipShop extends App{
    class Staff extends Actor{
        def receive = { case order => println("Received: "+order) }
    }

    ActorSystem("ShopSystem", Configs.shopConfig).actorOf(Props[Staff], "Staff")
} 
```

# sockets - 在 node.js 中接收数据

> ID：11144769
> 
> 赞同：1
> 
> 时间：2012-06-21T18:46:27.160
> 
> 标签：sockets, node.js

我有一个 java 程序通过特定的套接字向我的 node.js 应用程序发送数据。我希望能够获取所有数据，即来自 SQlite 数据库的信息，并将其发送到其他地方。

我发现类似下面的东西可以工作，但它似乎不可靠，因为数据丢失，有时甚至不显示。

```
stream.addListener('data', function(data){
buffer.write(data.toString());
}); 
```

在旁注中，我需要套接字保持打开状态，所以我不能调用“结束”事件。

我真的对 stream.addListener 没有任何附件，所以如果它按我想要的方式工作，我可以使用其他东西。基本上我要问的是，使用 node.js 从套接字获取数据的最有效方法是什么？

PS谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:58:22.017

该`data`事件不能保证一次性将所有数据发送给它。您需要在多个事件上建立一个缓冲区并注意某种分隔符（换行符、空字符，无论您感觉如何）。这是一个项目的示例，我从 IRC 解析数据（从 CoffeeScript 转换）；`parseData`是事件的事件处理程序`data`（例如`socket.on('data', this.parseData);`）：

```
IrcConnection.prototype.parseData = function(data) {
  var line, lines, i;

  data = data.replace("\r\n", "\n");
  this.buffer += data;
  lines = this.buffer.split("\n");
  this.buffer = "";

  /* Put the last line back in the buffer if it was incomplete */
  if (lines[lines.length - 1] !== '') {
    this.buffer = lines[lines.length - 1];
  }

  /* Remove the final \n or incomplete line from the array */
  lines = lines.splice(0, lines.length - 1);
  for (i = 0; i < lines.length; i++) {
    line = lines[i];
    this.emit('raw', line);
  }
}; 
```

# openfiledialog - WPF OpenFileDialog 如何跟踪上次打开文件的目录？

> ID：11144770
> 
> 赞同：2
> 
> 时间：2012-06-21T18:46:49.607
> 
> 标签：openfiledialog, working-directory

正如我们所知，WPF`OpenFileDialog`不再更改应用程序的工作目录和`RestoreDirectory`属性是“未实现的”。但是，在随后打开时，它的初始目录默认为上次打开的文件而不是原始工作目录，因此必须将这些信息存储在某个地方。我想知道是否可以从用户代码中获取/设置它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:23:16.653

在 Windows 7 上，最近的文件信息存储在注册表中的以下键处：

```
HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Comdlg32\OpenSaveMRU 
```

此键下方是各种文件扩展名（例如，、、、`exe`等`docx`）的子键`py`。

现在，如果您想读取这些值，这将获得存储在子键下的所有路径的列表（改编自[此处](http://social.msdn.microsoft.com/Forums/zh/vcmfcatl/thread/bfd89fd3-8dc7-4661-9878-1d8a1bf62697)）：

```
String mru = @"Software\Microsoft\Windows\CurrentVersion\Explorer\ComDlg32\OpenSavePidlMRU";
RegistryKey rk = Registry.CurrentUser.OpenSubKey(mru);
List<string> filePaths = new List<string>();

foreach (string skName in rk.GetSubKeyNames())
{
    RegistryKey sk = rk.OpenSubKey(skName);
    object value = sk.GetValue("0");
    if (value == null)
        throw new NullReferenceException();

    byte[] data = (byte[])(value);

    IntPtr p = Marshal.AllocHGlobal(data.Length);
    Marshal.Copy(data, 0, p, data.Length);

    // get number of data;
    UInt32 cidl = (UInt32)Marshal.ReadInt16(p);

    // get parent folder
    UIntPtr parentpidl = (UIntPtr)((UInt32)p);

    StringBuilder path = new StringBuilder(256);

    SHGetPathFromIDListW(parentpidl, path);

    Marshal.Release(p);

    filePaths.Add(path.ToString());
} 
```

参考：

*   [http://social.msdn.microsoft.com/Forums/zh/vcmfcatl/thread/bfd89fd3-8dc7-4661-9878-1d8a1bf62697](http://social.msdn.microsoft.com/Forums/zh/vcmfcatl/thread/bfd89fd3-8dc7-4661-9878-1d8a1bf62697)
*   [在 fileopen 对话框中获取最后打开的文件](https://stackoverflow.com/questions/5714310/getting-the-last-opened-file-in-fileopen-dialog-box)
*   [http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/c43ddefb-1274-4ceb-9cda-c78d860b687c](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/c43ddefb-1274-4ceb-9cda-c78d860b687c)）

# javascript - 如何使用javascript在可排序中查找值的项目

> ID：11144773
> 
> 赞同：7
> 
> 时间：2012-06-21T18:46:58.973
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有一个*可排序*的，它是从 JSON 文件加载创建的。现在我想删除一个项目。

我从 textarea 收到我必须取消的元素名称。我保存在一个变量`namdel`中。使用 for 循环，我将将此变量与可排序的名称进行比较。

*可排序*的 HTML 代码：

```
<div id="sortparam">

<ul style="" class="ui-sortable" id="sortable">
    <li style="" id="1" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Singular sensation</li>
    <li style="" id="2" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Beady little eyes</li>
    <li style="" id="3" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Little birds </li>
</ul>

</div> 
```

问题是如何阅读这些项目，因为如果我阅读：

```
var contapara=1;
var l = document.getElementById(contapara).innerHTML;
alert(l); 
```

程序在警告窗口中写入：

```
<span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Little birds 
```

我只想要`Little birds`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:52:17.643

试试这个：

```
var contapara = 3;
var l = $.trim($('#'+contapara).text());
alert(l); // Little birds 
```

`document.getElementById`我没有使用 ，而是使用 jQuery 来获取元素。我也在使用`.text()`（`innerText`或`textContent`）而不是`.html()`（`innerHTML`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T19:28:58.240

```
var contapara=1;
var regex = /(<([^>]+)>)/ig;
var l = document.getElementById(contapara).innerHTML.replace(regex, "");
alert(l); 
```

正则表达式是我们的朋友 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:13:44.990

使用纯 javascript（在 chrome、IE、FF 和 opera 中测试）

```
var contapara=3;
var n = document.getElementById(contapara).childNodes;
for(i=0;i<n.length;i++)
{
    if(n[i].nodeType==3 && n[i].nodeValue!=' ') alert(n[i].nodeValue);
} 
```

[**演示。**](http://jsfiddle.net/heera/YJbHe/3/)

# grails - Grails：重定向到不在任何控制器中的 index.gsp

> ID：11144775
> 
> 赞同：16
> 
> 时间：2012-06-21T18:47:06.283
> 
> 标签：grails

在 Grails 中，如何重定向到不属于任何控制器的主页 (index.gsp)？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T19:10:20.110

您可以像这样重定向到“/”：

```
redirect(uri:'/') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T18:50:41.953

为什么需要[重定向](https://grails.github.io/grails-doc/latest/ref/Controllers/redirect.html)而不是[渲染](https://grails.github.io/grails-doc/latest/ref/Controllers/render.html)？`redirect(uri:'/index.gsp')`可能会成功，但我想我会`render(view:'/index')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T13:03:46.177

如果你从 IndexController 重定向，那么你应该 render(view:'/index')

# c# - 包含从 Request.Form 中挑选的数据的单元测试方法。新手问题

> ID：11144776
> 
> 赞同：2
> 
> 时间：2012-06-21T18:47:09.993
> 
> 标签：c#, asp.net, unit-testing, mocking

我已经问了一些关于这个的问题，但还没有找到答案（或者也许明白该怎么做？）。

我们有一个应用程序，我们正在等待用户测试的回复。与此同时，我被要求创建一个 TestProject 并测试所有方面，这是我们小组正在努力实现的目标。该应用程序是用 C#、aspx.net 编写的。

我已经完成了大部分。但绝对想不通如何测试两个方面。我有采用（a）会话变量和（b）Request.Form 数据的方法。

我发现的所有关于模拟的东西似乎都围绕着 MVC 架构。我问的第一个问题（[here](https://stackoverflow.com/questions/11082896/how-to-unit-test-method-that-creates-namevaluecollection-using-request-form-in-c)）说我应该“更改方法以获取 HttpRequestBase”。我不应该更改任何代码（学生安置）。

如何将表单/会话数据提供给我的单元测试？我找不到任何具体的内容。

糟透了是新的。

谢谢！

编辑：：

抱歉，我确实有最小起订量，但缺少一些东西....

这是会话代码。它只在一个地方（一组测试），因为我在大约 7 或 8 个中有 Request.Form 的实例......

```
protected void Page_Load(object sender, EventArgs e)
{
    //get the "Storage" location
    String strStorage = Path.To.Default.Storage;

    XDocument xmlDoc = XDocument.Load(Path.Combine(strStorage, "pending/") + Request.Form["thing"] + ".xml");
    Session["Files"] = "";
    foreach (XElement element in xmlDoc.Elements().Elements())
    {
        if (element.Name.ToString() != "File")
        {
            Session[element.Name.ToString()] = element.Value.ToString();
        }
        else
        {
            Session["Files"] = Session["Files"] + element.Value.ToString() + ";";
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:58:13.310

看看这里关于设置的第二个答案。

[你如何使用 Moq 模拟会话对象集合](https://stackoverflow.com/questions/524457/how-do-you-mock-the-session-object-collection-using-moq)

```
controllerContext.SetupGet(p => p.HttpContext.Session["test"]).Returns("Hello World"); 
```

看看与 Moq 类似的东西是否会让你的会话得到控制。但是一些示例代码会有所帮助。更改名称和任何内容以使您的公司保持最佳利益。

# xpath - Scrapy：无效的 XPath

> ID：11144777
> 
> 赞同：1
> 
> 时间：2012-06-21T18:47:14.990
> 
> 标签：xpath, scrapy

```
hxs.select("//h:h2[re:test(., 'a', 'i')]").extract()

Undefined namespace prefix
xmlXPathEval: evaluation failed
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/usr/local/lib/python2.7/dist-packages/scrapy/selector/libxml2sel.py", line 44,     in select
raise ValueError("Invalid XPath: %s" % xpath)
ValueError: Invalid XPath: //h:h2[re:test(., 'a', 'i')] 
```

我是 XPath 和 Scrapy 的新手。

它出什么问题了？（我正在尝试选择包含单词“a”的节点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:11:30.903

根据回溯，您使用的是未定义的命名空间前缀`re`。我不熟悉scrapy，但似乎您必须在某处定义名称空间前缀。

顺便说一句，您尝试使用的功能不是被调用[`matches`](http://www.w3.org/TR/xpath-functions/#func-matches)吗？

你可以这样称呼它：`//h:h2[matches(., 'a', 'i')]`

另一种选择是 `//h:h2[contains(lower-case(.),'a')]`

另外，你说的（

> 它出什么问题了？（我正在尝试选择包含单词“a”的节点）。

) 与函数的语义相矛盾。在您的代码段中，您实际上是在寻找一个**包含字母 a**的字符串。不为**一言**。

如果 a 是元素中唯一的文本，您也可以尝试使用： `//h:h2[lower-case(.)='a']`

或者，如果您在较长的文本中寻找**a**作为单词，您可以结合使用`matches`with [XPath 正则表达式](http://www.w3.org/TR/xpath-functions/#regex-syntax)。

# visual-studio-2010 - 将网站项目转换为 Web 应用程序项目

> ID：11144778
> 
> 赞同：0
> 
> 时间：2012-06-21T18:47:17.343
> 
> 标签：visual-studio-2010, debugging, web-application-project

我最近将我的项目从网站项目更改为 Web 应用程序项目，以便可以使用构建事件。

我现在正在尝试开发各种问题。

当我构建项目并在 Web 浏览器中重新加载它时，它几乎不会加载正确的版本（有时它会加载）。

就像我对某些文本进行简单更新一样，它会加载最后一页，就像它正在使用页面的缓存版本或其他东西一样。

此外，当我尝试调试时，它永远不会遇到断点。我不确定我需要改变什么来解决这个问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:49:23.537

你使用的是什么浏览器？页面有可能被缓存。对于大多数浏览器，您可以使用 Ctrl + F5 强制重新加载缓存文件。

在 Internet Explorer 中，您可以将 Internet 临时文件的选项更改为“每次访问网页时”，但请注意，这会影响您访问的所有网站。

![浏览器设置](../Images/4a2ed9817f2cb6b3911cdaccffffae23.png)

如果您正在谈论对二进制文件的更改，则可能需要执行 iisreset。如果仍有问题，请尝试删除 ASP.NET 临时文件。

# c# - 如何返回一个带有标签的字符串？

> ID：11144781
> 
> 赞同：1
> 
> 时间：2012-06-21T18:47:42.417
> 
> 标签：c#, asp.net-mvc-3, razor

我将其作为一个简单的测试进行了尝试：

```
@functions {
 private MvcHtmlString helloWorld()
 {
    return Html.EditorFor(m => m.Work.Description);
 }
}
<script type="text/javascript">console.log(@helloWorld().ToString());</script> 
```

但是，显示的生成的 html 格式为

```
&lt;input class=&quot;text-box single-line&quot; id=&quot;Work_Description&quot;
name=&quot;Work.Description&quot; type=&quot;text&quot; value=&quot;&quot; /&gt; 
```

如何返回形式为的字符串

```
<input class="test-box single-line" id="Work_Description" name="Work.Description"
type="text" value="" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:48:40.150

使用`@Html.Raw`. 请注意，如果 helloWorld().ToString() 包含危险代码，则可能是安全问题。

```
<script type="text/javascript">console.log(@Html.Raw(helloWorld().ToString()));</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:11:23.010

凯文是正确的。在您的模型中的 [AllowHtml] 属性中查看属性的另一件事，以及使用 AntiXSSLibrary 进行跨站点攻击。一个很棒的视频可以在这里找到：[http ://www.pluralsight-training.net/microsoft/players/PSODPlayer.aspx?author=scott-allen&name=mvc3-building-security&mode=live&clip=0&course=aspdotnet-mvc3-intro](http://www.pluralsight-training.net/microsoft/players/PSODPlayer.aspx?author=scott-allen&name=mvc3-building-security&mode=live&clip=0&course=aspdotnet-mvc3-intro)

# android - 如何访问手机照片库中的图像？

> ID：11144783
> 
> 赞同：20
> 
> 时间：2012-06-21T18:48:00.160
> 
> 标签：android, android-gallery

有没有人知道如何访问手机的照片库？我正在制作一个应用程序，它拍摄植物叶子的照片并分析图像以确定它是否确定。我们希望我们可以为用户提供两种选择，即拍摄叶子的照片或使用用户已经拍摄的叶子图像。但是，我们得到了参与的照片，但我们不知道如何访问照片库。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-21T18:57:50.443

您必须使用内置的`Intents`. 之后，在您的 上`onActivityResult()`，获取所选图像的路径并将您的图像加载到您的`ImageView`

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >
<TextView
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="@string/hello"
 />
<Button
 android:id="@+id/loadimage"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="Load Image"
 />
<TextView
 android:id="@+id/targeturi"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 />
<ImageView
 android:id="@+id/targetimage"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 />
</LinearLayout> 
```

您的活动

```
 package com.exercise.AndroidSelectImage;

    import java.io.FileNotFoundException;

    import android.app.Activity;
    import android.content.Intent;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.net.Uri;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.ImageView;
    import android.widget.TextView;

    public class AndroidSelectImage extends Activity {

    TextView textTargetUri;
    ImageView targetImage;

     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
         Button buttonLoadImage = (Button)findViewById(R.id.loadimage);
         textTargetUri = (TextView)findViewById(R.id.targeturi);
         targetImage = (ImageView)findViewById(R.id.targetimage);

         buttonLoadImage.setOnClickListener(new Button.OnClickListener(){

     @Override
     public void onClick(View arg0) {
      // TODO Auto-generated method stub
      Intent intent = new Intent(Intent.ACTION_PICK,
        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
      startActivityForResult(intent, 0);
     }});
     }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == RESULT_OK){
     Uri targetUri = data.getData();
     textTargetUri.setText(targetUri.toString());
     Bitmap bitmap;
     try {
      bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(targetUri));
      targetImage.setImageBitmap(bitmap);
     } catch (FileNotFoundException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
     }
    }
    }
    } 
```

![在此处输入图像描述](../Images/8ef96a03a129557db15f0c57b34f753d.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-09-19T10:52:32.600

不要忘记在 AndroidManifest.xml 中添加以下权限：

```
<uses-permission android:name="android.permission.MANAGE_DOCUMENTS" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# maven - Maven 本地存储库代理外部

> ID：11144785
> 
> 赞同：2
> 
> 时间：2012-06-21T18:48:11.433
> 
> 标签：maven, repository, archiva

我在一个组织中支持 Archiva 内部存储库，在该组织中，某些构建环境无法访问开放的 Internet 以获取依赖项。我想我可以将 Archiva 配置为所有外部事物的镜像（mirrorOf 设置为“external.*,!snapshots”的镜像）并使用代理进行设置，这样，如果我的一个构建要求 Archiva 中没有的东西，它将使用代理从我使用代理设置的外部源中获取依赖项。之后，它将被缓存在 Archiva 中，而不必从外部获取。

所以我在我的 Archiva 配置中有 codehaus、sonatype（几个）、基本 Central、Cloudera for Hadoop 等的代理；但是我找不到一种配置，可以防止我的构建尝试直接访问外部源（它们无法访问），但通过使用代理来满足我的 Archiva 中尚未包含的内容。

我在这里缺少一些技巧配置吗？还是我需要切换到 Artifactory 或 Nexus 才能获得这种功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:56:31.150

您需要在每个构建环境上设置 Maven 设置以指向您的档案实例。
例如在 $user.home/.m2/settings.xml

```
<mirror>
  <id>InternalMirror</id>
  <mirrorOf>*</mirrorOf>
  <name>Internal Mirror.</name>
  <url>http://archivaserver/archivaPath/</url>
</mirror> 
```

我以前没有用过 Archiva，但我用 Nexus 成功地做到了这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:44:49.500

切换到联结会更可取。

我附上了一个可用于nexus的settings.xml....

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <localRepository>F:\m2\repository</localRepository>

    <pluginGroups>
                <pluginGroup>org.codehaus.sonar</pluginGroup>
        </pluginGroups>

    <proxies>
        <proxy>
            <active>true</active>
            <protocol>http</protocol>
            <host>your-host-id</host>
            <port>8080</port>
        </proxy>
    </proxies>

    <mirrors>
    <mirror>
        <id>nexus</id>
        <mirrorOf>*,!sonar</mirrorOf>
        <url>http://nexus-repo-url/content/groups/public</url>
        <name>Nexus</name>
    </mirror>
    </mirrors>
    <profiles>
        <profile>
            <id>NexusProfile</id>
            <activation>
                <activeByDefault>true</activeByDefault>
                <jdk>1.5</jdk>
            </activation>
            <repositories>
                <repository>
                  <snapshots>
                    <enabled>true</enabled>
                  </snapshots>
                  <releases>
                    <enabled>true</enabled>
                  </releases>
                  <id>nexus</id>
                  <name>default-repos</name>
                  <url>http://nexus-repo-url/content/groups/default-repos</url>
                </repository>
                <repository>
                  <snapshots>
                    <enabled>true</enabled>
                  </snapshots>
                  <releases>
                    <enabled>true</enabled>
                  </releases>
                  <id>nexus</id>
                  <name>default-repos</name>
                  <url>http://nexus-repo-url/content/groups/default-repos</url>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                  <snapshots>
                    <enabled>true</enabled>
                  </snapshots>
                  <releases>
                    <enabled>true</enabled>
                  </releases>
                  <id>nexus</id>
                  <name>default-repos</name>
                  <url>http://nexus-repo-url/content/groups/default-repos</url>
                </pluginRepository>
                <pluginRepository>
                  <snapshots>
                    <enabled>true</enabled>
                  </snapshots>
                  <releases>
                    <enabled>true</enabled>
                  </releases>
                  <id>nexus</id>
                  <name>default-repos</name>
                  <url>http://nexus-repo-url/content/groups/default-repos</url>
                </pluginRepository>
            </pluginRepositories>
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>NexusProfile</activeProfile>
    </activeProfiles>

    <servers>
        <server>
            <id>nexus</id>
            <username>anonymous</username>
            <password>password</password>
        </server>
    </servers>
</settings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:54:02.043

我建议您阅读[http://maven.apache.org/guides/mini/guide-mirror-settings.html](http://maven.apache.org/guides/mini/guide-mirror-settings.html)以配置您的设置。我推荐你使用Archiva 1.4 版本系列，它的性能更高。我们目前正在重写 ui，请查看真实示例[https://archiva-repository.apache.org/archiva/index.html?request_lang=en](https://archiva-repository.apache.org/archiva/index.html?request_lang=en)。如果您想要自己的版本，您必须从此处下载快照：[https ://builds.apache.org/view/AF/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/](https://builds.apache.org/view/A-F/view/Archiva/job/archiva-all-maven-3.x-jdk-1.6/)

# android - 如何在不重新启动应用程序的情况下刷新 Android 应用程序的区域设置更新的所有 UI？

> ID：11144786
> 
> 赞同：0
> 
> 时间：2012-06-21T18:48:13.477
> 
> 标签：android, user-interface, locale

我需要我的应用程序刷新所有 UI 以使用用户刚刚切换到的新语言环境，而无需重新启动应用程序，有没有办法做到这一点？

例如，当我测试我的应用程序时，我使用的是英语，而现在我改为使用法语，一些 UI 确实更新为以法语显示，而有些仍以英语显示。有什么我可能会丢失的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:18:35.867

如果通过设备设置更改了区域设置，则活动的默认行为是系统自动重新创建/重新启动它们，从而使它们有机会使用适当的字符串资源（当然，如果[应用程序针对不同的区域设置具有不同的字符串资源](http://developer.android.com/intl/zh-CN/guide/topics/resources/localization.html#creating-alternatives)）。

这称为[С配置更改](http://developer.android.com/intl/zh-CN/reference/android/app/Activity.html#ConfigurationChanges)。其他类型的配置更改将是设备旋转、字体大小更改等。但程序员可以覆盖默认行为，即在 AndroidManifest.xml 中说明绕过或覆盖[Activity.onConfigurationChanged()](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)的配置更改。

因此，请确保 (1) 您的应用程序语言环境支持的每个字符串资源都有专用的字符串资源，并且 (2) 您不会阻止此类配置更改的默认配置更改行为。

# jquery - 将唯一的 jQuery 事件处理程序委托给子元素

> ID：11144789
> 
> 赞同：1
> 
> 时间：2012-06-21T18:48:15.667
> 
> 标签：jquery

Mootools 具有以下语法，用于将唯一事件处理程序委托给使用不同事件类型的给定父元素的子元素。jQuery 中是否存在类似的语法？我试图避免为要附加元素的每个元素编写单独的案例。

```
$('myElement').addEvents({
    // monitor an element for mouseover
    mouseover: fn,
    // but only monitor child links for clicks
    'click:relay(a)': fn2
}); 
```

我对传递的第二个项目更感兴趣，它基本上说“如果我单击#myElement 内的锚点，则调用此函数。” 我可以轻松地扩展此列表，使用我想要的任何事件向其他孩子添加更多独特的事件处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:50:12.460

我能想到的最接近的是`on()`：

```
$('#myElement').on('mouseover', 'a', function(){
        // do something when an a element within the '#myElement' element is moused-over
    }); 
```

还有`delegate()`，它实现了很多相同，但使用的语法略有不同：

```
$('#myElement').delegate('a', 'mouseover', function(){
    // do something when the 'a' within the '#myElement' element is moused-over
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6nNvZ/1)。

参考：

*   [`delegate()`](http://api.jquery.com/delegate/).
*   [`on()`](http://api.jquery.com/on/).

# html - 位置：固定时如何在屏幕中心浮动DIV？

> ID：11144791
> 
> 赞同：1
> 
> 时间：2012-06-21T18:48:34.910
> 
> 标签：html, css

我指的是[本网站的红丝带横幅](http://classictutorials.com/)

现在，当未设置此代码的位置时，使其居中对齐。

```
margin: 0 auto 30px; 
```

但是当我向下滚动并`position:fixed`使用 JS 制作 div 时，相同的代码将不起作用！即使屏幕分辨率/浏览器不断变化，我应该怎么做才能使其居中对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:53:23.040

试试这个：

```
{
 position:fixed;
 left:50%;
 margin-left:470px;

} 
```

**这里是使用chrome开发者工具调试后的截图链接：** [https ://dl.dropbox.com/u/19982181/Screen-Shot-2012-06-22-at-12.35.jpg](https://dl.dropbox.com/u/19982181/Screen-Shot-2012-06-22-at-12.35.jpg)

**在你的 window.scroll 函数中改变这个。**

```
$('#socio').css({
"position":"fixed",
"margin-left":"-470px",
"top": "27px",
"left": "50%"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:53:42.613

因为页面上的元素得到一个

```
margin-left: XXXpx; 
```

当您向下滚动时。这是通过 JS 完成的，我猜它只是通过 jQuery 的 .offset() => [http://api.jquery.com/offset/测量左浏览器边框和元素本身之间的宽度](http://api.jquery.com/offset/)

编辑：就我个人而言，我也更喜欢 SVS 的答案，但这仅在您知道元素的宽度时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:14:37.487

试试这个代码：

```
margin-right: auto;
margin-left: auto; 
```

# java - 有什么方法可以读取 .txt 文件并在 Java 中制作内容的二维数组？

> ID：11144793
> 
> 赞同：0
> 
> 时间：2012-06-21T18:48:41.117
> 
> 标签：java, swing, bufferedreader

我希望用某些信息填充 JTable。该信息（即存储在表格行中的值）会定期更改。我想实现它的方法是将每次 JTable 更新为 .txt 文件时存储内容，然后在 JTable 中显示该文本文件。

现在我的问题是这是一个好方法吗？我的意思是，如果我将文本文件的内容存储到 JTable 中，当 JTable 中更新某些内容时，除非用户重新运行应用程序，否则该更新不会显示给用户（因为无法读取文本文件并且一次性写完）。

任何人都可以建议我一个好的方法吗？该应用程序需要是实时的，因此每次我希望用户在应用程序运行时动态查看更新的信息。我不希望他们一次又一次地关闭应用程序以查看更新的信息。我正在使用Java和Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:58:09.527

这是关于堆栈溢出的另一个问题，可能会对您有所帮助

[将文件内容读入二维数组](https://stackoverflow.com/q/8045266/1435749)

这是将文件读入二维数组的代码

```
FileInputStream inputStream = new FileInputStream(fileName);
Scanner scanner = new Scanner(inputStream);
DataInputStream in = new DataInputStream(inputStream);
BufferedReader bf = new BufferedReader(new InputStreamReader(in));

int lineCount = 0;
while ((line = bf.readLine()) != null)
{
    String[] numbers = line.split(" ");
    for ( int i = 0 ; i < 3 ; i++) 
         matrix[lineCount][i] = Double.parseDouble(numbers[i]);

    lineCount++;
}

bf.close(); 
```

# objective-c - 单例中的静态变量

> ID：11144799
> 
> 赞同：0
> 
> 时间：2012-06-21T18:49:06.533
> 
> 标签：objective-c, ios, variables, static, singleton

我有一个单例，想要创建一个内部标志变量，该变量应该指示单例已“释放”，并且当我获得单例实例时，它应该重新初始化自身。

对于这种情况，我决定使用静态变量

```
static BOOL wasReleased = NO; 
```

并在销毁函数中将其设置为“YES”：

```
- (void)destroy
{
    wasReleased = YES;
    ...release internal singleton resources...
} 
```

但是当我尝试获取单例实例时，此变量值始终为“NO”，因此内部资源在释放后从未重新初始化：

```
+ (MySingleton *)sharedInstance
{
    if (sharedCoordinator == nil)
    {
        sharedCoordinator = [[super alloc] init];
        [sharedCoordinator initialize];
    }

    if (wasReleased) 
    {
        [sharedCoordinator initialize];
    }

    return sharedCoordinator;
} 
```

我对这种情况的理解可能是错误的，请为我澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:02:49.727

删除您的静态`wasReleased`实例变量并使其成为`MySingleton`类的属性（不要忘记合成它）

```
@property (nonatomic, assign) BOOL wasReleased; 
```

然后在`-destroy`方法中：

```
- (void)destroy
{
    self.wasReleased = YES;
    //...release internal singleton resources...
} 
```

然后（删除你的静态 ivar `sharedCoordinator`- 我想你有一个）

```
+ (MySingleton *)sharedInstance
{
    static MySingleton *sharedCoordinator = nil;
    if (!sharedCoordinator)
    {
        sharedCoordinator = [[MySingleton alloc] init];
        [sharedCoordinator initialize];
    }

    if (sharedCoordinator.wasReleased) 
    {
        [sharedCoordinator initialize];
        sharedCoordinator.wasReleased = NO; //If you are not doing it in the -initialize method
    }

    return sharedCoordinator;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:33:31.187

> 我对这种情况的理解可能是错误的，请为我澄清一下。

你为什么首先使用单例？单例永远不需要被释放或重新初始化。如果您需要做这些事情，很可能您应该在需要时简单地创建类的新实例。

此外，最好避免将其用作实例方法名称，因为这很容易与每个类所具有`-initialize`的类方法混淆。`+initialize`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:27:49.313

这并不能解决您的直接关注，但您应该重新考虑您的设计。销毁单例不是一个好主意。如果您试图释放大量资源（图像、视频等），您可以让单例上的实际方法负责重新实例化它们。

以下将无法按预期工作：

```
- (id)initSomeClassUsingTheSingleton
{
  mySingletonVariable = [MySingleton sharedInstance];
}

- (void)someOtherFunctionOccuringAfterDestroy
{
  [mySingletonVariable aMethodOnTheSingleton];
} 
```

这是使用单例的一种完全有效的方法，但在您的情况下，您不能这样做。相反，您的单例应该具有如下方法：

```
- (void)aMethodOnTheSingleton
{
  //if resources for method not allocated
    // .. allocate

  // do the rest
} 
```

# xpath - 祖先属性的 Xpath 测试不等于字符串

> ID：11144805
> 
> 赞同：7
> 
> 时间：2012-06-21T18:49:38.093
> 
> 标签：xpath, attributes

我正在尝试测试元素祖先上的属性是否不等于字符串。

这是我的XML...

```
<aaa att="xyz">
<bbb>
<ccc/>
</bbb>
</aaa>
<aaa att="mno">
<bbb>
<ccc/>
</bbb>
</aaa> 
```

如果我对元素 ccc 采取行动，我正在尝试测试其祖父母 aaa @att 不等于“xyz”。

我目前有这个...

```
ancestor::aaa[not(contains(@att, 'xyz'))] 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T19:02:45.593

假设通过说*元素的祖先，*您指的是具有子元素的元素，这个 XPath 表达式应该这样做：

```
//*[*/ccc][@att != 'xyz'] 
```

它选择

1.  所有节点
2.  至少有一个`<ccc>`孙节点
3.  并且具有`att`值为 not 的属性`xyz`。

**更新：**限制测试的祖父母`<ccc>`。

**更新 2：**适应您修改后的问题：

```
//ccc[../parent::aaa/@att != 'xyz'] 
```

选择

1.  所有`<ccc>`元素
2.  有一个祖父母`<aaa>`，其属性`att`设置为非`xyz`

# css - UL 底部边框与浮动 LI 不设置高度

> ID：11144810
> 
> 赞同：0
> 
> 时间：2012-06-21T18:49:52.023
> 
> 标签：css

我设置了一个 jsFiddle 来展示我在做什么：

[http://jsfiddle.net/UfzCS/](http://jsfiddle.net/UfzCS/)

基本上，我在 UL 上设置的边界（需要一直穿过）显示在 LI 上方（而不是下方），因为 LI 向左浮动。有什么解决方法吗？我知道我可以设置一个高度，但我可以将文本设置为可变大小，以便高度可以动态变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:52:48.980

你的 LI 是浮动的，所以 UL 不知道在哪里包装它们。

解决此问题的一种简单方法是制作 UL`float: left`或添加一个`overflow: hidden`。

# android - 用于在 ListView 上创建“选定”效果的样式是什么？我该如何解决这个问题？

> ID：11144811
> 
> 赞同：1
> 
> 时间：2012-06-21T18:49:52.160
> 
> 标签：android, android-layout

当我触摸 a 中的某物时，`ListView`我得到一个蓝色高光。现在我在其他地方有另一种观点，我想看起来一样；我点击它并获得蓝色高光。我以为这是一个`list_selector_background`，但是当我尝试时，我得到了橙色。

我的第一个问题是：股票 ListView 项目的背景选择时的样式是什么？

其次（更重要的是），我该如何解决这个问题？我正在寻找调查链，比如...

> *   项目清单
> *   查看默认主题（ABC）
> *   看主题 ABC 的风格（QWE）
> *   查看样式 QWE 并获取选定的可绘制对象 (RTY)
> *   查看可绘制的 RTY

或者无论实际的调查线索是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:05:52.313

在此视图的布局 .xml 中，您希望向属性 android:background 添​​加一个名为 button_selector 的新 .xml，如下所示...

```
android:background="@drawable/button_selector" 
```

然后在名为 button_selector.xml 的可绘制文件夹中创建一个新的 android .xml，其中包含此代码....

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected -->
    <item android:drawable="@drawable/button_selected"
          android:state_focused="true" />
    <!-- When not selected-->
    <item android:drawable="@drawable/button_unselected" />
</selector> 
```

然后在可绘制文件夹中创建您的 button_unselected.xml 和 button_selected.xml 以及每个按钮的布局。

这是我的 button_unselected.xml 文件之一的示例....

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape android:shape="rectangle" >
        <solid android:color="#10000000" />

        <padding
            android:bottom="4dp"
            android:top="4dp" />

        <corners android:radius="5dp" />
    </shape>
</item>
<item>
    <shape android:shape="rectangle" >

        <solid android:color="#20558e34" />
    </shape>
</item>
</layer-list> 
```

希望这可以帮助...

# objective-c - Interface Builder 中的圆角标签...？

> ID：11144813
> 
> 赞同：1
> 
> 时间：2012-06-21T18:49:57.027
> 
> 标签：objective-c, ios, interface-builder, xcode4.3

> **可能重复：**
> [如何在 iPhone 上创建圆角 UILabel？](https://stackoverflow.com/questions/510382/how-do-i-create-a-round-cornered-uilabel-on-the-iphone)
> [如何在 iphone 中使用圆角标签，UILabel Round Corners](https://stackoverflow.com/questions/8530115/how-to-use-rounded-corner-label-in-iphone-uilabel-round-corners)

仍然是 Xcode 和 Interface Builder 的入门。我制作了一个带有几个“标签”字段的 UI 屏幕来显示随机数据。但是当我从屏幕背景颜色更改标签颜色时，它看起来很糟糕，因为它们是完美的正方形。有没有办法为标签圆角？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:55:15.753

引用另一个[SO 答案](https://stackoverflow.com/a/510630/994466)：

> iPhone OS 3.0 及更高版本支持 CALayer 类的cornerRadius 属性。每个视图都有一个您可以操作的 CALayer 实例。这意味着您现在可以在一行中获得圆角：

该帖子对如何实现此行为进行了非常详细的描述。

# django - 自动完成返回未定义的数据

> ID：11144815
> 
> 赞同：1
> 
> 时间：2012-06-21T18:50:01.907
> 
> 标签：django, jquery

要对输入进行自动完成，我这样做：在`views.py`：

```
def getpositions(request):
    if request.is_ajax():
        query = request.GET.get("term", "")
        positions=Position.objects.filter(name__icontains=query)
        results = []
        for position in positions:
            position_json={}
            position_json['name']=position.name
            results.append(position_json)
        data=simplejson.dumps(results)
    else:
        data = 'error'
    return HttpResponse(data, mimetype='application/json') 
```

在`template`：

```
$(document).ready(function(){
                    $("#positions").autocomplete({
                        source: "{% url CompanyHub.views.getPositions%}",
                        success: function( data ) {
                                    response( $.map( data, function( item ) {
                                        return {
                                            label: item.name,
                                            value: item.name
                                        }
                                    }));
                                },
                        minLength: 2,
                      });
                }); 
```

并且`#positions`是：`<input type="text" id="positions" />`

一切都很好，但它只是显示`Undefined`而不是显示结果列表，我尝试了很多东西但没有办法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:01:49.990

jQuery UI 自动完成没有`success`用于格式化数据的选项。在此处查看选项列表[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)。相反，您可以为选项使用回调函数，`source`并自己处理自己的 ajax 调用并根据需要格式化数据。

```
$("#positions").autocomplete({                    
       source: function( req,resp ) {
         $.get("{% url CompanyHub.views.getPositions%}",
              {term:req.term},function(data){
                   resp( $.map( data, function( item ) {
                                        return {
                                            label: item.name,
                                            value: item.name
                                        };
                                    })
                             );
                           });
            },
            minLength: 2,
            }); 
```

# python - Python 模块/包系统对大型项目的可扩展性

> ID：11144819
> 
> 赞同：1
> 
> 时间：2012-06-21T18:50:16.003
> 
> 标签：python, module, namespaces, package

我想为一个大型项目建立一个很好的模块层次结构。（Python 似乎妨碍了这一点）我对模块和包的区别以及它们与命名空间的 C++ 概念的关系感到困惑。具体来说，我的项目是一个编译器，代码生成阶段想要从一组抽象表示中查询属性，这些抽象表示在不同的目录中（实际上在层次结构中很远）

问题可以表述为：

Ass：让 a.py 和 b.py 成为项目层次结构中某处的两个源文件

然后：我想从 a.py 引用 b.py 中定义的函数——理想情况下，使用项目定义良好的根目录（即 /src）的相对路径。我们想要一个通用的解决方案，这将永远有效..

Dirty hack：这听起来很荒谬，但我将这个项目中包含 .py 的所有子目录放入 PYTHONPATH 中，我们将能够用它们的名称引用它们，但是这样代码的读者就会失去任何层次感和关系感不同的项目类等。

注意：Python.org 上的教程只提到了从文件 c.py 引用放置在其父目录中的文件 d.py 的特殊情况。使 Python 扩展到真正的大型项目的普遍性在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:09:38.357

我不确定这是否是问题，但让我们看看。

假设我有以下包方案（`__init__.py`为便于阅读而排除的文件）：

```
foo/baz/quux/b.py
foo/baz/quux/quuuux/c.py
foo/bar/a.py 
```

我的`foo/baz/quux/b.py`文件包含以下内容：

```
def func_b():
    print 'func b' 
```

我`foo/baz/quux/quuuux/c.py`的是：

```
def func_c():
    print 'func c' 
```

如果包含`foo`（在您的情况下为`src`*）的根目录位于 Python 路径中，则 aur`foo/bar/a.py`文件可以从以下位置导入任何其他模块`foo`：

```
import foo.baz.quux.b as b
import foo.baz.quux.quuuux.c as c

def func_a():
    b.func_b()
    c.func_c() 
```

并且可以使用`foo/bar/a.py`这种方式：

```
import foo.bar.a as a

a.func_a() 
```

你试过了吗？你有什么错误吗？

* 当你部署你的项目时，我不相信根会是`src`，但让我们通过省略它来保持它的简单:)

# perl - 创建类对象

> ID：11144825
> 
> 赞同：0
> 
> 时间：2012-06-21T18:50:27.860
> 
> 标签：perl

我正进入（状态：

```
Can't call method "test" without a package or object reference at 4.pl line 6. 
```

我不知道为什么，有什么想法吗？

用户.pm

```
package Users; 
sub new{
    print "Created\n"; 
}
sub test{
    print "a";
}
1; 
```

测试.pl

```
BEGIN {
  push @INC,"/home/baddc0re/Desktop/perl_test/";
}
use Users;
$user = new Users();
$user->test(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:56:51.850

Perl 中的对象构造不是这样工作的。构造函数必须显式返回一个已使用[该`bless`函数](http://perldoc.perl.org/functions/bless.html)对对象进行的引用；事实上，在 Perl 中，这是定义构造函数的，因为 " `new`" 只是子例程的另一个名称，并且与 C++ 不同，调用命名函数`new`不会强制 Perl 创建对象。在这个特定的例子中，`new`只是返回 的返回值`print`，这可能只是一些真实的值，并且试图`test`在这个值上调用方法失败，因为它没有被祝福到任何类中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:59:50.630

我建议您使用语法`$users = Users->new()`而不是`new Users`. 你忘了[祝福](http://perldoc.perl.org/functions/bless.html)方法里面的价值观`new`。请[`perlootut`](http://perldoc.perl.org/perlootut.html)在 perldoc 下阅读。

**用户.pm**

```
package Users;

sub new {
    my $class = shift;

    my $self = {};
    bless $self, $class;
    return $self;
}

sub test {
    print "a";
}

1; 
```

**主要的**

```
use strict;
use Users;

my $users = Users->new();
print $users->test(); 
```

# java - 修改struts 2中的日期对象

> ID：11144828
> 
> 赞同：0
> 
> 时间：2012-06-21T18:51:26.387
> 
> 标签：java, jsp, datetime, date, struts2

我有一个日期对象，我只需要添加 15 分钟。这不是为了显示，实际对象的分钟需要修改。

当我尝试通过`<s:set>`标签修改它时，日期被视为字符串。我不确定在这种情况下是否应该使用 s:set 。

我知道我应该在 Java 端进行此类修改，但我想测试这两种方法，特别是如果此日期修改实际上很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:54:24.853

我最终使用了另一种方法。我用了一个小时和分钟的变量。代码主要在JSP中，我觉得这样效率更高。

对于那些想知道的人，我正在生成一个事件日历。我需要用一定数量的空闲时间链接填写事件之间的时间。我认为在我的事件列表中创建“空事件”效率低下，所以我认为在 JSP 端这样做会更好。

# c++ - 这是 getline() 的错误，还是我做错了什么。使用 getline() 的正确方法？

> ID：11144834
> 
> 赞同：5
> 
> 时间：2012-06-21T18:51:41.633
> 
> 标签：c++, istream

这可能不是错误，但我不知道出了什么问题。我的第一个条目在第二次迭代中为 str1 重复，并且从那时起是相同的方式。只有第一次迭代顺利。

```
#include <iostream>
#include <string>
using namespace std;

int main () {

cout << " \n Enter two words. \n " ;
char c = 'y';
string str;
string str1;
while (c == 'y'){

    getline(cin,str);

    getline (cin,str1);

    cout << " \n\n str : " << str << " str1 : " << str1 ;
    cout << " \n Continue ? \n " ;
    cin >> c;
}

return 0;
} 
```

输出是：

```
输入两个字。
 你好世界
这是先生

 str : 你好世界 str1 : 这是先生
 继续 ？
 是的
你好世界

 str : str1 : 你好世界
 继续 ？
 n

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:56:14.450

添加

```
cin.ignore( std::numeric_limits<std::streamsize>::max(), '\n' ); 
```

在你之后

```
cin >> c; 
```

考虑以下输入：

```
 dog
    cat
    y
    owl
    fish
    n 
```

如果我们单独检查输入流中存在的字符，我们将看到：

```
 d o g \n c a t \n y \n o w l \n f i s h \n n \n 
```

第一次调用`getline`消费者`dog\n`；第二个消耗`cat\n`，留下这个：

```
 y \n o w l \n f i s h \n n \n 
```

第一次调用`cin >> c`只消耗`y` **但不消耗后续的换行符**，留下这个：

```
 \n o w l \n f i s h \n n \n 
```

现在，有趣的事情开始了：在下一次调用 时会发生什么`getline`？当然，为什么它会读到下一个换行符。所以下一个调用`getline`返回*一个空行*，并留`owl...`在输入流中。

如上所述，解决方案是消耗（现在无用的）输入行的剩余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:31:34.627

正如罗布所说。

但是一个看起来更好的替代修复：

```
// change
char c = 'y';
....
while (c == 'y'){
....
    cin >> c;

// Into
std::string c = "y";
....
while (c == "y"){
....
    std::getline(cin, c); 
```

在处理手动用户输入时，您应该小心使用 >> 运算符，因为这将始终在输入中留下 '\n'。这意味着您可以使用检索 '\n' 字符的方法 (getline())，也可以手动将其删除 (ignore())。

# android - 您如何使用链接到许多活动的项目列表来组织应用程序？

> ID：11144835
> 
> 赞同：0
> 
> 时间：2012-06-21T18:51:43.570
> 
> 标签：android, android-layout

我正在申请，但我不知道该怎么做。

> 我有一长串tableRows。其中大约 200 个。它们是特定产品的不同型号。单击每一行时，应显示一个屏幕，其中包含该项目的规格供用户阅读。

这是我的选择，我需要帮助和指导，因为我是初学者（但我越来越先进）

## 第一种方法

为每个项目创建一个活动。用户将单击该行，然后他们将不得不按返回以返回列表。（我知道该怎么做。我很好）

## 第二种方法

我读到了水平页面滑动。类似于 Play 商店。我更喜欢这个选项，但坚持大量活动会更安全吗？当用户单击一行时，它会将他们带到项目规范，他们将能够在所有项目之间左右滑动。按返回会将它们带回列表。（这是我需要完整的一步一步的指导，所以我可以为将来学习，谢谢）

有没有人有任何其他建议我将如何处理这么多的数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:49:44.583

你有一长串的项目。这建议您使用 ListActivity 来显示项目。如果项目有相似之处，请使用一个视图来显示它们，并使用一个活动来显示详细信息。如果项目完全不同，在 getView 和不同的活动中使用不同的布局来膨胀。但是，将项目放在一个列表中表明存在相似之处，最好在列表视图中使用一种布局，并使用一种活动来获取详细信息。

或者，您可以根据显示方式的相似性对项目进行分组。您最终可能会在列表视图中使用十个不同的视图，以及十个不同的活动。

# java - 从 assets 或 res/raw 中的文件获取 Uri

> ID：11144837
> 
> 赞同：3
> 
> 时间：2012-06-21T18:51:45.857
> 
> 标签：java, android, pdf, uri, android-resources

我试图让这个工作，我在网上查看了许多不同的资源（正如你从我所做的所有评论中看到的那样）。我想访问位于 assets 或 res 中的 .pdf 文件；哪一个都没有关系，所以最简单的方法就可以了。

我有下面的方法，它将获取实际文件，并将调用另一个方法（在下面的第一个方法下），参数中包含 Uri。

非常感谢您的帮助，我将随时回答问题或添加更多内容。

```
private void showDocument(File file)
{
    //////////// ORIGINAL ////////////////////
    //showDocument(Uri.fromFile(file));
    //////////////////////////////////////////

    // try 1
    //File file = new File("file:///android_asset/RELATIVEPATH");

    // try 2
    //Resources resources = this.getResources();

    // try 4
    String PLACEHOLDER= "file:///android_asset/example.pdf";
    File f = new File(PLACEHOLDER);

    //File f = new File("android.resource://res/raw/slides1/example.pdf");

    //getResources().openRawResource(R.raw.example);

    // try 3
    //Resources resources = this.getResources();
    //showDocument(Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://" + resources.getResourcePackageName(R.raw.example) + '/' + resources.getResourceTypeName(R.raw.example) + '/' + resources.getResourceEntryName(R.raw.example)));

    showDocument(Uri.fromFile(f));
}

protected abstract void showDocument(Uri uri); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T19:06:27.300

从[链接](http://androidbook.blogspot.in/2009/08/referring-to-android-resources-using.html)和[获取 .mp3 文件的 URI 存储在 android 的 res/raw 文件夹中](https://stackoverflow.com/questions/7976141/get-uri-of-mp3-file-stored-in-res-raw-folder-in-android)

唱资源ID，格式为：

```
"android.resource://[package]/[res id]" 
```

Uri 路径 = Uri.parse("android.resource://com.androidbook.samplevideo/" + R.raw.myvideo);

或者，使用资源子目录（类型）和资源名称（不带扩展名的文件名），格式为：

“android.resource://[包]/[资源类型]/[资源名称]”

Uri 路径 = Uri.parse("android.resource://com.androidbook.samplevideo/raw/myvideo");

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T16:37:29.577

如果您不知道资源的 ID，而只知道名称，则可以使用Android [Resouces 对象的](http://developer.android.com/reference/android/content/res/Resources.html)[getIdentifier(...)](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法。您可以使用应用程序上下文的[getResources()](http://developer.android.com/reference/android/content/Context.html#getResources%28%29)检索后者。

例如，如果您的资源存储在*/res/raw*文件夹中：

```
String rawFileName = "example"  // your file name (e.g. "example.pdf") without the extension

//Retrieve the resource ID:
int resID = context.getResources().getIdentifier(rawFileName, "raw", context.getPackageName());

if ( resID == 0 ) {  // the resource file does NOT exist!!
    //Debug:
    Log.d(TAG, rawFileName + " DOES NOT EXISTS! :(\n");

    return;
}

//Read the resource:
InputStream inputStream = context.getResources().openRawResource(resID); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T04:27:23.787

很有帮助的帖子。

这里有一个替代方案：尽可能使用 FileDescriptor 而不是 Uri。

示例：（在我的情况下，它是一个原始音频文件）

```
FileDescriptor audioFileDescriptor = this.resources.openRawResourceFd(R.raw.example_audio_file).getFileDescriptor();

this.musicPlayer.setDataSource(backgroundMusicFileDescriptor); 
```

# c# - 在 C#.Net 中嵌入 SQL localdb 数据库

> ID：11144838
> 
> 赞同：4
> 
> 时间：2012-06-21T18:51:45.860
> 
> 标签：c#, database, embed

我想创建一个应用程序，为此我需要一个数据库。通过搜索谷歌，我知道对于我的目的来说，SQL localdb 会很好，因为它轻巧快速。请告诉我在我的程序中嵌入这个数据库的过程。我想创建一个可以在任何 Windows 机器上运行的桌面应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T19:26:17.880

[我在GitHub](https://github.com/martincostello/sqllocaldb)中维护了 SQL LocalDB API 的 C# 包装器，它也可以在[NuGet](https://www.nuget.org/packages/MartinCostello.SqlLocalDb/)中使用。它将允许您在应用程序中管理 SQL LocalDB 的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T08:37:22.013

you can use Siaqodb,it is a C# written db and it is designed for embedded envs - [http://siaqodb.com](http://siaqodb.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T18:54:29.570

Sql CE 可能很适合。Scott Guthrie 发布了关于实现这一点的信息 - [http://weblogs.asp.net/scottgu/archive/2011/01/11/vs-2010-sp1-and-sql-ce.aspx](http://weblogs.asp.net/scottgu/archive/2011/01/11/vs-2010-sp1-and-sql-ce.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:03:34.223

我以这种方式使用 SQL Express 取得了成功。

像您描述的那样部署最广泛的数据库是 SQLite。我也会检查一下。

SQLite[这里](http://www.sqlite.org/)

[在此处](http://sqlite.phxsoftware.com/)使用 C# 包装器

[或者这里](http://code.google.com/p/csharp-sqlite/)的 SQLite 的 C# 端口

# cakephp - CakePHP 中 requireSecure 的对面

> ID：11144839
> 
> 赞同：1
> 
> 时间：2012-06-21T18:52:12.623
> 
> 标签：cakephp, cakephp-1.2

CakePHP 在 SecurityComponent 中有一个 requireSecure 函数。在传递信用卡号等敏感信息时，我使用它来强制使用 SSL。

**问题：**

*   有 requireNonSecure 功能吗？
*   如果没有 requireNonSecure 函数，是否可以在不修改原始文件的情况下扩展/添加函数到 CakePHP 的核心文件？

我想要一个 requireNonSecure 功能，因为我的一些页面嵌入了只能在我们的域名上播放的视频。使用 SSL 时，视频托管服务无法识别我们的域名并且无法播放视频。

这是控制器的 beforeFilter 中的一些代码：

```
function beforeFilter() {
    parent::beforeFilter();

    $this->Security->validatePost = false; // disable CSRF protection
    $this->Security->blackHoleCallback = 'forceSSL';
    $this->Security->requireSecure('pay', 'index');

    $this->Auth->allow('index');
} 
```

这是 app_controller.php 中的回调

```
function forceSSL() {
    $redirect = '';
    if (!empty($this->params['url']['redirect'])) {
        $redirect = '?redirect=' . $this->params['url']['redirect'];
    }

    $this->redirect('https://' . rtrim(env('SERVER_NAME'), '/') . $this->here . $redirect);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:53:02.097

一种解决方案是将函数附加到 beforeFilter ，如下所示：

在控制器中：

```
function beforeFilter() {
    parent::beforeFilter();

    // Require non secure (http) for video action
    $this->requireNonSecure('video');

    // ... other code here

} 
```

在 app_controller.php 中：

```
function requireNonSecure() {
    $requireNonSecure = array_map('strtolower', func_get_args());

    if (in_array(strtolower($this->action), $requireNonSecure) || $requireNonSecure == array('*')) {
        if ($this->RequestHandler->isSSL()) {
            $this->redirect('http://' . rtrim(env('SERVER_NAME'), '/') . $this->here);
            return;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:52:13.777

此解决方案添加到 SecurityComponent。它应该可以工作，但如果同时设置了 requireSecure 和 requireNonSecure，则存在重定向循环的风险。

安全加组件：

```
class SecurityPlusComponent extends SecurityComponent {

    /**
     * List of actions that do not require an SSL-secured connection
     *
     * @var array
     * @access public
     * @see SecurityPlusComponent::requireNonSecure()
     */
    var $requireSecure = array();

    /**
     * Component startup. All security checking happens here.
     *
     * @param object $controller Instantiating controller
     * @access public
     */
        function startup(&$controller) {
            $this->_action = strtolower($controller->action);
            $this->_methodsRequired($controller);
            $this->_secureRequired($controller);
            $this->_nonSecureRequired($controller);
            $this->_authRequired($controller);
            $this->_loginRequired($controller);

            $isPost = ($this->RequestHandler->isPost() || $this->RequestHandler->isPut());
            $isRequestAction = (
                !isset($controller->params['requested']) ||
                $controller->params['requested'] != 1
            );

            if ($isPost && $isRequestAction && $this->validatePost) {
                if ($this->_validatePost($controller) === false) {
                    if (!$this->blackHole($controller, 'auth')) {
                        return null;
                    }
                }
            }
            $this->_generateToken($controller);
        }

    function requireNonSecure() {
        $this->_requireMethod('NonSecure', func_get_args());
    }

    /**
     * Check if access requires non secure connection (http)
     *
     * @param object $controller Instantiating controller
     * @return bool true if secure connection required
     * @access protected
     */
    function _nonSecureRequired(&$controller) {
        if (is_array($this->requireNonSecure) && !empty($this->requireNonSecure)) {
            $requireNonSecure = array_map('strtolower', $this->requireNonSecure);

            if (in_array($this->_action, $requireNonSecure) || $this->requireNonSecure == array('*')) {
                if ($this->RequestHandler->isSSL()) {
                    if (!$this->blackHole($controller, 'nonSecure')) {
                        return null;
                    }
                }
            }
        }
        return true;
    }
} 
```

修改 app_controller forceSSL 函数：

```
function securityBlackhole($type) {
    $redirect = '';
    if (!empty($this->params['url']['redirect'])) {
        $redirect = '?redirect=' . $this->params['url']['redirect'];
    }

    // Force http (non-SSL)
    if($type == 'nonSecure') {
        $this->redirect('http://' . rtrim(env('SERVER_NAME'), '/') . $this->here . $redirect);

    // Force https (SSL)
    } else {
        $this->redirect('https://' . rtrim(env('SERVER_NAME'), '/') . $this->here . $redirect);
    }
} 
```

在控制器中会这样调用：

```
function beforeFilter() {
    parent::beforeFilter();

    $this->SecurityPlus->validatePost = false; // disable CSRF protection
    $this->SecurityPlus->blackHoleCallback = 'securityBlackhole';
    $this->SecurityPlus->requireSecure('pay', 'index');
    $this->SecurityPlus->requireNonSecure('video');

    $this->Auth->allow('index');
} 
```

# javascript - 在焦点处理程序中修改表单时表单提交未触发

> ID：11144841
> 
> 赞同：0
> 
> 时间：2012-06-21T18:52:16.270
> 
> 标签：javascript, jquery

我试图将其归结为一个简单的示例来演示我遇到的问题。

我有一个带有输入字段和提交按钮的表单：

```
<form id="focusOutAfterInputForm">
  <input type="text" id="focusoutAfterInput">
  <input type="submit" >
  <div></div>
</form> 
```

输入字段附加了一个焦点处理程序，该处理程序在输入下方插入一个新元素：

```
jQuery("#focusoutAfterInput").focusout(function() {
  jQuery(this).after("<div>message</div>");
}); 
```

我还附加了一个提交处理程序，只是为了捕获提交是否运行：

```
jQuery("form").submit(function() {
  jQuery("#console").append("<li>submitted form" + this.id + "</li>");
  return false;
}); 
```

如果将光标放在输入中并单击提交按钮，则不会触发提交处理程序。如果再次单击提交按钮，它将触发。此外，如果该字段是模糊的，然后按下提交按钮，它将触发。

但是，如果我们在表单中的 div 下方插入新元素，即使插入了元素，提交按钮也会触发：

```
<form id="focusoutAfterDivForm" novalidate="novalidate">
  <input type="text" id="focusoutAfterDiv" required="true">
  <input type="submit" >
  <div></div>
</form>

jQuery("#focusoutAfterDiv").focusout(function() {
  jQuery(this).parent().last().after("<div>message</div>");
}); 
```

这是一个演示代码的[jsfiddle 。](http://jsfiddle.net/K9vrW/2/)我有点困惑。任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:05:25.720

问题似乎不是没有执行提交，而是没有在按钮上执行单击事件，因为一旦插入 div，mouseup 就不会在提交按钮上。如果您在小提琴中使用制表符和空格，它就可以工作。此外，如果您以不移动提交按钮的方式添加元素，则它可以工作：

```
jQuery("#focusoutAfterInput").focusout(function() {
  jQuery(this).next().after("<div>message</div>");
}); 
```

或者在这个例子中：http: [//jsfiddle.net/K9vrW/3/](http://jsfiddle.net/K9vrW/3/)

# asp.net-mvc - 使用 Razor 在 ASP.NET MVC 4 中防止 @Html.LabelFor 之后的换行

> ID：11144845
> 
> 赞同：8
> 
> 时间：2012-06-21T18:52:22.897
> 
> 标签：asp.net-mvc, razor, html-helper

这是我的代码。

```
@using (Html.BeginForm()) {
@Html.ValidationSummary()

<fieldset>
    <legend>Registration Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.FirstName)
            @Html.TextBoxFor(m => m.FirstName)
        </li>
    </ol>
 </fieldset>
} 
```

从上面的代码中，标签和文本框位于不同的行上。我想将它们组合在同一条线上，这样我就可以拥有类似...

```
@Html.LablFor(m => m.FirstName): @Html.TextBoxFor(m => m.FirstName) 
```

最终应该看起来像名字：***_* __ *_* __ *_***

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T18:57:46.443

你的 CSS 一定有问题，因为`<label>`和`<input>`都是内联元素。它们出现在不同行的唯一原因是您的 CSS 是否将它们视为块元素，或者它们不能放在同一行内容中。

jsFiddle 中的演示：http: [//jsfiddle.net/tSFtJ/](http://jsfiddle.net/tSFtJ/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-09T19:34:52.690

这是我为使这项工作为我所做的工作（下面的代码片段）。
查看模型

```
<!-- language: c# -->
[DataType(DataType.EmailAddress)]
[Display(Name = "LabelEmail", ResourceType = typeof(Resources.GeneralResource))]
public string EmailAddress { get; set; } 
```

查看.cshtml

```
<!-- language-all: lang-html -->
<div>
    @Html.LabelFor(m => m.EmailAddress, new { style="display:inline;"})
    @Html.DisplayFor(m => m.EmailAddress)
</div> 
```

重要的是： LabelFor(..) 中的
new { style="display:inline;"}
。
奇迹般有效。

# jquery - 使用 Scrolling Parallax jQuery 插件时保持图像纵横比不变

> ID：11144846
> 
> 赞同：1
> 
> 时间：2012-06-21T18:52:25.157
> 
> 标签：jquery, css, scroll, parallax

我正在使用[Scrolling Parallax jQuery 插件来滚动](http://jonraasch.com/blog/scrolling-parallax-jquery-plugin)[此站点](http://indigobrazilianportuguese.com)上的“背景”图像（实际上不是 css 背景图像）。

是否可以保持图像纵横比，即不挤压图像，并且仍然可以在所有现代浏览器中使用？

我尝试设置`bgHeight : 'auto'`将图像 css 设置为`height:auto`，但这会阻止滚动效果在 Chrome 和 Safari 中工作。

我也尝试过设置`bgWidth : 'auto'`，但图像比浏览器窗口窄。

也开放到其他插件或实现此效果的方式，即背景图像以不同的速度滚动到页面内容，并且还显示整个图像，但不滚动过去......

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:42:11.993

因为宽度自动设置为视口的 100%，所以除非你改变它，否则会发生拉伸。

用这个：

```
$.scrollingParallax('img/clouds.png', {
    bgHeight : '250%',
    staticSpeed : .25,
    staticScrollLimit : false,
    bgWidth: 'auto'
}); 
```

以上可以在这里看到：[**jsFiddle**](http://jsfiddle.net/hAP7C/2/)

* * *

由于未拉伸的背景图像始终向左浮动，因此我使用了一些 jQuery 优点，因此图像始终位于视口中心，即使在**Window Resize Event**期间也是如此。也就是说，图像现在将放大到最大图像大小或缩小，同时在所有浏览器中保留纵横比。

```
$(function() {

    // Specify your background image here.
    var bgMain = 'http://indigobrazilianportuguese.com/2012/wp-content/uploads/Home_bg1600.jpg';

    $.scrollingParallax(bgMain, {
        bgHeight : '200%',
        staticSpeed : 0.25,
        staticScrollLimit : false,
        // Important to set to 'auto' so Aspect Ratio for width is preserved because height defined above is fixed.
        bgWidth: 'auto'
    });

    // These two lines is for page load.
    // The variable will calculate CSS 'left' for the background image to center it in the viewport.
    // First, horizontal viewport size is checked via $(window).width()
    // Then, image width is determined by searching for image's unique filepath/filename.
    // Once the different is known, this value is then divided by 2 so that equal space is seen on left and right side of image which becomes the variable value.
    var bgMainHcenter = ( $(window).width() - $('body img[src="' + bgMain + '"]').width() ) /2 ;
    $('body img[src="' + bgMain + '"]').css('left', bgMainHcenter + 'px');

    // Just like above, it's repeated during Window Resize Event.
    $(window).resize(function() {
        bgMainHcenter = ( $(window).width() - $('body img[src="' + bgMain + '"]').width() ) /2 ;
        $('body img[src="' + bgMain + '"]').css('left', bgMainHcenter + 'px');
    });

}); 
```

**在这里查看它的实际效果：** [**jsFiddle**](http://jsfiddle.net/hAP7C/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:41:54.683

好的，所以根据他们的主页，您可以为宽度和高度设置 %，所以我会先尝试一下，看看效果如何。

# java - 数据类型中的 JSoup 错误

> ID：11144858
> 
> 赞同：0
> 
> 时间：2012-06-21T18:53:04.483
> 
> 标签：java, html-parsing, jsoup

我有以下代码应该从 HTML 文档中提取数据。我用过日食。它给了我两个错误（不过，此代码是从 JSoup 站点作为教程复制和粘贴的）。1) 文件和 2) 元素中的错误。我看不出这两种类型有什么问题。

导入 java.io.IOException；导入 java.net.MalformedURLException；

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

public class TestClass 
{
 public static void main(String args[]) throws IOException
{
     try{
File input = new File("/tmp/input.html");
Document doc = Jsoup.parse(input, "UTF-8", "http://example.com/");

Element content = doc.getElementById("content");
Elements links = content.getElementsByTag("a");
for (Element link : links) {
  String linkHref = link.attr("href");
  String linkText = link.text();
}
     }//try
     catch (Exception e){//Catch exception if any
          System.err.println("Error: " + e.getMessage());
          }//catch

    }
}</i> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T03:53:42.343

你忘了`import`他们。

```
import java.io.File;
import org.jsoup.select.Elements; 
```

### 也可以看看：

*   [Java 教程 - 使用包成员](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

* * *

提示：**阅读**Eclipse 建议的“快速修复”选项。它已经是`File`.

![在此处输入图像描述](../Images/38e9772152cb93096fe9949f0cb6f894.png)

# .net - .NET Excel Interop Worksheet.Copy 在 255 张工作表后失败

> ID：11144862
> 
> 赞同：0
> 
> 时间：2012-06-21T18:53:25.703
> 
> 标签：.net, excel-interop

有一个我发现很少有人问的问题，而且没有很好的回应。

非常简单的一段代码，在 VB.NET 中：

```
Imports System.Data 
```

`Imports System.IO`

`Imports System.Runtime.InteropServices`

```
Dim anExcelApplicationClass As Microsoft.Office.Interop.Excel.Application

    anExcelApplicationClass = New Microsoft.Office.Interop.Excel.Application
    anExcelApplicationClass.Visible = False
    anExcelApplicationClass.UserControl = False
    anExcelApplicationClass.DisplayAlerts = False
    anExcelApplicationClass.ScreenUpdating = False

    Dim devWorkbooks As Workbooks
    Dim devWorkbook As Workbook
    Dim masterTempWorksheet As Worksheet
    Dim tempWorksheet As Worksheet

    devWorkbooks = anExcelApplicationClass.Workbooks
    devWorkbook = devWorkbooks.Open(DevFilePath, 0, False, 5, "", "", False, XlPlatform.xlWindows, "", True, False, 0, True, False, False)

    Dim tempCounter As Integer = 0
    While tempCounter < 500
        tempCounter = tempCounter + 1
        masterTempWorksheet.Copy(Type.Missing, masterTempWorksheet)
        tempWorksheet = CType(devWorkbook.Sheets(3), Worksheet)
        tempWorksheet.Name = tempCounter.ToString()
    End While 
```

对我来说，在 255 次迭代后，代码失败并出现“Exception de HRESULT：0x800A03EC”的相当无用的错误。

从研究中，我看到有人说这是工作表数量的限制，但我看到其他人认为没有真正的限制，实际限制只是基于您的系统。

注意：我尝试保存并关闭，然后在经过一些迭代后重新打开工作表，如下所示：http: [//support.microsoft.com/kb/210684/en-us](http://support.microsoft.com/kb/210684/en-us)。它没有解决问题。

有人对如何解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-05T20:25:45.097

删除此线程只是为了将其发布为已回答 - 解决方案是保存、关闭并重新打开工作表，如[http://support.microsoft.com/kb/210684/en-us](http://support.microsoft.com/kb/210684/en-us)所建议的那样，并通过@HansPassant。

虽然，我已经转向一个更好的解决方案，使用 OpenXML 而不是 Interop 库，所以如果有人发现这个问题，我建议更好的答案是咨询 OpenXML SDK，其文档可以在[https://msdn.microsoft.com/en-us/library/office/bb448854.aspx](https://msdn.microsoft.com/en-us/library/office/bb448854.aspx)

# playframework - 播放框架2.0模板参数导入

> ID：11144864
> 
> 赞同：16
> 
> 时间：2012-06-21T18:53:38.930
> 
> 标签：playframework, playframework-2.0

我有以下问题：

假设我的模板参数如下所示：

```
@(variable : really.super.extremely.long.package.name.ClassName) 
```

无论如何只导入该类，以便我可以将其简化为如下所示：

```
@(variable : ClassName) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T19:00:09.173

我相信它会在你的 project/Build.scala 文件中。

在你的主要

```
 templatesImport += "really.super.exteremely.long.package.name._" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T01:28:42.377

只是想插话并说@Jeff LaJoie 的上述示例仍然适用于 Play 2.2.3

在你的 build.sbt

`templatesImport += "really.super.exteremely.long.package.name._"`

或者

`templatesImport ++= Seq( "really.super.exteremely.long.package.name._", "another.really.super.exteremely.long.package.name._" )`

# jquery - 添加到 cms 主题后，jquery scrollto 无法正常工作

> ID：11144867
> 
> 赞同：0
> 
> 时间：2012-06-21T18:53:47.047
> 
> 标签：jquery, drupal-7

我试图让我的 jquery scrollto 功能工作，它似乎没有任何缓动或动画。我认为因为我使用的是drupal，所以我的包装器都搞砸了，因为我在没有cms的情况下构建它并且它可以工作，然后当我将它添加到drupal主题和tpl.php文件时添加了很多不存在的包装器并且它破坏了脚本.

```
 $(document).ready(function() {

  $('#nav a').click(function() {
    var target = '#' + $(this).attr('class');
    $('body').scrollTo($(target), 500, {'axis':'y'});
    return false;
  });

}); 
```

那就是我正在使用的代码这是问题所在的链接？

片段链接 wrks 但我不认为 scrollto 正在寻找元素。

如果我能以任何方式澄清，请告诉我谢谢！！！！！！！！！！！！！！！！！！！！！！！！！！！！

我认为我的 css 选择器可能是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:22:38.653

使用此包装函数而不是文档就绪函数。这让 drupal 知道您使用的是 jQuery 而不是其他一些 javascript 库。您链接到我们的网站有一个错误，指出 $ 不是函数。那是因为 jQuery 没有加载或者 Drupal 不知道它是 jQuery。

```
(function ($) {

   // Your Code

}(jQuery)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:52:52.817

jsheffers 是对的。我也会使用 Drupal.behaviours..

[https://drupal.stackexchange.com/questions/11756/better-understanding-of-behaviours-of-drupal-7](https://drupal.stackexchange.com/questions/11756/better-understanding-of-behaviours-of-drupal-7)

另外，我注意到您在 Drupal 加载的默认 jQuery 之上加载了 jQuery v1.7.1：

[http://dept-art.com/sites/all/themes/adaptivetheme/at_core/scripts/jquery-1.js](http://dept-art.com/sites/all/themes/adaptivetheme/at_core/scripts/jquery-1.js)

这可能会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:12:03.940

```
$(document).ready(function() {
    $('#nav a').click(function(e) {
        e.preventDefault();
        var target = '#' + $(this).attr('class');
        $('body').scrollTo($(target), 500, {'axis':'y'});
    });
}); 
```

# java - 如何使用 Slick 显示文本？

> ID：11144869
> 
> 赞同：3
> 
> 时间：2012-06-21T18:53:51.430
> 
> 标签：java, slick2d

我一直在尝试使用 ninjacave 的教程和许多其他教程来显示文本，但我无法让它工作。有人可以给我一个有效教程的链接吗？谢谢。

代码如下：

主类：

```
package oregon.client;

import oregon.src.*;

import org.lwjgl.*;
import org.lwjgl.opengl.*;

import static org.lwjgl.opengl.GL11.*;

public class Oregon {
    public static Settings settings = new Settings();

    public GameController controls = new GameController();

    public FPSCounter fps = new FPSCounter();

    public void init() {
        try {
            if (settings.fullscreen) {
                Display.setDisplayModeAndFullscreen(Display
                        .getDesktopDisplayMode());
            } else if (!settings.fullscreen) {
                Display.setDisplayModeAndFullscreen(new DisplayMode(
                        settings.defaultWidth, settings.defaultHeight));
            }

            Display.setVSyncEnabled(true);
            Display.create();
        } catch (LWJGLException e) {
            stop(e);
        }

        initOpenGL();
        start();
    }

    public void initOpenGL() {
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0, settings.defaultWidth, settings.defaultHeight, 0, 1, -1);
        glMatrixMode(GL_MODELVIEW);
    }

    public void debug() {     

    }

    public void openGL() {

    }

    public void start() {
        while (!Display.isCloseRequested()) {
            controls.keyboard();
            fps.tick();

            debug();
            openGL();

            Display.update();
            Display.sync(100);
        }

        Display.destroy();
    }

    public static void stop() {
        System.exit(0);
        Display.destroy();
    }

    public static void stop(Exception e) {
        e.printStackTrace();
        System.exit(0);
        Display.destroy();
    }

    public static void setFullscreen() {
        try {
            Display.setDisplayModeAndFullscreen(Display.getDesktopDisplayMode());
        } catch (LWJGLException e) {
            stop(e);
        }
    }

    public static void removeFullscreen() {
        try {
            Display.setDisplayModeAndFullscreen(new DisplayMode(
                    settings.defaultWidth, settings.defaultHeight));
        } catch (LWJGLException e) {
            stop(e);
        }
    }

    public static void main(String args[]) {
        Oregon oregon = new Oregon();
        oregon.init();
    }
} 
```

那是主类的代码。

**编辑：-**这是我用 Jesse B 的代码得到的图片。 ![在此处输入图像描述](../Images/446b3065e03e8c16c6c10f2bc570ada1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:13:48.817

DavidB 在他的回答中提到使用`graphics`实例 to `drawString()`。这将使用您当前的字体。这意味着您应该`graphics.setFont()`先调用，否则它将使用默认的系统字体。这也使得很难记住（在游戏的各种方法中）哪个是“当前”字体。

或者，您可以初始化一个字体实例并将其直接用于`drawString`. 来自[Slick2D 维基](http://slick.cokeandcode.com/wiki/doku.php?id=truetype_font_support)...

```
// initialise the font
Font font = new Font("Verdana", Font.BOLD, 20);
TrueTypeFont trueTypeFont = new TrueTypeFont(font, true);

// render some text to the screen
trueTypeFont.drawString(20.0f, 20.0f, "Slick displaying True Type Fonts", Color.green); 
```

这要求所有支持的平台都可以解析字体名称。更好的选择是将字体嵌入到您的 JAR 中，方法是将其放置在您的资源目录中。

**编辑**
看到您发布的图片后，我的猜测是您没有正确加载字体。试试这个...

```
graphics.drawString("Test drawing string.",20.0f,20.0f); 
```

如果这工作，它确认字体不工作。如果要使用自定义字体，则必须将字体文件添加到 JAR 中并将其作为资源引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T00:40:41.473

下载 Slick2D 库并导入 jar。

在您的班级内涵盖整个班级的范围：

```
Font font;
TrueTypeFont ttf; 
```

你的初始化方法

```
public void init(GameContainer gc){

    font = new Font("Verdana", Font.BOLD, 20);
    ttf = new TrueTypeFont(font, true);

} 
```

你的渲染方法：

```
public void render(GameContainer gc, Graphics g){

    //render code here
    ttf.drawString("Hello, World!")

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:02:29.870

[根据本教程](http://baksteenbrick.wordpress.com/2011/02/08/writing-java-games-with-slick-part-two-hello-world/)，您可以`drawString`在方法中从您的图形对象调用`render`。

`g.drawString("Hello World!",200,200);`

# teamcity - 为 TeamCity 启动脚本创建包装器

> ID：11144871
> 
> 赞同：0
> 
> 时间：2012-06-21T18:53:52.183
> 
> 标签：teamcity, monit

我正在尝试将 TeamCity 添加到我们服务器上的 Monit 上正在运行的实例中，并且遇到了一个障碍，我想知道其他人是否能够解决。在我看到的示例中，当应用程序在启动时未创建 .pid 文件时，可以使用可以执行此操作的包装器来完成。Monit 网站上的示例还可以，但我想看看是否有人有一个很好的 TeamCity 特定示例可以运行。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:28:09.297

迟到总比不做好，但您不需要创建包装脚本，因为团队城市代理会生成一个 pid 文件。

如果您检查 bin/agent.sh 脚本，您会看到它将一个 pid 文件输出到 logs/ 文件夹。您可以将该 pid 文件与 monit 一起使用来监控服务。您还可以编辑 shell 脚本以更改 pid 文件的位置。

# dns - 我正在将主机转移到新平台，但邮件托管在其他地方，邮件请求在传播过程中会无法解决吗？

> ID：11144872
> 
> 赞同：0
> 
> 时间：2012-06-21T18:53:53.510
> 
> 标签：dns

我目前正在将站点移动到新的托管平台。对于我们旧托管平台上的其中一些网站，我们有 A、CNAME 和/或 MX 记录将邮件流量引导到其他一些主机（Gmail 或其他）。

这是我的问题：如果我在新的托管平台上复制了这些 A、CNAME 和 MX 记录，使用新的 DNS 服务器更新注册商，并在传播期间保持站点在两个托管平台上运行，是否会有任何邮件请求不会到达正确的位置？

由于两个 DNS 服务器之间的冗余，我目前认为不会有任何问题，但我必须 100% 确定。

所有帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:02:41.810

我终于有机会尝试前面的场景，看看我是否正确。我将在这里分享它作为答案，以防其他人最终陷入同样的​​境地。

由于两组主 DNS 之间的冗余，客户端能够访问他们的电子邮件和发送/接收消息没有问题。

# jquery - jQuery CSS 类作为 LESS 混合

> ID：11144878
> 
> 赞同：2
> 
> 时间：2012-06-21T18:54:16.777
> 
> 标签：jquery, less

感谢[另一个问题，](https://stackoverflow.com/questions/11123961/associate-id-with-class-in-css/11124024)我最近发现了[LESS。](http://lesscss.org/) 不幸的是，我无法让它做我想做的事。

我的 .less 文件如下所示：

```
#user_box {
    .ui-widget-content;
    .ui-corner-all;
    position: fixed; 
    left: 10px; 
    top: 10px; 
    padding: 5px;
    z-index: 100; 
    height: 40em; 
    width: 16em;
    background-color: white;
} 
```

我试图将那个特定的 div 与那对 jQuery 类相关联。但是，它不起作用；格式被完全忽略。但是当我删除那对 mixin 时，它就开始工作了。（当然，减去`#user_box`div 就好像它有这两个类一样。）这让我怀疑 LESS 的 JS 解析器无法找到这两个类并且正在中止。

我做错了吗，还是 LESS 根本不允许您将其他 .css 文件的类作为 mixins 拉入？FWIW，我在所有 jQuery 链接/脚本调用之后放置“样式表/更少”链接和 less.js 脚本。

* * *

**编辑：** Mathletics 指出我需要使用 @import 语句，但我仍在苦苦挣扎。.less 文件存在于 中`/team/css`，而我尝试导入的文件存在于`/team/css/custom-theme`. 以下陈述均无效：

```
@import "/team/css/custom-theme/jquery-ui-1.8.21.custom.css";
@import "custom-theme/jquery-ui-1.8.21.custom.css";
@import "jquery-ui-1.8.21.custom.css"; 
```

无论 是否`<link type="text/css" href="/team/css/custom-theme/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />`已包含在 HTML 文件中，这都是正确的。

* * *

**编辑2：** 另外，我正在做更少的客户端；不知道会不会有什么影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:59:03.313

您需要导入/引用要在当前范围/文件中使用其 mixin 的任何文件。

所以，如果你的 mixin 是在 中定义的`mixins.less`，你的 less 文件应该是这样的：

```
@import "mixins" /* NOTE THIS IMPORT */

#user_box {
    .ui-widget-content;
    .ui-corner-all;
    position: fixed; 
    left: 10px; 
    top: 10px; 
    padding: 5px;
    z-index: 100; 
    height: 40em; 
    width: 16em;
    background-color: white;
} 
```

您不能从当前 LESS 文件不知道的文件中提取类。但是，您可以使用 LESS 编译器为您组合文件，因此您只需一两个文件即可导入其他文件，从而使您的所有类都可用。

* * *

感谢@zzzBov 指出LESS 不解析带有CSS 扩展名的文件；对于要在 LESS 中访问其规则的任何文件，您需要将扩展​​名从 更改`.css`为。`.less`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T10:36:53.707

我遇到了同样的问题，我得到了这个工作。

从 jqueryUI 主题滚轮下载主题。在 zip 里面会有一个 CSS 文件夹和主题名称。我使用了主题“开始”。

在你的 .less 文件的顶部放这个。

```
@import "start/jquery-ui-1.10.3.custom.less"; 
```

重要的是要注意导入是基于当前文件的位置。我将我的 styles.less 文件放在服务器根目录上另一个名为 css 的文件夹中。因此，主题文件夹名称“start”就在其中，这一点很重要。

确保删除 HTML 中对 jqueryUI 主题 .css 的任何旧引用。

在“开始”文件夹中，您将看到图像。将 images 文件夹移动到与您的 styles.less 文件相同的目录。这很重要，否则它将无法正常工作，您将收到错误。如果您使用 Google Chrome Inspector->console，您可以看到错误。

最后，您必须像 Mathletics 指出的那样，将 jquery-ui-1.10.3.custom.css 文件的 .css 更改为 .less （或您碰巧说的任何内容）。它不会导入，除非它说 .less

.less 的好处是，如果不使用与 {LESS} 相关的语法，它会回退到普通的 CSS，这使得它可以正常工作:)。

现在我可以使用来自 jQuery 类的 Mixins。

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:38:00.673

导入时，CSS 文件被视为文字输出，而不是由 LESS 解释。

# c# - .findControl() 空指针异常和崩溃的 ASPX 服务器

> ID：11144882
> 
> 赞同：1
> 
> 时间：2012-06-21T18:54:36.010
> 
> 标签：c#, asp.net, ext.net

我有以下代码：

```
private Ext.Net.Store getStore(string name)
{
    return (Ext.Net.Store)DUOSPage.FindControl(name);
} 
```

和

```
getStore("store").DataSource = someList; 
```

我可以验证页面中确实存在“store”对象和“someList”。在我看来，找不到 FindControl。但是，我得到了一个

```
someList = Count = Cannot evaluate expression because a thread is stopped at a point where garbage collection is impossible, possibly because the code is optimized. 
```

以及本地服务器崩溃。对我来说，这意味着该元素可能在页面中并且可以找到，但它会以某种方式导致服务器崩溃和崩溃。

关于这里有什么问题的任何想法？为什么这会使 ASPX 服务器崩溃？

编辑：

错误提示给了我这个：

```
Description:
Stopped working

Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01:   webdev.webserver20.exe
Problem Signature 02:   10.0.0.0
Problem Signature 03:   4ba204ca
Problem Signature 04:   ****
Problem Signature 05:   1.0.0.0
Problem Signature 06:   4fe36c1c
Problem Signature 07:   3ce
Problem Signature 08:   c
Problem Signature 09:   System.NullReferenceException
OS Version: 6.1.7601.2.1.0.256.4
Locale ID:  **** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:57:42.060

你可能会混淆两个不同的东西。您提到您可以验证*页面*中是否存在“商店” ，我认为这意味着您可以在 HTML 标记中看到它，但这并不一定意味着它对服务器可用。确保设置 runat="server" 以确保为“store”元素生成服务器端控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:13:01.177

对于任何寻找解决方案的人，我在这里找到了它：

[http://winmike.blogspot.com/2011/02/aspnet-findcontrol-returns-null-for.html](http://winmike.blogspot.com/2011/02/aspnet-findcontrol-returns-null-for.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T05:48:42.563

如果您正在使用 Ext.NET，或者即使您没有使用，Ext.NET 也包含 Ext.NET.Utilities 库（不依赖于 Ext.NET）。

**Utilities**库包含`ControlUtils`带有一大堆“ *FindControl* ”帮助程序的类，以解决本机 Page.FindControl 方法的限制。

可能有一个选项`ControlUtils`可以避免此问题，尽管我需要查看更完整的示例才能 100% 说明最佳解决方案/调用是什么。像下面这样的东西可能会起作用。

**例子**

```
return Ext.Net.Utilities.ControlUtils.FindControl<Store>(this, name); 
```

该`ControlUtils.FindControlByClientID(string)`方法也可能会有所帮助。

[https://github.com/extnet/Ext.NET.Utilities（MIT](https://github.com/extnet/Ext.NET.Utilities)许可）

无论如何，本机 ASP.NET Page.FindControl() 是有限制的，尽管还有其他具有更大灵活性的选项，并且您的页面上已经有了这些选项。

希望这可以帮助。

# bash - bash：引号中的变量和引号

> ID：11144884
> 
> 赞同：1
> 
> 时间：2012-06-21T18:54:38.367
> 
> 标签：bash, variables, escaping, quotes

我想在 bash 中设置一个名为 test_var 的变量 基本上，我希望 echo test_var 输出：

```
%let output="file_20120601.csv"; 
```

其中 20120601 是一个变量。我试图通过使用来做到这一点：

```
test_var='%let output="file_$1.csv";'
echo test_var 
```

这不起作用，因为 $1 没有被解释为变量，而是被解释为字面上的 $1

有谁知道我可以如何修改它以让它做我想做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:58:26.200

由于单引号，它不起作用。他们使一切都变得真实。

```
$ var='123'
$ foo="\"%hi there file_$var\""

$ echo $foo
"%hi there file_123" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:20:43.253

这也有效

```
test_var='%let output="file_'"$1"'.csv";' 
```

因为变量没有在单引号之间展开。我们可以在单引号和双引号之间连接字符串，只需在旁边写字符串。

# ios - 将 Unicode 连字符减号插入字符串会导致错误

> ID：11144885
> 
> 赞同：0
> 
> 时间：2012-06-21T18:54:39.243
> 
> 标签：ios, unicode, nsstring, uitextview

我正在尝试将 unicode 连字符减号字符插入文本字符串。我看到以下内容出现“无效的通用字符”错误：

u+002D（连字符-减号）

```
[textViewContent insertString:@"\u002D" atIndex:cursorPosition.location]; 
```

但是，这些工作正常：

u+2212（减号）

```
[textViewContent insertString:@"\u2212" atIndex:cursorPosition.location]; 
```

u+2010（连字符）

```
[textViewContent insertString:@"\u2010" atIndex:cursorPosition.location]; 
```

我在这里戳了几个现有的 Unicode 讨论，但我还没有找到一个解释我的示例中导致第一个错误的不同之处。洞察力非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T22:35:01.127

通用字符名称对其使用有一些限制。在 C99 和 C++98 中，不允许使用引用基本字符集（包括 U+002D）中的字符的字符。

C++11 更新了此要求，因此如果您在字符串或字符文字中，则允许使用引用基本字符的 UCN。根据您使用的编译器版本，我猜您可以使用 Objective-C++11 使您的代码合法。

也就是说，既然这个字符是 ASCII 和基本字符集的一部分，你为什么不直接写它呢？

```
@"-" 
```

# mysql - Wordpress CMS 可以使用其他 DBMS 代替 MySQL 吗？

> ID：11144889
> 
> 赞同：1
> 
> 时间：2012-06-21T18:54:51.773
> 
> 标签：mysql, wordpress, odbc

我有一个问题，Wordpress CMS 可以使用其他 DBMS 来代替 MySQL 吗？WordPress 使用 ODBC 连接还是 MySQL 连接？

谢谢你给我的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:18:15.267

是的，这是可能的。使用[这些插件](http://wordpress.org/extend/plugins/pdo-for-wordpress/)来使用 SQLite 而不是 MySQL，我对其进行了测试并正常工作

# testing - 是否有软件可以测试和查看 LDAP 连接和响应？

> ID：11144893
> 
> 赞同：0
> 
> 时间：2012-06-21T18:55:07.227
> 
> 标签：testing, ldap

我是使用 LDAP 的新手。是否有任何软件可用于连接到 LDAP 服务器并执行搜索和查看输出？例如，SoapUI 之类的东西是 WSDL 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T23:15:01.877

那里有许多 LDAP 客户端。在 www.userbooster.de 上有一个，UserBooster 客户端的免费软件版本。有 JXplorer，它在 Java 虚拟机中运行。还有很多。

# android - Eclipse 中注释处理器的相对路径

> ID：11144896
> 
> 赞同：0
> 
> 时间：2012-06-21T18:55:22.030
> 
> 标签：android, eclipse, google-app-engine, build

我有一个 AppEngine 连接的 Android 项目，项目的 .factorypath 文件看起来像

```
<factorypath>
<factorypathentry kind="VARJAR" 
id="ECLIPSE_HOME/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205091048-rel-r37/gwt-      
2.4.0/requestfactory-apt.jar" enabled="true" runInBatchMode="false"/>
<factorypathentry kind="EXTJAR" id="/home/vince/git/requestfactory-apt-2.4.0.jar" 
enabled="true" runInBatchMode="false"/>
</factorypath> 
```

虽然我正在使用 variable `ECLIPSE_HOME`。是否可以给出一个路径，以便在获取项目时将 gwt-2.4.0 文件夹更改为其他版本，它仍然可以工作。？

我看到 kind="plugin" 和 org.eclipse 一些注释。可以为此做类似的事情来替换上面给出的几乎绝对路径吗？也许通配符 * 也可以使用，但我无法让它在 Linux 上工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:19:30.510

> 我看到 kind="plugin" 和 org.eclipse 一些注释。可以为此做类似的事情来替换上面给出的几乎绝对路径吗？

是的。插件编写者可以使用一个 API 直接从插件中贡献注释处理器，而无需求助于您在上面看到的内容。作为最终用户，您无法做任何事情来改善这一点。您应该向 Google 提交错误报告。

# emacs - 用于 emacs 而不是 2.7 的 python3 解释器

> ID：11144901
> 
> 赞同：1
> 
> 时间：2012-06-21T18:56:07.587
> 
> 标签：emacs, python-3.x, python-2.7, fedora

我是 Fedora 17 和 Emacs 的新手，不知道如何告诉我的 emacs 使用最新版本的 python。

我发现了一些信息，我应该更改 python-python-command 变量或显示新解释器的路径，该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T18:58:22.693

```
(setq py-python-command "/usr/bin/python3.1") 
```

应该添加到您的 .emacs 文件中

# database - 可扩展的简单键值数据库

> ID：11144905
> 
> 赞同：0
> 
> 时间：2012-06-21T18:56:21.390
> 
> 标签：database, database-design, database-schema

我一直在研究不同的键值数据库（Mongo、Cassandra 等），并试图找出最适合非常简单的数据存储的速度和效率的数据库。在很多情况下，它似乎是键值，但值更复杂。我只希望键是一个字符串（哈希），值是一个整数值，所以我不需要这些数据库有很多额外的东西。例如，除了字符串键和整数值之外，我不存储文档、json 或任何复杂的东西。

我当前的 (MySQL) 数据库有大约 10 亿条记录，我希望将其转移到更合适的环境中，这样我就可以将它增加到 1 万亿条以上的记录，并且不会出现 MySQL 届时将出现的扩展和性能问题（加上 MySQL如果无论如何它是非常简单的键值，则没有必要）。

所以，问题是，什么数据库最适合非常简单的键值数据库结构的最大性能/扩展能力？

# sql-server - isdate 和新西兰返回 false

> ID：11144907
> 
> 赞同：0
> 
> 时间：2012-06-21T18:56:38.350
> 
> 标签：sql-server, tsql

这里的问题：

```
select ISDATE('2012-06-21 4:11 P.M.') 
```

文化是 en-NZ（新西兰），上面的字符串日期是他们格式化日期的方式。

在这种情况下如何使 ISDATE 为真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:00:35.040

```
select ISDATE('21-06-2012 4:11 P.M.') 
```

此链接在您的情况下很有用

[http://jefferychinet.blogspot.com/2009/02/sql-server-2005-change-datetime-format.html](http://jefferychinet.blogspot.com/2009/02/sql-server-2005-change-datetime-format.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:25:11.217

理想情况下，您会比这更好地控制字符串格式。如果您以标准格式通过，您不应该关心文化是 EN-NZ 还是其他任何东西，例如：

```
SELECT ISDATE('20120621 16:11'); -- will never fail regardless of locale/language/DMY 
```

如果您需要允许人们以他们希望的任何格式输入日期，那么您必须以各种方式处理它。例如：

```
SELECT ISDATE(CONVERT(DATETIME, REPLACE('2012-06-21 4:11 P.M.', '.', ''), 120)); 
```

# playn - 使用 playN 呈现文本数据

> ID：11144911
> 
> 赞同：1
> 
> 时间：2012-06-21T18:56:51.683
> 
> 标签：playn

好的，我已经注意到在 playN 中添加图像层非常容易。但是有没有一个好的框架来呈现文本数据？或者这完全不是 playN 的目的？我想知道是否可以在表格中显示我的文本。这很容易实现还是需要一些hacky解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:44:43.820

PlayN 是一个游戏框架，因此非常面向图形。

您可以很容易地在屏幕上绘制文本，但它是在绘制文本。PlayN 不是为进行文本处理而设计的。通常，您将文本绘制到 ImageLayer，然后继续使用它，实质上是将其转换为图像。

您可以使用 TextFormat 类 (http://docs.playn.googlecode.com/git/javadoc/playn/core/TextFormat.html) 进行（有限的）文本布局，但同样是有限的，主要专注于转动文本尽快成图片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T21:38:20.037

您是否研究过[三重播放](https://github.com/threerings/tripleplay)？它被描述为“可与 PlayN 库在其所有无数平台目标上使用的游戏相关实用程序类的集合”，并包括一个带有[TableLayout 类](https://github.com/threerings/tripleplay/blob/master/core/src/main/java/tripleplay/ui/layout/TableLayout.java)的 UI 工具包。

# joomla - 在 joomla 中一次添加多个用户

> ID：11144914
> 
> 赞同：1
> 
> 时间：2012-06-21T18:57:04.973
> 
> 标签：joomla, joomla1.5, joomla-extensions

我创建了一个 joomla 组件，我们可以在其中上传包含许多用户的用户名和电子邮件的 csv 文件。我编写了将数据插入 jos_users 表的查询。自动生成的密码，我使用 $ 加密了密码crypt = JUserHelper::getCryptedPassword("blabla", $salt); 我没有在激活字段中插入任​​何内容。但由于某些原因，我无法使用用户名和密码登录。我应该为此做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:01:24.883

感谢布伦特您的时间。我找到了答案，并在下面解释。

要通过脚本创建新用户帐户，您需要执行三个查询。1) 插入`jos_users`( `id`, `name`, `username`, `email`, `password`, `usertype`, `block`, `sendEmail`, `gid`, `registerDate`, `lastvisitDate`) 值 (NULL,'name','username','email','password','Registered','0','0','18 ','日期','date2')

2) 插入`jos_core_acl_aro`( `id`, `section_value`, `value`, `name`) 值 (NULL, 'users', '(insertid of the above query)', 'name')

3) 插入`jos_core_acl_groups_aro_map`( `group_id`, `section_value`, `aro_id`) 值 (18, '', '(insertid of the above query)')

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:28:06.397

为了让用户能够登录 -

1.  激活字段必须为空
2.  必须启用用户
3.  用户必须是组的成员

# android - 当我尝试推送文件时，Eclipse 控制台显示：“推送选择失败：只读文件系统”

> ID：11144916
> 
> 赞同：30
> 
> 时间：2012-06-21T18:57:11.213
> 
> 标签：android, eclipse, mobile, sd-card

我正在尝试将文件推送到 SD 卡，但它在控制台中显示错误“无法推送选择：只读文件系统”。我在 Eclipse 中使用 DDMS 透视图。我使用 mksdcard 命令生成了 sdcard。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-12T13:53:35.883

只是去

`C:\Documents and Settings\<adminstrator>\.android\avd`

取出`'properties'`您的 avd 文件夹（每个 avd 都有一个文件夹）

取消选中`'Read only'`-> 确定

这是唯一对我有用的东西。

PS：其中一些文件夹可能是隐藏的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-29T07:02:11.540

在`Terminal`or`Command-Prompt`上，写下这些（***对我来说它的命令提示符***）：

*   `adb shell`（打开设备外壳。你会看到一个`#`）
*   `su`（如有必要，请获取 root 权限）
*   `mount -o rw,remount rootfs /`（重新挂载根文件系统。）
*   `chmod 777 /mnt/sdcard`（将 sdcard 的权限更改为 rwe。）
*   `exit`

如果它不起作用，请尝试使用`adb push`. 希望这有帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-22T06:46:24.713

您需要为您的 AVD 提供 SDCard 支持并安装 SDCard。

首先转到“AVD 管理器并选择您的 AVD，然后单击编辑并在硬件中添加 SDCard 支持”。

请查看[**此链接**](http://daraizetechnologies.blogspot.in/2011/06/how-to-mount-sdcard-in-android-emulator.html)以获取实现 SDCard 支持和安装的完整详细步骤。

您也可以在 CMD 中尝试此命令，这将重新安装您的 SDCard。

```
c:\android-sdk\platform-tools\>adb remount 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-08T07:32:38.333

我也面临同样的问题：

推送选择失败：只读文件系统

在具有更高配置（Windows XP 之外）的计算机中，诸如 ---> C:\Documents and Settings\.android\avd这样的设置
不存在，因此请转到此路径 --> C:\Users\.android 并右键单击在此文件夹上并取消选中名称为只读的框。

希望这可以帮助那些在他们的电脑上使用较新窗口的人:)，如果这个解决方案对你有帮助，请投票给它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-05T10:20:24.717

如果 sd 卡中的数据在模拟器或您正在开发的应用程序中没有更新，则选择，Dev Tools->Media Scanner 已经通过变体方式推送到 sd 卡中的数据将很快加载。 ！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-04T14:59:56.637

如果有人在新建的工作室中遇到同样的问题。0.8.9 及更高版本请在此处查看我的解决方案，它会像魅力一样工作：（页面底部的 afra mehrparvar 解决方案）

[Android Emulator sdcard推送错误：只读文件系统](https://stackoverflow.com/questions/2083709/android-emulator-sdcard-push-error-read-only-file-system/26676631#26676631)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-06T09:46:24.100

就我而言，我对斜线有误。在eclipse中指定“附加模拟器命令行选项”时

实际上应该是 -sdcard C:/Kamal/sdcard/emulator_sdcard

我把 -sdcard C:\Kamal\sdcard\emulator_sdcard

然后在重新启动 Eclipse & Emulator 后它就可以工作了。

# c# - 如何获取网络适配器索引？

> ID：11144919
> 
> 赞同：14
> 
> 时间：2012-06-21T18:57:25.077
> 
> 标签：c#, windows, networking, routing

从代码中，我想强制 Windows 机器使用特定的网络适配器来连接到特定的 IP 地址。

我计划通过使用 ROUTE ADD 命令行工具来实现，但这需要我事先知道网络适配器的*索引号*（因为它必须提供给 ROUTE ADD 命令）。

**问题：如果我知道它的名称，我如何以编程方式检索网络适配器的索引？**

我知道 ROUTE PRINT 向我显示了我需要的信息（存在的所有网络适配器的索引号），但是也必须有一种方法可以通过编程方式获取该信息（C#）？

请注意，我不喜欢从 ROUTE PRINT 解析文本输出，因为文本格式可能会随着不同的 Windows 版本而改变。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T20:17:11.737

您可以使用 .Net `NetworkInterface`（和相关）类获取网络适配器的接口索引。

这是一个代码示例：

```
static void PrintInterfaceIndex(string adapterName)
{
  NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();
  IPGlobalProperties properties = IPGlobalProperties.GetIPGlobalProperties();

  Console.WriteLine("IPv4 interface information for {0}.{1}",
                properties.HostName, properties.DomainName);

  foreach (NetworkInterface adapter in nics)
  {               
    if (adapter.Supports(NetworkInterfaceComponent.IPv4) == false)
    {
      continue;
    }

    if (!adapter.Description.Equals(adapterName, StringComparison.OrdinalIgnoreCase))
    {
      continue;
    }
    Console.WriteLine(adapter.Description);                                
    IPInterfaceProperties adapterProperties = adapter.GetIPProperties();                
    IPv4InterfaceProperties p = adapterProperties.GetIPv4Properties();
    if (p == null)
    {
      Console.WriteLine("No information is available for this interface.");                    
      continue;
    }                
    Console.WriteLine("  Index : {0}", p.Index);              
  }
} 
```

然后只需使用您的网络适配器的名称调用此函数：

```
PrintInterfaceIndex("your network adapter name"); 
```

您还可以使用`Win32_NetworkAdapter`WMI 类获取网络适配器的 InterfaceIndex。该类`Win32_NetworkAdapter`包含一个名为 InterfaceIndex 的属性。

因此，要检索具有给定名称的网络适配器的 InterfaceIndex，请使用以下代码：

```
ManagementScope scope = new ManagementScope("\\\\.\\ROOT\\cimv2");

ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_NetworkAdapter WHERE Description='<Your Network Adapter name goes here>'");           
using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query))
{
  using (ManagementObjectCollection queryCollection = searcher.Get())
  {             
    foreach (ManagementObject mo in queryCollection)
    {                 
      Console.WriteLine("InterfaceIndex : {0}, name {1}", mo["InterfaceIndex"], mo["Description"]);
    }
  }
} 
```

如果您不想使用 WMI，也可以将 Win32 API 函数 [GetAdaptersInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365917%28v=vs.85%29.aspx)与`IP_ADAPTER_INFO`结构结合使用。您将在[pinvoke.net](http://www.pinvoke.net/default.aspx/iphlpapi/GetAdaptersInfo.html)找到一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:12:44.920

您是否考虑过使用 C# 的 system.net.networkinformation 接口？

[http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getallnetworkinterfaces.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.getallnetworkinterfaces.aspx)

我不熟悉 ROUTE ADD，但理论上你可以将一个与另一个的信息结合起来。

# haskell - 我重写的 foldl 函数优化了吗？

> ID：11144921
> 
> 赞同：7
> 
> 时间：2012-06-21T18:57:39.600
> 
> 标签：haskell, tail-call-optimization

两天前我刚开始使用 Haskell，所以我还不确定如何优化我的代码。

作为练习，我重写了`foldl`and `foldr`(我会`foldl`在这里给出，但是`foldr`是一样的，用`last`and`head`替换`init`) `tail`。

代码是：

```
module Main where

    myFoldl :: ( a -> ( b -> a ) ) -> a -> ( [b] -> a )

    myFoldl func = ( \x -> (\theList
        -> if (length theList == 0) then
            x
        else
            myFoldl func (func x (last theList) ) (init theList)
        ) ) 
```

我唯一担心的是我怀疑 Haskell 不能在这里应用尾调用优化，因为递归调用不是在函数末尾进行的。

我怎样才能优化这个尾调用？Haskell 的内置`foldl`实现与我的实现方式不同吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-21T19:14:48.083

您在代码示例中使用括号以及对尾递归的强调表明您是从 Lisp 或 Scheme 来到 Haskell。如果您从像 Scheme 这样的热切语言来到 Haskell，请注意：尾调用在 Haskell 中的性能预测不如热切语言中的预测。您可以拥有由于惰性而在线性空间中执行的尾递归函数，*并且*您可以拥有由于惰性而在恒定空间中执行的非尾递归函数。（已经糊涂了？）

您定义中的第一个缺陷是使用`length theList == 0`. 这会强制评估列表的整个脊椎，并且是 O(n) 时间。最好使用模式匹配，就像`foldl`在 Haskell 中这个朴素的定义中一样：

```
foldl :: (b -> a -> b) -> b -> [a] -> b
foldl f z [] = z
foldl f z (x:xs) = foldl f (f z x) xs 
```

然而，这在 Haskell 中表现得很糟糕，因为在调用者要求结果之前，我们实际上并不计算该`f z x`部分；`foldl`因此，这`foldl`会为每个列表元素在内存中累积未评估的 thunk，并且不会从尾递归中获得任何好处。事实上，尽管是尾递归的，这种`foldl`对长列表的幼稚可能会导致堆栈溢出！（该[`Data.List`模块](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)有一个`foldl'`没有这个问题的功能。）

与此相反，许多 Haskell 非尾递归函数执行得非常好。例如`find`，根据 的非尾递归定义，采用 的定义`foldr`：

```
find :: (a -> Boolean) -> [a] -> Maybe a
find pred xs = foldr find' Nothing xs
    where find' elem rest = if pred elem then Just elem else rest

foldr :: (a -> b -> b) -> b -> [a] -> b
foldr f z [] = z
foldr f z (x:xs) = f x (subfold xs)
    where subfold = foldr f z 
```

由于惰性，这实际上是在线性时间和恒定空间中执行的。为什么？

1.  一旦找到满足谓词的元素，就无需遍历列表的其余部分来计算 的值`rest`。
2.  一旦您查看一个元素并确定它不匹配，就无需保留有关该元素的任何数据。

我现在要传授的教训是：不要将你对热切语言的性能假设引入 Haskell。你才两天；首先专注于理解语言的语法和语义，不要强迫自己编写优化版本的函数。一开始你会`foldl`时不时地受到 -style 堆栈溢出的打击，但你会及时掌握它。

* * *

**编辑 [2012 年 9 月 5 日]：**更简单的演示，`find`尽管不是尾递归，但惰性在恒定空间中运行。首先，简化定义：

```
foldr :: (a -> b -> b) -> b -> [a] -> b
foldr f z [] = z
foldr f z (x:xs) = f x (foldr f z xs)

find :: (a -> Bool) -> [a] -> Maybe a
find p xs = let step x rest = if p x then Just x else rest
            in foldr step Nothing xs 
```

现在，使用等式推理（即，根据上面的定义，用 equals 代替 equals），并以惰性顺序（最外层优先）进行评估，让我们计算`find (==400) [1..]`：

```
find (==400) [1..]
    -- Definition of `find`:
    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing [1..]

    -- `[x, y, ...]` is the same as `x:[y, ...]`:
    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing (1:[2..])

    -- Using the second equation in the definition of `foldr`:
    => let step x rest = if x == 400 then Just x else rest
       in step 1 (foldr step Nothing [2..])

    -- Applying `step`:
    => let step x rest = if x == 400 then Just x else rest
       in if 1 == 400 then Just 1 else foldr step Nothing [2..]

    -- `1 == 400` is `False`
    => let step x rest = if x == 400 then Just x else rest
       in if False then Just 1 else foldr step Nothing [2..]

    -- `if False then a else b` is the same as `b`
    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing [2..]

    -- Repeat the same reasoning steps as above 
    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing (2:[3..])
    => let step x rest = if x == 400 then Just x else rest
       in step 2 (foldr step Nothing [3..])
    => let step x rest = if x == 400 then Just x else rest
       in if 2 == 400 then Just 2 else foldr step Nothing [3..]
    => let step x rest = if x == 400 then Just x else rest
       in if False then Just 2 else foldr step Nothing [3..]
    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing [3..]
        .
        .
        .

    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing [400..]
    => let step x rest = if x == 400 then Just x else rest
       in foldr step Nothing (400:[401..])
    => let step x rest = if x == 400 then Just x else rest
       in step 400 (foldr step Nothing [401..])
    => let step x rest = if x == 400 then Just x else rest
       in if 400 == 400 then Just 400 else foldr step Nothing [401..]
    => let step x rest = if x == 400 then Just x else rest
       in if True then Just 400 else foldr step Nothing [401..]

    -- `if True then a else b` is the same as `a`
    => let step x rest = if x == 400 then Just x else rest
       in Just 400

    -- We can eliminate the `let ... in ...` here:
    => Just 400 
```

请注意，随着我们继续遍历列表，连续评估步骤中的表达式不会变得越来越复杂或更长；*第n*步表达式的长度或深度与*n*不成比例，它基本上是固定的。这实际上演示了如何在恒定空间中懒惰地执行。*`find (==400) [1..]`*

 ** * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-21T19:01:34.547

惯用的 Haskell 看起来与此非常不同，它避开了 if-then-else、嵌套的 lambda、括号和解构函数（头、尾）。相反，你会这样写：

```
foldl :: (a -> b -> a) -> a -> [b] -> a
foldl f z0 xs0 = go z0 xs0
   where
       go z []     = z
       go z (x:xs) = go (f z x) xs 
```

而是依赖于模式匹配、where 子句、尾递归、受保护的声明。*

# macos - 在 PackageMaker (Mac OS X) 中生成的 .mpkg 包上设置文件元数据

> ID：11144922
> 
> 赞同：1
> 
> 时间：2012-06-21T18:57:39.973
> 
> 标签：macos, file, installation, metadata, packagemaker

我正在使用 PackageMaker 生成我的安装程序文件 (.mpkg)，并希望将版本和版权信息等内容添加到 .mpkg 文件中，以便可以通过 Mac OS X 查找器中的“获取信息”查看它们。

有没有办法做到这一点？

# c# - C# Visual Studio 2010 后台工作者，报告进度

> ID：11144925
> 
> 赞同：0
> 
> 时间：2012-06-21T18:57:49.040
> 
> 标签：c#, visual-studio-2010, backgroundworker, progress

嘿，我正试图让我的后台工作人员在我的表单更改时将参数发送回主线程..

在后台工作人员运行的方法中，我有这个

```
worker.ReportProgress(p); 
```

p 是正在运行的 for 循环中的变量

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        label6.Text = e.ToString();
    } 
```

我试图让这个标签文本在后台工作人员通过循环时更改为 p 。

谢谢你的帮助！！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:05:45.500

`ReportProgress`有两个参数：

1.  进度百分比（整数）
2.  用户状态（对象）

如果您不关心进度百分比，您可以发送`0`但不使用它：

```
worker.ReportProgress(0, p); 
```

或者您可以使用单个参数重载并*仅*发送进度百分比。

在您的处理程序中`ProgressChangedEventArgs`，您必须使用几个属性。要获取进度百分比值，您可以将其访问为

```
myPercentLabel.Text = e.ProgressPercentage.ToString; 
```

要获取您的用户数据（`p`），您必须以以下方式访问它：

```
label6.Text = e.UserState.ToString; 
```

要发送更复杂的数据，您可以在 UserState 中发送任何类型的对象或结构，只要您在处理程序中正确地转换它即可。在任何一种情况下，您都必须访问`ProgressPercentage` *或*的`UserState`属性`e`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:02:04.657

您可能会遇到一些问题。首先，如果您在后台工作程序中的循环相对较快，则该值可能会更改得太快，以至于您的标签无法跟上。其次，标签不一定会在每次设置文本时立即刷新，因此可能会跳过一些值。最后，我相信你真正想要的是 e.UserState.ToString() 而不仅仅是 e.ToString();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:05:17.413

你必须通过

```
worker.ReportProgress((int)(p*100.0/loopMaxValue)); 
```

然后使用

```
label6.Text = e.ProgressPercentage.ToString(); 
```

代替

```
label6.Text = e.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:07:46.920

我知道了！

做过这个...

```
 label6.Text = e.UserState.ToString(); 
```

# perl - 我在 Perl 中使用 Data::Dumper 序列化了我的数据。现在，当我评估它时，我得到“全局符号“$VAR1”需要显式包名”

> ID：11144926
> 
> 赞同：3
> 
> 时间：2012-06-21T18:57:49.540
> 
> 标签：perl, serialization, eval, data-dumper

我使用 Data::Dumper 将我的数据序列化为 Perl 中的字符串。现在在另一个程序中，我试图通过使用反序列化它，`eval`我得到：

```
Global symbol "$VAR1" requires explicit package name 
```

我`use warnings; use strict;`在我的程序中使用。

这是我`eval`编写代码的方式：

```
my $wiki_categories = eval($db_row->{categories});
die $@ if $@;
/* use $wiki_categories */ 
```

我怎样才能禁用我的程序因为`"$VAR1"`没有被声明为而死亡`my`？

我应该在in`"my "`之前附加吗？像这样：`$db_row->{categories}``eval`

```
my $wiki_categories = eval("my ".$db_row->{categories}); 
```

我还没有对此进行测试，但我认为它会起作用。

还有其他方法可以做到这一点吗？也许将它包装在某个块中，然后对该块关闭严格？我从来没有做过，但我看到它提到过。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T19:13:30.727

这个是正常的。默认情况下，当 Data::Dumper 序列化数据时，它会输出如下内容：

```
$VAR1 = ...your data... 
```

要使用 Data::Dumper 进行序列化，需要稍微配置一下。 `Terse`作为最重要的设置选项，它会关闭它`$VAR`。

```
use Data::Dumper;

my $data = {
    foo => 23,
    bar => [qw(1 2 3)]
};

my $dumper = Data::Dumper->new([]);
$dumper->Terse(1);

$dumper->Values([$data]);
print $dumper->Dump; 
```

然后可以将结果直接评估为变量。

```
my $data = eval $your_dump; 
```

您可以使用各种技巧来缩小 Data::Dumper 的大小，但总体而言，它既快速又节省空间。主要的缺点是它只是 Perl 并且非常不安全。如果有人可以修改您的转储文件，他们就拥有您的程序。

CPAN 上有一些模块可以为您解决这个问题，还有更多模块，例如[Data::Serializer](http://search.cpan.org/perldoc?Data::Serializer)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T19:15:57.407

你的问题有很多含义，我会尽可能多地解决。

首先，阅读 Data::Dumper 的 perldoc。设置`$Data::Dumper::Terse = 1`可能足以满足您的需求。全局变量这里有很多选项，所以一定要本地化它们。但这会改变数据的生产者，而不是消费者。我不知道你有多少控制权。您的问题*意味着*您正在为消费者工作，但没有提及对生产者的任何控制。也许数据已经存在，您必须按原样使用它。

下一个含义是您与 Data::Dumper 相关联。同样，数据可能已经存在，所以太糟糕了，使用它。如果不是这种情况，我建议切换到另一种可存储格式。现在相当普遍的是 JSON。虽然 JSON 不是核心 perl 的一部分，但安装起来非常简单。它也使这变得容易得多。一个优点是这些数据在其他语言中也很有用。另一个是你避免 eval STRING，如果数据被泄露，很容易危及你的消费者。

下一项就是如何按原样解决它。例如，如果数据存在。一个简单的解决方案是像你一样添加 my 。这工作正常。另一种是剥离 $VAR1: `(my $dumped = $db_row->{categories}) =~ s/^\s*\$\w+\s*=\s*//;`。另一种是将“无警告”直接放入 eval:`eval ("no warnings; no strict; " . $db_row->{categories});`中。

就个人而言，我尽可能使用 JSON。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T19:49:34.787

您的代码将按原样工作，除了`eval`失败，因为`$VAR1`在范围内未声明`eval`并且`use strict 'vars'`有效。

通过在尽可能紧的块内禁用限制来解决此问题。一个`do`块就可以了，就像这样

```
my $wiki_categories = do {
  no strict 'vars';
  eval $db_row->{categories};
}; 
```

# afnetworking - Kerberos 身份验证示例？

> ID：11144928
> 
> 赞同：3
> 
> 时间：2012-06-21T18:57:54.380
> 
> 标签：afnetworking

我们的服务从摘要认证转移到 SPNEGO/Kerberos，我在互联网上找不到很多关于 kerberos 和 NSURL* 的信息。AFNetworking 中是否支持 Kerberos 身份验证？我的基本理解是我需要 NSTask 出来 kinit 并获得一张票，然后创建某种 NSURLCredential 封装我的 KerberosServiceTicket？

我无法在谷歌上找到很多东西告诉我我错过了这个堆栈的一些基本内容，我应该在哪里寻找？

我想使用 kerberos 票证对通过我的 AFHTTPClient 的所有流量进行身份验证。

# c++ - 缺少 std::string 功能

> ID：11144937
> 
> 赞同：2
> 
> 时间：2012-06-21T18:58:27.890
> 
> 标签：c++, string, std, qstring

任何人都知道为什么与 Qt 中的 QString 类或 Python 字符串相比，为什么 C++ 标准库的`std::string`类（或更一般的`std::basic_string`类模板）缺少普通的字符串功能，例如大写、子字符串替换和修剪等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T20:34:56.850

我要试一试这...

该模板`std::basic_string`最初是编写并包含在[STL](http://www.sgi.com/tech/stl/table_of_contents.html)中，它代表了我们所知道的标准库的“抽象”部分（容器、迭代器、算法、分配器等）。这也包括在内`std::string`。

[请注意STL](http://www.sgi.com/tech/stl/table_of_contents.html)中绝对没有编码、国际化或区域设置相关功能。这不是设计目标。

现在我对前几代发生的事情的看法：当 C++ 标准化时，需要一个全面的标准库。STL 非常适合这种情况，并且几乎被逐字接管。`<iostream>`直到后来才添加了类似的东西`<locale>`。流和字符串之间笨拙且非常不连贯的接口差异仅证明了这种“让我们把它放在一起”的态度。

与许多`std`设施一样，组件之间的互操作并未优化。最重要的是，包装现有 C 功能（如`toupper`）的小型 C++ 函数的简单性已被用作不将其包含在标准库中的原因。

通过标准的下一次修订（以及它所包含的库），向后兼容性阻止了添加任何有用和必要的更改（将语言环境注入`std::string`功能）。

请注意，这个猜想根本不能解释为什么`std::trim`没有添加一个字符串和语言环境对象。它确实试图解释所涉及的后台过程。

既然已经说了这么多，我完全同意 C++ 标准库的一般用途是笨重且不完整的。

**更新**：我被告知我的时间线颠倒了：标准库（和 iostream）在添加 STL 之前就已经存在。上面的观点仍然有效：STL 是复制粘贴的，几乎没有集成（简单的例子：直到最近才丢失`std::basic_istream<T>::open(const std::basic_string<T>&)`，由于一些东西，它将在下一次迭代中被弃用`std::filesystem`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T19:53:28.337

无法从最一般的意义上回答所有缺失的功能，但是……</p>

提到的两个功能，修剪和大写，是依赖于语言环境的。它们不仅是字符的功能，而且是所使用的编码和语言。

`std::string`并没有真正处理。尽管在实践中，每个人都使用 Unicode 和 ASCII 定义的空格，但这对于定义 C++ 的标准化过程来说还不够通用。

此类操作是通过流（例如，读取 a`std::stringstream`以去除多余空间）和语言环境对象（例如，通过 访问`std::tolower`）获得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:00:12.087

功能差？被认为是*标准库*中臃肿的组件之一。你有一整套在 s 上运行的*算法*`std::string`，所有的标准算法。不要将自己限制在成员函数中，接口中的功能远不止这些……

# javascript - jQuery append() 完成后调用 focus()

> ID：11144941
> 
> 赞同：0
> 
> 时间：2012-06-21T18:58:50.367
> 
> 标签：javascript, jquery

我有一个`append()`and a `focus()`，它设置为将第一个输入集中在附加的`dom`.

IE 需要时间来追加，因此焦点不起作用。有没有办法（除了）在完全附加`setTimeout`后设置焦点？`dom`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:09:25.790

`append()`并且`appendTo()`是同步命令，因此不需要回调。

```
$(child).appendTo(parent)
        .focus(); 
```

如果您使用多个`append()`语句，这实际上比简单地附加一次大的东西要慢得多。这可以解释为什么你发现它在 IE 中需要一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:13:25.230

```
var oldHtml, el, toBeAppended;
function appendAndFocus()
{
   oldHtml = el.html();
   el.append(toBeAppended);
   appnedAndFocus_h()
}
function appnedAndFocus_h()
{
   if(el.html()==oldHtml) //if(el==oldHtml) - CORRECTED.
   {
      setTimeout(appendAndFocus_h, 10); //just for browser to be taken a breath.
      return;
   }
   else
   {
      el.focus();
   } 
} 
```

**注意**：未经测试的代码。

# asp.net-mvc-3 - 使用@Html.Raw 有风险吗？

> ID：11144943
> 
> 赞同：6
> 
> 时间：2012-06-21T18:58:59.513
> 
> 标签：asp.net-mvc-3, razor

使用有风险`@Html.Raw`吗？在我看来不应该有。如果存在风险，那么无论`@Html.Raw`在 Chrome 等现代浏览器中使用是否允许编辑注入`<script>malicious()</script>`甚至将表单的发布操作更改为其他内容，这种风险都不会存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T19:01:56.547

`@Html.Raw`将允许执行要显示的值上的任何脚本。如果你想防止你需要使用`@Html.AttributeEncode`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T19:00:31.637

正确，风险在于它的使用方式。没有固有的风险`Html.Raw`。它是一个工具，仅此而已。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T23:01:44.803

如果要显示用户输入的信息，最好使用@Html.Encode()。

换句话说，如果你是，`displaying non-user eneterd data`你可以安全地使用@Html.Raw()

# android - 更新具有外部集合的数据库对象？

> ID：11144947
> 
> 赞同：0
> 
> 时间：2012-06-21T18:59:28.197
> 
> 标签：android, ormlite, foreign-collection

我正在考虑如何解决这个问题。我有一个可以属于多个类别的 ORMlite 对象；我正在使用另一个表（即 ForeignCollection）来跟踪我的对象和类别之间的多对多连接。

问题是如果我使用更改的类别更新对象，则会添加新类别，但不会删除旧类别。

[在DAO 更新方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#update%28T%29)的 JavaDoc 中，我看到以下文本：

> 注意：通常这不会保存对外部对象或外部集合所做的更改。

我的问题是关于“通常”这个词的使用。这是否意味着有一种方法可以通过某种设置来确保更新更新相关的外来对象/集合？

或者我应该像“通常”不存在一样阅读这句话，假设没有自动方法，并且我需要在提交每个对象以删除旧类别时运行额外的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:45:32.183

OrmLite 不会自动将对象保存到 ForeignCollections。您必须自己存储和删除这些对象。如果您在注释中设置正确的参数，Ormlite 将自动为您检索 ForeignCollection 中的对象。

Ormlite是“精简版”。它做 ORM，但不完全。它不是 JPA 或 Hibernate。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:16:36.763

> 问题是如果我使用更改的类别更新对象，则会添加新类别，但不会删除旧类别。

因此，您有一个具有外部类别集合的对象：

```
@ForeignCollectionField
ForeignCollection<Category> categories; 
```

如果您运行`categories.add(category1)`or `categories.remove(category1)`，则基础集合应使用内置 DAO 从其关联表中删除这些集合。

如果您以其他方式更改类别列表，那么您将不得不直接`Category`使用手动删除条目`categoryDao`。

> ......关于“通常”这个词的使用。这是否意味着有一种方法可以通过某种设置来确保更新更新相关的外来对象/集合？

不知道为什么我把“通常”这个词留在那里。我认为考虑到各种自动创建、自动刷新等字段设置是一个笼统的声明——我不确定。无论如何，我已将其从代码库中删除。

[ORMLite](http://ormlite.com/)无法知道异物是否已被更改。它不会创建魔术代理对象或会话，因此它可以判断何时更新了外部对象。您必须明确说明您想要什么时候更新。[关于外国收藏](http://ormlite.com/docs/foreign-collection)的文档对此非常明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T15:27:15.987

我通过直接将新类别添加到表类别中解决了这个问题，而不是向对象的foreignCollection 添加新类别。这可以通过简单地创建一个类别 ado 并添加一个新元素来完成。`newCategory.setObject(object)`为了创建与对象的关系，需要A。

希望这可以帮助。

# c++ - 使用稍后在 C++ 中定义的类类型定义类成员

> ID：11144949
> 
> 赞同：3
> 
> 时间：2012-06-21T18:59:46.850
> 
> 标签：c++

就像我想做这样的事情，

```
class Object {
public:
World * Parent_World; //This here
Object(World * Parent_World=NULL) : Parent_World(Parent_World) {}
};

class World {
public:
Object * Objects = new Object[100];
} 
```

由于订单，这不起作用。而且我不能简单地更早地定义世界，因为我还希望能够访问来自世界的类 Object

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T19:01:22.710

在 Object 之前进行前向声明：

```
class World; //Now you can use pointers and references to World
class Object {
public:
World * Parent_World; //This here
Object(World * Parent_World=NULL) : Parent_World(Parent_World) {}
};

class World {
public:
Object * Objects = new Object[100];
} 
```

进行前向声明为编译器提供了足够的信息来处理指向所声明类型的指针和引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:02:56.793

安德鲁的[回答](https://stackoverflow.com/a/11144968/383402)是正确的：你需要一个前向声明。

然而，值得注意的是，当编译器必须知道对象的大小时，不能使用前向声明。这意味着您的`World*`成员将工作，但`World`成员不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:01:42.687

向前声明你的类，如下所示：

```
 class World; 
```

如果在定义 World 类之前只使用指向 World 的指针，则此方法有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:02:31.417

简单的说

```
class World; 
```

前

```
class Object { ... } 
```

这称为[前向声明](http://www.adp-gmbh.ch/cpp/forward_decl.html)。

# asp.net - 异步设置为 True 会引发错误，但仍会将数据发送到服务器端

> ID：11144950
> 
> 赞同：1
> 
> 时间：2012-06-21T18:59:48.603
> 
> 标签：asp.net, jquery, asynchronous

将 Async 设置为 false 时，此代码处理得很好，但将 Aync 设置为 true 时，一旦调用 Ajax，就会抛出错误（带有“fail”的警报消息）但仍在处理中（表示数据已发送到服务器端并保存数据！）。

因此，将 Async 设置为 false 或 true 即可完成工作，但将 Async 设置为 true 会导致 Error 并引发错误。

我通过按钮上的 onClick 事件调用此 Ajax。

```
$.ajax({
    type: "POST",
    async: true,
    cache: false,
    url: "ScriptWS.asmx/UpdateXml",
    data: "{'QuestionKey':'" + QuestionKey + "'}",
    contentType: "application/json; charset=utf-8",
    dataType: "html",
    success: function (data) {
        UpdateXml_CallBack(data);
    },
    error: function (msg) {
        alert('fail');
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:29:53.570

我真的找到了答案。

问题是我正在运行一个 for 循环来发送 AJAX 调用。所以它同时发送 AJAX 调用，响应丢失，或者被下一个 AJAX 调用中断。

我从这里使用 AjaxQueue 解决了这个问题 [http://gnarf.net/2011/06/21/jquery-ajaxqueue/](http://gnarf.net/2011/06/21/jquery-ajaxqueue/)

谢谢你。

# hibernate - Hibernate 以空 FK 静默插入失败，没有抛出异常

> ID：11144953
> 
> 赞同：2
> 
> 时间：2012-06-21T18:59:56.173
> 
> 标签：hibernate

我在使用 Hibernate 时遇到了一些问题，当我期望它不会抛出异常时。简而言之，我有一个实体映射到具有所需 FK 的表（由 Hibernate 生成的表）；如果在 Java 中正确指定了 FK，则一切正常。但是，如果省略 FK，则实体不会保存到 DB。很好——但我没有得到例外`session.save()`，甚至在`transaction.commit()`; 我只有在尝试加载实体时才意识到这个问题。这使得调试成为一场噩梦。当然，当我提交时，Hibernate*应该*最迟发出某种错误？

我不知道错误可能来自哪里，所以我不太确定如何包含适当的特定信息。欢迎任何提示。

伪代码：

```
try {
    tx = session.beginTransaction();

    MyEntity me = new MyEntity();
    me.setName("Foo");
    // Omitting to call me.setSomeFK(someOtherEntity);
    session.save(me);

    tx.commit();
    System.out.println("Everything is OK");
}
catch (Exception e) {
    tx.rollback();
} 
```

可悲的是，它认为“ `Everything is OK`”。一切*都不*正常。

* * *

实体代码（示例）：

不幸的是，我无法展示全部内容，但是

`GenericParticipantEntity.java`：

```
@Entity
@Table
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(
    name = "participant_type",
    discriminatorType = DiscriminatorType.STRING,
    length = 16
)
abstract public class GenericParticipantEntity {
    private long participantId;
    private StatEventEntity event;
    private SeasonEventEntity seasonEvent;
    // A bunch of other fields

    @Id
    @Column(name = "participantId")
    @GeneratedValue(strategy = GenerationType.AUTO)
    public long getParticipantId() {
        return participantId;
    }
    public void setParticipantId(long participantId) {
        this.participantId = participantId;
    }

    @ManyToOne(targetEntity = StatEventEntity.class, optional = false)
    @JoinColumn(name = "stat_event_id")
    public StatEventEntity getEvent() {
        return event;
    }
    public void setEvent(StatEventEntity event) {
        this.event = event;
    }

    @ManyToOne
    @JoinColumn(name = "season_event_id", nullable = false)
    public SubSeasonEventEntity getSeasonEvent() {
        return seasonEvent;
    }
    public void setSeasonEvent(SubSeasonEventEntity seasonEvent) {
        this.seasonEvent = seasonEvent;
    }
} 
```

`SpecificParticipant.java`（这个真的不包含代码）：

```
@Entity
@DiscriminatorValue("specific1")
public class SpecificParticipant extends GenericParticipantEntity { } 
```

用法：

```
Transaction tx;
Long id = null;
try {
    tx = session.beginTransaction();
    SpecificParticipant somePlayer = new SpecificParticipant();
    somePlayer.setEvent(someEvent);
    id = session.save(somePlayer);
    tx.commit();
}
catch (Throwable e) {
    if (tx != null) tx.rollback();
    throw e;
} 
```

请注意，我忘记设置`seasonEvent`属性，所以当然`INSERT`查询最终会失败——它应该失败；这是我的错误。令我困惑的是，Hibernate 在这里没有抛出异常；相反，当我尝试基于 加载对象时，我发现了问题，`id`数据库中没有要加载的内容。

SQL 完全由 Hibernate 生成，所以如果 DDL 中出现错误，那肯定是由于 Java 代码中的错误。

# iphone - 无法使用 avformat_open_input 打开文件 - 返回“无法打开！处理输入时发现无效数据”

> ID：11144954
> 
> 赞同：2
> 
> 时间：2012-06-21T18:59:58.010
> 
> 标签：iphone, objective-c, ios, ffmpeg

我只是在 iOS 5 上玩 ffmpeg。我从一些简单的东西开始，比如打开 .mov 文件。

代码片段：

```
AVFormatContext *pFormatCtx = NULL;
av_register_all();

NSString* fileName =  [[NSBundle mainBundle] pathForResource:@"test" ofType:@"mov"];
NSLog(@"File exists? %i", [[NSFileManager defaultManager] fileExistsAtPath:fileName]);
NSLog(@"FIle name: %@", fileName);
char errbuf[256];

int ret = avformat_open_input(&pFormatCtx, [fileName UTF8String], NULL, NULL);
    if(ret != 0) {
        av_strerror(ret,errbuf,sizeof(errbuf));
        NSLog(@"Cannot open! %s", errbuf);
    } else {
        NSLog(@"Opened!");
    } 
```

test.mov 存在于我的包中，并且 avformat_open_input 正在尝试打开它 - 但 avformat_open_input 总是返回（当将错误代码解码为字符串时）：

```
Invalid data found when processing input. 
```

（文件丢失时的错误码是另一个文本，我试过了）。

我想也许 ffmpg 没有使用 .mov 支持编译，但我无法打开任何电影文件。我试图查看 ./configure 选项，但没有找到任何提示。

# windows - 在 Windows 上增加 VIM 窗口大小

> ID：11144957
> 
> 赞同：1
> 
> 时间：2012-06-21T19:00:14.193
> 
> 标签：windows, vim

有没有增加窗口机器上 Vim 命令窗口大小的命令？注意：我不需要在 vimrc 中设置启动大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:12:55.003

我不知道什么是 Vim“命令窗口”。Windows 中的 GVim 通常是一个窗口，并且只有一个窗口。

如果你想改变那个窗口的大小，你可以改变行数和列数

```
set lines=100
set columns=100 
```

例如。

如果您要参考可用于编写命令的行数

```
set cmdheight=2 (two is usually enough) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:03:18.567

点击命令窗口左上角的VIM图标，选择属性，然后布局，然后更改窗口大小的宽度和高度

甚至在编辑器中使用时更好

*   ：设置行=40
*   ：设置列=80

# c - C 运行时类型检查

> ID：11144962
> 
> 赞同：0
> 
> 时间：2012-06-21T19:00:41.927
> 
> 标签：c, types

我有一个 C 库，用于存储包含多个字段的记录。Schema 是从文本文件中读入的，包括记录中每个字段的类型。

为了简化问题，假设我有

```
typedef enum my_type_enum
{
    INT32, //32-bit integer
    MYSTRUCT, //some struct I have, details irrelevant
    ...
} my_type_enum;

typedef struct my_var
{
    my_type_enum typetag;
    unsigned char* data;
} my_var;

my_var myrecord[numfields]; 
```

模式文件说明 myrecord 的每个字段是否应包含 int32_t 或 mystruct。我的库读取模式文件，并为 myrecord 中的每个 my_var 设置标签并为数据分配适量的空间。

my_var 是不透明的，客户端程序基本上使用，用于简单数据

```
void set(my_var* record, size_t field, void * src)
{
    memcpy(record[field].data, src, datatypes[record[field].typetag].size);
}

int32_t x = 5; 
set(myrecord, 0, &x); 
```

将值存储在记录中，并使用类似的 get() 将内容取出。

一旦数据在 my_var 中，标记的 my_var 类型就允许进行类型检查，但是如果架构说记录包含三个 INT32，那么当您尝试 set() 数据时，当然没有什么可以检查 src 指向 int32_t 而不是 mystruct进入 my_var。

显然，在将 int32_t* 或 mystruct* 转换为 void* 之前，需要在包装 set() 的东西中进行检查。我见过使用 typeof() 诡计进行编译时检查。我觉得我想要的可能是不可能的，但你永远不会知道所有的技巧......

有什么比提供在客户端程序编译时读取模式并生成 set_CHECKED() 包装宏的工具更好的方法，如果有人试图将 int32_t 复制到标记为保存 mystruct 的 my_var 中，则会出现编译器错误？GCC 扩展很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:48:31.597

实际上，“设置”和“获取”似乎是放置支票的正确位置。如果访问类型错误的字段是致命错误，则修复很简单：

```
void set(my_var* record, size_t field, void * src)
{
    if (record[field].typetag != (my_var)src->typetag) {
        fprintf(stderr, "Type mismatch!\n");
        exit(1);
    }
    memcpy(record[field].data, src, datatypes[record[field].typetag].size);
} 
```

如果类型不匹配不是致命错误，则需要设置并获取返回和错误代码，并在调用站点正确处理。

请注意，在 C 语言中，类型信息在代码编译时已经消失。'typetag' 字段是您必须知道字段类型的唯一方法。

当然，如果您不需要在不重新编译库的情况下更改架构，您可以尝试从中生成 C 代码。这将让您在编译时使用编译器的类型检查。

（另外：没什么大不了的，但 my_var.data 应该是 void*，而不是 char*。这不会改变代码的正确性，但 void* 会告诉读者（和调试器）类型未知。）

# jquery-animate - jQuery Animate 适用于 ids 但不适用于类

> ID：11144963
> 
> 赞同：0
> 
> 时间：2012-06-21T19:00:48.257
> 
> 标签：jquery-animate

我有四个绝对定位在 bxSlider div 上的 div。这四个潜水应该扩大到 20 像素宽度，然后缩小到 0 像素宽度，暂停，改变颜色并重复。

我为每个 div 分配了一个 id 和一个公共类。当我对类运行我的 jQuery 时，颜色改变了几次，然后再没有改变。但是当我将相同的代码转换为针对 id 运行时，它可以完美地执行。

我的 jQuery 代码是：

```
 script type="text/javascript">
    jQuery(document).ready(function(){
        bar1LoopBus();
    });

    function bar1LoopBus() {
        jQuery("#bar1").css("background", "#00b2e3" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopDes );
    }

    function bar1LoopDes() {
        jQuery("#bar1").css("background", "#9c603e" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopSus );
    }

    function bar1LoopSus() {
        jQuery("#bar1").css("background", "#a0b943" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopInn );
    }

    function bar1LoopInn() {
        jQuery("#bar1").css("background", "#cc0001" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopTec );
    }

    function bar1LoopTec() {
        jQuery("#bar1").css("background", "#f6821f" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopBus );
    }
</script> 
```

我的 div 代码是：

```
<div id="bars">
    <div id="bar1" class="slidebar"></div>
    <div id="bar2" class="slidebar"></div>
    <div id="bar3" class="slidebar"></div>
    <div id="bar4" class="slidebar"></div>
</div> 
```

就目前而言，我必须运行整个 jQuery 代码四次，每个 div 一次。这似乎很浪费，但正如我所说，如果我尝试用类而不是 id 运行一次，颜色会改变两到三次，然后停留在一种颜色上。宽度变化继续按预期发生。

[编辑 = 每个请求添加完整代码]

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <!-- saved from url=(0047)http://www.pldainteriors.com/index.asp?pageid=1 -->
    <html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>PLDA Interiors</title>
    <script src="./PLDA Interiors_files/AC_RunActiveContent.js" type="text/javascript"></script>

    <link href="slider.css" rel="stylesheet" type="text/css">
    <link href="./PLDA Interiors_files/homestyle.css" rel="stylesheet" type="text/css">
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script src="http://bxslider.com/sites/default/files/jquery.bxSlider.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      jQuery(function(){
      jQuery('#headerslider').bxSlider({
        mode: 'fade',
        auto: true,
        autoControls: false,
        controls: false,
        speed: 4000
      });
    });
    </script>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            textLoopBus();
        });

        function textLoopBus() {
            jQuery("#ts-business").animate({ width: '120px' }, 2000 );
            jQuery("#ts-business").animate({ width: '0px' }, 2000 );
            jQuery("#ts-business").animate({ width: '0px' }, 2000 , textLoopDes );
        }

        function textLoopDes() {
            jQuery("#ts-design").animate({ width: '120px' }, 2000 );
            jQuery("#ts-design").animate({ width: '0px' }, 2000 );
            jQuery("#ts-design").animate({ width: '0px' }, 2000 , textLoopSus );
        }

        function textLoopSus() {
            jQuery("#ts-sustainability").animate({ width: '120px' }, 2000 );
            jQuery("#ts-sustainability").animate({ width: '0px' }, 2000 );
            jQuery("#ts-sustainability").animate({ width: '0px' }, 2000 , textLoopInn );
        }

        function textLoopInn() {
            jQuery("#ts-innovation").animate({ width: '120px' }, 2000 );
            jQuery("#ts-innovation").animate({ width: '0px' }, 2000 );
            jQuery("#ts-innovation").animate({ width: '0px' }, 2000 , textLoopTec );
        }

        function textLoopTec() {
            jQuery("#ts-technology").animate({ width: '120px' }, 2000 );
            jQuery("#ts-technology").animate({ width: '0px' }, 2000 );
            jQuery("#ts-technology").animate({ width: '0px' }, 2000 , textLoopBus );
        }
    </script>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            bar1LoopBus();
        });

        function bar1LoopBus() {
            jQuery("#bar1").css("background", "#00b2e3" );
            jQuery("#bar1").animate({ width: '20px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopDes );
        }

        function bar1LoopDes() {
            jQuery("#bar1").css("background", "#9c603e" );
            jQuery("#bar1").animate({ width: '20px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopSus );
        }

        function bar1LoopSus() {
            jQuery("#bar1").css("background", "#a0b943" );
            jQuery("#bar1").animate({ width: '20px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopInn );
        }

        function bar1LoopInn() {
            jQuery("#bar1").css("background", "#cc0001" );
            jQuery("#bar1").animate({ width: '20px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopTec );
        }

        function bar1LoopTec() {
            jQuery("#bar1").css("background", "#f6821f" );
            jQuery("#bar1").animate({ width: '20px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 );
            jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopBus );
        }
    </script>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            bar2LoopBus();
        });

        function bar2LoopBus() {
            jQuery("#bar2").css("background", "#00b2e3" );
            jQuery("#bar2").animate({ width: '20px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 , bar2LoopDes );
        }

        function bar2LoopDes() {
            jQuery("#bar2").css("background", "#9c603e" );
            jQuery("#bar2").animate({ width: '20px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 , bar2LoopSus );
        }

        function bar2LoopSus() {
            jQuery("#bar2").css("background", "#a0b943" );
            jQuery("#bar2").animate({ width: '20px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 , bar2LoopInn );
        }

        function bar2LoopInn() {
            jQuery("#bar2").css("background", "#cc0001" );
            jQuery("#bar2").animate({ width: '20px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 , bar2LoopTec );
        }

        function bar2LoopTec() {
            jQuery("#bar2").css("background", "#f6821f" );
            jQuery("#bar2").animate({ width: '20px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 );
            jQuery("#bar2").animate({ width: '0px' }, 2000 , bar2LoopBus );
        }
    </script>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            bar3LoopBus();
        });

        function bar3LoopBus() {
            jQuery("#bar3").css("background", "#00b2e3" );
            jQuery("#bar3").animate({ width: '20px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 , bar3LoopDes );
        }

        function bar3LoopDes() {
            jQuery("#bar3").css("background", "#9c603e" );
            jQuery("#bar3").animate({ width: '20px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 , bar3LoopSus );
        }

        function bar3LoopSus() {
            jQuery("#bar3").css("background", "#a0b943" );
            jQuery("#bar3").animate({ width: '20px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 , bar3LoopInn );
        }

        function bar3LoopInn() {
            jQuery("#bar3").css("background", "#cc0001" );
            jQuery("#bar3").animate({ width: '20px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 , bar3LoopTec );
        }

        function bar3LoopTec() {
            jQuery("#bar3").css("background", "#f6821f" );
            jQuery("#bar3").animate({ width: '20px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 );
            jQuery("#bar3").animate({ width: '0px' }, 2000 , bar3LoopBus );
        }
    </script>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            bar4LoopBus();
        });

        function bar4LoopBus() {
            jQuery("#bar4").css("background", "#00b2e3" );
            jQuery("#bar4").animate({ width: '20px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 , bar4LoopDes );
        }

        function bar4LoopDes() {
            jQuery("#bar4").css("background", "#9c603e" );
            jQuery("#bar4").animate({ width: '20px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 , bar4LoopSus );
        }

        function bar4LoopSus() {
            jQuery("#bar4").css("background", "#a0b943" );
            jQuery("#bar4").animate({ width: '20px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 , bar4LoopInn );
        }

        function bar4LoopInn() {
            jQuery("#bar4").css("background", "#cc0001" );
            jQuery("#bar4").animate({ width: '20px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 , bar4LoopTec );
        }

        function bar4LoopTec() {
            jQuery("#bar4").css("background", "#f6821f" );
            jQuery("#bar4").animate({ width: '20px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 );
            jQuery("#bar4").animate({ width: '0px' }, 2000 , bar4LoopBus );
        }
    </script>
    </head>
    <body>
    <div id="container">

        <div id="homeheader">
            <div id="homemenu">
                <ul>
                    <li><a href="./PLDA Interiors_files/PLDA Interiors.htm" title="Home" class="select">Home</a></li>
                    <li><a href="http://www.pldainteriors.com/index.asp?pageid=41" title="Projects">Projects</a></li>
                    <li><a href="http://www.pldainteriors.com/index.asp?pageid=42" title="Services">Services</a></li>
                    <li><a href="http://www.pldainteriors.com/index.asp?pageid=43" title="About">About</a></li>
                    <li><a href="http://www.pldainteriors.com/index.asp?pageid=44" title="News">News</a></li>
                    <li><a href="http://www.pldainteriors.com/index.asp?pageid=45" title="Contact">Contact</a></li>
              </ul>
            </div>
            <img src="images/plda.jpg" alt="plda interiors" id="pldalogo" />
            <div id="headerslider">
                <div id="slider-one" class="mainslide">

                </div>
                <div id="slider-two" class="mainslide">

                </div>
                <div id="slider-three" class="mainslide">

                </div>
                <div id="slider-four" class="mainslide">

                </div>
                <div id="slider-five" class="mainslide">

                </div>
            </div><!-- #headerslider -->
            <div id="bars">
                <div id="bar1" class="slidebar"></div>
                <div id="bar2" class="slidebar"></div>
                <div id="bar3" class="slidebar"></div>
                <div id="bar4" class="slidebar"></div>
            </div>
            <div style="height:1px;margin-bottom:2px;clear:both;"></div>
            <div id="change">
                <div style="float:left;margin-left:180px;margin-right:60px">
                    <img src="images/change.jpg" />
                </div>
                <div style="float:left;">
                    <div id="changeslide">
                        <div class="textslide" id="ts-business">
                            <img src="images/business.jpg" />
                        </div>
                        <div class="textslide" id="ts-design">
                            <img src="images/design.jpg" />
                        </div>
                        <div class="textslide" id="ts-sustainability">
                            <img src="images/sustainability.jpg" />
                        </div>
                        <div class="textslide" id="ts-innovation">
                            <img src="images/innovation.jpg" />
                        </div>
                        <div class="textslide" id="ts-technology">
                            <img src="images/technology.jpg" />
                        </div>
                    </div><!-- #changeslide -->
                    <img src="images/designchangeslives.jpg" style="margin-top:24px;" />
                </div>
            </div>
        </div>
        <div>
            body copy
        </div>

        <div id="footer">
            <div id="footerleft">
                <div id="copyright">Copyright © 2009, PLDA, Inc.</div>
                <div id="tagline">Interior Design/Interior Architecture</div>
            </div>
            <div id="contactdetails">
                <span>914 St. Paul Street, Baltimore, Maryland 21202 </span>
                <span><em>t</em> 410.234.8998 </span>
                <span><em>f</em> 410.234.0614 </span>
            </div>
        </div>
    </div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:27:46.587

我不明白，你的问题是什么:)

```
<html>
<head>
<title>Offline</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<style>
.slidebar {
  width: 200px;
  height: 20px;
}
</style>
<script type="text/javascript">
    jQuery(document).ready(function(){
        bar1LoopBus();
    });

    function bar1LoopBus() {
        jQuery(".bar1").css("background", "#00b2e3" );
        jQuery(".bar1").animate({ width: '20px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 , bar1LoopDes );
    }

    function bar1LoopDes() {
        jQuery("#bar1").css("background", "#9c603e" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopSus );
    }

    function bar1LoopSus() {
        jQuery("#bar1").css("background", "#a0b943" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopInn );
    }

    function bar1LoopInn() {
        jQuery("#bar1").css("background", "#cc0001" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopTec );
    }

    function bar1LoopTec() {
        jQuery("#bar1").css("background", "#f6821f" );
        jQuery("#bar1").animate({ width: '20px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 );
        jQuery("#bar1").animate({ width: '0px' }, 2000 , bar1LoopBus );
    }

</script>
</head>
<body>
<div id="bars">
    <div id="bar1" class="slidebar bar1"></div>
    <div id="bar2" class="slidebar"></div>
    <div id="bar3" class="slidebar"></div>
    <div id="bar4" class="slidebar"></div>
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:35:27.173

我不完全确定你哪里出错了。我认为您要寻求帮助的是让动画工作`$('.slidebar')`而不是`$('#bar1')`等。如果您不知道，约定是`.class`and `#id`。[如果我正确理解了您的问题，这](http://jsfiddle.net/firelizzard/LVrRf/1/)是您想要的东西。我更改了宽度并删除了与条形不直接相关的所有内容。我注意到由于没有内容，条形的高度为零，所以我添加了一个不间断的空间。您也可以`.slidebar { height: <someheight>; }`在某处添加到您的 CSS。如果这不能解决您的问题，请在评论中详细说明，我会尽力而为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:35:39.773

复制一个 html 文件并尝试以下代码：

```
<html>
<head>
<title>Offline</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<style>
.slidebar {
  width: 200px;
  height: 20px;
}
</style>
<script type="text/javascript">
    jQuery(document).ready(function(){
        bar1LoopBus();
    });

    function bar1LoopBus() {
        jQuery(".bar1").css("background", "#00b2e3" );
        jQuery(".bar1").animate({ width: '20px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 , bar1LoopDes );
    }

    function bar1LoopDes() {
        jQuery(".bar1").css("background", "#9c603e" );
        jQuery(".bar1").animate({ width: '20px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 , bar1LoopSus );
    }

    function bar1LoopSus() {
        jQuery(".bar1").css("background", "#a0b943" );
        jQuery(".bar1").animate({ width: '20px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 , bar1LoopInn );
    }

    function bar1LoopInn() {
        jQuery(".bar1").css("background", "#cc0001" );
        jQuery(".bar1").animate({ width: '20px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 , bar1LoopTec );
    }

    function bar1LoopTec() {
        jQuery(".bar1").css("background", "#f6821f" );
        jQuery(".bar1").animate({ width: '20px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 );
        jQuery(".bar1").animate({ width: '0px' }, 2000 , bar1LoopBus );
    }

</script>
</head>
<body>
<div id="bars">
    <div id="bar1" class="slidebar bar1"></div>
<hr />
    <div id="bar2" class="slidebar bar1"></div>
<hr />
    <div id="bar3" class="slidebar bar1"></div>
<hr />
    <div id="bar4" class="slidebar bar1"></div>
</div>

</body>
</html> 
```

# javascript - 使用上一个/下一个按钮控制 jQuery 选项卡

> ID：11144964
> 
> 赞同：0
> 
> 时间：2012-06-21T19:00:56.387
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

我通过按钮单击功能进行了一场战斗控制选项卡。我希望用户按顺序浏览标签。每个选项卡都有不同的 html 表单。所以按钮也提供了验证。但主要问题是下一个和上一个按钮根本不起作用。为什么按钮根本不改变标签？

**jQuery**

```
<script type="text/javascript">
    $(".nexttab").click(function() {
        var selected = $("#tabs").tabs("option", "selected");
        $("#tabs").tabs("option", "selected", selected + 1);
    });

    $(".backtab").click(function() {
        var selected = $("#tabs").tabs("option", "selected");
        $("#tabs").tabs("option", "selected", selected - 1);
    });
</script> 
```

**HTML**

```
<div id="convertThis">
    <div id="tabs">
        <div href="#a" rel="a" title="./images/icons/category1.png">Category 1</div>
        <div href="#b" rel="b" title="./images/icons/category2.png">Category 2</div>
    </div>

    <div id="divs">
        <div id="a">
               <form action="" method="post">
                 CATEGORY 1 FORM CONTENT
                    <div class="tabController">
                        <div class="tabNext">
                        <input type="button" class="nexttab" value="Next &gt;&gt;" name="submit" id="submit" style="background: #EFEFEF; float:right;"/>
                        </div>
                    </div>
                </form>
        </div>
        <div id="b">
             <form action="" method="post" id="post2">
                    CATEGORY 2 FORM CONTENT
                 <div class="tabController">
                     <div class="tabBack">
                        <input type="button" class="backtab" value="&lt;&lt; Previous" name="submit2" id="submit2" style="background: #EFEFEF;"/>
                     </div>
                 <div class="tabNext">
                        <input type="button" class="nexttab" value="Next &gt;&gt;" name="submit" id="submit" style="background: #EFEFEF; float:right;"/>
                </div>
                </div>
           </form>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:04:32.337

可能是因为您的按钮属于“ `submit`”类型，并且它们会强制刷新页面？尝试将它们更改为`<input type="button" ... />`

另外，去掉`<a>`按钮周围的标签。

使用一个按钮`<input type='button'>`或一个链接`<a href='...'>text</a>`，没有必要让一个链接包裹一个按钮。

# html - 如何将背景图像拉伸到整页以及不同高度的不同页面？

> ID：11144966
> 
> 赞同：0
> 
> 时间：2012-06-21T19:01:08.697
> 
> 标签：html, css, background-image

我有这张图片“忽略图片顶部的红线” ![在此处输入图像描述](../Images/8f1b183a992691ac6033032cb5363b4f.png)

我希望这张图片成为我的 html 页面的背景，它以白色开头，以蓝色结尾，我想要的是：使用 css 根据页面高度在背景中拉伸此图片，例如在某些页面中页面在浏览器中滚动时高度变为 2000px，有些页面高度为 1000px，我需要所有页面使用相同的背景图像并使用 css 拉伸它。

我希望它在所有浏览器上运行，包括 IE 7、8、9

我试图做的是：

```
div.fullscreen
{
    display: block; /*set the div in the top-left corner of the screen*/
    /*set the div in the top-left corner of the screen*/
    position:absolute;
    top:0;
    left:0;
    width: 100%;
    height: 100%;
    background-image: url("../images/landingpage_bg.png");
    background-repeat: repeat-x;
} 
```

但它没有很好地伸展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:40:11.127

唯一的一种方法是裁剪你的图片，用repeat-x将它放在背景底部，并在body\html上使用border-top，或者你将用于你的图片的任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:06:16.127

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    background-repeat: repeat-x;
} 
```

希望这可以帮助

# jakarta-ee - mockito：监视 iBatis queryForObject 并修改参数映射

> ID：11144970
> 
> 赞同：1
> 
> 时间：2012-06-21T19:01:33.320
> 
> 标签：jakarta-ee, ibatis, mockito

我正在使用 iBatis 2.2 并想模拟这个对 queryForObject 的调用

```
this.queryForObject("stored_proc_name", paramMap); 
```

paramMap 在方法内部构建并保存输入参数，并且还将在 proc 调用后保存**errorCode**和**errorMessage**（向 proc 输出参数）。我想在调用该行时将这两个值设置到 paramMap 中。
我在我的 dao 对象上使用“间谍”并在调用上述行时拦截。我尝试执行以下操作，但它不起作用，因为我实际上并没有在 java 代码中捕获结果对象，而是依赖于修改后的 paramMap..

```
doReturn(paramMap).when(daoSpy).queryForObject(eq("stored_proc_name"), anyMap()); 
```

有人知道在调用 queryForObject 调用时是否可以修改该 paramMap？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:22:47.687

当然。您应该使用一个`Answer`对象，该对象的方法将所需的值添加到传入的映射中。它可能看起来像这样。

```
doAnswer(new Answer<Map<String,Object>>(){
   @Override
   public Map<String,Object> answer(InvocationOnMock invocation){
      Map<String,Object> params = (Map<String,Object>) invocation.getArguments()[0];
      params.put("errorCode", 55);
      params.put("errorMessage", "Your message here");
      return params;
   }}).when(daoSpy).queryForObject(
      eq("stored_proc_name"), anyMapOf(String.class, Object.class)); 
```

如需更多信息，请[访问 http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#answer_stubs](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#answer_stubs)

# android - 如何获取特定更新（如 Android 2.1 update1）的模拟器/AVD？

> ID：11144972
> 
> 赞同：1
> 
> 时间：2012-06-21T19:01:35.550
> 
> 标签：android

我需要重现我认为运行 Android 2.1-update1 的设备上的错误。模拟器选项适用于 2.1，但我没有看到更新 1 的选项？能够测试所有设备场景很重要，因此我需要知道如何为特定更新创建 AVD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:27:39.017

您无法让模拟器完全匹配设备，您只能针对 Google 的“香草”Android 版本进行测试。

除非您可以从设备制造商或内核（您应该能够找到或请求）和 Android 框架（获得这将更具挑战性）的源代码获取图像，否则您可以重新编译并生成正确的图像，那么你就不走运了。

INHO，模拟器确实是帮助您开发应用程序的好工具，但在测试方面它并不能替代真实设备。

# javascript - 加载内容最佳实践

> ID：11144979
> 
> 赞同：2
> 
> 时间：2012-06-21T19:02:05.803
> 
> 标签：javascript, jquery

我对 JavaScript 有点陌生，有些事情一直困扰着我。假设我有一些这样的代码：

```
$('button').on('click', function() {
    var id = $(this).attr("id") // id being a file name sans extension
    $('.content').load(id + '.php');
}); 
```

一切正常，但我脑后的某些东西告诉我这是不好的做法。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:03:23.203

没关系，但您可以使用**[this.id保存一些操作](http://jsfiddle.net/roXon/XEZvL/)**

```
$('button').on('click', function() {   
    $('.content').load( this.id +'.php');
}); 
```

我喜欢这篇文章：[https ://stackoverflow.com/tags/jquery/info](https://stackoverflow.com/tags/jquery/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:05:52.130

您不应该为此目的使用 ID 属性。相反，您应该使用自定义属性。例如：

```
<button data-url="mypage">Click me</button> 
```

然后获取该属性而不是 ID。

# java - 使用 ASM 检测可能的同步死锁

> ID：11144980
> 
> 赞同：2
> 
> 时间：2012-06-21T19:02:10.887
> 
> 标签：java, deadlock, bytecode

考虑以下代码片段

```
synchronized (A.class) {
  foo();
  synchronized (B.class) {
    bar();
  }
} 
```

另一个代码是交换 A 和 B。这可能会导致死锁，我正在尝试使用 ASM 检测这一点（特别是，我只检测 A、B 是否是我知道不应同步的类，例如异常）。目前，我有一个使用 SimpleVerifier 的分析器。使用它，我可以获取堆栈顶部的 BasicValue 并获取其类型，但在代码示例中，内部名称将是 java/lang/Class，它不会告诉我它是哪个类。我似乎找不到一种简单的方法来查找该类代表哪个类。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:32:30.543

您将不得不使用 ASM 的[SourceInterpreter](http://asm.ow2.org/asm33/javadoc/user/org/objectweb/asm/tree/analysis/SourceInterpreter.html)来追踪值的来源，然后评估自己的值是什么。

PS：顺便说一句，在 Class 上同步是一个坏主意......

# iphone - 使用不同的数据源复制 UITableView

> ID：11144981
> 
> 赞同：1
> 
> 时间：2012-06-21T19:02:16.837
> 
> 标签：iphone, objective-c, ios, uitableview

我`UITableView`在 ViewController 中有一个自定义`UITableClass`实现。该表显示用户可以播放的不同歌曲。该表由从服务器提取数据的方法填充。这个方法在`ViewDidLoad`.

用户还可以将歌曲标记为“最喜欢的”。我希望用户能够在新的“UITableView”中查看他们所有“最喜欢的”曲目。该表应该完全相同，只是具有不同的数据源（仅来自服务器的收藏曲目）。

我应该如何实现这个？我应该创建另一种方法，将新数据加载到只有“收藏”曲目的表中吗？是否应该使用相同的类初始化一个新`UITableView`的并以某种方式设置不同的数据源或新的 ViewController？如果是这样，怎么做？

包含`UITableViews`. 带有所有轨道的原始 ViewController 将有一个按钮，该按钮可以更改数据源或初始化新的数据源`UITableView`（取决于它的实现方式）。'favorite' ViewController 将有一个后退按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:50:18.887

我将创建一个分段控件，该控件具有“收藏夹|全部”选项，当它被切换时，被`BOOL`调用`favoritesOnly`或类似的东西被切换`YES`到`NO`，反之亦然。我的歌曲将保存在`NSArray`of `NSDictionary`s中`songsArray`，我将使用它作为我的`DataSource`方法：

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(favoritesOnly)
    {
        NSInteger count = 0;
        for(int n=0; n<[songsArray count]; n++)
            if([[[songsArray objectAtIndex:n] objectForKey:@"Favorite"] isEqualToString:@"YES"])
                count++;
        return count;
    } 
    else 
    {
        return [songsArray count];
    }
} 
```

然后对于单元格：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *theCell = [tableView dequeueReusableCellWithIdentifier:@"Proto Cell"];
    if(favoritesOnly)
    {
        NSInteger count = -1;
        for(int n=0; n<[songsArray count]; n++)
        {
            if([[[songsArray objectAtIndex:n] objectForKey:@"Favorite"] isEqualToString:@"YES"])
            {
                count++;
                if(count==[indexPath row])
                {
                     //Configure the Cell using [songsArray objectAtIndex:n]
                     return theCell;
                }
            }
        }
        //If you got here there was an error;  Error cell?
        return theCell;
    }
    else
    {
        //Configure cell using [songsArray objectAtIndex:[indexPath row]]
        return theCell;
    }
} 
```

这样，您使用的是相同的数据集和相同的`UITableView`，您只是使用您的控件来正确委派如何`DataSource`在`UITableView`

现在，如果您使用 CoreData 和 and `NSFetchedResultsController`，这一切都容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:05:23.687

您如何存储来自服务器的数据？如果您使用 CoreData（或我可以推荐的 MagicalRecord），那么拥有具有不同参数的获取结果控制器将是您需要的唯一更改.....

啊，MagicalRecord的链接：[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:09:29.690

当您将歌曲标记为收藏时，将一个标志作为收藏发送到 Web 服务，然后在收藏视图控制器中调用另一个 Web 服务并使用相同的自定义类创建新的表视图并查看来自服务器的新源.. . 如果您存储在 sq-lite 中或使用核心数据，请额外添加一列作为收藏夹，并在收藏夹视图控制器中调用它并使用不同的数据源加载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T19:30:23.607

您总是可以只更新中央播放列表的路线`UITableView`，在这种情况下，您只需交换您的数据`dataSource`（在这种情况下，也许`NSMutableArray *playlist`？）然后调用`[UITableView reloadData]`. 在这个方案中，您避免了拥有多个视图的开销和传递数据的麻烦。

如果您计划为您喜爱的歌曲列表创建附加功能，`UIViewController`则可能需要一个辅助的、自定义的。从这个意义上说，如果您决定拥有其他歌曲列表，则可以重复使用它。如果您打算让他们做任何其他您不希望主界面与列表混乱的事情，例如编辑标题、歌曲顺序等，这将是一个很好的解决方案。

如果这两个视图或多或少相同，您可以设置一个 new `UIViewController`，通过属性传递新数据或将其加载到您的 init 中，然后将其推送到视图堆栈中。只要您的应用程序是基于导航的，一旦您将辅助 UIViewController 推送到堆栈上，后退按钮就会自行出现。这不是您需要自己添加的功能。这样做的好处包括代码可重用性，这是作为 UI 设计师和工程师的一项很好的技能。

如果您只想要一个只读视图，您还可以查看`UIPopoverController`一旦点击离开就会关闭的数据。此解决方案至少不可靠，如果您希望用户做的不仅仅是点击一个条目，或者您希望您的数据集变大，则不应使用此解决方案。

在规划您的 UI 和流程时，请确保您考虑到将来可能采取的方向。正如另一个答案中提到的，您存储数据的方式以及您打算如何调用服务器（按钮点击？在设定的时间后？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T19:38:08.027

我会有一个刷新方法，以及一个在“显示全部”和“显示收藏夹”之间切换的按钮。

基本上，如果单击按钮，则切换到相反的对象组，并相应地更新按钮上的文本。在我的示例中，该表将始终加载一个名为“tableDataArray”的数组，您将从它的长度中获取行数等。

像...

```
-(IBAction)refresh {

if ([faveButton.text isEqualToString:@"Show All"]){

     tableDataArray = favoriteArray; 
     [faveButton setText:@"Show Favorites"];
    }
else {
    tableDataArray = allSongsArray;
    [faveButton setText:@"Show All"];
    }

 [tableView reloadData];

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T22:30:53.673

最简单的方法是拥有同一个视图控制器的两个实例。每个实例都有自己的数据源，一个包含所有歌曲，另一个包含收藏夹。

# javascript - JS 脚本无法按预期工作

> ID：11144984
> 
> 赞同：-1
> 
> 时间：2012-06-21T19:02:24.063
> 
> 标签：javascript, html, css

我的问题是网站[http://www.partssystem.ru/](http://www.partssystem.ru/)上的 js 脚本。当更改右列中的分辨率时，此脚本应将授权后的第三个块向左移动，但不会发生这种情况。地址脚本[http://www.partssystem.ru/js/template.js](http://www.partssystem.ru/js/template.js) 对不起我的英语不好。看下图 ![在此处输入图像描述](../Images/9e6174e67e559a4541e69360ce0c4a07.png)

![在此处输入图像描述](../Images/bda9ba9ecbb0a3a8160f577b3b27f6d7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:47:17.977

将以下代码从移到结束标记的`<head>`正上方`</body>`

```
<script type="text/javascript">
   var c = document.id('right_column').getElement('#float_block');
   if (window.getSize().x < 1260 /*|| (c && t > p)*/){
      document.id('float_block').inject(document.id('float_block_default'));
   }
   else{
      if (!c)
         document.id('float_block').inject(document.id('right_column'));
   }
</script> 
```

# .net - 如何发出同步 RIA 请求

> ID：11144985
> 
> 赞同：1
> 
> 时间：2012-06-21T19:02:29.857
> 
> 标签：.net, asynchronous, wcf-ria-services, ria

我有一个现有的 RIA 服务，我想在其中包含一个非常简单的调用来查找某个自定义对象允许的最大字段。该值不会经常更改，如果有的话，我想在需要时只调用一次，然后将其保留在客户端上。但是，当我需要知道值时，我需要以同步的方式知道它，因为我将立即使用它。

我尝试了以下方法，但`.Value`始终只是 0，因为在运行此代码块时服务实际上并没有发出请求，而是稍后的某个时间。

```
private static readonly Lazy<int> _fieldCount =
    new Lazy<int>(() =>
        {
            const int TotalWaitMilliseconds = 2000;
            const int PollIntervalMilliseconds = 500;

            // Create the  context for the RIA service and get the field count from the server.
            var svc = new TemplateContext();
            var qry = svc.GetFieldCount();

            // Wait for the query to complete. Note: With RIA, it won't.
            int fieldCount = qry.Value;
            if (!qry.IsComplete)
            {
                for (int i = 0; i < TotalWaitMilliseconds / PollIntervalMilliseconds; i++)
                {
                    System.Threading.Thread.Sleep(PollIntervalMilliseconds);
                    if (qry.IsComplete) break;
                }
            }

            // Unfortunately this assignment is absolutely worthless as there is no way I've discovered to really invoke the RIA service within this method.
            // It will only send the service request after the value has been returned, and thus *after* we actually need it.
            fieldCount = qry.Value;

            return fieldCount;
        }); 
```

有*没有*办法使用 RIA 服务进行同步的按需加载服务调用？或者我是否必须：1）在客户端代码中包含常量，并在/如果它发生变化时推出更新；或 2) 托管一个完全独立的服务，我可以以同步方式调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:23:00.190

不幸的是，您不能使 WCF RIA 同步工作。您可以做的是将值放入托管 Silverlight 的 HTML`InitParams`中的`<object>`标记中。阅读更多： http: [//msdn.microsoft.com/en-us/library/cc189004 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc189004(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T17:21:32.083

我意识到这里以前的答案可能在几年前是正确的，但正如我刚刚发现的那样，现在并不完全正确。查看 await 运算符[http://msdn.microsoft.com/en-us/library/hh156528.aspx](http://msdn.microsoft.com/en-us/library/hh156528.aspx)

我认为这正是您正在寻找的。您可以从异步方法中调用它（必须在方法开头使用 async 修饰符，例如：private async void dostuff()）。尽管父方法仍然是异步的，但它会等待对任务的调用。

假设您从域数据服务中执行此操作。下面是一个示例： 注意：您的 DDS 必须返回 IEnumerable 类型。在从 DDS 调用数据之前，定义一个私有任务方法来检索相关数据，如下所示：

```
private Task<IEnumerable<fieldCounts>> GetCountssAsync()
    {
        fieldCountsEnumerable_DS _context = new fieldCountsEnumerable_DS ();
        return _context.LoadAsync(_context.GetCountsQuery());
    } 
```

然后，您可以从现有的异步 ria 服务方法或任何真正使用 await 的客户端方法中调用该任务：

```
IEnumerable<fieldCounts> fieldcnts = await GetCountssAsync();
enter code here 
```

只要知道，无论您使用什么方法调用它，该方法都必须像文档中所说的那样是异步的。它必须将控制权交还给调用者。

# c++ - Visual Studio 2012 与 Visual Studio 2005 中的小程序慢得多

> ID：11144989
> 
> 赞同：2
> 
> 时间：2012-06-21T19:02:35.967
> 
> 标签：c++, performance, visual-c++, visual-studio-2005, visual-studio-2012

我们正在使用 Visual Studio 2005。我们正在考虑在 Visual Studio 2012 发布后升级到它。我在 Visual Studio 2012 RC 中尝试了这个小程序，并惊讶地发现它的运行速度比在 Visual Studio 2005 中慢 2 倍以上。在 VS2012 中，我使用了默认的发布构建设置。对我来说，VS2005 大约需要 20ms，VS2012 大约需要 50ms。为什么会慢很多？

```
#include <windows.h>
#include <deque>

using namespace std;

deque<int> d;

int main(int argc, char* argv[])
{
    const int COUNT = 5000000;

    timeBeginPeriod(1);    

    for (int i = 0; i < COUNT; ++i)
    {
        d.push_back(i);
    }

    double sum = 0;

    DWORD start = timeGetTime();

    for (int i = 0; i < COUNT; ++i)
    {
        sum += d[i];
    }

    printf("time=%dms\n", timeGetTime() - start);

    printf("sum=%f\n", sum);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:09:26.103

所以我们把这个问题转发到了微软论坛。 [http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/72234b06-7622-445e-b359-88f572b4de52](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/72234b06-7622-445e-b359-88f572b4de52)

简短的回答是，与 VS2005 相比，VS2012RC 中 std::deque::operator[] 的实现速度要慢一些。其他常见的 stl 容器测试为相同或更快。在 VS2012 生产时重新测试以查看 operator[] 性能是否得到解决将会很有趣。

ps
嗨
拉斐尔卡尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:16:34.783

我的怀疑是您遇到了线程安全代码，并且 2012 默认为多线程代码配置您的库，这意味着您的双端队列访问中内置了一堆锁定和解锁操作。

尝试比较两个版本的编译器和链接器选项，看看它们有何不同。

（我自己会尝试这个，但我没有带有相关软件的 Windows 系统。对不起。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:09:13.567

尝试分别计时这两个循环。我敢打赌，问题在于新编译器中的 stl 容器实现速度较慢。

错误等待-我的意思是尝试计时不使用 STL 的东西。

# sql-server-2008 - Sql Server 意外的笛卡尔积

> ID：11144995
> 
> 赞同：2
> 
> 时间：2012-06-21T19:03:00.873
> 
> 标签：sql-server-2008

这是 SQL Server 2008。我有这两个表和一个连接：

```
DECLARE @EmployeeCrossDay TABLE
(
    EmployeeId UNIQUEIDENTIFIER, 
    WorkDate DATE, OtherStuff...
)

DECLARE @ET TABLE
(
    EmployeeId      UNIQUEIDENTIFIER,
    WorkDate        DATE, DifferentOtherStuff...
)

SELECT *
FROM @EmployeeCrossDay ecd
LEFT JOIN @ET et ON et.EmployeeId = ecd.EmployeeId
    AND et.WorkDate = ecd.WorkDate 
```

第一个表有 5,680 行（一个范围内每个日期的每个员工一个），第二个有 397 行（一个或多个员工实际工作的每一天）。（因此，EmployeeId/WorkDate 是第一个表中的唯一组合，但不是第二个表中的唯一组合。）我的查询结果是正确的（每个员工的列表，其中包含他工作天数的一行或多行，每天一行他没有工作），但这大约需要 3 秒，我的个人资料显示了一个笛卡尔积（2,254,960 行）。有没有办法重组这个查询来防止完全交叉连接？

*** EDITED *** 按照建议添加主键后，Set Showplan_Text On 给了我这个：

```
 |--Compute Scalar(DEFINE:([Expr1007]=isnull(@ET.[StartTime] as [et].[StartTime],[Expr1010]), [Expr1008]=isnull(@ET.[EndTime] as [et].[EndTime],[Expr1010])))
       |--Nested Loops(Left Outer Join, OUTER REFERENCES:([et].[ServiceCallId]))
            |--Compute Scalar(DEFINE:([Expr1006]=isnull(@ET.[TypeId] as [et].[TypeId],(8)), [Expr1009]=isnull(@ET.[Interrupt] as [et].[Interrupt],($0.0000))))
            |    |--Nested Loops(Left Outer Join, WHERE:(@ET.[EmployeeId] as [et].[EmployeeId]=@EmployeeCrossDay.[EmployeeId] as [ecd].[EmployeeId] AND @ET.[WorkDate] as [et].[WorkDate]=@EmployeeCrossDay.[WorkDate] as [ecd].[WorkDate]))
            |         |--Compute Scalar(DEFINE:([Expr1010]=CONVERT_IMPLICIT(datetime,@EmployeeCrossDay.[WorkDate] as [ecd].[WorkDate],0)))
            |         |    |--Sort(ORDER BY:([ecd].[Number] ASC, [ecd].[WorkDate] ASC))
            |         |         |--Clustered Index Scan(OBJECT:(@EmployeeCrossDay AS [ecd]))
            |         |--Clustered Index Scan(OBJECT:(@ET AS [et]))
            |--Clustered Index Seek(OBJECT:([Snapper].[dbo].[ServiceCalls].[PK_Jobs] AS [sc]), SEEK:([sc].[ServiceCallId]=@ET.[ServiceCallId] as [et].[ServiceCallId]) ORDERED FORWARD) 
```

我所说的“沿途显示笛卡尔积”的意思来自于设置统计配置文件。它显示的内容太多，无法在此处粘贴，但对于计划中的倒数第二项（聚集索引扫描），它在 Rows 下显示 2,254,960（我的逗号），在 Executes 下显示 5680。我是否误读了说我有笛卡尔积？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:54:03.923

我得到了三个很好的答案，但它们都是作为评论出现的，所以我在这里发布了“答案”。

Aaron 建议我为每个表变量添加一个主键。我添加了

```
EmployeeTimeId  UNIQUEIDENTIFIER PRIMARY KEY 
```

@ET 和

```
PRIMARY KEY (EmployeeId, WorkDate) 
```

到@EmployeeCrossDay，因为在这两种情况下，EmployeeId 都不是唯一的。

即使 EmpmloyeeTimeId 没有参与连接，仅此一项就可以将我的查询从 3 秒以上减少到 1 秒以下。但是，我的统计资料显示，执行计划中的一个步骤运行了 5680 次并达到了超过 220 万行（5,680 * 397)。尽管响应时间是可以接受的，但我对此感到好奇。

然后 Martin 建议我的 @ET 密钥需要以 EmployeeId 为首。所以我把钥匙换成了

```
PRIMARY KEY( EmployeeId, EmployeeTimeId ) 
```

此时，执行计划显示以前的交叉连接减少到仅达到 397 行（而不是超过 200 万行），即使它仍在为每个 @ET 行 (5680) 执行该过程，它现在正在执行一个聚集索引寻找而不是全表扫描。

一路上，戈登建议添加

```
OPTION( HASH JOIN, MERGE JOIN ) 
```

我删除了所有以前应用的索引，并且结果计划中的任何步骤都执行了一次以上。

所有三个建议都在一秒钟内返回了相同的数据，所以我给每一个都打了分（现在，谢谢）。

# php - 在应用应用程序时发布到用户墙（facebook php sdk）

> ID：11144996
> 
> 赞同：0
> 
> 时间：2012-06-21T19:03:03.657
> 
> 标签：php, facebook, sdk

我正在使用基本的 facebook php sdk 通过 facebook 将用户登录到我的页面。facebook.php、base_facebook.php 和：

```
$facebook = new Facebook(array(
  'appId'  => '',
  'secret' => '',
));

$user = $facebook->getUser();

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if (!$user) {
header("Location: /");
} else {
$loginUrl = $facebook->getLogoutUrl(); 
```

我想让我的用户在登录时向他们的墙上发布（或跳过）一些东西。就像这样：http: [//developers.facebook.com/attachment/web_dialog.png](http://developers.facebook.com/attachment/web_dialog.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:12:24.680

要发布到用户的墙上，您需要执行以下操作：

```
if (isset($_POST['status'])){
try {
 $post = stripslashes($_POST['status']);
    $statusUpdate = $facebook->api('/<fb_user_id>/feed?access_token='.$session['access_token'], 'post', array('message'=> strip_tags($post), 'cb' => ''));
} catch (FacebookApiException $e) {
         echo "<pre>";
         echo $e;
         echo "</p>";
}
} 
```

您可以设置发布到该脚本的表单的样式以匹配 png 文件中的表单。
希望这就是您正在寻找的并可以帮助您。

# asp.net-mvc - 访问 ClientRowTemplate 中的模型数据（Telerik MVC 网格控件）

> ID：11144997
> 
> 赞同：2
> 
> 时间：2012-06-21T19:03:11.253
> 
> 标签：asp.net-mvc, razor, telerik, telerik-grid, telerik-mvc

我正在使用 Telerik MVC 网格控件...

我知道`<#= SomeData #>`当您希望将数据标记为字符串时可以使用该语法，`ClientRowTemplate`但如果您想对 中的某些数据执行服务器端逻辑怎么办`ClientRowTemplate`？你怎么能做到这一点？

我的模型中有一个名为 的布尔值，`CanDelete`我想检查它，如果是`true`，则显示一个 DeleteButton。我目前的代码如下所示：

```
.ClientRowTemplate(grid => "<div><#= SomeField #> " + grid.DeleteButton(null, GridButtonType.Image) + "</div>") 
```

如果我想每次都显示 DeleteButotn 但我想先检查模型中的另一个字段以确定是否显示它，这很好用。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:48:38.287

我不知道这是否是最好的方法，但您可以将条件逻辑放入模板中。

```
.ClientRowTemplate(grid => "<# if(CanDelete) { #><div><#= SomeField #> " + grid.DeleteButton(null, GridButtonType.Image) + "</div><# } #>") 
```

您在条件中输入的内容是有限的。我已经能够通过 bool 和 int 比较成功地做到这一点，但不能通过字符串比较。