# StackOverflow 问答 10026000-10026999

# wcf - 非 Http WCF 应用程序中的 Windsor IOC - 初始化 IOC 内核时出错

> ID：10026002
> 
> 赞同：5
> 
> 时间：2012-04-05T09:24:59.713
> 
> 标签：wcf, inversion-of-control, castle-windsor, ioc-container, was

我在尝试在 WCF 应用程序中初始化 IOC 容器时遇到问题。该应用程序使用 WAS 不基于 HTTP。

当我启动应用程序时，我收到此错误消息...

`Kernel was null, did you forgot to call DefaultServiceHostFactory.RegisterContainer`

我已经看到这个解决方案的其他答案，说要执行以下操作......

*   将工厂定义添加到 ServiceHost 定义，例如

`Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, Castle.Facilities.WcfIntegration"`

*   使用名为 AppInitialize() 的静态方法在 App_Code 文件夹中创建一个类。然后应该自动调用此方法，您可以使用它来注册您的容器。

我已经这样做了，但是我的 AppInitialize 方法没有被调用，我仍然收到上面的错误。

谢谢。

# c# - Linq 编码风格：inline if

> ID：10026010
> 
> 赞同：2
> 
> 时间：2012-04-05T09:25:27.083
> 
> 标签：c#, sql, linq

我有一个关于编写 linq 查询的常见做法的问题。事实上，我和我的同事发生了争执。

如果它是真的，我们有一个布尔变量 - 需要额外的检查。如果它是假的，就不应该进行这样的检查。

在 linq 中有两种实现方式：

```
bool onlyForReturningCustomers;    
.....    
return context.Products.Where(product => product.StartTime >= fromDate 
                                && product.StartTime < toDate 
                                && (onlyForReturningCustomers ? product.IsReturningClient : true)); 
```

第二个：

```
bool onlyForReturningCustomers;
.....            
var q = context.Products.Where(product => product.StartTime >= fromDate && product.StartTime < toDate);

if (onlyForReturningCustomers) {
  q = q.Where(product => product.IsReturningClient);
}
return q; 
```

第一个`case`在 sql 中呈现语句，当`onlyForReturningCustomers=false`语句 like`1=1`出现但这段代码更容易阅读。

第二个不是那么容易阅读，但它在 sql 中呈现清晰的语句，没有任何垃圾。

你会用哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:36:10.143

如果您将来为回头客或其他类型的客户添加业务规则，则第二个语句更易于阅读，也更易于维护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:29:26.377

我可能会去

```
bool onlyForReturningCustomers;
.....            
// Make a positively-named variable
bool includeAllCustomers = !onlyForReturningCustomers;
var q = context.Products.Where(product => product.StartTime >= fromDate 
                                       && product.StartTime < toDate
                                       && (includeAllCustomers 
                                           || product.IsReturningClient));

return q; 
```

这与您的第一种方式基本相同，但没有一个分支只是说的条件表达式的奇怪之处`true`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:33:27.417

我会使用第一个，因为看起来第二个选项实际上是数据的两次往返。

我还将复制 LINQ 语句发出的 SQL，将其粘贴到您最喜欢的 SQL 工具*（例如 SQL Server Management Studio）*`SET STATISTICS IO ON`中，在语句上方添加`SELECT`并检查执行查询所需的逻辑读取（越低越好）。

# c# - 在线更新日志文件并执行一些操作

> ID：10026012
> 
> 赞同：-1
> 
> 时间：2012-04-05T09:25:29.340
> 
> 标签：c#

假设我们在 Web 服务器中有一个可用的日志文件（最好是 txt 文件）。我们怎样才能把它放到网上并像每分钟一样不断更新它。此外，我们如何创建一个脚本，它会在其中每分钟获取日志文件，分析其内容并执行一些任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:31:19.273

将其发布到 Web 服务器文件夹中就足够了。

我的意思是，如果您有权访问此文件，则可以编写此文件并将其发布到 ftp 连接或 Web 服务器本身。

如果您告诉我您喜欢哪种方式，我很乐意提供更多详细信息:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:21:43.303

这里最好的方法是创建/编写 bash 文件、cron 作业或脚本。内容将遵循以下逻辑：每分钟将文件复制到公共 Web 文件夹。

供客户端分析日志文件。一种方法是创建一个具有以下逻辑的 cron 作业：获取新的日志文件，然后执行分析（例如，如果它发现单词“stopped”，那么将采取一些操作，例如重新启动进程/应用程序）和一些动作。每分钟重复一次

# java - 使用 tomcat 6.0 的 Apache solr 配置

> ID：10026014
> 
> 赞同：7
> 
> 时间：2012-04-05T09:25:31.673
> 
> 标签：java, apache, solr

你能帮我使用 Tomcat 配置 Apache Solr 以及如何使用 Solr 在 MS SQL 数据库中建立索引吗？配置 Tomcat 以在 Tomcat 中运行 Apache Solr 的步骤是什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T11:19:51.230

这是会有所帮助的分步程序。

**第 1 部分：使用 TOMCAT 设置 SOLR**

第 1 步：下载 Solr。它只是一个 zip 文件。

第 2 步：从您的 SOLR_HOME_DIR/dist/apache-solr-1.3.0.war 复制到您的 tomcat webapps 目录：$CATALINA_HOME/webapps/solr.war – 注意 war 文件名的更改。这很重要。

第 3 步：在您选择的位置创建 solr 主目录。这是该 solr 安装的配置所在的位置。最简单的方法是将 SOLR_HOME_DIR/examples/solr 目录复制到您希望 solr 主容器所在的任何位置。说把它放在 C:\solr 中。

第四步：希望你已经设置了你的环境变量，如果没有，请设置 JAVA_HOME、JRE_HOME、CATALINA_OPTS、CATALINA_HOME。请注意，CATALINA_HOME 是指您的 Tomcat 目录，而 CATALINA_OPTS 是指您想要提供给 Solr 的堆内存量。

第五步：启动tomcat。请注意，这只需要允许 tomcat 解压缩您的 war 文件。如果您在 $CATALINA_HOME/webapps 下查看，现在应该有一个 solr 目录。

第6步：停止tomcat

第 7 步：进入该 solr 目录并编辑 WEB-INF/web.xml。向下滚动，直到看到如下所示的条目：

```
<!-- People who want to hardcode their "Solr Home" directly into the
     WAR File can set the JNDI property here...
 -->
<!--
  <env-entry>
     <env-entry-name>solr/home</env-entry-name>
     <env-entry-value>/Path/To/My/solr/Home/solr/</env-entry-value>
     <env-entry-type>java.lang.String</env-entry-type>
  </env-entry>
--> 
```

设置您的 Solr 主页（例如：C:\solr）并取消注释 env 条目。

第 8 步：再次启动 Tomcat，事情应该会很顺利。[您应该能够通过尝试 url http://localhost:8080/solr/admin/](http://localhost:8080/solr/admin/)来验证 solr 是否正在运行。

**第 2 部分：使用数据导入处理程序使用 MSSQL 服务器设置 SOLR**

第 1 步：下载 Microsoft SQL Server JDBC 驱动程序 3.0。只需提取内容。在您的 solr 主目录下创建一个文件夹（例如：C:\solr\lib）。将文件 sqljdbc4.jar 从上面下载的存档中复制到其中。

第 2 步：因此，在您的 Solr 主目录下，所需的基本目录是 conf 和 lib。第一个，即您可能在第 1 部分的第 3 步中获得的 conf 和 lib 是您在第 2 部分的第 1 步中创建的目录。

步骤 3\. 进入 conf 目录。请在您的编辑器中打开 3 个文件：data-config.xml、schema.xml 和 solrconfig.xml。

步骤 4\. 首先编辑 data-config.xml。放置您的 SQL 查询、数据库名称、服务器名称等。例如：

```
•   <dataConfig>
•   <dataSource type="JdbcDataSource" driver="com.microsoft.sqlserver.jdbc.SQLServerDriver" url="jdbc:sqlserver://X.Y.Z.U:1433;databaseName=myDB" user="test" password="tester" /> 
•   <document>
•   <entity name="Text" query="select DocumentId, Data from Text">
•   <field column="DocumentId" name="DocumentId" /> 
•   <field column="Data" name="Data" /> 
•   </entity>
•   </document>
•   </dataConfig> 
```

第 5 步：告诉 Solr 我们的 data-config.xml 文件。这可以通过将请求处理程序添加到 solrconfig.xml 文件来完成，该文件是 solr 配置文件。将以下请求处理程序添加到 solrconfig.xml：

```
•   <requestHandler name="/dataimport"   class="org.apache.solr.handler.dataimport.DataImportHandler">
•   <lst name="defaults">
•   <str name="config">C:\solr\conf\data-config.xml</str> 
•   </lst>
•   </requestHandler> 
```

第 6 步：配置 schema.xml - 在此文件中，您可以执行多项操作，例如设置字段的数据类型、设置搜索的唯一/主键等。

第 7 步：启动 Tomcat

第 8 步：现在访问[http://localhost:8080/solr/admin/dataimport.jsp?handler=/dataimport](http://localhost:8080/solr/admin/dataimport.jsp?handler=/dataimport)并开始您的完整导入。

**一些方便的注意事项：**

```
 •   There are a number of reasons a data import could fail, most likely due to problem with
 the configuration of data-config.xml. To see for sure what's going on you'll have to look in
 C:\tomcat6\logs\catalina.*.

    •   If you happen to find that your import is failing due to system running out of memory,
 however, there's an easy, SQL Server specific fix. Add responseBuffering=adaptive and
 selectMethod=cursor to the url attribute of the dataSource node in data-config.xml. That stops the
 JDBC driver from trying to load the entire result set into memory before reads can occur.

    •   Note that by default the index gets created in C:\Tomcat6\bin\solr\data\index. To change this path
 just edit solrconfig.xml & change <dataDir>${solr.data.dir:./solr/data}</dataDir>.

    •   In new Solr versions, I think 3.0 and above you have to place the 2 data import handler
 jars in your solr lib directory (i.e. for example apache-solr-dataimporthandler-3.3.0.jar & apache-
solr-dataimporthandler-extras-3.3.0.jar). Search for them in your Solr zip you downloaded. In older
 Solr versions this is not required because they are bundled with solr.war. Since we have placed the
 data import handlers in the lib directory so we need to specify their paths in solrconfig.xml. Add
 this line to solrconfig.xml: (Example: <lib dir="C:/solr/lib/" regex="apache-solr-dataimporthandler-
\d.*\.jar" />) 
```

# android - 如何在android中的自定义列表视图中获取字符串数组中的edittextchanged值

> ID：10026020
> 
> 赞同：1
> 
> 时间：2012-04-05T09:26:06.880
> 
> 标签：android, android-layout

我可以从数据库中获取项目名称并将它们附加到编辑文本中。如何在编辑文本中存储更改的值？我希望它们存储在字符串数组中。

```
 public class EditMainMenulistview extends BaseAdapter {
protected static Context Context = null;
int i;
public String editnewmainmenu, menuname,edittext;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname, itemcode;
public String[] itemnames, itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public EditMainMenulistview(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes = new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode = image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i] = itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    final HashMap<String, String> map=new HashMap<String, String>();
    View vi = convertView;

    vi = inflater.inflate(R.layout.editmainmenulist, null);

    EditText text = (EditText) vi.findViewById(R.id.editmaimenu);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);

    image.setImageBitmap(bmps[position]);
    text.append(itemnames[position]);
    String edittext=text.toString();
    text.addTextChangedListener(new TextWatcher() {            
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        public void afterTextChanged(Editable s) {
            if(text.length() > 0) {
                String newName = text.getText().toString();
            } else if(text.length() == 0) {

            }
        }
      });            
    //Toast.makeText(Context, edittext, Toast.LENGTH_LONG).show();
    return vi;
} 
```

}

我从 android mobile 上的 MySql 数据库中获取所有项目名称，并将它们附加到 editext。管理员可以更改项目名称（多个），并且在更改时，它将替换以前的项目名称。我想更新它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:41:06.937

你必须做一些像 dis

```
myEditText.addTextChangedListener(new TextWatcher() {            
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }
        @Override
        public void afterTextChanged(Editable s) {
            if(myEditText.length() > 0) {
                String newName = myEditText.getText().toString();
            } else if(myEditText.length() == 0) {

            }
        }
      }); 
```

在此事件之后更新您的数据库...

# ios - 如何在 iOS 中通过 ChartBoost 显示“更多游戏”页面？

> ID：10026021
> 
> 赞同：18
> 
> 时间：2012-04-05T09:26:09.577
> 
> 标签：ios, ads, chartboost

我正在尝试将 ChartBoost 集成到我的应用中，并且单个广告显示正常。

这是初始设置：

```
ChartBoost *cb = [ChartBoost sharedChartBoost];
cb.delegate = self;
cb.appId = CHARBOOST_APP_ID;
cb.appSignature = CHARBOOST_APP_SIGNATURE;

[cb showInterstitial]; 
```

但是当我尝试使用[ChartBoost 教程](http://chartboost.com/support/sdk)显示“更多应用程序”页面时，我没有得到响应。

```
-(IBAction) switchToMoreGames: (id) sender{
    ChartBoost* cb = [ChartBoost sharedChartBoost];
    cb.delegate = self;
    [cb cacheMoreApps];
    [cb showMoreApps];
} 
```

我将非常感谢我能得到的任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-23T13:36:43.560

由于有很多要求我回答我自己的问题而不是更新它，所以我创建了这个答案。

要添加“更多应用程序”页面，您必须转到“编辑您的应用程序”，然后单击“更多应用程序页面”选项卡并在 iPhone 的输入字段中输入您的广告系列名称，该字段显示在右侧。

# iphone - 在横向和方向之间切换时的 iPhone 间隙问题

> ID：10026023
> 
> 赞同：0
> 
> 时间：2012-04-05T09:26:12.370
> 
> 标签：iphone, cordova

```
@media screen and (max-device-width: 480px) {

body {margin: 0;}

#container {
width:100%;
min-width:320px;
max-width:480px;
}} 
```

我正在使用上面的代码将 iPhone 定位为纵向和横向。当我从横向刷新 safari 时，我将容器的大小调整为 320 像素，在右侧和侧面留出空间。为了让它恢复正常，我需要从横向回到纵向，然后再次刷新。任何想法为什么会发生这种情况？

谢谢

# .net - 如何在 VS 2010 中观看大型词典<> 的私人成员

> ID：10026024
> 
> 赞同：0
> 
> 时间：2012-04-05T09:26:12.573
> 
> 标签：.net, visual-studio-2010

我有一个巨大的 Dictionary (> 1M items) 实例，我想观察它的私有成员（容量等）以进行调试。当我想看字典时，Visual Studio 显示键值对的内容，这当然是一个巨大的列表。它不允许我看到我想看到的私人成员，因为它认为它已经在字典上显示了太多信息。

你知道是否有办法关闭默认行为并使 VS2010 像任何其他对象一样显示字典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:59:26.607

简单的解决方案是在观察窗口中输入感兴趣的字段。所以而不是`myDictionary`放入`myDictionary.freeList`监视窗口。

您还可以通过编写可视化工具来自定义格式：http: [//msdn.microsoft.com/en-us/library/e2zc529c.aspx](http://msdn.microsoft.com/en-us/library/e2zc529c.aspx)

# java - Windows XP SP3 MySQL自动备份错误

> ID：10026026
> 
> 赞同：0
> 
> 时间：2012-04-05T09:26:17.927
> 
> 标签：java, mysql, windows-xp, backup

在尝试使用 Java 进行自动 MYSQL 备份时，我不断收到以下错误，并且整个早上都在尝试解决问题。系统为 WindowsXP SP3，运行 Apache Tomcat 6 和 Java 1.6.25

我不断收到此错误：

```
ERROR com.busytech.barba.exception.BarbaException – java.io.IOException: Cannot run program “C:\Program”: CreateProcess error=2, The system cannot find the file specified
com.busytech.barba.exception.BarbaException: Cannot run program “C:\Program”: CreateProcess error=2, The system cannot find the file specified
at com.busytech.barba.persistence.BackUpAndRestoreDatabaseManager.getTableBackup(BackUpAndRestoreDatabaseManager.java:52)
at com.busytech.barba.servlet.checkcash.CashSummaryServlet.processRequest(CashSummaryServlet.java:95)
at com.busytech.barba.servlet.checkcash.CashSummaryServlet.doPost(CashSummaryServlet.java:495)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1665)
at java.lang.Thread.run(Unknown Source)
java.io.IOException: Cannot run program “C:\Program”: CreateProcess error=2, The system cannot find the file specified
at java.lang.ProcessBuilder.start(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at com.busytech.barba.persistence.BackUpAndRestoreDatabaseManager.getTableBackup(BackUpAndRestoreDatabaseManager.java:30)
at com.busytech.barba.servlet.checkcash.CashSummaryServlet.processRequest(CashSummaryServlet.java:95)
at com.busytech.barba.servlet.checkcash.CashSummaryServlet.doPost(CashSummaryServlet.java:495)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1665)
at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
at java.lang.ProcessImpl.create(Native Method)
at java.lang.ProcessImpl.(Unknown Source)
at java.lang.ProcessImpl.start(Unknown Source)
… 21 more
347156 [http-8080-4] ERROR com.busytech.barba.exception.BarbaException – java.io.IOException: Cannot run program “C:\Program”: CreateProcess error=2, The system cannot find the file specified
com.busytech.barba.exception.BarbaException: Cannot run program “C:\Program”: CreateProcess error=2, The system cannot find the file specified
at com.busytech.barba.persistence.BackUpAndRestoreDatabaseManager.getTableBackup(BackUpAndRestoreDatabaseManager.java:52)
at com.busytech.barba.servlet.checkcash.CashSummaryServlet.processRequest(CashSummaryServlet.java:95)
at com.busytech.barba.servlet.checkcash.CashSummaryServlet.doPost(CashSummaryServlet.java:495)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:864)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1665)
at java.lang.Thread.run(Unknown Source) 
```

这是一个补充：这就是我所做的尝试{

```
Process run = null;
        if (System.getProperty("os.name").toLowerCase().contains("window")) {
            run = Runtime.getRuntime().exec(SystemInformation.getWindowsMySQLDump() + " --host=" + host + " --port=" + port
                    + " --user=" + user + " --password=" + password
                    + " --compact --complete-insert --extended-insert "
                    + "--skip-comments --skip-triggers --skip-lock-tables --single-transaction " + database + " " + table);

        } else {
            run = Runtime.getRuntime().exec("mysqldump --host=" + host + " --port=" + port
                    + " --user=" + user + " --password=" + password
                    + " --compact --complete-insert --extended-insert "
                    + "--skip-comments --skip-triggers --skip-lock-tables --single-transaction " + database + " " + table);
        }
        InputStream in = run.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        int count;
        char[] cbuf = new char[BUFFER];

        while ((count = br.read(cbuf, 0, BUFFER)) != -1) {
            temp.append(cbuf, 0, count);
        }
        br.close();
        in.close();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:34:41.960

问题是您的应用程序（在您的情况下可能是 MySQL）的安装路径。

C:\Program Files\MySQL\bin\mysql.exe

“程序文件”中的空白会导致问题，您没有在其上加上引号。

“C:\Program Files\MySQL\bin\mysql.exe”

您可以使用[Apache Exec](http://commons.apache.org/exec/)从 Java 启动进程。这可以处理从 Java 应用程序启动进程时可能出错的所有常见问题

如果您可以提供更多信息，您将如何尝试启动该过程。

这是我推荐的（使用 Apache Commons Exec 的实现）。

```
CommandLine cmdLine = CommandLine.parse("C:\\Program Files\\MySQL\\bin\\mysqldump");
cmdLine.addArgument("--user=");
// add further args here
Executor executor = new DefaultExecutor();
OutputStream stdOut = new ByteArrayOutputStream();
    PumpStreamHandler psh = new PumpStreamHandler(stdOut);
    executor.setStreamHandler(psh);

    try {
        int exitCode = executor.execute(cmdLine);
        String output = stdOut.toString();

        BufferedReader lineReader = new BufferedReader(new StringReader(output));

        String line;
        while ((line = lineReader.readLine()) != null) {
            log.debug("Reading line #{} - '{}'", lineCount, line);
        }

    } catch (IOException e) {
        // handle the exception
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:32:50.257

这是我使用的解决方案，它在 windows 和 linux 上的工作方式类似于上述使用 apache commons exec 的建议：

```
 String cmdline = "mysqldump";
        DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();
        CommandLine commandLine = CommandLine.parse(cmdline);
        commandLine.addArgument("--host=" + dbhost);
        commandLine.addArgument("--port=" + dbport);
        commandLine.addArgument("--user=" + dbuser);
        commandLine.addArgument("--password=" + dbpass);
        commandLine.addArgument(database);

        Set keys = table.keySet();
        for (Iterator i = keys.iterator(); i.hasNext();) {
            String key = (String) i.next();
            String value = (String) table.get(key);
            commandLine.addArgument(value);
        }
        commandLine.addArgument("-r");
        //outputFile might be a file on the server that can be downloaded
        //used apache file upload to download the files from the server
        commandLine.addArgument(outputFile);
        Executor executor = new DefaultExecutor();
        executor.execute(commandLine, resultHandler);
        resultHandler.waitFor(); 
```

并将文件恢复到服务器，上传文件，这里是从mysqldumpfile恢复的代码，如果在windows上的环境变量上只设置了mysql路径但在linux上它可以正常工作

```
 String cmdline = "mysql";
        DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();
        CommandLine commandLine = CommandLine.parse(cmdline);
        commandLine.addArgument("--user=" + dbuser);
        commandLine.addArgument("--password=" + dbpass);
        commandLine.addArgument("--force");
        commandLine.addArgument("-v");
        commandLine.addArgument("-e");
        commandLine.addArgument("source");
        commandLine.addArgument(backUpFile);
        commandLine.addArgument(database);
        Executor executor = new DefaultExecutor();
        executor.execute(commandLine, resultHandler);
        resultHandler.waitFor(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:30:52.453

不确定这是 MySQL 或 Backup 问题，但来自错误：

> 无法运行程序“C:\Program”</p>

看起来您忘记在某处的字符串周围加上引号。

如果您尝试运行

```
c:\program files\myapp\something.exe 
```

那么它可能会在第一个空格处拆分，因此您正在尝试执行`c:\program`-我怀疑这是一个实际的可执行文件。尝试

```
"c:\program files\myapp\something.exe" 
```

# silverlight - Silverlight webapplication 白屏死机

> ID：10026033
> 
> 赞同：1
> 
> 时间：2012-04-05T09:26:54.947
> 
> 标签：silverlight

尝试调试 silverlight 应用程序时出现白屏死机。问题是我不知道是什么原因造成的，也没有从 Visual Studio 或浏览器本身 (IE9) 获得任何类型的信息。断点不会被击中，因为`App()`也`App.xml.cs`不会被触发。

该应用程序在我自己的笔记本电脑上运行良好，但我正在尝试在服务器上对其进行最终调整，一旦完成，该服务器将托管该应用程序。问题出现在此服务器上。

是否有任何方法可以获取有关导致它的原因的信息，或者是否有人遇到过类似问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:03:13.303

在 IE 中点击`F12`并进入网络并开始捕获。如果下载出现问题以及 Silverlight 插件出现问题（检查控制台或脚本标签），您应该会在此处看到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:43:54.337

这可能有多种原因，包括数据库连接、WCF 服务和许多其他因素的问题。可能有助于您获取一些信息的一件事是名为[Fiddler](http://www.fiddler2.com/fiddler2/)的产品。如果您能够在您的开发机器上下载并安装它，那么您可以在尝试访问服务器上的应用程序时运行它。它将为您的应用程序初始化的每个步骤提供消息，包括数据库身份验证、服务身份验证、xap 文件传输等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T13:53:32.890

我的问题与未从 Web 项目的 .aspx 页面加载的 init 参数有关，如果您遇到“白色死屏”问题，请尝试查看此问题。

# javascript - 向我的向导步骤 Jquery 代码添加第三步

> ID：10026034
> 
> 赞同：2
> 
> 时间：2012-04-05T09:27:00.797
> 
> 标签：javascript, jquery

我在我的 MVC3 项目中使用 Wizard-Step，现在是两个步骤，但我想在其中添加第三步。

但是，我仍然想在第二步中提交我的表单。这就是我的向导步骤 Jquery 代码的样子：

```
 $(function () {

        $(".wizard-step:first").fadeIn(); // show first step

        // attach backStep button handler
        // hide on first step
        $("#back-step").hide().click(function () {
            var $step = $(".wizard-step:visible"); // get current step
            if ($step.prev().hasClass("wizard-step")) { // is there any previous step?
                $step.hide().prev().fadeIn(4500);  // show it and hide current step

                // disable backstep button?
                if (!$step.prev().prev().hasClass("wizard-step")) {
                    $("#back-step").hide();
                }
            }
        });

        // attach nextStep button handler       
        $("#next-step").click(function () {

            var $step = $(".wizard-step:visible"); // get current step
            var validator = $("form").validate(); // obtain validator
            var anyError = false;
            $step.find("select").each(function () {
                if (!this.disabled && !validator.element(this)) { // validate every input element inside this step
                    anyError = true;
                }

            });
            $step.find("input").each(function () {
                if (!validator.element(this)) { // validate every input element inside this step
                    anyError = true;
                }

            });

            if (anyError)
                return false; // exit if any error found

            if ($step.next().hasClass("confirm")) { // is it confirmation?
                // show confirmation asynchronously
                $.post("/wizard/confirm", $("form").serialize(), function (r) {
                    // inject response in confirmation step
                    $(".wizard-step.confirm").html(r);
                });

            }

            if ($step.next().hasClass("wizard-step")) { // is there any next step?
                $step.hide().next().fadeIn(4500);  // show it and hide current step
                $("#back-step").show();   // recall to show backStep button
            }

            else { // this is last step, submit form
                 $("form").submit();
                 }

                return false;

            }

        });

    }); 
```

任何解决方案都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:56:37.283

使用索引器变量，然后在第 2 步提交表单并在第 3 步发布结果

例如...我在此处发布我的一些项目代码以供参考...

```
 if (indexer < 2 && $step.next().hasClass("wizard-step")) {
        $step.hide().next().fadeIn();
        indexer++;
        ShowStep();
    }
    else {
        $.post(paths + "/Auction/Post", $('form').serialize(), function (data) {
            alert(data);
        })
        .complete(function () {
        });
    } 
```

# android - vim中的android远程python脚本

> ID：10026036
> 
> 赞同：1
> 
> 时间：2012-04-05T09:27:13.043
> 
> 标签：android, python, vim

我知道您可以使用端口转发“远程”编写 android 脚本，使用以下命令：

```
adb forward tcp:9999 tcp:<android port no>
export AP_PORT=9999 
```

然后在python2.6中：

```
Python 2.6.1 (r261:67515, Jul  7 2009, 23:51:51) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import android
>>> droid = android.Android()
>>> droid.makeToast("this works")
Result(id=0, result=None, error=None) 
```

这很好用，但后来我想用 VIM (macVim) 尝试它。我可以使用的想法是：

```
map <buffer> <S-e> :w<CR>:!/usr/bin/python2.6 % <CR> 
```

在我的 .vimrc 中运行我正在编辑的代码。这适用于在 mac 上测试 python 脚本。但是当我用android尝试它时，如果我尝试运行它（另存为and.py），我会得到以下信息：

```
import android
droid = android.Android()
droid.makeToadt("hihi")

:!/usr/bin/python2.6 and.py
Traceback (most recent call last):
  File "and.py", line 2, in <module>
    droid = android.Android()
  File "/Library/Python/2.6/site-packages/android.py", line 34, in __init__
    self.conn = socket.create_connection(addr)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/socket.py", line 498, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
socket.gaierror: [Errno 8] nodename nor servname provided, or not known 
```

我假设导出 AP_PORT=9999 对 vim 不“可见”，因为问题似乎在于创建`self.conn`. 有任何想法吗？有没有人使用这种方法？

我没有使用模拟器，因为我的电脑太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T11:05:44.907

你需要在vim的环境中设置环境变量。采用：

```
:let $AP_PORT=9999 
```

设置它 - 这将由您生成的 python 子进程继承。

# ajax - 主页加载时的 Magento 登录页面

> ID：10026045
> 
> 赞同：2
> 
> 时间：2012-04-05T09:27:37.700
> 
> 标签：ajax, magento, magento-1.5

我是编程新手，开始研究 Magento。
我需要在主页加载时在 Ajax 弹出框中显示 Magneto 自定义登录页面。

我怎样才能做到这一点？
有谁能详细帮我吗？

# android - Android 布局配置更改

> ID：10026050
> 
> 赞同：0
> 
> 时间：2012-04-05T09:27:58.320
> 
> 标签：android, layout, orientation

我在 Manifest 中创建了 layout 和 layout-land 文件夹

`android:configChanges="keyboardHidden|orientation"`

如果我`android:configChanges`从**清单**中删除，我可以看到布局从纵向变为横向......问题是在尝试返回时之前的屏幕被破坏了。

我假设我可以在我的 Java 中添加一些代码来告诉它何时更改布局。我已经阅读了很多帖子，但很困惑它会在代码中的哪个位置发生。

我正在尝试使用一些预打包的代码，因为我是 Android 新手。下面的链接是菜单屏幕的 Java 代码，特别是我需要更改布局。非常感谢！！

[菜单 Java](http://dl.dropbox.com/u/39276137/menuSimpleAdvanced.txt)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:36:14.077

添加`android:configChanges="keyboardHidden|orientation"`将停止重新创建 Activity 并防止将布局更改为 layout-land/portrait 布局。在这种情况下，您必须从 java 代码手动管理它。如果您`don't`希望在旋转设备/更改方向时`Activity`获得。**您可以做的只是在onConfigurationChanged()**方法中`re-created`更改屏幕方向时更改布局，

 **[**在这里**](https://stackoverflow.com/questions/7749675/how-to-stop-changing-the-orientation-when-a-progress-bar-is-spinning-in-android/7749727#7749727)查看我的答案，怎么做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:39:57.617

我解决这些问题的方法是

在清单文件中，您可以使用 android:configChanges="keyboardHidden|orientation" 如果您不使用这些行，那么活动将被销毁并再次创建。

我们有一个下面的方法

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
    setContentView(R.layout.yourlayoutname);
} 
```

在这里您可以处理方向更改...**

# jquery - jQuery添加CSS类

> ID：10026052
> 
> 赞同：4
> 
> 时间：2012-04-05T09:28:25.113
> 
> 标签：jquery, css

我想在向元素添加新类之前删除一个 css 类。如果我知道元素已经具有哪个确切的类，我可以通过

```
$('#test').removeClass('current_class').addClass('new_class'); 
```

但问题是`#test`并不总是有相同的类。所以我想`#test`在添加之前删除任何附加的css类，然后再添加一个新的。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T09:29:17.753

```
$('#test').removeClass(); 
```

将删除该项目具有的任何类，您可以像现在一样简单地添加新类

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:29:41.930

```
$('#test').attr('class', '').addClass('new_class'); 
```

或者

```
$('#test').removeClass().addClass('new_class'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T09:35:47.293

你有多少个不同的班级？！

您可以对每个班级进行不同的检查

```
var not_allowed = ["class_1", "class_2", "class_3"];

for(i = 0; i < not_allowed.length; i++){
    if($("#test").hasClass(not_allowed[i])) $("#test").removeClass(not_allowed[i])
}

$("#test").addClass("new_class"); 
```

[或者您可以使用不带任何参数的.removeClass()](http://api.jquery.com/removeClass/)一次删除所有类，然后添加新类

```
$("#test").removeClass().addClass("new_class"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T11:28:41.767

首先使用 jQuery 的`removeClass()`函数删除所有类，然后根据需要添加类。

代码是

```
$('your class').removeClass(); 
```

# compiler-errors - 在 Linux Ubuntu 中安装软件 - shotdetect 用于检测视频镜头

> ID：10026054
> 
> 赞同：1
> 
> 时间：2012-04-05T09:28:33.947
> 
> 标签：compiler-errors, ffmpeg, makefile, ubuntu-10.04

我在安装 shotdetect 软件时遇到了很多错误。一些错误是由于依赖关系而得到解决的。它能够配置完美但“make”，即运行make文件会抛出这个错误。错误：ffmpeg/avcodec.h 没有这样的文件或目录 ffmpeg/avformat.h 没有这样的文件或目录

可能是因为 ffmpeg 或 shotdetect 软件版本不同。我尝试重新安装最新的（和旧的 ffmpeg）但无法在我的 /usr/include/ 中找到 ffmpeg 文件夹，这就是为什么没有这样的文件“ffmpeg/avcodec.h”的原因。请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T06:08:14.120

我得到了解决方案..我在 /usr/include/ 中创建了一个文件夹 ffmpeg，并将 /usr/include/libavcodec.. 中的所有文件包含在 /usr/include/ffmpeg/.. 中。最后它正在工作。以下步骤将有助于在 ubuntu 10.x 和 11.x 中安装软件

安装 ShotDetection 软件

1.  安装依赖项

     `sudo apt-cache search gcc sudo aptitude install build-essential sudo apt-get install libxml2-dev libxslt-dev libavcodec-dev libavformat-dev libavformat-dev pacman libgd2-noxpm-dev libjpeg62-dev libtiff4-dev cmake libswscale-dev libjasper-dev` 

`2\. 在 /usr/include/ 中创建一个名为 ffmpeg 的文件夹并复制必要的文件` 

 ``````
cd /usr/include/
sudo mkdir ffmpeg  
sudo cp /usr/include/libavcodec/*  /usr/include/ffmpeg/
sudo cp /usr/include/libavformat/*  /usr/include/ffmpeg/
sudo cp /usr/include/libswscale/*  /usr/include/ffmpeg/ 
```` 

`3.下载并安装shotdetect软件`

 ``````
 cd /var/www/

   wget http://shotdetect.nonutc.fr/releases/latest.tar.gz
   tar xvzf latest.tar.gz
   cd shotdetect-1.0.86
   ./configure
   make
   sudo make install 
````  `4.  检查 /usr/local/bin/shotdetect 可执行文件应该在那里。`````

# forms - 将多个文本框与同一表单中的多个提交按钮绑定

> ID：10026055
> 
> 赞同：0
> 
> 时间：2012-04-05T09:28:50.757
> 
> 标签：forms

我有一个表单，其中有一个带有文本框（TextBox1）和一个提交按钮（Button1）的搜索功能。除了搜索之外，还有另一组文本框（TextBox2）和提交按钮（Button2）。当我在搜索框（TextBox1）中写一些东西并按回车键时，会显示第二个文本框（TextBox2）的验证消息。我不确定如何将各个文本框与提交按钮绑定。请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:35:45.357

根据您拥有多少控制权，最简单的方法是为每个 texbox/button 组合设置单独的表单。

```
 <form action="dosomething.php">
   <input type="text" name="foo" />
   <input type="submit" />
</form>
<form action="dosomethingelse.php">
  <input type="text" name="bar" />
  <input type="submit" />
</form> 
```

如果您不能或不想这样做，则需要查看处理`onkeydown`文本框上的事件以防止自动提交。类似的东西`<input type="Text" name="foo" onkeydown="doSubmit(this); return false;" />`。请注意`return false;`，它会阻止默认操作发生。

# php - Zend Framework 11.1：Form_Customer 未在

> ID：10026056
> 
> 赞同：1
> 
> 时间：2012-04-05T09:28:55.483
> 
> 标签：php, zend-framework, namespaces, zend-form

首先，我知道在stackoverflow上有一些关于表单问题的非常相似的问题，但没有一个能真正帮助我，所以我自己试一试。在过去的 10 个小时里，我一直坚持这一点，我现在真的很绝望。

所以，让我们从我的目录结构开始：

```
 gpos/
  ---- application/
       --- forms/
       ------- CustomerForm.php
       --- modules/
           --- default/
               --- controllers/
                   --- CustomerController.php
               --- views/
       --- Bootstrap.php
  ---- public/
  ---- library/
       --- Doctrine/
       --- GPos/
           --- Doctrine/
               --- ActiveEntity.php
           --- Models/
               --- Customer.php 
```

如您所见，我使用 Zend 的标准 forms/ 文件夹来存储我的表单，并且我还使用 Doctrine 作为数据库管理器。

* * *

所以我一直在尝试找到我`CustomerForm.php`的 from`CustomerController.php`但只是得到一个未找到的错误。

这是我得到的错误：
`Fatal error: Class 'Form_CustomerForm' not found in C:\wamp\www\GPos\gpos\application\modules\default\controllers\CustomerController.php on line 9`

`CustomerController.php:`

```
class CustomerController extends Zend_Controller_Action {

    public function init() {
        /* Initialize action controller here */
    }

    public function indexAction() {
        $form = new Form_CustomerForm(); //line 9
        $form->setAction('/customer/index');
        $form->setMethod('post');
        $this->view->form = $form;
    } 
```

和`CustomerForm.php:`

```
class Form_CustomerForm extends Zend_Form {
    public function init() { 
```

最后`views/scripts/customer/submit.phtml:`

```
<h2>Customer</h2>
<p>To create blabla</p>

<?php echo $this->form; ?> 
```

* * *

我一直在拼命地尝试将 Form 命名空间添加到自动加载器，但我今天了解到它已经在感谢 Zend 为我们做这件事。所以......我做错了什么？我发现大量帖子说如何添加资源以及如何管理自定义表单，我觉得我正在按照要求做，但无论如何它都行不通。

我担心它来自其他地方，因为我一直在尝试添加不同的名称空间，例如 GPos_Doctrine 为我的 ActiveEntity.php 文件添加不同的名称空间`library/GPos/Doctrine/`：

```
protected function _initAutoload()
{
    $autoloader = new Zend_Application_Module_Autoloader(array(
            'namespace' => 'Application',
            'basePath' => APPLICATION_PATH,
    ));
    $autoloader->addResourceType('gpos', '/../../library/GPos', 'GPos');
    $autoloader->addResourceType('doctrine', '/../../library/GPos/Doctrine', 'GPos_Doctrine');

    return $autoloader;
} 
```

这也不起作用。我不太确定“路径”参数（第二个参数），但我在教程中看到您添加的资源类型的路径必须相对于自动加载器的基本路径，所以我想出了这些路径。

我可以使我的 GPos_Doctrine_ActiveEntity() 工作的唯一方法是添加`autoloadernamespaces[] = "GPos_"`到 application.ini。虽然添加`autoloadernamespaces[] = "Form_"`不起作用......我真的不明白我正在添加的资源类型有什么问题。

请注意，我没有使用 zf 工具来构建该项目。如果我找不到让一切正常工作的方法，我正在考虑这样做。

我还尝试将我的表单类重命​​名为“Application_Form_CustomerForm”，但也没有任何好处。我觉得我现在已经尽力了。我只是绝望:(

哦，顺便说一句，我最初发现的唯一解决方法是将表单/文件夹放在我的库中，这很有效。不明白为什么，但我不想使用那个黑客。看，我正在做这个项目作为我的 IT 学士学位工作毕业，我真的不应该为了让它们工作而进行黑客攻击：P。

谢谢大家关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:41:40.707

要么将引导程序添加到默认模块（这反过来会自动设置资源类型）

```
class Default_Bootstrap extends Zend_Application_Module_Bootstrap
{
    protected function _initAutoload() {
        $moduleLoader = new Zend_Application_Module_Autoloader(array(
                    'namespace' => 'Default_',
                    'basePath' => APPLICATION_PATH . '/modules/default'));
        return $moduleLoader;
    }
} 
```

或将其添加到您的全局引导程序（使用您的两个自定义资源类型扩展它）：

```
public function _initDefaultResourceTypes() {
    $al = new Zend_Application_Module_Autoloader(array(
        'namespace' => '',
        'basePath'  => APPLICATION_PATH.'/modules/default/',
        'resourceTypes' => array(
            'dbtable' => array(
                'namespace' => 'Model_DbTable',
                'path'      => 'models/DbTable',
            ),
            'mappers' => array(
                'namespace' => 'Model_Mapper',
                'path'      => 'models/mappers',
            ),
            'form'    => array(
                'namespace' => 'Form',
                'path'      => 'forms',
            ),
            'model'   => array(
                'namespace' => 'Model',
                'path'      => 'models',
            ),
            'plugin'  => array(
                'namespace' => 'Plugin',
                'path'      => 'plugins',
            ),
            'service' => array(
                'namespace' => 'Service',
                'path'      => 'services',
            ),
            'viewhelper' => array(
                'namespace' => 'View_Helper',
                'path'      => 'views/helpers',
            ),
            'viewfilter' => array(
                'namespace' => 'View_Filter',
                'path'      => 'views/filters',
            )
          )
    ));
    $al->setDefaultResourceType('model');
} 
```

看看这个 ZF 1 Skeleton 以获得更多信息： [https ://github.com/eddiejaoude/Zend-Framework--Doctrine-ORM--PHPUnit--Ant--Jenkins-CI--TDD-](https://github.com/eddiejaoude/Zend-Framework--Doctrine-ORM--PHPUnit--Ant--Jenkins-CI--TDD-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:49:39.373

我不使用模块，但我在这里做的是非常基本的：

在 /public/index.php 中，我将“/forms”添加到包含路径：（重要的部分当然是带有“forms”的行

```
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    realpath(APPLICATION_PATH . '/forms'),
    get_include_path(),
))); 
```

然后我的表格被命名为：

```
class Default_Form_Login extends Zend_Form 
```

然后我会这样做：

```
$form = new Default_Form_Login(); 
```

# sql-server - SQL Server 取得进展

> ID：10026059
> 
> 赞同：1
> 
> 时间：2012-04-05T09:29:11.620
> 
> 标签：sql-server, progress-bar

有没有办法从 SQL Server 返回查询工作进度？

例如，我有返回 n 行的存储过程。我需要知道完成它浪费了多少时间。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:21:02.683

问题：

“有没有办法从 SQL Server 返回查询工作进度？例如，我有一个返回 n 行的存储过程。我需要知道它丢失了多少时间才能完成。”

答案：不幸的是，返回单个查询时答案是否定的。在 transact-SQL 或存储过程的控制流中，您可以使用 @@rowcount 变量或捕获受影响或返回的行的用户定义变量返回处理或返回的行数。如果 transact-sql 正在使用游标（出于性能原因不推荐），那么您可以在捕获要处理或返回的总行数的 COUNT 后返回行数，然后在完成每个循环后打印一个计数器变量.

# jquery - 使用 event.target 获取元素

> ID：10026060
> 
> 赞同：11
> 
> 时间：2012-04-05T09:29:13.310
> 
> 标签：jquery

我基本上是在尝试从 event.target 获取目标元素，如果不是平等的过程。我怎样才能让下面的东西工作？

```
$(document).ready(function(){
   $(document).click(function(event) {

       if(event.target!='#contents') {  //If clicked element is not div #contents show alert .. //How can i achieve this ?
         alert("..");
       }

    });
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T09:29:57.613

利用

```
 //If clicked element id is not contents 
   if(event.target.id !== 'contents') {  
     alert("..");
   } 
```

编辑 - 如果结构是您的评论使用的结构：

```
 if($(event.target).closest('div#contents').length === 0){
    alert('there is no div with id === "contents" in the ancestors of the clicked li');
   } 
```

编辑 2 - 我的代码的解释。如果你有这个标记

```
<div id="contents"><ul><li>Item1</li><li>Item2</li></ul></div> 
```

这段代码意味着

```
//event.target is a DOM element, so wrap it into a jQuery object
$(event.target)
        .closest('div#contents')//find a div element going up the dom tree. 
                                //This method returns a jQuery collection that it's 
                                //empty if the div is not found
        .length //the collection has a length 
                //property that is equal to the number of found elements 
```

# .net - unity懒解决

> ID：10026061
> 
> 赞同：3
> 
> 时间：2012-04-05T09:29:15.447
> 
> 标签：.net, dependency-injection, unity-container, ioc-container, lazy-evaluation

我有`MVC` `webApi`适用于`Unity`. 我必须将接口解析`ITest`为单例类（`DelegateHandler`）。但是接口 ITest 具有每个`httprequest`生命周期管理器，这很重要。所以我无法解决`Application_Start`事件上的 ITest，因为现在没有 HttpRequest 但 DelegateHandler 只会在 httprequest 生命周期中使用 ITest。

那么是否可以向 DelegateHandler 发送惰性解析，或者可能有人有其他有趣的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:49:54.400

服务的生命周期应始终等于或短于其依赖项的生命周期，因此您通常会注册`ITest`为 Per Http Request 或 Transient，但如果这不可能，请将`DelegateHandler`具有每个 Http Request 生命周期的依赖项（我假设）包装在代理：

```
// Proxy
public class DelegateHandlerProxy : IDelegateHandler
{
    public Container Container { get; set; }

    // IDelegateHandler implementation
    void IDelegateHandler.Handle()
    {
        // Forward to the real thing by resolving it on each call.
        this.Container.Resolve<RealDelegateHandler>().Handle();
    }
}

// Registration
container.Register<IDelegateHandler>(new InjectionFactory(
    c => new DelegateHandlerProxy { Container = c })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:41:26.040

另一种选择是执行以下操作：

```
public class Foo
{
    Func<IEnumerable<ITest>> _resolutionFunc;
    ITest _test;
    public Foo(Func<IEnumerable<ITest>> resolutionFunc)
    {
        _resolutionFunc=resolutionFunc;
    }

private void ResolveFuncToInstance()
{
    _test=_resolutionFunc().First();
}
} 
```

我们正在做的是要求 Unity 为我们提供一个委托，该委托将解析容器中的所有 ITest 实例。由于这是一个 Func，我们可以在想要从 Unity 进行实际解析时调用它。

这与 Steven 所做的事情大致相同，但使用内置的 Unity 功能来完成我们正在寻找的事情。

# c# - ASP.Net C#如何在通过登录进行身份验证后使网站上的页面可访问

> ID：10026066
> 
> 赞同：2
> 
> 时间：2012-04-05T09:29:24.697
> 
> 标签：c#, asp.net-mvc-3, login, restrict

我一直在玩一些关于使用 C# 制作数据库网站的 MVC 教程，并且有一个关于如何使网站的一部分只能在用户使用用户名和密码登录后才能访问的问题。

我有一个登录页面（下面的代码），它接受用户名和密码，然后根据数据库记录对用户进行身份验证。单击“登录”按钮后，返回 URL 会将您带到网站的管理部分（完整路径为：[http://localhost:53559/Data/update](http://localhost:53559/Data/update)）。这一点我很满意。但是，我遇到的问题是，如果您没有登录，“更新”页面仍然可以访问，即如果我在浏览器中输入上面的路径（http://localhost:53559/Data/update）而没有登录首先它会加载没有问题）。

如何限制更新页面，使其仅在用户登录后可用？

（注意：初学者，请少说！）

==================================================== =================================

# 登录的控制器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;
using System.Web.Security;
using DFAccountancy.Models;

namespace DFAccountancy.Controllers
{
public class AdminController : Controller
{

    //
    // GET: /Admin/LogOn

    public ActionResult LogOn()
    {
        return View();
    }

    //
    // POST: /Account/LogOn

    [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.UserName, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Update", "Data");
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    }

    //
    // GET: /Account/LogOff

    public ActionResult LogOff()
    {
        FormsAuthentication.SignOut();

        return RedirectToAction("Index", "Home");
    } 
```

==================================================== =================================

# 这是更新页面的查看代码（这是管理部分，只有在用户登录后才能访问）：

```
@model DFAccountancy.Models.Data

@{
    ViewBag.Title = "Update";
}

<h2>Update</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">        </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"         type="text/javascript"></script>

<script type="text/javascript">
$(function () { $("#cl_button1").click(function () { $("#para1").val(""); }); });
$(function () { $("#cl_button2").click(function () { $("#para2").val(""); }); });
</script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Data</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.para1)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.para1, new { cols = 75, @rows = 5 })
        @Html.ValidationMessageFor(model => model.para1)
    <input id="cl_button1" type="button" value="Clear Paragraph" />
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.para2)
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.para2, new { cols = 75, @rows = 5 })
        @Html.ValidationMessageFor(model => model.para2)
        <input id="cl_button2" type="button" value="Clear Paragraph" />
    </div>

    <p>
        <input type="submit" value="Update" />
        <input type="reset" value="Re-Set to begining" />
    </p>

</fieldset>
}

<div>
@Html.ActionLink("Back to List", "Index")
</div> 
```

==================================================== =================================

# 这是位于更新视图页面后面的控制器代码 (DataController)：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using DFAccountancy.Models;

namespace DFAccountancy.Controllers
{ 
    public class DataController : Controller
    {
    private DataDBContext db = new DataDBContext();

    //
    // GET: /Data/

    public ViewResult Index()
    {
        return View(db.Data.ToList());
    }

    //
    // GET: /Data/Details/5

    public ViewResult Details(string id)
    {
        Data data = db.Data.Find(id);
        return View(data);
    }

    //
    // GET: /Data/Update

    public ActionResult Update()
    {
        var model = db.Data.FirstOrDefault();
        return View(model);
    }

    //
    // POST: /Data/Update

    [HttpPost]
    //[Authorize(Roles = "Administrator")]  //Created Validataion so inaccessible from outside
    [ValidateInput(false)]
    public ActionResult Update(Data data)
    {
        if (ModelState.IsValid)
        {
            data.ID = 1; //EF need to know which row to update in the database.       
            db.Entry(data).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index", "Home");
        }
        return View(data);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:37:25.787

使用`[Authorize]`过滤器。您可以将其应用于控制器或单个操作。

```
[Authorize]
public class DataController : Controller
{... 
```

或者

```
[Authorize]
public ActionResult Update()
{... 
```

作为旁注，您并没有从我所看到的情况下关闭您的数据库连接。您的数据上下文需要`.Dispose()`在完成时调用它。

*编辑*

此外，您的 get 方法似乎没有用授权装饰，这就是任何人都可以在那里导航的原因。只有帖子使用授权过滤器进行了修饰，或者直到被注释掉。`[HttpGet]`用于基本请求，而`[HttpPost]`通常来自表单帖子（有时通过 ajax 完成）。

# javascript - 记住从表中随机选择

> ID：10026069
> 
> 赞同：1
> 
> 时间：2012-04-05T09:29:43.570
> 
> 标签：javascript, arrays, random

我正在使用这种方法从表中随机选择一个单元格：

```
Math.floor(Math.random() * example.length) 
```

它可以正常工作。

但我需要记住我的选择，以便稍后在我的项目中再次选择该单元格。

有什么方法可以做这件事吗？

编辑：我在测试脚本中使用这种方法：

```
lvwPrivilegestable().click(
    atCell(atRow((int)Math.floor(Math.random() * orderTable.getRowCount())), 
    atColumn((int)Math.floor(Math.random() * orderTable.getColumnCount())))); 
```

因此，当我播放测试时，我可以单击表格中的一个单元格。我想稍后单击相同的单元格。

回答：

看来加缪是对的。将结果传递给一个变量，然后再读取它解决了我的问题。我认为它会更复杂一些。

编辑：

现在，有没有一种方法可以每次随机选择一个不同的单元格？因为使用我的方法有时有机会选择相同的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:02:12.367

您可以构建一个可以记住随机数的小型实用程序对象：

```
function replayRandom() {
var results = [];
var replay = false;

return {
  replay: function() {
    replay = true;
  },
  next: function() {
    if (!replay) {
      val = Math.random();
      results.push(val);
      return val;
    }
    val = results[0];
    results.shift();
    return val;
  }
};
} 
```

例子：

```
r = replayRandom();
r.next();
0.7939797908670404
>>> r.next();
0.6103413074215163
>>> r.replay();
>>> r.next();
0.7939797908670404
>>> r.next();
0.6103413074215163 
```

# wcf - WCF Mobile 合约策略

> ID：10026071
> 
> 赞同：0
> 
> 时间：2012-04-05T09:29:47.800
> 
> 标签：wcf, mobile, soa, datacontract

是否有一种巧妙的方法来构建我的 WCF 服务，以便我可以实现一次服务并让它为不同的调用者返回不同的数据合同？（即移动客户端）

我们已经开发了一组由桌面应用程序使用的服务，现在正在构建应用程序的移动版本。问题是返回的数据传输对象 (DTO) 太大并且包含移动应用程序不必要的成员。随着它在移动网络上运行，我们希望删除这些以提高性能，但是服务的实现将是相同的。

到目前为止我们的想法：

*   将 EmitDefault 设置为 false，然后不为移动呼叫者映射 DTO 上的所有属性（我们正在使用 automapper，因此可以使用多个映射配置来做一些事情）
*   继承的桌面 DTO 类型，使用 KnownType 属性扩展基本移动类型。
*   只是完全构建一个单独的服务，但确保所有逻辑都在一个共享的业务服务层中（它应该已经是）

有谁知道是否有针对此要求的任何指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:01:45.307

就我个人而言，我会将实现分开。正如您所指出的，每组客户端（移动端和桌面端）都有不同的要求。您可以共享服务的合同，只是有不同的实现/服务。这将允许为每个客户端专门化服务，并使其更容易扩展、修改和测试。

# xml - 自定义 Antisamy 策略 xml 以允许更多 html 和 grails 标签

> ID：10026073
> 
> 赞同：1
> 
> 时间：2012-04-05T09:29:56.353
> 
> 标签：xml, grails, policy, antisamy

我在 grails 中使用 sanitizer 插件，它在内部使用 antisamy 策略 xml 将清理规则应用于 ui 输入。我选择的策略 xml 是 antisamy-myspace.xml，它过滤 javascript 标记和代码以及 <html> 和 <body> 和 <head> 标记。

问题是它还拒绝了一些 grails 标签，特别是以下 2：

```
1) <g:formatDate date="${frmDateStr}" format="EEE, MMMM dd, yyyy"/>

2) <g:each in="${resourcelist}" var="resourceid"> some content here..</g:each> 
```

这两个标签没有通过验证，我需要通过验证器让它们通过或允许，我还想允许 <html> 和 <body> 和 <head> 标签。

如何修改 antisamy 策略文件以允许这些标签？\ 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T18:48:11.720

查看 antisamy-anythinggoes sanitizer 策略文件，然后只需跟踪已知标签的所有位。通过快速浏览，您似乎需要标签规则中的条目，并确保指定属性。您还必须定义 reg 表达式来捕获这些值。更多关于 Antisamy 的信息可以在 [这里] 找到。[1](https://www.owasp.org/index.php/Category:OWASP_AntiSamy_Project#tab=How_do_I_get_started_3F)

# javascript - 添加了一个css背景，如何完全删除它

> ID：10026076
> 
> 赞同：1
> 
> 时间：2012-04-05T09:30:00.830
> 
> 标签：javascript, jquery

我正在使用 jquery .css 属性添加背景

```
myobj.css('background', '#AE0000'); 
```

这导致这种样式的 html 被添加到标记中

```
style="background: none repeat scroll 0% 0% rgb(174, 0, 0);" 
```

稍后，我想删除这个背景。我认为将 css 背景设置为白色`myobj.css('background', '#FFFFFF');`会起作用，但不幸的是，这会产生问题，因为 div 有白色背景而不是没有。

```
style="background: none repeat scroll 0% 0% rgb(255, 255, 255);" 
```

jquery 是否有类似的方法来完全删除`background`CSS 的属性？像`style=""`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T09:32:16.960

**简答**

```
myobj.css('backgroundColor', 'transparent'); 
```

**长答案**

我建议为了更好的可维护性，对这样的事情使用 css 类：

```
.active { background:#AE00000 } 
```

然后在你的 javascript

```
myobj.addClass('active'); 
```

关闭

```
myobj.removeClass('active'); 
```

这样做的好处是，您不必担心`css()`每次设计发生更改或需要向该特定元素添加更多标记时更改 css 值（如果使用）。

例如，最后你需要在你的 js 中使用背景、字体大小和颜色：

```
myobj.css({'background':'#aaa', 'font-size':'15px', 'color':'red'}); 
```

然后每次您需要关闭时：

```
myobj.css({'background':'none', 'font-size':defaultSize + 'px', 'color':'black'}); 
```

如果使用 css，它不仅容易出错，而且更难维护：

```
.active { background:#AE00000; font-size:15px; color:red } 
```

然后在你的 javascript

```
myobj.addClass('active'); 
```

关闭

```
myobj.removeClass('active'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T09:31:40.637

采用

```
myobj.css('backgroundColor', 'transparent'); 
```

**[看到它在行动](http://jsfiddle.net/defacer/pkZTa/)**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T09:31:44.743

采用`none`

```
myobj.css('background', 'none'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T09:35:20.080

我会说，这将是一个好方法

```
myobj.css({
  'background': 'none', //remove all the background property
  'backgroundColor': '#FFF' //then only set the background color property
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T09:59:31.667

`css('background', 'none')`将是你最好的选择：[小提琴](http://jsfiddle.net/jzEbS/1/)

# c# - 访问 office 2003 文件

> ID：10026079
> 
> 赞同：0
> 
> 时间：2012-04-05T09:30:23.293
> 
> 标签：c#, c++, .net, extraction, office-2003

我想访问 Office 2003 文件（.doc、.xls 和 .ppt）以提取文本和一些元数据（字数、工作表数、图片、模板等）。我可以使用 Open XML SDK for office 2007 文档来做到这一点。但是，此提取将在无法安装 Microsoft Office 等应用程序的服务器上进行（这就是我无法使用 Office 的 Interop 的原因）。我试过 NPOI，但实际上它只支持 .xls 文件。我发现的其他库不是开源的，我不能在我的工作中使用它......我下载了 NPOI Scratchpad 但代码非常“原始”，我不能在我的工作中使用它。您是否有其他想法可以从 Office 2003 文档中获取文本和元数据？我不是一个非常有经验的程序员，我正在使用 C#（但是，如果在 C++ 中有任何解决此问题的方法，我可以考虑使用它）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:50:48.583

有很多库，例如：

*   ClosedXML (Office 2007)
*   EPPlus (Office 2007)
*   Aspose 单元格（Office 97-2010，我用这个）

我不知道任何支持 Office 2003 格式的免费库。

祝你好运

# sencha-touch-2 - sencha 中的占位符

> ID：10026082
> 
> 赞同：0
> 
> 时间：2012-04-05T09:30:33.933
> 
> 标签：sencha-touch-2

我有一个占位符，仅在用户开始输入时才会消失。当用户点击它时如何让它消失。

```
 {
                    xtype: 'textfield',
                    id: 'road',
                    placeHolder :'Road',
                    label: 'Road'

                } 
```

请帮忙。

# php - 回声加号php

> ID：10026083
> 
> 赞同：1
> 
> 时间：2012-04-05T09:30:34.857
> 
> 标签：php, string, echo

我正在将 php 字符串变量回显到 html 中

```
<span class="title_resource">
  <?php echo  $titulo; ?>
</span> 
```

但是当加号 (+) 出现时，它会变成一个空格。

我已经尝试过使用 urlencode，但后来我得到了类似“Constru%25C3%25A7%25C3%”的东西

我应该使用字符串替换之类的东西吗？

提前致谢

**更新：**

$titulo 使用 $_GET 设置

```
if (isset($_GET['T']))// title
    $titulo = $_GET['T']; 
```

(...)

或许更**清楚**

我想准确发送此文本“Estudo de ax^2 + bx + c”。该页面通过 $_GET 接收。当我打印这个值时，我得到“Estudo de ax^2 bx c”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:34:32.230

我认为你应该使用`urldecode`不`urlencode`...

```
<span class="title_resource">
  <?php echo  urldecode($titulo); ?>
</span> 
```

如果这不起作用...您可以添加完整的脚本吗..您经过的地方，您是否使用POST等..这样我可以更好地帮助您

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:53:13.473

它是使用 GET 编码发送的值的方式，空格转换为`+`并`+`转换为`%2B`.

如果您真的想在表单上发送加号，请用加号替换空格

```
$text= str_replace(" ", "+", $text); 
```

接下来确保您的表单使用正确的`enctype`或者`application/x-www-form-urlencoded``multipart/form-data`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T09:35:40.570

好像您的变量正在通过[urldecode](http://php.net/manual/en/function.urldecode.php)

# java - tomcat5 上的应用程序无法启动

> ID：10026088
> 
> 赞同：1
> 
> 时间：2012-04-05T09:30:52.847
> 
> 标签：java, jax-ws, tomcat5.5

安装在cent OS 上的tomcat5。我的战争文件无法启动。我正在使用 JAX-WS Web 服务。Catlina.out 显示以下日志

我有以下java版本

```
java version "1.6.0_22"
OpenJDK Runtime Environment (IcedTea6 1.10.6) (rhel-1.25.1.10.6.el5_8-i386)
OpenJDK Server VM (build 20.0-b11, mixed mode)

SEVERE: Exception sending context initialized event to listener instance of class 

com.sun.xml.ws.transport.http.servlet.WSServletContextListener
com.sun.xml.ws.transport.http.servlet.WSServletException: WSSERVLET11: failed to parse runtime descriptor: java.lang.IllegalArgumentException: prefix cannot be "null" when creating a QName

    at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:139)
       at org.apache.catalina.core.StandardContext.listenerStart(catalina-5.5.23.jar.so)
       at org.apache.catalina.core.StandardContext.start(catalina-5.5.23.jar.so)
       at org.apache.catalina.manager.ManagerServlet.start(catalina-manager-5.5.23.jar.so)
       at org.apache.catalina.manager.HTMLManagerServlet.start(catalina-manager-5.5.23.jar.so)
       at org.apache.catalina.manager.HTMLManagerServlet.doGet(catalina-manager-5.5.23.jar.so)
       at javax.servlet.http.HttpServlet.service(tomcat5-servlet-2.4-api-5.5.23.jar.so)
       at javax.servlet.http.HttpServlet.service(tomcat5-servlet-2.4-api-5.5.23.jar.so)
       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(catalina-5.5.23.jar.so)
       at org.apache.catalina.core.ApplicationFilterChain.doFilter(catalina-5.5.23.jar.so)
       at org.apache.catalina.core.StandardWrapperValve.invoke(catalina-5.5.23.jar.so)
       at org.apache.catalina.core.StandardContextValve.invoke(catalina-5.5.23.jar.so)
       at org.apache.catalina.authenticator.AuthenticatorBase.invoke(catalina-5.5.23.jar.so)
       at org.apache.catalina.core.StandardHostValve.invoke(catalina-5.5.23.jar.so)
       at org.apache.catalina.valves.ErrorReportValve.invoke(catalina-5.5.23.jar.so)
       at org.apache.catalina.core.StandardEngineValve.invoke(catalina-5.5.23.jar.so)
       at org.apache.catalina.connector.CoyoteAdapter.service(catalina-5.5.23.jar.so)
       at org.apache.coyote.http11.Http11Processor.process(tomcat-http-5.5.23.jar.so)
       at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(tomcat-http-5.5.23.jar.so)
       at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(tomcat-util-5.5.23.jar.so)
       at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(tomcat-util-5.5.23.jar.so)
       at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(tomcat-util-5.5.23.jar.so)
       at java.lang.Thread.run(libgcj.so.7rh)
    Caused by: java.lang.IllegalArgumentException: prefix cannot be "null" when creating a QName
       at javax.xml.namespace.QName.<init>(xml-commons-apis-1.3.02.jar.so)
       at gnu.xml.stream.XMLParser.getAttributeName(libgcj.so.7rh)
       at com.sun.xml.ws.util.xml.XMLStreamReaderFilter.getAttributeName(XMLStreamReaderFilter.java:228)

   at com.sun.xml.ws.streaming.XMLStreamReaderUtil$AttributesImpl.<init>(XMLStreamReaderUtil.java:355)
   at com.sun.xml.ws.streaming.XMLStreamReaderUtil.getAttributes(XMLStreamReaderUtil.java:198)
   at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parseAdapters(DeploymentDescriptorParser.java:204)
   at com.sun.xml.ws.transport.http.DeploymentDescriptorParser.parse(DeploymentDescriptorParser.java:147)
   at com.sun.xml.ws.transport.http.servlet.WSServletContextListener.contextInitialized(WSServletContextListener.java:124)
   ...22 more 
```

请任何人帮助我摆脱这个问题。**web.xml**的内容

 **```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee `http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
         id="WebApp_ID" version="2.5">`

<listener>
    <listener-class>
            com.sun.xml.ws.transport.http.servlet.WSServletContextListener
    </listener-class>
</listener>
<servlet>
    <servlet-name>fileserver</servlet-name>
    <servlet-class>
        com.sun.xml.ws.transport.http.servlet.WSServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>fileserver</servlet-name>
    <url-pattern>/fileserver</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>120</session-timeout>
</session-config>

<display-name>FrostBoxServer</display-name>
<welcome-file-list>
   <welcome-file>index.html</welcome-file>
   <welcome-file>index.htm</welcome-file>
   <welcome-file>index.jsp</welcome-file>
   <welcome-file>default.html</welcome-file>
   <welcome-file>default.htm</welcome-file>
   <welcome-file>default.jsp</welcome-file>
 </welcome-file-list>
</web-app> 
```

和**sun-javax.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints
  xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime"
  version="2.0">
  <endpoint
      name="FileService"
      implementation="org.tml.ws.FileServiceImpl"
      url-pattern="/fileserver"/>
</endpoints> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:37:35.623

据此：[这](http://www.coderanch.com/t/224488/Web-Services/java/Illegal-null-QName-prefix-argument)可能是与缺少库有关的问题。您是否检查过所需的库是否在您的类路径中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:40:39.943

尝试切换到 sun-jdk 而不是 open-jdk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:41:19.347

将版本更改为 tomcat 7 并将 open-jdk 替换为 sun-jdk。问题已解决。谢谢大家。**

# svn - 在 SVN 存储库中包含 doxygen 文档

> ID：10026089
> 
> 赞同：2
> 
> 时间：2012-04-05T09:30:53.413
> 
> 标签：svn, doxygen

在 SVN 存储库中包含并提交我的项目的 Doxygen HTML 文档是一种好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:36:10.913

我倾向于说不**，**因为文档是生成的东西。

虽然在某些情况下这*可能*有用（例如，在发布包含文档的版本时），但生成的内容应远离 VCS。

仅当您在每次提交之前新生成文档时，对文档进行版本控制才有意义（根据我的经验，这通常不会完成）。否则，可能会出现生成的文档与实际代码不匹配的情况。

改为版本`doxyfile.dox`（存储您的生成设置的位置）。如果您分发设置，您可以在安装项目期间即时生成文档。

# jquery-mobile - SplitView如何在拆分前更改最小宽度

> ID：10026090
> 
> 赞同：0
> 
> 时间：2012-04-05T09:30:53.727
> 
> 标签：jquery-mobile, uisplitview

SplitView 与 jQuery Mobile 配合得很好。但显然适应了iPad。
实际上，我正在处理一个 7 英寸的选项卡，我希望拆分视图从大约 300 像素开始显示。
我试图更改“splitview.css”文件中的最小宽度，但它似乎不起作用。
有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:38:53.190

在 splitview.js 中搜索

```
$menu.removeClass('panel-popover')
                        .addClass('ui-panel-left')
                        .css({'width':'25%', 'min-width':'250px', 'display':''}); 
```

你可以在那里改变宽度和最小宽度。希望有帮助。:)

# concurrency - 共享读锁的应用

> ID：10026099
> 
> 赞同：3
> 
> 时间：2012-04-05T09:31:58.603
> 
> 标签：concurrency, locking, abap

读共享锁需要什么？

我可以理解写锁必须是独占的。但是，许多客户端需要同时访问文档并且仍然共享只读权限吗？共享读锁的实际应用也会有很大帮助。

请将问题移至您认为适合加入的任何其他论坛。虽然这是一个纯粹与我正在做的 ABAP 编程和理论相关的问题，但我猜这些应用程序对所有语言都是通用的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:02:24.593

如果您基于多个数据集（例如帖子）进行复杂且耗时的计算，您必须确保在您工作时这些数据集都不会更改 - 否则计算可能会出错。大多数情况下，ACID 原则将确保这一点，但有时，这还不够——例如，如果数据源太大以至于您必须将其分解为并行子任务，或者您必须调用某个执行数据库提交的函数或内部回滚。在这种情况下，事务隔离已经不够用了，您需要在逻辑级别上锁定实体。

# java - 当答案正确和错误时显示消息

> ID：10026100
> 
> 赞同：3
> 
> 时间：2012-04-05T09:32:07.400
> 
> 标签：java, android, button, back-button

我正在开发一个基于测验的应用程序。测验包含 1 个问题和 4 个多项选择答案。

当用户选择 4 个选项中的任何一个时，如果它是正确答案，则应显示“您的答案是正确的”之类的内容，否则应与正确答案一起显示“您的答案错误”。

还有2个按钮（下一个和后退），一个用于下一个问题，另一个用于返回。

有人可以告诉我如何编写返回上一个问题的代码吗？

我做了这样的事情：

```
 private void getShuffledArray() 
    {
        // TODO Auto-generated method stub
        for (int i = 1; i <= SIZE; i++) 
        {
            quizIndexList.add(i);

        }
        Collections.shuffle(quizIndexList);
        Log.d("ERR", "List A shuffling" + quizIndexList);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.button1:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();

            }

            break;
        case R.id.button2:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();
            }
            break;

        case R.id.button3:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();
            }
            break;

        case R.id.button4:
            Log.d("ERR", v.getTag().toString());
            if (v.getTag().toString().equalsIgnoreCase("right")) {
                displayAnswer();
            }
            break;

        case R.id.btn_next:
//          lyt_ans.setVisibility(View.GONE);
//          lyt_quest.setVisibility(View.VISIBLE);
            counter += 1;
            if (counter >= SIZE) {
                Collections.shuffle(quizIndexList);
                counter = 0;
            }
            getInfoFromDB(quizIndexList.get(counter));
            reLoad();
            break;

        case R.id.btn_bck:
             btn_next.setOnClickListener(new OnClickListener() 
               {

                public void onClick(View v) 
                {
                    // TODO Auto-generated method stub

                    finish();
                }
               });

        } 
```

}

任何帮助都是可观的，并在此先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:00:20.030

@Rithesh - 没有得到你的代码，但简单的逻辑如下你需要什么1）问题数组2）答案Arraylist（或者说二维数组）类似`ArrayList<ArrayList<String>>` 3）每个问题的答案索引（它应该与问题索引4匹配）一个带有文本视图（显示问题）的视图，RadioGroup 包含 4 个单选按钮，因此它一次只能选择一个 5）下一个和上一个两个按钮 6）主要内容添加`setOnCheckedChangeListener`到您的单选组，只有当用户选择任何答案然后检查哪个单选按钮被选中时才会触发（对于这个单选按钮的设置标签到它的位置）所以假设问题号是 2 并且单选检查位置是 3 然后只需检查您的答案数组，如果答案匹配，则可以显示 toast，如果不匹配，则从 Answers arraylist 中查找写入答案并在 toast 或警报中显示。7）现在，当您单击下一个按钮时，将文本视图的文本更改为下一个问题，将单选按钮的文本更改为下一组答案，反之亦然，以单击上一个按钮

这是合乎逻辑的，无法为您提供代码

设置选项的代码

```
RadioButton option_rdb1 = (RadioButton) findViewById(R.id.option_rdb1);
setOptions(0);

// if you used ArrayList<ArrayList<String>> optionslist
public void setOptions(int index){
if((index-1) <= optionsList.size()){
    ArrayList<String> temp = optionslist.get(index);
    options_rdb1.setText(temp.get(0).toString();
    options_rdb1.setText(temp.get(0).toString();
    options_rdb1.setText(temp.get(0).toString();
    options_rdb1.setText(temp.get(0).toString();
  }
} 
```

只需在下一个前面调用 setOptions 并带有问题索引。我用作`index-1`arraylist以0开头所以这取决于你如何使用索引。这样您就可以设置第一个选项 同样在您将在下一个按钮上调用的函数中单击使用上面的代码行设置下一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:51:41.077

在按钮**btn_next**的 onclick 中放置一个 int prev

现在在更换柜台之前..

```
prev=counter<--- store the counter value..
counter += 1;
        if (counter >= SIZE) {
            Collections.shuffle(quizIndexList);
            counter = 0;} 
```

并在**btn_bck**的 onclick 中得到这样的 prev 问题..

```
 getInfoFromDB(quizIndexList.get(prev));
    reLoad(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:36:17.647

1.  您只需要洗牌一次（例如在 oncreate 中）并按 next 或 back 您应该增加或减少问题数组的索引

# eclipse - Perl 语法未突出显示

> ID：10026101
> 
> 赞同：3
> 
> 时间：2012-04-05T09:32:07.507
> 
> 标签：eclipse, perl, debugging, eclipse-plugin, epic

我有**Eclipse SDK Version: 3.5.2** with **EPIC 0.5.46** installed on **Ubuntu Linux**。我正在编写一些可以正确运行/调试的 Perl 代码。语法总是突出显示。最近我不得不在我的项目中添加一个 *.pl 文件并对其进行调试。但是，由于某种原因，代码没有被突出显示。这种行为的原因可能是什么？我的猜测是 Eclipse/EPIC 向现有项目添加/导入新文件可能存在一些问题，但我不确定。请考虑 Eclipse/EPIC 配置和项目管理的基本错误，因为我是新手。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T21:55:17.030

似乎我发现了阻止我的 Perl 代码被突出显示的问题。我注意到在我的`.pl`文件的第一行中，有一个**注释**行，其中包含一个奇怪的`?`符号，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/b4c084aa588099ce3e3ba98a62f13c6a.png)

在我删除这个符号的那一刻，所有的代码都被高亮了！因此，似乎文本编码存在一些问题，导致 Eclipse 无法正确突出显示编码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-31T07:08:07.823

您应该右键单击该文件，然后使用“epic perl 编辑器”打开，然后一切都会好起来的！

# security - 如何限制移动应用程序对 HTTP API 的访问？

> ID：10026102
> 
> 赞同：2
> 
> 时间：2012-04-05T09:32:09.800
> 
> 标签：security, api, authorization

我目前正在为在线服务开发 API。我想为移动和 Web 开发人员提供创建他们的应用程序的访问权限。开发人员的应用程序将具有通常的请求数/分钟数限制。

验证应用程序的最佳实践是什么？

对于 Web 应用程序来说，这很容易。我们提供令牌，令牌对域有效，因此即使有人尝试在其他任何地方使用它也会失败。

如何为移动应用程序做到这一点？我们可以提供代币。此类令牌需要与设备上的应用程序一起分发，这意味着有人会嗅探该令牌，他可以编写另一个使用相同令牌的应用程序。这意味着原始用户将不得不撤销旧令牌，创建一个新令牌并发布新版本（他的用户将不得不再次下载）。

你知道有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T02:51:53.073

我不确定您的开发人员是否能够安全地做到这一点，而无需与他们自己的主机进行某种形式的通信以及他们系统上某种形式的用户帐户。正如您所说，如果您在应用程序中包含一个长期存在的令牌，那么无论进行何种混淆，最终都可以通过逆向工程技术发现它。

我可以看到 2 个选项：

### 1\. 短命代币

在此方案中，移动应用程序联系开发人员的系统以接收简短的身份验证令牌。在注册期间和之后定期，开发人员会生成一个公私密钥对并为您提供公钥。

每个身份验证令牌都需要包含某种未加密的“开发人员密钥 ID”和加密的数据位，包括令牌的发行数据和伪随机数据的盐。开发人员的主机将使用公私钥对中的私钥加密数据。这将秘密保存在受控和安全的空间中。加密数据需要包含盐，以防止对开发人员密钥的[已知明文攻击](http://en.wikipedia.org/wiki/Known-plaintext_attack)。

该应用程序将令牌发送给您，您可以通过以下方式确定其合法性：

1.  使用未加密的开发人员密钥 ID 来确定在解密加密字符串时使用哪个密钥。
2.  开发者密钥 ID 是否已被撤销或过期？（由于密钥泄露、开发 API 订阅到期或滥用等）。如果它被撤销，拒绝访问。
3.  令牌中的加密数据是否正确解密？如果不是，拒绝访问。
4.  令牌是否已过期？（基于加密令牌日期）如果是这样，告诉客户端从开发服务器获取新令牌。他们的软件应该在联系您的 API 之前执行此操作，但您必须检查以防万一。我建议允许令牌存活相对较短的时间，因为在应用程序之间复制令牌是一个弱点。
5.  允许访问

您也可以使用对称加密而不是公私钥加密，但是您和开发人员都知道这个秘密。如果只有开发人员知道它会更安全。

### 2.通过开发主机传递API调用

移动应用程序可能会与其开发人员的主机而不是您的主机交谈以调用 API。当开发主机收到其中一个调用时，它只是将调用传递给您的 API 并添加其秘密令牌。

# ruby-on-rails - 集合。存在吗？对我说谎

> ID：10026107
> 
> 赞同：0
> 
> 时间：2012-04-05T09:32:24.583
> 
> 标签：ruby-on-rails, ruby, has-and-belongs-to-many

在我的红宝石模型中，我与模型“搜索”有一个 has_and_belongs_to_many 关系：

```
has_and_belongs_to_many :searches 
```

我只想在它不存在的情况下添加一个新的搜索对象，所以我写道：

```
def append_unless_already_there search
  unless searches.exists?(search)
    searches << search
end 
```

但是，添加 2 次新对象会通过条件，并导致 sql 异常。尝试用 search.id 替换搜索，但没有改变任何东西。我在代码中添加了一些日志记录：

```
def append_unless_already_there search
  puts ""
  puts searches.exists?(search)
  unless searches.exists?(search)
    puts "["
    searches.each do |s|
      puts s.id
    end
    puts "]"
    puts search.id

    searches << search
  end
end 
```

添加 5 个搜索对象，其中最后 2 个相等，添加最后一个对象时会产生以下日志记录：

```
false
[
12
5
8
1
]
1 
```

当我阅读给出的文档和示例时，最后一个存在吗？检查应该返回真。我无法弄清楚我在这里缺少什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:46:59.833

`exists?`不需要`ActiveRecord::Base`对象，它需要一个 ID（或 ID 列表等，请参阅[API 文档](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F)以获取更多信息。

所以要测试你想要做的存在：

```
searches.exists?(search.id) 
```

而不是：

```
searches.exists?(search) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:42:50.627

尝试：

```
(searches << search) unless searches.include?(search) 
```

或者

```
(searches << search) if !searches.include?(search) 
```

**已编辑**

我不确定 100%，但如果存在，它需要 id 或一些值：

```
exists?(id = false) 
```

但在 include 的情况下，它也需要 key 或 object ：

```
include?(key) 
```

有关更多详细信息，请查看[http://api.rubyonrails.org/](http://api.rubyonrails.org/)

# javascript - 如何防止 Google 在 ascx 控件中从 JavaScript 形成 url

> ID：10026108
> 
> 赞同：0
> 
> 时间：2012-04-05T09:32:35.327
> 
> 标签：javascript, asp.net, web-crawler

这就是问题所在：在 .ascx 控件上，有一个简短的 Javascript 块。除其他外，该脚本引用控件中的一种方法，并为网站上的不同页面生成 DoP 元标记。

问题是，Google 爬虫读取页面中的 Javascript 并认为每个 DoP 元标记都是某种 url。这可能是因为标签中有一个正斜杠（？）。最终，谷歌对网站上大量不存在的网址进行了索引，并赋予它们 404 状态。有没有解决的办法？例如，是否可以将 nofollow 标签直接放入 Javascript？

```
<script language="javascript" type="text/javascript">
   <!-- DoP tag -->
   var v = {};
   v["sample"] = '/Product_A_';
</script> 
```

谷歌爬虫似乎从上面的脚本中索引了一个网址“http://www.my web site.com/Product_A_”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:49:24.757

设置站点地图和 robots.txt 怎么样？

[http://en.wikipedia.org/wiki/Sitemaps](http://en.wikipedia.org/wiki/Sitemaps)

这样，搜索引擎只会抓取站点地图中指定的内容并将其编入索引，您可以使用 robots.txt 排除无关内容，特别是如果它们都遵循特定模式。

或者在这些页面上使用元标记“nofollow”，这意味着搜索引擎不会跟随任何额外的链接：

[http://www.robotstxt.org/meta.html](http://www.robotstxt.org/meta.html)

# php - Rails、PHP 和参数

> ID：10026109
> 
> 赞同：1
> 
> 时间：2012-04-05T09:32:36.913
> 
> 标签：php, ruby-on-rails, ruby, parameters

我在 Rails 工作，我需要调用 PHP 脚本。我可以像这样连接到脚本：

```
system('php public/myscript.php') 
```

但我需要用它发送一些参数。我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T09:37:30.837

您可以为 PHP 脚本提供命令行参数：

```
system('php public/myscript.php arg1 arg2') 
```

它们可以从您的 PHP 代码中获得，如下所示：

```
echo $argv[0]; // public/myscript.php
echo $argv[1]; // arg1
echo $argv[2]; // arg2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:35:36.930

您可以只在命令行上指定参数，例如`system('php -f public/myscript.php argument1 argument2 [...]')`它们将在`$argv[]`数组中可用，从`$argv[1]`. [有关更多信息，请参阅此处](http://php.net/manual/en/reserved.variables.argv.php)的文档页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:30:48.733

是的，它的正确使用方法`system('php public/myscript.php arg1 arg2'`）正如 SirDarius 回答的那样。

但在这种情况下，系统命令将返回真或假。

system() 将返回 TrueClass 或 FalseClass 并显示输出，在 console 上试试。

我建议，您可以在任何 URL 上使用 open 方法来调用它，这样您就可以使用它来调用您的 PHP 脚本：

```
require 'open-uri'

open('YOUR PHP SCRIPT PATH WITH PARAMETER') do |response|
  content = response.read
end 
```

# c - C 中的内存分配测试 - 如何为 malloc 和 free 编写 CUnit-Test？

> ID：10026121
> 
> 赞同：2
> 
> 时间：2012-04-05T09:33:14.930
> 
> 标签：c, testing, malloc, free, cunit

几天以来，我一直在为我无法修复的一个应用程序进行测试。所以我决定为我的测试写一个测试......

我想分配内存，观察正在使用的内存的增长情况，然后再次释放内存。我预计分配的内存不再使用，对吧？

我正在使用 Mac OSX (10.6.8) 和 gcc (GCC) 4.2.1

所以我写了这个测试：

```
void testMemoryFreeCheck(){
    puts("- test Memory Free Check  -");
    puts("- ----------------------- -");
    puts("- This test takes a while -");
    puts("");
    struct rusage rus;
    getrusage(RUSAGE_SELF, &rus);

    // Things befor we want to mature. 
    char *holder[10000];
    char *bigHolder;
    int loops =  10000;
    int i;

    // Variables used for tests. 
    long int afterFirstTestKiloByte = 0;
    long int afterSecondTestKiloByte = 0;
    long int afterThirdTestKiloByte = 0;
    long int afterForuthTestKiloByte = 0;

    getrusage(RUSAGE_SELF, &rus);
    long int initialKiloByte = rus.ru_maxrss;
    printf("Initial KB Used: %ld\n", initialKiloByte);

    // a adder to proof that we get it write
    char add = "A";
    getrusage(RUSAGE_SELF, &rus);
    long int afterAddKiloByte = rus.ru_maxrss;
    printf("After a char add KB Used: %ld\n", initialKiloByte);
    getrusage(RUSAGE_SELF, &rus);
    long int growingKiloByte = rus.ru_maxrss;

    // This loop should do nothing.
    for(i=0; i<loops; ++i){
        printf(".");
    }
    puts("");
    getrusage(RUSAGE_SELF, &rus);
    afterFirstTestKiloByte = rus.ru_maxrss;
    printf("First Test should be 0 : %ld\n", (afterFirstTestKiloByte - afterAddKiloByte));
    CU_ASSERT_TRUE( (afterFirstTestKiloByte - afterAddKiloByte) == 0);

    // This loop should free all allocated space.
    for(i=0; i<(loops * 128); ++i){
        char *tmp = malloc(1024 * 1024);
        free(tmp);
    }

    getrusage(RUSAGE_SELF, &rus);
    afterSecondTestKiloByte = rus.ru_maxrss;
    printf("Second Test should be 0 (4096 is ok for some reasons): %ld\n", (afterSecondTestKiloByte - afterAddKiloByte));
    CU_ASSERT_TRUE( (afterSecondTestKiloByte - afterAddKiloByte) <= 4096);

    // This loop should increase the allocated space.
    for(i=0; i<loops; ++i){
        holder[i] = malloc(1024 * 1024);
    }
    getrusage(RUSAGE_SELF, &rus);
    afterThirdTestKiloByte = rus.ru_maxrss;
    printf("Third Test should be grater than 0 : %ld\n", (afterThirdTestKiloByte - afterAddKiloByte));
    CU_ASSERT_TRUE( (afterThirdTestKiloByte - afterAddKiloByte) > 0);

    // now free the memmory and get back to the initial value
    for(i=0; i<loops; ++i){
        free(holder[i]);
    }  
    getrusage(RUSAGE_SELF, &rus);
    afterForuthTestKiloByte = rus.ru_maxrss;
    printf("Forth Test should be reset to 0 : %ld\n", (afterForuthTestKiloByte - afterAddKiloByte));
    CU_ASSERT_TRUE( (afterThirdTestKiloByte - afterAddKiloByte) == 0);

    puts("- ----------------------- -");
} 
```

我的输出是：

```
- test Memory Free Check  -
- ----------------------- -
- This test takes a while -

Initial KB Used: 458752
After a char add KB Used: 458752
[...]
First Test should be 0 : 0
Second Test should be 0 (4096 is ok for some reasons): 4096
Third Test should be grater than 0 : 1601536
Forth Test should be reset to 0 : 1601536
- ----------------------- - 
```

我有两个问题我现在无法解释：1.为什么第二个测试是 4096 而不是 0？2\. 为什么 Forth 测试没有 0？

第四次测试吓坏了我。请看一下，也许您可​​以解释如何测试免费内存调用。我假设内存管理器不会杀死字节，而是重用它，所以内存会感染 rus.ru_maxrss。但是我怎样才能免费测试呢？

Thanx a lot, Peter

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:37:01.727

Memory allocated with `malloc` doesn't get returned to the OS, even when `free`'d. Memory is not returned to the OS until program exit.

`getrusage` returns the amount of memory in use by your program as measured by the OS.

Combine the above information and you have your answer to both questions.

# asp.net - 查看文本框的状态属性 false 则文本框中的数据将发送到服务器

> ID：10026122
> 
> 赞同：1
> 
> 时间：2012-04-05T09:33:25.103
> 
> 标签：asp.net

我有如下小问题：

如果我将文本框的视图状态属性设为 false，那么来自文本框的数据将发送到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:34:48.053

ViewState 是关于服务器如何“记住”控件的值。

将该属性设置为 false 仍会将数据发送到服务器。

# java - 如何从java翻译网页？

> ID：10026126
> 
> 赞同：0
> 
> 时间：2012-04-05T09:33:30.277
> 
> 标签：java, translation

我用Java开发了一个Web应用程序。现在我想在不使用任何外部工具（如谷歌翻译器）的情况下放置翻译工具。

我想知道是否有任何图书馆可用于从英语到印地语、法语、古吉拉特语等的语言翻译？任何替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:38:13.587

对此的典型解决方案是让您的代码在 ResourceBundle 中查找所有要翻译的字符串，然后您可以在其中手动输入所有支持的语言的翻译。

查看 Sun Java 教程的国际化部分 - [http://docs.oracle.com/javase/tutorial/i18n/index.html](http://docs.oracle.com/javase/tutorial/i18n/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T09:37:39.320

我认为您可以使用[Google 翻译 API 的](http://code.google.com/p/google-translate-api-java-client/). 您可以从您的 java 代码中使用 API 中存在的类。

# sql-server - SQL Server 2008 - 发送电子邮件和依赖项的不同方式

> ID：10026130
> 
> 赞同：0
> 
> 时间：2012-04-05T09:33:46.657
> 
> 标签：sql-server, sql-server-2008, tsql, notifications, database-mail

SQL Server 2008 可用于发送电子邮件的所有不同方式（在代码中和从 GUI 中）是什么？对于每种方式，请说明任何依赖关系，例如 Outlook 配置文件或数据库邮件（启用和配置）。

到目前为止，我知道以下几种方式：

*   sp_send_dbmail（代码），需要启用和配置数据库邮件
*   操作员属性 - 取决于 ??? 的通知选项 (GUI)
*   警报 - 响应 - 通知操作员 (GUI)，取决于 ???
*   作业 - 通知 - 作业完成 (GUI)，取决于 ???
*   维护计划 - 通知操作员任务 (GUI)，取决于 ???

是否可以使用 SQL Server 以代码或通过 GUI 发送电子邮件的任何其他方式？我只对简单的方法感兴趣——最好不要复杂。

我之所以问，是因为我对做同一件事的各种不同方法感到困惑，而且在不知道初步步骤是什么的情况下，我对测试它们没有信心！

我将接受填补我知识空白的最佳答案，并提供所有不同（简单）方法的简明而完整的列表。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:13:34.967

所有方法都依赖于[Database Mail](http://msdn.microsoft.com/en-us/library/ms175887.aspx)，它最终使用 sp_send_dbmail 过程，如下所示：

```
EXEC msdb.dbo.sp_send_dbmail    
    @recipients = 'you@email.com',
    @body = 'Body Message',
    @subject = 'Subject' ; 
```

在发送任何电子邮件之前，您需要创建个人资料。[这](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/)是一个帮助的链接

数据库邮件不再依赖 Outlook 或 MAPI，它使用 SMTP 发送邮件

# math - 纹理投影+透视校正，正确计算

> ID：10026133
> 
> 赞同：1
> 
> 时间：2012-04-05T09:33:54.800
> 
> 标签：math, opengl, graphics, glsl, textures

我渲染动画几何。在每一帧中，我想使用前一帧的屏幕空间纹理对几何图形进行纹理映射（像在前一帧中一样投影到几何图形上）。所以结果应该是这样的，如果屏幕空间纹理在一帧前被投影到几何体上，然后通过几何体动画转换到当前帧。

计算每个顶点的正确纹理坐标并不困难。在 GLSL 中，这很简单：

```
void main(void)
{
   vPos = currentMVP  * vec4(position,1);
   gl_Position = vPos;
   vec4 oldPos = previousMVP * vec4(position,1);
   vec2 UV = vec2(((oldPos.x/oldPos.w)+1)*0.5f, ((oldPos.y/oldPos.w)+1)*0.5f);
   ...
} 
```

但是让纹理坐标在几何体上正确插值比我想象的要棘手。通常，投影的纹理坐标应该在屏幕空间中线性插值 - 因此要实现这一点，需要将它们乘以顶点着色器中的 vPos.w，然后再将它们除以片段着色器中的 vPos.w。然而，只有当纹理从相机视图中投影出来时，这才是正确的。在这种情况下，我需要别的东西。我需要一个插值，该插值用于前一帧中的前向透视正确插值和当前帧中的后向透视正确插值。

该图说明了三种不同的情况： ![在此处输入图像描述](../Images/e66ee825095e8d7664259e83fad70266.png)

-案例A很简单。在这里，我可以保留纹理坐标的正常透视校正插值（由光栅化器默认执行）。

- 但是，在案例 B 中，我需要纹理坐标的线性插值以获得正确的结果（通过在 vertexShader 中与 vPos.w 相乘并在片段着色器中除以 vPos.w。或者在较新的 GLSL 版本中使用“noperspective”插值限定符）。

- 如果 CI 需要透视校正插值，但根据 oldPos.w 值。所以我必须通过将 u' 与顶点中的 currentPos.w 相乘并将插值除以 currentPos.w 来线性化 u'=(u/oldPos.w) 和 v'=(v/oldPos.w) 的插值分段。我还需要以相同的方式线性插值 w'=(1/oldPos.w) ，然后通过将插值的 u' 除以插值的 w' 来计算片段中的最终 u'' （对于 v'' 分别相同） ）。

所以 - 现在的问题是，在这两种情况下产生正确结果的正确数学是什么？

同样，为顶点计算正确的 uv 不是问题。这是关于在三角形上实现正确的插值。

//可能相关：在同一通道中，我还想使用非投影、透视校正纹理对对象进行一些常规纹理处理。这意味着我不能更改 gl_Position.w 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:53:48.080

```
vec2 UV = vec2(((oldPos.x/oldPos.w)+1)*0.5f, ((oldPos.y/oldPos.w)+1)*0.5f); 
```

错误的。你*需要*W；你还不想分裂。你想要的是这样的：

```
vec4 oldPos = previousMVP * vec4(position,1);
oldPos = clipToTexture * oldPos;
vec3 UV = oldPos.xyw; 
```

该`clipToScreen`矩阵是一个 4x4 矩阵，它执行从剪辑到屏幕空间所需的缩放和平移。这就是你的规模`0.5`和添加`1.0`正在做的事情。在这里，它是矩阵形式；通常，您只需将“previousMVP”与此进行左乘，因此这将是一个单一的矩阵乘法。

在您的片段着色器中，您需要进行投影纹理查找。我不记得 GLSL 1.20 的功能，但我知道[1.30+ 的功能：](http://www.opengl.org/wiki/GLSL_Samplers#Projective_texture_access)

```
vec4 color = textureProj(samplerName, UV.stp); 
```

正是这个函数将执行必要的 W 除法步骤。

# delphi - TopendDialog 不显示文件扩展名

> ID：10026137
> 
> 赞同：5
> 
> 时间：2012-04-05T09:34:06.577
> 
> 标签：delphi, delphi-2007

此问题仅发生在以前在 Delphi 7 下设计并迁移到在 WinXP 上运行的 Delphi 2007 的应用程序上。

我尝试了很长时间来解决这个问题，但没有运气。

据我所知，Topendialog 是一个 Win32 对话框包装器，它应该继承 windows 文件夹选项，在我的例子中，它设置为显示所有文件的文件扩展名。

现在，如果我创建一个新应用程序并在其上放置一个 Topendialog，当它运行时，它会按预期显示文件扩展名。

如果我将相同的对话框放到现有应用程序上并运行，它不会显示文件扩展名。

如果事实上如果我在调用对话框之前将文件名字符串写入文件名属性a la'Myfile.txt'，当显示对话框时，文件名显示为'Myfile'，扩展名不会显示，也不会显示任何文件名单。

有没有其他人看起来有这种行为？

有人有任何解决方法吗？

编辑：上传的图像显示了新项目和现有项目的 Topendialog 之间的差异。

![如新项目所示](../Images/c8efa25d00500ceac91b4895c7f515bc.png "如新项目所示")

![如现有项目所示](../Images/3d256d301efe0f5e5da080068c76f674.png "如现有项目所示")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:31:44.520

好的，我有解决此问题的方法。

事实证明，在正确的位置调用 SHGetSettings 实际上可以阻止问题的发生。

所以解决方法是一开始就把它放在项目源中。

例如

> 程序废话；
> 
> 用途
> 
> 表格，shlobj，
> 
> 等等
> 等等
> 
> {$R *.TLB}
> 
> {$R *.RES}
> 
> var ShellFlags:TShellFlagState;
> 
> 开始
> SHGetSettings(ShellFlags,SSF_SHOWEXTENSIONS); ......

我不知道为什么这使它起作用，它不应该有任何区别，因为它只是一个查询，但它可以工作。

所以，感谢 Justmade 建议 API 调用。

# sql - 获取表的列名

> ID：10026140
> 
> 赞同：-3
> 
> 时间：2012-04-05T09:34:25.303
> 
> 标签：sql, oracle

我想要一个返回表列名的查询。

我尝试了以下查询-

```
SELECT column_name ColName 
  FROM all_tab_columns 
 WHERE table_name ='<TABLENAME>'; 
```

但此查询返回重复的列名。

我不想`distinct`在我的查询中使用它，因为它会妨碍性能。

那么是否有一个查询返回表的列而没有任何重复。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-05T09:38:45.880

这是从表中获取列名的解决方案。

```
 select column_name,data_type from cols where Table_name='TEST_TABLE' 
```

# php - 如何在网站目录中查找文件？

> ID：10026141
> 
> 赞同：0
> 
> 时间：2012-04-05T09:34:28.240
> 
> 标签：php, web-crawler

我正在创建一个网络爬虫。我想给它一个 URL，它会在目录和子目录中扫描 .html 文件。我一直在寻找两种选择：

1.  `scandir($url)`. 这适用于本地文件，但不适用于 http 站点。这是因为文件权限吗？我猜它不应该起作用，因为每个人都可以访问您的网站文件是危险的。

2.  搜索链接并关注它们。我可以在索引文件上执行 file_get_contents，找到链接，然后按照它们访问他们的 .html 文件。

这两种方法中的任何一种都有效还是有第三种选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:39:15.937

查找 html 文件的唯一方法是通过服务器返回的文件内容进行解析，除非他们在服务器上启用了目录浏览功能，这是通常禁用的第一件事，您无权访问浏览目录房源，只有他们准备给你看的内容，让你使用。

您必须启动[http://www.mysite.com](http://www.mysite.com)并继续扫描指向 html 文件的链接，如果它们有 asp/php 或其他文件然后返回 html 内容怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:41:00.817

你有考虑使用`[wget](http://www.gnu.org/software/wget/)`吗？它可以抓取网站并仅下载具有特定扩展名的文件。

# maven - Maven Multi Module Project-jars 没有从一个模块继承到另一个

> ID：10026145
> 
> 赞同：0
> 
> 时间：2012-04-05T09:34:55.257
> 
> 标签：maven, dependencies, ear, multi-module

我创建了一个多模块项目基础结构。我有另一个类似且运行良好的多模块项目基本代码（由其他人创建）。这两个项目都有相同的模块和相似的 POM。两者都是企业项目意味着两者都部署到耳文件中。我对多模块 maven 和 ear 项目有些陌生。

我有一个 web 模块，而 ear 模块引用了 web 模块。在我的耳朵 pom Iv 中提到了 web 模块作为 (not ) 下的依赖项现在在工作项目中，所有 jar 都来自一个名为“Ear Libraries”的库中的 ear 到 web 模块。我们可以在工作项目的 web 模块的“Java EE 模块依赖项”中看到这些 jar。

但是这些罐子没有显示在我创建的项目的 web 模块中，因此所有外部类（如 smartgwt 类）都会引发错误。POM 类似。我什至将项目导入到另一个工作区，但现在可以使用。项目被破坏了吗？我要从头开始吗？

**编辑**

这不是 POM 的错。我在两个应用程序中使用相同的 POM（只需复制粘贴并更改应用程序的名称）。它们具有相同的结构，相同的模块。我正在使用 M2Eclipse 0.9.9 和 RAD 7.5

工作项目网络模块图片 ![在此处输入图像描述](../Images/152d8daedafca87a212c55888c1efc78.png)

不工作 ![在此处输入图像描述](../Images/8c1e85228a74277310f1635862c81f0d.png)

我们可以在 EAR Libraries 下看到，jar 反映在 Working 项目中，但没有反映在 Error-Project 中。

# iphone - asihttp 发布多个文件

> ID：10026149
> 
> 赞同：0
> 
> 时间：2012-04-05T09:35:12.127
> 
> 标签：iphone

我希望用 ASIHttp post multi files 是否可以。对于一个文件，我知道代码是：

```
 [request setFile:[documentsDirectory stringByAppendingPathComponent:@"img1.png"] forKey:@"img"]; 
```

所有图像文件都有相同的键“img”

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:39:58.870

您可以像这样多次调用此方法：

```
for(int i=0; i<3 i++)
    [uploadRequest setFile:docFile forKey:[NSString stringWithFormat:@"uploadfile%d",i]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:42:15.570

```
[self setNetworkQueue:[ASINetworkQueue queue]];
[[self networkQueue] setDelegate:self];

for (int i=1; i<numberoffiles; i++) 
{
    NSString* filename = [NSString stringWithFormat:@"img%d.jpg", i];
    NSString *path = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:filename];
    [request setFile:path forKey:[NSString stringWithFormat:@"fileCount%d", i]];
    [[self networkQueue] addOperation:request];
}
[[self networkQueue] go]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:37:38.610

您可以为此创建多个**请求**对象。

# c++ - 我目前正在使用什么 c++ norme？

> ID：10026150
> 
> 赞同：20
> 
> 时间：2012-04-05T09:35:16.260
> 
> 标签：c++, linux, compiler-construction, c++11

最近我在编写的 c++ 代码中遇到了编译错误，所以有人问我是否使用了 C++11 编译器，但老实说，我不知道如何检查我的编译器版本！所以知道如何解决这个问题吗？

顺便说一句，我使用代码块作为 IDE，其中包括来自 MinGW 的 GCC 编译器和 GDB 调试器。另外，如果我在 Linux 下编译我的 c++ 代码，我应该运行什么命令来了解我的编译器版本？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-05T09:46:01.623

这可能是一个棘手的问题。C++11 指的是标准的一个版本，而不是编译器的一个版本。不同的编译器和任何给定编译器的不同版本通常会实现标准的混合版本，至少对于最近的版本是这样。或多或少，因为 C++11 的任何实现都是相当新的，因此可能相当有问题。

大多数编译器都有输出版本的选项；许多人会以详细模式系统地输出它。对于 g++，请尝试`g++ --version`. 最新版本的 g++ 确实对 C++11 有一些支持，但您必须使用`-std=c++0x`（而不是通常的`-std=c++03`or `-std=c++98`）来激活它。正如名称 ( `c++0x`, 而不是`c++11`) 所示，它*不是*真正的 C++11；它是一些（大多数？）主要新功能的实现，在基于各种工作文件的初步版本中，而不是最终标准。

（FWIW：我认为没有任何编译器完全实现了所有 C++11，但我很想被证明是错误的。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-05T09:38:02.693

你可以像这样找到你的编译器版本：

```
g++ --version 
```

这并不能告诉您是否使用的是 c++11。要使用 c++11 功能，您必须使用 thr`-std=c++0x`标志调用编译器：

```
g++ -std=c++0x .... 
```

请记住，gcc 还没有实现 100% 的 c++11，它实现的程度取决于版本。有关支持的功能表，请参见[此处。](http://gcc.gnu.org/projects/cxx0x.html)

**编辑**：严格来说，如果您使用的是 GCC，由于缺少功能，您不能使用完全兼容的 c++11 编译器。但是 4.6.1 及以后的版本涵盖了大量的标准。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-05T09:38:55.760

如果您使用的是 linux，则检查版本很容易。

```
> gcc --version 
```

会告诉你你拥有的版本。请注意，GCC C++11 支持仍然不完整，您可以在此处找到详细信息：http: [//gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

我自己使用了一些 C++11 特性，即初始化列表和`nullptr`常量。我正在使用 GCC 4.6，它工作正常。

编辑：是的，正如@jaunchopanza 所说，您需要`-std=c++0x`编译器标志才能使其工作。如果您使用的是 Code::Blocks，只需右键单击您的项目，选择*Build options...*，然后选中*Have g++ follow thecoming C++0x ISO C++ language standard [-std=c+ +0x]*

# python - 无法在python3中安装boto

> ID：10026153
> 
> 赞同：10
> 
> 时间：2012-04-05T09:35:20.620
> 
> 标签：python, python-3.x, boto

我正在尝试从源代码/pypi 安装 boto，但我无法使用 python 3.2 安装它。为什么会失败？

```
c:\boto>..\Python32\python.exe setup.py install
Traceback (most recent call last):
  File "setup.py", line 35, in <module>
    from boto import __version__
  File "c:\boto\boto\__init__.py", line 26, in <mod
ule>
    from boto.pyami.config import Config, BotoConfigLocations
  File "c:\boto\boto\pyami\config.py", line 185
    print s.getvalue()
          ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T09:50:22.913

```
print s.getvalue() 
```

是 Python 2 的语法。来自`README`：

> 如果您有兴趣在 Python 3.x 中尝试 boto，请查看该[`neo`](https://github.com/boto/boto/tree/neo)分支。这正在积极开发中，目标是在 Python 2.6、2.7 和 3.x 中工作的 boto 版本。并非一切都在工作，但很多事情都在工作，如果你是一个活跃的 Python 3.x 用户，那么值得一看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T17:32:16.407

# java - 回滚在java中不起作用

> ID：10026156
> 
> 赞同：0
> 
> 时间：2012-04-05T09:35:35.157
> 
> 标签：java, mysql, jdbc, transactions

我有一个简单的mysql插入方法，当我尝试如下回滚插入操作时，出现错误但不是回滚错误，请帮助我，

```
public void addFamer(FamerDTO famer) throws Exception {
        Connection con = JDBCConnectionPool.getInstance().checkOut();
        con.setAutoCommit(false);

        try {

            String generalFamerDataSQL = "INSERT INTO famers(famer_code, name_wt_initials, full_name, gender, "
                    + "nic_or_passport_no, sc_possition, phone_home, phone_mobile, phone_office) VALUES(?,?,?,?,?,?,?,?,?)";
            PreparedStatement insertFamerPS = con.prepareStatement(generalFamerDataSQL, PreparedStatement.RETURN_GENERATED_KEYS);
            insertFamerPS.setString(1, famer.getFamerCode());
            insertFamerPS.setString(2, famer.getNameWithInitials());
            insertFamerPS.setString(3, famer.getNameInFull());
            insertFamerPS.setString(4, famer.getGender());
            insertFamerPS.setString(5, famer.getNICorPassportNo());
            insertFamerPS.setString(6, famer.getSocietyPosission());
            insertFamerPS.setString(7, famer.getHomePhone());
            insertFamerPS.setString(8, famer.getMobilePhone());
            insertFamerPS.setString(9, famer.getOfficePhone());
            insertFamerPS.execute();   

String famerRelations = "INSERT INTO org_reg_blk_soc_fmr(org_id, region_id, famer_id, block_id, soc_id) "
                    + "VALUES (?,?,?,?,?)";
            PreparedStatement famerRelationsPS = con.prepareStatement(famerRelations);
            famerRelationsPS.setInt(1, famer.getOrganization().getOrg_id());
            famerRelationsPS.setInt(2, famer.getRegion().getRegion_id());
            famerRelationsPS.setInt(3, famerID);
            famerRelationsPS.setInt(4, famer.getBlock().getBlockId());
            famerRelationsPS.setInt(6, famer.getSociety().getSoc_id()); //intentionally made an error here to test, put index as 6 for 5
            famerRelationsPS.execute();

            con.commit();
        } catch (Exception e) {
            if (con != null) {
                logger.info("Rolling back!");
                con.rollback();                    
            }
            logger.error(e.getLocalizedMessage());

        } finally {
            con.setAutoCommit(true);
            JDBCConnectionPool.getInstance().checkIn(con);
        }

    } 
```

一旦使用所需参数调用此方法，因为第二个插入语句中存在错误，我希望回滚第一个插入操作。但认为显示错误，第一条插入语句将一条记录添加到数据库中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T09:39:29.837

只是检查一下-您使用的表格类型是什么？上次我使用 MySQL 时，MyISAM 表不支持事务，这意味着您必须使用另一种表类型，例如 InnoDB。

# c++ - 使用 Opengl 绘制超过 50k 的球体时如何提高速度

> ID：10026169
> 
> 赞同：2
> 
> 时间：2012-04-05T09:36:16.657
> 
> 标签：c++, opengl, geometry

现在，我使用 glutSolidSphere 绘制多个球体，即 50k+ 球体，速度极低。

有什么提高速度的方法或建议吗？

下面是我的代码...

```
void COpenGlWnd::OnPaint()
{
    CPaintDC dc(this);
    ::wglMakeCurrent(m_hDC, m_hRC);
    for(int k = 0; k < m_nCountZ; k++)
    {   
        for(int j = 0; j < m_nCountY; j ++)
        {   
            for(int i = 0; i < m_nCountX; i ++)
            {
            ::glPushMatrix();
            ........
            ::glutSolidSphere(Size[i][j][k], 36, 36);
            ........
            ::glPopMatrix();
            }
        }
    }
    ::SwapBuffers(m_hDC);
} 
```

有关更多信息：球体将始终位于特定位置，但用户可以使用鼠标旋转并从不同视图查看所有球体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T09:44:57.103

这里有几个建议：

1.  创建一个包含球体的顶点缓冲区对象 (VBO) 并渲染它，而不是使用 glutSolidSphere。
2.  查看实例化，即通过一次绘制调用绘制许多球体。

以下文章几乎完全符合您的要求：[http ://sol.gfxile.net/instancing.html](http://sol.gfxile.net/instancing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T02:39:48.290

如果你真的想要效率并且只处理球体，[你实际上可以只使用一个 quad 和一个 shader 来绘制一个具有无限分辨率的球体](http://arcsynthesis.org/gltut/Illumination/Tutorial%2013.html)。基本上使用数学来计算球体。从一个无纹理的圆圈开始。添加深度、法线、光照、纹理等。

这会计算每个像素的球体，使其具有所需的高分辨率。

# android - 在android webview中显示马拉雅拉姆语Unicode字体

> ID：10026171
> 
> 赞同：5
> 
> 时间：2012-04-05T09:36:21.720
> 
> 标签：android, fonts

我正在开发一个 Android RSS 阅读器。

我的工作几乎完成了，但是当我使用`WebView`.

我使用以下方法显示 RSS 提要：

```
String CurrentDescription = headlinesarray.Description[Number];

Description.loadDataWithBaseURL (null, "<html><head><style>@font-face{font-family:'MeeraRegular'; src: url('file:///android_asset/fonts/Meera.ttf');}body{font-family:'MeeraRegular'; font-size:20px; } </style></head><body>"+CurrentDescription+"</body></html>", "text/html", "UTF-8",
    null); 
```

当我使用这种方法时，它显示马拉雅拉姆字体，但不正确。许多字符放错了位置。而且它很难阅读。

这是一个屏幕截图：

![截屏](../Images/e283246c78ee052f53a0a759bc37258a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T12:50:21.057

最后我找到了一个解决方案。我将 Unicode 字体转换为 Ascii，通过用 Ascii 替换每个 Unicode 字符。这里我使用 MLTT-Karthika 作为 Ascii 字体。然后在字体中设置这个字体。

```
 t=(TextView) findViewById(R.id.text);
        Typeface typeFace = Typeface.createFromAsset(getAssets(),"karthika.TTF");
        t.setTypeface(typeFace);

        String CurrentDecription;
 String s2=s.toLowerCase().replaceAll("അ", "A").replaceAll("ആ","B")
          .replaceAll("ഇ","C")
            .replaceAll("ഈ","Cu")
            .replaceAll("ഉ","D")
            .replaceAll("ഊ","Du")
            .replaceAll("ഋ","E")
            .replaceAll("എ","F")
            .replaceAll("ഏ","G")
            .replaceAll("ഐ","sF")
            .replaceAll("ഒ","H")
            .replaceAll("ഓ","Hm")
            .replaceAll("ഔ","Hu")
            .replaceAll("ക്തേ","tà").replaceAll("ക്തെ","sà").replaceAll("ക്ത്യ","ày").replaceAll("ക്തൈ","ssà").replaceAll("ക്ത","à").replaceAll("ക്ഷ്യ","£y").replaceAll("ക്ഷെ","s£").replaceAll("ക്ഷേ","t£").replaceAll("ക്ഷൈ","ss£").replaceAll("ക്ഷ","£").replaceAll("ക്ടെ","sÎ").replaceAll("ക്ടേ","tÎ").replaceAll("ക്ട","Î").replaceAll("ങ്കെ","s¦").replaceAll("ങ്കേ","t¦").replaceAll("ങ്കൈ","ss¦").replaceAll("ങ്ക","¦").replaceAll("ക്ലെ","s¢").replaceAll("ക്ലേ","t¢").replaceAll("ക്ലൈ","ss¢").replaceAll("ക്ല","¢").replaceAll("ക്കേ","t¡").replaceAll("ക്കോ","t¡m").replaceAll("ക്കെ","s¡").replaceAll("കൊ","sIm").replaceAll("കെ","sI").replaceAll("കോ","tIm").replaceAll("കേ","tI").replaceAll("ക്വ","Iz").replaceAll("ക്രൈ","ss{I").replaceAll("ക്രോ","t{Im").replaceAll("ക്രേ","t{I").replaceAll("ക്രൊ","s{Im").replaceAll("ക്രെ","s{I").replaceAll("ക്ര","{I").replaceAll("ക്യ","Iy").replaceAll("ക്കൈ","ss¡").replaceAll("ക്ക","¡").replaceAll("കൈ","ssI").replaceAll("ക","I")
            .replaceAll("ഖേ","tJ").replaceAll("ഖൈ","ssJ").replaceAll("ഖെ","sJ").replaceAll("ഖ്വ","Jz").replaceAll("ഖ്യ","Jy").replaceAll("ഖ","J")
            .replaceAll("ഗ്ലെ","s¥").replaceAll("ഗ്ലേ","t¥").replaceAll("ഗ്ലൈ","ss¥").replaceAll("ഗ്ല","¥").replaceAll("ഗ്ഗേ","t¤").replaceAll("ഗ്ഗൈ","ss¤").replaceAll("ഗ്ഗെ","s¤").replaceAll("ഗൈ","ssK").replaceAll("ഗൊ","sKm").replaceAll("ഗെ","sK").replaceAll("ഗ്വ","Kz").replaceAll("ഗ്യ","Ky").replaceAll("ഗൃ","Kr").replaceAll("ഗ്രൈ","ss{K").replaceAll("ഗ്ര","{K").replaceAll("ഗ്ഗ","¤").replaceAll("ഗോ","tKm").replaceAll("ഗേ","tK").replaceAll("ഗ","K")
            .replaceAll("ഘൈ","ssL").replaceAll("ഘൊ","sLm").replaceAll("ഘെ","sL").replaceAll("ഘോ","tLm").replaceAll("ഘേ","tL").replaceAll("ഘ","L")
            .replaceAll("ങ്ങൈ","ss§").replaceAll("ങ്ങെ","s§").replaceAll("ങ്ങേ","t§").replaceAll("ങ്ങ്യ","§y").replaceAll("ങ്ങ","§").replaceAll("ങേ","tM").replaceAll("ങൈ","ssM").replaceAll("ങെ","sM").replaceAll("ങ","M")
            .replaceAll("ഞ്ചൈ","ss©").replaceAll("ഞ്ചെ","s©").replaceAll("ഞ്ചേ","t©").replaceAll("ഞ്ച്യ","©y").replaceAll("ഞ്ച","©").replaceAll("ച്ചേ","t¨").replaceAll("ച്ചൈ","ss¨").replaceAll("ച്ചെ","s¨").replaceAll("ചോ","tNm").replaceAll("ചേ","tN").replaceAll("ചൈ","ssN").replaceAll("ചൊ","sNm").replaceAll("ചെ","sN").replaceAll("ച്ര","{N").replaceAll("ച്യ","Ny").replaceAll("ച്ച","¨").replaceAll("ച","N")
            .replaceAll("ഛൈ","ssO").replaceAll("ഛെ","sO").replaceAll("ഛേ","tO").replaceAll("ഛ","O")
            .replaceAll("ജ്ഞൈ","ssÚ").replaceAll("ജ്ഞെ","sÚ").replaceAll("ജ്ഞേ","tÚ").replaceAll("ജ്ഞ","Ú").replaceAll("ജ്ജേ","tÖ").replaceAll("ജ്ജൈ","ssÖ").replaceAll("ജ്ജെ","sÖ").replaceAll("ജ്ജ","Ö").replaceAll("ജൈ","ssP").replaceAll("ജൊ","sPm").replaceAll("ജെ","sP").replaceAll("ജ്വ","Pz").replaceAll("ജ്യ","Py").replaceAll("ജ്ര","{P").replaceAll("ജോ","tPm").replaceAll("ജേ","tP").replaceAll("ജ","P")
            .replaceAll("ഝൈ","ssQ").replaceAll("ഝെ","sQ").replaceAll("ഝേ","tQ").replaceAll("ത്സ്യ","Qy").replaceAll("ഝ","Q")
            .replaceAll("ഞ്ഞൈ","ssª").replaceAll("ഞ്ഞെ","sª").replaceAll("ഞ്ഞേ","tª").replaceAll("ഞ്ഞ","ª")
            .replaceAll("ഞൈ","ssR").replaceAll("ഞെ","sR").replaceAll("ഞേ","tR").replaceAll("ഞ","R")
            .replaceAll("ന്റെ","sâ").replaceAll("ന്റേ","tâ").replaceAll("ന്റ","â").replaceAll("ണ്ടൈ","ssî").replaceAll("ണ്ടെ","sî").replaceAll("ണ്ടേ","tî").replaceAll("ണ്ട്യ","îy").replaceAll("ണ്ട","î").replaceAll("ട്ട്യ","«y").replaceAll("ട്ടൈ","ss«").replaceAll("ട്ടെ","s«").replaceAll("ട്രൈ","ss{S").replaceAll("ട്രോ","t{Sm").replaceAll("ട്രേ","t{S").replaceAll("ട്രെ","s{S").replaceAll("ടൈ","ssS").replaceAll("ടൊ","sSm").replaceAll("ടെ","sS").replaceAll("ട്ര","{S").replaceAll("ട്വ","Sz").replaceAll("ട്യ","Sy").replaceAll("ട്ടോ","t«m").replaceAll("ട്ടേ","t«").replaceAll("ട്ട","«").replaceAll("ടോ","tSm").replaceAll("ടേ","tS").replaceAll("ട","S")
            .replaceAll("ഠൈ","ssT").replaceAll("ഠെ","sT").replaceAll("ഠേ","tT").replaceAll("ഠ്യ","Ty").replaceAll("ഠ","T")

            .replaceAll("ഡ്രൈ","ss{U").replaceAll("ഡ്രേ","t{U").replaceAll("ഡ്രെ","s{U").replaceAll("ഡൈ","ssU").replaceAll("ഡെ","sU").replaceAll("ഡ്ര","{U").replaceAll("ഡേ","tU").replaceAll("ഡോ","tUm").replaceAll("ഡ","U")
            .replaceAll("ഢൈ","ssV").replaceAll("ഢെ","sV").replaceAll("ഢേ","tV").replaceAll("ഢ","V")
            .replaceAll("ണ്മൈ","ss×").replaceAll("ണ്മെ","s×").replaceAll("ണ്മേ","t×").replaceAll("ണ്മ","×").replaceAll("ണ്ണൈ","ss®").replaceAll("ണ്ണെ","s®").replaceAll("ണൈ","ssW").replaceAll("ണെ","sW").replaceAll("ണ്‍","¬").replaceAll("ണ്ണേ","t®").replaceAll("ണ്ണ","®").replaceAll("ണേ","tW").replaceAll("ണ","W")
            .replaceAll("ത്ഥൈ","ss°").replaceAll("ത്ഥെ","s°").replaceAll("ത്ഥേ","t°").replaceAll("ത്ഥ്യ","°y").replaceAll("ത്ഥ","°").replaceAll("ത്മൈ","ssß").replaceAll("ത്മെ","sß").replaceAll("ത്മേ","tß").replaceAll("ത്മ","ß").replaceAll("ത്തൈ","ss¯").replaceAll("ത്തെ","s¯").replaceAll("ന്തൈ","ss´").replaceAll("ന്തെ","s´").replaceAll("തൈ","ssX").replaceAll("തൊ","sXm").replaceAll("തെ","sX").replaceAll("ത്വ","Xz").replaceAll("ന്ത്ര","{´").replaceAll("ന്ത്യ","´y").replaceAll("ന്തേ","t´").replaceAll("ന്തോ","t´m").replaceAll("ന്ത","´").replaceAll("ത്യേ","tXy").replaceAll("ത്യ","Xy").replaceAll("തൃ","Xr").replaceAll("ത്രൈ","ss{X").replaceAll("ത്രോ","t{Xm").replaceAll("ത്രൊ","t{Xm").replaceAll("ത്രേ","t{X").replaceAll("ത്രെ","s{X").replaceAll("ത്ര","{X").replaceAll("ത്തേ","t¯").replaceAll("ത്ത","¯").replaceAll("തോ","tXm").replaceAll("തേ","tX").replaceAll("ത","X")

            .replaceAll("ഥൈ","ssY").replaceAll("ഥെ","sY").replaceAll("ഥേ","tY").replaceAll("ഥ","Y")                                   
            .replaceAll("ദ്ധേ","t²").replaceAll("ദ്ധൈ","ss²").replaceAll("ദ്ധെ","s²").replaceAll("ദ്ധ","²").replaceAll("ബ്ദൈ","ssÐ").replaceAll("ബ്ദെ","sÐ").replaceAll("ബ്ദേ","tÐ").replaceAll("ബ്ദ","Ð").replaceAll("ന്ദൈ","ssµ").replaceAll("ന്ദെ","sµ").replaceAll("ന്ദേ","tµ").replaceAll("ന്ദ്രേ","t{µ").replaceAll("ന്ദ്രൈ","ss{µ").replaceAll("ന്ദ്രെ","s{µ").replaceAll("ന്ദ്ര","{µ").replaceAll("ന്ദ","µ").replaceAll("ദ്ദൈ","ss±").replaceAll("ദ്ദെ","s±").replaceAll("ദ്ദേ","t±").replaceAll("ദ്ദ","±").replaceAll("ദൈ","ssZ").replaceAll("ദെ","sZ").replaceAll("ദ്വൈ","ssZz").replaceAll("ദ്വേ","tZz").replaceAll("ദ്വ","Zz").replaceAll("ദ്യെ","sZy").replaceAll("ദ്യേ","tZy").replaceAll("ദ്യ","Zy").replaceAll("ദൃ","Zr").replaceAll("ദേ","tZ").replaceAll("ദ","Z")
            .replaceAll("ബ്ധെ","sÏ").replaceAll("ബ്ധേ","tÏ").replaceAll("ബ്ധ","Ï").replaceAll("ന്ധ്രെ","s{Ô").replaceAll("ന്ധ്യ","Ôy").replaceAll("ന്ധ്ര","{Ô").replaceAll("ന്ധെ","sÔ").replaceAll("ന്ധേ","tÔ").replaceAll("ന്ധ","Ô").replaceAll("ധൈ","ss[").replaceAll("ധെ","s[").replaceAll("ധ്യ","[y").replaceAll("ധൃ","[r").replaceAll("ധേ","t[").replaceAll("ധ","[")
           .replaceAll("ന്&zwj;െറ","sâ").replaceAll("ന്&zwj;േറ","tâ").replaceAll("ന്റെ","sâ").replaceAll("ന്റേ","tâ").replaceAll("ന്&zwj;റ","â").replaceAll("ന്റ","â").replaceAll("ന്&zwj;","³").replaceAll("ന്‍","³").replaceAll("ന്നൈ","ss¶").replaceAll("ന്നെ","s¶").replaceAll("ന്നേ","t¶").replaceAll("ന്ന","¶").replaceAll("ന്മൈ","ss∙").replaceAll("ന്മെ","s∙").replaceAll("ന്മേ","t∙").replaceAll("ന്മ","∙").replace("നൈ","ss\\").replace("നൊ","s\\m").replace("നെ","s\\").replace("ന്വേ","t\\z").replace("ന്വെ","s\\z").replace("ന്വ","\\z").replace("ന്യ","\\y").replace("നോ","t\\m").replace("നേ","t\\").replace("ന","\\")
            .replaceAll("മ്പൈ","ss¼").replaceAll("മ്പെ","s¼").replaceAll("മ്പ്യ","¼y").replaceAll("മ്പേ","t¼").replaceAll("മ്പ","¼").replaceAll("ല്പെ","så").replaceAll("ല്പേ","tå").replaceAll("ല്പ","å").replaceAll("പ്ലേ","ts¹").replaceAll("പ്ലൈ","ss¹").replaceAll("പ്ലെ","s¹").replaceAll("പ്ല","¹").replaceAll("പ്പേ","t¸").replaceAll("പ്പൈ","ss¸").replaceAll("പ്പെ","s¸").replaceAll("പൈ","ss]").replaceAll("പൊ","s]m").replaceAll("പെ","s]").replaceAll("പ്യ","]y").replaceAll("പ്രേ","t{]").replaceAll("പ്രൈ","ss{]").replaceAll("പ്രെ","s{]").replaceAll("പ്ര","{]").replaceAll("പ്പേ","t¸").replaceAll("പ്പ","¸").replaceAll("പോ","t]m").replaceAll("പേ","t]").replaceAll("പ","]")
            .replaceAll("ഫ്ലൈ","^vssf").replaceAll("ഫ്ലെ","^vsf").replaceAll("ഫ്ലേ","^vtf").replaceAll("ഫ്ല","^vf").replaceAll("ഫൈ","ss^").replaceAll("ഫൊ","s^m").replaceAll("ഫെ","s^").replaceAll("ഫോ","t^m").replaceAll("ഫേ","t^").replaceAll("ഫ്ര","{^").replaceAll("ഫ","^")
            .replaceAll("ബ്ലൈ","ss»").replaceAll("ബ്ലെ","s»").replaceAll("ബ്ലേ","t»").replaceAll("ബ്ല","»").replaceAll("ബ്ബൈ","ssº").replaceAll("ബ്ബെ","sº").replaceAll("ബൈ","ss_").replaceAll("ബൊ","s_m").replaceAll("ബെ","s_").replaceAll("ബ്രേ","t{_").replaceAll("ബ്രൈ","ss{_").replaceAll("ബ്രെ","s{_").replaceAll("ബ്ര","{_").replaceAll("ബ്ബേ","tº").replaceAll("ബ്ബ","º").replaceAll("ബോ","t_m").replaceAll("ബേ","t_").replaceAll("ബ","_")
            .replaceAll("ഭൈ","ss`").replaceAll("ഭെ","s`").replaceAll("ഭ്വ","`z").replaceAll("ഭ്ര","{`").replaceAll("ഭ്യ","`y").replaceAll("ഭൃ","`r").replaceAll("ഭേ","t`").replaceAll("ഭ","`")
            .replaceAll("മ്മൈ","ss½").replaceAll("മ്മെ","s½").replaceAll("മൈ","ssa").replaceAll("മൊ","sam").replaceAll("മെ","sa").replaceAll("മ്യ","ay").replaceAll("മൃ","ar").replaceAll("മ്മേ","t½").replaceAll("മ്മ","½").replaceAll("മോ","tam").replaceAll("മേ","ta").replaceAll("മ","a")
            .replaceAll("ല്യ","ey").replaceAll("ര്യ","cy").replaceAll("ഷ്യ","jy").replaceAll("ഹ്യ","ly").replaceAll("സ്യേ","tky").replaceAll("സ്യ","ky").replaceAll("ശ്യ","iy").replaceAll("വ്യ","hy").replaceAll("യ്യൈ","ss¿").replaceAll("യ്യെ","s¿").replaceAll("യോ","tbm").replaceAll("യൈ","ssb").replaceAll("യെ","sb").replaceAll("യ്യേ","t¿").replaceAll("യ്യ","¿").replaceAll("യേ","tb").replaceAll("യ","b")
            .replaceAll("ഹ്ര","{l").replaceAll("സ്രേ","t{k").replaceAll("സ്ര","{k").replaceAll("വ്ര","{h").replaceAll("ശ്രേ","t{i").replaceAll("ശ്ര","{i").replaceAll("രൈ","ssc").replaceAll("രൊ","scm").replaceAll("രെ","sc").replaceAll("ര്വ","cz").replaceAll("ര്&zwj;","À").replaceAll("ര്‍","À").replaceAll("ര്യ","cy").replaceAll("രോ","tcm").replaceAll("രേ","tc").replaceAll("ര","c")
            .replaceAll("റ്റൈ","ssä").replaceAll("റ്റെ","sä").replaceAll("റ്റേ","tä").replaceAll("റ്റോ","täm").replaceAll("റ്റ","ä").replaceAll("റൈ","ssd").replaceAll("റെ","sd").replaceAll("റേ","td").replaceAll("റ","d")
            .replaceAll("ഹ്ലെ","sË").replaceAll("ഹ്ലേ","tË").replaceAll("ഹ്ല","Ë").replaceAll("ശ്ലെ","sÇ").replaceAll("ശ്ലേ","tÇ").replaceAll("ശ്ല","Ç").replaceAll("ല്ലൈ","ssÃ").replaceAll("ല്ലൊ","sÃm").replaceAll("ല്ലെ","sÃ").replaceAll("ലൈ","sse").replaceAll("ലൊ","sem").replaceAll("ലെ","se").replaceAll("ല്ല്വ","Ãz").replaceAll("ല്ല","Ã").replaceAll("ല്&zwj;","Â").replaceAll("ല്‍","Â").replaceAll("ല്ല്യ","Ãy").replaceAll("ല്ലോ","tÃm").replaceAll("ല്ലേ","tÃ").replaceAll("ല്ല","Ã").replaceAll("ലോ","tem").replaceAll("ലേ","te").replaceAll("ല","e")
            .replaceAll("ള്ള","Å").replaceAll("ള്&zwj;","Ä").replaceAll("ള്‍","Ä").replaceAll("ള്ളൈ","ssÅ").replaceAll("ള്ളെ","sÅ").replaceAll("ളൈ","ssf").replaceAll("ളെ","sf").replaceAll("ള്ള","Å").replaceAll("ള്ളേ","tÅ").replaceAll("ളേ","tf").replaceAll("ള","f")
            .replaceAll("ഴൈ","ssg").replaceAll("ഴെ","sg").replaceAll("ഴേ","tg").replaceAll("ഴ","g")
            .replaceAll("ഷ്വൈ","ssjz").replaceAll("ഷ്വെ","sjz").replaceAll("ഷ്വ","jz").replaceAll("ഹ്വ","lz").replaceAll("സ്വേ","tkz").replaceAll("സ്വൈ","sskz").replaceAll("സ്വെ","skz").replaceAll("സ്വ","kz").replaceAll("വ്വൈ","ssÆ").replaceAll("വ്വെ","sÆ").replaceAll("വൈ","ssh").replaceAll("വെ","sh").replaceAll("ശ്വേ","tiz").replaceAll("ശ്വ","iz").replaceAll("വ്വേ","tÆ").replaceAll("വ്വ","Æ").replaceAll("വേ","th").replaceAll("വോ","thm").replaceAll("വ","h")
            .replaceAll("ശ്ശൈ","ssÈ").replaceAll("ശ്ശെ","sÈ").replaceAll("ശൈ","ssi").replaceAll("ശൊ","sim").replaceAll("ശെ","si").replaceAll("ശ്രേ","t{i").replaceAll("ശ്ര","{i").replaceAll("ശ്ശേ","tÈ").replaceAll("ശ്ശ","È").replaceAll("ശോ","tim").replaceAll("ശേ","ti").replaceAll("ശ","i")
            .replaceAll("ഷൈ","ssj").replaceAll("ഷെ","sj").replaceAll("ഷേ","tj").replaceAll("ഷ","j")
            .replaceAll("സ്സൈ","ssÊ").replaceAll("സ്സെ","sÊ").replaceAll("സൈ","ssk").replaceAll("സെ","sk").replaceAll("സ്സ","Ê").replaceAll("സ്സേ","tÊ").replaceAll("സേ","tk").replaceAll("സോ","tkm").replaceAll("സ","k")
            .replaceAll("ഹൈ","ssl").replaceAll("ഹെ","sl").replaceAll("ഹേ","tl").replaceAll("ഹ","l")
            .replaceAll("ാ","m")
            .replaceAll("ി","n")
            .replaceAll("ീ","o")
            .replaceAll("ു","p")
            .replaceAll("ൂ","q")
            .replaceAll("ഃ","x")
            .replaceAll("്","v")
            .replaceAll("ം","w")
            .replaceAll("ൗ","u")

            .replaceAll("ൃ","r")
                ;

    t.setText(s2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:10:34.610

巴西姆，我有一个解决方案。可能这会帮助你

从此链接下载 salilam ttf 文件并放置此文件名而不是 malayalam.fnt

```
http://www.prokerala.com/downloads/fonts.php 
```

在项目的 assets 文件夹中添加你的字体文件，然后在 setTYpeface() 函数的帮助下为 textview 设置字体。

```
 Typeface typeFace = Typeface.createFromAsset(getAsset(),"malyalam.fnt"); 
```

然后将其添加到您的文本视图中，如下所示

```
 textView.setTypeFace(typeFace); 
```

希望这对你有用，

我已将这些代码文件发送到您的邮箱 basim.sherif@gmail.com

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T15:10:48.693

将您的文本编码切换为 UTF-8。

在 Eclipse 中，转到 Window -> Preferences，选择 General -> Workspace。从文本文件编码下拉列表中，选择 UTF-8。

[https://stackoverflow.com/a/5857671/1933926](https://stackoverflow.com/a/5857671/1933926)

# jquery - jQuery UI Select 结合验证插件

> ID：10026176
> 
> 赞同：3
> 
> 时间：2012-04-05T09:36:48.637
> 
> 标签：jquery, jquery-ui, select, jquery-validate, drop-down-menu

我想验证我的选择框，但是因为我使用 jQuery UI 来设置我的选择框的样式，所以它不起作用。

Jquery UI 设置为显示的真正选择框：无，这就是它不起作用的原因，请参阅： ![html](../Images/2053d700cec98411d78e367ce1307ec9.png)

但是我怎样才能让它与 jQuery UI 选择框插件一起工作呢？

我希望有人有一个可行的解决方案。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T12:15:57.850

这只是因为`selectMenu`隐藏了`select`. 默认情况下，验证不验证隐藏元素。您可以通过将`ignore`选项设置为`[]`：

```
$(".valid").validate({
    meta: "validate",
    ignore: [],
    groups: {
        checks: checkbox_names
    },
    errorPlacement: function(error, element) {
        if (element.attr("type") == "checkbox")
            error.insertAfter(element.parent().siblings().last());
        else if (element.is("select")) {
            error.insertAfter(element.next("a.ui-selectmenu"))
        }
        else error.insertAfter(element);
    }
}); 
```

正如您所注意到的，更改`selectMenu`不会重新验证输入。您可以通过点击`change`事件`selectMenu`并手动重新验证元素来解决此问题：

```
// SELECTBOXES
$(function() {
    $('.dataTables_length input, select').not("select.multiple").selectmenu({
        style: 'dropdown',
        transferClasses: true,
        width: null,
        change: function() {
            $(".valid").validate().element(this);
        }
    });
}); 
```

**示例：http:** [//jsfiddle.net/8YvSN/](http://jsfiddle.net/8YvSN/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-06-11T06:15:53.507

```
change: function() {
   $("#validate-form-name").validate().element(this);
}; 
```

这工作正常。

# android - 为什么 Log.d() 消息不应该显示在设备上？

> ID：10026178
> 
> 赞同：3
> 
> 时间：2012-04-05T09:36:59.773
> 
> 标签：android, logcat, android-logcat

Android 文档指出：

> 详细程度从少到多的顺序是 ERROR、WARN、INFO、DEBUG、VERBOSE。除非在开发期间，否则永远不应将详细信息编译到应用程序中。调试日志被编译，但在运行时被剥离。始终保留错误、警告和信息日志。

但是尝试做一个`Log.d()`，你会发现它实际上仍在真实设备上录制到 Logcat。

有谁知道为什么？或者如何禁用它？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T09:39:43.553

您所看到的是预期的行为。如果您使用 logcat 并连接设备，Log.d 将始终被记录并可见。因此，如果您不想在生产应用程序中调试日志，请将其关闭。事实上 android sdk 建议你这样做。这个 SO 答案也可能对您有所帮助。[创建最终包时，我应该评论我的日志调用吗？](https://stackoverflow.com/questions/4958860/should-i-comment-my-log-calls-when-creating-my-final-package)

安卓 SDK 说

> 关闭日志记录和调试
> 
> 确保在构建应用程序以供发布之前停用日志记录并禁用调试选项。您可以通过删除源文件中对 Log 方法的调用来停用日志记录。您可以通过从清单文件中的标记中删除 android:debuggable 属性或在清单文件中将 android:debuggable 属性设置为 false 来禁用调试。此外，删除在您的项目中创建的任何日志文件或静态测试文件。
> 
> 此外，您应该删除添加到代码中的所有调试跟踪调用，例如 startMethodTracing() 和 stopMethodTracing() 方法调用。

[来源](http://developer.android.com/guide/publishing/preparing.html#releaseready)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:39:43.780

您应该在自己的类中封装日志记录，并在需要时启用/禁用特殊类型的日志。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T09:40:57.500

如果verbose是在开发中编译的，如果没有调试日志会很有趣。所以签署你的应用程序并试一试，我认为调试消息丢失了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-05T09:42:20.723

当您插入设备时，它会激活调试模式。如果应用程序在设备拔出的情况下运行，我认为它不会做同样的事情，尽管你无法检查......

# c# - 如何以任何给定的方式显示组合框中的项目？

> ID：10026181
> 
> 赞同：-1
> 
> 时间：2012-04-05T09:37:08.053
> 
> 标签：c#, javascript, asp.net

我通过在数据库上获取查询来填充下拉列表。假设它获取如下给出的项目：

老师，学生，Pricipal，Sweeper，FinanceManager。

在下拉列表中显示它时，我希望按以下顺序显示它：

校长、财务经理、教师、学生、清道夫。

这不是任何特定的顺序（升序或降序），而只是根据个性具有一定相关性的顺序。

我如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:42:12.173

由于您从数据库中获取数据，对我来说简单的解决方案是在同一个表中添加一个额外的列来保存订单。

```
eg. Your Table
    Column1 Column2 .... DisplayOrder(int)
    Principal                     1
    FinanceManager                2
    etc... 
```

因此，您可以在进行选择时按 DisplayOrder 进行排序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T09:41:23.250

你可以在你的数据库中给他们一个额外的“角色标志”

```
ID NAME       FLAG
1  Principal  5
3  FinanceM   4
33 Teacher    3
22 Student    2
99 Sweeper    1 
```

你可以通过“order by FLAG”进行查询

# ios - iOS 开发证书和配置文件，可以在 Mac 上没有互联网吗？

> ID：10026185
> 
> 赞同：1
> 
> 时间：2012-04-05T09:37:31.913
> 
> 标签：ios, certificate

我已经注册了 iOS 开发者计划。我开发了一个应用程序，我想在 iPad 设备上进行测试。出于安全原因，我正在开发的 Mac 上无法直接连接互联网。我知道我可以生成证书签名请求并将其传输到另一台计算机（这台计算机可以有互联网连接），然后将其上传到苹果网站。这就是棘手的部分：开发者证书将处于待处理状态，直到我下载 WWDR 中间证书并将其安装在没有互联网的 Mac 上。然后，在我刷新页面后，当然没有任何反应，因为我注册 WWDR 的 Mac 无法与苹果通信。除了将 Mac 连接到互联网之外，还有其他方法可以获得此证书，或者我可以使用其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:49:30.710

要克服这个问题，您需要为多个设备共享证书。**您可以轻松地以.p12格式从****/Applications/Utilities/Keychain** Access导出证书并将其安装到其他计算机，然后您可以同步所有临时、Adhoc 和 App Store 配置文件。

 **您可以按照本[教程](http://www.theevilboss.com/2009/06/iphone-sdk-development-on-multiple.html)和这些[链接](https://stackoverflow.com/questions/7057644/developing-for-ios-on-multiple-computers-testing-on-a-single-device-advice)进行分步过程。**

# ruby - 在任何源中都找不到 rake-0.8.7 (Bundler::GemNotFound)

> ID：10026190
> 
> 赞同：1
> 
> 时间：2012-04-05T09:37:51.180
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我正在使用 Ruby 1.8.7 和 Rails 2.3.5 版本。当我尝试启动服务器时，它会引发以下错误。当我列出宝石时，它会显示那里的耙子，但版本不同

```
actionmailer (2.3.5)
actionpack (2.3.5)
activerecord (2.3.5)
activeresource (2.3.5)
activesupport (2.3.5)
bundler (1.1.3)
fattr (2.2.1)
git (1.2.5)
postgres-pr (0.6.3)
rack (1.0.1)
rails (2.3.5)
rake (0.9.2.2)
rush (0.6.8)
session (3.1.0) 
```

请帮我弄清楚这个问题。

```
D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/spec_set.rb:90:in `materialize': Could not find rake-0.8.7 in any of the sources (Bundler::GemNotFound)

        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/spec_set.rb:83:in `map!'
        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/spec_set.rb:83:in `materialize'
        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/definition.rb:127:in `specs'
        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/definition.rb:172:in `specs_for'
        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler/runtime.rb:11:in `setup'
        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:114:in `setup'
        from D:/ruby/lib/ruby/gems/1.8/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
        from D:/safecellweb/config/boot.rb:116:in `load_gems'
        from D:/ruby/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:164:in `process'
        from D:/ruby/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:113:in `send'
        from D:/ruby/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:113:in `run'
        from D:/safecellweb/config/environment.rb:10
        from D:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from D:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from D:/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:156:in `require'
        from D:/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:521:in `new_constants_in'
        from D:/ruby/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:156:in `require'
        from D:/ruby/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/commands/server.rb:84
        from D:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from D:/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from script/server:4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:43:15.460

实际上你的 rake 版本是 0.9.2

虽然您的应用需要 0.8.7

所以首先通过这个命令卸载 rake 0.9.2

```
gem uninstall rake -v=0.9.2 
```

然后通过这个命令安装 rake 0.8.7

```
gem install rake -v=0.8.7 
```

希望你的问题能得到解决......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T06:15:15.260

运行这些命令，问题将解决
第 1 步：install rake **gem install rake -v '0.8.7'**

第 2 步：安装捆绑器**gem install bundler**

第 3 步：**捆绑安装**

它将解决问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T04:24:03.547

即使我在使用 RubyMine 运行应用程序时也遇到了同样的问题。

我采取的步骤： 1）我在我的机器上安装了新的 Ruby。2) 更改环境变量中 Ruby 的路径。3) 使用以下步骤在 RubyMine 中更改 Ruby 的路径：- a) 单击**File** -> **Settings** -> **Ruby SDK and Gems** 4) 然后运行*​​bundle install*

# wpf - 如何将列表的元素绑定到标签

> ID：10026191
> 
> 赞同：-1
> 
> 时间：2012-04-05T09:37:52.230
> 
> 标签：wpf, xaml

我正在为以下问题寻找一个很好的代码解决方案。

我有一个要绑定到几个标签的列表。MyObject 类仅包含几个字段（字符串和整数）。此列表包含 3 个元素。在我看来，我希望有以下布局

1.  元素 1
2.  元素 2
3.  元素 3

其中“元素 1”、“元素 2”和“元素 3”是 MyObject 类的属性。

请注意，视图已在 Blend 中定义如下（我不希望更改视图代码，但如果我别无选择... ;)）：

```
<Label Content="1." RenderTransformOrigin="0,0.404" Foreground="Black" FontSize="16" VerticalContentAlignment="Bottom" HorizontalContentAlignment="Right" FontFamily="Segoe UI Semibold"/>
<Label Content="2." RenderTransformOrigin="0,0.404" Foreground="Black" FontSize="16" VerticalContentAlignment="Bottom" HorizontalContentAlignment="Right" Grid.Row="1" FontFamily="Segoe UI Semibold"/>
<Label Content="3." Margin="0,0,0,1.077" RenderTransformOrigin="0,0.404" Foreground="Black" FontSize="16" VerticalContentAlignment="Bottom" HorizontalContentAlignment="Right" Grid.Row="2" FontFamily="Segoe UI Semibold"/>
<Label Content="Login bug startup (6 days)" Foreground="Black" FontSize="14.667" VerticalContentAlignment="Bottom" Grid.Column="1"/>
<Label Content="Setup screen exception (4 days)" Foreground="Black" FontSize="14.667" VerticalContentAlignment="Bottom" Grid.Column="1" Grid.Row="1"/>
<Label Content="No users available bug (1 day)" Foreground="Black" FontSize="14.667" VerticalContentAlignment="Bottom" Grid.Column="1" Grid.Row="2"/> 
```

做这个的最好方式是什么 ？我确信我可以用一些松散的代码来做到这一点，但我更喜欢一个简洁的解决方案。

非常感谢你 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:50:34.137

```
<ListView ItemsSource={Binding MyObjectsList}>
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Number}" />
                <Label Content="{Binding Element}" />
            </StackPanel>
        </DataTempalte>
    </ListView.ItemTemplate>
</ListView> 
```

Number 和 Element 是 MyObject 的属性。

# javascript - 嵌套类定义而不创建额外的全局对象

> ID：10026193
> 
> 赞同：0
> 
> 时间：2012-04-05T09:37:57.950
> 
> 标签：javascript, class, global-variables, nested-class

我正在尝试在 javascript 中创建嵌套类定义，以便只有一个全局对象。

目前我们定义这样的新类：

```
FOO.Navigation.Sidebar.Tooltip = function()
{
}; 
```

所以在每个函数定义中，我们必须重复整个嵌套类命名空间：

```
FOO.Navigation.Sidebar.Tooltip.prototype.show = function()
{
  /* do something here */
}; 
```

我们引入了一个命名空间函数来创建类。

```
FOO = { /* ... */ }

FOO.namespace = function(namespaceString)
{
  var namespaceParts = namespaceString.split('.');
  var currentRoot = FOO;
  var index = 0;

  // Skip the first namespacePart, if it is already "FOO"
  if ("FOO" == namespaceParts[0])
  {
  index = 1;
  }

  var currentPart;  
  for(index; index < namespaceParts.length; index++)
  {     
    // This is the next element in the namespace hierarchy.
    currentPart = namespaceParts[index]; 
    // Add a new map for the currentPart to the root (if it does not exist yet). 
    currentRoot[currentPart] = currentRoot[currentPart] || {};
    // The currentPart will be the new root in the next loop.
    currentRoot = currentRoot[currentPart];
  }

  return currentRoot;
}; 
```

现在我们想用它来创建一个更易读的先前定义的版本，它应该看起来像这样：

```
FOO.Navigation.Sidebar.Tooltip = function()
{
  this.hallo = "world";
};

var tooltip = FOO.Navigation.Sidebar.Tooltip;

tooltip.prototype.show = function()
{
  /* do something */
}; 
```

这将创建一个新的全局变量“工具提示”，我们必须输入两次类名。所以我们想使用这样的匿名函数：

```
(function(tooltip) {
  tooltip = function()
  {
    this.hello = "world";
  };

  tooltip.prototype.show= function()
  {
    /* do something */
  };
}) (FOO.namespace("FOO.Navigation.Sidebar.Tooltip")) 
```

这显然是行不通的，因为我们为“工具提示”分配了一个新的函数定义。

所以我的问题是，是否有一种方法可以只编写一次类名而不创建更多的全局变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:48:14.653

在我看来，您正在尝试创建[Module Pattern](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)的实现。模块一般用于创建单实例对象；但是，您可以轻松地将工厂方法添加到返回新闭包（函数）的模块中。

使用上面粘贴的代码，您可以直接将方法附加到`tooltip`闭包内提供的变量；例如：

```
(function(Tooltip) {
    // 'Static' method added to the module definition.
    Tooltip.hello = function() { 
        alert("Hello!");
    };

    // Factory method which returns a new object.
    Tooltip.create(message) {
        return { 
            this.message = message;
            this.show = function() { /* ... */ }
        };
    }
})(FOO.namespace("FOO.Navigation.Sidebar.Tooltip")); 
```

然后你可以调用`hello`Tooltip 上的方法：

```
// Invoke a static method.
FOO.Navigation.Sidebar.Tooltip.hello();​

// Create a new ToolTip instance.
var myToolTip = FOO.Navigation.Sidebar.Tooltip.create("Hello World");
myToolTip.show(); 
```

如果要创建分层类结构，则可能需要考虑常见的 JavaScript 库之一，例如[Backbone.js](http://blog.usefunnel.com/2011/03/js-inheritance-with-backbone/)

# php - 传递的数组丢失除第一个元素外的所有元素

> ID：10026198
> 
> 赞同：8
> 
> 时间：2012-04-05T09:38:08.493
> 
> 标签：php, arrays, post, get

我有一个奇怪的问题。我最近将我的应用程序从本地 xampp 安装迁移到 SUSE Enterprise Server 11，一切正常，但这件事让我抓狂，我找不到解决方案。

使用以下语法通过 GET 或 POST 传递数组时：

```
search_dggs.php?latmin[]=52.447529&latmin[]=22&lonmin=17.56&lonmax=22.16 
```

我只得到 latmin 的第一个元素。请注意，这只是我在其他需要传递数组的地方发生错误后尝试的一个简单示例。

```
print_r($_SERVER["QUERY_STRING"]); 
```

输出

```
latmin[]=52.447529&latmin[]=22&lonmin=17.56&lonmax=22.16 
```

但

```
print_r($_GET); 
```

给

```
Array
(
    [latmin] => Array
        (
            [0] => 52.447529
        )

    [lonmin] => 17.56
    [lonmax] => 22.16
) 
```

所有 POST 请求都发生完全相同的情况。

我正在使用 PHP 版本 5.3.8。我想问题是一些服务器配置，但我找不到关于这个问题的任何信息。

回复评论：

如果我提交任意数量的变量，也会发生同样的情况。

```
parse_str($_SERVER["QUERY_STRING"]);
print_r($latmin); 
```

给

```
Array
(
    [0] => 52.447529
) 
```

php.ini 可以在[这里找到](http://dl.dropbox.com/u/10723601/php.ini)

[您应该能够在此处](http://awst.ipf.tuwien.ac.at/test.php?latmin%5B%5D=52.447529&latmin%5B%5D=22&lonmin=23&lonmax=22.16)看到实际行为

这个php文件的源文件是

```
<?php

    $test="latmin[]=52.447529&latmin[]=22&lonmin=23&lonmax=22.16";
    parse_str($test);
    print_r($latmin);
    phpinfo();

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:48:55.167

好吧，我的系统管理员进行了系统更新并重新启动，现在问题已解决。没有更改任何配置文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T17:26:23.357

在我的服务器上测试过，对我来说效果很好：

```
_GET["latmin"]  

Array
(
    [0] => 52.447529
    [1] => 22
) 
```

查看数据处理部分中的 php.ini 并查看值是什么。将所有内容重置为默认值，重新启动网络服务器并重试。 [PHP.ini 数据处理默认值](http://us2.php.net/manual/en/ini.core.php#ini.sect.data-handling)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T08:21:22.283

每次甚至没有传递变量时，[链接](http://awst.ipf.tuwien.ac.at/test.php)上的一个示例都会打印出来。`Array ( [0] => 52.447529 )`因此，似乎您在未与此代码链接的代码中遇到问题：`

```
$test="latmin[]=52.447529&latmin[]=22&lonmin=23&lonmax=22.16";
parse_str($test);
print_r($latmin);
phpinfo(); 
```

`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T18:03:10.007

尝试`$_REQUEST`代替`$_GET`和/或`$_POST`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T10:08:22.397

[嗯..也许它与那个严重的漏洞错误](http://thexploit.com/sec/critical-php-remote-vulnerability-introduced-in-fix-for-php-hashtable-collision-dos/)有某种关系？您的 XAMPP 是否具有与生产相同的 PHP 版本？我知道如果您发布太多数据（文件/帖子大小和参数数量），可能会出现类似问题。升级到 5.3.10 怎么样？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T23:58:10.317

此错误最可能的原因是有人在 php.ini 中将“max_input_vars”设置为 0 或 1。“max_input_vars”默认为 1000，可以在 php.ini 中覆盖。

我最近遇到了同样的行为，但原因不同——有人向后移植到 PHP 5.2 安装的安全补丁部分实现了“max_input_vars”，但遗漏了一些重要的部分。不同的原因，相同的结果。

相关的php源码可以在main/php_variables.c中找到。在 php 5.3.8 中，橡胶在 php_register_variable_ex 函数中出现了。

php 在解析诸如“foo=bar&asdf[]=1&asdf[]=2”之类的字符串时使用了一个 SAPI“treat_data”钩子——不同的 SAPI 可能有它自己的实现。

# javascript - 如果没有使用 jquery 或 ajax 的 Internet 连接，则会出现对话框

> ID：10026204
> 
> 赞同：8
> 
> 时间：2012-04-05T09:38:32.237
> 
> 标签：javascript, jquery, ajax, dialog, internet-connection

如果没有互联网连接，它将使用对话框显示一些错误消息，例如“没有互联网连接”而不使用 java。我需要使用 jquery 或 ajax 脚本警报显示...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T09:45:46.943

在您的 JQuery ajax 调用中，您可以使用以下内容，然后查询错误的状态代码。请注意，如果它们处于脱机状态，则状态码将为 0，但您也可以查询其他状态码（请参阅下面的列表）：

```
$.ajax({
    //your ajax options
    error: function(statusCode, errorThrown) {
        if (statusCode.status == 0) {
            alert("you're offline");
        }
    }
}); 
```

您还可以参考以下状态代码列表：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=40132](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=40132)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:49:14.730

```
function isOnline() {
    var online = navigator.onLine;    // Detecting the internet connection
    if(online) {
       // do your stuff
    } else {
       alert('You\'re Offline now...');
    }
} 
```

# permissions - JasperServer 默认角色权限

> ID：10026206
> 
> 赞同：1
> 
> 时间：2012-04-05T09:38:41.277
> 
> 标签：permissions, jasper-reports, roles, jasperserver

在网上搜索后，这是我的“最后手段”;-)

我用映射到 ROLE_USER 的用户设置了 JaserServer。我遇到的问题是这些用户可能会做各种各样的事情。

**我的设置：安装了****JasperServer 4.1**的 Virtualbox Windows XP SP3 。

如果您以管理员用户身份登录并右键单击文件夹并选择添加资源，他们需要能够执行您可以执行的所有操作。

我找不到可以**更改某些角色的默认文件夹权限**的页面。我已经查看了**WEB-INF**文件夹，但无法弄清楚要更改什么以及要留下什么......

欢迎任何帮助！

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:24:52.183

您将需要编辑文件 WEB-INF/actionModel-search.xml。每个菜单项都由一个`<option />`标签表示，它们被包装在`<condition>`标签中以确定您是否可以看到它们。如果条件标签的 test 属性是 checkAuthenticationRoles，那么 testArgs 属性的值将决定哪些角色可以看到这些选项。如果您想要多个角色，请用逗号分隔它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T13:10:05.693

**这是解决方案。随意使用它 ;-）**

**问题**

我面临的问题是一个巨大的问题。在我正在处理的一个项目中，我们被问到是否可以将 JasperServer 默认角色权限更改到可以告诉我们 JasperServer 上的某些客户可以添加管理员可以添加的所有资源的程度。在无休止地搜索网络之后，我们正要放弃，但突然我们得到了一个提示。这个提示是成功的。查看 Stackoverflow 上的上述帖子。

**解决方案**

解决方案是需要更改/更改 JasperServer XML 文件。我已经在搜索所有 XML 文件的过程中，但是找到正确的文件被证明是一个挑战。您需要更改的 XML 文件位于 JasperServer 安装目录的 WEB-INF 文件夹中。在我的机器上是这个：

```
C:\Program Files\jasperreports-server-cp-4.5.0-2\apache-tomcat\webapps\jasperserver\WEB-INF 
```

你需要的文件是这个：`actionModel-search.xml`

**警告**：不要忘记先备份原始文件。如果事情进展顺利，您不想重新开始！

**说明**

首先，安装 JasperServer。我仅在 JasperServer 的社区版本上对此进行了测试。所以我想如果这适用于社区版本，它也适用于付费支持的版本。安装后转到您的 JasperReports 主页并使用以下凭据登录：

```
URL: http://localhost:8080/jasperserver
User: jasperadmin
Password: jasperadmin 
```

*请注意，这只是虚拟机上的测试设置。如果您打算在生产服务器上执行此操作，请出于安全原因更改 jasperadmin 用户的密码。*

登录后立即创建一个新用户。1\. 点击“管理” 2\. 点击“用户” 3\. 点击“添加用户” 给一个用户名 b. 输入密码 4\. 点击“添加用户”</p>

现在用户已创建，您可以继续创建新角色。为此，请按照下列步骤操作：

1.  点击“管理”</li>
2.  点击“角色”</li>
3.  点击“添加角色”</li>
4.  填写角色名称
5.  点击“添加角色”</li>

记下新创建的角色名称，因为这是我们将用来“破解”XML 以满足我们需要的角色。

要将用户添加到角色，请执行以下操作：

1.  点击刚刚创建的角色
2.  点击“编辑”</li>
3.  选择需要新角色的用户。
4.  点击“保存”。

您需要做的下一件事是授予角色对该文件夹的读+写+删除权限。

1.  右键单击一个文件夹
2.  点击“权限”</li>
3.  选择需要此访问权限的角色旁边的读取 + 写入 + 删除

现在您已准备就绪，可以“破解”XML 文件了。

打开 actionModel-search.xml 文件。 ***不要忘记先复制文件！***

在 xml 文件的开头查找如下所示的代码行。

```
 <condition test="checkAuthenticationRoles" testArgs="ROLE_USER,ROLE_ADMINISTRATOR"> 
```

这是您需要更改的第一行。将您的角色添加到 testArgs 部分。确保所有角色都用逗号分隔。

```
 <condition test="checkAuthenticationRoles"> testArgs="ROLE_USER,ROLE_ADMINISTRATOR**,USER_RESOURCES**"> 
```

在下一个条件行进行相同的更改。保存文件。要使更改生效，您需要重新启动 JasperServer。在 Windows 系统上，您可以访问

*   停止：所有程序 => JasperReports 服务器 ... => 启动或停止服务 => 停止服务
*   启动：所有程序 => JasperReports 服务器 ... => 启动或停止服务 => 启动服务

现在使用您创建的用户登录并右键单击具有正确权限的文件夹。现在您可以添加管理员可以添加的所有资源。

如果您愿意，您可以使用 XML 文件来进一步改变行为。例如：您有一个禁止添加 jasper 报告的图像的客户端。在这种情况下，您可以更改 XML，如下所示。

围绕此代码进行条件测试：

```
<option labelKey="resourceTypes.image" action="invokeCreate" actionArgs="FileResource@@img" className="up"/> 
```

看起来像这样的代码：

```
<condition test=checkAuthenticationRoles” testArgs=”ROLE_ADMINISTRATOR”&gt;
<option labelKey="resourceTypes.image" action="invokeCreate" actionArgs="FileResource@@img" className="up"/></condition> 
```

这样，只有管理员才能将图像添加到文件夹中。瞧，您已经准备好开始使用您的 JasperReports Server 副本了。

**玩得开心！**

# python - 在横向模式下使用 xhtml2pdf 生成 PDF

> ID：10026207
> 
> 赞同：2
> 
> 时间：2012-04-05T09:38:41.790
> 
> 标签：python, html2pdf, pisa

如何使用 xhtml2pdf 创建 3 col 横向布局？

我尝试过这样的事情，但没有奏效。我什至应该首先使用框架吗？

```
@page {
    size: a4 landscape;

    @frame left {
        -pdf-frame-content: left;
        -pdf-frame-border: 1;
        width: 9.9cm;
        text-align: left;
    }
    @frame middle {
        -pdf-frame-content: middle;
        -pdf-frame-border: 1;
        width: 9.9cm;
        text-align: left;
    }
    @frame right {
        -pdf-frame-content: left;
        -pdf-frame-border: 1;
        width: 9.9cm;
        text-align: left;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:27:08.170

我不认为它可以用 xhtml2pdf 来完成，即使它基于允许你这样做的 reportlab。

搞砸了一段时间后，下面的代码片段产生了下面的图像：http: [//imgur.com/d4zRH](http://imgur.com/d4zRH)

```
def badge(request):
    # Create the HttpResponse object with the appropriate PDF headers.
    response = HttpResponse(mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=somefilename.pdf'

    # Create the PDF object, using the StringIO object as its "file."
    pagesize = pagesizes.landscape(letter)
    pagewidth, pageheight = pagesize
    doc = platypus.BaseDocTemplate(filename=response, pagesize=pagesize,
            showBoundary=1)
    newHeight = doc.bottomMargin + doc.topMargin + doc.height
    newWidth = doc.leftMargin + doc.rightMargin + doc.width

    # reset margins
    doc.leftMargin = 0
    doc.bottomMargin = 0
    doc.rightMargin = 0
    doc.topMargin = 0

    # create the frames
    frames = []
    left_frame_1 = Frame(doc.leftMargin,
            doc.bottomMargin,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_1")
    left_frame_2 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_2")
    left_frame_3 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 2,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_3")
    left_frame_4 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 3,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_4")
    left_frame_5 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 4,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_5")
    left_frame_6 = Frame(doc.leftMargin,
            doc.bottomMargin + newHeight / 6 * 5,
            newWidth / 3,
            newHeight / 6,
            showBoundary=1,
            id="left_frame_6")
    mid_frame_1 = Frame(doc.leftMargin + newWidth / 3,
            doc.bottomMargin,
            newWidth / 3,
            newHeight / 6 * 4,
            showBoundary=1,
            id="mid_frame_1")
    mid_frame_2 = Frame(doc.leftMargin + newWidth / 3,
            doc.bottomMargin + newHeight / 6 * 4,
            newWidth / 3,
            newHeight / 6 * 2,
            showBoundary=1,
            id="mid_frame_2")
    right_frame_1 = Frame(doc.leftMargin + newWidth / 3 * 2,
            doc.bottomMargin,
            newWidth / 3,
            newHeight / 6 * 2,
            showBoundary=1,
            id="right_frame_1")
    right_frame_2 = Frame(doc.leftMargin + newWidth / 3 * 2,
            doc.bottomMargin + newHeight / 6 * 2,
            newWidth / 3,
            newHeight / 6 * 3,
            showBoundary=1,
            id="right_frame_2")
    right_frame_3 = Frame(doc.leftMargin + newWidth / 3 * 2,
            doc.bottomMargin + newHeight / 6 * 5,
            newWidth / 3,
            newHeight,
            showBoundary=1,
            id="right_frame_3")

    frames.append(left_frame_1)
    frames.append(left_frame_2)
    frames.append(left_frame_3)
    frames.append(left_frame_4)
    frames.append(left_frame_5)
    frames.append(left_frame_6)
    frames.append(mid_frame_1)
    frames.append(mid_frame_2)
    frames.append(right_frame_1)
    frames.append(right_frame_2)
    frames.append(right_frame_3)

    Elements = []

    styles = getSampleStyleSheet()

    # LEFT COL CONTENT
    Elements.append(Paragraph("LEFT1, " * 10,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph("LEFT2, " * 10,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph("LEFT3, " * 10,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph("LEFT4, " * 10,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph("LEFT5, " * 10,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph("LEFT6, " * 10,
        styles['Normal']))
    Elements.append(FrameBreak())

    # MID COL CONTENT
    Elements.append(Paragraph("MID_2, " * 20,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph('''
    <para><b>NOTE</b><br />
    (1) Please check the registration handy kit to ensure you have received
    the item(s) as marked on the cover. <br />
    (2) The official receipt(s) for the payments you have made are enclosed.
    Please check to ensure that it was issued correctly. <br />
    (3) You will be requested to present the appropriate coupon(s)/ ticket (s)
    for admission to lunch, banquet or other events. <br />
    (4) The organizer nor its appointed Professional Conference Organiser shall
    not be responsible for any loss or damage to this kit <br />
    </para>
    ''', styles['Normal']))
    Elements.append(FrameBreak())

    # RIGHT COL CONTENT
    Elements.append(Paragraph("RIGHT_1 " * 30,
        styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph('''
    <para><b><font size="16">REGISTRATION Handy Kit</font></b> <br />
    This kit contains the checked items: <br />
    [] Namebadge <br />
    [] Official Receipt(s) <br />
    [] Lunch Coupon(s) <br />
    [] Banquet Ticket & Reply Slip <br />
    [] Others: <br />
    _________________________________
    _________________________________
    _________________________________
    _________________________________
    <br />
    <br />
    <br /> 
    <i>If any of the checked items are missing in your kit, please inform the
    registration counter staff</i>
    </para>
    ''', styles['Normal']))
    Elements.append(FrameBreak())
    Elements.append(Paragraph("RIGHT_3, " * 10,
        styles['Normal']))

    doc.addPageTemplates(platypus.PageTemplate(id="TwoCol", frames=frames))
    doc.build(Elements)

    return response 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-02T19:15:57.697

xhtml2pdf 现在支持横向，只需添加此样式即可。

```
<style>
@page {
    size: letter landscape;
    margin: 2cm;
}
</style> 
```

[来源](https://xhtml2pdf.readthedocs.io/en/latest/format_html.html)

# visual-studio-2010 - 如何通过互联网更新文本文件？VB.Net

> ID：10026214
> 
> 赞同：0
> 
> 时间：2012-04-05T09:38:58.950
> 
> 标签：visual-studio-2010, windows-forms-designer, vb.net-2010

我有 AntiVirus ，我想制作一个更新按钮来更新包含病毒列表的文本文件，它被称为 (viruslist.txt)。每次用户按下更新按钮开始从我的网站检查是否有新的病毒列表，然后用新的更新它...

在这种情况下你能帮我吗，实际上我听过一次点击但我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:23:12.240

我找到了解决方案：

```
Dim update As String = Application.StartupPath & "/aaa.txt"
If File.Exists("aaa.txt") Then
    My.Computer.FileSystem.DeleteFile("aaa.txt")
    Me.Refresh()
    My.Computer.Network.DownloadFile("http://test.com/aaa.txt", update)
ElseIf Not File.Exists("aaa.txt") Then
    My.Computer.Network.DownloadFile("http://test.com/aaa.txt", update)
End If 
```

# .net - 从 Web 服务 URL 中删除 .asmx 扩 展名

> ID：10026216
> 
> 赞同：2
> 
> 时间：2012-04-05T09:39:03.413
> 
> 标签：.net, web-services, asmx

我编写了一个 ASP.NET Web 服务。Web 服务通过 HTTP GET 使用。我希望 URL 不包含 .asmx 扩​​展名。现在，URL 看起来像[http://localhost:1200/Service1.asmx](http://localhost:1200/Service1.asmx) 我希望它是[http://localhost:1200/Service1](http://localhost:1200/Service1)。

我尝试在 IIS 7.5 中创建处理程序映射，但都是徒劳的。有没有人有关于如何做到这一点的分步指南？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-05T09:42:15.147

我觉得与其创建您的处理程序，不如阅读下面提到的文章并开始在 .NET 中创建 REST 服务。

[http://msdn.microsoft.com/en-us/magazine/dd315413.aspx](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)

[http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)

[http://msdn.microsoft.com/en-us/netframework/cc950529](http://msdn.microsoft.com/en-us/netframework/cc950529)

# node.js - 如何将 qxoo 定义的类与 nodejs 一起使用？

> ID：10026218
> 
> 赞同：0
> 
> 时间：2012-04-05T09:39:07.477
> 
> 标签：node.js, qooxdoo

```
var qx = require('qooxdoo');
var t= new T(4080);
var t= new qx.T(4080);
// none of them are defined :s 
```

我有我的主文件 run.js，然后是一个带有类的文件 T.js：

```
qx.Class.define("T", {
    extend : qx.core.Object,

    constructor: function(port){
        debugger;
        var self = this;
        this.port = port;
        this.server = http.createServer(function(req, res){
            self.onRequest.apply(self, arguments);
        });
        server.listen(port);
    },

    members : {
        onRequest: function(req, res){
            debugger;
            util.log('requested!');
        }
    }
 }); 
```

我错过了什么？

[http://manual.qooxdoo.org/1.6/pages/server/overview.html](http://manual.qooxdoo.org/1.6/pages/server/overview.html) 这里他们没有说如何使用其他文件，只在同一个文件中..所以我真的不知道该怎么做..

非常感谢任何帮助，谢谢（：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:51:33.783

您缺少运行 T.js 文件的部分（通过要求它）。例如这样的工作：

应用程序.js：

```
var qx = require('qooxdoo');
require('./class-t'); // Run the file that creates the class.

var t = new T();
t.foo(); // logs "T#foo called" 
```

类-t.js：

```
var qx = require('qooxdoo');

qx.Class.define('T', {
  extend: qx.core.Object,

  members: {
    foo: function () {
      console.log('T#foo called');
    }
  }
}); 
```

# c++ - 是否可以从基类调用派生类函数

> ID：10026220
> 
> 赞同：1
> 
> 时间：2012-04-05T09:39:10.403
> 
> 标签：c++, inheritance, constructor, virtual-functions

我需要澄清调用方法，我有一个基类，我尝试使用派生类对象调用派生类函数。可能吗

请告诉我在这个 senario 中我的代码有什么问题

```
#include "stdafx.h"
#include <malloc.h>

class derived;

class base
{
public:
    base()
    {

    }
    ~base()
    {
    }

    void setdptr(derived* dptr)
    {
        m_dptr = dptr;
        dptr->sayHello();
    }

    virtual void addfunc()
    {

        printf("base class add");
    }

    derived *m_dptr;

};

class derived : public base
{
public:
    derived()
    {
    }
    ~derived ()
    {
    }

    void addfunc()
    {
        printf("derived class add");
    }

    void sayHello()
    {
            printf("Say Hello");
    }

    void setDeriveToBase()
    {
       setdptr(this);
    }

};

int _tmain(int argc, _TCHAR* argv[])
{
    derived dp;
    dp.setDeriveToBase();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:44:54.570

在 class 的`setdptr`函数中`base`，您还没有`derived`定义完整的类，所以编译器还不知道有哪些成员`derived`。

将实际*定义*移到`setdptr`声明之后`derived`，它应该可以工作。

像这样的东西：

```
class derived;

class base
{
    // ....

    void setdptr(derived* dptr);

    // ....
};

class derived : public base
{
    // ....
};

void base::setdptr(derived* dptr)
{
    m_dptr = dptr;
    dptr->sayHello();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:41:46.027

有什么问题是

```
void setdptr(derived* dptr)
{
    m_dptr = dptr;
    dptr->sayHello();
} 
```

是非法的。你只提供了一个前向声明`derived`，所以你不能使用它的任何方法，因为编译器对这个类一无所知，除了它存在。

您需要将声明与实现分开，将实现移动到`cpp`文件中，并包含在该文件中定义的标头`derived`。

**但是从基类调用派生方法是一种代码味道，您不需要这样做**。

# emacs - 永久启用所有禁用的命令

> ID：10026221
> 
> 赞同：7
> 
> 时间：2012-04-05T09:39:13.273
> 
> 标签：emacs

我想在 Emacs 中启用所有禁用的命令，例如`downcase-region`- 也就是说，当调用它们时，它们不会要求用户确认。不幸的是，Emacs 手册的“48.3.11 禁用命令”部分没有说明*永久启用**所有*禁用的命令。

 *Emacs 版本：24.0.95.1

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T09:56:13.463

正如[EmacsWiki](http://emacswiki.org/emacs/DisabledCommands)中所写，您可以添加`(setq disabled-command-function nil)`到您的 init 文件中，以启用所有禁用的命令：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T09:54:23.230

将这样的 elisp 复制到您的`~/.emacs`：

```
(put 'set-goal-column 'disabled nil)
(put 'narrow-to-region 'disabled nil)
(put 'upcase-region 'disabled nil)
(put 'downcase-region 'disabled nil)
(put 'scroll-left 'disabled nil)
(put 'erase-buffer 'disabled nil) 
```*

# jquery - 从 URL 中删除哈希

> ID：10026223
> 
> 赞同：4
> 
> 时间：2012-04-05T09:39:17.677
> 
> 标签：jquery, browser, cross-browser

`window.location.hash=''`使用在 Firefox 中重新加载的页面从 URL 中删除哈希后。

**编辑**

例子：

`wwww.Mysite.come/#page=1`

单击按钮，我将使用以下代码删除哈希值

`window.location.hash=''`

删除哈希页面后，将在 Firefox 中重新加载。

我不想重新加载页面我只想从 URL 中删除哈希

如何解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-23T16:54:06.607

以防万一其他人仍在寻找解决方案。页面加载时试试这个。

```
history.pushState("", document.title, window.location.pathname); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:54:48.737

来自[https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)：

> 例子
> 
> 每当修改位置对象的属性时，将使用 URL 加载文档，就像使用修改后的 URL 调用 window.location.assign() 一样。

我认为这个问题解决了你想要使用 jQuery 的问题：

[在jQuery中更改哈希而不重新加载](https://stackoverflow.com/questions/1939041/change-hash-without-reload-in-jquery)

其他相关问题：

[更改浏览器中的 URL 而不使用 JavaScript 加载新页面](https://stackoverflow.com/questions/136458/change-the-url-in-the-browser-without-loading-the-new-page-using-javascript)

[如何在不刷新页面的情况下使用 JavaScript 从 window.location 中删除哈希？](https://stackoverflow.com/questions/1397329/how-to-remove-the-hash-from-window-location-with-javascript-without-page-refresh)

[如何在不创建页面重新加载的情况下更改 Firefox window.location.hash？](https://stackoverflow.com/questions/6312518/how-can-i-change-firefox-window-location-hash-without-creating-a-page-reload)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-15T09:33:37.037

如果我理解正确，

```
<a href="#someElementID" id="myLinkName">Some Text</a> 
```

在浏览器中单击上面的链接通常会在地址栏中添加一个哈希，例如*www.websitename.com#someElementID* <- 这就是您要**防止**的，是吗？

我刚刚测试的有效且不刷新页面的解决方案是：

```
event.preventDefault(); 
```

这适用于“click()”事件，该事件涉及链接到元素 id 的锚标记，例如上面的锚标记示例。实际上，它在您的“click()”事件中看起来像这样：

```
<script>
    $('#myLinkName').click(function(){
        event.preventDefault();
        //the rest of the function is the same.
    });
</script> 
```

现在，单击相同的链接会在地址栏留下相同的 URL www.websitename.com，而不会通过单击锚点添加散列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-27T08:51:06.740

我们可以通过在 click 函数中返回 false 来删除/逃避附加哈希。

```
<script>
    $('#add_user').click(function(){       
     //your custom function code here..
    return false;
});
</script>

<a id="add_user" href="#">Add Card</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T00:13:18.527

您会发现[w3schools](https://www.w3schools.com/howto/howto_css_smooth_scroll.asp#section2)的这个示例对您的需要非常有用，而且它为您提供了与所有浏览器兼容的优雅滚动移动，请查看以下代码：

```
 // Add smooth scrolling to all links
  $("a").on('click', function(event) {

// Make sure this.hash has a value before overriding default behavior
if (this.hash !== "") {

    // Prevent default anchor click behavior
    event.preventDefault();

    // Store hash
    var hash = this.hash;

    // Using jQuery's animate() method to add smooth page scroll
    // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area

      $('html, body').animate({
          scrollTop: $(hash).offset().top
       }, 800, function(){

      // Add hash (#) to URL when done scrolling (default click behavior)
      // obvously you will ignore this step because you want to remove the hash in first place - but just in case you want turn it on again

      window.location.hash = hash;
    });
   } // End if
  });
}); 
```

# internationalization - 更改 Products.Five 的 i18n_domain 注册页面

> ID：10026225
> 
> 赞同：0
> 
> 时间：2012-04-05T09:39:26.153
> 
> 标签：internationalization, zope, zope3, zcml

Products.Five (manage_interfaces) 中的一个模板似乎有一个糟糕的 i18n 标记，使得接口名称可翻译。i18n 域未定义，因此使用全局域。

我想更改该页面的 i18n 域，但我不知道如何从我的包中执行此操作。该页面是使用浏览器注册的：页面五指令

```
<browser:page
    for="*"
    name="manage_interfaces"
    template="manage_interfaces.pt"
    class="Products.Five.utilities.browser.marker.EditView"
    permission="zope2.ManageProperties"
    /> 
```

我试过[http://www.mesimian.com/zope-changeing-i18n-domain-for-any-view/](http://www.mesimian.com/zope-changing-i18n-domain-for-any-view/)但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:31:07.357

首先，提交错误报告；上游开发人员可能想知道这一点。

使用[z3c.jbot](http://pypi.python.org/pypi/z3c.jbot)覆盖您自己包中的模板。创建一个`templates`子目录，注册它并将一个名为的文件`Products.Five.utilities.browser.manage_interfaces.pt`放在该子目录中。该文件将用于替换原始模板。

目录的注册`z3c.jbot`很简单，阅读 PyPI 页面上的说明。

# r - R中的png（）函数无法创建尺寸大于3000x3000px的png文件

> ID：10026227
> 
> 赞同：4
> 
> 时间：2012-04-05T09:39:34.607
> 
> 标签：r, png, ggplot2

我试图使用`ggplot`and生成一些地图`sp`，我有一个原始`3000+ x 3000+`像素大小的底图，我也有一些`2000+ x 2000+`像素。有趣的是，直到现在我仍然无法创建`3000+ x 3000+`像素 png 文件，因为 R 给了我以下错误：

```
Error in png(chart.filename, width = basemap.xlength, height = basemap.ylength,  : 
  unable to start png() device
In addition: Warning messages:
1: In png(chart.filename, width = basemap.xlength, height = basemap.ylength,  :
  Unable to allocate bitmap
2: In png(chart.filename, width = basemap.xlength, height = basemap.ylength,  :
  opening device failed 
```

这是对 R 的限制吗？我怎么能度过难关？谢谢。

我正在使用带有 R 2.15.0 的 Win7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:22:15.440

`Unable to allocate bitmap`建议您有内存问题，所以我会尝试较小的分配，提供有关您的系统的详细信息和一些可重现的代码。

您所描述的内容对我有用-尽管我不建议实际运行它，因为它会创建一个非常浪费的文件：

```
png("a.png", width = 3000, height = 3000)
image(matrix(rnorm(3000*3000), 3000), useRaster = TRUE)
dev.off() 
```

# ios - 有没有办法自动删除通过 iOS 应用程序拍摄的照片？

> ID：10026230
> 
> 赞同：1
> 
> 时间：2012-04-05T09:39:46.093
> 
> 标签：ios, camera, photo, delete-file

我们正在构建一个将使用相机的应用程序，但不希望在应用程序使用图像后保留在库/相机胶卷中拍摄的图像。

目的是为银行贷款申请表拍照，出于隐私考虑，我们不希望在用户设备上永久记录该申请表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:19:21.567

1/ 在您不需要文件时立即删除文件（或者当您的应用程序完成或发送到后台时 - 取决于您的用户案例）。

2/ 将其保存到临时文件中。如果步骤 1 失败，该文件仍将被删除。

3/ 加密文件（iOS 有加密 API）。如果您在应用程序重新启动时不需要访问该文件，请不要将密钥保存在任何地方。如果需要，请将其保存到钥匙串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:56:10.683

您不必将其保存到相册。如果您需要临时保存它，只需在应用程序文档文件夹中进行操作，然后随时删除即可。

另一方面，您不能（也不应该）在没有用户交互的情况下从相册中删除照片。

# jquery - 移动 jquery-ui-draggable 框时的指南

> ID：10026234
> 
> 赞同：16
> 
> 时间：2012-04-05T09:40:15.250
> 
> 标签：jquery, user-interface, jquery-ui, jquery-ui-draggable

我正在研究如何在移动框时显示指南，就像在 Google Docs Drawing 中一样。在开始编写自己的代码之前，我更喜欢开源代码或任何类型的指南。

1.  我不需要跨多个浏览器窗口拖放，所以我不需要 HTML5 拖放。
2.  我也在使用 jquery-ui-draggable 作为盒子。

![在此处输入图像描述](../Images/8766a717ddf39fb51442f0ae1a59cd1e.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-20T13:14:14.383

jquery ui 已经内置了这个，请看这个演示：http: [//jqueryui.com/demos/draggable/#snap-to](http://jqueryui.com/demos/draggable/#snap-to)

如果你坚持指导方针，你可能不得不分叉 jqueryui 或查看源代码，看看你是否可以扩展它。

* * *

或者，您可以在 jQuery ui 之上添加自己的捕捉功能，我已经玩过一段时间了，虽然它看起来并不有趣，但至少它似乎也不是很难。

您可以查看 jsfiddle 上的示例：http: [//jsfiddle.net/x7uMh/103/](http://jsfiddle.net/x7uMh/103/) **更新：这可行 ~ jQuery 1.9 + jQueryUI 1.9。它打破了最新的jquery + ui。**懒得去看看到底是什么问题，但通常只是小问题。以防万一该站点出现故障，这是代码：

css

```
body{
    font-family: courier new, courier; 
    font-size: 12px; 
}

.draggable{
    border: 1px solid #ccc; 
    display: inline-block; 
    cursor: move;
    position: absolute;         
}

.guide{
    display: none; 
    position: absolute; 
    left: 0; 
    top: 0; 
}

#guide-h{
    border-top: 1px dashed #55f; 
    width: 100%; 
}

#guide-v{
    border-left: 1px dashed #55f; 
    height: 100%; 
}
​ 
```

html

```
<div class="draggable">drag me!</div>
<div class="draggable">you can drag me too, if you like</div>
<div class="draggable">hep hep</div>

<div id="guide-h" class="guide"></div>
<div id="guide-v" class="guide"></div>
​ 
```

javascript（确保包含 jquery + jquery ui）

```
var MIN_DISTANCE = 10; // minimum distance to "snap" to a guide
var guides = []; // no guides available ... 
var innerOffsetX, innerOffsetY; // we'll use those during drag ... 

$( ".draggable" ).draggable({
    start: function( event, ui ) {
        guides = $.map( $( ".draggable" ).not( this ), computeGuidesForElement );
        innerOffsetX = event.originalEvent.offsetX;
        innerOffsetY = event.originalEvent.offsetY;
    }, 
    drag: function( event, ui ){
        // iterate all guides, remember the closest h and v guides
        var guideV, guideH, distV = MIN_DISTANCE+1, distH = MIN_DISTANCE+1, offsetV, offsetH; 
        var chosenGuides = { top: { dist: MIN_DISTANCE+1 }, left: { dist: MIN_DISTANCE+1 } }; 
        var $t = $(this); 
        var pos = { top: event.originalEvent.pageY - innerOffsetY, left: event.originalEvent.pageX - innerOffsetX }; 
        var w = $t.outerWidth() - 1; 
        var h = $t.outerHeight() - 1; 
        var elemGuides = computeGuidesForElement( null, pos, w, h ); 
        $.each( guides, function( i, guide ){
            $.each( elemGuides, function( i, elemGuide ){
                if( guide.type == elemGuide.type ){
                    var prop = guide.type == "h"? "top":"left"; 
                    var d = Math.abs( elemGuide[prop] - guide[prop] ); 
                    if( d < chosenGuides[prop].dist ){
                        chosenGuides[prop].dist = d; 
                        chosenGuides[prop].offset = elemGuide[prop] - pos[prop]; 
                        chosenGuides[prop].guide = guide; 
                    }
                }
            } ); 
        } );

        if( chosenGuides.top.dist <= MIN_DISTANCE ){
            $( "#guide-h" ).css( "top", chosenGuides.top.guide.top ).show(); 
            ui.position.top = chosenGuides.top.guide.top - chosenGuides.top.offset;
        }
        else{
            $( "#guide-h" ).hide(); 
            ui.position.top = pos.top; 
        }

        if( chosenGuides.left.dist <= MIN_DISTANCE ){
            $( "#guide-v" ).css( "left", chosenGuides.left.guide.left ).show(); 
            ui.position.left = chosenGuides.left.guide.left - chosenGuides.left.offset; 
        }
        else{
            $( "#guide-v" ).hide(); 
            ui.position.left = pos.left; 
        }
    }, 
    stop: function( event, ui ){
        $( "#guide-v, #guide-h" ).hide(); 
    }
});

function computeGuidesForElement( elem, pos, w, h ){
    if( elem != null ){
        var $t = $(elem); 
        pos = $t.offset(); 
        w = $t.outerWidth() - 1; 
        h = $t.outerHeight() - 1; 
    }

    return [
        { type: "h", left: pos.left, top: pos.top }, 
        { type: "h", left: pos.left, top: pos.top + h }, 
        { type: "v", left: pos.left, top: pos.top }, 
        { type: "v", left: pos.left + w, top: pos.top },
        // you can add _any_ other guides here as well (e.g. a guide 10 pixels to the left of an element)
        { type: "h", left: pos.left, top: pos.top + h/2 },
        { type: "v", left: pos.left + w/2, top: pos.top } 
    ]; 
}

​ 
```

希望对您有所帮助，最好的，汉斯。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T15:56:29.313

我创建了一个简单的示例，在可拖动框旁边只有边框线。当我们拖动盒子时它会显示出来。[在此处查看演示](http://jsfiddle.net/jnickz/Pw8n9/5/)

HTML：

```
<div id="canvas">
    <div id="box">
        <span class="topline"></span>
        <span class="rightline"></span>
        <span class="botline"></span>
        <span class="leftline"></span>
    </div>
</div> 
```

CSS：

```
#canvas {width: 1000px;height: 800px;}
.topline{
    position:absolute;
    width: 1000%;
    border-top:1px red dotted;
    display:none;
    vertical-align::middle;
    margin-top:-7px;
    margin-left:-250%;
}
.botline{
    position:absolute;
    width: 1000%;
    bottom:-2px;
    border-bottom:1px red dotted;
    display:none;
    vertical-align::middle;
    margin-top:500px;
    margin-left:-250%;
}
.leftline{
    position:absolute;
    height: 1000%;
    left:-2px;
    border-left:1px red dotted;
    display:none;
    vertical-align::middle;
    margin-top:-250%;

}
.rightline{
    position:absolute;
    height: 1000%;
    right:-2px;
    border-right:1px red dotted;
    display:none;
    vertical-align::middle;
    margin-top:-250%;

}
#box {
    cursor: move;
    border:1px solid black;
    width:150px;
    height:100px;
    min-width:80px;
    min-height:80px;
    padding:5px;
    background-color:#1196c1;

} 
```

JavaScript：

```
$(function() {
    $("#box").draggable({
        containment: "#canvas",
        drag: function() {
            $(this).find($('.topline')).css('display', 'block');
            $(this).find($('.rightline')).css('display', 'block');
            $(this).find($('.botline')).css('display', 'block');
            $(this).find($('.leftline')).css('display', 'block');
        },
        start: function() {
            $(this).find($('.topline')).css('display', 'block');
            $(this).find($('.rightline')).css('display', 'block');
            $(this).find($('.botline')).css('display', 'block');
            $(this).find($('.leftline')).css('display', 'block');
        },
        stop: function() {
            $(this).find($('.topline')).css('display', 'none');
            $(this).find($('.rightline')).css('display', 'none');
            $(this).find($('.botline')).css('display', 'none');
            $(this).find($('.leftline')).css('display', 'none');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T06:10:34.570

对于那些仍在尝试找到这样做的方法的人，我创建了一个小提琴

我使用**snap**和 $(this).data('draggable').snapElements;

```
drag: function(event, ui) 
        { 
            //var snapped = $(this).data('ui-draggable').snapElements; //## for new version of jquery UI
            var snapped = $(this).data('draggable').snapElements;
            /* Pull out only the snap targets that are "snapping": */
            var snappedTo = $.map(snapped, function(element) {
                //return element.snapping ? element.item : null;
                return element.snapping ? element : null;
            });
            if((snappedTo[0].left + snappedTo[0].width) == $(this).offset().left)
            {
                console.log('right of snapped item');
                $('#guide-v').css({'left': $(this).offset().left}).show();
            }else
            if((snappedTo[0].left)  == $(this).offset().left)
            {
                console.log('left  of snapped item');
                $('#guide-v').css({'left': $(this).offset().left}).show();
            }else $('#guide-v').hide();

            if((snappedTo[0].top)  == $(this).offset().top)
            {
                console.log('top  of snapped item');
                $('#guide-h').css({'top': $(this).offset().top}).show();
            }else
            if((snappedTo[0].top + snappedTo[0].height)  == $(this).offset().top)
            {
                console.log('bottom  of snapped item');
                $('#guide-h').css({'top': $(this).offset().top}).show();
            }else $('#guide-h').hide();
          }
      }); 
```

[http://jsfiddle.net/j6zqN/1/](http://jsfiddle.net/j6zqN/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-06T14:53:51.627

我从这个问题中得到了答案：[Javascript drag/drop - Illustrator style 'smart guides'](https://stackoverflow.com/questions/20075009/javascript-drag-drop-illustrator-style-smart-guides/39899176#39899176)

我认为这就是正在寻找的东西。我还通过支持同一侧的线路来改进它。这是 JsFiddle：http: [//jsfiddle.net/yusrilmaulidanraji/A6CpP/120/](http://jsfiddle.net/yusrilmaulidanraji/A6CpP/120/)

HTML

```
<div id="parent">
    <div class="object1 dropped" style="left:0px;top:300px;background:#a00;"></div>
    <div class="object2 dropped"></div>
    <div class="object3 dropped" style="left:400px;top:20px;"></div>
    <div class="objectx"></div>
    <div class="objecty"></div>
</div> 
```

CSS：

```
#parent{
    width:600px;
    height:500px;
    border:1px solid #000;
    position:relative;
}
.object1{
    background:#aaa;
    width:100px;
    height:100px;
    display:block;
    position:absolute;
    left:140px;
    top:50px;
}
.object2{
    background:#aaa;
    width:100px;
    height:150px;
    display:block;
    position:absolute;
    left:140px;
    top:50px;
}
.object3{
    background:#aaa;
    width:150px;
    height:100px;
    display:block;
    position:absolute;
    left:140px;
    top:50px;
}
.objectx{
    display:none;
    //background:#fff;
    width:0px;
    height:100%;
    position:absolute;
    top:0px;
    left:10px;
    border-left: 1px solid yellow;
}
.objecty{
    display:none;
    //background:#fff;
    width:100%;
    height:0px;
    position:absolute;
    top:10px;
    left:0px;
    border-bottom: 1px solid yellow;
} 
```

JS：

```
$.ui.plugin.add("draggable", "smartguides", {
    start: function(event, ui) {
        var i = $(this).data("draggable"), o = i.options;
        i.elements = [];
        $(o.smartguides.constructor != String ? ( o.smartguides.items || ':data(draggable)' ) : o.smartguides).each(function() {
            var $t = $(this); var $o = $t.offset();
            if(this != i.element[0]) i.elements.push({
                item: this,
                width: $t.outerWidth(), height: $t.outerHeight(),
                top: $o.top, left: $o.left
            });
        });
    },
    stop: function(event, ui) {
        $(".objectx").css({"display":"none"});
        $(".objecty").css({"display":"none"});
    },
    drag: function(event, ui) {
        var inst = $(this).data("draggable"), o = inst.options;
        var d = o.tolerance;
        $(".objectx").css({"display":"none"});
        $(".objecty").css({"display":"none"});
            var x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
                y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height,
                xc = (x1 + x2) / 2, yc = (y1 + y2) / 2;
            for (var i = inst.elements.length - 1; i >= 0; i--){
                var l = inst.elements[i].left, r = l + inst.elements[i].width,
                    t = inst.elements[i].top, b = t + inst.elements[i].height,
                    hc = (l + r) / 2, vc = (t + b) / 2;
                     var lss = Math.abs(l - x1) <= d;
                            var ls = Math.abs(l - x2) <= d;
                            var rss = Math.abs(r - x2) <= d;
                            var rs = Math.abs(r - x1) <= d;
                            var tss = Math.abs(t - y1) <= d;
                            var ts = Math.abs(t - y2) <= d;
                            var bss = Math.abs(b - y2) <= d;
                            var bs = Math.abs(b - y1) <= d;
                            var hs = Math.abs(hc - xc) <= d;
                            var vs = Math.abs(vc - yc) <= d; 
                        if(lss) {
                            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l }).left - inst.margins.left;
                            $(".objectx").css({"left":ui.position.left,"display":"block"});
                        }
                        if(rss) {
                            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;
                            $(".objectx").css({"left":ui.position.left + ui.helper.width(),"display":"block"});
                        }
                        if(ls) {
                            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;
                            $(".objectx").css({"left":ui.position.left + ui.helper.width(),"display":"block"});
                        }
                        if(rs) {
                            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: r }).left - inst.margins.left;
                            $(".objectx").css({"left":ui.position.left,"display":"block"});
                        }
                        if(tss) {
                            ui.position.top = inst._convertPositionTo("relative", { top: t, left: 0 }).top - inst.margins.top;
                            $(".objecty").css({"top":ui.position.top,"display":"block"});
                        }
                        if(ts) {
                            ui.position.top = inst._convertPositionTo("relative", { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;
                            $(".objecty").css({"top":ui.position.top + ui.helper.height(),"display":"block"});
                        }
                        if(bss) {
                            ui.position.top = inst._convertPositionTo("relative", { top: b-inst.helperProportions.height, left: 0 }).top - inst.margins.top;
                            $(".objecty").css({"top":ui.position.top + ui.helper.height(),"display":"block"});
                        }
                        if(bs) {
                            ui.position.top = inst._convertPositionTo("relative", { top: b, left: 0 }).top - inst.margins.top;
                            $(".objecty").css({"top":ui.position.top,"display":"block"});
                        }
                        if(hs) {
                            ui.position.left = inst._convertPositionTo("relative", { top: 0, left: hc - inst.helperProportions.width/2 }).left - inst.margins.left;
                            $(".objectx").css({"left":ui.position.left + (ui.helper.width()/2),"display":"block"});
                        }
                        if(vs) {
                            ui.position.top = inst._convertPositionTo("relative", { top: vc - inst.helperProportions.height/2, left: 0 }).top - inst.margins.top;
                            $(".objecty").css({"top":ui.position.top + (ui.helper.height()/2),"display":"block"});
                        }

            };
        }
});
$('.dropped').draggable({
    containment: 'parent',
    smartguides:".dropped",
    tolerance:5
}); 
```

# objective-c - iphone游戏的cocos2d自定义本地化系统

> ID：10026242
> 
> 赞同：0
> 
> 时间：2012-04-05T09:41:07.187
> 
> 标签：objective-c, localization, cocos2d-iphone, localizable.strings

我正在为我的游戏使用[自定义本地化系统](http://aggressive-mediocrity.blogspot.com/2010/03/custom-localization-system-for-your.html?showComment=1333617868985#c5083869952868402149)；在那个教程中，他在自定义方法中添加了标签，但我的文本标签是在 init 中添加的

教程示例：

```
- (void) setHelloWorldLabel
{
    // create and initialize a Label
    CCLabel* label = [CCLabel labelWithString:AMLocalizedString(@"hello",@"Hello World") fontName:@"Marker Felt" fontSize:32];

    // ask director the the window size
    CGSize size = [[CCDirector sharedDirector] winSize];

    // position the label on the center of the screen
    label.position =  ccp( size.width /2 , size.height/2 );

    //Check if it's already been added to the layer.
    if ([self getChildByTag:50])
        [self removeChildByTag:50 cleanup:YES];

    // add the label as a child to this Layer
    [self addChild:label z:0 tag:50];
} 
```

设置语言

```
-(void) menuCallbackEN: (id) sender
{
    LocalizationSetLanguage(@"English");
    [self setHelloWorldLabel];
} 
```

如何处理多个文本标签？

一些代码示例会帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:15:43.387

您可以添加另一个可以在 init 和语言更改事件上调用的方法。此方法应如下所示：

```
- (void)initLocalizableLables
{
    // Remove old labels
    for (NSInteger i=[children_ count]-1; i>=0; i--)
    {
        CCNode *c = [children_ objectAtIndex:i];

        if ([c isKindOfClass:[CCLabel class]])
        {
            [c removeFromParentAndCleanup:YES];
        }
    }

    // Add labels with localization    
    CCLabel* label = [CCLabel labelWithString:AMLocalizedString(@"hello",@"Hello World") fontName:@"Marker Felt" fontSize:32];
    ...
    [self addChild:label z:0 tag:50];
}

- (void)init
{
    ...
    [self initLocalizableLables]; // add localized labels
    ...
}

- (void)languageDidChange
{
    [self initLocalizableLables]; // remove old localized labels and add new
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:01:00.703

一种解决方案是给每个标签一个不同`tag`的，使用标签作为键和字符串作为值来创建字典。然后，遍历字典中的每个键（标签）并使用它来检索每个键`CCLabel`（通过`getChildByTag:`）。最后，调用`setString:`每个`CCLabel`来更新新本地化的字符串。

# vba - 在 Word 2010 中自动格式化表格

> ID：10026244
> 
> 赞同：1
> 
> 时间：2012-04-05T09:41:23.127
> 
> 标签：vba, ms-word

我已经设置了一个数据库视图。当用户将视图中的数据导入 Word 2010 时，其格式与在数据库中的格式相同，如下所示：

```
-------------------------------------------------------------
|workorder  |customer  |performed activity                  |
-------------------------------------------------------------
|12345      |Client foo|activity foo                        |
|67890      |Client bar|activity bar                        |
------------------------------------------------------------- 
```

但我希望它像这样显示：

```
-------------------------------------------------------------
client name:        Client foo
workorder:          12345
performed activity: activity foo
-------------------------------------------------------------

-------------------------------------------------------------
client name:        Client bar
workorder:          6789
performed activity: activity bar
------------------------------------------------------------- 
```

我需要以编程方式为每一行执行某个动作序列。每次制作文档时行数都不同。字段的数量及其位置始终相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:23:32.773

使用将自定义表格样式设置为默认值的 Word 模板。在该文档中手动或以编程方式创建的任何表格都将获得所需的格式。

1.  做一张桌子（不管多大）。
2.  在表格内单击，您将看到 2 个与表格相关的选项卡出现在 Word 顶部工具栏中。
3.  单击名为“设计”的选项卡。
4.  单击右下箭头放大默认表格样式下拉菜单。
5.  单击下拉列表底部的“新表格样式...”。
6.  为您的新表格样式起一个合适的名称。
7.  单击左下角的“格式”，然后选择“边框和底纹”。
8.  根据需要设置边界。在您的情况下：单击预览左侧的 3 个图标中的每一个。
9.  在“边框和底纹”中按确定，然后按确定“新表格样式...”。
10.  您的表格样式出现在顶部工具栏中的边框样式中。
11.  右键单击新创建的边框样式并选择“设置为默认值”。
12.  将文档另存为 Word 模板 (.dotx)。
13.  将 Word 模板集成到您的宏中。

我希望这有帮助。

*在 Microsoft Office Word 2007 上执行

# java - 无法提交申请

> ID：10026248
> 
> 赞同：6
> 
> 时间：2012-04-05T09:41:43.843
> 
> 标签：java, ios, xcode, app-store, submit

过去两天我非常努力地直接从 XCode 向 Apple 提交我们的 App 更新。存档始终经过验证，但提交过程随后停止，并在 XCode Organizer 中显示错误消息

```
an error occoured uploading to the iTunes Store 
```

我在特定的 Mac 上打开了控制台应用程序，但有一个错误告诉我有关错误 java 版本的信息：

```
05.04.12 11:29:52,557 Xcode:  Error:
Java 1.5, 1.6, or 1.7 is required. Currently, java is the default java version. Please     upgrade.
05.04.12 11:29:52,558 Xcode:  Out:
05.04.12 11:31:16,776 Xcode:  Error:
05.04.12 11:31:16,777 Xcode:  Out: 
```

我不敢相信这应该是问题所在，因为两天前，我可以毫无问题地将应用程序二进制文件提交到这台 Mac 上的商店。

在终端启动`java -version`输出：

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-413-11M3623)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-413, mixed mode) 
```

我记得最近几天苹果公司进行了一次 JAVA 更新。

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T12:22:16.043

这是一个已知的错误！Apple 通过 Apple Software Updater 安装最新的 JAVA 更新后，无法将二进制文件上传到应用商店。有一种解决方法是在终端中输入以下命令来创建符号链接：

```
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5

sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0 
```

之后无需重新启动 Xcode 或重新启动整个 Mac。设置符号链接后，您可以立即将二进制文件上传到商店，并且应用程序加载器也可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T07:47:34.710

更新`Java for OS X 2012-002`（今天发布）解决了这个问题。

在更新之前，缺少符号链接：

```
$ ls /System/Library/Frameworks/JavaVM.framework/Versions/
1.6     1.6.0       A       Current     CurrentJDK 
```

更新后：

```
$ ls /System/Library/Frameworks/JavaVM.framework/Versions/
1.4     1.4.2       1.5     1.5.0       1.6     1.6.0       A       Current     CurrentJDK 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T22:59:24.707

Oracle Java 1.7 再次破坏了上传程序。我在用着;

```
OSX 10.7.4
Xcode 4.4.1 
```

并得到同样的错误。我将其报告为 ADC 上的一个错误，并因此得到承认。两种修复方法：

1.  鉴于最近 1.7 的安全问题，请从您的系统中删除该 jvm（卸载）并回退到 Apple 最新的 1.6.35 补丁。
2.  如果您需要 1.7，那么您可以在上传时暂时关闭它，然后通过执行以下操作重新启用（或不启用）:)：应用程序 > 实用程序 > Java 首选项并取消选中 Java 的 Oracle 版本 (1.7.0_04)。

# java - 如何在android中访问消息收件箱

> ID：10026251
> 
> 赞同：0
> 
> 时间：2012-04-05T09:41:48.370
> 
> 标签：java, android, message, inbox

当用户在 android 中打开消息收件箱时，如何激活我的应用程序。我可以从我的应用程序中打开收件箱。我需要一个副词，在打开消息时打开我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:53:09.890

我从来没有这样做过，但我想你可以做一个后台进程来定期检查（虽然不是太频繁;））未读消息的状态。当用户阅读消息时，您会显示通知。

```
final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
Cursor c = getContentResolver().query(SMS_INBOX, null, "read = 0", null, null);
int unreadMessagesCount = c.getCount();
c.deactivate(); 
```

# forms - Post to data: url — 有用例吗？

> ID：10026252
> 
> 赞同：2
> 
> 时间：2012-04-05T09:41:49.767
> 
> 标签：forms, html, url

在当前的 HTML5 规范中，可以使用数据方案将表单*POST*到操作：

[http://www.w3.org/TR/2011/WD-html5-20110525/association-of-controls-and-forms.html#form-submission-algorithm](http://www.w3.org/TR/2011/WD-html5-20110525/association-of-controls-and-forms.html#form-submission-algorithm)

它基本上将表单数据嵌入到 action 属性的占位符中并导航到结果数据：url。

在上面链接的规范描述的表单提交算法中，它是第 17 步。

我了解算法的工作原理。不过，我想知道这个工具在 Web 应用程序中是否有任何用例。是否有任何有意义的资源可以以这种方式创建（并且没有更简单的方法来完成它们）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:33:30.683

此功能允许调试浏览器如何在不使用服务器的情况下处理表单。如果我对给定表单的编码有困难，我认为这将特别有趣。用数据 URI 替换实际的应用程序 URL 将允许您查看将通过`POST`.

也就是说，我想知道这个功能是否在任何地方实现。

至于在应用程序中的使用，有更灵活的方式来生成数据 URL。如果一个页面要提取替换的表单数据，解析它，然后用它做一些事情，这可能会很方便，但是数据 URI 中额外的间接级别似乎没有必要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T05:33:47.470

我已经在 HTML5 绘图应用程序中看到了这个。Doob 先生的 Harmony 就是一个很好的例子： http: [//mrdoob.com/projects/harmony/](http://mrdoob.com/projects/harmony/)

你点击保存，然后你会被带到一个 data:url ，这是你的图像从该 url 呈现为 png。

# android - FragmentActivity 与使用 FragmentTransaction 管理 Fragment？

> ID：10026253
> 
> 赞同：2
> 
> 时间：2012-04-05T09:41:50.367
> 
> 标签：android, fragment, android-fragmentactivity

在网上找到的许多教程`Fragment`（比如[这个](http://android-developers.blogspot.com.es/2011/02/android-30-fragments-api.html)）使用`FragmentActivity`. 它似乎是静态的使用方式`Fragment`，而不是动态的方式使用在正常的容器中`FragmentTransaction`加载s 。`Fragment``Activity`

我正在使用 API 12，`FragmentActivity`但不存在（在 中`android.support.v4.app`）。

所以如果我不使用Android支持包，我只能`Fragment`动态管理，对吧？为什么`FragmentActivity`消失了？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T11:37:07.183

> 这似乎是使用 Fragment 的静态方式，而不是使用 FragmentTransaction 在正常 Activity 的容器中加载 Fragment 的动态方式。

那是完全错误的。

`FragmentActivity`用于 Android 支持包，如果您希望使用 API 级别 11 之前的片段。静态（`<fragment>`在布局中）和动态（`FragmentTransaction`）片段都受`FragmentActivity`和支持`Activity`（后者仅在 API 级别 11 和更高级别） .

> 我正在使用 API 12 并且 FragmentActivity 不存在（它在 android.support.v4.app 中）。

将 Android 支持包添加到您的项目中。例如，在 Eclipse 中，右键单击项目，从上下文菜单中选择 Android Tools > Add Support package。

> 所以如果我不使用Android支持包，我只能动态管理Fragment，对吧？

`Activity`不，您可以在 API 级别 11 上使用静态或动态片段。

> 为什么 FragmentActivity 消失了？

它并没有消失。为了便于使用，他们将 Android 支持包 JavaDocs 集成到主 JavaDocs 中。每当您在包中看到一个类时`android.support`，您就知道它来自 Android 支持包。

# iphone - 如何在 UILabel 中显示文本在 iphone 中是安全的

> ID：10026255
> 
> 赞同：4
> 
> 时间：2012-04-05T09:42:04.933
> 
> 标签：iphone, objective-c

我`UILabel`用于显示我选择的年份值`UIPickerView`。我希望年份字段是安全的。在`UITextfield`我们将使用`setSecureTextEntry`时，我们有什么类似的`UILabel`吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:57:28.637

我不确定我是否真的理解您的问题，但假设您想在标签中显示星号代替文本，只需获取您通常显示的字符串的长度并用星号替换字符：

```
NSString *myPickerValue = @"MyPickerValue";
self.myLabel.text = [@"" stringByPaddingToLength: [myPickerValue length] withString: @"*" startingAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T09:57:29.760

为什么不直接在其中显示带有*******的 UILabel呢？我不明白当您控制显示的内容时，为什么需要制作“安全”标签。

# ruby-on-rails - has_many 的奇怪关联错误：通过关联

> ID：10026266
> 
> 赞同：3
> 
> 时间：2012-04-05T09:42:32.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**//////// 更新**

这是我提交表单作为更新时开发日志的输出

> LogoCategory Load (0.3ms) SELECT `logo_categories`.* FROM `logo_categories`INNER JOIN `logos`ON `logo_categories`。`id`= `logos`。内部`logo_category_id`加入。= 。在哪里。= 61`logos_posts``logos``id``logos_posts``logo_id``logos_posts``post_id`

//////////////

如果您有一个像下面这样的应用程序设置，有没有人知道他们为什么会收到这样的错误......我在任何地方都找不到任何信息。

**ActiveRecord::HasManyThroughNestedAssociationsAreReadonly in PostsController#update**

> 无法修改关联“Post#logo_categories”，因为它通过多个其他关联。

*post.rb*

```
has_and_belongs_to_many :logos
has_many :logo_categories, :through => :logos 
```

徽标.rb

```
 belongs_to :logo_category
  has_and_belongs_to_many :posts 
```

logo_category.rb

```
has_many :logos
has_and_belongs_to_many :posts 
```

我的桌子是……

> 帖子 (id) , 徽标 (id), logos_posts (id, logo_id, logo_category_id), logo_categories (id)

仅当我编辑帖子记录并选中或取消选中 logo_category 复选框时尝试保存帖子模型的 _form 时出现错误。

欢迎任何想法！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:29:04.393

尝试：

post.rb

```
has_and_belongs_to_many :logos 
```

徽标.rb

```
has_and_belongs_to_many :posts 
```

**编辑**：

您的“logo_categories”迁移如下所示：

```
 create_table :logo_categories do |t|
    t.references :logo
    t.references :post
    t.timestamps
  end 
```

查看链接，它将帮助您使用 HABTM：

[http://asciicasts.com/episodes/17-habtm-checkboxes](http://asciicasts.com/episodes/17-habtm-checkboxes)

[http://ramblings.gibberishcode.net/archives/rails-has-and-belongs-to-many-habtm-demystified/17](http://ramblings.gibberishcode.net/archives/rails-has-and-belongs-to-many-habtm-demystified/17)

# iphone - iPhone中的tableview单元格选择

> ID：10026267
> 
> 赞同：0
> 
> 时间：2012-04-05T09:42:33.547
> 
> 标签：iphone, ios, uitableview

当我向上和向下滚动表格视图时，我得到表格视图单元格未被选中。我应该如何在代码中使用以下方法？

```
[tableview selectRowAtIndexPath:animated:scrollPosition]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:53:41.037

我应该如何在代码中使用以下方法？

```
[tableview selectRowAtIndexPath:animated:scrollPosition]; 
```

*示例*：在 tableview 上添加一个新单元格并向上滚动表格以添加添加的单元格：

```
NSArray *indexPaths = [NSArray arrayWithObjects: [NSIndexPath indexPathForRow:[self.yourDataSource count]-1 inSection:0],nil];
[self.myTableView beginUpdates];
[self.myTableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationTop];
[self.myTableView endUpdates];
[self.myTableView scrollToRowAtIndexPath:indexPaths atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

# android - 关于 android 上的 USB 托管到 DSLR

> ID：10026269
> 
> 赞同：1
> 
> 时间：2012-04-05T09:42:43.267
> 
> 标签：android, usb

如果我想创建一个可以连接到相机的应用程序，我可以和你们核实一下吗？例如控制相机拍照，通过 OTG usb 在 2 个设备之间连接我是否需要为相机编写驱动程序之类的东西电话以便他们交流？如果需要的话，你能推荐我一些软件或方法吗？还是有任何指南或文件？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:47:04.157

您需要一个带有驱动程序的程序，该程序可以识别相机，就像计算机上的网络摄像头一样。我认为相同的概念。只是在手机上有点限制，但我确信这是可能的。它很可能需要扎根您的设计。

# javascript - 如何将文本框插入按钮对话框区域

> ID：10026270
> 
> 赞同：0
> 
> 时间：2012-04-05T09:42:47.817
> 
> 标签：javascript, jquery, asp.net-mvc-3, dialog

我有一个聊天，它有一个看起来像这样的对话框窗口：

![在此处输入图像描述](../Images/509ef769e6759a4dfdb48cbf1d6672c2.png)

基本上我想将文本框移动到按钮区域。

```
 divnodecopy = document.getElementById(div_node);
             $(divnodecopy).dialogr({
                    autoOpen:true,
                     maximized: true,
                    minimized: true,
                    buttons: { 
                   "Send": {
                       text: 'Send', 
                       click: function () {
                                        alert("here");
                                        // do stuff
                                    }
                       }
                   }, 
                      });
  document.getElementById(div_node).appendChild(element1);
// element1 - input text i want to move in dialogr 
```

我到处寻找解决方案，但没有什么可以帮助我。在此先感谢！

编辑：添加创建 div

```
 var div = document.createElement("div");
                    div.setAttribute("id", "1");

                    var element = document.createElement("input");
                     element.setAttribute("type", "text");
                     element.setAttribute("value", "");
                     element.setAttribute("id", "textReceived");
                     div.appendChild(element);

                    var element1 = document.createElement("input");
                     element1.setAttribute("type", "text");
                     element1.setAttribute("value", "");
                     element1.setAttribute("id", "textSend:");
                    document.body.appendChild(div);
                    divnodecopy = document.getElementById(div_node); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:38:48.767

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="css/ui-lightness/jquery-ui-1.8.6.custom.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.dialogr.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.6.custom.min.js"></script>
    <script type="text/javascript" src="js/ui.dialogr.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            createChatDialogerBox(1, 'Thulasi Ram.S');

            function createChatDialogerBox(fromUserId, fromUserName) {
                if ($('#chatDialogerBox' + fromUserId).length === 0) {

                    var divnodecopy = $('<div id="chatDialogerBox' + fromUserId + '" class="chatDialogerBox"></div>').append('<input />', { 'type': 'text', 'value': '', 'id': 'textReceived', 'class': 'messageReceived' });

                    $(divnodecopy).dialogr({
                        autoOpen: true, maximized: true, minimized: true,
                        title: fromUserName,
                        buttons: {
                            "Send": {
                                text: 'Send',
                                click: function () {
                                    alert("here");
                                    // do stuff
                                }
                            }
                        }
                    });

                    //$('#chatDialogerBox' + fromUserId).parents('.ui-dialog').find('.ui-dialog-buttonpane')
                    //.append('<input />', { 'type': 'text', 'value': '', 'id': 'textSend' });

                    //Or

                    $('#chatDialogerBox' + fromUserId).parents('.ui-dialog').find('.ui-dialog-buttonpane')
                    .prepend('<input />', { 'type': 'text', 'value': '', 'id': 'textSend', 'class': 'messageSend' });
                }
            };
        });
    </script>
    <style type="text/css">
        .messageSend
        {
            margin-right: 20px;
        }
    </style>
</head>
<body>
</body>
</html> 
```

# c++ - 将“m_Mutex”声明为引用但未初始化错误

> ID：10026286
> 
> 赞同：5
> 
> 时间：2012-04-05T09:44:01.020
> 
> 标签：c++, linux, pthreads, mutex

我正在尝试在我的单吨类静态函数之一上实现互斥锁。但收到此错误：

```
$error:‘m_Mutex’ declared as reference but not initialized
$warning:warning: unused variable ‘m_Mutex’ 
```

这是我的代码片段。

========Commondefines.h===========

```
/**
*@class LockBlock
*This class is used to provide Mutex Lock on thread.
*/
class LockBlock
{
    public:
        LockBlock(pthread_mutex_t *mutex)
        {
            lockMutex = mutex;
            pthread_mutex_lock(lockMutex);
        };

        ~LockBlock()
        {
            pthread_mutex_unlock(lockMutex);
            lockMutex = NULL;
        }

    private:
        pthread_mutex_t *lockMutex;
}; 
```

========MutexImplenation.h======

```
#include "CommonDefines.h"

class MutexImplementation
{

  private:
     static pthread_mutex_t m_Mutex ;

  public:
     static void commonFunction();

}; 
```

====MutexImplementation.cpp==========

```
// Initialize static member of class.
pthread_mutex_t MutexImplentation::m_Mutex = PTHREAD_MUTEX_INITIALIZER;

void commonFunction()
{
   LockBlock(&m_Mutex); // Here I am getting this error.

} 
```

任何帮助将不胜感激。谢谢，尤维

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T09:53:21.773

这确实是“最尴尬的解析”问题的变体。`m_Mutex`除了作为 的成员之外， 您还没有在任何地方定义 a `MutexImplementation`，因此在 之外`MutexImplementation`，它的名称是 `MutexImplementation::m_Mutex`（并且由于它是私有的，因此您不能合法地访问它）。当你写：

```
LockBlock (&m_Mutex); 
```

，编译器找不到`m_Mutex`，因此假设您正在定义一个局部变量。括号是合法的，但没有作用，声明同：

```
LockBlock& m_Mutex; 
```

对`LockBlock`和 的引用只有在它们被初始化时才能被定义。

如果你想要一个局部变量，你必须给它一个名字。如果你希望它初始化为`m_Mutex`，你必须`m_Mutex`公开，并指定类名：

```
LockBlock& localRefToMutex( &MutexImplementation::m_Mutex ); 
```

例如。

# php - 教义 - 递归保存不适用于教义

> ID：10026287
> 
> 赞同：0
> 
> 时间：2012-04-05T09:44:02.013
> 
> 标签：php, doctrine, doctrine-orm, kohana

我对教义有疑问。我有一个包含文件夹和文件的文件管理器。

现在我想将组保存到目录或单个文件中。对于单个项目，它可以工作。

但是，如果我想递归保存组权限，它将无法正常工作。Doctrine 不会抛出错误或异常。但它不会保存对子目录和子目录中的文件的更改。

这是我的模型：

[http://pastebin.com/nK6MqiiS](http://pastebin.com/nK6MqiiS)

模型 Model_File_Item 和 Model_File_Dir 都扩展了这个模型。一切正常，直到方法“setGroupsRecursive（）”想要将组保存到目录或文件。

我已经在文件中写了日志.. 一切都很好，每个项目都将被保存，但更改不会保存在数据库中，我不知道为什么。

编辑：组定义如下所示：

Model_File_Dir & Model_File_Item：

```
/**
 * Owning Side
 *
 * @ManyToMany(targetEntity="Model_Group", inversedBy="dirs")
 * @JoinTable(name="dir_groups",
 *      joinColumns={@JoinColumn(name="dir_id", referencedColumnName="id")},
 *      inverseJoinColumns={@JoinColumn(name="group_id", referencedColumnName="id")}
 *      )
 */
protected $groups; 
```

Model_Group 看起来像这样：

```
/**
 * @ManyToMany(targetEntity="Model_File_Dir", mappedBy="groups")
 */
protected $dirs;

/**
 * @ManyToMany(targetEntity="Model_File_Item", mappedBy="groups")
 */
protected $files; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:47:26.550

我认为您需要为此进行[级联操作](http://readthedocs.org/docs/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)。[明智地考虑使用此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/best-practices.html#use-cascades-judiciously)和[此处](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/best-practices.html#constrain-relationships-as-much-as-possible)描述的双向关系（尤其是使用级联操作）。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:54:32.180

要使用原则将某些内容保存在数据库中，您需要使用 entitymanager 刷新它。还要记住，在关系中，您需要刷新关系的拥有方，否则更改将被忽略。

[核实！](http://readthedocs.org/docs/doctrine-orm/en/2.0.x/reference/association-mapping.html)

# struts2 - struts 2字段错误值不显示

> ID：10026288
> 
> 赞同：2
> 
> 时间：2012-04-05T09:44:04.203
> 
> 标签：struts2, struts-validation

我有覆盖验证方法并使用添加错误 `addFieldError("test", "test print");`

并在jsp中使用 `<s:fielderror />`

但错误未显示在 input.jsp 中。

我的jsp内容类型也是 `<%@ page contentType="text/html; charset=UTF-8"%>`

我的 struts.xml 就像

```
 <action name="test" class="ListInfo">
                 <result>/input.jsp</result>
            </action>

    <action name="Proceed" class="Details">
    <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="execAndWait">
                <param name="delay">100</param>
            </interceptor-ref>
           <result name="wait">Wait.jsp</result>
        <result name="success">/Summary.jsp</result>
        <result name="input" type="chain">test</result>
        <result name="failure" type="chain">test</result>
    </action> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:10:24.700

结果发现错误（字段和操作不会跨链维护。

以下证明了这一点（假设 struts2-conventions-plugin-VERSION）：

动作 foo 总是链接到动作栏（所以我们只需要动作栏的视图）

**行动富**

```
package com.quaternion.action;

import com.opensymphony.xwork2.ActionSupport;
import org.apache.struts2.convention.annotation.Result;

/** #1 SOMETHING WILL BE ADDED HERE TO FIX THE ISSUE**/

@Result(name="input", type="chain", location="bar")
public class Foo extends ActionSupport{
    private String name;

    @Override
    public void validate(){
        super.addActionError("Just an action error");
        super.addFieldError("name", "Name is all ways wrong... for no good reason.");
    }

    public String getName(){
        return name;
    }

    public void setName(String name){
        this.name = name;
    }
} 
```

**操作栏**

```
package com.quaternion.action;

import com.opensymphony.xwork2.ActionSupport;

/** #2 SOMETHING WILL BE ADDED HERE TO FIX THE ISSUE**/

public class Bar extends ActionSupport{  
} 
```

**查看栏**：/WEB-INF/content/bar.jsp

```
<%@taglib prefix="s" uri="/struts-tags"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <body>
        <h1>Action Bar</h1>
        <s:actionerror/>
        <s:fielderror name="name"/>
    </body>
</html> 
```

测试上述内容，我们发现错误中没有显示任何内容。

**为了解决这个问题**，我们使用了商店拦截器：[http ://struts.apache.org/2.0.14/struts2-core/apidocs/org/apache/struts2/interceptor/MessageStoreInterceptor.html](http://struts.apache.org/2.0.14/struts2-core/apidocs/org/apache/struts2/interceptor/MessageStoreInterceptor.html)

In the first action (#1) we will need to add annotations and the imports to support them:

```
import org.apache.struts2.convention.annotation.InterceptorRef;
import org.apache.struts2.convention.annotation.InterceptorRefs;

@InterceptorRefs({
    @InterceptorRef(value = "store", params = {"operationMode","STORE"}),
    @InterceptorRef("defaultStack"),
}) 
```

In the second action (#2) we will need to add annotations and the imports to support them:

```
import org.apache.struts2.convention.annotation.InterceptorRef;
import org.apache.struts2.convention.annotation.InterceptorRefs;

@InterceptorRefs({
    @InterceptorRef(value = "store", params = {"operationMode","RETRIEVE"}),
    @InterceptorRef("defaultStack"),
}) 
```

And now it works.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T12:51:30.870

If you're going to use action chaining anyway (which IMO is almost never required, almost never a good idea, and almost always leads to unintended coupling between actions), use what the [chaining interceptor](http://struts.apache.org/2.x/docs/chaining-interceptor.html) already provides and avoid configuring something besides "chain".

As per the docs:

*   `struts.xwork.chaining.copyErrors` - set to true to copy Action Errors
*   `struts.xwork.chaining.copyFieldErrors` - set to true to copy Field Errors
*   `struts.xwork.chaining.copyMessages` - set to true to copy Action Messages

# android - 在 android 4.x 及更高版本中以编程方式打开/关闭 gps

> ID：10026292
> 
> 赞同：2
> 
> 时间：2012-04-05T09:44:29.910
> 
> 标签：android

下面的代码在 android 版本 2.xx 中运行良好它成功地打开了设备中的 gps。但问题是它不适用于 android 版本 4.x 及更高版本。

**我希望在 4.x 及以后的版本中以编程方式打开 gps。任何帮助或解决方案？**

```
 String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
        Utility.print("provider string " + provider);
        if (!provider.contains("gps")) { // if gps is disabled
            Utility.print("gps is disabled now enabled");
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3"));
            sendBroadcast(poke);
            Utility.print("gps is disabled now enabled 1");
        } else {
            Utility.print("gps is already enabled");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:52:03.117

第三方应用程序不应更改受保护的系统设置。我想这是一个为 android 4.0 修复的错误 - 可能是这个：

[http://code.google.com/p/android/issues/detail?id=7890](http://code.google.com/p/android/issues/detail?id=7890)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:56:59.603

从代码：

```
 <receiver android:name=".widget.SettingsAppWidgetProvider" android:label="@string/gadget_title"> 
```

及以上的android 4.0变成这样：

```
 <receiver android:name=".widget.SettingsAppWidgetProvider"
            android:label="@string/gadget_title"
            android:exported="false"
            android:enabled="@bool/has_powercontrol_widget"> 
```

添加了`android:exported="false"`

> 内容提供者是否可以被其他应用程序的组件使用——如果可以，则为“true”，否则为“false”。如果为“false”，则提供程序仅可用于相同应用程序的组件或具有相同用户 ID 的应用程序。默认值是true”。

因此，您的应用程序在设置应用程序中没有一些 uid 和组件名称，所以它不起作用。

# regex - 我可以在正则表达式引擎 dk.brics.automaton 中使用 Unicode 吗？

> ID：10026301
> 
> 赞同：2
> 
> 时间：2012-04-05T09:45:44.063
> 
> 标签：regex, unicode, automaton

我想在我的正则表达式中使用 Unicode。

例如，RegExp="\u0061" 匹配“a”。但似乎 dk.brics.automaton 不支持这一点。结果匹配“u0061”。我还尝试了 RegExp="\u0061" 和 RegExp="\\u0061"。没有一个会起作用。

如果您对这个工具有任何经验，您能给我一些解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:00:11.650

最后，我找到了绕过这个问题的方法。

首先，我们可以在 Java 代码中使用 Unicode，但它必须单独创建。例如，`String str = "\u0061"+"b";`虽然`String str = "\u0061b";`不能很好地工作。

其次，如果我们想从文本文件中读取字符串，例如包含“ `\u0061b\u0063`”的 test.txt，我们必须（据我所知）手动将 Unicode 替换为相应的符号，因为它们是混合的。然后我们可以得到`String str`值“abc”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:15:07.193

*我在dk.brics.automaton*方面没有经验，但我想[FAQ](http://www.brics.dk/automaton/faq.html)和[RegExp Class 的 JavaDoc 中](http://www.brics.dk/automaton/doc/index.html?dk/brics/automaton/RegExp.html)都说了。

据我了解，您可以使用 unicode 字符，但您必须将它们表示为字符（“a”）而不是使用`\u0061`符号。

# android - android：如何重新启动以前已满的活动

> ID：10026303
> 
> 赞同：0
> 
> 时间：2012-04-05T09:45:58.673
> 
> 标签：android, singleton, lifecycle, android-activity

我有 2 个活动。一项活动通过 Web 服务询问外部数据库，并在另一项活动中显示结果。我想要的是，当我按下后退硬件键时，我应该回到第一个活动，当我做另一个请求时，第二个活动重新开始。这是我正在使用的 onBackPressed() 方法的代码，但它不起作用！我回到第一个正确的活动，但是当我做另一个请求时，第二个活动从我第一次离开的地方开始。例如，我在第二个活动的底部有页码，如果我从第 3 页按下后退硬件按钮并执行另一个请求，我的第二个活动将从第 3 页重新启动所有数据。我做错了什么。我是在 android 生命周期中做错了什么，还是（因为我使用单例类向 webservice/db 发出请求）我在使用单例时犯了错误？我认为我的错误更多是在生命周期的第一点。任何帮助，将不胜感激。谢谢！

```
@Override
    public void onBackPressed() {
        super.onBackPressed();
        finish();       
        Intent intent = new Intent(this, pluto.class);
        startActivity(intent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:55:32.307

android 中的默认 backpress 会从堆栈中删除当前活动并将前一个活动置于顶部。（这就是您要查找的内容）。

我不明白您为什么首先要覆盖它以及创建活动的新实例的原因

```
Intent intent = new Intent(this, pluto.class);     
startActivity(intent) 
```

尝试一起评论这个方法，看看它是否有效。

编辑 1

任务和回栈[链接](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:28:11.913

实际上，您在调用 onBackPressed() 方法中的另一个之前完成了当前活动。因此，如果您想完成您的工作，只需删除 finish(); 命令并在该活动的 onPause() 中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:05:39.117

如果您正在寻找一种方法来在您按下返回时重置第二个活动，您应该在 onBackPressed 方法中手动执行此操作。此外，在 Android 中使用 singelton 可能会有点混乱，因为您无法完全控制活动何时被销毁。你确定你需要使用它吗？Android 会自动进行状态保存。正如 Devastating 所说，您不需要在按下返回时手动启动活动一。

# objective-c - 如何计算两个浮点值的浮点提醒

> ID：10026313
> 
> 赞同：7
> 
> 时间：2012-04-05T09:46:49.007
> 
> 标签：objective-c, floating-point

我有两个浮点值， 'a' 和 'b' 。

我需要计算这两个浮点值的提醒，而且必须是浮点值。

让

```
float a = 1.1;
float b = 0.5; 
```

所以余数'r'应该是准确的值

即 r = a % b

r = 1.1 % 0.5

```
 0.5) 1.1 (2
       1.0
     ______

       0.1

  r = 0.1 
```

**但这会导致浮点值的错误操作数无效。**

怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T09:48:21.143

在 C 、 C++ 和 Objective-C 中，这将是[`fmod`](http://www.cplusplus.com/reference/clibrary/cmath/fmod/).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T09:51:55.393

使用**fmod()**

```
#include <math.h>
double x,y,z;
x = 1.1;
y = 0.5;
z = fmod(x,y) 
```

如果您在 linux/unix/mac-osx/ 上，请不要忘记 -lm liker 标志。

了解更多信息

```
$man fmod 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T09:56:32.123

试用

```
float x = (float)(1.1 % 0.5);
NSLog(@"%f",x); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T09:51:48.987

你申报了吗？

```
float r; 
```

你必须这样做才能进行任何计算

所以

```
float r;

float a = 1.1;
float b = 0.5;

r = a % b; 
```

# apache - 无法读取 PFPGrowth 的 mahout 输出

> ID：10026319
> 
> 赞同：0
> 
> 时间：2012-04-05T09:47:54.073
> 
> 标签：apache, hadoop, mahout, mahout-recommender

我在 hadoop 之上成功运行了 Apache mahout 的并行 FPgroth 算法。但是生成的输出文本文件不可读，如下所示

SEQorg.apache.hadoop.io.TextDorg.apache.mahout.fpm.pfpgrowth.convertors.string.TopKStringPatterns������3G9��y'����e������1����2� ����������1����������5�1������������4�1������������ 1�4227������������3�1������������1�3476����������t�1�1340������ ����h�1�5795���������N�1�2701���������K�1�3610���������@�1� 第2106章……

使用相同的输入文件运行 RecommenderJob 和 ItemSimilarityJob 会生成正确的输出文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:26:00.393

这些输出文件是序列文件，而不是文本文件。它们包含类型的键/值对`<Text, TopKStrinPatterns>`

您可以使用 fs shell 命令以及 -text 和 -libjars 让 hadoop 读取序列文件并输出这些对象的文本版本：

```
hadoop fs -libjars /path/to/mahout/lib.jar -text /path/to/hdfs/output/part* 
```

如果您希望这些文件是文本而不是序列，那么您需要修改运行作业的驱动程序，并将作业更改为使用`TextOutputFormat`，而不是`SequenceFileOutputFormat`：

```
// job.setOutputFormat(SequenceFileOutputFormat.class);
job.setOutputFormat(TextOutputFormat.class); 
```

# java - 为什么我们没有 Map.get(K key)

> ID：10026320
> 
> 赞同：1
> 
> 时间：2012-04-05T09:48:00.067
> 
> 标签：java

> **可能重复：**
> [为什么 Map.get(Object key) 不是（完全）通用](https://stackoverflow.com/questions/857420/what-are-the-reasons-why-map-getobject-key-is-not-fully-generic)
> [Java 泛型：为什么 Map.get() 忽略类型？](https://stackoverflow.com/questions/1455138/java-generics-why-does-map-get-ignore-type)

我们有什么理由没有

```
Map.get(K key) 
```

但是我们有

```
Map.get(Object key) 
```

是不是泛型版本会更好，这样我们就可以进行编译时检查了？

# multi-select - 带有复选框插件的 HTML5 多选下拉菜单。标准设计在一个好的多选插件看起来与标准下拉控件相同之后，我整天都在环顾四周。我尝试使用由 ehynds 创建的 jQuery UI MultiSelect Widget、dropdown-check-list 和由 A Beautiful Site 创建的 jQuery MultiSelect。这些是非常好的插件，但我真的很想使用一个与 html5 中的标准下拉菜单具有相同外观的插件。希望我有任何意义！祝你今天过得愉快！// 解决方案 http:

> ID：10026321
> 
> 赞同：16
> 
> 时间：2012-04-05T09:48:03.547
> 
> 标签：multi-select

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-20T10:53:18.400

引导多选 - [http://davidstutz.github.io/bootstrap-multiselect/](http://davidstutz.github.io/bootstrap-multiselect/)

在外观方面，您可能必须使用 CSS 来获得您想要的样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T07:34:24.777

因为很多人都在寻找我的问题的答案，所以我会展示一个好的脚本。我很喜欢： http: [//labs.abeautifulsite.net/archived/jquery-multiSelect/](http://labs.abeautifulsite.net/archived/jquery-multiSelect/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T10:22:34.320

[http://users.skavt.net/blaz/MultiSelect/demo.html](http://users.skavt.net/blaz/MultiSelect/demo.html)

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2016-10-13T14:34:08.043

我今天发现了一种更简单的方法，它允许用户在`<select>`元素中选择多个选项。[multiple 属性](http://www.w3schools.com/tags/att_select_multiple.asp)指定可以一次选择多个选项。

```
<select multiple>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
</select> 
```

# android - 那可能在android中选择多个单选按钮吗？

> ID：10026324
> 
> 赞同：6
> 
> 时间：2012-04-05T09:48:43.553
> 
> 标签：android, radio-button, radiobuttonlist

那可以一次选择多个单选按钮吗？就像支票簿一样。我必须在图中显示更多。

![在此处输入图像描述](../Images/534ea7a4ef0c8ecb75b3e771618860c8.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T09:52:42.513

如果你不把它们都放在一个`RadioGroup`那么是的。要么将它们分成几个组，要么完全自己管理它们。

但是，如果您使用行为类似于复选框的单选按钮，用户会感到困惑。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T09:50:36.803

维基百科中的单选按钮说

> 单选按钮或选项按钮是一种图形用户界面元素，它允许用户仅选择**一**组预定义选项中的一个。

您必须只使用复选框而不是单选按钮来允许选择多个选项，否则您正在做的事情在 UI 中本质上是错误的，无论是移动/网络。

:-)

# node.js - 使用 mercurial 推送 node.js 应用程序的部署

> ID：10026325
> 
> 赞同：1
> 
> 时间：2012-04-05T09:49:09.363
> 
> 标签：node.js, deployment, mercurial, express

我已经阅读了一些使用 Git 推送和挂钩自动部署 node.js/express 应用程序的示例。

例如，如此处所述：http: [//catchvar.com/nodejs-server-and-web-sockets-on-amazon-ec2-w](http://catchvar.com/nodejs-server-and-web-sockets-on-amazon-ec2-w)

这看起来是个好主意，但不幸的是我正在使用 Mercurial。

谁能指出我使用 mercurial 实现相同目标的正确方向？（和 SSH）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:33:20.787

Mercurial 不支持直接将工作目录与存储库分离，但出于您的目的，您可以使用类似`hg archive files ~/www`in a `changegroup` [hook](http://mercurial.selenic.com/wiki/Hook)的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:19:36.070

我认为这个问题有一个解决方案，即使有点棘手，它也可能接近你正在寻找的东西。否则，如果可以的话，我会很感激知道您是如何解决问题的？

[使用 Mercurial 在多台服务器上自动部署 Web](https://stackoverflow.com/questions/6348070/automated-web-deployment-on-multiple-servers-with-mercurial)

# php - PHP 使用带有正则表达式的 urldecode

> ID：10026335
> 
> 赞同：0
> 
> 时间：2012-04-05T09:49:45.903
> 
> 标签：php

我正在尝试使用这行代码来接受用 '%20' 替换空格的 URL 变量，但它也必须通过正则表达式

```
$type=urldecode(ereg_replace("[^a-zA-Z0-9%]+", "", @$_REQUEST['type'])); 
```

结果只是删除了 %20 而不是用空格替换，例如 JohnDoe 不是 John Doe，来自 John%20Doe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:55:44.973

您的订单错误并注意`ereg_replace`已折旧..`preg_replace`是更好的选择

尝试

```
 $type  = ereg_replace("[^a-zA-Z0-9%]+", "", urldecode(@$_REQUEST['type'])); 
```

更好的方法

```
$type = @$_REQUEST['type'] ; 
$type = urldecode($type);
$type = str_replace(" ","",$type) ; 
```

谢谢

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:52:50.127

如果您只是想用`%20`然后使用替换空间：

```
str_replace(" ", "%20", $_REQUEST['type']); 
```

这里不需要使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T09:55:21.743

`$type = str_replace("%20", "", @$_REQUEST["type"]);`应该可以工作，并将所有 %20 替换为“”。

# c++ - QFuture 在 result() 中抛出未处理的异常

> ID：10026339
> 
> 赞同：2
> 
> 时间：2012-04-05T09:50:09.967
> 
> 标签：c++, multithreading, qt, parallel-processing, qtconcurrent

我在一个方法中运行 3 个并行线程（加上当前线程）以并行化对 na 优化方法的调用。代码看起来像

```
 for(i=0;i<m+1;i++)
{ // run algorithms
    solverParallelData* parallelData = new solverParallelData(this); 

    for(j=0;j<m_ndim;j++) 
    {
        initPt[j] = initPts[i][j];
    }

    parallelData->runOptim(initPt);
    dataList.append(parallelData);
}

// retrieve results
solverParallelData *parallelDataRes;

try 
{
    for(int i = 0; i < dataList.size(); i++) 
    {
        parallelDataRes = dataList.at(i);

        int output = parallelDataRes->resultOptim();

              /*...*/
      } 
```

其中 resultOptim() 是 solverParallelData 中简单调用 QFuture result() 的方法。dataList 似乎已正确填写。然而，线

```
 int output = parallelDataRes->resultOptim(); 
```

给出了一个我无法识别的未处理异常。以前，我遇到了并发访问问题，并且在 QMutex 类中程序崩溃。现在我猜来源不同，但我无法弄清楚出了什么问题。

谢谢并恭祝安康。

# java - 在 mongoDB 中存储来自 twitter 的 api 的 json 文件

> ID：10026342
> 
> 赞同：1
> 
> 时间：2012-04-05T09:50:25.853
> 
> 标签：java, python, json, twitter, bson

我正在使用带有 twitter 搜索 api 的 java 在 mongoDB 中存储推文，有没有办法按原样存储来自 twitter api 的 json？

我也在考虑使用python，有没有办法在python中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:06:05.080

我不知道你是否仍然对这个问题的答案感兴趣，但从一个纯粹的 Python 站来看，这就是我存储原始推文 json 的方式：

```
import tweetstream # Needed For Twitter API Capture (Make sure using modified version with proxy support)
import argparse    # Needed for taking cmd line input
import gzip        # Needed for compressing output
import json        # Needed for Data conversion for easier DB import
import ast         # Also Needed for Data conversion

collector = argparse.ArgumentParser(description='Collect a lot of Tweets')        # This line sets up the argument collector
collector.add_argument('--username', dest='username', action="store")             # This line collects the Username
collector.add_argument('--password', dest='password', action="store")             # This line collects the password
collector.add_argument('--outputfilename', dest='outputfilename', action="store") # This line collects the output filename

args = collector.parse_args()                                                     # Setup args to store cmd line arguments

def printusername():                                                              # define the username argument

        print args.username

def printpassword():                                                              # define the password argument

        print args.password

def printoutputfilename():                                                        # define the output filename

        print args.outputfilename

output=gzip.open(args.outputfilename, "a")                                        # Open the output file for GZIP writing

with tweetstream.TweetStream(args.username, args.password) as stream:             # Open the Twitter Stream
    for tweet in stream:                                                          # For each tweet within the twitter stream
        line = str(tweet)                                                         # turn the tweet into a string
        line = ast.literal_eval(line)                                             # evaluate the python string (dictionary)
        line = json.dumps(line)                                                   # turn the python dictionary into valid JSON
        output.write(line)                                                        # write the line to the output file
        output.write("\n") 
```

运行它：“python myscript.py --username yourusername --password yourpassword --outputfilename yourpathandfilename”

您需要安装 tweetstream argparse gzip json 和 ast 模块。所有这些都可以通过 pip 或 easy_install 或大多数 ubuntu/fedora 包管理器安装。

脚本将创建的输出文件是一个简单的 gzip 压缩文本文件，其中每一行都是一个新的 json 字符串，其中包含完整的 tweet json 对象。由于脚本一直运行到您达到速率限制，所以它不会使用正确的 EOF 关闭 gzip 文件。但是python不在乎，所以你可以用另一个脚本打开它，7zip或winrar也不在乎。

我希望这会有所帮助。:)

# python - 如何用我选择的颜色填充由黑色边框包围的位图的一部分？

> ID：10026346
> 
> 赞同：2
> 
> 时间：2012-04-05T09:50:41.407
> 
> 标签：python, graphics, bitmap

我想使用 python 以编程方式修改位图，但并不需要对该主题有全面的基础，因此我想专注于学习完成工作所需的内容。

我所追求的那种东西的一个很好的例子是英格兰的位图图像和它的县。这最初会在白色背景上的所有县周围显示黑色边框。

到目前为止一切顺利，但我怎样才能动态更改县的背景颜色？

在我的脑海中，我在想我可能会找到一个类似于简单绘画应用程序的洪水填充程序。改变由指定颜色包围的区域内的所有像素的东西。我快速浏览了 PIL 文档，但没有找到任何我认为是洪水填充功能的东西？

我还不确切知道面具是什么或如何使用它，但也许这是我应该探索的途径。也许我可以为每个县定义一个掩码，然后使用该掩码来指导填充过程？是否可以在位图中定义和存储掩码以供我的程序以后使用？

路径也一样？？？

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:02:24.043

PIL 有一个未记录的功能`ImageDraw.floodfill`：

```
>>> import ImageDraw
>>> help(ImageDraw.floodfill)
Help on function floodfill in module ImageDraw:

floodfill(image, xy, value, border=None)
    Fill bounded region. 
```

（洪水填充通常应该是最后的手段，因为它与抗锯齿线的交互很差。通常最好获取县的实际边界数据，然后绘制填充多边形。但是，PIL 不支持抗锯齿画线所以这个建议是没有用的，除非你把你的绘图模块切换到更强大的东西，比如[PythonMagick](http://www.imagemagick.org/download/python/)或[pycairo](http://www.cairographics.org/pycairo/)。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T10:09:56.947

你可以在 python 中尝试 opencv 绑定。这是一些例子： http: [//opencv.willowgarage.com/documentation/python-introduction.html](http://opencv.willowgarage.com/documentation/python-introduction.html)

然后，您可以使用该`cvFloodFill`功能来填充区域。

# sencha-touch-2 - 在sencha touch 2中打开电子邮件并拨打电话号码

> ID：10026347
> 
> 赞同：2
> 
> 时间：2012-04-05T09:50:42.133
> 
> 标签：sencha-touch-2

如何使用 sencha 打开电子邮件和拨打电话号码？

我尝试了链接，但它尝试在 webview 中打开链接，而不是默认的电子邮件客户端或拨号号码。

```
<a href="mailto:mail@mail.com" > Open email</a> 
```

和

```
<a href="tel:123456" > Dial</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:59:04.307

尝试在您的对象（按钮、链接、...）上使用以下处理程序：

```
 handler: function() { 
       window.location = 'tel:0123456';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T09:07:58.503

在 iOS 中，确保您安装了邮件（用于 mailto）和电话（用于 tel），以便代码/链接正常工作。

否则它应该显示适当的错误消息（基于苹果文档）。

使用以下代码使其适用于 iOS 和 android：

**拨打电话号码**

```
window.location.href='tel:123456790'; 
```

**邮寄至**

```
window.location.href='mailto:your.emailAddrees@domain.com&cc=cc.to@email.com&subject=if%20you%desired%20one'; 
```

# xcode - Xcode 数据模型在编辑器中出现的问题

> ID：10026349
> 
> 赞同：7
> 
> 时间：2012-04-05T09:50:52.390
> 
> 标签：xcode, core-data

谁能帮忙，因为这让我发疯了！

我有一个处于早期阶段的应用程序，它有一个数据模型。到目前为止，它只有 5 个实体和一些关系。

到目前为止，我还没有使用版本控制，只是从我的 iPad 中删除应用程序，并在我对架构进行更改时重新加载它。到目前为止，这一切都很好，因为我已经更改了几次架构。

所以今天早上我尝试添加一个与模型中现有实体有关系的新实体。在我回去检查模型之前，一切似乎都很好。图表视图很糟糕。缺少关系，箭头指向空白空间，布局不是我保存它的方式......

删除新实体会使事情恢复正常。或似乎。

我可以毫无问题地添加实体，但是一旦我尝试添加关系，它就会变得混乱。我*认为*模型本身还可以，只是图形表示被搞砸了。

我尝试过创建一个新版本，将其设置为当前版本，对其进行编辑，每次都得到相同的结果......我看不到任何可以解决的问题。

这是我第一次使用核心数据，所以也许这对我来说有些愚蠢，但我很确定我正在做与其他 4 个实体完全相同的事情。

请帮忙！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-05T11:50:16.680

这里有一个小技巧来修复 Xcode 中的这个显示错误，这通常是由于`YourApp/YourApp.xcdatamodeld/YourApp.xcdatamodel/layout`.

退出 Xcode 或关闭项目后，您可以删除该文件（我并不总是有效，有时该文件不存在）。

或者，您可以编辑`contents`同一目录中的文件，然后简单地删除标有 的整个部分`<elements> .... </elements>`。您的实体将在编辑器中相互重叠，但在重新排列它们后现在应该可以工作了。

# android - 打开其他安卓应用

> ID：10026350
> 
> 赞同：1
> 
> 时间：2012-04-05T09:50:56.853
> 
> 标签：android

目前，我有三个应用程序，名为 A、B 和 C（仅作为示例）。

A 将使用意图将文件 Uri 传递给 B，之后，B 将选择适当的应用程序 C 之一来打开文件。

例如，A 向 B 传递了一个图像 uri，B 发现 A 传递了一个图像 uri，因此 B 将选择图库（它的 C）打开文件并显示在屏幕上。

但是，当我按下“返回”按钮时，屏幕将返回到应用程序从 C 到 B，而不是 A。

所以，我的问题是如何隐藏应用程序 B？我的意思是当我在应用程序 C 中按下“返回”按钮时，屏幕将直接返回 A，而不是 B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:57:21.523

在应用程序 c 中创建 onBackPressed() 方法并重新启动 A 意图/活动。我希望它是你需要的。

```
 public void onBackPressed() {
            super.onBackPressed();
            finish();       
            Intent intent = new Intent(C.this, A.class);
            startActivity(intent);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:13:01.200

放

```
android:noHistory=true 
```

在应用程序的清单中（应用程序中的活动）B..它从活动堆栈中删除活动并在用户离开它并且不再在屏幕上可见时完成（调用它的完成（）方法）

# string - Prolog 中的字符串排序

> ID：10026351
> 
> 赞同：4
> 
> 时间：2012-04-05T09:50:58.520
> 
> 标签：string, prolog, sql-order-by

我想知道如何比较两个字符串来告诉我一个字符串是否大于另一个字符串。

我不想要平等/不平等。我想要良好的旧字母数字顺序。

示例：'aaaa' ,'aaad', 'aaab' 排序应该是：'aaaa', 'aaab', 'aaad'

另外，如果我有原子怎么办？如何排序原子？（再次 a=b 或 a\=b 不起作用，我需要订购。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T09:52:14.660

使用术语排序谓词`@<`和朋友。

```
?- aaaa @< aaab.
true.

?- aaad @>= aaab.
true. 
```

# ios - iOS：UITextField 键盘和输入视图出现在错误的位置

> ID：10026355
> 
> 赞同：1
> 
> 时间：2012-04-05T09:51:16.610
> 
> 标签：ios, ipad, keyboard, uitextfield, inputview

我在我的 iPad 应用程序中使用键盘、Pickerviews 等使用不同输入视图的几个 UITextFields。通常 inputview 应该从屏幕底部出现，但大多数时候它从底部上方出现 - 大约 50 像素。为此，我附上了几张快照。这是非常随机地发生的，但是当发生一次时，它对所有 UITextFields 都是一样的。谁能告诉我影响这个的因素是什么以及如何摆脱这个问题？我希望 inputview 总是从屏幕底部出现。请注意，我没有导航控制器，我在整个应用程序中使用 presentviewmodel，并且自定义的导航控制器看起来像底部！谢谢。

*** 我注意到，在选择 From 和 To 文本字段时，即使是谷歌地图也会发生这种情况。这一定是很奇怪的事情！***

我通过以下方法确保选定的 textview 总是 resignfirstresponder 。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    selectedTextField = textField;
    return YES;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [textField resignFirstResponder];
}

- (void)donePickerViewButtonPressed
{
    [selectedTextField resignFirstResponder];
} 
```

![键盘出现在屏幕底部上方 50 像素处！](../Images/606e8ab2ecd40347158bf797da7c1f9b.png)

![PickerView UITextField inputview 出现在屏幕底部上方 50 像素处！](../Images/b28b8383455acb41e285b285629d33a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:19:39.917

我很惊讶我通过使用键盘的设置来解决这个问题。在设置->常规->键盘->关闭“拆分键盘”，它工作！我已通过测试打开和关闭此键来确认。关闭时，键盘或任何输入视图会从屏幕底部出现。当打开时，键盘/输入视图出现在屏幕底部大约 50 像素处。不过不知道有什么关系！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:59:48.377

这是因为您在使用选择器或副 Versa 之前没有`resignFirstResponder`您的 textFeild。因此，每当您按下完成按钮时，请退出您的所有 textFeilds，并且当您打开选择器时，请退出所有 textFeilds。

# asp.net-mvc - Razor View 在 VS2010 Sp1 中显示不正确、不可读的内容

> ID：10026356
> 
> 赞同：2
> 
> 时间：2012-04-05T09:51:19.793
> 
> 标签：asp.net-mvc, visual-studio-2010, razor

从昨天开始就发生这种情况，一些剃刀视图在视觉工作室中显示如下：

![VS2010 sp1 中的 Razor View 显示错误](../Images/7dc117377d42710a0eae5bf703666f96.png)

今天早上我已经修复了我的 VS2010 和 sp1，仍然得到这个。

如果我最小化 VS，视图会正确显示，当返回最大化模式时，它会像这样重新绘制。

我能用它做什么？有没有人遇到这种情况，我不能那样工作。

任何的想法？我有选择吗？

**编辑**

按照建议，我更新了显卡驱动程序，它似乎已经解决了这个问题。不过还是很吓人。

**编辑 2**

是的，在至少 1 次重新启动和 1 次关闭后，一切恢复正常。我没想到会为**“文本编辑器”**更新视频驱动程序；）。

如果它对其他人有帮助，我有一个 AMD Radeon HD 6800 系列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:12:59.683

Visual Studio 2010+ 中的文本编辑器使用 WPF（它使用硬件加速的图形渲染）。这可能解释了为什么您在 Visual Studio 中看到此问题，但您的问题肯定与视频卡有关。

# python - 在python中执行xml解析的有效方法

> ID：10026361
> 
> 赞同：0
> 
> 时间：2012-04-05T09:51:46.550
> 
> 标签：python, xml-parsing

我有一个（30GB）的 XML 文件，其中包含 2 类数据，第 1 类的数据有相应的

```
<id="11" class="1" bestmatchingid="50" Body="abc"> </id>
.
.
.
<id="9999890" class="2" MatchingClass1Id="11" Body="xyz"></id> 
```

现在的任务是提取 class1 的主体和相应的 class 2 的主体，例如

```
class1's id(11)== MatchingClass1Id of class2(which is 9999890) 
```

我通过在 Python 中使用字符串比较来完成同样的工作......考虑到我的文件大小是 30 GB，在 Python 中是否有更有效的方法来完成同样的工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:54:15.517

使用[LXML](http://lxml.de/)的`iterparse`功能。有关如何在非常大的文件上使用它的信息，请参阅[IBM DeveloperWorks 文章。](http://www.ibm.com/developerworks/xml/library/x-hiperfparse/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-05T19:50:23.840

lxml 适用于您的目的。另外，由于您是初学者..所以要了解基本知识，请参阅教程：

[http://infohost.nmt.edu/tcc/help/pubs/pylxml/web/etree-view.html](http://infohost.nmt.edu/tcc/help/pubs/pylxml/web/etree-view.html)

所有 iterparse 方法都是解决您的问题的有效方法

# jsf-2 - viewscope 中的问题

> ID：10026363
> 
> 赞同：1
> 
> 时间：2012-04-05T09:51:53.433
> 
> 标签：jsf-2, primefaces

我正在使用 primefaces 3.1

动态 = true 的 Tabview 不适用于 viewscope。

在 tabchange 上，它不加载数据。但是，如果我将视图更改为 sessionScope，它会加载数据。

有什么方法可以将 viewscope 与 dynamic = true 一起使用。

谢谢， 希哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T00:54:15.387

我认为是因为 with view scope jsf 正在再次创建 bean 尝试放置

```
<context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>false</param-value>
</context-param> 
```

认为它会成功。

# android - 使用批处理将文件从 Windows 复制到 android

> ID：10026365
> 
> 赞同：3
> 
> 时间：2012-04-05T09:52:01.093
> 
> 标签：android, windows, batch-file, copy, tablet

我想创建批处理以通过 USB 端口更新 android 平板电脑（对于没有经验的用户）上的文件。这些设备例如。摩托罗拉 Xoom 被认为是“便携式设备”，没有字母来标识自己。在资源管理器中有路径，例如“\Xoom\Internal Storage\”。

问题是我不知道如何获得平板电脑路径的*后缀*。

`copy file.ext ???/directory/file.ext`

我尝试使用 adb push（可以使用 getExternalStorage() 作为设备路径“/mnt/sdcard”的路径）但是需要启用调试模式，因此这不是最佳解决方案。我不想强迫用户启用此模式，运行批处理然后禁用调试模式。

谢谢

* * *

还有一些注意事项：

*   描述问题的关键词简化为“获取便携式设备的路径”
*   设备上的 android 版本是 3.0.x - (api level 11) 不足以使用 `android.hardware.usb`包

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:12:18.797

您可以使用`MOUNTVOL`命令将由其 GUID 标识的 USB 驱动器安装在特定的安装点上，而与可用的驱动器号无关。

```
 MOUNTVOL C:\XOOM \\?\Volume{a000351d-dbaa-11e0-bdaa-020255061358}\ 
```

进而

```
 copy file.ext c:\XOOM\directory\file.ext 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-10T02:29:02.590

要获取 GUID，请启动设备管理器，然后选择“便携式设备”。从那里选择您的手机。

属性，详细信息，“设备类 guid”。

# android - Android，如何从服务器加载图像？

> ID：10026366
> 
> 赞同：0
> 
> 时间：2012-04-05T09:52:01.640
> 
> 标签：android, image, load

在我的应用程序中，我正在打开一个连接以加载数据。在手机设备（galaxy 2）和平板电脑 p1000（带有 os 2.2 的旧 7" 平板电脑）中我没有问题，我可以获取和解析数据。但在另一台平板电脑（三星 7" plus - Honeycomb）中，应用程序崩溃了。logcat 说：

```
04-05 16:31:33.905: E/AndroidRuntime(4137): FATAL EXCEPTION: main
04-05 16:31:33.905: E/AndroidRuntime(4137): android.os.NetworkOnMainThreadException
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at java.net.InetAddress.getAllByName(InetAddress.java:249)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at cam.astro.mania.adapters.NewsAdapter.fetchImages(NewsAdapter.java:105)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at cam.astro.mania.adapters.NewsAdapter.setData(NewsAdapter.java:45)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at com.astro.mania.activities.NewsList.displayData(NewsList.java:359)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at com.astro.mania.activities.NewsList.access$4(NewsList.java:358)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at com.astro.mania.activities.NewsList$MyAsyncTask.onPostExecute(NewsList.java:199)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at com.astro.mania.activities.NewsList$MyAsyncTask.onPostExecute(NewsList.java:1)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.os.AsyncTask.finish(AsyncTask.java:590)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.os.AsyncTask.access$600(AsyncTask.java:149)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:603)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.os.Looper.loop(Looper.java:132)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at android.app.ActivityThread.main(ActivityThread.java:4123)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at java.lang.reflect.Method.invoke(Method.java:491)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
04-05 16:31:33.905: E/AndroidRuntime(4137):     at dalvik.system.NativeStart.main(Native Method) 
```

我的代码是：

```
/*-------------------------------
     * Downloading images from server
     * ------------------------------*/
    private Bitmap[] fetchImages(ArrayList<String> urlstr){
        InputStream is= null;
        Bitmap bm = null;
        Bitmap[] bmList = new Bitmap[urlstr.size()];

        try {
            for(int i=0; i<urlstr.size(); i++){
                HttpGet httpRequest = new HttpGet(urlstr.get(i));
                HttpClient httpclient = new DefaultHttpClient();
                HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

                HttpEntity entity = response.getEntity();
                BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
                is = bufHttpEntity.getContent();
                bm = BitmapFactory.decodeStream(is); 
                bmList[i] = bm;
            }
        }catch ( MalformedURLException e ){
            Log.d( "RemoteImageHandler", "fetchImage passed invalid URL: " + urlstr );
        }catch ( IOException e ){
            Log.d( "RemoteImageHandler", "fetchImage IO exception: " + e );
        }finally{
            if(is!=null)try{
                is.close();
            }catch(IOException e){}
        }

        return bmList;
    } 
```

Logcat指向`HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);` 我不明白错误的含义是什么。问题是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:13:18.797

[此错误](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)表示您不允许在主线程中执行网络操作。

您需要在另一个线程中执行此操作并异步获取结果。

希望能帮助到你。

乔卡赫罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:18:35.497

开始一个新线程供您下载并在那里执行。通过消息通知您的主线程到 [Handler](http://developer.android.com/reference/android/os/Handler.html)或只是等待线程完成使用 join()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T06:06:58.173

您可以使用此代码将图像加载到图像视图。

```
 ImageView ImageView =(ImageView)dialog.findViewById(R.id.ImageView01);
   InputStream is = null;
   try {
        is = (InputStream) new URL(ClueImgURL).getContent();
    } catch (MalformedURLException e) {
              // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
  Drawable d = Drawable.createFromStream(is, "src name");
  ImageView .setBackgroundDrawable(d); 
```

这里的 ClueImgURL 是图像的 url。

# ruby-on-rails - 将linkedin集成到ROR应用程序的最佳方式是什么？

> ID：10026370
> 
> 赞同：1
> 
> 时间：2012-04-05T09:52:18.370
> 
> 标签：ruby-on-rails, linkedin

我想在 ROR 应用程序中使用诸如[http://www.hitch.me/之类的 Linkedin 访问我的应用程序。](http://www.hitch.me/)我是 ROR 的新手，请建议我最好的解决方案，如果有人已经这样做了，请给我提供样品。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:00:08.080

正如米莎所说，试试[Omniauth](http://github.com/intridea/omniauth)

您可以从这篇文章中看到更详细的**示例。**

[http://www.communityguides.eu/articles/16](http://www.communityguides.eu/articles/16)

**提供者图片：**

[https://github.com/intridea/authbuttons](https://github.com/intridea/authbuttons)

# php - PHP BB 安装

> ID：10026372
> 
> 赞同：0
> 
> 时间：2012-04-05T09:52:22.513
> 
> 标签：php, phpbb

我最近使用一键式功能安装了 phpBB 应用程序（我有一个 linux cPanel 服务器）。但是，它不会在用户注册时发送用户注册确认电子邮件。我得到错误：

Quote: Errno 2: mail() 出于安全原因已在 [ROOT]/includes/functions_messenger.php 第 1651 行禁用

现在，我询问了 phpBB 论坛的人，他们说这与我的网络主机阻止了 mail() 函数有关。为什么会这样，我该如何解锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:00:57.267

如果他们可以允许使用邮件功能，请尝试联系您的网络主机。如果没有，您可以向他们询问有关 SMTP 使用情况的详细信息。phpBB 支持通过 SMTP 发送邮件。您可以在控制面板中找到电子邮件设置。管理员>常规>电子邮件设置

# ios - 如何以编程方式激活 ios 通知设置？

> ID：10026375
> 
> 赞同：2
> 
> 时间：2012-04-05T09:52:37.113
> 
> 标签：ios, settings, apple-push-notifications

我的应用程序注册这样的通知：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert]; 
```

但是如果我手动进入通知设置，禁用所有内容（通知中心、警报、声音、徽章）然后卸载并重新安装应用程序（或者只是重新安装而不先卸载），我的 iPhone 会保留旧设置。如何在重新安装时强制重新激活这些设置？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-05T09:58:58.887

你不能。在 iOS 5.0 中，有一个未记录的功能可以通过 url 方案从您的应用程序打开通知设置页面（或任何设置页面）。然后您可以要求用户启用通知。但它在 5.1 中被删除，无论如何可能不会被 Apple 接受。

`registerForRemoteNotificationTypes`*仅在您第一次*调用它时询问用户他是否想接受来自您的应用程序的通知。如果稍后用户更改通知设置，则它不会再询问它。您可以检查是否为您的应用程序启用了通知，`enabledRemoteNotificationTypes`并在需要时自行警告用户，但用户必须手动进入设置并重新启用它们。您不能再从您的应用程序中执行此操作了。

**从 iOS 8.0 开始更新**

从 iOS 8.0 Apple 返回了打开应用程序的系统设置页面的可能性：

```
NSURL* settingsURL = [NSURL URLWithString:UIApplicationOpenSettingsURLString];
[[UIApplication sharedApplication] openURL:settingsURL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T10:15:55.127

您需要重置推送通知权限。Apple 提供了一种重置权限的方法-

**在 iOS 上重置推送通知权限警报**

首次启用推送的应用程序注册推送通知。iOS 会询问用户是否希望接收该特定应用的远程通知。一旦用户对此警报做出响应，它就不会一次又一次地出现，除非设备已恢复或应用程序已被卸载至少一天。

如果你想模拟你的应用程序的首次运行，你可以让应用程序卸载一天。您可以按照以下步骤实现后者，而无需实际等待一天：

```
1.Delete your app from the device.
2.Turn the device off completely and turn it back on.
3.Go to Settings > General > Date & Time and set the date ahead a day or more.
4.Turn the device off completely again and turn it back on. 
```

有关更多详细信息，请参阅：[https ://developer.apple.com/library/ios/technotes/tn2265/_index.html](https://developer.apple.com/library/ios/technotes/tn2265/_index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T10:28:48.840

尝试将您的设备日期更改为当前日期后 1 或 2 天。有时它存储在设备的钥匙串中并存储 1 或 2 天。在日历和位置权限的情况下，它对我有用。

# java - 在java中将非空字段和非空字段从一个对象复制到另一个相同类型的对象（对象是相同类型）

> ID：10026376
> 
> 赞同：0
> 
> 时间：2012-04-05T09:52:38.370
> 
> 标签：java, hibernate, struts

我在我的项目中使用hibernate、struts、extjs。

我有一个包含以下字段的客户对象：

> custId、
> custName、地址、电话

在我的 UI 项目中，我得到了一个对象客户`custName`。

所以我需要更新上面的对象（`custName`是唯一的）。我只有一个具有相同客户名称的对象。所以我将使用客户名称（来自数据库的对象）获取该对象。

现在我必须用更新的客户名称保存对象。

如果我保存如下我有来自 UI 的客户对象，是 cust

> 客户 cust1 = getCustomerByName(cust.getCustName());
> 
> cust.setCustId(cust1.getCustId()); 保存（自定义）；

如果我这样做，我会丢失客户地址和电话号码。

那么，如何将一个非空或非空字段值的对象复制到另一个相同类型的对象。

任何人都可以帮忙。我只是卡在这里。它阻止我保存。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:23:25.320

两种选择。使用反射查找所有字段并复制不为空的字段。或者更好的选择，编写一个更新方法，显式检查每个字段并根据需要更新数据库实例的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:03:36.547

您正在混淆对`cust`和的引用`cust1`。

除非`cust`已经有地址，否则无论设置多少只是`custId`on`cust`也不会从`cust1`.

# c# - 找到重复项时重做循环（Lotto 程序 C#）

> ID：10026378
> 
> 赞同：0
> 
> 时间：2012-04-05T09:52:46.287
> 
> 标签：c#, for-loop, duplicates

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
    private static Random randy = new Random();
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    public void Button_Clicked(object sender, EventArgs e)
    {
        int count = 7;

        for (int i = 1; i < count; i++)
           // if (i == count)
        {
            int myInt = nextNo();

            string myNum = String.Format("{0}\t", myInt.ToString());
            TextBox1.Text += myNum;
            TextBox2.Text = ("These are your numbers fsdjio"); 
        }
    }

    int nextNo()
    {
        return randy.Next(1, 45);
    }
} 
```

**强文本**

问题是我经常会得到重复的数字。如果数字不相同，有没有办法让循环只进行？谢谢

我正在使用 for 循环和 Random 类来制作一个包含 6 个数字的彩票程序。但是，我经常会得到经常性的数字。我是否必须对其进行编码以便整个过程重复直到出现六个不同的数字？谢谢第一次发帖

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:55:22.707

在我看来，你不应该再做整个循环。只需执行以下操作：

```
var set = new HashSet<int>();
for (int i = 0; i < n; i++)
{
    while(!set.Add(nextNo()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:05:34.627

您不需要随机的唯一数字。您需要对现有的一组数字进行洗牌。他们有很多关于[SO](https://stackoverflow.com/search?q=fisher%20yates%20%5Bc#%5D&submit=search)和[谷歌](http://www.google.de/search?q=fisher+yates+c%23&ie=utf-8&oe=utf-8&channel=suggest)关于这个主题的问题（和答案）。搜索*Fisher yates shuffle*算法并将其用于您的一组唯一数字。

# php - CakePHP Auth 组件使用 $this->Auth->login() 时未登录；

> ID：10026379
> 
> 赞同：2
> 
> 时间：2012-04-05T09:52:46.477
> 
> 标签：php, cakephp, authentication

我是 cakePHP 的新手，我已经阅读了他们的文档，并且正在关注他们的简单身份验证示例。我还广泛搜索（包括本网站上的答案）来寻找我的问题的答案。

我正在使用 cakePHP 2.0，我的 UsersController 的登录功能如下所示：

```
function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login(/*$this->request->data*/)) {
            $this->redirect($this->Auth->redirect());
        }else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
        }
    }
} 
```

我的 AppController 看起来像这样：

```
public $components = array(
                    'Session',
                    'Auth' => array(
                            'loginRedirect' => array('controller' => 'pages', 'action' => 'display'),
                            'logoutRedirect' => array('controller' => 'pages', 'action' => 'display')
                    )
        );

public function beforeFilter() {
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
} 
```

我的用户模型：

```
class User extends AppModel {

public $name = "User";

} 
```

和登录表单：

```
echo $this->Session->flash('auth');
echo $this->Form->create('User', array('action' => 'login'));
echo $this->Form->input('username');
echo $this->Form->input('password');
echo $this->Form->end('Login'); 
```

问题是它没有登录用户。当调用 $this->Auth->login() 时没有 $this->request->data 作为参数，会话中没有写入任何内容，页面只是刷新。但是当您提供 $this->request->data 它可以工作时，凭据将写入会话并且我被正确重定向。但是我注意到您可以使用 $this->Auth->login($this->request->data) '登录'任何人，即使他们不存在于数据库中。除此之外，如果我输入了错误的凭据，什么也不会发生，不会显示任何闪烁消息。

我不想做任何特别的事情，我想要的只是能够登录用户。我有一个简单的用户表，其中包含用户名和密码字段，我已经按照他们的示例阅读了他们的文档，但我仍然没有尝试过已经奏效了。

如果我没有提供回复所需的所有信息，我深表歉意。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T15:00:27.363

我有完全相同的经历。发生在我身上的是，在某一时刻，我能够使用一些用户名和密码成功登录，但我从来没有在视图中显示我已登录的任何代码。我也很困惑，当我随后登录时使用随机的用户名和密码，它仍然给了我一个成功的登录通知。

我认为发生的事情是，如果您处于登录状态，那么无论您输入什么用户名和密码`$this->Auth->login()`都会返回。`true`解决方案可能是以某种方式调用`$this->Auth->logout()`您的程序，或清空您的 cookie，以便程序不再指定您已登录。然后`$this->Auth->login()`将再次正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:16:15.430

您在哪里定义要使用的引擎？[可能与http://ask.cakephp.org/questions/view/unable_to_login](http://ask.cakephp.org/questions/view/unable_to_login)相同的问题 已解决，如文档中所述设置引擎/适配器。

# android - 如何在android中停止这个线程？

> ID：10026385
> 
> 赞同：1
> 
> 时间：2012-04-05T09:53:16.143
> 
> 标签：android, multithreading, android-ndk, runnable

在我的应用程序中，我使用这个线程来旋转时钟上的秒针。但问题是当我关闭活动时，线程仍在运行。我想停止线程，这样它就不会影响设备的 Bettry。

以下是我正在旋转时钟秒针的活动代码：

```
 public class ClockActivity extends Activity implements OnClickListener{
    private Button chimeBtn;
    private ImageView img;
    private Thread myThread = null;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.clock_layout);

        Runnable runnable = new CountDownRunner();
        myThread = new Thread(runnable);
        myThread.start();

        chimeBtn = (Button) findViewById(R.id.chimeBtn);
        chimeBtn.setOnClickListener(this);
    }
    @Override
    public void onClick(View v) {
        switch(v.getId()){
            case R.id.chimeBtn:
                playSound(R.raw.one_bell);
                break;
        }
    }
    public void playSound(int resources){

         MediaPlayer mp = MediaPlayer.create(getApplicationContext(), resources);
            mp.start();

    }

    private void doPlay(){
        new Thread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                Log.v("log_tag", "this is seocond thread");

            }
        }).start();
    }
    public void doRotate() {

        runOnUiThread(new Runnable() {
            public void run() {
                try {

                    Date dt = new Date();
                    int hours = dt.getHours();
                    int minutes = dt.getMinutes();
                    int seconds = dt.getSeconds();
                    String curTime = hours + ":" + minutes + "::" + seconds;
                    Log.v("log_tag", "Log is here Time is now" + curTime);
                    img = (ImageView) findViewById(R.id.imgsecond);
                    RotateAnimation rotateAnimation = new RotateAnimation((seconds - 1) * 6, seconds * 6,
                            Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);

                    rotateAnimation.setInterpolator(new LinearInterpolator());
                    rotateAnimation.setFillAfter(true);

                    img.startAnimation(rotateAnimation);
                } catch (Exception e) {
                    Log.e("log_tag", "Error msg is " + e.toString());

                }
            }
        });
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) { 

        if (keyCode == KeyEvent.KEYCODE_BACK) {       
            System.out.println("Back Key Press");
            if (myThread != null) {

                   myThread.interrupt(); //says that the myThread should stop 
                   try{ 
                           myThread.join(); //make this myThread wait for the other myThread to  finish before returning
                           myThread = new Thread();
                           myThread = null;
                   }catch(InterruptedException ie){ 
                           //handle the case if the thread.join is interrupt 
                           //don't know if this will ever happen, if it can... throw a runtime exception?, or reinterrupt? 
                           Thread.currentThread().interrupt(); 
                           //   reinterrupt because thrown exception cleared interrupt and hope it's handled elsewhere 
                   } 

            }
            System.out.println("Back Key Press");
            return true;       
        }       
        return super.onKeyDown(keyCode, event);     
    } 

    @Override
    public void onDestroy(){

        System.out.println("OnDestroy");

        super.onDestroy();

    }

    class CountDownRunner implements Runnable {
        // @Override
        public void run() {
            while (!Thread.currentThread().isInterrupted()) {
                try {
                    // Log.v("log_tag", "Roate is going");
                    doRotate();
                    Thread.sleep(1000);
                    //doPlay();
                    } catch (InterruptedException e) 
                    {
                    // Thread.currentThread().interrupt();
                } catch (Exception e) {
                    Log.e("log_tag", "Error is " + e.toString());
                }
            }
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:05:31.753

在您的活动中尝试此代码 -

```
@Override
protected void onDestroy() {
    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

当您退出应用程序时，您的应用程序进程实际上并没有被破坏。如果您销毁您的进程，所有子进程（您的所有子线程）都将被销毁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T05:23:15.540

好的，这意味着您要创建一个将在后台运行的服务。一件事是服务是一种类型的线程，如果它将在后台运行会耗尽您的设备电池电量。所以，如果你杀死你的进程，那么线程和你的服务都会被破坏。所以，停止你的线程 -

```
boolean running = true;

public void run() {
   while(running) {
       // your working code...
   }
}

@Override
protected void onDestroy() {
    running = false;
} 
```

当您退出应用程序时，线程将停止。另一个将继续运行，那就是您的服务。不要试图强行停止你的线程，或者暂停。它已被弃用，如果您的线程的 while 循环中断，那么它将根据 JVM 规则自动销毁您的线程。希望它会帮助你。玩得开心...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T09:59:39.093

不要`myThread.join()`在 UI 线程上，因为它会阻塞，直到线程完成并且您的应用程序可能会 ANR。还会`Thread.currentThread().interrupt();`尝试中断非常糟糕的 UI 线程。

您可以放入`MyThread.interrupt()`,`onDestroy`或`onPause`( `onStop`+ 在相应的启动回调中重新创建线程)

# c# - HttpListener.IsSupported 在 XP SP3 上为假

> ID：10026387
> 
> 赞同：2
> 
> 时间：2012-04-05T09:53:29.580
> 
> 标签：c#, .net, httplistener

我们正在尝试`HttpListener`在 Windows XP SP3 系统上部署一个使用类的简单 C#（框架 2.0）应用程序：应用程序在初始化时中止，因为`HttpListener.IsSupported`属性是`false`.

**问题：**什么会使`HttpListener`（合理的）最新的 XP 系统不受支持？

可能重要的事情：

*   用户不是其系统的管理员
*   计算机上可能有我不知道的安全策略（而且我不确定我是否能够在自己不是管理员的情况下检查）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:01:34.380

好的，在后台`HttpListener`类调用

```
[StructLayout(LayoutKind.Sequential)]
internal struct HTTPAPI_VERSION
{
    internal ushort HttpApiMajorVersion;
    internal ushort HttpApiMinorVersion;
}

[DllImport("httpapi.dll", CallingConvention=CallingConvention.StdCall, SetLastError=true, ExactSpelling=true)]
internal static extern unsafe uint HttpInitialize(HTTPAPI_VERSION version, uint flags, void* pReserved); 
```

在 XP 上：

```
version.HttpApiMajorVersion = 2; 
version.HttpApiMinorVersion = 0;
flags = 5;
pReserved = null; 
```

这是描述[here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364488%28v=vs.85%29.aspx)。和套`bool supported = HttpInitialize(...) == 0;`

您可以尝试使用 PInvoke 直接调用它并检查返回的[系统错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681381%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:40:29.580

一种可能性：XP Embedded 似乎不支持 HttpListener/http.sys，即使是 SP2 及更高版本。

# asp.net - Alachisoft.NCache.Runtime.Exceptions.OperationFailedException：缓存未初始化

> ID：10026390
> 
> 赞同：0
> 
> 时间：2012-04-05T09:53:42.897
> 
> 标签：asp.net, nhibernate, caching, ncache

我们使用 NCache 作为 NHibernate 的二级缓存。

本地控制台测试应用程序能够从缓存中检索项目。

但是在我们的网络应用程序中，我们收到“缓存未初始化”

我们正在使用 WCF 通过前端站点连接到运行查询的后端站点。

有人对如何解决此错误有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:45:30.967

发现问题在于我们向 Castle 注册后端 WCF 服务的方式。

使用“PerWcfOperation”或除 Transient 之外的任何其他注册会导致此错误。

将我们的服务生命周期设置为 Transient，它会按预期工作。

将通过城堡源查找原因。

# javascript - Internet Explorer 预加载（500 多张图片）

> ID：10026395
> 
> 赞同：2
> 
> 时间：2012-04-05T09:53:54.833
> 
> 标签：javascript, internet-explorer, preloader

我正在一个与此类似的网站上工作：http: [//www.nike.com/jumpman23/aj2012/](http://www.nike.com/jumpman23/aj2012/)我正在预加载很多图像。预加载时不应锁定浏览器，因此我使用 setTimeout 函数一次仅加载一个图像。在 FF/Chrome/Safari 等中一切正常，但 IE 遇到了问题。

有时它会加载大约 400 张图像，然后进入错误函数，有时它只是预加载前 6 张图像——看起来完全随机。很难解释这个问题，所以我把代码的重要部分放在这里：[http](http://sidneywidmer.ch/preloader/) ://sidneywidmer.ch/preloader/（先让舒尔打开你的控制台）

你可以忽略一些东西，比如 loadOrder 变量:)

我还尝试为 IE 设置不同的间隔时间，或者在出错时暂停下载一秒钟，但似乎没有任何效果......

有谁知道我该如何解决这个问题？

**更新：** 经过一番调查，我可以肯定地说存在某种内存泄漏或其他问题。在 IE 内存使用量从 1.4 GB 上升到超过 3 GB，然后它停止加载图像......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:00:20.367

尝试使用延迟图像加载。看看这个插件到 jQuery [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:43:43.283

好的，我终于可以自己解决问题了……问题是 Internet Explorer（可能还有其他浏览器）在 DOM 中预加载图像时会消耗大量 RAM。实际大小（例如 10kb）并不重要。最重要的是图像的分辨率。因此，虽然我可以轻松地预加载 1000 张分辨率为 400 x 200 且大小为 20kb 的图像，但根本不可能预加载 1000 张分辨率为 1024 x 768 且文件大小为 10kb 的图像。

我不知道为什么会这样，也许有人可以更深入地描述这种行为。

# c# - 使用值类型作为参数时的内存位置方式是什么

> ID：10026396
> 
> 赞同：0
> 
> 时间：2012-04-05T09:53:57.660
> 
> 标签：c#, memory-management, value-type, reference-type

我知道值类型和引用类型之间的一般区别，我也知道在引用类型中使用值类型时，这个值类型实际上是在堆上的。

前任：

```
class ClassA{
   public DateTime date1 = new DateTime(2008, 3, 1, 7, 0, 0);
} 
```

什么时候

```
ClassA a = new ClassA(); 
```

date1 在堆上

我的问题是

如果我们在方法中使用这个 date1 作为参数，那么内存位置行为是什么？

```
public void methodA(DateTime dt)
{
//do sth with the dt
} 
```

调用方法

```
methodA(new ClassA().date1); 
```

选项 1：仅复制一个 date1 引用选项 2：或复制 date1 数据以运行

**更新**：在阅读了“关于值类型的真相”之后，我意识到我的假设存在一些不确定性。至少我应该给出一个上下文。“在桌面 CLR 上的 C# 的 Microsoft 实现中，当值是局部变量或临时值，不是 lambda 或匿名方法的封闭局部变量，并且方法体不是时，值类型存储在堆栈中一个迭代器块，并且抖动选择不注册该值。”

**Update2**：我问这个的原因是我想了解[http://marcgravell.blogspot.co.uk/2011/10/assault-by-gc.html上的一些代码片段](http://marcgravell.blogspot.co.uk/2011/10/assault-by-gc.html)

> 将 Customer 从一个类更改为一个结构（仅在这个疯狂的代码中）
> 
> 将主商店从 List 更改为 Customer[]
> 
> 将子集从 List 更改为 List，特别是主 Customer[] 的偏移量

```
void SomethingComplex(ref Customer customer) {...}
...
int custIndex = ...
SomethingComplex(ref customers[custIndex]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:58:40.150

`DateTime`是一个值类型，因此该值将在方法调用时被复制。

# java - 为什么使用 hdfs:// 前缀作为文件路径允许打开文件？

> ID：10026397
> 
> 赞同：1
> 
> 时间：2012-04-05T09:54:04.300
> 
> 标签：java, hadoop, crawler4j

我正在编写一个抓取页面的 hadoop 作业。我正在使用的库在爬网时使用文件系统来存储爬网数据。我确信必须修改该库以使用 HDFS，因为需要使用一组完全不同的类来与 HDFS 交互，而我正在使用的爬虫库使用 java.io。

但是，当一位同事使用 hdfs://localhost/path/to/storage 作为存储文件夹的路径时，爬虫可以正常工作，并且能够写入文件系统。我试图理解为什么会这样，基于 hadoop 的 jvm 是否有什么不同导致它们将 hdfs:// 前缀路径解析为 HDFS 上的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:53:29.640

我不知道您使用的是哪种 HDFS 接口。Hadoop 提供了一个通用的文件系统层。如果你没有在你的 hadoop 配置文件中指定 NameNode 地址（在 HADOOP_HOME/conf/core-site.xml 并且属性的名称是“fs.default.name”），你所有的“hadoop fs ...”注释将默认为本地文件系统。因此，如果您不知道 hadoop 配置是什么，将“hdfs://namenode:port/”作为前缀包含在内是个好主意。

# html - 如何用 CSS 分隔文本和 HTML

> ID：10026400
> 
> 赞同：3
> 
> 时间：2012-04-05T09:54:13.070
> 
> 标签：html, css, text, pseudo-element

为了提高网站的可维护性，**将所有文本从 HTML 中分离出来并放在一个独特的 CSS**样式表中是不是一个好主意？我的意思是，像这样：

HTML 文件

```
<body>
    <h1 class="home-title"></h1>
    <p class="description"></p>

    <!-- and much more elements... -->
</body> 
```

包含所有文本的 CSS 文件

```
.home-title:after {
    content: "Welcome to my website!";
}

.description:after {
    content: "This is a demo ok?";
}

... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T09:56:42.413

不。

样式表应该用于布局。内容应该在 HTML 代码中。

* * *

此外，正如jacktheripper 指出的那样，这对于 SEO 而言将是一场灾难，因为搜索引擎会认为您的页面只包含很多空元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T09:56:35.127

不！对于**SEO**（搜索引擎优化），您应该使您的网站尽可能容易被网络蜘蛛阅读，并且使用 CSS 填充您的所有元素将是终端！

**CSS 严格用于布局
HTML 严格用于内容**

您的网站应该像教科书一样易于阅读 - 想象一下教科书中的一个页面，上面写着“去寻找应该在另一本教科书中出现的内容”，这将是多么烦人。这实际上就是你正在做的事情。

保持 HTML 和 CSS 分开！

可以这样想：

当且仅当你不能用 HTML 做时，使用 CSS
当且仅当你不能用 CSS 做时，使用 JavaScript

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:01:10.557

不，这不是一个好主意，我怎么强调都不过分。

content 属性用于添加装饰性文本。HTML 用于页面的核心内容。

搜索引擎将无法索引内容，辅助工具将无法解释内容。使用起来会非常麻烦。

用 HTML、CSS、JavaScript 和某种服务器端语言做不到的事情可能不值得去做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:58:33.277

不，这不是一个好主意。

您是否正在尝试模板化您的网站？基本上，您希望某些 html 显示在每个页面上，但您不想每次更新该代码时都复制粘贴？我感觉这就是您所说的可维护性。在这种情况下，您需要使用服务器端脚本语言，例如 PHP。

这样，您可以执行以下操作：

```
**some_page.php**
<?php
    require("template.php");
    open_template();
    echo '<p>Hello world!</p>';
    close_template();
?>

**template.php**
<?php
    function open_template() {
        echo '<html><head><title>Title!</title></head><body>';
    }

    function close_template() {
        echo '</body></html>';
    }
?> 
```

其中 open_template 和 close_template 是 template.php 中定义的函数，它们基本上显示您的内容之前和之后的任何内容。显然它可能比这复杂得多，但这将是一个比将内容放入 CSS 中更好的可维护性解决方案。

# android - 在 Android、XML 或 JSON 的解析性能方面哪个更好？

> ID：10026404
> 
> 赞同：8
> 
> 时间：2012-04-05T09:54:23.880
> 
> 标签：android, json, xml-parsing

我是安卓开发新手

我应该为我的 Android 应用程序使用什么，XML 或 JSON？

在解析性能方面哪个更好？

我将不胜感激任何示例代码。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T10:01:27.330

JSON 最好与 XML 进行比较

XML 不太适合数据交换

简单

XML 比 SGML 简单，但 JSON 比 XML 简单得多。JSON 的语法要小得多，并且更直接地映射到现代编程语言中使用的数据结构。

**可扩展性**

JSON 不可扩展，因为它不需要。JSON 不是一种文档标记语言，因此不需要定义新的标签或属性来表示其中的数据。

**互操作性**

JSON 具有与 XML 相同的互操作性潜力。

**开放性**

JSON 至少与 XML 一样开放，也许更开放，因为它不是企业/政治标准化斗争的中心。

**重量：** 由于 JSON 语法需要较少的字符，因此它比 XML 更轻。

不过还是看需求吧！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T10:00:58.813

以前很少有人问过类似的问题：[哪个更好：Json 或 XML (PHP)](https://stackoverflow.com/questions/1116825/whats-better-json-or-xml-php)他们确实解释了哪个更快，哪个不是。

您始终可以使用 Google [-GSON](http://code.google.com/p/google-gson/)，它可以真正快速地解析 JSON（无论数据集有多大）。我个人更喜欢 JSON 而不是 XML，因为它更容易进行数据交换，即使可读性受到阻碍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-09T10:01:24.523

XML 的唯一好处是它更“人类可读”......但是看到最终用户不会阅读 XML，就没有必要使用它。

JSON 比 XML 更容易/更快地解析

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T10:15:43.213

如果数据大小不太大，JSON 比 XML 更好。因此，借助 JSON api 开发的 GSON 更好，因为它易于处理。但是 JSON 有一个主要的缺点，那就是 - 数据被加载到内存中然后解析。如果数据量太大，则会出现异常。在这种情况下——XML 非常有用。JSON 更好，因为它比 XML 更快（因为使用了散列）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-05T10:02:38.687

根据经验，在 Android 2.1 及更早版本上解析 XML 可能会很麻烦，因为存在将编码实体分解为单独标签的错误 (http://code.google.com/p/android/issues/detail?id=2607)。

就个人而言，我发现 JSON 解析更方便。看看下面的链接：[http ://www.technotalkative.com/android-json-parsing/](http://www.technotalkative.com/android-json-parsing/)

# vb.net - Windows 窗体中的数字 CAPTCHA 验证

> ID：10026411
> 
> 赞同：1
> 
> 时间：2012-04-05T09:55:14.867
> 
> 标签：vb.net, winforms

我正在创建一个程序，该程序在两个单独的标签上显示两个随机数，然后我必须添加/减去它们，并且应该在文本框中输入答案

如何添加或减去数字并在文本框中输入答案？

我在 Visual Basic Windows 窗体应用程序中创建它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-29T12:28:38.240

I think you are trying to do some security technique. what ever it may i appreciate your try. based on the question and what am understand, i will give the following code as suggestion for you.

**Code to generate random numbers and random operators in label**

```
Dim op As Integer ' to represent the operator
Private Sub Generate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Generate.Click
    Dim Rand As New System.Random
    op = Rand.Next(0, 3)'randomly select operator 
    lblfirst.Text = Rand.Next(0, 10)'first random number
    lblsecond.Text = Rand.Next(0, 10)'second random number
    If op = 0 Then ' choosing operator based on op
        lblop.Text = "+"
    ElseIf op = 1 Then
        lblop.Text = "-"
    ElseIf op = 2 Then
        lblop.Text = "*"
    End If
End Sub 
```

Following is the check button's click event that will evaluate the expression in label and check with the answer in the text box: display the message as result

```
 Private Sub check_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles check.Click
        Dim result As Double = 0.0
        If op = 0 Then
            result = CDbl(lblfirst.Text) + CDbl(lblsecond.Text)
        ElseIf op = 1 Then
            result = CDbl(lblfirst.Text) - CDbl(lblsecond.Text)
        ElseIf op = 2 Then
            result = CDbl(lblfirst.Text) * CDbl(lblsecond.Text)
        End If
        If result = CDbl(TextBox1.Text) Then
            MsgBox("Correct")
        Else
            MsgBox("Wrong")
        End If
    End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:01:28.667

这将在 0-10 之间添加两个随机数：

```
 Dim Rand As New System.Random
        Dim Rand1 as integer = Rand.Next(0, 10)
        Dim Rand2 as integer = Rand.Next(0, 10)
        YourLabel1.Text = Rand1.toString()
        YourLabel2.Text = Rand2.toString()
        YourAnswerLabel.Text = Rand1 + Rand2 
```

# javascript - GWT 将 Widget 添加到 iFrame

> ID：10026416
> 
> 赞同：0
> 
> 时间：2012-04-05T09:55:35.750
> 
> 标签：javascript, html, gwt, iframe

是否有将小部件添加到 GWT 中的 iFrame 的解决方案？

Widget 本身需要与 GWT 代码交互。

目的是拥有一个隐藏的 iframe，仅用于打印目的。我不能只是将内部内容复制到该 iframe 并显示，因为我有一些未重新绘制的画布元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:07:28.523

如果您选择将 表示`iframe`为 GWT `Composite`，则可以将其视为任何其他 GWT 组件并向其添加小部件。

[您可以在GWT 博客上关于小部件最佳实践的文章中](http://googlewebtoolkit.blogspot.com/2009/05/widget-best-practices-widget-building.html)进一步了解这种方法。

# ruby-on-rails - 尝试 Squeel 但符号似乎不起作用

> ID：10026419
> 
> 赞同：0
> 
> 时间：2012-04-05T09:55:45.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, squeel

我正在尝试以下查询

```
 results = Tickets.order("created_at DESC").where({
    (title =~ params[:title]) &
    (name =~ params[:from]) |
    (problem =~ params[:includes]) &
    (problem !~ params[:excludes])
  }) 
```

但出现以下错误

> > 语法错误，意外的 '}'，期待 tASSOC（问题！~ params[:excludes])}）

以及其他线路

但是squeel doc说要做：

```
Person.where{(name =~ 'Ernie%') & (salary < 50000) | (name =~ 'Joe%') & (salary > 100000)} 
```

ps，我发现了。第一个发现它也会打勾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:19:45.063

你有一组额外的括号：一个紧跟在“where”之后，一个在最后。

# geolocation - 安全（通过 https）IP 地址查找 API 服务

> ID：10026421
> 
> 赞同：2
> 
> 时间：2012-04-05T09:55:58.797
> 
> 标签：geolocation, ip-address, geo, ip-geolocation

是否有任何地理位置 api 服务，如 hostip.info，通过 https 工作

免费服务是首选

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:01:19.280

MaxMind 提供地理定位服务，您可以在自己的服务器上免费或通过他们的 API 离线使用：

*   [https://www.maxmind.com/app/geolitecity](https://www.maxmind.com/app/geolitecity)
*   [https://www.maxmind.com/app/geolitecountry](https://www.maxmind.com/app/geolitecountry)
*   [https://www.maxmind.com/app/locate_demo_ip](https://www.maxmind.com/app/locate_demo_ip)
*   [https://www.maxmind.com/app/api](https://www.maxmind.com/app/api)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T08:53:21.557

在某些路由器上，防火墙端口`80`被阻止，即在工作、学校或家中。因此，通过使用 HTTPS 或端口`433`，您可以扫描您所在位置的安全性或匿名性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T05:22:01.390

这家公司提供您正在寻找的东西，一个通过 HTTPS 工作的免费 API（不过，当您免费使用它时有一些限制）：[http ://www.IPAddressLabs.com](http://www.IPAddressLabs.com)

# javascript - 我的 Javascript 代码出错

> ID：10026424
> 
> 赞同：0
> 
> 时间：2012-04-05T09:56:14.083
> 
> 标签：javascript

你有一个数字数组。编写一个函数，将数组转换为返回原始数字的函数数组，因此我们将调用 a3，而不是调用 a[3]。例如：

transform([1,2,3]) → [function () {return 1;}, function () {return 2;}, function () {return 3;}] 请不要使用 'eval' 或 'new当我们考虑这些不良风格时，请在您的回答中使用“功能”。

我不能运行这个，我找不到一些错误

```
var arrayOfNum = [0,1,2];

var arraylength = arrayOfNum.length;

for(var i = 0; i < arraylength; i++){
var hold = arrayOfNum.pop();
function passValue(num){
arrayOfNum.unshift(function(){return hold;});
}
} 
```

谁能帮我指出这段代码中的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:58:07.450

您没有调用该`passValue`函数，因此在该`pop`行之后，实际上没有执行任何操作。我认为甚至不能调用该函数，因为它在`for`循环内的范围应该防止它被绑定到封闭函数。除了尝试重新定义函数 3 次...

```
var arrayOfNum = [0,1,2];
var arraylength = arrayOfNum.length;

for(var i = 0; i < arraylength; i++){
    var hold = arrayOfNum.pop();
    function passValue(num){
        arrayOfNum.unshift( function(){return hold;} );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:00:27.387

如果您使用 Firefox，您可以在错误控制台（工具 -> 错误控制台）中看到 javascript 错误。

你似乎根本没有错误，但我猜什么都没有发生。你到底想做什么？我在 forloop 中看到一个从未调用过的函数 passValue()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:13:52.670

实际上，你想做什么并不明显。我可能猜想你想用函数替换数字，如果是这样你可以写：

```
var arrayOfNum = [0,1,2];

var arraylength = arrayOfNum.length;

for(var i = 0; i < arraylength; i++){
    var hold = arrayOfNum.pop();
    function passValue(num){
        arrayOfNum.unshift(function(){return num;});
    }
    passValue(hold);
}

alert(arrayOfNum[0]()); //0
alert(arrayOfNum[1]()); //1
alert(arrayOfNum[2]()); //2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:49:19.573

使用*map*你可以达到预期的效果 + 非常简短和干净的代码：

```
arr = [1, 2, 3];
arr = arr.map(function(n) {
    return function() { return n; }
}); 
```

# c# - 这个 LinQ 有什么问题？

> ID：10026425
> 
> 赞同：0
> 
> 时间：2012-04-05T09:56:15.673
> 
> 标签：c#, .net, linq, linq-to-sql

这是我的 Linq 查询。这工作正常。问题是如果任何人在表中没有姓氏，则该行不会显示在结果中。我希望如果有人没有姓氏，那么它将是 User_Name= First Name +""。

```
var ShowFiles = from cm in db.Contact_Masters
                        join ta in db.Topic_Accesses on cm.Contact_ID equals ta.Contact_ID
                        join RelMess in db.Rel_Topics_Messages on ta.Topic_ID equals RelMess.Topic_ID
                        join Messages in db.Messages on RelMess.Message_ID equals Messages.Message_ID
                        join Files in db.Files on Messages.Message_ID equals Files.Message_ID
                        join FileType in db.Lkup_Files_Extensions on Files.TypeID equals FileType.TypeID
                        join FileVersion in db.File_Versions on Files.File_ID equals FileVersion.File_ID
                        join pcf in db.Contact_Personals on Messages.Contact_ID equals pcf.Contact_ID
                        where pcf.Personal_Type == new Guid("30102333-2104-40D7-8913-DC9048225D12") // Personal_Type = First Name ID
                        join pcl in db.Contact_Personals on Messages.Contact_ID equals pcl.Contact_ID
                        where pcl.Personal_Type == new Guid("9058F268-B707-4B0A-86E5-26E83A4BC1F5") // Personal_Type = Last Name ID 

                        where cm.Contact_ID == new Guid(ContactID) && ids.Contains(RelMess.Topic_ID)// parameters
                        && FileVersion.IsActive == true && Messages.IsActive == true && FileVersion.Version_ID == (from FileV in db.File_Versions
                                                                                                                   where FileV.File_ID == Files.File_ID 
                                                                                                                   && FileV.Message_ID == Messages.Message_ID 
                                                                                                                   && FileV.IsActive == true
                                                                                                                   select FileV.Version_ID).Max()
                        select new
                        {
                            File_Name = Convert.ToString(Files.File_Name),
                            Version_ID = Convert.ToString(FileVersion.Version_ID),
                            File_Size = Convert.ToString(FileVersion.File_Size),
                            Created = Convert.ToString(FileVersion.Created),
                            Type = FileType.Type,
                            File_URL = FileVersion.File_URL,
                            File_ID = Convert.ToString(FileVersion.File_ID),
                            User_Name = pcf.Value + " " + pcl.Value  
                        }; 
```

谢谢纳希德
_

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:17:13.197

尝试以下操作：

```
User_Name = pcf.Value + 
    (pcf.Value != null && pcf.Value.Trim() != string.Empty ? " " + pcl.Value : "") 
```

**编辑：删除了 IsNullOrWhiteSpace 的使用，感谢 Jacek**

# direct3d - 表面上的 D3D9 Alpha 混合

> ID：10026433
> 
> 赞同：0
> 
> 时间：2012-04-05T09:56:43.270
> 
> 标签：direct3d, alphablending, direct3d9

我有一个表面（OffScreenPlain 或带有 D3DFMT_A8R8G8B8 的 RenderTarget），我将像素 (ARGB) 从第三方函数复制到该表面。在像素复制之前，Bits 由 LockRect 访问。

然后这个表面是 StretchRect 到 Backbuffer，即 (D3DFMT_A8R8G8B8)。Surface 和 Backbuffer 是不同的维度。过滤设置为 D3DTEXF_NONE。

在创建 d3d 设备后，我设置了以下 RenderState 设置

```
D3DRS_ALPHABLENDENABLE -> TRUE
D3DRS_BLENDOP          -> D3DBLENDOP_ADD
D3DRS_SRCBLEND         -> D3DBLEND_SRCALPHA
D3DRS_DESTBLEND        -> D3DBLEND_INVSRCALPHA 
```

但我没有看到 alpha 混合发生。我已经验证了 alpha 是以像素为单位指定的。

我通过创建一个顶点缓冲区并绘制一个三角形（DrawPrimitive）来完成一个简单的测试，该三角形使用 alpha 混合显示。

在这个测试中，表面首先是 StretchRect，然后是 DrawPrimitive，表面内容显示时不使用 alpha 混合，而三角形显示时使用 alpha 混合。

我在这里想念什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:44:06.900

您提到的状态仅影响顶点。为了正确混合纹理，您需要指定纹理 alpha 如何与顶点混合。你这样做：

```
d3ddevice->SetTextureStageState(0, D3DTSS_ALPHAOP, D3DTOP_MODULATE);
d3ddevice->SetTextureStageState(0, D3DTSS_ALPHAARG1, D3DTA_TEXTURE);
d3ddevice->SetTextureStageState(0, D3DTSS_ALPHAARG2, D3DTA_DIFFUSE); 
```

默认`ALPHAOP`为`SELECTARG1`，即在渲染中仅考虑纹理 alpha。

另一种解决方案是使用`ID3DXSprite::Draw`将纹理复制到后台缓冲区的方法。只需`D3DCOLOR_ARGB(X, 255, 255, 255)`在 X 是您的 alpha 的地方传递颜色。此方法将进行所有状态调整，最终结果将符合您的期望。

# ios - 在 iO 上使用默认应用程序打开文件

> ID：10026438
> 
> 赞同：0
> 
> 时间：2012-04-05T09:57:03.447
> 
> 标签：ios, flash, air

我正在尝试`openWithDefaultApplication`在 iPad 上下载文件（存储在应用程序文档目录中）。我安装了`PDFReaderLite`，仍然`openWithDefaultApplication`没有 rexognizes 扩展`pdf`。我该怎么做才能成为`PDFReaderLite`打开 pdf 的默认应用程序？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:46:26.983

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#openWithDefaultApplication%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#openWithDefaultApplication%28%29)这表明 openWithDefaultApplication 是一个**桌面**功能。我认为iOS上甚至不存在默认应用程序功能......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T09:24:15.597

```
UIButton *button = (UIButton *)sender;
    NSURL *URL = [[NSBundle mainBundle] URLForResource:@"file_1" withExtension:@"pdf"];

    if (URL) {
        // Initialize Document Interaction Controller
        self.documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:URL];

        // Configure Document Interaction Controller
        [self.documentInteractionController setDelegate:self];

        // Present Open In Menu
        BOOL flag =[self.documentInteractionController presentOpenInMenuFromRect:[button frame] inView:self.view animated:YES];

        if (!flag) {

             //[appDel showAlert:@"There is no supported app installed in your phone"];
             [self.documentInteractionController presentPreviewAnimated:YES];
        } 
```

# iphone - 如何在另一幅图像中显示多个图像。

> ID：10026439
> 
> 赞同：0
> 
> 时间：2012-04-05T09:57:06.523
> 
> 标签：iphone, uiimageview

我正在开发一个应用程序。我需要在另一个 UIImageView 中显示 9 个 UIImageViews。如果我们单击任何图像，然后识别所选 UIImageView 并更改所选 UIImageView 的图像。下一次也需要做同样的事情，但我们需要用新更改的图像显示以前选择的图像。为此，我编写了类似的代码

```
for (int h=0; h<8; h++) 
      {
          int x=[[questions.marker_left objectAtIndex:h] intValue];
          int y=[[questions.marker_top objectAtIndex:h] intValue];
          img3=[[UIImageView alloc]initWithFrame:CGRectMake(x,y, 30, 30)];
          img3.userInteractionEnabled=YES;
          img1.userInteractionEnabled=YES;
          img3.tag=h;
          //img2.backgroundColor=[UIColor greenColor];
          img3.image=[UIImage imageNamed:@"PINpurple.png"];
          tap5=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(calculate:)];
          tap5.delegate=self;
          [img3 addGestureRecognizer:tap5];
          [img1 addSubview:img3];

      }

  -(void)calculate:(UITapGestureRecognizer*)recognizer
   {
      NSInteger i=(recognizer).view.tag;
     NSString *str=[questions.result objectAtIndex:i];
      NSLog(@"%@",str);
     if([str isEqualToString:@"true"])
        {
          img3.image=[UIImage imageNamed:@"PINgreen.png"];
        }
     else
        {
          img3.image=[UIImage imageNamed:@"PINred.png"];
          }
   } 
```

选择的图像将被更改，但在选择下一个 UIImageView 后，以前的 UIImageView 会得到旧图像。所以请帮助我，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:09:42.350

```
 //Edit In calculate function
    -(void)calculate:(UITapGestureRecognizer*)recognizer
    {
      NSInteger i=(recognizer).view.tag;

      //Detect selected UIImageView
      UIImageView *selectedImageView=(UIImageView*)recognizer.view;

      NSString *str=[questions.result objectAtIndex:i];

      NSLog(@"%@",str);

     if([str isEqualToString:@"true"])
        {
          selectedImageView.image=[UIImage imageNamed:@"PINgreen.png"];
        }
     else
        {
          selectedImageView.image=[UIImage imageNamed:@"PINred.png"];
        }
    } 
```

# php - PHP jQuery mySQL 填充 DROPDOWN 字段错误

> ID：10026440
> 
> 赞同：0
> 
> 时间：2012-04-05T09:57:07.980
> 
> 标签：php, jquery, mysql, drop-down-menu

我正在尝试从第二个选择中填充第二个下拉列表，但是每当我进行更改时，都没有更新。

```
<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script>
var second_choice = $('#second-choice').val();
$("#first-choice").change(function() {
$("$second-choice").load("findModel.php?choice=" + $("#first-choice").val());
});
</script> 
```

这是相关的 PHP 文件：

```
<?php
include 'dbc.php';

$choice = mysql_real_escape_string($_GET['choice']);

$query="SELECT * FROM `cars` WHERE `DVLAMake`='$choice'";
$result = mysql_query($query);

while ($row = mysql_fetch_array($result)) {
    echo "<option>" . $row{'DVLAModel'} . "</option>";
}
?> 
```

数据库连接有效。

...

```
<select id="first-choice">
<option selected value="base">Please Select a Make</option>
<?php 
$sql="SELECT DISTINCT `DVLAMake` FROM `cars`";
$result = mysql_query($sql);
while ($data=mysql_fetch_assoc($result))
{
echo "<option value =\"{$data[DVLAMake]}\" >{$data[DVLAMake]}</option>\n";
} 
?>
</select>

<select id="second-choice">
<option>Please choose from above</option>
</select>
<br />

<input type="submit" style="font-size:14px; padding:3;"value="Submit" size="20" />
</form> 
```

...

有什么理由吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:00:45.767

你这里有错字`$("$second-choice")`

```
$("#second-choice").load("findModel.php?choice=" + $("#first-choice").val()); 
```

编辑 - 你试过了吗

```
$(function(){
    var second_choice = $('#second-choice').val();
    $("#first-choice").change(function() {
        $("$second-choice").load("findModel.php?choice=" + $("#first-choice").val());
    });
}); 
```

# android - PhoneGap + JQM App 在 Android 4.0.3 中中断

> ID：10026445
> 
> 赞同：2
> 
> 时间：2012-04-05T09:57:28.533
> 
> 标签：android, jquery-mobile, cordova, chromium

我最近升级到 ICS 4.0.3 并尝试部署我的 PhoneGap (v 1.4.1) 和 JQM (1.1.0-rc-1) 应用程序，但它在第一页加载后崩溃。logcat 中有两个错误给了我线索，但我真的不明白发生了什么。

首先我得到

```
 04-05 02:36:38.366: D/chromium(1335): Unknown chromium error: -6 
```

紧随其后的是不少

```
 04-05 02:36:38.837: E/libEGL(1335): call to OpenGL ES API with no current context (logged once per thread)
 04-05 02:51:03.024: D/ShaderProgram(2887): couldn't load the vertex shader! 
```

我不知道发生了什么，我可以看到第二页呈现了大约 1/4 的内容，然后什么也没有。这在所有其他 android 版本中运行良好，但在 4.0.3 上失败。在模拟器和实际设备中。我发现了一些类似的问题，说它是铬的错误，必须解决或其他问题。我至少需要弄清楚罪魁祸首是 JQM 还是 android 浏览器，或者是什么元素导致了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:23:01.843

我经历过类似的事情，jquery getScript 根本不适用于 Android 4（它适用于所有其他平台）。我最终用一个简单的javascript函数替换了getScript（loadJs）：[加载外部JavaScript文件](https://stackoverflow.com/questions/8631400/load-external-javascript-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:34:42.933

我也遇到了这个问题，我发现了问题。
这是因为我在我的页面中使用了搜索和哈希...意思是 some_page.html?param=value
如果您删除参数，您将不会再收到错误

# ruby-on-rails - 在过滤器中处理 Flash 消息的正确方法

> ID：10026447
> 
> 赞同：1
> 
> 时间：2012-04-05T09:57:33.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我遇到的情况是，用户能够研究一些技术并因此获得一些回报。现在，这些奖励有点像能够创造一些物品，获得生产提升等等。

我目前正在做的是在我的控制器中处理闪存消息和重定向。所以，想象一个案例，为了创造一个项目，你必须研究一种特定的技术。我的控制器就像：

```
def create

    flash[:error] = I18n.t('error.not_researched') and redirect_to research_url and return if not current_user.has_research?(research)
    ....
    ....
end 
```

好吧，当然这很好用，但我不确定这是做事的最佳方式。我想也许可以使用 before_create 过滤器来做到这一点，但是这样，我不能真正设置 flash 消息，它几乎超出了范围。

因此，我想问一下您将如何在最佳实践方面进行处理，以便代码尽可能 DRY 并且编写得尽可能好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:27:26.747

实际上，问题不在于设置闪存消息。您可以通过在模型中进行验证，然后检查它是否保存在控制器中来做到这一点。

```
unless research.save
  flash[:error] = I18n.t('error.not_researched')
  redirect_to research_url
  return
end 
```

您的问题是您需要访问`current_user`，这表明控制器是进行此检查的正确位置。

关于样式的旁注：我认为如果您将检查分成几行，您的代码会更清晰。

```
unless current_user.has_research?(research)
  flash[:error] = I18n.t('error.not_researched')
  redirect_to research_url
  return
end 
```

# android - Android：总是强制关闭

> ID：10026449
> 
> 赞同：0
> 
> 时间：2012-04-05T09:57:39.260
> 
> 标签：android, nullpointerexception, android-lazyadapter

我正在使用基于此[链接上的@fedor 帖子的列表视图和惰性适配器构建应用程序](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

这是我的第一个活动：

```
public class MenuViewAll extends ListActivity {

// url to make request
private static String url = "http://10.0.2.2/culigui/getdataresto.php";
//public static String TAG_NAME,TAG_ADDRESS;
static final String KEY_ID = "id";
static final String KEY_NAME = "name";
static final String KEY_ADDRESS = "address";
static final String KEY_THUMB = "linkthumb";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu_view_all);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> userList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting JSONArray of listresto
        JSONArray  listresto = json.getJSONArray("listresto");

        // looping through All listresto
        for(int i = 0; i < listresto.length(); i++){
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject list = listresto.getJSONObject(i);

            // insert String to Local Variable
            map.put(KEY_ID, list.getString("id_resto"));
            map.put(KEY_NAME, list.getString("nama_resto"));
            map.put(KEY_ADDRESS, list.getString("alamat_resto"));
            map.put(KEY_THUMB, list.getString("thumb_img"));
            userList.add(map);

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */

    adapter = new LazyAdapter(this, userList);
    list.setAdapter(adapter);

   // ListView yourListView = getListView() 
```

}

这是我的懒惰适配器类：

```
public class LazyAdapter extends BaseAdapter  {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.listitemviewall, null);

    TextView namaresto = (TextView)vi.findViewById(R.id.name); // resto name
    TextView alamatresto = (TextView)vi.findViewById(R.id.address); // resto address
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.defaultthumb); // thumb image

    HashMap<String, String> resto = new HashMap<String, String>();
    resto = data.get(position);

    // Setting all values in listview
    namaresto.setText(resto.get(MenuViewAll.KEY_NAME));
    alamatresto.setText(resto.get(MenuViewAll.KEY_ADDRESS));
    imageLoader.DisplayImage(resto.get(MenuViewAll.KEY_THUMB), thumb_image);
    return vi;
}} 
```

在我运行我的代码之后，这里是 logcat：

```
04-05 14:51:32.714: D/dalvikvm(311): GC_EXTERNAL_ALLOC freed 869 objects / 60304 bytes in 76ms
04-05 14:51:46.235: D/dalvikvm(311): GC_EXTERNAL_ALLOC freed 757 objects / 43592 bytes in 362ms
04-05 14:51:46.945: D/AndroidRuntime(311): Shutting down VM
04-05 14:51:46.945: W/dalvikvm(311): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-05 14:51:46.975: E/AndroidRuntime(311): FATAL EXCEPTION: main
04-05 14:51:46.975: E/AndroidRuntime(311): java.lang.RuntimeException: Unable to start activity ComponentInfo{last.project.CuliGUI/last.project.CuliGUI.MenuViewAll}: java.lang.NullPointerException
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.os.Looper.loop(Looper.java:123)
04-05 14:51:46.975: E/AndroidRuntime(311):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-05 14:51:46.975: E/AndroidRuntime(311):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 14:51:46.975: E/AndroidRuntime(311):  at java.lang.reflect.Method.invoke(Method.java:521)
04-05 14:51:46.975: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-05 14:51:46.975: E/AndroidRuntime(311):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-05 14:51:46.975: E/AndroidRuntime(311):  at dalvik.system.NativeStart.main(Native Method)
04-05 14:51:46.975: E/AndroidRuntime(311): Caused by: java.lang.NullPointerException
04-05 14:51:46.975: E/AndroidRuntime(311):  at     last.project.CuliGUI.MenuViewAll.onCreate(MenuViewAll.java:102) 
```

我的程序总是强制关闭...也许有人可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:03:11.040

您应该注意这部分错误：

```
 04-05 14:51:46.975: E/AndroidRuntime(311): Caused by: java.lang.NullPointerException
04-05 14:51:46.975: E/AndroidRuntime(311):  at     last.project.CuliGUI.MenuViewAll.onCreate(MenuViewAll.java:102) 
```

特别是：

```
MenuViewAll.java:102 
```

这意味着该行中的某些内容（我不会数行:)）是`NULL`，但是您尝试使用它。寻找可能的对象的使用`NULL`

示例（只是一个示例，因为我不知道它是哪一行）。让我们说这一行：

```
JSONObject list = listresto.getJSONObject(i); 
```

由于某种原因出错。（没有`JSONobject` `i`，listresto 是假的，我不知道）。然后在这个之后：

```
 map.put(KEY_ID, list.getString("id_resto")); 
```

将给出一个空指针，因为您不能`getString`对`NULL`对象执行此操作。

所以：

*   找到线
*   找到对象
*   修复它为 NULL 的原因，或者确保你事先处理它
*   ...
*   利润

# android - 如何在 Tab 中从谷歌地图中的 onTap 方法开始新活动？

> ID：10026451
> 
> 赞同：1
> 
> 时间：2012-04-05T09:57:52.057
> 
> 标签：android, google-maps, tabs, android-activity

我只有 2 个选项卡，并使用[Experience - Multiple Android Activity in a TabActivity](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)作为参考。
我的类体系结构是这样的：
**MainActivity** 扩展 TabActivity
1\. **TabGroup1Activity**扩展 TabGroupActivity （从上面的参考实现的 TabGroupActivity 类）
1.i。**Tab1Activity**扩展 MapActivity（它有多个标记）
2\. **TabGroup2Activity**扩展 TabGroupActivity
2.i。**Tab2Activity**

在第二个选项卡（Tab2Activity）中，我显示了具有多个标记的谷歌地图。在点击标记时，我想在同一选项卡下开始新的活动，而不会丢失底部的选项卡。
这是 ItemizedOverlayItem 类：

**MapItemizedOverlay.java**

```
public class MapItemizedOverlay extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;

public InformationItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));

    mContext = context;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {

    OverlayItem item = mOverlays.get(index);

    //what code i have to write to start new activity without loosing tabs at bottom

}
} 
```

我知道我必须编写以下代码才能在同一选项卡下启动新活动，但对于上面的示例，我无法编写 getParent()。

```
Intent in = new Intent(getParent(), TestActivity.class);
TabGroupActivity parentActivity = (TabGroupActivity) getParent();
parentActivity.startChildActivity("in", in); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:11:22.313

只需将父级作为参数从您调用“InformationItemizedOverlay”的位置传递。

可能是您从代码中的某个位置调用如下。

InformationItemizedOverlay informationItemizedOverlay = new InformationItemizedOverlay(drawable,context);

所以改变它如下

```
InformationItemizedOverlay informationItemizedOverlay = new InformationItemizedOverlay(drawable,context,getParent()); 
```

也适当地改变“InformationItemizedOverlay”的构造函数.....

# javascript - jQuery TR 垂直滚动器？

> ID：10026452
> 
> 赞同：1
> 
> 时间：2012-04-05T09:57:52.957
> 
> 标签：javascript, jquery

我知道有用于垂直滚动列表的 JQuery 插件，但我有一个表格并想垂直滚动

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:28:43.060

我相信你会想要使用`Fixed Header Table` 这个插件来帮助你实现它：[http ://www.tablefixedheader.com/](http://www.tablefixedheader.com/)

还有另一个插件可以让您修复 Header 和 Columns，但是由于 jquery 站点的插件部分已被删除，它似乎已经不复存在了！我已将它上传到我的网站，您可以从那里下载：http: [//files.bpratik.in/jquery.fixer-1.41.zip](http://files.bpratik.in/jquery.fixer-1.41.zip)

将它应用到表格就像这样简单：

```
$('table').fixer({
    fixedrows:1,
    fixedcols:1
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:03:31.463

如果我理解你的话......你不需要插件来做到这一点。只需将类添加到此表或 id，然后从下面的 css 集代码到此 id/类：

```
#youTable{
overflow-x: hidden;
overflow-y:scroll;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:05:31.540

据我所知 - 你不能滚动表格

相反，您所做的是将表格放入 div 并使 div 可滚动。

# sqlite - SQLite 引擎的全文搜索。我在哪里可以找到它？

> ID：10026456
> 
> 赞同：2
> 
> 时间：2012-04-05T09:58:00.387
> 
> 标签：sqlite, full-text-search

我想知道，在哪里可以找到关于sqlite db中全文搜索实现的详细信息？它是程序代码的唯一来源吗？它工作得很好（FTS3 和 FTS4 扩展），但我需要知道实现的理论基础。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:27:17.033

只需向您发送一个完美而详细的链接： [http ://www.sqlite.org/fts3.html#section_3](http://www.sqlite.org/fts3.html#section_3)

存在类似问题： [SQLite全文搜索目录](https://stackoverflow.com/questions/4519854/sqlite-full-text-search-catalog)

# ios5 - 无法在 GROUPED TABLE VIEW iOS 4 中为表格单元格设置背景图像

> ID：10026457
> 
> 赞同：1
> 
> 时间：2012-04-05T09:58:02.210
> 
> 标签：ios5, uitableview, ios4, colors, background-color

如果我在 iOS 5 + 中使用以下行，它可以完美运行。

```
cell.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.2]; 
```

但这在 iOS 4 中不起作用。我也尝试过关注但它不起作用。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    cell.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.2];
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    for (UIView *subview in [cell.contentView subviews]) {
        subview.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.2];
    }
} 
```

如果我在 willDisplayCell 中设置颜色，它会显示单元格的黑色背景。如何设置适用于 iOS 4 和 iOS 5 的背景单元格颜色。

感谢任何帮助。谢谢

# java - 如何使用 JSP 在 PSQL 中将表的输出显示为 XML 函数

> ID：10026476
> 
> 赞同：0
> 
> 时间：2012-04-05T09:59:17.890
> 
> 标签：java, jsp, postgresql, object

我正在尝试显示以下输出：

```
select * from table_to_xml('"person_data1"',false,true,''); 
```

在 JSP 页面中。我在终端和 pgadmin3 中都得到了输出。

我创建了一个 Java 函数来执行上述查询，该函数会将结果集返回到 JSP 页面。

```
ResultSet rs1=common2.tabletoxml("person_data1");
while (rs1.next())
           {   
            out.print(rs1.getString(1));// when i tried this i got all data but not in xml form so I tried this 
            out.print(rs1.getSQLXML(1));//got object name
            } 
```

我应该怎么做才能在 JSP 页面中获取 XML 值？我试过`valueOf()`了，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T22:00:15.617

我建议尝试将函数的结果转换为文本，并可能在您使用它时稍微简化查询：

```
select table_to_xml('"person_data1"',false,true,'')::text; 
```

然后，您应该可以使用`getString(1)`.

# c# - fb框架高度停留在800px

> ID：10026478
> 
> 赞同：1
> 
> 时间：2012-04-05T09:59:22.900
> 
> 标签：c#, asp.net, facebook

我的 Facebook 应用 iframe 高度停留在 800 像素。我在 facebook 开发人员的应用程序管理面板中将其设置为 2800 的固定高度。一些名为 .canvas_iframe_util 的样式覆层将其设置为 800 像素，我无法更改或编辑它。我假设它来自facebook。有人有什么想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:24:24.900

尝试使用此功能并将正文溢出设置为隐藏

```
window.fbAsyncInit = function() {
    FB.Canvas.setSize({ width: xx, height: XX });
} 
```

和

```
body{
  overflow:hidden;
} 
```

并且记得在管理面板中将高度更改为流体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:49:14.633

我有同样的问题，经过大量的研发后，我想出了以下针对不同浏览器的解决方案。所以我为所有浏览器实现了不同的 html 和 body 样式。它现在可以在每个浏览器上运行 :)

```
<?php
$u_agent = $_SERVER['HTTP_USER_AGENT'];
if(preg_match('/Firefox/i',$u_agent))
{
 $style_overflow = "overflow:hidden;";
}
else
{
    $style_scroll = "scroll='no'";
}
?>

<html style="<?php echo $style_overflow; ?>" xmlns:fb="http://www.facebook.com/2008/fbml" xmlns='http://www.w3.org/1999/xhtml'>
<!---other html code -->
<body style="<?php echo $style_overflow; ?>" <?php echo $style_scroll;?>>       

<script>
var fbAppId = '<?php echo FB_APP_ID?>';

window.fbAsyncInit = function()
{
    FB.init(
        {
            appId: '<?php echo FB_APP_ID ?>',
            status:true,
            cookie: true,
            xfbml: true, 
            oauth: true
        }
    );

     function sizeChangeCallback() {

        FB.Canvas.setAutoGrow();
    }
     FB.XFBML.parse();

     FB.Canvas.setAutoGrow(); 

};
(function()
{
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
    '//connect.facebook.net/en_US/all.js'; //hi_IN for language plugins
    document.getElementById('fb-root').appendChild(e);
}()
); 
```

# iis-7 - HTTPS 影响 IIS7 上的多个 http 站点

> ID：10026479
> 
> 赞同：1
> 
> 时间：2012-04-05T09:59:23.410
> 
> 标签：iis-7

有人可以向我解释如何解决这个问题。

我在同一个 IIS7 服务器上托管了两个站点。

站点 2 具有 SSL 设置，可在[https://www.site2.co.uk找到](https://www.site2.co.uk)

站点 1 没有 ssl 设置并绑定在[http://www.site1.co.uk](http://www.site1.co.uk)

现在如果你去[https://www.site1.co.uk](https://www.site1.co.uk)它会在谷歌上抛出这个错误：

**这可能不是您要查找的网站！您试图访问 www.site1.co.uk，但实际上您访问的是一个自称为 www.site2.co.uk 的服务器**

我尝试在 site1 的 webconfig 文件中使用 URl 重写来阻止它查看端口 443 但没有运气:(。

还尝试编辑 applicationhost.config 以包含以下行，但效果不佳

在这个问题上任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:07:44.737

这是由于 SSL 原始设计的限制，服务器必须在不知道客户端想要什么主机名的情况下提供证书。因此，如果您在同一个 IP 地址上托管两个站点，则服务器必须选择一个主机名来呈现给客户端。

TLS SNI 修复了这个问题，但在 IIS 7 中不可用（从 IIS 8 开始可用）：

[http://en.wikipedia.org/wiki/Server_Name_Indication](http://en.wikipedia.org/wiki/Server_Name_Indication)

由于许多浏览器也不支持 SNI，因此通常运行具有多个 IP 地址的单个 Web 服务器，每个站点一个 IP 地址。

# cakephp - CakePHP 密码没有得到哈希值

> ID：10026480
> 
> 赞同：1
> 
> 时间：2012-04-05T09:59:24.970
> 
> 标签：cakephp, cakephp-2.1

我正在使用 CakePHP 2.1 并且我正在尝试进行用户注册，密码在保存到数据库之前不会被散列。

我们是否需要 Auth 才能发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:51:24.203

Cake 2.x 不会自动为您散列密码，如下所述：

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authentication-login-and-logout](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html#authentication-login-and-logout)

做出这个决定是因为自动哈希太神奇了，并且会干扰验证等事情。`beforeSave`因此，在您的 User 模型上添加一个简单的内容即可解决问题！

# iphone - “捆绑标识符与之前的捆绑标识符不同”上传新版本 iPhone 应用的 .app 时出错

> ID：10026484
> 
> 赞同：2
> 
> 时间：2012-04-05T09:59:37.847
> 
> 标签：iphone, ios, app-store

在为我的 iPhone 应用程序的下一个版本上传 .app 文件时，我收到此错误“捆绑包标识符与以前的捆绑包标识符不同”。

注意：我已经撤销了旧的分发证书并重新生成了它。

可能的解决方案是什么？

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:20:00.403

如果您正在创建先前应用程序的新版本，则必须检查给定条件

*   必须要求与您的应用程序信息中相同的版本，就像您在 iTunes 上创建新版本时提到的那样。您的应用程序信息文件中的示例示例 V1.2 与您在 itunesconnect 上为您的应用程序创建新版本时提到的详细信息相同。

# javascript - 使用事件监听器来测量页面上的时间

> ID：10026488
> 
> 赞同：0
> 
> 时间：2012-04-05T09:59:57.130
> 
> 标签：javascript, google-analytics

```
 function addOnloadEvent(func) {
        var oldOnload = window.onload;
        if (typeof window.onload != 'function') {
            window.onload = func;
        } else {
            window.onload = function () {
                if (oldOnload) {
                    oldOnload();
                }
                func();
            }
        }
    }

    addOnloadEvent(loadIt);

    function addOnunloadEvent(func) {
        var oldOnunload = window.onunload;
        if (typeof window.onunload != 'function') {
            window.unonload = func;
        } else {
            window.onunload = function () {
                if (oldunOnload) {
                    oldOnunload();
                }
                func();
            }
        }
    }

    addOnunloadEvent(unloadIt)

    function loadIt() {
        timeTracker._recordStartTime();
    }

    function unLoadIt() {
        timeTracker._recordEndTime();
        timeTracker._track(pageTracker, 'Category', 'Action'); 
```

我使用上面的代码来实现这个例子，用于 GA 事件跟踪来衡量花费的时间量

```
<html>  
<head>  
<title>Latency Tracking Demo</title>  
</head>  
<body>  
<script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>  
<script type="text/javascript" src="http://www.example.com/scripts/time-tracker.js"></script>  
<script type="text/javascript">  
var timeTracker = new TimeTracker();  
var pageTracker = _gat._getTracker('UA-1735986-1');   
</script>  
<input type="button" value="Start Timer" onclick="timeTracker._recordStartTime();"/>  
<input type="button" value="Stop Timer" onclick="timeTracker._recordEndTime();"/>  
<input type="button" value="Track!" onclick="timeTracker._track(pageTracker, undefined, 'Manual Test');"/>  
</body>  
</html> 
    } 
```

这个想法是我想测量从加载页面到用户导航离开的时间量。我使用了 GA 事件跟踪，因为我想将其视为事件并相应地对其进行分组。

一些想法我可以如何实现这个？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:11:16.730

当我们使用`TimeTracker`代码时，我们有这样的事情：

```
timeTracker._recordEndTime();
timeTracker._track(pageTracker, 'TimeTracker', timeTracker._getTimeDiff()); 
```

您现在可能还知道 Google Analytics 现在支持页面加载时间的采样。在新界面中，位于内容 - 站点速度下。

![在此处输入图像描述](../Images/26fdcd6ea725e0f1cb3d2b744574a481.png)

# xml - XSLT 在正确的位置添加节点

> ID：10026489
> 
> 赞同：1
> 
> 时间：2012-04-05T10:00:02.647
> 
> 标签：xml, xslt, positioning

我有以下 XML 结构：

```
<Main>
    <Node1>Definite</Node1>
    <Node2>Definite</Node2>
    <Node3>Definite</Node3>
    <Node4>Definite</Node4>
    <Node5>Definite</Node5>
    <Node6>Definite</Node6>
    <A>Possible</A>
    <B>Possible</B>
    <C>Possible</C>
    <D>Possible</D>    
    <E>Possible</E>
    <F>Possible</F>
    <G>Possible</G>
    <H>Possible</H>
    <I>Possible</I>
</Main> 
```

节点命名为单个字母，例如。`<A>`是 XML 结构中可能不存在的节点，而所有其他节点都是确定的。

我需要`<ZZZ>`在结构中插入节点，以便它始终位于如下所示的位置。

```
<Main>
    <Node1>Value</Node1>
    <Node2>Value</Node2>
    <Node3>Value</Node3>
    <Node4>Value</Node4>
    <Node5>Value</Node5>
    <Node6>Value</Node6>
    <A>Value</A>
    <B>Value</B>
    <C>Value</C>
    <D>Value</D>    
    <E>Value</E>
    <ZZZ>Value</ZZZ>
    <F>Value</F>
    <G>Value</G>
    <H>Value</H>
    <I>Value</I>
</Main> 
```

所以说节点`<E>`和`<C>`不`<H>`存在它会是：

```
<Main>
    <Node1>Value</Node1>
    <Node2>Value</Node2>
    <Node3>Value</Node3>
    <Node4>Value</Node4>
    <Node5>Value</Node5>
    <Node6>Value</Node6>
    <A>Value</A>
    <B>Value</B>
    <D>Value</D>    
    <ZZZ>Value</ZZZ>
    <F>Value</F>
    <G>Value</G>
    <I>Value</I>
</Main> 
```

希望这解释得足够清楚:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:31:03.167

好吧，这取决于需要哪些元素，哪些是可选的！例如，如果你可以说 <F> 是必需的，你可以在 F 元素之前插入 ZZZ 元素：

```
<xsl:template match="node() | @*">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="F">
    <ZZZ>Value</ZZZ>
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="node()"/>
    </xsl:copy>
</xsl:template> 
```

如果你不能说，有一个必需的元素，你需要在模板中插入主元素：

```
<xsl:template match="Main">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="Node1|Node2|Node3|Node4|Node5|Node6|A|B|C|D|E"/>
        <ZZZ>Value</ZZZ>
        <xsl:apply-templates select="F|G|H|I"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:00:08.853

**一个更通用的解决方案，可以适应任何动态指定的名称和任何数量的确定或可能的名称**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:occurences>
    <definites>
        <definite>Node1</definite>
        <definite>Node2</definite>
        <definite>Node3</definite>
        <definite>Node4</definite>
        <definite>Node5</definite>
        <definite>Node6</definite>
    </definites>
    <possibles>
        <possible>A</possible>
        <possible>B</possible>
        <possible>C</possible>
        <possible>D</possible>
        <possible>E</possible>
        <possible>F</possible>
        <possible>G</possible>
        <possible>H</possible>
        <possible>I</possible>
    </possibles>
 </my:occurences>

 <xsl:variable name="vOccurencies" select=
   "document('')/*/my:occurences"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:apply-templates select=
    "*[name() =
        ($vOccurencies/definites/definite
        |
         $vOccurencies/possibles/possible
                  [not(position()
                  >
                   string-length(substring-before($vOccurencies/possibles, 'F')))
                   ]
         )
       ]"/>
   <ZZZ>Value</ZZZ>
   <xsl:apply-templates select=
   "*[name()
     =
      $vOccurencies/possibles/possible
                  [position()
                  >
                   string-length(
                      substring-before($vOccurencies/possibles, 'F')
                                )
                   ]
     ]"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Main>
    <Node1>Value</Node1>
    <Node2>Value</Node2>
    <Node3>Value</Node3>
    <Node4>Value</Node4>
    <Node5>Value</Node5>
    <Node6>Value</Node6>
    <A>Value</A>
    <B>Value</B>
    <C>Value</C>
    <D>Value</D>
    <E>Value</E>
    <ZZZ>Value</ZZZ>
    <F>Value</F>
    <G>Value</G>
    <H>Value</H>
    <I>Value</I>
</Main> 
```

**产生了想要的正确结果**：

```
<Main>
   <Node1>Value</Node1>
   <Node2>Value</Node2>
   <Node3>Value</Node3>
   <Node4>Value</Node4>
   <Node5>Value</Node5>
   <Node6>Value</Node6>
   <A>Value</A>
   <B>Value</B>
   <C>Value</C>
   <D>Value</D>
   <E>Value</E>
   <ZZZ>Value</ZZZ>
   <F>Value</F>
   <G>Value</G>
   <H>Value</H>
   <I>Value</I>
</Main> 
```

**请注意**：

在实际情况下，`my:occurances`元素将位于其单独的 XML 文档中——因此 XSLT 代码没有硬编码的元素名称，并且在发生 xml 文档更改时无需修改。

# cocoa - 自定义菜单项中的按钮未显示工具提示

> ID：10026490
> 
> 赞同：1
> 
> 时间：2012-04-05T10:00:03.040
> 
> 标签：cocoa

我在模式窗口中有一个 NSPopUpButton 对象。我已将自定义视图设置为与弹出按钮对象关联的菜单项。在那个自定义视图中，我有两个子视图，一个 NSTextfield 对象和另一个 NSButton 对象。我也为对象和自定义视图设置了工具提示。再次。我也为菜单项设置了工具提示。

令我惊讶的是，没有显示自定义视图及其子视图的工具提示，而显示了菜单项的工具提示。

另一方面，如果在非模态窗口中设置相同的程序，则显示所有工具提示。

谁能解释为什么不显示模态窗口上对象的工具提示？

# java - Android ProGuard“java.lang.nosuchfielderror: Toast”异常

> ID：10026491
> 
> 赞同：11
> 
> 时间：2012-04-05T10:00:11.460
> 
> 标签：java, android, proguard

我用 ProGuard 混淆了我的 Android 应用程序，当尝试运行我混淆的 .apk 时，它会抛出：

> java.lang.nosuchfielderror：吐司

这是我的 proguard.cfg 文件：

```
<!-- language: lang-none -->

    -injars      bin/classes //injars
    -injars      libs   //injars
    -outjars     bin/classes-processed.jar
    -optimizationpasses 1
    -dontusemixedcaseclassnames
    -dontskipnonpubliclibraryclasses
    -dontpreverify
    -verbose
    -allowaccessmodification
    -keepattributes *Annotation*
    -optimizations !code/simplification/arithmetic,!field/*,!class/merging/*
    -printmapping D:/out.map
    -renamesourcefileattribute ProGuard
    -keepattributes Exceptions,InnerClasses,Signature,Deprecated,
        SourceFile,LineNumberTable,*Annotation*,EnclosingMethod
    -libraryjars C:/Program Files/Android/android-sdk/platforms/android
        12/android.jar    
    -dontwarn android.support.**
    -dontwarn com.android.**
    -dontwarn com.google.**
    -dontwarn org.apache.** 
    -keep public class * extends android.app.Activity
    -keep public class * extends android.app.Application
    -keep public class * extends android.app.Service
    -keep public class * extends android.content.BroadcastReceiver
    -keep public class * extends android.content.ContentProvider
    -keep public class * extends android.app.backup.BackupAgentHelper
    -keep public class * extends android.preference.Preference
    -keep public class com.android.vending.licensing.ILicensingService
    -keepclasseswithmembernames class * {
        native <methods>;
    }

    -keepclasseswithmembers class * {
        public <init>(android.content.Context, android.util.AttributeSet);
    }

    -keepclasseswithmembers class * {
        public <init>(android.content.Context, android.util.AttributeSet, int);
    }

    -keepclassmembers class *.R$ {
        public static <fields>;
    }

    -keepclassmembers enum * {
        public static **[] values();
        public static ** valueOf(java.lang.String);
    }

    -keep class * implements android.os.Parcelable {
        public static final android.os.Parcelable$Creator *;
    }   

    -keepclassmembers class * extends android.app.Activity {
        public void *On*Click(android.view.View);
       public void *on*Click(android.view.View);
    }

    -keepclassmembers class * implements java.io.Serializable {
        static final long serialVersionUID;
        private static final java.io.ObjectStreamField[] serialPersistentFields;
        private void writeObject(java.io.ObjectOutputStream);
        private void readObject(java.io.ObjectInputStream);
        java.lang.Object writeReplace();
        java.lang.Object readResolve();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:14:02.673

看来您正在使用 ACRA 进行错误报告。我遇到了同样的问题，在这里找到了答案：[http ://code.google.com/p/acra/issues/detail?id=22](http://code.google.com/p/acra/issues/detail?id=22)

解决方案是添加

`-keep class org.acra.ReportingInteractionMode { *; }`

到你的 proguard 配置文件

# oracle10g - 更新 oracle 数据库中 24 小时日期时间字段中的小时数

> ID：10026499
> 
> 赞同：2
> 
> 时间：2012-04-05T10:00:30.930
> 
> 标签：oracle10g

我正在尝试将日期时间字段中的时间更新为

```
UPDATE table_name 
   SET col_name=to_DATE('04/02/2012 00:12:00','MM/DD/YYYY HH24:MI:SS') 
WHERE col_name1='rer'; 
```

在db中更新后，`output`是这样的

`'04/02/2012 12:12:00'`

额外`12`添加在小时字段中，
我怎样才能使它不添加额外`12`的小时字段？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T06:52:25.997

UPDATE 语句没问题。它不会在您的日期列中添加任何“额外的 12”。您遇到的唯一问题是显示值。日期列不以任何特定格式存储其值，例如“MM/DD/YYYY HH24:MI:SS”，它包含二进制数据。当你用这样的语句查询你的表时

```
SELECT col_name FROM table_name 
```

日期使用会话的 NLS_DATE_FORMAT 显示，可能是“MM/DD/YYYY HH:MI:SS”。在这种格式中，您的日期显示为“04/02/2012 12:12:00”。如果您在会话中运行以下语句

```
ALTER SESSION SET NLS_DATE_FORMAT='MM/DD/YYYY HH24:MI:SS'; 
```

然后你的查询

```
SELECT col_name FROM table_name 
```

您将看到所需格式的日期。其他方法是使用 TO_CHAR 之类的

```
SELECT TO_CHAR(col_name, ''MM/DD/YYYY HH24:MI:SS') FROM table_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:23:25.803

只是猜测，用于格式化输出的字符串中可能存在错误，“HH24”中缺少“24”。由于您只有上面列出的输入（而不是输出）的格式字符串，我不能说是否是这种情况。这是我的意思的一个例子。

**查询一：**

```
select to_char(to_date('04/02/2012 00:12:00','MM/DD/YYYY HH24:MI:SS'), 
    'mm/dd/yyyy HH24:mi:ss') from dual; 
```

**结果1：**

```
04/02/2012 00:12:00 
```

**查询 2：**

```
select to_char(to_date('04/02/2012 00:12:00','MM/DD/YYYY HH24:MI:SS'), 
    'mm/dd/yyyy HH:mi:ss') from dual; 
```

**结果 2：**

```
04/02/2012 12:12:00 
```

需要明确的是，我认为您的问题的解决方案可能是检查您的选择语句中的格式，并选择您的数据，如下所示：

```
SELECT to_char(col_name,'MM/DD/YYYY HH24:MI:SS') FROM table_name WHERE col_name1='rer'; 
```

# multithreading - WCF：对客户端中的异步与线程的怀疑

> ID：10026501
> 
> 赞同：0
> 
> 时间：2012-04-05T10:00:36.127
> 
> 标签：multithreading, wcf, asynchronous

如果我调用服务器可能需要很长时间，建议在服务器合同中使用异步方法。

在这种情况下，要创建代理，我必须表明我要创建异步方法。

但是，我想知道如果我在客户端使用线程来调用服务，也许不需要使用异步方法，因为这个辅助线程可以等待结果而不会阻塞客户端。我使用的是 .NET 4.0，所以我可以使用任务。

这是对的？如果这是正确的，最好的方法是什么，使用异步方法或在客户端使用线程？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:08:50.440

我个人会推荐异步方法，主要是因为微软在 .NET 4.5 中明确采用的方向 - C# 5 中将提供语言支持，以使使用异步 API 变得非常简单。您的客户端代码无需担心线程之间的编组以确保 UI 仅在正确的线程中更新，单独创建线程等 - 它可以“等待”服务结果，并且它将“做正确的事情” .

这种支持没有什么*神奇之处*——仍然需要处理任何基本的潜在并发问题——但平台会为您处理容易出错的样板文件，这将使查看和处理固有的、不可避免的复杂性变得更加容易。

# java - 未知数量元素的Java布局

> ID：10026503
> 
> 赞同：2
> 
> 时间：2012-04-05T10:00:44.500
> 
> 标签：java, swing, layout, layout-manager

我们有一个面板，它显示一个带有任意数量的`JTextFields`,`JComboBoxes`和`JTextAreas`（每个都有一个对应的`JLabel`）的表单。

当前代码使用 a`GridBagLayout`但我想知道是否已经有此类任务的布局（`WrapLayout`目前正在使用但对齐字段似乎很棘手）。

有没有特别适合这个的布局，或者我最好还是坚持我们已经拥有的可爱的 GridBagLayout 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:45:43.137

创建表单时，我几乎总是推荐[JGoodies作为布局。`FormLayout`](http://www.jgoodies.com/freeware/formsdemo/index.html)该[文档](http://www.jgoodies.com/articles/forms.pdf)包含一个具有动态数量的组件的布局示例（代码片段 6，我在此处复制粘贴给您一个想法）

```
FormLayout layout = new FormLayout(
“right:max(40dlu;p), 4dlu, 80dlu, 7dlu, ” // 1st major column
+ “right:max(40dlu;p), 4dlu, 80dlu”, // 2nd major column
“”); // add rows dynamically
DefaultFormBuilder builder = new DefaultFormBuilder(layout);
builder.setDefaultDialogBorder();
builder.appendSeparator(“Segment”);
builder.append(“Identifier”, idField);
builder.nextLine();
builder.append(“PTI [kW]”, ptiField);
builder.append(“Power [kW]”, powerField);
builder.append(“len [mm]”, lenField);
builder.nextLine();
builder.appendSeparator(“Diameters”);
builder.append(“da [mm]”, daField);
builder.append(“di [mm]”, diField);
builder.append(“da2 [mm]”, da2Field);
builder.append(“di2 [mm]”, di2Field);
builder.append(“R [mm]”, rField);
builder.append(“D [mm]”, dField); 
```

他们通过 Java web start[提供了一个演示](http://www.jgoodies.com/download/demos/forms/formsdemo.jnlp)

# javascript - jquery-function 不显示任何内容

> ID：10026518
> 
> 赞同：0
> 
> 时间：2012-04-05T10:01:41.863
> 
> 标签：javascript, jquery

我正在尝试创建一个随机生成器，如果发现提示，则在另一个页面上使用 jQuery 会很容易，所以我尝试了以下操作。

```
<html>
 <head>
  <title>hello</title>
 </head>
 <body>
  <script type="text/javascript">
   $ (document).ready(function() {
    $("body").load("hello.txt", function(msg) {
        var textArray = msg.split("\n");
    var zufall = Math.round ( ( textArray.length - 1 ) * ( Math.random() ) );
    });
   });
   document.write('<p>' + textArray[zufall] + '</p>');
  </script>
 </body>
</html> 
```

它应该像这样工作：它加载一个包含多行文本的文档，并在换行符处将其拆分。这应该存储在一个数组中，并且应该在网站上显示一条随机线。

我的第一个想法是将文本直接写入数组，但我认为加载它对网站来说会更有效。

谢谢回答

PS：当浏览器运行它时，没有像“此页面上的错误”这样的错误消息。

**最终编辑**：

谢谢帮忙！！！现在它起作用了。

这是解决方案：

```
<html>
    <head>
        <title>hello</title>
    </head>
    <body>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
            <script type="text/javascript">
            $ (document).ready(function() {
                 $.get("hello.txt", function(msg) {
                    var textArray = msg.split("\n");
            var zufall = Math.round ( ( textArray.length - 1 ) * ( Math.random() ) );

            $('body').append('<p>' + textArray[zufall] + '</p>');
                });
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:03:57.813

你需要把`document.write()`你的`function(msg)`因为AJAX是异步的并且`load`正在使用AJAX，所以`document.write()`不要等到`load`完成调用你的匿名函数

```
 $(document).ready(function() {
    $.get("hello.txt", function(msg) {
        var textArray = msg.split("\n");
        var zufall = Math.round ( ( textArray.length - 1 ) * ( Math.random() ) );
        $('body').append('<p>' + textArray[zufall] + '</p>');
    });
   }); 
```

编辑：

我刚刚注意到您没有包含您的 jquery 库 o_O

在您的上方添加以下内容`<script>`

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:16:15.217

NiftyDude 是对的，您已将 document.write 调用置于 document.ready 函数的范围之外。还：

*   使用 document.write 也几乎总是一个坏主意。在这种情况下，您在使用之前等待 AJAX 调用完成，这意味着您保证 document.write 将覆盖整个页面正文。
*   您正在使用 $('body').load，在这种情况下这是不合适的 - 您将手动将文本添加到正文。

这是一个修复：

```
<html>
 <head>
  <title>hello</title>
 </head>
 <body>>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript">
   $(document).ready(function() {
    $.get("hello.txt", function(msg) {
        var textArray = msg.split("\n");
        var zufall = Math.round ( ( textArray.length - 1 ) * ( Math.random() ) );
        $('body').append('<p>' + textArray[zufall] + '</p>');
    });
   });
  </script>
 </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:51:03.950

试试这个替代解决方案

```
$(document).ready(function() {
    $.ajax({ 
        url: "hello.txt",
        type: "GET",
        dataType: "text",
        success: function(data) {
            textArray = data.split("\n");
            zufall = Math.round ( ( textArray.length - 1 ) * ( Math.random() ) );
             document.write('<p>' + textArray[zufall] + '</p>');
        }
    });
}); 
```

还要确保您已包含 jquery 文件。

# java - MVC（模型视图控制器）；请解释一下这个方法

> ID：10026520
> 
> 赞同：0
> 
> 时间：2012-04-05T10:02:01.443
> 
> 标签：java, model-view-controller

那么我正在尝试学习java MVC模式，但我无法理解以下方法：

```
protected void setModelProperty(String propertyName, Object newValue) {

        for (AbstractModel model: registeredModels) {
            try {

                Method method = model.getClass().
                    getMethod("set"+propertyName, new Class[] {
                                                      newValue.getClass()
                                                  }
                             );
                method.invoke(model, newValue);

            } catch (Exception ex) {
                //  Handle exception
            }
        }
    } 
```

我不明白：

```
Method method = model.getClass().
                    getMethod("set"+propertyName, new Class[] {
                                                      newValue.getClass()
                                                  }
                             ); 
```

所以在getMethod中我们是根据属性来检索(setSomething)方法名，那么下面的“东西”就是属性值newValue，用这个我完全看不懂的花哨的表达式来表达。

`new Class[]` <--- 所以这是一个类数组？？？next `{ newValue.getClass() }` <---- 好的，通过调用方法获取括号中的类名，但是分号呢？一定有一些我不明白的特殊结构，它看起来像一个类，但如果没有分号，那肯定是不同的......请大家解释一下这是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:19:36.170

要回答有关数组语法的问题，这就是您在 Java 中定义数组的方式：

```
int[] intArray = new int[] {1, 2, 3};
String[] stringArray = new String[] {"a", "b", "c"};
Class classArray = new Class[] {Integer.class, String.class, Double.class}; 
```

因此，表达式是一个实例`new Class[] {newValue.getClass()}`数组，包含一个元素： 的结果，因此是 的类。`Class``newValue.getClass()``newValue`

请注意，我不知道您从哪里获得此代码，但我不会称其为好代码：

*   它使用反射，这在大多数情况下是个坏主意；
*   它不尊重 JavaBean 约定，也不使用`java.beans`API 来访问 setter 方法。
*   它不支持继承，这意味着您只能`setFoo(Object o)`使用 Object 类型的对象（而不是 String、Integer 或其他）进行调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:15:24.587

与：

```
new Class[] { newValue.getClass() } 
```

您正在指定一个内联类数组，并将其传递给 getMethod 的参数。

由于混合了“Class”，它可能会更令人困惑，但它与以下内容一样有效：

```
Integer[] bla = new Integer[]{1,2,3,4}; 
```

getMethod 接收您在类中查找的方法的名称作为参数，以及指定所述方法的参数的类数组。例子：

```
getMethod("setValues", new Class[]{String.class, Integer.class} 
```

将寻找如下方法：

```
public Something setValues(String p1, Integer p2) 
```

即使它存在于同一个类中，它也不匹配，例如：

```
public Something setValues(String p1) 
```

或任何其他变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:25:32.653

这是一种抽象的编码方式，老实说，如果有可能（例如通过使用模板），我会不鼓励这种工作方式，尤其是在初学者级别。无论如何，我会尽力解释。

Java中的所有类也是Class类的对象。并且所有方法都是类 Method 的对象。您可以像操作任何其他对象一样操作这些对象，方法是调用它们的方法并将它们用作其他方法的参数等等。这样，您只需知道其名称为字符串即可完美地实例化一个类。方法也一样：你可以通过简单地知道它的名字作为一个字符串来调用一个方法。

现在让我们看看你的代码。快速浏览一下Java API 中的[这个条目](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class%5B%5D%29)，了解这部分的简要说明`getMethod("set"+propertyName, new Class[] {newValue.getClass()});`。

假设您要调用方法`setParameter(int parameterValue) {...}`。`propertyName`在这种情况下，我们使用set to`"Parameter"`和`newValue`set to a certain integer调用您的方法`123`。现在`"set"+propertyName`结果是`setParameter`，这是我们方法的名称。`newValue.getClass()`给`Integer`，因为那是什么`123`。

这`getMethod`需要一个类数组，因为可能存在许多具有相同名称的方法，但参数的数量和类型不同（例如，该方法也有可能`setParameter(double parameterValue) {...}`存在）。所以我们把它`newValue.getClass()`放在一个只有一个项目的数组中，通过编写`new Class[] {newValue.getClass()}`.

你有它：你`Method`通过调用检索一个对象

`Method method = model.getClass(). getMethod("set"+propertyName, new Class[] {newValue.getClass()});`

然后使用 调用该方法`method.invoke(model, newValue);`，这只是一种动态调用方式`setParameter(123)`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T10:07:31.537

假设，您调用该方法

```
setModelProperty("Key", "value"); 
```

然后循环中的代码将在所有注册模型中搜索带有签名的方法

```
<any modifiers> <any returntype> setKey(String value); 
```

并在下一行调用该方法。

它将使用属性值来构造一个 setter 方法名称和值类来获取一个`Class`实例。该`getMethod`方法采用一组类只是因为我们希望能够找到具有多个参数的方法。

# nosql - NoSQL 环境中的数据库安全性

> ID：10026521
> 
> 赞同：1
> 
> 时间：2012-04-05T10:02:04.007
> 
> 标签：nosql, database-security

在传统的 DBMS 中，我们可以看到使用 SQL 实现的访问控制等安全机制。在 NoSQL 环境中，这样的安全机制是如何实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:38:14.740

我们可以说 nosql 正在开发中，所以存在一些与安全性相关的问题，

但是一些数据库本身就提供了安全机制，比如[mongodb](http://www.mongodb.org/)

有些正在开发中，所以需要等待他们。

# java - JavaFX 获取浏览器宽度和高度

> ID：10026525
> 
> 赞同：1
> 
> 时间：2012-04-05T10:02:20.477
> 
> 标签：java, layout, javafx

我是 JavaFX 的新手，我正在编写一个简单的登录应用程序，我想在我的网络浏览器中启动它。

我怎样才能获得网络浏览器的宽度和高度？是否有一些用于此目的的对象或我希望能够在浏览器大小发生更改时调整应用程序大小的方法。

非常感谢您的回答和帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T20:03:48.923

[我在Oracle 论坛帖子](https://forums.oracle.com/forums/thread.jspa?messageID=10236606)中回答了与此类似的问题。我将在这里重现答案。

答案是在嵌入式应用程序上设置百分比高度和宽度。

> 当用户更改浏览器大小时，是否可以动态更改舞台大小？

是的，请参阅 JavaFX 示例包中的[Ensemble 示例应用程序](http://download.oracle.com/otndocs/products/javafx/2.0.2/samples/Ensemble/index.html) [Ensemble 源代码](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)。

部署工具包目前无法为您生成正确的 html 文件（请参阅[RT-19247](http://javafx-jira.kenai.com/browse/RT-19247) “javafxpackager -deploy 不接受百分比高度和宽度”）。

但是，在部署工具运行后编辑 html 文件以进行所需的更改是微不足道的，如果您查看 ensemble ant 构建脚本，您会发现更改也可以在 ant 中自动执行。

这是 Ensemble 示例应用程序的摘录，它演示了如何完成此操作。

```
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>JavaFX 2.0 - Ensemble</title>
  <SCRIPT src="http://java.com/js/dtjava.js"></SCRIPT>
  <script>
     function javafxEmbed_ensemble() {
       dtjava.embed(
         {
           id : 'ensemble',
           url : 'Ensemble.jnlp',
           placeholder : 'javafx-app-placeholder',
           width : '100%',
           height : '100%',
           jnlp_content : 'PD94b...o8L2pubHA+DQo='
         },
         {
           javafx : '2.0+'
         },
         {}
       );
     }
     <!-- Embed FX application into web page once page is loaded -->
     dtjava.addOnloadCallback(javafxEmbed_ensemble);
  </script>
  <style>
     html, body, #javafx-app-placeholder, #ensemble-app {  
       margin: 0;  
       overflow: hidden;  
       padding: 0; 
       width: 100%;
       height: 100%; 
     }
  </style>
</head>
<body><div id="javafx-app-placeholder"></div></body>
</html> 
```

# ms-access - 在 SubForm.Recordset 更改期间 Form_AfterUpdate 丢失

> ID：10026531
> 
> 赞同：1
> 
> 时间：2012-04-05T10:02:36.330
> 
> 标签：ms-access, vba, subforms

我在 Access 中遇到了 SubForms 的问题，有一些我不明白的地方。我有一个带有控件（组合）的表单（frm），并且表单包含一个子表单（subfrm）。在调试模式下，我创建了两个断点，一个在 combo_AfterUpdate，另一个在 frm_AfterUpdate。如果我更改组合中的数据，一切似乎都很好：

停在 combo_AfterUpdate > （保存表格） > 停在 frm_AfterUpdate

现在我将代码添加到更改 subfrm.Form.Recordset 的 combo_AfterUpdate 事件处理程序中：

停在 combo_AfterUpdate >（保存表格）> ...

不停在frm_AfterUpdate！？有谁知道为什么？

编辑：这里是在 combo_AfterUpdate 中执行的代码：

```
If Not IsNull(Me!childID) Then
    Dim childSubSource As QueryDef
    Set childSubSource = CurrentDb.QueryDefs("qry_parent_Detail_child_WithParam")
    childSubSource.Parameters("childID").Value = Me!childID
    Set frmChildSub.Form.Recordset = _
        childSubSource.OpenRecordset(dbOpenDynaset, dbSeeChanges)
End If 
```

编辑：有趣..如果我改变

```
Set frmChildSub.Form.Recordset = _
    childSubSource.OpenRecordset(dbOpenDynaset, dbSeeChanges) 
```

至

```
frmChildSub.Form.Recordsource= childSubSource.SQL 
```

活动按预期进行。我检查了父窗体的脏属性，似乎问题出在此处。如果我通过 .recordset 将新对象分配给子表单，则父表单中的更改要么被保存要么丢失，无论如何，即使我更改了组合框，脏也是假的。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:12:51.227

其实对我来说有点意思...

第一个例子：

```
Set frmChildSub.Form.Recordset = _
    childSubSource.OpenRecordset(dbOpenDynaset, dbSeeChanges) 
```

这是将一个全新的记录集加载到表单中，当然它不会有任何脏记录，所以脏属性应该返回 false。

在第二种情况下：

```
frmChildSub.Form.Recordsource= childSubSource.SQL 
```

您正在告诉表单下次加载表单/数据时从哪里获取数据。如果您执行了以下操作：

```
frmChildSub.Form.Recordsource= childSubSource.SQL
frmChildSub.Form.Requery 
```

然后我会期望与第一个实例相同的行为 - 仅仅是因为您再次强制 MS Access 引入一个新的记录集 - 这又不会是脏的。

# php - 抛出 Plesk php api 异常

> ID：10026534
> 
> 赞同：0
> 
> 时间：2012-04-05T10:03:10.387
> 
> 标签：php, api, plesk

当我为 plesk 采样 api 代码时出现以下错误。

异常“ApiRequestException”，带有消息“无法解析主机：https:; C:\wamp\www\plesk.php:169 中没有请求类型的数据记录 堆栈跟踪：#0 C:\wamp\www\plesk.php(255): sendRequest(Resource id #2, '

这是我正在使用的示例代码。 [http://download1.parallels.com/Plesk/Plesk8.1/Doc/plesk-8.1-api-rpc-guide/33181.htm](http://download1.parallels.com/Plesk/Plesk8.1/Doc/plesk-8.1-api-rpc-guide/33181.htm)

期待一些帮助。

问候，

BG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:51:29.610

您发送请求的主机似乎未解析。确保可以从运行脚本的机器访问主机（只需使用 ping 实用程序）。如果主机名没有真正的域名，请编辑 C:\Windows\System32\drivers\hosts 以将 IP 地址与使用的域名关联。

# php - Doctrine 1.2 + Zend 11.11：定义生成的类将保存在哪里

> ID：10026535
> 
> 赞同：0
> 
> 时间：2012-04-05T10:03:11.020
> 
> 标签：php, zend-framework, doctrine-1.2

我决定在 Zend 中采用这种目录结构：

```
application
    doctrine
        models
            base
        schema
        //other Doctrine directories
    controllers
    models
    services
    views 
```

我已将其设置为 Doctrine_Cli 的配置选项：

```
doctrine.cli_options.models_path = APPLICATION_PATH "/doctrine/models/"
doctrine.cli_options.data_fixtures_path = APPLICATION_PATH "/doctrine/data/fixtures"
doctrine.cli_options.sql_path = APPLICATION_PATH "/doctrine/data/sql"
doctrine.cli_options.yaml_schema_path = APPLICATION_PATH "/doctrine/schema"
doctrine.cli_options.migrations_path = APPLICATION_PATH "/doctrine/migrations"
doctrine.cli_options.generate_models_options.generateTableClasses = true
doctrine.cli_options.generate_models_options.generateBaseClasses = true
doctrine.cli_options.generate_models_options.pearStyle = true
doctrine.cli_options.generate_models_options.baseClassPrefix = 'Base_'
doctrine.cli_options.generate_models_options.baseClassName = 'Doctrine_Record'
doctrine.cli_options.generate_models_options.baseClassesDirectory = ''
doctrine.cli_options.generate_models_options.classrefixFiles = false 
doctrine.cli_options.generate_models_options.classPrefix = 'Application_Doctrine_Model_' 
```

我还在 Application 命名空间中添加了一个资源来加载`Application_Doctrine_Model_*`文件`application/doctrine/models`

我的问题是，虽然生成的模型是使用预期的前缀创建的，但它们是`application/doctrine/models/base`在它们自己的`Application/ ..`子目录下的目录下生成的。

结果是`application/doctrine/models/Application/Doctrine/Models/...`，因此 Zend 的资源自动加载器找不到它们。

是否有一个配置选项`Doctrine_Cli`可以指定我想在下生成模型`application/doctrine/models`但不生成新的`Application/ ..`PEAR 样式子目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:02:09.530

将您更改`classPrefix`为：

```
doctrine.cli_options.generate_models_options.classPrefix = 'Model_' 
```

并且您在以下内容中有拼写错误`classrefixFiles`：

```
doctrine.cli_options.generate_models_options.classPrefixFiles = false 
```

要加载生成的模型，请在 bootstrap.php 上使用此结构

```
public function _initLoaders()
{
    new Zend_Application_Module_Autoloader(array(
        'basePath'  => APPLICATION_PATH,
        'namespace' => ''
    ));
} 
```

# php - 用于缓存研磨文件的PHP解析器？

> ID：10026537
> 
> 赞同：9
> 
> 时间：2012-04-05T10:03:18.437
> 
> 标签：php, windows, xdebug, kcachegrind

有这样的事吗？

我在 Windows 上并使用 WinCacheGrind 应用程序，它似乎不适用于大文件（~2 MB）。我收到诸如“找不到呼叫目标”之类的错误。

您是否知道任何用 PHP 编写的此类文件的解析器可以帮助我构建自己的 cachegrind 分析器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:08:30.917

我不确定这在 PHP 中是否可行，但可以试试[http://sourceforge.net/projects/precompiledbin/](http://sourceforge.net/projects/precompiledbin/)

**参考：** [Windows Callgrind 结果浏览器，KCacheGrind 的替代品](https://stackoverflow.com/a/4425999/1237812)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T04:28:28.343

一段时间以来，我一直在使用 webGrind。

[http://code.google.com/p/webgrind/](http://code.google.com/p/webgrind/)

对于无法轻松/快速访问文件的服务器进行调试非常棒，因为它们都是远程读取/解释的，然后在线查看。

平台独立性对我来说非常棒，因为我在 3 台计算机和一台笔记本电脑上进行开发。只要我可以查看我正在工作的网页，我就可以调试我的输出。无需在 4 台不同的计算机上安装相同的应用程序，并且无需在所述计算机之间不断传输巨大的调试文件。

如今，我将其视为一个必要的 Web 应用程序，例如 phpMyAdmin。

我真的希望这可以帮助其他人尝试解决类似的使用场景。

编辑：如果你想看到它的实际效果，WAMP 附带它（大部分）预配置。[http://wamp.sourceforge.net/]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-08T08:50:23.283

根据我的经验，QCacheGrind（KCacheGrind 的 Windows 版本）比 WebGrind 快得多并且非常稳定：http: [//sourceforge.net/projects/qcachegrindwin/](http://sourceforge.net/projects/qcachegrindwin/)

# php - swiftmailer 出错

> ID：10026549
> 
> 赞同：1
> 
> 时间：2012-04-05T10:04:20.260
> 
> 标签：php, swiftmailer

我正在尝试将联系表添加到我的网站。在 localhost 中它运行良好，现在在 Tiscali 服务器上移动我收到此错误：

```
Warning: is_writable() [function.is-writable]: open_basedir restriction in effect.    
File(/tmp) is not within the allowed path(s):
(/var/www/virtual/mydomain.it/:/usr/share/php/:/var/www/ispcp/gui/tools/filemanager/) in /var/www/virtual/mydomain.it/htdocs/prova-intro/Swift-4.1.6/lib/preferences.php on line 15` 
```

**致命错误：** `Uncaught exception Swift_TransportException' with message`

`'Expected response code 220 but got code "554",`

```
 with message "554 santino.mail.tiscali.it ESMTP server not available from your IP "' in /var/www/virtual/mydomain.it/htdocs/prova-intro/Swift-4.1.6/lib/classes/Swift/Transport/AbstractSmtpTransport.php:422 Stack trace: #0 /var/www/virtual/mydomain.it/htdocs/prova-intro/Swift-4.1.6/lib/classes/Swift/Transport/AbstractSmtpTransport.php(315):`
Swift_Transport_AbstractSmtpTransport->_assertResponseCode('554 santino.mai...', Array)

 #1 /var/www/virtual/mydomain.it/htdocs/prova-intro/Swift-4.1.6/lib/classes/Swift/Transport/AbstractSmtpTransport.php(123): Swift_Transport_AbstractSmtpTransport->_readGreeting()
 #2 /var/www/virtual/mydomain.it/htdocs/prova-intro/Swift-4.1.6/lib/classes/Swift/Mailer.php(79): Swift_Transport_AbstractSmtpTransport->start()

 #3 /var/www/virtual/mydomain.it/htdocs/prova-intro/mail_SwiftMailer.php(129): Swift_Mailer->send(Object(Swift_Message) in /var/www/virtual/mydomain.it/htdocs/prova-intro/Swift-4.1.6/lib/classes/Swift/Transport/AbstractSmtpTransport.php on line 422` 
```

我正在使用的参数：

```
 define('HOST_SMTP', 'smtp.mydomain.it');  
 define('PORT_SMTP', 465); 
 define('SECUTITY_SMTP', ssl);
 define('EMAIL_SMTP', 'info@mydomain.it');  
 define('PASSWORD_SMTP', 'xxxxxxx');  
 define('EMAIL_DESTINATARIO', $_POST['destinatario']);  
 define('MAX_DIM_FILE', 1048576); // 1mb 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T11:55:56.913

这种情况很少见 - 报告的从 PHP 发送邮件的错误与 MTA 无关！

Swiftmailer 正在尝试创建一个临时文件。在不深入研究源代码的情况下，如果它是明智地编写的，它应该使用 tmpnam() 或 tmpfile() （除非明确覆盖使用“系统默认临时目录”。它通过查看一些环境变量来确定这一点 - 如果这些不存在，则默认编译。

使用的目录也由[sys_get_temp_dir()](http://www.php.net/manual/en/function.sys-get-temp-dir.php)函数返回

（因为 swiftmailer 继续尝试发送一个它未能创建的文件，这意味着它的代码中有一个相当愚蠢的错误）。

实际上，设置 open_basedir 限制的人有责任确保正确配置其余的 PHP 设置（会话保存路径、临时目录等）。我会向他们投诉以正确修复它。

同时尝试插入

```
$_ENV['TMPDIR']='/var/www/virtual/mydomain.it/tmp';
$_ENV['TMP']=$_ENV['TMPDIR']; 
```

在脚本的顶部并创建相关目录，使其可由网络服务器写入。

请注意， tmpfile() 页面上[的注释中描述](http://www.php.net/manual/en/function.tmpfile.php#74623)了相同的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-27T08:51:06.870

symcbean 的解决方案对我来说很好，除了必须使用一点`putenv()`才能修改环境变量。

所以我写了这样的东西：

```
<?php
// web/app_dev.php 
// in prod the warning should not raise an exception, 
// but this depends on the error handling

use [..]

$tmpDir = __DIR__.'/../app/cache';

putenv('TMP='.$tmpDir);
putenv('TMPDIR='.$tmpDir);
putenv('TEMP='.$tmpDir);

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';
[..] 
```

# php - php图像保存到目录并保存到pdf

> ID：10026555
> 
> 赞同：0
> 
> 时间：2012-04-05T10:05:04.457
> 
> 标签：php, image-processing, pdf-generation

我使用[http://www.ashberg.de/php-barcode/](http://www.ashberg.de/php-barcode/)脚本来生成条形码。我现在需要将条形码从 html 导入 PDF。（我将 html2pdf_v4.03 用于 html -> pdf）

```
<div style=" display:inline;"><img id='barcode' alt='barcode' src="scripts/barcode/barcode.php?mode=jpg"  /></div> 
```

可以，但是当我将其导入 PDF 时会出错。所以我决定尝试生成条形码并将其作为 img 保存到一个目录中，然后在我转换为 PDF 的 html 中引用它。

所以我尝试了

```
file_put_contents('scripts/barcode.jpg', file_get_contents('scripts/barcode/barcode.php?mode=jpg')); 
```

我无法打开流：错误

如果我尝试

```
file_put_contents('scripts/barcode.jpg', file_get_contents('scripts/barcode/barcode.php')); 
```

它运行但它创建的图像文件不可读/损坏。

请协助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:10:59.780

写完整的 url ( `http://domain.com/scripts/barcode/barcode.php`) 而不是`scripts/barcode/barcode.php`. 当您使用时，它可能会打开本地 php 文件`file_get_contents()`

# php - 计算赞成票的百分比

> ID：10026557
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:05:07.587
> 
> 标签：php, math

我已经搜索了这个网站和谷歌，即使这个想法很简单，我也无法弄清楚。

我需要（就像在 YouTube 上看到的那样）根据赞成票和反对票的数量计算赞成票的百分比。

我有两个变量，`$upvotes`现在`$downvotes`我需要计算`$ratio`

例如

```
$upvotes = 3;
$downvotes = 1; 
```

这里的比例需要为 75 (%)

如果你有

```
$upvotes = 0;
$downvotes = 100; 
```

必须为 0 (%)

如何计算百分比（在 PHP 中）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T10:07:06.627

简单地

```
 if(($upvotes+$downvotes) != 0)
    $percentage = (float)($upvotes/($upvotes+$downvotes))*100;
    else
    $percentage = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T10:07:38.063

简单的数学！

```
$ratio = $upvotes / ($upvotes + $downvotes) * 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:11:05.213

```
if($downvotes > 0 || $upvotes >0) {
$percentage = ($upvotes / ($upvotes+$downvotes));
}
elseif($upvotes > 0 && downvotes == 0) {
$percentage = 1;
}
$percentage = round(100*$percentage);

$percentage .= "%"; // if you want to add % 
```

我测试了它并且它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:08:49.270

`$percent = ( $upvotes / ( $upvotes + $downvotes ) ) * 100;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T10:11:20.003

```
$percentage = (float) round((100 /($upvotes + $downvotes)) * $upvotes, 2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T10:13:23.960

我也会对其进行四舍五入，这会将结果四舍五入为最接近的整数。例如。75.5% = 76%；

```
$ratio = round((($upvotes/($upvotes+$downvotes))*100), 0, PHP_ROUND_HALF_UP).'%'; 
```

# jquery - 使用 jQuery 验证插件的语法错误

> ID：10026558
> 
> 赞同：0
> 
> 时间：2012-04-05T10:05:11.557
> 
> 标签：jquery, jquery-validate

使用 jquery validate 插件时出现语法错误。我想定位类而不是字段名，这就是我使用以下语法的原因：

```
$("#myFormID").validate({        
    $('.optionSelectClass').rules("add", {
        required: true
    });       

    $('.optionSelectClass').messages("add", { 
        required: "Please select an option"    
    });

}); 
```

Firebug 控制台说丢失：在属性 id 之后

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:08:13.613

使用对象字面量语法定义对象时，不要`;`在每`key: value`对声明后添加：

```
{
    required: true
} 
```

对象字面量通过逗号分隔的`key: value`对声明进行声明：

```
{
    required: true, // note the comma
    minLength: 4,   // note the comma
    maxLength: 10   // note _no_ comma; this will throw a SyntaxError in IE
} 
```

# xml - 是否有任何库可用于将 xml 文档作为动态对象进行迭代

> ID：10026560
> 
> 赞同：0
> 
> 时间：2012-04-05T10:05:30.927
> 
> 标签：xml, dynamic, linq-to-xml

在我当前的**ASP.NET MVC**项目中，模型显示为**XML**，因此从控制器到视图我将模型作为**XElement**传递。在视图中，我使用**Xlinq**迭代 xml 并将内容显示出来。

我发现这篇不错的帖子[http://blogs.msdn.com/b/csharpfaq/archive/2009/10/19/dynamic-in-c-4-0-creating-wrappers-with-dynamicobject.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2009/10/19/dynamic-in-c-4-0-creating-wrappers-with-dynamicobject.aspx)说关于围绕 xml 对象创建动态包装器。

我只是想知道那里有任何图书馆可以简化这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:08:53.503

也许您可以查看这个：[http](http://www.amazedsaint.com/2010/02/introducing-elasticobject-for-net-40.html) : //www.amazedsaint.com/2010/02/introducing-elasticobject-for-net-40.html，它可以从 XElement 生成动态对象，反之亦然。这个 ElasticObject 是一个很好的实现。我自己已经被利用了。

# c - 在 Unix/Solaris 中验证用户名

> ID：10026563
> 
> 赞同：1
> 
> 时间：2012-04-05T10:05:32.813
> 
> 标签：c, linux, unix, solaris

是否有任何用于验证用户名的 C API？

我正在输入当时可能不存在的用户名。由于用户名需要遵循 POSIX 规则，是否有任何 C API 可以进行验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T18:22:05.313

我假设您正在尝试确定您正在运行的系统上是否存在用户名。为此，您正在寻找`getwpent()`/ `getpwnam()`-- 查看手册页以获取详细信息。

尽管这些返回的信息比您想要的更多，但`getpwnam()`也会（很容易）告诉您是否存在与给定用户名对应的密码文件条目。

（如果您只是想确保用户名仅包含有效字符，请确保它仅包含`[A-Za-z0-9_]+`）

# jakarta-ee - Java EE Web 应用程序 - Tomcat 7 服务器不必要地挂起

> ID：10026568
> 
> 赞同：0
> 
> 时间：2012-04-05T10:05:47.977
> 
> 标签：jakarta-ee, web-applications, tomcat7

我正在使用 Tomcat 7 Web 服务器来托管/部署我的 Web 应用程序。该应用程序运行良好，没有任何问题。但只有某些时候（意味着只有 1% 的概率），服务器会无缘无故挂断。我已经为 JVM/Tomcat 分配了足够的内存。我也看不到任何日志，因为应用程序无法写入日志文件，因为它没有响应。我已经检查了与 DB 的最大连接数，它们也没有超过限制。

我怎样才能找到造成这种情况的原因？我需要重新启动服务器来解决这个问题...请帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:56:21.393

您需要间隔大约 10 秒进行三个线程转储，然后比较这些线程转储的内容以确定哪些线程没有移动。一旦你知道哪些线程有问题，那么你需要弄清楚它们为什么没有移动。

# eclipse - 线程“main”中的异常 java.lang.NoClassDefFoundError：OSX 10.6 上 Eclipse 中的 Main

> ID：10026569
> 
> 赞同：4
> 
> 时间：2012-04-05T10:05:54.927
> 
> 标签：eclipse, osx-snow-leopard, java

当我尝试在 Eclipse 中运行一个简单的 hello world 应用程序时，我得到了

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Main
Caused by: java.lang.ClassNotFoundException: Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我已经使用安装在这台计算机上的 javac 工具编译了我的类，并且运行它没有问题。这让我相信它应该与安装在这台计算机上的 JDK 一起工作。我正在运行 OSX 10.6、Eclipse Indigo SR2，并且安装了 1.6.0JDK，这显然是 OSX 的标准。构建路径指向此 JDK 的正确位置。

我还在 XCode 中对其进行了测试，它也可以正常工作。我仍然宁愿使用 Eclipse 作为 IDE，因为我正在与开发 Windows 应用程序的团队并行工作（我必须对应用程序进行一些小的调整以解决对 OSX 的一些依赖性问题）并且他们使用 Eclipse。这也是我习惯的，当你必须在你一直在使用的操作系统中工作或仅仅两天时，一些熟悉是很好的:-D

我该如何解决这个问题？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:27:35.940

我只是有同样的问题。感谢您的评论@Frank Vanbever，我发现“运行”不再配置为“作为 Android 应用程序运行”。我不知道为什么，我不记得最近更改了这些参数...菜单“运行>运行方式> Android应用程序”有效。你让我今天一整天都感觉很好 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T03:15:01.893

**Deleting the workspace** worked for me.

# .net - 在 textchanged 但不在按键上验证文本框

> ID：10026570
> 
> 赞同：2
> 
> 时间：2012-04-05T10:06:01.073
> 
> 标签：.net, winforms, validating

我正在使用 Textbox_Validating 事件来验证我的一个窗口窗体上的文本框。如果文本框的文本发生更改，我想验证文本框。所以我从 textbox_Texchanged 事件中调用了验证事件。但是，一旦我按下一个键，它就会触发 textchanged 事件，从而触发 text_Validating 事件。**如果文本属性由于按键而发生更改，我想阻止对 Text_Validating 的调用。**但是如果有人assings `txtbox.Text="asdf";`，我想在这种情况下触发验证事件。

```
private void txt8Ydere1_TextChanged(object sender, EventArgs e)
    {
        txt8Ydere1_Validating(sender,null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:56:09.297

您可以通过这样做来阻止对验证事件的调用

```
txt8Ydere1.Validating-=txt8Ydere1_Validating; 
```

将此代码放在**keydown,keyUp**事件中...

检查`txtbox.Text equals "asdf"`，如果是这样，您可以**直接调用 Validating 方法而无需重新订阅事件**：

```
txt8Ydere1_Validating(sender,null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:34:57.760

我会为文本框使用 LostFocus 事件。您可以从该事件运行验证。

有关更多信息，请参阅[msdn](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.lostfocus%28v=vs.71%29.aspx)。

# javascript - 从 Silverlight 处理 JavaScript 异常

> ID：10026571
> 
> 赞同：0
> 
> 时间：2012-04-05T10:06:01.923
> 
> 标签：javascript, silverlight, exception

我无法向大量使用 Silverlight - JavaScript 互操作性的现有代码添加适当的异常处理。在这种情况下，我的 JavaScript 可能会引发我想在 Silverlight 中有意义地处理的异常。

在 Silverlight 中，我创建了一个 JavaScript 对象的实例，然后我在该对象上调用了一个方法：

```
public class MyWrapper
{
    dynamic _myJSObject;

    public MyWrapper()
    {
        _myJSObject = HtmlPage.Window.CreateInstance("MyJSObject");
    }

    public int MyMethod()
    {
        try
        {
            int result = (int)_myJSObject.MyMethod();
        }
        catch (Exception ex)
        {
            // I want to add meaningful exception handling here
        }      
    }
} 
```

每当`MyJSObject.MyMethod`抛出异常时，都会出现两个问题：

*   浏览器显示发生异常的消息。
*   有关异常的信息不会传递给我的托管代码。相反，我得到一个`RuntimeBinderException`只是说“不能调用非委托类型”并且不包含任何其他信息。这似乎与[这里](http://msdn.microsoft.com/en-us/library/cc645078%28VS.95%29.aspx)描述的不符；我期待一个`InvalidOperationException`.

我试图避免强制转换方法的返回值：

```
object tmp= _myJSObject.MyMethod(); 
```

这没什么区别。更改 JavaScript 端抛出的异常类型也没有效果。

```
MyJSObject.prototype.MyMethod = function ()
                                {
                                    throw "Hello Silverlight!";
                                } 
```

我现在能想到的唯一解决方案是滥用函数的返回值来传递有关异常的信息，但这会使我的代码变得更加丑陋......所以：

为什么我看到的行为与文档中描述的不同？它与我使用`dynamic`某种方式有关吗？如何在我的托管代码中正确处理 JavaScript 中发生的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:28:22.520

经过相当多的实验，我得出结论，没有办法直接处理 Silverlight 中的 JavaScript 异常。为了能够处理异常，需要稍微更改 JavaScript 代码。

我没有抛出错误，而是返回它：

```
function MyMethod()
{
    try
    {
        // Possible exception here
    }
    catch (ex)
    {
        return new Error(ex);
    }
} 
```

然后在 Silverlight 方面，我使用包装器`ScriptObject`将返回值再次转换为异常。这里的关键是`TryInvokeMember`方法：

```
public class ScriptObjectWrapper : DynamicObject
{
    private ScriptObject _scriptObject;

    public ScriptObjectWrapper(ScriptObject scriptObject)
    {
        _scriptObject = scriptObject;
    }

    public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
    {
        result = _scriptObject.Invoke(binder.Name, args);

        ScriptObject s = result as ScriptObject;
        if (s != null)
        {
            // The JavaScript Error object defines name and message properties.
            string name = s.GetProperty("name") as string;
            string message = s.GetProperty("message") as string;
            if (name != null && message != null && name.EndsWith("Error"))
            {
                // Customize this to throw a more specific exception type
                // that also exposed the name property.
                throw new Exception(message);
            }
        }

        return true;
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        try
        {
            _scriptObject.SetProperty(binder.Name, value);
            return true;
        }
        catch
        {
            return false;
        }
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        try
        {
            result = _scriptObject.GetProperty(binder.Name);
            return true;
        }
        catch
        {
            result = null;
            return false;
        }
    }

} 
```

潜在地你可以改进这个包装器，使它实际上透明地注入 JavaScript try-catch 机制，但是在我的例子中，我可以直接控制 JavaScript 源代码，所以没有必要这样做。

只要属性`Error`以.`name``Error`

要使用包装器，原始代码将更改为：

```
public MyWrapper()
{
    _myJSObject = new ScriptObjectWrapper(
                  HtmlPage.Window.CreateInstance("MyJSObject"));
} 
```

# c# - 如何在 windows phone 7.5 中重新加载当前页面？

> ID：10026572
> 
> 赞同：1
> 
> 时间：2012-04-05T10:06:03.850
> 
> 标签：c#, windows-phone-7, xaml

我对 C# 和 windows phone 编程很陌生...

在我的 Windows Phone 应用程序中，我有一个用户设置页面，我希望能够在其中更改显示语言。

我正在加载一个 XML 文件以获取新的文本字符串并从中分配 textblock.Text 属性。

我从 LayoutRoot_Loaded 事件调用 XML 文件，当我更改语言时，我想重新加载当前的 xaml 页面以将文本更新为新语言。

是否可以简单地重新加载当前的 XAML 页面？

还是有更好的方法来做到这一点？

/索林_M

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:15:23.340

您可能想查看数据绑定：-

[http://msdn.microsoft.com/en-us/magazine/hh852595.aspx](http://msdn.microsoft.com/en-us/magazine/hh852595.aspx)

[http://www.scottlogic.co.uk/blog/colin/2012/04/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-one/](http://www.scottlogic.co.uk/blog/colin/2012/04/everything-you-wanted-to-know-about-databinding-in-wpf-silverlight-and-wp7-part-one/)

# android - 有什么方法可以找出Android中的网络何时会断开连接？

> ID：10026573
> 
> 赞同：0
> 
> 时间：2012-04-05T10:06:06.073
> 
> 标签：android

我的问题是，有没有办法找出网络断开时间？它什么时候会关闭或什么时候会进入开启模式？

提前感谢您的任何建议和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:15:24.083

[您可以使用android.net.conn.CONNECTIVITY_CHANGE](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)操作创建一个`BroadcastReceiver`监听`Intent`s 的设备。

```
public class ConnectivityListener extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // There is action occured with network. 
        ConnectivityManager cm = (ConnectivityManager)context.getSystemService(
                Context.CONNECTIVITY_SERVICE);

        // query connectivity manager for network state.
    }

} 
```

不要忘记在 AndroidManifest.xml 中声明这个接收器：

```
<receiver android:name=".ConnectionChangeReceiver">
  <intent-filter>
    <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
  </intent-filter>
</receiver> 
```

# php - 在作为数组子元素的数组值之后排序

> ID：10026574
> 
> 赞同：0
> 
> 时间：2012-04-05T10:06:14.577
> 
> 标签：php, arrays

我试图搜索并找到了这个：

[在 PHP 中按子数组的值对数组进行排序](https://stackoverflow.com/questions/2672900/sort-an-array-by-a-child-arrays-value-in-php)

但该功能在我的情况下不起作用：

```
 $sorted = array();
                foreach($players as $player)
                {
                    $p = Model::factory('user');
                    $p->load($player['id']);

                    $sorted[] = array('id' => $player['id'], 'username' => $p->get_username());
                } 
```

如何在用户名后按字母顺序对数组进行排序？

功能，

```
function cmp($a, $b) {
        if ($a['username'] == $b['username']) {
                return 0;
        }
        return ($a['username'] < $b['username']) ? -1 : 1;
} 
```

然后调用 usort($sorted,"cmp"); 对我不起作用（出现错误未定义索引 [2]）..

有什么方法可以选择是降序还是升序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:08:56.493

因为您的数组中不存在索引 2。你应该使用 $a['username'] 或 $a['id']，但我想你想按用户名排序，所以你会使用 $a['username']。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:12:20.907

'cmp' 函数将是：

```
// $param - the parameter by which you want to search
function cmp(&$a, &$b, $param) {
    switch( $param ) {
        case 'id':
            if ( $a['id'] == $b['id'] ) {
                return 0;
            }

            return ( $a['id'] < $b['id'] ) ? -1 : 1;
            break;
        case 'username':
            // string comparison
            return strcmp($a['username'], $b['username']);
            break;
    }
}

// this is the sorting function by using an anonymous function
// it is needed to pass the sorting criterion (sort by id / username )
usort( $sorted, function( $a,$b ) {
    return cmp( $a, $b, 'username');
}); 
```

# c# - NHibernate 查询与 映射

> ID：10026577
> 
> 赞同：1
> 
> 时间：2012-04-05T10:06:36.763
> 
> 标签：c#, nhibernate, nhibernate-mapping, queryover, any

我将 NHibernate 3.2.0 与 Microsoft SQL Server 2005 数据库、C# 4.0 和以下域一起使用：

```
public class Foo
{
   public virtual Guid Id { get; set; }
   public virtual IBar MyBar { get; set; }
}
public interface IBar
{
   Guid Id { get; set; }
}
public class CocktailBar : IBar
{
   public virtual Guid Id { get; set; }
   public virtual string Name { get; set; }
}
public class ProgressBar : IBar
{
   public virtual Guid Id { get; set; }
   public virtual int Progress { get; set; }
} 
```

和映射

```
<hibernate-mapping>
   <class name="Foo" table="FOO">
     <id name="Id">
        <generator class="guid.comb"/>
     </id>
     <any name="MyBar" meta-type="System.Guid" id-type="System.Guid">
        <meta-value class="MyNamespace.CocktailBar" value="716B5C04-4115-47BF-BE8A-A3B34D3607FC"/>
        <meta-value class="MyNamespace.ProgressBar" value="65412938-C2DE-48FF-9E90-009881DBDD4F"/>
        <column name="TypeOfBarId"/>
        <column name="BarObjectId"/>
     </any>
   </class>
</hibernate-mapping> 
```

现在我正在尝试创建一个查询，该查询返回与名为“Nightbar”的 CocktailBar 关联的所有 Foo 对象。如何创建此查询？在查询中使用隐​​式多态性（无论是 HQL、Criteria 还是 QueryOver）并未包含在 NHibernate 参考文档中。

我尝试了以下方法：

```
Foo theFoo = session.QueryOver<Foo>()
         .Where(c => c.MyBar.GetType().Name == "CocktailBar")
         .JoinQueryOver<IBar>(c => c.MyBar)
         .Where(c => ((CocktailBar)c).Name == "Nightbar")
         .SingleOrDefault<Foo>(); 
```

并得到了例外： NHibernate.Type.AnyType.GetAssociatedEntityName 中的“System.InvalidOperationException：任何类型都没有唯一引用的持久性”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:45:35.350

```
Foo theFoo = session.QueryOver<Foo>()
     .Where(Restrictions.Eq("MyBar.class", typeOf(CocktailBar))) <-- here
     .JoinQueryOver<IBar>(c => c.MyBar)
     .Where(c => ((CocktailBar)c).Name == "Nightbar")
     .SingleOrDefault<Foo>(); 
```

# java - 我正在尝试将 excel 转换为 sql 的脚本添加了必要的 jar，但是在 LINUX 中缺少语法或 Java 设置

> ID：10026578
> 
> 赞同：0
> 
> 时间：2012-04-05T10:06:51.627
> 
> 标签：java, shell

请给我一个带有 shell 脚本解释的简单示例。

```
#!/bin/bash
#echo off

echo -n Enter acl File Location
read acl

echo -n Enter sql File Location
read sql

cd bin
java -classpath .;../lib/dom4j-1.6.1.jar;../lib/poi-3.8-20120326.jar;../lib/poi-ooxml-3.8-20120326.jar;../lib/poi-ooxml-schemas-3.8-20120326.jar;../lib/stax-api-1.0.1.jar;
../lib/xmlbeans-2.3.0.jar  com/paywithisis/gateway/utility/XLSXToSQLConverter $acl $sql
cd ..
echo $acl
echo $sql 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:04:02.103

Linux 使用**:**分隔窗口使用的类路径部分**；**

# jquery - 在 div / jquery 中自动调整图像

> ID：10026579
> 
> 赞同：1
> 
> 时间：2012-04-05T10:06:53.427
> 
> 标签：jquery, html, image, image-size

如果我的代码是这样的，如何自动调整图像：

```
<script type="text/javascript"> 
jQuery.noConflict();
jQuery(document).ready(function () {
    var count = 0;
    function animate() {
        jQuery(".fadein").eq(count).fadeIn(1000);
        count++;
        if(count <= jQuery(".fadein").length) {
            setTimeout(animate, 1000);
        } else {
            jQuery("a.fadein").fadeOut(1000);
            count = 0;
            animate();
        }      
    }
    animate();
});
</script> 
```

这是正确的吗？

```
<script type="text/javascript"> 
    jQuery.noConflict();
    jQuery(document).ready(function () {
        var count = 0;
        function animate() {
            jQuery(".fadein").eq(count).fadeIn(1000);
            count++;
            if(count <= jQuery(".fadein").length) {
                setTimeout(animate, 1000);
            } else {
                jQuery("a.fadein").fadeOut(1000);
                count = 0;
                animate();
            }      
        }
        animate();
    })
            function fitImagetoContainer() {   $("img").each(function(i) {
     $(this).width($(this).parent().width()); //or your logic   
       }); }

//Call the function at load 
      $(window).load(function() {    fitImagetoContainer(); });

//Also call the function when the window resizes  
      $(window).resize(function() {    fitImagetoContainer(); });;
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:28:28.460

这是我对你的问题的看法

```
//Create a function to resize the image with respect to parent
function fitImagetoContainer() {
  $("img").each(function(i) {
     $(this).width($(this).parent().width()); //or your logic
  });
}

//Call the function at load
$(window).load(function() {
   fitImagetoContainer();
});

//Also call the function when the window resizes 
$(window).resize(function() {
   fitImagetoContainer();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T14:12:16.380

您需要添加 css。它更好，更易于维护。

只需将其添加到您的图像 css 中。

```
.fadein img {width: 100%; height: auto;} //This maintains the aspect ratio. 
```

如果您希望图像填满容器，无论如何：

```
.fadein img {width: 100%; height: 100%;} //This distorts the image to fill the container 
```

# java - 在 SQLite 中检索表列名

> ID：10026583
> 
> 赞同：1
> 
> 时间：2012-04-05T10:07:10.697
> 
> 标签：java, sql, sqlite, sqlcommand

我已经尝试了所有提供的解决方案，包括使用 PRAGMA，但我似乎无法让它工作！！！我有一个程序允许用户创建一个表名并手动输入他们希望的列名。我需要一些如何从选定的表中获取列名。我需要通过“Private void loadDB”函数来做到这一点。正如你所看到的，我已经使用了很多方法来尝试让它工作，但是它不会提取名称。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;

public class ViewTable extends JFrame {

    private static final long serialVersionUID = 1L;
    private static final String PREFERRED_LOOK_AND_FEEL = null;
    private final String tableName;
    private String[] columnNames;
    private String[][] data;
    private JTable tablePane;

    public ViewTable(String tableName){
        this.tableName=tableName;

        initComponents();
        loadDB();
        displayTable();

        setDefaultCloseOperation(CreateTemplate.EXIT_ON_CLOSE);
        setSize(700,700);
        setTitle("View Table");
        setVisible(true);

    }

    private void initComponents() {
        JPanel mainPanel = new JPanel(new BorderLayout());
        this.add(mainPanel);
        mainPanel.setBackground(Color.yellow);

        JPanel topPanel = new JPanel(new BorderLayout());
        topPanel.setBackground(Color.blue);
        mainPanel.add(topPanel,BorderLayout.NORTH);

        JLabel titleLabel = new JLabel(this.tableName);
        titleLabel.setBorder(new LineBorder(Color.black));
        titleLabel.setFont(new Font("Helvetica", Font.BOLD, 24));
        titleLabel.setForeground(Color.orange);
        titleLabel.setHorizontalAlignment(SwingConstants.CENTER);
        topPanel.add(titleLabel,BorderLayout.CENTER);

        JButton exitButton = new JButton("Finish");
        exitButton.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent event){
                close_window();
            }
        });
        exitButton.setBorder(new EmptyBorder(new Insets(20,20,20,20)));
        topPanel.add(exitButton,BorderLayout.EAST);

    }

    private void close_window(){ this.dispose(); }

    private void loadDB(){
        //String com = "SELECT sql from sqlite_master WHERE tbl_name = '"+tableName+"' AND type = 'table'";
        //String com = "PRAGMA table_info( "+tableName+" );";
        //String com = "INSERT null";
        //SQLCommands.SQLCommand(com);
        //String com = "SELECT * FROM sqlite_master";
        //String[] output = SQLCommands.returnSQLCommand(com);
        //String com = "SELECT * FROM (PRAGMA table_info("+tableName+");"; 
        //String[] output = SQLCommands.returnSQLCommand(com);

        //for (String S : output){ System.out.println(S); JOptionPane.showInputDialog("Enter template name"); }

        //get column names
        //columnNames = new String[3];
        //columnNames[0] = "Name"; columnNames[1] = "Surname"; columnNames[2] = "Sex";

        //use column names to populate data
        //e.g. data[4][0] => "SELECT Name FROM tableName"[4]

    }

    private void displayTable(){
        //use JTable

        //new JScrollPane which uses the table

        //put JScrollpane in CENTER box

    }

    public static void main(String[] args){
        String [] tableNames = SQLCommands.returnSQLCommand("SELECT name FROM sqlite_master");
        new ViewTable(tableNames[9]);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:32:34.300

> String com = "PRAGMA table_info("+tableName+");";

这是要执行的正确命令。根据[PRAGMA 上的 SQLite 文档](http://www.sqlite.org/pragma.html)：

> **PRAGMA 表信息（表名）；**
> 
> 此编译指示为命名表中的每一列返回一行。结果集中的列包括列名、数据类型、列是否可以为 NULL，以及列的默认值。

当我通过 JDBC 使用 SQLite 尝试它时，它似乎工作正常：

```
JdbcDatabaseConnection compiled statement: PRAGMA table_info(foo)
[0, id, INTEGER, 0, null, 1]
[1, stuff, VARCHAR, 0, null, 0]
[2, val, INTEGER, 0, null, 0] 
```

这表明该`foo`表有 3 列：

*   0：名称'id'，类型'INTEGER'，可以为空'0'（我猜是假），默认值'null'
*   1：名称'stuff'，类型'VARCHAR'，可以为空'0'（我猜是假），默认值'null'
*   2：名称'val'，类型'INTEGER'，可以为空'0'（我猜是假），默认值'null'

我不确定最后一列是什么，但`id`它是一个自动生成的字段，所以可能是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:24:29.173

```
PRAGMA table_info(table_name); 
```

会成功吗？

[SQL Lite 编译指示](http://www.sqlite.org/pragma.html)

# java - JFreechart 刻度单位

> ID：10026588
> 
> 赞同：1
> 
> 时间：2012-04-05T10:07:36.873
> 
> 标签：java, jfreechart

我正在使用我从网上下载的以下代码

```
TickUnits units = new TickUnits();
DecimalFormat df1 = new DecimalFormat("$0");
DecimalFormat df2 = new DecimalFormat("$0.00");

// we can add the units in any order, the TickUnits collection will
// sort them...
units.add(new NumberTickUnit(100, df1, 0));
units.add(new NumberTickUnit(50, df1, 0));
units.add(new NumberTickUnit(20, df1, 0));
units.add(new NumberTickUnit(10, df1, 0));
units.add(new NumberTickUnit(5, df1, 0));
units.add(new NumberTickUnit(2, df1, 0));
units.add(new NumberTickUnit(1, df1, 0)); 
```

由于我很新，我不明白这段代码实际上做了什么。我认为它设置了*y*轴上的值，但情况似乎并非如此，因为*y*轴上的值超过 100 美元。这段代码究竟做了什么。（还有到底什么是刻度单位。它是定义轴上的标签还是我在这里弄错了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:48:03.790

是的，`TickUnits`定义`Axis`标签的格式，但完整的解释超出了 Stackoverflow 的范围。[开发人员指南†</sup> 是决定性的，但检查](http://www.jfree.org/jfreechart/devguide.html)^(为特定子类)^(返回 a 的方法可能具有指导)意义^。^(例如，)^(in的源代码)^(，以及)^(`TickUnitSource``Axis`[`createIntegerTickUnits()`](https://github.com/jfree/jfreechart/blob/a362a41d4d944f6be5d3ec2f93c32bc975e10c0b/src/main/java/org/jfree/chart/axis/NumberAxis.java#L681)`NumberAxis`[`NumberTickUnitSource`](https://github.com/jfree/jfreechart/blob/master/src/main/java/org/jfree/chart/axis/NumberTickUnitSource.java))

引用的示例存在缺陷，因为它忽略了用户的语言环境。

附录：如果您想要本地化货币格式，请覆盖默认`Number`格式化程序。

```
XYPlot plot = chart.getXYPlot();
NumberAxis range = (NumberAxis) plot.getRangeAxis();
range.setNumberFormatOverride(NumberFormat.getCurrencyInstance()); 
```

^(†</sup>[*免责声明：不隶属于 Object Refinery Limited；只是一个满意的客户和非常小的贡献者。*])

# metrics - Checkstyle 可以返回项目的代码行吗

> ID：10026594
> 
> 赞同：1
> 
> 时间：2012-04-05T10:07:54.783
> 
> 标签：metrics, checkstyle, code-metrics

我即将在一个项目中使用 Checkstyle 来改进编码标准，并在我的研究中发现我还可以设置 Checkstyle 来返回一些编码指标以及一些其他有用的[检查](http://checkstyle.sourceforge.net/availablechecks.html)。然而，似乎有一个明显的遗漏，那就是代码行。我知道这是一个可怕的指标，但我被要求制作它！有谁知道 Checkstyle 是否可以返回项目中的代码行，如果可以，如何返回？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T20:03:52.543

Checkstyle 计算多个类似 LOC 的指标：

*   FileLength (com.puppycrawl.tools.checkstyle.checks.sizes) 默认最大值为 2000。

*   ExecutableStatementCount 和JavaNCSS，即非注释源语句。在某种程度上，它接近于 SLOC（源代码行）甚至更好的 LLOC（逻辑代码行）。LLOC、ExecutableStatementCount 和 JavaNCSS 都知道一个语句可以分布在多个物理代码行上，并且一个物理代码行可以包含多个语句。JavaNCSS 遵循 Chr 编写的 JavaNCSS-Tool 规范。克莱门斯·李。该规范可以在[http://www.kclee.de/clemens/java/javancss/#specification上找到](http://www.kclee.de/clemens/java/javancss/#specification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T20:40:41.977

诚实的回答是 Checkstyle 根本不提供 LOC 或 LLOC。事实上，据我所知，没有 Eclipse Juno Plugin for Java 提供这个非常有用的特性。我想知道为什么现在会这样。. .

即使是像 GPS 这样非常粗糙的 IDE 也提供了所有常用指标的完整目录。这似乎说明了 IBM 和甲骨文的人。

# ocaml - 使用相同名称时输入错误

> ID：10026597
> 
> 赞同：1
> 
> 时间：2012-04-05T10:07:56.733
> 
> 标签：ocaml

我有 3 个文件：

1)`cpf0.ml`

```
type string = char list
type url = string
type var = string
type name = string
type symbol =
| Symbol_name of name 
```

2)`problem.ml:`

```
type symbol =
  | Ident of string 
```

3)`test.ml`

```
open Problem;;
open Cpf0;;

let symbol b = function
  | Symbol_name n -> Ident n 
```

当我结合`test.ml`: `ocamlc -c test.ml`。我收到一个错误：

*此表达式的类型为 Cpf0.name = char list，但表达式应为字符串类型*

你能帮我纠正一下吗？非常感谢

**编辑**：谢谢你的回答。我想解释更多关于这 3 个文件的信息： 因为我正在使用 Coq 中的提取到 Ocaml 类型：`cpf0.ml`生成自 `cpf.v`：

```
 Require Import String.
 Definition string := string.
 Definition name := string.
 Inductive symbol := 
  | Symbol_name : name -> symbol. 
```

代码`extraction.v`：

```
Set Extraction Optimize.
Extraction Language Ocaml.
Require ExtrOcamlBasic ExtrOcamlString.
Extraction Blacklist cpf list. 
```

其中[ExtrOcamlString](http://coq.inria.fr/V8.3/stdlib/Coq.extraction.ExtrOcamlString.html)

我打开：`open Cpf0;;`in `problem.ml`，我遇到了一个新问题，因为 in`problem.ml`他们对类型有另一个定义`string`

***此表达式的类型为 Cpf0.string = char list，但表达式应为 Util.StrSet.elt = string 类型***

这是`util.ml`定义类型字符串中的定义：

```
module Str = struct type t = string end;;
module StrOrd = Ord.Make (Str);;
module StrSet = Set.Make (StrOrd);;
module StrMap = Map.Make (StrOrd);;

let set_add_chk x s =
  if StrSet.mem x s then failwith (x ^ " already declared")
  else StrSet.add x s;; 
```

我试图更改`t = string`为`t = char list`，但如果我这样做，我必须更改它依赖的很多功能（例如：`set_add_chk`上面）。你能给我一个好主意吗？在这种情况下我会怎么做。

**编辑2**：很抱歉多次编辑这个问题。按照答案后，我修复了文件问题.ml

```
type symbol =
  | Ident of Cpf0.string 
```

`problem.ml`他们有另一个这样的定义。并且类型一再次不接受。

```
module SymbSet = Set.Make (SymbOrd);;
let rec ident_of_symbol = function
  | Ident s -> s

let idents_of_symbols s =
  SymbSet.fold (fun f s -> StrSet.add (ident_of_symbol f) s) s StrSet.empty;; 
```

**此表达式的类型为 Cpf0.string = char list，但表达式应为 Util.StrSet.elt = string 类型**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:21:54.467

您需要在problem.ml 中打开模块Cpf0，因为模块Cfp0 和Problem 中的类型字符串不一样。

问题.ml：

```
open Cpf0
type symbol =
  | Ident of string 
```

或者更好，不要打开模块并像这样为类型字符串添加前缀：

```
type symbol =
  | Ident of Cpf0.string 
```

# c# - 在新项目进入时处理来自 rss 提要的 url

> ID：10026599
> 
> 赞同：0
> 
> 时间：2012-04-05T10:08:05.910
> 
> 标签：c#, .net

有人可以推荐一种适当的方法来做到这一点。

我订阅了许多 rss 订阅源。我想做的是获取 url，然后当我有新项目的 url 时执行 DoSomething(url) 。

基本上处理新项目的到来。

我需要做什么才能自动拥有它？无需我强制执行该过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:29:24.540

使调度程序每分钟/小时/其他时间段向 RSS 提要源发送一次请求。

通过`System.ServiceModel.Syndication`命名空间中的内容解析响应 - 您将拥有一个`SyndicationItems`代表所获得数据的集合。

对于存储中没有的每个项目 - 使用 url from 运行 DoSomething `SyndicationItem.Links`。

# c# - WP7：在浏览器上按返回按钮时黑屏

> ID：10026602
> 
> 赞同：0
> 
> 时间：2012-04-05T10:08:16.123
> 
> 标签：c#, windows-phone-7

从我的应用程序 MainPage 我去一个网站（或者：我去任务：发送电子邮件）。当按下“后退按钮”时返回黑屏，而不是 MainPage。我试图找到一个解决方案，但还没有找到一个。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:38:15.953

我想出了如何解决这个问题（我有但没有其他人，也许！）。如果您需要创建外部链接，请不要直接从您的主页进行。而是创建一个中间页面，从外部链接到该页面（例如，链接到网站或电子邮件应用程序）。然后你用后退箭头回到这个页面，并使用一个逻辑字符串，已经到过……还没有到过，你可以直接回到主页。见下文：

```
private void Button1_Click(object sender, RoutedEventArgs e)
    {
        /* instead of putting the code here, you go to another page
        EmailComposeTask emailcomposer = new EmailComposeTask();
        emailcomposer.To = "Ä;
        emailcomposer.Subject = "Customer request";
        emailcomposer.Body = "Text:";
        emailcomposer.Show();
        */

        var b = App.Current as App;
        b.Emailat = "email";

        NavigationService.Navigate(new Uri("/Page2.xaml",UriKind.Relative));
    } 
```

在另一个页面上：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        var c = App.Current as App;
        string Howisit = c.Emailat;

        if (Howisit == "email")
        {
            EmailComposeTask emailcomposer = new EmailComposeTask();
            emailcomposer.To = "";
            emailcomposer.Subject = "Customer request";
            emailcomposer.Body = "Text:";
            emailcomposer.Show();

            var b = App.Current as App;
            b.Emailat = "stop";
        }

        if (Howisit == "stop")
        {
            NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        }

    } 
```

而已！

# c++ - 如何在 Windows XP 上正确安装 ffmpeg？

> ID：10026603
> 
> 赞同：0
> 
> 时间：2012-04-05T10:08:16.670
> 
> 标签：c++, windows, compiler-errors, ffmpeg

我正在处理涉及 FFmpeg 库的 Windows 上的 C++ 项目。问题是我不能在我的项目中包含 ffmpeg 库。我什至无法运行任何 ffmpeg 教程或示例。我总是收到如下错误：

```
tutorial01.c:22:28: ffmpeg/avcodec.h: No such file or directory
tutorial01.c:23:29: ffmpeg/avformat.h: No such file or directory 
```

还有很多错误，例如：

```
tutorial01.c:33: error: `iFrame' undeclared (first use in this function) 
```

我找到了带有以下说明的教程：

```
//gcc -o tutorial01 tutorial01.c -lavformat -lavcodec -lz
//to build (assuming libavformat and libavcodec are correctly installed
//your system). 
```

经过进一步搜索，我发现我应该从这里获得一个静态构建库版本：http: [//ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/) 然后我按照以下说明安装了这个库：

1.  从 arrozcru 自动构建页面获取最新构建
2.  解压文件夹到 C:/Program Files/ffmpeg
3.  将 C:/Program Files/ffmpeg/bin 添加到系统的 PATH 环境变量中

但是我仍然有同类的编译错误。因此，似乎安装不正确。

我应该怎么做才能将 ffmpeg 库连接到我在 Windows 上的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:23:58.090

所以总结答案，你需要将ffmpeg的include和lib目录添加到gcc的目录路径中。

# java - 是否可以有一个将只读查询路由到从属 sql 服务器的 JDBC 池？

> ID：10026612
> 
> 赞同：3
> 
> 时间：2012-04-05T10:08:57.497
> 
> 标签：java, sql, spring, jdbc

我尝试搜索是否有具有此功能的 JDBC 池。我使用 DBDC，但没有提到这一点。我们也使用弹簧，也许弹簧可以帮助做到这一点？

我想将写查询路由到我的主 sql 服务器，并将只读查询路由到从属服务器。

是否存在具有此功能的现有 JDBC 池库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:12:35.970

我们正在实现您想要做的事情，不是使用 jdbc，而是使用负载平衡器。

我们有一个从属服务器和一个主服务器数据库。我们正在使用 Web 服务，负载均衡器可以通过解析请求来了解请求的功能。当它是一个只读函数时，它指向从服务器，当它涉及任何写入时，它指向主服务器。

[nginx wiki](http://en.wikipedia.org/wiki/Nginx)
[负载均衡示例与 nginx](http://library.linode.com/web-servers/nginx/configuration/front-end-proxy-and-software-load-balancing)

# c# - 在将字符串放入 webgrid 之前使用 C# 代码格式化字符串

> ID：10026615
> 
> 赞同：0
> 
> 时间：2012-04-05T10:09:11.907
> 
> 标签：c#, asp.net-mvc-3

我正在开发一个 asp.net MVC 3 应用程序。

我有一个 C# 函数，它将字符串作为输入，对其进行格式化，然后返回格式化的字符串。

我有一个 .cshtml 文件，我在其中将数据填充到 webgrid 中。

在 webgrid 中填充数据时，我想先通过 C# 函数对其进行格式化，然后再填充结果。

在 asp.net 中，我可以简单地使用后面的代码来完成它。但我是 MVC 3 的新手，因此非常感谢任何有关如何操作的建议。

我听说它应该在行动中完成。你能帮我怎么做吗？

C# 函数看起来像这样

```
public string FormatString (string input)
{
    // I Format the string and return it
} 
```

网络网格看起来像这样

```
<div id="GridDiv">
@grid.GetHtml(
        htmlAttributes: new { id = "grid" },
        tableStyle: "grid",
        headerStyle: "header",
        rowStyle: "row",
        footerStyle: "footer",
        alternatingRowStyle: "altRow",
        columns: grid.Columns(
            grid.Column("Name", "Name", style: "Centered", canSort: true),
            grid.Column("Address", "Address", canSort: true),
            grid.Column("City", "City", canSort: true),
            grid.Column("PhoneNumber", "Phone Number", style: "Centered"),
        )) 
```

我想格式化姓名、地址、城市和电话号码

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:25:51.000

好的，我个人从未使用过 Grid 助手，但我认为这将是大方向。假设 Name/Phone/City/Address 是 Person 类的属性。

构建合适的视图模型

```
public sealed class MyViewModel
{
    public string Name {get; set;}
    public string Address {get; set;}
    public string City {get; set;}
    public string PhoneNumber {get; set;}

    public MyViewModel(Person person)
    {
        FillViewModel(person); // either copy the given properties by hand, use Automapper, or write your own simple (although quite general) mapping method using reflection
        Address = FormatString(Address);
        City = FormatString(City);
        PhoneNumber = FormatString(PhoneNumber);
    }
    public MyViewModel()
    { 
    }
} 
```

在控制器动作中使用它

```
public ActionResult ShowGrid(int personId)
{
    var person = SomeKindOfDatabaseAccess.GetPerson(personId);
    var viewModel = new MyViewModel(person);
    return View(viewModel);
} 
```

然后在您的页面上使用此模型，因此当您将 PhoneNumber、City 和 Address 传递到视图中的网格时，您将对它们进行预格式化。

**编辑：关于“在哪里放置 FormatString 方法”**

如我所见，如果您只打算在与 Person 相关的业务中使用它，则可以将它放在“Person”模型类中：

（如果 Person 类是从例如 EF 生成的，您可以在不同的文件中执行它，这样它看起来很整洁，如下所示）

```
public sealed partial class Person
{
     public string FormatString(string input)
     {
         ...
     }
} 
```

或者

```
public sealed partial class Person
{
     public static string FormatString(string input)
     {
         ...
     }
} 
```

或者，如果您觉得很花哨（或者 - 更实际地 - 您将在任何其他情况下使用它来格式化字符串），您可以将该方法定义为字符串扩展以方便起见：

```
public static class Extensions
{
     public static string FormatString(this string input)
     {
         ...
     }
} 
```

进而：`PhoneNumber = PhoneNumber.FormatString();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:31:22.573

您可以在模型本身中执行此操作。在获取（姓名、地址、城市和电话号码）的属性中，您可以格式化字符串。如果您在其他任何地方使用此属性，则可以为所有 4 列（名称、地址、城市和电话号码）添加新属性，并在获取属性中设置格式并将此列绑定到网格。

例如

```
private string temp;
public string Temp { get { return string.Format("Hi {0}",this.temp);} set{}} 
```

除了 string.Format 你也可以调用你定义的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:41:20.450

如果您不希望创建 ViewModel 或自定义函数，而只是想在 WebGrid “on-the-fly” 中进行一些格式化，则可以使用以下语法：

```
<div id="GridDiv">
@grid.GetHtml(
    htmlAttributes: new { id = "grid" },
    tableStyle: "grid",
    headerStyle: "header",
    rowStyle: "row",
    footerStyle: "footer",
    alternatingRowStyle: "altRow",
    columns: grid.Columns(
        grid.Column("Name", "Name", style: "Centered", canSort: true),
        grid.Column("Scheduled", header: "Scheduled", 
            format: @<text>@(String.Format("{0:yyyy/MM/dd HH:mm}",item.DateScheduled ?? "Unscheduled"))</text>),
    ))
</div> 
```

Scheduled 列（类型为`DateTime?`）将以给定格式显示，如果是 ，则显示“Unscheduled”特殊值`null`。

# php - mysql错误资源ID#3？

> ID：10026616
> 
> 赞同：-3
> 
> 时间：2012-04-05T10:09:17.890
> 
> 标签：php, mysql

当我试图从数据库中回显列计数器的值时，我收到了 Resource id #3 错误。我只想获得一个值。有什么想法我该怎么做？

```
$Page = $_SERVER['PHP_SELF'];
$num = preg_replace("/[^0-9]/", '', $Page);

$query = "SELECT * FROM hitscounter WHERE page='$num';";
$res = mysql_query($query);
if (mysql_num_rows($res) > 0) {

mysql_query("UPDATE hitscounter SET counter=counter+1 Where page='$num'");
$views = mysql_query("SELECT counter FROM hitscounter WHERE page=555");
    mysql_fetch_array($views, MYSQL_NUM);
    mysql_free_result($views);
    echo $views;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:12:09.050

你应该使用`result`you get back from `mysql_fetch_array`，就像这样：

```
$result = mysql_fetch_array($views, MYSQL_NUM);
print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:20:46.757

你的 if 条件应该是这样的

```
$result = mysql_fetch_array($res);
if (count($result) > 0){
echo 'do something';
} 
```

# sql - 需要基本 SQL 查询帮助

> ID：10026624
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:09:52.087
> 
> 标签：sql, sql-server

我有一张有 3 列的桌子。*这是一个示例，其中只有几个演示条目。该表表示项目价格变化的日期。我需要一个查询来告诉我特定日期所有商品的价格。具体日期可能在价格变动之间。价格在午夜发生变化，因此变化的日期，即从那时到上一次变化前一天的价格*：

```
itemCode  datePriceEffective  price  
AB         2012-01-01          9.99  
AB         2012-03-02          10.50  
XY         2011-09-20          34.99 
```

我希望获得给定日期的所有商品价格。没有每个日期的条目，只有价格变化的日期。所以 2012-03-05 会返回

```
AB 10.50
XY 34.99 
```

和 2012-02-27 将返回：

```
AB 9.99  
XY 34.99 
```

得到这个所需的 SQL 查询让我无法理解。答案表示赞赏。

编辑为答案方向错误，请参阅斜体进行编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:34:54.367

这将按每个 itemCode 的 datePriceEffective 的降序检索第一条记录。

```
select top 1 with ties *
from ATable
where datePriceEffective <= @givenDate
order by row_number() over (partition by itemCode 
                            order by datePriceEffective desc) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:12:53.243

```
SELECT itemCode,price FRom TableNameHere WHERE datePriceEffective <= '2012-03-05' 
```

* * *

在获得更多信息后进行编辑 - 一个“简单”的答案，希望它易于理解。

您将获取在所需日期范围内有效的项目的最新日期，然后将表格连接到自身以获取该日期的价格

```
SELECT t1.itemCode,t1.price FROM 
  (
  SELECT itemCode,MAX(datePriceEffective) AS datePriceEffective
  FROM TableNameHere
  WHERE datePriceEffective <= '2012-03-05'
  ) a
INNER JOIN TableNameHere t1 ON t1.itemCode = a.itemCode AND t1.datePriceEffective = a.datePriceEffective 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:24:12.120

您将需要按如下方式重新加入表：

```
declare @effdate datetime
set @effdate = CONVERT(datetime,'2012-02-27')

;WITH CTE_DATA as (
    select itemCode='AB',  datePriceEffective = CONVERT(Datetime,'2012-01-01'),  price = 9.99
    union all select itemCode='AB',  datePriceEffective = CONVERT(Datetime,'2012-03-02'),  price = 10.50
    union all select itemCode='XY',  datePriceEffective = CONVERT(Datetime,'2011-09-20'),  price = 34.99
)
select
    d.itemcode,
    price
from
    CTE_DATA d
    join (
        select  
            itemcode,
            effdate = MAX(datepriceeffective)
        from CTE_DATA sub where sub.datepriceeffective <= @effdate
        group by itemcode
    ) x
        on x.itemCode = d.itemCode
        and x.effdate = d.datePriceEffective 
```

请注意，CTE 仅用于此示例，您应该将其交换为您的真实表。

更新：另一种方法是使用 ROW_NUMBER 和 PARTITION，如下所示：

```
SELECT        
    itemcode,
    price
FROM     
   (
        SELECT   
            itemcode,
            price,
            rowno = ROW_NUMBER() over (partition by itemcode order by datePriceEffective desc)
        from
            CTE_DATA
            where datePriceEffective <= @effdate
    ) x
where 
    rowno = 1 
```

（将此选择替换为上一个查询中的选择以在数据上进行尝试）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T10:33:50.553

```
declare @date datetime = '2012-03-05'

select distinct itemcode,
    (
        select top(1) itemprice 
        from mytable mt2 
        where 
            mt1.itemcode = mt2.itemcode and
            mt2.datepriceeffective <= @date
        order by datepriceeffective desc
    ) as itemprice
from 
    mytable mt1
where
    datepriceeffective <= @date 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T10:40:43.020

```
SELECT b.itemCode, 
(SELECT Price FROM dbo.tblProducts a WHERE datePriceEffective = 
(SELECT MAX(a.datePriceEffective) FROM dbo.tblProducts a WHERE a.itemCode = b.itemCode)) AS Price
FROM dbo.tblProducts b
WHERE b.datePriceEffective <= '2012-03-05'
GROUP BY b.itemCode 
```

我已经测试过了！它将为您提供每件商品的最新价格

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T10:21:49.017

假设您有另一个名为“GivenDate”的列，下面是查询。

```
SELECT itemCode, price
FROM tblName
WHERE GivenDate= '2012-03-05' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T11:54:35.647

这适用于 sql2000

```
SELECT      s.itemCode
            , ( SELECT      TOP 1 price
                FROM        #MyTable
                WHERE       itemCode = s.itemCode
                            AND datePriceEffective < @SearchDate ) AS price
FROM        (
            SELECT DISTINCT itemCode 
            FROM   #MyTable
            ) s 
```

# javascript - 检查 HTML 片段是否对 JavaScript 有效

> ID：10026626
> 
> 赞同：36
> 
> 时间：2012-04-05T10:10:03.413
> 
> 标签：javascript, html, validation

我需要一个可靠的 JavaScript 库/函数来检查我可以从我的代码中调用的 HTML 片段是否有效。例如，它应该检查打开的标签和引号是否闭合、嵌套是否正确等。

我不希望验证失败，因为某些东西不是 100% 标准的（但无论如何都会起作用）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-08T13:50:54.310

**更新**：这个答案是有限的 - 请参阅下面的编辑。

扩展@kolink 的答案，我使用：

```
var checkHTML = function(html) {
  var doc = document.createElement('div');
  doc.innerHTML = html;
  return ( doc.innerHTML === html );
} 
```

即，我们用 HTML 创建一个临时 div。为了做到这一点，浏览器将基于 HTML 字符串创建一个 DOM 树，这可能涉及关闭标签等。

将 div 的 HTML 内容与原始 HTML 进行比较将告诉我们浏览器是否需要更改任何内容。

```
checkHTML('<a>hell<b>o</b>') 
```

返回假。

```
checkHTML('<a>hell<b>o</b></a>') 
```

返回真。

**编辑：**正如@Quentin 下面所指出的，由于各种原因，这**过于严格**：浏览器通常会修复省略的结束标签，即使结束标签对于该标签是可选的。例如：

```
<p>one para
<p>second para 
```

...被认为是有效的（因为允许 Ps 省略结束标签）但`checkHTML`将返回 false。浏览器还将规范化标签大小写，并改变空白。在决定使用此方法时，您应该了解这些限制。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-05T10:12:03.340

好吧，这段代码：

```
function tidy(html) {
    var d = document.createElement('div');
    d.innerHTML = html;
    return d.innerHTML;
} 
```

这将在浏览器的最大能力范围内“纠正”格式错误的 HTML。如果这对您有帮助，那么它比尝试验证 HTML 要容易得多。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-07T20:43:57.370

到目前为止，没有一个解决方案在回答原始问题方面做得很好，尤其是在涉及到

> 我不希望验证失败，因为某些东西不是 100% 标准的（但无论如何都会起作用）。

tldr >> 检查[JSFiddle](https://jsfiddle.net/abernh/twgj8bev/)

因此，我使用了有关该主题的答案和评论的输入，并创建了一个执行以下操作的方法：

*   如果有效，则逐个标签检查 html 字符串标签
*   尝试渲染 html 字符串
*   将理论上创建的标签计数与实际渲染的 html dom 标签计数进行比较
*   如果选中“严格”，则不忽略`<br/>`空属性规范化`=""`
*   将呈现的 innerHTML 与给定的 html 字符串进行比较（同时忽略空格和引号）

退货

*   *如果呈现的 html 与给定的 html 字符串相同，则为*true**
**   *如果其中一项检查失败，则为*false****   *如果呈现的 html 看起来有效但不等于给定的 html 字符串，则*标准化 html字符串****

 ***规范化*意味着，在渲染时，浏览器有时会忽略或修复输入的特定部分（例如添加缺少的结束标记`<p>`并转换其他部分（例如单引号到双引号或＆符号的编码）。区分“失败”和“ normalized”允许将内容标记给用户，因为“这不会像您期望的那样呈现”。

大多数时候，*规范化*会返回原始 html 字符串的仅略微更改的版本 - 尽管如此，有时结果还是完全不同的。因此，这应该用于例如在将用户输入保存到数据库或盲目渲染之前标记用户输入以供进一步审查。（有关规范化的示例，请参阅[JSFiddle](https://jsfiddle.net/abernh/twgj8bev/)）

检查会考虑以下例外情况

*   忽略单引号到双引号的规范化
*   `image`和其他具有`src`属性的标签在渲染期间被“解除”
*   （如果不严格）忽略`<br/>`>>`<br>`转换
*   （如果不严格）忽略空属性的规范化（`<p disabled>`>> `<p disabled="">`）
*   读取时对最初未编码的 & 符号进行编码`.innerHTML`，例如在属性值中

.

```
function simpleValidateHtmlStr(htmlStr, strictBoolean) {
  if (typeof htmlStr !== "string")
    return false;

  var validateHtmlTag = new RegExp("<[a-z]+(\s+|\"[^\"]*\"\s?|'[^']*'\s?|[^'\">])*>", "igm"),
    sdom = document.createElement('div'),
    noSrcNoAmpHtmlStr = htmlStr
      .replace(/ src=/, " svhs___src=") // disarm src attributes
      .replace(/&amp;/igm, "#svhs#amp##"), // 'save' encoded ampersands
    noSrcNoAmpIgnoreScriptContentHtmlStr = noSrcNoAmpHtmlStr
      .replace(/\n\r?/igm, "#svhs#nl##") // temporarily remove line breaks
      .replace(/(<script[^>]*>)(.*?)(<\/script>)/igm, "$1$3") // ignore script contents
      .replace(/#svhs#nl##/igm, "\n\r"),  // re-add line breaks
    htmlTags = noSrcNoAmpIgnoreScriptContentHtmlStr.match(/<[a-z]+[^>]*>/igm), // get all start-tags
    htmlTagsCount = htmlTags ? htmlTags.length : 0,
    tagsAreValid, resHtmlStr;

  if(!strictBoolean){
    // ignore <br/> conversions
    noSrcNoAmpHtmlStr = noSrcNoAmpHtmlStr.replace(/<br\s*\/>/, "<br>")
  }

  if (htmlTagsCount) {
    tagsAreValid = htmlTags.reduce(function(isValid, tagStr) {
      return isValid && tagStr.match(validateHtmlTag);
    }, true);

    if (!tagsAreValid) {
      return false;
    }
  }

  try {
    sdom.innerHTML = noSrcNoAmpHtmlStr;
  } catch (err) {
    return false;
  }

  // compare rendered tag-count with expected tag-count
  if (sdom.querySelectorAll("*").length !== htmlTagsCount) {
    return false;
  }

  resHtmlStr = sdom.innerHTML.replace(/&amp;/igm, "&"); // undo '&' encoding

  if(!strictBoolean){
    // ignore empty attribute normalizations
    resHtmlStr = resHtmlStr.replace(/=""/, "")
  }

  // compare html strings while ignoring case, quote-changes, trailing spaces
  var
    simpleIn = noSrcNoAmpHtmlStr.replace(/["']/igm, "").replace(/\s+/igm, " ").toLowerCase().trim(),
    simpleOut = resHtmlStr.replace(/["']/igm, "").replace(/\s+/igm, " ").toLowerCase().trim();
  if (simpleIn === simpleOut)
    return true;

  return resHtmlStr.replace(/ svhs___src=/igm, " src=").replace(/#svhs#amp##/, "&amp;");
} 
```

在这里，您可以在 JSFiddle [https://jsfiddle.net/abernh/twgj8bev/](https://jsfiddle.net/abernh/twgj8bev/)中找到它，以及不同的测试用例，包括

```
"<a href='blue.html id='green'>missing attribute quotes</a>" // FAIL
"<a>hell<B>o</B></a>"                                        // PASS
'<a href="test.html">hell<b>o</b></a>'                       // PASS
'<a href=test.html>hell<b>o</b></a>',                        // PASS
"<a href='test.html'>hell<b>o</b></a>",                      // PASS
'<ul><li>hell</li><li>hell</li></ul>',                       // PASS
'<ul><li>hell<li>hell</ul>',                                 // PASS
'<div ng-if="true && valid">ampersands in attributes</div>'  // PASS 
```

.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-02-11T19:12:10.417

9 年后，使用[DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)怎么样？

它接受字符串作为参数并返回[文档](https://developer.mozilla.org/en-US/docs/Web/API/Document)类型，就像 HTML 一样。因此，当它发生错误时，返回的文档对象中包含`<parsererror>`元素。

如果您将 html 解析为 xml，至少您可以检查您的 html 是否符合 xhtml。

例子

```
> const parser = new DOMParser();
> const doc = parser.parseFromString('<div>Input: <input /></div>', 'text/xml');
> (doc.documentElement.querySelector('parsererror') || {}).innerText; // undefined 
```

将其包装为一个函数

```
function isValidHTML(html) {
  const parser = new DOMParser();
  const doc = parser.parseFromString(html, 'text/xml');
  if (doc.documentElement.querySelector('parsererror')) {
    return doc.documentElement.querySelector('parsererror').innerText;
  } else {
    return true;
  }
} 
```

测试上述功能

```
isValidHTML('<a>hell<B>o</B></a>') // true
isValidHTML('<a href="test.html">hell</a>') // true
isValidHTML('<a href='test.html'>hell</a>') // true
isValidHTML("<a href=test.html>hell</a>")  // This page contains the following err..
isValidHTML('<ul><li>a</li><li>b</li></ul>') // true
isValidHTML('<ul><li>a<li>b</ul>') // This page contains the following err..
isValidHTML('<div><input /></div>' // true
isValidHTML('<div><input></div>' // This page contains the following err.. 
```

以上适用于非常简单的html。但是，如果您的 html 有一些类似代码的文本；`<script>`, `<style>`, 等等，尽管它是有效的 HTML，但您只需要为 XML 验证进行操作

下面将类似代码的 html 更新为有效的 XML 语法。

```
export function getHtmlError(html) {
  const parser = new DOMParser();
  const htmlForParser = `<xml>${html}</xml>`
    .replace(/(src|href)=".*?&.*?"/g, '$1="OMITTED"')
    .replace(/<script[\s\S]+?<\/script>/gm, '<script>OMITTED</script>')
    .replace(/<style[\s\S]+?<\/style>/gm, '<style>OMITTED</style>')
    .replace(/<pre[\s\S]+?<\/pre>/gm, '<pre>OMITTED</pre>')
    .replace(/&nbsp;/g, '&#160;');

  const doc = parser.parseFromString(htmlForParser, 'text/xml');
  if (doc.documentElement.querySelector('parsererror')) {
    console.error(htmlForParser.split(/\n/).map( (el, ndx) => `${ndx+1}: ${el}`).join('\n'));
    return doc.documentElement.querySelector('parsererror');
  }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-29T05:43:41.073

```
function validHTML(html) {
  var openingTags, closingTags;

  html        = html.replace(/<[^>]*\/\s?>/g, '');      // Remove all self closing tags
  html        = html.replace(/<(br|hr|img).*?>/g, '');  // Remove all <br>, <hr>, and <img> tags
  openingTags = html.match(/<[^\/].*?>/g) || [];        // Get remaining opening tags
  closingTags = html.match(/<\/.+?>/g) || [];           // Get remaining closing tags

  return openingTags.length === closingTags.length ? true : false;
}

var htmlContent = "<p>your html content goes here</p>" // Note: String without any html tag will consider as valid html snippet. If it’s not valid in your case, in that case you can check opening tag count first.

if(validHTML(htmlContent)) {
  alert('Valid HTML')
}
else {
  alert('Invalid HTML');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-19T20:00:55.283

从上面扩展@Tarun的答案：

```
function validHTML(html) { // checks the validity of html, requires all tags and property-names to only use alphabetical characters and numbers (and hyphens, underscore for properties)
    html = html.toLowerCase().replace(/(?<=<[^>]+?=\s*"[^"]*)[<>]/g,"").replace(/(?<=<[^>]+?=\s*'[^']*)[<>]/g,""); // remove all angle brackets from tag properties
    html = html.replace(/<script.*?<\/script>/g, '');  // Remove all script-elements
    html = html.replace(/<style.*?<\/style>/g, '');  // Remove all style elements tags
    html = html.toLowerCase().replace(/<[^>]*\/\s?>/g, '');      // Remove all self closing tags
    html = html.replace(/<(\!|br|hr|img).*?>/g, '');  // Remove all <br>, <hr>, and <img> tags
    //var tags=[...str.matchAll(/<.*?>/g)]; this would allow for unclosed initial and final tag to pass parsing
    html = html.replace(/^[^<>]+|[^<>]+$|(?<=>)[^<>]+(?=<)/gs,""); // remove all clean text nodes, note that < or > in text nodes will result in artefacts for which we check and return false
    tags = html.split(/(?<=>)(?=<)/);
    if (tags.length%2==1) {
        console.log("uneven number of tags in "+html)
        return false;
    }
    var tagno=0;
    while (tags.length>0) {
        if (tagno==tags.length) {
            console.log("these tags are not closed: "+tags.slice(0,tagno).join());
            return false;
        }
        if (tags[tagno].slice(0,2)=="</") {
            if (tagno==0) {
                console.log("this tag has not been opened: "+tags[0]);
                return false;
            }
            var tagSearch=tags[tagno].match(/<\/\s*([\w\-\_]+)\s*>/);
            if (tagSearch===null) {
                console.log("could not identify closing tag "+tags[tagno]+" after "+tags.slice(0,tagno).join());
                return false;
            } else tags[tagno]=tagSearch[1];
            if (tags[tagno]==tags[tagno-1]) {
                tags.splice(tagno-1,2);
                tagno--;
            } else {
                console.log("tag '"+tags[tagno]+"' trying to close these tags: "+tags.slice(0,tagno).join());
                return false;
            }
        } else {
            tags[tagno]=tags[tagno].replace(/(?<=<\s*[\w_\-]+)(\s+[\w\_\-]+(\s*=\s*(".*?"|'.*?'|[^\s\="'<>`]+))?)*/g,""); // remove all correct properties from tag
            var tagSearch=tags[tagno].match(/<(\s*[\w\-\_]+)/);
            if ((tagSearch===null) || (tags[tagno]!="<"+tagSearch[1]+">")) {
                console.log("fragmented tag with the following remains: "+tags[tagno]);
                return false;
            }
            var tagSearch=tags[tagno].match(/<\s*([\w\-\_]+)/);
            if (tagSearch===null) {
                console.log("could not identify opening tag "+tags[tagno]+" after "+tags.slice(0,tagno).join());
                return false;
            } else tags[tagno]=tagSearch[1];
            tagno++;
        }
    }
    return true;
}
```

这会执行一些额外的检查，例如测试标签是否匹配以及属性是否会解析。由于它不依赖于现有的 DOM，因此可以在服务器环境中使用，但要注意：它很慢。此外，理论上，标签可以是更宽松的名称，因为您基本上可以在标签和属性名称中使用任何 unicode（除了少数例外）。然而，这不会通过我自己的健全性检查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-27T20:17:50.383

```
function isHTML(str)
{
 var a = document.createElement('div');
 a.innerHTML = str;
 for(var c= a.ChildNodes, i = c.length; i--)
 {
    if (c[i].nodeType == 1) return true;
 }
return false;
} 
```

祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-29T08:07:11.377

使用纯 JavaScript，您可以使用以下函数检查元素是否存在：

```
if (typeof(element) != 'undefined' && element != null) 
```

使用以下代码，我们可以实际测试它：

**HTML：**

```
<input type="button" value="Toggle .not-undefined" onclick="toggleNotUndefined()">
<input type="button" value="Check if .not-undefined exists" onclick="checkNotUndefined()">
<p class=".not-undefined"></p> 
```

**CSS：**

```
p:after {
    content: "Is 'undefined'";
    color: blue;
}
p.not-undefined:after {
    content: "Is not 'undefined'";
    color: red;
} 
```

**JavaScript：**

```
function checkNotUndefined(){
    var phrase = "not ";
    var element = document.querySelector('.not-undefined');
    if (typeof(element) != 'undefined' && element != null) phrase = "";
    alert("Element of class '.not-undefined' does "+phrase+"exist!");
    // $(".thisClass").length checks to see if our elem exists in jQuery
}

function toggleNotUndefined(){
    document.querySelector('p').classList.toggle('not-undefined');
} 
```

它可以在[JSFiddle](http://jsfiddle.net/g522twb8/2/)上找到。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-22T14:56:38.093

这取决于您使用的 js-library。

node.js 的 HTML 验证[https://www.npmjs.com/package/html-validator](https://www.npmjs.com/package/html-validator)

jQuery 的 HTML 验证器[https://api.jquery.com/jquery.parsehtml/](https://api.jquery.com/jquery.parsehtml/)

但是，如前所述，使用浏览器验证损坏的 HTML 是个好主意：

```
function tidy(html) {
    var d = document.createElement('div');
    d.innerHTML = html;
    return d.innerHTML;
} 
```**

# html - HTML表单元素可以存储的最大值是多少

> ID：10026627
> 
> 赞同：1
> 
> 时间：2012-04-05T10:10:03.780
> 
> 标签：html

我想知道 a 可以存储的最大值是多少`<input type="hidden">`，我不是在讨论 maxlength 属性，而是它可以存储的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:12:56.347

[http://www.w3.org/TR/html401/sgml/sgmldecl.html](http://www.w3.org/TR/html401/sgml/sgmldecl.html)

```
 QUANTITY SGMLREF
                  ATTCNT   60      -- increased --
                  ATTSPLEN 65536   -- These are the largest values --
                  LITLEN   65536   -- permitted in the declaration --
                  NAMELEN  65536   -- Avoid fixed limits in actual --
                  PILEN    65536   -- implementations of HTML UA's --
                  TAGLVL   100
                  TAGLEN   65536
                  GRPGTCNT 150
                  GRPCNT   64 
```

## 编辑

根据[html 5](http://www.w3.org/TR/2009/WD-html5-20090212/tree-construction.html)：

> 下面描述的算法对生成的 DOM 树的深度或标签名称、属性名称、属性值、文本节点等的长度没有限制。虽然鼓励实现者避免任意限制，但认识到实际问题可能会强制用户代理施加嵌套深度限制。

# c++ - 将矩形定义为两点或原点/大小？

> ID：10026628
> 
> 赞同：8
> 
> 时间：2012-04-05T10:10:06.847
> 
> 标签：c++, c, oop

这个问题在我的职业生涯中多次出现，并将我和我的同事分成两个阵营。我认为这可能是这个网站上最好的答案，一劳永逸。

几乎所有图形 UI 库都实现了 Rectangle 结构，但它们的实现方式通常分为两个可能的选项：

1.  矩形定义为同一坐标系内的两个二维点，通常命名为 p0 和 p1，或具有单独的分量，如 x0、y0、x1、y1。
2.  矩形被定义为 2D 原点和大小向量，通常命名为位置和大小，或者单独命名为 x、y、宽度、高度。

现在，假设我要编写一个 UI 库，我应该选择两种选择中的哪一种？

**更新**：问题涉及实现，而不是接口。当然，矩形的界面可以很好地支持这两种方法，但是如何在矩形中存储数据呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T10:14:04.750

为什么不两者都选？

真的，唯一重要的是你的库和它的内部之间的接口。或者，您的用户将如何**使用**该库。您可以根据需要存储矩形的信息，但是应该将其封装在远离用户的地方，这样他们就不必担心矩形是如何存储的，只是它确实是一个矩形。

换句话说，选择两者，如果您正在编写面向对象的代码，您可以根据需要存储矩形，然后让您的用户使用任何一种方法创建一个矩形。

例如，您的声明可能如下所示：

```
class Rectangle
{
public:
    Rectangle(Point p1, Point p2);
    Rectangle(Point origin, int width, int height);
    ...
}; 
```

（C++，因为你标记了那个）

Point 是一些类：

```
class Point
{
public:
    Point(int x, int y) : mX(x), mY(y) {}
private:
    int mX;
    int mY;
}; 
```

这样，您的库不仅限于支持一种类型的规范来创建矩形。

就具体实现而言，这真的无关紧要。它们都可以工作并且可以很容易地相互转换并使用相同数量的内存，因此使用一个比另一个不会对性能产生重大影响。

为了简化开发，请考虑矩形的用例是什么。查看您需要为该类编写的每个成员函数，并考虑哪种格式可以更轻松地编写这些函数。

如果是我，我可能会用这两点来实现它。

**编辑：为什么我认为以任何一种方式实施它的学术方法在大多数情况下都绝对没有区别。**

让我们的 Rectangle 类上有一个成员函数或一个操作，它可以在我们的矩形上工作或进行一些计算。假设一种实现方法（宽度/高度/原点或两点）将比另一种实现更快地执行此操作。

我们可以使用以下实现从实现宽度/高度/原点转换：

```
// assuming x0,y0 is top left and x1,y1 is bottom right
x0 = originX;
y0 = originY;
x1 = originX + width;
y1 = originY + height; 
```

我们可以从实现转换为以下两点：

```
// assuming x0,y0 is top left and x1,y1 is bottom right
originX = x0;
originY = y0;
width = x1 - x0;
height = y1 - y0; 
```

因此，执行此操作比其他实现慢得多/差得多的实现可以在 O(1) 运行时间内转换为其他实现，因此其他实现不能*比*第一个实现好得多。

除非您每秒执行数千次此操作或在性能极其有限的设备上执行此操作，否则我非常相信不会有性能差异。已经没有内存差异，因为这两种实现几乎都只存储 4 个浮点数/整数。

这几乎留下了编码的便利，就像我在上面的原始帖子中所说的那样，您可以简单地“考虑一下矩形的用例是什么。看看您需要为该类编写的每个成员函数并思考关于哪种格式会使编写这些函数更容易。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:21:01.140

毫无疑问，这当然完全取决于您面临的问题。

对于图形绘图算法，第二个选项似乎有一个非常小的优势恕我直言。而对于在欧几里得平面上定义的一般“几何”算法 - 第一个选项更方便一些。

此外，有一次我正在研究在地球表面定义的算法。意味着，x,y 坐标分别代表经度/纬度。x坐标显然是**循环**的。在这种特定情况下，为了定义（某种）矩形 - 仅定义角是不够的，您还需要一个**方向**。这可以通过第一个点 (p0) 是最左边的点，而第二个点 (p1) - 最右边的约定来处理。但我更喜欢切换到第二个约定，在那里你自然有一个角和一个偏移向量。

# database - 数据库模型最佳实践 - 即调查

> ID：10026631
> 
> 赞同：0
> 
> 时间：2012-04-05T10:10:40.747
> 
> 标签：database, django

拥有这两个课程我总是怀疑哪个是“链接”它们的最佳实践（如果有的话）

问题

```
class Question(models.Model):
    text = models.CharField('Question',max_length=120)
    created = models.DateTimeField(auto_now_add=True)
    opens = models.DateTimeField()
    closes = models.DateTimeField() 
```

回答

```
class Answer(models.Model):
    text =  models.CharField('Answer',max_length=120)
    votes = models.IntegerField(default=0) 
```

**错误 -**我可以将此行添加到 Answer **（这是复制/粘贴错误）：**

```
answers = models.ForeignKey(Answer) 
```

**编辑：**

```
answers = models.ManyToManyField(Answer) 
```

我可以将此行添加到答案：

```
question = models.ForeignKey(Question) 
```

我想知道这是否真的无关紧要，或者我应该考虑不同的方面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:20:12.073

```
class Question: 
    answer = models.ForeignKey(Answer) 
```

> "This particular question has only one possible answer".

* * *

```
class Answer: 
    question = models.ForeignKey(Question) 
```

> "This answer belongs to one particular question only, but that question might have multiple separate answers"

* * *

```
class Answer:
    question = models.ManyToManyField(Question) 
```

> "This particular answer is an answer to multiple questions. So questions can have multiple separate answers"

* * *

```
class Question:
    answers = modes.ManyToManyField(Answer) 
```

> "This question has multiple distinct answers. Also answers can belong to multiple questions." [**Best approach**]

* * *

An question has to have answers. You don't make an answer (usually) to answer multiple questions, instead, an answer answers one particular question, but there may be multiple answers (from different users for example). Therefore I'd pick 4 .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:19:45.537

```
answers = models.ForeignKey(Answer)

question = models.ForeignKey(Question) 
```

这些是不等价的。第一个（假设您的意思是第一个应该打开`Question`将意味着一个问题只有一个答案，但一个答案有多个问题 - 猜测这不是您想要的。

The second will mean that an answer has a single question and that questions will have more than one answer which is presumably what you want. By default this will add an answer_set field to Question containing all of a questions answers.

# android - Android ANR SurfaceView

> ID：10026632
> 
> 赞同：8
> 
> 时间：2012-04-05T10:10:41.837
> 
> 标签：android, surfaceview

如果我从具有 SurfaceView 的正在运行的 Activity 启动新 Activity，*有时*我会不断收到 ANR 。有谁知道这个锁是干什么用的？我使用android支持包来使用片段，我的surfaceview在一个片段中。

```
----- pid 5281 at 2012-04-05 10:59:42 -----
Cmd line: com.customlbs.android

DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0)
"main" prio=5 tid=1 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x400281b8 self=0xd088
  | sysTid=5281 nice=0 sched=0/0 cgrp=default handle=-1345006464
  | schedstat=( 594287586 502197465 969 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40028250> (a java.lang.VMThread)
  at java.lang.Thread.parkFor(Thread.java:1424)
  at java.lang.LangAccessImpl.parkFor(LangAccessImpl.java:48)
  at sun.misc.Unsafe.park(Unsafe.java:337)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:808)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:841)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1171)
  at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:185)
  at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:261)
  at android.view.SurfaceView.updateWindow(SurfaceView.java:506)
  at android.view.SurfaceView.updateWindow(SurfaceView.java:407)
  at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:217)
  at android.view.View.dispatchWindowVisibilityChanged(View.java:4080)
  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
  at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
  at android.view.ViewRoot.performTraversals(ViewRoot.java:790)
  at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:130)
  at android.app.ActivityThread.main(ActivityThread.java:3691)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:507)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
  at dalvik.system.NativeStart.main(Native Method)

"Binder Thread #4" prio=5 tid=21 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40592610 self=0x1c80a8
  | sysTid=5357 nice=0 sched=0/0 cgrp=default handle=1719752
  | schedstat=( 2032583 22732170 13 )
  at dalvik.system.NativeStart.run(Native Method)

"Thread-22" prio=5 tid=20 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x405759b0 self=0x1f7700
  | sysTid=5346 nice=0 sched=0/0 cgrp=default handle=1445888
  | schedstat=( 42773840 67378464 44 )
  at java.lang.VMThread.sleep(Native Method)
  at java.lang.Thread.sleep(Thread.java:1213)
  at java.lang.Thread.sleep(Thread.java:1195)
  at com.customlbs.localization.LocatingTaskDummy.run(LocatingTaskDummy.java:57)
  at java.lang.Thread.run(Thread.java:1019)

"SurfaceLoaderThread" prio=5 tid=19 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4055f928 self=0x1d1a90
  | sysTid=5343 nice=0 sched=0/0 cgrp=default handle=1855352
  | schedstat=( 631976786 273191742 777 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4055f928> (a com.customlbs.android.presentation.SurfaceLoader)
  at java.lang.Object.wait(Object.java:358)
  at com.customlbs.android.presentation.SurfaceLoader.run(SurfaceLoader.java:41)

"SurfacePainterThread" prio=5 tid=18 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x4055f448 self=0x1c4d78
  | sysTid=5342 nice=0 sched=0/0 cgrp=default handle=1855152
  | schedstat=( 449782042 246506659 831 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4055f448> (a com.customlbs.android.presentation.SurfacePainter)
  at java.lang.Object.wait(Object.java:358)
  at com.customlbs.android.presentation.SurfacePainter.run(SurfacePainter.java:99) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:23:24.817

> 好的，我终于找到了。`Callback.surfaceDestroyed`没有等待我的绘画线程释放画布锁，现在如果我开始一个新的 Activity正在`SurfaceView.updateWindow`等待解锁
> 
> – Philipp König 4 月 5 日 12:11

# jquery - 使用电子邮件进行 Jquery 验证

> ID：10026635
> 
> 赞同：0
> 
> 时间：2012-04-05T10:10:53.653
> 
> 标签：jquery, jquery-validate

[我可以在不使用 jquery http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)的验证插件提交整个表单的情况下验证按钮单击的表单吗

这个插件非常适合表单验证，但实际上我想检查写在文本框中的文本是否是电子邮件，如果它是电子邮件，那么我必须检查它是否在我的数据库中，如果它在我的数据库它将让用户提交表单，否则禁用按钮现在我正在使用验证插件，如下所示：

```
$('#child1Email').blur(function(){
    var result=$('#frmAddChild').validate();
    alert(result);
    //if(result)
       //Ajax call to my servlet
    //else
       //Message box showing wrong  email and disabling the submit button
}); 
```

PS我将带有**id** :: **child1Email**的**文本字段的****类**保留为**电子邮件**，以便将其验证为电子邮件

 ******```
<form name='frmAddChild' id='frmAddChild' action='addChild' method='post'>
     .
     .
     .
     .
     .
     <input type="text" name="child1Email" id="child1Email" class='email'/>
     .
     .
     .
     .
     .
</form> 
```

但是当我**提醒**结果时它显示**[object Object]**![在此处输入图像描述](../Images/be6ebdf245723346c7595e7522827b7b.png)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:53:05.833

您可以轻松地创建**自己的验证**规则，而不是在新代码块中施展魔法。

像这样的东西：

```
<input type="text" 
       name="child1Email" 
       id="child1Email" 
       class="email"
       /> 
```

使用 jQuery Validation Plugin，您可以将自定义代码编写为：

```
$("form").validate({    
    rules: {      
        child1Email: {        
            required: true,        
            remote: "validate-email.jsp"      
        }    
     },
     messages: {
         child1Email: "Email is correct."   
         },
         submitHandler: function() {
             alert("Correct email!");
         },
         success: function(label) {
             label.addClass("valid").text("Valid email!")
         },
         onkeyup: false
}); 
```

该`remote`选项将以`GET`这种格式向您发送请求：

```
validate-email.jsp?child1Email=abc%40domain.com 
```

你在哪里发回`true`或者`false`取决于你想要做出什么反应。

**另外**，您始终可以自己调用验证，例如：

```
$("form").submit(function() {

    if($("form").valid()) { 
        alert('valid form'); 
        return true; // submit automatically
    }
    else { 
        alert('form is not valid'); 
    }

    return false; // no need to submit automatically
}); 
```******

# c++ - 如何从基类（非抽象）调用重载函数？

> ID：10026637
> 
> 赞同：3
> 
> 时间：2012-04-05T10:11:01.727
> 
> 标签：c++

DVD 类继承了 Media 类，比基类多一个变量。

我声明一个指针：

```
Media* ptr = new DVD(...); 
```

我想打印出 DVD 的内容，所以下面的代码按预期工作：

```
ptr->print(cout); 
```

但是使用重载的 << 运算符只会调用基类 print() 函数：

```
cout << *ptr << endl; 
```

所以它只打印出 ID，而不是导演的名字。

解决此问题的一种方法是稍微修改重载 << 运算符以使其接受指针，因此：

```
cout << ptr << endl; 
```

应该工作，但不知何故，我必须找到`cout << *ptr << endl;`按预期工作的方法。

有什么建议吗？

问题是我不能使基类（媒体）抽象，因为我需要在重载 ostream 运算符中调用它的实例，所以基类的指针不能调用派生类的重载函数，它是指向。

代码：

```
#include <iostream>
using namespace std;

class Media{
    private:
        int id;
    public:
        Media(int _id) : id(_id) {}
        virtual ~Media();
        virtual void print(ostream &out);
        friend ostream& operator << (ostream& out, Media aMedia);
};
Media::~Media(){}

class DVD : public Media {
    private:
        string director;
    public:
        DVD(int _id, string _director = "unknown") : Media(_id), director(_director) {}
        ~DVD();
        void print(ostream &out);
};
DVD::~DVD(){}

void Media::print(ostream& out){
    out << "ID " << id;
}
void DVD::print(ostream& out){
    out << "DVD: ";
    Media::print(out);
    out << " Directed by " << director;
}
ostream& operator << (ostream& out, Media aMedia){
    aMedia.print(out);
    return out;
}

int main() { 
    Media *ptr = new DVD(352, "Stephen Spielberg"); 
    ptr->print(cout); // Prints out: "DVD: ID 352 Directed by Stephen Spielberg". Correct!
    cout << endl; 
    cout << *ptr << endl; //Prints out: "ID 352" Incorrect!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:14:39.680

或者通过引用 Media& 将 aMedia 传递给 << 以便进行虚拟调度。

您正在直接传递一个 Media 对象，这意味着将创建 DVD 对象的一个​​新副本，并且仅 DVD 的部分将被丢弃，只有它的 Media 部分最终会出现在 aMedia 参数中。

看：

```
ostream& operator << (ostream& out, const Media& aMedia){
    aMedia.print(out);
    return out;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:15:08.383

问题出在这个声明`ostream& operator << (ostream& out, Media aMedia)`中。您`aMedia`通过复制接受导致对象切片的参数，通过将签名更改为`ostream& operator << (ostream& out, const Media& aMedia)`.

因为你做的切片`cout << *ptr`，一个类型的*副本*`DVD`被创建`Media`（即 DVD 被切片到一个媒体），现在当你调用时，`print`因为对象的类型是`Media`call 转到`Media::print`. [您可以在此处](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)阅读有关对象切片的更多信息。

# wpf - WPF 性能问题

> ID：10026642
> 
> 赞同：0
> 
> 时间：2012-04-05T10:11:10.470
> 
> 标签：wpf, performance

我有一个 WPF 应用程序，它允许用户输入生产数据。

出于这个原因，我创建了一个使用 WPF Toolkit Accordion 的用户控件。在 Code behind 中，我创建了 15 个 Accordion Items。每个项目都有一个堆栈面板和 5-10 个文本框。

将这些控件中的 12 个添加到主内容控件时，大约需要 10 秒。

这种行为的原因是什么？

```
 public XXXMeasurementControl(Measurement meas)
    {

        InitializeComponent();

        if (meas.ID == -2)
        {
            LineNameTextBlock.Text = "Total";
        }
        else
        {
            LineNameTextBlock.Text = meas.MeasureDate.ToString("HH:mm") + " - " + meas.MeasureDate.AddHours(1).ToString("HH:mm");
        }

        this.cells = meas.MainCells;
        this.meas = meas;

        Binding b = new Binding();
        Remark.DataContext = Meas;
        b.Mode = BindingMode.TwoWay;
        b.Path = new PropertyPath("Remark");
        BindingOperations.SetBinding(Remark, TextBox.TextProperty, b);

        //Create Cells Start

        foreach (Cell c in cells)
        {
            //Creating Textboxes & Bindings for Stations from Maincells

            if (c.Name != "OQC")
            {

                //Setting Qualified Overall (=Qualified from Cell Appearance Check)

                Common.BindTextBlock(QualifiedOverallTextBlock, c, "Qualified");

                if (c.Name.Contains("Appearance Check"))
                    Common.BindTextBlock(QualifiedOverallTextBlock, c, "Qualified");

                //Setting Scrap Rate (=Waste from Cell Acoustic Test)

                if (c.Name.Contains("Acoustic Test"))
                      Common.BindTextBlock(ScrapRateTextBlock, c, "WasteRate");

                AccordionItem aci = new AccordionItem();

                StackPanel sp = new StackPanel();
                StackPanel groupData = new StackPanel();
                StackPanel all = new StackPanel();
                all.Children.Add(sp);
                all.Children.Add(groupData);

                if (c.Stations != null)

                    //All Single Cell Line Controls

                    if (meas.ID != -2)
                    {
                        for (int i = 0; i < c.Stations.Count; i++)
                        {
                            NumberTextbox t = Common.CreateNumberTextbox(c.Stations[i], "Value", BindingMode.TwoWay, false, null, 80, 22);

                            t.LostFocus += new RoutedEventHandler(t_LostFocus);

                            c.Stations[i].PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(LineControl_PropertyChanged);

                            //Handling if Qualified Field is Editable

                            if (c.Stations[i].Name.Contains("Qualified"))
                            {
                                t.Background = new SolidColorBrush(Colors.BlanchedAlmond);
                                groupData.Children.Add(t);

                            }
                            else
                            {
                                sp.Children.Add(t);
                            }

                        }
                    }

                groupData.Children.Add(Common.CreateNumberTextbox(c, "RejectQty", BindingMode.OneWay, true,null, 80, 22));
                groupData.Children.Add(Common.CreateNumberTextbox(c, "PassRate", BindingMode.OneWay, true, new SolidColorBrush(Colors.BlanchedAlmond), 80, 22));
                groupData.Children.Add(Common.CreateNumberTextbox(c, "RejectRate", BindingMode.OneWay, true, new SolidColorBrush(Colors.BlanchedAlmond), 80, 22));

                aci.Header = "";
                aci.Content = all;
                MainCellsAccordion.Items.Add(aci);

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:35:56.923

WPF Toolkit 中的 Accordion 控件的性能也很*糟糕。*我在一个选项卡中有一个 Accordion 控件，每当我切换到该选项卡时，都需要 2-3 秒的时间来初始化内容。当不使用手风琴控件时，我没有这个问题。

我认为手风琴是你的罪魁祸首。

# spring - 带有两个休眠事务的spring junit测试

> ID：10026647
> 
> 赞同：3
> 
> 时间：2012-04-05T10:11:19.977
> 
> 标签：spring, unit-testing, transactions, junit

我有 spring junit 测试，包括两个作为 REQUIRES_NEW 传播的顺序事务：

```
public class ContractServiceTest extends AbstractIntegrationTest {

@Autowired
private PersistenceManagerHibernate persistenceManagerHibernate;

@Autowired
private ContractService contractService;

@Autowired
private EntityChangeService entityChangeService;

@Resource
private AddServiceService addService;

@Autowired
private ReferenceBookService refService;

@Autowired
private PropertyService propertyService;

@Autowired
private HibernateTransactionManager transactionManager;

@Test
public void testContractDeletes() {
    Long contractId = 1L;
    final Contract contract = createTestDetachedContract(contractId, PropertyServiceTest.createManaged(propertyService, refService), refService);
    ensureContractCreated(contract);
    deleteTransactional(contract);
    Assert.assertEquals(1, entityChangeService.findByPaginationOrderByUpdateDate(Contract.class.getName(), contract.getId().toString(), null, 0, 30).size());
}

@Test
@Ignore
public void testContractCreates() {
    Long contractId = 1L;
    final Contract contract = createTestDetachedContract(contractId, PropertyServiceTest.createManaged(propertyService, refService), refService);
    ensureContractDeleted(contract);
    createContractTransactional(contract);
    Assert.assertEquals(1, entityChangeService.findByPaginationOrderByUpdateDate(Contract.class.getName(), contract.getId().toString(), null, 0, 30).size());
}

private void ensureContractCreated(Contract contract) {
    if (persistenceManagerHibernate.isCreated(Contract.class, contract.getId())) {          
        return;
    }
    createContractTransactional(contract);
}

private void deleteTransactional(final Contract contract) {
    TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);
    transactionTemplate.setPropagationBehavior(Propagation.REQUIRES_NEW.value());
    transactionTemplate.execute(new TransactionCallback() {
        public Object doInTransaction(TransactionStatus status) {
            try {
                contractService.delete(contract);
            } catch (Exception e) {
                toString();
            }
            return null;
        }
    });
}

private void createContractTransactional(final Contract contract) {
    TransactionTemplate transactionTemplate2 = new TransactionTemplate(transactionManager);
    transactionTemplate2.setPropagationBehavior(Propagation.REQUIRES_NEW.value());
    transactionTemplate2.execute(new TransactionCallback() {
        public Object doInTransaction(TransactionStatus status) {
            contractService.create(contract);
            return null;
        }
    });
}

private void ensureContractDeleted(final Contract contract) {
    if (!persistenceManagerHibernate.isCreated(Contract.class, contract.getId())) {
        return;
    }
    deleteTransactional(contract);
}

public static Contract createTestDetachedContract(Long contractId, Property property, ReferenceBookService refService) {
    Contract contract1 = new Contract();
    contract1.setId(contractId);
    contract1.setName("test name");
    contract1.setProperty(property);
    contract1.setNumber("10");
    contract1.setType(refService.get(ContractType.class, 1L));
    contract1.setStatus(refService.get(ContractStatus.class, 1L));
    contract1.setCreated(new Date());
    contract1.setCurrencyRate(new BigDecimal(10));
    contract1.setInitialSum(new BigDecimal(10));
    contract1.setSum(new BigDecimal(10));
    return contract1;
}
} 
```

测试在使用 insert sql 语句提交事务时冻结，即：

```
 private void createContractTransactional(final Contract contract) {
    TransactionTemplate transactionTemplate2 = new TransactionTemplate(transactionManager);
    transactionTemplate2.setPropagationBehavior(Propagation.REQUIRES_NEW.value());
    transactionTemplate2.execute(new TransactionCallback() {
        public Object doInTransaction(TransactionStatus status) {
            contractService.create(contract);
            return null;
        }
    });
} 
```

为什么会发生这种情况（调试器在没有提供源代码的情况下停在某些 oracle 代码处）以及如何正确编写具有两个顺序事务的 spring junit 测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:11:14.267

It sounds like the test is creating a deadlock on the Contract table in your database. The root cause of this is most likely the use of the `REQUIRES_NEW` propagation level, as detailed in [this question](https://stackoverflow.com/questions/12390888/differences-between-requires-new-and-nested-propagation-in-spring-transactions). The important part is this:

> PROPAGATION_REQUIRES_NEW starts a new, independent "inner" transaction for the given scope. This transaction will be committed or rolled back completely independent from the outer transaction, having its own isolation scope, its own set of locks, etc. The outer transaction will get suspended at the beginning of the inner one, and resumed once the inner one has completed

The `createContractTransactional` method is trying to insert into the Contract table but something earlier in the test must be holding a lock on it, I'm guessing it's the call to `persistenceManagerHibernate.isCreated(Contract.class, contract.getId())`. Whatever the cause, you have two independent transactions that are locking on the same table, i.e. a deadlock.

Try setting the propagation level the transactions in your test to `REQUIRED`, which is the default setting. This creates a new transaction if there isn't one already, otherwise the current transaction is used. That should make your test execute in a single transaction and so you shouldn't get a deadlock. Once that is working then you may want to read the [spring documentation](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/transaction/annotation/Propagation.html) on its propagation levels to make sure that `REQUIRED` is the right level for your needs.

# eclipse - Eclipse/MyEclipse 中的 Websphere 6.1 编辑器窗口

> ID：10026649
> 
> 赞同：0
> 
> 时间：2012-04-05T10:11:24.900
> 
> 标签：eclipse, websphere, myeclipse

可以在 eclipse/myeclipse 的服务器选项卡中双击 websphere 服务器连接器以获取服务器编辑器窗口。但是现在当我这样做时，我无法打开编辑器窗口。是否删除了此功能，还是我需要设置正确的视角。我正在使用 MyEclipse Java 透视图。编辑器窗口允许我更改端口并启用/禁用安全性。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:49:20.783

您可能会想到 eclipse 中的 Web 工具平台 (WTP)。MyEclipse 集成了 WTP 的大部分功能，但具有不同的配置和部署到服务器的方式。MyEclipse 服务器视图选项卡称为“Servers”，WTP 服务器视图选项卡称为“WTP Servers”。双击 WTP Servers 中的服务器将打开您描述的类型的编辑器窗口。在 MyEclipse Servers 视图中，您可以通过右键单击服务器并选择“Configure Server Connector”来调出配置对话框。

在基本 MyEclipse 中，对于 WebSphere，您没有从服务器连接器设置端口和安全性的选项。但是，如果您切换到 MyEclipse 的 Blue 版本（不过要花更多的钱），您确实可以获得更广泛的 WebSphere 配置功能。我不确定您在基本 MyEclipse 中有哪些选项；如果您可以找到提供所需内容的 VM 参数（设置系统属性），则可以在配置屏幕的 JDK 页面上进行设置，或者，如果可以设置程序参数，则可以通过启动配置添加这些参数，您可以从服务器连接器配置页面创建它（并且可以通过转到运行配置来修改它们（也可以通过右键单击服务器视图中的服务器来访问）。

希望这可以帮助。为了获得更好的支持，MyEclipse 论坛（在他们的网站上）是您的最佳选择。

# android - 无法使用 USB 主机连接 arduino mega ADK 板

> ID：10026651
> 
> 赞同：0
> 
> 时间：2012-04-05T10:11:44.947
> 
> 标签：android, usb, arduino, adk

我尝试使用 Demokit 源将 Arduino Mega ADK 连接到几部手机，但徒劳无功。

我用 arduino 0022 编译并上传了 Arduino 草图“Demokit.pde”。它看起来没问题，因为板子在其 USB 客户端端口上发送“开始”。

我使用 Google API 10（用于运行 Gingerbread 的手机）和 Android API 15（用于 ICS 的）在 Eclipse 下编译了 Demokit 应用程序。一切都很好。

在电话方面，我尝试了这些设置：

*   三星 i9000 运行 CM 7.1 并在推送 android.hardware.usb.accessory.xml 和 com.android.future.usb.accessory.jar 之后

*   运行 ICS 的三星 i9000

*   Nexus S 运行 ICS

什么也没发生。eclipse logcat 中只有一个警告：

W/PowerUI(654): 未知意图: Intent { act=android.intent.action.ACTION_POWER_CONNECTED flg=0x10000010 }

没有其他的。我想知道板子的usb主机是否有问题...

如果有人有想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:08:28.343

有几个地方出了问题。

首先检查电路板，尝试运行一个简单的闪烁程序，以确保电路板本身工作正常。

接下来，当您连接到电路板时，您的手机是否开始充电？这将显示电话板连接是否存在任何问题。

在这 3 部手机中，我建议您尝试使用带有库存 ROM 的 nexus S，因为 CM（即使在推送 jars 之后）在启用 ADK 时也存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:17:11.373

问题来自 Demokit.pde 草图中的设置过程。我使用面包板来运行它，但我没有连接所有组件，并且 i2c 操纵杆初始化需要连接组件，否则程序将进入无限循环。因此，如果您尝试在没有演示套件板的情况下运行 Demokit.pde，请务必连接正确的操纵杆，或注释其 init 过程调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T02:40:20.573

demokit 示例对于初始测试实际上相当复杂。我建议在运行 blink 程序后确保您的 Arduino Mega ADK 正在尝试更简单的第一次测试。

有几个比 demokit 简单得多的好例子。

[http://allaboutee.com/2011/12/31/arduino-adk-board-blink-an-led-with-your-phone-code-and-explanation/](http://allaboutee.com/2011/12/31/arduino-adk-board-blink-an-led-with-your-phone-code-and-explanation/)

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and_29.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and_29.html)

这些都不是针对 Arduino Mega ADK，因此需要进行一些更改，但它们应该是一个很好的起点。

# php - 提取通过 jQuery post Ajax 传递的数据

> ID：10026653
> 
> 赞同：0
> 
> 时间：2012-04-05T10:11:56.663
> 
> 标签：php, jquery, ajax

我正在尝试使用 jquery $post 函数制作简单的脚本，将数据传递给我的 check.php 文件，然后返回一些结果，这样我就可以弄清楚 b/w jQuery 和 PHP 操作数据的方式。我有这个脚本：

```
<script type="text/javascript">
$(document).ready(function(){
    var Status = true;
    $('.isLogged').click(function(){
        if(Status!=false){
            var Check = prompt('Enter Password', '');
                $.post('check.php', Check, function(data) { 
        if(data == 'Y'){
            alert('Y');
            return false;
        }
        else
        {
            alert('N');
            return false;
        }
        });

      }

  });

}); 
</script> 
```

这全部来自我的 check.php 文件：

```
<?php
$data = $_POST['Check'];
if ($data == 'Ivan')
{
echo 'Y';
}
else
{
echo 'N';
}
?> 
```

但它不起作用，当我制作 var_dump($_POST) 时，我得到了 array(0)。我怎样才能解决这个问题？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:16:13.063

$.post 函数中的“数据”必须是一个对象

```
$.post('check.php', {Check: Check}, function(data) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:18:57.877

你应该在你的过程中添加json。

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:16:41.560

您的语法对于 ajax 请求不正确。`Check`是值，您必须为其设置键。应该是这样的

```
 var Check = prompt('Enter Password', '');
   $.post('check.php', Check:Check, function(data) { 
```

# android - 我想将 XML 数据导入 sqlite 数据库并将其保存在 table 中。保存后我想在我的应用程序中使用它

> ID：10026656
> 
> 赞同：2
> 
> 时间：2012-04-05T10:12:05.027
> 
> 标签：android

xml文件保存到我的D盘。我想从此 xml 导入所有数据并保存在 sqlite 中，而不将其放入项目的资源文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:33:28.110

首先你需要解析你的xml

根据您的要求读取数据

一次将其插入数据库。

然后您可以用户进一步使用。

# javascript - 如何使用 iframe 编写可调整大小的页面？

> ID：10026658
> 
> 赞同：2
> 
> 时间：2012-04-05T10:12:13.933
> 
> 标签：javascript, jquery, html, iframe, resize

我在与网页相同的域中有一个 iframe。

我有一个我想保持相同高度的标题（我不知道它是什么，比如说 80px），而正文包含 iframe，当浏览器调整大小时它会调整大小：

```
----------        --------------
| header |        |   header   |
----------        --------------
| iframe |   ->   |            |
|        |        |            |
|        |        |    ....    |
----------        |            |
                  |            |
                  -------------- 
```

我正在使用 jQuery 并在 div 上尝试过`height()`，`css()`但`iframe`这些不会改变`iframe`'s 的尺寸。`iframe`保持相同的小默认尺寸。

如果我在 CSS 中手动指定百分比`iframe`，则调整大小会起作用，但因为这些是百分比，所以`iframe`会超出直接页面的边界，并在足够高的百分比值将其边框推离屏幕后被截断。

我需要一些方法来帮助`iframe`计算自己的像素边界，以便它保持在页面的边界内。我可以获取窗口的宽度和高度，但如前所述，应用这些值`css()`并`height()`没有更新`iframe`的大小。

*再说一遍：我正在与`iframe`父页面在同一个域中使用。*

我将如何正确编码标题和 iframe 的大小调整*，*以便`resize()`操作（或调整浏览器窗口大小）真正起作用？

我尝试过的代码如下所示：

```
<html>
<head>
... // load jquery, etc.
<script>
function resize() { 
    var w = $('#body').width(); 
    var h = $('#body').height();

    $('#header').width(w + "px"); // works
    $('#header').height("80px"); // works

    $('#my_iframe').css("width", w + "px"); // doesn't work
    $('#my_iframe').width(w + "px"); // doesn't work, either

    $('#my_iframe').css("height", (h-80) + "px"); // doesn't work
    $('#my_iframe').height((h-80) + "px"); // doesn't work, either
}
</script>
</head>

<body onresize="resize()" id="body">
<div id="header"><div>
<iframe id="my_iframe" .../>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:28:09.777

在 上绑定`resize`事件`window`，并设置 的高度`iframe`：

```
$('#content').css('height', ($(window).height() - 80) + 'px'); 
```

演示：http: [//jsfiddle.net/Guffa/t4b4j/](http://jsfiddle.net/Guffa/t4b4j/)

# objective-c - 整个应用程序中的自定义后退按钮 UINavigationController

> ID：10026663
> 
> 赞同：1
> 
> 时间：2012-04-05T10:12:45.120
> 
> 标签：objective-c, ios, uinavigationcontroller, custom-controls

我希望在整个应用程序中替换 UINavigationController 中的后退按钮。我的要求是这个后退按钮被定义在一个 XIB 中，如果可能的话，设置它的代码在一个地方。

我已经看到了将属性设置为 UIBarButtomItem 的[各种方法](https://stackoverflow.com/questions/9300503/make-a-custom-back-button-for-uinavigationcontroller)`self.navigationItem.backBarButtonItem`，并在其视图中使用自定义按钮，例如`[[UIBarButtonItem alloc] initWithCustomView:myButton];`

我的第一个想法是创建一个全局类别（不确定这是否是术语，我是 Objective-C 的新手，您可能已经猜到了）为我的所有 UINavigationController 实现“ViewDidLoad”，并设置此属性。我的问题是将 XIB 加载到我在运行时创建的这个按钮。

有没有人建议以一种简洁的方式做到这一点（我想这一定是一件很常见的事情，我无法想象在我的所有屏幕上重复代码）。我考虑过创建一个`UINavigationController`子类，但是我不确定这会如何影响我的 ViewDidLoad 自定义实现。

非常感谢任何建议。我还需要定位 >= iOS4（外观 API 仅适用于 iOS5）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:58:51.323

我宁愿在可能的情况下不强制继承，所以你可以用两个类别来做到这一点

```
@interface UIViewController (backButtonAdditions)

- (void)ps_addBackbutton;

@end

@implementation UIViewController (backButtonAdditions)

- (void)ps_addBackbutton;
{
    // add back button
}

@end 
```

* * *

```
@interface UINavigationController (backButtonAdditions)

- (void)ps_pushViewController:(UIViewController *)viewController animated:(BOOL)animated;

@end

@implementation UINavigationController (backButtonAdditions)

- (void)ps_pushViewController:(UIViewController *)viewController animated:(BOOL)animated;
{
    [viewController ps_addBackbutton];
    [self pushViewController:viewController animated:animated];
}

@end 
```

现在`#import`这些文件是适当的，而不是使用

```
[self.navigationController pushViewController:aViewController YES]; 
```

采用

```
[self.navigationController ps_pushViewController:aViewController YES]; 
```

## 免责声明

我在浏览器中自由设置了这个样式，所以你可能需要调整它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:38:54.093

我在当前项目中遇到了同样的问题，我想出的解决方案是在没有 xib 的情况下创建一个 MYBaseViewController 基类，并以编程方式在 viewDidLoad 中创建*（如果你想用自定义视图初始化 barButtonItem，你无论如何都无法在 xib 中创建）*创建一个customBackButton（当然释放它并设置为nil viewDidUnload。

这对我很有用，因为这样我可以为我的所有其他 viewController 创建 xib，这些 viewController 是 MYBaseViewController 的子类（如果你在 nib 中为基类创建了一个视图，你将无法为子类创建一个 nib）。

# android - android：对话框上的奇怪行为

> ID：10026664
> 
> 赞同：1
> 
> 时间：2012-04-05T10:12:45.203
> 
> 标签：android

我在对话框上有奇怪的问题。

我增加 X 的值并将其发送到对话框

在对话框上 - 我一直看到相同的值。

```
public String TMP;
int X=1;

.
.
.

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) {
        case MENU_ABOUT:
            X++;
            TMP = String.valueOf(X);
            showDialog(ABOUT);
            break;
        }
        return super.onOptionsItemSelected(item);
  }

.
.
.

 protected Dialog onCreateDialog(int id, Bundle args)
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        if (id==0) 
        {
             builder.setTitle(TMP);
             builder.setIcon(R.drawable.ic_launcher);
             builder.setCancelable(false);
             builder.setPositiveButton("Back", new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int id) {
                      }
                  });
              AlertDialog alert = builder.create();
              return(alert);
        }
        AlertDialog alert = builder.create();
        return(alert);
    } 
```

**我一直看到 2 all wase**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:16:52.050

onCreateDialog（通常）仅在首次创建对话框时调用一次。如果要修改对话框，则需要实现 onPrepareDialog。

# iphone - 为什么我无法从 Facebook iOS SDK 正确取回我的姓氏？

> ID：10026670
> 
> 赞同：0
> 
> 时间：2012-04-05T10:13:15.377
> 
> 标签：iphone, ios, facebook, sdk

好吧，我来自西班牙，我的姓是 González（带 á）。我试图从 Facebook SDK 中获取它，但我得到的是 Gonz√°lez 而不是 González。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:41:38.607

嘿，您可以尝试以下代码：

```
- (NSString *) decodedString:(NSString *) originalString {
    NSString *newString = [NSString stringWithUTF8String:[originalString cStringUsingEncoding:[NSString defaultCStringEncoding]]];
    return newString;
} 
```

我希望这能解决你的问题。我还将在以下位置添加此代码：[iPhone 如何在标签上写符号？](https://stackoverflow.com/questions/9886903/iphone-how-to-write-symbol-on-a-label/9887028#9887028)在我的回答中。

# package - PHPDoc / PHPStorm 中是否有@visibility 包概念？

> ID：10026674
> 
> 赞同：1
> 
> 时间：2012-04-05T10:13:24.090
> 
> 标签：package, visibility, php-5.3, phpdoc, phpstorm

我有一个用 PHP 编写的域模型，并且我的一些类（聚合内的实体）具有公共方法，它们永远不应该从聚合外部调用。

PHP没有*包*可见性概念，所以我想知道是否有某种标准化的方式来定义`@package`和`@visibility package`在文档块中，并有一个静态分析工具来报告可见性范围的违规行为。

我目前正在试用[PHPStorm](http://www.jetbrains.com/phpstorm/)，到目前为止我发现它非常好，所以我想知道这个软件是否支持这个功能；如果没有，您知道任何静态代码分析工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:10:53.623

我在 PHP 的功能中看到的与这种思路最接近的平行是使用“受保护”范围而不是公共的这些方法。当然，这需要使用继承来授予对受保护项目的访问权限。在我多年管理 phpDocumentor 的过程中，我从未遇到过任何试图模仿我在 Java 时代记得的那种“包范围”的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T17:44:23.030

如果聚合根中的实体在不通过聚合根的情况下不可修改，那么您必须控制的唯一方法是使实体成为私有或受保护的成员，以便对实体的所有修改都必须通过聚合。

```
class RootEntity {
    private $_otherEntity;
    public function DoSomething() {
        $this->_otherEntity->DoSomething();
    }
    public function setOtherEntity( OtherEntity $entity ) {
        $this->_otherEntity = $entity;
    }
} 
```

有人仍然可以这样做：

```
$otherEntity = new OtherEntity();
$otherEntity->DoSomethingElse();
$rootEntity->setOtherEntity($otherEntity); 
```

不过，我想您可以使用神奇的 __call() 方法来禁止在除构造期间之外的任何地方设置 _otherEntity。这属于总黑客类别:)

```
class RootEntity {
    private $_otherEntity;
    private $_isLoaded = false;

    public function __call( $method, $args ) {
        $factoryMethod = 'FactoryOnly_'.$method;
        if( !$this->_isLoaded && method_exists($this,$factoryMethod) {
            call_user_func_array(array($this,$factoryMethod),$args
        }
    }
    public function IsLoaded() {
        $this->_isLoaded = true;
    }
    protected function FactoryOnly_setOtherEntity( OtherEntity $otherEntity ) {
        $this->_otherEntity = $otherEntity;
    }
} 
```

因此，从那里，当您构建对象时，您可以从您的工厂或存储库中调用 $agg->setOtherEntity($otherEntity)。然后，当您完成构建对象时，调用 IsLoaded()。从那里，没有其他人能够将新的 OtherEntity 引入类中，并且必须在您的聚合上使用公开可用的方法。

我不确定您是否可以称其为“好”答案，但这是我能想到的唯一真正限制对聚合中实体的访问的事情。

[编辑]：另外，忘了提...最接近的文档是phpdoc有一个@internal： [http ://www.phpdoc.org/docs/latest/for-users/tags/internal.html](http://www.phpdoc.org/docs/latest/for-users/tags/internal.html)

但是，我怀疑它会修改 IDE 的代码完成。不过，您可能会创建一个公共函数/属性，但使用 phpdoc 将其标记为“@access private”，以防止它进入代码完成状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:26:46.620

到目前为止，PHPStorm 似乎还没有提供这个功能。

# c# - 必应地图，显示一个点+放大用户的位置，windows phone

> ID：10026677
> 
> 赞同：1
> 
> 时间：2012-04-05T10:13:26.550
> 
> 标签：c#, windows-phone-7, bing-maps

我的应用程序中有一张地图，但是当它加载时，缩放级别离我的位置很远。

那么如何使地图放大到设备的 excat 位置并显示点，就像使用内置的 bing 地图一样。

```
public location()
{
    InitializeComponent();
    map1.ZoomBarVisibility = Visibility.Visible;          
}

private GeoCoordinateWatcher loc = null;

private void map1_Loaded(object sender, RoutedEventArgs e)
{
    loc = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
    //EventHandler for location service status changes
    loc.StatusChanged += loc_StatusChanged;
    //If the location service is disabled or not supported
    if (loc.Status == GeoPositionStatus.Disabled)
    {
        //Display a message
        MessageBox.Show("Location services must be enabled");
        return;
    }
    loc.Start();
}

private void button1_Click(object sender, RoutedEventArgs e)
{
    loc = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
    //EventHandler for location service status changes
    loc.StatusChanged += loc_StatusChanged;
    //If the location service is disabled or not supported
    if (loc.Status == GeoPositionStatus.Disabled)
    {
        //Display a message
        MessageBox.Show("Location services must be enabled");
        return;
    }

    loc.Start();
}

void loc_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
{
    if (e.Status == GeoPositionStatus.Ready)
    {
        map1.SetView(loc.Position.Location, 10.0);
        loc.Stop();
    }
} 
```

# silverlight - Silverlight 网站有时在导航时显示空白窗口

> ID：10026687
> 
> 赞同：0
> 
> 时间：2012-04-05T10:14:24.680
> 
> 标签：silverlight, silverlight-4.0

我有一个带有多个页面的 Silverlight 应用程序，这些页面在框架控件中被导航到。但是有这一页，在导航到时，突然使窗口变为空白，这让我别无选择，只能刷新应用程序。这种情况很少发生，但我想知道它的原因以及是否可以阻止它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T20:37:10.000

（对不起，我的英语不好）

可能发生了一些异常。在您`App.xaml.cs`的 上，在该方法上放置一个断点，`Application_UnhandledException`并查看当您导航到该页面时它是否被调用。如果是，则`e.ExceptionObject`包含导致此问题的异常。

# windows - 查明 UNC 路径是否指向本地计算机

> ID：10026689
> 
> 赞同：1
> 
> 时间：2012-04-05T10:14:38.540
> 
> 标签：windows, winapi

有什么简单的方法可以判断 UNC 路径是否指向本地机器。我发现了以下[问题](https://stackoverflow.com/questions/354477/method-to-determine-if-path-string-is-local-or-remote-machine)

是否有任何 WIN32 API 可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:57:18.803

```
#include <windows.h>
#include <WinSock.h>
#include <string>
#include <algorithm>

#pragma comment(lib, "wsock32.lib")

using namespace std;

std::wstring ExtractHostName( const std::wstring &share )
{
if (share.size() < 3 )
    return L"";
size_t pos = share.find(  L"\\", 2 );
wstring server = ( pos != string::npos ) ? share.substr( 2, pos - 2 ) : share.substr( 2 );
transform( server.begin(),server.end(), server.begin(), tolower); 
return server;
}

bool IsIP( const std::wstring &server )
{
size_t invalid = server.find_first_not_of(  L"0123456789." );
bool fIsIP = ( invalid == string::npos );
return fIsIP;
}

bool IsLocalIP( const std::wstring &ipToCheck )
{

if ( ipToCheck == L"127.0.0.1" )
    return true;    

WORD wVersionRequested;
WSADATA wsaData;
wVersionRequested = MAKEWORD( 1, 1 );
if ( WSAStartup( wVersionRequested, &wsaData ) != 0 )
    return false;

bool fIsLocal = false;

char hostName[255];
if( gethostname ( hostName, sizeof(hostName)) == 0 )
{
    PHOSTENT hostinfo;      
    if(( hostinfo = gethostbyname(hostName)) != NULL )
    {
        for (int i = 0; hostinfo->h_addr_list[i]; i++)
        {
            char *ip = inet_ntoa(*( struct in_addr *)hostinfo->h_addr_list[i]);
            wchar_t wcIP[100]={0};
            ::MultiByteToWideChar(CP_ACP, 0, ip, -1, wcIP, _countof(wcIP));
            if (ipToCheck == wcIP) 
            {
                fIsLocal = true;
                break;
            }
        }
    }
}
WSACleanup();
return fIsLocal;
}

bool IsLocalHost( const std::wstring &server )
{
if (server == L"localhost")
    return true;    

bool fIsLocalHost = false;

wchar_t buffer[MAX_PATH]={0};
DWORD dwSize =  _countof(buffer);
BOOL fRet = GetComputerName( buffer, &dwSize );
transform( buffer, buffer + dwSize, buffer, tolower); 
fIsLocalHost = ( server == buffer );
return fIsLocalHost;
}

bool ShareIsLocal( const std::wstring &share )
{
wstring server = ExtractHostName( share );
bool fIsIp = IsIP( server );
if ( fIsIp )
    return IsLocalIP( server );
else
    return IsLocalHost( server );
} 
```

# c# - 多次构建项目

> ID：10026692
> 
> 赞同：1
> 
> 时间：2012-04-05T10:14:42.113
> 
> 标签：c#, wcf, visual-studio, msbuild

我有一个项目（一个 WP7 应用程序），我们称之为“餐厅”。

现在，我不想拥有一个包含餐厅列表的应用程序，而是希望每个餐厅都有一个应用程序。

这些应用程序中的每一个都将与 WCF 服务同步。该应用程序可以要求新数据，下载菜单等......

但要求是，应用程序在目标设备上首次运行时不能为空（必须有一些数据，如位置等）

这是我想象它的工作方式 - 使用 MSBuild，它会从服务中下载所有餐厅的列表，然后为每个餐厅（在一个循环中）下载有趣的数据，将其输入应用程序（比如XML 文件的形式）。除了每个应用程序的 XML 文件外，构建目标也需要不同（餐厅名称）。

这可以在 MSBuild 中完成吗？我以前从未使用过它，所以我会很高兴任何指针

# oracle11g - Oracle 11g 与 9.2.0.2 的向后兼容性

> ID：10026693
> 
> 赞同：0
> 
> 时间：2012-04-05T10:14:42.790
> 
> 标签：oracle11g, oracle9i

目前`oracle 9.2i`数据库已迁移到`oracle 11.2g`，我们在迁移过程中没有遇到任何问题，但是是否可以通过修改参数使其`oracle 11.2.`行为向后兼容。`oracle 9.2``system`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:12:29.637

您可以将`COMPATIBLE`参数设置为`9.2.0.`. 这不会使 Oracle 11g 的行为与 9i 完全一样，但它会尽可能接近。

# c# - 如何在 response.redirect 之前执行启动脚本？

> ID：10026694
> 
> 赞同：1
> 
> 时间：2012-04-05T10:14:43.660
> 
> 标签：c#, javascript, asp.net

我有一个页面，我正在阅读查询字符串。如果查询字符串中存在某个值，我正在注册一个启动脚本。脚本执行后，我想从查询字符串中删除元素并使用新的 url 重新加载页面。

这是在页面预渲染事件中运行的代码。

```
for (int i = 0; i < this.Page.Request.QueryString.Count; i++)
            {
                if (this.Page.Request.QueryString[i].Equals("filesize"))
                {
                    ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "Alert", "alert('Maximum file size exceeded.');", true);

                    var nameValueCollection = HttpUtility.ParseQueryString(HttpContext.Current.Request.QueryString.ToString());
                    nameValueCollection.Remove("exception");
                    string url = HttpContext.Current.Request.Path + "?" + nameValueCollection;
                    Response.Redirect(url);
                }
            } 
```

但是重定向是在显示警报之前发生的。如何显示警报，然后在关闭警报后我可以重定向页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:52:33.333

由于`Response.Redirect(url)`返回的是 HTTP 302，浏览器可能会忽略任何正文内容，因此您的启动脚本根本不会执行。一些选项：

1.  您可以删除重定向并插入内容，以允许用户对您显示的任何错误消息做出反应。
2.  您可以将错误存储在会话变量中，然后重定向到错误页面以将其显示给用户。

# c# - 从 Internet 浏览器下载可见 aspx 页面的资源 resx 文件

> ID：10026698
> 
> 赞同：0
> 
> 时间：2012-04-05T10:14:53.697
> 
> 标签：c#, asp.net, .net, iis, resources

我有一个简单的问题

是否可以从我的 Internet 浏览器中的可见 aspx 页面下载特​​定资源文件？

就像我们下载 .js (javascript) 文件一样。

我想下载以西班牙语显示的可见 aspx 页面的西班牙语 (es-MX) resx 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:08:21.270

Web 服务器不提供 Resx 文件（这是一件好事，因为一些开发人员将不应该公开的东西存储在其中。）

[这个问题](https://stackoverflow.com/questions/9267297/how-to-serve-resx-file-in-asp-net)的答案描述了如何创建一个处理程序来输出 resx 文件的内容，其中变量 'name' 是你的 resx 文件的文件名。

```
Response.TransmitFile(Server.MapPath("~/App_LocalResources/" + name)) 
```

编辑：一些额外的细节

创建处理程序（我们称之为 GetResources.ashx）后，您将使用查询字符串参数将文件名传递给处理程序。例如，

```
GetResources.ashx?name=Default.es-MX.resx 
```

在处理程序中：

```
string name = Request.QueryString["name"].ToString(); // but check for null etc. 
```

将此处理程序放在您的生产站点上的公共目录中并不是一个好主意，因此要么使用密码保护它，要么将其从您的发布版本中完全删除。

# android - ActionBarSherlock (ABS)：如何自定义动作模式关闭项的文本？

> ID：10026700
> 
> 赞同：12
> 
> 时间：2012-04-05T10:15:05.723
> 
> 标签：android, actionbarsherlock, android-actionbar

我正在使用 ABS 版本。4，我需要简单地更改除了动作模式关闭图标之外显示的默认“完成”文本，但我真的不知道该怎么做。

我认为文本需要自定义至少有两个充分的理由：

*   “完成”并不适用于所有上下文（例如“取消”可能更合适，我见过一些应用程序，例如 Galaxy Tab 上的“我的文件”应用程序，使用它）

*   “完成”需要根据用户的语言进行本地化

是否可以自定义该文本？如果是这样，谁能告诉我该怎么做？

提前致谢。

**编辑**

我找到了一个临时解决方法，我将其发布在以下内容中：

```
private TextView getActionModeCloseTextView() {
    // ABS 4.0 defines action mode close button text only for "large" layouts
    if ((getResources().getConfiguration().screenLayout & 
        Configuration.SCREENLAYOUT_SIZE_MASK) == 
        Configuration.SCREENLAYOUT_SIZE_LARGE) 
    {
        // retrieves the LinearLayout containing the action mode close button text
        LinearLayout action_mode_close_button =
            (LinearLayout) getActivity().findViewById(R.id.abs__action_mode_close_button);
        // if found, returns its last child 
        // (in ABS 4.0 there is no other way to refer to it, 
        // since it doesn't have an id nor a tag)
        if (action_mode_close_button != null) return (TextView)
            action_mode_close_button.getChildAt(action_mode_close_button.getChildCount() - 1);
    }
    return null;
} 
```

这就是我想出的方法。请**注意**，它在很大程度上依赖于`abs__action_mode_close_item.xml`ABS 4.0 的结构。

这适用于我的场景，但是，正如您所看到的，将其提升为真正的“答案”还不够令人满意，这就是为什么我只编辑了我以前的帖子。

希望对其他人有所帮助，但我也希望有人可以分享更好，更清洁的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T15:12:03.083

您可以使用主题来覆盖默认图标：

```
 <item name="actionModeCloseDrawable">@drawable/navigation_back</item>
    <item name="android:actionModeCloseDrawable">@drawable/navigation_back</item> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T11:59:44.347

I edited the code from PacificSky to be able to customize the color and font size of the close button, both in pre ICS and >ICS.

I created a method named `customizeActionModeCloseButton`

```
private void customizeActionModeCloseButton() {
      int buttonId = Resources.getSystem().getIdentifier("action_mode_close_button", "id", "android");    
      View v = getGSActivity().findViewById(buttonId);
      if (v == null) {
         buttonId = R.id.abs__action_mode_close_button;
         v = getGSActivity().findViewById(buttonId);
      }
      if (v == null)
         return;
      LinearLayout ll = (LinearLayout) v;
      if (ll.getChildCount() > 1 && ll.getChildAt(1) != null) {
         TextView tv = (TextView) ll.getChildAt(1);
         tv.setText(R.string.close_action_mode);
         tv.setTextColor(getResources().getColor(R.color.white));
         tv.setTextSize(18);
      }
   } 
```

and I call it just after calling `startActionMode()`

```
public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
   actionMode = getActivity().startActionMode(this);
   customizeActionModeCloseButton();
   return true;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-23T23:50:00.747

已经有一段时间了，但这里有一个稍微不那么老套的解决方案——把它放在那里供后代使用。

**对于 Android 版本 < ICS**

将以下行放入应用程序的 strings.xml 中：

```
<string name="abs__action_mode_done">Cancel</string> 
```

这会覆盖 TextView（在 ActionBarSherlock/res/layout-large/abs__action_mode_close_item.xml 中定义）的 android:text 属性。

**Android ICS 及以上版本**

本机 ActionBar 功能用于 ICS 及更高版本。您需要使用以下代码查找并覆盖与完成按钮关联的字符串：

```
int buttonId = Resources.getSystem().getIdentifier("action_mode_close_button", "id", "android");
if (buttonId != 0)
{
    View v = findViewById(buttonId);
    if (v != null)
    {
        LinearLayout ll = (LinearLayout)v;
        View child = ll.getChildAt(1);
        if (child != null)
        {
            TextView tv = (TextView)child;
            tv.setText(R.string.cancel);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-01T11:51:18.563

感谢太平洋天空的回答。这对我的情况很有用。

这里需要说明的是，在某些情况下`findViewById(buttonId)`可能会返回`null`，例如在 o`nCreateActionMode()`函数中调用，因为`LinearLayout`我猜当时 for ActionMode 关闭按钮尚未初始化。

我想隐藏动作模式关闭按钮，所以我只是`sendEmptyMessageDelayed`在`onCreateActionMode()` 200 毫秒后打电话给 PacificSky。这个对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T08:44:40.237

这是我使用 Java 代码的方法：

```
private void customizeActionModeCloseButton(String title, int iconID) {
          int buttonId = Resources.getSystem().getIdentifier("action_mode_close_button", "id", "android");    
          View v = findViewById(buttonId);
          if (v == null) {
             buttonId = R.id.abs__action_mode_close_button;
             v = findViewById(buttonId);
          }
          if (v == null)
             return;
          LinearLayout ll = (LinearLayout) v;
          if (ll.getChildCount() > 1 && ll.getChildAt(1) != null) {
             //custom icon
             ImageView img = (ImageView) ll.getChildAt(0);
             img.setImageResource(iconID);
             //custom text
             TextView tv = (TextView) ll.getChildAt(1);
             tv.setText(title);
             tv.setTextColor(Color.WHITE);
          }
       } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T10:41:24.700

com.actionbarsherlock.view.ActionMode 包含方法：

```
setTitle 
```

它用于更改操作栏中关闭图标附近的文本。ActionMode 在您的 com.actionbarsherlock.view.ActionMode.Callback 接口实现方法中可用，例如 onCreateActionMode。

您可以做的 - 保存传入的 ActionMode 引用并稍后使用它来更改您喜欢的标题。或者，如果它不是动态的 - 您可以在 onCreateActionMode 中使用常量进行设置。

# javascript - 如何使用jquery为表中的序列号列提供连续编号

> ID：10026703
> 
> 赞同：3
> 
> 时间：2012-04-05T10:15:09.547
> 
> 标签：javascript, jquery, html

我有一张桌子。查看我的表结构

```
<table width="100%" border="1">
  <tr>
    <td width="2%"><h2># SL NO</h2></td>
    <td width="70%"><h2>Name</h2></td>
    <td width="15%"><h2>Edit</h2></td>
    <td width="13%"><h2>Delete</h2></td>
  </tr>

  <tr id="id0">
    <td >1</td>
    <td>XXXXXXX</td>
        <td><a href="#"><img src="../images/icon_edit.gif" alt="Edit" /></a></td>
    <td width="13%"><a href="#"><img src="../images/delete_07.png" alt="Delete"  onclick="fnDeleteState(0)" /></a></td>
  </tr>
  <tr id="id1">
    <td>2</td>
     <td>XXXXXXX</td>
    <td><a href="#"><img src="../images/icon_edit.gif" alt="Edit" /></a></td>
    <td%"><a href="#"><img src="../images/delete_07.png" alt="Delete"  onclick="fnDeleteState(1)" /></a></td>
  </tr> 
```

………………

当按下删除按钮时，我需要隐藏该行我用它来从表中删除特定行

`$("#id" + i).remove();`

它工作正常。但是序列号...我显示错误。即当我删除第二行时，第三行中的序列号仍然`3`需要显示这个 s 2 等等......

我有任何方法可以在 jquery 中做到这一点提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:35:10.537

```
function fnDeleteState(i) {
    $("#id" + i).remove();
    $("tr").each(function (index) { // traverse through all the rows
        if(index != 0) { // if the row is not the heading one
            $(this).find("td:first").html(index + ""); // set the index number in the first 'td' of the row
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:30:05.750

如果我理解正确，您需要更新每行的第一个单元格，以便它们显示该行的排名。

您可以通过为每个内容行添加一个类来实现它，例如“contentrow”（将它们与标题行区分开来），然后编写如下函数：

```
function refreshRowIDs(){
    $(".contentrow").each(function(index){
        $(this).children("td:first").html(index);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:30:21.263

您需要重新订购序列号。删除后。你可以使用这样的东西：

```
 function reorder(){
   var i = 1;
   $('#tableid tr').each(function() {
        $(this).find("td:first").text(i);
        i++;
    });
  } 
```

# python - Python robotsparser 模块不会加载“robots.txt”

> ID：10026708
> 
> 赞同：3
> 
> 时间：2012-04-05T10:15:33.277
> 
> 标签：python, python-2.7, robots.txt, python-module

我正在编写一个非常简单的网络爬虫并尝试解析`'robots.txt'`文件。我`robotparser`在标准库中找到了该模块，它应该可以做到这一点。我正在使用 Python 2.7.2。不幸的是，我的代码无法`'robots.txt'`正确加载文件，我不知道为什么。

这是我的代码的相关片段：

```
from urlparse import urlparse, urljoin
import robotparser

def get_all_links(page, url):
    links = []
    page_url = urlparse(url)
    base = page_url[0] + '://' + page_url[1]
    robots_url = urljoin(base, '/robots.txt')
    rp = robotparser.RobotFileParser()
    rp.set_url(robots_url)
    rp.read()
    for link in page.find_all('a'):
        link_url = link.get('href')
        print "Found a link: ", link_url
        if not rp.can_fetch('*', link_url):
            print "Page off limits!" 
            pass 
```

这`page`是一个解析的[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)对象，`url`是一个存储为字符串的 URL。解析器读入一个空白`'robots.txt'`文件，而不是指定 URL 处的文件，然后返回`True`所有`can_fetch()`查询。看起来它要么没有打开 URL，要么无法读取文本文件。

我也在交互式解释器中尝试过。[这就是发生的情况，使用与文档](http://docs.python.org/library/robotparser.html)页面相同的语法。

```
Python 2.7.2 (default, Aug 18 2011, 18:04:39) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import robotparser
>>> url = 'http://www.udacity-forums.com/robots.txt'
>>> rp = robotparser.RobotFileParser()
>>> rp.set_url(url)
>>> rp.read()
>>> print rp

>>> 
```

该行`print rp`应该打印`'robots.txt'`文件的内容，但它返回空白。更令人沮丧的是，[这些](http://www.doughellmann.com/PyMOTW/robotparser/) [示例](http://effbot.org/librarybook/robotparser.htm)都可以正常工作，但是当我尝试自己的 URL 时却失败了。我对 Python 很陌生，我不知道出了什么问题。据我所知，我使用该模块的方式与文档和示例相同。谢谢你的帮助！

**更新 1：**这里还有几行来自解释器，以防`print rp`不是检查是否`'robots.txt'`读入的好方法。`path`、`host`和`url`属性是正确的，但来自的条目`'robots.txt'`仍未被读入。

```
>>> rp
<robotparser.RobotFileParser instance at 0x1004debd8>
>>> dir(rp)
['__doc__', '__init__', '__module__', '__str__', '_add_entry', 'allow_all', 'can_fetch', 'default_entry', 'disallow_all', 'entries', 'errcode', 'host', 'last_checked', 'modified', 'mtime', 'parse', 'path', 'read', 'set_url', 'url']
>>> rp.path
'/robots.txt'
>>> rp.host
'www.udacity-forums.com'
>>> rp.entries
[]
>>> rp.url
'http://www.udacity-forums.com/robots.txt'
>>> 
```

**更新2：**我已经通过使用[这个外部库](http://nikitathespider.com/python/rerp/)来解析`'robots.txt'`文件解决了这个问题。（但我还没有回答最初的问题！）在终端上花费了更多时间后，我最好的猜测是它`robotparser`无法处理`'robots.txt'`规范中的某些添加，例如`Sitemap`，并且有空行问题。它将读取来自 Stack Overflow 和 Python.org 等文件，但不会读取 Google、YouTube 或我的原始 Udacity 文件，其中包括`Sitemap`语句和空行。如果比我聪明的人能证实或解释这一点，我仍然会很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:15:46.790

我通过使用这个外部库来解析“robots.txt”文件解决了这个问题。（但我还没有回答最初的问题！）在终端上花费了更多时间后，我最好的猜测是，robotparser 无法处理对“robots.txt”规范的某些添加，例如站点地图，并且在空白行方面存在问题。它将读取来自 Stack Overflow 和 Python.org 等文件，但不会读取 Google、YouTube 或我的原始 Udacity 文件，其中包括 Sitemap 语句和空行。如果比我聪明的人能证实或解释这一点，我仍然会很感激！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:27:59.653

解决方案可能是使用[reppy](https://github.com/seomoz/reppy)模块

```
pip install reppy 
```

这里有一些例子;

```
In [1]: import reppy

In [2]: x = reppy.fetch("http://google.com/robots.txt")

In [3]: x.atts
Out[3]: 
{'agents': {'*': <reppy.agent at 0x1fd9610>},
 'sitemaps': ['http://www.gstatic.com/culturalinstitute/sitemaps/www_google_com_culturalinstitute/sitemap-index.xml',
  'http://www.google.com/hostednews/sitemap_index.xml',
  'http://www.google.com/sitemaps_webmasters.xml',
  'http://www.google.com/ventures/sitemap_ventures.xml',
  'http://www.gstatic.com/dictionary/static/sitemaps/sitemap_index.xml',
  'http://www.gstatic.com/earth/gallery/sitemaps/sitemap.xml',
  'http://www.gstatic.com/s2/sitemaps/profiles-sitemap.xml',
  'http://www.gstatic.com/trends/websites/sitemaps/sitemapindex.xml']}

In [4]: x.allowed("/catalogs/about", "My_crawler") # Should return True, since it's allowed.
Out[4]: True

In [5]: x.allowed("/catalogs", "My_crawler") # Should return False, since it's not allowed.
Out[5]: False

In [7]: x.allowed("/catalogs/p?", "My_crawler") # Should return True, since it's allowed.
Out[7]: True

In [8]: x.refresh() # Refresh robots.txt, perhaps a magic change?

In [9]: x.ttl
Out[9]: 3721.3556718826294 
```

瞧！

# magento - magento中的那些行是什么意思？

> ID：10026711
> 
> 赞同：1
> 
> 时间：2012-04-05T10:15:49.110
> 
> 标签：magento

```
<?php foreach ($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html):?>
    <div class="box-collateral <?php echo "box-{$alias}"?>">
        <?php if ($title = $this->getChildData($alias, 'title')):?>
        <h2><span><?php echo $this->escapeHtml($title); ?></span></h2>
        <?php endif;?>
        <?php echo $html; ?>
    </div>
<?php endforeach;?>
    <?php echo $this->getChildHtml('product_additional_data') ?> 
```

magento中的那些行是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:25:52.500

1.  foreach 遍历每个子节点（使用方法 getchildhtml 按名称 detail_info 分组）并从这些块中输出数据
2.  获取 product_additional_data 块的 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:15:08.370

这是 catalog/product/view.phtml 中的代码片段，它在前端视图中显示描述、自定义选项和其他详细的产品信息。

# c# - 如何使用 c# 获取计划任务列表？

> ID：10026712
> 
> 赞同：0
> 
> 时间：2012-04-05T10:15:54.740
> 
> 标签：c#, scheduled-tasks

我需要获取本地计算机中存在的计划任务列表。

如何在 Windows XP 中使用 c# 来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:31:01.253

1个替代方案...：

1）您可以从保存任务的文件夹中读取（我刚刚测试过它-win7）

```
c:\Windows\System32\Tasks\ 
```

这是一个简单的 xml 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-16"?>
<Task version="1.2" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Date>2012-04-05T13:28:54.2106589</Date>
    <Author>DAVIDDOM\RoyiN</Author>
  </RegistrationInfo>
  <Triggers>
    <CalendarTrigger>
      <StartBoundary>2012-04-05T13:28:43.2046589</StartBoundary>
      <Enabled>true</Enabled>
      <ScheduleByDay>
        <DaysInterval>1</DaysInterval>
      </ScheduleByDay>
    </CalendarTrigger>
  </Triggers>
  <Principals>
    <Principal id="Author">
      <RunLevel>LeastPrivilege</RunLevel>
      <UserId>DAVIDDOM\RoyiN</UserId>
      <LogonType>InteractiveToken</LogonType>
    </Principal>
  </Principals>
  <Settings>
    <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy>
    <DisallowStartIfOnBatteries>true</DisallowStartIfOnBatteries>
    <StopIfGoingOnBatteries>true</StopIfGoingOnBatteries>
    <AllowHardTerminate>true</AllowHardTerminate>
    <StartWhenAvailable>false</StartWhenAvailable>
    <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable>
    <IdleSettings>
      <Duration>PT10M</Duration>
      <WaitTimeout>PT1H</WaitTimeout>
      <StopOnIdleEnd>true</StopOnIdleEnd>
      <RestartOnIdle>false</RestartOnIdle>
    </IdleSettings>
    <AllowStartOnDemand>true</AllowStartOnDemand>
    <Enabled>true</Enabled>
    <Hidden>false</Hidden>
    <RunOnlyIfIdle>false</RunOnlyIfIdle>
    <WakeToRun>false</WakeToRun>
    <ExecutionTimeLimit>P3D</ExecutionTimeLimit>
    <Priority>7</Priority>
  </Settings>
  <Actions Context="Author">
    <Exec>
      <Command>C:\Windows\system32\charmap.exe</Command>
    </Exec>
  </Actions>
</Task> 
```

# charts - HighCharts 显示标记值

> ID：10026713
> 
> 赞同：2
> 
> 时间：2012-04-05T10:15:57.893
> 
> 标签：charts, highcharts

有什么方法可以让 highcharts 始终显示标记值？

![在此处输入图像描述](../Images/d236e4448940c23334dbe84ea3cf95da.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T11:04:50.897

我让它工作了。发帖供他人参考

```
 plotOptions : {
            line : {
                dataLabels : {
                    enabled : true,
                    formatter : function() {
                        return this.y + '%';
                    }
                }
            },
            series : {
                name : 'Team Briefing',
                shadow : false,
                marker : {
                    lineWidth : 2,
                    radius : 6,
                    symbol : 'circle'
                }
            }
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:48:37.247

检查[点标记](http://www.highcharts.com/ref/#point-marker)参考指南。我记得关于 Highcharts 的是，它仍然没有提供任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:00:21.143

当您使用对象启动图表时（作为您的第一个参数）：' **...new Highcharts.Chart( { ... } )** '
您可以使用的对象属性之一是**plotOptions.series.marker**

这个**标记**本身就是一个对象：

```
 marker:{
           enabled:true,
           lineWith:0.0,
           radius:0.0,
           // more attributes...
        } 
```

这些是默认设置。含义：默认启用，但半径默认也为零，这就是你看不到点的原因。

长话短说：您需要设置半径（大于零）

阅读更多[http://api.highcharts.com/highcharts#plotOptions.series.marker.radius](http://api.highcharts.com/highcharts#plotOptions.series.marker.radius)

# mysql - iOS - 将从 mySQL 服务器接收到的日期转换为用户本地时间

> ID：10026714
> 
> 赞同：2
> 
> 时间：2012-04-05T10:16:06.053
> 
> 标签：mysql, objective-c, timezone, nsdate, nsdateformatter

我有一个服务器，它使用 NOW() 将用户之间发送的数据存储在 mySQL 数据库上来设置时间。我正在尝试将时间转换为收件人的本地时间，但运气不佳（我会在存储之前转换时间，但正如我所说，我希望时间是收件人的本地时间，而不是发件人的本地时间）。日期作为字符串返回给应用程序，我尝试将其调整如下：

```
NSString *string1 = [[receivedMessages objectAtIndex:thisRow]objectAtIndex:2];
NSDate *messageDate; 
NSCalendar* cal = NSCalendar.currentCalendar;
NSTimeZone* tz = cal.timeZone;   

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM dd yyyy hh:mma"];
[formatter setTimeZone:tz];

messageDate = [formatter dateFromString:string1]; 
```

它确实格式化了日期，但不正确。应用收到的日期为：

```
April 5 2012 5:49AM 
```

转换为：

```
2012-04-05 04:49:00 +0000 
```

我想知道xcode首先是如何计算出日期属于哪个时区的？

实际上，我刚刚再次使用

```
NSTimeZone *pst = [NSTimeZone timeZoneWithAbbreviation:@"PST"]; 
```

代替

```
 NSCalendar* cal = NSCalendar.currentCalendar;
 NSTimeZone* tz = cal.timeZone; 
```

它仍然给了我 2012-04-05 04:49:00 +0000 的时间。

有人有想法么？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:21:46.283

[从 Apple docs](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-CJBGJDAE)中，`messageDate = [formatter dateFromString:string1];`将返回一个 NSDate。当您显示结果时，您正在打印一个 NSDate 对象，该对象（我猜）被“字符串化”为[ISO 8601 date](http://en.wikipedia.org/wiki/ISO_8601)。这些 NSDate 对象被标准化为绝对时间（没有时区信息）。

获得日期对象后，只需更进一步并格式化输出。我猜您显示的 tz 是原始时间，所以这很好（`dateFromString`将转换为“绝对时间”）。您需要添加的只是诸如[本地化StringFromDate:dateStyle:timeStyle:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/doc/uid/20000447-SW52)之类的内容，以获取本地时间。

```
//If this is not in UTC, we don't have any knowledge about
//which tz it is. MUST BE IN UTC.
dateString = "2012-03-12 9:53:23"

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM dd yyyy hh:mma"];

NSDate *date = [formatter dateFromString:dateString];

NSString *result = [NSDateFormatter localizedStringFromDate:date dateStyle:NSDateFormatterShortStyle timeStyle:NSDateFormatterShortStyle];

//The result should be in MY timezone automatically. 
```

# c - C 库是否应该提供使用自定义内存分配器的能力？

> ID：10026722
> 
> 赞同：5
> 
> 时间：2012-04-05T10:16:43.803
> 
> 标签：c, design-patterns, malloc

我看到一些 C 库[能够指定自定义内存分配器](http://www.libpng.org/pub/png/libpng-1.2.5-manual.html#section-5.1)（`malloc`/`free`替换）。

*   在什么系统/环境/条件下有用？这个功能不只是 MSDOS 时代的遗留物或类似的不再相关的问题吗？

### 背景故事：

我打算让[pngquant](http://pngquant.org)成为一个可以嵌入到各种软件（从 iOS 应用程序到 Apache 模块）中的库。我正在使用`malloc()`/`free()`和我自己的内存池进行小额分配。我总共使用了 2MB-50MB 的内存。我使用线程，但只需要在主线程上分配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:20:09.817

在任何对内存分配的控制至关重要的应用程序中（例如我的领域、游戏开发或其他实时或接近实时的系统），无法控制库中的内存分配会立即使其无法使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:23:06.283

存在许多 malloc/free 算法。系统 malloc 有时未针对库正在处理的任务进行优化，因此调用者可能希望尝试一些不同的来优化性能。

想到的几个是：

*   [dlmalloc](http://g.oswego.edu/dl/html/malloc.html)
*   [杰马洛克](http://www.canonware.com/jemalloc/)
*   [TCMalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)

还有一些垃圾收集库，例如[Boehm 垃圾收集器](http://en.wikipedia.org/wiki/Boehm_garbage_collector)，可通过调用提供的 malloc/free 替换在 C 中使用（即使 free 是一个虚拟函数调用，为了兼容性而保留）。

还有许多可能的用途，例如，可以编写一个调试 malloc/free 函数来跟踪库中的内存分配和释放，例如我写的一个使用 SQLite 记录有关内存使用情况的统计信息（诚然，在性能成本，但这是调试情况）。

# javascript - JQuery如何将函数名分配给$？

> ID：10026729
> 
> 赞同：1
> 
> 时间：2012-04-05T10:17:26.787
> 
> 标签：javascript, jquery

我想知道 JQuery 如何将函数名分配给 $ ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T10:21:21.947

这是在`9384`未压缩库的行完成的（请参阅[http://code.jquery.com/jquery-1.7.2.js](http://code.jquery.com/jquery-1.7.2.js)）

```
// Expose jQuery to the global object
window.jQuery = window.$ = jQuery; 
```

这个赋值的`jQuery`右侧是函数范围的引用（从 line 开始`22`）：当然你可以创建你最喜欢的快捷方式（例如`_`）做类似的事情

```
window._ = window.jQuery 
```

加载库后，您可以使用`_`代替`$`or `jQuery`。

如果你问这个是因为你已经加载了一些其他的库并且你和引用有冲突，`$`看看[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)方法

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T10:19:15.943

与他们将函数分配给任何其他变量名称的方式相同。`$`函数名中的字符没有什么特别之处。

jQuery使用的具体方式可以[在他们的源码中找到](https://github.com/jquery/jquery/blob/master/src/core.js#L370)

```
window.$ = _$; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:20:30.733

我认为他们只是做

```
window.$ = jQuery; 
```

更准确地说，他们首先节省 $

```
var jQuery = (function() {

// Define a local copy of jQuery
var jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
},

// Map over jQuery in case of overwrite
_jQuery = window.jQuery,

// Map over the $ in case of overwrite
_$ = window.$, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:21:38.787

它应该只是全局范围内的正常分配。

```
$ = Jquery; 
```

应该进行一些安全检查以确保 $ 尚未定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T10:22:27.407

与此类似：

```
window.$ = function() {
    alert('Hello world!');
}

$(); 
```

JavaScript 函数名没有什么特别之处`$`。这也是可以接受的：

```
function $() {
    alert('Hello world!');
} 
```

# android - c2dm在注销时从mysql中删除记录

> ID：10026731
> 
> 赞同：0
> 
> 时间：2012-04-05T10:17:39.953
> 
> 标签：android, mysql, push-notification, android-c2dm

有谁知道一旦设备从 c2dm 注销后我如何从我的 mysql 数据库中删除？我的主要活动有：

```
public void unregister (View view){
        Log.w("C2DM", "start unregister process");
        Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
        unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));

Toast.makeText(getApplicationContext(), "unregistered", Toast.LENGTH_LONG).show();

        startService(unregIntent); 
```

现在这是我的问题。当我注册时，我将设备 ID 和注册 ID 输入到我的 mysql 数据库中（这有效），一旦单击取消注册，我想删除它

在我的注册接收器中，我有

```
public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        Log.w("C2DM", "Registration Receiver called");
        if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {
            Log.w("C2DM", "Received registration ID");
            final String registrationId = intent
                    .getStringExtra("registration_id");
            String error = intent.getStringExtra("error");

            Log.d("C2DM", "dmControl: registrationId = " + registrationId
                    + ", error = " + error);
            String deviceId = Secure.getString(context.getContentResolver(),
                    Secure.ANDROID_ID);
            createNotification(context, registrationId);
            sendRegistrationIdToServer(deviceId, registrationId);
            // Also save it in the preference to be able to show it later
            saveRegistrationId(context, registrationId);} 
```

sendRegistrationIdToServer 是：

```
public void sendRegistrationIdToServer(String deviceId, String registrationId) {
        Log.d("C2DM", "Sending registration ID to my application server");
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://myserver.com/Sandbox/androidDevice.php");
        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            // Get the deviceID
            nameValuePairs.add(new BasicNameValuePair("Email", deviceId));
            nameValuePairs.add(new BasicNameValuePair("DeviceID",   registrationId));

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = client.execute(post);
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));

            String line = "";
            while ((line = rd.readLine()) != null) {
                Log.e("HttpResponse", line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

onReceive 和 sendRegistrationIdtoserver 用于设备注册时。现在从上面如果我将我的 php 脚本 (androidDevice.php) 的 url 更改为我的删除脚本，则记录将从我的数据库中删除（当我单击注册按钮时）。所以我知道脚本有效。有没有类似的东西可以用来取消注册，就像注册一样？：

```
if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) { 
```

（我有什么意义吗？）任何帮助像往常一样将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:52:45.253

是的，`UNREGISTER`您可以执行一个意图操作。请参阅[Google 的 C2DM 页面 - 取消注册](https://developers.google.com/android/c2dm/#unregistering)以了解更多信息。

# php - 从其他文件调用构造函数

> ID：10026733
> 
> 赞同：0
> 
> 时间：2012-04-05T10:17:42.153
> 
> 标签：php, constructor

在一个.php

```
if(condition){ 

  include("b.inc");
   b_obj = new b();//this call is not made
   b_obj->a();
} 
```

在 b.inc

```
class b {

  function b(){ //constructor

    //stmts
  }
  function a(){

    //stmts
  }
} 
```

我现在在 php 中有这段代码，尽管包含该文件，但没有从其他文件调用 b 类的构造函数？请帮助实现其他文件中构造函数的调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:19:46.373

将构造函数更改为 __construct()，这是 PHP 5 及更高版本中的默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:01:41.933

您可以更改权限级别，使类/函数“公开”，然后尝试

或者

尝试将“b.inc”文件重命名为“b.php”

最后在 b_obj 变量之前添加一个 $ 符号

```
b_obj = new b();
b_obj->a(); 
```

应该

```
$b_obj = new b();
$b_obj->a(); 
```

# c++ - 在 c++ .h 文件中定义和声明函数/方法

> ID：10026736
> 
> 赞同：0
> 
> 时间：2012-04-05T10:17:53.190
> 
> 标签：c++, header-files, logging

我想知道我是否可以在 .h 文件中定义和声明方法/函数，以及是否可以在测试文件（.cpp 文件）中调用它们，或者我只需要在 .h 文件中声明并在一个单独的 .cpp 文件。

谢谢我正在用c ++编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:19:17.540

您可以在标头中声明和定义函数，但定义它们而不使它们**[内联](http://www.parashift.com/c++-faq-lite/inline-functions.html)**可能会给您带来链接错误。除非函数在后一种情况下，否则**[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)**很容易破坏`inline`。

除非，你真的知道你在做什么，最好在头文件中声明函数并在 cpp 文件中定义它们。

# c# - 在 Visual Studio 2010 中部署和设置 Windows 应用程序项目

> ID：10026738
> 
> 赞同：0
> 
> 时间：2012-04-05T10:18:22.520
> 
> 标签：c#

我想使用包含 5 个项目的 Visual Studio 2010 为 Windows 窗体应用程序创建一个设置

我这样做：

*   从**解决方案资源管理器**>右键单击>**添加**>并单击**新建项目** ，然后展开**设置和部署**，然后选择 Visual Studio 安装程序。

*   选择**设置**项目

*   在名称框中，键入 testSetup。

*   然后右键单击 testSetup，单击**Add**，然后单击**Project Output**。

在“添加项目输出组”对话框中，我应该选择什么？主要输出选项为五次还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:37:18.360

只需右键单击您的设置项目“添加 - > 项目输出，然后从下拉列表中选择您想要的项目，然后根据需要重复其他项目。

之后，当您安装它时，您将拥有您选择的所有项目的所有 *.exe。（如果您选择了 PrimaryOutput，则为 exe）

PS：您能够测试它并发现比提出这个问题并等待回复要快得多！

# javascript - javascript打印对话后的回调函数？

> ID：10026741
> 
> 赞同：1
> 
> 时间：2012-04-05T10:18:38.973
> 
> 标签：javascript, css, printing

例如，我有一个包含大量文本的页面和一个表格。

我希望用户能够使用“打印此表”javascript 链接仅打印该表，但我仍然希望该页面的其余部分可以通过正常的浏览器打印方法打印。

所以首先我有一个 print.css 样式表，如下所示：

```
<link type="text/css" rel="stylesheet" href="style/print.css" media="print"> 
```

在 print.css 中，我有一个类 '.noPrint' 设置为显示：无。

在我看来，解决方案是使用“tempNoPrint”类将不是表格的内容包装在 div 中，并在单击“打印此表格”时让 javascript 添加“noPrint”到所有带有“tempNoPrint”的 div从而将它们隐藏在打印机版本中。

这很好，我肯定会很好地工作。

**但是，在完成表格的打印后**，如何从所有 'tempNoPrint' div 中删除 'noPrint' 类？是否有从打印对话框发送的 javascript 回调？我可以使用计时器，但这似乎非常不可靠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:35:40.023

这可能是一种核方法，但我之前在遇到此类事情时所做的是将我想要打印的位输出到隐藏的 iframe 并打印出来。

```
//build new document
var code = "<!doctype html><html><head>";

//add in CSS needed by the table
code += "<link rel='stylesheet' type='text/css' href='table.css' /></head><body>";

//get and add in table code
var code += "<table>"+document.getElementById('some_table').innerHTML+"</table>";

//finish up new doc code
code += "</body></html>";

//write new doc to hidden iframe (name: hiddenFrame)
var doc = hiddenFrame.document.open("text/html","replace");
doc.write(code);
doc.close();

//print
hiddenFrame.print(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T07:16:22.790

看来我把问题复杂化了！

我用“noPrintCustom”类将我不想打印的页面上的所有内容都包含在按钮 div 中，然后调用此函数：

```
var printCustom = function() {

    $('.noPrintCustom').addClass('noPrint');
    window.print();
    $('.noPrintCustom').removeClass('noPrint');
} 
```

感谢所有帮助！

# facebook - Facebook javascript-sdk 权限对话框错误

> ID：10026747
> 
> 赞同：0
> 
> 时间：2012-04-05T10:19:23.727
> 
> 标签：facebook, facebook-javascript-sdk, facebook-authentication

嗨，我对最近在我的（较新的）应用程序中弹出的 Facebook 错误感到困惑：应用程序运行良好，直到我禁用沙盒模式并尝试以普通用户身份测试应用程序。

当以普通用户身份单击登录按钮时，我得到：
“发生错误。请稍后再试”或有时：“API 错误描述：发生未知错误错误消息：kError 1349045：找到无效的平台会话。：无效已找到平台会话。” 有时会出现正常的权限对话框，但在询问扩展权限后，我也收到错误消息...

这是我的代码：

```
window.fbAsyncInit = function() {
    FB.init({
appId      : 'XXXXXXXXXX', // App ID
        channelUrl : '//' + window.location.hostname + '/fbchannel.html', // Channel File
        status     : true, // check login status
        cookie     : false, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });

};

    $(function(){
        $('.login').click(function(e) { 
            e.preventDefault();
            FB.login(function(response) {
                if (response.authResponse) {
                    FB.api('/me', function(response) {
                        $('#output').text('Good to see you, ' + response.name + '.');
                    });
                } else {
                    $('#output').text('User cancelled login or did not fully authorize.');
                }
            }, {scope: 'email, user_photos, publish_stream, user_likes'});

          // Additional initialization code here
        });
    });

// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```

我已经尝试启用/禁用增强的身份验证对话框，并且正确设置了域、facebook-app url 和网站。对于应用程序的管理员来说，一切正常......有人知道我做错了什么或有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:03:19.937

当你设置一个 facebook 应用程序时，你设置了可以使用它的 url。我的猜测是，您正试图从与 facebook 应用程序设置中的域不同的域加载您的此页面。

在 facebook 应用程序设置中，您应该在*Website - Site Url*中设置一些内容，然后您需要使用来自同一域的 js sdk 加载页面。

如果需要，您可以在设置页面的*App Domain中设置其他域，但那里的所有域都**必须从您的 Site URL 派生*。

我创建了一个非常简单的页面，它只加载 js sdk，然后尝试调用*FB.login*，然后我在设置页面中为该应用程序设置的同一域上对其进行了测试，一切都很好。然后我将该文件复制到我的本地主机并在那里试一试，实际上我收到了与您描述的相同的错误。

# html - 响应式布局的推荐宽度

> ID：10026751
> 
> 赞同：25
> 
> 时间：2012-04-05T10:19:37.540
> 
> 标签：html, css, responsive-design

您建议我应该为响应式布局使用的宽度是多少？

```
 /* Default Width: */
  .container { width: 940px; margin: 0 auto; }

  /* Smaller than standard 960 (devices and browsers) */
  @media only screen and (max-width: 959px) {}

  /* Tablet Portrait size to standard 960 (devices and browsers) */
  @media only screen and (min-width: 768px) and (max-width: 959px) {}

  /* All Mobile Sizes (devices and browser) */
  @media only screen and (max-width: 767px) {}

  /* Mobile Landscape Size to Tablet Portrait (devices and browsers) */
  @media only screen and (min-width: 480px) and (max-width: 767px) {}

  /* Mobile Portrait Size to Mobile Landscape Size (devices and browsers) */
  @media only screen and (max-width: 479px) {} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-05T10:47:58.447

我已经开始使用“320 及以上”的宽度，如下所示：

请注意，它们是从小到大，而不是相反。这更符合渐进增强，无论如何绝对是首选：http: [//bradfrostweb.com/blog/web/mobile-first-responsive-web-design/](http://bradfrostweb.com/blog/web/mobile-first-responsive-web-design/)

[http://stuffandnonsense.co.uk/projects/320andup/](http://stuffandnonsense.co.uk/projects/320andup/)

```
// Default styling here

// Little larger screen
@media only screen and (min-width: 480px) {

}

// Pads and larger phones
@media only screen and (min-width: 600px) {

}

// Larger pads
@media only screen and (min-width: 768px) {

}

// Horizontal pads and laptops
@media only screen and (min-width: 992px) {

}

// Really large screens
@media only screen and (min-width: 1382px) {

}

// 2X size (iPhone 4 etc)
@media only screen and 
        (-webkit-min-device-pixel-ratio: 1.5), only screen and 
        (-o-min-device-pixel-ratio: 3/2), only screen and 
        (min-device-pixel-ratio: 1.5) {

} 
```

如果你使用 Sass，这里有一个我一直在使用的小技巧：

```
$laptop-size: "only screen and (min-width: 768px)";
$desktop-size: "only screen and (min-width: 1382px)";
// etc 
```

进而

```
@media #{$laptop-size} {
    // Styling here...
} 
```

这样，您可以轻松地在一个地方更改宽度，而且您不必每次都编写整个内容。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-05T10:22:32.357

响应式布局没有**推荐**的宽度。这完全取决于您的布局结构。意味着当您想要对特定宽度进行任何特定更改或当您的布局破坏任何特定屏幕宽度时`Layout Structure`使用**MEDIAQUERIES 。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T10:36:00.960

如果您正在寻找使用响应式布局时应用的最佳/常见做法和特定宽度，我建议您查看现成的*网格系统。*快速的谷歌搜索会产生很多结果，但我最喜欢的结果之一是来自 cssgrid.net 的 1140 网格（站点不再可用）——我非常同意他们选择测量的逻辑。逐字：

> 1140 网格非常适合 1280 显示器。在较小的显示器上，它变得流畅并适应浏览器的宽度。报废1024！在 1140 为 1280 设计一次，只需很少的额外工作，它就能适应几乎任何显示器，甚至是移动设备。

如果这不是您要寻找的答案，请重新表述问题。

# javascript-events - 在哪里插入回复“无效”

> ID：10026752
> 
> 赞同：0
> 
> 时间：2012-04-05T10:19:39.343
> 
> 标签：javascript-events

我正在使用谷歌地图示例代码，这个：[http](http://www.wolfpil.de/v3/drag-from-outside.html) : //www.wolfpil.de/v3/drag-from-outside.html 在地图外有 3 个可拖动标记。我想要的只是使用revert'invalid'选项使标记返回到原始位置，以防标记没有落在地图中但我没有把它放在正确的行中。你能否给我一个提示，我必须把它放在哪里才能让它工作？

```
function initDrag(e) {

 if(!e) var e = window.event;

  // Drag image's parent div element
 obj = e.target ? e.target.parentNode : e.srcElement.parentElement;
  if(obj.className != "drag") {
  if(e.cancelable) e.preventDefault();
    obj = null;
  return;
 }

if (obj) {
 // The currently dragged object always gets the highest z-index
 z_index++;
 obj.style.zIndex = z_index.toString();

   xpos = e.clientX - obj.offsetLeft;
 ypos = e.clientY - obj.offsetTop;

 document.onmousemove = moveObj;
}
 return false;
 }

function moveObj(e) {

if(obj && obj.className == "drag") {

  if(!e) var e = window.event;
   obj.style.left = e.clientX - xpos + "px";
  obj.style.top = e.clientY - ypos + "px";

  obj.onmouseup = function() {

  var gd = map.getDiv();
  var mLeft = gd.offsetLeft;
  var mTop = gd.offsetTop;

  var mWidth = gd.offsetWidth;
  var mHeight = gd.offsetHeight;

  var areaLeft = drag_area.offsetLeft;
  var areaTop = drag_area.offsetTop;

  var oWidth = obj.offsetWidth;
  var oHeight = obj.offsetHeight;

  // The object's pixel position relative to the document
  var x = obj.offsetLeft + areaLeft + oWidth/2;
  var y = obj.offsetTop + areaTop + oHeight/2;

  // Check if the cursor is inside the map div
  if (x > mLeft && x < (mLeft + mWidth) && y > mTop && y < (mTop + mHeight)) {

// Difference between the x property of iconAnchor
// and the middle of the icon width
var anchorDiff = 1;

// Find the object's pixel position in the map container
var g = google.maps;
var pixelpoint = new g.Point(x - mLeft -anchorDiff, y - mTop + (oHeight/2));

// Corresponding geo point on the map
var proj = dummy.getProjection();
var latlng = proj.fromContainerPixelToLatLng(pixelpoint);

// Create a corresponding marker on the map
var src = obj.firstChild.getAttribute("src");
createDraggedMarker(latlng, src);

// Create dragged marker anew
fillMarker();
   }
   };
   }
   return false;
   }

 function fillMarker() {

var m = document.createElement("div");
m.style.position = "absolute";
m.style.width = "32px";
m.style.height = "32px";

 var left;
 if (obj.id == "m1") {
 left = "0px";
 } else if (obj.id == "m2") {
 left = "50px";
 } else if (obj.id == "m3") {
  left = "100px";
 }
 m.style.left = left;

 // Set the same id and class attributes again
// m.setAttribute("id", obj.id);
// m.setAttribute((document.all?"className":"class"), "drag");
 m.id = obj.id;
 m.className = "drag";

  // Append icon
 var img = document.createElement("img");
 img.src = obj.firstChild.getAttribute("src");
 img.style.width = "32px";
   img.style.height = "32px";
 m.appendChild(img);
 drag_area.replaceChild(m, obj);

 // Clear initial object
 obj = null;
 }

 function highestOrder() {

/**
* The currently dragged marker on the map
* always gets the highest z-index too
*/
 return z_index;
}

 function createDraggedMarker(point, src) {

var g = google.maps;
var image = new g.MarkerImage(src,
  new g.Size(32, 32),
  new g.Point(0, 0),
  new g.Point(15, 32));

  var shadow = new g.MarkerImage("http://maps.gstatic.com/mapfiles/kml/paddle/A_maps.shadow.png",
  new g.Size(59, 32),
  new g.Point(0, 0),
  new g.Point(15, 32));

  var marker = new g.Marker({ position: point, map: map,
    clickable: true, draggable: true,
    raiseOnDrag: false,
    icon: image, shadow: shadow, zIndex: highestOrder()
  });

  g.event.addListener(marker, "click", function() {
  actual = marker;
  var lat = actual.getPosition().lat();
  var lng = actual.getPosition().lng();

   iw.setContent(lat.toFixed(6) + ", " + lng.toFixed(6));
   iw.open(map, this);
   });

   g.event.addListener(marker, "dragstart", function() {
  // Close infowindow when dragging the marker whose infowindow is open
  if (actual == marker) iw.close();
  // Increment z_index
   z_index++;
   marker.setZIndex(highestOrder());
       });
           } 
```

感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:50:20.503

在代码片段之后

```
fillMarker();
} 
```

添加这样的 else 语句：

```
fillMarker();
} else {
  //if the marker does not land on the map reset marker location
  var left;
  if (obj.id == "m1") {
    left = "0px";
  } else if (obj.id == "m2") {
    left = "50px";
  } else if (obj.id == "m3") {
    left = "100px";
  }
   obj.style.left = left;
   obj.style.top = "70px";
} 
```

jsFiddle 到完整代码：http: [//jsfiddle.net/6ECVs/](http://jsfiddle.net/6ECVs/)

# c++ - 在 DirectX 10/11 中从 GPU 获取转换后的顶点

> ID：10026753
> 
> 赞同：4
> 
> 时间：2012-04-05T10:19:40.010
> 
> 标签：c++, vertex, directx-11, directx-10, vertex-shader

我正在开发的图形引擎出现了一个主要瓶颈，即顶点的矩阵变换（几乎没有静态顶点）。到目前为止，我一直在用 CPU 转换顶点并更新每一帧的顶点缓冲区（数据复制本身是一个小瓶颈，但到目前为止是可控的）。

所以我在想，如果我可以将网格缓冲区保留在 GPU 中，我可以在那里转换顶点并将转换后的一组顶点返回到主内存以进行其他处理（后续处理需要比 GPU 着色器更多的内部连接允许）。这可能会消除当前代码中的瓶颈。

关于如何做到这一点的任何提示？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T10:29:03.243

查看 DX11 中的流输出阶段：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb205121(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205121(v=vs.85).aspx)

它允许您附加一个内存缓冲区（在 CPU 或 GPU 上），其中存储来自顶点着色器（和可能的几何着色器）的结果。

# java - 每个循环嵌套的 NoSuchElementException

> ID：10026754
> 
> 赞同：0
> 
> 时间：2012-04-05T10:19:41.823
> 
> 标签：java, for-loop, iterator, boolean

我有功能检查碰撞的问题。无论我做什么，它都会抛出 NoSuchElementException。这里是：

```
public boolean isColliding(Pixel a) {
    if((a.x + a.size/2 <= x - size/2 &&
        a.x - a.size/2 >= x - size/2 ||
         a.x + a.size/2 <= x + size/2 &&
          a.x - a.size/2 >= x + size/2) &&
      (a.y + a.size/2 <= y - size/2 &&
        a.y - a.size/2 >= y - size/2 ||
         a.y + a.size/2 <= y + size/2 &&
          a.y - a.size/2 >= y + size/2) 
            ) { return true; } else { return false; }
} 
```

这是完整的代码：

[主.java](http://dl.dropbox.com/u/62638687/part/Main.txt)

[粒子.java](http://dl.dropbox.com/u/62638687/part/Particle.txt)

[粒子处理器.java](http://dl.dropbox.com/u/62638687/part/ParticleHandler.txt)

[像素.java](http://dl.dropbox.com/u/62638687/part/Pixel.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:24:34.433

这是你的问题（`Main.java`）：

```
for(Iterator<Pixel> iterator2 = pixel.iterator(); iterator2.hasNext();){
    if( iterator != iterator2 ){
        licz.field(iterator2.next());
        try{ 
            if( px.isColliding(iterator2.next())) { temporary++; } 
        } catch(Exception e) { }
    }
} 
```

`iterator2.next()``hasNext()`在没有检查的循环内调用。

还有这个：

```
if(damnLongCondition) { return true; } else { return false; } 
```

可以（并且应该）简化为：

```
return damnLongCondition; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:25:02.017

您的错误可能来自这里：

```
for(Iterator<Pixel> iterator2 = pixel.iterator(); iterator2.hasNext();){
if( iterator != iterator2 ){
    licz.field(iterator2.next());
try{ 
        if( px.isColliding(iterator2.next())) { temporary++; } 
} catch(Exception e) { }
} 
```

您在循环中第二次调用 iterator2.next() 而不验证它是否仍然具有下一个值。

# c - 与具有成员 char *ptr 的类型混淆；使用的size_t；size_t 大小？

> ID：10026760
> 
> 赞同：0
> 
> 时间：2012-04-05T10:19:52.857
> 
> 标签：c, syntax

我的结构如下

```
typedef struct 
{

    char *ptr;

    size_t used;
    size_t size;

} buffer;

typedef struct 
{

    buffer *request;
    buffer *uri;

    buffer *orig_uri;

    http_method_t  http_method;
    http_version_t http_version;

    buffer *request_line;

    /* strings to the header */
    buffer *http_host; /* not alloced */
    const char   *http_range;
    const char   *http_content_type;
    const char   *http_if_modified_since;
    const char   *http_if_none_match;

    array  *headers;

    /* CONTENT */
    size_t content_length; /* returned by strtoul() */

    /* internal representation */
    int     accept_encoding;

    /* internal */
    buffer *pathinfo;
} request; 
```

现在，如果我想写入（在文本文件中）属于结构“请求”的成员“http_host”的值。成员“http_host”其实是一个“buffer”类型，应该怎么写呢？请用语法解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:30:58.590

假设您已经分配并初始化了所有相关结构，您可以这样做：

```
request * req = malloc(sizeof(request));
buffer * buf = malloc(sizeof(buffer));
/* initialize buffer */
.......................
req->http_host = buf;
FILE * fp = fopen("file");
fprintf(fp,"ptr %s\n", req->http_host->ptr);
fprintf (fp,"size %d\n", req->http_host->size);
fprintf (fp,"used %d\n", req->http_host->used); 
```

如果您想知道其他事情（也就是说，如果我误解了您的问题，请详细说明您的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:31:54.197

你有没有尝试过这样的事情？

```
// open the file
FILE *fp = fopen("myfile.txt");

// print
fprintf(fp, "%s\n", http_host->ptr);

// close the file
fclose(fp); 
```

# php - 在一个数字范围内进行加减运算并循环

> ID：10026763
> 
> 赞同：1
> 
> 时间：2012-04-05T10:20:07.620
> 
> 标签：php, math, range, addition, subtraction

我想知道如何在设定范围内进行数字的加法和减法，并且会自行循环，例如下面的示例；

范围：1 - 10

所以如果我现在有数字 7 并添加 5，我希望数字变为 2

8、9、10，循环到 1、2。

如果我减去也是一样，所以我有数字 3，我减去 4，所以我应该剩下 9。

2, 1, 循环到 10, 9

我希望这是有道理的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:25:30.750

您可以使用 % 运算符。

它计算除法后的余数。

例如：

```
$d = 10;

$x = 7;

$y = 5;

echo ($x + $y) % $d; 
```

给`2`;

使用负值，您只需删除 MINUS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:25:24.240

使用模运算符。

```
result = (a + b) % 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:25:36.477

您可以使用模函数，例如 (7+5)%10 = 2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:30:41.897

试试这个：

```
$range = range(1,10);
$min = min($range);
$max = max($range);

function operate( $a, $b, $operation ) {
    global $max, $min;

    switch( $operation ) {
        case '+':
            $a += $b;
            break;
        case '-':
            $a -= $b;
            break;
    }

    if( $a < $min ) {
        return $max + $a;
    } else if( $a > $max ) {
        return $a - $max;
    }
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T11:06:01.533

您可以使用以下代码执行此操作

```
$range = array('from' => 3, 'to' => 13);
$dist = $range['to'] - $range['from'];
$a = 7;
$b = 14;

echo ($dist + ($a % $range['to'] - $b % $range['to'])) % $dist; // $a - $b
echo ($dist + ($a % $range['to'] + $b % $range['to'])) % $dist; // $a + $b 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T23:58:25.553

正如其他人所展示的那样，模数会起到作用，但您还必须考虑范围的下限。

例如，循环一个小时范围内的任意值将起作用，因为它是从零开始的。但是如果你想在一个月范围内循环一个值，你会在最后一天遇到麻烦，因为：

31 % 31 = 0

因此，当您应该保持在 31 时，您将循环为零。

要处理任何范围，您需要这样做：

```
$min = 5;
$max = 15;
$value = 25; // The range is 11, so we want this turned into 14

$range = $max - $min + 1;
$value = (($value-$min) % $range) + $min; 
```

处理低于最小值的值：

```
$range = $max - $min + 1;
$value = ($min - $value) % $range;
$value = $max - ($value - 1); 
```

# windows - 如何在 Windows 命令 shell 中转义？

> ID：10026766
> 
> 赞同：0
> 
> 时间：2012-04-05T10:20:10.540
> 
> 标签：windows, for-loop, escaping, command-line-arguments, command-prompt

我在`c:\Program Files`名为的目录中有一个文件`tmp.txt`

对于 tmp.txt 中的每一行，我想执行一个命令。

我正在尝试使用命令提示符`for`循环，但它无法找到 tmp.txt。请注意，我必须在 `c:\Program Files`目录之外运行此命令。

这是我正在尝试的方法：

```
C:\>for /F %i in ("c:\Program Files\tmp.txt") do echo "%i" 
```

输出是：

```
C:\>echo "c:\Program"
"c:\Program" 
```

这意味着`for`正在考虑`"c:\Program"`作为参数并将其传递给`do`

如果我将文件放入`c:\`，并运行`for`循环为-

```
C:\>for /F %i in (c:\tmp.txt) do echo "%i" 
```

它工作得很好

所以我的问题是-如何将完整路径传递给`for`循环，以便将`for`其视为文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:24:36.147

使用该`usebackq`选项`for /f`：

```
for /f "usebackq" %i in (...) 
```

这会改变各种引号字符的语义，正如帮助中所述：

```
usebackq        - specifies that the new semantics are in force,
                  where a back quoted string is executed as a
                  command and a single quoted string is a
                  literal string command and allows the use of
                  double quotes to quote file names in
                  file-set. 
```

# sql - 无法在 dbvisualizer 6.5 中运行“分组依据”查询

> ID：10026769
> 
> 赞同：0
> 
> 时间：2012-04-05T10:20:19.903
> 
> 标签：sql, group-by, dbvisualizer

我在 dbvisualizer 中执行以下 sql

```
Select column1,column2,column3 from table group by column3; 
```

它显示以下错误：

```
15:47:09 [SELECT - 0 行，0.000 秒] [错误代码：979，SQL 状态：42000] ORA-00979：不是 GROUP BY 表达式
... 1 条语句执行，0 行受影响，执行/获取时间：0.000/0.000 秒 [0 成功，0 警告，1 错误]

```

但是当我查询时它会给出结果：

```
Select column1 from table group by column1; 
```

查询中是否有任何语法错误或某些配置或支持问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:24:51.213

在[`group by`语句中](http://www.sql-tutorial.com/sql-group-by-sql-tutorial/)，您应该指定与中相同的列`select`（总和、计数等除外）

所以你的查询

```
Select column1,column2,column3 from table group by column3; 
```

应该

```
Select column1,column2,column3 from table group by column1,column2,column3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:28:48.860

SELECT CLAUSE 和 GROUP BY CLAUSE 列就像 HUSBAND AND WIFE。您在 SELECT 中执行的聚合操作是它们的子项。我的意思是说，您的 SELECT 和 GROUP BY CLAUSE 中的列数应该相等。这是一个**经验法则**。

# android - Android中的表格

> ID：10026771
> 
> 赞同：3
> 
> 时间：2012-04-05T10:20:26.037
> 
> 标签：android, android-tablelayout

在我的 Android 应用程序中有一个屏幕，其中包含一些以表格格式显示的数据。该表将有大约 5 列和至少 50 行。

我如何在android中创建一个表？

我搜索了一下，似乎每个人都建议对每个单元格使用 TableLayout 和 textView。使用这种技术似乎有点困难，因为有很多 textView 组件。

有没有其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:30:25.347

```
TableLayout lTableLayout;
lTableLayout = (TableLayout)findViewById(R.id.tblayout);
for(int i=0;i<10;i++){
TableRow tr1 = new TableRow(this);
tr1.setPadding(0, 5, 0, 0);
lTableLayout.addView(tr1, LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT);
TextView tv11 = new TextView(this);
tv11.setPadding(2, 0, 0, 0);
tv11.setTextSize(12);
tr1.addView(tv11,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); // Can give width and height in numbers also.

} 
```

这些将在采用表格布局的每一行中创建 10 行和 1 个文本视图。在您的 xml 文件中采用一个表格布局，如下所示：

```
<TableLayout
                    android:id="@+id/tblayout"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" >
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:26:59.423

将 ListView 与自定义适配器一起使用，在 listview 项目中创建五个文本视图作为列.. 像这样 row.xml 创建 listitem

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent">

   <TextView android:text="TextView" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
   <TextView android:text="TextView" android:id="@+id/textView2" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
   <TextView android:text="TextView" android:id="@+id/textView3" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
   <TextView android:text="TextView" android:id="@+id/textView4" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
   <TextView android:text="TextView" android:id="@+id/textView5" android:layout_width="wrap_content" android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:28:41.923

它不需要用户 TableLayout。

您可以使用自定义 ListView 并将 ListView 的标题设置为您的列名

要创建自定义列表视图，请参阅此[示例](http://android-example-code.blogspot.in/p/dynamic-custoized-list-view-in-android.html)

# c# - Linq 选择最新记录

> ID：10026772
> 
> 赞同：16
> 
> 时间：2012-04-05T10:20:28.953
> 
> 标签：c#, linq

我有数据结构

![在此处输入图像描述](../Images/e74461b1e860a469d2e4c65cacac3a6b.png)

对于每件商品，在特定日期以每种货币记录其价格。我需要创建一个查询来返回每种货币的最新价格。

此查询有效，但`Amounts`为货币 ID返回多个`1`。它应该只返回 3 条记录，`7,8 and 9`因为这些记录代表该商品所有货币的最新价格。

```
var q = (from c in db.tblStoreItemPrices where c.ItemID == ID select new { c.CurrencyID, c.Amount }); 
```

请忽略所有排序并假设记录是随机排序的。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-05T10:35:32.493

这应该有效：

```
db.tblStoreItemPrices
    .Where(c => c.ItemID == ID)
    .GroupBy(c => c.CurrencyID)
    .Select(g => g.OrderByDescending(c => c.Date).First())
    .Select(c => new { c.CurrencyID, c.Amount }); 
```

解释：

1.  选择特定 ItemID 的行
2.  按 CurrencyID 分组
3.  从每个货币组中选择具有最近日期的行（为结果集中的每个 CurrencyID 保留一行）
4.  从这些行中提取您想要的信息

# jquery - jQuery - 锚点跳转后的 scrollTop()

> ID：10026777
> 
> 赞同：0
> 
> 时间：2012-04-05T10:20:56.600
> 
> 标签：jquery, internet-explorer, anchor, scrolltop

我想知道在锚点跳转后是否有可能获得**$(this).scrollTop()值。**Firefox 管理它......但是 IE 返回 0，因为它在页面可以跳转到锚点之前检索值（在页面加载时）。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:49:02.630

我不得不使用超时功能

```
setTimeout(function(){
     IEScrollTop($(window).scrollTop());
}, 100); 
```

这给了我正确的 scrollTop() 值。感谢@nickdos

# c# - 避免 CopyFilesToOutputDirectory 构建步骤

> ID：10026780
> 
> 赞同：5
> 
> 时间：2012-04-05T10:21:02.700
> 
> 标签：c#, visual-studio, msbuild

在 Visual Studio 2010 中使用我的 C# 项目时，我注意到 msbuild 编译到 \obj 目录，然后将文件复制到真正的输出目录：

```
CopyFilesToOutputDirectory:
Copying file from "obj\x86\Debug\Manager.exe" to "bin\Debug\Manager.exe". 
```

没有自定义 msbuild 脚本，它是所有 Visual Studio 的默认设置。有没有办法让它直接构建到 bin\Debug\Manager.exe；绕过“CopyFilesToOutputDirectory”步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:52:07.300

我只是想知道你为什么想要那个。没有简单的方法，因为在编译程序集（可执行文件和库）时默认使用 obj 文件夹。只有当它成功时，输出才会被复制到 bin 文件夹中。这就是为什么 Visual Studio 可以成功运行从 bin 运行的最后一个成功构建。所以本质上需要有 obj 文件夹。[您可以通过查看此链接](http://www.codeproject.com/Articles/43615/Genuilder)来扩展构建机制，使用此构建器而不是依赖于默认构建器来进行一些更改和调整

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T10:35:23.553

不，没有，反正不是。因为 obj 文件夹在构建期间保存临时（未链接）文件。

更多阅读：[obj 和 bin 文件夹（由 Visual Studio 创建）用于什么？](https://stackoverflow.com/questions/5308491/what-are-the-obj-and-bin-folders-created-by-visual-studio-used-for) 在这里：[VisualStudio：如何将 obj 文件夹保存在其他地方](https://stackoverflow.com/questions/261422/visualstudio-how-to-save-the-obj-folder-somewhere-else)

# c - 在 C 中序列化字符串

> ID：10026783
> 
> 赞同：2
> 
> 时间：2012-04-05T10:21:09.987
> 
> 标签：c, string, serialization, null, deserialization

我正在将结构序列化为字节流。我的方法很简单：以小端顺序打包所有整数并复制包含空终止符的字符串。对方必须静态知道如何解包字节流，没有额外的元数据。

我的问题是，我不知道如何处理 NULL 指针？

我需要发送一些东西，因为流中没有额外的元数据。

我考虑了以下两个选项：

1.  发送一个 '\0' 并使接收方在任何情况下都将其解释为 NULL

2.  发送一个 '\0' 并使接收方在任何情况下都将其解释为 '\0' （分配一个字节）

3.  发送一个表示 char* str == NULL 的特殊字符，例如 ETX、EOT、EM ？

你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:27:50.983

看起来您当前正试图通过向接收端传递一个特殊字符来告诉接收端已到达序列化字符串的末尾。有一百万个案例会让你大吃一惊：

如果您的结构包含一个等于该特殊字符的字节怎么办。用另一个特殊字符转义它。如果您的结构包含一个字节序列，该字节序列等于您的转义字符后跟您的特殊字符，也要检查一下吗？

是的，这是可行的，但我认为这不是一个很好的解决方案，你必须编写一个解析器来查找转义字符，然后任何稍后查看代码的人都会花两个小时试图弄清楚发生了什么.

**(tl;dr) 相反......**只需使序列化字符串的前 32 位等于字符串中的字节数。每次序列化只需要 4 个字节，解决了所有问题，您不必编写解析器或担心特殊字符，并且会让下一个阅读您的代码的人更容易！

**编辑**

感谢 JeremyP，我刚刚意识到我并没有真正回答你的问题。为每个字符串发送其中一个：

结构 s_str { bool is_null; 整数大小；字符* str; };

如果它为空，只需将 is_null 设置为 true，您就不必担心其他两个。如果它的大小为零，请将 is_null 设置为 false 并将大小设置为零。如果 str 只包含一个 '\0'，则将 is_null 设置为 false，将 size 设置为 1，并将 str[0] 设置为 '\0'

在我看来，这可能不是最节省内存的方式（你可能会以某种方式在某个地方保存一个字节），但你在做什么绝对很清楚，而且下一个出现的人会更喜欢这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:35:27.887

不要这样做。使用一些额外的字节来存储长度并与您的数据字符串连接。接收端可以检查长度以了解它应该读入他的本地缓冲区的长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T10:46:50.173

我建议您使用现有的库进行序列化。我现在能想到两个：[`tpl`](http://tpl.sourceforge.net/)和 gwlib 的[`gwser`](http://gwlib.com/).

关于`tpl`：

> 您可以使用 tpl 快速轻松地存储和重新加载您的 C 数据。Tpl 适用于文件、内存缓冲区和文件描述符，因此它适合用作文件格式、IPC 消息格式或您需要存储和检索数据的任何场景。

关于`gwlib`，见链接，不是很冗长，但提供了一些使用示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T10:40:23.233

这取决于协议中指针的重要性。如果指针很重要，即接收者需要知道如何重建结构，那么你需要发送一些东西。它可以是一个带有 0/非零的字节来指示存在，也可以是一个整数来指示指针所指向的字节数。

示例：struct Foo { int *arr, char *text }

Struct Foo 可以这样序列化：

```
<arr length><  arr   ><text length>< text >
  4 bytes    n bytes    4 bytes     n bytes 
```

# python - 在 Python 中处理 B64 编码数据

> ID：10026789
> 
> 赞同：0
> 
> 时间：2012-04-05T10:21:34.570
> 
> 标签：python

在我的基于 Google App Engine 的应用程序中，我从 SOAP 网络服务中获取数据。问题是其中一个标签包含二进制 64 编码数据。我使用解码它

```
decodedStr = base64.b64decode(str(content)) 
```

似乎解码没有正确完成，我在 decodeStr 中得到了垃圾数据。我认为问题在于内容字符串被错误地解析为 unicode 字符串而不是简单的字节字符串

任何 Python 大师都可以告诉我如何在 Python 中处理 b64 编码数据吗？

现在我正在使用这个解决方法

```
fileContent = str(fileContent)
fileContent = fileContent[3:-3]
self.response.out.write(base64.b64decode(fileContent)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:25:32.700

您可以尝试使用 base64.decodestring，或者如果您传递了一个 url base64.urlsafe_b64decode。确保数据不在 base16 或 base32 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:00:10.917

奇怪的。如果内容不是 b64 编码的，则对 decode 的调用应该引发 TypeError 异常。我假设这不会发生？

这会让我想知道你怎么知道得到的 decodedStr 不是你想要的？

# java - 资源处理实践

> ID：10026791
> 
> 赞同：0
> 
> 时间：2012-04-05T10:21:42.203
> 
> 标签：java, resources, garbage-collection

可以确保垃圾收集器会销毁所有不需要和未使用的对象，如果我们手动取消对象会怎样。List<String> = null ，此操作是否会对性能产生负面或正面影响？

我在 Java 上。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:32:22.027

不是内存处理细节方面的专家，但我可以分享我所知道的。GC 将收集未使用的任何内容。因此，当您消除对对象的最后一个引用（通过显式取消）时，您会将其标记为垃圾回收。这并不能保证它会立即被收集。

您可以显式尝试调用 GC，但您会看到很多人反对它。我的理解是，对 GC 的调用充其量是不可靠的。GC 和 Java 的全部意义在于，作为程序员，您无需过多担心内存分配。至于性能，除非您对堆空间有严格的限制，否则您不应该注意到 GC 活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:33:49.697

垃圾回收是 Java 回收游荡对象占用的空间的一种方式。通过这样做，它 [Java] 确保您的应用程序永远不会耗尽内存（尽管我们不能保证程序永远会耗尽内存）。

建议将其留在 JVM 上。

阅读相关：[将 Java 对象设置为 null 有什么作用吗？](https://stackoverflow.com/questions/850878/does-setting-java-objects-to-null-do-anything-anymore)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:34:58.357

显式`null`化几乎没有区别。通常 GC 可以可靠地检测到何时无法再到达对象，因此可以进行 GCd。

特别是，`null`ing 堆栈（即内部方法）变量绝对没有帮助。运行时自动检测何时需要它们以及何时不需要它们是微不足道的。`null`在极少数情况下，堆（即类内部）变量*可能会*有所帮助，但这是一个罕见的例外，并且可能弊大于利（在代码易读性/可维护性方面）。

另请注意，`null`ing 不*保证*对象是否或何时会被 GCd。

# svn - 丢失.svn/格式，怎么办？

> ID：10026794
> 
> 赞同：0
> 
> 时间：2012-04-05T10:21:54.913
> 
> 标签：svn, format, directory

我正在颠覆中运行一个项目。我在提交时遇到问题，其中一个文件夹出现“丢失或未锁定”错误，因此按照建议，我发现我在本地删除了该文件夹，进行了清理并尝试更新。这没有用。经过更多尝试后，我虽然更容易恢复到工作版本。

但是，当我尝试这样做时，出现以下错误：

```
svn: Cannot read from '/homes/ndeklein/workspace/MS/.svn/format': /homes/ndeklein/workspace/MS/.svn/format (No such file or directory) 
```

我检查了 .svn，确实它没有格式文件或目录。我的 svn 项目现在无法恢复、更新或提交。是否可以重新制作格式文件或目录？

# visual-studio - ILMerge 错误：SQLite.Interop.dll [无法从该位置加载程序集]

> ID：10026795
> 
> 赞同：0
> 
> 时间：2012-04-05T10:21:55.960
> 
> 标签：visual-studio

我目前正在编写一个小应用程序，我决定使用 SQLite 数据库。我需要 2 个库与 ILMerge 合并：SQLite.Interop.dll 和 System.Data.SQLite.dll

问题是当我想将我的 exe 与这些 DLL 合并时。

当我尝试合并它们时，出现错误：合并期间发生异常：

```
ILMerge.Merge: Could not load assembly from the location 'C:\Program Files\Micro
soft\ILMerge\SQLite.Interop.dll'. Skipping and processing rest of arguments.
   w ILMerging.ILMerge.Merge()
   w ILMerging.ILMerge.Main(String[] args) 
```

更重要的是，当我将 exe 与 System.Data.SQLite.dll 合并时，它可以工作。问题出在 SQLite.Interop.dll 库上。

我使用 .NET v4 [Visual Basic 2010]。

我真的需要你的帮助，问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-11T14:20:41.927

这不起作用，因为 SQLite.interop.dll 不是托管程序集。

ILMerge 只能读取托管程序集并将其组合成一个新的托管程序集。如果您必须混合使用本机 dll 和托管程序集，则需要创建 setup/msi 或引导程序。

# json - 使用 JSON 键作为嵌套 JSON 中的属性

> ID：10026797
> 
> 赞同：8
> 
> 时间：2012-04-05T10:22:06.617
> 
> 标签：json, metaprogramming, python

我在 python 2.7 中使用嵌套的类似 JSON 的数据结构，我与一些外国 perl 代码交换。我只想以更 Pythonic 的方式“使用”这些列表和字典的嵌套结构。

所以如果我有这样的结构......

```
a = {
    'x': 4,
    'y': [2, 3, { 'a': 55, 'b': 66 }],
} 
```

...我希望能够在 python 脚本中处理它，就好像它是嵌套的 python 类/结构一样，如下所示：

```
>>> aa = j2p(a)  # <<- this is what I'm after.
>>> print aa.x
4
>>> aa.z = 99
>>> print a
{
    'x': 4,
    'y': [2, 3, { 'a': 55, 'b': 66 }],
    'z': 99
}

>>> aa.y[2].b = 999

>>> print a
{
    'x': 4,
    'y': [2, 3, { 'a': 55, 'b': 999 }],
    'z': 99
} 
```

因此 aa 是原始结构的代理。这是我迄今为止提出的，受到优秀的[什么是 Python 中的元类的启发？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)问题。

```
def j2p(x):
    """j2p creates a pythonic interface to nested arrays and
    dictionaries, as returned by json readers.

    >>> a = { 'x':[5,8], 'y':5}
    >>> aa = j2p(a)
    >>> aa.y=7
    >>> print a
    {'x': [5, 8], 'y':7}
    >>> aa.x[1]=99
    >>> print a
    {'x': [5, 99], 'y':7}

    >>> aa.x[0] = {'g':5, 'h':9}
    >>> print a
    {'x': [ {'g':5, 'h':9} , 99], 'y':7}
    >>> print aa.x[0].g
    5
    """
    if isinstance(x, list):
        return _list_proxy(x)
    elif isinstance(x, dict):
        return _dict_proxy(x)
    else:
        return x

class _list_proxy(object):
    def __init__(self, proxied_list):
        object.__setattr__(self, 'data', proxied_list)
    def __getitem__(self, a):
        return j2p(object.__getattribute__(self, 'data').__getitem__(a))
    def __setitem__(self, a, v):
        return object.__getattribute__(self, 'data').__setitem__(a, v)

class _dict_proxy(_list_proxy):
    def __init__(self, proxied_dict):
        _list_proxy.__init__(self, proxied_dict)
    def __getattribute__(self, a):
        return j2p(object.__getattribute__(self, 'data').__getitem__(a))
    def __setattr__(self, a, v):
        return object.__getattribute__(self, 'data').__setitem__(a, v)

def p2j(x):
    """p2j gives back the underlying json-ic json-ic nested
    dictionary/list structure of an object or attribute created with
    j2p.
    """
    if isinstance(x, (_list_proxy, _dict_proxy)):
        return object.__getattribute__(x, 'data')
    else:
        return x 
```

现在我想知道是否有一种优雅的方式来映射一整套`__*__`特殊功能，比如`__iter__`，`__delitem__`？所以我不需要`p2j()`仅仅使用迭代或做其他pythonic的东西来打开东西。

```
# today:
for i in p2j(aa.y):
     print i
# would like to...
for i in aa.y:
     print i 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T11:51:59.560

我认为你让这变得比它需要的更复杂。如果我理解正确，您需要做的就是：

```
import json

class Struct(dict):
    def __getattr__(self, name):
        return self[name]

    def __setattr__(self, name, value):
        self[name] = value

    def __delattr__(self, name):
        del self[name]

j = '{"y": [2, 3, {"a": 55, "b": 66}], "x": 4}'

aa = json.loads(j, object_hook=Struct)

for i in aa.y:
    print(i) 
```

加载 JSON 时，该`object_hook`参数允许您指定一个可调用对象来处理它加载的对象。我刚刚用它把字典变成了一个对象，允许属性访问它的键。[文档](http://docs.python.org/library/json#json.load)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-14T22:29:21.570

有[一个 attrdict 库](https://pypi.python.org/pypi/attrdict)以一种非常安全的方式做到这一点，但如果你愿意，[这个答案](https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute-in-python#answer-14620633)中给出了一种快速而肮脏（可能泄漏内存）的方法：

```
class AttrDict(dict):
    def __init__(self, *args, **kwargs):
        super(AttrDict, self).__init__(*args, **kwargs)
        self.__dict__ = self

j = '{"y": [2, 3, {"a": 55, "b": 66}], "x": 4}'
aa = json.loads(j, object_hook=AttrDict) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:25:01.717

我找到了答案： [故意没有办法自动映射 python 中的特殊方法，使用`__getattribute__`](http://docs.python.org/reference/datamodel.html?highlight=__getattr__#new-style-special-lookup). 因此，为了实现我想要的，我需要`__len__`一个接一个地明确定义所有特殊方法。

# bash - 自定义 cd 命令

> ID：10026803
> 
> 赞同：5
> 
> 时间：2012-04-05T10:22:23.883
> 
> 标签：bash, shell, ubuntu, cd

通常我会保留目录特定的设置`.bashrc`，每当我更改目录时，执行命令`source .bashrc`以使这些设置生效。
现在我正在考虑在 中操作 cd 命令`~/.bashrc`，所以每当我 cd 到新目录并且如果那里存在任何 .bashrc 时，它将自动加载。

与此类似`cd $1; source .bashrc`（我已经验证 $1 是有效路径），但问题是 cd 是 shell 构建，所以它是一个递归循环（ cd 总是指向修改后的 cd ）。我们没有 cd 的 elf 文件（通常我们有其他命令，即 scp 或其他）。那么我该如何实现呢？此外，如果`shopt -s cdspell`支持，那么我还需要在 $1 的参数中使用 cd 拼写路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:32:00.717

你想要“内置”命令；

> 内置 shell-builtin [参数]
> 
> 执行指定的内置 shell，传递参数，并返回其退出状态。这在定义名称与 shell 内置函数相同的函数时很有用，在函数中保留内置函数的功能。cd 内置通常以这种方式重新定义。如果 shell-builtin 不是 shell 内置命令，则返回状态为 false。

来自： http: [//linux.die.net/man/1/bash](http://linux.die.net/man/1/bash)

所以，你可以有类似的东西（未经测试，也没有 bash 方便）；

```
function cd() {
    builtin cd $1 \
        && test -e .bashrc \
        && source .bashrc
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:46:48.767

您可以查看 direnv。[https://github.com/zimbatm/direnv](https://github.com/zimbatm/direnv)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:03:58.800

[RVM](http://beginrescueend.com/rvm/install/)这样做：

```
$ type cd
cd is a function
cd () 
{ 
    if builtin cd "$@"; then
        [[ -n "${rvm_current_rvmrc:-}" && "$*" == "." ]] && rvm_current_rvmrc="" || true;
        __rvm_do_with_env_before;
        __rvm_project_rvmrc;
        __rvm_after_cd;
        __rvm_do_with_env_after;
        return 0;
    else
        return $?;
    fi
} 
```

是的，这适用于我的机器。本质上，正如@RoryHunter 所说，`builtin`如果成功则使用并运行一些代码，如果失败则返回退出代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:31:07.087

你可以试试这个：

```
function cdd(){ cd $1; if [ -e ./.bashrc ] ; then source ./.bashrc; fi; }
alias cd = 'cdd' 
? 
```

然而，没有测试这么多。

# mysql - MYSQL ORDER BY 2 列

> ID：10026809
> 
> 赞同：0
> 
> 时间：2012-04-05T10:22:57.347
> 
> 标签：mysql, sql-order-by

我在 MySQL 中有下表：

```
----------------------------
| id | price | price_promo |
----------------------------
|  1 |    10 |           0 |
|  2 |     8 |           0 |
|  3 |    10 |           9 |
---------------------------- 
```

我有以下查询：

```
$SQLquery = "SELECT * FROM table ORDER BY price ASC" 
```

如果按实际收购价格下订单，我只想忽略价格列`price_promo > 0`，并获得以下结果：

```
----------------------------
| id | price | price_promo |
----------------------------
|  1 |    10 |           0 |
|  3 |    10 |           9 |
|  2 |     8 |           0 |
---------------------------- 
```

我需要做什么查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:27:42.727

你可以试试

```
SELECT * FROM your_table 
ORDER BY
    CASE 
       WHEN price_promo = 0 THEN price
       WHEN price_promo IS NULL then price
       ELSE price_primo
    END 
```

**用户评论后编辑：**
如果你想降序使用这个

```
SELECT * FROM your_table 
ORDER BY
    CASE 
       WHEN price_promo = 0 THEN price
       WHEN price_promo IS NULL then price
       ELSE price_primo
    END DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:34:14.733

您可以按不同顺序的多列排序。

尝试这个....

SELECT * FROM table ORDER BY price DESC , price_promo ASC

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-05T10:33:18.650

请提供更多细节？要获得您想要的结果（在您的示例中），您可以使用以下查询：

```
SELECT * FROM table ORDER BY price DESC , price_promo ASC 
```

# java - java - system.nanoTime() 运行太慢

> ID：10026812
> 
> 赞同：0
> 
> 时间：2012-04-05T10:23:08.130
> 
> 标签：java, nanotime

我在我的应用程序中使用 system.nanoTime 并计算相对于开始时间的时间。
我的应用程序运行得非常好，直到我将它复制到一台新计算机上，并且纳米时间给了我较慢的值。

我写了一个简单的应用程序只是为了确保。
纳米时间与系统时间进行比较。
它在除我的新计算机之外的其他计算机中显示相同的值。有什么建议么？

这是我的代码：首先我有

```
private long initNanoTime = System.nanoTime();
private long initTime = System.currentTimeMillis(); 
```

比我循环一个每秒运行的线程：

```
long timeUsingNanoTime = initTime + (System.nanoTime() - initNanoTime) / 1000000;
long timeUsingMilis = System.currentTimeMillis();
long nanotimeOffset = Math.abs(timeUsingNanoTime - timeUsingMilis);
if (nanotimeOffset < 100l) ? print("close") : print(far); 
```

编辑：我正在使用 nano 因为我需要处理在 nano 时间内发生的甚至 ts 并将接收到的 nano time 打印到日志中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T10:28:16.193

就像 Java API 文档所说的那样[`System.nanoTime()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)：

> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意的原始时间以来的纳秒（可能在将来，因此值可能为负数）。在 Java 虚拟机实例中，此方法的所有调用都使用相同的来源；其他虚拟机实例可能使用不同的来源。
> 
> 此方法提供纳秒精度，但不一定提供纳秒分辨率（即值更改的频率） - 不保证分辨率至少与 currentTimeMillis() 的分辨率一样好。

它不提供与时间戳（currentTimeMillis）的任何耦合，也不提供固定的分辨率。

在您的情况下，Java 现在似乎具有比以前更高分辨率的计时器，因此不需要使用系统时间。

# database - Youtube 目前使用哪个数据库？

> ID：10026816
> 
> 赞同：1
> 
> 时间：2012-04-05T10:23:32.280
> 
> 标签：database, youtube

我希望任何人都可以在这个主题上帮助我，即使这不是一个特定的编程问题。我正在写一篇学士论文，我将 MySQL 与 MongoDB 进行比较，并且我想写一些关于 Youtube 的内容，因为该平台必须处理大量数据负载的请求。我发现的唯一好的资源是这个视频：[西雅图可扩展性会议：YouTube 可扩展性](http://video.google.com/videoplay?docid=-6304964351441328559)

由于会议是在 2007 年举行的，我可以想象有一些关于数据库的更新。

我从这次演讲中获得的最后一个信息是缩略图存储在 BigTable 数据库中，而元数据存储在 MySQL 中。从那以后有什么变化吗？视频存储在哪里？MySQL 表中是否有一个条目，它指的是存储的视频？

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:26:58.593

据此，youtube仍然使用mysql：[http ://code.google.com/p/vitess/wiki/ProjectGoals](http://code.google.com/p/vitess/wiki/ProjectGoals)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T06:16:29.197

我不确定 youtube 上的情况如何，但我正在为我们的客户开发一个类似的应用程序。所以我们正在做的是我们正在利用两全其美，即 SQL 和 NoSQL..

我们将视频存储在磁盘上，并将这些视频的路径存储在 MySQL 数据库表中。然后我们有一个单独的表，其中包含流派和视频映射，即哪个视频属于哪个特定流派。

今天，我们拥有大量的用户数据，我们可以像以前一样利用这些数据，所以你会发现现在的情况与 2007 年不同，而且人们对互联网的流行和依赖，比如网站你管我们有大量的非结构化数据，如果使用得当，可以给你带来很好的结果。因此，在我们的项目中，我们将站点管理员和报告内容（例如用户数据库、视频位置和流派映射等）存储在 MySQL 中，并将有关用户交互的非结构化数据存储在 NoSQL 数据库中。然后，我们使用 NoSQL 数据进行所有分析，并为用户提供适当的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-20T12:55:11.597

他们将 mysql 与 Bigdata 一起使用。用户信息有谁上传了文件，文件信息全部存储在mysql中，数据存储在Bigdata中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T04:44:03.350

我认为他们正在使用可以使用 FileTable 的数据库

# sed - 为什么用sed删除一些行后，Postfix不能写maillog

> ID：10026818
> 
> 赞同：-1
> 
> 时间：2012-04-05T10:23:44.810
> 
> 标签：sed, postfix-mta

我想使用 cron 作业，每三天一次将清理和排序邮件日志。

我的工作看起来像

```
 /bin/sed -i /status=/!d /var/log/maillog | 
    (/bin/grep "status=bounced" /var/log/maillog | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" | /bin/sort -u >> /root/unsent.log) | 
    (/bin/grep "status=deferred" /var/log/maillog | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" | /bin/sort -u >> /root/deferred.log) | 
    (/bin/grep "status=sent" /var/log/maillog | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" | /bin/sort -u >> /root/sent.log) | 
/bin/sed -i "/status=/d" /var/log/maillog 
```

工作正常并执行 3 步：

1.  从邮件日志中删除所有不包含“status=”的行
2.  在不同的日志中对发送、退回、延迟进行排序。
3.  从邮件日志中删除所有包含“状态”的行

完成这项工作后，我的邮件日志完全干净并分类为 3 个日志。

但是 Postfix 不想将下一条记录写入邮件日志。

我删除了 sed 命令，Postfix 可以很好地写入下一条记录。

为什么执行 cron 作业后 sed 命令会阻止邮件日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:33:20.457

`sed -i`将取消它修改的文件的链接，因此 syslog/postfix 将继续写入不存在的文件。

来自[http://en.wikipedia.org/wiki/Sed](http://en.wikipedia.org/wiki/Sed)：

> 注意：“sed -i”用新文件覆盖原始文件，破坏原始文件可能具有的任何链接

更常见的做法是在使用类似`logrotate`or之类的工具将日志文件旋转到位后处理日志文件`savelog`，以便 syslog 可以不间断地继续写入。

如果您必须`/var/log/maillog`就地编辑，您可以在 cron 作业的末尾添加一行，以便在完成后重新加载 syslog。请注意，如果这样做，您可能会在脚本运行时*丢失*写入文件的日志行。该命令将取决于您正在运行的发行版/操作系统。在使用 rsyslog 的 ubuntu 上，它将是`reload rsyslog >/dev/null 2>&1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T04:52:04.897

我已重新格式化您的原始代码以突出显示您添加的管道

```
 /bin/sed -i /status=/!d /var/log/maillog \
 | (/bin/grep "status=bounced" /var/log/maillog \
     | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" \
     | /bin/sort -u >> /root/unsent.log\
   ) \
 | (/bin/grep "status=deferred" /var/log/maillog \
   | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" \
   | /bin/sort -u >> /root/deferred.log\
   ) \
 | (/bin/grep "status=sent" /var/log/maillog \
   | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" \
   | /bin/sort -u >> /root/sent.log \
   ) \
 | /bin/sed -i "/status=/d" /var/log/maillog 
```

`sed -i`正如@alberge 指出的那样，在同一个文件上进行所有这些处理时，您很可能会丢失日志消息。

我提出了一种不同的方法：

我会将邮件日志移动到一个过时的文件名，（这里的假设是 Postfix 将创建一个具有它“喜欢”使用的标准名称的新文件（/var/log/maillog）。

那么您的真正目标似乎是将各种类别的消息提取到单独命名的文件中，即 unsent.log、deferred.log、send.log 然后您将丢弃任何不包含该字符串的行`status=`（尽管您这样做了第一的）。

这是我的替代方案（请阅读整个消息，不要立即复制/粘贴/执行！）。

```
 logDate=$(/bin/date +%Y%m%d.%H%M%S)
 /bin/mv /var/log/maillog /var/log/maillog.${logDate}

 /bin/grep "status=bounced" /var/log/maillog.${logDate} \
 | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" \
 | /bin/sort -u \
 >> /root/unsent.log.${logDate} 

 /bin/grep "status=deferred" /var/log/maillog.${logDate} \
 | /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" \
 | /bin/sort -u \
 >> /root/deferred.log.${logDate}

/bin/grep "status=sent" \
| /bin/grep -E -o --color "\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9.-]+\b" \
| /bin/sort -u \
>> /root/sent.log.${logDate} 
```

要测试此代码是否正常工作，请将第二行 ( `/bin/mv ....`)替换为

```
 /bin/cp /var/log/maillog /var/log/maillog.${logDate} 
```

将其复制/粘贴到终端窗口中，确认复制正确，然后复制/粘贴每个部分，一次 1 个，并检查每个日志文件`/var/log/maillog.${logDate}`中是否创建了预期的输出。`/root`

（如果您收到任何这些块的错误消息，请确保在每一行的最后一个 '\' 字符之后没有空格/制表符字符。或者您可以将这 3 个管道中的每一个折叠回一行，删除'\' 字符随你去。

（请注意，为了创建每个`/root`日志文件，我不使用任何通过被子进程包围的管道的连接部分。但是，在其他情况下，我确实使用这种技术来解决高级问题，所以不要扔技术离开，只在真正需要时使用它;-)！

在您确认所有这些都按您的需要工作后，您可以扩展脚本以进行最后的清理：

```
/bin/rm  /var/log/maillog.${logDate} 
```

我已添加`${logDate}`到您的每个输出文件中，但正如我看到您正在使用的那样，`sort -u >>`您可能希望删除子日志文件名称（unsent.log、deferred.log、send.log）的“扩展名”，然后让这些文件自然增长。在任何一种情况下，您都必须在某个时候返回并确定您希望将这些数据保留多长时间，并制定计划和方法来在这些日志文件无用时如何清理它们。我想有人提到`logrotate`包。您可能希望将其视为您的长期解决方案。

* * *

该解决方案避免了创建大量额外进程，并且（大部分）消除了丢失日志记录的可能性。我认为如果 Postfix 在您移动文件的同一瞬间写入日志文件，您可能会丢失全部或部分记录。但是您的解决方案会有类似的问题，并且有更多的机会发生这种情况。

如果我误解了您的设计意图，使用嵌套`( .... ) | ( .... )`子流程，对不起！考虑更新您的帖子以包含您使用该技术的原因。

我希望这有帮助。

# asp.net - Windows Server 2008 - 授予我的 ASP.NET 网站对文件夹的写入权限

> ID：10026819
> 
> 赞同：0
> 
> 时间：2012-04-05T10:23:49.520
> 
> 标签：asp.net, iis, iis-7, permissions, windows-server-2008

我有一个文件夹“foo”，它位于我的 ASP.NET 网站的根文件夹下。

我的 ASP.NET 网站有一个文件浏览器控件，它使（经过身份验证的）用户能够在“foo”文件夹中上传文件、创建文件夹、移动文件夹、删除文件/文件夹等。

“foo”文件夹应该有什么权限？

它是一个 Windows Server 2008 / IIS 7 盒子。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:32:31.793

根据您使用的身份验证方法，最终用户或应用程序池身份用户将需要修改 foo 文件夹的权限。

**更新**：听起来您正在使用匿名身份验证，但正在通过您的应用程序对数据库中的用户进行身份验证。

检查您的 IIS 以确定匿名身份验证使用的[身份。](http://technet.microsoft.com/en-us/library/cc770966%28v=ws.10%29.aspx)默认值为 IUSR，但您也可以决定使用应用程序池标识，在这种情况下，您需要检查您的应用程序池标识。

如果您坚持使用默认设置，您可能只需要向内置 IUSR 用户添加修改权限。

其他背景信息：[了解 IIS 7 中的内置用户和组帐户](http://learn.iis.net/page.aspx/140/understanding-built-in-user-and-group-accounts-in-iis/)

# iphone - 应用程序 '' 异常退出，信号 11：分段错误：11

> ID：10026835
> 
> 赞同：3
> 
> 时间：2012-04-05T10:24:54.107
> 
> 标签：iphone, ios5

> 应用程序 '' 异常退出，信号 11：分段错误：11

导致这种情况的问题可能是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T17:34:19.880

当您的程序尝试访问不再存在的对象的内存位置时，就会发生这些错误，该对象在应用程序生命周期的某个较早时间点已将其内存释放回堆中。

如果您可以通过使用明智的注释或更好的调试器来跟踪崩溃时正在访问哪个变量，那么您将有可能更容易修复错误。

同时，重新阅读 Apple 出色的[内存管理指南](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/memorymgmt/Articles/MemoryMgmt.html)，该指南更详细地介绍了内存管理问题，超出了此评论字段的范围。

# php - 需要在 href 标签中显示 id 但不导航到其他页面

> ID：10026840
> 
> 赞同：1
> 
> 时间：2012-04-05T10:25:28.810
> 
> 标签：php, javascript

我需要在href标签中显示项目ID，但它不能导航到其他页面......防止导航的一种方法是使用jvascriptvoid（0）但我可以将它附加到id......如果是这样怎么办？

```
 <a href="id='.$portfolio_id.' "><img height="57" width="57" src="images/portfolio_uploads/orig_'.$portfolio_item['image'].'"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:27:11.680

添加`onclick="return false;"`到您的锚标记。这将阻止链接被导航到。

```
<a href="id='.$portfolio_id.' " onclick="return false;"><img height="57" width="57" src="images/portfolio_uploads/orig_'.$portfolio_item['image'].'" /></a> 
```

但是，我不明白这一点，这不是锚标签的设计目的。也许如果您提供更多信息，我们可以找到更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:31:42.463

你不应该首先使用`<a>`标签。您始终可以使用另一种标签来显示信息。特别是因为您的`href`属性内容不是真正有效的链接。在您的附件中使用`id`属性`<img>`应该会更好。

```
<img id="'.$portfolio_id.'"> 
```

或者调整您的布局将是更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:31:48.463

分配一个 click 事件并返回 false，这将阻止浏览器导航到 href。

```
<script type="text/javascript">

window.onload = function()
{

    document.getElementById("mylink").onclick = function()
    {
        return false;
    }

}

</script>

 <a id="mylink" href="http://google.com"><img height="57" width="57" src="images/portfolio_uploads/orig_'.$portfolio_item['image'].'"></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T10:32:14.597

在 id 前面添加“#”字符，它不会导航到其他页面。

```
<a href="#id='.$portfolio_id.' "><img height="57" width="57" src="images/portfolio_uploads/orig_'.$portfolio_item['image'].'" /></a> 
```

# android - 图库视图不是从左侧开始

> ID：10026845
> 
> 赞同：4
> 
> 时间：2012-04-05T10:25:37.430
> 
> 标签：android, android-gallery

我正在使用这样的画廊

```
<Gallery
    android:id="@+id/gallery1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="10dp"
    android:spacing="2dp" >
</Gallery> 
```

但是当我运行代码时，我发现画廊从中间开始，我想从左边开始。我该怎么办，请帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-15T11:55:48.020

描述有关显示的一般信息的结构，例如其大小、密度和字体缩放。要访问 DisplayMetrics 成员，请像这样初始化一个对象

```
 DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        Gallery g = (Gallery) findViewById(R.id.gallery);

        // set gallery to left side
        MarginLayoutParams mlp = (MarginLayoutParams) g.getLayoutParams();
        mlp.setMargins(-(metrics.widthPixels / 2 + (imageWidth/2)), mlp.topMargin,
                    mlp.rightMargin, mlp.bottomMargin); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:31:53.087

只需将画廊的选择设置为下一个，这类似于画廊在左侧位置。

```
Gallery mGallery= (Gallery) findViewById(R.id.gallery);
mGallery.setSelection(1); 
```

然后继续你的正常工作:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-16T13:44:01.057

您应该使用 setSelection(1)，但将其放在 setAdapter() 之后很重要。在另一种情况下，它不起作用。

```
Gallery gallery = (Gallery) findViewById(R.id.gallery);
gallery.setAdapter(new GalleryImageAdapter(this));
gallery.setSelection(1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T08:48:58.793

您需要使用的是 .setSelection 而不是 .setSelected，示例如下

画廊画廊=（画廊）findViewById（R.id.gallery）；

图库.setSelection(1);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T00:31:37.937

将 Gallery 的左边距设置为负整数（例如 -80 dip）。要正确计算，您将在运行时检查屏幕宽度，然后给定您的项目（图像）宽度，您将执行以下操作：

```
 int offset = width/2 - itemWidth/2; // you may add your spacing here too
    MarginLayoutParams mlp = (MarginLayoutParams) getLayoutParams();
    mlp.setMargins(-offset, mlp.topMargin, mlp.rightMargin, mlp.bottomMargin); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-23T19:16:30.040

试试这个它会工作......

`Gallery g=(Gallery)findViewById(R.id.gallery1);`

`MarginLayoutParams mlp=(MarginLayoutParams)g.getLayoutParams();`

`mlp.setMargins(-200, 0, 0, 0);`

# iphone - setBound 宽度和高度

> ID：10026850
> 
> 赞同：0
> 
> 时间：2012-04-05T10:25:57.623
> 
> 标签：iphone, uiview, uianimation, setbounds

在我调整照片大小后调用此方法：

```
- (void)correctSize:(UIView*)view{
    //check if the newWidth is rounded by 50
    CGFloat correctWidth = roundf(_lastScale*_lastWidth/XPCollageGridHorizontalStepSize) * XPCollageGridHorizontalStepSize;
    CGFloat correctHeight = roundf(_lastScale*_lastHeight/XPCollageGridVerticalStepSize) * XPCollageGridVerticalStepSize;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5f]; 
    [view setBounds:CGRectMake(view.bounds.origin.x, view.bounds.origin.y, correctWidth, correctHeight)];
    //[view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, correctWidth, correctHeight)];
    [UIView commitAnimations];
} 
```

它使照片大小四舍五入；66 的宽度将四舍五入为 50、178 到 200 等。当我使用 setFrame 方法时它工作正常，但因为我也使用旋转我想使用 setBounds。

当我使用 setBounds 时，视图将调整大小，但不是调整为像 300 这样的舍入数字，而是将其调整为随机的 311.23。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:32:34.547

尝试使用类似的东西：

```
// see the values here
NSLog(@"%f", correctWidth);
NSLog(@"%f", correctHeight);
view.frame = CGRectMake(view.bounds.origin.x, view.bounds.origin.y, correctWidth, correctHeight);
// see the values given
NSLog(@"%f", view.frame.size.width);
NSLog(@"%f", view.frame.size.height); 
```

只是一个想法，不确定它是否可行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:10:01.280

答案是我必须使用

```
[view setTransform:CGAffineTransformIdentity]; 
```

现在它使用已经“使用”的矩阵并将其与它相乘。

```
 CGFloat correctWidth = roundf(_lastScale*_lastWidth/XPCollageGridHorizontalStepSize) * XPCollageGridHorizontalStepSize;
CGFloat correctHeight = roundf(_lastScale*_lastHeight/XPCollageGridVerticalStepSize) * XPCollageGridVerticalStepSize;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5f]; 
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
[view setTransform:CGAffineTransformIdentity]; //!!this line is added!
[view setBounds:CGRectMake(0, 0, correctWidth, correctHeight)];

[UIView commitAnimations]; 
```

# php - MySql - bigints、php 和自动字符串/整数转换触发器

> ID：10026853
> 
> 赞同：0
> 
> 时间：2012-04-05T10:26:01.407
> 
> 标签：php, mysql, string, bigint

我昨天问了一个关于 bigints 的问题，得到了很好的回答。但是，我一直在观察一些奇怪的行为，并想了解发生了什么。

在我的 php 中，我有一个数组，我将其发送回使用它的 javascript Web 客户端程序。

在 php

```
 sendBack = null;
    sendBack[0]['TimeStamp'] = $Time; // A bigint got from a mysql table milliseconds from 1970
    sendBack[0]['Text'] = $Message; // A varchar message got back from mysql
    // I am guessing at this point you have worked out this is a text-chatroom thing going on
    sendBack[1]['TimeStamp'] = 0; // A zero indicates an admin issue - note its an int but a small one
    sendBack[1]['Text'] = $MessageAdmin;

    // And I pack it up to send back
    echo json_encode($sendBack); 
```

在 js 中，我将其解压缩以使用：

```
 var json = eval('(' + data + ')'); 
```

问题是，js 中的 0 索引时间戳被视为字符串，但索引 1 时间戳被视为 int。

从教育的角度来看，有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:32:05.270

我相信使用 PHP 从数据库返回的值始终是字符串。为了转换您的零索引时间戳，您需要执行以下操作：

```
sendBack[0]['TimeStamp'] = parseInt($Time, 10); 
```

这会将其转换为整数值（base-10）。

显然 1-index 时间戳被直接设置为零，因此它作为 int 返回的原因。

# c# - 以编程方式读取可调用的 dll 函数

> ID：10026854
> 
> 赞同：1
> 
> 时间：2012-04-05T10:26:12.570
> 
> 标签：c#, dllimport, kernel32

我的项目需要检查 .c 和 .dll 文件。它结合这些信息来确定它应该调用什么，然后调用它。

我需要检查 dll 以找出哪个 dll 具有哪个功能。到目前为止，我已经将 dll 映射到内存而不初始化它。现在我需要将标题映射到某些东西，以便我可以读出其中包含可调用名称的部分。

我怎样才能做到这一点？这是到目前为止的代码：

```
 [DllImport("kernel32.dll")]
    static extern IntPtr LoadLibraryEx(string lpFileName, IntPtr hReservedNull, LoadLibraryFlags dwFlags);

    public static string[] GetFKTNames(string dll)
    {
        IntPtr lib = LoadLibraryEx(dll, IntPtr.Zero, LoadLibraryFlags.DONT_RESOLVE_DLL_REFERENCES);

        //INDICATES WHAT I WANT TO DO, BUT DOES NOT WORk
        //Header header = GetHeader(lib);
        //Unload(lib);
        //return header.Names;
} 
```

编辑＃2：

我取得了一点进步，今天放弃了……德国有 4 天的空闲时间……

我不完全确定这种编组是否正确 - 我无法测试它。我很想读一本关于这个主题的书——所以如果你知道一本解释标题如何工作以及有哪些不同标题的好书，请发表评论。

```
 private static List<string> ListDLLFunctions(string sADllName)
    {
        List<string> names = new List<string>();
        IntPtr LoadedImage = LoadLibraryEx(sADllName, IntPtr.Zero, LoadLibraryFlags.DONT_RESOLVE_DLL_REFERENCES);

        IMAGE_NT_HEADERS header = (IMAGE_NT_HEADERS) Marshal.PtrToStructure(libPtr, typeof(IMAGE_NT_HEADERS));

        //    ImageExportDirectory = (_IMAGE_EXPORT_DIRECTORY*)
        //        ImageDirectoryEntryToData(LoadedImage.MappedAddress,
        //        false, IMAGE_DIRECTORY_ENTRY_EXPORT, &cDirSize);
        //    if (ImageExportDirectory != NULL)
        //    {
        //        dNameRVAs = (DWORD *)ImageRvaToVa(LoadedImage.FileHeader, 
        //            LoadedImage.MappedAddress,
        //        ImageExportDirectory->AddressOfNames, NULL);
        //        for(size_t i = 0; i < ImageExportDirectory->NumberOfNames; i++)
        //        {
        //            sName = (char *)ImageRvaToVa(LoadedImage.FileHeader, 
        //                    LoadedImage.MappedAddress,
        //                   dNameRVAs[i], NULL);
        //         slListOfDllFunctions.push_back(sName);
        //        }
        //    }
        FreeLibrary(LoadedImage);
        return names;
    }

    static void Main(string[] args)
    {
        List<string> names = ListDLLFunctions("KERNEL32.DLL");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:02:12.873

没有可以为您完成的“一次呼叫”功能。您必须加载 dll 并在导出表中查找名称。

[有一个帖子，其中包含一些代码可以用 c++ 完成](https://stackoverflow.com/questions/4353116/listing-the-exported-functions-of-a-dll)- 也许您可以尝试将其移植到 c#

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:30:02.777

不是来自代码，而是来自我通常使用的控制台

[DumpBin](http://rogerkar.blogspot.it/2009/06/dump-dll-exports.html)实用程序查看 Dll 的导出。

我认为您可以使用该工具`Process.Start(..)`并解析其输出以获得所需的信息。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T15:54:22.910

我为我的用例解决了这个问题：

我将库加载到内存中，将其复制到字节数组中，然后使用 PE 信息对其进行调查。

这个主题有几个有用的资源对我有很大帮助：

*   [c# 相关结构的导入示例](http://www.justlogged.com/Question/1/4606628/c49886c7b7ab8d3a94352861a4d9f457)
*   [关于PE格式的msdn文章](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)
*   [zotteljedi 关于 PE 格式的文章](http://www.zotteljedi.de/pub/pe.txt)
*   [nunu brito 关于 PE 格式的文章](http://nunobrito1981.blogspot.com/2010/07/reading-file-version-from-windows-exe.html)
*   [simon Cooper 关于 PE 格式的文章](http://www.simple-talk.com/community/blogs/simonc/archive/2011/03/15/100802.aspx)
*   [joachim bauch 关于加载 dll 的文章](http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/)

回想起来，我知道如何使用其他方法来获取我的信息。我写的课程非常适合学习 PE 和探索一些 dll，如果你想了解 PE 的工作原理，我建议重写它。

这是课程：

```
public class DLLHelper
{
    private byte[] dllInMemory;
    private UInt32 PESizeOfImage;
    private UInt32 VA_PE;

    [DllImport("kernel32.dll")]
    static public extern IntPtr LoadLibraryEx(string lpFileName, IntPtr hReservedNull, LoadLibraryFlags dwFlags);

    [DllImport("kernel32.dll")]
    static public extern bool FreeLibrary(IntPtr hModule);

    public enum LoadLibraryFlags : uint
    {
        DONT_RESOLVE_DLL_REFERENCES = 0x00000001,
        LOAD_IGNORE_CODE_AUTHZ_LEVEL = 0x00000010,
        LOAD_LIBRARY_AS_DATAFILE = 0x00000002,
        LOAD_LIBRARY_AS_DATAFILE_EXCLUSIVE = 0x00000040,
        LOAD_LIBRARY_AS_IMAGE_RESOURCE = 0x00000020,
        LOAD_WITH_ALTERED_SEARCH_PATH = 0x00000008
    }

    public DLLHelper(string dllpath)
    {
        PESizeOfImage = GetDllSizeInMemory(dllpath);
        dllInMemory = GetDLLCopy(dllpath, PESizeOfImage);
        UInt32 VA_p_PE = 0x3C;
        VA_PE = Get4ByteFromLocation(VA_p_PE, dllInMemory);
    }

    private byte[] GetDLLCopy(string dllpath, uint PESizeOfImage)
    {
        IntPtr libPtr = LoadLibraryEx(dllpath, IntPtr.Zero, LoadLibraryFlags.DONT_RESOLVE_DLL_REFERENCES);
        byte[] dllInMemory = new byte[PESizeOfImage];
        Marshal.Copy(libPtr, dllInMemory, 0, (int)PESizeOfImage);
        FreeLibrary(libPtr);
        return dllInMemory;
    }

    private UInt32 GetDllSizeInMemory(string dllpath)
    {
        byte[] dllpreload = File.ReadAllBytes(dllpath);
        UInt32 pp_PE = 0x3C;
        UInt32 p_PE = Get4ByteFromLocation(pp_PE, dllpreload);
        UInt32 p_PEOPTIONALHEADER = p_PE + 0x18;
        UInt32 p_PESizeOfImage = p_PEOPTIONALHEADER + 0x38;
        return Get4ByteFromLocation(p_PESizeOfImage, dllpreload);
    }

    public void DumpToFile(String filename)
    {
        File.WriteAllBytes(filename, dllInMemory);
    }

    public string GetDLLName()
    {
        UInt32 VAExport = GetVAExport(VA_PE, dllInMemory);
        UInt32 VAName = GetVAName(VAExport, dllInMemory);
        String Name = GetString(VAName, dllInMemory);
        return Name;
    }

    public List<String> GetFunctionNames()
    {
        List<String> fkts = new List<String>();
        UInt32 VAExport = GetVAExport(VA_PE, dllInMemory);
        UInt32 VA_p_firstFKT = GetVA_p_firstFKT(VAExport, dllInMemory);
        UInt32 VA_p_lastFKT = GetVA_p_lastFKT(VAExport, dllInMemory);
        for (UInt32 VA_p_fkt = VA_p_firstFKT; VA_p_fkt <= VA_p_lastFKT; VA_p_fkt += sizeof(UInt32))
        {
            UInt32 VA_fkt = Get4ByteFromLocation(VA_p_fkt, dllInMemory);
            fkts.Add(GetString(VA_fkt, dllInMemory));
        }
        return fkts;
    }

    private UInt32 GetVA_p_lastFKT(UInt32 VAExport, byte[] dllInMemory)
    {
        UInt32 first = GetVA_p_firstFKT(VAExport, dllInMemory);
        UInt32 count = GetfktCount(VAExport, dllInMemory);
        UInt32 last = first + (count - 1) * sizeof(UInt32);
        return last;
    }

    private UInt32 GetfktCount(UInt32 VAExport, byte[] dllInMemory)
    {
        UInt32 RVA_Count = 0x14;
        UInt32 VA_Count = VAExport + RVA_Count;
        return Get4ByteFromLocation(VA_Count, dllInMemory);
    }

    private UInt32 GetVA_p_firstFKT(UInt32 VAExport, byte[] dllInMemory)
    {
        UInt32 RVA_p_FIRST = 0x20;
        UInt32 VA_p_FIRST = VAExport + RVA_p_FIRST;
        return Get4ByteFromLocation(VA_p_FIRST, dllInMemory);
    }

    private UInt32 GetVAName(UInt32 VAExport, byte[] dllInMemory)
    {
        UInt32 RVA_p_NAME = 0x0C;
        UInt32 VA_p_NAME = VAExport + RVA_p_NAME;
        return Get4ByteFromLocation(VA_p_NAME, dllInMemory);
    }

    private UInt32 GetVAExport(UInt32 VAPE, byte[] dllInMemory)
    {
        UInt32 RVA_p_EXPORT = 0x78;
        UInt32 VA_p_EXPORT = VAPE + RVA_p_EXPORT;
        return Get4ByteFromLocation(VA_p_EXPORT, dllInMemory);
    }

   string GetString(UInt32 location, byte[] dll)
    {
        int length = 0;
        while (dll[location + length] != 0x00)
        {
            length++;
        }
        if (location > int.MaxValue) throw new Exception("uncastable");
        return Encoding.UTF8.GetString(dll, (int)location, length);
    }

   private UInt32 Get4ByteFromLocation(UInt32 location, byte[] dll)
   {
       if (!(BitConverter.IsLittleEndian))
       {
           byte[] partial = GetByteSubset(4, location, dll);
           Array.Reverse(partial);
           return BitConverter.ToUInt32(partial, 0);
       }
       return BitConverter.ToUInt32(dll, (int)location);
   }

   private byte[] GetByteSubset(int size, UInt32 location, byte[] dll)
   {
       byte[] val = new byte[size];
       for (int i = 0; i < size; i++)
       {
           val[i] = dll[location + i];
       }
       return val;
   }
} 
```

# java - 解析 JSON 并将它们保存在 SQLite 数据库中

> ID：10026855
> 
> 赞同：12
> 
> 时间：2012-04-05T10:26:19.893
> 
> 标签：java, android, json

我曾经有过这种简单的 JSON 数据，我可以成功地解析属性并将它们保存到 SQLite 数据库中。

```
[
  {
  "project_title" : " ",
  "organization_title" : " ",
  "website": "",
  "address": "",
  "keyword" : "",
  "short_code" : "",
  "project_description" : "",
  "smallImageUrl" : "",
  "bigImageUrl" : "",
  "price" : "",
  "country" : "",
  "donationAmount" : "",
  "categories" : "",
  "campaign_id" : "",
  "currency_isoname": "",
  "paypal_email" : "",
  "elv_available" : ""
  }
] 
```

但现在我有了这个稍微复杂一点的 JSON 文件：

```
[
  {
    "location": {
      "deleted_at": "null",
      "documentary_video_length": "81",
      "id": "15",
      "latitude": "52.4134145988286",
      "longitude": "13.0904620846177",
      "position": "5",
      "updated_at": "2011-08-26T15:30:27+02:00",
      "name": "Glienicker Br\u00fccke",
      "text": "",
      "documentary_video_url": "",
      "documentary_thumbnail_url": "",
      "audio_text_url": "",
      "footages": [
        {
          "id": "31",
          "latitude": "52.4134145988286",
          "longitude": "13.0904620846177",
          "position": "12",
          "name": "Glienicker Br\u00fccke 1933",
          "text": "sdcs",
          "thumbnail_url": "",
          "video_url": "",
          "video_length": "2",
          "time_period": {
            "id": "24",
            "name": "1933"
          }
        },
        {
          "id": "32",
          "latitude": "52.4134145988286",
          "longitude": "13.0904620846177",
          "position": "12",
          "name": "Glienicker Br\u00fccke 1985",
          "text": "fvd",
          "thumbnail_url": "",
          "video_url": "",
          "video_length": 35,
          "time_period": {
            "id": 30,
            "name": "1985"
          }
        },
        {
          "id": "33",
          "latitude": "52.4134145988286",
          "longitude": "13.0904620846177",
          "position": "12",
          "name": "Glienicker Br\u00fccke 1989",
          "text": "fghg",
          "thumbnail_url": "",
          "video_url": "",
          "video_length": "41",
          "time_period": {
            "id": "12",
            "name": "1989"
          }
        }
      ]
    }
  }
] 
```

这些是我用来解析 JSON 并将它们的属性保存到 SQLite 数据库中的类。

**IntentService 类**

```
public class Sync extends IntentService {

    public Sync() {
        super("Sync");
    }
    @Override
    protected void onHandleIntent(Intent intent) {
        Database.OpenHelper dbhelper = new Database.OpenHelper(getBaseContext());
        SQLiteDatabase db = dbhelper.getWritableDatabase();
        DefaultHttpClient httpClient = new DefaultHttpClient();
        db.beginTransaction();
        HttpGet request = new HttpGet(
                "https://....");
        try {
            HttpResponse response = httpClient.execute(request);
            if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                InputStream instream = response.getEntity().getContent();
                BufferedReader r = new BufferedReader(new InputStreamReader(
                        instream, "UTF-8"), 8000);
                StringBuilder total = new StringBuilder();
                String line;
                while ((line = r.readLine()) != null) {
                    total.append(line);
                }
                instream.close();
                String bufstring = total.toString();
                JSONArray arr = new JSONArray(bufstring);
                Database.Tables tab = Database.Tables.AllTables
                        .get(Database.Project.NAME);
                tab.DeleteAll(db);
                for (int i = 0; i < arr.length(); i++) {
                    tab.InsertJSON(db, (JSONObject) arr.get(i));
                }
                db.setTransactionSuccessful();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        db.endTransaction();
        db.close();
        getContentResolver().notifyChange(
                Uri.withAppendedPath(Provider.CONTENT_URI,
                        Database.Project.NAME), null);

    }

} 
```

**SQLite 数据库类**

```
public class Database {

    final OpenHelper openHelper;
    static final String DATABASE_NAME = "mydb";
    static final int DATABASE_VERSION = 6;

    public Database(Context context) throws Exception {
        openHelper = new OpenHelper(context);
    }

    public void Destroy() {
        openHelper.close();
    }

    public static enum ColumnsTypes {
        integer, varchar, guid, datetime, numeric
    };

    static final String COLLATE = "COLLATE LOCALIZED";
    static final String EMPTY = "";

    public static interface Project {
        public static final String NAME = "Project";
        public static String C_PROJECTTITLE = "project_title";
        public static String C_ORGANIZATIONTITLE = "organization_title";
        public static String C_WEBSITE = "website";
        public static String C_ADDRESS = "address";
        public static String C_KEYWORD = "keyword";
        public static String C_SHORTCODE = "short_code";
        public static String C_PROJECTDESCRIPTION = "project_description";
        public static String C_SMALLIMAGE = "smallImageUrl";
        public static String C_BIGIMAGE = "bigImageUrl";
        public static String C_PRICE = "price";
        public static String C_COUNTRY = "country";
        public static String C_DONATIONAMOUNT = "donationAmount";
        public static String C_CATEGORIES = "categories";
        public static String C_CAMPAIGNID = "campaign_id";
        public static String C_PAYPALEMAIL = "paypal_email";
        public static String C_ELVAVAILABLE = "elv_available";
        public static String C_CURRENCY = "currency_isoname";

        public final static String[] C = new String[] { C_PROJECTTITLE,
                C_ORGANIZATIONTITLE, C_WEBSITE, C_ADDRESS, C_KEYWORD, C_SHORTCODE,
                C_PROJECTDESCRIPTION, C_SMALLIMAGE, C_BIGIMAGE, C_PRICE,
                C_COUNTRY, C_DONATIONAMOUNT, C_CATEGORIES, C_CAMPAIGNID, C_PAYPALEMAIL, C_ELVAVAILABLE, C_CURRENCY };
        public final static ColumnsTypes[] CT = new ColumnsTypes[] {
                ColumnsTypes.varchar, ColumnsTypes.varchar,
                ColumnsTypes.varchar, ColumnsTypes.varchar,
                ColumnsTypes.varchar, ColumnsTypes.varchar,
                ColumnsTypes.varchar, ColumnsTypes.varchar,
                ColumnsTypes.varchar,ColumnsTypes.varchar, ColumnsTypes.varchar,
                ColumnsTypes.varchar,ColumnsTypes.varchar,
                ColumnsTypes.varchar,ColumnsTypes.varchar, ColumnsTypes.varchar, ColumnsTypes.varchar};
        public final static boolean[] CN = new boolean[] { false, false, false,
                false, false, false, false, false, false, false, false, false, false, false, false, false,false };
        public final static String[] CS = new String[] { COLLATE, COLLATE,
                COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE, COLLATE };
    }

    public static class Tables {
        String[] columns = null;
        ColumnsTypes[] columnsTypes = null;
        String[] columnsSpecials = null;
        String name = null;
        boolean[] columnsNullable = null;

        Tables(String name, String[] columns, ColumnsTypes[] columnsTypes,
                String[] columnsSpecials, boolean[] columnsNullable) {
            this.name = name;
            this.columns = columns;
            this.columnsTypes = columnsTypes;
            this.columnsSpecials = columnsSpecials;
            this.columnsNullable = columnsNullable;
        }

        public String DropStatment() {
            return "DROP TABLE IF EXISTS " + name;
        }

        public void DeleteAll(SQLiteDatabase db) {
            db.delete(name, null,null);
        }

        public long InsertJSON(SQLiteDatabase db, JSONObject obj)
                throws JSONException {
            ContentValues vals = new ContentValues();
            for (String col : columns) {
                vals.put(col, obj.getString(col));
            }
            return db.insert(name, null, vals);
        }

        public String CreateStatment() {
            StringBuilder sb = new StringBuilder("CREATE TABLE ");
            sb.append(name);
            sb.append(" ([");
            for (int i = 0; i < columns.length; i++) {
                sb.append(columns[i]);
                sb.append("] ");
                sb.append(columnsTypes[i].name());
                sb.append(' ');
                sb.append(columnsSpecials[i]);
                if (!columnsNullable[i])
                    sb.append(" NOT NULL ");
                sb.append(", [");
            }
            sb.append("_id] INTEGER PRIMARY KEY AUTOINCREMENT);");
            return sb.toString();
        }

        public final static Map<String, Tables> AllTables;
        static {
            HashMap<String, Tables> aMap = new HashMap<String, Tables>();
            aMap.put(Project.NAME, new Tables(Project.NAME, Project.C,
                    Project.CT, Project.CS, Project.CN));
            AllTables = Collections.unmodifiableMap(aMap);
        }
    }

    public static class OpenHelper extends SQLiteOpenHelper {

        public OpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            try {
                for (Tables table : Tables.AllTables.values()) {
                    String create = table.CreateStatment();
                    db.execSQL(create);
                }
            } catch (Exception e) {
                Log.e("Exception", e.toString());
            }
        }

        public OpenHelper Recreate() {
            onUpgrade(getWritableDatabase(), 1, 2);
            return this;
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            for (Tables table : Tables.AllTables.values()) {
                db.execSQL(table.DropStatment());
            }
            onCreate(db);
        }

    } 
```

}

**内容提供者类**

```
public class Provider extends ContentProvider {

    @Override
    public int delete(Uri arg0, String arg1, String[] arg2) {
        return 0;
    }

    private static final int PROJECTS = 1;
    private static final int PROJECT = 2;
    public static final String PROJECTS_MIME_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
            + "/Project";
    public static final String PROJECT_MIME_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
            + "/Project";
    public static final String AUTHORITY = "spendino.de";
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY);
    static final UriMatcher matcher = new UriMatcher(UriMatcher.NO_MATCH);
    static final HashMap<String, String> map = new HashMap<String, String>();
    static {
        matcher.addURI(AUTHORITY, "Project", PROJECTS);
        matcher.addURI(AUTHORITY, "Project/#", PROJECT);
        map.put(BaseColumns._ID, BaseColumns._ID);
        map.put(Database.Project.C_BIGIMAGE, Database.Project.C_BIGIMAGE);
        map.put(Database.Project.C_COUNTRY, Database.Project.C_COUNTRY);
        map.put(Database.Project.C_KEYWORD, Database.Project.C_KEYWORD);
        map.put(Database.Project.C_ORGANIZATIONTITLE,
                Database.Project.C_ORGANIZATIONTITLE);
        map.put(Database.Project.C_PRICE, Database.Project.C_PRICE);
        map.put(Database.Project.C_PROJECTDESCRIPTION,
                Database.Project.C_PROJECTDESCRIPTION);
        map.put(Database.Project.C_PROJECTTITLE,
                Database.Project.C_PROJECTTITLE);
        map.put(Database.Project.C_SHORTCODE, Database.Project.C_SHORTCODE);
        map.put(Database.Project.C_SMALLIMAGE, Database.Project.C_SMALLIMAGE);
        map.put(Database.Project.C_DONATIONAMOUNT, Database.Project.C_DONATIONAMOUNT);
        map.put(Database.Project.C_WEBSITE, Database.Project.C_WEBSITE);
        map.put(Database.Project.C_ADDRESS, Database.Project.C_ADDRESS);
        map.put(Database.Project.C_CATEGORIES, Database.Project.C_CATEGORIES);
        map.put(Database.Project.C_CAMPAIGNID, Database.Project.C_CAMPAIGNID);
        map.put(Database.Project.C_PAYPALEMAIL, Database.Project.C_PAYPALEMAIL);
        map.put(Database.Project.C_ELVAVAILABLE, Database.Project.C_ELVAVAILABLE);
        map.put(Database.Project.C_CURRENCY, Database.Project.C_CURRENCY);
    }

    @Override
    public String getType(Uri uri) {
        switch (matcher.match(uri)) {
        case PROJECTS:
            return PROJECTS_MIME_TYPE;
        case PROJECT:
            return PROJECT_MIME_TYPE;
        default:
            throw new IllegalArgumentException("Unknown URL " + uri);
        }
    }

    @Override
    public Uri insert(Uri arg0, ContentValues arg1) {
        // TODO Auto-generated method stub
        return null;
    }

    private Database.OpenHelper mDB;

    @Override
    public boolean onCreate() {
        try {
            mDB = new Database.OpenHelper(getContext());
        } catch (Exception e) {
            Log.e("Exception", e.getLocalizedMessage());
            return false;
        }
        return true;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
        switch (matcher.match(uri)) {
        case PROJECTS:
            String table = uri.getPathSegments().get(0);
            builder.setTables(table);
            break;
        case PROJECT:
            table = uri.getPathSegments().get(0);
            builder.setTables(table);
            selection = "_id=?";
            selectionArgs = new String[] { uri.getPathSegments().get(1) };
            break;
        default:
            throw new IllegalArgumentException("Unknown URL " + uri);
        }
        builder.setProjectionMap(map);

        Cursor cursor = builder.query(mDB.getReadableDatabase(), projection, selection,
                selectionArgs, null, null, sortOrder);

        if (cursor == null) {
            return null;
        }
        cursor.setNotificationUri(getContext().getContentResolver(), uri);
        return cursor;
    }

     public int update(Uri uri, ContentValues cv, String selection, String[] selectionArgs) {
         String table = null;
         SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
        switch (matcher.match(uri)) {
         case PROJECTS:
                 table = uri.getPathSegments().get(0);
                 builder.setTables(table);
                 break;
         case PROJECT:
                 table = uri.getPathSegments().get(0);
                 builder.setTables(table);
                 selection = "_id=?";
                 selectionArgs = new String[] { uri.getPathSegments().get(1) };
                 break;
         default:
                 throw new IllegalArgumentException("Unknown URL " + uri);
         }
         return mDB.getWritableDatabase().update(table, cv, selection, selectionArgs);
 }

} 
```

为了使新的 JSON 文件被解析并保存到 SQLite 数据库中，我需要对上述类进行哪些更改？我在这里发言是因为我的旧 JSON 文件上没有数组，但我想重新使用我已经拥有的类。我知道我需要根据我的 SQLite 数据库和提供程序类上的 JSON 属性更改列名并自定义字符串

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T22:15:58.997

您可以使用[Gson](http://code.google.com/p/google-gson/)或[Jackson](http://jackson.codehaus.org/)。这些库允许您解析/生成 JSON 输入/输出，轻松构建您的类“bean”。

例如在 Gson 中，如果你有一个名为 Car 的类以这种方式构建：

```
class Car{
  int wheels;
  String plate;
} 
```

...并且您想解析一系列汽车，您可以通过这种方式轻松地扩充您的 JSON：

```
Gson gson = new Gson();
List<Car> cars = gson.fromJson(input, new TypeToken<List<Car>>(){}.getType()); 
```

非常酷的事情是它能够理解你已经包含数组并且可以毫无问题地解析它（我指的是你的输入）。

干杯，西蒙娜

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T11:45:39.177

[试试 GSON -](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

并尝试更改您的代码设计，希望对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T21:29:24.537

如果您的问题是，如何解析新的 JSON 字符串，这很简单......

要解析 JSON 数组（包含在 中的任何内容`[]`），您可以使用...

```
JSONArray jsonArray = new JSONArray(String json); 
```

并解析 JSON 对象（包含在 中的任何内容`{}`），您将使用...

```
JSONObject jsonObject = new JSONObject(String json); 
```

现在，要解析您在上面指定的 JSON 字符串，它类似于...

```
JSONArray jsonArray = new JSONArray(String input);
JSONObject location = jsonArray.getJSONObject(0).getJSONObject("location"); 
```

获取`footages`元素...

```
JSONArray footages = location.getJSONArray("footages"); 
```

然后你可以遍历`footages`数组并进行处理。

就将数据存储到数据库而言，最好将其`footages`作为 JSON 字符串存储在数据库中，因为它是一个 JSON 数组。

# wpf - 如何使 UI 元素加载而不冻结？(WPF)

> ID：10026858
> 
> 赞同：0
> 
> 时间：2012-04-05T10:26:45.010
> 
> 标签：wpf, user-interface, freeze

我有一个树视图和一个文本框。当我在文本框中输入时，它会实时更新树视图（根据我输入的内容过滤并匹配树视图中的对象）。

问题是当我在框中输入时它开始有点冻结。IE。而树视图正在更新文本框冻结。我已将填充树视图的逻辑放在另一个线程中，希望这会使它运行得更快一些——它确实做到了，但还不够。我相信是实际的 UI 更新导致响应能力下降。

有什么方法可以解决这个问题？是否可以在不同的线程中处理不同的 UI 元素（在这种情况下是树视图和文本框）——而不仅仅是现在的逻辑？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:03:46.360

您的问题是只存在一个 UI 线程！

您的问题的一个可能解决方案是在用户进行文本输入后几毫秒后过滤树视图。

另一种可能性是在单独的任务中进行过滤，并重新分配 Treview 的结果。

我希望这可以帮助您解决问题。

# c# - RegisterStartupScript 是否会增加页面大小

> ID：10026862
> 
> 赞同：3
> 
> 时间：2012-04-05T10:26:48.200
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我在页面中使用此代码：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:Timer ID="timer" Interval="4000" runat="server" OnTick="timer_Tick" />

<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Panel ID="pnlAlarm" runat="server" CssClass="pnlAlarm" ClientIDMode="Static">
            <div id="Alarm">
                <asp:Label ID="lblContent" runat="server" Text="Updating" CssClass="AlarmLogo"></asp:Label>
                    ClientIDMode="Static" />
            </div>
        </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="timer" />
    </Triggers>
</asp:UpdatePanel> 
```

在后面的代码中，我使用了这个简单的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        Session["nima"] = 1;
    }
}
protected void timer_Tick(object sender, EventArgs e)
{
    int i = int.Parse(Session["nima"].ToString());
    if (i==3)
    {
        lblContent.Text = i.ToString();
        ScriptManager.RegisterStartupScript(this, GetType(), "AlarmMessage", "$('#pnlAlarm').slideToggle();", true);
        Session["nima"] = 0;
    }
    else
    {
        i = i + 1;
        Session["nima"] = i;
    }
} 
```

我想知道每次使用`RegisterStartupScript`，`$('#pnlAlarm').slideToggle();`添加到我的页面并增加我的页面大小？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:03:40.410

根据定义，该方法将：

> 注册每次发生异步回发时都包含的启动脚本块。

所以是的，它将被包含在内，因此会增加您的页面大小。

[msdn ScriptManager.RegisterStartupScript 方法](http://msdn.microsoft.com/en-us/library/bb310408.aspx)

# c - 使用 c 以编程方式更改正在运行的外部进程的 uid 和 gid

> ID：10026866
> 
> 赞同：1
> 
> 时间：2012-04-05T10:27:09.130
> 
> 标签：c, ios, macos, unix, process

如何使用 c以编程方式更改正在运行的**外部进程的 uid 和 gid？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:35:30.100

一个小例子，其中包括使用现有用户和组名更改 uid 和 gid 的可能性：

```
#include <sys/types.h>
#include <unistd.h>
#include <pwd.h>
#include <grp.h>

// .. snip

// find user and group
struct passwd * pwd = getpwnam("new_user");
struct group * grp = getgrnam("new_group");

// not included : error checking

uid_t uid = pwd->pw_uid;
gid_t gid = grp->gr_gid;

setgid(gid);
setuid(uid); 
```

**编辑**：这仅适用于当前进程

# asp.net - asp.net 登录控制 - 记住我

> ID：10026868
> 
> 赞同：0
> 
> 时间：2012-04-05T10:27:16.697
> 
> 标签：asp.net, webforms

当用户在登录控件中使用“记住我”选项时，它显然会在某处存储一个 cookie，并且登录会自动进行。

不幸的是，我使用登录控件“登录”事件来设置其他对象。当用户使用“记住我”功能进入时，他们可以绕过此事件。

我猫抓到了另一个事件吗？

如果做不到这一点，是否有一种安全的方法可以随时查询会员系统以查看谁已登录？然后我可以测试自己。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:58:50.107

我认为您在 LoggedIn 之后找不到任何其他会员事件，但是您可以从 Page Life Cycle 获取事件。

我想您必须在成功登录后重定向到某个默认页面。如果登录成功，您可以尝试以下代码来获取登录用户名。

```
User.Identity.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:48:24.103

我认为您可以创建`HTTP Handler`或使用`Application Events`来检查用户是否经过身份验证并设置其他对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:51:57.983

您可以与`User.Identity.Name`

```
if (Request.Cookies["myCookie"] != null)
        {
            HttpCookie cookie = Request.Cookies.Get("myCookie");
            String UserName = cookie.Values["username"];
            this.Login1.RememberMeSet = !(String.IsNullOrEmpty(UserName));
        } 
```

# iphone - iPhone 应用中的 Google 广告

> ID：10026872
> 
> 赞同：-3
> 
> 时间：2012-04-05T10:27:40.900
> 
> 标签：iphone, ads

我想将 Google 广告集成到我的 iPhone 原生应用中。那么，您能否给我们一些程序，以便我可以进行一些演示测试（不是付费测试）。

我用这个检查了

[通过在您的移动应用上销售广告来增加收入](http://www.admob.com/home/reg_landing/)

请帮助我完成这项工作。

问候， Siddhesh。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:50:09.443

你试过这个

[Admob 集成到您的 iPhone 应用程序中](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-admob-integrate-in-your-application-in-iphone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:33:38.573

如果您指的是 Google Adsense，那么这是行不通的。您不得在移动原生应用程序中包含 google adsense 广告。但更好的是 Apple 的 iAds，它特别适用于 iOS 应用程序。

# android - FB.api('/me') 在 phonegap android 中总是给出错误代码：2500

> ID：10026875
> 
> 赞同：0
> 
> 时间：2012-04-05T10:27:53.620
> 
> 标签：android, facebook, phonegap-plugins

我正在使用 facebook 插件来登录和注销用户，这工作正常。问题是当我使用函数 FB.api('/me') 请求登录用户详细信息时，它总是给出以下错误：

```
 {"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500} 
```

我使用调试模式检查响应的 PluginResult(pr) 和 JSONObject。JSONObject 包含我需要的用户信息，我不知道我做错了什么。

```
 Plz help...... 
```

我的代码：

```
 function login() {
            FB.login(function(response) {
               if (response.session) {
                 console.log('Welcome!  Fetching your information.... ');
                 FB.api('/me', function(response) {
                   console.log('Good to see you, ' + JSON.stringify(response) + '.');
                 });
               } else {
                 console.log('User cancelled login or did not fully authorize.');
               }
             },{scope: 'email,user_likes'});
        }

       function logout() {
            FB.logout(function(response) {
                           console.log(localStorage.getItem("user_fb_log_status"));
                           localStorage.setItem("user_fb_log_status","LOGGED_OUT");

                      alert('logged out');
                      });
        }

The above code is working fine to login and logout the user. Below is the code i used to get the user details,

        function me() {
                FB.api('/me', { fields: 'id, name, picture' },  function(response) {
                   if (response.error) {
                   alert(JSON.stringify(response.error));
                   } else {
                   var data = document.getElementById('data');
                   fdata=response.data;
                   console.log("fdata: "+fdata);
                   response.data.forEach(function(item) {
                                         var d = document.createElement('div');
                                         d.innerHTML = "<img src="+item.picture+"/>"+item.name;
                                         data.appendChild(d);
                                         });
                   }
                   });

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:26:38.590

您需要访问令牌来检索比基本用户信息更多的详细信息。检查您是否在 [调试工具](http://developers.facebook.com/tools/debug)中拥有正确的访问令牌，并确保您拥有所有需要权限设置[权限](https://developers.facebook.com/docs/authentication/permissions/)。

将 ConnectPlugin 中“getResponse”方法中的“会话”更改为“authResponse”后问题解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:26:56.583

在我更改 ConnectPlugin.java 中的以下方法后，FB.api 方法对我来说可以很好地获取用户详细信息并将提要发布到 facebook，如下所示。

```
 public JSONObject getResponse() {
    String response = "{" + "\"status\": \""
            + (facebook.isSessionValid() ? "connected" : "unknown") + "\","
            +
            // "\"session\": {" + "\"access_token\": \""
            // + facebook.getAccessToken() + "\"," + "\"expires\": \""
            // + facebook.getAccessExpires() + "\","
            // + "\"session_key\": true," + "\"sig\": \"...\","
            // + "\"uid\": \"" + this.userId + "\"" +

            "\"authResponse\": {" +

            "\"accessToken\": \"" + facebook.getAccessToken() + "\"," +

            "\"expiresIn\": \"" + facebook.getAccessExpires() + "\"," +

            "\"session_key\": true," +

            "\"sig\": \"...\"," +

            "\"userId\": \"" + this.userId + "\"" +

            "}" + "}";

    try {
        return new JSONObject(response);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return new JSONObject();
} 
```

# r - 如何使用 R 在一帧中放置多个图层？

> ID：10026876
> 
> 赞同：1
> 
> 时间：2012-04-05T10:27:54.847
> 
> 标签：r, overlay, layer

我正在使用 R 来绘制地图文件。

```
setwd("c:\\apa\\")
# Load libraries
library("maptools")
library("RColorBrewer")
library("classInt")
library("R2wd")
library("Hmisc")
library("plyr")
library("ggplot2")
library("rgdal")

file.path <- "c:\\apa\\"
file.name <- "apa_planalto_central"
apa <-readShapePoly(paste(file.path,file.name,sep=""))

file.name <- "AUTORIZACAO_09889652011"
auth <-readShapePoly(paste(file.path,file.name,sep=""))

file.name <- "CLIP_HIDROGRAFIA_APA"
hidro <-readShapeLines(paste(file.path,file.name,sep=""))

file.name <- "ferrovias"
ferrovias <-readShapeLines(paste(file.path,file.name,sep=""))

file.name <- "lagos_df"
lagos <-readShapePoly(paste(file.path,file.name,sep=""))

file.name <- "limite_df"
limites <-readShapeLines(paste(file.path,file.name,sep=""))

file.name <- "rodovias"
rodovias <-readShapeLines(paste(file.path,file.name,sep=""))

plot(apa)
plot(...) 
```

我想用一个图绘制所有这些形状（线条和多边形），覆盖所有图层，在一个图上覆盖多个图层。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:58:48.297

您可以使用以下内容：

```
plot(apa)
plot(auth, add=T) 
```

只需`add=T`在`plot()`函数内使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:49:06.123

在 ggplot2 中，您可以堆叠多个几何图形。这将类似于：

```
ggplot(aes(x = x, y = y), data = pointset1) +
  geom_point() +
  geom_polygon(aes(fill = z), data = polyset1) +
  etc 
```

这假设所有数据集都在同一个投影中，都使用列名 x 作为 x 坐标等。请注意，ggplot2 与 data.frames 一起使用，而不是 sp 对象。使用函数 fortify 将 SpatialPolygons 对象转换为 data.frame。

# asp.net - 在 DataGrid 中填充重复的下拉框

> ID：10026880
> 
> 赞同：1
> 
> 时间：2012-04-05T10:28:19.050
> 
> 标签：asp.net, vb.net, datagrid, exception-handling, drop-down-menu

我正在尝试填充在数据网格中重复的 VB.net 下拉框。基本上我有一堆图像，用户需要从下拉列表中选择项目的颜色，以便我可以将其保存在数据库中。

```
Dim DDLPlayColorList = New DropDownList
DDLPlayColorList = dgImages.FindControl("DDLPlayColorList")

Using oConn As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString)
    Using cmd As New SqlCommand("doGetAllPlayColours", oConn)
        cmd.CommandType = CommandType.StoredProcedure
        oConn.Open()
        Using dr As SqlDataReader = cmd.ExecuteReader()
            DDLPlayColorList.DataSource = dr
            DDLPlayColorList.DataTextField = "playColour"
            DDLPlayColorList.DataValueField = "playColour"
            DDLPlayColorList.DataBind()
        End Using
    End Using
End Using 
```

我曾尝试使用 findcontrol 函数找到控件然后绑定它，但它没有任何区别。错误是

> DDLPlayColorList' 不是 'manager_imagecolouring' 的成员。

这是我的数据网格：

```
<asp:DataGrid ID="dgImages" runat="server" Width="300" AutoGenerateColumns="false" ItemStyle-Width="300" ItemStyle-BorderWidth="3px">
    <Columns>
        <asp:TemplateColumn ItemStyle-BackColor="#eaeaea" ItemStyle-Width="100">
            <ItemTemplate>
                <a href="image.aspx?libid=<%#Container.DataItem("id")%>">
                    <asp:Image ID="imgCategoryThumb" CssClass="lightbox-thumb" runat="server" Height="100" Width="100" ImageUrl='<%#Container.DataItem("path")%>' AlternateText="" />
                </a>
                <asp:DropDownList id="DDLPlayColorList" runat="server" CssClass="textfield">
                </asp:DropDownList>
            </itemtemplate>
        </asp:TemplateColumn>
    </Columns>
</asp:DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:26:33.783

尝试这个：

```
Dim DDLPlayColorList As DropDownList = CType(dgImages.FindControl("DDLPlayColorList"), DropDownList)

If DDLPlayColorList IsNot Nothing Then
    Using oConn As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString)
        Using cmd As New SqlCommand("doGetAllPlayColours", oConn)
            cmd.CommandType = CommandType.StoredProcedure
            oConn.Open()
            Using dr As SqlDataReader = cmd.ExecuteReader()
                DDLPlayColorList.DataSource = dr
                DDLPlayColorList.DataTextField = "playColour"
                DDLPlayColorList.DataValueField = "playColour"
                DDLPlayColorList.DataBind()

            End Using
        End Using
    End Using    
End If 
```

在数据绑定时设置多个下拉列表的 ID：

```
private void OnItemDataBound(object sender, DataGridItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        Dim DDLPlayColorList As DropDownList = CType(e.Item.FindControl("DDLPlayColorList"), DropDownList)
        DDLPlayColorList.ID = "DDLPlayColorList" & e.RowIndex.ToString()
    }
} 
```

# javascript - Javascript 中带有 JSON 的 XMLHTTPREQUEST 响应？

> ID：10026891
> 
> 赞同：1
> 
> 时间：2012-04-05T10:28:50.670
> 
> 标签：javascript, json, xbmc

我有问题。我尝试向 Web 服务器 XBMC 发送 JSON 请求。我可以在 Wireshark 中看到 POST 请求已正确发送，响应由 Web 服务器发送，但在 Javascript 中，我无法将 JSON 数据显示在警报中。

```
var xhr_object = null;

   if(window.XMLHttpRequest) // Firefox
      xhr_object = new XMLHttpRequest();
   else if(window.ActiveXObject) // Internet Explorer
      xhr_object = new ActiveXObject("Microsoft.XMLHTTP");
   else { // XMLHttpRequest non supporté par le navigateur
      alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest...");
      return;
   }

   xhr_object.open("POST", "http://"+add+":9000/jsonrpc", false);

   xhr_object.onreadystatechange = function() {
      if(xhr_object.readyState == 4)
      var json = xhr_object.responseText;
         alert(xhr_object.responseType)
         alert("("+json+")");
   }
   xhr_object.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
   var data = '{"jsonrpc": "2.0", "method": "Input.Up", "id": "1"}';
   xhr_object.send(data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:57:38.413

我会建议你使用一些 javascript 框架，例如 jQuery。看看[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)和[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

如果您使用 jQuery 的 ajax 函数，您将不需要编写那么多的 javascript。

# windows-phone-7 - 是否可以从 Mainpage.xaml 页面导航到 App.xaml

> ID：10026893
> 
> 赞同：0
> 
> 时间：2012-04-05T10:28:59.410
> 
> 标签：windows-phone-7, app.xaml

是否可以从 mainpage.xaml 导航到 APP.xaml？据我所知，默认情况下会调用它。它在应用程序启动时调用 Application_Launching()。

谁可以帮我这个事？我想导航到 App.xaml 页面，以便它直接调用automationscript.cs 文件来启动应用程序。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:34:34.733

似乎有一个非常相似的问题，“是否可以从 mainpage.xaml 导航到 APp.xaml”，在这里问：-

[http://forums.create.msdn.com/forums/t/102491.aspx](http://forums.create.msdn.com/forums/t/102491.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:37:32.127

如果你描述你想要达到的目标而不是那么具体，这可能会有所帮助。但是，按照您的问题措辞，答案是*否定*的。

WP7 导航框架围绕页面的概念展开。为了让您的应用程序导航到“xaml”文件，它必须是一个页面（而不是用户控件或其他东西）。您的`app.xaml`文件未描述页面，因此无法导航到该页面。

# hyperlink - Javadoc 链接未格式化

> ID：10026894
> 
> 赞同：1
> 
> 时间：2012-04-05T10:28:59.937
> 
> 标签：hyperlink, formatting, javadoc

我现在几次遇到这个问题。当我编写 javadocs 时，有时我会有很多链接。但是，关于 javadoc 样式指南，我避免总是使用 @link 来引用多个提到的引用，而只使用 @code。好东西：Eclipse 还为我提供了带有 @code 标记的自动完成功能。坏事：当我现在重命名引用时——例如方法——所有@link 引用都将被更新，但@code 引用不会。

我要搜索的内容：@link 的可能性而不突出显示链接或类似@code 之类的东西，当我进行一些重构时，Eclipse 将更新它。

有什么提示吗？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:17:19.753

你可以使用

```
{@linkplain ClassName} 
```

这将在重构更改时更新，但它将以普通文本字体显示，而不以代码字体显示。

# java - 在 Android 中登录 SD 卡

> ID：10026899
> 
> 赞同：0
> 
> 时间：2012-04-05T10:29:46.973
> 
> 标签：java, android, sd-card

我们如何将应用程序操作的日志文件保存在 SD 卡上？

我们应该每天创建一个文件：

*   文件名应具有日期格式
    *   文件名应该是当前日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:33:36.007

**Environment.getExternalStorageDirectory().toString()**使用它来获取 SD 卡的路径，然后获取今天的日期，将其转换为字符串并与 SD 卡路径连接。使用连接的字符串创建一个**File并使用****FileOutputStream**或**FileWriter**写入您的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:34:19.367

在这种情况下，我建议使用 XML 文件。保存和加载数据非常简单。

构建将处理所有 XML 例程的类。每次您想保存活动时，只需在此类中调用适当的方法即可。方法将准备您需要的所有数据，并根据您需要的日期创建文件。

# matlab - 如何使用 MATLAB 围绕不是图像中心点的点旋转图像？

> ID：10026905
> 
> 赞同：4
> 
> 时间：2012-04-05T10:30:17.780
> 
> 标签：matlab, image-processing, rotation

使用MATLAB围绕不是图像中心点的点旋转图像的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T11:02:51.367

相同角度的两次旋转等于一次平移。因此，您可以围绕中心进行旋转，然后平移图像以将您自己的旋转中心置于其旧位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:08:04.247

“旋转”的帮助说：

> ROTATE 围绕指定的原点和方向旋转对象。ROTATE(H,[THETA PHI],ALPHA) 将带有手柄 H 的对象围绕由 2 元素方向矢量 [THETA PHI]（球坐标）描述的轴旋转角度 ALPHA。
> 所有的角度都以度为单位。H 中的句柄必须是相同轴的子级。
> 
> ...
> 
> ROTATE(...,ORIGIN) 使用点 ORIGIN = [x0,y0,y0] 作为旋转中心，而不是图框的中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T13:51:56.047

要围绕原点以外的点旋转：

1.  将要旋转的点平移到原点。例如，如果您想围绕 (3,5) 旋转，您将平移 (-3,-5)。
2.  执行您的旋转。
3.  撤消初始翻译。因此，在我的示例中，您现在将翻译为 (+3,+5)。

# testing - Grails：运行测试应用 grails 卸载 lesscss 插件

> ID：10026908
> 
> 赞同：0
> 
> 时间：2012-04-05T10:30:32.120
> 
> 标签：testing, grails, grails-plugin

我正在使用 Grails 构建应用程序，我遇到了问题......我已经安装了 lesscss 来管理 css，但是每次我尝试使用**test-app**命令测试我的应用程序时，它都会卸载插件。为什么会这样？

```
grails> test-app :integration
| Uninstalled plugin [lesscss]
| Compiling 40 source files 
```

我很困惑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:17:28.090

BuildConfig.groovy 或 application.properties 中可能不再包含插件依赖项。

# python - 如何从大文件快速创建数组？

> ID：10026914
> 
> 赞同：0
> 
> 时间：2012-04-05T10:30:58.557
> 
> 标签：python

我有例子：

```
 for line in IN.readlines():
        line = line.rstrip('\n')
        mas = line.split('\t')
        row = ( int(mas[0]), int(mas[1]), mas[2], mas[3], mas[4] )
        self.inetnums.append(row)
    IN.close() 
```

如果 ffilesize == 120mb，脚本时间 = 10 秒。我可以减少这个时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:32:01.153

去除那个`readlines()`

做就是了

```
for line in IN: 
```

使用`readlines`您从文件中创建所有行的列表，然后访问每一行，您不需要这样做。没有它，for 循环只使用生成器，它每次从文件中返回一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:56:33.833

如果您使用列表理解，您可能会获得一些速度

```
inetnums=[(int(x) for x in line.rstrip('\n').split('\t')) for line in fin] 
```

这是两个不同版本的配置文件信息

```
>>> def foo2():
    fin.seek(0)
    inetnums=[]
    for line in fin:
        line = line.rstrip('\n')
        mas = line.split('\t')
        row = ( int(mas[0]), int(mas[1]), mas[2], mas[3])
        inetnums.append(row)

>>> def foo1():
    fin.seek(0)
    inetnums=[[int(x) for x in line.rstrip('\n').split('\t')] for line in fin]

>>> cProfile.run("foo1()")
         444 function calls in 0.004 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.003    0.003    0.004    0.004 <pyshell#362>:1(foo1)
        1    0.000    0.000    0.004    0.004 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
      220    0.000    0.000    0.000    0.000 {method 'rstrip' of 'str' objects}
        1    0.000    0.000    0.000    0.000 {method 'seek' of 'file' objects}
      220    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}

>>> cProfile.run("foo2()")
         664 function calls in 0.006 CPU seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.005    0.005    0.006    0.006 <pyshell#360>:1(foo2)
        1    0.000    0.000    0.006    0.006 <string>:1(<module>)
      220    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
      220    0.001    0.000    0.001    0.000 {method 'rstrip' of 'str' objects}
        1    0.000    0.000    0.000    0.000 {method 'seek' of 'file' objects}
      220    0.001    0.000    0.001    0.000 {method 'split' of 'str' objects}

>>> 
```

# php - 使用 PHP 从 html 页面中提取特定链接

> ID：10026916
> 
> 赞同：0
> 
> 时间：2012-04-05T10:31:00.447
> 
> 标签：php, regex, curl, preg-match, domdocument

我有一个包含以下链接的 HTML 页面

```
<a class="out" href="www.a.com/hgfgtsdfdffsdfsdf">sdfsssdfddf</a>
<a href="www.a.com/hgfgt">dsfdsf</a>
<a class="menu" href="www.a.com/hgfgt">menu1</a>
<a class="menu" href="www.a.com/hgfgdfg">menu2</a>
<a class="menu" href="www.a.com/hgfgdfg">menu3</a>
<a href="www.a.com/hgfgtssdfdfsdf">sdfsdfddf</a>
<a href="www.a.com/hgfgtsdfsfsdfdf">sdfsdfsddf</a>
<a href="www.a.com/hgfgtsdfsdfsdf">sdfsdfddf</a>
<a class="out" href="www.a.com/hgfgtsdfsdfsdf">sdfsdfddf</a> 
```

我想使用 PHP 将类“菜单”的链接及其标题提取到一个数组中，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:34:09.913

```
preg_match_all('#<a class="menu" href="([^"]+)">([^<]+)</a>#', $content, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:36:14.810

```
$str = '<a class="out" href="www.a.com/hgfgtsdfdffsdfsdf">sdfsssdfddf</a>
<a href="www.a.com/hgfgt">dsfdsf</a>
<a class="menu" href="www.a.com/hgfgt">menu1</a>
<a class="menu" href="www.a.com/hgfgdfg">menu2</a>
<a class="menu" href="www.a.com/hgfgdfg">menu3</a>
<a href="www.a.com/hgfgtssdfdfsdf">sdfsdfddf</a>
<a href="www.a.com/hgfgtsdfsfsdfdf">sdfsdfsddf</a>
<a href="www.a.com/hgfgtsdfsdfsdf">sdfsdfddf</a>
<a class="out" href="www.a.com/hgfgtsdfsdfsdf">sdfsdfddf</a>';

preg_match_all('#<a class="menu" href="([^"]+)">([^<]+)#', $str, $m);

var_dump($m[1], $m[2]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:50:10.297

以下是使用 DOMDocument 和 XPath 的方法：

```
$html = '

<a class="out" href="www.a.com/hgfgtsdfdffsdfsdf">sdfsssdfddf</a>
<a href="www.a.com/hgfgt">dsfdsf</a>
<a class="menu" href="www.a.com/hgfgt">menu1</a>
<a class="menu" href="www.a.com/hgfgdfg">menu2</a>
<a class="menu" href="www.a.com/hgfgdfg">menu3</a>
<a href="www.a.com/hgfgtssdfdfsdf">sdfsdfddf</a>
<a href="www.a.com/hgfgtsdfsfsdfdf">sdfsdfsddf</a>
<a href="www.a.com/hgfgtsdfsdfsdf">sdfsdfddf</a>
<a class="out" href="www.a.com/hgfgtsdfsdfsdf">sdfsdfddf</a>

';

$classname = 'menu'; // class to find

$doc = new DOMDocument();
$doc->loadHTML($html);

$xpath = new DOMXPath($doc);

$result = $xpath->query("//*[contains(@class, '$classname')]");

foreach($result as $elem)
{
    echo "title: " . $elem->nodeValue . "<br />";
    echo "link: " . $elem->getAttribute('href') . "<br />";
} 
```

# visual-studio - 提高调试 IntelliJ Idea 的效率

> ID：10026919
> 
> 赞同：2
> 
> 时间：2012-04-05T10:31:05.980
> 
> 标签：visual-studio, debugging, intellij-idea

我想知道 IDEA 中是否有任何方法将调试器的断点放在调试器刚刚通过的前一行并再次重新运行该场景。因为在调试循环时，让 UI 执行所需的操作以再次处理该情况有点乏味。我认为 Visual Studio 中提供了这样的功能。我试图用谷歌搜索它，但不幸的是我找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:38:45.620

我已经在 IDEA 的错误跟踪器上提交了一个问题，但它的状态更改为不会用此评论修复：

> JVM 不支持此功能。如果没有 JVM 支持，就不可能在 IntelliJ IDEA 中实现它。

[http://youtrack.jetbrains.com/issue/IDEA-84257?projectKey=IDEA](http://youtrack.jetbrains.com/issue/IDEA-84257?projectKey=IDEA)

# php - 由于服务器延迟，文件下载 PHP 脚本不起作用

> ID：10026921
> 
> 赞同：0
> 
> 时间：2012-04-05T10:31:11.153
> 
> 标签：php, download

我有这个代码来下载文件，但是在 sourceforge.net 服务器上，文件开始下载之前有 5 秒的延迟（如果您尝试在浏览器中加载此链接，您可以看到它）。脚本完成后，我的文件大小为零。我怎样才能下载这个文件？提前谢谢！

```
$url = 'http://downloads.sourceforge.net/project/gnucash/gnucash%20%28stable%29/2.4.9/gnucash-2.4.9-setup.exe';
$ch = curl_init($url);
$fp = fopen('/home/content/11/8564211/html/'.substr($url,strrpos($url,'/'),strlen($url)), 'w'); 
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:48:54.257

Sourceforge 使用元刷新标签开始下载，因为 CURLOPT_FOLLOWLOCATION 响应 Location: 标头，它很可能无济于事。

我认为你将不得不做一些 HTML 解析来实现你想要做的事情。你必须找到这一行：

```
<meta http-equiv="refresh" content="5; url=http://downloads.sourceforge.net/project/gnucash/gnucash%20%28stable%29/2.4.9/gnucash-2.4.9-setup.exe?r=&amp;ts=1333621946&amp;use_mirror=switch"> 
```

然后你必须从该行获取 url 并加载它。Sourceforge 可能会为此类下载使用一些基于 cookie 或会话的阻止程序，因此您可能必须对此进行补偿。

我尚未对此进行测试，但看起来这与您必须执行此操作的方式很接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:34:44.490

为了避免 PHP 超时，您可以使用：

```
set_time_limit($hugetimeout); 
```

在你的脚本之前。[您可以在此处](http://php.net/manual/fr/function.set-time-limit.php)阅读更多文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:45:10.423

你可以试试这个：

```
$url = 'http://downloads.sourceforge.net/project/gnucash/gnucash%20%28stable%29/2.4.9/gnucash-2.4.9-setup.exe';
$ch = curl_init($url);
$fp = fopen('/home/content/11/8564211/html/'.substr($url,strrpos($url,'/'),strlen($url)), 'w'); 
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:29:43.147

在下载页面上，有一个直接链接，您可以尝试使用它吗？

# wpf - 在 Xaml 中控制 WPF 动画

> ID：10026922
> 
> 赞同：5
> 
> 时间：2012-04-05T10:31:12.120
> 
> 标签：wpf, animation, storyboard

我定义了 2 个动画来闪烁网格中的单元格值，一个在值增加时，一个在值减小时。

在调试中运行应用程序时，我在输出窗口中看到大量警告，如下所示：-

> 无法执行操作，因为指定的 Storyboard 从未应用于此对象以进行交互式控制。行动='停止'; Storyboard='System.Windows.Media.Animation.Storyboard';

我的动画是通过数据触发器触发的，如下所示：-

![在此处输入图像描述](../Images/24ddf0a04563d773ab468fcf0e135769.png)

故事板如下：

![在此处输入图像描述](../Images/b0cb841501073b51f4384d75f7708af4.png)

鉴于 StopStoryboard 似乎是问题所在，即没有运行需要停止的故事板。另外我的理解是，在 WPF 中启动一个新动画将替换任何已经运行的现有动画。但是，如果我从两个 DataTriggers 中删除 StopStoryboard，我会遇到另一个问题。这次只有 BidDownStory 会触发。我永远不会看到单元格动画蓝色。

有时会发生另一件有趣的事情。如果动画发生在屏幕外（即列不可见）并且我滚动以使列可见，我会看到预期的动画。但是，如果我随后将网格滚动回列在屏幕外，动画将继续运行，但针对网格中的不同列！

如果您能提供解决这些问题的任何帮助，我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T11:10:27.640

您可以尝试这样的事情：

```
<DataTrigger Binding="{Binding Path=RowData.Row.BidUp}" Value="True">
    <DataTrigger.EnterActions>
        <BeginStoryboard Storyboard="{StaticResource AnimateCellBlue}" />
    </DataTrigger.EnterActions>
    <DataTrigger.ExitActions>
        <BeginStoryboard Storyboard="{StaticResource AnimateCellRed}" />
    </DataTrigger.ExitActions>
</DataTrigger> 
```

# mysql - MySql 查询结合来自 2 个表的结果

> ID：10026925
> 
> 赞同：0
> 
> 时间：2012-04-05T10:31:18.007
> 
> 标签：mysql, join

我尝试通过 mysql join 组合来自 2 个表的数据，但我看起来像，我根本没有收到来自第二个表的结果。

表结构#1 (site_hosters);

```
+------------+--------------+--------+
| host_id    | name         | prio   |
+------------+--------------+--------+
| 1          | site.com     | 0      |
+------------+--------------+--------+ 
```

表结构#2 (site_date);

```
+------------+--------------+--------+
| id         | hoster       | page   |
+------------+--------------+--------+
| 1          | site.com     | http:..|
+------------+--------------+--------+ 
```

我试图得到的是像 'id, host_id, name, ....etc' 这样的结果；

当我尝试以下查询时，查询结果中不包含 host_id 和 prio。看起来，通过查询连接完全没有效果。

我的查询：

```
SELECT 
         site.id,
         site.hoster,
         site.page,

FROM site_data as site

INNER JOIN site_hosters hoster
ON site.hoster = hoster.name 
```

我希望有人可以帮助我解决这个问题。

亲切的问候，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:34:11.987

您必须命名要选择的列。添加这样的`site_hosters`列：

```
SELECT 
     site.id,
     site.hoster,
     site.page,
     hoster.host_id,
     hoster.prio
FROM site_data as site
INNER JOIN site_hosters hoster ON site.hoster = hoster.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T10:36:33.490

你可以做

```
SELECT
           site.*,
           hoster.*
FROM site_data as site  
INNER JOIN site_hosters hoster ON site.hoster = hoster.name 
```

这将返回所有字段，但是，您可能只需要类似

`site.id, ste.hoster, site.page, hoster.prio`作为你的领域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:40:19.833

只需在 SELECT 中列出必填字段：

```
SELECT site.id, hoster.host_id, hoster.name, site.hoster, site.page
FROM site_data AS site
INNER JOIN site_hosters AS hoster ON site.hoster = hoster.name 
```

# jquery - jquery获取元素属性值并从中创建变量

> ID：10026928
> 
> 赞同：0
> 
> 时间：2012-04-05T10:31:36.653
> 
> 标签：jquery

任何人都可以帮我解决这个问题。

我正在使用 jquery 调整一些 Flash 对象/嵌入代码的大小以适应浏览器窗口。请参阅下面的 HTML。

**HTML**

```
<div id="prezi">

     <object id="prezi_3453246342644353463435463456435" width="1000" height="800">

          <embed width="1000" height="800" ></embed>

     </object>

</div> 
```

**JQUERY（这个工作）**

```
function preziresize() {

    var $objectId =       $('#prezi_3453246342644353463435463456435'),
        $objectEmbed =    $objectId.find('embed'),
        windowWidth =     $(window).width(),
        windowHeight =    $(window).height();

        $objectId.attr( 'height' , windowHeight ).attr( 'width' , windowWidth );

        $objectEmbed.attr( 'height' , windowHeight ).attr( 'width' , windowWidth ); 

}

$(document).ready(function() {

    preziresize();

});

$(window).resize(function() {

    preziresize();

}); 
```

**我的问题**

但是上面脚本的缺点是我必须手动将对象的 ID 放入我的脚本中。:(

在我不起作用的新脚本上，我试图自动获取对象的 id，并将其分配为变量。请在下面查看我的功能。

```
function preziresize() {

    var $objectId =     $('#prezi').attr( 'id' ),
        $objectEmbed =  $objectId.find('embed'),
        windowWidth =   $(window).width(),
        windowHeight =  $(window).height();

        $objectId.attr( 'height' , windowHeight ).attr( 'width' , windowWidth );

        $objectEmbed.attr( 'height' , windowHeight ).attr( 'width' , windowWidth ); 

} 
```

任何指针都会非常感谢。

乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T10:34:12.617

**编辑：**你也应该在调整大小时更好地执行它。

```
$(window).bind("resize.preziresize", function() {
   $('div#prezi object')
       .find('embed')
       .andSelf()
       .attr( 'height' , $(window).height() )
       .attr( 'width' , $(window).width() );
}).trigger("resize.preziresize"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:34:04.157

```
var $object =     $('#prezi').find("object"),
    $objectEmbed =  $object.find('embed'), 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T10:36:57.120

这段代码没有多大意义，sinse $("#prezi") 意味着你已经知道它是 id，它是“prezi”。您的代码的另一个问题是 $objectId 是一个字符串而不是 jQuery 对象，因此您不能在其上使用 .find 。尝试这个：

```
function preziresize() {    
    var $object =       $('#prezi object'),
        $objectId =     $object.attr('id')
        $objectEmbed =  $object.find('embed'),
        windowWidth =   $(window).width(),
        windowHeight =  $(window).height();

        $object.attr( 'height' , windowHeight ).attr( 'width' , windowWidth );
        $objectEmbed.attr( 'height' , windowHeight ).attr( 'width' , windowWidth ); 
} 
```

# android - eclipse adt 17 和 libs 文件夹

> ID：10026936
> 
> 赞同：3
> 
> 时间：2012-04-05T10:32:02.947
> 
> 标签：android, eclipse, adt

好的，所以我将 eclipse adt 更新到版本 17，我收到此错误

```
04-05 12:28:55.810: E/AndroidRuntime(5470): FATAL EXCEPTION: main
04-05 12:28:55.810: E/AndroidRuntime(5470): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.galeola.agentis/com.galeola.agentis.activity.GestionaleActivity}: java.lang.ClassNotFoundException: com.galeola.agentis.activity.GestionaleActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.galeola.agentis-1.apk]
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1742)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.os.Looper.loop(Looper.java:132)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.ActivityThread.main(ActivityThread.java:4126)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at java.lang.reflect.Method.invoke(Method.java:491)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at dalvik.system.NativeStart.main(Native Method)
04-05 12:28:55.810: E/AndroidRuntime(5470): Caused by: java.lang.ClassNotFoundException: com.galeola.agentis.activity.GestionaleActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.galeola.agentis-1.apk]
04-05 12:28:55.810: E/AndroidRuntime(5470):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
04-05 12:28:55.810: E/AndroidRuntime(5470):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1733)
04-05 12:28:55.810: E/AndroidRuntime(5470):     ... 11 more 
```

但是，如果我将我的库移动到 /libs，我可以启动应用程序，但是 /libs javadoc 和 javasources 中的库停止工作，而如果它们不在 /libs javadoc 和 javasource 中，那么我不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:40:43.170

[在这里](https://groups.google.com/forum/?fromgroups#!topic/adt-dev/zAVxRbqw8Fw)查看 Xavier Ducrohet 的答案。但基本上，使用 adt17，您无法将 Javadoc 附加到您的依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:52:59.133

对于**非图书馆**项目：

[正如在这个 android 问题](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=27490)中的原始问题评论 8 中提到的那样，修复了构建、运行时和 javadoc 问题，尽管是通过杂乱无章的方式。

不幸的是，Ant 构建被破坏了。要修复使用 Proguard 的 Ant 构建，请按照注释 8 中的说明将 jar 移动到 lib 并添加到 ant.properties：

```
jar.libs.dir=lib 
```

并向 proguard.cfg 添加：

```
-injars lib 
```

第二个添加是修复运行时崩溃所必需的。

我没有针对使用检测或 emma 任务的项目对此进行测试，但对于需要 Eclipse 和 Ant 构建的非库项目来说似乎没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T10:37:24.177

可能 ADK 更新与您项目的构建路径混淆了。尝试删除 JAR 并将其再次添加到您的`libs`文件夹中，将其添加到您的构建路径并执行清理项目。

检查我的问题一次——[新的 android SDK 17 问题](https://stackoverflow.com/q/9885971/964741)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:10:55.417

好的，这是错误，解决方案是评论 #8 [http://code.google.com/p/android/issues/detail?id=27490#c8](http://code.google.com/p/android/issues/detail?id=27490#c8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-21T20:01:22.257

好吧，经过数小时的研究，我找到了一个简单的解决方案。

*   单击您的 Android 项目
*   选择属性
*   选择 Java 构建
*   路径选择顺序和导出
*   检查您的所有参考资料

就这样 ！

# c++ - 为什么我不能在 Exception 类中有 auto_ptr

> ID：10026938
> 
> 赞同：7
> 
> 时间：2012-04-05T10:32:11.217
> 
> 标签：c++, exception, auto-ptr

我在 Exception 类中遇到了 auto_ptr 问题，我最终将其简化为：

```
#include <memory>

class MyException
{
    std::auto_ptr<int> m_foo2;
};

int main()
{
    try
    {
        throw MyException();
    }
    catch (const MyException&)
    {

    }
    return 0;
} 
```

这无法编译：

> /perforce/unstable/test/Common/Exceptions/TestException4.cpp：在函数'int main()'中：/perforce/unstable/test/Common/Exceptions/TestException4.cpp:12：错误：没有匹配的函数调用' MyException::MyException(MyException)' /perforce/unstable/test/Common/Exceptions/TestException4.cpp:4: 注意：候选人是： MyException::MyException() /perforce/unstable/test/Common/Exceptions/TestException4.cpp :4: 注意：MyException::MyException(MyException&) /perforce/unstable/test/Common/Exceptions/TestException4.cpp:12: 错误：在抛出的表达式中

如果我删除 auto_ptr，错误就会消失。

这是因为正在复制或分配异常吗？有没有办法`auto_ptr`在异常中使用 s？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T10:52:45.433

> 这是因为正在复制或分配异常吗？

它的确是。该标准规定了如何在 C++11 15.1/3 中引发异常：

> throw-expression 初始化一个临时对象，[...]。临时值是一个左值，用于初始化匹配处理程序中命名的变量。

初始化是使用隐式复制构造函数完成的。这被声明为`MyException(MyException&)`，因为有一个成员需要非`const`引用参数（如 C++11 12.8/9 中所指定）。临时对象不能绑定到非`const`引用，因此构造失败。

> 有没有办法在异常中使用 auto_ptrs？

如果您能够使用 C++11，那么您可以使用它`unique_ptr`，并将`auto_ptr`其交给历史。您的类将有一个隐式移动构造函数，声明为`MyException(MyException&&)`，可用于从临时初始化它。

否则，您可能会抛出一个非临时值：

```
MyException ex;
throw ex; 
```

`const`或者您可以通过添加显式复制构造函数并使用`const_cast`或`mutable`允许它复制来破解您的类以允许从引用初始化`auto_ptr`- 但这是潜在的危险，我不推荐它。

# mysql - 在 MySQL 中同时更新多表

> ID：10026939
> 
> 赞同：2
> 
> 时间：2012-04-05T10:32:12.330
> 
> 标签：mysql

我有一个像下面这样的查询，我需要它在一个更新查询中。由于我是初学者，我使用连接并编写了单行查询，但出现错误

> 超过锁定等待超时；尝试重启事务

下面是每个单独的更新查询...

```
update a set id=id-1 where id>'3' and reg='34554';
update b set id=id-1 where id>'3' and reg='34554';
update c set id=id-1 where id>'3' and reg='34554';
update d set id=id-1 where id>'3' and reg='34554';
update e set id=id-1 where id>'3' and reg='34554'; 
```

下面是我尝试过的内容并得到了如上所述的错误...

```
update a
LEFT JOIN b ON b.id=a.id and b.tan=a.tan
LEFT JOIN c ON c.id=b.id and c.tan=b.tan
LEFT JOIN d ON d.id=c.id and d.tan=c.tan
LEFT JOIN e ON e.id=d.id and e.tan=d.tan
SET a.id=b.id=c.id=d.id=e.id=a.id-1
where a.id>'3' and a.tan='34554'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:42:19.950

您可以在存储过程中存储多个 sql，然后从 java 调用该过程。可以通过参数传递 Id 和 reg。

存储过程信息[http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

您必须在 Mysql 命令行中执行此操作...

```
Delimiter |

Create procedure (in id_val int, in reg_val int)

Begin

update a set id=id-1 where id>id_val and reg=reg_val;

update b set id=id-1 where id>id_val and reg=reg_val;

update c set id=id-1 where id>id_val and reg=reg_val;

update d set id=id-1 where id>id_val and reg=reg_val;

update e set id=id-1 where id>id_val and reg=reg_val;

End |

delimiter ; 
```

我在以下链接中使用 PHP ...信息 [http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

java的希望......这个链接可能有用 [http://www.easywayserver.com/jdbc/JDBC-prepared-statement.htm](http://www.easywayserver.com/jdbc/JDBC-prepared-statement.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:45:31.110

你必须使用交易

```
SET autocommit=0;
LOCK TABLES a WRITE, b WRITE, c WRITE, d WRITE, e WRITE

update a set id=id-1 where id>'3' and reg='34554';
update b set id=id-1 where id>'3' and reg='34554';
update c set id=id-1 where id>'3' and reg='34554';
update d set id=id-1 where id>'3' and reg='34554';
update e set id=id-1 where id>'3' and reg='34554';

COMMIT;
UNLOCK TABLES; 
```

[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/lock-tables-and-transactions.html)阅读有关将锁表与事务组合的信息

我不知道，如何使用连接创建这样的查询。

# java - 打印到文件 - Java 初学者

> ID：10026941
> 
> 赞同：1
> 
> 时间：2012-04-05T10:32:16.370
> 
> 标签：java

我无法弄清楚为什么以下简单程序不（创建）然后写入文件？你能发现问题出在哪里吗？

```
public class RandomSeq
{
    public static void main( String[] args)
    {
        // command-line argument
        int N = Integer.parseInt( args[0] );

        // generate and print N numbers between 0 and 1
        for ( int i = 0 ; i < N; i++ )
        {
            // System.out.println( Math.random() );
            StdOut.println( Math.random() );
        }
    }
} 
```

当我在交互提示符下键入以下内容时：

> java随机序列5

```
0.9959531649155268
0.5010055704125982
0.4444779637605908
0.4205901267129799
0.09968268057133955 
```

我显然得到了正确的输出，但是当我使用管道时，它并没有做（我认为）它应该做的事情：

```
> java RandomSeq 5 > f1.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:44:40.237

写入文件的“正常”Java 方法是使用`Writer`类。我在下面举了一个小例子。或者，您可以更改`PrintStream`您写入的内容，然后将输出发送到文件而不是控制台（基本上与下面相同）

```
PrintWriter out;
File myfile = new File(folder,"output.txt");
myfile.createNewFile();
fos = new FileOutputStream(myfile);
out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(fos, "UTF-8")));
out.println("some text to go in the output file"); 
```

**编辑：** 在我的机器上，代码使用`System.out.println()`. 我只能想象写权限可能有问题，否则明智的可能`StdOut`对象有一些错误......

```
~/scratch $ java RandomSeq 5 > out.txt
~/scratch $ cat out.txt 
0.5674462012296635
0.05189786036638799
0.1290205079541452
0.22015961731674394
0.6503198654182695
~/scratch $ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:08:42.283

我已尝试使用 system.out，它对我来说非常有效。您的特定文件夹或目录可能存在读/写权限，因此您可能无法创建 f1.txt。如果没有适当的权限，请尝试更改文件夹权限或用户权限。还要确保您在创建程序的同一位置找到该文件。

# iphone - Xcode 停止运行/测试我的应用程序

> ID：10026943
> 
> 赞同：0
> 
> 时间：2012-04-05T10:32:22.230
> 
> 标签：iphone, objective-c, xcode, ipad

**问题：**

直到最近，我才能像平常一样构建和测试我的应用程序。现在，Xcode 快把我逼疯了，我什至无法运行我的应用程序。

-

**发生什么了：**

构建我的应用程序似乎在模拟器中启动它，但它没有运行并且发生 EXC_ARITHMETIC 错误（它停止在之前运行良好的代码行，此后没有代码更改）。

查看“产品”文件夹，我可以看到“appName.app”是红色的——即永远不会生成应用程序文件。聚光灯搜索和检查构建文件夹证实了这一点。

清洁，重新启动等无济于事。其他项目仍然构建良好。

-

**发生的那一刻：**

我更改的图形文件之一不会在应用程序中自行更新，即使在“清理”之后也是如此。所以我删除了 build 文件夹，就像我之前做过很多次一样。现在我得到了上面解释的结果。

-

任何想法或解决方案都非常感谢！！！我不能按原样发展……而且已经浪费了很多时间。如果有人找到解决此问题的好方法，我非常乐意提供赏金，这让我发疯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:37:30.443

当我的应用程序在启动时总是崩溃时，我也遇到了类似的问题，有时从模拟器中删除应用程序会有所帮助。只需将鼠标在应用程序上按住几秒钟，单击 X，关闭模拟器，重新构建并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:54:24.730

解决方案是注释掉发生错误的代码块。构建，然后运行正常。

然后，取消注释同一块。构建，并且工作正常。

奇怪...编译器或 Xcode 错误？随意尝试解释...

# build - 构建 Zimbra

> ID：10026946
> 
> 赞同：2
> 
> 时间：2012-04-05T10:32:33.753
> 
> 标签：build, zimbra

我想知道为什么在 Zimbra Wiki 中只列出了构建过程的特定平台。这意味着不可能在其他 Linux 发行版上构建 Zimbra？Zimbra 社区选择一个特殊的 Linux 发行版来构建 Zimbra 的真正原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T23:30:00.423

我目前正在尝试在 Arch Linux 上设置 Zimbra，我正在支持这些原因。

Imho Zimbra 是一个很好的外部工作，有用的 webmail 客户端，很好地集成了各种东西，等等。但是整个包通过捆绑和编译几乎所有的库和第三方软件，违反了你曾经对 linux 上的服务器软件的所有假设。它，这就像popt这样的基本东西。规定的要求是您在一台机器上自行设置 Zimbra，并且您不敢在那里运行其他东西。

由于一切都紧密集成，因此编译是一件大事，而且由于每个捆绑软件可能需要在任何发行版上进行不同的编译，或者任何东西都可能在任何地方中断，因此必须付出巨大的努力才能为多个平台维护一个健全的构建。

这也让我难以置信，怎么会有人认为这种捆绑是个好主意。如果其中一个部分出现任何安全问题，则必须重建所有内容。他们必须自己修补 Zimbra 等，而不是管理员依赖其发行版的安全更新。

委婉地说，在任何平台上构建 Zimbra 似乎都是一次冒险。唯一记录良好且最新的平台是 FreeBSD，据我所知，这主要归功于与 Zimbra 无关的一个人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-10T22:00:00.650

我在一个基于 Zimbra 的项目中做了大约一年的构建工程师。我们使用 CentOS 构建它。几乎可以在每个平台上构建 Zimbra。这只是经验和熟练程度的问题，因为构建过程涉及太多的编程语言和相关技术，您需要安装确切所需的版本。因此，您可能还被迫编译和构建一些额外的包。

我记得我第一次尝试构建 Zimbra，成功构建大约需要 2 周。但是，我完整而清晰地记录了该过程。后来，建造 Zimbra 花了大约一个晚上。

# entity-framework - 实体框架代码中的复合主键问题优先

> ID：10026948
> 
> 赞同：1
> 
> 时间：2012-04-05T10:32:34.683
> 
> 标签：entity-framework, composite-primary-key

我首先在实体框架代码中有一个问题，数据库中的三个表如下：

```
CREATE TABLE [Food](
PK [FoodId] [int] NOT NULL,
[FoodName] [varchar](50) NULL)

CREATE TABLE [Fruit](
PK [FruitId] [int] NOT NULL,
[FruitName] [varchar](50) NULL)

CREATE TABLE [FoodFruit](
PK, FK [FoodId] [int] NOT NULL,
PK, FK [FruitId] [int] NOT NULL) 
```

该模型只会生成 Food、Fruit 实体。

但是如果我在 FoodFruit 表中添加一个新列 [Notes]，例如 Notes：

```
CREATE TABLE [FoodFruit](
PK, FK [FoodId] [int] NOT NULL,
PK, FK [FruitId] [int] NOT NULL,
[Notes] [varchar](50) NULL) 
```

该模型将生成 Food、Fruit 和 FoodFruit 实体。

所以，我很困惑，为什么第一个不生成 FoodFruit 实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T10:40:07.213

那是正确的行为。在第一种情况下，您的 FoodFruit 表只是建模多对多关系的数据库助手。EF 在概念模型中不需要这样的帮助器，因此它将这个表隐藏在直接建模的多对多关系后面。在第二种情况下，表有额外的数据 - 它成为完整的实体，而不仅仅是关系的联结表。EF 检测到它并将其映射为一个新类。

# sql-server - SQL Server查询以查找孩子的父母姓名

> ID：10026958
> 
> 赞同：3
> 
> 时间：2012-04-05T10:33:35.397
> 
> 标签：sql-server, join, parent, common-table-expression

我有一张这样的桌子

```
ID  Name    Mother  Father
1   Sue     NULL    NULL
2   Ed      NULL    NULL
3   Emma    1       2
4   Jack    1       2
5   Jane    NULL    NULL
6   Bonnie  5       4
7   Bill    5       4 
```

我需要如下输出

```
ID  Name    Mother  Father
3   Emma    sue     ed
4   jack    sue     ed
6   bonnie  jane    jack
7   bill    jane    jack 
```

我试过用 join n cte 写查询，但想不出逻辑，有人可以帮我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T10:38:37.697

```
SELECT t.ID, t.Name, m.Name, f.Name
FROM your_table t
INNER JOIN your_table m ON m.ID = t.Mother
INNER JOIN your_table f ON f.ID = t.Father 
```

`LEFT JOIN`如果您想包含没有`Mother`和/或`Father`节点的记录，请使用：

```
SELECT t.ID, t.Name, ISNULL(m.Name, 'Orphan') Mother, ISNULL(f.Name, 'Orphan') Father
FROM your_table t
LEFT JOIN your_table m ON m.ID = t.Mother
LEFT JOIN your_table f ON f.ID = t.Father 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:40:48.700

尝试这样的事情：

```
select 
    p.id, p.name, p1.name as mother, p2.name as father
from people p
inner join people p1 on p1.id = p.mother
inner join people p2 on p2.id = p.father 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-05-14T09:21:27.373

选择查询

```
SELECT A.*    
FROM tbl A   
    ,tbl M    
    ,tbl F    
WHERE A.Mother = M.ID     
    AND A.Father = F.ID 
```

没有内连接..

# java - 使用 Java 操作 JavaScript

> ID：10026966
> 
> 赞同：0
> 
> 时间：2012-04-05T10:34:08.167
> 
> 标签：java, javascript, htmlunit

我正在使用特定的 JavaScript 连接到网络服务器。（使用 HttpURLConnection atm）我需要的是一个可以操作 JavaScript 函数的连接。之后我想再次运行整个 JavaScript。

我希望以下函数始终返回“new FlashSocketBackend()”

```
function createBackend() {
    if (flashSocketsWork) {
        return new FlashSocketBackend()
    } else {
        return new COMETBackend()
    }
} 
```

我必须为此使用 HtmlUnit 吗？连接、操作和重新运行脚本的最简单方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:49:04.850

你最好的选择可能是使用[Rhino——](http://www.mozilla.org/rhino/)一个完全用 Java 编写的开源 JavaScript 实现。加载您的页面`window.location`并希望运行您的 JavaScript 函数。[我在将浏览器带到服务器](http://ejohn.org/blog/bringing-the-browser-to-the-server/)之前读过一段时间，似乎可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:07:21.107

使用 HtmlUnit 你确实可以做到。

即使您不能操作现有的 JS 函数，但是您可以在现有页面上执行您希望的 JavaScript 代码。

例子：

```
WebClient htmlunit = new WebClient();
HtmlPage page = htmlunit.getPage("http://www.google.com");
page = page.executeJavaScript("<JS code here>").getNewPage(); 

//manipulate the JS code and re-excute
page =  page.executeJavaScript("<manipulated JS code here>").getNewPage();

//manipulate the JS code and re-excute
page =  page.executeJavaScript("<manipulated JS code here>").getNewPage(); 
```

更多： [http ://www.aviyehuda.com/2011/05/htmlunit-a-quick-introduction/](http://www.aviyehuda.com/2011/05/htmlunit-a-quick-introduction/)

# java - 何时使用属性文件以及何时查找数据库？

> ID：10026972
> 
> 赞同：2
> 
> 时间：2012-04-05T10:34:28.900
> 
> 标签：java, database, properties

全部：

我有一个场景来维护配置数据。据我了解，我们可以将配置数据存储在属性文件或平面表中。

我正在寻找一个有效的分界线，该分界线提供何时使用属性以及何时使用数据库表。

据我了解，在 API 的成本和效率方面（在基于 Java 的应用程序的情况下），将配置数据存储在属性中比数据库（因为为此目的建立连接成本高昂）

欢迎您的意见！

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T10:39:13.330

我假设您只会加载一次或很少加载配置数据，所以我不会太担心事情的性能方面。不过有几点需要考虑：

*   如果您*不仅*需要名称/值对，那么数据库可能会提供更丰富的数据模型。
*   将配置存储在数据库中可能更容易在多台计算机之间共享
*   即使在数据库中进行配置，您也需要配置数据库连接本身......
*   *如果您不需要用于其他任何事情的*数据库，则使用数据库进行配置似乎有点奇怪，尽管您可能会考虑使用*嵌入式*数据库（例如 SQLite）而不是传统的客户端/服务器数据库。
*   不要忘记除了你提到的两个之外还有其他选择

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T10:39:54.670

属性文件包含静态值，在编译时（或部署时）固定。数据库包含动态值，您可以在应用程序运行时更改这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-03T16:21:01.683

虽然该服务没有汇总大量配置，但效率并不是这里的关键。有几个问题可能会有所帮助：

*   配置数据复杂吗？是的？- 数据库存储
*   会不会很少重新加载数据？是的？- 属性文件
*   服务有很多实例吗？是的？我要支持像 Puppet 这样的配置管理系统吗？是的？- 属性文件
*   服务有很多实例吗？是的？服务是否需要 A/B 测试？是的？- 属性文件
*   我是否需要在不重新启动的情况下紧急更新配置？是的？- 数据库存储（不包括 Archaius 的情况）
*   我需要跟踪配置更新吗？是的？- 数据库存储
*   服务是否有许多逻辑划分的配置（例如微服务中的服务连接配置）？是的？- 属性文件
*   配置数据敏感吗？（例如秘密令牌，信用） - 属性文件

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-05T10:39:34.787

**属性文件**和**数据库**之间存在比较。**属性文件**存储由**= 或 :**分隔的**键值**对，并且**键和值**都必须是**字符串**。

 ******您可以将任何数据以二维表格格式存储在数据库中。******

# c# - MVC 视图是否可以访问所有项目，即使它们没有被视图所在的项目引用？

> ID：10026974
> 
> 赞同：8
> 
> 时间：2012-04-05T10:34:35.000
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

好的，所以我对以下数据的情况有些困惑。

我们的应用程序中有以下结构：

*   **Portal.Web** - 一个 MVC 3 Web 应用程序，它基本上包含所有视图、脚本、css 和 HTML 辅助扩展方法
*   **Portal.Core** - 一个基本上是我们的业务对象的类库，我们的所有模型都包含在这个项目中。
*   **Portal.Data** - 另一个包含我们的 NHibernate 配置和 DTO 类的类库。

这是我们的用法：在控制器中，我们调用位于 Portal.Core 中的模型，该模型通过调用 Portal.Data 进行填充，因此基本上 Web 永远看不到数据。

这里有一个问题：在控制器中，例如我尝试实例化一个名为 Client 的新 DTO 对象，如下所示：

```
var client = new Client(); 
```

它不起作用，预计它不知道 Client 是什么，甚至指定 using 也不会削减它。没关系。

**但是**，如果我尝试在视图中执行完全相同的行，Resharper 将使用添加到视图中，然后没有抱怨，项目运行，我们可以在视图中使用 DTO 类。

那么问题来了，这是为什么呢？我试图阻止我们的小辈在 Views 中使用 DTO 类，所以我特意删除了对 Web 中 Data 项目的引用，但他们仍然可以使用这些类。有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T07:58:45.013

我用 ASPX 和 Razor 视图运行了相同的测试。在 ASPX 视图中引用`Client`失败，但在 Razor 视图中它们可以工作。当您请求应用程序时，视图是即时编译的，因此我查看了“C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\portal.web”中的一些文件夹和来自编译视图时显式添加对程序集的 cmdline 文件引用。

似乎编译剃刀视图的过程添加了对 bin 文件夹中所有程序集的引用。但是，查看 ASP.NET MVC 的源代码，我无法确认这一点。

所以，我能得出的唯一结论是，这是使用 Razor 视图引擎的副作用。

也就是说，您可能需要扫描 web.config 以查看它是否包含在使用[程序集元素](http://msdn.microsoft.com/en-us/library/bfyb45k1.aspx)中。

# sharepoint - 如何在 sharepoint 中处理 web 配置文件的调试和发布版本？

> ID：10026980
> 
> 赞同：1
> 
> 时间：2012-04-05T10:34:54.957
> 
> 标签：sharepoint

我知道我们可以在 asp.net Web 项目中处理不同版本的 web.config 文件（例如调试、暂存和发布）。我们如何利用这个 asp.net 功能在 SharePoint 项目中做同样的事情（请记住，场中可能有不止一台服务器，即每台服务器都需要使用配置设置进行更新）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:44:18.613

You should register your web.config changes using the `SPWebConfigModification` class during the `FeatureActivated` event of a `FeatureReceiver`. Here is an [article](http://weblogs.asp.net/wesleybakker/archive/2009/01/21/web.config-modifications-with-a-sharepoint-feature.aspx) on how to use them. Then you could have 3 xml files with your different configurations for Development/Stage/Production. During your `FeatureActivated` event you could load the configuration for a particular environment based on the address of the current site. For example, you would have a stage website called 'mysite.stage.com' and so the xml would be 'mysite.stage.com.xml'.

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
{
  base.FeatureActivated(properties);

  SPSite siteCollection = properties.Feature.Parent as SPSite;

  string host = 
    siteCollection.WebApplication.GetResponseUri(SPUrlZone.Default).Host;

  string fileName = String.Format("{0}.xml", host);

  // Read the xml and make web config modifications...
} 
```

# wix - 慢 Light.exe - AV 问题

> ID：10026987
> 
> 赞同：5
> 
> 时间：2012-04-05T10:35:12.180
> 
> 标签：wix, wix3.5

我遇到了一个我认为其他人可能会遇到的问题，但我找不到任何帖子。

我的（小型）WiX 项目在我们的构建服务器上构建需要很长时间（每个 2-4 分钟），但在我的桌面上要快得多（几秒钟）。

经过一番探索，我将其范围缩小到 McAfee 扫描由 light 创建的临时文件（位于 TEMP 用户环境变量中）。我不知道为什么扫描需要这么长时间 - 禁用 AV 使构建时间远低于 2 分钟，而之前它超过 20 分钟！

现在我的问题是如何从 AV 中排除这些临时文件。出于明显的原因，我不想排除 TEMP 文件夹，而且似乎没有一种方法可以通过文件名排除而不在 AV 中创建一个大洞。

所以我想我的问题是，有没有办法将 light.exe 配置为使用 TEMP 以外的不同路径？我尝试了一些命令行开关，但没有成功。也许我可以在 Light.exe.config 中添加一些东西？干杯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T12:56:41.870

Can you not just disable real time antivirus scanning on your build machines? My argument for doing this would be that your VM should be full scanned and then disabled and that all files making it's way into the build machine are coming from source control and / or file shares that should have already been scanned at various points upstream in the process.

We ran over 100,000 builds a year at my last job and A/V would have killed us.

Otherwise, if you type `light.exe -?` you'll see there is an environment variable called WIX_TEMP that overrides the temp directory.

# android - 在没有插件支持的情况下启动浏览器意图

> ID：10026988
> 
> 赞同：0
> 
> 时间：2012-04-05T10:35:18.123
> 
> 标签：android, plugins, browser

我正在编写一个启动一些自定义 URL 的应用程序。有时我想要 Flash 支持，有时却没有。在我看来，最好的方法是更改​​浏览器的 share_pref “plugin_state”，但我不知道是否可以从外部应用程序中做到这一点。

¿ 有没有办法在启动浏览器活动时激活/停用 plugin_state？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:53:22.493

> 有没有办法在启动浏览器活动时激活/停用 plugin_state？

不，对不起。对于初学者，许多 Android 浏览器没有“plugin_state”。其次，是否显示 Flash 内容的决定取决于用户和他们选择的浏览器，而不是您。

如果您需要对 Web 体验进行这种程度的控制，`WebView`请在您的应用程序中嵌入一个小部件，并弄清楚需要哪些魔法才能在其中启用 Flash 支持。

# sql - SQL联合失败

> ID：10026993
> 
> 赞同：1
> 
> 时间：2012-04-05T10:35:32.377
> 
> 标签：sql, sql-server

```
SELECT TOP 5 
  Notices.Id, 
  NoticeLoc.Notices_Id,
  Loc.Id as Loc_Id, 
  CAST(Notices.Text AS TEXT) as Text, 
  CAST(Notices.Title AS TEXT) as Title, 
  Notices.CDate as RDate 
FROM NoticeLoc 
  JOIN Notices ON NoticeLoc.Notices_Id=Notices.Id JOIN Loc ON NLoc.Loc_Id=Loc.Id WHERE Loc_Id IN (1)

UNION 

SELECT TOP 5 
  Notices.Id, 
  '',
  '', 
  CAST(Notices.Text AS TEXT) as Text, 
  CAST(Notices.Title AS TEXT) as Title, 
  Notices.CDate as RDate 
FROM NoticeC 
  JOIN Notices ON NoticeC.Notices_Id=Notices.Id WHERE C_Id=110 AND CDate BETWEEN '10/01/2011' AND '07/14/2025' ORDER BY RDate desc 
```

我正在尝试使用 mssql 在 2 个结果集之间执行联合，但是我收到以下错误：

> 消息 421，级别 16，状态 1，第 1 行文本数据类型不能选择为 DISTINCT，因为它不可比较。

我必须将这些字段保留为文本字段。

我该如何解决这个问题，干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T10:38:50.823

UNION 本身被解释为使用 DISTINCT（可能是因为 UNION 试图将这两个查询固有地网格化为一个 DISTINCT 列表）。使用 UNION ALL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:46:03.497

问题是数据的类型（TEXT）。您是否可以更改表以使用 VARCHAR(MAX) 代替？还是从联合中删除 TEXT 字段？或者也许只是在查询中将字段转换为 VARCHAR(MAX)？

VARCHAR(MAX) 在功能上与文本相同（无限长度，不存储在行中等）。