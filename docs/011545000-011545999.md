# StackOverflow 问答 11545000-11545999

# html - 单击是复选框会显示 2 个表单字段，单击否会隐藏这两个字段。我该怎么办？

> ID：11545004
> 
> 赞同：0
> 
> 时间：2012-07-18T15:34:10.047
> 
> 标签：html, checkbox, show, hidden

```
<TR>
<TD VALIGN="top">
<LABEL FOR="disabilities">5\. Do you have any disability which may limit your-----------
<BR>
ability to perform the essential functions of the job
<BR>
for which you are applying?<FONT COLOR="#FF0000"><SUP>*</SUP></FONT>
</LABEL>
</TD>
<TD VALIGN="top">
<INPUT TYPE="text" NAME="disabilities"  MAXLENGTH="3" SIZE="6" onFocus="javascript:toggleMsg('msg-23')" onBlur="javascript:toggleMsg('msg-23')" MAXLENGTH="20">
<SPAN ID="msg-23" CLASS="msg" STYLE="visibility:hidden;">Yes or no</SPAN><editcheck="req=Y=Please enter yes or no.">
</TD>
</TR>

<TR>
<TD>&nbsp;</TD>
</TR>

<TR>
<TD VALIGN="top">
<LABEL FOR="ifyes">If yes, describe----------------------------------------------</LABEL>
</TD>
<TD VALIGN="top">
<INPUT TYPE="text" NAME="ifyes" MAXLENGTH="50" SIZE="60" onFocus="javascript:toggleMsg('msg-24')" onBlur="javascript:toggleMsg('msg-24')" MAXLENGTH="20">
<SPAN ID="msg-24" CLASS="msg" STYLE="visibility:hidden;">If no, put N/A.</SPAN><editcheck="req=Y=Please enter descriptions of disabilities.">
</TD>
</TR>

<TR>
<TD VALIGN="top">
<LABEL FOR="accommodate">What can we do to accommodate you?---------------------</LABEL>
</TD>
<TD VALIGN="top">
<INPUT TYPE="text" NAME="accomodate" MAXLENGTH="50" SIZE="60" onFocus="javascript:toggleMsg('msg-25')" onBlur="javascript:toggleMsg('msg-25')" MAXLENGTH="20">
<SPAN ID="msg-25" CLASS="msg" STYLE="visibility:hidden;">If none, type N/A</SPAN><editcheck="req=Y=Please enter accommodations.">
</TD>
</TR> 
```

忽略 javascript，因为它还不能工作并且是另一个问题的一部分，我如何设置它，所以我在残疾旁边有一个复选框。点击yes，它显示“ifyes”和“accommodate”点击no，它不显示它。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:15:55.410

您将需要放入一些 javascript 以使其工作。我已经为你准备了一个真正的快速测试。随意修改它以满足您的需求。

JavaScript

```
function yesnoCheck() {
    if (document.getElementById('yesCheck').checked) {
        document.getElementById('ifYes').style.visibility = 'visible';
    }
    else document.getElementById('ifYes').style.visibility = 'hidden';

}

</script> 
```

HTML

```
<label for="yesCheck">Yes</label> <input type="radio" onclick="javascript:yesnoCheck();" name="yesno" id="yesCheck"> 
<label for="noCheck">No</label> <input type="radio" onclick="javascript:yesnoCheck();" name="yesno" id="noCheck"><br>
<div id="ifYes" style="visibility:hidden">
    <label for="yes">If yes, explain:</label> 
    <input type='text' id='yes' name='yes'><br>
    <label for="acc">What can we do to accommodate you?</label>  
    <input type='text' id='acc' name='acc'>
</div> 
```

演示 - [http://jsfiddle.net/QAaHP/](http://jsfiddle.net/QAaHP/)

# javascript - GWT：setInnerHTML 取消转义属性值

> ID：11545012
> 
> 赞同：0
> 
> 时间：2012-07-18T15:34:35.290
> 
> 标签：javascript, gwt, escaping, html-entities

此字符串：`<a onclick="doit('&#39;')">...</a>`从服务器端接收，需要设置为元素的内部 HTML。

当我使用`Element#setInnerHTML`字符串被转换为 时`<a onclick="doit(''')">...</a>`，即将 HTML 实体转义为它所代表的字符。

如何在没有实体转换的情况下执行内部 HTML 分配？

*澄清：内部 HTML 分配仅取消转义属性值内的实体。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:54:40.313

`setInnerHTML()`实现本身没有问题，因为它的唯一作用是为底层 JS 对象分配一个属性值，通过检查 的源代码可以看出`Element`：

```
public final native void setInnerHTML(String html) /*-{
    this.innerHTML = html || '';
}-*/; 
```

问题出在浏览器中，无辜地遵循*HTML 文档表示*规范中的*字符集实体引用指南*并解析您的实体，这些实体在属性节点内是**允许的（因此被解析）。**

 ***### 从规范：

> 作者还应该在属性值中使用“ `&amp;`”，因为在 CDATA 属性值中允许字符引用。

### 解决方案

在服务器端（或通过过滤器或指定的客户端代理），使用相应的 HTML 实体转义**属性值内的所有特殊字符，例如：**

```
<a onclick=\"doit('&amp;#39;')\">...</a> 
```

### W3C 参考资料

*   [HTML 文档表示·字符集](http://www.w3.org/TR/html4/charset.html)。
*   [字符实体参考](http://www.w3.org/TR/html4/sgml/entities.html)。***

# ruby-on-rails - 没有路由匹配 {:action=>"show", :controller=>"user", :id=>nil}

> ID：11545016
> 
> 赞同：4
> 
> 时间：2012-07-18T15:34:45.977
> 
> 标签：ruby-on-rails, testing, rspec, routes

大家好，我有这个问题（帖子的标题）。

```
Failure/Error: get :create, :user => { :email => 'foo@example.com', :name => 'userexample' }
ActionController::RoutingError:No route matches {:action=>"show", :controller=>"user", :id=>nil} 
```

这是我的`UserController`。

```
class UserController < ApplicationController

  def new
  end

  def create
    @user = User.new(params[:user])
    @user.save
    redirect_to :action => :show, :id => @user.id
  end

  def show
    @user = User.find(params[:id])
  end
end 
```

这是我的路线.rb

```
::Application.routes.draw do

  devise_for :users
  root :to => "user#index"
  resources :user
  #match "newuser" => "user#new"
  get "user/new"
  post "user/create"
  get "user/:id" => "user#show" 
```

这是我的 rspec 测试

```
require 'spec/spec_helper'

describe UserController do
  it "create new user" do
    get :create, :user => { :email => 'foo@example.com', :name => 'userexample' }
      flash[:notice] = 'new user was successfully created.'
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:37:52.403

```
if @user.save
   redirect_to :action => :show, :id => @user.id
else
 ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:32:15.000

大多数 Rails 应用程序使用这种类型的内容块来创建和更新记录。

```
def create
  @user = User.new(params[:user])

  if @user.save
    redirect_to @user, :notice => "User was created successfully."
  else
    render :new
  end
end 
```

基本上，当`create`操作运行时，它会创建一个新记录或`User`模型的一个新实例。

当`.save`被调用时，它会检查所有验证。如果验证通过，则返回 true，否则返回 false。

如果它返回 false，那么您需要`:new`再次呈现模板，以便人们有机会修复任何验证错误。

如果它返回 true，那么您想要重定向到该`show`操作。rails 最酷的地方在于[它可以](http://ryanbigg.com/2012/03/polymorphic-routes/)通过传递 instance来自动解决这个问题`@user`。

* * *

Ryan Bates 有一个关于[使用 RSpec 测试控制器](http://railscasts.com/episodes/71-testing-controllers-with-rspec)的教程。根据他的所作所为，这就是我测试您的控制器的方式。

```
require 'spec/spec_helper'

describe UserController do

  describe "POST 'create'" do

    it "should redirect to user on successful save" do
      User.any_instance.stub(:valid?) { true }
      post :user
      flash[:notice].should_not be_nil
      assigns(:user).should_not be_a_new_record
      response.should redirect_to(assigns(:user))
    end

    it "should render new template on failed save" do
      User.any_instance.stub(:valid?) { false }
      post :user
      flash[:notice].should be_nil
      assigns(:user).should be_a_new_record
      response.should render_template(:new)
    end

    it "should pass params" do
      User.any_instance.stub(:valid?) { true }
      post :user, :user => { email_address: "baylor@example.com" }
      assigns(:user).email_address.should == "baylor@example.com"
    end
  end
end 
```

# linq - 带有反射错误的 Linq：LINQ to Entities 中不支持表达式 LINQ“调用”节点

> ID：11545018
> 
> 赞同：2
> 
> 时间：2012-07-18T15:34:50.923
> 
> 标签：linq, expression-trees, lambda

我在处理 lambda 表达式时遇到了麻烦。我正在EF下使用MVC，我试图创建一个“MetaModel”，每个模型都将继承它，并用它创建一个使用Linq列出元素的方法。

因为这是一个“元模型”，所以我不知道类的定义。

我正在尝试这样做，假设我们有一个模型类“客户”

```
 Public Function List(searchText As String) As List(Of Customer)
        With EFContext
            Return .Customers.AsQueryable().Where((Function(Customer) Customer.Name.Contains(searchText)).ToList()
       End With
   End Function 
```

但我希望它是通用的，所以我传递了一个继承类的属性名称，我希望能够通过这个属性进行搜索（和排序）。

这是我最好的方法：

```
 Public MustInherit Class BaseBL

    Public Function AutoList(Of T)(conf As ConfigurationBL) As List(Of T)
        Dim items As List(Of T)
        Dim sortParam = Expression.Parameter(GetType(T), "param")
        Dim sortFunc = Expression.Convert(Expression.Property(sortParam, conf.SortField), GetType(Object))
        Dim sortExpr = Expression.Lambda(Of Func(Of T, Object))(sortFunc, sortParam).Compile()

        Dim searchFunc As Func(Of T, Boolean) = Function(param)
                                                    Dim prInfo As PropertyInfo = param.GetType.GetProperty(conf.SearchField)
                                                    Dim str As String = prInfo.GetValue(param, Nothing)
                                                    Return str.Contains(conf.SearchText)
                                                End Function

        Dim searchExpr As Expression(Of Func(Of T, Boolean)) = Function(param) searchFunc(param)

        Dim query As IQueryable(Of T) = GetQueryable(Of T)()

        items = query.Where(searchExpr).OrderBy(sortExpr).ToList() '.Skip(conf.PageSize * (conf.PageNumber - 1)).Take(conf.PageSize).ToList()

        Return items
    End Function

    Public MustOverride Function GetQueryable(Of T)() As IQueryable(Of T)
End Class 
```

该类是泛型类 T 的 Parent，因此 GetQueriable(Of T) 方法将在子类上实现。

ConfigurationBL 类包含将提供正确配置的 sortField、searchField 和 searchText。

这几乎可以工作。我用 sortExpr 执行 orderBy 它可以工作，如果我用 searchExpr 执行 where 它也可以工作。

当我试图一起做所有事情时，问题就来了。它引发了一个异常：

“LINQ to Entities 不支持表达式 LINQ 'Invoke' 节点”

我很确定这是因为我使用

```
Dim searchExpr As Expression(Of Func(Of T, Boolean)) = Function(param) searchFunc(param) 
```

而不是正确的表达式树，但我不知道如何将 searchFunc 转换为表达式树。

我真的坚持这一点，我非常感谢任何帮助和想法，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:40:05.773

最后我能够自己修复它，我用这个替换了 searchExpr

```
Dim searchExpr = getSearchExpression(Of T)(conf.SearchField, conf.SearchText).Compile() 
```

在哪里...

```
Private Function getSearchExpression(Of T)(propName As String, search As String) As Expression(Of Func(Of T, Boolean))
        Dim element As ParameterExpression = Expression.Parameter(GetType(T), "element")
        Dim propertyValue As ParameterExpression = Expression.Variable(GetType(String), "propertyValue")
        Dim searchText As ParameterExpression = Expression.Variable(GetType(String), "searchText")

        Dim asgPropertyValue As Expression = Expression.Assign(propertyValue,
            Expression.Convert(Expression.Property(element, propName), GetType(String))
        )

        Dim asgSearchText As Expression = Expression.Assign(searchText,
           Expression.Constant(search)
           )

        Dim callContains As Expression = Expression.Call(propertyValue, GetType(String).GetMethod("Contains"), searchText)

        Dim block As Expression = Expression.Block(GetType(Boolean),
                                   New List(Of ParameterExpression)({propertyValue, searchText}),
                                   asgPropertyValue,
                                   asgSearchText,
                                   callContains
                               )      

        Return Expression.Lambda(Of Func(Of T, Boolean))(block, element)
    End Function 
```

我希望这可以帮助某人，问候:)

# c# - c# 根据均值和标准差绘制钟形曲线

> ID：11545020
> 
> 赞同：1
> 
> 时间：2012-07-18T15:34:57.923
> 
> 标签：c#, statistics, draw, curve, standard-deviation

有没有办法从标准偏差和平均值生成贝尔曲线？我已阅读对此的参考，但找不到算法。

我有一个数字列表，它们是预先标准化的查找（分数=>百分位数）。我已经确定了范围，我需要从中绘制一条钟形曲线，以便我可以为曲线下的区域部分着色以表示图表上的分数（我想是一个面积图/infrographic esk）。我真的被困在第一个障碍上。

我计划通过以下方式排列数据来绘制直方图：

```
int count = data.Count-1;  

        for (int i = 0; i < count; i++ )
        {
            data[i] = data[i + 1] - data[i]; //range
        }

        data[data.Count - 1] = 0; //make sure the curve comes back to 0 
```

![非正常数据](../Images/6db04d6237d686230a2b8eabab55fa28.png)

我需要从这些数据中绘制一个钟形曲线。但并非所有数据集都遵循上述输出中的正常偏差。

那么将这些数据变成钟形曲线的最佳方法是什么？

我可以使用数据的标准偏差和平均值来计算沿曲线的 n 个坐标，然后将分数转置到该曲线上以构建图表吗？

或者..我是否应该尝试将现有数据标准化为曲线，然后将附加值插入数据集中以使输出平滑？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:59:19.340

我不确定我是否完全理解您的要求，但这就是我解释您的问题的方式。

如果您的集合中有一定数量的观察值，您可以通过划分数据范围并根据此[http://en.wikipedia.org/wiki/Normal_distribution从标准化正态变量计算理论百分比来计算直方图#Standardizing_normal_random_variables](http://en.wikipedia.org/wiki/Normal_distribution#Standardizing_normal_random_variables)

例如，假设您的平均值为 5，标准差为 1，样本为 1000。那么我们知道，大约 68% 的正态分布位于平均值两侧的 1 SD 范围内。因此，在您的直方图箱 [4,5] 和 [5,6] 中，您将分别有 340 个观察值。同样，大约 13% 的人口位于 [mean-2xSD,mean - 1 x SD] 和 [mean + 1 x SD,mean + 2 x SD] 区间内。在这个简单的示例中，您将在区间 [3,4] 和 [6,7] 中生成 130 的观察计数。

通过使用标准正态变量表在区间内查找适当的总体百分比，您显然可以根据需要考虑更精细的区间。然后，您将在直方图中得到一个理想的理论正态分布样本。然后，您可以对这些点进行插值以获得平滑的曲线以覆盖到直方图上，

# javascript - 最好在服务器端在 for-loop 或 for-loop 内部或外部使用 ajax？Javascript

> ID：11545023
> 
> 赞同：-5
> 
> 时间：2012-07-18T15:35:07.117
> 
> 标签：javascript, ajax, for-loop, implementation, server-side

这是一个实施问题。

我有一组标签，我需要为每个标签获取数据。每个标签不需要相互通信。我想获取一些数据并将其存储在某个地方。

哪个更快？

*   for循环中的Ajax
*   在for循环之外
*   服务器端的for循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:40:12.930

一般来说，如果您需要加载一堆小数据，最好有一个服务器端点来返回所有数据。它对客户端来说更简单，并且避免了许多 xhrs 的开销。如果您有 100 个标签，您真的想调用 100 个 xhrs 来获取所有标签，更不用说协调所有 100 个标签的回调了吗？

# android - 警报管理器中的字符串丢失

> ID：11545024
> 
> 赞同：4
> 
> 时间：2012-07-18T15:35:09.950
> 
> 标签：android

我对附加到警报的文本字符串有疑问。似乎触发警报时，附加到警报的字符串为空。显然我犯了一个错误-但不知道在哪里。

我设置闹钟的代码是；

```
static void set_alarm(long alarm_time_in_millis,Context cont,AlarmManager alarm_manager,String str)
{
    Intent intent = new Intent(cont, to_call_when_alarm_goes_off.class);
    intent.putExtra("string_passed_in_bundle", str); 

    Log.i("xx","set_alarm ["+str+"]"); // The string I see in the Log is correct
    PendingIntent pIntent = PendingIntent.getBroadcast(cont,0, intent, 0);

    alarm_manager.cancel(pIntent);

    alarm_manager.set(AlarmManager.RTC_WAKEUP,alarm_time_in_millis, pIntent);
} 
```

接收告警的代码如下：

```
public class to_call_when_alarm_goes_off extends BroadcastReceiver
{
    Bundle bundle_from_whoever_called_this_activity;

    @Override
    public void onReceive(Context arg0, Intent arg1) 
    {
        String str;

        bundle_from_whoever_called_this_activity = arg1.getExtras();

        str = bundle_from_whoever_called_this_activity.getString("string_passed_in_bundle");

        Log.i("xx","to_call_when_alarm_goes_off: TIME TO WAKE UP!!! ["+str+"]");

        try 
        {
            Intent i = new Intent(arg0, dingaling.class);
            i.putExtra("string_passed_in_bundle", str);
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            arg0.startActivity(i);
        } 
        catch (Exception e) 
        {
        }
    }
} 
```

当我设置警报然后等待它被触发时，日志文件将显示如下内容

```
set_alarm [Go to meeting]
to_call_when_alarm_goes_off: TIME TO WAKE UP!!! [null] 
```

**编辑：**会不会有一些“超级”。我忘记调用的函数？

**编辑：**我经常对传递给各种函数的上下文类型感到困惑，例如 getBaseContext()、getApplicationContext()、"this" 等...如果我在某处涉及错误类型的上下文，会导致这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:29:07.483

我只是将您的代码复制并粘贴到我的应用程序中，它运行良好。只需创建活动并复制您的广播接收器。在活动中选择一个按钮，然后按钮的 onCLick 调用您的 setAlarm 函数。

我能够在广播接收器中获取字符串。

这是我的代码。

```
 public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
            AlarmManager manager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

                set_alarm(System.currentTimeMillis(), MainActivity.this, manager, "Time for tea");
            }
        });
    }

    static void set_alarm(long alarm_time_in_millis,Context cont,AlarmManager alarm_manager,String str)
    {
        Intent intent = new Intent(cont, to_call_when_alarm_goes_off.class);
        intent.putExtra("string_passed_in_bundle", str); 

        Log.i("xx","set_alarm ["+str+"]"); // The string I see in the Log is correct
        PendingIntent pIntent = PendingIntent.getBroadcast(cont,0, intent, 0);

        alarm_manager.cancel(pIntent);

        alarm_manager.set(AlarmManager.RTC_WAKEUP,alarm_time_in_millis, pIntent);
    }
} 
```

广播接收器和你的一样，所以我不把它放在这里。

最后**在清单中声明广播接收器**

**输出**

```
set_alarm [Time for tea]
to_call_when_alarm_goes_off: TIME TO WAKE UP!!! [Time for tea] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:25:28.927

使用 the`Intent`而不是它的`Bundle`，所以...

```
str = arg1.getStringExtra("string"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:39:44.647

您可能需要单步执行此代码并确保您获得的字符串是您所期望的。我敢打赌你没有得到你所期望的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T15:13:16.823

当您从

```
"string" 
```

至

```
"alarm_string" 
```

你还在 to_call_when_alarm_goes_off 类中得到一个字符串吗？或者你得到空？

如果您在此处删除 cancel(pIntent) 函数会发生什么：

```
alarm_manager.cancel(pIntent);

alarm_manager.set(AlarmManager.RTC_WAKEUP,alarm_time_in_millis, pIntent); 
```

只是想减少噪音。“字符串”可能用于序列化或其他用途，它可能会让人感到困惑。更独特的价值也有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T05:09:20.797

下面的代码对我有用。我通过 AndroidManifest 中带有意图过滤器的自定义意图调用 BroadcastReceiver。但是，我真的不能说为什么这会有所作为。话虽如此，下面的代码有效。

```
public class MainActivity extends Activity implements OnClickListener {
private Button button;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(this);
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:
        setAlarm();
        break;
    }       
} 

private void setAlarm() {
    AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    long interval = System.currentTimeMillis() + 10000; // 10 seconds from now
    Intent launchIntent = new Intent();
    launchIntent.putExtra("your_key", "your string value");
    launchIntent.setAction(MyBroadcastReceiver.CUSTOM_INTENT);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, launchIntent, 0);
    alarmManager.set(AlarmManager.RTC_WAKEUP,interval,
            pendingIntent);     
}
} 
```

和广播接收器：

```
public class MyBroadcastReceiver extends BroadcastReceiver {
public static final String CUSTOM_INTENT = "com.your_custom_intent";

@Override
public void onReceive(Context context, Intent intent) {
    Bundle bundle = intent.getExtras();
    String message = bundle.getString("your_key");
    Log.d("test", message);
}
} 
```

和 AndroidManifest：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.test2_2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name=".MyBroadcastReceiver">
        <intent-filter>
            <action android:name="com.your_custom_intent" />
        </intent-filter>
    </receiver>
</application>

</manifest> 
```

# asp.net - 如何在 SlickGrid 中智能地格式化日期时间？

> ID：11545031
> 
> 赞同：2
> 
> 时间：2012-07-18T15:35:24.070
> 
> 标签：asp.net, asp.net-mvc-3, jquery, slickgrid

问题：我将 ASP.NET gridview 更改为 SlickGrid。
到目前为止，它工作正常，我只是在日期格式方面遇到了一点问题。

我的 JSON 序列化测试数据如下所示：

```
[{
        "title" : "Task 1",        
        "duration" : "5 days",        
        "percentComplete" : 47,        
        "start" : "\/Date(1230764400000)\/",        
        "finish" : "\/Date(1241128800000)\/",        
        "effortDriven" : false
    },
    {
        "title" : "Task 2",        
        "duration" : "5 days",        
        "percentComplete" : 41,        
        "start" : "\/Date(1230764400000)\/",        
        "finish" : "\/Date(1241128800000)\/",        
        "effortDriven" : false
    },
    {
        "title" : "Task 3",        
        "duration" : "5 days",        
        "percentComplete" : 42,        
        "start" : "\/Date(1230764400000)\/",        
        "finish" : "\/Date(1241128800000)\/",        
        "effortDriven" : true
    },

    {
        "title" : "Task 100",        
        "duration" : "5 days",        
        "percentComplete" : 63,        
        "start" : "\/Date(1230764400000)\/",        
        "finish" : "\/Date(1241128800000)\/",        
        "effortDriven" : false
    }] 
```

这就是我使用 AJAX 加载数据的方式

```
<script type="text/javascript" language="javascript">
    Date.prototype.getTicksUTC = function () {
        return Date.parse(this.toUTCString()) + this.getUTCMilliseconds();
    } // End Function getTicksUTC

    function GetNavigationContent() 
    {
        var filter = "nofilter" + new Date().getTicksUTC();

        $.getJSON('/ajax/NavigationContent.ashx?filter=' + filter, function (data) {
            grid = new Slick.Grid($("#myGrid"), data, columns, options);

            grid.onSort = function (sortCol, sortAsc) 
            {
                sortdir = sortAsc ? 1 : -1;
                sortcol = sortCol.field;

                if (sortAsc == true)
                    data.sort(compare);
                else
                    data.reverse(compare);

                grid.render();
            }; // End Event onSort

        }); // End Function getJSON

    } // End Function GetNavigationContent

</script>

    var columns = [
         { id: "title", name: "Title", field: "title", width: 120, cssClass: "cell-title" }
        , { id: "duration", name: "Duration", field: "duration" }
        , { id: "%", name: "% Complete", field: "percentComplete", width: 80, resizable: false, formatter: Slick.Formatters.PercentCompleteBar }
        , { id: "start", name: "Start", field: "start", minWidth: 60 }
        , { id: "finish", name: "Finish", field: "finish", minWidth: 60 }
        , { id: "effort-driven", name: "Effort Driven", sortable: false, width: 80, minWidth: 20, maxWidth: 80, cssClass: "cell-effort-driven", field: "effortDriven", formatter: Slick.Formatters.Checkmark }
    ]; 
```

这是我的选择：

```
 var options = {
        editable: false,
        enableAddRow: false,
        enableCellNavigation: true
    };

    GetNavigationContent(); 
```

这是生成测试数据的 ajax 处理程序：

```
Imports System.Web
Imports System.Web.Services

Public Class NavigationContent
    Implements System.Web.IHttpHandler, System.Web.SessionState.IRequiresSessionState

    Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

        context.Response.ContentType = "application/json"

        Dim lsNavigationContent As New List(Of cNavigationRow)

        Dim seed As Random = New Random
        Dim nrThisNavigationRow As cNavigationRow = Nothing
        For i As Integer = 1 To 100 Step 1
            nrThisNavigationRow = New cNavigationRow

            nrThisNavigationRow.title = "Task " + i.ToString()
            nrThisNavigationRow.percentComplete = seed.Next(0, 100)
            nrThisNavigationRow.effortDriven = DirectCast(IIf(i Mod 3 = 0, True, False), Boolean)

            lsNavigationContent.Add(nrThisNavigationRow)
        Next

        Dim strJson As String = Tools.JSON.JsonHelper.Serialize(lsNavigationContent, False)
        context.Response.Write(strJson)
    End Sub

    Public Class cNavigationRow
        Public title As String = "Task 499"
        Public duration As String = "5 days"
        Public percentComplete As Integer = 9
        Public start As DateTime = System.DateTime.Parse("01.01.2009", New System.Globalization.CultureInfo("de-CH", False))
        Public finish As DateTime = System.DateTime.Parse("01.05.2009", New System.Globalization.CultureInfo("de-CH", False))
        Public effortDriven As Boolean = False
    End Class

    ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
        Get
            Return False
        End Get
    End Property

End Class 
```

问题是，这呈现如下（参见日期列）： ![光滑网格](../Images/5a4ffcd3a3518104b76835228fbb78cd.png)

如何最好地格式化日期列？
将其作为已格式化的字符串输入，还是有更好的方法，提供语言和/或格式代码？
如果我把它作为字符串放在那里，它将如何排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T16:35:49.463

SlickGrid 可以接受 Javascript 日期。但是，您可能希望在渲染之前将它们格式化为字符串。SlickGrid 使用列格式化程序来处理这个问题。

对于初学者来说，看看如何在这个例子中使用格式化程序：http: [//mleibman.github.com/SlickGrid/examples/example2-formatters.html](http://mleibman.github.com/SlickGrid/examples/example2-formatters.html)

现在，对于日期，您需要注册一个自定义格式化程序。您可以将此添加到`slick.formatters.js`. 在这里，我创建了一个自定义格式化程序，用于解析 Date 对象并返回格式化的字符串：

```
(function ($) {
  // register namespace
  $.extend(true, window, {
    "Slick": {
      "Formatters": {
        "PercentComplete": PercentCompleteFormatter,
        "PercentCompleteBar": PercentCompleteBarFormatter,
        "YesNo": YesNoFormatter,
        "Checkmark": CheckmarkFormatter,
        "Date": DateFormatter
      }
    }
  });

  function DateFormatter(row, cell, value, columnDef, dataContext) {
    return (value.getMonth()+1)+"/"+value.getDate()+"/"+value.getFullYear();
  } 
```

现在您可以使用此格式化程序正确格式化您的日期列。在您的示例中，您的列定义如下所示：

```
{ id: "start", name: "Start", field: "start", minWidth: 60, formatter: Slick.Formatters.Date } 
```

开始列中的日期现在看起来格式正确： ![在此处输入图像描述](../Images/0b365a2ef8f4bbccd5acb6ba1551a7fc.png)

如您所见，排序也可以正常工作。让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T07:21:56.550

我认为这不是在 SlickGrid 中使用自定义格式化程序的好案例。在我看来，在这种情况下基础数据是不正确的。问题是底层数组中的`Start`and字段被作为字符串处理。我真的认为这些应该是日期/时间类型。`Finish``data`

自定义格式化程序肯定会解决渲染问题，但并不能真正解决根本原因。例如，假设您想稍后根据这些日期值进行一些计算。

问题在于调用`Tools.JSON.JsonHelper.Serialize()`. 该方法没有以客户端可以轻松读取的格式序列化 datetime 类型。也许这个方法有一些覆盖可以让你指定格式？

`ScriptService`另一种可能性是在 ASP.Net 中调用 Json Web 服务时使用内置功能。这是我一直喜欢的方法。有关更多信息，请[尝试此处](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)。

如果这些都不可能，我认为最好在将数据绑定到 SlickGrid 之前解析从 Json Web 服务返回的日期值。从而确保您的`data`数组确实包含日期/时间值。

只是我的2美分。如果您真的只需要这样做，自定义格式化程序解决方案就可以正常工作。

**编辑**：如果有帮助，这里是我用来解析以 ASP 格式返回的日期的函数。

```
function parseASPDate(s) {
    if (s) {
        return new Date(parseInt(s.substr(6), 10));
    } else {
        return null;
    }
} 
```

你可以[在这里找到更多信息](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)。

# php - 如何在 PHP 的 require_once 中指定文件系统绝对路径？

> ID：11545034
> 
> 赞同：2
> 
> 时间：2012-07-18T15:35:38.537
> 
> 标签：php, path, filesystems, root, require-once

简而言之，如何在 PHP 中使用 require_once 关键字指定绝对文件系统路径？代码将在 CLI 中运行，而不是在网页上。什么是根文件路径？我正在运行 Windows，仅供参考。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:38:15.243

尝试使用[魔术常数`__DIR__`](http://php.net/manual/en/language.constants.predefined.php)

> `__DIR__` 文件的目录。如果在包含中使用，则返回包含文件的目录。这相当于 dirname( `__FILE__`)。此目录名称没有尾部斜杠，除非它是根目录。（在 PHP 5.3.0 中添加。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:38:11.107

在 Windows 上，它是反斜杠符号，如果你使用双引号，你也必须转义它们。

```
require_once("C:\\folder\\folder\\etc"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T15:37:19.500

```
require_once('/some/path/foo.php'); 
```

以 a 开头的路径`/`表示您使用的是绝对（从根目录开始）路径。

```
require_once('some/path/foo.php'); 
```

开始没有 a 的路径`/`表示您使用的是绝对（从[当前工作目录](http://nl.php.net/manual/en/function.getcwd.php)开始）路径。

否则，请查看 __FILE__ 和 __DIR__[魔术常量](http://php.net/manual/en/language.constants.predefined.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T15:37:31.793

好吧，`\`仅此一项就可以让您获得当前驱动器的根目录（通常`C:\`），或者如果您需要，您可以指定您需要的驱动器。请记住转义那些反斜杠，或者改用正斜杠（Windows 会默默地转换它们）

# java - 从二进制文件中读取特定字节

> ID：11545039
> 
> 赞同：2
> 
> 时间：2012-07-18T15:36:07.833
> 
> 标签：java, io, byte

我试图弄清楚如何使用 java 获取二进制文件中的特定字节。我已经阅读了大量有关字节级操作的内容，并且让自己彻底困惑了。现在我可以遍历一个文件，如下面的代码，并告诉它在我想要的字节处停止。但是我知道这是笨拙的，并且有一种“正确”的方法可以做到这一点。

因此，例如，如果我有一个文件并且我需要从偏移量 000400 返回字节，我该如何从 FileInputStream 中获取它？

```
public ByteLab() throws FileNotFoundException, IOException {
        String s = "/Volumes/Staging/Imaging_Workflow/B.Needs_Metadata/M1126/M1126-0001.001";
        File file = new File(s);
        FileInputStream in = new FileInputStream(file);
        int read;
        int count = 0;
        while((read = in.read()) != -1){          
            System.out.println(Integer.toHexString(count) + ": " + Integer.toHexString(read) + "\t");
            count++;
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T15:39:16.943

你需要[`RandomAccessFile`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)这份工作。您可以通过方法设置偏移量[`seek()`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#seek%28long%29)。

```
RandomAccessFile raf = new RandomAccessFile(file, "r");
raf.seek(400); // Goes to 400th byte.
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:39:22.807

您可以使用[`skip()`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#skip%28long%29)FileInputStream 的方法来“跳过 n 个字节”。

尽管请注意：

> 由于各种原因，skip 方法最终可能会跳过一些较小的字节数，可能是 0。

它返回跳过的实际字节数，因此您应该使用以下内容进行检查：

```
long skipped = in.skip(byteOffset);
if(skipped < byteOffset){ 
    // Error (not enough bytes skipped) 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:40:14.853

使用 a [`RandomAccessFile`](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)- 请参阅[此问题](https://stackoverflow.com/questions/4375118/reading-buffered-binary-file-with-seek)。

# c - VisualStudio 等效于 Arm #pragma anon_unions

> ID：11545041
> 
> 赞同：0
> 
> 时间：2012-07-18T15:36:13.243
> 
> 标签：c, struct, arm, keil

Arm“#pragma anon_unions”允许：

```
typedef struct {
    uint32_t sensorID;
    uint8_t  messageHeader;
    uint8_t  messageID;
    uint16_t payloadLength;
} Header;

typedef struct {
    uint8_t startOfPacket[SERIAL_SOP_SIZE]; 
    Header; // Anonymous.
    uint8_t payload[SIZE];
} Packet;

Packet packet;
packet.messageID = 1; // Referencing member of Header through a Packet. 
```

关于在 VisualStudio 中编译此代码的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:52:42.263

它在 Visual C++ 中编译，但[仅在 C 模式下](http://msdn.microsoft.com/en-us/library/z2cx9y4f)：

> Microsoft C 扩展允许您在另一个结构中声明结构变量，而无需为其命名。这些嵌套结构称为匿名结构。**C++ 不允许** 匿名结构。

# python - 来自每个循环的 Python 未定义函数

> ID：11545046
> 
> 赞同：1
> 
> 时间：2012-07-18T15:36:26.333
> 
> 标签：python, undefined

我在这里是一个完整的python n00b，只是试图将一些位混合在一起以使项目工作，但我正在努力解决我认为的一些语法。

这是我到目前为止的脚本：

```
#!/usr/bin/env python

from plugin import *
from siriObjects.systemObjects import ResultCallback
import uuid
import json
import random
import types
import urllib
import urllib2
import random
import re
import select
import socket
import struct
import sys
import thread
import time

class tivoRemote(Plugin):

        tivo_address = '192.168.0.9'
        tivo_name = ''
        tivo_swversions = {}
        have_zc = True
        captions_on = False
        sock = None
        outer = None

        def connect():
            """ Connect to the TiVo within five seconds or report error. """
            global sock
            try:
                sock = socket.socket()
                sock.settimeout(5)
                sock.connect((tivo_address, 31339))
                sock.settimeout(None)
            except Exception, msg:
                msg = 'Could not connect to %s:\n%s' % (tivo_name, msg)
                print(msg)

        def send(message):
            """ The core output function, called from irsend(). Re-connect if
                necessary (including restarting the status_update thread), send
                message, sleep, and check for errors.
                """

            if not sock:
                self.connect()
                thread.start_new_thread(status_update, ())
            try:
                sock.sendall(message)
                time.sleep(0.1)
            except Exception, msg:
                error_window(str(msg))

        def irsend(*codes):
            """ Expand a command sequence for send(). """
            for each in codes:
                self.send('IRCODE %s\r' % each)

        @register("en-US", ".*Change.*Channel.*")
        def channelChanger(self, speech, language, matchedRegex):
                if language == 'en-US':
                        answer = self.ask(u"Which channel would you like?")
                        self.say(u"Ok, one moment..".format(answer))
                        self.connect()
                        self.irsend(answer)
                self.complete_request() 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "/home/pi/SiriServerCore/plugin.py", line 150, in run
    self.__method(self, self.__speech, self.__lang,        self.__method.__dict__[__criteria_key__][self.__lang].match(self.__speech))
  File "/home/pi/SiriServerCore/plugins/tivoRemote/__init__.py", line 70, in     channelChanger
    self.irsend(format(answer))
  File "/home/pi/SiriServerCore/plugins/tivoRemote/__init__.py", line 61, in irsend
    self.send('IRCODE %s\r' % each)
NameError: global name 'self' is not defined 
```

如果我删除“自我”。我得到同样的错误，但没有定义“发送”。

在此先感谢您的帮助:)瑞恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:46:00.823

更有可能工作：

```
class tivoRemote(Plugin):

    def __init__(self):
        self.tivo_address = '192.168.0.9'
        self.tivo_name = ''
        self.tivo_swversions = {}
        self.have_zc = True
        self.captions_on = False
        self.sock = None
        self.outer = None

    def connect(self):
        """ Connect to the TiVo within five seconds or report error. """
        try:
            sock = socket.socket()
            sock.settimeout(5)
            sock.connect((tivo_address, 31339))
            sock.settimeout(None)
        except Exception, msg:
            msg = 'Could not connect to %s:\n%s' % (tivo_name, msg)
            print(msg)
        self.sock = sock

    def send(self, message):
        """ The core output function, called from irsend(). Re-connect if
            necessary (including restarting the status_update thread), send
            message, sleep, and check for errors.
        """

        if not self.sock:
            self.connect()
            thread.start_new_thread(status_update, ()) # status_update must be some global at this point
        try:
            self.sock.sendall(message)
            time.sleep(0.1)
        except Exception, msg:
            error_window(str(msg))

    def irsend(self, *codes):
        """ Expand a command sequence for send(). """
        for each in codes:
            self.send('IRCODE %s\r' % each)

    @register("en-US", ".*Change.*Channel.*")
    def channelChanger(self, speech, language, matchedRegex):
            if language == 'en-US':
                    answer = self.ask(u"Which channel would you like?")
                    self.say(u"Ok, one moment..".format(answer))
                    self.connect()
                    self.irsend(answer)
            self.complete_request() 
```

定义方法时需要使用`self`，并且必须使用它来访问当前实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:42:11.887

您需要将所有实例方法（使用 访问`self.`）定义`self`为第一个参数，您将习惯它：

```
class tivoRemote(Plugin):

    tivo_address = '192.168.0.9'
    tivo_name = ''
    tivo_swversions = {}
    have_zc = True
    captions_on = False
    sock = None
    outer = None

    def connect(self):
        """ Connect to the TiVo within five seconds or report error. """
        global sock
        try:
            sock = socket.socket()
            sock.settimeout(5)
            sock.connect((tivo_address, 31339))
            sock.settimeout(None)
        except Exception, msg:
            msg = 'Could not connect to %s:\n%s' % (tivo_name, msg)
            print(msg)

    def send(self, message):
        """ The core output function, called from irsend(). Re-connect if
            necessary (including restarting the status_update thread), send
            message, sleep, and check for errors.
            """

        if not sock:
            self.connect()
            thread.start_new_thread(status_update, ())
        try:
            sock.sendall(message)
            time.sleep(0.1)
        except Exception, msg:
            error_window(str(msg))

    def irsend(self, *codes):
        """ Expand a command sequence for send(). """
        for each in codes:
            self.send('IRCODE %s\r' % each)

    @register("en-US", ".*Change.*Channel.*")
    def channelChanger(speech, language, matchedRegex):
            if language == 'en-US':
                    answer = self.ask(u"Which channel would you like?")
                    self.say(u"Ok, one moment..".format(answer))
                    self.connect()
                    self.irsend(answer)
            self.complete_request() 
```

此外，如果您希望这些属性属于实例，而不是类（如静态属性），则必须在构造中定义它们（`__init__`这是最接近构造的东西）：

```
class tivoRemote(Plugin):
    def __init__(self):
        self.tivo_address = '192.168.0.9'
        self.tivo_name = ''
        self.tivo_swversions = {}
        self.have_zc = True
        self.captions_on = False
        self.sock = None
        self.outer = None 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:48:21.227

您正在创建的成员变量属于类而不是实例（您在类中定义变量的方式）。如果`send()`要从实例调用类似的方法，则这些函数的第一个参数必须是`self`. 您需要像这样修改整个代码：

```
class tivoRemote(..):
    def __init__(self):
        self.tivo_address = '192.168.0.9'
        self.tivo_name = '' #and so on for other members
        ....

    def send(self, msg):
        self.connect()
        self.sendall(..)

    def connect(self, ...):
        #self.sock
        self.sock = socket.socket()
        ....

    #and similar for all other method that you think is a part of "instance" add the 
    #first parameter as self 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T18:32:30.693

解释：

```
class MyThing(object):
    """I am a class definition

    Everything here is part of the class definition.

    Methods here are classmethods, they are considered "unbound"

    When you create an instance of this class like so:
        my_instance_of_class_MyThing = MyThing()

    the "my_instance_of_class_MyThing" now points to an object.

    that object is an instance object.

    that object is an instance object of MyThing

    the "my_instance_of_class_MyThing" now points to an instance object.

    the methods contained in the instance object are NOW "bound" to the instance

    bound methods are bound to an instance object

    bound methods are sent a reference to the thing they are bound too by
       python itself when they are called.
    """

    i_am_a_class_attribute = "I am a class attribute"

    def __init__(self):

        """ I am a method. I start my life as a class method unbound to
        any instance. Because I am unbound, when you call me I will
        complain to you in the form of an unbound exception call, thus
        likely crashing your application.

        When you create an instance the class I was defined in, 
        I will copy a bound copy of myself into the newly created instance.
        When you call the bound copy of myself, Python will politely send
        a reference of the instance object to the bound method as its 
        very first argument. Many people name that varible "self". Some use
        "me". Others programmers break with convention and use a 
        single character, but this is rare. 
        """

        i_am_a_init_local_reference_to = 
            "this string and only visible with in __init__()"

        # self is a variable name python sends to mything_instance.__init__() as the first argument
        # self points to the same thing mything_instance points to, 
        #     an INSTANCE of the class MyThing

        self.i_am_an_instance_reference_to = 
            '''this string and is visible to everthing that can access what "self" points too.'''

    def proof(self):
        try:
            print i_am_a_init_local_reference_to
        except AttributeError, error_message:
            print error_message
        else:
            print "This won't happen !!"
            print "It successfully printed i_am_a_init_local_reference_to"

        try:
            print self.i_am_an_instance_reference_to
        except AttributeError, error_message:
            print error_message
        else:
            print """See proof() can access self.i_am_an_instance_reference_to""" 
```

希望这对那些不知道为什么给出解决方案的人有所帮助。

# c++ - 如何使用 MPI 库仅针对进程子集调用 (c++) 函数？

> ID：11545047
> 
> 赞同：0
> 
> 时间：2012-07-18T15:36:31.450
> 
> 标签：c++, mpi, openmpi

这个问题说明了一切。我有三个沟通者（组也可用）。现在我想为一个通信子集调用 a 函数。那就是屏蔽其他子集的功能。这是可能的还是我应该明确地纠正一个循环并检查组中当前进程的存在，然后调用该函数。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:36:18.997

除了在`MPI_Allreduce()`. 最干净的做法是：

```
int group_rank;
// Test if current process belongs to "group"
MPI_Group_rank(group, &group_rank);
if (group_rank != MPI_UNDEFINED)
   call_the_function(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:56:50.857

你能修改创建三个通信器的代码吗？在这种情况下，我建议您添加一个变量（即`my_group`，如 Hristo 建议的那样），为程序运行时的其余部分保存组排名。因此，每当您需要调用特定于组（或通信器）的函数时，只需检查`group_rank`.

**基本原理**
大多数 MPI 程序无论如何都倾向于具有某种全局`my_rank`变量（它存储进程的等级），因此添加 a`my_group`将符合此编程策略。

# c# - 如何停止使用代码执行方法

> ID：11545053
> 
> 赞同：1
> 
> 时间：2012-07-18T15:36:45.227
> 
> 标签：c#, asp.net-mvc

我的控制器中有一个方法，我用 ajax 调用它。该方法可以非常频繁地调用（取决于用户的打字速度）。用户键入字母、单词。我希望在用户停止输入后调用该方法。

该方法的参数是用户编写的文本。

以我的方式，该方法在很短的时间内被调用了很多次。

有没有办法总是（在每个字母之后）调用该方法，但是如果立即调用该方法则立即停止执行？

示例：用户将慢慢写 10 个字母 - 该方法将被调用 10 次。示例：用户将快速写 10 个字母 - 该方法将被第 10 次调用或该方法将被调用 10 次但将停止执行前 9 次并仅执行第 10 次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:43:25.147

假设您使用 AJAX 调用它，那么我认为您最好将逻辑客户端放置。考虑使用像[throttle.js](http://remysharp.com/2010/07/21/throttling-function-calls/)这样的东西，它只在输入暂停后发布 Ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:51:52.670

您可以通过缓冲结果并将它们传递给此方法来完成此操作。基本上，通过将此方法包装在聚合器方法中，您可以防止它一直触发。

```
//... Class Impl

private string keys = String.Empty;
private readonly TimeSpan bufferDelay = new TimeSpan(100000);
private DateTime lastKeyPress = DateTime.UtcNow;

private void DoSomething(string text)
{
//do something to process text.
    keys = String.Empty;

}

public void DoSomethingBuffer(string text)
{
    keys =+ text;
    var now = DateTime.UtcNow;
    if((now-lastKeyPress) > bufferDelay)
{
    DoSomething(keys);
}
    lastKeyPress = now;

}
//... More Class Impl 
```

您需要使用聚合时间窗口来找到感觉自然的东西，但它应该相对简单。您将直接调用 DoSOthingBuffer 而不是 DoSomethign。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:30:12.083

您可以使用 javascript 计时器来完成此操作。这是一个示例，它会在用户最后一次按键后半秒后触发任何逻辑。如果用户继续输入，则计时器会不断被取消：

```
$(function() {
    var timer;
    $(".typeAhead").keypress(function() {
        if (timer != null)
            clearTimeout(timer);
        timer = setTimeout(function() {
            // do ajax call
        }, 500);
    });
}); 
```

此代码段使用 jquery，但您可以不使用它。只需使用`getElementById()`而不是选择器。

# django - django-storages s3boto 后端上传的文件链接已损坏

> ID：11545054
> 
> 赞同：1
> 
> 时间：2012-07-18T15:36:46.863
> 
> 标签：django, amazon-s3, boto, django-file-upload, django-storage

我使用 django-storages 的 s3boto 后端作为我的默认存储后端。

如果我通过 AWS 控制台上传到我的可公开访问的存储桶，我可以毫无问题地访问它。如果我使用我的 Django 表单保存文件，该文件会以正确的大小出现在 AWS 控制台中。但是使用 AWS 的`open`菜单命令和 Django 管理员，文件的链接显示一个损坏的图像。

我的相关设置是：

```
AWS_ACCESS_KEY_ID = '***'
AWS_SECRET_ACCESS_KEY = '***'
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_STORAGE_BUCKET_NAME = 'mybucket'
AWS_QUERYSTRING_AUTH = False 
```

**更新：**

我检查了图像 url `curl -v`，响应是`HTTP/1.1 200 OK`。响应头是：

```
< HTTP/1.1 200 OK
< x-amz-id-2: /kR/hcgWI2vUOP7/1+kqAsKfSSx4BWtxnipNcQAadeRaJzmNuBIgD17Wff9N856T
< x-amz-request-id: 17C13B7A2B20E50A
< Date: Thu, 19 Jul 2012 05:05:58 GMT
< Last-Modified: Wed, 18 Jul 2012 19:26:48 GMT
< ETag: "35b2ef1fb7552b850cf477f04141dddc"
< Accept-Ranges: bytes
< Content-Type: image/jpeg
< Content-Length: 101086
< Server: AmazonS3 
```

然后二进制字节开始流动。所以文件必须在上传过程中以某种方式损坏。

因为我`<input type="file" multiple>`在上传表单中使用，所以我像这样手动处理文件上传：

```
if self.request.FILES:
    files = self.request.FILES.getlist('files')
    for file in files:
        try:
            # Check the file is an image
            Image.open(file).verify()
        except:
            # not an image
            pass
        else:
            photo = Photo()
            photo.image = file
            photo.save() 
```

这适用于默认存储后端，但显然在使用 s3boto 后端时出现了问题。

你觉得我可能做错了什么？

# list - 使用的内存：std::list vs std::forward_list

> ID：11545058
> 
> 赞同：9
> 
> 时间：2012-07-18T15:37:02.390
> 
> 标签：list

因为 list 比 forward_list 多了一个指针（前一个指针），所以如果它们都持有相同数量的元素，即 1<<30，list 将使用几乎 1/3 的内存。对？

然后，如果我重复调用 resize 越来越大，forward_list 必须能够调整大小比 list 大得多。

测试代码：

```
#include<forward_list>
#include<list>
#include<iostream>
int main(){
    using namespace std;
    typedef list<char> list_t;
    //typedef forward_list<char> list_t;
    list_t l;
    list_t::size_type i = 0;
    try{
        while(1){
            l.resize(i += (1<<20));
            cerr<<i<<" ";
        }
    }
    catch(...){
        cerr<<endl;
    }
    return 0;
} 
```

令我惊讶的是，当进程被终止时，它们的大小几乎相同......任何人都可以解释它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T15:06:29.747

您应该发现，通过更好的记忆嗅探，您最初假设 a`std::list<T>`将消耗三倍的能量是正确的。[在我的 Windows 机器上，我使用GetProcessMemoryInfo](http://msdn.microsoft.com/en-us/library/ms683219%28v=vs.85%29.aspx)快速创建了一个内存使用程序

这是我的程序的核心：

```
int main()
{
    size_t initMemory = MemoryUsage();
    std::list<unsigned char> linkedList;

    for (int i = 0; i < ITERATIONS; i++)
        linkedList.push_back(i % 256);
    size_t linkedListMemoryUsage = MemoryUsage() - initMemory;

    std::forward_list<unsigned char> forwardList;
    for (int i = 0; i < ITERATIONS; i++)
        forwardList.push_front(i % 256);
    size_t forwardListMemoryUsage = MemoryUsage() - linkedListMemoryUsage - initMemory;

    std::cout << "Bytes used by Linked List: " << linkedListMemoryUsage << std::endl;
    std::cout << "Bytes used by Forward List: " << forwardListMemoryUsage << std::endl;

    return 0;
} 
```

在发布版本下运行它时的结果：

```
#define ITERATIONS 128
Bytes used by Linked List: 24576
Bytes used by Forward List: 8192
8192 * 3 = 24576 
```

这是来自[cplusplus.com](http://www.cplusplus.com/reference/stl/forward_list/)的引述，它甚至说两个容器之间应该存在明显的内存差异。

> forward_list 容器和 list 容器之间的主要设计区别在于，第一个容器在内部只保留一个到下一个元素的链接，而后者每个元素保留两个链接：一个指向下一个元素，一个指向前一个元素，允许高效双向迭代，但每个元素消耗额外的存储空间，并且插入和删除元素的时间开销稍高。forward_list 对象因此比列表对象更有效，尽管它们只能向前迭代。

使用列表上的 resize 函数，就像您在发布的代码中所做的那样，内存差异更加明显，`std::list<T>`消耗的内存是原来的四倍。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-05T23:22:09.097

我知道这个问题已经 4 岁了，但接受的答案没有意义（正如贾斯汀雷蒙德指出的那样）。

Nick Babcock 的方法不精确，因为元素的数量太少；堆上总是有一些开销，你也会测量。

为了展示这一点，我使用了更大的数据类型和更多的元素 (4096)：On `g++ 6.2.1`and `linux x64` `sizeof(void*) = 8`and `sizeof (bigDataType_t) = 800`( `bigData_t`is `long[100]`)。

那么我们期待什么呢？每种类型的列表都必须在堆上存储实际数据；`std::list`每个链接存储 2 个指针（向后和向前），`std::forward_list`只有一个（向前）。

预期内存`std::list`： `4096 x 800 + 2 x 8 x 4096 = 3,342,336 bytes`

的实际内存`std::list`：`3,415,040 bytes`

预期内存`std::forward_list`： `4096 x 800 + 1 x 8 x 4096 = 3,309,568 bytes`

的实际内存`std::forward_list`：`3,382,272 bytes`

我使用[Massif](http://valgrind.org/docs/manual/ms-manual.html)来获取程序的堆使用情况。

正如我们所看到的，这些数字非常吻合。使用大数据类型时，额外指针的内存没有太大区别！

当使用`char`as 数据类型（作为 OP）时，预期和实际的内存占用不太合适，很可能是因为一些开销。但是，内存消耗没有因子 3。

`std::list: Expected 69,632 bytes, actual: 171,008 bytes`

`std::forward_list: Expected 36,864 bytes, actual: 138,240 bytes`

我的代码：

```
#include <list>
#include <forward_list>

struct bigData_t {
    long foo[100];
};
typedef bigData_t myType_t;
// typedef char myType_t;

int main()
{
#ifdef USE_FORWARD_LIST
    std::forward_list<myType_t> linkedList;
#else
    std::list<myType_t> linkedList;
#endif
    for (int i = 0; i < 4096; i++) {
        myType_t bigData;
        linkedList.push_front(bigData);
    }
    return 0;
} 
```

# python - matplotlib 自动缩放轴以包含注释

> ID：11545062
> 
> 赞同：10
> 
> 时间：2012-07-18T15:37:11.807
> 
> 标签：python, matplotlib, axes

有谁知道扩展绘图区域以包含注释的简单方法？我有一个图，其中一些标签是长字符串和/或多行字符串，而不是将这些标签剪裁到轴上，我想扩展轴以包含注释。

Autoscale_view 没有这样做，并且 ax.relim 没有选择注释的位置，所以这似乎不是一个选项。

我试图做类似下面的代码，它遍历所有注释（假设它们在数据坐标中）以获取它们的范围，然后相应地更新轴，但理想情况下我不希望我的注释在数据坐标中（它们与实际数据点有偏差）。

```
xmin, xmax = plt.xlim()
ymin, ymax = plt.ylim()
# expand figure to include labels
for l in my_labels:
    # get box surrounding text, in data coordinates
    bbox = l.get_window_extent(renderer=plt.gcf().canvas.get_renderer())
    l_xmin, l_ymin, l_xmax, l_ymax = bbox.extents
    xmin = min(xmin, l_xmin); xmax = max(xmax, l_xmax); ymin = min(ymin, l_ymin); ymax = max(ymax, l_ymax)
plt.xlim(xmin, xmax)
plt.ylim(ymin, ymax) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-17T18:29:29.107

我也为此苦苦挣扎。关键是 matplotlib 在实际绘制文本之前不会确定文本的大小。因此，您需要显式调用`plt.draw()`，然后调整边界，然后再次绘制。

[根据文档](http://matplotlib.org/api/text_api.html#matplotlib.text.Annotation.get_window_extent)，该`get_window_extent`方法应该以显示坐标而不是数据坐标给出答案。但是，如果尚未绘制画布，它似乎会响应您在关键字参数中指定的任何坐标系。这就是为什么上面的代码可以使用，但不能使用的原因。`textcoords``annotate``textcoords='data'``'offset points'`

这是一个例子：

```
x = np.linspace(0,360,101)
y = np.sin(np.radians(x))

line, = plt.plot(x, y)
label = plt.annotate('finish', (360,0),
                     xytext=(12, 0), textcoords='offset points',
                     ha='left', va='center')

bbox = label.get_window_extent(plt.gcf().canvas.get_renderer())
print(bbox.extents) 
```

[![带有注释的绘图](../Images/8f98d7d25ea9cefa7c0f8326d9113488.png)](https://i.stack.imgur.com/h8HCU.png)

```
array([ 12\.     ,  -5\.     ,  42.84375,   5\.     ]) 
```

我们想要更改限制，使文本标签位于轴内。given的值`bbox`没有多大帮助：因为它是相对于标记点的点数：在 x 中偏移 12 个点，一个字符串显然将超过 30 点长，采用 10 点字体（-5 到 5 英寸） y)。弄清楚如何从那里到达一组新的轴边界并非易事。

然而，如果我们在绘制之后再次调用该方法，我们会得到一个完全不同的 bbox：

```
bbox = label.get_window_extent(plt.gcf().canvas.get_renderer())
print(bbox.extents) 
```

现在我们得到

```
array([ 578.36666667,  216.66666667,  609.21041667,  226.66666667]) 
```

这是在显示坐标中，我们可以`ax.transData`像我们习惯的那样进行转换。所以为了让我们的标签进入边界，我们可以这样做：

```
x = np.linspace(0,360,101)
y = np.sin(np.radians(x))

line, = plt.plot(x, y)
label = plt.annotate('finish', (360,0),
                     xytext=(8, 0), textcoords='offset points',
                     ha='left', va='center')

plt.draw()
bbox = label.get_window_extent()

ax = plt.gca()
bbox_data = bbox.transformed(ax.transData.inverted())
ax.update_datalim(bbox_data.corners())
ax.autoscale_view() 
```

[![固定地块](../Images/c2f95d656ec6709e80b159223102f648.png)](https://i.stack.imgur.com/yC93h.png)

请注意，在绘图绘制一次后不再需要显式传递`plt.gcf().canvas.get_renderer()`给。`get_window_extent`另外，我直接使用`update_datalim`而不是直接使用`xlim`，`ylim`以便自动缩放可以自动将自身调整为整数。

[我在这里](https://gist.github.com/baldwint/8cd11977c97d0f685be6)以笔记本格式发布了这个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T14:26:17.287

对我来说`tight_layout`通常可以解决问题，但在某些情况下，我不得不使用[subplots_adjust](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.subplots_adjust)的“手动”调整，如下所示：

```
fig = plt.figure()
fig.subplots_adjust(bottom=0.2, top=0.12, left=0.12, right=0.1) 
```

这些数字通常不会发生显着变化，因此您可以修复它们，而不是尝试根据实际绘图进行计算。

顺便说一句，像您在示例中所做的那样设置 xlim 只会更改您绘制的数据范围，而不是所有标签周围的白色区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T09:01:06.970

中介绍`matplotlib1.1`了`tight_layout`解决一些布局问题。[这里](http://matplotlib.sourceforge.net/users/tight_layout_guide.html#plotting-guide-tight-layout)有一个很好的教程。

# wordpress - 计数小部件 WordPress

> ID：11545066
> 
> 赞同：0
> 
> 时间：2012-07-18T15:37:18.800
> 
> 标签：wordpress, widget

有没有办法在 WordPress 的小部件区域中计算小部件。

我需要为每个第三个小部件添加特定的类。

例如：

```
<div class="widget-item">...</div>
<div class="widget-item">...</div>
<div class="widget-item foo">...</div>

<div class="widget-item">...</div>
<div class="widget-item">...</div>
<div class="widget-item foo">...</div> 
```

等等...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:53:01.633

也许您可以`dynamic_sidebar_params`为此使用钩子。

这是一个不太不同的教程： [http ://wpshock.com/add-first-last-css-class-automatically-to-wordpress-widgets/](http://wpshock.com/add-first-last-css-class-automatically-to-wordpress-widgets/)

在所描述的解决方案中，您保留一个全局变量来计算当前侧边栏小部件。因此，这样的事情应该使您能够为每个第三个小部件添加一个类：

```
if(($myGlobalCount % 3) == 0){
 //add a custom class
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:39:56.957

你可以用 CSS 做到这一点

```
div.widget-item:nth-child(3n){ 
} 
```

# java - Java 类加载器何时参与？

> ID：11545067
> 
> 赞同：17
> 
> 时间：2012-07-18T15:37:18.720
> 
> 标签：java, classloader

有 1000 万篇关于Java 类加载器是*什么以及**如何*/*为什么*编写自己的类加载器的文章和文档……但它们似乎都在假设一些我无法找到简单答案的事情！

我了解类加载器的工作：读取字节码并从中构造一个对象。不同的类加载器以不同的方式执行此操作，等等。

但是我从来不需要在我自己的代码中针对类加载器 API 编写代码，也从来不需要编写自己的代码，我很难理解自己的代码**何时`ClassLoader`真正触发。**

例如：

```
public static void main(String[] args) {
    Fizz fizz = new Fizz();
    fuzz.buzz();
} 
```

在这里，我们有一个`Fizz`对象。在`Fizz`实例化 a 之前，我们需要一个类加载器来启动并加载`Fizz.class`到它的缓存中。**这发生在何时何地？！？！**它在我的代码中没有明确显示，所以它必须隐含在 JRE 中的某个地方......？

与该问题相切，如果我编写自己的类加载器，例如，`WidgetClassLoader`并希望将其配置为加载我的所有应用程序的类，或者只是我的`Fizz.class`，我如何将它“绑定”`WidgetClassLoader`到我的应用程序中，以便它知道要使用哪个类加载器? 我的代码需要显式调用这个类加载器还是像第一个示例一样隐含？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T16:06:39.587

你的问题不像你现在想的那么简单。

您的 Fizz 示例： Fizz 何时加载？这是在[JLS（第 5.4 章：链接）](http://docs.oracle.com/javase/specs/)中定义的。它没有定义何时加载 Fizz，但它保证了可见行为。对于'when'部分，如果找不到Fizz，则会从第一个访问Fizz的语句中抛出异常（Fizz fizz = new Fizz()）。我很确定在这种情况下它会特别是新的 Fizz() 因为表达式的右侧首先被评估。如果你这样写：

```
Fizz fizz = null;
fizz = new Fizz(); 
```

在这种情况下， Fizz fizz = null 已经抛出异常，因为它是第一次访问 Fizz 类。

谁加载 Fizz？当必须加载一个类时，“属于”需要该类的代码的类加载器用于获取该类。在 Fizz 示例中，这将是使用 main 方法加载类的类加载器。当然，如果类加载器不能自己加载 Fizz，它可以选择委托给它的父类加载器。

如何让 JVM 使用*我的*ClassLoader？有两种方式，显式或隐式。明确地：您可以通过调用其方法通过您自己的类加载器加载一个类。隐含地：当您从已经从类加载器加载的类中执行代码（意味着方法或初始化程序）并且需要在该过程中解析类引用时，您的类加载器将被自动使用，因为它是加载代码的类加载器第一名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:46:56.330

Java 有一个默认的类加载器。这会在默认类路径中查找类声明。如果您编写自己的类加载器，您可以（并且应该）设置父类加载器。如果您没有其他人，这将是默认设置。如果你不这样做，你的类加载器将无法找到 java API 类。如果 java 寻找一个类，它不会从你的自定义类加载器开始寻找，而是从父类加载器开始。如果这个有父母，它会从那里开始，依此类推。只有在找不到类时，才会使用下一个子类加载器再次尝试。只要有孩子，这种情况就会继续。如果链中的任何加载器都找不到该类，`ClassNotFoundException`则抛出 a。

当然，如果您首先将其设置为默认类加载器（通过调用`Thread.currentThread().setContextClassLoader()`）或手动加载类（通过调用`loadClass()`），java 只会使用您的类加载器。

我不确定何时调用类加载器。我认为它是在启动程序（在所有声明为的类`import`上）或第一次使用类（变量声明或构造函数调用）时调用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:17:04.787

类的实际创建发生在`defineClass`. 该类是使用来自多个源中的任何一个的字节数组创建的。

到达`defineClass`（即`protected`）的正常路径是通过`findClass`（当然，也是`protected`）。所以通常的入口点是`loadClass`-> `findClass`-> `defineClass`。但是对于特殊情况还有其他途径。

（整个事情相当复杂，并且代表了随着保护变得更加复杂和访问模式更加多样化而添加层的历史。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T10:29:12.497

如果您对类加载器以及它们何时以及如何工作感兴趣，您还可以查看[OSGi 规范](http://www.osgi.org/Specifications/HomePage)——在我看来，这对您来说将是一本非常有趣的读物。OSGi 是一个Java 框架，它提供模块化、清晰的代码分离和生命周期管理，目前非常流行（例如Eclipse 本身就是基于一个）。

OSGi 大量使用类加载器，并且有一个非常好的解释何时以及如何在规范中发生所有与类加载有关的事情。基本上，它们为每个包都有一个单独的包类加载器（这就是模块的调用方式），这些类加载器负责依赖关系并从另一个包中获取正确的类。

# kinect - 需要任何其他硬件项目吗？

> ID：11545069
> 
> 赞同：-2
> 
> 时间：2012-07-18T15:37:25.087
> 
> 标签：kinect, xbox

我最近购买了带有 kinect 的 xbox 360 捆绑包。我想开始使用 kinect 编程，但不确定是否需要任何其他硬件接口来将 kinect 连接到我的计算机。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:43:25.927

Kinect 有两个版本，一个需要一些额外的硬件才能连接到计算机，一个不需要。如果你把你的捆绑在一起，你可能需要一根额外的电缆。看看这篇文章：

[http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/e98786bb-560e-4603-9d08-67033d58c51a/](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/e98786bb-560e-4603-9d08-67033d58c51a/)

# sharepoint - 基于名称字段的 Sharepoint 2010 计算列

> ID：11545071
> 
> 赞同：1
> 
> 时间：2012-07-18T15:37:31.310
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, sharepoint-workflow

我需要绕过阻止在计算列中使用 Name 列的限制。

我基本上需要创建一个新的库列（BeginsWith），它是（Name）值的前三个字母 - 例如将“analysis_type_dim”变成“ana”

这可以从标题列而不是名称列（通过 UI）完成。我尝试创建一个循环工作流，但微软在 2010 年禁用了它:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:30:42.547

您可以创建一个新列 NameAsText 并将具有工作流的字段设置为字段“名称”的值。然后您可以使用公式 =mid([NameAsText];1;3) 创建一个新的计算列，您将获得“名称”字段的前三个字母。

# php - 在 PHP 中使用 array_push

> ID：11545073
> 
> 赞同：0
> 
> 时间：2012-07-18T15:37:33.027
> 
> 标签：php, arrays

对于这个冗长/忙碌的问题，我很抱歉。我正在尝试从 MySQL 查询和`base64_encode`图像 blob 数据中获取结果，将其返回到数组，然后最后返回`json_encode`结果，以便我可以在我的 Android 应用程序中使用它们。我知道 Android 端的所有内容都已正确设置。

我所拥有的是以下内容：

**PHP/SQL：**

```
$query = "SELECT `locations`.`businessName`, `photos`.`img` 
        FROM `locations` 
        JOIN `photos` ON `locations`.`co_id` = `photos`.`co_id` 
        WHERE `locations`.`businessName` = '".$companyID."'";

    mysql_connect($dbserver, $dbusername, $dbpassword) or die(mysql_error());
    mysql_select_db($dbname) or die(mysql_error());

    $result = mysql_query($query) or die(mysql_error());  
    $num = mysql_numrows($result);
    $row = mysql_fetch_assoc($result);

    $i = 0;
    $rows = array();
    while ($i < $num) {

        $img = mysql_result($result, $i, "img");
        $finalImg['img'] = base64_encode($img);
        $businessName['businessName'] = mysql_result($result, $i, "businessName");

        $finalArray = array_push($rows, $businessName, $finalImg);
        // I know that array_push is pushing each variable as a separate array item
        // I tried creating an alternative variable that amends the two together
        // But that didn't work, result printed [Array, Array] [Array, Array]
        // Was I on the right track?

        $i++;
    }

    print json_encode($rows); 
```

**返回 8 个结果：**

```
[0] => {
    ["businessName"]=> string(12) "Some Company" }
[1] => {
    ["img"]=> string(145968) "/9j/4AAQSkZJRgABAQEAYABgAAD/4QIw..." } 
```

**我需要的：**

我希望结果看起来像这样，只有 4 个结果。

```
[0] => {
    ["businessName"] => string(12) "Some Company" 
    ["img"] => string(145968) "/9j/4AAQSkZJRgABAQEAYABgAAD/4QIw..." }
[1] => {
    ["businessName"] => string(12) "Some Company", 
    ["img"] => string(145968) "/9j/4AAQSkZJRgABAQEAYABgAAD/4QIw..." } 
```

* * *

**Android 应用程序片段**：

```
jArray = new JSONArray(result);
for (int i = 0; i < jArray.length(); i++) {
    JSONObject jObject = jArray.getJSONObject(i);
    String testerPhoto = jObject.getString("img");
    //Process image. Base64 decode... etc 
```

**安卓错误：**

```
07-18 11:28:52.573: E/onPostExecute(14562): FAILED: No value for img 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:41:42.307

这要简单得多：

```
$i = 0;
$rows = array();
while ($i++ < $num) {
    $img = mysql_result($result, $i, "img");
    $rows[] array(
        'businessName' => mysql_result($result, $i, "businessName"),
        'img' => base64_encode($img),
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:40:23.417

试试这个：

```
array_push($rows, array_merge($businessName, $finalImg)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:44:54.953

那这个呢？

```
$rows[] = array(
  'img' => base64_encode($img),
  'businessName' => mysql_result($result, $i, "businessName")
); 
```

或者

```
array_push($rows, array_merge($businessName, $finalImg)); 
```

# c++ - 这个关于类模板中静态的编译器错误是什么意思？

> ID：11545075
> 
> 赞同：0
> 
> 时间：2012-07-18T15:37:42.937
> 
> 标签：c++, templates, static

我在玩类模板和静态，看到了这个：

```
template<int I>
struct rat
{
    static bool k;
};

bool rat<3>::k = 0; //this is line 84 of the only source file play.cpp

int main(int argc, char **argv)
{

    rat<3> r;
} 
```

编译器错误：play.cpp:84：错误：模板参数列表太少

我想当我说 rat<3>::ki 正在实例化该模板并为该特定模板定义静态时，因此`rat<3>`从那里开始使用就可以了..为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:39:16.180

应该

```
template<>
bool rat<3>::k = 0; 
```

但更好用，`false`因为它更具可读性`bool``0`

此外，如果你想让你为所有模板初始化变量`true`，例如：

```
template<int I>
bool rat<I>::k = true; 
```

您仍然可以将模板专门用于`I = 3`：

```
template<>
bool rat<3>::k = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:39:46.660

您忘记了模板：

```
template<>
bool rat<3>::k = 0; 
```

当然*，* MSVS 接受您的语法（但如果我关闭语言扩展，则不会）。

# java - 在 Twitter 集成中未正确调用回调

> ID：11545077
> 
> 赞同：0
> 
> 时间：2012-07-18T15:37:50.797
> 
> 标签：java, android, twitter

我正在使用以下代码。

```
<activity android:name=".PrepareRequestTokenActivity" android:launchMode="singleTask">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="http" android:host="m.devbee.com" />
    </intent-filter>
 </activity> 
```

我的 Twitter 应用回调 URL 是`Callback URL http://m.devbee.com`

现在的问题是在调用这个函数之后

```
@Override
    protected Void doInBackground(Void... params) {

        try {
            Log.i(TAG, "Retrieving request token from Google servers");
            final String url = provider.retrieveRequestToken(consumer, Constants.OAUTH_CALLBACK_URL);
            Log.i(TAG, "Popping a browser with the authorize URL : " + url);
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
            context.startActivity(intent);
        } catch (Exception e) {
            Log.e(TAG, "Error during OAUth retrieve request token", e);
        }

        return null;
    } 
```

我在浏览器中单击“授权应用程序”按钮，而不是调用我的`PrepareRequestTokenActivity`活动，而是给出错误提示

```
Web Page Not avaliable. 
```

为什么没有调用活动。网址都是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:17:21.993

当您为 OAuth 身份验证流（request_tokens 方法）请求临时令牌时，它不会返回网页，而是返回一些像 HTTP 请求中的 GET（或 POST）参数一样编写的参数。有关更多详细信息，请参阅相应的文档：[https](https://dev.twitter.com/docs/api/1/post/oauth/request_token) ://dev.twitter.com/docs/api/1/post/oauth/request_token 。此外，您是否按照 Twitter 说明正确验证您的请求（[https://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)）？

# c# - 这个 c# 语法有什么问题？

> ID：11545080
> 
> 赞同：0
> 
> 时间：2012-07-18T15:37:58.423
> 
> 标签：c#

```
using System;
public class Test
{
    public static void Main()
    {
        int n = 600851475143;
        int x = 1;
        While (x<n)
        {
        if(n%x==0)
            {
                Console.WriteLine(x);
            }    
        x++;
        }    
    }    
} 
```

给我一个 { 不合适的错误，但我看不出有什么问题。任何人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:39:37.737

`While`不应大写，并且您的值`n`对于 int 来说太大了。

你的牙套似乎没有问题。如果你修复了这两个错误，它应该可以编译。

编辑：您发布的代码文件与您在问题中发布的错误完全不同。AC#程序只能有一个入口点，这就是做什么`public static void Main()`。如果您从`Program`文件中复制并粘贴方法签名，它将不会编译。更改`Main`为任何其他有效签名，它应该可以编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:40:32.433

`While (x<n)`应该`while (x<n)`

而且您正在为变量分配一个`long`值`int`。

一个变量可以容纳的最大值[是](https://stackoverflow.com/questions/94591/what-is-the-maximum-value-for-a-int32)**2,147,483,647**；所以你可以把它改成 long`int`

 **```
long  n = 600851475143; 
```**

# gridview - 使用 LinqDataSource 从 Gridview 中删除

> ID：11545086
> 
> 赞同：1
> 
> 时间：2012-07-18T15:38:12.843
> 
> 标签：gridview, linqdatasource

得到一个绑定到 LinqDataSource 的 gridview，该 LinqDataSource 从 MsSQL 数据库视图获取其数据。

该视图正在拉入各种表格以生成我想要的列表。这一切都很好。

但是，我无法删除，当我尝试使用 delete 时，我收到错误消息：无法对“表（vwMyView）”执行创建、更新或删除操作，因为它没有主键。好吧，那里有许多表确实具有主键，并且我已将 GridView 设置为我想在这种情况下使用的 DatakeyName 'inID'。

我的 LDS 看起来像这样：

```
<asp:LinqDataSource runat="server" ID="ldsMain" EnableDelete="True" ContextTypeName="MyCode.Classes.Data.MyDataContext" OrderBy="inFirstName" OnDeleting="ldsMain_OnDeleting" TableName="MyView"></asp:LinqDataSource> 
```

甚至尝试删除 OnDeleting。

我需要它直接从主表中删除 MyTable 而不是视图，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:54:16.237

您是否尝试过以下属性`GridView`

```
AutoGenerateEditButton="true"
AutoGenerateDeleteButton="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T17:09:39.350

让我们退后一步……这是只读视图还是可更新视图？

如果视图是只读的，那么您需要重新配置 LinqDataSource 以引用 MyTable 而不是视图。但是，如果它是一个可更新视图，那么您可以执行 INSERT、UPDATE 和 DELETE 操作。

# java - 如何不使用外部类名从内部类获取对外部类的引用？

> ID：11545088
> 
> 赞同：5
> 
> 时间：2012-07-18T15:38:13.947
> 
> 标签：java, android

这是示例代码：

```
Class SomeClass extends Activity {
    public void someMethod() {
        Runnable r = new Runnable() {
            public void run() {
                Intent service = new Intent(SomeClass.this, SomeOtherClass.class);
                // ...
            }
        }
    }
} 
```

如何将代码更改为不使用`SomeClass`( in `new Intent(SomeClass.this, ...)`)？我想将此示例放在多个类中，并且我不希望每次都使用不同的类名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:38:51.667

**更短的方法（建议）：**

`SomeClass.this`用Intent 替换应该`getApplicationContext()`可以解决问题。

**我使用的方法（有点冗长，可能不是两者中最好的）：**

在每个类中，制作一个`private Context mContext;`
然后，在`onCreate()`每个类中，制作`mContext = this;`
最后，`SomeClass.this`在您的 Intent 中替换为`mContext`。

# mercurial - 你可以从 Web 浏览器链接打开 TortoiseHG 中的提交吗？

> ID：11545091
> 
> 赞同：0
> 
> 时间：2012-07-18T15:38:22.853
> 
> 标签：mercurial, tortoisehg

TortoiseHG 具有用于链接到其他变更集的内置 URL。

是否有从 Web 浏览器使用这些的 URI 方案？像`hg://cset:tip`什么？

这样，您就可以从 Web 浏览器获得一个可点击的链接，直接指向您需要的变更集……

或者，为 Chrome、Firefox 和 IE 实现这样的东西有多难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T19:25:08.163

使用 TortoiseHg 的问题是帮助台人员需要他们机器上的 repo。

如果您的 Mercurial 存储库保存在中央服务器上并且您使用，`hgweb`那么您已经可以使用此功能。例如，您可以去`http://hg.server/path/to/repo/rev/71745da8b9b3`查看`71745da8b9b3`特定存储库上的变更集。

# c++ - 函数指针的通用映射。有可能吗？有什么选择吗？

> ID：11545098
> 
> 赞同：1
> 
> 时间：2012-07-18T15:38:46.427
> 
> 标签：c++

我想知道是否可以使用对象的多个函数指针成员创建映射。

这可能吗？此方法可能具有不同的返回类型或输入参数。

如果没有，（我想这阅读了很多相关主题），我想要可以完成的典型方式，例如在 GUI 中，如果您更改某些参数，然后您必须调用一个或另一个设置器，具体取决于在您更改的文本框中。

是否有任何设计模式可以在不使用巨大的 if/else 结构的情况下做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:43:46.720

在这里查看我的问题：[使用函数指针的 STL 映射](https://stackoverflow.com/questions/2136998/using-a-stl-map-of-function-pointers)

该方法将相似，但直接存储函数指针，您将拥有一个结构

```
enum ArgumentType
{
  BOOL,
  INT,
  whatever
};

struct FunctionDecl
{
  void *function;
  ArgumentType returnType;
  ArgumentType arguments[];
} 
```

# mysql - 拒绝错误 SQL 1142

> ID：11545102
> 
> 赞同：0
> 
> 时间：2012-07-18T15:38:52.480
> 
> 标签：mysql, select, grant

我在我的服务器中安装了 4 个 phpbb3 forums ru，位于同一个 SQL 数据库中，但位于不同的数据库中。我想分享 phpbb_Users 表！我按照 dcz 中写的步骤操作：[http](http://www.phpbb.com/community/viewtopic.php?f=46&t=562513&start=45#p6498115) ://www.phpbb.com/community/viewtopic.php?f=46&t=562513&start= 45#p6498115 ，但是在将 $table_shared 放入 config.php 和 constants.php 之后，出现此错误是显示：

一般错误 - SQL 错误 [mysqli]

```
SELECT command denied to user 'sql1234_user'@'localhost' for table 'phpbb_config' [1142]
An sql error occurred while fetching this page. Please contact an administrator if this problem persists. 
```

已经尝试授予用户但显示相同的错误，用户访问拒绝授予。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T02:37:21.170

我有同样的问题，并通过谷歌搜索找到了这个，我想我会发布我的解决方案以防有人遇到这个问题。

我的错误是完全相同的。问题是我的`JOIN`语法，这就是我所拥有的：

```
"SELECT * FROM aircraft_sched INNER JOIN aircraft_sched.Sched_Day1 ON aircraft_sched_options.SchedOpt_ID" 
```

应该是这样的：

```
"SELECT * FROM aircraft_sched INNER JOIN aircraft_sched_options ON aircraft_sched.Sched_Day1 = aircraft_sched_options.SchedOpt_ID" 
```

我在思考之前就输入了它，这只是我的一个愚蠢的错误。希望这可以帮助某人。

# c# - 如何解析 winmail.dat 文件？

> ID：11545105
> 
> 赞同：4
> 
> 时间：2012-07-18T15:38:58.970
> 
> 标签：c#, .net, tnef, winmail.dat

简单的问题。我有一个 C# 应用程序，它使用[AE.Net.Mail](https://github.com/andyedinborough/aenetmail)库访问 IMAP 服务器来检索消息和附件。有时，当从 Outlook 发送邮件时，附件包含在名为 winmail.dat 的文件中。那是[TNEF](http://en.wikipedia.org/wiki/Transport_Neutral_Encapsulation_Format)格式的文件。

我的应用程序是否有库或任何其他方式来“解压”这些文件，以便我可以获取附件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T22:47:10.553

我遇到了同样的问题，最终为 .NET 创建了一个名为 OpaqueMail 的完整电子邮件库。

它支持通过其 TnefEncoding 类解析 TNEF 编码的文件（例如 Winmail.dat）。

[看看这个例子。](http://opaquemail.org/library/tutorial/#tnef)

```
// Instantiate a TNEF Encoding object to process the byte array "tnefEncoddedBytes".
TnefEncoding tnefEncoding = new TnefEncoding(tnefEncodedBytes);

// Loop through the TNEF-encoded attachments, outputting their names, content types, and sizes.
foreach (MimePart mimePart in tnefEncoding.MimeAttachments)
{
    Console.WriteLine("MIME Part Name: " + mimePart.Name);
    Console.WriteLine("MIME Part Content Type: " + mimePart.ContentType);
    Console.WriteLine("MIME Part Size: " + mimePart.BodyBytes.Length);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T17:36:04.723

我最近刚刚在基于 Microsoft 的 Exchange TNEF API 的[MimeKit中实现了 TNEF 支持，从而允许完全访问其中包含的所有数据。](https://github.com/jstedfast/MimeKit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:52:54.563

我发现[这个工具](http://www.eolsoft.com/freeware/winmail_opener/)可以从命令行控制以从 TNEF 文件中提取附件，但我真的更喜欢一个可以“在进程中”运行的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:59:26.217

快速搜索导致：[Yerase 的 TNEF Stream Reader](http://sourceforge.net/projects/ytnef/)

该项目有源代码，您可以在 C# 中重现它或制作一个小的 C#（或更好的 C++/CLI）包装器来使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-21T12:13:03.710

如果它适用于 Linux 平台，那么您可以使用 tnef 工具

[TNEF](https://linux.die.net/man/1/tnef)

从 winmail.dat 获取正文的用法： **tnef -w --save-body winmail.dat** 仅从 winmail.dat 文件中提取附件的用法： **tnef winmail.dat**

Tnef 将正文/附件提取到我们运行此工具的当前目录中。或者我们可以给 -C DIR, --directory=DIR 将它们保存到指定的路径

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-18T16:04:16.440

[TnefReader 类](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.contenttypes.tnef.tnefreader%28v=exchg.80%29.aspx)可能会有所帮助。

# coldfusion - 一旦分配，有什么方法可以缩小运行 Coldfusion 9 的 JVM 堆？

> ID：11545110
> 
> 赞同：1
> 
> 时间：2012-07-18T15:39:12.713
> 
> 标签：coldfusion, jvm, heap-memory, coldfusion-9

我们为 CF9 服务器设置了 JVM，以分配最大 2GB 的堆空间。通常，它只分配大约 750MB 到 1GB，而我们实际上只使用了大约 500MB。

一个流氓脚本刚刚被触发，它最终占用了堆空间，因此 JVM 分配了完整的 2GB 限制。现在，我们回到了正常速度，只使用了分配的 2GB 中的 500MB，我们的服务器现在的内存使用率为 90%。

当 JVM 不再需要分配那么多空间时，我们是否可以使用任何设置来缩小 JVM 的最大堆空间？或者，这会一直保持这种状态，直到下次重新启动？只是想知道，因为我们在服务器上只剩下 10% 的内存用于“摆动”空间......

谢谢！

编辑：

只是为了澄清一点。我们通过设置 JVM 参数“-Xms750m”将初始堆大小设置为 750MB。我们的最大堆大小由 JVM 参数“-Xmx2048M”设置。在脚本运行之前，我们分配的堆大小约为 1GB。在这 1GB 中，我们平均只使用了 500MB。脚本运行后，堆被推到了极限，所以现在有 2GB 的预分配堆空间，我们再次平均只使用了 500MB。

因此，这使 Windows 记录了 90% 或更多的内存使用情况。*JVM 可能至少可以*释放GB 或更多，因为它从未使用过，但是，我们不知道如何强制这种情况发生，或者是否有某种 JVM 设置来执行此操作自动地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:20:16.673

您可以运行完整的 GC，它会缩小堆。至少 750 兆的操作系统可以“回收”该内存（你真的不需要做任何事情）。但是，如果您的内存受限，那么您将来可能会遇到争用问题，因此您可能会考虑进行更好的调整。我通常将最小值和最大值设置为相同，这样我就不必仔细考虑这个问题。无论如何 - 这是一个可以帮助你的脚本：

```
<Cfset runtime = CreateObject("java","java.lang.Runtime").getRuntime()>

<cfset fm = runtime.freememory()/>

<Cfset fm = int((fm/1024)/1024)/>

<cfset usedmem = 1270-fm/>
<cfoutput><br>
<br>
Free: #fm# megs<br>
Used: #usedmem# megs<br>
</cfoutput>

<cfset obj = createObject("java","java.lang.System")/>

    <cfset obj.gc()/>

    <cfset obj.runFinalization()/> 
```

脚本的第一部分显示可用内存，第二部分运行完整的垃圾收集（也完全暂停，因此根据您的流量和硬件，这可能会很明显）。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:19:31.680

如果堆再次返回到 500 meg 的报告，那么有几种可能发生的情况：

内存用于 PermGen。垃圾收集器不会以同样的方式（如果有的话）清除 Perm。如果您可以从服务器上的 JDK 运行 JPS 或 JVisualVM，那么您可以了解内存的使用位置，因为它们会报告 Perm Gen 的使用情况。

另一种可能性是您使用的操作系统度量反映了进程使用的最大内存，而不是当前内存。我不是这里的专家，但如果您可以准确发布您使用哪些指标来显示内存使用情况，这可能会很有用。

我想JVM可能不会释放内存，它是垃圾收集回操作系统，尽管我自己没有看到这种情况发生。

当您的流氓脚本运行时，您说它在崩溃之前占用了整个堆。它是否因 OutOfMemoryException 而死？如果您扫描异常日志，是否有任何关于哪些线程崩溃的信息？通常，一旦您的 JVM 经历了 OOM，您可能应该重新启动，因为您无法判断任何应用程序状态是否已损坏。

# sql - vb.net 不能在 .mdb 文件中插入超过 2 列

> ID：11545111
> 
> 赞同：0
> 
> 时间：2012-07-18T15:39:13.510
> 
> 标签：sql, database, vb.net

出于某种原因，当我尝试在我的插入命令中添加第三列时，我得到“INSERT INTO 语句中的语法错误”。错误。但是，当我只有 2 个值插入 2 列时，它工作得很好。我有点困惑为什么会这样。（提示：我可能没有使用正确的连接字符串，文件类型是 Access 2000 数据库）

```
 Dim Cmd As OleDbCommand
    Dim SQL As String
    Dim objCmd As New OleDbCommand
    Dim Con = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source = C:\Files\keysDB.mdb")
    SQL = "INSERT INTO KeyBuffer(keypad, SID, Time) VALUES('1', '1337', '" & DateTime.Now.ToString & "')"
    Cmd = New OleDbCommand(SQL, Con)
    Con.Open()
    objCmd = New OleDbCommand(SQL, Con)
    objCmd.ExecuteNonQuery()
    Con.Close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:49:45.143

您用于时间的字段名称可能是关键字。尝试在它周围放置括号：

```
"INSERT INTO KeyBuffer(keypad, SID, [Time])... 
```

# python - 用python解析差异结果（元组列表）

> ID：11545126
> 
> 赞同：0
> 
> 时间：2012-07-18T15:39:56.863
> 
> 标签：python, diff, python-2.7

Python初学者在这里。

我目前正在处理差异。我正在使用[google python library](http://code.google.com/p/google-diff-match-patch/)生成它们。

以下是 diff 结果的示例：

```
[(0, 'Ok.  I just '),
 (-1, 'need to write '),
 (0, 'out a random bunch of text\nand then keep going.  I'),
 (-1, ' just'),
 (0,
  " did an enter to see how that goes and all\nthe rest of it.  I know I need.  Here's a skipped line.\n\nThen there is more and "),
 (-1, 't'),
 (0, 'hen there was the thing.')] 
```

这是一个元组列表。每个元组中的第一个元素是运算符（0 - 不变，-1 = 删除，1 = 添加）。第二个元素是从文本块中添加或删除的数据。

我想总结这些差异结果，以便读者可以通过阅读几行来了解更改的要点，而无需阅读可能只有 30 个字符左右更改的整个文本。

我的第一步是按字符长度对元组进行排名，然后显示前 3 个最大的变化（按照它们的原始顺序，两边都有一些未更改的文本）。

你认为我应该如何按字符长度对元组进行排序，抓住最长的三个，然后重新排列它们，使顺序与原来的一样？

理想情况下，结果将如下所示（使用上面的示例）：

...只~~需要写出~~一个... ...我~~刚刚~~输入...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:50:39.113

```
input = [(0, 'Ok.  I just '), (-1, 'need to write '), (0, 'out a random bunch of text\nand then keep going.  I'), (-1, ' just'), (0, " did an enter to see how that goes and all\nthe rest of it.  I know I need.  Here's a skipped line.\n\nThen there is more and "), (-1, 't'), (0, 'hen there was the thing.')]

top_3 = [filtered_change[1] for filtered_change in sorted(sorted(enumerate(input), key=lambda change: len(change[1][1]), reverse=True)[:3])] 
```

或者，一步一步：

```
indexed_changes = enumerate(input)
indexed_and_sorted_by_length = sorted(indexed_changes, key=lambda change: len(change[1][1]), reverse=True)
largest_3_indexed_changes = indexed_and_sorted_by_length[:3]
largest_3_indexed_sorted_by_index = sorted(largest_3_indexed_changes)
largest_3_changes_in_original_order = [indexed_change[1] for indexed_change in largest_3_indexed_sorted_by_index] 
```

# javascript - 如何在 execCommand 所见即所得编辑器上查找选定的文本字体大小和名称

> ID：11545128
> 
> 赞同：1
> 
> 时间：2012-07-18T15:39:57.330
> 
> 标签：javascript, editor, wysiwyg, execcommand

我正在使用`execCommand()`我自己的拖放 javascript 函数制作一个所见即所得的编辑器。

如果适用，我希望能够找到所选文本的名称和大小。我该怎么做呢？

是否有与`execCommand()`此相关的特定功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T01:06:16.777

```
alert(iFrame.document.queryCommandValue("FontSize")); 
```

或者

```
alert(iFrame.document.queryCommandValue("ForeColor")); 
```

您不能使用 execCommand 执行此操作，因为 execCommand 仅根据它是否成功返回 true 或 false。但是，这显然存在一些问题。我建议继续阅读

[ContentEditable - 获取当前字体颜色/大小](https://stackoverflow.com/questions/8770008/contenteditable-get-current-font-color-size)

更多信息

# rally - SDK 2.0：控制拉力图中的 X 轴

> ID：11545136
> 
> 赞同：1
> 
> 时间：2012-07-18T15:40:19.687
> 
> 标签：rally

我正在尝试使用 SDK 2.0 中的 rallychart 为缺陷创建缺陷创建/终止图表。X 轴是时间——在这种情况下，可以是单独的几天、几周或几个月。

我没有看到任何关于如何使用拉力图控制 X 轴的示例。你怎么做呢？您是否直接在 highcharts 中使用类别？您应该如何配置数据存储？

一般来说，有哪些方法可以使用拉力图制作基于时间的图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:55:29.453

您应该能够只传递一个 chartConfig（包括 x 轴类别和您的系列数据），并将其传递给 highcharts。我不确定这是否适用于 2.0p2，但它应该在 2.0p3 中发布。

# hibernate - Hibernate 批量保存性能

> ID：11545138
> 
> 赞同：1
> 
> 时间：2012-07-18T15:40:20.577
> 
> 标签：hibernate, memory-leaks, full-text-search

我对我的大量域实体使用休眠批处理保存处理。首先，当我在数据库中只有一个实体可以插入时，我没有遇到性能问题。但是比我添加了与另一个实体的一对一关系之后，我遇到了性能和内存泄漏问题。Hibernate 现在一次做了两个插入。

这是我的域模型：

```
@Entity
@Table(name = "PRODUCT", uniqueConstraints = { @UniqueConstraint(columnNames = { "UPC" }) })
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class Product {

    @Id
    @Column(name = "PRODUCT_ID", columnDefinition = "bigint")
    @Index(name = "PRODUCT_ID_IDX")
    private Long id;

    @Column(name = "UPC")
    private String upc;

    @Column(name = "CURRENCY")
    private String currency;

    @Column(name = "RETAIL_PRICE")
    private Double retailPrice;

    @Column(name = "SALE_PRICE")
    @Index(name = "PRODUCT_PRICE_IDX")
    private Double salePrice;

    @Type(type = "true_false")
    @Column(name = "INSTOCK")
    private boolean instock;

    @Column(name = "SHIPPING")
    private Double shipping;

    @Column(name = "RATING")
    private Integer rating;

    @Column(name = "VIEWS")
    @Index(name = "PRODUCT_VIEWS_IDX")
    private Long views;

    @OneToMany(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
    @JoinColumn(name = "PRODUCT_ID", nullable = false)
    @Index(name = "PRODUCT_ID_REVIEW_IDX")
    private List<ProductReview> reviews = new ArrayList<ProductReview>();

    //Here is new relation
    @OneToOne(fetch = FetchType.LAZY, mappedBy = "product", cascade = CascadeType.ALL)
    private ProductInformation information;

    @ManyToOne(fetch = FetchType.LAZY)
    @JsonIgnore
    @JoinColumn(name = "CATEGORY_ID", nullable = true)
    @Index(name = "PRODUCT_CAT_IDX")
    private ProductCategory category;

    @ManyToOne(fetch = FetchType.LAZY)
    @JsonIgnore
    @JoinColumn(name = "BRAND_ID", nullable = true)
    @Index(name = "PRODUCT_BRAND_IDX")
    private ProductBrand brand; 
```

产品信息实体：

```
@Indexed
@Entity
@Table(name = "PRODUCT_INFO")
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class ProductInformation {

    @Id
    @DocumentId
    @Column(name = "PRODUCT_ID", columnDefinition = "integer", unique = true, nullable = false)
    private Long id;

    @Column(name = "BUY_URL")
    private String buyUrl;

    @Column(name = "IMAGE_URL")
    private String imageUrl;

    @Column(name = "NAME", length = 10000)
    @Fields({
        @Field(index = org.hibernate.search.annotations.Index.TOKENIZED, analyzer = @Analyzer(impl = LowercaseKeywordAnalyzer.class)),
        @Field(name = "name", index = org.hibernate.search.annotations.Index.TOKENIZED, analyzer = @Analyzer(impl = LowercaseKeywordAnalyzer.class)) })
    @Index(name = "product_info_name_idx")
    private String name;

    @Column(name = "LONG_DESCRIPTION", length = 10000)
    private String longDescription;

    @Column(name = "SHORT_DESCRIPTION", length = 10000)
    private String shortDescription;

    @Column(name = "KEYWORDS", length = 10000)
    private String keywords;

    @OneToOne(fetch = FetchType.LAZY)
    @PrimaryKeyJoinColumn
    private Product product; 
```

我如何设置我的产品：

```
result.setInformation(info);
    info.setProduct(result); 
```

我的 DAO 方法：

```
@Override
    @Transactional(propagation = Propagation.REQUIRED)
    public int batchSave(List<Product> products, int batchSize) {

        int insertedCount = 0;
        Session batchSession = null;
        Transaction batchTransaction = null;
        try {
            batchSession = getSessionFactory().openSession();
            batchTransaction = batchStateLessSession.beginTransaction();
            for (Product product : products) {
                //First I used save() but this method calls select before insert and this                    //not a good idea.
                //batchSession.save(product);
                batchSession.persist(product);
                if (++insertedCount % batchSize == 0) {
                    batchSession.flush();
                    batchSession.clear();
                }
            }
            batchSession.flush();
            batchSession.clear();
            batchTransaction.commit();
            batchSession.close();
        } catch (ConstraintViolationException ex) {
            if (batchSession != null && batchTransaction != null) {
                batchSession.clear();
                batchTransaction.commit();
                batchSession.close();
            }
        }

        return insertedCount;
    } 
```

我的批量大小是 50 行。所有休眠属性均已正确设置。我不使用 StatelessSession 因为我需要在我的实体上创建全文搜索索引。保存 30K 实体后出现内存泄漏。但我的 XML 文件有 10M 条目。当我没有 ProductInformation 实体并且所有字段都存储在 Product 实体中时，所有字段都可以正常工作，没有任何泄漏。

你对我的问题有任何想法吗？也许我应该使用 StatelessSession 并在插入所有行后在 10M 行表上创建全文索引？

# javascript - 使用 javascript 拦截链接 href

> ID：11545140
> 
> 赞同：0
> 
> 时间：2012-07-18T15:40:24.257
> 
> 标签：javascript, jquery, html, dom

我有以下链接元素：

```
<a href="javascript:;" onclick="check_show('http://www.test.com')">Test</a>

<script>
function check_show(link){
    if($('#testelement).css('display') == 'block'){
        window.location.href = link;
    }
}
</script> 
```

问题在于，如果我要单击以在新窗口中打开（或按 ctrl-click），它将为“javascript:;”打开一个新窗口。所以，我需要在 href 中添加链接。这很好，但我还是想先检查#testelement 是否可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:42:04.837

您的 javascript 正在运行，随后浏览器重定向到`href`. 您需要阻止浏览器访问此链接。您可以通过`return false;`在您的函数调用之后添加`onclick`.

```
<a href="LINKHERE" onclick="check_show('http://www.test.com'); return false;">Test</a> 
```

# php - 减小php中图片的大小

> ID：11545142
> 
> 赞同：0
> 
> 时间：2012-07-18T15:40:28.830
> 
> 标签：php, image, compression

我需要一个 php 类或 API，它可以在不降低图片的比例或质量的情况下减小图片的大小，例如“fileminimizer suite”软件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:33:32.090

减小图片的文件大小并非易事。

JPEG 格式是有损的，并且已经非常优化；你可以用它做点什么，但它需要调整，这可能被认为是“质量损失”。基本上，您想减少高频噪声。ImageMagick（及其 PHP 包装器）可能是一个不错的选择。您还可以删除一些冗余或无用的 APPn 块（Exif 元数据等）并最多减少几千字节。

**编辑**：例如，您提到的网站采用了类似的技术。我只检查了两张图片：

```
http://www.image-compressor.com/images/gallery/429724_36675180.jpg
http://www.image-compressor.com/images/gallery/429724_36675180_bestquality.jpg 
```

第二张图片的质量因子估计为87，原始文件包含60 Kb的APP数据，无法查看。我这么说是因为使用 jpegtran 实用程序（JPEG 工具的一部分）

```
jpegtran -copy none -outfile 429724_36675180_stripped.jpg 429724_36675180.jpg 
```

给我一个**像素相同**的文件，大小从 221624 减少到 166123 字节。这就是我所说的“Exif 和其他 APPn 块剥离”的意思。*在这种*情况下，“不降低质量”意味着“没有以任何方式触及像素，周期”，但 jpegtran 节省了 60 Kb。

如果*以几乎无法察觉的方式触摸一些像素，没有人可能会注意到*是可以接受的，那么更多的事情就变得可能了。

基于快速而肮脏的频率分析，我的疯狂猜测是 www.image-compressor 软件使用基于局部方差和 PSNR 的“感知质量度量”，并通过二分法或牛顿收敛将“良好”再压缩因子归零（低于 60 的品质因数实际上没有用，在 60 到 99 之间，品质与尺寸曲线适用于 Newton-Raphson）。

这个结果就是我说的‘*需要调整，可能会被认为是“质量损失”* ’。如果这是可以接受的，您可以例如给出命令，

```
djpeg -dct float < 429724_36675180.jpg \
| cjpeg -optimize -dct float -maxmemory 4096 -quality 89 \
  -outfile 429724_36675180_remade.jpg 
```

瞧，随着 APPn 数据的剥离和质量下降到 89，我们得到了一个大小为 35820 字节的文件，而 www.image-compressor 的大小为 36082（您的里程可能会因实施中的怪癖而有所不同） JPEG 库）。从 djpeg/cjpeg 引入的失真与图像压缩器的失真相当（PSNR 45.4279 对比 ImageMagick 报告的 45.8822）。

所以总结一下，如果你想拥有类似于 www-im-comp 的东西，你可以安装 JPEG 工具（可能像 /apt-get install jpegtools/ - 检查你的 Linux 发行版；但这些工具存在于 Windows 和 MacOS也）运行

```
shell_exec("djpeg -dct float < $INPUTFILE "
          ."| cjpeg -optimize -dct float -maxmemory 4096 -quality $QUALITY "
          ."-outfile $OUTPUTFILE"); 
```

然后使用Imagick来验证INPUT和OUTPUT的区别：

```
http://www.php.net/manual/en/imagick.compareimagechannels.php 
```

（或者您可以通过 shell_exec使用 ImageMagick 的*比较实用程序）。*我希望您获得与图像压缩器非常相似的结果。

===

对于 PNG 格式，您可以使用几个实用程序做得更好，这些实用程序重新排序信息并为您提供逐像素相同但更小的图像。节省可能从零到 15% 不等，具体取决于图像的次优程度。看看PNGCRUSH、PngOPT、PNG-Gauntlet等。

这些实用程序还可以减少调色板的大小，去除不需要的颜色。

然后，您可以删除图像本身中一些视觉上不相关的高熵源，从而提高可压缩性。可以使用几种“去污剂”算法，ImageMagick 再次成为您的朋友。我曾经在 PHP 扩展中使用 C 处理核心来做到这一点，但参数调整是一个真正的镀金婊子，我希望 ImageMagick 也是如此。修剪得太少，你一无所获 - 修剪太多，你会留下一个平坦的、分离的图像。

不过，恐怕没有通用的、已经制作好的课程可以做到这一点。您将需要试用 ImageMagick 的 API 或 shell_exec 一些实用程序，例如 pngout。

**编辑**：为了完整起见，GIF 的概念与 PNG 相同。实际上，使用 PNG 几乎总是比 GIF 更好，除了GIF87a 提供较少开销的*非常小的文件。*但是，如果需要这种字节选择，那么我会考虑“拆分”我的网页图形：可以通过这种方式获得的 HTTP 和往返开销将胜过使用小型 GIF87a 文件所能获得的任何东西。

# c++ - C++ - 选择一组特征

> ID：11545148
> 
> 赞同：0
> 
> 时间：2012-07-18T15:40:54.990
> 
> 标签：c++, vector, struct, boolean

我试图在 a 中插入一个特征列表`vector`，然后根据标准函数的（即公式）结果添加一个特征。到目前为止的代码如下所示。

我想问的主要部分是：

1.  您认为以此处制作的方式插入功能是一个好主意吗？也就是说，作为struct的向量？或者，只是立即添加功能？我制作 struct 向量的原因是我想将整数值添加到向量中，但同时要为特征命名（即 F1、F2、...等）。

2.  对于`criterionFunction()`下面显示的内容，我正在尝试考虑例如如果选择它（即；传递给函数）则`features[1]`具有该值，否则。这里好像发生了什么事？:-) 你建议在这里做什么？`1``0``boolean`

```
#include "stdafx.h"
#include <iostream>
#include <vector>

int main(){
    std::struct Features{ int F1, F2, F3, F4; };

    std::vector<Features> listOfFeatures(4);
    for(std::vector<Features>::iterator i = listOfFeatures.begin(); i != listOfFeatures.end(); i++)
    {
        std::int maxValue = criterionFunction(*listOfFeatures);
    }
}

std::int criterionFunction(std::int *features)
{
    return
        -2*features[1]*features[2]
        +3*features[1]
        +5*features[2]
        -2*features[1]*features[2]*features[3]
        +7*features[3]
        +4*features[4]
        -2*features[1]*features[2]*features[3]*features[4];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:52:33.787

这是编译并类似于 C++ 的东西，我希望它对您有所帮助：

**编辑**添加了算法以实际将所有特征转换为标准列表并获得这些特征的实际最大值。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

struct Features{ int F1, F2, F3, F4; };

int criterionFunction(Features const& features)
{
    return
        -2*features.F1*features.F2
        +3*features.F1
        +5*features.F2
        -2*features.F1*features.F2*features.F3
        +7*features.F3
        +4*features.F4
        -2*features.F1*features.F2*features.F3*features.F4;
}
int main(){

    std::vector<Features> listOfFeatures(4);
    // TODO fill listOfFeatures

    std::vector<int> listOfCriterion;
    std::transform(listOfFeatures.begin(), listOfFeatures.end(), 
            std::back_inserter(listOfCriterion), 
            criterionFunction);

    int maxValue = *std::max_element(
            listOfCriterion.begin(), listOfCriterion.end());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:53:58.700

我有一段时间没有接触 C++，但我对你想要做什么感到困惑。根据您的问题和示例代码，我觉得您混淆了[向量](http://www.cplusplus.com/reference/stl/vector/vector/)的作用。

向量是可以动态调整大小的对象的集合。你打电话时

```
std::vector<Features> listOfFeatures(4); 
```

您正在收集*4*个 Features 结构。（即 16 个整数的空间，4 个 4 组，我认为你只想要 4 个）。

如果一个特征中总是有 4 个整数，我会坚持一个结构。如果您想命名它们并具有可变数量，则需要使用 Map 之类的东西。

# ios - iOS 'Web App' 的 localStorage 与 Mobile Safari 不同

> ID：11545149
> 
> 赞同：16
> 
> 时间：2012-07-18T15:40:58.050
> 
> 标签：ios, web-applications, local-storage, fullscreen, iphone-standalone-web-app

我有一个带有元标记的 iPad 网络应用程序：

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

当我从主页打开应用程序（支持网络应用程序的版本）或在 Mobile Safari 中输入地址时，localStorage 的内容不同。我已通过打印 location.href 确认地址相同。

使用 Mobile Safari 时对 localStorage 所做的所有更改都会反映在支持 Web 应用的版本中，但在支持 Web 应用的版本中所做的更改不会反映在 Mobile Safari 版本中。

域是相同的，localStorage 应该是相同的。世界上到底发生了什么？这可以解决吗？

* * *

**更新 - 解决方案**：根据接受的答案中的建议 #2（强制用户处于全屏模式），我添加了这段代码：

```
if(("standalone" in window.navigator) && !window.navigator.standalone)
    window.location = "instructions.html"; 
```

因此，如果您使用的是支持独立模式的浏览器，并且您未处于独立模式，请重定向到一个页面 (instructions.html)，该页面向用户展示如何将应用程序添加到主屏幕。

感谢大家的意见！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-25T15:32:04.253

**概括：**

Safari 和全屏 Web 应用程序（又名支持 Web 应用程序）具有 localStorage 数据的单独的内存直写缓存。每次全屏应用程序激活时，它都会从磁盘重新加载 localStorage（允许它看到 Safari 的更改）。但是，当 Safari 激活时，它不会从磁盘重新加载 localStorage 数据，因此除非您杀死 Safari 并重新启动它，否则它不会看到全屏应用程序中所做的更改。

**完整解释：**

计算机科学只有*两个*难题：

1.  缓存失效
2.  命名事物
3.  一个错误

localStorage 中的错误行为是问题 #1 的结果。原因如下：

当 iOS 浏览器引擎加载时，它会从磁盘读取 localStorage 的数据并将其缓存在内存中。然后每次读取数据（例如`getItem`）时，数据都是从内存中读取的，而不是从磁盘中读取的；并且在写入（例如`setItem`）时，数据被写入内存，然后（异步）刷新到磁盘。由于 localStorage 是同步的，所以这种实现是完全合理的。如果所有读写都进入磁盘，您的 javascript 将在每次读/写时被阻止以执行昂贵的磁盘 IO。

**问题是全屏 Web 应用程序（我们称之为 FSWA）使用 iOS 浏览器引擎的单独实例，虽然 FSWA 为 localStorage 数据共享磁盘上的相同位置，但它不共享内存缓存Safari 的 localStorage 数据。**

当您添加 FSWA 每次成为活动应用程序时完全重新加载（这意味着 localStorage 数据从磁盘重新加载）的事实时，您会得到您所看到的行为。

这里是幕后...

1.  用户进行更改，将数据写入 Safari 中的 localStorage
2.  Safari 将数据写入 Safari 的内存中 localStorage 缓存
3.  Safari 将 localStorage 数据从缓存刷新到磁盘
4.  用户离开 safari 并启动 FSWA
5.  FSWA 将 localStorage 数据从磁盘加载并读取到内存缓存中
6.  用户在 Safari 中看到更改的数据（在步骤 #1 中）
7.  用户在将数据写入 localStorage 的 FSWA 中进行更改
8.  FSWA 将数据写入其 localStorage 缓存（Safari 的缓存未更新）
9.  FSWA 将其 localStorage 缓存数据刷新到磁盘
10.  用户切换回 Safari
11.  Safari 已经在运行，它不会从磁盘重新加载 localStorage 数据
12.  Safari 从其现有的内存缓存中读取旧数据
13.  用户看不到在步骤 #7 中所做的更改

为了证明这一点，您可以在第 4 步和第 10 步之间[杀死 Safari 。](http://www.imore.com/daily-tip-close-backgrounded-app-ios-5)然后，当您在步骤 #11 中重新启动 Safari 时，它将从磁盘重新加载 localStorage，您将看到 FSWA 写入的数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T11:48:22.887

在 iOS5 中，我能够在同一个域上拥有两个全屏 Web 应用程序，它们能够看到彼此的 localStorage。这克服了全屏和 Safari 之间的差异。

但是，在 iOS6 中，我不得不将我的两个全屏 Web 应用程序合并到一个应用程序中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T00:13:19.840

假设您正确保存本地存储数据，如果我没记错的话，您遇到的问题在网络应用程序开发人员中**是一个常见问题。**Cookie、会话和本地存储在“网络应用程序”（从主屏幕启动）中的存储方式似乎与通过移动 safari 保存的数据*不同。*

我过去对此进行了一些相当彻底的测试，在**我看来，没有足够好的解决方法**。举个例子，我和我的同事都遇到过类似的问题：在我们最近开发的一个网络应用程序中，用户必须先登录才能访问其所有功能。如果通过移动 safari 登录，然后切换到下载的应用程序版本，则希望登录，但情况并非总是如此。通常必须再次登录，这表明 cookie 可能存储在不同的“数据库”中，具体取决于您选择启动应用程序的方式或位置。

此外，正如 Calvin 所说，*它*不仅仅是不同的数据库。通过主屏幕启动的应用程序似乎打开得更慢，启动时总是重新加载主屏幕应用程序，表明不支持多任务等等。**我的结论：启动下载的网络应用程序的程序！= safari 减去地址栏，因此不应被视为这样.**

*尽管 Apple 提供了一项不错的功能*，但主屏幕网络应用程序的性能并没有达到预期或希望的那样（就像它在 safari 中打开一样。）在您的情况下，假设您正确存储 LS 数据并尝试了不同的方法来修复您的特别的问题，**我会建议以下替代方案之一：**

1.  改为使用**mysql**数据库从/到 r/w
2.  **强制用户**在使用前下载应用程序（如[本例所示](http://pattern.dk/sun/)）
3.  **不要鼓励用户下载应用程序**并假设他们中的大多数人会通过移动 Safari 访问它
4.  **接受**数据可能不同的事实（这可能不是您的替代方案，具体取决于您的应用程序的性质）
5.  采用我的方法，通过[Phonegap 的](http://phonegap.com/)内置功能**将您的 Web 应用程序“转换”为本机应用程序。**如果是这样，请查看 Jonathan Stark 的[本教程](http://www.youtube.com/watch?v=LcES5nIbMkk)。

希望这有助于澄清至少部分内容。

# android - Android相机如何在全屏预览期间显示按钮

> ID：11545150
> 
> 赞同：1
> 
> 时间：2012-07-18T15:40:59.060
> 
> 标签：android, camera

我正在开发目标级别为 2.1 的 Android 相机应用程序，但是当我进入全屏模式时我发现很难，我想在预览期间显示按钮，但它实际上是隐藏的，所以有人知道该怎么做吗？

这是在本网站上找到的代码，并稍作修改 [http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

```
 Preview preview;
    Button buttonClick;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cameralayout);

        preview = new Preview(this);
        ((FrameLayout) findViewById(R.id.preview)).addView(preview);

        setContentView(R.layout.cameralayout);

        buttonClick = (Button) findViewById(R.id.buttonClick);
        buttonClick.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
        });
        Log.d(TAG, "onCreate'd");
    } 
```

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

            <Button
                android:id="@+id/buttonClick"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center|bottom"
                android:text="Click" />
</FrameLayout> 
```

并且清单已将主题设置为全屏

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

那么如何在全屏预览的情况下让我的按钮可见非常感谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:46:28.963

我相信你错过了这个`SurfaceView`观点。内部`FrameLayout`布局放置`SurfaceView`将保存相机预览的按钮，以及下方的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T08:35:45.900

在行后`buttonClick = (Button) findViewById(R.id.buttonClick);` 添加这些行

```
((FrameLayout) findViewById(R.id.preview)).removeView(buttonClick);
((FrameLayout) findViewById(R.id.preview)).addView(buttonClick); 
```

现在你可以看到你的按钮....

快乐学习.. :)

# ms-access - 没有 VBA 的访问查询

> ID：11545151
> 
> 赞同：0
> 
> 时间：2012-07-18T15:41:10.777
> 
> 标签：ms-access

我有一个关于无关表的数据库查询的问题。
这次要求不使用VBA（我的经理要求），这很难。

我的查询必须返回 5 列数据。前 4 列直接从前一个查询的输出中检索，因此很容易。

```
Query Q_STOP_LOSS: 

Year  Contr_Pool_ID          Contr_Ins_ID      COUNTRY   Employees    STOP_LOSS
2010  Crédit Agricole CIB    QUATREM           2         6024
2010  Crédit Agricole CIB    QUATREM           2         6024
2010  Amada CO LTD           MALAKOFF MEDERIC  4         1320
2010  Amada CO LTD           MALAKOFF MEDERIC  4         1320
2010  Amada CO LTD           MALAKOFF MEDERIC  4         1320 
```

最后一列名为“STOP_LOSS”是问题所在，因为那里填写的值应该基于 WHERE 子句从不相关的表中检索。它应该包含另一个不包含相等字段的表中的 SL 值。该表称为 T_STOP_LOSS 并列出了间隔。

```
Table: T_STOP_LOSS

ID   LIVES_FROM LIVES_TO  NR_COUNTRIES_FROM  NR_COUNTRIES_TO  SL_VALUE
1    0          999       2                  2                39,3
12   0          999       3                  3                34,6
23   0          999       4                  4                29,6
34   0          999       5                  9                25,7
45   0          999       10                 100              22,17
46   1000       1499      2                  2                31,1
2    1000       1499      3                  3                27,4
13   1000       1499      4                  4                23,3
24   1000       1499      5                  9                20,4
35   1000       1499      10                 100              17,5 
```

当“Country”和“Employees”的值（第 3 列和第 4 列，是先前查询的结果）分别位于“LIVES_FROM/LIVES_TO”和“NR_COUNTRIES_FROM/NR_COUNTRIES_TO”之间的区间时，那么应该返回的内容需要是对应的 SL_Value。我想不通，因为这两个表之间没有对应的字段，这次我不允许使用 VBA。更难的是，“LIVES_FROM/LIVES_TO”和“NR_COUNTRIES_FROM/NR_COUNTRIES_TO”包含相关表的 ID。
知道如何在不使用 VBA 的情况下将此列添加到查询中...？我尝试使用查询工具和 SQL 视图，

当我的问题不清楚时，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:57:31.853

怎么样：

```
SELECT (SELECT TOP 1 sl_value
        FROM   t_stop_loss t
        WHERE  q.country BETWEEN nr_countries_from AND nr_countries_to
               AND q.employees BETWEEN lives_from AND lives_to) AS stop_loss,
       q.year,
       q.contr_pool_id,
       q.contr_ins_id,
       q.country,
       q.employees
FROM   q_stop_loss q 
```

# php - 两个 php.ini 文件是否意味着我安装了两次 PHP？

> ID：11545152
> 
> 赞同：1
> 
> 时间：2012-07-18T15:41:14.100
> 
> 标签：php

我在 Ubuntu 11.10 上安装了lampp 并且工作正常。由于我无法将 xDebug 作为 PHP 模块安装以在 Eclipse 中使用，因此我进行了一些搜索并偶然发现了两个不同的 php.ini 文件。一个位于 /etc/php5/cli，另一个位于 /opt/lampp/etc。对 PHP 的 phpinfo() 的调用表明它从 /opt/lampp/etc 加载了配置文件，但是当我运行“php --ini”时，它说加载的文件来自 /etc/php5/cli。我需要从 /etc 卸载那个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:52:33.460

`cli`in`/etc/php5/cli`代表，因此当您从命令行调用 php 时`Command Line Interface`，它会使用*该文件。* `php.ini`

`php.ini`in是lampp 安装的`/opt/lampp/etc`那个，正如你所注意到的，它是apache 用于Web 请求的那个。（对于那些不使用 Lampp 包的人，你可能会在 Apache`php.ini`中看到`/etc/php5/apache2/`）

PHP在每个环境*中*的行为都略有不同，这就是为什么需要这两个配置文件的原因。有关更多信息，请参见[此处](http://www.php.net/manual/en/features.commandline.differences.php)。

如果您从不从命令行使用 php（不要忘记 cron 作业！），那么您可以忽略 in 中的那个`/etc/php/cli`，但不，您也不应该卸载。

# gcc - 为什么 gcc 不遵守对齐要求？

> ID：11545153
> 
> 赞同：4
> 
> 时间：2012-07-18T15:41:19.047
> 
> 标签：gcc, alignof

考虑以下 C++ 代码，它打印 a 的对齐要求`double`和类型 的结构成员的有效对齐`double`：

```
#include <iostream>

struct S { short x; double y; };

int main() {
    S s;
    std::cout << __alignof(double) << ' ';
    std::cout << (char*)&s.y - (char*)&s << std::endl;
} 
```

（[在 codepag.org 上运行](http://codepad.org/W0PR4KIM)）

我在 x86 上用 gcc 编译这段代码。

我期待这个程序能够输出`8 8`，但是它会打印出来`8 4`。**这是为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:42:27.347

对象的对齐方式可以在结构外部和内部不同。在结构之外，它可能是允许最快访问的最小对齐方式（例如 8 字节）。但在结构内部，它可能是需要最少填充的某个值（x86 上为 4 个字节）。一些编译器允许您控制结构打包（gcc: `__attribute__((pack))`, microsoft: `#pragma pack()`）

编译器究竟做了什么，它由系统的 ABI 决定。如果 ABI 说结构值的填充不超过四个字节，那么编译器将遵守这一点。

# jquery - jQuery 插件名称间距和访问设置参数

> ID：11545155
> 
> 赞同：1
> 
> 时间：2012-07-18T15:41:25.927
> 
> 标签：jquery, jquery-plugins

我正在尝试使用名称间距系统创建一个 jQuery 插件，所以这是我所拥有的一个小例子

```
(function($){
var jScrollerMethods = {
    init:function(config){
        this.settings = $.extend({
            'option':'value'
        }, config);
    },
    getOption:function(){
        return this.settings.option;
    }
}

$.fn.jScroller = function(call){
    if ( jScrollerMethods[call] ) {
      return jScrollerMethods[call].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof call === 'object' || ! call ) {
      return jScrollerMethods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  call + ' does not exist on jQuery.jScroller' );
    } 
}

$(".selector").jScroller({'option':'newValue'});
var opt = $(".selector").jScroller("getOption"); 
```

})(jQuery);

该`opt`变量不起作用，并且它不应该像在声明这样的函数时`this`那样`init:function(){..` `this`工作保存到窗口，因为在不同的选择器上运行的 jScroller 实例可能不止一个，我似乎只是找到或弄清楚了`init``getOption`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:27:31.573

您需要为每个实例创建一个唯一的选项对象，并且需要将其与实例一起存储。jQuery`data()`非常适合这个。`Object.create()`这使用您可能有意见的 Crockford's 。

```
if (typeof Object.create !== 'function') {
  /* 
     Function: create

     create a new instance of an object using an existing object as its prototype

     Parameters:
        o - the object serving as the new prototype

     Returns:
        a new object
  */         
  Object.create = function (o) {
     function F() {}
     F.prototype = o;
     return new F();
  }; 
```

}

然后在您的 init 函数中，添加如下内容：

```
return this.each(function() {            
    var self = this,
    $this = $(this),
    data = $this.data('jScroll'),
    opts = Object.create(options);

    if (!data) {
        $this.data('jScroll', {
          options: opts, // this is the options object that you'll access later
          element: this // you may not need this
        });
    }
}); 
```

你的`getOptions`方法执行这个：

```
var data = this.data('jScroll');
if (data.options[options]) { return data.options[options] }; 
```

我在调用 init 之前进行了设置合并：

```
} else if ( typeof call === 'object' || ! call ) {
    if (call) { $.extend(settings, call) } // this expects a settings variable defined with defaults
    return jScrollerMethods.init.apply( this, call );
} 
```

# php - PHP - 调用 .net SOAP 服务，结果对象是空字符串？

> ID：11545158
> 
> 赞同：1
> 
> 时间：2012-07-18T15:41:35.600
> 
> 标签：php, .net, soap, wsdl

我正在尝试通过 PHP 与 .NET Web 服务进行交互。我能够连接到服务，我能够调用 getFunctions 并返回所有服务功能的列表。我使用soapUI 测试了web 服务，当我使用soapUI 时所有请求都可以完美运行。

然而，每当我使用 PHP 调用其中一个服务函数时，我都会得到一个看似空洞的响应。

代码：

```
$client = new SoapClient("http://soapservice.com/soap.asmx?WSDL");

$params = array();

$params["userName"] = 'myUserName';     
$params["password"] = 'somePass1234';   

$locations = $client->GetStuff($params);

var_dump($locations);

$locations = $client->GetStuff($params)->GetStuffResult;    

var_dump($locations); 
```

var 转储的输出如下：

```
object(stdClass)#35 (1) {
  ["GetStuffResult"]=>
  string(835807) ""
}
string(835807) "" 
```

我的第一个问题是......“空”字符串怎么能长 835807 个字符？我的第二个也是更明显的问题是数据在哪里，为什么我不能访问它？soapUI 显示响应是 XML 格式的，但我在这个响应字符串中看不到任何用处。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:44:11.090

如果`$location`包含 XML，那么很可能输出是正确的，但不会在您的浏览器中“显示”（除非`text/plain`发送了类似的内容类型标题），因为您的浏览器不显示（它认为的）标签/元素。例如，您需要将“XML 字符串”编码为`$location`包含`<foo>`到`&lt;foo&gt;`. 尝试：

```
echo htmlentities(print_r($locations, true)); 
```

...或者：

```
header("Content-Type: text/plain");
var_dump($locations); 
```

...或者只是在您的浏览器中“查看源代码”。

# python - 在 python 中发送电子邮件 - 谷歌是否改变了有关 gmail 的内容？

> ID：11545166
> 
> 赞同：1
> 
> 时间：2012-07-18T15:41:47.503
> 
> 标签：python

我有一些我一直用来发送电子邮件的基本实用程序。
我使用 gmail 发送警报、通知等...

现在，他们都在解决这个错误，我想知道是不是因为谷歌。

```
Traceback (most recent call last):
  File "/home/ubuntu/workspace/includes/utility.py", line 44, in <module>
    sendMail('cctest',parms,body='ok - no cc')
  File "/home/ubuntu/workspace/includes/utility.py", line 38, in sendMail
    server.sendmail(fromaddr, toaddrs, message)
  File "/usr/lib/python2.7/smtplib.py", line 700, in sendmail
    self.rset()
  File "/usr/lib/python2.7/smtplib.py", line 441, in rset
    return self.docmd("rset")
  File "/usr/lib/python2.7/smtplib.py", line 366, in docmd
    return self.getreply()
  File "/usr/lib/python2.7/smtplib.py", line 343, in getreply
    raise SMTPServerDisconnected("Connection unexpectedly closed")
smtplib.SMTPServerDisconnected: Connection unexpectedly closed 
```

下面是我通常使用的示例代码。我什至不记得我上次修改代码是什么时候了。

```
def sendMail(subject,parms,body=None,cc=None):

    import smtplib
    import email.utils
    from email.mime.text import MIMEText
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEBase import MIMEBase
    from email import Encoders

    toaddr = parms['email_to']
    fromaddr = parms['email_from']
    message_subject = subject
    message_text = body
    if cc:
        message = "From: %s\r\n" % fromaddr + "To: %s\r\n" % toaddr + "CC: %s\r\n" % ",".join(cc) + "Subject: %s\r\n" % message_subject + "\r\n" + message_text
        toaddrs = [toaddr] + cc #+ bcc
    else:
        message = "From: %s\r\n" % fromaddr + "To: %s\r\n" % toaddr + "Subject: %s\r\n" % message_subject + "\r\n" + message_text
        toaddrs = [toaddr]

    server = smtplib.SMTP('smtp.gmail.com',587)
    server.ehlo()
    server.starttls()
    server.ehlo()
    server.login(fromaddr,parms['email_password'])
    server.sendmail(fromaddr, toaddrs, message)
    server.quit()

    print "Email sent..." 
```

# java - UnsupportedClassVersionError 1.7，适用于 1.6 设置

> ID：11545173
> 
> 赞同：0
> 
> 时间：2012-07-18T15:41:58.110
> 
> 标签：java, eclipse, java-7, unsupported-class-version

我有 EAR 项目，它由以下项目组成：

*   TestRemoteEJB
*   TestRemoteEJBClient
*   测试远程WEB

在我设置的每个项目下：

*   在 Java 编译器下，我将编译器合规级别设置为 1.7
*   在 Project Facets 下，我已将 Java 设置为 1.7 版

此外，每个项目都将 JRE 系统库设置为 JRE7。如果我使用这个设置，当我在 JBoss AS7 上发布时，我会得到 UnsupportedClassVersionError。如果我将之前指定的设置更改为 1.6 和 JRE6，它会成功部署。为什么它在 1.6 下工作，但在 1.7 设置下不行？我的电脑上有以下设置。

对于 x86，我有：

*   JRE6
*   JRE7

对于 x64，我有：

*   JDK 1.7（我发现这毫无意义，因为 Eclipse 使用自己的编译器）
*   JRE7

我正在运行 Eclipse Indigo SR2 x86 版本，因为我在使用 x64 版本时遇到了一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:52:31.647

Make sure JBoss server pointing to correct Java version.

# php - 将 sqlite 与 php/adodb 一起使用

> ID：11545175
> 
> 赞同：0
> 
> 时间：2012-07-18T15:41:58.347
> 
> 标签：php, sqlite, adodb

我正在尝试使用 ADOdb 连接到 sqlite3 数据库。使用：

*   pdo_sqlite：有效
*   sqlite3：

    > 致命错误：未捕获的异常“异常”，带有消息“无法打开数据库：无法打开数据库文件”

*   sqlite：

    > 无法连接到数据库

```
$driver = "pdo_sqlite";
$db = NewADOConnection("$driver://".urlencode(dirname(__FILE__)."/test.db3"));
if (!$db) {
  die("Could not connect to database");
} 
```

**编辑**

我还在adodb的论坛上问了这个问题：[http://phplens.com/lens/lensforum/msgs.php?id=19236](http://phplens.com/lens/lensforum/msgs.php?id=19236)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:36:28.537

我编辑了`drivers/adodb-sqlite3.inc.php`. 函数 _connect()

```
if (empty($argHostname) && $argDatabasename) $argHostname = $argDatabasename;
$this->_connectionID = new SQLite3($argHostname); // hack
if ($this->_connectionID === false) return false;
$this->_createFunctions();      
return true; 
```

似乎适用于我的小测试（活动记录：新项目，保存，重新加载，删除）。

# ios - App Store 赠送 iTunes Affiliate 链接？

> ID：11545176
> 
> 赞同：2
> 
> 时间：2012-07-18T15:42:00.343
> 
> 标签：ios, app-store, affiliate

我知道可以直接链接到 iTunes 应用程序中的“赠送此应用程序”页面（实际上它确实打开了 iTunes 应用程序，而不是 App Store 应用程序）（[链接](https://stackoverflow.com/questions/5197035/gift-app-from-inside-the-app/9911273#9911273)），但我想知道是否可以链接给这个应用*程序*赠送一个附属的？

在 iOS 6 的 App Store 的应用程序页面上，Apple 甚至完全删除了“赠送此应用程序”按钮，因此我无法链接到 iTunes 或 App Store 中的产品页面并要求用户通过那里进行操作.

任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:30:16.327

官方不支持“赠送此应用程序”链接供外部使用 - 但它确实有效。当您使用您的会员令牌包装此链接时，会员 cookie 将存储在用户设备上。

您可以在自己的测试中通过监控设备上的网络流量来确认，并在商店流量中查找名为“a”的 cookie。

# combobox - 在 C++ 中将 TDBLookupComboBox 设置为空白

> ID：11545184
> 
> 赞同：1
> 
> 时间：2012-07-18T15:42:43.027
> 
> 标签：combobox, c++builder

我在 Embarcadero C++ Builder 中使用 TDBLookupComboBox 列出数据库中的一些字段，但我需要选择将所选值“TDBLookupComboBox -> Text”设置为空。我需要这个，因为我有其他组件连接到 ComboBox，我需要能够发送从数据库中提取的值或什么都不发送。

我查看了 win32 API SendMessage 函数，但由于 TDBLookupComboBox 没有从 ComboBox 继承，所以我不走运。有人对此有实施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:30:50.560

这是这个问题的答案。

在搜索略有不同的东西时在其他地方找到了它。

我想知道您是否只能拥有一个 NullValueKey。这似乎很奇怪。

[DBLookupComboBox - 如何清除所选项目？](https://stackoverflow.com/questions/8740897/dblookupcombobox-how-to-clear-the-selected-item)

# python - 在 Python 中处理 UTF 文件名

> ID：11545185
> 
> 赞同：4
> 
> 时间：2012-07-18T15:42:51.683
> 
> 标签：python, windows, filenames, utf

我已经阅读了很多关于这个主题的内容，包括似乎是关于这个主题的权威指南：http: [//docs.python.org/howto/unicode.html](http://docs.python.org/howto/unicode.html)

也许对于更有经验的开发人员来说，该指南可能就足够了。但是，就我而言，我比开始时更困惑，但仍然没有解决我的问题。

我正在尝试使用 os.walk() 读取文件名，并在将这些信息写入文本文件之前获取有关文件的某些信息（例如文件大小）。只要我没有遇到任何文件名以 utf 编码的文件，它就可以工作。当它遇到一个带有 utf 编码名称的文件时，我得到一个类似这样的错误：

```
WindowsError: [Error 123] The filename, directory name, or volume label syntax is incorrect: 'Documents\\??.txt' 
```

在这种情况下，该文件被命名为唽咿.txt。

到目前为止，我一直在尝试这样做：

```
for (root, dirs, files) in os.walk(dirpath):
        for filename in files:
            filepath = os.path.join(root, filename)
            filesize = os.stat(filepath).st_size
            file = open(filepath, 'rb')
            stuff = get_stuff(filesize, file)
            file.close() 
```

如果重要的话，dirpath 来自代码的早期部分，相当于“dirpath = raw_input()”。

我尝试了各种方法，例如将文件路径行更改为：

```
filepath = unicode(os.path.join(unicode(root), unicode(filename))) 
```

但是我尝试过的任何事情都没有奏效。

这是我的两个问题：

1.  如何让它将正确的文件名传递给 os.stat() 方法，以便我可以从中获得正确的响应？

2.  我的脚本需要将一些文件名写入文本文件，以后可能要从中读取。此时，它需要能够根据刚刚从文本文件中读取的内容找到文件。如何将此类文件名正确写入文本文件，然后再正确读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:53:07.100

对于那些对完整解决方案感兴趣的人：

```
dirpath = raw_input() 
```

改为：

```
dirpath = raw_input().decode(sys.stdin.encoding) 
```

这允许传递给 os.walk() 的参数使用 unicode，导致它返回的文件名也使用 unicode。

要将这些写入文件或从文件写入（我的第二个问题），我使用了 codecs.open() 功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:05:15.557

传递`unicode`路径到`os.walk()`.

> *在 2.3 版更改:*在 Windows NT/2k/XP 和 Unix 上，如果 path 是一个 Unicode 对象，结果将是一个 Unicode 对象列表。

[资源](http://docs.python.org/library/os.html#os.listdir)

# c# - Windows 2008 64 位，.NET 3.5 Framework 仍有内存限制

> ID：11545187
> 
> 赞同：2
> 
> 时间：2012-07-18T15:42:52.150
> 
> 标签：c#, 64-bit, windows-server-2008, out-of-memory

在 .NET 3.5 Framework、64 位 Windows 2008 Server 系统上，我们遇到了 2GB 的内存限制。我们没有任何超过 2GB 的单个对象（最大对象为 700 MB）。该程序接近 1.5GB，开始变得不稳定，并最终因“System.OutOfMemoryException”错误而崩溃。

我们有点不知所措，因为 64 位系统应该有 8TB 的限制，而且没有单个对象接近 2GB。关于可能导致限制的任何想法？如果有 Win2008 Server（64 位）的人升级到 .NET 3.5 Framework，他们是否仍然受到 3.0（随 Win2008 安装）中的 4GB 的限制？如果是这样，我该如何解决这个问题？

# android - SQLite 外键

> ID：11545189
> 
> 赞同：47
> 
> 时间：2012-07-18T15:42:56.457
> 
> 标签：android, sql, sqlite, foreign-key-relationship, create-table

我正在按照[http://www.sqlite.org/foreignkeys.html](http://www.sqlite.org/foreignkeys.html)上的 SQLite 文档中的说明进行操作，但是我尝试添加外键失败了。这是我的创建语句：

```
CREATE TABLE 
    checklist (
        _id INTEGER PRIMARY KEY AUTOINCREMENT, 
        checklist_title TEXT,
        description TEXT,
        created_on INTEGER, 
        modified_on INTEGER
    );

CREATE TABLE 
    item (
        _id INTEGER PRIMARY KEY AUTOINCREMENT,  
        FOREIGN KEY(checklist_id) REFERENCES checklist(_id), 
        item_text TEXT, item_hint TEXT, 
        item_order INTEGER, 
        created_on INTEGER, 
        modified_on INTEGER
    ); 
```

第一张桌子做得很好。错误发生在第二个语句中。我已经尝试过将两个查询包装在一个事务中，也没有。这是错误：

外键定义（代码 1）中的未知列“checklist_id”：，编译时：CREATE TABLE item (_id INTEGER PRIMARY KEY AUTOINCREMENT, FOREIGN KEY(checklist_id) REFERENCES checklist(_id), item_text TEXT, item_hint TEXT, item_order INTEGER, created_on INTEGER , modified_on INTEGER)

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-07-18T15:46:23.193

`checklist_id INTEGER`在将其添加为外键之前，您仍然必须创建该列。

所以它会是：

```
CREATE TABLE 
    checklist (
        _id INTEGER PRIMARY KEY AUTOINCREMENT, 
        checklist_title TEXT,
        description TEXT,
        created_on INTEGER, 
        modified_on INTEGER
    );

CREATE TABLE 
    item (
        _id INTEGER PRIMARY KEY AUTOINCREMENT,  
        checklist_id INTEGER,
        item_text TEXT, 
        item_hint TEXT, 
        item_order INTEGER, 
        created_on INTEGER, 
        modified_on INTEGER,
        FOREIGN KEY(checklist_id) REFERENCES checklist(_id)
    ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T15:55:12.293

**只是您在项目**表中缺少`checklist_id`列。您需要先声明它，然后再将其设置为. 您试图在不存在的列上创建，这就是它不起作用的原因。**`FOREIGN KEY``FK`**

 **所以你需要添加这个：

```
checklist_id INTEGER,
FOREIGN KEY(checklist_id) REFERENCES checklist(_id) 
```

现在它应该可以工作了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T15:49:03.537

在使用 FOREIGN KEY() 包装之前，您需要包含列名。

```
CREATE TABLE 
    item (
        _id INTEGER PRIMARY KEY AUTOINCREMENT,  
        checklist_id INTEGER,
        FOREIGN KEY(checklist_id) REFERENCES checklist(_id), 
        item_text TEXT, item_hint TEXT, 
        item_order INTEGER, 
        created_on INTEGER, 
        modified_on INTEGER
    ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-05T13:14:26.947

将 FOREIGN KEY 定义放在 SQL 语句的末尾

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-06T13:43:42.280

我认为上述答案并不完全正确，或者至少有点误导。正如他们正确指出的那样，您可以创建列，然后在单独的行上添加外键约束。这称为指定表约束。

但是还有一个更短的语法，**当仅应用于 1 列时**，所有 4 个可能的约束（`PRIMARY KEY`、`UNIQUE`、`CHECK`、`FOREIGN KEY`）也可以内联指定（`NOT NULL`例如 ），作为列约束。即你可以写：

```
CREATE TABLE 
item (
    _id INTEGER PRIMARY KEY AUTOINCREMENT,  
    checklist_id REFERENCES checklist(_id), 
    item_text TEXT, item_hint TEXT, 
    item_order INTEGER, 
    created_on INTEGER, 
    modified_on INTEGER
); 
```

顺便说一句，如果你不确定正确的语法，[官方文档](https://www.sqlite.org/lang_createtable.html)有非常漂亮的铁路图。**

# android - Android - 递归文件搜索给出 NullPointerException

> ID：11545191
> 
> 赞同：0
> 
> 时间：2012-07-18T15:43:08.330
> 
> 标签：android

我有以下函数可以递归搜索文件中的字符串，但是它一直给出一个`NullPointerException`. 当它第一次被调用时，它似乎可以工作，但是一旦它递归调用自己，它`files`就是*null*。

```
public void recursiveSearch(File searchDirectory, String searchString){
    File[] files = searchDirectory.listFiles(); 
        for (int i = 0; i < files.length; i++) {
            if (files[i].isDirectory()){
                recursiveSearch(files[i], searchString);
            }
            if (files[i].getName().contains(searchString)){
                searchResultFiles.add(files[i]);
            }
        }
} 
```

这是如何调用它的示例：

```
recursiveSearch("/", "abc"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:12:38.543

我看到的唯一问题是 File.listFiles() 如果 File 不是目录则返回 null 。我建议测试 searchDirectory.isDirectory() 而不是假设它是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:30:24.510

我今天早上试过了，一些系统目录确实给 isDirectory() 一个空值。空目录也会返回 a `null`，所以只需简单地进行空指针检查，它就可以正常工作

```
public void recursiveSearch(File searchDirectory, String searchString){
  if(searchDirectory!=null)
    File[] files = searchDirectory.listFiles(); 
    if(files!=null)
        for (int i = 0; i < files.length; i++) {
            if (files[i].isDirectory()){
                recursiveSearch(files[i], searchString);
            }
            if (files[i].getName().contains(searchString)){
                searchResultFiles.add(files[i]);
            }
        }
} 
```

# vb.net - 是否可以在代码中引用项目文件？

> ID：11545192
> 
> 赞同：1
> 
> 时间：2012-07-18T15:43:11.713
> 
> 标签：vb.net, visual-studio-2010, file-io

在 Visual Studio (VB.NET) 中，我想打开一个文件并将内容读入一个字符串。当文件位于磁盘上的已知位置时，这很容易，因为您可以将其引用为 C:\Windows\foo.txt 或其他任何内容。有没有办法根据文件在解决方案中的位置来引用文件？例如，MySolution\MyProject\MyFolder\foo.txt。要读取的文件将是一个 SQL 文件，因此其中不会有任何代码对象可供使用。

我使用了一大堆不同的解决方案，这些解决方案存储在磁盘上的不同位置，所以我真的不想直接处理文件系统。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:47:14.620

如果您转到解决方案中文件的文件属性，您会注意到选项之一是“复制到输出目录”。您需要将其设置为“始终复制”或“如果更新则复制”。在所有相关文件上设置并重新构建项目后，您会注意到所有这些文件将作为构建过程的一部分复制到`bin\Debug`or文件夹（您正在构建的文件夹）。`bin\Release`现在，在您的应用程序中，您可以假设它们将与您的应用程序位于同一目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:58:24.697

`Dim s as string = System.IO.Directory.GetCurrentDirectory` will return the executable's directory. If you're always running this via the IDE, or from the build folder, this will be MySolution/MyProject/bin/(Debug or Release). Then `System.IO.Directory.GetParent(s)` twice should get you the project folder path.

# html - 在导航栏中居中文本

> ID：11545193
> 
> 赞同：0
> 
> 时间：2012-07-18T15:43:13.057
> 
> 标签：html, css, text, alignment

我无法将导航栏中的文本对齐到其容器内的中心（垂直）。

导航栏的 HTML：

```
<ul class="navigation">
            <li class="navbar"><a href="index.html" class="navbarlink" >Home</a></li>
            <li class="navbar"><a href="second.html" class="navbarlink">About</a></li>
            <li class="navbar"><a href="index.html" class="navbarlink">Portfolio</a></li>
            <li class="navbar"><a href="index.html" class="navbarlink">Contact</a></li>
        </ul> 
```

导航栏的 CSS：

```
.navigation {
background:#1841c8 url(Navigation/Navigation/nav_background.png);
height:40px;
margin-bottom:0px;
display:block;
}

.navigation .navbar .navbarlink{
color:#FFFFFF;
background:gray;
display:block;
}

.navigation .navbar .navbarlink:hover{
color:#00CCFF;
background: url(Navigation/Navigation/nav_hover.png);
text-decoration:none;
    } 
```

谁能告诉我我的 CSS 中缺少哪个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:58:58.617

尝试删除`margin-bottom:0`on .navigation 并改为放置`margin:50% 0 50% 0;`

# python - 使用twisted处理文件

> ID：11545195
> 
> 赞同：2
> 
> 时间：2012-07-18T15:43:17.533
> 
> 标签：python, xml, twisted, file-transfer

我正在尝试设置一个扭曲的 xmlrpc 服务器，它将接受来自客户端的文件，处理它们，并返回一个文件和结果字典。

我以前使用过 python，但从来没有使用过扭曲的库。出于我的目的，安全性不是问题，而 ssh 协议似乎有点过头了。它在 windows 服务器上也有问题，因为`termios`不可用。

所以我所有的研究都指向 xmlrpc 是实现这一目标的最佳方式。但是，有两种可用的文件传输方法。使用`xml binary data`方法，或`http request`方法。

无论哪种方式，文件都可以达到几百兆，那么我应该使用哪种方法？示例代码表示赞赏，因为我找不到通过扭曲的 xml 进行文件传输的文档。

**更新：**

所以似乎序列化文件`xmlrpclib.Binary`不适用于大文件，或者我用错了。测试代码如下：

```
from twisted.web import xmlrpc, server

class Example(xmlrpc.XMLRPC):
    """
    An example object to be published.
    """

    def xmlrpc_echo(self, x):
        """
        Return all passed args.
        """
        return x

    def xmlrpc_add(self, a, b):
        """
        Return sum of arguments.
        """
        return a + b

    def xmlrpc_fault(self):
        """
        Raise a Fault indicating that the procedure should not be used.
        """
        raise xmlrpc.Fault(123, "The fault procedure is faulty.")

    def xmlrpc_write(self, f, location):
        with open(location, 'wb') as fd:
            fd.write(f.data)

if __name__ == '__main__':
    from twisted.internet import reactor
    r = Example(allowNone=True)
    reactor.listenTCP(7080, server.Site(r))
    reactor.run() 
```

和客户端代码：

```
import xmlrpclib
s = xmlrpclib.Server('http://localhost:7080/')
with open('test.pdf', 'rb') as fd:
    f = xmlrpclib.Binary(fd.read())
s.write(f, 'output.pdf') 
```

`xmlrpclib.Fault: <Fault 8002: "Can't deserialize input: ">`当我测试这个时我得到了。是因为文件是pdf吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:30:28.330

XML-RPC 对于文件传输来说是一个糟糕的选择。XML-RPC 要求以 XML 支持的方式对文件内容进行编码。这在运行时成本和网络资源方面都很昂贵。相反，尝试使用普通的旧 HTTP POST 或 PUTing 文件。

# javascript - 在本机 pdf 查看器中打开 Base64 编码的 PDF

> ID：11545196
> 
> 赞同：5
> 
> 时间：2012-07-18T15:43:18.237
> 
> 标签：javascript, html

我正在生成包含来自 html canvas 元素的图像的 pdf。我已经设法实现了该工作，但是我无法以有用的方式打开结果。

PDF.dataURI() 返回一个看起来像`data:application/pdf;base64,BASE64_ENCODED_PDF_HERE`.

我目前正在使用`window.location = certificate.dataURI()`打开pdf。我已经试过了`window.open`，但 Safari 不适合它。

结果：

在 Firefox 中，这会保存一个随机名称的文件，后跟 .pdf(1).part。在 Safari（桌面版和移动版）中，它会在同一选项卡中打开 PDF，但不会显示任何 pdf 查看器界面。在 Chrome 中，它会在同一选项卡中打开 PDF 并显示 PDF 界面。

基本上，我的问题是如何在浏览器中以 PDF 格式打开该格式的字符串，最好是在新选项卡中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-16T07:40:27.163

您可以使用 iframe 来查看 pdf，如下所示

```
<object data="data:application/pdf;base64, your_base64_data" type="application/pdf">
<iframe src="https://docs.google.com/viewer?&embedded=true"></iframe>
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:57:42.977

你试过`document.location.href`吗？

you can try to control UI interface for PDF viewer from appropriate options inside generated pdf but browser may ignore it, so as al

# sharepoint - 在 Sharepoint iFrame 中保留 QueryString 参数

> ID：11545204
> 
> 赞同：0
> 
> 时间：2012-07-18T15:43:39.043
> 
> 标签：sharepoint, iframe, query-string

问题：发送营销电子邮件时，我们应该在网站上跟踪用户是否通过电子邮件中的链接而来。该网站托管在 SharePoint 2003 环境中，我们的 *.aspx 页面位于 iFrame 中。如何将 QueryString 参数从 SharePoint URL 传递到 iFrame URL？

换句话说，如果用户来自 URL：

```
http://mainsite.com/default.aspx?email=1 
```

那么我的 iFrame 应该指向：

`http:/iframesite.com/page.aspx?email=1`, 否则为`http:/iframesite.com/page.aspx`

我对 CMS 没有开发控制权，只有编辑控制权。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:24:23.233

Are the parent and the child in different domains? If so, your only option is to set the proper URL in the parent site (the child can't get anything from it's parent if the parent is in a different domain, browsers don't allow that for security reasons).

# php - 当您不知道其父对象是否存在时，如何保存对象？

> ID：11545207
> 
> 赞同：4
> 
> 时间：2012-07-18T15:43:44.243
> 
> 标签：php, model-view-controller, zend-framework, model, datamapper

我有三张桌子，

```
Business:
  id
  name
Office:
  id
  name
  business_id
Employee:
  id
  name
  office_id 
```

员工的 office_id 作为外键，办公室的 business_id 作为外键。

我有一个与每个相关的域对象/实体和一个与每个相关的数据库映射器对象。

现在，当我提供公司名称、办公室名称和员工姓名时，如何插入新员工？

最初我认为逻辑应该是这样的：

```
$businessMapper = new businessMapper();  
$business = $businessMapper->findBusinessByName($business_name);

if ($business == false) {   
     $business = new businessEntity(array(         
                     'businessName' => $business_name,            
                   ));        
     $businessMapper->save($business);   
  } 

 $officeMapper = new officeMapper();     
 $office = $officeMapper->getOfficeByName($office_name, $business);

.......etc....... 
```

但后来我意识到，如果我必须保存一项新业务，我就不可能拥有办公室或员工，因此尝试获取它们是一种浪费的查询。所以我想我应该创建一个 if/else 结构。

```
get business entity by business_name  
if ($business == false) {
    create business entity
    save business entity
    create office entity
    save office entity
    create employee entity
    save employee entity
} else {
   get office entity by office_name + business_id

   if (office == false) {
     create office entity
     save office entity
     create employee entity
     save employee entity

   } else {

     ......etc......
   }

} 
```

但是有太多重复的逻辑，而且非常不可扩展/肮脏。

那么应该如何实现呢？

其次，逻辑应该去哪里？它应该进入员工的映射器吗？或“添加员工”操作的控制器还是应该有一个新模型？

我使用 Zend 作为我的框架，但我认为这个问题适用于所有 MVC 风格的结构，所以无论您的框架偏好如何，请随时回复 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:02:00.130

如果您在 if() 块期间使用 OR 语句并将查询放在 if 语句中，那么只有在 IF 语句的第一部分失败时才会执行它 - 确保您不会不必要地执行查询。就个人而言，我们做了类似的事情，但是当我们创建一个新域时，我们在域 new=1 中设置了一个标志，然后我们检查它，相同的方法只是消除了对这些脏变量的需要；-)

```
$businessMapper = Factory::getMapper('business');

if (!$business = $businessMapper->findByName("Business Name"))
{
    $business = $businessMapper->create();
    $business->setName("Business Name");
    $businessMapper->save($business);

    $newBusiness = true;
}

$officeMapper = Factory::getMapper('office');

if (isset($newBusiness) || !$office = $officeMapper->findByName("Office Name"))
{
    $office = $officeMapper->create();
    $office->setName("Office Name");
    $office->setBusiness($business->getId());
    $officeMapper->save($office);

    $newOffice = true;
}

$employeeMapper = Factory::getMapper('employee');

if (isset($newOffice) || !$employee = $employeeMapper->findByName("Employee"))
{
    $employee = $employeeMapper->create();
    $employee->setName("Employee Name");
    $employee->setOffice($office->getId());

    $employeeMapper->save($employee);
} 
```

# jsf - 使用 ui:composition 模板时如何自定义 h:head？

> ID：11545210
> 
> 赞同：14
> 
> 时间：2012-07-18T15:44:01.850
> 
> 标签：jsf, jsf-2, facelets, composition, head

我正在使用 JSF 呈现 HTML 页面。我设计这样的页面：

```
<f:view xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="language" content="fr" />
    <title><ui:insert name="title">My app</ui:insert></title>
</h:head>

<h:body>
    <div id="top">
        <ui:include src="/header.xhtml"/>
    </div>

    <h:panelGroup id="center" layout="block" >
        <ui:insert name="center"/>
    </h:panelGroup>

    <div id="bottom">
        <ui:include src="/footer.xhtml"/>
    </div>
</h:body> 
```

这个模板有一些“客户”页面，比如这个：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"                
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui"
            template="/layouts/master.xhtml">

<ui:define name="center">
    <ui:define name="title"><h:outputText value="#{myBean.description}"/></ui:define>
    <ui:include src="#{myBean.url}"/>
</ui:define> 
```

在客户端中，我必须在标题中添加元信息。如果我们有像 outputScript 或 outputStylesheet 这样的标签，那就太好了，它们可以在文档中的任何地方设置并在 html“head”标签中呈现。

我没有发现什么可以做到这一点。当我在这种情况下，有没有办法在标题中添加标签？谢谢 ！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T16:06:49.307

`<h:outputStylesheet>`总是自动重新定位到`<h:head>`，因此您无需担心这一点。For `<h:outputScript>`，默认情况下与声明的位置在同一行呈现，您只需将`target`属性设置为`head`，这样它也会自动重新定位到`<h:head>`。

```
<ui:define name="center">
    <h:outputStylesheet name="css/style.css" />
    <h:outputScript name="js/script.js" target="head" />
    ...
</ui:define> 
```

对于其他 HTML 头部元信息，只要出于某种原因需要，您可以只声明另一个`<ui:insert>`.

```
<h:head>
    <ui:insert name="htmlhead" />
</h:head> 
```

您可以按如下方式使用

```
<ui:define name="htmlhead">
    <meta ... />
</ui:define> 
```

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-css-js-image-resource-in-facelets-template)

# javascript - 访问移动摄像头和麦克风

> ID：11545214
> 
> 赞同：0
> 
> 时间：2012-07-18T15:44:30.293
> 
> 标签：javascript, html, jquery-mobile

我将开发一个用于视频聊天的通用移动应用程序。因此我需要访问移动摄像头和麦克风。javascript 或 jQuery 中是否有任何功能可以让我做到这一点。注意：因为它是一个通用功能，所以它应该可以访问任何移动设备的相机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:15:49.303

您可以使用使用 JavaScript 的 PhoneGap 功能，它与平台无关。您可以使用[PhoneGap](http://docs.phonegap.com/en/1.5.0/phonegap_media_capture_capture.md.html#capture.captureVideo)的方法`navigator.device.capture.captureVideo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:45:49.860

有[WebRTC](http://www.webrtc.org/reference/getting-started)。

但是今天，即使它旨在成为标准，[它也不适用于所有浏览器](http://en.wikipedia.org/wiki/WebRTC)。

我不认为你会找到一个标准的（非闪存或基于插件的）和现成的库来让你使用相机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:47:21.710

对于实际上只是“有效”并允许您正确利用设备硬件的解决方案，您需要为特定于您所针对的平台的本机应用程序编写代码。（例如 -> iOS、Android 等）

# javascript - 960gs（网格系统）和最佳 html/css 实践

> ID：11545216
> 
> 赞同：0
> 
> 时间：2012-07-18T15:44:49.073
> 
> 标签：javascript, html, css, 960.gs

我正在做一个网站，它的软件基于 960gs 系统。作为一名多年的网络开发人员，这实际上是我第一次接触它。它来自排版世界，据说非常适合设计师。

但是我想知道前端 Web 开发社区中人们对它的看法，因为我发现很难自由地使用和不自由地创建我选择的元素、我选择的样式以及我选择的 javascript 我对如何选择感到畏缩如果我陷入某些网格系统的哲学，那么制作一些带有 alpha 覆盖和圆角的高级 javascript 动画将需要很长时间。我只认为它妨碍了我，但撕掉所有东西也需要时间。我已经完成了 Photoshop 文档的渲染。而且我已经开始剥离网格系统。但我的客户想知道我这样做的更多原因。在类似的位置，你会怎么做？我真的不喜欢使用网格系统，但我 我不是盲目的，可以看到它的好处和坏处。所以我坚持什么是最好的选择，并想知道其他人在遇到同样的问题时会怎么想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:58:34.130

如果不是在谈论进行响应式设计/开发，我建议走那条路，在网格系统上也是如此，用一块石头杀死两只鸟。一开始它有点棘手，有点受设计的限制，但总的来说，即使它基于网格系统，你也会明白并仍然学习如何创建非常独特的外观。

我会在谷歌上查找“响应式网页设计”以获得一些灵感。我已经完全了解了事物的响应方面，总体而言，您制作了非常干净的设计，在所有浏览器和设备上看起来都很棒。

再说一次，我个人认为 960 像素有点窄，但这是我自己的看法，我通常会选择 1024-1200 像素，但也会设计一些东西在 iphone 和 24 英寸显示器上看起来仍然很好（折叠和宽度）。如果你要去响应式不要挂在宽度上，我将我的内容始终保持在 1024 像素宽度内，但总是将元素扩展到 1600-2560 像素宽（对于 24 英寸显示器上的那些）。这样，如果您在较低分辨率的显示器上看到所需的一切，仅此而已，但在更大的显示器上您可以看到一切。

# php - 用点爆炸字符串时如何排除图像

> ID：11545218
> 
> 赞同：0
> 
> 时间：2012-07-18T15:44:53.567
> 
> 标签：php

例如，我有这个字符串：

```
 $str = 'The quick fox. <img src="image.jpg" /> Jumped over. The lazy Dog.'; 
```

我需要得到前两个句子（或前两个点）。使用时如何`<img src="image.jpg" />`避免被炸 `$arr = explode('.', $str);`

这是我当前的代码。

```
$len   = 2;
$arr    = explode('.',  $str);
$arr2   = array_slice($arr, 0, $len);

$str = implode('.', $arr2).'.'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:49:26.000

您可以使用 strip_tags 函数从字符串中删除所有 html 标签。

像这样

```
$arr = explode('.', strip_tags($str)); 
```

更多信息[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

**- 编辑 -**

```
$arr = explode('.', strip_tags($str)); 
```

不会修改您的原始字符串。它保持原样。

```
$str = 'The quick fox. <img src="image.jpg" /> Jumped over. The lazy Dog.';
$arr = explode('.', strip_tags($str));
print_r($arr);
//output :- Array ( [0] => The quick fox [1] => Jumped over [2] => The lazy Dog [3] => ) 
echo "<br/>".$str;
//output :- The quick fox. <img src="image.jpg" /> Jumped over. The lazy Dog. 
```

# javascript - 骨干模型在初始化方法中获取属性

> ID：11545224
> 
> 赞同：0
> 
> 时间：2012-07-18T15:45:00.920
> 
> 标签：javascript, backbone.js

我一直在寻找解决方案，但找不到任何可行的方法。

注意：我正在`Backbone.sync`全局覆盖该方法。

当我实例化一个 Session 模型时，我向它传递了许多属性。正如您所料，这些应该是通过`mySessionInstance.get('someAttribute')`. `this.fetch()`会话模型在初始化方法中调用。我的自定义 Backbone.sync 方法需要访问一些会话属性，但是当它运行时，我收到一条错误消息，指出该实例不存在“get”方法。

就好像我在完全初始化之前试图访问我的会话实例的 .get 一样。关于如何解决它的任何想法？我希望模型有一个“就绪”或“初始化”事件，这样我就可以监听它并确保某些事情只有在模型真正完成初始化时才会发生。

谢谢，

路易斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:46:25.587

模型[`fetch`](http://backbonejs.org/#Model-fetch)将触发两个事件：

1.  `"change"`如果有任何更改（即如果从服务器返回任何内容），将触发事件。毕竟，A`fetch`主要是由 AJAX 成功处理程序调用的。[`set`](http://backbonejs.org/#Model-set)
2.  [模型与服务器同步时](http://backbonejs.org/#FAQ-events)`"sync"`会触发一个事件，同步包括获取。文档对此并不明确，但您可以轻松地在[源代码](https://github.com/documentcloud/backbone/blob/master/backbone.js#L336)中看到它，并且[主事件列表](http://backbonejs.org/#FAQ-events)会记录它。`fetch`

该`"change"`事件通常可能更有用，并且应该用于指示模型已准备好使用。

如果您只需要一次性通知，则可以使用以下`success`回调[`fetch`](http://backbonejs.org/#Model-fetch)：

```
model.fetch({
    success: function(model, response) {
        // ...
    }
}); 
```

# jquery - 每个 div 分开

> ID：11545225
> 
> 赞同：0
> 
> 时间：2012-07-18T15:45:02.697
> 
> 标签：jquery, html, find, width

我有这个

```
<div class="projekt">
<div id="main" class="home" role="main"> 
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
</div>
</div>
<div class="projekt">
<div id="main" class="home" role="main"> 
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
  <div class="slide"><img  src="http://tribulant.net/lightbox/files/2010/08/image-2.jpg" /></div><div class="slide"><img src="http://cyears.files.wordpress.com/2011/04/image4.jpg" /></div>
</div>
</div> 
```

和jQuery：

```
var accum_width = 0;
$('.home').find('.slide').children('img').each(function() {
   accum_width += $(this).width();
});
$('.projekt').width(accum_width);
$('.home').width(accum_width); 
```

如何制作，它将为每个 .project 分别添加图像的宽度。现在它正在添加页面上所有图像的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:05:33.653

为每个 .projekt（或 .home）类分别添加宽度，如下所示：

```
$('.home').each(function () {
    var accum_width = 0;
    $(this).find('.slide').children('img').each(function () {
        accum_width += $(this).width();
    });
    $(this).width(accum_width);
}); 
```

​</p>

# iphone - 编译 nib2objc (Xcode)

> ID：11545226
> 
> 赞同：1
> 
> 时间：2012-07-18T15:45:11.917
> 
> 标签：iphone, ios, xcode

我不知道是否有人曾经使用 nib2objc 将 .nib 和 .xib 文件转换为代码（我必须在大学课堂上这样做），但我无法编译它。[我从 github 页面https://github.com/akosma/nib2objc](https://github.com/akosma/nib2objc)下载了 1.3 版，但是当我尝试使用 Xcode 打开项目时，没有任何反应。任何人都知道如何让这个东西运行，以便我可以查看命令行，并获取我的 .xib 文件的代码。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:38:30.510

nib2objc 的 1.3 版本并不符合标准。幸运的是，我的一位同事做出了一些出色的改进。

专业提示：nib2objc 不理解子类 UI 项。因此，如果您有一个自定义 UIButton 子类“MyButton”，只需在 Interface Builder 中将其称为 UIButton* 并在代码中将其重新创建为 MyButton（您必须在 MyButton 初始化中复制原始 UIButton 的框架和其他属性）。

代码在这个分叉上：[https ://github.com/davidjackman/nib2objc](https://github.com/davidjackman/nib2objc)

# rest - 带有过滤器的 WebApi Restful 路由

> ID：11545230
> 
> 赞同：0
> 
> 时间：2012-07-18T15:45:30.430
> 
> 标签：rest, routes, asp.net-web-api

我想提供一个带有过滤器参数的 GetAll api，如下所示：

```
/api/v1/location/amsterdam/order/?filter=x 
```

但有了这条路线：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/v1/location/{location}/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional}
); 
```

这个网址：

```
/api/v1/location/amsterdam/order/?filter=x 
```

我得到一个例外：

> “在与请求匹配的控制器‘订单’上找不到任何操作。”

'order' 控制器有以下方法：

```
public HttpResponseMessage Get(int id)
public IQueryable<OrderDTO> Get(string filter)
public HttpResponseMessage Get() 
```

当我`{location}`从路由和 url ( `/api/v1/location/order/?filter=x`) 中删除段时，请求与**方法**匹配`Get(string filter)`。

我究竟做错了什么？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:21:24.423

尝试使用

```
/api/v1/location/amsterdam/order?filter=x 
```

前面没有用`/`。`?`

# asp.net-mvc - ASP.NET MVC 默认路由和错误处理

> ID：11545232
> 
> 赞同：0
> 
> 时间：2012-07-18T15:45:39.030
> 
> 标签：asp.net-mvc, unit-testing, routes

在我的应用程序中定义的一堆特定路由中，我使用默认路由来映射所有剩余的无参数路由：

```
routes.MapRoute("Default", "{controller}/{action}", new { controller = "calendar", action = "list" }); 
```

有了这个，我获得了例如以下路由：

*   ~/customer/add -> 控制器 = 客户，操作 = 添加
*   ~/customer -> 控制器 = 客户，操作 = 列表
*   ~/ -> 控制器 = 日历，动作 = 列表

整个路由部分都经过单元测试（使用[Phil Haack 的方法](http://haacked.com/archive/2007/12/16/testing-routes-in-asp.net-mvc.aspx)），因此我检查“~/customer” URL 是否确实会拆分为 controller = “customer” 和 action = “list”。

问题是，如果我删除一个控制器或一个动作，测试将保持绿色，因为该路由仍然被默认路由成功映射。

不知何故，如果目标控制器或操作无效，我希望我的测试失败。有没有办法在 UnitTest 级别做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:25:05.113

您可以通过使用 MvcContrib 来实现

请在此处查看路由测试示例[http://mvccontrib.codeplex.com/wikipage?title=TestHelper#Examples](http://mvccontrib.codeplex.com/wikipage?title=TestHelper#Examples)

# jquery - 动态附加链接按钮

> ID：11545235
> 
> 赞同：1
> 
> 时间：2012-07-18T15:45:45.410
> 
> 标签：jquery, jquery-mobile

我正在尝试将链接按钮添加到 jquery 移动页面：

[http://jsfiddle.net/8JXTT/1/](http://jsfiddle.net/8JXTT/1/)

按钮未正确生成，正在生成链接，但未生成按钮本身。我错过了一个CSS类吗？

代码 ：

```
<div data-role="page" id="firstpage">

        <div data-role="header">
                <h1>First Page</h1>
        </div>

<div data-role="content" id="links">
        <a href="#secondpage" data-role="button">Link button</a>
</div>

        <div data-role="footer">
                <h4>Page Footer</h4>
        </div>

</div>

<div data-role="page" id="secondpage">

        <div data-role="header">
                <a href='#' class='ui-btn-left' data-icon='arrow-l' onclick="history.back(); return false">Back</a><h1>Bar</h1><a href="#firstpage">home</a>
        </div>

        <div data-role="content">
                <p>I'm first in the source order so I'm shown as the page. (this is secondpage)</p>
                <p><a href="#thirdpage">Go to third page</a></p>
        </div>

        <div data-role="footer">
                <h4>Page Footer</h4>
        </div>
</div>
​$(document).ready(function() {

$('#links').append('<a href="#secondpage" data-role="button" data-theme="c">Link Button</a>');

    }); 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:52:05.760

仅附加`a`标签不会解决您的问题，因为 jQuery mobile 会更改其结构以进行样式设置。因此，您必须[`.clone()`](http://api.jquery.com/clone)更改现有标签并更改其`text`.

```
$(document).ready(function() {
    var linkButton = $('#links a').clone(true);
    linkButton.find('span.ui-btn-text').text('Link Button2');
    $('#links').append(linkButton);
}); 
```

## 但是一个注释

正如上面的代码正在克隆一个现有的`a`标签，如果你`a`有`id`，那么`id`就会发生重复。所以将其更改`id`为`class`（如果存在）。

**[演示](http://jsfiddle.net/8JXTT/6/)**

## 感谢[@omar](https://stackoverflow.com/users/1771795/omar)的精彩**[评论](https://stackoverflow.com/questions/11545235/dynamically-append-a-link-button/11545369#comment24634095_11545369)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:53:48.220

你必须实例化它。另一个按钮在页面加载后被实例化。然后你正在添加另一个链接。

添加链接后，您需要在该链接上调用函数：

```
$("a").button(); 
```

如果你给它一个 id 或 class 来调用它来区分它已经设置的那些会更容易。

**编辑：**实例化可能是错误的术语。您只需要调用该函数即可将样式应用于该新链接：

```
$(document).ready(function() {
    $('#links').append('<a href="#secondpage" data-role="button" data-theme="a">Link Button</a>');
    $('a[data-role=button]').button();
});​ 
```

# c# - C#，将数据库值转换为字符串？

> ID：11545238
> 
> 赞同：1
> 
> 时间：2012-07-18T15:45:52.917
> 
> 标签：c#, database, windows, push

我有一份每周更新的报告，需要推送到 30 多台 PC，而且这个数字每周都在增加。我试图弄清楚如何获取 Access 数据库并将文件从我们服务器上的某个位置推送到所有这些 PC，但我无法理解如何去做。我打算使用复制命令，然后在字符串中使用 PC ID 的值并将其输入到文件路径中。这比我习惯使用的要先进一点。这是我到目前为止所拥有的：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'database1DataSet1.PCID_List' table. You can move, or remove it, as needed.
            this.pCID_ListTableAdapter.Fill(this.database1DataSet1.PCID_List);

        }

        private void button_Close_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        static void button_Run_Click(object sender, EventArgs e)
        {
            string reportLocationCopy = @"Location TBD";
            string repLoc = @"Location TBD";
            if (File.Exists(repLoc))
            {
                // If file already exists in destination, delete it
                if (File.Exists(reportLocationCopy))
                    File.Delete(reportLocationCopy);
                File.Copy(repLoc, reportLocationCopy);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:02:55.307

我要做的是：

打开选择所需信息的数据库连接。然后使用 sqldata 适配器/数据表来绘制行数。然后我会编写一个使用这些 PC 并发送更新文件的 foreach 语句。所以从我的头顶上...

```
 //select query here and your connectionstring
 //then fill table as seen below
 SqlDataAdapter sDA = new SqlDataAdapter(query, connectionString);
 DataTable table = new DataTable();
 sDA.Fill(table);

 foreach (DataRow row in table.Rows)
 {
    string pc = (row["PCs"].ToString());
     //send files
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:06:33.670

这将是一个选择：
随着客户端 PC 的数量每周都在增长，您为什么不尝试编写 Web 服务。它将提供便利和集中管理。
现在你有两种情况：

*   如果您在 Intranet 上工作，请在 IIS 上本地托管您的 WCF 服务。
*   如果您有网站然后为此创建网络服务，那么您基于互联网的远程客户端可以访问您的数据。

你可能需要三样东西：

1.  WCF 服务
2.  IIS 托管
3.  客户端应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:49:41.180

蓝天的想法在这里，出于安全原因，这可能是不可能的。您可以将数据库文件推送到其他机器也引用的 Dropbox 帐户吗？这将在更新数据库文件时提供机器的快速同步。

物有所值...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:56:20.753

如果这是在企业中，您的系统管理员将拥有可以推送到每台 PC 的工具。我做过类似的事情来推送应用程序版本，它们可以编写任何你需要的脚本。

在 serverfault 或everythingsysadmin 等系统管理员论坛上发布问题可能是值得的。

如果您真的不喜欢管理分发，您可以让您的应用程序调用 Web 服务或在启动时检查共享驱动器以获取文件的较新版本并下载它（ftp 或直接副本）。

让客户端进行查找以避免诸如 PC 不可用之类的问题。它还允许客户在匆忙时取消加载。没有什么比在您快速需要某些东西时强制更新更糟糕的了！

# ios - 绘制rect导致错误，无法引用myview

> ID：11545247
> 
> 赞同：1
> 
> 时间：2012-07-18T15:46:30.823
> 
> 标签：ios, drawrect, self

这是我的代码。我正在尝试访问我的视图框架。首先我nslog self，以确保视图已分配，然后我尝试nslog 我的视图框架，它返回null。代码：

```
- (void)drawRect:(CGRect)rect {
    NSLog(@"%@",self);
    CGRect frameads = self.frame;
    NSLog(@"%@",frameads);
} 
```

编译器输出：

```
2012-07-18 11:41:59.808 animation[74551:f803] <MyView: 0x68568e0; frame = (0 37; 320 321); autoresize = RM+BM; layer = <CALayer: 0x6856a50>>
2012-07-18 11:41:59.808 animation[74551:f803] (null) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:49:02.200

`frame`是一个结构 ( `CGRect`) 所以不会使用 %@ 记录，使用

```
NSLog(@"%@", NSStringFromCGRect(self.frame)); 
```

# php - 获取一些特定的 CSS 元素

> ID：11545251
> 
> 赞同：0
> 
> 时间：2012-07-18T15:46:45.503
> 
> 标签：php, javascript, jquery

让我解释。我有一个存储在表格中的 css 页面，它以这种形式呈现：

```
. styleFloatCenter, form.styleFloatCenter,. focus {
   margin: auto;
   width: 70%;
} 
```

所有的 CSS 都是这样构建的，这是一种规范。对于我的示例，我需要为我的所有 css“规则”恢复第二个元素，例如 styleFloatCenter。

一个主意？泰！

编辑：第二个例子：

```
. red, form.redColor,. focus {
   margin: auto;
   width: 70%;
} 
```

这里我需要红色...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:11:44.603

尝试 javascript 正则表达式 -

```
var pattern = /,(.+),/;
var oneRule = ". styleFloatCenter, form.styleFloatCenter,. focus {\
 margin: auto;\
 width: 70%;\
 }"; //store one rule in it
var result = pattern.exec(oneRule);
alert(result[1]); //Your required value​ 
```

可以[在这里查看](http://jsfiddle.net/63a8P/)。
您可以使用循环一一分配每个规则。
如果要一起解析整个 css 文档，则首先使用模式搜索规则，然后使用第二个元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:19:20.340

要阅读您的样式表规则，请使用`document.styleSheets`. 以下代码列出了页面上所有样式表中所有规则的第二个选择器的类名：

```
// for all stylesheets on the page
for(var i = 0; i < document.styleSheets.length; ++i) {
    var rules = document.styleSheets[i].rules || document.styleSheets[i].cssRules;

    // for all rules in this sheet
    for(var j = 0; j < rules.length; ++j) {

        // get the full selector string for this rule
        var selector = rules[j].selectorText;

        // get the second selector in the list
        var secondSelector = selector ? selector.split(",")[1] : null;

        // get the class name of that selector
        var secondSelectorClass = secondSelector ? secondSelector.split(".")[1] : null;

        console.log(secondSelectorClass);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:03:32.237

```
window.getComputedStyle(document.getElementsByClassName("styleFloatCenter")[0]) 
```

如果页面上有该类的元素，则可以[`computedStyle`](https://developer.mozilla.org/en/DOM/window.getComputedStyle)使用上面的代码获取它。从那里您可以找到您可能正在寻找的任何特定样式。

顺便说一句，点和选择器名称之间不能有空格。`. styleFloatCenter`不会选择带有 class 的元素`styleFloatCenter`。它必须`.styleFloatCenter`没有空间。

如果您只是想要第二个选择器的名称`.styleFloatCenter, form.styleFloatCenter,.focus`，您可以简单地使用[`explode`](http://php.net/manual/en/function.explode.php)逗号分隔列表并选择第二个。

```
$parts = explode(',', '.styleFloatCenter, form.styleFloatCenter,.focus');
echo $parts[1]; 
```

# c# - 如何使用 Windows 身份验证远程连接到 SQL Server 数据库？

> ID：11545252
> 
> 赞同：0
> 
> 时间：2012-07-18T15:46:44.973
> 
> 标签：c#, asp.net, sql-server, ssis, sqlconnection

我有一个简单的问题，我被授予在本地计算机上使用 Windows 身份验证的 SQL Server 数据库，我还需要知道如何在托管服务器上使用此访问权限。

例如，我正在编写一些从该数据库中提取数据的 C# 代码，我可以在我的本地计算机上运行此代码，我的 Windows 身份验证没有问题，但我无法在预期的托管服务器上运行它，因为该服务器显然无法连接到该数据库。

我只是想知道如何远程使用 Windows 身份验证访问？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:52:03.143

必须在远程服务器上启用 Windows 身份验证才能执行此操作。这可以在服务器属性 > 安全性中启用，并通过选择 SQL Sever 和 Windows 身份验证单选按钮来启用。如果您的 Windows 凭据已添加到服务器，那么您应该能够登录。

在您的 SSMS 上，右键单击数据库名称选择属性，然后从左侧菜单中选择安全性，您应该会看到“SQL Sever 和 Windows 身份验证”选项。

显然，如果您的数据库不在同一个域上，那么这可能不起作用。

# c# - XNA - 没有“isMouseVisible”的定义

> ID：11545253
> 
> 赞同：2
> 
> 时间：2012-07-18T15:46:47.047
> 
> 标签：c#, xna

我正在尝试使用 isMouseVisible 让我的光标在 XNA 游戏中可见，但它不想工作。错误：

> “StopWatch.Game1”不包含“isMouseVisible”的定义，并且找不到接受“StopWatch.Game1”类型的第一个参数的扩展方法“isMouseVisible”

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace StopWatch
{
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        public SpriteBatch spriteBatch;
        public static Game1 Instance;
        StopWatch stopWatch;

        public Game1()
        {
            this.isMouseVisible = true;
            graphics = new GraphicsDeviceManager(this);
            Instance = this;
            Content.RootDirectory = "Content";
            graphics.PreferredBackBufferWidth = 512;
            graphics.PreferredBackBufferHeight = 512;
        }

        protected override void Initialize()
        {
            stopWatch = new StopWatch(); 
            base.Initialize();
        }

        protected override void LoadContent()
        {
            spriteBatch = new SpriteBatch(GraphicsDevice);
            stopWatch.LoadContent();
        }

        protected override void UnloadContent()
        {
            stopWatch.UnloadContent();
        }

        protected override void Update(GameTime gameTime)
        {
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            stopWatch.Update(gameTime);
            base.Update(gameTime);
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);
            spriteBatch.Begin();
            stopWatch.Draw(gameTime);
            spriteBatch.End();
            base.Draw(gameTime);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:52:38.020

利用`IsMouseVisible = true`

大写 I

请记住，使用 intelisence，您只需键入开头即可查看方法和变量。

# java - Java旋转问题

> ID：11545254
> 
> 赞同：1
> 
> 时间：2012-07-18T15:46:50.077
> 
> 标签：java, rotation, graphics2d

当我尝试对当前的 g2d 对象应用旋转时，它不会旋转它，而是将它呈现在同一个位置（在我的上下文中位于另一个之上）。根据我对旋转方法的理解，它将转换应用于当前图形上下文，转换其后出现的任何渲染的像素（这可能是我出错的地方）。这是有问题的代码：

```
@Override
  public void paint(final Graphics graphics) {
    super.paint(graphics);
    final Graphics2D g2d = (Graphics2D) graphics;
    ....
    ....
    g2d.setColor(Color.RED);
    g2d.setStroke(new BasicStroke(SMALL_LINE_THICKNESS));
    if (isLattice1Drawn) {
      g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 1));
      // lattice1 and lattice2 are Polygon objects
      g2d.draw(lattice1);
      // This fades in the second Polygon over the first
      g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha));
      // This line should rotate it, but doesn't
      g2d.rotate(Math.toRadians(210));
      g2d.draw(lattice2);
      ..... 
```

谢谢，迈克

编辑 1 作为 Jeff 的建议，我尝试只进行旋转和绘画，留下以下代码：

```
@Override
public void paint(final Graphics graphics) {
  super.paint(graphics);
  final Graphics2D g2d = (Graphics2D) graphics;
  g2d.rotate(Math.toRadians(210));
  g2d.draw(lattice2);
  return;
  // Rest of paint ................. 
```

不幸的是，这没有帮助，任何其他建议都将受到欢迎。

编辑2：当我不调用旋转时，会渲染多边形，但是当我什么都不做时。谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:25:52.763

我从**编辑 2**中了解到的是：旋转确实有效。但是，由于旋转是围绕原点进行的，所以多边形的旋转坐标最终会超出可见区域。您可以通过旋转较小的度数来测试它。

然后，如果所需的操作是围绕其质心旋转多边形，请改用以下 Graphics2D 方法：

```
void rotate(double theta, double x, double y) 
```

# javascript - Highslide 与 slimScroll.js 冲突

> ID：11545255
> 
> 赞同：1
> 
> 时间：2012-07-18T15:46:53.080
> 
> 标签：javascript, jquery, plugins, conflict

我正在使用 Highslide JS 在单击产品页面上的图像时创建较大产品图像的幻灯片窗口的站点上工作。我还在使用 Piotr Rochala 的优秀 jQuery 插件 slimScroll，作为同一页面上丑陋的浏览器默认滚动条的替代品。

当单击产品图像时会出现问题，在幻灯片后面创建一个新的 .highslide-controls div，该 div 应该只位于幻灯片窗口的顶部。每次单击都会附加 div，我相信我已经将其范围缩小到与 slimScroll 脚本的冲突。

见：[http ://www.thelifeguardstore.com/newproductcart/pc/viewPrd.asp?idproduct=7409](http://www.thelifeguardstore.com/newproductcart/pc/viewPrd.asp?idproduct=7409)

我尝试使用 jQuery 的 noConflict()，更改调用脚本的顺序，并查看每个脚本的 JS 代码，但无法准确找到导致问题的原因。虽然我有预感，它大概就在我面前，疯狂地笑着。

非常感谢任何有关可能导致该问题的帮助或线索。

# windows - 在哪些 Windows 系统上默认禁用命令扩展？

> ID：11545257
> 
> 赞同：6
> 
> 时间：2012-07-18T15:46:55.863
> 
> 标签：windows, batch-file, cmd

根据[setlocal](http://ss64.com/nt/setlocal.html) Windows 批处理命令上的此页面，默认情况下启用命令扩展。是否有任何默认情况下未启用的 Windows 系统？我真的需要明确地包含 `setlocal EnableExtensions`在我的任何批处理脚本中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:50:09.713

它们总是可以在注册表中被禁用，如果可能的话，可能存在这种情况的系统。不过，我还没有找到任何这样的系统。

# c# - C# 应用程序在执行时说“否”

> ID：11545259
> 
> 赞同：5
> 
> 时间：2012-07-18T15:46:58.763
> 
> 标签：c#, .net, dll, console-application, executable

我在本地开发机器上开发了一个小型 C# 控制台应用程序 (TextMatcher.exe)，现在需要将其部署到实时环境。它引用了我开发的另一个类库，它具有通用功能，我打算在未来的控制台应用程序中使用和改进。

最终，这个特定的应用程序将从 SSIS 包中执行，但现在我只是尝试从`cmd`.

**我不骗你**这是程序的实际输出：

```
E:/TextMatcher>TextMatcher.exe
No

E:/TextMatcher> 
```

计算机从[字面上说“不”](http://en.wikipedia.org/wiki/Computer_says_no#Personality)并且没有提供进一步的信息。我没有在程序的任何地方包括在任何失败或其他情况下输出“否”这个词。

当然，它在本地运行良好。我确保我也包含了实用程序类库的 dll。我已阅读有关如何正确部署控制台应用程序的其他问题（[此处](https://stackoverflow.com/questions/939438)，[此处），并已遵循建议。](https://stackoverflow.com/questions/1676577)

注意：这对谷歌来说也很困难，因为使用“不”这个词是问题的根本......

**编辑-现在似乎可以工作了...**我只是将文件从本地计算机再次复制到远程计算机...我试图让它再次中断，以便我可以弄清楚到底发生了什么，并且在我这样做之前，我不会接受答案，以便人们可能会对此有所了解。无论哪种方式都非常令人费解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:00:01.773

有人修改了服务器上的 Image File Execution Options 注册表设置以[自动启动调试器](http://msdn.microsoft.com/en-us/library/a329t4ed.aspx)。

简而言之，检查注册表项`HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\currentversion\image file execution options`并查看是否有与您的可执行文件名称匹配的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:00:57.197

检查您是否安装了必要的Framework组件，即适合的Dot net framework。使用 4.0 并安装 3.5 的应用程序可能会导致非常奇怪的行为。

尝试编写一个非常简单的窗口应用程序并在部署机器上启动它（这可能会给你更多的帮助）。

检查控制台应用程序是否可以访问所需的 Dll（您开发的，例如您的类库）。并检查您的 Dll 的正确版本是否匹配！

检查控制台应用程序中的平台设置。它们与您要运行应用程序的机器匹配吗？（win64 和 win32 不匹配）

如果所有这些都没有帮助，请尝试检查部署机器上的可执行文件，例如使用depends.net、checkasm 或类似工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:55:34.477

您的生产环境是否运行[AppLocker](http://technet.microsoft.com/en-us/library/dd723678%28v=ws.10%29.aspx)？我不知道它的输出是否可以自定义为在命令行上输出“No”。我想到了 Applocker，因为您可以使用它来限制系统仅运行签名的可执行文件。如果您的 Textmatcher 可执行文件未签名，它可能会立即关闭。如果您有能力，我很想知道签署您的二进制文件是否会改变行为。

# ruby-on-rails - 将类添加到 link_to 块

> ID：11545262
> 
> 赞同：8
> 
> 时间：2012-07-18T15:47:02.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下代码显示“删除”链接：

```
<%= link_to :class => 'some_class', :method => :delete, :data => { :confirm => 'Are you sure?' }  do
  <span>Delete</span>
<% end %> 
```

但由于某种原因，ROR 没有添加`some_class`到`a`标签中。你知道我能做些什么来解决它吗？提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T15:56:07.583

您需要添加 URL 作为第一个参数，然后是 html 选项，例如：

```
<%= link_to resource_path(@resource), :class => 'some_class', :method => :delete, :data => { :confirm => 'Are you sure?' }  do
  <span>Delete</span>
<% end %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-09T05:13:40.283

我实际上发现这是使用 Rails 4.2 的有效解决方案

```
<%= link_to(resource_path(@resource), class: "project-card clearfix") do %>
    <h1>Your html here</h1>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T01:34:07.303

如果您需要传递控制器和操作，例如编辑和销毁，请执行以下操作：

```
<%= link_to url_for(controller: controller_name, action: :edit, id: item.id), class: "btn btn-link btn-warning btn-just-icon edit" do %>
  <i class="material-icons">edit</i>
<% end %>
<%= link_to url_for(controller: controller_name, action: :destroy, id: item.id), method: :delete, data: { confirm: t('common.confirm') }, class: 'btn btn-link btn-danger btn-just-icon remove' do %>
  <i class="material-icons">close</i>
<% end %> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T15:53:53.810

link_to 文档：

```
link_to(body, url, html_options = {}) 
```

所以你想要

```
<%= link_to <span>Delete</span>, '/someurl', :class=>'some_class', :method=>:delete, .... %> 
```

# android - Android录音机性能不佳

> ID：11545264
> 
> 赞同：1
> 
> 时间：2012-07-18T15:47:05.657
> 
> 标签：android, audio

```
 //constructor
            android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
        /////////////

        //thread run() method
            int N = AudioRecord.getMinBufferSize(8000,AudioFormat.CHANNEL_IN_MONO,AudioFormat.ENCODING_PCM_16BIT);
            AudioRecord recorder = new AudioRecord(AudioSource.MIC, 8000, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, N*10);
                        recorder.startRecording();

    while(!stopped)
                { 
                try {
                           //if not paused upload audio
                   if (uploadAudio == true) {

                           short[][] buffers  = new short[256][160];
                           int ix = 0;

                            //allocate buffer for audio data
                            short[] buffer = buffers[ix++ % buffers.length];

                               //write audio data to track
                           N = recorder.read(buffer,0,buffer.length);

                           //create bytes big enough to hold audio data
                           byte[] bytes2 = new byte[buffer.length * 2];

                                   //convert audio data from short[][] to byte[]

ByteBuffer.wrap(bytes2).order(ByteOrder.LITTLE_ENDIAN).asShortBuffer().put(buffer);

                        //encode audio data for ulaw
                                read(bytes2, 0, bytes2.length); 
```

有关 ulaw 编码器代码，请参见[此处](http://www.devdaily.com/java/jwarehouse/android/core/java/android/speech/srec/UlawEncoderInputStream.java.shtml)。我正在使用 read、maxAbsPcm 和 encode 方法

```
 //send audio data
                                //os.write(bytes2,0,bytes2.length);
                            }
                        } finally {
                    }
                }
                os.close();
            }
            catch(Throwable x)
            { 
                Log.w("AudioWorker", "Error reading voice AudioWorker", x);
            }
            finally
            { 
                recorder.stop();
                recorder.release();
            }

        /////////// 
```

所以这工作正常。音频以正确的格式发送到服务器并在另一端播放。然而，音频经常跳过。示例：说 1,2,3,4 将在 4 被切断的情况下播放。
我认为这是一个性能问题，因为我已经对其中一些方法进行了计时，当它们花费 0 秒或更少秒时，一切正常，但它们通常需要几秒钟。字节转换和编码占了大部分。
知道如何优化此代码以获得更好的性能吗？或者也许是一种处理滞后的方法（可能建立一个缓存）？

# html - html中的链接混淆

> ID：11545265
> 
> 赞同：1
> 
> 时间：2012-07-18T15:47:07.703
> 
> 标签：html

我正在制作一个门户网站，但我对链接的使用有点困惑。问题是。

我的应用程序在`http://localhost/applicacion/default.aspx` （应用程序是应用程序目录）

如果我放一个链接`<a href="../Admin/defaultadmin.aspx">Link</a>`，它会带我去

```
http://localhost/Admin/defaultadmin.aspx  instead of take me to ---> http://localhost/applicacion/Admin/defaultadmin.aspx 
```

然后我尝试使用 Link 它需要我

```
http://localhost/applicacion/Admin/defaultadmin.aspx but if i am in another part of the site like http://localhost/applicacion/sales/defaultsales.aspx it takes me to 
http://localhost/applicacion/sales/Admin/defaultadmin.aspx witchs is wrong !! 
```

什么是正确的组合，所以链接总是把我带到同一点，记住应用程序目录可以在安装中更改，所以部分必须是动态的，我的意思是我不能放入链接`<a href="Application/Admin/defaultadmin.aspx">Link</a>`，因为用户可以安装它在另一个网站。

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:59:17.750

您声明通过以下方式转到父目录`../`：

```
<a href="../Admin/defaultadmin.aspx">Link</a> 
```

如果要转到子目录，则省略`../`并仅使用子目录的名称，后跟所需的页面：

```
<a href="Admin/defaultadmin.aspx">Link</a> 
```

# java - 使用 Jackon ObjectMapper 映射到类数组以及其他字段？

> ID：11545266
> 
> 赞同：0
> 
> 时间：2012-07-18T15:47:12.507
> 
> 标签：java, json, jackson, mapper

我有以下形式的一些 Json：

```
"items": [
{
  "id": 1,
  "text": "As a user without a subscription, I get a choice of available ones.",
  "status": "finished",
  "tags": [
    {
      "id": 1234,
      "name": "feature=subs"
    },
    {
      "id": 1235,
      "name": "epic=premium"
    }
  ]
},
{
  "id": 2,
    ... 
```

还有更多字段，但为了清楚起见，我省略了它们。我正在尝试将每个故事映射到具有字段 ID、文本、状态和标签列表的故事类。我使用以下方法可以正常工作：

```
public Project JsonToProject(byte[] json) throws JsonParseException, JsonMappingException, IOException
{
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);

    JsonNode rootNode = mapper.readValue(json, JsonNode.class);
    int storyCount = rootNode.get("totalItems").asInt();
    ArrayNode itemsNode = (ArrayNode) rootNode.get("items");

    Project project = new Project();

    for (int i = 0; i < storyCount; i++)
    {
        Story story = JsonToStory(rootNode.get(i));
        project.addStory(story);
    }
return project;
} 
```

一个项目是简单的故事的 ArrayList，而 JsonToStory 是以下方法：

```
public Story JsonToStory(JsonNode rootNode) throws JsonParseException, JsonMappingException, IOException
{
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    Story story = mapper.readValue(rootNode, Story.class);
    return story;
} 
```

故事类如下：

```
public class Story {

    private int id;
    private String text = new String();
    private String status = new String();
    private final List<Tag> tags = new ArrayList<Tag>();

    public void setId(int i)
    {
        id = i;
    }

    public void setText(String s)
    {
        text = s;
    }

    public void setStatus(String s)
    {
        status = s;
    }

    public void setTags(Tag[])
    {
        ???
    }
} 
```

使用 get 方法和 print 方法。标记类只包含两个字符串字段。

我不知道如何构造 setTags 方法，以便生成 Tag 对象的数组列表，并且找不到任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:23:10.790

您已将标签标记为最终标签，这可能会阻止 setter 设置标签。你可以试试这个：

```
public class Story {
    private int id;
    private String text = new String();
    private String status = new String();
    private List<Tag> tags;
    public void setTags(List<Tag> tags){
        this.tags = tags;
    } 
```

或者

```
 public class Story {
    private int id;
    private String text = new String();
    private String status = new String();
    private Tag[] tags;
    public void setTags(Tag[] tags){
        this.tags = tags;
    } 
```

# php - MySQL 搜索一个

> ID：11545271
> 
> 赞同：0
> 
> 时间：2012-07-18T15:47:42.337
> 
> 标签：php, mysql, cacti

我需要在 mysql 表中搜索某个单词以在特定列（类型：文本）中查找。

我认为最简单的方法是：

```
$str = "something"; # let's say passed by POST or GET from a form
$sql = "select lala, textThing from table_name where dudu=1 and textThing LIKE %'$str'%"; 
```

如果在 mysql 中手动进行查询，这似乎可以正常工作，但不能通过 web.php 在 php 上进行。它抛出

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '%searchedString%' 附近使用正确的语法

searchedString 是哪里，嗯，你知道，我搜索的字符串 :)

第一个 PHP 看起来像这样：

```
$str = NULL;

echo "<p>Search for a string</p>";
echo "<form name='formSearch' action='result.php' method='post'>";
echo "<input type='text' name='text' size='30'/>";
echo "<input type='submit' name='search' value='Search'/>";
echo "</form>"; 
```

第二个只是获取“文本”并执行 mysql 并应该显示数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:48:26.647

您必须将 LIKE 子句放在引号之间。像这样在您的 php 代码中转义它们：

```
$sql = "select lala, textThing from table_name where dudu=1 and textThing LIKE \"%".$str."%\"" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:52:58.310

您需要在引号或双引号中包含 %。

> $sql = "select lala, textThing from table_name where dudu=1 and textThing LIKE '%$str%'";
> 
> 或者
> 
> $sql = "select lala, textThing from table_name where dudu=1 and textThing LIKE '%" + $str + "%'";

# asp.net-mvc-3 - 使用 MVC3 打开/查看上传的文件

> ID：11545275
> 
> 赞同：0
> 
> 时间：2012-07-18T15:47:59.323
> 
> 标签：asp.net-mvc-3, file-upload, attachment

我正在尝试打开或查看用户上传到我网站上的 Uploads 文件夹中的附件（不是保存！）。附件功能将主要用于当前网站的错误截图。我有一个错误索引视图，显示用户提交的所有错误，我希望能够通过单击回形针（如链接）来查看附件。我只是不明白如何做这样的事情，我需要使用局部视图或其他一些辅助方法吗？我试图编写一些方法来查看附件，但我认为我认为我没有正确调用它。我已经包含了上传方法和查看附件方法的查看代码和控制器代码。如果您需要任何其他代码进行诊断，请告诉我。谢谢你的帮助！

**错误索引视图**

```
@model PagedList.IPagedList<DBFirstMVC.Models.bug>

@{
    ViewBag.Title = "BugIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using PagedList;

<h2 class="corporate sifr">@ViewBag.Title</h2>

<div class="crossband">
@using (Html.BeginForm())
{
    <div class="lefty">
        Search Bugs Index: @Html.TextBox("SearchString", "", new { @class = "text" })        
    </div>
        <input type = "submit" value = "Search" class = "button1" />
}

    <div class="righty">
    @Html.ActionLink("Report a Bug", "ReportBugs", "Support", null, new { @class = "button1" })

    </div>

</div>

<div class="crossband">
    <div class="lefty">

    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount
    &nbsp;&nbsp;&nbsp;&nbsp;
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
    </div>

    <div class="righty">
    Showing Records @Model.FirstItemOnPage to @Model.LastItemOnPage from @Model.TotalItemCount records
    </div>
</div>

<table>
    <tr>

        <th>
            @Html.ActionLink("Date Submitted", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "date_submitted"})
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "date_submitted"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "date_submitted"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Submitted By", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "submitted_by"})
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "submitted_by"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "submitted_by"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Description", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "Description" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "Description"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "Description"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Priority", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "Priority" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "Priority"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "Priority"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Estimated Completion Date", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "estimated_completion_date" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "estimated_completion_date"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "estimated_completion_date"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Status", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "status" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "status"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "status"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Developer Comments", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "developer_comments" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "developer_comments"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "developer_comments"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Attachment", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "attachment" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "attachment"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "attachment"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>

        <th></th>
    </tr>

@{
    var row_class = "odd";
}

@foreach (var item in Model)
{
    row_class = row_class == "odd"? "even" : "odd";    
    <tr class="@row_class">
        <td>
            @Html.DisplayFor(modelItem => item.date_submitted)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.submitted_by)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.description)
        </td>
        <td>

            @ViewBag.Priorities[(item.priority-1)].PRIORITY
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.estimated_completion_date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.developer_comments)
        </td>
        <td>
            @if (item.attachment != null){<img id="success" src="@Url.Content("~/Images/attach.png")" alt = "attachment" />}
            @Url.Action("", "ViewAttachment", new { id = item.bug_pk}) <!--<----- I think this is the problem-->

        </td>
        <td>
            @Html.ActionLink("Edit", "EditBugs", new { id = item.bug_pk }) |
            @Html.ActionLink("Delete", "DeleteBugs", new { id = item.bug_pk })
        </td>
    </tr>
}

</table> 
```

**控制器方法**

```
[Authorize]
        public String Uploadfile(HttpPostedFileBase file)
        {
            if (file != null && file.ContentLength > 0)
            {
                var fileName = Path.GetFileName(file.FileName);
                var path = Path.Combine(Server.MapPath("~/Uploads"), fileName);
                string fileNameWithoutExtension = System.IO.Path.GetFileNameWithoutExtension(file.FileName);
                int iteration = 1;
                while (System.IO.File.Exists((path)))
                {
                    fileName = string.Concat(fileNameWithoutExtension, "-", iteration, System.IO.Path.GetExtension(file.FileName));
                    path = Path.Combine(Server.MapPath("~/Uploads"), fileName);
                    iteration++;
                }
                file.SaveAs(path);
            }
            return file.FileName;
        }

        public ActionResult ViewAttachment(HttpPostedFileBase file)
        {

                var fileName = Path.GetFileName(file.FileName);
                var path = Path.Combine(Server.MapPath("~/Uploads"), fileName);

                return View(file.FileName);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:56:51.957

有一个`action`接受`ID`该专用图像资源的方法。上传图片后，您将有一个图片的 id / 路径，在网格中显示为 HREF，如下所示

```
@Html.ActionLink("View","ViewAttachment","Bugs",null,new { @id="SomeIdofImage"}) 
```

这将产生一个锚标记的 HTML 标记，如

```
<a href="Bugs/ViewAttachment/SomeIdofImage">View</a> 
```

*硬编码的**SomeIdofImage**应替换为您的动态值（图像标识符）*

现在`action`在您的控制器中有一个方法`Bug`来读取`Id`作为参数并返回图像

```
public ActionResult ViewAttachment(string id)
{
  var imgPath=SomeMethodtoGetTheFullPathToImg(id);
  return File(imgPath, "image/jpeg")
} 
```

假设您有一个`SomeMethodtoGetTheFullPathToImg`接受 ID 并返回存储在服务器中的图像的路径的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:53:24.017

所以我得到了这个工作，这就是我做的。

ViewAttachment 控制器已更改为允许 system.IO 方法

```
public ActionResult ViewAttachment(string fileName)
        {
            try
            {
                var fs = System.IO.File.OpenRead(Server.MapPath("~/Uploads/" + fileName));
                return File(fs, "application/jpg", fileName);
            }
            catch
            {
                throw new HttpException(404, "Couldn't find " + fileName);
            }

        } 
```

视图已修改为允许将回形针图像用于链接而不是单词下载

```
 <td>
        @if (item.attachment != null)
        {
            <a href = @Url.Action("ViewAttachment", new { fileName = item.attachment }) > <img src = "@Url.Content("~/Images/attach.png")"  alt = "attachment" /> </a>  
        }
 </td> 
```

由于我使用的是现有数据库，因此该模型未修改。

这就是我解决查看上传到上传文件夹的图像的问题的方法。此解决方案完全适用于 MVC 3 和 MS SQL server 2008 R2。

# java - 基本字符串操作，删除 While 循环中的最后一个字符

> ID：11545276
> 
> 赞同：2
> 
> 时间：2012-07-18T15:48:01.697
> 
> 标签：java, collections

我正在努力使用下面的基本代码，

如何防止最后一个逗号“，”附加到字符串。

```
 String outScopeActiveRegionCode="";

    List<String> activePersons=new ArrayList<String>();

    HashSet<String> outScopeActiveRegionCodeSet=new HashSet<String>();

    for (String person : activePersons) {

       outScopeActiveRegionCodeSet.add(person); 

    }
       Iterator itr = outScopeActiveRegionCodeSet.iterator();

             while(itr.hasNext()){
                outScopeActiveRegionCode+=itr.next();
                outScopeActiveRegionCode+=",";
             } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:51:12.060

我实际上是反过来做的，除了第一种情况外，我在所有情况下都在前面附加逗号，它更容易。

```
boolean isFirst = true;
while(itr.hasNext()) {
    if(isFirst) {
        isFirst = false;
    } else {
        outScopeActiveRegionCode+=",";
    }
    outScopeActiveRegionCode+=itr.next();
} 
```

这样做的原因是检测第一种情况比检测最后一种情况要简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:59:42.293

我会做：

```
String delimiter = "";

while(itr.hasNext()){
    outScopeActiveRegionCode += delimiter;
    outScopeActiveRegionCode += itr.next();
    delimiter = ",";
} 
```

# uitableview - UITableView - 从 ViewWillAppear 在代码中访问

> ID：11545277
> 
> 赞同：0
> 
> 时间：2012-07-18T15:48:04.657
> 
> 标签：uitableview, ios5

我想在 UITableView 从详细视图返回时操作表格单元格，以提醒用户他们上次选择的行。UITableView 是在 IB 中创建的，目前没有用于 UITableView 或任何其他句柄的@property 或自定义类。显然，当用户从详细视图返回并调用 viewWillAppear 但我在调试器中没有看到我的 UITableView 的任何句柄时，它存在。

有什么方法可以简单地获取 IB tableView 对象的句柄？

```
// - The Containing ViewController
  - (void)viewWillAppear:(BOOL)animated
  {

      [super viewWillAppear:animated];

      NSIndexPath *selected = [self.tableView indexPathForSelectedRow];

      if(selected){

        //Do something stylish with the last-selected row
        NSLog(@"Last row selected was: %@",selected);

      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:34:25.983

我通过创建 NSIndexPath * 的类成员并将其设置在 didSelectRowAtIndexPath 中解决了这个问题。然后，当 viewWillAppear 执行时，当用户从表格视图详细信息返回时，我有最后选择的行，因此我可以轻松地突出显示它或以任何我想要的方式处理它：

```
 //The Containing View Controller
- (void)viewWillAppear:(BOOL)animated
{

    [super viewWillAppear:animated];

     if(self.lastSelectedRow){

        [self.tableView selectRowAtIndexPath:self.lastSelectedRow animated:YES scrollPosition:UITableViewScrollPositionNone];

      }  
} 
```

# android - 在每个项目上膨胀一个带有 id 的 tablerow

> ID：11545279
> 
> 赞同：0
> 
> 时间：2012-07-18T15:48:09.290
> 
> 标签：android, xml, tablelayout, tablerow, inflate

我在尝试开发 atm 的应用程序时遇到了一个主要问题。我有这个观点，你可以在下面的链接中看到。我怎样才能膨胀这个，所以我不必在我的 xml 文件中发送 10 次垃圾邮件？
我还想在列区域、锻炼、组/公里、代表/分钟和按钮中的项目上有单独的 ID。每个项目的每个列上也将有 onClickListeners。
我会将所有这些保存在数据库/文本文件中，这样当用户再次打开此视图时，我可以将它们放回原处。
如何以示例方式执行此操作并概述每个项目？
我应该提一下，所有这些项目都在一个表格布局中，并且在那里有单独的表格行。

[示例图片](http://imageshack.us/photo/my-images/849/examplezb.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:57:34.237

在代码中为一行创建您自己的自定义视图，该视图在内部处理按钮点击。在其他视图中使用这些（可能仅通过代码）。

# c# - 无法在多对多中获取非组成员

> ID：11545282
> 
> 赞同：2
> 
> 时间：2012-07-18T15:48:18.247
> 
> 标签：c#, linq, entity-framework, many-to-many

我有两张桌子；一个用于团体，另一个用于成员。第三个表是组成员的交集表，但我们在使用实体框架时看不到该表。我想使用 C# 和 LINQ 来获取不在特定组中的所有成员。我想列出这些成员，以便用户可以为该组选择其他成员。我找不到使这项工作有效的语法示例。我是 C# 和 LINQ 的新手，但精通 SQL 和 VB。谁能提供一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:11:46.403

> 我想使用 C# 和 LINQ 来获取不在特定组中的所有成员。

```
var members = context.Members
    .Where(m => !m.Groups.Any(g => g.GroupId == particularGroupId))
    .ToList(); 
```

# c++ - 仅包含一个 #include 的 .cpp 文件有什么意义？

> ID：11545283
> 
> 赞同：7
> 
> 时间：2012-07-18T15:48:19.760
> 
> 标签：c++, header, include

我正在使用第三方库开始一些工作，并且在 Visual Studio 2010 中构建它时，我注意到我多次收到此链接器警告（[LNK4221](http://msdn.microsoft.com/en-us/library/604bzebd.aspx)）。我查看了用于创建被链接的目标文件的源代码，发现这些文件的所有实现都位于头文件中。有趣的是，我还注意到该项目包含相应的 .cpp 文件，其中**仅**包含一个 #include 用于实现的标头。

我很好奇 - 这有什么意义，我为什么要使用这种技术？如果 .cpp 文件没有为项目增加任何价值，为什么我不应该删除它们以摆脱链接器警告？

我尝试搜索类似的问题，但没有找到任何感兴趣的内容。如果您知道任何，请链接它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:02:20.813

是单个`#include`d 文件 stdafx.h 吗？I. 这种情况下，您正在处理[预编译的 headers](http://msdn.microsoft.com/en-us/library/szfdksca%28v=vs.100%29.aspx)。正常设置是针对具有“生成预编译头”编译器选项的一个 .cpp 文件，而项目中具有“使用 pch”的其余 .cpp 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:10:24.250

我使用它来确保标题至少在第一个位置包含的一个文件中。通过这样做，我确保标头可以自行编译。

为了使链接器不发出警告，可以使用具有非常大变量的外部变量：

```
int variable_with_a_name_that_includes_the_file_name_somehow = 42; 
```

# c# - 将 HTML 写入文件

> ID：11545286
> 
> 赞同：0
> 
> 时间：2012-07-18T15:48:27.110
> 
> 标签：c#, asp.net, html

我有一个由用户部分填充的表，我想将生成的 HTML 保存到文件中。我正在使用的代码是：

```
WebClient myClient = new WebClient();
string myPageHTML = null;
byte[] requestHTML;
string currentPageUrl = Request.Url.ToString();
UTF8Encoding utf8 = new UTF8Encoding();
requestHTML = myClient.DownloadData(currentPageUrl);
myPageHTML = utf8.GetString(requestHTML);
string outputFileLocation = currDir + "\\" + "outputFile.html";
FileStream fs = File.Open(outputFileLocation, FileMode.Create, FileAccess.Write);
using (StreamWriter sw = new StreamWriter(fs))
{
    sw.WriteLine(myPageHTML);
} 
```

问题似乎是这段代码发送了一个新的页面请求，所以我最终得到了初始页面视图，而不是用户输入产生的 HTML。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:55:58.387

我会将您的方法放在渲染方法中并将其更改为以下

```
protected override void Render(HtmlTextWriter writer)
{
 sw = new StringWriter();
 htmltw = new HtmlTextWriter(sw); 
 base.Render(htmltw);
 StringBuilder html = sw.GetStringBuilder();

 string outputFileLocation = currDir + "\\" + "outputFile.html";
 FileStream fs = File.Open(outputFileLocation, FileMode.Create, FileAccess.Write);
 using (StreamWriter sw = new StreamWriter(fs))
 {
  sw.WriteLine(html);

 }
 writer.Write(sOut);
} 
```

# java - JButton ActionListener - GUI 仅在 JButton 被点击后更新

> ID：11545288
> 
> 赞同：5
> 
> 时间：2012-07-18T15:48:27.560
> 
> 标签：java, swing, user-interface, jbutton, swingworker

我的 JButton ActionListener 有问题。我在另一个类中定义了一个 doTheCleaning() 方法，该方法在调用时会对我的 GUI 进行一系列更改。

```
public void doTheCleaning(){
    //change image icon
    //had thread.sleep here
    //insert to text area
    //had thread.sleep here
    //etc
} 
```

然后在另一个类中，我实例化了包含我的 doTheCleaning() 方法的类，并用我的 actionperformed() 方法为我的 jbutton 编写了 ActionListener，如下所示：

```
public void actionPerformed(ActionEvent e){
   //some code
   //newClass.doTheCleaning();
} 
```

我知道如何做其余的事情，比如 addActionListener() 和其他东西，所以不需要对此提出质疑。我担心的是，调用 doTheCleaning() 方法时在我的 GUI 中执行的所有更改仅在单击按钮后才适用。发生这种情况时，我的标签和文本区域中发生的更改之间的连续性没有显示出来。如果我直接在我的测试程序类中调用它，代码工作正常，但在 actionperformed 方法中调用它只显示我的 GUI 的最终状态。我需要显示哪个元素首先更改，然后是下一步，等等。

当我需要这些更改仅在单击 JButton 时发生时，我怎么能实现它？

**我还不太擅长在 java 中做 GUI。我希望你们在没有我提供代码的情况下理解我的观点。但如果有必要我可以。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T16:37:28.877

不要在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)中执行任何密集操作，否则 GUI 将无响应并且您可能看不到 GUI 更新。您可以使用的最佳选择是[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)：

*   覆盖[`doInBackground()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)，并将任何长操作放入此方法中，以便它将在单独的线程而不是[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上运行。

*   对于其中的任何 GUI 创建或更改 GUI 组件的状态[`doInBackground()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)，使用[`publish(V... chunks)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#publish%28V...%29)将数据发送到[`process(List<V> chunks)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#process%28java.util.List%29). 您需要覆盖[`process(List<V> chunks)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#process%28java.util.List%29). 另请注意，这是在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)[`process(List<V> chunks)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#process%28java.util.List%29)上执行的。

*   [`doInBackground()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)返回后，在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)[`done()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#done%28%29)上执行，您可以覆盖它以将其用于任何 GUI 更新。您还可以使用检索从返回的值。[`doInBackground()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)[`get()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#get%28%29)

*   请注意，这[`SwingWorker<T,V>`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)是[generic](http://docs.oracle.com/javase/tutorial/java/generics/)，您需要指定类型。`T`是从[`doInBackground()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)and返回的对象的类型[`get()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#get%28%29)，`V`而是您传递给[`process(List<V> chunks)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#process%28java.util.List%29)via的元素的类型[`publish(V... chunks)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#publish%28V...%29)。

*   [`execute()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#execute%28%29)方法通过首先调用来启动摇摆工人[`doInBackground()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#doInBackground%28%29)。

有关这方面的更多信息，请阅读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

# python - Python：将 JSON 的整个目录转换为 Python 字典以发送到 MongoDB

> ID：11545291
> 
> 赞同：2
> 
> 时间：2012-07-18T15:48:32.540
> 
> 标签：python, json, mongodb

我对 Python 比较陌生，对 MongoDB 也很陌生（因此，我只关心获取文本文件并转换它们）。我目前正在尝试将一堆 JSON 格式的 .txt 文件移动到 MongoDB 中。因此，我的方法是打开目录中的每个文件，读取每一行，将其从 JSON 转换为字典，然后将作为字典*的*JSON 行覆盖。然后它将以一种格式发送到 MongoDB

（如果我的推理有任何缺陷，请指出）

目前，我写了这个：

```
"""
Kalil's step by step iteration / write.

JSON dumps takes a python object and serializes it to JSON.
Loads takes a JSON string and turns it into a python dictionary.
So we return json.loads so that we can take that JSON string from the tweet and save it as a dictionary for Pymongo
"""

import os
import json
import pymongo

rootdir='~/Tweets'

def convert(line):
    line = file.readline()
    d = json.loads(lines)
    return d

for subdir, dirs, files in os.walk(rootdir):
    for file in files:
        f=open(file, 'r')
        lines = f.readlines()
        f.close()
        f=open(file, 'w')
        for line in lines:
            newline = convert(line)
            f.write(newline)
        f.close() 
```

但这不是写作。哪个...根据经验，如果您没有得到想要的效果，那么您在某处犯了错误。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:19:47.673

当你解码一个 json 文件时，你不需要逐行转换，因为解析器会为你遍历文件（除非你每行有一个 json 文档）。

加载 json 文档后，您将拥有一个字典，它是一种数据结构，如果不先将其序列化为某种格式，例如 json、yaml 或许多其他格式（mongodb 使用的格式称为bson，但您的驱动程序将为您处理编码）。

加载 json 文件并将其转储到 mongo 的整个过程实际上非常简单，看起来像这样：

```
import json
from glob import glob
from pymongo import Connection

db = Connection().test

for filename in glob('~/Tweets/*.txt'):
    with open(filename) as fp:
        doc = json.load(fp)

    db.tweets.save(doc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:14:16.130

python中的字典是存在于程序中的对象，除非您对其进行腌制，否则不能将字典直接保存到文件中（腌制是将对象保存在文件中的一种方法，以便以后可以检索它）。现在我认为更好的方法是从文件中读取行，加载将 json 转换为字典的 json 并将该信息立即保存到 mongodb 中，无需将该信息保存到文件中。

# python - 在 PyQt（或 PySide）中编码时，我应该使用 Python 函数还是等效的 Qt 函数？

> ID：11545293
> 
> 赞同：5
> 
> 时间：2012-07-18T15:48:46.293
> 
> 标签：python, pyqt, pyside

使用 PyQt 或 PySide 编写代码时，有时 Qt 和 Python 中都可以使用等效的函数（例如，`QDir.exists`Qt 与`os.path.exists`Python 中的比较）。在这些情况下，是否有使用哪种语言的既定做法？

我想知道速度、重构等问题是否与决策有关。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:59:02.560

据我了解，其中许多 Qt 功能是为了跨平台兼容性而添加的，而其他功能则是为了与 Qt 集成。但是，Python 已经包含跨平台函数，所以我会尽可能使用 Python 函数，因为它们是

*   Python 程序员比较熟悉
*   不会让你如此依赖 Qt
*   符合 Python 的习惯用法

但是，您可能必须使用 Qt 的函数，因为它们与 Qt 集成和/或它们提供 Python 不提供的功能。

这已针对其他语言进行了讨论，例如 C++：[Qt：Qt 类与标准 C++](https://stackoverflow.com/questions/3523622/qt-qt-classes-vs-standard-c)

实际上，这取决于您是要编写 Qt 应用程序还是 Python 应用程序。

# objective-c - 自定义视图控制器过渡动画时间？

> ID：11545294
> 
> 赞同：0
> 
> 时间：2012-07-18T15:48:48.447
> 
> 标签：objective-c, ios, animation

有没有办法可以轻松更改视图控制器之间过渡动画的持续时间？例如，如果我调用dismissModalViewControllerAnimated:YES，我是否还可以提供一个选项来控制转换发生的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:27:09.757

并不真地。但是，您可以告诉`dismissModalViewControllerAnimated`不要制作动画，然后使用 为自己制作动画`transitionWithView`，例如，

```
[UIView transitionWithView:self.view.superview
                  duration:2.0
                   options:UIViewAnimationOptionTransitionFlipFromBottom
                animations:^{
                    [self dismissModalViewControllerAnimated:NO];
                }
                completion:nil]; 
```

显然，使用最适合您的任何`duration`东西`options`。

# php - 持续更新基于 PHP 文本的游戏

> ID：11545296
> 
> 赞同：0
> 
> 时间：2012-07-18T15:48:59.537
> 
> 标签：php

我正在用 PHP 构建多人游戏。每场比赛都分为持续一定时间的阶段 - 目前为 2 分钟。在每个阶段，玩家一起工作一段时间，直到游戏进入下一个阶段，或者该阶段（以及游戏）丢失，新的游戏重新开始。

我有一个在 HTML 页面上玩游戏的愿景，用户可以通过不断更新的倒计时时钟来查看当前阶段还剩多少时间。当倒计时时钟到达零时，游戏要么前进，要么结束，并通过 Ajax 返回结果。我遇到的问题是 100 名玩家同时玩游戏的（理论上的）想法。

如何调用更新脚本？如果我通过运行 PHP 调用它，哪个播放器的浏览器调用它？如果玩家的浏览器在阶段实际结束前一秒刷新内容，会发生什么？

PHP 是适合这种游戏的语言吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:04:50.400

“对于这样的游戏来说，PHP 是正确的语言吗？” 是的，如果你做对了。这是你如何做到的......

使用名为 Comet 的方法，您可以让多个客户端从服务器中提取数据，但仅限于数据更新时。它的工作原理是这样的：

1.  客户端 A 向服务器发出拉取请求。
2.  服务器等待，保持与客户端 A 的连接打开。
3.  客户端 B 向服务器发出拉取请求。
4.  服务器等待，保持与客户端 B 的连接打开。
5.  客户端 A 将新数据推送到服务器。
6.  服务器通过仍然打开的连接将新数据推送到客户端 A 和客户端 B。
7.  客户端 A 发出拉取请求...
8.  ETC...

换句话说，这意味着所有客户端都会立即收到最新信息，这些信息被任何客户端推送到服务器。这意味着您不必实现“每 x 秒刷新一次”系统，这有两个好处：

1）你不会浪费时间和带宽在什么都没有发生的情况下向服务器发出请求；2）所有客户端同时获得推送给他们的数据，这绝对是最新的，而不是 x 秒旧。

在实践中，Comet 是通过 AJAX 实现的。谷歌一些彗星的例子——它非常简单，而且非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:54:28.713

在客户端-服务器游戏中，您的服务器应该与客户端的模拟（游戏）并行运行模拟。

通常，服务器模拟是权威的，因此当比赛结束时，它将通知比赛中的所有客户端模拟状态更改为“比赛结束”或其他。然后，客户端将锁定 UI 或显示“游戏结束”消息或宣布获胜者——无论您想要什么。

所以对你来说，你的服务器应该运行倒数计时器，而客户端则保持轮询（通过 AJAX 或 WebSockets）服务器的状态变化。当服务器的计时器归零时，下次客户端轮询服务器时，服务器会说：“嘿，哟——游戏结束了！”。

**编辑**

我还想说 PHP 可能会工作，但您必须了解 PHP 是为 Web 服务而不是游戏而构建的。当您投入多人游戏功能时，简单的游戏（如井字游戏、跳棋或国际象棋）可能会变得相当复杂。模拟通常需要线程。PHP 可以做线程，但如果你不知道自己在做什么，它会变得非常丑陋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:54:56.977

好吧，如果您使用的是 PHP 会话系统，脚本会将 Ajax 请求识别为来自（例如）登录到您的游戏的同一用户。

在舞台结束前一秒钟，您可以在 PHP 中返回舞台剩余的时间，以便 javascript 计数器保持同步？服务器和客户端都必须知道游戏的状态，否则会在某个时候出现黑客。

# java - 垃圾收集 Java 类

> ID：11545298
> 
> 赞同：0
> 
> 时间：2012-07-18T15:49:00.800
> 
> 标签：java, garbage-collection

在下面的代码中，对象矩形是否可能被垃圾收集器销毁？

```
...
 Point point = new Point(2,4);
 Rectangle rectangle = new Rectangle (point, 20, 20);
 point = null;
... 
```

我认为垃圾收集器销毁点和矩形是合理的，因为矩形引用了无效的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:51:19.773

如果一个对象不能从任何活动线程或任何静态引用中访问，则该对象有资格进行垃圾收集或 GC - 如果一个对象的所有引用都为空，则可以说该对象有资格进行垃圾收集。此外，阅读参考类型（强、弱、软和幻影）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:52:04.377

这两个对象都不能被收集，因为`rectangle`它指的是 Rectangle 并且它指的是 Point 对象。事实`point`不再是指什么都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:53:04.190

取决于 Rectangle 的构造函数的作用。它可以存储对点对象的引用或复制其值。

在第一种情况下，两个对象都不会被 GC。在第二种情况下，只有 Point 会被 GCed。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:53:47.980

你没有给出足够的例子来说明。一旦超出范围，它们都将有资格获得 GC，范围是包含声明的最接近的大括号集。

假设矩形内部有一个 Point 类型的字段，它存储了您传递给它的点：

```
{
 Point point = new Point(2,4);
 Rectangle rectangle = new Rectangle (point, 20, 20);
 point = null;
 //No GC yet!
}
//Now they can be GC'd 
```

将点引用设置为 null 与此无关。如果没有其他对象有引用，GC 将识别“循环”引用并收集这两个对象。如果您存储了矩形的副本， 将点变量设置为 null*不会使矩形内的点无效！*`point = null;`将该指针的值设置为null，它不会更改它曾经指向的对象！

# gwt - “GWT 模块可能需要（重新）编译”当部署到 Tomcat 并且使用 maven 生成战争时

> ID：11545301
> 
> 赞同：0
> 
> 时间：2012-07-18T15:49:01.400
> 
> 标签：gwt, spring-mvc, mojo, gwt-2.4, gwt-maven-plugin

我在访问 url 时遇到了问题（“GWT 模块 'SmartWPS' 可能需要（重新）编译”）。我通过运行 maven-clean-install 生成了 war 文件。我将相同的战争文件放在 /webapp 文件夹中。

我使用 GWT 开发了应用程序，客户端 GIN 作为依赖注入，服务器端作为 Spring 依赖注入。当我运行 maven-clean-install 时，war 文件正在成功生成。将war文件放入/webapp**文件夹后，我在tomcat日志文件夹中看到以下错误，**

> 2012 年 7 月 18 日下午 8:43:02 org.apache.catalina.core.ApplicationContext 日志严重：StandardWrapper.Throwable org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源中定义的名称为“urlMapping”的 bean 时出错 [/WEB -INF/spring/spring-servlet.xml]：bean初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/spring/spring-servlet.xml] 中定义名称为“empDetailsController”的 bean 创建错误：无法创建内部 bean 'com.infor.ion .boddesk.ui.sample.server.EmployeeDetailsS​​erviceImpl#ca56214' 类型为 [com.infor.ion.boddesk.ui.sample.server.EmployeeDetailsS​​erviceImpl]，同时设置 bean 属性“remoteService”；嵌套异常是 org.springframework.beans.factory。BeanCreationException：在 ServletContext 资源 [/WEB-INF/spring/spring-servlet.xml] 中定义的名称为“com.infor.ion.boddesk.ui.sample.server.EmployeeDetailsS​​erviceImpl#ca56214”的 bean 创建错误：bean 的实例化失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [com.infor.ion.boddesk.ui.sample.server.EmployeeDetailsS​​erviceImpl]：构造函数抛出异常；嵌套异常是 com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection timed out: connect at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) at org. springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。

**我的 spring-servlet.xml 文件如下所示，**

> http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
> 
> ```
> <!-- The application context definition for the DispatcherServlet -->
> 
> <!-- Maps the request through to a concrete controller instance -->
> <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
>     <property name="mappings">
>         <value>
>         <!-- /**/SampleApp.rpc=sampleAppController -->
>         /**/empDetails.rpc=empDetailsController
>         </value>
>     </property>
> </bean>
> 
> <!-- GwtRpcController wraps our service in order to decode the incoming -->
> <!-- request then delegates processing of the call to the POJO service -->
> <!-- and then encodes the return value forwarding the response. -->    <!--<bean id="sampleAppController" class="com.infor.ion.boddesk.server.GwtRpcController">
>     <property name="remoteService">
>         <bean class="com.infor.ion.boddesk.server.sampleapp.SampleAppService" />
>     </property>
> </bean>  -->      <bean id="empDetailsController" class="com.infor.ion.boddesk.ui.sample.server.GwtRpcController">
>     <property name="remoteService">
>         <bean class="com.infor.ion.boddesk.ui.sample.server.EmployeeDetailsServiceImpl" 
> ```
> 
> />

当使用面临所有这些问题的 maven iam 启用时，使用 build.xml，它刚刚成功，甚至在码头服务器中也成功运行。

谢谢，萨丽莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:53:22.327

清理临时文件（运行 > %temp%）清理你的项目（在你的 IDE 中）清理浏览器的缓存。（使用 CCleaner）再次编译项目。

# .net - 具有多个 WCF 客户端的 WPF 应用程序

> ID：11545303
> 
> 赞同：0
> 
> 时间：2012-07-18T15:49:06.670
> 
> 标签：.net, wpf, wcf, prism, wcf-client

我有一个使用 Prism 的 WPF 应用程序。

该应用程序加载了几个模块。

每个模块都连接到一个或多个 WCF 服务。

连接详细信息位于模块库的“app.config”文件中。

我的问题是 - 我如何让“Shell”项目了解分布在不同程序集中的不同“app.config”文件中的端点配置。

尝试连接的不同“模块”中的每个客户端 - 抛出无法找到“端点”信息的异常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:26:05.023

更新：

另一种可能的解决方案是在自己的 AppDomain 中创建 WCF 客户端。

请参阅此处了解一些想法：

*   [App.config 之外的 WCF ChannelFactory 配置？](https://stackoverflow.com/questions/5045916/wcf-channelfactory-configuration-outside-of-app-config)

*   [寻找一种实用的方法来沙箱化 .NET 插件](https://stackoverflow.com/questions/4145713/looking-for-a-practical-approach-to-sandboxing-net-plugins)

我想问题是如何让这个与 Prism 一起工作......诀窍可能是有一个自定义 IModuleManager (Prism V4)、IModuleLoader (V1) 或 Catalog 来处理加载 WCF 客户端模块，或者可能有一个包装器模块这反过来会加载您的 WCF 客户端。

*   [http://blog.thomaslebrun.net/2011/11/prism-load-modules-in-specific-order-even-for-modules-loaded-on-demand/#.UBpGtU1mSHU](http://blog.thomaslebrun.net/2011/11/prism-load-modules-in-specific-order-even-for-modules-loaded-on-demand/#.UBpGtU1mSHU)

*   [https://prism.svn.codeplex.com/svn/V1/spikes/AGCompositeApplicationLibrary/AGComposite/Modularity/ModuleLoader.cs](https://prism.svn.codeplex.com/svn/V1/spikes/AGCompositeApplicationLibrary/AGComposite/Modularity/ModuleLoader.cs) （来自Prism V1……仅供参考）。

* * *

我第一次尝试做类似于你正在做的事情是通过在我的 DLL 模块中执行此操作来破解 AppDomain 配置。

```
 object o = AppDomain.CurrentDomain.GetData("APP_CONFIG_FILE");

    // See if there is a configuration defined by the Exe host, hosting this DLL.

    Configuration con = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

    // Do we need to override the configuration, to point to our "default" one?

    if (con.HasFile == false)
    {
        string sFullPathToConfig = Assembly.GetExecutingAssembly().Location + ".config";

        AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", sFullPathToConfig);

        ConfigurationManager.RefreshSection("system.serviceModel");
        ConfigurationManager.RefreshSection("system.diagnostics");
    } 
```

我记不清了，但我认为我根本不必在我的主应用程序 app.config 中定义任何 ServiceModel 配置（否则在尝试替换它时会发生冲突）......这可能是错误的...... . 可能正好相反，或者根本没有任何 app.config ！:o/。由于某种原因它很脆……我不记得了。

我还尝试在运行时从 ConfigurationManager 访问 ServiceModel 配置，并尝试通过代码对其进行修改……但它没有。

无论如何，我认为以上内容不会对您有所帮助，因为您将加载多个模块，因此需要加载多个配置。

* * *

所以无论如何，在尝试了上述方法之后，我通过使用以下组合切换到了一种不那么脆弱的方法：

```
ExceptionHandlingProxyBase<T> 
```

从

*   [http://wcfproxygenerator.codeplex.com](http://wcfproxygenerator.codeplex.com)

和

`CustomClientChannelFactory<T>`

从

*   [http://svn.assembla.com/svn/pak/BuhServices/trunk/ExternalConfiguredChannel/CustomClientChannelFactory.cs](http://svn.assembla.com/svn/pak/BuhServices/trunk/ExternalConfiguredChannel/CustomClientChannelFactory.cs)

*   [http://weblogs.asp.net/cibrax/archive/2007/10/19/loading-the-wcf-configuration-from-different-files-on-the-client-side.aspx](http://weblogs.asp.net/cibrax/archive/2007/10/19/loading-the-wcf-configuration-from-different-files-on-the-client-side.aspx)

我进行了一些必要的修复以使 ChannelFactory 工作，并对其进行了修改，以便我可以选择是否要使用我自己的配置文件覆盖，并且还支持覆盖地址。

我在 ExceptionHandlingProxyBase 中使用了这个构造函数来创建工厂：

```
public CustomClientChannel(Binding binding, string remoteAddress, string configurationPath) 
```

您可以忽略此解决方案的 ExceptionHandlingProxyBase 部分......这只是在通道出现故障时重新建立通道的糖，这样您就不必担心代理的状态。

如果您仍然不想使用 ChannelFactory，那么您可以尝试破解 AppDomain 中的 ServiceModel 配置。我试过了，但似乎很难修改

这是带有修复程序的 ChannelFactory 代码（愚蠢地重命名为 CustomClientChannel）。

```
/// <summary>
/// Custom client channel. Allows to specify a different configuration file
/// </summary>
/// <typeparam name="T"></typeparam>
public class CustomClientChannel<T> : ChannelFactory<T>
{
    string configurationPath;
    string endpointConfigurationName;
bool m_bOverrideConfiguration = false;
Uri m_OverrideAddress = null;

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(string configurationPath) : base(typeof(T))
    {
        this.configurationPath = configurationPath;
        base.InitializeEndpoint((string)null, null);
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="binding"></param>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(Binding binding, string configurationPath)
        : this(binding, (EndpointAddress)null, configurationPath)

    {
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="serviceEndpoint"></param>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(ServiceEndpoint serviceEndpoint, string configurationPath)
        : base(typeof(T))
    {
        this.configurationPath = configurationPath;
        base.InitializeEndpoint(serviceEndpoint);
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="endpointConfigurationName"></param>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(string endpointConfigurationName, string configurationPath)
        : this(endpointConfigurationName, null, configurationPath)
    {
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="binding"></param>
    /// <param name="endpointAddress"></param>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(Binding binding, EndpointAddress endpointAddress, string configurationPath)
        : base(typeof(T))
    {
        this.configurationPath = configurationPath;
        base.InitializeEndpoint(binding, endpointAddress);
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="binding"></param>
    /// <param name="remoteAddress"></param>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(Binding binding, string remoteAddress, string configurationPath)
        : this(binding, new EndpointAddress(remoteAddress), configurationPath)
    {
    }

    /// <summary>
    /// Constructor
    /// </summary>
    /// <param name="endpointConfigurationName"></param>
    /// <param name="endpointAddress"></param>
    /// <param name="configurationPath"></param>
    public CustomClientChannel(string endpointConfigurationName, EndpointAddress endpointAddress, string configurationPath)
        : base(typeof(T))
    {
    m_OverrideAddress = (endpointAddress != null ? endpointAddress.Uri : null);

        this.configurationPath = configurationPath;
        this.endpointConfigurationName = endpointConfigurationName;
        base.InitializeEndpoint(endpointConfigurationName, endpointAddress);
    }

    /// <summary>
    /// Loads the serviceEndpoint description from the specified configuration file
    /// </summary>
    /// <returns></returns>
    protected override ServiceEndpoint CreateDescription()
    {
    if (string.IsNullOrEmpty(this.configurationPath))
    {
        System.Diagnostics.Debug.WriteLine("Not using overriding config file");

        return base.CreateDescription();
    }

    if (!System.IO.File.Exists(configurationPath))
    {
        System.Diagnostics.Debug.WriteLine("Overriding config file [" + configurationPath + "] doesn't exist");

        return base.CreateDescription();
    }

    m_bOverrideConfiguration = true;

        ServiceEndpoint serviceEndpoint = base.CreateDescription();

        if (endpointConfigurationName != null)
            serviceEndpoint.Name = endpointConfigurationName;

        ExeConfigurationFileMap map = new ExeConfigurationFileMap();
        map.ExeConfigFilename = this.configurationPath;

        Configuration config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None);
        ServiceModelSectionGroup group = ServiceModelSectionGroup.GetSectionGroup(config);

        ChannelEndpointElement selectedEndpoint = null;

        foreach (ChannelEndpointElement endpoint in group.Client.Endpoints)
        {
            if (endpoint.Contract == serviceEndpoint.Contract.ConfigurationName && 
                (this.endpointConfigurationName == null || this.endpointConfigurationName == endpoint.Name))
            {
                selectedEndpoint = endpoint;
                break;
            }
        }

        if (selectedEndpoint != null)
        {
            if (serviceEndpoint.Binding == null)
            {
                serviceEndpoint.Binding = CreateBinding(selectedEndpoint.Binding, selectedEndpoint.BindingConfiguration, group);
            }

        if (m_OverrideAddress != null)
        {
            serviceEndpoint.Address = new EndpointAddress(m_OverrideAddress, GetIdentity(selectedEndpoint.Identity), selectedEndpoint.Headers.Headers);
        }
        else
            if (serviceEndpoint.Address == null)
            {
                serviceEndpoint.Address = new EndpointAddress(selectedEndpoint.Address, GetIdentity(selectedEndpoint.Identity), selectedEndpoint.Headers.Headers);
            }

            if (serviceEndpoint.Behaviors.Count == 0 && !string.IsNullOrEmpty(selectedEndpoint.BehaviorConfiguration))
            {
                AddBehaviors(selectedEndpoint.BehaviorConfiguration, serviceEndpoint, group);
            }

            serviceEndpoint.Name = selectedEndpoint.Contract;
        }

        return serviceEndpoint;

    }

    /// <summary>
    /// Configures the binding for the selected endpoint
    /// </summary>
    /// <param name="bindingName"></param>
    /// <param name="group"></param>
    /// <returns></returns>
    private Binding CreateBinding(string bindingName, string bindingConfiguration, ServiceModelSectionGroup group)
    {
    IBindingConfigurationElement be = null;

        BindingCollectionElement bindingElementCollection = group.Bindings[bindingName];

    if (bindingElementCollection.ConfiguredBindings.Count > 0)
    {

        foreach (IBindingConfigurationElement bindingElem in bindingElementCollection.ConfiguredBindings)
        {

            if (string.Compare(bindingElem.Name, bindingConfiguration) == 0)
            {

                be = bindingElem;

                break;

            }

        }

        Binding binding = null;

        if (be != null)
        {

            binding = GetBinding(be);

            be.ApplyConfiguration(binding);

        }

        return binding;

    }

    return null;
    }

    /// <summary>
    /// Helper method to create the right binding depending on the configuration element
    /// </summary>
    /// <param name="configurationElement"></param>
    /// <returns></returns>
    private Binding GetBinding(IBindingConfigurationElement configurationElement)
    {
        if (configurationElement is CustomBindingElement)
            return new CustomBinding();
        else if (configurationElement is BasicHttpBindingElement)
            return new BasicHttpBinding();
        else if (configurationElement is NetMsmqBindingElement)
            return new NetMsmqBinding();
        else if (configurationElement is NetNamedPipeBindingElement)
            return new NetNamedPipeBinding();
        else if (configurationElement is NetPeerTcpBindingElement)
            return new NetPeerTcpBinding();
        else if (configurationElement is NetTcpBindingElement)
            return new NetTcpBinding();
        else if (configurationElement is WSDualHttpBindingElement)
            return new WSDualHttpBinding();
        else if (configurationElement is WSHttpBindingElement)
            return new WSHttpBinding();
        else if (configurationElement is WSFederationHttpBindingElement)
            return new WSFederationHttpBinding();

        return null;
    }

    /// <summary>
    /// Adds the configured behavior to the selected endpoint
    /// </summary>
    /// <param name="behaviorConfiguration"></param>
    /// <param name="serviceEndpoint"></param>
    /// <param name="group"></param>
    private void AddBehaviors(string behaviorConfiguration, ServiceEndpoint serviceEndpoint, ServiceModelSectionGroup group)
    {
    if (group.Behaviors.EndpointBehaviors.Count == 0)
        return;

        EndpointBehaviorElement behaviorElement = group.Behaviors.EndpointBehaviors[behaviorConfiguration];
        for (int i = 0; i < behaviorElement.Count; i++)
        {
            BehaviorExtensionElement behaviorExtension = behaviorElement[i];
            object extension = behaviorExtension.GetType().InvokeMember("CreateBehavior",
                BindingFlags.InvokeMethod | BindingFlags.NonPublic | BindingFlags.Instance,
                null, behaviorExtension, null);
            if (extension != null)
            {
                serviceEndpoint.Behaviors.Add((IEndpointBehavior)extension);
            }
        }
    }

    /// <summary>
    /// Gets the endpoint identity from the configuration file
    /// </summary>
    /// <param name="element"></param>
    /// <returns></returns>
    private EndpointIdentity GetIdentity(IdentityElement element)
    {
        EndpointIdentity identity = null;
        PropertyInformationCollection properties = element.ElementInformation.Properties;
        if (properties["userPrincipalName"].ValueOrigin != PropertyValueOrigin.Default)
        {
            return EndpointIdentity.CreateUpnIdentity(element.UserPrincipalName.Value);
        }
        if (properties["servicePrincipalName"].ValueOrigin != PropertyValueOrigin.Default)
        {
            return EndpointIdentity.CreateSpnIdentity(element.ServicePrincipalName.Value);
        }
        if (properties["dns"].ValueOrigin != PropertyValueOrigin.Default)
        {
            return EndpointIdentity.CreateDnsIdentity(element.Dns.Value);
        }
        if (properties["rsa"].ValueOrigin != PropertyValueOrigin.Default)
        {
            return EndpointIdentity.CreateRsaIdentity(element.Rsa.Value);
        }
        if (properties["certificate"].ValueOrigin != PropertyValueOrigin.Default)
        {
            X509Certificate2Collection supportingCertificates = new X509Certificate2Collection();
            supportingCertificates.Import(Convert.FromBase64String(element.Certificate.EncodedValue));
            if (supportingCertificates.Count == 0)
            {
                throw new InvalidOperationException("UnableToLoadCertificateIdentity");
            }
            X509Certificate2 primaryCertificate = supportingCertificates[0];
            supportingCertificates.RemoveAt(0);
            return EndpointIdentity.CreateX509CertificateIdentity(primaryCertificate, supportingCertificates);
        }

        return identity;
    }

    protected override void ApplyConfiguration(string configurationName)
    {
    if (!m_bOverrideConfiguration)
    {
        // This picks up the configuration from the inherited config settings defined
        // by the application i.e. the normal place.

        base.ApplyConfiguration(configurationName);
    }
    }
} 
```

# c++ - 失踪 ';' 前 '*'

> ID：11545304
> 
> 赞同：1
> 
> 时间：2012-07-18T15:49:10.147
> 
> 标签：c++

我浏览了很多“失踪的';' 在'x'”问题之前，但还没有找到这个特定问题的答案。

```
// ---- Define File ----

#ifndef AnimDefinition_h
#define AnimDefinition_h

// ---- Include ----

#include "AString.h"
#include "FileReader.h"

// ---- Global Constant Variables ----

static const int    MaxAnimations   = 16;
static const int    Blank           = 10;
static const int    EndOfLine       = 59;
static const int    Space           = 32;

// ----------------------------------------------------------------
//                      Sprite Animation Definition                     
// ----------------------------------------------------------------
class AnimDefinition
{
private:

    struct Animation
    {
        AString     mAnimationID;
        AString     mLoopTo;
        int         mFrameBegin;
        int         mFrameEnd;
    };

public:

                    AnimDefinition          (void);
                    AnimDefinition          (const char *pFileName);
                    ~AnimDefinition         (void);

    void            ReadFile                ();

    Animation*      Animation               (int pIndex);
    Animation*      Animation               (const char *pFileName);   // The first incident of this error occurs here

private:

    const char      *Scan                   (char *pSource, int &pCounter);

private:

    AString         mDefinitionID;
    FileReader      mFileReader;
    Animation       *mAnimations[MaxAnimations];

    int             mNumberAnimations;
};

// ---- End Definition ----

#endif  //  AnimDefinition_h 
```

如上所述，我遇到错误的第一行是函数的定义

```
Animation*      Animation               (const char *pFileName); 
```

我已经确认 AnimDefinition 没有包含在“AString.h”或“FileReader.h”中。这些类中的任何一个都没有在任何地方缺少分号。

任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:50:46.623

`Animation`是`struct`名称，不能用作函数名。只需重命名：

```
 Animation* someOtherNameForGettingAnimation(int pIndex); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-18T15:55:24.103

这只是我非常愚蠢的一个例子。

当我定义一个与我预定义的实际类型具有相同接口名称的函数时，就会出现问题。

这一行：

```
Animation*      Animation           (int pIndex); 
```

我清楚地错误地将这个函数称为“动画”，为了解决我命名它的问题：

```
Animation*      GetAnimation            (int pIndex); 
```

很抱歉浪费了任何人的时间。

# cakephp - 自定义配置文件错误

> ID：11545307
> 
> 赞同：3
> 
> 时间：2012-07-18T15:49:25.233
> 
> 标签：cakephp

我想为站点配置创建一个配置文件。我创建`config.php`并将其放入`Config`文件夹中。它的内容是：

```
<?php
Configure::write('Title', 'My App');
Configure::write('Categories', array(
    'Recipes' => 
        array('url' => '/recipe', 'max' => 10),
    'Foods' => 
        array('url' => '/food', 'max' => 5)
)); 
```

并将此代码放在末尾`bootstrap.php`：

```
Configure::load('config'); 
```

但是 cake 返回这个错误：

> ```
> No variable $config found in ...........\app\Config\config.php.php
> 
> Error: An Internal Error Has Occurred.
> 
> Stack Trace
> 
>     CORE\Cake\Core\Configure.php line 272 → PhpReader->read(string)
>     APP\Config\bootstrap.php line 110 → Configure::load(string)
>     CORE\Cake\Core\Configure.php line 92 → include(string)
>     CORE\Cake\bootstrap.php line 142 → Configure::bootstrap(boolean)
>     APP\webroot\index.php line 79 → include(string) 
> ```

有什么问题？？

**注意：**我使用的是最新版本：2.2.1 Stable

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:56:07.117

`$config`在你的配置文件中，如果你想使用`load()`默认的 PhpReader，你应该使用一个名为而不是 Configure::write 的数组变量。见[API](http://api.cakephp.org/class/configure#method-Configureload)

前任。

```
<?php
$config = array(
    'Title' => 'MyApp',
    ...
); 
```

[http://book.cakephp.org/2.0/en/development/configuration.html#built-in-configuration-readers](http://book.cakephp.org/2.0/en/development/configuration.html#built-in-configuration-readers)

# django - 如何在 Django 1.4 中提供静态管理文件？

> ID：11545309
> 
> 赞同：1
> 
> 时间：2012-07-18T15:49:25.613
> 
> 标签：django, django-admin

我有一个从 Django 1.2 开始的 Django 项目。现在我正在尝试在 Django 1.4 下运行它，在开发环境中，使用内置的网络服务器。我无法工作的一件事是管理界面的静态文件。在我的 django 服务器窗口中，我看到：

```
Django version 1.4, using settings 'settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.
[18/Jul/2012 11:38:04] "GET /admin/ HTTP/1.1" 200 6452
[18/Jul/2012 11:38:05] "GET /admin/admin/css/base.css HTTP/1.1" 404 4249
[18/Jul/2012 11:38:05] "GET /admin/admin/css/dashboard.css HTTP/1.1" 404 4264 
```

我看到 ADMIN_MEDIA_PREFIX 已被弃用，但我显然错过了告诉我必须做什么才能让管理页面在开发中工作的 HOWTO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:26:00.957

我终于用“django-admin startproject”开始了另一个项目，并开始挑选设置文件。我发现新的设置文件有：

*   将“django.contrib.staticfiles”添加到 INSTALLED_APPS

*   添加了一些 STATIC_ 设置。我复制了这四个：

    STATIC_ROOT = ''

    STATIC_URL = '/静态/'

    STATICFILES_DIRS = ()

    STATICFILES_FINDERS = ()

现在事情似乎正在奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:07:03.257

您是否尝试过运行 collectstatic 来收集您的静态文件？

[https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#collectstatic)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T16:00:50.807

在 django 1.4 中，您可以使用静态标签

```
{% load static %}

<a href="{% static 'img/foo.png' %}"> 
```

# php - MODx 革命 - 超时每分钟发生一次，导致注销

> ID：11545312
> 
> 赞同：0
> 
> 时间：2012-07-18T15:49:28.963
> 
> 标签：php, modx, modx-revolution

设置：MODX Revolution 2.2.4-pl（传统） 主机：HostGator 共享 Linux 服务器

问题：在我登录 CMS 后，当我对网站的资源、片段或任何其他方面进行更改时，无论花费多长时间（10 秒到 10 分钟），我都会看到一个屏幕显示会话超时并且必须再次登录。

我在我的专用 IIS7 Rackspace 盒子上安装了 50 个 MODx，从来没有给我带来任何问题。

我在管理器面板中只有一个从未见过的警告：配置警告：您的 php.ini 配置文件中的 register_globals 设置为 ON

关于为什么几乎每次我去做出改变都会把我踢出去的任何想法？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:36:14.117

我最近通过设置服务器的会话保存路径解决了这个问题。查看您的 php5.ini 配置文件（如果不存在则创建它）。在您的服务器上创建一个文件夹（例如 php_sessions）并授予它写入权限（CHMOD 777）。

然后添加以下内容： `session.save_path = "/path/to/your/root/html/php_sessions"`

这应该可以立即工作，但是根据您的主机（例如 godaddy），您可能需要重新启动您的 Web 服务。

真的希望这也适用于你 m8！祝你好运！

# linq - LINQ ForEach 带替换

> ID：11545314
> 
> 赞同：0
> 
> 时间：2012-07-18T15:49:40.593
> 
> 标签：linq

我正在尝试用 LINQ 中的空字符串替换字符串日期值“01/01/1700”。

日期是字符串类型。

像这样的东西，但我无法让它工作。

```
Query<Client>(sql).ToList().ForEach(x => x.DateOfBirth =
    x.DateOfBirth.Replace("01/01/1700", "")); 
```

此代码有效，但不是 LINQ。

```
 var result = Query<Client>(sql).ToList();
        foreach (var client in result)
        {
            if (client.DateOfBirth == "01/01/1700")
            {
                client.DateOfBirth = "n/a";
            }
        } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:04:47.730

问题是`ToList()`. 结果在您之后使用的变量中不可见。

尝试以下方法：

```
var list = Query<Client>(sql).ToList();
list.ForEach(l => l.DateOfBirth = l.DateOfBirth.Replace("01/01/1700", "n/a")); 
```

应该可以正常工作。之后使用该`list`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:11:33.410

```
 var result = Query<Client>(sql).ToList();
        result.ForEach(l => l.DateOfBirth = l.DateOfBirth.Replace("01/01/1700", "n/a")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:15:50.010

您的代码假定对 a 中的对象所做的更改`List`将反映在`Query<Client>`该对象的来源中。显然情况并非如此。您可以尝试的一件事是在调用之前分配列表并从那时`ForEach()`起使用列表：

```
var clients = Query<Client>(sql).ToList();
clients.ForEach(x => x.DateOfBirth = x.DateOfBirth.Replace("01/01/1700", "")); 
```

此外，`ForEach`不是 LINQ 运算符。它是`List`类中的一个方法。与 LINQ 运算符不同，它会修改调用它的列表并且不会返回任何内容。使用 LINQ “修改”数据的方法是使用`select`：

```
var clients = (from client in Query<Client>(sql).ToList()
               select new Client(client) 
                      { 
                          DateOfBirth = client.DateOfBirth.Replace("01/01/1700", "")
                      }).ToList(); 
```

# c++ - 给定以下代码（在 GCC 4.3 中），为什么要调用两次引用转换？

> ID：11545316
> 
> 赞同：3
> 
> 时间：2012-07-18T15:49:42.273
> 
> 标签：c++

给定以下代码（在 GCC 4.3 中），为什么在这两种情况下都调用到引用的转换？

```
class A { };

class B {
public:
  operator A() {}
  operator A&() {}
};

int main() {
  B b;
  (A) b;
  (A&) b;
} 
```

[http://ideone.com/d6iF8](http://ideone.com/d6iF8)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T15:59:11.213

您的代码不明确，不应编译（根据 13.3.3:2 ，它的格式*不正确）。*

左值到右值转换与恒等转换具有相同的等级，因此（根据 13.3.3:1）无法在它们之间进行选择。

[Comeau C++](http://www.comeaucomputing.com/tryitout)（可能是最符合标准的编译器）给出以下错误：

```
"ComeauTest.c", line 11: error: more than one user-defined conversion from "B" to
          "A" applies:
            function "B::operator A()"
            function "B::operator A &()"
    (A) b;
        ^ 
```

以下是标准中的相关文本：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 13.3.3 最佳可行函数[over.match.best]
> 
> [...] 鉴于这些定义，一个可行函数 F1 被定义为比另一个可行函数 F2 [...]
> 
> 2 - 如果恰好有一个可行函数比所有其他可行函数更好，那么它就是重载决议选择的那个；否则调用格式不正确。

定义本身很复杂，但用户定义的转换有两点需要注意：

首先，将用户定义转换作为转换序列的应用程序指定为分解为一`S_a - U - S_b`​​个标准转换序列的序列，然后是一个用户定义的转换，然后是另一个标准转换序列。这涵盖了所有情况；一个转换序列中不能有多个用户定义的转换，标准转换序列可以是“身份转换”，即不需要转换。

其次，在比较用户定义的转换序列时，唯一重要的部分是第二个标准转换序列。这是在 13.3.3 中：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 13.3.3 最佳可行函数[over.match.best]
> 
> [...] 一个可行函数 F1 被定义为比另一个可行函数 F2 更好的函数，如果 [...]
> 
> *   上下文是通过用户定义的转换（参见 8.5、13.3.1.5 和 13.3.1.6）进行的初始化，从 F1 的返回类型到目标类型（即被初始化实体的类型）的标准转换序列是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。

在 13.3.3.2 中：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 13.3.3.2 对隐式转换序列进行排名[over.ics.rank]
> 
> 3 - 两个相同形式的隐式转换序列是不可区分的转换序列，除非以下规则之一适用：[...]
> 
> *   如果用户定义的转换序列 U1 包含相同的用户定义的转换函数或构造函数或聚合初始化，并且 U1 的第二个标准转换序列优于第二个标准转换序列，则用户定义的转换序列 U1 是比另一个用户定义的转换序列 U2 更好的转换序列U2 的。

因此，在比较转换序列时`U1 = (S1_a - U'1 - S1_b)`，`U2 = (S2_a - U'2 - S2_b)`唯一重要的是 和 的相对`S1_b`等级`S2_b`；达到用户定义的转换参数所需的标准转换序列无关紧要。

因此`(A) b`，需要转换序列产生的可能转换序列`B -> A`是：

```
U1: B -> B [identity], B::operator A() [user-defined], A -> A [identity]
U2: B -> B [identity], B::operator A &() [user-defined], A & -> A [rvalue-to-lvalue] 
```

现在，我们如何对标准转换序列进行排名？要看的地方是 13.3.3.1.1 中的表 12，它指定左值到右值的转换与恒等转换具有相同的等级（“精确匹配”）。所以无法区分这两个用户自定义的转换序列，程序是病态的。

* * *

## 侧边栏

13.3.3 和 13.3.3.2 在对用户定义的转换序列进行排序方面有什么区别？

13.3.3 允许编译器区分*不同的用户自定义转换运算符*；13.3.3.2 允许编译器区分*不同的函数*，每个函数都需要在其参数中进行用户定义的转换。

所以，在代码中

```
struct A {
    operator int();
    operator float();
} a;
void f(int);
f(a); 
```

13.3.3 适用并被`A::operator int()`选中`A::operator float()`；在代码中

```
struct A {
    operator int();
} a;
void f(int);
void f(double);
f(a); 
```

13.3.3.2 适用并被`void f(int)`选中`void f(double)`。然而在代码中

```
struct A {
    operator int();
    operator float();
} a;
void f(int);
void f(double);
f(a); 
```

即使 13.3.3`A::operator int() -> void f(int)`一遍`A::operator float() -> void f(int)`又一`float -> double`遍地`int -> double`喜欢，而 13.3.3.2 一遍又一遍地喜欢`int -> int`，`int -> double`也`float -> double`无法`float -> int`区分 the`int -> int`和`float -> double`转换序列（因为它们既不包含相同的用户定义的转换运算符也不包含相同的重载`f`），并且所以代码格式不正确。

# c++ - 如何以非常简单但有效的方式验证 int 类型的输入？在 C++ 中

> ID：11545319
> 
> 赞同：-3
> 
> 时间：2012-07-18T15:49:44.370
> 
> 标签：c++

有一个包含 9 个空格（元素）的数组，其中将存储用户输入的这 9 个数字。

您如何确保他们只输入这 9 个数字并且它们不一样？
最后`cout`（打印）它们从小到大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:38:42.913

这是一个确保 [0,9] 范围内的数字并忽略重复项的解决方案：

```
#include <algorithm> //if using copy printing
#include <iostream> //for cin and cout
#include <iterator> //if using copy printing
#include <set> //for set

CHOOSE A METHOD BELOW AND ADD THE CORRESPONDING INCLUDE

int main() {
    std::set<int> nums; //here's the array

    std::cout << "Please enter nine different numbers." 
                 "Duplicates will be ignored.\n";

    //ADD THE NEXT PART OF THE METHOD, THE DECLARATION

    do {
        std::cout << "Enter the next number: ";

        //ADD THE FINAL PART, GETTING INPUT AND INSERTING IT INTO THE SET
    } while (nums.size() < 9); //do this until you have 9 numbers

    std::cout << "The numbers you entered, in order, are:\n";

    //C++11 printing
    for (const int i : nums)   
        std::cout << i << ' ';

    //C++03 printing using copy
    std::copy (nums.begin(), nums.end(), 
               std::ostream_iterator<int> (std::cout, " "));

    //C++03 printing using an iterator loop
    for (std::set<int>::const_iterator it = nums.cbegin(); //this was to
                                       it != nums.cend();  //eliminate the
                                       ++it)               //scrollbar
        std::cout << *it << ' ';
} 
```

**第一种方法：（**更好的范围更广）

```
#include <limits> //for numeric_limits
...
int temp; //this holds the current entry
...
//works better when you get out of the range 0-9
while (!(std::cin >> temp) || temp < 0 || temp > 9) { 
//body executes if input isn't an int between 0 and 9

    //clear bad input flag
    std::cin.clear(); 

    //discard bad input
    std::cin.ignore (std::numeric_limits<std::streamsize>::max(), '\n'); 

    //prompt for new number (could also add that you're ignoring to beginning)
    std::cout << "Invalid number. Please enter a new one: "; 
}

//insert the valid number, duplicates ignored, automatically sorted
nums.insert (temp); 
```

**第二种方法：（**更适合 0-9 范围）

```
#include <cctype> //for isdigit
...
char temp; //holds current entry
...
//suitable for 0-9 range 
do {
    std::cin >> temp; 
    if (!std::isdigit (temp))
        std::cout << "Invalid number. Please enter a new one: ";
while (!std::isdigit (temp));

nums.insert (temp - '0'); //add the integer value of the character processed 
```

这里的关键是`std::set`，它只允许唯一的条目，并自动对元素进行排序。

# javascript - window.open 在 Phonegap 1.7.0 中不起作用

> ID：11545320
> 
> 赞同：0
> 
> 时间：2012-07-18T15:49:47.450
> 
> 标签：javascript, android, jquery-ui, cordova, phonegap-plugins

我正在移动设备上使用 Phonegap。它的问题和错误太多无法解决。其中之一是：

```
window.open('new_window.html','well','width=300,height=200'); 
```

> （我已经在 assets/www/ 下创建了一个 new_window.html。）

它当然会出现一个全屏窗口。如果我设置滚动条选项为真，它仍然没有用。系统就像一个假人。

我已经搜索了几天的解决方案，尝试使用 iframe/frame 来替换它。但它们不合适或没有用。在我的开发环境中，我只想让用户按下一个按钮，然后弹出一个小窗口。我可以设置磁贴、位置、大小……有什么替代方案或建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:14:54.567

当它不是网络浏览器时，您将其视为网络浏览器。[您可以使用来自https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)的 ChildBrowser 插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:30:53.687

您可以尝试在弹出的实际页面上设置大小，然后再次尝试 window.open()，如果这不起作用，请尝试：

```
window.location.href = "newindow.html"; 
```

如果这也不起作用，您可以尝试使用 jQuery Dailog 框（需要导入在此处找到的 jQuery 库[jQuery](http://jqueryui.com/home)）作为弹出窗口，代码将是这样的：

```
$(document).ready(function()
{
    $('#buttonID').click(function() 
    {
        $help.dialog('open');
        return false;
    });

    var $help = $('<div></div>')
        .html('Your HTML copy goes here!')
        .dialog
        ({
            autoOpen: false,
            height:200,
            width: 300,
            title: 'Window Title'
        });
}); 
```

# sql - PostgreSQL“嵌套”？区别和计数

> ID：11545324
> 
> 赞同：2
> 
> 时间：2012-07-18T15:50:08.597
> 
> 标签：sql, postgresql, count, distinct, postgresql-9.1

### 我需要在 PostgreSQL 9.1 的一个查询中获取每小时不同名称的计数

我的表中的相关列（针对问题进行了概括）是：

```
occurred timestamp with time zone and
name character varying(250) 
```

为了这个问题，表名只是`table`

时间戳都将`occurred`在一天的午夜到午夜（不包括）范围内。到目前为止，我的查询看起来像：

```
'SELECT COUNT(DISTINCT ON (name)) FROM table' 
```

如果我可以将输出格式化为 24 个整数的列表（一天中的每个小时一个），那将是很好的，不需要返回名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:53:27.760

```
SELECT date_trunc('hour', occurred) AS hour_slice
      ,count(DISTINCT name) AS name_ct
FROM   mytable
GROUP  BY 1
ORDER  BY 1; 
```

`DISTINCT ON`是一个不同的功能。

`date_trunc()`为您提供每个不同小时的总和，而`EXTRACT`在较长时间内为您提供每天每小时的总和。这两个结果**不相加**，因为相加的倍数`count(DISTINCT x)`等于或**大于**一`count(DISTINCT x)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:54:17.967

如果我正确理解你想要什么，你可以写：

```
SELECT EXTRACT(HOUR FROM occurred),
       COUNT(DISTINCT name)
  FROM ...
 WHERE ...
 GROUP
    BY EXTRACT(HOUR FROM occurred)
 ORDER
    BY EXTRACT(HOUR FROM occurred)
; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T15:55:41.813

您希望按小时计算：

```
select extract(hour from occurred) as hr, count(distinct name)
from table t
group by extract(hour from occurred)
order by 1 
```

这假设只有一天的数据。否则，将合并不同日期的小时数。为了解决这个问题，您还需要包含日期信息。

# vb.net - VB.NET 方法链中的换行符

> ID：11545326
> 
> 赞同：2
> 
> 时间：2012-07-18T15:50:10.383
> 
> 标签：vb.net

我试图在 VB.NET 中的以下方法链中放置换行符，但我的语法不正确：

```
HasRequired(Function(x) x.Issue).WithMany(Function(x) x.EntityNotes).HasForeignKey(Function(x) x.IssueID) 
```

我想要类似的东西：

```
HasRequired(Function(x) x.Issue)
   .WithMany(Function(x) x.EntityNotes)
   .HasForeignKey(Function(x) x.IssueID) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:51:26.500

在 VB.Net 中，您过去总是需要`_`继续一行。这现在通常是可选的，但总是可以添加：

```
HasRequired(Function(x) x.Issue) _
   .WithMany(Function(x) x.EntityNotes) _
   .HasForeignKey(Function(x) x.IssueID) 
```

但是，从 Visual Studio 2010 开始，您可以在许多情况下将其关闭，编译器将正确确定新“行”是否是前一行的一部分。

这在语言文档中的[印刷和代码约定中有所介绍。](http://msdn.microsoft.com/en-us/library/1s46s4ew)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:53:38.253

例如，与 C# 不同，换行符在 VB 中分隔代码。因此，如果您想跨行继续语句，则需要使用`_`下划线符号，如下所示

```
HasRequired(Function(x) x.Issue) _
    .WithMany(Function(x) x.EntityNotes) _
    .HasForeignKey(Function(x) x.IssueID) 
```

# bash - 这里正在做什么 [ "${-#*i}" != "$-" ]

> ID：11545327
> 
> 赞同：4
> 
> 时间：2012-07-18T15:50:13.660
> 
> 标签：bash

在 RHEL6 /etc/profile 的末尾有一个 if 语句：

```
if [ "${-#*i}" != "$-" ]; 
```

`!=`我猜是字符串比较运算符的“不等于” 。我猜左边是变量中的字符串`-@*i`，右边是里面的字符串`$-`（我认为这是传递给脚本的标志）。这是在 for 循环的中间， $i 应该存在，但我不知道`-#*i`可能是什么。

假设我是正确的，`$-`是传递给脚本的标志，我认为`${-#*i}`也必须是标志，但我真的不知道。

有人可以解释一下。与这些特殊变量列表的链接也将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:56:33.447

在 bash 手册页中查找“${parameter#word}”。# 在左边的表达式中删除了模式“*i”，即“从开始到'i'”的$-内容。$- 包含当前 shell 的标志（请参阅 参考资料`set`）。

kjp 是正确的，它检查 shell 是否以交互模式运行（通过从字符串中删除可能的“i”标志进行比较）。Bash 的手册页说：

*交互式 shell 是在没有非选项参数且没有 -c 选项的情况下启动的，其标准输入和错误都连接到终端（由 isatty(3) 确定），或者以 -i 选项启动。PS1 已设置并且 $- 包括 i 如果 bash 是交互式的，则允许 shell 脚本或启动文件测试此状态。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T16:02:05.517

它正在检查当前 shell 是否是交互式 shell。

`-i`变量中的存在`$-`（包含传递给 shell 的标志列表）是[检查交互式与非交互式 shell 的一种方法](http://tldp.org/LDP/abs/html/intandnonint.html#IITEST)。有关内部 shell 变量的列表，请参见[此处](http://tldp.org/LDP/abs/html/internalvariables.html)，包括`$-`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T15:57:18.893

我不知道`$-`变量是什么，但上面的代码基本上是测试是否`$-`包含一个`i`.

在 bash`${var#pattern}`中意味着删除`$var`了最小的匹配项。`pattern`如果`pattern`未找到，则`$var`原样返回。

所以在你的例子中，如果`$-`是`fish`。那么`${-#*i}`将是`sh`. 所以 if 语句是真的（因为`sh`!= `fish`）。

给你的链接：

bash 中的变量扩展：[http ://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)

Bash 定义的变量：[http ://www.gnu.org/software/bash/manual/bashref.html#Shell-Variables](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Variables)

# hadoop - 将集群数据从 HDFS 移动到 Hive

> ID：11545332
> 
> 赞同：0
> 
> 时间：2012-07-18T15:50:27.070
> 
> 标签：hadoop, hive, hdfs, mahout, k-means

我一直在 Cloudera 演示 VM 中试验 Mahout，并使用 k-Means 成功地对示例合成控制数据 (https://cwiki.apache.org/MAHOUT/clustering-of-synthetic-control-data.html) 进行聚类算法。我使用过 ClusterDumper 并且可以查看 Mahout 输出，但现在我想将输出放入 Hive 表中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:14:31.070

没有直接的整合。最好的办法是修改 ClusterDumper 以生成某种可以作为表格数据导入 Hive 的文本表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:05:22.163

在 Hive 中创建一个外部表，它应该指向 Mahout o/p 路径。

# c# - 线程时的异常 - 线程之间的传播？

> ID：11545340
> 
> 赞同：4
> 
> 时间：2012-07-18T15:50:51.927
> 
> 标签：c#, .net, multithreading, exception, .net-3.5

**如果我有以下情况：**

1.  Execute() 创建一个新线程并在其中执行函数 GetSession()。
2.  Execute() 在它自己的线程中再次执行 GetSession()。
3.  Execute() 从 (1) 加入线程。

* * *

**我的问题是：**

如果 GetSession() 从 (1) 中生成的线程抛出异常，而 Execute() 正在运行的线程当前正在运行 GetSession() 本身，会发生什么？

从额外线程重新抛出的异常是否会传播到 Execute() 并导致它转到其处理程序*，即使它来自不同的线程？*

* * *

**这是一些示例代码来演示该问题：**

我只是在这里的窗口中制作了这个（它是一个模型），所以请原谅语法错误。

```
public void Execute()
{
    //Some logon data for two servers.
    string server1 = "x", server2 = "y", logon = "logon", password = "password";

    //Varialbes to store sessions in.
    MySession session1, session2;

    try
    {
        //Start first session request in new thread.
        Thread thread = new Thread(() =>
            session1 = GetSession(server1, logon, password));
        thread.Start();

        //Start second request in current thread, wait for first to complete.
        session2 = GetSession(server2, logon, password));
        thread.Join();
    }
    catch(Exception ex)
    {
        //Will this get hit if thread1 throws an exception?
        MessageBox.Show(ex.ToString());
        return;
    }
}

private MySession GetSession(string server, string logon, string password)
{
    try
    {
        return new MySession(server, logon, password);
    }
    catch(Exception Ex)
    {
        throw(Ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:55:35.623

> 如果 GetSession() 从 (1) 中产生的线程抛出异常，而 Execute() 正在运行的线程当前正在运行 GetSession() 本身，会发生什么？

线程版本将引发未处理的异常，这将触发[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)。除非在此处明确处理，否则它将关闭应用程序。

> 从额外线程重新抛出的异常是否会传播到 Execute() 并导致它转到其处理程序，即使它来自不同的线程？

不，它不会被处理。

* * *

请注意，这是 TPL 的优势之一。如果您使用任务而不是线程，*则可以*将异常传播回主线程​​：

```
try
{
    //Start first session request in new thread.
    Task<Session> task = Task.Factory.StartNew(() => GetSession(server1, logon, password));

    //Start second request in current thread, wait for first to complete.
    session2 = GetSession(server2, logon, password));
    session1 = task.Result; // This blocks, and will raise an exception here, on this thread
}
catch(Exception ex)
{
    // Now this will get hit
    MessageBox.Show(ex.ToString());
    return;
} 
```

但是请注意，这将是一个`AggregateException`, 并且[需要特殊处理](http://msdn.microsoft.com/en-us/library/dd537614)。

# objective-c - 包含 Zxing 到 Xcode 4.3 + Obj-C 的未定义符号

> ID：11545341
> 
> 赞同：2
> 
> 时间：2012-07-18T15:50:53.837
> 
> 标签：objective-c, ios, xcode4.3, zxing

在将 ZXingWidget 包含到我以前的 iOS 项目中时，我遇到了一些问题。

这是我之前使用 XCode4.3+ARC for iOS 开始的一个项目。对于这个项目，我需要包括 ZXing 来扫描。

我遵循了提供的 README。

1.  将 zxing 复制到项目根目录，添加 ZXingWidget.xcodeproj 项目
2.  在构建阶段添加链接 libZXingWidget.a
3.  将 ZXingWidget 添加到目标依赖项
4.  标头搜索路径 - 递归 $(SRCROOT)/zxing-read-only/iphone/ZXingWidget/Classes
5.  标头搜索路径 - 非递归 $(SRCROOT)/zxing-read-only/cpp/core/src
6.  导入所有需要的 iOS 框架。

注意事项：

*   ZXing在iphone模拟器上编译运行正常
*   我收到关于未定义符号的大约 66 个错误。（下面的例子）
*   Zxing 代码是从 SVN 获得的（我也试过 zip 下载，一样但是 64 错误）

但是我无法直接从我的代码中导入任何文件（#import 不起作用）。

我也没有运气尝试过这个[解决方案。](https://stackoverflow.com/questions/8893983/xcode4-zxing-undefined-symbols-for-architecture-i386?rq=1)

我还缺少其他任何可能性吗？

任何帮助表示赞赏！

我现在得到一些错误输出。

```
Undefined symbols for architecture i386:
"std::ios_base::Init::Init()", referenced from:
  ___cxx_global_var_init in libZXingWidget.a(Binarizer.o)
  ___cxx_global_var_init in libZXingWidget.a(BinaryBitmap.o)
  ___cxx_global_var_init in libZXingWidget.a(Array.o)
  ___cxx_global_var_init in libZXingWidget.a(BitArray.o)
  ___cxx_global_var_init in libZXingWidget.a(BitMatrix.o)
  ___cxx_global_var_init in libZXingWidget.a(BitSource.o)
  ___cxx_global_var_init in libZXingWidget.a(Counted.o)
  ...
"std::terminate()", referenced from:
  zxing::Binarizer::Binarizer(zxing::Ref<zxing::LuminanceSource>) in libZXingWidget.a(Binarizer.o)
  zxing::Binarizer::~Binarizer() in libZXingWidget.a(Binarizer.o)
  zxing::BinaryBitmap::BinaryBitmap(zxing::Ref<zxing::Binarizer>) in libZXingWidget.a(BinaryBitmap.o)
  zxing::BinaryBitmap::~BinaryBitmap() in libZXingWidget.a(BinaryBitmap.o)
  zxing::BinaryBitmap::getBlackRow(int, zxing::Ref<zxing::BitArray>) in libZXingWidget.a(BinaryBitmap.o)
  zxing::BinaryBitmap::getWidth() const in libZXingWidget.a(BinaryBitmap.o)
  zxing::BinaryBitmap::getHeight() const in libZXingWidget.a(BinaryBitmap.o)
  ...
"operator delete(void*)", referenced from:
  zxing::Binarizer::~Binarizer() in libZXingWidget.a(Binarizer.o)
  zxing::Counted::~Counted() in libZXingWidget.a(Binarizer.o)
  zxing::BinaryBitmap::~BinaryBitmap() in libZXingWidget.a(BinaryBitmap.o)
  zxing::BinaryBitmap::crop(int, int, int, int) in libZXingWidget.a(BinaryBitmap.o)
  zxing::BinaryBitmap::rotateCounterClockwise() in libZXingWidget.a(BinaryBitmap.o)
  zxing::Counted::~Counted() in libZXingWidget.a(BinaryBitmap.o)
  zxing::BitArray::~BitArray() in libZXingWidget.a(BitArray.o)
  ...
"___cxa_allocate_exception", referenced from:
  zxing::Counted::release() in libZXingWidget.a(Binarizer.o)
  zxing::Counted::release() in libZXingWidget.a(BinaryBitmap.o)
  zxing::BitArray::setRange(int, int) in libZXingWidget.a(BitArray.o)
  zxing::BitArray::isRange(unsigned long, unsigned long, bool) in libZXingWidget.a(BitArray.o)
  zxing::BitMatrix::setRegion(unsigned long, unsigned long, unsigned long, unsigned long) in libZXingWidget.a(BitMatrix.o)
  zxing::Counted::release() in libZXingWidget.a(BitMatrix.o)
  zxing::BitSource::readBits(int) in libZXingWidget.a(BitSource.o)
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:59:23.400

You need to rename `main.m` to `main.mm`. That will tell Xcode to link with the necessary C++ libraries, which is what are missing.

# c# - NugGet 包安装类文件而不是程序集

> ID：11545343
> 
> 赞同：1
> 
> 时间：2012-07-18T15:50:58.387
> 
> 标签：c#, .net, nuget

我安装了一个 NuGet 包，它没有添加程序集和引用，而是将一个未编译的类文件放在包目录中。

使用类的正确方法是什么，以便它仍然可以由 NuGet 管理以进行更新等？

参考结构：

```
SolutionDir
    |
     -Packages (nuget)
         |
          - ContentDir (cs file here)
    |
     -ProjetDir (the project that needs it)
    |
     -OtherProjectDir 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:29:37.723

如果类是包的一部分，只要类没有被修改，它就会在包更新期间被更新。如果它已被修改，它将保持原样。NuGet 将在更新期间输出警告说明。

我会比较这两个文件，可能使用 NuGet 包资源管理器，看看是否缺少任何功能。我相信目前必须手动完成。

# c# - 如何将带有 ORMlite 的 byte[] 数组插入图像列

> ID：11545344
> 
> 赞同：-14
> 
> 时间：2012-07-18T15:50:58.837
> 
> 标签：c#, sql-server, servicestack, ormlite-servicestack

我的网络服务的一个子任务是在数据库中保存一个文件（连同一些元数据）。
Web 服务基于[ServiceStack](http://servicestack.net)及其版本的[ORMlite](http://www.servicestack.net/docs/ormlite/ormlite-overview)。

所以我创建了一个代表数据库中附件的小类：

```
public class Attachment {
    public string Description { get; set; }
    public string FileName { get; set; }
    public string Type { get; set; }
    public byte[] Data { get; set; }
} 
```

这是实际的文件

```
MemoryStream ms = new MemoryStream(webclient.DownloadData(...));
byte[] data = new byte[...];
ms.Read(data, 0, data.Length);

Attachment file = new Attachment() {
    /* all the other stuff */
    Data = data
}; 
```

直到现在都没有问题...... :)

现在我已经有了将这个文件放入数据库所需的一切。所以让我们开始吧...

```
dbCmd.Insert<Attachment>(file); 
```

还有问题...

```
SqlException: "Operand type clash: text is incompatible with image" 
```

ORMlite 将字节数组转换为 base64 编码的字符串

```
/* stripped-down example of the command string */
INSERT INTO Attachment (Data) VALUES ('CgoKCgoKCjxodG1sPgo8a...AAAA==') 
```

我已经搜索了一整天，但没有找到改变 ORMlite 处理`byte[]`数组方式的解决方案。没有`DatabaseField`我可以用来设置的属性，`dataType`因为`BYTE_ARRAY`这在 Java 中是可能的。

```
@DatabaseField(dataType = DataType.BYTE_ARRAY)
byte[] imageBytes; 
```

我错过了什么重要的东西吗？
是否有另一种方法可以将文件放入数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T16:03:07.880

因此，我认为您[对 ServiceStack 内部的](http://github.com/ServiceStack/ServiceStack.OrmLite)[ORMLite](http://ormlite.com/)和Java ORM 库的 ORMLite 感到困惑——它们既不相关也没有必要兼容。

您可能要问的是如何读取由 Java ORMLite 使用 C# ORMLite 编写的数据。我完全没有 C# 方面的经验，但我可以在这里谈谈 ORMLite 正在做什么：

```
@DatabaseField(dataType = DataType.BYTE_ARRAY)
byte[] imageBytes; 
```

在 SqlServer 中，这应该对应于字段：

```
"bytes" IMAGE 
```

传递给 JDBC 的 SQL 插入命令是：

```
 INSERT INTO "bytearray" ("bytes" ) VALUES (?)
 insert arguments: [[B@34883357] (byte[]) 
```

它使用 .`byte[]`从结果中检索`results.getBytes(columnPos)`.

你提到：

> ORMlite 将字节数组转换为 base64 编码的字符串

这是 JDBC 这样做的。我很惊讶它确实如此，但我想这是可能的。

希望这里有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T21:55:38.013

在 ServiceStack.OrmLite v4 中，正如 mythz 在评论中所指定的那样，一切都应该按原样工作。

* * *

在 v3 中，如果您希望将字节数组序列化为二进制而不是 base 64 字符串，您应该继承`SqliteOrmLiteDialectProvider`并覆盖负责将 CLR 值从 SQL 值转换为 SQL 值的函数以处理字节数组。

```
public class ByteArrayAwareSqliteOrmLiteDialectProvider
    : SqliteOrmLiteDialectProvider {

    public override object ConvertDbValue(object value, Type type) {
        var bytes = value as byte[];
        if (bytes != null && type == typeof(byte[]))
            return bytes;

        return base.ConvertDbValue(value, type);
    }

    public override string GetQuotedValue(object value, Type fieldType) {
        var bytes = value as byte[];
        if (bytes != null && fieldType == typeof(byte[]))
            return "X'" + BitConverter.ToString(data).Replace("-", "") + "'";

        return base.GetQuotedValue(value, fieldType);
    }

} 
```

然后，正确配置您的方言提供程序：

```
OrmLiteConfig.DialectProvider = new ByteArrayAwareSqliteOrmLiteDialectProvider(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T22:05:50.357

对于 Oracle 提供者，我分叉了 3.9.71 版的 Oracle 提供者，因为我需要使用 ODP.NET 库 (Oracle.DataAcess)，因为我的项目正在进行一些 UDT 工作，并且需要 OracleParameter 对象上的 UDTType 对象。此外，我正在将压缩的专有“类似 xml”的字符串作为字节数组插入 BLOB 列。

在我的项目中，我使用了

```
public class OracleOrmLiteDialectProvider : OrmLiteDialectProviderBase<OracleOrmLiteDialectProvider>
... 
    public override string GetQuotedValue(object value, Type fieldType)
    {
... 
        if (fieldType == typeof(byte[]))
        {
            var bytes = value as byte[];
            return "to_blob (utl_raw.cast_to_raw('" + Encoding.UTF8.GetString(bytes)+ "'))";
        }
...
} 
```

更好的解决方案当然是为明年的预算制定计划并升级到 4.0。

# command-line - 可以从命令行构建 Eclipse 项目吗？

> ID：11545345
> 
> 赞同：3
> 
> 时间：2012-07-18T15:51:01.973
> 
> 标签：command-line, eclipse-cdt

我想知道从命令行构建 Eclipse CDT 项目的问题是否已经解决。我无法使用此功能。

我正在使用 Eclipse Indigo CDT。

我有 Eclipse 的三个单独的命令行调用。两个命令将两个项目导入工作区。导入命令没有错误。

第三个命令执行构建。第一个项目构建。第二个项目在构建期间失败。第一个项目本质上是一个 makefile 构建，构建指令不是由 Eclipse 生成的。第二个项目的构建指令由 Eclipse 生成。

我正在一个空目录中执行命令。.metadata 目录已创建。

我已经消除了构建步骤并手动打开了工作区。项目在 IDE 中构建。

我正在使用 2009 年此链接中描述的命令行格式。从命令行 [构建几个 CDT C++ 项目](https://stackoverflow.com/questions/344797/build-several-cdt-c-projects-from-commandline)

此处描述了此 Eclipse 错误。但是阅读对话似乎表明问题没有解决。最后一个条目是 2010 年 5 月。 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=186847](https://bugs.eclipse.org/bugs/show_bug.cgi?id=186847)

以下是来自 Eclipse .metadata/.log 的错误消息

```
!ENTRY org.eclipse.core.resources 2 10035 2012-07-18 11:28:05.705
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes.

!ENTRY org.eclipse.osgi 4 0 2012-07-18 11:28:09.626
!MESSAGE An error occurred while automatically activating bundle org.eclipse.debug.ui (98).
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.debug.internal.ui.DebugUIPlugin.start() of bundle org.eclipse.debug.ui.
....

!ENTRY org.eclipse.cdt.core 4 0 2012-07-18 11:28:09.641
!MESSAGE Error: org/eclipse/cdt/debug/ui/ICDebuggerPage
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/cdt/debug/ui/ICDebuggerPage
....

!ENTRY org.eclipse.core.jobs 4 2 2012-07-18 11:28:09.641
!MESSAGE An internal error occurred during: "C/C++ Indexer".
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/cdt/debug/ui/ICDebuggerPage
....

!SESSION 2012-07-18 11:28:10.688 -----------------------------------------------
eclipse.buildId=M20120208-0800
java.version=1.6.0_31
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.cpp.product -application org.eclipse.cdt.managedbuilder.core.headlessbuild -build all
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.cpp.product -application org.eclipse.cdt.managedbuilder.core.headlessbuild -data . -build all

!ENTRY org.eclipse.core.resources 2 10035 2012-07-18 11:28:11.594
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes.

!ENTRY org.eclipse.osgi 4 0 2012-07-18 11:28:21.778
!MESSAGE An error occurred while automatically activating bundle org.eclipse.debug.ui (98).
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.debug.internal.ui.DebugUIPlugin.start() of bundle org.eclipse.debug.ui.
....

!ENTRY org.eclipse.core.resources 4 2 2012-07-18 11:28:21.778
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.core.resources".
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/cdt/debug/ui/ICDebuggerPage
....

!ENTRY org.eclipse.osgi 4 0 2012-07-18 11:28:22.231
!MESSAGE An error occurred while automatically activating bundle org.eclipse.cdt.debug.ui (48).
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.cdt.debug.ui.CDebugUIPlugin.start() of bundle org.eclipse.cdt.debug.ui.
....

!ENTRY org.eclipse.core.resources 4 2 2012-07-18 11:28:22.231
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.core.resources".
!STACK 0
java.lang.NoClassDefFoundError: org/eclipse/cdt/debug/ui/ICDebuggerPage
.... 
```

这是最后一个错误的详细信息。一些细节已被删除以适应 stackoverflow 字符限制。

```
!ENTRY org.eclipse.osgi 4 0 2012-07-18 11:28:24.137
!MESSAGE Application error
!STACK 1
org.eclipse.core.internal.resources.ResourceException: Errors occurred during the build.
    at org.eclipse.core.internal.resources.Workspace.buildInternal(Workspace.java:525)
    at org.eclipse.core.internal.resources.Workspace.build(Workspace.java:422)
    at org.eclipse.cdt.managedbuilder.internal.core.HeadlessBuilder.start(HeadlessBuilder.java:492)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Contains: Errors running builder 'CDT Builder' on project 'src'.
java.lang.NoClassDefFoundError: org/eclipse/cdt/debug/ui/ICDebuggerPage
    at com.ecoscentric.cdt.builder.MacroSupplier$ecComputedMacro.getEcosInstallDir(MacroSupplier.java:95)
    at com.ecoscentric.cdt.builder.MacroSupplier$ecosInstallDirMacro.getStringValue(MacroSupplier.java:123)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:355)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:286)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:274)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.getResolvedMacro(SupplierBasedCdtVariableSubstitutor.java:259)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveToString(SupplierBasedCdtVariableSubstitutor.java:222)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveToString(SupplierBasedCdtVariableSubstitutor.java:240)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.isAbsolute(PathInfo.java:95)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.checkIsAbsolute(PathInfo.java:63)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.isAbsolute(PathInfo.java:47)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.fromBuildToProj(BuildEntryStorage.java:308)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.createUserEntry(BuildEntryStorage.java:420)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.getUserEntries(BuildEntryStorage.java:255)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.putEntriesToLevel(BuildEntryStorage.java:179)
    at org.eclipse.cdt.core.settings.model.util.AbstractEntryStorage.initCache(AbstractEntryStorage.java:71)
    at org.eclipse.cdt.core.settings.model.util.AbstractEntryStorage.getEntries(AbstractEntryStorage.java:34)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildLanguageData.getEntries(BuildLanguageData.java:161)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.getEntriesToCopy(CDefaultLanguageData.java:98)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.createStore(CDefaultLanguageData.java:89)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.copySettingsFrom(CDefaultLanguageData.java:82)
    at org.eclipse.cdt.internal.core.settings.model.CLanguageSettingCache.copySettingsFrom(CLanguageSettingCache.java:48)
    at org.eclipse.cdt.internal.core.settings.model.CLanguageSettingCache.<init>(CLanguageSettingCache.java:37)
    at org.eclipse.cdt.internal.core.settings.model.CFolderDescriptionCache.copyLanguageData(CFolderDescriptionCache.java:72)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultFolderData.copyDataFrom(CDefaultFolderData.java:56)
    at org.eclipse.cdt.internal.core.settings.model.CFolderDescriptionCache.<init>(CFolderDescriptionCache.java:38)
    at org.eclipse.cdt.internal.core.settings.model.CConfigurationDescriptionCache.copyFolderData(CConfigurationDescriptionCache.java:193)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultConfigurationData.copySettingsFrom(CDefaultConfigurationData.java:113)
    at org.eclipse.cdt.internal.core.settings.model.CConfigurationDescriptionCache.loadData(CConfigurationDescriptionCache.java:99)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescription.loadDatas(CProjectDescription.java:196)
    at org.eclipse.cdt.internal.core.settings.model.xml.XmlProjectDescriptionStorage.loadProjectDescription(XmlProjectDescriptionStorage.java:486)
    at org.eclipse.cdt.internal.core.settings.model.xml.XmlProjectDescriptionStorage.getProjectDescription(XmlProjectDescriptionStorage.java:231)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescriptionInternal(CProjectDescriptionManager.java:416)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:398)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:393)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:386)
    at org.eclipse.cdt.core.model.CoreModel.getProjectDescription(CoreModel.java:1423)
    .....
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.debug.ui (98).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 63 more
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.debug.internal.ui.DebugUIPlugin.start() of bundle org.eclipse.debug.ui.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 72 more
Caused by: java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92)
    at org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.startup(LaunchingResourceManager.java:546)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.getLaunchingResourceManager(DebugUIPlugin.java:315)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.start(DebugUIPlugin.java:516)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 78 more
Contains: Errors running builder 'Scanner Configuration Builder' on project 'src'.
java.lang.NoClassDefFoundError: org/eclipse/cdt/debug/ui/ICDebuggerPage
    at com.ecoscentric.cdt.builder.MacroSupplier$ecComputedMacro.getEcosInstallDir(MacroSupplier.java:95)
    at com.ecoscentric.cdt.builder.MacroSupplier$ecosInstallDirMacro.getStringValue(MacroSupplier.java:123)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:355)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:286)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:274)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.getResolvedMacro(SupplierBasedCdtVariableSubstitutor.java:259)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveToString(SupplierBasedCdtVariableSubstitutor.java:222)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveToString(SupplierBasedCdtVariableSubstitutor.java:240)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.isAbsolute(PathInfo.java:95)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.checkIsAbsolute(PathInfo.java:63)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.isAbsolute(PathInfo.java:47)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.fromBuildToProj(BuildEntryStorage.java:308)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.createUserEntry(BuildEntryStorage.java:420)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.getUserEntries(BuildEntryStorage.java:255)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.putEntriesToLevel(BuildEntryStorage.java:179)
    at org.eclipse.cdt.core.settings.model.util.AbstractEntryStorage.initCache(AbstractEntryStorage.java:71)
    at org.eclipse.cdt.core.settings.model.util.AbstractEntryStorage.getEntries(AbstractEntryStorage.java:34)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildLanguageData.getEntries(BuildLanguageData.java:161)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.getEntriesToCopy(CDefaultLanguageData.java:98)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.createStore(CDefaultLanguageData.java:89)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.copySettingsFrom(CDefaultLanguageData.java:82)
    at org.eclipse.cdt.internal.core.settings.model.CLanguageSettingCache.copySettingsFrom(CLanguageSettingCache.java:48)
    at org.eclipse.cdt.internal.core.settings.model.CLanguageSettingCache.<init>(CLanguageSettingCache.java:37)
    at org.eclipse.cdt.internal.core.settings.model.CFolderDescriptionCache.copyLanguageData(CFolderDescriptionCache.java:72)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultFolderData.copyDataFrom(CDefaultFolderData.java:56)
    at org.eclipse.cdt.internal.core.settings.model.CFolderDescriptionCache.<init>(CFolderDescriptionCache.java:38)
    at org.eclipse.cdt.internal.core.settings.model.CConfigurationDescriptionCache.copyFolderData(CConfigurationDescriptionCache.java:193)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultConfigurationData.copySettingsFrom(CDefaultConfigurationData.java:113)
    at org.eclipse.cdt.internal.core.settings.model.CConfigurationDescriptionCache.loadData(CConfigurationDescriptionCache.java:99)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescription.loadDatas(CProjectDescription.java:196)
    at org.eclipse.cdt.internal.core.settings.model.xml.XmlProjectDescriptionStorage.loadProjectDescription(XmlProjectDescriptionStorage.java:486)
    at org.eclipse.cdt.internal.core.settings.model.xml.XmlProjectDescriptionStorage.getProjectDescription(XmlProjectDescriptionStorage.java:231)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescriptionInternal(CProjectDescriptionManager.java:416)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:398)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:393)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:386)
    at org.eclipse.cdt.internal.core.CConfigBasedDescriptorManager.findDescriptor(CConfigBasedDescriptorManager.java:340)
    at org.eclipse.cdt.internal.core.CConfigBasedDescriptorManager.getDescriptor(CConfigBasedDescriptorManager.java:237)
    at org.eclipse.cdt.core.CCorePlugin.getCProjectDescription(CCorePlugin.java:738)
    at org.eclipse.cdt.make.internal.core.scannerconfig2.ScannerConfigInfoFactory2$ScannerConfigInfoSet.load(ScannerConfigInfoFactory2.java:100)
    at org.eclipse.cdt.make.internal.core.scannerconfig2.ScannerConfigInfoFactory2$ScannerConfigInfoSet.<init>(ScannerConfigInfoFactory2.java:94)
    at org.eclipse.cdt.make.internal.core.scannerconfig2.ScannerConfigInfoFactory2.createInfoSet(ScannerConfigInfoFactory2.java:1332)
    at org.eclipse.cdt.make.internal.core.scannerconfig2.ScannerConfigProfileManager.createScannerConfigBuildInfo2Set(ScannerConfigProfileManager.java:214)
    at org.eclipse.cdt.build.internal.core.scannerconfig2.CfgScannerConfigInfoFactory2$CfgInfo.getContainer(CfgScannerConfigInfoFactory2.java:108)
    at org.eclipse.cdt.build.internal.core.scannerconfig2.CfgScannerConfigInfoFactory2$CfgInfo.createMap(CfgScannerConfigInfoFactory2.java:133)
    at org.eclipse.cdt.build.internal.core.scannerconfig2.CfgScannerConfigInfoFactory2$CfgInfo.getInfoMap(CfgScannerConfigInfoFactory2.java:272)
    at org.eclipse.cdt.build.core.scannerconfig.ScannerConfigBuilder.build(ScannerConfigBuilder.java:144)
    at org.eclipse.cdt.build.core.scannerconfig.ScannerConfigBuilder.build(ScannerConfigBuilder.java:119)
    .....
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.cdt.debug.ui (48).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 72 more
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.cdt.debug.ui.CDebugUIPlugin.start() of bundle org.eclipse.cdt.debug.ui.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 81 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/debug/ui/ISourcePresentation
    at org.eclipse.cdt.debug.ui.CDebugUIPlugin.start(CDebugUIPlugin.java:292)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 87 more
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.debug.ui (98).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.ecoscentric.cdt.builder.MacroSupplier$ecComputedMacro.getEcosInstallDir(MacroSupplier.java:95)
    at com.ecoscentric.cdt.builder.MacroSupplier$ecosInstallDirMacro.getStringValue(MacroSupplier.java:123)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:355)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:286)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveMacro(SupplierBasedCdtVariableSubstitutor.java:274)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.getResolvedMacro(SupplierBasedCdtVariableSubstitutor.java:259)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveToString(SupplierBasedCdtVariableSubstitutor.java:222)
    at org.eclipse.cdt.utils.cdtvariables.SupplierBasedCdtVariableSubstitutor.resolveToString(SupplierBasedCdtVariableSubstitutor.java:240)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.isAbsolute(PathInfo.java:95)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.checkIsAbsolute(PathInfo.java:63)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.PathInfo.isAbsolute(PathInfo.java:47)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.fromBuildToProj(BuildEntryStorage.java:308)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.createUserEntry(BuildEntryStorage.java:420)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.getUserEntries(BuildEntryStorage.java:255)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildEntryStorage.putEntriesToLevel(BuildEntryStorage.java:179)
    at org.eclipse.cdt.core.settings.model.util.AbstractEntryStorage.initCache(AbstractEntryStorage.java:71)
    at org.eclipse.cdt.core.settings.model.util.AbstractEntryStorage.getEntries(AbstractEntryStorage.java:34)
    at org.eclipse.cdt.managedbuilder.internal.dataprovider.BuildLanguageData.getEntries(BuildLanguageData.java:161)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.getEntriesToCopy(CDefaultLanguageData.java:98)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.createStore(CDefaultLanguageData.java:89)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultLanguageData.copySettingsFrom(CDefaultLanguageData.java:82)
    at org.eclipse.cdt.internal.core.settings.model.CLanguageSettingCache.copySettingsFrom(CLanguageSettingCache.java:48)
    at org.eclipse.cdt.internal.core.settings.model.CLanguageSettingCache.<init>(CLanguageSettingCache.java:37)
    at org.eclipse.cdt.internal.core.settings.model.CFolderDescriptionCache.copyLanguageData(CFolderDescriptionCache.java:72)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultFolderData.copyDataFrom(CDefaultFolderData.java:56)
    at org.eclipse.cdt.internal.core.settings.model.CFolderDescriptionCache.<init>(CFolderDescriptionCache.java:38)
    at org.eclipse.cdt.internal.core.settings.model.CConfigurationDescriptionCache.copyFolderData(CConfigurationDescriptionCache.java:193)
    at org.eclipse.cdt.core.settings.model.extension.impl.CDefaultConfigurationData.copySettingsFrom(CDefaultConfigurationData.java:113)
    at org.eclipse.cdt.internal.core.settings.model.CConfigurationDescriptionCache.loadData(CConfigurationDescriptionCache.java:99)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescription.loadDatas(CProjectDescription.java:196)
    at org.eclipse.cdt.internal.core.settings.model.xml.XmlProjectDescriptionStorage.loadProjectDescription(XmlProjectDescriptionStorage.java:486)
    at org.eclipse.cdt.internal.core.settings.model.xml.XmlProjectDescriptionStorage.getProjectDescription(XmlProjectDescriptionStorage.java:231)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescriptionInternal(CProjectDescriptionManager.java:416)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:398)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:393)
    at org.eclipse.cdt.internal.core.settings.model.CProjectDescriptionManager.getProjectDescription(CProjectDescriptionManager.java:386)
    at org.eclipse.cdt.core.model.CoreModel.getProjectDescription(CoreModel.java:1423)
    at org.eclipse.cdt.managedbuilder.internal.core.CommonBuilder.isCdtProjectCreated(CommonBuilder.java:397)
    at org.eclipse.cdt.managedbuilder.internal.core.CommonBuilder.build(CommonBuilder.java:431)
    ... 24 more
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.debug.internal.ui.DebugUIPlugin.start() of bundle org.eclipse.debug.ui.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 72 more
Caused by: java.lang.IllegalStateException: Workbench has not been created yet.
    at org.eclipse.ui.PlatformUI.getWorkbench(PlatformUI.java:92)
    at org.eclipse.debug.internal.ui.contextlaunching.LaunchingResourceManager.startup(LaunchingResourceManager.java:546)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.getLaunchingResourceManager(DebugUIPlugin.java:315)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.start(DebugUIPlugin.java:516)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 78 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:19:49.427

我面临与生态配置项目完全相同的问题，即使用生态工具链进行交叉编译的项目。对于一个实验，我选择了 Cross GCC 工具链，并在一个 hello world 项目上手动应用了所有项目设置，并且它从命令行构建得很好。当项目由生态工具链自动配置时，似乎有问题。

谢谢，苏希尔

# apache - 将变量重写到文件夹

> ID：11545358
> 
> 赞同：-2
> 
> 时间：2012-07-18T15:51:38.727
> 
> 标签：apache, .htaccess

我需要用 .htaccess 重写一个 URL。

```
(Actual url) Before: yyy.com/folder/index.php?lang=en
(Their url)  After:  yyy.com/folder/en/index.php

Before: yyy.com/folder/submit.php?lang=da
After:  yyy.com/folder/da/submit.php 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:47:04.487

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^/?folder/([a-z]{2})/index\.php$ /folder/index.php?lang=$1 [L,QSA] 
```

# objective-c - 将 AVAudioRecorder 与 MPEG4AAC 一起使用时出现奇怪的错误

> ID：11545363
> 
> 赞同：1
> 
> 时间：2012-07-18T15:51:47.403
> 
> 标签：objective-c, ios, avaudioplayer, avaudiorecorder

我已经在两台不同的 iPad3 上对此进行了测试，其中一台我可以录制和播放 .m4a 和 .caf 文件，另一台我只能播放 .caf 文件。

我所做的是使用设置记录一个 .m4a 文件

```
AVFormatIDKey set to kAudioFormatMPEG4AAC 
```

在一台 iPad 上运行良好。如果我在另一台 iPad 上测试它，当我尝试播放录制的文件时会收到错误“OSStatus 错误 1685348671”。

但是，如果我注释掉该设置并记录为 .caf 文件，它可以完美运行。

这里是相关的代码片段：

```
NSDictionary *recorderSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                      //[NSNumber numberWithInt:kAudioFormatMPEG4AAC], AVFormatIDKey,
                                      [NSNumber numberWithInt:AVAudioQualityMin], AVEncoderAudioQualityKey,
                                      [NSNumber numberWithInt:16], AVEncoderBitRateKey,
                                      [NSNumber numberWithInt:1], AVNumberOfChannelsKey,
                                      [NSNumber numberWithFloat:16000.0], AVSampleRateKey, nil]; 
```

然后我去打电话给一个简单的

```
AudioRecorder *audioRecorder = [[AVAudioRecorder alloc] initWithURL:soundFileURL settings:recorderSettings error:&error]; 
```

回放我打电话

```
AudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:&error];
[audioPlayer play]; 
```

谢谢

# java - Android XML 问题 - 图像未在 AVD 中显示

> ID：11545366
> 
> 赞同：0
> 
> 时间：2012-07-18T15:51:56.237
> 
> 标签：java, android, xml

我对 android 还很陌生，但我已经设法弄清楚所有布局的东西是如何与 XML 一起工作的。没关系。

在 Eclipse 的图形布局选项卡中，我有几个按钮和一个 .gif 图像的徽标。我已将 .gif 图像作为 LinearLayout 中的 ImageView 放入我的 XML 文件中，它显示在图形布局中。

但是当我在 Android 虚拟设备 (AVD) 中运行它时，除了图像之外，一切都显示出来了。有谁知道为什么会这样？请参阅下面的 XML 代码...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/natlib"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="-8dp"
        android:padding="@dimen/padding_medium"
        android:text="@string/welsh_libs"
        android:textColor="#79438F"
        android:textSize="22dip"
        android:textStyle="bold"
        tools:context=".MainActivity" />

</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#A4C81C"
        android:text="@string/ask_lib" />

    <Button
        android:id="@+id/button2"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#FF0066"
        android:text="@string/find_book" />

    <Button
        android:id="@+id/button3"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#3F83F1"
        android:text="@string/find_lib" />

    <Button
        android:id="@+id/button4"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="25dp"
        android:background="#FE0002"
        android:text="@string/register" />

    <Button
        android:id="@+id/button5"
        android:layout_width="137dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:background="#FBFC3F"
        android:text="@string/login" />

    <ImageView
        android:id="@+id/image1"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_marginLeft="220dp"
        android:layout_marginTop="20dp"
        android:layout_weight="0.37"
        android:contentDescription="@string/desc"
        android:src="@drawable/wag_logo"
        android:visibility="visible" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:56:13.470

你把图片放在哪个文件夹里？**/res/drawable** ? 另外，您将布局放在哪个文件夹中？**/res/布局**？

该`/res/`文件夹及其子文件夹用于[Localization](http://developer.android.com/guide/topics/resources/localization.html)。

因此，如果您只拥有它`/res/drawable-xhdpi/`，它只会出现在非常大的设备上。

此外，如果您在 处修改`/res/layout-large/`了布局文件并且没有在 处修改布局文件`/res/layout`，则只有大版本会得到修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:08:30.780

设置 android:layout_height 大于 0...试试这个

```
 <ImageView
    android:id="@+id/image1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="220dp"
    android:layout_marginTop="20dp"
    android:layout_weight="0.37"
    android:contentDescription="@string/desc"
    android:src="@drawable/wag_logo"
    android:visibility="visible" /> 
```

# android - Android：拨打电话并在响铃后断开以留下未接电话

> ID：11545379
> 
> 赞同：0
> 
> 时间：2012-07-18T15:52:33.933
> 
> 标签：android

我正在使用此代码拨打电话

```
Intent callIntent = new Intent(Intent.ACTION_CALL,
                                  Uri.parse("tel:" + phoneNumber));
startActivity(callIntent); 
```

我想在听到第一次响铃后断开呼叫以在目标电话上留下未接来电。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:57:50.583

我不相信目前在 Android sdk 中可用。我最近试图控制一个项目的拨出电话，但除了拨打号码之外，您无能为力。我的上一个项目需要拨打电话，按下按钮，然后挂断。为此，我最终设置了一个收听网页的 Asterisk 服务器。您可以做类似的事情，但这将涉及使用与您自己的服务器的数据连接。

您可以查看这些链接。我不喜欢这个答案，但现在就是这样。

[如何在android中拨打电话并在通话结束后返回我的活动？](https://stackoverflow.com/questions/1556987/how-to-make-a-phone-call-in-android-and-come-back-to-my-activity-when-the-call-i)

[http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL)

如果您想超越技术，我建议您查看[此答案](https://stackoverflow.com/questions/599443/android-how-to-hang-up-outgoing-call)。

# c# - 添加跟踪日志记录配置时 WCF 服务无法启动

> ID：11545386
> 
> 赞同：0
> 
> 时间：2012-07-18T15:52:56.077
> 
> 标签：c#, .net, wcf

我有一个工作的 WCF 服务，我想连接它，这样我就可以查看日志。所以，我添加了一个 .config 文件，现在我的服务根本无法启动。

在我的代码中，我执行以下操作：

```
private ServiceHost _myHost; 
```

……

```
 _myHost= new ServiceHost(typeof (MyType), new Uri(baseUri));
        _myHost.AddServiceEndpoint(typeof (myInterface), new NetNamedPipeBinding(), hostName);
        _myHost.Open(); 
```

而且，如前所述，当我没有 .config 文件时，这有效。但是，要查看日志，我必须添加一个如下所示的 .config 文件：

```
 <system.diagnostics>
  <sources>
     <source propagateActivity="true" name="System.ServiceModel" switchValue="Verbose,ActivityTracing">
        <listeners>
           <add type="System.Diagnostics.DefaultTraceListener" name="Default">
              <filter type="" />
           </add>
           <add initializeData="c:\logs\Traces.svclog" type="System.Diagnostics.XmlWriterTraceListener"
              name="traceListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
              <filter type="" />
           </add>
        </listeners>
     </source>
  </sources>
</system.diagnostics>
<system.serviceModel>
  <diagnostics>
     <messageLogging logMalformedMessages="true" logMessagesAtServiceLevel="true"
        logMessagesAtTransportLevel="true" />
     <endToEndTracing activityTracing="true" messageFlowTracing="true" />
  </diagnostics>
</system.serviceModel> 
```

我现在在记录器中遇到的错误是`Failed to open System.ServiceModel.ServiceHost`，它发生在我的`ServiceHost`. 那么，为什么添加日志配置有什么不同呢？

**更新**

记录器是 ServiceTraceViewer，这就是我在配置中看到错误的地方。因此，日志记录正在工作，它只是破坏了代码的功能。我在某处读到，如果我使用 .config，我**必须**在配置中有一个端点。这是真的吗，如果是这样，是否有解决方法，因为我是通过代码来做的

# emacs - 如何解决冲突的面孔订单？

> ID：11545391
> 
> 赞同：2
> 
> 时间：2012-07-18T15:53:12.070
> 
> 标签：emacs, colors, emacs-faces

*（我不知道这个问题的标题是否正确）*

当使用几种次要模式同时改变“颜色”时，是什么决定了哪些模式显示什么？例如，我试图同时使用`highlight-changes-mode`和`rainbow-mode`：http: [//julien.danjou.info/projects/emacs-packages](http://julien.danjou.info/projects/emacs-packages)

我遇到的问题是，当我在缓冲区中输入新颜色（比如*#306090*）时，我看到的不是彩虹模式所希望的*#306090*字符的背景颜色，而是看到背景颜色（整行）已更改（因为我使用的是`highlight-changes-mode`，我非常喜欢）。

我的问题有点笼统：是什么决定了这里解决的“顺序”冲突？是否取决于各种模式的加载顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T01:46:14.357

它不依赖于模式的加载顺序。这取决于模式用于应用面的各自机制。

`rainbow-mode`用于`font-lock`突出显示文本，而后者又使用所谓的文本属性。文本属性是字符串对象的内在属性，可以属于不属于任何缓冲区的字符串对象。（例如，文本属性可以在剪切和粘贴中保留下来。）

`highlight-changes-mode`相比之下，使用“覆盖”，可以将其视为虚拟文本属性：覆盖是缓冲区中间隔的规范以及该间隔应该具有的一个或多个属性的规范；覆盖可以指定的属性之一是面。覆盖属性不是字符串本身的属性（因此不能在剪切和粘贴中幸存）。

如果缓冲区子字符串的文本属性和覆盖该子字符串的覆盖指定了不兼容的面部属性，则覆盖优先。（如果面部属性不是不兼容的——比如当一个文本属性指定了前景色但没有背景色，而叠加层只指定了背景色——那么它们会以你期望的方式合并。）

一般来说，合并面的规则很复杂，因为叠加层本身可以指定要在缓冲区位置显示的字符串，而这些字符串又可以有自己的文本属性，并且不同的规则控制这种情况；此外，某些内置面（如鼠标高光和模式线面）受其自身规则的约束。如果您想了解更多信息，请参阅信息节点“(elisp) Faces”和“(elisp) Overlays”。对于完整的故事，您需要查看显示例程的源代码（可能从 xdisp.c 中的 handle_face_prop 和 xfaces.c 中的 face_at_string_position 开始）。

# matlab - 根据另一个矩阵的相应唯一值添加矩阵中的值

> ID：11545393
> 
> 赞同：0
> 
> 时间：2012-07-18T15:53:14.410
> 
> 标签：matlab

```
e=[40 19 18 20 30 34 65 97 155 160]; 
```

如果两个连续值之间存在最小差异（例如 (19,18)、(30, 34) 和 (155,160)），则合并这些值。

类似的值也...任何条件都可以用来解决这个问题..请帮助解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:59:34.560

迭代地，

```
e = [ 40 19 18 20 30 34 65 97 155 160];
current = e + 1; % init
prev = e;
while ~isequal( current, prev )
    prev = current;
    d = [ diff( prev ) < 5 true]; % always keep the last one
    current = prev( d );
end 
```

# android - Android 4.1.1 JellyBean 上的 OnTouchListener 不规则

> ID：11545398
> 
> 赞同：1
> 
> 时间：2012-07-18T15:53:22.467
> 
> 标签：android, ontouchlistener, android-4.2-jelly-bean

我的 OnTouchListener 遇到了一个非常奇怪的问题。我昨晚将我的 Galaxy Nexus 升级到了 4.1.1，以下代码在所有以前的 android OS 版本上仍然有效，根本无法工作。我想这个监听器的调用有一些问题。以下是代码，如果您发现它很复杂，请忽略逻辑，只需查看日志的位置和输出：-

```
private OnTouchListener drag = new OnTouchListener() {
    private float error_x = 0;
    private float error_y = 0;
    private int c = 0;

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.i("branch", "onTouch called " + ++c);
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            Log.i("branch", "1");
            error_x = event.getX();
            error_y = event.getY();
        } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
            Log.i("branch", "2");
            refreshTriangleColor(v);
            root_layout.removeView(v);
            root_layout.addView(v);
            Point position = getViewPosition(v);
            if (position != null) {
                Log.i("branch", "3");
                if (triangle_red
                        .pointLiesInTriangle(position.x, position.y)) {
                    Log.i("branch", "4");
                    int x = Math.round(event.getRawX());
                    int y = Math.round(event.getRawY());
                    if (triangle_red.pointLiesInTriangle(x, y)) {
                        Log.i("branch", "5");
                        setViewPosition(v,
                                Math.round(event.getRawX() - error_x),
                                Math.round(event.getRawY() - error_y));
                    } else {
                        Log.i("branch", "6");
                        long d = 0;
                        d = Math.round(android.util.FloatMath.sqrt((((position.x - event
                                .getRawX()) * (position.x - event.getRawX())) - ((position.y - event
                                .getRawY()) * (position.y - event.getRawY())))));
                        if (d >= Util.convertDip2Pixels(MAX_RESISTANCE,
                                MelodyTriangle_AppActivity.this)) {
                            Log.i("branch", "7");
                            setViewPosition(v,
                                    Math.round(event.getRawX() - error_x),
                                    Math.round(event.getRawY() - error_y));
                            vibrate();
                        } else {
                            Log.i("branch", "8");
                            Point nearest_point = triangle_red
                                    .getNearestPointOnLine(new Point(x, y));
                            if (nearest_point != null) {
                                Log.i("branch", "9");
                                setViewPosition(
                                        v,
                                        Math.round(nearest_point.x
                                                - error_x),
                                        Math.round(nearest_point.y
                                                - error_y));
                            }
                        }
                    }
                } else {
                    Log.i("branch", "10");
                    setViewPosition(v,
                            Math.round(event.getRawX() - error_x),
                            Math.round(event.getRawY() - error_y));
                }
            }
        } else if (event.getAction() == MotionEvent.ACTION_UP) {
            Log.i("branch", "11");
            Point position = getViewPosition(v);
            if (position != null) {
                Log.i("branch", "12");
                if (!triangle_red.pointLiesInTriangle(position.x,
                        position.y)) {
                    Log.i("branch", "13");
                    if (api.voices[0].isPlaying()) {
                        Log.i("branch", "14");
                        api.voices[0].stopPlaying();
                    }
                    animateToLayout(v, red_layout);
                } else {
                    Log.i("branch", "15");
                    playVoice(v, position.x, position.y);
                }
            }
        }
        return true;
    }
}; 
```

当我尝试拖动时，上面的代码给出了以下输出： -

```
07-18 16:28:53.897: I/branch(31176): onTouch called 1
07-18 16:28:53.897: I/branch(31176): 1
07-18 16:28:54.007: I/branch(31176): onTouch called 2
07-18 16:28:54.007: I/branch(31176): 2
07-18 16:28:54.007: I/branch(31176): onTouch called 3
07-18 16:28:54.007: I/branch(31176): 3
07-18 16:28:54.007: I/branch(31176): 10
07-18 16:28:56.077: I/branch(31176): onTouch called 4
07-18 16:28:56.077: I/branch(31176): 1
07-18 16:28:56.124: I/branch(31176): onTouch called 5
07-18 16:28:56.124: I/branch(31176): 2
07-18 16:28:56.124: I/branch(31176): onTouch called 6
07-18 16:28:56.124: I/branch(31176): 3
07-18 16:28:56.124: I/branch(31176): 10
07-18 16:29:00.764: I/branch(31176): onTouch called 7
07-18 16:29:00.764: I/branch(31176): 1
07-18 16:29:00.803: I/branch(31176): onTouch called 8
07-18 16:29:00.803: I/branch(31176): 2
07-18 16:29:00.803: I/branch(31176): onTouch called 9
07-18 16:29:00.803: I/branch(31176): 3
07-18 16:29:00.803: I/branch(31176): 10 
```

注意到的问题是：-

1.  由于拖动不顺畅，因此未定期调用 touch。您必须涂抹视图以将其从其位置略微移动，因此不会随着触摸而移动。然而，它在以前的版本中是常规的。

2.  event.getAction() == MotionEvent.ACTION_UP 仅在您触摸并释放视图时为真。而在以前的版本中，几乎每次都会调用它，因为视图会沿着触摸移动，并且无论何时释放都是如此。

知道出了什么问题吗？

谢谢

# eclipse - 我无法导出搅拌机对象

> ID：11545410
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:00.897
> 
> 标签：eclipse, blender

我们正在做一个 android 项目。我们从 blender 2.63 构建 3D 对象，但我们无法将对象导出到 Eclipse Indigo。我们找到了一个解决方案**blend2java**，但它适用于最高 2.25 的低版本搅拌机。如果你找到了答案回复我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:19:56.990

我不知道你想要什么格式，但你有没有去文件>导出>文件类型。如果它不在那里，请进入 File > User Preferences > addons > Import/export 并寻找一个插件。祝你好运。

# events - facebook 中的搜索事件 - 需要用户 access_token

> ID：11545411
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:01.810
> 
> 标签：events, facebook-graph-api, access-token

我的应用程序正在通过 https://graph.facebook.com/search?q=Sity&type=event&access_token=[..] 在特定城市的 facebook 中查找事件，并发布在另一个站点上找到的数据。在标记中搜索公共事件现在需要 Facebook 访问令牌。

如何在不需要用户额外权限的情况下获得我的应用程序正在寻找事件的长令牌？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T16:08:08.100

Get an app access token – [https://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)

# visual-studio-lightswitch - 如何在非必需控件的显示名称标签中加粗文本

> ID：11545412
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:01.367
> 
> 标签：visual-studio-lightswitch

有人可以向我解释如何在 Lightswitch 中非必需控件的显示名称标签中加粗文本。

具体来说，我想知道如何使用代码访问控件的标签并以编程方式更改样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:24:52.833

[Jewel Lambert 在她的博客](http://dotnetlore.com/using-visualtreehelper-to-perform-lightswitch-wizardry/)上写了一个助手类。辅助类可用于更改任何 Silverlight 控件的大部分可视元素。她举了一个改变标签的具体例子，因为这是一个流行的要求。

# php - 根据昨天的日期从远程服务器检索文件

> ID：11545414
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:04.237
> 
> 标签：php

我需要修改此脚本以仅检索具有昨天日期的文件。这是我所拥有的：

```
<?php
$username = 'XXXXXX';
$password = 'XXXXXX';
$ftp_server = 'data.mywebsite.com';

 $conn = ftp_connect($ftp_server) or die("Couldn't connect to $ftp_server");
if(ftp_login($conn, $username, $password))
{
    echo 'Logged in';
}
else
{
    echo 'FTP Error:Could not log in to '.$ftp_server;
    exit();
}
ftp_pasv ($conn, true);
if (ftp_chdir($conn, "../Photos/Hi-res")) {
    echo "Current FTP directory is now: " . ftp_pwd($conn) . "\n";
} else { 
    echo "Couldn't change to Photos directory\n";
}

$list = ftp_nlist($conn, '.');
function is_img($file) {
    if(preg_match('/.*\.png/', $file))
    {
        return preg_match('/.*\.png/', $file) > 0;
    }
    if(preg_match('/.*\.jpg/', $file))
    {
        return preg_match('/.*\.jpg/', $file) > 0;
    }
    if(preg_match('/.*\.gif/', $file))
    {
        return preg_match('/.*\.gif/', $file) > 0;
    }
}

$filtered = array_filter($list, is_img);
foreach($filtered as $img) {
    if (ftp_get($conn, $img, $img, FTP_BINARY)) {
        echo "Successfully written to $img\n";
    } else {
        echo "There was a problem\n";
    }
}
ftp_close($conn); 
```

当我运行脚本时，它会抓取我服务器上不存在的所有文件，这不是我想要的。我只想让它抓取所有具有昨天日期的文件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:42:16.167

这是一个快速而肮脏的解决方案，请注意，在比较 mtime 时，这不会考虑服务器时区差异或其他陷阱。

主要变化是 is_img 函数已被重命名并使用 ftp_mdtm() 为每个文件扩展。

```
$username = 'XXXXXX';
$password = 'XXXXXX';
$ftp_server = 'data.mywebsite.com';
$now = time();

 $conn = ftp_connect($ftp_server) or die("Couldn't connect to $ftp_server");
if(ftp_login($conn, $username, $password))
{
    echo 'Logged in';
}
else
{
    echo 'FTP Error:Could not log in to '.$ftp_server;
    exit();
}
ftp_pasv ($conn, true);
if (ftp_chdir($conn, "../Photos/Hi-res")) {
    echo "Current FTP directory is now: " . ftp_pwd($conn) . "\n";
} else {
    echo "Couldn't change to Photos directory\n";
}

$list = ftp_nlist($conn, '.');
function is_for_download($file) {
    $is_img = false;

    if(preg_match('/.*\.png/', $file))
    {
        $is_img = preg_match('/.*\.png/', $file) > 0;
    }
    if(preg_match('/.*\.jpg/', $file))
    {
        $is_img = preg_match('/.*\.jpg/', $file) > 0;
    }
    if(preg_match('/.*\.gif/', $file))
    {
        $is_img = preg_match('/.*\.gif/', $file) > 0;
    }

    if (!$is_img) {
        return false;
    }

    global $conn;
    global $now;

    $yesterday_start = strtotime('yesterday midnight', $now);
    $yesterday_end = strtotime('yesterday midnight + 24 hours', $now);
    $mtime = ftp_mdtm($conn, $file);

    if ($yesterday_start <= $mtime && $mtime <= $yesterday_end) {
        return true;
    }
    return false;
}

$filtered = array_filter($list, 'is_for_download');
foreach($filtered as $img) {
    if (ftp_get($conn, $img, $img, FTP_BINARY)) {
        echo "Successfully written to $img\n";
    } else {
        echo "There was a problem\n";
    }
}
ftp_close($conn); 
```

# android - WebView 中的事件点击链接

> ID：11545417
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:11.960
> 
> 标签：android, webview

我有一个 webview 并且 webview 包含一个 URL..我想点击到 URL，一个警报对话框通知将显示。我的想法是：当单击该 URL 时，Web 浏览器默认会加载该 URL 以转到网页。我将在 Web 浏览器中获取 URL 并进行比较。如果为真，它将显示警报对话框，除非它不显示。但我不知道在网络浏览器默认获取 URL。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:15:54.913

您可以获得在 webview whit 中加载的 url：

```
webview.getUrl(); 
```

您也可以覆盖 onProgressChanged 方法并在页面完成加载时采取行动

```
webview.setWebChromeClient(new WebChromeClient() {

@Override
public void onProgressChanged(WebView view, int progress){  

        if(progress == 100){
             // Takes the actions
        }
    }
}); 
```

# c++ - 如何为 Visual Studio 2012 调试器编写自定义本机可视化工具 DLL？

> ID：11545418
> 
> 赞同：22
> 
> 时间：2012-07-18T15:54:11.657
> 
> 标签：c++, debugging, visual-studio-2012, visualizer

在 C++ 中为 Visual Studio 2012 调试器编写自定义本机可视化器 DLL 需要什么？我想显示一个只能按需从类/结构计算的值，因此需要本机可视化 DLL。Visual Studio 2012 使用一种新方法来实现称为 Natvis 的本机可视化工具。截至目前，关于 Natvis 的正确信息非常少，尤其是关于使用 Natvis 调用可视化 DLL 的信息。DLL 将根据类/结构成员值计算显示字符串。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-18T15:54:11.657

这是构成 AddIn DLL 的 C++ 代码。我将文件命名为 NatvisAddIn.cpp，项目创建了 NatvisAddIn.dll。

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>

#define ADDIN_API __declspec(dllexport)

typedef struct tagDEBUGHELPER
{
    DWORD dwVersion;
    HRESULT (WINAPI *ReadDebuggeeMemory)( struct tagDEBUGHELPER *pThis, DWORD dwAddr, DWORD nWant, VOID* pWhere, DWORD *nGot );
    // from here only when dwVersion >= 0x20000
    DWORDLONG (WINAPI *GetRealAddress)( struct tagDEBUGHELPER *pThis );
    HRESULT (WINAPI *ReadDebuggeeMemoryEx)( struct tagDEBUGHELPER *pThis, DWORDLONG qwAddr, DWORD nWant, VOID* pWhere, DWORD *nGot );
    int (WINAPI *GetProcessorType)( struct tagDEBUGHELPER *pThis );
} DEBUGHELPER;

typedef HRESULT (WINAPI *CUSTOMVIEWER)( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved );

extern "C" ADDIN_API HRESULT MyClassFormatter( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved );
extern "C" ADDIN_API HRESULT MyStructFormatter( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved );

class MyClass
{
public:
    int publicInt;
};

struct MyStruct { int i; };

ADDIN_API HRESULT MyClassFormatter( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved )
{
    MyClass c;
    DWORD nGot;
    pHelper->ReadDebuggeeMemory(pHelper,dwAddress,sizeof(MyClass),&c,&nGot);
    sprintf_s(pResult,max,"Dll MyClass: max=%d nGot=%d MyClass=%x publicInt=%d",max,nGot,dwAddress,c.publicInt);
    return S_OK;
}

ADDIN_API HRESULT MyStructFormatter( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved )
{
    MyStruct s;
    DWORD nGot;
    pHelper->ReadDebuggeeMemory(pHelper,dwAddress,sizeof(MyStruct),&s,&nGot);
    sprintf_s(pResult,max,"Dll MyStruct: max=%d nGot=%d MyStruct=%x i=%d",max,nGot,dwAddress,s.i);
    return S_OK;
} 
```

这是 Visual Studio 2012 调试器用来显示值的 .natvis 文件。将其放在 .natvis 文件中。我将其命名为 NatvisAddIn.natvis。该文件指示 VS 2012 调试器调用 NatvisAddIn.dll。dll 包含两个可视化方法调用；MyClassFormatter 格式化 MyClass 和 MyStructFormatter 格式化 MyStruct。对于指定类型（MyClass、MyStruct）的每个实例，调试器将在 Auto、Watch 或工具提示显示中显示方法的格式化值。

```
<?xml version="1.0" encoding="utf-8"?>
    <AutoVisualizer xmlns="http://schemas.microsoft.com/vstudio/debugger/natvis/2010">
    <Type Name="MyClass">
        <DisplayString LegacyAddin="NatvisAddIn.dll" Export="MyClassFormatter"></DisplayString>
    </Type>
    <Type Name="MyStruct">
        <DisplayString LegacyAddin="NatvisAddIn.dll" Export="MyStructFormatter"></DisplayString>
    </Type>
</AutoVisualizer> 
```

将已编译的 NatvisAddIn.dll 文件和 NatvisAddIn.natvis 文件放入以下三个位置之一：

```
%VSINSTALLDIR%\Common7\Packages\Debugger\Visualizers (requires admin access)

%USERPROFILE%\My Documents\Visual Studio 2012\Visualizers\

VS extension folders 
```

您需要确保以下注册表项存在且值为 1：

> [HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\Debugger]
> 
> "EnableNatvisDiagnostics"=dword:00000001

如果一切顺利，您将在 Visual Studio 的调试器输出窗口中看到 natvis 消息。这些消息将显示 Natvis 是否能够解析 .natvis 文件。解析每个 .natvis 文件的结果显示在输出窗口中。如果出现问题，请使用命令“dumpbin/exports”仔细检查 DLL 方法的名称是否与 .navis 文件的 Type= 完全匹配。还要确保当前的 .dll 和 .natvis 文件已复制到适当的目录。

```
Natvis: Parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\atlmfc.natvis.
Natvis: Done parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\atlmfc.natvis.
Natvis: Parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\concurrency.natvis.
Natvis: Done parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\concurrency.natvis.
Natvis: Parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\NatvisAddIn.natvis.
Natvis: Done parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\NatvisAddIn.natvis.
Natvis: Parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\stl.natvis.
Natvis: Done parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\stl.natvis.
Natvis: Parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\windows.natvis.
Natvis: Done parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\windows.natvis.
Natvis: Parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\winrt.natvis.
Natvis: Done parsing natvis xml file: C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers\winrt.natvis. 
```

测试程序：

```
#include "stdafx.h"
#include <iostream>

class MyClass
{
public:
    int publicInt;
};

struct MyStruct { int i; };

int _tmain(int argc, _TCHAR* argv[])
{
    struct MyStruct s = {1234};
    std::cout << s.i << std::endl;
    MyClass *c = new MyClass;
    c->publicInt = 1234;
    std::cout << c->publicInt << std::endl;
    return 0;
} 
```

信息资源：

> \Xml\Schemas\natvis.xsd
> 
> [http://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2](http://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2)
> 
> [http://blogs.msdn.com/b/mgoldin/archive/2012/06/06/visual-studio-2012-and-debugger-natvis-files-what-c​​an-i-do-with-them.aspx](http://blogs.msdn.com/b/mgoldin/archive/2012/06/06/visual-studio-2012-and-debugger-natvis-files-what-can-i-do-with-them.aspx)
> 
> [http://blogs.msdn.com/b/vcblog/archive/2012/07/12/10329460.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/07/12/10329460.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-13T09:41:21.917

对于 64 位版本调试，应使用以下行：

```
auto realAddress = pHelper->GetRealAddress(pHelper);
pHelper->ReadDebuggeeMemoryEx(pHelper, realAddress, sizeof(MyClass), &c, &nGot ); 
```

对于前面的示例，64 位版本可能如下所示：

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>

#define ADDIN_API __declspec(dllexport)

typedef struct tagDEBUGHELPER
{
    DWORD dwVersion;
    HRESULT (WINAPI *ReadDebuggeeMemory)( struct tagDEBUGHELPER *pThis, DWORD dwAddr, DWORD nWant, VOID* pWhere, DWORD *nGot );
    // from here only when dwVersion >= 0x20000
    DWORDLONG (WINAPI *GetRealAddress)( struct tagDEBUGHELPER *pThis );
    HRESULT (WINAPI *ReadDebuggeeMemoryEx)( struct tagDEBUGHELPER *pThis, DWORDLONG qwAddr, DWORD nWant, VOID* pWhere, DWORD *nGot );
    int (WINAPI *GetProcessorType)( struct tagDEBUGHELPER *pThis );
} DEBUGHELPER;

typedef HRESULT (WINAPI *CUSTOMVIEWER)( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved );

extern "C" ADDIN_API HRESULT MyClassFormatter( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved );

class MyClass
{
public:
    int publicInt;
};

ADDIN_API HRESULT MyClassFormatter( DWORD dwAddress, DEBUGHELPER *pHelper, int nBase, BOOL bUniStrings, char *pResult, size_t max, DWORD reserved )
{
    MyClass c;
    DWORD nGot;
    auto realAddress = pHelper->GetRealAddress(pHelper);
    pHelper->ReadDebuggeeMemoryEx(pHelper, realAddress, sizeof(MyClass), &c, &nGot );
    sprintf_s(pResult,max,"Dll MyClass: max=%d nGot=%d MyClass=%llx publicInt=%d",max, nGot, realAddress, c.publicInt);
    return S_OK;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-17T10:43:37.520

我需要一项与为加载上述“NatvisAddIn.dll”而查找的搜索路径相关的说明。让我试着通过扩展上面的例子来解释

为了可视化我的自定义 C++ 类对象（比如 MyCustomeType），我需要在“DisplayString”的“Export”属性中提到的函数（比如 MyClassFormatter）的实现中调用一些额外的 API（计算 MyCustomeType 的显示字符串） XML。

调用这些额外的 API 会在上面提到的“NatvisAddIn.dll”上创建一个库/dll 依赖项。如果这个附加依赖项只是一个或两个库，我可以将这些库放在 NatvisAddIn.dll 所在的相同位置。但是，在我的情况下，依赖项包含一长串库。

有人可以建议我一些优雅的方法来解决依赖关系，而无需将完整的库链拉入 %USERPROFILE%\My Documents\Visual Studio 2012\Visualizers 文件夹吗？

为了演示我的用例，让我们考虑下面的依赖树： NatvisAddIn.dll a.dll
a1.dll a2.dll a3.dll

我将 a.dll 复制到 NatvisAddIn.dll 所在的同一位置。它的依赖 dll（a1、a2 和 a3）存在于添加到 PATH 变量的位置。当我尝试在 Visual Studio 调试器中可视化 MyCustomeType 对象时，natvis 诊断在输出窗口中给出以下错误

**Natvis：C:\Users\myUser\Documents\Visual Studio 2017\Visualizers\mydata.natvis(9,6)：错误：无法从 C:\Users\myuser\Documents\Visual Studio 2017\Visualizers\NatvisAddIn 加载插件。 MyCustomeType 类型的 dll: : 找不到指定的模块。**

我对上述错误的理解是，Visual Studio 调试器无法解析 a.dll（a1、a2 和 a3）的依赖关系，因此无法加载 NatvisAddIn.dll

当我尝试在我的 testApplication 中使用 a.dll 并为 MyCustomeType 计算 DisplayString 时，依赖项得到解析，a.dll 被加载，我得到了预期的输出字符串，而无需复制 a1.dll、a2.dll 和 a3.dll。依赖的 dll 从窗口 PATH 变量中解析/提取。**但是，在 Visual Studio 调试器的情况下，依赖的 DLL 不会从 PATH 变量中解析**。

正如依赖工具所确定的，调试器无法解析的一些 dll 是：

*api-ms-win-core-errorhandling-l1-1-0.dll api-ms-win-crt-time-l1-1-0.dll api-ms-win-crt-heap-l1-1-0。 dll*

其中一些 dll 存在于 Visual Studio 安装中，其他的存在于 c:\windows\WinSxS

我已经在 Visual Studio 2012 和 Visual Studio 2017 上尝试了我的用例。我在这两个 Visual Studio 中都遇到了同样的问题。

# php - 使用换行符搜索文本区域数据的查询

> ID：11545422
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:20.660
> 
> 标签：php, mysql, html

我正在使用输入标签在表单中输入地址。

输入表格代码：

```
<input type="text" name="address"> 
```

和搜索地址的搜索查询，没有任何问题

搜索表格代码：

```
 <input type="hidden" name="category_address" value="address"/>
    <select name='criteria_address'">
        <option selected="selected"> </option>
    <?php
        $order = "SELECT DISTINCT address FROM lh_clients ORDER BY clientname" or die (mysql_error());
        $result = mysql_query($order);  
        while($data = mysql_fetch_array($result))
        {
         echo ("<option> $data[address] </option>");
        }
    ?> 
```

搜索结果显示代码：

```
if(isset($_POST['criteria_address']))
{
$category_address = $_POST['category_address'];
    $criteria_address = $_POST['criteria_address'];

$query = "SELECT * FROM lh_clients WHERE $category_address LIKE '%".$criteria_address."%'";

echo "<tr><td colspan='8'>$num_rows Results Found</td></tr>";
while($data = mysql_fetch_array($result))
{
echo("<tr>
        <td>$data[clientname]</td>
        <td>$data[clienttype]</td>
    <td>$data[address]</td>
    <td>$data[contacts]</td>
    <td>$data[sensitivity]</td>
    <td>$data[acountmanager]</td>
    <td>$data[responsibleexecutive]</td>
    </tr>");
} 
```

但是现在当我替换输入标签并使用标签代替它时

文本区域代码：

```
<textarea name="address"></textarea> 
```

搜索代码不起作用。该标签工作正常，它从地址列弹出数据，但不根据该地址提供任何搜索结果。

顺便说一句，当我输入一些东西而不输入换行符时，它可以工作。如果有人能理解我的问题，请回复。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:15:55.783

如果您在搜索词中添加换行符，则只会获得该换行符存储在数据库中的行。

1\. 如果一个地址存储在数据库中，如
“ `street 1, 123 45 town`”，
并且您尝试通过写
“ `street 1`
`123 45 town`”来搜索它，
它们不会匹配，您可能需要替换换行符`%`以允许其他分隔符。

2.如果您的地址存储在数据库中`street 1`，并且您搜索
“ `street 1`
”
，那么您可能希望在搜索词上使用`trim()`以摆脱额外的换行符

3.为避免退货问题，可以使用`REPLACE`

```
SELECT *
FROM lh_clients
WHERE
  REPLACE(adress, '\r', '') LIKE CONCAT('%', REPLACE(:adress, '\r', ''), '%'); 
```

`:adress`应该在哪里绑定/替换为输入变量

# c# - 多次插入到datagridview

> ID：11545427
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:48.233
> 
> 标签：c#, sql-server, datagridview

我有一个如下所示的 datagridview 视图：

`ProductId`| `Name`| `Price`|`Quantity`

datagridview 以所有单元格为空开始。

用户将在每一列中输入数据。用户输入的产品数量变化（未知）。用户只能输入一种产品或五种产品。

因此，一旦用户输入了他必须输入的所有产品，我希望当他单击一个按钮时，所有产品都将保存到数据库中。

sql数据库中的表看起来像datagrid：

`ProductId`| `Name`| `Price`|`Quantity`

由于用户将输入的产品数量未知，如何将数据保存到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:35:33.110

您可以使用表值参数或将 xml 作为输入以进行多次插入的存储过程，只需点击数据库一次即可。

表值参数：-

```
 CREATE TYPE dbo.ProductType AS TABLE
   ( ProductID int, Name nvarchar(250),Price decimal(10,2),Quantity int )

  CREATE PROCEDURE sp_InsertProducts 
  (@tvpProducts dbo.ProductType READONLY)
  AS
  BEGIN 
  INSERT INTO dbo.Products (ProductID , Name ,Price,Quantity  )
  SELECT a.ProductID ,a.Name ,a.Price, a.Quantity  FROM @tvpProducts AS a;
  END 
```

在您的 C# 应用程序中创建产品列表并在用户创建新产品时添加项目，最后当用户单击 Sumbit 按钮然后将列表转换为数据表并执行您的 sql 查询

当用户单击新按钮添加产品​​时，然后使用集合添加项目

```
 List<Product> _product= new List<Product>
   _product.Add()
    {
     //Bind the gridview columns to the respective fields of the product class
    }; 
```

单击提交按钮时，编写以下代码

```
 DataTable dtProducts = ConvertListToDataTable(_product);
   SqlCommand cmd = new SqlCommand("sp_InsertProducts", sqlConnection);
   SqlParameter p = cmd.Parameters.AddWithValue("@tvpNewDistricts", dtProducts );
   p.SqlDbType = SqlDbType.Structured;
   p.TypeName = "dbo.ProductType";
   cmd.ExecuteNonQuery(); 
```

如果您想使用 XML Stored proc，请参考我的其他[答案](https://stackoverflow.com/questions/11376498/a-better-way-to-achieve-insert-without-hitting-the-database-multiple-times/11376775#11376775)

# c# - 带有子项的 ListView 列表

> ID：11545428
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:51.110
> 
> 标签：c#, list, listview

好的，我如何以编程方式将项目从 an 添加`List<ListViewItem.ListViewSubItem>`到 an `ListView`？我正在尝试加载 3 个彼此相邻的项目列表，但它似乎不起作用......

这是我现在拥有的一些代码：

```
 //----------PluginHandler.cs----------/

public static List<ListViewItem> PluginList = new List<ListViewItem>();
public static List<ListViewItem.ListViewSubItem> PluginList2 = new List<ListViewItem.ListViewSubItem>();

PluginList.Clear();
PluginList2.Clear();
foreach (var item in plugin.versions)
{
    var lvitem = new ListViewItem { Text = item.name };
    var lvitem2 = new ListViewItem.ListViewSubItem { Text = item.filename };
    PluginList.Add(lvitem);
    PluginList2.Add(lvitem2);
}

    //----------Form1.cs----------/

lvPluginInfo.Items.AddRange(PluginHandler.PluginList.ToArray());
lvPluginInfo.Items[0].SubItems.AddRange(PluginHandler.PluginList2.ToArray()); 
```

我得到的输出并不是我真正想要的，它不断在右侧添加子项，而不是像这样将它们彼此相邻添加：

项目1a | item2a
item1b | 项目2b ...

现在我得到：
item1a | 项目2a | 项目1b | 项目2b | ...

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:19:56.970

你似乎正在以一种非常奇怪的方式处理这件事。我想这就是你打算做的？

```
lvPluginInfo.Items.Clear();
foreach (var item in plugin.versions)
{
    var lvitem = new ListViewItem(item.name);
    lvitem.SubItems.Add(item.filename);
    lvPluginInfo.Items.Add(lvitem);
} 
```

您的处理方式的问题在于以下行：`lvPluginInfo.Items[0].SubItems.AddRange(PluginHandler.PluginList2.ToArray());`. 您将所有子项添加到第一个 ListViewItem。在循环之外添加项目在这里没有多大意义。

# websphere-8 - WAS 8 上的 Servlet 2.5

> ID：11545429
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:51.837
> 
> 标签：websphere-8

有没有办法在 WAS 8.0 上使用 servlet 2.5 规范，默认情况下他尝试使用 3.0，但我使用的门户不支持新的 servlet 规范，我必须在较低版本上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:40:34.180

不，WebSphere Application Server 8.0 中包含的唯一 servlet 容器是支持 Servlet 3.0 规范的容器。

（如果您有特定的向后兼容性问题，您可以发布该问题，并且有人可能知道如何解决该问题。）

# php - 如何在 mysql 查询中搜索复杂的数字？

> ID：11545430
> 
> 赞同：0
> 
> 时间：2012-07-18T15:54:50.703
> 
> 标签：php, mysql, regex

我在名为 MM 的列中有这个数字 4.40-4.85X3.60。

我想通过mysql搜索每个数字大或小3点的数字，例如：

[4.37-4.43]-[4.82-4.88]X[0-9] ，X后面的数字可以是任意数字。

我尝试使用正则表达式，但我没有提供真正有用的东西，请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:58:38.087

为三个数字使用单独的列，这将解决您的所有问题。

否则，使用类似的东西：

```
WHERE
    CAST(SUBSTR(MM FROM 1 FOR (@tmp1:=POSITION("-" IN MM))) AS DECIMAL(3,2))
        BETWEEN 4.37 AND 4.43
    AND
    CAST(SUBSTR(MM FROM @tmp1 FOR POSITION("X" IN MM)-@tmp1) AS DECIMAL(3,2))
        BETWEEN 4.82 AND 4.88 
```

但请记住，这完全颠覆了您桌上可能拥有的任何索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:18:32.137

一种方法是“拆分”该字符串以从中获取所需的单独组件。假设该字符串始终使用 '-' 和 'X' 来分隔三个组件，则此查询中的表达式将为您“拆分”它：

```
SELECT SUBSTRING_INDEX(@n,'-',1) AS s1
     , SUBSTRING_INDEX(SUBSTRING_INDEX(@n,'-',-1),'X',1) AS s2 
     , SUBSTRING_INDEX(@n,'X',-1) AS s3 
  FROM (SELECT @n := '4.40-4.85X3.6') n 
```

然后您可以将这些表达式中的每一个转换为数字。

请注意，MySQL 可能会（默默地）丢失精度数字，可能会为无法转换为数字的字符串返回“0”，或者 MySQL 可能会抛出异常或警告。

因此，请注意选择 DECIMAL(m,n) 比例和精度，以避免溢出并正确处理舍入/截断。您的示例中显示的所有数据都适合 DECIMAL(3,2)，但这只是一个示例，不能保证所有数据。

我会在内联视图中转换“搜索参数”字符串，并将其连接到要搜索的表中。

像这样的东西：

```
SELECT t.MM
  FROM mytable t
  JOIN (SELECT CONVERT(SUBSTRING_INDEX(@n,'-',1)                        ,DECIMAL(6,2)) AS s1
             , CONVERT(SUBSTRING_INDEX(SUBSTRING_INDEX(@n,'-',-1),'X',1),DECIMAL(6,2)) AS s2 
             , CONVERT(SUBSTRING_INDEX(@n,'X',-1)                       ,DECIMAL(6,2)) AS s3 
          FROM (SELECT @n := '4.40-4.85X3.6') n
        ) p
     ON ABS(p.s1 - CONVERT(SUBSTRING_INDEX(t.MM,'-',1),DECIMAL(6,2))) 
        <= .03
    AND ABS(p.s2 - CONVERT(SUBSTRING_INDEX(SUBSTRING_INDEX(t,MM,'-',-1),'X',1),DECIMAL(6,2))
        <= .03 
```

JOIN 谓词只是从搜索参数的（派生的）数值中减去表中的（派生的）数值，并检查差异。

同样，正如我之前提到的，在转换为 DECIMAL 操作时，请注意字符串不是预期格式、值太大而无法适应比例（溢出）以及舍入/截断的问题。您可能会得到意想不到的结果（MySQL 可能会丢失精度和静默扩展，或者可能会引发异常和/或警告。（该行为取决于会话的 sql_mode 设置。）

# blackberry - 使用新的createbitmap方法时如何设置二维码的纠错级别

> ID：11545431
> 
> 赞同：3
> 
> 时间：2012-07-18T15:54:52.327
> 
> 标签：blackberry, qr-code, zxing

这个问题参考了 API 文档链接，[http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/barcodelib/BarcodeBitmap.html](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/barcodelib/BarcodeBitmap.html)

他们指定旧方法

```
public static Bitmap createBitmap(ByteMatrix byteMatrix,
                                  int maxBitmapSizeInPixels) 
```

已弃用。

但是通过使用新方法，

```
public static Bitmap createBitmap(ByteMatrix byteMatrix) 
```

他们没有指定一种方法来指定 Multiformatwriter 中 QR 码的纠错级别。我也找不到办法，查看各种成员函数。有没有人试过这个？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T11:46:59.210

这是我的代码，我用手机检查过，纠错级别根据我的手机正确设置。

```
 Hashtable hints = new Hashtable();
        switch (comboBox1.Text)
        {
            case "L":
                hints.Add(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);
                break;
            case "Q":
                hints.Add(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.Q);
                break;
            case "H":
                hints.Add(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.H);
                break;
            default: 
                hints.Add(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.M);
                break;
        }
        MultiFormatWriter mw = new MultiFormatWriter();
        ByteMatrix bm = mw.encode(data, BarcodeFormat.QR_CODE, size, size, hints);
        Bitmap img = bm.ToBitmap();
        pictureBox1.Image = img; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:21:59.200

刚看了文档。

它说要`createBitmap(ByteMatrix byteMatrix)`与 结合使用`MultiFormatWriter`。这有一种方法`encode(String contents, BarcodeFormat format, int width, int height, Hashtable hints)`，您可以在其中指定宽度、高度和错误级别。

要指定错误级别，请`EncodeHintType.ERROR_CORRECTION`使用 value提示 hashtable 键`new Integer(level)`。

不幸的是，我没有找到[这里](http://tech.top21.de/techblog/20100706-generating-qr-codes-in-java-with-zxing.html;jsessionid=125F3520AE46F953065CC3EE7D6A316F)描述的这些值的任何常量。但也许你可以在 axing 资源中找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T18:01:17.230

编码的时候可以传入hints

```
Map<EncodeHintType, Object> hints = new Hastable<EncodeHintType, Object>(); 
```

将纠错设置添加到提示中（例如添加到 M 级）

```
hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.M); 
```

ZXing 默认使用 L 级纠错（最低，意味着 QR 码即使在最大 7% 损坏后仍可读取）

# asp.net - ASP.net 上的 ISS 网页设计

> ID：11545433
> 
> 赞同：1
> 
> 时间：2012-07-18T15:54:57.417
> 
> 标签：asp.net, html

我想创建一个显示多个系统状态的网页。每个将由一个方框表示。

方框将填充为红色或绿色（<50% 为红色，>50% 为绿色）。

这可以用 HTML 构造吗？如果没有，谁能指导我使用最好的语言。我也必须使用 ASP.net 来做到这一点。

# sql-server - 列的 SQL Server 智能感知不适用于 SQL Server 2008 R2 中的某些表

> ID：11545434
> 
> 赞同：1
> 
> 时间：2012-07-18T15:55:00.333
> 
> 标签：sql-server, intellisense

我在 SQL Server 2008 R2 中遇到了一些智能感知问题。

所有表的 Intellisense 都可以正常工作，但 Intellisense 列似乎只适用于某些表。

例如，此查询拉出所有函数的列表并导航到以“sta”开头的项目：

```
select *
from tbl_cash_stats
where sta 
```

无论我是否输入任何字符，此查询都不会在 where 子句之后提取任何内容

```
select *
from tbl_assignment
where 
```

此外，如果我加入一个正常工作的表和一个不能正常工作的表，则没有列级智能感知工作：

```
select *
from tbl_cash_stats
join tbl_assignment
    on 
```

我已经多次刷新本地缓存但没有成功。似乎没有具体原因为什么某些表可以正常工作而其他表不能正常工作，并且只有大约 15% 的表受到影响。

有谁知道如何解决这个问题？它变得非常烦人，因为它影响了我最常使用的一些表。

**编辑：在查看了受到更密切影响的表之后，似乎只有带有标识列的表不能与智能感知一起使用，但我仍然无法弄清楚原因。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:37:36.473

幸运的是，我偶然发现了这个问题的答案。

周五，我安装了 Visual Studio 2010 SP1。安装后，我注意到 SQL Server 的智能感知完全停止工作。显然，这是一个已知问题，可以通过安装[累积更新 9来解决](http://support.microsoft.com/kb/2567713)

令我惊讶的是，此更新还解决了智能感知无法在具有标识列的表上工作的问题。

我希望这可以避免其他人在将来不得不处理这个相当模糊的问题。

# facebook - Facebook JS SDK 未设置 cookie

> ID：11545435
> 
> 赞同：0
> 
> 时间：2012-07-18T15:55:02.863
> 
> 标签：facebook, coffeescript, facebook-javascript-sdk

我正在尝试在我们的网络应用程序中实现 Facebook 身份验证，并通过 Facebook cookie 的服务器端处理。我们使用 JavaScript SDK 来执行我们的登录并设置 cookie。

然而，不知何故，Facebook SDK 似乎没有设置我们的 fbsr_APPID cookie（或任何 cookie）。这是 CoffeeScript 代码：

```
window.fbCallbacks = []

   # Create initialization function
window.fbAsyncInit = ->
  fbConfig =
    appId:      '<APPID here>'
    channelUrl: '/assets/channel.html'
    status:     true
    cookie:     true
    xfbml:      true

  FB.init fbConfig

  cb() for cb in window.fbCallbacks

# Set it up
((d)->
    id  = 'facebook-jssdk'
    ref = d.getElementsByTagName('script')[0]
    return if d.getElementById id

    js          = d.createElement 'script'
    js.id       = id
    js.async    = true
    js.src      = "//connect.facebook.net/en_US/all.js"
    ref.parentNode.insertBefore js, ref
)(document) 
```

我们让 Facebook 通过提供的登录小部件执行登录：

```
<div class="fb-login-button" data-show-faces="true" data-scope="publish_stream"/> 
```

一些额外的信息：

*   这是在 Chrome 稳定版和金丝雀以及 IE9 中测试的，在 localhost 和 127.0.0.1 上，有和没有 --enable-file-cookies 集（对于它的价值）。我会说这意味着这不是浏览器问题。
*   我试过摆弄频道文件，但现在它似乎完全可以访问。
*   在我自己的 JS 代码中设置一个 cookie 就像它应该的那样工作。
*   JS SDK 加载良好，因为我的登录小部件已正确装饰，甚至显示我已经登录。
*   控制台中不会报告任何错误。它完全是空白的。
*   [用Facebook Developers](https://developers.facebook.com/docs/reference/javascript/)上的初始化代码 JavaScript 示例中的副本替换 CoffeeScript也无法正常工作。

那么发生了什么？为什么 Facebook 不设置我的应用程序 cookie？

作为参考，这里是上面 CoffeeScript 生成的 JavaScript：

```
(function() {
  window.fbCallbacks = [];
  window.fbAsyncInit = function() {
    var cb, fbConfig, _i, _len, _ref, _results;
    fbConfig = {
      appId: '<appid>',
      channelUrl: '/assets/channel.html',
      status: true,
      cookie: true,
      xfbml: true
    };
    FB.init(fbConfig);
    _ref = window.fbCallbacks;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      cb = _ref[_i];
      _results.push(cb());
    }
    return _results;
  };
  (function(d) {
     var id, js, ref;
     id = 'facebook-jssdk';
     ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {
       return;
     }
     js = d.createElement('script');
     js.id = id;
     js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     return ref.parentNode.insertBefore(js, ref);
  })(document);
}).call(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:47:53.097

看来我误解了 SDK。登录按钮小部件实际上并没有在本地设置 cookie；它完全通过 Facebook 和 JavaScript 管理身份验证和访问，因此不允许您访问服务器上的身份验证令牌。

使用 JS SDK 的 FB.login() 函数确实设置了 cookie。

# mysql - 在 MySQL 中，如何“加入”三个表

> ID：11545437
> 
> 赞同：1
> 
> 时间：2012-07-18T15:55:12.980
> 
> 标签：mysql, join, cursor, union

我已经看到了大量关于“如何加入两个以上的表”的线程，但这些线程似乎都没有解决我的问题。我有三个表 `teams`：`persons`和`payfiles`

`teams`表如下所示：

```
DROP TABLE IF EXISTS `teams`;
CREATE TABLE IF NOT EXISTS `teams` (
 `team_id` int(11) NOT NULL AUTO_INCREMENT,
 `name` varchar(20) DEFAULT NULL,
 `leader` varchar(32) NOT NULL,
  PRIMARY KEY (`team_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=30;` 
```

`persons`桌子：

```
DROP TABLE IF EXISTS `persons`;
CREATE TABLE IF NOT EXISTS `persons` (
  `team_id` int(2) DEFAULT '0',
  `hash` varchar(32) NOT NULL,
  UNIQUE KEY `hash` (`hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

`payfiles`桌子：

```
DROP TABLE IF EXISTS `payfiles`;
CREATE TABLE IF NOT EXISTS `payfiles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `hash` varchar(32) NOT NULL,
  `deals_passed` int(2) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1298 ; 
```

表格有更多的列，但为了简单起见，我对它们进行了修剪。

`teams`表包含以下方式的记录： `1`, `Team 1`,`afaf7878af78a` 后者是团队负责人的唯一哈希。

表 person 包含所有个人信息和一个唯一的哈希值，例如 John Doe，其哈希值`afaf7878af78a`也是团队 1 的领导者。

该表`payfile`还有一个“哈希”列，该表包含计算员工支票所需的所有信息。

管理团队希望对公司的收入有一个总体了解。他们想看看每支球队带来了多少钱。

我在这里面临的问题是试图按“团队”对收入进行分组

到目前为止我最好的尝试是这个

`SELECT hash, SUM(deals_passed) as deals FROM payfiles JOIN persons ON persons.hash = payfiles.hash GROUP BY payfiles.hash`

但是我看不到查询数据库的优化方法，以便在不改变数据库结构的情况下按团队生成一个团队的总体收益愿景。

例如：John Doe 和 Jane Doe 属于“Team 1”，他们分别带来了 500 美元和 600 美元。

我想生成类似的东西：

“第 1 队带来了 1100 美元”

我的替代方法是更改​​数据库的结构，并在 payfile 表中添加一个新列。这样的列是`team_id`这样我可以很容易地查询它，但数据库目前有大约 10,000 条记录，这意味着更新不考虑`team_id`列的 10K 记录，并对 GUI 进行大量更改，我没有真的很想做，虽然如果这是最简单和最好的选择，我会做的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:06:15.550

```
SELECT
    teams.name,
    SUM(payfiles.deals_passed) AS team_deals_passed
FROM payfiles
LEFT JOIN persons USING (hash)
LEFT JOIN teams USING (team_id)
GROUP BY teams.team_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:00:49.523

您可以使用 SUM() 获取总数，并使用 GROUP BY 为团队获取每个团队的总数。

# c# - 使用 .net Web 服务生成下面的 json 的最佳方法是什么？

> ID：11545440
> 
> 赞同：0
> 
> 时间：2012-07-18T15:55:19.190
> 
> 标签：c#, jquery, asp.net, json, web-services

使用 .net Web 服务生成下面的 json 的最佳方法是什么？我打算通过前端的 jquery 来调用它。

我没有看到我是否必须手动将它拼凑在一起，或者 C# 中是否有一个对象结构，我可以使用它在返回时等同于这个。

```
{'Option 1': {'Suboption':2},'Option 2': {'Suboption 2': {'Subsub 1':5, 'Subsub 2':6}}} 
```

现在我的数据格式如下

```
Id  |   Text    |  ParentId
1     Option1       null
2     SubOption      1
3     Option2       null
4     SubOption2     3
5     SubSub1        4
6     SubSub2        4 
```

但是如果可以更轻松地生成 json，我可以更改数据结构。

编辑

* * *

最终解决方案是使用字符串生成器循环以形成 JSON。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:59:56.183

您需要一个递归数据结构来支持嵌套。

```
public class Item
{
    public int ID { get; set; }
    public string Text { get; set; }
    public Item SubItem { get; set; }
}

var myObject = new Item
{
    Id = 1, 
    Text = "Some Text",
    SubItem = new Item { Id = 2, Text = "SubItem" }
}

var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string json = serializer.Serialize(myObject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:22:08.730

看起来您正在尝试序列化树状结构，因此您需要构建某种树。你也许可以使用这样的东西：

```
class Node
{
  public String Text {get;set;}
  public Node[] Children {get;set;}
  public int Id {get;set;} // if you still need this
} 
```

虽然它有点颠倒了事情（链接到孩子而不是父母）。

此外，您无法使用此技术获得准确的输出，因为每个级别的键都不同。使用像我在这里的类意味着 JSON 键将始终是“Text”、“Children”和“Id”，但这应该足够了。

如果这不是您想要的，您始终可以使用 Dictionary<String, Object>，其值可以是字符串或更多字典。

# android - 将视图动态添加到特定的片段布局中

> ID：11545443
> 
> 赞同：8
> 
> 时间：2012-07-18T15:55:22.763
> 
> 标签：android, layout, view

我正在尝试将 TextView 动态添加到属于 Fragment 的布局中，但它不起作用。一旦应用程序启动，它就会立即关闭。我认为这与该 `TextView Paper = new TextView(this);`部分有关。我不知道如何获得正确的**上下文**，因为我正在使用片段。也许我的假设是错误的，但我真的不知道错误可能在哪里。

```
public class PageFragment extends Fragment {

    private int fragmentNR;

    public PageFragment(int nr) {
        this.fragmentNR = nr;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = new View(getActivity());
        if (fragmentNR == 0)
            v = inflater.inflate(R.layout.page1, container, false);
        else if (fragmentNR == 1)
            v = inflater.inflate(R.layout.page2, container, false);
        else if (fragmentNR == 2)
            v = inflater.inflate(R.layout.page3, container, false);

        return v;
    }

} 
```

> ```
> public class MainActivity extends FragmentActivity  {
> 
>     @Override
>     public void onCreate(Bundle savedInstanceState) {
>       super.onCreate(savedInstanceState);
>       setContentView(R.layout.main);
> 
>       PageAdapter mPageAdapter = new PageAdapter(getSupportFragmentManager());
>       ViewPager mViewPager = (ViewPager) findViewById(R.id.viewpager);
>       mViewPager.setAdapter(mPageAdapter);
> 
>       //This is where i try to add my TextView into my Layout
>       LinearLayout PaperLayout = (LinearLayout) findViewById(R.id.PaperLayout);//PaperLayout is a LinearLayout within the Page2-Fragment(R.layout.page2)
>       TextView Paper = new TextView(this);
>       Paper.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
>       Paper.setText("Paper2");
>       PaperLayout.addView(Paper);
>     }        
> } 
> ```

日志猫

```
07-18 16:32:58.330: E/AndroidRuntime(614): FATAL EXCEPTION: main
07-18 16:32:58.330: E/AndroidRuntime(614): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.loni.math_prime/com.loni.math_prime.MainActivity}: java.lang.NullPointerException
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.os.Looper.loop(Looper.java:137)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.ActivityThread.main(ActivityThread.java:4745)
07-18 16:32:58.330: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
07-18 16:32:58.330: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:511)
07-18 16:32:58.330: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-18 16:32:58.330: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-18 16:32:58.330: E/AndroidRuntime(614):  at dalvik.system.NativeStart.main(Native Method)
07-18 16:32:58.330: E/AndroidRuntime(614): Caused by: java.lang.NullPointerException
07-18 16:32:58.330: E/AndroidRuntime(614):  at com.loni.math_prime.MainActivity.onCreate(MainActivity.java:30)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.Activity.performCreate(Activity.java:5008)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-18 16:32:58.330: E/AndroidRuntime(614):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-18 16:32:58.330: E/AndroidRuntime(614):  ... 11 more 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
     >

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <android.support.v4.view.PagerTitleStrip
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="32dp"
            android:textStyle="bold"
            android:textColor="#fff5ee"
            android:layout_gravity="top" />
    </android.support.v4.view.ViewPager>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T16:07:16.460

解决了：

```
public class PageFragment extends Fragment {

private int fragmentNR;

public PageFragment(int nr) {
    this.fragmentNR = nr;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = new View(getActivity());

    if (fragmentNR == 0)
        v = inflater.inflate(R.layout.page1, container, false);
    else if (fragmentNR == 1){
        v = inflater.inflate(R.layout.page2, container, false);
        View tv = v.findViewById(R.id.Ausgabe);
        ((TextView)tv).setText("TestText");
        View pl = v.findViewById(R.id.PageLayout);
        TextView Paper = new TextView(pl.getContext());
        Paper.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        Paper.setText("Inserted TestText");
        ((LinearLayout)pl).addView(Paper);
        }
    else if (fragmentNR == 2)
        v = inflater.inflate(R.layout.page3, container, false);

    return v;
}
} 
```

# python - 将内容添加到 pyqt4 滚动区域

> ID：11545449
> 
> 赞同：0
> 
> 时间：2012-07-18T15:55:40.147
> 
> 标签：python, pyqt

如何将内容添加到 pyqt4 中的滚动区域？我自定义定义一个小部件吗？例如，如果我有一个数组或一个列表`a =[10,2,2,2,22,3,3,3]`。我应该如何在滚动条区域显示变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:04:55.970

如果您想将内容添加到滚动区域，您需要定义一个新的小部件并将其添加到滚动区域 - 就像您将小部件添加到框架一样。例如：

```
textEdit = QtGui.QTextEdit()
scrollArea = QtGui.QScrollArea(MainWindow)
scrollArea.setWidget(textEdit) 
```

然后，您可以使用 textEdit.append() 或 textEdit.setText() 将数组中的数据添加到滚动区域的文本框中。该文档确实说明了一切，尽管使用 C 而不是 python，但很明显您需要做什么：

```
QLabel *imageLabel = new QLabel;
QImage image("happyguy.png");
imageLabel->setPixmap(QPixmap.fromImage(image));

scrollArea = new QScrollArea;
scrollArea->setBackgroundRole(QPalette.Dark);
scrollArea->setWidget(imageLabel); 
```

# jsf - Facelets 参数在传递到另一个页面时没有值

> ID：11545453
> 
> 赞同：0
> 
> 时间：2012-07-18T15:55:51.313
> 
> 标签：jsf, jsf-2, facelets

我有一个这样的案例，我将一个文件包含在另一个文件中。但页面更复杂.. 我有时会得到 #{param2} 没有值，而 #{param1} 有值。我什至将参数命名为一些随机名称，以确保在其他任何地方都没有其他具有相同名称的参数可以覆盖它。

为什么会发生这种情况，一个 ui:param 的值以某种方式被空白覆盖？

在第一个 xhtml 中，我们包含另一个文件：

```
<ui:include src="/myFile.xhtml">    
    <ui:param name="param1"     value="stringvalue1" />
    <ui:param name="param2"     value="stringvalue2" />
</ui:include> 
```

我的文件.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:s="http://jboss.org/seam/faces"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:p="http://primefaces.org/ui">

    #{param1}
    #{param2}
</ui:composition> 
```

# string - 如何使用 Groovy 脚本将整数转换为指定长度的字符串值

> ID：11545455
> 
> 赞同：14
> 
> 时间：2012-07-18T15:55:58.400
> 
> 标签：string, groovy, int

有谁知道如何使用 Groovy 脚本代码将整数转换为具有指定位数的字符串值？例如，我想将整数值 1、2、3、4 转换为 4 位字符串，如“0001”、“0002”、“0003”和“0004”。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T15:57:30.190

只需使用[Java 的](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29) `String.format`：

```
def vals = [ 1, 2, 3, 4 ]

def strs = vals.collect {
  String.format( "%04d", it )
}

strs.each { println it } 
```

印刷：

```
0001
0002
0003
0004 
```

其他选项[可以在这里找到](http://langref.org/groovy/numbers/output)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T23:12:39.163

Use `sprintf`，它被添加到 Object 类中，因此它始终可用：

```
assert sprintf("%04d", 1) == "0001" 
```

有关更多信息，请参阅[格式字符串的 JDK 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T22:44:52.103

您可以`String.format()`像[JN1525-Strings中描述的那样使用](http://groovy.codehaus.org/JN1525-Strings)

```
values = [1, 2, 3, 4]
formatted = values.collect {
    String.format('%04d', it)
}
assert formatted == ['0001', '0002', '0003', '0004'] 
```

# symfony - 在 Twig 模板的翻译内容中添加链接

> ID：11545459
> 
> 赞同：24
> 
> 时间：2012-07-18T15:56:11.077
> 
> 标签：symfony, twig

在 Twig 模板中，我需要一个包含链接的翻译文本（路径应该由路由器生成，而不是静态嵌入）。Twig 不允许在 trans 块内呈现变量 - 我也知道以下几点：

```
{% trans with {'%name%': 'Fabien'} from "app" %}
Hello %name%
{% endtrans %} 
```

但我看不到如何使用它在翻译中注入这样的片段

```
<a href="{{ path('privacy') }}">privacy policy</a> 
```

（当然，锚文本也应该翻译）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-18T17:23:41.167

我采取的方法是这样的：

在翻译文件中：

```
page.privacy.policy: Please read our %link_start%privacy policy%link_end% 
```

在树枝文件中：

```
<p>{{ 'page.privacy.policy' | trans({'%link_start%' : '<a href="'~path('privacy-policy')~'">', '%link_end%' : '</a>'}, 'account') | raw }}</p> 
```

我不确定这是否可以使用您上面提到的块语法来完成，因为我发现它不起作用，除非我通过“原始”过滤器传输翻译结果。我还使用消息域来拆分翻译，因此使用了“帐户”参数。

我认为最接近你的例子是：

```
<p>{{ 'Please read our %link_start%privacy policy%link_end%' | trans({'%link_start%' : '<a href="'~path('privacy-policy')~'">', '%link_end%' : '</a>'}) | raw }}</p> 
```

编辑：

我遇到的这种方法的唯一问题是我需要在单元测试中以编程方式跟踪翻译的链接，因为没有一个翻译代表链接文本。虽然很混乱，但我认为可以通过为链接文本提供单独的翻译并将其翻译后的值作为附加变量替换为全文来解决这个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-09T10:07:47.807

rebdirdo 的解决方案并不安全，因为它没有逃避整个消息。对于像 之类的消息，它无法正常工作`"don't use <b> tag, use <strong> tag instead. %link_start%Here%link_end% you can find why."`，因为标签不会被转义并且不可见。

工作方法：

翻译文件：

`advises.strong: don't use <b> tag, use <strong> tag instead. %link_start%Here%link_end% you can find why.`

树枝文件：

`{{ 'advises.strong'|trans|nl2br|replace({'%link_start%': '<a href="'~path('privacy-policy')~'">', '%link_end%': '</a>'})|raw }}`

注意 nl2br 过滤器。有必要在此处放置一些过滤器以使原始过滤器仅适用于链接标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-08T10:14:17.777

这是一个更好的方法：

```
{{ 'Please read our %privacy_policy%'|trans({
    '%privacy_policy%': '<a href="' ~ path('privacypolicy') ~ '"> ' ~ 'Privacy Policy'|trans ~ '</a>'
})|raw }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T11:45:54.323

枝条：

```
{{'body.term'|trans('%link_terms%' :app.request.getSchemeAndHttpHost()~path('terms')},'AcmeTerm')|raw }} 
```

AcmeTerm.yml

```
body
    term: >
      <ul>          
          <li>Read<a href="%link_terms%">Terms</a>.</li>
      </ul> 
```

其中 path('terms') 是如下路线：

```
it__RG__terms                             ANY      ANY    ANY  /it/termini-e-condizioni
en__RG__terms                             ANY      ANY    ANY  /en/terms-and-conditions 
```

# javascript - jQuery 插件可由控制台触发，但不能由函数触发 - 为什么？

> ID：11545467
> 
> 赞同：0
> 
> 时间：2012-07-18T15:56:43.317
> 
> 标签：javascript, jquery, activation

我有一个神秘的 JS 问题：我用一个函数激活不同的 jQuery-Plugins。它是这样称呼的：

```
<script>
postAjaxCalls();
</script> 
```

然后，对应的函数如下所示：

```
function postAjaxCalls() {
    jQuery("[title]").tooltip(); 
    alert("this works great, tooltip not!");
    jQuery("select").selectbox();
} 
```

当我重新加载页面时，一切正常，但工具提示插件除外。现在，如果我在 JS 控制台中触发完全相同的代码，插件就会被激活：

```
jQuery("[title]").tooltip(); 
```

为什么？为什么通过控制台激活时它可以工作，但通过功能激活时它不起作用？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:58:16.440

`$(document).ready(function() { .. })`简而言之`$(function() { .. })`，在 DOM 准备好后执行您的代码。

```
jQuery(document).ready(function() {

  function postAjaxCalls() {
    jQuery("[title]").tooltip(); 
    alert("this works great, tooltip not!");
    jQuery("select").selectbox();
  } 
  postAjaxCalls();

}); 
```

或简而言之

```
jQuery(function() {

  function postAjaxCalls() {
    jQuery("[title]").tooltip(); 
    alert("this works great, tooltip not!");
    jQuery("select").selectbox();
  } 
  postAjaxCalls();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:58:36.007

您可能`postAjaxCalls`在 DOM 准备好之前调用。当你从控制台调用它时，DOM 就准备好了，所以它可以工作了。

试试这个：

```
$(function(){
    postAjaxCalls();
}); 
```

# xpath - 在 Selenium IDE 中，我可以在 type 命令中使用通配符吗？

> ID：11545468
> 
> 赞同：2
> 
> 时间：2012-07-18T15:56:48.610
> 
> 标签：xpath, selenium, ide

我是 Selenium IDE 的新手，这对我的测试非常有帮助，但我遇到了障碍。我试图在我公司的测试环境（电子商务公司）中输入一个虚假的信用卡号，但每次返回该页面时 XPath 都会发生变化。路径如下。

```
//*[@id="dwfrm_paymentinstruments_creditcards_newcreditcard_number_d0hnrobkriuu"] 
```

`d0hnrobkriuu`是每次变化的内容。我尝试了以下替代方案 -

```
//*[@id="dwfrm_paymentinstruments_creditcards_newcreditcard_number_*"]
//*[@id="dwfrm_paymentinstruments_creditcards_newcreditcard_number_[a-zA-Z0-9]"] 
```

根据我发现的各种 selenium 文档，这些 globbing 技术应该可以工作，但事实并非如此。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:00:46.653

不是这样的，不。但是，使用 XPath[`contains()`](http://www.w3.org/TR/xpath/#function-contains)函数，您可以

```
//*[contains(@id, "dwfrm_paymentinstruments_creditcards_newcreditcard_number_")] 
```

# xml - 如何使用 .htaccess 将 .xml 扩展名添加到特定 URI

> ID：11545470
> 
> 赞同：1
> 
> 时间：2012-07-18T15:56:54.363
> 
> 标签：xml, .htaccess, expressionengine

我现在有一个 URL www.mydomain.com/feed/my_feed/ 它写出一个 xml 文档以供第三方读取。XML 文档是动态生成的（我使用的是 ExpressionEngine）。

第三方要求它必须具有 .xml 扩展名才能读取。

有什么想法可以设置 .htaccess 规则以仅对该特定 uri 使用 .xml 文件扩展名吗？

大多数教程都涉及删除文件扩展名，将文件扩展名添加到所有 url，这对 .htaccess 菜鸟没有帮助。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:23:18.260

我之前在使用 .htaccess 重写 URL 的 .xml 时遇到了麻烦。通常，当我需要这样做时，我只会使用 Pages 模块并将`/something/something.xml`其作为 Pages URI。然后，您可以将页面指向您想要的任何模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:45:29.510

因此，如果第三方使用的 URL 是：`www.mydomain.com/feed/my_feed.xml`

您想将其添加到文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^/?feed/my_feed.xml$ /feed/my_feed/ [L] 
```

# sharepoint - 字母范围之间的 SharePoint 搜索

> ID：11545471
> 
> 赞同：1
> 
> 时间：2012-07-18T15:56:56.033
> 
> 标签：sharepoint, search, sharepoint-2010, search-engine

假设项目；我逐页扫描了整个字典，并以 PDF 格式存储在 SharePoint 上。每页是一个 pdf 文件。

每个 PDF 都包含关键字，其中包括字典顺序标签，这些标签告诉我们页面上列出了哪些单词。例如，ABE-GRE 将包括像“吹牛”这样的词，因为按字母顺序它位于 ABE 和 GRE 之间。

当我搜索“吹牛”时，如何让 SharePoint 搜索返回 ABE-GRE 页面？

# matlab - 比较单元阵列与混合数据类型matlab

> ID：11545475
> 
> 赞同：2
> 
> 时间：2012-07-18T15:57:09.310
> 
> 标签：matlab

我有两个单元格数组，它们是混合字符串/整数类型，例如：

```
a={'a';1;'b'}
b={'b';1} 
```

我需要比较它们并找到 B 中元素的 A 中的索引。因此，在这种情况下，它将是 3 和 2（因为 'b' 在 A 中的第 3 位）。

我会这样做`find(strcmpi(b,a))`，但我必须先将两个单元格数组都转换为字符串数组，这不是很有效（因为两个数组都很长）。

我已经考虑过`setxor`，`ismember`但我还没有弄清楚如何使用它们。

像这样的问题的“matlab”方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:07:36.477

使用循环，或使用 arrayfun 将其包装在一起：

```
a={'a';1;'b'}
b={'b';1}
result = arrayfun(@(x) find(arrayfun(@(y) isequal(x,y),a),1,'first'),b) 
```

# javascript - 从 iframe 调用父函数，然后更新 iframe 表单值

> ID：11545476
> 
> 赞同：0
> 
> 时间：2012-07-18T15:57:12.780
> 
> 标签：javascript, jquery, html, iframe

我在父页面中有一个需要由 iframe 调用的函数，然后此函数会更新 iframe 中的表单值。我可以正常调用该函数，但表单值更新不起作用

我设置了一个警报以查看父函数是否可以看到输入值，但返回未定义，所以我假设我没有正确访问 ID

这是我的代码尝试在分成三个文本框的字段中自动初始化今天的日期

主要js函数

```
 window.autoPartialDateBox = function(htmlID) {
if ( !jQuery('#'+htmlID+"_mm").val() && !jQuery('#'+htmlID+"_dd").val() && !jQuery('#'+htmlID+"_yy").val() ) {
            var myDate = new Date();    
            jQuery('#'+htmlID+"_mm").val(myDate.getMonth()+1 );                      
            jQuery('#'+htmlID+"_dd").val(myDate.getDate() ); 
            jQuery('#'+htmlID+"_yy").val(myDate.getFullYear() );               
} } 
```

框架

```
 <script type="text/javascript"> 
   $(function () {
        // this will populate the partial date box          
           $("#someElement").live("change", function() {
               if ($(this).val() == 'trigger') {
                window.top.autoPartialDateBox('partial_date_box');
               }

           });

        });
    </script>

Action <select name="someElement" id="someElement" class="valid">
    <option value="" selected="">Select an option</option> 
    <option value="trigger">Trigger</option>            
</select>

Day <input name="stop_dd_2747_mm" type="text" id="stop_dd_2747_mm">
Month <input name="stop_dd_2747_dd" type="text" id="stop_dd_2747_dd" >
Year <input name="stop_dd_2747_yy" type="text" id="stop_dd_2747_yy" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:13:50.123

如果您认为问题在于访问 ID，可能是因为您试图在 jQuery 选择器中“构建”ID。我认为更好的解决方案是将函数传递给父元素，然后遍历节点树以找到您的输入字段。

功能：

```
 window.autoPartialDateBox = function(parentElm) {  

     $nodes = jQuery(parentElm).children('input[type=text]');

     if (!$nodes[0].val() && !$nodes[1].val() && !$nodes[2].val()) {

        var myDate = new Date();    
        $nodes[0].val(myDate.getMonth()+1 );                      
        $nodes[1].val(myDate.getDate() ); 
        $nodes[2].val(myDate.getFullYear() );               
  } 
 } 
```

为您的输入字段添加一个容器：

```
<div id="input_container">
   Day <input name="stop_dd_2747_mm" type="text" id="stop_dd_2747_mm">
   Month <input name="stop_dd_2747_dd" type="text" id="stop_dd_2747_dd" >
   Year <input name="stop_dd_2747_yy" type="text" id="stop_dd_2747_yy" >
</div> 
```

我还没有测试过，但这是我会做的一般方法。如果您尝试在选择器中构建字符串，我不知道 jQuery 的行为如何。这似乎不是问题，但你永远不知道。

**编辑**在 jQuery 命名空间中声明的“节点”

# c# - MongoDb 更改数组元素的顺序

> ID：11545479
> 
> 赞同：2
> 
> 时间：2012-07-18T15:57:18.387
> 
> 标签：c#, mongodb, mongodb-.net-driver

我在 MongoDb 地理空间索引方面做了很多工作，现在我正在用官方的 10gen C Sharp 驱动程序替换旧的 NoRM 框架。我遇到的问题是，对于由 NoRM 处理的现有数据，坐标的顺序相反 [y,x]，而且似乎官方驱动程序不喜欢它。

所以我对于现有数据我有这个结构：

```
{
   "Coordinates" [: 
   {
      "Longitude" : -85.68216, 
      "Latitude" : 38.221452          
   },
   //.. more coordinates
   ]
} 
```

所以我的问题是，如何修改数组中所有元素的顺序，使其看起来像：

```
{
   "Coordinates" [: 
   {
      "Latitude" : 38.221452,  
      "Longitude" : -85.68216               
   },
   //.. more coordinates
   ]
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:58:18.410

如果要颠倒顺序，则需要遍历整个集合并以正确的格式重写每个文档。这里有一些 JavaScript 代码可以做到这一点：随意调味。

```
XDB = db.locations;
var iter = XDB.find()

do {
    var doc = iter.next();
    var newdoc = {};
    newdoc.Coordinates = [];
    for ( var k in doc.Coordinates ) {
        var newpair = { Latitude: doc.Coordinates[k].Latitude, 
                        Longitude: doc.Coordinates[k].Longitude } ;
        newdoc.Coordinates.push(newpair);
    }
    XDB.update({_id: doc._id}, newdoc );
} while ( iter.hasNext() ); 
```

# php - 以导航链接框为中心的箭头悬停效果

> ID：11545482
> 
> 赞同：0
> 
> 时间：2012-07-18T15:57:25.607
> 
> 标签：php, html, css

我有一个我在 Wordpress 中构建的网站，它的链接周围有一个灰色框，当你将鼠标悬停在它们上面时，它们会变成蓝色，并且一个箭头会从框中掉下来。我的问题是它们是绝对放置的，所以如果导航链接更长或更短，箭头不会以导航框为中心。我能够用纯CSS实现效果。这是我的代码。

HTML

```
<div id="nav">

            <div class="navwrapper">
                    <div class="main-nav">
                        <?php bones_main_nav(); // Adjust using Menus in Wordpress Admin ?>
                    </div>
                    <div class="clearfix"></div>
            </div>
        </div> 
```

CSS

```
.main-nav ul a{
    color: #0f0f0f;
    text-decoration: none;
}

.main-nav ul li a{
    color: #0f0f0f;
    text-decoration: none;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    background-color: #efefef;
    padding:  10px;
}

.main-nav ul a:hover{
    color: #fff;
    text-decoration: none;
    background-color: #5dbbe0;
     -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    position: relative;
}

.main-nav ul li {
    float: left;
    margin:  25px 0 0 15px;
}

.main-nav ul a:hover:after{  
    content: ' ';  
    position: absolute;  
    width: 0;  
    height: 0;  
    left: 18px;  
    top: 36px;
    text-align: center;
    border-width:10px 10px 0;
    border-style: solid;  
    border-color: #5dbbe0 transparent;  
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:18:45.333

您当前使用三角形的问题之一是您将**块元素**嵌套在无效的 CSS内**联元素中。**（你可以在块元素中嵌套内联元素）

由于我们必须使用**display: block** ; 为了形成 CSS3 三角形，我们还可以将**display:block**添加到父元素。

我还将三角形的位置更改为**position:relative**因为我想将它相对于锚元素定位

最后使用**margin:0 auto;** 水平对齐三角形。我假设您对每个锚点使用相同的高度，因为这是您的导航，所以最后使用**底部：-20px**相应地调整三角形的垂直位置

在此处查看演示：http: [//jsfiddle.net/radialglo/Am48P/7/](http://jsfiddle.net/radialglo/Am48P/7/)

出于演示目的，我将您**的 a:hover:after**更改为**a:after 。**

```
    .main-nav ul a{
        颜色：#0f0f0f；
        文字装饰：无；
    }

    .main-nav ul li a{
        颜色：#0f0f0f；
        文字装饰：无；
        -webkit-border-radius：10px；
        -moz-边界半径：10px；
        边框半径：10px；
        背景颜色：#efefef；
        填充：10px；
        显示：块；
    }

    .main-nav ul a:hover{
        颜色：#fff;
        文字装饰：无；
        背景颜色：#5dbbe0；
         -webkit-border-radius：10px；
        -moz-边界半径：10px；
        边框半径：10px；
        位置：相对；
    }

    .main-nav ul li {
        向左飘浮;
        边距：25px 0 0 15px；
        列表样式：无；
    }

    .main-nav ul a:after {  
        内容： ' ';  
        /* 位置：绝对；*/
        位置：相对；
        底部：-20px；
        /*根据需要调整垂直高度*/
        宽度：0；  
        高度：0；  
        /* 左：18px;*/  
        /*顶部：36px；*/
        文本对齐：居中；
        边框宽度：10px 10px 0；
        边框样式：实心；  
        边框颜色：#5dbbe0 透明；  
        边距：0 自动；
        显示：块；
    }​

```

# r - 带有 ddply 的面板中的滞后变量

> ID：11545483
> 
> 赞同：1
> 
> 时间：2012-07-18T15:57:29.430
> 
> 标签：r, panel, plyr, data.table, lag

我试图在本质上是面板数据集的情况下产生精度变化（基于估计的置信区间）。

所以作为一个简单的例子，这是我编写的函数并将其应用于一个无意义的例子......

```
precision.gain <- function(x){
  x        <- ts(x, start=x[1])
  x.length <- seq(length = length(x))
  x.lag    <- lag(x, -1)
  x.gain   <- ((x - x.lag) * 100) / x
  x.gain   <- c(NA, x.gain)
  x.gain
}
t <- data.frame(x=1:20)
t <- cbind(t, precision.gain(t$x))
t
x precision.gain(t$x)
1   1                  NA
2   2           50.000000
3   3           33.333333
4   4           25.000000
5   5           20.000000 
6   6           16.666667
7   7           14.285714
8   8           12.500000
9   9           11.111111
10 10           10.000000
11 11            9.090909
12 12            8.333333
13 13            7.692308
14 14            7.142857
15 15            6.666667
16 16            6.250000
17 17            5.882353
18 18            5.555556
19 19            5.263158
20 20            5.000000 
```

这很有效，很好，但我遇到了麻烦（或更可能是误解）如何（t？）将它应用到我的数据框，其中的样本是....

```
subset(results.normal.sum, n2 > 20 & n2 < 30, select=c(sd2, n2, ci.width1))
    sd2 n2 ci.width1
11  0.4 22 0.6528714
12  0.4 24 0.6167015
13  0.4 26 0.5895856
14  0.4 28 0.5658297
46  0.6 22 0.6529126
47  0.6 24 0.6196544
48  0.6 26 0.5922061
49  0.6 28 0.5642688
81  0.8 22 0.6513849
82  0.8 24 0.6194468
83  0.8 26 0.5923094
84  0.8 28 0.5636396
116 1.0 22 0.6522927
117 1.0 24 0.6191043
118 1.0 26 0.5900129
119 1.0 28 0.5652429
151 1.2 22 0.6518072
152 1.2 24 0.6193353
153 1.2 26 0.5892683
154 1.2 28 0.5632235
186 1.4 22 0.6527031
187 1.4 24 0.6191458
188 1.4 26 0.5899453
189 1.4 28 0.5640431
221 1.6 22 0.6521401
222 1.6 24 0.6191883
223 1.6 26 0.5893458
224 1.6 28 0.5637215
256 1.8 22 0.6512491
257 1.8 24 0.6180401
258 1.8 26 0.5905810
259 1.8 28 0.5647388
291 2.0 22 0.6515769
292 2.0 24 0.6183121
293 2.0 26 0.5896990
294 2.0 28 0.5663394 
```

我试过使用 Hadley Wickham 的 plyr 包中的 ddply() .....

```
ddply(results.normal.sum, .(sd2), precision.gain, x=ci.width1)
Error in .fun(piece, ...) : unused argument(s) (piece) 
```

直接使用 tapply() 我有点到了那里，但它没有返回可以是 cbind()....

```
> tapply(results.normal.sum$ci.width1, sd2, precision.gain)
$`0.4`
 [1]          NA -771.332292  -68.852635  -30.514545  -19.877447  -14.515380
 [7]  -11.147183   -9.282641   -7.680418   -6.836209   -5.954992   -5.865053
[13]   -4.599158   -4.198409   -4.155838   -3.529773   -3.590234   -3.432364
[19]   -2.899601   -3.092533   -2.721967   -2.506706   -2.498318   -2.321500
[25]   -2.299822   -2.187855   -2.116990   -1.896162   -1.853487   -1.604902
[31]   -2.194138   -1.473042   -1.710051   -1.701994   -1.417754

$`0.6`
 [1]          NA -756.196418  -68.222048  -30.566420  -19.216860  -15.162929
 [7]  -10.645899   -9.628775   -7.326799   -7.178820   -5.770681   -5.367216
[13]   -4.634938   -4.951049   -3.949776   -3.761633   -3.326209   -3.387764
[19]   -3.009317   -3.074398   -2.397660   -2.678573   -2.626077   -2.268373
[25]   -2.426720   -1.956498   -2.119986   -1.859410   -1.992678   -1.707448
[31]   -1.991583   -1.595951   -1.765913   -1.415065   -1.655725
.... 
```

我觉得我很亲密，但我想念或误解了一些东西。

[我在这里](https://stackoverflow.com/questions/11397771/r-data-table-grouping-for-lagged-regression)发现了一个类似的问题，但只是不理解提供的答案/解决方案。

提前感谢您的帮助，

松紧线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:38:56.853

如果我猜对了你需要什么，下面是一个`:=`利用`data.table`.

首先读取样本数据：

```
testData <- textConnection("sd2 n2 ci.width1
11  0.4 22 0.6528714
12  0.4 24 0.6167015
13  0.4 26 0.5895856
14  0.4 28 0.5658297
46  0.6 22 0.6529126
47  0.6 24 0.6196544
48  0.6 26 0.5922061
49  0.6 28 0.5642688
81  0.8 22 0.6513849
82  0.8 24 0.6194468
83  0.8 26 0.5923094
84  0.8 28 0.5636396
116 1.0 22 0.6522927
117 1.0 24 0.6191043
118 1.0 26 0.5900129
119 1.0 28 0.5652429
151 1.2 22 0.6518072
152 1.2 24 0.6193353
153 1.2 26 0.5892683
154 1.2 28 0.5632235
186 1.4 22 0.6527031
187 1.4 24 0.6191458
188 1.4 26 0.5899453
189 1.4 28 0.5640431
221 1.6 22 0.6521401
222 1.6 24 0.6191883
223 1.6 26 0.5893458
224 1.6 28 0.5637215
256 1.8 22 0.6512491
257 1.8 24 0.6180401
258 1.8 26 0.5905810
259 1.8 28 0.5647388
291 2.0 22 0.6515769
292 2.0 24 0.6183121
293 2.0 26 0.5896990
294 2.0 28 0.5663394") 
```

然后，将数据放入一个`data.table`和...

```
library(data.table)
dt <- data.table(read.table(testData, header = TRUE))
dt[, list(n2, ci.width1, prec.gain = precision.gain(ci.width1)), by = sd2] 
```

这是输出

```
> dt[, list(n2, ci.width1, prec.gain = precision.gain(ci.width1)), by = sd2]
   sd2 n2 ci.width1 prec.gain
   0.4 22 0.6528714        NA
   0.4 24 0.6167015 -5.865058
   0.4 26 0.5895856 -4.599146
   0.4 28 0.5658297 -4.198419
   0.6 22 0.6529126        NA
   0.6 24 0.6196544 -5.367218
   0.6 26 0.5922061 -4.634924
   0.6 28 0.5642688 -4.951062
   0.8 22 0.6513849        NA
   0.8 24 0.6194468 -5.155907
   0.8 26 0.5923094 -4.581626
   0.8 28 0.5636396 -5.086548
     1 22 0.6522927        NA
     1 24 0.6191043 -5.360712
     1 26 0.5900129 -4.930638
     1 28 0.5652429 -4.382187
   1.2 22 0.6518072        NA
   1.2 24 0.6193353 -5.243024
   1.2 26 0.5892683 -5.102430
   1.2 28 0.5632235 -4.624239
   1.4 22 0.6527031        NA
   1.4 24 0.6191458 -5.419935
   1.4 26 0.5899453 -4.949696
   1.4 28 0.5640431 -4.592238
   1.6 22 0.6521401        NA
   1.6 24 0.6191883 -5.321774
   1.6 26 0.5893458 -5.063666
   1.6 28 0.5637215 -4.545560
   1.8 22 0.6512491        NA
   1.8 24 0.6180401 -5.373276
   1.8 26 0.5905810 -4.649506
   1.8 28 0.5647388 -4.575956
     2 22 0.6515769        NA
     2 24 0.6183121 -5.379937
     2 26 0.5896990 -4.852153
     2 28 0.5663394 -4.124664
cn sd2 n2 ci.width1 prec.gain 
```

# c# - 如何使用 XDocument 在此 XML 文件中获取某个值？

> ID：11545488
> 
> 赞同：1
> 
> 时间：2012-07-18T15:57:48.040
> 
> 标签：c#, xml, linq, linq-to-xml

```
<item>
 <title>Lorem Ipsum</title>
 <media:group>
   <media:content url = "http://www.sample.com" rate = "0" />
   <media:content url = "http://www.sample1.com" rate = "1" />
   <media:content url = "http://www.sample2.com" rate = "2" />
 </media:group>
</item> 
```

我如何获得这个值：

> [http://www.sample2.com](http://www.sample2.com)？

我尝试使用此代码：

```
var query = from i in loadedData.Descendants("item")
 select new Site
 {
  Title = (string)i.Element("title"),
  Url = (string)i.Element(serv + "group").Elements(media + "content").Last()
 };
 site = query.ToList(); 
```

但 Url 的值为“”。我也有这个：

```
private static readonly XNamespace media = "http://www.sampleX.com/"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:33:50.550

您可以使用此 LINQ 查询：

```
var list = loadedData.Descendants("item")
                     .Select(e => new Site() 
                                  {
                                   Title = e.Element("title")
                                            .Value, 
                                   Url = e.Descendants(media + "content")
                                          .Last()
                                          .Attribute("url")
                                          .Value
                                  })
                     .ToList(); 
```

# ghostscript - PostScript 到 PDF 转换/打印缓慢问题 [GhostScript]

> ID：11545496
> 
> 赞同：0
> 
> 时间：2012-07-18T15:58:27.163
> 
> 标签：ghostscript, postscript

我有几个带有网格线和背景阴影覆盖的大型 PDF 报告（>500 页），这些报告是我在批处理中使用 GhostScript 的 ps2pdf 从 postscript 转换而来的。创建的 PDF 在 Adob​​e Reader 中看起来很完美。

但是，当我从 Adob​​e Reader 打印 PDF 时，我会从我们的戴尔激光打印机获得大约 4-5 ppm，每页之间有 10 多秒的长时间停顿。从另一个专有过程（不是 GhostScript）生成的相同报告 PDF 在同一台打印机上产生 25+ ppm 的快速。

两者上的 PDF 文件大小几乎相同，每个大约 1.5 MB，但是当我将两个版本的 PDF 打印到文件（即 postscript）时，GhostScript 生成的 PDF postscript 输出大约是另一个的 5 倍（2.7 mil 行 vs 675K) 或 48 MB vs 9 MB。查看 GhostScript 输出，我看到网格线/阴影的背景图案（由“/PatternType1”标签引用）在整个文件中定义了数千次，而在其他 PDF 输出中只定义了一次。我相信这种不断重新定义背景图案是让打印机陷入困境的原因。

是否有开关/设置强制 GhostScript 只定义一次模式/图像？我试过使用 -r 和 -dPdfsettings=/print 开关，但没有任何缓解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:22:51.603

模式（实际上是图像）和许多其他构造应该只发出一次，你不需要做任何事情来发生这种情况。

但是，表单不会被重用，这可能是您实际问题的根源。正如 Kurt Pfiefle 上面所说，如果没有看到导致问题的文件，就无法判断。

[您可以在http://bubgs.ghostscript.com](http://bubgs.ghostscript.com)提出错误报告，这将使您有机会附加文件。如果您这样做，请*不要*附加超过 500 页的文件，如果您能抽出时间创建一个显示相同大小膨胀的较小文件，我们将不胜感激。

如果没有看到 PostScript 文件，我根本无法提出任何建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T08:51:06.387

我现在查看了源 PostScript，并且怀疑问题确实是表单的使用。这是 PostScript 中一个相对不寻常的领域，更不寻常的是看到它实际上被正确使用。

由于它很少使用，我们没有任何动力去实现在输出 PDF 中保留表单的功能，这就是导致 PDF 大的原因。在表单中定义模式的方式也无济于事。您可以尝试单独定义模式，至少这样 pdfwrite 可能能够检测到多个模式的使用并且只发出一次（模式包含一个图像掩码，所以这可能是值得的）。

这种结构：

```
GS C20 setpattern 384 151 32 1024 RF GR
GS C20 setpattern 384 1175 32 1024 RF GR 
```

效率低下，你不断重新实例化模式，这很昂贵，这个：

```
GS C20 setpattern 
384 151 32 1024 RF
384 1175 32 1024 RF 
GR 
```

更高效

无论如何，您无法使用 pdfwrite 来真正减少此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:25:13.997

*'[...] 当我将两个版本的 PDF 打印到文件（即 postscript）时，GhostScript 生成的 PDF postscript 输出大约是其他版本的 5 倍（270 万行 vs 675K）或 48 MB vs 9 MB 。*

*   **您使用哪个版本**的 Ghostscript？（尝试`gs -v`或`gswin32c.exe -v`或`gswin64c.exe -v`找出。）

*   **您究竟如何**“打印以归档”PDF？（哪个操作系统平台，哪个应用程序，哪种设置？）

还，`ps2pdf`可能不是批处理的最佳选择。无论如何，它是一个小的 shell/批处理脚本，它在内部调用了一个 Ghostscript 命令。

直接使用 Ghostscript 可以让您更好地控制结果（尽管它的命令行“可用性”相当不方便和尴尬——这就是为什么像这样的工具`ps2pdf`如此受欢迎......）。

最后，如果不直接访问您的 PS 输入样本之一进行测试（以及专有转换器生成的 PDF），就不容易提出好的建议。

# django - 在模板中的 Django 呈现表单字段之前过滤结果

> ID：11545501
> 
> 赞同：1
> 
> 时间：2012-07-18T15:58:40.600
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我试图在一个站点上创建一系列表单，这些表单都使用相同的区域外键。这是区域模型：

```
class Region(models.Model):
    region_name = short_varchar_r()
    member = models.BooleanField()
    organization = models.BooleanField()
    calendar = models.BooleanField()
    college = models.BooleanField()
    def __unicode__(self):
        return self.region_name 
```

网站上有 4 个表格用于选择区域。每个都需要呈现一个仅包含特定于该表单的区域的选择字段。IE：Member 只需要将 Member 设置为 True 的区域。

这是会员表格：

```
class NewsletterRequest(models.Model):
    member_type = short_varchar_r(choices=MEMBER_TYPE)
    email = models.EmailField(max_length=75)
    region = models.ForeignKey('Region')
    def __unicode__(self):
        return self.email 
```

和大学领域

```
class College(models.Model):
    type = models.ForeignKey('CollegeType', null=True, blank=True)
    gender = short_varchar_o(choices=GENDER_CHOICE)
    ...
    region = models.ForeignKey(
                    'Region',
                    null=True,
                    blank=True,
                    related_name='region'
                ) 
```

非常感谢。

编辑：将区域模型固定为 (models.Model) 而不是 (Models.Model)。问题仍然存在。

# macos - Mac Excel 2011 - 具有正态分布的直方图

> ID：11545505
> 
> 赞同：3
> 
> 时间：2012-07-18T15:59:01.447
> 
> 标签：macos, excel, histogram

假设我有一个值列表，并且我已经将它们分组以制作直方图。

由于 Excel 没有直方图，我使用我开发的组制作了条形图。具体来说，我有频率`2 6 12 10 2`，它会产生您在下面看到的条形图。

接下来，我想在这个直方图上添加一个平均值为 0.136、标准差为 0.497 的正态分布（线图）。我怎样才能在excel中做到这一点？我需要轴对齐，使其占据条形图的宽度。否则，你会得到我附上的东西。

但是...法线应该覆盖在条形图上。我怎样才能得到这个效果？

![在此处输入图像描述](../Images/45a3bdc7218546b5818aff9753c298f8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T00:42:10.373

这个答案有两个主要部分：

首先，我对分组数据进行了逆向工程，以得出该规模的适当均值和标准差。

其次，我使用了一些图表技巧来使正态分布曲线在叠加在柱形图上时看起来正确。我为此使用了 Excel 2007；希望您的版本中提供相同的选项。

* * *

# 第 1 部分：逆向工程

![在此处输入图像描述](../Images/fff3d74765ca53edb879729451495982.png)

B列公式为：

> 最后一点 =MAX(A2:A6)
> 
> **平均值**=SUMPRODUCT(B2:B6,A2:A6)/SUM(B2:B6)
> 
> *E* (x^2f) =SUMPRODUCT(A2:A6^2,B2:B6)
> 
> *E* (xf)^2 =SUMPRODUCT(A2:A6,B2:B6)^2
> 
> *E* (f) =总和(B2:B6)
> 
> 方差=B10-B11/B12
> 
> **标准差=SQRT(B13/(B12-1) **)****

 **# 第 2 部分：图表技巧

## 数据表：

`Column D`只是一个增量计数器。这将是正态分布曲线中数据点的数量。

> E2 =D2/$B$8 等。
> 
> F2 =NORMDIST(E2,$B$9,$B$14,FALSE) 等。

## 图表：

现在，将列添加`E:F`到图表中。你需要按摩一些东西：

*   将系列更改为 XY 图。这可能需要对图表系列进行一些编辑，以强制单个系列使用您想要的 X 和 Y 值。
*   更改系列以使用辅助轴（X 和 Y）。
*   将次要 X 轴范围更改为 0.5-5.5（即柱形图类别值两侧的 0.5）。这将有效地对齐主要和次要 X 轴。
*   将辅助 Y 轴范围更改为 0-1
*   格式化 XY 系列外观以适应口味（我建议删除值标记）。

到目前为止的结果：

![在此处输入图像描述](../Images/2c5eb7ac70568699c853eec39d660f53.png)

最后，您可以删除辅助轴上的刻度线和标签以清理外观。

*后记：感谢[John Peltier](http://peltiertech.com/ "约翰·珀尔帖")多年来提供的无数图表灵感。***

# html - 画布绘图..奇怪的行为

> ID：11545507
> 
> 赞同：1
> 
> 时间：2012-07-18T15:59:08.370
> 
> 标签：html, google-chrome, canvas, draw

我对画布元素有疑问。代码真的很简单，但是如果我从我的标签切换到另一个标签，然后我返回后，会发生什么如图所示。有人对此有解释吗？

```
var canvas = $('#image')[0];
canvas.height = 785;
canvas.width = 448;

var img = new Image();
img.onload = function() {
    var context = canvas.getContext('2d');
    context.drawImage(img, 0, 0);
}; 
```

编辑：我使用的是chrome，firefox不会发生这种情况..

[会发生什么 http://matteociman.altervista.org/images/behaviour.png](http://matteociman.altervista.org/images/behaviour.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:21:31.220

这是 Google Chrome 稳定版中引入的一个相对较新的错误。它也在开发人员版本中（并且已经持续了数周）如果您打开开发人员控制台，情况会变得更糟。

上次我加载夜间它也坏了，但他们绝对没有问题。

目前，稍微调整窗口大小或在 about:flags 中禁用硬件加速将解决问题。

这个错误可能是相关的，我只在使用 AMD 显卡的机器上遇到过这个问题：[http ://code.google.com/p/chromium/issues/detail?id=125246](http://code.google.com/p/chromium/issues/detail?id=125246)

# c++ - C++：如何在使用 libcurl 的 Windows 中运行可执行文件？

> ID：11545510
> 
> 赞同：0
> 
> 时间：2012-07-18T15:59:13.170
> 
> 标签：c++, windows, cygwin, libcurl

我编写了一个实用程序来使用 libcurl 从 Web 上获取信息，并在 Windows 7 机器上使用 Cygwin 编写和编译。我希望能够在 Windows 环境中运行可执行文件，但是当我这样做时，我收到错误“程序无法启动，因为您的计算机中缺少 cygcurl-4.dll。” 我不确定如何解决这个问题，因为即使我为 Windows 安装了 libcurl，它似乎也在专门寻找 Cygwin 版本。理想情况下，我想弄清楚如何使程序自包含，这样它就可以运行，而无需人们自己安装任何库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:02:31.160

“程序无法启动，因为您的计算机中缺少 cygcurl-4.dll。”
您只需将 cygcurl-4.dll 与您的可执行文件一起分发即可解决此问题（将 dll 放入同一文件夹中）。

它应该位于 Cygwin 的二进制文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:32:20.343

为了使您的程序自包含，您应该尝试在没有 cygwin 的情况下将 Windows 上的 libcurl 编译为静态库（.lib 文件）。[有人说是可行的](https://www.google.com/search?q=libcurl%20windows)。如果你不走运，也许你应该尝试[一些其他类似的库](http://curl.haxx.se/libcurl/competitors.html)。

# iphone - UIImagePickerController 依次拍摄 5 张图像后终止应用程序

> ID：11545511
> 
> 赞同：0
> 
> 时间：2012-07-18T15:59:14.327
> 
> 标签：iphone, ios, ios5, ios4, uipickerviewcontroller

```
 //This method Launches the picker to take the picture from camera. 
-(IBAction)takeyouphoto:(id)sender
{
     if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
        {
            // Create image picker controller

            UIImagePickerController *imagePicker2 = [[UIImagePickerController alloc] init];

            // Set source to the camera
            imagePicker2.sourceType =  UIImagePickerControllerSourceTypeCamera;

            // Delegate is self
            imagePicker2.delegate = self;
            // Allow editing of image ?
            imagePicker2.allowsEditing= NO;

            // Show image picker
            [self presentModalViewController:imagePicker2 animated:YES];

        }
}
//This is ImagePicker Delegate method. 
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 @try {
        NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
 if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) 
        {
            UIImage *resultimage=nil;
            //I am using iOS5, so we can not use NSAutoreleasePool
             resultimage=[info objectForKey:UIImagePickerControllerOriginalImage] ;

            //This Launches the HUD (Activity Indicator) because ImagePicker ususally takes 5  
             //seconds to launch image.
            [self showHUD:resultimage];
         }
    }
       [picker dismissModalViewControllerAnimated:YES];
}
-(void)showHUD:(UIImage *)resultimage
{
    [[Singleton sharedmysingleton] stoptimer];
    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];

    HUD.delegate = self;
    HUD.labelText = @"Loading Image";
    //HUD.detailsLabelText=@"Loading";
    //Below call on showWhileExecuting of the MBProgressHuD class has its own NSAutoreleasePool
    //Defined in MGProgressHUD class. it also runs the method showimageincell; in separate 
    //thread.

    [HUD showWhileExecuting:@selector(showimagesincell:) onTarget:self withObject:resultimage animated:YES];

}
-(void)showimagesincell:(UIImage *)image
{

    appDelegate.tabbarcontroller.tabBar.userInteractionEnabled=NO;
    NSError *error;

     UIImage *resultImage=[self scale:image toSize:image.size];

    //UIImage *resultImage = [[UIImage alloc] initWithCGImage:imgRefCrop scale:1.0 orientation:resultimage.imageOrientation];

    //resultimage.imageOrientation
    NSData *imagedata=UIImageJPEGRepresentation(resultImage, 0.7);//(resultImage);

    UIImage *smallimage=[self scale:image toSize:CGSizeMake(100, 100)];
    NSData *smallimagedata=UIImageJPEGRepresentation(smallimage, 0.7);

    /* NSString *imagetypeid=[Fetchsavefromcoredata getImagenameandImageidfromdatabase:@"Mobile_ImageType" attributename:@"imageType" predicate:imagetypetxtfield.text];

     //write image to document directory
     NSString *localImagedir=[photodirpath stringByAppendingPathComponent:selectedvinnumber];
     NSString *datetime=[Singleton imagedateandtime];
     NSString *imagename=[NSString stringWithFormat:@"%@_%@.png",imagetypeid,datetime];
     NSString *localImagePath=[localImagedir stringByAppendingPathComponent:imagename];
     [imagedata writeToFile:localImagePath atomically:YES];*/

    [self performSelectorOnMainThread:@selector(updatetableview) withObject:nil waitUntilDone:NO];
}

-(void)updatetableview
{
    [[Singleton sharedmysingleton] starttimer];
    [self viewWillAppear:YES];
}

-(UIImage *)scale:(UIImage *)image toSize:(CGSize)size
{
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return scaledImage;
}

//Above is all my code, I have tried to find it on diffrent forums but I have not fixed it yet.  
//Any help will be appreciated. Thanks in advance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:36:47.590

通过将 UIIMagePickerController 委托方法返回的图像保存到 @autoreleasepool（对于 iOS5）中来解决白屏问题。它解决了问题，我们不能在 ARC 代码中使用 NSAutoreleasePool。

这里是 didFinishPickingMediaWithInfo: 委托方法中的代码行

```
UIImage *resultimage=nil;
@autoreleasepool
{
          //I am using iOS5, so we can not use NSAutoreleasePool
         resultimage=[info objectForKey:UIImagePickerControllerOriginalImage] ;

} 
```

实现@autoreleasepool后的UIImagePickerController委托方法下方

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 @try {
        NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
 if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) 
        {
            UIImage *resultimage=nil;
            @autoreleasepool
           {
              //I am using iOS5, so we can not use NSAutoreleasePool
              resultimage=[info objectForKey:UIImagePickerControllerOriginalImage] ;
           }

            //This Launches the HUD (Activity Indicator) because ImagePicker ususally takes 5  
             //seconds to launch image.
            [self showHUD:resultimage];
         }
    }
       [picker dismissModalViewControllerAnimated:YES];
} 
```

# jquery - 在外部单击时隐藏 div

> ID：11545518
> 
> 赞同：20
> 
> 时间：2012-07-18T15:59:35.590
> 
> 标签：jquery, html, onclick, hide

这个问题已被多次询问，但似乎没有一个答案对我有用。

div的css如下：

```
#info{
  display: none;
  position: fixed;
  z-index: 500;
  height: 50%;
  width: 60%;
  overflow: auto;
  background: rgba(187, 187, 187, .8);
} 
```

我尝试使用以下代码：

```
$("#info").click(function(e){
  e.stopPropagation();
});

$(document).click(function(){
  $("#info").hide();
}); 
```

以及这段代码：

```
$(document).mouseup(function (e){
    var container = $("#info");

    if (container.has(e.target).length === 0) {
        container.hide();
    }
}); 
```

然而，每当我点击 div 它也会消失，不知道为什么，但确实如此。
还有什么可能有用的吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-18T16:01:56.313

正如您的目标一样`id=info`，您可以尝试：

```
$(document).click(function(e) {

  // check that your clicked
  // element has no id=info

  if( e.target.id != 'info') {
    $("#info").hide();
  }
}); 
```

你也可以试试：

```
$(document).click(function() {

  if( this.id != 'info') {
    $("#info").hide();
  }

}); 
```

### 根据评论

```
$(document).click(function(e) {

    // check that your clicked
    // element has no id=info
    // and is not child of info
    if (e.target.id != 'info' && !$('#info').find(e.target).length) {
        $("#info").hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-19T17:14:46.340

为确保您的解决方案也适用于 iPad，您需要改用以下函数触发器：

```
$(document).on("mousedown touchstart",function(e){
  var $info = $('#info');
  if (!$info.is(e.target) && $info.has(e.target).length === 0) {
    $info.hide();
  }
}); 
```

同样，如果您想掩盖 mouseup，请添加“touchend”：

```
$(document).on("mouseup touchend",function(e){
  ...
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T16:04:26.543

将`onclick`事件处理程序附加到`document`对象：

```
$(document).click(function(e) {   
    if(e.target.id != 'info') {
        $("#info").hide();   
    } 
}); 
```

演示：http: [//jsfiddle.net/aUjRG/](http://jsfiddle.net/aUjRG/)

这是一个纯 JavaScript 的解决方案，可以帮助您更好地理解它发生了什么：

```
function hideInfo(){
    if(window.event.srcElement.id != 'info'){
        document.getElementById('info').style.display = 'none';
    }
}

document.onclick = hideInfo; 
```

演示：http: [//jsfiddle.net/mmzc8/](http://jsfiddle.net/mmzc8/)

两种解决方案都将检查用户单击的位置是否在 ID 为 的元素上`info`。假设用户没有点击该`info`元素，则隐藏该`info`元素。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-16T02:35:44.643

试试这个代码，这对我来说是最好的。

```
jQuery('.button_show_container').click(function(e) {
    jQuery('.container').slideToggle('fast'); 
    e.stopPropagation();
});

jQuery(document).click(function() {
        jQuery('.container').slideUp('fast');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T19:22:57.133

您可以添加一个类，仅用于检查鼠标单击该特定 div 或该 div 元素中的任何是否单击。

```
$(document).click(function(e){            
    if ( !$(e.target).hasClass("[class name for check]") &&
         $("[element class or id]").css("display")=="block" ) {
            //...code if clicked out side div
    }
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-09-21T11:09:25.470

尝试以下解决方案。它甚至可以递归工作：

```
$(document).mouseup(function(e) 
{
    var container = $("YOUR CONTAINER SELECTOR");

    // if the target of the click isn't the container nor a descendant of the container
    if (!container.is(e.target) && container.has(e.target).length === 0) 
    {
        container.hide();
    }
}); 
```

参考 - [https://stackoverflow.com/a/7385673/3910232](https://stackoverflow.com/a/7385673/3910232)

# asp.net - 如何找出从非托管代码中调用属性的位置

> ID：11545519
> 
> 赞同：0
> 
> 时间：2012-07-18T15:59:37.993
> 
> 标签：asp.net, reportviewer, unmanaged, callstack

我有一个绑定到数据源的 MS ReportViewer 报告，它正在请求它不应该的属性。我检查了报告上的所有字段，但找不到任何使用它的地方。

在属性上放置一个断点表明它肯定被调用了，但我无法找到 ReportViewer 是从哪里进行调用的。

****有没有办法找出这个属性是从哪里调用的？**

这是我到目前为止检查的内容：

![在此处输入图像描述](../Images/0033109a126899f9dcc46ff9456ee950.png)

堆栈跟踪：显示托管代码，检查反汇编但看不到任何明显的东西。

![在此处输入图像描述](../Images/06011206e711fab0d5378afe4ea742fa.png)

调用层次结构显示了调用该属性的所有位置——报告中没有一个位置。

**更新：**

尝试了 n8wrl 的抛出异常的建议，但堆栈仍在非托管代码上。

![在此处输入图像描述](../Images/47deaab75b99670d4f9b19c165e8e32d.png)

**更新 2**

我还尝试添加 Xml 和 Script 忽略标签，以防对象在某处被序列化但不起作用（除非它们不是忽略序列化的正确标签？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:29:09.730

好的，我想出了一个解决方案。我认为这与序列化有关，所以我将数据源传递给 System.Web.Script.Serialization.JavaScriptSerializer。

在序列化对象时，我发现了导致代码爆炸的所有属性。我在这些属性中添加了 [ScriptIgnore] 标记，以阻止它们在未使用时开始序列化。

```
System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();

serializer.RecursionLimit = int.MaxValue;

object o = serializer.Serialize(base.CurrentOrder); 
```

# windows-phone-7 - ListBoxItem 中按钮的按下状态未触发

> ID：11545520
> 
> 赞同：0
> 
> 时间：2012-07-18T15:59:41.607
> 
> 标签：windows-phone-7

我在列表框上有一个按钮。我在按钮上应用了样式。但是，它不会在 Pressed VisualState 上触发。我确信样式没有问题，因为另一个按钮在其他页面上使用了这种样式。有人会告诉我如何解决这个问题。谢谢。

以下是我在 App.xaml 页面上的风格：

```
 <Style x:Key="ButtonStyle1" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Padding" Value="10,3,10,5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="yellow"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}">
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" 
                                            Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" 
                                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                            Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

以下是在我的 control.xaml 页面上

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer Style="{StaticResource ScrollViewerStyle1}" Background="#00E23162">
            <ListBox x:Name="lstCall" HorizontalAlignment="Left" Margin="6,6,0,0"   VerticalAlignment="Top" Width="400" SelectionChanged="lstCall_SelectionChanged"    >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Height="65" Width="400">
                            <Image Source="{Binding Type}"  Width="35" Height="35"/>
                            <TextBlock  Width="240" Height="65" Text="{Binding summary}" TextWrapping="Wrap"
                                             Style="{StaticResource PhoneTextAccentStyle}"   />
                            <Button Width="135" Height="65" ClickMode="Press" Click="Action_Click" Style="{StaticResource ButtonStyle1}"
                                            Visibility="{Binding isVisibility, Converter={StaticResource VisibilityConverter}}">
                                <Button.Content>

                                    <TextBlock Width="85" Height="65" Text="{Binding ActionCaption}" 
                                                       Style="{StaticResource LabelStyle_20}"     />

                                </Button.Content>
                            </Button>
                        </StackPanel>                           

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:34:20.347

风格很好。由于在单击事件期间显示消息框，我没有看到颜色变化。

# php - 修改 PDO 连接

> ID：11545524
> 
> 赞同：0
> 
> 时间：2012-07-18T15:59:46.347
> 
> 标签：php, mysql, pdo, connection

我拥有的是一个登录表单，用户可以通过它的凭据访问，也可以作为访客访问，但我想做的是确定他如何尝试访问页面，并拥有不同的 PDO 连接对于每个案例。

我有一个 PHP 脚本调用`functions.php`它存储的连接，它看起来像这样：

```
//I have created the class Connection and it's setters and getters
$connection = new Connection($host,$user,$pw,$db); 
```

基本上，当用户以管理员身份登录以修改此连接时，我希望它是这样的：

```
if(admin){
   $connection->setUser('Admin');
   $connection->setPassword('Password');
} 
```

但是由于我在代码前面进行了查询以检查用户是否确实存在，并且我使用相同的连接但使用`guest`用户名和密码进行了该查询，它不会让我更改它。我不知道我是否必须`__destruct()`连接然后重新创建它，或者我应该怎么做。

# php - WordPress 直播到 MAMP

> ID：11545531
> 
> 赞同：0
> 
> 时间：2012-07-18T16:00:03.937
> 
> 标签：php, wordpress

我无法将 Wordpress 安装从我的实时服务器移动到 MAMP。到目前为止我有

*   将所有文件从实时服务器复制到我本地机器上的目录（htdocs）
*   从 PHPMyAdmin 备份数据库
*   [将http://www.mysite.com](http://www.mysite.com)替换为 (http://)localhost:8888/mysite/
*   将 /var/www/vhosts/mysite/httpdocs/ 替换为 /Applications/MAMP/htdocs/mysite/

我看到的是主页与那里的所有菜单和帖子一起使用，管理员似乎很好但是当我单击菜单项时，我收到一条错误消息：

> 在此服务器上未找到请求的 URL /index.php。

我无法通过主页。任何人都可以帮忙吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:16:23.197

我最好的猜测是你没有更新你的 .htaccess 文件。您需要更改您的 RewriteRules。

这（可能）是因为您的网站最初位于您的网络服务器的根目录中，而现在它位于您的 MAMP 中的一个子目录中。

# .net - 报表查看器中的“锚定”

> ID：11545532
> 
> 赞同：0
> 
> 时间：2012-07-18T16:00:19.950
> 
> 标签：.net, anchor, reportviewer

我有一个报告，其中包含一个显示在 8.5 x 14 页面上的矩阵。通常，我会将详细信息部分拉伸到 13 英寸（14 - 边距）并在最右侧显示页码。我还会在页眉中拉伸标题。但是，当我这样做时，我总是得到一个空页面，而且实际上我有足够的行来垂直拉伸两页。似乎我的矩阵和页面末尾之间的空白区域是这里的原因，因为如果我将详细信息部分缩小到仅矩阵定义，同时保持 14 英寸页面，我不会得到最后一页。

有没有办法让我把页码放在最右边，而没有多余的页面，如何？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:00:12.890

既然我发现了我想要的东西，我不妨把它写下来。有一个名为 ConsumeContainerWhiteSpace 的属性正是这样做的。

# java - 为什么 JNA 的这种简单使用会导致 Mac OS X 上的 fork() ？

> ID：11545533
> 
> 赞同：2
> 
> 时间：2012-07-18T16:00:21.610
> 
> 标签：java, macos, fork, jna

这是使用 JNA 库在 Java 中创建硬链接的简单用法：

```
import com.sun.jna.Library;
import com.sun.jna.Native;
import java.io.File;
import java.io.IOException;

public final class HardLink {

    private static final LibC LIBC = (LibC)Native.loadLibrary("c", LibC.class);

    private HardLink() {
    }

    public static void link(File src, File dest) throws IOException {
        if (LIBC.link(src.toString(), dest.toString()) != 0)
            throw new IOException(LIBC.strerror(Native.getLastError()));
    }

    public static void main(String[] args) throws Exception {
        System.out.println("Attempting to hardlink " + args[0] + " -> " + args[1]);
        HardLink.link(new File(args[0]), new File(args[1]));
    }

    private interface LibC extends Library {
        int link(String from, String to);
        String strerror(int errno);
    }
} 
```

当该程序使用 JNA 3.4.0 在 Mac OS X 10.7.4 (Lion) 上运行时，它确实可以工作，但由于某种原因，它正在执行`fork()`- 我这么说是因为它会导致 Java 图标有弹性的弹出窗口（出现）在任务栏中，命令栏中的“HardLink”作为程序名称。

我的问题是：为什么 JNA 做一个`fork()`（或者是它）？这个程序有问题吗？

注意：我对从 Java 硬链接文件的其他方式不感兴趣。这只是一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:53:05.390

除非您无头运行，否则 JNA 会加载一些 AWT 类。加载与 AWT 相关的类（包括 Swing）会导致 Java 进程出现在 OSX Dock 中。

Run your program with -Djava.awt.headless=true. This will prevent it from showing up in the OSX dock.

# java - GlassFish 如何成为 OSGi 容器？

> ID：11545535
> 
> 赞同：3
> 
> 时间：2012-07-18T16:00:26.517
> 
> 标签：java, jakarta-ee, glassfish, osgi

在研究 OSGi 和 OSGi 容器时，我偶然发现了[这个](https://stackoverflow.com/questions/3144770/glassfish-as-an-osgi-container)SO question，提到 GlassFish 作为 OSGi 容器，我不得不说我很困惑。

**这怎么可能？！？！**

我的理解是 OGS - 一个符合 Java 的应用服务器 - 有 2 个容器：

*   Web 容器：为 Web 应用程序和服务部署 WAR 文件的位置
*   App Container：为业务逻辑部署 EJB 的地方

OSGi 捆绑包在哪里适合这种范式？！？OGS 是否允许您将 OSGi 包部署到应用程序容器并将其视为 EJB 或其他东西？如果我对 OGS 的工作方式有误，请纠正我！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:37:12.417

OSGi 是一个模块系统，它允许添加/删除/升级不同的包、处理依赖关系、提供有关状态的运行时信息等。

谈到 GlassFish（其中有一个 Apache Felix OSGi 容器），应用程序服务器（例如 HTTP 服务器、JMS 服务器等）的不同功能被实现为捆绑包。OSGi 容器有控制台和基于 Web 的界面，您可以在其中启动、安装、删除服务（请参阅下面的 PDF）

就 Java EE 应用程序而言，它们也可以与 OSGI 容器交互。例如，EJB 可以作为 OSGi 服务导出，EJB 也可以使用 OSGi 服务本身。

有关详细信息，请参阅[http://glassfish.java.net/public/GF-OSGi-Features.pdf](http://glassfish.java.net/public/GF-OSGi-Features.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T11:53:22.753

嗯，对 OSGi 是什么的完全误解......

OSGi 是一个允许您组织代码的框架，以便您可以从可重用的组件构建它，然后这些组件可以通过服务层进行协作（不再有 Class.forName 或 XML！）。

OSGi 框架可以独立运行，可以在应用程序内部运行，可以在 WAR 文件中运行，也可以在应用程序服务器内部运行。您甚至可以在 OSGi 中的 OSGi 中运行 OSGi，因为它不依赖任何地方的静态。

OSGi 联盟为模块（包）指定了一种格式，以便模块可以指定它们的依赖关系。该联盟还指定了一个 API 来安装和管理模块。最后，它指定了大量在开发应用程序时有用的接口。

Websphere、Glassfish、JBoss、Jonas 都支持部署 OSGi 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:21:53.797

Glassfish 在内部使用 OSGi 来提供您提到的功能。除此之外，您还可以在其上部署自己的 OSGi 包。请参阅[https://wikis.oracle.com/display/GlassFish/OSGi](https://wikis.oracle.com/display/GlassFish/OSGi) 虽然 OSGi 和 Java EE 之间没有真正的联系。您还不能在 Glassfish 上的 OSGi 包中使用 JavaEE。对于这种情况，有第一个举措，如 OSGi 上的 Weld：[http](http://www.slideshare.net/TrevorReznik/weldosgi-injecting-easiness-in-osgi) : //www.slideshare.net/TrevorReznik/weldosgi-injecting-easiness-in-osgi 虽然它们还没有真正准备好生产。

# mysql - MySql - 选择每行返回的总结果

> ID：11545537
> 
> 赞同：0
> 
> 时间：2012-07-18T16:00:29.873
> 
> 标签：mysql

我正在尝试计算`SELECT`查询每一行的结果总数。就像是：

```
SELECT id, COUNT(*) FROM mytable; 
```

但这仅返回带有计数的单行。如何获得每行返回的总行数？

我已经尝试使用： SELECT @i=@i+1 （在子查询中）来实现这一点，但它不起作用。此外，尝试按 id 分组，但这也无济于事。

是否有一些 MySql 函数返回返回的总行数，以便可以将其添加到结果的每一行（用于计算）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:06:42.937

你不见了`GROUP BY id`

用这个

```
SELECT id, COUNT(*) FROM mytable GROUP BY id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:20:07.950

```
SELECT id, (SELECT COUNT(*) FROM mytable) FROM mytable; 
```

也许你的意思是这样的？

# android - 添加项目后，数据库中的最后一项未出现在列表视图中

> ID：11545538
> 
> 赞同：0
> 
> 时间：2012-07-18T16:00:37.727
> 
> 标签：android, database

我有一个 dialogfragment 将一个项目添加到数据库并立即在 listview 中显示它。

添加的项目立即显示在列表视图中，但我不知道为什么数据库中的最后一个项目没有出现。它在执行显示 listview 的活动之后出现，但不仅仅是在通过我的对话框片段添加项目之后。

例如，如果我的列表视图和数据库中有 3 个项目“a”、“b”和“d”，当我添加“c”时，“d”不会显示在列表视图中。它仅在再次执行显示列表视图的片段后显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:16:46.057

您的适配器正在使用两个不同的列表，第一个是超类的列表，填充为`object`：

```
super(activity, R.layout.laundry_list_item, objects); 
```

另一个是你自己的：

```
private List my; 
```

当您将项目添加到`my`为您的 ListView 提供数据的超类时，直到您重新启动 Activity 才知道此更改。

**尝试将**您的`Save`按钮更改为：

```
nam = name.getText().toString();
pri = price.getText().toString();
i = new MyItem(nam, Double.parseDouble(pri));
db.addMyItem(i);

MyActivity f = (MyActivity) getActivity().getFragmentManager().findFragmentByTag("my");
f.getMyListAdapter().add(i); 

// You might need this, but I believe the adapter will update itself in add()
//f.getMyListAdapter().notifyDataSetChanged();

getDialog().dismiss(); 
```

这将使用超类的列表并避免您的问题。

**或者**，使用您发布的代码，我相信[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)是比您自己的适配器更好的选择。

在你的片段中：

```
public void onCreate() {
    ...
    // Retrieve a Cursor of every row in the database, "SELECT _id, name, quantity FROM Table"
    mCursor = db.getAllMyItemsCursor();
    madapter = new SimpleCursorAdapter(this, R.layout.laundry_list_item, cursor, 
            new String[] { "name", "quantity" },
            new int[] { R.id.item_name, R.id.item_qty });
}

public void updateListView() {
    mCursor.requery();
    madapter.notifyDataSetChanged();
} 
```

在`Save`按钮中：

```
nam = name.getText().toString();
pri = price.getText().toString();
db.addMyItem(new MyItem(nam, Double.parseDouble(pri)));

MyActivity f = (MyActivity) getActivity().getFragmentManager().findFragmentByTag("my");
f.updateListView(); 
```

希望其中之一有帮助！

# performance - 隐藏movieclip，渲染性能

> ID：11545540
> 
> 赞同：3
> 
> 时间：2012-07-18T16:00:43.920
> 
> 标签：performance, actionscript-3, rendering

我正在为我目前正在构建的游戏开发渲染引擎..

我有一个主摄像头（矩形），它确定需要渲染的内容（边界内的东西）

我正在为背景使用位图渲染方法，一切正常。

但对于这个角色，我在顶部使用了一个movieclip。

当角色离开相机的视野时，是否 100% 需要设置 visible=false？

atm 游戏以 30 FPS（如预期的那样）运行，一切都很甜蜜，我只是出于好奇想问。

闪光灯是否足够聪明，不会打扰场景边界之外的电影剪辑？

提前致谢， 罗里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:30:31.347

根据[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3e.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3e.html)如果对象超出舞台边界，Flash 将不会呈现：

> **显示列表**
> 
> Flash Player 和 AIR 将呈现为可见屏幕内容的显示对象的层次结构。Stage 是显示列表的根，所有附加到 Stage 或其子级之一的显示对象构成显示列表（即使该对象未实际渲染，例如，如果它位于阶段）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T21:06:37.703

根据我的经验，添加到舞台的显示对象即使未渲染也会导致性能下降。

将 visible 设置为 false 会导致性能下降很多，但仍然*很小*。

从显示列表中删除不必要的显示对象也是[adobe 记录的性能提示](http://help.adobe.com/en_US/as3/mobile/WS948100b6829bd5a66f2268f12913a0c073-8000.html)。

当然，如果您只有几个显示对象，可能不值得付出努力，但如果我们谈论大量显示对象，我强烈建议将它们从显示列表中删除。

# c# - 如何模拟其值取决于模拟的另一个属性的只读属性

> ID：11545541
> 
> 赞同：27
> 
> 时间：2012-07-18T16:00:42.470
> 
> 标签：c#, .net, moq

（如标签所示，我使用的是最小起订量）。

我有一个这样的界面：

```
interface ISource
{
  string Name { get; set; }
  int Id { get; set; }
}

interface IExample
{
  string Name { get; }
  ISource Source { get; set; }
} 
```

在我的应用程序中，IExample 的具体实例接受 DTO (IDataTransferObject) 作为源。IExample 的具体实现上的一些属性只是简单地委托给 Source。像这样...

```
class Example : IExample
{
  IDataTransferObject Source { get; set; }

  string Name { get { return _data.Name; } }
} 
```

我想创建一个独立的 IExample 模拟（独立意味着我不能使用捕获的变量，因为 IExample 模拟的多个实例将在测试过程中创建）并设置模拟使得 IExample.Name 返回值IExample.Source.Name。所以，我想创建一个像这样的模拟：

```
var example = new Mock<IExample>();
example.SetupProperty(ex => ex.Source);
example.SetupGet(ex => ex.Name).Returns(what can I put here to return ex.Source.Name); 
```

本质上，我想将模拟配置为返回模拟的子对象的属性值作为一个属性的值。

谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-18T16:06:01.550

你可能会使用：

```
example.SetupGet(ex => ex.Name).Returns(() => example.Object.Source.Name); 
```

当访问该属性时，将确定要返回的值，并将从`Name`模拟属性的`Source`属性中获取。

# c# - 在 C# 中将默认值作为可选参数传递

> ID：11545543
> 
> 赞同：1
> 
> 时间：2012-07-18T16:00:46.027
> 
> 标签：c#, parameters, parameter-passing, optional-parameters

除了省略参数之外，有没有办法“告诉”带有可选参数的方法使用默认值？我想语法看起来像这样：

```
DoSomething(myParam: default)                         //calling the method

public void DoSomething(int myParam = 5) { ... }      //method definition 
```

这样做的原因是为了避免这种不带参数的方法的重载之间的歧义。换句话说，我不希望调用此方法：

```
public void DoSomething() { ... } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:03:56.090

如果您不希望用户调用不带参数的 DoSomething 方法，只需将其设为私有，如下所示：

```
private void DoSomething(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:23:02.037

在这种特殊情况下，您似乎根本不应该使用可选参数。它们旨在让您的生活更轻松。当他们停止这样做时，可能是时候停止使用它们了。

您可以使用以下通用方法通过各种重载实现可选参数的相同通用目标：

```
public void Foo(int param1, int param2, int param3){ /* actual Foo code goes here */ }

public void Foo(int param1, int param2) { Foo(param1, param2, 5); }

public void Foo(int param1) { Foo(param1, 0, 5); }

public void Foo() { Foo(42, 0, 5); } 
```

这是可选参数旨在避免的，但有时回到这个样板代码会更简单，即使它使代码有点膨胀。

# ruby-on-rails - 两个字段组合的rails唯一性

> ID：11545544
> 
> 赞同：0
> 
> 时间：2012-07-18T16:00:48.123
> 
> 标签：ruby-on-rails

我有一个字段 a，b 的模型。我想确保 a 和 b 的组合在表中是唯一的，因此 a=1, b=2 和 a=2, b=1 会引发冲突。

我尝试过`validates_uniqueness_of :a, :scope => :b`，但它只确保不能存在两个 a=1，b=2 行，我还想过滤掉 a=2，b=1。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:12:11.750

据我所知，内置的唯一性验证器不支持这一点。您必须为此编写自定义验证，例如：

```
class MyModel < AR::Base

  validate :my_custom_validation

  def my_custom_validation
    if self.class.where("(a = :a AND b = :b) OR (a = :b AND b = :a)", {:a => a, :b => b}).exists?
      errors.add(:a, :taken)
    end
  end
end 
```

`a`如果有任何记录具有 (a = 1 AND b = 2) OR (a = 2 AND b = 1)，这将向属性添加验证错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:10:10.647

可能想看看 [http://compositekeys.rubyforge.org/](http://compositekeys.rubyforge.org/)

# php - PHP/MySQLi 使用准备好的语句返回不正确的浮点值

> ID：11545550
> 
> 赞同：3
> 
> 时间：2012-07-18T16:01:00.853
> 
> 标签：php, mysqli, prepared-statement, php-5.3

好的。我可能在这里很厚实（众所周知），但是我是否在 PHP 5.3.x 中的 MySQLi 中发现了准备好的语句的未记录“功能”，或者我错过了一些非常基本的东西。

**简短版**- 通过 MySQLi 和 mysqlnd 驱动程序在 PHP 中准备的语句返回不正确的浮点值

**长版**

首先是一些测试数据

```
mysql> CREATE TABLE `t2` (`v` float(6,2) NOT NULL DEFAULT '0.00');
Query OK, 0 rows affected (0.08 sec)

mysql> insert into t2 (v) values (0.03);
Query OK, 1 row affected (0.00 sec) 
```

通过准备好的语句检索上述值时会出现问题。当使用旧的 mysql_... 或标准 mysqli... 查询调用时，会返回正确的数据。但是，通过准备好的语句使用相同的查询会返回错误的值：

测试代码：

```
atom:~/testScripts> cat f1.php
<?php
require('passwds.php');

$q="select * from t2"; // same query for all

echo "/* Old style MySQL statements (deprecated) */".PHP_EOL;

$h1=mysql_connect(MYSQL_SERVER,MYSQL_USER,MYSQL_PASSWORD);
mysql_select_db('test',$h1);
$r1=mysql_query($q);
while ($f1=mysql_fetch_assoc($r1))
{
    echo print_r($f1,true).PHP_EOL;
}

echo "/* New style MySQLi statements */".PHP_EOL;

$h2=new mysqli(MYSQL_SERVER,MYSQL_USER,MYSQL_PASSWORD,'test');
$r2=$h2->query($q);
while ($f2=$r2->fetch_assoc())
{
    echo print_r($f2,true).PHP_EOL;
}

echo "/* New style MySQLi prepared statements */".PHP_EOL;

$h3=new mysqli(MYSQL_SERVER,MYSQL_USER,MYSQL_PASSWORD,'test');
$s3=$h3->stmt_init();
$s3->prepare($q);
$s3->execute(); // no binding required
$r3=$s3->get_result();
while ($f3=$r3->fetch_assoc())
{
    echo print_r($f3,true).PHP_EOL;
} 
```

结果：

```
atom:~/testScripts> php -f f1.php
/* Old style MySQL statements (deprecated) */
Array
(
    [v] => 0.03
)

/* New style MySQLi statements */
Array
(
    [v] => 0.03
)

/* New style MySQLi prepared statements */
Array
(
    [v] => 0.029999999329448
) 
```

如果我将`v`表中的类型更改`t2`为 a`DOUBLE`而不是`FLOAT`a 准备好的语句返回的值是正确的。

在 Linux 机器上运行脚本（OpenSuse 12.1 32 位，MySQL 和 PHP 从源代码编译）和 Windows 7（64 位，从二进制文件安装 PHP，数据来自 Linux 机器）时，我得到相同的响应。我还在 OpenSuse 12.1 64 位安装（同样，PHP 和 MySQL 使用 mysqlnd 驱动程序从源代码安装）上进行了尝试，结果相同。所有版本都使用`mysqlnd`PHP 提供的驱动程序

**问题**我是否遗漏了一些非常基本的东西，还是应该向 PHP.NET 报告错误？

抱歉，这是一个很长的问题，但我想我会提供尽可能多的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:05:26.983

实际上是旧的（前两个）陈述是错误的。浮点值本质上是不精确的，例如，无法以浮点格式精确表示许多精确的小数。因此，最接近 0.03 的浮点值是 0.0299999...。您的前两个语句正在享受 MySQL 驱动程序的“好处”和/或 PHP 在数据类型转换期间为您舍入值。但是，MySQLi 准备好的语句使用二进制结果格式，将值“按原样”直接转换为 PHP 数据类型，例如 int、float、string 等。（[http://php.net/manual/en/mysqli.quickstart.prepared-语句.php](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php) )

对浮点精度问题进行更多研究（例如，[http](http://dev.mysql.com/doc/refman/5.5/en/problems-with-float.html) ://dev.mysql.com/doc/refman/5.5/en/problems-with-float.html ），看看它们是否真的符合您的需求。如果您想要精确的小数并且愿意牺牲一点存储空间和/或计算速度，请尝试 MySQL`DECIMAL(X,Y)`类型。然而 MySQLi 可能仍会在内部将其转换为 PHP 浮点/双精度。

# html - 如何调整 html 邮件中的图像大小以支持智能手机和 pc？

> ID：11545553
> 
> 赞同：0
> 
> 时间：2012-07-18T16:01:20.100
> 
> 标签：html, css

我有一个宽度为 600 像素、高度为 75 像素的**HTML 邮件程序的图像标题。**在智能手机上阅读邮件时，有没有办法减小图像的大小？我可以使用 in line css`max-width:600px; width:100%;`使最大宽度保持在 600 像素，然后在屏幕尺寸较小的智能手机上查看时，它会缩小到手机显示尺寸吗？还是会产生任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:04:40.367

使用绝对像素值通常是个坏主意。尝试创建一个几乎所有尺寸都看起来不错的“流体布局”。

要根据可用的显示大小更改 CSS，请尝试“css 媒体查询”。

您的解决方案 ( `max-width`) 也应该可以工作，只需测试并尝试，它应该可以工作。

# dynamics-crm - 在 CRM 可视化功能区编辑器中设置启用规则

> ID：11545555
> 
> 赞同：4
> 
> 时间：2012-07-18T16:01:29.647
> 
> 标签：dynamics-crm, dynamics-crm-2011

我正在使用 CRM 可视化功能区编辑器创建一个自定义按钮，用于发送所有选定的电子邮件。但是，由于电子邮件是一个活动实体，因此在按下按钮时，用户可能会选择其他活动。

是否有一个启用规则指定所有选定的项目都是电子邮件？

如果是这样，我该如何使用它？

如果没有，用 JScript 编写的自定义规则可以工作吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:26:38.030

我必须用我的自定义实体做这样的事情。我需要根据记录状态启用一个按钮。

我认为只有使用用 JScript 编写的自定义规则才能真正实现这样的事情，您可以使用该规则来查询记录并查看它们是什么类型。

希望这可以帮助

# javascript - 将文本从变量放入 codemirror textarea

> ID：11545557
> 
> 赞同：1
> 
> 时间：2012-07-18T16:01:41.493
> 
> 标签：javascript, codemirror

我正在开发一个在 aspx 页面中使用 codemirror 的项目。这是我的代码：

```
<form><textarea id="code" name="code" > 
```

```
<script type="text/javascript">

    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
        lineNumbers: true,
        matchBrackets: true,
        mode: "text/x-csharp"
    });
    function app() {

        var txt = "myText";
        $('textarea#code').text(txt);
    }
</script> 
```

所以我希望每次按下按钮时，我都想将变量 txt 的值放入 codemirror 的文本区域。相反，当我单击它时，文本区域没有任何反应。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:28:29.593

如果要设置 CodeMirror 的值，可以使用 .setValue 方法：

```
function app() {
    var txt = "myText";
    editor.setValue(txt);
} 
```

# javascript - JavaScript 将变量中的 && 语句组合为真或假

> ID：11545558
> 
> 赞同：7
> 
> 时间：2012-07-18T16:01:44.793
> 
> 标签：javascript, variables

只是一个快速的问题。我找不到与此相关的任何内容，因为我真的不知道如何解释它......但是，如果我使用 && 组合两个布尔值来创建另一个变量，会发生什么？

```
var is_enabled = isEnabled() && isSupported(); 
```

如果 isEnabled() 为 false 而 isSupported() 为 true，它是否等于 false？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-18T16:08:42.263

In Javascript the `&&` and `||` operators are slightly strange. It depends on if the value is "falsy" (zero, `undefined`, `null`, empty string, `NaN`) or truthy (anything else, including empty arrays).

With `&&` if the first value is "falsy", then the result of the operation will be the first value, otherwise it will be the second value. With `||` if the first value is "falsy" then the result of the operation will be the second value, otherwise it will be the first value.

Example:

```
var a = 5 && 3; // a will be 3
var a = 0 && 7; // a will be 0

var a = 1 || 2; // a will be 1
var a = 0 || 2; // a will be 2 
```

This is very useful if you want to replace this:

```
if (x == null){
  x = 5;
} 
```

With:

```
x = x || 5; 
```

So in short, if `isEnabled()` is truthy then `is_enabled` will be set to whatever `isSupported()` returns. If `isEnabled()` is falsy, then `is_enabled` will be set to whatever that falsy value is.

Also as Robert pointed out, there is short-circuiting:

```
var x = 5 || infinite_loop();
var x = false && infinite_loop(); 
```

In both cases, the `infinite_loop()` call doesn't happen, since the two operations are short-circuited - `||` doesn't evaluate the second value when the first value is truthy, and `&&` doesn't evaluate the second value when the first value is falsy.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T16:04:31.703

结果`false && true`是`false`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T16:04:41.260

如果 isEnabled() 为 false 并且您使用 && 那么 isSupported() 将永远不会被调用，因为评估会短路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:04:57.353

如果`&&`operator 的任何操作数是*falsy* ( `false`, 0, `null`, `undefined`, `NaN`, `""`) ，`is_enabled`则将分配第一个 falsy 值。

如果 operator 的所有操作数`&&`都不为*falsy*，则最后一个操作数将被分配给`is_enabled`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T16:05:00.817

只有当 isEnabled 和 isSupported 都为真时，is_enabled 才会设置为真。因此，如果 isEnabled 为 false，并且 isSupported 为 true，则 is_enabled 将为 false。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T16:05:03.860

是的：

```
<script type="text/javascript">
function isEnabled() {
    return false;
}

function isSupported() {
    return true;
}

var is_enabled = isEnabled() && isSupported();

alert(is_enabled);  // = 'false'
</script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-18T16:05:42.010

如果两个函数都只返回 true 或 false，那么它就像一个普通的 && 和布尔值一样工作。

```
1 && 1 = 1
1 && 0 = 0
0 && 1 = 0
0 && 0 = 0 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-18T16:06:44.190

首先，&& 仅当且仅当两个表达式都为真时才为真。

所以回到你的问题，true && false 将等于 false，所以是的。

您也可以尝试使用 firebug 或 chrome 开发人员工具上的控制台功能自己测试这些表达式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-18T16:03:31.743

你能做的就是添加一个单一`&`的并对这些布尔值应用一个`AND`操作，使得如果它们都为真，那么`is_enabled`将是真的。

```
var is_enabled = isEnabled() & isSupported(); 
```

**编辑** 感谢 Pointy 指出我的语法不正确，这应该适用于 C 语言，我猜我只是感到困惑

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-08T09:22:58.000

**简短回答：** 如果第一个不是假的，那么第二个，否则第一个。

**示例：**如果 isEnabled() 返回 false，`false`则为结果。

否则，如果 isEnabled() 为真，那么**isSupported() 返回**的就是结果。

现在`false`和`true`被用来简化答案，false 可以是任何**虚假**值。

> 真值和假值的示例：
> 
> 变量字符串 = ""; // <-- 假的
> 
> varfilledString = "这里有一些字符串"; // <-- 真实的
> 
> 变量零 = 0; // <-- 假的
> 
> var numberGreaterThanZero // <-- 真实
> 
> var 空数组 = []; // <-- 真的，接下来我们将进一步探讨
> 
> var 空对象 = {}; // <-- 真实的

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-02T12:45:27.080

在这里，您可以看到可能的测试案例有哪些：

```
var str='My dummy string';
var str2='My other dummy string';
var falsy1= 1==2;
var truthy1= true;
var truthy2= true;
var falsy2= false; 
```

然后：

```
console.log('Both bool true:', truthy1 && truthy2); // <== Both bool true: true
console.log('Bool true and string:', truthy1 && str); // <== Bool true and string: My dummy string
console.log('String and bool true:', str && truthy1); // <== String and bool true: true
console.log('Falsy operation and string:', falsy1 && str); // <== Falsy operation and string: false
console.log('Bool false and string:', falsy2 && str); // <== Bool false and string: false
console.log('Both bool false and true:', falsy1 && truthy1); // <== Both bool false and true: false
console.log('Both bool true and false:', truthy1 && falsy1); // <== Both bool true and false: false
console.log('Operation false and bool true:', falsy2 && truthy1); // <== Operation false and bool true: false
console.log('Operation false and bool false:', falsy2 && falsy1); // <== Operation false and bool false: false
console.log('Both strings:', str2 && str); // <== Both strings: My dummy string
console.log('Both strings:', str && str2); // <== Both strings: My other dummy string   
console.log('String and bool false:',  str && falsy1); // <== String and bool false: false  
console.log('String and 2 bool false and true:',  str && falsy1  && truthy1); // <== String and 2 bool false and true: false
console.log('3 bool false and true and true:',  falsy1 && truthy1 && truthy2); // <== 3 bool false and true and true: false
console.log('3 bool false and false and true:',  falsy1 && falsy1 && truthy1); // <== 3 bool false and false and true: false
console.log('Bool false and operation false and bool true:',  falsy1 && falsy2 && truthy1); // <== Bool false and operation false and bool true: false
console.log('3 bool true and true and false:',  truthy2 && truthy1 && falsy1); // <== 3 bool true and true and false: false
console.log('String and 2 bool false and true:',  str && falsy1 && truthy1); // <== String and 2 bool false and true: false
console.log('String and 2 bool true and false:',  str && truthy1 && falsy1); // <== String and 2 bool true and false: false
console.log('2 bool false and true and string:',   falsy1 && truthy1 && str); // <== 2 bool false and true and string: false
console.log('2 bool true and false string:',  truthy1 && falsy1 && str); // <== 2 bool true and false string: false
console.log('Bool true and string and bool false:',  truthy1 && str && falsy1); // <== Bool true and string and bool false: false
console.log('Bool false and string and bool true:',  falsy1 && str && truthy1); // <== Bool false and string and bool true: false 
```

和奖金：

```
console.log('The existence of a string:',  !!str); // <== The existence of a string: true 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2012-07-18T16:06:28.930

成功的布尔运算（例如“&&”）的结果是一个布尔值。因此，结果`isEnabled() && isSupported()`将是一个布尔值，然后将其分配给 is_enabled

# javascript - 如何使用 getJSON 从 JSON 对象将数据输出为 HTML

> ID：11545562
> 
> 赞同：0
> 
> 时间：2012-07-18T16:01:58.210
> 
> 标签：javascript, html, ajax, json, setinterval

你好，我会尽量保持简单和简短

我有一个每 5 秒运行一次的 getJSON 函数。现在，当我使用 document.write 函数显示数据时，它似乎想要更新。页面卡在加载循环中。如何让数据显示在我的页面上？我的 JSON 很好，但无论如何我都会给你看。

```
 <script type="text/javascript">

 $.ajaxSetup ({  
    cache: false  
     });  

    setInterval(function(){ $.getJSON('names.json', function(data) {

    for(i in data)  {

        document.write(data[i] + "<br/>");
    }

  });

},5000);

 </script> 
```

这是 JSON 对象

```
{
  "one": "",
  "two": "Beady little eyes",
  "three": "Little birds pitch by my doorstep"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:08:01.193

Don't actually use `document.write`. Once the page is loaded, that will erase the page. Use (jQuery's) DOM methods to manipulate the DOM.

```
$.getJSON('names.json', function(data){
    for(var i in data){
        $('#myDiv').append(data[i]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:07:15.390

我建议你使用 jQuery，

我用它从我的 json 项目创建了一个表单，我希望这会有所帮助......

```
function jsonFormCreator(frmJSON)
{
    var createdHTML = ""; var elementType, id;
    console.log(JSON.stringify(frmJSON));

    for(item in frmJSON)
    {
        formElement = frmJSON[item];    elementType = formElement.elementType;  id = formElement.id;

        if(elementType == "input")
        {
            createdHTML += "<input id='" + id +"'";
            if(formElement.type == "checkbox") 
            {createdHTML += " type='" + formElement.type + "' checked='" + formElement.checked + "'";}
            else{createdHTML += "type='" + formElement.type + "' value='" + formElement.value + "' onclick='" + formElement.onclick + "'";}
            createdHTML += "/><br>"
        }
        else if(elementType == "textarea")
        {createdHTML += "<textarea id='" + formElement.id  + "' rows='" + formElement.rows +  "' cols='" + formElement.cols + "' value='" + formElement.value + "'></textarea><br>";}
        else if(elementType == "select")
        {
            var options = formElement.values;
            createdHTML += "<select id='" + formElement.id+ "'>";
                for(i = 0 ; i < options.length ; i++)
                {createdHTML += "<option value='" + options[i][0] + "'>" + options[i][1] + "</option>";} //Adding each option
            createdHTML+= "</select><br>";
        }
    }
    console.log("Complete");console.log(createdHTML);
    document.getElementById('mainContainer').innerHTML = createdHTML;//Adding to the DOM
} 
```

我的 JSON 看起来像这样

```
{
    "0": {
        "elementType": "input",
        "id": "frm1",
        "type": "text",
        "value": "form Liam",
        "label": "Test Text Input"
    },
        "itemBTN": {
        "elementType": "input",
        "id": "frmAlert",
        "type": "button",
        "onclick" : "loader(homePage);",
        "value": "Home Page",
        "label": ""
    },
    "item2": {
        "elementType": "textarea",
        "id": "frm2",
        "rows": 5,
        "cols": 30,
        "value": "helddddddddlo",
        "label": "Test Textarea"
    },
    "item3": {
        "elementType": "select",
        "id": "frm3",
        "values": [
            [
                "value1",
                "Pick Me"
            ],
            [
                "value2",
                "UserDis2"
            ],
            [
                "value3",
                "UserDis3"
            ],
            [
                "value4",
                "UserDis4"
            ],
            [
                "value5",
                "UserDis5"
            ],
            [
                "value6",
                "UserDis6"
            ]
        ],
        "label": "Test Select"
    },
    "item4": {
        "elementType": "input",
        "id": "frm4",
        "label": "Checkbox",
        "type": "checkbox",
        "checked": true
    }
} 
```

这段代码将表单添加到我的 div 标签中，id 为 mainContainer 我知道它有很多代码，但我希望它有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:04:12.017

您想渲染将包含数据的 dom，然后当您获取数据时更新 dom。

作为一个非常简单的示例，在您的页面上有一个容器

```
<div id="one"></div> 
```

然后在您的 ajax 成功处理程序中

```
$("#one").text(json.one); 
```

这使用 jquery 来获取 id 为“one”的 dom 元素，并更新其文本。

# c++ - 将用户信息保存到加密文件的程序

> ID：11545563
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:02:00.620
> 
> 标签：c++, encryption

我正在编写一个程序，要求用户输入用户名和密码。如果他们愿意，我也希望能够保存这些信息，但我不想让我的程序创建一个任何人都可以打开的简单纯文本文件。如何让我的 c++ 程序写入加密文件并在稍后启动程序时访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:15:33.050

尝试[libgcrypt](http://www.gnupg.org/documentation/manuals/gcrypt/)。对于此类任务，每次都必须输入密钥（从用户密码生成）。您不想将密钥保存在加密数据旁边。

如果您想在更高级别处理它，您也可以尝试使用 pgp 或 gpg 编写脚本。

# java - 在 Jung 中可视化多个布局

> ID：11545566
> 
> 赞同：0
> 
> 时间：2012-07-18T16:02:17.603
> 
> 标签：java, layout, graph, visualization, jung

我正在使用[JUNG](http://jung.sourceforge.net/)创建图形的 RadialTreeLayout 。现在我想看到另一个图的另一个 RadialTreeLayout（具有相同类型的顶点和边）作为主布局的一部分。

问题不在于将两个图表合并（如此[处](https://stackoverflow.com/questions/7165345/how-to-unite-two-graphs-in-jung)所述），而在于实际上在主窗口中可视化类似的布局。

我想这样做的方法很少，但不确定它们是否可行。例如，创建一个这样的节点，它实际上是布局（并且可以通过放大看到），或者当单击该节点时，另一个布局会出现在单独的窗口中。

或者在 JUNG 中已经有现有的方法可以做到这一点。任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:39:04.380

查看演示。我不记得是哪一个，但至少有一个演示了多个图表的可视化。

# c# - 如何获得我的应用程序的最后写入或构建时间？

> ID：11545569
> 
> 赞同：1
> 
> 时间：2012-07-18T16:02:30.037
> 
> 标签：c#, .net, winforms, file, datetime

> **可能重复：**
> [如何在我的应用程序中显示上次构建的内部版本号和/或日期时间？](https://stackoverflow.com/questions/11532705/how-can-i-display-the-build-number-and-or-datetime-of-last-build-in-my-app)

我想将构建我的应用程序的最后一个 DateTime 附加到标题栏。但是这段代码：

```
DateTime lastWriteTime = File.GetLastWriteTime(Assembly.GetExecutingAssembly().GetName().ToString());
this.Text = String.Format("Platypi R Us; Built on {0}", lastWriteTime); 
```

... 400 多年前（1600 年）的声明；我觉得不太可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:15:02.123

问题是您使用*不是*`GetLastWriteTime`文件名的东西进行了调用。打印出来，你会明白我的意思。*`Assembly.GetExecutingAssembly().GetName().ToString()`*

 *的[文档`File.GetLastWriteTime`](http://msdn.microsoft.com/en-us/library/system.io.file.getlastwritetime.aspx)特别指出了这一点：

> 如果 path 参数中描述的文件不存在，则此方法返回 1601 年 1 月 1 日午夜 12:00 (CE) 协调世界时 (UTC)，调整为本地时间。

因此，无论[`Application.ExecutablePath`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.executablepath.aspx)是按照 Clay 的建议使用，还是针对特定程序集（或避免 WinForms 依赖），您都可以使用[`Application.ManifestModule`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.manifestmodule.aspx)并获取[`FullyQualifiedName`](http://msdn.microsoft.com/en-us/library/system.reflection.module.fullyqualifiedname.aspx)，如下所示：

```
using System;
using System.Reflection;

class Test
{
    static void Main()
    {
        string file = typeof(Test).Assembly
                                  .ManifestModule
                                  .FullyQualifiedName;
        Console.WriteLine(file);
        DateTime lastWriteTime = File.GetLastWriteTime(file);
        Console.WriteLine(lastWriteTime);
    }
} 
```

当然，这只获取包含程序集清单的模块的最后写入时间 - 可能有多模块程序集。不过这种情况很少见，我猜这对你有好处。

遗憾的是，它*本身没有*嵌入构建时间的概念`Assembly`，但这就是生活:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:09:04.343

This works:

```
FileInfo fileInfo = new FileInfo(Application.ExecutablePath);
DateTime lastWriteTime = fileInfo.LastWriteTime;
this.Text = String.Format("Platypi R Us; Built on {0}", lastWriteTime); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:12:51.890

'GetName()' 返回程序集的显示名称。你想要[Assembly.Location](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.location.aspx)

另外，我不确定这是否可行。如果将文件复制到其他位置，则文件时间与实际的上次构建时间不同步。也许每次发布新版本时手动更新它？*

# c - Valgrind 输出与预期不同（

> ID：11545570
> 
> 赞同：1
> 
> 时间：2012-07-18T16:02:35.497
> 
> 标签：c, valgrind

我正在通过 Learn C the Hard Way 进行学习，我正在开始[关于 valgrind 的部分](http://c.learncodethehardway.org/book/ex4.html)。

示例输出的摘录如下：

```
==3082== Use of uninitialised value of size 8 
==3082==    at 0x4E730EB: _itoa_word (_itoa.c:195) 
==3082==    by 0x4E743D8: vfprintf (vfprintf.c:1613) 
==3082==    by 0x4E7E6F9: printf (printf.c:35) 
==3082==    by 0x40052B: main (ex4.c:11) 
```

虽然我的输出如下所示：

```
==2362== Use of uninitialised value of size 4 
==2362==    at 0x40885CB: _itoa_word (in /lib/libc-2.16.so)
==2362==    by 0x408C13E: vfprintf (in /lib/libc-2.16.so)
==2362==    by 0x4092AE: printf (in /lib/libc-2.16.so)
==2362==    by 0x4061604: (below main) (in /lib/libc-2.16.so) 
```

如何让我的 Valgrind 输出匹配？我并不十分担心第 2-4 行，但我更希望最后一行实际上是对应的（而且我猜它可能还是相关的）。

* * *

我像这样构建了我的 ex4：

```
$ make ex4
cc -Wall -g    ex4.c    -o ex4
** Some warnings here ** 
```

然后像这样执行valgrind：

```
$ valgrind ./ex4 
```

我正在运行从 Arch linux、GCC 4.7.1 上的源代码构建的 valgrind 3.7.0，并且因为我有 GLIBC 1.6，所以我修改了我的配置文件并添加了以下代码：

```
 2.16)
        { $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.16 family" >&5
$as_echo "2.16 family" >&6; }

$as_echo "#define GLIBC_2_16 1" >>confdefs.h

DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
;; 
```

就在与前一个案例`;;`相匹配的下方。`2.14)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:00:06.687

我怀疑您没有安装标准库的调试/符号。

由于库版本不同，输出总是会略有不同，但您应该能够通过调试包获得一些行号。

您可能需要`-O0`避免被`main()`忽略。

# java - jboss 7.1.0 上的哪个 jboss-javaee-6.0 版本

> ID：11545571
> 
> 赞同：0
> 
> 时间：2012-07-18T16:02:48.713
> 
> 标签：java, maven, jboss, version, pom.xml

我创建了一个示例 Maven 应用程序并将其部署到 jboss 7.1.0 Thunder。

在 pom.xml 中是依赖项

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>1.0.0.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

我应该在作业 7.1.0 上使用哪个版本的 jboss-javaee-6.0？还有其他版本可用（http://mvnrepository.com/artifact/org.jboss.spec/jboss-javaee-6.0）。

感谢和问候

mp5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:09:59.750

这完全取决于您的要求，例如，您想要使用哪个版本的 servlets/JSF（或）其他 API。如果您正在开始新的开发，可能使用最新版本总是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:17:41.233

我想我在 jboss doc 中找到了答案。 [https://docs.jboss.org/author/display/AS71/Maven+POM+Versions+Checklist](https://docs.jboss.org/author/display/AS71/Maven+POM+Versions+Checklist) 这是在 jboss 7.1 上编写快速入门的版本列表

# xslt - 在 XSLT 测试子句中使用 Xpath

> ID：11545572
> 
> 赞同：1
> 
> 时间：2012-07-18T16:02:52.877
> 
> 标签：xslt, xpath, xslt-1.0, xslt-2.0, xslt-3.0

我试图将 xpath 表达式作为变量放在 xslt 测试子句中，如下所示：

```
<xsl:choose>
<xsl:when test="../v:node[@InputName='{v:HeaderValue}']">
</xsl:when>
<xsl:otherwise>
</xsl:otherwise>
</xsl:choose> 
```

但是，它不起作用，并且总是评估为假。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:34:18.317

动态 XPath 评估在 XSLT 1.0 或 XSLT 2.0 中不可用。

它可能在**[XSLT 3.0](http://www.w3.org/TR/xslt-30/)**中作为（当前提议的）**[`<xsl:evaluate>`](http://www.w3.org/TR/xslt-30/#element-evaluate)**指令提供

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:15:36.427

你应该能够做到这一点

```
<xsl:when test="../v:node[@InputName=v:HeaderValue]"> 
```

{ } 表示法用于属性值模板，在创建属性时使用，并且您希望表达式的结果作为属性的值。

# php - php-function，将值传递给特定参数？

> ID：11545573
> 
> 赞同：1
> 
> 时间：2012-07-18T16:02:53.920
> 
> 标签：php

可以将值传递给函数中的特定参数吗？

```
function fun1($a,$b)
{
echo $b;
}
@fun1(123); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:08:36.237

Functions can be defined so that they do not require all parameters. For example:

```
function foo($a, $b = 2) {
    echo $a + $b;
}

foo(1); //gives 3 
```

Read about default function values [here](http://php.net/manual/en/functions.arguments.php)

However, you cannot pass in later parameters without specifying earlier ones. Some simple programming-function-parameters-basics... when you do `foo($b)` the function has no idea that the variable was **named** `b`... It just gets the data; usually a primitive type (in this case an int) or a reference.

You haven't specified how you're using these variables, so you may want to give a dummy value like "-1" to `$a` (and handle it in your function) (`foo(-1, 123)`), or rewrite your function so that $a is the second parameter with the default value. (`function foo($b, $a = NULL)`)

That's why you must pass the variables in order; the function assumes you're using it right, and it lines up the values passed with the function definition. `function foo($a, $b)` means "I'm assuming I should associate your first value with `a` and your second value with `b`)".

* * *

With your original example `function foo($a, $b)`:

No context, so I would just say do this `function foo($b, $a = some_default_value)`. However, I'm assuming you're using `$a` and `$b` equally so you could check to see if it was some default-invalid-value and act on it. **However, if your function performs different tasks depending on the (number of) parameters passed, you probably want to separate your function.**

If you insist on not switching the order, you could call `foo(-1, 123)` with a dummy value and check it. Again though, same problem as above

* * *

Edit: You've given another example `foo($a, $b, $c)` and you said you want to do `foo($b)` to update the middle value. See the explanation in the first paragraph about how a function knows what parameter is what.

If you mean you want to pass an arbitrary set of variables to a function and it knows which ones it got? Again I don't think this is the best practice (you'll need to give us more detail about how you're using this) but you could pass an associative array:

```
function foo($arr) {
    if (isset($arr['a'])) {
        echo $a;
    }
    if (isset($arr['b'])) {
        echo $b;
    }
    if (isset($arr['c'])) {
        echo $c;
    }
}
foo(array('b' => 123)); 
```

I feel horrible after writing this function :P

* * *

```
<?php
function FUN1($a, $b)
{
    echo "HI";
    echo $b;
} //$_a=    123; //error_reporting (E_ALL ^ E_NOTICE ^ E_WARNING); //$b=23; echo @FUN1(123);//it gives HI123 
?> 
```

I formatted your function. Firstly, when I tried that call it doesn't give me "HI123". Secondly, `@` is bad practice and really slows down the code. Thirdly, you don't `echo FUN1` since it doesn't return anything; your function prints the stuff itself.

You (your student) are/is going in the wrong direction. As I said in my comment, functions already have a beautiful way of sorting out the parameters. Instead of trying to do something funky and work around that, just change your approach.

The example above has no real use and I'm sure in actual code you should just write different functions when you're setting different variables. like `setA($a) setB($b) setC($c) setAll($a, $b, $c)` and use them accordingly. Arrays are useful for easy variable length functions, but if you're checking each tag to do something, then something's wrong.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:18:10.043

如果你只想传递一个参数，你可以像这样创建一个包装函数：

```
function PassOne($arg)
{
   fun1(NULL,$arg);
}

function fun1($a,$b)
{
 echo $b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:21:39.447

*原谅任何不准确之处。自从我用 PHP 编码以来已经有一段时间了。*

如果要确保参数的顺序，可以将单个数组作为参数传递。

```
$args = array(
    'name' => 'Robert',
    'ID' => 12345,
    'isAdmin' => true
);

example($args);

function example($args)
{
    echo $args['name']; // prints Robert
    echo $args['ID']; // prints 12345
    echo $args['isAdmin']; // prints true
} 
```

使用这种方法，您还可以将默认值硬编码到函数中，仅在参数数组中提供它们时替换它们。例子：

```
$args = array(
    'name' => 'Robert',
    'ID' => 12345
    // Note that I didn't specify whether Robert was admin or not
);

example($args);

function example($args)
{
    $defaultArgs = array(
        'name' => '',
        'ID' => -1,
        'isAdmin' => false // provides a default value to incomplete requests
    );

    // Create a new, mutable array that's a copy of the default arguments
    $mixArgs = $defaultArgs;

    // replace the default arguments with what was provided
    foreach($args as $k => $v) {
        $mixArgs[$k] = $v;
    }

    /* 
      Now that we have put all the arguments we received into $mixArgs,
      $mixArgs is mix of supplied values and default values.  We can use
      this fact to our advantage:
    */

    echo $mixArgs['name']; // prints Robert

    // if ID is still set to the default value, the user never passed an ID
    if ($mixArgs['ID'] == -1) {
        die('Critical error! No ID supplied!');  // use your imagination
    } else {
        echo mixArgs['ID']; // prints 12345
    }

    echo mixArgs['isAdmin']; // prints false

    // ... etc. etc.
} 
```

* * *

## 2018 年的 PHP 语法和默认值

```
function example($args=[], $dftArgs=['name'=>'', 'ID' => -1, 'isAdmin'=>false])
{
    if (is_string($args)) 
       $args = json_decode($args,true); // for microservice interoperability
    $args = array_merge($dftArgs,$args); 
    // ... use $args
}
//  PS: $dftArgs as argument is not usual, is only a generalization 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:05:56.040

不。

`NULL`但是按照惯例，您可以通过传入该位置来跳过内置函数的参数：

```
fun1(NULL, 123); 
```

显然这对所有事情都没有意义 - 例如这没有意义：

```
$result = strpos(NULL, 'a string'); 
```

对于用户定义的函数，您可以以任何您认为合适的方式处理参数 - 但您可能会发现[`func_get_arg()`](http://php.net/manual/en/function.func-get-arg.php)/[`func_get_args()`](http://php.net/manual/en/function.func-get-args.php)对使用不确定数量参数的函数有用。

另外，不要忘记您可以通过定义默认值来使参数成为可选：

```
function fun ($arg = 1) {
  echo $arg;
}

fun(2); // 2
fun();  // 1 
```

请注意，默认值只能在最右边的参数上定义。如果参数右边的参数没有默认值，则不能给参数一个默认值。所以这是非法的：

```
function fun ($arg1 = 1, $arg2) {
  // Do stuff heere
} 
```

# vim-plugin - 如何启用 neocomplcache 快速匹配？

> ID：11545576
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:08.520
> 
> 标签：vim-plugin

我不知道如何在 neocomplcache vim 插件中启用快速匹配。我放

```
let g:neocomplcache_enable_quick_match = 1 
```

在我的 .vimrc 中，但它没用。当我按下`-`没有任何反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:19:40.733

根据帮助文件，不再有快速修复功能。您需要为此使用联合：

> A: 快速匹配功能在最新的 Neocomplcache 中被移除，因为快速匹配变得难以实现。

但是你可以使用 |unite.vim| 而是使用快速匹配。

```
imap <expr> -  pumvisible() ? 
    \ "\<Plug>(neocomplcache_start_unite_quick_match)" : '-' 
```

# python - manage.py 的 Python 路径设置错误

> ID：11545577
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:12.460
> 
> 标签：python, django

当我运行 ./manage.py 时，出现以下错误，

来自：无法读取 /var/mail/os.path

./manage.py：第 4 行：导入：找不到命令

./manage.py：第 7 行：意外标记“0”附近的语法错误

./manage.py：第 7 行：`sys.path.insert(0, abspath(join(dirname( **file** ), 'external_apps')))'

它是什么！！！我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:54:41.497

不要添加 #!/usr/bin/python 。在运行 python manage.py your_command 之前使用 virtualenv 并激活它。当您熟悉 virtualenv 时，请尝试 virtualenvwrapper。

# android - 如何在 Android 中为 NumberPicker 添加样式

> ID：11545578
> 
> 赞同：0
> 
> 时间：2012-07-18T16:03:17.650
> 
> 标签：android, android-layout, android-widget, styles, themes

我正在尝试向 Android NumberPicker 添加自定义样式。我想要做的是将选择器显示为白色的文本，因为默认情况下（或根据设备上的默认主题）我将其显示为黑色。问题是我的应用程序背景是深色的，所以我希望文本是白色或清晰的。

所以我的 style.xml 文件中有这样的内容：

```
<style name="myPicker">
    <item name="android:textColor">#FFFFFF</item>
</style> 
```

NumberPicker 小部件上甚至不存在 textcolor 属性，但我只是尝试添加它以便我的文本颜色发生变化。它当然不起作用。在这个小部件上唯一可以自定义的似乎是背景

现在的问题是：我们如何改变选择器的文本颜色？

如果有人有同样的问题或已经解决了，请告诉我们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T16:39:32.377

我找到了一种“丑陋”的方式来做到这一点。只需获取对数字选择器小部件的子视图的引用。有三 (3) 个子视图：上箭头、文本视图（包含要显示的文本或值）和下箭头。

假设我们有一个名为 np 的数字选择器

```
np.setValue(10);
np.setMinValue(5);
np.setMaxValue(50);
// retrieve the textview reference
TextView npTextView = (TextView) np.giftAmount.getChildAt(1); // since indexing begins at 0
npTextView.setTextColor(getResources().getColor(
    R.color.my_custom_color) 
```

我知道这很糟糕，但它确实有效......

# php - 模式匹配 css 规则

> ID：11545580
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:28.057
> 
> 标签：php, css, regex, pattern-matching

我有以下模式：

```
[\{\}].*[\{\}] 
```

使用以下测试字符串（如果需要可以提供更多）：

```
}.prop{hello:ars;} //shouldn't match
}#prop{} //should match
}.prop #prop {} //should match 
```

该模式的目的是找到空的 CSS 规则集。有人可以建议我如何排除与第二组括号之间的字符匹配的内容吗？随着我越来越接近解决方案，我将更新模式。

编辑：在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/) 这个模式：`[\}].*[\{]{1}[/}]{1}` 似乎有预期的结果，尽管由于我不明白的原因转移到 php 时它会中断。

编辑：如果这应该是一个单独的问题，首先道歉。在 php 的第一次编辑中使用模式：

```
 $pattern = "/[\}].*[\{]{1}[/}]{1}/";
    preg_match_all ($pattern, $new_css, $p);
    print_r($p); 
```

当 $new_css 是包含空规则集的上传 css 文件的内容字符串时，永远不会填充 $p。然而我知道这种模式是可以的。任何人都可以看到问题是什么？

编辑：**最终解决方案**

```
//take out other unwanted characters
        $pattern = "/\}([\.#\w]\w+\s*)+{}/";
        //do it twice to beat any deformation
        $new_css = preg_replace ($pattern, '}', $new_css);
        $new_css = preg_replace ($pattern, '}', $new_css); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:40:10.760

尝试在正则表达式周围使用单引号，或将`\`字符加倍。PHP`\`在双引号字符串中的处理方式是`\{`变成`{`，打破了正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:26:25.400

试试这个模式：`'/}([\.#]\w+\s*)+{}/'`

```
$new_css = "{}.prop{hello:ars;}
{}#prop{} //should match
}.prop #prop {} //should match
}.prop { aslkdfj}
}.prop { }
";

$pattern = '/}([\.#]\w+\s*)+{}/';
preg_match_all ($pattern, $new_css, $p);
print_r($p); 
```

这输出：

```
Array
  (
    [0] => Array
    (
      [0] => }#prop{}
      [1] => }.prop #prop {}
    )

    [1] => Array
    (
      [0] => #prop
      [1] => #prop
    )
  ) 
```

# asp.net-mvc-3 - “提供者没有返回 ProviderManifestToken 字符串”

> ID：11545583
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:32.010
> 
> 标签：asp.net-mvc-3, sql-server-2008

我正在尝试自学 .Net MVC 3，并且正在学习本教程：[http ://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet- mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)并且已经到了为之前创建的模型创建控制器的步骤（http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/accessing-your-模型的数据来自控制器）。

当我尝试创建控制器时，我收到“提供程序没有返回 ProviderManifestToken 字符串”错误。一些谷歌搜索让我相信这是由于我的连接字符串有错误。

问题是我没有在本地运行 SQL Server，所以我无法复制示例 connectionString。这是我现在得到的：

```
connectionString="Data Source=1.2.3.4\MSSQLSERVER;Initial Catalog=myDBname;Integrated Security=False;User ID=myUsername;Password=myPassword" 
```

我尝试使用 SSMS 使用用户名和密码登录数据库，并且它可以工作，所以问题不在于用户本身。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:18:16.213

如果您使用的是 SQL Azure，如果 Azure 数据库防火墙未设置为允许您的 IP 地址，则可能会导致此错误。确保检查以确保您正在授权 IP 地址。这个错误不一定会指向那个方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:31:23.600

我有同样的问题并通过以下方法解决了。只需检查数据库实例的对象名称，它可能类似于：

```
 private Model_ db = new Model_(); 
```

如果是这样，则将其替换为 MovieDBContext，例如：

```
 private MovieDBContext db = new MovieDBContext(); 
```

（或者你在 Model/Movies.cs 中设置的类名，比如

```
public class MovieDBContext : DbContext
{ 
     public DbSet < Movie> Movies { get; set; }
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T13:13:08.850

在遇到这个答案之前，我遇到了同样的问题

[Web.config 中用于使用附加 .mdf 数据库的 DB 连接字符串将不起作用](https://stackoverflow.com/questions/7687930/db-connection-string-in-web-config-to-use-attached-mdf-database-wont-work)

“如果您将 *.mdf 放在 App_Data 文件夹中，则使用此格式有效：”

```
<connectionStrings>
  <add name="ConnectionName"
    connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|DatabaseName.mdf;Integrated Security=True;User Instance=True"
    providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我也使用了教程，但我有数据库文件 *.mdf，而不是教程 *.sdf。

也许这个解决方案会有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T09:15:33.703

我想通了：原来在我的情况下不需要“\MSSQLSERVER”。我不确定是因为我通过 IP 连接还是特定于我的服务器设置，但删除它解决了问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-15T20:05:35.847

我在[这里](https://mvcdeveloper.wordpress.com/2012/02/10/the-provider-did-not-return-a-providermanifesttoken-string-or-how-to-lose-8-hours-on-a-stupid-mistake/)找到了答案：

> “在 ASP.NET MVC3 应用程序中有两个 web.config 文件。一个在根目录下应该放置连接字符串，另一个在 Views 文件夹下，不应该放置连接。猜猜我的连接在哪里！”

# ios - iOS UIView touchesBegan 没有被调用

> ID：11545586
> 
> 赞同：2
> 
> 时间：2012-07-18T16:03:41.067
> 
> 标签：ios

我有一些 UIViews：

```
Top UIView: MatrixViewController
---- Sub1 UIView
---- Sub2 UIView
---- Subx UIView 
```

在每个子视图中，我都设置了 self.userInteractionEnabled=YES。每个 Sub UIView 都会调用它的 touchesBegan...

但是，当触摸任何 Sub 视图旁边时，TopParent 的 touchesBegan 没有被调用？

应用委托：

```
...
self.matrixViewController = [[MatrixViewController alloc] init];
self.window.rootViewController = self.matrixViewController;
[self.window makeKeyAndVisible];
return YES; 
```

TopParent UIView 在 ViewController/viewDidLoad 中创建：

```
CGRect rect = [[UIScreen mainScreen] applicationFrame];
MatrixViewController matrix = [[MatrixViewController alloc] initWithFrame:rect];
[self setView:matrix]; 
```

谢谢

# c++ - 从“int*”到“int”的无效转换

> ID：11545587
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:47.167
> 
> 标签：c++

这行不通。谁能告诉我为什么？

```
#include <iostream>

using namespace std;

int mean( int );

int main() {

    int array[] = {43, 5, 3, 5, 2};

    cout << mean(array);

}

int mean( int list[] ) {
    return list[0];
} 
```

这些是我得到的错误：

```
Invalid conversion from 'int*' to 'int'
Initializing argument 1 of 'int mean(int)' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T16:05:06.057

您正在`mean`使用不同的签名向前声明该函数。修复您的前向声明：

```
int mean( int[] ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T16:05:29.427

您缺少原型中的刹车。试试这个：

```
int mean(int[]); 
```

# iphone - iOS Sim 中的圆角，而不是 iPhone

> ID：11545588
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:49.567
> 
> 标签：iphone, ios, xcode, rounded-corners

我对 iOS 编码真的很陌生，我有一个 UI 问题。

在模拟器中，我的应用程序有这样的圆角：http: [//i.imgur.com/cc8eM.png](http://i.imgur.com/cc8eM.png)

我喜欢！

但在实际的 iPhone 上，它们看起来像这样：http: [//i.imgur.com/hyVKu.png](http://i.imgur.com/hyVKu.png)

我怎样才能让 iPhone 版本有那些圆角？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T23:02:52.497

这是一个新的 iOS6 UI 功能，但很好看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T22:36:45.740

感谢所有的帮助。我最终只是对它们进行了Photoshop处理，但我确实发现了我的问题。我正在使用具有 iOS 6 sim 卡的最新 Xcode 测试版，在 iOS 6 中，带有黑色状态栏的应用程序会自动添加圆角。我的 iPhone 运行的是 5.1.1，因此没有这样的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T16:44:10.037

您是通过设置`view.layer.cornerRadius= 3.0`或让您的艺术家剪切图像来制作此效果吗？

如果您使用此属性：`view.layer.cornerRadius= 3.0`，则应考虑这两个属性：`view.layer.masksToBounds = YES; view.clipsToBounds = YES;`

你可以在 iOS 文档中找到解释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:48:38.370

如果您希望整个应用程序四舍五入-> 进入 AppDelegate 并

```
#import <QuartzCore/QuartzCore.h> 
```

并将这些代码行添加到窗口中：

```
self.window.layer.cornerRadius = 3.0;
self.window.layer.masksToBounds = YES; 
```

# android - AutoCompleteTextView 不显示下拉菜单

> ID：11545589
> 
> 赞同：0
> 
> 时间：2012-07-18T16:03:51.133
> 
> 标签：android, android-widget, autocompletetextview

我有一个按钮（setButton），按下按钮后，我希望修改后的 AutoCompleteTextView 显示下拉菜单

我有两节课

AutoCompleteTextViewTest1Activity.class

```
package com.autocompletetextviewtest1;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;

public class AutoCompleteTextViewTest1Activity extends Activity {
ArrayAdapter<String> adapter1;
ArrayAdapter<String> adapter2;
private InstantAutoComplete actv;
private String[] countries2 ={"Taiwan", "China", "S. Korea", "USA", "Japan", "Russia"};
private String[] countries={};
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

adapter1 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, countries);
adapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, countries2);
actv = (InstantAutoComplete)findViewById(R.id.actv);
actv.setAdapter(adapter1);

Button setButton = (Button)findViewById(R.id.setButton);
Button clearButton = (Button)findViewById(R.id.clearButton);

setButton.setOnClickListener(new OnClickListener(){
public void onClick(View v){
actv.setAdapter(adapter2);
actv.requestFocus();
}
});

clearButton.setOnClickListener(new OnClickListener(){
public void onClick(View v){
actv.setAdapter(adapter1);
        }
});
}
} 
```

和

InstantAutoComplete.class

```
package com.autocompletetextviewtest1;

import android.content.Context;   
import android.graphics.Rect; 
import android.util.AttributeSet; 
import android.widget.AutoCompleteTextView; 

public class InstantAutoComplete extends AutoCompleteTextView { 

public InstantAutoComplete(Context context) { 
super(context); 
} 

public InstantAutoComplete(Context arg0, AttributeSet arg1) { 
super(arg0, arg1); 
} 

public InstantAutoComplete(Context arg0, AttributeSet arg1, int arg2) { 
super(arg0, arg1, arg2); 
} 

@Override 
public boolean enoughToFilter() { 
return true; 
} 

@Override 
protected void onFocusChanged(boolean focused, int direction, 
Rect previouslyFocusedRect) { 
super.onFocusChanged(focused, direction, previouslyFocusedRect); 
if (focused) { 
performFiltering(getText(), 0); 
showDropDown(); 

} 
} 

} 
```

但是我的 AutoCompleteTextView 在按下 setButton 后不显示下拉菜单。我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:16:11.497

尝试在 setButton onClick 中调用 actv.invalidate() 以使用新更新的适配器刷新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T03:31:13.063

这对我有用。请注意，我在适当的地方有日志来检查我的 web 服务调用及其返回值。这对于自动完成的工作至关重要。在您的情况下，您可能需要删除 web 服务调用并自己使用硬编码值填充适配器。

在 onCreate 中初始化

```
fromAutoComplete = new AutoComplete(this, R.layout.autocomplete_list_item);
fromAutoComplete.setNotifyOnChange(true);
fromAddress = (AutoCompleteTextView) findViewById(R.id.fromAddress);
fromAddress.setAdapter(fromAutoComplete);
fromAddress.setOnItemClickListener(this); 
```

自动完成适配器检查您的字符并一遍又一遍地调用网络服务，以显示在下拉列表中。

> > 请注意，
> > 
> > 1.  这个 api 需要一个 google api 密钥，您需要自己生成。也不要忘记为您的密钥启用位置 API。没有这个就**行不通**。
> > 2.  在 web 服务调用中放置变量很重要（出于某种疯狂的原因）。最后的传感器变量对我有用。随意在您的 logcat 中的 fiddler 或 chrome 上对其进行测试。

```
public AutoComplete(Context context, int textViewResourceId) {
    super(context, textViewResourceId);
}

@Override
public int getCount() {
    return resultList.size();
}

@Override
public String getItem(int index) {
    return resultList.get(index);
}

@Override
public Filter getFilter() {
    Filter filter = new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults filterResults = new FilterResults();
            if (constraint != null) {
                // Retrieve the autocomplete results.
                resultList = autocomplete(constraint.toString());

                // Assign the data to the FilterResults
                filterResults.values = resultList;
                filterResults.count = resultList.size();
            }
            return filterResults;
        }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            if (results != null && results.count > 0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }
    };
    return filter;
}

private ArrayList<String> autocomplete(String input) {
    ArrayList<String> resultList = null;

    HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    try {
        StringBuilder sb = new StringBuilder(PLACES_API_BASE + TYPE_AUTOCOMPLETE + OUT_JSON);
        sb.append("?key=" + API_KEY+"&sensor=false");
        sb.append("&components=country:in");
        sb.append("&input=" + URLEncoder.encode(input, "utf8"));
        Log.d(LOG_TAG, "Calling "+sb.toString()) ;

        URL url = new URL(sb.toString());
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
        }
    } catch (MalformedURLException e) {
        Log.e(LOG_TAG, "Error processing Places API URL", e);
        return resultList;
    } catch (IOException e) {
        Log.e(LOG_TAG, "Error connecting to Places API", e);
        return resultList;
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }

    try {
        // Create a JSON object hierarchy from the results
        JSONObject jsonObj = new JSONObject(jsonResults.toString());
        JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

        // Extract the Place descriptions from the results
        resultList = new ArrayList<String>(predsJsonArray.length());
        for (int i = 0; i < predsJsonArray.length(); i++) {
            resultList.add(predsJsonArray.getJSONObject(i).getString("description"));
        }
    } catch (JSONException e) {
        Log.e(LOG_TAG, "Cannot process JSON results", e);
    }

    Log.d(LOG_TAG, resultList.size() + " in total returned.") ;

    return resultList;
} 
```

关于从下拉文本中选择项目

```
@Override
public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
    Double latitude, longitude;
    ArrayList<String> resultList = null;
    HttpURLConnection conn = null;
    StringBuilder jsonResults = new StringBuilder();
    String str = (String) adapterView.getItemAtPosition(position);
    try {
        StringBuilder sb = new StringBuilder(
                "http://maps.googleapis.com/maps/api/geocode/json?" + "address="
                        + URLEncoder.encode(str, "utf-8") + "&sensor=true");

        URL url = new URL(sb.toString());
        Log.d("Taxeeta", url.toString() + " Called");
        conn = (HttpURLConnection) url.openConnection();
        InputStreamReader in = new InputStreamReader(conn.getInputStream());

        // Load the results into a StringBuilder
        int read;
        char[] buff = new char[1024];
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
        }
    } catch (MalformedURLException e) {
        Log.e("Taxeeta", "Error processing Places API URL", e);
    } catch (IOException e) {
        Log.e("Taxeeta", "Error connecting to Places API", e);
    } finally {
        if (conn != null) {
            conn.disconnect();
        }
    }

    try {
        // Create a JSON object hierarchy from the results
        JSONObject jsonObj = new JSONObject(jsonResults.toString());
        JSONObject location = ((JSONObject) jsonObj.getJSONArray("results").get(0))
                .getJSONObject("geometry").getJSONObject("location");
        latitude = location.optDouble("lat");
        longitude = location.optDouble("lng");
        Log.d("Taxeeta", "Received Latitude " + latitude + ": Longitude" + longitude);
        if (view.getId() == fromAddress.getId()) {
            source = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));
            Log.d("Taxeeta", "Source Done");
        } else {
            destination = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));
            Log.d("Taxeeta", "Destination Done");
        }
    } catch (JSONException e) {
        Log.e("Taxeeta", "Cannot process JSON results", e);
    }
} 
```

# web - 更新现有网站

> ID：11545590
> 
> 赞同：0
> 
> 时间：2012-07-18T16:03:51.913
> 
> 标签：web

一位家庭朋友要求我为他们的业务彻底检修网站。我设计了自己的网站，所以我知道一些网页设计和开发的基础知识。

要在家中使用他们的网站，我知道我需要通过 FTP 访问他们的服务器，因此我需要他们的 FTP 凭据以及他们的 CMS 凭据。几天后我要和他们见面，我不想看起来像个白痴！在我开始深入研究之前，在我们第一次会议期间，我还需要问他们什么（除了他们想要的新网站等）吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:04:55.070

从 SEO 的角度来看，您应该关注 301 重定向，因为（我想）部分或所有 URL 地址会改变（取不同的名称、被删除等）

因此，在您创建了站点的新版本之后 - 并且在将其上线之前 - 您应该继续列出所有“旧站点” URL，并最好为每个 URL 确定它的新状态（未更改或重定向，如果所以 - 到什么 URL）。

请注意，即使某些内容不会重新出现在新网站上，您仍然必须重定向 URL（比如主页）以保持链接汁和 SERP 排名。

此外，对于较大的站点（尤其是动态站点），请尝试查找用于批量重定向的 URL 模式。例如，如果您看到 google 索引了 1,000 个 index.php?search=[some-key-word] 页面，则不需要单独重定向每个页面，因为这些可能只是可以使用 REGEX 分组的搜索结果页面被重定向到主搜索结果页面。

要索引“旧站点”URL，您应该：

一个。谷歌中的 site:domainname.com （然后将 SERP 设置为 100 个结果并使用[Xpath](http://www.youtube.com/watch?v=EXhmF9rjqP4)手动转义）

湾。[Xenu](http://xenus-link-sleuth.en.softonic.com/)或其他网站爬虫（有些像screamingfrog）来获取所有URL 的列表。

C。合并excel中的列表并删除所有重复项。

如果您需要 301 重定向方面的帮助，可以从以下链接开始： [http ://www.webconfs.com/how-to-redirect-a-webpage.php/](http://www.webconfs.com/how-to-redirect-a-webpage.php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:43:45.280

如果网站是静态的，了解 html、css 和 javascript 以及 FTP 凭据就足以让您开始使用。但是，如果该站点是动态交互和数据库驱动的，您可能需要询问他们是否要使用 php，在这种情况下，您最终可能会在 wordpress 中构建该站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-17T13:21:50.637

如果您打算从头开始设计网站，请记住这一点。您的朋友可能在某个地方（即托管服务提供商）托管了该网站。您还应该获得它的主机控制面板详细信息，这将有助于管理网站（包括数据库、电子邮件、FTP 等）。

# awk - 我无法修复的一个 awk 脚本错误

> ID：11545591
> 
> 赞同：0
> 
> 时间：2012-07-18T16:03:52.617
> 
> 标签：awk

我有两个文件。 **domain.txt**包含一些域

```
facebook.com
google.com
yahoo.com 
```

**site.txt**包含域下的一些站点，以及它们的 URL 编号。

```
music.google.com  2
image.google.com  3
music.facebook.com  8
image.facebook.com  4
map.yahoo.com   4
new.yahoo.com   7 
```

我将选择站点，其 URL 编号大于其域的平均 URL 编号。例如，**google.com**的平均 URL 数为**(2+3)/2=2.5**，因此会选择**image.google.com 。**

我写了这样的awk脚本：

```
BEGIN {
        #read all domains into memory
        while(getline dom < "./domain.txt" > 0){
                domain[dom]=0;
        }

        #count URLs number and sites number under each domain
        for (dom in domain){
                sitenumber=0;

                close("./site.txt")
                while(getline < "./site.txt" >0){
                        if(match($1,"."dom"$")){
                                domain[dom]+=$2;
                                sitenumber++;
                                printf("%s\n",$0) >> "./sitesunderdomain";
                        } 
                }

                avgsitenumber = domain[dom]/sitenumber;
                system("cat ./sitesunderdomain") #test output

                close("./sitesunderdomain")
                while(getline < "./sitesunderdomain" >0){ #loop A
                        print "why1" #test output
                        if($2>=avgsitenumber){
                                print "why2"  #testoutput
                                print $0,avgsitenumber>>"./result"
                        }
                }
                system("> ./sitesunderdomain")
        }#for
} 
```

然后我在 bash 中运行 awk 脚本，得到输出：

```
music.facebook.com  8
image.facebook.com 4
why1
why2
why1
music.google.com   2
image.google.com  3
map.yahoo.com  4
news.yahoo.com  7 
```

**./**结果是

```
music.facebook.com  8  6 
```

但正如我所料，输出应该是

```
music.facebook.com  8
image.facebook.com 4
why1
why2
why1
music.google.com   2
image.google.com  3
why1
why2
why1
map.yahoo.com  4
news.yahoo.com  7
why1
why2
why1 
```

./result**应该**是：

```
music.facebook.com  8  6
image.google.com  3  2.5
news.yahoo.com  7  5.5 
```

似乎在位置`loop A`，`getline`返回**google.com**和**yahoo.com**的时间。 **为什么？**`0``dom`

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:01:59.773

你的代码是一团糟。这不是使用`awk`. `Awk`自动为您打开并逐行读取您的文件，这不是使用`getline`. 这仅适用于特殊情况。

*首先*：

```
close("./site.txt")
while(getline < "./site-test" >0){ 
```

`./site-test`? 你的文件是`test.txt`. 它在我的测试中死亡。

*第二*：当您可以直接从 RAM 中重用数据时，无需创建文件，例如使用数组。

*第三*：我根本不喜欢您的代码，但要修复它，请`./sitesunderdomain`在读取`getline`和删除之间关闭您的临时文件`system("> ./sitesunderdomain")`，例如：

```
## NOT here.
##close("./sitesunderdomain")

while(getline < "./sitesunderdomain" >0){ #loop A
        print "why1" #test output
        if($2>=avgsitenumber){
                print "why2"  #testoutput
                print $0,avgsitenumber>>"./result"
        }
}

## Better here between the read and the write.
close("./sitesunderdomain")

system("> ./sitesunderdomain") 
```

现在像这样运行脚本：

```
awk -f myscript.awk domain.txt site.txt 
```

并检查输出：

```
cat result 
```

结果如下：

```
music.facebook.com  8 6
image.google.com  3 2.5
new.yahoo.com   7 5.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:09:18.850

我无法理解您的脚本。无需手动打开这样的文件；awk 自己处理。如果您的代码可以修复，我不是那个人。

这是我想出的：

```
#!/usr/bin/awk -f

{
  domain=$1; sub(/^[a-z]*\./, "", domain);
  mean[domain]=(mean[domain]*count[domain]+$2)/++count[domain];
  score[$1]=$2;
}

END {
  printf("%7s\t%6s\t%s\n", "score", "mean", "domain");
  for (hostname in score) {
    domain=hostname; sub(/^[a-z]*\./, "", domain);
    if (score[hostname] > mean[domain]) {
      printf("%6d\t%6.2f\t%s\n", score[hostname], mean[domain], hostname);
    }
  }
} 
```

当我对您的数据运行它时，我得到以下结果：

```
 score   mean  domain
     3    2.50  image.google.com
     8    6.00  music.facebook.com
     7    5.50  new.yahoo.com 
```

这是你期待的输出吗？******

# php - 动态调用 PHP 函数。

> ID：11545593
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:58.153
> 
> 标签：php, function, post, dynamic

我有一个简单的问题，我目前正在以当前方式处理 php / ajax 请求。

```
// ajax_requests.php

<?php
 if(isset($_POST['ajaxvar'] == 'send')){
   // send timestamp
 }
 if(isset($_POST['ajaxvar'] == 'get')){
   // return get
 }
?> 
```

有没有更好的方法来处理这些请求？除了这种处理请求的有点臃肿的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:33:47.323

如果您在“ajaxvars”中发布的值之后命名您的函数，那么您可以像这样运行它们：

```
if (isset($_POST['ajaxvars'])) $_POST['ajaxvars']();

function send(){
    // send timestamp
}

function get(){
    // return get
} 
```

因此，如果您有 $_POST['ajaxvars'] == 'send'，脚本将运行 send() 函数。获取相同。

首先检查发布的函数是否存在也是一个好主意，所以：

```
if (function_exists($_POST['ajaxvars'])) $_POST['ajaxvars'](); 
```

# android - java.lang.NullPointerException 在 ANT 构建过程中处理有序依赖

> ID：11545594
> 
> 赞同：1
> 
> 时间：2012-07-18T16:03:59.573
> 
> 标签：android, ant, adt

我们有一个`ANT`构建过程，可以一次构建我们所有的 android 项目。它完全基于 android 鼓励的构建过程。

我们切换到 ADT20，当我们构建`release`. 在`-build-setup`.

我们`release`使用`ant.properties`包含`key.store`、和. `key.alias`_`key.store.password``key.alias.password`

它失败并出现以下错误：

```
C:\PATH\android-sdks\tools\ant\build.xml:546: java.lang.NullPointerException 
```

这就是它在没有`-debug`旗帜的情况下所说的一切。

有了`-debug`旗帜，我得到了这个：

```
C:\PATH\android-sdks\tools\ant\build.xml:546: java.lang.NullPointerException
    at org.apache.tools.ant.taskdefs.Exit.execute(Exit.java:164)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
    at net.sf.antcontrib.logic.TryCatchTask$CatchBlock.execute(TryCatchTask.java:137)
    at net.sf.antcontrib.logic.TryCatchTask.execute(TryCatchTask.java:225)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T06:45:26.493

甚至这个问题也已经得到了回答。我正在发布我曾经遇到过的这个问题的解决方案。

1.  删除**/gen**和**/bin**目录的内容
2.  重建项目

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:16:25.633

我的构建过程遇到了同样的问题。我的解决方案只是用版本 19 替换 sdk 的工具目录，它工作正常。我可能会重新访问它并更新到 20 并稍后修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:03:59.573

为了解决这个问题，我将属性按特定顺序排列：

`key.store`

`key.alias`

`key.store.password`

`key.alias.password`

我在文件底部取出了所有额外的空白`ant.properties`。

这在旧版本的`ADT`. 不知道是什么改变使它失败。但是重新排序属性并删除空格解决了这个问题。

我希望这对将来的其他人有所帮助，因为我花了 10 个小时试图追踪这个问题。如果有更好的错误详细信息来自`ANT`.

* * *

我使用了这段`ANT`代码来确保空白已经消失。

```
 <replaceregexp
        file="${dirName}/../ant.properties"
        match="\s*"
        replace=""
        byline="true">
    </replaceregexp> 
```

# android - 没有 attrs.xml 文件的自定义 xml 属性

> ID：11545599
> 
> 赞同：2
> 
> 时间：2012-07-18T16:04:19.777
> 
> 标签：android, xml, layout, view

最近我面临着在 xml 布局中将自定义 xml 参数添加到我的视图中。我知道我应该为此目的使用 attrs.xml 文件，但是......我发现，我可以使用自定义参数而根本没有任何 attrs.xml 文件。有人可以解释一下吗？这是一个错误还是一个有效的案例？

这是我的自定义视图：

```
public class TestView extends View {

public TestView(final Context context, final AttributeSet attrs) {
    this(context, attrs, 0);
}

public TestView(final Context context, final AttributeSet attrs, final int defStyle) {
    super(context, attrs, defStyle);
    final String scheme = "http://red.com/ui/scheme";
    if (attrs != null) {
        Log.d("TestView", "custom param value: " + attrs.getAttributeValue(scheme, "cutom"));
    }
} 
```

}

这是主要布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:red="http://red.com/ui/scheme"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<com.red.ui.TestView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffAABBCC"
    red:cutom="customvalue"
    />

 </LinearLayout> 
```

这是一个简单的临时项目，由 Android 向导创建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:44:24.897

您添加的自定义属性在 R.java 中不可用我认为制作自定义属性的主要座右铭是在多个地方使用它。但是通过这段代码我们无法完成相同的场景。

这是示例代码 - attrs.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <declare-styleable name="MyLayout">
    <attr name="text" format="string" />
 </declare-styleable>
</resources> 
```

我正在更改 main.xml 以添加 text 属性

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:red="http://red.com/ui/scheme"
  xmlns:myapp="http://schemas.android.com/apk/res/com.psl"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello"
    myapp:text="Text String" />

<com.psl.TestView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffAABBCC"
    myapp:text="My Special Text String"
    red:cutom="customvalue" />

</LinearLayout> 
```

TestView.java -

```
public class TestView extends View {

public TestView(final Context context, final AttributeSet attrs) {
this(context, attrs, 0);
}

public TestView(final Context context, final AttributeSet attrs, final int defStyle) {
super(context, attrs, defStyle);
final String scheme = "http://red.com/ui/scheme";
if (attrs != null) {
    Log.d("TestView", "custom param value: " + attrs.getAttributeValue(scheme, "cutom"));
}

TypedArray a = context.obtainStyledAttributes(attrs,
        R.styleable.MyLayout);
CharSequence s = a.getString(R.styleable.MyLayout_text);
Log.d("MyTestView", "attrs param value: " + s.toString());
}
} 
```

如果您在 attrs.xml 中创建 attr 后注意到。它随处可见。但是通过自定义命名空间在 xml 本身中定义的 attr 只能通过您必须在任何地方定义的命名空间使用。可能是它的一个错误，因为该属性被添加到一些自定义命名空间而不是应用程序本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:48:42.390

这当然不是“错误”。这就是您在 xml 中使用自定义视图的方式。参考这个：http: [//developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

# python - Python dictionary list merging

> ID：11545602
> 
> 赞同：3
> 
> 时间：2012-07-18T16:04:26.023
> 
> 标签：python, list, set, structure, dictionary

I want to join the dictionaries in a list whose key 'user' are the same, but I don't realize how. for example:

```
[{'count2': 34, 'user': 2},
 {'count4': 233, 'user': 2},
 {'count2': 234, 'user': 4},
 {'count4': 344, 'user': 5}] 
```

would become:

```
[{'count2': 34, 'count4': 233, 'user': 2 },
 {'count2': 234, 'user': 4},
 {'count4': 344, 'user': 5}] 
```

I searched extensively without found something similar in stack overflow, any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T16:20:48.233

```
from collections import defaultdict

dl = [{'count2': 34, 'user': 2},
{'count4': 233, 'user': 2},
{'count2': 234, 'user': 4},
{'count4': 344, 'user': 5}]
print dl

dd = defaultdict(dict)
for d in dl:
    dd[d['user']].update(d)
print dd.values() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:20:10.807

You can sort then use groupby, then merge it

```
from itertools import groupby
def merge(dicts):
    ret = {}
    for d in dicts:
        ret.update(d)
    return ret

d = [...]
sorted_d = sorted(d, key=lambda x: x['user'])
grouped_d = itertools.groupby(sorted_d, key=lambda x: x['user'])
print [merge(y[1]) for y in grouped] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:06:32.950

In the array:

```
[{'count2': 34, 'user': 2},
 {'count4': 233, 'user': 2},
 {'count2': 234, 'user': 4},
 {'count4': 344, 'user': 5}] 
```

such that `a = {'count2': 34, 'user': 2}` and `b = {'count4': 233, 'user': 2}`,

```
dict(a.items() + b.items()) 
```

will return:

```
{'count2': 34, 'count4': 233, 'user': 2 } 
```

EDIT: Working for groups:

[http://codepad.org/ObWT2Hl3](http://codepad.org/ObWT2Hl3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:25:13.237

Something like this should work. But there are probably more efficient ways to do it (and in fewer lines)...

```
# Input
a=[{'count2': 34, 'user': 2},
 {'count4': 233, 'user': 2},
 {'count2': 234, 'user': 4},
 {'count4': 344, 'user': 5}]

# Get set of unique users
u=list(set([x['user'] for x in a]))

# Create a blank list of dictionaries for the result
r=[{}] * len(u)

# Iterate over input and add the dictionaries together
for x in a:
    r[u.index(x['user'])] = dict(r[u.index(x['user'])].items() + x.items())

>>> r
[{'count2': 34, 'user': 2, 'count4': 233}, {'count2': 234, 'user': 4}, {'count4': 344, 'user': 5}] 
```

# eclipse - Oracle ADF EAR 11.1.1 需要 EAR 5.0？

> ID：11545606
> 
> 赞同：0
> 
> 时间：2012-07-18T16:04:35.233
> 
> 标签：eclipse, ear, oracle-adf

我正在尝试在 Eclipse 中创建一个新的 Oracle ADF 应用程序，只要我输入应用程序名称，对话框顶部就会显示一条错误消息：Oracle ADF EAR 11.1.1 requires EAR 5.0

并且 Next 和 Finish 按钮被禁用。

我正在使用：oepe_12.1.1.0.1 Oracle Weblogic Server 12c(12.1.1)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:46:44.930

oepe_12.1.1.0.1 的版本编号具有误导性，因为至少在您构建 ADF 应用程序时 - 基于（并且需要）WLS 10.3.6（请注意，没有 WLS 版本 11.1.1.*）。

坦率

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T22:27:41.030

您不能在 WLS 12c 上使用 ADF 11g - 切换到使用 WLS 11.1.1.* 以匹配您的 ADF 版本。

# nginx - Nginx - 从 redis 读取值并将其存储到变量中

> ID：11545616
> 
> 赞同：4
> 
> 时间：2012-07-18T16:05:05.540
> 
> 标签：nginx, redis, subdomain

有没有办法读取 redis 值并将其存储到 nginx 变量中？

我想将它用于多域网站，其中子域将指向不同的 IP。所有子域都将存储在 redis 中，如下所示：

```
"subdomain" => "address_for_proxy_pass" 
```

所以我需要解析子域（完成），将其存储到变量（完成）中，然后进行 redis 查询（完成）并将结果存储到变量中。如何轻松做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:35:13.743

[set_by_lua](https://github.com/openresty/lua-nginx-module#set_by_lua) + [ngx.location.capture](https://github.com/openresty/lua-nginx-module#ngxlocationcapture)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T02:09:15.267

lua-resty-redis 不能用于`set_by_lua`- [https://github.com/openresty/lua-resty-redis#limitations](https://github.com/openresty/lua-resty-redis#limitations)

但是，`$foobar`可以通过`ngx.var.foobar`using直接在 lua 中设置`access_by_lua`。详细信息可在此处获得：http: [//openresty.org/#DynamicRoutingBasedOnRedis](http://openresty.org/#DynamicRoutingBasedOnRedis)（感谢 OP 和评论）。

变量必须初始化 -`set $myvar ''`

```
 # initialize variable
  set $backend '';

  access_by_lua '
  local redis = require "resty.redis"
  local red = redis:new()
  -- these ENV vars must be initialized with `env` keyword
  red:connect(os.getenv("REDIS_PORT_6379_TCP_ADDR"), os.getenv("REDIS_PORT_6379_TCP_PORT"))
  local res, err = red:get(ngx.var.appid)
  -- set the variable directly
  ngx.var.backend = res
  ';

  proxy_pass http://$backend; 
```

# html - 填充电子邮件客户端中的超链接图像

> ID：11545618
> 
> 赞同：2
> 
> 时间：2012-07-18T16:05:08.683
> 
> 标签：html, css, html-email

我有一个超链接图像和一个段落

```
<a href="#"><img src=""  align="right"/></a><p>Some text</p> 
```

但是这个超链接会在 Outlook 中的电子邮件段落上造成一些填充。

有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:13:33.697

我发现在编写 html 电子邮件时，您必须放弃所有良好实践的概念。使用表格并假设客户端不会理解 css 或不理解旧的 html 标签：

```
<table width="100%" style="width: 100%;">
    <tr>
        <td width="100%" style="width: 100%;">
            <p>Some text</p>
        </td>
        <td align="right" style="text-align: right;">
            <a href="#"><img src="" /></a>
        </td>
    </tr>
</table> 
```

​我建议在每个浏览器和每个可能的客户端中检查它（hotmail、gmail 等在不同的浏览器中、thunderbird、outlook ......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:09:33.450

Styling HTML emails is a somewhat annoying process. Outlook only makes it more complicated as Outlook can appear very different from your classical web based email providers (yahoo, hotmail, gmail, etc.)

That said have you tried applying an inline style to your hyperlink?

```
<a style="padding:0; margin:0;" href="#">...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:26:38.290

通过为图像添加单独的表来修复它

```
<table border="0" cellpadding="0" cellspacing="0" width="x">
   <tr>
     <td><p>Some text goes here</p></td>
     <td><img src="picture.jpg" /></td>
   </tr>
</table> 
```

# android - Android 软键盘错误消息

> ID：11545619
> 
> 赞同：22
> 
> 时间：2012-07-18T16:05:08.193
> 
> 标签：android, android-softkeyboard

导入软键盘示例后，打开 input.xml 时收到错误消息

```
The following classes could not be instantiated:
com.example.android.softkeyboard.LatinKeyboardView (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details 
```

错误：

```
Thu Jul 19 00:03:38 CST 2012 com.example.android.softkeyboard.LatinKeyboardView failed to instantiate.
...
android.content.res.Resources$NotFoundException: Resource ID #0x10d000e type #0x3 is not valid
    at android.content.res.Resources.getBoolean(Resources.java:679)
    at android.inputmethodservice.KeyboardView.<init>(KeyboardView.java:363)
    at android.inputmethodservice.KeyboardView.<init>(KeyboardView.java:270)
    at com.example.android.softkeyboard.LatinKeyboardView.<init>(LatinKeyboardView.java:30)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
    at com.android.layoutlib.bridge.android.BridgeInflater.loadCustomView(BridgeInflater.java:205)
    at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:133)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:296)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:279)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1640)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1391)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1165)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:679)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:359)
    at org.eclipse.ui.part.MultiPageEditorPart.setActivePage(MultiPageEditorPart.java:1081)
    at org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:607)
    at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:362)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:129)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPartControl(CompatibilityEditor.java:95)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:300)
    at sun.reflect.GeneratedMethodAccessor41.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1042)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:418)
    at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:385)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:578)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:314)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:962)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3071)
    at org.eclipse.ui.internal.WorkbenchPage.access$21(WorkbenchPage.java:2996)
    at org.eclipse.ui.internal.WorkbenchPage$8.run(WorkbenchPage.java:2978)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2974)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2933)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2924)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:655)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:614)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:360)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:167)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
    at org.eclipse.jdt.internal.ui.navigator.OpenAndExpand.run(OpenAndExpand.java:50)
    at org.eclipse.ui.actions.RetargetAction.run(RetargetAction.java:221)
    at org.eclipse.ui.navigator.CommonNavigatorManager$3.open(CommonNavigatorManager.java:185)
    at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
    at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
    at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
    at org.eclipse.ui.navigator.CommonViewer.handleOpen(CommonViewer.java:462)
    at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
    at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
    at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
    at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T15:40:11.720

当缺少某些资源时，就会出现这种类型的问题，只需从 log cat 复制资源 id 并在 r.java 文件中搜索并将该资源放在可绘制文件夹中。

愿它帮助你。

安卓恋人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T15:00:42.470

打开你的 R.java 并搜索这个“0x10d000e”id。您将获得一个名称，表明在运行时哪个资源不可用。因此，您可以准确地确定缺少哪个资源。

这个问题主要出现在您使用片段时。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T14:00:05.077

检查中的所有**资源 id**`LatinKeyboardView`是否属于您在 中设置的布局`setContent()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T11:48:04.687

使用正确的 API 级别编译它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T07:52:42.860

在清单文件中试试这个

```
<service
    android:name="SoftKeyboard"
    android:permission="android.permission.BIND_INPUT_METHOD" >
    <intent-filter>
        <action android:name="android.view.InputMethod" />
    </intent-filter>
</service> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-19T12:07:40.307

您尝试在哪个设备或模拟器上运行此示例，该资源似乎不存在于该环境中。检查此示例编写的 API 级别，然后尝试在相同或更高 API 级别的设备或模拟器上运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-09T13:23:30.680

您好，我也遇到了同样的问题，我通过以下步骤解决了......

请下载[https://gitorious.org/replicant/development/source/7b53e3937797ee1eea71c6291bdcd58cb9ddf7a:samples/SoftKeyboard](https://gitorious.org/replicant/development/source/7b53e3937797ee1eea71c6291bdcd58cb9dedf7a:samples/SoftKeyboard)

并复制 SoftKeyboard.java 和 Candidateview.java 文件，并在清单文件中编辑服务，它将起作用

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-31T04:50:00.717

资源 ID 对 android 没有意义，您应该制作正确的 ID，然后通过更改 API 级别进行编译。愿它有帮助

# java - NullPointerException 使用 AsyncTask

> ID：11545621
> 
> 赞同：0
> 
> 时间：2012-07-18T16:05:24.987
> 
> 标签：java, android, nullpointerexception

我正在尝试做一个简单的网站帖子并收到回复，但我在实施`AsyncTask`以提供所需的辅助流时遇到问题。目前我正在获得一个`java.lang.NullPointerException`. 任何想法是什么原因造成的？

日志猫：

```
07-18 11:34:14.829: E/AndroidRuntime(8354): FATAL EXCEPTION: main
07-18 11:34:14.829: E/AndroidRuntime(8354): java.lang.NullPointerException
07-18 11:34:14.829: E/AndroidRuntime(8354):     at ca.waddlesoft.smpclient_android.MainActivity$SmpProcessor.onPostExecute(MainActivity.java:50)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at ca.waddlesoft.smpclient_android.MainActivity$SmpProcessor.onPostExecute(MainActivity.java:1)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at android.os.AsyncTask.finish(AsyncTask.java:602)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at android.os.Looper.loop(Looper.java:137)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at android.app.ActivityThread.main(ActivityThread.java:4514)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at java.lang.reflect.Method.invoke(Method.java:511)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
07-18 11:34:14.829: E/AndroidRuntime(8354):     at dalvik.system.NativeStart.main(Native Method) 
```

我的代码：

```
package ca.waddlesoft.smpclient_android;

import java.net.MalformedURLException;
import java.net.URL;

import ca.waddlesoft.smpclient_android.R;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {
    private TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView tv;
        tv = (TextView)findViewById(R.id.TextView01);
        setContentView(R.layout.activity_main);
        SmpProcessor task = new SmpProcessor();
        task.execute();
    }

    private class SmpProcessor extends AsyncTask <Void,Void,String> {
        @Override
        protected String doInBackground(Void... voids){
        URL url = null;
        try {
            url = new URL("http://secure.g4apps.com");
            String app="A1";
            String data = "E1,E1,AT333AT333,9055627513,2012-02-02 02:02:02,2012-02-02 02:02:02,-454545.343434,434343.232323,A334A334A334A443X,1000000,3434";
            byte [] databyte=data.getBytes();
            String out = SmpClass.smpCall(url,app,data);
            //  String out = new String(smpresponse);
            return out;
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        tv.setText(result);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:13:32.007

2个错误：

*   你在课堂上声明你的`textView`本地+。只需在您的班级中声明即可。
*   你`textView`在调用之前初始化你的`setContentView`

试试这个：

```
package ca.waddlesoft.smpclient_android;

import java.net.MalformedURLException;
import java.net.URL;

import ca.waddlesoft.smpclient_android.R;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {
    private TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView)findViewById(R.id.TextView01);

        SmpProcessor task = new SmpProcessor();
        task.execute();
    }

  private class SmpProcessor extends AsyncTask <Void,Void,String> {

            @Override
            protected String doInBackground(Void... voids){
                URL url = null;
                try {
                    url = new URL("http://secure.g4apps.com");
                    String app="A1";
                    String data = "E1,E1,AT333AT333,9055627513,2012-02-02 02:02:02,2012-02-02 02:02:02,-454545.343434,434343.232323,A334A334A334A443X,1000000,3434";
//                  byte [] databyte=data.getBytes();
                    String out = SmpClass.smpCall(url,app,data);
//                  String out = new String(smpresponse);
                    return out;
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }
            @Override
            protected void onPostExecute(String result) {
                    tv.setText(result);
            }
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:07:12.683

把这一行：

```
tv = (TextView)findViewById(R.id.TextView01); 
```

在这一行之后：

```
setContentView(R.layout.activity_main); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:10:57.817

您有一个*局部* `tv`变量，其中包含您的`TextView`. 由于您没有将引用放入您的`tv`字段中，因此它将为空，因此`NullPointerException`.

您可以通过简单地删除局部变量的声明来解决此问题`tv`：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);            
        tv = (TextView)findViewById(R.id.TextView01);
        SmpProcessor task = new SmpProcessor();
        task.execute();
    } 
```

您还必须移动

```
setContentView(R.layout.activity_main); 
```

操作 s 之前的行，`View`否则 android 框架会抱怨。

如果感到困惑，您可以在此处阅读有关变量范围的信息：[Java 变量范围](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:07:50.627

`tv` 您在本地声明另一个。
所以结果`findViewById`存储在*局部*变量`tv`中，而不是保留的*字段* 中。从您的方法中 删除。 正如@Dheeraj 和@you786 在我之前指出的那样，您还应该 在尝试获取. 在那之后，它应该工作。`tv``null`
`TextView tv;``onCreate`
`setContentView(...)``TextView`

# iphone - 圆形自定义按钮的活动区域较小

> ID：11545623
> 
> 赞同：3
> 
> 时间：2012-07-18T16:05:28.903
> 
> 标签：iphone, objective-c, uibutton, uievent

我有一个自定义按钮（它使用圆形图像作为其自定义视图）。问题是：自定义按钮的活动区域太大，如果我在按钮外点击至少 100 像素，它仍然会被注册为按钮上的点击。这会导致意外点击。

注意：- 我不想减小按钮的大小，因为它已经大于最低要求。我想减少可点击的空间。

***如何减少这些按钮的活动区域？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:43:33.217

如果您的按钮还不是 UIButton 的子类，那么它必须是实现这一点。您可以覆盖`pointInside:withEvent:`以将“可触摸”区域更改为您想要的任何任意形状。一个简单地改变 hit box 插入的子类可能看起来像这样：

```
// --HEADER--
@interface TouchInsetButton : UIButton
@property (nonatomic, assign) UIEdgeInsets touchInsets;
@end

// --IMPLEMENTATION--
@implementation TouchInsetButton
@synthesize touchInsets = _touchInsets;

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    CGRect modifiedHitBox = UIEdgeInsetsInsetRect([self bounds], _touchInsets);
    return CGRectContainsPoint(modifiedHitBox, point);
}

@end 
```

请注意，正如您所注意到的，UIButton 通常使用比其边界稍大的边界框。仅使用此子类而不设置任何插入将导致按钮仅接受完全在按钮范围内的点击。

# objective-c - Objective C 获取字符串的子字符串

> ID：11545629
> 
> 赞同：0
> 
> 时间：2012-07-18T16:05:41.163
> 
> 标签：objective-c

我有以下字符串：

```
[["hello","goodbye"]] 
```

我尝试将“hello”和“goodbye”分成两个单独的字符串。我用：

```
NSArray *str = [mystring componentsSeparatedbyString:@"""]; 
```

所以我不能使用`@"""`，因为`"`是保留字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:07:58.310

You literal string is `[["hello","goodbye"]]` ?

Also you can use `"` if you do `\"` I do believe. Why not use the `,` and strip the `"`

# c++ - 出口类规则

> ID：11545630
> 
> 赞同：-3
> 
> 时间：2012-07-18T16:05:44.973
> 
> 标签：c++

最近我一直想知道为什么我们可以使用 mfc 的类，而它似乎不能导出它的类，因为我知道我们可以使用 __declspec(dllimport) 导出一个类，例如：我在名为 test.dll 的 dll 中定义了一个类 CBaseClass，然后我将它用作我的 test.exe 中的基类；在我可以使用 CBaseClass 之前，我应该首先从 test.dll 导出它；所以我认为 ruld 应该适用于 mfc；但我在 mfc 的源代码中看不到任何地方代码，任何男孩都可以阐明这一点，谢谢

```
class CWnd:public CCmdTarget
{
} 
```

没有__declspec（dllimport），他们为什么我们可以在我们的项目中使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:27:10.110

还有其他方法可以从 DLL 导出。请参阅[http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.100%29.aspx)

# asp.net - 除非用户选择下拉列表，否则如何使用 gridview 表显示所有内容

> ID：11545631
> 
> 赞同：0
> 
> 时间：2012-07-18T16:05:45.773
> 
> 标签：asp.net, stored-procedures

### 嗨，我有一个存储过程，我从中为表选择列

```
@ID nvarchar(200)

AS

BEGIN

    SET NOCOUNT ON
    SELECT 
      [ID]
      ,[Subject]
      ,[From]
      ,[To]
      ,[Body]
      ,[Comment] From Status 
      where ID=@ID 

END 
```

我只有一个只读 gridview 表和一个下拉列表，其中接受了 2 个选项，拒绝。我希望页面首先加载数据库中的所有电子邮件，然后当用户选择接受或拒绝的 ID 以显示该列电子邮件。我的问题是，当用户选择选项时，如果所有电子邮件都显示在 gridview 中，则它不起作用，反之亦然，如果选项正常，则在页面加载时不会显示所有电子邮件。因此，除非用户选择选项，否则我希望首先显示所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:11:13.763

将您的过程更改为此

```
@ID nvarchar(200)

AS

BEGIN

SET NOCOUNT ON
SELECT 
  [ID]
  ,[Subject]
  ,[From]
  ,[To]
  ,[Body]
  ,[Comment] From Status 
  where (ID=@ID  or @ID="All")
END 
```

然后将另一个第一个元素添加到下拉列表中，如下所示：

```
<asp:listitem Value="All" Text="All" /> 
```

现在，当页面加载时，传递的 ID 将是`All`，并且将返回所有内容；除非用户选择`Accepted`, 或`Denied`.

# c - 使用 g_string_free() 的 free() / delete / delete[] / realloc() 无效

> ID：11545641
> 
> 赞同：0
> 
> 时间：2012-07-18T16:06:25.273
> 
> 标签：c, segmentation-fault, glib, libmysql

我有一个`GList`包含`GSList`. 此 GSlist 包含`GString`. 当我释放整个`GList`时，我得到分段错误。

现在检查以下代码。

```
GList *m_rows = NULL;
m_rows = mysql_multiple_rows(mysql, sql1->str);

g_list_foreach(m_rows, mysql_storage_load_settings, &data);
mysql_free_multiple_rows(m_rows); /// <----------------------- works just fine

m_rows = mysql_multiple_rows(mysql, sql2->str);

if(g_list_length(m_rows)>0){
    g_list_foreach(m_rows, mysql_storage_load_accounts, &data);
    mysql_free_multiple_rows(m_rows); /// <----------------------- Segmentation fault!
}else{
    fprintf(stderr, "\e[31m\tUser has no account!\e[0m");
} 
```

所以`m_rows`只分配使用`g_string_new()`, `g_slist_prepend()`和`g_list_prepend()`。`g_string_new()`创建新`GString`的并添加到`GSList`. 然后将所有结果`GSList`添加到`GList`. 它发生在`mysql_multiple_rows`函数中。

他们正在`free`使用`mysql_free_multiple_rows`. 这个函数正好相反。

请参阅清理功能。

```
static void mysql_free_multiple_rows(GList *table){
    g_list_free_full(table, mysql_free_single_row);
}
static void mysql_free_single_row(gpointer data){
    g_slist_free_full(data, msyql_free_single_row_field); // data here is GSlist
}
static void msyql_free_single_row_field(gpointer data){
    g_string_free(data, TRUE); // data here is GString actually
} 
```

谁能告诉我为什么我会收到这个错误？由于内存分配和解除分配顺序相同，我不知道为什么会发生这种情况。

1.  [**Valgrind 输出**](http://pastie.org/4278628)
2.  [**源文件**](https://gist.github.com/3137199)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:17:54.927

Looking at the code, you seem to be freeing `password` in `mysql_storage_load_accounts()`. However, I don't see any special handling for it, so my guess would be that it gets freed twice.

# java - JAVA XML，递归查找

> ID：11545646
> 
> 赞同：1
> 
> 时间：2012-07-18T16:06:35.823
> 
> 标签：java, xml

我需要通过 id 递归查找 xml 节点，如下所示：

```
<categories>
  <category id="1">
  </category>
  <category id="2">
     <category id="3"> 
     </category>
     <category id="4"> 
        <category id="5"> 
        </category> 
     </category>
  </category>
</categories> 
```

我正在使用 DocBuilder。

我知道有 method `getElementById()`，但它在我的情况下不起作用，比如说，`id="5"`当我在根节点中时，我想找到一个带有 的元素。

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:33:20.383

使用根节点调用方法：

```
Element element = getElementById(rootElement, "5"); 
```

以及递归方法：

```
public Element getElementById(Element element, String desiredId){
    if(desiredId.equals(element.getAttribute("id")))
        return element;
    for(int i=0; i < element.getChildNodes().getLength(); i++){
        Node node = element.getChildNodes().item(i);
        if (node.getNodeType() == Node.ELEMENT_NODE){
            Element child = getElementById((Element) node, desiredId);
            if(child != null)
                return child;
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:23:06.687

为什么不做类似下面的伪代码

```
FindChild(parent, id)
{

    if(parent.getChildById(id)) return parent.getChildById(id);

    foreach(parent.child)
    {
         Element found = FindChild(child, id);
         if(found) return found;
    }

    return NULL;
} 
```

如果具有指定 id 的元素出现在层次结构中的多个位置（即返回第一次出现或构建列表），您必须决定该怎么做

# css - 背景链接（在所有背景上！）

> ID：11545649
> 
> 赞同：0
> 
> 时间：2012-07-18T16:06:41.733
> 
> 标签：css, html, hyperlink

> **可能重复：**
> [如何在没有 javascript 的情况下使整个 'div' 在 html 和 css 中可点击？](https://stackoverflow.com/questions/8160494/how-to-make-a-whole-div-clickable-in-html-and-css-without-javascript)

我设置了一个 100% 宽度/高度的 div 以留在网站的背景上，如下所示：

```
.background {
    background-color:rgba(50,50,50,0.4);
    width:100%;
    height:100%;
    position:absolute;
    z-index:-1;
} 
```

我想要一个覆盖整个 div 的链接，但如果我编写这样的代码，我将让链接仅出现在 div 的最后一部分（请记住，这个 div 必须留在后台，上面有一些 div），在其他 div 之后，它保持在它上面。

```
<a href='/home'>
     <div class='background'></div>
</a> 
```

有没有 HTML/CSS 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:13:08.213

您不能在标签内嵌套`<div>`标签`<a>`。但是，您可以使用 CSS属性使`<a>`行为类似于 a 。`<div>``display:block`

**CSS**

```
*, html, body {
    width: 100%;
    height: 100%;
}

.background {
    display: block;
} 
```

**HTML**

```
<a href="#" class="background"></a>​ 
```

[JS小提琴](http://jsfiddle.net/BU7mQ/2/)

# php - PHP强制下载json

> ID：11545661
> 
> 赞同：4
> 
> 时间：2012-07-18T16:07:08.167
> 
> 标签：php, json, download

> **可能重复：**
> [强制使用 PHP 下载文件](https://stackoverflow.com/questions/1465573/forcing-to-download-a-file-using-php)

如果我在变量中有一个 json，我该如何强制下载？（该文件不存在）。

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-18T16:10:38.400

```
header('Content-disposition: attachment; filename=file.json');
header('Content-type: application/json');
echo $json; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:11:07.770

```
$json = json_encode( array( 'test' => 'test' ));

header('Content-disposition: attachment; filename=jsonFile.json');
header('Content-type: application/json');

echo( $json); 
```

# c++ - 关于取消引用和地址空间的基本 C++ 指针问题

> ID：11545662
> 
> 赞同：1
> 
> 时间：2012-07-18T16:07:08.570
> 
> 标签：c++, variables, pointers, dereference, address-space

在下面的代码中，基于阅读[cplusplus.com](http://www.cplusplus.com/doc/tutorial/pointers/)，我试图测试我对指针的基本理解。

```
#include <iostream>
using namespace std;

int main() {
    int foo, *bar, fubar;
    foo = 81;
    bar = &foo;
    fubar = *bar;
    cout << "the value of foo is " << foo << endl;
    cout << "the value of &foo is " << &foo << endl;
    cout << "the value of bar is " << bar << endl;
    cout << "the value of *bar is " << *bar << endl;
    cout << "the value of fubar is " << fubar << endl;
    cin.get();
} 
```

这导致输出：

```
the value of foo is 81
the value of &foo is xx
the value of bar is xx
the value of *bar is 81
the value of fubar is 81 
```

`xx`每次运行时都会发生变化的长数字在哪里。当我添加以下内容时：

```
 cout << "the address of foo is " << &foo << endl;
    cout << "the address of fubar is " << &fubar << endl; 
```

它导致：

```
the address of foo is xx
the address of fubar is xy 
```

与运行时`xy`不同的地方。`xx`

*   **问题1**：在声明中，声明`*bar`是否在那个时刻使它成为一个“指针”，直到它被使用，即`fubar = *bar`在什么时候它是一个取消引用的变量？或者是指针始终是一个变量，而这只是我得到了所有的nooby并被束缚在（可能不正确的）语义中？

*   **问题2**：`xx`每个运行时都会改变一个长数字，所以我说它是地址空间是对的吗？

*   **问题 3**：我是否认为虽然`fubar`和`foo`具有相同的值，但它们是完全独立的并且没有公共地址空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:11:08.007

*   **答案1**：正确。变量`bar`是一个指针，使用`*bar`解引用指针并计算指针指向的内容。意识到虽然它不会评估为 [临时] 副本，而是对其目标的*引用。*

*   **答案2**：“地址空间”与“地址”不同；变量的地址只是它在内存中的位置，而程序的“地址空间”是它可以使用的所有内存。变量没有地址空间，程序有。您在程序输出中看到的是地址（ 和 的地址`foo`）`fubar`。

*   **答案 3**：是的，你是对的。它们具有相同的值，但其中一个发生的事情不会影响另一个（它们位于不同的*地址*，因此是不同的对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:15:11.823

1.  它被声明为`int*`本身就是少量内存来存储地址的类型。指针变量始终是指针。当您使用解引用运算符时，您将获得对您存储的地址的变量的引用。
2.  它是存储变量的[虚拟内存的实际地址。](http://en.wikipedia.org/wiki/Virtual_memory)它们以十六进制显示（很可能）。它不是“地址空间”（参见@Seth 的回答）
3.  是的。当您进行分配时，您正在复制`foo`into的值`fubar`。但是，如果`fubar`是一个指针，并且您分配`bar`给它，它们的取消引用位置将是相同的。

# hibernate - 在休眠顺序标准中将字符串转换为 int

> ID：11545664
> 
> 赞同：6
> 
> 时间：2012-07-18T16:07:12.810
> 
> 标签：hibernate

基本上，我的问题与这个问题相同，但对于 Java (JBoss) Hibernate： [我们如何使用 hibernate 标准 API 将列排序为 int？](https://stackoverflow.com/questions/2871131/how-can-we-order-a-column-as-int-using-hibernate-criteria-api)

我想创建一个从字符串列强制转换为 int 的顺序限制。就像是

```
criteria.addOrder(Order.asc("cast(id as int)")); 
```

例外是“无法解析属性：[Class] 的 cast(id as int)”。我已经用 int 和 integer 尝试了 cast(as) 和 convert(,)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T10:54:14.397

尽管这个话题很老，可能问题已经解决了，但我会发布解决方案。也许它将来会对某人有所帮助。

```
criteria.addOrder(new org.hibernate.criterion.Order("anystring", true) {
            @Override
            public String toSqlString(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
                return "cast(id as int)";
            }
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:14:11.237

如果列包含整数值，最好的解决方案是将其映射为整数而不是字符串。

如果由于不明原因，这是不可能的，您可以[`@Formula("cast(id) as number")`](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e6481)在您的实体中添加一个带有注释的整数字段并在该字段上排序。

# sql - 将 TSQL 格式化为一行

> ID：11545666
> 
> 赞同：8
> 
> 时间：2012-07-18T16:07:16.570
> 
> 标签：sql, sql-server, tsql

我们公司使用一个从 .INI 文件中读取 TSQL 的旧应用程序。由于应用程序处理 INI 文件的方式，TSQL 必须全部放在一行上。我使用Poor Mans TSQL Formatter来为SP之类的东西提供一切整洁的东西，但我想知道是否有一些东西可以做相反的事情 - 采用格式良好的TSQL并将其全部推到一行（删除回车，换行等） . 我在 SSMS 中工作，但也使用 Notepad++，如果它具有该功能，我会很乐意使用其他编辑器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-10-09T13:16:59.880

使用**Notepad++（没有任何插件）**

经过大量的谷歌搜索，我发现在 x64 位版本的 notepad++ 中没有像**TextFX**和**PoorMansTSqlFormatter**这样的插件，甚至不需要。

Notepad++ --> 写查询 --> 编辑 --> 空白选项 --> 删除不必要的空白和 EOL。

[![在此处输入图像描述](../Images/d5f7a9080a2104ef2986f756d3f0a9b5.png)](https://i.stack.imgur.com/xVn63.png)

就是这样。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-18T16:11:47.473

使用记事本++

选择多行的语句，然后在菜单上：TextFX>TextFX Edit>Unwrap Text

![在此处输入图像描述](../Images/ebfec7b9bf181aa3b641fbac752431a4.png)

为了更加轻松，您可以使用快捷方式映射器（设置>快捷方式映射器）将其分配给键盘快捷方式

![在此处输入图像描述](../Images/2bce445c77e925c22a807c2bc235666b.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T07:42:28.513

您可以使用 minify 注释删除[Poor Mans TSQL Formatter中所有不必要的空间](http://architectshack.com/PoorMansTSqlFormatter.ashx#Tips_amp_Tricks_8)

```
[minify]

[/minify] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:51:13.640

我喜欢马丁的回答，这可能是要走的路。但我要指出，您可以只使用字符串操作将回车和换行转换为空格。这在 SSMS 的更高版本中特别容易，它可以在查找/替换对话框中限制使用正则表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-07T14:49:04.940

在 SQL Server 2012 中：

1.  突出显示选定的文本并使用“查找和替换”（ctrl + h）

2.  检查：使用正则表达式

3.  查找：\n

4.  替换为：留空

# xml - 使用 xslt 基于属性值过滤 XML

> ID：11545669
> 
> 赞同：4
> 
> 时间：2012-07-18T16:07:18.883
> 
> 标签：xml, xslt, xslt-1.0

我在这里搜索过，但找不到如何根据其属性过滤 xml。我有这个xml：

```
 <?xml version="1.0" encoding="utf-8"?>
        <document>
            <document_head>
                <title>This is the title</title>
                <version>This is the title</version>
            </document_head>
            <document_body>
                <paragraph id="AXD">
                    <text>
                        This is a text that should be in the result
                    </text>
                    <properties>
                        <size>13px</size>
                        <color>#000000</color>
                    </properties>
                    <author>Current user</author>
                </paragraph>
                <paragraph id="SFI">
                    <properties>
                        <text>
                            This is some other text that should not be in there
                        </text>
                    </properties>
                </paragraph>
                <paragraph id="SFA">
                    <author>Some random guy</author>
                </paragraph>      
                <paragraph id="ARG">
                    This doesn't mean anything.
                </paragraph>
                <paragraph id="RRR">
                    This does, hence should be in there.
                </paragraph>
            </document_body>
        </document> 

```

我期待这个结果：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <document>
        <document_head>
            <title>This is the title</title>
            <version>This is the title</version>
        </document_head>
        <document_body>
            <paragraph id="AXD">
                <text>
                    This is a text that should be in the result
                </text>
                <properties>
                    <size>13px</size>
                    <color>#000000</color>
                </properties>
                <author>Current user</author>
            </paragraph>
            <paragraph id="RRR">
                This does, hence should be in there.
            </paragraph>      
        </document_body>
    </document> 

```

目前，我有这个 XSLT：

```
 <?xml version="1.0" encoding="utf-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method="xml" indent="yes"/>  
      <xsl:template match="@* | node()">
        <xsl:copy>
          <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
      </xsl:template>

      <xsl:template match="document_body/paragraph[not(@id='AXD')][not(@id='RRR')]" />
    </xsl:stylesheet> 

```

这会产生这个 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
        <document>
            <document_head>
                <title>This is the title</title>
                <version>This is the title</version>
            </document_head>
            <document_body>
                <paragraph id="AXD">
                    <text>
                        This is a text that should be in the result
                    </text>
                    <properties>
                        <size>13px</size>
                        <color>#000000</color>
                    </properties>
                    <author>Current user</author>
                </paragraph>      
            </document_body>
        </document> 

```

你知道我错过了什么吗？

谢谢。

**更新：**似乎该代码适用于另一个 XSLT 处理器，但不适用于 Java Transformer。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T16:39:05.650

我相信你的条件应该有效！但是，这里有几种替代方法可以检查，因此请尝试一下，看看这是否会有所不同。

```
<xsl:template match="document_body/paragraph[not(@id='AXD' or @id='RRR')]"/>

<xsl:template match="document_body/paragraph[@id != 'AXD' and @id != 'RRR']"/> 
```

# javascript - 在 Html 中应用 javaScript 时遇到问题

> ID：11545670
> 
> 赞同：0
> 
> 时间：2012-07-18T16:07:20.553
> 
> 标签：javascript, jquery, html

我正在尝试在 html 文件中应用下面的 javascript，此代码是插件的一部分，所以我知道它肯定可以工作，但我无法用标签定义它，无论我尝试什么脚本都不会'不跑。

一旦用户滚动经过一个 div，该 div 就会卡在页面顶部：

```
$(function() {
   var a = function() {
   var b = $(window).scrollTop();
   var d = $("#scroller-anchor").offset({scroll:false}).top;
   var c=$("#scroller");
   if (b>d) {
       c.css({position:"fixed",top:"0px"})
   } else if (b<=d) {
       c.css({position:"relative",top:""})
   }
 };
 $(window).scroll(a);a()
});​ 
```

我尝试使用下面的标签：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

但这没有用。任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:14:48.907

很确定你需要 type 属性。

```
<script type="text/javascript"> 
```

然后，如果您愿意，可以将该源放入，只需添加该属性即可。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

这应该是将代码中的任何内容包含到页面中的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:20:14.147

如果你正在操作 DOM，你还需要用 DOMReady 包装你的代码：

```
$(document).ready(function(){

    //Code goes here

}); 
```

# xml - 如何在 XSLT 2.0 中结合 group-starting-with 和 group-by？

> ID：11545672
> 
> 赞同：0
> 
> 时间：2012-07-18T16:07:24.377
> 
> 标签：xml, xslt

我需要在 XSLT 2.0 中结合 group-starting-with 和 group-by

```
<xsl:for-each-group select="xxx[@attr='yyy']" group-by="@id" group-starting-with="xxx[@attr='yyy']">
...
</xsl:for-each-group> 
```

如何实现这样的组合？

输入：

```
<root> 
        <library id="L1">
            <genre id="a">
                <shelf1 id="1">                
                    <book id="a1" action="borrow">
                        <attributes>
                            <user>John</user>                    
                        </attributes>
                        <other1>y</other1>
                    </book>  
                    <book id="a1" action="extend">
                        <attributes>
                            <user>Woo</user>           
                            <length>3</length>
                        </attributes>
                        <other2>y</other2>
                    </book> 
    </shelf1>
</genre>
    </library>
    </root> 
```

输出：

```
<root> 
    <library id="L1">
        <genre id="a">
            <shelf1 id="1">                
                <book id="a1" action="borrow">
                    <attributes>
                        <user>Woo</user>           
                        <length>3</length>                   
                    </attributes>
                    <other1>y</other1>
                </book> 
</shelf1>
</genre>
</library>
</root> 
```

我的 XSL 片段：

```
<xsl:template match="genre/*">
        <xsl:copy>
            <xsl:apply-templates select="@*" />

            <xsl:apply-templates select="
     book[@action='extend']                             
         [not( preceding-sibling::book[@action='borrow'])]" />

              <xsl:for-each-group
                select="book[@action='borrow'] 
             |   
            book[@action='extend']
                [preceding-sibling::book[@action='borrow']]"
                group-by="@id" group-starting-with="book[@action='borrow']"> (: "This is the one which needs to be combined :)
                    <xsl:for-each select="current-group()[1]">
                        <xsl:copy>   
                            <xsl:apply-templates select="@*" />
                            <xsl:call-template name="merge-books-deeply">    
                                <xsl:with-param name="books" select="current-group()" />
                                <xsl:with-param name="name-path" select="()" />
                            </xsl:call-template>
                        </xsl:copy>
                    </xsl:for-each>     
                </xsl:for-each-group>

            <xsl:apply-templates select="                             
     node()[ not( self::book[@action=('borrow','extend')])]" />

        </xsl:copy>
    </xsl:template> 
```

对于每个具有相同`@id`的节点，`action=borrow`后跟*一个或多个*节点`action=extend`

*   将其合并到带有 action=borrow 的节点。
*   将子属性合并在一起，使其具有兄弟姐妹的所有唯一属性和最新值。
*   保持其他孩子不变

谢谢。约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:29:11.890

好吧，语言中提供的结构是 group-by 或 group-starting-with，因此当您要求组合它们时，我们不清楚您期望什么。

你可以做的是嵌套`for-each-group`例如

```
<xsl:for-each-group select="xxx[@att = 'yyy']" group-by="@id">
  <xsl:for-each-group select="current-group()" group-starting-with="xxx[@attr = 'yyy']">...</xsl:for-each-group>
</xsl:for-each-group> 
```

`xxx[@att = 'yyy']`虽然在写这篇文章时，我想知道有一个分组人口和一个以模式开头的组有什么意义`xxx[@att = 'yyy']`。

所以我认为您需要更详细地解释您的输入的外观以及您希望如何对其进行分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T08:40:46.087

我想这应该这样做：

```
<xsl:template match="root">
    <xsl:apply-templates select="library | genre"/>
    <xsl:apply-templates select="shelf1"/>
</xsl:template>

<xsl:template match="library | genre">
    <xsl:copy>
        <xsl:copy-of select="@*"/>

        <xsl:apply-templates select="library | genre | shelf1"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="shelf1">
    <xsl:copy>
        <xsl:copy-of select="@*"/>

        <xsl:for-each-group select="current()/book" group-by="@id">
            <book id="{current-grouping-key()}" action="borrow">
                <xsl:copy-of select="current-group()[@action='extend']/*"/>
            </book>
        </xsl:for-each-group>

    </xsl:copy>
</xsl:template> 
```

# android - 我可以为片段翻译添加 AnimationListener

> ID：11545673
> 
> 赞同：5
> 
> 时间：2012-07-18T16:07:25.873
> 
> 标签：android, animation, android-fragments, android-animation

我为片段翻译应用了一些动画。我可以添加一个动画侦听器来检测动画开始/结束事件吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T16:14:02.900

如果您在自定义片段内部覆盖`onCreateAnimation()`（或者`onCreateAnimator()`如果您使用 3.0+ 片段......都允许侦听器），则可以提供动画，而不是使用以下自定义动画方法`FragmentTransaction`：

```
@Override
public Animation onCreateAnimation (int transit, boolean enter, int nextAnim) {
    Animation anim;
    if (enter) {
        anim = AnimationUtils.loadAnimation(getActivity(), android.R.anim.fade_in);
    } else {
        anim = AnimationUtils.loadAnimation(getActivity(), android.R.anim.fade_out);
    }

    anim.setAnimationListener(new AnimationListener() {
        public void onAnimationEnd(Animation animation) { }

        public void onAnimationRepeat(Animation animation) { }

        public void onAnimationStart(Animation animation) { }
    });

    return anim;
} 
```

# wordpress - Wordpress 多合一事件日历：仅显示即将发生的事件

> ID：11545678
> 
> 赞同：5
> 
> 时间：2012-07-18T16:07:35.930
> 
> 标签：wordpress, plugins, all-in-one-event-calendar

我正在使用此处找到的多合一事件日历：[http](http://wordpress.org/extend/plugins/all-in-one-event-calendar/)
://wordpress.org/extend/plugins/all-in-one-event-calendar/ 我正在尝试仅显示即将发生的事件（所以没有过去事件）使用 WP_Query() 函数。我看到数据库中有一个*“wp_ai1ec_events”*表和一个名为*“start”*的列，其开始时间采用 yyyy-mm-dd hh:mm:ss 格式。*我可以使用$currentTime = current_time('mysql')*以相同的格式获取当前时间

 *这是我的查询到目前为止的样子：

```
 $frontpageevents='post_type=ai1ec_event&showposts=3&orderby=start&order=ASC&meta_value=yes';
$eventquery = new WP_Query($frontpageevents); 
```

我尝试将 '&start>'.$currentTime 添加到 $frontpageevents 声明的末尾，但这不起作用。我希望有人知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T14:55:13.420

[http://wordpress.org/support/topic/plugin-all-in-one-event-calendar-order-event-by-start-date?replies=3#post-2443756](http://wordpress.org/support/topic/plugin-all-in-one-event-calendar-order-event-by-start-date?replies=3#post-2443756)

我正在寻找类似的东西。我发现上面的帖子应该有帮助！

“事件是帖子，但事件开始/结束日期！= 发布日期。当您进行查询时，您必须进行事件查询，而不是发布查询。换句话说，您必须使用插件的 API 来检索按开始或排序的事件结束日期。感兴趣的函数是 get_events_between()。它位于 Ai1ec_Calendar_Helper 类中。该类位于：app/helper/class-ai1ec-calendar-helper.php 我对您的代码进行了一些修改。我没有测试它因此可能存在拼写错误或其他错误，但逻辑是相同的：http: [//pastebin.com/SNp4TJij](http://pastebin.com/SNp4TJij) “

更新！

所以我现在真的明白了……这是我设置的代码，用于获取今天和一年后的事件。

```
 global $ai1ec_calendar_helper, $ai1ec_events_helper;

    // gets localized time
    $bits = $ai1ec_events_helper->gmgetdate( $ai1ec_events_helper->gmt_to_local( time() ) );

    //sets start time to today
    $start = gmmktime(0,0,0,$bits['mon'],$bits['mday'],$bits['year']);

    //sets end time to a year from today i.e. $bits['year']+1
    $end = gmmktime(0,0,0,$bits['mon'],$bits['mday'],$bits['year']+1);

    //Look in class-ai1ec-calendar-helper.php for details
    $get_events = $ai1ec_calendar_helper->get_events_between($start,$end);

    //loop through results to get post_ids
    foreach($get_events as $event ):
        $post_ids[] = $event->post_id;
    endforeach;

    // The New Events Query
    $args = array(
        'posts_per_page'  => 4,
        'paged' => get_query_var('paged'),
        'post_type'=> 'ai1ec_event',
        'post__in' => $post_ids
    );

    $events_added = new WP_Query( $args );

    // The Loop
    while ( $events_added->have_posts() ) : $events_added->the_post();
        $event = Ai1ec_Events_Helper::get_event($post->ID);
        //Your code here
    endwhile;
    wp_reset_postdata(); 
```

您还可以使用带有 args 的函数 get_events_relative_to() 作为开始时间、结果数量的限制、页面偏移量（在他们的视图中用于 ai1ec 与 wp 分页不同）和过滤器......它返回事件对象的多维数组。我必须创建 $events = $get_events['events'] 并在我的 foreach 中使用 $events 来正确检索 post_ids。

我浏览了 ai1ec-themes 以查找如何显示事件数据的示例。
`echo apply_filters( 'the_content', $event->post->post_content );`
返回 HTML 格式的事件信息，如单个事件页面中显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T03:33:07.407

$post_ids 数组已按开始日期排序。在你的 $args 变量中添加 'orderby' => 'post__in'

```
 $args = array(
        'posts_per_page'  => 4,
        'paged' => get_query_var('paged'),
        'post_type'=> 'ai1ec_event',
        'post__in' => $post_ids,
        'orderby' => 'post__in'
    ); 
```*

# c# - 大写锁定的数字 ID 是什么？

> ID：11545680
> 
> 赞同：2
> 
> 时间：2012-07-18T16:07:40.590
> 
> 标签：c#, dllimport, numeric, keycode, capslock

我需要检查是否按下了大写锁定，并找到了一个需要在线 int 的函数。

```
[DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
    public static extern short GetKeyState(int keyCode); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:12:53.790

C#还有：

```
if (Control.IsKeyLocked(Keys.CapsLock)) 
```

Keys.CapsLock = 20（十六进制的 0x14）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:09:33.393

通过谷歌搜索，我找到[了这个](http://vcpptips.wordpress.com/2009/01/19/how-to-check-the-caps-lock-is-on-or-off/)：

```
void CheckKeyState()
{
   if ((GetKeyState(VK_CAPITAL) & 0x0001)!=0)
      AfxMessageBox("Caps Lock ON!");
   else
      AfxMessageBox("Caps Lock OFF!");
} 
```

随着**0x14**。`VK_CAPITAL`_

 **所以你可以用 C# 编写：

```
public void CheckKeyState()
{
   if ((GetKeyState(0x14) & 0x0001)!=0)
      System.Windows.Forms.MessageBox.Show("Caps Lock ON!");
   else
      System.Windows.Forms.MessageBox.Show("Caps Lock OFF!");
} 
```

当然，[Holger 所说](https://stackoverflow.com/a/11545787/107625)的比使用 P/Invoke 更有意义。**

# android - Android 模拟器解析、别名、gpu 仿真

> ID：11545682
> 
> 赞同：2
> 
> 时间：2012-07-18T16:07:46.107
> 
> 标签：android, gpu, emulation, screen-resolution

我刚刚使用 SDK 管理器下载了 Android 4.1 (API 16) 包，并为 JellyBean 创建了一个模拟器。我现在看到的是 JellyBean 模拟器上的所有东西都是别名。当我在 DDMS 中打开屏幕捕获对话框时，屏幕是巨大的 - 我认为模拟器正在缩小它，从而导致锯齿。截屏： ![模拟器 vs ddms 屏幕截图](../Images/c1902e0fd5299a54f32aedc0e4088246.png)

这是模拟器设置： ![模拟器设置](../Images/dcc59d865fee389738ef209cad8b3d92.png)

我之前在我的 ICS 仿真器中使用过这些相同的设置（减去 GPU 仿真 = 是），包括内置的屏幕分辨率 WXGA720。我应该更改哪些设置来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:14:38.577

确保`Scale display to real size`在“启动选项”对话框（单击 AVD 管理器中的“开始...”后出现）中未选中该选项。

![启动选项对话框](../Images/21e96aff0bcc6320e5b0c25884fe139d.png)

# macos - Mac App Sandbox: can't open folder in sandbox container with NSWorkspace

> ID：11545686
> 
> 赞同：3
> 
> 时间：2012-07-18T16:07:52.500
> 
> 标签：macos, sandbox, nsworkspace

I want to open a folder in sandbox container with Finder, but can't get it working. This is my code.

```
- (IBAction)buttonClicked:(id)sender
{
    NSString *folder = [NSHomeDirectory() stringByAppendingPathComponent:@"Backup"];
    [[NSFileManager defaultManager] createDirectoryAtPath:folder withIntermediateDirectories:YES attributes:nil error:NULL];
    [[NSWorkspace sharedWorkspace] openURL:[NSURL fileURLWithPath:folder]];
} 
```

And I got this error message in Console.

```
CoreServicesUIAgent: Quarantine resolution refused to pid 4288 because it is not allowed to read /Users/username/Library/Containers/com.domain.bundle/Data/Backup 
```

The folder is in sandbox container, it was created by my sandboxed app and I can write files into it, so I think I should have read permission. If I created this folder manually with Finder, then I can open it successfully using NSWorkspace. It's so strange.

What's wrong with my code or is there another way to open folder with Finder in Mac App Sandbox?

# string - Lua中的字符串片段

> ID：11545697
> 
> 赞同：0
> 
> 时间：2012-07-18T16:08:24.747
> 
> 标签：string, algorithm, lua, numbers

我提示用户输入变量“年份”。

我需要获取高斯算法的 4 位变量年份的前 2 位和后 2 位，并将它们存储在两个单独的变量中。

我需要帮助的是从“年”中获取前 2 个和后 2 个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:14:12.893

试试这个：

```
local n = 1234
local first = math.floor(n / 100)
local last = n % 100

print(first, last) 
```

哪个打印：

```
12  34 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:18:27.623

要添加到 Bart 的答案，如果您将其保留为字符串形式，您可以使用它`sub`来获取您想要的部分：

```
year = '1969'
firsttwo = year:sub(1,2)
secondtwo = year:sub(3,4) 
```

# c - Convert argv to a static string, or bug in Visual C++ 2010

> ID：11545698
> 
> 赞同：0
> 
> 时间：2012-07-18T16:08:29.840
> 
> 标签：c, argv

I want to modify an old C code, that takes inputs from the commandline to take a constant argv-vector of strings, defined from inside main.

I get a run-time exception

```
//void main(ac,av)
//char *av[]; 
void main()
{
    char *av[]= {"C:\\spice3f5.exe","input.cir","-r","output.txt",0};
    char  **tv;
    tv = av;
    tv++;
    **tv='-';// "Access violation writing location 0x00708edc."
    (*tv)[0] = '-';//Same runtime exception
} 
```

This simply shouldn't happen...Is it a bug in Visual C++ 2010?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T16:11:37.383

的元素`av`是指向字符串常量的指针。因此，修改它们会导致访问冲突。这不是 Visual C++ 的错误。

# php - prestashop $this->l

> ID：11545699
> 
> 赞同：0
> 
> 时间：2012-07-18T16:08:31.660
> 
> 标签：php, localization, prestashop

with prestashop 1.4.8, PHP 5.3 I want to do this in a module.

```
$myVar = 'Vincent';
echo $this->l($myVar); 
```

I don't know why it doesn't work, and what the 'real' difference with

```
echo $this->l('Vincent') 
```

I need to do this becose labels comes from XML files from my own modules configuration system.

any idea ?

Thanks you all.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:45:44.687

你好，

当你想在 PrestaShop 中翻译某些东西时，你必须使用 l 函数。

这个 ：

```
$fieldToTranslate = $this->l('My Text to translate');  
echo $fieldToTranslate; 
```

类似于 ：

```
echo $this->l('My Text to translate'); 
```

使用 echo 时，您应该看到翻译后的字符串..取决于所选语言..

如果它不起作用，那么您应该检查 l 函数是否可用于您的模块...您是否从正确的类继承？等等

希望这可以帮助，

溴，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T13:24:05.553

你试过这个吗？

```
$myVar = 'Vincent';
echo $this->l($myVar, 'your module name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T11:34:05.890

有点晚了，但这是我的 2 美分。

原因是 Prestashop 需要一个文字字符串。将变量传递给 prestashops translate 函数是没有意义的。如果要翻译的单词可以是任何可能的字符串，翻译模块如何知道使用哪个翻译？

我猜这也是双引号字符串不起作用的原因......它们可能包含变量。

# iphone - 拖动元素 UIImageView。使用 NSMutableArray

> ID：11545700
> 
> 赞同：0
> 
> 时间：2012-07-18T16:08:32.320
> 
> 标签：iphone, objective-c, xcode, ios5

**.m**

```
self.elements=[myElements getElements];

imagesElements = [[NSMutableArray alloc]init];
for(ElemetsList *item in self.elements)
{
        UIImageView *oneelement = [[UIImageView alloc] initWithImage:[UIImage imageNamed:item.imgElement]];
        oneelement.frame = CGRectMake(item.positionX, item.positionY, item.width, item.height);
        oneelement.userInteractionEnabled=YES;
        [imagesElements addObject:oneelement];
}

for(UIImageView *img in imagesElements) 
    [self.view addSubview:img]; 
```

然后我尝试与元素交互：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    for(UIImageView *img in imagesElements) 
    {  
        if([self view] == img)
        {
            CGPoint location = [touch locationInView:self.view];
            img.center=location;
        }
    }
} 
```

但是“if ([self view] == img)”总是“NO”。因此，元素不会拖动。如果它们在数组中，如何拖放项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:18:42.197

添加图像视图时，会将它们设为 的**子视图**，`self.view`因此您需要测试是否`img`在`subviews`数组中。它不能等于包含它的视图。

# jquery - Fancybox 2 - sliding through gallery only via keyboard possible in Firefox

> ID：11545701
> 
> 赞同：1
> 
> 时间：2012-07-18T16:08:32.050
> 
> 标签：jquery, fancybox

My testsite 1: [where it doesn't work](http://schweriner-hof.ant-design.de/restaurant/)

My testsite 2: [where everything is fine (gallery can be seen if you click the list-items in the content)](http://www.zahntechnik-greifswald.de/entwurf/leistungen/)

My script as I use it for testsite 1 (nothing fancy ;)):

```
jQuery(document).ready(function() { 
    jQuery(".fancybox").fancybox();
    jQuery.fancybox.next('right'); 
    jQuery.fancybox.prev('left');   
}); 
```

In Firefox I can't change between the images of the gallery with my mouse. If I click a thumbnail the fancybox opens, but if I click the arrow to get the next image nothing happens. But if I use the enter key I can move through the gallery. If I use Opera, IE9, Chrome or Safari I can use the mouse, but it's a bit "shaky". I have to hit exactly the span with the arrow and fancybox don't use the horizontal sliding but the default sliding effect.

My first guess was it could be some interference with one of the other scripts on the site, but even if I remove all other scripts nothing changes. My second guess was it could be an influence from WP-Minify, but everything is the same wthout minified javascript. I also tried to strip my script to the bone and removed `jQuery.fancybox.next('right'); jQuery.fancybox.prev('left');` ... without any changing.

Could anybody please tell what I'm doing wrong? Thanks

P.S. I don't get any console errors.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:27:40.453

我知道了。我的 css 文件中有一些东西导致了这种奇怪的行为。我`a:active{ position: relative; top: 1px; }`在每个 css 文件中都有一个全局文件，而 fancybox 似乎不喜欢这个；）。

# php - File upload progress bar in iframe

> ID：11545702
> 
> 赞同：1
> 
> 时间：2012-07-18T16:08:32.700
> 
> 标签：php, jquery, html, flash

So - I am well into a project but need to adjust a file upload form to give it a progress bar. (last minute request)

I am uploading the file via an iframe so ideally want to keep the same solution if poss (No page refreshes)

My searches are drawing a blank as the only solution I have seen requires php version 5.2 and the APC module installed. I have neither (running php version 5.1.6) - can install APC if required.

I am open to anything (flash, jquery) and am really posting as a last resort to get some ideas or even gauge if its possible.

# sql - SELECT .. WHERE NOT IN (SELECT ..) 与字符串的性能急剧下降

> ID：11545707
> 
> 赞同：5
> 
> 时间：2012-07-18T16:08:49.810
> 
> 标签：sql, performance, postgresql

**问题：**

```
SELECT new_filename
FROM tmp2_import_lightnings_filenames
WHERE new_filename
    NOT IN (SELECT filename FROM service.import_lightnings_filenames LIMIT 64500)
LIMIT 1; 
```

执行时间：**62 毫秒**。

```
SELECT new_filename
FROM tmp2_import_lightnings_filenames
WHERE new_filename
    NOT IN (SELECT filename FROM service.import_lightnings_filenames LIMIT 65000)
LIMIT 1; 
```

执行时间：**4.742 秒**。

（所有限制仅用于测试）。

巨大的滞后！并且呈指数增长。

**表格：**

```
CREATE TABLE public.tmp2_import_lightnings_filenames (
  new_filename VARCHAR(63) NOT NULL, 
  CONSTRAINT tmp2_import_lightnings_filenames_pkey PRIMARY KEY(new_filename)
) WITHOUT OIDS; 
```

表大小：7304 个字符串

数据示例：`/xml/2012-07-13/01/01-24.xml`

```
CREATE TABLE service.import_lightnings_filenames (
  id SERIAL, 
  filename VARCHAR(63) NOT NULL, 
  imported BOOLEAN DEFAULT false, 
  strokes_num INTEGER, 
  CONSTRAINT import_lightnings_filenames_pkey PRIMARY KEY(id)
) WITHOUT OIDS;

CREATE UNIQUE INDEX import_lightnings_filenames_idx
ON service.import_lightnings_filenames
USING btree (filename COLLATE pg_catalog."default"); 
```

表大小：70812 个字符串

数据示例：`44;/xml/2012-05-26/12/12-18.xml;TRUE;NULL`

**查询计划：**

```
 Limit  (cost=0.00..2108.11 rows=1 width=29) (actual time=240.183..240.183 rows=1 loops=1)
   Buffers: shared hit=539, temp written=307
   ->  Seq Scan on tmp2_import_lightnings_filenames  (cost=0.00..7698823.12 rows=3652 width=29) (actual time=240.181..240.181 rows=1 loops=1)
         Filter: (NOT (SubPlan 1))
         Buffers: shared hit=539, temp written=307
         SubPlan 1
           ->  Materialize  (cost=0.00..1946.82 rows=64500 width=29) (actual time=0.009..198.313 rows=64500 loops=1)
                 Buffers: shared hit=538, temp written=307
                 ->  Limit  (cost=0.00..1183.32 rows=64500 width=29) (actual time=0.005..113.196 rows=64500 loops=1)
                       Buffers: shared hit=538
                       ->  Seq Scan on import_lightnings_filenames  (cost=0.00..1299.12 rows=70812 width=29) (actual time=0.004..42.418 rows=64500 loops=1)
                             Buffers: shared hit=538
 Total runtime: 240.982 ms

  Limit  (cost=0.00..2125.03 rows=1 width=29) (actual time=30734.619..30734.619 rows=1 loops=1)
   Buffers: shared hit=547, temp read=112258 written=669
   ->  Seq Scan on tmp2_import_lightnings_filenames  (cost=0.00..7760626.00 rows=3652 width=29) (actual time=30734.617..30734.617 rows=1 loops=1)
         Filter: (NOT (SubPlan 1))
         Buffers: shared hit=547, temp read=112258 written=669
         SubPlan 1
           ->  Materialize  (cost=0.00..1962.49 rows=65000 width=29) (actual time=0.798..42.306 rows=64820 loops=363)
                 Buffers: shared hit=543, temp read=112258 written=669
                 ->  Limit  (cost=0.00..1192.49 rows=65000 width=29) (actual time=0.005..116.110 rows=65000 loops=1)
                       Buffers: shared hit=543
                       ->  Seq Scan on import_lightnings_filenames  (cost=0.00..1299.12 rows=70812 width=29) (actual time=0.003..43.804 rows=65000 loops=1)
                             Buffers: shared hit=543
 Total runtime: 30735.267 ms 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:42:18.950

性能下降的原因似乎是您用完了[**`work_mem`**](http://www.postgresql.org/docs/current/interactive/runtime-config-resource.html#GUC-WORK-MEM)并且`materialize`步骤开始换出到磁盘。我在这里引用手册：

> work_mem (integer)
> [...] 哈希表用于哈希连接、基于哈希的聚合和基于哈希的**IN 子查询**处理。

强调我的。通过提高设置`work_mem`并再次运行查询来验证这一点。正如评论中提供的@a_horse，通过调用为当前会话设置它：

```
set work_mem = '64MB'; 
```

你不需要你的系统管理员。您可以在会话中重置为默认值：

```
reset work_mem; 
```

会话结束时设置将消失。更改`postgresql.conf`（并重新加载）中的设置以获得永久效果。

许多 PostgreSQL 软件包都带有非常保守的设置（默认 1MB）。这在很大程度上取决于您的工作量，但通常在 4 GB 或更大的机器上 16 MB 是最低要求。我在具有 12 GB RAM 的专用数据库服务器上使用 64 MB - 只有少数并发用户。

您可能需要对设置进行一些常规调整。[这是PostgreSQL Wiki](http://wiki.postgresql.org/wiki/Performance_Optimization)中一般性能优化的指针列表。您还可以`work_mem`在链接后找到有关调整的更多信息。

* * *

除此之外，重写您的查询也可能会加快速度。`IN`具有大列表的子查询往往是 PostgreSQL 中最慢的选择。

### 左连接/为空

```
SELECT new_filename
FROM   tmp2_import_lightnings_filenames t
LEFT   JOIN (
    SELECT filename
    FROM   service.import_lightnings_filenames
    LIMIT  65000
    ) x ON t.new_filename = x.filename 
WHERE  x.filename IS NULL; 
```

### 不存在

更快，特别是在 中重复`service.import_lightnings_filenames`：

```
SELECT new_filename
FROM   tmp2_import_lightnings_filenames t
WHERE  NOT EXISTS (
    SELECT 1
    FROM (
        SELECT filename
        FROM   service.import_lightnings_filenames
        LIMIT  65000
        ) x
    WHERE t.new_filename = x.filename 
    ); 
```

与**CTE**相同（可能不会更快，但更容易阅读）：

```
WITH x AS (
    SELECT filename
    FROM   service.import_lightnings_filenames
    LIMIT  65000
    )
SELECT new_filename
FROM   tmp2_import_lightnings_filenames t
WHERE  NOT EXISTS (
    SELECT 1
    FROM   x
    WHERE  t.new_filename = x.filename 
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:07:37.307

```
-- SET work_mem=20000;
SET random_page_cost=1.1;
SET effective_cache_size=10000000; 
```

设置`work_mem`为 1--20 MB 将更喜欢哈希表（只要它们适合核心）这对于中小型查询有效。

设置`random_page_cost`得较低将导致查询生成器在需要时首选索引扫描。这是 OP 的第一个和第二个查询之间的跳闸点。（但在那里，索引扫描阶段被跳过，有利于 seqscan）默认值（=4）太高了）

`effective_cache_size`是对操作系统维护的 LRU 缓冲量的估计。将其设置得尽可能高（不会导致交换）

# php - 通过 MySQL 连接 3 个表

> ID：11545708
> 
> 赞同：0
> 
> 时间：2012-07-18T16:08:52.323
> 
> 标签：php, mysql

我正在尝试加入 3 个表以访问每个表中的数据。在这种情况下，主表将是 Stats 表。所以我需要访问 Players 表以获取他们的 NextOpponent，然后我需要访问 Defense 表以在 NextOpponent 上运行计算。任何想法都必须实现所有这三个。

当前 SQL 语句：（当前处于打印出重复的永无止境的循环中）

```
$query="SELECT * FROM Stats
    INNER JOIN Defense ON Stats.Team =  Defense.Team
    INNER JOIN Players ON Defense.Team = Players.team"; 
```

这是我的数据库结构。

```
Players
-PID (Primary)
-Name
-NextOpponent

Stats
-PID (Primary)
-Name
-Touchdowns
-Receptions
-etc....

Defense
-Team (Unique)
-Points 
```

所以我的预期输出是：

```
Chris Johnson
Next Opponent: IND
Defense Points: 100 
```

更新：我现在可以访问这些字段，但是当我回显防守点时，它实际上返回了球队防守的点，球员不是他们下一个对手的防守点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:14:02.490

像这样：

```
SELECT * FROM Stats s, Defense d, Players p 
WHERE s.Team = d.Team AND d.Team = p.team; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:25:32.817

怎么用`GROUP BY p.id`？

**更新**

这是最后的查询：

`SELECT * FROM Stats s JOIN Players p ON p.PID = s.PID JOIN Defense d ON d.Team = p.upcoming GROUP BY p.PID`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:27:34.517

SQL 不会返回无穷无尽的数据集。我建议查看您的代码以确保您阅读循环中的下一条记录。

# c - Starting with graphs

> ID：11545713
> 
> 赞同：0
> 
> 时间：2012-07-18T16:09:14.947
> 
> 标签：c

I know this may sound a lot naive, but can someone please explain me how can i implement graphs in C language. I have read the theory, but I am not able to get off the blocks with graph programming.

* * *

I would really appreciate if someone could explain how would to create a graph using adjacency lists and adjacency matrix and how would you perform breadth first search and depth first search in C code with some explanations

* * *

And before anything, I would like to tell you that this is not a homework. I really want to learn graphs but can't afford a tutor.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:36:32.657

我假设这里的图是顶点和边的集合。为此，您需要一个指向结构的指针数组。这是图的邻接表表示。这些结构至少有一个值，即节点号和指向另一个结构的指针。在将新节点插入图形时，只需转到数组的适当索引并在开始时推送节点。这是插入的 O(1) 时间。我的实现可能会帮助您了解它的实际工作原理。如果你在 C 方面有很好的技能，那么理解代码不会花费太多时间。

```
//  Graph implementation by adjacency list

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_SIZE 1000

typedef struct node{
    int number;
    struct node * next;
} Node;

//  U is starting node, V is ending node
void addNode (Node *G[], int U, int V, int is_directed)
{
    Node * newnode = (Node *)malloc(sizeof(Node));
    newnode->number = V;
    newnode->next = G[U];
    G[U] = newnode;

//  0 for directed, 1 for undirected
    if (is_directed)
    {
        Node * newnode = (Node *)malloc(sizeof(Node));
        newnode->number = U;
        newnode->next = G[V];
        G[V] = newnode;
    }
}

void printgraph(Node *G[], int num_nodes)
{
    int I;
    for (I=0; I<=num_nodes; I++)
    {
        Node *dum = G[I];
        printf("%d : ",I);
        while (dum != NULL)
        {
            printf("%d, ",dum->number);
            dum =dum->next;
        }
        printf("\n");
    }

}

void dfs (Node *G[], int num_nodes, int start_node)
{
    int stack[MAX_SIZE];
    int color[num_nodes+1];
    memset (color, 0, sizeof(color));
    int top = -1;
    stack[top+1] = start_node;
    top++;
    while (top != -1)
    {
        int current = stack[top];
        printf("%d  ",current);
        top--;
        Node *tmp = G[current];
        while (tmp != NULL)
        {
            if (color[tmp->number] == 0)
            {
                stack[top+1] = tmp->number;
                top++;
                color[tmp->number] = 1;
            }
            tmp = tmp->next;
        }
    }

}

void bfs (Node *G[], int num_nodes, int start_node)
{
    int queue[MAX_SIZE];
    int color[num_nodes+1];
    memset (color, 0, sizeof (color));
    int front=-1, rear=-1;
    queue[rear+1] = start_node;
    rear++;printf("\n\n");
    while (front != rear)
    {
        front++;
        int current = queue[front];
        printf("%d  ",current);

        Node *tmp = G[current];
        while (tmp != NULL)
        {
            if (color[tmp->number] == 0)
            {
                queue[rear+1] = tmp->number;
                rear++;
                color[tmp->number] = 1;
            }
            tmp = tmp->next;
        }
    }

}  

int main(int argc, char **argv)
{
    int num_nodes;
    // For Demo take num_nodes = 4
    scanf("%d",&num_nodes);
    Node *G[num_nodes+1];
    int I;
    for (I=0; I<num_nodes+1 ;I++ )
        G[I] = NULL;

    addNode (G, 0, 2, 0);
    addNode (G, 0, 1, 0);
    addNode (G, 1, 3, 0);
    addNode (G, 2, 4, 0);
    addNode (G, 2, 1, 0);
    printgraph( G, num_nodes);
    printf("DFS on graph\n");
    dfs(G, num_nodes, 0);
    printf("\n\nBFS on graph\n");
    bfs(G, num_nodes, 0);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:49:40.923

好吧，一个真正幼稚和基本的答案是，可以使用包含指向其他此类数据结构的指针的数据结构在 C 中表示图形。图实际上只是双向链表，可以从单个节点具有多个链接。如果您还没有消化链表和双向链表，那将是一个很好的起点。

假设你有一个邻接表，{a,b},{b,c},{d},{b,e}。首先，你解析它并列出你所有的独特项目。（一个常规的链表、数组等等，它只是一个临时结构来帮助你。你可以绕过它，即时执行它，并且可能会获得加速，但这很简单。）遍历该列表，你会生成一个每个项目的节点。对于每个节点，您再次遍历邻接列表并在它看到自己时创建一条边。这是节点内部指向另一个节点的指针。

最后，您拥有所有节点的常规列表，因此您不会丢失那个单独挂出的“d”节点。您还拥有所有节点的图表，因此您可以了解它们之间的关系。

**搜索**
跨图搜索是一个非常基本的想法。从一个节点开始，比较，移动到它的一个邻居，然后再做一次。虽然有很多陷阱。就像进入一个无限循环并知道何时停止。

如果您想要比您已经在网上找到的更好的解释，您将不得不提出更具体的问题。

# java - Desfire - Ndef 应用程序的命令：获取安全异常

> ID：11545715
> 
> 赞同：1
> 
> 时间：2012-07-18T16:09:24.353
> 
> 标签：java, nfc, mifare

我将以下命令发送到 Desfire 标签以检测 Ndef Application ：

```
new CommandAPDU(0x00, 0xA4, 0x04, 0x00, new byte[]{(byte) 0xD2, (byte) 0x76, 0x00, 0x00, (byte) 0x85, 0x01, 0x01} 
```

我无法得到任何响应，因为我收到以下安全异常：SCARD_W_RESET_CARD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:14:09.917

实际上，您正在做的是通过 AID 选择应用程序。理论上，如果卡找不到这个 AID，即卡上没有这样的应用程序，它应该返回状态字 6A82。如果不是这种情况，很可能是卡或读卡器有故障。我不知道您的源代码片段的详细信息。你能提供更多细节吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:07:13.253

看起来您已将 P2 设置为 0（请求在响应中返回文件控制信息），而 Le 不存在。这不符合最新版本的 ISO 17816-4。尝试将 Le 设置为 0，然后选择命令将符合 Type 4 Tag 版本 2 规范。

# php - Yii Jquery AJAX 调用未触发

> ID：11545716
> 
> 赞同：2
> 
> 时间：2012-07-18T16:09:26.117
> 
> 标签：php, jquery, ajax, yii, call

我一直在研究并尝试学习完成此任务的正确方法。我已经完成了以下操作，但我的表格仍然没有任何变化。无论如何，看看是否正在进行ajax调用？任何人都可以更正此代码以弄清楚为什么我的表单中的字段没有任何更改。

在我的模型中，我具有以下功能

```
 public function standardRate($country) 
    { 

    $country_std_rate = Yii::app()->db->createCommand()       
       ->select('AVG(rate_syr_mh)')       
       ->from('packaging_metrics')       
       ->where(array('like', 'country', '%'.$country.'%'))    
       ->queryRow();    

            echo CJSON::encode($country_std_rate);  

    } 
```

在我的控制器中，我添加了此功能，并将“countryRate”添加到我的所有人的访问控制中

```
public function countryRate() 
    { 
            $input_country = $_POST['country']; 

            $model = PackagingMetric::model()->standardRate($input_country); 
            echo CJSON::encode($model);  

            Yii::app()->end(); 

            $this->render('countryRate',array( 
                    'model'=>$model, 
            )); 

    } 
```

这是我的表单中的 Jquery 调用

```
 $('#PackagingMetric_std_rate').live('click',function() 
    {  

 var country =  $('#country').val();  

       $.ajax({  
               type: 'POST',  
               url: 'PackagingMetric/countryRate',  
               data: {country:country},  

                           success: function(data)  
                               {                                                      

                $('#PackagingMetric_std_rate').html(data); 

               } 

                               }); 

             }); 
```

但是，我的表单上没有任何值改变，我正在使用 Yii-Debug-toolbar 并且在单击表单上的相应字段时没有看到任何 POST 调用或任何 sql 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:19:40.713

将控制器中的函数重命名为 actionCountryRate()

当向控制器发出发布请求时，它会使用操作前缀查找操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:18:25.237

您的`url`参数`$.ajax();` ~~错误~~可能是错误的。

也就是说，如果您没有隐藏入口脚本 ( *index.php* )，则必须编写：

```
url: 'index.php/controllername/actionname' 
```

代替：

```
url: 'controllername/actionname' 
```

最好使用[`createUrl()`](http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail "http://www.yiiframework.com/doc/api/1.1/CController#createUrl-detail")：

```
url: '<?php echo $this->createUrl('PackagingMetric/countryRate'); ?>' 
```

（当然，`echo`上面以及如何在 js 中包含 php 代码将取决于您首先如何包含 js）

并将您的 countryRate 命名为`actionCountryRate()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:29:29.987

我考虑在触发 ajax 调用时使用绝对 url。尝试以这种方式制作您的网址，它将解决您的问题。

```
url: '<?php echo Yii::app()->createAbsoluteUrl('PackagingMetric/countryRate');           ?>', 
```

并且您的控制器操作名称应为“actionCountryRate”，因为此函数是从 url 命中的，而不是从控制器内部调用的，如果您正在使用访问控制，还要设置其 accessRule，否则该函数将不会执行。

# java - 在性能方面，在典型的令人尴尬的并行场景中使用 Hadoop over MPI 会更好吗？

> ID：11545719
> 
> 赞同：0
> 
> 时间：2012-07-18T16:09:31.687
> 
> 标签：java, c, performance, hadoop, mpi

我对两者都是新手，但我想了解什么时候使用一个比另一个更好。

我知道 Hadoop 只适用于令人尴尬的并行任务（而且 MPI 几乎适用于其他任何任务），但我不禁注意到使用 MPI 开发大规模并行程序对于`MPI_Bcast`and`MPI_Allreduce`函数几乎是微不足道的。

那么谁能告诉我更多关于每个（Hadoop 和 MPI）的最佳使用场景的信息？是否有任何时候（性能方面）我应该寻找一个而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:29:31.327

MPI 和 Hadoop 是为不同的目的而设计的。MPI 是一种相对简单的通信中间件，适用于紧密耦合的稳定静态系统，例如超级计算机或专用计算集群。它试图在消息传递方面非常轻便和快速，并提供一些处理数据数组的选项。虽然它支持异构环境，但它不支持故障转移或容错——如果一个进程死掉或某个计算节点发生故障，这通常会导致整个 MPI 作业中断。

# c# - SQL DELETE（级联删除与触发器与“手动”-DELETE）

> ID：11545722
> 
> 赞同：2
> 
> 时间：2012-07-18T16:09:34.607
> 
> 标签：c#, sql, sql-server-2005, cascading-deletes

我目前正在使用 SQL Server Management Studio 2005 并且遇到了一些问题，但首先是我的 DB 模式的提取（重要的）：

[imghack 链接到图片](http://www.imghack.se/64885)

我想从`test`表中删除它所连接的所有内容（由它组成）。

问题是，我不能再改变数据库了（而且真的不想改变，因为使用它的程序已经太大了）。

当我尝试删除表中的条目`test`并为相应的外键关系打开级联 DELETE 时，DBMS 不会让我执行删除，因为它检测到某种循环（可能是由`contr_tray`表引起的）。

尝试通过我的程序手动删除条目时（使用 a`SqlCommandBuilder`或`cmd.ExecuteNonQuery())`我收到此错误：

> DELETE 语句与 REFERENCE 约束冲突...

如果我使用触发器向下“级联”删除过程，也会发生同样的情况。

有人能帮我一下吗？谢谢！

PS：我还尝试创建一个连接表，其中属于该`subset`表的所有列都只是 NULL`contr_tray`表已连接到复制表并让`SqlCommandBuilder`处理这个，但我的 SQL 技能似乎不符合标准（即我没有得到正确的 SQL 语法）[然后我还可以获得我需要的所有 ID 的不同值......]

任何帮助将不胜感激，并再次提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:01:00.930

SQL Server（令人讨厌！）不支持对**菱形**依赖项的 ON CASCADE DELETE。在您的情况下，`Block`它位于“钻石”的底部，因此 SQL Server 无法自动将父级删除向它级联。

由于您没有使用识别关系，因此您需要先 SELECT 自上而下查找所有要删除的 ID，然后执行实际的 DELETE**自下而上**（以避免在此过程中违反 FK）。

您应该能够将此逻辑封装在一系列 INSTEAD OF DELETE 触发器中 - 您的触发器到底有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:31:04.477

您提供的错误与级联删除无关。它告诉您不能删除一行，因为它被外键引用。当您没有从 Test 到 Well 的所有级联删除（包括其间的所有关系）时，就会发生这种情况。

如果这不是您期望的答案，我们需要有关如何在每个表之间设置关系的更多信息。

# node.js - 图像上传失败 w/nodejs express

> ID：11545724
> 
> 赞同：5
> 
> 时间：2012-07-18T16:09:44.567
> 
> 标签：node.js, express

我正在尝试使用带 express 的 Node 上传图像，但出现以下错误。我已经看到了一些关于此问题的问题，这些问题表明异步数据库调用是问题的原因。我想在理论上使用 bodyParser，bodyParser 应该让我连接然后强大，所以我更喜欢不禁用 bodyParser 的解决方案。

就我而言，我没有进行任何数据库调用 - 我的所有代码都复制在下面。任何人都可以对此有所了解，我们将不胜感激。

> 500 错误：解析器错误，在 IncomingMessage 的 IncomingForm.write (/Users/me/Projects/Project/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js:145:17) 处解析了 44 个字节中的 40 个。(/Users/me/Projects/Project/node_modules/express/node_modules/connect/node_modules/formidable/lib/incoming_form.js:95:12) 在 IncomingMessage.emit (events.js:64:17) 在 HTTPParser.onBody ( http.js:121:23) 在 Socket.ondata (http.js:1026:22) 在 Socket._onReadable (net.js:683:27) 在 IOWatcher.onReadable [作为回调] (net.js:177:10 )

这是我的 app.js 文件（咖啡脚本）：

```
express = require('express')
routes = require('./routes')
app = module.exports = express.createServer()

app.configure(() ->
  app.set('views', __dirname + '/views')
  app.set('view engine', 'jade')
  app.use(express.bodyParser({
    uploadDir: '/tmp/upload'
  }))
  app.use(express.methodOverride())
  app.use(express.cookieParser())
  app.use(app.router)
  app.use(express.static(__dirname + '/public'))
)

app.configure('development', () ->
  app.use(express.logger())
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }))
)

app.configure('test', () ->
  app.use(express.logger())
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }))
)

app.configure('production', () ->
  app.use(express.logger())
  app.use(express.errorHandler())
)

app.get('/images/new', (req, res) ->
    console.log("getting image form")
    res.render('forms/image_upload', {title: 'Images'})
)

app.post('/images', (req, res) ->
    console.log("post run")
    res.send('uploaded')
)

app.listen(3000, () ->
  console.log("Express server listening on port %d in %s mode", app.address().port, app.settings.env)
) 
```

这是我的部分表格（玉）：

```
form#new-images(action="/images", enctype="multipart/form-data", method="post" )
    input#image-url(placeholder="Enter image url", type="text")
    input#image-files(type="file", multiple="multiple")
    input#submit(type="submit", value="Upload") 
```

这是我的包（npm ls）

```
├─┬ connect-form@0.2.1 
│ └── formidable@1.0.11 
├─┬ connect-mongodb@1.1.4 
│ ├─┬ connect@1.8.5 
│ │ ├── formidable@1.0.11 
│ │ ├── mime@1.2.5 
│ │ └── qs@0.5.0 
│ └─┬ mongodb@1.0.2 
│   └── bson@0.0.6 
├─┬ express@2.5.9 
│ ├─┬ connect@1.8.7 
│ │ └── formidable@1.0.11 
│ ├── mime@1.2.4 
│ ├── mkdirp@0.3.0 
│ └── qs@0.4.2 
├── expresso@0.9.2 
├── formidable@1.0.11 
├─┬ jade@0.26.1 
│ ├── commander@0.5.2 
│ └── mkdirp@0.3.0 
├── knox@0.0.9 
├── less@1.3.0 
├─┬ mongoose@2.6.5 
│ ├── hooks@0.2.1 
│ └─┬ mongodb@1.0.2 
│   └── bson@0.0.6 
├─┬ multipart@0.1.5 
│ └── mime@1.2.6 
├─┬ session-mongoose@0.0.2 
│ ├─┬ connect@1.8.7 
│ │ ├── formidable@1.0.11 
│ │ ├── mime@1.2.5 
│ │ └── qs@0.5.0 
│ └── mongeese@0.0.1 
├─┬ socket.io@0.9.6 
│ ├── policyfile@0.0.4 
│ ├── redis@0.6.7 
│ └─┬ socket.io-client@0.9.6 
│   ├─┬ active-x-obfuscator@0.0.1 
│   │ └── zeparser@0.0.5 
│   ├── uglify-js@1.2.5 
│   ├─┬ ws@0.4.19 
│   │ ├── commander@0.5.2 
│   │ ├── options@0.0.3 
│   │ └── tinycolor@0.0.1 
│   └── xmlhttprequest@1.2.2 
└── sys@0.0.1 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T20:38:17.363

我以前遇到过这个确切的问题。尝试为每个输入标签添加一个“名称”值。这对我有用。

# matlab - Matlab从模糊聚类中输出每个聚类

> ID：11545729
> 
> 赞同：0
> 
> 时间：2012-07-18T16:09:52.450
> 
> 标签：matlab, cluster-analysis, fuzzy

如何在 matlab 中使用 FCM 输出每个集群的数据？

```
[center,U,obj_fcn] = fcm(data,cluster_n) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:23:23.837

我使用`U`向量来确定每个数据点属于哪个类。它的内容可以被认为是每个类属于一个类的概率（注意所有列的总和为 1），因此选择哪个类最有可能是一种合理的方法。这是通过存储的第二个输出参数来完成的`max()`。

下面我已经说明了一些您​​可以使用的通用代码。

```
%# Start parameters and variables
nClasses = 3;
CM = jet(nClasses); %# Colormap for visualization of up to 255 classes

%# Create dataset
data = [mvnrnd([0 0],eye(2),100); mvnrnd([3,3],0.5*eye(2),50)];

%# Cluster
[center,U,obj_fcn] = fcm(data,nClasses); 

%# Extract class assignment
[~,y] = max(U); 

%# Visualize
f1=figure(1);clf
plot(data(:,1),data(:,2),'.k')
hold on
for i = 1 : nClasses
    plot(data(y==i,1),data(y==i,2),'o','color',CM(i,:));
end 
```

![在此处输入图像描述](../Images/a2927b32b9673aeb5c76e52b5a774e57.png)

编辑：

要将一个类的数据点提取到一个新变量中，只需使用

```
class1data = data(y==1,:); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2014-05-25T05:00:29.787

我的数据集包含 4 个属性的 900 行。现在我在每个属性中将它聚集在 9 个集群中。我将如何在 matlab 中编写代码，以便显示每个集群中的所有数据？现在我只得到 center,U, obj_func。

我得到的数据是让我计算标准偏差。所以我需要每个集群中的所有内容。

# php - 以字节为单位获取图像大小以检查错误图像

> ID：11545731
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:02.930
> 
> 标签：php

如何以字节为单位获取图像大小。这是为了检测错误的图片网址。

示例：我的数据库中有两个图像链接

1.  im1.jpg
2.  im2.jpg

但是，仅`im1.jpg`在“img”文件夹中可用。

我想检测错误的图像 URL，以便删除它们。

如果有其他方法，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:10:56.397

使用[file_exists](http://php.net/manual/en/function.file-exists.php)检查文件是否存在并使用[filesize](http://php.net/manual/en/function.filesize.php)检查文件大小；）

# mysql - 我应该如何将 iOS 设备令牌存储在 sql 数据库中？

> ID：11545732
> 
> 赞同：5
> 
> 时间：2012-07-18T16:10:06.070
> 
> 标签：mysql, ios, token, apple-push-notifications

我正在制作一个接收推送通知的 iOS 应用程序。一切都设置正确，我已经让它工作了。我测试它的方法是在发送通知的 .php 文件中手动输入我自己手机的设备令牌。我知道我需要建立一个存储所有设备令牌的 SQL 数据库。我也知道我必须在 Xcode 的 dedRegisterForRemoteNotificationWithDeviceToken 中“调用”这个网站。我知道如何做这一切，但我不确定我应该如何为数据库中的实际令牌创建字段，以及如何正确解析它。

如果我没记错的话，当我 NSLog 注销我的设备令牌时，我会得到类似“< xxxx xxxx xxxx xxxx >”的信息。我想我必须将其解析为“xxxxxxxxxxxxxxxxxx”。

我确定我会解决这个问题的。我的主要问题是，token 的列应该是什么类型？INT？VARCHAR？我可以说它是某种十六进制，但我不知道如何在数据库中处理它..

我正在考虑使用 (TokenID int AUTO_INCREMENT, Token (??) UNIQUE);

我不需要用户或任何东西..只是令牌（TokenID 只是我的标准程序..）。这是为一个字段指定的一种“新闻”通知。任何人都知道我的令牌值应该是什么类型？也许还有如何将它从“< xxx >”解析为“xxx”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:26:09.120

我在这里找到了一个例子：[http ://www.easyapns.com/mysql-tables](http://www.easyapns.com/mysql-tables)

```
 `devicetoken` char(64) NOT NULL, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-16T20:21:21.560

正确的方法是将值存储为 BINARY(32) 并使用 MySQL 函数 UNHEX 和 HEX 来存储和检索值。

```
INSERT INTO devices SET devicetoke=UNHEX('$token'), ...

UPDATE devices SET badgecount=badgecount+1 WHERE devicetoken=UNHEX('$token')

SELECT HEX(devicetoken) AS token FROM devices WHERE ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T10:05:15.853

怎么样`BINARY(32) NOT NULL UNIQUE`？

# javascript - 您可以在进行 window.location 更改之前检查服务器吗？

> ID：11545735
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:15.617
> 
> 标签：javascript

我需要做的主要是`window.location = http://myserver.com`一个条件语句，说明如果您可以连接到此服务器然后执行它，否则留在当前 window.location 并提示一条消息说您无法连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:15:53.727

通过测试您的服务器（假设它与您所在的域相同，否则它将抛出 allow-origin-not-null 或其他东西）进行检查：

```
function hasInternets() {
    console.log("hasInternets: " + window.location.href.split("?")[0] + "?" + Math.random());
    var s = $.ajax({ 
        type: "HEAD",
        url: window.location.href.split("?")[0] + "?" + Math.random(),
        async: false
    }).status;
        console.log("s: " +s);
    //thx http://www.louisremi.com/2011/04/22/navigator-online-alternative-serverreachable/

    return s >= 200 && s < 300 || s === 304; } 
```

# java - java中多线程场景中的列表更新

> ID：11545737
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:26.393
> 
> 标签：java, multithreading, list, synchronization

我有一个场景，我需要对一个非常大的列表（比如 9000+）条目进行一些处理，然后将处理后的条目添加到一个新列表中。所以为了做到这一点，我采取了多线程的方法。

在以下两种方式中，哪种方式效率更高：

1.  我应该给每个线程单独的列表对象，然后将所有线程的结果添加到一个最终列表中。
2.  我应该使用同步列表并允许所有线程同时添加到该列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:14:18.483

当线程可以独立工作时，它们的工作效果最好。我倾向于给每个线程自己的工作并在它们完成后收集结果。

在此示例中，每个线程独立工作。

```
ExecutorService service = 
List<Work> workList = 
int blockSize = (workList.size() + threads -1)/threads;
List<Future<List<Results>>> futureResults = new ArrayList<>();
for(int i=0;i<threads;i++) {
    int start = i * blockSize;
    int end = Math.min(workList.size(), (i + 1) * blockSize);
    final List<Work> list2 = worksList.subList(start, end);
    futureResults.add(service.submit(new Callable<List<Results>>() {
        public List<Results> call() {
             return process(list2);
        }
     });
 }
 List<Results> results = new ArrayList<>();
 for(Future<List<Results>> future:futureResults) 
     results.addAll(future.get()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:19:39.760

### 为什么你认为线程是一种解决方案，你并没有真正列出并发解决的问题？

在事物的宏伟计划中，9000 个条目并不是很多需要处理的事情。如果你说，900 万个条目，每个条目需要 10 秒来处理，那可能是另一回事了。

除非处理每件事需要很长时间（相对）并且**不受**CPU 限制（比如在远程机器上等待做某事），否则我会说在这种情况下多线程不会给你任何东西，而是不需要复杂。

即使处理时间很长，线程也意味着共享数据，从您提供的非常稀疏的模糊信息来看，一个简单的异步方法可能会更好地使用`Queue`from `java.util.concurrency`。

# python - 在 Python (pymssql) 中跳过没有类型检查的键

> ID：11545740
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:34.977
> 
> 标签：python, typechecking, pymssql

我需要访问所有非整数键，`dict`如下所示：

```
result = { 
           0 : "value 1",
           1 : "value 2",
           "key 1" : "value 1",
           "key 2" : "value 2", 
         } 
```

我目前正在这样做：

```
headers = [header for header in tmp_dict.keys() if not isinstance(header, int)] 
```

我的问题：

1.  有没有办法在没有**类型检查**的情况下做到这一点？
2.  这`tmp_dict`是来自使用属性的查询`pymssql`，`as_dict=True`并且由于某种原因，它返回所有列名以及预期的数据，但还包括由整数索引的相同数据。如何将查询结果作为仅包含列值和数据的字典？

谢谢你的帮助！

PS - 尽管我的问题可能通过回答**2**得到解决，但我很好奇如何在没有类型检查的情况下完成此操作。主要针对那些说“永远不要进行类型检查”的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:35:33.233

查看pymssql（1.0.2）的源码，很明显没有选项可以让模块不生成整数索引的数据。但请注意，如果列名为空，则可以省略按列名索引的数据。

```
/* mssqldbmodule.c */
PyObject *fetch_next_row_dict(_mssql_connection *conn, int raise) {
    [...]
    for (col = 1; col <= conn->num_columns; col++) {
        [...]
        // add key by column name, do not add if name == ''
        if (strlen(PyString_AS_STRING(name)) != 0)
            if ((PyDict_SetItem(dict, name, val)) == -1)
                return NULL;

        // add key by column number
        if ((PyDict_SetItem(dict, PyInt_FromLong(col-1), val)) == -1)
            return NULL;
    }
    [...]
} 
```

关于您的第一个问题，通过类型检查过滤结果集肯定是最好的方法。这正是当 as_dict 为 False 时 pymssql 返回数据的方式：

```
if self.as_dict:
    row = iter(self._source).next()
    self._rownumber += 1
    return row
else:
    row = iter(self._source).next()
    self._rownumber += 1
    return tuple([row[r] for r in sorted(row.keys()) if type(r) == int]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:44:49.797

关于您关于类型检查的问题，duck-type 方法是查看它是否可以转换为或用作`int`.

```
def can_be_int(obj):
    try:
        int(obj)
    except (TypeError, ValueError):
        return False
    return True

headers = [header for header in tmp_dict.keys() if not can_be_int(header)] 
```

请注意，`float`可以通过截断 s 将 s 转换为`int`s，因此这不一定完全等效。

上面的一个轻微变化是使用`coerce(0, obj)`. `int(obj)`这将允许任何类型的对象可以转换为具有整数的通用类型。您还可以执行类似`0 + obj and 1 * obj`的操作来检查可以在整数数学表达式中使用的内容。

您还可以检查其字符串表示是否全为数字：

```
headers = [header for header in tmp_dict.keys() if not str(header).isdigit()] 
```

这可能更接近于不使用类型检查的解决方案，尽管它会更慢，当然，列名完全有可能是一个只有数字的字符串！（老实说，其中许多方法都会失败。）

有时显式类型检查确实是最好的选择，这就是为什么该语言有工具可以让你检查类型。在这种情况下，我认为你很好，特别是因为结果字典被记录为只有整数和字符串作为键。而且您通过使用`isinstance()`而不是显式检查以正确的方式进行操作`type() == int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:16:05.423

背后的基本原理`as_dict=True`是您可以按索引和名称访问。通常你会得到`tuple`你的索引，但出于兼容性原因，能够索引 a`dict`就好像它是一种`tuple`意味着取决于列号的代码仍然可以工作，而不知道列名是可用的。

如果您只是`result`用来检索列（按名称或索引），我不明白您为什么担心删除它们？不顾一切地继续。（除非出于某种原因您计划在其他地方腌制或以其他方式保存数据......）

但是，过滤掉它们的最好方法是使用`isinstance`- 在这种情况下，鸭子类型实际上是不符合 Python 且效率低下的。例如：

```
names_only = dict( (k, v) for k,v in result.iteritems() if not isinstance(k, int) ) 
```

而不是一个`try`和`except`跳舞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:36:36.447

```
>>> sorted(result)[len(result)/2:]
['key 1', 'key 2'] 
```

这将删除重复的`integer-keyed`条目。我认为你正在做的很好。

# extjs3 - extjs中的解码响应错误

> ID：11545742
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:41.577
> 
> 标签：extjs3

提交表单时，我正在做以下事情。但我得到这个错误：

错误解码响应：SyntaxError：语法错误

这是我的 onSubmit 成功函数：

```
onSubmit: function() {
    var vals = this.form.getValues();   
    Ext.Ajax.request({
    url: 'ticketSession.php',
    jsonData: {
        "function": "sessionTicket",
        "parameters": {
            "ticket": vals['ticket']
        }
    },
    success: function( result, request ) {
        var obj = Ext.decode( result.responseText );
        if( obj.success ) {
            //alert ('got here');
            th.ticketWindow.hide();
            Web.Dashboard.loadDefault();

        }
    }, 
```

这是我的ticketSession.php

```
<?php
function sessionTicket($ticket) {
    if( $_REQUEST['ticket'] ) {
        session_start();
        $ticket = $_REQUEST['ticket'];
        $_SESSION['ticket'] = $ticket;
        echo("{'success':'true'}");

     }
    echo "{'failure':'true', 'Error':'No ticket Number found'}");

}
?> 
```

我还修改了我的 onsubmit 函数，但没有用：

```
Ext.Ajax.request({
    url: 'ticketSession.php',
    method: 'POST',
    params: { 
    ticket: vals['ticket']
    }, 
```

我只是在附和这个，但我仍然得到那个错误

```
echo("{'success':'true'}"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:13:08.127

也许这可以帮助你。这是一个嵌套在处理程序中的 ajax 请求的工作示例。

```
var deleteFoldersUrl = '<?php echo $html->url('/trees/delete/') ?>';

function(){
            var n = tree.getSelectionModel().getSelectedNode();

            //FolderID
            var params = {'folder_id':n['id']};

            Ext.Ajax.request({
                url:deleteFoldersUrl,
                params:params,
                success:function(response, request) {
                    if (response.responseText == '{success:false}'){
                        request.failure();
                    } else {
                        Ext.Msg.alert('Success);
                    }
                },
                failure:function() {
                    Ext.Msg.alert('Error');
                }
            });
} 
```

# javascript - chrome 扩展在浏览器操作上插入内容脚本

> ID：11545743
> 
> 赞同：27
> 
> 时间：2012-07-18T16:10:46.110
> 
> 标签：javascript, google-chrome-extension

我正在尝试制作一个元素荧光笔 chrome 扩展。工作流程： - 点击浏览器图标 - 点击页面 - 突出显示点击的元素

我在使用 manifest_version:2 在浏览器操作时运行内容脚本时遇到问题当我检查出现的弹出窗口时，它说：

> 拒绝执行内联脚本，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:” (popup.html:5)。

这是 popup.html 中的内联脚本所在的位置，并且该脚本不起作用

我有：

清单.json：

```
{
   "browser_action": {
      "default_icon": "images/icon.gif",
      "default_popup": "popup.html"
   },
   "manifest_version": 2,
   "description": "MEH!",
   "name": "My First Extension",
   "permissions": [
      "tabs", "http://*/*", "https://*/*"
   ],
   "version": "0.1"
} 
```

popup.html：

```
<html>
  <head>
  </head>
  <body>
    <script>
      chrome.tabs.executeScript(null,{
        code:"document.body.style.backgroundColor='red'"
      });
    </script>
    <div id='msg' style="width:300px">...</div>
  </body>
</html> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-18T16:17:16.453

原来我无法正确阅读错误，直到我在这里看到它

Apparently manifest v2 does not allow you to have inline scripts, so you just need to

```
src="path_to_the_file.js" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T10:22:59.677

In extension to @tak3r's answer and @Doug's comment:

Inline scripts need to be changed to external scripts.

Move:

```
<script>
  chrome.tabs.executeScript(null,{
    code:"document.body.style.backgroundColor='red'"
  });
</script> 
```

To a new file called `main.js` and remove the `<script></script>` tags

Include the following in the `<head></head>` of your HTML

```
<script type="text/javascript" src="main.js"></script> 
```

# jquery - Jquery Undo - preventdefault

> ID：11545744
> 
> 赞同：1
> 
> 时间：2012-07-18T16:10:46.930
> 
> 标签：jquery

我有一些文本框和一个下拉菜单。如果用户无权修改它们，我喜欢显示一条消息并撤消他们在下拉菜单中选择的内容或撤消他们键入的内容 - 在文本框的情况下。

我尝试了以下下拉菜单，但没有奏效：

```
 $('#ReasonDropDown').change(function () {

        if (permission == "False") {
            alert("You do not have permssion to make to modify this field.");
            event.preventDefault(); 
            return false;
        }
    }); 
```

它根本没有撤消我选择的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:12:35.087

您可以像下面这样尝试，它适用于任意数量的`select`元素。

```
$('select').attr('data-default', function() {
    return this.value;
}).change(function(e) {
    if (permission == 'False') {
        alert('You do not have permission to modify this field.');
        this.value = $(this).data('default');
    }
}); 
```

并且也可以为`text`字段做类似的事情。

**[演示](http://jsfiddle.net/QStkd/628/)**

# django - 使用 nginx、uwsgi、django、pgpool、postgresql 请求太慢

> ID：11545745
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:49.353
> 
> 标签：django, nginx, uwsgi

我已经部署了一项服务。
它由 nginx、uwsgi、django、pgpool、postgresql 堆栈提供服务。

没有db访问的页面没有问题。
但是，具有来自 postgres 的一些数据的页面速度很慢。

实际上，数据库查询时间相当快。不到 10 毫秒。

但是给客户端的结果超过了 120000 毫秒

*   uwsgi日志

    [pid: 2056|app: 0|req: 4/10] 211.207.245.120 () {44 vars in 1116 bytes} [Thu Jul 19 00:53:31 2012] GET /account/admin/cb_main/invitationuser/ =>在 122126 毫秒 (HTTP/1.1 200) 中生成 38606 字节 373 字节中的 8 个标头（1 个在核心 0 上切换）

我的设置如下
请检查我的设置并解决我的问题

*   nginx 设置

    ```
    upstream cuying {
            ip_hash;
            server 127.0.0.1:9001;
    }

    server {
            listen  8080;
            root    /home/cuying_mgr/;
            client_max_body_size 20M;
            server_name     cuying.com;
            location / {
                    uwsgi_pass cuying;
                    include uwsgi_params;
                    uwsgi_read_timeout 120;
                    uwsgi_send_timeout 120;
            }
    } 
    ```

*   uwsgi 设置

    ```
    chdir=/home/cuying_mgr/develop/virenv/cuying/cuying
    processes=2
    workers=8
    enable-threads=true
    socket=127.0.0.1:9001
    module=cuyingProject.wsgi:application
    master=True
    pidfile=/tmp/cuying-master.pid
    vacuum=True
    close-on-exec=True
    max-requests=3000
    post-buffering=8192
    socket-timeout=120
    limit-post=20480000
    virtualenv=/home/cuying_mgr/develop/virenv/cuying
    daemonize=/var/log/uwsgi/cuying.log 
    ```

请帮帮我！
太慢了。。。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:42:14.580

用于`profiler`在处理请求时找出最慢的点。看起来问题不是由`postgresql`或`uwsgi`事情引起的。

请参阅[ProfilingDjango wiki 页面](https://code.djangoproject.com/wiki/ProfilingDjango)。

# ios - 何时调用这些 iAd 委托方法？

> ID：11545746
> 
> 赞同：1
> 
> 时间：2012-07-18T16:10:49.450
> 
> 标签：ios, delegates, iad

好的，我正在使用委托方法

*   (void)bannerViewActionDidFinish:(ADBannerView *)banner

作为唯一的测试广告，当它被调用时我无法测试。我知道当广告用 X 关闭时会调用它，因为我可以在测试广告中单击它并调用委托方法。我的问题是，当用户与广告交互时（即点击下载广告应用程序）还是仅在关闭时调用它？

我也在尝试了解 iAds 的收入。

如果在我的应用程序的横幅视图中显示广告，这会产生任何收入吗？

如果点击广告横幅来加载广告，是否会产生任何收入？

如果单击广告横幅以将广告加载到全屏，是否计入点击率？

如果加载了广告并与之互动，这是否会产生任何收入，这是否计入点击率？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:39:05.317

好的，我在这里找到了我需要的信息：

作为唯一的测试广告，当它被调用时我无法测试。我知道当广告用 X 关闭时会调用它，因为我可以在测试广告中单击它并调用委托方法。我的问题是，当用户与广告交互时（即点击下载广告应用程序）还是仅在关闭时调用它？

**在应用程序被 iAd 覆盖后调用 Delegate，然后返回给应用程序**

我也在尝试了解 iAds 的收入。

如果在我的应用程序的横幅视图中显示广告，这会产生任何收入吗？

**如果您向开发人员展示 iAd，即指向 AppStore 的链接以下载应用程序，那么您只有在横幅中点击 iAd 时才能获得收入。如果您展示来自品牌公司（例如 BMW）的 iAd，您会因为拥有 iAd 横幅而获得收入，并且会因为被点击而获得更多收入**

如果点击广告横幅来加载广告，是否会产生任何收入？

**是的**

如果单击广告横幅以将广告加载到全屏，是否计入点击率？

**是的**

如果加载了广告并与之互动，这是否会产生任何收入，这是否计入点击率？

**是的**

谢谢

# doctrine-orm - 为什么 Doctrine 的代理对象中的函数调用指向父对象而不是继承的子对象？

> ID：11545751
> 
> 赞同：0
> 
> 时间：2012-07-18T16:10:57.347
> 
> 标签：doctrine-orm, doctrine-odm

我创建了一个继承的文档类，请参见下面的代码。文档可以正常保存，但是在获取文档并尝试调用子函数时，即使子文档具有 getPriceDefinition() 函数，我也会收到错误**Call to undefined method Proxies__CG__\Acme\ProductBundle\Document\ProductBase::getPriceDefinition () 函数。**代理也指向 ProductBase，而不是 SimpleProduct。

父类 ProductBase.php

```
<?php
namespace Acme\ProductBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document
 * @MongoDB\InheritanceType("SINGLE_COLLECTION")
 * @MongoDB\DiscriminatorField(fieldName="type")
 * @MongoDB\DiscriminatorMap({"simple"="SimpleProduct"})
 */
abstract class ProductBase
{   
    /**
     * @MongoDB\Id;
     */
    protected $_id;

    /**
     * @MongoDB\String
     */
    public $comment;
} 
```

子类 SimpleProduct.php

```
<?php
namespace Acme\ProductBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document
 */
class SimpleProduct extends ProductBase
{

    /**
     * @var PriceDefinition
     * @MongoDB\EmbedOne(targetDocument="PriceDefinition") 
     */
    protected $priceDefinition;

    public function getPriceDefinition() {
        return $this->priceDefinition;
    }
} 
```

调用代码（仅部分）：

```
$product = $this->dm->getRepository('AcmeProductBundle:Product')->findOneBy(array('_id' => $productId));
$priceDefinition = $product->getPriceDefinition(); // The error is thrown here 
```

最后是数据库中的文档（即与上述文档正确持久化）。

```
{
  "_id": ObjectId("5006d7b76803fa9403000007"),
  "priceDefinition": {
     "referenceValue": 1000000,
     "currency": "iso: EUR",
     "taxBehavior": "fi_vat_a",
     "isGrossPrice": false
  },
  "type": "simple"
} 
```

一般来说，这似乎 Doctrine 不会识别返回的对象是子类。但是-例如，如果我将数据库类型值更改为与 DiscriminatorMap 不匹配的“简单”（例如“非简单”）以外的其他值，则该学说会显示“注意：未定义索引：非简单（... )”。

最奇怪的是，只要我在父类 (ProductBase) 中添加 getPriceDefinition()，它就会被正确调用且没有错误。

呃……这是一个很长的问题。无论如何，我只是无法找出这里有什么问题。是我的 getRepository('AcmeProductBundle:Product') 调用，还是我的继承定义......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:26:57.350

鉴于这`ProductBase`是抽象的，您是否有任何理由不将其注释为[MappedSuperclass](http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/annotations-reference.html#mappedsuperclass)？ODM 正在构建一个扩展 ProductBase 的代理（它在您的`findOneBy()`调用和尝试调用之间`getPriceDefinition()`这样做），这在实践中没有意义。代理对象旨在与映射类互换使用——在这种情况下，代理正在扩展一个永远不应该单独存在的抽象类。即便如此，似乎这种奇怪的映射正在导致鉴别器逻辑中的错误，因为应该`SimpleProduct`使用该类型字段。

此外，将`type`字段的数据库值更改为`not-simple`不应导致代码引发 PHP 通知。我们应该抛出异常。

[您介意在GitHub 存储库](https://github.com/doctrine/mongodb-odm)中为这两个错误打开单独的问题吗？如果您愿意，也欢迎失败的测试用例。

# c# - 无法加载文件或程序集“System.Web.WebPages.Razor”MVC 3

> ID：11545758
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:11:16.960
> 
> 标签：c#, asp.net-mvc-3, iis, razor

我收到这个错误。

> 无法加载文件或程序集“System.Web.WebPages.Razor，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

我的托管服务提供商说 MVC 3 已经安装，它适用于同一服务器上的一个域，但该域不工作。

我看到了很多与此相关的问题和答案，但我想避免手动添加 DLL。如果 MVC 3 安装正确。我不会得到这个错误。正确的？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:07:22.903

根据我上面的评论，听起来应用程序引用了一些 MVC 4 组件。很高兴听到您有解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T16:56:04.543

在为非 MVC 网站进行删除和发布后，我遇到了这个错误。显然，我的站点中的某些内容正在引用 System.Web.Helpers 并且被复制（即使我从项目中删除了引用），但以下 dll 未在发布中复制：

*   System.Web.Razor
*   System.Web.WebPages
*   System.Web.WebPages.Deployment
*   System.Web.WebPages.Razor

我宁愿从项目中删除所有这些 dll，但简单的解决方案是将上述每个 dll 的“复制本地”属性设置为 True。

# python - 编写测试运行程序时是否可以进行 TDD？

> ID：11545759
> 
> 赞同：2
> 
> 时间：2012-07-18T16:11:20.843
> 
> 标签：python, django, testing, tdd, bootstrapping

我目前正在为 Django 编写一个新的测试运行程序，我想知道是否可以使用我自己的测试运行程序对我的测试运行程序进行 TDD。有点像编译器引导，编译器自行编译。
假设它是可能的，它怎么能做到？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T16:34:38.533

是的。Kent Beck 在他的“测试驱动开发：通过示例”一书中使用的示例之一是测试运行程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T16:36:54.557

自举是一种很酷的技术，但它确实存在循环定义问题。您如何使用尚不存在的框架编写测试？

引导编译器可以通过多种方式解决这个问题，但我的理解是，通常第*一个*实现不是引导的。后来的引导程序将被重写，然后使用原始编译器来编译自己。

所以第一次写出来就用现有的框架。然后，一旦你有了一个稳定的版本，你就可以使用你自己的测试运行器重新编写测试。

# sql - SQL SUM 和 COUNT 返回错误值

> ID：11545771
> 
> 赞同：0
> 
> 时间：2012-07-18T16:11:47.627
> 
> 标签：sql, count, sum

我发现了一堆类似的问题，但对我没有任何帮助，或者我太愚蠢了，无法正确解决问题。如果我使用**COUNT(DISTINCT visit.id)** ，访问计数工作正常，但投票计数完全错误 - 它显示的值比应有的值大 3 到 4 倍。

所以这是查询

```
SELECT SUM(votes.rating), COUNT(visits.id)
FROM topics
LEFT JOIN visits ON ( visits.content_id = topics.id )
LEFT JOIN votes ON ( votes.content_id = topics.id )
WHERE topics.id='1'
GROUP BY topics.id 
```

**投票**表如下所示

```
id int(11) | rating tinyint(4) | content_id int(11) | uid int(11) 
```

**访问**表

```
id int(11) | content_id int(11) | uid int(11) 
```

**主题**表

```
id int(11) | name varchar(128) | message varchar(512) | uid int(11) 
```

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:21:39.183

基本上，您是在求和或计算可能返回的总行数。因此，如果每个 id 有 3 次访问和 4 票，则访问次数将乘以 4，票数将乘以 3。

我认为你想要的最容易通过使用子查询来完成：

```
SELECT (SELECT SUM(v.rating) FROM votes v WHERE v.content_id = t.id), 
       (SELECT COUNT(vi.id) FROM visits vi WHERE vi.content_id = t.id)
FROM topics t
WHERE t.id=1 
GROUP BY t.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:20:37.330

我怀疑问题出在与表投票的连接中。
如果选票不止一行，您还将使用重复的行进行计数。
如果您使用 distinct，您将跳过 Id 的重复（由于加入投票）。
作为第一个 tiral，我将暂时取消加入投票，看看会发生什么。
希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:23:16.970

如果没有看到数据，调试起来有点困难，但我猜这是因为访问次数多于投票数。以下内容应该适合您：

`SELECT (SELECT SUM (rating) FROM votes WHERE votes.content_id = topics.id), (SELECT COUNT (1) FROM visits WHERE visits.content_id = topics.id) FROM topics WHERE topics.id = 1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:25:31.600

您需要将其作为两个单独的子查询来执行：

```
SELECT sumrating, numvisit
FROM (select visits.content_id, count(*) as numvisits
      from visits
      ) tvisit left outer join
     (select votes.content_id, SUM(votes.rating) as sumrating 
      from votes
      group by votes.content_id
     ) v
     ON ( v.content_id = tvisit.content_id )
WHERE tvisit.content_id='1' 
```

事实证明，您根本不需要加入主题表。

# ios - 有没有人为 iOS 编译过 iGraph，图形布局库？

> ID：11545772
> 
> 赞同：0
> 
> 时间：2012-07-18T16:11:52.110
> 
> 标签：ios, igraph

是否可以为 iOS 编译[iGraph](http://igraph.sourceforge.net/)图形布局库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:36:20.713

我没有。我不知道谁有。但我以前也从未听说过。

该网站声称它是用 C/C++ 编写的，所以理论上你应该能够让它在 iOS 上运行。您可能需要进行一些修改。

更仔细地查看文档，它似乎是一个普通的 C API（甚至更好！）所以它应该很容易为 iOS 编译。您可能必须编辑 Makefile 以使其针对 ARM（而不是 Intel）进行交叉编译。

但是，源代码是在 GNU GPL 下发布的。GPL 中的某些条款与 Apple 开发者计划协议中的条款相冲突（我忘记了具体内容，但应该很容易研究）。这意味着，如果你让它在一个应用程序中运行，你就无法将它放到 App Store 上，除非 Apple 或 iGraph 开发人员为你提供不同的条款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:21:03.667

不确定 iGraph，但我一直在考虑尝试[Core Plot](http://code.google.com/p/core-plot/)。这是一个绘制第 3 方 iOS 框架的图表。文档不多，但是如果您浏览他们的网站，您可以看到一些已经使用它的应用程序。

不知道你为什么被否决。发生。

编辑：

哦，在那种情况下，这个问题可能会有所帮助：[https ://stackoverflow.com/a/5074186/1126783](https://stackoverflow.com/a/5074186/1126783)

# c# - 使用 C# 访问网站

> ID：11545775
> 
> 赞同：0
> 
> 时间：2012-07-18T16:12:15.883
> 
> 标签：c#, javascript, web, bots

我这里有问题。假设有一个在网站上托管的 javascript 中实现的基本计算器（我已经用谷歌搜索了它并找到了一个示例并找到了这个：[http](http://www.unitsconverter.net/calculator/) ://www.unitsconverter.net/calculator/ ）。我想做的是制作一个打开这个网站的程序，输入一些值并获取返回值。因此，在我们的网站计算器中，程序： - 打开网站 - 输入操作数 - 输入操作 - 输入操作数 - 检索结果 注意：无需向用户显示任何内容（例如浏览器） ）。

我做了一些搜索，发现了 HttpWebRequest 和 HttpWebRespond。但我认为这些可以用来将数据发布到服务器，这意味着，我要发送数据的文件必须是 php、aspx 或 jsp。但是Javascript是客户端。所以，我认为在这种情况下它们对我来说有点用处。

有什么帮助吗？

**更新**：我已经设法使用 WebBrowser Control 工具（在 System.Windows.Forms 中找到）开发了网络机器人这是代码示例：

```
 webBrowser1.Navigate("LinkOfTheSiteYouWant"); // this will load the page specified in the string. You can add webBrowser1.ScriptErrorsSuppressed = true; to disable the script in a page
    webBrowser1.Document.GetElementById("ElementId").SetAttribute("HTMLattrbute", "valueToBeSet"); 
```

这些是我用来做我想做的事情的主要方法。我发现这个视频很有用：[http ://www.youtube.com/watch?v=5P2KvFN_aLY](http://www.youtube.com/watch?v=5P2KvFN_aLY)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:17:58.623

我想您可以使用[WatiN](http://watin.org/)之类的东西将用户的输入/输出从您的应用程序传输到网站并返回结果，但正如另一位评论者指出的那样，当您可以编写自己的计算器时，这种事情的价值相当逃避我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:03:34.780

这是一个 API 问题：“远程网站是否为所需功能公开任何 API？”。

暴露交互式 API 的 Web 资源称为 Web 服务。有很多例子（例如[谷歌地图](https://developers.google.com/maps/)）。

您可以通过客户端访问 API（取决于服务的条款和条件）。客户端的性质取决于您访问的 Web 服务的类型。

*   基于 SOAP的[服务](http://en.wikipedia.org/wiki/SOAP)基于 SOAP 协议。

*   基于 REST的[服务](http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services)基于 REST 原则。

因此，如果有一个名为“Calculator”的可访问 Web 服务，那么您可以访问该服务，例如，调用 sum 方法。

在您的示例中，计算器是 Javascript 实现，因此它不是 Web 服务，不能通过 HTTP 请求访问。尽管如此，它的实现仍然是可访问的：它是实现计算器的[javascript 文件。](http://www.unitsconverter.net/calculator/js/newcalc.js)您始终可以在您的网站中包含该文件并通过 javascript 访问其功能（请注意条款和条件！！）。

一个非常常见的例子是存储在[Google Libraries](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js)中的 jQuery 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:15:54.600

您需要一个 JavaScript 解释器（引擎）来解析页面上的所有 JavaScript 代码。

[https://www.google.com/search?q=c%23+javascript+engine](https://www.google.com/search?q=c%23+javascript+engine)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:24:34.113

您正在寻找的是更类似于 Web 服务的东西。您提供的页面似乎不接受 HTTP POST 中的任何数据，并且源中没有您可以抓取的任何有意义的信息。例如，如果您想以编程方式搜索 eBay 拍卖，您可以弄清楚如何正确地向其发布数据，例如：

```
http://www.ebay.com/sch/i.html?_nkw=http+for+dummies&_sacat=267&_odkw=http+for+dummies&_osacat=0 
```

然后通过 http 响应查看您要查找的信息。您可能需要创建一个正则表达式来匹配您正在寻找的标记，例如，如果您想知道有多少结果，您可以在 http 响应中搜索以下标记：

```
<div class="alt w"><div class="cnt">Your search returned <b>0 items.</b></div></div> 
```

就客户端/javascript 的东西而言，你根本无法做任何你想做的事情。

# python - 更改 pinax 帐户主题

> ID：11545777
> 
> 赞同：0
> 
> 时间：2012-07-18T16:12:24.613
> 
> 标签：python, django, pinax

我有一个 Pinax 帐户应用程序，所以现在我想自定义默认 Pinax 帐户应用程序的外观。默认情况下，我认为它有一些基于引导程序的主题，现在我想用基于 960gs 的自定义主题替换它。如何我这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:40:31.857

如果您想完全替换基于引导程序的主题，您可以从您的 INSTALLED_APPS 中删除 pinax_theme_bootstrap 并创建您自己的模板。但是，您很可能只想对大多数模板使用 pinax 的主题并自定义需要自定义的少数几个，然后只需保留 pinax_bootstrap_theme 原样并将模板文件从您的 site-packages/pinax_theme_bootstrap/templates/ 目录复制到您自己的PROJECT_PATH/templates/ 目录并对其进行自定义。

pinax 为帐户应用程序提供的模板：

```
$ ls ../env/lib/python2.7/site-packages/pinax_theme_bootstrap/templates/account/ 
base.html             password_delete_done.html       password_set.html
email.html            password_delete.html            signup.html
language_change.html  password_reset_done.html        _signup_sidebar.html
login.html            password_reset_from_key.html    _terms.html
_login_sidebar.html   password_reset.html             timezone_change.html
logout.html           password_reset_key_message.txt  verification_sent.html
password_change.html  password_reset_message.txt 
```

只需将其中一个文件复制到您自己的 /templates/ 目录即可进行自定义。

# oracle - Oracle 数据库中的复合选择查询

> ID：11545778
> 
> 赞同：1
> 
> 时间：2012-07-18T16:12:31.793
> 
> 标签：oracle, select, oracle10g

我有一个表，`mealdb`它有三个字段，即。`"userid", "timeofday", "daydate"`（全部`varchar2`）。`timeofday`可以有两个值，“中午”或“下午”。现在我想根据给定的用户 ID 计算下午的总数。我试过了

```
select sum(timeofday) 
  from mealdb 
 where timeofday='afternoon' where userid='1200'; 
```

但它在 Oracle 10g 中出现错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:15:22.823

只`WHERE`允许使用一个关键字。

使用布尔运算符添加更多条件，例如`AND`，`OR`

```
select count(*) 
from mealdb 
where timeofday='afternoon' 
  and userid='1200'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:15:20.420

```
select count(1) 
  from mealdb 
 where timeofday='afternoon' and userid='1200'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:17:01.760

尝试`select count(timeofday) from mealdb where timeofday='afternoon' and userid='1200'`你需要使用`Count`not`Sum`并使用`and`你的第二个`where`。

# jquery - 拆分列表视图中的链接不可点击

> ID：11545783
> 
> 赞同：0
> 
> 时间：2012-07-18T16:12:48.677
> 
> 标签：jquery, listview, jquery-mobile

我有一个拆分列表视图，如下所示（来自 JQM 示例）：

```
<ul data-role="listview" data-split-icon="gear" data-split-theme="d">
        <li><a href="index.html">
                <img src="images/album-bb.jpg" />
                <h3>Broken Bells</h3>
                <p>Broken Bells</p>
            </a>
            <a href="lists-split-purchase.html" data-rel="dialog" data-transition="slideup">Purchase album
            </a>
        </li>
        <li>
            <a id="secondListItem">
                <img src="images/album-hc.jpg" />
                <h3>Warning</h3>
                <p>Hot Chip</p>     
            </a>
            <a href="lists-split-purchase.html" data-rel="dialog" data-transition="slideup">Purchase album
            </a>
        </li>           
    </ul> 
```

这会导致所有项目右侧带有齿轮按钮的 een 列表视图。该示例（参见第一个列表项）使用 href 链接到另一个页面。这按预期工作。整个按钮是可点击的。

但我想要的是在单击右侧按钮时运行一个 javascript 函数。我已按如下方式附加了一个点击处理程序（请参阅第二个列表项）：

```
$('#secondListItem').click(function(){
    console.log('clicked!!');
}); 
```

现在，当我单击按钮的图标时，没有任何反应，单击按钮的其余部分可以正常工作。问题在于 JQM 为使其美观而添加的内容。我试图将点击处理程序放在 a 标签内的跨度上，但似乎没有任何效果。

那么，如何向右键添加点击处理程序？（里的第二个a）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:16:12.587

你可以试试：

```
$('#secondListItem').click(function(e){
    e.preventDefault();      // to prevent default browser load activity
    console.log('clicked!!');
}); 
```

或者

```
$('ul').on('click', '#secondListItem', function(e){
    e.preventDefault();
    console.log('clicked!!');
}); 
```

# android - 如何区分 Android 中的 7" 和 10" 屏幕（在 API 13 之前）？

> ID：11545784
> 
> 赞同：0
> 
> 时间：2012-07-18T16:12:48.847
> 
> 标签：android, screen-size, android-screen-support

我正在开发一个应用程序，但遇到了一个严重的问题（在我个人看来，Android 确实是个大失败）。如果您尝试在 API 13 之前支持多个屏幕（添加了“小宽度”功能），您必须使用屏幕尺寸（小、中等）和密度（ldpi、mdpi 等）为不同的用户提供不同的布局屏幕。一切运行良好，直到您想要同时支持 10 英寸平板电脑和 7 英寸平板电脑。例如，具有 1280X800 分辨率和 160 密度的 10 英寸平板电脑（大多数平板电脑）和 Kindle（1024x600，密度 160、7'）对于 Android 是相同的，这意味着在 API 13 之前（并非所有平板电脑都运行 3.2然而）我不能分别为它们中的每一个提供不同的布局/尺寸值。

我真的不想在代码中进行所有讨厌的计算，只是为了确定文本的大小。我很确定很多人都会遇到这个问题。

有谁知道这个的解决方案？

谢谢， 埃拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:16:42.137

使用旧的限定符系统，7 英寸平板电脑将注册为`large`屏幕，而 10 英寸平板电脑将注册为`xlarge`屏幕（姜饼中引入了后一个限定符）。

编辑：来自最新的 Android 兼容性定义文档 (CDD)：

> 具体来说，设备实现必须根据以下逻辑密度无关像素 (dp) 屏幕尺寸报告正确的屏幕尺寸。
> 
> *   设备的屏幕尺寸必须至少为 426 dp x 320 dp（“小”）
> *   报告屏幕尺寸“正常”的设备的屏幕尺寸必须至少为 470 dp x 320 dp
> *   报告屏幕尺寸“大”的设备的屏幕尺寸必须至少为 640 dp x 480 dp
> *   报告屏幕尺寸“xlarge”的设备的屏幕尺寸必须至少为 960 dp x 720 dp

希望符合 Google Play 条件的设备必须遵守本文档的规则。从技术上讲，像 Kindle Fire 这样的设备不需要遵守这些规则，因为它们使用自己的应用商店，但我个人并没有看到它们迷路。根据这些规则，Fire 很大，因为它的最小宽度为 < 720dp。

# ssis - SSIS 自动打包执行

> ID：11545785
> 
> 赞同：0
> 
> 时间：2012-07-18T16:12:51.490
> 
> 标签：ssis, automation, package, execution, bids

我想每周在指定时间自动执行一次我的 SSIS 包。我想在每周加载一个新的 excel 文件的内容之前清除整个数据库。我想我可以使用截断语句来清除整个数据库。但是，如何从我不知道提前名称的文件中读取？

我的直觉告诉我，我需要知道以下几点：

```
How do I prompt the user for a file name in SSIS? 
Am I using VB or C# to do this prompting? 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:46:29.847

你想要多长时间的答复？;)

## 如何从我不知道提前名称的文件中读取？

在这方面你有很多选择。我列出它们是为了让我接受

1.  我的“去”将是[Foreach 枚举](http://msdn.microsoft.com/en-us/library/ms141724.aspx)器并使用文件类型来处理标准文件夹中的可用文件。这会将您的问题减少为培训问题（用户，将文件拖放到 \server\share\inbound）

2.  假设您在文件的 Connection Manager ConnectionString 属性上有一个 Expression，您可以提供此值的运行时覆盖。因此，名为 Source 的 SSIS 变量`InputFile`的值是`\\server\share\inbound\source_2012-07-17.txt`一个名为 Source 的连接管理器，并且在 ConnectionString 属性上有一个表达式映射到 @[User::InputFile] 当你的包运行时，只要 InputFile 的值是正确的，那么你的包就会使用正确的源文件，一切都很好。您不必*创建*变量并使用 expressiosn 来执行此操作，您*可以*直接针对连接管理器的属性执行此操作，但从维护和故障排除的角度来看，您将能够更好地解决问题。当你运行这个包时，你需要使用一个命令行选项来为你正在配置的东西提供一个明确的值。大约`dtexec /file C:\mypackage.dtsx /set \Package.Variables[User::InputFile].Properties[Value];"\\server\share\inbound\source_2012-07-18.txt"` 使用 dtexecui 正确构建此字符串。

3.  如果用户实际上正在运行包（双击，执行），那么它在交互模式下运行`@[System::InteractiveMode] = True`没有什么可以阻止您在脚本任务中编写完整的 Windows 窗体应用程序作为包中的第一步。也就是说，*我*不会用 UI 代码使 ETL 包膨胀，但可以做到。这实际上取决于您要完成的工作。

4.  将该 UI 代码移动到专用包中。组装用户输入后，通过父/子配置将其传递给子包。

5.  这实际上只是 2 + 3ish。做好事，让你的包基于命令行覆盖运行。这样，它就可以在交互模式下工作，也可以在服务器（SQL 代理）上执行。然后使用您希望创建用于获取和验证用户输入的接口的任何技术，然后使用这些值调用您的包。您可以跳过调用 DTEXEC，直接使用对象模型。

6.  这应该是一千亿选项。输入文件**将**被命名为`\\server\share\input\source_file.txt`铁腕规则，使您的用户符合您的意愿。如果你有能力，允许用户使用他们想要的任何文件名，只要它是你告诉他们使用的文件名。否则将导致他们的数据无法加载。

# java - Morphia 嵌入式链接对象列表搜索条件

> ID：11545791
> 
> 赞同：0
> 
> 时间：2012-07-18T16:13:06.333
> 
> 标签：java, mongodb, search, morphia

我正在使用 MongoDB 和 java-lib Morphia 来处理它。

我有两个课程：

```
class User {
   ...

   #Reference
   private List<Invoice> invoiceTransactions = new ArrayList<Invoice>();

   ...
}

class Invoice {
   ...

   User user;

   ...
} 
```

当我创建发票时，我将其放入**invoiceTransactions**列表

现在我有一个**Invoice对象，如果它在****invoiceTransactions**列表中不包含此发票，我的目标是找到相应的**用户。**

 **这就是我写的：

```
Invoice invoice = ...;

Query<User> query = (Query) dao.createQuery();
query.disableValidation().filter(Mapper.ID_KEY, u.getId());
List<Invoice> inv = new ArrayList<Invoice>();
inv.add(invoice);
query.criteria(User.INVOICE_TRANSACTIONS).hasNoneOf(inv); 
```

那是 MongoDB 日志：

```
Wed Jul 18 19:03:09 [conn48] update dwh.UserImpl query: { _id: ObjectId('4ffbc8d
943b693ac766255f3'), InvoiceTransactions: { $nin: [ { className: "abc.InvoiceImpl", sum: 70.0, invoiceStatus: "NEW", creationDate:
new Date(1342627389037), _id: ObjectId('5006de3d022993ac397609c4'), guid: "4DEAB
CCE-63F9-1B0A-59F2-1135A83054B9", day: "2012.07.18", hour: "2012.07.18 19", minu
te: "2012.07.18 19:03" } ] } } update: { $set: { authId: "bla-bla" } } 0ms 
```

您可以看到**Invoice**对象处理的不是*引用*而是*嵌入*对象。结果，即使实际上**invoiceTransactions**包含 Invoice，我也会触发该标准。

所以，我的问题是如何强制 morphia 将**inv**对象视为参考而不将其放入所有字段的结果查询中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:35:23.990

好的，这是答案：

```
Key<Invoice> invoiceKey = dao.getDatastore().getKey(invoice);
List<Key<Invoice>> invoiceKeyList = new ArrayList<Key<Invoice>>();
invoiceKeyList.add(invoiceKey);
query.criteria(User.INVOICE_TRANSACTIONS).hasNoneOf(invoiceKeyList); 
```**

# jquery - 我试图复制一些 CSS 和布局来制作 Telerick TreeView 的副本，被一个或几个属性混淆了

> ID：11545794
> 
> 赞同：0
> 
> 时间：2012-07-18T16:13:13.213
> 
> 标签：jquery, css, telerik

Telerick 控件“TreeView”没有我想要的功能，所以我正在制作我自己的版本。由于那时我的客户已经使用 TreeView，因此让它看起来相同或相似是有意义的。

我正在通过 css 寻找它，并将它应用到它应该在的地方，但它并没有抓住它。我很好奇以下属性是否是为 Telerick 控件添加的合法 css。

```
.RadTreeView
{
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
} 
```

由于 Telerick 依赖于后端，我正在制作一个 AJAX 版本，它做同样的事情，但没有定义的后端所需的依赖关系。那样的话，我可以做一些事情，比如制作一个 TreeView 小部件，它可以放在任何地方的代码中，并传递参数来做需要的事情。

树完美地工作，我添加了所有注意到的类。为什么它看起来不像它应该的样子？

另外：是的，我检查了参考资料，它识别了 CSS，但并没有对它做所有的花哨。

这是一个给你我的工作区的小提琴，但它在 UL 和 LI 的小提琴中没有适当的缩进：http: [//jsfiddle.net/fallenreaper/YQuw6/](http://jsfiddle.net/fallenreaper/YQuw6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:36:39.163

两者都是“合法的”，但它们是特定于 webkit 的。有关[-webkit-touch-callout](http://css-infos.net/property/-webkit-touch-callout)和[-webkit-tap-highlight-color 的](http://css-infos.net/property/-webkit-tap-highlight-color)更多信息。

我不确定您到底想要什么，但如果您只想缩进树中的子项，如下所示的简单操作即可：

```
ul > li {
    padding-left: 10px;
} 
```

[**演示**](http://jsfiddle.net/YQuw6/4/)

# sql-server - 比较同一个表中的查询结果

> ID：11545802
> 
> 赞同：1
> 
> 时间：2012-07-18T16:13:40.560
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

关系型数据库 SQL Server、T-SQL

考虑一个链接来自两个不同表的信息的表：文章和类别。此表包含每个文章的一个或多个条目，其中包含文章所属类别的 ID。因此，一个

```
SELECT * FROM TABLE WHERE ARTICLEID = X 
```

返回 1 到 n 个结果。

我正在寻找一个查询，它允许我比较具有完全相同类别组合的文章。我一直在尝试使用 INTERSECT，但这不会返回任何行。一个例子：

```
ARTICLEID  CATEGORYID

    1  1
    1  2
    1  4
    2  1
    2  4
    3  1
    3  2
    3  4
    4  2
    4  4
    5  1
    5  2
    5  4 
```

查询`ARTICLEID = 1`应该返回 3 和 5，查询`ARTICLEID = 3`应该返回 1 和 5，等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:32:40.253

```
 SELECT ART.ID, 
          ART.COLUMN2, 
          ART.COLUMN3,
          CAT.ID,
          CAT.COLUMN2,
          CAT.COLUMN3,
          ART_CAT.CAT_ID
   FROM   ARTICLE ART,
          CATEGORY CAT,
          ARTICLE_CATEGORY ART_CAT
   WHERE  ART.ID = 1
          ART_CAT.CAT_ID = ART.ID 
```

我确信查询中有一些漏洞，但这应该给你一个起点。

**编辑：**根据问题的最后一部分更正加入。（第一次没看到。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:33:30.920

编辑：这应该工作

```
with temp as
(
    select a.*, b.articleid as bart, 1 as cnt from tableName a left join
    tableName b on a.CATEGORYID=b.CATEGORYID where a.articleid=XXX
)
select bart from temp where bart<>articleid group by bart having sum(cnt) =
(select count(*) from tableName where articleid=XXX) 
```

只需运行这个确切的查询，只需将 XXX 更改为您需要匹配的任何 articleID。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:36:19.873

你试过了`Right Join`吗？

```
create table category
(
    Categoryid int
)

insert into category(Categoryid)values(1)
insert into category(Categoryid)values(2)
insert into category(Categoryid)values(3)
insert into category(Categoryid)values(4)
insert into category(Categoryid)values(5)

create table articles
(
    Articleid int,
    Categoryid int
)

insert into articles(Articleid, Categoryid)values(1, 1)
insert into articles(Articleid, Categoryid)values(1, 2)
insert into articles(Articleid, Categoryid)values(1, 4)
insert into articles(Articleid, Categoryid)values(2, 1)
insert into articles(Articleid, Categoryid)values(2, 4)

Select c.Categoryid
From
(
    Select * from articles where Articleid = 2
)a
right Join category c on c.Categoryid = a.Categoryid

drop table articles
drop table category 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:05:23.390

试试这个。如果一切都是整数。

```
with mycte as
(
select articleid,count(*) as cnt,sum(categoryid) as sm,max(categoryid) mx,min(categoryid) mn
from mytable
group by articleid
) 
select mc.articleid,mc1.articleid from mycte mc inner join mycte mc1 on mc.sm = mc1.sm 
and mc.mn = mc1.mn
and mc.mx = mc1.mx
and mc.cnt = mc1.cnt
and mc.articleid <> mc1.articleid 
```

如果您需要将它们放在一行中，则无需加入 cte，而是尝试按cnt、sm、mx、mn 顺序按articleid 进行行号分区。这将为您提供数据..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T23:58:13.390

这是最终起作用的代码：

用 temp as (select a.*, b.articleid as sameAs, 1 as cnt from articletags a left join articletags b on a.tagID=b.tagID where a.articleid=XXX ) select * from Articles where ArticleID in (select sameAs from temp where sameAs<>articleid group by sameAs sum(cnt) = (select count(*) from articletags where articleid=XXX)))

XXX 是传入的 ArticleID。结果是一组与 ArticleID 共享相同文章标签的记录。

# ruby-on-rails - Ruby on Rails：表单错误

> ID：11545804
> 
> 赞同：0
> 
> 时间：2012-07-18T16:13:49.700
> 
> 标签：ruby-on-rails, ruby, forms, drop-down-menu

我有一个表单，它获取用户信息并将其存储在数据库中。对于某些字段，用户可以将新信息放入字段中，或从数据库中选择以前的信息。它之前工作过，但是我最近清理了数据库，现在当我尝试访问该页面时出现此错误。

未定义的方法“空？” 对于零：NilClass

提取的源代码（在第 27 行附近）：

27: <%= f.select( :client, Project.all.map {|p| [p.client]}.uniq!, :prompt => "选择以前的客户端") %>

表单视图示例：

```
<div class="field">
<%= label_tag :new_client, "Client" %><br/>
<%= text_field_tag :new_client %>
Or
<%= f.select( :client, Project.all.map {|p| [p.client]}.uniq!, :prompt => "Select a previous Client") %>
</div> 
```

项目负责人：

```
def create
@project = Project.new(params[:project])

@project.client = params[:new_client] unless params[:new_client].empty?
@project.exception_pm = params[:new_exception_pm] unless params[:new_exception_pm].empty?
@project.project_owner = params[:new_project_owner] unless params[:new_project_owner].empty?
@project.role = params[:new_role] unless params[:new_role].empty?
@project.industry = params[:new_industry] unless params[:new_industry].empty?
@project.business_div = params[:new_business_div] unless params[:new_business_div].empty?

respond_to do |format|
  if @project.save
    format.html { redirect_to @project, notice: 'Project was successfully created.' }
    format.json { render json: @project, status: :created, location: @project }
  else
    format.html { render action: "new" }
    format.json { render json: @project.errors, status: :unprocessable_entity }
  end
end
end 
```

更新：

我认为错误来自.uniq！我的表单视图中的方法。还有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:04:40.483

您应该使用`blank?`方法而不是`empty?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:17:11.913

您没有任何项目可以映射到您的下拉列表中。

添加一个项目，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:16:53.557

我从使用更改`uniq!`为`uniq`.

这似乎解决了问题。

# javascript - Youtube 播放秒数

> ID：11545816
> 
> 赞同：0
> 
> 时间：2012-07-18T16:14:38.220
> 
> 标签：javascript, youtube, listener, detect

如何获取嵌入式 youtube 视频的播放秒数？

排除视频暂停/未开始/跳过/
仅缓冲播放秒数时的计数，如何检测它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:27:51.633

使用当前时间

```
 ytplayer = document.getElementById("movie_player");
 ytplayer.getCurrentTime(); 
```

[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

这是你要找的吗？

# php - 如何使用 mysql 和 php 的 where 启动有限查询？

> ID：11545820
> 
> 赞同：0
> 
> 时间：2012-07-18T16:14:41.617
> 
> 标签：php, sql

如何使用 mysql 和 php 的 where 启动有限查询？

例如，下面的查询？？

```
 $start = 0;
       $range = 10;

       $query = "SELECT column FROM $table LIMIT $start, $range"; 
```

但我想做的是从特定列值开始限制 $start 并从那里增加，如下所示：

```
 $start = column_value; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:15:51.620

将 where 子句添加到 SQL 查询中：

```
$query = "SELECT column 
              FROM $table 
          WHERE column >= $column_value
          LIMIT $start, $range"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:19:55.737

您还需要一个 ORDER BY 子句。

```
$query = "SELECT column
FROM $table            
WHERE column > $column_value           
ORDER BY column
LIMIT $start, $range"; 
```

# firefox-addon - 从 Firefox 扩展后台页面发送 Google Analytics 事件

> ID：11545825
> 
> 赞同：0
> 
> 时间：2012-07-18T16:15:09.387
> 
> 标签：firefox-addon, google-analytics, firefox-addon-sdk

我正在尝试从 Firefox 扩展后台页面发送 Google Analytics 事件。由于后台页面中没有窗口对象，我无法使用 ga.js 库。除了从内容脚本发送事件之外，有没有办法在 Javascript 中解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:02:48.307

正如 Wladimir 建议的那样，在这样的插件中收集指标存在隐私问题，以及 addons.mozilla.org 提供的尊重用户隐私的内置指标。

如果你想要一个“后台页面式”环境，page-worker api 允许你加载一个 url 并使用与内容脚本相同的 api 和消息传递方案与 dom 交互。加载到 page-worker 中的页面没有升级权限，它们就像普通网页一样工作。

如果您在 page-worker 中实现 GA 并提交您的附加组件以供审核，我相信您需要明确说明您正在收集统计数据的隐私政策，并且您的代码可能不会被接受，具体取决于您的数据类型正在收集。最简单的方法就是让 AMO 为您处理统计数据。

# jta - Atomikos 事务使用两个数据库

> ID：11545835
> 
> 赞同：2
> 
> 时间：2012-07-18T16:15:35.563
> 
> 标签：jta, xa, atomikos

我已经使用单个数据库事务测试了 Atomikos JTA，效果很好。但我没有看到任何跨两个数据库的事务示例。注意：我使用的是 Atomikos 独立 API（即不使用 Spring / Hibernate 或其他框架）。

我想要的是编写一个将插入/更新/提交到两个单独数据库（用于我的测试的 Oracle-Oracle）中的单个事务。如果两者都成功则执行提交，如果有任何异常则回滚。

我正在寻找此类示例所需的任何配置或示例代码。

非常感谢任何指示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:26:45.423

实际上与单个 DataSource 配置没有任何区别。这是我在[github](https://github.com/isopov/multiple-ds-tx-test/commit/de979004f5592a51258a6b8f40e3d20babd40373)中编写的示例。确保您使用的是 XADataSource 而不是普通的 DataSource，但这对于单个 DataSoucre 的情况是一样的。

# html - 从本地播放 HTML5 视频

> ID：11545836
> 
> 赞同：0
> 
> 时间：2012-07-18T16:15:41.647
> 
> 标签：html, html5-video

我刚刚在[这里](http://www.html5rocks.com/en/tutorials/video/basics/)了解到，为了在 HTML5 的`<video>`标签中播放一些视频，我应该确保在一些适当的 URL 上提供视频时`Content-Type`也必须设置。

当我只是从本地文件系统运行我的网页或者我没有能力操作服务器响应标头时，如何避免这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T18:40:49.693

您最好的选择是使用[HTML5 FileReader API](http://www.w3.org/TR/file-upload/#dfn-filereader "W3C 规范")（[教程](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-file-readingbyname "html5rocks.com")）。这将提供本地视频作为 url。在某些站点中，您可以找到显示上传前图像预览的演示，但从理论上（和实践，请参阅下面的链接），可以在音频和视频上使用相同的。

我做了一个小演示（不是为了这个，而是为了相机 API），它可能适合你的需要。

自己看：http: [//jsbin.com/efunel/6](http://jsbin.com/efunel/6)

视频演示在 chromium(20.0) 和 firefox(16.0) 中运行（在花了很长时间之后！！！），只有[Webm](http://en.wikipedia.org/wiki/Webm)格式。

PS：尝试选择一个小视频（15M以下）。

编辑：（@headkit 要求的代码片段）

```
fileReader = new FileReader();
fileReader.onload = function (event) {
    element.attr("src",event.target.result);
};
fileReader.readAsDataURL(file); 
```

# extjs - 使用@media print 打印 ExtJS 图表

> ID：11545837
> 
> 赞同：1
> 
> 时间：2012-07-18T16:15:46.843
> 
> 标签：extjs, charts, extjs4.1, printing-web-page

我有一个 ExtJS 对象的打印解决方案，它似乎对除图表之外的所有东西都适用。

我一直在使用`@media print`CSS 提示在我的视口下方创建一个“打印”div（因此它在屏幕上看不到，但它是用户单击打印按钮时唯一打印的项目）。

我这样做是为了控制对象的比例大小，以便它很好地适合页面，这样我就可以删除工具栏等“非打印”元素。当我想从我的应用程序中打印一个 ExtJS 对象时，我将它添加到这个“打印”的 div 中，然后调用`document.print`.

div 的 CSS 如下所示：

```
@media print {
    @page {size: landscape}
    body * {
      visibility: hidden;
    }
    .printer, .printer * {
      visibility: visible;
    }
    .printer {
      overflow: visible;
      position: absolute;
      left: 0;
      top: 0;
    }
} 
```

这对于网格和表单以及其他 ExtJS 对象来说效果很好。

现在我必须设置它来打印一些图表，但是每当我将图表添加到我的打印机 div 时，我都会收到“布局运行失败”错误 - 根本没有创建图表。我很确定这是因为打印机 div 实际上并没有在屏幕上看到，并且图表根据它的显示方式进行了布局。

其他元素（如网格和表单）似乎并不关心它们是否在屏幕上可见以进行布局，所以我想知道有没有办法覆盖图表对象的这一要求？还是这与图表代码密不可分？这对我来说是理想的处理方式，因为我不必改变我的打印机制。

有谁知道这是否可能？

我可以在按比例大小的对象内创建图表的可打印版本，`Ext.window.Window`而不是我的`printer`类。它会在布局发生时（大约一秒钟）可见，然后在我打电话后立即隐藏，`document.print`但显然这不是那么透明。

@EvanTrimboli 这是我试图处理[其他问题](https://stackoverflow.com/questions/11533769/understanding-layout-run-failure-error-logging)的根本问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:24:20.653

您观察到的 - 是图表中的优化，我认为它可以被禁用，但现在没有代码片段。您可以尝试在图表可见时准备适合打印的页面，使用

```
var img = chart.save({
     type: 'image/svg+xml'
}); 
```

将图表转换为图像，然后将生成的图像指定为`img`标签的背景或来源。由于 VML 格式，不确定它是否可以在 IE 中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:49:27.680

我最终将图表配置放在浮动面板中。然后我展示了面板并立即在视口下方对它进行了 zIndexed。像这样（`content`图表在哪里）：

```
// create the printer panel
printable = Ext.create('Ext.panel.Panel', {
    cls: 'printer',
    border: false,
    header: false,
    shadow: false,
    floating: true,
    height: content.length * 670,
    width: 900,
    items: content,
}).show();

// stash the panel where it wont be seen
printable.setPosition(0, 0);
printable.el.dom.style.zIndex = -50; 
```

# jquery - 如果选中 x 复选框，则 Jquery 逻辑显示 div 测验

> ID：11545854
> 
> 赞同：0
> 
> 时间：2012-07-18T16:16:29.213
> 
> 标签：jquery, if-statement, logic, show-hide

我知道这是一件简单而蹩脚的事情。我需要构建一个小表单，如果用户选中 1 个复选框，则显示 div a，如果选中两个，则显示 div b，如果选中三个或更多，则显示 div c。

关于一个简单的 jQuery 方法的任何想法，我已经尝试过并且过于复杂化，但无济于事。

在此先感谢，并为一个nooby问题感到抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:18:02.600

要获取计数，请获取匹配的长度，然后使用`switch`or处理它`ifs`

```
handle_number_checked($(":checked").length); 
```

# vb.net - Visual Basic 和 vb.net

> ID：11545856
> 
> 赞同：6
> 
> 时间：2012-07-18T16:16:41.570
> 
> 标签：vb.net, vb6-migration

我是一个相当成功的 VB6 程序员（我的意思是没有什么真正复杂的，只是我自己使用的相当简单的应用程序）。我正在尝试将自己“迁移”到 Visual Studio 2010（特别是 VB）。天哪，变了！由于没有使用临时版本的经验，我觉得我有点不知所措。

我不太了解的一件事是 Visual Basic 独立应用程序（即在计算机上运行的应用程序，而不是在网页上运行的应用程序，这是我一直开发的）和 vb.net 应用程序之间的关系。当我对特定类使用 Visual Studio 帮助功能时，有些页面说它们是针对 .net 功能的。我怎样才能把它翻译成一个独立的应用程序？

我特别想创建一个简单的应用程序来捕获和显示来自我正在开发的 iPhone 应用程序的传入 TCP 数据包。这意味着我需要更好地了解套接字。这在 VB6 中相当简单（我以前做过），但我真的需要在 2010 年做。

我为我的愚蠢道歉。在 58 岁的时候，我的头脑不再像以前那样捕捉新概念，尤其是在它们快速过去的速度下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:26:13.020

账单，

一个典型的 VB6 独立应用程序将映射到一个 VB.NET WinForms 应用程序，一旦你到达那个点，你会遇到的编码差异将突出显示 .NET 世界的面向对象比 VB6 好得多 - 你会获得真正的实现继承，OO 的所有/大部分其他优点。此外，它似乎仍然对一些语法和概念差异非常熟悉。好的部分是您仍然编写事件处理程序，但是逻辑和范围的封装导致更好的应用程序恕我直言。

您可以开发的另一种应用程序是*控制台应用程序，*它本质上只是一个字符模式的界面窗口，我曾希望我能在 VB6 世界中制作一千次。我放在一起的大多数快速测试/概念应用程序都是简单的控制台应用程序（尽管这些天主要是在 C# 中）。

Web 应用程序是那些成为网页的应用程序，它有一个带有 HTML 的前端“标记”页面和一个允许您访问所有 ASP.NET 管道的“代码隐藏”页面。无论应用程序多么复杂，它都是客户端浏览器和处理请求的 Web 服务器之间的简单往返主题的变体，并提供联系外部资源（例如数据库服务器、外部数据馈送等）的机会) 使网络应用程序不仅仅是静态内容。

在您的数据包示例中，.NET 围绕套接字和网络编程包装了整个抽象库，因此您实际上应该发现它的这方面（可能比 VB6 世界简单得多）。

还有其他几种项目类型，但基本大纲应该可以帮助您朝着正确的方向前进。你并不愚蠢，你只是在尽可能地适应！我同情你的学习曲线困境……仅仅落后你几年:)

祝福！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:30:53.940

.Net 部分只是新语言使用的框架 - 这并不意味着它特定于 Web 开发。

总结一下：

.Net = 基本框架（想想旧式 dll）。

VB.Net = 编程语言。

Winforms = 支持桌面应用程序的框架部分。ASP.NET = 支持 Web/服务器应用程序的框架部分。

愚蠢的命名我同意。

# android - 更新片段布局

> ID：11545860
> 
> 赞同：1
> 
> 时间：2012-07-18T16:16:49.123
> 
> 标签：android, fragment

我编写了一个具有一个主要活动和 3 个片段的 android 应用程序。两个片段将根据实时响应动态更新列表视图。对于剩余的响应，我必须使用完整的布局进行更新，例如第一次它必须加载按钮和文本文件，下一次它应该更改为进度条和按钮，下一次它会更改一些图像。

我需要有关如何实时加载第三个片段的不同布局的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:39:57.043

我怀疑你可以按照你想要的方式替换布局。`onCreateView()`被调用一次。您可以做的是将整个片段替换为相同的片段，但以不同的方式初始化，以便它知道应该使用不同的布局，或者让您的布局包含您想要的所有项目但保持未使用的不可见（`View.GONE`），除非您需要它们。

# grails - Spock Grails 2.0 Forward 不返回模型数据

> ID：11545863
> 
> 赞同：1
> 
> 时间：2012-07-18T16:17:01.443
> 
> 标签：grails, spock

我正在尝试使用 Spock 插件测试 Grails 2.0.4 控制器

- - - - - - - - - - 控制器 - - - - - - - - - -

```
def addComment= {

    def pageCounter=0

    def result=reviewService.addComment(params.copyId,params.comment)

    forward(action: "showPage", model: [copyId: result.copy.id,pageCounter:pageCounter])

} 
```

==================控制器测试===========================

```
@TestFor(ReviewController)
class ReviewControllerSpec extends ControllerSpec
{

def "test"() {

        setup:
                       -------------

                when:
                       -------------
                       def returnMap=controller.addComment()

                then:
                       mockResponse.forwardedUrl=='/grails/review/showPage.dispatch'

} 
```

* * *

测试通过但我无法获得控制器中定义的返回参数转发

```
forward(action: "showPage", model: [copyId: result.copy.id,pageCounter:pageCounter]) 
```

你能帮我，让我知道如何在我的 Spock 单元测试中`copyId`获取返回参数。 我已经在控制器代码中打印了值（上述两个变量），并且它们中有数据。我已经调查过，等等。请帮助`pageCounter`
`forwardArgs``mockResponse`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:06:36.390

该`forward`方法实际上不接受`model`参数。请参阅[文档`forward`](http://grails.org/doc/latest/ref/Controllers/forward.html)

在这种情况下，您*可以*使用`params`这些值将附加到`forwardedUrl`您现在正在测试的查询字符串中。

如果您想在操作之间传递更复杂的数据，您可能需要查看在[`chain`](http://grails.org/doc/latest/ref/Controllers/chain.html)重定向之前将模型放入闪存范围的方法。

# android - 当屏幕持续时保持活动在屏幕锁定上运行

> ID：11545865
> 
> 赞同：7
> 
> 时间：2012-07-18T16:17:08.887
> 
> 标签：android

因此，我构建了一个用作锁屏替换的应用程序。我使用广播接收器和服务在`Intent.ACTION_SCREEN_OFF`. 因此，每次用户锁定屏幕时，我的活动都会启动，然后当他们按下解锁按钮时，我的活动已经在锁定屏幕上运行。但这仅在用户尝试在短时间内唤醒/解锁手机时才有效。如果他们等待太久，活动就会消失。我不确定为什么会发生这种情况，以及无论用户等待多长时间尝试解锁手机，我都可以做些什么来保持活动在那里。

我考虑并尝试收听，`Intent.ACTION_SCREEN_ON`但是在用户按下手机上的电源按钮将其唤醒与应用程序加载并显示在屏幕上的时间之间存在延迟。在此间隙期间，用户可以看到 android 操作系统

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:35:55.027

如果您使用唤醒锁怎么[办](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)。例如：

```
@Override
public void onCreate(Bundle savedInstanceState) { 
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
    wl.acquire();
    // do your things, even when screen is off
}

@Override
protected void onDestroy() {
    wl.release();
} 
```

您还必须有一个唤醒锁权限是`AndroidManifest.xml`

```
uses-permission android:name="android.permission.WAKE_LOCK" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:38:51.657

您可能想尝试的一种方法是确保您的应用永不休眠。在短暂的睡眠中，它将保持运行。在长时间睡眠时，您的应用程序本身处于睡眠状态。我可以通过使用 PowerManager.Wakelock 自己解决这个问题。唯一的问题是，如果您的应用程序正在使用 CPU 周期，这将消耗更多电池。

```
/** wake lock on the app so it continues to run in background if phone tries to sleep.*/
PowerManager.WakeLock wakeLock;

@Override
public void onCreate(Bundle savedInstanceState) {
    ...

    // keep the program running even if phone screen and keyboard go to sleep
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);

    ...
}

// use this when screen sleeps
wakeLock.acquire();

// use this once when phone stops sleeping
wakeLock.release(); 
```

# c# - 将值传递给 html 从后面的代码中选择

> ID：11545869
> 
> 赞同：2
> 
> 时间：2012-07-18T16:17:15.173
> 
> 标签：c#, asp.net, html, html-select

我在我的一个 aspx 页面中有一个 html 选择，我想从后面的代码中为其分配选项值。

```
<select id="pageSize" runat="Server">
        <option value="how to set it from c#?">All</option> 
```

我有一个`MyPageCount`int 类型的属性调用，如何在这里传递它的值？

我将不胜感激任何帮助。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:19:56.377

添加`runat="server"`然后`pageSize.Value=MyPageCount;`在代码隐藏中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:19:31.073

你有没有试过这个：

```
<option value="<%: this.MyPageCount.ToString() %>">All</option> 
```

如果它在数据绑定控件内：

```
<option value='<%# Bind("YourField") %>'>All</option> 
```

# php - 如何将 PHP 脚本作为电子邮件正文包含在内

> ID：11545871
> 
> 赞同：2
> 
> 时间：2012-07-18T16:17:21.153
> 
> 标签：php, html, email, joomla, include

我有一个 php 脚本，它可以进行一些 MySQL 查询，这些查询只是将一些 HTML（带有动态数据）写入页面。我想要做的是发送一封以这个 HTML 为正文的电子邮件。假设我要插入到电子邮件正文中的 HTML 代码包含在 中`my_html_script.php`，我还想向它发送 2 个`$_GET`参数以使动态内容正确显示。

我在 Joomla 框架中，所以发送电子邮件的代码如下所示：

```
$mailer =& JFactory::getMailer();
$sender = $from_email;
$mailer->setSender($sender);

$email = explode(';',$email);
for ($i=0;$i<count($email);$i++){
    $mailer->addRecipient(trim($email[$i]));
}

$body   = "

";

$mailer->setSubject('This is the subject');
$mailer->setBody($body);

// Optional file attached
//$mailer->addAttachment();

$send =& $mailer->Send();
if ( $send !== true ) {
    //die($send->message);
    echo "<p>email FAILED".$recip."</p>";
} else {
    //mail sent
    echo "Emailed successfully.";
} 
```

所以，基本上我需要将 HTML 输出包含`my_html_script.php`到`$body`字符串变量中。我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:20:15.350

您只需在此块之前声明变量并使用：

```
ob_start();
include ('my_html_script.php');
$body = ob_get_clean(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:19:15.097

你可以这样做：

```
$body = file_get_contents("http://example.com/my_html_script.php?getvar=foo&othervar=bar"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:21:05.783

我想你需要这个，但是...

```
$body = file_get_contents("path_to_file.php?param1=content&param2=content"); 
```

您可以发送带有参数的 http 请求：param1、param2 或任何其他。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-30T17:45:28.270

```
$filename_xml="E-factuur ".$factuurnummer.".xml";
ob_start();
$_GET['knr']=$klantnummer;
$_GET['bnr']=$bestelnummer;
$_GET['key']=$_SESSION['user_id'];
include("basisUBL_xml.php");//inside the above $_GET['..'] are parsed 
$content_xml = ob_get_clean();
$content_xml = chunk_split(base64_encode($content_xml));
$name_xml = basename($filename_xml);
$uid="=_Part_2408_".md5(uniqid(time()));
$logopad_emails="https://www.yourdomainhere.nl/images/logo.png";
$headerx="MIME-Version: 1.0\r\n";
$headerx.="From: webshop www.yourdomainhere.nl <info@yourdomainhere.nl>\r\n";
$headerx.="Reply-To: info@yourdomainhere.nl \r\n";
$headerx.="Errors-To: info@yourdomainhere.nl \r\n";
$headerx.="X-Mailer: yourdomainhere Mailscript \r\n";
$headerx.="Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
// message & attachment
$messagex = "--".$uid."\r\n";
$messagex .= "Content-type:text/html; charset=iso-8859-1\r\n\r\n"; //2x \r\n important for OXS email and iphone!!!
$messagex .= $htmlbody3."\r\n\r\n";
$messagex .= "--".$uid."\r\n";
$messagex .= "Content-Type: application/octet-stream; name=\"".$name_pdf."\"\r\n";
$messagex .= "Content-Transfer-Encoding: base64\r\n";
$messagex .= "Content-Disposition: attachment; filename=\"".$name_pdf."\"\r\n\r\n";
$messagex .= $content_pdf."\r\n\r\n";
$messagex .= "--".$uid."\r\n";
$messagex .= "Content-Type: application/octet-stream; name=\"".$name_xml."\"\r\n";
$messagex .= "Content-Transfer-Encoding: base64\r\n";
$messagex .= "Content-Disposition: attachment; filename=\"".$name_xml."\"\r\n\r\n";
$messagex .= $content_xml."\r\n\r\n";
$messagex .= "--".$uid."--";
$mailtox='info@yourdomainhere.nl';
$subjectx='UBL test'.$factuurnummer; 
```

# php - 使用 php 从 mysql 数据库中获取尚未显示的问题

> ID：11545874
> 
> 赞同：0
> 
> 时间：2012-07-18T16:17:27.423
> 
> 标签：php, random

我们在 MySQL 数据库中有一个问题列表，并希望它向用户显示一个随机批准的问题。当您单击随机按钮时，我们希望显示另一个随机问题，但不是用户已经看到的任何问题。

我正在尝试使用这样的东西（但它不起作用，只是给出一个空白页）：

```
<?php

mysql_connect("localhost", "username", "password") or die(mysql_error());
mysql_select_db("aldrig") or die(mysql_error());

$result = mysql_query("SELECT * FROM spg WHERE approved='1'") or die(mysql_error());
$answers = mysql_fetch_array($result);

start_session();

if (isset($_COOKIE["answers"]))
    $alreadyShownAnswers = json_decode($_COOKIE["answers"]);
else
    $alreadyShownAnswers = array();

$answerToShow = $answers[$randomIndex];
$alreadyShownAnswers[] = $answers[$randomIndex];
unset($answers[$randomIndex]);
$answers = array_values($answers);

echo "<div class='contentTitle'><h1>";
echo $answerToShow; 
echo "</h1></div>";

$_COOKIE["answers"] = json_encode(alreadyShownAnswers);

?> 
```

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:22:17.810

我可以看到一些错误的地方：

1.  您正在使用已弃用的`mysql_*`功能（与您的问题并不真正相关）；
2.  `mysql_fetch_array`仅获取第一行（通常为一行），而不是结果集中的所有行；
3.  你没有`$randomIndex`在任何地方设置。

就像现在一样，您需要遍历结果集并将所有答案添加到数组中。如果您切换到例如 PDO，您可以使用[`fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php)您现在尝试的方式获取所有结果。

`ORDER BY RAND()`如果您的数据库不是太大而无法获得可以使用的已经随机排序的结果集，您也可以使用。

# google-apps-script - GAS：对 Google 站点和文档的共享和权限的限制

> ID：11545875
> 
> 赞同：0
> 
> 时间：2012-07-18T16:17:30.683
> 
> 标签：google-apps-script

我没有看到有关使用高级选项设置站点共享和权限的文档：

*   知道链接的任何人（无需登录）
*   在网上公开

创建或复制站点默认权限仅授予脚本所有者，并且必须手动转到站点本身来设置权限。

这还没有在站点服务中，还是有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:35:49.997

此功能没有内置支持，但您可以通过在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开功能请求来请求它。或者，您可以使用[UrlFetchApp](https://developers.google.com/apps-script/class_urlfetchapp)直接调用 GData Google Sites API，它提供[对 ACL 的更精细控制](https://developers.google.com/google-apps/sites/forum?place=topic%2Fgoogle-sites-api%2FeQb61PDfeEk%2Fdiscussion)。

# mysql - 选择 comments.count >= 10 的所有帖子

> ID：11545879
> 
> 赞同：1
> 
> 时间：2012-07-18T16:17:47.813
> 
> 标签：mysql, ruby-on-rails, activerecord

一篇文章有​​很多评论。我想选择所有 comments.count 大于 5 的帖子。

像这样： Post.all.joins(:comments).having("count >= 5")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:51:28.447

如果您`comments_count`在 post 表中添加一列，并添加以下内容：

```
class Comment < ActiveRecord::Base
  belongs_to :post, :counter_cache => true
  ..
end 
```

然后，当您保存帖子时，它将更新计数器。此时查询非常简单：

```
Post.where("comments_count >= ?", 5).all 
```

或者，您可以使用纯 SQL 代码。但是，伙计，去柜台

相关：[基于嵌套模型计数排序的 Rails 查询？](https://stackoverflow.com/questions/8407939/rails-query-that-sorts-based-on-the-count-of-a-nested-model)

# .net - 如何在 Visual Studio Development Server Web 服务器中启用 PUT 和其他 HTTP 方法？

> ID：11545881
> 
> 赞同：1
> 
> 时间：2012-07-18T16:17:54.097
> 
> 标签：.net, visual-studio-2010, cassini, http-put

我想在本地调试一个使用 HTTP PUT 方法接受请求的 Web 服务，但是当我尝试这样做时，Visual Studio 开发服务器 Web 服务器返回错误消息“(405) Method Not Allowed”。

请参阅相关问题[Visual Studio 的内置 Web 服务器是否支持 HTTP PUT？](https://stackoverflow.com/questions/10405137/does-visual-studios-built-in-web-server-support-http-put).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:53:43.797

我在问题描述中的陈述不正确。我调试 Web 服务的“尝试”最终是不正确的——请求的 URL 与 Web 服务的 URL 不匹配。当我修复请求 URL 时，我能够使用 HTTP PUT 方法成功提交请求。

简短的回答 - 无需执行任何操作即可在 Visual Studio Development Server Web 服务器中启用 PUT（或其他）HTTP 方法。

# wordpress - 奇怪的 modrewrite 行为

> ID：11545884
> 
> 赞同：0
> 
> 时间：2012-07-18T16:18:03.710
> 
> 标签：wordpress, apache, mod-rewrite

我在子目录中运行 Wordpress（和 buddypress 插件）：

```
mydomain.com/mysubdomain/ 
```

我的modrewrites如下：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /mysubdomain/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /mysubdomain/index.php [L]
</IfModule> 
```

一切都按预期工作。例如，位于 mydomain.com/mysubdomain/?page=2 的“关于我们”页面有一个“漂亮”的 URL mydomain.com/mysubdomain/about-us

我在 mydomain.com 的根目录中也有一个**非 wordpress网站，其重写规则如下：**

```
RewriteCond %{HTTP_HOST} ^([a-z0-9-]+).mydomain.com [NC]
RewriteRule ^newpage\.html$ http://mydomain.com/mysubdomain/about-us [NC,L] 
```

[这会将http://mydomain.com/newpage.html](http://mydomain.com/mysubdomain/about-us)重写为[http://mydomain.com/mysubdomain/about-us](http://mydomain.com/newpage.html)的页面- 但是，这会显示 Wordpress 的 404 页面未找到错误。（浏览器中的网址正确： http: [//mydomain.com/newpage.html](http://mydomain.com/newpage.html)）

由于显示了 Wordpress 404 页面，这表明问题在于 Wordpress 的 modrewrite 与 newpage.html 重定向冲突。

非常感谢帮助/建议！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:35:12.967

您的规则似乎没有按照您的描述进行：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9-]+).mydomain.com [NC]
RewriteRule ^newpage\.html$ http://mydomain.com/mysubdomain/about-us [NC,L] 
```

这*会将浏览器重定向*到[http://mydomain.com/mysubdomain/about-us](http://mydomain.com/mysubdomain/about-us)，这与似乎正在发生的事情不一致。问题是，如果您只是重写 URI，wordpress 控制器可能无法正确处理请求（对此不确定，这只是一个猜测），因此您可能需要重写为未重写的 URI：

```
RewriteRule ^newpage\.html$ /mysubdomain/?page=2 [NC,L] 
```

# c - PJLMon 不会构建 (LNK 2019)

> ID：11545886
> 
> 赞同：1
> 
> 时间：2012-07-18T16:18:10.073
> 
> 标签：c, dll, printing, linker, linker-errors

**编辑：我似乎已经解决了这个问题，即使我不知道它为什么起作用的细节。请参阅此帖子下方的答案。**

我正在尝试编译示例语言监视器 PJLMon，但链接器错误导致代码无法成功构建。我会发布整个代码，但它有点多（其中大部分可能与手头的问题无关），并且很容易在网上找到。

有问题的错误是：“1>pjlmon.obj：错误 LNK2019：未解析的外部符号 _SetPort 在函数 _ClearPrinterStatusAndIniJobs 中引用”

有问题的代码指的是 pjlmon.c 中的代码，如下所示：

```
VOID
ClearPrinterStatusAndIniJobs(
    __in    PINIPORT    pIniPort
    )
{
    PORT_INFO_3 PortInfo3;

    if ( pIniPort->PrinterStatus ||
         (pIniPort->status & PP_PRINTER_OFFLINE) ) {

        pIniPort->PrinterStatus = 0;
        pIniPort->status &= ~PP_PRINTER_OFFLINE;

        ZeroMemory(&PortInfo3, sizeof(PortInfo3));
        SetPort(NULL, pIniPort->pszPortName, 3, (LPBYTE)&PortInfo3); // LNK2019 HERE
    }

    SendJobLastPageEjected(pIniPort, ALL_JOBS, FALSE);
} 
```

我没有以任何方式修改程序逻辑。我已经修改了一些要在本地找到的头文件（即 #include "winsplp.h" 而不是 ），但是这些文件在其他方面没有改变，所以我认为这不是问题。不过，我将继续展示我的定义和包含，以防万一我犯了一个愚蠢的错误：

```
#define USECOMM

#include "precomp.h"
#include "ntddpar.h"

#include <windows.h>
#undef SetPort

#include <WinReg.h>
#include <winioctl.h> 
```

我关闭了 CLR，并且没有使用预编译的头文件。

在 Project->Properties->Linker->Input->Additional Dependencies 下，我添加了“winspool.lib; advAPI32.lib”。这些文件应包含对 winspool.h（自动包含在 windows.h 中）和 winreg.h 中函数的引用。

#undef SetPort 代码删除设置为将“SetPort”更改为“SetPortW”（unicode）或“SetPortA”（ascii）的宏。我不认为这是一个问题。

我有点迷失从这里去哪里。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:30:07.587

SetPort() 在 Windows 库中不作为函数存在。您可以将 SetPortA() 用于 ANSI（真正多字节）字符串或 SetPortW() 用于宽（Unicode）字符串。通过使用`#undef SetPort`，您可以防止预处理器将该调用替换为对 A 或 W 的正确变体的调用，这是基于 UNICODE 预处理器符号完成的。

如果您想修复错误，您可以删除 #undef 行（正如您从答案中所做的那样）或手动调用正确的函数，因为您将知道是否需要调用 ANSI 或 Wide 版本，具体取决于您是是否使用 Unicode 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:29:37.673

问题似乎已通过删除该行得到解决

```
#undef SetPort 
```

并将其替换为

```
#include <WinSpool.h> 
```

为什么会这样，我不知道。但它有效。:) 如果您知道原因，请随时解释。

# php - 多个 AND 条件 MySQL

> ID：11545889
> 
> 赞同：4
> 
> 时间：2012-07-18T16:18:13.463
> 
> 标签：php, mysql

如何在一个子句中有多个 AND 条件？就像`SELECT * FROM database WHERE x=x,y=y AND z=z`我试过那样，它没有工作。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T16:18:42.087

```
SELECT * FROM table WHERE x=x AND y=y AND z=z 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T16:19:44.830

```
SELECT * FROM database WHERE `x`=x AND `y`=y AND `z`=z 
```

# java - java.util.ConcurrentModificationException，如何避免

> ID：11545891
> 
> 赞同：-4
> 
> 时间：2012-07-18T16:18:19.063
> 
> 标签：java, arraylist

以下是代码：-您能告诉我为什么它会抛出异常以及如何避免这种情况，谢谢您的帮助..

```
public Collection getBeansFilteredByAuthorityAndApproach(ITaskContext context)throws CEAppException

{ Collection regApprAuthMapColl = this.getRegulatoryAuthorityApproachMap(context);//Collection of All approach combos

Collection finalAuthApprMapColl = new ArrayList();

ParameterSet pSets = context.getExecutionThread().getParameterSet();

//<RuntimeParameterSet> or list of <RuntimeParameters>

ArrayList apAR =pSets.getRuntimeParameterSet().getRuntimeParametersList();

int apSize = apAR.size() ;

for (int j = 0; j < apSize; j++)

{//1

//Individual <RuntimeParameterSet> or list of <RuntimeParameters>

RuntimeParameters rps = (RuntimeParameters) apAR.get(j);

if (Constants.CLONE_TYPE.equalsIgnoreCase(rps.getType())) //TODO :check if it required or not

{//2

//obtain a list of <RuntimeParameter> or indiviual <RuntimeParameters>

ArrayList rtParams = rps.getRuntimeParameterList();

int rtSize = rtParams.size();

for (int k = 0; k < rtSize; k++)

{//3 FOR EACH RUNTIME PARAMETER , i.e Approach & Authority

//Individual <RuntimeParameter>

Integer inputAuthority = null;

Integer inputApproach = null;

RuntimeParameter rtp = (RuntimeParameter) rtParams.get(k);

logger.debug("========== RuntimeParameter rtp="+rtp);

if (Constants.REGAUTHORITY.equals(rtp.getName()))

{

Integer regAuthority = ReferenceData.getRegAuthority(context,rtp.getValue());

inputAuthority = regAuthority;

} else if (Constants.REGAPPROACH.equals(rtp.getName()))

{

Integer regApproach = ReferenceData.getRegApproach(context,rtp.getValue()) ;

inputApproach = regApproach;

}

//FOR EACH RUNTIME PARAMETER FILTER THE COLLECTIONS

//FILTERING DATA

logger.debug("inputApproach :"+inputApproach);

logger.debug("inputAuthority :"+inputAuthority);

if(inputApproach == null)// if APPROACH IS NOT specified in the notification

{

if( inputAuthority == null)// if AUTHORITY IS NOT specified & APPROACH IS NOT specified

{ //Then run for all auhorities and approaches

finalAuthApprMapColl = regApprAuthMapColl;//returning all possible beans

}//end of if

else// if AUTHORITY IS specified & APPROACH IS NOT specified

{ //Then for the given authority, run for all approaches: B1,STD,IRB,AIRB

for (Iterator itr = regApprAuthMapColl.iterator(); itr.hasNext();)

{//looping through all possible values to select

RegulatoryAuthorityApproachMap raaMap = (RegulatoryAuthorityApproachMap)itr.next();

Integer fullAuthorityId = raaMap.getRegulatoryAuthorityId();

if(inputAuthority.intValue() == fullAuthorityId.intValue())// for a given authority

{

finalAuthApprMapColl.add(raaMap);//returning a list of all approaches for a given authority

}

}//end of for loop

}//end of else

}//end of if approach is null

else//if APPROACH IS specified in the notification

{

if(inputAuthority == null)// if AUTHORITY IS NOT specified && APPROACH IS specified

{//Then for the given approach, run for all authorities: FSA,EBK,BIS

for (Iterator itr = regApprAuthMapColl.iterator(); itr.hasNext();)

{//looping through all possible combos to select

RegulatoryAuthorityApproachMap raaMap = (RegulatoryAuthorityApproachMap)itr.next();

Integer fullApproachId = raaMap.getRegulatoryApproachId();

if(inputApproach.intValue() == fullApproachId.intValue())// for a given approach

{

finalAuthApprMapColl.add(raaMap);//returning a list of all authorities for a given approach

}

} //end of for loop

}//end of if

else// if AUTHORITY IS specified & APPROACH IS specified

{

for (Iterator itr = regApprAuthMapColl.iterator(); itr.hasNext();)

{//looping through all possible combos to select

RegulatoryAuthorityApproachMap raaMap = (RegulatoryAuthorityApproachMap)itr.next();

Integer fullApproachId = raaMap.getRegulatoryApproachId();

Integer fullAuthorityId = raaMap.getRegulatoryAuthorityId();

if((inputApproach.intValue() == fullApproachId.intValue()) && (inputAuthority.intValue() == fullAuthorityId.intValue()))// for a given approach

{

finalAuthApprMapColl.add(raaMap);//returning a list of all authorities for a given approach

}

} //end of for loop

}

}//end of else

}//3

}//2

}//1

if(finalAuthApprMapColl.size() == 0){throw new CEAppException("The Authority/Approach mapping is null"); }

else

return finalAuthApprMapColl;

}//end of method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:25:35.937

您的代码非常不清楚，但据我所知，您正在对给定集合使用迭代器：

```
for(Iterator itr = regApprAuthMapColl.iterator(); itr.hasNext();) 
```

在这种情况下，集合是`regApprAuthMapColl`。但是，您在迭代集合时也在修改集合，在您的 for 循环中，您具有以下内容：

```
finalAuthApprMapColl.add(raaMap); 
```

这是不允许的 - 您不能在迭代集合的同时修改集合，并且可能是引发异常的地方。

# apache-flex - Flex 以编程方式订购 Canvas

> ID：11545892
> 
> 赞同：0
> 
> 时间：2012-07-18T16:18:20.573
> 
> 标签：apache-flex, flex3, flash-builder

我想知道是否可以以编程方式设置画布的显示顺序？

例如我有

```
<mx:Canvas id="head">
...content...
</mx:Canvas>

<mx:Canvas id="shoulders">
...content...
</mx:Canvas>

<mx:Canvas id="knees">
...content...
</mx:Canvas>

<mx:Canvas id="toes">
...content...
</mx:Canvas> 
```

我可以设置一个变量来定义画布的显示顺序吗？所以我可以有一个用户的[头、肩膀、脚趾、膝盖]，另一个用户有[脚趾、头、肩膀、膝盖]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:43:00.507

您可以使用方法[swapChildren](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#swapChildren%28%29)和[swapChildrenAt](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#swapChildrenAt%28%29)来更改组件子级的 Z 顺序。

在 MXML 中，子元素是按照它们的显示顺序创建的，因此如果您希望膝盖高于肩膀，则必须更改组件的顺序，如下所示：

```
<mx:Canvas id="head">
...content...
</mx:Canvas>

<mx:Canvas id="knees">
...content...
</mx:Canvas>

<mx:Canvas id="shoulders">
...content...
</mx:Canvas>

<mx:Canvas id="toes">
...content...
</mx:Canvas> 
```

或者您可以使用上述方法在事后更改订单。

# javascript - 在 CRM 2011 中从 JavaScript 执行工作流

> ID：11545895
> 
> 赞同：5
> 
> 时间：2012-07-18T16:18:25.753
> 
> 标签：javascript, workflow, dynamics-crm, dynamics-crm-2011

我正在尝试通过功能区按钮为视图中选择的记录执行工作流。我有一个使用“旧”服务来实现 CRM 4 兼容性的工作示例：

```
function invokeWorkflow(workflowId, entityId) {
    var request =
        '<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"' +
        '               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"' +
        '               xmlns:xsd="http://www.w3.org/2001/XMLSchema">' +
           GenerateAuthenticationHeader() +
        '  <soap:Body>' +
        '    <Execute xmlns="http://schemas.microsoft.com/crm/2007/WebServices">' +
        '      <Request xsi:type="ExecuteWorkflowRequest">' +
        '        <EntityId>' + entityId + '</EntityId>' +
        '        <WorkflowId>' + workflowId + '</WorkflowId>' +
        '      </Request>' +
        '    </Execute>' +
        '  </soap:Body>' +
        '</soap:Envelope>';

    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/MSCRMservices/2007/crmservice.asmx', false);

    xhr.setRequestHeader('Content-Type', 'text/xml; charset=utf-8');
    xhr.setRequestHeader('SOAPAction', 'http://schemas.microsoft.com/crm/2007/WebServices/Execute');

    xhr.send(request);
} 
```

但是，我想使用 CRM 2011 服务来编写这篇文章，以提高未来版本的可维护性。这是我到目前为止尝试过的，但这不起作用 - 调用的返回码是 HTTP 500（内部服务器错误）。

```
function invokeWorkflow(workflowId, entityId) {
    var request =
        '<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"' +
        '               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"' +
        '               xmlns:xsd="http://www.w3.org/2001/XMLSchema">' +
        '  <soap:Body>' +
        '    <Execute xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services">' +
        '      <Request xsi:type="ExecuteWorkflowRequest">' +
        '        <EntityId>' + entityId + '</EntityId>' +
        '        <WorkflowId>' + workflowId + '</WorkflowId>' +
        '      </Request>' +
        '    </Execute>' +
        '  </soap:Body>' +
        '</soap:Envelope>';

    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/XRMServices/2011/Organization.svc/web', true);

    xhr.setRequestHeader('Accept', 'application/xml, text/xml, */*');
    xhr.setRequestHeader('Content-Type', 'text/xml; charset=utf-8');
    xhr.setRequestHeader('SOAPAction', 'http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute');

    xhr.onreadystatechange = function () { alert(xhr.status); };
    xhr.send(request);
} 
```

有谁知道第二个脚本有什么问题？我已经尽我所能尝试谷歌搜索，但我发现的每个声称适用于 CRM 2011 的示例实际上只是使用 CRM 4 兼容性服务（如第一个示例中所示）。我基于 CRM 2011 SDK 中的示例中的第二个示例，虽然这不包括 ExecuteWorkflowRequest 对象的示例，所以它只是最好的猜测。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T09:37:44.363

在 CRM sdk 文件夹 \samplecode\cs\client\soaplogger 中有一个名为**SOAPLogger的应用程序，它在 javascript 中为特定操作生成请求。**

下面，您可以找到“ExecuteWorkflow”的 http 请求（只需更改 和 的值`EntityIdValue`）`WorkflowIdValue`。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <Execute xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <request i:type="b:ExecuteWorkflowRequest" xmlns:a="http://schemas.microsoft.com/xrm/2011/Contracts" xmlns:b="http://schemas.microsoft.com/crm/2011/Contracts">
        <a:Parameters xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic">
          <a:KeyValuePairOfstringanyType>
            <c:key>EntityId</c:key>
            <c:value i:type="d:guid" xmlns:d="http://schemas.microsoft.com/2003/10/Serialization/">EntityIdValue</c:value>
          </a:KeyValuePairOfstringanyType>
          <a:KeyValuePairOfstringanyType>
            <c:key>WorkflowId</c:key>
            <c:value i:type="d:guid" xmlns:d="http://schemas.microsoft.com/2003/10/Serialization/">WorkflowIdValue</c:value>
          </a:KeyValuePairOfstringanyType>
        </a:Parameters>
        <a:RequestId i:nil="true" />
        <a:RequestName>ExecuteWorkflow</a:RequestName>
      </request>
    </Execute>
  </s:Body>
</s:Envelope> 
```

的构造`XMLHttpRequest`是正确的，因此请尝试更改`soapEnvelope`.

# java - java.lang.IllegalStateException：Manager 是来自 DefaultHttpClient 的关闭异常

> ID：11545898
> 
> 赞同：1
> 
> 时间：2012-07-18T16:18:35.240
> 
> 标签：java, http, http-post, httpclient

我正在使用 DefaultHttpClient 实例执行 HttpPost。并在获得响应后使用它。

如下。（这是一个运行时异常）

```
httpResponse =  m_httpClient.execute(postRequest);
HttpEntity entity = httpResponse.getEntity();

if (entity != null) {
}
EntityUtils.consume(entity); 
```

我仍然得到例外，

```
java.lang.IllegalStateException: Manager is shut down.
        at org.apache.http.impl.conn.SingleClientConnManager.assertStillUp(SingleClientConnManager.java:175)
        at org.apache.http.impl.conn.SingleClientConnManager.getConnection(SingleClientConnManager.java:209)
        at org.apache.http.impl.conn.SingleClientConnManager$1.getConnection(SingleClientConnManager.java:190)
        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:391)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
        at com.pixalate.etl.adserver.appnexus.api.AppNexusApiManager.executeRequest(AppNexusApiManager.java:374) 
```

# java - 将协议中的 @optional 选择器移植到 Java 接口

> ID：11545905
> 
> 赞同：2
> 
> 时间：2012-07-18T16:18:58.640
> 
> 标签：java, interface, porting, objective-c-protocol

所以，假设你有这个：

```
if ([foo respondsToSelector:@selector(bar:)]) {
   [foo bar:abc];
} else {
   [qux mux:abc];
} 
```

而且两者`bar:`都有`mux:`副作用。

如果协议（接口）中没有 @optional 成员之类的东西，您将如何将其移植到 Java？

我可以想到三种方法：

1.  C方式：向接口添加一个方法，该方法返回一个位域，表示哪些方法已实现且有效。
2.  COM方式：修改接口，使所有方法都返回一个结果码并检查E_NOTIMPL。使用 out 参数作为返回值。
3.  （我想象的是）Java 方式：将每个接口方法标记为抛出 UnsupportedOperationException 并捕获它们以检查未实现的方法。

我是否错过了任何其他令人信服的选择？假设这段代码不经常被调用，所以我们不需要优化性能，我认为 3 是最好的方法，因为它是可执行的。有替代方案的论据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:45:01.313

MonoTouch 为您的问题提供了完善的解决方案：使为 Objective-C 设计的代码在 OO VM 语言中感觉相当舒适。

他们通过有一个基类来解决这个问题，该基类将所有必需的方法标记为`abstract`，并且不标记可选方法（或者更准确地说，`virtual`在 C# 中标记为，但 Java 不需要）。它是围绕必需方法的编译时强制执行而明确设计的，同时仍允许可选方法。

更多详细信息：[http ://docs.xamarin.com/index.php?title=ios/tutorials/Events%2C_Protocols_and_Delegates#Protocols_Deep_Dive](http://docs.xamarin.com/index.php?title=ios/tutorials/Events%2C_Protocols_and_Delegates#Protocols_Deep_Dive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:53:07.313

坦率地说，Java 的方式是完全避免这种情况。通常 Java 程序员会加倍努力（并使用许多已建立的模式）来不破坏多态性 - 因此切换类型将被认为是一种不好的做法。

最简单的解决方案和@optional 的直接翻译是使用 instanceof 并在接口中使用可选方法来扩展所需的方法：

```
interface MyProtocol {
   void required1();
   void required2();
}

interface MyProtocolWithOptional extends MyProtocol {
   void optional1();
   void optional2();
} 
```

接着：

```
public static void test(MyProtocol mp) {
   mp.required1();
   if (mp instanceof MyProtocolWithOptional) {
       ((MyProtocolWithOptional)mp).optional1();
   }
} 
```

如果您有很多接口并且您的应用程序在运行时是可扩展的，您可以使用能力模式 ( [http://java.dzone.com/print/4771](http://java.dzone.com/print/4771) ) 之类的解决方案，其中可以查询每个对象的可用接口（其中有点像 COM，有点不像 COM）。您可以从以下内容开始：

```
interface ThingWithCapabilities<T> {
    T interfaceFor(Class<T> inteface)
} 
```

ThingWithCapabilities 是所有其他人扩展的基本接口。然后在运行时使用它：

```
public static void test(ThingWithCapabilities mp) {
    if (mp.interfaceFor(MyProtocolWithOptions.class) != null) {
        mp.interfaceFor(MyProtocolWithOptions.class).optional1();
    }
} 
```

好消息是铸件不见了。更好的是，您没有将 MyProtocolWithOptions 实例的生命周期与 ThingWithCapabilities 的生命周期联系起来（例如，您可以拥有一个 MyProtocolWithOptions 实例来满足许多 ThingWithCapabilities 实例的需求；另一方面，如果您碰巧实现了 MyProtocolWithOptions）。如果将它与空对象模式结合使用（其中您有一个无状态的 MyProtocolWithOptions 实例，它什么都不做，并且由每个不具有 MyProtocolWithOptions 功能而不是 null 的 ThingWithCapabilities 返回），您可以获得更好的代码：

```
public static void test(ThingWithCapabilities mp) {
    mp.interfaceFor(MyProtocolWithOptions.class).optional1();
} 
```

除非你正在写一些大的东西，否则这种方法可能很复杂。我只是提到它，因为它很有趣（并且我在一些宠物项目上成功使用过它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:25:34.233

不，您所说的“Java 方式”实际上是一种反方式：`RuntimeException`在程序的常规流程中不应该捕获子类，因为它们表示编程错误。

更好的方法是将协议拆分成更小的部分：所有必需的方法最终都在一个接口中，而可选方法将在它们自己的小接口中。现在您可以测试您的对象`instanceof`以确定是否实现了可选接口及其隐含方法。

这是一个例子：

```
@protocol MyProtocol
@optional
    -(void)method1;
    -(void)method2;
@required
    -(void)method3;
    -(void)method4;
    -(void)method5;
@end

interface IMyProtocol {
    void method3();
    void method4();
    void method5();
}

interface IMyProtocolMethod1 {
    void method1();
}

interface IMyProtocolMethod2 {
    void method2();
}

class MyProtocolImplWithMethod2 implements IMyProtocol, IMyProtocolMethod2 {
    public void method2() {
    }
    public void method3() {
    }
    public void method4() {
    }
    public void method5() {
    }
} 
```

然后你可以写这个检查：

```
if (obj instanceof IMyProtocolMethod2) {
    ((IMyProtocolMethod2)obj).method2();
} 
```

# android - Android：运行 ActionBarSherlock-Plugin-Maps 时出现 ClassNotFoundException

> ID：11545912
> 
> 赞同：2
> 
> 时间：2012-07-18T16:19:23.113
> 
> 标签：android, actionbarsherlock, classnotfoundexception, mapactivity

我正在尝试设置一个使用 Jake Wharton 的[ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)和[ActionBarSherlock-Plugin-Maps](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps)的示例项目。我按照[此处](https://stackoverflow.com/a/10041252/356895)和[此处](https://stackoverflow.com/a/11223857/356895)的说明进行操作。我不一定需要片段。这是我创建的简单类。

```
package com.example.actionbarsherlock;

import android.os.Bundle;
import com.actionbarsherlock.app.SherlockMapActivity;

public class MainActivity extends SherlockMapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

尽管我尝试遵循确切的描述，但我最终`ClassNotFoundException`在启动应用程序时得到了一个。这是堆栈跟踪。

```
 Unable to resolve superclass of Lcom/actionbarsherlock/app/SherlockMapActivity; (729)
  Link of class 'Lcom/actionbarsherlock/app/SherlockMapActivity;' failed
  Unable to resolve superclass of Lcom/example/actionbarsherlock/MainActivity; (533)
  Link of class 'Lcom/example/actionbarsherlock/MainActivity;' failed
 D/AndroidRuntime(408): Shutting down VM
  threadid=3: thread exiting with uncaught exception (group=0x4001b188)
  Uncaught handler: thread main exiting due to uncaught exception

  java.lang.RuntimeException: Unable to instantiate activity 
    ComponentInfo{com.example.actionbarsherlock/com.example.actionbarsherlock.MainActivity}: 
    java.lang.ClassNotFoundException: com.example.actionbarsherlock.MainActivity
    in loader dalvik.system.PathClassLoader@44e8ca40

    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4363)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    at dalvik.system.NativeStart.main(Native Method)

  Caused by: java.lang.ClassNotFoundException: com.example.actionbarsherlock.MainActivity 
    in loader dalvik.system.PathClassLoader@44e8ca40

    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
    ... 11 more
  threadid=7: reacting to signal 3
  Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

我之前测试过这个库并创建了一个`SherlockActivity`运行良好的子类。这样做时，我注意到`ClassNotFoundException`当我忘记`android:theme`在`AndroidManifest.xml`. 这是 (`SherlockActivity`和`SherlockMapActivity`) 示例项目的文件，以防万一：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.actionbarsherlock"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:theme="@style/Theme.Sherlock"
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

**更新：**

在按照 Raghav Sood 和 M Mohsin Naeem 的建议添加`uses-library`设置后，我遇到了以下消息。

```
Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY 
```

这是我的项目设置的屏幕截图。

![包资源管理器](../Images/6f3286d2f2cab3e39e44635a58750bc4.png)

* * *

**编辑：**

也许`.classpath`我的*actionbarsherlocktest* 项目的文件有帮助......

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="lib" path="libs/actionbarsherlock-plugin-maps-4.1.0.jar"/>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

*库*项目的`.classpath`文件看起来完全一样。

 ** * *

**`INSTALL_FAILED_MISSING_SHARED_LIBRARY`错误消息的**解决方案**。**

 **由于某些原因，Eclipse 总是启动为 API 级别 7 配置但**没有 Google API**的模拟器。我无法强迫它选择“启用地图”的模拟器。在我删除“无地图”模拟器后，应用程序成功启动。你知道这是怎么发生的吗？

* * *

**概括：**

最后，我让它运行起来。以下是我喜欢分享的一些经验。

*   从网站下载最新版本的[ActionBarSherlock](http://actionbarsherlock.com/download.html)。
*   不要克隆[存储库](https://github.com/JakeWharton/ActionBarSherlock)以签出 4.1.0 标签 (9598f2b) **。**它对我不起作用。
*   在 Eclipse 中设置 ActionBarSherlock 库项目。
*   将包含的内容更新`action-support-v4.jar`到最新版本。
*   添加`actionbarsherlock-plugin-map-x.y.z.jar`到**库**项目的`libs`文件夹中。
***   您**不需要**将其添加到库项目的构建路径中。*   设置您的主项目并将库项目添加为依赖项。*   您**不需要**将`action-support-v4.jar`或添加`actionbarsherlock-plugin-map-x.y.z.jar`到您的主项目。也**没有**必要将任何 .jar 文件添加到主项目的构建路径中。*   存储库中提供了一个[简单且有用的示例。](https://github.com/JakeWharton/ActionBarSherlock-Plugin-Maps/tree/master/sample)**

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T16:27:12.390

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在 /libs 文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于 /libs 中。将其放在那里并将其重新添加到构建路径中。

您还应该添加

```
<uses-library android:name="com.google.android.maps" /> 
```

到您的清单文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:25:38.560

你错过了第 8 步[。](https://stackoverflow.com/a/10041252/1436931)

`<uses-library android:name="com.google.android.maps" />`

您需要在清单文件中添加它。

让它像这样

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.actionbarsherlock"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:theme="@style/Theme.Sherlock"
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```*****

# atk4 - 使用选定的列和自定义布局增强 CRUD？

> ID：11545916
> 
> 赞同：0
> 
> 时间：2012-07-18T16:19:39.573
> 
> 标签：atk4

刚刚学习agiletoolkit，所以我会有一些问题......

首先，我启动并运行了一个数据库，其中包含一些数据，实际上是几个表。没什么大不了的。

我有所有可以使用基本 CRUD 编辑的表格，但我想知道是否可以通过布局控制来增强 CRUD 界面。

这就是我的意思：

我有一个表，其中包含在模型中定义的许多字段，以及一个使用 CRUD 引用该模型的页面。我真的不想看到 CRUD 网格中的所有字段，但我希望能够通过单击 CRUD 提供的编辑按钮来编辑我想要的某些其他字段。我追求的效果是一个有几列但可以像 CRUD 一样在适当位置编辑的网格。这可能吗？

此外，我已经能够使用复选框和日期选择器为适当的字段格式化 CRUD 编辑器，但是覆盖编辑器太大而无法显示表中的所有字段，所以我希望能够用部分格式化覆盖并减少字段等的大小。

这是可能的还是我需要以另一种方式进行（带有表格的多页）？

我可能正在考虑具有某些列的网格布局，但我希望列中的 EDIT 按钮可以打开另一个页面，其中包含我为记录选择的编辑字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:55:23.163

您可以限制网格和表单中显示的列，这样您就不会使用 setModel 的第二个参数显示模型中的所有内容。

```
 $c1=$crud1->setModel($m, array('id', 'name', 'column1', 'column2')); 
```

您可以使用修改 where 子句的 addCondition 来限制网格中显示的行。把这两个放在一起看起来像这样

```
 <?php
 class page_yourpage extends Page {

 function init() { 
   $p=$this;

   $crud1=$p->add('View_CRUD');
   $m=$p->add('Model_YourModel');
   $m->addCondition('column1','value1');
   $m->order('column2');

   $c1=$crud1->setModel($m, array('id', 'name', 'column1', 'column2'));

 }
}
?> 
```

当按照 mcanedo 的建议将字段设置为 system(true) 时，您可以在网格中显示列，但在添加/编辑表单上不可见。

您还可以拥有未显示在网格或表单中但在使用 $m->get('columnname') 通过设置 visible(false) 引用页面时仍可访问的字段，例如对于自动递增的 id 列mysql。

```
<?php
class Model_YourModel extends Model_Table {
    public $entity_code='yourtable';.
    public $table_alias='yt';

    function init(){
        parent::init();
        $this->addField('id')->system(true)->visible(false);
        $this->addField('name');
        $this->addField('column1')->system(true);
        $this->addField('column2')->system(true)->visible(false); 
```

这应该创建一个包含名称列和第 2 列的网格，但是在添加或编辑新字段时，它只允许输入名称的值。

然后，您可以通过如下添加到 YourModel 来进一步执行此操作（并假设 YourModel.column3_id 是具有另一个表的外键的字段

```
 $this->addFIeld('column3_id')->refModel('Model_AnotherModel'); 
```

其中“另一个模型”定义为

```
 <?php
  class Model_AnotherModel extends Model_Table {
    public $entity_code='anothertable';.
    public $table_alias='at';

    function init(){
        parent::init();
        $this->addField('id')->system(true)->visible(false);
        $this->addField('name');
     }
  } 
```

然后，这将在表单中添加一个下拉列表，用户可以从中选择“anothertable”中的有效值，并且在网格中，它将显示名称字段而不是实际存储在“yourtable”中的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:31:05.557

如果您不想出现在 crud 上的某些字段，我猜它们可能被标记为系统字段，您可以在模型定义中这样做：

```
$this->addField('somefield')->system(true); 
```

# css - 在两个 div（左右）之间的 div 中居中文本

> ID：11545923
> 
> 赞同：0
> 
> 时间：2012-07-18T16:19:55.363
> 
> 标签：css, layout, html, xhtml

我想将表单元素放在 div 中（水平和垂直）。整个 div 应该居中并且在左右 div 之间。

**问题：**

*   通过填充，右 div 未对齐。
*   文本（Text1）也没有正确垂直对齐。-> padding-top 工作
*   表单的全部内容不是水平对齐的。

这是一个[例子](http://jsfiddle.net/M5Nh5/)。

**HTML：**

```
<div id="top">
  <div id="top-background-left">&nbsp;</div>
  <div class="external">
    <div class="externalinner">
      <form id="form" name="form" method="post" action="action.html">
        <p style="float: left; padding-right: 10px;">Text1</p>
        <input name="one" id="one" type="text" size="15" maxlength="10" />
        <select name="no" size="1">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2" selected>2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <button type="submit">Go</button>
      </form>
    </div>
  </div>
  <div id="top-background-right">&nbsp;</div>
</div> 
```

**CSS：**

```
#top{
    padding: 0px;
    width: 100%;
    height: 66px;
    background-color: #efa910;
    z-index:12;
    position:fixed;
    overflow:hidden;
}

.externalinner {
    text-align: left;
    padding-top: 20px;
}

.external {
    background: #efa910;
    text-align:center;
    margin-left:auto;
    margin-right:auto;
    width:900px;
}

#top-background-left {
    background: white;
    width: 150px;
    height: 66px;
    float: left;
}

#top-background-right {
    background: white;
    width: 150px;
    height: 66px;
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:30:09.827

将 移到解决正确的错位`<div id="top-background-right">&nbsp;</div>`之前。`<div class="external">``div`

如果您添加`line-height`与`p`表单高度相同的 a ，则会修复文本错位。

[修改后的 jsFiddle](http://jsfiddle.net/M5Nh5/5/)

我不明白你说的第三个问题是什么意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:43:28.643

正如加雷斯[在这里所说](https://stackoverflow.com/a/11546081/535122)

> 在解决正确的 div 错位之前移动`<div id="top-background-right">&nbsp;</div>`to 。`<div class="external">`

至于文本对齐方式，将您更改`<p>`为 a并从其 CSS 中`<span>`删除将使其成为表单其余部分的内联元素，这将允许您将其水平居中。`float:left`（或者你可以`float:left`换成`display:inline`最适合你的。

最后，您需要`width: 900px`从 .external 类中删除。还有以下两行：

```
margin-left:auto;
margin-right:auto; 
```

也不需要，因此您可以删除它们。

这是适合您的[jsFiddle](http://jsfiddle.net/M5Nh5/8/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:46:36.730

正如其他海报已经说过的那样， line-height 是垂直居中文本的绝佳方法。

这是一个没有浮动的例子，使用位置来排列 div。

我在 3 个元素周围添加了一个容器，并以绿色突出显示了左右 div，您可以看到它们。

告诉我这是否也适合您，或者如果我错了，您必须在不更改 html 源代码的情况下找到解决方案。

[jsfiddle 示例](http://jsfiddle.net/M5Nh5/10/)

# c#-4.0 - 如何将多个数据类型的数组传递给在 C# 4.0 中声明为 [in, out] SAFEARRAY(VARIANT) 的 COM 对象？

> ID：11545927
> 
> 赞同：0
> 
> 时间：2012-07-18T16:19:56.733
> 
> 标签：c#-4.0, com

我正在寻求帮助将具有多种数据类型的对象传递给如下定义的 COM 对象...

这是 COM 对象接口：

```
[id(0x00000004), helpstring("finds the next best item")]
unsigned long GetNextItem([in, out] SAFEARRAY(VARIANT) Content); 
```

这是需要传递给 COM 对象的数组。

```
content[0][0] = 0.0 
content[0][1] = 1   
content[0][2] = 1   
content[0][3] = 1      
content[0][4] = -1  
content[0][5] = 0.0 
content[0][6] = 0.0 
```

我有两个问题：

1.  在 C# 4.0 中创建一个可以包含多种数据类型的对象。
2.  通过它的公共接口将该对象传递给 COM 对象。

这是我无法克服的错误：

> SafeArrayTypeMismatchException{“指定的数组不是预期的类型。”}

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:08:20.710

```
content[0][0] = 0.0 
```

那是一个锯齿状数组，它不能转换为 SafeArray。您需要创建一个多维数组：

```
var content = new object[42, 666];
content[0, 0] = 0.0; 
```

# java - 迭代器并没有全部设置

> ID：11545931
> 
> 赞同：0
> 
> 时间：2012-07-18T16:20:08.357
> 
> 标签：java, iterator, set

我正在尝试使用迭代器搜索集合，但是当我这样做时，它只会找到整个集合中的两个！，这是我的代码：

```
import java.net.URL;
import com.google.gson.Gson;
import java.net.URLEncoder;
import java.io.InputStreamReader;
import java.io.*;
import javax.swing.*;
import java.awt.event.*;
import java.util.*;

public class Main {

  public static int min(int a,int b) {
    return a > b? b : a;
  }

  public static String corregir(String a,Set<String> col) {
      System.out.print("EL TAMAÑO ES: " + col.size());
      Iterator<String> it = col.iterator();
      String resp = a,aux = resp;
      int min = 30,dis,cont = 0;
      while(it.hasNext()) {
          cont++;
          resp = it.next().toString();
          System.out.print("El contador va en "  + cont + "\n");
          dis = edit_distance(a,resp);
          if(dis<min) {
              aux = resp; min = dis;
          }
          if(min==0) return resp;
      }
      return aux;
  }
  public static int edit_distance(String a,String b) {
    int n = a.length(), m = b.length(),costo;
    int[][] mat = new int[n+1][m+1];
    for(int i=0;i<=n;++i) mat[i][0] = i;
    for(int j=0;j<=m;++j) mat[0][j] = j;

    for(int i=1;i<=n;++i) {
      for(int j=1;j<=m;++j) {
        costo = a.charAt(i-1) == b.charAt(j-1)? 1 : 0;
        mat[i][j] = min(min(mat[i-1][j] + 1,mat[i-1][j-1] + costo),mat[i][j-1] + 1);
      }
    }

    return mat[n][m];
  }

  public static String resultados_de_la_busqueda(String search) {
    StringBuffer RES = new StringBuffer("<html>");
    String google = "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q="; //El enlace para buscar en google
    String charset = "UTF-8";
    URL url;
    Reader reader;
    try {
      url = new URL(google + URLEncoder.encode(search, charset));
      try {
        reader = new InputStreamReader(url.openStream(), charset);
        GoogleResults results = new Gson().fromJson(reader, GoogleResults.class);
        for(int i=0;i<3;++i) {
          RES.append(results.getResponseData().getResults().get(i).getTitle());
          RES.append("<br/>");
          RES.append("<a href=\"");
          RES.append(results.getResponseData().getResults().get(i).getUrl());
          RES.append("\">" + results.getResponseData().getResults().get(i).getUrl() + "</a>");
          RES.append("<br/><br/>");
        }
      } catch(Exception e) {}
    } catch(Exception e) {}

    RES.append("</html>");
    return RES.toString();
  }

  public static void main(String[] args) throws Exception {
    Set<String> col = new HashSet<String>();
    FileInputStream fis = new FileInputStream("lemario.txt");
    Scanner cin = new Scanner(fis);

    while(cin.hasNext()) {
        col.add(cin.next());
    }
    cin.close();

    final Set<String> col2 = col;
    /*
    Iterator<String> it = col2.iterator();

    while(it.hasNext()) {
        System.out.print(it.next() + "\n");
    }*/
    //Corrector
    System.out.print(col.size());
    //Map<String,>
    JFrame jf = new JFrame("Programa");
    jf.setBounds(120,120,500,500);
    jf.setResizable(false);
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    final JTextField input = new JTextField();
    input.setBounds(25,25,300,25);

    final JLabel resultados = new JLabel();
    resultados.setBounds(120,120,200,200);

    JButton boton = new JButton("Buscar");
    ActionListener al = new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        if(! input.getText().equals("")) {
            String entrada = input.getText();
            entrada = corregir(entrada,col2);
            resultados.setText(resultados_de_la_busqueda(entrada));
        }
        else System.out.println("No hay entrada\n");
      }
    };
    boton.addActionListener(al);
    input.addActionListener(al);
    boton.setBounds(350,25,130,25);

    jf.add(boton);
    jf.add(input);
    jf.add(resultados);

    //resultados.setText(resultados_de_la_busqueda("taringa")); //setText(input.getText()); asumiendo que está bien escrito.
    //Para verificar si está bien escrito tenemos que pasarlo por el diccionario y verificar palabra por palabra
    //Bastante lento, pero qué se va a hacer :'D
    jf.add(input);
    jf.add(resultados);
    jf.setVisible(true);
  }
} 
```

我正在阅读的文件是这样的：[http](http://www.teoruiz.com/lemario/lemario-20101017.txt) ://www.teoruiz.com/lemario/lemario-20101017.txt 知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:23:06.657

线

```
if(min==0) return resp; 
```

...在循环中将在迭代器遍历集合中的所有元素之前提前终止循环。因此，如果`edit_distance`返回`0`，它将停止循环（并跳出函数，返回`resp`）。

# java - 将音乐淡入新轨道？

> ID：11545933
> 
> 赞同：0
> 
> 时间：2012-07-18T16:20:11.180
> 
> 标签：java, audio, javasound

我已经开始用 Java 制作一个基本的游戏了。

一切进展顺利，我有地图加载，绘图工作正常等。

我让它为地图播放音乐，为碰撞之类的东西播放音效。

但是我觉得 MAP A（我要离开的那个）的音乐应该淡入 MAP B（我正在进入的那个地图）的音乐中，这可能吗？

我用来播放音乐的代码如下：

```
 try
    {
        if(clip != null)
        {
            clip.stop();
            clip.close();
        }

        clip = AudioSystem.getClip();

        URL a = this.getClass().getResource("/resource/sound/"+Filename + ".mid");

        ais = AudioSystem.getAudioInputStream(a);

        clip.open(ais);
        clip.loop(999);
        clip.start();
    }
    catch(Exception e)
    {

    } 
```

正如您很可能看到的那样，我在 Java 方面不是很好，但我的游戏到目前为止进展顺利，但我不是，我拒绝使用“引擎”，因为我想要完全控制。

有任何想法吗？

谢谢

编辑：

感谢所有的答案，我已经修改了你给我的代码，但它不起作用=/

我现在制作了下面的代码，它在一个新线程上运行（因此是 Runnable），因此音乐在播放时会消失。

代码如下：

```
private Boolean _SwapMusic = false;
private String _Filename;
Thread soundThread;

    Runnable r1 = new Runnable() {
      public void run() {
        while(true)
        {
            if(_SwapMusic)
            {
                _SwapMusic = false;
                try
                {
                    //Try to lower volume
                    for (int i = 0; i < 80; i ++) {
                        FloatControl gainControlA = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);
                           gainControlA.setValue(i * -1f);
                        Thread.sleep(10);
                    }
                }
                catch(Exception e){ System.out.print("Lower volume error: " + e + " ");}

                try{
                    clip.stop();
                    clip.close();
                }
                catch (Exception e) { System.out.print("clip.stop/close error: " + e + " ");}
                try
                {
                    clip = AudioSystem.getClip();

                    URL a = this.getClass().getResource("/resource/sound/"+ _Filename + ".mid");

                    ais = AudioSystem.getAudioInputStream(a);

                    clip.open(ais);

                    FloatControl gainControlB = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);
                    gainControlB.setValue(-80f);

                    clip.loop(999);
                    clip.start();
                }
                catch(Exception e){ System.out.print("Play error: " + e + " ");}

                try
                {
                    //Try to higher volume
                    for (int i = -80; i < 0; i ++) {
                        FloatControl gainControlC = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);
                           gainControlC.setValue(i);
                        Thread.sleep(3);
                    }
                }
                catch(Exception e){ 
                System.out.print("Higher volume error: " + e + " ");
                }
            }         
        }
      }
    }; 
```

只是为了说明这一点，我试图让 MAP A 的音乐在 MAP B 的音乐开始之前完全消失。

感谢到目前为止的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:14:09.070

您可以使用`MASTER_GAIN`控件降低第一个剪辑的声音，同时提高第二个剪辑的声音，您可能需要调整 dB 和时序，但这应该可以：

```
Clip clipA = AudioSystem.getClip();
Clip clipB = AudioSystem.getClip();
clipA.open(aisA);
clipB.open(aisB);

for (int i = 0; i < 100; i ++) {
   FloatControl gainControlA = (FloatControl) clipA.getControl(FloatControl.Type.MASTER_GAIN);
   gainControlA.setValue(i * -1f);
   FloatControl gainControlB = (FloatControl) clipB.getControl(FloatControl.Type.MASTER_GAIN);
   gainControlB.setValue(-100f + i);

   Thread.sleep(100);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T18:21:25.410

这并不是一个答案，而是添加一些不适合评论的可能有用的信息。

是的，-80 到 6.0 有点时髦。我认为它应该在舷外混音器上复制分贝。但到耳朵的斜率几乎不是线性的。如果我没记错的话，当你降到 -20 时，声音可能已经听不见了。在这和试图在音量变化中进行实时精度的性能问题之间，我放弃了使用控制线并开始直接处理 PCM 数据。但我不建议你在这种情况下这样做。

为了使控件的数字范围更均匀渐变，您可以映射某种指数或三角函数。我不知道最合适的，但我已经通过以下两个函数获得了有用的结果。

对于 PCM 数据，我一直在尝试将音量标准化为 0 到 1 的范围。以下是我一直在使用的一些函数示例。

```
newValue = 1 - Math.cos(NormalizedPCMValue * PI/2)

newValue = Math.pow(NormalizedPCMValue, 6) 

newValue = Math.pow(2, NormalizedPCMValue) 
```

这些对我来说都比直线更好。我正在使用查找表，但您可能可以即时计算值。如果你得到一个非常好用的映射函数，我很想在这里听到它。

顺便说一句，最好将控制线值实际降低到范围的底部。突然切断声音，即使它很安静，或者在音量变化中跳跃很远的距离，都可能导致不连续性，表现为可听见的咔嗒声。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:38:05.820

Ryuk，你为什么不从你要离开的级别淡出剪辑，同时开始播放下一个剪辑，调高音量。

您必须原谅我，我不能 100% 确定您使用的是什么库，但剪辑对象肯定有一个 .adjustVolume() 方法。

随着时间的推移调整音量，它看起来像：（请注意伪代码）

```
clip2.adjustVolume(0*time.deltaTime()+5); //Start the clip at volume 0, and increment it each frame, not second.
clip1.adjustVolume(100*time.deltaTime()-5); //Inverse, adjust volume down to fade out. 
```

# javascript - 具有固定最小值的 jQuery UI 滑块：显示最小范围，而不是最小绝对值？

> ID：11545939
> 
> 赞同：5
> 
> 时间：2012-07-18T16:20:36.047
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

[如文档中所述，](http://jqueryui.com/demos/slider/#rangemin)我正在使用固定最小值为 20 的 jQuery 滑块。

但是，这并不是我所需要的。我希望滑块的可视范围为 0-100，但绝不应允许用户将滑块移动到小于 20。

换句话说，滑块的手柄不应该一直到滑块的左侧（就像现在一样），而应该显示范围 0-20。

这是[一个 JSFiddle 来说明我的意思](http://jsfiddle.net/kGtsN/13/)，这是当前代码：

```
$("#range-slider").slider({
    range: "min",
    min: 20,
    max: 100, 
    value: 20,
    step: 20,
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T16:30:00.117

您应该使用幻灯片功能并强制执行

```
$(document).ready(function() {

    // I want the visual range to be 0-100, 
    // but the minimum allowed value to be 20 - 
    // so in other words, the handle never gets
    // all the way to the LHS of the slider, 
    // but shows the range 0-20\. 
    // Is this possible? 
    $("#range-slider").slider({
        range: "min",
        min: 0,
        max: 100,
        value: 20,
        step: 20,
        slide: function(event, ui) {
            if (ui.value < 20) {
                return false;
            }
        }
    });

}); 
```

[http://jsfiddle.net/nicolapeluchetti/kGtsN/17/](http://jsfiddle.net/nicolapeluchetti/kGtsN/17/)

从文档

> 滑动
> 
> 在滑动期间每次鼠标移动都会触发此事件。使用 ui.value（单柄滑块）获取当前句柄的值，$(..).slider('value', index) 获取另一个句柄的值。
> 
> 根据 ui.value 返回 false 以防止滑动。

# c# - 为什么 xUnit.net 的 FactAttribute AttributeUsage.Inheritable 不是？

> ID：11545941
> 
> 赞同：5
> 
> 时间：2012-07-18T16:20:38.823
> 
> 标签：c#, nunit, mstest, mbunit, xunit.net

以前没有编写过单元测试框架，在我看来，如果程序集中的某些类型都需要针对类似的事情进行测试，那么可继承的 Fact 属性将使编写抽象测试类或测试接口变得更容易。

是否存在 Fact 不可继承的设计原因？我认为其他使用属性来识别测试方法的测试框架（NUnit、MSTest、MbUnit 等）的设计类似。我错过了什么？

这是 xunit（版本 1.9.1.1600）的 FactAttribute 的开始：

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = false)]
public class FactAttribute : Attribute
{ 
```

我试图理解为什么它看起来不像下面这样：

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class FactAttribute : Attribute
{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:39:44.093

FactAttribute 是可继承的。

看看这篇文章：http: [//iridescence.no/post/Extending-xUnit-with-a-Custom-ObservationAttribute-for-BDD-Style-Testing.aspx](http://iridescence.no/post/Extending-xUnit-with-a-Custom-ObservationAttribute-for-BDD-Style-Testing.aspx)

我觉得有时候真的很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:35:54.807

我经常在我的测试中使用模板模式（这似乎是你想要完成的），它与 xUnit.net 一起工作得很好。

```
public abstract class TestBase
{
    [Fact]
    public void Verify()
    {
        // Step 1
        // Step 2

        // Overridable step 3
        DoStuff();

        // Assert
    }

    protected abstract void DoStuff();
}

public class Test1 : TestBase
{
    protected override void DoStuff()
    {
        // Test1 variation
    }
}

public class Test2 : TestBase
{
    protected override void DoStuff()
    {
        // Test2 variation
    }
} 
```

验证执行了两次——一次在实例 Test1 上，另一次在 Test2 实例上。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:23:41.463

我从来没有听说过属性是可继承的，就像类一样。尽管使用通用测试方法编写基类并将 [Fact] 属性应用于派生类中的方法，但您应该没有问题。

# json - 使用 JsonValueProviderFactory 但没有类型接收 JSON 请求

> ID：11545946
> 
> 赞同：0
> 
> 时间：2012-07-18T16:21:08.700
> 
> 标签：json, asp.net-mvc-2

我在 MVC2 Web 应用程序中使用 JsonValueProviderFactory 来处理从 iOS iPad 应用程序入站的 JSON 请求。

我不想将我的 JSON 映射到一种类型。我只想接收原始 JSON 并将其传递给模型进行处理。我的控制器操作应该有什么签名才能让我访问传递给我的控制器的原始 JSON？

这是我到目前为止尝试过的三个；它们都不起作用：

```
[ValidateInput(false)] // Allow dodgy chars in the JSON e.g. "<aa>"
        [HttpPost]
        //public ActionResult PushObject(FormCollection form) // no joy
        //public ActionResult PushObject(List<string> parms) // no joy
        //public ActionResult PushObject(string jsonRequest) // no joy
        {... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:24:49.307

`JsonValueProviderFactory`如果要获取 RAW JSON，为什么要使用 a 。这个工厂的重点是将其映射到视图模型（顺便说一句，这是正确的方法）。如果你想获得原始的东西，你总是可以阅读，`Request.InputStream`但这绝对是可怕的：

```
public ActionResult Do_Not_Do_This_Please_Use_ViewModels_Instead()
{
    Request.InputStream.Position = 0;
    using (var reader = new StreamReader(Request.InputStream))
    {
        string json = reader.ReadToEnd();
        ...
    }
    ...
} 
```

您至少可以将这些废话隐藏在模型活页夹中：

```
public class RawRequestModelBinder : DefaultModelBinder
{
    public override object  BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var request = controllerContext.HttpContext.Request;
        request.InputStream.Position = 0;
        using (var reader = new StreamReader(request.InputStream))
        {
            return reader.ReadToEnd();
        }
    }
} 
```

然后有一个控制器动作：

```
public ActionResult Do_Not_Do_This_Please_Use_ViewModels_Instead(
    [ModelBinder(typeof(RawRequestModelBinder))] string rawJson
)
{
    ...
} 
```

但当然正确的方法是使用一个视图模型来反映你的 iPhone 将发送的 JSON 结构：

```
public ActionResult Foo(MyViewModel model)
{
    ...
} 
```

# php - 如果用户在上一页单击“下一页”，则预加载下一页

> ID：11545949
> 
> 赞同：0
> 
> 时间：2012-07-18T16:21:14.800
> 
> 标签：php, session, mod-rewrite, get, preload

我真的尝试过这样做，但我不知道最好的方法是什么。

我有一个简单的分页系统，带有“上一个”和“下一个”按钮。

我想根据用户所采用的“路径”，通过单击“下一个”或“上一个”按钮来预加载列表中的下一页或上一页（[https://stackoverflow.com/a/7830732/466318](https://stackoverflow.com/a/7830732/466318) ）。 .

我尝试使用 SESSION 来执行此操作，但我需要通过单击分页中的链接来传递变量，因此我尝试通过 GET 传递它。

问题是我在 .htaccess 中有很多重写规则，例如：

RewriteRule ^populars/([a-zA-Z]+)/([0-9]+)$ /index.php?sec=popular&time=$1&page=$2

而且我不想在 URL 中添加另一个变量，我不知道为什么，但是 /popular/week/45?navigation=prev 之类的东西不起作用。（我认为是因为我没有在重写规则中指定该变量）

对不起，如果我让它比它更复杂......

那么，我可以使用什么：SESSION、Cookie、GET 或 POST 变量？

**我只需要知道用户是否只是单击了“下一步”，这样我就可以预加载下一页，或者如果单击上一个链接，则可以预加载上一个。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:26:49.610

您的正则表达式中有一个开始`^`和结束条件`$`。它根本不符合您的要求。如果可以的话，会有`?`两次

我建议添加一个包含您的`navigation`参数的新规则。

# string - 如何从 char 转换为 Platform::String^ (C++/CLI)

> ID：11545951
> 
> 赞同：9
> 
> 时间：2012-07-18T16:21:29.183
> 
> 标签：string, windows-8, c++-cli

你如何从 char 转换为 a `Platform::String^`？

的文档在`Platform::String`这里，但没有提到如何转换为不同的数据类型。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh755812(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh755812%28v=vs.110%29.aspx)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T01:10:59.067

我找到了一种转换`char[]`为`Platform::String`.

```
char char_str[] = "Char string";
std::string s_str = std::string(char_str);
std::wstring wid_str = std::wstring(s_str.begin(), s_str.end());
const wchar_t* w_char = wid_str.c_str();
Platform::String^ p_string = ref new Platform::String(w_char); 
```

我希望有比我的方法更有效的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T16:33:33.207

```
ref new Platform::String(&ch, 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-20T16:02:55.117

```
String^ StringFromAscIIChars(char* chars)
{   
    size_t newsize = strlen(chars) + 1;
    wchar_t * wcstring = new wchar_t[newsize];
    size_t convertedChars = 0;
    mbstowcs_s(&convertedChars, wcstring, newsize, chars, _TRUNCATE);
    String^ str=ref new Platform::String(wcstring);
    delete[] wcstring;
    return str;
} 
```

另请参阅此 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/ms235631.aspx](http://msdn.microsoft.com/en-us/library/ms235631.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:32:41.033

为作业使用适当的构造函数：

```
// this is a pointer to the start of an array of char16
char16* c;

// this is the number of chars in the array
// (not including the null char if the array is null-terminated)
int n;

Platform::String^ str(c, n); 
```

如果您的“char16s 数组”以 null 结尾，您也可以使用它：

```
Platform::String^ str(c); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T12:18:56.960

尝试这样的事情：

```
#include <cvt/wstring>
#include <codecvt>
...
stdext::cvt::wstring_convert<std::codecvt_utf8<wchar_t>> convert;
std::wstring wide_string = convert.from_bytes(char_ptr);
Platform::String^ platform_string = ref new Platform::String(wide_string.c_str()); 
```

# php - 实现 mediator.js 时的命名空间问题

> ID：11545956
> 
> 赞同：1
> 
> 时间：2012-07-18T16:21:41.807
> 
> 标签：php, css, doctype, xml-namespaces, mediator

我有一个网页（php），它根据外部上传的内容处理一系列ajax表单和简单的js隐藏/显示div，供组织的注册成员使用。为了构建一个更易于维护和扩展的站点，我一直在研究使用架构模式来防止无休止的 jQuery 链接；也就是中介模式。

有人用过 Jack Lawson 的[Mediator.js](http://thejacklawson.com/Mediator.js/mediator.html)吗？基本上，您可以使用 Mediator 订阅以侦听“通道”（命名空间），并在同一通道上发布某些内容时运行一个函数（如果需要，甚至在响应之前检查谓词 true/false 函数）。

**目标：** mediator.js api 似乎具有巨大的潜力，并迫使我实现有效的 xhtml 文档并正确使用命名空间。实现中介模式似乎是解耦 javascript 代码并使复杂的 web 应用程序在未来更易于维护和扩展的好方法。

**挫折：** 我相信我理解由 mediator.js api 实现的命名空间和中介模式。我已经能够通过特定“通道”（命名空间）上的中介成功发布 DOM 属性事件，并订阅这些通道并对它们做出反应——甚至使用 mediator.js 方法在该通道上测试“谓词”以确定是否需要回应。但是由于新的命名空间，我的 CSS 现在无法识别元素。

我创建了这样的命名空间：

```
<xmlns:active='http://www.xxx.com/tracks/active'  
xmlns:completed='http://www.xxx.com/tracks/completed'  
xmlns:inactive='http://www.xxx.com/tracks/inactive'> 
```

然后将它们应用于 html 元素，例如：

```
<active:div ...>stuff</active:div> 
```

我相应地更改了css文件：

```
active|div {   css formatting } 
```

尽管如此，页面的css格式还是被破坏了。

呈现页面的 doctype 部分如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml"> 
```

我不完全确定这不是必需的，但我尝试添加：

```
<? header('Content-Type: application/xhtml+xml'); ?> 
```

这会产生以下 XML 解析错误：

> XML 解析错误：格式不正确

它指向这个命名空间定义中的等号`xmlns:active='http://www.xxx.com/tracks/active'`作为问题，但我阅读的每个文档都显示这是正确的语法。

**问题：**

1.  为什么在实现上面显示的命名空间后我的 CSS 会损坏？
2.  为什么，当我`<? header('Content-Type: application/xhtml+xml'); ?>`在标题中添加时，我会收到提到的解析错误？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:45:58.677

1.  > 为什么在实现上面显示的命名空间后我的 CSS 会损坏？

    `@namespace`只有在添加与 XML 命名空间相对应的声明时，才能在 CSS 中解析命名空间。这在[规范](http://www.w3.org/TR/css3-namespace/#declaration)中有所描述。

    确保您的样式表具有以下语句，放置在适当的位置（直接在所有`@charset`s 和`@import`s 之后）：

    ```
    @namespace active 'http://www.xxx.com/tracks/active'; 
    ```

    如果您有其余命名空间的样式，则还需要包含这些样式：

    ```
    @namespace completed 'http://www.xxx.com/tracks/completed';
    @namespace inactive 'http://www.xxx.com/tracks/inactive'; 
    ```

2.  > 为什么，当我`<? header('Content-Type: application/xhtml+xml'); ?>`在标题中添加时，我会收到提到的解析错误？

    这是因为当您添加页眉时，您的 XHTML 页面将作为 XML 序列化文档提供。顺便说一句，这就是 XHTML 页面应该提供的方式，因为 XHTML 是从 XML 派生的。如果您不包含标头，服务器通常会将它们作为`text/html`替代发送，这意味着您的 XHTML 通过 HTML 标记汤解析器而不是 XML 解析器运行。

    XML解析规则*非常严格*；单个语法错误将阻止您的整个文档呈现。由于您似乎有一个格式错误的`xmlns`声明，这会阻止您的 XHTML 页面正确呈现。另一方面，鉴于 HTML 语法规则的灵活性和宽松性，即使浏览器在您的标记中遇到严重的语法问题，它也不会吐出任何错误消息——它只会尝试跳华尔兹舞曲穿过错误并进行猜测在预期的 DOM 结构是什么。

    至于错误本身，您的`xmlns`属性看起来应该是开始`html`标记的一部分，而不是它们自己的元素，因为它们是属性：

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:active="http://www.xxx.com/tracks/active"  
          xmlns:completed="http://www.xxx.com/tracks/completed"  
          xmlns:inactive="http://www.xxx.com/tracks/inactive"> 
    ```

    最后，*你需要那个标题*！没有它，您的 XHTML 将不会被解析为 The Way It Should Be™，因此您的 CSS 名称空间也将无法工作。

# gwt - 与服务器端 GWT 通信

> ID：11545959
> 
> 赞同：0
> 
> 时间：2012-07-18T16:21:58.667
> 
> 标签：gwt

当我尝试从服务器检索某些内容时，出现以下错误。我正在尝试使用 GWT 与服务器端进行通信。但它整个星期都在给我错误。这是最新的。我很困惑如何解决。任何帮助，将不胜感激。

这是 PredictClientServlet.java

```
public class PredictClientServlet extends RemoteServiceServlet implements PredictClient
{

    public List<ArrayList<Double>> myMethod(String[] keywords, int numOfPredictions, List<Data> input)
    {

    TS ts =new TS( input );
    // Create the predictor
    Predictor predictor = new Predictor();

    //Set the number of predictions 
    predictor.setNumPredictions(3);
    try
    {
        //Set the data
        predictor.setTargetData(ts);

        //Add the filters (now this is not doing any difference)
        predictor.addFilter("filterA");
        predictor.addFilter("filterB");
        predictor.predict();
    }
    catch (Exception e)
    {

    }
    List<Predictions> allPredictions = predictor.getPredictions();
    List<ArrayList<Double>> ret =new ArrayList<ArrayList<Double>>();
    for (Predictions pred: allPredictions) 
    {
        System.out.printf("Predictor %s %n",pred.getName());
        int c = 1;
        ArrayList<Double> temp =new ArrayList<Double>();
        for (Prediction p: pred.getPredictions()) 
        {
            System.out.printf("\t Prediction: %d Value: %f [%f,%f] %n",c,(p).getValue(),p.getLowConfidence(),p.getHighConfidence());
            temp.add(p.getValue());
            c++;
        }
        ret.add( temp );
    }

    return ret;
} 
```

这是我的 PredictClient.java

```
public class Predict implements EntryPoint
{

@Override
public void onModuleLoad() 
{
    final PredictClientAsync predictService = GWT.create(PredictClient.class);

    AsyncCallback<List<ArrayList<Double>>> callback =new AsyncCallback<List<ArrayList<Double>>>()  
            {

        public void onFailure(Throwable caught)
        {
            caught.printStackTrace();
            System.out.println("Error! " + caught.getCause()   );// do some UI stuff to show failure
        }

        @Override
        public void onSuccess( List<ArrayList<Double>> result ) 
        {
            //Global.data = result;
            Global.c.clear();
            Global.c =new Chart();  
            Global.c.onModuleLoad();
        } };
        predictService.myMethod(null,3, Global.predata,callback ); 

} 
```

这是我可怕的错误：

**更新**

现在我修复了丢失的类错误。新错误如下

```
 Transforming input data...
Problem instantiating package manager. Using DefaultPackageManager.
Jul 18, 2012 3:47:14 PM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract     java.util.List tts.client.PredictClient.myMethod(java.lang.String[],int,java.util.List)'     threw an unexpected exception: java.lang.ExceptionInInitializerError
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.ExceptionInInitializerError
at weka.core.Utils.readProperties(Utils.java:142)
at weka.core.Capabilities.<init>(Capabilities.java:261)
at weka.filters.Filter.getCapabilities(Filter.java:160)
at weka.filters.unsupervised.attribute.Add.getCapabilities(Add.java:284)
at weka.filters.Filter.getCapabilities(Filter.java:193)
at weka.filters.Filter.testInputFormat(Filter.java:446)
at weka.filters.Filter.setInputFormat(Filter.java:464)
at weka.filters.unsupervised.attribute.Add.setInputFormat(Add.java:310)
at weka.classifiers.timeseries.core.TSLagMaker.createDateTimestampRemap(TSLagMaker.java:1578)
at weka.classifiers.timeseries.core.TSLagMaker.getTransformedData(TSLagMaker.java:3077)
at weka.classifiers.timeseries.WekaForecaster.buildForecaster(WekaForecaster.java:1007)
at tts.server.Predictor.predict(Predictor.java:151)
at tts.server.PredictClientServlet.myMethod(PredictClientServlet.java:42)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
... 34 more
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission C:\Users\William\wekafiles read)
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:283)
at java.lang.SecurityManager.checkRead(Unknown Source)
at java.io.File.exists(Unknown Source)
at weka.core.WekaPackageManager.establishWekaHome(WekaPackageManager.java:119)
at weka.core.WekaPackageManager.<clinit>(WekaPackageManager.java:95)
... 52 more

com.google.gwt.user.client.rpc.StatusCodeException: 500 The call failed on the server; see server log for details
at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:209)
at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
at     com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
at     com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
at     com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:16:29.300

您确实缺少课程，请参阅日志中的 ClassNotFoundException：

```
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract     java.util.List tts.client.PredictClient.myMethod(java.lang.String[],int,java.util.List)' threw an unexpected exception: java.lang.NoClassDefFoundError: Could not initialize class     weka.core.WekaPackageManager 
```

如果您使用的是标准 GWT 码头： WEB-INF/lib 目录中是否包含包含“weka.core.WekaPackageManager”的 jar 文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:59:55.897

我看到对应用引擎的引用和一个错误：

`Caused by: java.security.AccessControlException: access denied (java.io.FilePermission C:\Users\William\wekafiles read)`.

当您启用应用程序引擎并且不支持文件访问时，这在我看来。

# javascript - 对javascript的元素进行排序

> ID：11545960
> 
> 赞同：2
> 
> 时间：2012-07-18T16:22:01.213
> 
> 标签：javascript, html, sorting, dom

> **可能重复：**
> [javascript 类型的 HTML 元素](https://stackoverflow.com/questions/10186192/javascript-sort-of-html-elements)

我需要以这种格式对元素列表进行排序

```
<table width='a number' bord ...>
  <tbody>
    <tr>
      header data
    </tr>
    <tr>
      <td style='asdasdas' class='asdasdasd' ...>
        rob
      </td
      <td style='asdasdas' class='asdasdasd' ...>
        mike
      </td>
    </tr>
    <tr>
      <td style='asdasdas' class='asdasdasd' ...>
        chuck
      </td>
      <td style='asdasdas' class='asdasdasd' ...>
        kev
      </td>
    </tr>
  </tbody> 
```

我需要能够使用列表，以便人们可以按字母顺序排列姓名，我不明白该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:53:54.817

这是一个简单的 javascript 函数，它将对任何标记元素集进行排序：

```
function sortElements(parentId, tagClass) {
    var itemsToSort, p = document.getElementById(parentId);
    if (p.getElementsByClassName) {
        itemsToSort = p.getElementsByClassName(tagClass);
    } else {
        itemsToSort = getElementsByClassName(tagClass, "*", p);
    }
    // get all data into a sortable array
    var data = [], order = [], item, placeHolder, i;
    for (i = 0; i < itemsToSort.length; i++) {
        item = itemsToSort[i];
        // save position of item by inserting a placeholder right before it
        placeHolder = document.createElement(item.tagName);
        item.parentNode.insertBefore(placeHolder, item);
        order.push(placeHolder);
        // save item and text
        data.push({obj: item, text: strTrim(item.innerHTML)});
    }
    // sort the item array by the text
    data.sort(function(a, b) {
        return(a.text.localeCompare(b.text));
    });
    // now reinsert items in sorted order
    for (i = 0; i < data.length; i++) {
        item = data[i].obj;
        placeHolder = order[i];
        // insert in new location
        placeHolder.parentNode.insertBefore(item, placeHolder);
        // remove placeholder
        placeHolder.parentNode.removeChild(placeHolder);
    }
}

function strTrim(str) {
    return(str.replace(/^\s+/, "").replace(/\s+$/, ""));
}

// replacement for older versions of IE
function getElementsByClassName(className, tag, elm){
    var testClass = new RegExp("(^|\\s)" + className + "(\\s|$)");
    var tag = tag || "*";
    var elm = elm || document;
    var elements = (tag == "*" && elm.all)? elm.all : elm.getElementsByTagName(tag);
    var returnElements = [];
    var current;
    var length = elements.length;
    for(var i=0; i<length; i++){
        current = elements[i];
        if(testClass.test(current.className)){
            returnElements.push(current);
        }
    }
    return returnElements;
} 
```

您可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/EztNw/](http://jsfiddle.net/jfriend00/EztNw/)。这个演示展示了它对 OP 的表格单元格和有序列表进行排序，只是为了表明该函数适用于任何一组元素。

我知道的唯一限制是标记元素不能是其他标记元素的子元素。适用于表格中的单元格。

如果需要旧版本的 IE，这也可以使用`getElementsByClassName()`，那么将添加一个替代品/垫片（包含在 jsFiddle 中）。

这是它的工作原理：

1.  获取要排序的所有对象的列表
2.  在每个项目当前所在的位置放置一个临时占位符对象，以便我们知道将事物按排序顺序放回哪里
3.  构建要排序的对象数组和排序键（本例中为文本）
4.  对该数组进行排序
5.  按现在排序的顺序重新插入已排序的对象，使用占位符作为它们去向的指南 - 使用插槽后删除占位符

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:26:23.037

简单的方法 ：

1.  **在 JS 数组中**加载名称****
***   **排序**JS数组*   **从数组中**生成并插入表******

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:45:49.783

假设您只想使用 Javascript 来完成这一切

```
 var names = ["rob", "mike", "chuck", "kev" };

    names.sort(); //gives you an array with [chuck, kev, mike, rob] 
```

你的桌子作为一个对象

```
 var table = "<table width='a number' bord ...>" +
                   "<tbody>" +
                      "<tr>" +
                        "header data" +
                      "</tr>"
                      "<tr>" +
                        "<td style='asdasdas' class='asdasdasd' ...>" +
                          names[0] +
                        "</td>" +
                        "<td style='asdasdas' class='asdasdasd' ...>" +
                           names[1] +
                        "</td>" +
                      "</tr>" +
                      "<tr>" +
                        "<td style='asdasdas' class='asdasdasd' ...>" +
                          names[2] +
                        "</td>" +
                        "<td style='asdasdas' class='asdasdasd' ...>" +
                          names[3] +
                        "</td>" +
                      "</tr>" +
                    "</tbody>"; 
```

在任何你想要的地方插入表格对象。插件可能会很臃肿，对于像这样简单的事情来说可能会有点过分。但是，如果您有选项，我建议您在服务器端而不是在客户端上执行此操作，因为这将消除对跨浏览器支持的需要，并确保用户无法禁用您闪亮的新字母排序表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T17:03:35.140

我也使用 jQuery 实现了一个解决方案。看一看：

**HTML：**

```
<table id="dataTable">
  <tbody>
    <tr>
      <td class="firstName">
        foo
      </td>
      <td class="lastName">
        bar
      </td>
    </tr>
    <tr>
      <td class="firstName">
        rob
      </td>
      <td class="lastName">
        mike
      </td>
    </tr>
    <tr>
      <td class="firstName">
        chuck
      </td>
      <td class="lastName">
        norris
      </td>
    </tr>
  </tbody>
</table>

<input id="sortByFirstName" type="button" value="Sort By First Name"/>
<br/>
<input id="sortByLastName" type="button" value="Sort By Last Name"/> 
```

**JavaScript：**

```
function sortByCellValue( tableId, sortBy ) {

    var rows = $( "#" + tableId + " tbody tr" );
    var structuredRows = [];

    // extract all row data
    rows.each(function( index, item ) {

        var data = $(item).children().filter("td[class='" + sortBy + "']").html().trim();

        structuredRows.push({
            useToSort: data,
            row: item
        });

    });

    // sorting the rows
    structuredRows.sort(function( a, b ){

        var va = a.useToSort;
        var vb = b.useToSort;

        if ( va < vb ) {
            return -1;
        } else if ( va > vb ) {
            return 1;
        } else {
            return 0;
        }

    });

    // cleaning the tbody and inserting the rows in order
    var tBody = $( "#" + tableId + " tbody" );
    tBody.html( "" );

    for ( var i in structuredRows ) {
        tBody.append( structuredRows[i].row );
    }    

}

$(function(){
    $( "#sortByFirstName" ).click( function(){
        sortByCellValue( "dataTable", "firstName" );
    });

    $( "#sortByLastName" ).click( function(){
        sortByCellValue( "dataTable", "lastName" );
    });
}); 
```

jsFiddle 可以在这里看到：http: [//jsfiddle.net/UTTz8/](http://jsfiddle.net/UTTz8/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-18T16:26:26.527

我不想手动执行此操作，因为您尝试执行的操作有可用的插件。其中一些被证明工作得很好并且支持得很好。我就用[这个](http://datatables.net/)****

# python - Tastypie - 将用户重定向到新网址

> ID：11545966
> 
> 赞同：2
> 
> 时间：2012-07-18T16:22:23.613
> 
> 标签：python, django, tastypie

我有一个资源，如果用户经过身份验证，它会返回一个 json，否则它将用户重定向到不同的 url。

有谁知道我是否可以在 Tastypie 中这样重定向？

还是我需要实现某种中间件？

提前致谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-18T22:48:22.487

[然后从这个](http://sysadminpy.com/programming/2011/11/14/ajax-and-tastypie---check-if-a-user-has-authenticated/)开始，如果 super 没有返回 True，则返回重定向响应

```
resp = super(...)
if resp != True:
   resp = self.createresponse(HttpRedirect(SOME_URL))
return HttpResponseRedirect(redirect_to) 
```

# asp.net - 针对数据库类型 ASP.NET 的验证

> ID：11545968
> 
> 赞同：1
> 
> 时间：2012-07-18T16:22:26.797
> 
> 标签：asp.net, webforms

我在网络表单中有几个字段，目前我没有实施任何形式的验证，但我打算这样做。

`UpdateParameters`假设我有以下内容`SQLDataSource`：

```
<UpdateParameters>
            <asp:Parameter Name="Name" Type="String" />
            <asp:Parameter Name="Date" Type="DateTime" />
            <asp:Parameter Name="active" Type="Boolean" />
            <asp:Parameter Name="ID" Type="Int32" />
</UpdateParameters> 
```

每个字段都有一个文本框。我尝试过，但找不到`TextBoxes`针对参数类型验证的内置方法，例如，`Date_TextBox`将验证输入是否采用`DateTime`格式。我知道我可以使用正则表达式和诸如此类的东西来做自定义验证器，但我觉得有一种内置的简单方法可以做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:34:45.107

你试过用`CompareValidator`吗？？

您可以像这样指定类型：

```
<asp:TextBox runat="server" ID="txt" />
<asp:CompareValidator runat="server" ErrorMessage="The type is not a valid integer" 
    ControlToValidate="txt"
    Operator="DataTypeCheck"
    Type="Integer"
    />
<asp:Button Text="Test valdiation" runat="server" /> 
```

可用的类型有：

*   细绳。指定字符串数据类型。
*   整数。指定 32 位有符号整数数据类型。
*   双倍的。指定双精度浮点数数据类型。
*   日期。指定日期数据类型。
*   货币。指定货币数据类型。

# html - 使绝对定位的元素填充其容器的宽度

> ID：11545971
> 
> 赞同：1
> 
> 时间：2012-07-18T16:22:30.417
> 
> 标签：html, css, layout

我有一个侧边栏，出于几个原因，我将其绝对定位在右侧。但问题是，如果我的主要内容区域较短，则侧边栏会超出内容。

有没有办法使用 CSS 让容器将其高度包裹在侧边栏周围（如果侧边栏更长）？

请这个jsFiddle：http: [//jsfiddle.net/52jjp/](http://jsfiddle.net/52jjp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:05:31.940

遗憾的是，没有办法在直接的 CSS 中做到这一点。当您绝对定位某些东西时，您会将其从文档流中删除，因此它不再影响父级的高度。

正如@scott-brown 已经建议的那样，您可以使用 javascript 解决它。

但是，我更喜欢全 CSS 解决方案。您可以使用浮动来获得侧边栏布局，无论哪一侧更长，使用此标记都会清除：

```
<div class="page">
  <div class="content">
    Primary content here.
  </div>
  <div class="sidebar">
    Sidebar content here.
  </div>
</div> 
```

这个CSS：

```
.primary {
  float: left;
  width: 66%;
}
.sidebar {
  float: right;
  width: 33%;
}
.page:after {
  content: ".";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
  zoom: 1;
} 
```

上的样式`.page`称为 clearfix （[更多细节在这里](http://www.positioniseverything.net/easyclearing.html/)）。

这种布局技术的好处是您可以在不更改标记的情况下交换`.primary`和列，只需更改为，反之亦然。`.sidebar``float:left``float:right`

clearfix 还意味着父元素将包含子元素，因此您可以根据需要设置背景颜色`.page`，并且它将一直延伸到更长的列的底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:27:40.130

“清除”绝对定位的元素并不容易。我发现这样做的一种方法是在 jquery 中获取高度，然后将该高度应用于容器。例如：

`$('#container').height($('#ab_positioned').height());`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:41:34.377

如果侧边栏具有固定高度，您可以设置`min-height{...}`为`.main-content`或。`.pad`

# email - .NET 中可靠的电子邮件传输选项

> ID：11545973
> 
> 赞同：1
> 
> 时间：2012-07-18T16:22:45.207
> 
> 标签：email, c#-3.0, hmail-server

我目前正在开发一个发送电子邮件的 Web 应用程序。用户在浏览器中执行的操作会创建事件，这些事件会传递到辅助服务器，该服务器将电子邮件发送给订阅这些事件的用户。

当前发送电子邮件的实现基本上是一个自制的 SMTP 服务器。我认为它是从遗留系统移植到 C# 的，而且非常不可靠。

我的要求是能够发送消息并知道消息的传递状态。如果他们失败了，我想知道为什么以及他们是否正在重试。

理想情况下，我想放弃自制的 SMTP 服务器并使用开源解决方案。我知道我可以在机器上运行 SMTP 服务器（如 hMailServer）并使用 .NET 的 SmtpClient 连接和发送消息。就其本身而言，这不会让我深入了解消息的状态。

看起来使用 hMailServer，您可以使用 COM API 来查询服务器并获取消息状态。这可能吗？这是一种有效的方法吗？

除了我上面概述的，还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:28:11.137

你所要求的完全***不可行***。（您所问的部分内容是可行的。）

一封电子邮件通过发件人和收件人之间的多个服务器，您只能控制其中的一些。其余的完全不受您的控制。

您可以捕获许多发送失败，但如果第三方垃圾邮件阻止程序在您的电子邮件到达收件人之前阻止了您的电子邮件，您将无法控制该垃圾邮件阻止程序的工作方式。你不能保证它会返回一个原因。

作为替代方案，您可以捕获可能出现的错误（例如通过 hMailServer），除此之外，执行电子邮件营销人员所做的事情：跟踪电子邮件打开情况以查看正在***阅读***的电子邮件。显然，这与交付不同。

这里有更多关于如何使用 .NET 执行此操作的信息：http: [//www.codeproject.com/Articles/15109/Tracking-Emails-for-Open-Read](http://www.codeproject.com/Articles/15109/Tracking-Emails-for-Open-Read)

根据我们的经验，我们使用了来自[Arial Software](http://www.arialsoftware.com/)的名为 Campaign Enterprise 的商业软件，它提供了跟踪您所要求的几乎所有内容的能力，并使用了所描述的“电子邮件打开”技术。它工作得很好，但它不是免费的。

那里可能还有其他选择，但这将是一个产品推荐问题，在这里将是题外话。我提供以上内容仅作为您自己研究的起点，以了解存在哪些其他产品，包括您价格范围内的产品。（虽然[这个](http://www.openemm.org/)看起来可能不错，而且是免费的。）

* * *

根据以下评论添加：

尝试跟踪可捕获的 SMTP 传输错误的其他选项。

如果您只想知道 SMTP 会话中的错误，您可以使用内置的 .NET 工具，并在此处获取会话跟踪：

[http://www.systemnetmail.com/faq/4.10.aspx](http://www.systemnetmail.com/faq/4.10.aspx)

如果发生 SmtpFailedRecipientsException，您也可以获取它。 [MSDN 上提供了带有代码示例的文档](http://www.arialsoftware.com/)。

# php - 使用 php 合并 Excel 文件

> ID：11545974
> 
> 赞同：3
> 
> 时间：2012-07-18T16:22:48.277
> 
> 标签：php, excel, merge

我有两个 excel 文件，每个文件都有一个工作表。我想获取两个 excel 文件并创建一个带有两个工作表的单个 excel 文件。我想用 PHP 做到这一点。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:37:44.170

使用[PHPExcel](http://phpexcel.codeplex.com)

```
$inputFileType1 = 'Excel2007';
$inputFileName1 = 'inputData1.xlsx';
$inputFileType2 = 'Excel5';
$inputFileName2 = 'inputData2.xls';
$outputFileType = 'Excel5';
$outputFileName = 'outputData.xls';

// Load the first workbook (an xlsx file)
$objPHPExcelReader1 = PHPExcel_IOFactory::createReader($inputFileType1);
$objPHPExcel1 = $objPHPExcelReader1->load($inputFileName1);

// Load the second workbook (an xls file)
$objPHPExcelReader2 = PHPExcel_IOFactory::createReader($inputFileType2);
$objPHPExcel2 = $objPHPExcelReader2->load($inputFileName2);

// Merge the second workbook into the first
$objPHPExcel2->getActiveSheet()->setTitle('Unique worksheet name');
$objPHPExcel1->addExternalSheet($objPHPExcel2->getActiveSheet());

// Save the merged workbook under a new name (could save under the original name)
// as an xls file
$objPHPExcelWriter = PHPExcel_IOFactory::createWriter($objPHPExcel1,$outputFileType);
$objPHPExcelWriter->save($outputFileName); 
```

# asp.net - 在页面加载时看不到 asp.net gridview

> ID：11545975
> 
> 赞同：0
> 
> 时间：2012-07-18T16:22:50.090
> 
> 标签：asp.net

我有一个不会在页面加载时显示的网格视图。网格视图位于更新面板内的一些 asp:Panels 内。我单步执行了代码，所以我知道 gridview 有数据行。如果我将 gridview 移到面板之外并更新面板，那么它将显示数据。有谁知道为什么它在下面，面板和更新面板内部不起作用？

```
 <%@ Page Language="VB" AutoEventWireup="false" EnableEventValidation="false" MasterPageFile="~/CTPublic.master" CodeFile="Tank.aspx.vb" Inherits="CargoTank_Internal_Tank" %> 
```

```
<div style="padding-top:9px; width:100%; min-width:800px; " >
    <asp:UpdatePanel ID="udpTank" runat="server" >
    <ContentTemplate>
                <ajaxToolkit:RoundedCornersExtender runat="server" BorderColor="#3260a0"   Corners="All" Radius="5" Color="#98B9C9"  TargetControlID="pnlTank" ID="ajRCEpnlTank" ></ajaxToolkit:RoundedCornersExtender>

         <asp:Panel runat="server" BackColor="#ecece7"  Width="95%"  ID="pnlTank" >

             <div >
            <div style="float:left; width:70%; background-color:#98B9C9; height:19px;">Tanks</div>
            <div style="float:right; width:30%; height:19px;background-color:#98B9C9; text-align:right">
                <asp:Button ID="btnAddNewTank" style="background:transparent; border:0px;" runat="server" Font-Underline="true"   size="1" Font-Bold=true text="Add New" /> 

             </div> 
            <div style="padding-top:19px;"></div>
            </div>   
            <div style="width:100%;">
                <table width="100%">
                    <tr>
                        <td colspan="6" class="tdheaderbar">Search Tanks
                        </td>
                    </tr>
                    <tr>
                        <td>CT #</td>
                        <td><asp:TextBox runat="server" ID="txtCTNumber" ></asp:TextBox></td>
                        <td>Serial #</td>
                        <td><asp:TextBox runat="server" ID="txtSerialNumber" MaxLength="17"></asp:TextBox></td>
                        <td>City</td>
                        <td><asp:TextBox runat="server" ID="txtCity"></asp:TextBox></td>

                    </tr>
                    <tr>
                         <td>Capacity</td>
                        <td><asp:TextBox runat="server" ID="txtCapacity"></asp:TextBox></td>
                       <td>Unit #</td>
                        <td><asp:TextBox runat="server" ID="txtUnitNumber"></asp:TextBox></td>
                        <td>License State</td>
                        <td><asp:DropDownList EnableViewState="true" runat="server" ID="ddlState" DataSourceID="linqStates" 
                               Width="156px" DataTextField="StateText" DataValueField="StateID"></asp:DropDownList>
                            <asp:LinqDataSource ID="linqStates" runat="server" 
                                ContextTypeName="DataClassesDataContext" TableName="States">
                            </asp:LinqDataSource>
                        </td>

                  </tr>
                     <tr>
                         <td>Tank Type</td>
                        <td>
                            <asp:DropDownList runat="server" ID="ddlTankType"  Width="156px"
                                 ></asp:DropDownList>

                        </td> 
                        <td>Compartment</td>
                        <td><asp:TextBox runat="server" ID="txtCompartment"></asp:TextBox></td>
                         <td>License #</td>
                        <td><asp:TextBox runat="server" ID="txtLicenseNumber"></asp:TextBox></td>
                  </tr>
                      <tr>
                         <td>Manufacturer</td>
                        <td colspan="2">
                            <asp:DropDownList runat="server" ID="ddlManufacturer"  
                                 ></asp:DropDownList>

                        </td> 

                       <td><asp:CheckBox runat="server" ID="chkNoLogIn" Text="No Log In Associated" /></td>
                       <td></td> <td></td> 
                   </tr>
                   <tr><td>Company</td>
                        <td colspan="5"> <asp:DropDownList runat="server" ID="ddlCompany" ></asp:DropDownList></td>    
                 </tr>  
                 <tr>
                    <td colspan="3">
                    </td>
                    <td><asp:Button runat="server" ID="btnSearch" Text="Search" /></td>
                  </tr>
                </table>
            </div>

        </asp:Panel>
   </ContentTemplate>
    <Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnSearch" EventName="Click" />
    </Triggers>  
  </asp:UpdatePanel>
  <br />

      <div style="padding-top:9px; width:100%; " id="divTankDetail" runat="server">
    <asp:UpdatePanel ID="updTankDetail" runat="server"  >
    <ContentTemplate>
        <ajaxToolkit:DropShadowExtender runat="server" ID="dsetank" TargetControlID="pnlTankDetail" TrackPosition="true" BehaviorID="pnlTankDetailHeader"></ajaxToolkit:DropShadowExtender>
        <ajaxToolkit:DragPanelExtender runat="server" ID="dpeTankDetail" TargetControlID="pnlTankDetail" DragHandleID="pnlTankDetailHeader"></ajaxToolkit:DragPanelExtender>
        <asp:Panel CssClass="TankpopupPosition" BackColor="LightBlue" Visible="false" runat="server" BorderColor="#3260a0" BorderWidth="2px"  Width="801px"  ID="pnlTankDetail" >
               <asp:Panel runat="server" BorderColor="#3260a0" BorderWidth="1px"  Width="800px"  ID="pnlTankDetailHeader">
             <div  >
            <div style="float:left; width:90%; background-color:#98B9C9; height:19px;">Tank Detail</div>
            <div style="float:right; width:10%; border-right-width:2px; border-width:1px; border-color:#3260a0; height:19px;background-color:#98B9C9; text-align:right">
                <asp:Button ID="btnClose" style="background:transparent; border:0px;" runat="server"   size="1" Font-Bold=true text="X" />&nbsp;
            </div> 

            <div style="padding-top:19px;"></div>
            </div>  
            </asp:Panel>
               <asp:Panel  runat="server"  Width="800px"  ID="pnlTankDetailBody">
                <div id="divTankDetailbody" runat="server" style="width:100%"  >
                 <br />
                 <table width="100%">
                    <tr>
                        <td>CT #</td>
                        <td><asp:TextBox TabIndex="10" runat="server" BorderStyle="Inset" BorderColor="White" BorderWidth="2px" BackColor="Transparent" ID="txtCTNum" ReadOnly="true" ></asp:TextBox>
                        <asp:Label ID="lblCTNumber" runat="server" Text="*"></asp:Label>&nbsp</td>
                        <td>Serial #</td>
                        <td><asp:TextBox TabIndex="14" runat="server" BorderStyle="Inset" BorderColor="White" BorderWidth="2px" ID="txtSeriaNum" MaxLength="17"></asp:TextBox>
                        <asp:Label ID="lblSerialNumber" runat="server" Text="*"></asp:Label>&nbsp</td>
                        <td>City</td>
                        <td><asp:TextBox runat="server" TabIndex="18" BorderStyle="Inset" BorderColor="White" BorderWidth="2px" ID="txtOrignatedCity"></asp:TextBox></td>
                    </tr>
                    <tr>
                        <td>Capacity</td>
                        <td><asp:TextBox TabIndex="11" runat="server" BorderStyle="Inset" BorderColor="White" BorderWidth="2px" ID="txtTanktCapacity"></asp:TextBox>
                        <asp:Label ID="lblCapacity" runat="server" Text="*"></asp:Label>&nbsp</td>
                         <td>Compartment</td>
                        <td><asp:TextBox runat="server" TabIndex="15" ID="txtCompartment2" BorderStyle="Inset" BorderColor="White" BorderWidth="2px"></asp:TextBox>
                      <asp:Label ID="lblCompartment" runat="server" Text="*"></asp:Label>&nbsp</td>

                                                    <td>License #</td>
                        <td><asp:TextBox runat="server" BorderStyle="Inset" TabIndex="19" BorderColor="White" BorderWidth="2px" ID="txtLicenseNum"></asp:TextBox></td>
                  </tr>
                     <tr>
                                                  <td>Tank Type</td>
                        <td>
                            <asp:DropDownList runat="server" TabIndex="12" ID="ddlTankType2" Width="156px" 
                                 DataTextField="TankTypeName" 
                                DataValueField="TankTypeName"></asp:DropDownList><asp:Label ID="lblTankType" runat="server" Text="*"></asp:Label>&nbsp
                         </td> 
                        <td>Unit #</td>
                        <td><asp:TextBox runat="server" TabIndex="16" BorderStyle="Inset" BorderColor="White" BorderWidth="2px" ID="txtUnitNum"></asp:TextBox></td>

                        <td>License State</td>
                        <td> 
                            <asp:DropDownList EnableViewState="true" Width="156px" TabIndex="20"  runat="server" ID="ddlLicenseState" DataSourceID="linqStates" 
                                DataTextField="StateText" DataValueField="StateID"></asp:DropDownList>                                

                            <asp:LinqDataSource ID="LinqDataSource1" runat="server" 
                                ContextTypeName="DataClassesDataContext" TableName="States">
                            </asp:LinqDataSource>
                        </td>

                  </tr>
                  <tr>
                        <td>Manufacturer</td>
                        <td colspan="1">
                            <asp:DropDownList runat="server" TabIndex="13" ID="ddlManufacturer2"  
                               >
                                 </asp:DropDownList><asp:Label ID="lblManufacturer" runat="server" Text="*"></asp:Label>&nbsp
                         </td> 
                        <td>Company</td>
                        <td colspan="3"> <asp:DropDownList runat="server" TabIndex="17" ID="ddlCompany2" ></asp:DropDownList><asp:Label ID="lblCompany2" runat="server" Text="*"></asp:Label></td>      

                   </tr>
                  <tr>
                    <td colspan="6" align="center"><br />
                        <asp:Label ID="lblChangeOwnership" Font-Size="Medium" runat="server"></asp:Label>
                        <br />
                        <asp:CheckBox ID="chkChangeOwnership" runat="server" Text="Changing ownership" ForeColor="Red" Font-Bold="true" />
                    </td>
                  </tr>
                  <tr>
                    <td colspan="6" align="center">
                        <br />
                     <asp:Button runat="server" ID="btnAdd" TabIndex="21" Text="Add" Width="60px" /> 
                     <asp:Button runat="server" ID="btnUpdate" TabIndex="22" Text="Update" Width="60px" /> 
                     <asp:Button runat="server" ID="btnChangeOnwership" TabIndex="23" Text="Change" Width="60px" /> 
                     <asp:Button runat="server" ID="btnCancel" TabIndex="24" Text="Cancel" Width="60px"  />
                     <br /><br />
                        <asp:GridView ID="grdTanks" runat="server" AllowPaging="True" 
                            AutoGenerateColumns="False" BackColor="Transparent" GridLines="None" 
                            PagerSettings-Mode="NumericFirstLast" PageSize="10" 
                            RowStyle-HorizontalAlign="left" Width="100%">
                            <AlternatingRowStyle CssClass="alternateItemStyle" />
                            <HeaderStyle CssClass="headerStyle" />
                            <PagerSettings Mode="NumericFirstLast" />
                            <RowStyle CssClass="itemStyle" />
                            <Columns>
                                <asp:BoundField DataField="CargoTankID" HeaderText="CT #" InsertVisible="False" 
                                    ReadOnly="True" SortExpression="CargoTankID" />
                                <asp:BoundField DataField="CompanyID" HeaderText="CompanyID" 
                                    SortExpression="CompanyID" Visible="false" />
                                <asp:BoundField DataField="OriginatedCity" HeaderText="OriginatedCity" 
                                    SortExpression="OriginatedCity" Visible="false" />
                                <asp:BoundField DataField="LicenseNumber" HeaderText="LicenseNumber" 
                                    SortExpression="LicenseNumber" Visible="false" />
                                <asp:BoundField DataField="LicenseState" HeaderText="LicenseState" 
                                    SortExpression="LicenseState" Visible="false" />
                                <asp:BoundField DataField="UnitNumber" HeaderText="Unit Number" 
                                    SortExpression="UnitNumber" Visible="false" />
                                <asp:TemplateField HeaderText="Company">
                                    <ItemTemplate>
                                        <%#DisplayCompanyName(Eval("CompanyID"))%>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:BoundField DataField="SerialNumber" HeaderText="Serial Number" 
                                    SortExpression="SerialNumber" />
                                <asp:BoundField DataField="Capacity" HeaderText="Capacity" 
                                    SortExpression="Capacity" />
                                <asp:TemplateField HeaderText="Manufacturer">
                                    <ItemTemplate>
                                        <%#DisplayManufacturer(Eval("ManufacturerID"))%>
                                    </ItemTemplate>
                                </asp:TemplateField>
                                <asp:BoundField DataField="TankType" HeaderText="Tank Type" 
                                    SortExpression="TankType" Visible="false" />
                                <asp:BoundField DataField="Compartment" HeaderText="Compartment" 
                                    SortExpression="Compartment" Visible="false" />
                                <asp:BoundField DataField="DecalID" HeaderText="DecalID" 
                                    SortExpression="DecalID" Visible="false" />
                                <asp:TemplateField HeaderText="Decal Status">
                                    <ItemTemplate>
                                        <%#DisplayTestLink(Eval("CargoTankID"))%>
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                        </asp:GridView>
                     </td>

                  </tr>
                </table>

            </div>
            </asp:Panel>
        </asp:Panel>
   </ContentTemplate>
    <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnSearch" EventName="Click" />

    </Triggers>  
  </asp:UpdatePanel> 
```

这是我背后的代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        If (Me.Page.User.Identity.IsAuthenticated) Then
            Dim db As DataClassesDataContext = New DataClassesDataContext()

            Dim tanks = From t In db.CT_Tanks _
                        Select t

            Me.grdTanks.DataSource = tanks
            Me.grdTanks.DataBind()

            Dim tanktype = (From t In db.CT_TankTypes _
                            Select t).ToList

            ddlTankType.DataSource = tanktype
            ddlTankType.DataTextField = "TankTypeName"
            ddlTankType.DataValueField = "TankTypeName"
            ddlTankType.DataBind()
            ddlTankType.Items.Insert(0, "-- Select a Type --")
            ddlTankType2.DataSource = tanktype
            ddlTankType2.DataTextField = "TankTypeName"
            ddlTankType2.DataValueField = "TankTypeName"
            ddlTankType2.DataBind()
            ddlTankType2.Items.Insert(0, "-- Select a Type --")

            Dim manufacturer = (From m In db.CT_Manufacturers _
                               Select m).ToList

            ddlManufacturer.DataSource = manufacturer
            ddlManufacturer.DataTextField = "ManufacturerName"
            ddlManufacturer.DataValueField = "ManufacturerID"
            ddlManufacturer.DataBind()
            ddlManufacturer.Items.Insert(0, "-- Select a Manufacturer --")

            ddlManufacturer2.DataSource = manufacturer
            ddlManufacturer2.DataTextField = "ManufacturerName"
            ddlManufacturer2.DataValueField = "ManufacturerID"
            ddlManufacturer2.DataBind()
            ddlManufacturer2.Items.Insert(0, "-- Select a Manufacturer --")

            Dim companies = (From c In db.CT_Companies _
                             Where c.IsOwner = True _
                             Select c Order By c.CompanyName Ascending).ToList

            ddlCompany.DataSource = companies
            ddlCompany.DataTextField = "CompanyName"
            ddlCompany.DataValueField = "CompanyID"
            ddlCompany.DataBind()
            ddlCompany.Items.Insert(0, "-- Select a Company --")

            ddlCompany2.DataSource = companies
            ddlCompany2.DataTextField = "CompanyName"
            ddlCompany2.DataValueField = "CompanyID"
            ddlCompany2.DataBind()
            ddlCompany2.Items.Insert(0, "-- Select a Company --")

        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:58:27.013

数据绑定 gridview 后，您的更新面板似乎没有被触发

尝试：

```
<asp:UpdatePanel ID="updTankDetail" runat="server" UpdateMode="Conditional"> 
```

然后在你的代码后面放

```
updTankDetail.Update() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:11:50.483

我试过这个地方我的gridview在面板下的更新面板和它的作品..

```
<asp:Panel ID="pnContainer" runat="server">
  <asp:UpdatePanel ID="UpdatePanel1" runat="server">
     <ContentTemplate>
             <asp:GridView ID="gvempgrade" runat="server" AutoGenerateColumns="False" GridLines="None" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" 
        onrowcancelingedit="gvempgrade_RowCancelingEdit" 
        onrowediting="gvempgrade_RowEditing" 
        onrowupdating="gvempgrade_RowUpdating" ShowFooter="True" 
        onrowcommand="gvempgrade_RowCommand" 
        onrowdeleting="gvempgrade_RowDeleting">
        <FooterStyle BackColor="#A86E07" Font-Bold="True" ForeColor="White" />
        <RowStyle BackColor="#F7F6F3" ForeColor="#603813" />
        <Columns>
            <asp:TemplateField HeaderText="<%$ Resources:Resources, SrNo %>" ItemStyle-CssClass="srcenteralg" ItemStyle-Width="30" HeaderStyle-Width="55" >
                <ItemTemplate >
                    <%# Container.DataItemIndex + 1 %>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField Visible="false">
                <ItemTemplate>
                    <asp:Label ID="lblid" runat="server" Text='<%# Bind("id_grd") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="<%$ Resources:Resources, Grade %>"  >
                <ItemStyle HorizontalAlign="Center"  />
                <ItemTemplate>
                    <asp:Label ID="lblgrade" runat="server" Text='<%# Bind("grade_grd") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtempgrade" Width="55" CssClass="alphabetsOnlynospace" runat="server" Text='<%# Bind("grade_grd") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate >
                    <asp:TextBox ID="txtfempgrade" CssClass="alphabetsOnlynospace" runat="server" Width="55"></asp:TextBox>
                </FooterTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="<%$ Resources:Resources, Description %>" HeaderStyle-HorizontalAlign="Left">
                <ItemTemplate>
                    <asp:Label ID="lbldiscription" runat="server" Text='<%# Bind("description_grd") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtempdescription" CssClass="alphabetsOnly" runat="server" Text='<%# Bind("description_grd") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="txtfempdescription" CssClass="alphabetsOnly" runat="server"></asp:TextBox>
                </FooterTemplate>

            <HeaderStyle HorizontalAlign="Left"></HeaderStyle>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="<%$ Resources:Resources, Maxctc %>" HeaderStyle-HorizontalAlign="Center">
               <ItemStyle HorizontalAlign="Center" />
                <ItemTemplate>
                    <asp:Label ID="lblmaxctc" runat="server" Text='<%# Bind("max_ctc_grd") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtmaxctc" CssClass="numbersOnly" MaxLength="10" Width="100" runat="server" Text='<%# Bind("max_ctc_grd") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="txtfmaxctc" CssClass="numbersOnly" MaxLength="10" Width="100" runat="server"></asp:TextBox>
                </FooterTemplate>

            <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="<%$ Resources:Resources, Minctc %>"  HeaderStyle-HorizontalAlign="Center">
               <ItemStyle HorizontalAlign="Center" />
                <ItemTemplate>
                    <asp:Label ID="lblminctc" runat="server" Text='<%# Bind("min_ctc_grd") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtminctc" MaxLength="10" CssClass="numbersOnly"  Width="100" runat="server" Text='<%# Bind("min_ctc_grd") %>'></asp:TextBox>
                </EditItemTemplate>
                <FooterTemplate>
                    <asp:TextBox ID="txtfminctc" MaxLength="10" CssClass="numbersOnly" Width="100" runat="server"></asp:TextBox>
                </FooterTemplate>

            <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
            </asp:TemplateField>
            <asp:TemplateField ShowHeader="False" ItemStyle-Width="190px" FooterStyle-HorizontalAlign="Center" ItemStyle-HorizontalAlign="Center" >
                <ItemTemplate>
                    <asp:Button  ID="btnedit" runat="server" CausesValidation="True" CssClass="btngradiant" 
                        CommandName="Edit" Text="<%$ Resources:Resources, Edit %>"></asp:Button >
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Button  ID="btnupdate" runat="server" CausesValidation="True" CssClass="btngradiant"
                        CommandName="Update" Text="Update" OnClientClick="return updatevalidation();" ></asp:Button >
                    &nbsp;<asp:Button  ID="btncancel" runat="server" CausesValidation="False" CssClass="btngradiant"
                        CommandName="Cancel" Text="Cancel"></asp:Button >
                </EditItemTemplate>
                <FooterTemplate >

                    <asp:Button ID="btninsert" runat="server" Text="<%$ Resources:Resources, Add %>" CommandName="Add"   CssClass="btngradiant" OnClientClick="return validation();" />
                </FooterTemplate>
            </asp:TemplateField>

                <asp:TemplateField ShowHeader="False">
                    <ItemTemplate>
                        <asp:Button ID="LinkButton2" runat="server" CausesValidation="False" CssClass="btngradiant" OnClientClick='return confirm("Are you sure you want to delete this entry?");'
                            CommandName="Delete" Text="<%$ Resources:Resources, Delete %>"></asp:Button>
                    </ItemTemplate>
            </asp:TemplateField>
            </Columns>
        <PagerStyle BackColor="#A86E07" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
        <HeaderStyle BackColor="#A86E07" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="#d9d9d9" />
        <AlternatingRowStyle BackColor="White" ForeColor="#A86E07" />
    </asp:GridView>

    </ContentTemplate>
</asp:UpdatePanel>
</asp:Panel> 
```

**代码背后：**

```
On pageLoad()

 if (!Page.IsPostBack)
        {
            DataTable dtfetch = emp.Fetchreord();
            gvempgrade.DataSource = dtfetch;
            gvempgrade.DataBind();
        } 
```

**注意：**当您收到与`extendercontrolbase.cs` 缺少 dll 相关的错误时，请尝试评论所有 Extender 控件并查看它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T02:19:11.880

标题：在页面加载时看不到 asp.net gridview 我在代码中看到您使用面板，`id="ID="pnlTankDetail""`并且面板`ID="pnlTankDetail"`具有属性 Visible="False" `so the gridview`grdTanks `can't show in page load. You should change to`Visible="true `to see gridview. And` `i think the`div `tag not have property`runnat="server"`。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:35:28.487

不确定，但添加它可能会帮助你

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true" /> 
```

# php - Amazon S3 图像未正确上传

> ID：11545978
> 
> 赞同：1
> 
> 时间：2012-07-18T16:22:58.013
> 
> 标签：php, zend-framework, amazon-s3, image-uploading

我目前正在为我的网站编写一个后端页面，以允许管理员间接编辑数据库条目并上传照片。我正在使用 Amazon S3 来托管图像以使它们更快地加载，因此当我上传图像时，我必须首先将它们上传到服务器，然后从那里将它们发送到 Amazon 服务器。图像正确上传到服务器，但它们没有正确到达亚马逊的服务器。当我尝试访问亚马逊副本时，它似乎不存在。这是我用来上传图片的代码：

```
//Set up image validator
$upload = new Zend_File_Transfer();
$upload->addValidator('ImageSize', false, array('minwidth'  => 100,
                                                  'maxwidth'  => 1000,
                                                  'minheight' => 100,
                                                  'maxheight' => 1000), 'image')
       ->addValidator('Extension', false, 'jpg')
       ->addValidator('Count', false, array('min'=>0, 'max'=>2));

//Set up Amazon class
$s3 = new Zend_Service_Amazon_S3($my_aws_key, $my_aws_secret_key);

if($upload->isUploaded('image')){ //Pic was uploaded
    if($upload->isValid('image')){ //Pic is valid
        echo "Pic provided is valid.";          
        $upload->addFilter('Rename',array('target'=>BASE_PATH . "/public_html/items/{$item_id}_nsa.jpg",'overwrite'=>true));
        $upload->receive();
        $pic = BASE_PATH . "/public_html/items/{$item_id}_nsa.jpg";
        try{
            $s3->putObject("media.completeset.com/images/items/{$item_id}_nsa.jpg", $pic,
                                        array(Zend_Service_Amazon_S3::S3_ACL_HEADER => Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ,
                                              Zend_Service_Amazon_S3::S3_CONTENT_TYPE_HEADER => "image/jpeg"));
            echo "Pic is uploaded.";
        }
        catch(Exception $e){
            echo "Exception: ".$e->getMessage();
        }
    }
    else{
        echo "Pic is invalid.";
    }
}
else{
    echo "Pic isn't uploaded";
} 
```

以及我的错误示​​例。[本地工作副本](http://completeset.us/items/zFi9VokVlL_nsa.jpg)和[亚马逊副本。](http://cdn.completeset.com/items/zFi9VokVlL_nsa.jpg)我以前从未与亚马逊合作过，所以我不知道问题是什么，如何弄清楚它是什么，或者如何解决它。任何对这 3 点的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:08:34.093

如果 put 操作失败，您应该得到一个异常。在不知道异常是什么的情况下，很难解决问题。

我可以看到的至少一个问题是 putObject() 期望数据是字符串（blob）或资源。也许这会奏效：

```
$s3->putObject(
    "media.completeset.com/images/items/{$item_id}_nsa.jpg", 
    file_get_contents($pic),
    array(
      Zend_Service_Amazon_S3::S3_ACL_HEADER => Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ,
      Zend_Service_Amazon_S3::S3_CONTENT_TYPE_HEADER => "image/jpeg"
    )
); 
```

# php - MySQL - 在文本字段中搜索单词，显示整行？

> ID：11545989
> 
> 赞同：0
> 
> 时间：2012-07-18T16:23:33.910
> 
> 标签：php, mysql

我正在搜索某个词：

```
$sql = "select a, b from lala where dudu=1 and b LIKE \"%".$str."%\""; 
```

这工作得很好。现在我想显示找到 $str 的整行，或者更多行。我怎样才能做到这一点？

在这种情况下，'b' 是文本类型的列，并且包含超过 100 行。
例如：

```
This is some random text, I want
to perform a search on it. 
It has only three lines. 
```

我的 $str 可能是“随机的”，我想得到整行，所以在这种情况下
“这是一些随机文本，我想要”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:03:54.157

假设这些行是换行符分隔的，那么这条看起来很糟糕的 SQL 将得到**第一**行出现的情况：`$search`

```
$search = 'random'; // Sanitize me!

$sql = "
  SELECT a,
  SUBSTR(
    b,
    IF(
      LOCATE('\n', REVERSE(b), LENGTH(b) - LOCATE('".$search."', b)) > 0,
      LENGTH(b) - LOCATE('\n', REVERSE(b), LENGTH(b) - LOCATE('".$search."', b)),
      1
    ),
    IF(
      LOCATE('\n', b, LOCATE('".$search."', b)) > 0,
      LOCATE('\n', b, LOCATE('".$search."', b)) - IF(
        LOCATE('\n', REVERSE(b), LENGTH(b) - LOCATE('".$search."', b)) > 0,
        LENGTH(b) - LOCATE('\n', REVERSE(b), LENGTH(b) - LOCATE('".$search."', b)),
        1
      ),
      LENGTH(b)
    )
  ) AS line
  FROM lala
  WHERE
    dudu = 1
    AND b LIKE '%".$search."%'
"; 
```

我不能说我推荐它，我怀疑它会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:48:34.080

我知道我必须做什么。在查看结果时，我需要另一个循环来将实际行放入 php 变量中。

无论如何，感谢所有答案。

```
while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    $hostname = $row["hostname"]; 
    $config = $row["config"];

            # searching through $config separately with foreach 
} 
```

# ios - 通过网络将 iOS 应用程序安装到多个设备

> ID：11545990
> 
> 赞同：1
> 
> 时间：2012-07-18T16:23:34.753
> 
> 标签：ios, networking, ssh, push, updates

我有一个应用程序，它不应该出现在 AppStore 上，但我需要将它安装到多个设备上。之后，我需要以同样的方式提供更新。

我知道，可以通过某种网络服务来完成，但我不知道应该如何开发它。这可以通过 SSH 或推送或其他方式完成吗？任何想法都非常感谢！

**[更新]**

更准确地说，我在询问网络服务或开发网络服务的方法，它将自动在我需要的设备上安装我的新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:29:35.077

正如其他人所提到的，如果您不想自己分发 .ipa 文件，[TestFlight是一个很好的 AdHoc 分发。](https://testflightapp.com)标准 ios 开发者许可证（99 美元）有 100 台设备的限制，但您可以购买用于此目的的[企业许可证](https://developer.apple.com/programs/ios/enterprise/)，不需要 UDID（标准版），它可以拥有无​​限的设备。它的价格是 299 美元。

如果您不希望用户交互安装，请查看“App Blade”，我个人没有使用过它，但几周前我遇到了开发人员，他们真的很酷。他们的软件允许 MDM，因此您可以自动安装更新。查看他们的[特色网站](https://appblade.com/features.html)唯一的问题是它需要花钱，而 TestFlight 飞行是免费的。（目前）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:39:18.120

在网上搜索了一段时间后，我终于找到了一个似乎可以完美解决我的问题的框架：

[http://hockeykit.net/](http://hockeykit.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:27:22.867

看看[这个](http://testflightapp.com)网站。它允许您通过电子邮件部署应用程序进行测试。

# java - 用于将数组转换为 CSV 的 Java API

> ID：11545991
> 
> 赞同：13
> 
> 时间：2012-07-18T16:23:39.137
> 
> 标签：java, csv, utilities

假设我有一个 int、float、string 等数组。是否有任何实用程序 API（例如 Commons、Guava）可以给我一个逗号分隔的字符串？

像这样，

```
int[] a = {1,2,3,4,5}. 
String s = magicAPI.getCSV(a); // s == "1,2,3,4,5"; 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-18T16:29:02.350

对于这个简单的用例，您可以简单地用逗号连接字符串。如果您使用 Java 8：

```
String csv = String.join(",", yourArray); 
```

否则[*commons-lang*](http://commons.apache.org/lang/)有一个[`join()`](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#join%28java.lang.Object[],%20char%29)方法：

```
String csv = org.apache.commons.lang3.StringUtils.join(yourArray, ","); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T16:32:58.743

您提到了[*Google Guava*](https://code.google.com/p/guava-libraries/)，它具有以下[`Joiner`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html)实用程序：

```
String s = Joiner.on(",").join(a); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T16:29:00.540

我过去使用过[OpenCSV](http://opencsv.sourceforge.net/)。

```
StringWriter stringWriter = new StringWriter();
int[] a = {1,2,3,4,5};
String[] b = new String[a.length];
for ( int i = 0; i < a.length; i++) {
    b[i] = a[i];
}
CSVWriter csvWriter = new CSVWriter(stringWriter, ",");
csvWriter.writeNext(b); 
```

但是，对于这样一个简单的示例，您可能只想使用 a`StringBuilder`和 a`for`循环

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T16:34:36.277

在挖掘了更多之后，我发现[http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/util/StringUtils.html](http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/util/StringUtils.html) StringUtils API in Spring 可以做到。因为，我已经在使用 Spring，我想我会坚持下去。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T16:27:45.403

[Commons Apache CSV](http://commons.apache.org/csv/)似乎整合了 3 个其他 CSV 库，尽管我找不到 2007 年后的版本。

快速浏览表明[OpenCSV](http://opencsv.sourceforge.net/)将通过`CSVWriter`.

```
 CSVWriter writer = new CSVWriter(new FileWriter("yourfile.csv"), '\t');
 // feed in your array (or convert your data to an array)
 String[] entries = "first#second#third".split("#"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-11T00:58:56.537

我创建了一种新方法来执行此操作，而不是使用 openCSV

```
public String convertArrayToCsv(String[] IncomingArray)
{
    StringBuilder sb=new StringBuilder();
    for (int i=0;i<IncomingArray.length;i++)
    {
        sb=sb.append(IncomingArray[i]);
        if(i != IncomingArray.length-1)
        {
            sb.append(",");
        }
    }
    return sb.toString();
}//end of convertArrayToCsv method 
```

# matlab - 使用 MATLAB 按频率着色的二维直方图

> ID：11545993
> 
> 赞同：1
> 
> 时间：2012-07-18T16:23:44.533
> 
> 标签：matlab, histogram

我有一个包含大量点的 XY 数据文件，它基本上代表对象 A 在另一个周围的 X、Y 位置，对象 B 放置在 0,0 处。我想使用matlab获得一个显示A在B周围的空间分布的图表。虽然我有一个模糊的想法，我必须使用 histc，但我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T17:36:02.393

我最近处理了一个类似的问题

有趣的是，如果您的点分布在一个圆圈中并且想要一个圆形图，您可以阅读[这篇](http://www.mathworks.com/help/techdoc/ref/rose.html)文章。

如果您需要带有条形的常规直方图：我假设您有一个用于 X 值和 Y 值的向量。这是我用的。

```
%Create a vector of distances
Distance = sqrt(X.*X +Y.*Y);

%choose number of bins
Bins = 20;

%get max and min
MinD = min(Distance);
MaxD = max(Distance);

%get evenly spaced bins
Increments = (MaxD-MinD)/Bins

%create a vector for the bins
Edges = MinD:Increments:MaxD;

Histo = Histc(Distance,Edges);

Hist(Histo);
shg; 
```

# jdbc - Derby/JDBC 连接生命周期（或空闲超时）

> ID：11545994
> 
> 赞同：2
> 
> 时间：2012-07-18T16:24:00.540
> 
> 标签：jdbc, timeout, connection, derby, lifetime

使用 JDBC 连接到 Derby 数据库，一段时间后，Derby 或 JDBC 会自动关闭连接。（这可以称为“连接生命周期”值或超时值）。

我在哪里可以找到超时值是多少？是 Derby 还是 JDBC 关闭了连接？它是一个“空闲超时”值吗？所以，如果该连接上有活动，Derby 或 JDBC 是否会更新以在 (LastActivity + IdleTimeoutValue) 时关闭连接？

看了一堆页面，包括 [DriverManager getConnection 的 Connection timeout 超时](https://stackoverflow.com/questions/1683949/connection-timeout-for-drivermanager-getconnection) [后如何重新建立 JDBC 连接？](https://stackoverflow.com/questions/6152643/how-to-reestablish-a-jdbc-connection-after-a-timeout)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:01:44.900

据我所知，Derby 和 JDBC 都没有任何自动超时。

以下是 Derby JDBC 连接的可配置行为：http: [//db.apache.org/derby/docs/10.8/ref/rrefattrib24612.html](http://db.apache.org/derby/docs/10.8/ref/rrefattrib24612.html)

我不认为德比正在关闭你的联系。

我怀疑您有网络防火墙、VPN 或其他一些设备正在关闭您明显空闲的 TCP/IP 连接。

尝试与您的 IT 人员一起检查您的网络配置。

# sql - 使用条件计数分组

> ID：11545995
> 
> 赞同：0
> 
> 时间：2012-07-18T16:24:07.547
> 
> 标签：sql, sql-server

我正在尝试计算通过和失败的设备我有我想要的所有数字，但它们并不完全正确。

**例如：**

```
select 
    t3.displayname as [PSI], 
    case when t0.compliant = 0 then count(displayname) end as [failures],
    case when t0.compliant = 1 then count(displayname) end as [success]
from lineitemsmap as t0
    inner join art_blob as t1 on t1.art_blob_id = t0.blobid
    inner join art_asset as t2 on t2.art_asset_id = t1.art_asset_id
    inner join net_ou as t3 on t3.net_ouid = t2.net_ouid
group by t3.displayname, t0.compliant 
```

**生成：**

```
------------------------------
| PSI | failures | success   |
------------------------------
| 1   | 3        | NULL      |
------------------------------
| 2   | 4        | NULL      |
------------------------------
| 3   | 5        | NULL      |
------------------------------
| 1   | NULL     | 6         |
------------------------------
| 2   | NULL     | 7         |
------------------------------
| 3   | NULL     | 8         |
------------------------------ 
```

我试图让所有结果在 3 行第 6 节中返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:25:48.450

```
select 
    t3.displayname as [PSI], 
    SUM(case when t0.compliant = 0 then 1 else 0 end) as [failures],
    SUM(case when t0.compliant = 1 then 1 else 0 end) as [success]
from lineitemsmap as t0
    inner join art_blob as t1 on t1.art_blob_id = t0.blobid
    inner join art_asset as t2 on t2.art_asset_id = t1.art_asset_id
    inner join net_ou as t3 on t3.net_ouid = t2.net_ouid
group by t3.displayname; 
```

# mysql - 使用 while 循环时出错/将 10 年添加到 MySQL 数据库中的所有日期

> ID：11545996
> 
> 赞同：1
> 
> 时间：2012-07-18T16:24:11.133
> 
> 标签：mysql, sql, erp

我正在尝试为客户设置一些软件的演示，并且需要实时报告数据来做到这一点。这是一种商业软件，它依赖于通常驻留在 ERP 类型系统中的信息，其中有销售订单和采购订单（以及构建这些东西的所有数据）。

我花了很长时间寻找一个示例 ERP 数据库，我唯一能想到[的就是 MS AdventureWorks DB 的 MySQL 端口](http://sourceforge.net/projects/awmysql/)。这很棒，并且有很多我可以用来采样的数据。

问题是，订单上的所有日期都是从 2001 年到 2004 年。

我想做的是编写一个简单的 MySQL 脚本，该脚本将遍历整个 AdventureWorks DB 中的每个日期时间字段，并将其添加 10 年。这将使日期范围（2011-2014）更加合理。

我发现[这篇文章](http://www.mikereigler.com/archive/2010/09/update-all-datetime-columns-in-a-database-with-new-dates/)有一个非常相似的脚本，我认为我可以从中借用，但由于某种原因，我似乎无法将它移植到 MySQL。

我把它归结为这一小段代码。出于某种原因，我的 MySQL 不会运行 WHILE 循环——我不知道为什么。

```
USE adventureworks;

CREATE TEMPORARY TABLE ColumnList 
       (
      TableName NVARCHAR (100),
      columnName NVARCHAR (100)
       );

INSERT INTO ColumnList
        select t.table_name,c.column_name
        from information_schema.tables t inner join information_schema.columns c on t.table_name=c.table_name
        where c.column_type = 'datetime';

SET @Counter = 1;
SET @TotalCount = (SELECT COUNT(*) FROM ColumnList C);

BEGIN
    -- do stuff here
    @Counter = @Counter + 1;
END
END WHILE; 
```

出现的错误：

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHILE @Counter <= @TotalCount DO
BEGIN
  -- do stuff here
END
END WHILE' at line 1 
```

任何帮助，将不胜感激。

**最终更新** * 下面的答案是正确的，但万一在任何地方偶然发现了这个寻找答案，我找不到一个没有准备好的语句/等非常复杂的答案，因为我无法在 MySQL 中构建动态 SQL。我最终在我的 CodeIgniter 应用程序中编写了这个小脚本来处理它。

希望它可以帮助某人：

```
$this->load->database();    

$sql = "select t.table_name,c.column_name
from information_schema.tables t inner join information_schema.columns c on t.table_name=c.table_name
where c.table_schema='adventureworks' and c.column_type = 'datetime';";

$columnlist = $this->db->query($sql);

foreach ($columnlist->result_array() as $row) 
{
  //Now you have list of columns and tables, need to go in to each table, get all
  //results and update
  $column = $row['column_name'];
  $table = $row['table_name'];

  $sql = 
    "select distinct $column as 'thisdate', DATE_ADD($column, INTERVAL 10 YEAR) as 'newdate'
    from $table";

  $valuelist = $this->db->query($sql);
  $results = $valuelist->result_array();

  foreach ($results as $value) 
  {        
    $thisdate = date ("Y-m-d H:i:s", strtotime($value['thisdate']));
    $newdate = date ("Y-m-d H:i:s", strtotime($value['newdate']));

    $updatestmt =
      'update '.$table.' set '.$column." = '". $newdate ."' where $column = '".$thisdate."'";

    echo $updatestmt;
    $this->db->query($updatestmt);
    echo ' -- rows affected '.$this->db->affected_rows().'<br/>'; 
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:38:51.163

您只能`while`在存储过程、函数或触发器中使用循环。
您的代码片段似乎不是任何此类 sp 或触发器的一部分。
因此是错误。

有关详细信息，请参阅***[WHILE 语法。](https://dev.mysql.com/doc/refman/5.6/en/while.html)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:29:46.373

```
UPDATE mytable SET mydate = DATE_ADD(mydate, INTERVAL 10 YEAR) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:38:23.403

也许在 BEGIN END 之后添加一个分隔符？

```
WHILE @Counter <= @TotalCount DO
    BEGIN
      -- do stuff here
    END;
END WHILE; 
```

其次，记得增加@counter。

# jquery - jQuery复杂的验证规则

> ID：11545998
> 
> 赞同：2
> 
> 时间：2012-07-18T16:24:18.497
> 
> 标签：jquery, jquery-validate

我正在尝试在表单上动态指定一些规则。在这个表单上，我有三个 TextBox 输入 ( `Text1`, `Text2`, `Text3`) 和一个复选框 ( `Check1`)

我将配置以下规则：

1.  规则`Text2`：该字段应为2位小数的正数，其值应等于或大于`Text1`

2.  规则`Text3`：该字段应为带有 2 位小数的数字。而且：

    a)如果选择，则 的值`Text3`必须等于 0`Check1`

    b) 的值`Text3`必须小于或等于`Text1`且小于或等于`Text2`如果`Check1`未选择。

如何在[jQuery Validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)插件中表达这些规则？有什么建议吗？

**更新**：这是 (1) 的基本规则。它错过了*相等或更大*的部分：

```
$('#Text2').rules('add', {
    required: true,
    min: 0.0,
    number: true,
    messages: {
        required: 'Message 1',
        min: 'Message 2',
        number: 'Message 3'
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T02:41:33.103

You can make use of $.validator.addMethod..

for example,

```
$.validator.addMethod("decimal", function(val, element){return /\d*(\.\d+)?/.test(val)}, "Should enter only numericals."); 
```

the above method just check for decimal.

We can use this by adding the first parameter name in the class name such as

```
<input type="text" class="required decimal" /> 
```

In your case, you need to check for whether the value is greater than text1, so we can do it as

```
$.validator.addMethod("text2validator", function(val, element){if(val > $("#text1").val())return true;}, "Value should be greater than text1")

<input type="text" id="text1" value="10" />
<input type="text" id="text2" class="required decimal text2validator" /> 
```

# dependency-injection - Guice 部分注入示例

> ID：11545999
> 
> 赞同：5
> 
> 时间：2012-07-18T16:24:19.930
> 
> 标签：dependency-injection, guice

这个例子取自一本关于[Dependency Injection](http://manning.com/prasanna/)的书。

在第 87 页，有这个例子。

```
public class NewsletterManager {
  private final List<Recipient> recipients;
  private final DelivererFactory factory; // The book notes this as injected

  public NewsletterManager(List<Recipient> rs, DelivererFactory factory) {
    this.recipients = rs;
    this.factory = factory;
  }

  public void send(Newsletter letter) {
    for (Recipient recipient : recipients) {
      Deliverer d = factory.forLetter(letter);
      d.deliverTo(recipient);
    }
  }

} 
```

我了解代码的用途，但我不了解的是如何实例化或配置 my `Module`，以便我可以创建此类的实例。

似乎`DelivererFactory`被注入了。示例没有说明如何，但让我们承认它是通过构造函数注入。在那种情况下，如何传递`List<Recipient>`特定于`NewsletterManager`我想要的实例的实例？如何使用 Guice 来实例化我`NewsletterManager`的模块配置`DelivererFactory`和特定`List<Recipient>`实例？

我不明白的是如何在构造函数的签名中同时自动注入对象和特定于实例的对象。在这种情况下，我不知道如何获得`NewsletterManager`只有我的`List<Recipient>`. 我必须依赖工厂吗？那样的话，`DelivererFactory`打针有什么用，我厂里也得打针……

我希望我的问题足够清楚......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T18:52:17.910

你是对的，这种注入只能通过工厂来解决。

如果您`Foo(A a, B b)`在运行时注入了 A 并传递了 B，您将需要一个 Factory `FooFactory.createFoo(B b)`，它在内部保存对 A 的引用。

幸运的是，Guice 有@Assisted Injection 的概念。您必须提供工厂的接口，但可以将实现的“魔力”留给 Guice。

它有很好的记录：[https ://github.com/google/guice/wiki/AssistedInject](https://github.com/google/guice/wiki/AssistedInject)

您将需要对 com.google.inject.extensions » guice-assisted-inject 的额外依赖