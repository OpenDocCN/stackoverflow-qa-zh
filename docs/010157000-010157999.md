# StackOverflow 问答 10157000-10157999

# java - 将包含main方法的类放入子包中

> ID：10157012
> 
> 赞同：0
> 
> 时间：2012-04-14T20:12:14.650
> 
> 标签：java, package

我正在制作一个名为 TruckingCompany 的项目，其中有一个名为 TruckingCompany 的包，以及三个子包：实用程序、方法和对象。现在我已经将包含 main 方法的类放入了实用程序子包中。它是否正确？我应该把它放进 TruckingCompany 包（没有子包）吗？所以一般的问题是：如果有一个包和一些子包，并且主方法使用所有子包中的类，那么将包含它的类放在子包中是否正确？

PS：如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:14:08.353

是的，你可以把它放进去`truckingCompany`。毕竟，它是您的应用程序的入口点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:14:16.220

作为基线，从我目前所见，一个好的做法是将包含 main 方法的类放在顶级包中。

在您的情况下，我会将您的课程放在 TruckingCompany 包中，而不是放在子包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T20:15:45.990

你应该把它放在 truckingCompany 但不管你把它放在哪里都行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T20:27:21.520

您将课程放在哪里绝对无关紧要。更具体地说，一个包与其子包没有特殊关系。这些包基本上是包名称的平面命名空间。我还想补充一点，包名称要遵循一些约定：

1.  您应该使用所有小写字母；
2.  包名应该来自您拥有的互联网域名：com.truckingcompany.stuff.morestuff。

# php - 刚刚完成图片上传 php mysql

> ID：10157020
> 
> 赞同：2
> 
> 时间：2012-04-14T20:13:49.867
> 
> 标签：php, forms, file-upload

我只是让它工作，然后我以为我已经完成并且它停止工作了。如果文件不是图像，我正试图让它排除错误。这是我正在谈论的那篇文章。任何帮助将不胜感激

```
$type_array = array('image/jpeg', 'image/gif', 'image/png','image/x-png'); //image types allowed
if(isset($_FILES['images'][$i]) and $_FILES['images']['name'][$i] != '') { //check image
    if ($_FILES['images']['size'][$i] < 10240000) { //make sure file is larger than 10mb
        $type = $_FILES['images']['type'][$i]; //get the file types
        if (!in_array($type, $type_array)) { //make sure the images are allowed
            $errors[] = "Please check that you are uploading an image.";
            $show_errors = 'show';
            exit;
        }
    } else {
        $errors[] = "Please make sure each file is less than 10MB.";
        $show_errors = 'show';
        exit;
    }
} //image checked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:39:19.110

你不应该使用“exit;”。它会结束所有 PHP 执行，之后您的代码将无法运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:04:47.483

这是错误

A.`$_FILES ['images'] ['size'] [$i]`仅当您期望上传多张图片时才有效

解决方案

你应该只使用`$_FILES ['images'] ['size']`

B. 跟随脚本错误

```
 if (isset ( $_FILES ['images'] [$i] ) and $_FILES ['images'] ['name'] [$i] != '') { // check 
```

只需使用

```
 if($_FILES['images']['error'] == 0){ 
```

如果您正在处理多个图像.. 在看到之前已经给出了很多例子。

[上传 swf 文件时限制检查条件](https://stackoverflow.com/questions/10151960/limiting-the-checking-condition-while-uploading-swf-files/10152156#10152156)

[PHP - 将上传的图像保存到服务器](https://stackoverflow.com/questions/9423449/php-saving-uploaded-image-to-server/9423524#9423524)

# javascript - 尝试使用 xmlsockets 连接到套接字会导致“对象 # has no method 'SetVariable'" Im trying to connect to a tcp socket using xmlsocket: var xmls = new XMLSocket(); function connect() { xmls.onConnect = function(success 问问题 问问题 2012-04-14T20:15:01.850 594 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Im trying to connect to a tcp socket using xmlsocket: var xmls = new XMLSocket(); function connect() { xmls.onConnect = function(success) { if(success) connected = true; }; xmls.connect("localhost", 18757); }; setTimeout(connect, 1500); but when the browser tries to perform xmls.connect I get the exception: Uncaught TypeError: Object # has no method 'SetVariable' __XMLSocket.connect I guess because it tries to do: __flash.SetVariable("__serverPort",port); I tried to find the problem but I can't find something about it and Im clueless with flash. any ideas? Alternative to iframe for giving purchaser information and allowing purchaser to input whether item was bought on another website? I need some help and out-of-the-box thinking, because I'm genuinely stumped. I'm making a gift registry website (like for wedding registries). The idea is that the person making the gift registry can add items from anywhere on the web (say, target.com). Then, when someone wants to buy them an item off the registry, they come to our website, find an item, click on the link and are taken to the product page (on target.com) and buy the gift. The problem is that we need to know if the product was actually purchased so the gift isn't purchased multiple times. Also, we need to give the purchaser the address of the person for whom they're buying a gift. Here's what we'd like to do: Unfortunately, the only way I can think of how to do this is through an iframe, which doesn't work with many large retailers (like Amazon and Wal-Mart), which have blocked iframes for legitimate security reasons. Another option is opening two new browser windows, but that's just ugly. So, what else can I do? Any brilliant JavaScript/css/php or whatever solutions out there? javascriptflashgoogle-chromexmlsocket 4 0 回答 0 Related 0 database-design - 缩放应用 1 java - AVL 平衡树 - 打印最后 10 个节点 1 sharepoint-2010 - 调试 SharePoint 2010 自定义活动 0 c# - 如何编译 libmpg123 以在 Mono for Android 项目中使用 1 css - 垂直文本在相对 div 中对齐 1 android - Android Map Activity 在 Honeycomb 上加班变慢 2 ruby - 在 win7 x86 机器上安装 capybara-webkit 时出错 1 c# - 使用 httpcontext 打开附件 3 php - 查询不同表中父类别下的项目计数 2 python - 需要范围分配的数组类型 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10157030
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, flash, google-chrome, xmlsocket

Im trying to connect to a tcp socket using xmlsocket:

```
 var xmls = new XMLSocket();

    function connect() {
        xmls.onConnect = function(success) {
            if(success)
                connected = true;
        };
        xmls.connect("localhost", 18757);
    };

    setTimeout(connect, 1500); 
```

but when the browser tries to perform xmls.connect I get the exception:

Uncaught TypeError: Object # has no method 'SetVariable' __XMLSocket.connect

I guess because it tries to do:

```
 __flash.SetVariable("__serverPort",port); 
```

I tried to find the problem but I can't find something about it and Im clueless with flash. any ideas?

# c# - 发布 Web 服务和 IIS

> ID：10157040
> 
> 赞同：0
> 
> 时间：2012-04-14T20:16:23.733
> 
> 标签：c#, wpf, web-services, iis, windows-xp

在 IIS 上发布服务时遇到问题。首先，我将描述我的场景。

目前我在 C# 中有一个 WPF 应用程序。

另外我有一个需要与 c# 应用程序通信的网站（通过 HTTPS 在 IIS 中发布），因此我决定通过 REST Web 服务也通过 https 发布我需要的方法：

```
WebServiceHost serviceHost = new WebServiceHost(typeof(QESWebService), new Uri("https:xxx/WS/"); 
```

当我在 Windows 7 上测试它时没有问题。一切正常。

但是现在，当我在 Windows XP 中尝试该应用程序时，它无法正常工作！我无法启动应用程序，因为端口 443（用于 Web 服务 https）已在使用中。

我找不到与在一侧不使用 https 不同的解决方案，但我真的需要它，我该怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:34:02.940

如果您已经有一个使用 SSL 在 IIS 上运行的 Web 应用程序/服务，那么您需要更改一些配置设置
这是一篇关于[端口 443 上的多个 SSL Web 应用程序的文章](http://www.harbar.net/articles/ssl.aspx)

# php - 替代 iframe 以提供购买者信息并允许购买者输入商品是否在其他网站上购买？

> ID：10157041
> 
> 赞同：1
> 
> 时间：2012-04-14T20:16:25.740
> 
> 标签：php, javascript, iframe

我需要一些帮助和开箱即用的思考，因为我真的很难过。

我正在制作一个礼品登记网站（如婚礼登记）。这个想法是，制作礼物注册表的人可以从网络上的任何地方添加项目（例如，target.com）。然后，当有人想从注册表中购买商品时，他们会来到我们的网站，找到商品，点击链接，然后转到产品页面（在 target.com 上）并购买礼物。

问题是我们需要知道产品是否真的被购买了，所以礼物不会被多次购买。此外，我们需要向购买者提供他们为其购买礼物的人的地址。

这是我们想要做的：

[![](../Images/538c053dc6c45d503346b34dbc50f44e.png)](https://i.imgur.com/Szxtz.jpg)

不幸的是，我能想到的唯一方法是通过 iframe，它不适用于许多大型零售商（如亚马逊和沃尔玛），它们出于正当的安全原因阻止了 iframe。另一种选择是打开两个新的浏览器窗口，但这很难看。

那么，我还能做什么？有任何出色的 JavaScript/css/php 或任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:58:45.040

你唯一的选择，虽然很差，是一个书签。买家必须在开始购物之前添加/安装书签。完成订单后，他们必须在订单确认/收据页面上运行小书签以“验证”购买。

您必须为您支持的每个商家编写代码。每当商家更改其确认/收据页面时，您都必须更新您的验证脚本。小书签将根据页面 URL 确定商家，并检查页面中的特定元素以确定购买的产品。

我会使用书签作为可选步骤，因为您不能假设您的用户会记得使用它，甚至知道如何使用它。当他们从您的列表中选择产品时，我会将项目标记为“未验证购买”，然后如果使用小书签，则将其标记为“已验证购买”。对于在结账过程中忘记使用书签但仍希望验证其订单的用户，您还可以在“订单历史记录”页面上进行书签验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:23:50.003

如果某个商品可以是网络上的任何商店，您就无法可靠地检测该商品是否已购买。您只能检测 somone 是否点击了商店中商品的链接，但不能检测他是否购买了该商品。您应该依靠用户将商品标记为已购买。

# android - How to display selector in ListView

> ID：10157042
> 
> 赞同：0
> 
> 时间：2012-04-14T20:16:36.620
> 
> 标签：android

I have a requirement that I need to dispaly ListView and at bottom of my List I have to display two buttons (scroll up/down).

Whenever user press on these buttons my list should scroll accordingly.

for this I have used

```
 if(view == scrollupbtn)
    {
        if(listViewPosition >= 1)
            listView.smoothScrollToPosition(-- listViewPosition);

    }
    else if(view == scrolldownbtn)
    {
        listView.smoothScrollToPosition(++ listViewPosition);

    } 
```

This code able to scroll my listview but I am not able to see list item selector when I press my buttons..

I want to display default list item selector when I press my buttons..

Please let me know what to do for this..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:24:33.100

如果您需要在列表底部显示视图，可以使用`addFooterView`方法[http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View,%20java.lang.Object ,%20 布尔值](http://developer.android.com/reference/android/widget/ListView.html#addFooterView(android.view.View,%20java.lang.Object,%20boolean)

# javascript - Limit slideDown function in jquery?

> ID：10157050
> 
> 赞同：-2
> 
> 时间：2012-04-14T20:18:09.073
> 
> 标签：javascript, jquery, slidedown

I have a list of lines of html. They look something like this.

```
<div class="list">
<div class="line"></div>
...
</div> 
```

I call the jquery function slideDown() to show the lines. What I would like to be able to do is limit how many lines it displays. How can I do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:31:53.340

此代码将向下滑动所有列表：

```
<script>
    $( document ).ready( function() {
        $( '.list' ).click( function() {
            $( this ).slideDown( 'slow' );
        });
    });
</script> 
```

其中一种方法是包装一些行：

```
<div class="list">
    <div class="list-wrapper">
        <div class="line"></div>
        ...
    </div>
    <div class="line"></div>
    ...
</div>
<script>
    $( document ).ready( function() {
        $( '.list' ).click( function() {
            $( this ).find( '.list-wrapper' ).slideDown( 'slow' );
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:55:56.817

很简单的东西：

**HTML**

```
<div class="list"> Click me!
<div class="line">One</div>
<div class="line">Two</div>
<div class="line">Three</div>
<div class="line">Four</div>
<div class="line">Five</div>
<div class="line">Six</div>
<div class="line">Seven</div> 
</div>​ 
```

**CSS**

```
.list{
 border: 1px solid;
 height: 20px;
 width: 100px;
}

.line
{
 display:none;
}​ 
```

**JS**

```
$(".list").click( function() {
    $(this).children().slice(0, 5).slideDown("slow");
}); 
```

当您单击带有类列表的 div 时，您会得到他所有的孩子，然后仅从 0 到 5 切片并显示它们。如果您有不同班级的孩子或您不想隐藏的孩子等，您可以进一步修改此设置。

这是小提琴： http: [//jsfiddle.net/mgrcic/YHhDp/](http://jsfiddle.net/mgrcic/YHhDp/)和 JS Bin [http://jsbin.com/3/omequg/edit?html,css,javascript,live](http://jsbin.com/3/omequg/edit?html,css,javascript,live)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:00:26.687

向下和向上滑动几个元素的一种方式：

```
function rollOut(count, time, justVisible) {
    justVisible = justVisible !== undefined ? justVisible : true;
    $(".list > .line").each(function(a, e) {
        e = $(e);
        if (a < count) {
            console.log(a, e);
            if (e.is(":visible") || e.attr("data-was-visible") == "true") e.attr("data-extend", true);
            else if (!justVisible) count++;
        }
        console.log(count);
    });
    $(".list").children(".line[data-extend=true]").slideDown(time);
}

function rollUp(time) {
    $(".list > .line").each(function(a, e) {
        var e = $(e);
        e.attr("data-was-visible", e.is(":visible"));
    });
    $(".list").children(".line").slideUp(time, function() {
        $(".list > .line").attr("data-extend", false);
    });
} 
```

这是一个小提琴： http: [//jsfiddle.net/WbTjK/](http://jsfiddle.net/WbTjK/)（使用我的前海报的html）

# recursion - Need to make this recursive algorithm iterative due to stack overflow

> ID：10157054
> 
> 赞同：1
> 
> 时间：2012-04-14T20:19:08.470
> 
> 标签：recursion

Basically I have this huge function in Python (which I've simplified to the bare basics)

```
def rec(a,b):
  if stoppingCondition==True: return 1

  key=(a,b)
  if key in memo: return memo[key]

  if b==side condition:
       memo[key]=rec(a+1,b)   #RECURSIVE CALL
       return memo[key]

  total=0
  for d in D:
      if condition1==True:
          b=some process 1
          total+=rec(a+1,b)   #RECURSIVE CALL
      elif condition2==True:
          for x,y in d:
              if (some break condition==True): break
          else: #only gets called if break didnt happen
              b=some process 2
              total+=rec(a+1,b)   #RECURSIVE CALL
   memo[key]=total
   return memo[key] 
```

And I am having a heck of a time making it iterative because it blows up for deeper recursive levels. I've already read up other threads about converting to loops and stacks and whatnot but I just can't get any of it working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:46:48.980

您始终可以计算`rec(a, b)`all `b`，从最高点开始`a`并在一个简单的循环中递减而无需递归。现在，如果所有可能调用的遍历都是稀疏的，则此解决方案不可行`rec()`，因为它会引入许多不必要的计算。

另一种解决方案是尝试在 Python 中实现尾调用优化。我没试过，但你可能想测试[这个装饰器](http://code.activestate.com/recipes/474088/)。

一个不太优雅的解决方案是增加递归限制以满足您的需要：

```
import sys
sys.setrecursionlimit(10000) 
```

# c++ - 从类中删除指向 this 的指针？

> ID：10157055
> 
> 赞同：1
> 
> 时间：2012-04-14T20:19:13.540
> 
> 标签：c++, pointers, memory-management

我有一个名为的类`SpriteX`，它基本上是一个通用精灵。我还有一个名为的类`_Drawables`，它有一个 member `std::vector<SpriteX*>`。在`main()`我创建的每个精灵中，都可以插入到`_Drawables`容器中，然后可以调用该`drawAll()`方法来`SpriteX`绘制`std::vector`.

每个`SpriteX`对象都知道指向自身的指针所在的索引，并在其析构函数中将指针设置为`NULL`. 但我想完全销毁指针，而不仅仅是将其设置为`NULL`. 但是删除指针安全吗？如果我`delete`在析构函数中使用，并且调用析构函数，那会导致循环吗？有什么办法可以释放内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:21:07.507

> 如果我在析构函数中使用 delete 并调用析构函数，那会导致循环吗？

是的，这可能会导致堆栈溢出和崩溃。

但是你不需要这样做，因为如果你在析构函数中，你已经在删除内存，对吧？（如，你没有明确地调用我希望的析构函数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:22:11.007

采用`Boost::shared_ptr<>`

所以声明你的向量是：

```
std::vector<boost::shared_ptr<SpriteX> > 
```

然后，当您擦除迭代器或清除条目时，引用计数将变为零并且内存将被释放。

如果您已经在析构函数中，那么删除`this`就像在析构函数中一样是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T20:22:50.963

您正在尝试在这里重新发明轮子，而您做得不好（这是一个复杂的轮子）。

在此处使用智能指针，例如`std::unique_ptr`（如果您使用 C++11）或`boost::shared_ptr`.

> 如果我在析构函数中使用 delete 并调用析构函数，那会导致循环吗？

是的。这毫无意义......首先如何调用析构函数？您实际上是在指针上手动调用析构函数吗？虽然这是可能的，但这很可能是一个非常糟糕的主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T20:24:32.383

根据您正在做的事情，您可能希望完全放弃指针而只使用`std::vector<SpriteX>`.

或者，如果您想拥有指针但直到 结束才清除它们`main()`，请考虑使用`boost::ptr_vector`. 它将为您提供与 a 相同的语法`std::vector<>`，但您必须`push_back`使用指针。此外，它将拥有您的指针的所有权，因此您不必担心删除它们。

`std::vector<boost::shared_ptr<SpriteX> >`如果您将`SpriteX`单独传递给函数，或者如果它们具有复杂的生命周期，请使用 a 。但是，如果它们在同一范围内定义和删除，我会坚持使用更简单的方法。

# android - 自定义文本栏

> ID：10157056
> 
> 赞同：0
> 
> 时间：2012-04-14T20:19:14.360
> 
> 标签：android

您好，我正在寻找一种在其中包含我的免责声明的文本框（像这样）的方法，所以我想要一种上下滚动条的方法，因为文本会有点长，我无法将其放入此刻的盒子。

```
 http://img24.imageshack.us/img24/6303/introqm.png

   <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         style="@style/LYLBKGRD" >

    <EditText
    android:id="@+id/editText1"
    android:layout_width="300dp"
    android:layout_height="250dp"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="15dp"
    android:inputType="textMultiLine">

    <requestFocus />
</EditText> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:40:31.173

尝试跟随...

```
<EditText
     android:id="@+id/edit_text"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:singleLine="false"
     android:maxLines="3"
     android:scrollbars="vertical">
</EditText> 
```

[带有滚动条和 maxHeight 的 Android TextView](https://stackoverflow.com/questions/2478615/android-textview-with-scrollbars-and-maxheight)

# actionscript-3 - 如果参数不存在，如何插入？

> ID：10157058
> 
> 赞同：0
> 
> 时间：2012-04-14T20:19:27.307
> 
> 标签：actionscript-3, sqlite

尝试执行以下指令时出现错误：SQLError: 'Error #3115: SQL Error.', details:'near 'WHERE': syntax error', operation:'execute', detailID:'2003'。有什么想法吗？谢谢！

```
 dbStatement.text = "INSERT INTO person (idPerson,image) VALUES (:idPerson,:image) " +
                "WHERE NOT EXISTS (SELECT idPerson FROM person WHERE idPerson=:idPerson)";
            dbStatement.parameters[":idPerson"] = person.idPerson; 
            dbStatement.parameters[":image"] = person.image; 
            dbStatement.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:36:48.233

您可能正在寻找`INSERT OR REPLACE person ( ... ) VALUES( ... )`.

# python - 如何在 Django 中使用 Bootstrap？

> ID：10157059
> 
> 赞同：72
> 
> 时间：2012-04-14T20:19:39.963
> 
> 标签：python, django, twitter-bootstrap

我正在学习来自 PHP 的 python 和 Django。这一切都非常令人兴奋，我很想将 Bootstrap 与 Django 一起使用来创建性感的网页。

据我了解（我正在关注他们网站上的 Django 教程），Django 使用可以包含在您的`settings.py`文件中的“应用程序”。我快速搜索并找到了几个以引导程序为主题的应用程序，但不知道如何选择合适的应用程序。是否有大多数人使用的标准应用程序？我需要的只是`bootstrap.css`和`bootstrap.js`文件。

我确信我可以手动将它们放在我的根目录中，但我会在我的 Django 安装中享受“包罗万象”的设置。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-15T16:08:26.863

重新阅读您的问题，您似乎正在寻找一种将 Twitter Bootstrap 安装为 Django 应用程序的方法。虽然有一些应用程序可以促进将 Twitter Bootstrap 与 Django 一起使用，但您实际上并不需要使用它们中的任何一个。

您可以在项目或应用程序级别简单地包含 Twitter Bootstrap CSS 和 JS，并在您的 Django 模板中引用它们。

要将 Twitter Bootstrap 包含在 Django 应用程序中，最好的办法是：

1.  **使用静态文件**

    在您的`settings.py`中，添加 Bootstrap 的路径（您应该下载并放置在您的 Django 应用程序中名为的文件夹下`static`：

    ```
    STATICFILES_DIRS = (

        # Put strings here, like "/home/html/static" or "C:/www/django/static".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
        '/path/to/my_project/my_app/static/',
    ) 
    ```

    另外，请确保您的`STATIC_URL`前缀已设置：

    ```
    # URL prefix for static files.
    # Example: "http://media.lawrence.com/static/"
    STATIC_URL = '/static/' 
    ```

    现在，下载 Twitter Bootstrap 并将其放在那里的路径中：

    ```
    /path/to/my_project/my_app/static/bootstrap/ 
    ```

2.  **在您的模板中包含 Twitter Bootstrap**

    我会链接到 Twitter Bootstrap 文档，但实际上没有。最好的办法是查看他们的[入门模板](http://twitter.github.com/bootstrap/examples/starter-template.html)的来源。使用 Django 模板系统有点超出了这个问题的范围，但我会给你这个提示：在起始模板中找到指向 .css 或 .js 的链接的任何地方，用你的 STATIC_URL 替换它。

    所以：

    ```
    <link href="../assets/css/bootstrap.css" rel="stylesheet"> 
    ```

    变成

    ```
    <link href="{{ STATIC_URL }}/bootstrap/css/bootstrap.css" rel="stylesheet"> 
    ```

    我使用起始模板作为我的模板，`base.html`并在其中包含可以替换为模板中的实际内容的`{% block content %}`块，其中.`base.html``{% extend base.html %}`

3.  **或者，使用第 3 方应用程序来指导您**

    您可能会调查[Django Bootstrap Toolkit](https://github.com/dyve/django-bootstrap3)，我自己没有使用过。但是，我建议您自己先手动完成，作为探索项目并真正了解正在发生的事情的一种方式。一点也不难！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T20:33:50.463

欢迎来到 Python/Django 的世界。和你一样，在使用 PHP 进行多年的 Web 开发之后，我已经迁移到使用这种语言/框架对创建动态网站和健壮的 Web 应用程序。

django 真正好的特性之一是它们的自动管理界面。我使用了一个名为 Django-Admin-Tools 和 django-admintools-bootstrap 的应用程序，它将默认界面转换为一个漂亮的管理员。[https://bitbucket.org/salvator/django-admintools-bootstrap](https://bitbucket.org/salvator/django-admintools-bootstrap)

安装 django 应用程序或其他 python 模块的最简单方法是使用 pip。我会阅读使用 virtualenv [http://readthedocs.org/projects/virtualenv/](http://readthedocs.org/projects/virtualenv/)来管理您的 django 项目。当您设置 python 虚拟环境时，它允许您在系统上的单独 python 安装中安装 django 应用程序和 python 模块。

然后，安装额外的 django 应用程序变得轻而易举 - pip install django-admin-tools - django grappelli - south - 都是我的最爱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-10T18:02:45.927

上面提到的答案都不适合我，我要说的最简单的方法是直接在你的 base.html 中添加 CDN，这将用于扩展，你也可以在独立/静态页面中添加它

[在此处阅读](https://www.bootstrapcdn.com/)引导 CDN 和集成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-20T18:43:45.847

如果您只是使用 pip 安装 twitter-bootstrap 会怎样：

按照说明进行操作：

[https://pypi.python.org/pypi/django-twitter-bootstrap/](https://pypi.python.org/pypi/django-twitter-bootstrap/)

对于简单的配置。

# javascript - JavaScript 回调的效率

> ID：10157063
> 
> 赞同：2
> 
> 时间：2012-04-14T20:19:58.583
> 
> 标签：javascript, node.js, scope, socket.io

我只是想证实我的怀疑。

我偶然发现了一篇文章，它建议以下列方式使用 Socket.io：

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8080);

// Some unrelated stuff

io.sockets.on('connection', function (socket) {
    socket.on('action1', function (data) {
        // logic for action1
    });

    socket.on('action2', function (data) {
        // logic for action2
    });

    socket.on('disconnect', function(){
        // logic for disconnect
    });
}); 
```

我觉得以下会更好地利用资源：

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8080);

// Some unrelated stuff

io.sockets.on('connection', function (socket) {
    socket.on('action1', action1);
    socket.on('action2', action2);
    socket.on('disconnect', disconnect);
});

function action1(data) {
    // logic for action1
}

function action2(data) {
    // logic for action2
}

function disconnect() {
    // logic for disconnect
} 
```

我的感觉是，虽然处理`connection`事件的匿名函数只在内存中创建一次，但处理`action1`,`action2`和的匿名函数是`disconnect`为每个套接字连接在内存中创建的。第二种方法的问题`socket`是不再在范围内。

那么首先，我对创建函数的怀疑是真的吗？其次，如果是这样，有没有办法进入`socket`命名函数的范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T20:38:28.637

使用闭包有助于保持范围清洁：

```
io.sockets.on('connection', function () {
    function action1(data) {
        // logic for action1
    }
    function action2(data) {
        // logic for action2
    }
    function disconnect() {
        // logic for disconnect
    }
    return function (socket) {
        socket.on('action1', action1);
        socket.on('action2', action2);
        socket.on('disconnect', disconnect);
    }
}()); // <- note the immediate function call 
```

对于您的问题：

> 那么首先，我对创建函数的怀疑是真的吗？

是的。上面的闭包方法可以防止这种情况，回调函数只创建一次。加：都看到正确的父范围。

> 其次，如果是这样，有没有办法进入`socket`命名函数的范围？

将在回调`socket`中可用。`this`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:30:05.283

你是对的，匿名方法是为每个连接创建的——如果你不需要范围，那么第二种方法确实可以避免这种情况。如果您需要套接字范围，则没有真正的方法可以避免它。如果您想将方法保留在外部（出于其他原因）并仍然保留范围，您可以始终：

```
//...
socket.on('action1', function(){
  action1.apply( socket, arguments );
} );
//... and so forth. 
```

但这让你回到为每个连接创建一个方法签名，所以我不确定你会得到什么。

# php - Youtube 频道嵌入尺寸

> ID：10157068
> 
> 赞同：3
> 
> 时间：2012-04-14T20:20:25.693
> 
> 标签：php, javascript, youtube, embed

![在此处输入图像描述](../Images/e5f0981d271b9c8ca6c99a21039249bb.png)好的，所以基本上我使用了以下 Youtube Chanel 嵌入代码：

```
<script src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/youtube.xml&amp;up_channel=tomdesigner777&amp;synd=open&amp;w=320&amp;h=390&amp;title=&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script> 
```

它嵌入了一个带有可怕蓝色背景的视频幻灯片的蓝色小盒子，但是我该如何让视频播放器稍微大一点并改变背景呢？......嵌入代码不允许我做任何事情。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:46:17.983

是否必须使用 Google 模块？在进行更改时，您不会获得太大的灵活性。

为什么不使用[YouTube API 的 JSON](https://developers.google.com/youtube/articles/view_youtube_jsonc_responses)响应？这样，您就可以完全灵活地通过 JavaScript 获取您想要的视频。

这是您想要的频道的 JSON 提要：[https ://gdata.youtube.com/feeds/api/users/tomdesigner777/uploads?v=2&alt=jsonc&max-results=5](https://gdata.youtube.com/feeds/api/users/tomdesigner777/uploads?v=2&alt=jsonc&max-results=5)

## 更新

这是您可以用来从 YouTube 用户上传频道获取视频的代码。目前，此代码在每次页面刷新时随机输出一个视频：

```
$(document).ready(function() {
    var randNumber = RandNo(1,5);

    $.ajax({
        type: "POST",
        url: "https://gdata.youtube.com/feeds/api/users/tomdesigner777/uploads?v=2&alt=jsonc&max-results=5",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        success: function(result) {
            var data = result.data;

            $("#yt").html("<iframe width='560' height='315' src='http://www.youtube.com/embed/" + data.items[randNumber].id + "' frameborder='0' allowfullscreen></iframe>");
        }
    });
});

function RandNo(min,max) {
     return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

完整的解决方案：http: [//jsfiddle.net/sbhomra/kCSsX/](http://jsfiddle.net/sbhomra/kCSsX/)

# directx - 在什么情况下 DirectX 不会在其句柄传递给 CreateDevice() 的窗口的子窗口上绘制？

> ID：10157075
> 
> 赞同：0
> 
> 时间：2012-04-14T20:21:14.547
> 
> 标签：directx, overlay, direct3d

DirectX 有一个有趣的行为，它在 Windows 实现 (DirectX 11) 和 Linux 下的 Wine 实现之间有所不同。

为了确定它是 Wine 实现还是程序中的错误，我想知道这种行为的确切*记录位置，*因为除了“它适用于 Windows”之外，我找不到任何东西。

**描述如下：**当使用 DirectX 在窗口上绘图时，似乎该窗口的任何可见子窗口都没有被覆盖。例如，这里是 DirectX SDK 示例中的 MeshViewer：

[http://imageshack.us/photo/my-images/264/unbenannt2nf3.jpg/](http://imageshack.us/photo/my-images/264/unbenannt2nf3.jpg/)

（主窗口的句柄作为`hDeviceWindow`中的当前参数传递`CreateDevice`。）工具栏和状态栏在 Windows 中是可见的，但在 Wine 下它们被 DirectX 表面遮挡：

[http://i.imgur.com/WP8rd.png](http://i.imgur.com/WP8rd.png)

我还在另一个使用工具栏的应用程序中观察到了这种行为，该工具栏创建了一个与窗口客户区大小相同的 DirectX 表面，并依靠 DirectX 来确定要绘制的区域。有趣的是，工具栏似乎*没有*在每一帧都绘制在 DirectX 表面上（我在工具栏的绘制处理程序中设置了一个断点），所以我的猜测是 DirectX 以某种方式计算出子窗口的位置并且没有首先在它们上面涂漆。

这是正确的，如果是，它在哪里记录？

# c# - 用数据填充 devpxress DXTreeList

> ID：10157081
> 
> 赞同：0
> 
> 时间：2012-04-14T20:22:12.703
> 
> 标签：c#, wpf, tree, devexpress

我有产品表和类别表。

我的类别有许多子类别。

产品连接到类别我如何显示类别的产品数据？

例如：

```
Cigarettes
  > Marlboro
     > Marlboro Light 5$
     > Marlboro Red 4.3$ 
```

例如`Marlboros`类别 ID 为 5

`Marlboro Light`并且`Marlboro Red`在产品表中 CategoryID = 5

请帮助我如何正确显示我的数据

这是我的类别课程

```
public class TreeData {
    internal int ID { private set; get; }
    internal string Header { private set; get; }
    internal int ParentID { private set; get; }
    internal TreeData(int id, string header, int parentId) {
        ID = id;
        Header = header;
        ParentID = parentId;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:17:10.993

您应该通过和属性绑定您的[TreeListView ：](http://help.devexpress.com/#WPF/clsDevExpressXpfGridTreeListViewtopic)`TreeListView.KeyFieldName``TreeListView.ParentFieldName`

```
<dxt:TreeListControl Name="treeList">
    <dxt:TreeListControl.Columns>
    <dxt:TreeListColumn FieldName="Header"/>
    </dxt:TreeListControl.Columns>
    <dxt:TreeListControl.View>
        <dxt:TreeListView Name="treeListView1" AutoWidth="True"
            KeyFieldName="ID" ParentFieldName="ParentID"/>
    </dxt:TreeListControl.View>
</dxt:TreeListControl> 
```

相关文档文章：[绑定到自引用数据结构](http://help.devexpress.com/#WPF/CustomDocument9571)

另请查看以下教程：

*   [第 1 课 - 绑定到数据](http://help.devexpress.com/WPF/CustomDocument9933.aspx)
*   [第 2 课 - 在未绑定模式下构建树](http://help.devexpress.com/WPF/CustomDocument9936.aspx)

# types - 如何动态地将任何 Java 对象转换为另一个？

> ID：10157082
> 
> 赞同：0
> 
> 时间：2012-04-14T20:22:14.313
> 
> 标签：types, type-conversion

我试图弄清楚是否有一种方法可以使用注释或 XML 配置将任何 Java 对象动态转换为另一个对象来定义映射。

我听说 Apache`PropertyUtils`提供了一种在 Java 对象之间来回复制数据的方法，并且类型转换由`ConvertUtils`我自己定制的转换器来处理。

例如：

```
class A { 
  long sellerId;
  long buyerId;
  String orderId;
  Date purchaseDate;

  //getter and setters
}

------------------------------------------------------------------------

class B {
  Integer payerId;  //mapped to buyerId
  Integer payeeId;  //mapped to sellerId
  String externalId //mapped to orderId 
  Calendar tranDate; //mapped to purchase Date

  //getter and setters
} 
```

请让我知道是否有一个开源组件可以使用反射、注释或 XML 配置提供动态 Java 类型转换？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:33:51.277

为什么使用 XML 或注解？可能更容易编写自己的函数，如下所示：

```
public B convertAtoB (A a)
{
B buf;
B buf = new B(); 
//Conversion routine goes here
buf.sellerId = a.sellerID; 
//etc
return buf;
} 
```

# streaming - 从 vlc 流式传输到 html5 视频

> ID：10157087
> 
> 赞同：1
> 
> 时间：2012-04-14T20:23:35.557
> 
> 标签：streaming, video-streaming, vlc, http-streaming

我希望 html5 视频标签打开一个 vlc 流，但我不知道这是否可能。

现在，我只是尝试使用 VLC 从网络上的另一台计算机播放文件。

服务器的设置如下：

```
me@kaffeesatz:~$ vlc screen:// --screen-left=67 --screen-top=53 --screen-width=800 --screen-height=600 --screen-fps=60 --sout '#transcode{vcodec=theovb=800,scale=1,width=800,height=600,acodec=none}:http{mux=ogg,dst=localhost:8181/graph.ogg}' --ttl=3 
```

当我在同一台机器上打开 http 流时，它工作正常。当我尝试从另一台计算机播放流时，麻烦就开始了。从 Chrome 中，我收到了消息

```
Oops! Google Chrome could not connect to 192.168.178.23:8181 
```

VLC 无法连接。

不知何故，流似乎并没有在 localhost 之外出现。

有谁可以帮忙吗？

编辑：根据之前的问题/答案，我实际上已经有了 dst=:8181 。将 ttl 设置为 20 并没有神奇地解决问题。

这是我遇到同样问题的命令：

```
me@kaffeesatz:~$ vlc screen:// --screen-left=67 --screen-top=53 --screen-width=800 --screen-height=600 --screen-fps=60 --sout '#transcode{vcodec=theovb=800,scale=1,width=800,height=600,acodec=none}:http{mux=ogg,dst=:8181/graph.ogg}' --ttl=20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T01:28:50.510

你应该试试 port :8080 ，就像你自己的电脑上 Chrome 并输入

```
127.0.0.1:8080/graph.ogg 
```

并为您的网络观看此视频，您可以看到非常好的图片。

我希望有所帮助；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T14:12:11.037

您在示例中指定侦听 localhost，“dst=localhost:8181”。这意味着您无法从计算机外部访问流。尝试将其更改为“dst=0.0.0.0:8181”或您的外部 IP 地址“dst=192.168.178.23:8181”。

# android - 拿起画廊图片

> ID：10157097
> 
> 赞同：0
> 
> 时间：2012-04-14T20:25:51.807
> 
> 标签：android, eclipse, image, image-gallery

嗨，我对 android 编程很陌生，这对某些人来说可能是一个简单的问题，但我对此很陌生。我想从一个意图打开画廊，但希望将挑选的图像显示在另一个意图上我使用了以下代码

```
public class GalActivity extends Activity {
    Context ctx;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imageView = (ImageView) findViewById(R.id.result);
    }

    private static final int REQUEST_CODE = 1;
    protected Bitmap bitmap;

    private ImageView imageView=null;

    /** Called when the activity is first created. */
    //  @Override

    public void pickImage(View View) {
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        startActivityForResult(intent, REQUEST_CODE);
    }

    // ctx=this;
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
            try {
                // We need to recyle unused bitmaps
                if (bitmap != null) {
                    bitmap.recycle();
                }
                InputStream stream = getContentResolver().openInputStream(
                        data.getData());
                bitmap = BitmapFactory.decodeStream(stream);
                stream.close();

                imageView.setImageBitmap(bitmap);

            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

如果要以相同的意图显示图像，则代码可以正常工作。但是如果它必须显示在另一个意图上，比如“activity2”，我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:49:58.930

由于 Bitmap 实现了 Parcelable 接口，您可以直接通过意图发送它，因此请在您的 onActivityResult 代码中执行以下操作：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
        try {
            // We need to recyle unused bitmaps
            if (bitmap != null) {
                bitmap.recycle();
            }
            InputStream stream = getContentResolver().openInputStream(
                    data.getData());
            bitmap = BitmapFactory.decodeStream(stream);
            stream.close();

          imageView.setImageBitmap(bitmap);

          Intent intent= new Intent(this, SecondActivity.class);
          intent.putExtra("BitmapImage", bitmap);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

并通过以下方式在另一个活动中读取此位图对象：

```
Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

# c# - 显示一条不计算搜索结果的消息？

> ID：10157101
> 
> 赞同：0
> 
> 时间：2012-04-14T20:26:56.743
> 
> 标签：c#, asp.net-mvc-3, razor

我正在尝试修改我在控制器上的搜索，以便它能够计算用户在搜索字符串中键入的匹配结果的数量。这样用户将搜索电影名称并且有 1 个匹配的电影一条消息说“1 部电影符合您的搜索条件：‘终结者’”。

**到目前为止，这是我的代码，我没有错误，它可以很好地搜索数据，但不计算结果的数量**。如果有人知道我需要做什么才能让搜索显示一条消息，那将非常有帮助。搜索工具有效，但我需要计算有多少与数据匹配并在没有结果或是否有结果以及有多少时显示一条消息。

谢谢

```
public ViewResult Index(string sortOrder, string searchString)
    {
        ViewBag.NamesSortParm = string.IsNullOrEmpty(sortOrder) ? "Name desc" : "";
        ViewBag.MoviesSortParm = sortOrder == "MovieID" ? "Name" : "Director";
        var Movies = from s in MoviesRepository.GetMovies ()
                    select s;
        if (!string.IsNullOrEmpty(searchString))
        {
            Movies = Movies.Where(s => s.Name.ToUpper().Contains(searchString.ToUpper())
                                   || s.Director.ToUpper().Contains(searchString.ToUpper()));
        int count = Movies.Count();
        if (count == 0)
        {
            ViewBag.Message = "No matches found";
        }
        else
        {
            ViewBag.Message = " Results";
        }  }
        switch (sortOrder)
        {
            case "Name":
                Movies = Shows.OrderByDescending(s => s.Name);
                break;
            case "Director":
                Movies = Movies.OrderByDescending(s => s.Director);
                break;
            default:
                Movies = Movies.OrderBy(s => s.Synopsis);
                break;
        }

        return View(Movies.ToList());

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:33:28.563

对我来说似乎是一个错字。替换这一行：

```
ViewBag.Message = " Results"; 
```

有了这个：

```
ViewBag.Message = count + " Results"; 
```

另外，请确保将 ViewBag.Message 放在 View 的某处：

```
<div> @ViewBag.Message </div> 
```

# c# - 如何在控制台应用程序中打开磁力链接？

> ID：10157102
> 
> 赞同：3
> 
> 时间：2012-04-14T20:26:56.797
> 
> 标签：c#, console-application, magnet-uri

WebClient 的 openread 似乎没有完成这项工作，我还能通过什么其他方式打开磁力链接？uTorrent 是默认处理程序，因此我需要“执行”链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T20:39:38.077

您应该可以使用`Process.Start`. 我知道这适用于 HTTP URL（在您的默认 Web 浏览器中启动它们），所以如果您的系统有`magnet`与 uTorrent 关联的 URL，那么这应该在 uTorrent 中启动 URL。

```
Process.Start("magnet:?xt=urn:sha1:YNCKHTQCWBTRNJIV4WNAE52SJUQCZO5C"); 
```

# c++ - 需要一个带有 O(1) 擦除的 std::vector

> ID：10157107
> 
> 赞同：2
> 
> 时间：2012-04-14T20:27:38.483
> 
> 标签：c++, inheritance, memory-leaks, composition, stdvector

我很惊讶在调用 erase 时发现了 vector::erase 移动元素。我认为它会将最后一个元素与“待删除”元素交换并将大小减小一。我的第一反应是：“让我们扩展 std::vector 并覆盖 erase()”。但是我在许多线程中发现，例如“[从 C++ STL 容器派生是否有任何真正的风险？](https://stackoverflow.com/questions/922248/is-there-any-real-risk-to-deriving-from-the-c-stl-containers) ”，它可能导致内存泄漏。但是，我没有向向量添加任何新的数据成员。所以没有额外的内存可以释放。是否还有风险？

有人建议我们应该更喜欢组合而不是继承。在这种情况下，我无法理解这个建议。为什么我要把时间浪费在包装原本很棒的 std::vector 类的每个函数的“机械”任务上？继承确实对这项任务最有意义——或者我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T20:35:19.877

为什么不写一个独立的函数来做你想做的事：

```
template<typename T>
void fast_erase(std::vector<T>& v, size_t i)
{
   v[i] = std::move(v.back());
   v.pop_back(); 
} 
```

不过，这一切都归功于塞思·卡内基。我最初使用“std::swap”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T20:39:00.390

微妙的问题。您要打破的第一条准则是：“[继承不是为了代码重用](http://www.parashift.com/c++-faq-lite/smalltalk.html#faq-30.4)”。第二个是：“不要从标准库容器继承”。

但是：如果你能保证，没有人会把你`unordered_vector<T>`当作`vector<T>`你的好人。但是，如果有人这样做，结果可能是未定义的和/或可怕的，无论您有多少成员（它可能看起来很完美，但仍然是*未定义的行为*！）。

您可以使用`private`继承，但这不会使您免于编写包装器或使用*大量*语句提取成员函数，`using`这几乎与组合一样多的代码（尽管少一点）。

* * *

编辑：我对`using`陈述的意思是：

```
class Base {
  public:
    void dosmth();
};

class Derived : private Base {
  public:
    using Base::dosmth;
};

class Composed {
  private:
    Base base;
  public:
    void dosmth() {return base.dosmth(); }
}; 
```

您可以使用`std::vector`. 如您所见`Derived`，代码明显少于`Composed`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T20:32:26.897

继承的风险在以下示例中：

```
std::vector<something> *v = new better_vector<something>();
delete v; 
```

这会导致问题，因为您删除了指向没有虚拟析构函数的基类的指针。
但是，如果您总是删除指向您的类的指针，例如：

```
better_vector<something> *v = new better_vector<something>();
delete v; 
```

或者不要在堆上分配它没有危险。只是不要忘记在你的析构函数中调用父析构函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T20:52:19.023

> 我认为它会将最后一个元素与“待删除”元素交换并将大小减小一。

vector::erase 保持元素的顺序，同时将最后一个元素移动到已擦除的元素，并且不会将大小减小一。由于 vector 实现了数组，因此没有 O(1) 方法来保持元素的顺序并同时擦除（除非您删除最后一个元素）。

如果维护元素的顺序并不重要，那么您的解决方案就可以了，否则，您最好使用其他容器（例如**list**，它实现了双向链表）。

# java - Java 正则表达式中的匹配字符

> ID：10157112
> 
> 赞同：3
> 
> 时间：2012-04-14T20:30:11.487
> 
> 标签：java, regex

我想提取一些没有星号的数字，这里是例子：

```
1
0
0*1543
27 123*5464
11 1007*
998*7586
13
997*686 
```

我已经尝试过使用这个正则表达式和其他一些，但它们都没有奏效：

```
(\d+)[^\*] 
```

我正在寻找的是获取所有数字，除非它们后面跟着一个星号。以下是输出的样子：

```
1
0
27
11
13 
```

我的计划是编写正则表达式并使用组来提取这些值。我正在使用[这个网站](http://gskinner.com/RegExr/)来测试我的正则表达式。

更新：我不是在寻找匹配 * 之后的数字，这意味着我只想要行首的数字。谢谢

**更新二：**

Aftert 进一步深入研究正则表达式给出的匹配项（来自 Dr.Kameleon）

```
(?<!\*)(?<![0-9])([0-9]+(?!\*)(?![0-9])) 
```

我得到一个额外的匹配，因为它可以在这里看到：

[http://regexr.com?30l69](http://regexr.com?30l69)

我不想`505`在`222*123 505`. 所有其他比赛都完美匹配。

看起来这个正则表达式需要小调整，但我无法调整它，即`(?<!\*)(?<![0-9])(?<!\\s)([0-9]+(?!\*)(?![0-9]))`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T20:35:01.427

**试试这个：（**演示：[http](http://regexr.com?30l47) ://regexr.com?30l47 ）

```
([0-9]+(?!\*)(?![0-9])) 
```

**或者这个**（如果你只想要第一部分，如你的例子） - [http://regexr.com?30l4a](http://regexr.com?30l4a) **：**

```
(?<!\*)(?<![0-9])([0-9]+(?!\*)(?![0-9])) 
```

# html - 标题和页列表博主之间的距离

> ID：10157116
> 
> 赞同：1
> 
> 时间：2012-04-14T20:30:53.247
> 
> 标签：html, css

我在博客上定位标题和页面列表时遇到问题。我希望标题和页面列表之间的距离更大，所以我尝试在标题包装器中添加高度，但徒劳无功。我试图玩利润，但我失败了。请帮忙。这是代码：

[http://alittlegirlfromparis.blogspot.com/](http://alittlegirlfromparis.blogspot.com/)

```
 /* Header
-----------------------------------------------
*/
#header-wrapper {
height: 343px;
    margin: auto;
    padding: 0;
    width: 1100px;
}
#header-inner {
float: left;
    padding-left: 15px;

}
#header {
height:400px;
width: 1100px; 
text-align: center;
color:#553b14;
text-shadow:1px 1px 1px #ccc;
}
#header h1 {
padding:25px 10px 10px 0px;
line-height:1.2em;
text-transform:uppercase;
letter-spacing:0em;
font: normal normal 30px 'Josefin Sans';
display:none; 
}
#header a {
color:#553b14;
text-decoration:none;
}
#header a:hover {
color:#553b14;
}
#header .description {
padding:0px 10px 0px 0px;
text-transform:normal;
line-height: 1.4em;
font: normal 12px 'Josefin Sans';
color:#553b14;
}
#header img {
margin-left: auto;
margin-right: auto;
}

/* Nav
-----------------------------------------------
*/
#garis {
position: absolute;
top: 0px;
width: 1100px;
}

#PageList1 {
position: fixed;
list-style-type:none; 
float:left;
width: 1100px;  
font-size:14px;
background:#fff;
}
.PageList li a {
float: none; 
color:#000;
text-decoration: none;
text-align:center;
font:16px 'Calibri'; 
}
.PageList li a:hover{
color:#b3afaf;
text-decoration:none;
}
.crosscol .PageList li, .footer .PageList li {
float:left;
list-style:none outside none;
}
.PageList li.selected a {
color:#000;
}

.PageList li.selected a:hover { 
color:#b3afaf;
}

/* Outer-Wrapper
----------------------------------------------- */
#outer-wrapper {
background:#ffffff url(http://i56.tinypic.com/dnygs1.jpg) no-repeat top;
margin: auto;
width: 1100px; 
text-align:left;
font: normal normal 100% Georgia, Serif;
box-shadow:0 1px 6px #000;
border-top:30px solid #000;
}
#content-wrapper {
padding-top:10px;
padding-left:10px;
padding-right:5px;
}
#main-wrapper {
float:left;
width: 800px; 
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;     /* fix for long non-text content breaking IE sidebar float */
padding:5px;
border-right: 1px dashed #CCCCCC;
}
#sidebar-wrapper {
width: 250px;
float: right;
word-wrap: break-word; /* fix for long text breaking sidebar float in IE */
overflow: hidden;      /* fix for long non-text content breaking IE sidebar float */
}
/* Headings
----------------------------------------------- */
h2 {
margin:1.5em 0 .75em;
font: 25px 'Trebuchet MS',Trebuchet,Arial,Verdana,Sans-serif;
line-height: 1.4em;
text-transform:normal;
letter-spacing:0em;
color:#999999;
}
/* Posts
-----------------------------------------------
*/
h2.date-header {
margin:0em 0 .75em;
font: italic 100% 'Georgia',Trebuchet,Arial,Verdana,Sans-serif;
line-height: 1.4em;
text-transform:noone;
letter-spacing:0em;
color:#999999;
}
.post {
border-bottom: 1px solid #CCCCCC;
}
.post a{
color: #666666;
text-decoration:none;
}
.post a:hover{
color: #666666;
text-decoration:none;
}
.post h1 {
padding:20px 0px 0px 5px;
font-size:20px;
font-weight:normal;
line-height:1.4em;
color:#000000;
}
.post h1 a, .post h1 a:visited, .post h1 strong {
display:block;
text-decoration:none;
color:#000000;
font-weight:normal;
}
.post h1 strong, .post h1 a:hover {
color:#8f8c97;
}
.post-body {
margin:1em 0 1em 0;
line-height:1.6em;
}
.post ul {
margin: 5px 0px 5px 20px;
padding: 0px 0px 0px 0px;
} 
.post ol {
margin: 5px 0px 5px 20px;
padding: 0px 0px 0px 0px;
}
.post ol li {
margin: 5px 0px 5px 10px;
padding: 0px;
}
.post-body blockquote {
line-height:1.3em;
padding-left:32px;
padding-right:10px;
padding-top:5px;
font-size:18px;
font-family:Georgia, Serif;
font-style:italic;
color:#333;
}
.post-footer {
padding-top:10px;
margin:0;
color:#8f8c97;
text-transform:normal;
letter-spacing:0em;
font: italic 100% 'Georgia', Trebuchet, Arial, Verdana, Sans-serif;
line-height: 1.4em;
display: block;
}
.post-footer a{
color: #000;
text-decoration:none;
}
.post-footer a:hover{
color: #000;
text-decoration:underline;
}
.atas { border-top: 1px dashed #8f8c97;
    color: #8f8c97;
    display: block;
    font: italic 100%/1.4em 'Georgia',Trebuchet,Arial,Verdana,Sans-serif;
    letter-spacing: 0;
    margin: 10px 0 0;
    padding: 3px;
}
.atas a{
color: #382e2a;
text-decoration:none;
}
.atas a:hover{
color: #382e2a;
text-decoration:underline;
}
.comment-link {
float: right;
margin-left:.6em;
padding-left: 20px;
background: url(http://2.bp.blogspot.com/-u3jiNrwSNbw/Tg_NI-7myPI/AAAAAAAAA3A/ALpTb3CCdSw/s000/cm.gif) no-repeat;
margin-left:.6em;
}
.post img {
background:#fff;
padding:2px;
border:1px solid #cccccc;
}
.post blockquote {
margin:1em 5px;
}
.post blockquote p {
margin:.75em 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:11:29.480

你能更具体地说明你试图改变什么吗？#sidebar-wrapper 和#main-wrapper 是独立的部分，#header-wrapper 也是如此。要重新定位其中任何一个，只需在适当的方向（顶部、底部、边距、填充、高度）上调整元素。要在标题和两个元素之间添加空格，向 #header-wrapper 添加高度就可以了。要向下移动侧边菜单，请将 margin-top 添加到 #sidebar-wrapper（或 padding-top）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:22:12.203

1.  你可以在你的CSS中增加`padding-top`。`#content-wrapper`这将使标题图像下方的所有内容在布局中下降。
2.  您可以添加`padding-top`到`#sidebar-wrapper`您的 CSS。这将使正确的菜单仅在布局中向下移动。

# ios - NSFetchRequest 无法获取上下文中存在的实体

> ID：10157118
> 
> 赞同：0
> 
> 时间：2012-04-14T20:31:25.260
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

我在上下文中插入实体 A 时遇到问题。在我插入所有实体之后，AI 在上下文中执行一个获取请求：

```
NSEntityDescription* entity = [NSEntityDescription entityForName:@"A" inManagedObjectContext:ctx];
NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:entity];
NSError* fetchError;
NSArray* results = [ctx executeFetchRequest:fetchRequest error:&fetchError]; 
```

上面的代码能够获取所有这些，我可以在 NSLog 中看到它们......

在同一上下文之后，我尝试获取所有年龄 = 5 的实体 A，如下所示：（我将“age”分配给 attirbute 并将 NSString @“5”分配给该值）

```
NSEntityDescription* entity = [NSEntityDescription entityForName:@"A" inManagedObjectContext:ctx];
NSFetchRequest* fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setEntity:entity];
NSPredicate *filter = [NSPredicate predicateWithFormat:@"%K == %@",attr,value];
[fetchRequest setPredicate:filter];
NSError* fetchError;
NSArray* results = [ctx executeFetchRequest:fetchRequest error:&fetchError]; 
```

问题是，即使 NSLog 显示了一个年龄为 5 岁的实体 A，这个最后的 fetch 请求总是返回 null！没有。

有什么建议么？为什么在同一上下文中获取所有这些显示年龄为 5 的实体并仅过滤年龄为 5 的实体不起作用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:48:36.333

尝试将年龄设置为初始化为 5 的 NSNumber 实例，而不是 NSString @"5"。

# mysql - 如何找出导致应用程序变慢的原因？

> ID：10157119
> 
> 赞同：3
> 
> 时间：2012-04-14T20:31:37.730
> 
> 标签：mysql, performance, apache2

这不是典型的问题，但我没有想法，不知道还能去哪里。如果有更好的地方可以问这个问题，请在评论中指出我。谢谢。

* * *

## 情况

我们有这个使用**Zend 框架**的 Web 应用程序，因此在**Apache Web 服务器**上以**PHP**运行。我们使用**MySQL**进行数据存储，使用**memcached**进行对象缓存。

 ******该应用程序具有非常独特的用法和加载模式。它是一个移动 Web 应用程序，每一个完整小时，一个 cronjob 都会在数据库中查找有一些信息等待或操作要做的用户，并将这些信息发送到（外部）通知服务器，然后将这些通知推送给他们。用户收到这些通知后，会转到应用程序并使用它，主要是在很短的时间内。一个小时后，同样的事情发生了。

## 问题

在过去的几周里，该应用程序的使用量真正开始增长。在过去的几天里，我们**在发送这些通知期间和之后**遇到了非常高的负载和两倍的应用程序响应时间（基本上是每小时一次）。服务器不会崩溃或停止响应请求，它只是变得越来越慢，并且通常需要 20 分钟才能恢复 - 直到整整一个小时再次开始相同的事情。

我们进行了广泛的监控（New Relic，collectd），但我不知道出了什么问题；我找不到瓶颈。这就是你进来的地方：

**您能帮我找出问题所在以及如何解决吗？**

* * *

## 附加信息

该服务器是 16 核 Intel Xeon（我认为是 8 核超线程）和 12GB RAM，运行 Ubuntu 10.04（Linux 3.2.4-20120307 x86_64）。Apache 是 2.2.x，PHP 是版本 5.3.2-1ubuntu4.11。

如果任何配置信息有助于分析问题，只需评论，我会添加它。

## 图表

### 信息

*   [phpinfo()](http://i.imgur.com/9Jh5l.gif)
*   [apc 状态](http://i.imgur.com/nhJAU.gif)
*   [内存缓存状态](http://i.imgur.com/IS27x.gif)

### 收集

*   [流程](http://i.imgur.com/u6TiX.gif)
*   [中央处理器](http://i.imgur.com/ZhtFI.gif)
*   [阿帕奇](http://i.imgur.com/rt5IU.gif)
*   [加载](http://i.imgur.com/R3zdb.gif)
*   [MySQL](http://i.imgur.com/pbI4e.gif)
*   [虚拟机](http://i.imgur.com/Hnoct.gif)
*   [磁盘](http://i.imgur.com/6jURK.gif)

### 新遗物

*   **[应用性能](http://i.imgur.com/sAVaf.gif)**
*   [服务器概述](http://i.imgur.com/bEKsW.gif)
*   [流程](http://i.imgur.com/ML2ts.gif)
*   [网络](http://i.imgur.com/dxU7d.gif)
*   [磁盘](http://i.imgur.com/pFlmj.gif)

（抱歉，这些图表是 gif 图像，而不是同一时间段，但我认为最重要的信息在其中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:41:23.317

这个问题几乎可以肯定是基于 MySQL 的。如果您查看最终图表 mysql/mysql_threads，您可以看到线程数在 20:00 达到 200（我假设这是您对 max_connections 的设置）。一旦 max_connections 被击中，事情往往需要一段时间才能恢复。

在一小时前使用[mtop](http://jeremy.zawodny.com/mysql/mytop/)监控 MySQL 确实可以帮助您弄清楚发生了什么，但如果您无法安装它，您可以使用`SHOW PROCESSLIST;`. 在问题发生之前，您需要建立与 mysql 的连接。您可能会看到许多进程排队，当前只有 1 个进程正在执行。这将是最有可能的罪魁祸首。

确定导致问题的查询后，您可以攻击您的代码。如果不了解您的应用程序实际上是如何工作的，我最好的猜测是围绕问题查询使用显式事务可能会解决问题。

祝你好运！******

# c++ - 在堆栈/堆上创建对象？

> ID：10157122
> 
> 赞同：65
> 
> 时间：2012-04-14T20:31:47.263
> 
> 标签：c++, initialization, heap-memory, stack-memory

以下代码在堆栈上创建一个对象：

```
Object o; 
```

在堆上创建对象时，我们可以使用：

```
Object* o;

o = new Object(); 
```

而不是：

```
Object* o = new Object(); 
```

当我们将堆对象创建分成两行并在第二行（`o = new object()`）调用构造函数时，这是否意味着在第一行（`Object* o`）中指针是在堆栈上创建的？那么`Object o`将对象放在堆栈上，而`Object* o`将指向未来对象的指针放在堆栈上？

我的第二个问题涉及这两行代码是否在类之外调用。我最近读到（[堆栈或堆中的 C 中的全局内存管理？](https://stackoverflow.com/questions/1169858/global-memory-management-in-c-in-stack-or-heap)）全局变量不包含在堆栈/堆中，但实际上是内存的另一部分？如果是这种情况，是否会`Object* o`创建一个指针，该指针将位于内存的另一部分并指向堆对象？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-04-14T20:42:59.457

实际上，这两个语句都没有提到堆或堆栈。编码

```
Object o; 
```

根据其上下文创建以下内容之一：

*   具有自动存储功能的局部变量，
*   命名空间或文件范围内的静态变量，
*   指定另一个对象的子对象的成员变量。

这意味着存储位置由定义对象的上下文确定。此外，C++ 标准没有讨论堆栈*与*堆存储。相反，它谈论[存储持续时间](https://en.cppreference.com/w/cpp/language/storage_duration#Storage_duration)，它可以是*自动*的、*动态*的、*静态*的或*线程本地的*。然而，大多数实现通过调用栈实现自动存储，通过堆实现动态存储。

因此，在堆栈上创建了具有自动存储功能的局部变量。静态（和线程本地）对象通常分配在它们自己的内存区域中，既不在堆栈上，也不在堆上。并且在分配它们所属的对象的任何地方分配成员变量。它们有其包含对象的存储期限。

用一个例子来说明这一点：

```
struct Foo {
    Object o;
};

Foo foo;

int main() {
    Foo f;
    Foo* p = new Foo;
    Foo* pf = &f;
} 
```

现在对象`Foo::o`（即`o`class 对象的子对象`Foo`）在哪里创建？这取决于：

*   `foo.o`具有静态存储，因为`foo`具有静态存储，因此既不在堆栈上也不在堆上。
*   `f.o`具有自动存储，因为`f`具有自动存储（= 它存在于堆栈中）。
*   `p->o`具有动态存储，因为`*p`具有动态存储（=它位于堆上）。
*   `pf->o`是同一个对象，`f.o`因为`pf`指向`f`。

其实`p`和`pf`上面都有自动存储。指针的存储与任何其他对象的存储没有区别，它由上下文决定。此外，初始化表达式对指针存储没有影响。

*指针*（=指针指向的内容）是完全不同的事情，可以指任何类型的存储：`*p`是动态的，而是`*pf`自动的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-11-06T10:11:06.650

C++ 提供了三种不同的方法来创建对象：

1.  基于堆栈的，例如临时对象
2.  使用*新的基于堆的*
3.  静态内存分配，例如全局变量和命名空间范围对象

考虑你的情况，

```
Object* o;
o = new Object(); 
```

和：

```
Object* o = new Object(); 
```

两种形式都是一样的。这意味着在堆栈上创建了一个指针变量 o（假设您的变量不属于上面的 3 类），它指向包含该对象的堆中的内存。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-24T21:29:57.177

C++ 有自动变量 - 而不是堆栈变量。

自动变量意味着 C++ 编译器自己处理内存分配/释放。C++ 可以自动处理任何类的对象——无论它是否具有动态分配的成员。这是通过 C++ 的强大保证来实现的，即当执行超出声明自动变量的范围时，将自动调用对象的析构函数。C++ 对象内部可以有很多`new`在构造函数中的动态分配，当这样的对象被声明为自动变量时 - 所有动态分配都将被执行，然后在析构函数中释放。

C 中的堆栈变量不能动态分配。C 中的堆栈可以存储指针、固定数组或结构——所有这些都是固定大小的，这些东西在内存中以线性顺序分配。当 C 程序释放堆栈变量时 - 它只是将堆栈指针移回，仅此而已。

即使 C++ 程序可以使用堆栈内存段来存储原始类型、函数的 args 或其他 - 这一切都是由 C++ 编译器决定的，而不是由程序开发人员决定的。因此，将 C++ 自动变量和 C 堆栈变量相等在概念上是错误的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-14T20:36:44.513

这两种形式是相同的，但有一个例外：临时，`(Object *)`当创建和赋值分开时，new 具有未定义的值。编译器可能会将它们组合在一起，因为未定义的指针并不是特别有用。这与全局变量无关（除非声明是全局的，在这种情况下，这两种形式仍然适用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T20:42:29.387

在您的两个示例中，`Object*`类型的局部变量都分配在堆栈上。如果您的程序无法检测到差异，编译器可以自由地从两个片段中生成相同的代码。

全局变量的内存区域与静态变量的内存区域相同——它既不在堆栈上，也不在堆上。您可以通过`static`在函数中声明变量来将变量放置在该区域中。这样做的结果是实例在函数的并发调用之间*共享*，因此在使用静态时需要仔细考虑同步。

这是一个讨论正在运行的 C 程序的内存布局的[链接。](http://www.geeksforgeeks.org/archives/14268)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-15T12:59:54.647

一种）

```
Object* o;
o = new Object(); 
```

`` B）

```
Object* o = new Object(); 
```

我认为A和B没有区别。在这两种情况下，o 都是指向 Object 类的指针。语句 new Object() 从堆内存中创建一个 Object 类的对象。赋值语句将分配的内存地址分配给指针o。

我想提一提的是，从堆中分配的内存大小始终是 sizeof(Object) 而不是 sizeof(Object) + sizeof(void *)。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-07-25T21:42:42.150

1.  对象* o; o = 新对象（）；

2.  对象* o = 新对象（）；

这两个语句都在堆内存中创建对象，因为您使用“new”创建对象。

为了能够在堆栈中创建对象，您需要遵循以下步骤：

```
Object o;
Object *p = &o; 
```

# java - Java - 在 GUI 中构建从输入到输出的数据流

> ID：10157129
> 
> 赞同：1
> 
> 时间：2012-04-14T20:32:59.493
> 
> 标签：java, event-handling, structure

我正在用几个面板组合一个 GUI。在一个面板中，有供用户输入各种参数的组件。在另一个面板中，有一些按钮和一个位置，可以根据使用用户输入生成的数据输出绘图。

我现在让所有不同的部分独立工作，我只想让他们互相交谈！

当我点击一个按钮时，我想获取所有用户输入并将它们组合起来以生成数据集并绘制它。然后另一个按钮将相同的数据写入文件。

我有单独实现所有组件的代码，将数据写入文件的代码和从数据生成绘图的代码。所有这些都工作正常。

我认为我可以使用 Action/ChangeEvents 来获取参数并将它们分配给 ArrayList。然后使用这个数组列表来生成数据。
我发现很难计划解决这个问题的方法。

目前，我在事件处理程序中使用 get set 方法为数组列表的特定实例设置参数级别，我想将此实例传递给另一个类以生成数据，但不知道如何使其可访问。

我希望我在这里提供了足够的信息。如果有人对此有任何想法，他们将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T22:16:01.680

我认为解决您的问题的结构化方法是应用 MVC 模式。这是我认为有关使用 Java 的模型-视图-控制器 (MVC) 的开创性文章。

[使用 MVC 设计 Java SE 应用程序](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html)，作者 Robert Eckstein，

这是[另一个示例代码](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)。

至于从一个面板获取参数并将它们传递给另一个面板，您可以使用命令模式。该模式所做的基本上是将方法执行所需的所有信息（类的实例、参数等）封装到一个命令中。然后可以在应用程序中传递此命令，从而简化您执行该方法的方式。

顺便说一句，我真正喜欢的一本关于设计模式的好书是[Head First Design Pattern](http://shop.oreilly.com/product/9780596007126.do)。

编辑：我只想添加一些讨论 MVC 和其他一些我认为有用的 GUI 架构的链接：

*   [Martin Fowler 的 GUI 架构](http://martinfowler.com/eaaDev/uiArchs.html)
*   [构建您自己的复合应用程序块系列：UI 架构、模式和 WinForm 示例](http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents)
*   [MVVM vs MVP vs MVC：差异](http://joel.inpointform.net/software-development/mvvm-vs-mvp-vs-mvc-the-differences-explained)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:11:16.667

这似乎是 MVC 模式应用的一个很好的案例： [http ://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

另一个很好的资源是本书的第二章： [http ://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612/ref=sr_1_1?ie=UTF8&qid=1334437965&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/0201633612)

# xslt - xsl：模板匹配属性：与默认命名空间的关系如何

> ID：10157130
> 
> 赞同：3
> 
> 时间：2012-04-14T20:33:00.050
> 
> 标签：xslt, xpath, namespaces

当根元素具有默认命名空间属性而不是没有默认命名空间属性时，我遇到了 xslt 行为的特殊差异。
我想知道为什么会出现这种差异。

XML 输入是

```
<root>
    <content>xxx</content>
</root> 
```

应用以下变换时

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>

    <xsl:template match="content">
        <w>x</w>
    </xsl:template>

</xsl:stylesheet> 
```

结果是预期的

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <w>x</w>
</root> 
```

但是当同样的变换应用于

```
<root xmlns="http://test.com">
    <content>xxx</content>
</root> 
```

结果是不同的，并且仅基于默认模板的应用（有效地输出文本节点值'xxx'）：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>xxx</root> 
```

**添加**

如果这是这种情况下的预期行为，那么需要什么 match 属性值来匹配`content`第二种情况下的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T21:21:02.200

**这是 XPath/XSLT 中最常见的问题**。

XPath 将无前缀的元素名称视为属于“无命名空间”。

**[W3C Xpath](http://www.w3.org/TR/1999/REC-xpath-19991116/#node-tests)**规范**说****：**

> 如果 QName 没有前缀，则命名空间 URI 为空。

因此，在具有默认命名空间的文档中，对具有无前缀名称（例如“someName”）的元素的引用不会选择任何内容，因为 XML 文档中的“无命名空间”中没有任何元素，而是`someName`意味着具有名称“ someName”，属于“无命名空间”。

**解决方案**：

如果我们想按名称选择一个元素，我们必须为该名称添加前缀，并且该前缀必须与默认命名空间相关联。

**这种转变**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:x="http://test.com" exclude-result-prefixes="x">
        <xsl:output omit-xml-declaration="yes" indent="yes"/>
        <xsl:strip-space elements="*"/>

        <xsl:template match="/">
            <root>
                <xsl:apply-templates/>
            </root>
        </xsl:template>

        <xsl:template match="x:content">
            <w>x</w>
        </xsl:template>
</xsl:stylesheet> 
```

**当应用于具有默认命名空间的提供的 XML 文档时：**

```
<root xmlns="http://test.com">
    <content>xxx</content>
</root> 
```

**产生想要的正确结果**：

```
<root>
   <w>x</w>
</root> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:04:42.433

那么你的问题到底是什么？如果您只是在寻找解释，以下是一个简短的解释。您正在观察的是根据规范的正确行为。当您将命名空间放在某物上时，解析器本质上将其视为完全不同的元素（而不是同名但没有命名空间的元素）。因此，在第二种情况下，当您说 时`<xsl:template match="content">`，它与 XML 文件中的元素不匹配，`<content>`因为它属于`http://test.com`名称空间（通过其父项上的名称空间声明）。因此，默认模板接管。

# networking - 通过具有相同路由策略的两个 AS 进行内部 BGP 路由

> ID：10157131
> 
> 赞同：0
> 
> 时间：2012-04-14T20:33:02.567
> 
> 标签：networking, routing, network-protocols

![在此处输入图像描述](../Images/2520717c4809bf1bcdf88ec2b2bbd717.png)

在这个问题中，我可以很容易地看到为什么 a 和 c 使用 eBGP。但是，为什么 b 和 d iBGP 分别代替了 OSPF 和 RIP？

谢谢

编辑：这是 Kurose 和 Ross 的计算机网络摘录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:59:21.237

[这](http://www.enterprisenetworkingplanet.com/netsp/article.php/3617346/Networking-101--Understanding-iBGP.htm)应该回答你所有的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T15:10:20.423

这是一个可怕的例子，因为它没有详细说明哪些节点实际上在说 iBGP（也没有“为什么”），但是 b 和 d 从 iBGP 获取信息的原因是因为前缀没有方法使其进入 IGP . 如果您将 EBGP 通话节点配置为将 eBGP 学习的路由重新分配到它们各自的 IGP（分别为 OSPF 和 RIP），这可能很容易改变

# php - 包含文件的 NetBeans 自动完成功能不起作用？

> ID：10157133
> 
> 赞同：12
> 
> 时间：2012-04-14T20:33:03.783
> 
> 标签：php, netbeans, autocomplete

我有一个名为 config.php 的文件，我还有其他文件包括 config.php。编辑其中一个文件时，我使用 config.php 中的一个对象，它会自动完成对象的名称。但是，当我尝试查看该对象的函数或变量（使用 ->）时，没有自动完成功能。有什么办法让它工作吗？

注意：我已经在对象定义之前将 /* @var $myObject myType */ 添加到 config.php 中。我是否必须将该行添加到包含 config.php 的每个文件中？这似乎不对。

编辑：添加了示例。

目录;

*   配置文件
*   索引.php
*   lib/test.class.php

配置.php；

```
<?php
define('ABSPATH', dirname(__FILE__));
include_once ABSPATH.'/lib/test.class.php';

/* @var $TestObj test */
$TestObj = new test();

// auto complete works here.
$TestObj->someFunction();
?> 
```

索引.php；

```
<?php
include_once 'config.php';

// here, auto completes object name
// not lists functions or variables after ->
$TestObj->someFunction();
?> 
```

库/test.class.php；

```
<?php
class test {
    public $var1;

    public function someFunction() {
        echo 'I am some function.';
        return 0;
    }
}
?> 
```

当我将 /* @var $TestObj test */ 添加到 index.php 时它正在工作，但是我会有很多这样的文件，并且必须有比将该行添加到所有文件中更好的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T09:29:51.527

确保项目的所有文件都在项目的包含路径中（右键单击项目-> 属性-> 包含路径）。通常只有您在 NetBeans 设置中配置的“全局包含路径”（例如指向您的 PEAR 目录）。将包含您想要自动完成的源代码的所有目录添加到此包含路径。提示：这个包含路径与 PHP 本身使用的 include_path 无关。

也不要在cient代码中使用提示：

```
/* @var $TestObj test */
$TestObj->... 
```

您应该为来源提供更多 apidoc，例如：

```
<?php
class test {
    /**
     * @var SomeClass
     */
    public $var1;

    /**
     * @return int
     */
    public function someFunction() {
        echo 'I am some function.';
        return 0;
    }
} 
```

由于 PHP 的动态特性，IDE 依靠此信息提供正确的提示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-04T19:36:51.400

转到工具->选项->单击顶部的PHP图标->常规选项卡->找到“全局包含路径”->添加文件夹->

if(onLinux) { 选择 /var/www; } if(onWindows) { 选择 c:\path_to_htdocs 或其他；}

啊，今天的编程太多了.. :)

对我来说，这修复了自动完成和 ctrl+单击方法调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T18:43:47.187

从 netbeans 转到`tools->options` 转到编辑器选择，然后从代码完成中选择 php 作为语言部分。这将展开菜单，您将看到一个部分`Code Completion for Class Methods`

通过选择该部分上的复选框来设置该配置。 ![在此处输入图像描述](../Images/48575dcc4ed2ca1b9529c21f05281848.png)

我希望我理解正确。我也使用 netbeans，我可以在更改 netbeans 设置后自动完成。

# groovy - Gradle 不会运行，java.lang.NoClassDefFoundError: groovy/lang/GroovyObject

> ID：10157139
> 
> 赞同：2
> 
> 时间：2012-04-14T20:33:36.903
> 
> 标签：groovy, gradle

我正在尝试使用 Gradle 进行基本构建。甚至`gradle -v`因以下原因失败：

```
$ gradle -v

FAILURE: Build aborted because of an internal error.

* What went wrong:
Build aborted because of an unexpected internal error. Please file an issue at: http://www.gradle.org.

* Try:
Run with --debug option to get additional debug info.

* Exception is:
java.lang.NoClassDefFoundError: groovy/lang/GroovySystem
    at org.gradle.util.GradleVersion.prettyPrint(GradleVersion.java:183)
    at org.gradle.launcher.CommandLineActionFactory$ShowVersionAction.run(CommandLineActionFactory.java:181)
    at org.gradle.launcher.CommandLineActionFactory$ActionAdapter.execute(CommandLineActionFactory.java:199)
    at org.gradle.launcher.CommandLineActionFactory$ActionAdapter.execute(CommandLineActionFactory.java:191)
(stacktrace snipped)
at org.gradle.launcher.ProcessBootstrap.run(ProcessBootstrap.java:28)
at org.gradle.launcher.GradleMain.main(GradleMain.java:24)
Caused by: java.lang.ClassNotFoundException: groovy.lang.GroovySystem
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 17 more 
```

所以，我想“啊哈，我的类路径是空的。让我添加 groovy”。

```
$ export CLASSPATH=/usr/share/gradle/lib/groovy-all.jar && echo $CLASSPATH
/usr/share/gradle/lib/groovy-all.jar 
```

没有不同。

对于它的价值，这里是 build.gradle：

```
apply plugin: 'eclipse'
apply plugin: 'groovy'

repositories {
    mavenCentral()
}

dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '1.7.10'
    testCompile group: 'junit', name: 'junit', version: '4.8.2'
} 
```

我发现的唯一相关的 stackoverflow 问题是[this](https://stackoverflow.com/questions/9749032/create-a-groovy-executable-jar-with-gradle)，而 google 也好不到哪里去。

[gradle](http://gradle.org/docs/current/userguide/installation.html)的安装文档说“Gradle 带有自己的 Groovy 库，因此不需要安装 Groovy。” 这意味着类路径是不必要的。那为什么我不能运行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:08:06.880

听起来像是损坏的 Gradle 安装。也许您没有调用`gradle`您认为的脚本。

# iphone - Xcode IOS 使用 SSID 和密码连接到特定的无线网络

> ID：10157140
> 
> 赞同：3
> 
> 时间：2012-04-14T20:33:50.330
> 
> 标签：iphone, ios5, xcode4, wifi, ssid

我目前正在创建一个必须与 wi-fi 路由器配合使用的 iPhone 应用程序（Xcode 4.3.1、IOS 5）！此应用程序的主要目标是室内导航（建筑物内的 GPS 并不十分准确）。

一种解决方案可能是扫描所有可用的 wi-fi，然后我的应用程序就可以完成它的工作！但就我查看所有文档和数十篇文章而言，Apple 没有提供任何 API 来扫描可用的无线网络（实际上有一些方法可以解决这个问题，但如果你使用它们，你的应用程序将被 AppStore 拒绝)..

第二种解决方案可能只是连接到特定的 Wi-Fi 接入点！所有这些接入点都预先编写在代码中，例如： SSID: myHomeWifi; 密码：somePassword；... ETC。

我的应用程序可以尝试连接或至少访问或 ping 每个路由器，然后进行计算。

所以问题是..如果我拥有路由器的所有私人数据，有什么方法可以与某个 wifi 接入点建立连接？

任何意见，将不胜感激！

谢谢！

# php - 限制从数据库返回的结果

> ID：10157142
> 
> 赞同：0
> 
> 时间：2012-04-14T20:33:53.987
> 
> 标签：php, javascript, mysql, greatest-n-per-group

我想从我的数据库中选择每张照片，然后按月份分组显示它们。我这里有那个代码：

```
<?php
if (isset($_COOKIE['user_id'])) {
    if (!isset($_GET['user_id'])) {
        $user_id= $_COOKIE['user_id'];
    } else {
        $user_id= $_GET['user_id'];
    }
    $connect= mysqli_connect("localhost", "root", "", "si");
    $query= "SELECT * FROM posts WHERE user_id= $user_id ORDER BY date DESC";

    $result= mysqli_query($connect, $query)
        or die('error with query');
    $date = "0";

    while ($row= mysqli_fetch_array($result)) {
        if ($date != $row['date']) {
            echo "<p> ".$row['date']."</p><br/>";
            $date = $row['date'];
        }
        echo '<img src="'.$row['picture']. '"/>' . "<br/>";
    }
}
?> 
```

唯一的问题是我的代码显示每个月的每张图片，这会导致页面过大。我想将我的结果限制为每月仅 8 个（如果该月没有事件 8 个图片，则更少），然后如果超过 8 个，则显示“显示更多...”链接。我知道如何添加限制我的初始查询，但这不适用于这种情况。我能做些什么？

这是我希望它的外观： ![所需的布局](../Images/2c1f4e0b5584616ce4ed61fedf358884.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:42:44.807

添加`LIMIT $start, $numToDisplay`

到您的 SQL 语句，并使用 PHP 计算`$start`变量的新值。

例如`$pageNum = $_GET["page"]`，每页 8 张图片意味着您可以计算出：

```
$numToDisplay = 8;
$start = ($pageNum-1)*$numToDisplay; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:50:59.627

这就是所谓的“每组最大 n 个”查询。如果您**[在此处搜索，](https://stackoverflow.com/questions/tagged/greatest-n-per-group)**则有许多具有不同解决方案的示例。这是其中之一——

```
SELECT *
FROM (
    SELECT
        tmp.*,
        @r := IF(@m=DATE_FORMAT(`date`, '%Y%m'), @rank + 1, 1) rank,
        @m := DATE_FORMAT(`date`, '%Y%m')
    FROM (
        SELECT *
        FROM posts
        WHERE user_id = $user_id
        ORDER BY date DESC
    ) tmp, (SELECT @m:=NULL, @r:=NULL) initvars
) tmp2
WHERE rank <= 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:51:40.957

您需要做的是监控图片计数

```
$pickLimit = array ();
while ( $row = mysqli_fetch_array ( $result ) ) {

    if ($date != $row ['date']) {
        echo "<p> " . $row ['date'] . "</p><br/>";
        $date = $row ['date'];
    }

    $pickLimit [$date] = isset ( $pickLimit [$date] ) ? $pickLimit [$date] : 0;
    if ($pickLimit [$date] > 7)
        continue;

    echo '<img src="' . $row ['picture'] . '"/>' . "<br/>";
    $pickLimit [$date] ++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T23:27:31.633

这可以使用您已经拥有的 php 脚本和一些 css 技巧轻松完成，这些技巧也可用于创建动画滑块/轮播。像这样的东西：

```
<div id="carousel">
    <div id="slider">
    <?php foreach($images as $img) { ?>
        <div class="image">
            <img src="<?php echo $img; ?>" />
        </div>
    <?php } ?>
    </div>
</div> 
```

至于CSS：

```
#carousel {
    width: 900px; /* how much you need */
    height: 100px; /* how much you need */
    overflow: hidden;
}
#slider {
    width: auto;
    height: 100px;
}
.image {
    float: left;
} 
```

# php - 如何使用 PHP 删除字符串中倒数第 7 个和第 8 个字符？

> ID：10157145
> 
> 赞同：2
> 
> 时间：2012-04-14T20:33:57.377
> 
> 标签：php, str-replace

我想删除字符串中的第 7 个和第 8 个到最后一个字符。

```
$string = "Tucson AZ 85718"; 
```

我正在尝试删除州缩写。我有一堆用于不同邮政编码的字符串，所以我不能只用''替换“AZ”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T20:40:01.673

```
$string = substr($string, 0, -8) . substr($string, -5); 
```

演示：

```
php> $string = "Tucson AZ 85718";
php> echo substr($string, 0, -8) . substr($string, -5);
Tucson 85718 
```

正则表达式也可以完成这项工作。这将删除任何 2 个大写字符的字符串及其后面的空格：

```
$string = preg_replace('/\b[A-Z]{2}\b /', '', $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T20:37:53.570

```
$string = substr_replace($string, "", -8, 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:45:34.877

不是 php 正则表达式专家，但似乎

```
$string=preg_replace(" {w{1}} ", " ", $string); 
```

会为你做这项工作。应该使用可变长度的城市名称。:wq

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T20:48:31.867

免责声明：我不是美国人，也不太了解美国的邮政地址！

我肯定会这样做`preg_replace`or `preg_match_all`：

```
$string   = "Tucson AZ 85718"; 

// Don't be mislead by the second [A-Z], this means all uppercase characters
$pattern  = '/^(.+ )([A-Z]{2} )(\d+)$/';
preg_match_all($pattern, $string, $matches);

var_dump($matches); 
```

这将为您提供一个如下所示的数组：

```
array(4) {
  [0]=>
  array(1) {
    [0]=>
    string(15) "Tucson AZ 85718"
  }
  [1]=>
  array(1) {
    [0]=>
    string(7) "Tucson "
  }
  [2]=>
  array(1) {
    [0]=>
    string(3) "AZ "
  }
  [3]=>
  array(1) {
    [0]=>
    string(5) "85718"
  }
} 
```

...其中第 2、第 3 和第 4 个索引分别是城市、州代码和邮政编码。

或者，您可以使用以下方式去除前缀`preg_replace`：

```
$string   = "Tucson AZ 85718"; 
$pattern  = '/^(.+ )([A-Z]{2} )(\d+)$/';
$normalised = preg_replace($pattern, '$1$3', $string); 
```

...这将为您提供“Tucson 85718”，其中`$1 and $3`第二个参数`preg_replace`与模式中括号中的第一个和第三个块相关（`(.* )`和`(\d{5})`分别）。

假设：

*   州代码全部大写
*   邮政编码都是 5 位数字

# c# - 从调用辅助方法的页面上的辅助类调用方法

> ID：10157151
> 
> 赞同：0
> 
> 时间：2012-04-14T20:35:01.253
> 
> 标签：c#, asp.net, helpers

我有 3 个 ASP.NET 页面。每个都有自己的*GetSearchResult*方法，该方法产生不同的搜索结果并填充 GridView。每个页面都从帮助程序类中调用一个共享的帮助程序方法。

现在在这个助手类中，我想执行属于调用助手方法的页面上的*GetSearchResult*方法。

这可能吗？如果是这样，我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:40:21.067

将拥有方法 GetSearchResult 的类的一个实例作为参数传递给您的辅助方法。这将使辅助方法可以访问调用者方法。您将需要实现一个接口来执行此操作。

```
public interface ISearchable
{
    void GetSearchResult();
}

public class MyPage : Page, ISearchable
{
    public void GetSearchResult() {
        HelperClass.HelperMethod(this); // Pass in
    }
}

public static class HelperClass
{
    public static void HelperMethod(ISearchable page) {
        page.GetSearchResult();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:43:40.550

您可以将页面的引用作为参数传递给辅助方法，然后在页面上再次调用 GetSearchResult。（理想情况下，您的页面应该实现一个接口，比如 ISearchPage，其中包含方法 GetSearchResult）

[编辑：当我输入上述内容时，大卫安德森在他的回答中提供了代码]

或者，在您的辅助方法中，在辅助对象上设置状态标志（或使用状态枚举）。在您的页面中，您可以读取该标志或枚举值，如果状态表明应该再次调用 GetSearchResult，请再次调用它。

# cakephp - Auth 组件在 CakePHP 2.0 上不起作用

> ID：10157156
> 
> 赞同：0
> 
> 时间：2012-04-14T20:35:36.537
> 
> 标签：cakephp, authentication

我已经在他们的 Auth 方法上尝试了大部分（如果不是全部）CakePHP 1.3 教程，但似乎不适用于 CakePHP 2.0。

我可以添加用户，散列密码，但登录功能不起作用。当我点击登录时，它只是刷新页面。没有错误，什么都没有。

我会很感激一些提示，并感谢您阅读我的问题。

这是我的代码 public function login() {

```
 if ($this->request->is('post') )
    {

        if( $this->Auth->login() )
        {

            // the redirect() function in the Auth class redirects us
            // to the url we set up in the AppController.
            return $this->redirect( $this->Auth->redirect());
        }
        else
        {

            $this->Session->setFlash(__('Email or password is incorrect',true));
        }
    }
} 
```

谢谢，马哈德瓦·普拉萨德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T05:47:26.290

首先检查你如何散列密码。还要检查数据库中的字段长度。首选 - varchar(255) 密码将按如下方式进行哈希处理。

```
class User extends AppModel {
   public function beforeSave($options = array()) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        return true;
   }
} 
```

此外，当您使用 FormAuthenticate 时，请在声明组件时尝试使用它。

```
public $components = array(
'Auth' => array(
    'loginAction' => array(
        'controller' => 'users',
        'action' => 'login',            
    ),       
    'authenticate' => array(
        'Form' => array(
            'fields' => array('username' => 'username')
        )
    )
)
); 
```

有关更多信息，请参阅[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

# android - 进度条可见性

> ID：10157158
> 
> 赞同：0
> 
> 时间：2012-04-14T20:36:02.883
> 
> 标签：android, progress-bar

我有一个非常简单的场景：我必须在开始时使我的进度条*不可见*，但是在单击按钮时，必须使其*可见*，以便完成我在后台运行的任务，直到那时我的进度条会跑。

我正在使用一种非常简单的方法。我已经将进度条放在 XML 中，然后简单地放在`onCreate`活动的方法中，首先使它不可见`mProgress.setVisibility(4)`，然后当我单击我的按钮试图使其再次*可见*时。

但不幸的是它不起作用！任何人请回答为什么它不这样做。

```
mProgress = (ProgressBar) findViewById(R.id.progressBar);
mProgress.setVisibility(4);

btnSubmit.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    strpatientid = txtpatientid.getText().toString();

    if (strpatientid.length() == 0) {
      Toast.makeText(getApplicationContext(),
                     "Enter the Patient ID",
                     Toast.LENGTH_LONG).show();
      return;
    }
    else {
      mProgress.setEnabled(false);
      mProgress.setVisibility(View.VISIBLE);
      setProgressBarVisibility(true);
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:27:21.693

试试这样：

```
mProgress=(ProgressBar) findViewById(R.id.progressBar);

mProgress.setVisibility(View.INVISIBLE);

btnSubmit.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
    strpatientid = txtpatientid.getText().toString();
    if (TextUtils.isEmpty(strpatientid)) {
        Toast.makeText(getApplicationContext(),"Enter the Patient ID",
            Toast.LENGTH_LONG).show();
        mProgress.setVisibility(View.INVISIBLE);
        return;
    }

    else{
        //mProgress.setEnabled(false);   //you dont need this
        mProgress.setVisibility(View.VISIBLE);
        setProgressBarVisibility(true);
    }
} 
```

# php - 使用2个表mysql

> ID：10157159
> 
> 赞同：-2
> 
> 时间：2012-04-14T20:36:13.520
> 
> 标签：php, mysql

我正在一个有电影列表的网站上工作。我要做的是让用户可以检查和评价他们看过的电影。我有两张不同的桌子，一张供用户使用，一张供电影使用。这是我第一次尝试有 2 个表链接，因此我不确定这样的起点是什么。我想使用电影 ID 作为用户配置文件中的标识符。但是我想不出一个很好的方法将它整齐地放入用户数据库中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:40:31.853

制作一张表用户：

*   用户身份
*   用户名
*   出生日期， ...

一张桌子电影：

*   电影ID
*   电影名
*   生产年...

以及一个链接它们的表格：

*   链接ID
*   UserREF（这里放置用户的用户 ID）
*   MovieREF（这里放电影的 MovieID）
*   评分
*   约会时间， ...

现在，您可以像这样使用这些表，但您可以做一些额外的事情来确保您的数据保持有效：如果您在 UserREF 和 MovieREF 上添加约束，则链接表中的行不能没有相应的用户或电影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:40:59.183

你需要第三张桌子。例如

```
user_movie_rating: user_id, movie_id, rating 
```

阅读一部电影的评分确实喜欢

```
SELECT SUM(rating) / COUNT(user_id) FROM user_movie_rating WHERE movie_id = x 
```

# objective-c - UITableView 单元格标签在滚动时四处移动

> ID：10157161
> 
> 赞同：0
> 
> 时间：2012-04-14T20:36:22.027
> 
> 标签：objective-c, uitableview, uilabel, cell

我创建了一个 uitableview，当我启动它时，它看起来应该是这样，但是当我滚动时，它会将文本放在我未指定的所有其他部分中，有人可以帮忙。附上的第一张图片是它的外观。第二个是我滚动时的作用。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0 ){
        return 1;}
    else if (section == 1){
        return [cellLabels count];
    }else if (section == 2){
        return 1;
    }else{
        return 0;
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"cellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }
    tableView.showsVerticalScrollIndicator = NO;
    // cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    tableView.separatorStyle = UITableViewCellSeparatorStyleNone;

    if( indexPath.section == 0 )
    {
    }
    else if (indexPath.section == 1)
    {
        cell.textLabel.backgroundColor = [UIColor clearColor];
        cell.textLabel.textColor = [UIColor blackColor];
        // headerLabel.font = [UIFont SystemFontOfSize:16];
        [cell.textLabel setFont:[UIFont fontWithName:@"Arial" size:14]];
        cell.textLabel.text = [cellLabels objectAtIndex:indexPath.row];

    }
return cell;

} 
```

![这是它启动时的样子，也是它应该看起来的样子](../Images/7899dcd39d9c070cfe61bbe82cb5e3ec.png)

![在此处输入图像描述](../Images/4b159da5cd8b9c58ab71b2c083821d84.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:58:18.310

你的问题很简单，

由于表格视图重用分配的单元格，当涉及到第一部分您不显示任何内容时，在第二部分显示您的自定义文本

当它向下滚动并返回时，它的文本将出现在第一部分，因为当它到达

```
if( indexPath.section == 0 )
{
} 
```

它不会做任何事情

做了

```
if( indexPath.section == 0 )
{
   cell.textLabel.text = @"";
}
else if( indexPath.section == 2 )
{
   cell.textLabel.text = @"";
} 
```

或者

```
if( indexPath.section == 0 )
{
   cell.textLabel.text = nil;
}

else if( indexPath.section == 2 )
{
   cell.textLabel.text = nil;
} 
```

其他 FOR SECTION 1 是正确的

# javascript - 如何在 JQuery 按钮获得焦点并按下空格键时防止页面滚动

> ID：10157162
> 
> 赞同：2
> 
> 时间：2012-04-14T20:36:25.863
> 
> 标签：javascript, jquery

当焦点位于 JQuery 对话框中的按钮上时，空格键会做两件事：选择按钮和滚动窗口。熟悉空格键作为选择按钮的工具的人会期待第一个，但会发现第二个不和谐且不合适。

所以问题是：如何防止页面滚动？我曾认为这只是从按钮处理程序返回 false 的问题，但这似乎不是真的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T14:58:50.627

我已经尝试过这里和其他地方建议的解决方案，但没有一个对我有用。最终起作用的是一个文档范围的 keydown 处理程序，如下所示：

```
$(document).keydown(function (e) {
    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;
    if ((key == 32) && (e.target.className != null) && (e.target.className.indexOf("ui-button") != -1))
       e.preventDefault();
 }); 
```

key == 32 显然是对空格键的检查。className 用于检查所讨论的 UI（用户界面）元素是否是 JQuery 按钮。如果没有按钮检查，空格键在任何地方都被禁用。

# c++ - mem_fn & bind 的一些实际用途

> ID：10157163
> 
> 赞同：10
> 
> 时间：2012-04-14T20:36:26.770
> 
> 标签：c++, stdbind, tr1, mem-fun

有人可以推荐 tr1 的 mem_fn 和绑定实用程序的一些很酷的实际用途吗？我不需要深奥的 C++ 来开发库。只是一些使用这些的应用程序级编码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T20:53:55.177

我已经使用`std::mem_fn`和`std::bind`反射样式属性。

所以我会有一个`class SomeClass`带有`AbstractProperty`. 可以有几种不同类型的类`AbstractProperty`，例如`PropertyFloat`,`PropertyU32`等。

然后在`SomeClass`我会`bind`来一个`std::function`for `AbstractProperty`。我`bind`会这样做

```
std::bind(std::mem_fn(&SomeClass::SomeFloatGetter), this) 
```

对于 setter 类型函数，我会使用

```
 std::bind(std::mem_fn(&SomeClass::SomeSetterGetter), this, std::placeholders::_1) 
```

当然，给类设置函数比较困难，但我确实使用 a`std::function`来做到这一点。在`PropertyFloat`我有

```
typedef std::function<float(void)> GetterType; 
```

所以它通过一个函数设置它，我会传递`std::bind`我显示的第一个作为参数

```
typename PropertyFloat::GetterType getter 
```

当然，这些类型可以使用模板并且更通用，但这取决于您的开发目标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T20:50:30.577

通常，将成员函数用于回调可能会很麻烦，例如在`<algorithm>`函数中使用。`std::mem_fn`（它现在已经标准化，因此您不再需要使用`tr1`命名空间）创建一个可调用对象，该对象可以用作这些函数的仿函数对象。有关其使用示例，请参阅[此链接](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)的示例部分，该部分使用`std::string::size`.

`std::bind`可以在例如您在编译时不知道实际参数但必须创建带有参数运行时的可调用对象时使用。它还可以用于重新排序参数，例如：

```
auto f1 = std::bind(printf, _2, _1);
f1(42, "%d\n"); 
```

（好吧，愚蠢的例子，但我现在能想到的。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T20:53:58.057

以下代码计算大于五的元素数：

```
#include <functional>
#include <algorithm>
#include <vector>
#include <iostream>

int main() {
  using namespace std;
  vector<int> v { 1, 5, 2, 7, 6, 7, 5 };
  cout << count_if(v.begin(), v.end(),
                   bind(greater<int>(), placeholders::_1, 5)) << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-09T07:27:44.990

一个问题是 lambda 很难使用前向声明的类中的方法。我使用 bind 来使用使用前向声明类中的方法的成员函数。我找不到使用 lambdas 的解决方案。场景如下：我有一个在类 A 中定义的成员函数 f1、f2、... 的列表，其中一些使用了前向声明类中的方法。我希望能够使用这些 fi 函数中的任何一个灵活地交换表达式树 B 类节点的运算符。在 B 中，定义了一个通用运算符。我使用 bind 将 fi 函数自适应地关联到通用运算符。这样，fi 成员函数定义可以在放置前向声明的 Ah 文件中进行原型化，然后 fi 函数的实现可以放在 A.cpp 文件中并由 B 类访问。我'

# c# - 任务数量有限制吗？

> ID：10157171
> 
> 赞同：5
> 
> 时间：2012-04-14T20:37:34.200
> 
> 标签：c#, windows-runtime, task

我正在运行一个具有多个任务的 winrt 程序。在运行过程中，我得到以下异常：

```
Not enough quota is available to process this command 
```

堆栈跟踪是

```
 at Windows.UI.Core.CoreDispatcher.InvokeAsync(CoreDispatcherPriority priority, InvokedHandler freeThreadedCallback, Object sender, Object context)
   at System.Threading.WinRTSynchronizationContext.Post(SendOrPostCallback d, Object state)
   at System.Threading.Tasks.SynchronizationContextAwaitTaskContinuation.InvokeOrPostAction(Object state)
   at System.Threading.Tasks.AwaitTaskContinuation.RunInline(ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.AwaitTaskContinuation.<ThrowAsyncIfNecessary>b__1(Object s)
   at System.Threading.QueueUserWorkItemCallback.WaitCallback_Context(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() 
```

然后它崩溃了。

这是 WintRT 特有的问题吗？

有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:53:47.697

根据[该错误消息的 MSDN 文档，该错误](http://msdn.microsoft.com/en-us/library/ms820778.aspx)的修复方法是“关闭某些应用程序”或“增加页面文件的大小”。

鉴于此，您可能希望首先查看任务管理器，看看您的应用程序是否使用了完全不合理的内存量（或者是否有其他进程使用）。如果您的进程存在内存泄漏，则可能会导致此问题。

# python - Django 编码风格：我应该在这里使用类装饰器吗？

> ID：10157173
> 
> 赞同：2
> 
> 时间：2012-04-14T20:37:48.240
> 
> 标签：python, django, coding-style, decorator, django-generic-views

我是整个 Django 的新手，因此，我决定从 ClassBased GenericViews 开始，而不是从旧的基于函数的 Generics 开始，这导致了缺乏文档的几个绊脚石。无论如何，到目前为止，我真的很喜欢 GenericViews，并且一直在用装饰器扩展它们。

我一直在做的简单例子

**`ideapad/urls.py`**

```
from ideapad.views import *

urlpatterns = patterns('ideapad.views',
        url(r'^$', IndexListView.as_view(), name='url_index'),
        ) 
```

**`ideapad/views.py`**

```
from django.views.generic import ListView
from ideapad.models import Idea
from sauce.decorators import sort_queryset

@sort_queryset('-date')
class IndexListView(ListView):
    model = Idea
    template_name = 'ideapad/index.html'
    context_object_name = 'ideas' 
```

**`sauce/decorators.py`**

```
def sort_queryset(default_sort):
    """
    Decorator that sorts queryset according to GET data
    Made to wrap GenericViews with get_queryset methods
    """
    def decorator(cls):
        fn=cls.get_queryset
        def wrapper(self):
            queryset = fn(self)
            sortmethod = self.request.GET.get('sort', default_sort)
            if hasattr(queryset, 'order_by'):
                queryset = queryset.order_by(sortmethod)
            return queryset
        cls.get_queryset=wrapper
        return cls
    return decorator 
```

我的问题是，就整体可读性和可维护性而言，是否有“更好”或“更可接受”的方式来做到这一点？或者它只是一种编码风格偏好？

我问的原因是，虽然我认为这种方式更具可读性，但我希望有朝一日这样做可以赚钱，并且不想养成奇怪的编码习惯，这会激怒同事编码风格非常受欢迎。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:22:28.777

这是执行此操作的正确方法（我已经编辑了您的代码）：

**`ideapad/views.py`**

```
from django.views.generic import ListView
from ideapad.models import Idea
from sauce.decorators import SortQuerysetMixin

class IndexListView(SortQuerysetMixin, ListView):
    default_sort = '-date'
    model = Idea
    template_name = 'ideapad/index.html'
    context_object_name = 'ideas' 
```

**`sauce/decorators.py`**

```
class SortQuerysetMixin(object):
    def get_queryset(self):
        queryset = super(SortQuerysetMixin, self).get_queryset()
        sortmethod = self.request.GET.get('sort', self.default_sort)
        if hasattr(queryset, 'order_by'):
            queryset = queryset.order_by(sortmethod)
        return queryset 
```

# c++ - 在 C 中打印 Map/Filter/Reduce 函数时遇到问题

> ID：10157177
> 
> 赞同：2
> 
> 时间：2012-04-14T20:38:11.753
> 
> 标签：c++, c, visual-studio-2008, unhandled-exception

当我的函数轻松返回值时，我很难理解为什么我不断收到异常，但是一旦我尝试 printf 结果，它就会给我一个未处理的异常错误（见下文）我是 C 新手所以我一直在从 java 的角度看待一切，但我无法弄清楚。

这是我的相关代码（reduce 采用链表，它是一个包含 int 值的节点数组，以及指向列表中下一个节点的指针，最后一个节点指向 null）

```
int reduce(int (*func)(int v1, int v2), LinkedListP list, int init){

int i, sum;
struct node *first, *second;

sum = 0;
first = list->head;
second = list->head->next;

for(i = 0;i < list->count; i+=2)
{
//checks to see if there are values in the list at all
if(first == NULL)
{
    return sum;
}
//if first value is good, and the second value is null, then sum the final one and return the result
else if(second == NULL)
{
    sum += func(first->value, init);
        return sum;

}
//otherwise there is more to compute
else
{
    sum += func(first->value, second->value);
}

    //first now points to the next node that seconds node was pointing to
    first = second->next;

    //if the first link is null, then there is no need to assign something to the second one
    if(first == NULL){
        return sum;
    }
    else{
        second = first->next;
    }

} 
```

}

在 main 中，我将一个指针传递给一个名为 sum 的函数，它只是将两个值相加

简单的代码

```
newLink = new_LinkedList();
int(*reduceFunc)(int, int);
reduceFunc = sum;

result = reduce(sum, newLink, 0);

printf("Total is : %s", result ); 
```

现在所有人都抛出这个VVVVVVVV

> ExamTwo.exe 中 0x1029984f 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000015。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:43:38.753

您的 reduce() 函数返回一个 int，但您为 printf() 提供了字符串的格式代码。尝试

```
printf("Total is : %d", result ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:43:27.397

您需要在 printf 中将 %s 替换为 %d。

# php - 跟踪文件请求引用者

> ID：10157179
> 
> 赞同：0
> 
> 时间：2012-04-14T20:38:24.223
> 
> 标签：php

我在服务器上有一个文件，例如“file.txt”。可以从不同的域请求它。

有没有办法跟踪从哪个域请求了这个文件并将这些数据保存在某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:52:37.067

是的，只需获取引用并存储它。变量是 $_SERVER['HTTP_REFERER']

你有两个选择。您可以编写一个提供文件的 PHP 脚本 ( [http://teddy.fr/blog/how-serve-big-files-through-php](http://teddy.fr/blog/how-serve-big-files-through-php) ) 并使用 PHP 存储该文件的引用。

或者，Web 服务器保留所有访问文件的日志。您可以扫描此（结构化）日志以访问您的文件并获取引用者。有几个日志分析项目，比如 AStats。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:50:33.310

我不认为域名将是你最好的选择.. 我会建议你坚持`IP address for`限制

您还可以使用`$_SERVER ['HTTP_REFERER']`来验证调用文件或即将加载文件的确切脚本

尝试

```
$allowedReferer = array (
        "http://me.test.com/xxx/bbb/zmy.php?",
        "https://me.why.com/xxx/bbb/zmy.axpx" ,
        "http://localhost/lab/stockoverflow/"
);

$allowedIP = array (
        "192.168.0.1",
        "192.168.0.1" ,
        "::1"
);

$file = "file.pdf"; // its can also be a value form $_GET

if (! in_array ( quickIP (), $allowedIP )) {
    die ( "IP LockDown : " . quickIP () );
}

if (! isset ( $_SERVER ['HTTP_REFERER'] )) {
    die ( "Missing Referer" );
}

if (! in_array ($_SERVER ['HTTP_REFERER'] , $allowedReferer)) {
    die ( "Referer Lockdown "  . $_SERVER ['HTTP_REFERER']);
}

$array = parse_url ( $_SERVER ['HTTP_REFERER'] );

header ( 'Content-type: application/pdf' );
header ( 'Content-Disposition: attachment; filename="' . $file . '"' );
readfile ( $file );

function quickIP() {
    return (empty ( $_SERVER ['HTTP_CLIENT_IP'] ) ? (empty ( $_SERVER ['HTTP_X_FORWARDED_FOR'] ) ? $_SERVER ['REMOTE_ADDR'] : $_SERVER ['HTTP_X_FORWARDED_FOR']) : $_SERVER ['HTTP_CLIENT_IP']);
} 
```

# c++ - 在哪些情况下应该使用匿名枚举？

> ID：10157181
> 
> 赞同：16
> 
> 时间：2012-04-14T20:38:38.143
> 
> 标签：c++, c

在 c 和 c++`enum`中都可以用标签定义

```
enum e_smth {
    smth_one,
    smth_two,
    smth_err
}; 
```

或无标签

```
enum {
    smth_one,
    smth_two,
    smth_err
}; 
```

* * *

`switch`如果它是用标记定义的，那么在 c 和 c++ 中的语句中都是有意义的：

```
e_smth some_var;
....//do some stuff with some_var
switch (some_var)
{
case smth_one:
break;
case smth_two:
break;
} 
```

`-Wswitch`如果这将使用 gcc 或 g++ 编译， 将产生 警告。

在 c++ 中的函数声明和变量初始化中是有意义的：

```
e_smth var;
var=99; 
```

如果使用 g++ 编译会产生`-fpermissive`错误。

带标签或不带标签的两种类型都可以用作一个`#define`不带参数的文件宏。

* * *

**更新**

> 可以作为一个文件`#define`宏使用，不带参数

意思是：而不是`#define MAX 1000`在文件中写入并将 MAX 添加到`enum { MAX=1000 }`仅在文件范围内的全局使用中

* * *

那么匿名枚举呢，我只发现了一个用例：定义就像`typedef enum { a,b,c } some_t;`使它像带有标签的枚举一样工作

## 问题：

如果我还没有描述所有合理的用例，应该使用什么匿名枚举？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-14T20:54:00.453

在 C 中（但不是在 C++ 中），`enum`可以 [ab] 用于定义`int`常量。

例如，给定这个声明：

```
const int MAX = 1024; 
```

`MAX`不是常量表达式，它是只读对象的名称。这意味着您不能在 case 标签中使用它，作为在文件范围或 with 声明的数组的大小`static`，或在任何其他需要常量表达式的上下文中。

但是如果你写：

```
enum { MAX = 1024 }; 
```

then`MAX` *是*type 的常量表达式`int`，可在任何可以使用该常量的上下文中使用`1024`。

当然你也可以写：

```
#define MAX 1024 
```

但是使用预处理器也有一些缺点：例如，标识符的范围没有像普通声明那样。

缺点是这样的常量只能是 type `int`。

C++有不同的规则；枚举常量属于枚举类型，not `int`，但您可以将声明的常量对象用作常量表达式（只要初始化程序是常量表达式）。

为了解决最初的问题，当您使用`enum`声明来创建这样的常量时，使用标签或 typedef 是没有意义的，因为您永远不会使用类型本身。

背景：这个：

```
enum foo { zero, one, two };
enum foo obj = two; 
```

创建一个类型`enum foo`和常量`zero`, `one`, 和`two`. 在 C 中，常量始终是 类型`int`，这无疑是奇怪的，并且 的初始化涉及从到`obj`的隐式转换。`int``enum foo`

在C++中，类型`enum foo`也可以称为just `foo`，常量是类型`enum foo`（兼容*某些*整数类型，不一定`int`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T20:42:41.080

另一个用例是作为`struct`or的一个元素`union`，通常当它本身没有意义时（因为它只是为了满足通信协议的 ABI 等而存在，并且对于编程使用有更合适的表示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T17:56:37.120

@eith汤普森

您的答案是“const int MAX = 1024; MAX 不是常量表达式”。但是，链接[http://en.cppreference.com/w/cpp/language/constant_expression](http://en.cppreference.com/w/cpp/language/constant_expression)中的示例 表明它是一个常量表达式，可以在数组声明中使用。常量表达式 C++ C++ 语言表达式 定义一个可以在编译时求值的表达式。

此类表达式可用作非类型模板参数、数组大小以及其他需要常量表达式的上下文，例如

```
int n = 1;
std::array<int, n> a1; // error, n is not a constant expression
const int cn = 2;
std::array<int, cn> a2; // OK, cn is a constant expression 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T20:10:32.980

通常，您只需要在多次使用枚举时为其命名。换句话说，如果您使用同一个枚举定义多个变量，那么您需要命名该枚举。但是，如果您只使用一次枚举并且只有一个变量具有该枚举，那么匿名枚举是有意义的。例如：

```
enum color { red, blue, gray, green };
enum color car_color;
enum color house_color; 
```

这里有多个变量，所以命名枚举。

```
typedef struct {
    int year;
    enum { Jan, Feb, Mar, Apr, May, Jun, July, Aug, Sep, Oct, Nov, Dec } month;
    unsigned int day;
} date; 
```

这里作者计划只使用一次枚举，所以没有必要命名。

# css - 为什么不能使用边距或填充进行垂直居中？

> ID：10157182
> 
> 赞同：2
> 
> 时间：2012-04-14T20:38:46.883
> 
> 标签：css, standards

好的，就像任何不得不使用 css 的人一样，我知道除了使用显示表中的“假表”之外，您不能动态地垂直居中元素。（动态我的意思是“如果你不知道居中的元素，或者容器的大小，或者两者都知道”。）

我想了解的是*为什么*？我曾尝试过使用护目镜，但所有这些发现都是解决方法，而我感兴趣的是这样一个奇怪决定背后的哲学。

那么，为什么可以使用 margin:auto 水平居中，而不是垂直居中？据我所知，你可以在盒子模型中对表格单元格做任何事情，你可以对 div 做任何事情，但只有前者会让你垂直居中。为什么要编写一个演示语言标准（据我所知，它说边距和填充的垂直“自动”等于 0）可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:03:20.680

因为，元素的宽度可以在元素创建后立即确定。百分比只是（百分比 * 父宽度），绝对宽度就是那个宽度。我们知道宽度。但是，直到该元素内的所有内容都已呈现并且这些元素和内容的高度也已确定之后，才确定高度。

虽然宽度*可以*由元素的内容决定，但高度*始终*由元素的内容决定。

来自：[了解垂直对齐，或“如何（不）垂直居中内容”](http://phrogz.net/css/vertical-align/index.html)

> HTML 布局传统上不是为指定垂直行为而设计的。就其本质而言，它会按宽度缩放，并且内容会根据可用宽度流动到适当的高度。传统上，水平尺寸和布局很容易；垂直尺寸和布局由此衍生。

因此，一个元素在其内容完全呈现之前无法准确确定其顶部和底部的边距（或填充）需要多少。由于这些是首先应用的，因此其中的任何其他元素和内容也可以适当地呈现，因此这些值`auto`将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:02:21.423

您也不能在不知道元素宽度的情况下水平居中元素。

这是一种将元素水平和垂直居中的方法：

```
#main {
    width: 50%;
    height: 50%;
    position: absolute;
    top: 25%;
    left: 25%;
} 
```

当然，您可以使用其他值，例如`width: 80%`，因此`top`应该是`10%`。

在这里查看动态高度（快速搜索尚未彻底阅读）：[http ://css-tricks.com/snippets/css/center-div-with-dynamic-height/](http://css-tricks.com/snippets/css/center-div-with-dynamic-height/)

# matlab - 评估函数

> ID：10157188
> 
> 赞同：1
> 
> 时间：2012-04-14T20:39:31.330
> 
> 标签：matlab, eval

我正在尝试自己学习 MATLAB。在我使用的书中有一个脚本示例，涉及`eval`如下：

```
 t = [0:0.1:2]
 for k = 1:10
    outputfile = ['result',int2str(k)];
    theta = k*pi*t;
    x = sin(theta);
    y = cos(theta);
    z = x.*y.^2;
    eval(['save ',outputfile,' x y z'])
end 
```

我的问题是 - 为什么有必要`' x y z'`在命令末尾包含`eval`？我尝试在不包含此脚本的情况下运行此脚本，并且据我所知，该脚本的行为看起来完全相同（至少我找不到任何区别）。

如果有人可以向我解释为什么包含它，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:48:42.237

`'x y z`是`save`函数/命令的参数。他们正在告诉`save`哪些变量要保存到文件`outputfile`中。有关该命令的更多信息，请参阅 MATLAB[文档。](http://www.mathworks.co.uk/help/techdoc/ref/save.html)`save`

注意：您可以根据 MA​​TLAB 文档将该行替换为对该`save`函数的调用。例如，您可以只使用

```
save(outputfile, 'x', 'y', 'z') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T20:47:33.893

如果没有`x y z`，您的输出文件（.mat 文件）将包含工作区中的所有变量（即`x y z theta t k ...`）。如果您只想存储`x y z`，则在调用时指定它[`save`](http://www.mathworks.com/help/techdoc/ref/save.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T07:36:46.380

使用函数***'eval'***的原因是，通过使用 eval，您可以一次保存一个名为 result_1 result_2... 的列表结果。即，将数据保存到递增编号的 ASCII 文件中。您可以在此网站上找到更多详细信息：

> [https://www3.nd.edu/~dtl/cheg258/notes/doc/tec1.3.html](https://www3.nd.edu/~dtl/cheg258/notes/doc/tec1.3.html)

注意： eval(['save ',outputfile,' xy z']) 在字母 x 之前有一个空格。

# objective-c - 如何循环包含在 CATransaction 块中的几个 CABasicAnimations？

> ID：10157191
> 
> 赞同：5
> 
> 时间：2012-04-14T20:39:47.797
> 
> 标签：objective-c, xcode, repeat, cabasicanimation, catransaction

在 Xcode 4.3.2 中为 iPhone 5.1 使用 Obj.-c；我创建了一个 CALayers 数组，所有这些都来自同一个图像。然后我希望通过 CATransactions 分组同时将 CABasicAnimation 应用于数组中的每个 CALayer。这一切都奏效了。但是，我想重复调用 CATransactions 中包含的 CABasicAnimations 块，但能够在每次同时执行块时单独修改每个动画的属性。例如，我希望每次为每一层上的动画随机更改动画的 from 和 to 值。因为我想重复相同的基本动画，但进行属性修改；将动画的 repeatCount 属性设置为某个高值将不起作用。我尝试在 makeSwarm 方法中使用 for 循环反复调用 animate 方法，使用 animationDidStop 来引发另一个 animate 方法调用，但最终发生的是使用 CATransaction 块而不是在末尾进行新调用，并且还有方法调用本身（将 [self animate]; 放在 animate 方法的末尾）；而这些都不起作用。这是基本代码。我认为这很简单，但我没有看到重要的东西。谢谢，赛斯 但我没有看到重要的东西。谢谢，赛斯 但我没有看到重要的东西。谢谢，赛斯

ViewController.h

```
#import <QuartzCore/QuartzCore.h>
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    UIImage *beeImage;

    UIImageView *beeView;
    CALayer *beeLayer;
    CABasicAnimation *animat;   
    NSMutableArray *beeArray;
    NSMutableArray *beeanimArray;

}

@property(retain,nonatomic) UIImage *beeImage;
@property(retain,nonatomic) NSMutableArray *beeArray;
@property(retain,nonatomic) NSMutableArray *beeanimArray;
@property(retain,nonatomic) UIImageView *beeView;
@property(retain,nonatomic) CALayer *beeLayer;
@property(retain,nonatomic)CABasicAnimation *animat;
-(void) animate;
-(void) makeSwarm;

@end 
```

ViewController.m

```
-(void) makeSwarm{

    self.view.layer.backgroundColor = [UIColor orangeColor].CGColor;
    self.view.layer.cornerRadius = 20.0;
    self.view.layer.frame = CGRectInset(self.view.layer.frame, 20, 20);

    CGRect beeFrame;
    beeArray = [[NSMutableArray alloc] init];
    beeImage = [UIImage imageNamed:@"bee50x55px.png"];
    beeFrame = CGRectMake(0, 0, beeImage.size.width, beeImage.size.height);

    int i;

    CALayer *p = [[CALayer alloc] init];

    for (i = 0; i < 3; i++) {

        beeView = [[UIImageView alloc] initWithFrame:beeFrame];
        beeView.image = beeImage;    
        beeLayer = [beeView layer];
        [beeArray addObject: beeLayer];  

        p = [beeArray objectAtIndex: i];    

        [p setPosition:CGPointMake(arc4random()%320, arc4random()%480)];
        [self.view.layer addSublayer:p];

    } 

    [self animate]; 

}

-(void)animate
{
    //the code from here to the end of this method is what I would like to repeat as many times as I would like
    [CATransaction begin];

    int i;
    for (i = 0; i < 3; i++) {  

        animat = [[CABasicAnimation alloc] init];
        [animat setFromValue:[NSValue valueWithCGPoint:CGPointMake(arc4random()%320, arc4random()%480)]];
        animat.toValue = [NSValue valueWithCGPoint:CGPointMake(arc4random()%320, arc4random()%480)];
        [animat setFillMode:kCAFillModeForwards];
        [animat setRemovedOnCompletion:NO];
        animat.duration=1.0;

        CALayer *p = [[CALayer alloc] init];
        p = [beeArray objectAtIndex: i]; 
        [p addAnimation:animat forKey:@"position"];

    }    

    [CATransaction commit];     

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:55:05.200

我相信我已经为自己回答了这个问题。我在循环结束时（当 i==2 时）和动画结束时（指示循环结束）设置动画的委托，然后从 animationDidStop 方法中我再次调用方法动画。如果有比这更优雅或无故障的解决方案，我会全神贯注并接受它作为答案。

# php - 在 Mac OS X Lion 上启用 Xdebug

> ID：10157200
> 
> 赞同：5
> 
> 时间：2012-04-14T20:41:45.037
> 
> 标签：php, apache2, osx-lion, xdebug

我一直在尝试为 Mac OS X Lion 启用 Xdebug，但无法使其工作。这应该很简单，但它对我不起作用。

这些是我采取的步骤：

1 - 取消注释 php.ini 文件的这一行：

```
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so" 
```

2 - 重新启动我的Apache服务器

```
sudo apachectl restart 
```

3 - 检查它是否通过 phpinfo() 函数启用。事实上，它既可以作为 Zend 模块，也可以作为一个单独的模块启用。

但它不起作用。每次在我的 php 脚本中发生错误时，它们都会默认使用丑陋的错误处理来显示。var_dumps 也不起作用。

我错过了一步吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T20:45:51.897

确保您的`html_errors`和`display_errors`已通过您的 php.ini 文件打开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T20:16:35.167

[Xdebug.org 的定制安装向导](http://xdebug.org/wizard.php)为我工作。

（使用内置 apache）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T13:48:45.847

我有同样的问题。

我以前可以使用 MAMP 激活它。无论如何，这个环境产生了问题，我安装了一个独立的 mysql 并激活了 Mac OS Lion 的 apache。

我已经重新编译`xdebug.so`和修改`/private/etc/php.ini`：

```
;...
zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
;...
[xdebug]
;xdebug.idekey="macgdbp"
xdebug.remote_enable=1
xdebug.remote_handler="dbgp"
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.remote_log="/var/log/xdebug.log"
xdebug.remote_autostart=1 
```

但是我无能为力，我无法将 NetBeans 7.1 附加到调试器。

我错过了什么？

`php-config`输出：

```
$ php-config --help
Usage: /usr/bin/php-config [OPTION]
Options:
  --prefix            [/usr]
  --includes          [-I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib]
  --ldflags           [ ]
  --libs              [-lresolv  -lz -lexslt -ltidy -lresolv -ledit -lncurses -lpq -lpq -liodbc -lldap -llber -liconv -liconv -lfreetype -lpng -lz -ljpeg -lcrypto -lssl -lcrypto -lcurl -lbz2 -lz -lpcre -lcrypto -lssl -lcrypto -lm  -lxml2 -lz -licucore -lm -lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err -lcurl -lxml2 -lz -licucore -lm -liodbc -lxml2 -lz -licucore -lm -lnetsnmp -lcrypto -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxslt -lxml2 -lz -licucore -lm ]
  --extension-dir     [/usr/lib/php/extensions/no-debug-non-zts-20090626]
  --include-dir       [/usr/include/php]
  --man-dir           [/usr/share/man]
  --php-binary        [/usr/bin/php]
  --php-sapis         [cli apache2handler]
  --configure-options [--prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --disable-dependency-tracking --sysconfdir=/private/etc --with-apxs2=/usr/sbin/apxs --enable-cli --with-config-file-path=/etc --with-libxml-dir=/usr --with-openssl=/usr --with-kerberos=/usr --with-zlib=/usr --enable-bcmath --with-bz2=/usr --enable-calendar --with-curl=/usr --enable-dba --enable-ndbm=/usr --enable-exif --enable-ftp --with-gd --with-freetype-dir=/usr/local --with-jpeg-dir=/usr/local --with-png-dir=/usr/local --enable-gd-native-ttf --with-icu-dir=/usr --with-iodbc=/usr --with-ldap=/usr --with-ldap-sasl=/usr --with-libedit=/usr --enable-mbstring --enable-mbregex --with-mysql=mysqlnd --with-mysqli=mysqlnd --without-pear --with-pdo-mysql=mysqlnd --with-mysql-sock=/var/mysql/mysql.sock --with-readline=/usr --enable-shmop --with-snmp=/usr --enable-soap --enable-sockets --enable-sqlite-utf8 --enable-suhosin --enable-sysvmsg --enable-sysvsem --enable-sysvshm --with-tidy --enable-wddx --with-xmlrpc --with-iconv-dir=/usr --with-xsl=/usr --enable-zend-multibyte --enable-zip --with-pcre-regex=/usr --with-pgsql=/usr --with-pdo-pgsql=/usr]
  --version           [5.3.10]
  --vernum            [50310] 
```

# jquery - jquery 工具验证器问题

> ID：10157202
> 
> 赞同：1
> 
> 时间：2012-04-14T20:42:22.133
> 
> 标签：jquery, jquery-tools

我有一个链接，当从电子邮件中单击时，用户会登陆一个从[jquery 工具](http://jquerytools.org/)加载覆盖对话框的页面。在这个[覆盖对话框](http://jquerytools.org/documentation/overlay/index.html)中，我有一个带有输入字段的表单，我使用[jquery 工具验证器](http://jquerytools.org/documentation/validator/index.html)来进行用户输入实时验证。问题是字段的黑色错误标签不只显示输入字段颜色变为红色，但黑色弹出错误消息不显示。如果我在链接的 href 和 rel 属性中使用 #overlayDialog 启动覆盖，则不会发生这种情况。电子邮件中的链接不是使用指向覆盖对话框的 rel 和 href 构建的。这可能是问题吗？它是 jquery 工具中的错误吗？如何解决这个问题？

- 更新 -

下面是用户单击电子邮件中的链接后进入的 html 页面。它是一个 playframework 模板视图

---playframework html模板视图-------

```
 #{extends 'layout.html' /} 
 #{set title:
     messages.get('app.title') +' reset password ' /} 
  #{set 'moreScripts'}
   <script type="text/javascript" src="@{'/public/theme/js/signup.js'}"></script>

  <script>
        $(document).ready(function(){
            /* $.tools.validator.fn("#username", function(input, value) {
                return value!='Username' ? true : {
                    en: "Please complete this mandatory field"
                };
            });
 */

          /*   var form = $("#form").validator({
                position: 'bottom left',
                offset: [5, 0],
                messageClass:'form-error',
                message: '<div><em/></div>' // em element is the arrow
            }).attr('novalidate', 'novalidate');
 */
 $("#resetPassword").overlay({

     // custom top position
     top: 50,

     // some mask tweaks suitable for facebox-looking dialogs
     mask: {

     // you might also consider a "transparent" color for the mask
     color: '#fff',

     // load mask a little faster
     loadSpeed: 200,

     // very transparent
     opacity: 0.5
     },

     // disable this for modal dialog-type of overlays
     closeOnClick: false,

     // load it immediately after the construction
     load: true

     });
//initialize validator for a bunch of input fields 
 var inputs = $("#resetPasswordForm :input").validator( {

   message: '<div><em/></div>', // em element is the arrow          

    grouped: true
     } );

            var submitFinished = function (data,errorDiv) {
                if (data.success === true) {

                 if($("#reqPasswordErrorMessage"))
                 {
                     $("#reqPasswordErrorMessage").hide();
                 }

                    var message=$("#reqPasswordSuccessMessage")[0];

                     message.innerHTML = "User password has been reset successfully. ";

                     $("#reqPasswordSuccessMessage").show("fast");
                   return;

                }
                else {

                    if($("#reqPasswordSuccessMessage"))
                    {
                        $("#reqPasswordSuccessMessage").hide();
                    }
                    $("#reqPasswordErrorMessage").hide()

                    var errMessage = $(errorDiv)[0];

                      errMessage.innerHTML = "<b>" + data.error + "</b>";
                      $(errorDiv).show("fast");
                      return;
                }
            }

            $("#requestPasswordForm").submit(function () {
                var formContents = $(this).serialize();
                $.ajax({
                    url:$(this).attr("action"),
                    type:$(this).attr("method"),
                    data:formContents,
                    success:function (data) {
                        submitFinished(data,"#reqPasswordErrorMessage");
                    }

                });

                return false;
            });
        });
    </script>
#{/set}

<div class="overlay-dialog main-content clearfix" id="resetPassword">
    <header>
        <!-- <ul class="action-buttons clearfix fr">
            *{<li><a href="#" class="button button-gray">Register</a></li>}*
            <li><a href="#" class="button button-gray"><span class="help"></span>Forgot Password</a></li>
        </ul> -->
       <h2>Reset Password</h2>
         </header>
         <div><p>Please use form below to set a new password.</p></div> 
    <section>
   <!--  <div> <h6>Please use form below to reset a new password.</h6>
   </div> -->

        <div id="reqPasswordSuccessMessage" class="message success">

          <!--  &{'registration.passwordReset', email} -->

        </div>

        <div id="reqPasswordErrorMessage" class="message error">

        </div>

    #{form @SignUp.resetPasswordAction(), id:"resetPasswordForm", defaultbutton:'#loginSubmitBtn'}

            <div>
            <label for="password" >New Password* 

            </label>
                <input type="password" id="password" class="large" value=""
                       name="password"
                       required="required"  minlength="6" pattern="(?=.*\d)(?=.*[a-zA-Z]).{6,}" data-message="Password does not meet criteria. Please Retry." title="Must be minimum 6 alphanumeric characters (at least 1 digit and one letter)" placeholder="Password"/>
                      <small>minimum 6 alphanumeric characters(at least 1 digit and one letter)</small>

                      </div>

            <div><label for="passwordConfirm">Confirm Password* 

            </label>
                <input type="password" id="passwordConfirm" class="large" value=""
                       name="passwordConfirm"
                       required="required" data-equals="password" data-message="Passwords do not match. Please try again." placeholder="Password"/>
                       <small>must match password</small>
                       </div>
                       <input type="hidden" id="email" name="email" value="&{email}">
            <div><button class="large button button-green fr " type="submit">Submit</button>
      </div>

    #{/form}
    </section>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:51:24.847

我通过更改验证器初始化代码找到了答案，如下所示：

```
 //initialize validator for a bunch of input fields 
       var inputs = $("#resetPasswordForm :input").validator( {

           position: 'bottom left',
           offset: [5, 0],
           messageClass:'form-error',
           message: '<div><em/></div>', // em element is the arrow
        grouped: true
         } );
//fix for firefox and chrome browsers
 $("#resetPasswordForm").attr('novalidate', 'novalidate'); 
```

我还在表单提交功能中添加了 checkValidity()，如下所示：

```
$("#requestPasswordForm").submit(function () {

                if (this.checkValidity()) {
                var formContents = $(this).serialize();
                $.ajax({
                    url:$(this).attr("action"),
                    type:$(this).attr("method"),
                    data:formContents,
                    success:function (data) {
                        submitFinished(data,"#resetPasswordErrorMessage");
                    }

                });
                }

                return false;
            });
        }); 
```

这两个更改修复了问题，并且错误消息标签显示在输入错误验证中。

- 更新 -

此修复程序在 safari 浏览器中有效，但要使其在 firefox 和 chrome 上有效，我们需要在 var 输入初始化下方添加此行：

```
$("#resetPasswordForm").attr('novalidate', 'novalidate'); 
```

# javascript - jQuery UI 按钮 - 保持活动状态，忽略悬停状态

> ID：10157204
> 
> 赞同：3
> 
> 时间：2012-04-14T20:42:33.617
> 
> 标签：javascript, jquery, jquery-ui, button, hover

正如前面另一个问题中提到的，我有一个系统可以显示内容并根据哈希标签突出显示一个按钮。这在大多数情况下都可以正常工作，但是**如果您将按钮悬停，它就会失去它的活动状态。**

这是问题的**[工作示例][1]**。

我试过`.hover(function() {return false;});`了，但不幸的是这没有用（虽然我想我没想到它会......！）。我还尝试禁用该按钮（然后在单击另一个按钮时重新启用它），这在 Firefox 中是完美的，但在 IE7 中文本显示为灰色。

非常感谢任何帮助或建议，谢谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:00:58.167

从您的按钮开始提交#，它不会使链接转到另一个页面，但会产生一些不需要的滚动。你应该避免这样。

```
$('#showScarringReports').click(function(ev){ ev.preventDefault(); }); 
```

之后，如果您希望保持活动状态，您可以禁用事件处理程序，使其从活动状态切换回原来的状态。所以再次以第一个为例。

```
$('#showScarringReports').unbind('mouseout keyup mouseup hover'); 
```

一旦激活，它将保持活动状态，要删除活动状态，然后只需从按钮中删除类 ui-state-hover 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T15:30:46.343

另一种解决方案对我不起作用，所以我不得不使用这个：

```
$('#my-button')
    .button({disabled:true})
    .removeClass('ui-state-disabled')
    .addClass('ui-state-active') //permanently pressed
    .addClass('ui-state-hover')  //or permanently highlighted
; 
```

# android - 将 Jar 导入 Android 项目时出错

> ID：10157213
> 
> 赞同：7
> 
> 时间：2012-04-14T20:43:39.063
> 
> 标签：android, dex

这是新的 Android SDK 最近出现的问题。

现在 Android SDK 在将外部 jar 导入 apk 包时使用 ANT 约定，外部 jar 必须位于“lib”文件夹中，并且 SDK 会从该文件夹中导出 jar。

我的问题是当我添加我的 jar 并运行我的项目时，我收到以下消息：

> 处理“javax/transaction/HeuristicCommitException.class”时遇到问题：
> 
> 不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。
> 
> 这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。
> 
> 但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。
> 
> 如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机发行版的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。
> 
> 如果您继续使用“--core-library”但实际上是在构建应用程序，那么请预先警告您的应用程序在某些时候仍然无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级他们的操作系统，您的应用程序就会停止运行。你会为这个问题负责。
> 
> 如果您合法地使用了恰好位于核心包中的某些代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你无法做到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

我已经在此处和其他论坛上阅读过此消息，有人说 Android.jar 是问题，因此删除将解决它。

但是我找不到那个Android.jar，除了无法删除的Android库。

这个关于将库导入到 android 的问题让我很生气，因为我的应用程序运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:48:30.593

一旦尝试清理您的项目并重新构建它......它可能会帮助你......因为它帮助我......我的新sdk也有同样的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:07:19.447

当我第一次更新时，我也看到了很多问题，但最终能够让它工作。一些建议，基于最终对我和朋友有用的东西：

确保您的外部 jar 文件位于项目基本目录的“libs”文件夹中（注意此处的“s”——而不是“lib”）。如果您进行任何更改，请务必刷新项目并清理（如果未设置为自动构建，则重新构建）。

在 Java Build Path > Libraries 选项卡下的项目属性中，删除除 Android XXX 和 Android Dependencies 节点之外的所有内容。同样，如果您进行任何更改，请务必刷新项目并清理（如果未设置为自动构建，则重新构建）。

如果您已经为您的项目和它在您的工作区中使用的所有库项目完成此操作并且仍然遇到问题，请尝试删除所有 Android 库项目（从项目属性> Android）以及 Java 构建路径中的所有库（包括 Android XXX 和 Android 依赖项），清理，然后更改 Android 版本/应用/更改回以强制重建。（从您的基础库项目开始对每个项目执行此操作，只有在构建没有错误时才将它们添加到您的其他项目中）。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T13:56:40.027

当我使用 Maven 构建时，我在一个测试项目中遇到了这个错误。我通过添加解决了它

```
<scope>provided</scope> 
```

到android测试库。

```
 <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android-test</artifactId>
        <version>4.1.1.4</version>
        <scope>provided</scope>
    </dependency> 
```

# collections - ArrayList(Collection c) VS HashSet(Collection c)

> ID：10157218
> 
> 赞同：2
> 
> 时间：2012-04-14T20:44:27.303
> 
> 标签：collections, java

在检查 ArrayList API 时，我注意到一些看起来很奇怪的东西。

实际上，这里是 ArrayList 构造函数实现，其中 Collection 作为参数传递：

```
public ArrayList(Collection<? extends E> c) {
        elementData = c.toArray();
        size = elementData.length;
        // c.toArray might (incorrectly) not return Object[] (see 6260652)
        if (elementData.getClass() != Object[].class)
            elementData = Arrays.copyOf(elementData, size, Object[].class);
} 
```

这里相当于 HashSet 类：

```
public HashSet(Collection<? extends E> c) {
        map = new HashMap<>(Math.max((int) (c.size()/.75f) + 1, 16));
        addAll(c);
} 
```

因此，我们可以注意到 ArrayList 使用了由集合 in 参数提供的元素的 COPY (Arrays.copyOf)，而 HashSet 使用 addAll() 方法。

当然，addAll() 方法不会复制元素，而只是添加对 HashSet 集合的引用。

对于忽略它的呼叫者，我发现这种细微的差异是“危险的”。

一个人可能会期望一个具有相同引用的集合，另一个阅读 ArrayList API 的人会期望一个原始集合中元素的副本。

为什么 Sun 没有为这些 Collections 子类提供相同的概念？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T20:52:13.277

> ArrayList 一使用参数集合提供的元素的 COPY (Arrays.copyOf)，而 HashSet 一使用 addAll() 方法。

不，`Arrays.copyOf`只复制数组，但不复制该数组指向的对象。不会克隆对象。话虽如此，两个构造函数的行为相同 - 它们将包含对与原始集合相同的对象的*引用。*在一个集合中修改一个对象将在另一个集合中修改它（因为它是同一个对象）。

另请注意，`Arrays.copyOf()`仅在某些情况下使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T20:52:52.120

两者`ArrayList`和`HashSet`都将仅复制**引用**，而不是这些引用所引用的实际对象。

在 Java 中，非原始类型的变量是对对象的引用。如果你有一个数组，那么`Arrays.copyOf`只复制引用 - 而不是这些引用引用的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T20:55:49.353

这些集合将具有相同的引用。如果您有一个包含三个对象 A、B、C 的列表，并复制该列表，则新副本还将引用这三个相同的对象。这些构造函数都很浅，它们根本不接触原始对象。

```
public static void main(String args[]) {
    ArrayList l = new ArrayList();
    Object a = new Object();
    Object b = new Object();
    Object c = new Object();
    l.add(a);
    l.add(b);
    l.add(c);

    ArrayList k = new ArrayList(l);
    HashSet h = new HashSet(l);
    System.out.println(a);
    System.out.println(b);
    System.out.println(c);

    System.out.println(l);
    System.out.println(k);
    System.out.println(h);
} 
```

给出：

```
java.lang.Object@43256ea2
java.lang.Object@4e82701e
java.lang.Object@558ee9d6
[java.lang.Object@43256ea2, java.lang.Object@4e82701e, java.lang.Object@558ee9d6]
[java.lang.Object@43256ea2, java.lang.Object@4e82701e, java.lang.Object@558ee9d6]
[java.lang.Object@4e82701e, java.lang.Object@43256ea2, java.lang.Object@558ee9d6] 
```

您会注意到所有集合都引用了相同的对象。（HashSet 的顺序不同。）

# javascript - 检索智能手机的电话号码或 IMEI

> ID：10157220
> 
> 赞同：2
> 
> 时间：2012-04-14T20:44:42.310
> 
> 标签：javascript, html, mobile, cross-platform

我正在做一个跨平台的应用程序。使用 MoSynv IDE，我想检索一部智能手机的唯一 ID。是否可以使用 JavaScript 或 MoSync 的 API 检索智能手机的电话号码或 IMEI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:59:02.617

我认为您正在寻找`device.uuid` 您可以在包含 wormhole.js [API 参考后使用它](http://www.mosync.com/files/imports/doxygen/latest/html5/device.uuid.md.html#device.uuid)

# php - 使用 PHP 通过 Instagram API 存储 json

> ID：10157221
> 
> 赞同：2
> 
> 时间：2012-04-14T20:44:51.760
> 
> 标签：php, json, api, instagram

我觉得我想太多了。我想要做的是从 instagram api 中提取最新的照片并将生成的 json 信息保存为缓存文件。然后，我将使用 jQuery 从该文件中读取数据——我已经弄清楚了那部分。我现在使用的是将其保存在缓存文件中，但不是以我识别的格式。我想我把这件事复杂化了。

这是我根据我找到的教程一直在使用的代码：

```
// Client ID for Instagram API
$instagramClientID = '9110e8c268384cb79901a96e3a16f588';

$api = 'https://api.instagram.com/v1/media/popular?client_id='.$instagramClientID; //api       request (edit this to reflect tags)
$cache = 'cache.txt';

if(file_exists($cache) && filemtime($cache) > time() - 60*60){
// If a cache file exists, and it is newer than 1 hour, use it
$images = unserialize(file_get_contents($cache));
}
else{
// Make an API request and create the cache file

// For example, gets the 32 most popular images on Instagram

$response = file_get_contents($api); //change request path to pull different photos

$images = array();

// Decode the response and build an array
foreach(json_decode($response)->data as $item){ // Decodes json (javascript) into an array

    $title = '';

    if($item->caption){
        $title = mb_substr($item->caption->text,0,70,"utf8");
    }

    $src = $item->images->standard_resolution->url; //Caches standard res img path to variable $src

    $lat = $item->data->location->latitude; // Caches latitude as $lat
    $lon = $item->data->location->longtitude; // Caches longitude as $lon       

    $images[] = array(
        "title" => htmlspecialchars($title),
        "src" => htmlspecialchars($src),
        "lat" => htmlspecialchars($lat),
        "lon" => htmlspecialchars($lon) // Consolidates variables to an array
    );
}

// Remove the last item, so we still have
// 32 items when when the cover is added
//array_pop($images);

// Push the cover in the beginning of the array
//array_unshift($images,array("title"=>"Cover", "src"=>"assets/img/cover.jpg"));

// Update the cache file
file_put_contents($cache,serialize($images));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:27:58.070

我注意到的一件事是 API 非常慢，是缓存的好选择。

您正在尝试将其另存为序列化数组（这没什么大不了的），但如果您要再次将其读取为 json，您也可以将其另存为 json，这样可以节省再次反序列化的步骤。

以下是我所做的一些更改： 添加 curl 以尝试加快响应速度，或者如果您没有安装 FGC，则退回到 FGC。响应保存为 json，当从缓存中检索时，它被解码为数组而不是对象，这意味着您可以保持相同的数组结构。

`$item->data->location->latitude`并且`$item->data->location->longtitude`在结果中始终为空，因此添加了一个检查...

希望能帮助到你

```
<?php
// Client ID for Instagram API
$instagramClientID = '9110e8c268384cb79901a96e3a16f588';

$api = 'https://api.instagram.com/v1/media/popular?client_id='.$instagramClientID; //api request (edit this to reflect tags)
$cache = './cache.json';

if(file_exists($cache) && filemtime($cache) > time() - 60*60){
    // If a cache file exists, and it is newer than 1 hour, use it
    $images = json_decode(file_get_contents($cache),true); //Decode as an json array
}
else{
    // Make an API request and create the cache file
    // For example, gets the 32 most popular images on Instagram
    $response = get_curl($api); //change request path to pull different photos

    $images = array();

    if($response){
        // Decode the response and build an array
        foreach(json_decode($response)->data as $item){

            $title = (isset($item->caption))?mb_substr($item->caption->text,0,70,"utf8"):null;

            $src = $item->images->standard_resolution->url; //Caches standard res img path to variable $src

            //Location coords seemed empty in the results but you would need to check them as mostly be undefined
            $lat = (isset($item->data->location->latitude))?$item->data->location->latitude:null; // Caches latitude as $lat
            $lon = (isset($item->data->location->longtitude))?$item->data->location->longtitude:null; // Caches longitude as $lon

            $images[] = array(
            "title" => htmlspecialchars($title),
            "src" => htmlspecialchars($src),
            "lat" => htmlspecialchars($lat),
            "lon" => htmlspecialchars($lon) // Consolidates variables to an array
            );
        }
        file_put_contents($cache,json_encode($images)); //Save as json
    }
}

//Debug out
print_r($images);

//Added curl for faster response
function get_curl($url){
    if(function_exists('curl_init')){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL,$url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0); 
        $output = curl_exec($ch);
        echo curl_error($ch);
        curl_close($ch);
        return $output;
    }else{
        return file_get_contents($url);
    }

}

?> 
```

# xsd - 在 XML Schema 中强制元素为特定类型，但为任何名称

> ID：10157223
> 
> 赞同：1
> 
> 时间：2012-04-14T20:45:01.680
> 
> 标签：xsd

我可以在 xsd 中描述某些特定类型的元素必须出现，但它们可以有任何名称。Visual Studio 不允许我省略“名称”属性，如下所示：

```
<xs:element type="myType"/> 
```

有没有办法做到这一点？如果不是，是否可以在其他 XML 模式语言中使用，例如 RELAX NG？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:26:47.390

XSD 1.0 中的一种方法是使用替换组。

BaseAny.xsd

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="anyOfCType" type="myCType" abstract="true"/>
    <xsd:complexType name="myCType">
        <xsd:sequence>
            <xsd:element name="something" type="xsd:string"/>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="anyOfSType" type="mySType" abstract="true"/> 
    <xsd:simpleType name="mySType">
        <xsd:restriction base="xsd:string">
            <xsd:minLength value="2"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:element name="root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="anyOfCType"/>
                <xsd:element ref="anyOfSType"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

RefBaseAny.xsd：

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/1/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/1/XMLSchema.xsd" xmlns:b="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:import namespace="http://tempuri.org/XMLSchema.xsd" schemaLocation="BaseAny.xsd"/>

    <xsd:element name="c.one" type="b:myCType" substitutionGroup="b:anyOfCType"/>
    <xsd:element name="s.one" type="b:mySType" substitutionGroup="b:anyOfSType"/>

</xsd:schema> 
```

针对 RefBaseAny.xsd 验证的示例 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:r="http://tempuri.org/1/XMLSchema.xsd">
    <r:c.one>
        <something></something>
    </r:c.one>
    <r:s.one>12</r:s.one>
</root> 
```

使用 Relax NG，您必须定义一个命名模式来定义您的内容模型（模仿 xsd:complexType）。

```
<define name="myType">
  ...
</define> 
```

然后定义一个具有这种结构的元素：

```
<element>
  <anyName/>
  <ref name="myType"/>
</element> 
```

测试.rng：

```
<?xml version="1.0" encoding="UTF-8"?>
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
    <start>
        <element>
            <anyName/>
            <ref name="myType"/>
        </element>
    </start>
    <define name="myType">
        <element name="c.one">
            <interleave>
                <attribute name="id">
                    <value>AA</value>
                </attribute>
                <attribute name="ref">
                    <text/>
                </attribute>
            </interleave>
            <element name="s.two">
                <text/>
            </element>
        </element>
    </define>
</grammar> 
```

有效的 XML1：

```
<?xml version="1.0" encoding="UTF-8"?>
<Data>
    <c.one id="AA" ref="123">
        <s.two>Hello</s.two>
    </c.one>
</Data> 
```

有效的 XML2：

```
<?xml version="1.0" encoding="UTF-8"?>
<Data1>
    <c.one id="AA" ref="123">
        <s.two>Hello</s.two>
    </c.one>
</Data1> 
```

# java - rgb图像在java bufferedImage中转换二进制图像

> ID：10157224
> 
> 赞同：0
> 
> 时间：2012-04-14T20:45:01.930
> 
> 标签：java, binary, rgb, bufferedimage

我有一个 rgb 图像，我想将二进制图像转换为 0-255。

我计算 RGB 图像中的阈值和灰度图像中大于阈值的像素，我设置红色 = 255 绿色 = 255 和蓝色 = 255 并且低于阈值我设置红色 = 0 绿色 = 0 和蓝色 = 0

> ```
> private static int colorToRGB(int alpha, int red, int green, int blue) {
>     int newPixel = 0;
>     newPixel += alpha;
>     newPixel = newPixel << 8;
>     newPixel += red; newPixel = newPixel << 8;
>     newPixel += green; newPixel = newPixel << 8;
>     newPixel += blue;
>     System.out.println("asd"  + newPixel);
>     return newPixel;
> } 
> ```

newPixel 的值 -16777216 如果像素是白色 newPixel 的值 -1 如果像素是黑色

alpha 值是常数 255 我哪里错了，因为我想要像素值 0 和 255。

BufferedImage 类型为 TYPE_INT_ARGB

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:02:34.563

老实说，你的问题对我来说没有多大意义。所以我回答你的问题做一些假设：

1.  你有一个全局阈值 [0-255]
2.  阈值应应用于灰度值，因此您需要将 rgb 像素转换为灰度值
3.  该程序应尽可能快
4.  你想用java做

此函数采用 rgb 颜色和阈值并返回黑色或白色。

```
public static int treshold(final int sourceColor, final int treshold) {
    // green channel is a good approximation of rgb intensity
    int green = (sourceColor >> 8) & 0xFF;
    if (green < treshold) {
        return 0xFF000000;
    } else {
        return 0xFFFFFFFF;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:26:24.793

除非是透明的蓝色（0 alpha，0 红色，0 绿色，0-255 蓝色），否则像素的值不会是 0 - 255。Alpha、Red、Green、Blue 可能在 0 到 255 的范围内，但放在一起会更大。使用 255 的 alpha 值，您将在整数上得到前导 1。前导表示整数为负数。你的最终值是正确的。此外，Torious 只是缩短了您的方程式，但您的两个计算都可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:59:27.053

`int newPixel = (alpha << 24) | (red << 16) | (green << 8) | blue;`

这导致颜色编码为 0xAARRGGBB，这可能是您想要的。

# java - 如何禁用 JPanel 使其无法在 Java 中更改大小

> ID：10157235
> 
> 赞同：6
> 
> 时间：2012-04-14T20:47:27.003
> 
> 标签：java, resize, jframe, jpanel

我在一个布局中有几个 JPanel，每当我用鼠标手动更改 JFrame 的大小时，它都会拉伸 JPanel 并使其看起来很乱。有没有办法禁用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T20:59:23.130

用户无法调整 JPanel 的大小。

如果您指的是 JFrame，则可以使用

```
yourFrame.setResizable(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T20:53:01.037

这都是关于您正在使用的 LayoutManager 的。一些 LayoutManagers 像 BorderLayout 总是给添加在中心位置的孩子额外的空间。然而，北、南、东和西只为它们分配了首选大小。我最喜欢的 LayoutManager 是 TableLayout，它非常易于使用，而且非常强大。您可以选择如何为每个孩子分配额外空间。所以这真的取决于你使用的是什么。

您还可以在 JFrame 上设置MaximumSize，它不允许您调整 JFrame 的大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-18T20:16:35.193

我想扩展@Shehzad 和@chubbsondubs 给出的答案。

首先，正如 Shehzad 所说，“可调整大小”不是`JPanel`对象的已知属性。然而，它是包含面板（和其他组件）的窗口或框架的属性。现在的问题是如何防止面板在调整其容器大小时调整其大小。正如chubbsondubs 所说，这完全取决于您正在使用的布局管理器。考虑以下代码片段：

```
 add(contextPanel, BorderLayout.CENTER);
  add(btnPanel, BorderLayout.SOUTH);
  add(sidebar, BorderLayout.WEST); 
```

这些行是从框架的构造函数中提取的。该`sidebar`对象是一个面板，`GridBagLayout`用于在其中放置文本字段、标签和其他组件。即使我已将面板的 、 和 属性设置`preferredSize`为`minimumSize`相同`maximumSize`的尺寸，但当我调整对话框大小时，容器不会“尊重”`sidebar`对象中设置的最小、最大和首选尺寸属性（Research Layout Managers to知道为什么会这样）。因为我的对话框（框架）不遵守这些大小限制，所以我必须将其`sidebar`与父框架隔离。为此，只需将其添加`sidebar`到另一个面板，然后将此新面板添加到对话框中。换句话说，“侧边栏”是通过添加其直接父级间接添加到对话框中的。

```
 JPanel dummyPane = new JPanel();
  dummyPane.add(sidePanel);

  add(contextPanel, BorderLayout.CENTER);
  add(btnPanel, BorderLayout.SOUTH);
  add(dummyPane, BorderLayout.WEST); 
```

现在，在这种情况下，`dummyPane`“尊重”`sidebar`对象中定义的大小约束，同时由父框架调整大小。

## 更新：

最后一件事...如果您使用的是***Absolute Positioning***，则必须设置`size`属性而不是`preferredSize`、`minimumSize`或`maximumSize`。使用绝对定位时会忽略这些。绝对定位是当布局管理器设置为`null`并且组件的*x、y*坐标被显式设置时。`size`可以使用`setSize(int width, int height)`或方法设置组件的`setBounds(int x, int y, int width, int height)`。

# python - 如何使用小部件 ID 作为名称将使用 Gtk.Builder 创建的小部件对象分配给我的类属性？

> ID：10157242
> 
> 赞同：0
> 
> 时间：2012-04-14T20:48:42.003
> 
> 标签：python, gtk, glade

在我的`__init__`功能中，我正在尝试做：

```
builder = gtk.Builder()
builder.add_from_file('main.glade')
builder.connect_signals(Handle())
self.list = builder.get_objects() 
```

现在我想为我的 gui 中的所有小部件添加属性到我的类

```
for i in self.list:
    name = i.get_name()
    print name
    setattr(self, name, i) 
```

我得到：

```
<gtk.VBox object at 0x2fd5558 (GtkVBox at 0x2499000)>
<gtk.Button object at 0x2fd5580 (GtkButton at 0x240a1a8)>
<gtk.Button object at 0x2fd55a8 (GtkButton at 0x240a130)>
<gtk.Button object at 0x2fd55d0 (GtkButton at 0x240a0b8)>
<gtk.Window object at 0x2fd55f8 (GtkWindow at 0x2495010)>
<gtk.HBox object at 0x2fd5620 (GtkHBox at 0x2499058)>
<gtk.Button object at 0x2fd5648 (GtkButton at 0x240a220)>
<gtk.TextView object at 0x2fd5670 (GtkTextView at 0x249d060)> 
```

**而不是我给这些小部件的具体名称**

您对如何同时初始化所有小部件有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:44:47.490

似乎没有办法获取小部件 ID 列表。您可以通过编写动态分配对象属性`__getattr__`

```
class Settings:
  """Settings dialog"""

  def __init__(self):
    self._log = _log.getChild(self.__class__.__name__)
    self.builder = Gtk.Builder()
    self.builder.add_from_file("settings.glade")
    self.builder.connect_signals(self)

  def __getattr__(self, name):
    self._log.debug("Resolving %s", name)
    obj = self.builder.get_object(name)
    setattr(self, name, obj)
    return obj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:56:45.240

我不确定您所说的“初始化”是什么意思。AFAIK，当 Builder 加载 glade 文件时，对象已准备就绪。除非我误解，否则我认为您只需要获取 Glade 为其加载的小部件使用的名称。这可以通过 Buildable 接口访问，如下所示：

```
 name = gtk.Buildable(widget).get_name() 
```

# php - preg_match youtube id 并删除 url

> ID：10157244
> 
> 赞同：1
> 
> 时间：2012-04-14T20:48:59.563
> 
> 标签：php, regex, string

我正在尝试获取 youtube 视频 ID 并仅用 youtube 视频 ID 替换 url。到目前为止，我找到了一种获取视频 id 的方法，但我似乎无法删除 url。

```
if (preg_match('%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', $url, $match)) {
    $video_id = $match[1];
} 
```

例子：

```
 http://youtu.be/dQw4w9WgXcQ ...
   http://www.youtube.com/embed/dQw4w9WgXcQ ...
   http://www.youtube.com/watch?v=dQw4w9WgXcQ ...
   http://www.youtube.com/?v=dQw4w9WgXcQ ...
   http://www.youtube.com/v/dQw4w9WgXcQ ...
   http://www.youtube.com/e/dQw4w9WgXcQ ...
   http://www.youtube.com/user/username#p/u/11/dQw4w9WgXcQ ...
   http://www.youtube.com/sandalsResorts#p/c/54B8C800269D7C1B/0/dQw4w9WgXcQ ...
   http://www.youtube.com/watch?feature=player_embedded&v=dQw4w9WgXcQ ... 
```

请注意，youtube url 在视频 id 之后也可以有额外的参数。

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:01:35.197

对于您所有的示例网址，此 preg_replace 有效。另外删除视频 ID 后的所有参数

```
$videoID =  preg_replace("#[&\?].+$#", "", preg_replace("#http://(?:www\.)?youtu\.?be(?:\.com)?/(embed/|watch\?v=|\?v=|v/|e/|.+/|watch.*v=|)#i", "", $url)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T21:22:23.037

试试这个：

```
<?php
$url = 'http://www.youtube.com/?v=dQw4w9WgXcQ&foo=bar&test=baz';
$path = parse_url($url, PHP_URL_PATH);
$query = parse_url($url, PHP_URL_QUERY);
parse_str($query, $args);
echo "http://www.youtube.com/watch?v=". $args['v']; 
```

[键盘示例](http://codepad.org/aJBStidv)

# c++ - 从 'void*' 到 'unsigned char*' 的无效转换

> ID：10157252
> 
> 赞同：7
> 
> 时间：2012-04-14T20:50:53.463
> 
> 标签：c++, void-pointers, unsigned-char

我有以下代码；

```
void* buffer = operator new(100);
unsigned char* etherhead = buffer; 
```

尝试编译时，该行出现以下错误；

```
error: invalid conversion from ‘void*’ to ‘unsigned char*’ 
```

为什么会出现这个错误，我认为 void 是“无类型”的，所以它可以指向任何东西，或者任何东西都可以指向它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T20:55:31.057

您需要进行转换，因为如果不先进行转换，就无法将 void* 转换为任何东西。

你需要做

```
unsigned char* etherhead = (unsigned char*)buffer; 
```

（虽然你也可以使用 a `static_cast`）

要了解有关 void 指针的更多信息，请查看[6.13 — Void 指针](http://www.learncpp.com/cpp-tutorial/613-void-pointers/)。

* * *

“无类型”状态`void*`只存在于 C 中，而不存在于类型安全性更强的 C++ 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T21:05:03.553

A`void*`可能指向任何东西，您可以将指向其他任何东西的指针转换为 a`void*`而无需强制转换，但您必须使用 a`static_cast`来执行相反的操作。

```
unsigned char* etherhead = static_cast<unsigned char*>(buffer); 
```

如果你想要一个动态分配的 100 缓冲区，`unsigned char`你最好这样做并避免强制转换。

```
unsigned char* p = new unsigned char[100]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T20:54:02.430

您可以将任何指针转换为 void *，但不能在没有强制转换的情况下将 void * 转换为其他任何东西。想象“void”是所有事物的基类，“int”和“char”等等都是“void”的子类，这可能会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-14T21:53:58.450

这里有一点横向思考：每当你认为你需要强制转换或指针时，再想一想。如果您只需要 100 个无符号字节的内存，请使用

```
std::array<unsigned char, 100> data; 
```

或者

```
unsigned char data[100]; 
```

如果大小不恒定，请使用向量：

```
std::vector<unsigned char> data(size); 
```

原始指针、`new`运算符和强制转换是不安全的，难以正确处理并使您的程序更难理解。如果可能，请避免使用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T21:03:01.337

C++ 被设计为比 C 更安全。如果这是 C 代码，它可能没问题，但也取决于您现在使用的编译器。

此外，从技术上讲，“extern "C" int *" 和 "int *" 是不同的类型......（就像 solaris 编译器会选择这个）

我建议您使用 C++ 样式转换而不是 C 转换。这里有更多的描述：

[常规演员与 static_cast 与 dynamic_cast](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T20:52:50.257

```
void *pt; 

pt=(void*)&i; 
pt=(void*)&dbl; 
```

这就是我将如何做到的。

# javascript - 使用对象数组预加载图像

> ID：10157255
> 
> 赞同：1
> 
> 时间：2012-04-14T20:51:49.480
> 
> 标签：javascript, jquery

我想写预加载图像，但我一直在检查已经加载的图像：

```
var imgContainer = [];

$(this).find('img').each(function() {
    imgContainer.push({
        image: $(this)
        // other properties
    })
});

setInterval(function() {
    console.log(imgContainer[0].image.complete);  // undefined
}, 2000); 
```

但是这个解决方案有效（数组中没有对象）：

```
var imgContainer = $(this).find('img');

setInterval(function() {
    console.log(imgContainer[0].complete)         // true
}, 2000); 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:10:42.087

而不是使用`setInterval`, 来检查是否所有图像都已加载，只需将上面的代码替换为以下代码：

```
(function(that){
    var remains = 0;        
    var loadHandler = function(){
       if(--remains == 0){
          console.log('All images are loaded !!!');
       }   
    };

    $(that).find('img').each(function() {
         if( !this.complete ){
             remains++;
             $(this).load(loadHandler);
         }
    });        
})(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:05:07.903

在您的代码中，您尝试访问 jQuery 对象上的“完成”属性，而它没有这个属性。尝试访问 DOM 元素本身的完整属性。

我相信这段代码应该更好地工作：

```
var imgContainer = [];

$(this).find('img').each(function() {
    imgContainer.push({
        image: $(this)
        // other properties
    })
});

setInterval(function() {
    /* imgContainer = array with objects, [0] = get first element */
    /* image = jQuery collection, [0] = get dom element of the first item in the collection */
    console.log(imgContainer[0].image[0].complete);  
}, 2000); 
```

# php - 是否有与 Hibernate Validator 等效的 PHP？

> ID：10157256
> 
> 赞同：0
> 
> 时间：2012-04-14T20:52:12.300
> 
> 标签：php, validation

Hibernate Validator 允许您使用验证规则注释属性：

[http://www.hibernate.org/subprojects/validator.html](http://www.hibernate.org/subprojects/validator.html)

是否有 PHP 等价物？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:02:35.570

将 Symfony 验证器与 Doctrine [Symfony2 和 Doctrine2 验证器一起使用](https://stackoverflow.com/questions/8545561/unique-constraints-in-doctrine-2-symfony-2)

也许你应该检查Doctrine2 上[的实体验证](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/cookbook/validation-of-entities.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:58:14.107

我不熟悉休眠验证器，但看看[PHP 的过滤器](http://www.php.net/manual/en/filter.filters.php)（特别是“验证过滤器”部分）。

如果您想要一个更复杂/完整的解决方案，而不是作为 php 核心本身的一部分，我发现[Zend Framework 的 Zend_Validate 组件](http://framework.zend.com/manual/en/zend.validate.introduction.html)非常适合使用（您不需要在其余部分使用 Zend Framework您的项目，您只能单独使用此特定组件）。

# hibernate - Hibernate 注释和 JPA

> ID：10157261
> 
> 赞同：1
> 
> 时间：2012-04-14T20:52:43.220
> 
> 标签：hibernate, jpa, annotations

我试图找到在哪个版本的 Hibernate 中引入了注释，但没有成功。是从3.2版本开始的吗？

我也想知道 Hibernate 从哪个版本兼容 JPA API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:56:52.980

> 从历史上看，Hibernate Annotations 和 Hibernate EntityManager 都是从 Hibernate Core 版本化和发布的。从 Hibernate Core 版本 3.5 开始。最终，所有 3 的文档也将被合并。

来自：[http ://www.hibernate.org/about/entitymanager](http://www.hibernate.org/about/entitymanager)

所以回答你的问题有点困难。一段时间以来，注释和 JPA 支持都是在一个单独的项目下开发的 - 并在 3.5 中合并到 Hibernate 核心。

[还比较版本3.3](http://docs.jboss.org/hibernate/orm/3.3/api/)和[3.5](http://docs.jboss.org/hibernate/orm/3.5/api/)的JavaDocs - 前者不包含`org.hibernate.annotation`and`org.hibernate.ejb`包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:59:36.417

[维基百科](http://en.wikipedia.org/wiki/Hibernate_%28Java%29#Application_programming_interface)：

> Hibernate Annotations（自 3.6 版起合并到 Hibernate Core/ORM）——元数据，根据 JSR 317 Java Persistence API (JPA 2) 管理面向对象模型和关系数据库模型之间的数据转换

# jquery - jQuery - 显示添加的行

> ID：10157262
> 
> 赞同：1
> 
> 时间：2012-04-14T20:52:44.680
> 
> 标签：jquery, dom, dom-manipulation

我有一个网页应该插入新的数据库记录并将它们显示给用户。

我想要的是当我添加一个人时，s(he) 必须看到添加的行。我有以下代码：

```
function AddData(par){

    var artistName =  $("input[name='"+par+"']").attr('id') + '-'+$("input[name='"+par+"']").val();

   $.post('/json/management/AddDataAjax2', 
    {
       "artistName": artistName
    },
    function(response){
        console.log(response);
        if(response =='ok'){
             alert("Başarıyla eklendi"); 
        }
         else{
             alert("Sanatçı bulunamadı, yönlendiriliyorsunuz");
             window.location.replace("http://www.sinemalar.com/management/artistAddEditRemove/");
         }
});
} 
```

![显示添加记录的示例](../Images/3963e09cc9dc68da9ec1d7a2423ba404.png)

选项卡都是 div。我给每个选项卡一个 ID，并在插入记录后添加了一个 div 刷新。但是，它会呈现我加载的原始页面。有什么解决办法，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:04:39.940

只需创建一个要显示数据的 div，如下所示：

```
<div id="added"></div> 
```

然后将您的 jQuery 编辑为：

```
function(response){
    console.log(response);
    if(response =='ok'){
         $("#added").append(artistName . "<br>");
         alert("Başarıyla eklendi");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:56:53.350

相反，如果刷新页面，您可以使用 append() 将新项目附加到列表中吗？

编辑：您可能会发现此示例很有用：

测试.html >>

```
 <script src="jquery.min.js" type="text/javascript"></script>
 <script type="text/javascript">                                                                                                      

 $(document).ready(function() {
     $("input[type='button']").click(function() {
        value = $("input[type='text']").val();
        $('ui').append("<li>"+value+"</li>");
     });
  });

</script>
<ui id='list'>
  <li>item1</li>
  <li>item2</li>

</ui> 

<input type='text'/><input type='button' value='Add'/> 
```

# blackberry - 黑莓模拟器和身份验证

> ID：10157275
> 
> 赞同：1
> 
> 时间：2012-04-14T20:54:06.743
> 
> 标签：blackberry, mobile

是否可以使用 Blackberry 模拟器版本 6 或 7 浏览到经过 Windows 身份验证的网站？

具体来说，我在 Windows Server 操作系统上托管一个网站，由 Internet 信息服务 (IIS) 托管，并且该网站设置为需要 Windows 域、用户名和密码凭据。这可以通过 NT 身份验证或基于表单的身份验证。

目前，我在没有提示输入凭据的情况下收到未经授权的 401.2 错误。

谢谢

# c++ - 如何在 Windows 程序中使正方形旋转？

> ID：10157277
> 
> 赞同：0
> 
> 时间：2012-04-14T20:54:12.807
> 
> 标签：c++, windows

我使用 Rectangle() 在屏幕上画了一个正方形，每次按下“r”键时，我想让该正方形顺时针旋转 1 度。

我知道如何设置“r”的按下，但我不知道从哪里开始进行旋转。有任何想法吗？

它是 Win32 项目。我对这个 Windows 编程仍然很陌生，所以它没什么特别的。我所做的只是创建了一个 Win32 项目，创建了空白的空窗口，并使用 Rectangle() 绘制了一个正方形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:04:39.580

有很多方法。Microsoft 通常希望您使用 Direct2D 进行绘图，因此您可以考虑研究一下。对于 Direct2D，MSDN 库中有两个示例：

*   [绘制矩形](http://msdn.microsoft.com/en-us/library/dd371016.aspx)
*   [如何旋转对象](http://msdn.microsoft.com/en-us/library/dd756687.aspx)（这个例子展示了如何绘制一个旋转的正方形！）

使用 GDI，您可以使用[`Polygon`](http://msdn.microsoft.com/en-us/library/dd162814.aspx)和计算正弦和余弦坐标，或使用[`SetWorldTransform`](http://msdn.microsoft.com/en-us/library/dd145104.aspx).

# javascript - Flash 播放器的视口调整大小事件

> ID：10157282
> 
> 赞同：8
> 
> 时间：2012-04-14T20:55:07.210
> 
> 标签：javascript, jquery

我对这一切都不熟悉，当窗口大小或方向改变时，我不知道如何调整我用于家庭媒体服务器的 Flash 播放器的大小。我将播放器大小基于视口的大小。我已经搜索并尝试了各种版本，但它们不起作用，这很可能是由于我缺乏知识。下面的大部分代码已经完成，我已经评论了我在这里添加的内容以供参考。

[**链接到示例**](http://173.27.137.207:52190/Gizmo/play_flash.html?File=526828)

**viewport.js**（由我添加）

```
var width = $(window).width();
var height = $(window).height(); 
```

**html**

```
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<title>Gizmo play_flash</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
 <script type="text/javascript" src="scripts/jwplayer.js"></script>
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="scripts/viewport.js"></script>
<noscript><meta http-equiv="refresh" content="2; URL=noscript.html"></noscript>
</head>

<body style="margin: 0; padding: 0; background-color: #000000">
<div id="outer">

    <div class="player_wrapper" style="width: 100%; height: 100%; margin:0px auto;">
        <div id="player">
            Loading the video player ...
        </div>
    </div>

    <script type="text/javascript">
        jwplayer('player').setup({
            'flashplayer': 'scripts/player.swf',
            'file': '[File.FlashLink]',
            'autostart': 'true',
            'duration': '[File.Duration]',
            'provider': 'scripts/jrmediaprovider.swf',
            'skin': 'scripts/glow.zip',
                    <!--begin mod-->
            'width': width - 5,
            'height': height - 5
                    <!--endmod-->
        });

        jwplayer('player').onComplete(
            function(event) { 
                try {
                    window.Gizmo.onComplete();
                } catch (err) { }
            }
        );
    </script>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-14T21:03:42.113

只需绑定到和事件`window`上的对象并在获取新的宽度和高度后使用该方法。`resize``orientationChange``JW Player` `resize`

像这样的东西。

```
$(window).on('resize orientationChange', function(event) {
    var width = $(window).width();
    var height = $(window).height();
    jwplayer('player').resize(width, height);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-01T08:13:39.613

使用 DOM API 检测视口调整大小：

```
window.addEventListener('resize', (ev) => {
  console.log(window.innerWidth, window.innerHeight);
}); 
```

# php - 使用 PHP 为 Azure 构建本地应用程序时出现 403 错误

> ID：10157287
> 
> 赞同：0
> 
> 时间：2012-04-14T20:55:59.647
> 
> 标签：php, azure

我正在尝试按照[此处](http://azurephp.interoperabilitybridges.com/articles/build-and-deploy-a-windows-azure-php-application)的指南构建一个简单的 php 应用程序。我已经为 PHP 设置了 SDK，并且可以很好地构建项目。当我构建项目时，页面加载时出现 403 错误。在 web.config 文件中，我有以下默认文档：

```
<defaultDocument>
  <files>
  <clear/>
    <add value="index.php" />
  </files>
</defaultDocument> 
```

如果我取出 clear/ 行并重建项目，页面加载时会出现 500 内部服务器错误。

有什么想法可能导致这种情况吗？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:36:05.437

403 是一个禁止页面错误 - 您可能不允许使用该`<clear/>`变量。

500 内部服务器错误通常意味着您的脚本语言出现错误，导致脚本崩溃。

您可以使用在线工具检查代码的语法，以确保它不包含任何错误。

这是一个： http: [//phpcodechecker.com/](http://phpcodechecker.com/)

# google-maps - Spotify 应用程序中的谷歌地图

> ID：10157288
> 
> 赞同：0
> 
> 时间：2012-04-14T20:56:11.110
> 
> 标签：google-maps, spotify

我正在尝试在我正在开发的 Spotify 应用程序中包含一个 Google Maps 实例（使用 v3 Google Maps Javascript API）。

我在 Spotify 的权限清单中包含了以下位置。

```
http://maps.googleapis.com
http://csi.gstatic.com
http://maps.gstatic.com 
```

javascript 控制台显示警告：“资源解释为其他，但传输的 MIME 类型未定义”并且我的 Google 地图实现未加载。

有没有人成功做到这一点？有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:37:27.787

我不确定这会有多大帮助，但这个[演示](https://github.com/mager/spotify-apps-tutorial)展示了如何在 Spotify 中显示 Polymaps 对象。

# php - PHP - 如何根据用户名查找用户级别？

> ID：10157291
> 
> 赞同：1
> 
> 时间：2012-04-14T20:56:45.400
> 
> 标签：php, mysql, login

我需要找到一种方法来使用户级别脱离用户的用户名。我的用户名变量是： `$username = $_SESSION['username'];` 我已经将所有用户级别存储在数据库中的表“用户”和列“级别”中。我需要一个 MySql 查询，它允许我像这样创建一个会话变量： `$_SESSION['level'] =` 提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:59:49.910

```
SELECT level FROM users WHERE username = 'username'; 
```

然后根据您用于访问数据库的内容（PDO 等）获取级别并将其插入会话中。

例如，如果您使用的是 PDO：

```
# Connect to the database
$db = new PDO("mysql:host=$host;dbname=$dbname", $username, $password);

$sql    = 'SELECT level FROM users WHERE username = :username';
$query  = $db->prepare($sql); # Prepare SQL statement to prevent SQL Injection Attack
$query->execute(array(':username' => $username)); # Bind parameter username
$_SESSION['level'] = $query->getColumn(); # Fetch data & Assign to session variable 
```

查看[http://www.php.net/manual/en/class.pdo.php](http://www.php.net/manual/en/class.pdo.php)了解有关使用 PDO 的更多信息。

注意：如果您使用函数来获取数据，并且您的 $db 连接语句在该函数之外，这意味着您的 $db 变量在函数范围之外，因此它将不起作用。您将需要使用`global`关键字来解决此问题。例子：

```
# database.php
$db = new PDO(...);

# otherfile.php
require_once("database.php");
function makeQuery($sql, $dataArr) {
    global $db; # tell the compiler we mean the $db object above
    $query = $db->prepare($sql);
    $query->execute($dataArr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:41:47.793

我建议在将用户名存储为会话变量时将级别存储为会话变量，这可能是在用户登录时

```
$sql="SELECT * FROM $tbl_name WHERE user = '$user' AND pass = '$pass'";
$result=mysql_query($sql); 
$user = mysql_fetch_array($result); 
$_SESSION['user'] = $user['user']; 
$_SESSION['level'] = $user['level']; 
```

这样您就不必每次都查询用户的级别，您可以随时使用 $_SESSION['level'] 调用其级别

# class - 带参数的模板类 - 使用过程中出错

> ID：10157294
> 
> 赞同：0
> 
> 时间：2012-04-14T20:57:03.387
> 
> 标签：class, templates, constructor, arguments

我有一个用于医院病房机器类型的模板类：

```
template <class T_machine>
class hospital_room
{
  public:
    hospital_room(const int room_num); 
...... 
```

在 hospital_room.hpp 文件中使用这个构造函数：

```
template <class T_machine>
hospital_room<T_machine>::hospital_room(const int room_num)
{
  m_room_num = room_num;
} 
```

但是，当我尝试申报病房时，就像这样

```
hospital_room<x_rayer>(1) test; 
```

它给了我一个错误，说它在 (1) 之后需要一个分号。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:02:47.060

这里可能存在几个问题，但对于初学者来说，如果你试图实例化一个`hospital_room`a 为 1 的对象`room_num`，你应该这样做：

`hospital_room<x_rayer> test(1);`

# javascript - 在 Objective-C 中更改 Javascript 变量

> ID：10157295
> 
> 赞同：1
> 
> 时间：2012-04-14T20:57:10.110
> 
> 标签：javascript, objective-c, ios, xcode

我正在使用此代码（在我的 .m 文件中）将变量传递到捆绑的 javascript 文件中。

```
[animalDesciption stringByEvaluatingJavaScriptFromString:@"var myIDcounterVariable = '1'"]; 
```

我进行了设置，通过按下 UIButton 来更改 UILabel 的值非常有用：

```
-(IBAction)next:(id)sender {
number++;
[currentNumber setText:[NSString stringWithFormat:@"%d", number]];

} 
```

如何使按钮更改 JavaScript 变量的值，就像我对标签所做的那样？

原谅我的磕磕绊绊！我对这种编程很陌生......

请告诉我是否需要提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:01:47.487

这就是你所需要的吗？

```
-(IBAction)next:(id)sender {
    number++;

    // You want Javascript like this to run:
    //     myIDCounterVariable = '1'
    // but with the current value of 'number' in it.

    // Construct the string:
    NSString* jsString = [NSString stringWithFormat:@"myIDCounterVariable = '%d'", number];

    // and run it
    [animalDesciption stringByEvaluatingJavaScriptFromString:jsString];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:45:29.927

我最终做的是将此 JavaScript 函数添加到我的 UIWebView：

```
<script type="text/javascript">
var max = 100;

function goToNext() {
    var hash = String(document.location.hash);
    if (hash && hash.indexOf(/hl/)) {
        var newh = Number(hash.replace("#hl",""));
        (newh > max-1) ? newh = 0 : void(null);
        document.location.hash = "#hl" + String(newh-1); 
    } else {
        document.location.hash = "hl1";        
    }
}

</script> 
```

然后用我的 IBAction 发送这个 JavaScript 调用，如下所示：

```
- (IBAction)next:(id)sender {
    [animalDesciption stringByEvaluatingJavaScriptFromString:@"goToNext()"];
} 
```

# c++ - 如何在具有此类实例的类中引用 typedef？

> ID：10157296
> 
> 赞同：1
> 
> 时间：2012-04-14T20:57:20.947
> 
> 标签：c++, static, typedef

有没有办法让这段代码工作，就像用点符号调用*静态函数一样？*

```
struct A{
    static void f(){ }
    typedef int t;
};

template<typename T> void f(){}

int main(){
    A a;
    a.f();          //legit
    f<a.t>();       //‘a’ cannot appear in a constant-expression, ‘.’ cannot appear in a constant-expression
    a.t somevar;    //invalid use of ‘A::t’
    f<a::t>();      //‘a’ cannot appear in a constant-expression
    a::t somevar;   //‘a’ is not a class, namespace, or enumeration
} 
```

编辑：伙计们，请在发布之前阅读问题并测试您的代码。这里的重点不是使用，而是通过 的*实例*“`A::t`调用” ，就像您可以使用静态方法一样。`t`*`A`*

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T21:00:31.093

您必须使用`A::t`，而不是`a.t`因为 typedef 就像`static`并且`a`是`A`.

* * *

**编辑**：与我上面所说的相反，它并不总是“喜欢`static`”。对于静态成员，有以下特殊规则：

> 可以使用限定 ID 表达式 X::s; 来引用类 X 的静态成员 s；不必使用类成员访问语法 (5.2.5) 来引用静态成员。可以使用类成员访问语法来引用静态成员，在这种情况下，对象表达式会被求值。[ 例子：
> 
> ```
> struct process {
>   static void reschedule();
> };
> process& g();
> 
> void f() {
>   process::reschedule(); // OK: no object necessary
>   g().reschedule();      // g() is called
> } 
> ```

由于 a`typedef`不是静态成员，*因此*此语法无效。

给定实例`a`而不是这个语法糖，唯一的获取方法`t`是获取它的类型。C++11 为我们提供了一个工具：

```
typedef decltype(a) a_type;
f<a_type::t>();
a_type::t somevar; 
```

但是，我看不到它的实际用途（好吧，也许在宏中，但每个人都知道模板更好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:05:32.187

您需要使用范围解析运算符（并从中返回 int 值`main`）：

```
int main()
{
    A a;
    A::t somevar = 0;
    return 0;    
} 
```

请注意，`typedef`如果您想在类外使用它，则引入的类型别名必须是公开可见的。如果你有：

```
class A
{
    static void f(){}
    typedef int t;
}; 
```

然后像上面的例子那样使用 A::t 会产生编译器错误（*“cannot access private typedef...”*）。您需要使用`public`访问器说明符：

```
class A
{
    static void f(){}
public:
    typedef int t;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T21:20:40.640

你可以这样做：

```
typedef decltype (a) AT;
typedef AT::t T;
f<T>();
T somevar; 
```

decltype 特定于 C++11

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T21:01:08.247

您将需要使用范围解析运算符，因此可能需要

```
f<A::t>();
A::t somevar; 
```

有关范围解析运算符的更多信息，请查看[C++ 范围解析运算符 ::](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=/com.ibm.vacpp7a.doc/language/ref/clrc05cplr175.htm)。*

# php - 用于存储和检索通知数据的数组设计

> ID：10157299
> 
> 赞同：2
> 
> 时间：2012-04-14T20:57:36.960
> 
> 标签：php, multidimensional-array

我想为社区站点存储和检索用户通知数据。当有人评论用户的帖子或有人关注用户时，应生成通知。我希望这种行为能够复制 Facebook 通知。所以它应该是这样的：

```
User A, User B and 3 other started following you.
User A, User Z and 2 others commented on your post Super Duper. 
```

如果我创建一个通用数组来保存通知，那么它将如下所示：

```
$notification = array ($notification_id, notification_time, $read_status, $notification_recipient_id, $notification_initiator_id, $post_id=NULL, $comment_id=NULL); // This array represents a single notification

$notifications = array ($notification, ...); // This array is made up of many single notification array. 
```

因此，如果我要从 $notifications 数组（包含所有单个通知数组的数组）中检索数据，我将使用 for 循环并在根据时间对数组进行排序后回显结果。这会给我这样的结果：

```
User A started following you.
User B started following you.
User C started following you.
User D started following you.
User E started following you.
User A commented on your post Super Duper.
User B commented on your post Super Duper.
User C commented on your post Super Duper.
User D commented on your post Super Duper. 
```

因此，如果您查看我打算实现的结果以及我将从目前的阵列设计中获得的结果，两者都不同。我可以通过对 $notifications 数组执行 N 次可能涉及展平、递归 for 循环、排序等的操作来实现所需的结果。但是，我认为我可以通过重新设计数据在数组中的存储方式来减少开销，这样当需要检索数据时，我可以执行最少数量的操作。此外，由于在显示数据时需要考虑读取状态，因此要达到我想要的结果会变得更加复杂。我请求有关设计数组结构的建议以及如何从数组中检索数据以实现我想要的结果的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:03:26.470

您可以执行以下操作：

*   选择“以下”类型的通知，其中 read_status = 'not_read', LIMIT 2
*   计算“以下”类型的通知
*   选择“comment”类型的通知，其中 read_status = 'not_read', LIMIT 2
*   计算“评论”类型的通知

每当有人阅读通知时，您将其设置为“已阅读”。

每当有人评论或关注某事时，您都会为所有相关人员创建通知。例如，这些人是参与讨论的所有人，或者只是被回复的人。评论也是一样。

这样，您就可以在不处理太多数据的情况下格式化和显示此消息。（您可能可以打包这些请求以提高效率，但您明白了）

> 用户 A、用户 B 和其他 3 人开始关注您。
> 用户 A、用户 Z 和其他 2 人对您的帖子 Super Duper 发表了评论。

我会说为这样的问题改变你的数据结构是矫枉过正的。使用这种方法，您将不断地重新定义您的数据模型，这很快就会成为一场噩梦。数据模型应该反映应用程序的大约束，而不是像这样的“小”格式问题。

# c - 在 C 中检索 Windows 进程的完整列表

> ID：10157302
> 
> 赞同：6
> 
> 时间：2012-04-14T20:58:10.733
> 
> 标签：c, windows, winapi, windows-7

我正在为 Windows 开发一个简单的进程统计收集库。我正在使用`EnumProcesses()`函数枚举进程，并尝试使用`OpenProcess()`带有 PROCESS_QUERY_INFORMATION 标志的调用来打开它们。但是，后者在一堆系统进程中失败了。同时，我看到类似的应用程序（sysinternals 工具、任务管理器等）似乎能够检索有关这些进程的信息，即使不需要管理员权限。我尝试启用 SeDebugPrivilege 权限，但只有当我以管理员身份运行我的程序时它才有帮助——而且我仍然无法打开空闲进程、系统进程和 audiodg 进程（我希望能够检索他们的一致性信息）。

所以问题是：我怎样才能获得关于*所有*进程的信息（我看到它是由 3rd-party 应用程序完成的，但我看不到如何）？是否可以在没有管理员权限的情况下执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:07:10.440

您是否熟悉[CreateToolhelp32Snapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx)以及此功能以及[Process32First](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx)。

我发现了这个[代码项目](http://www.codeproject.com/Articles/6072/Win32-APIs-for-Process-Retrieval)，当我不久前使用它时，它对我帮助很大......

# php - 抓取任何以 http 开头的字符串，直到 php 中的第一个空格字符

> ID：10157308
> 
> 赞同：2
> 
> 时间：2012-04-14T20:58:50.640
> 
> 标签：php, regex

我在 php 中使用 preg_replace() 获取一些文本时遇到问题。我只是想删除所有以 http|https|www 开头的文本，直到第一个空格字符。我目前正在使用： (http|https|www)\S+ 作为 preg_replace() 中的正则表达式。但是，在运行代码时出现此错误： 警告：preg_replace(): Unknown modifier '\' 我可以在文本编辑器中使用相同的正则表达式，例如 Sublime Text 2 没有问题。任何想法为什么我会收到此错误？是否有另一种方法可以使用正则表达式获取我正在寻找的文本？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:03:26.687

您必须分隔正则表达式。这通常是一个斜杠 ( `/`)，但也可以是一对括号。在第二个分隔符之后可以跟多个分隔符（多行正则表达式、忽略空格、不区分大小写等）。`\`不是有效的修饰符，因此 PHP 会抱怨。

如下修改您的正则表达式：

```
preg_replace('/(http|https|www)\S+/', …, …); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:05:53.340

试试这个：

```
$string = preg_replace( '%(http|https|www).*?\s%', '', $string ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:03:30.030

为什么不在正则表达式前面使用 ^：

```
/^(http|http|www)/ 
```

这仅在字符串的开头匹配

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T21:10:21.113

**这个有效：** [演示：[http](http://regexr.com?30l4d) ://regexr.com?30l4d ]

```
$newstring = preg_replace( "/((https?|www).*?)\s/", "", $string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T21:10:35.933

你必须小心字符串是如何用 php 转义的：

例如，`"\s"`是一个转义的 s，并且`'\s'`是一个后跟一个 s 的反斜线。

也不要忘记在正则表达式的开头和结尾添加斜杠。例如：`'/myregexp.*/'`

# yii - yii 在单击一行时禁用 CGridView 中的 onclick 行为

> ID：10157310
> 
> 赞同：0
> 
> 时间：2012-04-14T20:59:08.710
> 
> 标签：yii

似乎 CGridView 中的默认行为是，当有人单击该行时，它会将“选定”类添加到该行。我该如何摆脱它？单击该行时，我不希望发生任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T10:16:43.907

您必须将`$selectableRows`属性设置为`0`：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
  'selectableRows' => 0,
  /*the rest of your initialization properties*/
)); ?> 
```

[你可以在 Yii 类参考中看到它。](http://www.yiiframework.com/doc/api/1.1/CGridView/#selectableRows-detail)

# asp.net - 中心 ASP 母版页

> ID：10157315
> 
> 赞同：0
> 
> 时间：2012-04-14T20:59:23.460
> 
> 标签：asp.net, css, positioning

首先让我说这是我完成的第一个 ASP.NET 项目。我尝试使用中心标签，将所有内容包含在 div 中并将其设置为居中，以及带有自动边距的表格标签，但没有任何效果。有人可以在这里指出我正确的方向吗？

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="Server.SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head runat="server">
        <title></title>
        <link
            href="~/Styles/Site.css"
            rel="stylesheet"
            type="text/css"
        />
        <asp:ContentPlaceHolder
            ID="HeadContent"
            runat="server">
        </asp:ContentPlaceHolder>
    </head>

<body>
    <table style="margin-right: auto; margin-left: auto;">
        <form id ="form1" runat ="server">
            <div class="page" 
                style="background-color: #000000; position: absolute; top: 10px; left: 160px; width: 1000px; height: 100px;">

                    <asp:Image ID="Image1" runat="server" ImageUrl="~/Resources/image.png"
                        style="z-index: 1; left: 9px; top: 7px; position: absolute; height: 76px; width: 204px" />

                    <asp:Button ID="Button4" runat="server" BackColor="#333333" ForeColor="White" Height="23px" onclick="Button4_Click"
                        style="z-index: 1; left: 931px; top: 65px; position: absolute" Text="Login" Width="60px" />

                    <asp:Label ID="Label1" runat="server" Font-Underline="True" ForeColor="White"
                        style="z-index: 1; left: 727px; top: 67px; position: absolute; width: 193px; text-align: right">
                    </asp:Label>
            </div>

            <div 
                style="z-index: 1; left: 192px; top: 165px; position: absolute; height: 445px; width: 938px; color: #000000; background-color: #FFFFFF;">

                    <asp:ContentPlaceHolder
                        ID="MainContent"
                        runat="server">
                    </asp:ContentPlaceHolder>
            </div>

            <asp:Panel ID="Panel1" runat="server" BackColor="#003366"
                style="z-index: 1; left: 160px; top: 128px; position: absolute; height: 36px; width: 1002px">

                <asp:Button ID="Button5" runat="server" BackColor="#336699" BorderStyle="None" Height="23px" onclick="Button5_Click"
                    style="z-index: 1; left: 220px; top: 7px; position: absolute; height: 23px; width: 60px;" Text="Users" Width="60px" />

                <asp:Button ID="Button1" runat="server" BackColor="#336699"
                    style="z-index: 1; left: 10px; top: 7px; position: absolute; height: 23px; width: 60px;" Text="Home" BorderStyle="None" onclick="Button1_Click"/>

                <asp:Button ID="Button2" runat="server" BackColor="#336699"
                    style="z-index: 1; left: 80px; top: 7px; position: absolute; height: 23px; width: 60px" Text="About" BorderStyle="None" onclick="Button2_Click" />

                <asp:Button ID="Button3" runat="server" BackColor="#336699" BorderStyle="None" 
                    style="z-index: 1; left: 150px; top: 7px; position: absolute" Text="Profile" Height="23px" onclick="Button3_Click" Width="60px" />

                <asp:Button ID="Button6" runat="server" BackColor="#336699" BorderStyle="None" 
                    style="z-index: 1; left: 290px; top: 7px; position: absolute" Text="Servers" Height="23px" onclick="Button6_Click" Width="60px" />
            </asp:Panel>
        </form>
        <div style="z-index: 1; left: 160px; top: 165px; position: absolute; height: 445px; width: 32px; background-color: #FFFFFF;">
        </div>

        <div style="z-index: 1; left: 1130px; top: 165px; position: absolute; height: 445px; width: 32px; background-color: #FFFFFF;">
        </div>
    </table>
</body>
</html> 
```

目前我有，`<table style="margin-right: auto; margin-left: auto;">`但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:16:35.240

首先，您`div`在`class="page"`属性上设置了绝对定位。删除它，因为它总是将您的 div 定位在`top:10px; left:160px`;

事实上，你有很多绝对定位——你并不真正需要它，应该摆脱它。您是否使用 Visual Studio 或类似工具来设计此页面？有些工具会不时添加这些额外的 CSS。

当我想实现居中时，我通常使用具有定义宽度的 DIV；然后我可以使用 left 属性和边距来模拟居中对齐的内容。这也往往适用于各种浏览器，尤其是旧版本的 Internet Explorer。

如果你声明一个 div：

```
<div id="PageContainer">

</div> 
```

然后使用以下 CSS：

```
#PageContainer{
    position:               absolute;
    float:                  left;
    left:                   50%; 
    top:                    20x;
    width:                  500px;
    margin:                 0px 0px 0px -250px; /* half of the width */
    background-color:       red;
} 
```

然后它将在 div 中居中任何内容。定义宽度，然后将边距设置为宽度的一半是使用此技术时的关键。

[在这里查看一个活生生的例子。](http://jsfiddle.net/8wGNy/)

Stack Overflow 使用一种更现代的方法 - 这是您尝试过的方法，但关键是您需要定义宽度。通过检查 StackOverflow 的 CSS（使用 IE 开发人员工具栏或 firebug 或类似工具），如果我们查看标题`div`标签的 CSS，我们会看到：

```
#header{
    width:    960px;
    height:   120px;
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
} 
```

即设置 a`width`然后设置`margin-left`and `margin-right`to`auto`应该足够了。

# ruby-on-rails - 从带有 RoR 的文本单元中获取第一段？

> ID：10157320
> 
> 赞同：4
> 
> 时间：2012-04-14T20:59:46.617
> 
> 标签：ruby-on-rails, ruby, text, ruby-on-rails-3.2

标题几乎解释了它。我正在使用 Ruby 1.9.3 和 Rails 3.2.2 为自己编写一个博客引擎，我需要能够从帖子中获取第一段（作为文本单元存储在数据库中）以用作帖子头版摘要。最简单的方法是什么？

谷歌在这个问题上透露的很少；这似乎不是一个普遍的需求。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T21:11:02.843

一旦你开始思考在你的世界中究竟是什么定义了“段落”，答案就会变得相当明显。

如果它是第一个字符列表，后跟两个换行符？就像是

```
str.split("\n\n", 2)[0] 
```

可以工作。

如果您有 HTML 并且您的段落由`<p>`标签定义，请使用 nokogiri 之类的

```
Nokogiri::HTML.parse(input_string).css('p').first.text 
```

但是再次，这完全取决于你如何定义你的段落。一旦您开始考虑您想要拥有什么，例如如何以抽象方式将输入数据转换为输出数据，这样的事情通常会自行解决。所需的算法自然来自这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:52:01.000

万一这可能对某人有所帮助，我通过将 Holger Just 的 Nokogiri 解决方案与 RedCloth 相结合来获得 html 标签，从而在 RoR 中获得了预期的结果：

```
Nokogiri::HTML.parse(raw RedCloth.new(input_string).to_html).css('p').first.text 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-09T13:34:48.840

str.lines[0] 应该给你第一句话......或者如果你不介意在句子中间分裂，则只需使用 truncate() ActionView Helper

# c# - PostgreSQL 函数 TEMP TABLE 替代方案

> ID：10157323
> 
> 赞同：0
> 
> 时间：2012-04-14T20:59:52.187
> 
> 标签：c#, postgresql, create-table

```
CREATE OR REPLACE FUNCTION "getArticulos"(refcursor)
RETURNS refcursor AS
$BODY$
BEGIN
    CREATE TEMP TABLE "Temporal" AS
    SELECT a."idArticulo", SUM("Stock") AS "Stock"
    FROM "ArticuloMarca" AS am, "Articulo" AS a
    WHERE a."idArticulo" = am."idArticulo"
    GROUP BY a."idArticulo"
    ORDER BY a."idArticulo";
    OPEN $1 FOR
        SELECT DISTINCT(a."idArticulo"), a."Nombre", a."Descripcion", a."idFamilia", f."Nombre" AS "Familia",a."idTipo", t."Nombre" AS "Tipo", tmp."Stock", a."MinStock", a."MaxStock"
        FROM "Articulo" AS a, "ArticuloMarca" AS am, "Familia" AS f, "Tipo" AS t, "Temporal" AS tmp
        WHERE a."idFamilia" = f."idFamilia" AND a."idTipo" = t."idTipo" AND a."idArticulo" = tmp."idArticulo"
        ORDER BY a."idArticulo";
    RETURN $1;
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

那是我的功能，但我一直试图不使用 TEMP TABLE，我需要一些我不必在会话中删除的东西。

我试过使用 RECORD，一种叫做 refcursor 的东西，但我只得到一行，我需要整个结果。知道我可以使用什么吗？¿

我尝试在 RETURN $1 之后和之前添加 DROP TABLE "Temporal"；但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T22:03:31.597

我认为您不需要为简单的查询创建 TEMP 表（甚至不需要创建函数）。更重要的是，如果您使用的是提供[WITH 查询](http://www.postgresql.org/docs/9.0/static/queries-with.html)的 Postgresql 9.x ，您应该阅读相关内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:50:48.737

请检查[文档](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)的这一部分。目前还不清楚你想要实现什么，但我猜你需要一个集合返回函数。

我希望这段代码可以满足您的需要：

```
CREATE OR REPLACE FUNCTION "getArticulos"(
    OUT "Articulo"."idArticulo",
    OUT "Articulo"."Nombre",
    OUT "Articulo"."Descripcion",
    OUT "Articulo"."idFamilia",
    OUT "Familia"."Nombre",
    OUT "Articulo"."idTipo",
    OUT "Tipo"."Nombre",
    OUT int4, -- I cannot get the source table for “Stock” column
    OUT "Articulo"."MinStock",
    OUT "Articulo"."MinStock"
    )
RETURNS SETOF record
AS $BODY$
BEGIN
    RETURN QUERY
    WITH "Temporal" AS (
    SELECT a."idArticulo", SUM("Stock") AS "Stock"
    FROM "ArticuloMarca" AS am, "Articulo" AS a
    WHERE a."idArticulo" = am."idArticulo"
    GROUP BY a."idArticulo"
    ORDER BY a."idArticulo")
        SELECT DISTINCT(a."idArticulo"), a."Nombre", a."Descripcion", a."idFamilia", f."Nombre" AS "Familia",a."idTipo", t."Nombre" AS "Tipo", tmp."Stock", a."MinStock", a."MaxStock"
        FROM "Articulo" AS a, "ArticuloMarca" AS am, "Familia" AS f, "Tipo" AS t, "Temporal" AS tmp
        WHERE a."idFamilia" = f."idFamilia" AND a."idTipo" = t."idTipo" AND a."idArticulo" = tmp."idArticulo"
        ORDER BY a."idArticulo";
END;
$BODY$
LANGUAGE plpgsql VOLATILE COST 100; 
```

由于显而易见的原因，我无法测试此功能。此外，请考虑更改`LANGUAGE`为`SQL`，因为 plpgsql 开销没有理由执行此操作。

# liferay - Liferay 6：无法从 MVCPortlet 重定向到 JSP

> ID：10157325
> 
> 赞同：1
> 
> 时间：2012-04-14T20:59:55.463
> 
> 标签：liferay, liferay-6

根据我想从我的 MVCPortlet 类重定向到 JSP 页面的条件，在设置`action-url-redirect`为 true in之后`liferay-portlet.xml`，我尝试了操作

```
Response.sendRedirect() 
```

我在服务器控制台中收到此错误：

> 设置渲染参数已被调用

然后我尝试使用：

```
include("/html/satportlet/view2.jsp", request, response); 
```

没有抛出异常，但在这种情况下仍然没有发生任何事情，我不知道为什么。

另一个问题，我假设在 Liferay 中 include 和 sendRedirect 的概念与 JSP 和 Servlet 中的概念相同吗？

我正在使用 Liferay 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:29:12.107

不需要重定向，在您的操作方法的末尾添加以下内容：

`response.setRenderParameter("jspPage", "/url/to/your/jsp");`

这将导致页面呈现为`"/url/to/your/jsp"`对操作的响应。

事实上，我唯一需要覆盖的时间`doView`是当我想要在入口点视图 jsp 显示之前进行自定义处理时（以避免在 jsp 本身中编写代码，因为 Liferay 只有`jsp-page`/`view-template`作为 init 参数而不是控制器操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T10:46:25.500

portlet API 区分动作阶段和呈现阶段： 在动作阶段（例如，当您有可用的 ActionRequest/ActionResponse 时）您不应该考虑 HTML 输出。

在渲染期间，您决定要显示什么 - 因此您只需在操作处理期间记住一个属性或渲染参数。渲染时，您将重定向到/包含目标 JSP。

# css - 网页中的可滚动容器

> ID：10157326
> 
> 赞同：6
> 
> 时间：2012-04-14T21:00:05.587
> 
> 标签：css, html, scrollbar

我想在带有滚动条的网页内创建一个视口。

在这个视口中，我想将图像拼贴放置在相对于彼此的任意偏移处。

我添加的第一张图像应该在视口中居中。它可能没有视口那么大。

随着时间的推移添加其他图像，它们是来自其他图像的一些极坐标。我可以将极坐标转换为 XY 偏移。

当我添加图像时，我可能希望它们位于所有其他图像之上或高于所有其他图像等等；我可以使用负偏移量吗？视口上的滚动条是否可以自动滚动到子级使用的坐标范围内，而不是从 0,0 开始？

我将哪个容器类与哪些 CSS 设置一起用于视口？我使用什么 CSS 位置设置来定位孩子？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T16:30:40.440

要使 div 或块元素能够滚动，请使用溢出属性： [http ://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow)

对于定位和大小，请查看： http: [//www.wickham43.net/divboxes.php](http://www.wickham43.net/divboxes.php)

这是我在 1 秒内搜索到的 CSS 拼贴图库。 [http://www.entheosweb.com/tutorials/css/collage_gallery.asp#.T42Z06uXQ_Q](http://www.entheosweb.com/tutorials/css/collage_gallery.asp#.T42Z06uXQ_Q)

（您的问题不具体，如果以上没有帮助，请编辑）

# php - xampp 更改文档根目录

> ID：10157333
> 
> 赞同：10
> 
> 时间：2012-04-14T21:01:26.630
> 
> 标签：php, eclipse, xampp, apache

我有 Eclipse IDE，并且在“C:/users/matt/documents/web/”中设置了一个工作区。我在文件夹 test“C:/users/matt/documents/web/test”中建立了一个名为 test 的项目。我已将 httpd 文件中的 Document root 更改为“C:/users/matt/documents/web/”，对于

我将“C:/users/matt/documents/web/test”放入浏览器，但我无法访问工作区中的文件，对于`http://localhost/xampp/web/test/`,`http://localhost/web/test/`和`http://localhost/test/`.

我对服务器配置不了解，请帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-14T21:15:13.410

c:\XAMPP\apache\conf\httpd.conf

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot C:/users/matt/documents/web/
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory C:/users/matt/documents/web/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory> 
```

重启apache web服务器，然后...输入： [http://localhost/test](http://localhost/test)

检查过去的 [问题](https://stackoverflow.com/questions/1408/make-xampp-apache-serve-file-outside-of-htdocs)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-14T21:14:22.117

更改配置后重新启动您的网络服务器！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-26T22:03:49.790

确保您也更改了 DocumentRoot `your\path\to\apache\conf\extra\httpd-ssl.conf`。

# ios - 当我调用 performFetch 几次时，我的应用程序卡住了

> ID：10157334
> 
> 赞同：2
> 
> 时间：2012-04-14T21:01:31.683
> 
> 标签：ios, core-data, cs193p

我正在使用斯坦福课程 cs193p 中的 CoreDataTableViewController，并在我的 viewWillAppear 中调用

```
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.dataBase.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil]; 
```

在某些随机情况下，这会使我的应用程序冻结（它不会崩溃，只会冻结）。在 CoreDataTableViewController 中，setter 调用 [self performFetch]，如下所示：

```
- (void)performFetch
{
    if (self.fetchedResultsController) {
        if (self.fetchedResultsController.fetchRequest.predicate) {
            if (self.debug) NSLog(@"[%@ %@] fetching %@ with predicate: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName, self.fetchedResultsController.fetchRequest.predicate);
        } else {
            if (self.debug) NSLog(@"[%@ %@] fetching all %@ (i.e., no predicate)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), self.fetchedResultsController.fetchRequest.entityName);
        }
        NSError *error;
        NSLog(@"before");
        [self.fetchedResultsController performFetch:&error];
        NSLog(@"after");
        if (error) NSLog(@"[%@ %@] %@ (%@)", NSStringFromClass([self class]), NSStringFromSelector(_cmd), [error localizedDescription], [error localizedFailureReason]);
    } else {
        if (self.debug) NSLog(@"[%@ %@] no NSFetchedResultsController (yet?)", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    }
    [self.tableView reloadData];
} 
```

它卡住的那条线是

```
[self.fetchedResultsController performFetch:&error]; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-03T14:17:34.397

就我而言，我在 viewWillAppear 方法上调用 PerformFetch，**它必须在 viewDidLoad() 方法上调用**，即使您使用的是导航控制器。正如我们所知，第二次以后 veiwWillappear 方法不会被调用，在调用 performeguewithidentifer(push) 的情况下，不用担心，每次在 move-back-next 时都会调用 fetechresultcontroller。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:20:14.393

该调用不会挂起您的 GUI，因为它发生在后台线程中。因此，如果您的 GUI 挂起，那就是另一个问题了。

话虽如此，您不应该在正常操作中调用它。通常，您应该执行以下两项操作之一来保存 UIManagedDocument 中的更改：

使用撤消管理器，或调用

```
[doc updateChangeCount: UIDocumentChangeDone]; 
```

# c# - 求解器基础优化 - 一维装箱

> ID：10157336
> 
> 赞同：6
> 
> 时间：2012-04-14T21:01:46.037
> 
> 标签：c#, optimization

我想优化将大理石块装载到卡车上。我不知道是否可以为此目的使用 Solver Foundation 类。之前，我开始写代码，我想在这里问一下。

*   大理石的重量可以在 1 到 24 吨之间。
*   一辆卡车最多可容纳 24 吨。
*   它可以加载尽可能多的大理石立方体，因为它最多可以占用 24 音调，这意味着没有音量限制。
*   根据时间的不同，可以有 200 到 500 个不同的大理石块。

目标 - 目标是以最少的卡车装运量装载大理石块。

在不编写大量 if 条件和 for 循环的情况下如何做到这一点？

我可以为此目的使用 Microsoft Solver Foundation 吗？

我阅读了 Microsoft 提供的文档，但是我找不到与我类似的场景。

`M1+ M2 + M3 + .... Mn <=24` 这是一辆卡车装运的。

假设有 200 种不同的大理石重量，而大理石重量是浮动的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T12:01:20.123

您可以使用 Microsoft Solver Foundation 来解决此问题。可以在[此处](http://www.amsterdamoptimization.com/models/msf/oml.pdf)找到此类解决方案的示例，其中装箱问题的 OML 如下：

```
Model[ 
  Parameters[Sets,Items,Bins], 
  Parameters[Integers,OrderWidth[Items],BinWidth[Bins]], 

  Decisions[Integers[0,1],x[Items,Bins]], 
  Decisions[Integers[0,1],y[Bins]], 

  Constraints[    
    Foreach[{i,Items},Sum[{j,Bins}, x[i,j]]==1 ], 
    Foreach[{j,Bins}, Sum[{i,Items}, OrderWidth[i]*x[i,j]] <= BinWidth[j]], 
    Foreach[{i,Items},{j,Bins}, y[j] >= x[i,j]] 
  ], 

  Goals[Minimize[UsedBins->Sum[{j,Bins},y[j]]]] 
] 
```

将 OrderWidth 更改为 MarbleWeight 并将 BinWidth 更改为 TruckCapacity （或者在您的情况下仅为 24）很容易

# grails - grails ui自动完成：如何传递其他字段？

> ID：10157338
> 
> 赞同：0
> 
> 时间：2012-04-14T21:02:12.520
> 
> 标签：grails, autocomplete, grails-plugin

我正在尝试使用 grails ui 自动完成组件。看起来很简单，但我一直在尝试将参数传递给 ajax 调用。我需要的是每次更改选择元素（tempType）时，对操作（searchTemplateByNameAndType）的ajax调用也会发送选择字段的值。在我的控制器中，我有一个方法，例如：

```
Template.findAllByNameAndType(params.query, params.tempType). 
```

我已经尝试过使用 grails ui 自动完成提供的属性“dependsOn”。但我也发现 dependsOn 有一个已知的错误，并且不会将值发送到控制器。所以现在我尝试了几个小时使用属性“queryAppend”传递这个参数，但没有成功。这是我的做法：

```
<span class="L80">
    <g:select class="L80" id="tempType" name="tempType"
    from="${Type?.values()}" keys="${Type.values()*.name()}" 
    onchange='updateTypeValue(this.value);' value=""/>
</span>

<span id="templates" class="L520">

<gui:autoComplete 
        id="templateName1"
    class="campo L490"
    resultName="result"
    controller="template"
    action="searchTemplateByNameAndType"
    queryAppend="tempType=????"/>

</span> 
```

有人知道将选择字段值作为参数传递给 queryAppend 的方法吗？我现在真的很坚持。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:42:36.627

你能用吗

```
 document.getElementById(\'tempType\').value 
```

像这样：

```
 <gui:autoComplete 
    id="templateName1"
    class="campo L490"
    resultName="result"
    controller="template"
    action="searchTemplateByNameAndType"
    queryAppend="tempType=" + document.getElementById(\'tempType\').value/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T21:43:31.177

之前忘记回答了。但是我当然无法做到这一点，原因如下：

1 - grails 标记“gui:autoComplete”在服务器端处理，然后转到浏览器。

2 - document.getElementById('whatever') 在客户端处理，在 web 浏览器中，在 gui:autocomplete 已经执行之后。因此，grails 已经为 Web 浏览器提供了响应。

3 - 如果我尝试在服务器端连接一个 javascript 值，例如 document.getElementById('whatever').value，它还没有准备好。一旦控制器返回。

值得注意的是 queryAppend 确实不接受通过加号运算符的连接，因为一旦关闭引号，就是这样，您已经输入了将提交的值。不过，您可以使用 ${} 表示法连接一个值，这更像 grails。

# ios - 为什么 selectAnnotation 在这种情况下不起作用？

> ID：10157341
> 
> 赞同：0
> 
> 时间：2012-04-14T21:02:20.083
> 
> 标签：ios, mapkit

当我的地图视图出现以下代码时，我正在设置 MapView 注释，除了选择之外，所有这些似乎都工作正常：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    MapAnnotation *pinpoint = [[MapAnnotation alloc] initWithTitle:@"Title" andCoordinate:loc];

    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(loc, 1500, 1500);
    [self.mapView setRegion:region animated:true];
    [self.mapView addAnnotation:pinpoint];
    [self.mapView selectAnnotation:pinpoint animated:true];  //nothing happens!?   
} 
```

但是如果在这个回调中调用相同的方法，它工作正常：

```
- (void)mapView:(MKMapView *)mv didAddAnnotationViews:(NSArray *)views
{
    MKAnnotationView *annotationView = [views objectAtIndex:0];
    id <MKAnnotation> mp = [annotationView annotation];
    [mv selectAnnotation:mp animated:YES];
} 
```

这是什么原因造成的？这不是调用 selectAnnotation 的合适位置吗？我是否必须等到 viewForAnnotation 被调用之后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:25:44.930

必须先添加注释视图，然后才能选择注释。

请看这个热门问题：

[如何在不触摸引脚的情况下触发 MKAnnotationView 的标注视图？](https://stackoverflow.com/questions/978897/how-to-trigger-mkannotationviews-callout-view-without-touching-the-pin)

# java - Slick2D 字体不起作用

> ID：10157346
> 
> 赞同：1
> 
> 时间：2012-04-14T21:02:47.223
> 
> 标签：java, fonts, slick2d

我有 Slick2D 库并用 Java 制作游戏。我一直想知道，只是一个简短的问题，你如何在 Graphics 对象上设置字体以绘制不同的字体。我不能让它工作。我认为它与 AngelCode 有关，但这需要一些不是“.tff”的格式，所以我不知道。

那你能告诉我你是怎么做到的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T22:12:45.287

您可以使用 angel code 的 BMF 字体工具，该工具使用存储字符图像的字形图像和描述图像文件的文本文件制作位图字体文件（仅限 windows，Herio.jar 类似并包含在 slick 中，但它仅有时有效，反复撞击我）

1.  [在此处](http://www.angelcode.com/products/bmfont/)获取 BMF 字体并使用随附的 Windows 安装程序进行安装。完成此操作后，使用 GUI 选择字体、大小等（请注意，您必须为每个大小和字体制作 1 个字体/glyh 图像对）然后突出显示包含您要使用的字符的框，注意slick 最多只能支持 256 个（我认为）字符。

2.  您需要更改一些导出设置，以便 slick 能够识别文件。转到文件-> 导出选项并更改“位通道”（我认为这就是它的名称）A -> 字形 R、G 和 B -> 一个。将预设设置为自定义，将纹理设置为 .png 文件，您的配置就完成了。

3.  将新创建的字体文件 [文件 -> 将位图字体另存为]（是的，它将生成一个字形图像 (.png) 和一个扩展名为 .fnt 的文本描述符文件）到相应的数据目录中。

4.  使用 AngelCodeFont 构造器对其进行编码：

    `fnt = new AngelCodeFont("LOCATION OF .fnt FILE", new Image("LOCATION OF .png GLYPH IMAGE");`

然后您可以直接使用它进行绘制：

```
fnt.drawString(float x, float y, "TEXT TO DISPAY"); 
```

或者你可以

将当前图形字体设置为AngelCodeFont，直接通过图形类进行绘制。

```
GraphicsObject.setFont(fnt);
GraphicsObject.drawString("THIS WLL DRAW IN THE ANGEL CODE FONT"); 
```

希望这有帮助：D

更多信息在这里，在 API 文档中： [http ://slick.cokeandcode.com/javadoc/](http://slick.cokeandcode.com/javadoc/)

# asp.net-mvc-3 - 如何使用部分视图创建动态数量的可能子对象？

> ID：10157350
> 
> 赞同：0
> 
> 时间：2012-04-14T21:03:12.340
> 
> 标签：asp.net-mvc-3

我有一个父对象，其中包含一个属性，该属性是子对象列表。我想拥有它，以便在加载表单以创建父对象时使用部分视图来创建子对象列表。

问题是我必须知道如何填充子对象列表。我可以做一个对象，但可能的孩子的动态列表很困难。有任何想法吗？

@Html.RenderPartial("_CreateChild", Model.Children);

```
public class Parent
{
    private List<Child> _list;

    public Guid Id
    {
        get;
        set;
    }

    public List<Child> Children
    {
        get
        {
            return _list;
        }
        set
        {
            _list = value;
        }
    }

    public Parent()
    {
        _list = new List<Child>();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:23:10.727

在父视图中，您可以有一个调用局部视图并一次传递单个子对象的 foreach 循环，例如：

```
@foreach(var _child in Children) {
  @Html.RenderPartial("_CreateChild", _child);
} 
```

如果子列表很大，这可能不是一个很好的选择，但如果您的列表小于 100 应该没问题。

# c# - 设置MenuItem点击事件调用注销功能

> ID：10157360
> 
> 赞同：1
> 
> 时间：2012-04-14T21:04:29.667
> 
> 标签：c#, asp.net, menuitem, logout

我有一个导航到登录页面的菜单项“登录”。当用户登录时，我将该菜单项的文本更改为“注销”。单击时，我希望它返回以清除会话，转到登录页面，并将文本更改回“登录”。这工作......有点。我遇到的问题是我不知道在单击菜单项时如何调用函数，因此当用户单击“注销”时，登录页面会加载，并且在页面加载时会话会被​​清除，但是因为它是在页面加载之前没有清除，它仍然显示有一个会话（用户名仍然出现，菜单项文本没有改变）。如何设置它以便在单击“注销”而不是在登录页面加载时清除会话？

这是我的菜单代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="LeftSideMenu.ascx.cs"   Inherits="EVMAnywhereWeb.Controls.LeftSideMenu" %>

<div id="leftSideMenu">
<asp:menu ID="menu1" runat="server" Orientation="Vertical" RenderingMode="List">
<StaticMenuItemStyle VerticalPadding="5" />
<DynamicMenuItemStyle VerticalPadding="5" />
<Items>
    <asp:menuitem navigateurl="~/Login.aspx" Text="Login" Value="Login"></asp:menuitem>
    <asp:menuitem navigateurl="~/Register.aspx" Text="Register" Value="Register"></asp:menuitem>
    <asp:menuitem navigateurl="~/Projects.aspx" Text="Projects" Value="Projects"></asp:menuitem>
    <asp:menuitem navigateurl="~/Dictionary.aspx" Text="Dictionary" Value="Dictionary"></asp:menuitem>
 </Items>   
</asp:menu>
</div> 
```

这是我用来更改文本的代码（在代码隐藏中）：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["SessionUserName"] != null)
        {
            menu1.Items[0].Text = "Logout";
            menu1.Items[1].Text = "My Account";

        }
    } 
```

在登录页面代码隐藏中，我有这个来清除会话：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (Session["SessionUserName"] != null)
        {
            Session.Abandon();
            Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            Response.Cache.SetNoStore();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:42:56.567

调用您的代码以清除 OnInit 而不是 Page_Load 中的会话。

# c# - 在控制参数所在的 LinqDataSource 中找不到控件

> ID：10157369
> 
> 赞同：1
> 
> 时间：2012-04-14T21:05:39.633
> 
> 标签：c#, linq, gridview

我正在尝试设置一个下拉列表来过滤网格视图。这是我初始化ddl的方式：

```
public partial class MyClass : System.Web.UI.Page
{
  DropDownList brList;

  protected void Page_Init(object sender, EventArgs e)
  {
    brList = new DropDownList();
    brList.ClientIDMode = System.Web.UI.ClientIDMode.Static;
    brList.ID = "ddlBR";
  }

... 
```

稍后在 gridview 的 prerender 事件中，我构建了一个新的 gridview 行，将数据添加到下拉列表并将其插入到 gridview 的第一行：

```
 //filter for BR
  TableHeaderCell brCell = new TableHeaderCell();
  brList.AutoPostBack = true;
  brList.Items.Add(new ListItem(" ", "%"));
  brList.DataSource = ldsBrCodes;
  brList.AppendDataBoundItems = true;
  brList.DataTextField = "BR";
  brList.DataValueField = "BR";
  brList.DataBind();
  brCell.Controls.Add(brList);
  theNewRow.Cells.Add(brCell); 
```

这是填充网格视图的 LinqDataSource：

```
<asp:LinqDataSource ID="ldsMyLDS" runat="server" 
    ContextTypeName="DataClassesDataContext" EntityTypeName="" 
    TableName="vwMyReport"  AutoGenerateWhereClause="true">
    <WhereParameters>
      <asp:Parameter DefaultValue="W" Name="MPC" Type="String" />
      <asp:ControlParameter Name="BR" ControlID="ddlBR" Type="String" />
    </WhereParameters>
  </asp:LinqDataSource> 
```

我收到一个错误：在 ControlParameter 'BR' 中找不到控件 'ddlBR'。

我猜这是一个页面生命周期问题，当我试图添加这个参数时。我也尝试在后面的代码中添加参数，如下所示：

```
ldsMyLDS.WhereParameters.Add(new ControlParameter("paramBR", System.Data.DbType.String, "ddlBR", "BR")); 
```

我已将它添加到 gridview PreRender 事件的最后一行，但它仍然说找不到它。什么时候可以添加参数以便可以找到底层控件？

# mysql - 包含字符串的组记录

> ID：10157371
> 
> 赞同：1
> 
> 时间：2012-04-14T21:06:04.337
> 
> 标签：mysql, sql, group-by

我有一个包含以下数据的表格：

```
+----+-----------------+
| id | country         |
+----+-----------------+
|  1 | i'm from usa    |
|  2 | i'm from italy  |
|  3 | i'm from china  |
|  4 | i'm from india  |
|  5 | she's from usa  |
|  6 | he's from china |
+----+-----------------+ 
```

我想通过检查列中的国家名称来了解每个国家的人口`country`。我想要这样的东西：

```
+---------+------------+
| country | population |
+---------+------------+
| usa     | 2          |
| italy   | 1          |
| china   | 2          |
| india   | 1          |
+---------+------------+ 
```

我想我应该使用`GROUP BY`和`COUNT()`功能。但是如何？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T21:18:33.180

如果国家总是在最后你可以用这个。

```
select
  case 
    when country like '%usa' then 'usa'
    when country like '%italy' then 'italy'
    when country like '%china' then 'china'
    when country like '%india' then 'india'
  end as ccountry,
  count(*) as population
from Table1
group by ccountry; 
```

如果 country 可以在字符串中的任何位置，您可以像这样找到它，假设它位于开头、结尾或中间，由 . 包围`space`。

```
select
  case 
    when country like '% usa %' then 'usa'
    when country like '% italy %' then 'italy'
    when country like '% china %' then 'china'
    when country like '% india %' then 'india'
  end as ccountry,
  count(*) as population
from 
    (
      select concat(' ', country, ' ') as country
      from Table1
    ) T
group by ccountry 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T21:20:51.633

假设国家名称始终是最后一个组件`country`（组件由空格分隔），那么您可以这样做：

```
select substring_index(country, ' ', -1) as real_country, count(*)
from your_table
group by real_country 
```

给你国家的[`substring_index(country, ' ', -1)`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring-index)最后一个“词”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T21:08:13.947

未经测试，但可能是解决方案

```
select SUBSTRING(country,(INSTR(country,'from') +5)), count(1) 
from table group by SUBSTRING(country,(INSTR(country,'from') +5)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T21:21:51.217

也许这有效：

```
SELECT PARSENAME(REPLACE(country, ' ', '.'), 1) as parsedCountry, count(*) AS population
FROM table
GROUP BY parsedCountry 
```

解释： 1\. REPLACE(country, ' ', '.') 只是用一个点替换所有出现的空格。所以“she's from usa”将是“she's.from.usa”

2\. PARSENAME("she's.from.usa", 1) 将在点上分割字符串。然后从后到前数1，得到那部分字符串。将返回“美国”

3\. FROM table 我不知道你的桌子叫什么名字……所以我放了桌子。

4\. GROUP BY parsedCountry 它将对 after-parsename-replace-country 的出现进行分组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T21:36:49.140

如果您的“国家/地区”名称可以来自另一个表，则可以选择以下选项。这可以随着您的“国家”名称列表的增长而灵活增长，而无需进入和编辑 SQL 语句。

我创建了一个临时表 #citizens 来匹配您的示例输入：

```
create table #citizens (id int, country varchar(30) )

insert into #citizens (id, country) values (1, 'i''m from usa')
insert into #citizens (id, country) values (2, 'i''m from italy')
insert into #citizens (id, country) values (3, 'i''m from china')
insert into #citizens (id, country) values (4, 'i''m from india')
insert into #citizens (id, country) values (5, 'she''s from usa')
insert into #citizens (id, country) values (6, 'he''s from china') 
```

然后我创建了一个临时表#countries 来保存选择的国家名称

```
create table #countries (country varchar(30) )

insert into #countries values('usa')
insert into #countries values('china')
insert into #countries values('india')
insert into #countries values('italy') 
```

所需的选择看起来像这样。注意**类似 '%'** ...

```
select co.country, COUNT(*) 
from #countries co
left outer join #citizens ci on ci.country like '%'+co.country+'%'
group by co.country 
```

因为我只是在玩，后来我把临时桌子放下了。

```
drop table #countries
drop table #citizens 
```

# java - 在一个数据包中发送多个 SOAP 请求

> ID：10157376
> 
> 赞同：0
> 
> 时间：2012-04-14T21:06:44.460
> 
> 标签：java, web-services, soap

我正在为我的应用程序使用 aonaware.com 词典 Web 服务。

我需要发送几十个单词定义请求，但是单独发送它们需要很长时间。

如何一次发送多个 SOAP 请求（在一个数据包中）？

我正在使用 java，服务的 WSDL 文件位于此处：

[http://services.aonaware.com/DictService/DictService.asmx?WSDL](http://services.aonaware.com/DictService/DictService.asmx?WSDL)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:12:36.527

`How can I send multiple SOAP requests at once (in one packet)?`
你什么意思`packet`？TCP数据包？你不能。
SOAP 通过 HTTP 承载，HTTP 是一种请求/响应协议。
这意味着每个 SOAP 请求都通过不同的 POST 请求进行传输。

您可以做的是同时发送多个请求，这意味着通过不同的连接。
这将比串行发送它们更快，但会占用资源和带宽。

您还可以检查响应后底层连接是否关闭。如果它出于某种原因使其持久化，这样您就不会重新打开 TCP 连接并避免这种开销

# php - 解析分号分隔的字符串以提取值

> ID：10157378
> 
> 赞同：0
> 
> 时间：2012-04-14T21:06:52.993
> 
> 标签：php, string, url, url-routing, url-parameters

我需要从 URL 中提取一些值，然后使用这些值发送电子邮件。

多亏了这里其他人的帮助，我几乎搞定了。我遇到的问题是 url 附件看起来像这样

```
?SessionID=582506&Note=joe@bloggs.com;joe bloggs;111.111.111.111&Status=203&Operator= 
```

您可能已经注意到电子邮件地址、姓名、金额和 ip 地址都存储在 note 变量中，用分号分隔。

有没有办法解析注释值并从中提取数据（受分号限制）作为单独的数量，然后我可以在编译电子邮件时使用它们？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T21:10:22.250

从`Note`参数中获取数据，然后在分号处拆分值（例如[`explode`](http://php.net/manual/en/function.explode.php)），您可以访问结果数组中值的每个部分。

```
$note = $_GET["Note"];
$note_parts = explode(";", $note);

$email = $note_parts[0];
$name = $note_parts[1];
$addr = $note_parts[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:12:16.370

使用 $_GET 超级全局从 URL 中检索值，例如

```
$sessid = $_GET["SessionID"]; # Although this seems pointless
                              # when you can use session_id()
$note = $_GET["Note"];
$status = $_GET["Status"];
$operator = $_GET["Operator"]; 
```

更好的方法是使用 PHP 中的预构建函数来解析 url：

```
$url = "http://mysite.com/index.php?"
       ."SessionID=582506&Note=joe@bloggs.com;"
       ."joe bloggs;111.111.111.111&Status=203&Operator=";
$arrayOfURL = parse_url($url); # Returns an associative array of all URL components
print_r($arrayOfURL); 
```

您的参考表：http: [//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

至于将字符串分解成由分隔符分隔的部分，请使用 explode($delimiter, $stringToExplode) 函数。教程：[http ://www.tizag.com/phpT/php-string-explode.php](http://www.tizag.com/phpT/php-string-explode.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T21:15:10.480

```
$notes = explode(';', $_GET['Note']);
var_dump($notes); 
```

我看到的一个问题是您声称在字符串中有金额，但您的示例网址中没有金额。您必须按位置获取 Note 的各个组件（$notes[0]、$notes[1] 等），或者如果这些项目可以位于 Note= 内的不同位置，则您必须滚动一些更复杂的东西范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T21:15:31.967

如果我正确理解你的问题

```
$note = $_GET['note'];
$arr = explode(";", $note); 
```

在 $arr 你有你所有的属性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T21:11:38.540

您可以使用分解和列表。为全球`$_GET['Note'];`

```
<?php

list($mail,$name,$ip) = explode(';',$_GET['Note']); 
```

如果你想直接解析 url [parse_str](http://php.net/parse_str) 会帮助你。

```
<?php
    parse_str("SessionID=582506&Note=joe@bloggs.com;joe bloggs;111.111.111.111&Status=203&Operator=",$array);
    var_dump($array);
/*
array(4) {
  ["SessionID"]=>
  string(6) "582506"
  ["Note"]=>
  string(41) "joe@bloggs.com;joe bloggs;111.111.111.111"
  ["Status"]=>
  string(3) "203"
  ["Operator"]=>
  string(0) ""
}*/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T21:16:08.253

```
$note  = $_GET["Note"];
$notes = explode(";", $note);

echo $notes[0]; // joe@bloggs.com
echo $notes[1]; // joe bloggs
echo $notes[2]; // 111.111.111.111 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-14T21:17:18.660

**试试这个 ：**

```
<?php
        function parseQueryString($str) 
        { 
            $op = array(); 
            $pairs = explode("&", $str); 
            foreach ($pairs as $pair) 
            { 
                list($k, $v) = array_map("urldecode", explode("=", $pair)); 
                $op[$k] = $v; 
            } 
            return $op; 
        }

        $str = "SessionID=582506&Note=joe@bloggs.com;joe bloggs;111.111.111.111&Status=203";

        $p = parse_url($str);
        $s = parseQueryString($p['path']);

        print_r($s);
?> 
```

**输出 ：**

```
Array
(
    [SessionID] => 582506
    [Note] => joe@bloggs.com;joe bloggs;111.111.111.111
    [Status] => 203
) 
```

**至于`Note`变量：**

```
<?php
     $notes = explode(";", $s['Note']);

     $email = $notes[0];
     $name = $notes[1];
     $ipaddress = $notes[2];
?> 
```

# python - 远程访问 MySql DB（托管选项）

> ID：10157380
> 
> 赞同：0
> 
> 时间：2012-04-14T21:07:24.970
> 
> 标签：python, mysql, mysql-python

我目前正在用 Python 编写一个脚本，它将数据上传到 localhost MySql DB。我现在希望将此 MySql DB 重新定位到具有静态 IP 地址的远程服务器。我有一个网络托管设施，但这仅允许客户端连接到 MySql DB，如果我指定客户端将连接的域/IP 地址。我的 Python 脚本将在通过移动宽带加密狗连接的多台计算机上运行，​​因此，由于 IP 地址是动态分配的，因此 IP 地址每天都会有所不同。

关于如何使用我的网络托管设施 (cPanel) 解决此问题的任何建议，或者关于允许从任何 IP 地址远程访问的 MySql 托管服务的任何建议（假设它们成功地使用密码等进行身份验证） SSH 可能会解决这并允许我传输数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:12:03.750

转到 Cpanel 并`%`在远程 Mysql 连接选项上添加通配符（cPanel > 远程 MySQL）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:21:36.310

您的另一个选择是从供应商处为您的笔记本电脑获取动态 dns 地址。基本上，您安装一个小软件，用您当前的 IP 更新外部系统。然后，您可以在 mysql 用户访问中使用域名而不是 IP，服务器将进行域名查找并授予您访问权限，而无需您打开 mysql 服务器与地球上每个服务器的连接，如您将根据 Gabriel 的解决方案进行操作。Dyndns 是一家提供这项服务的公司。

您还可以使用 ssh 和隧道您的会话。你只需要设置你的本地客户端来为 3306 端口做端口转发，设置你的 ssh 连接，然后连接到 localhost，你的脚本就会像在本地连接一样。虽然设置起来有点复杂，而且透明度较低，但它确实是一个很棒的工作。假设命令行 ssh 客户端：

```
ssh -L 3306:domain_or_ip_mysqlserver:3306 username@mysqlserver

mysql -u username -p -h localhost databasename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:40:35.737

正如gview所说，我动态DNS服务是一个可能的解决方案。DynDns 会很好用，但更实惠的解决方案是[ZoneEdit.com](http://zoneedit.com)。我使用 ZoneEdit 来处理托管在具有动态 IP（电缆调制解调器）的 Windows Server 机器上的多个域。我有一个不断轮询 IP 地址更改的 Windows 服务。当服务检测到更改时，它会通知 ZoneEdit。ZoneEdit 然后将请求重定向到新 IP。

# objective-c - 避免“NSArray 在被枚举时发生突变”

> ID：10157381
> 
> 赞同：46
> 
> 时间：2012-04-14T21:07:41.777
> 
> 标签：objective-c, cocoa, cocoa-touch, collections, nsmutablearray

我有一个`NSMutableArray`存储用于 Box2d 物理模拟的鼠标关节。当使用超过一根手指弹奏时，我会得到例外说明

> NSArray 在枚举时发生了变异

我知道这是因为我正在从数组中删除对象，同时还枚举它，使枚举无效。

我想知道的是解决这个问题的最佳策略是什么？我在网上看到了一些解决方案：`@synchronized`，在枚举之前复制数组或将触摸关节放入垃圾数组以供以后删除（我不确定这是否可行，因为我需要在删除后立即从数组中删除鼠标关节它来自世界）。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-14T22:06:58.737

您始终可以在没有枚举器的情况下进行迭代。这意味着一个常规**的 for**循环，当你删除一个对象时： - 减少索引变量并**继续；**. 如果您在进入 for 循环之前缓存数组的计数，那么请确保在删除对象时也减少该计数。

无论如何，我不明白为什么带有稍后删除对象的数组会成为问题。我不知道您的确切情况和所涉及的技术，但理论上应该没有问题。因为在大多数情况下，使用此方法时，您可以在第一次枚举中什么都不做，而在枚举删除数组时做真正的工作。如果您在第一次枚举中*再次*针对同一个数组检查某些内容，并且您需要知道这些对象不再存在，您只需添加一个检查以查看它们是否在删除数组中。

无论如何，希望我有所帮助。祝你好运！

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-14T21:59:12.207

你可以这样做：

```
NSArray *tempArray = [yourArray copy];
for(id obj in tempArray) {
    //It's safe to remove objects from yourArray here.
}
[tempArray release]; 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2015-07-07T12:58:53.130

**最简单的方法是通过数组向后**枚举，这意味着删除对象时不会影响下一个索引。

```
for (NSObject *object in [myMutableArray reverseObjectEnumerator]) {
    // it is safe to test and remove the current object      
    if (AddTestHere) {
        [myMutableArray removeObject: object];
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-22T19:18:00.960

锁定（@synchronized）操作比一遍又一遍地复制整个数组要快得多。当然，这取决于数组有多少元素，以及它执行的频率。假设您有 10 个线程同时执行此方法：

```
- (void)Callback
{
  [m_mutableArray addObject:[NSNumber numberWithInt:3]];
  //m_mutableArray is instance of NSMutableArray declared somewhere else

  NSArray* tmpArray = [m_mutableArray copy];
  NSInteger sum = 0;
  for (NSNumber* num in tmpArray)
      sum += [num intValue];

  //Do whatever with sum
} 
```

它每次都复制 n+1 个对象。你可以在这里使用锁，但是如果有 100k 个元素需要迭代呢？数组将被锁定直到迭代完成，其他线程将不得不等待直到锁定被释放。我认为在这里复制对象更有效，但这也取决于该对象有多大以及您在迭代中做了什么。锁应始终保持最短时间。所以我会用锁来做这样的事情。

```
- (void)Callback
{
  NSInteger sum = 0;
  @synchronized(self)
  {
    if(m_mutableArray.count == 5)
      [m_mutableArray removeObjectAtIndex:4];
    [m_mutableArray insertObject:[NSNumber numberWithInt:3] atIndex:0];

    for (NSNumber* num in tmpArray)
      sum += [num intValue];
  }
  //Do whatever with sum
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T17:01:05.037

以上所有对我都不起作用，但这确实：

```
 while ([myArray count] > 0) 
 {
      [<your delete method call>:[myArray objectAtIndex:0]];
 } 
```

注意：这将全部删除。如果您需要选择需要删除的项目，那么这将不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-25T11:02:36.587

使用 for 循环而不是枚举是可以的。但是一旦你开始删除数组元素，在使用线程时要小心。仅仅减少计数器是不够的，因为您可能正在删除错误的东西。正确的方法之一是创建数组的副本，迭代副本并从原始副本中删除。

edc1591 是正确的方法。

[Brendt：在遍历副本时需要从原始中删除]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-30T19:40:42.537

```
for(MyObject *obj in objQueue)
{
//[objQueue removeObject:someof];//NEVER removeObject in a for-in loop
    [self dosomeopearitions];
}

//instead of remove outside of the loop
[objQueue removeAllObjects]; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-22T16:04:59.907

我遇到了同样的问题，解决方案是枚举副本并改变原件，正如 edc1591 正确提到的那样。我已经尝试了代码，但我不再收到错误消息。如果您仍然收到错误，则意味着您仍在 for 循环内更改副本（而不是原始副本）。

```
NSArray *copyArray = [[NSArray alloc] initWithArray:originalArray];

for (id obj in copyArray) { 
    // tweak obj as you will 
    [originalArray setObject:obj forKey:@"kWhateverKey"];
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-08T12:20:15.447

也许您在枚举 mutableAray 时删除或添加了对象。在我的情况下，这种情况下出现了错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-07T12:48:28.760

我遇到了这个错误，就我而言，这是因为多线程情况。一个线程正在枚举一个数组，而另一个线程同时从同一个数组中删除了对象。希望这可以帮助某人。

# iis - 您无权在所有网站上查看此页面 401 错误

> ID：10157383
> 
> 赞同：0
> 
> 时间：2012-04-14T21:08:00.317
> 
> 标签：iis

突然，我服务器上的所有网站都报告 401“您无权查看此页面”

试试看[http://www.landbrugnet.dk](http://www.landbrugnet.dk)

我能做什么？

# jquery - Jslint 缺少分号错误

> ID：10157385
> 
> 赞同：1
> 
> 时间：2012-04-14T21:08:19.320
> 
> 标签：jquery, jslint

用整个代码编辑：第 17 行现在是 33。

[我在http://www.javascriptlint.com](http://www.javascriptlint.com)中运行了这段代码，它说第 33 行缺少一个分号。我添加了它，但它破坏了一切。谁能帮我找出错误？

```
$(document).ready(function () {

    var $container = $('.row');

    $container.imagesLoaded(function () {
        $container.masonry({
            itemSelector: '.post',
            columnWidth: 1
        });
    });

    $container.infinitescroll({
        navSelector: '#page-nav',
        nextSelector: '#page-nav a',
        itemSelector: '.post',
        loading: {
            finishedMsg: "No more entries to load.",
            img: "http://static.tumblr.com/7wtblbo/hsDlw78hw/transparent-box.png",
            msgText: "Loading..."
        },
        debug: true,
        bufferPx: 5000,
        errorCallback: function () {
            $('#infscr-loading').animate({
                opacity: 0.8
            }, 2000).fadeOut('normal')
        },  
    },

    function (newElements) {
        var $newElems = $(newElements).css({
            opacity: 0
        });
        $newElems.imagesLoaded(function () {
            $newElems.animate({
                opacity: 1
            });
            $container.masonry('appended', $newElems, true);
        });
    });

    $(window).resize(function () {
        $('.row').masonry();
    });

    setTimeout(function () {
        $container.masonry({
            appendedContent: $(newElements)
        });
        /* repair audio players*/
        $('.audio').each(function () {
            var audioID = $(this).attr("id");
            var $audioPost = $(this);
            $.ajax({
                url: '/api/read/json?id=' + audioID,
                dataType: 'jsonp',
                timeout: 50000,
                success: function (data) {
                    $audioPost.append('\x3cdiv style=\x22background-color:white;height:30px\x22 class=\x22audio_player\x22\x3e' + data.posts[0]['audio-player'] + '\x3c/div\x3e');
                }
            });
        });

    }, 2000);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:11:22.883

去掉 , 第 16 行是错误的！
和第 17 行一样！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:15:40.980

}, 2000).fadeOut('正常') **;**

```
errorCallback: function () { 
    $('#infscr-loading').animate({ 
        opacity: 0.8 
    }, 2000).fadeOut('normal');
} 
```

**更新：**

```
$container.infinitescroll({ 
    navSelector: '#page-nav', 
    nextSelector: '#page-nav a', 
    itemSelector: '.post', 
    loading: { 
        finishedMsg: "No more entries to load.", 
        img: "http://static.tumblr.com/7wtblbo/hsDlw78hw/transparent-box.png", 
        msgText: "Loading..." 
    }, 
    debug: true, 
    bufferPx: 5000, 
    errorCallback: function () { 
        $('#infscr-loading').animate({ 
            opacity: 0.8 
        }, 2000).fadeOut('normal');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:43:59.707

进行以下更改：

*   第 27 行：添加分号
*   第 28 行：删除逗号

*行号用于编辑的代码*

# algorithm - 寻路算法难度

> ID：10157411
> 
> 赞同：3
> 
> 时间：2012-04-14T21:12:35.747
> 
> 标签：algorithm, shortest-path, a-star

问题：

> 修改我们针对更少转弯优化的 A* 算法。该算法现在将找到从 (a,b) 到与 (x,y) 相邻的任何 TILE 的路径，其中 (x+1,y) 或 (x-1,y) 在可能的情况下受到青睐。

我尝试的解决方案：

1.  从 (a,b) 到 (x,y) 运行原始 A* 算法。
2.  找到通过 (x-1, *) 或 (x+1,* ) 的路径中的最后一个坐标（如果有）。
3.  如果在该坐标平面中有一条从 * 到 y 的可访问的垂直线，则修改路径以遵循该线。

视觉演示：（从 S 到 E 的路径，其中 X 无法访问）

```
......S           .....S  
.     X           .    X
.          =>     .     
.                 .
E                E. 
```

但是我不确定我的解决方案在某些情况下是否有效，即：

```
......S            .....S  
.     X            .    X
.X        ???     X.     
.                  .
E                E.. 
```

谁能想到这个问题的解决方案？

注意：A* 算法是通用的，除了考虑方向变化的数量以在结果路径中减少转弯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:45:53.663

A* 实际上是[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)的一个知情版本，因此它实际上被设计为 [具有[可接受的启发式](http://en.wikipedia.org/wiki/Admissible_heuristic)函数] 以**找到**[来自单一来源] 的所有顶点的最短路径。

您可以将相邻的所有图块定义`(x,y)`为目标顶点[A* 可以整齐地处理多个目标]，并且您还需要修改启发式函数，为*任何*目标节点提供可接受的值。这可以通过简单的修改来完成`h'(tile) = max { h(tile) - 1 , 0}`- 但在某些情况下，您可能有更好的方法来做到这一点。

建立上述内容后，我们可以对原始 A* 进行以下修改：

1.  运行 A*，直到找到目标图块的路径 [在目标图块扩展之后，如上所述]。设路径长度为`d`。
2.  现在，继续以`A*`当前状态运行，直到 `f(tile)`开放节点的最小值严格大于`d`。**您可以保证找到所有可以通过长度路径从源到达的图块，`d`**特别是 - 您将找到所有具有从长度源路径的目标图块`d`。[假设可接受的启发式函数]。
3.  从所有这些图块中，您可以选择“首选图块”并返回它们的路径。如果未找到首选图块，则返回任意目标图块的路径。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T22:17:56.897

修改您的启发式函数以稍微提高点`(x+1,y)`和`(x-1,y)`. 然后，如果您距离完成路径还有 2 步，则将打破平局，以支持这 2 点。

# c# - 当鼠标到达该点的位置时移动随机对象

> ID：10157414
> 
> 赞同：1
> 
> 时间：2012-04-14T21:13:17.117
> 
> 标签：c#, wpf, random, mouseevent, mousehover

我正在尝试在画布上生成随机点。所以我想让屏幕上的随机点移动到一个新的随机位置，当鼠标触摸它时。我该怎么做呢？？任何鼠标事件都不会发生这种情况。一个例子将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:19:09.960

好吧，您可以将 MouseMove 事件附加到矩形，并在此事件中处理矩形的随机定位。

**更新** 参考此链接中的答案 -[在画布周围移动一个矩形](https://stackoverflow.com/questions/3643639/move-a-rectangle-around-a-canvas)。您需要以这种方式更新 Add Click 事件 -

```
 private void Add_Click(object sender, RoutedEventArgs e)
    {
        Point newPoint;
        Rectangle rectangle;

        newPoint = GetRandomPoint();
        rectangle = new Rectangle {Width = 4, Height = 4, Fill = Brushes.Red};
        rectangle.MouseMove += new MouseEventHandler(rectangle_MouseMove);
        m_Points.Add(newPoint);
        PointCanvas.Children.Add(rectangle);
        Canvas.SetTop(rectangle,newPoint.Y);
        Canvas.SetLeft(rectangle,newPoint.X);
    }

    void rectangle_MouseMove(object sender, MouseEventArgs e)
    {
        Rectangle rectangle = sender as Rectangle;
        Point newPoint;
        newPoint = GetRandomPoint();
        Canvas.SetTop(rectangle, newPoint.Y);
        Canvas.SetLeft(rectangle, newPoint.X);
    } 
```

我在创建 MouseMove 事件时附加了矩形，然后在此事件中随机移动矩形。希望这对你有帮助！！

# c++ - 错误：已经定义了类模板

> ID：10157416
> 
> 赞同：6
> 
> 时间：2012-04-14T21:13:58.453
> 
> 标签：c++, compiler-errors, metaprogramming

我有这个小模板类：

```
namespace emple {
    template <class LinkedClass> 
    class LinkedInList 
    {
    public:
        LinkedInList()
        { 
            active = false; 
        }
        ~LinkedInList(){}
        LinkedClass* getNext() const
        {
            return next;
        }
        void setNext(LinkedClass* const next_)
        {
            next = next_;
        }
        void setActive(bool state)
        {
            active = state; 
        }
        bool isActive()
        { 
            return active; 
        }
    private:
        LinkedClass* next;
        bool active;
    };
}; 
```

编译时出现此错误：

> 类模板已经定义。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-14T21:21:22.227

这是由多次包含相同的头文件（包含此模板类）引起的。这通常在 C++ 中通过使用守卫来解决：

```
#ifndef EMPLE_H
#define EMPLE_H

// your template class

#endif 
```

or `#pragma once`s （我知道的每个编译器都支持）并且不那么混乱：

```
#pragma once

// your template class 
```

# xcode - 在 Xcode 的 Interface Builder 中，outlet 是不是和 properties 一样，action 和 event handler 不一样？

> ID：10157418
> 
> 赞同：0
> 
> 时间：2012-04-14T21:14:09.463
> 
> 标签：xcode, interface-builder, action, iboutlet

似乎使用Xcode的Interface Builder，当我们`Ctrl`将控件拖到头文件时，我们创建的outlet与网页元素的属性（属性）非常相似，而我们创建的action与事件处理程序非常相似。真的吗？

我还想知道为什么我们需要将`Ctrl`控件拖到头文件中`@interface`，而不是直接右键单击它并选择“添加插座”或“添加操作”。为什么我们必须将它拖到头文件中的确切位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:22:47.113

其实我们不需要**用**Ctrl 来拖动**，**这只是为了方便使用。我们也可以在代码中链接我们的 outlet。

而且，是的，它与属性非常相似。您甚至可以将其声明为您的属性`@interface`

```
@property (strong)IBOutlet UITextField *loginField; 
```

这是关于这个主题的精彩演讲[https://groups.google.com/forum/m/?fromgroups#!topic/pdx-cocoaheads-talk/ujqrcCZc-Z8](https://groups.google.com/forum/m/?fromgroups#!topic/pdx-cocoaheads-talk/ujqrcCZc-Z8)

# c++ - 基于 LLVM/Clang 的符号查找工具

> ID：10157422
> 
> 赞同：5
> 
> 时间：2012-04-14T21:14:51.017
> 
> 标签：c++, c, tags, symbols, lookup

是否可以使用 libclang 或其他一些基于 LLVM/Clang 的工具来查找给定符号名称甚至更好的文件字节偏移量的符号定义？我想在 Emacs 中使用它。

# gwt - 使用 GAE 数据存储和 Objectify 进行地理信息管理

> ID：10157426
> 
> 赞同：0
> 
> 时间：2012-04-14T21:15:04.153
> 
> 标签：gwt, google-cloud-datastore, geocoding, objectify, gwt-platform

我正在做一个关于使用java、gwt、gae、gwt-platform和objectify来访问数据存储和GWT地图V3的地方的网站[github.com/twistedpair/GWT-Maps-V3-Api]。（我不知道是否是最好的解决方案，但现在我正在推进，缓慢但还可以:)）

问题：您认为存储一个地方的纬度和经度以便以后能够搜索它附近的地方的最佳方法是什么？

我正在尝试使用 [http://code.google.com/p/sappenin/source/browse/trunk/SappeninUtils/src/main/java/com/sappenin/util的字典顺序将经度和纬度保存到字符串中的方法/BigDecimalStringCodec.java?r=146](http://code.google.com/p/sappenin/source/browse/trunk/SappeninUtils/src/main/java/com/sappenin/util/BigDecimalStringCodec.java?r=146) 但我没有让它工作，据我所知，我必须先按纬度查询，然后按经度查询，我认为这根本不实用。

我不知道在我的实体中使用 GeoPt 是否更好，或者仅将纬度和经度值作为两个字符串或 long（因为不支持 bigdecimal）。我认为将或多或少相同，因为内部 GeoPt 是相同的，两个数字。

我认为最好的方法是geomodel，但在python中然后我开始检查[http://code.google.com/p/javageomodel/](http://code.google.com/p/javageomodel/) 但我无法管理，问题是geomodel不适用于objectify。我找到了一种用于 objectify 的 javageomodel 方法，但似乎很旧。[github.com/bfuster/javageomodel] 我会尝试采用原始的 javageomodel 并尝试对其进行修改，但我想知道是否有人知道更好的方法来做到这一点。

您推荐哪个选项？也许在 2012 年现在有一种非常简单的方法可以做到这一点，但我找不到它，我正在通过谷歌四舍五入一周左右。

提前感谢您的意见！

我希望这个问题或多或少清楚，因为正如你所看到的，我现在脑子里一片混乱，;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:24:45.440

您可以在此处找到如何将地理哈希与 GAE 和 Objectify 一起使用的示例：

[https://github.com/stickfigure/motomapia](https://github.com/stickfigure/motomapia)

演示在这里：

[http://www.motomapia.com/](http://www.motomapia.com/)

geohash 库在这里：

[http://code.google.com/p/javageomodel/](http://code.google.com/p/javageomodel/)

# java - 负节点寻路

> ID：10157431
> 
> 赞同：1
> 
> 时间：2012-04-14T21:15:35.843
> 
> 标签：java, path, path-finding

我正在为 RTS 游戏构建一个简单的 Java 应用程序。关卡/地图是使用二维数组构造的，像这样......

```
objectsInWorld[3][numberOfObjects]

oIW[0][i] = x position of object i
oIW[1][i] = y position of object i
oIW[2][i] = size of object i 
```

数组中的每个对象都可以是某种类型。例如，有些代表建筑物，有些代表单位/人。有没有办法找到位置*[x1][y1]*和*[x2][y2]*之间的路径，其中路径不与数组中的某些对象相交（例如*[x3][y3]*处的建筑物）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:23:02.057

这是一个非常好的寻路指南。你可以在这里找到你想要的。 [http://theory.stanford.edu/~amitp/GameProgramming/index.html](http://theory.stanford.edu/~amitp/GameProgramming/index.html)

# php - 单击图像时将图像作为数组存储数据

> ID：10157432
> 
> 赞同：0
> 
> 时间：2012-04-14T21:15:39.577
> 
> 标签：php, javascript, mysql

所以我一直在为此苦苦挣扎，而且我不是专业的网页设计师。但基本上我有 6 张不同类型天气的图像，当它们被按下/单击时，取决于哪个，我希望将哪种天气类型存储到一张桌子上。因此，如果您单击云的图片，“云”一词将存储在我的 MYSQL 数据库中。按下后，用户最终会在那里输入名称和有关天气的帖子，他们将能够在最终网页上查看。

所以我的问题是我不完全确定如何让图像存储这些数据。我还希望观众能够查看不同天气故事的其他帖子，所以我知道我需要将信息放入并排列。我正在考虑在 javascipt 中使用 php 来保存信息，但我不完全确定如何实现它，帮助？！

```
 <!DOCTYPE HTML>
   <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>WhethertheWeather.</title>

   <!--<link rel="stylesheet" type="text/css" href="demo/css/screen.css" media="all" />-->
        <script src="http://www.adrianpelletier.com/mint/?js"    type="text/javascript"></script>
        <script type="text/javascript" src="demo/scripts/jquery-1.3.2.min.js">   </script>
        <script type="text/javascript" src="demo/scripts/jquery-ui-1.7.1.custom.min.js"></script>
        <script type="text/javascript" src="demo/scripts/execute.js"></script>

<script>
function cloudy()

{
    return "<?php

$dbc=mysql_connect('asite.com','$user','$password','$db') ;

mysql_select_db('$db',$dbc);

    echo $_POST[weather];?>" 

}

</script>

<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/gradientsky.jpg"> 

<div id="logo">

WhethertheWeather.

</div>

<div id="question">

Whats your favorite weather?

</div>

<div id="weather">

<ul id="nav-reflection">
<form name="myform" method="post" action="cloudy_name.php">
    <li class="button-color-1"><a href="cloudy_name.php" id="weather[]" onclick="cloudy();" title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="sunny_name.php" id="weather[]" onclick="sunny();" title="My fancy link"><img src="images/sunnybubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-2"><a href="snowy_name.php"  id="weather[]" onclick="snowy();" title="My fancy link"><img src="images/snowbubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="rainy_name.php" id="weather[]" onclick="rainy();" title="My fancy link"><img src="images/rainbubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="mixy_name.php" id="weather[]" onclick="mixy();" title="My fancy link"><img src="images/mixbubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="windy_name.php" id="weather[]" onclick="windy();" title="My fancy link"><img src="images/windybubble.png" width="211" height="180" align="left"></a></li>

<input type="hidden" name="weather" value="weather" id="weather">
</form>
</ul>
</div>

</body>
</html> 
```

这是我现在正在使用的代码。

这是索引页面，我将名称更改为天气，这样它就不会与我拥有的另一个名称变量混淆。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WhethertheWeather.</title>

<!--<link rel="stylesheet" type="text/css" href="demo/css/screen.css" media="all" />-->
        <script src="http://www.adrianpelletier.com/mint/?js" type="text/javascript"></script>
        <script type="text/javascript" src="demo/scripts/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="demo/scripts/jquery-ui-1.7.1.custom.min.js"></script>
        <script type="text/javascript" src="demo/scripts/execute.js"></script>

<script>
    function showweather(weather) {
    window.location = 'cloudy_name.php?w=' + weather;
}

</script>

<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/gradientsky.jpg"> 

<div id="logo">

WhethertheWeather.

</div>

<div id="question">

Whats your favorite weather?

</div>

<div id="weather">

<ul id="nav-reflection">
<form method="post" action="cloudy_name.php">
        <li class="button-color-1"><a href="cloudy_name.php" id="weather[]" onclick="showweather('cloudy');" title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="sunny_name.php" title="My fancy link"><img src="images/sunnybubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-2"><a href="snowy_name.php" title="My fancy link"><img src="images/snowbubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="snowy_name.php" title="My fancy link"><img src="images/rainbubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="mixy_name.php" title="My fancy link"><img src="images/mixbubble.png" width="211" height="180" align="left"></a></li>
    <li class="button-color-1"><a href="windy_name.php" title="My fancy link"><img src="images/windybubble.png" width="211" height="180" align="left"></a></li>

<input type="hidden" name="weather" value="none" id="myweather">
</form>
</ul>
</div>

</body>
</html> 
```

这是您`cloudy_name.php`输入名称的页面。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WhethertheWeather</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/cloudysky.jpg"> 

<div id="name">
First of all, what is your name?
</div>

    <form method="post" action="cloudy_story.php?w=<?php echo htmlspecialchars($_GET['weather'])?>">
            <table width="20%" border="1" align="center" cellpadding="1" cellspacing="1">

                <td width="100%"><label>Name: <input type="text"  name="name" value="<?php echo $_POST[name]; ?>"></input></label>

                    <input type="submit" value="Submit"> 

            </table>
        </form>

</body>
</html> 
```

这是 cloudy_story.php。

```
<html>
    <head>
        <title>Forum</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    </head>
    <body background="images/cloudysky.jpg"> 

   <div id="cloudy">
    Cloudy
    </div>
    <div id="white">
      <div id="blue">
        <div id="grey">
          <div id="container">
            <form method="post" action="cloudy_update.php?w=<?php echo htmlspecialchars($_GET['weather']); echo htmlspecialchars($_POST['name'])?>">
              <table width="800px" border="1" align="center" cellpadding="3" cellspacing="1">
                <tr>
                  <td width="800px"><h5><?php echo 'Hi, '. $_POST[name] ?>!
                  Write your story about your favorite weather. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec quam urna, rutrum ut hendrerit sit amet, dictum ut dui. Cras id sem at tortor ornare porttitor at id dolor. Proin quis nulla sit amet felis tempus imperdiet eu id felis. Vivamus ac ultricies ipsum. Aliquam nec enim nec turpis mattis aliquam. Aliquam eu quam libero. Quisque vel ligula ante, ut tempor sapien. Nullam molestie elementum urna et consequat. Fusce turpis dolor, consectetur vel placerat vel, tempor vel justo. Donec odio orci, imperdiet quis varius dignissim, pulvinar id erat. Proin lectus enim, ornare tincidunt facilisis et, accumsan eget purus. Phasellus dolor mi, . </h5></td>
                </tr>
                <tr>
                  <td width="300px"><label>Story :
                    <textarea rows="10" cols="100"  name="story" ><?php echo $_POST[story]; ?></textarea>
                    </label></td>
                </tr>
                <tr>
                  <td width="300px"><input type="submit" value="Post"></td>
                </tr>
              </table>
              <input type="hidden" name="name" value="<?php echo $_POST[name]?>">
            </form>
          </div>
        </div>
      </div>
    </div>

    </body>
</html> 
```

这是更新所有内容的页面（cloudy_update.php）并将其放在m数据库的表中。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Untitled Document</title>
</head>

<body>
<?php

$dbc=mysql_connect('localsite','user','pw','db') ;
mysql_select_db('db',$dbc);

    /////////////////////////////////////////////////
    //let's insert our data into the database      //
    /////////////////////////////////////////////////

$query = "insert into stories values('" . mysql_real_escape_string($_GET['weather']) . "', '" . mysql_real_escape_string($_POST['name']) . "' , '" . mysql_real_escape_string($_POST['story']) . "')"

    or die ("Error - Couldn't register user.");

    echo "Thank you $_POST[name]! You've been successfully posted<br /><br />
        Please view all the posts <a href='view_forum.php'><b>here</b></a>.";

    /////////////////////////////////////////////////
    // finished inserting our data into the database //
    /////////////////////////////////////////////////

     exit();
 ?> 
```

抱歉......我真的很挣扎......可能是一些我太愚蠢以至于看不到的小东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:49:16.470

首先，很酷的背景。非常好。标题字体需要更改，但我相信您已经意识到这一点。由于它是在这里设置的，看起来每个按钮都会将您发送到为该天气类型构建的唯一页面（sunny_name.php）。所以你不需要从第一页存储任何变量。然而，在您的第二页上，您可以通过您在sunny_name.php 上的表单传递天气变量+ 名称变量。

```
<form action="sunny_story.php?weather=sunny" method="post"> 
```

最后你有你的第三页（sunny_story.php），它输入你的信息（除非你有一个故事要在这里添加，在这种情况下，你将把名字 var 和天气一起存储在 URL 中，比如 final_page.php?weather=sunny&name =约翰）。无论你选择做什么，结局都是相似的：

```
<?php
//connect to db
$con=mysql_connect('localhost','username','pw');

if(!$con){
die('Could not connect to the db: ' .mysql_error());
}

mysql_select_db('yourdb',$con);

//enter query
$query = "INSERT INTO `table` VALUES ('".mysql_real_escape_string($_GET['weather'])."',
         '".mysql_real_escape_string($_GET['name'])."',
         '".mysql_real_escape_string($_POST['story'])."')"

$result = mysql_query($query); 
```

注意：查询中值的顺序取决于 mysql 表中列的顺序。此外，故事的 Post 方法取决于您用于到达最后一页的表单方法。尚未测试，但应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:59:25.370

One thing you can do is instead of this :

```
<li class="button-color-1"><a href="cloudy_name.php" id="weather[]" onclick="cloudy();" title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180" align="left"></a></li> 
```

You can write a single javascript function called `showName()` which will send the user to the appropriate page like :

```
<li class="button-color-1"><a href="cloudy_name.php" id="weather[]" onclick="showName('cloudy');" title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180" align="left"></a></li> 
```

In `showName()` function you can simply write :

```
function showName(Name) {
    window.location = 'name.php?w=' + Name;
} 
```

Now in name.php you can output the form with action attribute as :

```
<form method="post" action="next.php?w=<?php echo htmlspecialchars($_GET['w'])?>">

</form> 
```

In the `next.php` you can access the weather via `$_GET['w']` and name via `$_POST['name']` and add them into the database by using a simple insert query like :

```
$query = "insert into tablename values('" . mysql_real_escape_string($_GET['w']) . "', '" . mysql_real_escape_string($_POST['name']) . "')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T08:36:01.973

尝试这样做。我没有添加任何样式。

```
 <!DOCTYPE HTML>
   <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>WhethertheWeather.</title>

   <!--<link rel="stylesheet" type="text/css" href="demo/css/screen.css" media="all" />-->
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">   </script>

<script>
    $(document).ready(function(){
        $('#nav-reflection li a img').click(function(){
            var value = $(this).parent().attr('id');
            $('#weatherVal').val(value);
            $('#detailsDiv').slideDown();
        })
        $('#save').click(function(){
           $.post('insert.php',$("#weatherForm").serialize(), 
                function(data){
                    console.log(data);
                }
            ) 
        });
    });
</script>

<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body background="images/gradientsky.jpg"> 

<div id="logo">

WhethertheWeather.

</div>

<div id="question">

Whats your favorite weather?

</div>

<div id="weather">
<form method="post" id="weatherForm">

    <ul id="nav-reflection">
        <li class="button-color-1"><a href="javascript:void(0);" id="cloudy" title="My fancy link"><img src="images/cloudybubble.png" width="211" height="180" align="left"></a></li>
        <li class="button-color-1"><a href="javascript:void(0);" id="sunny" title="My fancy link"><img src="images/sunnybubble.png" width="211" height="180" align="left"></a></li>
        <li class="button-color-2"><a href="javascript:void(0);" id="snowy"  title="My fancy link"><img src="images/snowbubble.png" width="211" height="180" align="left"></a></li>
        <li class="button-color-1"><a href="javascript:void(0);" id="rainy" title="My fancy link"><img src="images/rainbubble.png" width="211" height="180" align="left"></a></li>
        <li class="button-color-1"><a href="javascript:void(0);" id="mixy" title="My fancy link"><img src="images/mixbubble.png" width="211" height="180" align="left"></a></li>
        <li class="button-color-1"><a href="javascript:void(0);" id="windy" title="My fancy link"><img src="images/windybubble.png" width="211" height="180" align="left"></a></li>
    </ul>
    <input type="hidden" name="weatherVal" id="weatherVal">
    <div id="detailsDiv" style="display: none;">
        <input type="text" name="name" id="name">
        <textarea type="text" name="story" id="story"></textarea>
        <input type="button" name="save" id="save" value="Save">
    </div>
</form>
</div>

</body>
</html> 
```

使用 jquery 你可以将值发布到另一个文件并在那里进行数据库操作。

```
<?php
    $dbc=mysql_connect('localhost','root','','test') ;
    if(!$dbc){
        die('Could not connect to the db: ' .mysql_error());
    }
    else
    {
        $query = "INSERT INTO `weather` VALUES ('','".mysql_real_escape_string($_POST['weatherVal'])."',
         '".mysql_real_escape_string($_POST['name'])."',
         '".mysql_real_escape_string($_POST['story'])."')";
        echo $query;
        $result = mysql_query($query);
        return $result;

    }
?> 
```

# sql - 在表上返回不同

> ID：10157434
> 
> 赞同：1
> 
> 时间：2012-04-14T21:15:42.283
> 
> 标签：sql

我有 2 个表，一个是产品列表，另一个是由 productID 链接的产品图像表。

我已经编写了以下 SQL 查询，但是我不确定如何只在每个产品上返回不同的，因为某些产品有多个图像。

```
SELECT  p.ProductID, p.Title, pi.FileName
    FROM [Ordering].[Products] p
    JOIN [Ordering].[ProductImages] pi ON p.ProductID =pi.FK_ProductID 
    WHERE p.Title like '%' + @Title +'%'
    ORDER BY p.Title ASC 
```

- 结果

```
ProductID   Title                 FileName
5           test                  5.jpg
2           test product          4.jpg
2           test product          3.jpg
2           test product          2.jpg
2           test product          1.jpg 
```

正如上面的结果，我想要做的只是返回 2 行，即测试和测试产品。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:19:19.283

您可以按产品分组并获取 MAX 图像（或其他方法，具体取决于您要代表产品的图像）：

```
 SELECT p.ProductID, p.Title, MAX(pi.FileName) as FileName
      FROM [Ordering].[Products] p
INNER JOIN [Ordering].[ProductImages] pi ON p.ProductID =pi.FK_ProductID 
     WHERE p.Title like '%' + @Title +'%'
  GROUP BY p.ProductID, p.Title
  ORDER BY p.Title ASC 
```

演示：[http ://www.sqlfiddle.com/#!3/6f498/2](http://www.sqlfiddle.com/#!3/6f498/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:19:44.460

您可以使用逗号分隔的文件路径列表返回不同的产品列表：

```
SELECT  
    p.ProductID, 
    p.Title, 
    img.ImageFilePaths
FROM [Products] p
JOIN (
SELECT DISTINCT
    t1.ProductID,
    ImageFilePaths = SUBSTRING((SELECT ( ', ' + t2.FileName )
                       FROM [ProductImages] t2
                       WHERE t1.ProductID = t2.ProductID                                                    
                       FOR XML PATH( '' )
            ), 3, 1000 )
            FROM [ProductImages]  t1
        GROUP BY t1.ProductID) img
ON img.ProductID = p.ProductID 
```

并使用@mellamokb 小提琴：

[http://www.sqlfiddle.com/#!3/a3103/8](http://www.sqlfiddle.com/#!3/a3103/8)

# regex - 如果多于两个，则多行正则表达式替换

> ID：10157437
> 
> 赞同：-1
> 
> 时间：2012-04-14T21:15:55.383
> 
> 标签：regex, perl, sed, awk, multiline

我很难解决以下问题；

有一个包含问题和答案的 word 文件，我需要以特定格式导入 moodle（在线问题网站）。一切都是黑色的接受正确的答案，这些是绿色的。开始格式如下：

```
1\. Question example

a. Wrong

b. Wrong

C. Wrong

D. Right 
```

输出应该变成

```
:Question example

:Question example

{

~ Wrong

~ Wrong

~ Wrong

= Right

} 
```

我在 word 中打开文件，用 * 替换所有红色段落标记（我不能用组替换）。之后，我将 .docx 文件导出为文本。在我的 linux 计算机上打开并在其上抛出以下正则表达式。

```
sed -i -e 's/^\r/\n/g' tmp #OS X white line replacement                    
sed -i -e 's/\r//g' tmp #remove white lines                           
sed -i -e 's:^[a-z]\.:~:' tmp #Replace Leading question letters with tilde                                                                                               
sed -i -e 's/\(^[0-9]*\.\ \)\(.*\)/}\n::\2\n::\2\n{/' tmp #regenerate tittle                    
sed -i -n '${p;q};N;/\n\*/{s/"\?\n//p;b};P;D' tmp #next line starts with * append to front of current                                                              
sed -i -e 's:^~\(.*\)\(\*.*\)$:=\1:' tmp #move * from back to = to front
sed -i -e 's:^\*:=:' tmp #replace any remaining * with =        
sed '/^$/d' tmp #delete any remaining white lines 
```

这不是很好，但效果很好，问题是手工制作的并且有很多错误，所以我仍然必须手动完成。困难的部分是当我有多个正确答案时。输出应如下所示；

```
:Question example

:Question example

{

~%-100% Wrong

~%-100% Wrong

~%50% Right

~%50% Right

} 
```

理想情况下，我有一个 sed 或 perl 正则表达式，它计算 { 之间的 = 唱数，并用 ~%50% 替换它们。所有的 ~ 都以 %-100% 的比例唱歌。我也可以将这段代码用于 3 个正确答案，其中每个正确答案都变为 ~%33%。

这是可行的吗？我有超过 1000 个问题，它肯定有助于自动化。用 sed 进行多行替换对于两行来说有点棘手，所以我猜四行或更多行需要 perl？我没有使用 Perl 的经验。

有人可以帮我解决这个问题吗？请原谅我的英语不好，我是非母语人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:45:35.827

下面的程序根据我对您需要的最佳猜测工作。它的工作原理是将所有信息读入一个数组，然后对其进行格式化。

就目前而言，数据被合并到源中并从`DATA`文件句柄中读取。将循环更改为`while (<>) { ... }`将允许您在命令行上指定数据文件。

如果我的猜测是错误的，你必须纠正我。

```
use strict;
use warnings;

my @questions;

while (<DATA>) {
  next unless /\S/;
  s/\s+$//;
  if (/^\d+\.\s*(.+)/) {
    push @questions, [$1];
  }
  elsif (/^[A-Za-z]\.\s*(.+)/i) {
    push @{$questions[-1]}, $1;
  }
}

for my $question (@questions) {

  my ($text, @answers) = @$question;

  print "::$text\n" for 1, 2;

  my $correct = grep /right/i, @answers;
  my $percent = int(100/$correct);

  print "{\n";

  if ($correct == 1) {
    printf "%s %s\n", /right/i ? '=' : '~', $_ for @answers;
  }
  else {
    my $percent = int(100/$correct);
    printf "~%%%d%%~ %s\n", /right/i ? $percent : -100, $_ for @answers;
  }

  print "}\n";
}

__DATA__
1\. Question one

a. Wrong

b. Wrong

c. Right

d. Wrong

2\. Question two

a. Right

b. Wrong

c. Right

d. Wrong

3\. Question three

a. Right

b. Right

c. Wrong

d. Right 
```

**输出**

```
::Question one
::Question one
{
~ Wrong
~ Wrong
= Right
~ Wrong
}
::Question two
::Question two
{
~%50%~ Right
~%-100%~ Wrong
~%50%~ Right
~%-100%~ Wrong
}
::Question three
::Question three
{
~%33%~ Right
~%33%~ Right
~%-100%~ Wrong
~%33%~ Right
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:03:02.620

```
my $file = do { local $/; <> };
my @questions = split /(?<=.)(?=[0-9]+\.)/s, $file;
for (@questions) {
   my @lines = split /^/m;

   my $title = shift(@lines);
   $title =~ s/^\S+\s*/:/;

   my $num_right;
   my $num_wrong;
   for (@lines) {
      if    (/Right/) { ++$num_right; }
      elsif (/Wrong/) { ++$num_wrong; }
   }

   my $num_answers = $num_right + $num_wrong;

   my $right_pct = sprintf('%.0f', $num_right/$num_answers*100);
   my $right_prefix = $num_right == 1 ? "=" : "~%$right_pct%";
   my $wrong_prefix = $num_right == 1 ? "~" : "~%-100%";

   for (@lines) {
      if    (/Right/) { s/^\S+/$right_prefix/; }
      elsif (/Wrong/) { s/^\S+/$wrong_prefix/; }
   }

   print(
      $title,
      "\n",
      $title,
      "\n{\n",
      @lines,
      "\n}\n",
   );
} 
```

用适当的东西替换`/Right/`和。`/Wrong/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T08:09:48.330

这可能对您有用：

```
cat <<\! >file.sed
> # On encountering a digit in the first character position
> /^[0-9]/{
>   # Create a label to cater for last line processing
>   :end
>   # Swap to hold space
>   x
>   # Check hold space for contents.
>   # If none delete it and begin a new cycle
>   # This is to cater for the first question line
>   /./!d
>   # Remove any carriage returns
>   s/\r//g
>   # Remove any blank lines
>   s/\n\n*/\n/g
>   # Double the question line, replacing the question number by a ':'
>   # Also append a { followed by a newline
>   s/^[0-9]*\.\([^\n]*\n\)/:\1:\1{\n/
>   # Coalesce lines beginning with a * and remove optional preceeding "
>   s/"\?\n\*/*/g
>   # Replace the wrong answers a,b,c...  with ~%-100%
>   s/\n[a-zA-z]*\. \(Wrong\)/\n~%-100% \1/g
>   # Replace the right answers a,B,c... with ~%100%
>   s/\n[a-zA-Z]*\. \(Right\)/\n~%100% \1/g
>   # Assuming no more than 4 answers:
>   # Replace 4 correct answers prefix with ~%25%
>   s/\(~%100%\)\(.*\)\1\(.*\)\1\(.*\)\1/~%25%\2~%25%\3~%25%\4~%25%/
>   # Replace 3 correct answers prefix with ~%33%
>   s/\(~%100%\)\(.*\)\1\(.*\)\1/~%33%\2~%33%\3~%33%/
>   # Replace 2 correct answers prefix with ~%50%
>   s/\(~%100%\)\(.*\)\1/~%50%\2~%50%/
>   # Append a newline and a }
>   s/$/\n}/
>   # Break and so print newly formatted string
>   b
>   }
> # Append pattern space to hold space
> H
> # On last line jump to end label
> $b end
> # Delete all lines from pattern space
> d
> ! 
```

然后运行：

```
sed -f file.sed file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:02:16.617

您的示例与此文档不匹配：http: [//docs.moodle.org/22/en/GIFT](http://docs.moodle.org/22/en/GIFT)。问题标题和问题由两个冒号而不是一个冒号分隔：

```
//Comment line 
::Question title 
:: Question {
=A correct answer
~Wrong answer1
#A response to wrong answer1
~Wrong answer2
#A response to wrong answer2
~Wrong answer3
#A response to wrong answer3
~Wrong answer4
#A response to wrong answer4
} 
```

有些人天真地根据你的例子给你答案，而不是找到真正的规范，哎呀。

您的问题无法回答，因为您的格式没有显示正确答案。也就是说：

```
1\. Question

a. Is this right?

b. Or this?

c. Or this? 
```

您说这些是使用原始 Word 文档中的颜色标识的，并且您对其进行了一些替换以保留信息；但是，您没有显示此示例！哎呀...

# mongodb - Symfony 2 StofDoctrineExtensionBundle 带有 odm 时间戳（MongoDB）

> ID：10157441
> 
> 赞同：4
> 
> 时间：2012-04-14T21:16:58.440
> 
> 标签：mongodb, symfony, doctrine-orm

我尝试`StofDoctrineExtenstion`对我的对象使用可时间戳的行为，但它不起作用。对象保存成功，但`createdAt`属性未保存。

这是我的配置：

```
#Doctrine ODM Configuration
doctrine_mongodb:
    connections:
        default:
            server: mongodb://localhost:27017
            options:
                connect: true
    default_database: rent
    document_managers:
        default:
            auto_mapping: true

#stof doctrine extension
stof_doctrine_extensions:
    mongodb:
        default:
            timestampable: true 
```

和类（我也尝试对我的主要对象使用时间戳行为）

```
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * @MongoDB\MappedSuperclass
 */
abstract class BaseApartment
{

     /**
     * @Gedmo\Timestampable(on="create")
     * @MongoDB\Date
     */
    private $createdAt;
} 
```

Symfony 2.0.12，我的`deps`文件：

```
[StofDoctrineExtensionsBundle]
    git=git://github.com/stof/StofDoctrineExtensionsBundle.git
    target=/bundles/Stof/DoctrineExtensionsBundle
    version=v1.0 (also tried version 1.1)

[gedmo-doctrine-extensions]
    git=git://github.com/l3pp4rd/DoctrineExtensions.git
    target=gedmo-doctrine-extensions 
```

怎么了？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:47:56.463

我认为这是版本兼容性的问题。问题（也许不是问题，但至少*是**一个*问题）似乎是**gedmo-doctrine-extensions** Stof 的**DoctrineExtensionsBundle**的“主”分支彼此不兼容。

例如，我刚刚使用了这对版本（对于 Symfony 版本 2.0.15）：

```
[gedmo-doctrine-extensions]
    git=git://github.com/l3pp4rd/DoctrineExtensions.git
    version=origin/doctrine2.1.x

[DoctrineExtensionsBundle]
    git=git://github.com/stof/StofDoctrineExtensionsBundle.git
    target=/bundles/Stof/DoctrineExtensionsBundle
    version=origin/1.0.x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:05:14.743

尝试将`deps`文件中的版本更改为：

```
[Stof-DoctrineExtensionsBundle]
   git=https://github.com/stof/StofDoctrineExtensionsBundle.git
   target=/bundles/Stof/DoctrineExtensionsBundle
   version=origin/1.0.x 
```

在我做出改变之前，我遇到了同样的问题，然后是`bin/vendors install --reinstall`，它开始为我工作。

# clojurescript - 如何在 clojurescript 中创建 json

> ID：10157447
> 
> 赞同：23
> 
> 时间：2012-04-14T21:17:38.187
> 
> 标签：clojurescript

我有一些 clojurescript，我想与一些 javascript 库进行互操作。在我的 clojurescript 代码中，我进行了一些分析并得出了一个地图列表。就像是

```
[{:prop1 "value1" :prop2 "value2"}, {:prop1 "something else" :prop2 "etc"}...] 
```

我需要将其传递给 javascript 函数

```
[{prop1: "value1", prop2: "value2}, {..} ...] 
```

我不确定如何从我的 clojurescript 函数中返回一个 javascript 对象。有没有办法将嵌套映射和列表序列化为 javascript 对象。或者创建一个新的 javascript 对象然后在其上设置属性的方法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-21T16:43:28.443

只是为了人们寻找类似的东西。

ClojureScript 核心现在包含一个`clj->js`函数。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-17T17:51:46.707

我在[这里找到了一个功能](http://techylinguist.com/posts/2012/01/23/clojurescript-getting-started)

```
(defn clj->js
  "Recursively transforms ClojureScript maps into Javascript objects,
   other ClojureScript colls into JavaScript arrays, and ClojureScript
   keywords into JavaScript strings.

   Borrowed and updated from mmcgrana."
  [x]
  (cond
    (string? x) x
    (keyword? x) (name x)
    (map? x) (.-strobj (reduce (fn [m [k v]]
               (assoc m (clj->js k) (clj->js v))) {} x))
    (coll? x) (apply array (map clj->js x))
    :else x)) 
```

正是我需要的。还有一个反函数，即`js->clj`在 ClojureScript 核心中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-17T14:02:49.577

这对我有用：

```
(defn clj->json
  [ds]
  (.stringify js/JSON (clj->js ds))) 
```

用法：

```
(let [json (clj->json data-structure)]
  ;; do something with json
  ) 
```

# javascript - 流星无法观察带有跳过或限制的查询

> ID：10157454
> 
> 赞同：9
> 
> 时间：2012-04-14T21:18:35.740
> 
> 标签：javascript, mongodb, meteor

我可能在文档中遗漏了一些非常明显的东西或遗漏了一些东西。我搜索并没有找到类似的问题。发布它。

这两个

```
return Items.find({},{sort: {time: -1}, limit: 10}); 
```

或者

```
return Items.find({},{sort: {time: -1}).limit(10); 
```

导致`meteor cannot observe queries with skip or limit`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T22:07:04.073

**更新：这是一个更长的问题。从 Meteor 0.5.3 开始，您可以使用`skip`和`limit`选项观察查询。**

不幸的是，这是真的：mimimongo 包目前不支持调用`observe`使用`skip`or`limit`选项的游标。这没有充分的理由；它只是没有实施。

如果您在模板助手中调用此查询，有一个简单的解决方法：

```
Template.name.items = function () {
  // fetch array of all the items
  var items = Items.find({}, {sort: {time: -1}}).fetch();

  // return only the first 10 items to the template
  return items.slice(0,10);
}; 
```

变通办法的缺点是效率。如果您的助手返回一个游标（只返回值`Items.find`而不调用`fetch`，则模板系统足够智能，不会在仅一项更改或插入新项时重新计算整个模板。

另一方面，调用帮助程序会注册对*整个*`fetch`查询结果的依赖，因此只要查询中的任何对象发生更改，就会重新计算整个模板。

 *没有其他区别。模板会将相同的东西放在屏幕上，并且在必须重绘自身时保留表单元素的内容。*

# c++ - 使用 typedef 和 #define 进行不同的原型设计

> ID：10157455
> 
> 赞同：3
> 
> 时间：2012-04-14T21:18:38.860
> 
> 标签：c++, c, linked-list, typedef, c-preprocessor

我正在为一个项目编写一组链表函数。
我需要为列表节点（int/char）中的数据类型提供灵活性

所以我正在尝试做这样的事情：

**在 main.cpp**

```
#define INT_DATA
#include "lists.h"
.... 
```

**在 list.h 中**

```
#ifdef CHAR_DATA
typedef char DATA_TYPE;
#endif
#ifdef INT_DATA
typedef int DATA_TYPE;
#endif

typedef struct lnode {
    DATA_TYPE data;
    struct lnode* next; //points to the next node
} LNODE;

LNODE * createNewListNode(DATA_TYPE data, LNODE* next);
.... 
```

但所有这些似乎都不起作用......当原型不同时，我不想编写重复的代码......

我究竟做错了什么？这可能吗？

**请注意**

这是一个练习，我不能使用类，我不能使用任何标准库

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T21:20:32.747

这是 C++ 的模板进入的地方。模板允许您创建实现的框架。在这种情况下，您可能需要一个将“数据类型”作为参数的类。听起来不错……这就是它的样子：

```
template < typename DATA_TYPE >  
struct lnode {
  DATA_TYPE data;
  lnode<DATA_TYPE>* next; //points to the next node
}; 
```

然后你可以像这样创建它们：

```
lnode<char> charNode;
lnode<int> intNode; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:21:25.063

不要使用定义。使用模板（好文章：[一](http://www.parashift.com/c++-faq-lite/templates.html)和[二](http://womble.decadentplace.org.uk/c++/template-faq.html)）。

此外，这`typedef struct lnode { /* ... */ } LNODE;`只是 C，甚至不接近 C++。

# google-maps-api-3 - Google Maps v3 标记在缩小时未正确堆叠/绘图

> ID：10157456
> 
> 赞同：-1
> 
> 时间：2012-04-14T21:18:54.267
> 
> 标签：google-maps-api-3, google-maps-markers, latitude-longitude, markers

缩小时，标记并不总是堆叠。一些出租物业是出租综合体的一部分，同一栋建筑，所以我认为它们会在你缩小时堆叠，甚至是初始的，但不要。

您可以在此处查看其中一张地图： [http ://www.oxfordrealtynd.com/rent/?p=1&bedrooms=&city=Grand+Forks](http://www.oxfordrealtynd.com/rent/?p=1&bedrooms=&city=Grand+Forks)

标记也没有正确重绘。如果您使用上面的链接查看结果中第一个属性的地图并缩小，您会注意到橙色标记左侧的两个红色标记不在它们所在的城市街区内。

如果您放大所有标记，则所有标记都绘制在城市的西部。

你可以看到这个出租物业的非堆叠问题，2951 24th Ave S，如果使用上面的链接，它应该是列表中的第二个。

至于我如何绘制标记，我从搜索参数中构建了一个标记数据的 xml 文件。然后我只绘制出现在地图边界内的标记。标记被删除并重新绘制，并在事件中添加了一个事件侦听器`idle`。

我很茫然，找不到任何相关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:15:30.833

的定义`markerImage`是错误的。

所有markerImage的第四个参数（锚点）必须相同：

```
new google.maps.Point( 10, 25 ) 
```

[**http://jsfiddle.net/doktormolle/uRtcw/**](http://jsfiddle.net/doktormolle/uRtcw/)

# ejb - 如何将消息从 Session bean 间接发送到 MessageDrivenBean

> ID：10157461
> 
> 赞同：0
> 
> 时间：2012-04-14T21:19:51.030
> 
> 标签：ejb, jms

我想知道如何将**消息**（javax.jms.Message）从**MySatefulSessionBean**发送到**MySingletonBean**，然后再发送到**MyMessageDrivenBean**。我正在使用 Netbeans，所以我可以**右键单击**Singleton Bean的*Source code*并选择**Send JMS Message**。

但这会使在**MySingletonBean**中生成的 Message 被发送到**MyMessageDrivenBean**而我真正想要做的是将 Message 从**MySatefulSessionBean**转发到**MyMessageDrivenBean**。

即不是在MySingleTonBean 中创建新Message 并将其发送到MyMessageDrivenBean 进行处理，而是希望**MySatefulSessionBean**实例化的Message 由MyMessageDrivenBean 的**onMessage** (Message msg) 方法处理。

由于个人原因，我无法让 MySatefulSessionBean 直接与 send Message to MyMessageDrivenBean 交谈；所以消息应该间接地转到 MyMessageDrivenBean

你能告诉我怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:26:02.223

除了消息驱动 Bean，您不应该在 EJB 中接收 JMS 消息。因此，您的 MySingletonBean 不应接收 JMS 消息。如果你设法以某种方式实现它，你会得到各种疯狂的错误（因为 EJB 对象生命周期规则）。

所以重新考虑你的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T14:25:24.943

实际上，不要在有状态会话 bean 中准备消息，而只准备实际的有效负载。

将此有效负载作为方法参数调用您的单例，然后将 JMS 消息创建保留为单例的内部详细信息。

# php - 如何只显示时间并更改为 24 小时制

> ID：10157462
> 
> 赞同：-2
> 
> 时间：2012-04-14T21:19:56.967
> 
> 标签：php

我正在使用以下脚本当前显示日期和时间。

我不想显示日期，但如果它不工作似乎无法取出它，我如何将时钟更改为 24 小时，因为它目前是 12 小时。

```
<?php
$hourdiff = 0; // Replace the 0 with your timezone difference (;
$site = date("l, d F Y g:i a",time() + ($hourdiff * 3600));
echo $site;
?> 
```

希望有人可以提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T10:18:31.360

```
a   Lowercase Ante meridiem and Post meridiem        am or pm
A   Uppercase Ante meridiem and Post meridiem        AM or PM
B   Swatch Internet time                             000 through 999
g   12-hour format of an hour without leading zeros  1 through 12
G   24-hour format of an hour without leading zeros  0 through 23
h   12-hour format of an hour with leading zeros     01 through 12
H   24-hour format of an hour with leading zeros     00 through 23
i   Minutes with leading zeros                       00 to 59
s   Seconds, with leading zeros                      00 through 59 
```

根据您的代码，它将是

```
<?php
$hourdiff = 0; // Replace the 0 with your timezone difference (;
$site = date("l, d F Y H:i",time() + ($hourdiff * 3600));
echo $site;
?> 
```

请参考，[PHP日期函数](http://uk3.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:24:21.463

查看[php时间和日期](http://php.net/manual/en/function.date.php)

尝试 'H' 24 小时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:24:34.233

使用 H 或 G 而不是 g 获得 24 小时格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T21:24:51.143

不确定你在用`($hourdiff * 3600)`逻辑做什么，任何乘以 0 的数字都是 0。你应该阅读与[date](http://us3.php.net/manual/en/function.date.php)函数相关的文档。

试试这个：

```
$site = date('H:i a');
echo $site; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T21:25:48.870

只需要更改日期参数。检查[日期](http://php.net/manual/en/function.date.php)手册。

```
$site = date('H : i: s'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T21:25:51.947

RTM，也，在未来向我们展示你如何试图删除日期......

```
g   12-hour format of an hour without leading zeros 1 through 12
G   24-hour format of an hour without leading zeros 0 through 23
h   12-hour format of an hour with leading zeros    01 through 12
H   24-hour format of an hour with leading zeros    00 through 23
i   Minutes with leading zeros  00 to 59
s   Seconds, with leading zeros 00 through 59 
```

$site = date("G:i a",time() + ($hourdiff * 3600));

# sql - SQL Query 用 JOINS 或其他东西替换 UNION ALL

> ID：10157468
> 
> 赞同：3
> 
> 时间：2012-04-14T21:20:52.567
> 
> 标签：sql, union

现在我有 3 张桌子

订单：

> 身份证 | 日期 | 机器 | 规划

好片：

> 身份证 | 日期 | 机器 | 件 | 产品

坏片：

> 身份证 | 日期 | 机器 | 件 | 产品 | 零件

查询的输出是

> 日期 | 机器 | 规划 | 好片| 坏件

实际的查询是这样的：

```
SELECT
  data.Date AS Date,
  data.Machine AS Machine,
  SUM(CASE WHEN data.type = 'Planning' THEN data.value END ) AS Planning,
  SUM(CASE WHEN data.type = 'GoodPieces' THEN data.value END ) AS GoodPieces,
  SUM(CASE WHEN data.type = 'BadPieces' THEN data.value END ) AS BadPieces
FROM
      ( SELECT
          'Planning' AS Type,
          Date AS Date,
          Machine AS Machine,
          Planning AS Value
        FROM Orders
        UNION ALL
        SELECT
          'GoodPieces',
          Date,
          Machine,
          Pieces AS Value
        FROM GoodPieces
        UNION ALL
        SELECT
          'BadPieces'
          Date,
          Machine,
          Pieces AS Value
        FROM BadPieces ) AS data
GROUP BY
   Date,
   Machine 
```

我的问题是是否有办法用这 3 个表获得相同的输出

订单：

> 身份证 | 日期 | 机器| 规划

好片：

> 订单号 | 件 | 产品

坏片：

> 订单号 | 件 | 产品 | 零件

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T21:28:50.777

当然，只是`LEFT JOIN`在表格中并总结适当的列：

```
SELECT
  O.Date,
  O.Machine,
  SUM(COALESCE(O.Planning, 0)) AS Planning,
  SUM(COALESCE(G.Pieces, 0)) AS GoodPieces,
  SUM(COALESCE(B.Pieces, 0)) AS BadPieces
FROM
  Orders O
LEFT JOIN
  (SELECT G.OrderID,
     SUM(COALESCE(G.Pieces, 0)) AS GoodPieces
   FROM GoodPieces G
   GROUP BY G.OrderID) G ON G.OrderID = O.ID
LEFT JOIN
  (SELECT B.OrderID,
     SUM(COALESCE(B.Pieces, 0)) AS BadPieces
   FROM BadPieces B
   GROUP BY B.OrderID) B ON B.OrderID = O.ID
GROUP BY
  O.Date,
  O.Machine; 
```

演示：[http ://www.sqlfiddle.com/#!3/09a73/17](http://www.sqlfiddle.com/#!3/09a73/17)

**编辑**：更新以处理`@MikaelEriksson`评论中给出的点。

# objective-c - 实例变量的目的是什么？

> ID：10157477
> 
> 赞同：1
> 
> 时间：2012-04-14T21:22:18.730
> 
> 标签：objective-c, ios

我看到这样的代码：

`@synthesize dataController = _dataController;`

在视图控制器中这样做的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:45:28.523

如果你的类需要存储值，它需要在内存中的某个地方来存储这些数据。实例变量为您的类需要的数据保留内存。

假设您要为字符串或`int`变量添加位置。您可以使用实例变量为对象的生命周期保留该内存。每个对象都将为其变量接收唯一的内存。

它很像 C `struct`：

```
struct t_something {
  int a; int b;
}; 
```

声明了`struct`两个字段（a 和 b）。每个值都可以读取和写入，并且`struct`足够大以容纳其字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:38:17.787

这里有大量信息： [iPhone ivar 命名约定](https://stackoverflow.com/questions/2114587/iphone-ivar-naming-convention)

要记住的另一件事：

在类中使用实例变量而不是属性可以绕过通常会自动发生的属性实现的任何副作用（保留、复制等）。

如果您编写了希望绕过的自定义属性实现，这一点尤其重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:38:26.957

我用它来快速访问数据，属性需要写“自我”。以前，vars 没有。

# javascript - 如何通过 AJAX 提交一个添加的表单

> ID：10157482
> 
> 赞同：0
> 
> 时间：2012-04-14T21:22:50.857
> 
> 标签：javascript, jquery, forms

我正在使用`jQuery 1.6`这样的东西提交表单：

```
jQuery('form.AjaxForm').submit( function() {

    $.ajax({
        url     : $(this).attr('action'),
        type    : $(this).attr('method'),
        dataType: 'json',
        data    : $(this).serialize(),
        success : function( data ) {                    
                    alert("success");   
                  },
        error   : function( xhr, err ) {
                    alert("error");                     
                  }
    });

    return false;
}); 
```

上面的 jQuery 代码非常适合我。

**但**现在的问题是我的表单是在网页上动态添加的。在这种情况下，上面的代码不起作用。我也尝试`.live()`了功能，但它仍然不适合我：

```
// Ajax Forms
jQuery('form.AjaxForm').live( 'submit', function() {            
    // using jquery $.ajax() here;
    return false;
}); 
```

我不知道为什么`.live()`函数不适用于表单提交事件。

任何想法 ？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:40:13.047

您的设置一定有问题，jQuery 工作正常，仔细检查您的类名，确保在 DOM 准备好（ $(function() {}); ）和所有常规测试之后调用您的 jQuery。

有关使用动态添加的表单的示例，请参见下面的链接。

[http://jsfiddle.net/m9VVR/](http://jsfiddle.net/m9VVR/)

# javascript - Components.interfaces.nsIProcess 截断包含“&”的 URL 参数

> ID：10157485
> 
> 赞同：0
> 
> 时间：2012-04-14T21:23:56.127
> 
> 标签：javascript, windows, firefox

我有 javascript 代码（windows/firefox），它使用启动 URL

```
 var process = Components.classes["@mozilla.org/process/util;1"].createInstance(Components.interfaces.nsIProcess); 
```

命令是 cmd /c start MYURL

这适用于大多数情况，除非 URL 包含 &，例如

[http://www.google.com/search?q=Robert+Doisneau&ct=doisneau12-hp&oi=ddle](http://www.google.com/search?q=Robert+Doisneau&ct=doisneau12-hp&oi=ddle) 被截断为 [http://www.google.com/search?q=Robert+Doisneau](http://www.google.com/search?q=Robert+Doisneau)

从命令行会发生同样的事情，但是在 URL 周围加上引号可以解决问题。

因此，我在我的 javascript 中的 URL 周围加上了引号，但是当使用双引号时 windows 会产生这个错误：

> Windows 找不到 '\http://www.google.com/search?q=Robert+Doisneau&ct=doisneau12-hp&oi=ddle\'。请确保您输入了正确的名称，然后重试。

当我在引号中传递 URL 时，nsIProcess 有什么不同，我该如何避免这种情况？或者我怎样才能重新形成我的 URL，使其不会在 & 处被截断？我不能用 %26 替换 &，因为它不是文本的一部分，它用于传递参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:24:21.213

我想我知道发生了什么。CMD 可以将多个命令作为参数，每个命令由 & 字符分隔，整个列表用引号括起来。

多个参数的格式是 CMD /c "arg & arg & arg"。因此 & 被解释为新参数的开始。

CMD 参数中的转义字符是 ^。所以你需要运行：

```
CMD /C "START http://www.google.com/search?q=Robert+Doisneau^&ct=doisneau12-hp^&oi=ddle" 
```

请注意，引号在 START 之前开始并在 url 之后结束。整个部分是传递给 CMD 的一个参数。我不确定 nsIProcess 是否自动引用参数，所以很多人需要对此进行试验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:38:54.030

您为什么要尝试通过 启动 URL `nsIProcess`？只需在浏览器选项卡中加载 URL，如果 Firefox 不理解它，它会自动提示调用该协议的系统处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:09:33.810

这很奇怪，因为我无法像你提到的那样从命令行工作：

*   不添加任何东西，我得到截断的 URL
*   当我在 URL 周围的命令行中添加双引号时，我只是打开了新的*命令行窗口*。
*   当我添加单引号（撇号）时，我收到错误消息。

# javascript - Javascript 确保输入都具有唯一值

> ID：10157486
> 
> 赞同：0
> 
> 时间：2012-04-14T21:23:56.093
> 
> 标签：javascript, loops, input

好吧，我知道我想太多了，因为它根本不来找我。我有一组输入。我将如何检查以确保它们的值都是唯一的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:31:41.743

```
var inputs=[], flag=false;
$('input').each(function(){
    if ($.inArray(this.value, inputs) != -1) flag=true ;
    inputs.push(this.value);
});

if (flag==true) {
   //duplicates exists
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:30:15.457

这似乎是一个验证问题。您可以以奇怪的方式（使用大量 if 子句，我猜这不是我们所希望的），尝试将所有这些输入添加到数组中并在 while 循环中检查它们。或者，如果这些输入是字符串，您可以连接它们并尝试使用正则表达式。

应该有更多的答案，而且肯定比召唤到这里的那个更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:32:03.990

使用此伪集实现并检查每个条目是否已重复即迭代并检查，如果`x in set`返回 false

[http://www.javascriptexamples.org/2011/01/17/how-to-implement-a-set-in-javascript/](http://www.javascriptexamples.org/2011/01/17/how-to-implement-a-set-in-javascript/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T21:52:57.287

[http://jsfiddle.net/PF4rD/](http://jsfiddle.net/PF4rD/)

```
function uniqueValues(elements) {

    var values = {},
        len = elements.length,
        i = 0;

    for (; i < len; i++) {
        if (!values[elements[i].value]) values[elements[i].value] = true;
        else return false;
    }
    return true;
}; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-14T21:29:45.110

用这个

```
var areUnique = true;
$.each($("Input_Selector",function(){
var val = $(this).val();
  $.each($("Input_Selector",function(){
   if(val == $(this).val()){areUnique = false;}
  });
}));
//check the value of areUnique here 
```

# java - 使用 char 数组作为 Hashtable 键

> ID：10157487
> 
> 赞同：2
> 
> 时间：2012-04-14T21:24:09.433
> 
> 标签：java, hashtable

我正在使用`Hashtable`我的 java 程序。我只是对看到 的异常行为感到惊讶`Hastable`。下面是我的代码（这不是我的最终代码，我只是用运行异常的代码创建了一个新的简单项目）

```
 Hashtable<char[], char[]> h1 = new Hashtable<char[], char[]>();
    char[] key = Integer.toString(12).toCharArray();
    char[] val = Integer.toString(21).toCharArray();
    h1.put(key, val);
    System.out.println(h1.containsKey(Integer.toString(12).toCharArray()));// Should print true, since 12 is there in Hashtable 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T21:26:56.407

您不能将这样的数组用作映射键，因为数组具有默认的、基于引用平等的和`Object`实现。使用as 键将使您的程序按需要运行。`equals``hashCode``String`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T21:26:31.223

数组相等基于引用相等（“这两个引用是否指向同一个对象？”）而不是深度相等（“这两个对象在语义上是否相同？”）。看：

```
char[] one = Integer.toString(12).toCharArray();
char[] two = Integer.toString(12).toCharArray();
System.out.println(one == two); // false 
```

[http://ideone.com/YwEjV](http://ideone.com/YwEjV)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T21:30:31.180

如果 a 和 b 是 2 个数组，则 a.equals(b) 如果 a == b。所以 a == b 的 hashCode 如果 a == b。由于这里不是这种情况，因此不会在哈希表中找到它。使用数组作为哈希表键是一个坏主意。同样使用任何可变对象作为哈希表键也是一个坏主意。

# google-chrome - Chrome 径向 css 渐变平滑度

> ID：10157495
> 
> 赞同：11
> 
> 时间：2012-04-14T21:25:24.953
> 
> 标签：google-chrome, css, safari

我正在使用`chrome 18.0.1025.162`并且正在尝试做一个径向渐变

```
-webkit-radial-gradient(circle, rgba(100, 100, 100, 0.2), rgba(0, 0, 0, 0.9)) 
```

问题是渐变是非常像素化的，颜色和 alpha 的过渡是块状的并且不平滑。这在 Safari 和 Firefox 中是不同的。Safari & Firefox 做得非常顺利

这是chrome的错误吗？任何人都有同样的问题。它是如此简单的渐变！这么简单的事情肯定不会是小故障

查看：http: [//jsfiddle.net/GyRLe/1/](http://jsfiddle.net/GyRLe/1/)了解我的意思的演示。

有解决方案吗？图像会很糟糕:(

（好吧，看看平滑度有多差）：这是我使用它时得到的：http: [//i.imgur.com/UYB1d.png](http://i.imgur.com/UYB1d.png)（Chrome）
[http://i.imgur.com/tzGuq。 png](http://i.imgur.com/tzGuq.png)（Safari）（看起来有点前卫，但那是因为 png，否则它接近完美的平滑度）

Firefox 和 Safari 一样好，它只是 chrome 做得很糟糕我需要 alpha，因为我在后台放了一个重复样式的图像

编辑：Chrome 20（Canary）也有这个可怕的问题！

Edit2：我们使用 CSS 的原因是我们不必使用图像！因此，我已将此添加到[http://code.google.com/p/chromium/issues/detail?id=123491](http://code.google.com/p/chromium/issues/detail?id=123491)并希望谷歌能够直截了当，因为我认为 chrome 很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:43:45.303

如果您不需要 alpha 值，使用`rgb`而不是`rgba`.

演示：http: [//jsfiddle.net/tKtV9/](http://jsfiddle.net/tKtV9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T16:09:51.997

我知道它已经在很久以前发布了，但是我在 Chrome 24 中遇到了同样的问题（强条带），使用：

```
-webkit-radial-gradient(center, ellipse cover,  #XXXXXX 0%,#YYYYYY 100%); 
```

但我意识到，使用下面的条带代码几乎消失了：

```
-webkit-gradient(radial, center, 0px, center, 100%, color-stop(0%,#XXXXXX), color-stop(100%,#YYYYYY)); 
```

希望这可以帮助。

**编辑：**我已经看到 -webkit-gradient(radial, ...) 只是径向渐变显示的旧语法，所以它不应该是这个问题的长期答案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:03:49.223

在这种情况下它没有多大帮助，但我注意到添加

```
width: x-value;
height: y-value; 
```

有时可以提供帮助。X 值和 Y 值当然是您的尺寸。

# c# - C#，索引超出了数组的范围

> ID：10157496
> 
> 赞同：0
> 
> 时间：2012-04-14T21:25:46.650
> 
> 标签：c#, arrays, string, serial-port

我有以下代码：

```
void serialport_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        string serialData = serialport.ReadExisting().Replace("/n", "");
        string[] splitSerialData = serialData.Split(new Char[] {','}); //Split up the data

        this.Invoke(new Action(delegate()
            {
                this.temperatureLabel.Text = splitSerialData[0];
            }));
    } 
```

它工作正常，但是当我这样做时：

```
void serialport_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        string serialData = serialport.ReadExisting().Replace("/n", "");
        string[] splitSerialData = serialData.Split(new Char[] {','}); //Split up the data

        this.Invoke(new Action(delegate()
            {
                this.temperatureLabel.Text = splitSerialData[0];
                this.lightLevelLabel.Text = splitSerialData[1];
            }));
    } 
```

它不起作用并说“索引超出了数组的范围”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:28:42.520

您收到此错误是因为`serialData`不包含逗号。因此，结果数组包含一个元素，并且表达式`splitSerialData[1]`将引发 IndexOutOfRangeException。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T21:28:52.927

这意味着拆分只返回一个元素 - 整个字符串。索引 1 处没有数组元素，所以

```
splitSerialData[1] 
```

抛出`IndexOutOfBounds`异常。

反过来，这意味着您传递的字符串不包含逗号`','`字符。

# eclipse - 如何将 Eclipse TODO 添加到 JSP

> ID：10157501
> 
> 赞同：15
> 
> 时间：2012-04-14T21:26:29.217
> 
> 标签：eclipse, jsp, todo

有一种方法可以将“TODO”添加到 Java 类中，以便它们显示在 Eclipse 的 Tasks 视图中。

```
//TODO: comment about what needs done 
```

有谁知道如何在 JSP 中添加类似的注释，以便它显示在 Eclipse 的 Tasks 视图中？我已经尝试了明显的，但似乎无法让它出现。

```
<!-- TODO: this doesn't show up in the Tasks view in Eclipse --> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-17T12:23:17.417

打开首选项（窗口->首选项）并选择常规->编辑器->结构化文本编辑->任务标签。

从那里您可以标记“启用搜索任务标签”设置。请确保 JSP 在 Filters 选项卡中处于活动状态。

注意：我使用的是 Eclipse Helios Service Release 2（内部版本号：20110301-1815）。首选项部分可能会在不同版本中更改，您始终可以按照 Rob 的建议在首选项中搜索“任务”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T22:54:53.137

查看 Eclipse 首选项——您可以键入“task”作为过滤器文本——您应该在那里找到启用 JSP 任务标签的选项。

# regex - 确认“不匹配（在正则表达式中”错误

> ID：10157505
> 
> 赞同：1
> 
> 时间：2012-04-14T21:26:59.917
> 
> 标签：regex, ack

我真的很困惑：

我正在尝试在我的项目中`ack`对 JavaScript 函数的所有调用。`hideSideBar(arg1, arg2, etc..)`

因为可以选择不带参数地调用它，所以我从查找实例开始`hideSideBar(`

```
ack hideSideBar\(
error: Unmatched ( in regex ... 
```

我很困惑，因为我正在转义左括号……那为什么要寻找右括号？

（我知道我可以使用通配符`ack hideSideBar\(.*\)`来获取我正在寻找的东西。我更感兴趣的是理解为什么我试图做的事情不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T00:04:23.580

如果您`ack hideSideBar\(`在终端中键入，
shell 将删除`\`并传递`hideSideBar(`给`ack`.

所以`hideSideBar\(`应该包含在`'...'`（或`"..."`）中，
shell 将删除引号并传递`hideSideBar\(`给`ack`.

# java - 如何更改android复选框按钮的大小？

> ID：10157508
> 
> 赞同：0
> 
> 时间：2012-04-14T21:27:35.247
> 
> 标签：java, android, checkbox, bitmap

我更改了 Android 2.3.4 复选框的位图，并希望设置位图的大小以缩放它们。我改变了这样的复选框：

```
<CheckBox
    android:id="@+id/cb1"
    android:button="@drawable/checkbox"
    android:layout_alignParentLeft="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Sort: 1" /> 
```

与匹配的 xml drawable

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true"  android:state_focused="true"    android:drawable="@drawable/checkbox_on_background_focus_yellow"/>
    <item android:state_checked="false" android:state_focused="true"    android:drawable="@drawable/checkbox_off_background_focus_yellow"/>
    <item android:state_checked="false" android:drawable="@drawable/checkbox_off_background" />
    <item android:state_checked="true"  android:drawable="@drawable/checkbox_on_background" />
</selector> 
```

如何设置 dip/dp 值来更改复选框位图的大小？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-03T14:04:59.850

实际上，您可以将图像设置为复选框大小的方法是将

```
android:button="@null"
android:background="@drawable/checkbox" <!-- your custom selector --> 
```

这样，您的自定义复选框图像（在两种状态下，选中和未选中）将始终适合您的复选框的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T23:47:22.903

我通过使位图大小合适来解决它。我现在无法缩放它，但我在几台具有不同 dpi 设置的设备上对其进行了测试，看起来还不错。目前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:31:04.880

只需定义相关的 Drawable 并将它们设置到您的复选框属性中。

```
android:background="@drawable/my_background" 
```

# eclipse - 如何在 Eclipse Web 项目中注册一个供石英调度程序使用的类？

> ID：10157514
> 
> 赞同：0
> 
> 时间：2012-04-14T21:28:28.417
> 
> 标签：eclipse, web-applications, quartz-scheduler

我正在尝试在一个以预设时间间隔向用户发送电子邮件的 Web 项目中使用 Quartz Scheduler。我很高兴此时能够打印出简单的“hello world”语句。

这是我要运行的应用程序的代码。

```
package testing;

import static org.quartz.JobBuilder.*;
import static org.quartz.SimpleScheduleBuilder.*;
import static org.quartz.CronScheduleBuilder.*;
import static org.quartz.CalendarIntervalScheduleBuilder.*;
import static org.quartz.TriggerBuilder.*;
import static org.quartz.DateBuilder.*;

import org.quartz.JobDetail;
import org.quartz.Scheduler;
import org.quartz.SchedulerException;
import org.quartz.Trigger;
import org.quartz.impl.StdSchedulerFactory;

public class QuartzTest {

public static void main(String[] args) throws InterruptedException {
    System.out.println("MAIN!!!!");
    try {
        // Grab the Scheduler instance from the Factory 
        Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();

        // define the job and tie it to our HelloJob class
        JobDetail job = newJob(HelloJob.class)
            .withIdentity("job1", "group1")
            .build();

        // Trigger the job to run now, and then repeat every 40 seconds
        Trigger trigger = newTrigger()
            .withIdentity("trigger1", "group1")
            .startNow()
            .withSchedule(simpleSchedule()
                    .withIntervalInSeconds(40)
                    .repeatForever())            
            .build();
        scheduler.scheduleJob(job, trigger);

        // and start it off
        scheduler.start();
        Thread.sleep(60000);

        //scheduler.shutdown();

    } catch (SchedulerException se) {
        se.printStackTrace();
    }
}
} 
```

这就是要调用的工作：

```
package testing;

import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class HelloJob implements Job {

public HelloJob() {
}

public void execute(JobExecutionContext context)
  throws JobExecutionException
{
  System.err.println("Hello!  HelloJob is executing.");
  System.out.println("HellowJob is executing");
}
  } 
```

这是我的quartz.properties 文件：

```
org.quartz.scheduler.instanceName = QuartzTest
org.quartz.threadPool.threadCount = 3
org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore 
```

最后但并非最不重要的是，这是我添加到 web.xml 文件中的内容

```
<servlet>
    <display-name>Quartz Initializer Servlet</display-name>
    <servlet-name>QuartzInitializer</servlet-name>
    <servlet-class>org.quartz.ee.servlet.QuartzInitializerServlet</servlet-class>
    <init-param>
        <param-name>shutdown-on-unload</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>start-scheduler-on-load</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>config-file</param-name>
        <param-value>quartz.properties</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

现在，我很确定该项目能够检测和读取我的quartz.properties 文件，但我没有理由相信该项目（即服务器）知道有关QuartzTest.java 的任何信息。我没有在任何地方注册该课程，同样它也从未被调用过。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:11:25.677

太好了 ！您已经成功地引导了 Quartz。

缺少的是您必须定义在什么时间运行哪些作业。您可以通过在 .xml 中配置[XMLSchedulingDataProcessorPlugin](http://www.quartz-scheduler.org/api/2.1.0/org/quartz/plugins/xml/XMLSchedulingDataProcessorPlugin.html)来实现`quartz.properties`。此插件将加载您定义的 paticaulr XML 文件，以添加作业并在石英调度程序初始化时使用触发器调度它们。（有关其架构定义，请参阅[此处）](http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd)

在`quartz.properties`中，添加以下属性：

> org.quartz.plugin.jobInitializer.class = [org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin](http://www.quartz-scheduler.org/api/2.1.0/org/quartz/plugins/xml/XMLSchedulingDataProcessorPlugin.html) org.quartz.plugin.jobInitializer.fileNames = **quartz-config.xml** org.quartz.plugin.jobInitializer.failOnFileNotFound = true

然后在**quartz-config.xml**中：

```
 <?xml version="1.0" encoding="UTF-8"?>

        <job-scheduling-data
            xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"
            version="1.8">

            <schedule>
                <job>
                    <name>MyScheduledJob</name>
                    <group>MyScheduledGroup</group>
                    <description>Testing</description>
                    <job-class>testing.HelloJob</job-class>
                </job>

                <trigger>
                        <cron>
                                <name>HelloJobTrigger</name>
                                <job-name>MyScheduledJob</job-name>
                                <job-group>MyScheduledGroup</job-group>
                                <!-- It will run every 5 minutes -->
                                <cron-expression>0 0/5 * * * ?</cron-expression>  
                        </cron>
                  </trigger>
            </schedule>
    </job-scheduling-data> 
```

# ruby-on-rails - 添加activeadmin gem后Heroku RoR应用程序无法正常工作

> ID：10157521
> 
> 赞同：2
> 
> 时间：2012-04-14T21:29:27.437
> 
> 标签：ruby-on-rails, heroku, activeadmin

我的 RoR 应用程序在 heroku 上运行良好，直到我添加了 activeadmin gem，现在当我将它推送到 heroku 时，我得到一个这样的页面：

```
Application Error
An error occurred in the application and your page could not be served. Please try again in a few moments.

If you are the application owner, check your logs for details. 
```

heroku logs 命令只给了我...

```
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x515546]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x519499]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_ary_each+0x45) [0x533735]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: [NOTE]
2012-04-14T21:25:32+00:00 app[web.1]: 
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby() [0x51307f]
2012-04-14T21:25:32+00:00 app[web.1]: /usr/local/bin/ruby(rb_yield+0x66) [0x521d56]
2012-04-14T21:25:32+00:00 app[web.1]: 
2012-04-14T21:25:32+00:00 app[web.1]: You may have encountered a bug in the Ruby interpreter or extension libraries.
2012-04-14T21:25:32+00:00 app[web.1]: Bug reports are welcome.
2012-04-14T21:25:32+00:00 app[web.1]: For details: http://www.ruby-lang.org/bugreport.html
2012-04-14T21:25:33+00:00 heroku[web.1]: Process exited with status 139
2012-04-14T21:25:33+00:00 heroku[web.1]: State changed from up to crashed 
```

我不知道从这里去哪里。有谁知道如何让我的本地应用程序（完美运行）在heroku上运行？

谢谢，布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:44:18.510

我在这里盲目猜测，但是当您安装 Active Admin 时，您需要在推送到 Heroku 后运行迁移。

尝试这样做：

```
heroku rake db:migrate 
```

# iphone - 执行没有角点的透视变换

> ID：10157522
> 
> 赞同：1
> 
> 时间：2012-04-14T21:29:35.113
> 
> 标签：iphone, ios, image, image-processing

我在一张没有边界框的纸上有一张图表的图片。我需要转换图像，使其看起来像是从正上方拍摄的。没有角点可以做到这一点吗？

这是一张图片来说明我想要完成的事情：

![在此处输入图像描述](../Images/a4075178ff9c585ebfff5b75593780b0.png)

P1-P5 是已知的，而 AD 是未知的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:13:14.283

有 4 个源点（左图的中点）和 4 个对应的右图目标点。您有足够的信息来计算透视变换矩阵：

[理论文章](http://graphics.cs.cmu.edu/courses/15-463/2008_fall/Papers/proj.pdf)

[示例](http://xenia.media.mit.edu/~cwren/interpolator/)（死链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:08:56.327

这是一张 2D 图片的 2D 数码图片，以某个角度拍摄？

如果是这样，您没有 3D 对象，您有一张失真的图片，您需要纠正失真。梯形校正应该起作用。如果图表上有图表线，您可以测量线条向后倾斜的量，并计算出将图像背面拉伸多少以校正梯形失真。

梯形校正不是我以前用变换矩阵做过的事情，但我知道这是可能的。

# asp.net-mvc-3 - @Html.Grid 的 OnMouse 事件工具提示

> ID：10157531
> 
> 赞同：1
> 
> 时间：2012-04-14T21:31:09.617
> 
> 标签：asp.net-mvc-3, razor, dynamictype, razor-grid

我使用 MVC3 Grid 来显示事件。

我需要以某种方式集成**“NAME”的鼠标事件以显示项目的“描述”。**

我该如何实施？谢谢你的任何线索！！！

```
@{        
    var grid = new WebGrid(source: Model.Events,
    defaultSort: "Name",
    rowsPerPage: 20);
}

@if (Model != null)
{
   @grid.GetHtml(
   tableStyle: "grid",
   headerStyle: "head",
   alternatingRowStyle: "alt",
   rowStyle: "row",
   selectedRowStyle: "selected-row",
   columns: grid.Columns(
   grid.Column("Name", "Event", style: "column"),                                            
   grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { id = item.ID }), style: "column-action")
   ) )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:53:02.880

您可以尝试使用“格式”属性插入一些原始 HTML。而不是这个：

```
grid.Column("Name", "Event", style: "column") 
```

尝试这个：

```
grid.Column(columnName: "Name", header: "Event", format: (i) => @Html.Raw("<span title='" + i.Name + "'>" + i.Description + "</span>") ) 
```

# objective-c - 如何从下载的图像创建新的 ALAsset

> ID：10157538
> 
> 赞同：7
> 
> 时间：2012-04-14T21:33:30.020
> 
> 标签：objective-c, ios, ipad, alassetslibrary

我正在尝试开发一个应用程序，该应用程序将下载图像（从摄影站点）并为每个图像创建一个 ALAsset，然后将它们放在一个新的 ALAssetsGroup 下。

我能够创建一个新专辑 (ALAssetsGroup) 并从网站下载数据。但是我对如何创建新的 ALAsset 有点坚持。

我试过如下

```
 ALAsset *asset = [[[ALAsset alloc] init] autorelease];
            NSDictionary *metadata = [NSDictionary dictionaryWithObjectsAndKeys:p.id, @"id", p.thumbnail_url, @"thumbnail_url", p.photo_url, @"photo_url", nil];
            [asset setImageData:data metadata:metadata completionBlock:^(NSURL *assetURL, NSError *error) {
                ESLog(@"Asset %@ created error:%@", assetURL, error);
                [group addAsset:asset];
            }]; 
```

但是，我得到了assetURL 和error 都为空的打印件。

```
2012-04-15 02:58:06.850 XXXXXX.com[5966:c607] Asset (null) created error:(null) 
```

如果有人可以建议我如何在相册中创建新资产，那就太好了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T20:41:03.113

你不能像那样创建一个新的 ALAsset。您需要做的是使用以下方法将图像数据保存到 Photo-Library：

```
- (void)writeImageDataToSavedPhotosAlbum:(NSData *)imageData metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock 
```

完成块将返回新创建资产的 NSURL。使用方法

```
- (void)assetForURL:(NSURL *)assetURL resultBlock:(ALAssetsLibraryAssetForURLResultBlock)resultBlock failureBlock:(ALAssetsLibraryAccessFailureBlock)failureBlock 
```

使用 NSURL 将返回新创建资产的 ALAsset 实例。

干杯。

亨德里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:59:06.217

您可以使用该`UIImageWriteToSavedPhotosAlbum`功能将 保存`UIImage`到相机的翻转中。

```
void UIImageWriteToSavedPhotosAlbum (
   UIImage  *image,
   id       completionTarget,
   SEL      completionSelector,
   void     *contextInfo
); 
```

[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)对其进行了描述。

然后你可以从资源库中获取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:07:31.120

更容易使用以下代码：

```
 //Save to photo album
    UIImage *img = [[[UIImage alloc] initWithData:imageData] autorelease];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library writeImageToSavedPhotosAlbum:img.CGImage
                                 metadata:[info objectForKey:UIImagePickerControllerMediaMetadata]
                          completionBlock:^(NSURL *assetURL, NSError *error) {
                              NSLog(@"assetURL %@", assetURL);
                          }]; 
```

# .net - 我应该如何处理 .NET 对象中的复合键

> ID：10157539
> 
> 赞同：1
> 
> 时间：2012-04-14T21:33:43.153
> 
> 标签：.net, sql-server, composite-key

我正在开发一个使用多个具有复合键的数据库表的 MVC.NET 应用程序。在我的 ORM 中映射这些复合键的最佳方法是什么？我的第一个想法是使用字典字段，即 classKey AS 字典（字符串，字符串）。这似乎工作正常，但使我的控制器方法的参数复杂化......尤其是从客户端到控制器时。然后我想在我的对象模型中使用一个字符串作为“Id”属性，并在控制器级别从复合键中创建散列来填充 Ids……不确定我是否也喜欢这个。你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:40:52.220

假设您的复合键是 (string a, int b)。然后你可以这样写你的动作：

```
ActionResult Index(string a, int b) { } 
```

或者

```
class MyCompositeKey { string a; int b; }
ActionResult Index(MyCompositeKey id) { } 
```

# iphone - 如何动态更改我的应用程序中的 openURL 实现？

> ID：10157543
> 
> 赞同：2
> 
> 时间：2012-04-14T21:34:12.460
> 
> 标签：iphone, objective-c, xcode, openurl

在我的应用程序中，我在我的应用程序中实现了一个私有方法`AppDelegate`来覆盖默认`openURL:`方法，以便在`UIWebView`. 但现在我也需要默认功能。

这是我所做的：

```
@implementation UIApplication (Private)

- (BOOL)customOpenURL:(NSURL*)url
{ 
    AppDelegate *MyWatcher = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if (MyWatcher.currentViewController) {
        [MyWatcher.currentViewController handleURL:url];
        return YES;
    }
    return NO;
}

@end

- (void)applicationDidBecomeActive:(UIApplication *)application {  
    Method customOpenUrl = class_getInstanceMethod([UIApplication class], @selector(customOpenURL:));
    Method openUrl = class_getInstanceMethod([UIApplication class], @selector(openURL:));

   method_exchangeImplementations(openUrl, customOpenUrl);  
} 
```

我还在`handleURL:`我的班级中实现了需要自定义打开 URL 处理的地方。但是，这阻碍了我的其他课程，我只想在 iTunes 中简单地打开 iTunes 链接。所以我不知道如何实现的是如何使用原始`openURL:`代替`customOpenURL:`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:49:10.340

您可以直接继承`UIApplication`和覆盖`openURL:`。请务必更改您的原则类`Info.plist`以使用您的`UIApplication`子类。

例子：

```
@interface ECApplication : UIApplication

@end

@implementation ECApplication

- (BOOL)openURL:(NSURL*)url
{

    AppDelegate *MyWatcher = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if (MyWatcher.currentViewController) {
        [MyWatcher.currentViewController handleURL:url];
        return YES;
    }
    return NO;
}

@end 
```

然后，在您的`Info.plist`文件中，查找 Principle Class 键，并将值更改为`ECApplication`（或您为子类命名的任何名称）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T22:33:24.497

您可以将原始实现设置为其他方法，然后调用它：

```
@implementation UIApplication (Private)
- (BOOL)originalOpenURL:(NSURL*)url 
{
     return NO;
}

- (BOOL)customOpenURL:(NSURL*)url
{
     if (/* some condition */)
     {
        // your code
     }
     else
     {
        return [self originalOpenURL: url];
     }
}

@end

- (void)applicationDidBecomeActive:(UIApplication *)application {  
     Method customOpenUrl = class_getInstanceMethod([UIApplication class], @selector(customOpenURL:));
     Method openUrl = class_getInstanceMethod([UIApplication class], @selector(openURL:));
     Method originalOpenUrl = class_getInstanceMethod([UIApplication class], @selector(originalOpenURL:));

     method_exchangeImplementations(openUrl, originalOpenUrl); 
     method_exchangeImplementations(openUrl, customOpenUrl);  
} 
```

*注意：*这只是一个直接回答您的问题的解决方案。解决这个问题的更清晰的方法是@edc1591 建议的方法。您可以`openURL:`使用`[super openURL:url]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-22T18:00:48.577

Krizz 指出的方法仅适用于第一个应用程序启动，如果您碰巧打开一个将您重定向到另一个应用程序（即：Facebook 应用程序）的 URL，它会在您的应用程序恢复时与实现混淆。添加一个标志以确保仅在第一个应用程序启动时调用 method_exchangeImplementations 似乎有效。

# objective-c - 跟踪事件 iOS 应用程序的

> ID：10157544
> 
> 赞同：0
> 
> 时间：2012-04-14T21:34:16.180
> 
> 标签：objective-c, ios, cocoa-touch

我可以在其他应用程序中跟踪事件吗？

我的意思是：我有一个应用程序必须跟踪当前设备上的所有事件。

例如： - 阅读 iBooks - 发送短信 - 查看 youtube 视频 - 和其他

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:41:00.577

不在 App Store 应用程序中。这显然是对用户隐私的巨大侵犯。

但是，您可以编写一个越狱调整来执行此操作。

# ruby-on-rails - Ruby Rails 2.3.x 分页背后的理论是什么？

> ID：10157545
> 
> 赞同：1
> 
> 时间：2012-04-14T21:34:18.910
> 
> 标签：ruby-on-rails

我有一个包含 3000 条用户记录的用户表。分页工作正常，但在查看萤火虫时间线时，它指出下载的内容大小为 2.37MB，下载时间为 9.62 秒。分页工作正常，但我希望它只下载前 25 条记录并提供指向其他可用页面的链接。我试过太阳黑子、thinking-sphinxs、rails find_in_batches、直线上升：limit => 25 等。

如果分页拆分记录集并每页显示 25 条记录，那么为什么它*似乎*仍在下载整个表？这不是打败了分页背后的理论还是我错过了什么？

```
@users = User.all(:conditions => ["client_id = ?", current_user.client_id]).paginate(:page => params[:page], :per_page => 25) 
```

显然，这里的目标是在一两秒内加载我的页面，而不是 10 或 12 秒。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:41:50.593

您没有提到您用于分页的 gem，但如果它是任何常见的嫌疑人（或者仍然内置在 Rails 2.3 中 - 我不记得了），它实际上应该使用 a`LIMIT`来仅查询相关记录。您缓慢的页面加载时间很可能是由于其他原因。查看您的开发日志以查看实际查询。

# c - 规范化 glTranslatef()

> ID：10157546
> 
> 赞同：0
> 
> 时间：2012-04-14T21:34:21.113
> 
> 标签：c, opengl

glTranslate() 的参数指定翻译原点的单位数量。因此，有可能超出显示器。有没有办法标准化我们移动的数量，这样我们就不会超出绘图区域？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T21:41:36.390

> glTranslate() 的参数指定翻译原点的单位数量。

不（人们应该停止学习固定功能 GL 的另一个原因）。

`glTranslate`生成一个*矩阵*，与当前矩阵右乘成为新的当前矩阵。它确实创建了一个平移矩阵，但它不一定从*屏幕*中心移动。例如，这是完全有效的：

```
glTranslatef(10.0f, 10.0f, 10.0f);
glTranslatef(0.0f, 50.0f, 0.0f); 
```

这样做也是有效的：

```
glTranslatef(10.0f, 10.0f, 10.0f);
glRotatef(90.0f, 0.0f, 0.0f, 1.0f);
glTranslatef(0.0f, 50.0f, 0.0f); 
```

这会进行平移，然后围绕 Z 轴旋转 90 度。这会影响执行的最终翻译。

你也可以在里面放一个秤。

如果你想在屏幕上保留一个对象，这取决于*你*，而不是 OpenGL。

# google-maps - Google Maps API 在商业应用中的使用，收费和登录

> ID：10157547
> 
> 赞同：2
> 
> 时间：2012-04-14T21:35:00.960
> 
> 标签：google-maps, conflict

我阅读了大量关于商业应用程序的 Google Maps API 使用条款的 Stackoverflow 和其他网站内容。

我有一个关于术语冲突的问题。

第 9.1.1-a 条规定：

> (a) 免费访问（免费）。您的 Maps API 实施必须通常可供用户免费访问，并且不得要求付费订阅或其他基于费用的受限访问。

条款 9.1.2-b 说：

> (b) 移动应用程序。如果您的 Maps API 实施用于通过在线商店收费出售并且可下载到可以访问在线的移动设备的移动应用程序中，则第 9.1.1(a) 节（免费访问）中的规则不适用店铺。

如果我的应用程序可以从 Android 市场付费下载，但 Maps API 实现可以通过付费订阅来实现。

第 9.1.2-b 条是否仍然适用？这些术语之间是否有任何优先级？我能否在可从 Android Market 下载但 API 实现可通过付费订阅访问的应用程序中免费使用 Maps API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:00:30.010

对我来说，第 9.1.2-b 条隐藏了你的应用程序（即使这种功能只能通过付费订阅才能访问）但我不是律师。

您可以在谷歌论坛上提问：（谷歌工作人员可以回答） [http://groups.google.com/a/googleproductforums.com/forum/#!forum/maps](http://groups.google.com/a/googleproductforums.com/forum/#!forum/maps)

或者您也可以尝试联系谷歌地图 API 销售： http: [//support.google.com/enterprisehelp/bin/request.py ?&contact_type=gme](http://support.google.com/enterprisehelp/bin/request.py?&contact_type=gme)

最好的问候，朱利安

# algorithm - 计算时间加权移动平均线

> ID：10157548
> 
> 赞同：5
> 
> 时间：2012-04-14T21:35:01.883
> 
> 标签：algorithm, time-series, mean, moving-average

我有一个股票价格的时间序列，并希望计算十分钟窗口内的移动平均线（见下图）。由于价格变动是零星发生的（即它们*不是*周期性的），计算时间加权移动平均线似乎是最公平的。

![时间序列](../Images/e6df1829109aced9f97d1693420ec4fa.png)

图中有四个价格变化：A、B、C 和 D，后三个发生在窗口内。请注意，因为 B 只出现在窗口中的某个时间（比如 3 分钟），所以 A 的值仍然有助于计算。

事实上，据我所知，计算应该完全基于 A、B 和 C（*而不是*D）的值以及它们与下一个点之间的持续时间（或者在 A 的情况下：开始之间的持续时间时间窗口和 B)。最初 D 不会有任何影响，因为它的时间权重为零。 **这个对吗？**

假设这是正确的，我担心的是移动平均线会比非加权计算“滞后”更多（这将立即解释 D 的值），但是，非加权计算有其自身的缺点：

*   尽管在时间窗口之外，“A”对结果的影响与其他价格一样大。
*   突然出现的快速价格变动会严重影响移动平均线（尽管这可能是可取的？）

任何人都可以就哪种方法似乎最好提供任何建议，或者是否有值得考虑的替代（或混合）方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T21:57:36.567

这两个建议来自离散世界，但您可能会为您的特定案例找到灵感。

看看[指数平滑](http://en.wikipedia.org/wiki/Exponential_smoothing)。在这种方法中，您引入了平滑因子 (α ∈ [0;1])，它允许您改变最近元素对“预测”值的影响（较旧的元素被分配以指数递减的权重）：

s [t] =αx [t-1] +(1+α)s [t-1] ; s [1] =x [0]

我创建了一个简单的动画，说明指数平滑如何跟踪`x=[1 1 1 1 3 3 2 2 2 1]`具有三个不同 α={0.3, 0.6, 0.9} 的统一时间序列：

![在此处输入图像描述](../Images/1569a8d5ecf021d0672b6a0586466be4.png)

还可以查看一些强化学习技术（查看不同的折扣方法），例如[TD-learning](http://en.wikipedia.org/wiki/Temporal_difference_learning)和[Q-Learning](http://en.wikipedia.org/wiki/Q-learning)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T21:50:38.270

你的推理是正确的。你想用平均值做什么？不知道很难给出任何建议。

也许另一种选择是考虑您的运行平均值 A，当出现新值 V 时，计算新平均值 A' 为 (1-c)*A+c*V，其中 c 介于 0 和 1 之间。这方式较新的蜱具有更强的影响力，而旧蜱的影响会随着时间的推移而消散。您甚至可以使 c 取决于自上一个滴答声以来的时间（随着滴答声越来越近，c 变得更小）。

在第一个模型（加权）中，平均值每秒都会不同（因为旧读数的权重较低，而新的读数较高）所以它总是在变化，这可能是不可取的。使用第二种方法，随着新价格的引入和旧价格从窗口中消失，价格会突然上涨。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-22T23:25:09.387

在扩展汤姆的答案时，可以形式化考虑刻度之间的间距的公式（关闭刻度的权重相应地较低）：

ema [n] = u * ema [n-1] + (v - u) * x [n-1] + (1 - v) * x [n]

在哪里：

a = ( t [n] - t [n-1] ) / T
即 a 是到达时间增量与平均间隔的比值

和

u = e ^(-a)

和

v = 1（使用前一点），或
v = (1 - u) / a（线性插值>，或
v = u（下一点）

更多信息请参见《高频金融概论》一书的第 59 页。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-14T21:50:50.843

是的，移动平均线当然会滞后。这是因为它的价值是历史信息：它总结了过去 10 分钟的价格样本。这种平均值本质上是“滞后的”。它有一个内置的五分钟偏移量（因为没有偏移量的框平均值将基于 +/- 5 分钟，以样本为中心）。如果价格长期处于 A 位置，然后再变化一次到 B，则平均需要 5 分钟才能达到 (A + B) / 2。

如果要在域中不发生任何变化的情况下对函数进行平均/平滑，则权重必须均匀分布在样本点周围。但这对于实时发生的价格是不可能的，因为未来的数据不可用。

如果您希望最近的更改（如 D）产生更大的影响，请使用对最近数据或更短时间段赋予更大权重的平均值，或两者兼而有之。

平滑数据的一种方法是简单地使用单个累加器（“平滑估计器”）`E`并定期对数据进行采样`S`。 `E`更新如下：

```
E = E + K(S - E) 
```

即当前价格样本S与估计量E之差的一小部分K（0到1之间）加到E中。假设价格已经在A很长时间了，所以E在A，然后突然变为 B。估计器将开始以指数方式向 B 移动（如加热/冷却、电容器的充电/放电等）。一开始它会跳得很大，然后增量越来越小。它移动的速度取决于 K。如果 K 为 0，则估计器根本不会移动，如果 K 为 1，它会立即移动。使用 K，您可以调整对估计器与新样本的权重。更多的权重被隐式地赋予最近的样本，并且样本窗口基本上延伸到无穷大：E 基于曾经出现的每个值样本。当然，非常旧的那些对当前值几乎没有影响。一个非常简单，漂亮的方法。

# jpa - Apache Aries 托管 JPA 支持哪些 JPA 提供程序？

> ID：10157556
> 
> 赞同：2
> 
> 时间：2012-04-14T21:36:22.543
> 
> 标签：jpa, osgi, openjpa, aries

显然，OpenJPA。我也看到提到过 EclipseLink 和 Hibernate，但是在功能上有显着差异吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:17:06.767

大多数差异来自提供者对 OSGi 的感知程度。例如，您可能需要自己将 Hibernate jar 打包为 OSGi 捆绑包（或使用其他人已经打包的集合 - 网上有一些浮动的）。

有时，提供者会尝试以无法在 OSGi 环境中工作的方式进行类加载，因此，如果您自己包装或使用主要支持的提供者的“离线”功能，则需要注意这一点。

您还需要确保提供者将自己注册为 OSGi 服务。这仅适用于 OpenJPA，并且 Aries 代码库中有一个 EclipseLink 适配器。我假设人们共享的 Hibernate 包也可以做到这一点。在此线程中有关于如何为其他提供者（特别是 DataNucleus）执行此操作的说明：

[http://www.mail-archive.com/aries-user@incubator.apache.org/msg00251.html](http://www.mail-archive.com/aries-user@incubator.apache.org/msg00251.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:55:25.197

我实际上已经测试了提供商，所以我没有给你一个理论上的答案。

对于 Aries JPA 版本 1.0.0

*   OpenJPA 工作
*   休眠不工作
*   EclipseLink 没试过

由于此处记录的问题，休眠不起作用： [https ://issues.apache.org/jira/browse/ARIES-978](https://issues.apache.org/jira/browse/ARIES-978)

由于缺少捆绑上下文，基本上部署失败。我认为可以安全地假设 Aries 仅支持 OpenJPA，直到它们在回归测试/样本中包含 Hibernate 和 EclipseLink。我会注意何时/如果发生这种情况。

# emacs - EDE 中有哪些不同的目标类型？

> ID：10157559
> 
> 赞同：7
> 
> 时间：2012-04-14T21:36:46.400
> 
> 标签：emacs, cedet

`M-x ede-new-target`要求一个目标类型，虽然目标类型是不言自明的，但我并不是 100% 清楚如何使用它们。例如，我假设“程序”目标是代码文件，但其他的呢？EDE 手册中的示例将其用于头文件，但可以在其中放入其他内容吗？什么是共享对象目标？等等等等。

似乎在任何地方都没有任何好的文档，所以有人可以描述这些目标类型的用途吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:04:58.097

信息文档中有一些描述，其他你可以在源代码中看到......这是当前目标的列表，它因项目类型而异：

*   `archive`- 目标代码存档/静态库
*   `auxiliary`- 处理项目中的辅助文件 - README、*.txt 等。
*   `emacs lisp`- 编译 Emacs Lisp 代码
*   `emacs lisp autoloads`- 使用 Elisp 自动加载创建文件的目标
*   `info`- 处理 texinfo 文件
*   `miscellaneous`- 允许用户使用用户提供的编译项目其他部分的目标`Makefile`
*   `program`- 构建可执行程序
*   `scheme`- 处理 Scheme (guile) 源代码的目标
*   `semantic grammar`- 目标是正确构建语义的语法文件，包括 Wisent 和 Bovine。这个目标是在语义中定义的，而不是在 EDE 中
*   `sharedobject`- 建立共享库的目标

# android - 无法在 android opencv 2.3 中导入 ml.h

> ID：10157561
> 
> 赞同：0
> 
> 时间：2012-04-14T21:36:53.757
> 
> 标签：android, opencv, compiler-errors, android-ndk, svm

我正在使用 C 接口，当我包含“ml.h”时运行 ndk-build 时出现以下错误：

```
In file included from /Users/user/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/bits/stl_algobase.h:61,
             from /Users/user/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/bits/stl_tree.h:62,
             from /Users/user/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/map:60,
             from /Users/user/android-opencv/OpenCV-2.3.1/share/OpenCV/../../include/opencv2/ml/ml.hpp:2022,
             from /Users/user/android-opencv/OpenCV-2.3.1/share/OpenCV/../../include/opencv/ml.h:46,
             from /Users/user/CarSafe/jni/blink_detection.c:7:
/Users/user/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/cstddef:51: error:   expected '=', ',', ';', 'asm' or '__attribute__' before ':' token 
```

如果我注释掉“ml.h”的包含，它可以正常编译并正常运行。

问题是我想在我的 C 代码中使用 opencv svm 库。我究竟做错了什么？或者我应该将它编译为 C++ 代码并在 C++ 中使用 ml.hpp 标头。这适用于项目中的其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:44:16.307

仔细查看输出的最后一行：

```
/Users/user/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/cstddef:51: error:   expected '=', ',', ';', 'asm' or '__attribute__' before ':' token 
```

根据您在问题中所写的内容，您似乎正在尝试使用 C 编译器使用 C++ 标准库编译代码。

另外，虽然我不熟悉 OpenCV，但我认为您应该能够将代码编译为 C++ 并且仍然包含“ml.h”。C++ 头文件并不总是使用 *.hpp 扩展名。

# android - 安卓麦克风意图

> ID：10157562
> 
> 赞同：1
> 
> 时间：2012-04-14T21:36:59.570
> 
> 标签：android, android-intent, microphone

如何在不从当前活动切换屏幕的情况下以这种意图开始此活动？

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
startActivityForResult(intent, 444); 
```

# android - 在列表中选择了错误的项目

> ID：10157563
> 
> 赞同：0
> 
> 时间：2012-04-14T21:37:17.423
> 
> 标签：android, listview, arraylist, listactivity, simpleadapter

我有一个带有 SimpleAdapter 的 ListActivity，可以使用 simple_items_list_2 布局显示 2 项列表。HashMap 的 ArrayList 保存项目。

该列表必须保存我从不同的 UDP 数据包接收的数据。所以，我有另一个线程，在其中接收这些数据包。从那里，它使用处理程序发送接收到的数据，并将项目添加到列表中。

现在我正确接收了数据包，甚至生成了列表。但是，当我选择说项目 B 时，它有时会选择项目 A。

以下是代码片段：

在 OnCreate() 中，

```
 lv = getListView();

        list = new ArrayList<HashMap<String, String>>();

        String[] from = { "name", "address" };
        int[] to = { android.R.id.text1, android.R.id.text2 };

        adapter = new SimpleAdapter(getApplicationContext(), list,
                android.R.layout.simple_list_item_2, from, to);
        setListAdapter(adapter); 
```

在处理程序的代码中，它从线程中获取包含内容的消息：

```
 list.add(putData(scanned_name, scanned_addr));
        adapter.notifyDataSetChanged();
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,int position, long id) { 

                TextView name_tv = (TextView) findViewById(android.R.id.text1);
                TextView addr_tv = (TextView) findViewById(android.R.id.text2);

                selectedName = name_tv.getText().toString();
                selectedAddr = addr_tv.getText().toString(); 
```

放数据的HashMap函数：

```
private HashMap<String, String> putData(String name, String address) {
        HashMap<String, String> item = new HashMap<String, String>();
        item.put("name", name);
        item.put("address", address);
        return item;
    } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:42:16.973

我认为你需要使用`view.findViewById`

```
TextView name_tv = (TextView) view.findViewById(android.R.id.text1);
TextView addr_tv = (TextView) view.findViewById(android.R.id.text2); 
```

# c++ - MFC：如何在按钮单击时最小化窗口？

> ID：10157570
> 
> 赞同：2
> 
> 时间：2012-04-14T21:38:16.283
> 
> 标签：c++, windows, mfc

所以它很容易关闭`CDialog::OnOK();`但是如何最小化服装按钮点击的窗口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T01:19:45.813

您可以将[CWnd::ShowWindow](http://msdn.microsoft.com/en-us/library/72szh9c7(v=vs.80).aspx)与`SW_MINIMIZE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:45:04.820

您应该能够向窗口发送（发布）WM_SYSCOMMAND/SC_MINIMIZE 命令。

# ruby-on-rails - 在 Ubuntu 服务器上安装 Rails 3.2/Ruby 1.9.2

> ID：10157576
> 
> 赞同：0
> 
> 时间：2012-04-14T21:38:51.963
> 
> 标签：ruby-on-rails, ruby

我已经使用 Rails 一段时间了，想设置一个本地 VM 的服务器。出于某种原因，我在尝试在 Ubuntu Server 11.10 上安装 Rails 时不断遇到错误。具体来说，在运行“gem install rails”时，我收到有关无法构建本机扩展的错误。此外，在我安装 Ruby 之后，它说它是 1.9.2 版，但是在尝试安装 Rails 之后，它告诉我它是 1.8.7 版……我在这里束手无策，谷歌没有帮助。

从 Ruby 安装开始，谁能给我一个快速的命令来完成这项工作？这应该很简单，但我显然错过了一两步，而且我的 Google Fu 让我非常失望。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:31:03.717

我*猜*你在安装`linecache19`gem 时遇到了麻烦。您需要获取 ruby​​ 源代码的副本并使用以下命令安装 gem

```
gem install ruby-debug19 -- --with-ruby-include=/path/to/ruby/source 
```

你知道，有人应该解决这个问题...

# mysql - mySQL：从搜索结果中批量插入记录

> ID：10157577
> 
> 赞同：0
> 
> 时间：2012-04-14T21:38:54.083
> 
> 标签：mysql

我有一个记录订阅者邮件列表订阅的表。

```
CREATE TABLE IF NOT EXISTS `subscriber_list` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `subscriber_id` int(11) NOT NULL,
  `account_id` int(11) NOT NULL,
  `list_id` int(11) NOT NULL,
  `date_entered_gmt` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `subscriber_id_account_id_list_id` (`subscriber_id`,`account_id`,`list_id`),
  KEY `list_id_account_id` (`list_id`,`account_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1454722 ; 
```

在使用该表的应用程序中，具有允许邮件列表中的所有订阅者订阅另一个订阅者的功能。

我打算使用子查询来获取邮件列表的所有当前订阅者，这些订阅者将订阅新的选定邮件列表，以及如何使用这个订阅者列表为每个定义新订阅但邮件list 最多可以有 250,000 个订阅者，所以我不知道应该怎么做。

干杯

马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:51:32.133

你可以使用 INSERT ... SELECT 像这样的东西 -

```
INSERT INTO subscriber_list (subscriber_id, account_id, list_id, date_entered_gmt)
SELECT subscriber_id, account_id, 4, NOW()
FROM subscriber_list
WHERE list_id = 3 
```

为了回应您的评论，我已更新此查询中的值。这会 -

```
SELECT subscriber_id, account_id, 4, NOW()
FROM subscriber_list
WHERE list_id = 3 
```

并将它们直接插入到订阅者列表中。因此，如果 SELECT 中的值是您要插入的值，这将适合您的方案。

# android - Android消费WebService ksoap2

> ID：10157579
> 
> 赞同：-1
> 
> 时间：2012-04-14T21:39:03.043
> 
> 标签：android, web-services, android-ksoap2

你好，我是安卓新手。

我正在尝试使用 glassfish 将我的 android 应用程序与我用 java 制作的 web 服务连接起来。

这是我的 WSDL。

```
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://TicketingServices/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://TicketingServices/" name="TicketingServices">
<types>
<xsd:schema>
<xsd:import namespace="http://TicketingServices/"     schemaLocation="http://localhost:8080/TicketingService/TicketingServices?xsd=1"/>
</xsd:schema>
</types>
<message name="login">
<part name="parameters" element="tns:login"/>
</message>
<message name="loginResponse">
<part name="parameters" element="tns:loginResponse"/>
</message>
<message name="ola">
<part name="parameters" element="tns:ola"/>
</message>
<message name="olaResponse">
<part name="parameters" element="tns:olaResponse"/>
</message>
<message name="teste">
<part name="parameters" element="tns:teste"/>
</message>
<message name="testeResponse">
<part name="parameters" element="tns:testeResponse"/>
</message>
<portType name="TicketingServices">
<operation name="login">
<input wsam:Action="http://TicketingServices/TicketingServices/loginRequest"  message="tns:login"/>
<output wsam:Action="http://TicketingServices/TicketingServices/loginResponse" message="tns:loginResponse"/>
</operation>
<operation name="ola">
<input wsam:Action="http://TicketingServices/TicketingServices/olaRequest" message="tns:ola"/>
<output wsam:Action="http://TicketingServices/TicketingServices/olaResponse" message="tns:olaResponse"/>
</operation>
<operation name="teste">
<input wsam:Action="http://TicketingServices/TicketingServices/testeRequest" message="tns:teste"/>
<output wsam:Action="http://TicketingServices/TicketingServices/testeResponse" message="tns:testeResponse"/>
</operation>
</portType>
<binding name="TicketingServicesPortBinding" type="tns:TicketingServices">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="login">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="ola">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="teste">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="TicketingServices">
<port name="TicketingServicesPort" binding="tns:TicketingServicesPortBinding">
<soap:address location="http://localhost:8080/TicketingService/TicketingServices"/>
</port>
</service>
</definitions> 
```

这是我的 androidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="pt.ubi.tecketing"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />   
    <uses-permission android:name="android.permission.INTERNET" />  
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TecketingAppActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是我的 Androidapp 代码

```
package pt.ubi.tecketing;

import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.*;
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.transport.HttpsTransportSE;

public class TecketingAppActivity extends Activity {

private static final String URL = "http://192.168.1.159:8080/TicketingService/TicketingServices?wsdl";
private static final String METHOD_NAME = "teste";
private static final String SOAP_ACTION = "TicketingServices";  
private static final String NAMESPACE = "http://TicketingServices/";         

TextView lblAviso; 
String resultsRequestSOAP;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    lblAviso = (TextView) findViewById(R.id.lblAvisoInternet);      

    //Criando os padâmetros de entrada
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    //request.addProperty("texto", "ola");      

    //Envelope SOAP
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        lblAviso.setText("AQUI1");

       //Chamada ao WS
       androidHttpTransport.call(SOAP_ACTION, envelope);
       lblAviso.setText("AQUI2");

       //String com o retorno
         resultsRequestSOAP = (String) envelope.getResponse();

        lblAviso.setText("teste"+resultsRequestSOAP);

    } catch (Exception e) {

        lblAviso.setText("ERRO");       

    }

}

} 
```

这是我的 Web 服务代码。

```
@WebService(serviceName = "TicketingServices", targetNamespace ="http://TicketingServices/")
public class TicketingServices {    

@WebMethod(operationName = "login")
public String login(@WebParam(name = "username") String username, @WebParam(name = "password") String password, @WebParam(name = "server") final String server) {

    return username;
}

@WebMethod(operationName = "ola")
public String ola(@WebParam(name = "texto") String texto) {

    return texto;
}

@WebMethod(operationName = "teste")
public String teste() {

    return "Ola";
}
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:48:52.663

问题出在我的android代码中，我写道：

```
 resultsRequestSOAP = (String) envelope.getResponse(); 
```

正确的是：

```
 SoapObject resultsRequestSOAP=(SoapObject)envelope.bodyIn; 
```

谢谢

# python - Mootools 请求获得“501 Unsupported method ('OPTIONS')”响应

> ID：10157581
> 
> 赞同：2
> 
> 时间：2012-04-14T21:39:35.140
> 
> 标签：python, http, mootools, cors

我有这个 mootools 请求：

```
new Request({
    url: 'http://localhost:8080/list',
    method: 'get',
}).send(); 
```

和一个处理它的小型python服务器：

```
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
import subprocess

class HttpHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        if self.path == '/list':
            self.list()
        else:
            self._404()

    def list(self):
        self.response200()
        res = "some string"

        self.wfile.write(res)

    def _404(self):
        self.response404()
        self.wfile.write("404\n")

    def response200(self):
        self.send_response(200)
        self.send_header('Access-Control-Allow-Origin', '*')
        self.send_header('Access-Control-Allow-Headers', 'X-Request, X-Requested-With')
        self.send_header('Content-type', 'application/json')
        self.end_headers()

    def response404(self):
        self.send_response(404)
        self.send_header('Content-type', 'application/json')
        self.end_headers()

def main():
    try:
        server = HTTPServer(('', 8080), HttpHandler)
        server.serve_forever()
    except KeyboardInterrupt:
        server.socket.close()

if __name__ == '__main__':
    main() 
```

当我尝试提出此请求时，我收到以下错误：

```
OPTIONS http://localhost:8080/ 501 (Unsupported method ('OPTIONS'))
XMLHttpRequest cannot load http://localhost:8080/. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我不确定发生了什么事。有人可以帮我吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T22:07:40.940

正如响应字符串告诉您的那样：`OPTIONS http://localhost:8080/ 501 (Unsupported method ('OPTIONS'))`

当 javascript 尝试从另一个来源请求资源时，现代浏览器首先询问另一个服务器，即目标，是否可以从另一个来源发出该请求，这正是`Access-Control*`标头所做的。但是这个请求不会*在*正常情况下发生`GET`，因为无论如何这实际上都会执行请求，而是使用该`OPTIONS`方法，该方法的存在唯一的原因是通知客户他们被允许做什么，而不是实际执行。

所以，你需要一个`do_OPTIONS`方法，它可能看起来像：

```
def do_OPTIONS(self):
    if self.path in ('*', '/list'):
        self.send_response(200)
        self.send_header('Allow', 'GET, OPTIONS')
        self.send_header('Access-Control-Allow-Origin', '*')
        self.send_header('Access-Control-Allow-Headers', 'X-Request, X-Requested-With')
    else:
        self.send_response(404)
    self.send_header('Content-Length', '0')
    self.end_headers() 
```

# iphone - 怎么删除NSManagedObject？可能通过键值匹配？

> ID：10157583
> 
> 赞同：1
> 
> 时间：2012-04-14T21:40:31.167
> 
> 标签：iphone, objective-c, ios5

我使用以下方法存储数据

```
- (NSManagedObject *) createCourseWithCourseCode:(NSString *) courseCode {
     NSManagedObject *course = [NSEntityDescription insertNewObjectForEntityForName:@"Course"   inManagedObjectContext:context];
    [course setValue:courseCode forKey:@"CourseCode"];
    [self saveChanges];
    return course;
} 
```

然后我尝试使用此代码删除，我从 fetch 方法获取 NSManagedObject ，但这不起作用。“一个 NSManagedObjectContext 不能删除其他上下文中的对象。”

```
- (void) removeCourseWithCourseCode:(NSManagedObject *) courseCode {
    [context deleteObject:courseCode];
    [self saveChanges];
} 
```

我想知道是否可以通过查找键 CourseCode 与字符串匹配的位置来简单地删除对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:44:18.877

您可以通过传递对象`objectID`而不是实际对象来做到这一点。

您的代码如下所示：

```
- (void) removeCourseWithCourseCode:(NSManagedObjectID *) courseCode {
    [context deleteObject:[context existingObjectWithID:courseCode] error:nil];
    [self saveChanges];
} 
```

您可以`NSManagedObject`像这样访问 的 ID：

```
[someObject objectID]; 
```

所以你的第一个代码块应该是这样的：

```
- (NSManagedObjectID *) createCourseWithCourseCode:(NSString *) courseCode {
     NSManagedObject *course = [NSEntityDescription insertNewObjectForEntityForName:@"Course"   inManagedObjectContext:context];
    [course setValue:courseCode forKey:@"CourseCode"];
    [self saveChanges];
    return [course objectID];
} 
```

# android - 是否为无序广播的意图过滤器设置优先级？

> ID：10157584
> 
> 赞同：0
> 
> 时间：2012-04-14T21:40:33.103
> 
> 标签：android, android-intent

文档只提到“该顺序仅适用于同步消息；异步消息将被忽略。” 这是否意味着 Android 仅查看“有序广播”的优先级？

```
 <receiver android:name=".receivers.PhoneStateReceiver" >
        <!-- TODO it's supposed to be an un-ordered broadcast -->
        <intent-filter android:priority="99999999999" >
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver> 
```

...使上述“优先级”无用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:30:27.003

> 这是否意味着 Android 仅查看“有序广播”的优先级？

是的。

> ...使上述“优先级”无用？

我不知道是否`PHONE_STATE`已订购。

# php - 从 MYSQL 表中更新值而不重新加载页面？

> ID：10157586
> 
> 赞同：1
> 
> 时间：2012-04-14T21:40:43.370
> 
> 标签：php, jquery, mysql, html, ajax

我为一个家庭项目构建了一个小型登录系统，所以，当用户登录时，他被重定向到`userspage.php`。在页面中，我从我的 mysql 表中获取了一些数据，但问题是，其中一个值我fetch 是通过它附近的按钮向用户显示的，当用户按下这些按钮时，我需要执行 php 操作来增加按钮显示的值（例如==> myvalue = 10 |当用户点击时在按钮上： myvalue = 11 ）。我已经构建了这部分，它工作得很好，但是我需要增加值并更新 mysql 列而不刷新页面？我知道它可能但是来自网络的每个教程我'已经试过了不起作用。

谢谢是提前！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:43:47.047

AJAX 是您正在寻找的。最好的库是带有 $.ajax() 方法的 jQuery [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T22:28:37.767

以下代码有一个 onclick 调用 updatedb.php 的按钮，并在名为“result”的 div 元素中显示其输出

```
<html>
<head>
<script type="text/javascript">
function UpdateDb()
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("result").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","updatedb.php",true);
xmlhttp.send();
}
</script>

   </head>
    <body>

<button onclick='UpdateDb()'>Update</button>
<p> <span id="result"></span></p>

</body>
</html> 
```

然后写updatedb.php

```
<?php
do mysql update here.
and echo the result you want to display.
?> 
```

# javascript - 为什么它不应该上传图像？

> ID：10157590
> 
> 赞同：1
> 
> 时间：2012-04-14T21:41:11.420
> 
> 标签：javascript, jquery

我有一个问题，如果文件扩展名不正确，它会显示警报。这很好用，但问题是它不应该上传文件。为什么要上传文件，因为在下面的函数中我已经说明如果通过了 imageValidation，则转到“startUploadImage()”函数开始上传：

```
function imageClickHandler(imageuploadform){ 
      if(imageValidation(imageuploadform)){ 
          return startImageUpload(imageuploadform); 
      } 
      return false;
  } 
```

下面是检查文件扩展名的 imageValidation() 代码：

```
function imageValidation(imageuploadform) {

    var val = $(imageuploadform).find(".fileImage").val();
    switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
        case 'gif':
        case 'jpg': 
        case 'jpeg':
        case 'pjpeg':
        case 'png':
             return true;

        case '':
            $(imageuploadform).find(".fileImage").val();
                     alert("To upload an image, please select an Image File");
            return false;

        default:
             alert("To upload an image, please select a valild file extension.");
             return false;

    }

    return false;

} 
```

我不知道你是否需要查看 startImageUpload 函数，但如果你这样做了，那么这也在下面：

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

      return true;
} 
```

显示表单的代码：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='imageClickHandler(this);' class='imageuploadform' >" +

    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label>" +

    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 

    "</p><p class='imagef1_cancel' align='center'><label>" +

    "<input type='button' name='cancelImageBtn' class='cancelimage' value='Cancel' /></label>" + 
    "</p></form>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:56:28.577

问题出在您的表单 onsubmit 事件中。你应该看起来像这样：

```
onsubmit="return imageClickHandler(this);" 
```

注意*返回*。如果不存在，则不会返回 imagehandler 函数的结果，并且不会取消提交事件。

此外，实际上在属性上使用单个 qoutes (') 并不是真正有效的 html。您可能应该将它们切换为双引号，然后使用单引号作为 javascript 字符串的终止符。像这样：

```
var $fileImage = $('<form action="imageupload.php" method="post" enctype="multipart/form-data" target="upload_target" onsubmit="return imageClickHandler(this);" class="imageuploadform" >' +  
    'Image File: <input name="fileImage" type="file" class="fileImage" /></label><br/><label>' +
    '<input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label>' +
    '</p><p class="imagef1_cancel" align="center"><label>' +
    '<input type="button" name="cancelImageBtn" class="cancelimage" value="Cancel" /></label>' + 
    '</p></form>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:47:38.280

看起来您的目标 imageuploadform 不正确

它应该是 $("#imageuploadform") 如果它是 id 或 $(".imageuploadform") 如果它是一个类

但似乎 coe 也可能有更多错误

# php - 使用 Javascript 或 PHP 获取 URL 参数？

> ID：10157594
> 
> 赞同：-4
> 
> 时间：2012-04-14T21:41:30.057
> 
> 标签：php, javascript, url, redirect, url-parameters

我已经链接了一个站点，该站点使用参数“access_token”将浏览器重定向到另一台服务器，例如

> [http://somedomain.com/blank.html#access_token=sadf2342dsdfsd](http://somedomain.com/blank.html#access_token=sadf2342dsdfsd)

在页面重定向到其他服务器之前，如何从 URL 中获取此参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:15:23.530

我认为您正在尝试在客户端浏览器离开您的网站后访问其地址栏？

`iframe`除非您在 an 中打开站点，然后使用 javascript 访问子框架，否则这是不可能的。

您可以通过更改链接的目标轻松地做到这一点，例如

改变这个：

```
<a href="http://thewebsite.com/">Go to website</a> 
```

对此：

```
<iframe name="tokenFrame" id="tokenFrame" width=1 height=1 frameborder=0> </iframe>
<a href="http://thewebsite.com/" target="tokenFrame">Don't go to website</a> 
```

然后在 javascript 中，在页面更改为带有令牌的页面后：

```
var url = document.getElementById("tokenFrame").src 
```

或类似的东西来获取位置，例如

```
var frame = document.getElementById("tokenFrame");
var url = frame.top.location.href; 
```

或者

```
var url = top.tokenFrame.location.href; 
```

最后解析URL获取值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T21:58:05.473

我不太清楚你的问题。虽然我对从 URL 获取 access_token 参数的方式有一些建议。

只要您知道 url，您就可以分解字符串并获取 access_token。它可能看起来像这样：

```
echo end( explode('#', 'http://somedomain.com/blank.html#access_token=sadf2342dsdfsd')); 
```

如果您直接在该站点，则可以使用 javascript 获取哈希：

```
document.location.hash.substr(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:01:32.337

在javascript中，您可以像这样获取它的值

```
window.location.hash.replace('#access_token=','') 
```

# java - 使用哪种 Javax.awt 布局？

> ID：10157597
> 
> 赞同：0
> 
> 时间：2012-04-14T21:41:49.650
> 
> 标签：java, layout, awt

java.awt 布局有问题。

我已经尝试了这里列出的每一个布局：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/](http://docs.oracle.com/javase/tutorial/uiswing/layout/)但没有达到我想要的。

我有2个JPanel。一个有固定大小的。具有可变宽度的一秒。两者都在同一水平面上，并且都具有相同的高度。

第一个应该留在 JFrame 的左侧，第二个在框架宽度增加时展开。它们之间也应该有一点差距，比如说5px。

你会怎么做？

谢谢。

Ps：有一个类似的例子。在左侧，带有 6 个按钮的面板位于左侧。右侧是展开整个窗口时的面板示例。

![在此处输入图像描述](../Images/c7dfc5dd1bc551ecc996d45757264cc3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:44:18.310

我建议这个布局使用一个[`GroupLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.html)或一个[嵌套](https://stackoverflow.com/a/5630271/418556)布局。第一个是更新的布局，它提供水平和垂直组来对齐组件。第二个仅仅是“将布局放入布局中”，以针对 UI 的不同区域实现不同的布局策略（示例如下）。

![](../Images/80b2f6a16f6e6ba76969e74e6c6f60ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:51:15.000

一种选择是使用`javax.swing.Box`，它使用 a`BoxLayout`并提供方便的方法，例如：

*   `createRigidArea(Dimension d)`，它创建了一个具有恒定大小的（容器）区域。
*   `createHorizontalStrut(int width)`，这会在组件之间创建固定数量的空间。

有关 API，请参阅[javax.swing.Box](http://docs.oracle.com/javase/7/docs/api/javax/swing/Box.html)。

# dart - 如何为 Dart 创建库？

> ID：10157598
> 
> 赞同：10
> 
> 时间：2012-04-14T21:41:59.117
> 
> 标签：dart, dartium

如何使用 Dart 创建库？

我想开始将我创建的一些 JavaScript（和其他语言）库移植到 Dart。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T06:52:34.647

只需将其放在您的库文件中（第一名）：

```
library mylibraryname; 
```

然后，您可以使用以下命令导入此库：

```
import "path/to/mylibraryname.dart"; 
```

其他选项可用，例如`part`充当包含的选项。

对于更深入的教程，我向您推荐[Dartwatch 的这篇博文](http://blog.dartwatch.com/2011/10/exploring-dart-libraries-organizing.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-05T04:29:19.940

[stagehand](https://pub.dev/packages/stagehand)是最简单的。

## 用法

```
mkdir fancy_project
cd fancy_project
stagehand package-simple 
```

## 舞台手模板

```
console-full - A command-line application sample.
package-simple - A starting point for Dart libraries or applications.
server-shelf - A web server built using the shelf package.
web-angular - A web app with material design components.
web-simple - A web app that uses only core Dart libraries.
web-stagexl - A starting point for 2D animation and games. 
```

## 安装

如果您想在命令行上使用 Stagehand，请使用 pub global activate 安装它：

```
pub global activate stagehand 
```

# mysql - 如何在 Google App Engine 中进行 OR 查询

> ID：10157599
> 
> 赞同：1
> 
> 时间：2012-04-14T21:42:04.273
> 
> 标签：mysql, database, google-app-engine

我有一个名为`RelatedUsers`with 的模型具有三个属性：

```
firstUserId 
secondUserId 
relationshipStatus 
```

我来自 MySQL，我会这样做：

```
mysql_query("SELECT * FROM relatedUsers WHERE (firstUserId='$originatorId' 
AND secondUserId='$recipientId') OR (firstUserId='$recipientId' 
AND secondUserId='$originatorId')"); 
```

我怎样才能用 Google App Engine 做这样的事情？我在网上找不到类似的案例。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:12:15.350

通过对键运行多个查询然后获取键。

```
from google.appengine.ext import ndb

class User(ndb.Model):
    email = db.StringProperty()

options = ndb.QueryOptions(keys_only=True)
condition_1 = ndb.Query(User, options=options).filter(User.email == "mom@home.com")
condition_1 = ndb.Query(User, options=options).filter(User.email == "dad@home.com")

key_list = list(set(list(condition_1) + list(condition_2)))

mom_and_dad = ndb.get_multi(key_list) 
```

如果您必须订购它们，您将不得不在记忆中这样做。

/从记忆中完成:)

# liferay - Liferay 6：最大化状态下的 Portlet 视图

> ID：10157605
> 
> 赞同：1
> 
> 时间：2012-04-14T21:43:06.987
> 
> 标签：liferay, liferay-6

一旦向 MVCPortlet 类发出请求，我想以 MAXIMIZED 状态显示视图。这是我在 JSP 页面中的代码

```
<portlet:actionURL  name="addBook" var="addBookURL" />
<aui:form action="<%= addBookURL.toString() %>" method="post">
    <aui:input type="text" name="name"></aui:input>
    <aui:input type="password" name="pwd"></aui:input>
    <aui:button type="submit"></aui:button>
</aui:form> 
```

这是我的 MVCPortlet 类：

```
if(true)
        {

             response.setPortletMode(PortletMode.VIEW);
            response.setWindowState(WindowState.MAXIMIZED);

        }

        else
        {

             response.setPortletMode(PortletMode.VIEW);
            response.setWindowState(WindowState.MAXIMIZED);

        } 
```

这就是结果（请参见下图）

![在此处输入图像描述](../Images/9f1e2250397f2009f054165f7d0e16ca.png)

我的问题是，我期待一旦调用 Action 类，Portlet 就会以 MAXIMIZED 状态显示。

但是 Portlet 仍然处于 NORMAL 状态，请告诉我为什么？以及如何在 MVCPortlet 类的结果后以 MAXIMIZED 状态查看 Portlet。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T14:10:39.940

您有两种可能性如何以最大化模式显示 portlet。您可以将具有最大化值的 windowState 参数添加到 actionURL 标记（它将始终以最大化状态显示到 portlet 的链接），或者您将这一行

```
response.setWindowState(WindowState.MAXIMIZED); 
```

进入您的 portlet 的 processAction 方法（您可以根据某些东西做出决定）。

（这是规范所说的，但 Liferay 通常会遵守它）。

# jquery - 如何使用 jQuery 更新元标记

> ID：10157606
> 
> 赞同：1
> 
> 时间：2012-04-14T21:43:10.500
> 
> 标签：jquery

我曾尝试使用

```
$('meta[name=description]').attr('content', 'new value'); 
```

但是以上内容在任何浏览器中都不起作用。

请建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:46:16.107

```
jQuery(document).ready(function($) { 
    $('meta[name=description]').attr('content', 'new value');
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T21:47:47.133

对我来说似乎很好。

```
$(function () { // dom ready
    var $meta = $('meta[name=description]').attr('content', 'hi');
    $('body').text($meta.attr('content'));​
}); 
```

[http://jsfiddle.net/F7GbX/](http://jsfiddle.net/F7GbX/)

您可能没有检查 dom 何时准备就绪。因此元标记尚不可用。

呈现 html 页面时，您编写的所有标签（例如，`<meta>`可能会在您的 javascript 准备就绪后加载）。因此，您必须在`domready`调用中运行您的代码，以便在加载页面中的所有标记之前不会运行代码。

在 jQuery 的底层——这个方法使用`DOMContentLoaded`. [https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)

# android - 具有自定义背景的按钮

> ID：10157608
> 
> 赞同：1
> 
> 时间：2012-04-14T21:43:43.400
> 
> 标签：android, android-layout, button

我有一些按钮，我这样声明它们的背景：

```
 <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
   android:layout_height="40dp"
    android:text="" 
    android:layout_weight="1"
    android:background="@drawable/backgroundxml"
     /> 
```

这是背景xml：

```
 <stroke
  android:width="1dp"
 android:color="#FFFFFF" />

<corners android:radius="3dp" />

 <gradient
   android:angle="270"
   android:centerColor="#f1f1f2"
  android:endColor="#d1d3d4"
  android:startColor="#ffffff" />

</shape> 
```

但现在我遇到了一个问题。我想保留那种样式但是在它们上设置了带有文本的按钮，我想在它们上设置一个可绘制对象。但是当我从以下位置更改背景时：

```
 android:background="@drawable/backgroundxml" 
```

至

```
 android:background="@drawable/mybackbutton" 
```

然后我在背景中没有笔画和开始、中心和结束颜色。那么如何设置 Drawable 但仍保留背景？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T21:56:29.017

尝试使用 ImageButton。像这样的东西：

```
 <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/your_drawable"
        android:background="@drawable/your_background" /> 
```

# ruby-on-rails - rails-设计-无法注销

> ID：10157611
> 
> 赞同：2
> 
> 时间：2012-04-14T21:43:53.110
> 
> 标签：ruby-on-rails, devise, routes

我无法测试我的登录...因为我无法注销（还没有把注销按钮放在那里）。我能够测试一次，但现在我“卡住”了！

我怎么不能用
`http://localhost:3000/account/sign_out`

我得到一个错误`No route matches [GET] "/account/sign_out"`

但`rake routes`给了我：

```
 ...
         new_standard_user_session GET    /account/sign_in(.:format)                                      devise/sessions#new
             standard_user_session POST   /account/sign_in(.:format)                                      devise/sessions#create
     destroy_standard_user_session DELETE /account/sign_out(.:format)                                     devise/sessions#destroy    new_standard_user_registration GET    /account/sign_up(.:format)                                      devise/registrations#new
             ... 
```

我`/account/sign_in`和`/account_sign_up`网址都可以

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T21:59:46.627

```
No route matches [GET] "/account/sign_out" 
```

您尝试通过 GET 方法访问该链接，但您的路线已删除，正如您发布的那样。

```
destroy_standard_user_session DELETE /account/sign_out(.:format) 
```

因此，要使其正常工作，请使用`method`来自的参数`link_to`（我假设您正在创建链接`link_to`）

像这样的东西

```
link_to "Sign Out", destroy_standard_user_session_path, :method => :delete 
```

此致

# xquery - MarkLogic 连接查询

> ID：10157616
> 
> 赞同：3
> 
> 时间：2012-04-14T21:44:42.650
> 
> 标签：xquery, marklogic

嗨，我是 marklogic 和 Xquery 世界的新手。我想不出在 Marklogic Xquery 中编写以下逻辑的起点。如果有人能给我想法/样本，我将不胜感激，这样我就可以实现以下目标：

我想根据 B.XML 中的单词查找来查询 A.XML。查询应生成 C.XML。逻辑应该如下：

A.XML

```
<root>
<content> The state passed its first ban on using a handheld cellphone while driving in 2004 Nokia Vodafone Nokia Growth Recession Creicket HBO</content>
</root> 
```

B.XML

```
<WordLookUp>
<companies>
    <company name="Vodafone">Vodafone</company>
    <company name="Nokia">Nokia</company>
</companies>
<topics>
    <topic group="Sports">Cricket</topic>
    <topic group="Entertainment">HBO</topic>
    <topic group="Finance">GDP</topic>
</topics>
<moods>
    <mood number="4">Growth</mood>
    <mood number="-5">Depression</mood>
    <mood number="-3">Recession</mood>
</moods> 
```

C.XML（结果 XML）

```
<root>
    <content> The state passed its first ban on using a handheld cellphone while driving in 2004 Nokia Vodafone Nokia Growth Recession Creicket HBO</content>
    <updatedElement>
        <companies>
            <company count="1">Vodafone</company>
            <company count="2">Nokia</company>
        </companies>
        <mood>1</mood>
        <topics>
             <topic count="1">Sports</topic>
             <topic count="1">Entertainment</topic>
        </topics>
            <word-count>22</word-count>
    </updatedElement>
    </root> 
```

1.  在 B.xml 中搜索 A.xml 的每个 company/text()，如果找到匹配创建标签：TAG {company count="Number of the word of the word"}company/@name {/company}

2.  在 B.xml 中搜索 A.xml 的每个 topic/text()，如果找到匹配创建标签 TAG {topic topic="该单词的出现次数"}topic/@group{/topic}

3.  在B.xml中搜索A.xml的每个mood/text()，如果找到匹配[第一个单词的出现次数*{/mood[第一个单词]/@number}]+[第二个单词的出现次数*{/mood[第二个单词]/@数字}）]....

4.  获取元素的字数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:50:24.443

这是一个有趣的过程，我在这个过程中学到了一些东西。谢谢！

注意：为了获得您想要的结果，我修正了 A.xml 中的一个错字（“Creicet”->“Cricket”）。

以下解决方案使用两个 MarkLogic 特定功能：

*   `cts:highlight`（用于用您可以计算的节点替换匹配的文本）
*   `cts:tokenize`（用于将给定的字符串分解为单词、空格和标点符号部分）

它还分别包含了一些特定于这两个功能的强大魔法：

*   特殊变量的动态绑定`$cts:text`（对于这个特定用例来说，这并不是真正必要的，但我离题了），以及
*   添加以下子类型的数据模型扩展`xs:string`：
    *   `cts:word`,
    *   `cts:space`， 和
    *   `cts:punctuation`.

享受！

```
xquery version "1.0-ml";

(: Generic function using MarkLogic's ability to find query matches within a single node :)
declare function local:find-matches($content, $search-text) {
  cts:highlight($content, $search-text, <MATCH>{$cts:text}</MATCH>)
  //MATCH
};

(: Generic function using MarkLogic's ability to tokenize text into words, punctuation, and spaces :)
declare function local:get-words($text) {
  cts:tokenize($text)[. instance of cts:word]
};

(: The rest of this is pure XQuery :)
let $content := doc("A.xml")/root/content,
    $lookup  := doc("B.xml")/WordLookUp
return
  <root>
    {$content}
    <updatedElement>

      <companies>{
        for $company in $lookup/companies/company
        let $results := local:find-matches($content, string($company))
        where exists($results)
        return
          <company count="{count($results)}">{string($company/@name)}</company>
      }</companies>

      <mood>{
        sum(
          for $mood in $lookup/moods/mood
          let $results := local:find-matches($content, string($mood))
          return count($results) * $mood/@number
        )
      }</mood>

      <topics>{
        for $topic in $lookup/topics/topic
        let $results := local:find-matches($content, string($topic))
        where exists($results)
        return
          <topic count="{count($results)}">{string($topic/@group)}</topic>
      }</topics>

      <word-count>{
        count(local:get-words($content))
      }</word-count>

    </updatedElement>
  </root> 
```

如果您对上述所有操作有任何后续问题，请告诉我。起初，我倾向于使用`cts:search`or `cts:contains`，它是 MarkLogic 中搜索的基础。但我意识到，这个示例与其说是关于搜索（查找文档），不如说是关于在已经给定的文档中查找匹配的文本。如果您需要以某种方式扩展它以聚合大量文档，那么您需要研究`cts:search`or的额外使用`cts:contains`。

最后一个警告：如果您认为您的内容可能已经有`<MATCH>`元素，那么您需要在调用时使用不同的元素名称`cts:highlight`（您可以保证不会与内容的现有元素名称冲突的名称）。否则，您可能会得到错误数量的结果（高于准确计数）。

**附录：**

我很好奇这是否可以在没有的情况下完成`cts:highlight`，因为它`cts:tokenize`已经将文本分解为您的所有单词。使用以下替代实现产生相同的结果`local:find-matches`（假设您交换函数声明的顺序，因为一个依赖于另一个）：

```
(: Find word matches by comparing them one-by-one :)
declare function local:find-matches($content, $search-text) {
  local:get-words($content)[cts:stem(.) = cts:stem($search-text)]
}; 
```

它用于`cts:stem`将给定单词标准化为其词干，因此，例如搜索“pass”将匹配“passed”等。但是，这仍然不适用于多词（短语）搜索。所以为了安全起见，我会坚持使用 using `cts:highlight`，它和 and 一样`cts:search`，`cts:contains`可以处理你给它的任何 cts:query （包括我们上面做的简单的单词/短语搜索）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:44:38.713

退一步询问是否可以更好地为您的数据和/或文档建模以用于面向文档的数据库而不是 rdbms 可能是有意义的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T18:02:26.337

**这是更简单/更短且完全兼容的 XQuery，不包含任何实现扩展，这使得它可以与任何兼容的 XQuery 1.0 处理器一起使用：**

```
let $content := doc('file:///c:/temp/delete/A.xml')/*/*,
      $lookup := doc('file:///c:/temp/delete/B.xml')/*,
      $words := tokenize($content, '\W+')[.]
         return
           <root>
            {$content}
             <updatedElement>
               <companies>
                  {for $c in $lookup/companies/*,
                       $occurs in count(index-of($words, $c))
                     return
                       if($occurs)
                          then
                            <company count="{$occurs}">
                              {$c/text()}
                            </company>
                          else ()
                  }
               </companies>
               <mood>
                  {
                   sum($lookup/moods/*[false or index-of($words, data(.))]/@number)
                  }
               </mood>
               <topics>
                 {for $t in $lookup/topics/*,
                      $occurs in count(index-of($words, $t))
                    return
                      if($occurs)
                         then
                           <topic count="{$occurs}">
                             {data($t/@group)}
                           </topic>
                         else ()
                  }
               </topics>
               <word-count>{count($words)}</word-count>
              </updatedElement>
          </root> 
```

**当应用于提供的文件 A.xml 和 B.XML（包含在本地目录中`c:/temp/delete`）时，会产生想要的正确结果**：

```
<root>
   <content> The state passed its first ban on using a handheld cellphone while driving in 2004 Nokia Vodafone Nokia Growth Recession Cricket HBO</content>
   <updatedElement>
      <companies>
         <company count="1">Vodafone</company>
         <company count="2">Nokia</company>
      </companies>
      <mood>1</mood>
      <topics>
         <topic count="1">Sports</topic>
         <topic count="1">Entertainment</topic>
      </topics>
      <word-count>22</word-count>
   </updatedElement>
</root> 
```

# image - htaccess 重写干净的图像 url

> ID：10157617
> 
> 赞同：0
> 
> 时间：2012-04-14T21:44:54.210
> 
> 标签：image, .htaccess, rewrite

我正在寻找一个重新编写一个[身份](http://www.permissiondenied.net/identicon/?so)生成器的东西，比如

```
images/1-2.png 
```

将在服务器上解释为

```
images/index.php?one=1&two=2 
```

但它仍然会显示`site.com/images/1-2.png`在地址栏中。

假设文件名中只有一个破折号 (-)

可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:44:58.903

这将做到这一点，将其放在应用程序根目录中的 .htaccess 文件中。

```
RewriteEngine on
RewriteBase /

RewriteRule ^images/(\d)-(\d)\.png          images/index.php?one=$1&two=$2 [NC,L] 
```

# c# - 如何使用 C# 在运行时请求线程的锁和死锁？

> ID：10157620
> 
> 赞同：5
> 
> 时间：2012-04-14T21:45:21.690
> 
> 标签：c#, multithreading, locking, runtime, deadlock

在 Java 中，有 ThreadMXBean 和 ThreadInfo 来请求线程在运行时持有的锁的信息。

这也可以用 C# 吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:11:45.440

C# 中没有运行时等效项。如果你需要跟踪它，你需要实现你自己的包装器。如果您的应用程序对锁定敏感，还可以考虑使用 Monitor.TryEnter 和超时。

`lock (object) { // Synchronized code }`

翻译为，

 `````
try
{
    Monitor.Enter(object);
}
finally
{
    Monitor.Exit(object);
} 
`````

# php - 使用 jQuery ajax json、php 将项目填充到 Select 中

> ID：10157623
> 
> 赞同：0
> 
> 时间：2012-04-14T21:45:32.737
> 
> 标签：php, json, jquery

使用 jQuery ajax json 将项目填充到 Select 中的简单代码，第一个菜单上的 php 更改它必须对 fruit-varities.php 进行 ajax 调用以获取 json 数组并创建第二个菜单主页

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
    <title>Load JSON data with jQuery, PHP and MySQL</title>
    <link rel="stylesheet" type="text/css" href="/css/main.min.css?1319445416"  />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function() {
         $('#mark').change(function() {
             $.get("fruit-varities.php",
                {'idcategory' : idc },
                function(data){
                    var select = $('#series').empty();
                    $.each(data.values, function(i,item) {
                        select.append( '<option value="'
                                             + item.fruit_id
                                             + '">'
                                             + item.name
                                             + '</option>' ); 
                    });
                }, "json");
    });
    });
</script>
    </head>
    <body>
    <form>
    <select id="mark">
      <option value="">--</option>
      <option value="bmw">BMW</option>
      <option value="audi">Audi</option>
    </select>
    <select id="series">
    </select>
    <div id="view">
    </div>
    </form>
    </body></html> 
```

这是fruit-varities.php

```
<?php
if(isset($_GET['idcategory'])){
$item = Array(
    Array
        (
            "fruit_id" => "1",
            "name" => "Apple",
            "variety" => "Red Delicious"
        )

);
}
echo json_encode(item);
?> 
```

这根本不起作用不知道为什么？对我来说一切似乎都很好，但我不知道是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:06:16.787

您的页面中没有“ `idc`”变量，但您将其用作 Ajax 请求参数的值。它不关心，`'idcategory'`应该有什么值参数（通过分析你的 php 脚本），所以你可以`{'idcategory' : idc }`用`{'idcategory' : ''}`.

# asp.net - 创建用户登录以在博客中发表评论

> ID：10157626
> 
> 赞同：0
> 
> 时间：2012-04-14T21:46:02.330
> 
> 标签：asp.net

我正在开发我网站中的一项功能，该功能应允许用户仅在用户登录后对视频或图像发表评论（非常类似于在 YouTube 上登录后对视频的评论）。我已经使用 ASP 控件创建了登录控件和一个新的用户注册控件。我如何将它集成到我的comments.aspx 页面中，用户可以在其中查看其他用户评论但无法评论的所有以前的评论，直到他登录？？？这是我的登录控件：

```
 <asp:LoginName ID="LoginName1" runat="server" FormatString="welcome page {0}">
        </asp:LoginName><br />
        <asp:LoginStatus ID="LoginStatus1" runat="server" />
    </LoggedInTemplate>
    </asp:LoginView> 
```

请帮忙。

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:52:04.230

您需要为自己编写一个机制来检查您的用户是否已登录，并根据该信息采取行动。有几种方法可以做到这一点，例如，您可以在“发表评论”按钮上切换可见性。

# html - Html/Css - 如何让图像拉伸容器的 100% 宽度，然后在其上显示另一个图像？

> ID：10157629
> 
> 赞同：16
> 
> 时间：2012-04-14T21:46:48.770
> 
> 标签：html, css, image, stretch

我正在努力将我想到的标题布局放在一起。

这是到目前为止的html：

```
<div id="header">
    <img src="/img/headerBg.jpg" alt="" class="headerBg" />
    <a href="/"><img src="/img/logo.png" alt="Logo" class="logo" /></a>
    <div id="loginBox">
        other code
    </div>
</div> 
```

到目前为止的CSS：

```
#header {
    height: 130px;
    margin: 5px 5px 0 5px;
    border: #0f0f12 outset 2px;
    border-radius: 15px;
}

#loginBox {
    float: right;
    width: 23.5%;
    height: 128px;
    font-size: 75%;
}

.headerBg {

}

.logo {
    width: 50%;
    height: 120px;
    float: left;
    display: block;
    padding: 5px;
} 
```

我想要完成的是让图像“headerBg.jpg”显示为 div“header”的 100% 宽度，所以本质上它将是 div 本身的背景。然后在“headerBg.jpg”上方显示图像“logo.png”和div“loginBox”。

logo 应该浮动到最左边，而 loginBox 应该浮动到最右边，就像在 css 中一样。

移除图像后，logo 和 div 被正确放置，但是当图像被引入时，它们在流程中的图像之后放置了两个浮动项。

我尝试了各种添加和重新配置，但没有一个被证明可以解决我想要的问题。

我已将 css 中的图像作为背景添加到标题 div，但它不会以这种方式拉伸 100%。

任何人都可以对此提供一些见解吗？

此外，任何涵盖此类内容的教程都将成为我收藏的重要补充！

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T21:50:49.150

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Render this</title>
    <style type="text/css">
#header {
    position:relative;
    height: 130px;
    margin: 5px 5px 0 5px;
    border: #0f0f12 outset 2px;
    border-radius: 15px;
}

#loginBox {
    position:relative;
    float: right;
    width: 23.5%;
    height: 128px;
    font-size: 75%;

}

.headerBg {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: -1;
}

.logo {
    position:relative;
    width: 50%;
    height: 120px;
    float: left;
    display: block;
    padding: 5px;
}
    </style>
</head>
<body>
<div id="header">
    <img src="img/headerBg.jpg" alt="" class="headerBg" />
    <a href="/"><img src="img/logo.png" alt="Logo" class="logo" /></a>
    <div id="loginBox">
        other code
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T22:22:30.933

```
.header {
    position: relative;
}

.headerBg {
    position: absolute;
    left: 0px;
    right: 0px;
    width: 100%;
} 
```

请注意，这将缩放图像以适合`<div>`; 如果您只希望它水平调整大小，那么您应该明确设置高度。

`max-width: 100%;`如果您只希望图像在大窗口上缩放，您也可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T21:51:26.143

只需使标题背景图像成为该 div 的真实背景。Float 不会像 position: absolute 那样忽略其他对象。

```
#header {
    height: 130px;
    margin: 5px 5px 0 5px;
    border: #0f0f12 outset 2px;
    border-radius: 15px;
    background: url(headerBg.jpg);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T04:47:47.120

设置不会显示任何额外部分的 div 类。

```
div {
overflow: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-04T06:45:27.703

这些设置对我来说非常适合..它会为所有照片调整您的照片大小..

```
#headerBg {
position: absolute;
top: 0px;
left: 0px;
right: 0px;
width: 100%;
height: 100%; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-30T02:43:07.057

```
 <!DOCTYPE html>
            <html>
                <head>
                    <title>W3.CSS</title>
                    <meta name="viewport" content="width=device-width, initial-scale=1">
                    <meta content="text/html; charset=iso-8859-2" http-equiv="Content-Type">
                    <!--link rel="stylesheet" href="#"-->
                    <style>
                        .mySlides {
                            display: none;
                        }

                        .header {
                            background-color: #f1f1f1;
                            padding: 30px;
                            text-align: center;
                            height: 195px;
                            display: flex;
                            align-items: center;
                            align-items: center;
                            justify-content: center;
                        }

                        .img2 {
                            float: center;
                            display: inline-block;
                        }
                    </style>
                    <style type="text/css">
                        .c4 {
                            max-width: 500px
                        }

                        .c3 {
                            width: 100%
                        }

                        .c2 {
                            display: inline-block;
                            text-align: center;
                            width: 100%;
                        }

                        .c1 {
                            max-width: 100%;
                            height: auto;
                        }
                    </style>
                </head>
                <body>
                    <h2 class="c2">Automatic Slideshow</h2>
                    <div id="header" class="c2">
                        <img class="img2 c1" src="./img/16px/avi.png" alt="Pineapple">
                        <h1 class="c2">
                            <a href="#">I want to be</a>
                        </h1>
                        <div class="c4">
                            <img id="carousel" src="" class="c3">
                        </div>
                    </div>
                    <script>
                        //set up things
                        var images = [];
                        images[0] = "./img/16px/avi.png";
                        images[1] = "./img/16px/bmp.png";
                        images[2] = "./img/16px/cpp.png";

                        var n = images.length - 1;
                        var carouselimg = document.getElementById("carousel");
                        var header = document.getElementById("carousel");
                        // preload all images
                        carouselimg.style.display = "none";
                        for (var i = 0; i < n; i++) {
                            carouselimg.src = images[i];
                        }
                        carouselimg.style.display = "block";
                        //prepare first round
                        var carouselIndex = 0;
                        // start show
                        rotate();

                        function rotate() {
                            var dr = header.getBoundingClientRect();
                            carouselimg.style.width = dr.width;
                            carouselimg.src = images[carouselIndex];
                            //index is a global variable

                            //so its state will be kept and we can load the first / next image
                            carouselIndex++;
                            // increment image array  index
                            if (carouselIndex > n) {
                                // do we rech the end
                                carouselIndex = 0
                                // start from begin
                            }
                            setTimeout(rotate, 2000);
                            // restart rotation every 2 seconds
                        }
                    </script>
                </body>
            </html> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-02-22T06:22:29.543

尝试在你的 CSS 中使用：

```
max-height:100%; 
```

# cgi - lighty 中的可执行 cgi 和图像/javascript 文件

> ID：10157630
> 
> 赞同：0
> 
> 时间：2012-04-14T21:46:49.840
> 
> 标签：cgi, lighttpd

我在 lighttpd.conf 中添加/注释了以下几行：

```
"mod_cgi" 
```

和

```
cgi.assign = ( "" => "/var/www/myCgiScript" ) 
```

这按预期工作......我的可执行文件 mySite 将在每个请求上被调用，但问题是，我无法打开图像。例如，如果我执行以下操作：

```
http://localhost/myImage.png 
```

这将调用我的可执行 cgi (mySite) - 与 js 文件相同。有没有机会像往常一样处理图像？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:06:46.280

查看 cgi.assign 的文档： [http: //redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModCGI#Options](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ModCGI#Options)

第一个参数是文件扩展名，第二个参数是在请求具有该扩展名的文件时要运行的 CGI 脚本的路径。现在，你的配置文件说“对于任何扩展名，或者没有扩展名，运行'/var/www/myCgiScript'”。您需要指定一组您希望 CGI 脚本运行的文件扩展名，并让 lighty 以正常方式提供所有其他文件。

# scala - Akka 记录外部演员

> ID：10157642
> 
> 赞同：46
> 
> 时间：2012-04-14T21:48:51.637
> 
> 标签：scala, logging, akka

我有一个 Akka Actor 可以调用`MyObject.foo()`. `MyObject`不是演员。如何设置登录？使用 Actor 很简单，因为我可以混合 ActorLogging。在 MyObject 中，我无权访问 context.system。我是否`akka.event.Logging`使用 AkkaSystem() 创建一个，然后为 LogSource 隐式创建什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-14T21:58:27.273

实际上我会将 Akka 日志重定向到[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题")并在所有不相关的类中直接使用这个 API。首先将其添加到您的配置中：

```
akka {
    event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
    loglevel = "DEBUG"
} 
```

然后选择一些 SLF4J 实现，我建议[logback](/questions/tagged/logback "显示标记为“logback”的问题")。在你的演员继续使用`ActorLogging`特质。在其他类中，只需依赖 SLF4J API - 甚至更好 - 尝试围绕 SLF4J的[slf4s外观。](https://github.com/weiglewilczek/slf4s)

提示：在 Logback 中尝试以下日志模式：

```
<pattern>%d{HH:mm:ss.SSS} | %-5level | %thread | %X{akkaSource} | %logger{1} | %m%n%rEx</pattern> 
```

将`%X{akkaSource}`在可用时打印参与者路径（就像标准日志记录一样）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-24T13:00:43.893

使用 Akka 2.2.1，我能够将其放入我的应用程序中，以便在演员之外进行日志记录：

```
import akka.event.Logging
val system = ActorSystem("HelloSystem", ConfigFactory.load.getConfig("akka"))
val log = Logging.getLogger(system, this)
log.info("Hi!") 
```

这似乎是统一应用程序日志记录的更简单的解决方案。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-18T19:29:17.070

如前所述，您会被参与者系统中的非参与者日志记录选项宠坏。我将尝试提供一组启发式方法来帮助您确定应该如何为您的工作路由日志记录。

1.  **您可以在参与者和非参与者代码中直接使用记录器（log4j 1.x、logback、log4j 2.x）。**
    *   这将您的代码与记录器实现紧密耦合。如果是你的代码，这很好，不要在其他地方使用，但如果你正在构建一个库或打算开源你的工作，那就不好了。
    *   如果你这样做，你不会从演员系统中获得任何好处。记录调用可能会变成阻塞调用，这取决于你如何设置你的记录器，因此在性能或对背压的控制是重要问题的地方，这是不受欢迎的。
    *   由于参与者代码（连同它可以使用的服务）可以在许多不同的线程上运行，一些传统的日志记录活动，例如使用线程本地 MDC（映射诊断上下文）可能会导致奇怪的竞争条件和上下文与来自消息的日志输出切换从演员到演员。诸如在发送消息之前将 MDC 交换到消息上之类的活动可能成为保留参与者和非参与者代码之间的上下文的必要条件。
    *   要捕获死信和监督等 ActorSystem 事件，您可能需要编写一个日志适配器并在 application.conf 中指定它。这些非常简单。
2.  **您可以将 SLF4J 外观用于参与者和非参与者日志记录。**
    *   您不再与 logger impl 耦合，而且您的服务也不再与 akka 耦合。这是便携性的最佳选择。
    *   你可以从你的日志框架继承阻塞行为。
    *   您可能需要管理 MDC
    *   要捕获 ActorSystem 事件，您需要在 application.conf 中指定“akka.event.slf4j.Slf4jLogger”
    *   您需要在类路径中包含一个 slf4j 提供程序 jar，以将 slf4j 日志事件路由到您选择的记录器
3.  **您可以在 Actor 和非 Actor 代码中使用 Akka 的 Logging 作为您的外观**
    *   您没有与 logger impl 或 slf4j 耦合，但您与 akka 的一个版本耦合。无论如何，这可能是您系统的要求，但对于库来说，它可能会降低可移植性。
    *   你必须传递一个actor系统来充当记录器的“总线”。与工作参与者系统的紧密耦合进一步降低了可移植性。（在应用程序中，我通常构建一个带有隐式或全局 ActorSystem 的小 LoggingViaActorSystem trait，这使得在代码中更容易处理这个问题，而不是跨依赖项）。
    *   保证非阻塞异步日志记录，即使您的记录器不支持它们。日志记录的因果一致性可能是由于使用了单个消费者邮箱。但是，内存安全和背压不是（我相信 Akka logging 使用的是无界邮箱）——
    *   有一些选项，例如使用[DiagnosticLoggingAdapter](http://doc.akka.io/docs/akka/current/scala/logging.html#MDC_values_defined_by_the_application)来避免在工作从参与者传递到参与者时管理您自己的 MDC 的复杂性。即使非参与者代码改变了这些 MDC，也应该保持一致性。
    *   在内存不足崩溃期间日志不太可能可用，并且对默认调度程序上的线程饥饿很敏感
    *   您需要在 application.conf 中指定您选择的记录器，除非您有兴趣登录到标准输出

欢迎您根据需要混合和匹配上述行为以满足您的要求。例如，您可以选择为库绑定到 SLF4J 并为其他所有内容使用 Akka 日志记录。请注意，混合阻塞和非阻塞日志记录可能会导致竞争条件，其中原因（通过参与者记录的异步）在其影响（直接记录同步）之后被记录。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-19T20:34:39.590

我现在已经决定通过 DI 构造函数注入 (Guice) 简单地传递我的中央日志记录系统。在我定期进行日志记录的课程中（异步性很重要），我采用注入的 ActorSystem 并调用

```
this.log = akka.event.Logging.getLogger(actorSystem, this); 
```

在类构造函数中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-01T10:42:03.283

根据[最新的（当前版本 2.6.9）日志记录文档](https://doc.akka.io/docs/akka/current/typed/logging.html)，使用从中获得的 Logger`org.slf4j.LoggerFactory`非常好，实际上是**推荐**的在参与者之外登录的方式。我在下文中复制了确切的措辞。

> 使用通过 org.slf4j.LoggerFactory 检索的 Logger 非常好，但是日志事件将不包括 akkaSource MDC 值。**这是在 actor 外部登录时推荐的方式**，包括从 Future 回调中登录。

我还在下文中提供了一个基于示例的片段

```
val log = LoggerFactory.getLogger("com.mypackage.MyObject")

Future {
  // do something
  "result"
}.onComplete {
  case Success(result) => log.info("Success!: {}", result)
  case Failure(exc)    => log.error("Failure!", exc)
} 
```

为了通过记录最小化性能损失，可以为 SLF4J 后端配置一个异步附加程序。Logback 是推荐的日志记录后端。

```
dependencies {
  compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'
} 
```

为生产配置 logback.xml 的起点：

```
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>myapp.log</file>
    <immediateFlush>false</immediateFlush>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>myapp_%d{yyyy-MM-dd}.log</fileNamePattern>
    </rollingPolicy>
    <encoder>
        <pattern>[%date{ISO8601}] [%level] [%logger] [%marker] [%thread] - %msg MDC: {%mdc}%n</pattern>
    </encoder>
</appender>

<appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">
    <queueSize>8192</queueSize>
    <neverBlock>true</neverBlock>
    <appender-ref ref="FILE" />
</appender>

<root level="INFO">
    <appender-ref ref="ASYNC"/>
</root> 
```

> 日志记录通常意味着 IO 和锁，如果同步执行，它们会减慢代码的操作。

上面显示的配置是 AKKA 日志记录文档提供的配置。该文档提供了更多信息，可以在[此处找到](https://doc.akka.io/docs/akka/current/typed/logging.html#slf4j-backend)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-04T13:25:34.917

只需创建自己的记录器：

```
private val log = LoggerFactory.getLogger(YourClass.getClass) 
```

# android - 屏幕方向更改时如何启动新活动？安卓

> ID：10157643
> 
> 赞同：0
> 
> 时间：2012-04-14T21:48:56.103
> 
> 标签：android, android-activity, orientation, landscape

我正在编写一个应用程序，它在纵向视图中顶部有一个画廊，当您单击图片时，它会膨胀并填满整个屏幕。

这在横向模式下有效，画廊覆盖了大部分图片，而且通常看起来很糟糕。

我为横向模式制作了一个 GridView。我现在遇到的问题是当方向改变时将其从画廊活动更改为 Gridview 活动。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T21:55:28.050

正确的做法是定义两种布局，一种在 layout-port 中，一种在 layout-land 目录中。也就是说，您将拥有以下两种布局： `res/layout-port/main.xml`和`res/layout-land/main.xml`.

在您的软件中，您只需编写代码`secContentView(R.layout.main);`，android 将负责在设备旋转时应用正确的布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T21:51:51.903

为横向模式制作一个额外的布局xml文件并将其放入文件夹“layout-land”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T21:56:07.737

将此添加到您的活动中：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    startActivity(newActivity)
} 
```

请注意，这是一个坏主意。实际上，这是一个非常糟糕的主意。一个更好的选择是要么强制一个方向，要么创建一个在两个方向上看起来都很棒的布局。

# php - 达到“100”的最大函数嵌套级别，正在中止

> ID：10157649
> 
> 赞同：8
> 
> 时间：2012-04-14T21:49:48.757
> 
> 标签：php, xdebug

我想创建一个爬虫，从数字 0 到 10 000 000 一个一个地获取所有页面的信息。我不管花多少时间。我只希望它有效。这是我得到的错误

```
致命错误：达到“100”的最大函数嵌套级别，正在中止！在第 25 行的 D:\wamp\www\crawler\index.php
```

第 25 行是

```
$htmlstr = (string)$this->curlGet($url); 
```

还有我的完整脚本。

感谢您的帮助 ！

```
header('Content-Type: text/html; charset=utf-8'); 
ini_set('max_input_nesting_level','100000');
ini_set('max_execution_time','100000'); 

class crawler{

    private $url;
    private $page;
    private $bothurl;
    private $innerDom = null;
    public $prop;
    public $entry;

    function __construct($entry){
        $this->entry = $entry;
        $this->bothurl = array('http://www.remax-quebec.com/fr/inscription/Q/'.$entry.'.rmx','http://www.remax-quebec.com/en/inscription/Q/'.$entry.'.rmx');
        $this->scan();
    }

    private function scan(){
        $i =0;
        foreach($this->bothurl as $url){
            $this->url = $url;
            $this->lang = ($i==0)?'fr':'en';
            $htmlstr = (string)$this->curlGet($url);
            $dom = new DOMDocument;
            @$dom->loadHTML($htmlstr);
            $this->page = $dom;
            $this->htmlInfos();
            $this->getInfos();
            $i++;
        }
    }

    private function htmlInfos(){
        $divs = $this->page->getElementsByTagName('div');
        foreach($divs as $div){
            if($div->hasAttribute('class') && $div->getAttribute('class') == 'bloc specs'){
                $innerDom = new DOMDocument(); 
                @$innerDom->loadHTML($this->innerHTML($div));
                $this->innerDom = $innerDom;
            }
        }
        if($this->innerDom === null) $this->changeEntry();
    }

    private function getInfos(){
        $sect = 0;

        foreach($this->innerDom->getElementsByTagName('div') as $div){
        # obtenir la description
             $this->getDesc($div->getAttribute('class'),$div);
        # obtenir les caractéristiques
             $this->getCaract($div->getAttribute('class'),$div);
        # obtenir les informations interieur, exterieur et evaluation
             if($div->getAttribute('class') == 'section deux-colonnes'){
                switch($sect){
                    case 0: $this->getSpecInfos($div,'interieur'); break;
                    case 1: $this->getSpecInfos($div,'exterieur'); break;
                    case 2: $this->getSpecInfos($div,'evaluation'); break;
                    case 3: $this->getSpecInfos($div,'equipement'); break;
                    case 4: $this->getSpecInfos($div,'services'); break;
                }
                $sect++;
             }else if($div->getAttribute('class') == 'section'){
        # obtenir les détails des pièces
                foreach($div->getElementsByTagName('table') as $table){
                    if($table->getAttribute('class') == 'details-pieces'){
                        $this->detailPieces($table);
                    }
                }
             }
        }
    }

    private function getDesc($class,$obj){
        if($class == 'section description'){
            $p = $obj->getElementsByTagName('p')->item(0);
            $text = (string)$p->nodeValue;
            $this->prop[$this->lang]['description'] = $text;
        }
    }

    private function getCaract($class,$obj){
        if($class == 'section characteristiques'){
            foreach($obj->getElementsByTagName('div') as $div){
                if(substr($div->getAttribute('class'),0,4) == "item"){
                    $text = (string)$div->nodeValue;
                    $this->prop[$this->lang]['caracteritiques'][substr($div->getAttribute('class'),5)] = $text;
                }
            }
        }
    }

    private function getSpecInfos($obj,$nomInfo){
        foreach($obj->getElementsByTagName('table') as $table){
            foreach($table->getElementsByTagName('tr') as $tr){
                $name = $tr->getElementsByTagName('td')->item(0);
                $value = $tr->getElementsByTagName('td')->item(1);
                $name = substr((string)$name->nodeValue,0,-2);
                $value = (string)$value->nodeValue;
                $this->prop[$this->lang][$nomInfo][$this->noAccents($name)] = $value;
            }
        }
    }

    private function detailPieces($obj){
        $tbody = $obj->getElementsByTagName('tbody')->item(0);
        foreach($tbody->getElementsByTagName('tr') as $tr){
            $name = $tr->getElementsByTagName('td')->item(0);
            $name = (string)$name->nodeValue;
            $level = $tr->getElementsByTagName('td')->item(1);
            $level = (string)$level->nodeValue;
            $dimensions = $tr->getElementsByTagName('td')->item(2);
            $dimensions = (string)$dimensions->nodeValue;
            $floor = $tr->getElementsByTagName('td')->item(3);
            $floor = (string)$floor->nodeValue;
            $desc = $tr->getElementsByTagName('td')->item(4);
            $desc = (string)$desc->nodeValue;

            $this->prop[$this->lang]['pieces'][$this->noAccents($name)]['etage'] = $level;
            $this->prop[$this->lang]['pieces'][$this->noAccents($name)]['dimensions'] = $dimensions;
            $this->prop[$this->lang]['pieces'][$this->noAccents($name)]['revetement'] = $floor;
            $this->prop[$this->lang]['pieces'][$this->noAccents($name)]['description'] = $desc;
        }
    }

    private function innerHTML($element){ 
        $innerHTML = ""; 
        $children = $element->childNodes; 
        foreach ($children as $child) 
        { 
            $tmp_dom = new DOMDocument(); 
            $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
            $innerHTML.=trim($tmp_dom->saveHTML()); 
        } 
        return $innerHTML; 
    }

    private function noAccents($value){
        $string= strtr($chaine,"ÀÁÂÃÄÅàáâãäåÒÓÔÕÖØòóôõöøÈÉÊËèéêëÇçÌÍÎÏìíîïÙÚÛÜùúûüÿÑñ","aaaaaaaaaaaaooooooooooooeeeeeeeecciiiiiiiiuuuuuuuuynn");
    }

    private function changeEntry(){
        $this->entry++;
        echo $this->entry;
        $this->scan();
    }

    private function curlGet($url){
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_ENCODING, "gzip");
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
        $data = curl_exec($curl);
        curl_close($curl);
        return $data;
    }
}

$entry = 8678057;

$crawler = new crawler($entry);

echo '<pre>';
print_r($crawler->prop);
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-14T21:51:42.587

假设您使用的是 xdebug，您可以设置自己的限制

```
ini_set('xdebug.max_nesting_level', $limit) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T04:49:20.160

将文件 /etc/mysql/my.cnf 参数更改为 max_allowed_pa​​cket = 512M

确保您已安装 xdebug（使用 phpinfo()），然后更改文件 /etc/php5/fpm/php.ini 添加或编辑行：xdebug.max_nesting_level=1000

重启两个服务 sudo service mysql restart sudo service php5-fpm restart

如果它不起作用，您仍然可以在 /etc/php5/fpm/php.ini xdebug.remote_autostart=0 xdebug.remote_enable=0 处将这两个参数设置为 false

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-08T15:34:08.047

就我而言，它与作曲家有关。**在composer.json**文件中更新了一些供应商，但我忘记运行命令**composer update**或**composer install**。系统产生了一系列错误，导致了这个“最大嵌套级别”。

执行这些命令后，问题已解决

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T16:01:30.180

假设您没有犯死机错误，只需更改 xdebug 的限制。

我通过更改**xdebug.ini**文件解决了这个问题。（在我的mac中，路径是*/usr/local/php5-5.6.17-20160108-103504/php.d/50-extension-xdebug.ini*，也许你的会有点不同。）

在 xdebug.ini 文件的底部添加一个新行：

> xdebug.max_nesting_level=500

* * *

请记住：*您必须更改与您正在使用的 php 对应的 xdebug.ini*。例如，如果您在计算机中安装了 php5 和 xampp，则需要弄清楚您使用的是哪个 php。

# javascript - navigator.userAgent 检测移动设备？

> ID：10157659
> 
> 赞同：1
> 
> 时间：2012-04-14T21:51:12.107
> 
> 标签：javascript, mobile, detection

许多人使用以下方法来检测 iPad 或 iPhone。

```
<script>
var agent=navigator.userAgent.toLowerCase();

var useHTML5 = (agent.indexOf('iphone')!=-1 || agent.indexOf('ipad')!=-1);

if (useHTML5){
document.write("");
} else{
document.write("");
}
</script> 
```

Apple 官方仅检测 ipad iphone 的方法是

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    // iPad-specific code
} else {
    // iPhone-specific code
} 
```

但是，如果我还想检查其他移动设备（至少是 Android 设备）怎么办？

我应该求助于 Modernizr 吗？或者来自 [http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)的脚本？

只是想补充一点，在我的特殊情况下，我将 FancyBox 与 VideoJS 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:09:27.030

MobileESP 项目在 JavaScript 中也有一系列可靠的用户代理检测方法，但[MobileESP API：JavaScript](http://blog.mobileesp.com/?page_id=60)非常有限，因为某些设备不支持 JavaScript，而服务器端检测是正确的方法。[如果需要， DeviceAtlas Products](http://deviceatlas.com/products)将提供有关设备功能的更多信息，但也有其价格标签......

# c# - 如何在 WP7 上动态填充网格？

> ID：10157672
> 
> 赞同：3
> 
> 时间：2012-04-14T21:52:28.433
> 
> 标签：c#, windows-phone-7, grid

这是我在 WP7 中的第一个程序，所以我有一些问题。

我正在尝试用另一种方法购买的对象列表填充网格。这是我到目前为止所做的：

```
public partial class MainPage : PhoneApplicationPage
{
    private List<Row> lsResult;
    private Grid myGrid = new Grid();
    private int i = 0;

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        ColumnDefinition colData = new ColumnDefinition();
        ColumnDefinition colOcorrencia = new ColumnDefinition();
        ColumnDefinition colSituacao = new ColumnDefinition();
        myGrid.ColumnDefinitions.Add(colData);
        myGrid.ColumnDefinitions.Add(colOcorrencia);
        myGrid.ColumnDefinitions.Add(colSituacao);
        myGrid.ShowGridLines = true;
        SolidColorBrush myBrush = new SolidColorBrush(Colors.White);
        myGrid.Background = myBrush;
        gridResult = myGrid;

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        i = 0;
        lsResult = null;
        lsResult = Rastrear.Busca(txtNumber.Text);
        foreach (Row r in lsResult)
        {
            RowDefinition rNewRow = new RowDefinition();
            myGrid.RowDefinitions.Add(rNewRow);

            TextBlock lblData = new TextBlock();
            lblData.Text = r.Data.ToString();
            lblData.HorizontalAlignment = HorizontalAlignment.Center;
            lblData.VerticalAlignment = VerticalAlignment.Center;
            Grid.SetColumnSpan(lblData, 1);
            Grid.SetRow(lblData, i);

            TextBlock lblOcorrencia = new TextBlock();
            lblOcorrencia.Text = r.Ocorrencia.ToString() ;
            Grid.SetColumnSpan(lblOcorrencia, 2);
            Grid.SetRow(lblOcorrencia, i);

            TextBlock lblSituacao = new TextBlock();
            lblSituacao.Text = r.Situacao.ToString();
            Grid.SetColumnSpan(lblSituacao, 3);
            Grid.SetRow(lblSituacao, i);
            i++;

            myGrid.Children.Add(lblData);
            myGrid.Children.Add(lblOcorrencia);
            myGrid.Children.Add(lblSituacao);   
        }
        gridResult = myGrid;

    }
} 
```

Buscar() 方法按应有的方式返回列表，但是当我单击按钮时，它什么也不做，甚至构造函数上的白色油漆实际上都没有发生。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:17:27.317

你在你的代码中做了一些非常阴暗的东西，我习惯于看到这些东西，应该在 xaml 中完成。改变这个

```
gridResult = myGrid; 
```

到

```
gridResult.Children.Add(myGrid); 
```

我不认为你可以像这样更改静态 UI 元素的引用。

# vb.net - 如何从按键事件（VB.NET）返回原始子过程

> ID：10157673
> 
> 赞同：0
> 
> 时间：2012-04-14T21:52:39.657
> 
> 标签：vb.net, events, onkeydown

我试图从一个独立的子过程中引用 KeyDown 事件，并让它循环回到原来的独立子过程中。

1.  在独立子过程中开始（DisplayAction - 然后调用 KeyDown 事件）
2.  进入 KeyDown 事件（KeyDown 然后调用 DisplayAction）
3.  返回原始子过程（DisplayAction）并继续循环。

***步骤 1 和 2 在我的代码中运行良好。第3步是问题。我的程序不会循环回到独立的子程序。

```
Public Class frmMain
    Dim RandomNumber As Integer
    Dim RandomNumbers(1000) As Integer
    Dim intAction As Integer
    Dim strAction1 As String = "A"
    Dim strAction2 As String = "B"
    Dim strAction3 As String = "C"
    Dim strAction4 As String = "D"
    Dim i As Integer

    Private Sub frmMain_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        FormLoad(sender, e)
    End Sub

    Private Sub FormLoad(sender, e)

    'Creates random numbers here                    
        DisplayAction(sender, e)
    End Sub

    Public Sub DisplayAction(sender, e)

        For i As Integer = 0 To 3
            Select Case lstRandom.Items(i)
                Case 1
                    lblDisplay.Text = strAction1
                    intAction = 1
                    frmMain_KeyDown(Sender, intAction = 1)
                Case 2
                    lblDisplay.Text = strAction2
                    intAction = 2
                    frmMain_KeyDown(sender, intAction = 2)
                Case 3
                    lblDisplay.Text = strAction3
                    intAction = 3
                    frmMain_KeyDown(sender, intAction = 3)
                Case 4
                    lblDisplay.Text = strAction4
                    intAction = 4
                    frmMain_KeyDown(sender, intAction = 4)
            End Select
        Next i

    End Sub

    Private Sub frmMain_KeyDown(sender, e) Handles Me.KeyDown

        If intAction = 1 Then
            lblDisplay.Text = "works! 1"
            Call DisplayAction(sender, e)

        ElseIf intAction = 2 Then
            lblDisplay.Text = "works! 2"
            Call DisplayAction(sender, e)

        ElseIf intAction = 3 Then
            lblDisplay.Text = "works! 3"
            DisplayAction(sender, e)

        ElseIf intAction = 4 Then
            lblDisplay.Text = "works! 4"
            DisplayAction(sender, e)

        End If

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T22:01:17.220

是自动的！当您调用另一个方法，并且该方法完成执行时，*控制权会自动返回给调用者*。另外，停止乱扔`sender`和`e`，*请*转身`Option Strict On`。

```
Public Class frmMain
    Dim RandomNumber As Integer
    Dim RandomNumbers(1000) As Integer
    Dim intAction As Integer
    Dim strAction1 As String = "A"
    Dim strAction2 As String = "B"
    Dim strAction3 As String = "C"
    Dim strAction4 As String = "D"

    Private Sub frmMain_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        FormLoad()
    End Sub

    Private Sub FormLoad()
        'Creates random numbers here                    
        DisplayAction()
    End Sub

    Public Sub DisplayAction()
        For i As Integer = 0 To 3
            Select Case lstRandom.Items(i)
                Case 1
                    lblDisplay.Text = strAction1
                    intAction = 1
                    frmMain_KeyDown(Me, EventArgs.Empty)
                Case 2
                    lblDisplay.Text = strAction2
                    intAction = 2
                    frmMain_KeyDown(Me, EventArgs.Empty)
                Case 3
                    lblDisplay.Text = strAction3
                    intAction = 3
                    frmMain_KeyDown(Me, EventArgs.Empty)
                Case 4
                    lblDisplay.Text = strAction4
                    intAction = 4
                    frmMain_KeyDown(Me, EventArgs.Empty)
            End Select
        Next
    End Sub

    Private Sub frmMain_KeyDown(ByVal sender As Object, ByVal e As EventArgs) Handles Me.KeyDown
        lblDisplay.Text = "works! " & intAction
    End Sub
End Class 
```

# bison - 关于从 bison2.4.1 的错误恢复

> ID：10157676
> 
> 赞同：1
> 
> 时间：2012-04-14T21:53:11.263
> 
> 标签：bison, yacc, lex

我想从 bison2.4.1 处理错误恢复。

我参考了 oreilly 的书（lex&yacc）和一些网站将错误标记放入我的规则中，

但我认为它不起作用。它不能帮助我处理错误恢复！

我的代码如下：

```
PDL:
    DataDesc ComputationDesc    {Build_front_proc($1,$2);}
    ;
DataDesc:
    PartyDecl AccLvDesc     {$$ = echo_dataDesc($1, $2);}
    ;
// Party Description
PartyDecl:
    PARTY ':' ID ',' ID ENDL    {if($3->is_func || $5->is_func)
                        yyerror("it is a reserved word!\n");
                    $$ = echo_partyDecl($3->name,$5->name);}
    |error ENDL         {printf("There is a error");}
    ; 
```

我给了“派对：id_a;”的话 （它应该是“Party”后面的两个id名称。）

它直接进入 yyerror() 并显示语法错误......

我不知道为什么它不处理这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:15:59.927

yacc/bison 中的错误规则不会阻止错误——它们会从错误中恢复。所以在这种情况下，你得到一个错误（它调用`yyerror("syntax error")`），然后寻找错误规则来恢复。因此，在这种情况下，它将处于在 shift 、 和 之后寻找转移的`','`状态。在这种状态下，a无法解析，因此会发出语法错误。在错误之后，它将开始弹出状态，直到找到一个产生错误的状态——在这种情况下，有 3 个状态到达对应于 a 开头的状态。在该状态下，它将转移错误，使其处于期望状态。然后它会丢弃输入符号（the和它之后的任何东西），直到找到一个`PARTY``':'``ID``';'``PartyDecl``ENDL``;``ENDL`，它将转移，进入一个可以减少`PartyDecl: error ENDL`规则的状态，调用`printf("There is a error");`

如果它永远找不到`ENDL`，它将在到达 EOF 后退出，从未从错误中恢复。此外，它会在错误恢复模式下再保持 2 个班次`ENDL`-- 如果在此之前再次出现错误，它不会调用 yerror 而是直接进入错误恢复。

# javascript - 无论如何在 Intranet Web 应用程序中从 Javascript 进行端口发现？

> ID：10157677
> 
> 赞同：0
> 
> 时间：2012-04-14T21:53:21.200
> 
> 标签：javascript, ajax, intranet

假设我想编写一个侦听随机端口的本地 Web 服务器。

现在我想编写在大多数可以对其进行 AJAX 调用的浏览器中工作的 HTML。

这里有什么基本限制吗？

编辑：我把人们弄糊涂了——可能是因为这几乎是我第一次用 javascript 标签发帖，而且我不知道如何提问。

我最近开始了解 node.js——我没有学到更多，只是它使编写独立的 Web 服务器更容易实现。

然后我有了一个类似这样的网站的愿景（实际上是任何编程板），但代码示例可以在最终用户的本地机器上执行。虽然我根本不喜欢浏览器插件，所以我开始尝试想办法在 Web/浏览器部分和本地机器服务之间的知识最少的情况下实现它（必须有交互 - 我只是想想想的最小数量）。

这只是一个例子 - 实际上我以编写 Intranet 业务应用程序为生（在这种情况下，定义众所周知的端口更容易，因此我不需要为此目的回答这个问题..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:02:37.947

同源策略将阻止您访问其他端口（至少在大多数浏览器中），但我想您*可以*向本地主机上的每个端口发送 JSONP 请求，然后捕获给出有效响应的端口。

...如果你真的想，那就是。有很多有效端口，因此可能需要一些时间。

# python - 使用 Python 设置 TkHtml（一个 Tk 小部件）

> ID：10157678
> 
> 赞同：10
> 
> 时间：2012-04-14T21:53:42.320
> 
> 标签：python, tkinter, tk, html-rendering

我需要一种简单的方法来呈现使用 Requests ( [python-requests.org](http://python-requests.org) ) 检索到的 HTML 页面。我在 Windows 上使用 Python 3.2。

我正在使用 tkinter，我发现了一个名为 TkHtml 的 Tk 小部件。它在[http://tkhtml.tcl.tk/](http://tkhtml.tcl.tk/)中有描述， DLL 可以从[http://www.hwaci.com/sw/tkhtml/](http://www.hwaci.com/sw/tkhtml/)下载。[我在http://tix.sourceforge.net/Tixapps/src/Python/TkHtml.py](http://tix.sourceforge.net/Tixapps/src/Python/TkHtml.py)找到了一个 python 包装器。

我不知道如何让 TkHtml 在 python 中工作。是否有一些处理 3rd 方 Tk 小部件的标准方法？

我将 tkhtml.dll 放在 Python32\DLLs 中（不知道这是否正确），并将 TkHtml.py 放在 Python32\Lib\site-packages 中。我继续并修复了 TkHtml.py 中的导入以使用 Python 3（将 tkFileDialog 更改为 tkinter.filedialog 并将 Tkinter 更改为 tkinter）。

当我做：

```
import TkHtml
app=TkHtml.TestApp() 
```

我得到错误：

```
...
File "C:\Program Files\Python32\lib\site-packages\TkHtml.py", line 45, in __init__
master.tk.call("package", "require", "tkhtml")
_tkinter.TclError: can't find package tkhtml 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T04:43:33.927

找到您的 Python tcl 目录，例如。C:\Python32\tcl 。这就是 tcl/tk 扩展的去处。

在那里创建一个名为 Tkhtml 的新文件夹。

将 (1) 您的 .dll 文件，(2) 一个名为 pkgIndex.tcl 的文本文件放入此文件夹

pkgIndex.tcl 包含这样的一行：

```
package ifneeded Tkhtml 0.0 [list load [file join $dir tkhtml.dll]] 
```

如果您可以在 python 提示符下执行此操作，

```
>>> import Tkinter #tkinter
>>> root = Tkinter.Tk()
>>> root.tk.eval('package require Tkhtml')
'0.0' 
```

...然后包可用。该字符串`'0.0'`表示版本号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-16T17:38:22.257

我为 Tkhtml3 创建了一个 pip 可安装的 Python 包装器：[https ://bitbucket.org/aivarannamaa/tkinterhtml](https://bitbucket.org/aivarannamaa/tkinterhtml)

它带有适用于 Windows、Mac 和 Linux 的 TkHtml3 二进制文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-20T02:21:01.087

我在 Windows 8（64 位）上使用 Python 3.3，并收到与 OP 相同的包加载错误。

我也已将文件下载并保存`TkHtml` `.dll`到`.py`以下文件夹：

```
tkhtml.dll -> D:\Python3.3\DLL
TkHtml.py -> D:\Python3.3\Lib\site-packages 
```

根据 noob oddy 的建议，我做了以下事情：

```
tkhtml.dll -> D:\Python3.3\tcl\Tkhtml
pkgIndex.tcl -> D:\Python3.3\tcl\Tkhtml 
```

并将这一行：复制`package ifneeded Tkhtml 0.0 [list load [file join $dir tkhtml.dll]]`到 `pkgIndex.tcl`文件中。

最终对我有用的是把所有东西从一个文件夹移动`Python3.3`到另一个文件`Python2`夹。HTML 渲染器运行良好。似乎`TkHtml`与 Python 3 不兼容。

# c++ - 如何让 gcc 为所有符号名称添加前缀

> ID：10157680
> 
> 赞同：12
> 
> 时间：2012-04-14T21:53:56.800
> 
> 标签：c++, c, gcc, g++, pre-compilation

我知道过去有一个选项`-fprefix-function-name`可以为所有生成的符号添加前缀，它似乎不再是 gcc 的一部分。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T22:40:14.183

我相信[这个答案](https://stackoverflow.com/a/6940389/1257977)会给你解决方案。

简而言之，您可以使用`objcopy`如下方式在现有库中“添加前缀”符号：

> objcopy --prefix-symbols=foo_ foo.o

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T22:46:04.937

*编辑：[George Skoptsov 的解决方案](https://stackoverflow.com/a/10157939/1026811)比我的要好 :)`nm`不过这个技巧可能会派上用场。

* * *

这不完全是您正在寻找的东西，但我过去不得不做类似的事情（重命名库导出的符号）

如果您知道要重新定义的符号名称，可以尝试使用`objcopy --redefine-syms old=new`. 有关输入的更多详细信息，请参阅 objcopy 的手册页（objcopy 可能会覆盖您的文件，所以要小心）

如果您不知道符号的名称，您可以尝试使用`nm`来获取符号列表。同样，由于我不确定您要查找哪种符号，因此手册页可能是您最好的选择。

# javascript - 如何使用 jquery 显示 xml 属性（在 zRSSFeed 脚本中）

> ID：10157685
> 
> 赞同：0
> 
> 时间：2012-04-14T21:55:33.560
> 
> 标签：javascript, jquery, xml, rss

这是来自 RSS 提要的 xml 文件的片段

```
<item>
<title>creamy whites</title>
<description>&lt;p&gt;&lt;a href="/pin/201606520789168653/"&gt;&lt;img 
src="http://media-cache.pinterest.com/upload/229261437250994034_0HxSxJNv_b.jpg"
&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;creamy whites&lt;/p&gt;</description>
</item> 
```

现在这是 ZRRSfeed 中已经存在的代码：

```
// Add feed row
html += '<li class="rssRow '+row+'">' + 
    '<'+ options.titletag +'><a href="'+ entry.link +'" title="'+          
        feeds.title +'" target="'+ options.linktarget +'">'
        + entry.description +'</a></'+ 
        options.titletag +'>' 
```

现在，我不想得到`entry.decription`我想要得到的`src`值，我`entry.decription` 已经尝试过： `entry.decription[src]`，，，，（我可能在这里输入错误的任何代码 - 但是当我尝试它们时，我确实在谷歌中检查了类似' getAttribute') 并且它们都不起作用。`entry.decription[src].val()``entry.decription->src` `entry.decription.attr(src)``entry.decription.getAtrribute("src")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:10:33.953

试试这个。。

```
var src = $('entry.description')find('img').attr('src');

console.log(src); // debug using console firebug in firefox
//or developer tools in chrome
//the output should be the url of img 
```

然后用 src 替换位于锚标记内的 entry.description。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:18:04.863

尝试

```
$(entry.description).find('img').attr('src') 
```

# ruby-on-rails - ruby on rails 中的多语言 webapp

> ID：10157689
> 
> 赞同：-1
> 
> 时间：2012-04-14T21:56:31.920
> 
> 标签：ruby-on-rails, ruby, database-design, internationalization

在 ruby​​ on rails 中为多语言网站设计数据库和应用程序的最佳实践是什么？

我知道 rails 已经有 I18n api 但是设计数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:02:18.577

要翻译数据库内容，您需要 Globalize 3 gem。

可以在此处找到有关该主题的出色 Railscast：[http ://railscasts.com/episodes/338-globalize3](http://railscasts.com/episodes/338-globalize3)

# git - 为什么 Git 创建一个没有文件更改的合并提交？

> ID：10157702
> 
> 赞同：30
> 
> 时间：2012-04-14T21:58:49.890
> 
> 标签：git, git-merge

我正在与某人合作开展一个项目，因此我们决定使用 git。不幸的是，我们经常在没有互联网的地方编码，所以我们最终会得到这样的结果：

```
origin/master: A---B---C
                        \
mylocalmaster:           D---E---F
                        \
hismaster:               G---H---I 
```

现在，假设他推送他的提交并得到这个：

```
origin/master: A---B---C---G---H---I
                        \
master (local):          D---E---F 
```

我想要做的就是推动我的提交，以便在我的本地仓库和在线仓库中得到这个：

```
A---B---C---D---E---F---G---H---I 
```

当我这样做时，它似乎工作，但当我这样做时`git push`，麻烦就出现`git fetch`了`git merge`。我要做的就是将*他的*提交提交到我的本地存储库中，但我最终得到了一个合并提交，说的是`Merge remote-tracking branch 'origin/master'`它的消息。

我不想有这个毫无意义的提交，因为*我们的提交中没有冲突的代码*。我们正在处理完全不同的文件，因此没有理由进行此提交。如何防止 git 创建此合并提交？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-14T22:11:25.257

您可以通过使用*rebase*而不是*merge*来省略创建*合并提交*。

 **正如@Dougal 所说，如果您这样做`git fetch`，您可以在`git rebase`之后执行以将更改的基础更改为 fetched `HEAD`。

通常，您通过从远程存储库中提取来创建那些不需要的*合并提交。*在这种情况下，您可以添加`--rebase`选项：

```
git pull --rebase 
```

或将正确的选项添加到 Git 配置文件（本地）：

```
git config branch.<branch-name-here>.rebase true 
```

或者对于所有新的存储库和分支：

```
git config branch.autosetuprebase always --global 
```

然而，变基创建更清晰、更线性的历史**，最好创建合并提交，其中两个分支都有大量更改**（用于`git merge`这样做）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-14T22:00:43.913

使用`git rebase`（在 a 之后`git fetch`）使您的提交适用于他的而不是以前的主人。也就是说，`ABCGHIDEF`在你的例子中。（你不能`ABCDEFGHI`不做 a `push -f`，因为`ABCGHI`它已经在`origin/master`并且你必须覆盖它。）**

# java - 如何更改摆动标签中的间隙

> ID：10157704
> 
> 赞同：5
> 
> 时间：2012-04-14T21:59:07.063
> 
> 标签：java, swing, jlabel

我创建了一些标签：

```
leftLabel.setAlignmentX(Component.CENTER_ALIGNMENT);
leftLabel.setFont(new Font(FONT, Font.PLAIN, 280));
leftLabel.setBorder(BorderFactory.createTitledBorder("aaa"));
leftLabel.setText("0"); 
```

看起来像这样：![在此处输入图像描述](../Images/d2c7d448e775c2f1066c00fa18747cca.png)

正如你所看到的，上下有很大的差距。我怎样才能减少它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T22:55:49.277

您需要调整边框插图，

```
import java.awt.Component;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Insets;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;
import javax.swing.border.TitledBorder;

public final class TitledBorderDemo {
    private static void createAndShowGUI(){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout());
        frame.add(new TitledLabel(String.valueOf(0)));
        frame.pack();
        frame.setVisible(true);
    }

    private static class TitledLabel extends JLabel{
        private static final long serialVersionUID = 1L;
        private static final String TITLE = "aaa";

        TitledLabel(String text){
            super(text);
            setAlignmentX(Component.CENTER_ALIGNMENT);
            setFont(new Font("Arial", Font.PLAIN, 280));
            setBorder(new TitledBorder(TITLE){
                private static final long serialVersionUID = 1L;

                @Override
                public Insets getBorderInsets(Component c, Insets insets){
                    // arbitrary insets for top and bottom.
                    return new Insets(insets.top - 45, insets.left, insets.bottom - 55, insets.right);
            }});

        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                createAndShowGUI();             
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/2fbf0e42c3837c530e06564a28157217.png)

希望这能让您朝着正确的方向开始！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T22:28:20.483

问题可能出在新创建的边框的属性内。这些边框有插图。这是我能想到的唯一能影响差距的事情。尝试在边框上调用一个方法，将这些插图更改为`[1,1,1,1]`.

# html - 转义 HTML 属性

> ID：10157709
> 
> 赞同：3
> 
> 时间：2012-04-14T21:59:57.357
> 
> 标签：html, escaping, twitter-bootstrap

我正在尝试将转义字符串呈现为 html 属性（使用 Twitter Bootstrap 呈现用于生成用户正在查看的内容的转义代码的弹出框）：

就像是：

```
<a class="btn" href="#" data-content='<pre>$escaped_code</pre>' rel="popover" data-orginal-title="$title">some cool looking thing</a> 
```

问题是浏览器会解析和取消转义转义码，这可能会导致不愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:03:29.383

不要在 HTML 属性中使用`<`or ，例如：`>`

```
<a class="btn" href="#" data-content='&lt;pre&gt;$escaped_code&lt;/pre&gt;' rel="popover" data-orginal-title="$title">some cool looking thing</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:04:37.010

我不确定你那里有什么样的转义字符串。我假设PHP。但是，转义字符对于 HTML 是不同的：

[http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php)

您尝试将 HTML 标记放入 HTML 属性的事实表明您没有使用正确的 HTML 转义字符。确保 HTML 标记中的所有内容都针对 HTML 进行了转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T07:00:53.253

答案当然是手动转义两次。

# apex-code - Visualforce -> “Apex:column”的值属性可以调用函数来重新格式化显示的内容吗？

> ID：10157711
> 
> 赞同：0
> 
> 时间：2012-04-14T22:00:17.257
> 
> 标签：apex-code, visualforce

我编写了一个动态搜索页面来搜索自定义对象记录。我使用 SOQL 查询并将结果绑定到数据表。我需要根据返回的值更改其中一列的输出文本。

示例：如果 SOQL 返回“Tiger”，我需要显示“Animal”、Bird for eagle 等......

所以我想我的问题是我是否可以在 Apex:column 的 value 属性中使用 Javascript 函数？就像是：

```
 <apex:column value="renameObjectType({!mt.objectName__c})"> 
```

renameObjectType 函数类似于：

```
function renameObjectType(val) 
            {            
              var inputtextvalue=val.value;            

              if(inputtextvalue.length>0)
              {
                  if(inputtextvalue=="Tiger")
                  return "Animal";                  
              }

            }; 
```

这不像我想要的那样工作......这甚至可能吗？

谢谢，卡尔文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:18:42.000

这需要方便的[包装类](https://stackoverflow.com/questions/8129141/visualforce-custom-controller-list/8140813#8140813)。JavaScript在 Visualforce 中的执行顺序*可能*会变得很棘手，因为无论如何在幕后发生了很多事情。如果您还没有，请在标准联系人详细信息页面上查看源代码，以了解浏览器端处理的进度。

对于此类事情，最安全、最快和最可预测的路径是 Apex，imo。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T16:49:58.037

要意识到的一件事是，每次您从控制器中合并一个值（使用`{!myApexVariable}`语法）时，Visualforce 实际上都在为该变量调用 getter。

这意味着，每当您以这种方式合并变量时，您已经在调用一个函数。事实上，您可以“欺骗”Visualforce，使其简单地使用以下方法显示函数的值：

*My_VF_Page.page*

```
<apex:outputText value="{!MyFormattedValue}" /> 
```

*My_VF_Controller.apex*

```
public String getMyFormattedValue() {
    if (someOtherValue== null || someOtherValue== '') {
        return "N/A";
    }
    return someOtherValue;
} 
```

加载 Visualforce 页面时您会注意到，`getMyFormattedValue()`每次页面需要获取有关`MyFormattedValue`. 我发现这个技巧对于输出函数的值非常有用。

# d - 为什么 std.RedBlackTree 作为地图中断？

> ID：10157714
> 
> 赞同：2
> 
> 时间：2012-04-14T22:00:58.000
> 
> 标签：d

我最终决定使用`std.RedBlackTree`而不是内置的关联数组（或哈希），因为我需要一个排序的关联数组。所需的行为与 C++/STL 中的行为非常相似`std::map`。

```
void main() {

  alias Tuple!(float, float) Pair;
  alias RedBlackTree!Pair Map;
  Map m1;
  m1.insert(Pair(1.1, 2.2));
} 
```

上面的代码，取决于你如何编译它（带或不带-release），会导致分段错误或抛出断言。

与此相同：

```
void main() {

  struct Pair { float first, second; }
  alias RedBlackTree!(Pair, "a.first < b.first") Map;
  Map m1;
  m1.insert(Pair(1.1, 2.2));
} 
```

闻起来像一个错误，但有解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T22:30:08.827

RedBlackTree 是一个类，因此必须初始化。m1 默认为空。您所看到的相当于 Java 中的 NullPointerException。

试试这个：

```
import std.stdio, std.container;
void main() {
  struct Pair { float first, second; }
  alias RedBlackTree!(Pair, "a.first < b.second") Map;
  Map m1 = new Map;
  m1.insert(Pair(1.1, 2.2));
} 
```

另外，作为这个编程示例的一个提示：您可能需要考虑`RedBlackTree!(Pair, "a.first < b.first")`。原因是它会有一些奇怪的（不是完全未定义，但可能不是你想要的）行为。

例如，`Pair(1, 2) < Pair(1, 3)`会是真的。奇怪的是，`Pair(1, 3) < Pair(1, 2)`这也是真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T00:57:09.023

我要指出的是，当您遇到段错误时，您通常应该寻找的前两件事是空指针/引用和无限递归。您可以使用调试器来确定它们发生的确切位置。

`RedBlackTree`是一个类，因此任何为 a 的变量都是`RedBlackTree`引用类型。因此，您必须为它分配一个除 之外的值`null`，否则它将是`null`，并且当您尝试使用它时会出现段错误。如果您有一个指向某物的变量，并且您尝试使用它而不为其分配非空值，则会发生完全相同的事情。

您的初始化行应该是

```
Map m1 = new Map; 
```

或者，使用`RedBlackTree`，你可以做

```
Map m1 = redBlackTree!"a.first < b.first"(Pair(1.1, 2.2)); 
```

[`redBlackTree`](http://dlang.org/phobos/std_container#redBlackTree)`RedBlackTree`是一个辅助函数，用于在一行中创建和插入元素。

# haskell - 使 Haskell 函数无点

> ID：10157715
> 
> 赞同：4
> 
> 时间：2012-04-14T22:01:09.083
> 
> 标签：haskell, pointfree

我是 Haskell 初学者，我一直在玩无点函数。我有两个函数的问题 - lambdabot 的解决方案绝对不可读并且使代码混淆，所以我在这里询问是否有办法简化函数。

第一个函数从列表中删除重复项。

```
func1 :: Eq a => [a] -> [a]
func1 [] = []
func1 (x:xs) = x : (func1 . filter (/=x) $ xs) 
```

我尝试制作这个函数的无点版本，`foldr`但`>>=`没有成功。

第二个函数将列表映射到包含原始元素的元组列表以及它们在列表中出现的频率。

```
func2 :: Eq a => [a] -> [(a, Int)]
func2 xs = map ( \f -> (f, count f xs) ) xs 
```

哪里`count a = length.filter(==a)`。我不确定是否可以在保持可读性的同时制作此功能的无点版本，但我想确定一下。

任何有关使这两个功能无点的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-14T22:08:53.827

嗯，`func1`可以写成折叠：`func1 = foldr (\x xs -> x : filter (/= x) xs) []`. ¹但是，您不必这样做，因为它与标准功能相同[`nub`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3anub)。

`func2`您可以从使用`(&&&) :: (a -> b) -> (a -> c) -> a -> (b,c)`²组合器中删除一些要点[`Control.Arrow`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html)：

```
func2 xs = map (id &&& (`count` xs)) xs 
```

然后可以完全无点：

```
func2 = (id &&&) . flip count >>= map 
```

但是，坦率地说，我不得不使用 lambdabot 来完成最后一步。我建议保持该功能的原始形式。无点风格只有在有助于理解时才有用；如果您在制作无点功能时遇到困难，那么它可能会适得其反。

¹然后可以完全免费`foldr (liftM2 (.) (:) (filter . (/=))) []`（再次感谢 lambdabot！）但是，我真的不推荐这样做。*没有适用于每种*情况的无点组合器。

² `(&&&)`其实有更一般的类型；它适用于 any `Arrow`，而不仅仅是`(->)`. 但这在这里无关紧要。

# html - CSS 框架问题

> ID：10157717
> 
> 赞同：-3
> 
> 时间：2012-04-14T22:01:26.837
> 
> 标签：html, css, twitter-bootstrap

我必须开发一个简单的网站，我不太擅长网络开发，但我尝试了，结果是这样的：[http](http://www.pes.herobo.com) ://www.pes.herobo.com 。

如您所见，页面不是很好，如果您尝试重新调整它的大小，结果会很糟糕。此外，我需要可以从智能手机和平板电脑等移动设备访问该网站。

由于这些问题，我决定使用 CSS 框架。我发现了非常有趣的引导程序（如果我理解得很好，它将由 Twitter 开发），所以我或多或少地使用它和它的系统重写了我所有的网站。结果要好得多，网站以正确的方式调整大小，如果您在手机上查看它，外观是完美的。

但我仍然想知道我应该如何以正确的方式使用图像，我希望它们调整为网页内的所有元素，所以我采用了这个解决方案，我想知道它是否正确。

CSS类`imagine`是：

```
.imagine {
    width:100%; 
    height:auto; 
} 
```

代码是：

```
 <div class="row"> 
            <div class="span8" style="position:relative">
            <img src="img/image.jpg"  class="imagine" style="z-index:0 id="img_oxf">
            <img src="img/site_under_construction.png" class="imagine" style="position:absolute;top:0;left:0;width:30%;z-index:1"; id="img_under_constr">
            <img src="img/blue_strap.png" class="imagine" ">    
            </div> 
            <div class="span4"> 
            <div id="main_paragraph">   
            </div> 
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T22:07:04.517

您的 HTML 非常无效。无效的 HTML 将导致不可预测的结果和跨浏览器的不一致呈现。在尝试解决其他问题之前从有效的 HTML 开始。

* * *

这是错误的...

```
<img src="img/image.jpg"  class="imagine" style="z-index:0 id="img_oxf"> 
```

你错过了一个结束引号，`style`它可能会让浏览器认为`id="img_oxf`应该在里面`style`。它应该是...

```
<img src="img/image.jpg"  class="imagine" style="z-index:0;" id="img_oxf"> 
```

* * *

这是错误的......

```
<img src="img/site_under_construction.png" class="imagine" style="position:absolute;top:0;left:0;width:30%;z-index:1"; id="img_under_constr"> 
```

HTML 属性之间有一个分号。它应该是...

```
<img src="img/site_under_construction.png" class="imagine" style="position:absolute;top:0;left:0;width:30%;z-index:1;" id="img_under_constr"> 
```

* * *

这是错误的......

```
<img src="img/blue_strap.png" class="imagine" "> 
```

您有一个额外的引号`"`，这可能会导致浏览器认为您的类被调用`imagine"`而不是`imagine`. 它应该是...

```
<img src="img/blue_strap.png" class="imagine"> 
```

* * *

而且您似乎在`</div>`某个地方缺少结束标签。

# python - 如何获取访问者的当前时区，然后将 timezone.now() 转换为 Django 1.4 中的本地时间字符串？

> ID：10157720
> 
> 赞同：6
> 
> 时间：2012-04-14T22:01:56.500
> 
> 标签：python, django, timezone

我知道现在使用 Django 1.4 的最佳做法是将所有内容存储`datetime`在 UTC 中，我同意这一点。我也明白所有时区对话都应该在模板级别完成，如下所示：

```
{% load tz %}

{% timezone "Europe/Paris" %}
    Paris time: {{ value }}
{% endtimezone %} 
```

但是，我需要`request`在 Python 中将 UTC 时间转换为本地时间。我无法使用模板标签，因为我使用 Ajax（更具体地说是[Dajaxice](http://www.dajaxproject.com/)）以 JSON 格式返回字符串。

目前这是我的代码`ajax.py`：

```
# checked is from the checkbox's this.value (Javascript).
datetime = timezone.now() if checked else None

$ order_pk is sent to the Ajax function.
order = Order.objects.get(pk=order_pk)
order.time = datetime
order.save()

return simplejson.dumps({
    'error': False,
    'datetime': dateformat.format(datetime, 'F j, Y, P') if checked else 'None'
}) 
```

因此，即使当前时间是`April 14, 2012, 5:52 p.m.`EST 时间（我的本地时区），JSON 响应也会返回`April 14, 2012, 9:52 p.m`，因为那是 UTC 时间。

我还注意到 Django 存储了一个`TIME_ZONE`为每个请求调用的模板变量（实际上不是`request`变量的一部分），所以由于我的 is `America/New_York`，我假设 Django 可以找出每个访问者自己的本地时区（基于 HTTP 标头）？

无论如何，所以我的问题有两个：

1.  如何在我的 中获取访问者的本地时区`ajax.py`？（可能将其作为字符串参数传递，例如`{{ TIME_ZONE }}`）
2.  使用访问者的本地时区，如何将 UTC 转换`timezone.now()`为本地时区并使用 Django 的字符串输出`dateformat`？

**编辑：**对于@agf

`timezone.now()`给出 UTC 时间`USE_TZ = True`：

```
# From django.utils.timezone
def now():
    """
    Returns an aware or naive datetime.datetime, depending on settings.USE_TZ.
    """
    if settings.USE_TZ:
        # timeit shows that datetime.now(tz=utc) is 24% slower
        return datetime.utcnow().replace(tzinfo=utc)
    else:
        return datetime.now() 
```

反正有没有将 a 转换为`datetime`UTC 以外的东西？例如，我可以执行类似`current_time = timezone.now()`, then `current_time.replace(tzinfo=est)`(EST = Eastern Standard Time) 的操作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T22:23:08.347

您需要仔细阅读[Django Timezones 文档。](https://docs.djangoproject.com/en/1.4/topics/i18n/timezones/)

重要的一点：

> 没有与 Django 可以用来自动确定用户时区的 Accept-Language HTTP 标头等效的东西。

您必须询问用户他们的时区是什么，或者只使用默认时区。

您还需要确保：

```
USE_TZ = True 
```

在你的`settings.py`.

有了 timezone`tz`后，您可以：

```
from django.utils import timezone

timezone.activate(tz)

datetime = timezone.now() if checked else None 
```

在 timezone 中获取时区感知`datetime`对象`tz`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-09T06:30:12.913

虽然浏览器不会向服务器发送任何指示时区的标头，但 JavaScript 环境*确实*知道其当前时区。

这有两个重要影响：虽然服务器无法在初始请求中找到您当前的时区，但您*可以*发送一些 javascript 代码来确定 TZ 偏移量并将该信息发送回服务器，以便可以获取时区信息从那时起与当前会话相关联。

但更重要的是，如果您在 JSON 数据中发送时间值，该数据将由浏览器客户端解释，则*不需要*知道浏览器的时区。相反，您只需确保 JSON 输出中存在时区偏移量，以便浏览器可以在事后进行自己的时区数学运算。

```
var now = new Date()
var offset_minutes = now.getTimezoneOffset()  # e.g. 240 for GMT-0400 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-16T01:47:42.853

既然你想要用户的时区，我觉得这应该在浏览器上使用 Javascript 完成。

我将这样的内容传递到模板中：

```
{"t": str(obj.timestamp)) 
```

其中 obj 是 django 模型的实例，其中时间戳字段的类型为 DateTimeField。

模板：

```
<div class="timestring">{{ t }}</div> 
...
<script>
  $('.timestring').each(function(){
    var d = new Date($(this).text());
    $(this).text(d.toLocaleDateString() + ", " + d.toLocaleFormat("%r (%Z)"));
  })
</script> 
```

对我来说，这输出类似于：2/15/2017, 05:22:24 PM (PST)

相关文件：

*   [Javascript Date 类](https://www.tutorialspoint.com/javascript/javascript_date_object.htm)（尤其参见接受日期字符串的构造函数和 toLocaleFormat() 方法）

*   [strftime（带有许多日期格式化快捷方式）](http://man7.org/linux/man-pages/man3/strftime.3.html)

# c# - 如何列出应用程序的所有元素？

> ID：10157726
> 
> 赞同：0
> 
> 时间：2012-04-14T22:03:04.840
> 
> 标签：c#

我正在尝试从其他应用程序单击 Windows 应用程序上的按钮。基本上，我想从应用 A 的代码中单击应用 B 的按钮。

我可以使用 winapi findWindow 来获取处理程序。问题是我不知道应用程序 B 上按钮的名称。这是否可以列出应用程序的所有名称或 ID？

我正在使用 c# 来实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:13:33.023

由于您正在查看建议（这确实是一个非常笼统的问题，它可能会或可能不会工作，具体取决于其他应用程序/窗口是什么，例如浏览器或第 3 方应用程序等，它是否支持自动化）

看看这个密切相关的答案（它可能是重复的，但你仍然在“寻找”，所以也许要注意）。

[从其他进程访问元素](https://stackoverflow.com/questions/10129017/accessing-elements-from-other-processes/10129640#10129640)

还有这个关于如何“访问”其他应用程序的“输入”
[Pinvoke SetFocus 到特定控件](https://stackoverflow.com/questions/9503027/pinvoke-setfocus-to-a-particular-control/9547099#9547099)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T22:16:29.083

我没有测试过这个。但它看起来像一个有趣的图书馆。也许有一些你可以使用的功能。它被称为[白](http://white.codeplex.com/)。这只是一个示例：

```
Application application = Application.Launch("foo.exe");
Window window = application.GetWindow("bar", InitializeOption.NoCache);

Button button = window.Get<Button>("save");
button.Click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T22:35:47.530

您可以使用 Spy++ 等工具（包含在除 Express 版本之外的任何 Visual Studio 中）来查找该按钮的名称和类，然后将这些信息用作 FindWindow() 的参数。

# jquery - 在 ie 中使用带有 jquery 的圆角

> ID：10157731
> 
> 赞同：0
> 
> 时间：2012-04-14T22:03:41.613
> 
> 标签：jquery, css, internet-explorer

我正在尝试使用圆角在我的菜单中编写跨浏览器翻转效果，但在 ie 中不起作用。我试图使用 PIE 甚至一些插件，但它们没有工作。

这是我的代码：

```
$("document").ready(function() {

var ancho = $('nav li.nav_active').width()+24;

    $('nav li.nav_active').css({
            'background-color' : '#282828',
            "height" : ancho+"px",
            'margin-top' : "-"+(ancho-48)/2+"px",
            '-moz-border-radius' : ancho/2+"px",
            '-webkit-border-radius' : ancho/2+"px", 
            '-khtml-border-radius' : ancho/2+"px",
            'border-radius' : ancho/2+"px", 
            'behavior' : 'url(../PIE.htc)',
            '-webkit-box-shadow' : '0 8px 6px -6px black',
            '-moz-box-shadow' : '0 8px 6px -6px black',
            'box-shadow' : '0 8px 6px -6px black',
            'border' : 'none'
            });
            $('nav li.nav_active a').css({
            "line-height" : ancho+"px",
            "color" : "white",
            "font-family" : "'E-BoldCondensed'",
            });

$(function() {
    $('nav li:not(.nav_active)').mouseover(
        function () {
            var ancho = $(this).width()+32;
            $(this).css({
            "height" : ancho+"px",
            'margin-top' : "-"+(ancho-48)/2+"px",
            '-moz-border-radius' : ancho/2+"px",
            '-webkit-border-radius' : ancho/2+"px", 
            '-khtml-border-radius' : ancho/2+"px",
            'border-radius' : ancho/2+"px", 
            'behavior' : 'url(../PIE.htc)',
            '-webkit-box-shadow' : '0 8px 6px -6px black',
            '-moz-box-shadow' : '0 8px 6px -6px black',
            'box-shadow' : '0 8px 6px -6px black',
            });
            $(this,'a').css({
            "line-height" : ancho+"px",
            });
        });
});

$(function() {
    $('nav li:not(.nav_active)').mouseleave(
        function () {

            $(this).css({
            "height" : "",
            'margin-top' : "",
            '-moz-border-radius' : "",
            '-webkit-border-radius' : "", 
            '-khtml-border-radius' : "",
            'border-radius' : "",
            '-webkit-box-shadow' : '',
            '-moz-box-shadow' : '',
            'box-shadow' : '',

            });
            $(this,'a').css({
            "line-height" : '',
            });
        });
}); 

$(function() {
    $('nav li').mousedown(
        function () {
            var ancho = $(this).width()+32;
            $(this).css({
            "height" : ancho+"px",
            'margin-top' : "-"+(ancho-48)/2+"px",
            '-moz-border-radius' : ancho/2+"px",
            '-webkit-border-radius' : ancho/2+"px", 
            '-khtml-border-radius' : ancho/2+"px",
            'border-radius' : ancho/2+"px", 
            'behavior' : 'url(../PIE.htc)',
            '-webkit-box-shadow' : '',
            '-moz-box-shadow' : '',
            'box-shadow' : '',
            });
            $(this,'a').css({
            "line-height" : ancho+"px",
            });
        });
});

}); 
```

这在我网站的链接中：www.miramarlab.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:20:00.743

你应该调用相对于html页面的htc文件，而不是css。也许这就是罪魁祸首，htc 文件有一个特定的 mime 类型，应该添加到 .htaccess 文件中。

将 htc 文件保存在根目录中，并使用绝对路径加载：

```
behavior: url (http://www.miramarlab.com/PIE.htc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:07:45.637

您可以在不`jquery`使用（甚至没有图像）的情况下`CSS`仅使用它，它会更好。请阅读这篇文章：http: [//jonraasch.com/blog/css-rounded-corners-in-all-browsers](http://jonraasch.com/blog/css-rounded-corners-in-all-browsers)。希望这会有所帮助。

# c++ - 在 C++ 中从带有空格的文件中读取

> ID：10157732
> 
> 赞同：0
> 
> 时间：2012-04-14T22:03:47.417
> 
> 标签：c++, arrays, ifstream

我正在从文件中读取并将数组（指针）的前面传递回我的主函数。我遇到的问题是它没有复制单词之间的空格。例如`Hello Hello`出来为`HelloHello`.

我开始使用`getLine`，然后遇到了文件大小的问题。我将其设置为 500，因为没有文件会大于 500，但是大多数文件将低于 500，我正在尝试获取文件的确切大小。

这是我的代码：

```
char infile()
{
   const int SIZE=500;
   char input[SIZE];
   char fromFile; 
   int i=0;

   ifstream readFile;
   readFile .open("text.txt");
   while(readFile>>fromFile)
   {
     input[i]=fromFile;
     i++;
   }
   cout<<endl;
   returnArray=new char[i];//memory leak need to solve later
   for(int j=0;j<i;j++)
   {
      returnArray[j]=input[j];
      cout<<returnArray[j];
    }
    cout<<endl;
  }
  return returnArray[0];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T22:08:39.100

根据您的文件格式，您可能想要使用`ifstream::read()`或`ifstream::getline()`代替。

`operator >>`将尝试“标记化”或“解析”正在读取的数据流，使用空格作为标记之间的分隔符。您有兴趣从具有完整空白的文件中获取原始数据，因此您应该避免使用它。如果您想一次读取一行中的数据，使用换行符作为分隔符，您应该使用`getline()`. 否则使用`read()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T22:18:39.747

使用`std::string`,`std::vector`并且`std::getline`你仍然可以返回一个`char`. 这将解决您的内存泄漏和跳过空白问题。

例子：

```
char infile()
{
  std::ifstream readFile("text.txt");
  std::vector<std::string> v;
  std::string line;
  while(std::getline(readFile, line))
  {
    v.push_back(line);
  }                                      
  for(auto& s : v)
  {
      std::cout << s << std::endl;
  }
   return (v[0])[0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:09:58.613

您要求它在分隔有空格的位置时读取。

您可以使用 getline() 来保留空格。

# c++ - DirectX9 中的多个渲染目标

> ID：10157734
> 
> 赞同：2
> 
> 时间：2012-04-14T22:03:52.437
> 
> 标签：c++, graphics, directx, rendering, deferred

我正在尝试在 DirectX9 中实现非常基本的延迟着色。我现在只能使用 2 个渲染目标（后台缓冲区和另一个纹理）。所以我可以渲染法线或深度，但不能同时渲染两者。我的问题是有人可以解释如何渲染到多个纹理目标。我的印象是我可以使用类似下面的代码。它仅在索引为零时才有效，这可能意味着其中一个表面没有被写入。

```
d3dDevice->SetRenderTarget(0, surfaceDepth);
d3dDevice->SetRenderTarget(1, surfaceNormal); 
```

我收到此消息： Direct3D9：（警告）：无法渲染到也用作纹理的渲染目标。渲染目标被检测为绑定，但无法检测纹理是否实际用于渲染。

我知道可能有几件事可能与此消息有关...我想是否有人可以解释如何正确使用多个渲染目标索引。您是否还更改了每个渲染目标的技术。现在我的着色器有一个“普通技术”和一个“深度技术”和管道的“后处理技术”。

谢谢你的时间。

这是更多代码：

```
SetTransforms();
d3dDevice->SetRenderTarget(0, surfaceDepth);
HR(d3dDevice->Clear( 0, NULL, D3DCLEAR_ZBUFFER | D3DCLEAR_TARGET, 0xff000000, 1.0f, 0));
scenes[sceneIndex]->setTechnique("depthTech");
scenes[sceneIndex]->render(dt);

d3dDevice->SetRenderTarget(1, surfaceNormal);
HR(d3dDevice->Clear( 0, NULL, D3DCLEAR_ZBUFFER | D3DCLEAR_TARGET, 0xff000000, 1.0f, 0));
scenes[sceneIndex]->setTechnique("normalTech");
scenes[sceneIndex]->render(dt); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:08:52.577

您只需为所有目标设置 d3dDevice->SetRenderTarget(n, surface)，其中 n 是目标编号，然后设置输出到像素着色器中的多渲染目标结构的技术

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T09:34:59.090

你的问题让我更深入地发现了这个问题。

这就是我发现的：

首先你必须检查你的 D3DCAPS9.NumSimultaneousRTs。大于1吗？所有渲染目标必须是相同的分辨率和位深度，但可以是不同的格式。您不能使用任何抗锯齿。

# visual-studio - 注册 com dll 以供 vba 使用

> ID：10157735
> 
> 赞同：2
> 
> 时间：2012-04-14T22:04:01.163
> 
> 标签：visual-studio, com

我有一个非常基本的问题。我开发了一个可从 Access vba 使用的 com dll。在我的开发机器上运行良好。在测试机器上，我得到了

```
"error -2147024894 (80070002) Automation Error
System can't find the specified file" 
```

当我运行 Access 应用程序时发出消息。

在设计视图中引用 dll 并且所有对象和属性都显示在 vba ide 中。

我想知道我是否使用错误的 regasm 来注册 dll？我使用 VS 2010 在 64 位机器上开发。

我编译 dll 以在 Framework 3.5 中的 x86 上运行。我应该使用框架 v2.2 吗？o.50727 或 Framework\v4.0.30319 注册 dll。我不清楚有什么区别。使用的版本是由VS的开发版本还是你编译的.NET版本决定的？一个用于 32 位，另一个用于 64 位？

我已经为此奋斗了 2 天，并取得了一些进展，但无法让 Access 例程在运行时实际设置 dll 的实例。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:24:26.990

如果你在 v3.5 下编译，你应该使用那个 regasm。但是，我认为您可能需要添加 /tlb 和 /codebase 开关来生成可以在 vba 应用程序中使用的类型库。然后你可以参考 .tlb 文件，你应该是金色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:25:34.253

您需要注册您的 COM dll`regsvr32`用于从 VBA 引用它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-14T22:11:16.210

VBA 使用 COM DLL。您必须使用 C++，而不是 .Net 框架。

# iphone - 如何仅在 iPhone 的横向模式（视口元标记）中定义网站的宽度？

> ID：10157738
> 
> 赞同：0
> 
> 时间：2012-04-14T22:04:47.727
> 
> 标签：iphone, html, css, viewport, responsive-design

我的网站在 iPhone 2G、3G 和 4S 纵向模式下的宽度设置为 460 像素。但是在水平模式下看起来并不好。我会说它应该有两倍的像素。

我当前的视口标签如下所示：

```
<meta name="viewport" content="user-scalable=yes, width=460" /> 
```

**我想要纵向模式下的 460 像素。
我想要横向模式下的 800 像素。**

这是 Apple 的文档，但未提及水平模式：[https ://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](https://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:22:15.710

您是否尝试过使用恒定的“设备宽度”？

[http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)

我还使用以下技术在页面加载后修改元标记。当设备在纵向和横向之间切换时，您可能会对其进行调整以修改元标记：

```
NSString* js = 
@"var img = document.getElementsByTagName( 'img' )[0];" \
"var c = 'width=' + img.width + ', height=' + img.height + ', user-scalable=yes, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0';" \
"var h = document.createElement( 'head' ); " \
"var m = document.createElement( 'meta' ); " \
"m.setAttribute( 'name', 'viewport' ); " \
"m.setAttribute( 'content', c ); " \
"h.appendChild( m ); " \
"var html = document.getElementsByTagName( 'html' )[0];" \
"var body = document.getElementsByTagName( 'body' )[0];" \
"html.insertBefore( h, body ); " \
"";
[webView stringByEvaluatingJavaScriptFromString: js ]; 
```

# javascript - 清除 HTML5 文件系统 API

> ID：10157739
> 
> 赞同：7
> 
> 时间：2012-04-14T22:04:57.570
> 
> 标签：javascript, html, google-chrome, html5-filesystem

如何完全清空（或删除所有文件）文件系统？

没有像 localStorage ( `localStorage.clear()`) 这样的 1 行解决方案吗？还是我错过了一些非常非常明显的东西？

显然，我不是很清楚。我指的是 HTML5 文件系统 API。[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T22:22:41.033

**2016 年更新**：文件 API“目录和系统”工作[已被放弃](https://www.w3.org/TR/file-system-api/)，对浏览器的支持也被放弃了。原始的[File API](http://www.w3.org/TR/FileAPI/)仍然有效，但在用户系统上提供整个文件区域的东西已被放弃。

* * *

看起来是[`DirectoryEntry#removeRecursively`](https://dev.w3.org/2009/dap/file-system/file-dir-sys.html#widl-DirectoryEntry-removeRecursively-void-VoidCallback-successCallback-ErrorCallback-errorCallback)这样的。它说您无法删除文件系统的根目录，但您可以遍历根目录中的条目并递归删除它们（或者始终使用根目录的子目录，从而让您使用单线删除它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T00:58:59.000

不是单线解决方案，但您可以随时访问

> 铬：//设置/cookies

并从您选择的来源中删除文件系统![在此处输入图像描述](../Images/5b5fa3a48661211c7ea4469977ffdead.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T19:54:09.937

在[bro-fs](https://github.com/vitalets/bro-fs)中有专门的[fs.clear()](https://vitalets.github.io/bro-fs/module-fs.html#.clear)方法。

```
fs.init()
  .then(() => fs.mkdir('dir'))
  .then(() => fs.writeFile('file.txt', 'hello world'))
  .then(() => fs.clear()) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T22:15:25.967

[Storage，在 Web Storage 规范中，确实有一个`clear`方法](http://dev.w3.org/html5/webstorage/#the-storage-interface)。您是否将 File API 与 Web 存储 API 混淆了？

[在单个文件的级别，有 truncate 方法。](http://www.w3.org/TR/file-writer-api/#the-filewriter-interface)

# r - 我根据一定的规则定义了一个向量。如何定义输出向量的函数？

> ID：10157740
> 
> 赞同：0
> 
> 时间：2012-04-14T22:05:19.137
> 
> 标签：r

规则是：`for(i in 1:10){v[i]=f(q,m)}`。f(q,m) 是根据输入 q, m 在区间内生成随机输出的函数。'v' 是向量。

以这种方式指定 v 的组件后，我可以输入 v 并返回向量。我想做的是定义一个函数，它接受输入 q,m 并返回向量 v。

原因是最终我希望能够绘制 v 的平均值，范围在变量 q 上。但我认为，我需要一个首先返回 v 的函数。因此，任何有关如何定义此类功能的建议都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:48:43.593

使用 apply 系列函数可以优雅地生成值。`vapply`鲜为人知，但比 更有效`sapply`，所以我在这里推广它。`numeric(1)`指定`f`预期的结果是什么：

```
# Emulating your function f
f <- function(q, m) runif(1, q, m)

# Generator function
g <- function(n=10, q, m) vapply(seq_len(n), function(i) f(q, m), numeric(1))

# Try it out
q <- 3
m <- 5
v <- g(10, q, m)

# or, if f is defined as above, simplify to:
v <- runif(10, q, m) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:15:45.327

完全按照您的代码：

```
makeVector <- function(q, m) { 
  v <- c()
  for (i in 1:10) {
    v[i] <- f(q, m)
  }
  v
} 
```

或者，更优雅：

```
makeVector <- function(q, m) sapply(1:10, function(q, m) f(q, m)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T01:11:22.533

它可能等同于所提供的解决方案（并且没有完全解决缺失的细节），但是您尝试过吗？

```
Vf <- Vectorize(f) 
```

# python - Python - 替换多个文件中的数字

> ID：10157741
> 
> 赞同：2
> 
> 时间：2012-04-14T22:05:52.877
> 
> 标签：python, file, replace, numbers

我想在多个 .inp 文件中用 3.363 替换某个数字，比如 3.54 并保存到位。

这是我到目前为止写的，但我不知道问题出在哪里！所以如果有人可以看看这个，我将不胜感激。

```
for i in range(1, 126):
 file = 'C:/inp/' + str(i) +'.inp'
 o2 = open(name=file, readOnly=False)  
 for line in ("file"):
  file.write(line.replace('3.54', '3.363'))
 file.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T22:09:02.053

for 循环：

```
for line in ("file"): 
```

`line`等于，`'f'`然后`'i'`，然后`'l'`，然后`'e'`。

尝试

```
import fileinput
import sys
import re

filenames = ['C:/inp/%d.inp'%i  for i in range(1, 126)]
for line in fileinput.input(filenames, inplace = True,
                            backup = '.bak'):        
    sys.stdout.write(re.sub(r'\b3.54\b', '3.363', line)) 
```

请注意，`line.replace('3.54', '3.363')`这有点危险。例如，它将更改`13.54`为`13.363`。为了防止这种情况，请使用正则表达式。

使用的工具参考：

*   [文件输入](http://docs.python.org/library/fileinput.html#module-fileinput)模块
*   [列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)（用于定义`filenames`）
*   [re.sub](http://docs.python.org/library/re.html#re.sub)（正则表达式替换）

# qt - Qt 持久化 QNetworkCookieJar

> ID：10157742
> 
> 赞同：3
> 
> 时间：2012-04-14T22:06:02.423
> 
> 标签：qt, webkit

在我的 Qt 应用程序中，我需要在程序的不同运行之间保存 cookie。

我读到[QNetworkCookieJar](http://qt-project.org/doc/qt-4.8/qnetworkcookiejar.html)出于某种原因不支持永久 cookie 存储。手册告诉我，我基本上应该自己做。

我意识到编写这样一个简单的类并不难，但这似乎是对最糟糕程度的轮子的重新发明，因为肯定有人以前需要过这个。

所以我的问题基本上是为什么 Qt 不向默认实现添加永久存储支持？互联网上是否有一个 QNetworkCookieJar 类具有永久 cookie 支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T07:21:38.757

Qt Demos 中的[浏览器](http://qt.gitorious.org/qt/qt/trees/4.8/demos/browser)使用其他花哨的选项（首选项对话框、白名单、黑名单、保存 cookie 的计时器……）实现了持久存储。

# heroku - 一起使用 play 和 restlet

> ID：10157746
> 
> 赞同：0
> 
> 时间：2012-04-14T22:07:02.513
> 
> 标签：heroku, playframework, jetty, restlet, playframework-2.0

我已经使用restlet 开发了一个相当广泛的rest API，但现在我需要提供网页服务。我正在研究游戏框架，这似乎是解决我的问题的一个很好的方法。有很多代码要共享，所以我希望两者都从同一个服务器/jvm 运行（最终部署在 Heroku.

是否可以配置应用程序服务器（如码头）根据 URL 路径拆分调用以转到 restlet 或播放？如果有怎么办？我是从 play 项目还是 restlet 项目开始，如何修改它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:23:41.430

这里有几个选项

1.  您可以使用前端的 Apache 层，这样您就可以将 Restlet 部分与 Play 部分完全分开。但是，当您部署到 Heroku 时，我不确定您是否能够这样做，因为 Heroku 没有为您提供前端 http 层

2.  修改 HTTP 处理程序。这将涉及创建您自己的模块或修改 Play 的核心源。这肯定会解决你的用例，但我不认为修改核心是一个很好的答案，模块方法是相当过分的。

3.  使用 Play 1.x，您可以为所有 Restlet API 设置一个控制器操作，该操作只需调用您的 Restlet 服务。在 Play 2.x 中，您可以使用全局对象 onRouteRequest 方法。

如果您正在考虑部署到像 Heroku 这样的 PaaS，我想我会选择选项 3。

# c++ - Linux C++ ptrace——映射子进程内存的所有单元

> ID：10157752
> 
> 赞同：0
> 
> 时间：2012-04-14T22:07:22.153
> 
> 标签：c++, linux, memory, ptrace

我有一个类似的链接列表：

```
class MemoryCell
{
protected:
    unsigned char* _address; // the address offset (in another process)
    unsigned int _size;  // the size of this memory block
    unsigned char* _buffer; // the data

    MemoryCell* _next; // points to next memory cell to form linked list
}; 
```

然后我有一个`MemoryMapper`班级将负责。我想把所有的记忆单元都放进去。

```
// void MemoryMapper::MapAllCells(unsigned int procId)//
unsigned int offset = 0x0;
while (true)
    {
        long memoryData = ptrace(PTRACE_PEEKDATA, procId, offset);
        if (memoryData == -1) break; // need to check for errno(3) too
       // add new MemoryCell w/ data to head of linked list
       // how to get next offset based on what was returned? 
```

它在地址 0 处立即中断。我认为该过程可能从 0x0 开始，但我想我需要真正的偏移量。但是我怎样才能得到下一个偏移量（基于前一个的大小）？

希望很清楚，但如果需要我可以澄清谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:21:18.583

您无法从`ptrace()`; 不过，您可以从`/proc/PID/maps`子进程中获取它。请注意，`0`通常不映射地址，以便捕获`NULL`指针引用，并且可能没有意义`PTRACE_PEEKDATA`（现在通常不使用单独的 I 和 D，并且在没有它的情况下，地址 0 通常是文本，而不是数据；内核是否麻烦区分，我不知道我的头）。

# objective-c - 如何将另一个对象添加到我的单例代码中？

> ID：10157759
> 
> 赞同：1
> 
> 时间：2012-04-14T22:08:21.990
> 
> 标签：objective-c, cocoa

这是我的单例代码：

```
@synthesize listOfSites;

+ (id)sharedInstance
{
    static dispatch_once_t dispatchOncePredicate = 0;
    __strong static id _sharedObject = nil;
    dispatch_once(&dispatchOncePredicate, ^{
        _sharedObject = [[self alloc] init];
    });

    return _sharedObject;
}

-(id)init
{
    self = [super init];
    if (self) {
        listOfSites = [[NSMutableArray alloc] init];
    }
    return self;
}

@end 
```

这几乎是教科书......但是，我想添加另一个数组，类似于“listOfSites”（称之为“listOfReadings”）。说“如果（自我）”的代码让我感到困惑。

如何向此代码添加另一个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:12:59.350

`if (self) {`除了验证它`[super init]`是否有效之外什么都不做 - 并且它没有返回`NULL`或任何东西......

除此之外，您可以正常执行此操作，例如：

*   声明一个`listOfReadings`数组（作为 ivar/属性？）
*   设置它

    ```
    listOfReadings = [[NSMutableArray alloc] init]; 
    ```

    **或者**

    ```
    listOfReadings = [[NSMutableArray alloc] initWithObjects:nil]; 
    ```

    **或** *（如果是`property`）*

    ```
    [self setListOfReadings:[[NSMutableArray alloc] initWithObjects:nil]]; 
    ```

* * *

**例子 ：**

```
-(id) init {
    self = [super init];
    if (self) {
        listOfSites = [[NSMutableArray alloc] init];
        listOfReadings = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

`NSMutableArray`在你的`.h`文件中声明了新的之后：

```
NSMutableArray* listOfReadings; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:16:26.680

```
-(id) init {
self = [super init];
if (self) {
    listOfSites    = [[NSMutableArray alloc] init];
    listOfReadings = [[NSMutableArray alloc] init];
}
return self; 
```

}

if (self) 换句话说就是“如果当前对象被成功创建，那么……”

# vector - 样式点向量作为 Openlayers 中的标记？

> ID：10157760
> 
> 赞同：7
> 
> 时间：2012-04-14T22:08:30.377
> 
> 标签：vector, drag-and-drop, openlayers, point, marker

似乎不可能在 OpenLayers 上为 Markers 获取 onDrag （例如[this](https://stackoverflow.com/questions/884692/dragging-markers-with-ordnance-survey-openlayers-api)和[this](https://stackoverflow.com/questions/4376360/how-to-create-a-simple-draggable-marker-in-openlayers)）

所以我想使用矢量图层，然后向它添加点而不是标记。

我的问题是矢量点看起来不像标记。

我可以为点要素分配图标吗？

我想要一个矢量点的功能，看起来像一个标记。 ![比较](../Images/7399701aa733c1982cc2b5560382c8d5.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T04:34:47.890

将具有 externalGraphic 属性的样式对象添加到矢量图层配置：

```
var layer= new OpenLayers.Layer.Vector("example", {
    maxExtent: new OpenLayers.Bounds(-200,-200,200,200),
    style: {
        externalGraphic: 'http://www.openlayers.org/dev/img/marker.png', 
        graphicWidth: 21, 
        graphicHeight: 25,
        graphicYOffset: -24
    }
}); 
```

适当地`graphicYOffset`移动标记，使其感知到的尖端与地图上的位置相对应。

# facebook-graph-api - 批量检索好友头像

> ID：10157768
> 
> 赞同：2
> 
> 时间：2012-04-14T22:09:35.890
> 
> 标签：facebook-graph-api, profile, photos

我已经使用批处理方法成功检索了多达 50 个用户的配置文件。我尝试使用相同的过程来检索这些用户的个人资料照片，但收到错误 302。我看到有一个指向结果中返回的照片的 URL，但是使用它来检索每张照片会破坏批处理的目的，这是一次检索所有内容并防止重复的HTTP请求。是否可以使用 Facebook API 中的批处理来检索这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:06:37.130

尝试 FQL：

```
SELECT pic_square FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) 
```

...其中`pic_square`可以是`pic_small`, `pic_big`, `pic_square`,之一`pic`

这将为您提供给定大小的相应用户个人资料图片的 URL。

例如：

[https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3DSELECT%20pic_square%20FROM%20user%20WHERE%20uid%20IN%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20 %3D%20me%28%29%29](https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3DSELECT%20pic_square%20FROM%20user%20WHERE%20uid%20IN%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29)

# java - 在 short 和 int 之间不兼容的类型错误 Java。不确定原因

> ID：10157769
> 
> 赞同：8
> 
> 时间：2012-04-14T22:09:35.907
> 
> 标签：java, bit-manipulation, precision

在下面的代码中，我有一个错误“发现精度可能丢失：需要 int：short”。我理解错误的含义，但我只是想知道为什么我会得到它。当然，该函数应该返回一种短类型（我看不出有*什么*精度损失，代码应该返回一个 16 位整数）。谁能帮我弄清楚为什么下面的代码似乎需要 int 类型？

```
static short a() {
    short[] payload = {
            100, 200, 300,
            400, 500, 600,
            700, 800, 900, 1000
    };
    short offset = 2;
    return (payload[offset - 2] << 8 & 0xff00) + (payload[offset - 1] & 0xff);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T22:12:32.893

`short`始终返回的Java 算术运算`int`，部分是为了防止溢出，部分是为了反映底层 JVM 字节码，它不区分对`int`、`short`或的算术运算`byte`。但基本上，`(payload[offset - 2] << 8 & 0xff00)`是一个`int`，它希望你把它重新转换成一个短的。

# programming-languages - 当检测到死锁时，系统可以采取哪些措施？

> ID：10157774
> 
> 赞同：2
> 
> 时间：2012-04-14T22:10:31.503
> 
> 标签：programming-languages, operating-system, system, deadlock

我在理解如何处理死锁时遇到了一些麻烦。首先，可以采取哪些行动？此外，通常采取什么行动，哪个是“最好的”？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:13:23.300

好吧，由于停机问题，您不能总是首先检测到死锁。

但是假设您有合理的怀疑已经发生，那么您没有太多选择。你可以：

*   中断（即发送信号/异常）所有持有锁的线程。不过，他们必须能够处理由此产生的中断。

*   杀死所有涉及的线程/进程。这是一个激烈的操作，它以牺牲某些数据可能会被程序丢失的风险为代价来保存系统的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:48:01.450

您在问如何**处理**死锁。**这不是正确的问题**：您应该避免使用它们。确保它们不会发生，因为实际上，您的程序无法从它们中恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:33:29.070

你可以杀死一些死锁的任务，并希望其他的可以继续进行，并且不会停留在或立即陷入死锁。这不是特别可靠。

您可以杀死所有死锁的任务。这将释放在没有外部干预的情况下永远不会使用的资源。但是，您的任务现在已经死了——如果您重新启动它们，它们没有理由不能再次死锁。

正如@usr 所说，正确的做法是首先避免死锁。任何潜在的死锁都表明您的系统存在严重缺陷，并且可能会导致您重新考虑您的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T07:48:28.640

暂时防止资源陷入死锁的进程。将进程退回到某个检查点，允许抢占所需资源并稍后在检查点重新启动进程。连续杀死进程，直到系统没有死锁。

# c - 为什么有些人在调用 malloc 后不检查 NULL？

> ID：10157778
> 
> 赞同：4
> 
> 时间：2012-04-14T22:11:59.523
> 
> 标签：c, pointers, memory-management, null, malloc

前段时间我从网上下载了一个源码。有几个 malloc 调用，之后没有检查 NULL。据我所知，您需要在调用 malloc 后检查 NULL。

有人在调用 malloc 后不检查 NULL 是否有充分的理由？我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T23:02:48.803

正如 Jens Gustedt 在评论中提到的那样，当`malloc()`您的程序返回错误时，您的程序可能已经陷入困境。当程序可能无法做任何事情时，放入一堆错误处理代码来处理这种情况是否有意义？对于许多程序来说，答案可能是“不”，而对于其他程序来说，做一些适当的事情可能非常重要。

您可以尝试通过简单的“malloc-or-die”包装函数分配内存，以保证分配成功或程序将终止：

```
void* m_malloc(size_t size)
{

    void* p;

    // make sure a size request of `0` doesn't trigger
    // an error situation needlessly 
    if (size == 0) size = 1;

    p = malloc(size);

    if (!p) {
        // attempt to log the error or whatever
        abort();
    }

    return p;
} 
```

然后遇到的一个问题是，除了终止程序之外，您无法可靠地做很多事情。即使记录问题也可能需要一些内存分配，因此日志记录工具可能会有自己的问题（除非您的分配失败是由于尝试分配不合理的大内存块）。

您可以尝试通过在程序早期分配一个“故障安全”块来解决该问题，当您需要记录问题时可以释放该块（我认为有很多程序使用这种策略）。但是您愿意在这种错误处理中投入多少工作取决于您的具体需求。如果您的程序需要确保在`malloc()`返回错误时完成一些非常复杂的事情，那么您需要有相应的保护措施以确保您*可以*在内存非常低的情况下完成这些事情。通常，这意味着额外的复杂性，而且可能并不总是值得付出努力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T22:32:17.450

人们不检查是因为他们很懒惰，这使他们的代码更丑陋，而且他们不想弄清楚如何从各处的错误中恢复。

我听过一些程序员说，“如果我不能 malloc 一个块，那么系统很快就会崩溃，因为 VM 已满，那我为什么还要检查呢？”

我不同意。您应该检查错误，即使这意味着只记录错误并调用 exit() 或抛出异常。虽然我们倾向于使用具有巨大磁盘和永远在线的分页内存的系统，但行业已经发生了翻天覆地的变化，现在我们拥有内存有限且没有按需分页的智能手机和平板电脑。另外，即使在桌面上，我们的数据集也增长得如此之多，以至于有时 malloc 会失败。

如果您不想在任何地方添加额外的代码行，只需编写自己的 malloc 替换，调用 malloc 并检查错误并使用它来代替 malloc。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T22:13:26.303

他们只是不关心意外的崩溃！

当你做 malloc 时，你很可能会立即存储一些东西。因此，如果您不检查 NULL，那么程序可能会在尝试在那里存储内容时崩溃。

这在小型程序中不太可能发生，因为当请求少量内存时 malloc 几乎不会失败。所以 malloc 不会返回 NULL。

但在我看来，即使在小程序中练习 for malloc 通常也很好*。*`NULL check`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T22:15:09.303

如果您需要更多内存`malloc`而不能给您更多内存，您能做些什么吗？
我想优雅地退出。
但是如果你退出，我猜他们认为你如何退出并不重要（还不如崩溃和避免，他们认为检查 null 的“开销”）。
也许功能是他们不需要清理代码？
不过我不同意。你应该检查`NULL`malloc 的回报

# python - Python列表排序，列表内的字典排序

> ID：10157783
> 
> 赞同：0
> 
> 时间：2012-04-14T22:12:53.173
> 
> 标签：python, list, dictionary

我希望基本上有一个排序的字典列表，如下所示：

```
similarity = [{'Ben': 49}, {'Moose': 18}, {'Reuven': 39}, {'Cust1': 58}, {'Cust2': 10}, {'Francois': 58}, {'Jim C': 39}, {'Iren': 13}, {'Cust3': 13}] 
```

任何帮助表示赞赏，并提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T22:29:46.597

您应该在这里使用元组列表：

```
>>> lst = [d.items()[0] for d in similarity]
>>> lst
[('Ben', 49), ('Moose', 18), ('Reuven', 39), ('Cust1', 58), ('Cust2', 10), ('Francois', 58), ('Jim C', 39), ('Iren', 13), ('Cust3', 13)] 
```

然后你可以像往常一样对它们进行排序。

```
>>> from operator import itemgetter
>>> sorted(lst, key=itemgetter(1))
[('Cust2', 10), ('Iren', 13), ('Cust3', 13), ('Moose', 18), ('Reuven', 39), ('Jim C', 39), ('Ben', 49), ('Cust1', 58), ('Francois', 58)] 
```

如果需要，您还可以使用单个[有序字典](http://docs.python.org/library/collections.html#collections.OrderedDict)来保存值：

```
>>> from collections import OrderedDict
>>> OrderedDict(sorted(lst, key=itemgetter(1)))
OrderedDict([('Cust2', 10), ('Iren', 13), ('Cust3', 13), ('Moose', 18), ('Reuven', 39), ('Jim C', 39), ('Ben', 49), ('Cust1', 58), ('Francois', 58)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:13:47.503

这是一种方法。

```
>>> sorted(similarity, key=lambda x: x.values()[0])
[{'Cust2': 10}, {'Iren': 13}, {'Cust3': 13}, {'Moose': 18}, {'Reuven': 39}, {'Jim C': 39}, {'Ben': 49}, {'Cust1': 58}, {'Francois': 58}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-25T09:13:32.873

我在这方面面临困难。
所以我建议你用这种方法

```
a = {'Ben': 49}
b =  {'Moose': 18}
ab = {**a, **b}
print(ab)
{'Ben': 49, 'Moose': 18}

1: sorted(ab.values())
[('Ben', 49), ('Moose', 18)]

2: sorted(ab.items())
[18, 49] 
```

# javascript - 使用 jQuery 和 YouTube API 加载事件

> ID：10157786
> 
> 赞同：1
> 
> 时间：2012-04-14T22:12:59.517
> 
> 标签：javascript, jquery, youtube-api, jquery-events

当我在加载 YouTube 视频时放置回调时`onYouTubePlayerReady`，在 jQuery 就绪函数中，加载视频时不会调用它。但是，当我将回调放在 jQuery 就绪函数之外时，它会被调用。如何修复它以便我可以将回调放在 jQuery 函数中。代码如下。

```
<html>
<body>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}swfobject.js"></script>    

<script type="text/javascript">

  /// --> When I put onYouTubePlayerReady here it IS called  //
  function onYouTubePlayerReady(playerId) {
      ytplayer = document.getElementById("myytplayer");
      ytplayer.playVideo();
  }

  $(document).ready(function(){

       /// --> When I put onYouTubePlayerReady here it is NOT called //

       var params = { allowScriptAccess: "always" };
       var atts = { id: "myytplayer" };
       swfobject.embedSWF("http://www.youtube.com/v/UkhisRY3RRQ?version=3&enablejsapi=1","ytapiplayer", "800", "500", "8", null, null, params, atts);
});

</script>

   <div id="ytapiplayer">
       You need Flash player 8+ and JavaScript enabled to view this video.
   </div>
</body>
</html> 
```

此外，这里是 swfobject 的 url， [http:](http://swfobject.googlecode.com/svn/trunk/swfobject/swfobject.js) //swfobject.googlecode.com/svn/trunk/swfobject/swfobject.js以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:02:18.897

你必须让它全局可用——如果你把它放在你准备好的处理程序中，它的作用域就是那个处理程序。为什么你需要它？您需要访问范围？你可以试试这个，但我不确定它是否适合你——这取决于 youtubeplayer 引用指针关联何时建立：

```
<html>
<body>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}swfobject.js"></script>    

<script type="text/javascript">

  $(document).ready(function(){

      onYouTubePlayerReady = function(playerId) {
          ytplayer = document.getElementById("myytplayer");
          ytplayer.playVideo();
      }

       var params = { allowScriptAccess: "always" };
       var atts = { id: "myytplayer" };
       swfobject.embedSWF("http://www.youtube.com/v/UkhisRY3RRQ?version=3&enablejsapi=1","ytapiplayer", "800", "500", "8", null, null, params, atts);
});

</script>

   <div id="ytapiplayer">
       You need Flash player 8+ and JavaScript enabled to view this video.
   </div>
</body>
</html> 
```

# haxe - Haxe & NME：每像素位图操作的最快方法

> ID：10157787
> 
> 赞同：12
> 
> 时间：2012-04-14T22:13:12.840
> 
> 标签：haxe

这是一个小项目，用于测试 NME 在不同构建（Windows c++、Flash）下的像素级操作性能。

它用于**`BitmapData.setPixel`**逐个修改像素（每帧 320x240）。**C++ 构建以 22 FPS 运行**，flash**构建在 ~100 FPS 左右**。与闪存相比，C++ 构建的性能大幅下降的原因是什么？如何使用 C++ 构建改进代码以获得更高的 FPS？

## 曼德布罗特.hx

```
import nme.display.Sprite;
import nme.display.Bitmap;
import nme.display.BitmapData;
import nme.text.TextField;
import nme.events.Event;
import nme.events.TimerEvent;
import nme.utils.Timer;
import nme.geom.Matrix;
import nme.geom.Rectangle;
import nme.utils.ByteArray;

class Mandelbrot
{
    public static function main() : Void
    {
        new Mandelbrot();
    }

    public var pixels:Array<Array<Int>>;

    public var colorModifier:Int;
    private var bitmapData:BitmapData;
    private var bigBitmapData:BitmapData;

    private var fps:TextField;

    private var width:Int;
    private var height:Int;
    private var matrix:Matrix;

    public function new() 
    {
        width = 320; //Std.int(flash.Lib.current.stage.stageWidth/2);
        height = 240; //Std.int(flash.Lib.current.stage.stageHeight/2);

        var scale:Float = 2;//flash.Lib.current.stage.stageWidth/width;
        matrix = new Matrix();
        matrix.scale(scale, scale);

        var setBitmap:Bitmap = new Bitmap();
        bitmapData = new BitmapData( width , height , false , 0x000000 );
        bigBitmapData = new BitmapData( nme.Lib.current.stage.stageWidth , nme.Lib.current.stage.stageHeight , false , 0x000000 );

        setBitmap.bitmapData = bigBitmapData;

        nme.Lib.current.addChild( setBitmap );

        var maxIterations:Int = 128;

        pixels = new Array();

        var beforeTime = nme.Lib.getTimer();

        var xtemp;
        var iteration;
        var x0:Float = 0;
        var y0:Float = 0;
        for(ix in 0...width) {
            pixels[ix] = new Array();
            for(iy in 0...height) {
                    x0 = 0;
                    y0 = 0;
                    iteration = 128;

                    while ( x0*x0 + y0*y0 <= 4  &&  iteration > 0 ) 
                    {
                        xtemp = x0*x0 - y0*y0 + (ix-14*5000)/50000;
                        y0 = 2*x0*y0 + (iy-(height/0.6))/50000;
                        x0 = xtemp;

                        iteration--;
                    }

                    pixels[ix][iy] = iteration;
            }
        }

        var afterTime = nme.Lib.getTimer();

        var tf = new TextField();
        tf.width = 400;
        tf.text = "Generating fractal took "+(afterTime-beforeTime)+" ms";
        nme.Lib.current.addChild(tf);

        fps = new TextField();
        fps.width = 400;
        fps.y = 10;
        fps.text = "FPS: ";
        nme.Lib.current.addChild(fps);

        colorModifier = 2;
        var timer:haxe.Timer = new haxe.Timer(10);

        runLoop();
        timer.run = runLoop;
    }

    public function runLoop() {
        var r:Int=0, b:Int=0, g:Int=0;
        var pixel:Int = 0;

        var beforeTime = nme.Lib.getTimer();

        for(iy in 0...height) {
            for(ix in 0...width) {
                pixel = pixels[ix][iy];
                r = pixel + colorModifier;
                g = pixel + colorModifier + r;
                b = pixel + colorModifier + g;
                bitmapData.setPixel(ix, iy, (r<<16 | g<<8 | b));
            }
        }

        bigBitmapData.draw(bitmapData, matrix, null, null, null, false);
        var afterTime = nme.Lib.getTimer();
        fps.text = "FPS: "+Math.round(1000/(afterTime-beforeTime));

        colorModifier += 2;
        if(colorModifier > 65530)
                colorModifier = 0;

    }
} 
```

## 曼德布洛特.nmml

```
<?xml version="1.0" encoding="utf-8"?>
<project>
  <app
     file="Mandelbrot.hx"
     title="Mandelbrot sample"
     package="org.haxe.nme.mandelbrot"
     version="1.0.0"
     company="nme" 
     main="Mandelbrot"
  />
  <window
        width="640"
        height="480"
        orientation="landscape"
        fps="60"
        background="0xffffff"
        resizeable="true"
        hardware="true"
    />
  <classpath name="." />
  <haxelib name="nme" />
  <ndll name="std" />
  <ndll name="regexp" />
  <ndll name="zlib" />
  <ndll name="nme" haxelib="nme" />
  <setenv name="SHOW_CONSOLE"/>
</project> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T20:43:49.157

查看`nme.Memory`API。这个想法是创建`ByteArray`具有正确大小的 a （或从 a 获取它`BitmapData`），选择它作为当前的虚拟内存空间并直接操作它的字节。

使用 Flash 您将获得大约 10 倍的速度提升，并且使用 CPP 目标也应该更快。**不要忘记在 Release 模式下编译，**否则方法内联将被禁用，性能会受到很大影响。

基本用法示例（未经测试的代码）：

```
var rect:Rectangle = bitmapData.rect;

// 32bits integer = 4 bytes
var size:Int = bitmapData.width * bitmapData.height * 4;

// The virtual memory space we'll use
var pixels:ByteArray = new ByteArray();

// CPP does not support setting the length property directly
#if (cpp) pixels.setLength(size);
#else pixels.length = size; #end

// Select the memory space (call it once, not every frame)
Memory.select(pixels);

// And in your loop set your color
// Color is in BGRA mode, nme.Memory can only be used in little endian mode.
Memory.setI32((y * width + x) * 4, color);

// When you're done, render the BitmapData
// (don't forget to reset the ByteArray position)
pixels.position = 0;
bitmapData.setPixels(rect, pixels); 
```

请记住，这是一个非常基本的代码示例。在您的情况下，您需要对其进行调整并实际使用双倍大小`ByteArray`，因为您也需要存储迭代计数。可以在主循环中优化嵌套循环，并且可以避免大量额外的索引/地址计算：

```
// Note the size * 2 !
// First part of the ByteArray will be used to store the iteration count,
// the second part to draw the pixels.
#if (cpp) pixels.setLength(size * 2);
#else pixels.length = size * 2; #end

Memory.select(pixels);

// First loop storing iteration count
for (iy in 0...height)
{
    for (ix in 0...width)
    {
        // ... do some stuff ...
        Memory.setI32((iy * width + ix) << 2, iteration);
    }
}

// In your runLoop :
for (i in 0...(height * width))
{
    // Get the iteration count
    var pixel:Int = Memory.getI32(i << 2);

    r = pixel + colorModifier;
    g = pixel + colorModifier + r;
    b = pixel + colorModifier + g;

    // Note that we're writing the pixel in the second part of our ByteArray
    Memory.setI32(size + (i << 2), r | g << 8 | b << 16);
}

// Sets the position to the second part of our ByteArray
pixels.position = size;
bitmapData.setPixels(rect, pixels); 
```

就是这样。如果你真的不想在 Flash 目标上使用 Alchemy Opcodes，下一个最快的 blit 像素方法是使用`getVector()`/ `setVector()`from`BitmapData`类。但它真的没有那么快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:57:24.463

阵列本身并不是flash中真正的线性阵列，更像是一张地图。对于每个像素的操作，我可以推荐使用 BitmapData 类的 getVector/setVector api，它可以检索（和分配）图像的矩形区域作为平面像素数据。在这种情况下，您可以通过以下方式访问矢量中的各个像素：

```
pixels[ix + image_width*iy] = <argb32> 
```

此外，与其构造一个中间数组数组，不如直接分配像素更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:11:50.287

尝试使用[ByteArray](http://www.haxenme.org/api/types/nme/utils/ByteArray.html)。我认为在 Flash 和 C++ 中会更快。

# eclipse - java 已启动但返回退出代码 = -805306369

> ID：10157794
> 
> 赞同：34
> 
> 时间：2012-04-14T22:14:54.177
> 
> 标签：eclipse, jakarta-ee, plugins, helios

谁能帮我解决这个错误：

> java 已启动但返回退出代码 = -805306369 C:\Windows\System32\javaw.exe -jar C:\Program Files\Java\eclipse-jee-helios-SR2-win32-x86_64\eclipse\plugins\org.eclipse。 equinox.launcher_1.11.1.R36x_v20101122_1400.jar

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-28T16:20:36.540

刚遇到这个问题，对我来说这是一个损坏的工作区 osgi 缓存。`-clean`解决方案是使用参数运行 eclipse

```
eclipse.exe -clean 
```

一段时间后，需要清理eclipse，弹出工作区选择对话框，我可以再次正常启动eclipse。

该`-clean`参数记录[在 eclipse 帮助中](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-17T13:14:46.967

我的问题是工作区损坏，解决方案来自 Rob 的链接：

[http://spacetech.dk/eclipse-failed-java-was-started-but-returned-exit-code-805306369.html](http://spacetech.dk/eclipse-failed-java-was-started-but-returned-exit-code-805306369.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-06T16:41:45.810

我突然开始收到相同的错误“退出代码= -805306369”。

最终，我查看了 Eclipse 日志`<workspace_directory>/.metadata/.log`并意识到我的源代码控制插件（在我的例子中是 Perforce）无法连接并且 Eclipse 被卡住了。

这是因为我的 Eclipse 依赖于我与 Perforce Windows 客户端的客户端连接，而我的 Perforce 客户端没有连接到服务器。我连接了我的 Perforce 客户端，eclipse 开始正常工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-17T05:43:03.180

当大部分工作区被破坏时，就会发生这种情况......更酷的解决方案是将工作区切换到更安全的位置（新位置）......然后从以前的工作区导入项目......公主仍然可以被保存...... .

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-10T08:09:23.700

对我来说，只需将您的工作区更改为另一个

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-09T13:01:28.017

我项目中的一个类文件已损坏。类文件的名称太长，我无法删除或重命名它，所以我重命名了包含它的文件夹，然后我能够删除项目，这解决了我的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-27T13:05:42.763

当工作区已设置时，我收到此错误。由于无法创建java虚拟机。尝试命令：*java -version*

```
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

我重新启动了我的机器，它解决了我的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-26T23:49:50.517

现在我知道我的工作区已损坏，它解决了我的问题。

1.  转到您的工作区并重命名它。
2.  启动你的eclipse，默认情况下它会创建一个工作区。
3.  转到`File`-> `Switch Workspace`，选择您的原始工作区。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-03-26T15:21:59.440

我无法禁用“自动查找新更新并通知我”。安装/更新页面上没有该选项。自从编写该答案以来，Eclipse 工作台可能已经发生了变化。

但是，在我的旧工作区中使用 -clean 选项运行 eclipse 对我来说是成功的。在 Windows 中执行此操作的方法是首先找到 eclipse.exe 所在的目录。您可以转到开始菜单，然后在“搜索菜单和文件”栏中，键入 eclipse。您应该会在“程序”下看到紫色地球图标弹出。将鼠标悬停在它上面，它会告诉你它所在的目录。

然后...从开始菜单打开“计算机”或其他一些窗口，然后从那里导航到 eclipse 所在的窗口。在显示目录的顶部栏中（不在文本上的位置）单击鼠标。该目录将突出显示。现在输入 cmd。将打开一个黑色命令窗口，您将位于 eclipse 所在的目录中。在命令提示符（鼓声）键入 eclipse.exe -clean

日食将开始。确保它要求转到损坏的工作区，然后单击确定。等待它，很快您就会知道您的工作区是否完好无损。耶！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-04T22:50:50.770

就我而言，它是一台工作笔记本电脑，非常安全 SOE 64 位 Win 7。

*   将 Eclipse MARS 解压缩到“C”驱动器上的文件夹中
*   安装失败并出现 Java 错误代码 -`805306369`
*   在“C”驱动器上为工作区创建了一个单独的文件夹，授予每个人完全控制权并修复它！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-09T16:07:01.777

使用快捷方式打开文件时遇到同样的问题 - Ctrl+Shift+R。我通过禁用“自动更新”解决了这个问题。在 Eclipse (helios) 中禁用自动更新的步骤：Windows >> 首选项 >> 安装/更新 >> 自动更新。禁用“自动查找新更新并通知我”。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-19T02:33:39.063

我是如何设法让我的工作的。我使用了上述解决方案的组合。这个对我有用。

* * *

> 第 1 步：将您的工作区更改为其他名称，例如将其从工作区更改为工作区 1。
> 
> 第 2 步：访问您的 Eclipse 并停止自动更新（前提是您可以在更改工作空间后访问）
> 
> 第 3 步：使用 workspace1 退出 Eclipse
> 
> 第 4 步：通过输入 eclipse.exe -clean 使用以前的工作区启动 eclipse（如果您正在使用其他人，请使用例如 MuleStudio.exe -clean）

* * *

> 总之，使用组合解决方案，例如更改工作空间、停止自动更新和为我清理工作。自己试试。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-22T14:18:37.407

“java was started but returned exit code = -805306369”由 Eclipse 的工作区损坏，我通过以下 4 个步骤解决了我的问题：

1）关闭日食。

2）从任务管理器中杀死adb。

3）启动你的eclipse，默认情况下它将创建一个工作区或从新的工作区开始。

4) 转到文件-> 切换工作区，选择您原来的工作区。

# ios - 创建条款和条件链接

> ID：10157796
> 
> 赞同：-3
> 
> 时间：2012-04-14T22:15:11.533
> 
> 标签：ios

“点击注册即表示您同意我们的条款和条件”

在代码中实现的最简单的选项是使上面的整个行可单击（这会启动显示条款和条件的模式视图）并且“条款和条件”一词带有蓝色下划线。

我们尝试了各种选择。

1）我们创建了一个 UIWebView 并尝试将 html 加载到其中。但是 html 是按原样呈现的。例如：“html 正文.../正文 html”

2）我们试图创建一个带有标签的按钮，但我们无法创建一个无边框按钮。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:40:32.343

我们能够使用 webView 创建格式。我们使用 webView 的委托之一来完成该过程。这是示例代码

```
NSString *html = @"<html><head><title>Terms and Conditions</title></head><body style=\"font-family:verdana;font-size:10px;\"><p>By clicking \"Register\" you are agreeing to our <a href=\"showlicenses://toc\"><b><u><font color=\"blue\">Terms and Conditions.</font></u></b></a></p></body></html>";  
   [termsWOutlet loadHTMLString:html baseURL:[NSURL URLWithString:@"http://www.google.com/message"]];  

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{

   NSLog(@"%s",__FUNCTION__);
   NSURL* u = [request URL];

   if( [[u scheme] isEqualToString:@"showlicenses"] ) {
      NSLog(@"in %s",__FUNCTION__);
      [self performSegueWithIdentifier:@"loadTNC" sender:self];
      return NO; // DO NOT attempt to load URL
   }

   return YES; // if you want to allow the URL to load
} 
```

# computational-geometry - 检查点集三角形细分是否是三角剖分

> ID：10157800
> 
> 赞同：2
> 
> 时间：2012-04-14T22:15:37.843
> 
> 标签：computational-geometry, triangulation, kdtree

我一直在研究[Delaunay 三角剖分](http://en.wikipedia.org/wiki/Delaunay_triangulation)（不是作业），我想到了以下问题：给定`S`平面上的一组点（基数为`n`）和一组三角形`T`（基数应为`n-2`） - 如何确定是否三角形设置`T`形成一个德劳内三角剖分`DT(S)`？

第一个问题是 Delaunay 三角剖分不是唯一的，因此再次为点集重建它并与三角形集进行比较不会给我们答案。此外，最优的 Delaunay 三角剖分算法很难实现（但是，使用像 CGAL 这样的库就可以了）。

假设我们知道如何检查三角形集是否是三角剖分（不一定是 Delaunay）。那么我们应该使用 Delanuay 三角剖分的定义：对于三角剖分中的每个三角形`t`，没有一点 in`S`严格位于 的圆周内`t`。这导致我们采用以下方法：

1.  琐碎的方法。只需迭代`T`，计算圆周并迭代`S`，检查点是否在圆周内。然而，这需要`O(n^2)`时间，这不是非常理想的。
2.  迷人的方法。再次，迭代`T`并计算周长。如果有一点`s`在圆周内，则表示它到圆周中心的距离小于半径。使用最近邻搜索结构`S`，我们将加快我们的算法。例如，简单[的 kd-tree](http://en.wikipedia.org/wiki/K-d_tree)结构将我们引导到`O(n log n)`平均和`O(n sqrt(n))`最坏情况下的算法。
3.  有没有人有更简单的想法？

现在让我们回到检查是否`T`是三角剖分的问题。诸如 的相等性`S`和三角形的顶点集之类的琐碎先决条件的执行速度不会比`O(n log n)`. 剩下的——检查每两个三角形是否`T`在一个共同的面上相交，或者根本不相交。

1.  `T`同样，我们可以通过一遍又一遍地迭代来做到这一点`T`，检查交叉点，但这是`O(n^2)`算法。
2.  让我们想想«三角形`t1`和`t2`相交»是什么意思？如果它们的边相交或者如果一个三角形完全位于另一个三角形中，则它们相交。`O(n log n)`使用[Bentley-Ottmann 算法](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)可以及时解决所有边相交的问题（最坏的情况是`O((n + k) log n)`，其中`k`是交叉点的计数，但我们可以在找到第一个交叉点的那一刻停止算法）。此外，我们没有认识到一个三角形完全包含另一个三角形的情况，但我相信我们可以修改 Bentley-Ottmann 算法以保持三角形穿过扫描线而不是线段，正如我所说，这产生了我们的`O(n log n)`算法。但是，实现起来确实很复杂。
3.  我考虑过迭代算法——让我们保持不相交（或仅通过边相交）三角形的结构（它应该与 kd-tree 非常相似）。然后我们尝试添加下一个三角形`t`：首先检查`t`' 的任何顶点是否已经在其中一个三角形中——然后我们得到了一个交点。否则，添加`t`到结构中。但是，如果我们想要`O(log n)`或`O(sqrt(n))`有时间进行搜索和添加查询，我们必须平衡这个结构的高度，这对于 kd-trees 来说也太难了。

那么，有没有人知道这个问题的任何简单解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:40:35.557

有一个 Delaunay 引理：“如果 S 的三角剖分 K 中的每条边都是局部 Delaunay，则 K 是 S 的 Delaunay 三角剖分”。也许这对您问题第 1 段的情况有所帮助，您可以确定 K 是 S. Dunno 的某种三角剖分，但这种方法的计算复杂性。

# php - PHP 在本地服务器上显示 ISO DVD 映像

> ID：10157804
> 
> 赞同：-4
> 
> 时间：2012-04-14T22:16:05.700
> 
> 标签：php, iso, dvd

有什么方法可以在本地服务器上显示 ISO 映像（来自我刻录的 DVD 电影）。我想在我的任何平板电脑等上从本地服务器观看我的 ISO 映像。

关于最佳方式的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:21:55.440

你处理这个错误。将您的 dvd 转换为 MP4（如果您想在大多数设备上使用，xVid 效果更好）然后托管它们。ISO不会对你有多大好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:22:24.210

我不确定您的目标是什么，但是通过 HTTP 范围和禁用 gzip 压缩（都可以通过`.htaccess`文件实现），您可以制作视频“流式传输”。它与 PHP 并没有真正的关系，除非你想让 PHP 表现得像一个 HTTP 服务器......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:19:20.050

您需要一个可以播放部分下载文件的视频播放应用程序。这与 PHP 无关。

# opencv - 对于尺度不变的特征提取，SURF 和 SIFT 是否有任何快速的替代方案？

> ID：10157806
> 
> 赞同：33
> 
> 时间：2012-04-14T22:16:16.313
> 
> 标签：opencv, computer-vision, feature-detection, feature-extraction

SURF 已获得专利，SIFT 也是如此。ORB 和 Brief 没有专利，但它们的特性不是尺度不变的，严重限制了它们在复杂场景中的有用性。

是否有任何特征提取器可以像 SURF 一样快地提取尺度不变特征，并且没有像 SURF 和 SIFT 那样严格的专利？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-11T09:54:39.050

虽然您已经选择了 BRISK，但您可能会觉得[FREAK](http://infoscience.epfl.ch/record/175537/files/2069.pdf)很有趣。作者声称比 BRISK 和 ORB 有更好的结果。我还应该补充一点，ORB**是**尺度不变的，但在该领域存在一些问题。所以我还是会推荐给别人试试。

[FREAK 源代码](https://github.com/kikohs/freak)与 OpenCV 兼容（合并它们有​​多容易，我不知道），作者正在努力将其提交到 OpenCV 项目。

**编辑：**

[FREAK 现在是 opencv 特征检测器/描述符的一部分。](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#freak)

您[可以在这里阅读更多](https://stackoverflow.com/a/14912160/1085483)关于几个特征检测器/提取器之间的差异，[以及一系列基准](http://computer-vision-talks.com/2012-08-18-a-battle-of-three-descriptors-surf-freak-and-brisk/)，包括 FREAK 和其他流行的基准。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-19T12:01:30.277

FREAK 应该是**最快的缩放和旋转不变描述符提取器**，它是**开源**的，您可以轻松使用它，因为它是在 OpenCV 中实现的。您需要一个使用汉明距离的二进制匹配器，例如 BruteForceMatcher。

Here你有一个如何使用它的[例子](http://fossies.org/dox/OpenCV-2.4.3/freak__demo_8cpp_source.html)，很容易被SIFT描述符替换。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-14T00:10:28.797

我最终使用了[Brisk](http://www.asl.ethz.ch/people/lestefan/personal/BRISK)，这是一个性能与 SURF 相当但在 BSD 许可证下的特征检测器。另外，它有一个非常好的开源 C++ 实现，可以轻松插入 OpenCV FeatureDetector 框架，所以就像在代码中选择使用 Brisk 而不是 SURF 的 2 行代码一样。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-14T22:46:46.620

您可以尝试[多尺度直方图的定向梯度](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6065477&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D6065477)。它不会是完全尺度不变的，但如果您的数据受到一组合理的尺度限制的约束（在实践中通常是这种情况），那么这可能对您有用。

另一种方法，完全取决于您的预期应用程序，将利用[poselets](http://www.eecs.berkeley.edu/~lbourdev/poselets/)，即使它们建立在非尺度不变描述符（如定向梯度的普通直方图或外观模型）之上。如果您的训练数据中的注释包括在不同尺度上用于检测的不同项目的示例，那么在 Poselets 中用于训练的 Procrustes 式距离应该注意很多尺度不变性。如果您的主要应用不是零件的局部检测，这可能并不令人满意。

顺便说一句，我认为 SIFT 和 SURF 能够以这种方式获得专利是相当不幸的，因为它们（至少部分）通过赠款获得了纳税人的资金。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-19T15:35:05.300

你可以试试 KAZE，它应该更快更精确（视频看起来很花哨，但我自己还没有尝试过）。还有一个可用的加速版本。

Pablo F. Alcantarilla、Adrien Bartoli 和 Andrew J. Davison，“ [KAZE Features](http://www.robesafe.com/personal/pablo.alcantarilla/papers/Alcantarilla12eccv.pdf) ”，在欧洲计算机视觉会议 (ECCV) 上。佛罗伦萨*，意大利。2012 年 10 月。

Pablo F. Alcantarilla、Jesús Nuevo 和 Adrien Bartoli，“[非线性尺度空间中加速特征的快速显式扩散](http://www.robesafe.com/personal/pablo.alcantarilla/papers/Alcantarilla13bmvc.pdf)”，英国机器视觉会议 (BMVC)。英国布里斯托尔。2013年九月

源代码、视频等可以在[作者的网站上找到](http://www.robesafe.com/personal/pablo.alcantarilla/publications.html)。

*佛罗伦萨

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-08T08:27:36.460

FREAK 现在包含在 OpenCV 2.4.2 中，您可以轻松使用它:-)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-19T12:22:17.953

通过在地标点周围形成补丁来检测地标点并找到 hog 特征（它不是专利）。

# c# - 使用 API 更新 Google Docs 中的文档？

> ID：10157816
> 
> 赞同：2
> 
> 时间：2012-04-14T22:18:21.367
> 
> 标签：c#, .net, google-docs, google-docs-api

我想更新已经上传的 Google Doc 文件的内容。我正在使用以下代码：

```
DocumentsService service = new DocumentsService("app-v1");
string auth = gLogin2();
service.SetAuthenticationToken(auth);
Stream stream = new MemoryStream(ASCIIEncoding.Default.GetBytes(
   "CONTENTS PLEASE CHANGE"));
DocumentEntry entry = service.Update(new Uri("feedURL"), stream, "text/plain", 
    "nameOfDoc") as DocumentEntry; 
```

对于“feedURL”，我尝试使用所有可能的链接：alternate、self、edit、edit-media 甚至 resumable-edit-media，但我不断收到异常。

另外，我如何阅读此类请求的回复？

我刚开始使用这个 API。早些时候，我在协议级别使用它，因此发送 GET/POST 请求和接收 Web 响应。在这种情况下，我不知道如何获取或读取响应。

更新：

现在我使用的代码是：

```
RequestSettings _settings;
            string DocumentContentType = "text/html";
            _settings = new RequestSettings("Stickies", "EMAIL", "PASSWORD");
            var request = new DocumentsRequest(_settings);

            //var entryToUpdate = doc.DocumentEntry;
            var updatedContent = "new content..."; ;

            var mediaUri = new Uri(string.Format(DocumentsListQuery.mediaUriTemplate, rid));
            Trace.WriteLine(mediaUri);
            var textStream = new MemoryStream(Encoding.UTF8.GetBytes(updatedContent));

            var reqFactory = (GDataRequestFactory)request.Service.RequestFactory;
            reqFactory.CustomHeaders.Add(string.Format("{0}: {1}", GDataRequestFactory.IfMatch, et));
            var oldEtag = et;
            DocumentEntry entry = request.Service.Update(mediaUri, textStream, DocumentContentType, title) as DocumentEntry;
            Debug.WriteLine(string.Format("ETag changed while saving {0}: {1} -> {2}", title, oldEtag,et));
            Trace.WriteLine("reached"); 
```

我得到的异常是：{“远程服务器返回错误：（412）前提条件失败。”}我在`DocumentEntry entry = request.Service.Update(mediaUri, textStream, DocumentContentType, title) as DocumentEntry;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:53:50.443

已解决.. 异常前提条件失败是由于 Etag 不匹配上述更新代码非常适合保存文档。

# meteor - 将记录插入 [app].meteor.com 时出现 404 Not Found 错误

> ID：10157822
> 
> 赞同：1
> 
> 时间：2012-04-14T22:19:24.277
> 
> 标签：meteor

我将应用程序上传到 babble.meteor.com，但尝试从客户端插入记录时，出现以下错误：

```
Messages.insert({name: "lol", text: "hey there"})
"656bffcf-7046-4cce-b460-5441195680ae"
POST http://babble.meteor.com/sockjs/074/ohxs7fj4/xhr_send 404 (Not Found) 
```

该应用程序在本地和我的 Intranet 上运行良好。

这是我定义的代码`Messages`（在客户端和服务器上运行）：

```
Messages = new Meteor.Collection("messages") 
```

编辑：

POST 似乎现在正在执行，但是当我检查服务器端数据库时，实际上并没有插入记录，只是在客户端上更新。因此，当我刷新页面时，我丢失了在客户端上插入的所有消息。这是怎么回事？

编辑2：

看起来这只是 [app].meteor.com 的问题，因为我将代码推送到 Heroku 应用程序并且它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:37:00.840

你的意思是你在 web 开发者控制台上看到这个 POST 错误？这可能意味着您的服务器由于某种原因重新启动，并且您的客户端必须重新连接。这不一定是问题，重新连接到新服务器的情况很少见，但确实会发生。

但是，这可能意味着服务器代码中存在错误并且您的应用程序正在崩溃。使用“meteor logs [app].meteor.com”检查您的日志以检查问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:33:06.433

看起来这是一个 [app].meteor.com 问题。删除和重新部署应用程序工作正常。

```
$ meteor deploy --delete [app].meteor.com
$ meteor deploy app.meteor.com 
```

# php - 您将依赖项放在哪里？

> ID：10157824
> 
> 赞同：1
> 
> 时间：2012-04-14T22:19:59.383
> 
> 标签：php, oop, design-patterns, dependency-injection

如果我使用依赖注入模式来删除依赖项，它们最终会出现在其他地方。

例如，Snippet 1，或者我所说的 Object Maker。

我的意思是你必须在某个地方实例化你的对象......所以当你将依赖关系从一个对象中移出时，你最终会把它放到另一个对象中。

我看到这将我所有的依赖项合并到一个对象中。关键是要减少您的依赖关系，以便它们都驻留在一个（尽可能接近）位置吗？

**片段 1 - 对象制作者**

```
<?php

class ObjectMaker
{
    public function makeSignUp()
    {
        $DatabaseObject = new Database();
        $TextObject = new Text();
        $MessageObject = new Message();

        $SignUpObject = new ControlSignUp();        
        $SignUpObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $SignUpObject;
    }
    public function makeSignIn()
    {
        $DatabaseObject = new Database();
        $TextObject = new Text();
        $MessageObject = new Message();

        $SignInObject = new ControlSignIn();
        $SignInObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $SignInObject;
    }
    public function makeTweet( $DatabaseObject = NULL, $TextObject = NULL, $MessageObject = NULL )
    {
        if( $DatabaseObject == 'small' )
        {
            $DatabaseObject = new Database();
        }
        else if( $DatabaseObject == NULL )
        {
            $DatabaseObject = new Database();
            $TextObject = new Text();
            $MessageObject = new Message();
        }
        $TweetObject = new ControlTweet();        
        $TweetObject->setObjects($DatabaseObject, $TextObject, $MessageObject);
        return $TweetObject;
    }
    public function makeBookmark( $DatabaseObject = NULL, $TextObject = NULL, $MessageObject = NULL )
    {
        if( $DatabaseObject == 'small' )
        {
            $DatabaseObject = new Database();
        }
        else if( $DatabaseObject == NULL )
        {
            $DatabaseObject = new Database();
            $TextObject = new Text();
            $MessageObject = new Message();
        }

        $BookmarkObject = new ControlBookmark();        
        $BookmarkObject->setObjects($DatabaseObject,$TextObject,$MessageObject);
        return $BookmarkObject;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:29:00.087

我个人更愿意在任何有意义的地方实例化对象，并在一个特殊的文档文件中很好地记录依赖关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T22:59:53.907

不，这与巩固您的依赖关系无关。它与使对象更具可测试性有关。

是的，副作用是您的依赖项往往会出现在其他地方，但关键是依赖项不在您正在测试的对象中。

如果您不在目标对象中创建依赖项，那么您可以实例化测试（或伪造或模拟）对象以馈入目标对象。如果对象创建了自己的依赖项，那么这是不可能的。

像这样想。假设您有一个 Car 对象。如果汽车创造了司机，那么其他司机就无法驾驶它。它只能是 All Foo Car，因为您有一个硬编码的驱动程序创建。

现在，假设我们开发了一个机器人来在专门设计的赛道上测试汽车。同样，我们不能把机器人放在驾驶座上，因为你会在那里被硬编码。

当然可测试性只是依赖注入的好处之一，依赖的强制解耦意味着你必须编写更多的模块化代码。如果您使用的是依赖注入框架（Crafty 或类似框架），那么您可以根据需要使依赖项自动实例化自己，这有很多好处，但对于更强大的类型语言来说，这往往更有好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T22:31:10.233

问问自己，“这属于一起吗？”

如果某物是您对象的“一部分”，那么可能是“是”。如果某物是“的属性”，那么是的。

[保持简单](http://en.wikipedia.org/wiki/K.I.S.S):)

我能提供的最佳指南？来自 PHP 手册：

> [http://www.php.net/manual/en/language.oop5.basic.php](http://www.php.net/manual/en/language.oop5.basic.php)
> 
> PHP 类可用于多种用途，但在最基本的层面上，您将使用类来“组织和处理志同道合的数据”。

PS：在您首先需要它的地方创建一个对象。

PPS：“将我所有的依赖项合并到一个对象中”......如果你聚集在一起的对象不一定彼此直接相关......可能是你能做的最糟糕的事情。恕我直言...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T22:42:28.503

> 关键是要减少您的依赖关系，以便它们都驻留在一个（尽可能接近）位置吗？

我想基本上就是这样，是的。这个想法是使应用程序的组件松散耦合。这意味着您可以更轻松地重用组件、交换它们并针对它们进行测试。如果您有一个简单的应用程序，那么在需要的地方实例化对象当然效果很好。但是随着它变得越来越复杂，具有多个嵌套依赖项，您的代码可能会变得紧密耦合，这意味着难以维护、调整和测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T23:23:08.507

引用[维基百科](http://en.wikipedia.org/wiki/Dependency_injection%20Wikipedia)

> 在传统的软件开发中，依赖对象自己决定它将使用哪些具体类。在依赖注入模式中，这个决定被委托给“注入器”，它可以选择在运行时而不是在编译时替换依赖合约接口的不同具体类实现。

DI 导致某些类与**不稳定类**的耦合较少。注入的实例通常是接口的实现。OCP 告诉实现中的更改不应该要求修改依赖于它们的封闭类。

**tl; dr**类 A 仅依赖于*注入*到它的接口 I 的实现更具凝聚力（责任更少）。其他一些类被困在选择、实例化等的责任上，但那个类也更有凝聚力。

# linux - Xkb：如何将键码转换为键符

> ID：10157826
> 
> 赞同：11
> 
> 时间：2012-04-14T22:20:29.807
> 
> 标签：linux, keyboard, x11, keycode

我只是想获取一个 KeyCode 和一个修饰符掩码，并使用 Xkb 扩展名将其转换为 KeySym。我似乎无法弄清楚为什么这不起作用。很明显修饰符不匹配，但我不知道为什么。我什至不知道我是否正确转换了组。

```
#include <stdio.h>
#include <stdlib.h>
#include <X11/X.h>
#include <X11/XKBlib.h>

void check(XkbDescPtr keyboard_map, KeyCode keycode, unsigned int mask) {
    //What the hell is diff between XkbKeyGroupInfo and XkbKeyNumGroups?
    unsigned char info = XkbKeyGroupInfo(keyboard_map, keycode);
    int num_groups = XkbKeyNumGroups(keyboard_map, keycode);

    int key_width = XkbKeyGroupsWidth(keyboard_map, keycode);
    //int num_syms = XkbKeyNumSyms(keyboard_map, keycode);

    //Get the group
    unsigned int group = 0; // What should this default to?
    switch (XkbOutOfRangeGroupAction(info)) {
        case XkbRedirectIntoRange:
            /* If the RedirectIntoRange flag is set, the four least significant 
            * bits of the groups wrap control specify the index of a group to 
            * which all illegal groups correspond. If the specified group is 
            * also out of range, all illegal groups map to Group1.
            */
            printf("XkbRedirectIntoRange\n");
            group = XkbOutOfRangeGroupInfo(info);
            if (group >= num_groups) {
                group = 0;
            }
        break;

        case XkbClampIntoRange:
            /* If the ClampIntoRange flag is set, out-of-range groups correspond 
            * to the nearest legal group. Effective groups larger than the 
            * highest supported group are mapped to the highest supported group; 
            * effective groups less than Group1 are mapped to Group1 . For 
            * example, a key with two groups of symbols uses Group2 type and 
            * symbols if the global effective group is either Group3 or Group4.
            */
            printf("XkbClampIntoRange\n");
            group = num_groups - 1;
        break;

        case XkbWrapIntoRange:
            /* If neither flag is set, group is wrapped into range using integer 
            * modulus. For example, a key with two groups of symbols for which 
            * groups wrap uses Group1 symbols if the global effective group is 
            * Group3 or Group2 symbols if the global effective group is Group4.
            */
            printf("XkbWrapIntoRange\n");
        default:
            printf("Default\n");
            if (num_groups != 0) {
                group %= num_groups;
            }
        break;
    }
    printf("Group Info %d, %d, %d\n", group, num_groups, key_width);
    //printf("Mask Info %d, %d, %d, %d, %d, %d, %d, %d\n", ShiftMask, LockMask, ControlMask, Mod1Mask, Mod2Mask, Mod3Mask, Mod4Mask, Mod5Mask);

    XkbKeyTypePtr key_type = XkbKeyKeyType(keyboard_map, keycode, group);

    KeySym keysym = NoSymbol;
    int i;
    for (i = 0; i < key_type->map_count; i++) {
        if (key_type->map[i].active &&  key_type->map[i].mods.mask == mask) {
            keysym = XkbKeySymEntry(keyboard_map, keycode, i, group);
        }
    }

    //printf("%s\n", XKeysymToString(keysym));
    printf("KeyCode: %d\n", (int) keycode);
    printf("KeySym:  %d\n", (int) keysym);
}

int main(int argc, const char * argv[]) {
    Display * display;

    //Try to attach to the default X11 display.
    display = XOpenDisplay(NULL);
    if(display == NULL) {
        printf("Error: Could not open display!\n");
        return EXIT_FAILURE;
    }

    //Get the map
    XkbDescPtr keyboard_map = XkbGetMap(display, XkbAllClientInfoMask, XkbUseCoreKbd);

    KeyCode keycode = 56; // b
    check(keyboard_map, keycode, ShiftMask | LockMask | ControlMask);

    //Close the connection to the selected X11 display.
    XCloseDisplay(display);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T17:44:03.403

经过大量的反复试验，我终于能够弄清楚。XKeycodeToKeysym 显然已损坏，并且未为扩展索引定义索引值计算。

```
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <X11/X.h>
#include <X11/XKBlib.h>

KeySym KeyCodeToKeySym(Display * display, KeyCode keycode, unsigned int event_mask) {
    KeySym keysym = NoSymbol;

    //Get the map
    XkbDescPtr keyboard_map = XkbGetMap(display, XkbAllClientInfoMask, XkbUseCoreKbd);
    if (keyboard_map) {
        //What is diff between XkbKeyGroupInfo and XkbKeyNumGroups?
        unsigned char info = XkbKeyGroupInfo(keyboard_map, keycode);
        unsigned int num_groups = XkbKeyNumGroups(keyboard_map, keycode);

        //Get the group
        unsigned int group = 0x00;
        switch (XkbOutOfRangeGroupAction(info)) {
            case XkbRedirectIntoRange:
                /* If the RedirectIntoRange flag is set, the four least significant
                 * bits of the groups wrap control specify the index of a group to
                 * which all illegal groups correspond. If the specified group is
                 * also out of range, all illegal groups map to Group1.
                 */
                group = XkbOutOfRangeGroupInfo(info);
                if (group >= num_groups) {
                    group = 0;
                }
            break;

            case XkbClampIntoRange:
                /* If the ClampIntoRange flag is set, out-of-range groups correspond
                 * to the nearest legal group. Effective groups larger than the
                 * highest supported group are mapped to the highest supported group;
                 * effective groups less than Group1 are mapped to Group1 . For
                 * example, a key with two groups of symbols uses Group2 type and
                 * symbols if the global effective group is either Group3 or Group4.
                 */
                group = num_groups - 1;
            break;

            case XkbWrapIntoRange:
                /* If neither flag is set, group is wrapped into range using integer
                 * modulus. For example, a key with two groups of symbols for which
                 * groups wrap uses Group1 symbols if the global effective group is
                 * Group3 or Group2 symbols if the global effective group is Group4.
                 */
            default:
                if (num_groups != 0) {
                    group %= num_groups;
                }
            break;
        }

        XkbKeyTypePtr key_type = XkbKeyKeyType(keyboard_map, keycode, group);
        unsigned int active_mods = event_mask & key_type->mods.mask;

        int i, level = 0;
        for (i = 0; i < key_type->map_count; i++) {
            if (key_type->map[i].active && key_type->map[i].mods.mask == active_mods) {
                level = key_type->map[i].level;
            }
        }

        keysym = XkbKeySymEntry(keyboard_map, keycode, level, group);
        XkbFreeClientMap(keyboard_map, XkbAllClientInfoMask, true);
    }

    return keysym;
}

int main(int argc, const char * argv[]) {
    Display * display;

    //Try to attach to the default X11 display.
    display = XOpenDisplay(NULL);
    if(display == NULL) {
        printf("Error: Could not open display!\n");
        return EXIT_FAILURE;
    }

    KeyCode keycode = 56; // b
    unsigned int event_mask = ShiftMask | LockMask;
    KeySym keysym = KeyCodeToKeySym(display, keycode, event_mask);

    printf("KeySym: %s\n", XKeysymToString(keysym));

    //Close the connection to the selected X11 display.
    XCloseDisplay(display);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:21:00.930

从手册页`XKeycodeToKeysym`：

```
 The XKeycodeToKeysym function uses internal Xlib tables and returns the
   KeySym defined for the specified KeyCode and the element of the KeyCode
   vector.  If no symbol is defined, XKeycodeToKeysym returns NoSymbol.
   XKeycodeToKeysym predates the XKB extension. If you want to lookup a
   KeySym while using XKB you have to use XkbKeycodeToKeysym. 
```

我在您的示例代码中看不到这一点。

阅读完整的手册页以获取更多信息。

# ruby - Ruby：nil:NilClass 的未定义方法“<<”

> ID：10157827
> 
> 赞同：0
> 
> 时间：2012-04-14T22:20:43.170
> 
> 标签：ruby, xml, nokogiri, null, xml-nil

我有一个 CSV，我喜欢在上面保存我所有的哈希值。我正在使用 nokogiri sax 解析 xml 文档，然后将其保存到 CSV。

它解析并保存第一个 xml 文件，但是当开始解析第二个文件时，它停止并且我得到的错误是：

**错误：** `NoMethodError: undefined method` <<' for nil:NilClass`

**@infodata[:titles] << @content 中发生 nil 错误**

**萨克斯解析器：**

```
require 'rubygems'
require 'nokogiri'
require 'csv'

class MyDocument < Nokogiri::XML::SAX::Document

  HEADERS = [ :titles, :identifier, :typeOfLevel, :typeOfResponsibleBody, 
              :type, :exact, :degree, :academic, :code, :text ]

  def initialize
     @infodata = {}
     @infodata[:titles] = Array.new([])
  end

  def start_element(name, attrs)
    @attrs = attrs
    @content = ''
  end
  def end_element(name)
    if name == 'title'
      Hash[@attrs]["xml:lang"]
      @infodata[:titles] << @content
      @content = nil
    end
    if name == 'identifier'
       @infodata[:identifier] = @content
       @content = nil
    end
    if name == 'typeOfLevel'
       @infodata[:typeOfLevel] = @content
       @content = nil
    end
    if name == 'typeOfResponsibleBody'
       @infodata[:typeOfResponsibleBody] = @content
       @content = nil
    end
    if name == 'type'
       @infodata[:type] = @content
       @content = nil
    end
    if name == 'exact'     
       @infodata[:exact] = @content
       @content = nil
    end
    if name == 'degree'
       @infodata[:degree] = @content
       @content = nil
    end
    if name == 'academic'
       @infodata[:academic] = @content
       @content = nil
    end
    if name == 'code'
       Hash[@attrs]['source="vhs"']
       @infodata[:code] = @content 
       @content = nil
    end
    if name == 'ct:text'
       @infodata[:beskrivning] = @content
       @content = nil
    end 
  end
  def characters(string)
    @content << string if @content
  end
  def cdata_block(string)
    characters(string)
  end
  def end_document
    File.open("infodata.csv", "ab") do |f|
      csv = CSV.generate_line(HEADERS.map {|h| @infodata[h] })
      csv << "\n"
      f.write(csv)
    end
  end
end 
```

**为存储在文件夹中的每个文件（47.000xml 文件）创建新对象：**

```
parser = Nokogiri::XML::SAX::Parser.new(MyDocument.new)
counter = 0

Dir.glob('/Users/macbookpro/Desktop/sax/info_xml/*.xml') do |item|
  parser.parse(File.open(item, 'rb'))
  counter += 1
  puts "Writing file nr: #{counter}"
end 
```

**3个用于尝试代码的xml文件：https:** [//gist.github.com/2378898](https://gist.github.com/2378898) https://gist.github.com/2378901 [https://gist.github.com/2378904](https://gist.github.com/2378904)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:26:53.187

你正在这样做：

```
csv = CSV.generate_line(HEADERS.map {|h| @infodata[h] })
csv << "\n" 
```

如果由于某种原因`CSV.generate_line(HEADERS.map {|h| @infodata[h] })`返回**nil**，您将尝试对未定义的 nil 对象使用 << 方法。

您可能需要添加一些条件以避免将“\n”添加到**csv**（如果它为 nil）。

# wordpress - Wordpress 管理员在本地开发环境中无响应

> ID：10157828
> 
> 赞同：2
> 
> 时间：2012-04-14T22:20:47.277
> 
> 标签：wordpress, performance, localhost, mamp

我的本地开发环境由 MAMP、Chrome 和 Firefox 组成。在管理员的某些地方，我的任何 wordpress 安装都是无响应的，即使是在没有启用插件或主题的全新安装时也是如此。

我的意思是，一旦我单击外观-> 菜单下的“保存菜单”之类的按钮，或者当我尝试向菜单添加三个页面时，就会触发一个请求而没有响应。一个是 ajax 请求（即添加到菜单按钮），另一个只是普通的发布请求（保存菜单），这两个操作都没有响应。

我试过了

*   升级 MAMP
*   在 php.ini 中增加我的 memory_limit

当然，我也疯狂地在互联网上搜索有类似问题的人，但无济于事。

有人有/有类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:34:13.750

事实证明，这与 OSX 上的软件包弄得太多有关，而与 php apache 或 wordpress 无关。它的行为很奇怪。

# python - 如何编写将在每个页面上使用的模板，然后包含子模板？

> ID：10157829
> 
> 赞同：0
> 
> 时间：2012-04-14T22:20:49.183
> 
> 标签：python, django, templates, themes

我遵循了 Django“第一个应用程序”教程，现在我想知道如何编写整个站点将使用的模板。我可以为每个视图编写模板，但是如何编写一个将出现在每个页面上的模板，然后在“内容块”中包含“子模板”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:26:58.003

请参阅 Django 模板文档的[模板继承](https://docs.djangoproject.com/en/1.3/topics/templates/#template-inheritance)部分。

基本上，您创建一个作为“基础”的模板：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <link rel="stylesheet" href="style.css" />
    <title>{% block title %}My amazing site{% endblock %}</title>
</head>

<body>
    <div id="sidebar">
        {% block sidebar %}
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/blog/">Blog</a></li>
        </ul>
        {% endblock %}
    </div>

    <div id="content">
        {% block content %}{% endblock %}
    </div>
</body>
</html> 
```

并将其保存为（例如）“base.html”在您的模板目录中，然后每个特定的页面模板如下所示：

```
{% extends "base.html" %}

{% block title %}My amazing blog{% endblock %}

{% block content %}
{% for entry in blog_entries %}
    <h2>{{ entry.title }}</h2>
    <p>{{ entry.body }}</p>
{% endfor %}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:27:27.107

长话短说，您应该编写一个基本模板，然后扩展此模板。这称为模板继承，并[在此处进行了很好的解释](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)

# html - div 在 chrome 和 safari 中没有正确定位

> ID：10157833
> 
> 赞同：0
> 
> 时间：2012-04-14T22:21:41.983
> 
> 标签：html, css

我有这个页面...http://thornwoodfinehomes.com/whatsNew.php，它在 Firefox 和 IE 7,8 & 9 中看起来不错，但在 Safari 和 Google Chrome 中却没有。

这是HTML

```
<div class="contentAreaAvailable">
<div class="content">
<div class="contentText">
Some Text
<img src="pics/whatsNew1.jpg" width="407" height="247" border="0" />
</div><!--contentText-->

<div class="rightContent">
<img src="pics/whatsNew2.jpg" width="332" border="0" />
<br /><br />
<img src="pics/whatsNew3.jpg" width="332" border="0" />
</div><!--rightContent-->

</div><!--content-->
<div style="text-align:center; width:100%; float:left; padding-top:15px; font-size:26px;">
<stong><em>Coming soon, some exciting opportunities in Roseland Burlington.</em></stong>
</div>

</div><!--contentAreaAvailable--> 
```

这是CSS

```
.contentAreaAvailable{
    background:#000;
    padding:50px;
    border:1px solid #FFF;
    width:912px;
    height:730px;
    float:left;
}

.content{
    padding-bottom:4px;
}

.contentAvailable{
    /*padding:20px 0 0 0;*/
    width:566px;
    font-size:22px;
    float:left;
    padding-bottom:10px;
    margin:10px 0 0 0;
}

.rightContentAvailable{
    float:right;
} 
```

我不知道为什么它在 chrome 和 safari 中这样做，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:30:11.347

我不确定你是如何设置宽度的，但左 div *contentAvailable*似乎有点太大了。当我将它从 566px 调整到 500px 时，右侧 div *rightContentAvailable*向上滑动，布局看起来很正常。（这是在 Chrome 中。）

此外，使用 Chrome 中的开发人员工具是解决布局问题的好方法。

# c - 架构 x86_64 的未定义符号：（Mac OS X 10.7）

> ID：10157841
> 
> 赞同：3
> 
> 时间：2012-04-14T22:22:39.637
> 
> 标签：c, makefile, compiler-errors

我正在为我的 CS 课程制作 MP。我们的计算机实验室在 Linux 操作系统下工作，但我尝试在我的家用计算机 (Mac OS X) 上编译代码。我收到以下错误：

```
Undefined symbols for architecture x86_64:
"_tdestroy", referenced from:
_dictionary_destroy in libdictionary.o
_dictionary_destroy_free in libdictionary.o
ld: symbol(s) not found for architecture x86_64 
```

我尝试在网上寻找解决方案，但没有成功。我们在 Makefile 中使用以下宏：

```
CC = gcc
INC = -I.
FLAGS = -g -W -Wall
LIBS = -lpthread 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:29:09.767

从[tdestroy](http://www.kernel.org/doc/man-pages/online/pages/man3/tsearch.3.html)的 GNU 手册页：

```
SVr4, POSIX.1-2001\. The function tdestroy() is a GNU extension 
```

这意味着此功能在 OS X 上不可用

编辑：把这个放在包括之后：

```
#ifndef _GNU_SOURCE
void tdestroy(void *root, void (*free_node)(void *nodep)) { }
#endif 
```

您可以尝试使用 twalk/tdelete/free 来实现 tdestroy - 这应该很难做到，但将其留空也应该可以工作（但它会在 OSX 上造成内存泄漏）。

编辑 2：添加到手册页的链接（10x 到 Cameron）

# xcode - xcode将折叠区域打印为折叠

> ID：10157846
> 
> 赞同：1
> 
> 时间：2012-04-14T22:23:56.417
> 
> 标签：xcode, printing, xcode4.3

xcode中有没有办法打印它，以便在编辑器中折叠的项目打印为折叠？我基本上想要文件中的方法摘要。它实际上是javascript而不是objective-c。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:41:00.547

对于较旧的 XCode 版本，答案是这样的：

进入“打印...”，然后选择**Show Details**。在 Xcode 选项“Printing”下有一个名为**Expand folds**的复选框。

![展开折叠](../Images/5c281ed5a49fc362e430cf01e7d5a955.png)

对于 XCode 10，打印选项`expand folds`已被删除。

# delphi - DataSnap XE2，与同一客户端中的第二个连接断开连接

> ID：10157849
> 
> 赞同：1
> 
> 时间：2012-04-14T22:24:13.620
> 
> 标签：delphi, delphi-xe2, datasnap, c++builder-xe2

**您好：这是关于 Datasnap XE2 Tcp 传输的一个重要问题**

我有一个老问题，我之前在这里问过，但没有回复

DataSnap XE2，与同一客户端中的第二个连接断开连接：

简单的 Datasnap 服务器，简单的客户端，（只需调用反向方法），几秒钟后服务器销毁一个或所有 servermethods 类，datasnapserver 是 tcp 协议，生命周期 = 会话，有状态的服务器。

我在另一台机器和另一个操作系统上测试相同的二进制 exe，我注意到这些：

1-在通过 WiFi（带/不带 dhcp）连接到路由器的计算机上运行服务器时出现同样的问题，所有操作系统（server2003、Win7、Winxp）都会出现同样的问题

2-在虚拟机（所有操作系统）上运行同一服务器时完全没有问题，我使用 Oracle Virtual Box，**为什么！**

3-在服务器实现中，我将 TCP 传输更改为 http 传输，那么我完全没有问题**！**

4-我测试并尝试了所有可能的事情（网络配置，重新格式化，新鲜操作系统-所有Windows版本-）tcp服务器传输问题**仍然存在**

5-在两个连接中多次调用客户端方法后（20 秒 -2 分钟）后发生。

6-我制作并测试了新的 tcp 服务器（不是 datasnap）并且工作正常，**但是 DataSnapXE2 TCP 服务器出现了这个问题**

有什么事情要做吗，我只需要知道为什么，我需要期望来测试，我尝试了几乎所有可能的事情

我使用 C++Builder XE2 ，没有更新，所有可用的更新都没有关于这个问题我也在 Delphi XE2 中重建，smae 问题

有没有大神知道**原因**的，求指教，**求回复**

**注意：DataSnap 2010，相同的代码，工作正常！！**

**感谢您提前回复**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:50:00.213

XE2 中的客户端数据集确实存在一些问题，所有以下问题：

1.  Socket Server (scktsrvr) 由于来自 .data 或 olevariant 的数据过多而终止。

2.  XE2 中无缘无故的灾难性故障。相同的代码在 D2010 中有效，在 XE2 中根本无效

3.  您将无法将现有的 DATASNAP 从 D2010 或 XE 移动到 XE2。即使您从头开始完全重写，您也会遇到问题。

新 Datasnap 或旧 Datasnap 在移动或等到 XE2 中的错误解决之前最好三思而后行。

# jquery - 无法从 JSON API 获取结果

> ID：10157853
> 
> 赞同：0
> 
> 时间：2012-04-14T22:24:56.250
> 
> 标签：jquery, json, api

我正在尝试使用来自 untappd.com 的 API。它以我不熟悉的 JSON 格式返回结果，我对 XML 做了更多的工作。

当我查看 Chrome 中的网络选项卡时，它说请求已被取消，而且错误是：

> Access-Control-Allow-Origin 不允许。

我的代码如下所示：

```
$('button').click(function(){
    query=$("#query").val();

    //Add the seearch term to the base URL and ask for JSON back
    $.getJSON(url+query,function(json){
        alert(url+query);
        //loop through results
        $.each(json.results,function(i,beer){
           $("#results").append('<p> '+ beer.beer_name + '</p>');
        });
    });
}); 
```

});

编辑：

使用代理是有道理的，但是当我尝试时，我没有得到任何打印回来。这是我所做的，我可能格式错误，

```
#!/usr/bin/perl
use CGI ":standard";
use strict;
use LWP::UserAgent;
use HTTP::Request;
use HTTP::Response;

print "Content-type: json\n\n";

my $URL = "http://api.untappd.com/v3/user_distinct?key=KEY_TAKEN_OUT&user=searayman";

my $contents = get($URL);
print $contents; 
```

直接从浏览器调用时的 JSON 输出：

```
{"http_code":200,"returned_results":25,"next_page":"http:\/\/api.untappd.com\/v3\/user_distinct?user=searayman&offset=25","results":[{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"17568","brewery_id":"2583","checkin_id":"6708578","beer_type":"Belgian Strong Dark Ale","beer_name":"Mad Elf","brewery_name":"Tr\u00f6egs Brewing Company","created_at":"Sat, 14 Apr 2012 01:35:40 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6708578","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-troegsMadElf.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"5607","brewery_id":"940","checkin_id":"6706270","beer_type":"American Stout","beer_name":"Oak Barrel Stout","brewery_name":"Old Dominion Brewing Co.","created_at":"Sat, 14 Apr 2012 01:11:30 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6706270","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-OakBarrelStout_5607.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"3757","brewery_id":"2583","checkin_id":"6705236","beer_type":"Imperial \/ Double Red Ale","beer_name":"Nugget Nectar","brewery_name":"Tr\u00f6egs Brewing Company","created_at":"Sat, 14 Apr 2012 00:59:59 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6705236","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-troegNuggetNectar.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"13013","brewery_id":"24","checkin_id":"6547244","beer_type":"Belgian Dubbel","beer_name":"Dubbel","brewery_name":"Allagash Brewing Company","created_at":"Sun, 08 Apr 2012 03:12:14 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6547244","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-Dubbel_13013.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"31961","brewery_id":"2583","checkin_id":"6547021","beer_type":"Doppelbock ","beer_name":"Troegenator Doublebock","brewery_name":"Tr\u00f6egs Brewing Company","created_at":"Sun, 08 Apr 2012 03:09:02 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6547021","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-troegTroegenator.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"18099","brewery_id":"1204","checkin_id":"6167988","beer_type":"American Strong Ale","beer_name":"Arrogant Bastard Ale","brewery_name":"Stone Brewing Co.","created_at":"Tue, 27 Mar 2012 15:40:11 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6167988","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-arrogantBastardAle.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"31284","brewery_id":"2583","checkin_id":"6167981","beer_type":"Hefeweizen","beer_name":"DreamWeaver Wheat","brewery_name":"Tr\u00f6egs Brewing Company","created_at":"Tue, 27 Mar 2012 15:37:49 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/6167981","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-troegsDreamweaver.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"8596","brewery_id":"507","checkin_id":"5879899","beer_type":"American IPA","beer_name":"Misery Bay IPA","brewery_name":"Erie Brewing Co.","created_at":"Sat, 17 Mar 2012 21:32:46 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5879899","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-MiseryBayIPA_8596.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"17686","brewery_id":"4719","checkin_id":"5775347","beer_type":"Belgian Strong Dark Ale","beer_name":"La Torpille","brewery_name":"BFM (Brasserie des Franches-Montagnes)","created_at":"Thu, 15 Mar 2012 00:52:46 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5775347","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/temp\/badge-beer-default.png"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"5672","brewery_id":"1062","checkin_id":"5483144","beer_type":"American Barleywine","beer_name":"The Vermonster","brewery_name":"Rock Art Brewery","created_at":"Sun, 04 Mar 2012 02:57:45 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5483144","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/temp\/badge-beer-default.png"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"95236","brewery_id":"609","checkin_id":"5481547","beer_type":"Belgian Pale Ale","beer_name":"Rayon Vert","brewery_name":"Green Flash Brewing Co.","created_at":"Sun, 04 Mar 2012 02:38:33 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5481547","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-RayonVert_95236.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"10383","brewery_id":"459","checkin_id":"5479437","beer_type":"American Pale Wheat Ale","beer_name":"Ta Henket","brewery_name":"Dogfish Head Craft Brewery","created_at":"Sun, 04 Mar 2012 02:13:34 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5479437","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-TaHenket_10383.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"14098","brewery_id":"1490","checkin_id":"5458703","beer_type":"American IPA","beer_name":"Alimony Ale","brewery_name":"Buffalo Bill's Brewery (California)","created_at":"Sat, 03 Mar 2012 21:18:34 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5458703","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-AlimonyAle_14098.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"9806","brewery_id":"1628","checkin_id":"5457154","beer_type":"Imperial \/ Double IPA","beer_name":"Imperial IPA","brewery_name":"Mendocino Brewing Company","created_at":"Sat, 03 Mar 2012 20:48:08 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5457154","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-ImperialIPA_9806.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"6373","brewery_id":"609","checkin_id":"5403271","beer_type":"American IPA","beer_name":"West Coast IPA","brewery_name":"Green Flash Brewing Co.","created_at":"Fri, 02 Mar 2012 03:43:52 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5403271","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-WestCoastIPA_6373.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"21637","brewery_id":"24","checkin_id":"5400942","beer_type":"Belgian Strong Pale Ale","beer_name":"Victoria Ale","brewery_name":"Allagash Brewing Company","created_at":"Fri, 02 Mar 2012 02:55:55 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/5400942","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/temp\/badge-beer-default.png"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"1382","brewery_id":"1204","checkin_id":"4060691","beer_type":"Imperial \/ Double IPA","beer_name":"Stone Ruination IPA","brewery_name":"Stone Brewing Co.","created_at":"Sun, 08 Jan 2012 15:33:19 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/4060691","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-StoneRuinationIPA.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"4173","brewery_id":"4565","checkin_id":"4060682","beer_type":"American Amber \/ Red Ale","beer_name":"American Amber Ale","brewery_name":"Rogue Ales","created_at":"Sun, 08 Jan 2012 15:31:22 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/4060682","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-rogueAmericanAmberAle.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"80806","brewery_id":"459","checkin_id":"3986144","beer_type":"Belgian Strong Pale Ale","beer_name":"Pearl Jam Twenty Faithfull Ale","brewery_name":"Dogfish Head Craft Brewery","created_at":"Fri, 06 Jan 2012 00:30:05 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3986144","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-PearlJamTwentyFaithfullAle_80806.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"6392","brewery_id":"360","checkin_id":"3931927","beer_type":"Vienna Lager","beer_name":"Dos Equis Ambar","brewery_name":"Cervecer\u00eda Cuauht\u00e9moc Moctezuma","created_at":"Mon, 02 Jan 2012 05:29:30 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3931927","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-CerveceriaDosEquisAmber.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"1553","brewery_id":"94","checkin_id":"3807056","beer_type":"American IPA","beer_name":"Racer 5","brewery_name":"Bear Republic Brewing Co.","created_at":"Thu, 29 Dec 2011 15:28:15 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3807056","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-BearRepublicRacer5.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"11430","brewery_id":"4586","checkin_id":"3660723","beer_type":"Winter Ale","beer_name":"Old Man Winter Ale","brewery_name":"Southern Tier Brewing Company","created_at":"Fri, 23 Dec 2011 19:53:29 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3660723","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-southernTierOldMan.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"6284","brewery_id":"1142","checkin_id":"3606330","beer_type":"American Pale Ale","beer_name":"Pale Ale","brewery_name":"Sierra Nevada Brewing Co.","created_at":"Tue, 20 Dec 2011 22:52:02 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3606330","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-PaleAle_6284.jpeg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"59162","brewery_id":"459","checkin_id":"3596239","beer_type":"Imperial \/ Double IPA","beer_name":"120 Minute IPA (2011)","brewery_name":"Dogfish Head Craft Brewery","created_at":"Tue, 20 Dec 2011 01:30:25 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3596239","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-dfh120minuteIPA.jpg"},{"user":{"uid":"23305","user_name":"searayman","first_name":"Mike","last_name":"J.","user_avatar":"http:\/\/gravatar.com\/avatar.php?gravatar_id=cc0d3298f9b2754988e95cca7dceea94&amp;rating=X&amp;size=80&amp;default=https:\/\/untappd.s3.amazonaws.com\/site\/assets\/images\/default_avatar.jpg","location":"Annapolis, MD","bio":"","is_friends":null,"url":""},"beer_id":"25796","brewery_id":"765","checkin_id":"3553391","beer_type":"American Pale Wheat Ale","beer_name":"A Little Sumpin' Sumpin' Ale","brewery_name":"Lagunitas Brewing Company","created_at":"Sun, 18 Dec 2011 00:10:35 +0000","checkin_link":"http:\/\/untappd.com\/user\/searayman\/checkin\/3553391","beer_stamp":"https:\/\/untappd.s3.amazonaws.com\/site\/beer_logos\/beer-lagunitasLittleSumpinSumpin.jpg"}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:10:51.463

我叫 Greg，是 Untappd 的联合创始人之一。我们目前不支持从 JSON 返回结果，因为我们只允许来自域的[同源](http://en.wikipedia.org/wiki/Same_origin_policy)访问。您可以使用 PHP、Ruby 等服务器端语言来抓取数据。

我们的下一版本 API 将允许此功能。抱紧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:29:29.843

Ajax 请求`getJSON`（`GET`将结果解释为 JSON）受[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)的限制。

如果 untapped.com 支持[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)，您可能会得到更好的结果，因为 JSON-P 根本不是 ajax 请求，它是一个脚本包含，因此不受 SOP 约束。jQuery 在客户端支持 JSON-P，但服务器端也必须支持它。

该领域的另一项技术是[CORS](http://www.w3.org/TR/access-control/)，但除非您使用的是 IE9 及更早版本，否则如果服务器支持 CORS 并且您使用的是现代浏览器，它就会正常工作，所以我猜他们不允许跨来自您的页面/所有页面的原始请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:29:22.633

您正在尝试执行该站点的同源策略不允许的跨域请求。您需要以您使用的任何服务器端语言对其进行代理，或者使用 JSON-P（如果可用）。（我会检查，但我没有达到法定饮酒年龄。不过，它应该在 API 页面上直接提及。）

# java - 在 Hibernate 中创建 SQLQuery

> ID：10157855
> 
> 赞同：0
> 
> 时间：2012-04-14T22:25:27.520
> 
> 标签：java, sql-server, hibernate

我有以下代码：

```
String SQL_QUERY ="Select abstractDesc from article";
Query query = session.createSQLQuery(SQL_QUERY);
Object [] amount = (Object []) query.uniqueResult(); 
out.println("mean amount: " + amount[0]); 
```

但我收到以下错误：

> Hibernate：从文章查询中选择 abstractDesc 没有返回唯一结果：10

如何解决此问题以执行查询并正确打印结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:32:48.093

当您使用`uniqueResult()`时，您是在告诉 Hibernate 您只需要一个值。

检查您的数据库或替换`uniqueResult()`为`[list()]`[1](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Query.html#list%28%29)以查看您返回的内容。

# java - 在表中保留最新的 n 个条目

> ID：10157860
> 
> 赞同：2
> 
> 时间：2012-04-14T22:26:58.380
> 
> 标签：java, android, sql, sqlite

我有一个 sqlite 数据库（在 android 上），我想在其中存储一些数据的最新 N 个条目。

表的主键是日期字段。基本上每当我在达到阈值后插入一些行时，我都想从表中删除最旧的条目。

有什么特别聪明/好的方法可以做到这一点吗？请注意，我总是在每次插入后检查不变量（nr rows <= THRESHOLD），因此我们无需处理任何事情，只需删除最旧的条目。

我打算做的基本上是：

1.  插入数据
2.  如果表的计数（*）<= THRESHOLD：转到 4
3.  DELETE FROM table WHERE date == (SELECT date from table order by date ASC LIMIT 1);
4.  完毕

注意我使用的是 ORMlite，但由于不涉及用户数据，我可以只使用原始 SQL，所以应该没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:35:22.373

```
DELETE FROM table WHERE date = (SELECT MAX(date) from table LIMIT 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:48:21.127

当添加新行并且行数超过您的阈值时，您可以使用触发器删除最旧的行。

行数可以保存在单独的会计表中，以避免每次插入时都有 COUNT。

这是一个完整的例子：

```
create table bookkeepings (bk_name text primary key, bk_value integer not null);

insert or replace into bookkeepings values ('Max Results', 50);
insert or replace into bookkeepings values ('Qty Results', 0);

create table results
  (r_timestamp text primary key default (datetime(current_timestamp)),
   result text);

create trigger results_limit_trigger before insert on results"
  for each row"
  when (select bk_value from bookkeepings where bk_name = 'Qty Results')
    >= (select bk_value from bookkeepings where bk_name = 'Max Results')
  begin
    delete from results
      where r_timestamp = (select r_timestamp from results order by r_timestamp limit 1);
  end;

create trigger results_count_insert_trigger after insert on results
  for each row
  begin
    update bookkeepings set bk_value = bk_value + 1 where bk_name = 'Qty Results';
  end;

create trigger results_count_delete_trigger after delete on results
  for each row
  begin
    update bookkeepings set bk_value = bk_value - 1 where bk_name = 'Qty Results';
  end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T23:01:23.490

这个怎么样？

```
-- keep the last N records by expiration date
declare @expDate datetime

set @expDate = (select top 100 max(dt) from table order by dt asc);
delete from table where dt > @expDate 
```

# .htaccess - 重定向任何包含 /foo/ 的 url

> ID：10157861
> 
> 赞同：0
> 
> 时间：2012-04-14T22:27:15.580
> 
> 标签：.htaccess, redirect

我正在尝试使用包含给定 /directory/ 的 .htaccess/Apache 将一系列大约 400 个 url 重定向到特定位置。

这里的问题是我的站点正在接收对托管在我们服务器 ip 上的旧站点的请求。我试过手动重定向网址，但音量太大了。

我已经搜索过，但只能找到重定向查询字符串或文件的示例

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:26:49.940

好的，如果所有链接都在那里有相同的目录...示例 store/funstuff/blahblah.php

funstuff 是您要查找的目录，然后您可以修改您的 .htaccess 文件链接此

```
 Options +FollowSymlinks
 Options -Multiviews
 RewriteEngine On
 RewriteCond %{REQUEST_URI} funstuff
 RewriteRule . http://www.gohere.com/ 
```

然后，如果您需要传递更多 URL 信息，您可以像这样执行最后一行：

```
 RewriteRule ^(.*)$ http://www.gohere.com/1$ 
```

这应该让你开始......你可能需要稍微调整一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:34:46.403

您使用什么语言处理重定向？

您可能需要使用搜索给定 /directory/ 的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T22:36:15.443

如果我正确理解了您的问题并且您正在使用 Apache；[RedirectMatch](http://httpd.apache.org/docs/2.4/mod/mod_alias.html#redirectmatch)应该做你想做的事。

它接受正则表达式进行匹配，然后可以重定向到您选择的位置。

# android - 在 Android 上存储大量小网页

> ID：10157862
> 
> 赞同：0
> 
> 时间：2012-04-14T22:27:16.427
> 
> 标签：android

我正在开发一个使用大约 150 个小 HTML 页面（最多 25-30kb，WebView 积极使用）的应用程序。

我的问题是如何在 Android 设备上保存此类数据？

也许是 XML 或 SQLite……

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:30:59.793

将所有页面放在**Assets**文件夹中。它们将打包在 apk 中，并按如下方式访问它们：

```
webview.loadUrl("file:///android_asset/your_html_page.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:30:22.223

您可以在运行时将它们写入 sdcard 中的特定目录（如果存在），并在需要时从其中加载它们......

# jquery - jquery validate 与 jquery 工具冲突

> ID：10157868
> 
> 赞同：0
> 
> 时间：2012-04-14T22:28:59.220
> 
> 标签：jquery, validation, jquery-validate, jquery-tools

我使用 jquery validate 来验证表单并提交处理。一切正常，我对表格很满意。

我决定将 jquery 工具添加到表单中以使用 dateinput 功能。我可以拿到日历并且工作得很好。

但是，我没有设置任何规则来验证名为“mydate”的日期文本框，但是当我选择将来的任何日期时，它会立即出现一个无效的日期，validate 正在做一些事情来检查日期并且不允许未来的日期。

我从我的页面中删除了验证脚本，并且日期输入按预期工作。

所以验证中有一些自动的东西。如何禁用此输入框的验证（即使我没有设置任何规则）或如何解决此问题

谢谢

你好

该元素的类是“日期”，我在发布问题之前将其重命名为“mydate”，因为我认为 validate 将其作为日期但仍然被抓住。

我现在已经采取了放弃 jquery 工具并使用用户界面的方法。到目前为止所有工作都需要改变方向

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:34:03.710

这是 jquery validate 将自动附加 valiation 的类。避免使用这些类名以避免自动规则。

```
classRuleSettings: {
    required: {required: true},
    email: {email: true},
    url: {url: true},
    date: {date: true},
    dateISO: {dateISO: true},
    dateDE: {dateDE: true},
    number: {number: true},
    numberDE: {numberDE: true},
    digits: {digits: true},
    creditcard: {creditcard: true}
} 
```

# php - PHP 已安装但无法在自定义服务器上运行

> ID：10157874
> 
> 赞同：0
> 
> 时间：2012-04-14T22:29:28.003
> 
> 标签：php, nginx, fedora

我有一个运行 Fedora 的 VPS，我已经安装了 nginx 和 PHP5.3.6。这是 phpinfo() 文件：http: [//199.167.198.149/info.php](http://199.167.198.149/info.php)

但是，当我尝试运行另一个脚本时（例如，甚至是“echo 'Hi!';”），它不起作用，有时我会收到错误消息“未指定输入文件”。

我对运行这种服务器所需的配置很陌生；html 文件虽然工作正常。

你有一些我可以运行或修复的测试吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:40:01.673

确保您已在站点的 nginx 配置中`SCRIPT_FILENAME`指定使用[fastcgi_param](http://wiki.nginx.org/HttpFcgiModule)。

例子：

```
location ~ \.php$ {
  fastcgi_pass   localhost:9000;
  fastcgi_index  index.php;

  fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
} 
```

# html - 如何将图像添加到 HTML 输入小部件？

> ID：10157879
> 
> 赞同：0
> 
> 时间：2012-04-14T22:30:07.687
> 
> 标签：html, css, forms, html-input

例如，如果你去

[https://github.com/signup/free](https://github.com/signup/free)

在用户名中输入“john”，右侧会出现一个红色的小感叹号。忘记我知道怎么做的JavaScript，你怎么能把图像输入文本输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T22:31:15.520

这是一个 CSS[背景图像](http://reference.sitepoint.com/css/background-image)。

前任：

```
input {
    background-image: url("/images/modules/ajax/error.png");
} 
```

您还可以使用 CSS[背景速记属性](https://developer.mozilla.org/en/CSS/Shorthand_properties)来指定图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:31:13.223

您可以使图像成为输入元素背景的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T22:40:21.427

以下是如何以相同的方式显示图像，即在右侧并恰好适合框内：

```
<style type="text/css">
.input_error_bg {
    background-image: url("myimage.png");
    background-size: contain;
    -moz-background-size: contain;
    -webkit-background-size: contain;
    -khtml-background-size: contain;
    -o-background-size: contain;
    background-position: right 50%;
    background-repeat: no-repeat;
}
.input_bg {
    background: none;
}
</style>

<form action="signup.php" method="POST">
<input class="input_error_bg" type="text" />
</form> 
```

根据需要使用 javascript 更改 className。

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T22:35:35.717

如果你不想使用背景图片（所以你可以使用精灵图标，比如 jQuery UI），你可以使用绝对定位来覆盖图标。

示例（未经测试）：

```
<div style='display: inline-block; position: relative;'>
    <input type=text />
    <span class='ui-icon ui-icon-alert ui-state-error' style='position: absolute; display: block; margin-top: -8px; top: 50%; right: 4px;' />
</div> 
```

# python - 使用 wxPython 绘制，填充所有像素的速度有多快？

> ID：10157882
> 
> 赞同：1
> 
> 时间：2012-04-14T22:30:24.367
> 
> 标签：python, graphics, drawing, wxpython

我正在学习如何使用 Python 尤其是 wxPython 来做 gui。我想编写下一个程序在蓝色背景上绘制模糊球。我为点击坐标周围的点分配权重，从 0 到 1，中间为 1，如果我们远离点击点，它会逐渐减小。我的问题是我写的代码太慢了，更新图片需要几秒钟。我可以看到程序如何从左到右更新图片。

我使用代表主窗口的类中的`dc.DrawPoint(i,j)`where绘制每个像素。`dc = wx.PaintDC(self)`窗口大小为 600x400 像素。我的问题是如何加快绘图过程。有没有办法做到这一点？

编辑：好的，我知道我不应该绘制每个像素。如何使用位图进行绘制？

我的程序代码：

```
import wx
import random
import numpy

class FuzzyBalls(wx.Frame):
def __init__(self, parent, id, title):
    wx.Frame.__init__(self, parent, id, title, size=(600, 400))
    self.Bind(wx.EVT_PAINT, self.OnPaint)
    self.Bind(wx.EVT_LEFT_DOWN, self.OnPaint)
    self.Centre()
    self.Show(True)

def OnPaint(self, event):
    dc = wx.PaintDC(self)
    w, h = self.GetSize()
    b = 20
    x0 = 300
    y0 = 200
    eta = 0.0001
    panel_pos = self.ScreenToClient(wx.GetMousePosition())
    print panel_pos
    x0, y0 = panel_pos
    field = numpy.zeros(w*h).reshape((h,w))
    field = numpy.matrix(field)
    for i in xrange(h):
        for j in xrange(w):
            field[i,j] = numpy.exp(-eta*((i-y0)**2 + (j-x0)**2))
    z = field.sum(axis = 1).sum(axis = 0)[0,0]
    field = field/z
    n = 29000
    for i in xrange(w):
        for j in xrange(h):
            r = int(n*255*field[j,i])
            if r > 253: 
                r = 253
            dc.SetPen(wx.Pen(wx.Colour(r,r,b)))
            dc.DrawPoint(i,j)

app = wx.App()
FuzzyBalls(None, -1, 'Points')
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:51:19.163

永远不要*画出*每个像素，*尤其是*不要画到显示器上。在屏幕外的位图上绘制，然后位图显示。预先画好每一帧，这样你就不需要在程序的生命周期内再次画图了。

# java - Eclipse + Egit - 将新的 Java 项目添加到远程存储库

> ID：10157883
> 
> 赞同：1
> 
> 时间：2012-04-14T22:30:35.007
> 
> 标签：java, eclipse, git, egit

我在 Eclipse 中有一个 Java 项目，我使用本地 git 存储库维护该项目（存储库只有一个项目）。

我被要求将此项目推送到远程 git 存储库。这个存储库中已经有其他项目（显然计划是在这个存储库中维护我团队的所有项目）。

我将如何使用 Eclipse 和 Egit 来执行此操作？（或者，我也不介意在命令行上这样做）。

当我尝试使用 Egit 推送项目的“正常”程序（右键单击项目 -> 团队 -> 远程 -> 推送）时，我收到错误“master：master [rejected - non-fast-forward]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T22:33:39.543

尝试执行 git pull 以与远程存储库同步，然后您应该能够推送到它。非快进很可能意味着您已签出旧副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:18:55.193

执行以下操作并将 <tags> 替换为您的数据

```
git clone <git_url> <foldername>
cd <foldername>
git checkout -b <new_project_name>
<copy all your files to the folder>
git push origin <new_project_name> 
```

# python - MySQLdb "SELECT FROM" 登录

> ID：10157890
> 
> 赞同：-1
> 
> 时间：2012-04-14T22:31:32.710
> 
> 标签：python, mysql, mysql-python

我正在尝试在 Python 中使用 MySQLdb 登录我的名为 acounts 的表，但它对我不起作用。我不断收到我的消息“未登录”。这是我的代码：

```
database = MySQLdb.connect("127.0.0.1", "root", "pswd", "Kazzah")
cursor = database.cursor()
cursor.execute("SELECT * FROM Accounts WHERE Email='%s' AND Password='%s'" % (_Email, _Password)) 
database.commit()
numrows = cursor.rowcount

if numrows == 1:
    msg = "Logged In"
else:
    msg = "Not Logged In" 

cursor.close()
database.close() 
```

我究竟做错了什么？我是新手，所以我希望我做得有点好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:46:10.770

尝试从 %s 附近取出引号

```
cursor.execute("SELECT * FROM Accounts WHERE Email=%s AND Password=%s" % (_Email, _Password)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:46:14.947

```
cursor.execute("SELECT * FROM Accounts WHERE Email=%s AND Password=%s", (_Email, _Password)) 
```

尝试这个。如果您使用 MySQLdb 的参数支持而不是 python 的格式字符串，该库会为您进行转义（出于安全原因，这也是非常重要的一点。

请注意，mysqldb 数据库驱动程序仅支持 %s，因此无论要发送到数据库的数据类型如何，都必须使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T20:52:48.217

出于某种原因（我认为是因为使用了终端），当我输入信息时，我必须按 Enter。我相信当我按下回车键时，'\n' 被插入，这就是导致 numrows 返回 0 的原因。

我放置

```
.replace('\n', '') 
```

在 _Email 和 _Password 之后，现在效果很好！现在我还有另一个问题，但没什么大不了的。感谢大家的帮助！

# linux - 如何使 libusb 库对另一个程序可见？

> ID：10157898
> 
> 赞同：2
> 
> 时间：2012-04-14T22:32:39.650
> 
> 标签：linux, gcc, compilation

我正在尝试编译[hidapi](http://code.google.com/p/open-zwave/source/browse/#svn/trunk/cpp/hidapi/linux)库。为了编译它，我需​​要[libusb-1.0](http://downloads.sourceforge.net/project/libusb/libusb-1.0/libusb-1.0.8/libusb-1.0.8.tar.bz2)。我已经下载、配置、制作并安装到`/usr/local/lib`. 但是当我尝试编译时`hidapi`，它看不到`libusb-1.0`：

> cc -Wall -g -c -I../hidapi `pkg-config libusb-1.0 --cflags` hid-libusb.c -o hid-libusb.o -L/usr/local/lib 在 pkg-config 搜索路径中找不到软件包 libusb-1.0。也许您应该将包含 `libusb-1.0.pc' 的目录添加到 PKG_CONFIG_PATH 环境变量中 No package 'libusb-1.0' found /bin/sh: cc: not found make: *** [hid-libusb.o] Error 127

我该如何解决？

（编译发生在 Synology NAS 上）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T22:50:19.673

由于您安装到`/usr/local/lib`，除非您设置适当，`pkg-config`否则将找不到您的安装`PKG_CONFIG_PATH`

尝试运行：

```
export PKG_CONFIG_PATH="$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig" 
```

在您的外壳中，然后重新尝试构建您的代码

# cordova - Phonegap - 我有基本的 hello world windows 手机应用程序。如何将其部署到android？

> ID：10157905
> 
> 赞同：0
> 
> 时间：2012-04-14T22:34:23.943
> 
> 标签：cordova

我已经安装了 phonegap，并在 Visual Studio 中打开了基本的 hello world 新项目应用程序。我已将其部署到移动模拟器。我想将相同的应用程序部署到我的 android 手机上。我在任何地方都找不到有关如何执行此操作的任何说明。有谁知道怎么做？

我正在尝试学习如何编写一个电话应用程序，我可以从一个可维护的代码库部署到所有不同类型的设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-06T08:25:26.410

我知道这个问题有点老了 - 但对于任何在未来偶然发现它的人......

在 Visual Studio 中加载您的应用程序（我使用的是 VS 2013 Update 4），单击以下

构建 > 配置管理器

在主解决方案项目上，将平台设置为 Android - 这应该会在您的构建输出文件夹 (Solution\bin) 中创建一个已编译的 APK。

我发现安装应用程序的最简单方法是使用手动方法 - 将其复制到设备并从那里执行。

要在您的 Android 设备上安装该应用程序，您需要允许该设备安装在 Google Play 商店中找不到的应用程序。转到系统设置 > 安全 > 并选择“未知来源”选项。（这些设置的位置可能因设备和 Android 版本而异）

然后，您应该能够将 apk 复制到设备，并在任何文件管理器类型的应用程序中导航到该文件。一旦你点击它，它应该开始安装过程。

注意：您必须已安装所需的 Android SDK 和 Java Runtime。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T23:51:47.820

要部署到其他设备，您必须在每个平台的 IDE 中编译包装应用程序。从本质上讲，您需要适用于每个平台和软件的 SDK，以便您使用该 SDK 进行开发。例如，要创建 iOS 包装 App，您需要使用 XCode。每个平台的具体细节可以在[这里找到](https://phonegap.com/start)

[当您在PhoneGap 下载](https://phonegap.com/download-thankyou)中获得每个平台的（大部分）现成的包装应用程序源代码时，大部分工作都已为您完成。

或者，您可以使用[PhoneGap Build](http://build.phonegap.com/)来上传您的资产（index.html、js、css 等）并为您编译适合移动设备的应用程序。非常适合简单的应用程序，如果您的应用程序使用一些更高级的功能，则不是很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T00:15:00.723

据我所知，Phonegap 提供了一个独立于设备的 JavaScript API，并与每个平台上特定于设备的本机实现挂钩。因此，如果您在 Visual Studio 中创建应用程序，您将能够在 Windows Phone 上模拟它。

但是，如果您需要对 android 执行相同操作，则需要下载 eclipse 并重新创建项目，但是您将能够使用与 Hello world 示例中相同的文件，尽管项目结构会有所不同，但它只是 index.html并且您需要创建不同的清单文件。

如果您只想使用一个 IDE 并同时模拟不同的设备，请考虑使用[Rhomobile](http://docs.rhomobile.com/rhostudio.tutorial#building-and-running-your-application)，但它基于 Ruby 编程语言。

# asp.net-mvc-3 - MVC 路由引擎将相同格式的路由路由到不同的控制器操作

> ID：10157906
> 
> 赞同：0
> 
> 时间：2012-04-14T22:34:34.683
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

好的，我做了功课并搜索了 SO，确实我发现了*类似*的问题，但没有报告我遇到的行为。

这是交易，我已经定义了一条路线：

```
routes.MapRoute("CategoryName", "Category/Name/{text}",
    new { controller = "Category", action = "Name", text = "" }); 
```

这里的转折如下：

这个网址：`http://www.url.com/Category/Name/existingCategoryName`

*这个*网址：`http://www.url.com/Category/Name/anotherExistingCategoryName`

两个 url**都应该**使用相同的控制器方法，`public ActionResult Name(string text)`但遗憾的是第一个 url 使用默认`Index`方法，第二个被正确路由。

我想知道为什么会发生这种情况，因为我已经使用 .net mvc 好几年了，从未经历过这种行为。

作为旁注，这里有一些事实：

*   由于它正在路由到不同的方法，我怀疑它们内部的代码与它有关。
*   当手动将类别写入数据库中不存在的类别名称时，它会通过该`Name`方法。
*   路线放置正确，因为我知道与模式匹配的第一条路线将获胜。
*   即使我尝试先放置`CategoryName`路线，行为也是一样的。
*   在编写每个链接时，`Category/Index`我使用相同的`@Html.RouteLink()`帮助器，因此所有链接的格式都相同。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T08:57:45.980

`-`您是否在失败的路线中使用标志？

[也许您可以使用路由调试器](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)找到更多信息

也许你可以看看这个问题：[Failing ASP.NET MVC route。这是错误还是极端情况？](https://stackoverflow.com/questions/5279040/failing-asp-net-mvc-route-is-this-a-bug-or-corner-case)

Phil Haack 还为您的问题提供了一个可能的答案：[ASP.NET routing: Literal sub-segment between tokens, and route values with a character from the literal sub-segment](https://stackoverflow.com/questions/4318373/asp-net-routing-literal-sub-segment-between-tokens-and-route-values-with-a-cha)

# javascript - Javascript - 使用 indexOf 搜索字符串

> ID：10157907
> 
> 赞同：-2
> 
> 时间：2012-04-14T22:34:46.017
> 
> 标签：javascript

在第一个块中，我确保密码不包含“密码”。它完美地工作。

```
 var element=document.getElementById('password');
  if (element.value.toLowerCase().indexOf('password') > -1){ //returns 0 or more if present
    alert('Password may not contain the word `password`.');
    element.focus();
    return false;
  } 
```

在第二个块中，我检查密码不包含名字，它不起作用，我做错了什么？

```
 //stop password of firstname
  var element=document.getElementById('password');
  var firstname=document.getElementById('firstname');
  if (element.value.toLowerCase().indexOf(firstname.value) > -1){ //returns 0 or more if present
    alert('Password may not contain the firstname.');
    element.focus();
    return false;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T22:38:26.000

您忘记将名字小写：

```
// stop password of firstname
var element = document.getElementById('password');
var firstname = document.getElementById('firstname');
if(element.value.toLowerCase().indexOf(firstname.value**.toLowerCase()**) > -1) { //returns 0 or more if present
    alert('Password may not contain the firstname.');
    element.focus();
    return false;
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:39:39.177

if (element.value.toLowerCase().indexOf(firstname.value.toLowerCase **()** ) > -1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-14T22:43:34.197

[也许这不是问题，但您可以使用underscore.string](https://github.com/epeli/underscore.string)以非常简单和富有表现力的方式做同样的事情：

```
_.includes(element.value.toLowerCase(), firstname.value.toLowerCase()) 
```

# iphone - 如何使用 ivar_getTypeEncoding & @encode 动态确定和比较对象 ivars 的类型？

> ID：10157912
> 
> 赞同：4
> 
> 时间：2012-04-14T22:35:13.623
> 
> 标签：iphone, objective-c, ios, ipad, objective-c-runtime

**这是我想做的比较操作：**

```
// foobar is the name of an ivar on some class
// i.e. NSDate *foobar;
const char *ivarType = [self getTypeForInstanceVariableWithName:@"foobar"];
const char *objType  = @encode(NSDate);

if (strcmp(ivarType, objType) == 0) {
    //set value 
} 

NSLog(@"comparing %s with %s", ivarType, objType); 
```

**辅助方法：**

```
- (const char*)getTypeForInstanceVariableWithName:(NSString *)name {
     return ivar_getTypeEncoding(class_getInstanceVariable([self class], [name cStringUsingEncoding:NSUTF8StringEncoding]));
} 
```

**NSLog 结果：**

```
comparing @"NSDate" with {NSDate=#} 
```

**为什么@encode 返回与 ivar_getTypeEncoding() 不同的类型语法？有没有更好的方法来完成这种类型的确定？我一定在这里遗漏了一些东西......谢谢！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:55:52.877

使用 ivar_getTypeEncoding() 时，您必须注意第一个字符。让我们看一个例子：

如果你有一个原始类型，第一个 char 将是你得到的全部，对于**int**它将是 'i'，对于**char** 'c'，对于**unsigned long long** 'Q'，等等......

对于对象和类，您可能会得到更多，例如在您的示例中，但第一个字符是您想要的，例如 @ 表示对象，# 表示类，: 表示选择器。

[您可以在此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)阅读有关这些类型的信息。您还可以在比较时使用常量，例如 _C_ID、_C_CLASS 等。在[runtime.h](http://www.opensource.apple.com/source/objc4/objc4-437/runtime/runtime.h)中获取战利品。

C 数组似乎更棘手，但我相信你可以解决这个问题。

您的代码中的一个问题是您正在获取 NSDate 类的类型编码，而不是 NSDate 对象。因此，不要与@encode(NSDate) 进行比较，而是与@encode(NSDate *) 进行比较。

要查看这种类型的代码，请查看[Adium 的代码](https://bitbucket.org/sholt/adium-gc/src/2acbeadb9f1c/Frameworks/Adium%20Framework/Source/ESObjectWithProperties.m#cl-107)。

# algorithm - 检查数字中是否有“数字”零的最快方法？

> ID：10157914
> 
> 赞同：3
> 
> 时间：2012-04-05T15:01:21.490
> 
> 标签：algorithm

> 检查一个数字中是否有数字“0”的最快方法是什么？

我需要开发一种快速方法，因为我必须在 20 美元以下的时间内对接近 10 ^ 9 美元的数字执行这些检查。

将其转换为字符串后搜索零会起作用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T17:00:35.633

除以 $2$ 的幂以外的数字，无论数字是多少，都将执行相同数量的操作。因此，不要重复将 $x$ 除以 $10$ 并针对 $0$ 测试每个余数，而是考虑重复将 $x$ 除以 $10^6$（例如）并根据 $[0, 10^6) 上的查找表测试每个余数美元。如果余数包含内部零，则查找表应该说“是”，如果它不包含零，则应该说“否”，如果余数只有初始零，则应该说“可能”（在这种情况下，检查 $x$ 当前是否为非零并返回“是”或“否”相应）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:43:05.623

二进制零：如果有零位，(~x) 将不为零。我的猜测是你不关心二进制数。

如果您的数据以字符串开头，请保持这种状态。如果不是，请不要转换为字符串然后检查。到字符串的转换比检测零位所需的工作更多。这可能是特定于语言的。在 c 或汇编中，转换将比您自己的检测算法慢。

例如，如果您将基数为 10 的数字存储为整数（如在 c 中），您可以创建一个包含 1000 个条目的查找表。Lookup[100] = 1, Lookup[123] = 0 等。然后您必须将输入数字除以 1000 而不是 10。余数是查找索引。这可能比除以 10 快 3 倍。一个小的查找表将适合缓存。表太大，由于 ram 太慢，您将获得性能损失。在 c 中，无符号整数可能比有符号整数除法更快，因为优化器可能会采取一些捷径。

最后，为此考虑多个线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T15:33:50.137

如果您可以编写汇编程序或强制编译器进行整数除法，请重复执行整数除法 $10$，直到余数为 $0$ 或被除数为 $0$。如果是余数，则有一个“$0$”数字。如果是股息，则没有“$0$”数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T23:15:46.697

这是一些 Mathematica 代码，它使数字中的每个数字除一。

```
n = 34560116; d = IntegerLength[n]; m = 0; x = 1;  
While[d >= x, If[m == (k = Mod[n, 10^(x++)]), Break[], m = k]];
If[d >= x, Print["First zero found at: ", 10^(x - 2)]];

First zero found at: 1000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T20:40:52.987

> 我需要开发一种快速方法，因为我必须在 20 秒内对接近 109 个数字执行这些检查。

啊，编程问题。

> 将其转换为字符串后搜索零会起作用吗？

如果您提供给输入的所有内容都是在其自己的行上没有前导或尾随零的数字，那么 /0/ 就可以了。但是，是的，字符串将是最快的。对于混合中包含零或非数字的更复杂的表示，那么您将使用这个正则表达式来表示整数：

```
/^[1-9]+0[0-9]*$|^0$/ 
```

这需要一个具有非前导零的数字，或者是数字零。它还假设整数。

```
$ cat numbers
    375
    391
    940
    493
    566
    804
    800
    453
    726
    527
    428
    77
    984
    510
    795
    077
    0

    $ egrep '^[1-9]+0[0-9]*$|^0$' numbers
940
804
800
510
0 
```

如果十进制数字是固定宽度的，那么它们可能会更具挑战性。如果不是，则在两个括号中添加一个句点就足够了，除非您的小数以“0.nnn”而不是“.nnn”开头。告诉我你的号码，我会给你正确的解决方法。

# java - 需要帮助在多个单字母不同的单词对之间创建单词阶梯（java）

> ID：10157924
> 
> 赞同：5
> 
> 时间：2012-04-14T22:36:23.800
> 
> 标签：java, algorithm

我已经在这个问题上做了很多工作，并且真的接近尾声。总体目标是在两个五个字母的单词之间创建最小长度的单词阶梯，其中阶梯的每个“梯级”与前一个单词不同一个字母。例如：

```
[heads, heals, hells, halls, hails, tails] 
```

程序从你必须输入一个开始和结束字以及你想要的梯子的长度开始，程序必须解决它。我已经走得很远了，所以我会省略很多细节来解释我目前的情况。

假设我要从“宝贝”到“孩子”，我正在寻找一个 10 个字母的单词阶梯。

我有数千对单词，其中两对是一个不同的字母。这里只是其中一些配对的一小部分。

```
[(bares, babes), (banes, babes), (bates, babes), (babel, babes), (bases, babes), (bales, babes)...] etc. 
```

这种情况持续了很长时间，但在那里可以保证我的目标词存在，并且在我的起始词（babes）和结束词（child）之间有一条路径，并且那个梯子是 10 个词长。

我该如何做到这一点？

编辑：我已经实现了一个图表，并且正在使用 BFS 从开始词到结束词，这很有效。

```
public List<T> minLengthPath(T src, T dest, int length) 
{
    T start = src;

    Deque<T> queue = new LinkedList<T>();                       //Holds items to visit
    Queue<List<T>> ladder = new LinkedList<List<T>>();      //Holds all the ladders?
    Set<T> checker = new HashSet<T>();                          //Holds visited items

    queue.add(start);
    checker.add(start);

    while(!queue.isEmpty()){
        T slot = queue.remove();
        if(slot.equals(dest)) 
        { 
            System.out.println(slot);
            return null;  //Should be returning ladder
        }
        Set<Pair<Integer, T>> thing = this.edges.get(slot);
        Set<T> edges = findEdges(thing);     //Returns the edges of the node

        Iterator<T> check = edges.iterator();
        for(int a = 0; a < edges.size(); a ++) 
        {
            T hole = check.next();
            if(!checker.contains(hole))
            {
                checker.add(hole);
                queue.add(hole);
            }
        }           
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T22:41:35.600

好吧，您正在描述一个称为[最短路径问题的](http://en.wikipedia.org/wiki/Shortest_path_problem)[图形](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)问题。

在这里，您的图表是`G = (V,E)`、 where`V = { all words}`和`E = {(u,v) | there is a direct "ladder" from word u to word v}`。

在这种情况下，图是未加权的，因此您可以使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)找到从源到目标的最短路径。

在找到一个[可接受的启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)来评估您与目标节点的距离后，也可以使用[A* 算法。](http://en.wikipedia.org/wiki/A*_search_algorithm)正如@trutheality 所指出的，一种可能的启发式函数是不匹配字母的数量。

请注意，您实际上不需要在开始搜索之前“创建”整个图形，您可以使用函数“即时”生成它：`next(w) = { u | (w,u) is in E, or in other words - there is a direct ladder from w to u }`

通过运行 BFS 找到最短路径的长度后，您还可以通过返回找到确切的路径。[这个线程](https://stackoverflow.com/questions/9590299/how-can-i-find-the-actual-path-found-by-bfs)用更多细节解释了这个问题。这个想法是维护一个[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html) - 其中键是顶点，值是如何发现这个顶点 - 导致发现键的顶点。BFS 完成后，你只需要从目标回到源，你就得到了你的路径！[逆转，当然……]

# php - 更好的方式来阅读 URL 的最后部分

> ID：10157927
> 
> 赞同：1
> 
> 时间：2012-04-14T22:38:17.383
> 
> 标签：php, string, url, search, url-parsing

此脚本应检测完整路径中的最后一部分，以及是否`stackoverflow`输出`ok`

```
$current_url = $_SERVER['REQUEST_URI'];

$current_url_arr = explode('/',$current_url);
$count = count($current_url_arr);

if($current_url_arr[$count-2] == 'stackoverflow'){
    echo 'ok';
}
else {
    echo 'not ok';
} 
```

* * *

示例 1：`www.myserver.ext/something/else/stackoverflow/` 输出：`ok`

* * *

示例 2：`www.myserver.ext/something/else/stackoverflow` 输出：`not ok`

* * *

示例 3：`www.myserver.ext/something/else/stackoverflow/foo` 输出：`not ok`

* * *

我希望你能理解这个想法。该脚本运行良好，但我想知道是否有更好、更优雅的方式来读取 URL 的最后一部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T22:44:39.687

```
if (preg_match("#stackoverflow/$#", $_SERVER['REQUEST_URI'])) {

    echo 'ok';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T22:40:33.550

是的！有`$_SERVER['PATH_INFO']`：

```
if(isset($_SERVER['PATH_INFO'])) {
    $info = explode('/', trim($_SERVER['PATH_INFO'], '/'));

    if($info[count($info) - 1] === 'stackoverflow') {
        echo 'ok';
    } else {
        echo 'not ok';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T23:13:58.730

我认为这将是最好的方法：

```
<?php

    $url = "www.myserver.ext/something/else/stackoverflow/";

    $fullpath = parse_url($url, PHP_URL_PATH);
    $paths = explode("/", $fullpath);
    $path = $paths[sizeof($paths)-1];

    if ($path === "stackoverflow") {
        # Condition satisfied
    }

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T23:42:16.417

我认为使用 of`basename()`比`explode()`. `basename()`无论是否有斜杠，函数都将返回 url 的最后一部分。

```
<?php
$uri = $_SERVER['REQUEST_URI'];
if(basename($uri) == 'stackoverflow') {
    echo 'ok';
} else {
    echo 'not ok';
}
?> 
```

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T23:22:10.660

请注意，如果输入字符串中的尾随字符与分隔符（边界）字符串匹配，`explode()`则会生成最后一项为空字符串的数组。因此，您的示例 3 将输出`ok`.

`www.myserver.ext/something/else/stackoverflow/foo/`将输出`not ok`.

满足您的需求的最短方法是：

```
if (preg_match("#/stackoverflow/$#", $_SERVER['REQUEST_URI'])) {
    echo 'ok';
} 
```

`ok`仅当 url 以 . 结尾时才会回显`/stackoverflow/`。

# javascript - 输入掩码以显示单个字符位置 - “_ _ _”

> ID：10157930
> 
> 赞同：0
> 
> 时间：2012-04-14T22:38:58.880
> 
> 标签：javascript, jquery, input, masking

我想知道是否有可能屏蔽输入以显示类似这样的内容->“_ _ _ _ _ _”，其中单个“_”是输入字符的地方。

所以用户输入时的最终结果应该类似于这个“typ _ _ _”

感谢帮助！

- 我尝试通过 maskedinput 来做到这一点，但是当我允许在正则表达式（[0-9a-zA-ąłóżźćę ?]*/）中输入特殊字符和空格时，它不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:41:02.787

好吧，刚刚在 Google 中快速搜索了“掩码输入 jquery 插件”，这就是它出现的第一个结果[masked-input-plugin](http://digitalbush.com/projects/masked-input-plugin/)。好像这就是你要找的东西。

**编辑：**

如果你确实在使用这个插件，那么这应该可以工作：

```
$input.mask('999999'); 
```

# mongodb - 什么 NoSQL DB 用于稀疏时间序列（如数据）？

> ID：10157931
> 
> 赞同：12
> 
> 时间：2012-04-14T22:39:11.163
> 
> 标签：mongodb, cassandra, riak, nosql

我正在计划一个附带项目，我将在其中处理时间序列之类的数据，并且想尝试其中一个闪亮的新 NoSQL DB，并正在寻找建议。

对于（不断增长的）集合，`symbols`我将有一个 ( `time`, `value`) 元组列表（随着时间的推移而增加）。并非全部`symbols`都会更新；有些可能会更新，而有些可能不会，并且可能会添加`symbols`全新的内容。`symbols`

因此，数据库应允许：

*   添加具有初始单元素（元组）列表的符号。例如 A: [(2012-04-14 10:23, 50)]
*   使用新元组更新符号。（将该元组附加到该符号的列表中）。
*   读取给定品种的数据。（理想情况下，甚至让我指定应返回数据的时间范围）

创建和更新操作应该是原子的。如果一次读取多个符号是可能的，那会很有趣。

性能并不重要。更新/创建大约每隔几个小时就会发生一次。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-14T22:46:58.150

我相信几乎所有主要的 NoSQL 数据库都会支持这一要求，尤其是在您实际上没有大量数据的情况下（这引出了一个问题，为什么要使用 NoSQL？）。

也就是说，我最近必须为时间序列数据设计和使用 NoSQL 数据库，因此可以对该设计提供一些输入，然后可以推断出所有其他数据库。

我们选择的数据库是`Cassandra`，我们的设计如下：

*   所有“符号”的单一键空间
*   每个符号都是一个新行
*   每次条目都是该相关行的新列
*   每个值（可以是多个值）是时间条目的值部分

这使您可以实现您所要求的一切，尤其是读取单个符号的数据，并在必要时使用范围（列范围调用）。尽管您说性能并不重要，但它对我们来说也很高效 - 任何单个符号的所有数据都按定义排序（列名排序）并始终存储在同一节点上（简单查询没有跨节点通信）。最后，这种设计可以很好地转化为其他具有动态列的 NoSQL 数据库。

除此之外，这里有一些关于使用 MongoDB（以及必要时设置上限的集合）进行时间序列存储的信息：[MongoDB as a Time Series Database](https://stackoverflow.com/questions/7368759/mongodb-as-a-time-series-database)

最后，这里是关于时间序列的 SQL 与 NoSQL 的讨论：[https ://dba.stackexchange.com/questions/7634/timeseries-sql-or-nosql](https://dba.stackexchange.com/questions/7634/timeseries-sql-or-nosql)

我可以在该讨论中添加以下内容：

*   NoSQL 的学习曲线会更高，就“软成本”而言，您不会免费获得额外的灵活性和功能。谁将在操作上支持该数据库？
*   如果您希望此功能在未来有所增长（或者将更多字段添加到每个时间条目，或者在符号数量或符号时间序列大小方面更大的容量），那么一定要使用 NoSQL。灵活性的好处是巨大的，并且您在“每个符号”和“符号数量”的基础上获得的可扩展性（使用上述设计）几乎是无限的（我说几乎是无限的 - 每行的最大列数为数十亿，最大值我相信每个键空间的行数是无限的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T15:10:58.873

看看 opentsdb.org 一个使用 hbase 的开源时间序列数据库。他们在如何存储 TS 方面很聪明。这里有很好的记录：http: [//opentsdb.net/misc/opentsdb-hbasecon.pdf](http://opentsdb.net/misc/opentsdb-hbasecon.pdf)

# facebook - 无法获取我网页上类似按钮的 html 代码

> ID：10157936
> 
> 赞同：0
> 
> 时间：2012-04-14T22:39:40.950
> 
> 标签：facebook, button, facebook-like

[当我在Facebook 的 Like Button Generator](https://developers.facebook.com/docs/reference/plugins/like/)上将我的网页输入到“get Like button Url to like”时，它告诉我输入的 href 不是有效的 url，而实际上它是。

如果没有此应用程序，如何获取我的网页的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:44:03.547

1.  使用点赞按钮生成器获取您知道的网站的代码，例如`www.google.com`
2.  查看代码并替换`www.google.com`为`yoursite.com`

设置好按钮后，您应该设置[Open Graph 元信息，并且您可以使用](https://developers.facebook.com/docs/opengraphprotocol/)[Facebook 调试控制台](https://developers.facebook.com/tools/debug)测试所有设置是否正确

# c++ - 如何使用 WinAPI 和 C++ 从 Windows 系统上的服务通知客户端应用程序？

> ID：10157949
> 
> 赞同：0
> 
> 时间：2012-04-14T22:41:23.027
> 
> 标签：c++, winapi, service, ipc

我想知道，在 Windows 系统上使用 C++/WinAPI 执行以下操作的最佳方法是什么？

我有一个本地服务应用程序以及正在运行的客户端应用程序（在每个登录的用户会话帐户上运行。）服务应用程序需要通知所有客户端应用程序执行一次性操作（例如，从注册表读取数据并处理它。）您如何实现这种通知所有客户端应用程序一次性事件的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:36:47.060

服务可以发送所有客户端应用程序都会监听的广播窗口消息。当然，客户端应用程序需要有一个消息循环。你看过[SendNotifyMessage](http://msdn.microsoft.com/en-us/library/ms644953%28v=vs.85%29.aspx)函数吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T22:53:26.410

您可以使用所有应用程序都同意的具有特定名称的[事件。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)然后过一段时间重新设置。

# python - 在 Django 项目中引用您的项目名称是否合适？

> ID：10157952
> 
> 赞同：-1
> 
> 时间：2012-04-14T22:41:40.187
> 
> 标签：python, django, import

我正在使用 Django，我想知道使用 myapp.models 是否合适，而不是 myproject.myapp.models，或者在 INSTALLED_APPS 中，应该使用全名 myproject.myapp 还是只使用 myapp 是否合适姓名？我想知道，因为如果我要使用后一种方法更改项目名称，它会破坏我的应用程序，但我不确定仅仅因为前一种方法有效，它是正确的。有人可以帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T07:15:26.180

我会说不鼓励使用您的项目名称来引用您的应用程序。我这样说是因为从 Django 1.4 开始，这不适用于默认的 Django 项目。您可以在此处阅读有关此内容的更多信息： [https ://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)

引用自那句话：

“如果使用项目名称前缀（例如 myproject.settings、ROOT_URLCONF = “myproject.urls”等）导入或引用项目中的设置、URLconfs 和应用程序，则需要将新的 manage.py 上移一个目录，因此它位于项目包之外，而不是与 settings.py 和 urls.py 相邻。”

我建议不要这样做，因为这意味着会弄乱默认的项目结构，不是什么大不了的事，但会增加不必要的工作。

我也建议不要这样做，因为它将您的应用程序与您的项目结合起来，这违背了 Django 提倡可重用、解耦应用程序的哲学。

# java - Java swing setMaximumSize 不起作用

> ID：10157954
> 
> 赞同：9
> 
> 时间：2012-04-14T22:42:04.513
> 
> 标签：java, swing, jframe

> **可能重复：**
> [setMaximumSize 在 java 中不起作用](https://stackoverflow.com/questions/4061010/setmaximumsize-not-working-in-java)

我的`JFrame`子类有问题。我需要设置一个最大高度。

但`setMaximumSize`不起作用。这似乎是java中的一个错误（setMinimumSize 有效）。如何防止 a`JFrame`高于给定高度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T22:45:34.397

以我的经验，setMinimumSize 和 setMaximumSize 不可靠——它们可能在某些情况下有效，但在其他情况下通常无效

最好的解决方案是使用 ComponentListener，实现 componentResized，并以这种方式强制执行最小/最大大小

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T22:54:03.700

使用这个代替/以及：

```
setPreferredSize(new Dimension(width, height)); 
```

根据我的经验`setPreferredSize(Dimension)`，优先考虑并且总是有效的。

无论如何，我通常都使用它们：`setMinimumSize()`, `setMaximumSize()`,`setPreferredSize()` 然后`setSize()`也是

# iphone - 如何判断 UIPrintInteractionController 是否正在显示？

> ID：10157958
> 
> 赞同：0
> 
> 时间：2012-04-14T22:42:50.913
> 
> 标签：iphone, objective-c, ios, ipad, airprint

有没有办法判断 a`UIPrintInteractionController`是否正在显示（可能类似于您检查弹出窗口的方式）？

```
if ([popover isPopoverVisible]) {

    //the popover is visible

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T00:15:04.890

看起来您只需要使用[UIPrintInteractionControllerDelegate跟踪自己](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPrintInteractionControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIPrintInteractionControllerDelegate)

```
– printInteractionControllerWillPresentPrinterOptions:
– printInteractionControllerDidPresentPrinterOptions:
– printInteractionControllerWillDismissPrinterOptions:
– printInteractionControllerDidDismissPrinterOptions: 
```

# android - 查找选中的单选按钮的 ID，如何去除字符串形式的 ID

> ID：10157964
> 
> 赞同：0
> 
> 时间：2012-04-14T22:43:59.250
> 
> 标签：android

在我的应用程序中，用户选择一个单选按钮，指示他有多少玩家想要参加这项选择。然后将该号码发送到另一个活动以进行显示。如果可能的话，我怎样才能获取单选按钮的 id 并去掉“单选”部分，只留下整数 4-10？

```
package teamBuilder;

import com.jonahwitcig.team.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.*;

public class CorrectedActivity extends Activity {
    /** Called when the activity is first created. */

    TextView player1, team1;
    Button next;
    RadioGroup RBGroup;
    RadioButton RB4, RB5, RB6, RB7, RB8, RB9, RB10;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.players);

        next = (Button) findViewById(R.id.next);
        //the name of a textView i will be displaying a number in
        team1 = (TextView) findViewById(R.id.team1);
        RB4 = (RadioButton) findViewById(R.id.radio4);
        RB5 = (RadioButton) findViewById(R.id.radio5);
        RB6 = (RadioButton) findViewById(R.id.radio6);
        RB7 = (RadioButton) findViewById(R.id.radio7);
        RB8 = (RadioButton) findViewById(R.id.radio8);
        RB9 = (RadioButton) findViewById(R.id.radio9);
        RB10 = (RadioButton) findViewById(R.id.radio10);
        //names of my radio buttons
        RBGroup = (RadioGroup) findViewById(R.id.RBGroup);

        RBGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

            public void onCheckedChanged(RadioGroup RBGroup, int checkedId) {

                team1.setText(checkedId);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:38:17.507

虽然不建议这样做（如果在大批量中进行反向查找会很慢，但如果很少进行则不会引起注意），这是正确的解决方案（请记住，您需要包含自己的错误检查/处理格式错误的标识符字符串）：

```
String resName = getResources().getResourceEntryName(checkedId);
String number = resName.substring(5);
int num = Integer.parseInt(number); 
```

# r - RCurl：当站点使用没有 WWW-Authenticate 的 HTTP 401 代码响应时的 HTTP 身份验证

> ID：10157969
> 
> 赞同：16
> 
> 时间：2012-04-14T22:45:14.757
> 
> 标签：r, rcurl

我正在使用[RCurl包围绕](http://www.omegahat.org/RCurl/RCurlJSS.pdf)[PiCloud 的 REST API](http://docs.picloud.com/rest.html)实现一个 R 包装器，以向 API 服务器发出 HTTP(S) 请求。API 使用基本 HTTP 身份验证来验证用户是否具有足够的权限。PiCloud 文档提供了一个使用 api 和使用 curl 进行身份验证的示例：

```
 $ curl -u 'key:secret_key' https://api.picloud.com/job/?jids=12 
```

这完美地工作。将其转换为等效的 RCurl 的命令：

```
getURL("https://api.picloud.com/job/?jids=12", userpwd="key:secret") 
```

执行此功能，我收到以下错误消息：

```
[1] "{\"error\": {\"msg\": \"No HTTP Authorization information present\", \"code\": 995, \"retry\": false}}" 
```

更深入地探索这个问题，我发现 curl 命令发出的 HTTP 请求在第一个 GET 命令中包含了 Authorization 字段。

RCurl 不这样做。相反，它首先发送一个没有设置授权字段的 GET 请求。如果它收到 401 错误代码和带有 WWW-Authenticate 字段的响应，它会发送另一个带有 Authorization 字段的 GET 请求。

尽管 HTTP 规范要求返回 401 错误代码的消息包含 WWW-Authenticate 字段，但 PiCloud API 消息却没有。因此，`getURL`即使设置了 userpwd 选项，RCurl 也永远不会发送带有授权字段集的 GET 请求。因此，身份验证将始终失败。

有没有办法强制 RCurl 在它发送的第一条 GET 消息中设置 Authorization 字段？如果没有，我可以考虑使用其他任何 R 包吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-15T14:41:06.187

我在 RCurl 的作者 Duncan Lang 的帮助下解决了这个问题。解决方案是显式设置 httpauth 选项，该选项将身份验证方法设置为最初尝试。这有效：

```
getURL("https://api.picloud.com/job/?jids=12", userpwd="key:secret", httpauth = 1L) 
```

httpauth 是一个位掩码，用于指定要使用的身份验证方法。有关更多详细信息，请参阅[libcurl 教程](http://curl.haxx.se/libcurl/c/libcurl-tutorial.html)的 HTTP 身份验证部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-30T20:39:13.277

httr 中的等效代码是：

```
library(httr)
GET("https://api.picloud.com/job/?jids=12", authenticate("key", "secret")) 
```

# linux - 在linux中，用户空间程序如何使用内核函数？我真的需要一些灵感

> ID：10157972
> 
> 赞同：1
> 
> 时间：2012-04-14T22:45:40.740
> 
> 标签：linux, kernel, linux-device-driver, kernel-module

我是内核编程的初学者。我只是需要一些灵感。我知道我可以在内核源代码中编写一些函数，重建并重新启动内核。这些代码可能是一些控制硬件的硬件驱动程序。但是我们的用户空间程序如何使用这些功能呢？我知道通过syscall用户空间程序可以与内核空间通信，可加载内核模块也可以使用内核源代码中定义的功能。但是我们的用户程序如何做到这一点呢？

PS：我现在正在学习qemu-kvm。我知道 qemu 是用户空间程序，而 kvm 是内核。我只是想弄清楚qemu程序是如何使用kvm的。

我知道这是一个非常基本的 linux 内核编程问题，但它让我困惑了很长时间。有人可以给我一个提示吗？:>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T01:49:47.820

如果您正在编写驱动程序，则不应插入新的系统调用。新的系统调用通常是一个坏主意，你应该有一个很好的理由这样做，而硬件驱动程序不是一个好主意。您必须将您的驱动程序注册为字符设备、块设备或网络设备。我向您推荐“Linux 设备驱动程序”一书（可在 Internet 上合法获得）以查看不同类型驱动程序的示例。

关于如何从用户空间调用内核中的函数的问题......没有直接的方法可以做到这一点，你不能像使用库那样将用户空间代码与内核链接。首先，您必须将您的函数注册为系统调用，然后使用 syscall() 函数调用系统调用。

这是一个很好的解释方法：[http ://www.tldp.org/HOWTO/html_single/Implement-Sys-Call-Linux-2.6-i386/](http://www.tldp.org/HOWTO/html_single/Implement-Sys-Call-Linux-2.6-i386/)

# objective-c - 在我的自定义 UIButton 类中，为什么我的高亮层没有消失？

> ID：10157976
> 
> 赞同：1
> 
> 时间：2012-04-14T22:46:11.750
> 
> 标签：objective-c

我创建了 UIButton 的自定义子类来封装我遇到的一些特定问题（客户希望将渐变作为大多数按钮的背景）。到目前为止，这项工作已按计划进行。

但是，我创建的其中一件事是自定义“突出显示”来替换内置突出显示，因为不允许使用自定义按钮。我很幸运能够覆盖超类函数以突出显示，如下所示：

```
-(void) setHighlighted:(BOOL)highlighted
{
    [super setHighlighted:highlighted];
    NSLog(@"Set highlighted called: %i", highlighted);
    if (self.highlight==nil) {
        self.highlight=[CAGradientLayer layer];
        gradient.colors=[NSArray arrayWithObjects:
                         (id)[[UIColor colorWithWhite:1.0 alpha:.4] CGColor], 
                         (id)[[UIColor colorWithWhite:0.0 alpha:.4] CGColor],
                         nil];
    }
    if(highlighted)
    {
        [[self layer] addSublayer:highlight];
    }
    else {
        NSLog(@"Highlight should be removed...");
        NSLog(@"Highlight index: %i", [[[self layer] sublayers] indexOfObject:highlight]);
        [self.highlight removeFromSuperlayer];
        NSLog(@"Highlight index: %i", [[[self layer] sublayers] indexOfObject:highlight]);
    }
} 
```

不幸的是，高光层似乎没有正确地删除自己。正如您在我的代码中看到的那样，我正在检查突出显示在删除之前（2）和删除之后（2147483647，AKA NSNotFound）的索引。因此，理论上，它已从层中移除。

但是由于某种原因，它仍然*显示*在自定义按钮内，我不知道为什么。

现在我将通过简单地改变背景渐变的颜色来解决这个问题，但我真的很好奇为什么这段代码不起作用。

# c# - 设计 Fluent 接口方法

> ID：10157982
> 
> 赞同：1
> 
> 时间：2012-04-14T22:47:47.223
> 
> 标签：c#, .net, linq, generics, fluent-interface

我正在尝试编写 DSL

我有返回字符串的方法，但如果我想组合字符串，我需要使用 + 符号，但我想一起调用这些方法，但我不确定如何实现它

我目前有方法，例如

`MyStaticClass.Root() MyStaticClass.And() MyStaticClass.AnyInt()`返回字符串

我希望能够做到

`Root().And().AnyInt()`结果是一个字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:01:54.920

您不需要使用 + 符号。使用`StringBuilder` [http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

**例子**

```
StringBuilder builder = new StringBuilder();
builder.Append("One string ").Append("Second string").Append("Another string");
string final = builder.ToString(); 
```

如果您想要一个简单的自定义 FluentInterface，请使用以下命令：

```
public class MyOwnStringBuilder
{
   public StringBuilder Builder;

   public MyOwnStringBuilder()
   {
      this.Builder = new StringBuilder();
   }

   public static MyOwnStringBuilder Root
   {
     get{return new MyOwnStringBuilder();}
   }

   public string End
   {
     get{return Builder.ToString();}
   }

   public MyOwnStringBuilder And(string value)
   {
     Builder.Append(value);
     return this;
   }

   public MyOwnStringBuilder AnyInt(string value)
   {
      Builder.Append(value);
      return this;
   }
} 
```

你会使用它：

```
MyOwnStringBuilder.Root
       .And("some value")
       .AnyInt("some new value")
       .End; 
```

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:05:13.517

这些方法应该返回一个包装类。这些方法也是包装类的*实例方法*。例子：

```
class Fluent
{
     private string _value;
     public Fluent And()
     {
         this._value += "whatever";
         return this;
     }
     public Fluent AnyInt()
     {
         this._value += "42";
         return this;
     }
     public override string ToString() { return _value; }
} 
```

您还可以定义从`Fluent`到字符串的隐式或显式转换，而不是（或除此之外）`ToString()`覆盖。

此外，对于生产代码，我会使用字符串生成器来避免多次调用`Concat`.

# javascript - Javascript：不更改 div innerHTML

> ID：10157983
> 
> 赞同：4
> 
> 时间：2012-04-14T22:47:49.547
> 
> 标签：javascript, html

我真的不明白为什么这不起作用。我已经尝试了几个技巧，但我就是不明白。

```
<html>
<head>
<script type="text/javascript">
alert('Hey');
    var vText = document.getElementById("results");
        vText.innerHTML = 'Changed';
        alert(vText.innerHTML);
</script>
</head>
<body>
<div id="results">
hey there
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T22:52:58.060

正如您在此处看到的那样，这是有效的：

[http://jsfiddle.net/gHbss/](http://jsfiddle.net/gHbss/)

将 JavaScript 放在 HTML div 容器之后很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T22:52:38.227

您面临的问题是浏览器在呈现/处理页面时运行 JavaScript。此时它会`alert()`显示您的消息，但相关元素`#results` `div`DOM 中不存在，因此无法更改任何内容。

为了解决这个问题，您可以将 放在`script`页面末尾，就在结束标记`</body>`之前，或者在出现 或 时运行代码。`onload``body``window`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T22:51:48.693

该脚本必须放在 div#results 之后或执行 onload，否则当您尝试访问该元素时仍然未知该元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T22:53:04.573

您需要在 onload 事件中调用此脚本，即

```
 window.onload=function(){
//your code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T23:02:28.713

```
<html>
<head>
<script type="text/javascript">
function onloadCall()
{
    alert('Hey');
    var vText = document.getElementById("results");                                                 
    vText.innerHTML = 'Changed';
    alert(vText.innerHTML);
}
</script>
</head>
<body onload="onloadCall()">
    <div id="results">
    hey there
    </div>
</body>
</html> 
```

希望上面的代码片段向您展示了修复

# node.js - 使用 StartSSL 证书在 Mac OSX 上的 Node.js 上启动 HTTPS 时出错

> ID：10157987
> 
> 赞同：11
> 
> 时间：2012-04-14T22:48:26.943
> 
> 标签：node.js, ssl, https

我正在尝试使用 StartSSL 证书运行 HTTPS 服务器。我从他们那里得到了所有必要的文件，并通过在`createServer`参数中传递它们来使用它们：

```
var options =
{
    ca:     FS.readFileSync('sub.class1.server.ca.pem'),
    key:    FS.readFileSync('ssl.key'),
    cert:   FS.readFileSync('ssl.crt')
}; 
```

这是我得到的错误。

```
Error: error:0906D06C:PEM routines:PEM_read_bio:no start line
    at Object.createCredentials (crypto.js:87:31)
    at HTTPSServer.Server (tls.js:914:28)
    at HTTPSServer.Server (https.js:33:14)
    at HTTPSServer.HTTPSServer (/Users/myUserName/node_modules/connect/lib/https.js:34:16)
    at new HTTPSServer (/Users/myUserName/node_modules/express/lib/https.js:38:23)
    at Object.createServer (/Users/myUserName/node_modules/express/lib/express.js:43:12)
    at Object.<anonymous> (/Users/myUserName/Sites/node.js/https/app.js:12:36)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31) 
```

我想也许我应该将证书转换为 PEM。但是运行：

```
openssl x509 -in ssl.crt -out ssl.der -outform DER 
```

...给了我类似的错误

```
unable to load certificate
67304:error:0906D06C:PEM routines:PEM_read_bio:no start line:/SourceCache/OpenSSL098/OpenSSL098-44/src/crypto/pem/pem_lib.c:648:Expecting: TRUSTED CERTIFICATE 
```

知道为什么吗？

**更新：**这只发生在 OSX 上。我尝试在 Ubuntu 服务器上运行相同的东西，它可以工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:35:35.503

我有同样的问题。但是我可以确认，在我的机器（macbook osx 10.7.3）上，节点 https 现在使用自签名证书运行没有错误。

该特定错误意味着它要么找不到文件，要么文件中没有任何内容（您可以通过传递空字符串或使用无效的文件路径来确认这一点。）

首先，尝试使用绝对路径 - 例如 FS.readFileSync(__dirname + 'ssl.crt')。

还打开您的证书和密钥文件并确认它们包含以下形式的数据：'-----BEGIN'...等。

另请注意，虽然您的文件是 .cert 和 .key 文件，但文档指的是扩展名为 .pem 的证书和密钥文件。

[http://nodejs.org/api/https.html](http://nodejs.org/api/https.html)

据我了解，没有太大区别，内容看起来和我很相似，但这些东西可能很繁琐。

这是将 .csr 文件转换为 .pem 文件的命令：

openssl x509 -req -in certrequest.csr -signkey privatekey.pem -out certificate.pem

取自[http://silas.sewell.org/blog/2010/06/03/node-js-https-ssl-server-example/](http://silas.sewell.org/blog/2010/06/03/node-js-https-ssl-server-example/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T16:37:15.310

我想你和我一样关注了这篇文章[https://tootallnate.net/setting-up-free-ssl-on-your-node-server](https://tootallnate.net/setting-up-free-ssl-on-your-node-server)，我遇到了和你一样的问题。但是在检查了我从 StartCom 检索到的所有文件后，我发现我不小心将证书和私钥保存为 UTF8，而不是 ANSI。将文件的编码更改为 ANSI 后，node.js 开始像魅力一样工作:)

# haskell - Haskell 读取类型推断

> ID：10157988
> 
> 赞同：2
> 
> 时间：2012-04-14T22:48:39.287
> 
> 标签：haskell

Haskell 新手想知道为什么前 3 条没问题，但第 4 条语句被炸毁了：

```
Prelude> read "5.3" + 5.0                   -- ok
10.3

Prelude> read "5"   + 5                     -- ok
10

Prelude> read "5"   + 5.3                   -- ok
10.3

Prelude> read "5.3" + 5                     -- huh ???
*** Exception: Prelude.read: no parse 
```

我看到 :t 5.3 是分数，而 5 只是 Num，但两者都必须可以从 read 中返回，因为前三个命令有效，并且 (+) 应该适用于任何一对数字。这里发生了什么 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T22:50:25.553

当数值表达式的类型不明确时，Haskell 会首先尝试将其解析为`Integer`，然后再解析为`Double`（浮点数），如果这不起作用。这是因为必须显式指定简单算术表达式的类型会很烦人。

这个具体的例子发生是因为`5.3`不能是`Integer`（因为`Integer`不是`Fractional`），所以在这种情况下它解决了`Double`。但是由于`5`可以是`Integer`, 并且`read "5.3"`可以是任何可以读取的类型，它默认为`Integer`，并且在运行时爆炸，因为`5.3`它不是有效的`Integer`文字。

如果你打开`-Wall`，你将能够看到这种类型的默认发生；它会在它发生时显示警告。（不过，这在实践中通常很烦人，因为这种默认设置在 GHCi 中很常见。）

# matlab - 添加带有 2 个 y 轴标签的 x 轴标签

> ID：10157991
> 
> 赞同：2
> 
> 时间：2012-04-14T22:48:57.930
> 
> 标签：matlab, plot, gnuplot, octave

**我可以将 2 个 y 轴添加到 octave/matlab 图中，但是当我尝试使用xlabel('Frequency in Hz')**在图底部添加 x 轴时，它不会显示

```
[ax h1 h2]=plotyy(xx,yy,xx,yy2); %plot two y axes and 1 x-axis
axes(ax(1)); ylabel('Phase Angle in degrees');
axes(ax(2)); ylabel('Amplitude'); 
```

任何人都知道如何解决这个问题，所以 x 轴也会出现

我正在使用 octave 3.2.4 / matlab

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:12:02.083

确保`xlabel()`在引用绘图上的特定轴之一后调用。您只需要执行一次，但由于双轴，在特定轴上下文之外调用 x-label 将不起作用。以下对我来说在 Octave 3.2.4 中工作得很好。

```
xx  = [1,2,3]; 
yy  = [10,11,12]; 
yy2 = [-10,-11,-12]; 

[ax h1 h2]=plotyy(xx,yy,xx,yy2); 

axes(ax(1)); xlabel('Frequency in Hz'); ylabel('Phase Angle in degrees');
axes(ax(2)); ylabel('Amplitude'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T23:38:03.950

为了向某些轴添加标签（`xlabel`或`ylabel`），您还可以将此轴引用作为命令调用的第一个参数传递。这样，您还将保证您处于@EMS 指出的正确上下文中。

```
xx  = [1,2,3]; 
yy  = [10,11,12]; 
yy2 = [-10,-11,-12]; 

[ax h1 h2]=plotyy(xx,yy,xx,yy2); 

xlabel(ax(1),'Frequency in Hz'); ylabel(ax(1),'Phase Angle in degrees');
ylabel(ax(2),'Amplitude'); 
```

这在性能方面也更好，因为如果您`axes`多次调用，您会看到一切都大大减慢。

# c - 如何将字符与C中的给定字符集进行比较？

> ID：10157992
> 
> 赞同：1
> 
> 时间：2012-04-14T22:48:58.350
> 
> 标签：c, string, compare, string.h, strncmp

我希望能够将一个字符`stdin`与我的规范字符进行比较。这样做的目的是过滤掉所有其他错误的输入，同时只保留指定的单个字符作为命令。**就像在`stdin`"nn" 或 "qddaw" 上一样 -> 再次出错，但 "n" 使一些有用的东西。**

这是我想到的“代码方面”：

```
if (input does not contain 'c' or 's' or 'q' or 'n') { 
    printf("some kind of error");
} 
```

好吧，我尝试创建一个具有指定字符的数组，`array[] = {'a', 'b', 'c'}`这样我就可以使用函数 strncmp.. 将它与标准输入上的字符串进行比较

```
char c[256];
scanf("%s", c)
if (strncmp(array, c, 1) != 0) printf("error"); 
```

但它似乎不起作用。有什么建议么？

**Edit1：**这是实际的一段代码：

```
char c[256];
char* s = "nsrld";
char* quiter = "q";

do 
    {
        printf(">");
        scanf("%s", c);
        if (only when there is no 'n' or 's' or other char from char* s on input)
        {
            errorHandle(ERROR_WRONG_CMD);
        }
        scanf("%*[^\n]"); scanf("%*c");
    } while (strcmp(c,quiter) != 0); 
```

如您所见，我很好地处理了“q”的事情，但是多个字符很麻烦。感谢您的任何建议。

**编辑2：**或者换句话说，我需要一个函数，它将输入与一组给定的字符进行比较，并且只有当有一个**或**另一个时（如'q'或's'函数才会通过（但如果有字符在一起则不会）像'qs'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:46:12.337

```
int ch = getchar();
if (ch != EOF)
{
    if (strchr("csqn", ch) == NULL)
    {
        printf("Evil Bad Character <%c> in Hex %02X\n", ch, ch);
    }
    else
    {
        /* Do stuff with ch */
    }
}
else
{
    printf("EOF on input\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T22:54:06.383

```
char c = getchar();
switch (c) {
case 'c':
case 's':
case 'q':
case 'n':
  do_something();
  break;
default:
  print_error();
}; 
```

上面的代码应该可以工作。我不知道为什么你的 if 语句不起作用。一般来说，开关在这种情况下也能很好地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:04:35.873

*我说得不够清楚。我需要的是像“wwqwqe”一样输入“输入你想要的任何东西”并执行错误，除非输入只是'c'或只是's'（以及更多）。*

```
char usersInput[200] = "";            /* A buffer to hold the input values */
char *result = gets(usersInput);      /* Fill the buffer from stdin */
if (result != NULL)                   /* If we got something */
{
    if (strlen(usersInput) == 1)      /* the input must be exactly 1 character */
    {
        char ch = usersInput[0];
        if (strchr(ch, "csqn") == NULL)    /* It must be a valid values */
        {
            printf("Evil Bad Character <%c>\n", ch);
        }
        else
        {
            /* Do stuff with the known valid input value ch */
        }
    }
    else
    {
        puts("The input value must be exactly 1 character\n");
        puts("and must be 'c', 's', 'q' or 'n'");
    }
}
else
{
    puts("EOF or ERROR while reading stdin\n");
} 
```

这应该可以完成这项工作。

一警告。 **get**不够聪明，无法知道**usersInput**的长度为 200 个字符。

 **它会让您兴高采烈地输入 201 个或更多字符，从而覆盖内存中的其他字符。这类事情可能会导致难以发现的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T23:50:22.263

我认为字符串是集合...因此，如果它们的交集是 void 集合，那么我们将失败-> printf("Error")... 否则输出为无...

```
#include <stdio.h>
#include <string.h>

int intersection(char* source, char* search)
{
  int i,j;
  for(i = 0; i < strlen(search); i++)
    if(strchr(source,search[i]))j++;
  if(j != strlen(search))return 0;
  else return 1;
}

int main()
{
  char *letters = "eo";
  char *p = "hello";
  int e = intersection(p,letters);
  if(e==1)puts("Non Void");  
  else puts("Void");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T22:55:54.807

写一个函数

```
int IsGood(int c)
{
    if(c=='a'||c=='b'||c=='c')
    return 1;
    else
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T22:58:05.977

您的第一个解决方案应该有效。如果这与您发布的代码完全相同 - 那么您的问题*可能*是因为 printf 最后需要一个换行符才能刷新到控制台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-15T12:44:50.323

这对我有用：

```
 char c[256];
    char* s = "nqsrld";
    char* quiter = "q";

    do 
    {
        printf(">");
        scanf("%s", c);
        if ((strpbrk(s, c) == 0) || (strlen(c) >= 2))
        {
            errorHandle(ERROR_WRONG_CMD);
        }
        scanf("%*[^\n]"); scanf("%*c");
    } while (strcmp(c,quiter) != 0); 
```

感谢大家的帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-15T12:59:04.483

虽然看起来您已经找到了解决方案，但值得一提的是，您所要求的听起来似乎与标准的“getopt”功能相去甚远……见[http://](http://www.gnu.org/software/libc/manual/html_node/Getopt.html)例如[www.gnu.org/software/libc/manual/html_node/Getopt.html 。](http://www.gnu.org/software/libc/manual/html_node/Getopt.html)**

# html - 我怎样才能让这个网站上的选项卡的边框以四舍五入的形式显示？

> ID：10157993
> 
> 赞同：1
> 
> 时间：2012-04-14T22:49:24.257
> 
> 标签：html, css, internet-explorer, firefox

我有一个网站....

[http://samyoga.apphb.com](http://samyoga.apphb.com)

当我查看 Firebug 时，我会在导航选项卡上看到圆形边缘。但是，当我查看 IE 时，我没有。在我得到的 IE 开发人员工具中查看 CSS 时，真正让我感到困惑的是……

![在此处输入图像描述](../Images/41ada2059d2d48b870feee276aeac331.png)

但是当我查看 CSS 时，我...

```
#menu {
    width: 940px;
    height: 58px;
    margin: 0px auto;
    padding: 0px 20px 0px 20px;
}

#menu ul {
    margin: 0;
    padding: 0px 0px 0px 0px;
    list-style: none;
    line-height: normal;
    text-align: center;
}

#menu li {
    display: inline;
    text-align:justify;
}

#menu a {
    margin: 0px;
    padding: 10px 12px 10px 12px;
    line-height: 56px;
    letter-spacing: 1px;
    text-decoration: none;
    text-transform: uppercase;
    font-family: 'Oswald', sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #262626;
    border: none;
}

/*set the radius*/
#menu .current_page_item a, #menu .current_page_item a:hover {
    background: #E91370;
    color: #FFFFFF;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
    border-top-left-radius:4px;
}

#menu a:hover {
    background: #FF77C8;
    text-decoration: none;
    color: #FFFFFF;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
    border-top-left-radius:4px;

} 
```

地球上所有这些额外的属性是从哪里来的？以及如何使边缘变圆，因为当我设置 ^ CSS 时它不会在 IE 上显示，不确定我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T22:51:19.363

使用文档类型，以便 IE 切换到标准模式以显示页面。目前您处于 Quirks 模式，大致是 IE 5 的页面呈现。你不想要那个。曾经。

你没有看到它让我有点惊讶，因为你已经在开发者工具中，渲染模式显示在菜单栏中：

![在此处输入图像描述](../Images/13ef7d250d9f20fb42dcf70b56867ace.png)

而且我不确定您所说的“所有这些额外属性”是什么意思。看起来 IE 扩展了填充、边距和边框的速记属性，所以你看到的比定义的要多，但它们是相同的规则。

# python - scipy.weave.inline 在数学库中没有按预期工作

> ID：10157994
> 
> 赞同：2
> 
> 时间：2012-04-14T22:49:29.847
> 
> 标签：python, numpy, scipy

我在使用 scipy.weave.inline 时遇到问题。我想编写一个以 lcenter 为中心的 unitstep 函数，其宽度为 nm。我有两个版本：python 版本，称为 pm 和优化函数，称为 pm_weave，但看起来 abs 无法正常工作。请参阅下面的代码。如果你运行它，无论输入是什么，你都会得到一个大小为 1 的编织品种窗口，所以看起来 abs 不起作用。例如，如果你去掉腹肌，它的工作原理和你期望的完全一样

我怎样才能解决这个问题？

```
def pm_weave(w,lcenter,width_nm):
  """ Return a unitstep function that is centered around lcenter with height 1.0 and width width_nm """
  lcenter = float(lcenter)
  w = float(w)
  width_nm = float(width_nm)
  code = """
  #include <math.h>
  float wl = 1.88495559215387594307758602997E3/w;

  if(abs(lcenter-wl) < width_nm) {
     return_val = 1.0;
     }
     else {
     return_val = 0.0;
     }
  """
  res = weave.inline(code,['w','lcenter','width_nm'],
                     type_converters = weave.converters.blitz,
                     compiler = "gcc", headers=["<math.h>"]
                    )
  return res

def pm(w,lcenter,width_nm):
  """ 
  Return a unitstep function centered around lcenter [nm] with width width_nm. w
  should be a radial frequency. 
  """
  return abs(600*np.pi/w - lcenter) < width_nm/2\. and 1\. or 0.

plot(wavelength_list,map(lambda w:pm(toRadialFrequency(w),778,1),wavelength_list),label="Desired behaviour")
plot(wavelength_list,map(lambda w:pm_weave(toRadialFrequency(w),778,1),wavelength_list),'^',label="weave.inline behaviour")
ylim(0,1.5)
show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:57:43.980

我认为您可能需要在 C 代码中使用`fabs()`而不是。将截断结果，同时适用于浮点运算。`abs()``abs()``fabs()`

# javascript - Rails 3.1.3：在 JavaScript 之前评估 ruby 代码

> ID：10157997
> 
> 赞同：0
> 
> 时间：2012-04-14T22:50:19.303
> 
> 标签：javascript, ruby-on-rails

我有控制器说 Home_controller 提供@max = 10 @min=4。然后我后来在我的 Home.js.erb 文件中使用了这两个值，该文件位于 /asset/javascript 中。

```
values= [<%=@max%>,<%=@min%>] 
```

但它似乎不起作用，因为当我从 firebug 查看生成的 javascript 文件时，无论我有`@max`或`@min`，它们都显示为空白。

这里发生了什么？我是 Rails 资产管道的新手，所以在这里我可能会有一些误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:55:19.150

Rails 将实例变量从**Controller**传递到**View**。因此，您希望将**home.js.erb**放在视图文件夹中，而不是资产中。