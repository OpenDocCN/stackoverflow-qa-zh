# StackOverflow 问答 11606000-11606999

# php - 创建安全的 PHP 请愿书

> ID：11606001
> 
> 赞同：2
> 
> 时间：2012-07-23T03:09:18.100
> 
> 标签：php, mysql, database-security

我启动了一个带有在线承诺组件的网站，它不断被使用 html/javascript 的人入侵/利用，从而在签名页面上发生疯狂的事情。我不知道如何从字段中编写非 alpha 脚本以防止这种情况发生。

下面是我用来在数据库中记录表单数据的代码。关于如何实现 preg_replace 函数的任何建议（如果这是最好的）？此外，这是防止漏洞利用的最佳位置，还是有其他更理想的地方？

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
    $insertSQL = sprintf("INSERT INTO signature (FirstName, LastName, Email, State, Country, `TSDate`, IP) VALUES (%s, %s, %s, %s, %s, %s, %s)",
                   GetSQLValueString(($_POST['FirstName']), "text"),
                   GetSQLValueString(($_POST['LastName']), "text"),
                   GetSQLValueString(($_POST['Email']), "text"),
                   GetSQLValueString(($_POST['State']), "text"),
                   GetSQLValueString($_POST['Country'], "text"),
                   GetSQLValueString($_POST['Date'], "date"),
                   GetSQLValueString($_POST['IP'], "text"));
mysql_select_db($database_petitionscript, $petitionscript);
$Result1 = mysql_query($insertSQL, $petitionscript) or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:11:42.917

你应该用 htmlspecialchars 包装你所有的 $_POST 变量

[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

此外，如果您使用的是 PHP5，则应该使用 PDO 对象来连接数据库，并且不应将 var 直接放入 MySQL 查询中（这允许 SQL 解析器从用户处注入 SQL 代码）。您需要使用参数化查询。 [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

（实际上我刚刚意识到您正在使用参数化查询）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:24:09.810

您可以使用表单标记。实施可能需要一点时间，但很简单：

当 PHP 提供表单时，生成一个随机字符串并将其作为“令牌”保存到数据库中。在表单上有一个带有该令牌的隐藏字段。

当您收到用户提交的表单数据时，仅当提供的令牌存在于数据库中时才对其进行处理。（然后删除令牌）。

这将有助于防止人们自动化提交表单的过程，因为他们每次都需要重新加载表单并提交令牌（大多数脚本小子不会打扰。）

您可以通过执行诸如将令牌绑定到用户会话以及只允许每个会话一个令牌等事情来进行更多、更进一步的操作，但它可能是一个很好的起点。

实际上，看起来这可以只使用不接触数据库的[会话来完成，可能会更容易一些。](http://aaronsaray.com/blog/2010/10/12/easiest-form-token-class-to-prevent-csrf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T03:16:25.943

使用 . 清理所有输出`htmlentities()`。

例如，而不是做

```
<?php echo $FirstName; ?> 
```

做：

```
<?php echo htmlentities($FirstName); ?> 
```

这将阻止您描述的疯狂 HTML/JavaScript 的 XSS 攻击。

此外，要防止 SQL 注入，您还应该`$_POST`在保存输入（数据）之前对其进行清理。

# ios - 更改 UITextField 和 UITextView 光标/插入符号颜色

> ID：11606007
> 
> 赞同：239
> 
> 时间：2012-07-23T03:09:44.323
> 
> 标签：ios, colors, uitextfield, uitextview, text-cursor

我想知道在iOS中更改光标/插入符号的颜色`UITextField`（`UITextView`如果它的答案相同）。我已经看到了 OSX 开发的答案，但没有看到 iOS 的答案。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：553
> 
> 时间：2013-09-22T16:10:57.520

如果您的目标是 iOS 7+，这会变得容易得多。只需使用外观代理使用光标更改`tintColor`字段的 ，它将应用于整个应用程序：

斯威夫特 3.0：

```
UITextField.appearance().tintColor = .black 
```

目标-C：

```
[[UITextField appearance] setTintColor:[UIColor blackColor]]; 
```

同样的答案适用于个人`UITextField`：

斯威夫特 3.0：

```
myTextField.tintColor = .black 
```

Objective-C

```
[myTextField setTintColor:[UIColor blackColor]]; 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-09-12T08:51:26.373

使用 iOS7，您可以简单地更改 textField 的 tintColor

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-03-12T20:15:21.393

**斯威夫特 3：**

```
 UITextField.appearance().tintColor = UIColor.black
  UITextView.appearance().tintColor = UIColor.black 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-30T13:25:16.807

```
yourTextField.tintColor = [UIColor whiteColor]; 
```

如果您在代码中设置它，它会起作用，因为在 Interface Builder (Xcode 6.1.1)**中颜色触发器无法做到这一点。**它非常适合，无需更改任何外观代理。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-01-21T12:37:58.590

**注意：此答案已过时，应仅用于 iOS 7 之前的开发。在 iOS 7 中使用外观代理查看 1 行解决方案的其他答案。**

在我正在从事的项目中遇到同样的问题后，我提出了这个问题。

我设法创建了一个将被 AppStore 审查团队接受的解决方案，因为它不使用任何现有的私有 API。

我创建了一个名为 DGTextField 的控件，它扩展了 UITextField。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-11-16T05:55:16.817

设置和`tintColor`工作方式不同。虽然你不需要在更新后调用额外的代码来改变光标颜色，但你需要。`UITextField``UITextView``UITextField``tintColor``UITextView`

因此，在设置后`tintColor`（`UITextView`在 IB 或代码中无关紧要），您需要调用`textView.tintColorDidChange()`才能应用它（实际上它会将文本视图的配置向下传递到其子视图层次结构）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-06-08T02:14:02.850

这对我来说很快：

```
UITextField.tintColor = UIColor.blackColor() 
```

您也可以在情节提要中进行设置：[https ://stackoverflow.com/a/18759577/3075340](https://stackoverflow.com/a/18759577/3075340)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-10-04T14:38:33.177

更通用的方法是设置 UIView 的外观 tintColor。

```
UIColor *myColor = [UIColor purpleColor];
[[UIView appearance] setTintColor:myColor]; 
```

如果您使用许多默认 UI 元素，这很有意义。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-07T10:24:23.703

**试试看，它对我有用。**

```
[[self.textField valueForKey:@"textInputTraits"] setValue:[UIColor redColor] strong textforKey:@"insertionPointColor"]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-23T13:01:19.593

只有通过访问私有属性才有可能，因此可能会导致 Apple AppStore 应用程序被拒绝。

[看看这个 Stackoverflow 问题](https://stackoverflow.com/questions/2190352/change-color-of-cursor-in-text-field)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-08-02T12:23:55.753

我想如果你想要一些自定义颜色，你可以去`Assets.xcassets`文件夹，右键单击并选择`New Color Set`，一旦你创建了你设置的颜色，给它一个名称以重复使用它。

你可以像这样使用它：

```
import UIKit 

class ViewController: UIViewController {
    override func viewDidLoad() {
        super.viewDidLoad()
        UITextField.appearance().tintColor = UIColor(named: "YOUR-COLOR-NAME")  #here
    }
} 
```

在 macOS 10.15 / iOS 13 / Swift 5 上测试

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-05-28T01:43:53.213

对于在 SwiftUI 中搜索等效项的人`Textfield`来说`accentColor`：

```
TextField("Label", text: $self.textToBind).accentColor(Color.red) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-09-16T18:41:57.610

Durgesh 的方法确实有效。

我也多次使用过这样的 KVC 解决方案。尽管它似乎没有记录，但它确实有效。坦率地说，您在这里没有使用任何私有方法——只有合法的键值编码。

PS 昨天我的新应用出现在 AppStore 上，这种方法没有任何问题。当我使用 KVC 更改一些只读属性（如 navigatonBar）或私有 ivars 时，这不是第一种情况。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-03T06:48:05.590

对于带有 Swift 的 Interface Builder 版本

```
@IBOutlet weak var tvValue: UITextView! {
        didSet {
            tvValue.tintColor = .black
        }
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-08-22T05:45:35.307

如果`UITextField`是 from`UISearchBar`那么首先获取`textField`from`searchBar`然后应用`tintColor`属性：

```
let textFieldInsideSearchBar = searchBar.value(forKey: "searchField") as? UITextField
textFieldInsideSearchBar?.tintColor = UIColor.lightGray 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-02-21T08:47:00.673

斯威夫特 4

在 viewDidLoad() 中只需调用以下代码：

**代码示例**

```
//txtVComplaint is a textView

txtVComplaint.tintColor = UIColor.white

txtVComplaint.tintColorDidChange() 
```

# ruby-on-rails - capistrano 编译错误

> ID：11606012
> 
> 赞同：0
> 
> 时间：2012-07-23T03:10:59.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment, capistrano

我已经设置了我的 deploy.rb 并且在经历了很多痛苦之后，我让它正确部署了 3 次。我不确定发生了什么变化......因为我在过去 8 小时内一直在处理问题，但现在出现了一个以前不存在的错误。

这是失败的地方

```
failed: "sh -c 'cd /home/username/u/apps/appname/releases/20120723030325 && #<Capistrano::Configuration::Namespaces::Namespace:0x007fef8a0826f0> RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on example.com 
```

我唯一能想到的与我添加的不同的是

```
namespace :rake do  
  task :seed, :roles => :app do
    run "cd #{deploy_to}/current && /usr/bin/env rake db:seed RAILS_ENV=production"
  end 
end 
```

可能相关的另一件事，但我不明白如何......在我的production.log中它说modernizr不是预编译的。那是因为它实际上不在 application.js 中，原因是它需要放在 html 文档的顶部，而不是所有的底部，所以我只使用了标准的 javascript_include 标记，但我没有放它是包含树。虽然，它部署了 3 次，所以我无法想象这就是问题所在。那只是我需要弄清楚的下一个：/

其他重要说明。我在需要使用的地方读到了`gem "therubyracer", :require => 'v8'`，所以我也使用它`group :production`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:31:30.913

问题是我的`task :rake`......这是覆盖 capistranos :rake 命名空间，它不允许我进行预编译。我已将任务 :rake 及其内容删除到不同的命名空间，现在它可以工作了

# java - 空异常java

> ID：11606017
> 
> 赞同：0
> 
> 时间：2012-07-23T03:11:46.817
> 
> 标签：java, nullpointerexception

每当我运行它时，我都会收到一条错误消息，提示 java.lang.NullPointerException: null from a code。

这是代码：

```
public class APRectangle
{
    private APPoint myTopLeft;
    private APPoint myTopRight;
    private APPoint myBottomLeft;
    private APPoint myBottomRight;
    private double  myWidth;
    private double  myHeight;

    public APRectangle( APPoint topLeft, double width, double height )
    {
        myTopLeft = topLeft;
        myWidth = width;
        myHeight = height;
    }

    public APPoint getTopLeft()
    {
        return myTopLeft;
    }

    public void setTopLeft( APPoint TL )
    {
        myTopLeft = TL;
    }

    public double getWidth()
    {
        return myWidth;
    }

    public void setWidth( double W )
    {
        myWidth = W;
    }

    public double getHeight()
    {
        return myHeight;
    }

    public void setHeight( double H )
    {
        myHeight = H;
    }

    public APPoint getTopRight()
    {
        return new APPoint( myTopLeft.getX() + myWidth, myTopLeft.getY() );
    }

    public APPoint getBottomLeft()
    {
        return new APPoint( myTopLeft.getX(), myTopLeft.getY() - myHeight );
    }

    public APPoint getBottomRight()
    {
        return new APPoint( myTopRight.getX(), myTopRight.getY() - myHeight );
    }
} 
```

最后一种方法是给我错误的方法。

这是我的主要课程：

```
public class MainClass
{
 public MainClass()
 {
    }

 public static String printAPPoint( APPoint p )
 {
     return "(" + p.getX() + "," + p.getY() + ")";
    }

 public static String printAPRectangle( APRectangle R)
 {
     return "[APRectangle " + printAPPoint(R.getTopLeft()) +
            " " + R.getWidth() + "," + R.getHeight() + "]" ;
 }

  public static String printTopLeft( APRectangle R )
 {
     return "(Top Left is " + printAPPoint(R.getTopLeft()) + ")" ;
    }

 public static String printTopRight( APRectangle R )
 {
     return "(Top Right is " + printAPPoint(R.getTopRight()) + ")" ;
    }

public static String printBottomLeft( APRectangle R )
{
    return "(Bottom Left is " + printAPPoint(R.getBottomLeft()) + ")";
}

public static String printBottomRight( APRectangle R )
{
    return "(Bottom Right is " + printAPPoint(R.getBottomRight()) + ")";
}

 public static void main(String[] args)
 {
     APPoint p = new APPoint(1.0, 5.0 );
     APRectangle R = new APRectangle( p, 5.0, 3.0);
     System.out.println(printAPRectangle(R));
     System.out.println(printTopLeft(R));
     System.out.println(printTopRight(R));
     System.out.println(printBottomLeft(R));
     System.out.println(printBottomRight(R));
     System.out.println( "Done!" );
  }

} 
```

最后一种方法之前的三种方法效果很好，但我不知道为什么最后一种方法不起作用。有人能帮助我吗？

谢谢，罗汉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:20:43.547

您忘记初始化`myTopRight`、`myBottomLeft`和`myBottomRight`。其他方法可以正常工作，因为您不使用它们的实际点（但您可能应该）。AP计算机科学？

顺便说一句，您的异常消息是这样说的：我们有问题，因为我们的对象之一不存在。我们在尝试 APRectangle.getBottomRight（第 59 行）时发现了问题。我们正在做 APRectangle.getBottomRight 因为 MainClass.printBottomRight（第 35 行）告诉我们这样做。我们正在做 MainClass.printBottomRight 因为 MainClass.main（第 46 行）告诉我们这样做。希望这可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:15:19.770

您永远不会在构造函数中初始化 myTopRight、myBottomLeft 或 myBottomRight。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T03:15:56.000

您尚未初始化/实例化 `some`字段。`fields`在使用它们之前，您应该始终进行初始化。

像这样的东西：

```
public APRectangle( APPoint topLeft, double width, double height )
    {
         myTopLeft=topLeft;
         myTopRight=new APPoint(0,0);
         myBottomLeft=new APPoint(0,0);
         myBottomRight=new APPoint(0,0);
         myWidth=width;
         myHeight=height;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T03:18:08.030

NullPointerException 意味着您有一个空值被取消引用。例如，如果您在以下代码行中遇到该异常：

```
 foo.doSomething(); 
```

那将意味着`foo == null`。

你可以：

1.  连接一个调试器并在抛出异常之前放置一个断点以检查状态，或者......
2.  在相关的代码中添加一些 println

其中任何一个都可以帮助您确定哪个变量为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T03:34:48.013

检查 myTopRight 变量。你的异常可能会导致这个值为null。调试一下吧。

# c# - PictureBox 的绘画事件导致闪烁 - 我还能在哪里执行此操作？

> ID：11606022
> 
> 赞同：1
> 
> 时间：2012-07-23T03:12:54.373
> 
> 标签：c#, winforms, compact-framework, windows-mobile-6.5

我正在使用 Psion 的 SDK 在移动设备上提供签名控制。我想在签名控件（这是一个图片框）周围绘制一个矩形。我在Paint事件中放入了以下内容，但问题是它闪烁（当你在图片框上签名时，图片框一直在刷新。

有没有办法可以将它放入表单的加载事件中，所以它只加载一次？我知道它需要有 PainEventArgs 但我不太确定。

```
 private void scSignature_Paint(object sender, PaintEventArgs e)
    {
        e.Graphics.DrawRectangle(new Pen(Color.Black, 2f), 0, 0,
            e.ClipRectangle.Width - 1,
            e.ClipRectangle.Height - 1
            );
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T14:49:46.547

在 CF 中绘画时防止闪烁和垃圾产生的提示：

1.  覆盖 OnPaintBackground 并将其留空
2.  如果您有多个操作，请不要直接绘制`Graphics`交给您。而是创建一个`Bitmap`缓冲区，在其中绘制，然后将该位图的内容绘制到`Graphics`
3.  不要在上面的 #2 中为每个 Paint 创建缓冲区。创建一个并重用它。
4.  不要重绘静态项目（如签名控件中的框）。相反，将其绘制一次到 buffered`Bitmap`中，将该位图绘制到 #2 中的缓冲区，然后绘制动态项
5.  不要用每种油漆创建钢笔、画笔等。缓冲和重用。

在您的情况下，这些建议可能如下所示：

```
class Foo : Form
{
    private Bitmap m_background;
    private Bitmap m_backBuffer;
    private Brush m_blackBrush;
    private Pen m_blackPen;

    public Foo()
    {
        m_blackBrush = new SolidBrush(Color.Black);
        m_blackPen = new Pen(Color.Black, 2);

        // redo all of this on Resize as well
        m_backBuffer = new Bitmap(this.Width, this.Height);
        m_background = new Bitmap(this.Width, this.Height);
        using (var g = Graphics.FromImage(m_background))
        {
            // draw in a static background here
           g.DrawRectangle(m_blackBrush, ...);
            // etc.
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
    }

    protected override void  OnPaint(PaintEventArgs e)
    {
        using (var g = Graphics.FromImage(m_backBuffer))
        {
            // use appropriate back color
            // only necessary if the m_background doesn't fill the entire image
            g.Clear(Color.White);

            // draw in the static background
            g.DrawImage(m_background, 0, 0);

            // draw in dynamic items here
            g.DrawLine(m_blackPen, ...);
        }

        e.Graphics.DrawImage(m_backBuffer, 0, 0);         
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:56:08.173

这当然不是一个优雅的方法，但是如果您可以确保您的图片框完全没有边框，您可以改为在图片框容器控件上绘制一个实心矩形。将其放置在图片框的正后方，使其各边宽 1px，因此它看起来像图片框周围的 1px 边框。

可能的示例（覆盖包含图片框的控件的 OnPaint 方法）：

```
protected override OnPaint(object sender, PaintEventArgs e)
{
     base.OnPaint(sender, e);
     int x = scSignature.Location.X - 1;
     int y = scSignature.Location.Y - 1;
     int width = scSignature.Size.Width + 2;
     int height = scSignature.Size.Height + 2;
     using (Brush b = new SolidBrush(Color.Black))
     {
        e.Graphics.FillRectangle(b,x,y,width,height);
     }

} 
```

# json - 将 JSON 对象转换为 JSON 数组

> ID：11606024
> 
> 赞同：0
> 
> 时间：2012-07-23T03:13:21.187
> 
> 标签：json, web-services, rest, jsonp, arrays

我有问题。我的应用程序不会从我的 Web 服务加载资源，因为它的格式已更改。

在我的 Web 服务返回一个 JSON 数组之前，如下所示：

```
[{"productid":2,"sku":"SKU-2","productname":"SMART NEW","productdesc":"description","category":"default category","price":2000.1,"picture":"http://10.23.20.50:8080/msos-ws/images/products/smart.gif","remarks":"remarks"}] 
```

现在我猜它返回一个 JSON 对象：

```
{"product":[{"category":"default category","picture":"http://localhost:8080/msos-ws/images/products/smart.gif","price":"480.0","productdesc":"Dragon Flash Disk (Special)","productid":"7","productname":"Kingston 8GB","remarks":"remarks","sku":"SKU-7"}]} 
```

这是我在后端的代码：

```
@GET
@Override
@Produces("application/json")
public List<Product> findAll() {
        return prodManager.getProducts();
} 
```

我正在返回一个列表，所以它应该在数组中，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:03:09.907

你得到的是一个键/值对，其中键是

```
product 
```

并且 1 元素数组是

```
[{"category":"default category","picture":"http://localhost:8080/msos-ws/images/products/smart.gif","price":"480.0","productdesc":"Dragon Flash Disk (Special)","productid":"7","productname":"Kingston 8GB","remarks":"remarks","sku":"SKU-7"}] 
```

参考 www.json.org/javadoc/org/json/JSONObject.html ，看看以下方法：

```
public java.lang.Object get(java.lang.String key)

public JSONObject put(java.lang.String key,
                  java.util.Collection value) 
```

现在修改您的应用程序以加载资源应该很容易:)

# python - 在python中搜索索引

> ID：11606028
> 
> 赞同：0
> 
> 时间：2012-07-23T03:13:44.597
> 
> 标签：python, indexing

当我遇到障碍时，我试图在 Godel, Escher, Bach 一书中编写 MIU 形式系统。我对计算机科学和python相当陌生，因此是基础问题。

```
derivations = [[0,'MI'],[1,'MII','MIU'],[2,'MIUIU','MIIU','MIII']] 
```

我想创建派生子索引的索引，这些索引在每个子索引的开头都有一个树深度号。通过该整数隔离这些子索引以通过循环运行以下字符串的最佳方法是什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:12:40.843

在我看来，你想要这样的东西：

```
depthDict = {x[0]:x[1:] for x in derivations} 
```

它将带您列出列表并`dict`以第一个元素为键构造 a 。这样，您可以通过**树深度号**访问字符串列表，如下所示：

```
print depthDict [1] # prints ['MII', 'MIU'] 
```

或者

```
for myString in depthDict[3]:
  print myString # prints MII and MIU 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:41:42.267

如果您正在搜索特定的子索引，您可以通过以下方式进行：

```
>>> sub_indexes = [index for index where index[0] == 1]
>>> sub_indexes
[[1,'MII','MIU']] 
```

这将返回深度为 1 的所有子索引。请注意，结果将是与搜索条件匹配的所有索引的列表，因此要获取索引，您需要执行以下操作：

```
>>> sub_index = sub_indexes[0]
>>> sub_index
[1, 'MII', 'MIU']] 
```

在此之后，您可以通过以下方式处理字符串：

```
depth = sub_index[0]
for mu_string in [item for item in sub_index if hasattr(item, 'count')]:
    new_strings = generate_more_strings(mu_string, depth) 
```

where`generate_more_strings(my_string)`将生成给定字符串的变体。

# objective-c - 将 nsarray 传递给另一个方法

> ID：11606030
> 
> 赞同：0
> 
> 时间：2012-07-23T03:14:17.113
> 
> 标签：objective-c, ios, nsarray, xcode4.3

我是目标 c 的新手。我正在尝试使用按钮将数组传递给另一个视图控制器。我将另一个方法中的数组存储到`alight`我在 .h 文件中声明的 NSArray ( ) 中

```
(IBAction) transportAction:(id)sender
{
    NSURL *url = [NSURL URLWithString:format];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSDictionary *jsonResult = [NSJSONSerialization JSONObjectWithData:result options:kNilOptions error:&error];
    NSArray *Route=[jsonResult objectForKey:@"Route"];
    self.alight = Route;
    NSLog(@"alight = %@", alight);
} 
```

我将它传递给按钮的 IBAction

```
(IBAction)table:(id)sender 
{
    AlightDescTableViewController *view = [[AlightDescTableViewController alloc] initWithNibName:nil bundle:nil];
    self.descData = view;
    descData.alightDesc = alight;
    [self presentModalViewController:view animated:NO];
    NSLog(@"alight = %@", alight);
} 
```

.h 文件中的声明：

```
@interface ViewController : UIViewController
{
    AlightDescTableViewController *descData;
    NSArray *alight;
}
@property (retain, nonatomic) AlightDescTableViewController *descData;
@property (nonatomic, assign) NSArray *alight; 
```

但如果我让 NSLog 检查是否亮起，它会显示 ( `null`)。我是不是用错误的方法做这件事？或者我的代码有什么问题？

第一个显示我想要的数据，但第二个返回一个空值......

# javascript - 检查未定义的变量

> ID：11606032
> 
> 赞同：-1
> 
> 时间：2012-07-23T03:14:36.597
> 
> 标签：javascript

> **可能重复：**
> [如何在 javascript 中检查未定义或空变量](https://stackoverflow.com/questions/2559318/how-to-check-for-undefined-or-null-variable-in-javascript)

我想检查 javascript 中定义的变量。请查看以下几个示例并帮助我在Javascript中检查'a'是否未定义（并且不检查其他内容）的最佳方法？

一

> 如果（a === 未定义）{ ... }

第二

> if(a === "未定义") { ... }

第三

> if(typeof a == "未定义") { ... }

最后的

> 如果一个） { ... }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:17:56.940

`if(typeof a == "undefined") { ... }`是检查变量是否未定义的最佳方法。
`if(a === undefined) { ... }`通常是同一件事，然而，与普遍看法相反，“未定义”不是 javascript 中的关键字，实际上可以为其分配一个值。此外，如果`a`尚未声明或初始化，则会引发错误。

`if(a === "undefined") { ... }`将检查 a 是否是一个值为“未定义”的字符串，并
`if(a) { ... }`为所有假值返回真，例如`null`和 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T03:18:10.887

```
if (typeof a == "undefined") {
    ....
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T03:20:58.217

`undefined`在 javascript 中是一个实际值，所以如果你这样做`a === "undefined"`，你只是检查一个已经定义的变量是否具有`undefined`分配给它的值。如果变量还没有被提升，那么你会得到一个很好的错误。

`if(a)`正在检查的值`a`是`true`还是`false`。`undefined`在 JS 中，许多其他值都是错误的，因此它表现为错误。不过，如果之前没有声明变量，那么这也会引发错误。

`typeof a === "undefined"`是检查可能尚不存在的变量的正确方法。

# c# - 如何传递给实现 certan 接口的泛型函数类类型？

> ID：11606041
> 
> 赞同：3
> 
> 时间：2012-07-23T03:16:00.307
> 
> 标签：c#, .net, .net-4.0

我想创建一个具有这样签名的通用函数：需要`void funcName<T>()`在哪里`T`实现我想要的某些特定接口。如何进行这样的检查？如何传递给实现 certan 接口的泛型函数类类型？

所以我创建了一些`public interface IofMine {}`，并尝试创建一个类似的函数`public static void funcName<T>() where T : IofMine { var a = new T}`，遗憾的是我得到了：

> 错误：无法创建变量类型“T”的实例，因为它没有 new() 约束

我应该怎么做才能使我的函数接收的类类型不仅是我想要的接口而且还有一个构造函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T03:59:24.123

为了要求泛型参数具有默认构造函数，请指定`new()`为泛型约束的一部分。

```
public static void funcName<T>() where T : IofMine, new()
{
    T a = new T();
} 
```

您只能使用它来要求默认（即无参数）构造函数。例如，您不能要求构造函数采用字符串参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T03:21:44.563

简单的：

```
public void FuncName<T>(...) 
    where T : IMyInterface
{
    ...
} 
```

这会在类型参数上创建一个约束，`T`以便调用该方法时使用的任何类型都必须实现`IMyInterface`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T03:21:54.877

这是您声明它的方式：

```
// Let's say that your function takes
// an instance of IMyInterface as a parameter:
void funcName<T>(T instance) where T : IMyInterface {
    instance.SomeInterfaceMethodFromMyInterface();
} 
```

这就是你所说的：

```
IMyInterface inst = new MyImplOfMyInterface();
funcName(inst); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T03:21:56.860

如果我理解你是正确的，你需要使用泛型约束：

```
public interface TestInterface
{
}

public void func<T>()
    where T : TestInterface
{ 

} 
```

[http://msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

# java - 与休眠弹簧中的单向映射和双向映射混淆

> ID：11606043
> 
> 赞同：0
> 
> 时间：2012-07-23T03:16:09.713
> 
> 标签：java, spring, hibernate, data-modeling

我对单向映射和双向映射有点困惑。

假设我有

`class Organisation`

这`many to many`与`country`.

所以一个国家可以有很多组织，组织可以属于很多国家

现在从 ORM 的角度来看，这应该是单向或双向的。

因为当我创建组织时我想要那个。它应该有用于选择国家的选择框

但是当我创建国家时，它不应该总是要求我选择组织。但我确实需要获取特定国家/地区的组织名单。

所以我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:42:29.753

因为您似乎经常需要从*组织*导航到连接的*国家*实体的集合以及反向，所以您需要这两者之间的双向关系。

多对多关系的性质是可选的。当您创建*Country*的新实例时，您不必选择*Organization* (s)。模型允许您这样做，但这不是强制性的。*国家*和*组织*都可以在没有任何关联实体的情况下存在。

# c# - Include 和 Where 谓词导致左连接而不是内连接

> ID：11606044
> 
> 赞同：9
> 
> 时间：2012-07-23T03:16:14.537
> 
> 标签：c#, linq, entity-framework, linq-to-entities

具有以下表结构（删除了无关列）

```
create table [Events]
(
    ID int not null identity,
    Name nvarchar(128) not null,
    constraint PK_Events primary key(ID)
)

create table [Donations]
(
    ID int not null identity,
    EventID int not null,
    Amount decimal(10, 2) not null,

    constraint PK_Donations primary key(ID),
    constraint FK_Donations_Events foreign key(EventID) references [Events](ID) on update no action on delete no action
) 
```

我使用以下 Linq-to-Entities 查询：

```
// 1
ents.Donations.Where(d => d.Amount > 25.0m && d.Event.Name.Contains("Run")).ToList();

// 2
ents.Donations.Include("Event").Where(d => d.Amount > 25.0m).ToList();

// 3
ents.Donations.Include("Event").Where(d => d.Amount > 25.0m && d.Event.Name.Contains("Run")).ToList(); 
```

产生（来自 SQL Profiler）：

```
-- 1
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[EventID] AS [EventID], 
[Extent1].[Amount] AS [Amount]
FROM  [dbo].[Donations] AS [Extent1]
INNER JOIN [dbo].[Events] AS [Extent2] ON [Extent1].[EventID] = [Extent2].[ID]
WHERE ([Extent1].[Amount] > 25.0) AND ([Extent2].[Name] LIKE N'%Run%')

-- 2
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[EventID] AS [EventID], 
[Extent1].[Amount] AS [Amount], 
[Extent2].[ID] AS [ID1], 
[Extent2].[Name] AS [Name]
FROM  [dbo].[Donations] AS [Extent1]
INNER JOIN [dbo].[Events] AS [Extent2] ON [Extent1].[EventID] = [Extent2].[ID]
WHERE [Extent1].[Amount] > 25.0

-- 3
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[EventID] AS [EventID], 
[Extent1].[Amount] AS [Amount], 
[Extent3].[ID] AS [ID1], 
[Extent3].[Name] AS [Name]
FROM   [dbo].[Donations] AS [Extent1]
INNER JOIN [dbo].[Events] AS [Extent2] ON [Extent1].[EventID] = [Extent2].[ID]
LEFT OUTER JOIN [dbo].[Events] AS [Extent3] ON [Extent1].[EventID] = [Extent3].[ID]
WHERE ([Extent1].[Amount] > 25.0) AND ([Extent2].[Name] LIKE N'%Run%') 
```

为什么在第三个查询中，它会第二次`LEFT OUTER JOIN`在`Events`表上生成一个？`[Extent2]`虽然查询产生了正确的结果，但似乎很奇怪，为什么 EF / LINQ 不能在`SELECT`and子句中重用`WHERE`，为什么它是`LEFT OUTER JOIN`?

我正在使用 Visual Studio 2010 sp1 .NET 4，并且正在连接到 Sql Server 2008 Express。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T04:39:22.267

左连接将确保在捐赠指向不存在的事件的情况下，捐赠表中不会丢失任何行。他们不希望 Include 关键字具有导致原始表中缺少行的副作用，因此他们必须使用左连接以确保安全。

关于将表格包含两次，这可能只是 EF 的限制。您在查询中提到它两次，它不够聪明，无法进行优化。

不得不说，如果你想优化SQL那就写SQL，别费心EF了。您正在做的事情可以比作反编译 C# 并询问为什么汇编程序没有进行某种优化。如果您使用 EF，那么请对它产生的 SQL 视而不见 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:47:07.343

不是直接回答您的问题，而是在阅读您对其他答案的评论后尝试为您指明正确的方向：

您拥有捍卫某些 ORM 使用（包括 EF）所需的一切——这就是您所说的关于 SP 的数量和质量的全部内容。如果 sql 写得不好或难以维护，任何方法都会有问题，包括纯 sql。

所以，如果某些ORM（EF等）有时会产生效率不高的代码，而这确实会造成性能问题，这就变成了“需求”，需要解决，即使使用SP也是如此。

所以，从业务的角度来看你的问题——你的结构很糟糕，很难维护一堆存储过程。您的团队中的大多数人可能是 C# 而不是 SQL 开发人员。

使用 ORM 将增加代码库的可维护性，并允许更好地使用所有团队成员的 C# 专业知识。

由 ORM 在某些特定场合生成的糟糕 SQL 代码对于使用该技术几乎是“不可行的”，除非证明它会产生比解决现有问题更多的问题。

# android - 在选项卡内容中更改 Android 背景颜色

> ID：11606045
> 
> 赞同：1
> 
> 时间：2012-07-23T03:16:16.650
> 
> 标签：android, tabs

我觉得我错过了一些非常简单的东西。过去我已经更改了其他应用程序的背景颜色，但这是我制作的第一个实现选项卡的应用程序。我要做的就是将应用程序内容的背景设置为黑色，其中有一堆按钮。通常我只会更改线性布局或黑色的东西，但我已经使用 #000000 将很多东西更改为黑色，但它不再起作用了。我确定 tabhost 与它有关，但我需要朝着正确的方向前进。这是我的layout.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#000000" >

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="#000000" >

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:background="#000000" >

                    <LinearLayout
                        android:id="@+id/tab1"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:orientation="vertical" >

                        <Button
                            android:id="@+id/button1"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:background="@drawable/buttonbg"
                            android:gravity="center_horizontal"
                            android:padding="10dp"
                            android:shadowColor="#f5f5f5"
                            android:shadowDx="1"
                            android:shadowDy="1"
                            android:shadowRadius="1"
                            android:textColor="#DAA520"
                            android:textSize="12pt" />

                        <Button
                            android:id="@+id/button2"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:background="@drawable/buttonbg"
                            android:gravity="center_horizontal"
                            android:padding="10dp"
                            android:shadowColor="#f5f5f5"
                            android:shadowDx="1"
                            android:shadowDy="1"
                            android:shadowRadius="1"
                            android:textColor="#DAA520"
                            android:textSize="12pt" />

                        <Button
                            android:id="@+id/button3"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:background="@drawable/buttonbg"
                            android:gravity="center_horizontal"
                            android:padding="10dp"
                            android:shadowColor="#f5f5f5"
                            android:shadowDx="1"
                            android:shadowDy="1"
                            android:shadowRadius="1"
                            android:textColor="#DAA520"
                            android:textSize="12pt" />

                        <Button
                            android:id="@+id/button4"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:background="@drawable/buttonbg"
                            android:gravity="center_horizontal"
                            android:padding="10dp"
                            android:shadowColor="#f5f5f5"
                            android:shadowDx="1"
                            android:shadowDy="1"
                            android:shadowRadius="1"
                            android:textColor="#DAA520"
                            android:textSize="12pt" /> 
```

xml 与我的其他选项卡一起继续，并使用标准整理器完成 xml，但似乎没有任何东西使背景变黑。它的默认值为白色并且不会改变。请指教！谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T07:22:57.050

默认 android 标签栏颜色为灰色，您可以轻松更改标签栏的颜色。

使用下面的代码行来改变 Tab` 的颜色

> tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.RED); 或 tabHost.getTabWidget().getChildAt(0).setBackgroundColor(Color.parseColor("#4E4E9C"));

供进一步参考。

[http://www.technotalkative.com/android-change-tab-bar-background-color/](http://www.technotalkative.com/android-change-tab-bar-background-color/)

[http://www.androidpeople.com/android-tabhost-tutorial-%E2%80%93-part-2](http://www.androidpeople.com/android-tabhost-tutorial-%E2%80%93-part-2)

`

# python - 在 R 中操作文件

> ID：11606046
> 
> 赞同：1
> 
> 时间：2012-07-23T03:16:18.933
> 
> 标签：python, r, file

在 Python 中：

```
fo = open("foo.txt", "r+")  
str = fo.read(10);  
position = fo.tell();  
print "Current file position : ", position 
```

R中有文件指针吗？我可以在读取文件时知道当前文件的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:34:17.187

看看文件相关的功能，你可以试试`?file`，它告诉你如何打开一个文件和许多与文件相关的功能。

```
fo <- file('foo.txt', 'r+') // see  ?file for more details on the parameters 
```

`fo`是一个可以提供给其他函数的连接对象。我建议您阅读所有内容`?file`，这是非常有用的。

特别是，请参阅`See Also`和`Examples`部分。

在该`See Also` 部分中列出了一组用于处理文件的相关函数。在这里它提到（例如）`readLines`，`readBin`（读取二进制文件），`scan`（将数据读取到向量或列表中）用于读取文件。

它还提到`seek`. 看着`?seek`你会发现

> `seek`with`where = NA`返回连接的当前字节偏移量（从头开始）

所以试试

```
seek(fo) 
```

（提示 - R 中的帮助文件非常有用！“另请参阅”部分将告诉您与您正在查看的功能相关的功能，“示例”部分将为您提供如何使用它们的示例。如果您想要要查找与文件有关的东西并且`?file`不起作用，您总是可以执行`??file`模糊搜索）。

# c++ - 如何在 GDB 中漂亮地打印 STL 容器？

> ID：11606048
> 
> 赞同：60
> 
> 时间：2012-07-23T03:16:35.570
> 
> 标签：c++, linux, debugging, stl, gdb

我已按照[GDB wiki 上](http://sourceware.org/gdb/wiki/STLSupport)的说明安装用于查看 STL 容器的 python 漂亮打印机。我`~/.gdbinit`现在看起来像这样：

```
python 
import sys 
sys.path.insert(0, '/opt/gdb_prettyprint/python') 
from libstdcxx.v6.printers import register_libstdcxx_printers 
register_libstdcxx_printers (None) 
end 
```

但是，当我运行 GDB 并尝试打印 STL 类型时，我得到以下信息：

```
print myString
Python Exception <class 'gdb.error'> No type named std::basic_string<char>::_Rep.: 
$3 = 
```

任何人都可以对此有所了解吗？我正在运行 GDB 7.4 附带的 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-09-24T10:52:36.150

**它只适用于 Ubuntu 17.04**

Debian 现在似乎终于正确集成了一些东西：

主文件

```
#include <map>
#include <utility>
#include <vector>

int main() {
    std::vector<int> v;
    v.push_back(0);
    v.push_back(1);
    v.push_back(2);
    std::map<int,int> m;
    m.insert(std::make_pair(0, 0));
    m.insert(std::make_pair(1, -1));
    m.insert(std::make_pair(2, -2));
} 
```

编译：

```
g++ -O0 -ggdb3 -o main.out -std=c++98 main.cpp 
```

结果：

```
(gdb) p v
$1 = std::vector of length 3, capacity 4 = {0, 1, 2}
(gdb) p m
$2 = std::map with 3 elements = {[0] = 0, [1] = -1, [2] = -2} 
```

我们可以看到漂亮的打印机安装了：

```
(gdb) info pretty-printer 
```

其中包含以下行：

```
global pretty-printers:
  objfile /usr/lib/x86_64-linux-gnu/libstdc++.so.6 pretty-printers:
  libstdc++-v6
    std::map
    std::vector 
```

打印机由文件提供：

```
/usr/share/gcc-7/python/libstdcxx/v6/printers.py 
```

它与主 C++ 库包一起提供`libstdc++6`，位于`libstdc++-v3/python/libstdcxx`GCC 源代码中： [https ://github.com/gcc-mirror/gcc/blob/releases/gcc-6.3.0/libstdc%2B%2B-v3/ python/libstdcxx/v6/printers.py#L244](https://github.com/gcc-mirror/gcc/blob/releases/gcc-6.3.0/libstdc%2B%2B-v3/python/libstdcxx/v6/printers.py#L244)

TODO：GDB 如何发现该文件是最终的谜团，它不在我的 Python 路径中：`python -c "import sys; print('\n'.join(sys.path))"`所以它必须在某个地方进行硬编码？

**自定义类**

了解如何定义自定义`toString`方法并在以下位置调用它：[使用 GDB 打印 C++ 类对象](https://stackoverflow.com/questions/15163261/printing-c-class-objects-with-gdb/58310207#58310207)

**检查优化代码中的特定元素**

上次我检查时很难，你得到“无法评估函数——可能是内联的” [C++、STL、GDB：无法评估函数可能是内联的](https://stackoverflow.com/questions/40633787/c-stl-gdb-cannot-evaluate-function-maybe-inlined)

在未优化的代码上它可以工作：[Inspecting standard container (std::map) contents with gdb](https://stackoverflow.com/questions/427589/inspecting-standard-container-stdmap-contents-with-gdb)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T03:10:05.660

您可以尝试使用以下**GDB 宏**（将其附加到您的**~/.gdbinit**文件中）来打印 STL 容器类型数据甚至它们的数据成员：[https ://gist.github.com/3978082](https://gist.github.com/3978082)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-19T20:29:41.760

我遇到了这个问题，并在试图解决这个问题时点击了这个页面。我最终修复了它，我认为分享我的经验是值得的。

我正在使用 gcc-5.2，所以我从 svn repo 下载了漂亮打印机的 gcc-5-branch 版本。但是，我必须做这两个模组：

1.  编辑`~/.gdbinit`文件时，建议添加的是

    ```
    python
    import sys
    sys.path.insert(0, '/home/bartgol/.gdb/gdb_printers/python')
    from libstdcxx.v6.printers import register_libstdcxx_printers
    register_libstdcxx_printers (None)
    end 
    ```

但是，我不得不评论该行`register_libstdcxx_printers (None)`，因为我不断收到错误消息，告诉我 libstdcxx_printers 已经注册。显然，他们在导入阶段进行了注册。

2.  我必须为`std::set`和编辑 printers.py 文件`std::map`。由于类型`_Rep_type`在两者中都是私有的。特别是，我用svn repo 上的 gcc-4_6-branch 版本中的漂亮打印机版本中的相应`children`例程`std::map`替换了例程。`std::set`从那以后没有错误，现在打印出来的东西很好。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-11T13:42:19.293

检查您的 gcc 版本。如果小于 4.7，则需要使用另一个 printer.py 文件。[从http://gcc.gnu.org/svn/gcc/branches/gcc-4_6-branch/libstdc++-v3/python/](http://gcc.gnu.org/svn/gcc/branches/gcc-4_6-branch/libstdc++-v3/python/)获取文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-12T13:22:29.473

[而不是你提到的链接中](https://sourceware.org/gdb/wiki/STLSupport)列出的方法，你可以试试[这里](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.03.txt)的脚本，

执行以下操作：

1) 将脚本下载到`/your/path`. 将其命名为某个名称，例如`your_name.conf`.

2）`~/.gdbinit`如果您没有文件，则将文件添加到主目录。

3）`source /your/path/your_name.conf`在你的`~/.gdbinit`.

4）重启gdb。尝试`pvector`

您可以使用类似的命令找到帮助信息`help pvector`。

例如

```
pvector vec 5      # Prints element[5] in vec
pvector vec 5 10   # Prints elements in range [5, 10] in vec. (5, 6, 7, 8, 9, 10) 
```

仅供参考，[该脚本](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.03.txt)向 gdb添加了几个命令（`pvector`、`plist`等`pmap`），其功能是打印 STL 的元素。它还添加了`print pretty`，产生了像这样的漂亮格式：

[![在此处输入图像描述](../Images/635a7151d4fc0a679ba7f9b91e3f7cc3.png)](https://i.stack.imgur.com/HAWkm.png)

另外，如果你想知道如何在 gdb 中准确地访问 STL 的元素，只需阅读命令的代码即可。代码中没有秘密。^_^

例如向量被访问`._M_impl._M_start`

`p vec._M_impl._M_start + 4 # prints vec[4]`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-22T18:08:05.833

如果您`info type _Rep`在 Python 异常之后键入，gdb 将通知您加载的与 _Rep 匹配的类。该列表可以帮助您找到 python 找不到您的`std::string class`.

我刚刚遇到了您的问题，在我的情况下是 intel c 编译器 icc，它破坏了漂亮的打印。特别是，不合格的 icc 名称`std::string`会导致：

```
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep; 
```

但漂亮的打印机正在寻找不合格的 gcc 名称：

```
std::basic_string<char, std::char_traits<char>, std::allocator<char>::_Rep; 
```

我为解决我的问题所做的是修改`StdStringPrinter`printers.py 中的类，将字符串的非限定名称添加到类型名中以在gdb 中查看。更换线路：

```
reptype = gdb.lookup_type (str (realtype) + '::_Rep').pointer () 
```

有了这个：

```
reptype = gdb.lookup_type (str (realtype) + '::' + str (realtype) + '::_Rep').pointer () 
```

使用从您那里获得的列表，`info type`您可以修复漂亮的打印机以使其正常工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T18:31:45.150

我认为您使用的是非 GNU STL 库，或者可能是非常旧的 GCC `libstdc++`。我的编译器上的普通 STL 字符串的类型是：`std::basic_string<char, std::char_traits<char>, std::allocator<char> >`. 请注意，这不是`std::basic_string<char>`.

Python代码中有这个：

```
reptype = gdb.lookup_type (str (realtype) + '::_Rep').pointer () 
```

这会查找`::Rep`基本字符串类型实际上是什么的嵌套类型。错误消息表明您使用的任何奇怪库的字符串类实际上都没有`::Rep`嵌套类型。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-06T17:46:07.247

当程序是 LLVM 构建（由 编译`clang`）时，通常会出现像您上面发布的错误，并且您尝试调试它`gdb`（应该用于 GCC 构建程序）。理论上，LLVM-build 程序可以被 调试`gdb`，反之亦然。但是为了避免上面发布的问题，你应该使用`lldb`if you use `clang`，并且应该使用`gdb`if you use `g++`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-03-28T09:56:51.910

类似于在[此处输入链接描述](https://www.gonwan.com/2014/07/02/setting-up-pretty-printers-in-gdb/) 在 ~/.gdbinit 中为我工作：

```
python
import sys
sys.path.insert(0, '/usr/share/gcc-8/python')
from libstdcxx.v6.printers import register_libstdcxx_printers
register_libstdcxx_printers (None)
end 
```

# javascript - 不附加到元素的 jQuery 加载

> ID：11606049
> 
> 赞同：2
> 
> 时间：2012-07-23T03:16:38.617
> 
> 标签：javascript, jquery

我正在使用 jQuery 的加载函数从外部 html 文件中获取模板数据。在大多数情况下，我更喜欢将数据存储在一个变量中，并在以后需要时附加它。例如，我最终可能会多次克隆节点，或向其附加其他数据等。关键是我需要能够从外部文件加载元素，但不能将其附加到现有文档中。

我现在做的很简单：

```
var storage = document.createElement('div');
$(storage).load('somehtmlfile.html #sampleTemplateDiv'); 
```

但是每次都必须从存储 div 中删除 html，这很烦人。如果我可以做类似的事情而不必附加到冗余容器 div 并且我可以让来自 html 文件的数据在存储变量中很好地等待，那就太好了。这可能吗？

非 jquery 解决方案是完全可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:19:01.320

我的解决方案是使用 .ajax 而不是 .load 并将数据临时存储在存储 div 中，提取并返回元素。我也在外部函数中使用它，因此将其设为同步调用是合适的……不幸的是，否则我将无法正确返回元素。

```
var ret = null;
$.ajax({
    url: url,
    async: false,
    success: function(data) {
        var storage = document.createElement('div');
        storage.innerHTML = data;
        var template = $(storage).find('#' + id);
        if(template.length > 0) ret = template[0];
    }
});
return ret; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T11:08:32.217

你能把它加载到一个没有附加到 DOM 的 jQuery 对象中吗？例如

```
var data = $( '<div id="loaded-content" />' ).load( url ); 
```

您以后想使用它时：

```
$( '#my-container' ).html( data.html() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:30:13.080

一种方法是加载包含数据的 JSON 对象，如下所示：（
您还可以将 URL 指向服务器脚本文件，该文件读取 URL 参数并输出 JSON 对象）

例子：

```
//JQUERY:
$.ajax({
  method: "GET",
  dataType: "json",
  url: "path/to/template.json",
  success: function(data) {
    var storage = data.template.html;
    // do something here
  }
});

//JSON FILE:
{
  "template":
  {
    "html":"<div ...></div>",
    "some_var":"some_value"
  }
} 
```

* * *

另一种方式，您可以只加载带有参数的 HTML 文件...例如：将 url 更改为：`url: "path/to/my_template.html?id=some_div"`或使用 load() 与带有参数的 URL。

然后在每个模板文件中插入一个脚本来读取变量并用请求的元素重写文档。

代码：

```
//query.js
function getQueryString() {
  var q = {}
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0; i<vars.length; i++) {
    var pair = vars[i].split("=");
    q[pair[0]]=pair[1];
  }
  return q;
}
  $(document).ready(function() {
    var $q = getQueryString();
    if ($q.id) {
      document.write($($q.id).html());
    }
  });

//template html files
//head section
<script type="text/javascript" src="query.js"></script> 
```

我还没有测试过这个，但我认为它应该工作......

您需要将该脚本放入每个模板文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-15T00:57:36.553

我的解决方案是将 .load 附加到准备好的文档中。它在不需要元素的情况下加载 php 功能脚本。

```
$( document ).ready(function() {
    // code
}).load('url/to/file.php'); 
```

希望这可以帮助！

# solr - 带有特殊字符的 Solr 查询

> ID：11606051
> 
> 赞同：1
> 
> 时间：2012-07-23T03:16:42.807
> 
> 标签：solr

我的查询键中有一个“#”字符，如下所示：

```
17\#30\#36\#94\#35 
```

因此，查询 url 将生成为：`http://10.251.25.12:8080/commentindex/comment/select?q=17\#30\#36\#94\#35&rows=200&wt=json`. 您可以看到，由于存在“#”，url 在发送到服务器之前会被截断，我会得到错误结果、错误行数、错误文档类型（不是我设置的 json）。

对于上面的例子，我将 url 编码为`http://10.251.25.12:8080/commentindex/comment/select?q=17%5c%2330%5c%2336%5c%2394%5c%2335&rows=200&wt=json`. 一切都如我所料。但是，如果查询键如下所示，我会遇到另一个错误：

```
←\~\\(≧▽≦\)\/\~！！| 
```

网址将生成为：

```
http://10.251.25.12:8080/commentindex/comment/select?q=%e2%86%90%5c%7e%5c%5c(%e2%89%a7%e2%96%bd%e2%89%a6%5c)%5c%2f%5c%7e%ef%bc%81%ef%bc%81%7c&rows=200&wt=json 
```

你找到括号了吗？这是 solr 查询中的特殊字符！我会从 url 得到 400 错误请求。

我注意到所有查询键都用'\'转义了，所以如果我不应该编码整个url而只编码'#'字符？还有其他我应该注意的特殊字符吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:02:42.960

这些是 Lucene/Solr 中的特殊字符：

```
+ - && || ! ( ) { } [ ] ^ " ~ * ? : \ 
```

当然，像`#`这样的字符在 URL 中具有特殊的含义。如果你想在上面搜索任何文字字符，你必须对其进行转义。此列表来自[http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Escaping%20Special%20Characters](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Escaping%20Special%20Characters)。

# java - 在 DDD 中包装对集合的访问？

> ID：11606060
> 
> 赞同：4
> 
> 时间：2012-07-23T03:18:15.677
> 
> 标签：java, domain-driven-design

在锻炼你的 DDD 技能时，假设你有这样的对象：

```
class Person {
    Set<Address> addresses = new HashSet<Address>();
} 
```

允许正常/完全访问集合是否更合适：

```
Set<Address> getAddresses() {
    return addresses;
} 
```

这将允许调用者添加/删除他们认为合适的地址，或者，在这种情况下让调用者通过 Person 对象更好：

```
Set<Address> getAddresses() {
    return Collections.unmodifiableSet(addresses);
}

void addAddress(Address address) {
    addresses.add(address);
}

void removeAddress(Address address) {
    addresses.remove(address);
} 
```

第一种情况使我们免于创建额外的方法；第二种情况允许 Person 对象知道其地址的更改（以防它出于某种原因关心）。

这里有最佳实践吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T20:13:33.210

我更喜欢第二种方法，但我相信不可修改的集合除了给客户带来不受欢迎的惊喜外，几乎不会给你带来什么好处。

如果您希望向客户端传达此集合是不可变的，那么您应该使用在其 API（而不是其实现）中保留可变性的集合类型。也就是说，调用一个声明存在的方法并捕获 UnsupportedOperationException 就像在与您第一次约会的女人身上找到一个单位。

我爱乔什·布洛赫，但我认为他在这件事上搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:24:15.237

我会说，总的来说，第二种方法更稳健。使用不可修改的集合作为返回值可以防止外人改变`Person`类的内部状态。如果`Person`类在逻辑上拥有它们的地址，那么其他人不应该通过`Person`类方法来进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:23:11.460

我看不出这两种方法的好坏。这完全取决于您的班级愿意提供什么功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T03:25:24.237

这一切都取决于您的要求。如果有充分的理由让底层集合远离类的客户，那么你就这样做。否则，提供 set/get 方法通常没有缺点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T03:30:20.180

无论哪种方式都可以，但为了清楚起见，我会根据返回的集合是否可变来命名这些方法：

```
Set<Address> getAddresses() {
    return Collections.unmodifiableSet(addresses);
}

Set<Address> addresses() {
    return addresses;
} 
```

# android - Android 输入字段焦点在模型窗口中可见

> ID：11606064
> 
> 赞同：1
> 
> 时间：2012-07-23T03:19:13.880
> 
> 标签：android

我有一个网页，其中有一些页脚链接，单击任何链接时它会在模型​​窗口中打开，单击关闭按钮会关闭。

在移动设备 Android 中进行测试时，发生了一件奇怪的事情。在页面上，如果有任何输入字段，并且如果您在打开的窗口中打开任何页脚链接，如果您在输入字段位置上方进行选项卡，您可以看到该字段的焦点环。如何解决这个问题？这是安卓的bug吗？

![问题截图](../Images/e87c53a30811f1268e9459e6d4d6154a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:40:37.347

为了解决这个问题，我所做的是在模式窗口出现时禁用输入字段，并在窗口关闭时再次启用所有输入字段。

在我看来，三星 Galaxy S11 2.3.6 特定问题。

# java - 如何在 Java 中使用配置 hadoop-core 来配置客户端

> ID：11606066
> 
> 赞同：0
> 
> 时间：2012-07-23T03:20:00.697
> 
> 标签：java, hadoop, hdfs

我有几个关于使用 hadoop 客户端的问题。

1.  如何指定用户名和密码？如果不能，客户端将使用 windows 用户访问 hadoop，但我怀疑它是否安全。

2.  我可以使用 Configuration 设置多少个参数？我可以在里面设置用户名和密码吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:36:43.840

对于 (1)：

Hadoop 的安全性不是基于密码，而是基于*kerberos*。您可以在此处阅读有关其安全架构的更多信息，并[在此处](http://www.cloudera.com/blog/2012/03/authorization-and-authentication-in-hadoop/)找到为最新版本配置它的[指南](https://ccp.cloudera.com/display/CDH4DOC/Introduction+to+Hadoop+Security)。

您注意到的 API（根据您的上述评论）是一种模拟其他用户名的机制（如果主服务器允许），而不是安全措施。

对于 (2)：

理论上，您可以设置尽可能多的 JVM 内存允许的配置键值参数，只要它低于`mapred.user.jobconf.limit`JobTracker 的限制（默认为 5 MB）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T09:55:14.363

我找到了名为 get(URI uri, Configuration configuration, String username) jar 版本为 0.20.205.0 的 FileSystem 类型的方法。它不需要密码。谢谢大家。

# wxpython - 关于 event.Skip()

> ID：11606068
> 
> 赞同：3
> 
> 时间：2012-07-23T03:20:10.683
> 
> 标签：wxpython

我想调用`OnstaticDown`，并使用`event.Skip()`它来调用它的父小部件`onPanelDown`。

但只是`OnstaticDown`被调用，我不明白为什么。为什么`static`父面板没有收到事件？

我的代码：

```
 self.panel.Bind(wx.EVT_LEFT_DOWN,self.onPanelDown)
 self.static = wx.StaticText(self.panel, wx.NewId(), "First Name",pos=(10, 50),size=(100,100))
 self.static.Bind(wx.EVT_LEFT_DOWN, self.OnstaticDown)

 def onPanelDown(self,event):
        print 'panel-------------22'
 def OnstaticDown(self,event):
        print 'static============11'
        event.Skip() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:44:59.540

`event.Skip()`将调用控件的默认处理程序（即 StaticText）。我不相信静态文本有一个默认的处理程序，因为它不是为交互而设计的，它只是一个用于显示文本的标签。

您可以在静态处理后将事件发布到面板，`wx.PostEvent(self.panel,event)`或者我认为只是传递它不是坏习惯，`self.onPanelDown(event)`尽管它不太适合更改。

您总是可以创建一个函数来将事件传递/发布到控件父级

```
def PostToParent(control,event):
    wx.PostEvent(control.GetParent(),event) 
```

* * *

**编辑：** 这不是它的工作方式，只有某些类型的事件传播到父小部件（wx.CommandEvent 层次结构中的事件，鼠标事件不是其中的一部分）。尝试注释掉静态文本上的绑定，如果您在其上单击右键，则不会触发左下方的面板，因为您单击的是静态文本，而不是面板。 `event.Skip()`只会标记事件并允许在运行处理程序后传播到其他绑定，如果您不这样做，则事件不会发生任何事情。

最明显的例子是，如果你关闭一个窗口，框架会发出一个`EVT_CLOSE`事件，wx 将接收并关闭窗口。如果你绑定一个方法，`EVT_CLOSE`它会在底层 wx 事件处理程序之前触发。如果您不调用`event.Skip`该事件将永远不会到达 wx 处理程序，并且当您尝试关闭它时框架不会关闭，但是如果您调用`event.Skip`它，它将由您之后的 wx 事件处理程序处理，并关闭框架。

`wx.PostEvent`另一方面是一种将事件发送到特定小部件的方法，并将任何绑定绑定到该特定事件，处理该事件。在这种情况下，将左下事件转发到面板与您自己单击面板具有相同的效果。

# java - 未知错误 - 整数解析

> ID：11606070
> 
> 赞同：0
> 
> 时间：2012-07-23T03:20:40.613
> 
> 标签：java, android, math

我对这个应用程序的最终目标是为服务员/女服务员制作一种“小费书”，这样他们就可以记录每天的小费。该应用程序将显示制作金额、工作时间和每小时金额。它还可以选择查看所有以前的工作日，显示每日、每周和每月的总计。

我试图将数字输入到 main.xml 文件中的两个 EditText 框中，id etTip 和 etHour，在两个 TextView、tvTip 和 tvHour 中显示它们，然后将 etTip 中的数字除以 etHour 以获得工资，这将然后在按下提交按钮 bSubmit 后显示在 tvWage 中。

提示和时间很容易显示出来，当所有应用程序都这样做时没有发现错误，但是当我尝试使用 Integer.parseInt(String string) 命令时，我收到一条错误消息。如果在 onCreate 方法期间进行解析，则打开应用程序后立即出现错误。如果在按下按钮后解析完成，则应用力在按下按钮后会快速关闭。

我已经找到了问题，但我只是不知道如何解决它。

下面是主要的xml文件：

```
<LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="horizontal">

<EditText
    android:id="@+id/etTip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal"
    android:layout_weight="50"
    android:layout_margin="8dp"
    android:hint="Tips">

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/etHour"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal"
    android:layout_weight="50"
    android:layout_margin="8dp"
    android:hint="Hours" >

    <requestFocus />
</EditText>

</LinearLayout>

<Button
    android:id="@+id/bSubmit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:text="@string/btSubmit"
    android:textSize="35sp"/>

<LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="horizontal">

<TextView
    android:id="@+id/tvTip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:layout_weight="50"
    android:text="Tips"
    android:gravity="center"/>

 <TextView
    android:id="@+id/tvHour"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:layout_weight="50"
    android:text="Hours"
    android:gravity="center"/>"

 </LinearLayout>

<TextView
    android:id="@+id/tvWage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="8dp"
    android:text="Wage"
    android:gravity="center"/>
</LinearLayout> 
```

主要活动：

```
package com.smarticle.tipbook;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class TipBookActivity extends Activity {
/** Called when the activity is first created. */

TextView textTip,textHour,textWage;
EditText editHour,editTip;
int tip,wage,hour;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    textTip = (TextView) findViewById(R.id.tvTip);
    textHour = (TextView) findViewById(R.id.tvHour);
    textWage = (TextView) findViewById(R.id.tvWage);
    editTip = (EditText) findViewById(R.id.etTip);
    editHour = (EditText) findViewById(R.id.etHour);
    tip = Integer.parseInt(textTip.getText().toString());
    hour = Integer.parseInt(textHour.getText().toString());
    Button bSubmit = (Button) findViewById(R.id.bSubmit);
    bSubmit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textTip.setText(editTip.getText());
            textHour.setText(editHour.getText());
            wage = tip / hour;
            textWage.setText(wage);
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:01:53.910

这只是因为您在加载时解析为 int 您的编辑文本内容，这就是为什么第一个值为 null 的原因，这就是为什么它不能被解析为整数的原因。这就是为什么我只是将解析部分放在 onClick 中，以便在单击后转换编辑视图的内容。还将您的编辑视图更改为仅接受数字，以便在用户输入无效字符的情况下不会失败。:) 你去。

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

textTip = (TextView) findViewById(R.id.tvTip);
textHour = (TextView) findViewById(R.id.tvHour);
textWage = (TextView) findViewById(R.id.tvWage);
editTip = (EditText) findViewById(R.id.etTip);
editHour = (EditText) findViewById(R.id.etHour);

//int tip =  Integer.parseInt((String) textTip.getText());
//int hour = Integer.parseInt((String) textHour.getText());

Button bSubmit = (Button) findViewById(R.id.bSubmit);
bSubmit.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub
        textTip.setText(editTip.getText());
        textHour.setText(editHour.getText());
        wage = Integer.parseInt(textTip.getText().toString()) / Integer.parseInt(textHour.getText().toString());

            textWage.setText(String.valueOf(wage));
        }
    });
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:16:11.950

改用**双**精度：

```
double tip,wage,hour; 
```

和，

```
tip = parseDouble(textTip.getText().toString());
hour = parseDouble(textHour.getText().toString()); 
```

此外，您应该在解析之前检查 EditText 中的输入实际上是一个数字。并且您应该将解析包含在 try/catch 块中。

# c# - 围绕多个语句的锁定语句是否确保所有更改对其他线程可见（假设它们输入相同的互斥锁）？

> ID：11606072
> 
> 赞同：4
> 
> 时间：2012-07-23T03:20:44.343
> 
> 标签：c#, synchronization, thread-safety, locking

如果您在一个锁定代码块内有**多个**共享变量分配，是否一定意味着所有这些更改对其他线程立即可见，一旦它们在同一对象上输入锁定语句就可能在其他处理器上运行 - 或者没有这样保证？

那里的许多示例都显示了一个公共变量的**单个**“set”或“get”，并详细介绍了内存屏障，但是如果里面有一组更复杂的语句会发生什么？甚至可能执行其他操作的函数调用？

像这样的东西：

```
lock(sharedObject)
{
  x = 10;
  y = 20;
  z = a + 10;
} 
```

如果此代码在另一个线程上运行，而该线程可能在另一个处理器上执行，它是否对更改的“可见性”做出任何保证？

```
lock (sharedObject)
{
  if (y == 10)
  {
     // Do something. 
  }
} 
```

如果答案是**否定**的——也许并解释这些变化**何时**会变得可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:51:49.470

锁块在开始和结束（块的开始和结束）处包括内存栅栏。这确保了对内存的任何更改对其他内核（例如在其他内核上运行的其他线程）都是可见的。在您的示例中，任何其他线程都可以看到第一个锁定块中对 x、y、z 的更改。“可见”意味着缓存到寄存器中的任何值都将被刷新到内存中，并且任何缓存在 CPU 缓存中的内存都将被刷新到物理内存中。ECMA 334 详细说明了锁块是由 Monitor.Enter 和 Monitor.Exit 包围的块。此外，ECMA 335 详细说明 Monitor.Enter “应隐式执行易失性读取操作......”和 Monitor.Exit “隐式执行易失性写入操作。这确实意味着修改不会”

这实际上意味着任何由 lock 语句保护的变量都不需要声明为 volatile 以使其修改对其他线程可见。

由于示例代码仅包含一个依赖于单个共享原子操作的操作（读取和写入单个值到 y）您可以通过以下方式获得相同的结果：

```
try
{
  x = 10;
  y = 20;
  Thread.VolatileWrite(ref z, a + 10);
} 
```

和

```
if(y == 10)
{
// ...
} 
```

第一个块保证对 x 的写入在对 y 的写入之前是可见的，对 y 的写入在对 z 的写入之前是可见的。它还保证如果对 x 或 y 的写入缓存在 CPU 缓存中，则该缓存将在调用 VolatileWrite 后立即刷新到物理内存（因此对*任何其他线程可见）。*

如果在块内你用and`if(y == 10)`做某事，你应该返回使用关键字。`x``y``lock`

此外，以下内容将是相同的：

```
try
{
  x = 10;
  y = 20;
  Thread.MemoryBarrier();
  z = a + 10;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:45:34.700

如果我误解了你的问题，请原谅我（很有可能）；但我*认为*您正在混淆*同步*和*可见性*的概念。

互斥锁（“互斥”）的全部意义在于确保两个代码块不会同时运行。所以在你的例子中，第一个块：

```
lock(sharedObject)
{
  x = 10;
  y = 20;
  z = a + 10;
} 
```

...和第二个块：

```
lock (sharedObject)
{
  if (y == 10)
  {
     // Do something. 
  }
} 
```

...**永远不会同时执行**。这是`lock`关键字为您保证的。

因此，每当您*的*代码进入第二个块时，变量`x`、`y`和`z`应该处于与第一个块的完全执行一致的状态。（这是假设您在任何地方访问这些变量的方式都与您`lock`在`sharedObject`这些片段中的方式相同。）

这意味着从第二个块的角度来看，第一个块内的中间更改的“可见性”是无关紧要的，因为永远不会有任何时候，例如，值的更改`x`已经发生，但没有发生`y`or `z`。

# c# - 错误：远程服务器返回错误：（401）未经授权

> ID：11606075
> 
> 赞同：1
> 
> 时间：2012-07-23T03:21:15.020
> 
> 标签：c#

当我尝试访问调用 WCF 函数的表单时，我不断收到此错误。实际上它可以在我的本地机器上运行，但是当它在服务器中时，会发生这种情况:(

源错误：

```
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

堆栈跟踪：

```
[WebException: The remote server returned an error: (401) Unauthorized.]
 System.Net.HttpWebRequest.GetResponse() +6115603
 System.ServiceModel.Channels.HttpChannelRequest.WaitForReply(TimeSpan timeout) +48

 [MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was 'Negotiate,NTLM'.]
 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +9439503
 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +345
 Project.WCFUser.Users.HaveAccess(String userid, String filename) +0
 Project.WCFUser.Users.HaveAccess(String userid, String filename) in C:\Documents and Settings\MyPC\My Documents\Visual Studio 2010\Project\Project\Project\Service References\Users\Reference.cs:71
 Project.View.User.Details.Page_Load(Object sender, EventArgs e) in C:\Documents and Settings\MyPC\My Documents\Visual Studio 2010\Project\Project\Project\View\User\Details.aspx.cs:50
System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
System.Web.UI.Control.OnLoad(EventArgs e) +91
System.Web.UI.Control.LoadRecursive() +74
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:17:56.537

通过更改我在 web.config 中的安全设置解决了这个错误

```
<security mode="TransportCredentialOnly">
      <transport clientCredentialType="Windows" proxyCredentialType="None"
       realm="" />
      <message clientCredentialType="UserName" algorithmSuite="Default" />
</security> 
```

# php - 如何使用 Ajax 更新我的购物车？

> ID：11606079
> 
> 赞同：0
> 
> 时间：2012-07-23T03:21:52.400
> 
> 标签：php, ajax, shopping-cart

我真的需要一些 AJAX Guru 大师的帮助，以帮助我在我的 AJAX 网站上构建我的更新购物车功能。

所以基本上，我想做的是，当我在一个 input_dropdown 中修改我的一个产品时，我的“update_cart”函数被自动调用，我的价格以及我的输入都会更新

编辑：我重写了我的问题，因为感谢 Matei 我取得了一些进展

这是我的观点：

```
<?php 
          $options = array(
             '0'  => '0',
             '1'  => '1',
             '2'  => '2',
             '3'  => '3',
             '4'  => '4',
             '5'  => '5',
             '6'  => '6',
             '7'  => '7',
           );

       if($product['quantity']==0){
        $value[$product['title']] = set_value('quantity'.$product['title']);
       }else{
        $value[$product['title']] = $product['quantity'];
       }
       $data0 = 'class="quantSelect" value="'.$value[$product['title']].'" id="quant'.$product['title'].'"';

       echo  form_dropdown('quantity'.$product['title'], $options, $value[$product['title']],$data0);
     ?&gt;
    </td>
    <td>
     &lt;?php echo $product['price'] ?&gt;
    </td>
    <td id="&lt;?php echo 'price'.$product['title']?&gt;">
     $&lt;?php echo $total[$product['title']] ?&gt;
    </td>[/code] 
```

好吧，一切都在 foreach 循环中，但我认为在这里，没关系。

然后我尝试设置 Matei AJAX 功能：

```
$(".quantSelect").click(function(){  
    $.POST("&lt;?php echo base_url().'main/update_cart';?&gt;",  
           {product_id:$('&lt;?php echo $product['quantity']; ?&gt;').val(),quantity:$('&lt;?php echo 'quantity'.$product['title'] ?&gt;').val()},  
           function(data){  
                if(data.success) {  
                     $("&lt;?php echo 'price'.$product['title']?&gt;").val(data.some_returned_value); // update value of an text input or textarea (view more info about jQuery selectors)
                     $("#totalPriceWithTaxes").html(data.some_other_returned_value); // update value of a paragraph                    
                }
           }, 'json');
}); 
```

最后更新购物车功能：

```
function  update_cart(){
 $success = false;
  if(!empty($_POST['product_id']) && !empty($_POST['quantity']) && is_numeric($_POST['quantity'])) {  

   // I get all the information i need here in order to calcul the final price
   //We calcul the final price with taxes, shipping and everything.
   $data['totalPriceWithTaxes'] = $data['tax'] + $data['totalPrice'] + $data['Shipping']->shipping;
   $this->session->set_userdata('totalPriceWithTaxes', $data ['totalPriceWithTaxes']);

   $success = true;
   $some_returned_value = 69;
   $some_other_returned_value = $data['totalPriceWithTaxes']; // the final price
  }
 echo json_encode(array("success" => $success, 
      "some_returned_value" => $some_returned_value,
      "some_other_returned_value" => $some_other_returned_value));

 } 
```

我们到了，所以我看不到任何更新。如果有人可以帮助我弄清楚如何设置该 AJAX 功能，我将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:55:24.573

我建议你看看jQuery 库的[jQuery.post() 方法](http://api.jquery.com/jQuery.post/)。

让我们看看下面的例子：

Javascript代码：

```
$("#submit-button").click(function(){  
    $.POST("/PATH_TO/update_cart.php",  
           {product_id:$('#product-id').val(),quantity:$('#quntity').val()},  
           function(data){  
                if(data.success) {  
                     $("#form-field-id").val(data.some_returned_value); // update value of an text input or textarea (view more info about jQuery selectors)
                     $("p#form-p-id").html(data.some_other_returned_value); // update value of a paragraph                    
                }
           }, 'json');
}); 
```

有关**jQuery 选择器**的更多信息，请[查看这里](http://api.jquery.com/category/selectors/)

PHP代码：

```
<?php
     $success = false;
     if(loged()) { // verify if the user is loged (if it's needed)
         if(!empty($_POST['product_id']) && is_numeric($_POST['product_id']) && !empty($_POST['quantity']) && is_numeric($_POST['quantity'])) {  
             // use here your additional code
             // update database
             // if every condition is applied then confirm that the fields are updated
             $success = true;
             $some_returned_value = "data has been successfully updated";
             $some_other_returned_value = 45.3; // the final price
         }
     }
     echo json_encode(array("success" => $success, 
                            "some_returned_value" => $some_returned_value,
                            "some_other_returned_value" => $some_other_returned_value));
?> 
```

这是一个关于如何使用 jQuery POST 方法和 PHP 更新所需数据的简单示例。我没有使用您的任何代码，但您可以尝试像这样更新您的购物车。jQuery 是一个强大的库，所以我建议你看看它。

# android - ProgressDialog 不会在 Thread 中关闭

> ID：11606081
> 
> 赞同：0
> 
> 时间：2012-07-23T03:21:56.493
> 
> 标签：android, android-layout, android-dialog, android-progressbar

我是 Android 开发新手，正在尝试解决这个让我有些沮丧的问题。我正在尝试关闭此 progressDialog。当我运行该应用程序时，它会显示、获取信息并更新 UI。但是，对话框永远不会被关闭。

```
progDialog = ProgressDialog.show(HomeActivity.this, "", "Fetching info...", true, false); 
new Thread(new Runnable() {
    public void run() {
        fetchInfomation(userID); //fetches information - Works
        runOnUiThread(new Runnable() {
            public void run() { 
                setLayoutList(); //updates UI - Works
                progDialog.dismiss(); //doesn't seem to close progress dialog
                firstView(); //displays prompt - Works 
            }
        });   
        progDialog.dismiss(); //doesn't close dialog either
    }
}).start(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:54:36.017

您不能在外部线程内与 UI 交互。有一些技术可以做到这一点，但这不是必需的。

您可以使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html).

例如：

```
...
private Handler mHandler;

@Override
protected void onCreate (Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ...
    mHandler = new Handler() {

        @Override
        public void handleMessage (Message msg) {
            switch (msg.what) {
                case 0: ...
                case 1: ...
            }
        }
    }
} 
```

和：

```
....
new Thread() {

    @Override
    public void run() {
            ... // do your background jobs here
            mHandler.sendEmptyMessage(...); // interact with UI
        });   
    }
}.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:59:32.140

如果您在 UI 线程上进行任何 GUI 更新，这将是一个很好的做法。在任何线程中，您都可以运行您的 UI 线程，您可以在其中执行 UI 工作，或者您也可以使用消息处理程序，它也会为您做同样的事情。

```
Runnable run_in_ui = new Runnable() {
    @Override
    public void run() {
        // do your UI stuffs here
    }
};
runOnUiThread(run_in_ui); 
```

# ajax - SQLFRORM.grid 分页在不使用 LOAD 函数的情况下不刷新整个页面？

> ID：11606084
> 
> 赞同：0
> 
> 时间：2012-07-23T03:22:26.420
> 
> 标签：ajax, web2py

在 web2py 中有没有一种方法可以让 SQLFRORM.grid 分页在不使用 LOAD 函数的情况下不刷新整个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:05:32.477

通常，使用来自服务器的数据刷新页面上的某些内容而不重新加载整个页面将需要 Ajax 调用（或 websockets 或 iframe）。在 web2py 中最简单的方法可能是使用`LOAD()`帮助程序，尽管您也可以手动设置 Ajax。

# amazon-s3 - 如何将多个域映射到 Amazon S3 上的同一个存储桶？

> ID：11606086
> 
> 赞同：10
> 
> 时间：2012-07-23T03:22:43.320
> 
> 标签：amazon-s3, cname

有可能这样做吗？我需要能够通过在浏览器的地址栏中`mydomain.com`输入来访问吗？`my-domain.com`

现在我添加了一个 DNS 条目：

```
my-domain.com CNAME mydomain.com 
```

但这似乎不起作用。我收到 404 未找到错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T07:13:34.433

您只能将单个域映射到您的 S3 存储桶。但是，您可以使用[Cloudfront](http://aws.amazon.com/cloudfront/)来执行此操作。

有关更多信息，请参阅[我对另一个类似问题的回答](https://stackoverflow.com/a/6141297/7793)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-14T16:02:37.453

我们遇到了同样的问题，基本上我将我们的 CI 设置为在发布时发布到两个 S3 存储桶。不理想，但可以让您在短期内避免在发布时重置 CloudFront 中的缓存。

# objective-c - 如何在 Objective-c 中将 NSDictionary 表示为文字？

> ID：11606090
> 
> 赞同：4
> 
> 时间：2012-07-23T03:23:37.843
> 
> 标签：objective-c, nsdictionary, literals

就像：

```
"APP_INFO" : {
            "v":"2.0",
            "appid":"1",
            "lang":"zh-Hans",
             } 
```

我不能使用 init 方法，因为它不是编译时常量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T03:44:08.910

从 Clang 3.2 开始，可以使用[文字容器语法](http://clang.llvm.org/docs/ObjectiveCLiterals.html)：

```
NSDictionary * d = @{
    @"APP_INFO" :  
    @{
        @"v" : @"2.0",
        @"appid" : @"1",
        @"lang" : @"zh-Hans",
}}; 
```

这将创建一个普通的不可变`NSDictionary`实例，就像您使用过`alloc`/`initWithObjects:forKeys:`或任何其他方法一样；它只是很好的语法糖。

有传言称，Apple 也将很快将其添加到他们的编译器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:27:44.317

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"2.0", @"v", @"1", @"appid", @"1", @"zh-Hans", @"lang", nil]; 
```

这将创建一个不可变的字典，其内容在编译时是固定的。

您可以使用相同的 init 方法在运行时填充新字典：

```
id object1 = ...;
...
NSString *key1 = ...;
...

NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:object1, key1, object2, key2, object3, key3, nil]; 
```

# python - Python BeautifulSoup - 获取 onmouseover 属性

> ID：11606091
> 
> 赞同：0
> 
> 时间：2012-07-23T03:23:47.153
> 
> 标签：python, beautifulsoup

我想从包含属性“onmouseover”的标签中获取 javascript 函数名称。例如 ：

```
<p onmouseover="test_hover2()" />Title<p>
<img src="esel.png" onmouseover="test_hover()" id="logo" /> 
```

我试过 ：

```
for tag in soup.findAll(onmouseover=True):
    print tag.onmouseover 
```

我希望结果为“test_hover2(),test_hover()”。但它返回无

我能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:41:52.077

```
tag['onmouseover'] 
```

HTML 属性转换为 Python 中 BS 对象中的键。BS 对象的属性是 HTML 子对象。希望这是有道理的...

# android - 分辨率为 1920 X 1080 的 Android 模拟器无法打开

> ID：11606092
> 
> 赞同：3
> 
> 时间：2012-07-23T03:23:49.237
> 
> 标签：android, android-emulator

我正在`Android App`为`Accer ics 4.0.1`平板电脑做一个。到目前为止一切都很好。

到目前为止，我在 Android 4 级测试了这个应用程序。现在我想根据 Accer 平板电脑设计这个应用程序。但为了测试这一点，我创建了分辨率为 1920 X 1080 的 Android 模拟器。

当我尝试运行此 App Emulator 时，它以`Blank screen`. 我等了 20 分钟，但它只显示空白屏幕。

在控制台中它的显示是这样的

```
[2012-07-23 08:28:24 - ***] New emulator found: emulator-5554
[2012-07-23 08:28:24 - ***] Waiting for HOME ('android.process.acore') to be launched... 
```

有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T09:40:38.030

在创建分辨率为 1920 X 1080 的 Android 模拟器之前，请仔细参考此站点

[http://developer.sonymobile.com/knowledge-base/sony-add-on-sdk/install-the-sony-add-on-sdk/#installsdk](http://developer.sonymobile.com/knowledge-base/sony-add-on-sdk/install-the-sony-add-on-sdk/#installsdk)

[http://developer.sonymobile.com/how-to-install-the-sony-add-on-sdk-manually/](http://developer.sonymobile.com/how-to-install-the-sony-add-on-sdk-manually/)

# c++ - 动态内存、栈内存、静态内存和c++的区别？

> ID：11606094
> 
> 赞同：1
> 
> 时间：2012-07-23T03:23:58.807
> 
> 标签：c++, memory

我想知道C++中动态内存、栈内存和静态内存的区别。
以下是一些代码作为示例：

```
#include<iostream>
using namespace std;
char *GetMemory(void)
{
    char p[]="hello world";
    char *q="hello world"; 
    return q;
}
int main(void)
{
    return 0;
} 
```

为什么是 `p`在栈内存中，而`q`在动态内存中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:28:11.477

> 为什么堆栈内存中的“p”是动态内存中的“q”？

这不是真的; 两者`p`都`q`分配有自动存储持续时间（实现为堆栈结构）。它们之间的区别是：

1.  `p`是一个数组并指向可修改的内存（分配的堆栈）。
2.  `q`是一个指针，指向静态分配的只读内存。您确实应该将其声明为：

    const char *p = "随便";

这里没有动态分配。您没有调用`new`,`malloc`或一些使用幕后分配内存的例程。因此，`p`从该函数返回是不正确的，因为一旦函数返回，它将无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:28:30.717

`p`并且`q`都是变量。 `p`类型为“12 的数组`char`” `q`，类型为“指向的指针`char`”。两者都`p`具有`q`自动存储期限。也就是说，它们被分配在堆栈上。

`q`是一个指针，它被初始化为指向字符串的初始字符`"hello world"`。此字符串是字符串文字，所有字符串文字都有静态存储持续时间。

`p`是一个数组，所以当你`p`用一个字符串字面量进行初始化时，它会导致`p`声明一个字符数组，而当它被初始化时，字符串字面量的内容会被复制到数组中。因此，当`GetMemory()`被调用时，会在堆栈上为数组分配空间`p`，并将字符串文字的内容`"hello world"`复制到该数组中。

您的代码不会执行动态分配。

* * *

请注意，因为`q`是指向具有静态存储持续时间的字符数组的指针，所以`q`从函数返回是安全的：它指向的数组将在程序的整个持续时间内存在。但是，返回是不安全的`p`，因为`p`函数返回时不再存在。

另请注意， 的类型`"hello world"`是`char const[12]`。C++ 中有一个不安全的隐式转换，它允许将字符串文字转换为`char*`指向字符串文字的初始字符的指针。这是不安全的，因为它默默地放弃了 const 限定。处理字符串文字时应始终使用`const char*`，因为字符不可修改。（在 C++ 语言的最新版本 C++11 中，这种不安全的转换已被删除。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:35:22.400

对于您的示例，由于您使用的是字符串文字，因此很可能将其写入可执行文件的 DATA 段。没有分配动态内存。一个更好的例子是这样的：

```
void foo()
{
    //This is a stack variable. Space is allocated 
    //on the stack to store it. Its lifetime is
    //the routine that calls it.

    some_class stack_variable; 

    //This is a heap-allocated variable. It will
    //remain in memory indefinitely unless deleted.
    //If a pointer to this isn't returned, and it
    //isn't deleted by the end of the routine, this
    //will become a "memory leak".

    another_class *heap_variable = new another_class();

    //This is a (method) static variable. It retains its
    //value between method calls

    static int method_static = 1;
    ++method_static;

} 
```

在右大括号处，stack_variable 被清理（即它占用的堆栈空间被回收）。heap_variable 没有被删除，因此是内存泄漏。如果我们多次调用这个方法：

```
for(int i = 0; i < 5; ++i) { foo(); } 
```

然后 method_static 的值为 5。

# java - 异步 TaskUI 更新

> ID：11606097
> 
> 赞同：0
> 
> 时间：2012-07-23T03:24:09.847
> 
> 标签：java, android, multithreading, download, android-asynctask

我有一个文件下载应用程序，我需要使用 Asnc Task 方法更新进度 进度将由 Dialog 和 Notification Bar 同时显示，就像 Google PLay 中的示例一样

当我运行该方法时，通知栏显示非常缓慢的响应。在 ONProgressUpdate 中，我只更新了两个 UI 进度，没有同步。

当我使用线程睡眠来减慢进程时，它运行平稳但下载速度非常低。

我们如何确保两个 UI 线程顺利运行，同时保持可接受的快速下载速度？

这是代码

请回答 ：）

```
@Override
protected void onProgressUpdate(Integer... values) {
    if (values.length>0) {
        //Log.d("Download Activity", "progressUpdate:"+values[0]);
        if (values[0] < 0) {
            this.cancel(true);
            showNetworkErrorDialog();
        } else {
            //size += values[0];
            //Log.d("Download Activity", "download size:"+size);
            //downloadedGoodListSize += values[0];
            //downloadProgressBar.incrementProgressBy(values[0]);
            setCurrentProgress(values[0]);
            downloadProgressBar.setProgress(values[0]);
            double currentProg = downloadProgressBar.getProgress()*1.0/downloadProgressBar.getMax()*100;
            //progressTextView.setText( decimalFormat.format(downloadedGoodListSize*1.0/downloadProgressBar.getMax()*100.0)+"%");
            progressTextView.setText(decimalFormat.format(downloadProgressBar.getProgress()*1.0/downloadProgressBar.getMax()*100)+"%");

            notification.contentView.setProgressBar(R.id.pb, 100, (int)currentProg, false);

            nm.notify(notificationID, notification);

        }
    }
}

@Override
protected void onPostExecute(Boolean result) {
    Log.i("Download Activity", "onPostExecute: starting");
    downloadProgressBar.setProgress(downloadProgressBar.getMax());
    progressTextView.setText(100+"%");
    wheelProgressBar.setVisibility(View.GONE);
    downloadingTextView.setText(getFinishedText());

   notification.contentView.setProgressBar(R.id.pb, 100, 100, false);
   nm.notify(notificationID, notification);
   nm.cancelAll();

    Log.i("Download Activity", "onPostExecute: set interface ok");
    finishDialog.show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:46:30.133

您正在非常频繁地更新通知栏，因此响应缓慢。在 2-3 秒内更新一次，你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:00:40.983

以下是我的代码

```
@Override
    protected void onProgressUpdate(Integer... values) {
        if (values.length>0) {
            //Log.d("Download Activity", "progressUpdate:"+values[0]);
            if (values[0] < 0) {
                this.cancel(true);
                showNetworkErrorDialog();
            } else {
                //size += values[0];
                //Log.d("Download Activity", "download size:"+size);
                //downloadedGoodListSize += values[0];
                //downloadProgressBar.incrementProgressBy(values[0]);
                setCurrentProgress(values[0]);
                downloadProgressBar.setProgress(values[0]);
                double currentProg = downloadProgressBar.getProgress()*1.0/downloadProgressBar.getMax()*100;
                //progressTextView.setText( decimalFormat.format(downloadedGoodListSize*1.0/downloadProgressBar.getMax()*100.0)+"%");
                progressTextView.setText(decimalFormat.format(downloadProgressBar.getProgress()*1.0/downloadProgressBar.getMax()*100)+"%");

                notification.contentView.setProgressBar(R.id.pb, 100, (int)currentProg, false);

                nm.notify(notificationID, notification);

            }
        }
    }

@Override
    protected void onPostExecute(Boolean result) {
        Log.i("Download Activity", "onPostExecute: starting");
        downloadProgressBar.setProgress(downloadProgressBar.getMax());
        progressTextView.setText(100+"%");
        wheelProgressBar.setVisibility(View.GONE);
        downloadingTextView.setText(getFinishedText());

       notification.contentView.setProgressBar(R.id.pb, 100, 100, false);
       nm.notify(notificationID, notification);
       nm.cancelAll();

        Log.i("Download Activity", "onPostExecute: set interface ok");
        finishDialog.show();

    } 
```

# google-plus - 如何从 google plus oauth 获取用户电子邮件

> ID：11606101
> 
> 赞同：34
> 
> 时间：2012-07-23T03:25:08.417
> 
> 标签：google-plus

链接：[https ://sites.google.com/site/oauthgoog/Home/emaildisplayscope](https://sites.google.com/site/oauthgoog/Home/emaildisplayscope)

从上面的链接中，我添加了电子邮件范围

```
https://www.googleapis.com/auth/plus.me
https://www.googleapis.com/auth/userinfo.email 
```

但我不明白以下内容

*拥有有效的 OAuth 令牌后，您可以使用它对电子邮件显示 API 端点进行 API 调用：https: [//www.googleapis.com/userinfo/email](https://www.googleapis.com/userinfo/email) 如果令牌无效，将返回 401 错误。如果令牌有效，则返回用户的电子邮件地址。API 还将返回一个布尔值，以指示 Google 是否已验证用户拥有该电子邮件地址。但是，大多数已安装的应用程序将忽略该值。*

如何调用电子邮件显示 API 端点？使用[https://www.googleapis.com/userinfo/email](https://www.googleapis.com/userinfo/email)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-23T03:43:01.473

将范围设置为：

*   [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)和
*   [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

并使用端点：

[https://www.googleapis.com/oauth2/v1/userinfo?alt=json](https://www.googleapis.com/oauth2/v1/userinfo?alt=json)

用法：

```
get https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=youraccess_token 
```

您将获得 JSON：

```
{ "id": "xx", 
  "name": "xx", 
  "given_name": "xx", 
  "family_name": "xx", 
  "link": "xx", 
  "picture": "xx", 
  "gender": "xx", 
  "locale": "xx" 
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-13T12:12:07.527

Google+ 登录的范围已更改。

将范围设置为：

```
https://www.googleapis.com/auth/plus.login
https://www.googleapis.com/auth/userinfo.email 
```

JavaScript 调用如下所示：

```
gapi.client.load('oauth2', 'v2', function() {
  gapi.client.oauth2.userinfo.get().execute(function(resp) {
    // Shows user email
    console.log(resp.email);
  })
});

gapi.client.load('plus', 'v1', function() {
  gapi.client.plus.people.get( {'userId' : 'me'} ).execute(function(resp) {
    // Shows profile information
    console.log(resp);
  })
}); 
```

更多信息[https://developers.google.com/+](https://developers.google.com/+)。

编辑：请注意，您不需要 plus.me 或 userinfo.profile 的范围。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-12-10T11:58:46.067

现在我们将 GoogleAPI 与 Google+ 一起使用

截至 2013 年 12 月，这里是最新的网站；

[https://developers.google.com/+/](https://developers.google.com/+/)

然后为 Web 登录

[https://developers.google.com/+/web/signin/](https://developers.google.com/+/web/signin/)

选择登录流程

->客户端流程

->**使用 JavaScript 启动登录流程**（*我相信这是最新技术*）

[https://developers.google.com/+/web/signin/javascript-flow](https://developers.google.com/+/web/signin/javascript-flow)

> 使用 JavaScript 启动 Google+ 登录流程
> 
> 您可以使用**gapi.auth.signIn()** 方法启动 Google+ 登录流程。此方法为您提供了很大的灵活性来决定如何以及何时提示用户授权您的应用和登录。

[https://developers.google.com/+/web/api/javascript#gapiauthsigninparameters](https://developers.google.com/+/web/api/javascript#gapiauthsigninparameters)

> **gapi.auth.signIn（参数）**
> 
> 启动客户端 Google+ 登录 OAuth 2.0 流程。与 gapi.auth.authorize() 类似，只是此方法支持高级 Google+ 登录功能，包括无线安装 Android 应用程序。此方法是使用 Google+ 登录按钮小部件的 JavaScript 替代方法。

[https://developers.google.com/+/web/signin/javascript-flow](https://developers.google.com/+/web/signin/javascript-flow)

*   **尝试使用**页面触发登录流程**gapi.auth.signIn()**

[https://google-developers.appspot.com/+/demos/signin_demo_render](https://google-developers.appspot.com/+/demos/signin_demo_render) (SourceCode)

您将尝试这个，并为您自己的，按照

第 1 步：创建客户端 ID 和客户端密码

忽略以下步骤，

实际上，您只需要 clientID 并替换上面**Try it**的源代码中的那个。

添加范围 [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)

```
var options = {
  'callback': loginFinished,
  'approvalprompt': 'force',
  'clientid': 'YOURID.apps.googleusercontent.com',
  'scope': 'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email',
  'requestvisibleactions': 'http://schemas.google.com/CommentActivity http://schemas.google.com/ReviewActivity',
  'cookiepolicy': 'single_host_origin'
}; 
```

添加

```
gapi.client.load('oauth2', 'v2', function()
  {
    gapi.client.oauth2.userinfo.get()
      .execute(function(resp)
      {
        // Shows user email
        console.log(resp.email);
      });
  }); 
```

这是基于上述内容的完整工作和简洁代码：

```
<html>
<head>
  <title>Google+ Sign-in button demo: rendering with JavaScript</title>
  <style type="text/css">
  html, body { margin: 0; padding:0;}
  #signin-button {
   padding: 5px;
  }
  #oauth2-results pre { margin: 0; padding:0; width: 600px;}
  .hide { display: none;}
  .show { display: block;}
  </style>

  <script src="https://apis.google.com/js/client:platform.js" type="text/javascript"></script>
  <script type="text/javascript">
var loginFinished = function(authResult)
{
  if (authResult)
  {
    console.log(authResult);
  }

  gapi.client.load('oauth2', 'v2', function()
  {
    gapi.client.oauth2.userinfo.get()
      .execute(function(resp)
      {
        // Shows user email
        console.log(resp.email);
      });
  });

};

var options = {
  'callback': loginFinished,
  'approvalprompt': 'force',
  'clientid': 'YOURID.apps.googleusercontent.com',
  'scope': 'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email',
  'requestvisibleactions': 'http://schemas.google.com/CommentActivity http://schemas.google.com/ReviewActivity',
  'cookiepolicy': 'single_host_origin'
};

var renderBtn = function()
{
  gapi.signin.render('renderMe', options);
}
  </script>

</head>
<body onload ="renderBtn()">
   <div id="renderMe"></div>  
</body>
</html> 
```

## 没有 HTML 输出，但控制台。所以打开浏览器的开发者控制台工具来查看结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-16T17:02:31.337

我在 angularjs 中，在 Ionic 框架中做了这个，它可以工作。试试这个。

```
controller("OauthExample", function($scope, $cordovaOauth, $http) {

    $scope.googleLogin = function() {
        $cordovaOauth.google("YOUR CLIENTID", ["https://www.googleapis.com/auth/userinfo.email", "https://www.googleapis.com/auth/userinfo.profile"]).then(function(result) {
            window.localStorage.setItem("access_token", result.access_token);
            $scope.token=JSON.stringify(result);

        }, function(error) {
            console.log(error);
        });
    }

        $scope.getProfileInfo = function() {
            console.log(window.localStorage.getItem('access_token'));
        $http.defaults.headers.common.Authorization = "Bearer " + window.localStorage.getItem("access_token");
        $http.get("https://www.googleapis.com/oauth2/v1/userinfo?alt=json")
            .success(function(data) {
                console.log(data);
                console.log(data.email);
            })
            .error(function(error) {
                console.log(error);
            });
    }

}); 
```

# consumer - LMAX Disruptor模式中消费者（eventProcessor）慢问题的解决方案

> ID：11606102
> 
> 赞同：6
> 
> 时间：2012-07-23T03:25:14.267
> 
> 标签：consumer, disruptor-pattern

在使用中断器时，可能会有一个或多个消费者落后，并且由于消费者速度慢，整个应用程序都会受到影响。

请记住，每个生产者（发布者）和消费者（事件处理器）都在一个线程上运行，那么解决消费者缓慢问题的方法是什么？

我们可以在单个消费者上使用多个线程吗？如果没有，有什么更好的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:24:41.970

一般来说，使用 WorkerPool 允许多个池化工作线程在单个使用者上工作，如果您有独立的并且可能持续时间可变的任务（例如：一些短任务，一些更长的任务），这很好。

另一种选择是让多个独立的工作人员并行处理事件，但每个工作人员仅处理模数 N 个工作人员（例如，2 个线程，一个线程处理奇数，一个线程处理偶数事件 ID）。如果您有一致的持续时间处理任务，这非常有用，并且允许批处理也非常有效地工作。

要考虑的另一件事是消费者可以进行“批处理”，这在例如审计中特别有用。如果您的消费者有 10 个事件等待，而不是单独将 10 个事件写入审计日志，您可以收集所有 10 个事件并同时写入它们。以我的经验，这不仅仅涵盖了运行多个线程的需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T13:44:53.677

尝试将慢速部分分离到其他线程（I/O，而不是 O(1) 或 O(log) 计算等），或者在消费者超载时施加某种背压（通过让出或临时停放生产者，重放 503 或 429 状态码等）： http: [//mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html](http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-05T12:26:37.703

使用一组相同的事件处理程序。为了避免多个 eventHandler 作用于单个事件，我使用以下方法。

创建一个大小为系统内核数的线程池

```
Executor executor = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()); // a thread pool to which we can assign tasks 
```

然后创建一个处理程序数组

```
 HttpEventHandler [] handlers = new HttpEventHandler[Runtime.getRuntime().availableProcessors()];

for(int i = 0; i<Runtime.getRuntime().availableProcessors();i++){
    handlers[i] = new HttpEventHandler(i);
}

disruptor.handleEventsWith(handlers); 
```

在事件处理程序中

```
public void onEvent(HttpEvent event, long sequence, boolean endOfBatch) throws InterruptedException
{
    if( sequence % Runtime.getRuntime().availableProcessors()==id){

        System.out.println("-----On event Triggered on thread "+Thread.currentThread().getName()+" on sequence "+sequence+" -----");
        //your event handler logic
} 
```

# c# - 实体框架是否支持引用 0..1 个子代的父代和引用 1 个父代的子代？

> ID：11606104
> 
> 赞同：2
> 
> 时间：2012-07-23T03:25:39.150
> 
> 标签：c#, wcf, sql-server-2008, entity-framework

我有两张桌子。一个是`Request`，另一个是`Response`。每个请求都有一个对记录的可为**空**的外键引用`Response`。

每条`Response`记录都有一个**不可为空的**外键引用，指向`Request`它来自的条目。

我正在尝试为此模型生成实体，但验证失败并出现错误：`Multiplicity is not valid in role Response [...]. Because the dependent role properties are not the key properties, the upper bound of the multiplicity of the dependent role must be *`.

失败的映射：

请求 -[0..1]-> 响应

响应 -[1]-> 请求

为什么这不起作用？我知道 EF 不太喜欢外键，但这似乎很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:56:06.147

如果有两个表，并且您想要对场景进行建模：

*   每个请求都有可选的响应
*   每个响应都有要求的请求

您正在建模单个关系，并且您只需要 FK 作为响应，因为在这种情况下请求是关系的主要实体。如果要建模两个独立的关系，则需要双方的 FK。

为了使这种关系简单地`ResponseId`在`Response`实体中使用作为 FK 到`RequestId`实体中`Request`（EF 在主键上建立一对一的关系，因为它目前不支持唯一约束）。

# c++ - 在 C++ 中哪些操作不能抛出异常？

> ID：11606106
> 
> 赞同：23
> 
> 时间：2012-07-23T03:25:59.583
> 
> 标签：c++, exception

今天我了解到`swap`在 C++ 中不允许抛出异常。

我也知道以下也不能抛出异常：

*   析构函数
*   读/写原始类型

还有其他人吗？
或者，是否有某种列表提到了所有可能不会抛出的东西？
（显然，比标准本身更简洁。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T04:03:03.483

*不能*和*不应该*有很大的区别。对原始类型的操作不能像许多函数和成员函数一样抛出，包括标准库和/或许多其他库中的许多操作。

现在在*should not*上，您可以包含析构函数和交换。根据您实现它们的方式，它们实际上可以抛出，但您应该避免使用抛出的析构函数，并且在 的情况下`swap`，提供具有不抛出保证的交换操作是在您的类中实现强异常保证的最简单方法，因为你可以*复制*一边，对副本执行操作，然后与原件*交换。*

但请注意，该语言*允许*析构函数和`swap`抛出。`swap` **可以**抛出，在最简单的情况下，如果你不重载它，然后`std::swap`执行复制构造、赋值和销毁，三个操作都可以抛出异常（取决于你的类型）。

析构函数的规则在 C++11 中发生了变化，这意味着没有异常规范的析构函数具有隐式`noexcept`规范，这反过来意味着如果它抛出异常，运行时将调用`terminate`，但是您可以将异常规范更改为`noexcept(false)`然后析构函数也可以抛出。

归根结底，如果不了解代码库，就无法提供异常保证，因为几乎 C++ 中的每个函数都允许抛出异常。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T04:40:56.290

所以这并不能完美地回答你的问题——出于我自己的好奇心，我进行了一些搜索——但我相信 *nothrow*[保证](http://msdn.microsoft.com/en-us/library/49147z04.aspx)函数/运算符主要来自 C++ 中可用的任何 C 样式函数以及一些函数任意简单到足以给出这样的保证。一般来说，不期望 C++ 程序提供这种保证（[什么时候应该使用 std::nothrow？](https://stackoverflow.com/questions/4718116/when-should-stdnothrow-be-used)) 并且甚至不清楚这样的保证是否会在经常使用异常的代码中为您购买任何有用的东西。除了交换、析构函数和原始操作的列表之外，我找不到作为非抛出函数的所有 C++ 函数的完整列表（如果我错过了规定这一点的标准，请纠正我）。此外，在库中未完全定义的函数要求用户实现 nothrows 函数似乎相当罕见。

因此，也许要找到问题的根源，您应该主要假设任何东西都可以在 C++ 中抛出，并在您发现绝对不能抛出异常的东西时将其视为一种简化。编写异常安全代码很像编写无错误代码——它比听起来更难，而且老实说，通常不值得付出努力。此外，异常不安全代码和强大的 nothrow 函数之间存在许多级别。看到这个关于编写异常安全代码的很棒的答案作为对这些点的验证：[你（真的）写异常安全代码吗？](https://stackoverflow.com/questions/1853243/c-do-you-really-write-exception-safe-code). [在 boost 站点http://www.boost.org/community/exception_safety.html](http://www.boost.org/community/exception_safety.html)上有更多关于异常安全的信息。

对于代码开发，我从教授和编码专家那里听到了关于什么应该和不应该抛出异常以及这些代码应该提供什么保证的不同意见。但是一个相当一致的断言是，很容易抛出异常的代码应该非常清楚地记录在案，或者在函数定义中指出抛出的能力（并不总是仅适用于 C++）。可能抛出异常的函数比*从不*抛出的函数更常见，知道可能发生的异常非常重要。但是保证一个将一个输入除以另一个输入的函数永远不会引发除以 0 异常可能是非常不必要/不需要的。因此 nothrow 可以让人放心，但对于安全代码执行来说不是必需的或总是有用的。

**回应对原始问题的评论：**

人们有时会说抛出异常的构造函数在容器中或一般情况下是邪恶的，应该始终使用两步初始化和 is_valid 检查。但是，如果构造函数失败，它通常无法修复或处于独特的错误状态，否则构造函数会首先解决问题。检查对象是否有效就像在初始化代码周围放置一个 try catch 块一样困难，您知道这些对象很有可能引发异常。那么哪个是正确的？通常是在代码库的其余部分中使用的那个，或者你的个人喜好。我更喜欢基于异常的代码，因为它让我感觉更灵活，无需检查每个对象的有效性（其他人可能不同意）。

这会给您留下原始问题和评论中列出的扩展名吗？好吧，从提供的来源和我自己的经验来看，从 C++ 的“异常安全”角度担心 nothrow 函数通常是处理代码开发的错误方法。相反，请记住您知道的功能*可能是合理的*抛出异常并适当地处理这些情况。这通常涉及 IO 操作，您无法完全控制触发异常的原因。如果您遇到了您从未预料到或认为不可能的异常，那么您的逻辑（或您对函数使用的假设）中存在错误，您需要修复源代码以适应。试图保证非平凡的代码（有时甚至是这样）就像说服务器永远不会崩溃——它可能非常稳定，但你可能不会 100% 确定。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-30T00:33:38.277

如果您想要这个问题的详尽答案，请访问[http://exceptionsafecode.com/](http://exceptionsafecode.com/)并观看仅涵盖 C++03 的 85 分钟视频或涵盖两者的三小时（分两部分）视频C++03 和 C++11。

在编写异常安全代码时，我们假设所有函数都抛出异常，除非我们知道不同。

简而言之，

*) 基本类型（包括数组和指向的指针）可以分配给和从不涉及用户定义运算符的操作（例如仅使用基本整数和浮点值的数学）中使用。请注意，除以零（或任何其结果未在数学上定义的表达式）是未定义的行为，可能会或可能不会抛出，具体取决于实现。

*) 析构函数：发出异常的析构函数在概念上没有错，标准也没有禁止它们。但是，良好的编码指南通常会禁止它们，因为该语言不能很好地支持这种情况。（例如，如果 STL 容器中对象的析构函数抛出，则行为未定义。）

*) 使用 swap() 是提供强异常保证的重要技术，但前提是 swap() 不抛出异常。一般来说，我们不能假设 swap() 是非抛出的，但该视频介绍了如何在 C++03 和 C++11 中为您的用户定义类型创建非抛出交换。

*) C++11 引入了移动语义和移动操作。在 C++11 中，swap() 是使用移动语义实现的，移动操作的情况与 swap() 的情况类似。我们不能假设移动操作不会抛出，但我们通常可以为我们创建的用户定义类型创建非抛出移动操作（并且它们是为标准库类型提供的）。如果我们在 C++11 中提供非抛出移动操作，我们将免费获得非抛出 swap()，但出于性能目的，我们可以选择以任何方式实现我们自己的 swap()。同样，这是视频中的详细介绍。

*) C++11 引入了 noexcept 运算符和函数装饰器。（Classic C++ 中的“throw ()”规范现在已弃用。）它还提供了函数自省功能，因此可以编写代码以根据是否存在非抛出操作来不同地处理情况。

除了视频之外，exceptionsafecode.com 网站上还有关于需要为 C++11 更新的异常的书籍和文章的参考书目。

# sqlite - 如何使用 SQLite 表的默认值？

> ID：11606108
> 
> 赞同：-1
> 
> 时间：2012-07-23T03:26:18.897
> 
> 标签：sqlite

我正在寻找将数据插入到这样的列中：

```
INSERT INTO Song values (null, 'Truth of a Liar') 
```

进入这样设置的表：

```
CREATE TABLE Song (id integer primary key, name varchar(255), count int not null default 0) 
```

我收到以下错误：`table Song has 3 columns but 2 values were supplied INSERT INTO Song2 values (null, 'Truth of a Liar')`

我期望不能放入最后一列，因为我有时可能不得不输入`count`值。我知道我可以像这样明确地填充列：

```
INSERT INTO Song(id, name) values (null, 'msdads') 
```

但我希望有一个替代方案。

**是否有另一种方法将`INSERT`数据放入表中，使用一些默认值和一些设置值？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:35:57.963

你可以这样做：

```
INSERT INTO Song values (null, 'Truth of a Liar',0) 
```

当您不想为最后一列插入任何内容时。当您想偶尔插入一个值时，您可以使用该值而不是 0。

# web-services - 如何为我的 heroku 应用设置网络解决方案的 CNAME 记录？

> ID：11606109
> 
> 赞同：5
> 
> 时间：2012-07-23T03:26:20.920
> 
> 标签：web-services, heroku, dns

我在网络解决方案上购买了一个域名。我在blooming-summer-8571.herokuapp.com 有一个工作应用程序。我希望我在网络解决方案上的域名指向这个应用程序。所以在 CNAME 记录中。它有一个别名框 ttl 和一个 @ (none) 或 www 下拉菜单。然后，您可以检查另一个选项（而不是下拉菜单）来填写其他主机名。

那么别名是什么？我应该检查其他主机名并输入 heroku 应用程序的网址吗？这一切都是在我购买的域的 DNS 设置下完成的，所以我假设我不必在任何地方填写它？我找到的在线资源相当无用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-02T17:15:25.920

我刚刚经历了同样的事情。

1.  登录到网络解决方案（登录时选择管理我的域）
2.  在要指向 Heroku 的域上单击“管理”
3.  单击“编辑高级 DNS 记录”
4.  单击“编辑 A 记录”并清除“www”和“*（所有其他）”的 IP 地址。将 205.178.189.129 放入“@（无）”，然后单击继续
5.  点击“编辑 CName 记录”
6.  在别名中输入“www”。而“YOURAPP.herokuapp.com”在“其他主机”字段中。确保选中“其他主机”的单选按钮。然后点击继续。
7.  *如果您收到错误*消息，声称您已经拥有 www 的 A 记录，请退出 Network Solutions，重新登录，然后重试。

这会将 www.YOURDOMAIN.com 指向 YOURAPP.herokuapp.com

为了确保它有效（在检查之前给它一些时间）打开一个终端窗口并输入：

```
host www.YOURDOMAIN.com 
```

它应该以类似 ..

```
www.YOURDOMAIN.com is an alias for YOURAPP.herokuapp.com. 
```

资源：
[https ://devcenter.heroku.com/articles/custom-domains#domain-precedence](https://devcenter.heroku.com/articles/custom-domains#domain-precedence) [http://www.networksolutions.com/support/how-to-forward-your-network-solutions-domain-name-to -免费博客服务/](http://www.networksolutions.com/support/how-to-forward-your-network-solutions-domain-name-to-a-free-blog-service/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T23:10:22.303

刚刚发现此页面对此非常有帮助：

[http://www.networksolutions.com/support/how-to-forward-your-network-solutions-domain-name-to-a-free-blog-service/](http://www.networksolutions.com/support/how-to-forward-your-network-solutions-domain-name-to-a-free-blog-service/)

基本上你只需要删除你所有的A记录，并将@指向IP 205.178.189.129。然后，只要您拥有“www”的有效 CNAME 记录（在 Heroku 的情况下，它会指向您应用的 heroku URL），Network Solutions 就会正确地将所有流量转发到您的 www CNAME。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T05:53:48.053

CNAME（规范名称）记录仅适用于您可以控制的域，并将规范名称指向正确的域名。您需要做的是按照以下步骤将您的域指向您的 Heroku 应用程序：[https ://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

文章确实声明使用 CNAME 指向blooming-summer-8571.herokuapp.com（雪松服务器）

# ruby - 红宝石内存分析器

> ID：11606110
> 
> 赞同：2
> 
> 时间：2012-07-23T03:26:27.553
> 
> 标签：ruby, memory, analysis

我只想知道系统内存（RAM）如何受到红宝石代码的影响。

让我们以下面给出的 ruby​​ 代码为例：

```
i = 0
while i < 100
  puts i = i +1
end 
```

运行这段代码会消耗多少内存。我们可以测量这些东西。

运行此代码时，是否有任何工具可以分析内存中发生的情况？

谢谢

# python - Python 在保持顺序的同时从列表中删除一些重复项？

> ID：11606112
> 
> 赞同：3
> 
> 时间：2012-07-23T03:26:38.230
> 
> 标签：python, list, set, duplicates

我想删除我的 python 列表中的某些重复项。我知道有一些方法可以删除所有重复项，但我只想删除连续的重复项，同时保持列表顺序。

例如，我有一个如下列表：

```
list1 = [a,a,b,b,c,c,f,f,d,d,e,e,f,f,g,g,c,c] 
```

但是，我想删除重复项并保持顺序，但仍保留 2 c 和 2 f，例如：

```
wantedList = [a,b,c,f,d,e,f,g,c] 
```

到目前为止，我有这个：

```
z = 0
j=0
list2=[]
for i in list1:
    if i == "c":
        z = z+1
        if (z==1):
            list2.append(i)
        if (z==2):
            list2.append(i)
        else:
            pass
    elif i == "f":
        j = j+1
        if (j==1):
            list2.append(i)
        if (j==2):
            list2.append(i)
        else:
            pass
    else:
        if i not in list2:
            list2.append(i) 
```

但是，这种方法给了我类似的东西：

```
wantedList = [a,b,c,c,d,e,f,f,g] 
```

因此，不维持秩序。

任何想法，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T03:47:43.807

不完全确定是否`c`和`f`是特殊情况，或者您是否只想压缩连续的重复项。如果是后者，您可以使用`itertools.groupby()`：

```
>>> import itertools
>>> list1
['a', 'a', 'b', 'b', 'c', 'c', 'f', 'f', 'd', 'd', 'e', 'e', 'f', 'f', 'g', 'g', 'c', 'c']
>>> [k for k, g in itertools.groupby(list1)]
['a', 'b', 'c', 'f', 'd', 'e', 'f', 'g', 'c'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T03:36:29.990

要从列表中删除连续重复项，可以使用以下生成器函数：

```
def remove_consecutive_duplicates(a):
    last = None
    for x in a:
        if x != last:
            yield x
        last = x 
```

使用您的数据，这给出了：

```
>>> list1 = ['a','a','b','b','c','c','f','f','d','d','e','e','f','f','g','g','c','c']
>>> list(remove_consecutive_duplicates(list1))
['a', 'b', 'c', 'f', 'd', 'e', 'f', 'g', 'c'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:37:39.893

如果您想在删除重复项时忽略某些项目...

```
list2 = []
for item in list1:
    if item not in list2 or item in ('c','f'):
        list2.append(item) 
```

编辑：请注意，这不会删除连续的项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T03:40:09.410

编辑没关系，我读错了你的问题。我以为你只想保留某些双打。

我会推荐这样的东西。它允许一般形式保留某些双打一次。

```
list1 = ['a','a','b','b','c','c','f','f','d','d','e','e','f','f','g','g','c','c']
doubleslist = ['c', 'f']

def remove_duplicate(firstlist, doubles):
    newlist = []
    for x in firstlist:
        if x not in newlist:
            newlist.append(x)
        elif x in doubles:
            newlist.append(x)
            doubles.remove(x)
    return newlist

print remove_duplicate(list1, doubleslist) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T04:54:12.063

简单的解决方案是将此元素与下一个或上一个元素进行比较

```
a=1
b=2
c=3
d=4
e=5
f=6
g=7
list1 = [a,a,b,b,c,c,f,f,d,d,e,e,f,f,g,g,c,c]
output_list=[list1[0]]
for ctr in range(1, len(list1)):
    if list1[ctr] != list1[ctr-1]:
        output_list.append(list1[ctr])
print output_list 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-18T15:39:38.407

```
list1 = ['a', 'a', 'b', 'b', 'c', 'c', 'f', 'f', 'd', 'd', 'e', 'e', 'f', 'f', 'g', 'g', 'c', 'c']

wantedList = []

for item in list1:   
   if len(wantedList) == 0:
      wantedList.append(item)

   elif len(wantedList) > 0:
      if  wantedList[-1] != item:
          wantedList.append(item)

print(wantedList) 
```

1.  从主列表（list1）中获取每个项目。
2.  如果“temp_list”为空，则添加该项目。
3.  如果不是，请检查 temp_list 中的最后一项是否与我们从“list1”中获取的项不同。
4.  如果项目不同，则附加到 temp_list。

# php - CodeIgniter 购物车无法容纳 10 件以上的物品

> ID：11606116
> 
> 赞同：2
> 
> 时间：2012-07-23T03:26:57.780
> 
> 标签：php, codeigniter

我正在测试将商品添加到购物车中，如下所示：

```
$item = $this->model->getSingleItem();

for($i = 0; $i < 11; $i++) {
    $this->cart->insert(array(
            'id' => $item->id++,
            'qty' => 1,
            'price' => 1,
            'name' => $item->title
        ));
} 
```

但是，上述循环仅将 10 件商品添加到购物车中。即使我将上面的循环修改为运行 20 次，我仍然只能在购物车中获得 10 件商品。这是一个已知的错误，还是我做错了什么？

做`echo count($this->cart->contents());`总是显示计数为 10 或更少。再也不会了。

我正在使用 CI 2.1.2。如果有人可以确认他们在以前的版本中没有遇到这个问题，也许我可以使用旧版本的 CI 中的购物车类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T04:31:15.237

好的，想通了。我无法存储超过 10 个项目的原因是因为我达到了 cookie 大小的限制（CI 会话存储为 cookie）。我将配置更改为使用数据库进行会话，这个问题就消失了。

# c# - 请问我可以就如何处理这个问题提出一些建议吗？

> ID：11606122
> 
> 赞同：0
> 
> 时间：2012-07-23T03:28:32.347
> 
> 标签：c#, jquery, asp.net

我有一个来自数据库的字段，称为部分，并且我在标记上有以下复选框控件。

```
<asp:CheckBox runat="server" ID="sections" /> 
<label for="sections">Section values</label> 
```

然后在代码隐藏中，我使用此代码来呈现带有 value 属性的复选框控件，并且以我想要的方式显示 Sections 的实际值。

```
Me.sections.InputAttributes.Add("Value", "Miracle Alley") 
```

我现在的问题有两个：

1，向标记添加 CheckAll/UncheckAll 功能以便用户可以选中一个或多个复选框以显示与复选框关联的一个或多个值的最佳方法是什么？

2、我们要声明一个变量，并将复选框的值赋给这个变量。例如，如果选中sections，则 varsectionList =sections 值。

这可能吗？

如果没有，任何替代解决方案？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:37:09.083

尝试以下操作：

1) 请注意，您应该有 2 个 ID 为`#checkAll`and的元素`#unCheckAll`并加载 jQuery 库:)

```
$(document).ready(function(){
    $('#checkAll').click(function(){
       $('input[type="checkbox"]').prop('checked', true)
    })

    $('#unCheckAll').click(function(){
       $('input[type="checkbox"]').prop('checked', false)
    })
}) 
```

2)

```
$('input[type="checkbox"]').change(function(){
   var sectionsList = $('input[type="checkbox"]:checked').map(function(){
          return this.value
   })
   console.log(sectionsList)
}) 
```

# c++ - 对“膨胀”的未定义引用

> ID：11606124
> 
> 赞同：17
> 
> 时间：2012-07-23T03:28:55.083
> 
> 标签：c++, static-libraries

试图链接到我用 MinGW 构建的静态 assimp 库。以下是我得到的错误：

> H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a(BlenderLoader.cpp.obj):BlenderLoader.cpp:(.text+0xd91): undefined reference to `inflateInit2_' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(BlenderLoader.cpp.obj):BlenderLoader.cpp:(.text+0xe06): undefined reference to`inflate' H:\ovgl\ovgl。 ..\dependencies\Assimp\lib\libassimp.a(BlenderLoader.cpp.obj):BlenderLoader.cpp:(.text+0xf72): undefined reference to `inflateEnd' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XGLLoader.cpp.obj):XGLLoader.cpp:(.text+0x76c): undefined reference to`inflateInit2_' H:\ovgl\ovgl...\dependencies\Assimp\ lib\libassimp.a(XGLLoader.cpp.obj):XGLLoader.cpp:(.text+0x7ff): undefined reference to `inflate' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XGLLoader.cpp.obj):XGLLoader.cpp:(.text+0x953): undefined reference to`inflateEnd' H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a(XFileParser .cpp.obj):XFileParser.cpp:(.text+0x9ac): undefined reference to `inflateInit2_' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0xd5c): undefined reference to`inflate' H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser .cpp:(.text+0xed2): 未定义的引用`inflateReset' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0xef8): undefined reference to`inflateSetDictionary' H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0xf52): 未定义引用`inflateEnd' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0x1b4a): undefined reference to`inflateInit2_' H:\ovgl\ ovgl...\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0x1efa): undefined reference to `inflate' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0x2070): undefined reference to`inflateReset' H:\ovgl\ovgl...\dependencies\ Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0x2096): undefined reference to `inflateSetDictionary' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(XFileParser.cpp.obj):XFileParser.cpp:(.text+0x20f0): undefined reference to`inflateEnd' H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a (unzip.c.obj):unzip.c:(.text+0x1935): 未定义对`inflateInit2_' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(unzip.c.obj):unzip.c:(.text+0x19b8): undefined reference to`get_crc_table' H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a(unzip.c.obj) 的引用:unzip.c:(.text+0x1ec2): 未定义的引用`crc32' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(unzip.c.obj):unzip.c:(.text+0x1f67): undefined reference to`inflate' H:\ovgl\ovgl...\dependencies\Assimp\lib\libassimp.a(unzip.c.obj):unzip.c:(.text+0x1fb5): undefined reference to `crc32' H:\ovgl\ovgl\.\..\dependencies\Assimp\lib\libassimp.a(unzip.c.obj):unzip.c:(.text+0x2245): undefined reference to`inflateEnd'

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-23T04:16:48.023

这些是 zlib 库中的函数。您是否有 zlib.h 和 zlib 库（.a 或 .lib）以及正确设置的路径

# .net - 如何在 Windows 8 中添加自定义视图

> ID：11606126
> 
> 赞同：0
> 
> 时间：2012-07-23T03:29:26.773
> 
> 标签：.net, windows, windows-8

我想在运行时以编程方式将自定义视图（图像+文本块+图像）添加到 StackPanel。我听说过可以在 Standardstyles.xml 中定义的模板，但是我如何在代码中获取它们的引用并将它们添加到堆栈面板。

我是 Windows 8（来自 iPhone）的新手，就 iOS 而言，我基本上想将自定义视图对象作为子视图添加到父级。

任何人 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:11:36.670

我只会创建一个用户控件（我认为相当于 iOS 自定义视图对象？）。如果您进入项目 > 添加新项目并选择用户控件，您将看到与普通页面类似的屏幕。您可以在那里设计您的控件，然后在项目中使用它。

要在运行时将用户控件添加到堆栈面板，您可以执行以下操作

```
stackpanel_name.Children.Add(instance_of_User_Control); 
```

# java - DDD 和 CRUD 类型的应用程序

> ID：11606131
> 
> 赞同：2
> 
> 时间：2012-07-23T03:30:17.387
> 
> 标签：java, domain-driven-design

在包含大量 CRUD 功能的应用程序中实现 DDD 时，再加上某种 web-API，您最终会遇到这样一种情况：使用平台提供的工具可以使相对简单的事情变得更加困难。例如：

假设我们有一个 User 对象，并且您正在努力不创建贫血的域模型，因此您可以建模更具表现力的操作：

```
class User {
    public void terminateAccount(TeminationReason reason);
    public void reactivateAccount();
} 
```

上面的类很好，因为它让我们可以将帐户标记为已终止并立即设置原因。显然是对 setEnabled(false) 和 setTerminationReason(..) 的改进。

问题是，假设我们有类似 JAX-RS Web 服务的东西，它可以 GET/PUT 覆盖该用户。该框架（JAX-RS、JAXB）将为我们轻松地序列化和反序列化我们的 DTO 对象。现在，我们以前可以做的：

```
entity.setEnabled(dto.isEnabled);
entity.setTerminationReason(dto.getTerminationReason); 
```

我们必须改为：

```
if (entity.isEnabled() && !dto.isEnabled()) {
    entity.terminateAccount(dto.getTerminationReason);
} else if (!entity.isEnabled && dto.isEnabled) {
    entity.reactivateAccount();
} 
```

这里最大的脱节是领域对象的面向业务的接口，以及 RESTful API 上的 CRUD 样式访问模式。由于 DDD 和 REST 本身都是最佳实践，这里的每个人都学到了什么教训来减少上面的代码痛苦/重复/等等？

PS - 我们使用 DTO 是因为在幕后使用 ORM 框架时，实际上将实体序列化为 XML/JSON 是有问题的，因为我们无法限制延迟加载。您通常还希望通过 RESTful API（参考 URL 等）公开不属于域模型的不同属性。我也愿意接受这里的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T03:43:23.887

我认为这里的问题是您正在尝试使用单个 DTO 来表示`User`所有 API 中的实体。相反，如果每个操作都有一个单独的 DTO，只包含所需的数据，那么您的代码会简单得多。

例如，`TerminateAccount`API 将有一个仅包含终止原因的 DTO，而您的代码将是：

```
user.terminateAccount(dto.terminationReason); 
```

# javascript - 如何通过 chrome.experimental.offscreenTabs.toDataUrl 正确生成图像？

> ID：11606135
> 
> 赞同：1
> 
> 时间：2012-07-23T03:30:45.623
> 
> 标签：javascript, google-chrome-extension, screenshot, offscreentabs

我遇到了一个问题：`chrome.experimental.offscreenTabs.create`效果很好，但是该`toDataUrl`方法生成了一个高度为 1 像素的图像。我已经尽力了，但生成的图像`toDataUrl`没有显示我指定的大小。如何解决这个问题？

这是我的代码：

```
chrome.experimental.offscreenTabs.create({ url: "http:/www.baidu.com" }, function(offscreenTab) {
    // console.log(offscreenTab);
    chrome.experimental.offscreenTabs.toDataUrl(offscreenTab.id, { format: "png" }, function(imgUrl) {
        $("#container").html("<img src='" + imgUrl + "' />");
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:48:28.140

***`offscreenTabs`API 是实验性的。以下解决方案已在 Chromium 20.0.1132.57 (Linux) 中成功测试，但这并不意味着该代码在以后的版本中仍然有效。***
此答案是[如何使用实验性 offscreenTab API？](https://stackoverflow.com/a/11361143/938089?how-to-use-the-experimental-offscreentab-api?)

* * *

[`chrome.experimental.offscreenTabs.create`](http://code.google.com/chrome/extensions/experimental.offscreenTabs.html#method-create)创建选项卡时调用的回调函数。使用[`chrome.webRequest`](http://code.google.com/chrome/extensions/webRequest.html)API 和 UNIX [netcat](http://linux.die.net/man/1/nc)命令进行的测试表明，可以在服务器响应**之前触发回调。**因此，在页面呈现*后*不太可能触发回调。

我的演示扩展包含 5 个文件。简要说明它们的作用：

*   **`manifest.json`**- 扩展所需的胶水（参见[文档](http://code.google.com/chrome/extensions/manifest.html)）。
*   **`sayhello.js`**-通知背景页面的[内容脚本。](http://code.google.com/chrome/extensions/content_scripts.html)这个助手是必要的，因为[`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html)和[`chrome.webRequest`](http://code.google.com/chrome/extensions/chrome.webRequest.html)没用： 的事件侦听`chrome.tabs`器永远不会为屏幕外的选项卡触发，并且 的事件侦听`chrome.webRequest`器会在页面呈现之前触发。
*   **`background.js`**-从内容脚本接收[消息的背景页面。](http://code.google.com/chrome/extensions/messaging.html)[`chrome.extension.getViews()`](http://code.google.com/chrome/extensions/extension.html#method-getViews)用于定位启动屏幕外选项卡的视图。
*   **`options.html`**-启动屏幕外选项卡的**可见视图。**（后台页面无法启动屏幕外选项卡）。
*   **`options.js`**- 当清单版本 2 处于活动状态时，不执行内联脚本。脚本必须放在外部文件中，并使用`<script src>`.

我已将扩展名上传到[http://rob.lekensteyn.nl/offscreentabs.zip](http://rob.lekensteyn.nl/offscreentabs.zip) ^(相同的文件，crx 扩展名：[CRX](http://rob.lekensteyn.nl/offscreentabs.crx))。如果您想测试它，请不要忘记在 启用**实验**权限。`chrome://flags`

### `manifest.json`

```
{
    "name": "OffscreenTabs API test",
    "version": "1.0",
    "description": "offscreenTabs demo - See https://stackoverflow.com/q/11606135",
    "manifest_version": 2,
    "permissions": ["experimental", "<all_urls>"],
    "options_page": "options.html",
    "background": {"scripts": ["background.js"] },
    "content_scripts": [{
        "js": ["sayhello.js"],
        "matches": ["<all_urls>"]
    }]
} 
```

### `sayhello.js`

```
chrome.extension.sendMessage("Hello"); // Yup, that's it 
```

### `background.js`

```
chrome.extension.onMessage.addListener(function(message, sender) {
    if (message === "Hello" && sender && sender.tab) {
        // Message received from content script, pass information to a view
        //  within our extension, which processes offscreenTabs
        chrome.extension.getViews({type:"tab"}).forEach(function(_window) {
            if (_window.checkTab) _window.checkTab(sender.tab.id);
        });
    }
}); 
```

### `options.html`

```
<!DOCTYPE html>
<head>
<meta charset="utf8">
<title>offscreenTabs test</title>
<script src="options.js"></script>
</head>
<body>
Enter an URL and press <kbd>Enter</kbd>.<br>
<input type="url" size="100" id="url" value="https://stackoverflow.com/users/938089/rob-w">
<img id="lastImg">
</body>
</html> 
```

### `options.js`

```
"use strict";

var collection = [];
// This function is called by the background (via the content script)
// If the tabId is recognised, take a screenshot
function checkTab(tabId) {
    var index = collection.indexOf(tabId);
    if (index !== -1) {
        collection.splice(index, 1); // Remove tabId
        toDataUrl(tabId);            // Take screenshot
    }
}

function create(url, width, height) {
    var createProperties = {url: url};
    if (width) createProperties.width = width;
    if (height) createProperties.height = height;

    // Create offscreen tab
    chrome.experimental.offscreenTabs.create(createProperties, function(offscreenTab) {
        console.log("Created " + offscreenTab.id, offscreenTab);
        collection.push(offscreenTab.id);
    });
}
function toDataUrl(offscreenTabId, options) {
    chrome.experimental.offscreenTabs.toDataUrl(offscreenTabId, options, function(dataUrl) {
        document.getElementById('lastImg').src = dataUrl;
    });
}

document.addEventListener('DOMContentLoaded', function() {
    // "Press Enter to load the offscreen tab and take a screenshot"
    document.getElementById('url').onkeyup = function(ev) {
        if (ev.keyCode == 13) 
            create(this.value);
    };
}); 
```

# excel - 需要在 VBA 的用户窗体中显示一个下拉菜单。要显示的数据存储在工作表中的表格中

> ID：11606136
> 
> 赞同：0
> 
> 时间：2012-07-23T03:30:57.687
> 
> 标签：excel, vba

我有一张表，存储在工作表中。我需要在用户表单的列表框中显示该表的数据（仅第一列）。任何人都可以建议我一种方法吗？？？提前致谢 。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:40:23.590

通过单击将焦点放在表单设计器中的组合框上，然后在属性资源管理器中查找名为“行源”的属性。为整个 A 列提供适当的单元格范围，例如 Sheet2!A1:A20 或 A:A，...。

# c++ - NSWindowController 分配和初始化意外崩溃

> ID：11606139
> 
> 赞同：0
> 
> 时间：2012-07-23T03:31:19.097
> 
> 标签：c++, objective-c, nswindow, objective-c++, nswindowcontroller

我目前正在为某些软件构建一个 C++ 插件，当调用相关函数时，它会显示一个我在 XCode 中构建的 nib。直到今天一切正常，显示和使用 nib / Objective-C++ / C++ 没有造成任何问题。

然而，出乎意料的是，在调用显示首选项对话框时，一切都开始崩溃。我已将崩溃代码缩小到这一行：

```
PreferencesWindowController *prefsWindowController = [[PreferencesWindowController alloc] initWithNibNamed:@"PreferencesWindow"]; 
```

PreferencesWindowController 是 NSWindowController 的超类，PreferencesWindow 是一个 .xib 文件，它也是 NSWindow 的超类。

有谁知道为什么会崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:10:05.597

我解决了这个问题。我正在为某些软件开发插件，该插件显然从 Mac 上的两个不同目录加载插件。我在两个目录中都有插件，由于某种原因，它被加载了两次，显然不知何故弄乱了内存。无论如何，我从插件目录之一中删除了它，现在它工作正常。

# wix - 合并模块的版本是用来做什么的？

> ID：11606142
> 
> 赞同：2
> 
> 时间：2012-07-23T03:32:17.290
> 
> 标签：wix, windows-installer

我没有找到使用合并模块的版本属性的任何地方，甚至没有用于升级场景。那它是干什么用的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:12:46.657

它仅在合并过程中用于验证模块的版本是否与安装程序期望使用的版本兼容。

# javascript - 试图给予 使用 jquery 的 onclick 功能

> ID：11606143
> 
> 赞同：1
> 
> 时间：2012-07-23T03:32:34.730
> 
> 标签：javascript, jquery, onclick

我在我的脚本中创建了一个构造函数，它格式化`<div>`s 以便可以即时创建和销毁它们。
这是功能：

```
function formatDiv(target,divId,divClass,content,onclick)
{
    $("#"+target).append("<div id=\'" + divId + "\' class=\'" + divClass + "\' onclick=\'" + onclick + "\'>" + content +"</div>");

} 
```

我一直在尝试做的是将函数调用作为数组中的字符串传递`"Main()"`给主菜单，并将其分配给`<div>`'s`onclick=""`属性。在使用 jquery 升级我的代码之前，这工作得很好，但是现在当我单击 时`<div>`，控制台返回：`ReferenceError: Main is not defined`。
假设这是由包含 jquery 引起的（因为它在我的旧备份中仍然有效），我决定将构造函数更新为我们 jquery 的 .click 事件处理程序，
结果如下：

```
function formatDiv(target,divId,divClass,content,onclick)
{
    $("#"+target).append("<div id=\'" + divId + "\' class=\'" + divClass + "\'>" + content +"</div>");
    $("#"+divId).click(function(){$(onclick)});
} 
```

，并且我将要在数组管道信息中调用的函数的格式更改为`onclick`参数 from `"Main()"`to `Main`。
现在，当单击 a 时`<div>`，什么也没有发生，没有错误或任何东西。

将 onclick 处理程序添加到我`<div>`的 s 的最佳方法是什么？我使用 .click 不正确吗？Jquery 对我来说仍然是新的（尽管 w3schools 课程和 jquery 网站上的教程），所以我不得不猜测我使用不正确。任何帮助，将不胜感激。

这是整个脚本：

```
$(document).ready(function () {

    $(Main);

    //main menu
    function Main()
    {
        var mainList = [">New List",">Show Lists",">Delete Lists"];
        var onClick = [NewList,Main,Main];
        var mainMenu = new Menu("Main Menu","menuMain",mainList,onClick);
        mainMenu.contentMenu();
    }

    //new list menu
    function NewList()
    {
        var mainList = ["> Create a New List"];
        var onClick = [Main];
        var newListMenu = new Menu("New List","menuMain",mainList,onClick);
        newListMenu.contentMenu();
    }

    //menu class
    function Menu(name,divClass,content,onclick)
    {
        $("#interface").html(null);

        //title
        formatDiv("interface",name,divClass,name,null);

        //return
        if(name != "Main Menu")
        {
            formatDiv(name,null,"return","^ Main Menu","Main()");
        }

        //display options
        this.contentMenu = function()
        {
            for(i=0; i<content.length; i++)
            {
                formatDiv("interface",content+i,"menuContent",content[i],onclick[i]);
            }
        }
    }

    //format divs
    function formatDiv(target,divId,divClass,content,onclick)
    {
        $("#"+target).append("<div id=\'" + divId + "\' class=\'" + divClass + "\'>" + content +"</div>");
        $("#"+divId).click(function(){$(onclick)});
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:38:31.850

如果你想调用一个函数，只需使用`functionName()`而不是`$(functionName)`这样更改你的代码

```
$(document).ready(function () {
    Main();
    ....
            //display options
            this.contentMenu = function () {
                for (i = 0; i < content.length; i++) {
                    formatDiv("interface", "content" + i, "menuContent", content[i], onclick[i]);
                }
            }
    ....
    //format divs
    function formatDiv(target, divId, divClass, content, onclick) {
        $("#" + target).append("<div id=\'" + divId + "\' class=\'" + divClass + "\'>" + content + "</div>");
        $("#" + divId).click(onclick);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:39:09.957

由于您的 div 是动态创建的，因此您不能使用`.click()`绑定，因为它只绑定到脚本运行时已经退出的元素。但是，您可以使用`.on()`并绑定到页面上的现有元素。最坏的情况是类似于 body 元素，但您可能会找到一个更接近 div 所在位置的元素。

例如：

```
$("#"+target).append("<div id=\'" + divId + "\' class=\'" + divClass + "\'>" + content +"</div>");
$('body').on('click', "#"+divId, function(){$(onclick)}); 
```

从[`.on()`](http://api.jquery.com/on/)文档中：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:40:12.210

听起来您正在寻找[live()](http://api.jquery.com/live/)类型的功能。不过，您实际上并不想使用 .live() 。这是您为什么要实际使用[.on()](http://api.jquery.com/on/)[的一个很好的答案](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T03:41:32.343

让我们从如何使用 jquery 制作 div 开始。您制作 div 的方式是正确的，但不是最有效的。您可以使用以下语法使用 jQuery 创建任何 html 元素

```
$('<NODE_NAME>') 
```

所以对于一个 div 它将是

```
$('<div>') 
```

现在我们有了一个 jquery 对象，我们需要向它添加属性，我们使用 attr 方法来完成。我们将属性名称/值对的对象传递给它。

```
$('<div>').attr({
    className: divClass ,
    id: divId 
}); 
```

现在，要在 div 中添加内容，我们使用 .html 方法

```
$('<div>')
.attr({
    className: divClass ,
    id: divId 
})
.html(
    content
); 
```

最后我们添加 onclick 处理程序

```
$('<div>')
.attr({
    className: divClass ,
    id: divId 
})
.html(
    content
)
.click(
    onclick
); 
```

您对 onclick 处理程序做错的事情是将其包装在 $() 中。这没有意义，你想调用 main 函数，而不是将它作为值传递给 jquery 函数。

# android - android 媒体播放器 - 如何禁用范围请求？（Nexus 7 上的音频流中断）

> ID：11606146
> 
> 赞同：22
> 
> 时间：2012-07-23T03:33:29.443
> 
> 标签：android, streaming, media-player

我有一个音频流应用程序，它运行本地代理服务器。本地代理服务器与互联网流媒体源建立 http 连接，在本地获取和缓冲流数据。然后，在应用程序内部，我使用 MediaPlayer 连接到本地代理服务器，使用方法

```
mediaPlayer.setDataSource(...); // the url of the local proxy server 
```

一切都很好（有很多 Android 设备和不同的操作系统版本 - 1.5...4.0），直到 Nexus 7 发布。

在 Nexus 7 中，媒体播放器拒绝播放来自本地代理服务器的源。

当我查看日志时，似乎 MediaPlayer 在内部使用范围请求。我的本地代理服务器无法处理。它返回 HTTP/1.0 200 OK 和数据。但是，媒体播放器不喜欢这样并抛出异常：

```
Caused by: libcore.io.ErrnoException
?:??: W/?(?): [ 07-18 00:08:35.333  4962: 5149 E/radiobee ]
?:??: W/?(?): : sendto failed: ECONNRESET (Connection reset by peer)
?:??: W/?(?):   at libcore.io.Posix.sendtoBytes(Native Method)
?:??: W/?(?):   at libcore.io.Posix.sendto(Posix.java:146)
?:??: W/?(?):   at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:
?:??: W/?(?):   at libcore.io.IoBridge.sendto(IoBridge.java:473)
We requested a content range, but server didn't support that. (responded with 200) 
```

根据 http 规范，如果服务器以 HTTP/1.0 而不是 1.1 响应，则客户端不得触发范围请求（无论如何 1.0 都不支持），

此外，如果服务器不支持范围请求，它应该没问题，如果它以 200 OK 响应（这就是我正在做的），但 Nexus 7 上的 MediaPlayer 实现不喜欢那样。

我看了一下这个线程： [HTTP：当 Range 不受支持时，我应该如何响应“Range：bytes=”？](https://stackoverflow.com/questions/6204283/http-how-should-i-respond-to-range-bytes-when-range-is-unsupported)

，他们声称 200 OK 的响应必须足够好，但不幸的是它没有帮助。

我不确定这是 Jelly Bean 的问题，还是 Nexus 7 实现的问题，但这对我来说仍然是一个我必须解决的问题。

同样，使用相同应用程序的许多其他 Android 设备上也没有范围请求。出于某种原因，这些范围请求现在正在 Nexus 7 上发生。（它也可能发生在其他 Android 设备上，但同样，到目前为止，我从未发生过）。

任何可能的方法来禁用 MediaPlayer 的范围请求？

如果没有，任何人都可以建议我的代理服务器逻辑的快速修复（如果它收到此范围请求，它究竟必须返回什么？），如果可能的话，不改变我的其他逻辑？

似乎我可能必须返回类似“HTTP/1.0 206 OK\r\nPartial Content\r\n\r\n”的内容，但可能在部分内容的末尾应该有一些值 - 不确定应该是什么成为这个。

您的帮助将不胜感激。

谢谢..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T08:18:21.103

我们终于以干净的方式解决了这个问题。在我们的例子中，我们可以完全控制流媒体服务器，但我想你也可以使用本地代理来做到这一点。因为`Build.VERSION_CODES.ICE_CREAM_SANDWICH`可以为`MediaPlayer`对象设置标题。由于我们的应用程序使用户能够在音频流中进行搜索，因此我们`Range`在客户端上实现了此标头。如果服务器以正确的标头响应，`MediaPlayer`则不会尝试多次请求流。

这就是我们的服务器标头现在对于 android 客户端的样子：

```
Content-Type: audio/mpeg
Accept-Ranges: bytes
Content-Length: XXXX
Content-Range: bytes XXX-XXX/XXX
Status: 206 
```

重要的部分是`206`状态码（部分内容）。如果您不发送此标头，android 客户端将尝试重新请求源，无论如何。

如果您的播放器不允许在流中搜索，您可以简单地将`Range`标题设置为`0-some arbitrary large number`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T16:37:03.177

我在开发一个大型音频流应用程序（使用本地主机 HTTP 代理将音频流式传输到 MediaPlayer），在 Google I/O 2012 上我一拿到 JellyBean 设备就遇到了这个问题。

当在不同设备上对我们的应用程序进行质量测试时（以及从我们的自动崩溃日志和用户提交的日志中收到的信息），我们注意到某些 MediaPlayer 实现的行为方式我称之为不稳定（有时甚至是彻头彻尾的精神病）。

没有过多的细节，这就是我所看到的：一些实现会为同一个 URL 发出多个请求（有时 5+）。这些请求彼此都略有不同，因为每个请求都针对不同的字节范围（通常针对第一个或最后 128 个字节）。结论是 MediaPlayer 正在尝试查找嵌入的元数据，然后在某些时候它会放弃并只是发出一个常规的非范围请求。

这不是现有的 JellyBean MediaPlayer 实现正在做的事情，它只是 Android 上媒体框架的古怪和一般碎片化的一个例子。但是，上述情况的解决方案也是解决 JellyBean 问题的方法，即：

让您的本地代理使用[分块编码进行响应](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)

这将 Content-Length 标头替换为 Tranfer-Encoding: 分块标头。这意味着请求客户端将不知道资源的总长度，因此无法发出范围请求，它只需要在收到块时处理它们。

就像我说的那样，这是一个 hack，但它确实有效。它并非没有副作用：媒体播放器缓冲区进度将不正确，因为它不知道音频的长度（是其中之一），要解决这个问题，您必须使用自己的缓冲计算（您正在流式传输从某个地方通过你的代理到 MediaPlayer，对吧？所以你会知道总长度）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-21T02:28:27.320

当您寻求或跳过或连接丢失并且 MediaPlayer 不断重新连接到代理服务器时，您必须在从客户端获得请求和 range(int) 后发送**状态为 206的此响应。**

```
String headers += "HTTP/1.0 206 OK\r\n";
headers += "Content-Type: audio/mpeg\r\n";
headers += "Accept-Ranges: bytes\r\n";
headers += "Content-Length: " + (fileSize-range) + "\r\n";
headers += "Content-Range: bytes "+range + "-" + fileSize + "/*\r\n";
headers += "\r\n"; 
```

# bash - bash：期望与多个密码提示一起使用吗？

> ID：11606149
> 
> 赞同：3
> 
> 时间：2012-07-23T03:34:01.360
> 
> 标签：bash, ssh, passwords, expect

我目前正在使用 expect 来传递密码，这样我的脚本就可以自动运行，而无需我坐在那里一遍又一遍地输入相同的密码。

重要提示：请不要评论这有多大的安全风险或我应该如何使用 ssh 密钥，如果可以的话，我会使用它们，但我必须使用的设置不允许这样做。

我的代码如下所示：

```
#!/bin/sh

PASS=mypassword

/usr/bin/expect -c "
spawn python Tools/python/install.py
expect -nocase \"password:\" {send \"$PASS\r\"; interact}
" 
```

我遇到的问题是 install.py 提示输入相同的密码十几次，似乎只希望自动填充第一个提示的密码。

有没有办法修改行为，使其填写密码全部 12 次，而不仅仅是第一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T16:00:10.423

你必须做一点编程。幸运的是，答案很简单：

```
#!/bin/sh

PASS=MyPassword
export PASS

/usr/bin/expect -c '
    spawn python Tools/python/install.py
    expect {
        -nocase "password:" {
            send "$env(PASS)\r"
            exp_continue
        }
        "somthing_else_that_indicates_you're_ready_to_interact"
    }
    interact
' 
```

也清理了shell引用。

# java - 创建一个不允许重复元素并应允许基于索引的检索的队列

> ID：11606150
> 
> 赞同：4
> 
> 时间：2012-07-23T03:34:05.760
> 
> 标签：java, data-structures

我想创建一个不允许重复元素的队列，并且我应该能够根据索引访问该队列的元素。请让我知道我应该如何实施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T03:54:03.470

很明显，Java 没有符合您的规范和要求的确切数据结构。最接近您的要求的可能是[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)。它基本上是一个集合（符合您的独特项目要求），其元素按插入顺序保存（如队列）并通过索引获取元素，您可以使用它`set.toArray()`来获取数组或从集合中创建列表（但是它将花费一些额外的内存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:44:45.090

我打算使用[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)来解决我的问题。这是示例代码

```
import java.util.concurrent.ConcurrentLinkedQueue;

public class FinalQueue {

    private ConcurrentLinkedQueue<String> queue;

    public FinalQueue()
    {
        queue = new ConcurrentLinkedQueue<String>();
    }

    public synchronized void enqueue(String ipAddress)
    {
        if(!queue.contains(ipAddress))
            queue.add(ipAddress);
    }

    public String dequeue()
    {
        return queue.poll();
    }

    public String toString()
    {
        return "" + queue;
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        FinalQueue queue = new FinalQueue();
        queue.enqueue("1.2.3.4");
        queue.enqueue("2.3.4.5");
        queue.enqueue("1.1.1.1");
        queue.enqueue("1.2.3.4");
        System.out.println(queue.toString());
        System.out.println("Dequeue..." + queue.dequeue());
        System.out.println("Dequeue..." + queue.dequeue());
        System.out.println(queue.toString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:37:19.783

你总是可以只使用一个 ArrayList。它非常适合基于索引访问元素，并且在添加元素时，您始终可以检查 ArrayList 是否包含要添加的元素。我最初的直觉是使用 Set 来禁止重复，但元素是 Set 没有索引。如果您能找到一种方法来索引 Sets 中的元素，那么这将是我的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T10:21:13.637

不要称它为队列，因为根据定义，队列只是先进先出的数据结构。

根据您的输入值，我相信您应该使用数组和哈希函数。散列使​​用其值确定元素位于哪个索引，反之亦然，即当给定索引时，它返回包含在其中的值。

由于您使用的是散列，因此在发生冲突时可以避免重复，即您可以检查索引中是否存在先前的值以及它是否是相同的值。

C++ stl 有一个很好的 set 类，尽管我认为 java 没有。但是设置点不提供基于索引的检索。

# android - 如何在屏幕旋转事件中保留组件属性？

> ID：11606152
> 
> 赞同：0
> 
> 时间：2012-07-23T03:34:23.883
> 
> 标签：android

我对android开发很陌生，我只是做了一些简单的应用程序来练习，其中有“TextView”和“Button”。每次单击时，TextView 的“TextSize”会增加 10。但是当我旋转屏幕时增加 TextSize 后，TextView 的 TextSize 会返回默认值。任何人都请告诉我如何处理这个问题，因此即使屏幕旋转，TextView 也会保持其大小。

-ZKhan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:42:12.170

当您更改方向时，您`onCreate()`会被隐式调用，以便在您`Manifest.xml`只需在应用程序标签中添加它时删除它`android:configChanges="orientation"`，这会告诉系统您将自己处理方向。

*然后在@Override onConfigurationChanged()*中管理您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:47:24.663

当配置更改时，您的活动被破坏并从 onCreate 方法重新开始。所以您会看到初始大小。您可以使用以下方法保存更改的大小并在活动再次处于 onCreate 时将其归还。您可以使用共享首选项来存储变化

```
@Override
    public void onConfigurationChanged(Configuration newConfig) {

    } 
```

# ember.js - 容器视图 - 重新排序子视图

> ID：11606155
> 
> 赞同：0
> 
> 时间：2012-07-23T03:35:00.820
> 
> 标签：ember.js

根据文档，我可以将容器视图的子视图 A、B、C 重新排列为 C、A、B，方法是执行“removeObject(A/B/C)”，然后执行“pushObject(C/A /B)"。对于较大的集合（我的实际示例目前是 64），是否有可能更有效的方法（例如，只修改现有子视图数组中的几个值？虽然 remove/pushObject 可能很好，但考虑到相对实际 UI 重新渲染的时间更长。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:01:21.370

如果您将`ArrayController`a 与 a 结合使用`CollectionView`，则可以使用`SortableMixin`support 根据您的需要对其内容进行排序。然后您的集合渲染将根据需要更新，而无需您的任何干预。

例如，您可以绑定`sortProperties`控制器的属性以反映要应用的排序标准。

*（如果您需要进一步解释，欢迎从您的应用程序中提取一些代码）*

# jsf-2 - 通过 h:commandButton 条件提交

> ID：11606156
> 
> 赞同：0
> 
> 时间：2012-07-23T03:35:13.950
> 
> 标签：jsf-2, primefaces

我们在项目中使用 JSF 2.0。除了 Mojara，我们还在使用 Primefaces 3.3 for some components。我们的项目中有一个要求，我们必须进行 Javascript 验证（作为客户端验证的一部分），然后只提交表单。JSF 完成的验证无论如何都会发生（在服务器端）。但是Javascript验证也应该在那里。

这就是我提出[这个](https://stackoverflow.com/questions/11516564/jsf-road-map-to-support-client-side-validations-in-future)问题但没有得到任何评论的原因。

因此，我正在实施 JavaScript 验证，这让我想到了我面临的实际问题。我有 JS 函数来执行基本验证，如“必需”字段、长度检查等，并在适当的时间调用它们（如 onblur）。但是，如果用户只是将所有字段留空或根本不进入某些字段（从而不会触发诸如 onblur 之类的事件）并单击提交按钮，则这些字段将被 JS 验证遗漏。那么在所有 JS 验证完成后，我如何有条件地提交表单呢？请注意，我们必须使用 f:ajax 来提交表单。

我尝试了表单的 onsubmit 功能。它适用于FF，但不适用于IE9。我尝试了命令按钮的 onclick 功能。它调用js但也提交表单。

如果有帮助的话，代码很少

我正在使用的 JavaScript 函数

```
 var validationErrorFound = false;

     function validateRequired(element,form){

if(null == element.value || "" == element.value){
    var existingClass = element.getAttribute("class");
    var newClass = existingClass + " inputError";
    element.setAttribute("class", newClass); 

    var label = document.getElementById(element.getAttribute("id") + "Lbl");
    var labelArray = new Array();
    var temp = label.innerText;
    labelArray = temp.split(":");
    element.setAttribute("title", labelArray[0] + " is Required");
    validationErrorFound = true;
}else{
    element.className = element.className.replace( /(?:^|\s)inputError(?!\S)/ , '' );
    element.setAttribute("title", null);
    element.removeAttribute("title");
    validationErrorFound = false;
}   
    }

     function validateAllRequired(form){
var all = document.getElementsByTagName("input"); 
var max=all.length; 
for (var i=0; i < max; i++) {       
     if(null != all[i].onblur ){
        validateRequired(all[i],form);      
     }

}
return validationErrorFound;

     } 
```

JSF 页面

```
 <h:form id="addUserDetailsForm">   
<h:messages/>           

        <h:panelGrid columns="2">
            <p:outputLabel id="userNameLbl" for="userName" value="Username:" />
            <p:inputText id="userName" required="true" onblur="validateRequired(this,this.form);"
                value="#{userList.addUser.userName}">
                <f:param name="req" value="true"/>
            </p:inputText>  
            <p:outputPanel value="" />

            <p:outputLabel id="firstNameLbl" for="firstName" value="First Name:" />
            <p:inputText id="firstName" required="true" onblur="validateRequired(this,this.form);"
                value="#{userList.addUser.firstName}"/>

            <p:outputLabel id="lastNameLbl" for="lastName" value="Last Name:" />
            <p:inputText id="lastName" required="true" onblur="validateRequired(this,this.form);"
                value="#{userList.addUser.lastName}"/>

            <h:commandButton styleClass="button" value="Add" onclick="validateAllRequired(this.form);"                                      
                    action="#{userList.dummyAdd}" >
                 <f:ajax execute="@form" render=":mainArea :propertiesArea" update=":mainArea :propertiesArea"/>                                        
            </h:commandButton>  

        </h:panelGrid> 
```

有什么办法可以做到这一点？

谢谢

# css - Oracle Apex 应用程序中的显示错误

> ID：11606160
> 
> 赞同：1
> 
> 时间：2012-07-23T03:35:31.220
> 
> 标签：css, oracle, themes, oracle11g, oracle-apex

我已导出我的 oracle`apex`应用程序并安装在另一台计算机上。我在我的应用程序中使用`css`了我编写的文件，并且我更改了一些`Theme`用于我的应用程序的设置。我也导出并安装了该 css 文件和主题。但是当我运行我的应用程序时，它无法正确显示。它只显示`Texts`并且`Images`我在应用程序中使用过。`Theme`不见了。但我的`Login`页面显示正确。因为它没有使用我的`Template`. `Login`在 oracle apex 中使用`Login`模板的页面。登录后，当我浏览应用程序中的其他页面时，它们显示不正确。这些页面上缺少主题。

问题出在我的`Template`. 但我已将其导入到 apex 应用程序中。

我怎么能解决这个问题？

**更新**

当我`Developer Tools`在浏览器（chrome）中打开选项卡中的`Matched CSS Rules`部分时，仅显示. 没有我的。`Elements``user agent stylesheet``stylesheet`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:18:06.133

*   检查您更改的主题模板，看看它们是否真的正确并包含对您的自定义样式表的引用
*   检查您知道应该有样式表参考的页面的输出
*   你在哪里存储样式表？工作区文件、应用程序文件，还是只是在“/i/”（#IMAGE_PREFIX#）文件夹中？
*   如果是后者：您是否复制了您的样式表并且它是否在正确的位置？您说您将应用程序导入另一台计算机，因此您可能只是忘记复制这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:34:38.970

你的 Apex 版本是什么？

你如何加载你的 CSS 文件？它们存储在服务器上（可使用图像前缀访问`#IMAGE_PREFIX#`）、加载到数据库中（可使用 访问`#WORKSPACE_IMAGES#`）或存储在外部服务器上（可使用完整 URL 访问）？

当您说“在另一台计算机上安装”时，您的意思是将您的应用程序加载到另一个顶点安装中，对吗？那么你确定服务器被配置为另一个（尤其是图像前缀）？

您是否检查过两个应用程序中的模板是否相同？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:01:16.373

使用 Chrome 或 Firefox 中的控制台检查您的页面是否有任何错误，例如无法加载的 CSS 文件。

# php - 使用php使用jquery编辑文件后如何保存文件？

> ID：11606162
> 
> 赞同：0
> 
> 时间：2012-07-23T03:35:53.647
> 
> 标签：php, javascript, jquery, ajax, json

在这里，我创建了一个获取 css-color 并创建具有 css-color 背景的元素的 jquery 函数：**[编辑我的 jsFiddle](http://jsfiddle.net/FoxKiD/8USqU/)**

# html

```
<div ID="wrapper">
    <div ID="addColor">
        <input type="text" ID="hex">
        <div ID="color">Your color</div>
        <button ID="add">Add color</button>
    <div CLASS="clear"></div> <!-- Clear float -->
    </div>

    <div ID="wrapGallery">
        <h1>My Color Gallery</h1>
        <ul ID="gallery"></ul>
    </div>
</div> 
```

# js/jquery

```
$(function() {
    //float left with some margin
    $('#addColor')
        .children().not('#add, .clear').css({
        'float':'left',
        'margin-right': '5px'
        });

    //Showing color on keyup
    $('#hex').keyup(function() {
       var hexCode = $(this).val();
       $('#color').css('background-color', hexCode);

        if ( hexCode !== '') {
            $('#color').text('');
        }else{
            $('#color').text('Your color');
        }

    });

    //Adding colors
    $gallery = $('#gallery');

    $('#add').click(function() {

        var storedHex = $('#hex').val();
        //check if empty
        if (storedHex == '') {
            alert('Enter something');        
        }
        else {
        //adding li
        $("<li>").css('background-color', storedHex)
                .hover(
                  function () {
                    $(this).text(storedHex);
                  }, 
                  function () {
                    $(this).text('');
                  })                    
                 .appendTo($gallery); 
        }
    });
}); 
```

我唯一需要做的就是将创建的元素永久保存在文件中，以便我可以随时访问。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T03:39:50.627

Javascript（在浏览器中）目前无法像您想要的那样编​​辑/保存文件。但是，您可以使用[.ajax()](http://api.jquery.com/jQuery.ajax/)将数据发送回 PHP 文件，以便 PHP 文件可以使用[file_put_contents()](http://php.net/manual/en/function.file-put-contents.php)保存它（尽管它通常会将其保存在数据库中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:47:08.563

阅读 JQuery Ajax 函数并阅读 JSON 对象。

使用 AJAX 和 JQuery，您可以轻松地将 JSON 对象发送到您的服务器，如下所示：

```
function saveElements(myJsonObj) {
  $.ajax({
    method: "POST",
    dataType: "json",
    url: "path/to/savemyobject.php",
    data: {json:myJsonObj}
  });
} 
```

JSON 文件可能如下所示：

```
{ "myData":
  {
    "some_text":"this could be the CSS code",
    "name":"some name",
    "number":"some number"
  }
} 
```

您可以生成一个表示 JSON 对象的 JSON 字符串，并使用 Ajax 函数（如上）将其发送到 PHP 文件。

在 PHP 中，您可以这样做来获取对象：

```
<?php
$json_string = $_POST["json"]; //the same variable key we sent it in
$json_obj = json_decode($json_string, true);
// get data
$myDataCode = $json_obj["myData"]["some_text"];
// do some processing
...
?> 
```

您还可以使用 PHP json_encode 函数将 PHP 中的数组转换为 JSON 对象。

阅读更多：
[http ://www.w3schools.com/json/default.asp](http://www.w3schools.com/json/default.asp)
[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)
[http://php.net/manual/en/function .json-encode.php](http://php.net/manual/en/function.json-encode.php)
[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - 显示 Instagram 图片

> ID：11606169
> 
> 赞同：0
> 
> 时间：2012-07-23T03:37:01.180
> 
> 标签：javascript, asp.net-mvc-3, instagram

如何从 instagram 中获取随机图片并在网络上显示？注意：不是最近发布的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:08:12.733

```
<iframe src="http://igram.github.com/?tag=cool" width=500 height=230 frameborder=0>
</iframe> 
```

# php - 显示更多结果的问题

> ID：11606174
> 
> 赞同：-1
> 
> 时间：2012-07-23T03:37:39.730
> 
> 标签：php, javascript, mysql

我正在一个网站上尝试学习编码，并正在制作一个简单的搜索网站。

当用户搜索“Restaurant”或“Restaurants”（或其他一些词，但我只是使用这些作为示例）时，可以帮助优化搜索的词列表，例如“American Food”或“Chinese Food”出现。但是有很多精炼词可供选择，所以我将它们全部存储在数据库中，并使用 Javascript 显示更多（当您第一次访问时，页面上限制为 10 个精炼词，但当您单击**查看更多**其余的出现。）无论如何，我想我会做一个 mysql 选择来显示第 1-10 行，然后另一个 mysql 选择第 11 行到 div 中所有行的末尾，直到用户点击**查看更多**. 但我不断收到此错误

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 17 行的 /Users/searchswitch.php 中给出
> 
> 警告：mysql_close(): 4 不是第 22 行 /Users/searchswitch.php 中的有效 MySQL-Link 资源

这是什么原因造成的？另外，我知道（即使是一个新程序员）我的代码不是很干净，我该如何清理它）

这是代码：我省略了其他开关盒以使其更易于阅读，但如果您需要更多信息，我很乐意提供帮助！感谢大家的帮助！

```
switch ($q) {
            case "Restaurants" || "Restaurant":
                echo "<hr /><span><strong>Refine Search</strong><br/><br/>";
                $result = mysql_query("SELECT * FROM subcat WHERE catnumber='1' LIMIT 0,10");

                while($row = mysql_fetch_array($result))
                {
                    echo "<a href='search.php?q=". $row['subcat'] ."'/>" . $row['subcat'] ."</a>";
                    echo "<br />";
                }
                mysql_close($link);

                echo "<a href='#' id='example-show' class='showLink' onclick='showHide(\"example\");return false;'><br/>See more</a></span><div id='example' style='display:none;'>";
                $result = mysql_query("SELECT * FROM subcat WHERE catnumber='1' LIMIT 11,100");

                while($row = mysql_fetch_array($result))
                {
                    echo "<a href='search.php?q=". $row['subcat'] ."'/>" . $row['subcat'] ."</a>";
                    echo "<br />";
                }
                mysql_close($link);

                echo"<br/><a href='#' id='example-hide' class='hideLink' onclick='showHide(\"example\");return false;'>Hide</a></div>";

            break; 
```

哦还要指出第 17 行是 *while($row = mysql_fetch_array($result))* 而第 22 行是 *mysql_close($link);*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:01:16.630

使用它，您的查询将正常工作

```
switch ($q) {
        case "Restaurants" || "Restaurant":
            echo "<hr /><span><strong>Refine Search</strong><br/><br/>";
            $result = mysql_query("SELECT * FROM subcat WHERE catnumber='1' LIMIT 0,10");

            while($row = mysql_fetch_array($result))
            {
                echo "<a href='search.php?q=". $row['subcat'] ."'/>" . $row['subcat'] ."</a>";
                echo "<br />";
            }

            echo "<a href='#' id='example-show' class='showLink' onclick='showHide(\"example\");return false;'><br/>See more</a></span><div id='example' style='display:none;'>";
            $result = mysql_query("SELECT * FROM subcat WHERE catnumber='1' LIMIT 11,100");

            while($row = mysql_fetch_array($result))
            {
                echo "<a href='search.php?q=". $row['subcat'] ."'/>" . $row['subcat'] ."</a>";
                echo "<br />";
            }

            echo"<br/><a href='#' id='example-hide' class='hideLink' onclick='showHide(\"example\");return false;'>Hide</a></div>";

        break; 
```

# python - Python：确定盈亏

> ID：11606176
> 
> 赞同：1
> 
> 时间：2012-07-23T03:38:13.383
> 
> 标签：python, numerical, stocks

我需要能够通过指示输赢来确定特定的“交易”（由“信号”表示）是否导致了盈利或亏损。我需要 Python 检查高点和低点列表中的下一个位置，以在超出入场信号的某个时间点增加等于或大于 2.5% 的值。但是，我还希望 Python 在升值 2.5% 或更多之前确定该值是否下降了 3% 或更多。不幸的是，到目前为止我开发的代码似乎不起作用。我错过了什么？

```
Signal = [1,5,7]
Close = [5,10,10,10.5,11,12,11.9,14,14,15,16]
High =  [7,10.2,10.1,11,12,12.1,12.2,14.5,18,19,20]
Low =   [4,9.9,9.8,10,10,11.8,11.8,12,13.8,13.85,14]

for i in Signal:
    Entry = []
    Entry.append(Close[i])
    for Ent in Entry:
        print [Ent]
        for Value in High[i+1:]:
            Profit = ((Value - Ent)/Ent)*100
        for Value in Low[i+1:]:
            Loss = ((Value - Ent)/Ent)*100
        while (abs(Loss) < 3):
            if Profit >= 2.5:
                print 'Win'
                break
            else:
                print 'Loss'
                break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:10:21.523

不太确定您要做什么。这里有很多没有意义的代码：

```
 Entry = []
    Entry.append(Close[i]) 
```

可以换成

```
 Entry = [Close[i]] 
```

这些台词就在这里？

```
 for Value in High[i+1:]:
            Profit = ((Value - Ent)/Ent)*100 
```

在语义上与

```
 Profit = ((High[-1] - Ent) / Ent) * 100 
```

与这些相同：

```
 for Value in Low[i+1:]:
            Loss = ((Value - Ent)/Ent)*100 
```

他们的意思是，基本上：

```
 Loss = ((Low[-1] - Ent) / Ent) * 100 
```

至于这个：

```
 while (abs(Loss) < 3):
            if Profit >= 2.5:
                print 'Win'
                break
            else:
                print 'Loss'
                break 
```

可以用这个代替：

```
 if abs(Loss) < 3:
            if Profit >= 2.5:
                print 'Win'
            else:
                print 'Loss' 
```

当你把它们放在一起时，会发生以下情况：

```
for i in Signal:
    Entry = Close[i]
    print [Entry]
    Profit = ((High[-1] - Entry)/Entry)*100
    Loss = ((Low[-1] - Entry)/Entry)*100
    if abs(Loss) < 3:
        if Profit >= 2.5:
            print 'Win'
        else:
            print 'Loss' 
```

仍然没有多大意义，不是吗？这基本上就是您的代码正在做的事情。如果你需要我的建议，我会放弃整个事情并重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:59:34.840

有时你在做整数运算，有时是浮点运算。这可能会给您带来看似*疯狂的*结果。尝试类似：

```
Minimum = map(float, [1, 5, 7]) 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:05:17.963

这是对您的代码的自由重新解释以及您对您想象的代码正在做什么的描述，坦率地说，我不太明白。不过，我确实看到您的代码在合理计算领域几乎没有做任何事情，这让我认为这种重新解释可能不会伤害任何东西，即使它最终没有解决您的问题。

```
from __future__ import division

signals = [1, 5, 7]
closes = [5, 10, 10, 10.5, 11, 12, 11.9, 14, 14, 15, 16]
highs = [7, 10.2, 10.1, 11, 12, 12.1, 12.2, 14.5, 18, 19, 20]
lows = [4, 9.9, 9.8, 10, 10, 11.8, 11.8, 12, 13.8, 13.85, 14]

for i in signals:
    print "TESTING SIGNAL %d" % i

    entry = closes[i]
    profit_pos = []
    loss_pos = []

    for j in range(i+1, len(highs)):
        # I'm assuming highs and lows are always same length ...
        profit = ((highs[j] - entry) / entry) * 100
        if profit >= 2.5:
            print "Signal %d profit: greater than or equal to 2.5%% at position %d!" % (i, j)
            profit_pos.append(j)

        loss = ((lows[j] - entry) / entry) * 100
        if abs(loss) < 3:
            print "Signal %d loss: less than 3%% at position %d!" % (i, j)
            loss_pos.append(j)

    profit_status = "Value does not drop before profit."
    if len(loss_pos) > 0:
        if len(profit_pos) == 0:
            profit_status = "Value drops, no profit."
        elif min(loss_pos) < min(profit_pos):
            profit_status = "Value drops before profit."
    else:
        if len(profit_pos) == 0:
            profit_status = "No significant profit or loss found."
    print "Signal %d result: %s" % (i, profit_status) 
```

# algorithm - 这个分区算法正确吗？

> ID：11606181
> 
> 赞同：9
> 
> 时间：2012-07-23T03:39:10.520
> 
> 标签：algorithm, sorting, quicksort

我一直在看《Cracking the Coding Interview》一书中的分区函数（5e，第 119 页）。我在下面复制了它：

```
int partition(int arr[], int left, int right){
    int pivot = arr[(left + right) /2 ]; // Pick pivot point
    while (left <= right) {
        // Find element on left that should be on right
        while (arr[left] < pivot) left++;
        // Find the element on right that should be on left
        while (arr[right] > pivot) right--;
        // Swap elements, and move left and right indicies
        if (left <= right) {
            swap(arr, left, right); // swaps elements
            left++;
            right--;
        }
    }
    return left;
} 
```

给定这个数组：

```
1 2 3 4 5 6 3 
```

这就是分区为我逐步解决的方式

1.  4 是枢轴值。左 = 0，右 = 6
2.  左 = 3，右 = 6。交换。

    1 2 3 3 5 6 4

3.  左 = 4，右 = 4。退出

但是，我最终得到的数组：

```
1 2 3 3 5 6 4 
```

没有围绕 4 进行分区。我是否错误地执行了步骤或算法不正确？我已经仔细检查了我对算法的复制，并且我已经正确地复制了它。

另外，我不确定为什么分区会向左返回，它是否会返回枢轴？

我了解分区和快速排序的 Wikipedia 实现，但我试图了解这里发生的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T03:49:12.073

分区的目标是将数组分成两段。第一段包含元素 [1,2,3,3]。所有这些值都小于或等于四。第二段包含元素 [5,6,4]。所有这些值都大于或等于四。

分区函数返回第二个段的开始位置。在这种情况下，它从索引 4 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-26T13:26:29.450

分区算法的目标是简单地获取一些元素的集合（例如，您使用“数组”），然后围绕枢轴将该集合分区（或拆分！）为两部分 - 左侧部分和右侧部分。

关于枢轴左侧和枢轴右侧的元素应该有一些“规则”。例如，左侧的所有元素都将小于所选的枢轴，而右侧的所有元素都将大于枢轴。

您还可以在以下视频中看到实施： [https ://www.youtube.com/watch?v=MLpH7mpwOxQ](https://www.youtube.com/watch?v=MLpH7mpwOxQ)

希望有帮助！

# android - android4.0：无法实例化应用程序android.app.Application：java.lang.NullPointerException

> ID：11606193
> 
> 赞同：1
> 
> 时间：2012-07-23T03:40:46.930
> 
> 标签：android, android-intent

这是我的三项活动代码！

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

这是布局**e2.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btnLog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />

    </EditText>

</LinearLayout> 
```

这是布局**e3.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

和活动课

```
public class AbcActivity extends Activity {
            /** Called when the activity is first created. */
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);
                Intent myinten=new Intent(this,E2.class);
                startActivityForResult(myinten,0);

            }
        }
    public class E2 extends Activity {
          @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.e2);
                Button btn=(Button) findViewById(R.id.btnLog);
                btn.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                          Intent myinten=new Intent(E2.this,E3.class);
                          startActivityForResult(myinten,0);
                    }
                });
            }

    } 
```

这是 androidmanifest.xml 中的代码

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="vn.daitran"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AbcActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <activity
            android:name=".E2"
            android:label="@string/app_name" >           
        </activity>
         <activity
            android:name=".E3"
            android:label="@string/app_name" >           
        </activity>
    </application>

</manifest> 
```

每次运行安装再次在 logcat 中显示错误

```
07-23 10:32:04.169: D/AndroidRuntime(1769): Shutting down VM
07-23 10:32:04.178: W/dalvikvm(1769): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-23 10:32:04.218: E/AndroidRuntime(1769): FATAL EXCEPTION: main
07-23 10:32:04.218: E/AndroidRuntime(1769): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3938)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.ActivityThread.access$1300(ActivityThread.java:123)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.os.Looper.loop(Looper.java:137)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at java.lang.reflect.Method.invokeNative(Native Method)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at java.lang.reflect.Method.invoke(Method.java:511)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at dalvik.system.NativeStart.main(Native Method)
07-23 10:32:04.218: E/AndroidRuntime(1769): Caused by: java.lang.NullPointerException
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
07-23 10:32:04.218: E/AndroidRuntime(1769):     at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
07-23 10:32:04.218: E/AndroidRuntime(1769):     ... 11 more 
```

注意：如果 AbcActivity -> E1 run install again ，不会显示错误。如果 AbcActivity -> E1 ->E2 再次运行安装，显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:26:03.977

我相信我发现了你的问题。

```
public class AbcActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent myinten=new Intent(this,E2.class);
        startActivityForResult(myinten,0);

        --->Button btn=(Button) findViewById(R.id.btn1);<--- // Remove this line
    }
} 
```

您的 main.xml 没有 id 为 btn1 的按钮，这将导致 nullPointerException。您可以删除上面的行或在 main.xml 文件中创建一个 id 为 btn1 的按钮。

# javascript - 在 jQuery Mobile 中更改数据图标？

> ID：11606194
> 
> 赞同：4
> 
> 时间：2012-07-23T03:41:12.130
> 
> 标签：javascript, jquery, jquery-mobile

我在网上找到了一堆解决方案，但没有一个对我有用。基本上，我想切换按钮的图标。这是HTML：

```
 <div data-role="navbar" data-iconpos="top">
    <ul>
      <li><a data-icon="arrow-u">View suggestions</a></li>
    </ul>
  </div> 
```

我尝试了所有这些：

```
$(this).buttonMarkup({ icon: 'arrow-u' }); 
```

//

```
$(this).attr('data-icon','arrow-u');
$(this).children().children().next().removeClass('ui-icon-arrow-d').addClass('ui-icon-arrow-u'); 
```

//

```
$(this).jqmData('icon','arrow-u'); 
```

但是，由于某种原因，在执行上述任何操作后，按钮的子元素都消失了（jQuery Mobile 在按钮内添加了一堆`<span>`s）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-17T20:32:48.847

最好的方法是：

```
$('#button').buttonMarkup({ icon: "home" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:48:50.560

试试这个：

```
$(this).attr('data-icon','arrow-u').button().trigger("refresh"); 
```

请参阅相关论坛主题：http: [//forum.jquery.com/topic/how-dynamically-update-data-attributes](http://forum.jquery.com/topic/how-dynamically-update-data-attributes)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T02:28:07.790

我发现了问题！我使用`$(this).text('Hide suggestions')`了 ，它删除了所有子元素。我将其更改为`$(this).find('.ui-btn-text').text('Hide suggestions');`现在可以正常工作了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T14:31:25.837

这些对我有用：

```
$("#yourButtonId .ui-icon").removeClass("ui-icon-gear").addClass("ui-icon-delete");

$(this).children("span").children(".ui-icon").removeClass("ui-icon-gear").addClass("ui-icon-delete");

$(this).find(".ui-icon").removeClass("ui-icon-gear").addClass("ui-icon-save"); 
```

我不知道女巫是最好的，我认为是最后一个。

# ruby-on-rails - config.assets.compile 与 therubyracer？

> ID：11606201
> 
> 赞同：0
> 
> 时间：2012-07-23T03:42:01.110
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, deployment, capistrano

在我的 application.js 我有这个：

```
//= require jquery_ujs
//= require jquery.validate.min
//= require jquery.tokeninput
//= require script 
```

在我的 gemfile 中，如果我想在每次部署时“实时编译”资产，我应该把它放在某个地方。

`gem 'therubyracer', :require => 'v8'`

当我放这个时，我可以运行`cap deploy`并`cap deploy:assets:precompile`成功。

我也从[这里](https://stackoverflow.com/questions/8821864/config-assets-compile-true-in-rails-production-why-not)读到这是一个非常糟糕的主意。所以现在我很困惑我是否应该这样做......当我没有将 therubyracer 放在我的 gemfile 中时，我在部署时（如下）出现错误，即使我在部署之前先运行 assets:prcompile ......但它我的理解是，如果我确实使用这是一笔巨大的开销......？

`could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:16:51.327

显然它们不是一回事，我需要简单地将资产添加到对其进行评论的环境/生产.rb

# html - 从一个页面过渡到另一个 jquery mobile

> ID：11606206
> 
> 赞同：0
> 
> 时间：2012-07-23T03:42:38.360
> 
> 标签：html, jquery-mobile

我试图弄清楚如何使用 jQuery mobile 从一页转换到下一页。我有一个 JSON 回调函数，一旦该函数返回一个值（比如是或否），我要么想转换到特定页面，要么显示错误消息。有人可以提供一些有关如何编写此转换的示例代码吗？

我知道href应该是这样的：

```
<a href="nextPage.html" data-transition="reverse slide">Next page</a> 
```

但是如何从 javascript 回调函数中调用它呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:17:13.003

从您的回调调用`changePage`应该完成您正在尝试做的事情。

```
Your_Callback(){
    if(YES) {
       changePage("nextPage.html");
    } else if(NO){
       changePage("errorPage.html");
    }
} 
```

是否可以共享不适合您的 JS 代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:21:50.087

为此目的有一种方法：

```
$.mobile.changePage('nextPage.html') 
```

检查 de[文档](http://jquerymobile.com/test/docs/api/methods.html)以查看它接受的参数

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T03:53:05.197

您是否考虑过用 PHP 编写页面来创建会话 cookie？

`session_start();

$url = $_SESSION['back'];'

在您将使用的 jquery 中：

`window.location ="'.$url.'";`

或者

也许试试`location.href = "myPage.html"`

# python - 在python中制作一个0到n的向量

> ID：11606208
> 
> 赞同：11
> 
> 时间：2012-07-23T03:42:49.177
> 
> 标签：python, vector, numpy

我是一个新的 python 用户，我想知道如何制作一个 0 到 n 向量。我希望用户能够为 n 输入一个整数，并接收 [0,1,2,3,4,5...,n] 的输出。

这是我到目前为止所做的......

```
from numpy import matrix

n=int(raw_input("n= "))
for i in range(n, 0, -1):
K = matrix(i)
print K 
```

但这是我得到的输出：

```
[0][1][2][3][4][5]...[n] 
```

转置矩阵没有帮助。我究竟做错了什么？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T03:43:39.487

使用内置函数：

```
range(n) 
```

（好吧，如果您希望列表为 [0, 1, ... , n]，则应为 n+1）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-23T04:30:02.290

如果你想使用`numpy`，你可以使用`arange`：

```
>>> import numpy as np
>>> np.arange(10)
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T04:08:09.097

```
from numpy import array
n = int(raw_input("n= "))
k = array(range(n+1))
print k 
```

# regex - How to match a string enclosed in quotes

> ID：11606211
> 
> 赞同：1
> 
> 时间：2012-07-23T03:43:09.927
> 
> 标签：regex, powershell, powershell-2.0

I have a string, $line, where the contents are:

```
Filename="Longfilename" 
```

I am trying to work out a regex to extract the string. I tried this:

```
$line -match "Filename=\"(?<TheFilename>[^\"]+)\" 
```

where I am trying to capture Longfilename into $matches['TheFilename']

Unfortunately, this doesn't work.

How do I do this? Where is my mistake?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:56:13.997

Seems that you did everying correctly, but add `Groups` property

```
$line = 'Filename="Longfilename"'
$matches = [regex]::Match($line, 'Filename=\"(?<TheFilename>[^\"]+)\"')
$matches.Groups['TheFilename'] 
```

# algorithm - 关于boost图库中的astar算法

> ID：11606213
> 
> 赞同：1
> 
> 时间：2012-07-23T03:43:23.980
> 
> 标签：algorithm, shortest-path, a-star

我发现这个升压的明星算法实现[http://www.boost.org/doc/libs/1_38_0/libs/graph/doc/astar_search.html](http://www.boost.org/doc/libs/1_38_0/libs/graph/doc/astar_search.html)特别是示例[http://www.boost.org/doc/libs /1_38_0/libs/graph/example/astar-cities.cpp](http://www.boost.org/doc/libs/1_38_0/libs/graph/example/astar-cities.cpp)。

当我在我的图表上使用该示例时，我发现边缘不是定向的。我的意思是在某些情况下，我的优势是有方向的，但是，它似乎忽略了它。如何，我可以修改以使其定向

# javascript - 在 D3js 力图中添加和删除节点

> ID：11606214
> 
> 赞同：13
> 
> 时间：2012-07-23T03:43:27.160
> 
> 标签：javascript, graph, d3.js

我正在`json`从数据库加载并创建一个`json`加载良好的文件。现在我不知道要采取哪些步骤来使节点在力有向图中做出响应。我需要删除和添加新节点及其链接。

```
force.nodes(json.nodes)
    .links(json.links)
    .start();

initNodes(json); 
```

如何在不重置整个可视化的情况下使其更具动态性或更新它？

我已经多次看到这个问题没有得到回答，所以我希望有人可以发布并提供指导。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-17T00:13:55.400

在我更好地理解添加初始节点集的方式之前，将节点/链接添加到我的 D3 力图非常令人困惑。

假设 a`<g>`是您想用于节点的：

```
// Select the element where you'd like to create the force layout
var el = d3.select("#svg");

// This should not select anything
el.selectAll("g")

// Because it's being compared to the data in force.nodes() 
    .data(force.nodes())

// Calling `.enter()` below returns the difference in nodes between 
// the current selection and force.nodes(). At this point, there are
// no nodes in the selection, so `.enter()` should return 
// all of the nodes in force.nodes()
    .enter()

// Create the nodes
    .append("g")
    .attr("id", d.name)
    .classed("manipulateYourNewNode", true); 
```

现在让我们创建一个函数，该函数将在图形初始化后向布局添加一个节点！

`newNodeData`是一个对象，其中包含您要用于新节点的数据。 `connectToMe`是一个字符串，其中包含您要将新节点连接到的节点的唯一 ID。

```
function createNode (newNodeData, connectToMe) {
    force.nodes().push(newNodeData);
    el.selectAll("g")
       .data(force.nodes(), function(datum, index) { return index }) 
```

作为可选的第二个参数 in 给出的函数对`.data()`选择中的每个节点运行一次，然后对 in 中的每个节点运行一次，`force.nodes()`根据返回的值匹配它们。如果没有提供函数，则调用一个回退函数，该函数返回`index`（如上）。

但是，您的新选择的索引（我相信顺序是随机的）和`force.nodes()`. 相反，您很可能需要该函数返回每个节点独有的属性。

这一次，`.enter()`将只返回您尝试添加的节点，`newData`因为`.data()`.

```
 .enter()
       .insert("g", "#svg")
       .attr("id", d.name)
       .classed("manipulatYourNewNode", true);

    createLink(connectToMe, newNodeData.name);

    force.start();
} 
```

函数 createLink（定义如下）在您的新节点和您选择的节点之间创建一个链接。

此外，[d3js API 声明 force.start() 应该在更新布局后调用](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-start)。

**注意：**`force.stop()`当我第一次尝试弄清楚如何将节点和链接添加到我的图表时，在我的函数的最开始调用对我来说是一个巨大的帮助。

```
function createLink (from, to) {
    var source = d3.select( "g#" + from ).datum(),
        target = d3.select( "g#" + to ).datum(),
        newLink = {
            source: source,
            target: target,
            value: 1
        };
    force.links().push(newLink); 
```

下面的代码在以下假设下工作：

1.  `#links`是包含所有链接元素的包装元素
2.  您的链接表示为`<line>`元素：

    ```
    d3.select("#links")
        .selectAll("line")
        .data(force.links())
        .enter()
        .append("line"); 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T19:45:07.433

您可以在此处查看如何附加新节点和关系的示例：http: [//bl.ocks.org/2432083](http://bl.ocks.org/2432083)

摆脱节点和关系有点棘手，但你可以在这里看到这个过程：http: [//bl.ocks.org/1095795](http://bl.ocks.org/1095795)

# jquery - 从动态 id 和静态类选择器中引用 IMG src

> ID：11606219
> 
> 赞同：-2
> 
> 时间：2012-07-23T03:44:27.177
> 
> 标签：jquery

我对我的元素使用相同的类，但我更改了 id。id 是唯一的

```
<div class="buttons">
    <a href="" class="wanted" id="'.$status_id[$num].'">
        <img src="/images/wanted.png">
    </a>
    <a href="" class="unwanted" id="'.$status_id[$num].'">
        <img src="/images/unwanted.png">
    </a>
</div> 
```

当单击想要的类时，我试图引用不需要的.png 以在 jquery 中更改它。

我使用`var x = document.getElementById(id);`get ，但如果不使用参考`.wanted`，我无法弄清楚如何获取。`.unwanted``$(this)`

任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:30:29.327

当您单击其中一个链接时，获取其兄弟：

```
$('.buttons a').click(function(e) {
    e.preventDefault();
    var otherLink = $(this).siblings().first();

    // do something with other link
}); 
```

[演示](http://jsfiddle.net/r5G7m/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:55:16.933

2 个 HTML 元素不应具有相同的 id。

但是，使用 JQuery 你可以不使用：`$('anyselector:not(.unwanted)')`

# c - 从 fprintf 获取虚假数据

> ID：11606223
> 
> 赞同：0
> 
> 时间：2012-07-23T03:45:03.183
> 
> 标签：c

我的脚本需要一个输入文件，文件看起来像这样。

```
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 nonsense_mediate_decay 外显子 3036949 3037109 。- 。基因ID“ENSMUSG00000023764”；成绩单ID“ENSMUST00000126746”；外显子编号“11”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-015”；
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 nonsense_mediate_decay 外显子 3036949 3037109 。- 。基因ID“ENSMUSG00000023764”；成绩单ID“ENSMUST00000132893”；外显子编号“17”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-003”；
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 蛋白质编码外显子 3036949 3037109。- 。基因ID“ENSMUSG00000023764”；成绩单id“ENSMUST00000066391”；外显子编号“22”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-001”；
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 蛋白质编码外显子 3036949 3037109。- 。基因ID“ENSMUSG00000023764”；transcript_id "ENSMUST00000081318"; 外显子编号“23”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-017”；
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 蛋白质编码外显子 3036949 3037109。- 。基因ID“ENSMUSG00000023764”；transcript_id "ENSMUST00000093407"; 外显子编号“16”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-202”；
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 蛋白质编码外显子 3036949 3037109。- 。基因ID“ENSMUSG00000023764”；transcript_id "ENSMUST00000101649"; 外显子编号“22”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-203”；

chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 蛋白质编码外显子 3036949 3037109。- 。基因ID“ENSMUSG00000023764”；成绩单ID“ENSMUST00000101655”；外显子编号“22”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-020”；
chr11 3037016 chr11_3037016 8 39 6 44 4 24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 11 18
chr11 蛋白质编码外显子 3036949 3037109。- 。基因ID“ENSMUSG00000023764”；成绩单ID“ENSMUST00000140846”；外显子编号“20”；基因名称“Sfi1”；基因生物型“蛋白质编码”；成绩单名称“Sfi1-016”；

```

这是我的脚本：

```
#include <stdio.h>
#include <string.h>
int main(void)
{
   static const char filename[] = "input_file.txt";
   FILE *file3 = fopen("thirdstep2a.txt","w");
   FILE *file = fopen(filename, "r");

   if ( file != NULL )
   {

      char line[BUFSIZ],line2[BUFSIZ] ;
      char one[20], three[22], four[20], a1[20],a2[20],a3[20],a4[20],a5[20],a6[20],a7[20],a8[20], a9[20], a10[20],a11[20],a12[20],a13[20],a14[20],a15[20],a16[20],a17[20],a18[20],a19[20],a20[20],a21[20],a22[20],a23[20],a24[20],a25[20],a26[20],a27[20],a28[20],a29[20],a30[20],a31[20],a32[20],a33[20],a34[20];

      char one2[20],three2[20],four2[26], six2[26], seven2[20], eight2[11], nine2[20];

     fgets(line, sizeof line, file);
     fgets(line2, sizeof line2, file);
     while(1)
     {
         sscanf(line, "%19s %21s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s %19s", one, three, four, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a23, a24, a25, a26, a27, a28, a29, a30, a31, a32, a33, a34);
         sscanf(line2, "%*s %*s %10s %19s %19s %*s %*s %*s %*s %25s %*s %25s %*s %19s %*s %19s", eight2, one2, three2, four2, six2, seven2, nine2); 

         fprintf(file3,"%s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s\t %s \t %s\t %s\t %s\t %s\t %s\t %s\t", one, a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a23, a24, a25, a26, a27, a28, a29, a30, a31, a32, a33, a34);

         fprintf(file3,"%s\t %s\t %s\t %s\t %s\t\n", four2, six2, seven2, one2, three2);
         if(fgets(line, sizeof line, file) == NULL)
             break;

         if(fgets(line2, sizeof line, file) == NULL)
             break;
      }
   }
   else
   {
      perror(filename);
   }
   return 0;
} 
```

我的输出如下所示：

```
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000126746”；“11”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000132893”；“17”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000066391”；“22”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000081318”；“23”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000093407”；“16”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000101649”；“22”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000101655”；“22”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000140846”；“20”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000153425”；“21”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000137633”；“3”；3036949 3037109    
chr11 8 39 6 44 “Sfi1”；24 7 22 6 31 7 44 8 39 13 41 10 37 9 23 18 32 8 37 2 9 16 33 9 29 4 7 5 30 “ENSMUSG00000023764”；“ENSMUST00000138126”；

```

如您所见，我的输出看起来不正确。我从 a5 字符串中得到了一些虚假数据。我无法弄清楚错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:16:17.137

编译代码时（在文件中`bio.c`），编译器会说：

```
$ gcc -O3 -g -Wall -Wextra -std=c99  bio.c -o bio  
bio.c: In function ‘main’:
bio.c:24: warning: too few arguments for format
bio.c:24: warning: too few arguments for format
bio.c:17: warning: unused variable ‘two2’
bio.c:15: warning: unused variable ‘five’
bio.c:9: warning: unused variable ‘i’
$ 
```

我懒得更准确地找出问题所在（第 24 行是`sscanf()`for `line2`），但警告表明代码有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:19:21.297

阅读您的编译器输出。海合会给出了这个

```
../../../vmc/_tests/chom.c:23:10: warning: too few arguments for format
../../../vmc/_tests/chom.c:23:10: warning: too few arguments for format
../../../vmc/_tests/chom.c:16:22: warning: unused variable ‘two2’
../../../vmc/_tests/chom.c:14:32: warning: unused variable ‘five’
../../../vmc/_tests/chom.c:8:8: warning: unused variable ‘i’ 
```

你要特别担心前两个。

# javascript - 添加到数组中的 Javascript 对象是按值传递还是按引用传递？

> ID：11606225
> 
> 赞同：0
> 
> 时间：2012-07-23T03:45:14.850
> 
> 标签：javascript, pass-by-reference, pass-by-value

> **可能重复：**
> [JavaScript 是按引用传递还是按值传递语言？](https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language)

在这个文件中，我有一个对象 this.objectA 和 this.allAs；this.objectA 包含一些属性。每次我得到一个新的 this.objectA 时，我都会将它添加到数组 this.allAs 中。当我得到一个新的时，我总是重新分配 this.objectA。

后来我检查了我的数组this.allAs，我发现它正确地存储了不同的this.objectA。为什么 this.objectA 被覆盖，this.allAs 中的对象没有被覆盖？（我希望所有这些存储的对象都指向同一个this.objectA，但事实并非如此）Javascript是按值传递对象？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:10:37.367

你必须更具体地了解你在做什么。JavaScript 通过引用传递，但是如果您将本地副本保存在任何地方，并从 return 语句中复制这些值，那么您就不再从引用中工作了——它们不再是指向完全相同的对象的指针，必然。

这里有一些东西来演示传递引用：

```
Bob = { name : "Bob", age : 32 };
function giveBobTo (obj, bobject) { obj.bob = bobject; }

Billy = {};
Jim = {};

giveBobTo(Billy, Bob);
giveBobTo(Jim, Bob);

Jim.bob.cars_on_lawn = 8;
Billy.bob.cars_on_lawn;  // 8;
Bob.cars_on_lawn;        // 8;

console.log( "Billy-Bob equals Jim-Bob equals Bob:",
             Billy.bob === Jim.bob === Bob); // true 
```

# java - Java BigInteger 表示 unsigned long

> ID：11606228
> 
> 赞同：1
> 
> 时间：2012-07-23T03:45:32.417
> 
> 标签：java, long-integer, biginteger, unsigned

我正在尝试`BigInteger`用于表示`long`来自 Java 中的 C 的无符号 64 位 ( )，我的方法与以下帖子中提到的完全相同。

[http://technologicaloddity.com/2010/09/22/biginteger-as-unsigned-long-in-java/](http://technologicaloddity.com/2010/09/22/biginteger-as-unsigned-long-in-java/)

你们中的一个可以验证这种方法是正确的吗？

在这方面的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T03:54:57.157

当然可以，但你真的需要吗？有很大的性能成本。唯一需要它的无符号是在比较时，您可以使用一个小的无符号比较方法来修复它。剩下的时间你可以只用很长的时间。

# android - 将自定义布局（从文件）添加到另一个布局

> ID：11606229
> 
> 赞同：1
> 
> 时间：2012-07-23T03:45:39.283
> 
> 标签：android, view, android-linearlayout

内容视图是一个线性布局。我们称它为 llOne，我们会说它在文件 llOne.xml 中。

我要添加的视图也是一个 LinearLayout，但它们位于单独的文件中。我们称它为 llTwo，我们会说它在文件 llTwo.xml 中。

```
 setContentView(R.layout.llOne);

 LinearLayout llOne = (LinearLayout) findViewById(R.id.llOne);
 LinearLayout llTwo = (LinearLayout) findViewById(R.id.llTwo);

 llOne.addView(llTwo); //NullPointerException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:54:00.167

你需要膨胀第二个布局，因为`setContentView`只膨胀你的`llOne`

```
LayoutInflater inflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View otherView = inflater.inflate(R.layout.yourSecondLayoutFileName, null); 
```

进而

```
LinearLayout llTwo = (LinearLayout) otherView .findViewById(R.id.llTwo);
llOne.addView(llTwo); 
```

# sql-server-2008 - 从地理列中获取位置

> ID：11606230
> 
> 赞同：1
> 
> 时间：2012-07-23T03:45:42.157
> 
> 标签：sql-server-2008, stored-procedures, sqlgeography

我正在使用地理列（在 SQL Server 2008 中）将包含纬度、经度等地理信息的表迁移到一个表。

我需要更新一个返回这些值的存储过程。

我可以做这个：

```
DECLARE @geog geography;
SET @geog = (SELECT [geography] FROM MyTable);

SELECT @g.STAsText(); 
```

但是我不想更改的 SP 的签名需要这个：

```
@latitude [float] OUTPUT,
@longitude [float] OUTPUT 
```

如何获得正确的值，如浮点数？

我可以使用[http://sqltutorials.blogspot.com.au/2007/09/sql-function-split.html](http://sqltutorials.blogspot.com.au/2007/09/sql-function-split.html)或类似的，但这肯定不应该那么复杂吗？

谢谢梅兰妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:59:40.767

```
DECLARE @g geography;
SET @g = (SELECT [geography] FROM MyTable);

SELECT @g.Lat, @g.Long; 
```

# mysql - 在mysql中格式化名称的字符串替换

> ID：11606234
> 
> 赞同：0
> 
> 时间：2012-07-23T03:46:17.973
> 
> 标签：mysql, sql

我有一个名为的列`names`，其输入如下：

```
`name`  
Aaron, James
Aberer, Leo
A.J.
A., Narayana Rao
Abbot Jr., Greg 
```

我想更改格式，以便名字排在第一位，这就是它需要的方式：

```
`name`
James Aaron
Leo Aberer
A.J.
Narayana Rao A.
Greg Abbot Jr. 
```

我将如何直接在mysql中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:51:38.833

您可以使用此解决方案：

```
SELECT 
    CASE WHEN INSTR(name, ',') > 0 
        THEN TRIM(CONCAT(SUBSTRING_INDEX(name, ',', -1), ' ', SUBSTRING_INDEX(name, ',', 1))) 
    ELSE name END AS name_formatted
FROM tbl 
```

* * *

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/ab9bc/5/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:57:45.343

如果您可以依靠 MySQL 中的格式来始终只有一个逗号，那么您可以使用相对简单的 MySQL 函数。

```
SELECT CONCAT(SUBSTRING_INDEX(name, ',', -1), ' ', SUBSTRING_INDEX(name, ',' 1))
FROM names 
```

但是，您的输入也有一个根本没有逗号的名称。在这种情况下，您需要先检查它是否有逗号。如果您可以依靠您的输入始终使用零或一个逗号，则可以使用以下内容。

```
SELECT IF(
  LOCATE(name, ','),
  CONCAT(SUBSTRING_INDEX(name, ',', -1), ' ', SUBSTRING_INDEX(name, ',' 1)),
  name
) FROM names 
```

# linux - 从内存中卸载共享库

> ID：11606235
> 
> 赞同：5
> 
> 时间：2012-07-23T03:46:24.183
> 
> 标签：linux, shared-libraries

我正在尝试在 Linux 上修改此共享库（带有 .so）扩展名。我正在插入一些 printf 语句和 fprintf 语句来调试，它没有效果。我删除了 .so 文件并意识到程序仍然运行良好。这是否意味着程序已加载到内存中？（但我确信只有我正在测试的程序使用该 .so 文件）

如何让它卸载，以便确保我的程序正在加载修改后的程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T03:57:21.663

不，共享库不会缓存在内存中。如果您已删除该`.so`文件并且您的程序仍在运行，则：

*   程序正在从不同的位置加载`.so`同名的，或者
*   程序无需加载即可运行`.so`

如果`.so`应该在程序启动时加载，那么您可以使用`ldd`来找出您的操作系统认为`.so`实际在哪里。

如果`.so`在运行时动态加载，那么也许`strace`能够帮助查明正在发生的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T06:06:18.430

您可以阅读`/proc/1234/maps`以找出进程 1234 的内存映射。这也显示了动态加载的共享对象。

您可以使用`LD_LIBRARY_PATH`环境变量来更改共享库的路径并`ldconfig`升级其缓存。也看`/etc/ld.so.conf`等。

当然，您必须重新启动加载共享库的程序。

# ajax - 如何在 Ajax 中解析 JSON 对象/数组

> ID：11606237
> 
> 赞同：1
> 
> 时间：2012-07-23T03:46:33.743
> 
> 标签：ajax, json, jsonp, arrays

我如何能够从我的 Web 服务获取此 json 中更新的值：

```
{"listener":{"id":"1","updated":"false"}} 
```

这是我尝试过的：

```
$.ajax({
       ...
        success : function(data) {            
            console.log("received listener: " + data);            
            var received = JSON.parse(JSON.stringify(data));                              
            var listener = received.listener;  
            var length = listener.length;
            //alert('returned json' + data + ' no. of products received: ' + length);
            console.log('returned json' + listener + ' no. of listener received: ' + length); //it says undefined for the length

            var updated = listener[0].updated;

        }
    }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:57:37.933

首先，这条线没有意义：

```
var received = JSON.parse(JSON.stringify(data)); 
```

`JSON.stringify`将`JSON`结构转换为字符串，`JSON.parse`反之亦然。换句话说：

```
var received = data.listener; // is equivalent. 
```

其次，`received`是一个*对象*：

```
{"id":"1","updated":"false"} 
```

它不是一个数组，所以它没有`length`属性。如果您正在寻找对象的`id`，`received`那么您显然会使用：

```
var updated = listener.id; 
```

要使您的代码正常工作`data`，必须如下所示：

```
{"listener":[{"id":"1","updated":"false"}]} 
```

# delphi - 如何使用 TIdHTTPProxyServer（代理链）将请求转发到另一个代理服务器

> ID：11606238
> 
> 赞同：1
> 
> 时间：2012-07-23T03:46:49.920
> 
> 标签：delphi, proxy, c++builder, indy

目前我想让我的 indy 代理服务器将请求转发到另一个代理服务器。我找到[了这个链接](http://forums2.atozed.com/viewtopic.php?f=7&t=151)并自己尝试了一下。但是我的代码在没有任何错误消息的情况下无法运行，就好像我没有进行任何更改一样。我的代码在 C++ XE2 中如下所示。

```
void __fastcall TForm3::MyProxyHTTPBeforeCommand(TIdHTTPProxyServerContext *AContext)
{
    TIdIOHandlerStack* tempIO = new TIdIOHandlerStack(NULL);

    TIdConnectThroughHttpProxy* tempProxy = new TIdConnectThroughHttpProxy(NULL);
    tempProxy->Enabled = true;
    tempProxy->Host = "localhost";
    tempProxy->Port = 8181 ;
    tempIO->TransparentProxy  =  tempProxy;
    AContext->OutboundClient->IOHandler =  tempIO;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:04:10.600

最后我发现我做了一些愚蠢的事情。正确的代码应该如下...

```
void __fastcall TForm3::MyProxyHTTPBeforeCommand(TIdHTTPProxyServerContext *AContext)
{
    TIdIOHandlerStack* tempIO = new TIdIOHandlerStack(AContext->OutboundClient);

    TIdConnectThroughHttpProxy* tempProxy = new TIdConnectThroughHttpProxy(AContext->OutboundClient);
    tempProxy->Enabled = true;
    tempProxy->Host = "localhost";
    tempProxy->Port = 8181 ;
    tempIO->TransparentProxy  =  tempProxy;
    AContext->OutboundClient->IOHandler =  tempIO; 
```

# java - 带有组合和文本字段的 SWT 表：从组合中选择后无法编辑文本字段

> ID：11606242
> 
> 赞同：0
> 
> 时间：2012-07-23T03:47:25.227
> 
> 标签：java, text, swt

我创造了一个怪物，它应该是一个更优雅的解决问题的方法，但它逃脱了我的控制。

问题如下：

我有一个带有表格的对话框窗口。首次出现对话框时，表中包含 SQL 查询的不可编辑内容。内容填充（例如）为

```
item.setText(j, d2e.get(i)[j]); 
```

表有一个双击监听器。单击某个项目时，不可编辑的项目将替换为可编辑的等效项。这个新的可编辑`TableItem`文件里面有文本字段和组合。问题是：

当我从组合中选择时，我无法编辑文本字段。

我不知道为什么。

这里是怪物：

```
import java.util.ArrayList;

import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.TableEditor;
import org.eclipse.swt.events.ModifyEvent;
import org.eclipse.swt.events.ModifyListener;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Combo;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;
import org.eclipse.swt.widgets.Text;

public class TariffEditDialog2 extends DialogWindow {

static final int RESIZE = -1;
static final int NO_RESIZE = -2;

Boolean isConstant;

ContentData tariffConstants;
ContentData tariffVariables;
ContentData tariffConstantsOfType;
ContentData tariffVariablesOfType;  

Combo cRates;

Table mt;

ArrayList<String[]> data2edit;
ArrayList<String[]> edited;

ArrayList<Editable> editable;
ArrayList<Integer> updateSorter;

int variableIDresizeCount = -1;
int defQuerySize = 0;

public TariffEditDialog2(Shell parent_in, ContentProvider cp, Boolean isConstant_in, ContentData tariffConstants_in, ContentData tariffVariables_in) {
    super(parent_in, cp);
    // TODO Auto-generated constructor stub

    childWindow.setText("edit dialog");

    isConstant = isConstant_in;
    tariffVariables = tariffVariables_in;
    tariffConstants = tariffConstants_in;

    mt = new Table(mainContainer, SWT.MULTI | SWT.BORDER | SWT.FULL_SELECTION);

    mt.setLinesVisible(true);
    mt.setHeaderVisible(true);
    GridData gd = new GridData(SWT.FILL, SWT.FILL, true, true);
    gd.heightHint = 200;
    mt.setLayoutData(gd);

    mt.addListener(SWT.MouseDoubleClick, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            // TODO Auto-generated method stub

            populateMain(data2edit, isConstant, mt.getSelectionIndex());

        }

    });

    populateHeader(isConstant);

    data2edit = new ArrayList<String[]>();
    edited = new ArrayList<String[]>();

    editable = new ArrayList<Editable>();
    updateSorter = new ArrayList<Integer>();

    if (isConstant) {

        ContentData query = contentProvider.getTariffConstantsOfType(Integer.parseInt(tariffConstants.getSelectedData()[1].toString()), Integer.parseInt(tariffConstants.getSelectedData()[2].toString()));

        for (int i = 1; i < query.getQueryRowCount(); i++) {

            data2edit.add(new String[tariffConstants.getColumnNamesCount()-1]);

            for (int j = 1; j < tariffConstants.getColumnNamesCount(); j++) {

                data2edit.get(i-1)[j-1] = query.getQueryData()[i][j].toString();
                updateSorter.add(i-1);

            }

        }

        //defQuerySize = data2edit.size();

        populateMain(data2edit, isConstant, NO_RESIZE);

        ok.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {

                convertEdited();
                if (editable.size() > 0) {

                        //contentProvider.dbLicznikInsertAndReaload(cmd.updateOperatorsConstantDescriptions(editable.get(0).getData().get(0), editable.get(0).getData().get(1), cRates.getText(), data2edit.get(editable.get(0).getIndex())[0], data2edit.get(editable.get(0).getIndex())[1]));
                    contentProvider.dbLicznikInsertAndReaload(cmd.updateOperatorsConstantDescriptions(edited.get(0)[0], edited.get(0)[1], cRates.getText(), data2edit.get(editable.get(0).getIndex())[0], data2edit.get(editable.get(0).getIndex())[1]));
                    //contentProvider.dbLicznikInsertAndReaload(cmd.updateOperatorsConstantPricesDates(editable.get(0).getData().get(0), editable.get(0).getData().get(1), editable.get(0).getData().get(9), editable.get(0).getData().get(10), editable.get(0).getData().get(8), editable.get(0).getData().get(6), data2edit.get(editable.get(0).getIndex())[0], data2edit.get(editable.get(0).getIndex())[1]));
                    contentProvider.dbLicznikInsertAndReaload(cmd.updateOperatorsConstantPricesDates(edited.get(0)[0], edited.get(0)[1], edited.get(0)[9], edited.get(0)[10], edited.get(0)[8], edited.get(0)[6], data2edit.get(editable.get(0).getIndex())[0], data2edit.get(editable.get(0).getIndex())[1]));

                    for (int index = 0; index < editable.size(); index ++) {

                        if (updateSorter.contains(editable.get(index).getIndex())) {

                            contentProvider.dbLicznikInsertAndReaload(cmd.updateOperatorsConstantPricesValues(edited.get(index)[8], edited.get(index)[3], edited.get(index)[4], edited.get(index)[5], edited.get(index)[7], data2edit.get(editable.get(index).getIndex())[8], data2edit.get(editable.get(index).getIndex())[3]));

                        } else {

                            contentProvider.dbLicznikInsertAndReaload(cmd.insertConstantPricesValues(edited.get(index)[8], edited.get(index)[3], edited.get(index)[4], edited.get(index)[5], edited.get(index)[7]));

                        }

                    }

                    //System.out.println("edited: " + editable.size());

                }
                childWindow.close();
            }
        });

    } else { // variable

        ContentData query = contentProvider.getTariffVariablesOfType(Integer.parseInt(tariffVariables.getSelectedData()[1].toString()), Integer.parseInt(tariffVariables.getSelectedData()[8].toString()));

        for (int i = 1; i < query.getQueryRowCount(); i++) {

            data2edit.add(new String[tariffVariables.getColumnNamesCount()-1]);
            updateSorter.add(i-1);

            for (int j = 1; j < tariffVariables.getColumnNamesCount(); j++) {

                if ( j < 7) {
                    data2edit.get(i-1)[j-1] = query.getQueryData()[i][j].toString();
                } else if ( j >= 7 && j < 12) {
                    data2edit.get(i-1)[j-1] = query.getQueryData()[i][j+1].toString();
                } else if ( j == 1) {
                    data2edit.get(i-1)[j-1] = "b";
                }

            }

        }

        defQuerySize = data2edit.size();

        populateMain(data2edit, isConstant, NO_RESIZE);

        ok.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {

//                  out.add(tVariable.getText()); //0
//                  out.add(tStart.getText()); //1
//                  out.add(tStop.getText()); //2
//                  out.add(tWeekdays.getText()); //3
//                  out.add(tDay_tariff_id.getText()); //4 
//                  out.add(tType.getText()); //5
//                  out.add(d2e.get(edit)[6]);  //6
//                  out.add(tSubgroup_id.getText());  //7
//                  out.add(tId.getText()); //8
//                  out.add(tStart2.getText()); //9
//                  out.add(tPrice.getText()); //10
//                  out.add(cUnit.getText()); //11

                convertEdited();
                if (editable.size() > 0) {

                    contentProvider.dbLicznikInsertAndReaload(cmd.updateTariffsCalendar(edited.get(0)[0], edited.get(0)[1], edited.get(0)[2], edited.get(0)[3], edited.get(0)[4], data2edit.get(0)[0]));

                    for (int index = 0; index < editable.size(); index ++) {

                        if (updateSorter.contains(editable.get(index).getIndex())) {

                            contentProvider.dbLicznikInsertAndReaload(cmd.updateTariffsParts(edited.get(index)[4], edited.get(index)[5], edited.get(index)[6], edited.get(index)[7], data2edit.get(index)[4], data2edit.get(index)[5]));
                            contentProvider.dbLicznikInsertAndReaload(cmd.updateTariffs(edited.get(index)[8], edited.get(index)[7], edited.get(index)[9], edited.get(index)[10], edited.get(index)[11], data2edit.get(index)[8]));

                        } else {

                            contentProvider.dbLicznikInsertAndReaload(cmd.insertTariffs(edited.get(index)[8], edited.get(index)[7], edited.get(index)[9], edited.get(index)[10], edited.get(index)[11]));

                        }

                    }

                }
                System.out.println("edited: " + editable.size());
                //childWindow.close();
            }
        });

    }

    childWindow.pack();
    childWindow.open();

}

private void populateHeader(final Boolean isConstant) {

    Composite header = new Composite(headerContainer, SWT.NONE);
    header.setLayout(new GridLayout(3, false));

    cRates = new Combo(header, SWT.READ_ONLY);

    Button bEditRates = new Button(header, SWT.PUSH);
    bEditRates.setText("e");

    if (isConstant) {

        bEditRates.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                new EditRates(parent, contentProvider,true);
            }
        });

        Button addDesc = new Button(header, SWT.PUSH);
        addDesc.setText("+");
        addDesc.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {

                populateMain(data2edit, isConstant, RESIZE);

            }
        });

        GridData buttonWidth = new GridData();
        buttonWidth.widthHint = 43;

        addDesc.setLayoutData(buttonWidth);

        int rateIndex = Integer.MAX_VALUE;
        ContentData constantRateNames = contentProvider.getConstantRateNames();

        for (int i = 1; i < constantRateNames.getQueryRowCount(); i++ ) {
            cRates.add(constantRateNames.getQueryData()[i][2].toString());
            if (constantRateNames.getQueryData()[i][2].toString().trim().equals(tariffConstants.getSelectedData()[3].toString().trim())) {              
                rateIndex = i-1;
            }
        }
        if (rateIndex != Integer.MAX_VALUE) { 
            cRates.select(rateIndex);
        }           

    } else { // is variable

        bEditRates.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                new EditRates(parent, contentProvider,false);
            }
        });

        Button addDesc = new Button(header, SWT.PUSH);
        addDesc.setText("+");
        addDesc.addSelectionListener(new SelectionAdapter() {

            public void widgetSelected(SelectionEvent e) {

                if (variableIDresizeCount == -1) {

                    variableIDresizeCount = contentProvider.getNextVariableId();

                } else {

                    variableIDresizeCount++;

                }

                populateMain(data2edit, isConstant, RESIZE);

            }
        });

        GridData buttonWidth = new GridData();
        buttonWidth.widthHint = 43;

        addDesc.setLayoutData(buttonWidth);

        int rateIndex = Integer.MAX_VALUE;

        ContentData variableRateNames = contentProvider.getVariableRateNames();

        for (int i = 1; i < variableRateNames.getQueryRowCount(); i++ ) {

            cRates.add(variableRateNames.getQueryData()[i][2].toString());

            if (variableRateNames.getQueryData()[i][2].toString().trim().equals(tariffVariables.getSelectedData()[7].toString().trim())) {              
                rateIndex = i-1;
            }
        }
        if (rateIndex != Integer.MAX_VALUE) { 
            cRates.select(rateIndex);
        }

    }

}

private void convertEdited() {

    for (int i = 0; i < editable.size(); i++) {

        String[] tmp = new String[editable.get(i).getData().size()];

        for (int j = 0; j < tmp.length; j++) {

            tmp[j] = editable.get(i).getData().get(j);

        }

        edited.add(tmp);

    }

}

private void populateMain(ArrayList<String[]> d2e, Boolean isConstant, int edit) {

    if (isConstant) {

        if (mt.getColumnCount() == 0) {

            for (int i = 1; i < tariffConstants.getColumnNamesCount()+1; i++) {

                TableColumn column = new TableColumn(mt, SWT.NONE);

                if (( i < 3) || ( i == 6 ) || ( i == 7) ) {

                    column.setText(tariffConstants.getColumnNames()[i].toString());

                } else if ( (i == 3) || (i == 4) ) {

                    column.setText(tariffConstants.getColumnNames()[i+1].toString());

                } else if ( (i == 5) || (i == 8) ) {

                    column.setText("e");

                } else if ( i > 8) {

                    column.setText(tariffConstants.getColumnNames()[i-1].toString());

                }

            }
        }

        if (edit == RESIZE) {

            d2e.add(d2e.get(d2e.size()-1).clone());
            d2e.get(d2e.size()-1)[3] = Integer.toString(Integer.parseInt(d2e.get(d2e.size()-1)[3]) +1);
            d2e.get(d2e.size()-1)[4] = "";
            d2e.get(d2e.size()-1)[5] = "";

        }

        for (int i = 0; i < d2e.size(); i++) {

            if ((i == edit) && (mt.getItemCount() > 0)) {

                editable.add(new Editable(contentProvider, mt, mt.getItems()[i], isConstant, tariffVariables, tariffConstants, edit, d2e));

            } else if( (edit == RESIZE) && ( i == d2e.size() - 1 ) && (d2e.size() > 1) ) {

                editable.add(new Editable(contentProvider, mt, mt.getItems()[i], isConstant, tariffVariables, tariffConstants, i, d2e));

            } else if (mt.getItemCount() < d2e.size()){

                TableItem item = new TableItem(mt, SWT.NONE);

                for (int j = 0; j < d2e.get(i).length +1; j++) {

                    if (( j < 2) || ( j == 5 ) || ( j == 6) ) {

                        item.setText(j, d2e.get(i)[j]);

                    } else if ( (j == 2) || (j == 3) ) {

                        item.setText(j, d2e.get(i)[j+1]);

                    } else if ( (j == 4) || (j == 7) ) {

                        item.setText(j, "");

                    } else if ( j > 7) {

                        item.setText(j, d2e.get(i)[j-1]);

                    }

                }

            }

        }

        for (int i = 0; i < mt.getColumnCount(); i++) {

            if ( (i == 4) || (i == 7) ) {

                mt.getColumn(i).setWidth(30);

            } else if (i == 3) {

                mt.getColumn(i).setWidth(400);

            } else if (i == 6) {

                mt.getColumn(i).setWidth(100);

            } else {

                mt.getColumn(i).pack();

            }

        }

    } else { // is variable

        if (mt.getColumnCount() == 0) {

            for (int i = 1; i <tariffVariables.getColumnNamesCount(); i++) {

                TableColumn column = new TableColumn(mt, SWT.NONE);

                if ( i < 7 ) {

                    column.setText(tariffVariables.getColumnNames()[i].toString());

                } else if ( (i >= 7) && (i < 12) ) {

                    column.setText(tariffVariables.getColumnNames()[i+1].toString());

                } else if ( i == 12 ) {

                    column.setText("e");

                }

            }
        }

        if (edit == RESIZE) {

            d2e.add(d2e.get(d2e.size()-1).clone());
            d2e.get(d2e.size()-1)[7] = Integer.toString(variableIDresizeCount);
            d2e.get(d2e.size()-1)[8] = "";
            d2e.get(d2e.size()-1)[9] = "";

        }

        for (int i = 0; i < d2e.size(); i++) {

            if ((i == edit) && (mt.getItemCount() > 0)) {

                editable.add(new Editable(contentProvider, mt, mt.getItems()[i], isConstant, tariffVariables, tariffConstants, edit, d2e));

            } else if( (edit == RESIZE) && ( i == d2e.size() - 1 ) && (d2e.size() > 1) ) {

                editable.add(new Editable(contentProvider, mt, mt.getItems()[i], isConstant, tariffVariables, tariffConstants, i, d2e));

            } else if (mt.getItemCount() < d2e.size()){

                TableItem item = new TableItem(mt, SWT.NONE);

                for (int j = 0; j < d2e.get(i).length; j++) {

                    if ( j < 11) {

                        item.setText(j, d2e.get(i)[j]);

                    } else {

                        item.setText(j, "");

                    }

                }

            }

        }

        for (int i = 0; i < mt.getColumnCount(); i++) {

            if (i == 7) {

                mt.getColumn(i).setWidth(75);

            } else if (i == 10 ) {

                mt.getColumn(i).setWidth(100);

            } else if ( i == 11) {

                mt.getColumn(i).setWidth(30);

            } else {

                mt.getColumn(i).pack();
            }

        }

    }

    mt.update();

}

private class Editable {

    static final int BUT_WIDTH = 30;

    Text tConstant;
    Text tVariable;
    Text tWeekdays;
    Text tDay_tariff_id;
    Text tType;
    Text tSubgroup_id;
    Text tId;
    Text tPrice;
    Text tMultip;
    Text tPrices;
    Text tStart;
    Text tStart2;
    Text tStop;

    Combo cDescription;
    Combo cUnit;

    Button bEditUnits;
    Button bEditDescr;

    TableEditor[] tEditors;

    Color green = new Color(parent.getDisplay(), 153, 242, 184);

    ContentData descriptions;
    ContentData units;

    private TableItem item;

    int selected;
    int edit;

    ArrayList<String[]> d2e;

    public Editable (ContentProvider cp, Table mt, TableItem item_, Boolean isConstant, ContentData tariffVariables, ContentData tariffConstants, int edit_, ArrayList<String[]> d2e_ ) {

        descriptions = cp.getConstantRateDescriptions();
        units = cp.getRateUnits();
        item = item_;
        d2e = d2e_;
        edit = edit_;

        if (isConstant == true) {

            tEditors = new TableEditor[12];
            for (int i = 0; i < tEditors.length; i ++) {
                tEditors[i] = new TableEditor(mt);
                tEditors[i].horizontalAlignment = SWT.LEFT;
                tEditors[i].grabHorizontal = true;
            }

            tConstant = new Text(mt, SWT.NONE);
            tConstant.setText(d2e.get(edit)[0]);
            tConstant.setBackground(green);
            tConstant.addModifyListener(new myListener(tConstant));
            tEditors[0].setEditor(tConstant, item, 0);

            tType = new Text(mt, SWT.NONE);
            tType.setText(d2e.get(edit)[1]);
            tType.setBackground(green);
            tType.addModifyListener(new myListener(tType));
            tEditors[1].setEditor(tType, item, 1);

            tId = new Text(mt, SWT.NONE);
            tId.setText(d2e.get(edit)[3]);
            tId.setBackground(green);
            tId.addModifyListener(new myListener(tId));
            tEditors[2].setEditor(tId, item, 2);
//------------------------------------------------------------------------------------              
            cDescription = new Combo(mt, SWT.NONE);
            cDescription.setBackground(green);
            selected = Integer.MAX_VALUE;
            for (int i = 1; i < descriptions.getQueryRowCount(); i++) {
                cDescription.add(descriptions.getQueryData()[i][2].toString());
                if (descriptions.getQueryData()[i][2].toString().trim().equals(d2e.get(edit)[4].trim())) {
                    selected = i - 1;
                }
            }
            if (selected != Integer.MAX_VALUE) {
                cDescription.select(selected);
            }

            cDescription.addModifyListener(new myListener(cDescription));
            tEditors[3].minimumWidth = cDescription.getSize().x;
            tEditors[3].setEditor(cDescription, item, 3);
//------------------------------------------------------------------------------------              
            bEditDescr = new Button(mt, SWT.NONE);
            bEditDescr.setText("e");
            bEditDescr.addSelectionListener(new SelectionAdapter() {
                public void widgetSelected(SelectionEvent e) {
                    new EditDescriptions(parent, contentProvider);
                }
            });
            tEditors[4].minimumWidth = bEditDescr.getSize().x;
            //tEditors[4].minimumWidth = BUT_WIDTH;
            tEditors[4].setEditor(bEditDescr, item, 4);

            tPrice = new Text(mt, SWT.NONE);
            tPrice.setText(d2e.get(edit)[5]);
            tPrice.setBackground(green);
            tPrice.addModifyListener(new myListener(tPrice));
            tEditors[5].setEditor(tPrice, item, 5);
//------------------------------------------------------------------------------------              
            cUnit = new Combo(mt, SWT.NONE);
            cUnit.setBackground(green);
            selected = Integer.MAX_VALUE;
            for (int i = 1; i < units.getQueryRowCount(); i++) {
                cUnit.add(units.getQueryData()[i][2].toString());
                if (units.getQueryData()[i][2].toString().trim().equals(d2e.get(edit)[6].trim())) {
                    selected = i - 1;
                }
            }
            if (selected != Integer.MAX_VALUE) {
                cUnit.select(selected);
            }

            cUnit.addModifyListener(new myListener(cUnit));
            tEditors[6].minimumWidth = cUnit.getSize().x;
            tEditors[6].setEditor(cUnit, item, 6);
//------------------------------------------------------------------------------------
            bEditUnits = new Button(mt, SWT.NONE);
            bEditUnits.setText("e");
            bEditUnits.addSelectionListener(new SelectionAdapter() {
                public void widgetSelected(SelectionEvent e) {
                    new EditUnits(parent, contentProvider);
                }
            });
            tEditors[7].minimumWidth = bEditUnits.getSize().x;
            //tEditors[7].minimumWidth = BUT_WIDTH;
            tEditors[7].setEditor(bEditUnits, item, 7);

            tMultip = new Text(mt, SWT.NONE);
            tMultip.setText(d2e.get(edit)[7]);
            tMultip.setBackground(green);
            tMultip.addModifyListener(new myListener(tMultip));
            tEditors[8].setEditor(tMultip, item, 8);

            tPrices = new Text(mt, SWT.NONE);
            tPrices.setText(d2e.get(edit)[8]);
            tPrices.setBackground(green);
            tPrices.addModifyListener(new myListener(tPrices));
            tEditors[9].setEditor(tPrices, item, 9);

            tStart = new Text(mt, SWT.NONE);
            tStart.setText(d2e.get(edit)[9]);
            tStart.setBackground(green);
            tStart.addModifyListener(new myListener(tStart));
            tEditors[10].setEditor(tStart, item, 10);

            tStop = new Text(mt, SWT.NONE);
            tStop.setText(d2e.get(edit)[10]);
            tStop.setBackground(green);
            tStop.addModifyListener(new myListener(tStop));
            tEditors[11].setEditor(tStop, item, 11);

        } else { //variables

            tEditors = new TableEditor[12];
            for (int i = 0; i < tEditors.length; i ++) {
                tEditors[i] = new TableEditor(mt);
                tEditors[i].horizontalAlignment = SWT.LEFT;
                tEditors[i].grabHorizontal = true;
            }

            tVariable = new Text(mt, SWT.NONE);
            tVariable.setText(d2e.get(edit)[0]);
            tVariable.setBackground(green);
            tVariable.addModifyListener(new myListener(tVariable));
            tEditors[0].setEditor(tVariable, item, 0);

            tStart = new Text(mt, SWT.NONE);
            tStart.setText(d2e.get(edit)[1]);
            tStart.setBackground(green);
            tStart.addModifyListener(new myListener(tStart));
            tEditors[1].setEditor(tStart, item, 1);

            tStop = new Text(mt, SWT.NONE);
            tStop.setText(d2e.get(edit)[2]);
            tStop.setBackground(green);
            tStop.addModifyListener(new myListener(tStop));
            tEditors[2].setEditor(tStop, item, 2);

            tWeekdays = new Text(mt, SWT.NONE);
            tWeekdays.setText(d2e.get(edit)[3]);
            tWeekdays.setBackground(green);
            tWeekdays.addModifyListener(new myListener(tWeekdays));
            tEditors[3].setEditor(tWeekdays, item, 3);

            tDay_tariff_id = new Text(mt, SWT.NONE);
            tDay_tariff_id.setText(d2e.get(edit)[4]);
            tDay_tariff_id.setBackground(green);
            tDay_tariff_id.addModifyListener(new myListener(tDay_tariff_id));
            tEditors[4].setEditor(tDay_tariff_id, item, 4);

            tType = new Text(mt, SWT.NONE);
            tType.setText(d2e.get(edit)[5]);
            tType.setBackground(green);
            tType.addModifyListener(new myListener(tType));
            tEditors[5].setEditor(tType, item, 5);

            tSubgroup_id = new Text(mt, SWT.NONE);
            tSubgroup_id.setText(d2e.get(edit)[6]);
            tSubgroup_id.setBackground(green);
            tSubgroup_id.addModifyListener(new myListener(tSubgroup_id));
            tEditors[6].setEditor(tSubgroup_id, item, 6);

            tId = new Text(mt, SWT.NONE);
            tId.setText(d2e.get(edit)[7]);
            tId.setBackground(green);
            tId.addModifyListener(new myListener(tId));
            tEditors[7].setEditor(tId, item, 7);

            tStart2 = new Text(mt, SWT.NONE);
            tStart2.setText(d2e.get(edit)[8]);
            tStart2.setBackground(green);
            tStart2.addModifyListener(new myListener(tStart2));
            tEditors[8].setEditor(tStart2, item, 8);

            tPrice = new Text(mt, SWT.NONE);
            tPrice.setText(d2e.get(edit)[9]);
            tPrice.setBackground(green);
            tPrice.addModifyListener(new myListener(tPrice));
            tEditors[9].setEditor(tPrice, item, 9);

//------------------------------------------------------------------------------------              
            cUnit = new Combo(mt, SWT.NONE);
            cUnit.setBackground(green);
            selected = Integer.MAX_VALUE;
            for (int i = 1; i < units.getQueryRowCount(); i++) {
                cUnit.add(units.getQueryData()[i][2].toString());
                if (units.getQueryData()[i][2].toString().trim().equals(d2e.get(edit)[10].trim())) {
                    selected = i - 1;
                }
            }
            if (selected != Integer.MAX_VALUE) {
                cUnit.select(selected);
            }

            cUnit.addModifyListener(new myListener(cUnit));
            tEditors[10].minimumWidth = cUnit.getSize().x;
            tEditors[10].setEditor(cUnit, item, 10);
//------------------------------------------------------------------------------------

            bEditUnits = new Button(mt, SWT.NONE);
            bEditUnits.setText("e");
            bEditUnits.addSelectionListener(new SelectionAdapter() {
                public void widgetSelected(SelectionEvent e) {
                    new EditUnits(parent, contentProvider);
                }
            });
            tEditors[11].minimumWidth = BUT_WIDTH;
            tEditors[11].setEditor(bEditUnits, item, 11);

        }

    }

    public ArrayList<String> getData() {

        ArrayList<String> out = new ArrayList<String>();

        if (isConstant) {

            out.add(tConstant.getText()); //0
            out.add(tType.getText()); //1
            out.add(d2e.get(edit)[2]); //2
            out.add(tId.getText()); //3
            out.add(cDescription.getText()); //4
            out.add(tPrice.getText()); //5
            out.add(cUnit.getText()); //6
            out.add(tMultip.getText()); //7
            out.add(tPrices.getText()); //8
            out.add(tStart.getText()); //9
            out.add(tStop.getText()); //10

        } else {

            out.add(tVariable.getText()); //0
            out.add(tStart.getText()); //1
            out.add(tStop.getText()); //2
            out.add(tWeekdays.getText()); //3
            out.add(tDay_tariff_id.getText()); //4 
            out.add(tType.getText()); //5
            out.add(d2e.get(edit)[6]);  //6
            out.add(tSubgroup_id.getText());  //7
            out.add(tId.getText()); //8
            out.add(tStart2.getText()); //9
            out.add(tPrice.getText()); //10
            out.add(cUnit.getText()); //11

        }

        return out;

    }

    public int getIndex() {

        return edit;

    }

    class myListener implements ModifyListener {

        Text txt;
        Combo cmb;

        Color mod = new Color(parent.getDisplay(), 245, 149, 86);

        public myListener(Text text) {

            txt = text;

        }

        public myListener(Combo combo) {

            cmb = combo;

        }

        @Override
        public void modifyText(ModifyEvent arg0) {
            // TODO Auto-generated method stub

            if (cmb != null)
                cmb.setBackground(mod);

            if (txt != null)
                txt.setBackground(mod);
        }
    }

}

} 
```

# c++ - OpenGL - 让着色器编译的问题

> ID：11606244
> 
> 赞同：4
> 
> 时间：2012-07-23T03:48:18.143
> 
> 标签：c++, opengl, shader

最后隔离了我的着色器无法使用它无法编译的问题。

这是我的着色器加载例程。第一部分在着色器中读取：

```
void GLSLShader::LoadFromFile(GLenum whichShader, const string filename)
{   
    ifstream fp;

    // Attempt to open the shader
    fp.open(filename.c_str(), ios_base::in);

    // If the file exists, load it
    if(fp) 
    {
        // Copy the shader into the buffer
        string buffer(std::istreambuf_iterator<char>(fp), (std::istreambuf_iterator<char>()));

        // Debug output to show full text of shader
        errorLog.writeSuccess("Shader debug: %s", buffer.c_str());

        LoadFromString(whichShader, buffer);
    } 
    else 
    {
        errorLog.writeError("Could not load the shader %s", filename.c_str());
    }
} 
```

将其加载到字符串中后，将其发送以进行加载：

```
void GLSLShader::LoadFromString(GLenum type, const string source) 
{
    // Create the shader
    GLuint shader = glCreateShader(type);

    // Convert the string
    const char * ptmp = source.c_str();
    glShaderSource(shader, 1, &ptmp, NULL);

    // Compile the shader
    glCompileShader(shader);

    // Check to see if the shader has loaded
    GLint status;
    glGetShaderiv (shader, GL_COMPILE_STATUS, &status);
    if (status == GL_FALSE) {
        GLint infoLogLength;
        glGetShaderiv (shader, GL_INFO_LOG_LENGTH, &infoLogLength);
        GLchar *infoLog= new GLchar[infoLogLength];
        glGetShaderInfoLog (shader, infoLogLength, NULL, infoLog);
        errorLog.writeError("could not compile: %s", infoLog);
        delete [] infoLog;
    }
    _shaders[_totalShaders++]=shader;
} 
```

我得到调试输出“无法编译：”并且错误缓冲区似乎是空的。在过去的 3 天里，这一直让我发疯。有人看到我的错误吗？

以下是非常简单的着色器：

```
#version 330

layout (location = 0) in vec4 position;
layout (location = 1) in vec4 color;

smooth out vec4 theColor;

void main()
{
    gl_Position = position;
    theColor = color;
}

#version 330

smooth in vec4 theColor;

out vec4 outputColor;

void main()
{
    outputColor = theColor;
} 
```

## 更新

看起来由于某种原因，内存中着色器的末尾添加了废话。我不确定为什么。我已经尝试将它读入一个 char* 和一个字符串。这是输出：

```
<-!-> Shader: #version 330

layout (location = 0) in vec4 position;
layout (location = 1) in vec4 color;

smooth out vec4 theColor;

void main()
{
    gl_Position = position;
    theColor = color;
}
n
<-!-> Shader: #version 330

smooth in vec4 theColor;

out vec4 outputColor;

void main()
{
    outputColor = theColor;
}
nts/Resources 
```

注意第一个着色器末尾的“n”和第二个着色器末尾的“nts/Resources”。知道为什么吗？

## 另一个更新

最后的废话是由最后的一条额外的线引起的。我删除了它，它又恢复了输出正确的着色器文本。编译仍然没有运气。

我在这里不知所措。Superbible 有大量未优化的库，我不需要。Mac 似乎没有一个该死的像样的着色器编译器。我真的不介意它有多简单。它只需要与着色器一起工作。有人有例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:28:24.837

您在调用`glShaderSource`时未提供源数组中每个字符串的长度。因此，假定提供的字符串以空字节 ('\0') 终止。您将文件读入内存的方式不会以额外的空字节终止着色器源。因此，GLSL 编译器会将着色器源的末尾以外的内容读取到随机内存中，并在其中找到……垃圾。

解决方案：添加终止空字节，或提供着色器文本长度参数。

# asp.net - 在 MVC 3 应用程序的单独选项卡中跟踪状态

> ID：11606246
> 
> 赞同：0
> 
> 时间：2012-07-23T03:48:21.577
> 
> 标签：asp.net, asp.net-mvc-3, state

基本上我需要能够做的事情，我已经知道这不是一个好主意，我已经竭尽全力不这样做，但我需要拥有它，因此选项卡式浏览器中的每个单独的选项卡都被视为一个单独的选项卡会议; 用户需要能够在不同的选项卡中打开相同的页面，但在不同的上下文中。

我花了无数个小时来解决这个问题，并归结为这样一个事实，为了让它工作，你必须有一个嵌入到隐藏字段中的钥匙，或者在路线上，或类似的东西。

话虽如此，您对如何实现这一目标有什么好主意吗？

# excel - 如何在行数不等的水平和垂直数据中进行 COUNTIFS？

> ID：11606247
> 
> 赞同：1
> 
> 时间：2012-07-23T03:48:25.413
> 
> 标签：excel, formula, excel-formula

如何使用 Excel 函数计算在水平和垂直位置均符合标准的数据的 3、4、5 等的出现次数？

```
A                           B       C       D
Trainer                    Q1      Q2      Q3
Terry Wong                  5       4       4
Terry Wong                  4       4       4
Terry Wong                  4       4       2
Terry Wong                  3       3       2
Maggie Ngeow Nyuk Chin      3       4       4
Maggie Ngeow Nyuk Chin      4       4       4
Maggie Ngeow Nyuk Chin      4       4       4 
```

我试过了

```
=COUNTIFS(A1:A8,"=Terry Wong",B:D,"=4") 
```

但是其中有一个错误，因为 Excel 需要两个范围条件才能具有相等的行数。

你能建议一个解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:30:12.407

以防万一它对任何人都有用，这里有一个公式将返回 Terry Wong 的 4 总数：

```
=SUMPRODUCT(--(A2:A8="Terry Wong"),(B2:B8=4)+(C2:C8=4)+(D2:D8=4)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:28:03.213

你的意思是你想这样做：

```
=COUNTIFS(A2:A8,"Terry Wong",C1:C7,4,D1:D7,4,E1:E7,4) 
```

# jquery - jQuery：在不同的滚动位置触发不同的事件

> ID：11606248
> 
> 赞同：1
> 
> 时间：2012-07-23T03:48:43.997
> 
> 标签：jquery

我无法触发两个事件——一个在一个滚动位置，一个在另一个。
正如您将在下面看到的，我试图`div` `#one`在用户到达时出现`300px`，而`div` `#two`在之后出现`600px`。

CSS：

```
 <style type='text/css'>
        body {
            height:5000px;   
        }

        #base {
            position:fixed;
            width:300px;
            height:250px;
            margin-left:100px;
            margin-top:0;
            background-color:blue;   
            z-index:1;   
        }

        .feature {
            position:fixed;
            width:300px;
            height:250px;
            margin-left:100px;
            }

        #one {
            margin-top:250px;
            background-color:red;  
            z-index:2;    
            }

        #two {
            margin-top:500px;
            background-color:yellow;  
            z-index:3;    
            }

    </style> 
```

JS：

```
 <script type='text/javascript'>
        $(window).load(function(){
            $(document).ready(function(){

                $(document).scroll(function() {

                    var top = $(document).scrollTop();

                    if (top > 300) {
                        $('#one').show();
                    }
                    else if (top > 600) {
                        $('#two').show();
                    } 
                    else {
                        $('.feature').hide();
                    }   

                });
            });
        });

    </script> 
```

HTML：

```
<body>
    <div id="base"></div>
    <div id="one" class="feature"></div>
    <div id="two" class="feature"></div>  
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:10:51.217

我看到的第一个问题是你的 if else 逻辑。如果您的顶部大于 300，它将执行以下操作：

```
$('#one').show(); 
```

但随后将退出条件语句而不检查其他 if 部分。

我创建了一个小提琴来展示如何完成代码以实现您正在寻找的内容：http: [//jsfiddle.net/fGWq5/](http://jsfiddle.net/fGWq5/)

我还启动了两个 div，它们的显示属性设置为 none，因此在滚动事件触发之前它不会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:03:27.913

```
$(window).load(function(){
    $(document).ready(function(){ 
```

`window load`之后触发`document ready`- 所以你嵌套它的方式，你什么都不会发生。

此外，对于您将来可能提出的问题，我建议将问题缩小到某段代码，而不是倾倒所有代码。

# jsf - 禁用或锁定 JSF SelectOneListBox

> ID：11606251
> 
> 赞同：1
> 
> 时间：2012-07-23T03:49:32.717
> 
> 标签：jsf, jakarta-ee

我想禁用 JSF SelectOneListBox 以便用户只能看到，但不能更改选择。当我使用 disabled = "true" 时，用户无法读取选择作为字体颜色并且选择颜色变为灰色。我使用了 readonly="true"，用户仍然可以更改选择。有什么方法可以让用户清楚地看到选择，但不允许更改选择？

# javascript - 当组合框值改变时，显示一个文本框

> ID：11606252
> 
> 赞同：0
> 
> 时间：2012-07-23T03:49:35.053
> 
> 标签：javascript, html

我想知道当我在组合框中选择其他值时如何显示文本框。

例如，当我将组合框的值从现金更改为银行时，它将显示一个文本框，其他人也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:39:29.370

[在这里，我使用http://codebins.com/bin/4ldqpa0](http://codebins.com/bin/4ldqpa0)上的 java 脚本为上述问题完成了垃圾箱

**HTML：**

```
<select id="ChoiceMaker" name="ChoiceMaker">
  <option value="">
    Please choose
  </option>
  <option value="cash">
    Cash
  </option>
  <option value="bank">
    Bank
  </option>
</select>
<div id="cashContainer">
  Cash: 
  <input type="text" id="cash"/>
</div>
<div id="bankContainer">
  Bank: 
  <input type="text" id="cash"/>
</div> 
```

**CSS：**

```
#cashContainer {
  display:none;
}
#bankContainer{
  display:none;
} 
```

**JAVASCRIPT：**

```
var choice_combo = document.getElementById('ChoiceMaker');
choice_combo.onchange = function() {
    switch (this.value.toLowerCase()) {
    case 'cash':
        document.getElementById("bankContainer").style.display = 'none';
        document.getElementById("cashContainer").style.display = 'block';
        break;
    case 'bank':
        document.getElementById("cashContainer").style.display = 'none';
        document.getElementById("bankContainer").style.display = 'block';
        break;

    }
} 
```

演示：[http ://codebins.com/bin/4ldqpa0](http://codebins.com/bin/4ldqpa0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:12:17.357

另一个使用 selectedIndex 的版本

**jQuery**

```
 $(document).ready(function()
  {
    // Set initial state
    $("#cashContainer").hide();
    $("#bankContainer").hide();

    // How it all works
    $("#ChoiceMaker").change(function () {
      $value = $("#ChoiceMaker")[0].selectedIndex;
      // You can also use $("#ChoiceMaker").val(); and change the case 0,1,2: to the values of the html select options elements

      switch ($value)
      {
        case 0:
          $("#cashContainer").hide();
          $("#bankContainer").hide();
          alert("Please make a choice");
          break;
        case 1:
          $("#cashContainer").show();
          $("#bankContainer").hide();
          break;
        case 2:
          $("#cashContainer").hide();
          $("#bankContainer").show();
          break;
      }

    });

  }); 
```

**HTML**

```
 <select id="ChoiceMaker" name="ChoiceMaker">
            <option value="">Please choose</option>
            <option value="cash">Cash</option>
            <option value="bank">Bank</option>
    </select>
    <div id="cashContainer">Cash: <input type="text" id="cash"/></div>
    <div id="bankContainer">Bank: <input type="text" id="cash"/></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:57:29.490

使用 JQuery：

```
$('select#yourID').change(function(){
    $('#textboxID').show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T03:57:54.610

```
$('select').change(function(){
  var val = $(this).val()
  switch (val) {
    case 'Cash':
      $('#cash').show()
      break
    case 'Bank':
      $('#bank').show()
      break
    ...
  }
}) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-23T03:58:09.160

在表格中放置一个文本框并为表格指定一个 id。然后在 onitemchange 事件中调用一个函数。在函数里面写：

```
document.getelementById("tableid").display="none";// for hiding
document.getelementById("tableid").display="block";// for showing 
```

您也可以使用 jQuery 来执行此操作。

# jquery - 如何从我的 tr 元素中获取数据属性的值？

> ID：11606258
> 
> 赞同：1
> 
> 时间：2012-07-23T03:50:47.957
> 
> 标签：jquery

我有以下内容：

```
<tr data-rk="050500" data-pk="0006000" id="row_2"> 
```

我正在尝试获取这样的数据元素的值，但它不起作用。我该怎么做 ？另外，如何获取行的 id 并将其放入变量中？

```
var data-rk = $(this).('data-rk'); 
```

注意 $(this). 当我用它来设置 CSS 时，部分已经工作了。我需要使用 $(this)。因为我想在单击它时连续执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T03:51:53.947

```
var data_rk = $(this).attr('data-rk') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T03:53:17.233

除了使用`.attr`方法，您还可以使用`.data`方法。

```
var data_rk = $(this).data('rk'); 
```

***更新：*** `.data`方法将尝试在您的情况下进行数字转换，所以

```
var data_rk = $(this).data('rk'); // will give you number 6000
var data_rk = $(this).attr('data-rk'); // will give you string '0006000' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T03:53:10.297

```
 var data-rk =  $("#row_2).attr("data-pk"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T03:53:44.647

只要你使用`data-`前缀，你就可以像这样得到它：

```
var rk = $el.data('rk') 
```

# c++ - 如何按列对 QTableView 进行排序？

> ID：11606259
> 
> 赞同：17
> 
> 时间：2012-07-23T03:50:56.193
> 
> 标签：c++, qt, qtableview

我正在使用`QTableView`来显示 QAbstractTableModel：

```
#include <QtGui/QApplication>
#include <QAbstractTableModel>
#include <QTableView>

class TestModel : public QAbstractTableModel
{
public:
    int rowCount(const QModelIndex &parent = QModelIndex()) const
    {
        return 2;
    }
    int columnCount(const QModelIndex &parent = QModelIndex()) const
    {
        return 2;
    }
    QVariant data(const QModelIndex &index, int role) const
    {
        switch (role)
        {
        case Qt::DisplayRole:
        {
            return 4 - index.row() + index.column();
        }
        }
        return QVariant();
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QTableView table;
    TestModel model;
    table.setModel(&model);
    table.setSortingEnabled(true);
    table.sortByColumn(0, Qt::AscendingOrder);
    table.reset();
    table.show();

    return a.exec();
} 
```

![显示的小部件](../Images/2029bb8cd5786d952ae6221915e0ef59.png)

问题是我使用时结果完全相同：

```
table.sortByColumn(0, Qt::AscendingOrder); 
```

或者

```
table.sortByColumn(0, Qt::DescendingOrder); 
```

或者

```
table.sortByColumn(1, Qt::AscendingOrder); 
```

或者

```
table.sortByColumn(1, Qt::DescendingOrder); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-23T05:32:48.033

`QAbstractTableModel`提供了一个空的`sort()`实现。

尝试做

```
TestModel model;
QSortFilterProxyModel proxyModel;
proxyModel.setSourceModel( &model );
table.setModel( &proxyModel ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-15T13:45:34.503

对于那些希望在 Python 中执行此操作的人，这适用于 PySide6。

```
import sys
from PySide6.QtCore import QAbstractTableModel, Qt, QSortFilterProxyModel
from PySide6.QtWidgets import QTableView, QApplication

class TestModel(QAbstractTableModel):

    def __init__(self):
        super().__init__()

    def rowCount(self, index):
        return 2

    def columnCount(self, index):
        return 2

    def data(self, index, role):
        if role == Qt.DisplayRole:
            return 4 - index.row() + index.column()

def main():
    a = QApplication(sys.argv)

    table = QTableView()
    model = TestModel()
    proxyModel = QSortFilterProxyModel()
    proxyModel.setSourceModel(model)
    table.setModel(proxyModel)
    table.setSortingEnabled(True)
    table.sortByColumn(0, Qt.AscendingOrder)
    table.reset()
    table.show()

    sys.exit(a.exec())

if __name__ == "__main__":
    main() 
```

# android - 布局 Android 代码上的动画

> ID：11606266
> 
> 赞同：0
> 
> 时间：2012-07-23T03:51:55.037
> 
> 标签：android, animation, layout

我是一个新手安卓开发者。

**在某些应用程序中，主要是 Iphone 杂志或其他应用程序，它们在每个缩略图新闻上都有特色动画。（当用户点击新闻时，带有缩略图的小文章会放大或拉伸到手机全屏）**

抱歉很难解释，反正就是这个概念。

我不确定这个功能在android中调用了什么。

**已编辑**

例如，我在屏幕中间有一个相对布局。这个相对布局包含一个图像和文本视图组件。

**我想要做的是当用户点击这个布局时，布局变得更大和更大（动画），直到它拉伸手机屏幕。**

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:11:44.080

我没有得到您的要求，但我[在这里](http://www.bogotobogo.com/Android/android19Animation.php)是动画的动画`Layout`示例`frame`。

# ios - 按钮在 iOS 中不播放音频

> ID：11606269
> 
> 赞同：0
> 
> 时间：2012-07-23T03:52:51.397
> 
> 标签：ios, objective-c, playback

我将文件 audio.wav 上传到我的支持文件夹中。

这是我的 PlayAudio.h

```
#import <UIKit/UIKit.h>
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>

@interface PlayAudio : UIViewController {

}

-(IBAction) PlayIt;

@end 
```

这是我的 PlayAudio.m 执行后的命令

```
- (IBAction) PlayIt; {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"audio", CFSTR ("wav"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

} 
```

然后我在我的视图控制器中按住 ctrl 从播放按钮单击到 First Responder 并选择 PlayIt。我看到它与 Touch Up Inside 有关。

出于某种原因，我可以单击按钮，但没有播放。我在 Storyboard 中这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:07:50.790

您可以使用 NSURL 获取 wav 文件的路径并将其转换为 CFURLRef，检查以下代码：

```
SystemSoundID soundID;
NSURL *soundPath = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"audio" ofType:@"wav"]];
if (AudioServicesCreateSystemSoundID ((CFURLRef)soundPath, &soundID) != kAudioServicesNoError) {
     AudioServicesPlayAlertSound(soundID);

} 
```

请注意，如果 iphone 上的静音按钮启用 AudioServicesCreateSystemSoundID 功能将失败（在这种情况下可以使用振动：soundID = kSystemSoundID_Vibrate;）。如果要播放声音而不考虑静音开关，请使用 AVAudioPlayer api。

# java - 匿名类可以访问其封闭类的成员吗？

> ID：11606278
> 
> 赞同：1
> 
> 时间：2012-07-23T03:53:48.050
> 
> 标签：java, class, anonymous

java中的匿名类可以访问其封闭类或定义它的类的成员吗？如果是这样的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T03:58:05.777

是的，这是一个示例：（参考 -[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)）

```
public class Test{
  private int count=10;
  private Thread thread=new Thread(new Runnable(){
    @Override
    public void run(){
       System.out.println(count);
    }
  });
  public static void main(String []args){
      new Test().thread.start();  
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:59:00.290

是的，它可以。只需使用相关成员，或使用显式语法`Outer.this.<member>`。

# php - 致命错误：允许的内存大小为 25165824 字节已用尽（尝试分配 31436096 字节）

> ID：11606282
> 
> 赞同：3
> 
> 时间：2012-07-23T03:54:29.707
> 
> 标签：php, joomla, joomla1.6

我是 Joomla 的新手，我现在正在使用 Joomla 1.6

我遇到的问题是当我尝试通过管理工具上传扩展时，我收到以下错误消息：

```
"Fatal error: Allowed memory size of 25165824 bytes exhausted (tried to allocate 31436096 bytes)
 in C:\AppServ\www\libraries\joomla\filesystem\file.php on line 295" 
```

我已经阅读了一些相关消息，但没有得到解决。`phpinfo`返回一个我认为可能相关的值：

```
1)upload_max_filesize      local value=200; master value=200 
```

我对么？如果是，我该如何更改？（我无法远程访问服务器。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:06:27.167

似乎您的内存已用完。

尝试优化您的代码和查询。

您也可以更改 php ini 设置。

这是一个 .htaccess 解决方案

```
php_value memory_limit 1000M
php_value max_execution_time 6000000 
```

我添加了任意值，只需根据您的要求进行更改。并将此 .htaccess 放在您的项目根文件夹中，以便此更改仅适用于您的项目文件夹...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:28:03.053

Joomla 的内存限制（24 兆字节）相当低，尤其是它的更新程序。我建议至少 32 兆字节，最好是 64 兆字节。

如何更改取决于您的服务器环境。如果您有权访问您的 php.ini，您应该查找包含`memory_limit`并将其值设置为 32M（或 64M 或任何适合您的值）的行

如果您无法访问 php.ini，请尝试通过 .htaccess 文件对其进行设置：

```
php_value memory_limit 1000M 
```

如果这也失败了，您应该联系您的主机。有些具有允许更改此设置的 Web 界面。不幸的是，其他人根本不允许更改它。您唯一的机会是请求您的托管服务商更改其服务器配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T11:12:06.807

试试...把文件的顶部 ini_set('memory_limit', '-1');

# php - 你如何在正则表达式中允许'-'？

> ID：11606284
> 
> 赞同：0
> 
> 时间：2012-07-23T03:54:46.837
> 
> 标签：php, regex

我试图在电话号码的正则表达式中允许“-”，但 - 通常用于范围（例如 AZ）。那么我如何只允许角色呢？我尝试使用 /- 进行转义，但这不起作用。

```
$reg_num = "/[^0-9+ ()]/"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T03:56:22.100

您需要使用反斜杠对其进行转义`\`。所以应该写成`\-`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T03:56:27.997

把它写在最后，而不是两个字符之间的“-”。非常简化的示例： `[0-9-]`将匹配`099-2233-3333`0-9 是一个范围，`-`最后是一个单独的破折号来匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T03:58:35.290

把它放在范围的第一位，比如`[^-0-9+ ()]`. 连字符需要分隔两个字符来定义范围；如果不是（在这种情况下，因为 the`^`也被解释为修饰符，而不是集合中的字符），那么它就像任何其他字符一样只是集合中的一个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T04:02:03.393

使用逃脱`\-`

```
\ 
```

是转义字符！

# maven-2 - war包中不包含传递依赖

> ID：11606285
> 
> 赞同：1
> 
> 时间：2012-07-23T03:54:51.293
> 
> 标签：maven-2, maven-3

战争项目依赖于 com.mycompany:somejarname:1.0。它依赖于 slf4j-log4j12（仅在运行时该 jar 需要）。

打包的战争不包括 slf4j-log4j12-我的理解是它应该被包括在内，因为由于传递依赖：war --> somejarname --> slf4j-log4j12。依赖关系树确实显示了依赖关系，但它不包含在最终的 war 包中。

```
[INFO] +- com.mycompany:somejarname:jar:1.0:compile
[INFO] |  +- common-crypt:common-crypt:jar:1.0:compile
[INFO] |  +- org.apache.axis2:axis2-spring:jar:1.5.1:compile
[INFO] |  +- org.objenesis:objenesis:jar:1.1:compile
[INFO] |  +- org.mockito:mockito-all:jar:1.9.0:compile
[INFO] |  +- org.slf4j:slf4j-log4j12:jar:1.5.6:compile
[INFO] |  \- net.sf.json-lib:json-lib:jar:jdk15:2.4:compile
[INFO] |     \- net.sf.ezmorph:ezmorph:jar:1.0.6:compile 
```

有什么建议么？使用 Maven 3

**更新**：这适用于 Maven 2.2.1，但不适用于 Maven 3.0.4。[Maven 3 中的依赖解析](https://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html#Maven3.xCompatibilityNotes-DependencyResolution)从 2.2.1 更改。

**更新**： Maven 3 中的[依赖树](https://cwiki.apache.org/MAVEN/maven-3x-compatibility-notes.html#Maven3.xCompatibilityNotes-DependencyResolution)功能与 Maven 2.2.1 中的相同，因此上面的树显示 slf4j-log4j12。

> 此外，并非 Maven 2.x 解析 API 的所有部分都可以桥接到 Aether。最值得注意的是用于 mvn dependency:tree 的 maven-dependency-tree 共享组件仍然使用旧的解析代码。因此， mvn dependency:tree 的输出可能与 Maven 本身用于派生项目类路径的实际依赖树不同（有关此类差异的示例，请参见 MSHARED-167）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T09:41:36.850

使用来自 Eclipse Mars（m2e 插件）的 Maven 3.2.5 发现了同样的问题。

**通过使用 Eclipse Mars 默认打包的 Maven 3.3.3**（需要 Java 7 或 8）解决了这个问题。

# objective-c - 正确减去浮点值

> ID：11606293
> 
> 赞同：0
> 
> 时间：2012-07-23T03:56:15.400
> 
> 标签：objective-c, ios, c, floating-point

我正在尝试创建一个值数组。这些值应该是“2.4,1.6,.8,0”。我每一步都减去 0.8。

这就是我的做法（代码片段）：

```
float mean = [[_scalesDictionary objectForKey:@"M1"] floatValue];  //3.2f
float sD = [[_scalesDictionary objectForKey:@"SD1"] floatValue];   //0.8f

nextRegion = mean;
hitWall = NO;
NSMutableArray *minusRegion = [NSMutableArray array];

while (!hitWall) {

    nextRegion -= sD;

if(nextRegion<0.0f){
    nextRegion = 0.0f;
    hitWall = YES;
}

[minusRegion addObject:[NSNumber numberWithFloat:nextRegion]];

} 
```

我得到这个输出：

```
minusRegion = (
    "2.4",
    "1.6",
    "0.8000001",
    "1.192093e-07",
    0
) 
```

我不想要 0.8 和 0 之间令人难以置信的小数字。是否有截断这些值的标准方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:56:21.767

3.2 和 .8 都不能完全表示为 32 位浮点数。最接近 3.2 的可表示数字是 3.2000000476837158203125（十六进制浮点数，0x1.99999ap+1）。最接近 0.8 的可表示数字是 0.800000011920928955078125 (0x1.99999ap-1)。

当从 3.2000000476837158203125 中减去 0.800000011920928955078125 时，精确的数学结果是 2.400000035762786865234375 (0x1.3333338p+1)。此结果也不能完全表示为 32 位浮点数。（您可以在十六进制浮点数中轻松看到这一点。一个 32 位浮点数有一个 24 位有效数。“1.3333338”在“1”中有一位，中间六位中有 24 位，在”8”。）所以结果被四舍五入到最接近的 32 位浮点数，即 2.400000095367431640625 (0x1.333334p+1)。

从中减去 0.800000011920928955078125 得到 1.6000001430511474609375 (0x1.99999cp+0)，这是完全可表示的。（“1”是一位，五个9是20位，“c”有两个有效位。“c”中的低位两位是尾随零，可以忽略。所以有23个有效位.)

从中减去 0.800000011920928955078125 得到 0.800000131130218505859375 (0x1.99999ep-1)，这也是完全可表示的。

最后，从中减去 0.800000011920928955078125 得到 1.1920928955078125e-07 (0x1p-23)。

The lesson to be learned here is the floating-point does not represent all numbers, and it rounds results to give you the closest numbers it can represent. When writing software to use floating-point arithmetic, you must understand and allow for these rounding operations. One way to allow for this is to use numbers that you know can be represented. Others have suggested using integer arithmetic. Another option is to use mostly values that you know can be represented exactly in floating-point, which includes integers up to 2^(24). 所以你可以从 32 开始减去 8，得到 24，然后是 16，然后是 8，然后是 0。这些将是你用于循环控制和继续计算而没有错误的中间值。当您准备好交付结果时，您可以除以 10，产生接近 3.2、2.4、1.6、0.8 和 0 的数字（精确）。这样，您的算术只会在每个结果中引入一个舍入误差，而不是在一次迭代中累积舍入误差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T04:14:21.780

另一种方法是将减法得到的数字乘以 10，然后转换为整数，然后将该整数除以 10.0。

您可以使用 floor 函数 (floorf) 轻松完成此操作，如下所示：

浮动 newValue = floorf(oldVlaue*10)/10;

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T04:31:15.560

您正在查看旧的浮点舍入错误。幸运的是，在您的情况下，它应该很容易处理。只需夹紧：

```
if( val < increment ){
    val = 0.0;
} 
```

虽然，正如[Eric Postpischil 解释如下](https://stackoverflow.com/questions/11606293/properly-subtracting-float-values/11606522#comment15414352_11606522)：

> 以这种方式钳制是一个坏主意，因为有时舍入会导致迭代变量略小于增量而不是略多，并且这种钳制将有效地跳过迭代。例如，如果初始值为 3.6f（而不是 3.2f），步长是 0.9f（而不是 0.8f），那么每次迭代中的值将略低于 3.6、2.7、1.8 和 0.9。此时，钳位将略低于 0.9 的值转换为零，并跳过迭代。

因此，在进行比较时可能需要减去少量。

您应该考虑的一个更好的选择是使用整数而不是浮点数进行计算，然后再进行转换。

```
int increment = 8;
int val = 32;

while( val > 0 ){
    val -= increment;

    float new_float_val = val / 10.0;
}; 
```

# .net - 如何让 ContentControl 捕捉鼠标事件？

> ID：11606297
> 
> 赞同：1
> 
> 时间：2012-07-23T03:56:32.803
> 
> 标签：.net, wpf, user-controls, mouseevent, contentcontrol

如果我设置 ContentControl 的宽度和高度，它不会捕获鼠标事件，例如 mouseleftclick 事件。有没有允许我这样做的财产？

```
<Border Width="19" Height="19" BorderBrush="Gray" BorderThickness="1" MouseDown="OnLayerEditedMouseDown">
    <ContentControl Width="19" Height="19">
        <Image                                  
            Width="16"
            Height="16"
            Source="../../Resources/Images/LayersViewer/pencil2.png"
            Visibility="{Binding IsEdited, Converter={StaticResource BoolToVisibility}}">
        </Image>
    </ContentControl>
</Border> 
```

如果现在可见，我可以在 Border 和 Image 上捕获事件。如果内容控件没有任何可见内容，则主要问题是它不会捕获任何事件。我可以让内容控件成为可视树的一部分，还是必须以任何方式在其中放入一些东西（例如空图像）？

我已经通过这个解决方案解决了这个问题：

```
<Grid Margin="0">
<Image                                  
    Width="16"
    Height="16"
    Source="../../Resources/Images/LayersViewer/eye.png"
    Visibility="{Binding IsVisible, Converter={StaticResource BoolToVisibility}}"
    Panel.ZIndex="1"
    >
</Image>
<Image                                  
    Width="16"
    Height="16"
    Source="../../Resources/Images/LayersViewer/empty.png"                                          
    Panel.ZIndex="0"
    >
</Image>
</Grid> 
```

这不是我想要的，但总比没有好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:26:21.910

```
<ContentControl Width="200" Height="200" Background="Black" MouseLeftButtonDown="ContentControl_MouseLeftButtonDown">
        <ContentControl.Content>
            <Border  Width="16" Height="16" Background="White">
                <Image                                  
                    Source="../../Resources/Images/LayersViewer/pencil2.png"
                    Visibility="{Binding IsEdited, Converter={StaticResource BoolToVisibility}}">
                </Image>
            </Border>
        </ContentControl.Content>
    </ContentControl> 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:05:52.900

嗨试试这个及其工作

```
 <ContentControl Width="19" Height="19">
        <ContentControl.Content>
            <Image                                  
                Width="16"
                Height="16"
                Source="../../Resources/Images/LayersViewer/pencil2.png"
                Visibility="{Binding IsEdited, Converter={StaticResource BoolToVisibility}}">
            </Image>
        </ContentControl.Content>
    </ContentControl> 
```

我希望这将有所帮助。

# ruby-on-rails - rails g bootstrap：在 Rails 3.2.6 上安装错误

> ID：11606301
> 
> 赞同：1
> 
> 时间：2012-07-23T03:57:11.610
> 
> 标签：ruby-on-rails, twitter-bootstrap-rails

我找不到我正在寻找的答案，即使类似的问题已经被回答了很多次。

运行 rails 命令“rails g bootstrap:install”时出现错误“找不到生成器 bootstrap:install”。

我正在使用 rails 3.2.6 版，并且我的所有其他 gem 都是最新的。

我检查了我的生成器列表，但没有看到“引导”生成器。我不知道从这里去哪里。

任何帮助是极大的赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T05:19:54.853

您可能需要先运行`bundle install`，以确保已安装 gem。

# sharepoint - 功能在 Sharepont2010 中不起作用

> ID：11606303
> 
> 赞同：1
> 
> 时间：2012-07-23T03:57:25.057
> 
> 标签：sharepoint, sharepoint-2010

我在一个网站集中创建了一个网站栏。我创建了另一个新网站集。我的意图是，在不手动创建网站栏的情况下，我创建了使用自定义 C# 程序添加该网站栏的功能。安装该功能并激活。但我的功能无法正常工作。在**网站集功能**中，该功能与名称一起显示。但是网站栏没有添加。可能是什么问题。需要为此启动任何服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:38:18.313

只需使用命令提示符或在 IIS 向导中重置 IIS 一次。 **iisreset** 这将解决您的问题。

# mysql - 如何找到 Amazon RDS 生成的自动 S3 备份的位置？

> ID：11606307
> 
> 赞同：6
> 
> 时间：2012-07-23T03:57:38.933
> 
> 标签：mysql, amazon-s3, amazon-web-services, database-backups, amazon-rds

我读过 Amazon RDS 会自动将您的数据库备份到 S3。我想知道如何才能真正看到这些备份及其内容？

我想看到它们的原因是：

1.  我很偏执，是服务的新手，并且没有经历过不知道备份过程实际上会起作用的情况。
2.  我读到如果您的某些表是 MyISAM，则备份不起作用。也就是说，我需要让我的所有表都是 InnoDB 而不是两者的混合才能生成 s3 备份。

有没有人有这方面的更多信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T14:48:48.700

不，您无法访问 RDS 使用的 S3 存储桶。如果您想确认备份是否有效，您可以通过 RDS 控制台恢复到某个时间点。这将创建一个使用该时间点备份的新 RDS 实例。

# bash - 如何将函数的返回值存储在变量中？

> ID：11606316
> 
> 赞同：0
> 
> 时间：2012-07-23T03:58:25.377
> 
> 标签：bash

我很确定这是一个非常基本的问题，但是尝试了很长时间后我无法解决。

如何将函数的返回值存储在变量中？

我正在尝试执行[iconv](http://pubs.opengroup.org/onlinepubs/009695399/functions/iconv.html)功能。我试过这个：

**my_var=$(iconv -f UTF-8 -t UTF-8 < sample-feed-utf16.xml > con_sample-feed-utf16.xml)**

函数执行，但返回值不存储在`my_var`. 谁能帮我这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:01:14.643

您正在将输出重定向到一个文件，因此不会有任何内容进入变量。

如果要存储退出代码，可以这样做：

```
iconv -f UTF-8 -t UTF-8 < sample-feed-utf16.xml > con_sample-feed-utf16.xml
my_var=$? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T04:05:31.450

如果你这样做：

```
my_var=$(shell command) 
```

然后 shell 命令的标准输出将存储在`my_var`. 在您的示例中，由于您将 shell 命令的输出重定向到文件，因此没有输出要存储在`my_var`.

此外，shell 命令会向 shell 返回一个整数值（退出代码）以指示执行未/成功。您可以存储此值：

```
iconv -f UTF-8 -t UTF-8 < sample-feed-utf16.xml > con_sample-feed-utf16.xml
my_var=$?
[[ my_var -eq 0 ]] && echo success 
```

# project-management - 有什么比电子邮件更好的与他人协作的工具？

> ID：11606326
> 
> 赞同：0
> 
> 时间：2012-07-23T04:00:01.127
> 
> 标签：project-management, collaboration

我是一名开发人员，需要与 UI 设计师和项目经理合作。所以我们需要分享很多文件，项目经理会分配给我有关项目的任务。除了电子邮件和保管箱，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:11:16.473

您可以查看其他各种在线协作工具。我在工作中使用 Clinked (http://clinked.com/)，虽然我们使用付费版本，但有一个免费版本可供 5 个或更少的用户使用，所以也许你可以检查一下？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:22:16.057

我和我的团队一直在使用[Wrike](https://www.wrike.com/)快一年了，我不得不说它在合作方面非常整洁。我们必须处理大量文档和编辑批准迭代，而 Wrike 让这一切变得非常简单。基本上，团队中的每个成员只需打开一个需要的文档，对其进行编辑、保存，然后它会自动作为新版本上传，因此无需下载，也无需同一文档的多个版本。每次发生更改时，它都会向我的电子邮件发送通知，因此很容易跟踪任务的进展情况。它还与 Google 文档集成，因此您可以选择更适合您需求的任何内容。我个人喜欢它的电子邮件集成（它将我的电子邮件转换为任务，我只需将 Wrike 添加到电子邮件的 CC 中，它将被传输到应用程序中）和 Outlook 插件，因为它有帮助将我们所有的数据保存在一个地方。它也非常适合我们的任务管理需求。尤其是它的 Activity Stream 可以很容易地保持更新任务的变化并讨论任何即将出现的问题。

希望你也会发现它有用！让我知道后来的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:45:21.293

您可能会发现这个 43 种项目管理软件替代品的列表很有用：http: [//blog.timedoctor.com/2011/02/02/43-project-management-software-alternatives](http://blog.timedoctor.com/2011/02/02/43-project-management-software-alternatives)

我个人最喜欢的是 Basecamp、Time Doctor 和 Dropbox。这些程序在很多方面帮助了我的团队，尤其是生产力。我相信你也会在那里找到你的。这是我能得到的最有用和最全面的清单。

# c# - System.Threading.Timer 中的回调过程中的 FOR LOOP 导致它仅触发一次

> ID：11606332
> 
> 赞同：2
> 
> 时间：2012-07-23T04:01:10.507
> 
> 标签：c#

目前我在 Callaback 过程中有一个 For 循环：

```
private void InitializeComponent()
{

var timer = new System.Threading.Timer(TimerProc, null, 60000, 60000);

}

public void TimerProc(object state)
{

    for (int i = 0; i <= 6; i++)
    {
        //Do something here
    }

} 
```

TimerProc 只触发一次，尽管我将它设置为每 60000 毫秒重复一次。看起来循环内的操作在第一次完成后不再执行。

但是，如果我删除 For 循环并执行一些其他操作，例如打印到控制台行或写入文本文件，则 TimerProc 会按预期重复。

为什么会出现这种情况，为什么回调过程中的循环会在初始触发后阻止它执行？

我通过使用 while(true) 无限循环并使用 Thread.Timer 在 x 毫秒后暂停进程来解决问题。

我的带有 while 循环的新可视化代码如下所示：

```
private void InitializeComponent()
{

processthread = new Thread(new ThreadStart(DoSomething));
processthread.Start();

}

public void DoSomething()

{

  while(true)
  {
    for (int i = 0; i <= 6; i++)
    {
           //do something here

    }
    Thread.Sleep(5000);
  }

} 
```

我只想知道为什么 System.Thread.Timer 中的回调过程不能处理循环。

干杯，

斯坦利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:06:08.307

从您包含在问题中的代码来看，您*似乎*没有存储对`timer`任何地方的引用。我可能是错的，但我的猜测是您没有看到重复的回调，因为计时器对象本身已被垃圾收集。将对计时器的引用分配给寿命更长的变量（即字段），我敢打赌这将解决问题。

换句话说，我认为`for`循环与您所看到的没有任何关系（我不是在质疑证据，只是提出这是巧合而已）。

为了检验我的假设，我创建了以下非常简单的 Windows 窗体应用程序：

```
using System;
using System.Threading;
using System.Windows.Forms;

using Timer = System.Threading.Timer;

public class Program
{
    static void Main(string[] args)
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new TestForm());
    }
}

class TestForm : Form
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        var timer = new Timer(TimerProc, null, 1000, 1000);
    }

    public void TimerProc(object state)
    {
        for (int i = 0; i <= 6; i++)
        {
            Console.WriteLine(DateTime.Now.ToLongTimeString());
        }
    }
} 
```

我看到当前时间在控制台上打印了三十多秒；然后它停止了。

相反，以下更改似乎可以解决该问题。

```
class TestForm : Form
{
    // Note: declare a field to store a reference to the timer.
    Timer timer;

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        this.timer = new Timer(TimerProc, null, 1000, 1000);
    }

    // ...
} 
```

进行上述更改后，我再次启动程序，计时器继续触发了几分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:06:19.613

更新：在与**Dan Tao**讨论后，由于缺乏参考，这可能是 GC 问题。添加参考解决了这个问题[取消注释第 8 行和第 20 行]。问题中“for循环”的存在可能会导致收集 - 可能是通过生成垃圾来解释为什么在这个特定情况下删除它并用更简单的 LOC 替换它对你有用。

```
using System;
using System.Threading;

namespace SO_TimerTroubles
{
    class Program
    {
        //static Timer t;
        static void Main(string[] args)
        {
            StartTimer();  //Works fine.
            Console.WriteLine("Press Enter to BeginGC");
            Console.ReadLine();
            GC.Collect();  //Timer stops.
            Console.ReadLine();
        }

        public static void StartTimer()
        {
            //t =
            new Timer(TimerProc, null, 1000, 1000);
        }

        static public void TimerProc(object state)
        {
            Console.WriteLine("Timer Called");
            for (int i = 0; i < 5; i++)
            {
            }
        }
    }
} 
```

[原始答案] 以下工作正常 - 我怀疑错误在其他地方。

```
class Program
    {
        static void Main(string[] args)
        {

            var timer = new Timer(TimerProc, null, 1000, 1000);

            Console.ReadLine();
        }

        static public void TimerProc(object state)
        {
            Console.WriteLine("Called");
            for (int i = 0; i <= 6; i++)
            {
                Console.WriteLine(i);
            }

        }
    } 
```

# vba - VBA将新对象分配给变量？

> ID：11606334
> 
> 赞同：3
> 
> 时间：2012-07-23T04:01:14.420
> 
> 标签：vba, object, variable-assignment

我正在尝试从 VBA 中的模块类创建新对象，但我遇到了一点困难。两行赋值代码，看起来一样，但结果不同。

![在此处输入图像描述](../Images/832783d28fd37ece8ccec56c89a15309.png)

我收到一条错误消息：

![在此处输入图像描述](../Images/2ddda9eb1b83ba2613f919599af6c9a3.png)

之后，我改用（1）而不是（2），错误得到修复。

![在此处输入图像描述](../Images/28df9c837d4f8cce8dbf70b178341077.png)

但我不明白；**为什么他们会有这种差异？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:06:09.580

`Dim`声明一个变量，`Set`实例化它。

因此，始终拥有`Dim`before是一个好习惯`Set`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T04:03:42.420

在 VBA 中，您必须使用 Dim 关键字声明变量，然后使用 As 关键字定义它们的数据类型。这就是它的语法的工作原理。作为一般形式：

```
Dim <variableName> As <dataType> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T11:22:04.370

如果您不使用`Dim`来声明变量的特定类型，您可以随后将变量更改为另一种类型，例如之后；

`set aosh = new AOSHRatioQuery`

您可以将变量更改为字符串；

`aosh = "A pint of milk"`

由于该`sendAsyncRequest`方法期望 a`AOSHRatioQuery`作为其第二个参数并且 VBA 编译器知道它不能保证该`aosh`变量实际上将包含该类型的实例，因此违反了类型安全性并引发了*类型不匹配*错误以防止`sendAsyncRequest`接收它无法解释的垃圾。

显式键入 with`Dim aosh as new AOSHRatioQuery`告诉编译器`aosh`确保始终是`AOSHRatioQuery`实例或`Nothing`（尝试将其分配给另一种类型将引发错误），因此可以安全地传递它。

# sql-server-2008-r2 - SQL Server 2008 R2 - 审核日志 - 理解层次结构

> ID：11606341
> 
> 赞同：0
> 
> 时间：2012-07-23T04:02:26.327
> 
> 标签：sql-server-2008-r2, audit

我已经搜索并没有找到对标准 SQL2008 审计日志输出基础的体面解释：[SQL Server 审计记录](http://msdn.microsoft.com/en-us/library/cc280545%28v=sql.100%29.aspx)。

所以首先..任何人都知道这样的链接。

我不得不在 SQL Server 2008 R2 数据库上设置审计，以基于数据库以**dbo**为原则捕获执行、插入、更新、删除。*我对审计的设置没有任何问题*。这将返回预期的大量数据。不清楚的是如何确定输出中的层次结构。我需要隔离哪个是父对象。我想知道“会话 ID”是否可以与其他东西一起使用。所有序列号都是 1。

总体目标是删除使用 dbo 的 db 访问并改为创建角色。显然，我只想将权限分配给实际需要的对象。

所以主要问题：有人知道如何确定审计日志中的父对象吗？

谢谢各位。

---额外：我试图确定首先调用哪些对象，从而确定设置执行权限的级别。例如，当执行一个存储过程然后插入到表中，或在审计中执行函数或其他存储过程时，所有“操作”都存储从初始 sp exec 到所有表插入等。但权限仅在初始 sp 上不需要所有其他报告的对象（忽略动态 sql 东西 atm）。因此，我希望确定“顶级”级别，以便将权限分配给新角色。数据库中有很多对象，为了捕获绝大多数权限，已在用户群减少的 UAT 站点上设置了审核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:40:02.927

在这种情况下，不确定“层次结构”或“父对象”是什么意思。审计条目之间实际上没有任何关系，除了它们的日期/时间指示的顺序。您是否试图确定访问的表？PS 我在 www.ultimatewindowssecurity.com/sqlserver 上写了很多关于 SQL 审计的文章。

如果我理解它，您想知道 dbo 正在访问哪些表、视图、存储过程。那是对的吗？

# javascript - 如何在 Jquery mobile 中链接内部页面？

> ID：11606354
> 
> 赞同：0
> 
> 时间：2012-07-23T04:04:27.007
> 
> 标签：javascript, jquery, jquery-mobile

如果我想使用 jquery 或 javascript 单击按钮链接两个内部页面该怎么办...我可以使用`<a href=#nextPage">`HTML 来完成，但我想要一个脚本来完成它！我现在正在做的是：

```
<!-- first page-->
<div data-role="page" id="firstPage">
<div data-role="header"> 
<h1>Test page</h1>
</div>
<div data-role="content">
<p>this page will link internal pages using # </p>
<a href="#nextPage" data-role="button">change to next page</a>
</div>
</div>

<!-- second page-->
<div data-role="page" id="nextPage">
<div data-role="header"> 
<h1>Test page 2 </h1>
</div>
<div data-role="content">
<p>this page will  appear after you click the button on first page. </p>
</div>
</div> 
```

这很好，但我需要的是一个脚本来链接它们。就像在我的应用程序中一样，只有在满足某些条件后，我才需要在单击按钮时更改页面。但我不知道该怎么做...

------------编辑------------ 我找到了一种方式 window.location.href="#nextPage" 这就是它的完成方式。谢谢大家的努力。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:13:09.423

您可以将`onclick`处理程序添加到`a`标签：

***JS***

```
function navigate() {
    if (condition) {
        $.mobile.changePage("#nextPage");
    }
} 
```

***HTML***

```
<a href="#" onclick="navigate()" data-role="button">change to next page</a> 
```

或者你可以这样做：

***JS***

```
$(document).ready(function() {
    $(".nav-nextPage").click(function() {
        if (condition) {
            $.mobile.changePage("#nextPage");
        }
    });
}); 
```

***HTML***

```
<a href="#" class="nav-nextPage" data-role="button">change to next page</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:12:30.157

jQuery Mobile，[页面剖析](http://jquerymobile.com/demos/1.0a3/docs/pages/docs-pages.html)

向下滚动到**本地、内部链接的“页面”**

# c# - 在 DataGridView 中获取已删除行的索引

> ID：11606355
> 
> 赞同：1
> 
> 时间：2012-07-23T04:04:45.327
> 
> 标签：c#, winforms, datagridview

我通过选择它并按*Delete 删除*了 DataGridView 中的一行，并希望获取该行的索引。我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:20:36.613

`UserDeletingRow`您可以通过处理事件在删除行之前获取索引。

```
 dataGridView1.UserDeletingRow += (sa, ea) =>
  {
    MessageBox.Show(ea.Row.Index.ToString())
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:08:06.687

可以获取当前选中项的选中索引：

```
int index = DataGrid1.SelectedIndex; 
```

您可以在删除项目之前执行此操作，您将知道索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-16T12:12:40.847

StackOverflow 中的大多数答案都提到`UserDeletedRow`了一个事件来处理和获取用户删除的行索引。此事件仅在删除该行后触发。正确的必须是`UserDeletingRow`，在此事件中，您可以在丢失已删除的行之前执行某些操作。现在如何获取行索引？使用以下代码的答案

```
private void dataGridView1_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
    {
        int tmp = e.Row.Index;
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-01-15T16:53:15.667

也许这会对你有所帮助。

```
private void EvtBindingNavigatorDeleteItemClick(object sender, System.EventArgs e)
{
   ToolStripButton MyToolStripButton = (ToolStripButton)sender;
   CustomBindingNavigator MyCustomBindingNavigator = 
   (CustomBindingNavigator)MyToolStripButton.GetCurrentParent();
   CustomDataGridView MyDataGridView = GetDataGridView(MyCustomBindingNavigator);
   int RowIndexDelete = -1;
   BindingSource MyBindingSource = MyCustomBindingNavigator.BindingSource;
   DataTable MyDataTable = (DataTable)MyBindingSource.DataSource;
   foreach ( DataRow MyDataRow in MyDataTable.Rows)
   {
    if (MyDataRow.RowState == DataRowState.Deleted)
        RowIndexDelete = MyDataTable.Rows.IndexOf(MyDataRow);
   }
} 
```

# jquery - 如何在 flexigrid 中添加工具提示？

> ID：11606356
> 
> 赞同：0
> 
> 时间：2012-07-23T04:04:55.437
> 
> 标签：jquery, flexigrid

我是 flexigrid 的新手，但没有太多关于如何将工具提示和多行工具提示添加到 flexigrid 表格中的每个单元格和表格标题的文档或示例。

是否有任何用于 flexigrid 工具提示的示例和示例？

谢谢

关于 flexigrid [http://flexigrid.info/](http://flexigrid.info/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T18:48:02.487

我设法使用以下代码获得工具提示。

```
function loadToolTips(){
$('#Employees tr').each( function(){

            var tooltip = 'Employee Code : '
            tooltip = tooltip + $('[abbr="EmployeeCode"]',this).text();
            tooltip = tooltip + '<br />';

            tooltip = tooltip + 'Name: ' 
            tooltip = tooltip + $('[abbr="Name"]',this).text();
            tooltip = tooltip + '<br />';

            tooltip = tooltip + 'Department: ' 
            tooltip = tooltip + $('[abbr="Department"]',this).text();
            tooltip = tooltip + '<br />';

            tooltip = tooltip + 'Section: ' 
            tooltip = tooltip + $('[abbr="Section"]',this).text();

            $("td", this).each(function() {
                var $TableCell = $(this);
                $TableCell.attr("title", tooltip);
                $TableCell.addClass("tooltip");
            });
        });
$('.tooltip').tooltipster(); 
```

}

我首先遍历网格中的所有行，并通过使用缩写从行中的每个单元格获取值来构建工具提示。

对于行中的每个单元格，然后我添加带有工具提示值的标题属性。

我还添加了一个类工具提示，但这只是因为我使用的是 tooltipster。

我在调用 onSuccess 方法时调用了 loadToolTips 函数。

```
preProcess: somefunction,
onSuccess: loadToolTips 
```

# entity-framework - 什么是未更改状态实体键值

> ID：11606371
> 
> 赞同：0
> 
> 时间：2012-07-23T04:07:43.610
> 
> 标签：entity-framework

阅读 MSDN[附加和分离对象](http://msdn.microsoft.com/en-us/library/bb896271.aspx)后。

> 对象以 Unchanged 状态附加到对象上下文。如果我们调用 Attach 方法。并且在未更改状态下，实体框架将实体键值视为最终值。

“最终”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:12:05.497

键值是实体的唯一标识符，一旦附加就不能更改。实体的所有其他属性都可以在附加后更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:12:24.677

处于“未更改”状态的对象意味着与数据库中的状态相比，上下文*不知道实体的任何更改。*

您可以通过执行以下操作人为地错误地进入此状态（例如）：

1.  使用一个上下文实例从数据库加载实体。
2.  将它从第一个上下文实例中分离出来。
3.  更改属性。
4.  将实体添加到新的上下文实例。

新的上下文实例将不知道实体对数据库中数据的更改，并将所有属性值视为对象的最终状态。

具体关于实体键的值，假设键*代表数据库中当前的正确值*，因此不会修改/修复键。

# android - 即使应用程序未运行，如何保存整数以保留？

> ID：11606372
> 
> 赞同：1
> 
> 时间：2012-07-23T04:07:53.077
> 
> 标签：android, save

当我点击一个选项时，我希望出现一个复选标志以表明它已被购买。我正在使用`SharedPreferences`并已建立所有链接；但是，当我单击返回或退出然后重新进入应用程序时，检查就消失了，我之前所做的任何事情的历史记录都消失了。如何保存数据，以便即使在应用程序关闭或我在游戏中的另一个页面时也能保留它。到目前为止，这是我的代码：

```
ImageView tick1;
int mYellCheck, mYellCheck1;
public static String sharedPrefs = "MyData";
SharedPreferences data;
SharedPreferences.Editor editor;
int mYellAlpha;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.upgrades);
    update();
    coins = Replay.totalCoins + Replay4.totalCoins + Replay5.totalCoins
        + Replay6.totalCoins;
    data = getSharedPreferences(sharedPrefs, MODE_PRIVATE);
    tick1.setAlpha(mYellCheck);
}

public void update() {
    TextView coinScore = (TextView) findViewById(R.id.tvScore);
    coinScore.setText("You have " + coins + " coins");
    tick1 = (ImageView) findViewById(R.id.ivtick1);
    ImageView moreYellow = (ImageView) findViewById(R.id.ivMoreYellow);
    ImageView back = (ImageView) findViewById (R.id.ivBack);
    back.setOnClickListener(this);
    moreYellow.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.ivMoreYellow:
        mYellAlpha = 255;
        SharedPreferences.Editor editor = data.edit();
        editor.putInt("MoreYellowUpgrade", mYellAlpha);
        editor.commit();
        data = getSharedPreferences(sharedPrefs, MODE_PRIVATE);
        mYellCheck = data.getInt("MoreYellowUpgrade", 0);
        tick1.setAlpha(mYellCheck);
        break;
    case R.id.ivBack:
        Intent i = new Intent ("m.k.zaman.SpotActivity");
        startActivity(i);
        break;
    }
} 
```

**编辑**

还是我应该只使用内部存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:41:48.577

尝试将您当前对 R.id.ivMoreYellow 的 onClick 调用替换为：

```
case R.id.ivMoreYellow:
    mYellAlpha = 255;
    mYellCheck = data.getInt("MoreYellowUpgrade", 0);
    tick1.setAlpha(mYellCheck);
    SharedPreferences.Editor editor = data.edit();
    editor.putInt("MoreYellowUpgrade", mYellAlpha);
    editor.commit();
    break; 
```

You were first overwriting all of the data in the SharedPreferences, and then calling to receive that data that you just overwrote, so I placed the getInt() call before the putInt(). Do you change mYellAplha to anything other than 255 though? If you don't you will never notice a change in SharedPreferences if you are always saving and getting 255.

# java - 将 hashmap 中的数据写入 CSV 文件

> ID：11606376
> 
> 赞同：3
> 
> 时间：2012-07-23T04:08:15.777
> 
> 标签：java, csv, seek

假设我有一个`String`类型为键、`ArrayList`类型为值的哈希图，例如`{"value1"=["one","three","five"], "value2"=["two","four","six"]}`“value1”和“value2”是键。我想以以下格式编写上述哈希图数据。（这样我就可以在 excel 中读取 csv 文件）

```
value1,value2
one,two
three,four
five,six 
```

我的想法是编写第一个键及其值如下

```
value1
one
three
five 
```

然后我正在考虑在`RandomAccessFile`课堂上使用 seek 方法返回到第 1 行并再次写入第二个键及其值。但是，我无法完成此任务，因为 seek 函数会获取整个文件中字符串的长度并在其后写入新字符串。虽然我希望指针跳转到第一行并附加字符串。有一个更好的方法吗？。一个简单的例子将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:19:43.447

为什么不能只使用 4 个字符串，每行一个？像这样的东西：

```
StringBuilder keyRow = new StringBuilder();
StringBuilder value1 = new StringBuilder();
StringBuilder value2 = new StringBuilder();
StringBuilder value3 = new StringBuilder();

Iterator keys = hashmap.keySet().iterator();
boolean notFirst = true;
while(keys.hasNext()) {
    String key = (String)keys.next();
    ArrayList list = (ArrayList)hashmap.get(key);
    if(!notFirst) {
        keyRow.append(",");
        value1.append(",");
        value2.append(",");
        value3.append(",");
    }
    keyRow.append(key);
    value1.append((String)list.get(0));
    value2.append((String)list.get(1));
    value3.append((String)list.get(2));
    notFirst = false;
} 
```

然后在最后，只需拿 4 个字符串

```
String csv = keyRow.toString()+"\n"+value1.toString()+"\n"+value2.toString()+"\n"+value3.toString(); 
```

请注意，此示例不是真正正确的 CSV。带逗号的字符串不包含在引号中。

* * *

或者，如果您有数千个这样的行，您将遍历 HashMap 一千次。为了节省查找密钥的时间，您可以将它们全部放在一个`ArrayList`：

```
StringBuilder csv = new StringBuilder();
int row = 0;
ArrayList<ArrayList> list = new ArrayList<ArrayList>();

// Write the keys row:
Iterator keys = hashmap.keySet().iterator();
boolean notFirst = true;
while(keys.hasNext()) {
    String key = (String)keys.next();
    ArrayList tmp = (ArrayList)hashmap.get(key);
    if(!notFirst) {
        csv.append(",");
    }
    csv.append(key);
    // store list
    list.add(tmp);
    notFirst = false;
}
csv.append("\n");

// Write the rest of the rows
while(row<numberOfTotalRow) {
    notFirst = true;
    for(int x=0;x<list.size();x++) {
        if(!notFirst) {
            csv.append(",");
        }
        csv.append((String)list.get(x).get(row));
        notFirst = false;
    }   
    row++; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:18:44.337

您可以根据需要创建一个打印地图的方法：

```
public void toString(HashMap<String, ArrayList<String>> map) {
    for(int i = 0; i < map.size(); i++) {
        ArrayList<String> list = new ArrayList<String>(map.keySet());
        String key = list.get(i);
        System.out.println(key);
        for(int j = 0; j < map.get(key).size(); j++)
            System.out.println(map.get(key).get(j));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:21:54.790

你想象的方式是不可能的。文件是连续的字节流。因此，在您写入第一个值之后，您的文件中就有：“value1\none\nthree\nfive”。如果您随后寻找位置 6（在“值”之后）并插入新字符，您将覆盖第一个值的第二行。以下字节不会被神奇地推开。

做到这一点的唯一方法是遍历您拥有的数据，使您能够以与它们在文件中相同的顺序输出字节。所以：转到每个值并写入第一个元素，再次到每个值并写入它们的第二个元素，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:06:10.680

你不需要`RandomAccessFile`文件，最好使用这个：

```
HashMap<String, ArrayList<String>> map = new HashMap<>();
map.put("a", new ArrayList<>(Arrays.asList(new String[]{"A1", "A2", "A3"})));
map.put("b", new ArrayList<>(Arrays.asList(new String[]{"B1", "B2", "B3"})));
map.put("c", new ArrayList<>(Arrays.asList(new String[]{"C1", "C2", "C3"})));
{
    /**
        * Set your file printstream. For testing System.out
        */
    PrintStream ps = System.out;
    boolean first = true;
    /**
        * Size of the array list. Let's asume that the arraylist are of the
        * same lenght;
        */
    int s = 0;
    /**
        * Create a ArrayList variable because, this map class makes no guarantees
        * as to the order of the map; in particular, it does not guarantee that
        * the order will remain constant over time.
        */
    ArrayList<Entry<String, ArrayList<String>>> l =
            new ArrayList<>(map.entrySet());

    for (Entry<String, ArrayList<String>> e : l) {
        if (first) {
            first = false;
            s = e.getValue().size();
        } else {
            ps.print(",");
        }
        ps.print(e.getKey());
    }
    ps.println();

    for (int i = 0; i < s; i++) {
        first = true;
        for (Entry<String, ArrayList<String>> e : l) {
            if (first) {
                first = false;
            } else {
                ps.print(",");
            }
            ps.print(
                    e.getValue().get(i));
        }
        ps.println();
    }
} 
```

输出：

```
b,c,a
B1,C1,A1
B2,C2,A2
B3,C3,A3 
```

# c - 如何从ac程序中终止exe

> ID：11606381
> 
> 赞同：1
> 
> 时间：2012-07-23T04:09:49.010
> 
> 标签：c

我正在使用 system() 来调用可执行程序(A server) 。现在经过一段时间后，我想从我的 c 程序本身终止这个程序。有谁知道如何做到这一点？操作系统运行：（http://rcn-ee.net/deb/rootfs/precise/ubuntu-12.04-r4-minimal-armhf-2012-07-16.tar.xz）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T04:23:54.070

做到这一点的最好方法是使用一个函数，它可以让您对结果过程进行更多控制`system()`。但是，这将是特定于平台的。

*   对于 Windows，使用`CreateProcess()`which 返回 a`HANDLE`您可以稍后使用它`TerminateProcess()`来终止进程。

*   对于 Unix，使用`fork()`and `exec()`which 为您提供子进程的 pid，您可以稍后使用它`kill()`来终止该进程。

# url - 站点服务器添加页面时收到通知

> ID：11606382
> 
> 赞同：0
> 
> 时间：2012-07-23T04:09:58.977
> 
> 标签：url

我一直在为我的兄弟做一些编程，他是一名股票交易员。我想知道当站点服务器添加页面时是否可以接收推送通知。例如，网站 smallcapfortunes.com 经常添加一些页面，这些页面是主 URL 的简单扩展。例如，该网站会定期在 、 等 URL 下添加`/neca/`页面`/stev/`。

是否有执行此操作的现有方法？或者这是我需要自己写的东西？这里有没有人写过这样的东西？

我知道现有网站可以跟踪单个页面的基本更新。不过，在我的研究中，我还没有发现类似的东西。

如果我需要提供任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:36:47.427

您很可能希望使用[http://scrapy.org/](http://scrapy.org/)浏览该站点并找到新的 /neca/ 和 /stev/ url 等，然后每隔一段时间触发一次脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:16:04.143

通常，只有在特定网站提供该服务时，您才能收到*推送通知。*

一些网站发布[结构化 (XML) 站点地图](http://www.sitemaps.org/protocol.html)。如果您感兴趣的人这样做，您可以定期*提取该站点地图并寻找差异。*

# javascript - 将变量附加到javascript中的字符串

> ID：11606386
> 
> 赞同：0
> 
> 时间：2012-07-23T04:10:45.963
> 
> 标签：javascript, prototype

我在我的应用程序中使用原型，但我不确定如何正确添加它。基本上我有以下功能，我需要构造一个锚的 href，我已经从中获得了对一系列附加值的引用

```
MyJavascriptClass.prototype.init = function() {
    this.ToDate = $(this.Prefix + 'ToDate');
    this.FromDate = $(this.Prefix + 'FromDate');
} 
```

所以在下面的函数中，我需要将它们作为参数添加到 url 属性中

```
MyJavascriptClass.prototype.btnClicked = function(evt) {

this.lnkShowLink.setAttribute('href', 'MyWebpage.aspx?StartDate=7/18/2012&EndDate=1/19/2012');

} 
```

我该怎么做 `'MyWebPage.aspx?StartDate=this.ToDate&EndDate=this.FromDate'`？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:17:00.210

如果您使用的是 jquery，`$(this.Prefix + 'ToDate')`并`$(this.Prefix + 'FromDate')`表示包含值的字段，那么您可以这样做：

```
MyJavascriptClass.prototype.btnClicked = function(evt) {
    this.lnkShowLink.setAttribute('href', 'MyWebpage.aspx?StartDate=' + this.ToDate.val() + '&EndDate=' + this.FromDate.val() + '');
} 
```

很难从您的代码中看出它们代表什么，以及为什么将它们包裹在`$(..)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:14:21.260

如果 ToDate 和 FromDate 包含两个日期值，那么这应该工作......

```
'MyWebPage.aspx?StartDate=' + this.ToDate + '&EndDate=' + this.FromDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:16:37.757

如果您不知道每个属性：

```
var properties = [];
for(var i in this)
    if(this.hasOwnProperty(i))
        properties.push(i+'='+this[i]);
var url = 'MyWebPage.aspx?'+properties.join('&'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T04:16:50.127

```
var string = "My name is: ",
    name = "Bob",
    punctuation = ".",

greeting = string + name + punctuation; 
```

或者

```
var User = { name : "Bob", age : 32, sign : "Leo" },
welcome = "Hi, I'm " + User.name + ", and I'm " + User.age + " years old, I'm a " + User.sign + ", and I enjoy long walks on the beach."; 
```

# java - 多线程 Web 应用程序中的 Java bean 数据完整性问题

> ID：11606389
> 
> 赞同：0
> 
> 时间：2012-07-23T04:11:03.243
> 
> 标签：java, xml, concurrency, javabeans, data-integrity

我的 Web 应用程序有一个 XML 配置文件，它使用 JAXB 读取，每个 JVM 生命周期只读取一次 - 在第一次调用应用程序时。结果缓存在单例类中的 Java bean 中——同样，只有一次。这个单例类有一个公共方法来从 bean 中读取数据并输出指定类别的项目 ID 列表。对应用程序的每个请求都会调用此方法一次。

```
<category code='AA'>
    <item id='1' />
    <item id='2' />
    <item id='5' />
    <item id='7' />    
    <item id='8' />
    <item id='19' />
</category>
<category code='BB'>
    <item id='12' />
    <item id='13' />
    <item id='15' />
    <item id='17' />    
    <item id='18' />
    <item id='19' />
</category> 
```

前面提到的项目 ID 对于给定类别是唯一的。在开发环境中进行测试时，读取 bean 并返回 ID 列表的逻辑保持得很好，并按预期返回数据。但是，在生产环境中，只要达到关键并发，逻辑就会在几天后开始返回列表中重复的 ID。

我绝对肯定的是，除了在初始化对象时，应用程序中没有其他代码调用 Java bean 上的任何“set”mutator。日志还表明，在每个 JVM 生命周期中，读取的 XML 和创建的 bean 仅执行一次。即便如此，当应用程序的流量很高（> 每秒 10 个事务左右）时，这些 bean 的输出也会被破坏。一旦损坏，它就会一直保持这种状态，直到 JVM 再次被回收。

我尝试过的一种解决方案是不在线程之间共享 bean，而是在每次调用应用程序时从 XML 中创建它们。这解决了重复 ID 的问题，但我担心每个应用程序调用中的 JAXB 操作可能会带来性能风险。

任何想法为什么会发生这种情况，以及在共享 bean 时我们如何避免这个问题？

# http - 一个小小的 ajax ping 来防止会话超时？

> ID：11606390
> 
> 赞同：1
> 
> 时间：2012-07-23T04:11:09.737
> 
> 标签：http, session, timeout

在我的网站上，成员可以撰写文章与社区中的其他人分享信息。我收到提交失败的随机报告，似乎是因为会话超时。

如果我创建一个小的 ajax 脚本每隔几分钟在我的 ASP.NET MVC 控制器上“ping”一个操作，那会重置会话超时吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:14:40.900

ajax ping 是我在我的 Java EE MVC Web 应用程序中所做的，以保持会话处于活动状态，它工作正常。我不明白为什么它也不适用于 ASP.NET 应用程序。

不过，我不确定是否有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:12:28.297

是的，这将完成这项工作。

与技术无关，每次 http 请求到达 http 服务器时，会话“上次访问时间”都会更新为客户端发起通信的日期。

如果您以小于会话超时的延迟 ping 服务器，您将永远保留会话！

注意：如果会话超时为 30 分钟，则不需要每分钟 ping 一次。它绝对不会使网络超载。对于此类配置，我建议会话每 25 分钟 ping 一次。

嗨，M。

# php - 未知发件人 PHP（内部代码）

> ID：11606394
> 
> 赞同：0
> 
> 时间：2012-07-23T04:11:52.073
> 
> 标签：php

我创建了一个 PHP 文件来处理我的 jQuery 移动网站上的表单。该表格完美运行并发送电子邮件，错误工作和所有。但我不断收到来自（未知发件人）的电子邮件。主题行和电子邮件信息在那里。（来自表单的电子邮件以托管主机电子邮件地址）。感谢您提供的任何帮助。

```
<?php
if(isset($_POST['email'])){

// Here is the email to information

$email_to = "hostemail@email.com";
$email_subject = "Customer Service Form";
$email_from = "Company";

//error code

function died($error){
    echo "We are sorry, but there were errors found with the form you submitted.";
    echo "These errors appear bellow.<br/><br/>";
    echo $error. "<br/><br/>";
    echo "Please go back and fix these errors.<br/>";
    die();
    }
//validation

if(!isset($_POST['name']) ||
!isset($_POST['email']) ||
!isset($_POST['message'])) {
    died('We are sorry but there appears to be a problem with the form you submitted.');
}

$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];

$error_message = "";
//$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z] {2,4}$/';
//(!preg_match($email_exp, $email)) {
//$error_message .='The Email Address you entered does not appear to be valid.<br/>';
//  }

$string_exp = "/^[A-Za-z.'-]+$/";
if(!preg_match($string_exp, $name)){
    $error_message .= 'The name you entered does not seem to be valid.<br/>';   
    }

if(strlen($message) < 2) {
    $error_message .= 'The comments you entered do not appear to be valid.<br/>';
    }
if(strlen($error_message) > 0 ) {
    died($error_message);
    }

    $email_message = "Form details below. \n\n";

    function clean_string($string) {
        $bad = array("content-type", "bcc:", "to:", "cc:", "href");
        return str_replace($bad, "", $string);
        }

    $email_message .= "Name:" . clean_string ($name) . "\n";
    $email_message .= "E-Mail:" . clean_string ($email) . "\n";
    $email_message .= "Message:" . clean_string ($message) . "\n";

    //create email headers

    $headers = 'From:' .$email_From . "\r\n" . 'Reply-To:' . $email. "\r\n" .
    'X-MAILER: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers);
    ?>

    <!-- Success Message Goes Here -->
    Thank you for contacting us. We will be in touch with you shortly. <br/>
    Please Click <a href="contact.html"> here </a> to go back to the contact page.
    <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T04:22:43.400

标头的格式为`From`：

```
Display Name <email address> 
```

例如：

```
Company <foo@company.com> 
```

现在，您只是使用“公司”，它本身既不是有效的电子邮件地址，也不是最后的电子邮件地址。

# php - php + 替换查询产生的数组中的文本

> ID：11606396
> 
> 赞同：0
> 
> 时间：2012-07-23T04:12:07.453
> 
> 标签：php, mysql, loops, while-loop

这是我的方法，无论如何都没有成功，但也许它让您了解我的代码和编码技能是什么样的，以及我想要实现的目标。

* * *

```
 $data1 = mysql_query("SELECT * from `todolist` WHERE date > '$today' ") 
 or die(mysql_error());

 $data1b = str_replace("text-to-be-replaced", "replaced-text", $data1);

while($info1 = mysql_fetch_array( $data1b )) 
 {
Print "".$info1['thingtobedone'] . " with ".$info1['persontomeet'] . "<br />";
 } 
```

* * *

另外，我的方法是不正确的，因为我想做的是设置一堆搜索和替换案例。类似于“搜索 X 并替换 Y”的列表，而不仅仅是一个替换。最初我想做一些类似“将A替换为B并将数组重命名为STEP2”的操作，然后获取名为STEP2的数组并“搜索C并将其替换为D，并将数组重命名为STEP3”但是......我认为这可能不会成为这样做的最佳方式 =/

任何建议，指针，更正将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:22:52.527

您可以使用[`strtr()`](http://www.php.net/manual/en/function.strtr.php)PHP 中的函数来传递替换规则的 key => value 对：

```
$data = mysql_query('SELECT * FROM todolist WHERE date > CURDATE()') or die(mysql_error());

// Array of replacement rules. Keys of the array are strings to be replaced.
// Corresponding values of the keys are the replacement strings
$trans = array(
    'stringtoreplace1' => 'replacedstring1',
    'stringtoreplace2' => 'replacedstring2',
    'stringtoreplace3' => 'replacedstring3'
);

while($info = mysql_fetch_array($data)) 
{
    print strtr($info['thingtobedone'], $trans) . ' with ' . $info['persontomeet'] . '<br />';
} 
```

假设`thingtobedone`是您要在其上进行替换的列。

然后，当您调用 时`strtr($info['thingtobedone'], $trans)`，该函数将获取字符串并将数组中每个键值的所有出现替换`$trans`为其对应的值。这是一次进行许多字符串替换的好方法。

# rest - 资源集合之间的 REST API 设计链接

> ID：11606400
> 
> 赞同：10
> 
> 时间：2012-07-23T04:12:25.120
> 
> 标签：rest

我一直在思考定义具有相互依赖关系的资源集合的正确方法。

例如，让我们考虑可通过 URI 独立访问的“文档”和“评论”：

```
/documents/{doc-uri}
/comments/{comment-id} 
```

但是，我们通常希望收集与特定文档相关的评论。这就产生了一个设计问题，即应该如何设计它。

我可以看到几个主要选项：

1.) 在文档 uri 之后提供一个集合 uri 以供评论

```
GET /documents/{doc-uri}/comments/ 
```

2.) 为评论集合提供一个参数以按文档选择

```
GET /comments/{comment-id}?related-doc={doc-uri} 
```

3.) 使用内容协商请求通过 Accept 头返回相关评论。

```
// Get all the comments for a document
GET /documents/{doc-uri} Accept: application/vnd.comments+xml
// Create a new comment
POST /documents/{doc-uri} Content-Type: application/vnd.comment+xml <comment>...</comment> 
```

方法 1 的优点是自动将注释放在文档的上下文中。这在使用 POST/PUT 创建、更新和删除评论时也很好。但是，它不提供对文档上下文之外的评论的全局访问。因此，如果我们想对系统中的所有评论进行搜索，我们将需要方法 #2。

方法 2 提供了许多与 #1 相同的好处，但是在没有文档上下文的情况下创建评论是没有意义的。因为评论必须明确地与文档相关。

从 GET 和 POST/create 的角度来看，方法 3 很有趣，但在更新和删除方面有点麻烦。

我可以看到所有这些方法的优点和缺点，因此我正在向可能已经接近并解决过这个问题的人寻求更多指导。

我正在考虑同时使用方法 1 和 2，因此我可以提供所需的所有功能，但我担心我可能过于复杂/重复功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:18:21.950

REST API**必须是超媒体驱动的**。请参阅*超媒体作为应用程序状态引擎 (HATEOAS)*约束。所以，不要在 URLPatterns 上浪费时间，因为它们不是 RESTful。URLPattern 暗示了客户端和服务器之间的紧密耦合；简单地说，客户端必须知道 URL 的样子并有能力构造它们。

为您的用例考虑这个 REST 设计：

文档的表示包含一个链接，客户端可以在其中发布评论或使用 GET 获取文档的所有评论。例如

```
{
  ...
  "comments" : {
      "href": ".. url ..",
      "rel": ["create-new-comment", "list-comments"]
  }
} 
```

客户端只需获取此 URL 并对 URL 执行 GET 或 POST 方法；不知道 URL 是怎样的，看起来像。

另见这篇文章：

[http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T08:55:22.230

方法 1 和 2 的组合看起来不错，正如您在方法 2 中所说，在没有文档上下文的情况下创建评论没有太大意义，因为两者之间存在父子关系，如果您删除一个文档，删除他的所有文档是可以接受的还可以评论，您可以使您的`/comments/`uri 成为只读资源，以避免在没有文档的情况下创建他。

正如 filip26 所说，rest apis 应该是超媒体驱动的，但这并不意味着 url 模式不重要，你可以拥有一个具有一个或多个 uri 的资源，如果你的资源有多个 uri 更容易让客户找到它们，缺点是这可能会令人困惑，因为某些客户端使用一个 uri 而不是另一个，因此您可以将规范 uri 用于资源，当客户端通过此规范 uri 访问资源时，您可以发送回 a `200 OK`，当客户端请求其他 uri 之一时您可以连同规范的 uri 一起发回 303“另请参阅”。`

# c# - 在 C# XNA for WP7 中的列表中的对象上创建碰撞

> ID：11606401
> 
> 赞同：0
> 
> 时间：2012-07-23T04:12:26.577
> 
> 标签：c#, windows-phone-7, xna

我试图使碰撞矩形与列表一起使用。

所以这里是代码：

```
 List<Planet> planets;
Planet planet;
Texture2D levelSelectTexture;
Texture2D star;
Vector2 position;

Rectangle planetRectangle;

public PlanetSelect(EventHandler screenEvent, GraphicsDevice graphics, ContentManager content, SpriteBatch batch)
    : base(screenEvent, graphics, content, batch)
{

    star = content.Load<Texture2D>("ursaeMajorisStar");

    position = new Vector2((Graphics.Viewport.Width - star.Width) / 2, (Graphics.Viewport.Height - star.Height) / 2);

    planets = new List<Planet>();

    Planet planet = new Planet(Content, Batch);
    planet.Load("planet0");
    planet.velocity = 0.04f;
    planet.radius = 80;
    planet.angle = MathHelper.ToRadians(90);
    planets.Add(planet);

    planet = new Planet(Content, Batch);
    planet.Load("planet2");
    planet.velocity = 0.02f;
    planet.radius = 135;
    planet.angle = MathHelper.ToRadians(120);
    planets.Add(planet);

    planet = new Planet(Content, Batch);
    planet.Load("planet3");
    planet.velocity = 0.009f;
    planet.radius = 180;
    planet.angle = MathHelper.ToRadians(160);
    planets.Add(planet);

    **planetRectangle = new Rectangle(planet.position.X, planet.position.Y, planet.image.Width, planet.image.Height);**

    levelSelectTexture = content.Load<Texture2D>("levelSelectMenu");

}

public override void Update(GameTime gameTime)
{

    TouchCollection touchCollection = TouchPanel.GetState();

        foreach (TouchLocation tl in touchCollection)
        {
            if (tl.State==TouchLocationState.Moved)
            {
                if (planetRectangle.Contains((int)tl.Position.X,(int)tl.Position.Y))
                {
                    screenEvent.Invoke(this, new EventArgs());
                }

            }

    foreach (Planet planet in planets)
    {
        planet.angle += planet.velocity;
        float orbitx = (float)(Math.Cos(planet.angle) * planet.radius);
        float orbity = (float)(Math.Sin(planet.angle) * planet.radius);

        float x = (Graphics.Viewport.Width - planet.image.Width) / 2 + orbitx;
        float y = (Graphics.Viewport.Height - planet.image.Height) / 2 + orbity;

        planet.position = new Vector2(x, y);

    }

    base.Update(gameTime);
}

public override void Draw(SpriteBatch spriteBatch)
{

    spriteBatch.Draw(levelSelectTexture, Vector2.Zero, Color.White);
    foreach (Planet planet in planets)
    {
        planet.Draw();
    }

    spriteBatch.Draw(star, position, Color.White);

    base.Draw(spriteBatch);
} 
```

每次我尝试创建一个碰撞矩形并传入planet.position值以及图像宽度和高度时，它都会抛出一个错误并且不会让我

所以我声明：矩形planetRectangle；

然后当我初始化时，我执行planetRectangle = new Rectangle (planet.position.X,planet.Position.Y,planet.image.Width,planet.image.Height);

它只是不想将值传递到矩形上，我如何与 objectS 列表发生冲突？我应该以某种方式在基类或精灵类中创建它吗？

我得到的错误是：

无法将 float 转换为 int （关于 planet.position.X&Y ）并且最佳重载匹配有争论。我已经突出显示了它有问题的行。

通常这些行星对象在同心圆中移动，我希望能够通过触摸选择它们，但即使这样做我也需要先创建一个矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:01:12.023

您需要转换`planetRectangle`为方法。您已经编写了一条语句，该语句采用您创建的第三个“行星”对象并创建了一个矩形，该矩形存储在变量中一次`planetRectangle`并且**永远不会更改**。

尝试删除您突出显示的那一行，并将其放入如下方法中：

```
static Rectangle GetPlanetRectangle(Planet planet)
{
    planetRectangle = new Rectangle(planet.position.X,
            planet.position.Y, planet.image.Width, planet.image.Height);
} 
```

或者更好的是，如果`Planet`是您自己的类，请将其添加为如下属性`Planet`：

```
public Rectangle Bounds
{
    get
    {
        return new Rectangle(this.position.X,
                this.position.Y, this.image.Width, this.image.Height);
    }
} 
```

然后您需要**为每个行星**调用此方法或访问此属性，如下所示：

```
foreach(TouchLocation tl in touchCollection)
{
    if(tl.State == TouchLocationState.Moved) // Moved? Is that right?
    {
        foreach(Planet planet in planets)
        {
            // Alternately: if(GetPlanetRectangle(planet).Contains(...))
            if(planet.Bounds.Contains((int)tl.Position.X, (int)tl.Position.Y))
            {
                // Do stuff...
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:17:11.007

您需要将行星值转换`int`为将它们传递到`Rectangle`：

```
planetRectangle = new Rectangle((int)planet.position.X, (int)planet.position.Y, (int)planet.image.Width, (int)planet.image.Height); 
```

# javascript - 在javascript中使用var作为var名称

> ID：11606405
> 
> 赞同：0
> 
> 时间：2012-07-23T04:13:09.223
> 
> 标签：javascript, html, var

我有一个小问题。我想做的是制作一个 InnerHTML 变量。

也许代码可以更好地解释它，我现在拥有的是：

------Javascript-----

```
var VarOne = 'Four';        
var VarTwo = 'Five';
var VarThree = 'Six';

function MyFunction(){
document.getElementById("MyDiv").innerHTML = ['Var' + event.target.id];
     } 
```

* * *

-----HTML-----

```
<div id="MyDiv"></div> 
```

* * *

它不是寻找 var，而是非常合乎逻辑地给出结果 'VarOne、VarTwo 或 VarThree，但我怎样才能让它使用 var？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:24:12.963

虽然乔纳森的回答是正确的，但您应该避免用变量污染窗口对象。

考虑重构以使用对象来存储这些值：

```
var values = {one:'four', two:'five', three:'six'};

function MyFunction(){
    document.getElementById("MyDiv").innerHTML = values[event.target.id];
} 
```

这在窗口范围内只留下一个变量（也可以通过使用闭包来避免）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T04:16:44.777

默认范围内的变量在`window`对象中。你应该能够做到：

```
var id = 'One'
var VarOne = 'Four';
var VarTwo = 'Five';
var VarThree = 'Six';

alert(window["Var" + id]); // => Four 
```

因此，您应该能够将`MyFunction`函数的内容更改为：

```
document.getElementById("MyDiv").innerHTML = window['Var' + event.target.id]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T04:23:03.507

不要直接使用字符串作为变量名，而是将您的值放入哈希中：

```
var Vars = { 'One': 'Four', 'Two': 'Five', 'Three': 'Six' };        

function MyFunction(){
  document.getElementById("MyDiv").innerHTML = Vars[event.target.id];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T04:21:55.707

更安全的版本和结构更好的版本可能涉及以下内容：

```
var DivContents = {
    VarOne : "Four",
    VarTwo : "Five",
    VarThree : "Six"
};

function MyFunction(){
    document.getElementById("MyDiv").innerHTML = DivContents['Var' + event.target.id];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T04:18:01.383

现在，我不是 JavaScript 专家，但也许`eval()`会做你想做的事？

```
 var results = eval('Var' + number); 
```

或者，您可以创建一个数组并以这种方式访问​​您的数据。

# java - 需要故障转储翻译

> ID：11606409
> 
> 赞同：2
> 
> 时间：2012-07-23T04:14:18.367
> 
> 标签：java, jvm, jvm-crash

以下是我得到的一个崩溃转储，它是由 Java 应用程序崩溃引起的。有谁知道如何解决这种情况？我不能从中得到太多。这可能是由于我的经验有限。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x49a729a0, pid=3092, tid=3244
#
# JRE version: 7.0_04-b22
# Java VM: Java HotSpot(TM) Client VM (23.0-b21 mixed mode windows-x86 )
# Problematic frame:
# C  0x49a729a0
#
# Core dump written. Default location: C:\Program Files\iDATest\hs_err_pid3092.mdmp
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x49e0e000):  JavaThread "pool-21-thread-1" [_thread_in_native, id=3244, stack(0x4aae0000,0x4ab30000)]

siginfo: ExceptionCode=0xc0000005, ExceptionInformation=0x00000008 0x49a729a0

Registers:
EAX=0x74bda8cd, EBX=0x0072c068, ECX=0x0000000b, EDX=0x00000000
ESP=0x4ab2def0, EBP=0x4ab2def8, ESI=0x00bba6b8, EDI=0xffffffff
EIP=0x49a729a0, EFLAGS=0x00010246

Top of Stack: (sp=0x4ab2def0)
0x4ab2def0:   754760ad 7fffffff 4ab2df30 74bce956
0x4ab2df00:   74bda8cd 00000000 4ab2dfcc 4ab2dfbc
0x4ab2df10:   00000000 00000000 ffffffff ffffffff
0x4ab2df20:   00000000 0072c068 74bda8cd 75476085
0x4ab2df30:   4ab2e01c 74bc6d30 00000878 00000410
0x4ab2df40:   01000001 00000004 07696daf 00bb8ba0
0x4ab2df50:   00000000 00000000 00000000 0000001c
0x4ab2df60:   00bb8ba0 00000000 75466a41 4ab2e080 

Instructions: (pc=0x49a729a0)
0x49a72980:   20 00 68 00 61 00 6e 00 64 00 6c 00 65 00 20 00
0x49a72990:   69 00 73 00 20 00 6e 00 6f 00 77 00 20 00 61 00
0x49a729a0:   73 00 73 00 6f 00 63 00 69 00 61 00 74 00 65 00
0x49a729b0:   64 00 20 00 77 00 69 00 74 00 68 00 20 00 61 00 

Register to memory mapping:

EAX=0x74bda8cd is an unknown value
EBX=0x0072c068 is an unknown value
ECX=0x0000000b is an unknown value
EDX=0x00000000 is an unknown value
ESP=0x4ab2def0 is pointing into the stack for thread: 0x49e0e000
EBP=0x4ab2def8 is pointing into the stack for thread: 0x49e0e000
ESI=0x00bba6b8 is an unknown value
EDI=0xffffffff is an unknown value

Stack: [0x4aae0000,0x4ab30000],  sp=0x4ab2def0,  free space=311k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  0x49a729a0
C  [mswsock.dll+0xe956]  MigrateWinsockConfiguration+0x1c2f
C  [mswsock.dll+0x6d30]
C  [WS2_32.dll+0x6a28]  select+0x9f
C  [net.dll+0x3d94]  NET_Timeout+0x59

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  java.net.SocketInputStream.socketRead0(Ljava/io/FileDescriptor;[BIII)I+0
j  java.net.SocketInputStream.read([BIII)I+79
j  java.net.SocketInputStream.read([BII)I+11
j  sun.security.ssl.InputRecord.readFully(Ljava/io/InputStream;[BII)I+21
j  sun.security.ssl.InputRecord.read(Ljava/io/InputStream;Ljava/io/OutputStream;)V+32
j  sun.security.ssl.SSLSocketImpl.readRecord(Lsun/security/ssl/InputRecord;Z)V+44
j  sun.security.ssl.SSLSocketImpl.readDataRecord(Lsun/security/ssl/InputRecord;)V+15
j  sun.security.ssl.AppInputStream.read([BII)I+72
j  sun.nio.cs.StreamDecoder.readBytes()I+135
j  sun.nio.cs.StreamDecoder.implRead([CII)I+112
j  sun.nio.cs.StreamDecoder.read([CII)I+180
j  java.io.InputStreamReader.read([CII)I+7
j  java.io.BufferedReader.fill()V+145
J  java.io.BufferedReader.readLine(Z)Ljava/lang/String;
j  java.io.BufferedReader.readLine()Ljava/lang/String;+2
j  org.apache.commons.net.ftp.FTP.__getReply(Z)V+16
j  org.apache.commons.net.ftp.FTP.__getReply()V+2
j  org.apache.commons.net.ftp.FTP.sendCommand(Ljava/lang/String;Ljava/lang/String;)I+36
j  org.apache.commons.net.ftp.FTPSClient.sendCommand(Ljava/lang/String;Ljava/lang/String;)I+3
j  org.apache.commons.net.ftp.FTPClient._openDataConnection_(Ljava/lang/String;Ljava/lang/String;)Ljava/net/Socket;+359
j  org.apache.commons.net.ftp.FTPClient._storeFile(Ljava/lang/String;Ljava/lang/String;Ljava/io/InputStream;)Z+3
j  org.apache.commons.net.ftp.FTPClient.__storeFile(ILjava/lang/String;Ljava/io/InputStream;)Z+7
j  org.apache.commons.net.ftp.FTPClient.storeFile(Ljava/lang/String;Ljava/io/InputStream;)Z+5
j  com.iwebgate.ida.execution.ftp.Uploader.ftp(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Z+475
J  com.iwebgate.ida.execution.PortalExtractor.call()Ljava/lang/Exception;
j  com.iwebgate.ida.execution.PortalExtractor.call()Ljava/lang/Object;+1
j  java.util.concurrent.FutureTask$Sync.innerRun()V+29
j  java.util.concurrent.FutureTask.run()V+4
j  java.util.concurrent.ThreadPoolExecutor.runWorker(Ljava/util/concurrent/ThreadPoolExecutor$Worker;)V+46
j  java.util.concurrent.ThreadPoolExecutor$Worker.run()V+5
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
=>0x49e0e000 JavaThread "pool-21-thread-1" [_thread_in_native, id=3244, stack(0x4aae0000,0x4ab30000)]
  0x49e0c400 JavaThread "IDAScheduler_QuartzSchedulerThread" [_thread_blocked, id=4064, stack(0x4afe0000,0x4b030000)]
  0x49e0c000 JavaThread "IDAScheduler_Worker-1" [_thread_blocked, id=2308, stack(0x4b300000,0x4b350000)]
  0x49e0b400 JavaThread "TimerQueue" daemon [_thread_blocked, id=1600, stack(0x4af10000,0x4af60000)]
  0x49481400 JavaThread "Swing-Shell" daemon [_thread_blocked, id=3240, stack(0x4aa70000,0x4aac0000)]
  0x492e6400 JavaThread "derby.rawStoreDaemon" daemon [_thread_blocked, id=728, stack(0x49c60000,0x49cb0000)]
  0x493abc00 JavaThread "Timer-0" daemon [_thread_blocked, id=3248, stack(0x49c10000,0x49c60000)]
  0x009fa800 JavaThread "DestroyJavaVM" [_thread_blocked, id=1528, stack(0x00af0000,0x00b40000)]
  0x49239000 JavaThread "AWT-EventQueue-0" [_thread_blocked, id=3352, stack(0x49a20000,0x49a70000)]
  0x49236800 JavaThread "AWT-Windows" daemon [_thread_in_native, id=2532, stack(0x003e0000,0x00430000)]
  0x49235c00 JavaThread "AWT-Shutdown" [_thread_blocked, id=1468, stack(0x49b60000,0x49bb0000)]
  0x49233400 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=4068, stack(0x49970000,0x499c0000)]
  0x010f5400 JavaThread "Service Thread" daemon [_thread_blocked, id=2724, stack(0x490d0000,0x49120000)]
  0x010eb400 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, id=3236, stack(0x48f00000,0x48f50000)]
  0x010ea400 JavaThread "Attach Listener" daemon [_thread_blocked, id=2396, stack(0x012e0000,0x01330000)]
  0x010e7000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=2200, stack(0x48e50000,0x48ea0000)]
  0x01093800 JavaThread "Finalizer" daemon [_thread_blocked, id=2292, stack(0x48eb0000,0x48f00000)]
  0x00cdcc00 JavaThread "Reference Handler" daemon [_thread_blocked, id=2948, stack(0x00790000,0x007e0000)]

Other Threads:
  0x00cd7c00 VMThread [stack: 0x00a40000,0x00a90000] [id=1400]
  0x01110800 WatcherThread [stack: 0x49070000,0x490c0000] [id=2508]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 30784K, used 18603K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,  65% used [0x04760000, 0x058ff8c8, 0x06220000)
  from space 3392K,  16% used [0x06220000, 0x062ab348, 0x06570000)
  to   space 3392K,   0% used [0x06570000, 0x06570000, 0x068c0000)
 tenured generation   total 68288K, used 16166K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a479ab8, 0x1a479c00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd938, 0x444bda00, 0x444e0000)
No shared spaces configured.

Code Cache  [0x02760000, 0x02e38000, 0x04760000)
 total_blobs=4018 nmethods=3697 adapters=253 free_code_cache=25793Kb largest_free_block=26409280

Compilation events (10 events):
Event: 10243.578 Thread 0x010eb400 3722             org.apache.http.message.HeaderGroup::getFirstHeader (52 bytes)
Event: 10243.579 Thread 0x010eb400 nmethod 3722 0x02e2ee48 code [0x02e2ef90, 0x02e2f130]
Event: 10243.604 Thread 0x010eb400 3723             com.sun.org.apache.xerces.internal.dom.DeferredDocumentImpl::appendChild (81 bytes)
Event: 10243.604 Thread 0x010eb400 nmethod 3723 0x02e2f288 code [0x02e2f3b0, 0x02e2f554]
Event: 10243.605 Thread 0x010eb400 3724             com.sun.org.apache.xerces.internal.dom.DeferredAttrImpl::synchronizeData (86 bytes)
Event: 10243.605 Thread 0x010eb400 nmethod 3724 0x02e2f7c8 code [0x02e2f900, 0x02e2fb3c]
Event: 10243.605 Thread 0x010eb400 3725             com.sun.org.apache.xerces.internal.dom.DeferredAttrImpl::synchronizeChildren (18 bytes)
Event: 10243.606 Thread 0x010eb400 nmethod 3725 0x02e2fcc8 code [0x02e2fde0, 0x02e2ff08]
Event: 10437.875 Thread 0x010eb400 3726             java.text.DigitList::set (174 bytes)
Event: 10437.876 Thread 0x010eb400 nmethod 3726 0x02e30008 code [0x02e30140, 0x02e30484]

GC Heap History (10 events):
Event: 8439.874 GC heap before
{Heap before GC invocations=38 (full 4):
 def new generation   total 30784K, used 27942K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K, 100% used [0x04760000, 0x06220000, 0x06220000)
  from space 3392K,  16% used [0x06570000, 0x065f9ae0, 0x068c0000)
  to   space 3392K,   0% used [0x06220000, 0x06220000, 0x06570000)
 tenured generation   total 68288K, used 16162K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a478b68, 0x1a478c00, 0x1d760000)
 compacting perm gen  total 22016K, used 21876K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd1d8, 0x444bd200, 0x444e0000)
No shared spaces configured.
Event: 8439.876 GC heap after
Heap after GC invocations=39 (full 4):
 def new generation   total 30784K, used 565K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,   0% used [0x04760000, 0x04760000, 0x06220000)
  from space 3392K,  16% used [0x06220000, 0x062ad6c8, 0x06570000)
  to   space 3392K,   0% used [0x06570000, 0x06570000, 0x068c0000)
 tenured generation   total 68288K, used 16162K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a478b68, 0x1a478c00, 0x1d760000)
 compacting perm gen  total 22016K, used 21876K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd1d8, 0x444bd200, 0x444e0000)
No shared spaces configured.
}
Event: 8439.890 GC heap before
{Heap before GC invocations=39 (full 4):
 def new generation   total 30784K, used 27957K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,  99% used [0x04760000, 0x0621ff60, 0x06220000)
  from space 3392K,  16% used [0x06220000, 0x062ad6c8, 0x06570000)
  to   space 3392K,   0% used [0x06570000, 0x06570000, 0x068c0000)
 tenured generation   total 68288K, used 16162K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a478b68, 0x1a478c00, 0x1d760000)
 compacting perm gen  total 22016K, used 21876K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd1d8, 0x444bd200, 0x444e0000)
No shared spaces configured.
Event: 8439.893 GC heap after
Heap after GC invocations=40 (full 4):
 def new generation   total 30784K, used 245K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,   0% used [0x04760000, 0x04760000, 0x06220000)
  from space 3392K,   7% used [0x06570000, 0x065ad590, 0x068c0000)
  to   space 3392K,   0% used [0x06220000, 0x06220000, 0x06570000)
 tenured generation   total 68288K, used 16163K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a478c88, 0x1a478e00, 0x1d760000)
 compacting perm gen  total 22016K, used 21876K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd1d8, 0x444bd200, 0x444e0000)
No shared spaces configured.
}
Event: 9976.704 GC heap before
{Heap before GC invocations=40 (full 4):
 def new generation   total 30784K, used 27637K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K, 100% used [0x04760000, 0x06220000, 0x06220000)
  from space 3392K,   7% used [0x06570000, 0x065ad590, 0x068c0000)
  to   space 3392K,   0% used [0x06220000, 0x06220000, 0x06570000)
 tenured generation   total 68288K, used 16163K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a478c88, 0x1a478e00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd918, 0x444bda00, 0x444e0000)
No shared spaces configured.
Event: 9976.707 GC heap after
Heap after GC invocations=41 (full 4):
 def new generation   total 30784K, used 593K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,   0% used [0x04760000, 0x04760000, 0x06220000)
  from space 3392K,  17% used [0x06220000, 0x062b4748, 0x06570000)
  to   space 3392K,   0% used [0x06570000, 0x06570000, 0x068c0000)
 tenured generation   total 68288K, used 16166K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a4798b0, 0x1a479a00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd918, 0x444bda00, 0x444e0000)
No shared spaces configured.
}
Event: 9976.720 GC heap before
{Heap before GC invocations=41 (full 4):
 def new generation   total 30784K, used 27985K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K, 100% used [0x04760000, 0x06220000, 0x06220000)
  from space 3392K,  17% used [0x06220000, 0x062b4748, 0x06570000)
  to   space 3392K,   0% used [0x06570000, 0x06570000, 0x068c0000)
 tenured generation   total 68288K, used 16166K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a4798b0, 0x1a479a00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd918, 0x444bda00, 0x444e0000)
No shared spaces configured.
Event: 9976.723 GC heap after
Heap after GC invocations=42 (full 4):
 def new generation   total 30784K, used 251K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,   0% used [0x04760000, 0x04760000, 0x06220000)
  from space 3392K,   7% used [0x06570000, 0x065aefe8, 0x068c0000)
  to   space 3392K,   0% used [0x06220000, 0x06220000, 0x06570000)
 tenured generation   total 68288K, used 16166K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a4798b0, 0x1a479a00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd918, 0x444bda00, 0x444e0000)
No shared spaces configured.
}
Event: 10243.590 GC heap before
{Heap before GC invocations=42 (full 4):
 def new generation   total 30784K, used 27643K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K, 100% used [0x04760000, 0x06220000, 0x06220000)
  from space 3392K,   7% used [0x06570000, 0x065aefe8, 0x068c0000)
  to   space 3392K,   0% used [0x06220000, 0x06220000, 0x06570000)
 tenured generation   total 68288K, used 16166K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a4798b0, 0x1a479a00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd938, 0x444bda00, 0x444e0000)
No shared spaces configured.
Event: 10243.593 GC heap after
Heap after GC invocations=43 (full 4):
 def new generation   total 30784K, used 556K [0x04760000, 0x068c0000, 0x194b0000)
  eden space 27392K,   0% used [0x04760000, 0x04760000, 0x06220000)
  from space 3392K,  16% used [0x06220000, 0x062ab348, 0x06570000)
  to   space 3392K,   0% used [0x06570000, 0x06570000, 0x068c0000)
 tenured generation   total 68288K, used 16166K [0x194b0000, 0x1d760000, 0x42f60000)
   the space 68288K,  23% used [0x194b0000, 0x1a479ab8, 0x1a479c00, 0x1d760000)
 compacting perm gen  total 22016K, used 21878K [0x42f60000, 0x444e0000, 0x46f60000)
   the space 22016K,  99% used [0x42f60000, 0x444bd938, 0x444bda00, 0x444e0000)
No shared spaces configured.
}

Deoptimization events (0 events):
No events

Internal exceptions (10 events):
Event: 10243.602 Thread 0x49e0e000 Threw 0x058293c8 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10243.602 Thread 0x49e0e000 Threw 0x05829530 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.833 Thread 0x49e0e000 Threw 0x058c7e90 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.833 Thread 0x49e0e000 Threw 0x058c7ff8 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.834 Thread 0x49e0e000 Threw 0x058cf2d8 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.834 Thread 0x49e0e000 Threw 0x058cf440 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.834 Thread 0x49e0e000 Threw 0x058d0038 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.834 Thread 0x49e0e000 Threw 0x058d01a0 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.875 Thread 0x49e0e000 Threw 0x058d1338 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715
Event: 10437.875 Thread 0x49e0e000 Threw 0x058d14a0 at C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jni.cpp:715

Events (10 events):
Event: 10243.593 Executing VM operation: RevokeBias
Event: 10243.593 Executing VM operation: RevokeBias done
Event: 10243.593 Executing VM operation: RevokeBias
Event: 10243.593 Executing VM operation: RevokeBias done
Event: 10243.594 Executing VM operation: RevokeBias
Event: 10243.594 Executing VM operation: RevokeBias done
Event: 10243.594 Executing VM operation: RevokeBias
Event: 10243.594 Executing VM operation: RevokeBias done
Event: 10243.594 Executing VM operation: RevokeBias
Event: 10243.594 Executing VM operation: RevokeBias done

Dynamic libraries:
0x01330000 - 0x0135f000     C:\Program Files (x86)\Java\jre7\bin\javaw.exe
0x77990000 - 0x77b10000     C:\Windows\SysWOW64\ntdll.dll
0x76470000 - 0x76580000     C:\Windows\syswow64\kernel32.dll
0x76750000 - 0x76796000     C:\Windows\syswow64\KERNELBASE.dll
0x754a0000 - 0x75540000     C:\Windows\syswow64\ADVAPI32.dll
0x76a80000 - 0x76b2c000     C:\Windows\syswow64\msvcrt.dll
0x75440000 - 0x75459000     C:\Windows\SysWOW64\sechost.dll
0x76350000 - 0x76440000     C:\Windows\syswow64\RPCRT4.dll
0x75070000 - 0x750d0000     C:\Windows\syswow64\SspiCli.dll
0x75060000 - 0x7506c000     C:\Windows\syswow64\CRYPTBASE.dll
0x76980000 - 0x76a80000     C:\Windows\syswow64\USER32.dll
0x752a0000 - 0x75330000     C:\Windows\syswow64\GDI32.dll
0x76190000 - 0x7619a000     C:\Windows\syswow64\LPK.dll
0x75340000 - 0x753dd000     C:\Windows\syswow64\USP10.dll
0x6f890000 - 0x6fa2e000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\COMCTL32.dll
0x75240000 - 0x75297000     C:\Windows\syswow64\SHLWAPI.dll
0x751e0000 - 0x75240000     C:\Windows\system32\IMM32.DLL
0x76dd0000 - 0x76e9c000     C:\Windows\syswow64\MSCTF.dll
0x6eb10000 - 0x6ebce000     C:\Program Files (x86)\Java\jre7\bin\msvcr100.dll
0x6e290000 - 0x6e5da000     C:\Program Files (x86)\Java\jre7\bin\client\jvm.dll
0x71810000 - 0x71817000     C:\Windows\system32\WSOCK32.dll
0x75460000 - 0x75495000     C:\Windows\syswow64\WS2_32.dll
0x76580000 - 0x76586000     C:\Windows\syswow64\NSI.dll
0x74d50000 - 0x74d82000     C:\Windows\system32\WINMM.dll
0x77960000 - 0x77965000     C:\Windows\syswow64\PSAPI.DLL
0x71750000 - 0x7175c000     C:\Program Files (x86)\Java\jre7\bin\verify.dll
0x71430000 - 0x71450000     C:\Program Files (x86)\Java\jre7\bin\java.dll
0x71450000 - 0x71463000     C:\Program Files (x86)\Java\jre7\bin\zip.dll
0x6eee0000 - 0x6eef4000     C:\Program Files (x86)\Java\jre7\bin\net.dll
0x74bc0000 - 0x74bfc000     C:\Windows\system32\mswsock.dll
0x71ff0000 - 0x71ff6000     C:\Windows\System32\wship6.dll
0x717f0000 - 0x717ff000     C:\Program Files (x86)\Java\jre7\bin\nio.dll
0x6e640000 - 0x6e782000     C:\Program Files (x86)\Java\jre7\bin\awt.dll
0x768c0000 - 0x7694f000     C:\Windows\syswow64\OLEAUT32.dll
0x76b50000 - 0x76cac000     C:\Windows\syswow64\ole32.dll
0x75540000 - 0x7618a000     C:\Windows\syswow64\SHELL32.dll
0x713f0000 - 0x71403000     C:\Windows\system32\DWMAPI.DLL
0x71420000 - 0x7142a000     C:\Program Files (x86)\Java\jre7\bin\management.dll
0x6eeb0000 - 0x6eeda000     C:\Program Files (x86)\Java\jre7\bin\fontmanager.dll
0x74c80000 - 0x74d04000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll
0x6ea80000 - 0x6eb00000     C:\Windows\system32\UxTheme.dll
0x77040000 - 0x770c3000     C:\Windows\syswow64\CLBCatQ.DLL
0x6f280000 - 0x6f375000     C:\Windows\system32\propsys.dll
0x71bd0000 - 0x71bf1000     C:\Windows\system32\ntmarta.dll
0x75100000 - 0x75145000     C:\Windows\syswow64\WLDAP32.dll
0x761b0000 - 0x7634d000     C:\Windows\syswow64\SETUPAPI.dll
0x750d0000 - 0x750f7000     C:\Windows\syswow64\CFGMGR32.dll
0x76b30000 - 0x76b42000     C:\Windows\syswow64\DEVOBJ.dll
0x72710000 - 0x7275c000     C:\Windows\system32\apphelp.dll
0x6be40000 - 0x6bfd8000     C:\Windows\system32\NetworkExplorer.dll
0x6ee50000 - 0x6ee7e000     C:\Windows\System32\shdocvw.dll
0x74ae0000 - 0x74aeb000     C:\Windows\system32\profapi.dll
0x6e980000 - 0x6ea7b000     C:\Windows\system32\WindowsCodecs.dll
0x6ee00000 - 0x6ee31000     C:\Windows\system32\EhStorShell.dll
0x6e850000 - 0x6e8c0000     C:\Windows\system32\ntshrui.dll
0x6ef10000 - 0x6ef29000     C:\Windows\system32\srvcli.dll
0x713e0000 - 0x713eb000     C:\Windows\system32\cscapi.dll
0x6ef00000 - 0x6ef0a000     C:\Windows\system32\slc.dll
0x6e940000 - 0x6e971000     C:\Program Files (x86)\Java\jre7\bin\t2k.dll
0x6ee90000 - 0x6eea2000     C:\Windows\system32\MPR.dll
0x71730000 - 0x71738000     C:\Windows\System32\drprov.dll
0x73010000 - 0x73039000     C:\Windows\System32\WINSTA.dll
0x6e910000 - 0x6e924000     C:\Windows\System32\ntlanman.dll
0x71410000 - 0x7141f000     C:\Windows\system32\wkscli.dll
0x6ee40000 - 0x6ee49000     C:\Windows\system32\netutils.dll
0x6e8e0000 - 0x6e902000     C:\Windows\system32\EhStorAPI.dll
0x76950000 - 0x7697d000     C:\Windows\syswow64\WINTRUST.dll
0x76ea0000 - 0x76fbd000     C:\Windows\syswow64\CRYPT32.dll
0x75330000 - 0x7533c000     C:\Windows\syswow64\MSASN1.dll
0x6eb00000 - 0x6eb09000     C:\Windows\system32\LINKINFO.dll
0x72090000 - 0x72098000     C:\Windows\system32\Secur32.dll
0x6e8d0000 - 0x6e8df000     C:\Windows\system32\samcli.dll
0x6e830000 - 0x6e842000     C:\Windows\system32\SAMLIB.dll
0x74b20000 - 0x74b25000     C:\Windows\System32\wshtcpip.dll
0x74c20000 - 0x74c64000     C:\Windows\system32\DNSAPI.dll
0x74b90000 - 0x74bac000     C:\Windows\system32\IPHLPAPI.DLL
0x74b80000 - 0x74b87000     C:\Windows\system32\WINNSI.DLL
0x74b30000 - 0x74b36000     C:\Windows\system32\rasadhlp.dll
0x74b40000 - 0x74b78000     C:\Windows\System32\fwpuclnt.dll
0x6e810000 - 0x6e830000     C:\Program Files (x86)\Java\jre7\bin\sunec.dll
0x72ff0000 - 0x73006000     C:\Windows\system32\CRYPTSP.dll
0x72fb0000 - 0x72feb000     C:\Windows\system32\rsaenh.dll
0x74af0000 - 0x74b07000     C:\Windows\system32\USERENV.dll
0x74c10000 - 0x74c20000     C:\Windows\system32\NLAapi.dll
0x74c00000 - 0x74c10000     C:\Windows\system32\napinsp.dll
0x74bb0000 - 0x74bb8000     C:\Windows\System32\winrnr.dll
0x6e8c0000 - 0x6e8c9000     C:\Program Files (x86)\Java\jre7\bin\sunmscapi.dll
0x6e7e0000 - 0x6e804000     C:\Program Files (x86)\Java\jre7\bin\dcpr.dll
0x6e7d0000 - 0x6e7de000     C:\Program Files (x86)\Java\jre7\bin\JdbcOdbc.dll
0x74df0000 - 0x74e7c000     C:\Windows\system32\ODBC32.dll
0x74db0000 - 0x74de8000     C:\Windows\system32\odbcint.dll
0x71d60000 - 0x71d77000     C:\Windows\system32\bcrypt.dll
0x71d20000 - 0x71d5d000     C:\Windows\SysWOW64\bcryptprimitives.dll
0x74d40000 - 0x74d49000     C:\Windows\system32\VERSION.dll
0x6e7b0000 - 0x6e7ce000     C:\Windows\system32\odbccp32.dll
0x6c090000 - 0x6c17b000     C:\Windows\system32\DBGHELP.DLL

VM Arguments:
jvm_args: -Xms100m -Xmx1000m 
java_command: C:\Program Files\iDATest\idamain.exe
Launcher Type: SUN_STANDARD

Environment Variables:
PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Java\jre7\bin;C:\Program Files (x86)\Java\jre7\bin
USERNAME=Administrator
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 15 Stepping 11, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows NT 6.1 , 64 bit Build 7601 Service Pack 1

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 15 stepping 11, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, tsc

Memory: 4k page, physical 8386884k(6648412k free), swap 16771916k(15279932k free)

vm_info: Java HotSpot(TM) Client VM (23.0-b21) for windows-x86 JRE (1.7.0_04-b22), built on May  3 2012 00:03:48 by "java_re" with unknown MS VC++:1600

time: Mon Jul 23 04:57:23 2012
elapsed time: 10439 seconds 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T04:41:00.737

线

```
# The crash happened outside the Java Virtual Machine in native code. 
```

意味着它是一个发生段错误的`native`函数（而不是 JVM 本身）。通常这可能意味着您正在使用包含本机代码的有缺陷的 3rd 方库。但是，由于最新的 Java 堆栈帧来自 Java 标准库，因此看起来是 Oracle 的错。

因此，它看起来像是 Sun/Oracle JRE 中的一个错误（尤其是`net.dll`我*认为*由 JRE 提供的 ，它以一种导致段错误的方式调用了一些 winsock ）。请在指定的 URL 上将此作为错误报告给 Oracle。（这也可能是 MS Windows 本身的一个错误，但在这种情况下，Oracle 可以处理将其转发到上游。）

# c# - SQL Server Compact Edition - 字节数组截断到长度为 8000 的异常

> ID：11606413
> 
> 赞同：2
> 
> 时间：2012-07-23T04:14:34.593
> 
> 标签：c#, windows-mobile, sql-server-ce

我正在为 Windows Mobile 6.5 设备编程。

我正在使用 SQL Server Compact Edition，并尝试将字节流写入数据库。列类型是`image`（我理解它可以处理超过 8000 个字节），但是我得到了异常：

> InvalidOperationException
> @signature : 字节数组截断到长度为 8000。

知道为什么会这样吗？

```
string sql = @"INSERT INTO E_CONS_SIGNATURE (CONS_NO, SIGNATURE, SIGNATURE_FORMAT, SIGNATURE_DATE)"
            + " VALUES(@consNo, @signature, @format, @date)";

SqlCeCommand cmd = new SqlCeCommand(sql, conn);
cmd.Parameters.AddWithValue("@consNo", txtConsignment.Text);
cmd.Parameters.AddWithValue("@signature", ms.ToArray());
cmd.Parameters.AddWithValue("@format", "BMP");
cmd.Parameters.AddWithValue("@date", new DateTime());

bool success = cmd.ExecuteNonQuery() > 0; 
```

目前，存储在文件系统上不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:45:34.527

关于错误本身，这一行有问题

```
cmd.Parameters.AddWithValue("@signature", ms.ToArray()); 
```

您需要将图像转换为 MemoryStream 对象。

检查以下网站以帮助您。

[将图像保存到 SQL CE](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/0fb5fd05-3eb5-4568-9e2a-fd9ba5ed5a3e/)

[将图像存储在 SQL Server CE 数据库中](https://stackoverflow.com/questions/2638259/store-an-image-in-a-sql-server-ce-database)

问候

# javascript - 具有 z-index 的流体布局

> ID：11606416
> 
> 赞同：0
> 
> 时间：2012-07-23T04:15:24.840
> 
> 标签：javascript, html, css, z-index

我有一个界面，用户可以在其中将元素（例如：视频或图像）拖到 html 页面屏幕上的任何所需位置。一旦用户定位了一个元素，z-index 位置就会被保存（x-position，y-position，width 和 height）。

我的客户有这个要求，它应该是一种流畅的布局方式，当以不同的屏幕分辨率（iphone、ipad、平板电脑和其他）查看时，位置会发生变化。这可能吗？有人可以给我建议吗，拜托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:06:47.887

如果您保存 x,y 位置，则可以计算您在上面的当前框是什么（在弹性框模型中，您可以定义多个“框”并使用它来动态布局它们）。这个想法是采用可拖动的obj。看看它被丢弃的元素是什么......

您可以使用此代码来了解我的意思：http: [//jsfiddle.net/greenido/pFsCL/](http://jsfiddle.net/greenido/pFsCL/)

# c# - NHibernate - 如何编写条件查询以反映列是否具有空值

> ID：11606417
> 
> 赞同：0
> 
> 时间：2012-07-23T04:15:44.090
> 
> 标签：c#, nhibernate, nhibernate-criteria

我正在编写一个包含项目列表的屏幕。每个项目都包括一个按钮，用户可以在其中弹出一个对话框以输入或阅读（他们先前输入的）对所述行项目的反馈。因为反馈包含大量文本数据并且每页可能有很多行项目，所以我使用 AJAX 按需加载反馈。

我希望根据用户是否留下反馈，为订单项的反馈按钮设置不同的图标。目标是让用户知道尚未输入的内容。我使用 NHibernate 作为我的 ORM。是否可以编写一个 NHibernate 查询，其中包含一个指示数据库列是否为空的布尔值？否则是否可以再次使用 NHibernate 返回每行的字符串长度？我正在使用 Criteria API，但我们将不胜感激。

本质上，我正在尝试这样做：

```
SELECT id, name, has_feedback is null as has_preview FROM my_table; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:35:59.630

可以使用 nhibernate 函数获取字符串长度

```
session.QueryOver<Foo>()
    .Select(Projections.SqlFunction("length", NHibernateUtil.Int32, Projections.Property<Foo>(foo => foo.Name)))
    .List();

session.CreateCriteria<Foo>()
    .SetProjection(Projections.SqlFunction("length", NHibernateUtil.Int32, Projections.Property(Name)))
    .List<int>(); 
```

# r - 拟合指数增长曲线并提取增长率参数（在 ggplot 中？）

> ID：11606418
> 
> 赞同：0
> 
> 时间：2012-07-23T04:15:51.397
> 
> 标签：r, curve-fitting, ggplot2, model-fitting

我目前生成了以下图：

数据：

```
 require(ggplot2)
just_growth_data=structure(list(ID = c(1L, 2L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 
25L, 27L, 28L, 29L, 30L, 31L, 33L, 34L, 35L, 37L, 38L, 39L, 40L, 
41L, 42L, 43L, 44L, 45L, 46L, 47L, 48L, 49L, 50L, 51L, 52L, 53L, 
54L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 66L, 
67L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 76L, 77L, 78L, 79L, 
80L, 81L, 82L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 
93L, 94L, 95L, 96L, 98L, 99L, 100L, 102L, 103L, 104L, 105L, 106L, 
107L, 108L, 109L, 111L, 112L, 113L, 114L, 115L, 116L, 117L, 118L, 
119L, 120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 128L, 129L, 
130L, 131L, 132L, 133L, 134L, 135L, 136L, 137L, 139L, 140L, 141L, 
142L, 143L, 144L, 145L, 146L, 147L, 148L, 149L, 150L, 151L, 152L, 
153L, 154L, 155L, 156L, 157L, 158L, 159L, 160L, 161L, 162L, 163L, 
164L, 165L, 166L, 167L, 168L, 169L, 170L, 171L, 172L, 173L, 174L, 
175L, 176L, 177L, 178L, 179L, 180L, 181L, 182L, 184L, 185L, 186L, 
187L, 188L, 189L, 191L, 192L, 193L, 194L, 195L, 197L, 198L, 199L, 
200L, 201L, 202L, 203L, 204L, 205L, 206L, 207L, 208L, 209L, 210L, 
211L, 212L, 213L, 214L, 215L, 216L, 217L, 218L, 219L, 220L, 221L, 
222L, 223L, 224L, 225L, 226L, 227L, 228L, 229L, 231L, 232L, 233L, 
234L, 235L, 236L, 237L, 238L, 239L, 241L, 242L, 244L, 245L, 246L, 
247L, 248L, 249L, 250L, 251L, 253L, 254L, 255L, 257L, 258L, 259L, 
260L, 261L, 262L, 263L, 264L, 266L, 267L, 268L, 269L, 270L, 271L, 
272L, 273L, 274L, 275L, 276L, 277L, 278L, 279L, 280L, 281L, 282L, 
284L, 285L, 286L, 287L, 288L, 289L, 290L, 291L, 292L, 293L, 295L, 
296L, 297L, 298L, 299L, 300L, 301L, 302L, 303L, 304L, 305L, 306L, 
307L, 309L, 310L, 311L, 312L, 313L, 314L, 315L, 316L, 317L, 318L, 
319L, 320L, 321L, 322L, 323L, 324L, 325L, 326L, 327L, 328L, 329L, 
330L, 331L, 333L, 334L, 335L, 336L, 337L, 338L, 339L, 340L, 341L, 
342L, 343L, 344L, 345L, 346L, 347L, 348L, 349L, 350L, 351L, 352L, 
353L, 354L, 355L, 356L, 357L, 358L, 359L, 360L, 361L, 362L, 363L, 
364L, 365L, 366L, 367L, 368L, 369L, 371L, 372L, 373L, 374L, 375L, 
376L, 377L, 378L, 379L, 380L, 381L, 382L, 383L, 384L, 385L, 386L, 
387L, 388L, 389L, 390L, 391L, 392L, 393L, 394L, 395L, 396L, 397L, 
399L, 401L, 402L, 403L, 404L, 405L, 406L, 407L, 408L, 409L, 410L, 
411L, 412L, 413L, 414L, 415L, 416L, 417L, 418L, 419L, 420L, 421L, 
422L, 423L, 424L, 425L, 426L, 427L, 428L, 429L, 430L, 431L, 432L, 
433L, 434L, 435L, 437L, 438L, 439L, 440L, 441L, 442L, 443L, 444L, 
445L, 446L, 447L, 448L, 449L, 450L, 451L, 452L, 453L, 454L, 455L, 
456L, 457L, 458L, 459L, 460L, 461L, 462L, 463L, 464L, 465L, 467L, 
468L, 469L, 470L, 471L, 472L, 473L, 474L, 475L, 476L, 477L, 478L, 
479L, 480L, 481L, 482L, 483L, 484L, 485L, 486L, 487L, 488L, 489L, 
490L, 491L, 492L, 493L, 494L, 495L, 496L, 497L, 498L, 499L, 500L, 
501L, 502L, 503L, 504L, 505L, 507L, 508L, 509L, 510L, 511L, 512L, 
513L, 514L, 515L, 516L, 517L, 518L, 519L, 520L, 521L, 522L, 523L, 
524L, 525L, 526L, 527L, 528L, 529L, 530L, 531L, 532L, 533L, 534L, 
535L, 536L, 537L, 538L, 539L, 540L, 541L, 542L, 543L, 544L, 545L, 
546L, 547L, 548L, 549L, 550L, 551L, 552L, 553L, 554L, 555L, 556L, 
557L, 558L, 559L, 560L, 561L, 562L, 563L, 564L, 565L, 566L, 567L, 
568L, 569L, 570L, 571L, 572L, 573L, 574L, 575L, 576L, 577L, 578L, 
579L, 580L, 581L, 582L, 583L, 584L, 585L, 586L, 587L, 588L, 589L, 
590L, 591L, 592L, 593L, 594L, 595L, 596L, 597L, 598L, 599L, 600L, 
601L, 603L, 604L, 605L, 606L, 607L, 608L, 609L, 610L, 611L, 612L, 
613L, 614L, 615L, 616L, 617L, 618L, 619L, 620L, 621L, 622L, 623L, 
624L, 625L, 626L, 627L, 628L, 630L, 631L, 632L, 633L, 634L, 635L, 
636L, 637L, 638L, 639L, 641L, 642L, 643L, 644L, 645L, 646L, 647L, 
648L, 649L, 650L, 651L, 652L), ColonyMass_At_Wrkr_Eclosion = c(NA, 
117L, NA, 53L, NA, 91L, 85L, 111L, 96L, NA, 112L, 90L, 112L, 
120L, 110L, 109L, NA, NA, 99L, 86L, 108L, 109L, 87L, 108L, 116L, 
137L, 108L, NA, NA, NA, 93L, NA, 96L, 98L, 87L, NA, 111L, NA, 
114L, NA, 11L, 123L, 113L, 130L, 134L, NA, NA, 96L, NA, NA, 15L, 
74L, NA, NA, 75L, 96L, 88L, NA, 122L, NA, 101L, 83L, 123L, 89L, 
85L, NA, 112L, 98L, 87L, 123L, 115L, 16L, 125L, NA, 91L, NA, 
85L, 76L, 122L, 95L, 113L, 116L, 102L, 132L, 11L, 105L, 112L, 
102L, 8L, NA, 113L, NA, 93L, 104L, 119L, 116L, 112L, 77L, NA, 
NA, 105L, 105L, 41L, 99L, NA, 113L, 120L, 130L, 98L, 122L, 118L, 
NA, NA, 97L, NA, NA, NA, 104L, 103L, 110L, 25L, 118L, 98L, 123L, 
NA, 97L, NA, 7L, 118L, NA, 82L, NA, 103L, 106L, 113L, NA, 115L, 
123L, 124L, 38L, 26L, 102L, 90L, NA, 59L, 102L, 82L, 120L, 113L, 
116L, 117L, 116L, 62L, 93L, 91L, 102L, 121L, 120L, NA, 111L, 
97L, 63L, 109L, 113L, 102L, 125L, 102L, 111L, 123L, 52L, 72L, 
NA, NA, 116L, NA, 81L, 52L, 52L, NA, 105L, 123L, 87L, NA, 136L, 
108L, NA, 120L, 122L, NA, NA, 126L, NA, 47L, 111L, 118L, NA, 
NA, NA, NA, 109L, NA, 99L, 106L, 53L, 102L, 77L, 99L, NA, NA, 
NA, 114L, NA, 111L, NA, 113L, NA, 76L, 114L, NA, 120L, 113L, 
97L, 134L, 98L, 118L, 75L, 109L, 124L, 108L, NA, 124L, NA, 65L, 
100L, NA, NA, 126L, 11L, 97L, 76L, NA, NA, 106L, 110L, 3L, 116L, 
NA, NA, 135L, 96L, 101L, NA, 92L, NA, NA, 118L, NA, 105L, 15L, 
129L, 128L, 102L, NA, 92L, 100L, NA, NA, 71L, 103L, NA, 113L, 
NA, NA, 63L, NA, 88L, 83L, 106L, 117L, 49L, NA, NA, 61L, 79L, 
NA, 91L, 102L, NA, 93L, NA, NA, NA, 87L, 126L, 99L, NA, NA, 100L, 
116L, 103L, 87L, 37L, NA, 112L, NA, NA, 18L, NA, 94L, NA, NA, 
NA, 117L, 102L, 62L, 96L, NA, 87L, 8L, NA, 86L, 61L, NA, 68L, 
117L, 89L, NA, 90L, NA, 104L, 94L, 102L, NA, 105L, 107L, 62L, 
130L, 99L, 111L, NA, 106L, 98L, NA, 140L, 88L, 94L, NA, 122L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA), ColonyMass_4wksLater = c(NA, 571L, NA, NA, NA, 736L, 
NA, NA, NA, NA, NA, 438L, NA, NA, 711L, NA, NA, NA, 537L, NA, 
844L, NA, NA, NA, 560L, 561L, NA, NA, NA, NA, 594L, NA, NA, 457L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 714L, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 417L, NA, NA, NA, 701L, NA, 
NA, NA, 25L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 866L, NA, NA, 
291L, NA, 659L, 354L, 743L, NA, NA, 696L, NA, NA, NA, NA, NA, 
NA, NA, 518L, NA, NA, NA, NA, NA, NA, 907L, 27L, NA, NA, 625L, 
NA, NA, 957L, 804L, NA, NA, NA, 650L, NA, NA, NA, NA, NA, NA, 
NA, 699L, 632L, NA, NA, 518L, NA, NA, NA, NA, NA, NA, 527L, 541L, 
NA, NA, NA, NA, NA, 448L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 382L, NA, 431L, NA, 620L, NA, 296L, NA, 532L, 
NA, 485L, NA, NA, NA, NA, NA, NA, 153L, NA, NA, NA, NA, 23L, 
NA, NA, NA, 606L, NA, NA, NA, 550L, 766L, NA, 426L, 786L, NA, 
NA, 289L, NA, 119L, 327L, NA, NA, NA, NA, NA, NA, NA, 602L, NA, 
20L, NA, NA, NA, NA, NA, NA, 152L, NA, 592L, NA, NA, NA, 1235L, 
197L, NA, 442L, NA, NA, 558L, NA, NA, NA, NA, 818L, NA, NA, NA, 
NA, NA, NA, NA, NA, 783L, NA, 519L, NA, NA, NA, 856L, 609L, NA, 
397L, NA, NA, 1195L, NA, 473L, NA, NA, NA, NA, 370L, NA, NA, 
3L, 561L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 783L, NA, NA, 
NA, NA, NA, NA, 537L, NA, NA, NA, NA, NA, 937L, NA, 696L, NA, 
NA, 859L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 902L, 430L, NA, 
11L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 354L, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, 682L, NA, NA, NA, NA, NA, 134L, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 670L, NA, NA, NA, NA, NA, 
NA, 537L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA), ColonyMass_2mnthsLater = c(NA, 445L, NA, 
NA, NA, 1817L, NA, NA, NA, NA, NA, 2683L, NA, NA, 1775L, NA, 
NA, NA, 429L, NA, 77L, NA, NA, NA, 279L, 23L, NA, NA, NA, NA, 
NA, NA, NA, 111L, NA, NA, NA, NA, NA, NA, NA, NA, NA, 70L, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 71L, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
249L, NA, NA, NA, NA, 1249L, 636L, 710L, NA, NA, 27L, NA, 50L, 
NA, NA, NA, NA, NA, 531L, NA, NA, NA, NA, NA, NA, 63L, NA, NA, 
NA, 416L, NA, NA, 400L, 902L, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 116L, NA, NA, NA, 674L, NA, NA, NA, NA, NA, NA, 1439L, 
305L, NA, NA, NA, NA, NA, 93L, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, 2L, NA, 1107L, NA, 13L, NA, 201L, NA, 470L, 
NA, 184L, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, 72L, NA, NA, NA, 2727L, 33L, NA, 121L, 643L, NA, NA, 
168L, NA, 160L, NA, NA, NA, NA, NA, NA, NA, NA, 1732L, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 666L, 60L, NA, 
128L, NA, NA, 140L, NA, NA, NA, NA, 15L, NA, NA, NA, NA, 1726L, 
NA, NA, NA, NA, NA, 1966L, NA, NA, NA, 77L, 76L, NA, 199L, NA, 
NA, 54L, NA, 377L, NA, NA, NA, NA, NA, NA, NA, NA, 738L, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 1422L, NA, NA, NA, NA, NA, 
NA, 695L, NA, NA, NA, NA, NA, 15L, NA, 1058L, NA, NA, 680L, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, 534L, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, 850L, NA, NA, NA, NA, NA, 11L, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, 51L, NA, NA, NA, NA, NA, NA, 146L, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA)), .Names = c("ID", 
"ColonyMass_At_Wrkr_Eclosion", "ColonyMass_4wksLater", "ColonyMass_2mnthsLater"
), class = "data.frame", row.names = c(NA, -622L)) 
```

代码：

```
require(reshape)
require(ggplot2)
data.m <- melt(just_growth_data, id.vars="ID")
ggplot(data.m, aes(x=variable, y=value, group=ID)) + 
  geom_line() + 
  geom_point() + 
  ylab("Weight (mg)") +
  xlab("Time") 
```

我试图为我的每个殖民地推导出一个增长率（假设指数增长）。我*认为*这样做的一种方法是：

1.  将指数曲线拟合到每个菌落的数据点，然后
2.  从曲线方程中提取增长率。

有人建议我尝试使用 nls 来完成此操作，甚至可以非常简单地从三个数据点得出指数曲线的参数。

不幸的是，我仍然没有能力接受这个建议：我不知道该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T06:54:42.027

建议你先走后跑。你知道如何将一条直线拟合到 R 中的一组点吗？你知道如何进行逻辑回归吗？告诉我们您所知道的——不要只是转储您的数据并说“我该怎么做 X？”。

查看 lm 和 glm 函数的帮助。使用图形函数（geom_smooth）然后试着把数字弄出来，这不是不合常理吗？当然，计算拟合更合乎逻辑，所以你有数字然后绘制它们？

这有点像 Windows 与命令行...

# c# - 用于编辑和查看数据的不同控件

> ID：11606430
> 
> 赞同：0
> 
> 时间：2012-07-23T04:16:58.503
> 
> 标签：c#, wpf, data-entry

我希望我的 wpf 窗口中的控件根据用户是查看还是编辑/插入数据而改变。例如，我想在查看时显示一个标签，但在编辑/插入时显示一个文本框（或组合框等）。

我可以使用 DataTemplates 执行此操作，还是必须为每个数据项设置两个控件并根据表单所处的模式更改可见性？

如果 DataTemplates 可以完成这项工作，有人可以指点我一些例子吗？

非常感谢 mcalex

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:43:06.750

在我看来，更好的方法是使用不同的数据模板进行控制，以防您总是需要一起使用它们。在任何情况下，您都必须选择切换模板或控件机制。您可以使用[DataTrigger（第一个答案）](https://stackoverflow.com/questions/4149544/wpf-setting-listview-view-via-datatrigger)或[ValueConverter](http://www.rhyous.com/2011/02/22/binding-visibility-to-a-bool-value-in-wpf/)

# android - 默认值不反映共享偏好

> ID：11606432
> 
> 赞同：0
> 
> 时间：2012-07-23T04:17:08.580
> 
> 标签：android, checkbox, default, sharedpreferences

我有一个扩展 PreferenceActivity 的设置类。我在相应的preferences.xml 中有一个复选框首选项。默认值为假。但是，我在运行期间将其设置为 true，并且每当应用程序启动时，该值都设置为 true。我需要它采用每次应用程序启动时为 false 的默认值。这不应该是默认行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:57:09.637

*根据对 OP 的评论*：

`PreferencesActivity`将每个项目保存在首选项中，以供以后在应用程序中使用。这些值在退出后也会保留。只有在之前未设置首选项时才会显示“默认”值，这意味着您的值只会在`false`有人将其设置为`true`. 他们可以稍后将其更改回`false`，但它永远不会再次使用默认值。

要重置为默认值，必须卸载并重新安装应用程序（或通过应用程序管理器清除其数据）。

# php - php PDO 获取数据的类型不是预期的

> ID：11606439
> 
> 赞同：0
> 
> 时间：2012-07-23T04:17:56.857
> 
> 标签：php, pdo, fetch

> **可能重复：**
> [PDO + MySQL 总是返回字符串，但是 MsSQL 呢？](https://stackoverflow.com/questions/6017354/pdo-mysql-always-returns-strings-but-what-about-mssql)

```
$stmt = DB::$dbh->prepare('SELECT id,title FROM map_level where id = ?');
$stmt -> execute(array($level));
$result = $stmt->fetch();
var_dump($result); 
```

id 的定义显然是数据库中的整数。但在返回的结果中，它是一个字符串类型。

```
array (
    'id' => '1',
    0 => '1'
) 
```

这很烦人，我不想手动将每个字符串都转换为 int。

# r - ggplot2 + gridExtra：如何确保不同大小的绘图格罗布中的 geom_bar 导致完全相同的条形宽度

> ID：11606441
> 
> 赞同：10
> 
> 时间：2012-07-23T04:18:01.110
> 
> 标签：r, ggplot2

这个问题的动机是进一步探索这个[问题](https://stackoverflow.com/questions/11301738/ggplot2-how-to-drop-unused-factors-in-the-axis-in-a-faceted-bar-plot-but-not-ha)。当每个刻面的柱数差异较大时，公认解决方案的问题变得更加明显。看看这个数据和使用该解决方案的结果图：

```
# create slightly contrived data to better highlight width problems
data <- data.frame(ID=factor(c(rep(1,9), rep(2,6), rep(3,6), rep(4,3), rep(5,3))),
                   TYPE=factor(rep(1:3,length(ID)/3)),
                   TIME=factor(c(1,1,1,2,2,2,3,3,3,1,1,1,2,2,2,1,1,1,2,2,2,1,1,1,1,1,1)),
                   VAL=runif(27))

# implement previously suggested solution
base.width <- 0.9
data$w <- base.width
# facet two has 3 bars compared to facet one's 5 bars
data$w[data$TIME==2] <- base.width * 3/5
# facet 3 has 1 bar compared to facet one's 5 bars
data$w[data$TIME==3] <- base.width * 1/5
ggplot(data, aes(x=ID, y=VAL, fill=TYPE)) +
  facet_wrap(~TIME, ncol=1, scale="free") +
  geom_bar(position="stack", aes(width = w),stat = "identity") +
  coord_flip() 
```

![宽度都一样，但间距不好](../Images/a6493dea7ef79856c386b7a2d199c8a7.png)

您会注意到宽度看起来完全正确，但方面 3 中的空白非常明显。在我见过的 ggplot2 中没有简单的方法可以解决这个问题（facet_wrap 没有`space`选项）。

下一步是尝试使用 gridExtra 解决这个问题：

```
# create each of the three plots, don't worry about legend for now
p1 <- ggplot(data[data$TIME==1,], aes(x=ID, y=VAL, fill=TYPE)) +
  facet_wrap(~ TIME, ncol=1) +
  geom_bar(position="stack", show_guide=FALSE) +
  coord_flip()
p2 <- ggplot(data[data$TIME==2,], aes(x=ID, y=VAL, fill=TYPE)) +
  facet_wrap(~ TIME, ncol=1) +
  geom_bar(position="stack", show_guide=FALSE) +
  coord_flip()
p3 <- ggplot(data[data$TIME==3,], aes(x=ID, y=VAL, fill=TYPE)) +
  facet_wrap(~ TIME, ncol=1) +
  geom_bar(position="stack", show_guide=FALSE) +
  coord_flip()

# use similar arithmetic to try and get layout correct
require(gridExtra)
heights <- c(5, 3, 1) / sum(5, 3, 1)
print(arrangeGrob(p1 ,p2, p3, ncol=1,
            heights=heights)) 
```

![宽度错误](../Images/13e7745ef9fbc9562d908c7fd4e4e10d.png)

您会注意到我使用了之前根据每个刻面的柱数建议的相同算法，但在这种情况下，它最终会出现可怕的错误。这似乎是因为在数学中我需要考虑额外的“恒定高度”元素。

另一个复杂因素（我相信）是最终输出（以及宽度是否匹配）还取决于我将最终 grob 输出到的位置的宽度和高度，无论是在 R/RStudio 环境中，还是一个PNG文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:46:13.413

像这样的东西似乎有效，但它没有 - 不完全。它具有工作的外观，因为 ID 因子的级别是连续的。其他任何事情，都`scale = "free"`失败了。但也许有可能进一步发展。该方法使用`facet_grid`，因此`space = "free"`可以使用。该方法使用 geom_rect 将不同颜色的矩形层叠在一起。它需要计算累积和，以便可以定位每个矩形的右侧边缘。

```
data <- data.frame(ID=factor(c(rep(1,9), rep(2,6), rep(3,6), rep(4,3), rep(5,3))),
                   TYPE=factor(rep(1:3,3)),
                   TIME=factor(c(1,1,1,2,2,2,3,3,3,1,1,1,2,2,2,1,1,1,2,2,2,1,1,1,1,1,1)),
                   VAL=runif(27))

library(ggplot2)
library(plyr)

# Get the cumulative sums
data = ddply(data, .(ID, TIME), mutate, CUMSUMVAL = cumsum(VAL))

ggplot(data, aes(x=VAL, y = as.numeric(ID), fill=TYPE)) +
   geom_rect(data = subset(data, TYPE == 3), aes(xmin = 0, xmax = CUMSUMVAL, ymin = as.numeric(ID)-.2, ymax = as.numeric(ID)+.2)) +
   geom_rect(data = subset(data, TYPE == 2), aes(xmin = 0, xmax = CUMSUMVAL, ymin = as.numeric(ID)-.2, ymax = as.numeric(ID)+.2)) +
   geom_rect(data = subset(data, TYPE == 1), aes(xmin = 0, xmax = CUMSUMVAL, ymin = as.numeric(ID)-.2, ymax = as.numeric(ID)+.2)) +
   facet_grid(TIME~., space = "free", scale="free") +
   scale_y_continuous(breaks = c(1:5), expand = c(0, 0.2)) 
```

![在此处输入图像描述](../Images/505ec805121fde142ecb2d0d8d14a119.png)

**编辑：** 或者真的粗线效果更好（我认为）

```
ggplot(data, aes(x=VAL, y = ID, colour=TYPE)) +
       geom_segment(data = subset(data, TYPE == 3), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
       geom_segment(data = subset(data, TYPE == 2), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
       geom_segment(data = subset(data, TYPE == 1), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
       facet_grid(TIME~., space = "free", scale="free") 
```

![在此处输入图像描述](../Images/e1dfb03edbbcd43762b9d6ae0fa6860c.png)

**附加编辑** 从您的早期帖子中获取数据，并对其进行一些修改。
**更新** `opts`已弃用；改为使用`theme`。

```
df <- structure(list(ID = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 
5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L), .Label = c("a", 
"b", "c", "d", "e", "f", "g"), class = "factor"), TYPE = structure(c(1L, 
2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 
1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 5L, 6L, 1L, 2L, 3L, 4L, 
5L, 6L, 1L, 2L, 3L), .Label = c("1", "2", "3", "4", "5", "6", 
"7", "8"), class = "factor"), TIME = structure(c(2L, 2L, 2L, 
2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 3L, 3L, 3L, 3L, 3L, 3L, 
1L, 1L, 1L), .Label = c("One", "Five", "Fifteen"), class = "factor"), VAL = c(0.937377670081332, 
0.522220720537007, 0.278690102742985, 0.967633064137772, 0.116124767344445, 
0.0544306698720902, 0.470229141646996, 0.62017166428268, 0.195459847105667, 
0.732876230962574, 0.996336271753535, 0.983087373664603, 0.666449476964772, 
0.291554537601769, 0.167933790013194, 0.860138458199799, 0.172361251665279, 
0.833266809117049, 0.620465772924945, 0.786503327777609, 0.761877260869369, 
0.425386636285111, 0.612077651312575, 0.178726130630821, 0.528709076810628, 
0.492527724476531, 0.472576208412647, 0.0702785139437765, 0.696220921119675, 
0.230852259788662, 0.359884874196723, 0.518227979075164, 0.259466265095398, 
0.149970305617899, 0.00682218233123422, 0.463400925742462, 0.924704828299582, 
0.229068386601284)), .Names = c("ID", "TYPE", "TIME", "VAL"), row.names = c(NA, 
-38L), class = "data.frame")

library(ggplot2)
library(plyr)

data = ddply(df, .(ID, TIME), mutate, CUMSUMVAL = cumsum(VAL))

ggplot(data, aes(x=VAL, y = ID, colour=TYPE)) +
           geom_segment(data = subset(data, TYPE == 6), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
           geom_segment(data = subset(data, TYPE == 5), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
           geom_segment(data = subset(data, TYPE == 4), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
           geom_segment(data = subset(data, TYPE == 3), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
           geom_segment(data = subset(data, TYPE == 2), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
           geom_segment(data = subset(data, TYPE == 1), aes(x = 0, xend = CUMSUMVAL, y = ID, yend = ID), size = 10) +
           facet_grid(TIME~., space = "free", scale="free") +
           theme(strip.text.y = element_text(angle = 0)) 
```

![在此处输入图像描述](../Images/eca7058b24ef3016cc91cd78e9299781.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:54:20.720

不幸的是，更改 gtable 并没有帮助，因为条形宽度是相对单位，

```
g = ggplot_gtable(ggplot_build(p))
panels = which(sapply(g$heights, attr, "unit") == "null")
g$heights[[panels[1]]] <- unit(5, "null")
g$heights[[panels[2]]] <- unit(3, "null")
g$heights[[panels[3]]] <- unit(1, "null")
grid.draw(g) 
```

![在此处输入图像描述](../Images/1ab3f59964af74af152c58274ba9fec1.png)

# c# - 使用 SP.UI.ModalDialog.OpenPopUpPage 时如何刷新父页面？

> ID：11606442
> 
> 赞同：0
> 
> 时间：2012-07-23T04:18:06.257
> 
> 标签：c#, sharepoint

我使用这个从我的页面（**PageA.aspx** ）打开一个对话框（比如说**DialogA.aspx ）**

 **```
function OpenCustomDialog(dialogUrl, dialogWidth, dialogHeight, dialogTitle, dialogAllowMaximize, dialogShowClose) {

    var options = {
        url: dialogUrl,
        allowMaximize: dialogAllowMaximize,
        showClose: dialogShowClose,
        width: dialogWidth,
        height: dialogHeight,
        title: dialogTitle,
        dialogReturnValueCallback: Function.createDelegate(null, CloseCallback3)
    };
    SP.UI.ModalDialog.showModalDialog(options);
} 
```

从那个对话框中，我尝试使用这个打开另一个弹出窗口

函数 OpenPopupInDialog(dialogUrl, dialogWidth, dialogHeight) {

```
SP.UI.ModalDialog.OpenPopUpPage(dialogUrl, null, dialogWidth, dialogHeight); 
```

}

但是当我关闭弹出窗口时，我想刷新**DialogA.aspx**。

我该怎么做 ？

顺便说一句，我还是 SharePoint 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:26:41.247

您可以从那里添加实现您自己的关闭回调和刷新页面。

有关更多详细信息，请参阅此链接：http: [//antoniolanaro.blogspot.com/2011/04/open-sharepoint-2010-modal-dialog-and.html](http://antoniolanaro.blogspot.com/2011/04/open-sharepoint-2010-modal-dialog-and.html)。

**更新：** 根据[SP.UI.ModalDialog.OpenPopUpPage function](http://msdn.microsoft.com/en-us/library/ff410825.aspx)的文档，第二个参数是对话框关闭时要调用的函数的回调。我想你可以尝试这样做：

*   在要刷新的页面上（在本例中为**DialogA.aspx**），您可以添加刷新页面的功能，即

    ```
    function CustomPageRefresh(dialogResult, returnValue) {
        document.location.reload(); //or another method you need to refresh the page in your case
    } 
    ```

*   在同一页面上，将 更改`OpenPopupInDialog`为如下内容：

    ```
    function OpenPopupInDialog(dialogUrl, dialogWidth, dialogHeight) {
        SP.UI.ModalDialog.OpenPopUpPage(dialogUrl, CustomPageRefresh, dialogWidth, dialogHeight);
    } 
    ```**

# jquery - 使用“application/json; charset=utf-8”向 mvc 发送 ajax 帖子从 vs Web 开发人员服务器返回错误 500

> ID：11606449
> 
> 赞同：2
> 
> 时间：2012-07-23T04:19:54.743
> 
> 标签：jquery, ajax, asp.net-mvc

我正在尝试将 javascript 对象发送到 VS 2010 中的 MVC 方法。使用 VS Web 服务器。

```
 $.ajax({ 
            type: "POST",
            url: "@Url.Action("Filter", "Grid")",
            dataType: "json", 
            data: {"data": JSON.stringify(filtersData) }, 
            contentType: "application/json; charset=utf-8", 
            traditional: true,
            success: function (data) { 
                alert("ok"); 
            },
            error:function (xhr, ajaxOptions, thrownError) { 
                alert(xhr.status); 
                alert(thrownError); 
            }
        }); 
```

添加 contentType 参数时会导致 500 错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T20:40:33.333

这最终奏效了：

```
 var filtersApplyData = GetFiltersApplyData@(Model.PropertyID)();
    var data = JSON.stringify({data: filtersApplyData, classID: @(Model.ClassID)});
    $.ajax({ 
            type: "POST",
            url: "@Url.Action("ApplyFilters", "Grid")",
            data: data, 
            contentType: "application/json", 
            traditional: true,
            success: function (data) { 
                $("#grid").html(data);
            },
            error:function (xhr, ajaxOptions, thrownError) { 
                alert(xhr.status); 
                alert(ajaxOptions); 
                alert(thrownError); 
            }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:23:06.040

从您发布的内容很难看出这一点。

500 错误意味着您调用的服务存在，但在处理您传递给它的数据时出错。

如果您可以控制服务（听起来您可能基于您的问题的标题），请检查其错误日志或直接在服务器上运行您的代码（通常您会收到更广泛的错误消息）。如果您没有任何错误日志记录（例如没有 NLog 等），请检查 Windows 事件日志。

如果您无法控制该服务，请通知提供该服务的人员它正在产生错误。

# java - 框架隐藏问题

> ID：11606453
> 
> 赞同：0
> 
> 时间：2012-07-23T04:20:52.650
> 
> 标签：java, hide, frame

当我试图打开一个新框架时，我无法隐藏一个新框架。在这段代码的末尾，调用了另一个类的 start() 方法，我希望隐藏这个类框架，但我似乎无法从其当前位置访问 from。

```
package InventoryApp;

//Import
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
 /**
 *
 * @author Curtis
 */
public class JSplash extends JFrame implements ActionListener
{
    //declaration of variable objects
    Font myFont = new Font("Arial", Font.BOLD, 20);
    JButton myButton = new JButton("Click Me!");
    Color bgColor = new Color(0,0,255);
    Color firstColor = new Color(255,255,255);
    String first = "Welcome to DaemoDynamics!";
     String last = "Click the Button";
     String middle = "";
     String middle2 = "";

    int count = 1;  
    //Constructor
    public JSplash()
            {
                super("Item Inventory Application");
                setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                setLayout (new BorderLayout());
                add(myButton, BorderLayout.SOUTH);
                setDefaultLookAndFeelDecorated(true);
                getContentPane().setBackground(bgColor);
                //adds action listener
                myButton.addActionListener(this);
            }
    //Paint method
    @Override
    public void paint(Graphics e)
    {
        super.paint(e);
        e.setFont(myFont);
        e.setColor(firstColor);

          e.drawString(first, 14, 80);
          e.drawString(last, 70, 240);
          e.drawString(middle, 75, 150);
          e.drawString(middle2, 60, 175);
    }

     public static void begin()
     {
             final int TALL = 316;
             final int WIDE = 304;
             JSplash frame = new JSplash();
             frame.setSize(WIDE, TALL);
             frame.setVisible(true);
     }
    //Listener Method
    @Override
    public void actionPerformed(ActionEvent e) 
    {
        //First Time button hit
        if(count == 1)
        {
            middle = "Brighter Business";
                middle2 = "for A Brighter Future";
                last = "Click Again to Begin";
                repaint();
            //increases button count
            count ++;
        }
        else//if button count is not 1
        {
            frame.setVisible(false);
            FinalProject.start();
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:27:10.027

被`frame`声明为局部变量，因此超出了`actionPerformed()`方法的范围。

# c# - C# 聊天客户端的聊天垃圾邮件自动阻止

> ID：11606455
> 
> 赞同：0
> 
> 时间：2012-07-23T04:21:31.103
> 
> 标签：c#, spam-prevention

我真的是 C# 的新手，所以目前我正在开发这个 LAN 信使，供学校使用。Messenger本身的代码，包括我在互联网上找到的服务器和客户端，所以我没有自己编写所有代码。发送和接收消息的基本代码已被复制。无论如何！我遇到了人们在聊天中发送垃圾邮件的问题。客户端包含连接选项，以及用于所有传入消息的多行文本框、用于编写消息的文本框和用于发送消息本身的发送按钮。有没有办法阻止人们向聊天客户端“发送垃圾邮件”？例如，如果用户在 2 秒内发送了 5 条消息，则锁定“发送消息”文本框。怎么可能做到这一点？它不必锁定文本框，只要它阻止垃圾邮件用户发送更多消息即可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:31:15.847

首先要考虑的是*永远不要信任客户*。这意味着任何有权访问您的源代码，甚至知道服务器使用的协议的人，都可以编写自己的客户端来整天发送垃圾邮件。

假设垃圾邮件只是来自使用您提供的客户端的人，您当然可以计算在给定时间范围内发送的消息数量，并在超过阈值时禁用“发送”按钮。

假设这是使用 WinForms，阻止按钮的代码将类似于：

```
btnSend.Enabled = false; 
```

要跟踪最近历史中发送的消息数量，您可以创建类似

```
List<DateTime> messageTimestamps; 
```

并把时间戳放在那里。

当有人发送消息时，请执行以下操作：

*   从列表中删除所有超过（比如说）2 秒的条目
*   将新条目添加到列表中
*   如果列表计数 >（比如）5，禁用发送按钮并丢弃此消息

此时，您需要启动一个计时器来清除阻塞状态。看一下

[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

看看它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:35:18.907

每次用户发送消息时，可能会有一个计数器计数，如果计数器达到 5，请做任何你想做的事情来阻止用户发送另一条消息。然后只需使用 Timer 对象每 2 秒重置一次计数器。

```
int spam = 0;
Timer timer = new Timer(2000);
timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
timer.Enabled = true;

static void timer_Elapsed(object sender, ElapsedEventArgs e)
{
    spam = 0;
}

if (spam < 5)
{
    //send message as usual
    spam++;
}
else
    //notify user that sending messages has been disabled, please wait 'x' seconds to send another message 
```

# asp.net - Mono 在带有 ASP.NET Web 应用程序的 Ubuntu 中使用 mscorlib.dll 2.0 而不是 4.0

> ID：11606456
> 
> 赞同：1
> 
> 时间：2012-07-23T04:21:46.037
> 
> 标签：asp.net, linux, mono, mscorlib

我是新来的。

我已经在这个网站上搜索了答案，并找到了一种解决方法，但我仍然希望解决最初的问题。我已将目标框架设置为`Mono/.NET 4.0`并且我正在使用`Mysql.Data.dll`. 它编译得很好，但是当我尝试在笔记本电脑上的 xsp2 Web 服务器上运行它时，我遇到了错误：

> 程序集中缺少方法 .ctor
> /tmp/kari-temp-aspnet-0/eaee30a1/assembly/shadow/04e2c4cc/18848ad4_1c664e18_00000001/MySql.Data.dll，类型 System.Security.SecurityRulesAttribute
> 找不到自定义 attr 构造函数图像：
> /tmp /kari-temp-aspnet-0/eaee30a1/assembly/shadow/04e2c4cc/18848ad4_1c664e18_00000001/MySql.Data.dll mtoken: 0x0a00002a
> 缺少方法 System.Threading.Monitor::Enter(object,bool&) 在程序集 /usr/lib/mono /2.0/mscorlib.dll，在程序集中引用 /tmp/kari-temp-aspnet-0/eaee30a1/assembly/shadow/04e2c4cc/18848ad4_1c664e18_00000001/MySql.Data.dll

在这里你可以看到它正在使用`.../2.0/mscorlib.dll`. 我试图创建一个新项目，就像这个线程建议[Mono 采用 mscorlib.dll 2.0 而不是 4.0](https://stackoverflow.com/questions/10878948/mono-take-mscorlib-dll-2-0-instead-of-4-0)但它仍然做同样的事情。如果我将目标框架设置为`Mono/.NET 2.0`，我会遇到一些其他错误。

对于解决方法，我`mscorlib.dll`在 2.0 中重命名，然后在 4.0 目录中创建了指向同一文件的符号链接，正如这里的一些帖子所建议的那样，它可以工作，但我对此并不满意。

有没有办法手动编辑项目配置文件以选择 4.0 目标而不是 2.0？这应该作为一个错误报告给 MonoDevelop 吗？我正在使用 MonoDevelop 2.8.6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:22:55.713

这就是 xsp 的工作原理：

```
xsp2 => mscorlib.dll 2.0  
xsp4 => mscorlib.dll 4.0 
```

# android - Android Gridview 无间距

> ID：11606461
> 
> 赞同：0
> 
> 时间：2012-07-23T04:22:12.590
> 
> 标签：android, image, gridview, padding, spacing

各位晚上好，

我有一个图像网格视图，但我希望它们彼此齐平（没有点击时出现的边框）。

我已经将垂直和水平间距以及填充设置为零。然而，当点击时，gridview“点击边框”仍然出现。如何扩展我的图像，或将其删除以使我不再看到它。

如果你还不清楚，我可以提供截图。

谢谢，-米切尔

![在此处输入图像描述](../Images/f99776ab7f53add4ce50ff6fb0cf931d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:26:44.677

尝试使用九个补丁位图作为选择器。
还要确保底部和右侧的黑色线条（九个补丁）**覆盖所有侧面**。
在这种情况下，您的图片之间不会有偏移

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T11:23:27.797

我认为你应该使用

公共无效 setSelector (int resID)

并将其设置为完全透明的可绘制

您可以在 xml 文件中定义的可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <stroke android:width="0px" android:color="@android:color/transparent" />
<padding android:left="0dp" android:top="0dp" android:right="0dp"
    android:bottom="0dp" />
<corners android:radius="0px"/>
</shape> 
```

# ldap - 不同域中电子邮件地址的 LDAP 过滤器

> ID：11606462
> 
> 赞同：3
> 
> 时间：2012-07-23T04:22:13.837
> 
> 标签：ldap

我有一个 AD 域 mycompany.com。

每个帐户都有一个@mycompany.com 电子邮件地址，但也有一些具有不同域的电子邮件地址；在这些情况下，该帐户将有一个@mycomapny.com 地址和一个@somethingelse.com 地址，其中@somethingelse.com 可以是任何域。

如何构建 LDAP 查询以查找具有非 @mycompany.com 地址的帐户？LDAP 属性是 proxyAddresses，具有多个地址的帐户将如下所示：

proxyAddresses: SMTP:BOB@mycompany.com proxyAddresses: smtp:BOB@randomdomain.org proxyAddresses: X400:c=AU;a= ;p=MyCompany;o=Exchange;s=BOB;

如果我过滤 (!(proxyAddresses=*mycompany.com)) 那么我将排除所有具有 mycompany.com 地址的帐户，即使它们也关联了不同的地址。

如何为“此属性的值不以 mycompany.com 结尾”构建 LDAP 查询

# facebook - 从应用页面重定向到粉丝页面

> ID：11606470
> 
> 赞同：1
> 
> 时间：2012-07-23T04:23:01.790
> 
> 标签：facebook, redirect

嘿。

有没有其他方法可以将用户从应用页面 (apps.facebook.com) 重定向到粉丝页面应用网站 (/pages/example/appid=123456789)。

我实际上是用这段代码做的：

```
<script type="text/javascript">
function NotInFacebookFrame() {
return top === self;
}
function ReferrerIsFacebookApp() {
if(document.referrer) {
    return document.referrer.indexOf("apps.facebook.com") != -1;
}
return false;
}
if (NotInFacebookFrame() || ReferrerIsFacebookApp()) {
top.location.replace("http://fanpage.com");
}
</script> 
```

因为如果您收到邀请，您将被发送到应用页面，而不是粉丝页面。但是重定向很慢，我看到一些应用程序的重定向非常快。这是它像我想要的那样重定向的应用程序：http: [//www.facebook.com/apps/application.php?id=402068793183793](http://www.facebook.com/apps/application.php?id=402068793183793)

我如何获得此重定向消息？我找不到任何解决方案....

最好的问候，安德烈亚斯。

# ruby-on-rails - 您如何执行 AJAX 提交并获取主干.js？

> ID：11606473
> 
> 赞同：0
> 
> 时间：2012-07-23T04:23:08.157
> 
> 标签：ruby-on-rails, backbone.js

我正在尝试通过 AJAX 提交提取数据并将其呈现到`#search_results`主干中的 div 中。我该怎么做呢？我对骨干完全陌生，仍在学习。

谢谢！

RoR 控制器：

```
class ClassroomsController < PublicController
  def search
    @search_result = Classroom.first
    respond_with @search_result
  end
end 
```

RoR 视图：

```
= form_tag search_path, :method => :get, :id => "search_form", do
  = text_field_tag :search_textbox
  = submit_tag "Search", :id => "search_button"
#search_results 
```

教室/search.js.erb：

```
$("#search_results").html("<%=escape_javascript(render 'search')%>"); 
```

教室/search.html.haml：

```
= @search_result.classroom.title 
```

主干.js 视图：

```
class Classrooms.Views.Classroom extends Backbone.View

  events:
    "submit #search_button": "getResults"

  render: ->
    $(@el).html($("#classroom_main").html())
    @setActiveNavItem("main")
    this

  getResults: (event) ->
    event.stopPropagation()
    event.preventDefault()
    $.get $(this).attr("action"), $(this).serialize(), null, "script"
    return false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:08:24.730

嗨，BackboneJS 的工作方式有点不同，它在客户端有 MVC 和一个 RESTful 后端。

[http://www.quora.com/How-can-I-use-Backbone-js-with-Ajax-calls-to-the-server/answer/Diego-Castorina](http://www.quora.com/How-can-I-use-Backbone-js-with-Ajax-calls-to-the-server/answer/Diego-Castorina)

也许这个链接可以帮助你理解 MVC、REST 和 Backbone：

*   [http://backbonetutorials.com/](http://backbonetutorials.com/)
*   [http://net.tutsplus.com/tutorials/javascript-ajax/getting-started-with-backbone-js/](http://net.tutsplus.com/tutorials/javascript-ajax/getting-started-with-backbone-js/)
*   [https://github.com/kjbekkelund/writings/blob/master/published/understanding-backbone.md/](https://github.com/kjbekkelund/writings/blob/master/published/understanding-backbone.md/)

祝你好运

# android - 安卓离线语音识别

> ID：11606476
> 
> 赞同：0
> 
> 时间：2012-07-23T04:23:53.350
> 
> 标签：android, speech-recognition, offline

> **可能重复：**
> [Android：语音识别不使用谷歌服务器](https://stackoverflow.com/questions/4396046/android-speech-recognition-without-using-google-server)
> [android 语音识别情感检测器](https://stackoverflow.com/questions/11651059/android-speech-recognition-emotion-detector)

嘿，这里有没有人知道在 android 中是否可以实现离线语音识别？如果是，请告诉我。您的任何帮助将不胜感激！

# python - 有人知道如何修复 unicode 错误吗？

> ID：11606481
> 
> 赞同：1
> 
> 时间：2012-07-23T04:24:49.387
> 
> 标签：python, google-app-engine, unicode

我正在使用适用于 Python 的 Google App Engine，但出现 unicode 错误，有没有办法解决它？这是我的代码：

```
def get(self):
    contents = db.GqlQuery("SELECT * FROM Content ORDER BY created DESC")
    output = StringIO.StringIO()
    with zipfile.ZipFile(output, 'w') as myzip:
        for content in contents:
            if content.code:
                code=content.code
            else:
                code=content.code2
            myzip.writestr("udacity_code", code)

    self.response.headers["Content-Type"] = "application/zip"
    self.response.headers['Content-Disposition'] = "attachment; filename=test.zip"
    self.response.out.write(output.getvalue()) 
```

我现在收到一个 unicode 错误：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 12 中的字节 0xf7：序数不在范围内（128）

我相信它来自 output.getvalue()... 有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:50:13.640

@Areke Ignacio 的答案是解决方法。这里有一个简短的演练是我最近写的一篇文章“Python and Unicode Punjabi” [https://www.pippallabs.com/blog/python-and-unicode-panjabi](https://www.pippallabs.com/blog/python-and-unicode-panjabi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T13:31:23.030

我有完全相同的问题。最后我通过改变对 writestr 的调用来解决它

```
myzip.writestr("udacity_code", code) 
```

到

```
myzip.writestr("udacity_code", code.encode('utf-8')) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T04:28:58.483

从这个链接：

> [Python UnicodeDecodeError：“ascii”编解码器无法解码字节 0xe2 序数不在范围内（128）](https://stackoverflow.com/questions/10934184/python-unicodedecodeerror-ascii-codec-cant-decode-byte-0xe2-ordinal-not-in-r)
> 
> 但是与此同时，您的问题是您的模板是 ASCII，但您的数据不是（无法判断它是 utf-8 还是 unicode）。简单的解决方案是在每个模板字符串前面加上 u 以使其成为 Unicode。

# jakarta-ee - 使用 MQ 消息：JMS 侦听器与消息驱动 Bean

> ID：11606484
> 
> 赞同：3
> 
> 时间：2012-07-23T04:25:24.177
> 
> 标签：jakarta-ee, ejb, jms, ejb-3.1, message-driven-bean

我们的 IBM MQ 系列队列**Q1**将接收我们需要使用、调用 XSLT 并将生成的 XML 放在另一个队列**Q2**上的 XML 消息。消息的大小很小（最多 5KB）。我们可以有 50 种不同类型的 XML 消息。它们相互独立

该系统接近实时，因此我们只能有长达 1-2 分钟的小延迟。最坏的情况是所有 50 个文件可以同时进入队列，因此程序需要相对健壮。

我们使用 IBM Websphere App Server。Eclipse 用于开发。

**问题：我们是否应该编写一个实现***MessageListener*接口的 JMS 程序或一个*消息驱动 Bean*来使用队列**Q1**中的消息，调用 XSLT 并将生成的 XML 放在**Q2**上？JMS 与 MDB 的优缺点是什么？我已经很多年没有使用过 JMS，所以我会很感激任何关于配置、开发和测试的想法、技巧和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:39:15.880

消息驱动 Bean 是一个异步消息侦听器。我认为使用 Message Driven Bean 会更好。这样，您将获得 ejb 容器提供的所有服务，例如事务、安全性、资源、并发性和消息确认。采用 JMS 程序的方式，您需要自己处理所有这些服务，特别是您自己的情况下的并发性。

# python - 如何在 Python 中使用 subprocess 模块编写标准输入之前打印标准输出

> ID：11606485
> 
> 赞同：1
> 
> 时间：2012-07-23T04:25:44.737
> 
> 标签：python, subprocess

我正在编写一个脚本，其中外部系统命令有时可能需要用户输入。我无法正确处理。我曾尝试使用 os.popen4 和 subprocess 模块，但无法实现所需的行为。

下面提到的示例将使用“cp”命令显示此问题。（“cp”命令用于显示此问题，我正在调用一些不同的 exe，在某些情况下可能会类似地提示用户响应）。在此示例中，磁盘上存在两个文件，当用户尝试将 file1 复制到 file2 时，会出现一条conformer 消息。

```
proc = subprocess.Popen("cp -i a.txt b.txt", shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT,)
stdout_val, stderr_val = proc.communicate()
print stdout_val 
```

> > b.txt？

```
proc.communicate("y") 
```

现在在这个例子中，如果我只读取 stdout/stderr 并打印它，稍后如果我尝试根据用户的输入写入“y”或“n”，我会收到一个错误，即通道已关闭。

有人可以帮我在python中实现这种行为，这样我就可以先打印标准输出，然后再接受用户输入并稍后再写标准输入。

[我在 python 中的 subprocess.PIPE 上的非阻塞读取中](https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python)找到了另一个解决方案（线程），不确定它是否有帮助。但它似乎是来自 cp 命令的打印问题，我已经修改了代码，但不确定如何编写线程代码。

```
import sys
from subprocess import PIPE, Popen
from threading import Thread
try:
    from Queue import Queue, Empty
except ImportError:
    from queue import Queue, Empty

ON_POSIX = 'posix' in sys.builtin_module_names

def enqueue_output(out, queue):
    for line in iter(out.readline, b''):
        queue.put(line)
    out.close()

 p = Popen(['cp', '-i', 'a.txt', 'b.txt'],stdin=PIPE, stdout=PIPE, bufsize=1, close_fds=ON_POSIX)
q = Queue()
t = Thread(target=enqueue_output, args=(p.stdout, q))
t.start()

try:
    line = q.get_nowait()
except Empty:
    print('no output yet')
else:
   pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:15:21.657

`Popen.communicate`将运行子流程以完成，因此您不能多次调用它。您可以直接使用[`stdin`and`stdout`属性](http://docs.python.org/dev/library/subprocess.html#subprocess.Popen.stdin)，尽管这样做有风险，因为如果进程使用块缓冲或缓冲区已满，您可能会死锁：

```
stdout_val = proc.stdout.readline()
print stdout_val
proc.stdin.write('y\n') 
```

由于存在死锁的风险，并且如果进程使用块缓冲，这可能不起作用，您最好考虑使用[`pexpect`包](http://pypi.python.org/pypi/pexpect/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:32:22.160

我对这个问题没有技术答案。更多只是一个解决方案。它与进程等待输入的方式有关，一旦你与进程通信，一个 None 输入就足以关闭进程。

对于您的`cp`示例，您可以做的是立即使用`proc.poll()`. 如果返回值为`None`，您可能会认为它正在尝试等待输入并可以向您的用户提问。然后，您可以通过 将响应传递给进程`proc.communicate(response)`。然后它将传递该值并继续该过程。

也许其他人可以用一个更技术性的原因来解释为什么初始`communicate`值为 None 会关闭该过程。

# wpf - 如何在 MVVM/Prism 中获取数据绑定调试信息？

> ID：11606486
> 
> 赞同：0
> 
> 时间：2012-07-23T04:25:57.313
> 
> 标签：wpf, debugging, data-binding, mvvm, prism

我正在第一次认真涉足 Prism(Unity)。我有一个带有工具栏控件的模块，它被（正确地）加载到它应该加载的区域中。此工具栏是一个列表框，其中 ItemsSource 数据绑定到其 ViewModel 上的 ToolButtons 属性，构造函数实例化三个 ToolButtons 并将其添加到 ToolButtons 集合。

我的 ToolButton 类具有三个自定义 DependencyProperties：Title（字符串）、ButtonFace（图像）、ActiveDocumentCount（int）。样式由模块中的资源字典负责，其中包含样式和关联的 ControlTemplate。我已经对属性进行了数据绑定，但是没有任何值或图像通过 TemplateBinding 显示（但是样式中的其他元素是）。

我正在尝试调试数据绑定，但无济于事。我在“输出”窗口中没有得到任何相关的消息，并且[**该博客**](http://www.beacosta.com/blog/?p=52)中的第二和第三个建议也没有产生任何输出。我认为，如果我能得到详细的（即 PresentationTraceSources.TraceLevel=High）输出，我就能弄清楚数据绑定前端发生了什么。

编辑：

# 工具按钮类

```
public class ToolButton : Button
{
    public ToolButton()
    {
        //DefaultStyleKeyProperty.OverrideMetadata(typeof(ToolButton), new FrameworkPropertyMetadata(typeof(ToolButton)));
    }

    public Image ButtonFace
    {
        get { return (Image)this.GetValue(ButtonFaceProperty); }
        set { this.SetValue(ButtonFaceProperty, value); }
    }
    public static readonly DependencyProperty ButtonFaceProperty =
        DependencyProperty.Register("ButtonFace", typeof(Image), typeof(ToolButton), new PropertyMetadata(null));

    public string Title
    {
        get { return (string)this.GetValue(TitleProperty); }
        set { this.SetValue(TitleProperty, value); }
    }

    public static readonly DependencyProperty TitleProperty =
        DependencyProperty.Register("Title", typeof(string), typeof(ToolButton), new PropertyMetadata(""));

    public int OpenRecordCount
    {
        get { return (int)this.GetValue(OpenRecordCountProperty); }
        set { this.SetValue(OpenRecordCountProperty, value); }
    }

    public static readonly DependencyProperty OpenRecordCountProperty =
        DependencyProperty.Register("OpenRecordCount", typeof(int), typeof(ToolButton), new PropertyMetadata(null));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:23:28.847

那些 DP 在 CLR 支持的属性中看起来不错 SetValue 很好....但是如果您或任何人在这些属性上设置本地值（例如，通过调用您的 CLR 支持的属性或 DependencyObject.SetValue），那么这将破坏绑定。

相关链接：

*   [http://arbel.net/2009/11/04/local-values-in-dependencyobjects/](http://arbel.net/2009/11/04/local-values-in-dependencyobjects/)

*   [http://blogs.msdn.com/b/vinsibal/archive/2009/05/21/the-control-local-values-bug-solution-and-new-wpf-4-0-related-apis.aspx](http://blogs.msdn.com/b/vinsibal/archive/2009/05/21/the-control-local-values-bug-solution-and-new-wpf-4-0-related-apis.aspx)

*   [http://wpf.2000things.com/2010/12/06/147-use-setcurrentvalue-when-you-want-to-set-a-dependency-property-value-from-within-a-control/](http://wpf.2000things.com/2010/12/06/147-use-setcurrentvalue-when-you-want-to-set-a-dependency-property-value-from-within-a-control/)

*   [依赖属性 SetValue() 和 SetCurrentValue() 有什么区别](https://stackoverflow.com/questions/4230698/whats-the-difference-between-dependency-property-setvalue-setcurrentvalue)

# javascript - jQuery .before 具有相同的 id

> ID：11606491
> 
> 赞同：0
> 
> 时间：2012-07-23T04:26:24.347
> 
> 标签：javascript, jquery, html

我只是想问一下`jQuery`。可以`jQuery`这样做：

```
<h1 id="lorem-ipsum">Hello World!</h1> 
```

对此：

```
<div id="lorem-ipsum"></div>
<h1>Hello World!</h1> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:30:49.070

你的意思是像这个人：**工作演示**位动态版本​​： http: [//jsfiddle.net/QSdqM/](http://jsfiddle.net/QSdqM/) **或** [http://jsfiddle.net/GQzFU/](http://jsfiddle.net/GQzFU/)

希望对事业有所帮助`:)`

API：[http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

**代码**

```
$('h1').replaceWith(function() {

   return '<div id="' + this.id + '"></div><h1>' + $(this).text() + '</h1>'

}); 
```

**或者**

```
$('h1').replaceWith('<div id="lorem-ipsum"></div><h1>Hello World!</h1>');

alert($('body').html());​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:31:03.830

```
var myDiv = $('<div></div>').attr('id', 'lorem-ipsum');
$('h1#lorem-ipsum').removeAttr('id').before(myDiv); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T04:37:28.343

尝试以下操作：

```
var txt = $('#lorem-ipsum').text()
$('#lorem-ipsum')
    .after($('<h1/>').text(txt))
    .replaceWith('<div id="#lorem-ipsum"/>') 
```

[演示](http://jsfiddle.net/wnJQP/)

# nlp - 如何使用 nlp java 提取主语动词对象

> ID：11606493
> 
> 赞同：5
> 
> 时间：2012-07-23T04:26:52.713
> 
> 标签：nlp

如何在 Java 中使用 NLP 提取 SVO，我是 nlp 的新手。我目前正在使用 opennlp。但是如何在 java 中使用特定的 java 语句。

```
LexicalizedParser lp = **new LexicalizedParser("englishPCFG.ser.gz");**
String[] sent = { "This", "is", "an", "easy", "sentence", "." };
Tree parse = (Tree) lp.apply(Arrays.asList(sent));
parse.pennPrint();
System.out.println();
TreePrint tp = new TreePrint("penn,typedDependenciesCollapsed");
tp.print(parse); 
```

在 new LexicalizedParser("englishPCFG.ser.gz");** 得到一个编译错误，构造函数 LexicalizedParser(String) 未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:07:55.687

好像您正在使用新版本的斯坦福 NLP 解析器。在此解析器的新版本中，构造函数不用于分配内存，而是使用专用函数。您可以使用 ：

```
LexicalizedParser lp = LexicalizedParser.loadModel("englishPCFG.ser.gz"); 
```

您可以使用此 API 的各种重载。

[各种 loadModel 重载的斯坦福文档](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/parser/lexparser/LexicalizedParser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:33:21.290

你可以使用斯坦福 CoreNLP。[在此处](https://stackoverflow.com/a/9606606/547040)查看*“粗略算法”*的答案，了解如何从句子中获取主谓宾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T12:51:48.483

这是来自斯坦福依赖解析器的代码，而不是来自 OpenNLP。遵循包含在 stanford-parser 目录中的 ParserDemo.java（和/或 ParserDemo2.java）中给出的示例，并确保您的演示代码和类路径中的 stanford-parser.jar 来自相同版本的解析器。我怀疑您正在使用带有较旧演示代码的解析器的更新版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T08:15:36.550

您可以使用混响。在此处查看“reVerb”的答案如何从句子中提取信息

# c# - Tiff：添加没有重新编码的新页面

> ID：11606497
> 
> 赞同：0
> 
> 时间：2012-07-23T04:27:18.063
> 
> 标签：c#, .net, image

我有一个从数据库中获取的 JPEG 文件，我需要将其作为新页面添加到编码为 JPEG 的现有或新的多页 TIFF 文件中。是否有 .NET 库可以添加无需重新编码的页面？我需要快速处理大量图像。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:24:30.647

这就是我一直在寻找的：[BitMiracle.LibTiff.Classic.WriteRawStrip](http://bitmiracle.com/libtiff/help/tiff.writerawstrip2.aspx)

# uitableview - 从iOS5中的静态表中获取数据

> ID：11606501
> 
> 赞同：1
> 
> 时间：2012-07-23T04:27:49.797
> 
> 标签：uitableview, ios5, storyboard

**问题**：我可以使用带有静态单元格的表格（在情节提要中设置）作为另一个表格的数据源吗？

这是我所拥有的（一个学习项目）：

带有 4 个表格视图的 Storyboard TabBarController：

TableViewOne - 静态单元格（在情节提要中输入） - 2 个单元格，指示我选择的内容（甜点、开胃菜或两者兼有）；

TableViewTwo - 静态单元格（在情节提要中输入） - 开胃菜；

TableViewThree - 静态单元格（在情节提要中输入） - 甜点；

TableViewFour - 动态 - 汇总 - tableOne 或 TableTwo（或两者）中的所有行按字母顺序排序

我可以以某种方式从表 2 和表 3 中提取标签，而无需加载 viewTwo 或 ViewThree。也就是说，用户在 tableViewOne 中选择开胃菜和甜点（不查看 TableViewTwo 或 TableViewThree），然后切换到 TableViewFour，他希望在其中看到按字母顺序列出的 Table2 和 Table3 中的所有项目？

谢谢！

# java - 在 Spring 运行时注册 bean(prototype)

> ID：11606504
> 
> 赞同：21
> 
> 时间：2012-07-23T04:28:06.927
> 
> 标签：java, spring, spring-mvc, dependency-injection

只需要社区评估的东西。以下是一段代码，它是一个创建特定类型实例的简单工厂。该方法会将上下文中的 bean 注册为原型并返回实例。这是我第一次在运行时配置 bean。您能评价一下并提供反馈吗？先感谢您。

```
package au.com.flexcontacts.flexoperations;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanDefinition;
import org.springframework.beans.factory.config.ConstructorArgumentValues;
import org.springframework.beans.factory.support.DefaultListableBeanFactory;
import org.springframework.beans.factory.support.GenericBeanDefinition;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.support.AbstractApplicationContext;

import au.com.flexcontacts.exceptions.SyncClassCreactionError;

/**
 * @author khushroo.mistry
 * Class purpose: Simple Factory to create an 
 * instance of SynchroniseContactsService and register it in the Spring IoC.
 */
public final class FLEXSyncFactory implements ApplicationContextAware {

    private static AbstractApplicationContext context;

    /**
     * @param username
     * @param password
     * @param syncType
     * @return the correct service class
     * @throws SyncClassCreactionError
     * The method registers the classes dynamically into the Spring IoC
     */
    public final SynchroniseContactsService createSyncService(String username, String password, SyncType syncType) throws SyncClassCreactionError {

        DefaultListableBeanFactory beanFactory = (DefaultListableBeanFactory) context.getBeanFactory();

        try {

            //Register the bean in the IoC
            BeanDefinition bdb = new GenericBeanDefinition();
            bdb.setBeanClassName(syncType.getClassName());
            bdb.setScope("prototype");
            ConstructorArgumentValues constructor = bdb.getConstructorArgumentValues();
            constructor.addIndexedArgumentValue(0, username);
            constructor.addIndexedArgumentValue(1, password);
            beanFactory.registerBeanDefinition(syncType.getInstanceName(), bdb);

            //Return instance of bean
            return (SynchroniseContactsService) beanFactory.getBean(syncType.getInstanceName());
        } catch (Exception e) {
            e.printStackTrace();
            throw new SyncClassCreactionError("Error: Illegal Handler");
        }

    }

    public void setApplicationContext(ApplicationContext applicationContext)
    throws BeansException {
        context = (AbstractApplicationContext) applicationContext;

    }

} 
```

FLEX Sync 工厂已在 IoC 容器中配置为单例。因此，要创建一个新的同步管理器，我执行以下操作：

```
flexSyncFactory.createSyncService(userName, password, SyncType.FULL); 
```

我正在使用 Spring 3.1。请查看并提供您宝贵的反馈意见。

亲切的问候。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T01:42:34.723

这纯粹是我的观点，不是专家观点：

Spring 提供了两种自定义修改应用程序上下文的机制 - 使用[BeanFactoryPostProcessor](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/BeanFactoryPostProcessor.html)允许修改现有的 bean 定义或添加新的 bean 定义，以及[BeanPostProcessors](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)允许修改 bean 实例（将它们包装在代理周围等）。

Spring 没有提供任何其他本地方式来在运行时动态添加 bean 定义或 bean 实例，但就像您通过获取底层 bean 工厂实例并添加 bean 定义所做的那样是一种方法。它有效，但存在风险：

*   如果您用新类型覆盖现有 bean 名称会发生​​什么，如何处理已注入该 bean 的位置。此外，如果现有的 bean 名称被完全不同的类型覆盖，会发生什么情况！

*   这个新注册的 bean 不会有任何自动装配的字段，也不会被注入到其他 bean 中 - 所以本质上 bean 工厂纯粹是作为保存 bean 的注册表，而不是真正的依赖注入功能！

*   如果`refresh()`在应用程序上下文中调用 a ，则支持 bean 工厂将被覆盖并创建一个新的，因此直接针对 bean 工厂注册的任何 bean 实例都将丢失。

如果目标纯粹是创建由 Spring 自动装配的 bean，我会选择[@Configurable](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/Configurable.html)之类的东西。如果上述风险是可以接受的，那么您的方法也应该有效。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-05T20:41:55.230

这对我有用： [http ://random-thoughts-vortex.blogspot.com/2009/03/create-dynamically-spring-beans.html](http://random-thoughts-vortex.blogspot.com/2009/03/create-dynamically-spring-beans.html)

声明一个专用的 Spring 上下文 bean，它将实现 ApplicationContextAware 和 BeanFactoryPostProcessor 接口：

```
 public class MyContextWrapper implements ApplicationContextAware,
             BeanFactoryPostProcessor {

   private ApplicationContext appContext;
   private ConfigurableListableBeanFactory factory;

   public void postProcessBeanFactory(ConfigurableListableBeanFactory factory)
              throws BeansException {
   this.factory = factory;
   }
   public void setApplicationContext(ApplicationContext c)
            throws BeansException {
   this.appContext = c;   
   }

   //setters and getters

} 
```

通过在 XML 配置文件中声明 bean，让 spring 将这个 bean 加载到它的上下文中：

```
<bean id="appContext" class="my.package.MyContextWrapper">
</bean> 
```

现在这个 bean 可以通过引用它被加载到应用程序的任何其他 bean 中：

```
<bean id="myBeanFactory" class="my.package.MyBeanFactory">
 <property name="springContext" ref="appContext">
 </property>
</bean> 
```

使用 GenericBeanDefinition 加载 bean 定义：

```
BeanDefinitionRegistry registry = ((BeanDefinitionRegistry )factory);

GenericBeanDefinition beanDefinition = new GenericBeanDefinition();
beanDefinition.setBeanClass(MyBeanClass.class);
beanDefinition.setLazyInit(false);
beanDefinition.setAbstract(false);
beanDefinition.setAutowireCandidate(true);
beanDefinition.setScope("session");

registry.registerBeanDefinition("dynamicBean",beanDefinition); 
```

Bean 在会话范围内创建，并将存储在用户会话中。属性自动连接候选告诉 spring bean 的依赖项，例如 setter 或 getter 或构造函数参数是否应该由 Spring 自动处理。属性lazy init 告诉Spring 是否应该在需要时实例化这个bean。

要获取 Spring bean 的句柄，请使用 Spring 应用程序上下文，如下所示：

```
Object bean= 
 getApplicationContext().getBean("dynamicBean");
 if(bean instanceof MyBeanClass){
 MyBeanClass myBean = (MyBeanClass) bean;

   // do with the bean what ever you have to do.
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T18:50:39.477

您的解决方案看起来不错。我相信我们也可以通过创建一个实现 BeanNameAware 和 FactoryBean 接口的 bean 来实现，然后我们在创建上下文之前设置值。

```
xxxxBean.beansByName.put("synTable", synTable);
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
assert externalDataSource == context.getBean("synTable"); 
```

这是 Bean 实现

```
public class xxxxBean implements BeanNameAware, FactoryBean {

    public static Map<String, Object> beans = new HashMap<String, Object>();

    private String beanName;

    @Override
    public void setBeanName(String beanName) {
        this.beanName = beanName;
    }

    @Override
    public Object getObject() {
        return beans.get(beanName);
    }

    @Override
    public Class<?> getObjectType() {
        return beans.get(beanName).getClass();
    }

    @Override
    public boolean isSingleton() {
        return true;
    }

} 
```

# android - 如何创建 ActionBar 的 Action Overflow 部分？

> ID：11606505
> 
> 赞同：1
> 
> 时间：2012-07-23T04:28:40.307
> 
> 标签：android, android-actionbar

我在网上找了一段时间，关于如何做到这一点的教程很少。即使是谷歌文档也有关于如何把这些东西放在那里的非常模糊的信息！我确信它很微妙，但我无法理解这些术语，因为我对 Android 还是很陌生。我希望能够在`ActionBar`. 在创建项目时使用文档和示例代码放置视图控件是很容易理解的，但它没有用于 Action Overflow。提前致谢！

编辑：我可能应该详细说明。我希望菜单默认位于操作溢出下。我找到了一个类似问题的令人大开眼界的答案，但它只告诉您如何将菜单放在顶部。我怎样才能强迫他们进入名单？甚至可以强制这样做吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:04:44.847

如果你使用 API-11，那没问题。如果较低，我邀请您参加此主题： [在 android 2.x 中创建下拉菜单的最佳方法，如在 ICS 中](https://stackoverflow.com/questions/11274174/the-best-way-to-create-drop-down-menu-in-android-2-x-like-in-ics)

在 API-11 及更高版本的情况下，您必须：

1.  像这样创建菜单 xml：

    ```
     <?xml version="1.0" encoding="utf-8"?>
         <menu xmlns:android="http://schemas.android.com/apk/res/android" >

            <item
                android:id="@+id/item_refresh"
                android:icon="@drawable/ic_menu_refresh"
                android:title="Refresh"
                android:showAsAction="ifRoom|withText" />

            <item
                android:id="@+id/item_save"
                android:icon="@drawable/ic_menu_save"
                android:title="Save"
                android:showAsAction="ifRoom|withText" />
        </menu> 
    ```

并创建这样的代码：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // gets the activity's default ActionBar
    ActionBar actionBar = getActionBar();
    actionBar.show();
    actionBar.setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu); //inflate our menu
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()) {
    case R.id.item_refresh:
        //click on refresh item
        break;
    case R.id.item_save:
        //click on save item
        break;
    }
    return true;
} 
```

祝你好运！

# jquery - $.when 与 jQuery 延迟数组有时会调用 .always 多次

> ID：11606507
> 
> 赞同：1
> 
> 时间：2012-07-23T04:29:15.753
> 
> 标签：jquery, coffeescript, jasmine, jquery-deferred

我的生产代码有这段逻辑，是从 CoffeeScript 编译的：

```
results = [];
results.push(slowOpA());
results.push(slowOpB());
results.push(slowOpC());
results = _.flatten(results);
$.when.apply($, results).then(onComplete).fail(onError).always(function() {
    $(document).trigger('stop')
}); 
```

我希望这首先按顺序调用所有 slowOp* 方法，然后调用其中一个`onComplete`或仅调用`onError`一次，最后仅调用`always`一次。这就是我用 Jasmine 测试的内容：

```
@stopSpy = jasmine.createSpy '<stopSpy>'
$(document).bind 'stop', @stopSpy
...
@lastPromise = new $.Deferred()
spyOn('slowOpA').andReturn new $.Deferred().resolve()
spyOn('slowOpB').andReturn new $.Deferred().resolve()
spyOn('slowOpC').andReturn @lastPromise
...
@lastPromise.resolve()
expect(@stopSpy).toHaveBeenCalledOnce() 
```

100 次中有 99 次有效，但时不时地会收到 2 或 3 个调用：

```
Expected spy on <stopSpy> to have been called once, but was called '2' times 
```

我错过了什么吗？或者这是 jQuery/Jasmine 中一些模糊的竞争条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:22:13.603

我不熟悉 Jasmine，但您的 JavaScript 代码是正确的；我在 jsFiddle 中模拟了一些等效的东西，它按预期工作。我用 'done(onComplete)' 和 'then(onComplete, onError)' 交换了 'then(onComplete)' 但一切都按预期工作。我假设 slowOpX 返回的延迟/承诺。下划线 (?) _.flatten(results) 是多余的，但我怀疑这会导致任何问题。

# android - 如何将 MapViews 和 OverlayItems 保存在一个包中？

> ID：11606509
> 
> 赞同：0
> 
> 时间：2012-07-23T04:29:57.983
> 
> 标签：android, android-mapview, bundle

我想在方向更改后保留 MapView 及其标记。我查看了[Android Bundle Reference](http://developer.android.com/reference/android/os/Bundle.html)，但仍然没有找到任何东西。

我读错参考资料了吗？捆绑包如何用于自定义类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:03:21.493

我们使用`Bundle`类将数据从一个传递`Activity`到另一个。另一方面，获取`Activity`从当前Activity传递过来的数据。[您可以在此链接](http://anujarosha.wordpress.com/2011/03/07/how-to-get-the-content-that-user-type-in-a-edittext-field-in-one-activity-to-another-activity-in-android/)中看到如何使用`Bundle`类的简单示例。

在您的问题中，您必须查看[Android Run-time Changes](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

如果您不尝试在方向更改后更改先前视图中的数据，简单的方法是使用**清单**文件来处理您的方向，如以下代码所示。

```
<activity
    android:name=".WebViewActivity"
    android:configChanges="keyboardHidden|orientation|screenLayout|screenSize" >
</activity> 
```

# opengl-es - OpenGL ES 2.0 软件库

> ID：11606516
> 
> 赞同：2
> 
> 时间：2012-07-23T04:30:32.007
> 
> 标签：opengl-es, opengl-es-2.0

我有一个在 OpenGL ES 2.0 上运行的嵌入式设备上编写的应用程序。我想使用 PC 调试应用程序的问题。目前我的电脑运行的是 Ubuntu 11.04，它没有任何显卡。出于调试的目的，我想要任何基于软件的 OpenGL ES2.0 库。有没有这样的库预设？如果是这样，任何人都可以给我一个链接吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:10:52.060

你有来自 ARM AMD 和 Imagination Technologies 的模拟器，可以在 windows/ubuntu 上运行 opengl es 2.0。

我建议使用 Imagination 技术之一。

这是链接[http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp)

# android - 将listview 存储到sqlite 数据库和onclicklistener 中的代码示例？

> ID：11606517
> 
> 赞同：0
> 
> 时间：2012-07-23T04:30:42.323
> 
> 标签：android, database, sqlite, listview

有没有人有很好的将listview插入sqlite数据库的代码示例？我用谷歌搜索了如何将列表视图插入数据库，但大多数都有关于如何从数据库显示列表视图的示例。所以啊，请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:23:15.173

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {

 //get clickedItem details using position and insert these details into the database table.
                }
            }
        }); 
```

listView 是您的列表视图。整数参数“位置”为您提供您单击的 ListView 项目位置。使用它，您可以获得详细信息

可以像这样获取详细信息：

```
String[] items = {"", "", .....}; 
```

您使用此 String 数组填充 listView，然后使用获取 clickd 项目的详细信息

```
String clickedItem = String[position]; 
```

现在将这些详细信息插入到您的数据库表中。

# ruby-on-rails-3 - has_many 上的未定义方法：通过

> ID：11606524
> 
> 赞同：0
> 
> 时间：2012-07-23T04:31:16.433
> 
> 标签：ruby-on-rails-3, activerecord, has-many-through

我有三个模型：

```
Class Project < ActiveRecord::Base
  has_many :tasks
  has_many :tags, :through => :tasks
end

Class Tasks < ActiveRecord::Base
  belongs_to :project
  has_and_belongs_to_many :tags
end

Class Tags < ActiveRecord::Base
  has_and_belongs_to_many :tasks
  has_many :projects, :through => :tasks 
```

当我打开控制台时，我可以按预期获得我的项目和任务信息：

```
Tag.find(1).projects
Tag.find(1).tasks 
```

如果需要，无论标签如何，我都可以获取每个项目的所有任务：

```
Project.find(1).tasks 
```

无论出于何种原因，如果我通过标签获取项目，我将无法访问任务... something = Tag.find(1).projects something.tasks

...我得到错误：

```
undefined method `tasks' for #<ActiveRecord::Relation:0x007feae4af0e70> 
```

我已经找了几个小时，找不到任何可以解决这个问题的东西。根据我发现的所有内容，它应该可以工作……但事实并非如此。

我正在使用 Rails 3.2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:21:14.233

不应该`Tag.find(1).tasks`给你同样的结果吗？

无论如何，您面临的问题是您试图从`Relation`对象而不是模型实例中检索关联。`Relations`可用于链接查询条件，但不能直接从中引用关联。所以，为了让你的例子工作，你需要做

```
p = Tag.find(1).projects.includes(:tasks) 
```

然后像这样引用任务：`p[0].tasks`.

但是，我只是确保它`Tag.find(1).tasks`会生成相同的 SQL 并最终返回相同的`tasks`.

# java-me - J2ME 中的数据库

> ID：11606527
> 
> 赞同：3
> 
> 时间：2012-07-23T04:31:58.070
> 
> 标签：java-me, midp, rms

我是 J2ME 的新手。

在我的应用程序中，我想在记录存储中添加多个记录并且还想访问它。

如何在记录存储中添加多个记录以及如何访问它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T04:59:31.557

这是我的RMS库代码，学习一下，很容易实现，insert、updated、delete等方法都有。

```
import javax.microedition.rms.RecordEnumeration;
import javax.microedition.rms.RecordStore;
import javax.microedition.rms.RecordStoreFullException;
import javax.microedition.rms.RecordStoreNotOpenException;
import com.project.gui.components.CustomAlert;
import com.project.gui.midlet.MyMidlet;

public class RMSStore 
{
    private RecordStore rs = null;

    public void openRecordStore(String str)
    {
        try 
        {
            if(rs == null)
            {
                rs = RecordStore.openRecordStore(str, true);
            }
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    public void closeRecordStore()
    {
        try 
        {
            if(rs!=null)
            {
                rs.closeRecordStore();
            }
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    public void deleteRecordStore(String storenName) 
    {
        try 
        {
            RecordStore.deleteRecordStore(storenName);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    public void deleteRMS(String storenName) 
    {
        int count = 0;

        try
        {
            RecordStore newRS = RecordStore.openRecordStore(storenName, true);
            count = newRS.getNumRecords();
            newRS.closeRecordStore();
        }
        catch ( Exception e ) 
        {
            System.out.println ( "Error while Opening " + e.toString() );
        }

        if ( count > 0 )
        {
            try 
            {
                RecordStore.deleteRecordStore(storenName);
            }
            catch (Exception e) 
            {
                e.printStackTrace();
            }

        }
    }

    public static String[] listAllRecordStore () 
    {
        return RecordStore.listRecordStores();
    }

    public boolean SearchRecord(String Rec)
    {
        String [] data = getRecordData();

        for ( int i = 0 ; i < data.length ; i++ )
        {
            if ( Rec.toString().trim().equals(data[i].toString().trim()) )
            {
                data = null; // System.gc();
                return true;
            }
        }

        data = null; // System.gc();
        return false;
    }

    public boolean SearchRecord(String Rec, int pos )
    {
        String [] data = getRecordData();

        Rec = Rec.substring(0,pos);
        for ( int i = 0 ; i < data.length ; i++ )
        {
            data[i] = data[i].substring(0, pos );
            if ( Rec.toString().trim().equals(data[i].toString().trim()) )
            {
                data = null; // System.gc();
                return true;
            }
        }

        data = null; // System.gc();
        return false;
    }

    public int getCurrentRecordID ( RMSStore rmsTable, String Rec )
    {
        RecordEnumeration re = null; 
        try
        {
            re = rmsTable.getRecordEnumData();

            while ( re.hasNextElement() )
            {
                int id = re.nextRecordId();
                String record = rmsTable.getRecordFromId(id);

                if ( record.indexOf(Rec) != -1 )
                {
                    return id;
                }
            }
        }
        catch ( Exception e ) { System.out.println ( "getCurrentRecordID Error:" + e.toString() );  }
        return -1;
    }

    public int writeRecord(String str)
    {
        int id = 0;
        try 
        {
            id = rs.addRecord(str.getBytes(), 0, str.getBytes().length);
        } 
        catch (RecordStoreFullException e) 
        {
            CustomAlert memoryFullAlert = new CustomAlert("");
            memoryFullAlert.setString("Memory Full");
            MyMidlet.getDisplay().setCurrent(memoryFullAlert);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return id;
    }

    public int writeByteRecord(byte[] data)
    {
        int id = -1;

        try 
        {
            id = rs.addRecord(data, 0, data.length);
        } 
        catch (RecordStoreFullException e) 
        {
            e.printStackTrace();
            CustomAlert memoryFullAlert = new CustomAlert("");
            memoryFullAlert.setString("Memory Full");
            MyMidlet.getDisplay().setCurrent(memoryFullAlert);          
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return id;
    }

    public int getRecordCount()
    {
        try 
        {
            return rs.getNumRecords();
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return 0;
    }

    public byte[] getRecordDataFromId(int id)
    {
        byte[] data = null;
        try 
        {
            data = rs.getRecord(id);            
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return data;
    }

    public String getRecordFromId(int id)
    { 
        return new String(getRecordDataFromId(id));
    }

    public byte[] getRecordByteFromId(int id)
    { 
        return getRecordDataFromId(id);
    }

    public void deleteRecord(int id)
    {
        try 
        {
            rs.deleteRecord(id);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    public boolean checkRecordExists(String compare)
    {
        for(int i = 0; i < getRecordCount(); i++)
        {           
            if(compare.equals(getRecordFromId(i + 1)))
            {
                return true;
            }
        }       
        return false;
    }

    public int getMaxRMSSize()
    {
        int size  = 0;
        try 
        {
            size = rs.getSizeAvailable() + rs.getSize();
        } 
        catch (RecordStoreNotOpenException e) 
        {
            e.printStackTrace();
        }

        return size;
    }

    public void setRecordById(String str, int id)
    {
        try 
        {
            rs.setRecord(id, str.getBytes(), 0, str.getBytes().length);
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    }

    public int getNextRecordId() 
    {
        int id = 0;
        try 
        {
            id = rs.getNextRecordID();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return id;
    }

    public RecordEnumeration getRecordEnumData () 
    {
        try 
        {
            return rs.enumerateRecords(null, null, false);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
            return null;
        }
    }

    public String [] getRecordData()
    {
        String[] str = null;
        int counter = 0;
        try 
        {
            RecordEnumeration enumeration = rs.enumerateRecords(null, null, false);
            str = new String[rs.getNumRecords()];

            while(enumeration.hasNextElement())
            {
                try 
                {
                    str[counter] = (new String(enumeration.nextRecord()));
                    counter ++;
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return str;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:35:53.627

RMS 是一种基于记录的数据存储机制，因此您可以非常轻松地存储多条记录，请参阅以下博客了解 RMS 的工作原理。

[http://www.ibm.com/developerworks/library/wi-rms/](http://www.ibm.com/developerworks/library/wi-rms/)

# java - 需要帮助运行 EJB 应用程序

> ID：11606529
> 
> 赞同：3
> 
> 时间：2012-07-23T04:32:36.000
> 
> 标签：java, glassfish, ejb

在尝试运行 app-client Main 方法时，我不断收到以下错误：

> org.glassfish.appclient.client.acc.UserError: ACC007: 应用程序客户端目录 C:\Projects\MyFirstJMSQueue 不包含清单；应用程序客户端容器无法处理它。嵌入式程序应该传递带有方案“jar：”的 URI 用于 JAR 文件和方案“文件：”用于目录。Java 结果：1

当我搜索解决方案时，我在此[链接](http://www.java.net/node/700937)中找到了指南，但我不知道应该如何将 EAR 的属性配置到客户端并运行 EAR 本身？

有人可以帮助我吗？

# database - 处理数据库中的 PayPal API 调用和记录的良好做法是什么？

> ID：11606530
> 
> 赞同：5
> 
> 时间：2012-07-23T04:32:52.720
> 
> 标签：database, transactions, paypal, atomic

我正在写一个网站，让用户提交信用卡信息并订阅我的网络服务。我正在处理数据库记录和 PayPal API，我注意到会有一些潜在的问题。也就是说，如果以下数据库操作失败，我将无法回滚 PayPal API 调用。例如，假设我们在 RMDB 交易中创建一个定期付款配置文件并将记录写入数据库，就像这样

```
Transaction begin
CreateRecurringPaymentsProfile (PayPal)
Insert a record to table 'subscription'
Transaction end 
```

如果没有任何问题，这可以正常工作，但是如果我们将订阅记录插入数据库失败怎么办？

```
Transaction begin
CreateRecurringPaymentsProfile (PayPal)
Insert a record to table 'subscription' failed
Transaction rolled back 
```

当然我们可以回滚数据库的事务，但是我们不能回滚 PayPal API 调用。然后我们在 PayPal 有一个孤立的定期付款资料。我有一个想法，我可以先创建订阅记录，然后再更新。

```
Transaction begin
Insert a record to table 'subscription'
Transaction end

Transaction begin
CreateRecurringPaymentsProfile (PayPal)
Update subscription record
Transaction end 
```

这样，如果数据库操作失败，至少我们还有订阅记录。这可能是一个可能的解决方案，但我想知道处理数据库操作的良好做法不能像这样回滚？尤其是在我们处理金钱的时候。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T17:29:18.740

我建议您像您考虑的那样分两步执行此操作。事务首先创建，状态为“已初始化”或类似。然后在 PayPal 付款成功返回后，您将状态更改为“已付款”。

即使 PayPal 交易失败，保存交易也有好处，因此您会知道您有多少失败/放弃的付款。

# javascript - 如何向 jQuery 添加“核心”功能？

> ID：11606531
> 
> 赞同：0
> 
> 时间：2012-07-23T04:32:54.283
> 
> 标签：javascript, jquery

这可能是一个重复的问题，但我找不到。

我了解“[如何向 jQuery 添加函数？](https://stackoverflow.com/questions/1768150/how-to-add-a-function-to-jquery) ” - 该函数的激活类似于：

```
jQueury(selector).myFunction(); 
```

但是 jQuery 也有一些可以激活的“核心”功能，例如：

```
jQuery.ajax(options); 
```

如果我想向 jQuery 添加一个不作用于元素的函数，例如日志记录函数，我将如何实现将其添加到“核心”以便可以像这样激活它：

```
jQuery.log('message'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:37:35.590

使用`$.extend( { functionName: function() { ... } } );`.

或者更简单地说：`$.functionName = function() { ... };`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:35:09.713

所以只要定义它：

```
$.log = function(str) { alert(str); };

jQuery.log('foo bar'); 
```

[http://jsfiddle.net/zerkms/4TAcv/](http://jsfiddle.net/zerkms/4TAcv/)

# c++ - 删除C++程序中的全局变量

> ID：11606532
> 
> 赞同：2
> 
> 时间：2012-07-23T04:33:03.650
> 
> 标签：c++, data-structures

我在 C++ 中有一个大型程序，它有太多的函数和全局变量。现在，我想删除那些全局变量，我只想使用局部变量而不是全局变量。任何人都可以建议我最好的方法来做到这一点。谢谢！

它用 C++ 编写了大约 4000 行的程序。这些不同的类中有10个类和60个函数，30个全局变量。全局变量已在不同类的函数之间使用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T04:56:21.730

我通常首先将全局变量放在命名空间中

```
namespace global
{
  int var;
  ...
} 
```

这将导致您在使用“var”的任何地方都出现错误，然后我只需将引用一一替换为命名空间变体。一旦所有全局变量引用都在命名空间中，就更容易看到哪些变量是本地的，哪些是全局的

```
if ( global::var == 1 ) ... 
```

现在通过搜索`global::var`你会得到一个使用它的变量列表，那么你需要逐个查看使用情况，看看一个变量是否在多个模块中使用，在这些情况下，你可能需要将它作为在其他情况下，函数参数声明它是一个局部变量。

这是一种繁琐的方法，但消除全局变量总是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:40:02.600

我建议使用一个类。它们非常适合将变量和函数隐藏到一组中并进行分类。这是基本结构：

```
class example
{
public:
    example(); //basic constructor
    int function1();  //example function
    int x;  // a variable accesible globally
private:
    int y;  // a variable only accesible by functions of the class
}; 
```

调用每个函数很容易，但我不会解释，因为我不想启动文本墙。您可以访问此链接了解更多信息：[http ://www.cplusplus.com/doc/tutorial/classes/](http://www.cplusplus.com/doc/tutorial/classes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:47:05.210

我建议一个解决方案，例如从全局范围中删除它们的声明并将它们放在赞赏的函数中。

示例：

```
int hello; // global
// remove it 
```

现在，将其放入函数中：

```
void func()
{
   int hello; // local
  //... 
```

我们有两种情况：

> 如果其他函数需要知道 的值`hello`，让它`hello`作为参数：

```
void func2(const int &helloVar)
{
   // ... 
```

> 如果全局变量仅由单个函数使用，则可以改用`static`局部变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T10:33:14.383

您可以将这些变量放在一个类中，然后在第一个位置创建指向该类对象的指针将使用这些变量，然后将此指针传递给每个需要这些变量的方法，不要忘记在不使用时删除该对象。

# c# - 为什么 RunThis() 什么都不做？

> ID：11606533
> 
> 赞同：0
> 
> 时间：2012-07-23T04:33:05.097
> 
> 标签：c#, ienumerator

我正在 Unity3d 中开发一个项目，我正在编写一些代码，最初我将 IEnumerator 作为 Start 而不是 RunThis 并且代码运行良好，现在我将它移入一个新方法，它没有做任何事情。有人可以解释一下吗？

```
using UnityEngine;
using System.Collections;

public class UniDLC : MonoBehaviour
{
    void Start() {
        RunThis();
    }
    IEnumerator RunThis()
    {
        Debug.Log("ran");
        string url = "file://C:\\Users\\tom\\Documents\\test.txt";
        WWW www = new WWW(url);
        yield return www;
        Debug.Log(www.text);
    }
} 
```

Ps 我预计至少有人会告诉我有关 unityanswers 的信息，是的，我知道它存在，但该网站的错误太多，我相信有人听到可以回答这个问题，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T04:38:59.490

如果您不尝试实际使用 RunThis() 返回的*IEnumerator*，编译器将不会调用枚举器，因此您的代码将不会被调用。

由于您只返回一个枚举对象，

```
RunThis().MoveNext(); 
```

应该显示枚举器工作。

# ruby-on-rails - Rails 上 options_from_collection_for_select 的工具提示

> ID：11606536
> 
> 赞同：0
> 
> 时间：2012-07-23T04:33:29.453
> 
> 标签：ruby-on-rails

我在下拉列表中显示了一组值。在下拉列表中，一些文本值非常长，因此无法完全查看它们。所以我想在这里使用工具提示，因此我可以将鼠标悬停在选项上，然后显示完整的值。

代码如下：

```
<%= select_tag(:book_id,
          options_from_collection_for_select(@books, :id, :name),
                     multiple: true, id: 'book_id') %> 
```

有人可以在这里帮助我吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:41:11.440

请点击以下链接，它可能对您有所帮助。

[http://www.dotnetexpertsforum.com/how-to-set-tooltip-for-dropdownlist-t561.html](http://www.dotnetexpertsforum.com/how-to-set-tooltip-for-dropdownlist-t561.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-31T05:22:34.407

您可以尝试以下解决方案在选择标签选项上呈现工具提示：

```
<%= f.select :compliance_tier, options_for_select(User.roles.map {|k, v| [k.humanize.capitalize, k,{'data-toggle'=> 'tooltip', title: method_to_render_text(k)}]}, f.object.role, {},class: 'form-control w-100 font-12 h-auto py-2 shadow-none pr-4', required: true, id: :user_role %> 
```

# c# - 跳过循环，在 Visual C# 中未删除列表对象

> ID：11606538
> 
> 赞同：0
> 
> 时间：2012-07-23T04:34:15.843
> 
> 标签：c#, multithreading, visual-studio-2010, list

在这个多线程程序中，我试图在填充它的每第三次迭代中从列表中删除两个随机元素。我想我可以通过计算“stepCounter”的模来跟踪有多少次新元素被添加到列表中（所有线程都执行相同的功能）并且在检查了几个断点之后，我发现它正在检查 stepCounter 条件，然后转到“for”循环的第一行以选择两个要删除的随机索引。

问题是实际上并没有执行删除，就好像它读取“for i = etc.”然后只是跳过。

namespace ThreadWinApp { public partial class Form1 : Form { // 这里为整个类创建线程变量 private Thread trd; 私有线程 trd2; 私有线程 trd3；

```
 //this locker object is used to sychronize the threads
    private System.Object locker = new System.Object();

    //random value object for use in all threads
    Random random = new Random();
    public int val;
    private int stepCounter = 0;

    //our "array" of integers undefined in size
    private List<int> numList = new List<int>();
    private int[] arry;

    private void ThreadTask()
    {

      //this the thread that will at random intervals add a random number to the collection. 
     // Every third iteration, the thread should remove two random 
     // elements from the collection.
        int randomVal;
        int randomListVal;
       // int stepCounter = 0;

        while (true)
        {
            lock (locker)
            {
                randomVal = random.Next(0, 20);
                numList.Add(randomVal);
                stepCounter += 1;

                if (((stepCounter % 3) == 0))

                    for (int i = 0; i == 2; i++)
                    {
                     randomListVal = random.Next(0, numList.Count);
                     numList.RemoveAt(randomListVal);

                    }

                Thread.Sleep(randomVal * 100);              
            }

        }

        }
    private void ThreadTask2()
    {

        //this the thread that will read and show data from the array created in ThreadTask2()
        // at random intervals add a random number to the collection. 
        // Every third iteration, the thread should remove two random 
        // elements from the collection.

        int randomVal;
        int randomListVal;
    //    int stepCounter = 0;

        while (true)
        {
            lock (locker)
            {
                randomVal = random.Next(0, 20);
                numList.Add(randomVal);
                stepCounter += 1;

                if (stepCounter % 3 == 0)
                {
                    for (int i = 0; i == 2; i++)
                    {
                      randomListVal = random.Next(0, numList.Count);
                      numList.RemoveAt(randomListVal);
                    }
                }

                Thread.Sleep(randomVal * 100);

            }
        }
    }

         private void ThreadTask3()
    {

      //this the thread that will read and show data from the array created in ThreadTask2()
     // at random intervals add a random number to the collection. 
     // Every third iteration, the thread should remove two random 
     // elements from the collection.
        int randomVal;
        int randomListVal;

        while (true)
        {
            lock (locker)
            {

                randomVal = random.Next(0, 20);
                numList.Add(randomVal);
                stepCounter += 1;

                if (stepCounter % 3 == 0)
                {
                    for (int i = 0; i == 2; i++)
                    {
                        randomListVal = random.Next(0, numList.Count);
                        numList.RemoveAt(randomListVal);
                    }
                }

                Thread.Sleep(randomVal * 100);

            }

        } 
        }

         private void ThreadTask4()
         {
             int[] array;

             while (true)
             {
                 lock (locker)
                 {

                     array = numList.ToArray();
                     for (int i = 0; i < array.Length; i++)
                     {
                         textBox1.Text += (array[i] + " ");
                     }

                     Thread.Sleep(1000);
                     textBox1.Text += ("\r\n");

                 }

             }
         }
    private void Form1_Load(object sender, EventArgs e)
    {

        //creates a new instance of thread1
        Thread trd = new Thread(new ThreadStart(this.ThreadTask));
        //makes the new thread a background thread, allowing easy termination 
        //upon closing of the application
        trd.IsBackground = true;
        //starts the thread
        trd.Start();

        /*Same process as above, but for thread2*/
        Thread trd2 = new Thread(new ThreadStart(this.ThreadTask2));
        trd2.IsBackground = true;
        trd2.Start();

        Thread trd3 = new Thread(new ThreadStart(this.ThreadTask3));
        trd3.IsBackground = true;
        trd3.Start();

        Thread trd4 = new Thread(new ThreadStart(this.ThreadTask4));
        trd4.IsBackground = true;
        trd4.Start();   

    }

    }
}

        } 
```

有什么我想念的吗？其他一切似乎都在做我想做的事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:40:42.603

`for`循环中的条件是错误的。

你应该检查`i <= 2`而不是`i == 2`

# html - 在 Facebook iframe 应用周围添加填充

> ID：11606540
> 
> 赞同：0
> 
> 时间：2012-07-23T04:34:49.023
> 
> 标签：html, css, facebook, facebook-iframe

我有一个 Facebook iframe 应用程序，使用流体宽度。

我不知道如何在这个应用程序和**外部**顶部内容、左边距和右边内容之间创建空间。

目前，我的 Facebook 应用程序和周围的外部内容之间没有空间。

尝试了各种 CSS `padding`，但这些都为 iframe 应用程序**内**`margin`的内容添加了间距。

 **这是所要求的相关标记（谢谢）。

HTML：

```
<!DOCTYPE HTML>
<html>
  <head>
    <!-- various FB metadata -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=0.5, user-scalable=yes" />

     <title>Slideshow</title>
  </head>

  <body
    <div id="slideshow">
    <!-- various html/jquery for slideshow -->
  </body> 
```

CSS：

```
body {
  margin-top: 20px; padding-top: 20px; /* only works with content INSIDE the app */

  font-family: Verdana, sans-serif;
  background-size: cover;
  font-smoothing: antialiased;
  background: radial-gradient(ellipse at center,  #e5e5e5 0%,#5e8cba 100%); /* W3C */

  /* browser-specific elided */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:05:07.857

A) 用 > 关闭你的 body 标签

```
<body> 
```

B）填充仅适用于内部。总是。而且我不相信保证金在该内容中有效。尝试在外面添加一个 div，并为其提供填充。

```
<!DOCTYPE HTML>
<html>
  <head>
<!-- various FB metadata -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=0.5,                    user-scalable=yes" />

 <title>Slideshow</title>
 </head>

<body>
<div style="padding:5px">
<div id="slideshow">
<!-- various html/jquery for slideshow -->
</div>
</div>
</body> 
```**

# php - 单选按钮不传递值来运行某些功能

> ID：11606544
> 
> 赞同：1
> 
> 时间：2012-07-23T04:35:46.310
> 
> 标签：php, html, radio-button

我正在尝试使用单选按钮来区分用户想要运行的 php 函数。然而什么都没有发生？？我认为这是一件小事，但我看不出哪里出错了。

提交表格

```
value="<?php
if (isset($_GET['searchText']))
 {
 echo($_GET['searchText']);
}

?>"
/>         
<table width="300">
<tr>
<td><label>
<input name="searchType" type="radio"  value="1" id="searchType_0" checked="checked"/>
Aggregated</label></td>

<td><label>
<input name="searchType" type="radio"  value="2" id="searchType_1" />
NonAggregated</label></td>
</tr>
</table>

<input type="submit" value="Search!" name="submit" id="searchButton" />
 </form> 
```

结果页面

```
<?php
require('code.php'); 
$result = $_GET['searchText'];
$selected_radiobtn = $_GET['searchType'];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <title>Your Website</title>
    </head>

    <body>
        <?
        if ($selected_radiobtn == '1') 
        {
        query($result);
        }           
        elseif($selected_radiobtn == '2') 
        {
        query($result);
        }
         ?> 
    </body>

</html> 
```

代码.php

```
$searchText=$_GET['searchText'];
function query($searchText)
{
$searchText = bingSpellCheck($searchText);
$searchText = commonPreProcessing($searchText);
}
    function bingSpellCheck($query) {

        $bingArray = array();

        $accountKey = '****************************************';
        $ServiceRootURL = 'https://api.datamarket.azure.com/Bing/Search/';
        $WebSearchURL = $ServiceRootURL.'SpellingSuggestions?$format=json&Query=';

        $cred = sprintf('Authorization: Basic %s', base64_encode($accountKey.":".$accountKey));

        $request = $WebSearchURL.'%27'.urlencode($query).'%27&$top=2';

        $ch = curl_init($request);
        curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
        curl_setopt($ch, CURLOPT_USERPWD, $accountKey.":".$accountKey);
        curl_setopt($ch, CURLOPT_TIMEOUT, 30);//how long before time out
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);//return raw data
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);// dont verify ssl

        $data = curl_exec($ch);
        //$erno = curl_errno($ch);
        //$err = curl_error($ch);

     $js = json_decode($data);

       if($length = count($js->d->results))
       {
               for($i = 0; $i <= $length; $i++)
               {

                       $bingArray[$i]['Value'] = $js->d->results[$i]->Value;

                       if(isset($bingArray[$i]['Value']))
                       {
                               print_r("Did You Mean ".'<a href="?searchText='.$bingArray[$i]['Value'].'">'.$bingArray[$i]['Value']."</a>?");
                               //$searchText = $bingArray[0]['Value'];
                               return $query;
                       }
               }
       }
       else
       { //$searchText = $query;
       //thesaurusPreProcessing($query);
               return $query;
       }

}

unction commonPreProcessing($searchText) {

    $punctuation = array("+",",",".","-","'","\"","&","!","?",":",";","#","~","=","/","$","£","^","(",")","_","<",">");
    $searchText = str_replace($punctuation, ' ', strtolower($searchText));

    for($tokens=array(), $nextToken=strtok($searchText, ' '); $nextToken!==false; $nextToken=strtok(' '))
    {

        if ($nextToken === 'not')
        {
        $nextToken = str_replace('not','NOT',$nextToken);
        }
        if ($nextToken === 'and')
        {
        $nextToken = str_replace('and','AND',$nextToken);
        }
        if ($nextToken === 'or')
        {
        $nextToken = str_replace('or','OR',$nextToken);
        }

        $tokens[] = $nextToken;

    } 

    $array = $tokens;
    $searchText = implode(" ", $array);
    //print_r($searchText);
    $searchText = str_replace(" ","%20",$searchText);

    return $searchText;
    } 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:51:25.990

如果您的表单提交方法是 GET 那么这将起作用

```
$result = $_GET['searchText']; 
```

或者如果您使用的是 POST，则使用

```
$result = $_POST['searchText']; 
```

在您的结果页面中

休息一下，我找不到您的代码有任何问题。

# google-closure - 如何使用 Google Closure 库在新标签页中可靠地打开页面？

> ID：11606547
> 
> 赞同：0
> 
> 时间：2012-07-23T04:36:30.877
> 
> 标签：google-closure, google-closure-library

我曾尝试在新窗口中打开一个页面

```
goog.window.open('/urlToOpen', {
      "location": false,
      "menubar": false,
      "statusbar": false
  }); 
```

但是，执行此代码时，Google Chrome 的弹出窗口阻止程序阻止了我这样做。

Google 文档在新标签中打开以进行编辑。我可以用 Closure 同样打开一个新标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:01:02.530

您是否尝试过将代码作为对用户驱动的浏览器事件（例如按钮单击）的回调来执行？否则，Chrome 会禁止打开新窗口/标签。

```
<a class="link" href="#">Some link</a> 
```

在这个[jsfiddle](http://jsfiddle.net/LnFNt/2/)中尝试一下。

```
$('.link').click(function() {
  goog.window.open('/urlToOpen', {
    "location": false,
    "menubar": false,
    "statusbar": false
  });
}); 
```

# android - 如何创建用户界面，如所附照片

> ID：11606548
> 
> 赞同：9
> 
> 时间：2012-07-23T04:36:37.277
> 
> 标签：android, android-layout, user-interface, styles, adapter

谁能告诉我这个照片效果叫什么。我想知道如何为这个附加的图像效果创建一个适配器。

@Edited：这是 Android 市场的示例照片。我想创建这样的布局。我想这应该覆盖一个 GridView 适配器。

人像截图

* * *

[![照片](../Images/6b59788a9706205b563c51878196642d.png)](https://i.stack.imgur.com/t1MiI.png)

## 

风景截图

* * *

[![照片](../Images/d647cf603673fb524b74c24028a15aa2.png)](https://i.stack.imgur.com/MTEVa.png)

* * *

另一个截图

* * *

[![照片](../Images/813dd077c62670e5b9f5cfa264c25592.png)](https://i.stack.imgur.com/HSTws.png)

非常抱歉我的问题对你们来说不是很清楚。

可能[重复](https://stackoverflow.com/questions/8573389/metro-interface-in-android-applications)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T09:42:40.580

你有没有试过这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.54" >
        <Button
            android:id="@+id/Button01"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1.00"
            android:text="Button" />    
        <Button
            android:id="@+id/Button02"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1.00"
            android:text="Button" />    
    </LinearLayout>
    <Button
        android:id="@+id/button3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button" />  
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="99dp" > 
        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />  
        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="Button" />    
    </LinearLayout>   
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >    
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >   
            <Button
                android:id="@+id/button4"
                android:layout_width="match_parent"
                android:layout_height="152dp"
                android:text="Button" />    
            <Button
                android:id="@+id/button5"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Button" />    
        </LinearLayout>    
        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >
            <Button
                android:id="@+id/button6"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Button" />
            <Button
                android:id="@+id/button7"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:text="Button" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

检查这个线程：[异构GridLayout](https://stackoverflow.com/questions/10812552/heterogeneous-gridlayout)

![在此处输入图像描述](../Images/08fa731b6722d831a904ba66ac1d0494.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:42:13.777

您按以下顺序创建：

权重总和为 2 的线性布局（垂直）；

LinearLayout(VERTICAL)，权重为 1，weightSum 为 3；

里面有 3 个布局，权重为 0.70 的水平线性布局，权重为 0.50 的水平线性布局和权重为 1.80 的 imageView

LinearLayout(VERTICAL)，权重为 1，权重总和为 3；

里面将是3个线性布局

2 *（其中 2 个）-在此水平布局内，权重为 0.50 且权重总和为 2 的水平将是两个图像视图，每个图像视图的权重为 1

第三个也是最后一个权重为 1.50 的图像视图

这样做，您将拥有您喜欢的正确加权布局

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T05:11:46.013

您可以创建表格布局，在表格行中，您可以添加列和行跨度来创建这样的布局。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T07:24:54.367

这个看起来不像普通的 Gridview 或 listview 适配器。您可能必须为其创建自定义控件。例如，在给定的示例中，某些应用程序与其他应用程序相比具有更大的权重。权重较大的应占全幅，其他占宽度的 50% 或 33%（基于横向或纵向）。

所以逻辑创建一个表格布局并基于权重在适配器上添加更多控件。并且根据权重，您必须相应地创建行或列跨度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T16:27:32.390

如果我要复制市场布局，我会使用以下类：

```
 1\. Obviously ViewPager for horizontal swiping ability.
 2\. A heavily customized ListView. 
```

ListView 中有一个名为 的方法`addHeaderView()`，您可以在其中使用您自己的自定义布局来操作列表视图中出现的前几个项目。在这种情况下，列表中的第一个、第 4 个、第 5 个和第 6 个项目将是一个`ImageView`与它的宽度匹配的父项，并且可能是一个固定的高度。

第 2 项和第 3 项将只是水平`LinearLayout`的，具有 2 个具有相同权重的 ImageView，其余的只是具有自定义布局的 Listview。

以上所有这些都是指手机中的“人像”视图。对于“横向”视图，您将不得不手动进行。

诀窍是您如何修改您的`BaseAdapter`以填充您的列表视图。在默认列表视图中，一个“位置”指的是列表视图中的一行。在这种情况下，您的自定义列表视图布局由单行中的两个项目组成。试着弄清楚这一点，玩弄你的数据和数组。我确信它可以做到。=)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-23T08:39:02.930

这应该使用`GridView`.

从外观上看，您有 3 种尺寸：一种覆盖 1 个空间，一种覆盖 2 个空间，另一种覆盖 4 个空间。这应该不容易。

但是图像在堆栈中的方式以及布局的方向我相信你最好的选择是通过`GridView`. 它在实现列和行方面非常灵活，并且在方向更改中提供了一些现成的实现。

您应该制作 3 种物品，一种有 4 个 small `View`s，另一种有 2 个 item，另一种有一个 big `View`。在每个单元格中都可以有上述之一。

根据某些属性，您应该填充`GridView`. 然后你应该尝试提供的选项`GridView`（它有一些属性可以根据布局中的宽度和高度“自动”堆叠元素）。这就是我所能提供的，因为我没有做过类似的事情。

编辑：试图实现android市场界面而不搜索一点点，只通过复制粘贴？？这不可能像你想象的那么容易。

无论如何，如果我是你，我仍然会从我之前提到的实现开始。虽然我不能提供任何代码，因为我没有做过任何类似的事情，在你的情况下`GridView`，已经提供的所有实现将是一个很大的帮助。

PS：我的意见是先尝试搜索一下，然后再次更新问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-25T13:32:40.453

我认为市场应用程序是使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)完成的，每个页面都包含一个`RelativeLayout`或`LinearLayout`. 为了制作类似metro的界面，`GridView`每个页面的a更合适。

```
 page 1             page 2         page 3
________________________________________________
|              |                 |              | 
|              |                 |              | 
|    GridView  |     GridView    |   GridView   | 
|              |                 |              | 
|              |                 |              | 
|              |                 |              | 
|              |                 |              |
|              |                 |              |
------------------------------------------------- 
```

[在这里，您将找到一些 ViewPager 教程的链接](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

[这里还有一个](http://blog.stylingandroid.com/archives/537#)

## 更新：

您甚至可以使用[OverScroller](http://developer.android.com/reference/android/widget/OverScroller.html)在滚动时为其赋予弹性效果。

# java - 在 servlet 中统计 Web App 中的用户数

> ID：11606551
> 
> 赞同：-1
> 
> 时间：2012-07-23T04:36:51.420
> 
> 标签：java, servlets

我已经修改了我的应用程序以找出登录 Web 应用程序的用户数下面是我的一段代码..

监听器类

```
 import javax.servlet.ServletContext;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

public class SessionCounter implements HttpSessionListener
{
        private static int count;

        public static int getActiveSessions() {
            return count;
            }

        public SessionCounter()
        {
        }

//The "sessionCount" attribute which has been set in the servletContext should not be modified in any other part of the application. 
//Since we are using serveltContext in both the methods to modify the same variable, we have synchronized it for consistency.

        public void sessionCreated(HttpSessionEvent e)
        {
                count++;
                ServletContext sContext = e.getSession().getServletContext();
                synchronized (sContext)
                {
                        sContext.setAttribute("sessionCount", new Integer(count));
                }
        }

        public void sessionDestroyed(HttpSessionEvent e)
        {
                count--;
                ServletContext sContext = e.getSession().getServletContext();
                synchronized (sContext)
                {
                        sContext.setAttribute("sessionCount", new Integer(count));
                }
        }
} 
```

主要的servlet是..

```
package com.saral;

import java.io.IOException;
import org.apache.log4j.Logger;
import org.apache.log4j.PropertyConfigurator;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class First
 */
//@WebServlet("/First")
public class MyServlet extends HttpServlet
{
    private static final long serialVersionUID = 1L;
    static final Logger logger = Logger.getLogger(MyServlet.class);

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PropertyConfigurator.configure("log4j.properties");
        logger.info("before---->");

        // TODO Auto-generated method stub
        String name=request.getParameter("txtName");
        response.setContentType("text/html");
        PrintWriter out=response.getWriter();
        out.println("Hello,"+name);
        out.println("<br> this output is generated by a simple servlet.");
        out.println("Total Number of users logged in--->"+SessionCounter.getActiveSessions());
        out.close();

    }

} 
```

而 web.xml 是......

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>FirstDemo</display-name>

  <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.properties</param-value>
</context-param>

  <servlet>
    <servlet-name>hello</servlet-name>
    <servlet-class>com.saral.MyServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>hello</servlet-name>
    <url-pattern>/helloServlet</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>home.html</welcome-file>
  </welcome-file-list>

  <listener>
  <listener-class>com.saral.SessionCounter</listener-class>
</listener>

</web-app> 
```

但是我的登录用户总数为 0 ，这并不完美，请告知我哪里错了，我该如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-26T04:03:06.247

当客户端请求到达 Tomcat 服务器并且您不调用`request.getSession()`时，Tomcat 服务器仍会自动创建会话。之后，将`sessionCreated(...)`调用 SessionCounter 类中的方法。

该方法`sessionDestroyed(...)`将在会话被销毁时调用。当您调用时会发生这种情况`session.invalidate()`。如果您关闭浏览器上的选项卡或关闭浏览器，则会话在您的 tomcat 服务器上仍然存在。

我认同。您可以使用一些不同的侦听器来归档您的目标：`HttpSessionAttributeListener`, `HttpSessionBindingListener`,...

# html - jQuery Mobile changePage 不起作用

> ID：11606561
> 
> 赞同：0
> 
> 时间：2012-07-23T04:38:08.877
> 
> 标签：html, jquery-mobile

我正在尝试使用链接到以下 html 页面

```
$.mobile.changePage( "myPage.html", { transition: "slide"} ); 
```

但是，它不起作用。该页面将加载，但是带有旋转圆圈和“正在加载”消息的警报框永远不会消失，并且页面永远不会完全加载其 css 内容。任何人都可以根据上面的调用和下面的 html 看出原因吗？谢谢

**网页**

```
<!DOCTYPE html> 
<html> 
  <head> 
  <title>Sign up</title> 

  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.css" />
  <link rel="stylesheet" href="./signup.css">
  <script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.js"></script>

  <script>   
   // Global declarations - assignments made in $(document).ready() below
    var hdrMainvar = null;
    var contentMainVar = null;
    var ftrMainVar = null;
    var contentTransitionVar = null;
  </script>

</head> 
<body> 

<!-- Page starts here -->
    <div data-role="page" data-theme="b" id="page1">

      <div data-role="header" id="hdrMain" name="hdrMain" data-nobackbtn="true">
        <h1>Classroom Tempo</h1>
      </div>

          <div data-role="navbar">
          <ul>
            <li><a href="" data-icon="" data-transition="fade" class="ui-btn-active ui-state-persist">Sign-In</a></li>
            <li><a href="survey_SignUp.html" rel="external" data-icon="" data-transition="fade">Sign-Up</a></li>
          </ul>
        </div>

      <div data-role="content" id="contentMain" name="contentMain"> 

      <form id="form1">

      <div id="optionSliderDiv" data-role="fieldcontain">
        <label for="optionSlider">How Many Options?</label>
        <input type="range" name="optionSlider" id="optionSlider" value="2" min="2" max="25" data-highlight="true" />
      </div>

      <fieldset data-role="controlgroup">
      <legend>Numbers or Letters?:</legend>
          <input type="radio" name="numbersOrLetters" id="Numbers" value="Numbers" checked="checked" />
          <label for="Numbers">Numbers</label>

          <input type="radio" name="numbersOrLetters" id="Letters" value="Letters"  />
          <label for="Letters">Letters</label>
    </fieldset>

      <script>

        $(document).ready(function() {
        // Assign global variables
           hdrMainVar = $('#hdrMain');
          contentMainVar = $('#contentMain');
          ftrMainVar = $('#ftrMain');
          contentTransitionVar = $('#contentTransition');

          sliderValue = $('#optionSlider');
          surveyDescriptionVar = $('#SurveyDescription')

          form1Var = $('#form1');
          confirmationVar = $('#confirmation');
          contentDialogVar = $('#contentDialog');

          hdrConfirmationVar = $('#hdrConfirmation');
          contentConfirmationVar = $('#contentConfirmation');
          ftrConfirmationVar = $('#ftrConfirmation'); 
          inputMapVar = $('input[name*="_r"]');

          hideContentDialog();
          hideContentTransition();
          hideConfirmation();
        }); 

        $('#buttonOK').click(function() {
          hideContentDialog();
          //hidePasswordMisMatch();
          showMain();
          return false;      
        });

        $('#form1').submit(function() {
            var err = false;
            var passwordError = false;

            // Hide the Main content
            hideMain();

            console.log(sliderValue.val());

            // If validation fails, show Dialog content
            if(err == true){  

            console.log("we've got an issue");
              showContentDialog();

              return false;
            }        

            $('input[name=OnOff]').each(function() { 
                onOffValue = $('input[name=OnOff]:checked').val();
            })

            $('input[name=numbersOrLetters]').each(function() { 
                numbersOrLetters = $('input[name=numbersOrLetters]:checked').val();
            })

            console.log(onOffValue);
            console.log(numbersOrLetters);
            // If validation passes, show Transition content
            showContentTransition();

            // Submit the form
            $.post("http://url", form1Var.serialize(), function(data){

              console.log(data);

              hideContentTransition();
              showConfirmation();
            });        
            return false;      
        });   

      </script>
    </div> <!-- page1 -->

<!-- Page ends here -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:06:36.683

从 jQuery Mobile 的 1.0 alpha 4 和 1.0.1 版本开始，`$.mobile.changePage`API 发生了一些变化。您与选项对象一起使用的语法是较新版本的 jQuery Mobile（至少从 1.0.1 开始）。

# sql - oracle sql 查询生成一些未执行的结果

> ID：11606566
> 
> 赞同：-1
> 
> 时间：2012-07-23T04:39:05.060
> 
> 标签：sql, oracle

我有一个 sql 查询，其中我有一个以`attan`考勤命名的表和一个名为列的列 `S_TIME`，我在其中存储了 time 和 out time，并设置了 in with`I`和 for`O`

现在，我正在尝试使用标志来赶上和下班。我写了一个查询，但是这个查询的结果有一些错误的意义。

这是我的查询

```
SELECT X.AC_NO, X.IN_TIME, Y.OUT_TIME, X.S_DTE, X.CHK_IN, Y.CHK_OUT
  FROM (SELECT A.AC_NO, A.S_TIME IN_TIME, A.AC_CHECKTYPE CHK_IN, A.S_DTE
          FROM ATTN A
         WHERE A.AC_CHECKTYPE = 'I' AND A.S_DTE = :P_DTE) X,
       (SELECT B.AC_NO, B.S_TIME OUT_TIME, B.AC_CHECKTYPE CHK_OUT
          FROM ATTN B
         WHERE B.AC_CHECKTYPE = 'O' AND B.S_DTE = :P_DTE) Y
 WHERE X.AC_NO = Y.AC_NO(+) 
```

通过这个查询，我总是得到员工的记录数，并且只有 2 个没有时间的记录。

而在表中，有 234 名员工加入，256 名退出，但结果与数据不符。

如果我的查询中有任何问题，请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:47:42.357

建议：

1.  运行子选择，看看你是否得到了所有你期望的行，有和没有“A.S_DTE = :P_DTE”日期过滤器：

    `SELECT A.AC_NO, A.S_TIME IN_TIME, A.AC_CHECKTYPE CHK_IN, A.S_DTE FROM ATTN A WHERE A.AC_CHECKTYPE = 'I' AND A.S_DTE = :P_DTE`

2.  我的第一个猜测是，也许你有一个日期时间，除非小时/分钟/秒*完全*匹配，否则你不会得到该行。您可以使用 to_char() 在“发件人”中仅包含“日期”部分：

    [http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:204714700346328550](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:204714700346328550)

3.  在任何情况下，查看您在子查询中执行（和不执行）哪些行应该会告诉您完整查询有什么问题。

请发回你找到的东西！

# python - 如何在 python 中发送箭头键使用 paramiko 库？

> ID：11606569
> 
> 赞同：3
> 
> 时间：2012-07-23T04:39:55.507
> 
> 标签：python, ssh, paramiko, arrow-keys

我正在使用 python 2.7 和带有**paramiko**库的代码 ssh 客户端，我`myhost.channel.send(chr(keycode))`用来将每个键码发送到服务器。但它只适用于 1 字节的键码。我想发送其他多字节键码，如箭头键。我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:12:36.870

像 Windows 或 MacOS 这样的 GUI 使用“keycodes”识别密钥，但 SSH 管道只传输字节，而不是 keycode。

假设在您的服务器上运行在 ssh 中的程序是交互式的（也就是说，它期望有人使用它），您需要找出它期望接收的字节模式类型。当你打开你的频道时，确保你正在调用`.get_pty()`它并给它一个终端参数（默认的，`vt100`非常安全）。然后，您需要阅读 VT100 终端的文档，以了解按下各种键时它发送的字节序列。我建议阅读[Xterm Control Sequences](http://www.xfree86.org/current/ctlseqs.html#PC-Style%20Function%20Keys)文档（Xterm 严格来说不是 vt100 仿真器，但它的文档非常完整），并且不要与原始 VT100 终端的硬件细节混淆）。请注意，在该文档中，“CSI”实际上表示 Python 字符串`'\e['`。

例如，Xterm 控制序列文档说箭头键是“CSI A”代表向上，“CSI B”代表向下，“CSI C”代表右边，“CSI D”代表左边。在 Python 中，这看起来像：

```
up = '\e[A'
down = '\e[B'
right = '\e[C'
left = '\e[D' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T04:19:39.960

在 macOS 10.13.2 中，您可以使用：

```
class Keyboard:
    up = '\x1b[A'
    down = '\x1b[B'
    right = '\x1b[C'
    left = '\x1b[D' 
```

（我从 中读到它们`sys.stdin`）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-20T01:39:16.113

我认为在python中您可以执行以下操作：

```
channel.sendall(chr(0x1b)+"[B") 
```

0x1B 是 VT100 终端的 ASCII 转义字符。

# c# - 如何将从模板创建的列表添加到作为接口属性接收的列表中？

> ID：11606570
> 
> 赞同：0
> 
> 时间：2012-07-23T04:40:26.083
> 
> 标签：c#, .net, linq, generics, .net-3.5

我有一个界面说`public interface IofMine{}`和这样的代码：

```
interface IItems
{
    List<IofMine> MyList;
}

public class Items: IItems{
    private List<IofMine> _myList;
    public List<IofMine> MyList
        {
            get{return _myList;}
            set{_myList = value;}
        }
}

public class ofMine : IofMine
{}

... 
```

在说 main 的某些地方，我将此函数称为 add1 和 add2 ，看起来像这样：

```
...
public static void add1<T>(Items items) where T : IofMine, new()
{
    var temp = items.MyList;
    var toAdd = new List<T>();
    temp.AddRange(toAdd); // here it talls me :  Error Argument 1: cannot convert from 'System.Collections.Generic.List<T>' to 'System.Collections.Generic.IEnumerable<IofMine>'
}

public static void add2<T>(Items items) where T : IofMine, new()
{
    var toAdd = new List<T>();
    toAdd.AddRange(items.MyList); // here it talls me :  Error Argument 1: cannot convert from 'System.Collections.Generic.List<IofMine>' to 'System.Collections.Generic.IEnumerable<T>'
} 
```

所以我想知道如何使用我的函数收到的通用模板中的列表来扩展界面中的列表，反之亦然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:04:37.890

将您的 toAdd 变量实例化为列表，而不是列表。所以你有线条：

```
var toAdd = new List<T>(); 
```

在您的方法中，将它们更改为：

```
var toAdd = new List<IofMine>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:26:52.320

您不能直接从通用类强制转换实现接口的类。一种解决方案是强制转换对象或在 .NET 4.0 中使用动态：

```
public static void add1<T>(Items items) where T : IofMine
{
        List<T> temp = (List<T>)(object)items.MyList;
        var toAdd = new List<T>();
        ofMine of = new ofMine() { i = 0 };
        toAdd.Add((T)(IofMine)of);
        temp.AddRange(toAdd);
} 
```

如果您想从 Microsoft 开发人员那里获得有关此决定的一些解释，可以在此处找到：[C# 中的泛型 - 无法将 'classname' 转换为 'TGenericClass'](https://stackoverflow.com/questions/9501439/generics-in-c-sharp-cannot-convert-classname-to-tgenericclass)

希望这可以帮助。

# django - Django ModelAdmin response_change 方法

> ID：11606576
> 
> 赞同：4
> 
> 时间：2012-07-23T04:40:47.203
> 
> 标签：django, django-admin

我发现 admin.ModelAdmin 上的 response_change 方法非常有用——但我不相信它记录在[https://docs.djangoproject.com/en/1.4/ref/contrib/的 Django 文档中管理员/#modeladmin-methods](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-methods)。源代码是获取详细信息的唯一位置吗？如果是这样，它在哪里？我看了这里：[https://github.com/django/django/tree/master/django/contrib/admin](https://github.com/django/django/tree/master/django/contrib/admin)但没有找到任何东西......

它的有效使用示例如下：http: [//brandonkonkle.com/blog/2010/oct/4/django-admin-customization-examples/](http://brandonkonkle.com/blog/2010/oct/4/django-admin-customization-examples/)。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:24:58.597

你可以在这里找到它： [https ://github.com/django/django/blob/master/django/contrib/admin/options.py](https://github.com/django/django/blob/20ba3ce4ac8e8438070568ffba76f7d8d4986a53/django/contrib/admin/options.py#L1234)

django.contrib.admin 是一个奇怪的野兽，因为它包含许多实用功能，这可能对一般 django 有用，但仅供其内部使用。这意味着它们可能会消失或在版本之间发生变化，并且您不能对其进行中继，尤其是在它进入核心 django 之前（或者只是准备用 yout 测试覆盖它）。

# titanium - 通过 Titanium 的 tiapp.xml 在 AndroidManifest.xml 中驱动权限

> ID：11606580
> 
> 赞同：0
> 
> 时间：2012-07-23T04:41:13.260
> 
> 标签：titanium, titanium-mobile

我正在尝试将使用**Titan-mobile**开发的移动应用程序上传到 Google Play 市场。我收到以下消息：

> **这个apk请求4个权限，用户将被警告** android.permission.ACCESS_WIFI_STATE
> android.permission.ACCESS_NETWORK_STATE
> android.permission.WRITE_EXTERNAL_STORAGE
> android.permission.INTERNET
> 
> **此 apk 请求 2 个功能，这些功能将用于 Google Play 过滤** android.hardware.touchscreen
> android.hardware.wifi

在本地开发应用程序时，我可以直接通过`AndroidManifest.xml`文件修改这些权限。使用 Titanium，我实际上并没有生成`AndroidManifest.xml`自己，而是由 Titanium 的构建生成。

**`tiapp.xml`**有没有办法通过删除、启用或禁用生成的钛中的权限向钛的构建引擎发送指令`AndroidManifest.xml`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:13:23.063

您不能通过 编辑权限`tiapp.xml`。

您可以`AndroidManifest.xml`直接编辑该文件
（位于`{TitaniumWorkspace}/{ProjectRoot}/build/android/AndroidManifest.xml`） ，
然后复制并编辑该文件。之后，确保将其放在具有以下文件夹层次结构的根项目目录中：

1.  您的根项目文件夹
2.  `platform`（注意：您可能需要创建此文件夹）
3.  `android`（注意：您可能需要创建此文件夹）
4.  `AndroidManifest.xml`

放置已编辑清单的示例路径： `{TitaniumWorkspace}/{ProjectRoot}/platform/android/AndroidManifest.xml`

# ms-access - 如何在 Access 2010 中使用自定义 Excel 函数（或加载项）

> ID：11606583
> 
> 赞同：0
> 
> 时间：2012-07-23T04:41:35.397
> 
> 标签：ms-access, excel, add-in, vba

有没有办法可以在 Access2010 中重用最初用 Excel 2010 编写的一组自定义函数？我正在编写一个 excel 插件，它为 excel 用户提供自定义功能。其中一些功能引用其中一张 excel 表中的数据。在其中一个访问数据库中也需要相同的功能。

我是 excel 世界的新手，只是想知道这是否可以做到？

（我做java coder很久了，最近开始做excel）

更新：回应蒂姆的评论 - 目前我不仅有“简单”的条件和代码，但你是对的，随着复杂性的增加，这可能会改变。示例功能：

```
Function BaselinedNumber(baseline_high, baseline_low, high)
    If baseline_low = 0 Then
        BaselinedNumber = 0
    Else
        baseDiscount = (baseline_high - baseline_low) / baseline_high
        BaselinedNumber = high * (1 - baseDiscount)
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-27T03:46:07.927

暗淡 appExcel 作为新的 Excel.Application

appExcel.Visible = False

appExcel.Workbooks.Open excelFileName

appExcel.Run (BaselinedNumber), val1, val2, val3

appExcel.Quit

# c# - 试图让 ninject 和 signalR 正常工作

> ID：11606586
> 
> 赞同：3
> 
> 时间：2012-07-23T04:41:50.940
> 
> 标签：c#, asp.net, ninject, signalr

在我的 NinjectWebCommon.cs 文件中，在`RegisterServices`方法下我有以下内容：

```
private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<IProfileRepository>().To<ProfileRepository>();
            kernel.Bind<IMatchUpService>().To<MatchUpService>();
            kernel.Bind<ISoloUserRepository>().To<SoloUserRepository>();
           SignalR.GlobalHost.DependencyResolver =  new SignalR.Ninject.NinjectDependencyResolver(kernel);

        } 
```

我正在尝试将 SoloUserRepository 注入到我的集线器类中，这是我的集线器类：

```
public class MatchMaker : Hub
    {
        [Inject]
        private ISoloUserRepository soloUsers { get; set; }
} 
```

出于某种原因，当我尝试`soloUsers`在 Hub 类中使用该对象时，我得到`object reference not set to instance of an object`了因为该`soloUsers`对象从未被实例化，或者换句话说，没有被注入。难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T05:46:14.827

您的问题是您有一个`private`属性，默认情况下 Ninject 不会注入私有属性。

因此，您可以创建自己的财产`public`，也可以通过以下方式启用非公共财产注入：

```
kernel.Settings.InjectNonPublic = true; 
```

我不熟悉 SignalR 中的依赖注入（所以可能不支持），但你应该总是更喜欢构造函数注入，所以你`Hub`应该是这样的：

```
public class MatchMaker : Hub
{    
    private readonly ISoloUserRepository soloUsers;

    public MatchMaker(ISoloUserRepository soloUsers) 
    {
        this.soloUsers = soloUsers;
    }
} 
```

# javascript - 需要帮助在 Internet Explorer 7 上运行此 Javascript 代码

> ID：11606588
> 
> 赞同：1
> 
> 时间：2012-07-23T04:41:57.613
> 
> 标签：javascript, internet-explorer, google-chrome, bookmarklet

我在 Chrome 中运行以下 JavaScript 书签代码，它运行得非常好。但是，当我在 IE 中尝试相同的代码时，只会打开一个空白窗口。

```
javascript:var str=document.documentElement.innerHTML;
var find='</textarea>';var re=RegExp(find,'g');str=str.replace(re,"</OMG>");
var cmrform = document.createElement("form");cmrform.target="CMRWindow";cmrform.method="POST";
cmrform.action="http://localhost:8080/cmr/CMRTool.jsp";
 var srcInput=document.createElement("input");srcInput.type="text";srcInput.name="sourceCode";srcInput.value=str;cmrform.appendChild(srcInput);CMRWindow=window.open("","CMRWindow","status=0,title=0,height=600,width=800,scrollbars=1");cmrform.submit(); 
```

有人可以指导我为什么这段代码在 IE 中不起作用。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T04:07:14.547

使用`document.forms`代替`cmrform`：

```
document.forms[document.forms.length - 1].submit(); 
```

# java - Oracle 数据库未使用 NetBeans 更新

> ID：11606591
> 
> 赞同：0
> 
> 时间：2012-07-23T04:43:12.500
> 
> 标签：java, servlets, jdbc

我在使用 NetBeans 更新 Oracle 数据库时遇到问题。我在 jsp 页面上的表单中输入电子邮件地址，并将此页面重定向到编写数据库代码的 servlet。当通过输入电子邮件地址提交表单时，它不会存储在数据库中，也不会像 servlet 代码中那样打印“更新”。我在数据库中创建了一个名为“email”的表，其字段地址类型为 varchar(40)。下面是我的 servlet 代码：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    PrintWriter out=response.getWriter();
   String mail=request.getParameter("t1");
   try
   {
        Class.forName("oracle.jdbc.driver.OracleDriver");
       Connection con=null;
       try
       {
           con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe","ankush","abcdefg");
           PreparedStatement stmt=con.prepareStatement("insert into email values(?)");
           stmt.setString(1,mail);
           stmt.executeUpdate();
           out.println("updated");
        }
       finally
       {
          con.close();
       }
   }
   catch(SQLException e)
   {

   }
   catch(Exception e1)
   {

   }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:59:17.007

展开项目节点右键单击库并添加

ojdbc14_g.jar

类名是：oracle.jdbc.driver.OracleDriver

url 是 jdbc:oracle:thin:@[:<1521>]:

您可以在 oracle db 的安装文件夹中的某处找到 ojdbc14_g.jar

或尝试[http://wiki.netbeans.org/DatabasesAndDrivers#section-DatabasesAndDrivers-OracleDriverForTheOracle10.xDatabase](http://wiki.netbeans.org/DatabasesAndDrivers#section-DatabasesAndDrivers-OracleDriverForTheOracle10.xDatabase)

# xslt - 使用 XSLT 将 XML 转换为 XML（添加、删除、修改）

> ID：11606596
> 
> 赞同：1
> 
> 时间：2012-07-23T04:43:42.460
> 
> 标签：xslt, xhtml, xslt-1.0

我正在尝试使用 XSLT 从一个 XML (XHTML) 文件转换为另一个。我必须添加一些新元素和属性，删除一些元素和属性以及更新一些现有属性的值。因此，借助本论坛中提供的宝贵帮助，我能够按照我之前的问题的答案完成许多任务：[XML to XML with XSLT- Add, Remove, Modify Elements and Attributes](https://stackoverflow.com/questions/11597141/xml-to-xml-with-xslt-add-remove-modify-elements-and-attributes)但是当元素具有相同的名称和相同的属性时，就会出现问题。那时我无法区分它以进行修改。例如：我在 id="123" 的 div 标签后面有两个 type="t/j" 的脚本，在 head 标签内有一个 type="t/j" 的脚本。我必须删除 src="abc.js" 的脚本元素，仅当它出现在 div 标记之后（不在 head 标记内）并将 xyz.js 的值更改为 lmn.js。我已在我的源文件和所需文件中就这些修正案发表了评论。为了消除 onClick 事件，我传递了一个模板匹配，它使用 @onClick 什么都不做，它根据要求从任何地方删除 onClick 事件。但是，当我应用相同的技术来删除“跨度”时 来自特定位置的标签（在源文件中注释）然后它不仅从那里删除，而且从所有其他我不想的地方删除。请在下面找到我的 XML 文件 -

源文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
<script type="t/j" src="abc.js"></script>
</head>

<body>
<div id="o">
<div id="m">
<div id="nD">
<p id="nT">
Part 1</p>
</div>

<div class="TF" id="123">
<!--CHANGE THE VALUE OF XYZ.JS TO LMN.JS-->
<script type="t/j" src="xyz.js"></script>
<!--REMOVE THIS SCRIPT-->
<script type="t/j" src="abc.js"></script>
<div class="iD">
<img alt="" src="ic.gif" />
<span class="iDe">ABC</span><br/>
<div class="iDev">
<div id="ta12" class="bl" style="dis:bl"></div>

<div class="q">
<br/><br/>
<!--TO REMOVE SPAN TAG FROM HERE-->
<div id="ta12" class="bl" style="dis:bl">1<span style="color: #000000;"> XYZ</span> </div>
<!--REMOVE ONCLICK EVENT -->
<br/>T <input type="radio" name="op12" id="t12" onclick="getFeedback()"/> 
F <input type="radio" name="op12" id="f12" onclick="getFeedback()"/>
<div>C </div>
<div>In </div>

<div>
<div></div>
</div>
</div>

</div>
</div>
</div>

</div>
</div>
</body></html> 
```

所需文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
<script type="t/j" src="abc.js"></script>
</head>

<script type="t/j" src="pqr.js"></script>
<script type="t/j" src="stu.js"></script>

<body onload="load()" onunload="unload()">
<div id="o">
<div id="m">
<div id="nD">
<p id="nT">
Part 1</p></div>

<div class="QT" id="456">
<script type="t/j" src="lmn.js"></script>
<form name="form1" id="q8" action="js:cal();">
<div class="iD">
<img alt="" src="ic.gif" />
<span class="iDe">ABC</span>
<div class="iDev">
<!--ADD THIS DIV TAG-->
<div class="pa" value="10"></div>

<div class="q">
<div id="ta8" class="bl" style="dis:bl">XYZ 
</div><br/>
<input type="radio" name="ke8" value="0" />
<div id="tab8" class="bl" style="dis:bl">T 
</div>
<input type="radio" name="ke8" value="1" />
<div id="tab8" class="bl" style="dis:bl">F 
</div>
</div>
<br/><input type="submit" name="sub" value="Done"/>
</div></div>
</form>
</div>
</div>
</div>

</body></html> 
```

我正在使用 XSLT 1.0。因此，根据建议和一些修改（尽管在 id="1" 等某些地方有所不同），我的 XSLT 看起来像： ***已更新***

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xhtml="http://www.w3.org/1999/xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
 exclude-result-prefixes="xhtml">
<xsl:output method="xml" indent="yes" encoding="UTF-8"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="xhtml:body">
<script type="t/j" src="pqr.js"></script>
<script type="t/j" src="stu.js"></script>
<body onload="loadPage()" onunload="unloadPage()">
  <xsl:apply-templates select="@*|node()"/>
</body>
</xsl:template>
<xsl:template match="xhtml:div[@id='123']/@class">
  <xsl:attribute name="class">QT</xsl:attribute>
   <xsl:attribute name="id">456</xsl:attribute> 
</xsl:template>
<xsl:template match="xhtml:script[@src='xyz.js']">
 <xsl:copy>
  <xsl:apply-templates select="@*[not(@src)]" />
  <xsl:attribute name="src">lmn.js</xsl:attribute>
  <xsl:apply-templates select="node()" />
 </xsl:copy>
</xsl:template>
<xsl:template match="xhtml:body//xhtml:script[@src='abc.js']" />

<xsl:template match="xhtml:div[@class='iD']">
  <form name="form">
   <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
   <xsl:apply-templates select="following-sibling::xhtml:div[1]" mode="inside-form"/>
   <br/><input type="submit" name="sub" value="Done"/> 
  </form>
</xsl:template>
<xsl:template match="xhtml:div[@id='ta12']">
  <xsl:attribute name="class">pa</xsl:attribute>
  <xsl:attribute name="value">10</xsl:attribute>
</xsl:template>

<xsl:template match="xhtml:div[@class='iDev']">
   <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
     <div id="ta8" class="bl" style="dis:bl">XYZ</div>
<br/>
   <input type="radio" name="ke8" value="0" />
<div id="tab8" class="bl" style="dis:bl">T</div>
   <input type="radio" name="ke8" value="1" />
<div id="tab8" class="bl" style="dis:bl">F</div>
</xsl:template>

</xsl:stylesheet> 
```

我得到的输出——

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-type" content="text/html;  charset=utf-8"/>
<script type="t/j" src="abc.js" xml:space="preserve"/>
</head>
<script type="t/j" src="pqr.js"/>
<script type="t/j" src="stu.js"/>
<body onload="loadPage()" onunload="unloadPage()">
<div id="o">
<div id="m">
<div id="nD">
<p id="nT">
Part 1</p>
</div>
<!--VALUE OF CLASS HAS CHANGED BUT NOT ID-->
<div class="QT" id="123">
<script type="t/j" src="lmn.js" xml:space="preserve"/>
<form name="form">
<div class="iD">
<img alt="" src="ic.gif"/>
<span class="iDe">ABC</span>
<br clear="none"/>
<!--DIV TAG WITH CLASS=IDEV IS MISSING-->
<div class="pa" value="10">
<div class="q">
<!--BR HAVE APPEARED WITH ATTRIBUTE CLEAR-->
<br clear="none"/>
<br clear="none"/>
<!--INPUT TAGS HAVE APPEARED TWICE-->
<br clear="none"/>T <input type="radio" name="op12" id="t12" onclick="getFeedback()"/> 
F <input type="radio" name="op12" id="f12" onclick="getFeedback()"/>
<div>C </div>
<div>In </div>
<div>
<div/>
</div>
</div>
</div>
<div id="ta8" class="bl" style="dis:bl">XYZ</div>
<br/>
<input type="radio" name="ke8" value="0"/>
<div id="tab8" class="bl" style="dis:bl">T</div>
<input type="radio" name="ke8" value="1"/>
<div id="tab8" class="bl" style="dis:bl">F</div>
</div>
<br/>
<input type="submit" name="sub" value="Done"/>
</form>
</div>
</div>
</div>
</body>
</html> 
```

感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:00:19.577

在 90% 的 XSLT 问题中，最大的挑战不是问题的技术方面，而是如何以匹配模式和相应输出的形式表达转换规则。我不会给你一个样式表，而是给你一个问题的模式和输出视图。您应该能够从中制作样式表。不涉及特殊技术。

比较您的输入和输出文档，我将描述转换规则如下。

1.  将输入文档复制到输出，但以下情况除外。
2.  在 <body> 之前加上以下文字

    ```
    <script type="t/j" src="pqr.js" />
    <script type="t/j" src="pqr.js" /> 
    ```

3.  附加到 <body> 元素属性 @onload="load()" 和 @onunload="unload()"。

4.  对于任何具有@id=123 的<div> 元素，将@class 更改为QT，将id 更改为456。
5.  对于任何 <script> 元素，将 @src="xyz.js" 更改为 "lmn.js"。
6.  **对于正文**中带有@src="abc.js"的任何 <script> 元素，删除。
7.  将任何具有 @class="iD" 的 <div> 元素包装在 <form> 中并且在表单关闭之前，包括以下文字

    ```
    <br/><input type="submit" name="sub" value="Done"/> 
    ```

8.  用 @id="ta12" 替换任何 <div> 元素：

    ```
    <div id="pa" value="10" /> 
    ```

9.  复制任何 <div class="iDev">，但将其子项替换为以下文字

    ```
    <div id="ta8" class="bl" style="dis:bl">XYZ</div>
    <br/>
    <input type="radio" name="ke8" value="0" />
    <div id="tab8" class="bl" style="dis:bl">T</div>
    <input type="radio" name="ke8" value="1" />
    <div id="tab8" class="bl" style="dis:bl">F</div> 
    ```

## 更新

OP 要求提供第 5 点的模板。所以就在这里。这是关于如何复制节点的通用解决方案，只需更改一个属性...

```
<xsl:template match="xhtml:script[@src='xyz.js']">
 <xsl:copy>
  <xsl:apply-templates select="@*[not(@src)]" />
  <xsl:attribute name="src">lmn.js</xsl:attribute>
  <xsl:apply-templates select="node()" />
 </xsl:copy>
</xsl:template> 
```

如果您不介意使用不太通用的解决方案并且可以假设脚本元素没有子元素并且只有一个其他属性 @type="t/j" ，例如，您可以使用更简洁和特定的模板像这样（但我不推荐它 - 我只是在列出你的选择......

```
<xsl:template match="xhtml:script[@src='xyz.js']">
 <xhtml:script type="t/j" src="lmn.js" />
</xsl:template> 
```

对于第 6 点，它是...

```
<xsl:template match="xhtml:body//xhtml:script[@src='abc.js']" /> 
```

# android - Android 分组文本视图

> ID：11606597
> 
> 赞同：0
> 
> 时间：2012-07-23T04:43:51.157
> 
> 标签：android, android-edittext

我的 Android 应用程序有一个用户必须填写的表单。我一直在寻找这样的东西。这个[http://img688.imageshack.us/img688/4162/photocr.jpg](http://img688.imageshack.us/img688/4162/photocr.jpg)。我的意思是编辑文本看起来像这样整洁。关于我们如何在 Android 中复制它的任何建议。我在 Android 中看到过几个具有这样 UI 的应用程序。任何建议都将受到欢迎。

亲切的问候，

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/round_linearlayout"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/first_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/first_name_hint_text"
        android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/last_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/last_name_hint_text"
        android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/email_address"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/email_address_hint_text"
        android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/password"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/password_hint_text"
       android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/already_have_an_account"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="@android:color/transparent"
        android:padding="20dp"
        android:text="@string/already_have_an_account"
        android:textColor="@color/hyperlink" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:59:06.580

编辑了您想要的答案。

```
public class EditTextView extends LinearLayout{

    private LayoutInflater inflater;
    private EditText edit_text;
    private TextView item;
    private View spacer;

    public EditTextView(Context context) {
        super(context);
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        initialize();
    }

    public void setLabel(String label){
        item.setText(label);
    }

    public void setText(String text){
        item.setText(text);
    }

    public String getText(){
        if((edit_text != null)&& (edit_text.getText() != null)){
            return edit_text.getText().toString();          
        }
        return "";
    }

    public void showSpacer(){
        spacer.setVisibility(View.VISIBLE);
    }

    private void initialize() {
         inflater.inflate(R.layout.edit_text_view, this);
         edit_text = (EditText) findViewById(R.id.edit_text);
         item = (TextView) findViewById(R.id.edit_text_label);
         spacer = (View) findViewById(R.id.spacer);
         spacer.setVisibility(View.GONE);
    }

} 
```

用于获取文本如下

```
EditTextView textView = (EditTextView) groupedView2.getFieldViewAt(0);
System.out.println(textView.getText());
textView = (EditTextView) groupedView2.getFieldViewAt(1);
System.out.println(textView.getText()); 
```

这对我很有效。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T10:12:47.707

您想用 android 实现的目标很容易。您只需要为您的编辑文本使用形状可绘制对象。

以下是如何实现这一目标：

**形状可**
绘制用于上部编辑文本

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid 
        android:color="#ffffff"/>
    <corners
        android:topLeftRadius="15dp"
        android:bottomLeftRadius="0dp"
        android:topRightRadius="15dp"
        android:bottomRightRadius="0dp"/>

</shape> 
```

可用于较低的编辑文本

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid 
        android:color="#ffffff"/>
    <corners
        android:topLeftRadius="0dp"
        android:bottomLeftRadius="15dp"
        android:topRightRadius="0dp"
        android:bottomRightRadius="15dp"/>

</shape> 
```

布局的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#3434ff"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="50dp" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:background="@drawable/stack"
        android:layout_marginBottom="50dp" />

    <EditText
        android:id="@+id/emailEdt"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:background="@drawable/edit_back1"
        android:hint="Email"
        android:paddingLeft="10dp" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#5a5a5a" />

    <EditText
        android:id="@+id/passwordEdt"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:background="@drawable/edit_back2"
        android:hint="Password"
        android:paddingLeft="10dp" />

</LinearLayout> 
```

生成的布局将如下所示：
![在此处输入图像描述](../Images/f2be2153074b6fe099d21c30f71da555.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T04:58:07.363

你可以有一个线性布局，应用`border.xml`作为该线性布局的可绘制背景：

**边框.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <stroke
        android:width="1dp"
        android:color="@color/grey"/>
<!-- "#5D2E8C"  -->
    <solid android:color="#ffffff" />       <!-- background to the border -->
    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="2dp" />
    <corners android:radius="20dp" />

</shape> 
```

1.  在其中输入用户名的 EditText 视图

2.  宽度为 fill_parent 和 height=1dp 且背景颜色为黑色的 TextView（这会给您带来线条般的感觉）

3.  密码的 EditText 视图。

**//==========================编辑====================== ============//**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:orientation="vertical" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/border"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/first_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/first_name_hint_text"
        android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />
    <View 
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#000000"
        />

    <EditText
        android:id="@+id/last_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/last_name_hint_text"
        android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />
<View 
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#000000"
        />
<EditText
        android:id="@+id/email_address"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/email_address_hint_text"
        android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />
<View 
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#000000"
        />
    <EditText
        android:id="@+id/password"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/password_hint_text"
       android:singleLine="true"
        android:textColor="#778BB0"
        android:textColorHint="#778BB0"
        android:textSize="13sp"
        android:textStyle="bold" />
<View 
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#000000"
        />
    <Button
        android:id="@+id/already_have_an_account"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="@android:color/transparent"
        android:padding="20dp"
        android:text="@string/already_have_an_account"
        android:textColor="@color/red1" />
</LinearLayout>
</LinearLayout> 
```

# javascript - jquery选项卡，第一个选项卡上的onload事件

> ID：11606600
> 
> 赞同：0
> 
> 时间：2012-07-23T04:44:30.903
> 
> 标签：javascript, jquery

我正在使用 JQuery 选项卡插件和 ajax json mvc 来检索这些选项卡中的数据。onclick 事件一切正常，但我需要在页面加载后立即在第一个选项卡中加载内容。这是代码

```
<script>
$(function () {
        $("#tabs").tabs();
        // how to add onload event for Tab One GetTabData(id); 

        $(".tabLink").click(function (event) {
            var id = $(this).parent().text();    
            GetTabData(id); 
        });
    });
</script>
<div class="demo">
    <div id="tabs">
        <ul>
            <li><a href="#tab-1" tabId="1" class="tabLink">Tab One</a></li>
            <li><a href="#tab-2" tabId="2" class="tabLink">Tab Two</a></li>
            <li><a href="#tab-3" tabId="3" class="tabLink">Tab three</a></li>
            <li><a href="#tab-4" tabId="4" class="tabLink">Tab four</a></li>
        </ul>
        <div id="tab-1">                
        </div>
        <div id="tab-2">                
        </div>
        <div id="tab-3">                
        </div>
        <div id="tab-4">                
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:46:40.563

您可以以编程方式单击第一个：

```
$(".tabLink").click(function (event) {
  var id = $(this).parent().text();    
  GetTabData(id); 
}).eq(0).click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:47:27.270

> 我需要在***页面加载后立即在第一个选项卡中加载内容***

然后加载第一个选项卡的内容`$(document).ready()`

```
$(function(){

    ...your code...

    //execute first
    GetTabData(1); 
}); 
```

# asp.net - 树视图控件中的子节点在检查父节点时自动检查

> ID：11606603
> 
> 赞同：0
> 
> 时间：2012-07-23T04:44:47.250
> 
> 标签：asp.net

我正在使用 TreeView 控件。使用复选框绑定数据库中的值。

父节点有近三个子节点，例如

```
Parent1 
  child1
    child2
      child3
Parent2
   child1
     child2
        child3 
```

我可以绑定来自 3 个表的数据，它们都运行良好。我想要一个设施，当父节点检查其所有相应的子节点时会自动检查。如果我单击父节点 1，则子节点 123 会被检查。如果我检查 child1，child2 和 child3 会被检查。如果我检查孩子 2，所有孩子 3 项目都会被检查。怎么做？

在此先感谢 Amrutha

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:50:20.787

如果选中了父节点，则可以使用下面的 javascript 函数检查所有子节点，如果选中了至少一个子节点，则检查父节点，否则未选中：

```
 function OnTreeClick(evt) {
     var src = window.event != window.undefined ? window.event.srcElement : evt.target;
     var isChkBoxClick = (src.tagName.toLowerCase() == "input" && src.type == "checkbox");
     var t = GetParentByTagName("table", src);
     if (isChkBoxClick) {
         var parentTable = GetParentByTagName("table", src);
         var nxtSibling = parentTable.nextSibling;
         if (nxtSibling && nxtSibling.nodeType == 1) {
             if (nxtSibling.tagName.toLowerCase() == "div") {
                 CheckUncheckChildren(parentTable.nextSibling, src.checked);
             }
         }
         CheckUncheckParents(src, src.checked);
     }
 }

 function CheckUncheckChildren(childContainer, check) {
     var childChkBoxes = childContainer.getElementsByTagName("input");
     var childChkBoxCount = childChkBoxes.length;
     for (var i = 0; i < childChkBoxCount; i++) {
         childChkBoxes[i].checked = check;
     }
 }

 function CheckUncheckParents(srcChild, check) {
     var parentDiv = GetParentByTagName("div", srcChild);
     var parentNodeTable = parentDiv.previousSibling;

     if (parentNodeTable) {
         var checkUncheckSwitch;
         var isAllSiblingsChecked = AreAllSiblingsChecked(srcChild);
         if (isAllSiblingsChecked) {
             checkUncheckSwitch = true;
         }
         else {
             checkUncheckSwitch = false;
         }
         var inpElemsInParentTable = parentNodeTable.getElementsByTagName("input");
         if (inpElemsInParentTable.length > 0) {
             var parentNodeChkBox = inpElemsInParentTable[0];
             parentNodeChkBox.checked = checkUncheckSwitch;

             CheckUncheckParents(parentNodeChkBox, checkUncheckSwitch);
         }
     }
 }

 function AreAllSiblingsChecked(chkBox) {
     var parentDiv = GetParentByTagName("div", chkBox);
     var childCount = parentDiv.childNodes.length;
     var k = 0;
     for (var i = 0; i < childCount; i++) {
         if (parentDiv.childNodes[i].nodeType == 1) {
             if (parentDiv.childNodes[i].tagName.toLowerCase() == "table") {
                 var prevChkBox = parentDiv.childNodes[i].getElementsByTagName("input")[0];
                 //if any of sibling nodes are not checked, return false
                 if (prevChkBox.checked) {
                     //add each selected node one value
                     k = k + 1;
                 }
             }
         }
     }

     //Finally check any one of child node is select if selected yes then return ture parent node check

     if (k > 0) {
         return true;
     }
     else {
         return false;
     }
 }
 function GetParentByTagName(parentTagName, childElementObj) {
     var parent = childElementObj.parentNode;
     while (parent.tagName.toLowerCase() != parentTagName.toLowerCase()) {
         parent = parent.parentNode;
     }
     return parent;
 } 
```

我用这个javascript来解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:05:41.433

一个简单的递归函数可以做到这一点。

```
private bool checkTreeNodes(TreeNodeCollection nodes, bool parentChecked)
{
    var isChecked = parentChecked;
    foreach (TreeNode node in nodes)
    {
        if (node.Checked || parentChecked)
        {
            checkTreeNodes(node.Nodes, true);
            node.Checked = true;
            isChecked = true;
        }
        else
        {
            node.Checked = checkTreeNodes(node.Nodes, false);
            isChecked = isChecked || node.Checked;
        }
    }
    return isChecked;
} 
```

像这样使用它：

```
checkTreeNodes(myTree.Nodes, false); 
```

# c++ - 带有 GLUT 的 OpenGL。不会画画？

> ID：11606609
> 
> 赞同：0
> 
> 时间：2012-07-23T04:45:47.943
> 
> 标签：c++, opengl, glut, freeglut

```
#include <GL/gl.h>
#include <GL/glut.h>

void display();
void init();

int main(int argc, char* argv[])
{
    init();

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(320, 240);
    glutCreateWindow("Main Window");
    glutDisplayFunc(display);
    glutMainLoop();

    return 0;
}

void init()
{
    glDisable(GL_DEPTH_TEST);
}

void display()
{
    glClearColor(0, 0, 0, 0);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    glLoadIdentity();

    glBegin(GL_QUADS);
    glColor3i(255,255,255);
        glVertex2f(10, 10);
        glVertex2f(100, 10);
        glVertex2f(100, 100);
        glVertex2f(10, 100);
    glEnd();

    glutSwapBuffers();
} 
```

理论上，这段代码应该绘制一个白色矩形。但我看到的只是一个黑色的空屏幕。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:31:57.003

这是我的工作示例，其中包含评论中指出的更改：

```
#include <gl/glut.h>
#include <gl/gl.h>

#define WINDOW_WIDTH 320
#define WINDOW_HEIGHT 240

void display();
void init();

int main(int argc, char* argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    glutCreateWindow("Main Window");
    init(); // changed the init function to come directly before display function
    glutDisplayFunc(display);
    glutMainLoop();

    return 0;
}

void init()
{
    glClearColor(0, 0, 0, 0); // moved this line to be in the init function
    glDisable(GL_DEPTH_TEST);

    // next four lines are new
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, WINDOW_WIDTH-1, WINDOW_HEIGHT-1, 0, -1.0, 1.0);
    glMatrixMode(GL_MODELVIEW);
}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    glBegin(GL_QUADS);
    glColor3ub(255,255,255); // changed glColor3i to glColor3ub (see below)
        glVertex2f(10, 10);
        glVertex2f(100, 10);
        glVertex2f(100, 100);
        glVertex2f(10, 100);
    glEnd();

    glFlush(); // added this line 
    //glutSwapBuffers(); // removed this line
} 
```

`glColor3ub`如果要提供 0-255 范围内的颜色，是要使用的函数。

希望这可以帮助。

# java - 具有字符串属性的 WEKA 决策树

> ID：11606610
> 
> 赞同：0
> 
> 时间：2012-07-23T04:45:50.027
> 
> 标签：java, machine-learning, weka, decision-tree

我有 20 个属性集，其中很少是字符串，例如美国各州的代码、订阅计划的名称等。我们如何处理 WEKA 中的字符串属性以构建决策树？

我阅读了有关 stringtowordvector 转换器的信息，但每个属性的字符串本身只是一个单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:17:43.663

您可能已经明白了——您必须将此类“字符串属性”（实际的字符串属性在 WEKA 中是其他内容）声明为名义属性，即，您必须在大括号中声明它们可以在 ARFF 标头中具有的所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:26:24.710

只需在您的 ARFF 文件中声明此模式之后的属性：

```
@attribute <att_name> string 
```

请注意，因为`Strings`它们内部存储在字符串表中，并由它们在该表中的地址表示。因此，包含相同字符的两个字符串将具有相同的值。

资料来源（书籍）：数据挖掘：实用机器学习工具和技术第 3 版

# android - 如何在由 json 对象生成的列表视图上添加添加为朋友按钮

> ID：11606613
> 
> 赞同：0
> 
> 时间：2012-07-23T04:46:24.803
> 
> 标签：android, listview

嗨，我有一个从 json 对象派生并放入列表视图的人员列表，如下所示。我想在名称前添加一个添加按钮，而不是进行选择并将其移至新活动。

我怎样才能做到这一点？

以下是我如何将我的数据生成到列表视图中。我可以从定义行的 xml 添加一个按钮。但是如何放置或者更确切地说如何编写button.onclick？

```
ArrayList<HashMap<String, String>> friendslist = new ArrayList<HashMap<String, String>>();
            JSONArray jArray = new JSONArray(result);
            if (jArray != null) {
                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    HashMap<String, String> map = new HashMap<String, String>();

                    a = json_data.getString("user_id");

                    map.put(TAG_Name, json_data.getString("fname"));
                    map.put(TAG_LName, json_data.getString("lname"));
                    friendslist.add(map);
                }
            }
            list = (ListView) findViewById(R.id.addfrndslist);

            ListAdapter adapter = new SimpleAdapter(this, friendslist,
                    R.layout.add_yourfriendswith, new String[] { TAG_Name,
                            TAG_LName}, new int[] { R.id.afname,
                            R.id.alname});
            list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:44:24.313

对于您的列表视图，您使用的是 android 提供的 SimpleAdapter，但这仅在您必须显示名称列表时才有效。如果您希望根据需要自定义列表，例如在每一行上添加按钮或图像等，那么您将必须制作自己的适配器。
以下是执行此操作的步骤：

1.  通过扩展 BaseAdapter 或 ArrayAdapter 编写您的自定义适配器
2.  覆盖它的方法。

> 注意：如果您将任何可点击项目添加到列表视图行，则该项目将是可点击的，但列表将不可点击。因此列表 onItemClickListener 将不起作用。现在在这种情况下，要获得单击项目的位置，您必须采取一些解决方法。我在行项目上使用 setTag() 并使用 getTag() 方法来获取标记，这将是它在组中的位置。

这是一个示例代码：
**行项目的 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:padding="10dp" >
    <TextView 
        android:id="@+id/nameTxt"
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight="3"
        />
    <Button 
        android:id="@+id/addBtn"
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_weight="1"
        android:text="Add"
            android:onClick="addFriend"
        />  
</LinearLayout> 
```

**自定义适配器的代码**

```
public class MyListAdapter extends BaseAdapter
{
    String names[];
    LayoutInflater mInflater;

    public MyListAdapter(String _names[],Context context) {
        names = _names;
        mInfalter = LayoutInflater.from(context);
    }

    @Override
    public int getCount ( )
    {
        return names.length;
    }

    @Override
    public Object getItem (int position)
    {
        return names[position];
    }

    @Override
    public long getItemId (int position)
    {
        return position;
    }

    @Override
    public View getView (int position, View convertView, ViewGroup parent)
    {
        ViewHolder holder;
        if(convertView == null) {
            holder = new ViewHolder();
            convertView = mInfalter.inflate(R.layout.list_item, null);
            holder.name = (ImageView)convertView.findViewById(R.id.name);
            holder.addBrn = (TextView)convertView.findViewById(R.id.addBtn);
            convertView.setTag(holder);
        }else{
            holder = (ViewHolder)convertView.getTag();
        }

        holder.templeName.setText(names[position]);
        holder.addBtn.setTag(Integer.toString(position));

        return convertView;
    }

    static class ViewHolder {
        TextView name;
        Button addBtn;
    }

} 
```

这是单击添加按钮时调用的方法

```
public void addFriend(View v) {
    int position = Integer.parseInt(v.getTag().toString());
    //now you have the position of the button that you can use for your purpose
} 
```

这是设置适配器的代码

```
//String array of names
 String[] names;

 MyListAdapter mAdapter = new MyListAdapter(names,yourActivity.this);
 list.setAdapter(mAdapter); 
```

> 我希望这个能帮上忙 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:58:14.847

您必须创建自定义列表适配器才能将 Button 添加到列表行。

把这个写在

```
final ListView itemlist = (ListView) findViewById(R.id.itemlist);

itemlist.setAdapter(new PodcastListAdapter(this)); 
```

然后创建自定义 BaseAdapter 类

```
class ViewHolder {
TextView txtTitle;
TextView txtDescription;
Button btnDownload;
}

public class PodcastListAdapter extends BaseAdapter {

private LayoutInflater mInflater;
private Context context;

public PodcastListAdapter(Context cont) {
    mInflater = LayoutInflater.from(cont);
    context = cont;
}

public int getCount() {
    return Utilities.arrayRSS.size();
}

public Object getItem(int position) {
    return Utilities.arrayRSS.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.custom_list, null);
        holder = new ViewHolder();
        holder.txtTitle = (TextView) convertView.findViewById(R.id.title);
        holder.txtDescription = (TextView) convertView
                .findViewById(R.id.description);
        holder.btnDownload = (Button) convertView
                .findViewById(R.id.btnDownload);

        holder.btnDownload.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                new DownloadingProgressTask(position, holder).execute();
                holder.btnDownload
                        .setBackgroundResource(R.drawable.downloading);
            }
        });
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtTitle.setText(Utilities.arrayRSS.get(position).getTitle());
    holder.txtDescription.setText(Utilities.arrayRSS.get(position)
            .getDescription());

    return convertView;
} 
```

# facebook - Fconnect 按钮未生成

> ID：11606615
> 
> 赞同：1
> 
> 时间：2012-07-23T04:46:58.963
> 
> 标签：facebook, facebook-graph-api

我正在使用以下代码在我的 Web 应用程序中生成 Fconnect 按钮以集成 Fb 登录。以前这段代码运行良好。但现在它没有显示我网页中的 fconnect 按钮。

这段代码有什么问题。或者 facebook Api 有什么变化吗？

```
<script type="text/javascript" src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" ></script>
<div id="fb-root"></div>
<script type="text/javascript" language="javascript">
    FB_RequireFeatures(["XFBML"], function () {
        FB.init(MY_App_ID, Domain_Path + "xd_receiver.htm");
    });
</script>

<fb:login-button length='short' size='medium' onlogin="facebook_onlogin_ready()" ></fb:login-button> 
```

# javascript - 在 HTML/JS/CSS 中创建时间线图

> ID：11606618
> 
> 赞同：9
> 
> 时间：2012-07-23T04:47:26.003
> 
> 标签：javascript, html

我需要你们所有人的帮助或概念。我想使用 Web 技术创建一个时间线图，以在 Web 浏览器上显示具有开始和结束日期的任务。什么技术或概念在浏览器上创建时间线图表会有帮助？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T05:04:08.560

**使用预先存在的工具：**

您可以使用许多现有的日历插件构建日历，例如用于 jQuery 的[FullCalendar](http://arshaw.com/fullcalendar/)或任何[其他插件](http://www.queness.com/post/656/10-beautiful-jquery-and-mootool-calendar-plugins)。

时间轴滑块也存在于 jQuery 中，例如[Timeline JS](http://timeline.verite.co/)、[jQuery Timelinr](http://www.csslab.cl/2011/08/18/jquery-timelinr/)、[Timeglider](http://timeglider.com/jquery/)或[Tiki-Toki](http://www.tiki-toki.com/)，我认为最后一个听起来更适合您的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:27:23.480

你可以试试[http://functionn.blogspot.com/2012/03/timeline-javascript-library-for.html](http://functionn.blogspot.com/2012/03/timeline-javascript-library-for.html)

或以下任何一项：

[http://functionn.blogspot.com/search/label/timelines](http://functionn.blogspot.com/search/label/timelines)

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-23T16:06:42.050

如果您想要一种以几行 HTML 显示时间线数据的超级简单、非交互式的方式，您可以使用 Google Charts API 来实现。这是一个独立的示例：[https ://gist.github.com/KorkyPlunger/16c540f7b622b8906c1351e44bf1bf3c](https://gist.github.com/KorkyPlunger/16c540f7b622b8906c1351e44bf1bf3c)

# c# - rs232 上可用于检测电压作为输入的任何引脚

> ID：11606620
> 
> 赞同：0
> 
> 时间：2012-07-23T04:47:26.383
> 
> 标签：c#, serial-port

有没有办法使用 rs232 获得电压输入？我现在正在做的是我有 2 台电脑连接到 rs232 以使用 gnd、tx 和 rx 引脚进行通信。我还将 DTR 连接到开关，当按下开关时，我能够获得电压输出来驱动 LED。我现在想做的是，当 LED 亮起时，我会以某种方式获得输入并更改 m 编程中的一些内容。有可能这样做吗？提前致谢。

PS我在做C#编程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:52:45.090

不是直接的。您的端口 RS323 使用始终为 5 伏的数字信号进行通信。在电压源和 RS232 端口之间需要一个模数转换器 (ADC)。看看 sparkfun.com 有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:54:15.713

是的，有几个输入。首先，哪些是输入取决于 RS232 是 DCE 还是 DTE。最初，该标准被放在一起用于将终端连接到调制解调器。DCE 是模型，DTE 是终端。您将引脚 1 连接到 1。因此 Tx 可以是接收器或发送器。

PC 通常是 DTE。考虑到这一点，这个信息现在可能更有意义：[http ://en.wikipedia.org/wiki/RS-232](http://en.wikipedia.org/wiki/RS-232)

电压为标称 +- 7V。实际典型范围为 +-3V 至 +-15V。负电压警告为逻辑 1。

至于 C#，您可以访问所有引脚。查看类 SerialPort。

祝你好运

抢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T21:59:50.257

对的，这是可能的。我做的。

只需将电源的 -（减号，接地）连接到 RS232 RX 引脚（请参阅 Internet 中的任何位置以确定 RX 引脚的位置）。当您向该引脚提供电压（作为脉冲）时，您会在端口中看到一些无意义的操作。有一个 OnComm 事件显示为“接收”，但它没有开始位，没有停止位，完全没有意义。但是任何监视 RS232（COM 端口）的程序都会显示端口上发生了某些事情（例如 HEX 中的“00”或 ascii 中的“[00]”）。

正如我所说的它没有开始和停止位，它的电压不是RS232通信所需的平均电压，所以你必须用这样的子程序检测它（你不能用其他方式处理它）：

创建一个 1ms 的计时器。

timer1.enabled = false ----如果 mscomm1.inbuffercount > 0 则别忘了禁用它 -----把你的代码放在这里 -----这意味着电压已经出现在 RX -----例如你可以编码'buttonpresscount=buttonpresscount+1' end if waitfortheactionend: if mscomm1.inbuffercount >0 then ----还有一些无意义的电压----等到脉冲结束，所以如果-- --不要忘记再次启用定时器 timer1.enabled = true

我希望这会有所帮助。赛达特 K.

# modelica - 初学者：在我的项目中依赖 modelica 是否安全？

> ID：11606627
> 
> 赞同：2
> 
> 时间：2012-07-23T04:48:32.607
> 
> 标签：modelica

假设我根据 Modelica 语法正确地建模了一个完整的系统，编译器是否“成熟”足以处理它？

我需要建模一个至少有 15 个连通分量的系统，每个分量都比较简单，从数学上讲，只有代数方程。Modelica 对我很有吸引力，但我是一个完整的初学者，这个项目对我很重要，所以我有点害怕承诺 Modelica。

我知道编译器无法完全模拟所有标准库示例和模型，我怎么知道确切的限制是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:36:02.047

好吧，这在很大程度上取决于您选择的工具。我可以根据个人经验告诉您，10 多年前，我在福特汽车公司的一个项目中使用了 Dymola，我们在该项目中对发动机（燃烧）、变速箱（机械和液压系统）和底盘（多体表示）进行了建模。最终的系统有 250,000 个方程，当然还有数百个甚至数千个组件和连接。[您可以在我写的一篇论文](http://bit.ly/ModelicaVehicle)中找到有关该项目的更多信息。

当然，这取决于模型大小以外的其他因素。大多数 Modelica 工具并不真正支持可变结构（具有可变索引的 DAE），而其他工具在它们完全支持的某些语言结构方面存在限制（因此意味着某些库不完全支持）。

不幸的是，目前还没有一种全面的方法来确定来自不同工具的支持，但 Modelica 协会认为这是一个问题，他们正在努力解决这个问题。

但总体而言，Modelica 已经相当成熟，被用于很多很多工业项目中。[您可以在http://www.modelica.org/](http://www.modelica.org/)找到前 8 届 Modelica 会议的会议记录，并且您会看到许多知名公司（福特、宝马、通用、丰田、空中客车等）在那里发表了材料。

# cordova - Sencha Touch 2\. 够滑吗？

> ID：11606628
> 
> 赞同：1
> 
> 时间：2012-07-23T04:48:32.493
> 
> 标签：cordova, sencha-touch, mobile-website

如果我真的去本地化，交叉兼容性将是一个问题。

但我真正想知道的是 Sencha Touch 中的 Smoothness 与 Phone gap 和其他类似框架相比如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T00:50:16.587

首先：[Phone Gap是用](http://phonegap.com/)[Jquery Mobile](http://jquerymobile.com/)或[Sencha Touch](http://www.sencha.com/)等移动框架编写的应用程序的原生包装器。这就是为什么你不能比较它们——它们有不同的功能。其次，市面上有[很多不同的框架](http://www.markus-falk.com/mobile-frameworks-comparison-chart/)，但大多数人使用 JqueryMobile 或 Sencha Touch。[在此处](http://miamicoder.com/2011/sencha-touch-or-jquery-mobile-read-this-before-you-make-a-decision/)或[此处](http://jquerybyexample.blogspot.com/2012/02/jqtouch-vs-sencha-touch-vs-jquery.html)查看比较。

但是用我的主观回答来回答你的主观问题：

如果您正在计划一个“演示”应用程序，它具有一些“简单”的页面转换，如淡入淡出或滑动或 Jquery 隐藏和显示内容，您可以使用这两个框架中的任何一个。它们将是“平滑的”。只看[一些例子](http://www.sencha.com/apps/category/games)。

如果您正在计划一个“交互”应用程序，它有很多“图形计算”，如跳跃和跑步游戏、“图像处理”或任何“复杂”，分别是“快速进程”的触摸事件，而不是坚持原生。您的移动 Web 应用程序不会“流畅”。即使像 Chess 或 Soduko 这样的“轻量级游戏”对这些框架中的任何一个都没有问题。

希望有帮助。如果我遇到你的情况，我会怎么做：找出你的应用程序的技术瓶颈。采用性能关键功能并在 Sencha 中组合一个原型以获得一个想法。检查您的原型是否足够“流畅”。不要忘记检查更多低端设备，因为它们的处理能力较低！

# python - 将烧瓶部署到 GAE 时出错

> ID：11606629
> 
> 赞同：0
> 
> 时间：2012-07-23T04:48:33.280
> 
> 标签：python, google-app-engine, flask

我是烧瓶和 GAE 的新手。我正在尝试将一个简单的烧瓶应用程序部署到 GAE。我使用[https://github.com/kamalgill/flask-appengine-template/](https://github.com/kamalgill/flask-appengine-template/)作为部署模板。

当我跑

> dev_appserver.py src/

我收到以下错误 -

```
Debugged import:

- 'application' found in '/home/murtaza/workspace/flask/sim-sim/src/application/__init__.py'.
- 'application.settings' not found. 
```

以下是 application.settings 文件中的代码 -

```
"""
Initialize Flask app

"""

from flask import Flask

app = Flask('application')
app.config.from_object('application.settings')

import urls 
```

application.settings 的用途是什么，它是 GAE 或烧瓶配置文件，还是上述模板的自定义文件，可以忽略？

在 GAE 上部署烧瓶的任何其他模板/方法？或者 GAE 上的示例烧瓶项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:55:27.317

这是一个烧瓶配置。看看这里： http: [//flask.pocoo.org/docs/config/#configuring-from-files](http://flask.pocoo.org/docs/config/#configuring-from-files)

我还没有尝试过，但它看起来是一个不错的开始：[https ://github.com/kamalgill/flask-appengine-template/](https://github.com/kamalgill/flask-appengine-template/)

如果你用谷歌搜索的话，还有一堆其他的样板模板。

# regex - 如何为 htaccess 正则表达式定义 url 占位符 $1

> ID：11606634
> 
> 赞同：3
> 
> 时间：2012-07-23T04:49:24.707
> 
> 标签：regex, apache, .htaccess, mod-rewrite, url-mapping

我在学习的过程中写了以下内容`htaccess`：

```
RewriteRule ^/test(a-zA-z)\.htm$ /test$1.htm 
```

并且`test2.htm`仍然被映射到`test1.htm`

我假设`$1`没有被正确地视为变量占位符，因为`$`没有转义。写这个的正确方法是什么（为了测试目的，test2.htm 被映射到自身，`test2.thm`）

最终，我试图映射类似的东西：

`domain.com/$1/$2` 至 `domain.com/?a=$1&b=$2`

或者

`domain.com/$1` 至 `domain.com/?a=$1`

当第一个 url 映射到第二个时，我不希望浏览器的 URL 发生变化。我知道这在`C#` `Global.asax`文件中是可能的（使用`routes.MapRoute`），但不确定如何在`php`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:27:04.813

从最复杂的到不太复杂的淘汰，继续进行。

*   处理前 2 个参数，然后`QSA`是指令（重要）以保留所有`GET`变量，然后`L`是指令以停止所有变量，
*   然后处理第一个参数，然后处理`QSA`指令（重要）以保留所有`GET`变量，然后`L`指令停止所有变量，

那应该工作：

```
RewriteRule ^/([a-zA-z0-9]+)/([a-zA-z0-9]+)$ /?a=$1&b=$2 [QSA,L]
RewriteRule ^/([a-zA-z0-9]+)$ /?a=$1 [QSA,L] 
```

* * *

哦顺便说一句：

*   [这是serverfault.com](https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as)的 wiki
*   howto的[htaccess 官方指南](http://httpd.apache.org/docs/2.2/howto/htaccess.html)
*   [官方 mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)指南

如果这还不够：

## 两个提示：

如果您**不在**托管环境中（= 如果它是*您自己的服务器*并且*您**可以**修改虚拟主机*，而不仅仅是`.htaccess`文件），请尝试使用该`RewriteLog`指令：它可以帮助您追踪此类问题：

```
# Trace:
# (!) file gets big quickly, remove in prod environments:
RewriteLog "/web/logs/mywebsite.rewrite.log"
RewriteLogLevel 9
RewriteEngine On 
```

* * *

我最喜欢的检查正则表达式的工具：

[http://www.quanetic.com/Regex](http://www.quanetic.com/Regex)（不要忘记选择 ereg(POSIX) 而不是 preg(PCRE)！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:59:21.790

对我来说，这是我发现的最简单的文章，它真正帮助我弄清楚我需要什么并最终工作，所以我将在这里分享它并尝试使用对我有意义的术语。

[http://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

```
RewriteRule ^page/([^/\.]+)/?$ index.php?page=$1 [L] 
```

右侧 ( `index.php?page=$1`) 是对浏览器隐藏的目的地。

左边是映射规则。

从左边解析的变量 -`$1`不必在字符串的末尾，可以在中间的任何地方，例如，`/CHECK/?VAR=$1MORETEXT`或者如果有更多的变量要从左边解析，它可以是“ `/CHECK/?VAR=$1MORETEXT$2`”。

“ `/?`”是可选的，如果希望目标URL`/`末尾没有“”，请不要包含它，只需以`$`like结尾`^page/([^/\.]+)$`

这`[L]`很有用，因为一旦找到匹配的规则，它就会阻止 htaccess 浪费时间继续阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T04:59:30.193

当你想写一个范围之类的东西时，你应该使用`[]`. 例如：

```
RewriteRule ^/test([a-zA-z0-9]+)\.htm$ /index.php?data=$1  [L] 
```

# iphone - 如何在iphone sdk中将©文件夹移动到Dropbox中的另一个文件夹中

> ID：11606637
> 
> 赞同：0
> 
> 时间：2012-07-23T04:49:29.113
> 
> 标签：iphone, sdk, dropbox-api

我正在使用 iPhone SDK 中的 Dropbox。我可以对文件进行复制、移动加载和所有其他操作，但我的问题是如何使用 Dropbox 将文件夹复制/移动到另一个文件夹中。有没有办法用文件夹处理这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:56:38.680

您可以使用 DBResClient 中的 copyFrom 和 moveFrom 函数来复制和移动文件或文件夹，它们分别映射到 [/filesops/copy][1] 和 [/fileops/move][2] 调用。

[1]：[https ://web.archive.org/web/20130117132813/https://www.dropbox.com/developers/reference/api#fileops-move](https://web.archive.org/web/20130117132813/https://www.dropbox.com/developers/reference/api#fileops-move) [https://www.dropbox.com/developers/reference /api#fileops-copy](https://www.dropbox.com/developers/reference/api#fileops-copy) [2]：[https ://web.archive.org/web/20130117132813/https://www.dropbox.com/developers/reference/api#fileops-move](https://web.archive.org/web/20130117132813/https://www.dropbox.com/developers/reference/api#fileops-move)

# php - 加入对查询的计数

> ID：11606638
> 
> 赞同：0
> 
> 时间：2012-07-23T04:49:40.470
> 
> 标签：php, mysql, sql

我有 2 张桌子：评论和博客

博客有以下字段：id（唯一键）、标题、作者、正文、日期、img、imgdes、标签

评论：key（唯一键），postid（与博客的id有关），姓名，电子邮件，日期，消息

我试图显示我所有的博客文章以及每篇文章的评论数量。

所以我试图“计算（postid）postid = id”

我有一些工作要做，但它的基础是有 1 条评论不起作用，但就是这样：

```
 SELECT a.postid,c.author,c.title, c.id,c.body,c.date,c.pic, c.tags, c.imgdesc,  
 COUNT(*) AS num_comments FROM comments a LEFT JOIN blog c ON c.id = a.postid 
 GROUP BY c.id order by id DESC" 
```

同样，这仅在所有内容都有评论并且我明白原因但我无法弄清楚如何实现我想要的东西时才有效。

把它全部放在那里，我有：

```
 $sql="***( help 1 of 2) what to set the query to****"
 $query = mysql_query($sql) or die(mysql_error());
  <?php do{ ?>
  <html stuff here>
  <?php echo $blog['title']?><br>
  <?php echo $blog['*******(help 2 of 2) # of comments display here******']
  <?php } while($blog = mysql_fetch_assoc($sql));?> 
```

我确定这是一个简单的加入，但我不知道谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:57:06.640

使用这个查询它可能对你有用

```
SELECT a.postid,c.author,c.title, c.id,c.body,c.date,c.pic, c.tags, c.imgdesc, COUNT(a.key) AS num_comments FROM blog c left outer join comments a ON a.postid = c.id GROUP BY c.id order by id DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T04:57:23.383

如果你想要所有的博客文章，那么它应该在左连接的左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T04:56:42.907

我认为问题出在你写的地方：`FROM comments a LEFT JOIN blog c ON c.id = a.postid GROUP BY c.id order by id DESC"`

和似乎不是正确的参考`comments a`。`blog c`

应该是`FROM comments.a LEFT JOIN blog.c ON`……？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T05:10:51.783

您是否要计算每个博客中的评论数？如果是的话， `SELECT c.postid,count(key) as num_of_comments FROM blog b, comments c WHERE b.id = c.postid GROUP BY c.postid`

另一个简单的方法：因为你有 postid 作为外键，你可以从评论表中获取结果 `SELECT postid,count(key) as num_of_comments FROM comments GROUP BY postid`

# php - 在每个数组的末尾需要一个分号

> ID：11606644
> 
> 赞同：-2
> 
> 时间：2012-07-23T04:50:31.040
> 
> 标签：php, arrays

当我将一个数组插入一个新的 php 文件时，我没有在每个数组的末尾得到一个分号。我需要在每个数组的末尾加一个分号。

文件 1

```
 <?php
include_once("../dc/dcCommonLib.php");
include_once("../dc/persistence/UserData.php");
require_once("../../lib/include/connect.inc.php");

$_SESSION["survey"] = "BestBuyAug2012";
$idLink = dbconnect($_SESSION["survey"]);
$surveyWidget = rendererSurveyLoadHandler();
setDataToSession("surveywidget",$surveyWidget);
$userData = &UserData::getInstance();
$userData->setSurvey($surveyWidget);
saveFkidsToOidToFkidMappingArray($userData->OidToFkidMapping);

// prepare demo array
prepareItemArray($userData->OidToFkidMapping["Demographic"]["Q"],$demo,"b");

// prepare item array
prepareItemArray($userData->OidToFkidMapping["Default"]["Q"],$item,"i");
prepareItemArray($userData->OidToFkidMapping["Default"]["M"],$item,"i");

// prepare comment array
prepareCommentArray($userData->OidToFkidMapping["Comment"]["C"],$comment);

if(!function_exists('file_put_contents')) 
{
    function file_put_contents($filename, $data,$type, $file_append = false)
     {
              $fp = fopen($filename, (!$file_append ? 'w+' : 'a+'));
         if(!$fp)
             {
                     trigger_error('file_put_contents cannot write in file.', E_USER_ERROR);
                     return;
             }

                if($type)//code which is concerned with the execution of array
            {

                    $count = count($data);
                    $i = 1;
                    //loop through your type array and append comma and double qoutes , 
                    foreach($data as $key=>$val)
                 {

                    if($i = $count)

                        $data[$key] = '"'.$data[$key].'",';
                        $i++;
                }

             //run same preg_replace as before
             $data2 = preg_replace('/[\[\]]/','"',print_r($data,TRUE));

                //write to file 
             fputs($fp, "$" . $type . " = " . print_r($data2,TRUE));  

             }
                 else 
            {
                    fputs($fp, print_r($data, TRUE));

                 }
                 fclose($fp);
         }

}
print("Strart writting ...................");
file_put_contents("staticSurveyDataFileTest.php", $file,"",true);
file_put_contents("staticSurveyDataFileTest.php", "<?php\n","",true);
file_put_contents("staticSurveyDataFileTest.php", $item,"itemFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $demo,"demoFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $comment,"commentFkids",true);
file_put_contents("staticSurveyDataFileTest.php", "?>","",true);

print("written ...");

function prepareItemArray($userDataArray, &$item, $itemStr) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);
                $respId = key($respGrp[$respGrpId]);
                $item[$questId."_".key($respGrp)]=$itemStr.$respGrp[$respGrpId][$respId];           
            }else {
                foreach ($respGrp as $respGrpId=>$resp) {
                    $respGrp[$respGrpId]=$itemStr.$resp;
                }
                $item[$questId."_".key($respGrp)]=$respGrp;
            }
        }
    }   
}

function prepareCommentArray($userDataArray, &$item) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);               
                $item[$questId."_".key($respGrp)]=$respGrp[$respGrpId]["fk_id"];            
            }
        }
    }   
}

?> 
```

我在 File2 中得到的输出是（如前所述，我需要在每个数组的末尾有一个分号）

```
<?php
$itemFkids = Array
(
    "203_19" => "i27",
    "207_22" => "i28",
    "357_22" => "i99",
    "370_70" => "i104",
    "377_72" => "i105",
    "140_8" => "i1",
    "141_8" => "i2",
    "142_8" => "i3",
    "143_8" => "i4",
    "144_8" => "i5",

)//need a semicolon here
$demoFkids = Array
(
    "129_2" => "b1",
)//need a semicolon here
$commentFkids = Array
(
    "373_375" => "1",
    "380_382" => "2",
)//need a semicolon here
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:00:54.407

我以前没有这样做过，但你不能再添加一对`file_put_contents`吗？结果如何？

```
file_put_contents("staticSurveyDataFileTest.php", $file,"",true);
file_put_contents("staticSurveyDataFileTest.php", "<?php\n","",true);
file_put_contents("staticSurveyDataFileTest.php", $item,"itemFkids",true);
file_put_contents("staticSurveyDataFileTest.php", ";","",true);
file_put_contents("staticSurveyDataFileTest.php", $demo,"demoFkids",true);
file_put_contents("staticSurveyDataFileTest.php", ";","",true);
file_put_contents("staticSurveyDataFileTest.php", $comment,"commentFkids",true);
file_put_contents("staticSurveyDataFileTest.php", ";\n?>","",true); 
```

# c++ - C++ 指针用法

> ID：11606648
> 
> 赞同：0
> 
> 时间：2012-07-23T04:50:58.243
> 
> 标签：c++, pointers

最近，我一直在涉足 C++ 中的指针。根据我的阅读，指针变量用于通过引用（类似于VB中的ByRef）或函数指针（C#中的委托）传递变量。我很确定指针的使用不仅限于这些示例。我希望知道一些需要指针的应用程序。网络上的大多数教程都试图解释通过引用传递的用法。在此先感谢，并对这个愚蠢的问题感到抱歉:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:02:32.997

通常，只有在没有其他选择时才能使用指针。例如，在 C 中，无法将变量“通过引用”传递给函数。

同样在没有指针的 C++ 中，您无法真正实现运行时多态性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:13:06.827

请注意，如果您使用 C++ 编程，您应该从智能指针开始学习：

[http://en.wikipedia.org/wiki/Smart_pointer](http://en.wikipedia.org/wiki/Smart_pointer)

智能指针等价于指针，但更安全。

这是使用 c++ 智能指针的一个很好的教程和练习：

[http://www.ida.liu.se/~TDDD38/exercises/Smart_Pointer_II/Smart_pointer_II-11-en.pdf](http://www.ida.liu.se/~TDDD38/exercises/Smart_Pointer_II/Smart_pointer_II-11-en.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:14:30.463

您可能需要使用指针的原因有很多。最明显的一个是可选参数：

```
void f(int a, int const* b = NULL); 
```

使用`f`，您可以测试是否`b`为空，并采取相应的行动。

使用指针的另一个非常常见的原因是导航。例如，您可能想查看观察者模式。但是还有许多其他情况需要在对象之间导航（关系动态变化）。

最后，在动态分配对象时使用指针。这在 C++ 中并不像在 C# 或 Java 等语言中那样频繁（它们基本上分配所有内容，或者几乎所有内容都是动态分配的）。在 C++ 中，动态分配某些东西的通常原因是对象不可复制（它具有标识）并且具有独立于程序范围的生命周期。另一个原因是具有动态拓扑的对象中的子对象：例如图形的节点等。多态性有时也是一个原因；如果对象的实际类型取决于某些运行时条件，则必须动态分配它。

# r - 将数据帧拆分为子数据帧并动态命名它们（for循环）

> ID：11606651
> 
> 赞同：1
> 
> 时间：2012-07-23T04:52:09.707
> 
> 标签：r, for-loop, split

我在一个数据框中有 9880 条记录，我试图将它分成 9 组，每组 1000 条，最后一组将有 880 条记录，并相应地命名它们。我将 for-loop 用于 1-9 组，但手动用于最后 880 条记录，但我相信有更好的方法来实现这一点，

```
library(sqldf)
for (i in 0:8)
{
assign(paste("test",i,sep="_"),as.data.frame(final_9880[((1000*i)+1):(1000*(i+1)),   (1:53)]))
}
test_9<- num_final_9880[9001:9880,1:53] 
```

也无法将所有部分附加到一个 for 循环中！

```
#append all parts
all_9880<-rbind(test_0,test_1,test_2,test_3,test_4,test_5,test_6,test_7,test_8,test_9) 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:36:32.350

[此](https://stackoverflow.com/a/7060331/986817)解决方案的一个小变化

```
ls <- split(final_9880, rep(0:9, each = 1000, length.out = 9880))  # edited to Roman's suggestion
for(i in 1:10) assign(paste("test",i,sep="_"), ls[[i]]) 
```

您的绑定命令应该可以工作。

**编辑**

如果您有许多数据框，则可以使用 parse-eval 组合。我使用该软件包`gsubfn`以提高可读性。

```
library(gsubfn)
nms <- paste("test", 1:10, sep="_", collapse=",")
eval(fn$parse(text='do.call(rbind, list($nms))')) 
```

这是如何运作的？首先，我创建一个包含逗号分隔的数据框列表的字符串

```
> paste("test", 1:10, sep="_", collapse=",")
[1] "test_1,test_2,test_3,test_4,test_5,test_6,test_7,test_8,test_9,test_10" 
```

然后我用这个字符串来构造列表

```
list(test_1,test_2,test_3,test_4,test_5,test_6,test_7,test_8,test_9,test_10) 
```

使用`parse`和`eval`使用字符串插值。

```
eval(fn$parse(text='list($nms)')) 
```

字符串插值是通过`fn$`前缀 of实现的`parse`，其作用是截取`$nms`变量中包含的字符串并进行替换`nms`。解析和评估字符串`"list($mns)"`会创建所需的列表。在解决方案中，`rbind`它包含在 parse-eval 组合中。

*编辑 2*

您可以收集具有特定模式的所有变量，将它们放在一个列表中并按行绑定它们。

```
do.call("rbind", sapply(ls(pattern = "test_"), get, simplify = FALSE)) 
```

`ls`查找具有模式“test_”的所有变量

`sapply`检索所有这些变量并将它们存储在列表中

`do.call`逐行展平列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:30:44.490

不需要 for 循环——使用`split`

```
data <- data.frame(a = 1:9880, b = sample(letters, 9880, replace = TRUE))

splitter <- (data$a-1) %/% 1000

.list <- split(data, splitter)

lapply(0:9, function(i){
  assign(paste('test',i,sep='_'), .list[[(i+1)]], envir = .GlobalEnv)
  return(invisible())
})

all_9880<-rbind(test_0,test_1,test_2,test_3,test_4,test_5,test_6,test_7,test_8,test_9)

identical(all_9880,data)
## [1] TRUE 
```

# imagemagick - ImageMagick 中的慢速字体渲染

> ID：11606654
> 
> 赞同：2
> 
> 时间：2012-07-23T04:52:55.417
> 
> 标签：imagemagick

我正在使用以下 ImageMagick 脚本（使用 Imagick for PHP）来生成字体图像。这个脚本需要大约 0.1 秒来生成一个大小为 48 的大约 30 个字符的图像。目标速度大约是 0.01 秒。恐怕切换到 GD 库可能是实现这一目标的唯一方法（我[在这里](http://www.rubblewebs.co.uk/imagemagick/compair.php)读到GD 中的文本生成要快得多）。但是，如果没有重力和修剪等功能，使用 GD 生成这种类型的图像要麻烦得多。有没有人在这段代码中看到明显的瓶颈，或者是时候切换库了吗？

```
$image = new Imagick();
$draw = new ImagickDraw();
$background = new ImagickPixel('none');
$draw->setFont($font);
$draw->setFontSize($size);
$draw->setFillColor(new ImagickPixel('#'.$color));
$draw->setGravity(Imagick::GRAVITY_CENTER);
$draw->annotation(0, 0, $text);
$image->newImage(5*mb_strlen($text, 'UTF-8')*$size, 5*$size, $background);
$image->setImageFormat('png');
$image->drawImage($draw);
$image->trimImage(0);
$image->writeImage($path_server['dirname'].'/'.$path_server['basename']); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T16:33:58.537

答案*是*切换库，而不是 GD。相反，我改用了[GraphicsMagick](http://www.graphicsmagick.org/)，它是 ImageMagick 的一个分支，专注于效率和优化。根据 GraphicsMagick 网站，它被一些世界上最大的照片网站使用，包括 Flickr 和 Etsy。以下 GraphicsMagick 代码的运行**速度比相应的 ImageMagick 代码快大约 10 倍**，这使我能够达到每次操作 0.01 秒的目标（实际上它更接近 0.008 秒）：

```
$image = new Gmagick();
$draw = new GmagickDraw();
$draw->setfont($font);
$draw->setfontsize($size);
$draw->setfillcolor('#'.$color);
$draw->setgravity(Gmagick::GRAVITY_CENTER);
$draw->annotate(0, 0, mb_ereg_replace('%', '%%', $text));
$image->newimage(5*mb_strlen($text)*$size, 5*$size, 'none', 'png');
$image->drawimage($draw);
$image->trimimage(0);
$image->writeimage($path_server['dirname'].'/'.$path_server['basename']); 
```

您会注意到还有一些其他不错的功能。例如`ImagickPixel`，大多数函数不必通过创建对象来定义颜色，而是简单地将颜色作为字符串。此外，GraphicsMagick 中的函数名称似乎更加自洽（*annotate*而不是*annotation*）。不用说，我对此很满意。

# android - 如何在 Android 登录/注销中管理会话？

> ID：11606656
> 
> 赞同：14
> 
> 时间：2012-07-23T04:53:11.447
> 
> 标签：android, session

我成功开发了一个登录表单。但现在我无法管理会话......我也阅读了更多会话概念。但我做不到。请详细解释我。这是我的代码。请帮助我如何在这里使用会话部分。

这是我的编码部分：

```
package com.androidlogin.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

 public class AndroidLoginExampleActivity extends Activity {
 private final String NAMESPACE = "http://ws.userlogin.com";
 private final String URL = "http://111.223.128.10:8085/AndroidLogin/services/Login?wsdl";
private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
private final String METHOD_NAME = "authentication";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

  public void onClick(View arg0) {
   loginAction();

   }
   });
   }

 private void loginAction(){
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

    }
    catch(Exception e){

    }
   }

   } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T12:28:09.150

执行注销操作时清除活动堆栈。

```
Intent intent  = new Intent(this, LoginActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

然后后退按钮将留在 LoginActivity 因为活动堆栈被清除。我想它会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:26:09.547

检查这个..它将帮助您在 Android 中维护会话

[https://stackoverflow.com/a/6112799/1358004](https://stackoverflow.com/a/6112799/1358004)

[用于跟踪登录会话的 Android 应用策略](https://stackoverflow.com/q/7706449/1358004)（此链接将显示维护登录/注销会话方面的所有方面。

我想它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T12:25:57.640

您可以像这样清除会话

```
 MySession session = MySession .getInstance(MainActivity.this);
                    session.clear();
                    Intent intent = new Intent(getApplicationContext(), MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                    finish(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-20T05:02:48.973

只需单击按钮即可调用使用方式`finish()`：`logout`

在活动通话中==>`finish();`

在片段调用 ==> `context.finish()`;

希望有帮助。

# qt - 使用 OpenCV 从网络摄像头捕获视频时 QT GUI 冻结

> ID：11606657
> 
> 赞同：6
> 
> 时间：2012-07-23T04:53:21.173
> 
> 标签：qt, user-interface, opencv, webcam

我正在使用 Opencv 进行一些实时视频处理。

作为前端，我使用的是 QT 框架。

在我的 GUI 上，我有一个输入图像窗口（映射到一个标签）和一个输出图像窗口（映射到另一个标签）和 3 个按钮。一个开始输入视频捕获，第二个处理视频（代码尚未编写），第三个退出。

我目前能够流式传输我的视频并将其显示在前端。但这会锁定我的 GUI 并且无法退出。

我尝试使用 QTimers（使用来自这个和 QT 论坛的建议），但我的 GUI 仍然处于锁定状态。

如果有人能指出我正确的方向，将不胜感激。

下面是代码：

```
mainwindow.h

#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>   // for cvtColor
#include <iostream>
#include <QTimer>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_buttonCaptureVideo_clicked();

    void on_buttonExit_clicked();

public slots:
    virtual void doNextFrame() {repaint();}

private:
    Ui::MainWindow *ui;
    CvCapture *capture;          // OpenCV Video Capture Variable
    IplImage *frame;            // Variable to capture a frame of the input video
    cv::Mat source_image;     // Variable pointing to the same input frame
    cv::Mat dest_image;      // Variable to output a frame of the processed video
    QTimer *imageTimer;
};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
    cvReleaseImage(&frame);
    cvReleaseCapture(&capture);
}

void MainWindow::on_buttonCaptureVideo_clicked()
{
    // Set to 25 frames per second

    const int imagePeriod = 1000/25;   // ms

    imageTimer = new QTimer(this);

    imageTimer->setInterval(imagePeriod);

    connect(imageTimer, SIGNAL(timeout()), this, SLOT(doNextFrame()));

    // Use the default camera
    capture = cvCreateCameraCapture(-1);

    while(capture)
    {
    // Capture a frame
    frame = cvQueryFrame(capture);

    // Point to the same frame
    source_image = frame;

    // Resize Image
    cv::resize(source_image, source_image, cv::Size(128,128) , 0, 0);

    // Change to RGB format
    cv::cvtColor(source_image,source_image,CV_BGR2RGB);

    // Convert to QImage
    QImage qimg = QImage((const unsigned char*) source_image.data, source_image.cols, source_image.rows, QImage::Format_RGB888); // convert to QImage

    // Display on Input Label
    ui->labelInputVideo->setPixmap(QPixmap::fromImage(qimg));

    // Resize the label to fit the image
    ui->labelInputVideo->resize(ui->labelInputVideo->pixmap()->size());

    }
}

void MainWindow::on_buttonExit_clicked()
{

    connect(ui->buttonExit, SIGNAL(clicked()), qApp, SLOT(closeAllWindows()));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:07:53.860

当您单击按钮时，

```
while(capture) { ... } 
```

循环将永远运行，永远`capture`不会设置为 NULL。这意味着代码流永远不会离开您的循环，因此主线程无法处理其他任何事情，例如重新绘制。

QTimer 将发出它的 timeout() 信号，但它们将作为事件放置在 Qt 的事件队列中。只要您的`on_buttonCaptureVideo_clicked()`方法正在运行，这些事件就不会被处理。

以下是我的建议如何使它工作：

* * *

这段代码：

```
// Set to 25 frames per second  
const int imagePeriod = 1000/25;   // ms        
imageTimer = new QTimer(this);        
imageTimer->setInterval(imagePeriod);        
connect(imageTimer, SIGNAL(timeout()), this, SLOT(doNextFrame()));   
// Use the default camera            
capture = cvCreateCameraCapture(-1); 
```

属于 MainWindow 的构造函数，因为您只想设置一次。当用户第二次、第三次等点击按钮时，无需再次执行此操作。

循环中的代码`while`应该进入`doNextFrame()`插槽（没有 while 构造）。

然后你的按钮只会做

```
imageTimer->start(); 
```

然后例如做

```
imageTimer->stop(); 
```

当它再次被点击时。

示例代码：

```
void MainWindow::on_buttonCaptureVideo_clicked()
{
    if( imageTimer->isActive() )
    {
        imageTimer->stop();
    }
    else
    {
        imageTimer->start();
    }
} 
```

* * *

如果你这样做会发生什么？

当您单击按钮时，您`on_buttonCaptureVideo_clicked()`单击的插槽将从 GUI 线程中调用，计时器将启动，并且该方法将几乎立即返回。
现在 GUI 线程是空闲的并且能够处理重绘等。
从那时起，计时器将每 40 毫秒发送一次 timeout() 信号。每当 GUI 线程空闲时，它将处理此信号并调用您的`doNextFrame`插槽。
此插槽将捕获下一帧并在完成后返回。完成后，GUI 线程将能够再次处理其他事件（例如重绘）。
再次单击该按钮后，计时器将停止，并且不会发送新的 timeout() 事件。如果在单击按钮后仍然看到几帧，这可能意味着发送计时器事件的速度比处理它们的速度快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:09:33.473

*前言：本人C++不强，无法提供具体代码，但对PyQt有经验*

对于 Qt 的新手来说，这是一个常见的陷阱。看起来你`on_buttonCaptureVideo_clicked`正在做的是在你的主 GUI 线程中进入一个循环来工作。在 QT 中，您希望避免在主线程中做任何忙碌的事情。Qt 事件循环需要能够在它们进入时不断处理和刷新您的 GUI 事件。您正在做的是阻塞事件循环。

您可以在这里做两种不同的事情。第一种是更基本的方法，但可以让您看到更直接的结果。您可以“泵送”事件循环。根据`while`循环迭代的速度，您可以调用`qApp->processEvents();`. 这将允许 Qt 处理待处理的 GUI 事件并使您的应用程序看起来更具响应性。它基本上在您的 while 循环和主循环之间共享时间。也许您想在每第 n 帧调用一次。取决于您希望确保 GUI 刷新的频率。

另一个更可取的选项是将捕获循环放入 QThread。当新帧可用时，您可以使用帧数据发出信号。该信号将被放置到 Qt 事件循环中以与其他所有内容一起处理，并且不会阻止您的 GUI。通常，这是您希望对任何繁重的处理或长时间运行的可调用对象采取的方法。

**编辑**

我刚刚意识到除了在主线程中执行循环之外，您还启动了 QTimer。如果您想使用 QTimer，并且您的图像处理不是太重（每个周期不需要很长时间），那么您应该将所有内容移入`doNextFrame`并完全删除`while`循环。如果您`doNextFrame`是一个繁重的过程，那么您应该使用 QThread 和信号。

# html - 单击元素并加载网站时保持css悬停

> ID：11606658
> 
> 赞同：0
> 
> 时间：2012-07-23T04:53:37.957
> 
> 标签：html, css

网站导航html：

```
<div class="main_nav">
    <div><a href="home/">Home</a></div>
    <div><a href="company/">Company</a></div>
    <div class="active"><a href="franchise/">Franchise</a></div>
</div> 
```

当链接悬停时，它会获得特定的背景颜色。

我的问题是，如何在加载单击的页面并且仍显示旧页面时保持此悬停状态？我的意思是你悬停一个链接项目，背景发生变化，你点击背景更改为默认值，新站点开始加载。

当新页面快速加载时，这不是必需的，因此您不会真正看到差异。但是我很想知道这是否可能仅使用 css 技术。

有任何想法吗？

我的CSS：

```
.header_wrapper .main_nav div a:link{
  display:block;
  text-decoration:none;
  color:#f5f5f5;
}

.header_wrapper .main_nav div.active a:link{
  color:#f5f5f5;
  background: url(images/layout/main_nav_bg_hover.png) repeat-x;
}

.header_wrapper .main_nav div a:hover{
  color:#f5f5f5;
  background: url(images/layout/main_nav_bg_hover.png) repeat-x;
}

.header_wrapper .main_nav div a:focus{
  color:#f5f5f5;
  background: url(images/layout/main_nav_bg_hover.png) repeat-x;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:59:55.113

嘿，现在习惯像这样聚焦属性

```
a:focus{
// css properties 
} 
```

现场[演示](http://tinkerbin.com/ofjuUIPN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:03:59.483

试试这样。。

如果您的`<a>`标签有一个类而不是使用这个：

```
a.classname:focus {
   color: /*whatever you want*/ ;
} 
```

如果你想应用所有`<a>`而不是使用这个：

```
a:focus {
   color: /*whatever you want*/ ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:07:29.340

试试这个：

```
<div class="<?=($_REQUEST['args'] == 'franchise')?'active': ''?>"><a href="franchise/">Franchise</a></div> 
```

# php - 什么时候使用 php 微框架？

> ID：11606659
> 
> 赞同：2
> 
> 时间：2012-07-23T04:53:48.437
> 
> 标签：php, frameworks, coding-style

我不确定这个问题是否符合 SO 的指导方针，但我想知道是否存在可以使用微框架的特定情况。按照命名法，它适用于小型项目。但我们永远无法判断一个目前规模很小的项目，以后是否会变得很大。这是否意味着我们只能将微框架用于 REST API 和其他东西（它们几乎总是大型项目的较小部分）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:10:18.493

这实际上主要取决于您的需求。如果我想创建一些需要几个小时的东西，并且或多或少只是带有一些香料的“Hello world”，我会使用[Silex](http://silex.sensiolabs.org/)。如果我需要更大的东西，我会使用[Symfony2](http://symfony.com/)并花下一个小时来配置它（只是因为它可能值得花更多时间在上面）。但认为它很简单就太天真了。我知道有些人甚至为最小的项目推出更大的框架，只是因为他们有一天会成长。其他人在微框架中执行它们，并在需要时重写它们。只需与您的团队坐在一起，写下在特定情况下使用微框架的利弊，这应该是最好的。

# regex - 使用正则表达式将类添加到 css 的每一行

> ID：11606663
> 
> 赞同：2
> 
> 时间：2012-07-23T04:55:11.267
> 
> 标签：regex

我想在我的 css 的每一行的开头添加一个类

我想

```
.more {
    padding: 5px 10px 0;
}

#fbook {
    display: inline;
    float: left;
    margin: 0 0 0 4px;
    width: 320px;
} 
```

看起来像

```
.test .more {
    padding: 5px 10px 0;
}

.test #fbook {
    display: inline;
    float: left;
    margin: 0 0 0 4px;
    width: 320px;
} 
```

像这样的东西。

```
^([A-Za-z0-9]+)$ 
```

如果我的 css 看起来像这样就可以了

```
more
{
    padding: 5px 10px 0;
}

fbook
{
    display: inline;
    float: left;
    margin: 0 0 0 4px;
    width: 320px;
} 
```

但我似乎无法在找到 . # {

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:11:41.017

**尝试这个**

```
$result = preg_replace('/(?i)^([.#a-z]+\{)$/m', '.test $1', $subject); 
```

**解释**

```
"
(?im)         # Match the remainder of the regex with the options: case insensitive (i); ^ and \$ match at line breaks (m)
^             # Assert position at the beginning of a line (at beginning of the string or after a line break character)
(             # Match the regular expression below and capture its match into backreference number 1
   [.#a-z]       # Match a single character present in the list below
                    # One of the characters “.#”
                    # A character in the range between “a” and “z”
      +             # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   \{            # Match the character “{” literally
)
\$             # Assert position at the end of a line (at the end of the string or before a line break character)
" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:27:34.160

您可以使用像[LESS](http://lesscss.org/)这样的现代工具。只需获取您的代码，并将其包装为`.test{` `}`：

```
.test {
    .more {
        padding: 5px 10px 0;
    }

    #fbook {
        display: inline;
        float: left;
        margin: 0 0 0 4px;
        width: 320px;
    }
} 
```

如果你只需要一次，你可以在网上做：[http](http://leafo.net/lessphp/#demo)
: //leafo.net/lessphp/#demo客户端 JavaScript 选项。

# blender - 重置动画时间线 - blender 2.6

> ID：11606666
> 
> 赞同：2
> 
> 时间：2012-07-23T04:55:28.350
> 
> 标签：blender, blender-2.50, blender-2.61

我是 Blender 动画的新手，我有一个简单的 3d 模型，它有骨骼动画，它的动画效果符合预期，现在我想做的是重置搅拌机时间轴中的帧，例如，我的动画循环在 250 到 300 之间帧并希望从零开始移动相同的帧并重置/删除其余帧。- 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:06:50.410

我希望我理解你的问题。*在Dope Sheet*或*Action Editor*模式下转到[DopeSheet](http://wiki.blender.org/index.php/Doc:2.6/Manual/Animation/Editors/Dopesheet)视图，并使用与其他窗口中相同的键标记要移动的帧，例如 a for all b for box select c,... 然后只需 g for grab。

 **如果您想创建一个新动作，您可以使用 Ctrl-C 复制选定的帧并将它们粘贴到另一个位置，甚至是一个新动作。**

# parallel-processing - 使用 SQLLDR/SQL Loader 运行并行运行的解决方案

> ID：11606667
> 
> 赞同：1
> 
> 时间：2012-07-23T04:55:38.300
> 
> 标签：parallel-processing, sql-loader, temporary, staging

我有情况！

10 个模块每个处理大约需要将近 2 个小时，包括从外部文件加载数据，运行 20 个小时是不合理的，由于编码方式，它们必须按顺序运行。每个模块都有一组相同的脚本，但处理不同的数据集。

成分 ：

a) 表格：TempTableA、FinalTableA、TempTableB、FinalTableB；这些表中的每一个都由一个模块键唯一地表示。模块键默认为“-99” b) 外部文件 (FileA,FileB) 没有模块键，只有数据。c) 脚本知道该模块的模块密钥。d) .ctr 文件

每个模块内的代码或多或少都有以下步骤：

截断表 TempTableA sqlldr $USER/$PASSWRD@$PRD_SID control=ctr/fileA.ctr log=log/fileA.log bad=log/fileA.bad skip=1 rows=10000 silent=FEEDBACK

update table TempTableA set moduleKey = $moduleKey where moduleKey = '-99' insert into FinalTableA as select * from TempTableA;

现在我不能并行运行这些模块，因为这些临时表被截断了。

有更好的解决方案吗？

我知道外部表，但这不是关于使用外部表，而是关于我如何解决使用共享临时表的问题。这也可能与运行并行负载无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:44:21.770

您可以并行使用 SQL*LOADER 并进行直接路径加载。因此，您需要将命令配置为 DIRECT=TRUE 和 PARALLEL=TRUE。

禁止 UPDATE 语句。将其替换为 CTL 文件中的常量。

我认为您可以在最后一句中使用 /*+ APPEND */ 之类的提示来插入数据。但是，请检查您的要求以了解最终表是否可以分区。所以，最后一步不会是一个 INSERT INTO 类型的句子，而是一个 EXCHANGE PARTITION 一个。这是将数据上传到决赛桌的最快方式。

来自智利的问候。

帕维尔

# jquery - 以编程方式更改 Imagemapster 图像的边距

> ID：11606668
> 
> 赞同：1
> 
> 时间：2012-07-23T04:55:55.013
> 
> 标签：jquery, css, imagemapster

我正在尝试更改有问题的 Imagemapster 图像边距作为对重新调整窗口事件的反应。改变尺寸效果很好（我使用 mapster 的 resize 方法）。我应该对哪个元素应用新边距？如果我将它应用于图像本身，则图像定位正确，但热点不会随之移动。这有可能吗？（我正在使用 jquery，但 javascript 解决方案也很好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:52:32.813

ImageMapster 在图像周围创建一个`div`包装器并从图像中删除 CSS。该插件依赖于图像和其他分层元素之间的统一样式，以便可靠地创建效果。

我会做以下两件事之一：

1) 将样式应用于包装器，您可以使用以下方式定位它`parent`：

```
$('#my-image').parent(); 
```

2）只需首先在图像周围创建自己的包装器，然后用您的样式更改来定位它：

```
<div id="my-image-wrapper">
    <img src="..." id="my-image">
</div> 
```

两者都应该可以正常工作；第二个可能是最简单的，因为它完全不必担心图像在被 imagemapster 绑定时会发生什么。

# javascript - Django：以下场景如何使用modelform、formset、model formset？

> ID：11606672
> 
> 赞同：0
> 
> 时间：2012-07-23T04:56:29.803
> 
> 标签：javascript, python, django

我有这个模型：

```
class option(models.Model):
    warval = models.ForeignKey(war)
    caption = models.CharField(max_length=20)
    text = models.TextField(blank=True,null=True)
    url = models.URLField(blank=True,null=True)
    user = models.ForeignKey(User) 
```

而且我有几个模型形式，例如：

```
class text_option(ModelForm):
    class Meta:
        model = option
        exclude = ('url','warval','user')

class url_option(ModelForm):
    class Meta:
        model = option
        exclude = ('text','warval','user')
    def clean_url(self):
            #processing... 
```

我希望我的用户根据需要创建尽可能多的选项。所以我的选择是使用“formset”。但是如何使用“war”实例实例化表单集中的所有表单（“war”是一个模型）。以及如何在我的表单集中提供上述给定模型表单的所有功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:24:38.050

您可以`war`通过 url 显式传递实例的 id，例如`http://myserver/add_options/1`where `1`is id of `war`，然后在视图中使用它来适当地更新选项的外键字段。

另一种选择是将 id 作为表单中的隐式/隐藏输入字段传递，并使用该 id 来标识`war`视图中的实例。

另一方面，您可以利用继承来简化模型定义。像：

```
class base_option(models.Model):
    warval = models.ForeignKey(war)
    caption = models.CharField(max_length=20)
    user = models.ForeignKey(User)

class text_option(base_option):
    text = models.TextField(blank=True,null=True)

class url_option(base_option):
    url = models.URLField(blank=True,null=True) 
```

# objective-c - 表视图将数据库中的值传递给 UIWebView？

> ID：11606673
> 
> 赞同：0
> 
> 时间：2012-07-23T04:56:38.053
> 
> 标签：objective-c, xcode4

我正在尝试通过表格视图获取存储在我的数据库中的值并且我成功了，现在我的表格视图上有*URL*值，我想要的是当我单击特定单元格时，该单元格上的值会转到我的`UIWebView`它加载。

为此，我制作了一个导航控制器，只要选择任何行时，我都会推动它。

我在这里粘贴我的代码以寻求帮助。

对于表视图：

```
**- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return [appdelegate.tablearr count];

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Simple"];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Simple"]autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    NSDictionary *rowVals = (NSDictionary*) [appdelegate.tablearr objectAtIndex:indexPath.row];

    scanValue = (NSString*) [rowVals objectForKey:@"descrip"];
    cell.textLabel.text = scanValue;

     // Set up the cell
    return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    DetailViewController *DVC = [[[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:nil] autorelease];
 //   DVC.characterNumber = indexPath.row;
    NSLog(@"%@ PASSING VALUE",scanValue);
    DVC.detailstr = scanValue;

    [self.navigationController pushViewController:DVC animated:YES];
}** 
```

在我的`DETAIL VIEW CONTROLLER`中，我制作了一个`NSString *detailstr`存储在来自 scanValue 的任何内容中。

```
**- (void)viewDidLoad
{
    [super viewDidLoad];

   SecondViewController *sec = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil] ;
    NSLog(@"WHAT IS COMING HERE %@",detailstr);

    NSString *urladdress = detailstr;
    NSURL *url = [NSURL URLWithString:urladdress];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];** 
```

现在任何人都可以在代码方面帮助我，任何帮助我们都会对我真正有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:34:53.657

我在 didSelectRowAtIndexPath 方法中添加了更多行，因此请将旧行替换为新行。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
DetailViewController *DVC = [[[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:nil] autorelease];

NSDictionary *rowVals = (NSDictionary*) [appdelegate.tablearr objectAtIndex:indexPath.row];

scanValue = (NSString*) [rowVals objectForKey:@"descrip"];
NSLog(@"%@ PASSING VALUE",scanValue);
DVC.detailstr = scanValue;

[self.navigationController pushViewController:DVC animated:YES];} 
```

# drupal - 在drupal 7中的块内形成

> ID：11606684
> 
> 赞同：0
> 
> 时间：2012-07-23T04:57:55.570
> 
> 标签：drupal, drupal-forms

我正在使用以下代码在 drupal 的块中放置一个表单

```
function current_posts_block_view($delta = '') {
  $elements = drupal_get_form('mydeveloper_simple_form');
  $block['content'] = drupal_render($elements);
} 
```

此块显示在页脚中。表单中包含必填字段验证器。因此，如果我提交没有数据的表单，验证器将工作并显示错误，在节点的默认位置显示错误。（在页面顶部）我希望它显示在我的块内。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:41:09.563

原因是，所有错误、信息和状态消息都显示在您在主题的 page.tpl.php 中设置的位置。您可以尝试内联表单错误模块[http://drupal.org/project/ife/](http://drupal.org/project/ife/)来解决此问题。

# vb.net - VB.NET 使用 Datagridview 更改数据库列标题名称

> ID：11606685
> 
> 赞同：1
> 
> 时间：2012-07-23T04:58:00.200
> 
> 标签：vb.net, datagridview

我使用以下代码更改了 datagridview 的标题名称

```
Me.DataGridView1.Columns(0).HeaderText = "xxxx" 
```

如何将此更改应用于 Access 数据库？就像我重命名数据网格视图中的第一列一样，我希望数据库中的第一列相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:09:21.363

没有 .Net API 允许对 gridview 标题的更改传播回数据库的列。gridview 对象支持绑定到多个源（在那些 MS Access、Sql Server、Oracle、对象集合等中）并且不包含更新基于 SQL 的数据源所需的 DDL 逻辑。因此，您将需要执行两项单独的操作：一项针对 access 数据库，一项针对 asp.net 代码。

# jquery - 使用 Ajax 和 MVC 3，如何将值从一个局部视图传递到同一页面上的另一个局部视图？

> ID：11606687
> 
> 赞同：0
> 
> 时间：2012-07-23T04:58:11.120
> 
> 标签：jquery, ajax, asp.net-mvc-3

我有一个项目，其中有一个任务视图。它包含以下代码：

```
@{
    ViewBag.Title = "Tasks";
}         

<div>
<div>@Html.Action("TaskList", "Dispatch", new { hidAccId = "3", hidUserId = "0" })</div>
<div>@Html.Action("TaskDetail", "Dispatch")</div>  
</div> 
```

因此，当渲染任务视图时，它实际上调用了另外两个局部视图。

第一个部分视图基本上给了我一个任务表.. 很少的信息。我有它，所以当我选择一行数据时，它会突出显示并给我一个行 ID。

我的第二个局部视图（位于同一页面上的第一个视图下方）显示了详细的任务。

这个想法是从第一个部分视图中获取选定的行 ID，并将其提供给第二个部分视图的表单。使用 Ajax 提交表单并检索新选择的 Task 详细信息。

我该如何做到这一点？我希望能够在不破坏第一个部分视图的情况下刷新第二个部分视图。

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:19:37.303

为具有“TaskDetail”的 div 提供一个唯一的 id。

```
<div id="taskDetailsDiv">@Html.Action("TaskDetail", "Dispatch")</div> 
```

在 TaskListView 添加代码以附加 javascript 函数以更新详细信息视图：

```
<% foreach (TaskListRow row in ViewData.Model)
//make tablerows and add this for data that will trigger an update of details view
<a href="javascript:DisplayEditView(" + row.uniqueId + ")">Edit</a>
%>

//Add this at the bottom of the list view
<script language="javascript" type="text/javascript">
function DisplayEditView(uniqueRowId){
var url = '@(Url.Action("TaskDetail", "Dispatch"))';
url += "\?id" + uniqueRowId;
$.get(url, function(data){
$("taskDetailsDiv").html(data.toString);
}
}
</script> 
```

这将使用 jquery 和 ajax 来检索和显示数据，而无需刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:50:11.467

假设您的 TaskList 部分视图如下：

```
<table>
    <tr>
        <th>
            TaskCol1
        </th>
        <th>
            TaskCol2
        </th>
        <th>
            TaskCol3
        </th>
        <th>
            TaskCol4
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.TaskCol1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TaskCol2)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TaskCol3)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TaskCol4)
        </td>
        <td>
            @Html.HiddenFor(modelItem => item.TaskId)
        </td>
    </tr>
}

</table> 
```

而您的 TaskDetail 部分视图：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Task</legend>

        @Html.HiddenFor(model => model.TaskId)

        <div class="editor-label">
            @Html.LabelFor(model => model.TaskCol1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TaskCol1)
            @Html.ValidationMessageFor(model => model.TaskCol1)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.TaskCol2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TaskCol2)
            @Html.ValidationMessageFor(model => model.TaskCol2)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.TaskCol3)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TaskCol3)
            @Html.ValidationMessageFor(model => model.TaskCol3)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.TaskCol4)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TaskCol4)
            @Html.ValidationMessageFor(model => model.TaskCol4)
        </div>
    </fieldset>
} 
```

您可以通过 ajax 处理调用服务器端方法的表格行的单击事件：

```
$(function () {
    $("tr").click(function () {
        var itemId = $("input[type='hidden']", this).val();

        $.getJSON("/Home/GetDetails", { id: itemId }, function (data) {
            $("#TaskId").val(data.TaskId);
            $("#TaskCol1").val(data.TaskCol1);
            $("#TaskCol2").val(data.TaskCol2);
            $("#TaskCol3").val(data.TaskCol3);
            $("#TaskCol4").val(data.TaskCol4);
        });
    });
}); 
```

最后，您的控制器必须具有以下方法：

```
public ActionResult GetDetails(int id)
{
    TaskEntities entities = new TaskEntities();

    var item =
        (from t in entities.Tasks
        where t.TaskId == id
        select t).FirstOrDefault();

    return Json(item, JsonRequestBehavior.AllowGet);
} 
```

# java-me - j2me 中 lwuit 中 HttpRequestHandler 的 Jar 文件

> ID：11606691
> 
> 赞同：2
> 
> 时间：2012-07-23T04:58:32.500
> 
> 标签：java-me, lwuit, html-components

我需要在 j2me 模拟器中打开一个网页。因为我有我可以通过使用 HTMLComponent 来做到这一点的流程。但是我不能使用这个 HttpRequestHandler 类在 Lwiit 的 j2me 中创建处理程序，谁能告诉我我的 j2me 中缺少什么？如果有任何 JAR 文件可以使用它，那么给我建议使用它。然后我也尝试过 DocumentRequestHandler 而不是 HttpRequestHandler 但它向我展示了“连接流中的错误”

我的代码是：

```
 DocumentRequestHandler handler=new DocumentRequestHandler() {

        public InputStream resourceRequested(DocumentInfo di) {
          return null;
            //           throw new UnsupportedOperationException("Not supported yet.");
        }
    };
 HTMLComponent htmlc=new HTMLComponent(handler);
 htmlc.setPage("http://facebook.com");
 addComponent(htmlc);
 show(); 
```

在这段代码中，我需要在 DocumentRequestHandler 中返回什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:34:39.363

您要查找的类可在 LWUITBrowser 示例应用程序中找到，并且可以从 LWUIT SVN 的 MIDP/applications 下检出。

# c++ - 以两个对象为参数的函数

> ID：11606692
> 
> 赞同：2
> 
> 时间：2012-07-23T04:58:47.643
> 
> 标签：c++, templates, pass-by-reference

我有一个基类`Shape`和一些其他派生类，例如`Circle`，`Rectangle`等等。我想将两个对象传递给一个函数`getDistance(object1, object2)`来计算两个对象之间的距离。

我的问题是，这个函数应该如何声明和实现？你认为我应该使用`template`，因为我可能会传递来自两个不同类的两个对象吗？如果是这样，`template`外观会如何？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:02:30.463

通常你会**在你的基类上使用一个纯虚拟**。您已经从 Shape 继承，所以模板对于这个问题来说是多余的。

将**虚拟 GetPosition()**添加到基本 Shape 类，并使 getDistance() 采用两个**Shape 指针**（或引用）。例如：

```
class Shape
{
public:
    ~virtual Shape() {}  // Make sure you have a virtual destructor on base

    // Assuming you have a Position struct/class
    virtual Position GetPosition() const = 0;
};

class Circle : public Shape
{
public:
    virtual Position GetPosition() const;  // Implemented elsewhere
};

class Rectangle : public Shape
{
public:
    virtual Position GetPosition() const;  // Implemented elsewhere
};

float getDistance(const Shape& one, const Shape& Two)
{
    // Calculate distance here by calling one.GetPosition() etc
}

// And to use it...
Circle circle;
Rectangle rectangle;
getDistance(circle, rectangle); 
```

编辑：Pawel Zubrycki 是正确的 - 在基类上添加了虚拟析构函数以实现良好的度量。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:05:01.020

你可以用模板来做到这一点：

```
template<class S, class T> getDistance(const S& object1, const T& object2) { 
```

只要两个对象具有相同的函数或变量（即 x 和 y）即可计算距离。

否则，您可以使用继承：

```
getDistance(const Shape& object1, const Shape& object2) 
```

只要 Shape 类强制使用类似 getPosition 的函数：

```
getPosition() = 0; (in Shape) 
```

我建议继承，因为它会更清晰，更容易理解和控制错误，但会牺牲一点速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:46:53.160

另一种选择是使用参数多态性：

```
struct Position {
    float x, y;
};

class Circle {
public:
    Position GetPosition() const;  // Implemented elsewhere
};

class Rectangle {
public:
    Position GetPosition() const;  // Implemented elsewhere
};

float getDistance(const Position &oneP, const Position twoP); // Implemented elsewhere

template<class K, class U>
float getDistance(const K& one, const U& two) {
    return getDistance(one.GetPosition(), two.GetPosition());
} 
```

# javascript - JS/Ajax 图片上传 - 生成相同内容的多张图片预览缩略图

> ID：11606693
> 
> 赞同：3
> 
> 时间：2012-07-23T04:58:54.850
> 
> 标签：javascript, jquery, ajax

我目前正在使用图像上传器（[源文件](http://dondedeportes.es/uploaderPreviewer.zip)）。我在创建重复的预览字段时遇到了困难。我正在创建预览图像表单，但它只显示一个缩略图。我怎样才能让 Js 给我两个缩略图？这是一个[活生生的例子](http://dondedeportes.es/uploader-previewer/)和对我的源代码的进一步解释

这是我最初想要做的： ![在此处输入图像描述](../Images/7d77bd21bfc47d8ba23999f9dd3840a0.png)

用于创建预览图像表单的 JS 片段（缩略图）

**upLoaderPreviewer.js**

```
<script>
function createImageForm(index) {

    var form = '';

    form += '<div><table cellspacing="0">';
    form += '<tr><td class="label">'
          + '<label for="imageToUpload' + index + '">'
          + $.uploaderPreviewer.messages.imageLabel + ' ' + index + ':</label></td>';
    form += '<td class="removeImageButton">'
          + '</td>';
    form += '<td class="imageFormFileField">'
          // BUG: If the "enctype" attribute is assigned with jQuery, IE crashes
          + '<form enctype="multipart/form-data">'
          + '<input id="imageToUpload' + index + '" type="file" />'
          + '<input type="hidden" name="currentUploadedFilename"'
          + ' class="currentUploadedFilename"  /></form>'
          + '</td></tr>';
    form += '<tr><td></td><td></td><td>'
          + '<div class="previewImage" style="float:left; margin:10px 10px 10px 0;  "><img /></div>'
          + '<button type="button" class="small removeImage"></td></td></tr></table></div>';

    return form;
};
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:45:55.560

尝试这个：

将 uploaderpreviewer.js 上的函数“displayImage”替换为：

```
function displayImage($previewDiv, imageUrl) {
//New
var yourCustomPreview = $('#custompreview');

var imageFilename = imageUrl.substr(imageUrl.lastIndexOf('/') + 1);

$previewDiv
    .removeClass('loading')
    .addClass('imageLoaded')
    .find('img')
    .attr('src', imageUrl)
    .show();
$previewDiv
    .parents('table:first')
    .find('input:hidden.currentUploadedFilename')
    .val(imageFilename)
    .addClass('imageLoaded');
$previewDiv
    .parents('table:first')
    .find('button.removeImage')
    .show();

    //New
    yourCustomPreview.prepend('<img src="' + imageUrl + '"/>'); 
```

}

并将其添加到您要复制拇指的位置：

```
<div id="custompreview">
</div> 
```

# c++ - 如何在 Perl 脚本中调用 C++ 程序？

> ID：11606694
> 
> 赞同：1
> 
> 时间：2012-07-23T04:59:00.493
> 
> 标签：c++, perl

我正在编写一个需要与 C++ 程序（已经编写好的）共享的 perl 脚本。而且我很不擅长编写 C++ 程序。

谁能建议我如何将 C++ 程序合并到 perl 脚本中？并将 perl 脚本的输入提供给 C++ 程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:08:59.257

您可以使用 perl 执行外部脚本

1.  [反引号运算符](http://perldoc.perl.org/perlop.html#Quote-Like-Operators)
2.  [系统功能](http://perldoc.perl.org/functions/system.html)
3.  [执行函数](http://perldoc.perl.org/functions/exec.html)
4.  [管道](http://perldoc.perl.org/functions/pipe.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:40:30.460

看看[Inline::CPP](http://search.cpan.org/~davido/Inline-CPP-0.39/lib/Inline/CPP.pod) - 用 C++ 编写 Perl 子例程和类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T05:07:11.380

有[SWIG](http://www.swig.org/)，您可以使用它从您的 C++ 程序中提供您想与 Perl 共享的类。您可以配置要在某个目标文件中共享的类。

# java - Java同时在线程间访问文件

> ID：11606700
> 
> 赞同：2
> 
> 时间：2012-07-23T04:59:35.317
> 
> 标签：java, file, concurrency, blocking

我对 java 文件锁有一些困惑。

这是我的情况。

1.  每个线程都可以读/写一个文件。
2.  我的文件操作方法可以被多个线程同时调用

而且，我的目标很明确，线程不会并发写入文件。始终允许一个线程写入文件。

我的问题是

1.  如果 FileOutputStream.write() 是线程安全的，我不必在我的代码中放置任何并发机制，因为 write() 处的代码将阻塞，直到释放锁定的文件。但是，当线程打开文件时，我的程序似乎不会阻塞（我不确定）

2.  如果 FileOutputStream.write() 不是线程安全的，我将不得不编写额外的代码来使文件一次只能由线程访问。因此，我使用 FileChannel.lock() 来执行此操作。但是，与 JDK 文档不同的是，它不会阻塞而是抛出 OverlappingFileLockException。

我会很感激你的明确建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:10:40.587

它不是线程安全的，您需要以编程方式确保安全。假设您的应用程序没有主要的性能要求，只需将相关代码放在同步块中。

# android - 如何使用 PreferenceActivity 应用快速滚动？

> ID：11606704
> 
> 赞同：0
> 
> 时间：2012-07-23T04:59:54.300
> 
> 标签：android, layout, setting

我在 PreferenceActivity 中使用**ListPreference**。使用此小部件，是否可以对其应用快速滚动？如果是，我该怎么做？

现在，我被这个屏幕卡住了，没有快速滚动： ![在此处输入图像描述](../Images/f00a6461238c693fd01d78dbfc84f24c.png)

我的 .XML 源是：

 **```
<PreferenceCategory android:title="@string/label_settingfirstcategory" android:key="first_category">
    <ListPreference 
        android:key="updates_interval"
        android:title="@string/label_countrycode"
        android:summary="@string/label_countrycodesummary"
        android:entries="@array/countrycode"
        android:entryValues="@array/countrycode"

    />
</PreferenceCategory> 
```*  *我的活动/java源是：

 **```
public class SettingsActivity extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {        
        super.onCreate(savedInstanceState);        
        addPreferencesFromResource(R.layout.preferences);
    }
} 
```*  ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:11:14.347

你不能以简单的方式做到这一点。默认`ListPreference`不允许快速滚动。

您可以使用自定义对话框创建自己的`ListPreferenceWithFastScrolling`、扩展它`DialogPreference`并覆盖`showDialog`方法，您可以在其中实现您想要的一切。****

# java - 线程间共享hashmap

> ID：11606708
> 
> 赞同：1
> 
> 时间：2012-07-23T05:00:14.897
> 
> 标签：java, multithreading, thread-safety

我有一堂课

```
class A {
  private static HashMap hash;
  public static void setHash(HashMap hash)
  {
    this.hash=hash;
  }
  public static HashMap getHash()
  {
    return hash;
  }
} 
```

我有两个线程线程 A 和线程 B

```
public class ThreadA implements Runnable
{
  private HashMap hash;
  public ThreadA(HashMap hash)
  {
    this.hash = hash
  }
} 
```

同样，对于 ThreadB

在主要课程中，我执行以下操作

```
main()
{
  // inserted some values in hashmap 
  Thread t1 = new Thread(new ThreadA(hash));
  Thread t2 = new Thread(new ThreadB(hash));
} 
```

另一个线程 C 使用 setter 方法`hash`来更改 hashmap。新值没有反映在线程 A 和 B 中。可能是什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:06:23.973

两个`ThreadA`anf在其构造函数中都`ThreadB`接收 a `HashMap`，而不是 class 的对象`A`。

即使您稍后更改`hash`class 对象的属性`A`，这也不会更改`HashMap`两个线程已经接收和存储的引用。

如果要确保两个线程都可以访问 new `HashMap`，要么必须为它们提供新的引用（因此您还需要在其中创建一个 setter 方法`ThreadA`，并在某处存储对该`ThreadA`对象的引用，以便以后可以调用 setter)，或者直接传递 class 的对象`A`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:24:49.010

我以这种方式理解了你的问题..
你有以下事情..

*   A类{静态HashMap哈希，getter和setter}

*   ThreadA {HashMap hash, ThreadA(HashMap hash){this.hash = hash}}
*   线程B ..等等
*   ThreadC {... some where setting of class A} and its not reflect in ThreadA and ThreadB..

如果这是你的问题，那是因为 ThreadA 和 B 已经通过构造函数获得了哈希引用并对其进行处理，在 ThreadC 中设置类 A 的哈希不会影响 ThreadA 和 B 已经设置的哈希。

考虑您遵循了这些步骤

1.  创建了一个哈希 - 假设它指的是地址 1001
2.  传递给 threadA 和 threadB 以便它们具有参考 1001 的散列
3.  在 threadC 中创建了另一个哈希 - 假设它指的是 2001
4.  将 ThreadC 创建的哈希设置为 A 类。即，现在 A 类哈希有引用 2001，仍然 ThreadA 和 ThreadB 持有哈希引用 1001，就是这样

考虑这个解决方案

首先，在 A 类中删除静态关键字并制作“散列”实例变量而不是类变量（我不确定你为什么这样做）并将 A 类对象传递给 threadA 和 threadB 而不是散列

*   A 类 {HashMap 哈希、getter 和 setter}

*   ThreadA {一个对象，

    线程A（一个对象）

    {this.obj = obj}..

    // 使用 classAobj.getHash() 的 getter 访问哈希并使用哈希映射继续处理

    }

*   线程B ..等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:02:19.350

很晚了，现在是星期天......但是你不需要使用静态类吗？

我很确定这会解决它...

# c# - 没有协方差的继承怎么可能是合理的？（C＃）

> ID：11606709
> 
> 赞同：0
> 
> 时间：2012-07-23T05:00:16.453
> 
> 标签：c#, inheritance, covariance

我对 C# 很陌生，但我有很好的 C++ 知识。从 C++ 我习惯了这样的工作：

```
class Base1 {};
class Derived1 : Base1 {};
class Base2 {
   Base1 foo();
};
class Derived2 {
   Derived1 foo();
}; 
```

我在协方差一词下知道。这段代码可能会遗漏一些东西，但我希望你能得到我想说的。当我试图在 C# 中使用覆盖和其他东西生成类似的东西时，编译器抱怨说类型必须相同。像这样：

```
class Base1 {};
class Derived1 : Base1 {};
class Base2 {
   Base1 foo();
};
class Derived2 {
   Base1 foo();
}; 
```

这会导致任何问题吗？当然，由于我是函数 foo 的程序员，我可以保证总会返回一个 Derived1。但是调用我的函数的人并不知道这一点。

我有一个项目，其中有一些管理器类，我想为此使用接口 IManager（这是我自己的类，如果存在任何具有该名称的类，则不是 .NET 中的任何类），因为它们都必须实现一个方法 Load （） 例如。Load() 总是返回一个对象，该对象由该特定 Manager 管理。如果每个 Manager 都实现了 IManager，他们都会得到接口

```
ManagableObject Load(); 
```

那是好是坏？或者更好的是，有什么解决方法吗？

我还读到它适用于模板，但我猜只有这样：

```
List<Base1> myList;
myList.push_back(new Derived1()); 
```

或者我可以在 Base1 中使用 List 作为返回类型，在 Derived2 类中使用 List 吗？那也可以。

谢谢和最好的问候，Expecto

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:16:41.987

您需要使用 new 关键字声明您的方法。

```
 class Derived2 {
  new Derived1 foo();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:48:47.550

这就是我的意思：[C# 是否支持返回类型协方差？](https://stackoverflow.com/questions/5709034/does-c-sharp-support-return-type-covariance)但我不知道要寻找术语返回类型协方差

# regex - 用 sed 去除杂物线

> ID：11606711
> 
> 赞同：2
> 
> 时间：2012-07-23T05:00:48.110
> 
> 标签：regex, sed

您如何编写一个 sed 命令来删除包含多个正则表达式中的任何一个的行？

例如，我希望 sed 从文档中删除“/./.::”、“::”、“::foo *”*和“^^bar”。

截至目前，当我跑步时

```
 sed -ir '/ "//.//. ::|:: _|::foo_|^^bar" /d' text.file 
```

响应是“未知命令'/'”。

正则表达式周围有或没有内部 "s 都是这种情况：

```
 sed -ir '/ //.//. ::|:: _|::foo_|^^bar /d' text.file 
```

另外，如果我在“/”之前删除了转义（/），例如：

```
 sed -ir '/ "/./. ::|:: _|::foo_|^^bar" /d' text.file 
```

返回变为“未知命令'。'”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:38:54.760

您应该使用转义符号：`\`
并且无需引用模式匹配或添加下划线，只需尝试：

```
sed -i -r '/\/.\/. ::|:: |::foo|\^\^bar/d' file.txt 
```

此外，您可能需要考虑转义`.`符号。否则该点将匹配任何字符。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:16:45.927

```
sed '{
s/::foo_//
s/\^\^bar//
s!/./. ::!!
s/:: _//
}' input_file 
```

要完全删除包含模式的行：

```
sed '{
/::foo_/d
/\^\^bar/d
\!/./. ::!d
/:: _/d
}' input_file 
```

# netbeans - 在 NetBeans 7.1.2 中获取命令行参数

> ID：11606712
> 
> 赞同：-1
> 
> 时间：2012-07-23T05:00:48.133
> 
> 标签：netbeans, command-line-arguments

我正在使用 NetBeans 7.1.2。我的错误是：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
at javaapplication1.JavaApplication1.main(JavaApplication1.java:17)
Java Result: 1 
```

我的程序是：

```
package javaapplication1;

/**
 *
 * @author Administrator
 */
public class JavaApplication1 {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] ar) {
        int a=Integer.parseInt(ar[1]);

        System.out.println(a);
        // TODO: Code application logic here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:08:13.943

仅供参考，第一个参数是`ar[0]`，例如在下面的命令行中`ar[0]`是`"123"`：

```
java JavaApplication1 123 
```

有关 Java 命令行参数的更多信息，请参阅[此网页](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)。

# bash - Bash将双引号转换为单引号

> ID：11606714
> 
> 赞同：2
> 
> 时间：2012-07-23T05:01:23.220
> 
> 标签：bash

我的 bash 脚本有问题，这让我陷入困境。我有一段代码应该引入一些文件：

```
if [[ $FILENODE == null ]]
then
    cp "/home/dash/reference/hg18_bowtie_build/hg18.fa*" "$JOBDIR"
    cp "$IN" "$JOBDIR"
else
    echo "Copying files from node$FILENODE"
    rcp "node$FILENODE-ib:$JOBDIR/hg18.fa*" "node$FILENODE-ib:$JOBDIR/$IN" "$JOBDIR"
fi 
```

通常我们会陷入条件的第一部分，因此 cp 命令应该扩展第一个参数中的通配符。我知道我需要双引号我的论点以确保它们被扩展。但是，当我使用 bash -x 执行此脚本时，我看到的是：

```
+ cp '/home/dash/reference/hg18_bowtie_build/hg18.fa*' /usr/tmp/707361.master.cl.osumc.edu
cp: cannot stat `/home/dash/reference/hg18_bowtie_build/hg18.fa*': No such file or directory
+ cp '*.sort.bam' /usr/tmp/707361.master.cl.osumc.edu
cp: cannot stat `*.sort.bam': No such file or directory 
```

出于某种原因，bash 似乎不仅忽略了我的双引号，而且将它们变成了单引号。变量正在扩展，但通配符没有。如果有人能解释这里发生了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:03:55.283

如果要通配，则不应引用文件路径：

```
cp /home/dash/reference/hg18_bowtie_build/hg18.fa* "$JOBDIR" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T05:04:19.757

双引号允许参数扩展，*但它们仍然抑制全局扩展*。将 glob 通配符移到引号之外。

```
cp "/home/dash/reference/hg18_bowtie_build/hg18.fa"* "$JOBDIR" 
```

至于第二个，创建一个数组。

```
files=(foo*)
cp "${files[@]}" "$bar" 
```

# c# - 两个模拟器之间通过服务器 pc 作为中间人进行通信

> ID：11606716
> 
> 赞同：0
> 
> 时间：2012-07-23T05:02:09.903
> 
> 标签：c#, android, .net

我想建立一个应用程序，它是两个模拟器之间的通信网络。我已经将模拟器与服务器连接起来。

现在我想通过 PC 的服务器（C#）连接两个模拟器。就像我们通过移动网络发送短信一样。

我需要指导才能开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:10:29.743

我不确定您的要求是什么以及您将在多大程度上实施最佳实践，但是，根据我在类似应用程序上的经验，这里有一些需要考虑的要点，只是为了清楚地表明我们开发了一个解决方案，其中许多 Android 手机将连接到服务器以发送/接收数据。

Web 服务是要走的路，这就是 Web 服务的意义所在，我们为连接到服务器的应用程序创建了基于 WCF 的 API。

您正在使用 Android 上的异构系统 Java，服务器上的 C#，考虑在服务器上创建基于 REST 的 API 以进行数据传输

通过这些来了解需要在服务器上完成的工作......

[http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide)

[http://msdn.microsoft.com/en-us/library/dd203052.aspx](http://msdn.microsoft.com/en-us/library/dd203052.aspx)

这对于需要在 Android 端完成的操作... [http://docs.xamarin.com/android/tutorials/sumption_web_services](http://docs.xamarin.com/android/tutorials/consuming_web_services)

希望有帮助....

# objective-c - 无法从另一个 viewController 访问变量

> ID：11606718
> 
> 赞同：0
> 
> 时间：2012-07-23T05:02:29.060
> 
> 标签：objective-c, ios, xcode

我有一个名为“setTimeViewController”的视图控制器。我有另一个名为“setEventViewController”的视图控制器。用户点击 setTimeViewController 中表格中的一行，然后被发送到仅包含 UIPickerView 和保存按钮的 setEventViewController。当用户点击保存按钮时，它会将他们带回 setTimeViewController。

我希望从 setEventViewController 的选择器中选择的值能够从 setTimeViewController 访问，但返回（null）给我。我在 .h setEventViewController 中声明了一个 NSString *theVariable，这是我试图从另一个视图控制器检索并保留其属性的变量，但它仍然为空。

我已经从 setEventViewController 中的 viewDidDisappear 进行了测试（NSLog 变量），以查看当视图消失时它是否为空，但它可以正常工作。

这是我的代码，如果有人可以帮助我，我将永远感激不尽。谢谢！

**setEventViewController.m**

```
- (void)pickerView:(UIPickerView *)pickerView 
  didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

theVariable= [currentItemsInPicker objectAtIndex:row];  
//[theVariable retain]; //Tried this as well but did not work
} 

-(IBAction) Save
{
//simply dismisses the view controller back to setTimeViewController. Have also tried to   set another NSString equal to theVariable but this did not work.
[self.navigationController popViewControllerAnimated:YES];
} 
```

**设置时间视图控制器**

```
 -(void) retrieveTheEvent
 {
  setEventViewController *eventViewController= [[setEventViewController alloc] init];
  NSString *testString= eventViewController.theVariable;

  NSLog (@"the event is %@", testString); //shows null
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:04:37.123

如果我没记错，您将在retrieveTheEvent 中分配不同的setEventViewController 对象。您正面临这个问题，因为这个新分配的对象与您推送的不同。

而不是使用您推送到导航控制器的相同对象。

一种解决方案：为您的 setEventViewController 创建全局对象（即我的意思是为它创建 iVar）并使用相同的引用在 didSelectRow 中推送视图控制器。并使用相同的 iVar 访问您的 theVariable。

在 setTimeViewController.h 中添加以下代码

```
setEventViewController *eventViewController; 
```

还请为其创建属性。

现在在 setTimeViewController.m 现在使用 setEventViewController 的现有引用来推送视图控制器。喜欢

```
eventViewController= [[setEventViewController alloc] init];
[self.navigationController pushViewController: eventViewController animated:YES]; 
```

改变这个方法
`-(void)retrieveTheEvent  {   NSString *testString= eventViewController.theVariable;   NSLog (@"the event is %@", testString); //shows null   }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:11:48.057

在 Armaan 的列表中添加另一个解决方案。

在 setEventViewController.m 中创建一个委托，并在调用之前将“theVariable”传递给 setTimeViewController.m

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T07:13:31.447

我举个例子。

**setEventViewController.h**

```
@protocol setEventViewControllerDelegate;

@interface setEventViewController : UIViewController 
{
    NSString* theVariable;
    id<setEventViewControllerDelegate> delegate;
}    
@end

@protocol setEventViewControllerDelegate <NSObject>    
@optional    
-(void)theVariableChanged:(NSString*)theNewValue;
@end 
```

**setEventViewController.m**

@synthesize 代表；

```
- (void)pickerView:(UIPickerView *)pickerView 
  didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{    
    theVariable= [currentItemsInPicker objectAtIndex:row];

    // this is where the new value is passed to setTimeViewController
    if(delegate && [delegate respondsToSelector:@selector(theVariableChanged)])
    {
        [delegate theVariableChanged:theVariable];
    }
} 

-(IBAction) Save
{
    [self.navigationController popViewControllerAnimated:YES];
}

-(void) dealloc
{
    // very important
    self.delegate = nil;
} 
```

**setTimeViewController.h**

```
#import "setEventViewController.h"

@interface setTimeViewController : UIViewController <setEventViewControllerDelegate>
{
// your members
}
@end 
```

**设置时间视图控制器.m**

```
-(void)openSetEventView
{
    setEventViewController *eventViewController= [[setEventViewController alloc] init];

    // set the delegate
    eventViewController.delegate = self;
    [self.navigationController pushViewController: eventViewController animated:YES];
    [eventViewController release];
}

// get the new value here
-(void)theVariableChanged:(NSString*)theNewValue
{
      NSLog (@"the event is %@", theNewValue);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T15:29:35.387

看看单身人士，

做这样的事情时，他们可以成为你最好的朋友。

[单身人士链接在这里](http://www.galloway.me.uk/tutorials/singleton-classes/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-08T06:45:24.663

我尝试了所有不同的建议，将 NSString 从一个视图控制器传递到另一个视图控制器，包括客户初始化方法，并将属性更改为强、保留，它们都不适合我。

最后单例在整个项目中共享数据解决了这个问题。[http://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

谢谢@大卫埃文斯

# json - 从谷歌应用引擎数据存储中检索 json

> ID：11606725
> 
> 赞同：3
> 
> 时间：2012-07-23T05:03:27.280
> 
> 标签：json, google-app-engine, datastore

我在 GAE 数据存储中存储了一些简单的数据。现在我想把它拉出来，但我想用 JSON 格式的结果来做。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:17:13.747

您可以先将数据存储模型转换为字典，然后使用 simplejson (python 2.5) 或 json (python 2.7) 包将字典转换为 json。通常这是处理程序的最后一行的样子：

```
self.response.out.write(simplejson.dumps(some_datastore_entity.to_dict())) 
```

数据存储区的新 ndb 接口默认提供 to_dict 方法。你可以在[这里查看](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_to_dict)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:10:02.690

```
class Handler(webapp2.RequestHandler):
    def get(self):
        <do your GQLQuery here>
        self.response.headers['Content-Type'] = 'application/json'
        self.response.body = json.dumps(<your data in dict or dict list>)
        self.response.set_status(200) 
```

# iphone - iOS JSON 解析器：如果两个键具有相同的名称会发生 什么？

> ID：11606727
> 
> 赞同：1
> 
> 时间：2012-07-23T05:03:45.953
> 
> 标签：iphone, ios, json, parsing, restkit

如果服务器返回：

```
{
    "repositories":
    {
        "xmlns":{...}
        "repository":{...}
        "repository":{...}
    }
} 
```

那么它是一个有效的 JSON 吗？我在[This JSON Parser](http://json.parser.online.fr/)中对其进行了测试，它工作正常，但我想知道什么时候我使用一些解析器来解析它并获取一个 NSDictionary，然后对于关键的“存储库”，我如何获取这两个存储库？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:15:20.727

那个 JSON 解析器不好，最后一个值会覆盖第一个。改用[JSONLint](http://jsonlint.com/)来验证您的 JSON，您将看到结果。

# width - 在不加载的情况下获取 Corona 图像大小

> ID：11606729
> 
> 赞同：4
> 
> 时间：2012-07-23T05:03:51.427
> 
> 标签：width, coronasdk

我想知道如何使用 Corona 获取图像大小而不加载它们并调用 obj.width。

有办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T05:07:44.797

如果您的图像是PNG，是的！ [http://developer.coronalabs.com/forum/2012/05/16/pnglib-extract-data-png-files-width-height-color-depth-etc](http://developer.coronalabs.com/forum/2012/05/16/pnglib-extract-data-png-files-width-height-color-depth-etc)

即使对于 jpeg 图像，我认为有人提出了一种方法。

# c++ - 打开 Cv 渔脸

> ID：11606737
> 
> 赞同：5
> 
> 时间：2012-07-23T05:04:35.443
> 
> 标签：c++, windows, visual-studio-2010, opencv, compiler-errors

我有这个问题，

当我使用 vs2010（调试）（打开 cv 2.4.0）运行时，facerec_demo.cpp 给了我程序这个错误

> OpenCV Error: Image step is wrong (The matrix is not Continuous, 因此它的行数不能改变) in unknown function, file ......\src\opencv\modul es\core>\src\matrix. cpp，第 801 行

这个错误让我在 facerec.cpp
**(Fisherfaces::train(InputArray src, InputArray _lbls)**

```
Mat data = asRowMatrix(src, CV_64FC1); <-- this gets a exeption, not handled. 
```

和 ai 在 pgm img 数据库中使用，这是我原来的 *facerec_demo.cpp* 文件

```
#include "stdafx.h" 
#include <opencv2/opencv.hpp>

#include <iostream>
#include <fstream>

#include <vector>
#include <string>
#include <sstream>

using namespace cv;
using namespace std;

vector<string> split_at_commas(const string& row)
{
  vector<string> res;
  istringstream buf(row);
  string s;
  while (getline(buf, s, ';'))
    res.push_back(s);
  return res;
}

Mat toGrayscale(InputArray _src) {
    Mat src = _src.getMat();
    // only allow one channel
    if(src.channels() != 1)
        CV_Error(CV_StsBadArg, "Only Matrices with one channel are supported");
    // create and return normalized image
    Mat dst;
    cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC1);
    return dst;
}

void read_csv(const string& filename, vector<Mat>& images, vector<int>& labels, char separator = ';') {
    //std::ifstream file(filename.c_str(), ifstream::in);
    std::ifstream file(_T("D:\\Users\\PC ACER\\Documents\\mycsv4.csv"));
    if (!file)
        throw std::exception();
    string line="", path="", classlabel="";
    while (getline(file, line)) {
        //vector<string> values = split_at_commas(line);
        stringstream liness(line);
        getline(liness, path, ';');
        getline(liness, classlabel);
        images.push_back(imread(path, 0));
        labels.push_back(atoi(classlabel.c_str()));
    }
}

int main(int argc, const char *argv[]) {
    // check for command line arguments
    if (argc != 2) {
        cout << "usage: " << argv[0] << " <csv.ext>" << endl;
        exit(1);
    }
    // path to your CSV
    string fn_csv = string(argv[1]);
    // images and corresponding labels
    vector<Mat> images;
    vector<int> labels;
    // read in the data
    try {
        read_csv(fn_csv, images, labels);
    } catch (exception&) {
        cerr << "Error opening file \"" << fn_csv << "\"." << endl;
        exit(1);
    }
    // get width and height
    //int width = images[0].cols;
    int height = images[0].rows;
    // get test instances
    Mat testSample = images[images.size() - 1];
    int testLabel = labels[labels.size() - 1];
    // ... and delete last element
    images.pop_back();
    labels.pop_back();
    // build the Fisherfaces model
    Ptr<FaceRecognizer> model = createFisherFaceRecognizer();
    model->train(images, labels);
    // test model
    int predicted = model->predict(testSample);
    cout << "predicted class = " << predicted << endl;
    cout << "actual class = " << testLabel << endl;
    // get the eigenvectors
    Mat W = model->eigenvectors();
    // show first 10 fisherfaces
    for (int i = 0; i < min(10, W.cols); i++) {
        // get eigenvector #i
        Mat ev = W.col(i).clone();
    // reshape to original size AND normalize between [0...255]
    Mat grayscale = toGrayscale(ev.reshape(1, height));
        // show image (with Jet colormap)
    Mat cgrayscale;
        applyColorMap(grayscale, cgrayscale, COLORMAP_JET);
        imshow(format("%d", i), cgrayscale);
    }
    waitKey(0);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:18:28.303

我看到您使用的是 OpenCV 2.4.0。作为开发人员，我承认混乱是我的错：当时我没有彻底检查传递给训练方法的输入数据，所以传递错误对齐数据的人会收到像你这样的错误消息。您看到的错误很可能会发生，因为您的训练图像大小不相等。这对于 Eigenfaces 和 Fisherfaces 算法是必需的（不适用于局部二进制模式直方图）。OpenCV 2.4.0 只是尝试将数据重塑为矩阵，并因您看到的错误消息而崩溃；OpenCV 2.4.2 改为检查（在训练之前）输入数据是否正确对齐并引发有意义的异常......带有非常清晰的消息。

这篇文章假设它也可能是由于链接了 OpenCV 库：

*   [在 Fisherfaces.train() 方法中出现 OpenCV 错误“图像步骤错误”](https://stackoverflow.com/questions/10961586/getting-opencv-error-image-step-is-wrong-in-fisherfaces-train-method)

如果它没有链接库，则可能是由于图像大小。调整训练图像的大小，可以通过[cv::resize](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#resize) OpenCV 轻松完成：

*   [http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#resize](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#resize)

但是您可能应该考虑切换到 OpenCV 2.4.2，其中添加了所有这些：

*   [http://opencv.org/opencv-v2-4-2-released.html](http://opencv.org/opencv-v2-4-2-released.html)

此版本还附带大量文档，位于：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)

但是，如果您无法更改为 OpenCV 2.4.2 并且您需要继续使用 OpenCV 2.4.0，那么您也可以使用 libfacerec：

*   [https://github.com/bytefish/libfacerec](https://github.com/bytefish/libfacerec)

这是已合并到 OpenCV 中的项目。我确保它适用于 OpenCV 2.4.0，它会为您提供与 OpenCV 2.4.2 版本完全相同的界面。因此，一旦您想更新到 OpenCV 2.4.2，您只需切换包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T18:42:33.450

我遇到了同样的 OpenCv 错误，我尝试了在这里找到的所有帮助，但它仍然给了我一个异常（异常发生在 .Predict() 语句上）。

问题在于图像的大小。图像的大小必须小于 100 像素（<100 像素）（不确定是否正好小于 100，也许 100 仍然有效）。

我将我的图片大小从 150:150 更改为 80:80 并且可以正常工作！

希望我能帮助别人，因为这是令人讨厌的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T03:14:35.067

我在另一篇文章中回答了这个问题，但我想确保寻求此错误帮助的人一定能找到答案。

当你制作模型时

```
Ptr<FaceRecognizer> model = createFisherFaceRecognizer(); 
```

你需要传递两个参数

```
createFisherFaceRecognizer(int num_components=0, double threshold=DBL_MAX); 
```

[此页面包含有关 createFisherFaceRecognizer 如何工作的更多信息](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html)

# ruby-on-rails-3 - Nginx 多个位置与 rails 静态资产

> ID：11606740
> 
> 赞同：0
> 
> 时间：2012-07-23T05:04:38.980
> 
> 标签：ruby-on-rails-3, nginx, capistrano, unicorn

我是使用 nginx 设置自己的服务器的新手，所以请原谅任何无知。我可能只是使用了错误的搜索词来找到我的问题的答案。

无论如何，我目前在机架空间的 VPS 上使用 Rails 3、Nginx 和 Unicorn。在我的 Rails 应用程序中，我在 public/ 中有大约 500mb 的文件，我想使用 Nginx 来提供这些文件。通常这只是：

```
server {
  listen 80 default deferred;
  # server_name example.com;
  root /home/<my_user>/apps/<my_app>/current/public;
  ...
} 
```

如果我将 500mb 公共添加到 git 存储库，然后使用 capistrano 部署，我可以完成这项工作，但我不希望所有这些文件都在我的 git 存储库中。将它们存储在那里没有意义，但是如果我删除它们，那么我每次部署时都必须手动将它们上传到服务器上的公用文件夹。

有没有办法让 Nginx 指向第二个资产文件夹以供服务器使用？我尝试了以下方法：

```
location /static {
  gzip on;
  alias /home/deployer/static/;
} 
```

我没有任何运气让它工作（试图通过 url.com/static/... 访问文件）有人知道我做错了什么吗？

旁注：所有显示的代码都在我的 config/nginx.conf 文件中，它应该通过我的 deploy.rb 中的这一行覆盖设置：

```
sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:29:40.767

```
location /static/ {
    root /home/deployer;
} 
```

*   [http://nginx.org/r/alias](http://nginx.org/r/alias)
*   [http://nginx.org/r/root](http://nginx.org/r/root)

# symfony - 在 Symfony2 中删除/取消设置表单字段

> ID：11606742
> 
> 赞同：5
> 
> 时间：2012-07-23T05:04:53.737
> 
> 标签：symfony, symfony-forms, fosuserbundle

我正在扩展 FosUserBundle 注册表单。我需要删除/取消设置用户名字段（因为我使用电子邮件作为用户名）。

有没有办法从我正在扩展的表单中删除字段？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-23T17:00:39.653

如果您想删除/取消设置扩展 FOSUser 的表单类型中的某些字段，您可以执行以下操作：

```
public function buildForm(FormBuilder $builder, array $options) 
{
    parent::buildForm($builder, $options);        

    $builder->remove('username');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T13:48:28.607

例如，如果要覆盖约束的属性，可以执行以下操作：

```
<?php

namespace Acme\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;

/**
 * User
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Acme\UserBundle\Entity\UserRepository")
 * @ORM\AttributeOverrides({
 *      @ORM\AttributeOverride(name="username", column=@ORM\Column(nullable = true, unique = false ))
 *   })
 */
class User extends BaseUser {

    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
} 
```

# jquery - 有没有一种方法可以使用 jQuery 一次在多个元素上设置属性？

> ID：11606747
> 
> 赞同：0
> 
> 时间：2012-07-23T05:05:56.673
> 
> 标签：jquery

我需要执行以下操作：

```
 $("#deleteLink").attr('data-row', $(this).attr('id'));
    $("#editLink").attr('data-row', $(this).attr('id'));
    $("#deleteLink").attr('data-href', '/Admin/Contents/Delete' + params);
    $("#editLink").attr('data-href', '/Admin/Contents/Edit' + params); 
```

有没有办法可以将这些变量的设置与 jQuery 结合起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:55:17.240

您的问题并不清楚`this`您在哪里使用过`$(this).attr("id")`。如果是*其他*元素，例如，因为您显示的四行在其他元素的单击处理程序或其他内容中，那么在我看来，最有效且易于阅读的方法是这样的：

```
$("#deleteLink").attr({'data-row' : this.id,
                       'data-href' : '/Admin/Contents/Delete' + params});
$("#editLink").attr({'data-row' : this.id,
                     'data-href' : '/Admin/Contents/Edit' + params}); 
```

也就是说，使用 that 的语法`.attr()`可以让您传入一个映射以一次在同一个元素上设置多个属性值，但一次只执行一个链接元素，因为它们将设置不同的`data-href`值。

但是，这实际上并不能回答您关于一次设置多个元素属性的问题，您可以这样做：

```
$("#deleteLink,#editLink").attr('data-row', this.id)
                          .attr('data-href', function(i,a) {
                              var action = this.id.split("Link")[0];
                              return '/Admin/Contents/' +
                                     action.charAt(0).toUpperCase() +
                                     action.substr(1) + params;
                           }); 
```

第一行创建一个包含两个链接元素的 jQuery 对象，并使用`.attr('data-row', this.id)`将它们设置为具有相同的`data-row`属性，等于任何值`this.id`。（我仍然假设`this`是其他一些元素。）

第二行*链接*另一个调用`.attr()`（以避免再次调用该`$()`函数以再次选择相同的元素），这一次使用`.attr()`传递回调函数的语法 - 为函数内正在处理的每个元素调用此函数`this`是被修改的元素，并且属性设置为您返回的任何内容。

[有关该方法的更多信息在`.attr()`这里。](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:08:59.463

```
$("#deleteLink,#editLink").each(function(){
    $(this).attr('data-row', this.id);
    $(this).attr('data-href', '/Admin/Contents/'+this.id.substr(1).split("Link")[0] + params);
  }); 
```

或 use.data()

```
$("#deleteLink,#editLink").each(function(){
    $(this).data('row',this.id);
    $(this).data('href', '/Admin/Contents/'+this.id.substr(1).split("Link")[0] + params);
  }); 
```

# mysql - 何时从 MYSQL DB for Codeigniter 检索数据

> ID：11606748
> 
> 赞同：0
> 
> 时间：2012-07-23T05:06:09.273
> 
> 标签：mysql, codeigniter

我在 codeigniter 应用程序中从 MYSQL 数据库传输大量数据。

想知道从数据库中提取数据库的过程中的哪个时间点。

```
1) $query = $this->db->query("Select * from table");
2) $query->num_rows()
3) $query->result(); 
```

我知道根据文档“查询（）函数返回一个数据库结果对象”但是这个对象是否包含实际记录或者当我们调用结果时它是从数据库中获取的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:48:02.363

我想您是在询问 MySQL 和 PHP 之间何时发生实际数据传输。

数据在命令后*立即*`query`从服务器传输，然后存储在内部，因此您可以稍后获取行。如果您考虑一下，这是非常有意义的，因为您不希望每行的获取都被阻塞并且您的应用程序等待网络流量。

您可以通过在查询和获取之间设置睡眠并运行 tcpdump/wireshark 来捕获网络流量来验证这一点（我刚刚做到了）。

注意：codeigniter DB 类只是内置 mysql 驱动程序的包装，所以这不是 codeigniter 特定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:26:34.230

根据任何数据库连接的实际实现，查询语句实际上只获取资源链接。

资源描述符将提供详细信息，例如返回/受影响的行数。

但是，驱动程序维护了一个内部指针，该指针指向链接资源中的一条记录。

当通过 result() 访问记录时，会获取当前记录并在内部修改指针。

因此，它`$query->result()`是实际获取数据的时间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T07:35:32.277

```
 $query = $this->db->query("Select * from table"); 
```

这将为您提供资源 ID，如果您想要来自 db 的所有数据，那么您可以编写：-

```
$query = "SELECT * FROM table";

$result = $this->db->($query)->result_array(); 
```

当你想查看你的结果时，你可以这样做 -

```
print_r($result); 
```

所以结论是`result_array()`真正从数据库中获取数据的

# java - 如何在java中添加受保护的变量

> ID：11606750
> 
> 赞同：1
> 
> 时间：2012-07-23T05:06:33.537
> 
> 标签：java, java-7

我需要在我拥有的产品类文件中添加一个受保护的变量（我已附加该文件的当前代码）。我需要将 count 变量的访问修饰符从 public 更改为 protected。我怎么做？！我需要在下面的代码中进行哪些更改以添加受保护的变量：

```
import java.text.NumberFormat;

public class Product
{
    private String code;
    private String description;
    private double price;
    public static int count = 0;

    public Product()
    {
        code = "";
        description = "";
        price = 0;
    }

    public void setCode(String code)
    {
        this.code = code;
    }

    public String getCode(){
        return code;
    }

    public void setDescription(String description)
    {
        this.description = description;
    }

    public String getDescription()
    {
        return description;
    }

    public void setPrice(double price)
    {
        this.price = price;
    }

    public double getPrice()
    {
        return price;
    }

    public String getFormattedPrice()
    {
        NumberFormat currency = NumberFormat.getCurrencyInstance();
        return currency.format(price);
    }

    @Override
    public String toString()
    {
        return "Code:        " + code + "\n" +
               "Description: " + description + "\n" +
               "Price:       " + this.getFormattedPrice() + "\n";
    }

    public static int getCount()
    {
        return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:13:55.033

您现在拥有的变量：

```
private String code;
private String description;
private double price;
public static int count = 0; 
```

如果您希望 count 变量受到保护而不是 public，它应该是：

```
private String code;
private String description;
private double price;
protected static int count = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:09:20.493

正如您已声明为 public 一样，您可以通过使用关键字`count`以同样的方式将其更改为受保护：`protected`

```
protected static int count = 0; 
```

请注意，这将阻止其他不扩展`Product`的包中的类直接访问`count`。但是，他们仍然可以从该`getCount()`方法中获取其值，因为这是公开的。如果您希望将其更改为受保护，只需更改关键字即可再次执行此操作：

```
protected static int getCount()
{
    return count;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T05:14:47.660

尝试这个

```
 public static void main(String[] args)
  {
     Product p=new Product(); 
     Class productClass = p.getClass(); 
     Field f = productClass.getDeclaredField("count"); 
     f.setAccessible(false); //Make the variable non-accessible
  } 
```

# iphone - 在 iphone 应用程序中单击按钮时未显示 TableView

> ID：11606753
> 
> 赞同：0
> 
> 时间：2012-07-23T05:06:54.350
> 
> 标签：iphone, ios, xcode

我在 iphone 应用程序中创建下拉列表我已将按钮放在单击 tableview 打开和隐藏但它不显示 table view 的顶部

我已按照以下链接的教程进行操作

[http://iphone-rahulvarma.blogspot.com/2011/06/customized-drop-down-list-in-iphone.html](http://iphone-rahulvarma.blogspot.com/2011/06/customized-drop-down-list-in-iphone.html)

```
 IBOutlet UITableView *tblSimpleTable;
IBOutlet UIButton *btn;
IBOutlet UIImageView *i;
BOOL flag;
NSArray *arryData;

   }
   @property(nonatomic,retain)IBOutlet UIButton *btn;
   @property(nonatomic,retain)IBOutlet UITableView *tblSimpleTable;
   @property(nonatomic,retain)IBOutlet UIImageView *i;
   @property(nonatomic,retain)NSArray *arryData;

  -(IBAction)btnClicked;

      arryData = [[NSArray alloc] initWithObjects:@"",@"iPhone",@"iPod",@"MacBook",@"MacBook Pro",nil];
flag=1;
tblSimpleTable.hidden=YES;
btn.layer.cornerRadius=8;
tblSimpleTable.layer.cornerRadius=8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:30:23.143

查看此代码：[NSNestedTable](https://github.com/serverdensity/ios-SDNestedTable)

# java - 在 Eclipse 中设置安全策略文件

> ID：11606754
> 
> 赞同：2
> 
> 时间：2012-07-23T05:07:01.087
> 
> 标签：java, eclipse, security

根据我在互联网上[搜索](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed2.html)的了解，如果我想运行一个带有安全策略的 java 程序，我必须输入类似的内容

`java -Djava.security.policy=java.policy MainClass`

`java.policy`描述安全策略的文件在哪里。我如何在 Eclipse 中做类似的事情？我尝试在运行配置`-Djava.security.policy=java.policy`下添加`Arguments`，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:44:52.690

您必须将其添加到 VM 参数，而不是程序参数。

另一个错误可能是路径。您是否使用了文件的相对路径或绝对路径？如果是相对的，您应该考虑运行配置将项目文件夹作为根文件夹，而不是源文件夹。因此，如果您的策略文件位于子文件夹中，则必须提及。

# c# - 如何在 c#/xaml Metro 应用程序中标记时间线时将书签放在滑块上

> ID：11606755
> 
> 赞同：2
> 
> 时间：2012-07-23T05:07:08.133
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我已经检查了 [这个](http://code.msdn.microsoft.com/windowsapps/Basic-Media-Playback-003619be)样本。它向我展示了 TimeLineMarker API。现在，当我按下按钮“添加标记”时，标记被添加并且文本块显示标记，它被添加的时间。现在我想以任何形状或其他任何符号的形式将这些标记显示到滑块控件上，所以当我想直接进入标记时，我可以直接单击滑块。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:14:54.763

终于从[MSDN](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/6d011897-6145-40dc-be8e-b0b6e88eec09/)得到答案，谢谢马特

XAML

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <StackPanel VerticalAlignment="Center">
         <Grid>
            <Canvas x:Name="MyCanvas" Width="{Binding ElementName=MySlider, Path=ActualWidth}" Height="{Binding ElementName=MySlider, Path=ActualHeight}" Background="BlueViolet"/>
             <Slider x:Name="MySlider" Orientation="Horizontal" Width="750" Height="50" Loaded="MySlider_Loaded_1"/>
         </Grid>
         <Button Content="Set marker" Click="Button_Click_1"/>
     </StackPanel>
</Grid> 
```

C＃

```
int UniqueId = 0;
List<CustomTick> MyCustomTicks = new List<CustomTick>();
Thumb MySliderThumb;
Point ThumbCurrentPoint;
private void MySlider_Loaded_1(object sender, RoutedEventArgs e)
{
    FrameworkElement templateRoot = VisualTreeHelper.GetChild((Slider)sender, 0) as FrameworkElement;
    MySliderThumb = templateRoot.FindName("HorizontalThumb") as Thumb;
}
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    MySliderThumb.TransformToVisual(MyCanvas).TryTransform(new Point(0, 0), out ThumbCurrentPoint);
    CustomTick MyCustomTick = new CustomTick();
    MyCustomTick.X = ThumbCurrentPoint.X;
    MyCustomTick.Y = ThumbCurrentPoint.Y;
    MyCustomTick.Value = MySlider.Value;
    MyCustomTick.ID = UniqueId++;
    MyCustomTicks.Add(MyCustomTick);
    Windows.UI.Xaml.Shapes.Rectangle MyRectangle = new Windows.UI.Xaml.Shapes.Rectangle();
    MyRectangle.Name = MyCustomTick.ID.ToString();
    MyRectangle.Fill = new SolidColorBrush(Windows.UI.Colors.Red);
    MyRectangle.Width = MySliderThumb.ActualWidth;
    MyRectangle.Height = MySliderThumb.ActualHeight;
    MyRectangle.PointerPressed += MyRectangle_PointerPressed;
    MyCanvas.Children.Add(MyRectangle);
    Canvas.SetTop(MyRectangle, MyCustomTick.Y - MyRectangle.Height );
    Canvas.SetLeft(MyRectangle, MyCustomTick.X);
}
void MyRectangle_PointerPressed(object sender, PointerRoutedEventArgs e)
{
    Windows.UI.Xaml.Shapes.Rectangle MyRectangle = sender as Windows.UI.Xaml.Shapes.Rectangle;
    CustomTick MyCustomTick = new CustomTick();
    foreach (CustomTick CT in MyCustomTicks)
    {
if (CT.ID.ToString() == MyRectangle.Name)
{
    MyCustomTick = CT;
    break;
}
    }
    MySlider.Value = MyCustomTick.Value;
}

List<CustomTick> MyTicks = new System.Collections.Generic.List<CustomTick>();
private class CustomTick
{
    public double X;
    public double Y;
    public double Value;
    public int ID;
} 
```

# tridion - 在自定义按钮单击时获取所选项目的 tcmid

> ID：11606762
> 
> 赞同：-1
> 
> 时间：2012-07-23T05:08:11.487
> 
> 标签：tridion, tridion-2011

我在功能区中有一个自定义按钮。

当我在 tridion 中选择任何项目（组件或页面）并单击自定义按钮时，我应该能够获得`tcmid`所选项目的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T07:24:54.370

```
var selectedID = selection.getItem(0); 
```

在 _execute 方法中，来自我在[http://www.curlette.com/?p=279的教程](http://www.curlette.com/?p=279)

```
Extensions.WhoDidIt.prototype._execute = function WhoDidIt$_execute(selection, pipeline) { 
```

请花一些时间（大约 1 周）查看现有示例和解决方案，包括我的 GUI 扩展教程。在快速发布到这里之前，请务必努力并亲自尝试 - 您将了解更多信息并有更深入的了解。

GUI 扩展示例：

*   [http://jaimesantosalcon.blogspot.com/](http://jaimesantosalcon.blogspot.com/)
*   [http://tridionfanboy.wordpress.com/](http://tridionfanboy.wordpress.com/)
*   [http://albertromkes.com/](http://albertromkes.com/)
*   [http://yoavniran.wordpress.com/](http://yoavniran.wordpress.com/)
*   [http://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx](http://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx)
*   [http://sdltridionworld.com/community/2011_extensions/linkedin.aspx](http://sdltridionworld.com/community/2011_extensions/linkedin.aspx)
*   [http://www.curlette.com/](http://www.curlette.com/)

# twitter-bootstrap - Twitter Bootstrap typeahead 不包括返回的数组

> ID：11606766
> 
> 赞同：0
> 
> 时间：2012-07-23T05:08:49.523
> 
> 标签：twitter-bootstrap

我正在使用在这里找到的修改后的 Twitter Bootstrap 预输入。

[https://gist.github.com/2935906](https://gist.github.com/2935906)

我不明白为什么下面的代码不起作用。如果我使用 testArr 它工作正常，但是一旦我返回我从一些谷歌地图代码创建的 resultsArr 它就会失败。console.log(resultsArr) 表明一切都很好。想法？

```
var testArr=new Array("One","Two","Three");

$('#map-query').typeahead({
    source: function(typeahead, query) {

        var resultsArr = new Array();

        geocoder.geocode({ 'address': query }, function (results, status) {

              for(i=0; i < results.length; i++) {
                  if(results[i].formatted_address) {
                        resultsArr[i] = results[i].formatted_address;    
                  }
              }

              console.log(resultsArr);

              return resultsArr;

      });

    },
    items: 10
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T01:36:19.890

我终于想通了。由于请求未完成，因此返回无效。我用于此的 gist 补丁也可以在这里找到。我不确定这是否是最好的方法，因此欢迎提出改进建议。

[https://gist.github.com/1866577](https://gist.github.com/1866577)

```
$('#map-query').typeahead({
    source: function(typeahead, query) {

        var resultsArr = new Array();

          geocoder.geocode({ 'address': query }, function (results, status) {

              if (status == google.maps.GeocoderStatus.OK) {
                for(i=0; i < results.length; i++) {
                    if(results[i].formatted_address) {
                        resultsArr[i] = results[i].formatted_address;    
                  }
              }
            typeahead.process(resultsArr);
            }

      });

    },
    items: 10
}); 
```

# c# - 如何识别数据表的修改单元格？

> ID：11606771
> 
> 赞同：2
> 
> 时间：2012-07-23T05:09:25.513
> 
> 标签：c#, wpf, datagrid, datatable

我的用户想要将数据下载到电子表格中，修改然后上传以保存。我已经编写了一个功能，可以将表格下载到制表符分隔的文件中并上传修改后的文件。现在他们想在点击“保存”之前对其进行审查。想知道是否有任何简单的方法来突出显示修改过的单元格。

PS：是的。有些人拒绝使用任何其他工具。他们喜欢他们的电子表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:19:55.230

添加一个额外的列校验和，它是从数据库中检索到的所有值的哈希值，在保存之前重新计算哈希值并突出显示已修改的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T04:20:38.847

如果我理解这个问题，您希望用颜色或等效标识符来表示更改的值，您可以在 Excel 中使用一个简单的宏来执行此操作：

右键单击要包含宏的选项卡并选择“查看代码”，然后键入以下 VBA：

```
Private Sub WorkSheet_Change(ByVal Target as Range)
    Target.Interior.ColorIndex = 6
End Sub 
```

这将使任何修改单元格的背景变为亮黄色。

您将需要修改“下载 excel”功能以从您的站点提供一个 .xlsm 文件并使用服务器上的模板文件（查看 EEPlus 以从 .NET 提供 Excel 文件 - 支持模板），其中包含用于此的宏去工作。如果这是不可能的，您可以走更艰难的路线并开发一个自定义 Excel 加载项来跟踪更改，但这需要部署到每个用户工作站/Excel 安装。

# android - 如何通过andengine在游戏中无缝播放视频？

> ID：11606772
> 
> 赞同：1
> 
> 时间：2012-07-23T05:09:30.927
> 
> 标签：android, andengine

我正在尝试在游戏结束时播放视频，我正在使用 videoview，但是当我播放该视频时，黑色屏幕会出现几毫秒。请建议解决这个问题。有没有其他方法可以在 andengin 中播放视频

```
@Override
        protected void onSetContentView() {

                RelativeLayout layout = new RelativeLayout(this);

                renderView = new RenderSurfaceView(this);

                RelativeLayout.LayoutParams renderViewparams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT);
                renderViewparams.addRule(RelativeLayout.CENTER_IN_PARENT, 0);
                vView= new VideoView(this);

                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                LayoutParams.FILL_PARENT);
                params.addRule(RelativeLayout.CENTER_IN_PARENT, 0);
                params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
                params.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
                params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
                params.addRule(RelativeLayout.ALIGN_PARENT_TOP);

                vView.setVideoURI(Uri.parse("android.resource://com.rovolt/"+R.raw.tiggoutest));
                vView.setVisibility(View.GONE);
                vView.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
                {          
                        public void onCompletion(MediaPlayer mp)
                        {
                                // Do whatever u need to do here

                        }          
                });  

                layout.addView(renderView, renderViewparams);

                layout.addView(vView, params);
                super.setContentView(layout);
                this.mRenderSurfaceView = renderView;
                this.mRenderSurfaceView.setEGLConfigChooser(false);
                this.mRenderSurfaceView.setRenderer(this.mEngine, this);
        } 
```

# windows - 如何在 Windows 中获得系统正常运行时间？

> ID：11606774
> 
> 赞同：333
> 
> 时间：2012-07-23T05:09:40.803
> 
> 标签：windows

我正在使用 Windows 7 和 xp。我想知道系统的正常运行时间。

获得正常运行时间的命令/程序是什么？

* * *

## 回答 #1

> 赞同：725
> 
> 时间：2012-07-23T05:23:36.460

以下是在 Windows 操作系统中查找**正常运行时间**的八种方法。

# 1：通过使用任务管理器

在 Windows Vista 和 Windows Server 2008 中，任务管理器已得到加强，以显示有关系统的其他信息。这些信息之一是服务器的运行时间。

1.  右键单击任务栏，然后单击任务管理器。您也可以单击`CTRL`++`SHIFT`进入`ESC`任务管理器。
2.  在任务管理器中，选择性能选项卡。
3.  当前系统正常运行时间显示在系统或性能⇒ Win 8/10 的 CPU 下。

    ![](../Images/aa42d8f99e78cc7ba7696e5913c1ad63.png)

# 2：通过使用系统信息实用程序

命令行`systeminfo`实用程序检查并显示各种系统统计信息，例如安装日期、安装的修补程序等。打开命令提示符并键入以下命令：

```
systeminfo 
```

您还可以将结果缩小到您需要的行：

```
systeminfo | find "System Boot Time:" 
```

![在此处输入图像描述](../Images/db8ee80587127f7ec9502451434440d0.png)

# 3：使用正常运行时间实用程序

Microsoft 发布了一个名为 Uptime.exe 的工具。它是一个简单的命令行工具，可以分析计算机的可靠性和可用性信息。它可以在本地或远程工作。该工具将以其简单的形式显示当前系统的正常运行时间。高级选项允许您访问更详细的信息，例如关机、重新启动、操作系统崩溃和 Service Pack 安装。

阅读以下 KB 了解更多信息和下载链接：

*   MSKB232243：[Uptime.exe 工具允许您估计 Windows NT 4.0 SP4 或更高版本的服务器可用性](http://support.microsoft.com/kb/232243)。

要使用它，请按照下列步骤操作：

1.  从上面的链接下载 uptime.exe，并将其保存到一个文件夹中，最好是在系统路径中的一个文件夹中（例如 SYSTEM32）。
2.  打开提升的命令提示符窗口。要打开提升的命令提示符，请单击开始，单击所有程序，单击附件，右键单击命令提示符，然后单击以管理员身份运行。您也可以在开始菜单的搜索框中键入 CMD，当您看到命令提示符图标时，单击它以选择它，按住 `CTRL`+`SHIFT`并按`ENTER`。
3.  导航到放置 uptime.exe 实用程序的位置。
4.  运行该`uptime.exe`实用程序。您可以添加 /? 到命令以获得更多选项。 ![在此处输入图像描述](../Images/e694af1965b5e1eba4feafc781934667.png)

它不提供很多命令行参数：

```
C:\uptimefromcodeplex\> uptime /?
usage: Uptime [-V]
    -V   display version

C:\uptimefromcodeplex\> uptime -V
version 1.1.0 
```

# 3.1：使用旧的 Uptime Utility

有一个旧版本的“uptime.exe”实用程序。这具有不需要 .NET 的优点。（除了简单的正常运行时间之外，它还具有更多功能。）

下载链接：[Windows NT 4.0 Server Uptime Tool (uptime.exe) (final x86)](https://www.microsoft.com/en-us/download/details.aspx?id=14732)

```
C:\uptimev100download>uptime.exe /?

UPTIME, Version 1.00
(C) Copyright 1999, Microsoft Corporation

Uptime [server] [/s ] [/a] [/d:mm/dd/yyyy | /p:n] [/heartbeat] [/? | /help]
        server          Name or IP address of remote server to process.
        /s              Display key system events and statistics.
        /a              Display application failure events (assumes /s).
        /d:             Only calculate for events after mm/dd/yyyy.
        /p:             Only calculate for events in the previous n days.
        /heartbeat      Turn on/off the system's heartbeat
        /?              Basic usage.
        /help           Additional usage information. 
```

# 4：通过使用 NET STATISTICS 实用程序

如果您记得的话，另一个简单的方法是使用 NET STATISTICS 命令显示的统计信息中的近似信息。打开命令提示符并键入以下命令：

```
net statistics workstation 
```

统计信息应该告诉您它运行了多长时间，尽管在某些情况下，此信息不如其他方法准确。

![在此处输入图像描述](../Images/f64fd053d87f62f31f33c53bd8209757.png)

# 5：使用事件查看器

可能是所有这些中最准确的，但它确实需要一些点击。它不会显示自上次重新启动以来的确切天数或小时数，但会显示有关计算机重新启动的原因和时间的重要信息。我们需要查看事件 ID 6005，这是一个告诉我们计算机刚刚完成启动的事件，但您应该知道，实际上有数百甚至数千个其他事件类型您可以从中学习.

注意：顺便说一句，6006 事件 ID 是告诉我们服务器何时停机的信息，因此如果 6006 和 6005 事件之间的时间差很大，则服务器停机很长时间。

注意：您也可以通过在“运行”命令中键入 eventvwr.msc 来打开事件查看器，也可以使用“管理工具”文件夹中的快捷方式。

2.  单击左侧导航窗格中的事件查看器（本地）。
3.  在中间窗格中，单击信息事件类型，然后向下滚动直到看到事件 ID 6005。双击 6005 事件 ID，或右键单击它并选择查看此事件的所有实例。
4.  将显示 6005 事件 ID 的所有实例的列表。您可以检查此列表，查看每个重新启动事件的日期和时间，等等。
5.  通过右键单击开始菜单上的计算机图标（如果已启用，则在桌面上）打开服务器管理器工具，然后选择管理。导航到事件查看器。

![在此处输入图像描述](../Images/cf87b6ad3e9b9a319ea27168a49d66b9.png)

# 5.1：通过 PowerShell 的事件日志

```
Get-WinEvent -ProviderName eventlog | Where-Object {$_.Id -eq 6005 -or $_.Id -eq 6006} 
```

# 6：以编程方式，使用[GetTickCount64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411%28v=vs.85%29.aspx)

> GetTickCount64 检索自系统启动以来经过的毫秒数。

# 7：通过使用 WMI

```
wmic os get lastbootuptime 
```

# 8：适用于 Windows XP 及更高版本的新 uptime.exe

与 Microsoft 的工具类似，但与包括 Windows 10 和 Windows Server 2016 在内的所有操作系统兼容，[此正常运行时间实用程序](https://neosmart.net/blog/2017/uptime-for-windows/)不需要提升的命令提示符，并提供在 DD:HH:MM:SS 中显示正常运行时间的选项并以人类可读的格式（使用`-h`命令行参数执行时）。

此外，即使从 explorer.exe 会话中正常启动（即不通过命令行），此版本`uptime.exe`也会运行并显示系统正常运行时间，并暂停以读取正常运行时间：

[![在此处输入图像描述](../Images/a46eaf8074ab5ad357cff2763efcb575.png)](https://i.stack.imgur.com/QCRJN.png)

当执行为`uptime -h`：

[![在此处输入图像描述](../Images/1f52b384bc60227921f28e95eb3ce55c.png)](https://i.stack.imgur.com/hwOxd.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-23T05:40:25.467

我使用这个小 PowerShell 片段：

```
function Get-SystemUptime {
    $operatingSystem = Get-WmiObject Win32_OperatingSystem
    "$((Get-Date) - ([Management.ManagementDateTimeConverter]::ToDateTime($operatingSystem.LastBootUpTime)))"
} 
```

然后产生如下内容：

```
PS> Get-SystemUptime
6.20:40:40.2625526 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-23T05:14:45.293

有两种方法可以做到这一点..

**选项1：**

```
1\.  Go to "Start" -> "Run".

2\.  Write "CMD" and press on "Enter" key.

3\.  Write the command "net statistics server" and press on "Enter" key.

4\.  The line that start with "Statistics since …" provides the time that the server was up from.

  The command "net stats srv" can be use instead. 
```

**选项 2：**

Uptime.exe 工具允许您使用 Windows NT 4.0 SP4 或更高版本估计服务器可用性

[http://support.microsoft.com/kb/232243](http://support.microsoft.com/kb/232243)

希望对你有帮助！！

# visual-studio-2010 - Visual Studio 2010 调试器要求 CD

> ID：11606775
> 
> 赞同：0
> 
> 时间：2012-07-23T05:09:45.763
> 
> 标签：visual-studio-2010

看来，从今天下午开始，VS2010调试器在启动时会偶尔开始检查CD。它会产生一个对话框，我必须取消几次才能最终关闭编辑器并重新启动它。两三个小时过去了，问题又回来了。

所以，除了重新安装所有东西，我还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:48:44.797

发现我在安装VS2012 RC时发生了一些奇怪的事情。删除 VS2102 并重新安装 VS2010 即可解决问题。

# xslt - XSLT 转换问题

> ID：11606776
> 
> 赞同：1
> 
> 时间：2012-07-23T05:10:00.957
> 
> 标签：xslt, xslt-1.0

我在尝试转换以下内容时遇到问题。输入具有父子关系，如下所示。`Parent_Identifier`标签有助于将孩子与父母联系起来。XSLT 转换有什么问题？我使用了这篇文章中提到的转换：[Xslt group parent/child](https://stackoverflow.com/questions/5840931/xslt-group-parent-child)，但我似乎无法让它工作。

### 输入文件

```
<DBAdapterOutputCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.oracle.com/pcbpel/adapter/db/DBAdapter">
  <DBAdapterOutput>
    <LEVEL>1</LEVEL>      
    <IDENTIFIER>9536162</IDENTIFIER>
    <PARENT_IDENTIFIER xsi:nil="true"/>
    <LINE_NUMBER>1.1.0</LINE_NUMBER>    
  </DBAdapterOutput>

 <DBAdapterOutput>
  <LEVEL>2</LEVEL>
  <IDENTIFIER>9536165</IDENTIFIER>
  <PARENT_IDENTIFIER>9536162</PARENT_IDENTIFIER>
  <LINE_NUMBER>1.1.1</LINE_NUMBER>
  <ORDER_NUMBER>1554828</ORDER_NUMBER>
 </DBAdapterOutput>
 <DBAdapterOutput>
  <LEVEL>2</LEVEL>    
  <IDENTIFIER>9536173</IDENTIFIER>
  <PARENT_IDENTIFIER>9536162</PARENT_IDENTIFIER>
  <LINE_NUMBER>1.1.7</LINE_NUMBER>
  <ORDER_NUMBER>1554828</ORDER_NUMBER>
 </DBAdapterOutput>
 <DBAdapterOutput>
  <LEVEL>3</LEVEL>
  <IDENTIFIER>1227973</IDENTIFIER>
  <PARENT_IDENTIFIER>9536165</PARENT_IDENTIFIER>
  <LINE_NUMBER>1.1.4</LINE_NUMBER>
  <ORDER_NUMBER>1554828</ORDER_NUMBER>
 </DBAdapterOutput>
 <DBAdapterOutput>
  <LEVEL>3</LEVEL>
  <IDENTIFIER>1275015</IDENTIFIER>
  <PARENT_IDENTIFIER>9536165</PARENT_IDENTIFIER>
  <LINE_NUMBER>1.1.4</LINE_NUMBER>
  <ORDER_NUMBER>1554828</ORDER_NUMBER>
 </DBAdapterOutput>
</DBAdapterOutputCollection> 
```

### 预期输出文件

```
<WMSAssetInterface_Input xmlns="http://siebel.com/CustomUI">
 <ListOfAsset xmlns="http://www.siebel.com/xml/ThinComergentAsset">
  <ListOfAssetHeader>
    <AssetHeader>
     <IntegrationId>9536162 1.1.0</IntegrationId>
     <ProductName>1.1.0</ProductName>
     <ListOfAssetItem>
       <AssetItem>
         <IntegrationId>9536162 1.1.0 Level=1</IntegrationId>
         <ProductName>1.1.0</ProductName>
         <ListOfAssetItem>
            <AssetItem>
               <IntegrationId>9536165 1.1.1 Level=2</IntegrationId>
               <ProductName>1.1.1</ProductName>
               <ListOfAssetItem>
                 <AssetItem>
                   <IntegrationId>1227973 1.1.4 Level=3</IntegrationId>
                   <ProductName>1.1.4</ProductName>
                  </AssetItem>
                  <AssetItem>
                    <IntegrationId>1275015 1.1.4 Level=3</IntegrationId>
                    <ProductName>1.1.4</ProductName>
                  </AssetItem>
               </ListOfAssetItem>
            </AssetItem>
            <AssetItem>
              <IntegrationId>9536173 1.1.7 Level=2</IntegrationId>
              <ProductName>1.1.7</ProductName>
            </AssetItem>
         </ListOfAssetItem>
       </AssetItem>
     </ListOfAssetItem>
   </AssetHeader>
  <ListOfAssetHeader>
 </ListOfAsset>
</WMSAssetInterface_Input> 
```

### 这是我正在尝试使用的 XSLT；为什么这不起作用？

```
<xsl:stylesheet version="1.0" xmlns:ns0="http://xmlns.oracle.com/pcbpel/adapter/db/DBAdapter" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsdLocal1="http://www.siebel.com/xml/ThinComergentAsset" xmlns:tns="http://siebel.com/CustomUI" exclude-result-prefixes="tns" >
<xsl:template match="/ns0:DBAdapterOutputCollection">
<tns:WMSAssetInterface_Input>
  <xsdLocal1:ListOfAsset>
    <xsdLocal1:ListOfAssetHeader>
      <xsdLocal1:AssetHeader>
        <xsdLocal1:IntegrationId>
          <xsl:value-of select='concat(ns0:DBAdapterOutput/ns0:IDENTIFIER," ",ns0:DBAdapterOutput/ns0:LINE_NUMBER," Level=",ns0:DBAdapterOutput/ns0:LEVEL)'/>
        </xsdLocal1:IntegrationId>
        <xsdLocal1:ProductName>
          <xsl:value-of select="ns0:DBAdapterOutput/ns0:LINE_NUMBER"/>
        </xsdLocal1:ProductName>
         <xsl:apply-templates select="ns0:DBAdapterOutputCollection/ns0:DBAdapterOutput[string-length(ns0:PARENT_IDENTIFIER)=0]" />
          </xsdLocal1:AssetHeader>
    </xsdLocal1:ListOfAssetHeader>
   </xsdLocal1:ListOfAsset>
 </tns:WMSAssetInterface_Input>
</xsl:template>

<xsl:template match="ns0:DBAdapterOutput">
  <xsdLocal1:ListOfAssetItem>
          <xsdLocal1:AssetItem>
            <xsdLocal1:IntegrationId>
              <xsl:value-of select='concat(ns0:IDENTIFIER," ",ns0:LINE_NUMBER," Level=",ns0:LEVEL)'/>
            </xsdLocal1:IntegrationId>
            <xsdLocal1:PartName>
              <xsl:value-of select="ns0:LINE_NUMBER"/>
            </xsdLocal1:PartName>
             <xsl:variable name="children" select="parent::*/ns0:DBAdapterOutput[ns0:PARENT_IDENTIFIER=current()/ns0:IDENTIFIER]" />
    <xsl:if test="$children">
        <xsdLocal1:ListOfAssetItem>
          <xsdLocal1:AssetItem>
            <xsl:apply-templates select="$children" />
         </xsdLocal1:AssetItem>
          </xsdLocal1:ListOfAssetItem>
    </xsl:if>
         </xsdLocal1:AssetItem>
       </xsdLocal1:ListOfAssetItem>
   </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:18:42.657

两个编译时错误：

1.  tns: 前缀未绑定到任何命名空间。

2.  样式表中的这一行是无稽之谈。

    ```
    <xsl:value-of select='concat(/ns0:IDENTIFIER," ",/ns0:LINE_NUMBER," Level=",/ns0:DBAdapterOutput/ns0:LEVEL')'/> 
    ```

3.  缺少样式表的关闭标记。

## 更新

我修复了样式表中的几个错误：

1.  <xsl:template match="ns0:DBAdapterOutput/" /> 无效。删除最后的 / 。
2.  与 <xsl:template match="/ns0:DBAdapterOutputCollection"> 类似

## 更新

这里的技术是递归地使用 xsl:apply-templates 来深入了解各个级别。仅通过比较两个链接字段即可将记录与其父项匹配，但另一种方法是使用键。

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ns0="http://xmlns.oracle.com/pcbpel/adapter/db/DBAdapter"
  xmlns:xsdLocal1="http://www.siebel.com/xml/ThinComergentAsset"
  exclude-result-prefixes="xsl xsdLocal1 ns0">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <WMSAssetInterface_Input xmlns="http://siebel.com/CustomUI">
  <ListOfAsset xmlns="http://www.siebel.com/xml/ThinComergentAsset">
   <ListOfAssetHeader>
     <xsl:apply-templates select="*/ns0:DBAdapterOutput[ns0:LEVEL=1]" /> 
   </ListOfAssetHeader>
  </ListOfAsset>
 </WMSAssetInterface_Input>
</xsl:template>

<xsl:template match="ns0:DBAdapterOutput[ns0:LEVEL=1]"
  xmlns="http://www.siebel.com/xml/ThinComergentAsset">
  <AssetHeader>
    <IntegrationId>
      <xsl:value-of select="concat(ns0:IDENTIFIER,' ',ns0:LINE_NUMBER)" /> 
    </IntegrationId>
    <ProductName>
      <xsl:value-of select="ns0:LINE_NUMBER" />
    </ProductName>
    <ListOfAssetItem>
      <xsl:apply-templates select="../ns0:DBAdapterOutput
                [           ns0:LEVEL=
                 (current()/ns0:LEVEL+1)]" /> 
    </ListOfAssetItem>
  </AssetHeader>
</xsl:template>

<xsl:template match="ns0:DBAdapterOutput[ns0:LEVEL &gt; 1]"
      xmlns="http://www.siebel.com/xml/ThinComergentAsset">
  <AssetItem>
    <IntegrationId>
      <xsl:value-of select="concat(ns0:IDENTIFIER,' ',ns0:LINE_NUMBER,
      ' Level=', ns0:LEVEL/text()-1)" /> 
    </IntegrationId>
    <ProductName>
      <xsl:value-of select="ns0:LINE_NUMBER" />
    </ProductName>
    <xsl:if test="../ns0:DBAdapterOutput
                [ns0:PARENT_IDENTIFIER = current()/ns0:IDENTIFIER]">
     <ListOfAssetItem>
      <xsl:apply-templates select="../ns0:DBAdapterOutput
                [ns0:PARENT_IDENTIFIER = current()/ns0:IDENTIFIER]" /> 
     </ListOfAssetItem>
    </xsl:if>
  </AssetItem>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于样本输入时，将产生...**

```
<WMSAssetInterface_Input xmlns="http://siebel.com/CustomUI">
  <ListOfAsset xmlns="http://www.siebel.com/xml/ThinComergentAsset">
    <ListOfAssetHeader>
      <AssetHeader>
        <IntegrationId>9536162 1.1.0</IntegrationId>
        <ProductName>1.1.0</ProductName>
        <ListOfAssetItem>
          <AssetItem>
            <IntegrationId>9536165 1.1.1 Level=1</IntegrationId>
            <ProductName>1.1.1</ProductName>
            <ListOfAssetItem>
              <AssetItem>
                <IntegrationId>1227973 1.1.4 Level=2</IntegrationId>
                <ProductName>1.1.4</ProductName>
              </AssetItem>
              <AssetItem>
                <IntegrationId>1275015 1.1.4 Level=2</IntegrationId>
                <ProductName>1.1.4</ProductName>
              </AssetItem>
            </ListOfAssetItem>
          </AssetItem>
          <AssetItem>
            <IntegrationId>9536173 1.1.7 Level=1</IntegrationId>
            <ProductName>1.1.7</ProductName>
          </AssetItem>
        </ListOfAssetItem>
      </AssetHeader>
    </ListOfAssetHeader>
  </ListOfAsset>
</WMSAssetInterface_Input> 
```

这与您声明的预期输出略有不同，但这仅仅是因为，恕我直言，列出的预期输出中存在错误。我相信这可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:37:02.720

首先，关于代码不**可读性**的观察——请在以后的问题中提供缩进良好的短行代码！

有一个很容易纠正的主要问题。

**改变这个**：

```
<xsl:apply-templates select=
"ns0:DBAdapterOutputCollection/ns0:DBAdapterOutput
             [string-length(ns0:PARENT_IDENTIFIER)=0]" /> 
```

**对此**：

```
<xsl:apply-templates select=
"ns0:DBAdapterOutput
             [string-length(ns0:PARENT_IDENTIFIER)=0]" /> 
```

必须修改的 XSLT 指令位于当前节点为顶部 `ns0:DBAdapterOutputCollection`元素的模板中。它指定模板应应用于满足谓词中条件的 任何**孙** 元素，并且该元素是当前节点的任何子节点的子节点。`ns0:DBAdapterOutput``ns0:DBAdapterOutputCollection`

但是，当前节点（顶部`ns0:DBAdapterOutputCollection`元素）没有子`ns0:DBAdapterOutputCollection`节点，并且没有节点被该`xsl:apply-templates`指令选择执行。

**在进行了上述简单的代码更改之后，转换的结果似乎是可能需要的**：

```
<?xml version="1.0" encoding="utf-8"?>
<tns:WMSAssetInterface_Input xmlns:tns="http://siebel.com/CustomUI" xmlns:ns0="http://xmlns.oracle.com/pcbpel/adapter/db/DBAdapter" xmlns:xsdLocal1="http://www.siebel.com/xml/ThinComergentAsset">
    <xsdLocal1:ListOfAsset>
        <xsdLocal1:ListOfAssetHeader>
            <xsdLocal1:AssetHeader>
                <xsdLocal1:IntegrationId>9536162 1.1.0 Level=1</xsdLocal1:IntegrationId>
                <xsdLocal1:ProductName>1.1.0</xsdLocal1:ProductName>
                <xsdLocal1:ListOfAssetItem>
                    <xsdLocal1:AssetItem>
                        <xsdLocal1:IntegrationId>9536162 1.1.0 Level=1</xsdLocal1:IntegrationId>
                        <xsdLocal1:PartName>1.1.0</xsdLocal1:PartName>
                        <xsdLocal1:ListOfAssetItem>
                            <xsdLocal1:AssetItem>
                                <xsdLocal1:ListOfAssetItem>
                                    <xsdLocal1:AssetItem>
                                        <xsdLocal1:IntegrationId>9536165 1.1.1 Level=2</xsdLocal1:IntegrationId>
                                        <xsdLocal1:PartName>1.1.1</xsdLocal1:PartName>
                                        <xsdLocal1:ListOfAssetItem>
                                            <xsdLocal1:AssetItem>
                                                <xsdLocal1:ListOfAssetItem>
                                                    <xsdLocal1:AssetItem>
                                                        <xsdLocal1:IntegrationId>1227973 1.1.4 Level=3</xsdLocal1:IntegrationId>
                                                        <xsdLocal1:PartName>1.1.4</xsdLocal1:PartName>
                                                    </xsdLocal1:AssetItem>
                                                </xsdLocal1:ListOfAssetItem>
                                                <xsdLocal1:ListOfAssetItem>
                                                    <xsdLocal1:AssetItem>
                                                        <xsdLocal1:IntegrationId>1275015 1.1.4 Level=3</xsdLocal1:IntegrationId>
                                                        <xsdLocal1:PartName>1.1.4</xsdLocal1:PartName>
                                                    </xsdLocal1:AssetItem>
                                                </xsdLocal1:ListOfAssetItem>
                                            </xsdLocal1:AssetItem>
                                        </xsdLocal1:ListOfAssetItem>
                                    </xsdLocal1:AssetItem>
                                </xsdLocal1:ListOfAssetItem>
                                <xsdLocal1:ListOfAssetItem>
                                    <xsdLocal1:AssetItem>
                                        <xsdLocal1:IntegrationId>9536173 1.1.7 Level=2</xsdLocal1:IntegrationId>
                                        <xsdLocal1:PartName>1.1.7</xsdLocal1:PartName>
                                    </xsdLocal1:AssetItem>
                                </xsdLocal1:ListOfAssetItem>
                            </xsdLocal1:AssetItem>
                        </xsdLocal1:ListOfAssetItem>
                    </xsdLocal1:AssetItem>
                </xsdLocal1:ListOfAssetItem>
            </xsdLocal1:AssetHeader>
        </xsdLocal1:ListOfAssetHeader>
    </xsdLocal1:ListOfAsset>
</tns:WMSAssetInterface_Input> 
```

# java - 每当我运行我的 android 应用程序时，它都会显示“XYZ 没有响应”

> ID：11606780
> 
> 赞同：0
> 
> 时间：2012-07-23T05:10:27.887
> 
> 标签：java, android

直到昨天它运行得非常好......我是android编程的新手，任何帮助都会很棒......在我的应用程序中，我正在解析下载的xml文件，然后创建一个动态UI......这是我的代码片段..

```
private class ParseXML extends AsyncTask<Integer, Integer, Document>{

    public void onPostExecute(Document d) {

        ParseDocument(d); }

    @Override
protected Document doInBackground(Integer... params) {
    // TODO Auto-generated method stub
     DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();

    try {
        //Uri uri = Uri.parse("android.resource://com.example.xml_parser/raw/options");
        InputStream is=getResources().openRawResource(R.raw.options);

        DocumentBuilder db = dbf.newDocumentBuilder();
        dom=db.parse(is);
        Log.i(TAG,"parsing done");

    }

    catch(ParserConfigurationException pce){
        pce.printStackTrace();
    }
    catch(SAXException se){
        se.printStackTrace();
    }
    catch(IOException ioe){
        ioe.printStackTrace();
    }
    return dom;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:15:23.093

错误是，您试图在主 UI 线程中解析 XML。这意味着您正在限制用户使用 UI 执行操作。在 Andorid 中需要注意的是，每当应用程序没有响应超过 5 秒时，您将被抛出 Applicaation Not Responding 对话框。

所以你要做的是，使用 AsyncTask 来解析你的 XML，然后从中更新你的 Ui。

这是一个例子，

[https://stackoverflow.com/a/5806402/603744](https://stackoverflow.com/a/5806402/603744)

AsyncTask 包含三个方法，即

1.  doInBackground -相当于你的线程。
2.  onPostExcecute - 一旦 doInBackground 完成其任务时调用。
3.  在调用 doInBackground 之前 onPreExecute-Called。

第二种和第三种方法与 UI 有关，您可以在此处执行任何基于 UI 的操作，第一种方法是您的后台线程，您必须在其中进行大量计算，因此不会影响您的 UI。

# c++ - 每个 C++ 都有一个指针

> ID：11606782
> 
> 赞同：2
> 
> 时间：2012-07-23T05:10:37.887
> 
> 标签：c++, visual-c++, pointers, foreach, iterator

我正在尝试在 C++ 中的每个循环中使用指向数组的指针。下面的代码不起作用，因为“for each 语句不能对'int *'类型的变量进行操作”。我更喜欢使用 new 运算符，以便数组位于堆上而不是堆栈上，但我似乎无法弄清楚这里的语法。有什么建议么？

```
#include <iostream>
using namespace std;

int main() {
    int total = 0;

    int* array = new int[6];
    array[0] = 10; array[1] = 20; array[2] = 30;
    array[3] = 40; array[4] = 50; array[5] = 60;

    for each(int i in array) {
        total += i;
    }

    cout << total << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:15:25.423

你总是可以像这样使用 for 循环：

```
for (int i = 0; i < 6;i++)
{
total += array[i];
} 
```

虽然，已经给出了使用“gcnew”使用“for each”的答案，所以我省略了。作为替代方案，您还可以按如下方式使用向量：

```
#include <iostream>
#include <vector>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int total = 0;
    vector<int> myarray;

    myarray.push_back(10);
    myarray.push_back(20);
    myarray.push_back(30);
    myarray.push_back(40);
    myarray.push_back(50);
    myarray.push_back(60);

    for each(int i in myarray) {
        total += i;
    }

    cout << total << endl;
    return 0;
} 
```

希望这会有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:33:32.387

C++0x 引入了基于范围的`for`循环，其工作方式`foreach`与其他语言相同。它们的语法是这样的：

```
int arr[5]={1,2,3,4,5};
for( int & tmp : arr )
{
//do something
} 
```

这些循环适用于 C 风格的数组、初始值设定项列表以及为其定义了 begin() 和 end() 函数并返回迭代器的任何类型。我坚信它们`int *`没有返回迭代器的 begin() 和 end() 函数，因为它只是一个原始指针。我也相信 Qt 中的其他-`foreach`等效项`foreach`或您发布的内容以相同的方式工作，因此您不能像这样使用它们。[msdn](http://msdn.microsoft.com/en-us/library/ms177202%28v=vs.80%29.aspx)说它适用于*集合*：

```
for each (type identifier in expression) {
      statements
} 
```

> *表达：*
> 
> 托管数组表达式或集合。编译器必须能够将集合元素从 Object 转换为标识符类型。expression 的计算结果为实现 IEnumerable、IEnumerable 的类型或定义 GetEnumerator 方法的类型。在后一种情况下，GetEnumerator 应返回实现 IEnumerator 的类型或声明 IEnumerator 中定义的所有方法。

再一次，你有一个原始指针，所以它不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T05:39:47.720

您使用的那个`for each`东西是一个 Visual C++ 扩展，甚至一些微软员工都不推荐（我知道我听说过[STL](http://nuwen.net/stl.html)说它不好，我不记得在哪里）。

还有其他选项，例如C++11 中的[`std::for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)和[基于范围的 for](http://stroustrup.com/C++11FAQ.html#for)（尽管我认为 Visual C++ 尚不支持）。但是，这不是您应该在这里使用的。您应该使用[`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate)，因为这是它的用途：

```
total = std::accumulate(array, array + 6, 0); 
```

如果你真的只是对如何使用这个 Microsoft`for each`结构感兴趣，那么我很确定如果你只有一个指针，你就不能。你应该使用 a`std::vector`代替。无论如何，你应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T05:32:22.637

我能想到的唯一方法是迭代**引用类型数组，**特别是如果你希望你的存储在堆上

[微软在这里向您](http://msdn.microsoft.com/en-us/library/ms177204%28v=vs.80%29.aspx)展示了如何做到这一点

但是对于您的情况，最简单的选择（如果您希望将数组放在堆上）如下：-

```
 array<int>^ arr = gcnew array<int>{10, 20, 30, 40\. 50, 60};
 int total = 0;    

for each (int i in arr){
  total+=i;
} 
```

gcnew 在垃圾收集堆上创建托管类型（引用或值类型）的实例。gcnew 表达式的求值结果是正在创建的类型的句柄 (^)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T05:45:39.723

您必须使用标准库集合，例如`std::vector`或`std::array`使用`for each`.

请注意，此代码不是标准 C++，因此不可移植，因为`for each`它是 Visual C++ 扩展。我建议使用`std::for_each`C++11 自动范围循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T07:52:02.423

VC++ 与 ISO/ANSI C++ 没有什么不同。任何告诉你它是的人都是错误的。现在，回答您对每个语句的问题。ISO C++ 规范中没有这样的声明。Microsoft 支持 C# 中的“foreach”语句，作为 .Net 框架的一部分。因此，Visual Studio 可能支持此功能，但我建议不要使用它。

就像用户 shubhansh 回复了一些回复一样，尝试使用向量。但是，我猜您想使用通用大小，而不是对其进行硬编码。以下 for 循环将在这方面为您提供帮助：

```
 for(vector<int>::size_type i =0; i<myarray.size();i++)
{
total+=1;
} 
```

这是 ISO 标准定义的遍历向量的完美方式。希望这对您的发展有所帮助。干杯!

# java - 安全性：限制第三方软件的内部访问

> ID：11606787
> 
> 赞同：1
> 
> 时间：2012-07-23T05:11:00.150
> 
> 标签：java, security, api, securitymanager

我有一个 Java 应用程序，用户可以在其中加载第三方“插件”以增强用户体验。存在供这些插件使用的 API，但出于安全考虑，应限制第三方软件访问内部应用程序类。插件的受限包是“com.example”，允许的是“com.example.api”。API 类确实调用了内部的混淆类。

在研究了这个之后，我遇到了 SecurityManager 的几个方法：[checkMemberAccess(Class, int)](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkMemberAccess%28java.lang.Class,%20int%29)和checkPackageAccess [(String)](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkPackageAccess%28java.lang.String%29)，它们似乎都是实现我目标的可行途径。但是，在做了一些测试和进一步研究之后，我发现checkMemberAccess只适用于反射调用，而checkPackageAccess只有在类加载器调用loadClass时才会被调用。

限制对包（com.example，但不是 com.example.api）的访问的合理方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:19:40.570

我建议为插件编写一个**自定义类加载器**，它将包的存在隐藏在`com.example`使用该类加载器加载的类中。通常类加载器委托给它们的父级，但是有几种实现方式只是部分或根本不这样做。我相信例如蚂蚁使用这种技术。当使用这样的类加载器加载时，任何与禁止功能*链接的类都将无法加载。*或者，如果实现使用了惰性链接，并且确实加载成功，那么在执行禁止代码期间它仍然会失败。

拒绝您的插件链接时访问被禁止的包后，您可以使用 SecurityManager 通过反射拒绝运行时访问，也可以拒绝创建可能用于绕过您的新类加载器。

```
class RestrictingClassLoader extends URLClassLoader {
  @Override
  public Class<?> loadClass(String name) throws ClassNotFoundException {
    if (!name.startsWith("com.example.") || name.startsWith("com.example.api."))
      return super.loadClass(name);
    return findClass(name);
  }
}

class RestrictingSecurityManager extends SecurityManager {
  private boolean isRestricted() {
    for (Class<?> cls: getClassContext())
      if (cls.getClassLoader() instanceof RestrictingClassLoader)
        return true;
    return false;
  }
  // Implement other checks based on isRestricted().
} 
```

# asp.net - Ajax 模型弹出扩展器

> ID：11606788
> 
> 赞同：0
> 
> 时间：2012-07-23T05:11:00.520
> 
> 标签：asp.net, ajaxcontroltoolkit

Public Property Drag As Boolean' 已过时：'如果您指定 PopupDragHandleControlID 属性，模态弹出窗口上的拖动功能将自动打开。设置 Drag 属性是一个 noop'。

在编译 .Net(4.0) 代码时，它会显示警告。我们将如何删除或清除警告。

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T03:10:31.107

意味着 ModalPopupExtender.Drag 在 .Net 框架中将不再受支持，因此您可以使用 PopupDragHandleControlID 属性来代替。

不要使用 Drag ，使用 PopupDragHandleControlID

# assembly - 位置无关代码

> ID：11606789
> 
> 赞同：-1
> 
> 时间：2012-07-23T05:11:05.063
> 
> 标签：assembly

为什么

```
 push str1 
```

当 str1 在 .text int 同一个文件中定义时，当我们想做位置无关代码时不好吗？当我们将一些标签压入堆栈时，地址是静态时的地址吗？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:01:45.320

每当加载二进制文件时，它们就会被虚拟化，这涉及到很多事情，但对于 PIC 来说最重要的是，这意味着二进制文件可以被加载并基于几乎任何地址，所以 PIC 解决这个问题的方法是让它可能使用相对寻址（因为这些不需要为搬迁而修复）。

在上面的示例中，不可能仅使用 a 创建相对地址`PUSH`，因为将被推送的地址将是 .text/.rodata 部分的偏移量（或由某个首选基地址构成的绝对地址），但它不会调整为二进制文件当前的虚拟地址，因此您需要在推送之前调整地址（最简单的可能是通过 RIP 相对寻址，所以您会这样做`PUSH [RIP + <dist from $here to string aka str1 - $>]`）。

# c# - 如何使用 C# 在 access 数据库中实现“右外连接”查询？

> ID：11606797
> 
> 赞同：1
> 
> 时间：2012-07-23T05:12:46.523
> 
> 标签：c#, ms-access, oledb, jet

我想编写**RightOuterJoin** 查询以从 access 数据库中检索数据。如何在**c#**中实现此查询？我试过这样

```
connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=Sample1.accdb; Jet OLEDB:Engine Type=5";

string sql = "SELECT t1.mobileno,t1.RetailerNo,t1.custcode,t2.RET NO FROM [C:\\Sample1.accdb].[Table1] as t1 RIGHT OUTER JOIN [C:\\Sample1.accdb].[Table2] as t2 ON t1.RetailerNo = t2.RET NO";

database = new OleDbConnection(connectionString);
database.Open();
OleDbCommand cmd1 = new OleDbCommand(sql, database);
OleDbDataAdapter da = new OleDbDataAdapter(cmd1);

//database.Open();
//conn.Open();
cmd1.ExecuteNonQuery();
System.Data.DataTable dt = new System.Data.DataTable();
da.Fill(dt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:01:13.317

I think you may have a problem with your connection string. It uses the Jet provider, but the database type is the newer ACCDB format. Jet does not work with ACCDB.

For ACCDB, you need the ACE provider. If you don't have Office 2007 or 2010 installed, you can download and install the [Access Database Engine Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255).

Here is the provider section from a working connection string:

```
Provider=Microsoft.ACE.OLEDB.12.0 
```

See [Connection strings for Access 2007](http://connectionstrings.com/access-2007) for more details.

Once you have a working connection to `Sample1.accdb`, revise your SQL statement to this:

```
SELECT t1.mobileno,t1.RetailerNo,t1.custcode,t2.[RET NO]
FROM 
    Table1 as t1
    RIGHT JOIN Table2 as t2
    ON t1.RetailerNo = t2.[RET NO] 
```

Notes:

1.  Since you're already connected to `Sample1.accdb`, you don't need to prefix the table names with the path to the db file.
2.  For a field name which includes a space (RET NO), enclose the field name in square brackets.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:29:24.637

试试下面的代码

```
select * from tblemp right join tblDept on tblemp.DeptId=tblDept.pkDeptId 
```

它与您在 SQL SERVER 中使用右连接相同。

# mercurial - 如何在 Mercurial 中恢复多个提交？

> ID：11606800
> 
> 赞同：9
> 
> 时间：2012-07-23T05:13:55.527
> 
> 标签：mercurial, undo, revert

我有一堆提交，比如 A、B、C、D，我想保留 B、C 和 D，并进行 (BCD)⁻¹ 的提交。如果我有许多要同时撤消的提交，那么最简单的方法是什么？

（我似乎记得看到一个关于这个的stackoverflow问题，建议我`hg update`去A，然后`hg commit`用一些参数调用，但我现在似乎找不到那个问题。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:19:13.740

听起来您正在寻找`backout`. 看：

```
hg help backout 
```

我认为它不能一次退出多个提交，因此您必须单独退出：

```
hg backout D
hg backout C
hg backout B 
```

这将在 D 之上创建三个提交，它们与 D、C 和 B 相反。如果您想将这些提交组合到一个变更集中，您可以使用`rebase --collapse`或使用许多其他扩展中的一个来折叠它们（例如，`histedit`或`mq`或`collapse`扩展名）。

如果您不想退出单个更改，而是一次性完成所有更改，您可以执行以下操作：

```
hg update A
hg debugsetparents D
hg commit -m "revert B-D" 
```

这很丑陋，但它有效。但是，这不会反向记录重命名。老实说，我不建议这样做，如果您需要退出太多以至于单独的退出命令很难键入，这让我想知道退出是否真的是您应该为那个特定做的事情案子。

或者，您可以按照 Jim 和 Rafael 的建议进行操作，并确定 B、C 和 D 在一个分支上，然后更新回 A 并继续在那里提交（此时拆分历史记录）。这可能更合适。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T16:54:12.477

最简单的方法：

您在变更集 D 中，并且您想终止该分支

```
hg commit --close-branch -m "Branch closed" 
```

现在，只需转到变更集 A 并继续您的工作，提交新内容

```
hg up -r A
... change stuff ...
hg ci -m "New stuff" 
```

具有 B、C 和 D 的分支将在那里，但它会被终止，它不会显示在`hg heads`. 这将是一个非活动分支。

这很容易做到，也很富有表现力。如果您查看图表，您会看到一个单独的分支已关闭，“官方”分支将继续运行。比让那些在您的分支中产生噪音的恢复和撤销变更集要好得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:05:22.480

您已经回答了自己的问题，更新回 A 并从那里继续。如果你需要在那个时候做一个新的头，你需要对一些文件或其他文件进行更改，如下所述：[我如何强制 mercurial 接受一个空的提交](https://stackoverflow.com/questions/3561608/how-can-i-force-mercurial-to-accept-an-empty-commit)。从该帖子链接到的[邮件线程](http://mercurial.markmail.org/message/pjy44oww2y7bvdkf#query:+page:1+mid:x2gkfdkr77nm6sc2+state:results)描述了一种使用 MqExtension 删除 BCD 的方法（除非您已推送它们）：

# java-me - 如何在 j2me MIDP(java) 中流式传输和播放广播电台服务器？

> ID：11606801
> 
> 赞同：0
> 
> 时间：2012-07-23T05:14:17.450
> 
> 标签：java-me, midp-2.0

我试过 String url = "38.101.195.5:9156" 面对 java.io.IOException: 11-Error in HTTP operation

代码在这里

connection = (HttpConnection) Connector.open(url);

dataIn = connection.openDataInputStream();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:11:04.043

如果设备支持 JSR 234 - Advanced Multimedia Supplements，那么您可以使用您的 API：http: [//jcp.org/en/jsr/detail ?id=234](http://jcp.org/en/jsr/detail?id=234)

包“ `javax.microedition.amms.control.tuner`”说明

该软件包包含各种调谐器设置的控件。如果支持这些控件，通常可以从无线电播放器（例如由 Manager.createPlayer( `"capture://radio");`) 创建的播放器）中获取。

查看更多内容

```
public interface TunerControl 
```

# c++ - 独立于平台的 OpenSSL 库

> ID：11606804
> 
> 赞同：1
> 
> 时间：2012-07-23T05:15:08.647
> 
> 标签：c++, cross-platform, platform-independent

我正在用 C++ 编写一个程序，它需要在任何地方编译和运行。它可以在 Linux、MacOS、Windows、DOS、OS/2、BSD、hell 上运行，如果需要的话，甚至可以在具有 C++ 编译器的自定义编写操作系统上运行。

我非常坚持的一件事是 OpenSSL。该程序大量使用公钥基础设施。它需要生成密钥对、加密、解密、签名和验证。在 linux 上，我可以“非常”确定 openssl 存在，这不是问题。在 Windows 和其他平台上我不能确定，我希望可执行文件是单独的。

所以，我需要的是一个在任何符合 ISO 标准的 C++ 编译器中提供“零麻烦”编译的库。我发现了一些 VS 编译器无法编译的东西（从外观上看，调试它们将是地狱）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:20:38.580

openssl 库是一个 C 库，如果 VS 无法编译 C 代码。那么这不是图书馆的责任。我见过很多针对 openSSL 编写的代码。我真的很惊讶关于这个系统的文档真的很差。

OpenSSL 主页在这里： [http ://www.openssl.org/](http://www.openssl.org/)

# android - 从通知输入时重复 MainActivity

> ID：11606809
> 
> 赞同：0
> 
> 时间：2012-07-23T05:15:31.860
> 
> 标签：android, android-activity

```
 Intent intent = new Intent(_context, MainActivity.class);
    PendingIntent activity = PendingIntent.getActivity(_context, 0, intent, 0);
    notification.contentIntent = activity; 
```

如果 MainActivity 已经打开，请从通知中输入 MainActivity，因此我需要退出两次。这是一个falg问题，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:17:57.023

是的。您必须将此标志添加到待处理的 Intent 中。

```
Intent intent = new Intent(_context, MainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP|   Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent activity = PendingIntent.getActivity(_context, 0, intent, 0); 
```

在这里形成，

[https://stackoverflow.com/a/7308940/603744](https://stackoverflow.com/a/7308940/603744)

# windows-phone-7 - 在 WP7 PhoneGap 中播放多个音频流

> ID：11606810
> 
> 赞同：0
> 
> 时间：2012-07-23T05:15:53.650
> 
> 标签：windows-phone-7, cordova

我是 wp7 phonegap 环境的新手，在播放音频文件时遇到问题。我可以尽可能多次地播放一个音频文件，但不能播放另一个不同实例的音频，这是我正在进行的项目的要求。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:32:13.763

您可以使用 phonegap 原生音响系统

它的javascript代码是

```
src1="sounds/cartoon001.mp3"
src2="sounds/cartoon002.mp3"
var soundObj1 = new Media(src1,onSuccess,onError);
var soundObj2 = new Media(src2,onSuccess,onError);
soundObj1.play();
soundObj2.play(); 
```

还请检查移动设备是否支持 mp3 文件。

你必须为 onSuccess 和 onnError 编写一个覆盖函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T07:12:47.420

javascript函数播放：

```
playAudioFile("spellsound");

function playAudioFile(id){
var s=document.getElementById(id);
    s.play();
} 
```

html 页面`<audio id='m' src='audio/baby/M.mp3'></audio>` ，或者你可以通过 DOM 中的 id 将 src 加载到音频标签

# ios - iCal 事件 - 通过 iOS 应用程序以编程方式添加

> ID：11606811
> 
> 赞同：2
> 
> 时间：2012-07-23T05:16:03.513
> 
> 标签：ios, xcode, icalendar

我有一个场景，用户单击 UIButton 并且事件自动添加到我的 iCal。在导入 #import 框架并添加 EKEventEditViewDelegate 之后，我应该如何添加事件开始日期和标题等。所有这些信息都作为文本文件从服务器下载。是否有任何功能可以帮助我设置活动日期时间和标题？我不应该打开 EventsViewController 而是在后端进行。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:25:15.787

我只是设置`EKEvent` `startDate`和`endDate`。我不知道你的意思是“在后端做”......

```
- (BOOL)createEvent:(NSString *)title 
                 at:(NSString *)location 
           starting:(NSDate *)startDate 
             ending:(NSDate *)endDate 
           withBody:(NSString *)body 
             andUrl:(NSURL *)url
{

    EKEventStore *eventStore = [[EKEventStore alloc] init];

    EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
    event.title     = title;
    event.location  = location;
    event.startDate = startDate;
    event.endDate   = endDate;
    event.notes     = body;
    if (url)
        event.URL   = url;

    [event setCalendar:[eventStore defaultCalendarForNewEvents]];

    EKEventEditViewController *eventViewController = [[EKEventEditViewController alloc] init];
    eventViewController.event = event;
    eventViewController.eventStore = eventStore;
    eventViewController.editViewDelegate = self;

    [_viewController presentModalViewController:eventViewController animated:YES];

    return TRUE;
} 
```

如果您想将服务器中的日期字符串转换为`NSDate`对象，`NSDateFormatter`通常可以完成这项工作（假设服务器日期文本字符串具有明确定义的格式）。例如，它可能会像这样工作：

```
NSString *sampleDate = @"7/23/12 2:30 pm";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"M/d/y h:mm a";

NSDate *date = [formatter dateFromString:sampleDate]; 
```

# shell - Shell 脚本：带引号的命令行参数

> ID：11606818
> 
> 赞同：1
> 
> 时间：2012-07-23T05:16:59.550
> 
> 标签：shell

我有一个脚本，它接受命令行参数，经过一些处理后，它将这些参数发送到 java 应用程序。

其中一些参数可以被引用，我想按原样发送这些参数（在引用中）。我正在使用以下脚本：

```
$ARGS=""
for a in $@; do
    ARGS = ${ARGS} ${a};
done
exec $JAR $ARGS 
```

其中**$JAR**包含运行 jar 的命令。
但是，如果我使用以下选项运行脚本：

```
script x y "a b" 
```

该脚本将三个参数视为*x*、*y*和*ab*。
我希望它将这些参数视为：*x*，*y*和*"a b"*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:19:56.983

[使用数组作为参数。](http://mywiki.wooledge.org/BashFAQ/050)

```
$ARGS=()
for a in "$@"; do
    ARGS+=("${a}")
done
exec "$JAR" "${ARGS[@]}" 
```

# jquery - 模型无法将带有组分隔符的字符串解析为长类型

> ID：11606819
> 
> 赞同：0
> 
> 时间：2012-07-23T05:17:11.110
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, number-formatting

我认为这应该很容易，但让我困惑了 2 天。

我使用 jquery.numberformatter-1.2.3.min.js 来格式化和解析用户输入。

```
$("#Qty").blur(function () { 
    $(this).parseNumber({ format: "#,###", 
                          locale: "us" }); 
    $(this).formatNumber({ format: "#,###", 
                           locale: "us" }); 
}); 
```

我有一个模型字段要显示在视图上

```
[Required]        
public long? Qty { get; set; }

<div class="display-field">@Html.TextBoxFor(model => model.Qty)</div> 
```

但是，当 use 输入“243,000”时，mvc3 控制器动作总是认为它的 long 无效。

我尝试使用数据注释格式属性，但没有运气。

```
[DisplayFormat(DataFormatString = "{0:#,###}", ApplyFormatInEditMode = true)] 
```

如何让 MVC 在我的操作中自动格式化用户输入并使模型状态有效？

似乎 jQuery numberformatter 停止了默认的 MVC 模型格式化程序来解释字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:54:01.847

尝试这个：

```
$("#Qty").blur(function () { 
    $(this).parseNumber({ format: "#.###", 
                          locale: "us" }); 
    $(this).formatNumber({ format: "#.###", 
                           locale: "us" }); 
});

[DisplayFormat(DataFormatString = "{0:#.###}", ApplyFormatInEditMode = true)] 
```

这可能是语言环境问题。如果这解决了您的问题，请告诉我，我们将从那里开始。

# javascript - MongoDB：如何调用另一个JS文件中定义的函数？

> ID：11606827
> 
> 赞同：4
> 
> 时间：2012-07-23T05:18:11.883
> 
> 标签：javascript, mongodb

我`func1`在文件 file_a.js 中定义了一个函数

我有另一个文件`file_b.js`，我想在其中使用该功能`func1`。我可以在 mongo 环境中执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:23:24.703

由于 AD7six Mongodb 控制台可以按照指定的顺序加载多个输入文件，因此修改了答案。

或者您可以像这样使用内置的加载功能

```
➜  mongotest  cat test.js
load("test2.js");
print("test.js");
foo();
➜  mongotest  cat test2.js
var foo = function() {
  print("test2.js");
};

➜  mongotest  mongo test.js
MongoDB shell version: 2.0.6
connecting to: test
test.js
test2.js 
```

test.js 是提供给 mongodb 控制台的文件，它加载 test2.js（包含函数 foo）并调用 foo

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:54:30.793

如果您是通过 cli 的意思（是吗？），您可以通过 mongo shell 加载多个 js 文件

```
$ mongo --help
MongoDB shell version: 2.0.6
usage: mongo [options] [db address] [file names (ending in .js)] 
```

注意文件名**s**

因此，您可以只加载这两个文件，file_a 的内容将可供 file_b 使用：

```
mongo [args] dbname file_a.js file_b.js 
```

# c# - 创建新的 C# 文件时命名空间错误？

> ID：11606829
> 
> 赞同：4
> 
> 时间：2012-07-23T05:18:28.537
> 
> 标签：c#, file, namespaces, project

我有两个名为*Hbt.DMS.BusinessLogic*和*Hbt.DMS.Web*的项目。在*Hbt.DMS.BusinessLogic*我有一个名为*Operations*的文件夹。当我尝试在*Operations*文件夹中创建新文件时，它会在文件中生成错误的命名空间。

```
ex: the generated namespace: Greenwich.DMS.Web.Operations
expected namespace: Greenwich.DMS.BusinessLogic.Operations 
```

我注意到当我尝试在*Hbt.DMS.BusinessLogic*项目的任何文件夹中创建新文件时会发生这种情况。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:21:16.813

确保您`Default namespace`在**项目属性中具有正确的属性**（例如`Greenwich.DMS.BusinessLogic`）。项目的可见名称不一定必须与默认命名空间相同。

# php - Javascript 或 jQuery 中的计数器

> ID：11606830
> 
> 赞同：1
> 
> 时间：2012-07-23T05:18:43.710
> 
> 标签：php, javascript, jquery, html

我正在开发一个调查网站，我想向用户展示还有多少问题需要回答。

由于问题是动态的，我从数据库中读取了要显示在计数器中的问题总数。

然后每次用户回答一个问题（*用户从单选按钮组中选择答案*）我都会将计数器减一，依此类推。

我有每当用户单击单选按钮时调用的函数，它运行良好。但是不知道怎么代表柜台？以及如何在屏幕上显示计数器？我应该将什么值传递给该函数？如果我们能以一种很好的视觉方式显示计数器也会很有帮助，即使用户向上或向下滚动，计数器也应该始终可见。

每个问题都是独一无二的：

```
<div id="Q1">What is your gender?
<input type='radio' name='RQ1' value='Male' onClick="RadioClicked(Q1)" />
<input type='radio' name='RQ1' value='Female' onClick="RadioClicked(Q1)" />
</div> 
```

这是 Javascript 函数，例如，我正在更改背景颜色以确保函数正常工作，但在此函数中，我应该减少计数器：

```
function RadioClicked(Question){
        document.getElementById(Question).style.backgroundColor = "Gray";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:25:36.547

尝试以下操作：

```
var q = $('div[id^="Q"]').length // number of questions
$('input[type=radio]').change(function(){
    $(this).parent().css('background-color', 'Gray');
    var remained = q - $('input[type=radio]:checked').length // number of unanswered questions
    $('#remaining').text(remained)
}) 
```

[演示](http://jsfiddle.net/Ze6VP/1/)

# sql - 如何根据sql中的输入参数过滤行？

> ID：11606832
> 
> 赞同：0
> 
> 时间：2012-07-23T05:19:02.397
> 
> 标签：sql, sql-server

我在编写这个查询时遇到了很大的问题。

如果我的样本数据看起来像这样......

```
id   Fruit name     Group      Type
-----------------------------------------
1    Orange         Citrus     null
2    Mango          Sweet      null
3    Red chilly     Hot        null
4    Green chilly   Hot        null
5    Green chilly   Hot        Organic 1
6    Green chilly   Hot        Organic 2 
```

我想创建一个接受`@FoodType`参数的存储过程。

*   当`@FoodType`作为 传递时`NULL`，SP 应该返回行`1, 2, 3`和`4`。
*   如果`@FoodType`是`Organic 2`，那么 SP 应该返回`1, 2, 3`和`6`。

在我的表中，`FruitName`列`Type`可能会创建一个复合唯一键，但我没有创建一个。

编写此类查询的最佳方法是什么？

更新：
当传递“有机 2”时，由于没有为第 4 行定义**类型**，因此第 6 行优先于第 4 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:03:32.100

如果您使用的是 SQL Server **2005**或更高版本（您没有提到...），请尝试此操作：

```
CREATE PROCEDURE dbo.GetFoods(@FoodType VARCHAR(20))
AS
    ;WITH Data AS
    (
        SELECT
            id, FruitName, GroupName, FruitType,
            RowNo = ROW_NUMBER() OVER (PARTITION BY FruitName ORDER BY FruitType DESC)
        FROM dbo.Fruits
        WHERE (FruitType IS NULL OR FruitType = @FoodType)
    )
    SELECT 
        id, FruitName, GroupName, FruitType
    FROM Data
    WHERE RowNo = 1 
```

在我的情况下，这似乎可以满足您的需求。

如果您通过`NULL`，您将返回行`1, 2, 3`和`4`

```
EXEC dbo.GetFoods @FoodType = NULL 
```

![在此处输入图像描述](../Images/57170badb9c144de74dff307042773f1.png)

如果你用 调用它`Organic 2`，你会回来：

```
EXEC dbo.GetFoods @FoodType = 'Organic 2' 
```

![在此处输入图像描述](../Images/e63874130ee6d26ea02055d64f3883ec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:22:27.767

你的问题不清楚；无论如何，考虑到您想在通过`1,2, 3, 4 and 6`时返回`'Organic 2'`，您可以创建这个存储。它将返回 is 的字段`NULL`，并且如果参数是`not NULL`，则将使用该条件进行过滤。

```
create procedure dbo.YourProcedureName
(
@FoodType varchar(20)
)
AS
BEGIN
select
id,Fruit, name, Group,Type 
from yourTable where Type IS NULL or Type = @FoodType 
END 
```

# css - 页面中有 2 个 div

> ID：11606835
> 
> 赞同：0
> 
> 时间：2012-07-23T05:19:34.090
> 
> 标签：css, html

我需要在旁边放置 2 个 div，第一个页面的宽度为 %20，第二个页面的宽度为 %80。我不知道我必须给 div 哪个位置。相对、固定、绝对、继承？

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:27:41.030

你可以这样写：

```
.firstdiv{
width:20%;
float:left;
}
.secdiv{
 overflow:hidden;
} 
```

检查这个[小提琴](http://jsfiddle.net/SB7dn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:22:01.413

不要给 div 任何位置，只需`float:left;`像往常一样使用并将宽度设置为 80%（或 79%）和 20%

```
div_first
{
float:left;
width:79%;
}
div_second
{
float:left;
width:20%;
} 
```

# javascript - 附加字符串时for循环中的Javascript [对象对象]错误

> ID：11606836
> 
> 赞同：0
> 
> 时间：2012-07-23T05:19:46.920
> 
> 标签：javascript, object

我是一个新手，试图将我的结果从 onSuccess 函数反序列化为：

```
 "onResultHttpService": function (result, properties) {
  var json_str = Sys.Serialization.JavaScriptSerializer.deserialize(result);
  var data = [];
  var categoryField = properties.PodAttributes.categoryField;
  var valueField = properties.PodAttributes.valueField;
  for (var i in json_str) {                   
       var serie = new Array(json_str[i] + '.' + categoryField, json_str[i] +     '.' + valueField);
                data.push(serie);
       } 
```

中的 JSON`result`如下所示：

```
[
    {
        "Text": "INDIRECT GOODS AND SERVICES",
        "Spend": 577946097.51
    },
    {
        "Text": "LOGISTICS",
        "Spend": 242563225.05
    }
] 
```

如您所见，我将字符串附加到 for 循环中。我这样做的原因是因为属性名称不断变化，因此我不能将其写为

```
 var serie = new Array(json_str[i].propName, json_str[i].propValue); 
```

我需要传递数据（数组类型）来绑定一个 highchart 柱状图。但是当我检查 var 系列时，它显示为

```
serie[0] = [object Object].Text
serie[1] = [object Object].Spend 
```

为什么我没有在数组中填充实际内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:27:11.320

你得到它是因为`json_str[i]`它是一个对象，当你将一个对象强制转换成一个字符串时就会发生这种情况（除非对象`toString`以一种有用的方式实现，而这显然没有）。~~您还没有显示要反序列化的 JSON...~~

现在您已经发布了 JSON，我们可以看到它是一个包含两个对象的数组，每个对象都有一个`Text`and`Spend`属性。因此，在您的循环中，`json_str[i].Text`将引用该`Text`属性。如果您想使用 中的名称检索该属性`categoryField`，您可以通过`json_str[i][categoryField]`.

我不知道你想以 in 结束`serie`，但如果你希望它是一个双槽数组，其中第一个包含类别字段的值，第二个包含支出字段的值，那么

```
var serie = [json_str[i][categoryField], json_str[i][valueField]]; 
```

（几乎没有理由使用`new Array`，只需使用数组文字 - `[...]` - 代替。）

# java - 对无限制的 Java 驻留集大小 (RSS) 增长进行故障排除

> ID：11606839
> 
> 赞同：2
> 
> 时间：2012-07-23T05:19:55.800
> 
> 标签：java, memory

我有一个独立的 Java 应用程序，它具有：

```
-Xmx1024m -Xms1024m -XX:MaxPermSize=256m -XX:PermSize=256m 
```

随着时间的推移，它会占用越来越多的内存，开始交换（并变慢）并最终死了很多次（不是 OOM+dump，只是死了，/var/log/messages 上什么都没有）。

到目前为止我已经尝试过：

1.  堆转储：活动对象从 1G 堆中占用 200-300Mb --> 可以使用堆
2.  活动线程的数量相当恒定（~60-70）-> 可以使用线程堆栈
3.  JMX 在某些时候停止回答（mb 它回答但超时时间较低）
4.  关闭交换 - 它死得更快
5.  strace - 似乎一切都变慢了，应用程序仍然没有死，并且不确定那里看起来有哪些东西
6.  检查顶部：VIRT 增长到 5.5Gb，RSS 增长到 3.7 Gb
7.  检查 vmstat（显然我们开始交换）：

    ```
     --------------------------procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------
    Sun Jul 22 16:10:26 2012:  r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
    Sun Jul 22 16:48:41 2012:  0  0 138652 2502504  40360 706592    1    0   169    21 1047  206 20  1 74  4  0
    . . . 
    Sun Jul 22 18:10:59 2012:  0  0 138648  24816  58600 1609212    0    0   124   669  913 24436 43 22 34  2  0
    Sun Jul 22 19:10:22 2012: 33  1 138644  33304   4960 1107480    0    0   100   536  810 19536 44 22 23 10  0
    Sun Jul 22 20:10:28 2012: 54  1 213916  26928   2864 578832    3  360   100   710  639 12702 43 16 30 11  0
    Sun Jul 22 21:10:43 2012:  0  0 629256  26116   2992 467808   84  176   278  1320 1293 24243 50 19 29  3  0
    Sun Jul 22 22:10:55 2012:  4  0 772168  29136   1240 165900  203   94   435  1188 1278 21851 48 16 33  2  0
    Sun Jul 22 23:10:57 2012:  0  1 2429536  26280   1880 169816 6875 6471  7081  6878 2146 8447 18 37  1 45  0 
    ```

8.  sar 还显示稳定的系统百分比增长 = 交换：

    ```
     15:40:02          CPU     %user     %nice   %system   %iowait    %steal     %idle
     17:40:01          all     51.00      0.00      7.81      3.04      0.00     38.15
     19:40:01          all     48.43      0.00     18.89      2.07      0.00     30.60
     20:40:01          all     43.93      0.00     15.84      5.54      0.00     34.70
     21:40:01          all     46.14      0.00     15.44      6.57      0.00     31.85
     22:40:01          all     44.25      0.00     20.94      5.43      0.00     29.39
     23:40:01          all     18.24      0.00     52.13     21.17      0.00      8.46
     12:40:02          all     22.03      0.00     41.70     15.46      0.00     20.81 
    ```

9.  检查 pmap 给出了以下最大的贡献者：

    ```
     000000005416c000 1505760K rwx--    [ anon ]
      00000000b0000000 1310720K rwx--    [ anon ]
      00002aaab9001000 2079748K rwx--    [ anon ] 
    ```

10.  试图将我从 pmap 中获得的地址与 strace 倾倒的东西相关联，但我没有找到匹配项

11.  添加更多内存是不切实际的（只是让问题稍后出现）

12.  无法切换 JVM（环境不受我们控制）

问题是： **我还能尝试找出问题的原因或尝试解决它吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:15:26.097

您的 JVM 中的某些东西正在使用“无限”数量的非堆内存。一些可能的候选人是：

*   线程堆栈。
*   由一些本机代码库分配的本机堆。
*   内存映射文件。

当您进行线程堆栈转储时，第一种可能性将显示为大量（并且越来越多）线程。（检查一下……好吗？）

如果您的应用程序（或它使用的某些第三部分库）不使用任何本机库，您可以（可能）消除第二个。

如果您的应用程序（或它使用的某些第三部分库）不使用内存映射文件，则可以消除第三个。

* * *

我猜你没有看到 OOME 的原因是你的 JVM 被 Linux OOM 杀手杀死了。JVM 也有可能在本机代码中摆脱困境（例如，由于 malloc 故障未得到正确处理），但我认为 JVM 崩溃转储将是更可能的结果......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:18:03.133

问题出在附加的分析器库中 - 它记录了 CPU 调用/分配站点，因此需要内存来存储它。

所以，这里的**人为因素**:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-09T04:24:51.363

Java 和 glibc >= 2.10（包括 Ubuntu >= 10.04，RHEL >= 6）存在一个已知问题。

解决方法是设置这个环境。多变的： `export MALLOC_ARENA_MAX=4`

有一篇关于设置 MALLOC_ARENA_MAX 的 IBM 文章 [https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en](https://www.ibm.com/developerworks/community/blogs/kevgrig/entry/linux_glibc_2_10_rhel_6_malloc_may_show_excessive_virtual_memory_usage?lang=en)

[这篇博文说](https://www.infobright.com/index.php/malloc_arena_max)

> 众所周知，常驻内存会以类似于内存泄漏或内存碎片的方式蠕动。

在 Google 或 SO 上搜索 MALLOC_ARENA_MAX 以获取更多参考。

您可能还想调整其他 malloc 选项以优化分配内存的低碎片：

```
# tune glibc memory allocation, optimize for low fragmentation
# limit the number of arenas
export MALLOC_ARENA_MAX=2
# disable dynamic mmap threshold, see M_MMAP_THRESHOLD in "man mallopt"
export MALLOC_MMAP_THRESHOLD_=131072
export MALLOC_TRIM_THRESHOLD_=131072
export MALLOC_TOP_PAD_=131072
export MALLOC_MMAP_MAX_=65536 
```

# html - 在 Html5 的画布内创建 TextBox

> ID：11606842
> 
> 赞同：0
> 
> 时间：2012-07-23T05:20:07.473
> 
> 标签：html

我正在尝试放置一个`TextBox`内部 html5。可以在`TextBox`里面放一个`Canvas`吗？如果是，那么请帮我做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:16:03.223

这真的很简单。

您必须将文本框放在 div 中，然后更改 div 位置。为了做到这一点，在你的身体标签下：

```
<body>
  <form id="form1" runat="server">
                <div id="mytext"> 
                            <asp:TextBox ID="txtTest" runat="server"></asp:TextBox>
                </div> ..... 
```

在你的 head 标签下：

```
<head id="Head1" runat="server">
<style type="text/css">
    #mytext {
    position: absolute;
    left: 36%;
    top: 725px;
    z-index: 999;
    }

</style> 
```

通过更改 left 和 top 值，您可以将文本框放在画布上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:32:32.337

画布用于放置图形元素，如绘图、形状等。您不能将表单元素放在画布上。你需要包括一个`div`或类似的东西来做到这一点。

# xml - http进入vb6并接收xml数据

> ID：11606843
> 
> 赞同：1
> 
> 时间：2012-07-23T05:20:07.497
> 
> 标签：xml, vb6, http-get

我对vb6了解不多。我有一个问题
，我需要向服务器发出 http get 请求，响应将是一些 xml 数据。我还必须通过查询字符串向服务器发送一些数据。我是 vb6 的新手，不知道该怎么做。需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:12:37.840

最好的办法是使用 DOMDocument 类，它应该适用于从 2000 到 7 的所有 Windows 版本。添加对“Microsoft Xml”版本的引用。

```
Dim oDocument As MSXML2.DOMDocument

Set oDocument = New MSXML2.DOMDocument
oDocument.Load "http://xmlserver.domainname?myQueryString"

Do Until oDocument.readyState = 4
    DoEvents
Loop

Parse(oDocument.DocumentElement)
DisplayXml(oDocument.Xml) 
```

# c++ - 在 printf() 中使用宽度

> ID：11606847
> 
> 赞同：2
> 
> 时间：2012-07-23T05:21:14.880
> 
> 标签：c++, c, printf

语句中的宽度有什么用`printf()`？为什么下面示例中的输出为 7？

### 代码

```
int add(int x, int y)
{
    return printf("%*c%*c",  x, '\r',  y, '\r');
}

int main()
{
    printf("Sum = %d", add(3, 4));
    return 0;
} 
```

### 输出

> 总和 = 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:28:05.000

A）这对 printf 来说是一件非常疯狂的事情。但是既然你问...

B)`%*c`表示接受 printf 的下两个参数，并将它们解释为宽度和字符。在指定宽度的字段中打印该字符。在这种情况下，打印一个`x`包含字符的域宽`\r`。`y`和相同`\r`。Printf 返回打印的字符总数，在本例中为`x+y`.

所以输出实际上是`x-1`空格，一个`\r`字符，`y-1`空格，另一个`\r`字符（或者是字符左对齐？），然后是`Sum = 7`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T05:29:43.260

`printf`返回输出的字符数。`%*c`表示打印一个字符并填充到参数指定的宽度。所以`printf("%*c", 3, '\r')`意味着在它之前打印一个带有 2 个空格的回车。`printf("%*c%*c", n, '\r', m, '\r')`因此打印`n`+`m`字符 - 即`n`- 1 个空格来填充第一个`\r`，`m`- 1 个空格来填充第二个`\r`，然后两个回车符。这就是它返回 7 的原因。

A carriage return takes you back to the start of the line, so after printing those `n` + `m` characters the next thing printed will appear at the start of the line. That means `"Sum = "` overwrites the output of the first printf.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T05:25:56.343

如果成功[printf](http://en.cppreference.com/w/cpp/io/c/fprintf)返回打印的字符数。因此，您的`printf`调用正在打印函数中`main` 打印的字符数，因为这是返回的内容。`printf``add``add`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T05:29:13.207

查阅任何[手册](http://linux.die.net/man/3/printf)显示`printf`返回打印的字符数，不包括空终止符。`%*c`接受*两个*参数，第一个是字段宽度（因此分别为 3 和 4），第二个是实际打印的字符。在这种情况下，该字符是一个回车符 ( `\r`)，您可能在终端上看不到它。由于这两个字符是用填充打印的，所以打印一个长度为 7 的字符串，并返回 7。

由于您无法分辨空格和回车符，因此看起来根本没有打印任何内容-尝试将输出通过管道传输到文件`hexdump`中，或者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T05:26:51.550

printf 返回打印的字符数。在这种情况下，您通过指定 x 和 y 作为输出长度来打印 7 个字符。如果将 return 语句更改为：

```
return printf("%*c%*c\n",  x, '\r',  y, '\r'); 
```

输出将为 8，因为还打印了一个新行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T05:27:42.017

鉴于您的函数名称是 add，我非常怀疑这是您的意图。

printf() 返回打印的字符数，在这种情况下显然是 7 个字符。然后，您将返回 printf() 返回的值并打印它。

似乎是一件很奇怪的事情。你期待什么？

# html - 在jsp中显示图像

> ID：11606851
> 
> 赞同：0
> 
> 时间：2012-07-23T05:21:38.547
> 
> 标签：html, jsp

嗨，我正在jsp中创建一个网页，我必须从路径显示图像，该路径是我存储图像的文件夹。但是当我运行文件时，我只看到路径名但不显示图像。谁能帮忙我用下面的代码。

代码：

```
<%@page import="java.io.*"%>
<html>
<body>

<table>
<%
File f = new File("C:/UploadedFiles");
File[] files = f.listFiles();
for(int i=0;i<files.length;i++){
String name=files[i].getName();
String path=files[i].getPath();

%>
<tr>
<td><img src="<%=path=name%>"/></a></td>
</tr>
<%
}
%>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-11T04:55:22.870

首先获取该路径中存在的所有文件名

```
public class ManipulateImage {    
public static String[]  display(){

             File folder = new File("C:/Folder Name");
             File[] listOfFiles = folder.listFiles();
             String [] k = new String[listOfFiles.length];
             Arrays.fill(k,"none");

                 for (int i = 0; i < listOfFiles.length; i++) {
                   if (listOfFiles[i].isFile()) {
                     System.out.println("File " + listOfFiles[i].getName());
                     k[i]="File " + listOfFiles[i].getName();
                   } else if (listOfFiles[i].isDirectory()) {
                     System.out.println("Directory " + listOfFiles[i].getName());
                   }

                 }
                 return k;
         }
} 
```

然后在 JSP 中获取存在的文件数

```
<%
    String[] k=ManipulateImage.display();
    int l=k.length;
%> 
```

获取显示图像的 URL，您不能直接从文件夹中显示图像，因此您需要创建一个 Servlet。

```
 for(int i=0;i<k.length;i++){
              j[i]=k[i].substring(5);
              link[i]="http://localhost:8080/ImageUploadWebApp/DisplayImageServlet/images/"+j[i];
        }
 URL[] url= new URL[k.length]; 
    for(int i=0;i<k.length;i++){
    url[i]= new URL(link[i]);
    } 
```

在网页中显示图像

```
<%
    for(int i=0; i< k.length ;i++){
        out.println(" <img id='copyimg"+i+"' alt='img' style='width:304px;height:228px;' src="+url[i]+">");

     } 
%> 
```

小服务程序代码

```
public class DisplayImageServlet extends javax.servlet.http.HttpServlet implements javax.servlet.Servlet {
static final long serialVersionUID = 1L;
String image_name = "";
ResourceBundle props = null;
String filePath = "";
private static final int BUFSIZE = 100;
private ServletContext servletContext;
public DisplayImageServlet() {
super();
}
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
System.out.println("FROM SERVLET");
sendImage(getServletContext(), request, response);
}
public void sendImage(ServletContext servletContext,
HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
this.servletContext = servletContext;
String reqUrl = request.getRequestURL().toString();
StringTokenizer tokens = new StringTokenizer(reqUrl, "/");
int noOfTokens = tokens.countTokens();
String tokensString[] = new String[noOfTokens];
int count = 0;
while (tokens.hasMoreElements()) {
tokensString[count++] = (String) tokens.nextToken();
}
String folderName = tokensString[noOfTokens - 2];
image_name = tokensString[noOfTokens - 1];
filePath = "/" + folderName + "/" + image_name;
String fullFilePath = "C:/Folder Name" + filePath;
System.out.println("FULL PATH :: "+fullFilePath);
doDownload(fullFilePath, request, response);
}
private void doShowImageOnPage(String fullFilePath,
HttpServletRequest request, HttpServletResponse response)
throws IOException {
response.reset();
response.setHeader("Content-Disposition", "inline");
response.setHeader("Cache-Control", "no-cache");
response.setHeader("Expires", "0");
response.setContentType("image/tiff");
byte[] image = getImage(fullFilePath);
OutputStream outputStream = response.getOutputStream();
outputStream.write(image);
outputStream.close();
}
private void doDownload(String filePath, HttpServletRequest request,
HttpServletResponse response) throws IOException {
File fileName = new File(filePath);
int length = 0;
ServletOutputStream outputStream = response.getOutputStream();
ServletContext context = servletContext;
String mimetype = context.getMimeType(filePath);
response.setContentType((mimetype != null) ? mimetype
: "application/octet-stream");
response.setContentLength((int) fileName.length());
response.setHeader("Content-Disposition", "attachment; filename=\""
+ image_name + "\"");
byte[] bbuf = new byte[BUFSIZE];
DataInputStream in = new DataInputStream(new FileInputStream(fileName));
while ((in != null) && ((length = in.read(bbuf)) != -1)) {
outputStream.write(bbuf, 0, length);
}
in.close();
outputStream.flush();
outputStream.close();
}
private byte[] getImage(String filename) {
byte[] result = null;
String fileLocation = filename;
File f = new File(fileLocation);
result = new byte[(int)f.length()];
try {
FileInputStream in = new FileInputStream(fileLocation);
in.read(result);
}
catch(Exception ex) {
System.out.println("GET IMAGE PROBLEM :: "+ex);
ex.printStackTrace();
}
return result;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:28:25.733

您可以使用以下路径：

```
File f = new File("C:/UploadedFiles/abc.jpg"); 
```

而不是写

```
File f = new File("C:/UploadedFiles"); 
```

您使用的文件路径仅采用文件夹的路径而不是图像的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:28:45.300

尝试这样的事情

```
<td><img src="<%=path%>"/"<%=name%>"></td> 
```

想法是在 img 标签中给出文件名和路径。如果有问题，请原谅我，因为我不知道 JSP

# java - 更改 JTable 的背景颜色

> ID：11606852
> 
> 赞同：1
> 
> 时间：2012-07-23T05:21:38.750
> 
> 标签：java, swing, background, jtable, jscrollpane

我添加了一个表格，但问题是，面板没有显示其背景颜色。我试过设置滚动窗格背景颜色等。但它不起作用。该框架有一个“验证”按钮，单击该按钮时会在其下方显示一个表格。在单击之前，表格将出现的部分是纯灰色的。我希望整个部分都是象牙色背景。请帮助我诊断问题。

```
try
{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection conn1=DriverManager.getConnection("jdbc:odbc:vasantham","","");
    Statement st1=conn1.createStatement();
    ResultSet rs1=st1.executeQuery("select * from try where DATEDIFF('d',NOW(),exdate) &lt; 61 order by tname");
    ResultSetMetaData md1=rs1.getMetaData();
    int cols1=md1.getColumnCount();
    model1=new DefaultTableModel();
    model1.addColumn("Purpose");
    model1.addColumn("Name");
    model1.addColumn("Composition");
    model1.addColumn("Expiry");
    model1.addColumn("Stock");
    model1.addColumn("Cost");
    model1.addColumn("Type");
    model1.addColumn("Supplier");
    model1.addColumn("Supplier Number");
    model1.addColumn("Rack");
    table1=new JTable(model1);
    Color ivory=new Color(255,255,208);
    table1.setOpaque(false);
    table1.setBackground(ivory);
    String[] tabledata1=new String[cols1];
    int i=0;
    while(rs1.next())
    {
        for(i=0;i&lt;cols1;i++)
        {
            if(i==3)
            {
                Date intr1=(rs1.getDate(i+1));
                tabledata1[i]=formatter1.format(intr1);
            }
            else
            tabledata1[i]=rs1.getObject(i+1).toString();
        }
        model1.addRow(tabledata1);
    }
    JScrollPane scroll1 = new JScrollPane(table1);
    scroll1.setBackground(new Color(255,255,208));
    scroll1.getViewport().setBackground(ivory);
    panel1.setLayout(new BorderLayout());
    panel1.setBackground(ivory);
    table1.getTableHeader().setBackground(ivory);
    panel1.add(scroll1,BorderLayout.CENTER);
    frame1.add(panel1,BorderLayout.CENTER);
    conn1.close();
} 
```

![输出](../Images/9383c8a3eb412bab1aa8125975700ed6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:40:51.787

滚动窗格包含另一个组件，称为 ViewPort。这实际上是添加分配给滚动窗格的组件的位置。

如果要将 JTable 保持为透明 ( `table1.setOpaque(false);`)，则需要更改视口背景

```
scroll1.getViewport().setBackground(ivory); 
```

否则，将表格设置为不透明并`table1.setFillsViewportHeight(true);`强制表格填充整个视口

**更新**

对我来说很好

```
model1 = new DefaultTableModel();
model1.addColumn("Purpose");
model1.addColumn("Name");
model1.addColumn("Composition");
model1.addColumn("Expiry");
model1.addColumn("Stock");
model1.addColumn("Cost");
model1.addColumn("Type");
model1.addColumn("Supplier");
model1.addColumn("Supplier Number");
model1.addColumn("Rack");

for (int index = 0; index < 10; index++) {

    Vector vector = new Vector();
    vector.add("p" + index);
    vector.add("n" + index);
    vector.add("c" + index);
    vector.add("e" + index);
    vector.add("s" + index);
    vector.add("c" + index);
    vector.add("t" + index);
    vector.add("s" + index);
    vector.add("s" + index);
    vector.add("r" + index);

    model1.addRow(vector);

}

table1 = new JTable(model1);
Color ivory = new Color(255, 255, 208);
table1.setOpaque(true);
table1.setFillsViewportHeight(true);
table1.setBackground(ivory);

JScrollPane scroll1 = new JScrollPane(table1);
table1.getTableHeader().setBackground(ivory);
add(scroll1, BorderLayout.CENTER); 
```

您可以注释掉行创建部分，它仍会以象牙色绘制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:40:17.373

为什么你的意思是不起作用？？？

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

public class TableCellClass {

    private JFrame frame = new JFrame("Table Demo");
    private String[] columnNames = {"String", "Integer", "Float", "Double", "Locale & Double", "Boolean"};
    private Object[][] data = {
        {"aaa", new Integer(12), new Float(12.15), new Double(100.05), new Double(12.05), true},
        {"bbb", new Integer(5), new Float(7.154), new Double(6.1555), new Double(417.55), false},
        {"CCC", new Integer(92), new Float(0.1135), new Double(3.1455), new Double(11.05), true},
        {"ddd", new Integer(12), new Float(31.15), new Double(10.05), new Double(23.05), true},
        {"eee", new Integer(5), new Float(5.154), new Double(16.1555), new Double(17.55), false},
        {"fff", new Integer(92), new Float(4.1135), new Double(31.1455), new Double(3.05), true}};
    private TableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };
    private JTable table = new JTable(model);

    public TableCellClass() {
        table.setRowHeight(20);
        //table.setPreferredScrollableViewportSize(table.getPreferredSize());
        table.setBackground(Color.red);
        JScrollPane scroll = new JScrollPane(table);
        scroll.getViewport().setBackground(Color.blue);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scroll);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                TableCellClass tableCellClass = new TableCellClass();
            }
        });
    }
} 
```

这可能会更好，如果你想玩不透明度？？？

```
import java.awt.*;
import javax.swing.*;

public class TableWithTimer  {

    private static final long serialVersionUID = 1L;
    private JFrame frame = new JFrame();
    private JScrollPane scroll = new JScrollPane();
    private JTable myTable;
    private String[] head = {"One", "Two", "Three", "Four", "Five", "Six"};
    private String[][] data = new String[25][6];

    public TableWithTimer() {
        myTable = new TableBackroundPaint0(data, head);
        myTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        myTable.setGridColor(Color.gray);
        myTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        scroll.setViewportView(myTable);
        frame.add(scroll, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TableWithTimer tableWithTimer = new TableWithTimer();
            }
        });
    }
}

class TableBackroundPaint0 extends JTable {

    private static final long serialVersionUID = 1L;

    TableBackroundPaint0(Object[][] data, Object[] head) {
        super(data, head);
        setOpaque(false);
        ((JComponent) getDefaultRenderer(Object.class)).setOpaque(false);
    }

    @Override
    public void paintComponent(Graphics g) {
        Color background = new Color(168, 210, 241);
        Color controlColor = new Color(230, 240, 230);
        int width = getWidth();
        int height = getHeight();
        Graphics2D g2 = (Graphics2D) g;
        Paint oldPaint = g2.getPaint();
        g2.setPaint(new GradientPaint(0, 0, background, width, 0, controlColor));
        g2.fillRect(0, 0, width, height);
        g2.setPaint(oldPaint);
        for (int row : getSelectedRows()) {
            Rectangle start = getCellRect(row, 0, true);
            Rectangle end = getCellRect(row, getColumnCount() - 1, true);
            g2.setPaint(new GradientPaint(start.x, 0, controlColor, (int) ((end.x + end.width - start.x) * 1.25), 0, Color.orange));
            g2.fillRect(start.x, start.y, end.x + end.width - start.x, start.height);
        }
        super.paintComponent(g);
    }
} 
```

# ruby-on-rails - 在 Rails 中使用模态创建和编辑对象

> ID：11606855
> 
> 赞同：5
> 
> 时间：2012-07-23T05:21:52.023
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog

我一直在尝试使用 Rails 中索引 html 中的模式视图创建和编辑对象。我在项目中使用 twitter bootstrap。到目前为止，我成功地使用模态创建对象。为了让事情正常工作，我必须在我的索引操作中创建一个名为 @post = Post.new 的对象。

由于在显示编辑模式之前，编辑对象必须准备好为@post = Post.find(params[:id])，但它发生在编辑操作中。

他们是一种我可以在显示之前为我的编辑模式视图初始化@post的方法吗？

这是我的代码：

index.html.erb

```
<div class="page-header">
    <h1>Posts</h1>
</div>

<% @posts do |post| %>
  <tr>
    <td><%= post.name %></td>
    <td><%= post.description %></td>

    <td><%= link_to 'Edit', edit_post_path(post), :class => 'btn btn-mini btn-min-standard-width',  :data => {:toggle => "modal", :target => "#editItemModal"} , :remote => true %>
        <%= link_to 'Destroy', post, confirm: 'Are you sure?', method: :delete, :class => 'btn btn-mini btn-danger btn-min-standard-width'  %></td>
  </tr>
<% end %>

<%= link_to 'New Item', new_post_path, 
        :class => 'btn btn-primary btn-standard-width' ,  :data => {:toggle => "modal", :target => "#newItemModal"} , :remote => true %>

<div id="newItemModal" class="modal hide fade" >
    <button type="button" class="close" data-dismiss="modal">×</button></h1>
    <div class="page-header">
        <h1>New item </h1>
    </div>

    <%= render :partial => 'form' %>
</div>

<div id="editItemModal" class="modal hide fade" >
    <button type="button" class="close" data-dismiss="modal">×</button></h1>
    <div class="page-header">
        <h1>Edit item </h1>
    </div>

    <%= render :partial => 'form' %>
 </div> 
```

_form.html.erb

```
<%if @post%>

    <%= form_for(@post, :html => { :class => 'form-horizontal', :remote => true } ) do |f| %>

     <div class="control-group">
        <%= f.label :name, :class => 'control-label' %>
        <div class="controls">
           <%= f.text_field :name %>
       </div>
     </div>
    <div class="control-group">
        <%= f.label :description, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_area :description %>
        </div>
     </div>

    <div class="form-actions">
       <%= f.submit nil, :class => 'btn btn-primary' %>
     </div>

    <% end %>
<% end %> 
```

后控制器

```
class PostsController < ApplicationController

 def index
    @post = Post.new
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end

 def show
    @post = Post.find(params[:id])

    respond_to do |format|
       format.html # show.html.erb
       format.json { render json: @post }
     end
  end

 def new
    @post = Post.new
 end

  def edit
    @post = Post.find(params[:id])
    respond_to do |format|
      format.html
     format.json { render json: @post }
    end
  end 
```

…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:38:00.727

只要我了解您想在编辑模式视图中使用实例变量@post。

在不知道您的代码库的情况下，我能说什么：

1.  在渲染edit modal view的controller中找到对应的action，如果没有就创建一个
2.  使用 id 找到的模型 Post 初始化 @post，只需将其复制并粘贴到正确的操作中
3.  在视图范围内调用它

希望这能回答你的问题

# html - 使用 html 重复背景，使用 css 粘性页脚将主体高度设置为 100%

> ID：11606856
> 
> 赞同：0
> 
> 时间：2012-07-23T05:21:58.207
> 
> 标签：html, css, background-image, sticky-footer

# 问题

我正在使用[这个](http://www.cssstickyfooter.com/)CSS 粘性页脚的实现。它确实：

```
html,body{
    height:100%;
} 
```

我使用（希望）使用重复背景，但是，`height:100%`导致此问题的原因：（ ![在此处输入图像描述](../Images/9c2e6b92da9da01cb06457aaa404b68e.png)来自[另一个](https://stackoverflow.com/questions/8696911/background-cuts-off-when-html-and-body-height-are-set-to-100)粘性页脚问题的图像，答案不令人满意）

我的理解是图像在渲染时被调整为窗口的大小，因此永远不会超过这个大小。

# 问题

是否可以继续使用我现有的 CSS 粘性页脚选择，并在长页面上完全呈现重复的背景图像

或者

是否有另一种支持重复背景的 CSS 粘性页脚选项？

### 以供参考

```
<div id="wrap">
    <div id="header">Header text</div>
    <div id="main">

    </div>
</div>
<div id="footer">Footer Text</div> 
```

CSS

```
* {margin:0;padding:0;} 
html, body {height: 100%;}
#wrap {min-height: 100%;}
#main {overflow:auto;
    padding-bottom: 180px;}  /* must be same height as the footer */
#footer {position: relative;
    margin-top: -180px; /* negative value of footer height */
    height: 180px;
    clear:both;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:30:54.983

只需添加额外的包装。至少我总是这样做。并将 bg-image 附加到 div#no-footer，它将拉伸到底部

```
html, body {
    height:100%;
}
#wrap {
    min-height:100%;
    background-image:url(...) top left repeat-x;
}
#no-footer-pad {
    padding-bottom:100px;
}
#footer {
    height:100px;
    margin-top:-100px;
} 
```

html标记：

```
<html>
<head></head>
<body>
    <div id="wrap">
         <div id="no-footer-pad"></div>
    </div>
    <div id="footer"></div>
</body> 
```

所以你几乎有了这个标记，你必须简单地添加额外的div（`#no-footer-pad`），这样你的内容就不会重叠页脚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:26:19.050

嘿，现在用来固定这个粘性页脚的位置，就像这样

```
.footer{
position:fixed;
bottom:0;
left:0;
right:0;
height:xxxx;
} 
```

# r - R：readBin 和 writeBin（用于存储/检索 MySQL BLOB 或 LONGBLOB）

> ID：11606858
> 
> 赞同：6
> 
> 时间：2012-07-23T05:22:16.257
> 
> 标签：r, binary, blob

我正在使用 readBin 函数将文件保存为 MySQL BLOB，如本文所述（[http://www.r-bloggers.com/save-r-plot-as-a-blob/](http://www.r-bloggers.com/save-r-plot-as-a-blob/)）

```
plot_binary <- paste(readBin("temp.png", what="raw", n=1e6), collapse="") 
```

我的问题是：一旦它在数据库中，我如何将它转储回文件中？

```
> f = file ( "backIntoFile.png", "wb")
> writeBin(object = plot_binary, con = f ) 
> close(f) 
```

这不起作用；该文件似乎不是有效的 png ；

干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:48:45.583

最好不要使用“粘贴”，因为它将原始数据向量更改为无法作为二进制文件写回的字符串。尝试

```
plot_binary <- readBin("temp.png", what="raw", n=1e6)

> f = file ( "backIntoFile.png", "wb")
> writeBin(object = plot_binary, con = f ) 
> close(f) 
```

我回答你的问题了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:06:33.927

这是迄今为止我找到的最佳解决方案。DbDownloadImages 函数需要很短的时间来执行（实际上几乎没有时间）。

```
# Helper function I use
Paste <- function(string, vals)
{
    string <- gsub(x = string, pattern = '\\?', replacement = "%s")
    result <- do.call(sprintf, as.list(c(string,vals)))
    return(result)
}
# conn is a RMySQL connection object
DbInsertImage <- function( conn, link.to.file ) 
{

        binary = readBin ( link.to.file , what = "raw", n = 1e6 ) 
        binary.str = paste ( binary, collapse = "" ) 
        statement = Paste ( "CALL InsertImage('?')" , c(binary.str))
        dbSendQuery(conn, statement )
        return(GetIdentity(conn)) # one of my helper functions ; 
            # it returns the "LAST INSERT ID" 
}

#conn is a RMySQL connection object 
DbDownloadImage <- function( conn, id, destination) 
{

    query = "SELECT Data FROM Image WHERE Id = ? LIMIT 1" 
    query = Paste( query, c( id ) )
    result = dbGetQuery(conn, query )$Data[1]

    sst <- strsplit(result, "")[[1]]
    result <- paste0(sst[c(TRUE, FALSE)], sst[c(FALSE, TRUE)])
    result <- as.raw ( as.hexmode ( result ) ) 

    f = file ( destination, "wb")

    writeBin(object = result, con = f ) 
    close(f)
} 
```

另请参阅： [如何将字符串拆分为给定长度的子字符串？](https://stackoverflow.com/questions/11619616/how-to-split-a-string-into-substrings-of-a-given-length)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:12:43.307

这是我的解决方案：

```
binary.string <- paste(readBin("temp.png", what="raw", n=1e6), collapse="-") 
```

*   将此对象作为 BLOB 保存到数据库中

从数据库下载后如何将其重新保存为 png ？

```
> split = strsplit ( binaryString, split = "-" )
> split = unlist ( split )
> back.to.binary = as.raw ( as.hexmode ( split ) ) 
> f = file ( "backIntoFile.png", "wb")
> writeBin(object = back.to.binary, con = f ) 
> close(f) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T02:02:10.023

好的，我在这里添加另一个解决方案。首先，要获取您可以使用的文件的大小

```
sz <- as.integer(system("stat --format %s temp.png", intern=T)) 
```

除此之外，MadSeb 的回答让我明白了最初的问题的真正目的。在两个字节之间添加“-”是一个很好的解决方案，但是，如果您必须节省 1/3 磁盘空间，这是一个愚蠢的方法：（需要很长时间）

```
plot_binary <- paste(readBin("temp.png", what="raw", n=1e6), collapse="")
theBinary <- unlist(lapply((1:(nchar(plot_binary)/2))*2, function(i)return(as.raw(as.hexmode(substr(plot_binary,i-1,i)))))) 
```

# jquery - 使用 jQuery 获取选定的值

> ID：11606869
> 
> 赞同：0
> 
> 时间：2012-07-23T05:24:12.933
> 
> 标签：jquery

我正在使用这个[双列表框插件](http://www.meadmiracle.com/dlb/DLBDocumentation.aspx)，我正在尝试使用从 box1 到 box2 中选择的 jQuery 的 onClick 事件来获取值，

这是我正在使用的代码

```
<form action="" method="post" class="form" id="purchaseEditUpdateItemForm">
<div class="widget">
    <div class="title">
        <img src="/images/icons/dark/full2.png" alt="" class="titleIcon" />
        <a href="#" class="button blueB" id="purchaseEditUpdateItemBtn" style="margin: 4px;">
            <span>Update</span>
        </a>
    </div>
    <div class="body">
        <div class="leftPart">
            <div class="filter">
                <span>Filter:</span>
                <input type="text" id="box1Filter" class="boxFilter" />
                <input type="button" id="box1Clear" class="fBtn" value="x" />
                <div class="clear"></div>
            </div>
            <select id="box1View" multiple="multiple" class="multiple" style="height:200px;">
                <option value="5">ITEM005</option>
                <option value="6">ITEM006</option>
                <option value="7">ITEM007</option>
                <option value="8">ITEM008</option>
            </select>
            <br/>
            <span id="box1Counter" class="countLabel"></span>
            <div class="dn">
                <select id="box1Storage" name="box1Storage"></select>
            </div>
        </div>
        <div class="dualControl">
            <button id="to2" type="button" class="basic mr5 mb15">&nbsp;&gt;&nbsp;</button>
            <button id="allTo2" type="button" class="basic">&nbsp;&gt;&gt;&nbsp;</button>
            <br />
            <button id="to1" type="button" class="basic mr5">&nbsp;&lt;&nbsp;</button>
            <button id="allTo1" type="button" class="basic">&nbsp;&lt;&lt;&nbsp;</button>
        </div>
        <div class="rightPart">
            <div class="filter">
                <span>Filter:</span>
                <input type="text" id="box2Filter" class="boxFilter" />
                <input type="button" id="box2Clear" class="fBtn" value="x" />
                <div class="clear"></div>
            </div>
            <select id="box2View" multiple="multiple" class="multiple" style="height:200px;">
                <option value="1">ITEM001</option>
                <option value="2">ITEM002</option>
                <option value="3">ITEM003</option>
                <option value="4">ITEM004</option>
            </select>
            <br/>
            <span id="box2Counter" class="countLabel"></span>
            <div class="dn">
                <select id="box2Storage"></select>
            </div>
        </div>
        <div class="clear"></div>
    </div>
</div>
</form> 
```

我正在尝试类似的东西？（我知道下面的代码不实用）

```
$('#purchaseEditUpdateItemBtn').live('click', function(){
    var formData = $('#purchaseEditUpdateItemForm').serialize();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:37:03.960

你有没有尝试过这样的事情：

```
$('#purchaseEditUpdateItemBtn').click(function(){
   //If the items do not get the "selected" attribute, you could also use this:
   var items = $("select#boxview2 option");

$.each(items, function(index, elem){
   //this will log the value for each item inside the boxview2 list
   console.log(elem.val);
});
}); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:46:22.503

使用`serialize()`表单元素时必须具有`name`属性：

```
<select name='box1View' id="box1View" multiple="multiple" class="multiple" style="height:200px;">
    <option value="5" selcted>ITEM005</option>
    <option value="6">ITEM006</option>
    <option value="7">ITEM007</option>
    <option value="8">ITEM008</option>
</select> 
```

请注意`live`已弃用，您可以改用`on()`方法，请尝试以下操作：

```
$('form').on('click', 'a.button', function(){
    var formData = $('select').serialize();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:42:21.677

试试这个

```
$("#purchaseEditUpdateItemBtn").click(function(event){
console.log("Selected from box 1 "+$("select#box1View option:selected")); // selected from #box1View
console.log("Selected from box 2 "+$("select#box2View option:selected")); // selected from #vow2View
console.log($("#purchaseEditUpdateItemForm").serialize());
}); 
```

# jmeter - 使用 Jmeter 对 Oracle ATG 电子商务进行负载测试

> ID：11606870
> 
> 赞同：0
> 
> 时间：2012-07-23T05:24:26.300
> 
> 标签：jmeter, load-testing, performance-testing, atg

我有一个查询。
有没有人使用 Jmeter 对用 ATG 编写的 Web 应用程序进行负载测试？

如果是这样，请告诉我如何设置值：

1.  请求网址
2.  请求参数

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:35:17.947

ATG 现在是[Oracle 产品](http://www.oracle.com/us/corporate/Acquisitions/atg/index.html)。

至于答案，因为 ATG 是一个非常大的产品，所以在关注哪个模块上应该给出一些精度。

我这边已经使用 JMeter ATG 电子商务模块、搜索引擎和密件抄送进行了负载测试。

您要求的内容与常规 JMeter 脚本没有什么不同，最好的办法是阅读[构建 Web 测试计划](http://jmeter.apache.org/usermanual/build-web-test-plan.html)，一旦完成此操作，请使用[JMeter 代理记录](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

问候

菲利普·M。

[http://www.ubik-ingenierie.com](http://www.ubik-ingenierie.com)

# jquery - fancybox 2 和 tinymce jquery 冲突

> ID：11606872
> 
> 赞同：2
> 
> 时间：2012-07-23T05:24:45.607
> 
> 标签：jquery, tinymce, fancybox

我在网站上的许多区域都使用了 fancybox-2.0.1，并且一直这样做没有问题。我也一直在将tinymce的jquery实现与fancybox结合使用，没有问题。但是，由于我将 tinymce inti 脚本更改为如下所示，我开始遇到问题：

```
<script type="text/javascript" src="tinymceJQ/jscripts/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
$(function() {

var $editor = $("#appContentTextArea");

// Initialize WYSIWYG
$editor.tinymce({
    script_url : 'tinymceJQ/jscripts/tiny_mce/tiny_mce.js',
    theme : "advanced",
    mode : modeAlter,
    /*editor_selector : "mceEditor",*/
    content_css : "css/webPage.css",
    paste_text_sticky: true,
    paste_text_sticky_default: true,
    relative_urls: false,
    remove_script_host : false,
    remember_last_path : false,
    imagemanager_rootpath: accountFolder,
    theme_advanced_buttons1 : "bold, italic, underline, strikethrough, separator, justifyleft, justifycenter, justifyright, justifyfull, separator, formatselect, forecolor, separator, hr, removeformat, separator, cut, copy, image, separator, aquaHeading, sponsorDiv",
    theme_advanced_buttons2: "code, separator, link, unlinkbullist,numlist,tablecontrols, fontselect",
    theme_advanced_buttons3: "",
    setup : function(ed) {
        ed.onInit.add(function() {
            // do something
        });
    },
    oninit : tinyMceReady
});
</script> 
```

一旦我更改为这个 init Fancybox 将不再打开 URL。相反，它会启动正确大小的弹出窗口，但内容将是“无法加载请求的内容。请稍后再试。”

是否有人知道与新的 fancybox 和 tinymce 的冲突，或者可以在上面的代码中看到冲突？

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:27:52.527

许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用 $.noConflict() 将 $ 的控制权返回给另一个库：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

这种技术与 .ready() 方法对 jQuery 对象的别名能力结合起来特别有效，因为在传递给 .ready() 的回调中，如果我们愿意，我们可以使用 $ ，而不用担心以后会发生冲突：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

如有必要，我们也可以通过将 true 作为参数传递给方法来释放 jQuery 名称。这很少需要，如果我们必须这样做（例如，如果我们需要在同一页面上使用多个版本的 jQuery 库），我们需要考虑到大多数插件依赖于 jQuery 变量的存在和在这种情况下可能无法正常运行。

[参考网址](http://api.jquery.com/jQuery.noConflict/)

# java - 开发 GUI 的更好的语言？

> ID：11606873
> 
> 赞同：0
> 
> 时间：2012-07-23T05:24:52.490
> 
> 标签：java, c++, python, user-interface

我需要开发一个适用于 Windows 和 Linux 的 GUI，用于使用 C++ 编写并仅在 Linux 上运行的后端。

我知道如果我选择 Java 或 Python，我将需要使用包装器（如 Swig），但众所周知，它们生成的 GUI 比 C++ 更好。

您会建议什么作为更好的选择（对于新手）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T05:27:57.620

Qt (C++) 可能是你最好的选择。既便于使用，又便于携带。[类似的问题](https://stackoverflow.com/questions/3657001/comparison-of-gui-developing-tools-for-linux)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:26:17.013

看看 MonoDevelop。允许您使用 C# 进行开发并部署到 Linux 和 Windows。

# coffeescript - 使用 npm 模块编译 coffeescript 测试

> ID：11606876
> 
> 赞同：0
> 
> 时间：2012-07-23T05:25:16.357
> 
> 标签：coffeescript, npm

是否可以使用 npm 模块编译一串咖啡脚本，我一直在到处寻找，似乎找不到任何好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:13:33.413

coffee-script 模块提供了一个“编译”方法：

```
var cs = require('coffee-script');
var js = cs.compile('foo = -> "bar"'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:09:10.730

如果您在谈论`coffee`命令行实用程序，那么可以（尽管它不太漂亮）：

```
echo "alert 'Hello World'" | coffee -sc 
```

上面的代码在 echo 中编译 CoffeeScript 并输出到 STDOUT。如果你想在一个文件中编译输出，你可以这样做：

```
echo "alert 'Hello World'" | coffee -sc > path/to/file.js 
```

这里有一些关于命令行实用程序的好文档：http: [//coffeescript.org/#usage](http://coffeescript.org/#usage)

如果您的意思是*在*CoffeeScript 代码中编译字符串，该`coffee-script`模块提供了一个编译函数：

```
coffee = require 'coffee-script'
js = coffee.compile "alert 'Hello World'" 
```

# c# - 如何在 EPPlus 库的帮助下删除 XLSX 文件中的列

> ID：11606877
> 
> 赞同：1
> 
> 时间：2012-07-23T05:25:19.657
> 
> 标签：c#

我有一个 xlsx 文件，我必须在其中删除开始列并在最后添加一个新列。我正在使用 EPPLUS 库，但我没有得到任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T15:00:12.253

如果您需要这种类型的解决方案（隐藏不够好），另一种选择是创建一个新工作表并复制除您要删除的列之外的所有列，然后删除原始工作表。这就是我最终实现它的方式。在公式等方面可能会产生意想不到的后果，但对我来说，我只有一张充满价值的表格，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T06:18:16.613

这是下载 EPPlus 库文档的链接：

[http://epplus.codeplex.com/downloads/get/336102](http://epplus.codeplex.com/downloads/get/336102)

这是示例项目的链接：

[http://epplus.codeplex.com/downloads/get/329346](http://epplus.codeplex.com/downloads/get/329346)

顺便说一句，您似乎无法删除列。您可能需要将单元格中的所有数据向左移动一列。另一种选择可能是隐藏或折叠第一列。

# javascript - 如何完全禁用Android webview中所有输入的软键盘

> ID：11606885
> 
> 赞同：12
> 
> 时间：2012-07-23T05:26:08.773
> 
> 标签：javascript, android, cordova, android-webview, android-websettings

我正在使用 phonegap 为 Android 开发一个 Web 应用程序，并且由于我将拥有自己的 HTML 键盘，我需要禁用 android 的系统键盘，以防止它在用户单击任何文本输入字段时出现。我不想使用只读输入字段，或者`onblur()`因为我希望将光标放在文本字段中，以便用户可以在输入输入时移动光标位置。

所以我想在默认情况下完全禁用Android的键盘，我尝试添加`android:windowSoftInputMode="stateAlwaysHidden"`，`manifest.xml`但这不起作用。

我也尝试使用[此处](http://wiki.phonegap.com/w/page/27915465/How%20to%20show%20and%20hide%20soft%20keyboard%20in%20Android)的 javascript 接口，但在 Android 2.3.x 上存在 javascript-java 桥崩溃问题。（[问题链接](http://code.google.com/p/android/issues/detail?id=12987)）。所以我现在仍然没有一个好的解决方案。请帮忙。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:23:30.707

好吧，你有几个选择！您可以尝试使用以下方法完全禁用键盘：

*   `getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);`

    *   如果您选择这种方式，如果没有自动完成，请确保将设置恢复正​​常。我以前没有使用过它，也无法告诉你它的行为，但请记住这一点！您不希望用户回复他们在使用您的应用程序时收到的文本只是为了禁用他们的键盘:)

*   您可以使用类似于以下链接的内容。我还没有非常彻底地研究它（tl;dr），但他创建了一个自定义视图，从它扩展`android.inputmethodservice.KeyboardView`并使用它。

    *   [https://stackoverflow.com/a/1947370/1183256](https://stackoverflow.com/a/1947370/1183256)

*   最后（我不确定这与第一个有多大区别）您可以创建自己的 IME。

    *   [如何为安卓开发软键盘？](https://stackoverflow.com/questions/3480715/how-to-develop-a-soft-keyboard-for-android/3480756#3480756)
    *   [http://developer.android.com/guide/topics/text/creating-input-method.html](http://developer.android.com/guide/topics/text/creating-input-method.html)

# javascript - 仅获取 HTML 元素的第一类

> ID：11606897
> 
> 赞同：18
> 
> 时间：2012-07-23T05:27:26.363
> 
> 标签：javascript, html, class, dom-events, classname

我正在使用

```
event.target.className 
```

要获得`ClassName`，但有时一个元素有多个类名，我该如何制作它，所以**它只**给出第**一个类**名作为结果？

哦，请不要使用 jQuery。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-23T05:30:22.297

有多种方法可以获取元素的第一类

> **方法一**：使用className属性

将 DOM 元素的 className 属性与 split 函数一起使用，该函数将 className 按空格拆分并返回一个数组。

```
event.target.className.split(" ")[0]; //0 to retrieve first class 
```

所有主要浏览器都支持 className 属性。

> **方法二**：使用 classList 属性

使用返回类的[DOMTokenList](https://developer.mozilla.org/en-US/docs/DOM/DOMTokenList)对象的 DOM 元素的 classList 属性（已经被空格分割）

```
event.target.classList[0]; //0 to retrieve first class 
```

classList 属性相对较新，也相对较快。这在 IE8 和 IE9 中不受支持。**[支持各种浏览器](http://caniuse.com/#feat=classlist)**

[检查 classList 与 className 的性能](http://jsperf.com/classlist-firstclass-vs-classname-firstclass)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-25T23:25:08.277

如果您想定位事件处理程序已附加到的元素，请使用此

`event.currentTarget.classList[0]`

# extjs - 与 Extjs 的字符串比较

> ID：11606898
> 
> 赞同：0
> 
> 时间：2012-07-23T05:27:33.733
> 
> 标签：extjs, extjs4, extjs4.1

我有一个值为 的字符串`Sam, Mathews, Perry`。我需要知道如何查看字符串`Perry`中是否存在字符串。我怎样才能做到这一点;

我的代码如下，但不幸的是它不起作用。我需要帮助来解决这个问题。

```
var stringNames= "Sam, Mathews, Perry";

if (stringNames.contains ('Perry')) {
 // 
console.log('Perry found');

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T06:27:22.090

这和Ext无关，不能随便编个方法名。

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)

```
var names = 'Sam, Mathews, Perry';
if (names.indexOf('Perry') > -1) {
    console.log('Perry found');
} 
```

# php - 使用 PHP 的 crypt() 函数时使用 base64_encode

> ID：11606904
> 
> 赞同：2
> 
> 时间：2012-07-23T05:27:46.457
> 
> 标签：php, hash, bcrypt, crypt, password-encryption

我有一个简单的问题要问你们：

我正在修补 PHP（我相对缺乏经验），并且有兴趣开发一个安全的密码散列系统以在我的网站上使用。通过关于 SO 的其他文章和问题，我推测我应该使用 PHP 的`crypt()`函数来实现 BSD 的`bcrypt`哈希算法。

我向您提出的问题是，当我为函数提供初始化向量或密码时，不是 base64 的输入似乎返回“0”作为哈希值。这是我为解决此问题而实施的方法：

```
$salt = base64_encode(mcrypt_create_iv(16, MCRYPT_DEV_URANDOM)); 
```

和

```
$password = base64_encode($password); 
```

当我像这样更改编码时，是否存在碰撞危险或以其他方式降低安全性？

我的想法是，我希望允许用户使用任何范围的字符作为他们的密码（我将执行一个好的密码策略），而不必担心我的散列函数返回一个空的散列。

有没有更简单或更优雅的方法来做到这一点？我是否应该使用不会限制我的盐和密码的哈希函数？

提前感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:31:54.693

在 base64 下对其进行编码不会增加冲突的机会，因为它只是一对一的翻译。它不会减少密码干草堆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:38:03.877

对于 php 中的散列，我建议使用[散列](http://php.net/hash)函数。它需要一个算法来使用，所以你可以通过 sha 或其他任何东西来抛出它。

至于碰撞，我不会担心它们，您不太可能受到碰撞的影响。

# c# - 使用后面的代码更改新图像，找不到 c# 和 bitmapImage

> ID：11606906
> 
> 赞同：0
> 
> 时间：2012-07-23T05:27:55.937
> 
> 标签：c#

有两个站点；用户（android）和服务器（c#）

程序需要接收用户点击的图片。这些图像（image1）将更改为 android 中的新图像（image2），同样转到服务器。

我所做的是：

```
1- split the data
2- check if the images gets a new ID number (new ID number refer to changes been made)
3- change the old image with the new image 
```

代码 ：

```
if (berjaya[23].Equals(70)) 
{
    //code where the old image is changed
    pictureBox1.Image = new BitmapImage(new Uri(@"\\HospitalIcon\\images\\a3_01.gif"));
} 
```

不幸的是，我实际上不知道如何使用后面的代码更改新图像。我正在使用 c#。新`BitmapImage`说找不到。有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:34:21.897

放：

使用 System.Windows.Media.Imaging；

在命名空间之上:)

# ruby - 在 ROR 中运行后台作业的更好选择是什么

> ID：11606911
> 
> 赞同：2
> 
> 时间：2012-07-23T05:28:10.460
> 
> 标签：ruby, cron, ruby-on-rails-3.2, background-process

[每当](https://github.com/javan/whenever/)我看到两个 gem和[rufus-scheduler](https://github.com/jmettraux/rufus-scheduler/)用于在 ruby​​ 中运行 cron 作业。哪个是更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T07:51:38.293

这取决于。

无论何时由系统的 cron 守护程序支持（因此，如果您的系统没有 cron 守护程序，它将无法工作）。

Rufus-scheduler 在你的 Ruby 运行时中运行，它不依赖于 cron 守护进程，但是如果你的 Ruby 运行时出现故障，调度将会丢失。

请确保您了解这些差异，然后自行决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:36:44.320

您需要运行后台作业还是 cron 作业？您安排工作的频率是多少？

*关于后台*作业主题有一些 RailCast 剧集： [Starling 和 Workling](http://railscasts.com/episodes/128-starling-and-workling)、 [Delayed Job](http://railscasts.com/episodes/171-delayed-job/)、[Resque](http://railscasts.com/episodes/271-resque)、[Beanstalkd 和 Stalker](http://railscasts.com/episodes/243-beanstalkd-and-stalker)、[Queue Classic](http://railscasts.com/episodes/344-queue-classic)。有些剧集是 2010 年之前的，而且 RoR 发展迅速……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:09:35.403

有几个比你在问题中提到的更酷的选择

一个是[Resque](https://github.com/defunkt/resque/)。[这](http://railscasts.com/episodes/271-resque)是相同的railscasts。另一个是[SideQik](https://github.com/mperham/sidekiq)。[这](http://railscasts.com/episodes/366-sidekiq)是相同的railscasts。Sideqik 是镇上的新孩子，表现非常棒。

# tfs - TFS 2005。我丢失了工作区映射。不想丢失已签出的工作

> ID：11606917
> 
> 赞同：1
> 
> 时间：2012-07-23T05:29:02.837
> 
> 标签：tfs, mapping, sync, workspace, tfs-2005

我错误地将我的工作区映射到我的本地文件夹。不，我的解决方案都说它们没有下载，但代码当然仍然存在。我已经工作检查了。我怎样才能做到这一点，甚至可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:31:02.043

在您执行任何操作之前，请*备份您的代码*- 将其复制到映射工作区文件夹之外的文件夹中。这样，如果出现任何问题，您将不会丢失代码。

如果你这样做，最坏的情况是：

*   修复您的映射并强制获取所有代码（因此您会丢失更改）
*   将备份文件复制回源代码
*   锁定您更改的文件（或者：a）检查所有内容，然后撤消检查，但对有关丢弃更改的问题说“不全部”。这将使您仅锁定已更改的文件）或b）脱机（拔下网线，运行VS，它将脱机）然后联机（插入网线，文件>源代码控制>上线) 并且 TFS 应该会自动发现您更改的文件)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:36:21.980

您是否尝试过像[这里](http://msdn.microsoft.com/en-us/library/ms181384%28v=vs.80%29.aspx)描述的那样重新映射您的工作区？

# json - JacksonProviderProxy 在 json 输出中写出空值

> ID：11606926
> 
> 赞同：9
> 
> 时间：2012-07-23T05:29:56.420
> 
> 标签：json, jackson

我有一个简单的 POJO 类，它扩展了另一个简单的 POJO 类。我正在使用将`com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy`这些 POJO 类中的属性编组为 JSON。但是，当我将 POJO 的某些属性设置为 时`null`，它会将这些属性作为字符串`null`输出，而不是根本不输出。

例如。

```
{
   Person:
   [{
      "firstName":"John"
      "lastName":"null"
    }]
} 
```

代替：

例如。

```
{
   Person:
   [{
      "firstName":"John"
    }]
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T07:22:13.623

`ObjectMapper`根据所使用的 Jackson 版本以及是否可以直接配置，可以使用不同的选项来抑制具有空值的属性的序列化。

使用 Jackson 1.1+，可以直接访问配置`ObjectMapper`，您只需调用[`setSerializationInclusion`](http://fasterxml.github.com/jackson-databind/javadoc/2.0.2/com/fasterxml/jackson/databind/ObjectMapper.html#setSerializationInclusion%28com.fasterxml.jackson.annotation.JsonInclude.Include%29)( [`Include.NON_NULL`](http://fasterxml.github.com/jackson-annotations/javadoc/2.0.2/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_NULL))。

[`@JsonSerialize`](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html)或者，您可以使用( ) 注释具有属性的（类）类型，对于这些属性，空属性序列化将被抑制。[`include`](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.html#include%28%29)`=`[`Inclusion.NON_NULL`](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/annotate/JsonSerialize.Inclusion.html#NON_NULL)

对于 Jackson 2+，使用( )代替`@JsonSerialize`注释。[`@JsonInclude`](http://fasterxml.github.com/jackson-annotations/javadoc/2.0.2/com/fasterxml/jackson/annotation/JsonInclude.html?is-external=true)[`Include.NON_NULL`](http://fasterxml.github.com/jackson-annotations/javadoc/2.0.2/com/fasterxml/jackson/annotation/JsonInclude.Include.html#NON_NULL)

# iphone - 如何使用自定义按钮从 UImagePickerController 中关闭视图？

> ID：11606930
> 
> 赞同：0
> 
> 时间：2012-07-23T05:30:23.503
> 
> 标签：iphone, button, uiimagepickercontroller, terminate

我正在使用 Zbar 扫描仪 SDK，它可以让我读取条形码。现在默认版本在读取一个条形码后停止扫描并显示结果。我用自己的完成按钮制作了自己的 UIToolBar，因为我希望它扫描多次，只要用户单击我的 UIToolBar 上的“完成”按钮，所有这些都将终止。我已经制作了按钮，但是如何将操作添加到按钮？由于 pickerController 的参与和 Zbar SDK，这非常令人困惑。如何将叠加层中的 doneButton 链接到终止扫描的操作？

这是我设置完成按钮的叠加层。

```
-(UIView*)CommomOverlay  {

UIToolbar *myToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 428, 320, 70)];
[myToolBar setBarStyle:UIBarStyleBlackTranslucent];

UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonTap:)];

[myToolBar setItems:[NSArray arrayWithObjects:doneButton, nil] animated:YES];
[FrameImg addSubview:myToolBar];
[view addSubview:FrameImg];
return view; 
```

这是条码扫描器 SDK 的 IPC 部分。

```
 -(void) imagePickerController: (UIImagePickerController*)
 readerdidFinishPickingMediaWithInfo: (NSDictionary*) info {
{

// ADD: get the decode results
id<NSFastEnumeration> results =
[info objectForKey: ZBarReaderControllerResults];
ZBarSymbol *symbol = nil;
for(symbol in results)
// EXAMPLE: just grab the first barcode
break;
// EXAMPLE: do something useful with the barcode data
resultText.text = symbol.data;

// setup our custom overlay view for the camera
// ensure that our custom view's frame fits within the parent frame
// EXAMPLE: do something useful with the barcode image
resultImage.image =
[info objectForKey: UIImagePickerControllerOriginalImage];

// ADD: dismiss the controller (NB dismiss from the *reader*!)
//Delete below in entirety for continuous scanning.
[reader dismissModalViewControllerAnimated: NO];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:08:46.980

尝试使用选择器在 doneButton 上设置 dissmissmodalviewcontroller 的操作

```
 [doneButton addTarget:self action:@selector(dismiss) forControlEvents:UIControlEventTouchUpInside]; 
```

在驳回方法中

```
 -(void)dismiss
    {

    [self dismissmodalViewController];

    } 
```

# asp.net-mvc-3 - How to avoid passing slow Application_Start times to the end users in ASP.NET

> ID：11606935
> 
> 赞同：11
> 
> 时间：2012-07-23T05:31:04.530
> 
> 标签：asp.net-mvc-3, iis-7, ioc-container, global-asax, appharbor

I have quite a slow Application_Start due to having a lot of IoC stuff happen at start up.

The problem I'm trying to solve is, how do I avoid passing that start up time to the end user?

## Assumptions

My apps are hosted on AppHarbor so I have no access to IIS. However even if I did, my understudying is that it's best practice to let the app pool recycle, so there's no way to avoid having the Application_Start run regularly (I think it's every 20 minutes on AppHarbor).

## My idea to solve it

Initially I thought I'd hit it every minute or something, but that seems too brute force and it may not even stop a user from experiencing the slow start up.

My current solution is to handle the Application_End event, and then immediately hit the App so that it starts up again, thus hopefully not impacting any users.

Is there a better way to solve this issue?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T17:14:54.497

Unfortunately, a longer session timeout will not prevent an IIS app pool recycle when you're using InProcess session state.

Have you considered lazy loading (some of) your dependencies? SimpleInjector has documentation on how to do this, which should be adaptable to most other IoCs:

[Simple Injector \ Documentation \ How To \ Register Factory Delegates \ Working With Lazy Factories](http://simpleinjector.codeplex.com/wikipage?title=How-to#lazy)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T07:55:19.380

In my understanding, to prevent the propagation of startup time to users, you should avoid recycling the App Pool, for which you can use [IIS App pool timeout settings](http://brad.kingsleyblog.com/IIS7-Application-Pool-Idle-Time-out-Settings),these can be tuned through web.config, not just through IIS console. Additionally you can read more of it [here on this SO qurestion](https://stackoverflow.com/a/1598364/405673). You might not need Application_End hacks to achieve this.

Update : I found another interesting thing that may help you on this, check this [IIS Application Initialization Extension](http://www.iis.net/download/ApplicationInitialization) that can be used to preload dependencies as soon as worker process starts. It may help you improve customer experience. Check it out.

# java - java框架对象的问题

> ID：11606936
> 
> 赞同：1
> 
> 时间：2012-07-23T05:31:09.353
> 
> 标签：java, swing, object, frame

我正在做我的家庭作业。我有一个主类，它使用以下调用来访问以下 JSplash 类。

```
JSplash splash = new JSplash(); 
```

但是，当我在我的主要方法中使用它来创建一个带有 JSplash 类的框架时，它会编译......但没有出现任何窗口。我无法理解我做错了什么。

它实现的 DFrame 类是我创建的作为 JFrame 扩展的类，我也会将它发布在这段代码的底部

```
package InventoryApp;

//Import
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;

/**
 *
 * @author Curtis
 */
public class JSplash extends DFrame implements ActionListener
{
//declaration of variable objects
Font myFont = new Font("Arial", Font.BOLD, 20);
JButton myButton = new JButton("Click Me!");
Color bgColor = new Color(0,0,255);
Color firstColor = new Color(255,255,255);
String first = "Welcome to DaemoDynamics!";
String last = "Click the Button";
String middle = "";
String middle2 = "";
private static int count = 1;  
JSplash frame = new JSplash();
//Constructor
public JSplash()
        {
            setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
            setLayout (new BorderLayout());
            add(myButton, BorderLayout.SOUTH);
            setDefaultLookAndFeelDecorated(true);
            getContentPane().setBackground(bgColor);
            //adds action listener
            myButton.addActionListener(this);
            final int TALL = 316;
            final int WIDE = 304;
            frame.setSize(WIDE, TALL);
            frame.setVisible(true);
        }
//Paint method
@Override
public void paint(Graphics e)
{
    super.paint(e);
    e.setFont(myFont);
    e.setColor(firstColor);
    e.drawString(first, 14, 80);
    e.drawString(last, 70, 240);
    e.drawString(middle, 75, 150);
    e.drawString(middle2, 60, 175);
}

//Listener Method
@Override
public void actionPerformed(ActionEvent e) 
{
    //First Time button hit
    if(count == 1)
    {
        middle = "Brighter Business";
            middle2 = "for A Brighter Future";
            last = "Click Again to Begin";
            repaint();
        //increases button count
        count ++;
    }
    else//if button count is not 1
    {
        frame.setVisible(false);
        FinalProject app = new FinalProject();
    }  
}
} 
```

现在，以下代码是我的 DFrame 类。当我将它与其他类一起使用时，它可以正常工作。

```
package InventoryApp;

import java.awt.Color;
import java.awt.Container;
import java.awt.FlowLayout;
import javax.swing.JFrame;

/**
 *
 * @author Curtis
 */
public class DFrame extends JFrame
{
//variables
final int WIDE = 304;
final int HIGH = 316;
String x = "";
Container con = getContentPane();
//frame constructor
public DFrame()
{
    super("Item Inventory Application");
    setSize(WIDE, HIGH);
    setDefaultLookAndFeelDecorated(true);
    con.setBackground(Color.BLUE);
    con.setLayout(new FlowLayout());
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
} 
```

错误：

```
 Exception in thread "main" java.lang.StackOverflowError
    at java.util.HashMap.get(HashMap.java:317)
    at java.awt.VKCollection.findCode(AWTKeyStroke.java:885)
    at java.awt.AWTKeyStroke.getVKValue(AWTKeyStroke.java:613)
    at java.awt.AWTKeyStroke.getAWTKeyStroke(AWTKeyStroke.java:568)
    at javax.swing.KeyStroke.getKeyStroke(KeyStroke.java:310)
    at javax.swing.LookAndFeel.loadKeyBindings(LookAndFeel.java:436)
    at javax.swing.LookAndFeel.makeComponentInputMap(LookAndFeel.java:388)
    at javax.swing.plaf.basic.BasicMenuBarUI.getInputMap(BasicMenuBarUI.java:120)
    at  
    javax.swing.plaf.basic.BasicMenuBarUI.installKeyboardActions(BasicMenuBarUI.java:106)
    at javax.swing.plaf.basic.BasicMenuBarUI.installUI(BasicMenuBarUI.java:75)
    at javax.swing.plaf.metal.MetalMenuBarUI.installUI(MetalMenuBarUI.java:65)
    at javax.swing.JComponent.setUI(JComponent.java:664)
    at javax.swing.JMenuBar.setUI(JMenuBar.java:136)
    at javax.swing.JMenuBar.updateUI(JMenuBar.java:145)
    at javax.swing.JMenuBar.<init>(JMenuBar.java:113)
    at javax.swing.plaf.metal.MetalTitlePane$SystemMenuBar.<init>  
    ( MetalTitlePane.java:846)
    at javax.swing.plaf.metal.MetalTitlePane$SystemMenuBar.<init>
    (MetalTitlePane.java:846)
    at javax.swing.plaf.metal.MetalTitlePane.createMenuBar(MetalTitlePane.java:364)
    at
    javax.swing.plaf.metal.MetalTitlePane.installSubcomponents(MetalTitlePane.java:279)
    at javax.swing.plaf.metal.MetalTitlePane.<init>(MetalTitlePane.java:178)
    at javax.swing.plaf.metal.MetalRootPaneUI.createTitlePane(MetalRootPaneUI.java:318)
    at    

  javax.swing.plaf.metal.MetalRootPaneUI.installClientDecorations(MetalRootPaneUI.java:272)
    at javax.swing.plaf.metal.MetalRootPaneUI.propertyChange(MetalRootPaneUI.java:416)
    at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
    at  java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:327)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:283)
    at java.awt.Component.firePropertyChange(Component.java:8422)
    at javax.swing.JComponent.firePropertyChange(JComponent.java:4510)
    at javax.swing.JRootPane.setWindowDecorationStyle(JRootPane.java:444)
    at javax.swing.JFrame.frameInit(JFrame.java:266)
    at javax.swing.JFrame.<init>(JFrame.java:225)
    at InventoryApp.DFrame.<init>(DFrame.java:30)
    at InventoryApp.JSplash.<init>(JSplash.java:40)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37)
    at InventoryApp.JSplash.<init>(JSplash.java:37) 
```

最后一行持续了大约 100 次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:52:54.123

我不知道您为什么这样做，但这就是导致您出现问题的原因：

```
JSplash frame = new JSplash();
//Constructor
public JSplash()
        {
            setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
            setLayout (new BorderLayout());
            add(myButton, BorderLayout.SOUTH);
            setDefaultLookAndFeelDecorated(true);
            getContentPane().setBackground(bgColor);
            //adds action listener
            myButton.addActionListener(this);
            final int TALL = 316;
            final int WIDE = 304;
            frame.setSize(WIDE, TALL);
            frame.setVisible(true);
        } 
```

每次创建 JSplash 的新实例时，它都会创建 JSplash 的新实例，直到堆栈空间用完。

它应该看起来像这样。

```
//Constructor
public JSplash()
        {
            setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
            setLayout (new BorderLayout());
            add(myButton, BorderLayout.SOUTH);
            setDefaultLookAndFeelDecorated(true);
            getContentPane().setBackground(bgColor);
            //adds action listener
            myButton.addActionListener(this);
            final int TALL = 316;
            final int WIDE = 304;
            setSize(WIDE, TALL);
            setVisible(true);
        } 
```

我知道你在其他地方有参考，你不需要这样的参考，你可以简单地打电话`setVisible(false)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:56:40.767

从您的 JSplash 代码中删除此行

```
JSplash frame = new JSplash(); 
```

并使用**它。**反而。

# android - 脏关机后Android清理

> ID：11606937
> 
> 赞同：0
> 
> 时间：2012-07-23T05:31:21.693
> 
> 标签：android

我正在编写一个程序，它在操作过程中创建各种文件，并在关闭 Activity 时删除窗帘文件并在数据库中注册其他文件。

如果应用程序没有正确关闭（即如果电池被取出），是否有办法检测下一次运行程序的时间，以便运行清理和修复数据库。

我每次都会运行它，但我认为它可能会非常耗时。必要时，应在启动主要活动（不是通常进行清理的活动）之前运行清理，因为它会影响输出。

我有这个清理的代码，并且正在使用 API 10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:48:40.413

您可以拥有一个 SharedPreferences 布尔变量，仅在您完成清理后才将其设置为 true。当应用程序启动时，检查这个值，如果它是假的，清理。

有关 sharedPreferences 的更多信息，请参阅此页面：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# html - 处理翻转菜单（css） - 我的菜单运行良好，直到我想区分当前页面

> ID：11606940
> 
> 赞同：0
> 
> 时间：2012-07-23T05:32:03.803
> 
> 标签：html, css, menu

所以，我正在尝试创建一个水平翻转菜单。

在我开始处理“当前页面”以显示访问者在导航栏上的位置之前，一切都很好。我想用一个名为“active”的类来做到这一点。我希望子菜单始终可见。

似乎`<li>`（来自我的导航）在 html 代码中比具有“活动”类的代码更早，在鼠标悬停时没有做出应有的反应；子菜单不再显示...

我不确定我是否清楚或是否有任何意义，这对我来说仍然是一项新技术，解释正在发生的事情非常困难。

请让我知道您是否可以帮助我，或者您是否希望我以不同的方式解释。

非常感谢

米克

* * *

## 更新

这里有一些我现在感谢 Wire42 的截图（我在子菜单项中添加了一些较低的 Z 索引以及白色背景）。所以现在前一个元素对鼠标悬停做出正确反应，但活动元素（在示例中为“采取行动”）不显示子菜单。

[图 1：](http://www.flickr.com/photos/59878563@N06/7631464894/)活动项目不显示子菜单（即使没有鼠标悬停它也应该显示子菜单）

[图 2：](http://www.flickr.com/photos/59878563@N06/7631465756/)解决了鼠标悬停项目的问题

我错过了什么吗？

**CSS**

```
#menu_wrapper {
    padding:0;
    margin:0;
    position:relative;
    left:108px;
    top:2px;
}

#menu {
    width:812px;
    height:28px;
    background-color: #B4B4B4;
    padding:0 0 0 60px;
}

#menu li {
    display: inline;
    list-style-type: none;  
}

#menu li a {
    font-size: 13px;
    text-transform: uppercase;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    text-decoration: none;
    float: left;
    color: #000000;
    padding: 6px 13px;
    border-right: 1px solid #999;

}

/* get rid of last border in menus*/
#menu li:last-child a, #menu li.active li:last-child a, #menu li:hover li:last-child a{
border:none;
}

#menu li:hover > a {
    background-color: #e9748b;
}

#menu li.active > a {   
    background-color: #e9748b;
}

/*-------------------SUB  MENU---------------*/

#menu li ul {
    display:none;
    padding:0 0 0 60px;
}

#menu li:hover > ul {
    display:block;
    position:absolute;
    padding: 0 0 0 90px;
    left:0; top:28px;
    background:url(Images/background_sub_menu.png) repeat-x;
    width:782px;
    min-height:23px;        
}

#menu li.active > ul{
    display:block;
    position:absolute;
    padding: 0 0 0 90px;
    left:0; top:28px;
    background:url(Images/background_sub_menu.png) repeat-x;
    width:782px;
    min-height:23px;
    z-index: -1;            
}

#menu li li {
    list-style:none;
}

#menu li li a, #menu li.active li a{
    color:#000000;
    background:none;
    text-decoration:none;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 11px;
    font-weight: normal;
    text-transform: none;
    border-right: 1px solid #999;
    padding:5px 10px;
    margin:0;
}

#menu li.active li a{
    z-index:-1;
}

#menu li li a:hover  {
    background:none;
    font-weight: bolder;
    color: #000000;
    background-color: #CC6633;
}

#menu li li.active a {
    text-decoration:underline;
    background:none;
    font-weight: bolder;
    color: #000000;
    z-index:-1;
} 
```

**HTML**

```
<ul id="menu">
            <li><a href="index.html">Home</a>
                      <ul> 
                      <li><a href="#"> </a></li>
                      </ul>
                </li>

                    <li><a href="#">About the Foundation</a>
                     <ul> 
                     <li><a href="#">What we do</a></li>
                     <li><a href="#">Who we are</a></li>
                     <li><a href="#">Goals for 2012</a></li>
                     <li><a href="#">Annual reports</a></li>
                     <li><a href="#">Help 4 Guys .com</a></li>
                     </ul>
                </li>

                    <li><a href="#">Programs</a>
                     <ul> 
                     <li><a href="#">Male Abuse Awarness Week</a></li>
                     <li><a href="#">Help 4 Guys .com</a></li>
                     <li><a href="#">Events</a></li>
                     </ul>
                </li>

                    <li class="active"><a href="#">Take Action</a>
                     <ul> 
                     <li><a href="1">Volunteer for PLF</a></li>
                     <li><a href="2">Help our Foundation</a></li>
                     <li class="active"><a href="3">Donate</a></li>
                     <li><a href="4">FAQ</a></li>
                     </ul>
                </li>

                    <li><a href="#">Find Support</a>
                     <ul> 
                     <li><a href="#">Child Abuse FAQ</a></li>
                     <li><a href="#">Find Support Near You</a></li>
                     <li><a href="#">Support for the Families</a></li>
                     <li><a href="#">Privacy</a></li>
                     <li><a href="#">Our Network</a></li>
                     </ul>
                </li>

                    <li><a href="#">Contact Us</a>
                     <ul> 
                     <li><a href="#"></a></li>
                     </ul>
                </li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:28:14.493

这是一个使用纯 CSS 的解决方案，没有 javascript：http: [//jsfiddle.net/nammp/1/](http://jsfiddle.net/nammp/1/)

这段代码做了两件事（当我回答这个问题时，它们在那里被黑了，但如果其他人没有先得到它，我会回去清理它）：

1.  活动元素收到`z-index`-1 的值，因此在悬停元素下呈现
2.  悬停元素变为白色`background-color`，因此它们在视觉上隐藏了活动元素

我认为这可以解决问题。希望我们可以清理这个问题，使代码更加通用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:21:29.130

我用工作样本更改了 UL li 菜单。请查看链接。[http://jsfiddle.net/abhishekbhalani/ZzF6S/](http://jsfiddle.net/abhishekbhalani/ZzF6S/)

让我知道是否有任何问题。

请参考以下网址，我认为这对您有用。[鼠标悬停简单的 css 悬停选项卡](http://superfluousbanter.org/projects/demos/simple-css-hover-tab-thingy/)
[上的选项卡更改](http://jqueryui.com/demos/tabs/mouseover.html) 谢谢 Abhishek

# ios - 一个项目，不同的设置（例如bundle id和app name）

> ID：11606945
> 
> 赞同：1
> 
> 时间：2012-07-23T05:32:44.263
> 
> 标签：ios, xcode, version-control

我正在做一个 iPad 项目。

通过这个项目，它已经为多个客户构建和临时/应用商店发布。所有这些应用程序之间的不同之处如下

*   捆绑标识符
*   捆绑版本（数字和字符串）
*   图标文件
*   应用名称

现在，假设我有 5 个分支，它们是

*   掌握
*   发展
*   应用 1（名称“App 1”，捆绑 ID“com.company.app1”，版本“1.0”，图标“App1.png”）
*   应用 2（名称“App 2”，捆绑 ID“com.company.app2”，版本“1.3”，图标“App2.png”）
*   应用 3（名称“App 3”，捆绑 ID“com.company.app3”，版本“1.6”，图标“App3.png”）

我之前所做的是在 Development 分支中完成所有新功能的实现，然后

*   合并到 Master 并推送到存储库
*   合并到 App 1、App 2 和 App 3

但是，问题是，当我将开发中的任何更改合并到任何其他分支时，我必须手动设置捆绑标识符等。

所以，问题是，一旦我进行分支合并，我怎样才能保留那些不被替换的值？

**PS**我能想到的一个解决方案是为每个客户创建多个项目并忽略包含这些值的文件，但是，我想知道是否有任何其他合适的解决方案。

# wpf - WPF 中的 ListView 绑定未显示预期的集合项

> ID：11606947
> 
> 赞同：0
> 
> 时间：2012-07-23T05:32:56.733
> 
> 标签：wpf, data-binding

为什么这个绑定不起作用？

```
<Window x:Class="S3PackageInstaller.MainWindow" x:Name="Window1" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:s3u="clr-namespace:S3PackageInstaller"
    Icon="App.ico" Title="Sims 3 Package Installer" Height="480" Width="740">

    <DockPanel LastChildFill="True">
        <DockPanel DockPanel.Dock="Left" Width="200" VerticalAlignment="Stretch" LastChildFill="True"
            Margin="20,20,0,20">

            <!-- this is the binding that isn't working -->
            <ListView Width="200" ItemsSource="{Binding ElementName=Window1, Path=InstalledPackages}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Installed Packages" DisplayMemberBinding="{Binding Filename}"></GridViewColumn>
                    </GridView>
                </ListView.View>                
            </ListView>

    <!-- snip -->

</Window> 
```

后面的相关代码：

```
public partial class MainWindow : Window
{
    public ObservableCollection<object> InstalledPackages { get; private set; }

    public MainWindow()
    {
        InitializeComponent();
        InstalledPackages = new ObservableCollection<object>();
        LoadInstalledPackages();
    }

    private void LoadInstalledPackages()
    {
        var installPath = Settings.Default.TargetDirectory;
        var packages = System.IO.Directory.GetFiles(installPath, "*.package");

        InstalledPackages.Clear();
        foreach (string filename in packages)
            InstalledPackages.Add(new { Filename = filename });
    }

    // snip...
} 
```

当我运行程序时，ListView 是空的。调试时，我已验证该集合包含运行 LoadInstalledPackages 后的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:42:07.293

我认为问题在于，虽然您的集合属性是`ObservableCollection`，所以会通知集合更改，但当您首次分配给它时，该属性本身不会引发更改通知。当您按如下方式创建窗口时：

```
public MainWindow()
{
    InitializeComponent();
    InstalledPackages = new ObservableCollection<object>();
    LoadInstalledPackages();
} 
```

何时`InitializeComponent`调用您的 UI 并构造绑定。此时`InstalledPackages` 为空。在下一行中，您将创建您的集合，但由于`InstalledPackages`不会引发`PropertyChanged`事件，因此您的绑定不会更新。

在调用之前实现`INotifyPropertyChanged`或分配 给此属性。`ObservableCollection``InitializeComponent`

# javascript - 实现基本 Sharethis 代码时指定了无效或非法字符串

> ID：11606948
> 
> 赞同：3
> 
> 时间：2012-07-23T05:32:59.157
> 
> 标签：javascript, html, sharethis

我正在尝试在页面上实现 ShareThis 按钮，但无法获得在 FF 或 Chrome、win 7 或 Vista 上工作的基本选项。

Chrome 没有插件。已禁用 FF 插件。

不确定问题是我犯了一些愚蠢的错误，还是与 ShareIt JS 代码有关。

步骤：
1\. 注册
2\. 访问[http://sharethis.com/publishers/get-sharing-tools](http://sharethis.com/publishers/get-sharing-tools)
3\. 完成 3 个步骤（更改：添加 Pinterest 并删除 ShareThis 按钮
4\. 创建一个 html 文件并粘贴代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <meta http-equiv="Content-Language" content="en-us" />
      <script type="text/javascript">var switchTo5x=true;</script>
      <script type="text/javascript" src="http://w.sharethis.com/button/buttons...; /script>
      <script type="text/javascript">stLight.options({publisher: 'beea8274-700e-4d53-aeff-393478c86a40'}); </script>
   </head>
   <body>
      <span class='st_facebook_large' displayText='Facebook'></span>
      <span class='st_twitter_large' displayText='Tweet'></span>
      <span class='st_linkedin_large' displayText='LinkedIn'></span>
      <span class='st_pinterest_large' displayText='Pinterest'></span>
      <span class='st_email_large' displayText='Email'></span>
   </body>
</html> 
```

在 Firefox 中加载页面时，我得到 SyntaxError：指定了无效或非法字符串。电子邮件按钮弹出窗口只显示“正在加载....”，而“选择一个或多个目的地：”没有选项。

为此拉了很多头发。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:40:33.330

在浏览器上测试之前，您是否在服务器上部署了 html 文件。如果您通过放置在桌面或其他文件夹上直接测试 html 文件，那么它将不起作用。您需要将 html 文件部署到服务器，例如：Tomcat 或任何您喜欢的服务器。

# java - 号码解析库

> ID：11606950
> 
> 赞同：2
> 
> 时间：2012-07-23T05:33:05.087
> 
> 标签：java, string, parsing, numbers

我在哪里可以得到一个**智能**数字解析器，它可以读取一个数字字符串，比如说......

*   整数形式：-12345
*   十进制形式：123.45
*   指数形式：15e-24
*   十六进制：#CAFEBABE
*   二进制：b01100101

...并给我一个**足够**的代表（从一个`byte`如果它适合，直到一个`GargantuanDouble`如果它不适合）？

我现在正在考虑使用 Java（Android），所以如果是 Java，那就更好了；但我愿意从另一种语言移植一个足够小的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T06:51:35.887

假设您可以分隔标记，您可以使用[Integer.decode()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#decode%28java.lang.String%29)来解码数字。

> （可选）负号和/或基数说明符（“0x”、“0X”、“#”或前导零）后面的字符序列被 Integer.parseInt 方法解析为具有指示的基数（10、16 , 或 8)。此字符序列必须表示正值，否则将引发 NumberFormatException。如果指定字符串的第一个字符是减号，则结果为否定。字符串中不允许有空格字符。

例如。

```
Integer.decode("0xabcf123"); // hex
Integer.decode("07651");     // octal
Integer.decode("123459");    // decimal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:12:16.297

除了指数形式，您可以处理每种情况并使用 Integer.parseInt(String a, int radix);

# scala - 为什么 trait 方法需要 asInstanceOf 而类方法不需要

> ID：11606952
> 
> 赞同：3
> 
> 时间：2012-07-23T05:33:07.847
> 
> 标签：scala, generics, traits

我已经定义了以下特征：

```
trait Felem[T <: Felem[T]] {                                               
  def mul(that: T): T
  def square: T = this.mul(this.asInstanceOf[T])                            
} 
```

我还根据这个特征定义了一个类：

```
class F2elem(val coef: Boolean) extends Felem[F2elem] {
  override def square: F2elem = this.mul(this)
  ...
} 
```

我的问题是关于特征中“square”方法的定义中是否需要“asInstanceOf”。如果我删除它，我会收到以下错误：

```
error: type mismatch;
found   : Felem.this.type (with underlying type Felem[T])
required: T
def square: T = this.mul(this) 
```

1.  为什么在 trait 中需要它？
2.  为什么课堂上不需要它？
3.  它在执行时间或内存方面有什么成本吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T06:01:42.433

mult 的参数必须是类型`T`。

调用`mul(this)`时this参数是类型`Felem[T]`，不符合也不符合`T`。存在`T`符合的附加约束`Felem[T]`。但这不是您想要的，您需要相反，`Felem[T]`才能符合`T`.

另一方面， in `F2elem`, `T`is正是`F2elem`，所以它会进行类型检查（完全与一个是特征而另一个是类无关）

下面是一个示例，说明`Felem`必须确实不进行类型检查，并且可能有实现者 where`Felem[T]` 不符合`T`.

```
class F3elem extends Felem[F2elem] // this is 2, not 3 
```

这个声明是正确的，`F2elem`它是为`T`满足而给出的`T <: Felem[T]`。但是，继承的 t `his.mul(this)`in`square`将是无效的，多期望 a `T`，即`F2elem`，而 this 是`F3elem`。它们是无关的。

您可能想要的是 every `Felem`must be like `F2elem`，即`T`必须是实际类的类型。您可以使用 self 类型强制执行此操作。

```
trait Felem [T <: Felem[T]] { this: T => /* your code */ } 
```

当您编写该代码时，您声明在每个实现中，实现的类型必须符合`T`. 这样做，它将进行类型检查，并且不允许您在上面实例化 F3elem：

> 错误：非法继承；self-type F3elem 不符合 Felem[F2elem] 的 selftype F2elem class F3elem extends Felem[F2elem] {

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T06:02:34.623

1）在你`trait` `this`的不是一个实例`T`：

```
scala> trait Felem[T <: Felem[T]] {
     |   def mul(that: T): T = that
     |   def square: T = this.mul(this.asInstanceOf[T])
     | }
defined trait Felem

scala> class F2elem extends Felem[F2elem]
defined class F2elem

scala> class F3elem extends Felem[F2elem]
defined class F3elem

scala> new F3elem()
res1: F3elem = F3elem@2e0b08f1

scala> res1.square
java.lang.ClassCastException: F3elem cannot be cast to F2elem 
```

2）在你的`class` `this`is`F2elem`和`T`==`F2elem`中，所以`this`是`T`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T06:01:01.887

您正在`T`用作方法的参数类型。这意味着无论是什么类型`T`都将是方法中所需的类型（因此不需要在类中进行强制转换，因为它的类型是`T`最初所表示的）。

如果将类型更改`that`为`Felem[T]`，则不需要演员表。

# php - 在php中实现不同的用户级视图

> ID：11606960
> 
> 赞同：4
> 
> 时间：2012-07-23T05:35:43.910
> 
> 标签：php, mysql, oop, user-interface

> **可能重复：**
> [在 PHP 和 Javascript 中实现用户授权](https://stackoverflow.com/questions/8896835/implementing-user-authorization-in-php-and-javascript)

我有一个具有以下用户和用户级别的基本会计系统，

**（用户名、密码、用户级别）**

**一个**，123，*管理员*

**B** , 456,*会计师*

**C**，789，*工作人员*

**D** , 999,*经理*

我需要根据他们的用户级别为他们提供不同的选择信息。例如，

- 只有**管理员**拥有创建和删除用户帐户的权限

-**员工**只有权限查看销售和采购信息

- 只有**会计师**有权记录会计分录

- 只有**经理**和**会计师**有权查看管理报告

我如何使用 PHP(OOP) 来实现它？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T06:48:39.413

已经有许多 RBAC（基于角色的访问控制）实现。我建议使用其中之一，而不是创建自己的：

*   [http://phpmaster.com/role-based-access-control-in-php/](http://phpmaster.com/role-based-access-control-in-php/)
*   [http://www.tonymarston.net/php-mysql/role-based-access-control.html](http://www.tonymarston.net/php-mysql/role-based-access-control.html)
*   [基于角色的访问控制](https://stackoverflow.com/questions/113543/role-based-access-control)

# mysql - 优化 MySQL 子选择更新

> ID：11606961
> 
> 赞同：0
> 
> 时间：2012-07-23T05:36:03.117
> 
> 标签：mysql

我很难让这个更新在合理的时间内运行。注意 - events_copy 是事件的副本，因为我无法更新我正在查询的表。

```
update events 
    set dummy = 1 
    where event_id in 
    (select event_id 
        from events_copy 
        join qualifiers using (event_id) 
        where type = 10); 
```

我认为这可能是“从...创建表 x”的替代方案，但是 group by 花费的时间太长了。

```
select 
    events.*, 
    if(type = 10, 1, 0) 
    from events 
    left join qualifiers using (event_id) 
    group by event_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:53:33.203

在更新中使用 a`JOIN`而不是子查询：

```
UPDATE events a
INNER JOIN
(
    SELECT DISTINCT event_id
    FROM events_copy
    INNER JOIN qualifiers USING (event_id)
    WHERE type = 10
) b ON a.event_id = b.event_id
SET a.dummy = 1 
```

它之所以慢是因为子查询正在执行并为`events`表中的每一行执行连接。相反，子选择将执行一次。

# php - PHP 包括 DB Conn - 无法访问密码

> ID：11606962
> 
> 赞同：0
> 
> 时间：2012-07-23T05:36:12.243
> 
> 标签：php

我有一个奇怪的包含文件问题。我希望它是一个简单的修复，因为它是一个 2 天大的 PHP 菜鸟。

我只是想将数据库凭据包含到我的父脚本中，如下所示：

**db-conn.php**

```
<?php
$dbUsername = "xxx";
$dbPassword = "xxx";
$dbHostname = "localhost";
?> 
```

**父.php**

```
<?php
include("c:/inetpub/vhosts/mydomain.net/php-private/db-conn.php");

//echo $dbPassword;
//echo $dbUsername;

$dbHandle = mysql_connect($dbHostname, $dbUsername, $dbPassword) or die("Unable to load page content due to a connection fault.");
unset ($dbHostname, $dbUsername, $dbPassword);

echo "Connected to MySQL<br><br>";
?> 
```

但我收到了这个错误：

**用户 'xxx'@'localhost' 的访问被拒绝（使用密码：否）**

这（对我来说）奇怪的是我可以成功地回显用户名和主机名，但我不能回显密码，它是空的。但是，如果我转到我的包含文件，从“dbPassword”复制密码并将其内联粘贴到我的父页面上，它就可以工作。这证明我的密码是正确的，包括用户名和主机名，我只是无法访问我的密码变量！

有人可以把我直接放在这里吗？今晚我已经用 open_basedir 和这个包含文件的权限拉了我的头发！！*_*

**更新 - **

问题解决了，请看下面我的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T05:45:10.163

如果 db-conn.php 和 parent.php 在同一个文件夹下，可以直接使用

```
include ('db-conn.php'); 
```

而且我不确定使用`unset ($dbHostname, $dbUsername, $dbPassword);`

还有就是说没有设置密码。所以也许你应该为 $dbPassword 变量使用空字符串`$dbpassword = '';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:03:38.203

```
Access denied for user 'xxx'@'localhost' (using password: NO) 
```

只是告诉您您没有向 mysql_connect() 提供密码 您可以 1\. 检查您是否包含正确的 db-conn.php 文件。2\. 将此添加到 db-conn.php 的顶部

```
 global $dbUsername, $dbPassword, $dbHostname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T06:46:31.550

尝试使用 127.0.0.1 作为主机名。问题是有时 PHP 不接受 localhost 作为主机，因为 host.ini 文件中缺少一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T06:50:33.157

对不起，浪费了伙计们的时间。我发现了问题。我没有给 FTP 用户对`\php-private\`我在 root 之前创建的文件夹的写入权限，所以当我更改文件并上传它时，如果我真的检查了 FTP 日志，我会看到它因“拒绝访问”而失败。我更改了权限和 kapow，我的当前包含文件工作正常！真是个平民！

# android - 将字节从 Android 发送到 PC 蓝牙

> ID：11606964
> 
> 赞同：0
> 
> 时间：2012-07-23T05:36:27.797
> 
> 标签：android, bluetooth

我是 BT 新手，我想建立一个环境，我可以将一些字节从我的手机发送到 BT com 端口。目前，我可以成功配对并连接到我的 BT 耳机。当我尝试连接到 PC 上的 BT 加密狗时，Android 套接字 connect() 抛出“java.io.IOException：文件描述符处于错误状态”我正在寻找有关成功将 Android 连接到 PC 的建议，发送一些字节到 PC 并在端口监视器中观察它们。

这是我目前的状态：

*   加密狗已在 Android OS BT 菜单中与手机配对
*   加密狗出现在 Windows 系统托盘中
*   我可以通过 Android 上的共享和 Windows BT shell 菜单中的“发送文件”通过 BT 发送和接收文件

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:01:50.767

答案是在 PC 的蓝牙后面放置一个服务器。我使用[inthehand 的](http://inthehand.com/)软件来提供该功能。

# iphone - Cocos2d，需要保存nsuserdefault对象id到游戏中心

> ID：11606968
> 
> 赞同：0
> 
> 时间：2012-07-23T05:36:36.190
> 
> 标签：iphone, objective-c, ios, xcode4, cocos2d-iphone

我有一个需要保存到排行榜的对象 ID“分数”。

我按照一个例子，到了这一部分

```
-(void) onPlayerInfoReceived:(NSArray*)players
{
    CCLOG(@"onPlayerInfoReceived: %@", [players description]);
    GameKitHelper* gkHelper = [GameKitHelper sharedGameKitHelper];
    [gkHelper submitScore:1234 category:@"scoreboard"];

    [gkHelper showLeaderboard];
} 
```

除了我需要保存它。

```
 _score = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"]; 
```

并且不需要玩家工具包助手参考，因为它在同一个文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:30:26.847

我不太明白这里的问题，但我会试一试。不过，在我这样做之前，您绝对应该按照@Nick Bull 所说的去做，并学习编程和objective-c 的基础知识。

现在，我认为您想要的是将保存在 NSUserDefaults 中的分数报告给 GameCenter 而不是“1234”。

替换这一行：

```
[gkHelper submitScore:1234 category:@"scoreboard"]; 
```

有了这个：

```
[gkHelper submitScore:[[NSUserDefaults standardUserDefaults] integerForKey:@"score"] category:@"scoreboard"]; 
```

`[[NSUserDefaults standardUserDefaults] integerForKey:@"score"]`返回一个 int 对吗？因此，您应该能够将其作为参数传递到您的提交分数方法中。

# c# - 测试实体框架模型

> ID：11606970
> 
> 赞同：1
> 
> 时间：2012-07-23T05:36:45.157
> 
> 标签：c#, entity-framework, unit-testing, repository

我要测试我的 EF 模型。为了做到这一点，我创建了 IDbContext 类。但我不知道如何重写我的 Save 和 Delete 方法，因为我不知道如何编写 **db.Partner.AddObject(obj);** 如何重写这些方法？

```
public interface IDbContext
    {
        int SaveChanges();
        DbSet<Partner> Partner { get; set; }    
    }    
public class PartnerRepository : IPartnerRepository
{
    readonly IDbContext _context;
    public PartnerRepository()
    {
        _context = (IDbContext)new VostokPortalEntities();
    }
    public PartnerRepository(IDbContext context)
    {
        _context = context;
    }

    public void Save(Partner obj)
    {
        using (var db = new VostokPortalEntities())
        {
            if (obj.PartnerID == 0)
            {
                db.Partner.AddObject(obj);
            }
            else
            {
                db.Partner.Attach(obj);
                db.ObjectStateManager.ChangeObjectState(obj, System.Data.EntityState.Modified);
            }
            db.SaveChanges();
        }
    }
    public void Delete(Partner obj)
    {

        using (var db = new VostokPortalEntities())
        {

            db.Partner.Attach(obj);
            db.ObjectStateManager.ChangeObjectState(obj, System.Data.EntityState.Deleted);
            db.SaveChanges();
        }
    }
    public List<Partner> GetAll()
    {
        using (var db = new VostokPortalEntities())
        {
            return db.Partner.OrderByDescending(i => i.PartnerID).ToList();
        }
    }
} 
```

这是测试 EF 模型的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:25:43.723

存储库的单元测试需要花费大量时间，并且不会给您带来很多好处。为什么？因为存储库没有复杂的业务逻辑。通常对底层数据访问 API（即 ORM）有非常简单的调用。我认为最好花时间编写全栈验收测试，这也将显示您的存储库是否完成了它的工作。

顺便说一句，有一个有趣的规则[不要嘲笑你不拥有的东西](http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html)：

> 通过测试与我们不拥有的模拟版本的交互，我们实际上并没有使用我们的测试来检查正确的行为，也没有驱逐合作者的设计。我们所做的所有测试都是重复我们对其他类型如何工作的猜测。当然，总比没有测试好，但不一定要好得多。

# binary - 位掩码缓冲区索引如何导致环绕

> ID：11606971
> 
> 赞同：1
> 
> 时间：2012-07-23T05:36:45.470
> 
> 标签：binary, embedded

有人可以根据循环缓冲区索引解释位掩码是如何工作的。具体在以下代码中：

```
#define USART_RX_BUFFER_SIZE 128     /* 2,4,8,16,32,64,128 or 256 bytes */
#define USART_RX_BUFFER_MASK ( USART_RX_BUFFER_SIZE - 1 )

    ISR(USART_RX_vect)
    {
        unsigned char data;
        unsigned char tmphead;

        /* Read the received data */
        data = UDR0;
        /* Calculate buffer index */
        tmphead = ( USART_RxHead + 1 ) & USART_RX_BUFFER_MASK;
        USART_RxHead = tmphead;      /* Store new index */

        if ( tmphead == USART_RxTail )
        {
            /* ERROR! Receive buffer overflow */
        }

        USART_RxBuf[tmphead] = data; /* Store received data in buffer */
    } 
```

我知道位屏蔽索引​​的结果是索引环绕；我的问题是为什么？另外，为什么“USART_RX_BUFFER_SIZE”必须是 2 的幂？

谢谢

乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T06:11:29.180

要理解这一点，您必须了解一些二进制，并且您必须了解二进制操作。

您可能知道，计算机中的所有内容都以二进制、1 和 0 的序列存储。这意味着理论上，内存中的任何数据字符串都可以被视为数字。由于您的代码是 usin `char`，因此我将重点介绍它们。

在 C 中，`char`s 要么是有符号的，要么是无符号的，为此使用无符号是很重要的。我不会涉及二进制补码表示，但只要说如果你使用 signed `char`s 就会破坏它就足够了。A`char`是单个字节，通常被认为是 8 位，如下所示：

```
00000000 -> 0
00001001 -> 9 
```

基本上每个位代表 2 的幂（我在这里使用 MSB-first），所以第二个数字是`2^1 + 2^3 = 1 + 8 = 9`. 因此，您可以看到如何使用它来索引数组。

按位运算对某些数据的各个位进行操作。在这种情况下，您使用的是二进制**和**( `&`)，并且应用二进制**和**的行为称为位掩码。

```
data   - 00101100
mask   - 11110110
       ----------
result - 00101100 
```

如您所见，仅当`data`和都为 1 时，结果才将位设置为`mask`1。

现在回到我们的二进制表示。由于每个位是 2 的幂，因此可以使用 0 中的单个 1 来表示二进制中的 2 的幂。

```
01000000 - 64 
```

就像`1000 - 1 = 999`, `01000000 - 1 = 00111111`, 哪里`00111111`是 63。

使用它我们可以发现，在计算下一个索引时，我们执行了以下操作：

```
(a + 1) & 00111111 
```

如果 a 是（例如）10，那么我们得到

```
(00001010 + 1) = 00001011 (11)
 00001011 & 00111111 = 00001011 
```

所以掩蔽没有改变，但在 63 的情况下：

```
(00111111 + 1) = 01000000 (64)
 01000000 & 00111111 = 00000000 (0) 
```

因此，与其尝试索引到 64（这是第 65 个元素，因此是一个错误），不如回到开头。

这就是为什么缓冲区大小必须是 2 的幂，如果不是，那么掩码将无法正确计算，您将不得不使用模 ( `%`) 或比较，而不是位掩码。这很重要，因为按位运算符非常快，因为在大多数处理器中它们通常只是一条指令，并且`&`需要很少的周期。模可能是一条指令，但它可能是整数除法，这在大多数平台上传统上相当慢。比较需要几条指令、寄存器和至少 1 次跳转。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T22:54:40.800

约翰写道：

> 我支持关于模数的评论，我们发现在我们的 micro 上，执行“a %= MODULUS”比执行 if(a>b) a/=MODULUS; 花费的时间要长 10-20 倍。– 约翰 U 2012 年 8 月 3 日 17:01

但是仍然存在除法：a/=MODULUS，因此效率与模运算相同，我假设..

# mysql - 如何在我的服务器上启用 MySQL 慢查询日志？

> ID：11606972
> 
> 赞同：27
> 
> 时间：2012-07-23T05:36:52.460
> 
> 标签：mysql

如何在我的服务器上启用慢查询日志？我已通过添加文件在本地主机上启用它`log-slow-queries =[path]`，`my.ini`但不知道如何在我的服务器上添加它。我的服务器是基于 Linux 的，并且有 PHP 版本 5.2.16。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-23T07:39:55.173

启用慢查询日志与 PHP 版本无关。您必须在 MySQL 服务器中启用它。您可以通过两种方式启用

1.  在运行时
2.  在服务器启动期间

如果您的服务器高于 5.1.6，您可以在运行时本身中设置慢查询日志。您必须为此执行此查询。

```
set global log_slow_queries = 1;
set global slow_query_log_file = <some file name>; 
```

或者，您可以在 my.cnf/my.ini 选项文件中设置此选项

```
log_slow_queries = 1; 
slow_query_log_file = <some file name>; 
```

选项文件改变的地方，需要重启MySQL服务器。

mysql 选项文件的位置可以在这里找到[http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html](http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html)

仅供参考：`log_slow_queries`在 MySQL 5.6.1 中被删除`slow_query_log`并被使用。 [http://dev.mysql.com/doc/refman/5.6/en/server-options.html#option_mysqld_log-slow-queries](http://dev.mysql.com/doc/refman/5.6/en/server-options.html#option_mysqld_log-slow-queries)

但为了提高性能，您可以将日志输出（选项`log_output`）设置为`TABLE`. 您还可以查看其他慢查询日志选项，例如`long_query_time`，`log-queries-not-using-indexes`

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-07-23T06:11:45.493

您可以通过运行以下命令来临时设置它：

```
set global slow_query_log = 1;
set global slow_query_log_file = '/var/log/mysql-slow.log'; 
```

但是当 mysql 重新启动时，您的更改将被撤消。

您可以通过将以下内容添加到`my.cnf`文件中来永久设置它：

```
slow-query-log=1
slow-query-log-file=/var/log/mysql-slow.log 
```

的位置`my.cnf`因操作系统而异，但通常位于`/etc/my.cnf`或中`/etc/mysql/my.cnf`：

保存更改后，您需要重新启动 MySql。这可能因操作系统而异，但以下是一些常见示例：

```
sudo /etc/init.d/mysqld restart 
```

和

```
sudo service mysqld restart 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-27T05:10:54.980

首先（作为根：）

```
mkdir /var/log/mysql
touch /var/log/mysql/log-slow-queries.log
chown mysql:mysql -R /var/log/mysql 
```

然后在 /etc/my.conf 中的 [mysqld] 下（或您的配置文件所在的任何位置：）

```
slow_query_log = 1
log-queries-not-using-indexes
long_query_time=1
log-slow-queries=/var/log/mysql/log-slow-queries.log 
```

下一个：

```
service mysql restart 
```

最后：

```
mysql
mysql> SELECT SLEEP(10);
mysql> quit 
```

确认：

```
cat /var/log/mysql/log-slow-queries.log

/usr/sbin/mysqld, Version: 5.5.42-cll (MySQL Community Server (GPL)). started with:
Tcp port: 0  Unix socket: (null)
Time                 Id Command    Argument
# Time: 150727  0:05:17
# User@Host: root[root] @ localhost []
# Query_time: 10.000215  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0
SET timestamp=1437973517;
select sleep(10); 
```

# facebook - 未经授权共享 Facebook 应用？

> ID：11606973
> 
> 赞同：0
> 
> 时间：2012-07-23T05:36:56.360
> 
> 标签：facebook, facebook-graph-api

我正在为希望其行为如下的客户开发 Facebook 应用程序：

*   Anne 安装并授权应用程序（捕获新闻源）
*   这让 Anne 可以创建自定义新闻源（例如纽约时报源）

*   安妮可以与她的朋友布莱恩分享她的《纽约时报》提要

*   **布赖恩无需**安装/授权应用程序即可使用该应用程序阅读此提要
*   如果 Brian 想要：他可以安装/授权应用程序，并创建自己的新闻源

问题：

*   这可能吗？我的理解是，Brian 必须安装/授权该应用程序才能使用它来查看 Anne 的提要

*   面向企业的 Facebook 页面具有不需要授权的应用程序。如果他们没有对您的私人数据采取行动，这些是特例吗？

# cocoa-touch - 显示阴影时 UIImageView 性能不佳

> ID：11606975
> 
> 赞同：0
> 
> 时间：2012-07-23T05:37:04.517
> 
> 标签：cocoa-touch, uiimageview, quartz-graphics

我有一个显示图像的滚动视图。它的“剪辑子视图”设置已关闭，因此左侧和右侧的图像也会显示。如果我向下面的图像视图添加阴影（使用 QuartzCore），滚动性能会严重下降。

```
imageView.layer.shadowOffset = CGSizeMake(0, 0);
imageView.layer.shadowColor = [[UIColor blackColor] CGColor];
imageView.layer.shadowRadius = 8.0;
imageView.layer.shadowOpacity = 0.9; 
```

有没有办法以更好的方式向图像视图添加阴影？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:55:31.980

尝试将以下内容添加到您的阴影设置中。

```
imageView.layer.shadowPath = [UIBezierPath bezierPathWithRect:imageView.bounds].CGPath; 
```

可能这将有助于更平滑的滚动。

# iphone - ELCImagePickerController 不滚动

> ID：11606976
> 
> 赞同：0
> 
> 时间：2012-07-23T05:37:34.813
> 
> 标签：iphone

我是 iPhone sdk 的新手。我已经使用了 ELCImagePickerController。当我滚动库时，它崩溃并给了我理由：`GuardMalloc[Traveler's Note-2211]: Failed to VM allocate 16 bytes GuardMalloc[Traveler's Note-2211]: Explicitly trapping into debugger!!! GuardMalloc[Traveler's Note-2211]: Failed to VM allocate 112 bytes GuardMalloc[Traveler's Note-2211]: Explicitly trapping into debugger!!!`

请帮我。感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:30:25.793

看起来您的内存不足。因为您的日志说 VM 无法分配 X 字节的内存。

这是一个链接，可以完全帮助您解决问题。

[帮助链接](https://stackoverflow.com/questions/7829808/ios-bad-access-impossible-to-find)

您是否实现了 didReceiveMemoryWarning 方法？如果是这样，请在其中放置一个 NSLog 以查看您是否内存不足。

# api - 具有多个页面的 WHMCS 插件模块

> ID：11606978
> 
> 赞同：0
> 
> 时间：2012-07-23T05:37:41.180
> 
> 标签：api, module, add-on, whmcs, content-pages

我目前正在开发我的第一个 WHMCS 插件模块，到目前为止一切进展顺利。但是，我需要制作多个内容页面，而根据维基文章显示输出的唯一方法是在输出功能中回显它。当显示内容的唯一方法是通过单个 PHP 函数时，如何创建单独的页面？

我假设使用 div，并隐藏相关的 div，尽管这不是最好的方法。它说您可以使用“modulelink”变量链接回模块，但我不知道如何使用它，或者它是否可以用于制作多个内容页面。

[http://docs.whmcs.com/Addon_Module_Developer_Docs](http://docs.whmcs.com/Addon_Module_Developer_Docs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:39:56.667

经过一番修改，它比我意识到的要简单得多，并且“modulelink”变量只是为了让您可以链接回页面。要创建其他页面，您基本上可以按照以下方式做一些事情......

```
<a href="addonmodules.php?module=device_portal&catid=1">Datacenters</a> 
```

然后在输出函数中有...

```
$category = $_GET['catid'];

if ($category == "1" || $category == "")
{
//page 1 content here
}
else if ($category == "2")
{
//page 2 content here
} 
```

等等。

# android - 如何在android中显示诸如“应用程序已崩溃，但已向管理员发送报告”之类的消息

> ID：11606981
> 
> 赞同：2
> 
> 时间：2012-07-23T05:38:03.613
> 
> 标签：android, crash, crash-reports

我是 android 新手，我的应用程序涉及大量互联网访问，并且很多时候需要来自 Web 服务的数据不可用时，我的应用程序崩溃。

我试图避免尽可能多的情况，但我不确定我的应用程序是否没有崩溃。

我正在使用一个名为“delight circle”的应用程序，有时该应用程序会崩溃并向我显示这个 Toast：

“应用程序已崩溃，并向管理员发送报告”

并带我回到上一个活动或上一个动作，从这里我可以再次正常使用该应用程序。

我有两个问题：

1.  应用程序崩溃一次后如何让应用程序正常工作。在我的应用程序中，如果它崩溃，那么它会要求我强制关闭，当我单击它时，它会将我带到上一个活动（或操作），但那里没有任何效果，如果我尝试做任何它要求再次强制关闭的事情，我最终从 Settings --> Applications --> myApp --> foce close 强制关闭应用程序。

2.  如何发送有关实际导致应用程序崩溃的报告？现在我在每个活动中都有很多日志，所以现在如果它崩溃了，我可以找出确切的原因并解决。但是当我发布应用程序时，我该怎么做呢？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T05:43:07.713

为此，您必须使用[UnCaughtExceptionHandler](http://developer.android.com/reference/java/lang/Thread.UncaughtExceptionHandler.html)。

这是一个例子，

[http://trivedihardik.wordpress.com/2011/08/20/how-to-avoid-force-close-error-in-android/](http://trivedihardik.wordpress.com/2011/08/20/how-to-avoid-force-close-error-in-android/)

覆盖异常处理程序后，您将获得对日志的访问权限，您可以从何处以电子邮件的形式发送从 SatckTrace 获取的错误日志，或使用 APIs 来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:50:40.287

我可以回答您的第二个问题，即“*如何发送有关实际导致应用程序崩溃的原因的报告*”在您的代码中尝试**[Crittercism 。](http://www.crittercism.com/)**它将帮助您找到应用程序失败的确切原因。不仅如此，它还有很多功能，比如实时统计、未解决的崩溃、崩溃警报等等。

# cuda - 如何在 CUDA 中同步我自己的内核函数？

> ID：11606984
> 
> 赞同：0
> 
> 时间：2012-07-23T05:38:37.530
> 
> 标签：cuda

```
extern "C" void callKernel()
{
    for(int i=0;i<10;i++)
    {
        calc<<< grid, thread >>>(d_arr);
        copyElement<<< grid, thread >>>(d_arr,d_arr_part,3);
        findMax<<< grid, thread >>>(d_arr_part, d_max);
        positionChange<<< grid, thread >>>(d_arr, d_max);
    }
} 
```

上面的代码是关于计算内核的。

内核函数的功能是这样的。

> "calc" : 在 d_arr 中计算并更新 d_arr 的元素值。
> 
> “copyElement”：例如，d_arr 是 4step 数组，在数组中，我只想要第 3 个元素，所以我分配其他变量 d_arr_part 并将 d_arr 的第 3 个元素复制到 d_arr_part。
> 
> "findMax" : 在 d_arr_part 中找到最大值并将最大值存储到 d_max。
> 
> "positionChange" : d_arr 元素根据 d_max 值更新。

# 问题

当我执行我的程序时，结果没有一致性。每当我执行时，结果都会改变。我在谷歌搜索这个问题，发现内核函数是同时执行的。我的意图是所有内核函数都按顺序执行。我在第 3.2.5 节阅读了 NVIDIA 的 CUDA C 编程指南。但我不明白该怎么做才能解决这个问题。如果有人有想法，请告诉我方法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T05:41:37.123

您可以`cudaDeviceSynchronize`在内核执行之间使用以保证顺序。但是，您的代码不需要这样做，所以我认为您的内核中可能存在错误。

# ruby - 类评估块内的正则表达式错误

> ID：11606985
> 
> 赞同：1
> 
> 时间：2012-07-23T05:38:58.480
> 
> 标签：ruby, regex, class-eval

我有一些代码可以从简单的定义中将方法添加到模块中，以便通过 REST 客户端周围的包装类与远程资源进行对话。

```
def service_function(function_name, method, uri, parameters)
  class_eval <<-RUBY
    def #{function_name}(params)
      if !(#{function_name}_required_params - params.keys).empty? || \
           !(params.keys - #{function_name}_params).empty?
        raise Errors::InvalidParameters.new(service_name, __method__,
                                            params.keys, #{function_name}_params)
      end
      WebServices::ServiceRequest.perform(self.domain, #{uri}, #{method}, params)
    end

    def #{function_name}_params
      #{function_name}_required_params + #{function_name}_optional_params
    end

    def #{function_name}_required_params
      #{parameters}.select { |param,req| req }.keys
    end

    def #{function_name}_optional_params
      #{parameters}.select { |param,req| !req }.keys
    end
  RUBY
end 
```

在我什至可以运行代码之前，只需要我在 IRB 中构建的 gem 就会吐出​​这个错误：

```
1.9.2p320 :001 > require 'web-services'
SyntaxError: (eval):7: unknown regexp options - rt 
```

违规行是：

```
WebServices::ServiceRequest.perform(self.domain, #{uri}, #{method}, params) 
```

删除“#{uri}”参数可以修复它，甚至保留“#{method}”参数。有没有人知道为什么会这样？我快束手无策了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:01:01.257

You have a `url` that looks something like `/something/rt` and that will look like a regex literal in here:

```
WebServices::ServiceRequest.perform(self.domain, #{uri}, #{method}, params) 
```

You need to escape and quote `#{uri}` so that it looks like a string inside the heredoc, that way `class_eval` will see `perform(..., '/something/rt', ...)` and be happy. You might have similar issues with `#{method}`.

# java - 如何在 Java 中添加抽象方法

> ID：11606986
> 
> 赞同：-2
> 
> 时间：2012-07-23T05:39:02.210
> 
> 标签：java, java-7

好的。我被困在我作业的这一部分。我需要将一个名为 getDisplayText 的抽象方法添加到产品类（下面给出的代码）。请告诉我放在哪里以及如何放置。你真是太好了。此外，此方法不应接受任何参数，并且应返回一个字符串对象。然后编译这个类。（对不起，我的英语不好...... - 这是什么意思？！保存文件？！）

这是代码：

```
import java.text.NumberFormat;

public abstract class Product {
private String code;
private String description;
private double price;
public static int count = 0;

public Product() {
    code = "";
    description = "";
    price = 0;
}

public void setCode(String code) {
    this.code = code;
}

public String getCode() {
    return code;
}

public void setDescription(String description) {
    this.description = description;
}

public String getDescription() {
    return description;
}

public void setPrice(double price) {
    this.price = price;
}

public double getPrice() {
    return price;
}

public String getFormattedPrice() {
    NumberFormat currency = NumberFormat.getCurrencyInstance();
    return currency.format(price);
}

@Override
public String toString() {
    return "Code:        " + code + "\n" + "Description: " + description + "\n" + "Price:       "
            + this.getFormattedPrice() + "\n";
}

public static int getCount() {
    return count;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:42:31.317

抽象方法由两件事表示：

1.  `abstract`修饰符_
2.  没有方法体。

所以

```
public abstract String getDisplayText(); 
```

应该是吧，我猜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T05:42:56.247

只需将其添加到您的课程中：

```
public abstract String getDisplayText(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T05:43:22.513

让它像这样。

```
abstract String getDisplayText(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T05:43:23.737

对于抽象类，方法可能是抽象的，也可能不是。所以我们需要指定抽象的keywork来表示它。

在抽象类中：

```
abstract String getDisplayText(); 
```

如果您在界面中添加：

```
String getDisplayText(); 
```

因为java doc：

> 接口中的所有方法（参见接口部分）都是隐式抽象的，因此抽象修饰符不与接口方法一起使用

# java - 系统找不到指定的文件

> ID：11606987
> 
> 赞同：0
> 
> 时间：2012-07-23T05:39:06.623
> 
> 标签：java, jar, path, zip, executable-jar

```
Caused by: java.io.FileNotFoundException: town.zip (The system cannot find the f
ile specified) 
```

当我尝试`Windows 7`从构建的 JAR加载我的 3d 场景时，`Linux`反之亦然`Linux`，得到与 JAR 是包相同的错误`Windows`。我只使用正常*设置*在`eclipse`. 我究竟做错了什么？这似乎与我的实际代码几乎没有关系，只是一个包装问题。

加载文件的代码在构建它的同一平台上工作，是：

`assetManager.registerLocator("town.zip", ZipLocator.class);`

当项目从 eclipse 运行或在与其构建的同一平台上运行时，这将起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T07:36:45.757

您没有指定您正在使用的框架，但快速的 Google 搜索指出您正在使用`jmonkeyengine`，看起来`ZipLocator`实际上是使用 加载文件`new File(...)`，因此您`town.zip`实际上应该与 JAR 文件并排放置，而不是打包在其中。

# c - 无法使用 fork 退出子进程

> ID：11606990
> 
> 赞同：0
> 
> 时间：2012-07-23T05:39:55.750
> 
> 标签：c

我正在使用以下代码创建一个子进程，然后在一段时间后将其终止。

```
 int pid;
    if ((pid = fork()) < 0) {
        printf("Error\n");
    }
    else if (pid == 0) {
        printf("Child\n");
        system("/usr/bin/./youtube-dl -o hello.mp4 http://www.youtube.com/watch?v=PDZcqBgCS74", NULL);

    }
    else {
        printf("Father\n");
        //system("ls");
        printf("PId is %d",pid);
        sleep(10);
        kill(pid, SIGTERM);
    } 
```

问题是 10 秒后程序停止但 youtube-dl 进程没有。它仍在继续。我的要求是我想启动一个进程并在指定的时间后终止它。我到底做错了什么。我观察到我正在调用的 pidof youtube-dl 与从 fork() 提供给我的父进程的 pidof 不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:48:59.617

该`system()`命令派生出一个新的子进程，并暂停调用进程，直到该子进程退出。当您杀死您的子进程时，由创建的孙子进程`system()`继续运行。

而不是`system()`, 使用`execl()`which将当前进程*替换*为已执行的文件（在相同的 PID 下）：

```
else if (pid == 0) {
    execl("/usr/bin/./youtube-dl", "/usr/bin/./youtube-dl", "-o", "hello.mp4", "http://www.youtube.com/watch?v=PDZcqBgCS74", NULL);
    /* only reached if execl() fails */
    perror("execl");
    _exit(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:44:43.563

当您使用该`system`功能时，会创建另一个进程，其父进程是您的子进程。您可以使用`exec`代替，`system`以便`kill`可以发出正确的 pid 信号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T05:46:49.320

如果子进程应该只进行 youtube 下载（之后仅此而已），您可以简单地：

```
 else if (pid == 0) {
    /* chld process */
    execl("/usr/bin/youtube-dl", "youtube-dl", "-o", "hello.mp4",
          "http://www.youtube.com/watch?v=PDZcqBgCS74", 
          NULL);
    perror ("youtube-dl exec failed");
    _exit(126);
 } 
```

# mysql - PHPmyadmin：选择在某个表格字段上显示什么图像？

> ID：11606993
> 
> 赞同：0
> 
> 时间：2012-07-23T03:46:04.407
> 
> 标签：mysql, php, phpmyadmin

我正在为我的网站中的新闻和更新部分创建一个数据库。我已经成功创建了一个包含标题、时间、帖子编号、文本等字段的表格。但是有一个字段我不知道如何创建：

我想在我的表中显示一个仅显示发布更新的管理员的小图像的字段。我们是 4 位管理员。我不知道是否有办法让每个管理员在编写更新时选择他的照片。我认为这与为每个图像设置不同的 ID 有关吗？我还读到将图像上传到数据库 (BLOB) 是一个坏主意，那么我该如何在数据库中使用图像呢？

像这个例子：

![http://i49.tinypic.com/14t21pl.jpg](../Images/92dd42e048999c7b0a490d9b5ec5e3b6.png)

我对这个 PHP 环境有点陌生，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T06:02:04.290

您说得对，将图像存储在数据库表上是一种不好的做法。更好的选择是将这些图像的地址存储在表中，然后将每个图像与管理员的用户名相关联，并在每次管理员更新帖子时调用它。

# c# - 我该如何处理 价值观？

> ID：11606995
> 
> 赞同：0
> 
> 时间：2012-07-23T05:40:26.430
> 
> 标签：c#, asp.net

> **可能重复：**
> [C#将字符串、整数、字符串存储在可访问变量中](https://stackoverflow.com/questions/7567695/c-sharp-storing-string-int-string-in-an-accessable-variable)

我想处理`<int, string , int>`c# 中的值。我如何处理价值观？

我想将数据存储在有 ID、名称、类型的会话中，所以请建议我应该使用哪个集合？当我看到“字典”的帮助时，它只存储 TKey、TValue。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T06:08:49.463

虽然您*可以*按照递归的建议创建一个`Tuple<int, string, int>`，但如果您只是创建自己的类型，它将使您的代码更容易理解。例如：

```
public class SessionData
{
    public int Id { get; private set; }
    public string Name { get; private set; }
    public int Type { get; private set; }

    public SessionData(int id, string name, int type)
    {
        Id = id;
        Name = name;
        Type = type;
    }
} 
```

然后在需要时创建此类的实例，并且可以将它们存储在一个`Dictionary<string, SessionData>`（或其他）中。

创建自己的类型来封装相关数据是 OOP 中的关键任务之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T05:49:55.090

`Tuple<int, string, int>`可能会奏效。