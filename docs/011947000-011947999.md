# StackOverflow 问答 11947000-11947999

# python - 使用更改 django 模板中表单字段的名称属性

> ID：11947001
> 
> 赞同：9
> 
> 时间：2012-08-14T06:39:33.330
> 
> 标签：python, django, django-forms, django-templates, django-views

我有表单字段**{{form.item}}**将呈现到

```
 <input type="text" name="item" > 
```

如何使用自定义模板标签更改表单字段的名称属性？

我尝试通过将表单发送到模板标签

```
 form.fields['item'].widget.attrs['name'] = 'new_name' 
```

但我没有成功。

我需要更改模板中的名称属性。

**更新**

**模型.py**

```
class A(models.Model):
     name = models.CharField(50)
     type = models.CharField(50)

class B(models.Model):
     field1 = ForeignKeyField(A)
     value = IntegerField() 
```

**视图.py**

```
 def saving_calculation(request):

    SavingFormset = modelformset_factory(A, extra=2)
    OfferInlineFormSet = inlineformset_factory(
                     A, B,
                     extra = 4
                     )

   if request.method == 'POST':
      pass
   else:
       offer_formset = OfferInlineFormSet()
       saving_formset = SavingFormset(queryset=SavingCalculation.objects.none()) 

   return render_to_response(
       'purchasing/saving_calculation.html',
       {
       'offer_formset':offer_formset,
       'saving_formset':saving_formset,
       } 
```

**模板**

```
 <form action="." method="POST">
  {{ offer_formset.management_form }}
  {{ saving_formset.management_form }}
  {{ saving_formset.prefix }}
  <table>
 <thead>
    <tr>
        <th>Business Unit</th>
    <th>Category</th>
    <th>Buyer</th>
    <th>Offer1</th>
    <th>Offer2</th>
    <th>Offer3</th>
    <th>Offer4</th>
    </tr>
     </thead>
 <tbody>
        {% for saving in saving_formset.forms %}
     <tr>
    <td>{{saving.businessunit}}</td>
    <td>{{saving.type_of_purchase}}</td>
    <td>{{saving.buyer}}</td>
    {% for offer in offer_formset.forms %}
        <td>{{ offer|set_field_attr:forloop.counter0 }}</td>
    </tr>
        {% endfor %}

     {% endfor %}

      </tbody>
     </table>
     <input type="submit" value="Save" />
    </form> 
```

现在在自定义模板标签中，我需要为内联表单集的每个字段分配新名称

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T10:05:29.133

我已经用几种不同的方式对此进行了测试，它适用于多种类型的表单字段。

`set_field_html_name(...)`在要设置名称的每个字段上使用。

```
from django import forms
from django.core.exceptions import ValidationError

def set_field_html_name(cls, new_name):
    """
    This creates wrapper around the normal widget rendering, 
    allowing for a custom field name (new_name).
    """
    old_render = cls.widget.render
    def _widget_render_wrapper(name, value, attrs=None):
        return old_render(new_name, value, attrs)

    cls.widget.render = _widget_render_wrapper

class MyForm(forms.Form):
    field1 = forms.CharField()
    # After creating the field, call the wrapper with your new field name.
    set_field_html_name(field1, 'new_name')

    def clean_field1(self):
        # The form field will be submit with the new name (instead of the name "field1").
        data = self.data['new_name']
        if data:
            raise ValidationError('Missing input')
        return data 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T07:52:12.737

```
form.fields['new_name'] = form.fields['item']
del form.fields['item'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-23T17:22:08.837

```
class MyForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['field_name'].label = "New Field name" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:18:26.610

您可以将任何您需要的小部件类子类化并创建自己的“渲染方法”。示例在 PATH_TO_YOUR_DJANGO/django/forms/forms.py

```
class CustomNameTextInput(TextInput):
    def render(self, name, value, attrs=None):
        if 'name' in attrs:
            name = attrs['name']
            del attrs['name']
        return super(TextInput, self).render(name, value, attrs)

class MyForm(Form):
    item = CharField(widget=CustomNameTextInput, attrs={'name':'my_name'}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-03T14:34:14.087

另一种方法是创建一个自定义输入，该输入接受一个名为“name”的新参数 [我还创建了一个使用此输入的自定义字段]：

```
class CustomNameTextInput(forms.TextInput):
    def __init__(self, *args, **kwargs):
        self.name = kwargs.pop('name')
        super().__init__(*args, **kwargs)

    def render(self, name, value, attrs, renderer):
        return super().render(self.name, value, attrs, renderer)

class ElementField(forms.CharField):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.widget = CustomNameTextInput(name='name') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-03T17:37:05.173

```
from django.forms.widgets import Input, TextInput

class CustomInput(Input):
    def get_context(self, name, value, attrs):
        context = super(CustomInput, self).get_context(name, value, attrs)
            if context['widget']['attrs'].get('name') is not None:
                context['widget']['name'] = context['widget']['attrs']['name']
        return context

class CustomTextInput(TextInput, CustomInput):
    pass

class ClientLoginForm(forms.Form):

    username = forms.CharField(label='CustomLabel', widget=CustomTextInput(attrs={'class': 'form-control','name': 'CustomName'})) 
```

# blackberry - 我在哪里可以下载黑莓网络诊断工具的源代码？

> ID：11947006
> 
> 赞同：0
> 
> 时间：2012-08-14T06:39:56.600
> 
> 标签：blackberry, java-me, blackberry-jde

[http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Network_Diagnostic_Tool.html?nodeid=1450596&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800451/800563/What_Is_-_Network_Diagnostic_Tool.html?nodeid=1450596&vernum=0)

我找不到 NDT 的任何下载链接。我想分析 ReportScreen.displayNetworkInfo() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:18:51.953

我想你只是错过了它。该链接在该页面上，但超链接文本只是一个小词（“此处”），根据您的浏览器，它可能不会突出。

这是源代码的完整链接：

[http://www.blackberry.com/knowledgecentersupport/kmsupport/developerknowledgebase/zip/NetworkDiagnosticPublic.zip](http://www.blackberry.com/knowledgecentersupport/kmsupport/developerknowledgebase/zip/NetworkDiagnosticPublic.zip)

我检查了，ReportScreen.java 文件在那里：

```
 /**
     * Displays various network/radio info
     */
    public void displayNetworkInfo(){
            if(RadioInfo.getSignalLevel(RadioInfo.WAF_3GPP)!=RadioInfo.LEVEL_NO_COVERAGE){
                    add(new EditField("3GPP Signal Level: ",RadioInfo.getSignalLevel(RadioInfo.WAF_3GPP)+"dBm",255,EditField.READONLY));
                    add(new SeparatorField());
            }
            if(RadioInfo.getSignalLevel(RadioInfo.WAF_CDMA)!=RadioInfo.LEVEL_NO_COVERAGE){
                    add(new EditField("CDMA Signal Level: ",RadioInfo.getSignalLevel(RadioInfo.WAF_CDMA)+"dBm",255,EditField.READONLY));
                    add(new SeparatorField());
            }
            if(RadioInfo.getSignalLevel(RadioInfo.WAF_IDEN)!=RadioInfo.LEVEL_NO_COVERAGE){
                    add(new EditField("iDEN Signal Level: ",RadioInfo.getSignalLevel(RadioInfo.WAF_IDEN)+"dBm",255,EditField.READONLY));
                    add(new SeparatorField());
            }
            if(RadioInfo.getSignalLevel(RadioInfo.WAF_WLAN)!=RadioInfo.LEVEL_NO_COVERAGE){
                    add(new EditField("WLAN Signal Level: ",RadioInfo.getSignalLevel(RadioInfo.WAF_WLAN)+"dBm",255,EditField.READONLY));
                    add(new SeparatorField());
            }      

            add(new EditField("Network: ",RadioInfo.getCurrentNetworkName(),255,EditField.READONLY));
            add(new SeparatorField());

            String netType="";
            switch(RadioInfo.getNetworkType()){
                    case RadioInfo.NETWORK_CDMA:
                            netType="CDMA";
                            break;
                    case RadioInfo.NETWORK_GPRS:
                            netType="GPRS";
                            break;
                    case RadioInfo.NETWORK_IDEN:
                            netType="IDEN";
                            break;
                    case RadioInfo.NETWORK_NONE:
                            netType="NONE";
                            break;
                    case RadioInfo.NETWORK_UMTS:
                            netType="UMTS";
                            break;
                    case RadioInfo.NETWORK_802_11:
                            netType="802.11";
                            break;
                    default:
                            netType="Failed to determine";
            }
            add(new EditField("Network Type: ",netType,255,EditField.READONLY));
            add(new SeparatorField());

            int activeWAFS = RadioInfo.getNetworkService();
            String services = "";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_DATA)>0)
                    services+="Data + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_DIRECT_CONNECT)>0)
                    services+="Direct Connect + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_E911_CALLBACK_MODE)>0)
                    services+="E911 Callback + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_EDGE)>0)
                    services+="EDGE + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_EMERGENCY_ONLY)>0)
                    services+="Emergency Only + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_EVDO)>0 && RadioInfo.getNetworkType()==RadioInfo.NETWORK_CDMA)
                    services+="EVDO + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_EVDO_ONLY)>0)
                    services+="EVDO Only + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_GAN)>0)
                    services+="GAN + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_IN_CITY_ZONE)>0)
                    services+="City Zone + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_IN_HOME_ZONE)>0)
                    services+="Home Zone + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_MODEM_MODE_ENABLED)>0)
                    services+="Modem Mode + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_ROAMING)>0)
                    services+="Roaming + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_ROAMING_OFF_CAMPUS)>0)
                    services+="Roaming Off-campus + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_SUPPRESS_ROAMING)>0)
                    services+="Supress Roaming + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_UMTS)>0)
                    services+="UMTS + ";
            if((activeWAFS & RadioInfo.NETWORK_SERVICE_VOICE)>0)
                    services+="Voice + ";
            if(services.length()>2){
                    add(new EditField("Network Services: ",services.substring(0,services.length()-2),255,EditField.READONLY));
                    add(new SeparatorField());
            } else{
                    add(new EditField("Network Services: ","No Service Found",255,EditField.READONLY));
                    add(new SeparatorField());
            }

            add(new EditField("PIN: ",Integer.toHexString(DeviceInfo.getDeviceId())+"",255,EditField.READONLY));
            add(new SeparatorField());

            add(new EditField("Battery: ",DeviceInfo.getBatteryLevel()+"%",255,EditField.READONLY));
            add(new SeparatorField());

            add(new SeparatorField());
    } 
```

# php - 如何从图像网址中提取中间数字

> ID：11947013
> 
> 赞同：0
> 
> 时间：2012-08-14T06:40:27.033
> 
> 标签：php

如何修剪下面url的前6个数字和最后一个字符串和扩展名并显示1337，（1337是图像的id。）

```
1330001337_jenir.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:46:09.473

我会尝试正则表达式：

```
preg_match("/(?:\d){6}(\d+)/", "1330001337_jenir.jpg", $matches);

echo $matches[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:45:09.217

```
$id = substr(strstr($name, '_', true), 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:50:42.957

试试这个代码块——

```
$mystr = "1330001337_jenir.jpg";

echo substr($mystr,6,4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:51:50.477

简单地

```
<?php
 $myStr='1330001337_jenir.jpg';

 $strArray=explode($myStr,'-');
 $numStr=substr($strArray[0],6); //returns 1337

 $nameStr=substr($strArray[1],0,-4);  //returns jenir

 ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T06:45:05.813

使用[substr](http://php.net/substr) + [explode](http://php.net/explode)获取您的号码。

# php - 从多维 PHP 数组中提取特定数据

> ID：11947014
> 
> 赞同：0
> 
> 时间：2012-08-14T06:40:36.207
> 
> 标签：php, arrays, multidimensional-array

我试图从这个多维数组中包含的每个数组中提取“消息”数据，但无法弄清楚如何在数组中获得足够的深度来提取它。我正在使用的页面以这种方式返回数据，所以我无法编辑它以不同方式返回。

```
Array
(
[0] => stdClass Object
    (
        [revision_cache] => stdClass Object
            (
                [revision] => 14
                [email] => email@email.com
                [changed_dirs] => Array
                    (
                    )

                [account_id] => 133673
                [message] => Deleted unneeded help desk files.
                [hash_id] => 
                [author] => asdfasfd
                [too_large] => 
                [user_id] => 308011
                [repository_id] => 401677
                [changed_files] => Array
                    (
                        [0] => Array
                            (
                                [0] => hdeskdelete.php
                                [1] => delete
                            )

                        [1] => Array
                            (
                                [0] => hdeskrespond.php
                                [1] => delete
                            )

                        [2] => Array
                            (
                                [0] => hdesktickets.php
                                [1] => delete
                            )

                    )

                [time] => 2012/08/13 17:01:58 -0500
                [changed_properties] => 
            )

    )

[1] => stdClass Object
    (
        [revision_cache] => stdClass Object
            (
                [revision] => 13
                [email] => email@email.com
                [changed_dirs] => Array
                    (
                    )

                [account_id] => 133673
                [message] => Major updates and restyling of Help Desk system.
                [hash_id] => 
                [author] => asdfasdfasdf
                [too_large] => 
                [user_id] => 308011
                [repository_id] => 401677
                [changed_files] => Array
                    (
                        [0] => Array
                            (
                                [0] => members/hdeskdelete.php
                                [1] => delete
                            )

                        [1] => Array
                            (
                                [0] => Array
                                    (
                                        [0] => helpdesk.php
                                        [1] => members/helpdesk.php
                                        [2] => 3
                                    )

                                [1] => copy
                            )

                        [2] => Array
                            (
                                [0] => members/hdeskrespond.php
                                [1] => delete
                            )

                        [3] => Array
                            (
                                [0] => members/hdesktickets.php
                                [1] => delete
                            )

                        [4] => Array
                            (
                                [0] => Array
                                    (
                                        [0] => hdeskdelete.php
                                        [1] => members/hdeskdelete.php
                                        [2] => 3
                                    )

                                [1] => copy
                            )

                        [5] => Array
                            (
                                [0] => members/helpdesk.php
                                [1] => delete
                            )

                        [6] => Array
                            (
                                [0] => Array
                                    (
                                        [0] => hdeskrespond.php
                                        [1] => members/hdeskrespond.php
                                        [2] => 3
                                    )

                                [1] => copy
                            )

                        [7] => Array
                            (
                                [0] => Array
                                    (
                                        [0] => hdesktickets.php
                                        [1] => members/hdesktickets.php
                                        [2] => 3
                                    )

                                [1] => copy
                            )

                    )

                [time] => 2012/08/13 17:01:20 -0500
                [changed_properties] => 
            )

    )

[2] => stdClass Object
... 
```

所以基本上，这个数组块会持续一段时间。每次“消息”是关键时，我只需要提取值。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:44:41.770

要在检查消息是否存在时遍历数组中的所有元素，如下所示：

```
foreach($inputArray as $element)
{
    if( ! empty($element->revision_cache->message)
    {
        //do something with it
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:43:34.723

这应该这样做：

```
$message = $arrayname[0]["revision_cache"]["message"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:46:34.997

尝试

```
foreach($array as $item){
   echo $item->revision_cache->message."<br>";
} 
```

# sql-server - 在 SQL Server 中将表的一部分批量复制到自身

> ID：11947018
> 
> 赞同：1
> 
> 时间：2012-08-14T06:40:48.563
> 
> 标签：sql-server, bulkinsert

我有一些数据的“版本控制”表，每个版本有 150 万行，结构是：

```
[ID] bigint,
[version] int,
[somecolumn] int,
[anothercolumn] int,
[thirdcolumn] tinyint 
```

而且我经常需要将一个版本复制到另一个版本中，就像这个查询一样：

```
INSERT INTO myTable 
    (SELECT ID, version + 1, somecolumn, anothercolumn, thirdcolumn 
     FROM myTable 
     WHERE version = @version) 
```

但问题是这执行起来很慢，比如每次操作超过 10 秒。使此操作像闪电一样快的最佳方法是什么？我已经尝试选择一个临时表并从那里合并，但这并没有更快..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:20:48.487

一些想法：

1.  使用临时表不太可能有帮助。那将是魔术。
2.  使用 NOLOCK 不太可能有帮助。我看不到任何证据表明这是一个阻塞问题，因为只有一个并发事务（至少在测试系统上）。
3.  不知道为什么重建索引比维护它更快。您的表中可能只有很少的版本？如果你得到很多索引重建将会变得越来越慢。不是长久之计。
4.  尝试将聚集索引键更改为 (Version, ID) 以便插入是顺序的。随机 DML 比顺序 DML 慢得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:37:34.283

您是否在版本列中添加了索引？那应该加快速度。

```
CREATE INDEX IDX_tableName_VERSION ON tableName (version) 
```

**更新**

在读取的表上使用 NOLOCK 怎么样？如果您认为您可以从针对该表的其他事务在您的系统中获得脏读，则无效。我以前使用过这个成功，只是需要小心使用它！

```
INSERT INTO myTable 
    (SELECT ID, version + 1, somecolumn, anothercolumn, thirdcolumn 
     FROM myTable WITH(NOLOCK)
     WHERE version = @version) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:18:18.570

看看这是否有效。

```
begin
  SELECT ID, version + 1, somecolumn, anothercolumn, thirdcolumn 
  into #temp
  FROM myTable 
  WHERE version = @version

  ALTER INDEX IDX_tableName_VERSION ON tableName.version DISABLE 

  INSERT INTO myTable
  select * from #temp

  ALTER INDEX IDX_tableName_VERSION ON tableName.version ENABLE 

end 
```

# java - 在谷歌应用引擎上使用java将html转换为图像

> ID：11947021
> 
> 赞同：1
> 
> 时间：2012-08-14T06:41:12.837
> 
> 标签：java, google-app-engine, web-applications

我试图使用 Google 的 API HtmlImageGenerator 将 html 转换为图像。但是当我在谷歌应用引擎上上传代码时，它会阻止许多类，如 JLabel、ImageIO、JeditorPane、Dimension2D 等。那么我可以在谷歌应用引擎上使用什么 java API 将 html 页面保存为图像文件？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:12:12.323

您应该使用[转换 API。](https://developers.google.com/appengine/docs/java/conversion/)

# c# - 防止加载时发生 DataGridView RowEnter 事件

> ID：11947022
> 
> 赞同：3
> 
> 时间：2012-08-14T06:41:15.143
> 
> 标签：c#, winforms

当页面加载时，datagridview 将从数据库中绑定。

我需要行输入事件来选择行并基于从数据库中检索数据。

但是在加载时它不应该发生。我怎样才能做到这一点 ？

这是我的代码

```
private void dgStation_RowEnter(object sender, DataGridViewCellEventArgs e)
{
    dgStation.Rows[e.RowIndex].Selected = true;
    int id = Convert.ToInt32(dgStation.Rows[e.RowIndex].Cells[1].Value.ToString());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T12:53:36.930

您可以在加载表单后附加电线处理程序，如下所示：

```
protected override void OnShown(EventArgs e) {
  base.OnShown(e);
  dgStation.RowEnter += dgStation_RowEnter;
} 
```

确保从设计器文件中删除当前的 RowEnter 处理程序。

或者只使用加载标志：

```
private bool loading = true;

protected override void OnShown(EventArgs e) {
  base.OnShown(e);
  loading = false;
}

private void dgStation_RowEnter(object sender, DataGridViewCellEventArgs e) {
  if (!loading) {
    dgStation.Rows[e.RowIndex].Selected = true;
    int id = Convert.ToInt32(dgStation.Rows[e.RowIndex].Cells[1].Value.ToString());
  }
} 
```

# android - Android：在每个 ListView 行中添加两个 GridView

> ID：11947023
> 
> 赞同：1
> 
> 时间：2012-08-14T06:41:15.880
> 
> 标签：android, android-layout, android-widget, android-gridview, android-gridlayout

在我的应用程序中，我有列表，每个列表项将显示两个 GridView。一个 GridView 显示所有项目及其详细信息，另一个将显示有关该列表的一些操作。

是否可以实施？如果是，请为我提供实施的最佳方式....

谢谢，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:53:36.107

*我无法将 GridView 添加到 ListView，因为它们都是可滚动的项目。* 相反，我可以在那里添加一个 GridLayout

# spring - 单元测试 spring 和 hibernate 集成时未填充表

> ID：11947024
> 
> 赞同：1
> 
> 时间：2012-08-14T06:41:18.717
> 
> 标签：spring, hibernate

我刚刚开始了一个使用spring和spring mvc的小项目。我已经定义了域类和服务以及 DAO。我正在使用 spring ORM 进行休眠。现在我正在尝试使用弹簧测试（JUnit）测试 DAO 层。

为此，我用谷歌搜索并得到了一个例子。我正在使用以下代码进行测试，

## ORMTest.java（JUnit 测试类）

```
package org.droidaceapps.tests;

import org.droidaceapps.domain.Users;
import org.droidaceapps.services.UserServiceInter;
import org.junit.Test;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests;

@ContextConfiguration
public class SterlingTest extends AbstractTransactionalJUnit4SpringContextTests {
@Test
public void userDAOTest(){
  UserServiceInter userService = (UserServiceInter) 
                        super.applicationContext.getBean("userService");
   Users userSrinivas = new Users();
   userSrinivas.setName("Srinivas");
   userSrinivas.setPassword("techno890");
   String[] skills = {"java","c++"};
   userSrinivas.setSkills(skills);

   userService.createUser(userSrinivas);

    }
  } 
```

下面是我的测试配置文件，（我已将此文件放在与 ORMTest.java 文件相同的文件夹中。

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">

    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
       <props>
           <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
           <prop key="show_sql">true</prop>
           <prop key="hibernate.hbm2ddl.auto">update</prop>
       </props>
    </property>

    <property name="mappingResources">
       <list>
           <value>/org/droidaceapps/domain/users.hbm.xml</value>
       </list>
     </property>

</bean> 
```

## 用户.hbm.xml

```
 <?xml version="1.0"?>
  <!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

 <hibernate-mapping >

   <class name="org.droidaceapps.domain.Users" table="users" >

     <id name="id" column="id" type="java.lang.Long">
        <generator class="increment"/>
      </id>
      <property name="name" type="string"/>
      <property name="password" type="string"/>

     </class>

    </hibernate-mapping> 
```

现在，当我运行 ORMTest.java 时，我在控制台中得到以下输出，

```
 Aug 14, 2012 7:18:53 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader  loadBeanDefinitions
 INFO: Loading XML bean definitions from class path resource [org/droidaceapps/tests/ORMTest-context.xml]
 Aug 14, 2012 7:18:54 AM org.springframework.context.support.AbstractApplicationContext prepareRefresh
   INFO: Refreshing    org.springframework.context.support.GenericApplicationContext@ebe9f73: startup date [Tue   Aug 14 07:18:54 BST 2012]; root of context hierarchy
    Aug 14, 2012 7:18:54 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
  INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@250606f7: 
```

定义bean [org.springframework.context.annotation.internalConfigurationAnnotationProcessor, org.springframework.context.annotation.internalAutowiredAnnotationProcessor, org.springframework.context.annotation.internalRequiredAnnotationProcessor, org.springframework.context.annotation.internalCommonAnnotationProcessor, org.springframework.context.annotation .internalPersistenceAnnotationProcessor, org.springframework.web.servlet.view.InternalResourceViewResolver#0, dataSource,sessionFactory,hibernateTemplate,userDAO,userService]; 工厂层次结构的根

我没有看到在数据库中创建了表，也没有在 hibernate 创建的控制台中看到任何 sql 语句。

我错过了什么吗？

谢谢

# c# - 在 UltraWinGrid 中只选择一个单元格

> ID：11947025
> 
> 赞同：0
> 
> 时间：2012-08-14T06:41:19.873
> 
> 标签：c#, select, cell, infragistics, ultrawingrid

当我单击超网格中的任何单元格时，我只希望选择该单元格；不是整行！！目前，当我单击一个单元格时，整行都会突出显示（如选中）。如何仅将选择（突出显示）更改为单击的单元格。

我试过了：

```
e.Layout.Override.CellClickAction = Infragistics.Win.UltraWinGrid.CellClickAction.CellSelect;
e.Layout.Override.SelectTypeCell = Infragistics.Win.UltraWinGrid.SelectType.Extended;
e.Layout.Override.SelectTypeCol = Infragistics.Win.UltraWinGrid.SelectType.None;
e.Layout.Override.SelectTypeRow = Infragistics.Win.UltraWinGrid.SelectType.None; 
```

但没有任何效果！帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T12:05:04.387

感谢史蒂夫的评论。但问题是别的。我们在运行时设置了一组默认主题，这导致了问题。所以我不得不重写它们并明确设置我的主题。那解决了！无论如何，谢谢。

# android - 在 < 4.0 的 android 版本中实现标签 + 滑动

> ID：11947029
> 
> 赞同：4
> 
> 时间：2012-08-14T06:41:37.613
> 
> 标签：android, android-actionbar

我想使用标签 + 滑动作为我的应用程序的主要导航方法，但我希望我的应用程序与大多数 android 版本兼容。（即至少应该与 andorid 2.3 兼容）

我找不到任何关于如何做到这一点的资源！请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:47:19.270

1.  查看[android 支持库。](http://developer.android.com/tools/extras/support-library.html)
2.  试试[ActionBarSherlock](http://actionbarsherlock.com/)，它是兼容性库的扩展，旨在通过单个 API 促进在所有版本的 Android 中使用操作栏设计模式。

# iphone - iPhone Sqlite 插入在 nsthread 上运行

> ID：11947030
> 
> 赞同：0
> 
> 时间：2012-08-14T06:41:38.333
> 
> 标签：iphone, ios5, sqlite, xcode4.3

我正在开发一个应用程序，我需要在其中将大量数据插入 sqlite 数据库。数据被正确插入，但问题是有时我得到一个例外

* * *

```
Assertion failure in -[AttendeeDetails addData:anddbpath:], /Users/abhisheknaidu/Desktop/EventApp/AttendeeDetails.m:118
2012-08-14 11:54:24.937 EventApp[3586:1770b] 
```

*** `Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error while creating add statement. 'SQL logic error or missing database''`

这只会发生几次..

这里的任何人都可以帮我解决这个问题..

我使用下面的代码插入

```
- (void) addData:(NSMutableArray *)attendeeArray anddbpath:(NSString *)dbPath{

    NSString *str = @"Not Available";
    if(addStmt == nil) {
          if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        const char *sql = "insert into AttendeeDetails(AtQRid , EventId , ImageUrl , FirstName , LastName , Company , Email , PhoneNumber , City , State , ATBarcodeID) Values(?,?,?,?,?,?,?,?,?,?,?)";
        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
        }
        sqlite3_bind_text(addStmt, 1, [[attendeeArray valueForKey:@"Attendee_QR_ID"] UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStmt, 2, [[[[AppDelegate SharedInstance].DetailsOfEventArray valueForKey:@"Event_ID"] objectAtIndex:0] UTF8String], -1, SQLITE_TRANSIENT);
        if ([attendeeArray valueForKey:@"Image_URL"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 3, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 3, [[attendeeArray valueForKey:@"Image_URL"] UTF8String], -1, SQLITE_TRANSIENT);
        }
        sqlite3_bind_text(addStmt, 4, [[attendeeArray valueForKey:@"FirstName"] UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStmt, 5, [[attendeeArray valueForKey:@"LastName"] UTF8String], -1, SQLITE_TRANSIENT);
        if ([attendeeArray valueForKey:@"Company"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 6, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 6, [[attendeeArray valueForKey:@"Company"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if ([attendeeArray valueForKey:@"Email"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 7, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 7, [[attendeeArray valueForKey:@"Email"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if ([attendeeArray valueForKey:@"PhoneNo"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 8, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 8, [[attendeeArray valueForKey:@"PhoneNo"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if ([attendeeArray valueForKey:@"City"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 9, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 9, [[attendeeArray valueForKey:@"City"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if ([attendeeArray valueForKey:@"State"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 10, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 10, [[attendeeArray valueForKey:@"State"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if ([attendeeArray valueForKey:@"State"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 10, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 10, [[attendeeArray valueForKey:@"State"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if ([attendeeArray valueForKey:@"State"] == [NSNull null]) {
            sqlite3_bind_text(addStmt, 11, [str UTF8String], -1, SQLITE_TRANSIENT);
        }
        else {
            sqlite3_bind_text(addStmt, 11, [[attendeeArray valueForKey:@"State"] UTF8String], -1, SQLITE_TRANSIENT);
        }

        if(SQLITE_DONE != sqlite3_step(addStmt))
            NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
        else
            //SQLite provides a method to get the last primary key inserted by using sqlite3_last_insert_rowid
            coffeeID = sqlite3_last_insert_rowid(database);

        //Reset the add statement.
        sqlite3_reset(addStmt);
    }
    addStmt = nil;

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:56:47.900

我认为您可以使用调度队列

```
 dispatch_queue_t concurrentQueue =  dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(concurrentQueue, ^{
      //this will call when you inserting in bg

        dispatch_async(dispatch_get_main_queue(), ^{
           //this will call when inserting  is finished
        });
    }); 
```

# ruby-on-rails - 在rails中的填充文件中写入硬编码数据

> ID：11947033
> 
> 赞同：0
> 
> 时间：2012-08-14T06:41:52.023
> 
> 标签：ruby-on-rails, rake, rake-task

在我的 lib/tasks/populate.rake 文件中，我必须以正确的 html 格式编写一些硬编码数据并正确对齐。如何将其写入填充文件？有没有办法在编写后解析 HTML 标签？对于随机数据，我知道有 populator gem。但我想要一些硬编码的数据。请一些帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:43:14.967

您需要使用[Ruby heredoc](http://rubyquicktips.com/post/4438542511/heredoc-and-indent)语法来对齐您的代码

```
text = <<END
<p>Whatever you want to write in whatever form</p>
               line with spaces in front
        Another indented line
Account No. : XYZ
END

text = text.html_safe 
```

结束前不应有空格`END`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:01:53.543

首先在 html 文件中写入 html 数据，然后对齐并验证文件。如果所有内容都已写入，则将文件中的 html 数据复制到`lib/tasks/populate.rake`文件中。有许多在线工具可以进行验证。[http://validator.w3.org/](http://validator.w3.org/)

# c# - 如何为与 Mvc 中的控制器匹配的特定 URL 添加查询字符串？

> ID：11947035
> 
> 赞同：2
> 
> 时间：2012-08-14T06:42:01.463
> 
> 标签：c#, asp.net-mvc-3

我为特定控制器构建了一个 url：

```
 var f = new System.UriBuilder( Request.Url.AbsoluteUri ) {
           Path = Url.Action( "Get", "People")
        }; 
```

它返回

```
http://localhost/myApp/People/Get 
```

好的。

将查询字符串添加到该 url 的最佳方法是什么？

方法

```
http://localhost/myApp/People/Get?id=7 
```

我要处理：

```
string path = string.Concat(f.ToString(), "?id=3"); 
```

但我想知道是否有其他方式（比我上面提供的更好）将查询字符串附加到该 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:45:16.930

```
Url.Action( "Get", "People", new { id = 7 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:56:24.647

也许尝试这里显示的扩展方法之一：[如何在 C# 中为 URL 构建查询字符串？](https://stackoverflow.com/questions/829080/how-to-build-a-query-string-for-a-url-in-c)

这肯定会导致更多的代码，但我猜想更灵活。

# java - 什么是超级罐子？

> ID：11947037
> 
> 赞同：333
> 
> 时间：2012-08-14T06:42:04.960
> 
> 标签：java, maven, packaging, uberjar, fatjar

我正在阅读 Maven 文档并遇到了这个名字`uber-jar`。

什么`uber-jar`意思，它的特点/优势是什么？

* * *

## 回答 #1

> 赞同：453
> 
> 时间：2012-08-14T06:46:15.403

`Über`是`above`或的德语单词`over`（它实际上与英语同源`over`）。

因此，在这种情况下，一个 uber-jar 是一个“over-jar”，比一个简单的 JAR ^((a))高一级，定义为在一个 JAR 文件中包含您的包*及其所有依赖项。*这个名字可以被认为是和ultrageek、superman、hyperspace、metadata同出自同一个stable，都具有“超凡脱俗”的相似含义。

优点是您可以分发您的 uber-jar，而根本不关心是否在目的地安装了依赖项，因为您的 uber-jar 实际上*没有*依赖项。

uber-jar 中你自己的东西的所有依赖项*也在*那个 uber-jar 中。这些依赖项的所有依赖项也是如此。等等。

* * *

^((a))我可能*不必*向 Java 开发人员解释 JAR 是什么，但为了完整起见，我将包含它。它是一个 Java 归档文件，基本上是一个文件，通常包含许多 Java 类文件以及相关的元数据和资源。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2016-08-19T03:27:14.223

**ubar jar**也称为**fat jar**即**具有依赖项的 jar。**
构建 uber jar 的常用方法有以下三种：

1.  **无阴影：**解压缩所有 JAR 文件，然后将它们重新打包到一个 JAR 中。使用 Java 的默认类加载器。工具[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)
2.  **阴影：**与无阴影相同，但重命名（即“阴影”）所有依赖项的所有**包**。使用 Java 的默认类加载器。避免一些（不是全部）依赖版本冲突。工具[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)
3.  **JAR 的 JAR：**最终的 JAR 文件包含嵌入其中的其他 JAR 文件。避免依赖版本冲突。所有资源文件都被保留。工具：[Eclipse JAR 文件导出器](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-export-jar.htm)

[更多](http://imagej.net/Uber-JAR)

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-08-14T14:12:15.867

Paxdiablo 的定义非常好。

另外，如果您真的想分发软件并且不希望客户自己下载依赖项，请考虑交付一个 uber-jar 有时非常有用。作为一个缺点，如果他们自己的政策不允许使用某些库，或者他们必须绑定一些额外的组件（slf4j、系统兼容库、arch specialiez 库……），这可能会增加他们的困难.

你可以这样做：

*   基本上使用[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/ "maven-程序集插件")
*   [使用maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/ "maven-shade-plugin")更进一步

一个更干净的解决方案是单独提供他们的库；maven-shade-plugin 为此预先配置了描述符。这并不复杂（使用 maven 及其插件）。

最后，一个非常好的解决方案是使用 OSGI Bundle。有很多很好的教程:)

如需进一步配置，请阅读这些主题：

*   [您应该在客户端 jar 中提供依赖库吗？](https://stackoverflow.com/questions/1746336/should-you-provide-dependent-libraries-in-client-jar)
*   [构建和部署 Clojure 应用程序的最佳实践：好的教程？](https://stackoverflow.com/questions/2391711/best-practices-in-building-and-deploying-clojure-applications-good-tutorials)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-05-18T17:11:03.797

## 不同的名称只是打包 Java 应用程序的方式。

**Skinny** – 仅包含您在代码编辑器中真正输入的位，没有其他内容。

**Thin** – 包含上述所有内容以及应用程序对您的应用程序的直接依赖项（数据库驱动程序、实用程序库等）。

**Hollow** – Thin 的倒数 – 仅包含运行您的应用程序所需的位，但不包含应用程序本身。基本上是一个预打包的“应用程序服务器”，您可以稍后将应用程序部署到该服务器，其风格与传统 Java EE 应用程序服务器相同，但有重要区别。

**Fat/Uber** *–*包含你自己写的部分加上你的应用程序的直接依赖项加上“独立”运行你的应用程序所需的*部分。*

资料来源：[Dzone 文章](https://dzone.com/articles/the-skinny-on-fat-thin-hollow-and-uber)

[![JAR 类型的可视化表示](../Images/297e982fcbf1724bbed2c857ea088fb9.png)](https://i.stack.imgur.com/9iS6A.png)

转自：[https ://stackoverflow.com/a/57592130/9470346](https://stackoverflow.com/a/57592130/9470346)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-03T12:46:31.327

一个独立的、可执行的 Java 档案。在 WildFly Swarm uberjars 的情况下，它是一个包含您的应用程序的单个 .jar 文件、支持它所需的 WildFly 部分、一个内部 Maven 依赖项存储库，以及一个用于引导它的 shim。[看到这个](https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/content/getting-started/concepts.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-28T10:21:33.887

根据 uber-JAR Documentation Approaches： 构建 uber-JAR 的常用方法有以下三种：

**Unshaded**解压所有 JAR 文件，然后将它们重新打包成一个 JAR。工具：Maven 组装插件、Classworlds Uberjar

**阴影**与无阴影相同，但重命名（即“阴影”）所有依赖项的所有包。工具：Maven Shade 插件

**JAR 的 JAR**最终的 JAR 文件包含嵌入其中的其他 JAR 文件。工具：Eclipse JAR 文件导出器，One-JAR。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-22T18:49:05.923

对于使用 SpringBoot 的 Java 开发人员，**ÜBER/FAT JAR**通常*是*maven的最终结果`package phase`（或者`build task`如果您使用`gradle`）。

在 Fat JAR 中可以找到一个`META-INF`目录，该`MANIFEST.MF`文件包含有关 Main 类的所有信息。更重要的是，在同一级别的`META-INF`目录中，您可以找到该`BOOT-INF`目录所在的目录，其中包含作为应用程序依赖项的`lib`所有文件。`.jar`

# google-app-engine - Google App Engine - 收到的电子邮件中的希伯来语字符出现乱码

> ID：11947039
> 
> 赞同：1
> 
> 时间：2012-08-14T06:42:10.030
> 
> 标签：google-app-engine, servlets, jakarta-mail

我创建了一个 GAE http servlet，它应该处理和调节传入的电子邮件。

当我收到包含希伯来语文本的传入消息时，它会出现乱码。

例如，当以下代码将收到一封带有希伯来语文本的邮件时：

```
public void doPost( HttpServletRequest req, HttpServletResponse resp ) throws IOException {

       Message message = new MimeMessage( session, req.getInputStream() );
       System.out.print( message.getSubject() ); 
```

}

将打印类似：××××§× 或一组问号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:14:54.740

# 1

日志默认不是ISO-8859-1吗？

我用这个...

```
<system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties" />
    <property name="file.encoding" value="UTF-8" />
    property name="DEFAULT_ENCODING" value="UTF-8" />
</system-properties> 
```

[系统属性和环境变量](https://developers.google.com/appengine/docs/java/config/appconfig#System_Properties_and_Environment_Variables)

# 2

您不需要以正确的编码读取它吗？例如，我收到不同编码的日本邮件，要阅读它，我必须使用：

```
 InputStreamReader isr;

            if (message.getContentType().contains("ISO-2022-JP")) {
                        isr = new InputStreamReader(message.getInputStream(), "ISO-2022-JP");
            } else {
                        isr = new InputStreamReader(message.getInputStream(), "UTF-8");
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:38:05.133

您必须区分字符是否错误，或者您是否只是**看到**错误的字符。message.getSubject() 返回的 String 对象将包含 Unicode 字符。您可以检查每个 Unicode 字符的数值，看看它是否是正确的字符。

当您打印这些字符时，会发生各种其他字符处理。这些字符可能被写为 UTF-8 或其他一些编码。用于从日志文件中读取这些字符并将它们显示在屏幕上的软件必须使用与写入字符时相同的字符编码。各种不匹配都是可能的。

# ruby-on-rails - 如何使用活动模型为 date_select 下拉菜单定义虚拟属性

> ID：11947040
> 
> 赞同：3
> 
> 时间：2012-08-14T06:42:18.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activemodel

我在我的应用程序中使用活动模型进行支付流程，但我无法添加信用卡到期日期字段，因为它会引发如下错误 **未定义方法`card_expiration_date(3i)='**。

在我的模型中：

```
class CartServer

  include ActiveModel::Validation

  include ActiveModel::Conversion

  extend ActiveModel::Naming

  attr_accessor :card_expiration_date 
```

鉴于：

```
f.date_select(
  :card_expiration_date,
  :add_month_numbers => false,
  :discard_day => true,
  :start_year => (Date.today.year-10),
  :end_year => (Date.today.year+10),
  :order=>[ :month,:year]
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-06-10T16:31:43.527

这样的事情将在 Rails 6 中工作：

```
class CartServer
  include ActiveModel::Model
  include ActiveModel::Attributes
  include ActiveRecord::AttributeAssignment

  attribute :card_expiration_date, :date
end 
```

这里有两件事很重要：

*   声明`attribute`with 类型`:date`。在 ActiveRecord 模型中，此类型信息来自数据库模式，但由于我们使用的是 ActiveModel，我们需要显式声明它。

*   包括`ActiveRecord::AttributeAssignment`获得对多部分参数分配的支持。表单中的参数将如下所示：

    ```
    {
      "card_expiration_date(1i)" => "2020",
      "card_expiration_date(2i)" => "12",
      "card_expiration_date(3i)" => "31",
    } 
    ```

    `ActiveModel::AttributeAssignment`我们从中获取的模块`ActiveModel::Model`不知道如何将其转换为日期，因此我们需要引入功能更齐全的`ActiveRecord`版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-27T09:48:38.820

如何通过 Rails date_select 设置 attr_accessor 日期并让 Rails 自动处理多属性：[https ://gist.github.com/paulsturgess/5500858](https://gist.github.com/paulsturgess/5500858)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-04-28T03:33:54.077

属性：card_expiration_date，Type::Date.new

# c# - 如何修改此方法以仅向非注册用户发送确认电子邮件？

> ID：11947047
> 
> 赞同：0
> 
> 时间：2012-08-14T06:42:42.680
> 
> 标签：c#, asp.net, sql-server-2008-r2

我正在努力解决一个我不知道如何解决的奇怪问题。我正在开发一个基于 Web 的小型事件管理系统。当用户单击将显示在 ModalPopUpExtender 控件中的注册按钮时，系统将执行以下操作：它将检查用户是否在数据库中。如果没有，它将从 Active Directory 中提取他的信息。然后，系统应检查用户是否已在此事件中注册。如果没有，他将在该事件中注册，并将向他发送一封确认电子邮件。如果是，将显示一条消息“您已经预订了此活动”。

我现在的问题是：系统会发送一封确认电子邮件，无论用户是否已预订。**那么我应该怎么做才能修改我的代码，以便在他没有预订的唯一情况下向用户发送确认电子邮件？**

**C# 代码**（对不起，代码冗长，但我把它放出来是为了澄清）：

```
protected void btnSendConfirmationEmail_Click(object sender, EventArgs e)
    {

        checkUserID(userNetworkID);

        SmtpClient sc = new SmtpClient("MailServer");
        StringBuilder sb = new StringBuilder();
        MailMessage msg = new MailMessage();

        //Variables for retrieving the Booking Information
        string title = lblTitle.Text;
        string description = lblDescription.Text;
        string location = lblLocation.Text;
        string startDateTime = lblStartDateTime.Text;
        string endDateTime = lblEndDateTime.Text;

        //Message Information
        string toAddress = userNetworkID + "@mailServer.com";
        string fromAddress = "test@mailServer.com";
        string mailSubject = "Registration Notification";
        string messageBody = @".........................";

        try
        {
            msg.To.Add(toAddress);
            msg.From = new MailAddress(fromAddress, "Reg. Test System");
            msg.Subject = mailSubject;
            msg.Body = messageBody;
            msg.IsBodyHtml = true;

            sc.Send(msg);
        }

        catch (Exception ex)
        {
            throw ex;
            // something bad happened
            //Response.Write("Something bad happened!");

        }

        finally
        {

            if (msg != null)
            {
                msg.Dispose();
            }

        }
    }

    protected void checkUserID(string userID)
    {

        int eventID = Convert.ToInt32(HiddenField1.Value);

        string NetworkID = userID;
        string Name = Service.GetName;
        string BadgeNo = Service.GetBadgeNo;
        string DepartmentCode = Service.GetDeptCode;

        string connString = "Data Source=localhost;Initial Catalog=TestSysDB;Integrated Security=True;";

        //if the user is not in the system database, add him
        if (Security.isExisted(NetworkID) == false)
        {
            //string connString = "Data Source=localhost;Initial Catalog=TestSysDB;Integrated Security=True;";
            string insertCommand = "INSERT INTO Users (NetworkID, Name, BadgeNo, DepartmentCode) values (@NetworkID, @Name, @BadgeNo, @DepartmentCode)";

            using(SqlConnection conn = new SqlConnection(connString))
            {
                //Open DB Connection
                conn.Open();
                using(SqlCommand cmd = new SqlCommand(insertCommand, conn))
                {
                    cmd.Parameters.Clear();
                    cmd.Parameters.AddWithValue("@NetworkID", NetworkID);
                    cmd.Parameters.AddWithValue("@Name", Name);
                    cmd.Parameters.AddWithValue("@BadgeNo", BadgeNo);
                    cmd.Parameters.AddWithValue("@DepartmentCode", DepartmentCode);
                    cmd.ExecuteNonQuery();
                }
                conn.Close();
            }
        }

        string insertBooking = "INSERT INTO BookingDetails (EventID, NetworkID) values (@EventID, @NetworkID)";
        string selectCommand = "SELECT count(*) as UserBookings FROM BookingDetails WHERE NetworkID = NetworkID AND EventID = @EventID";
        using (SqlConnection conn = new SqlConnection(connString))
        {
            //Open DB Connection
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(selectCommand, conn))
            {
                cmd.Parameters.AddWithValue("@EventID", eventID);
                cmd.Parameters.AddWithValue("@NetworkID", NetworkID);
                if ((int)cmd.ExecuteScalar() == 0)
                {
                    SqlCommand cmd2 = new SqlCommand(insertBooking, conn);
                    cmd2.Parameters.Clear();
                    cmd2.Parameters.AddWithValue("@EventID", eventID);
                    cmd2.Parameters.AddWithValue("@NetworkID", NetworkID);
                    cmd2.ExecuteNonQuery();
                }
                else
                {
                    errorSpan.InnerText = "You already have a booking in this event";
                }
            }
            //Close the connection
            conn.Close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:49:35.330

像这样的东西

创建一个新方法`UserHasBooking`

```
private bool UserHasBooking(int userId, int eventID)
{
    bool result = false;

string connString = "Data Source=localhost\\sqlexpress;Initial Catalog=RegistrationSysDB;Integrated Security=True;";
string selectCommand = "SELECT count(*) as UserBookingsCount FROM BookingDetails WHERE NetworkID = NetworkID AND EventID = @EventID";
using (SqlConnection conn = new SqlConnection(connString))
{
    //Open DB Connection
    conn.Open();
    using (SqlCommand cmd = new SqlCommand(selectCommand, conn))
    {
        cmd.Parameters.AddWithValue("@EventID", eventID);
        cmd.Parameters.AddWithValue("@NetworkID", userId);
        if ((int)cmd.ExecuteScalar() > 0)
        {
            result = true;
        }
    }
    //Close the connection
    conn.Close();
}

    return result;
}

protected void btnSendConfirmationEmail_Click(object sender, EventArgs e)
    {
        int eventID = Convert.ToInt32(HiddenField1.Value);

        if(!UserHasBooking(userNetworkID, eventID))
        {

        checkUserID(userNetworkID);

        SmtpClient sc = new SmtpClient("MAIL.Aramco.com");
        StringBuilder sb = new StringBuilder();
        MailMessage msg = new MailMessage();

        //Variables for retrieving the Booking Information
        string title = lblTitle.Text;
        string description = lblDescription.Text;
        string location = lblLocation.Text;
        string startDateTime = lblStartDateTime.Text;
        string endDateTime = lblEndDateTime.Text;

        //Message Information
        string toAddress = userNetworkID + "@aramco.com";
        string fromAddress = "erms@aramco.com";
        string mailSubject = "Registration Notification";
        string messageBody = @"Greetings, <br /><br />
                               Your booking information is as following: <br /><br />
                               <b><u>Event Details</u></b> <br /><br />
                               <b>Title: </b>" + title +
                               "<br /> <b>Description: </b>" + description +
                               "<br /> <b>Location: </b>" + location +
                               "<br /> <b>Start Date & Time: </b>" + startDateTime +
                               "<br /> <b>End Date & Time: </b>" + endDateTime +
                               @"<br /><br /><br /><br /> 
                                 This email was generated using the <a href='http://pmv/PM_Registration_System/Default.aspx'>Events Registration Management System (ERMS) </a>. 
                                 Please do not reply to this email.";

        try
        {
            msg.To.Add(toAddress);
            msg.From = new MailAddress(fromAddress, "Events Registration Management System");
            msg.Subject = mailSubject;
            msg.Body = messageBody;
            msg.IsBodyHtml = true;

            sc.Send(msg);
        }

        catch (Exception ex)
        {
            throw ex;
            // something bad happened
            //Response.Write("Something bad happened!");

        }

        finally
        {

            if (msg != null)
            {
                msg.Dispose();
            }

        }

       }

    } 
```

# flash - 气球动画

> ID：11947060
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:44:10.730
> 
> 标签：flash, flash-cs5, flash-cs4

我不是动作脚本开发人员，也不是 Flash 设计师，我只想制作一个带有气球的小动画，我想制作三个按钮，以及固定的气球形状，在按钮点击事件时会膨胀和放气。单击一次，气球会充气一半，单击另一个按钮会完全充气，最后一次单击按钮会放气。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:14:49.467

首先，您应该制作一个像气球一样的椭圆形 MovieClip。并参考以下骨架代码。单击舞台，此代码将气球充气切换为通货紧缩，反之亦然。

这是源代码链接：[Ballon_Sample](http://www.datafilehost.com/download-5bcda1cc.html)

```
import flash.events.MouseEvent;
import flash.events.Event;

var isToggle:Boolean;
var ballonState:String = "default";
stage.addEventListener(MouseEvent.CLICK, onClick);
stage.addEventListener(Event.ENTER_FRAME, onEnter);
function onClick(e:MouseEvent):void
{
    if(!isToggle)
    {
        ballonState = "inflate";
    }
    else
    {
        ballonState = "defalte";
    }

    isToggle = !isToggle;
}

function onEnter(e:Event):void
{
    if(ballonState == "inflate")
    {
        //mc_ballon is Ellipse Shape MovieClip like Ballon Shape.
        mc_ballon.scaleX += 0.01;
        mc_ballon.scaleY += 0.01;
    }
    else if(ballonState == "defalte")
    {
        mc_ballon.scaleX -= 0.01;
        mc_ballon.scaleY -= 0.01;
    }
} 
```

# javascript - 输入上的 keyup 事件在页面加载时触发

> ID：11947061
> 
> 赞同：1
> 
> 时间：2012-08-14T06:44:11.687
> 
> 标签：javascript, jquery, kendo-ui

我有

```
<input type="text" name="search" id="search" placeholder="Enter search text..." />
<input type="submit" id="btnSearch" name="find" value="" /> 
```

和

```
$(document).ready(function () {    

$("#btnSearch").click(function () {
    doTheSearch();
});

$("#search").keyup(doTheSearch());

}); 
```

和

```
function doTheSearch() {
alert("");
var grid = $("#Grid").data("kendoGrid");
grid.dataSource.read();
}; 
```

我正在使用带有 mvc 包装器的 KendoUI 网格，不确定是否相关但这里也是该代码

```
@(Html.Kendo().Grid<E4.Administrasjon.Models.viewModels.vmUser>()
.Name("Grid")
.Columns(columns =>
{
    columns.Bound(p => p.BrukerID);
    columns.Bound(p => p.navn);

})
.DataSource(dataSource => dataSource
    .Ajax() // Specify that the data source is of ajax type
    .ServerOperation(false)
    .Read(read => read.Action("Users_Read", "User")
        .Data("searchData")
    )
    .PageSize(20)
)
.Pageable()    
) 
```

问题是当页面加载时函数 doTheSearch() 被触发。这应该是因为我尝试仅在用户输入文本或按下按钮时触发代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:47:33.947

试试这个：

```
$("#btnSearch").on('click', function () {
    doTheSearch();
});

$("#search").on('keyup', doTheSearch);

function doTheSearch() {
alert("x");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:48:05.213

您正在调用该函数而不是将其绑定到事件，这是：

```
$("#search").keyup(doTheSearch()); 
```

应该 ：

```
$("#search").keyup(doTheSearch); 
```

# asp.net - 在 asp.net mvc 应用程序中从自定义路由进行 301 重定向到站点主页时出现问题

> ID：11947062
> 
> 赞同：0
> 
> 时间：2012-08-14T06:44:12.617
> 
> 标签：asp.net, asp.net-mvc, url-rewriting, asp.net-mvc-routing, url-routing

[我已经按照本文](http://www.mikesdotnetting.com/Article/108/Handling-Legacy-URLs-with-ASP.NET-MVC)所述实现了 301 永久重定向，

一切正常，除了在一种情况下重定向发生

```
www.sitename.com/www.sitename.com. 
```

似乎我尝试重定向的地方被附加到站点名称。我希望在我尝试重定向到控制器操作时发生这种情况，而不是在我重定向到站点主页时发生。

例如，当我这样做时，重定向发生在

```
newUrl = "Blog/TagPosts/" + {tag}
response.RedirectLocation = newUrl;
response.End(); 
```

`www.sitename.com/blog/tagposts`.这是我需要的，但是当我重定向到

`www.sitename.com`这样做

```
response.Redirect(www.sitename.com);
response.End(); 
```

url被重定向到`www.sitename.com/www.sitename.com`，如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:54:12.113

Response.Redirectlocation 是在 HTTP Location 标头中传输到客户端的绝对 URI。尝试使用完全限定的位置**http://www.sitename.com**进行重定向。

# css - WP CSS重叠菜单子菜单无法摆脱背景图片

> ID：11947069
> 
> 赞同：0
> 
> 时间：2012-08-14T06:44:35.580
> 
> 标签：css, drop-down-menu, background-image, submenu

我按照这个名为“重叠选项卡”的教程进行了 WordPress 构建。这真的很好，而且效果很好。 [http://www.codealamode.net/overlapping-tabs](http://www.codealamode.net/overlapping-tabs)

但是，与教程不同的是，我现在添加了下拉子菜单。它们也工作得很好，除了由于某种原因主要的父背景选项卡被带到子菜单中，即使在 css 中没有重复。

我一直在寻找演示并尝试在 css 中切换东西，但我把事情弄得一团糟。

这是CSS。我不希望子菜单像主父菜单那样具有背景图像。CSS 很难让标签具有结束符和背景图像，它们的宽度“扩展”以适应链接名称的长度。

代码：（这还不是全部，但足以显示背景图像的位置并显示子菜单）

```
.menu ul {
list-style: none;
position: relative;
float: right;
}

.menu ul li {
float: left;
background: url(../wp-content/uploads/2012/08/inactive_right.png) no-repeat right;
padding: 11px 54px 12px 0;
}

.menu ul li:hover > ul {
display: block;
}

.menu ul li a:hover {
color: red;
}

.menu ul ul {
display: none;
position: absolute;
z-index:999; 
background-color: white;
white-space: nowrap;
}

.menu ul li:last-child ul {
right:0;
}

.menu ul ul li {
clear: both;
padding: 5px;
}

.menu ul ul li a:hover {
color: blue;
} 
```

问题的图像 - 看看子菜单中的端盖如何？我已经尝试了所有方法，但不确定为什么它与 Ul li 相关联时会显示在那里……而不是 ul ul li。

[菜单问题 http://glassdoctordenvermetro.com/wp-content/themes/GDDenverTheme/images/menu_problem.jpg](http://glassdoctordenvermetro.com/wp-content/themes/GDDenverTheme/images/menu_problem.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:24:17.653

您正在为 .menu (.menu ul li) 中的所有列表项设置背景。由于您的子菜单使用列表项并且位于 .menu 内，因此也应用了该样式。使用直接子选择器仅捕获第一级。

```
.menu > ul > li {
    ...
} 
```

# grails - 对于 GORM Map 类型，为 GORM 创建的表添加索引

> ID：11947073
> 
> 赞同：0
> 
> 时间：2012-08-14T06:44:55.883
> 
> 标签：grails, grails-orm, grails-domain-class

GORM 有以下示例：

```
class Author {
    Map books // map of ISBN:book names
} 
```

当 GORM 创建表时，它会创建一个包含三列的表：author_books、author_books_idx 和 author_books_elt

问题是这三列都没有索引，并且表上没有索引。它适用于 MySQL，或者可能是 sql server。但在 SQL Azure 中，它不能正常工作，因为 SQL Azure 中的所有表都应该有一个集群索引，这使得我无法向这样的表插入行。

如何解决此类问题？我认为在现有列上添加集群索引或添加新的私钥列应该没问题，但我不知道如何强制 GORM 在其上创建索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:10:26.517

你可以这样做：

```
import groovy.sql.Sql
import javax.sql.DataSource

class BootStrap {
    DataSource dataSource

    def init = { servletContext ->
        if (!Author.count()) {
            createIndexes();
        }
    }

    def destroy = {
    }

    private void createIndexes() {
        Sql sql = new Sql(dataSource)
        sql.execute("ALTER TABLE author [code for adding an index];")
    }

} 
```

这个文件，'BootStrap.groovy' 位于 grails 应用程序的目录/grails-app/conf 中。此代码检查表作者是否为空（例如第一次创建），如果是，您可以使用 groovy.sql.Sql 实例通过 SQL 查询更改表。这样您就可以添加索引添加列等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:30:57.937

实现此目的的一种方法是在 Bootstrap 中创建索引。一个记录对数据库模式所做的事情的日志表在我参与的一个项目中被证明是有用的（模式不断变化）。

# python - 如何将现有的移动网站包装到本机应用程序

> ID：11947074
> 
> 赞同：0
> 
> 时间：2012-08-14T06:44:59.467
> 
> 标签：python, mobile, cordova

我们的团队目前使用在浏览器上运行的 python 服务器语言构建了一个移动站点。现在我们想扩展一些功能，比如日历同步和推送通知，所以我们计划用 phonegap 框架包装我们现有的移动网站。

我的问题是该解决方案是否可行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:01:53.393

您可以使用[PhoneGap](http://phonegap.com/)以 Html+CSS+JavaScript 编写应用程序，但请注意，该应用程序将是一个使用来自服务器（JSON、XML 等）的数据的客户端。换句话说，服务器不会构建布局，而是将信息提供给客户端。总之，使用 PhoneGap 之类的工具，您将能够利用已有的设计，尽管原生应用程序与网站是完全不同的概念，而不仅仅是包装器。

# google-apps-script - getRoot Google Apps 脚本的问题

> ID：11947075
> 
> 赞同：0
> 
> 时间：2012-08-14T06:45:01.103
> 
> 标签：google-apps-script, google-drive-api

我在将脚本部署为 Web 应用程序时遇到问题。这是我想要完成的极其简化的版本。

```
function doGet (e) {
   var userRoot = DocsList.getRootFolder(); 
   var myTftUnits = DocsList.getFolderById('folderId');
   myTftUnits.addToFolder(userRoot);          
} 
```

我已将权限设置为以用户身份运行，并且我的域中的每个人都可以使用它。我基本上希望该功能将共享文件夹写入用户的根文件夹。但是，我不断收到错误消息：

> 您无权执行该操作。

但是，文件是共享的（作为编辑器），但我仍然得到错误。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:33:33.090

用户可能无法与其他用户共享其整个驱动器。相反，您需要共享特定的文件或文件夹。

# c# - 使用 C# Metro App 从 SQL 检索数据

> ID：11947078
> 
> 赞同：0
> 
> 时间：2012-08-14T06:45:13.127
> 
> 标签：c#, sql, windows-8, microsoft-metro

我是使用 C# 为 Win8 编写 Metro App 的新手。我已经熟悉 C#，但是当我尝试使用 C# 代码连接和检索 SQL 数据库中的信息时，它不起作用。

主要问题是我无法引用“使用 System.Data / .SqlClient”，因此我无法使用 SqlConnection / DataReader。我找不到解决方法。

编辑：经过进一步研究，我发现 Windows 8 应用程序不支持基于此线程访问本地服务（因此无法访问本地 SQL）：http: [//social.msdn.microsoft.com/Forums/en-US/ toolsforwinapps/线程/c1c6aa70-5be9-496c-9d2d-a5b0fc0890a9](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/c1c6aa70-5be9-496c-9d2d-a5b0fc0890a9)

有经验的人可以帮助我指出 SQL / Windows 8 App 集成的正确方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:09:39.347

据我所知，Metro 应用程序无法使用 System.Data。如果您需要存储/检索数据，那么您需要将其存储到文件（隔离存储）或通过服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:39:30.873

您应该将 sqllite 用于 WinRT，如此处所述

[http://timheuer.com/blog/](http://timheuer.com/blog/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T07:01:50.720

您应该实现应用程序服务器，它将公开所有必要的方法来访问数据。在这种情况下，Metro 应用程序将使用这些服务方法从数据库中获取数据。

# javascript - 在 EXTJS 中启用多选的网格面临问题

> ID：11947079
> 
> 赞同：0
> 
> 时间：2012-08-14T06:45:16.430
> 
> 标签：javascript, extjs, extjs3

我有一个带有复选框选择模型的网格。在这里我遇到了一个问题，当我取消选择任何选定的记录（仍然选择一些记录）时，删除按钮将被禁用。选择任何记录时，我需要启用删除按钮。这是我使用的代码，

```
 function setDetail(action, r){
        switch (action) {
            case 'update':                                                  
                Ext.getCmp('delete').enable();
            break;
            default:
                Ext.getCmp('delete').disable();
            break;
        }
    };

    var checkboxselection = new Ext.grid.CheckboxSelectionModel({
      singleSelect: false,
      listeners: {
        'selectionchange' : function(sm) {

        },
        rowselect       : function(sm, i, r) {
            selectedRecord.idProperty = r.get('pos');
            setDetail('update', r);
        },

        rowdeselect     : function () {
            setDetail();
        }

      }
    }); 
```

提前谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:23:57.993

```
 rowdeselect     : function () {
        setDetail();
    } 
```

每当您取消选择一个复选框时，此部分都会禁用您的删除按钮。代码工作正常。你的逻辑在这里是错误的。您可以通过维护一个计数器来做到这一点，该计数器会根据每个复选框的选择而变化。（如果选中则为 +1。如果未选中则为 -1）并且在基于计数器的 setDetail 方法中，您可以启用或禁用删除按钮。

# android - 不能同时启动两个模拟器

> ID：11947082
> 
> 赞同：0
> 
> 时间：2012-08-14T06:45:25.243
> 
> 标签：android, eclipse, android-emulator

我在使用 Android 模拟器时遇到问题。

我有两个avd：

*   安卓2：

![在此处输入图像描述](../Images/24b956e0b4b75702033e01153dd73f4c.png)

*   安卓4

![在此处输入图像描述](../Images/a0670499c89f053cb55ee792dfdf3c13.png)

1.  现在，我想 Android4 正在运行。
2.  当我启动 Android2 时，显示“正在启动 Android Emulator”对话框然后什么也没有发生（这意味着 Android2 没有运行）。
3.  如果我关闭 Android4 并再次运行它，它不会运行，但我之前启动的 Android2 会运行它。

任何人都可以帮助解决这个问题吗？

如果这个问题不清楚，请给我评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:54:39.980

在 AVD MANAGER 属性中将 GPU Emulation 设置为“YES”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:24:39.900

一旦启动，首先在android2 avd中运行你的项目。然后在eclipse中右键单击->properties->android->将项目构建目标更改为4.0 => apply->ok现在再次运行你的项目它将definetly开始你的另一个 avd [android4]..

希望这对您有所帮助。:-)

# iphone - splitview 委托方法没有被调用

> ID：11947083
> 
> 赞同：2
> 
> 时间：2012-08-14T06:45:31.490
> 
> 标签：iphone, ipad

大家好，我在我的 ipad 应用程序中使用 splitviewcontroller，在其中选择 tableview 中的每一行将显示新的 detailviewcontroller 并且在我的一个 detailview 中我再次推送一个新的 detailview 控制器（detailview2）并且在那个类（detailview2）中我正在定义一个协议和设置它并且当按下后退按钮时协议方法被触发并且我的rootview（tableview）正在实现该协议但是即使在设置委托之后方法也没有被调用。如果我在detailview1中定义了相同的协议并且rootview正在实现那么协议方法在下面没有被调用我发布代码。我不明白为什么会这样。任何建议都会有很大帮助。Detailview2.h

```
 @protocol ModalControllerDelegate;
 @interface ViewController : UIViewController<UIPopoverControllerDelegate,    UISplitViewControllerDelegate>{
    }
@property (nonatomic, assign) id <ModalControllerDelegate> delegate;
 @end
@protocol ModalControllerDelegate <NSObject>
- (void)modalControllerDidFinish:(ViewController*)modalController;
@end 
```

Detailview2.m

```
-(void)back {
// Tell the controller to go back
NSLog(@"ghhskfh");
[delegate modalControllerDidFinish:self];
[self.navigationController popViewControllerAnimated:YES];
} 
```

根视图.h

```
@interface RootViewController : UITableViewController<UITableViewDelegate, UITableViewDataSource,ModalDelegate,ModalControllerDelegate> {
FirstDetailViewController *firstDetailViewController;
SecondDetailViewController *secondDetailViewController;
        MultipleDetailViewsWithNavigatorAppDelegate *appDelegate;
}
@end 
```

根视图.m

```
- (void)viewDidLoad 
{
[super viewDidLoad];
self.title=@"RootView";
self.viewcontroller=[[ViewController alloc]init];
 self.viewcontroller.delegate=self;
//[self.tableView setDelegate:self];
//[self.tableView setDataSource:self];
  }
#pragma mark -
#pragma mark ModalController delegate
- (void)modalControllerDidFinish:(ViewController *)modalController {
NSLog(@"modalControllerDidFinish");
    } 
```

myappdelegate.m（如有必要）

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    // Override point for customization after app launch.
self.splitViewController =[[UISplitViewController alloc]init];
self.rootViewController=[[RootViewController alloc]init];
self.detailViewController=[[[FirstDetailViewController alloc]init] autorelease];
UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:rootViewController];
UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:detailViewController];
self.splitViewController.viewControllers=[NSArray arrayWithObjects:rootNav,detailNav,nil];
self.splitViewController.delegate=self.detailViewController;
// Add the split view controller's view to the window and display.
[window addSubview:self.splitViewController.view];
[window makeKeyAndVisible];
return YES;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:40:45.220

在您的 App Delegate Method 中实施以下代码可能会解决您的问题。

**请尝试下面的代码，我认为它可以调用代表。**

**已编辑**

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    // Override point for customization after app launch.
            self.splitViewController =[[UISplitViewController alloc]init];
            self.rootViewController=[[RootViewController alloc]init];
            self.detailViewController=[[[FirstDetailViewController alloc]init] autorelease];
            UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:rootViewController];
            UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:detailViewController];
            self.splitViewController.viewControllers=[NSArray arrayWithObjects:rootNav,detailNav,nil];
            self.splitViewController.delegate=self.detailViewController;
  //Changes Made here 
            self.rootViewController.firstDetailViewController=self.detailViewController;   
 // Add the split view controller's view to the window and display.
            [window addSubview:self.splitViewController.view];
            [window makeKeyAndVisible];
            return YES;
  } 
```

# java - 为什么 Java 类的第一个字母要大写？

> ID：11947084
> 
> 赞同：28
> 
> 时间：2012-08-14T06:45:34.597
> 
> 标签：java, naming-conventions, uppercase, lowercase

为什么 Java 类的第一个字母要大写？不能运行包含小写类名的程序吗？如果可能，有什么区别？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-08-14T06:46:44.283

这是一种编码约定，被大多数 Java 程序采用。当您习惯于给定的标准时，它使阅读代码更容易。

不，您不必遵循它，但不这样做您不会结交任何朋友；）

> 为什么/如何首先建立这个公约？

该约定由 Sun/Java 语言的创建者制定。

它的建立可能是为了在广泛而多样化的受众中改进语言的推广，降低新开发人员的入门级要求（如果您不需要在其他人的“想法”之间不断切换，那么学习会更容易）代码看起来像）并且通常尝试在社区内保持代码清洁。

你可以问“为什么公司有编码员的风格指南？” 并且原因通常是相同的

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-14T06:52:32.630

使用*命名约定*可以让您在阅读代码时更轻松地**快速理解代码。**

下面是两行简单的代码：

```
foo = FooFactory.getFooInstance();
foo.doSomethingFoosDo(); 
```

如果我们知道作者遵循命名约定，我们很快就会知道几件事：

1.  *foo*是某个类的一个实例
2.  *FooFactory*是一个类
3.  *getFooInstance()*是类*FooFactory的***静态方法**
**   *doSomethingFoosDo()*是*foo的***实例**方法*

 **否则我们会浪费时间去思考诸如“ *FooFactory 是一个对象还是一个类？* ”之 类的问题。

如果没有命名约定，您实际上必须搜索源代码才能回答这些问题。

起初这似乎过于紧张，但当您开始编写更复杂的软件并与他人合作时，它会产生**巨大的差异。**

您会发现命名约定甚至使*您自己的代码*更具可读性。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-14T06:55:32.190

## 为什么 Java 类的第一个字母要大写？

Java编程语言有[代码约定，](http://www.oracle.com/technetwork/java/codeconv-138413.html)它说：

> Java 编程语言文档的代码约定包含**我们在 Sun 遵循并建议其他人遵循的标准约定。**它涵盖了文件名、文件组织、缩进、注释、声明、语句、空格、命名约定、编程实践并包括一个代码示例。
> 
> *   一个软件的生命周期成本的 80% 用于维护。
> *   几乎没有任何软件在其整个生命周期中都由原始版本维护
> *   代码约定提高了软件的可读性，使工程师能够更快、更彻底地理解新代码。

它说明了[Naming Conventions](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)，它在类名上说：

> **类名应该是名词，大小写混合，每个内部单词的首字母大写。**尽量保持你的类名简单和描述性。使用完整的单词——避免使用首字母缩写词和缩写词（除非缩写词比长格式更广泛地使用，例如 URL 或 HTML）。
> 
> 即光栅类；类图像精灵；

## 不能运行包含小写类名的程序吗？如果可能，有什么区别？

**这是可能的，适当的，对于编译器**没有区别。

这是对代码和其他程序员的不尊重。

不遵循 Java 编码约定会让您感到不舒服。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-08-14T07:38:32.710

> 为什么 Java 类的第一个字母要大写？

这是经验丰富的 Java 程序员普遍遵守的约定。

> 不能运行包含小写类名的程序吗？

是的，有可能。也可以穿同一套衣服上班一个月。但是你也不会通过这样做来交任何朋友。

> 如果可能，有什么区别？

不同之处在于，如果您忽略约定，您的代码对其他人的可读性会大大降低。现在，如果你正在编写只有你自己才能阅读的代码，那么代码风格纯粹是你的问题。然而，在现实世界中，我们大多数人经常不得不阅读其他人编写的代码。如果你的代码读起来很痛苦，因为你选择忽略约定，不要指望人们会因此而表扬你。

坦率地说，在合理期望其他人需要阅读的情况下编写不可读的代码是*反社会的。*

* * *

我应该补充一点，这*不仅仅是*反社会的。事实证明，您可以通过忽略约定来燃烧*自己。*样式约定旨在与 Java 的标识符消歧规则结合使用；见[JLS 6.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.5)。如果您忽略样式规则，您可能会发现模棱两可的标识符（例如，可能是类名或变量名的标识符）以一种意想不到的方式消除歧义。最终结果将是（通常）难以理解的意外编译错误。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-14T06:55:00.943

**类的 Java 命名约定**

```
 Classes: Names should be in CamelCase. 
```

尝试使用名词，因为类通常代表现实世界中的某些事物：

```
class Customer
 class Account 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-14T06:46:36.000

这是[java命名约定](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-08-14T06:47:25.260

只是命名约定。建议遵循。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-08-14T06:52:06.827

这些不是规则，而是惯例。你可以自由地使用你想要的任何东西，你想要的方式，但是通过遵循约定，你可以确保其他开发人员会很快理解你的代码，因为很清楚什么是类，什么是属性，什么是方法等等。

> 类名应该是名词，大小写混合，每个内部单词的首字母大写。尽量保持你的类名简单和描述性。使用完整的单词——避免使用首字母缩写词和缩写词（除非缩写词比长格式更广泛地使用，例如 URL 或 HTML）。

[http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-08-14T07:01:27.460

是 可以在 Java 中使用小写的类名。但是您应该遵守 Java 社区推荐的 Java 命名约定。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-08-14T11:49:05.630

Java 编码和命名约定是为了代码的可维护性而制定的。遵循这些标准的代码将易于维护。另一个开发人员可以理解您在 java 代码中所做的工作。

摘自网络：

“不同的 Java 程序员可以有不同的风格和方法来编写程序。通过使用标准的 Java 命名约定，他们可以让他们自己和其他程序员更容易阅读他们的代码。Java 代码的可读性很重要，因为这意味着尝试花费的时间更少弄清楚代码的作用，留出更多时间来修复或修改它。”**

# abap - 获取一个字段中相同的数据

> ID：11947085
> 
> 赞同：0
> 
> 时间：2012-08-14T06:45:36.813
> 
> 标签：abap, internal-tables

我想从一个动态的内部表中接收数据。

例如，内部表有两个字段：数字 - 名称

它充满了以下信息：

![在此处输入图像描述](../Images/c519103474a497bd26207a04dbe3173e.png)

我怎样才能只获得相同的数据？我想获得基于数字的数据库。我想为相同的数字着色。我的意思是keyid的1、2、6是红色，3和4是蓝色，5是黄色。由于内部表是动态的，我不能确定数字中总是有 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:29:52.770

我假设你的意思是你不知道你的动态表是否总是有你正在寻找的列。

使用运行时类型服务 (RTTS) 来确定动态表的结构。以下数据将确定您的结构是否有一个名为“NUMBER”的字段。您可以使用表 lt_component 来检查您需要读取哪个组件 ( `ASSIGN COMPONENT number OF STRUCTURE <fs_line> TO <fs_field>`)。

```
DATA:
    lr_tabledescr TYPE REF TO cl_abap_tabledescr,
    lr_datadescr  TYPE REF TO cl_abap_datadescr,
    lr_structdescr  TYPE REF TO cl_abap_structdescr,
    lr_typedescr    TYPE REF TO cl_abap_typedescr,
    lt_component    TYPE TABLE OF abap_componentdescr.

DATA tab TYPE TABLE OF sflight.

lr_tabledescr ?= cl_abap_datadescr=>describe_by_data( tab ).
lr_typedescr ?= lr_tabledescr->get_table_line_type( ).
lr_structdescr ?= lr_typedescr.
lt_component = lr_structdescr->get_components( ).

READ TABLE lt_component WITH KEY name = 'NUMBER'. 
```

# jquery - 带有 AJAX 调用的奇怪行为路由

> ID：11947088
> 
> 赞同：0
> 
> 时间：2012-08-14T06:46:06.813
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, routes

就我而言，我已经与完全古怪的 routes.rb 行为作斗争。我试图在我的 Rails 应用程序中实现 Carmen gem。我跟着这个[教程](https://github.com/jim/carmen-demo-app)。我只想要两个从属选择框，其中第一个是国家，第二个是区域（在本例中为子区域）。我花了将近两个小时找出为什么它不起作用。最后，解决方案非常简单——只需在 routes.rb 中切换两行即可。现在我的问题。我可以请任何人解释为什么在第一种情况下是来自服务器错误的响应以及为什么我的 rails 应用程序试图在显示操作时发送请求？我真的不明白。谢谢你。

**错误：**

**`Routes.rb`**

```
resources :orders
get '/orders/subregion_options' => 'orders#subregion_options' 
```

**`Server output`**

```
Started GET "/orders/subregion_options?parent_region=US" for 127.0.0.1 at 2012-08-13 23:18:35 -0700
Processing by OrdersController#show as HTML
  Parameters: {"parent_region"=>"US", "id"=>"subregion_options"}
  Order Load (1.3ms)  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", "subregion_options"]]
Completed 500 Internal Server Error in 3ms

ActiveRecord::RecordNotFound (Couldn't find Order with id=subregion_options):
  app/controllers/orders_controller.rb:26:in `show' 
```

**正确行为：**

**`Routes.rb`**

```
get '/orders/subregion_options' => 'orders#subregion_options'
resources :orders 
```

**`Server output`**

```
Started GET "/orders/subregion_options?parent_region=US" for 127.0.0.1 at 2012-08-13 23:20:10 -0700
Processing by OrdersController#subregion_options as HTML
  Parameters: {"parent_region"=>"US"}
  Rendered orders/_subregion_select.html.erb (3.0ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:54:15.653

原因是其中的路由`routes.rb`是按照它们出现的顺序定义的。当您编写 时`resources :orders`，您正在隐式创建与控制器上`GET /orders/:id`的`show`操作匹配的路由`orders`，因此当您转到`/orders/subregion_options`rails 时会解释`subregion_options`为`id`，因此会出现错误。

在您的第二个版本中，您更改了顺序，从而在定义资源路由*之前*与操作`/orders/subregion_options`正确匹配。这就是为什么第二个版本有效而​​第一个版本无效的原因。`subregion_options`

 *顺便说一句，这是定义该路由的更简洁的方法：

```
resources :orders do
  collection do
    get 'subregion_options'
  end
end 
```*

# php - curl 没有检索到响应

> ID：11947091
> 
> 赞同：0
> 
> 时间：2012-08-14T06:46:12.663
> 
> 标签：php

```
$c=  curl_init('https://disqus.com/api/3.0/threads/listPosts.json?api_key=EqGFOM4KaZaVb7TuhzxeiCeHBqwOfUHZ5YIih5Al51Fj8p410zsSAFaowG7Tafv5&thread:ident=2&forum=bestcamdirectory&limit=1');
    curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
    $response=  curl_exec($c);
   echo $response;
       curl_close($c); 
```

问题是没有从服务器获得任何东西。我可以使用 file_get_Contents ..但是我的服务器不允许使用它.. 没有得到响应的原因是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:48:48.387

您正在调用“https”站点，因此您可能必须将其设置`CURLOPT_SSL_VERIFYPEER`为 false。

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
```

# javascript - Twitter Bootstrap 弹出框不适用于动态生成的内容

> ID：11947094
> 
> 赞同：20
> 
> 时间：2012-08-14T06:46:23.927
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap, popover

在这里发布 stackoverflow 的新手，所以如果我在这里搞砸了任何事情，我提前道歉。

我正在使用 Twitter Bootstrap 的弹出框。我的弹出框似乎适用于我手动输入到我的 HTML 文档中的元素 - 但不是我通过 Javascript/Ajax 动态生成的元素。

例如，如果我手动将其直接添加到我的 HTML 文档中，弹出框似乎可以工作：

```
<p rel=popover data-content='It is so simple to create a tooltop for my website!' data-original-title='Twitter Bootstrap Popover'>hover for popover</p> 
```

但我真正需要的是让我的动态生成的元素有弹出框。我使用 XMLHttpRequest 向 PHP 文件发送请求，然后获取 responseText 并显示它。当我将这行代码添加到前面提到的 PHP 文件中时：

```
 echo "<p rel=popover data-content='It is so simple to create a tooltop for my website!' data-original-title='Twitter Bootstrap Popover'>hover for popover</p>"; 
```

... 果然，出现了“hover for popover”这个词——但是 popover 本身不起作用！

这让我发疯了一段时间，如果有人能帮我一把，那就太不可思议了！我还添加了我用来在下面启用 Bootstrap 的弹出框的 JQuery 函数，这是值得的。

```
$(function (){
$("[rel=popover]").popover({placement:'left'});
}); 
```

我对类似问题进行了彻底的搜索，我能找到的最好的就是[这个链接](https://stackoverflow.com/questions/11588645/add-twitter-bootstrap-popover-via-ajax-with-rails/ "这里")。但是该链接似乎也没有任何解决方案。再次提前感谢！

**更新：**

固定的！非常感谢所有提供帮助的人。我的问题是在将元素添加到文档对象模型之前调用了该函数。有多种可能的修复方法——我只是通过将 popover 函数转移到 Ajax 函数的 END 来测试解决方案，它确实有效！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-14T06:51:15.547

您需要`$("[rel=popover]").popover({placement:'left'});`在元素位于 DOM 之后调用。

**更新**

如果你使用 jQuery

```
$(element_selector)
  // load results into HTML of element_selector
  .load('your/php/file')
  // when done, initialize popovers
  .done(function(){
    $("[rel=popover]").popover({placement:'left'});
  }); 
```

**或者**jQuery ajax 请求的全部内容

```
$.ajaxComplete(function(){
    $("[rel=popover]").popover({placement:'left'});
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:57:16.387

在ajax的成功函数中你需要调用popover。像这样的东西

```
success:function(){
  $("[rel=popover]").popover({placement:'left'});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T13:11:12.223

此功能将在选择器中正常工作，您必须指定页面上您必须搜索“rel = popover”的位置，就像我放 *

```
$(function ()  
{
console.info($("*[rel=popover]"));
$("*[rel=popover]").popover();
}); 
```

# iphone - 动画 CAGradientLayer

> ID：11947095
> 
> 赞同：2
> 
> 时间：2012-08-14T06:46:28.777
> 
> 标签：iphone, ios, cagradientlayer

我在用着...

```
NSArray *colors = [NSArray arrayWithObjects:(id) colorOne.CGColor, colorTwo.CGColor, nil];
CAGradientLayer *headerLayer = [CAGradientLayer layer];
headerLayer.colors = colors;
headerLayer.frame = self.button_editEntry.bounds;
[headerLayer setCornerRadius:10];
[self.button_editEntry.layer insertSublayer:headerLayer
                                    atIndex:0]; 
```

...在我的按钮上进行线性填充。问题是当我为帧大小设置动画（使用 UIView beginAnimations）时，CAGradientLayer 消失并且不与帧的其余部分一起设置动画。这有什么不工作的原因吗？

有没有更好的方法来做线性淡入淡出？

# c# - 依赖注入和库/框架

> ID：11947103
> 
> 赞同：4
> 
> 时间：2012-08-14T06:46:51.703
> 
> 标签：c#, dependency-injection, unity-container

好的，也许这里已经有这样的问题了，但我没有找到它..

## 问题

我们有很多入口点的大型企业应用程序。应用程序包含如下部分：

*   服务器
*   桌面客户端
*   一些控制台实用程序
*   .NET API（单独的程序集，根类称为 like `MyAppAPI`）
*   COM API（相同的，单独的程序集，您可以从例如 VBScript 访问 API，通过`Set api = CreateObject("MyApp.MyAppAPI")`
*   Java API（同样）
*   Messaging API（单独的组件，用于通过消息队列在层之间进行通信）

我们在这个应用程序中使用 Unity 作为 DI 容器。Server/DesktopClient/Console 实用程序等中的一切都很酷 - 有非常具体的入口点，所以我们只需在那里初始化[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)对象，初始化对象/依赖关系树，一切都像魅力一样工作。他们的问题在于我们的 API。

### #1

如何处理库/框架中的 DI？

从上面的链接：

> 组合根是一个应用程序基础结构组件。
> 
> 只有应用程序应该有组合根。库和框架不应该。

是的，这很酷，但是.. 我想在我的 API 中使用 DI，它很大！如何处理一个与另一个？

### #2

我们有依赖关系，最好应该是单例（例如一些工厂，它控制创建对象的生命周期）。但是，我们可以创建一些 API 对象的实例，如何在它们之间共享这个单例实例呢？甚至更多——我们可以在同一个域中创建一些 .NET API 对象的实例和一个/一些 COM API 对象的实例（如果你愿意，我可以在可能的情况下在评论中解释）..

## 我现在拥有的

正如我所说，应用程序没有问题，问题存在于库（API）中。所以，我现在拥有的

*   我有课`ShellBase`
*   此类包含静态字段`_Shells`和公共静态方法`Get`以及`Release`
*   容器之间存在层次结构（例如 API 的容器继承自 MessagingAPI，Server 和 DesktopClient 容器继承自 .NET API 容器等）
*   当有人要求新的外壳（通过`Get`方法）时，`ShellBase`检查是否已经存在这样的容器（或超容器，来自子类），并返回该实例。或者创建一个新的

我不喜欢这种方式，但这是我现在能想象到的最好的方式。

## 可能的解决方案

创建类似的东西`APIFactory`，这将创建我们的 API 对象，但它看起来......对于最终用户来说太复杂了。我不想在用户文档中写：“请先创建并保留 APIFactory 实例，然后您可以使用此工厂创建 API 实例”。它很丑。我们的用户应该只写`var api = new API()`，并使用它。

所以，小伙伴们，你们怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:00:21.393

**1：**我见过其他框架/库，它们通过接口引入自己的 DI 容器抽象。然后，他们在需要引用 DI 容器的任何地方都在内部使用此接口。适配器用于将其库与特定的 DI 容器连接起来。例如，Davy Brion 的 Agatha 项目具有以下 Container 接口：[https](https://github.com/davybrion/Agatha/blob/master/Agatha.Common/InversionOfControl/IContainer.cs) ://github.com/davybrion/Agatha/blob/master/Agatha.Common/InversionOfControl/IContainer.cs ，他为最常用的 DI 容器提供适配器。

**2：**我不完全确定我在这里理解您的问题，但大多数（如果不是全部）DI 容器支持单例生命周期范围，这意味着您的容器只会创建一个实例。例如，在 ninject 中你会这样做：

```
kernel.Bind<IFoo>()
   .To<Foo>()
   .InSingletonScope(); 
```

或者，如果您想避免使用公共构造函数，您可以像没有 DI 容器那样创建该类的静态单例实例。您可以使用返回该实例的工厂方法向容器注册您的单例实例。同样，一个ninject示例：

```
kernel.Bind<IFoo>()
    .ToMethod(c => Foo.Instance); 
```

鉴于上面介绍的接口，您应该能够在 API 之间共享单个容器实例（假设您在给定应用程序中使用多个 API），从而强制执行单例要求。

如果这不是您的问题，那么也许您可以详细说明第二个问题。

# linux - 如何让 git 在拉取时不要求输入密码？

> ID：11947112
> 
> 赞同：7
> 
> 时间：2012-08-14T06:47:29.607
> 
> 标签：linux, git

我有以下设置：

带有 git 的服务器 (centOS) 和同一服务器上项目的存储库。

我需要做的是能够从存储库中提取而不被要求输入密码（因为很烦人）。

注意：当我拉动时，我以 root 身份登录。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T13:50:26.743

有几个选项，具体取决于您的要求，特别是您的安全需求。对于 HTTP 和 SSH，都有无密码或需要密码的访问。

# HTTP

===============

## *无密码*

仅用于获取要求，默认情况下禁用推送。如果匿名克隆是意图，那就完美了。您绝对不应该为这种类型的配置启用推送。git-http-backend 的手册页包含很好的信息，在线副本位于[http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html](http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)。它提供了一个如何配置 apache 来提供此功能的示例。

## *.netrc 或嵌入的 url 中的用户/密码*

其中 .netrc 文件以下列形式使用：

```
machine <hostname> login <username> password <password> 
```

嵌入的网址将采用以下形式：

```
http://user:pass@hostname/repo 
```

由于 git 不会为您执行身份验证，因此在将请求传递到 git 工具之前，您需要配置一个网络服务器（例如 apache）来执行身份验证。还要记住，使用嵌入式方法存在安全风险，即使您使用 https，因为它是请求的 url 的一部分。

如果您希望能够拉出非交互式但阻止匿名用户访问 git 存储库，这应该是一个相当轻量级的解决方案，使用 apache 进行基本身份验证，最好使用 .netrc 文件来存储凭据。作为一个小问题，一旦使用身份验证，git 将启用写访问，因此要么使用匿名 http 作为只读，要么你需要执行一些额外的配置，如果你想阻止非交互式用户拥有写访问权限.

看：

*   httpd.apache.org/docs/2.4/mod/mod_auth_basic.html 有关配置基本身份验证的更多信息
*   www.kernel.org/pub/software/scm/git/docs/git-http-backend.html 有关所需的 apache 配置的一些示例。

# SSH

===============

## *无密码*

打开安全问题，因为任何可以获得 ssh 私钥的人现在都可以以该用户身份更新远程 git 存储库。如果您想以非交互方式使用它，我建议您安装类似 gitolite 的东西，以便更容易确保那些拥有 ssh 私钥的人只能从 repo 中提取，并且需要不同的 ssh 密钥对来更新回购。

有关 gitolite 的更多信息，请参阅 github.com/sitaramc/gitolite/。

stromberg.dnsalias.org/~strombrg/ssh-keys.html - 用于创建无密码 ssh 密钥：可能还想涵盖管理多个 ssh 密钥：www.kelvinwong.ca/2011/03/30/multiple-ssh-private-密钥身份文件/

## *相位保护*

可以使用 ssh-agent 在每个会话的基础上解锁，仅对从 git 进行交互式获取非常有用。由于您提到 root 并且只谈论执行“git pull”，因此听起来您的用例是非交互式的。这可能更好地与 gitolite (github.com/sitaramc/gitolite/) 结合使用。

# 概括

===============

使用 gitolite 之类的东西会为 SSH 类型设置抽象出很多配置，如果您认为您可能有其他存储库或需要指定不同级别的访问权限，则绝对建议您使用。它的日志记录和审计也非常有用。

如果您只想能够通过 http 进行拉取，那么 git-http-backend 手册页应该包含足够的信息来配置 apache 来满足需要。

您始终可以将匿名 http(s) 用于克隆/拉取，与完全访问所需的密码保护 ssh 访问相结合，在这种情况下，无需设置 gitolite，您只需将 ssh 公钥添加到 ~/. ssh/authorized_keys 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:51:02.993

[请参阅此问题](https://stackoverflow.com/questions/7773181/git-keeps-prompting-me-for-password)的答案。您应该使用 SSH 访问而不是 HTTPS/GIT，并通过您的 SSH 公钥进行身份验证。这也应该在本地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:15:26.587

如果您使用 ssh 访问，您应该运行 ssh 代理，在此处添加您的密钥并在 repo 端注册您的公共 ssh 密钥。然后将自动使用您的 ssh 密钥。这是首选方式。

如果您使用的是 https 访问，那么您要么

*   使用包含凭据的 .netrc 文件或
*   [以https://user:pass@domain.tld/repo](https://user:pass@domain.tld/repo)的形式在目标 url 中提供用户/密码

使用这三种方式中的任何一种，它都不应该要求输入密码。

# opengl - 无法让预制工作 - gltut 演示

> ID：11947116
> 
> 赞同：4
> 
> 时间：2012-08-14T06:47:37.067
> 
> 标签：opengl, lua, premake

[https://bitbucket.org/alfonse/gltut/downloads](https://bitbucket.org/alfonse/gltut/downloads)

这是这本在线书籍中几个教程的存储库

[http://www.arcsynthesis.org/gltut](http://www.arcsynthesis.org/gltut)

作者使用[premake](http://industriousone.com/premake)作为 cmake 的替代品，我尝试了所有可能的命令行选项，但没有任何效果。

我不明白作者为什么要使用地球上最新的工具，但我需要解决这个问题，我什至对 Lua 和这个工具一无所知。

对于想要帮助我的人，您必须下载[它](http://glsdk.sourceforge.net/docs/html/index.html)以实际构建演示并将其放在您的 gltut 项目的根文件夹中。

mercurial 存储库的 URL 是

```
hg clone https://bitbucket.org/alfonse/gltut 
```

我的操作系统是 Ubuntu 12.04 64 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:51:26.927

我刚刚注意到Ubuntu 12.04附带的premake版本是3.7，只需从4.x分支下载更新版本即可解决问题。

# c# - 是什么导致 C# 中过多的匿名方法关闭 (c__DisplayClass1)？

> ID：11947120
> 
> 赞同：4
> 
> 时间：2012-08-14T06:48:04.210
> 
> 标签：c#, .net, linq, foreach, closures

Eqatec 显示每次调用方法时都会调用数千个匿名方法闭包，该方法在我的程序中包含一个简单的 LINQ 'Where' 语句。伪代码示例：

```
Class1
{
    //foo and bar are both EF model classes
    List<foo> aList; // n = 2000
    List<bar> bList; // n = ~4000

    void aMethod() 
    {  
        foreach (var item in aList)
        {
            Class2.DoSomeWork(item, bList);
        }
    }
}

Class2
{
    static void DoSomeWork(foo item, List<bar> bList)
    {
     var query = bList.where(x => x.prop1 == item.A && x.prop2 = item.B).toList(); // <--- Calls thousands of anonymous method closures each method call.

     if (query.any()) <--- Calls only 1 anonymous method closure.
        DoSomethingElse(); 
    } 
} 
```

我不明白为什么对“DoSomeWork”的 2,000 次调用调用了大约 800 万个匿名方法闭包（甚至 1 个导致数千个）。

作为修复，我只是简单地重写了语句而不使用 LINQ，它消除了对闭包的需要，并产生了 10 倍的性能提升。

如果有人有一些他们想分享的理论，我仍然想了解为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:12:45.520

我认为 8M 是指在闭包类上执行方法的次数，而*不是*创建的闭包实例的数量。首先，让我们编译代码：

```
class Class2
{
    public static void DoSomeWork(foo item, List<bar> bList)
    {
        var query = bList.Where(x => x.prop1 == item.A && x.prop2 == item.B)
                         .ToList();

        if (query.Any())
            DoSomethingElse();
    }
    static void DoSomethingElse() { }
}
class foo { public int A { get; set; } public int B { get; set; } }
class bar { public int prop1 { get; set; } public int prop2 { get; set; } } 
```

现在，我们可以丢弃原来的“ // <--- 只调用 1 个匿名方法闭包”。评论，因为实际上**没有**使用匿名方法闭包`.Any()`- 只是检查列表是否有内容：不需要闭包。

现在; 让我们手动重写闭包以显示编译器中发生了什么：

```
class Class2
{
    class ClosureClass
    {
        public foo item; // yes I'm a public field
        public bool Predicate(bar x)
        {
            return x.prop1 == item.A && x.prop2 == item.B;
        }
    }
    public static void DoSomeWork(foo item, List<bar> bList)
    {
        var ctx = new ClosureClass { item = item };
        var query = bList.Where(ctx.Predicate).ToList();

        if (query.Any()) {
            DoSomethingElse();
        }
    }
    static void DoSomethingElse() { }
} 
```

您可以看到 1`ClosureClass`是创建的 per `DoSomeWork`，它直接映射到唯一捕获的变量 ( `item`) 在方法级别的作用域。*谓词*( `ctx.Predicate`) 获得**一次**（仅），但会为 中的每个项目调用`bList`。所以确实，2000 * 4000 是对一个方法的 8M 调用；但是，对方法的 8M 调用不一定很慢。

然而！我认为最大的问题是您正在创建一个新列表只是为了检查是否存在。你不需要那个。您可以通过移动较早的部分来使您的代码**更有**效率：`Any`

```
if (bList.Any(x => x.prop1 == item.A && x.prop2 == item.B)) {
    DoSomethingElse();
} 
```

现在这只会调用谓词足够的次数，直到找到匹配项，我们应该预料到会少于所有匹配项；它也不会不必要地填写列表。

现在; *是*的，手动执行此操作会*更有*效率，即

```
bool haveMatch = false;
foreach(var x in bList) {
    if(x.prop1 == item.A && x.prop2 == item.B) {
        haveMatch = true;
        break;
    }
}
if(haveMatch) {
    DoSomethingElse();
} 
```

但请注意，`Any`和`foreach`之间的这种变化*并不是*关键的区别；**关键**的区别是我删除了`ToList()`和“继续阅读，即使你已经找到了匹配”。`Any(predicate)`用法更简洁，易于阅读等。这通常不是性能问题，我也怀疑它是否在这里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T06:53:19.650

在行

```
var query = bList.where(x => x.prop1 == item.A && x.prop2 = item.B).toList(); 
```

bList 有 4000 个元素， `x => x.prop1 == item.A && x.prop2 = item.B`将被调用 4000 次。如果您希望`.Any()`懒惰地评估，请删除`.ToList()`.

# java - 模拟方法周围的注释

> ID：11947123
> 
> 赞同：0
> 
> 时间：2012-08-14T06:48:07.453
> 
> 标签：java, junit, playframework-2.0, mockito

我有一个自己定义的注释 (@BasicAuth)，用于将 BasicAuth 添加到方法中。

像这样：

```
public class TokenController extends BaseController {
  @BasicAuth
  public static Result create() {
   ....
  }
} 
```

它就像一个魅力，但是当我测试 create 方法时，我想关闭（或模拟）保护。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:24:29.640

只需创建`TokenController`using`new TokenController()`和 call `create()`。注释将被忽略，因为您是在框架之外创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:32:35.393

是的，你什么时候使用 TokenController 都没关系。注解用于反射

# .htaccess - .htaccess 重写模式是否不适用于 url 中的 ~ 符号？

> ID：11947127
> 
> 赞同：1
> 
> 时间：2012-08-14T06:48:21.550
> 
> 标签：.htaccess, mod-rewrite

.htaccess 重写模式是否不适用于 url 中的 ~ 符号？

场景是我在服务器的某些文件夹中使用了 .htaccess 重写，它工作正常。但是使用 ~ 符号似乎不起作用，我收到 404 错误消息。IE。~ 符号用于 FTP 帐户的用户名，指向服务器。

实际的 .htaccess 代码：

```
RewriteEngine On

RewriteRule ^pages/(.*)$ pages.php?slug=$1
RewriteRule ^pages/(.*).html/$ pages.php?slug=$1 
```

这适用于网址

```
www.abcdxyz.com/something/pages/index.html 
```

但问题是另一种方式

```
www.server.com/~ftpaccount/pages/index.html 
```

这里的帐户没有指向任何域名，这就是为什么我使用 ~ 符号从服务器查看文件的原因。我使用的是 linux 服务器。

PS如果我不清楚这个问题，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:45:08.877

尝试在 RewriteRule 示例末尾使用“B”标志，您的 #1 规则变为

> RewriteRule ^pages/(.*)$ pages.php?slug=$1 [B]

它的作用是：在应用转换之前转义非字母数字字符

# security - 在使用 CORS 时防止 CSRF？

> ID：11947131
> 
> 赞同：5
> 
> 时间：2012-08-14T06:49:03.093
> 
> 标签：security, cross-domain, csrf

我正在制作一个书签，以便用户可以使用来自任何页面的 CORS 跨域发布到我的服务器。用户必须在发布和使用 cookie 之前进行身份验证。有什么方法可以防止恶意网站在他们的网页中嵌入 javascript 代码以使用用户的凭据跨域发布到我的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:20:44.860

理论上，可能有解决方案。

1.  在每个用户的书签中嵌入一个唯一的 CSRF 令牌。
2.  将小书签中的代码包装在一个匿名函数中，这样页面就无法访问它。
3.  在您的书签中嵌入[强大的哈希函数。](https://code.google.com/p/crypto-js/#SHA-2)这必须完全放在小书签的代码中，以确保它不会被篡改。
4.  在您的 XMLHttpRequest 中，您发送：
    1.  讯息
    2.  哈希值：
        1.  讯息
        2.  你的 CSRF 令牌
        3.  独特的长盐
        4.  用户 ID
        5.  时间戳（只是为了确保消息是现在发送的，而不是在其他时间发送）
    3.  盐
    4.  时间戳
    5.  用户 ID
5.  在您的服务器上，您验证：
    1.  时间戳在允许的误差范围内（这是必要的，因为用户的计算机时钟可能已关闭）
    2.  哈希是正确的
6.  如果一切正确，您可以发布消息。

这个概念有一个缺陷：如果网站篡改了书签使用的任何功能（例如`Array()`），恶意网站仍然可以拦截、复制和/或修改消息、用户 ID 或 CSRF 令牌。

# java - 尝试检索谷歌电子表格时“AuthSub 令牌范围错误”

> ID：11947132
> 
> 赞同：3
> 
> 时间：2012-08-14T06:49:12.127
> 
> 标签：java, oauth-2.0, gdata, google-sheets

我的代码是：（敏感信息已删除）

```
SpreadsheetService service = new SpreadsheetService("MySpreadsheetIntegration-v1");
// service.setUserCredentials(<email>, <pw>);

GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();
oauthParameters.setOAuthConsumerKey("xxx.yyy.no");
oauthParameters.setOAuthConsumerSecret("XXX");
oauthParameters.setOAuthToken("YYYY");
oauthParameters.setOAuthTokenSecret("ZZZZ");
oauthParameters.setScope("https://docs.google.com/feeds/ https://docs.googleusercontent.com/ https://spreadsheets.google.com/feeds/");

service.setOAuthCredentials(oauthParameters, new OAuthHmacSha1Signer());

// Define the URL to request. This should never change.
URL SPREADSHEET_FEED_URL = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");

// Make a request to the API and get all spreadsheets.
SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class);
List<SpreadsheetEntry> spreadsheets = feed.getEntries();

// Iterate through all of the spreadsheets returned
for (SpreadsheetEntry spreadsheet : spreadsheets) {
// Print the title of this spreadsheet to the screen
System.out.println(spreadsheet.getTitle().getPlainText());
} 
```

问题：

```
WARNING: Authentication error: Unable to respond to any of these challenges: {authsub=WWW-Authenticate: AuthSub realm="https://www.google.com/accounts//AuthSubRequest"} 
```

和

```
com.google.gdata.util.AuthenticationException: Token invalid - AuthSub token has wrong scope 
```

我尝试了 clientLogin 方法（setUserCredentials(, )），效果很好。我也知道我的 OAuthConsumerKey、OAuthConsumerSecret、OAuthToken 和 OAuthTokenSecret 工作，因为我使用它们访问不同的提要 (picasa) 我尝试设置上述 3 个范围的不同组合，但没有运气。我见过[这个](http://www.geoffmcqueen.com/2010/03/14/token-invalid-authsub-token-has-wrong-scope-oauth-google-problem/)和[这个](https://stackoverflow.com/questions/4883123/how-do-you-access-google-service-using-a-java-client/4885506#4885506)，但同样，没有运气。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-20T20:34:05.260

看看[这个答案](https://stackoverflow.com/questions/32121847/java-google-sheets-api-authsub-token-has-wrong-scope/32127719#32127719)。

尝试删除以下目录：

```
$HOME/.credentials
```

再次运行程序后，它会进行回调并要求您在 Google Console 中为您的应用程序授予权限，现在它可以正常工作了。

# ios - 如何在工作区中的两个 xcode 项目之间共享文件？

> ID：11947133
> 
> 赞同：8
> 
> 时间：2012-08-14T06:49:27.873
> 
> 标签：ios, iphone, xcode, ios-targets

我了解了 Xcode 工作区。我知道如何共享静态库，但我想在工作区中的两个 xcode 项目之间共享文件，是否可以一次运行多个目标？您能否提供有关如何执行此操作的信息.

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-05-05T08:46:16.627

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:28:59.327

您可以将 Xcode 项目拖到其他 Xcode 项目中以嵌套它们。

更多信息在这里：

[我应该如何管理 Xcode 工作区中项目之间的依赖关系？](https://stackoverflow.com/questions/5483909/how-should-i-manage-dependencies-across-projects-in-an-xcode-workspace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:37:39.513

要共享文件，您可能可以使用[捆绑包](https://developer.apple.com/library/ios/#documentation/CoreFOundation/Conceptual/CFBundles/AboutBundles/AboutBundles.html)

目标在 Xcode 4 中使用[Schemes](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Schemes.html#//apple_ref/doc/uid/TP40009328-CH8-SW1)进行操作，如果您选择不同的目标，您可以同时启动多个目标（使用 OS X，您可能有相同的目标 :)）

您会在停止按钮下方看到一个小三角形，表示您可以长按它来选择应该终止的操作：![Xcode](../Images/83090d3c20694e3dae55b81af84e6a2a.png)

您可以在 Debug 区域使用弹出窗口切换控制台，您可以在其中看到目标名称和图标 - 这是一个按钮。

# java - 在Java中组合两个字节

> ID：11947138
> 
> 赞同：3
> 
> 时间：2012-08-14T06:49:57.533
> 
> 标签：java, bit-manipulation, bit

有两个字节，如何通过从第一个字节中取出前 3 位和从第二个字节中取出后 5 位来创建一个新字节？

例如，对于`11100000`and `00011111`==>`11111111`怎么办？

我正在使用 Java。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T06:56:35.030

`byte b1, b2;`

取前 3 位：`b1 & 0xE0`

取最后 5 位：`b2 & 0x1F`

连接：`b1 | b2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T06:56:36.630

您可以使用[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)类。[这里](http://www.java-samples.com/showtutorial.php?tutorialid=378)有一个例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T06:58:22.537

使用掩码`0xE0`(11100000) 和`0x1F`(00011111)，您可以屏蔽掉不需要的位，并按位或将它们一起屏蔽：

```
byte b1 = 123; // 01111011
byte b2 = 50;  // 00110010

byte b3 = (b1 & 0xE0) | (b2 & 0x1F);  // = 114  01110010 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T06:58:28.833

`(b1 & 0xe0) | (b2 & 0x1f)`

# repository - Egit pull 失败显示错误

> ID：11947139
> 
> 赞同：0
> 
> 时间：2012-08-14T06:49:58.397
> 
> 标签：repository, egit, pull

我在使用 egit pull 选项时遇到问题。我可以推送我的仓库，但不能从仓库拉取。它带有一个错误，任何人都可以告诉我拉的完整过程。在谷歌搜索后，我开始了解有关 fetch 的一些信息，但从网站上我并不完全了解它的使用。当我选择团队->拉 Eclipse 时向我展示这个：“当前分支未配置为 pull 没有在配置中找到 key branch.master.merge 的值”。帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:17:22.810

看起来这回答了你的问题。

[当前分支未配置为 pull 在配置中找不到 key branch.master.merge 的值](https://stackoverflow.com/questions/8820668/the-current-branch-is-not-configured-for-pull-no-value-for-key-branch-master-mer)

此外，如果您有命令行 GIT，那么您也应该能够`git branch --set-upstream BRANCH-NAME REMOTE-BRANCH-NAME`设置远程跟踪。

# ruby-on-rails - Rspec Factory Girl Model Singular Plural（未初始化常量 [ModelName]）

> ID：11947142
> 
> 赞同：2
> 
> 时间：2012-08-14T06:50:23.380
> 
> 标签：ruby-on-rails, ruby, rspec

当我尝试测试名为“设置”的模型时出现错误，我感觉它与单数和复数模型名称有关，但我该如何解决呢？

这是规范 settings_spec.rb：

```
require 'spec_helper'

describe Settings do
  let!(:settings) { Factory(:settings) }

  describe "has a valid factory" do
    specify { should be_an_instance_of(Settings) }
  end

end

1) Settings has a valid factory 
     Failure/Error: let!(:settings) { Factory(:settings) }
     NameError:
       uninitialized constant Setting
     # ./spec/models/settings_spec.rb:4:in `block (2 levels) in <top (required)>' 
```

我的模型真正命名为Settings，文件名为settings.rb。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:56:46.417

它期望模型名称为`Setting`. 将模型重命名`app/model/setting.rb`为`Setting`或转到文件`config/initializers/inflections.rb`并将设置添加到不可数配置。

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable %w(settings)
end 
```

# c++ - 为什么在 C++ STL 中有算法、迭代器和容器的分离

> ID：11947151
> 
> 赞同：8
> 
> 时间：2012-08-14T06:50:58.980
> 
> 标签：c++, algorithm, stl, iterator, containers

我不明白为什么他们在 C++ STL 中分离了算法、迭代器和容器。如果到处都大量使用模板，那么我们可以让类在一个地方使用模板参数将所有东西都放在一个地方。

我得到的一些文本解释说，迭代器有助于算法与容器数据交互，但是如果容器公开一些机制来访问它拥有的数据呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-14T08:22:07.687

使用`M`容器 +`N`算法，通常需要一段`M * N`代码，但使用充当“胶水”的迭代器，这可以简化为一段`M + N`代码。

示例：在 3 个容器上运行 2 个算法

```
std::list<int> l = { 0, 2, 5, 6, 3, 1 }; // C++11 initializer lists
std::vector<int> v = { 0, 2, 5, 6, 3, 1 };  // C++11 initializer lists
std::array<int, 5> a = { 0, 2, 5, 6, 3, 1 };

auto l_contains1 = std::find(l.begin(), l.end(), 1) != l.end();
auto v_contains5 = std::find(v.begin(), v.end(), 5) != v.end();
auto a_contains3 = std::find(a.begin(), a.end(), 3) != a.end();

auto l_count1 = std::count(l.begin(), l.end(), 1);
auto v_count5 = std::count(v.begin(), v.end(), 5);
auto a_count3 = std::count(a.begin(), a.end(), 3); 
```

您只调用 2 种不同的算法，并且只有 3 个容器的代码。每个容器将`begin()`和`end()`迭代器传递给容器。即使您有几`3 * 2`行代码来生成答案，也只有`3 + 2`部分功能需要编写。

对于更多的容器和算法，这种分离极大地减少了代码中的组合爆炸，否则会随之而来：STL 中有 5 个序列容器、8 个关联容器和 3 个容器适配器，并且`<algorithm>`单独有近 80 个算法（不是甚至计算`<numeric>`) 中的那些，这样您的代码`16 + 80`就`16 * 80`减少了 13 倍！（当然，并不是每个算法对每个容器都有意义，但重点应该很清楚）。

迭代器可以分为 5 类（输入、输出、转发、双向和随机访问），一些算法会根据迭代器的能力委托给专门的版本。这将在一定程度上减少代码减少，但通过选择最适合手头的迭代器的算法来大大提高效率。

请注意，STL 在分离方面并不完全一致：`std::list`有自己的`sort`成员函数，使用特定于实现的细节来对自己进行排序，并且`std::string`有大量的成员函数算法，其中大部分可以作为非成员函数实现。

# jquery - 使第二个表头固定

> ID：11947155
> 
> 赞同：0
> 
> 时间：2012-08-14T06:51:11.257
> 
> 标签：jquery, css, html-table

我有一个两个表，其中第二个表可以水平滚动。

我想让这个表的表头是固定的。

请参考[jsfiddle](http://jsfiddle.net/Yw679/11/)

这里是 `<div class="table2">`我想要修复的第二个表的标题。

我怎样才能以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:05:02.340

这是你想要的吗？[http://jsfiddle.net/Yw679/16/](http://jsfiddle.net/Yw679/16/)

如您所见，它不是那么漂亮 - 与第一个表格单元格重叠，但这就是您所要求的。

编辑：固定 table2 标题。

Edit2：您应该使用建议的 jQuery 插件 Telemako。

# sencha-touch - 如何隐藏列表项中的 NULL 值从 sencha touch 中的商店获取

> ID：11947157
> 
> 赞同：1
> 
> 时间：2012-08-14T06:51:20.550
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-charts

![在此处输入图像描述](../Images/680af20e266a260e31162426f8fa7718.png)我已经在**sencha touch 中实现了一个应用程序。**

因为我有一个列表视图，**我从商店中检索数据**，

在某些字段的数据库中，我插入了**空值，{无选择}。**

列表视图中的相应字段显示为**NULL，**

但我想显示一个**`empty space`**而不是**NULL，**

```
 {
                  xtype: 'list',

                  itemTpl: [
                            '<div id="wrapper">'+
                            '<div class="frt">{Name}</div>'+
                            '<div class="frt">{Title}</div>'+
                            '<div class="frt">{Contact}</div>'+
                            '<div class="frt">{Zip}</div>'+
                            '</div>'
                            ],
                  store: 'ContactsDataBase'
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:12:25.843

```
{
       xtype: 'list',
       itemTpl: [
                   '<div id="wrapper">'+
                   '<div class="frt"><tpl if="Name != null">{Name}</tpl></div>'+
                   '<div class="frt"><tpl if="Title != null">{Title}</tpl></div>'+
                   '<div class="frt">{Contact}</div>'+
                   '<div class="frt">{Zip}</div>'+
                   '</div>'
                ],
        store: 'ContactsDataBase'
} 
```

访问[Sencha Touch 文档网站](http://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate)了解更多信息。

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T02:07:40.550

稍作修改的版本

```
itemTpl: [
               '<div id="wrapper">'+
               '<div class="frt"><tpl if="values.Name">{Name}</tpl></div>'+
               '<div class="frt"><tpl if="values.Title">{Title}</tpl></div>'+
               '<div class="frt">{Contact}</div>'+
               '<div class="frt">{Zip}</div>'+
               '</div>'
            ] 
```

# azure - Azure 存储定价：按 30 GB 收费？

> ID：11947160
> 
> 赞同：0
> 
> 时间：2012-08-14T06:51:36.423
> 
> 标签：azure, storage

Hy ppl，我不明白我的订阅中 34GB 左右的天蓝色存储是如何收费的。我们还没有使用那么多存储空间。

我听说有一个用于 azure storage explorer 的任务工具。它有多大用处？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:28:14.200

你在使用虚拟机吗？如果是这种情况，您必须知道持久磁盘在您的存储帐户中存储为页 blob，并且您需要为此付费。[定价详细信息](https://www.windowsazure.com/en-us/pricing/details/#virtual-machines)页面解释了原因：

> 计算时间不包括与在 Windows Azure 虚拟机中运行的映像相关的任何 Windows Azure 存储成本。这些费用单独计费。有关如何计算计算小时数的完整说明，请参阅云服务部分。

如果您想了解有关每个存储帐户/天/位置/使用了多少数据的更多详细信息...我建议您查看[订阅](https://account.windowsazure.com/Subscriptions/)页面。选择订阅后，您可以导出可以分析的详细 CSV 文件。

# iphone - 如何在视图中显示加载动画 - IOS

> ID：11947164
> 
> 赞同：4
> 
> 时间：2012-08-14T06:51:50.483
> 
> 标签：iphone, objective-c, ios, xcode

我有一个要显示加载动画的视图。我已经看到一些应用程序显示圆形图像以显示加载，并且动作将发生在背景上，我想在这里实现同样的事情，任何内置动画都可以在 IOS 中使用？

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-19T03:38:17.073

您可以使用内置的活动指示器。

```
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
indicator.center = CGPointMake(alert.bounds.size.width / 2 , (alert.bounds.size.height) /2);
[indicator startAnimating]; 
```

只需将其作为子视图添加到您的视图中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T06:56:00.387

如果你想保持简单，你可以使用 UIActivityIndi​​cator。或者有很多开源活动指示器除了显示一个旋转的轮子之外还可以做很多花哨的事情。[MBProgressHUD](https://github.com/jdg/MBProgressHUD/)和[SVProgressHUD](https://github.com/samvermette/SVProgressHUD/)是两个简洁的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-05T12:49:50.190

创建 YourViewController，然后将 MBProgressHUB 库添加到您的项目中（您可以从[这里](http://github.com/jdg/MBProgressHUD)获取该库）；下载项目并将库移动到您的项目中。

然后您可以使用以下代码来完成您的任务：

**你的ViewController.h**

```
#import <UIKit/UIKit.h>
#import "MBProgressHUD.h"

@interface YourViewController : UITableViewController <MBProgressHUDDelegate>
{
    MBProgressHUD *hud;
} 
```

**你的视图控制器.m**

```
#import "YourViewController.h"
@interface YourViewController ()
@end

@implementation YourViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    [self initializeProgressLoading];
    [self getObjects];
    [hud hide:YES afterDelay:1];
}

-(void) initializeProgressLoading {
    hud = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:hud];
    hud.delegate = self;
    hud.labelText = @"Loading";
    [hud showWhileExecuting:@selector(sleep) onTarget:self withObject:nil animated:YES];
}

- (void)sleep {
    sleep(50000);
}

- (void) getObjects {
// connect to db and get all objects
//you can write any thing here
}

- (void)hudWasHidden:(MBProgressHUD *)hud1 {
    // Remove HUD from screen when the HUD was hidded
    [hud removeFromSuperview];
    hud = nil;
} 
```

# iphone - 碰撞一个ccsprite，即导弹与其他ccsprite，即飞机，两者都在cocos 2d中以贝塞尔路径动作移动

> ID：11947169
> 
> 赞同：-1
> 
> 时间：2012-08-14T06:52:11.220
> 
> 标签：iphone, cocos2d-iphone, bezier

当点击 ccmenu 按钮时，以贝塞尔路径动作移动的飞机应该与同样以贝塞尔路径移动的导弹相撞。问题是当导弹发射时，飞机在一个位置，但是当它（导弹）到达那个点时，飞机移动到另一个位置。这是由于两个动作的持续时间而发生的。那么如何找到飞机被导弹击中？这是一个简单的 cocos 2d 游戏。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:27:10.473

y我不确定您到底要做什么，但这是一种可能的解决方案：

当您按下按钮发射导弹并使用 CCMoveTo 使其移动到飞机的位置。

```
[CCMoveTo actionWithDuration:time position:ccp(aeroplane.position.x,aeroplane.position.x)]; 
```

只要您确保持续时间足够短，导弹就会击中飞机。

# php - 如何识别具有相同值的数组并在 PHP 中放入一个大数组

> ID：11947170
> 
> 赞同：1
> 
> 时间：2012-08-14T06:52:17.043
> 
> 标签：php, arrays, multidimensional-array, array-merge

我这里有数据：

```
 Array
 (
 [3] => Array
    (
        [SiteID] => 3
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 17
        [GroupID] => 1
        [Deposit] => 1500
        [Redemption] => 1000
        [Reload] => 1000
    )

  [3] => Array
    (
        [SiteID] => 3
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 211
        [GroupID] => 1
        [Deposit] => 1500
        [Redemption] => 1000
        [Reload] => 1000
    )

   [4] => Array
    (
        [SiteID] => 4
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 17
        [GroupID] => 1
        [Deposit] => 1500
        [Redemption] => 1000
        [Reload] => 1000
    )

    [4] => Array
    (
        [SiteID] => 4
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 12
        [GroupID] => 1
        [Deposit] => 1500
        [Redemption] => 1000
        [Reload] => 1000
    )

        [5] => Array
        (
            [SiteID] => 2
            [Balance] => 19000.00
            [MinBalance] => 100000.00
            [MaxBalance] => 1000000.00
            [OwnerAID] => 11
            [GroupID] => 1
            [Deposit] => 1500
            [Redemption] => 1000
            [Reload] => 1000
        )
      )
   ) 
```

然后我需要创建一个名为“CorpAID”的新密钥，指向拥有相同 SiteID 的 OwnerAID 列表，这意味着 SiteID 可以由一个或多个 OwnerAID 拥有。结果应如下所示：

```
Array 
(
 [0]=> Array
 (
    [SiteID] => 3
    [Balance] => 19000.00
    [MinBalance] => 100000.00
    [MaxBalance] => 1000000.00
    [OwnerAID] => 17
    [GroupID] => 1
    [Deposit] => 1500
    [Redemption] => 1000
    [Reload] => 1000
    [CorpAID] => Array
                (
                   [0] => 17
                   [1] => 211
                )
             )
   [1]=> Array
(
    [SiteID] => 3
    [Balance] => 19000.00
    [MinBalance] => 100000.00
    [MaxBalance] => 1000000.00
    [OwnerAID] => 17
    [GroupID] => 1
    [Deposit] => 1500
    [Redemption] => 1000
    [Reload] => 1000
    [CorpAID] => Array
                (
                   [0] => 12
                   [1] => 17
                )
             ) 
```

有可能做到吗？请帮助我，并以正确的方式指导我。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:47:36.330

这是未经测试的代码，但阅读正在发生的事情应该有点直观。我假设这`SiteID`是要分组的领域。

这`$tmp =&$out[$record['SiteID']];`只是避免反复输入的快捷方式`$out[$record['SiteID']]`。

```
$out = array();

foreach ($records as $record) {
    $tmp = &$out[$record['SiteID']];
    if (isset($tmp)) {
        $tmp['CorpAID'][] = $record['OwnerAID'];
    } else {
        $tmp = $record;
        $tmp['CorpAID'] = array($record['OwnerAID']);
    }
} 
```

顺便说一句，在 MySQL 中，您也可以这样做以使 PHP 中的事情变得更容易：

```
SELECT GROUP_CONCAT(OwnerAID) AS CorpAID
FROM ...
GROUP BY SiteID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:48:04.350

我建议您创建一个小函数来通过多维数组比较键和值：

```
function findInArray($key, $value, $array){
    foreach($array as $key=>$row){
      if(array_key_exists($key, $row){
           if($row[$key] == $value)
                    return $key;
         }
   }
   return -1;
} 
```

然后执行一个数组`foreach`以在正确的位置设置值，我们搜索结果数组中是否已经存在`SiteID`，如果没有，我们将其添加到集合中，否则我们只是查看 是否`OwnerAID`已经在`CorpAID`数组中，或者我们添加它。这样我们可以避免重复输入（似乎您不希望在发布的示例中这样做）：

```
$result_array = array();
foreach($array as $row){
 $key = findInArray('SiteID', $row['SiteID'], $result_array);
  if($key == -1){
           $temp = $row;
           $temp['CorpAID'] = array($row['OwnerAID']);
           $result_array[] = $temp;
          }
  else {
     if(findInArray('CorpAID', $row['OwnerAID'], $result_array) == -1){
            $result_array[$key]['CorpAID'][] = $row['OwnerAID'];
        }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:33:11.537

要实现您要查找的内容，您需要遍历这些值并`CorpAID`为每个条目分配一个新字段。然后，该`CorpAID`字段需要是对`SiteID`在每个 each 的迭代中构建的值的引用`OwnerAID`。

引用很重要，因为当您将其分配给第一个元素时，这些元素尚未完全填充，因为在您编写时，可能有多个`OwnerAID`per `SiteID`。

这个声音越复杂，代码就越小。由于这利用了参考，我将它们取消设置为稍后清理：

```
$table = array();
foreach($data as &$item)
{    
    $item['CorpAID'] = &$table[$item['SiteID']];
    $item['CorpAID'][] = $item['OwnerAID'];
}
unset($item);
unset($table); 
```

但是，通过将站点信息（在您的数据中经常重复）与所有者信息分开，您可以获得更多好处。它可以像上面一样工作。

# java - 如何在骆驼中实现事件驱动消费者

> ID：11947171
> 
> 赞同：2
> 
> 时间：2012-08-14T06:52:20.910
> 
> 标签：java, apache-camel

我对骆驼很陌生，一直在努力了解如何在特定场景中使用骆驼。在这种情况下，有一个（基于 Java 的）代理会不时生成操作。我需要一个事件驱动的消费者来获得这些事件的通知。这些事件将被路由到“文件”生产者（暂时）。

在骆驼书中，该示例适用于轮询消费者。我找不到事件驱动消费者的通用解决方案。我遇到了 JMX 的类似实现：

```
public class JMXConsumer extends DefaultConsumer implements NotificationListener { 

JMXEndpoint jmxEndpoint;    
public JMXConsumer(JMXEndpoint endpoint, Processor processor) { 
    super(endpoint, processor);
    this.jmxEndpoint = endpoint;
}

public void handleNotification(Notification notification, Object handback) { 
    try {
        getProcessor().process(jmxEndpoint.createExchange(notification)); 
    } catch (Throwable e) {
        handleException(e); 
    }
} 
```

}

在这里，只要 JMX 通知到达，就会调用 handleNotification。

我相信我必须做类似的事情来让我的消费者在代理生成动作时得到通知。但是，上面的 handleNotification 方法是特定于 JMX 的。网页上说：“在实现自己的事件驱动消费者时，您必须确定一个类似的事件侦听器方法以在您的自定义消费者中实现。”

我想知道：如何识别类似的事件侦听器，以便在我的代理有操作时通知我的消费者。

非常感谢任何指向网页的建议/链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-19T08:59:36.343

我知道这是一个老问题，但我一直在努力解决这个问题，只是想我会记录我的发现，以供其他任何人寻找答案。

创建 Endpoint 类（扩展 DefaultEndpoint）时，您将覆盖以下用于创建使用者的方法：

```
public Consumer createConsumer(Processor processor) 
```

然后，在您的消费者中，您可以访问处理器 - 在此处理器上调用“进程”将创建一个事件并触发路由。

例如，假设您有一些用于侦听消息的 Java API，并具有某种侦听器。在我的例子中，Listener 将传入的消息放到 LinkedBlockingQueue 中，我的 Consumer 'doStart' 方法看起来像这样（添加你自己的错误处理）：

```
@Override
protected void doStart() throws Exception {
    super.doStart();

    // Spawn a new thread that submits exchanges to the Processor
    Runnable runnable = new Runnable() {
        @Override
        public void run() {
            while(true) {
                IMessage incomingMessage = myLinkedBlockingQueue.take();
                Exchange exchange = getEndpoint().createExchange();
                exchange.getIn().setBody(incomingMessage);
                myProcessor.process(exchange);  
            }
        }
    };
    new Thread(runnable).start();
} 
```

现在我可以将创建创建此 Consumer 的 Endpoint 的组件放入我的 CamelContext 中，并像这样使用它：

```
from("mycomponent:incoming").to("log:messages"); 
```

并且每次来自 Java API 的新消息到达时都会触发日志消息。

希望对某人有所帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T09:33:20.163

事件驱动就是骆驼。

任何路由实际上都是一个事件监听器。

给定路线：

```
from("activemq:SomeQueue").
  bean(MyClass.class);

public class MyBean{
  public void handleEvent(MyEventObject eventPayload){ // Given MyEventObject was sent to this "SomeQueue".
     // whatever processing.
  }
} 
```

这将建立一个事件驱动的消费者。那么如何发送事件呢？如果您的应用程序中嵌入了骆驼并从您的事件操作生成器访问 CamelContext，那么您可以从中获取一个[生产者模板](http://camel.apache.org/producertemplate.html)，然后将您的事件触发到您在骆驼中定义的任何端点，例如“seda:SomeQueue”。

否则，如果您的 Camel 实例在您的应用程序之外的另一个服务器或实例中运行，那么您应该使用其他传输而不是 SEDA。最好是 JMS，但其他人也会这样做，挑选。ActiveMQ 是我的最爱。您可以轻松启动嵌入式 activemq 实例（JVM 内部）并将其连接到 camel，方法是：

```
camelContext.addComponent("activemq", activeMQComponent("vm://localhost")); 
```

# android - 在android中以不同的方式禁用锁定屏幕

> ID：11947172
> 
> 赞同：0
> 
> 时间：2012-08-14T06:52:29.400
> 
> 标签：android

当我的应用程序打开时，我可以禁用锁定屏幕，但我的要求略有不同。如您所知，几分钟后屏幕会关闭，您需要单击电源按钮才能唤醒。因此，当我单击电源按钮时，我只想直接进入我的应用程序 - 无需滑动即可解锁屏幕。是否有可能以任何方式。请提供您的想法。

我用来一直保持屏幕开启的以下代码：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON|
                        WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD|
                        WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED|
                        WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

# extjs4 - 在 ExtJS 4 中解析嵌套的 Json

> ID：11947180
> 
> 赞同：0
> 
> 时间：2012-08-14T06:53:15.017
> 
> 标签：extjs4

我有一个嵌套的json，如下所示。我想将其解析为 TreePanel，

```
 {"E": {
              "@st": "SS",
              "eid": "879",
              "name": "L-e",
              "code1": "01",
              "E":   [
                    {
                  "@st": "SS",
                  "eid": "423",
                  "name": "PaM-M",
                  "code1": "S-M",
                },
                    {
                  "@st": "SS",
                  "eid": "890",
                  "name": "P-F",
                 "code1": "S-F",
                  "E":       [
                            {
                      "@st": "SS",
                      "eid": "342",
                      "name": "S-p",
                     "code1": "S-L"
                    },
                            {
                      "@st": "SS",
                      "eid": "967",
                      "name": "St-k",
                      "code1": "ST-K"
                    },
                            {
                      "@st": "SS",
                      "eid": "789",
                      "name": "S-k",
                      "code1": "S-A"
                    }
                  ]
                },
                    {
                  "@st": "SS",
                  "eid": "908",
                  "name": "S-F",
                  "code1": "S-EF",
                  "E":       [
                            {
                      "@st": "SS",
                      "eid": "567",
                      "name": "S-M",
                      "code1": "ST-TK",
                    },
                            {
                      "@st": "SS",
                      "eid": "456",
                      "name": "S-Teak",
                      "code1": "S-TK"
                    },
                            {
                      "@st": "SS",
                      "eid": "234",
                      "name": "S-PK",
                      "code1": "S-ML"
                    }
                  ]
                },
                    {
                  "@st": "SS",
                  "eid": "2345",
                  "name": "A-Pedestal-Common",
                  "code1": "AC1"
                },
                    {
                  "@st": "SS",
                  "eid": "1234",
                  "name": "A_P_Wenge",
                  "code1": "A_1"
                }
              ]
            }} 
```

我想在 Extjs4 的 TreePanel 中解析这个 json。我不能改变这个 json 格式。
请让我知道我将如何实现这一目标？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T23:22:59.857

如果我对您的理解正确，那么您将在下面的代码之后。

`E`在您的 json 中，基本上代表`children`默认情况下阅读器期望的树。

```
 Ext.define('TreeModel', {
    extend: 'Ext.data.Model',
    fields: [ '@st', 'eid', 'name', 'code1' ]
 });

 var iTreeStore = Ext.create('Ext.data.TreeStore', {
     model: 'TreeModel',

     // Your other configs in here.
     proxy: {
        // whatever your proxy comes in here.
     },
     reader: {
        type  : 'json',
        root  : 'E'      // That's the one that should do the trick.
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:40:58.483

只是解析它？

`Ext.JSON.decode(jsonString)`把它变成你的对象......

# javascript - 如何使用jquery在gridview中获取选定单选按钮的值

> ID：11947186
> 
> 赞同：1
> 
> 时间：2012-08-14T06:53:54.500
> 
> 标签：javascript, jquery, html, ajax

我正在研究 wijgrid，并且为 html 表单提供了一个单选按钮。我使用 jquery 来获取单选按钮的值，它显示在表单上，​​但未显示在网格中。

我想在选择单选按钮时获取 paramcode 的值，该值应该显示在 wijgrid .

请帮助...谢谢蒂娜！

这是我的 JSON（为了便于阅读而重新格式化，但实际上已缩小）：

```
{
    "jsonWrapperforGrid": {
        "page": "1",
        "total": "2",
        "rows": [
            {
                "tenantId": 0,
                "paramType": "UserGender",
                "paramCode":"F", 
                "langCode":"en", 
                "paramValue":"Female"
            },
            {
                "tenantId": 0,
                "paramType": "UserGender",
                "paramCode": "M",
                "langCode": "en",
                "paramValue": "Male", 
                "paramBlob": ""
            }
        ]
    }
} 
```

这是我的 jQuery 脚本：

```
<script type="text/javascript">
$.ajax({ 
    url: "UserGender",
    type: "GET",
    dataType: "json",
    contentType : "application/json",
    success: function (responce) { 
        if (responce.jsonWrapperforGrid.rows.length > 0) {
            $.each(responce.jsonWrapperforGrid.rows, function (i, entity) {  
                $('#gencom01').append(
                    $('<label />', { 'for': 'gender' + entity.paramValue,
                                     'text': entity.paramValue }),
                    $('<input />', { 'id': 'gender' + entity.paramCode,
                                     'type': 'radio', 
                                     'name': 'gender', 
                                     'value': entity.paramValue })
                    .click(function() {
                        var inputValue = $('input:radio:[name=+"gendernew"]:checked').val(entity.paramCode);
                        $("#gencom").val(entity.paramCode );
                    })
                );
            });
        }
    }
});
</script> 
```

这是我的 HTML：

```
<body>  
  <div id="gencom01">
    <td><input id="gencom" style="width:205px ;" name="gendernew">
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:44:48.970

真的都是你的代码吗？如果您开始在负载时进行 ajax 调用，也许您可​​以在服务器端处理它？但你可能有你的理由。

首先你需要**使用`$(document).ready();`event**，你不能开始将东西附加到一个可能还没有在你的 DOM 中的标签上。

你的**if 语句是无用** `if (responce.jsonWrapperforGrid.rows.length > 0)`的，如果长度为 0，你的 .each() 循环将不会做任何事情，之前不需要测试。

更糟糕的是，您开始在 .append() 中声明 .click()，虽然它可能有效，但看起来有点奇怪，并且可能是许多错误的根源。**将 DOM 操作和事件分开**通常更容易调试。并使用 .on()，更新更多。

我不知道您的 AJAX 调用背后的技术，但**将您的 JSON 解析**为真正的 JS 对象会有所帮助：`var jsonData = $.parseJSON(responce);`

因此，**尽可能少地制作 .append() 是**一个好习惯，在循环中使用它可能需要一些时间。我建议将您的数据保存在一个变量中，并且只有在循环结束时您才能附加所有内容。

而且我不知道这`<td>`在你的`<div>`.

这是您的**代码**的样子，我无法测试任何东西，因为我不知道您的 JSON 的样子：

```
$(document).ready(function()
{
    $.ajax({ 
        url: "/mgw/pankanis/admin/SysParameter?Paramtype=UserGender",
        type:"GET",
        dataType: "json",

        contentType : "application/json",
        success: function (responce)
        {
            var jsonData = $.parseJSON(responce);
            var toAppend = "";
            $.each(jsonData.jsonWrapperforGrid.rows,function(i,entity)
            {
                toAppend += '<label for="gender'+entity.paramValue+'">'+entity.paramValue+'</label>';
                toAppend += '<input id="gender'+entity.paramCode+'" type="radio" name="gender" value="'+entity.paramValue+'">';
            });
            $('#gencom01').append(toAppend);
            $("#gencom01 input:not(#gencom)").on("click",function()
            {
                $("#gencom").val($(this).attr("id").substr(6)); // entity.paramCode
            })
        }
    });
}); 
```

# c++ - Qt SDK 和 CD/DVD 刻录

> ID：11947189
> 
> 赞同：0
> 
> 时间：2012-08-14T06:53:59.913
> 
> 标签：c++, qt, qt4

Qt SDK 是否为 CD/DVD 刻录提供了一些便利。更具体地说，如果是，请提供一些课程参考。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:06:02.847

Qt 与 CD/DVD 刻录无关。它是一个 GUI 工具包。它也有通用结构。

对于 CD/DVD 刻录，您需要使用其他工具，例如[`wodim`](http://en.wikipedia.org/wiki/Cdrkit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:04:30.380

不，Qt 不包含任何 CD 或 DVD 刻录 API。您需要找到另一个软件包来执行此操作（当然您仍然可以自由地将 Qt 用于 GUI 部分）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:12:47.313

看看其他人在 qt-apps 做什么也是一个好主意。例如，我发现了这个应用程序[http://qt-apps.org/content/show.php/Silicon?content=149696](http://qt-apps.org/content/show.php/Silicon?content=149696)

您可以下载它并查看源代码。

# android - setOnItemSelectedListener 不起作用，焦点 ListView 有问题

> ID：11947196
> 
> 赞同：2
> 
> 时间：2012-08-14T06:54:33.067
> 
> 标签：android, listview

我尝试将焦点设置在 ListView 但 onItemSelected - 不起作用，这是我的来源

```
uAdapter = new UrlArrayAdapter(DatabaseTable.this, urlListView,
                urlLists);
        urlListView.setAdapter(uAdapter);
    urlListView.setItemsCanFocus(true);
        urlListView.setClickable(false);
        urlListView.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
                long id) {  }); 
```

我使用以下 XML。我的 LisWiev xml

```
 <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:descendantFocusability="beforeDescendants" >
    </ListView> 
```

和添加到 ListView 的项目 xml

```
 <LinearLayout
        android:id="@+id/editLinearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:minHeight="50dp" >
        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.66"
            android:ems="10" >
            <requestFocus />
        </EditText>
        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false" />
    </LinearLayout> 
```

我解决了这个问题，这篇文章帮助了我，它展示了如何使用 ListView [Linc] ( `http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html`)

并**帮助我访问此链接** `http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:18:18.277

您的 onItemSelected 没有被调用，因为您已将`setClickable`列表的属性设置为 false。尝试将其更改为 true，然后检查。我希望这会奏效。

# ruby-on-rails - 在 Linode 上设置 Ruby on rails Web 应用程序

> ID：11947198
> 
> 赞同：1
> 
> 时间：2012-08-14T06:54:46.333
> 
> 标签：ruby-on-rails, setup-deployment, vps, linode

我是 web 开发和 ruby​​ on rails 的绝对新手。我计划在 Linode 512 计划上部署一个 ror 应用程序。我的网站基本上是一个论坛，允许用户使用 Ruby 1.9.3 和 Rails 3.2 上传照片。

我应该使用哪个操作系统？他们有什么区别？（Ubuntu / Debian / CentOS / Fedora）

我应该使用 Apache 还是 Nginx？他们有什么区别？

我应该使用 PostgreSQL、MySQL、MongoDB 还是 Linode 上提供的任何其他类型的数据库？他们有什么区别？

我的目标受众来自中国，这意味着我不能使用 Amazon S3。我应该让用户将照片上传到 Linode 服务器吗？

是否有针对此问题的分步初学者指南？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T08:37:51.440

首先，我觉得你多虑了。如果您是新手，请从流行的选择开始，然后随心所欲地更改、修改、扩展。随着您的技能成熟，您将知道什么最适合您。

以下是一些对您来说更容易的选择：

1.  我应该使用哪个操作系统？他们有什么区别？**Ubuntu**

2.  我应该使用 Apache 还是 Nginx？他们有什么区别？**阿帕奇。如果是小型网站，暂时无所谓。**

3.  我应该使用 PostgreSQL、MySQL、MongoDB 还是 Linode 上提供的任何其他类型的数据库？他们有什么区别？**mysql。MongoDB 是一个 NoSQL 数据库，目前可能不适合您。**

4.  我的目标受众来自中国，这意味着我不能使用 Amazon S3。我应该让用户将照片上传到 Linode 服务器吗？**暂时上传到 Linode。不要过早地扩展它。**

5.  是否有针对此问题的分步初学者指南？**Ryan 的 RailsCasts：[http](http://railscasts.com/episodes/373-zero-downtime-deployment) ://railscasts.com/episodes/373-zero-downtime-deployment和[http://railscasts.com/episodes/335-deploying-to-a-vps](http://railscasts.com/episodes/335-deploying-to-a-vps)，它们是必看的，但不是免费的.**

对于所有这些设置，[Linode 的教程](http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.10-maverick)是一个很好的开始。你也应该看看@Stefan 的回答。

您还应该尝试部署到[Heroku](http://www.heroku.com/)来感受一下。[Rails 教程](http://ruby.railstutorial.org/)非常适合您学习从开发到部署的过程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T08:33:43.817

Linode 上有几个专用的 Rails 设置指南：

**阿帕奇和乘客：**

*   [在 Debian 6 上使用 Apache 的 Ruby on Rails（挤压）](http://library.linode.com/frameworks/ruby-on-rails-apache/debian-6-squeeze)
*   [在 Ubuntu 10.04 (Lucid) 上使用 Apache 的 Ruby on Rails](http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.04-lucid)
*   [在 Ubuntu 10.10 (Maverick) 上使用 Apache 的 Ruby on Rails](http://library.linode.com/frameworks/ruby-on-rails-apache/ubuntu-10.10-maverick)

**nginx 和乘客：**

*   [在 Ubuntu 10.04 (Lucid) 上使用 Nginx 的 Ruby on Rails](http://library.linode.com/frameworks/ruby-on-rails-nginx/ubuntu-10.04-lucid)
*   [在 Ubuntu 10.10 (Maverick) 上使用 Nginx 的 Ruby on Rails](http://library.linode.com/frameworks/ruby-on-rails-nginx/ubuntu-10.10-maverick)
*   [在 Debian 5 上使用 Nginx 的 Ruby on Rails (Lenny)](http://library.linode.com/frameworks/ruby-on-rails-nginx/debian-5-lenny)
*   [在 CentOS 5 上使用 Nginx 的 Ruby on Rails](http://library.linode.com/frameworks/ruby-on-rails-nginx/centos-5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:38:24.860

由于我们为 Rails 应用程序部署了许多 linode，因此我的建议是：

```
ubuntu/centos + mysql/postgres + nginx + passenger 
```

如果您的应用程序将有大量的 fb inout 操作，那么您可以`mongodb`选择

# iphone - 如何在 iphone 中将 MFMailComposeViewController 中的密件抄送保持为只读？

> ID：11947208
> 
> 赞同：1
> 
> 时间：2012-08-14T06:55:19.267
> 
> 标签：iphone, objective-c, xcode

我正在创建一个项目，我的应用程序用户可以在我的应用程序中发送邮件。当用户将每封邮件发送给他们的朋友时，我希望该邮件发送到我的邮件。所以我在密件抄送中添加了我的邮件。但问题是用户可以轻松删除我在密件抄送中的邮件。我希望我的密件抄送不可删除。

我使用以下代码发送邮件

```
MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
[controller setSubject:@"4 Frax"];
[controller setMessageBody:@"Hai dude" isHTML:NO]; 
[controller setBccRecipients:[NSArray arrayWithObject:@"office@4Frax.com"]];
if (controller) [self presentModalViewController:controller animated:YES];
[controller release]; 
```

谁能告诉我如何避免用户在密件抄送中删除我的邮件。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:19:06.783

你不能，没有可用的 API 来做到这一点。因为这是一个隐私问题。未经用户明确许可，Apple 不允许您获取用户电子邮件（或让他们邮寄给您）。

因此，邮件编辑器将不允许您调整、隐藏和字段。您只能预填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:37:39.700

我不确定这是对待用户的好方法......但如果你*真的*想这样做，我认为你唯一的选择是设置你自己的邮件服务器并通过它路由你的消息。正如[rckoenes 所](https://stackoverflow.com/a/11948383/2998)指出的，在 iOS 上没有 API 可以做到这一点。

# javascript - 按钮 ONCLICK ONSERVERCLICK

> ID：11947210
> 
> 赞同：0
> 
> 时间：2012-08-14T06:55:20.660
> 
> 标签：javascript, asp.net, onclick

我正面临按钮问题。

我希望进行客户端验证（比如在数据列表中最多选择 4 个复选框）。

我使用了 INPUT TYPE="BUTTON" RUNAT="SERVER" 样式的标签。并把 Onserverclick="someservermethod" 工作正常。

我写了一个 Validate() 并添加了 onclick="return validate();" 到上面的 HTML 标记，并在想如果它返回 false 那么我的服务器端代码 someservermethod() 将不会执行，并且它按预期工作得很好

但是当我返回 true 时，我认为它会触发我的 someservermethod()，但它不起作用。关于它为什么不起作用的任何想法？

按钮下方的 HTML 标记

```
button onclick="return ValidateSelection();" type="button" id="btnSubmit"
                runat="server" onserverclick="btnSubmit_Click" 
```

JAVASCRIPT代码

```
function ValidateSelection()
{
  if(good)
  {
    // I expect that my server side code btn_Submit would have got called. But
    // it doesn't get called.
    return true;
  }
  else
  {
    //This works great. Not calling the server side method for the button
    alert('something happened');
    return false;
  }  
} 
```

我想我搞砸了格式。对不起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:43:06.150

您现在使用的控件是 HtmlButton，它不适合您尝试执行的操作，因为您`onclick`覆盖了回发所需的客户端代码。

您需要的是 Button 控件，它确实支持覆盖客户端`onclick`并仍然像往常一样执行回发。

将标记更改为此，它应该可以工作：

```
<asp:button OnClientClick="return ValidateSelection();" id="btnSubmit" runat="server" OnClick="btnSubmit_Click" Text="Submit"></asp:Button> 
```

# html - 需要注意的常见跨浏览器错误列表

> ID：11947214
> 
> 赞同：0
> 
> 时间：2012-08-14T06:55:47.230
> 
> 标签：html, css, browser

我知道“新”css3 元素，如 boxshadow、textshadow：

```
-moz-box-shadow: 10px 10px 5px #888;
-webkit-box-shadow: 10px 10px 5px #888; 
```

尽管如此，您是否知道或遇到过一些常见的陷阱（html5、css3 或 javascript 相关）？显然**没有办法跨浏览器测试**页面，但是为了避免首先犯一些这些错误，如果你能分享你的知识会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:02:36.807

如果您想查看大部分跨浏览器问题，可以访问[此处](http://www.catswhocode.com/blog/15-techniques-and-tools-for-cross-browser-css-coding)。该博客提供了有关跨浏览器解决方案需要注意的事项的详细信息。

# postgresql - 无法在 postgresql 中运行块

> ID：11947217
> 
> 赞同：-2
> 
> 时间：2012-08-14T06:55:58.653
> 
> 标签：postgresql

当我运行以下查询时

```
CREATE OR REPLACE FUNCTION some_function() RETURNS timestamptz AS $$ 
DECLARE         
   curtime timestamp; 
BEGIN    
   curtime := 'now';     
   INSERT INTO logtable VALUES (logtxt, curtime);    
   RETURN curtime; 
END; 
```

显示的错误是

> *错误：“$$”处或附近未终止的美元引号字符串*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:14:48.017

缺少函数定义的最后一行。之后`END;`应该有：

```
$$ LANGUAGE plpgsql; 
```

那是因为您从我对上一个问题的回答中复制了它：

[无法在 PostgreSQL 8.2 中运行块](https://stackoverflow.com/questions/11946736/not-able-to-run-block-in-postgresql-8-2)

我在回答中犯了一个编辑错误，切断了那条线。我在后面的示例中也将其正确，并链接到解释这一切的文档，因此看起来您只是复制并粘贴了它，而没有尝试了解正在发生的事情。

请阅读[有关 PL/PgSQL 的文档](http://www.postgresql.org/docs/current/static/plpgsql.html)，但也要考虑一下您*为什么*要这样做。您发布的代码没有多大意义，我怀疑您正试图以非常倒退的方式解决问题。试着解释你想要达到的目标。

如果您确实必须这样做，请尝试[我对您先前问题的回答末尾](https://stackoverflow.com/a/11946751/398670)的代码。

# jquery - 进度条宽度

> ID：11947220
> 
> 赞同：1
> 
> 时间：2012-08-14T06:56:02.920
> 
> 标签：jquery, css, width, var

我的代码旨在通过计算百分比并将其作为 style.width 传递来设置进度条的宽度。我是新手，请为错误的代码道歉：

jQuery

```
$(document).ready(function() {
var width=(1/5*100);
$('#progress_bar').css('width','=width + "%"');
}); 
```

HTML

```
<div id="progress_bar" style="height:1em; background:red; display:block;"></div> 
```

有空的人可以帮我让它工作并告诉我哪里出了问题，以便我可以从中吸取教训吗？

[http://jsfiddle.net/SyxAM/](http://jsfiddle.net/SyxAM/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T06:57:42.520

字符串`'=width + "%"'`不能是 css 参数的值。

你可能想要

```
 $('#progress_bar').css('width', width + "%"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:59:17.263

这将解决您的问题

```
var width=(1/5*100);

$('#progress_bar').css('width',width + "%"); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:01:05.777

您的变量附加错误。应该是这样的；

```
$(document).ready(function() {
var width=(1/5*100);
$('#progress_bar').css('width', width + "%");
}); 
```

你可以在这里看到[http://jsfiddle.net/SyxAM/2/](http://jsfiddle.net/SyxAM/2/)

# c# - 过滤命令设计方法

> ID：11947225
> 
> 赞同：1
> 
> 时间：2012-08-14T06:56:32.800
> 
> 标签：c#, .net, wpf, parsing, command

这是我的应用程序的 UI。它是一个基于 WPF 的应用程序，可以在设备之间进行分析（与 Wireshark 非常相似）。![在此处输入图像描述](../Images/a2560fd8ca9d16a4b05693fcd77bfd72.png)

绑定到 DataGrid 的类如下（除 Error 和 FuncType 之外的所有内容都绑定到网格：）

```
public class CommDGDataSource
{
    public int Number { get; set; }
    public string Time { get; set; }
    public string Protocol { get; set; }
    public string Source { get; set; }
    public string Destination { get; set; }
    public string Data { get; set; }
    public bool Error { get; set; }
    public FunctionType FuncType { get; set; }
} 
```

基本上，我正在尝试设计一些东西，用户可以输入某些过滤器命令，并且只显示与条件匹配的行。以下是一些示例（不带引号），

1.  输入“错误”应仅显示错误属性已设置为 true 的数据行

2.  输入“source==someipaddress”应该只显示匹配的IP地址

3.  输入 "number>100" 应该只显示数字大于 100 的行

4.  如果用逗号分隔，则应适用多个条件。（错误，来源==某些IP地址）

我已经为我的绑定数据创建了 ICollectionView 来处理过滤，但我不确定我应该采用什么方法来解析命令并正确处理过滤以满足上述要求。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:32:55.603

### 10,000 英尺概览

[过滤 a 中的数据`DataGrid`](http://msdn.microsoft.com/en-us/library/ff407126.aspx)是通过将处理程序附加到[`CollectionViewSource.Filter`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.filter.aspx)事件来完成的，因此实际问题是如何[`FilterEventHandler`](http://msdn.microsoft.com/en-us/library/system.windows.data.filtereventhandler.aspx)从用户输入创建 a。这个问题可以用表达式树以一种强大的方式解决。

我不会详细介绍如何解析输入字符串，因为它的范围从非常简单到非常复杂；一种强大的方法是使用像 ANTRL 这样的工具将输入解析为抽象语法树。

我将展示的是如何在输入已解析且用户意图已知的情况下创建过滤器（在解析时动态创建过滤器也很容易）。

假设用户为过滤器输入了“Number > 10”。如果此过滤器是硬编码的，`FilterEventHandler`则将如下所示：

```
public void CustomFilterHandler(object sender, FilterEventArgs e)
{
    CommDGDataSource source = (CommDGDataSource)e.Item;
    return source.Number > 10;
} 
```

### 动态构造过滤事件处理程序

我们在这里要做的是使用表达式树动态地构建这个方法。让我们从一些序言开始：

```
var sourceType = typeof(CommDGDataSource);
var eventArgsType = typeof(System.Windows.Data.FilterEventArgs); 
```

我们将构建一个[`LambdaExpression`](http://msdn.microsoft.com/en-us/library/System.Linq.Expressions.LambdaExpression.aspx)有两个[参数](http://msdn.microsoft.com/en-us/library/system.linq.expressions.lambdaexpression.parameters.aspx)和一个[主体](http://msdn.microsoft.com/en-us/library/system.linq.expressions.lambdaexpression.body.aspx)的。我们先构造参数：

```
var parameters = new[] {
    Expression.Parameter(typeof(object), "sender"),
    Expression.Parameter(eventArgsType, "e"),
}; 
```

身体将是一个[`BlockExpression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.blockexpression)（这不是绝对必要的，但以后可能会派上用场）。A`BlockExpression`使用许多[变量](http://msdn.microsoft.com/en-us/library/system.linq.expressions.blockexpression.variables)，并且由任意数量的[其他表达式](http://msdn.microsoft.com/en-us/library/system.linq.expressions.blockexpression.expressions)组成；非常重要的是，最后一个将是块的返回值。

上面给出的模拟事件处理程序的第一行告诉我们，我们需要一个变量：

```
var variable = Expression.Variable(sourceType, "source"); 
```

我们肯定需要一个产生返回值的谓词：

```
var predicate = Expression.GreaterThan(
    Expression.MakeMemberAccess(variable, sourceType.GetProperty("Number")),
    Expression.Constant(10)); 
```

我们现在准备生产`BlockExpression`. 主体将需要访问`Item`事件处理程序的第二个参数 ( `parameters[1]`) 的属性并将其强制转换为，`sourceType`因为`FilterEventArgs.Item`是 type `object`，所以我们不能直接使用它。转换结果应存储在`variable`其中，然后`predicate`将执行测试：

```
// Some intermediate variables to cut down on the line length
var itemProperty = eventArgsType.GetProperty("Item");
var itemAccessExpression = Expression.MakeMemberAccess(parameters[1], itemProperty);
var castItemToCorrectType = Expression.TypeAs(itemAccessExpression, sourceType);

// And the body is comprised of these two expressions:
var body = new[] { Expression.Assign(variable, castItemToCorrectType), predicate }; 
```

因为`predicate`是主体的最后一个表达式，它也会产生它的返回值。

我们现在可以构造块表达式，最后是过滤 lambda 表达式本身：

```
var block = Expression.Block(new[] { variable }, body);
var filter = Expression.Lambda<Func<object, FilterEventArgs, bool>>(block, parameters); 
```

### 插入过滤器

我们遇到所有这些麻烦的原因之一是，现在编译器可以自动为我们从`filter`表达式构造一个“真实”方法！然后我们可以简单地将其插入`CollectionViewSource.Filter`事件并享受过滤：

```
// It's a good idea to keep a reference to this around for now,
// so that it can be removed from the event handler later.
var filterMethod = filter.Compile();

collectionViewSource.Filter += filterMethod; 
```

### 构建复杂的过滤器

采用这种方法的另一个原因是扩展过滤逻辑非常容易。例如，很容易想象，而不是像这样硬连线谓词：

```
var predicate = Expression.GreaterThan(
    Expression.MakeMemberAccess(variable, sourceType.GetProperty("Number")),
    Expression.Constant(10)); 
```

我们可以像这样从用户输入构建它：

```
// Maps operators to Expression factory methods
var dict = new Dictionary<string, Func<Expression, Expression, BinaryExpression>>
{
    { "==", Expression.Equal },
    { ">", Expression.GreaterThan },
    { "<", Expression.LessThan },
    // etc
};

var predicate = Expression.Constant(true); // by default accept all rows

// Logical AND everything in parseResult to construct the final predicate
foreach (parseResult in parsedUserInput)
{
    var exprConstructor = dict[parseResult.Operator];
    var property = sourceType.GetProperty(parseResult.PropertyName);
    var target = Expression.MakeMemberAccess(variable, property);
    var additionalTest = exprConstructor(target, Expression.Constant(parseResult.Value));
    predicate = Expression.AndAlso(predicate, additionalTest);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:12:29.250

单击后，`Start`您应该为网格绑定到的集合引发通知更改事件，比方说`Devices`。getter for`Devices`将应用过滤器并仅返回过滤后的记录。

```
void OnStartClicked(object sender, EventArgs e)
{
   NotifyPropertyChanged("Devices");
}

public IEnumberable<Device> Devices
{
   get 
   {
      if(string.IsNullOrEmpty(Filter)) return _devices;
      return _devices.Where(d => d.Satisfies(Filter));
      // or
      return _devices.Where(d => _filter.Satisfies(d, Filter));
   }
} 
```

在`Device`课堂或某些过滤类中，您将定义`Satisfies`可以按照您希望的方式工作的方法。

对于解析过滤器，您应该使用一些语法（ANTLR），或者您可以使用 Roslyn 项目将字符串转换为 C# 代码。如果您只有有限数量的非常简单的过滤器，您可以轻松地使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:20:31.820

就个人而言，我不喜欢你描述的方法。

如果您想在过滤器字符串中使用类似 SQL（或类似 LINQ）的语法，那么您必须让用户知道该语法......特别是，如果您不会强烈地掌握 SQL（LINQ）语法，那将会很痛苦.

我认为，将扩展器放在网格上，其中将包含用于设置过滤的良好旧控件，然后动态构建相应的谓词以过滤代码中的数据，会好得多。

但是，如果您决定以这种方式进行过滤，那么您的任务归结为“如何从字符串中获取 LINQ 表达式”。此链接应该可以帮助您：
[如何将字符串转换为其等效的 LINQ 表达式树？](https://stackoverflow.com/questions/821365/how-to-convert-a-string-to-its-equivalent-expression-tree)

[解析字符串 C# LINQ 表达式](https://stackoverflow.com/questions/3782538/parsing-a-string-c-sharp-linq-expression)

# javascript - JavaScript 引用混淆

> ID：11947228
> 
> 赞同：0
> 
> 时间：2012-08-14T06:56:38.953
> 
> 标签：javascript

> **可能重复：**
> [为什么自定义函数引用一直指向旧函数](https://stackoverflow.com/questions/11898651/why-self-defining-function-reference-keeps-pointing-to-the-old-function)

我对 javascript 引用行为感到很困惑。请看一下这段代码，很清楚 javscript 在传递引用时不会创建新的内存位置。

```
Human.prototype = Monkey.prototype;
Human.prototype.name = "human";
Human.prototype.work = "love";

Joker.prototype = Human.prototype;
Joker.prototype.name = "joker";
Joker.prototype.act = "awesome";

joker = new Joker ();
human = new Human ();
human.name = 'joker'; 
```

现在看看这个，很明显 javascript 正在为 scareMe 和恶作剧创建 2 个单独的内存位置

```
var scareMe = function () {
   alert("Boo!");
   scareMe = function () {
     alert("Double boo!");
  };
};

var prank = scareMe; 
prank(); // "Boo!"
prank(); // "Boo!"

scareMe(); // "Double boo!" 
```

请帮助我理解这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:37:41.430

第一个块：

```
Monkey = function(){};

Human = function(){};
Human.prototype = new Monkey(); // This is how you have to inherit properties of Monkey
Human.prototype.name = "human";
Human.prototype.work = "love";

Joker= function(){};
Joker.prototype = new Human();  // This is how you have to inherit properties of Human
Joker.prototype.name = "joker";
Joker.prototype.act = "awesome";

joker = new Joker ();
human = new Human ();
alert(joker.name);  // shows joker
alert(human.name);   // shows human 
```

实际上不建议在原型中创建属性。（参考：[http](http://css.dzone.com/articles/ecmascriptnext-classes) ://css.dzone.com/articles/ecmascriptnext-classes ）

```
Monkey = function(){
    this.name = "monkey";
    this.work = "jump";
};

Human = function(){
    this.name = "human";
    this.work = "love";
};
Human.prototype = new Monkey(); // This is how you have to inherit properties of Monkey

Joker = function(){
    this.name = "joker";
    this.work = "awesome";
};

Joker.prototype = new Human();  // This is how you have to inherit properties of Human

joker = new Joker ();
human = new Human ();
alert(joker.name);  // shows joker
alert(human.name);   // shows human 
```

第二块：

```
var scareMe = function () {       // `scareMe` is a global variable 
   alert("Boo!");
   scareMe = function () {       //  value of global `scareMe` will be changed when original `scareMe` gets executed for the first time
     alert("Double boo!");
  };
};

var prank = scareMe; 
prank(); // "Boo!" - because `prank` is original scareMe. but this execution changes value of `scareMe` 
prank(); // "Boo!" - same happens

scareMe(); // "Double boo!" - `scareMe` is having new function. it shows "Double boo!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:51:20.920

在您的第一个示例中，我认为您正在尝试使用对象继承，您的原型分配不适合，因为将原型分配给现有原型将导致左侧原型引用另一个原型。那么这只是你在代码中分配这些原型变量的位置的问题，即：

```
Human.prototype = Monkey.prototype;
//Human.prototype.name = "human";  -- not here
Human.prototype.work = "love";

Joker.prototype = Human.prototype;
Joker.prototype.name = "joker";
Joker.prototype.act = "awesome";

Human.prototype.name = "human";  // but here

joker = new Joker ();
human = new Human ();
alert(human.name) // outputs "human" 
```

但是您应该使用它来代替对象继承：

```
Human.prototype = new Monkey(); 
```

在您的第二个示例中，恶作剧获得了分配的原始scareMe 功能。scareMe 函数输出“Boo！” 并重新分配scareMe 函数变量。这意味着最外面的“var scareMe”现在指向不同的函数（返回“Double Boo！”）。但是由于 prank 仍然指向原来的函数，所以它总是会执行原来的代码（输出“Boo！”并重新分配scareMe）。

```
// i.e.: reverse the call order:
scareMe(); // "Boo!"
prank(); // "Boo!"
prank(); // "Boo!" 
```

“scareMe”的第一次调用重新分配了scareMe，但恶作剧仍然指向原始功能。

# c# - 将日期从表格插入表格

> ID：11947229
> 
> 赞同：0
> 
> 时间：2012-08-14T06:56:39.820
> 
> 标签：c#, asp.net

我已将 AJAX CalendarExtender 用于 TextBox 控件。我想要从 TextBox 到我的数据库表的值（日期）。我是怎么用的

```
command.Parameters.AddWithValue(..?..) 
```

我从日历中选择时的值显示为 -

`August 9, 2012`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:09:15.917

您是否尝试过使用日期时间值解析字符串，例如

```
var date = DateTime.ParseExact("August 9, 2012", "MMMM d, yyyy", CultureInfo.InvariantCulture);

command.Parameters.AddWithValue("@dateParameterName", date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:01:52.607

我建议使用`DateTime.TryParse()`，因为用户可以在您的文本框中输入任何值，甚至无效。`DateTime.ParseExact()`仅当您确定该字符串是精确格式的有效日期时间时才适用。你可以在这里阅读更多关于它和`System.Convert.ToDateTime()`方法的信息

[DateTime.Parse 和 Convert.ToDateTime 之间有什么区别？](https://stackoverflow.com/questions/8192520/any-difference-between-parse-and-convert)

# java - java EC2 serversocket一直卡在端口已经使用异常

> ID：11947230
> 
> 赞同：0
> 
> 时间：2012-08-14T06:56:42.360
> 
> 标签：java, android, sockets, amazon-ec2

我目前正在/几乎完成构建我的通信应用程序的测试版。我在 EC2 实例上运行我的服务器，但不知何故，当我几天后检查服务器状态时，服务器应用程序一直卡在“端口已在使用”异常“。但它在前几天工作正常。这可能是由于我在编码时犯了一些错误，但我也怀疑我还没有在我的 linux 操作系统上设置一些东西。这是每个人偶尔都会发生的事情吗？

=================================================

我主要使用以下代码行在循环中不断接受用户

```
while (blinker != null) {
            try {
                ServerSocket ss = new ServerSocket(PORT, 10);
                Socket connection = ss.accept();
                //other stuffs going on
                ss.close();       //forgot to mention that i actually close it all the time after accepting a new user
                             }
} 
```

====================================

除此之外，我主要使用端口 443 和 80

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:24:58.680

将 ServerSocket 的创建移到循环之外。目前，您每次接受连接时都试图创建一个新的，因此您与自己发生冲突。在程序的整个生命周期中，您只需要一个。

# php - Codeigniter - 如何从 url 中删除 index.php？

> ID：11947234
> 
> 赞同：6
> 
> 时间：2012-08-14T06:56:52.807
> 
> 标签：php, codeigniter

我的项目结构如下

```
/system
/applications
  /cache
  /core
  /helpers
  /hook
  /language
  /libraries
  /logs
  /third_party
  /admin-panel
     /config
     /controllers
        welcome.php
        dashboard.php
     /errors
     /models
     /views
        welcome.php
        dashboard.php
  /user-panel
     /config
     /controllers
            welcome.php
            dashboard.php
     /errors
     /models
     /views
        welcome.php
        dashboard.php
/admin
  index.php
index.php 
```

我的项目文件夹中的 index.php 将 user-panel 作为我的应用程序文件夹，而 admin 文件夹中的 index.php 将 admin-panel 作为我的应用程序文件夹。

我已经插入了这一行 $route['default_controller'] = "welcome"; $route['欢迎'] = '欢迎'; 在用户面板和管理面板内的 routes.php 中

我可以通过使用访问我的用户面板和管理面板的欢迎控制器`http://localhost/myproject and http://localhost/myproject/admin`

但我无法通过使用访问我的仪表板控制器`http://localhost/myproject/dashboard or http://localhost/myproject/admin/dashboard`

我的仪表板控制器可以通过使用访问`http://localhost/myproject/index.php/dashboard or http://localhost/myproject/admin/index.php/dashboard`

但我不希望 index.php 包含在我的网址中。我想删除它。我也尝试过在我的管理文件夹中使用 .htaccess 。我在此写下一行

```
RewriteEngine On
RewriteCond $1 !^(index\.php|(.*)\.swf|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

但这对我不起作用。它给出 404 not found CI 错误。我还通过在 httpd.conf 中将 AllowOerride None 更改为 AllowOverride All 来启用 mod_rewrite。请告诉我我应该怎么做才能删除 index.php 以及我应该将我的 .htaccess 文件放在我的项目目录中的什么位置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T07:20:42.647

如果您的项目根文件夹不是域的根目录，即您的网站是域的子目录，`http://localhost/myproject`那么您需要在 .htaccess 文件中添加一行`RewriteBase`

```
RewriteEngine On
RewriteBase /myproject
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

还要确保您的 config.php 配置为

```
$config['base_url'] = 'http://localhost/myproject/';
$config['index_page'] = ''; 
```

并且在 apache 的配置文件中启用了 mod_rewrite。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:36:02.343

从 system/application/config 目录打开 config.php

并更换

$config['index_page'] = “index.php” by $config['index_page'] = “”</p>

在 CodeIgniter 目录的根目录下创建一个“.htaccess”文件

并添加以下行。

```
 RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

在某些情况下，uri_protocol 的默认设置无法正常工作。

要解决这个问题，只需更换

```
`$config['uri_protocol'] = “AUTO”` 
```

经过

```
 $config['uri_protocol'] = “REQUEST_URI” 
```

从系统/应用程序/config/config.php

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:10:45.330

请确保以下几点：

1.  .htaccess 需要放在与 index.php 文件相同的目录中，通常是应用程序的根目录。
2.  [阅读有关 codeigniter 和 .htaccess 的手册](http://codeigniter.com/user_guide/general/urls.html)
3.  确保 apache 正在运行名为：**rewrite_module**的重写模块，您可以在此处阅读有关在 linux 上启用该模块的更多信息：[博客文章](http://www.lavluda.com/2007/07/15/how-to-enable-mod_rewrite-in-apache22-debian/)或此处的 wamp：Wamp 图标 -> Apache -> Apache 模块 -> **rewrite_module**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:10:56.613

查看 config.php 文件，有一个变量名为`'index_page'`

尝试改变

```
$config['index_page'] = "index.php"; 
```

至

```
$config['index_page'] = ""; 
```

# javascript - Javascript：控制表格列中所有复选框的主复选框

> ID：11947240
> 
> 赞同：0
> 
> 时间：2012-08-14T06:57:26.080
> 
> 标签：javascript, html

我有 5 个复选框。其中之一是所有复选框的标题。如果我选中标题复选框，则所有内容都应自动检查，如果我取消选中它，则所有内容都应取消选中。如果我取消选中任何子复选框，标题应自动取消选中。

我的代码是这样的：

```
<html>
<SCRIPT LANGUAGE="JavaScript">
              function checkAll()
              {

                if(pp_checkall.checked==true) 
                {
                    for (i = 1; i <= pp_check.length; i++)
                     pp_check[i].checked = true ;
                }
              else
                {
                    for (i = 1; i <= pp_check.length; i++)
                    pp_check[i].checked = false ;
                }
              }

</script>
<SCRIPT LANGUAGE="JavaScript">
             function checkOne()
               {
                for (i = 1; i <= pp_check.length; i++)
                 {  
                  if(pp_check[i].checked==false)
                  {
                    pp_checkall.checked = false ;
                  }
                }
              }

              </script> 

<body>
<table>
<tr><th width="1px"><input type="checkbox" text="Dharan" name="pp_checkall" onclick="checkAll();"></th></tr>
<tr>
</tr>
<tr> <input type="checkbox" name="pp_check" value="1" onclick="checkOne();"></tr>
<!--<tr> <input type="checkbox" name="pp_check" value="2" onclick="checkOne();"></tr>
<tr> <input type="checkbox" name="pp_check" value="3" onclick="checkOne();"></tr>
<tr> <input type="checkbox" name="pp_check" value="4" onclick="checkOne();"></tr> -->
</table>
</body>
</html> 
```

它也可以正常工作，但在某些情况下只会`<td>`出现一个复选框，这会阻止代码工作。请给出一些解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:11:53.120

尝试这个

```
<script type="text/javascript" language="javascript">

        var pp_check = document.getElementsByName('pp_check');
        var pp_checkall = document.getElementsByName('pp_checkall')[0];

        function checkAll() {
            if (pp_checkall.checked == true) {
                for (i = 0; i < pp_check.length; i++)
                    pp_check[i].checked = true;
            }
            else {
                for (i = 0; i < pp_check.length; i++)
                    pp_check[i].checked = false;
            }
        }

        function checkOne() {
            var pp_check = document.getElementsByName('pp_check');
            for (i = 0; i < pp_check.length; i++) {
                if (pp_check[i].checked == false)
                    pp_checkall.checked = false;
            }
        }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:19:13.577

您也可以使用 jQuery。

```
 $('input[name="pp_checkall"]').change(function () {
        $('input[name=pp_check]').attr('checked', this.checked);
    });

    $('input[name="pp_check"]').change(function () {
        $('input[name="pp_checkall"]').prop(
          'checked', 
          $('input[name=pp_check]:not(:checked)').length === 0 ? true : false 
        );
    }); 
```

演示：http: [//jsfiddle.net/gPeh8/1/](http://jsfiddle.net/gPeh8/1/)

# r - 在 R 中为 affymetrix 数据编制索引

> ID：11947247
> 
> 赞同：1
> 
> 时间：2012-08-14T06:57:53.647
> 
> 标签：r, indexing

我对 R 相当陌生，尽管我经历了许多教程，但在索引方面存在问题。例如，在以下情况下，我有一个带有相应重要 p 值的探针名称列表，如下所示

```
 unique.et.                                            pBH
1     AFFX-r2-P1-cre-5_at                                   1.646105e-14
2     AFFX-r2-P1-cre-3_at                                   1.752547e-14
3     AFFX-r2-Ec-bioD-5_at                                  2.426254e-14
127            267584_at                                    1.820809e-14
149            267562_at                                    1.646105e-14
200            267511_at                                    1.880226e-14 
```

下面是原始矩阵，我必须从中仅提取具有显着 p 值的探针，以便获得信号强度值。

```
AFFX-r2-P1-cre-2_at 12.16271 12.70304 12.16271 12.70304 12.16271
AFFX-r2-P1-cre-3_at 12.70304 12.28280 12.35039 12.38397 12.36304
AFFX-r2-P1-cre-5_at 12.28280 12.35039 12.38397 12.36304 12.16271 
```

因此，如果我考虑名为 AFFX-r2-P1-cre-5_at 且 p 值为 1.646105e-14 的探针，我将需要从其他探针列表中提取相同的探针以及强度值。我试过但做不到。

我还想问大家是否有带有清晰示例的教程，以便我理解这个概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:39:36.233

```
#data.frame with significant cases
df1 <- read.table(text="      unique.et.                                            pBH
1     AFFX-r2-P1-cre-5_at                                   1.646105e-14
2     AFFX-r2-P1-cre-3_at                                   1.752547e-14
3     AFFX-r2-Ec-bioD-5_at                                  2.426254e-14
127            267584_at                                    1.820809e-14
149            267562_at                                    1.646105e-14
200            267511_at                                    1.880226e-14",header=T,stringsAsFactors=FALSE)

#all data
df2 <- read.table(text="AFFX-r2-P1-cre-2_at 12.16271 12.70304 12.16271 12.70304 12.16271
AFFX-r2-P1-cre-3_at 12.70304 12.28280 12.35039 12.38397 12.36304
AFFX-r2-P1-cre-5_at 12.28280 12.35039 12.38397 12.36304 12.16271",header=F,stringsAsFactors=FALSE)

#select cases of df2 that occur in df1
df2[df2$V1 %in% df1$unique.et,]
#                   V1       V2       V3       V4       V5       V6
#2 AFFX-r2-P1-cre-3_at 12.70304 12.28280 12.35039 12.38397 12.36304
#3 AFFX-r2-P1-cre-5_at 12.28280 12.35039 12.38397 12.36304 12.16271 
```

# java - 如何使用 getElementsByTagName 获取值

> ID：11947248
> 
> 赞同：5
> 
> 时间：2012-08-14T06:58:00.573
> 
> 标签：java, xml, w3c

如何使用 getElementsByTagName 获取标签名称的值。我的 XML 文件是

```
<parent>
<method>name</method>
....
....
</parent> 
```

在这里，我想单独考虑方法的价值。我使用了以下代码，但我得到了对象

```
File fXmlFile = new File(FILE_XML);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);
doc.getElementsByTagName("method").toString(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-14T07:02:22.437

`doc.getElementsByTagName("method")`返回一个[`NodeList`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/NodeList.html)。

你想要其中的第一个，所以你应该使用`doc.getElementsByTagName("method").item(0)`- 它返回一个[`Node`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html).

由此，您可能想要价值；`doc.getElementsByTagName("method").item(0).getTextContent()`应该得到你。

# java - 在图像数组中设置值后检索图像数组的值时出错

> ID：11947249
> 
> 赞同：0
> 
> 时间：2012-08-14T06:58:03.617
> 
> 标签：java

我正在使用以下代码设置具有新值的图像数组的初始 8*8 像素位置，但不幸的是它返回了初始值。示例我将图像数组的初始 8*8 值更改为 16 并构建图像。当我检索该图像并读取前 8*8 值时。我已经看到这些值与图像数组先前的值相同。（在将值设置为 8*8 数组之前）这意味着 16 未分配给图像数组 8*8堵塞

请建议我必须在我的代码中进行的更改

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package testing;

import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;

/**
 *
 * @author pratibha
 */
public class ConstructImage{
    int[][] PixelArray;
    public ConstructImage(){
        try{

      BufferedImage bufferimage=ImageIO.read(new File("C:\\image_1.jpg"));
       int height=bufferimage.getHeight();
       int width=bufferimage.getWidth();
       PixelArray=new int[width][height];
       for(int i=0;i<width;i++){
            for(int j=0;j<height;j++){
                PixelArray[i][j]=bufferimage.getRGB(i, j);
            }
        }

        for(int i=0;i<8;i++){
            for(int j=0;j<8;j++){
           //   System.out.print(PixelArray[i][j]+" , ");
                PixelArray[i][j]=16;
            }
            System.out.println("");
        }

        int[][] NewPixel=PixelArray; 

      BufferedImage bufferImage2=new BufferedImage(width, height,BufferedImage.TYPE_INT_RGB);
          for(int x=0;x<width;x++){
                for(int y=0;y<height;y++){
          bufferImage2.setRGB(x, y,NewPixel[x][y]);
          Color c=new Color(NewPixel[x][y]);
          System.out.println(" , "+NewPixel[x][y]+" , "+c.getRGB());

            }
                System.out.println();
         }

         File outputfile = new File("C:\\img.jpg");
         ImageIO.write(bufferImage2,"jpg", outputfile);

////        ///////////////////////////////////////////////////////////////////
   BufferedImage bufferimage1=ImageIO.read(new File("C:\\img.jpg"));
        int height1=0;
        height1=bufferimage1.getHeight();
        int width1=0;
        width1=bufferimage1.getWidth();
        int[][] PixelArray1=new int[width1][height1];
        for(int i=0;i<width1;i++){
            for(int j=0;j<height1;j++){
                PixelArray1[i][j]=bufferimage1.getRGB(i, j);
            }
        }
        ///////create Image from this PixelArray
        int[][] RetrivePixel=PixelArray1;
         for(int i=0;i<1;i++){
            for(int j=0;j<8;j++){
               //olor c=new Color(PixelArray1[i][j]);
                int var=RetrivePixel[i][j] & 0x00ffffff;
              //  Color v=new Color(PixelArray[i][j]);
                System.out.print(" , "+var+" => "+RetrivePixel[i][j]+" PixelArray "+PixelArray1[i][j]);
            }
            System.out.println();
        }
        System.out.println(Integer.toBinaryString(222));
        System.out.println(Integer.signum(93226268));;
         Color c=new Color(16);
       System.err.println(c.getRGB());
//        System.out.println(c.getRed()+" "+c.getGreen()+" "+c.getBlue()+" "+c.getAlpha());
        System.out.println(c.toString());
        int colorint =-16645630 & 0x00ffffff;//c.getRed()+c.getGreen()+c.getBlue()+c.getAlpha();
        System.out.println(" colorint "+colorint);
        }
        catch(Exception ee){
            ee.printStackTrace();
        }
    }

    public static void main(String args[]){
        ConstructImage c=new ConstructImage();
    }
} 
```

# linq - 将 LInq 与 NHibernate 一起使用时选择了额外的列？

> ID：11947252
> 
> 赞同：1
> 
> 时间：2012-08-14T06:58:10.957
> 
> 标签：linq, nhibernate, nhibernate-mapping, nhibernate-3

我有两节课

```
Public class Foo 
{ 
   int Id {get;set;}
   Email DefaultEmail {get;set;} 
}

Public class Email 
{ 
   string main {get;set;} 
   string backup {get;set;}
   string recover {get;set;}
}

 Public string GetEmail(EnType)
 {
      switch(EnType)
      {
            Case EnType.Type1:
                return this.main;

            // others condition....
      }
 } 
```

我使用组件映射将 Foo 映射到电子邮件。每次只需要一封电子邮件。

当我选择

```
Session.Query.select(x => x.email.getEmail(EnType.Type1)) 
```

生成的 SQL 是

```
select emailType1, emailType2,.... From Foo 
```

而我只期望

```
select emailType1 From Foo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:27:24.347

GetEmail() 在位于 Email 类中的代码中实现。你认为 nhibernate 应该如何知道代码应该做什么？

它只是获取整个电子邮件类（组件），然后让它决定返回什么。

# python - Python日期格式？

> ID：11947253
> 
> 赞同：3
> 
> 时间：2012-08-14T06:58:14.770
> 
> 标签：python, date

我真的希望你能帮我解决这个问题。我有一个 python 程序输出的日期，我需要能够在另一个程序中访问它。

问题是我不知道这个日期是如何格式化的：

```
Format               Date
129893779638930000 - 2012-08-13 17:32:43 
```

它既是日期又是时间，我真的希望有人能认出它的格式，因为我不太了解 python。如果您可以向我展示如何将其转换为 unix 时间戳，则可以加分。

编辑：执行此操作的程序是 Foobar2000 的组件（音乐程序的扩展）。该组件显示在此处：[http](http://www.foobar2000.org/components/view/foo_playcount) ://www.foobar2000.org/components/view/foo_playcount ，它是生成奇数日期/时间戳的 XML 导出功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T07:02:25.220

`129893678626216000`看起来像 1e-8 秒（数十纳秒）内的 unix 时间戳：`1,298,936,786.262,160,00`. 它将代表：

```
>>> from datetime import datetime
>>> datetime.utcfromtimestamp(129893678626216000/1e8)
datetime.datetime(2011, 2, 28, 23, 46, 26, 262160) 
```

**编辑：**但是您的信息“文件时间是一个 64 位值，表示自 1601 年 1 月 1 日上午 12:00 协调世界时 (UTC) 以来经过的 100 纳秒间隔数”告诉我使用：

```
>>> from datetime import datetime, timedelta
>>> datetime(1601, 1, 1, 0, 0, 0) + timedelta(seconds = 129893678626216000/1e7)
datetime.datetime(2012, 8, 13, 21, 44, 22, 621599) 
```

在那里你得到你所期待的。

您还可以将其直接转换为 unix 时间戳（自 1970-01-01 00:00:00 UTC 以来的秒数）：

```
>>> 129893678626216000 / 1e7 - 11644473600
1344894262.6215992 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:18:52.710

似乎是[Windows 文件时间](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx)：

> 文件时间是一个 64 位值，表示自协调世界时间 (UTC) 1601 年 1 月 1 日凌晨 12:00 以来经过的 100 纳秒间隔数。当应用程序创建、访问和写入文件时，系统会记录文件时间。NTFS 文件系统以 UTC 格式存储时间值，因此它们不受时区或夏令时更改的影响。FAT 文件系统根据计算机的本地时间存储时间值。例如，在华盛顿太平洋标准时间下午 3:00 保存的文件在 NTFS 卷上被视为纽约东部标准时间下午 6:00，但在 FAT 卷上被视为纽约东部标准时间下午 3:00。

另请参见[FILETIME 结构](http://msdn.microsoft.com/en-us/library/ms724284(v=vs.85).aspx)。

重要的是，时间可能同时采用 UTC 和本地时区。如果可能有 FAT 文件系统；检查插件是否直接从磁盘读取文件时间而不进行任何转换，以确定您是否需要考虑本地时区。

对于 UTC 案例（[适应 C++ 答案](https://stackoverflow.com/a/6161842/4279)）：

```
WINDOWS_TICK_INTERVAL  = 100e-9 # 100 nanoseconds intervals
SEC_TO_UNIX_EPOCH = (datetime(1970, 1, 1) - datetime(1601, 1, 1)).total_seconds()
# -> 11644473600

def WindowsTickToUnixSeconds(windowsTicks):
    return windowsTicks * WINDOWS_TICK_INTERVAL - SEC_TO_UNIX_EPOCH 
```

要将其转换为`datetime`对象：

```
from datetime import datetime

filetime = 129893779638930000
dt = datetime.utcfromtimestamp(WindowsTickToUnixSeconds(filetime))
print(dt.strftime("%Y-%m-%d %H:%M:%S.%f-00:00"))
# -> 2012-08-14 00:32:43.893000-00:00 
```

它似乎与您问题中的时间相对应：（`2012-08-13 17:32:43-07:00`也许是 PDT）。

要处理过去本地时区（来自 FAT）中文件时间的 DST，您可能需要[pytz library](http://pytz.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:23:00.350

一切都对这个世界感到满意，文件时间就像一个 unix 时间戳，但从 1601 年 1 月 1 日凌晨 12:00 开始测量，所以减去正确的秒数并除以秒会给你一个 unix 时间戳，试试这个：`(FILETIME - 116444736000000000) / 10000000`

# iphone - 如何检查“带有标签的 UITextField”上的值，即按下/触摸或单击了哪个 Textfield 标签？

> ID：11947255
> 
> 赞同：0
> 
> 时间：2012-08-14T06:58:18.560
> 
> 标签：iphone, objective-c, ios, xcode

我有以下代码...

```
for (j=0; j<20; j++) {

    if (j<20) {

    txtField = [[UITextField alloc] initWithFrame:CGRectMake(110, txt_Pos_Y, 100, 15)];
    txtField.borderStyle = UITextBorderStyleRoundedRect;
    txtField.font = [UIFont systemFontOfSize:11];
    txtField.tag = j;
    txtField.placeholder = @"Enter Value";
    txtField.autocorrectionType = UITextAutocorrectionTypeNo;
    txtField.keyboardType = UIKeyboardTypeDefault;

    txtField.returnKeyType = UIReturnKeyDone;
    txtField.clearButtonMode = UITextFieldViewModeWhileEditing;
    txtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
    txtField.delegate = self;
    [scrollView addSubview:txtField];
    [txtField release];      

    txt_Pos_Y  = txt_Pos_Y  + 20; 
    } 
```

该代码创建了 20 个文本字段....当视图加载时，所有文本字段都是可编辑的。现在我想给出值。我想要在哪个文本字段上单击首先，只有那个文本字段是可编辑的，而休息将是不可编辑的。

我给了标签，txtField.tag = j;

现在我无法弄清楚按下或单击了哪个标签？并且无法使我首先单击的 TextField 可编辑，而其余的不可编辑？

我试过这个来检查CalculateMethod() 方法中点击txtField.tag == 1 的条件，但这不起作用。

```
-(void)CalculateMethod {
UITextField *txtFld = (UITextField*)[scrollView viewWithTag:1];

// I want if TextFeild "txtField.tag == 1"  is clicked then Enter this condition 
if(txtField.tag == 1){      
double a;
a = Var_sqFt * Var_sqMtr;
txtFld.text = [[NSString alloc] initWithFormat:@"%.4f",a];
} 

// I want if TextFeild "txtField.tag == 2"  is clicked then Enter this condition 
if(txtField.tag == 2){     // Here I want Only that 
double a;
a = Var_sqFt * Var_sqMtr;
txtFld.text = [[NSString alloc] initWithFormat:@"%.4f",a];
} 

} 
```

所以我有2个问题

1.  我想在哪个文本字段上单击首先，只有 TextField 是可编辑的，而 Rest 是 NonEditable ，该怎么做？

2.  哪个 TextField 被点击/触摸/按下，就像我在 CalculateMethod() 方法中尝试过的一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:10:53.087

**检查哪个字段开始编辑**

您应该查看`Delegate`您`UITextField`的 s 的方法。只需将所有字段的委托设置为`self`即创建文本字段的控制器。然后实现`UITextField`委托方法

```
- (void)textFieldDidBeginEditing:(UITextField*)textField; 
```

在方法中检查传入参数的标签`textField`以执行您的任务。

**启用禁用字段**

将所有字段放在一个 中`NSMutableArray`，迭代数组并仅启用与委托参数匹配的字段。禁用其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:16:51.900

`[scrollView viewWithTag:1]`将始终为您提供带有标签的子视图，该标签`1`与您的代码片段后面的 textView 相同。如果你想通过所有的 textViews 你可以做到这一点

```
for (UIView* aSubview in [self.scrollView subviews])
{
    if ([aSubview isKindOfClass:[UITextView class]])
    {
            UITextView * typedTextViewSubview = aSubview;
            switch (typedTextViewSubview.tag)
            {
            case 1 : {
               double a;
               a = Var_sqFt * Var_sqMtr;
               typedTextViewSubview.text = [[NSString alloc] initWithFormat:@"%.4f",a];

             }
       .......
            }

    }
} 
```

And you do not really need `if (j<20)` check as you already have given 20 as conditional upper limit of `j` iteration.

# scala - 为什么没有找到平凡的隐含？

> ID：11947261
> 
> 赞同：2
> 
> 时间：2012-08-14T06:58:38.253
> 
> 标签：scala, compiler-errors, implicits

为什么没有找到隐式，即使在一些微不足道的事情中：

```
class Wrapper[+A](data: Vector[A]) {
  def sum[B >: A](implicit num: Numeric[B]) = data.sum
} 
```

`num`不会编译，无需手动传入`data.sum`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:19:23.670

[Scala 规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 7.2 节（第 107 页）指出`implicit parameters are inferred after any type arguments are inferred`. 我相信这是问题所在。

Typer 为`data.sum`-推断出最具体的参数，然后在范围内`A`寻找隐含的参数。`Numeric[A]`他不能用它代替它，`Numeric[B]`因为它`Numeric`是不变的。

# android - 如何在android中将sharedpreferences数据转换为hashmap

> ID：11947262
> 
> 赞同：0
> 
> 时间：2012-08-14T06:58:39.790
> 
> 标签：android, sharedpreferences, android-tablelayout

我创建了如下共享首选项：

```
SharedPreferences preferences = 
    getSharedPreferences("PREF_FILE_NAME",Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit(); 
```

并将值如下所示：

```
editor.putLong(parser.nextText().toString(), i); 
```

我在哪里增加价值。

它保存得很好。

现在我想检索该值，因为我想在表格布局中显示它，但我不知道如何。

那么最简单的方法是什么？有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:03:10.273

迭代`Preferences`使用`Map`.

```
Map<String,?> keys = prefs.getAll(); 
```

然后您可以轻松地使用 Entry 进行迭代，

```
for(Map.Entry<String,?> entry : keys.entrySet()){
   Log.d("map values",entry.getKey() + ": " + 
                                   entry.getValue().toString());            
 } 
```

# c++ - MAC 上的 gmpxx.h 错误

> ID：11947269
> 
> 赞同：2
> 
> 时间：2012-08-14T06:59:45.137
> 
> 标签：c++

我使用了 gmp-4.3.1 库。

使用以下命令在 MAC 上构建库

1.  `./configure --enable-cxx --enable-alloca=reentrant`
2.  `make`
3.  `make check`
4.  `sudo make install`

它给出了结果`gmp.h, gmpxx.h, libgmp.a, libgmpxx.a`

我大量使用了这个库当我在我的项目中使用这个库时，它给出了如下错误

```
gmpxx.h:1366: error: 'mp_get_memory_functions' was not declared in this scope 
```

请帮我。

# java - 如何在 SQL 查询中安全地使用 * 作为通配符

> ID：11947270
> 
> 赞同：6
> 
> 时间：2012-08-14T06:59:49.507
> 
> 标签：java, sql, hibernate

我需要实现一个搜索，用户可以输入 * 作为通配符。他们正在搜索的数据库是 SQL 服务器。我正在考虑将 * 替换为 %：

```
userInput = userInput.replace('*', '%'); 
```

我担心由于我是“手动”执行此操作，因此可能会引入一些错误或安全漏洞。你看到这样做有什么问题吗？有没有图书馆可以为我做这件事？

我使用 Hibernate 作为 ORM 映射器和 Criteria API 来创建查询（如果它有助于回答）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:25:30.037

这正是我们在公司所做的。我们有两种产品，一种像您的示例一样在代码中使用简单替换。另一个非常重的存储过程在“搜索”存储过程本身中执行。

无论哪种方式，我们都没有遇到任何安全问题或用户对系统的投诉。

只是为了显示存储过程布局，但正如您所说的使用 ORM 可能是多余的：

```
CREATE PROC [dbo].[p_aaa]
    @username nvarchar(100) = 'dbo',
    @rows int = 0,
    @name nvarchar(100) = '%'       
AS

SET @name = REPLACE(@name, '*', '%') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:38:12.113

我相信将 * 更改为 % 不会导致任何问题，如果该表中的所有数据基于此搜索值都是公开的。还有[类似的主题](https://stackoverflow.com/a/898461/685962)，其中有更多的正则表达式到 sql 示例。

这将使您的应用程序比使用[数据库供应商特定的正则表达式匹配机制](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_regexp.htm)更加独立。

# c# - 带有 al.exe 的嵌入式资源似乎在其中，但不会再次出现

> ID：11947272
> 
> 赞同：0
> 
> 时间：2012-08-14T07:00:12.113
> 
> 标签：c#, xsd, embedded-resource

我有一个项目（出于各种原因.net 2 框架），我们使用 xsd.exe 从对象生成模式。我们希望将这些模式嵌入到程序集中，以便在验证加载的文件时使用。xsd 文件生成成功。然后我运行 al.exe 将 xsd 转换为程序集，第三阶段是我使用 ilmerge 将此程序集合并到我的主程序集中，以便它可以作为资源使用。我有其他资源，我使用 using vs 将内容类型设置为 EmbeddedResource 的方式嵌入了这些资源，我可以通过调用 GetType().Assembly.GetManifestResourceNames(); 在代码中看到这些资源。我可以在程序集的清单中看到我所追求的资源，这一切看起来都很好（据我所知，不是路径名或大小写问题）。

```
.mresource public MySetup.EmbeddedResources.Mapping.xml      << vs2010 embedded resource
{
 // Offset: 0x00000000 Length: 0x00000C67
}
.mresource public MySetup.EmbeddedResources.Schemas.xsd      << my resource
{
  // Offset: 0x00000C6B Length: 0x00000B47
} 
```

我尝试了各种选项，使用 vs 嵌入相同的文件时可以嵌入，并且无论哪种方式在清单中都没有明显差异。

知道为什么`GetType().Assembly.GetManifestResourceNames();`不返回我的资源吗？

* * *

编辑：哎呀，原来这是严重的大脑冻结的结果。它实际上是在工作，但是因为我的单元测试 dll 引用了旧程序集，所以它没有获取合并的资源...... Dooh！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:13:46.000

哎呀，原来这是严重的大脑冻结的结果。它实际上正在工作，但是因为我的单元测试 dll 引用了旧程序集，所以它没有获取合并的资源

# android - 使用搜索功能在 Android 中创建自定义标题栏

> ID：11947290
> 
> 赞同：1
> 
> 时间：2012-08-14T07:01:40.400
> 
> 标签：android

我对 Android 开发非常陌生，并且仍在为一些非常基本的事情而苦苦挣扎。我无法弄清楚的一件事是如何为具有 Holo Light 主题的应用程序创建自定义标题栏。

![在此处输入图像描述](../Images/f8024bf10f7063ae18c6d77bfa9db602.png)

我想放置一个搜索按钮，如第一张图片所示，单击该按钮会打开一个小文本区域以键入搜索查询，如第二张图片所示。

尽管这个问题似乎已经发布了很多次，但似乎是针对较旧的 Android 版本。解释我如何做到这一点或示例将是朝着正确方向的一个很好的推动。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:59:23.877

找到了。

[http://www.edumobile.org/android/android-development/action-bar-search-view/](http://www.edumobile.org/android/android-development/action-bar-search-view/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:50:36.727

我推荐你使用：[ActionBarSherlock](http://actionbarsherlock.com/)

# udp - 在 Windows 7 下使用 boost::asio 接收 UDP 广播数据包

> ID：11947294
> 
> 赞同：2
> 
> 时间：2012-08-14T07:01:58.787
> 
> 标签：udp, boost-asio, ipv4

如果这已经在某个地方得到了回答，我很抱歉，但我似乎无法在这里找到适合我一生的答案。

我的问题是：我正在开发一个带有以太网接口的嵌入式应用程序。即使我不知道设备的 IP，我也需要能够在网络上发现这些设备并配置它们的 IP。我的预期方法如下：

1.  从 PC 发送包含指定命令的广播数据包 (255.255.255.255)（来自源端口 HOST_PORT，目标端口 DEVICE_PORT）。
2.  让设备在广播数据包中侦听该命令。然后设备用它自己的广播数据包从端口 DEVICE_PORT 到端口 HOST_PORT 进行响应。
3.  我的应用程序收到包含一系列信息（例如序列号）的回复数据包，并枚举了网络上的所有设备。

我已经（1）和（2）工作了，当尝试在 PC 上接收广播数据包时出现问题。我已经用 Wireshark 验证了数据包实际上正确地到达了网络，所以我对 boost 的使用一定有问题。

这是我正在使用的代码片段：

```
 using namespace boost::asio;

    io_service my_io_service;                           // Create socket and IO service, bind socket to endpoint.
    ip::udp::socket socket(my_io_service);
    socket.open(ip::udp::v4());

    ip::udp::endpoint localEndpoint(ip::address_v4::any(), HOST_PORT );
    ip::udp::endpoint remoteEndpoint(ip::address_v4::broadcast(), DEVICE_PORT );

    socket.bind( localEndpoint );
    socket.connect( remoteEndpoint );
    socket_base::broadcast option(true);
    socket.set_option(option);

    TXMessage.str("");
    TXMessage << "RECQRE" << (i++);
    socket.send(buffer(TXMessage.str().c_str(), TXMessage.str().length()));
    len = socket.receive(buffer(RXBuffer, (BUFFER_SIZE-1))); 
```

该应用程序只是锁定了 socket.recieve(...) 调用。任何人都可以看到此代码或配置的明显问题吗？我相信我正在适当地绑定和连接，并且我知道我正在设置“广播”选项。

或者，如果您认为我的方法有误，我很高兴能指出我的设备识别问题的替代解决方案的方向。

**编辑：** 我已经检查过的事情：

*   我绑定到 INADDR_ANY
*   Windows 防火墙已禁用
*   该应用程序已经过测试，没有运行 Wireshark
*   远程设备运行良好（我有一个串行调试连接来检查这个）

# linux - 如何生成有效期少于 1 天的 openssl 证书？

> ID：11947295
> 
> 赞同：34
> 
> 时间：2012-08-14T07:02:10.883
> 
> 标签：linux, openssl

我正在尝试在 Linux 中使用如下所示的 openssl 命令创建 CA 签名的最终实体证书：

```
# openssl genrsa -des3 -out clientkey.pem 2048
# openssl req -new -key clientkey.pem -out clientcert.csr
# cp clientkey.pem clientkey.pem.org
# openssl rsa -in clientkey.pem.org -out clientkey.pem
# openssl x509 -req -days 1 -in clientcert.csr -out clientcert.pem -CA cacert.pem -CAkey cakey.pem -CAcreateserial 
```

是否可以以小时而不是天为单位指定到期时间？我需要生成证书，比如 1 小时到期时间，以进行一些测试。

Openssl 命令似乎支持一些选项来指定开始日期和结束日期，但我无法弄清楚如何使用它。（我假设 enddate 可能支持指定日期和时间）。

```
#openssl x509 -req -startdate 120814050000Z -enddate 120814060000Z -in clientcert.csr -out clientcert.pem -CA cacert.pem -CAkey cakey.pem -CAcreateserial

unknown option 120814050000Z
usage: x509 args
.
.
-startdate      - notBefore field
-enddate        - notAfter field
.
.
-days arg       - How long till expiry of a signed certificate - def 30 days 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-15T07:04:22.237

x509 命令的 -startdate 和 -enddate 选项是显示选项。您可以使用 ca 命令设置特定的开始和结束时间，而不是对证书进​​行签名。

尝试这样的事情：

```
openssl ca -config /etc/openssl.cnf -policy policy_anything -out clientcert.pem -startdate 120815080000Z -enddate 120815090000Z -cert ca.pem -keyfile cakey.pem -infiles clientcert.csr 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-05-22T04:03:09.367

**第1步。**安装假时间

```
sudo apt-get install faketime 
```

**第2步。**在当前日期前一天生成过期证书。

```
faketime 'last friday 5 pm' /bin/bash -c 'openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 6 -nodes' 
```

**Step-3**验证证书有效期

```
openssl x509 -noout -text -in cert.pem 
```

[![证书有效期 - 屏幕截图](../Images/fafce252188962e36d8423af3449bea5.png)](https://i.stack.imgur.com/RM0EJ.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-18T00:49:57.240

或者这是我发现的另一种工作方式

假设我希望我的证书在 10 分钟内过期作为测试

> 当前日期是 2 月 17 日
> 当前时间是下午 4:40
> 
> 首先，我将系统日期设置为 -1 天：2 月 16 日
> 我将系统时钟设置为 +10 分钟：下午 4:50

我创建我的证书使用`openssl x509`在 1 天内到期，这实际上意味着在今天到期`Feb 17th`

```
openssl x509 -req -days 1 -in clientcert.csr -signkey cert.key -out ssl.crt 
```

然后我将我的系统时钟和时间重置为实际的日期和时间，瞧，你的证书将在 10 分钟后过期！

显然不是真正的做事方式，但创建自签名证书以供开发人员使用既好又容易。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-26T23:11:52.563

尝试[gossl](https://securitykiss.com/resources/tutorials/gossl_project/)，它允许以各种时间单位指定证书有效性开始日期和持续时间。

我开发它是为了克服命令行 openssl 的限制。该工具是轻量级的，在 Go 中实现，没有依赖关系，在 MIT 许可下。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2019-04-12T08:37:02.213

您可以将`-days`选项设置为 0：

```
openssl x509 -req -days 0 -in clientcert.csr -signkey cert.key -out ssl.crt 
```

这将创建一个与`notBefore`当前`notAfter`时间相等的证书（即您的证书将立即过期）。

# protobuf-net - protobuf-net：C# 中的继承，但不是有线格式

> ID：11947299
> 
> 赞同：1
> 
> 时间：2012-08-14T07:02:19.230
> 
> 标签：protobuf-net

我知道 protobuf 不支持继承，并且由于我在另一端使用 protoc-c，所以我也不想使用任何扩展。但是，我坚持使用依赖于继承的 C# 模型：

```
class Header {
     public int version { get; set; }
}

class Message : Header {
     public String message { get; set; }
} 
```

我试图将继承转换为有线格式的封装，如下所示：

```
[ProtoContract]
class Header {
     [ProtoMember(1)]
     public int version { get; set; }
}

[ProtoContract]
class Message : Header {
     [ProtoMember(1)]
     public Header Header { get { return this; } set { } }

     [ProtoMember(2)]
     public String Message { get; set; }
} 
```

然后我收到“意外的子类型”错误提示我： [为什么我必须使用 [ProtoInclude]？](https://stackoverflow.com/questions/3100207/why-i-have-to-use-protoinclude)

我觉得我的情况与上述问题的情况不同，所以想再次询问我的具体情况，我试图从内到外继承，如果没有ProtoInclude，这是否不可能？

如果没有，我将如何在 v2 中做到这一点？

----- 已编辑 ------

我在 C（使用 protobuf-c）端的 proto 文件是这样的：

```
message Header {
    optional int32 version = 1;
}

message Message {
    optional Header header = 1;
    optional string message = 2;
} 
```

我不想将 Message 放在 Header 中，也不想使用网络继承功能。这种格式使我能够轻松地将内容添加到 Header 消息中，而无需更改 Message 消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:41:49.180

通过编辑：不，不直接支持该场景 - protobuf-net 高度了解继承，并且不太愿意忽略它。这似乎是一个不寻常的情况，我并不*急于*添加它，而且我认为`return this;`getter 和 no-op setter 会导致额外的下游并发症（不是错误，因为它*预计*不会支持），这可能很难纠正。

我建议使用与您要表示的结构相似的模型。如果这不能*直接*实现，您可以使用*代理*。以下工作并保留了您预期的线结构和现有的类型继承：

```
using ProtoBuf;
using ProtoBuf.Meta;

// DTO model - maps directly to the wire layout
[ProtoContract]
class HeaderDto
{
    [ProtoMember(1)]
    public int Version { get; set; }
}

[ProtoContract]
class MessageDto
{
    [ProtoMember(1)]
    public HeaderDto Header { get { return header;}}
    private readonly HeaderDto header = new HeaderDto();

    [ProtoMember(2)]
    public string Message { get; set; }

    // the operators (implicit or explicit) are used to map between the
    // primary type (Message) and the surrogate type (MessageDto)
    public static implicit operator Message(MessageDto value)
    {
        return value == null ? null : new Message {
            version = value.Header.Version, message = value.Message };
    }
    public static implicit operator MessageDto(Message value)
    {
        return value == null ? null : new MessageDto {
            Message = value.message, Header = { Version = value.version } };
    }
}

// domain model
class Header
{
    public int version { get; set; }
}

class Message : Header
{
    public string message { get; set; }
}

// example
static class Program
{
    static void Main()
    {
        // configure the surrogate
        RuntimeTypeModel.Default.Add(typeof(Message), false)
                        .SetSurrogate(typeof(MessageDto));
        Message msg = new Message { version = 1, message = "abc" };
        var obj = Serializer.DeepClone(msg);
    }
} 
```

# c# - 使用 OpenXML SDK 2.0 重新启动页眉中的页码

> ID：11947301
> 
> 赞同：5
> 
> 时间：2012-08-14T07:02:23.427
> 
> 标签：c#, .net, openxml, openxml-sdk

我不知道如何在使用 OpenXML SDK 2.0 的部分的特定点开始页码。当我使用 OpenXML Productivity Tool 反映文档中的标题时，我看到了以下内容：

```
<w:hdr xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 wp14">
  <w:p w:rsidR="00FC0BC9" w:rsidP="00FC0BC9" w:rsidRDefault="005F46AD">
    <w:pPr>
      <w:pStyle w:val="Header" />
      <w:ind w:right="360" />
      <w:jc w:val="right" />
    </w:pPr>
    <w:r>
      <w:t xml:space="preserve">I-1 Page </w:t>
    </w:r>
    <w:r>
      <w:fldChar w:fldCharType="begin" />
    </w:r>
    <w:r>
      <w:instrText xml:space="preserve"> PAGE  \* Arabic  \* MERGEFORMAT </w:instrText>
    </w:r>
    <w:r>
      <w:fldChar w:fldCharType="separate" />
    </w:r>
    <w:r w:rsidR="00C62387">
      <w:rPr>
        <w:noProof />
      </w:rPr>
      <w:t>1</w:t>
    </w:r>
    <w:r>
      <w:fldChar w:fldCharType="end" />
    </w:r>
  </w:p> 
```

看起来它正在使用一组 Runs 构建该字段，然后通过包含一个 Text 值为“1”的 Run 来将此标题的页码编号设置为 1——我应该提到使用此标题的部分是 on第 4 页。

但是，即使我为自己的文档使用以下代码生成等效项，Word 仍坚持从当前页面开始页码。例如，第 4 页从第 4 页开始编号，而所需的行为是第 4 页从第 1 页开始编号。

```
var headerPart = mainDocument.AddNewPart<HeaderPart>(GetHeaderIDFor(actWithScenes.Act, scene));

var header = new Header();
headerPart.Header = header;

header.Append(new Paragraph(
  new ParagraphProperties(new Justification { Val = JustificationValues.Right }),
  new Run(new Text(staticText) { Space = SpaceProcessingModeValues.Preserve }),
  new Run(new FieldChar { FieldCharType = FieldCharValues.Begin }),
  new Run(new FieldCode { Space = SpaceProcessingModeValues.Preserve, Text = " PAGE  \\* Arabic  \\* MERGEFORMAT " }),
  new Run(new FieldChar { FieldCharType = FieldCharValues.Separate }),
  new Run(new RunProperties(new NoProof()), new Text("1")),
  new Run(new FieldChar { FieldCharType = FieldCharValues.End })
)); 
```

这是我添加分节符的代码，它*仍然*不会重新启动页码：

```
public static Paragraph AppendSectionBreak(Body body, string headerID = null, string footerID = null) {
   var sectionProperties = new SectionProperties();

   if (null != headerID) {
      sectionProperties.Append(new HeaderReference { Id = headerID });
   }

   if (null != footerID) {
      sectionProperties.Append(new FooterReference { Id = footerID });
   }

   var paragraph = new Paragraph(new ParagraphProperties(sectionProperties));

   body.Append(paragraph);

   return paragraph;
} 
```

那么，如何以任意值开始节标题的页码编号？我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T17:48:49.097

我终于想通了。诀窍是使用以下代码：

```
string headerID = "YOUR_HEADER_ID";
int pageNumberStart = 1

var paragraph = new Paragraph(
   new ParagraphProperties(
      new SectionProperties(
         new HeaderReference { Id = headerID },
         new PageNumberType { Start = pageNumberStart }
      )
   )
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T05:11:10.943

您必须插入一个SectionBreak。

这是一个很好的简短视频，解释了如何从特定页面开始页码。

[http://www.youtube.com/watch?v=NGzz2ZmLrFw](http://www.youtube.com/watch?v=NGzz2ZmLrFw)

# java - 实体管理器 - “云就绪”、“图表”、“自我验证”

> ID：11947305
> 
> 赞同：2
> 
> 时间：2012-08-14T07:02:51.490
> 
> 标签：java, entity

我正在寻找具有以下功能的“实体管理器”（见列表）。

我觉得奇怪的是，有这么多软件项目的核心是 UI 和业务规则，而不是聪明的实体管理，但我还没有看到一个单一的实体管理系统是“标准”。
哦，我见过一些，但没有一个接近下面的功能列表。最值得注意的是，核心经常缺少级联和验证，水平缩放和缓存失效通常作为“学生练习”而图表性质通常受限于父/子，或者，如果幸运的话，受限于 DAG （有向无环图）。

我缺少什么聪明的东西吗？还是我注定要自己写这个东西——就像其他人一样（并且可能因为时间限制而满足于不太理想的状态）？

以下是功能列表，至少在我看来，这些功能必须融入实体管理的“核心”才能真正正常工作：

1.  基于图：关系是第一级公民，两个节点之间的多重关系（标记图），可以计算生成树和闭包。
2.  数据库绑定 - 或者更确切地说，不是内存绑定。可以在内存中保存缓存，但必须能够轻松包含 100m 实体和关系。
3.  水平扩展——这意味着它知道如何从多个应用服务器访问数据库、使用锁定（乐观或悲观）并使来自另一个应用服务器的更新缓存无效。
4.  支持事务性工作 - 通过在内存或数据库中收集事务。
5.  在单个事务的范围内支持可插入的业务规则级联（例如，如果 A 已更改，则 B 也必须更改）
6.  支持可插入验证（例如，如果 B 存在，则不能删除 A）。
7.  支持可插拔授权（例如用户U1不能改变A/用户U1不能改变A，因为这会导致B改变[级联]而用户U1不能改变B）。
8.  发出更改事件/维护更改日志（例如，可以在更改后启动工作流）。
9.  元数据（如果存在）应该可以通过“数据”而不是代码进行配置。
10.  无需停机升级（“云就绪”，对吗？）
11.  纯Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:08:56.977

我没有亲自使用过这个 - 但从我读过的内容来看， [neo4j](http://neo4j.org/)可能符合您的所有要求

# iphone - 具有多个根对象的 Restkit 对象映射

> ID：11947306
> 
> 赞同：2
> 
> 时间：2012-08-14T07:03:00.757
> 
> 标签：iphone, objective-c, cocoa-touch, restkit

我有一个 Web 服务，它返回以下格式的 JSON：

```
{
"client": {
         "firstName": "Aaron"
         },
"error": {
         "code":""
         }
} 
```

我正在restkit中设置映射。我不断收到以下错误：

`Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "Could not find an object mapping for keyPath: ''" UserInfo=0x5961f0 {=RKObjectMapperKeyPath, NSLocalizedDescription=Could not find an object mapping for keyPath: ''}`

这是我设置映射的方式：

```
 [[RKObjectManager sharedManager].mappingProvider setMapping:[Client objectMapping] forKeyPath:@"client"];
    [[RKObjectManager sharedManager].mappingProvider setMapping:[ErrorObject objectMapping] forKeyPath:@"error"]; 
```

客户端映射：

```
+(RKObjectMapping*) objectMapping {
   RKObjectMapping* responseObjectMapping = [RKObjectMapping mappingForClass:[Client class]];
   [responseObjectMapping setRootKeyPath:@"client"];
   [responseObjectMapping mapKeyPathsToAttributes:
    @"firstName", @"firstName",
    nil];
   return responseObjectMapping;
} 
```

错误映射：

```
+(RKObjectMapping*) objectMapping {
   RKObjectMapping* responseObjectMapping = [RKObjectMapping mappingForClass:[ErrorObject class]];
   [responseObjectMapping setRootKeyPath:@"error"];
   [responseObjectMapping mapKeyPathsToAttributes:
    @"code", @"code",
    nil];
   return responseObjectMapping;
} 
```

并像这样调用服务：

```
//Send initial load request
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[@"/getdetails" stringByAppendingQueryParameters:params] usingBlock:^(RKObjectLoader *loader) {
    loader.delegate = self;
    loader.userData = INITIAL_LOAD_REQUEST;
}]; 
```

* * *

**编辑：**

我通过以下建议解决了我的问题，并将我的映射从 init 方法移动到在对象加载器块中设置它，如下所示：

```
 //Send initial load request
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[@"/getdetails" stringByAppendingQueryParameters:params] usingBlock:^(RKObjectLoader *loader) {
    loader.delegate = self;

    //set mapping explicitly
    RKObjectMappingProvider *provider = [[RKObjectMappingProvider alloc] init];
    [provider setMapping:[Clien objectMapping] forKeyPath:@"client"];
    [provider setMapping:[ErrorObject objectMapping] forKeyPath:@"error"];
    [loader setMappingProvider:provider];

    loader.userData = INITIAL_LOAD_REQUEST;
}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:02:41.207

删除线条

```
[responseObjectMapping setRootKeyPath:@"client"]; 
```

和

```
[responseObjectMapping setRootKeyPath:@"error"]; 
```

# javascript - 如何停止功能

> ID：11947311
> 
> 赞同：0
> 
> 时间：2012-08-14T07:03:23.273
> 
> 标签：javascript, jquery, loops, recursion

在这里，我找到了循环（递归函数）延迟的示例并用于其自身目的。问题是成功添加 div 后我需要停止循环，但这里是递归函数，因此 break 会引发错误。

我试过这样的事情：

```
(function myLoop(i){
    console.log($("input[name='show']").is(':visible'));
    if($("input[name='show']").is(':visible'))
        return false;
    setTimeout(function(){
        $.getScript('index.php?ping=true', function(data){
            if(ping){
                $('#input').append('<input width="320" type="image" height="240" border="0" src="http://'+url+':'+port+'/?up" name="show">');
            }
        });
        if (--i) myLoop(i);
    }, 7000)
})(10); 
```

但它仅在添加第二个 div 后才会停止。据我了解，我需要以某种方式使用回调 if?

![在此处输入图像描述](../Images/5ddf8e34ee911fb8b717bfbe98c07408.png)

**更新：** 自己解决了这个问题，只是添加了 if (--i) myLoop(i); 到 getscript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:20:01.977

更好的方法可能是再次调用该函数，如果它确实失败了，只需设置一个限制或类似的东西：

```
var i=0, limit=10;

function getSomething() {
    if (!$("input[name='show']").length) {
        var XHR = $.getScript('index.php?ping=true');
        XHR.done(function(data){
            if(ping){
                $('#input').append('<input width="320" type="image" height="240" border="0" src="http://'+url+':'+port+'/?up" name="show">');
            }
        }).fail(function() {
            if (i<limit) setTimeout(getSomething, 7000);
            i++;
        });
    }
});    

setTimeout(getSomething, 7000); 
```

检查元素是否存在真的不是必需的，因为它可能不会存在，直到函数不再失败等。另外，你从哪里得到变量 ping、url 和 port，因为它们没有在任何地方定义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:07:17.643

您需要存储对您的`setTimeout`和使用的引用`clearTimeout`。

```
var timeout = setTimeout(function(){
    if (success) {
        clearTimeout(timeout); 
    }
}); 
```

# php - Open Graph : Java Script : 必须使用主动访问令牌来查询有关当前用户的信息

> ID：11947313
> 
> 赞同：-1
> 
> 时间：2012-08-14T07:03:32.997
> 
> 标签：php, javascript, facebook-opengraph

谁能告诉我下面的开放图形调用代码有什么问题。

我尝试过使用应用令牌、用户令牌并且每次响应我时都没有任何令牌

{"error":{"message":"必须使用活动访问令牌来查询当前用户的信息。","type":"OAuthException","code":2500}}

我已经使用 fb 调试器验证了应用令牌、用户令牌和我的代码

```
<?php
$appId = '****************';
$appSecret = '*************************';
$appNameSpace = 'og_loctest';

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
        "client_id=" . $appId .
        "&client_secret=" . $appSecret .
        "&grant_type=client_credentials";
$response = file_get_contents($token_url);

$params = null;
parse_str($response, $params);
$access_token = $params['access_token'];
?>

<html xmlns:og="http://ogp.me/ns" xmlns:fb="http://www.facebook.com/2008/fbml" lang="en">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# og_loctest: http://ogp.me/ns/fb/og_loctest#">
  <meta property="fb:app_id" content="<?php echo $appId;?>" /> 
  <meta property="og:type"   content="og_loctest:properties" /> 
  <meta property="og:url"    content="http://nirav-metronew.kwetoo.com/fbtest/" /> 
  <meta property="og:title"  content="Sample Properties" /> 
  <meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" />
  <title>OG Tutorial App</title>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : "<?php echo $appId;?>",
        status: true,
        cookie: true,
        xfbml: true,
        frictionlessRequests: true,
        useCachedDialogs: true,
        oauth: true
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));

    function fblogin()
    {
         FB.login(function(response) {
           if (response.authResponse) {
             postProperties();
           }
         },{scope: 'email,offline_access,publish_stream,publish_actions'});
    }

      function postProperties()
      {

          FB.api(
            '/me/og_loctest:post',
            'post',
            { properties: 'http://nirav-metronew.kwetoo.com/fbtest/',access_token:"<?php echo $access_token;?>"},
            function(response) {
               if (!response || response.error) {
                  alert('Error occured');
               } else {
                  alert('Facebook open graph tested! Action ID: ' + response.id);
               }
            });
      }  
  </script>
</head>
<body>
  <form>
    <input type="button" value="Post properties" onclick="fblogin()" />
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:34:13.127

> 谁能告诉我下面的开放图形调用代码有什么问题。

你的脚本逻辑是有缺陷的——因为你混淆了客户端发生了什么，服务器端发生了什么，以及*何时发生*。

```
 FB.api(
        '/me/og_loctest:post',
        'post',
        { properties: 'http://nirav-metronew.kwetoo.com/fbtest/',
          access_token:"<?php echo $access_token;?>"}, 
```

您在 FB.login 的回调中调用此客户端。如果用户刚刚登录，那么*之前已经在您的服务器上运行的*PHP无法知道导致客户端登录的当前访问令牌。PHP 无法展望未来……所以无论最终在这个地方推出什么，它肯定不会是你认为的当前访问令牌。

但是 JS SDK 完全有能力处理它自己的访问令牌，因此您不必将它作为参数显式传递给此 API 调用——只需将其`access_token:"…"`完全取出即可。

# c# - 如何在 Windows 窗体中居中对齐标题栏文本？

> ID：11947314
> 
> 赞同：7
> 
> 时间：2012-08-14T07:03:35.343
> 
> 标签：c#, winforms

我正在开发一个 Windows 窗体应用程序。我想将文本对齐到中心或说到表单标题栏的右侧。我该怎么做 ？？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-14T07:19:12.767

可以使用自定义表单来完成 - 您必须创建自己的标题栏。见 V4Vendettas 评论；

其他方法（[链接](http://www.codeproject.com/Questions/260240/Windows-Form-Title-Bar-Text-alignment)） - 是为表单调整大小创建自己的处理程序并在那里插入后续代码。它将从文本的左侧大小添加适当数量的空格。但是，您必须添加 form.Refresh() 并在 form.Load 中调用该方法；你的窗口也会有“...”作为任务栏中的文本。

```
private void UpdateTextPosition()
{
    Graphics g = this.CreateGraphics();
    Double startingPoint = (this.Width / 2) - (g.MeasureString(this.Text.Trim(), this.Font).Width / 2);
    Double widthOfASpace = g.MeasureString(" ", this.Font).Width;
    String tmp = " ";
    Double tmpWidth = 0;

    while ((tmpWidth + widthOfASpace) < startingPoint)
    {
       tmp += " ";
       tmpWidth += widthOfASpace;
    }

    this.Text = tmp + this.Text.Trim();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:10:30.797

如果它是控件内的文本（如标签），则可以编辑名为“TextAlign”的属性以在 Windows 窗体设计器中完成所需的操作。

或以编程方式，

```
Label.TextAlign = System.Drawing.ContentAlignment.MiddleCenter; 
```

如果您正在谈论对齐标题栏的文本，则无法通过 Winforms 做到这一点。你将不得不使用这样的东西：http: [//www.codeproject.com/Articles/93959/WinForm-Extended](http://www.codeproject.com/Articles/93959/WinForm-Extended)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T18:06:01.573

```
 Graphics g = this.CreateGraphics();
        double fw = this.Width; // form width
        double tw = g.MeasureString(this.Text.Trim(), this.Font).Width; \\ text width
        double rp = (fw - tw) / 2;
        int tt = Convert.ToInt32(rp); 
        string st = " ";
        st = st.PadRight(tt / 3);
        this.Text = st + this.Text.Trim(); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-08-16T10:24:00.020

Inside Windows Form Designer. Make the changes like `this.lable1.AutoSize = false`;

Then:

```
this.label1.TextAlign = System.Drawing.ContentAlignment.MiddleRight; 
```

# mergesort - 为什么归并排序中的归并操作是 O(n)？

> ID：11947315
> 
> 赞同：2
> 
> 时间：2012-08-14T07:03:52.847
> 
> 标签：mergesort

> 对于合并排序分治操作，自底向上合并阶段需要多少时间？我的导师说它是线性的，因此它将是`O(n)`。但我没明白。它将如何是线性的？

合并操作如何是线性的`O(n)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:20:00.353

两个数组的合并操作，是扫描数组并选择两个数组中的最低值/最高值。

所以你有了

```
a: [1, 3, 6, 7]
b: [4, 5, 7, 8] 
```

你像这样比较（某种伪代码）

```
indexA = 0;
indexB = 0;
auxilaryArray = [];
indexAux = 0;

while true 
   if indexA > len(a)-1 or indexb > len(b) -1  
       break
   # you are cherry picking one from the two array which is lesser
   # until any one of these array exausts
   if(a[indexA] > b[indexB])
       auxilaryArray[indexAux++] = b[indexB++]
   else
       auxilaryArray[indexAux++] = a[indexA++]

#append the remaining array 
while indexA < len(a)
    auxilaryArray[indexAux++] = a[indexA++]

#appends the remaining array
while indexB < len(b)
    auxilaryArray[indexAux++] = b[indexB++] 
```

你看如果数组`a[k]`，*三个循环的迭代总和*`b[m]`将是。*`k+m`*

 ** * *

如果

```
a: [1, 3, 6, 7]
b: [4, 5, 7, 8] 
```

这是第一个循环：

```
(0, 0), (1, 0), (2, 0), (2, 1), (2, 2), (3, 2) # 6 iterations; array a exhausted 
```

第二个循环不会运行，因为`a`已经扫描。

第三个循环追加

```
b[2], b[3]   # 2 iterations; b exhaused 
```

你看到`8 = 4 + 4`循环运行了吗？什么顺序`O(n)`。

* * *

在 Mergesort 中，除法运算是对数`ln n`的，合并部分是线性的。由于您划分并合并回来，因此顺序变为乘法，因此 Mergesort 是`O(nln(n))`.

与冒泡、选择、插入排序不同，您从左到右扫描 (O(n))，然后通过连续交换（冒泡）或通过扫描未排序数组的其余部分中的最小值（选择）或通过在数组的已排序部分的正确位置插入（插入）——这些操作是 O(n)...所以这些算法的总顺序变为 O(n ² )*

# iphone - 我怎样才能得到字符串的特定部分？

> ID：11947318
> 
> 赞同：0
> 
> 时间：2012-08-14T07:04:02.297
> 
> 标签：iphone, nsstring, split

我有一个像这样的字符串：

```
"This is test string http://www.google.com and it is working." 
```

我只想`http://www.google.com`从上面的字符串中获取链接（）。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:32:46.987

它应该像这样工作：

```
NSString *test = @"This is test string http://www.google.com and it is working.";

NSString *string = [test stringByAppendingString:@" "];

NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"https?://[^ ]* "
                                                                       options:0
                                                                         error:&error];
NSArray *matches = [regex matchesInString:string
                                  options:0
                                    range:NSMakeRange(0, [string length])];

for (NSTextCheckingResult *match in matches) {
    NSRange matchRange = [match range];
    NSString *url = [string substringWithRange:matchRange];

    NSLog(@"Found URL: %@", url);
} 
```

您可以在此处找到有关使用 NSRegularExpression 的更多信息：

[https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:32:52.177

查看 NSString 类文档 - 那里有很多方法可以找到某些子字符串格式的位置、在分隔符上拆分字符串以及提取子字符串等。

例如，在上面的示例中，如果您想提取字符串中的任何嵌入式 url，您可以首先使用以下方法拆分字符串：

```
NSArray *substrings = [myString componentsSeparatedByString:@" "]; 
```

然后在结果数组中，遍历它并找出它是否有一个'http'字符串：

```
for (int i=0;i<[substrings length];i++) {
   NSString aStr = [substrings objectAtIndex:i];
   if ([aStr rangeOfString:@"http"].location != NSNotFound) {
        NSLog(@"I found a http url:%@", aStr);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:36:08.880

这将像一个 CHARM 一样工作：

```
NSString *totalString = @"This is test string http://www.google.com and it is working.";
NSLog(@"%@", totalString);

NSRange urlStart = [totalString rangeOfString: @"http"];
NSRange urlEnd = [totalString rangeOfString: @".com"];
NSRange resultedMatch = NSMakeRange(urlStart.location, urlEnd.location - urlStart.location + urlEnd.length);

NSString *linkString = [totalString substringWithRange:resultedMatch];

NSLog (@"%@", linkString); 
```

# codeigniter - 数据映射器不返回 total_rows

> ID：11947322
> 
> 赞同：0
> 
> 时间：2012-08-14T07:04:29.740
> 
> 标签：codeigniter, grouping, datamapper

```
$b->include_related('tent',NULL,TRUE,TRUE)->include_related('booking/guest',NULL,TRUE,FALSE)->include_related('booking/bookingbasis',NULL,TRUE,FALSE)->include_related('booking',NULL,TRUE,FALSE);
            $b->group_by('booking_id');
            $b->select_sum('booking_total','sum_booking_booking_total');
            $b->select_sum('booking_taxes','sum_booking_booking_taxes');
            $b->get_paged(1,1);
            $total = $b->paged->total_rows; 
```

总共有 2 行。但是 $total 只返回 1。

另一件事是，如果我删除以下代码，它会返回 2。问题从分组开始。

```
$b->group_by('booking_id');
                $b->select_sum('booking_total','sum_booking_booking_total');
                $b->select_sum('booking_taxes','sum_booking_booking_taxes'); 
```

任何人都可以猜到是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T13:53:28.290

我看到这是一篇旧帖子，但我面临同样的问题，并认为我至少可以提供一些意见。

如前所述，问题在于“group_by”。这是因为总结果的计数被划分为由于 group_by 而产生的组。

要获得所需的总结果，您应该执行 DISTINCT 选择。但是，这将导致返回的行集出现问题。

所以，问题是你想使用 DISTINCT 来获得正确的 paged->total_rows，但 GROUP_BY 来获得正确的对象集。

**可能的解决方案**

*   打开 datamapper.php 库
*   搜索“公共功能 get_paged”
*   使函数以这样的方式运行，即 groupby 被转换为总计的不同选择。

代替

```
$total = $count_query->db->ar_distinct ? $count_query->count_distinct() : $count_query->count(); 
```

和

```
$distinct_column = 'id';
if($count_query->db->ar_groupby){
    $distinct_column = implode(",",$count_query->db->ar_groupby);
    $count_query->db->ar_distinct = TRUE;
    $count_query->db->ar_groupby = NULL;
}
$total = $count_query->db->ar_distinct ? $count_query->count_distinct(NULL, $distinct_column) : $count_query->count(); 
```

这样，groupby-field(s) 将在不同计数中使用并设置为 NULL 以在总结果中被忽略。

# iphone - 对于非续订订阅，注册应该始终是可选的吗？

> ID：11947324
> 
> 赞同：5
> 
> 时间：2012-08-14T07:04:37.757
> 
> 标签：iphone, ios, in-app-purchase, storekit

我计划在 SaaS 应用程序上使用非续订订阅，因为苹果不允许 SaaS 自动续订。

Apple 还要求我们提供服务器端机制来跟踪多个设备的订阅。

但是，根据我的研究，如果注册是强制性的，苹果似乎也会拒绝应用程序，因此必须将此类用户注册设为可选。

**我的应用程序无需注册即可使用，因此此时注册是可选的。但是，如果用户想购买非续订订阅，则必须注册才能跟踪订阅。**

苹果会拒绝这种方法吗？

相关链接：
[应用被拒绝。如何跟踪用户非续订订阅](https://stackoverflow.com/questions/9466392/app-rejected-how-to-track-user-non-renewing-subscription)

***UPDATE**

我查看了 WWDC2012 的会议视频，~~似乎可以要求用户在购买非续订订阅之前向您的服务器注册。~~ 一旦他们真正批准了这种方法，我将发布答案。

![在此处输入图像描述](../Images/9853d8c0f5310b04a87965e6742c46d5.png)

***更新**
我通过调解中心收到了苹果的回复。

**底线是我们应该允许用户在没有注册的情况下购买订阅。**

这是苹果审查团队的答案。

> 将注册设为可选是适当的。您可以提供警告，说明用户在未注册的情况下将无法在多台设备上跟踪订阅。但是，您还应该在购买订阅后提供注册和跟踪订阅的选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T21:00:37.317

我没有明确的答案，但我的理解（不仅仅是猜测）是您*必须*允许他们在不注册帐户的情况下购买订阅。您可以警告他们，如果他们不创建帐户，他们的订阅将无法移植到其他设备，但如果他们愿意，您仍然必须让他们在没有帐户的情况下继续前进。

从技术角度，您可以将其视为“您必须允许用户在没有任何个人信息的情况下创建帐户”；他们可能在您的服务器上有一个帐户用于收据验证等，但它与他们的姓名、电子邮件、udid 等无关。问题是隐私问题之一，所以只要它不是您存储的个人身份信息，它就是可以跟踪订阅，以便您知道订阅​​何时到期等。（如果他们愿意，以后可以让他们输入他们的电子邮件，这样他们就可以使订阅变得可移植。）

当然，Apple 批准或不批准的内容会随着时间的推移而变化，并且会因其他原因而变化，因此 YMMV。

# python - 如何在 Jinja2 中测试列表？

> ID：11947325
> 
> 赞同：35
> 
> 时间：2012-08-14T07:04:41.300
> 
> 标签：python, jinja2

据我所知，没有办法测试一个对象是否是`List`Jinja2 中的一个实例。

这是正确的吗？有人在 Jinja2 中实现了自定义测试/扩展吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2016-09-12T15:26:11.570

我是这样做的：

```
{% if var is iterable and (var is not string and var is not mapping) %} 
```

[您可以在此处](https://jinja.palletsprojects.com/en/3.0.x/templates/#list-of-builtin-tests)找到所有 jinja 测试的列表。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-14T07:24:24.360

您可以使用 jinja2 中的自定义过滤器轻松完成此操作。

首先创建你的测试方法：

```
def is_list(value):
    return isinstance(value, list) 
```

并将其添加为自定义过滤器：

```
j = jinja2.Jinja2(app)
j.environment.filters.update({
        'is_list': is_list,
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-15T14:10:06.497

在我的设置中，我希望一个值是进入 Jinja 模板的字符串或字符串列表。所以我真正关心的不是字符串与列表，而是单个项目与多个项目。如果您的用例相似，此答案可能会有所帮助。

由于没有针对“is list”的内置测试？这也拒绝字符串，我从 API 设计中借用了一个模式，并将单个对象包装在 Python 端的列表中，然后检查 Jinja 端的列表长度。

Python：

```
context = { ... }

# ex. value = 'a', or ['a', 'b']
if not isinstance(value, list):
    value = [value]

context['foo'] = value 
```

金贾：

```
{% if foo|length == 1 %}
  single-item list
{% elif foo|length > 1 %}
  multi-item list
{% endif %} 
```

如果您只想添加一个项目分隔符用于显示目的，您可以跳过显式长度检查，只需`{{ value|join(', ') }}`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-22T08:28:18.477

可迭代返回 True 也在 dict 上。试试这个：

```
{% if var.__class__.__name__ == 'list' %} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-12T18:30:23.293

Jinja 有许多内置测试。您可能正在寻找[iterable](http://jinja.pocoo.org/docs/dev/templates/#iterable)。

```
{% if var is iterable %} 
```

# iphone - 安装应用程序时安装 iPhone

> ID：11947327
> 
> 赞同：-1
> 
> 时间：2012-08-14T07:04:55.337
> 
> 标签：iphone, file, installation

我想知道是否可以在安装我的 iPhone 应用程序期间创建文件。

有人已经这样做了吗？如何 ？

当然，我的文件不会在捆绑包中，仅在 Documents 目录中。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:21:14.763

不，你不能。在用户启动您的应用程序之前，您无法运行任何代码。

因此，您必须等到第一次启动应用程序才能创建这些文件。

# vb.net - 我新创建的 Form1 存在于 VB 类层次结构中的什么位置？

> ID：11947330
> 
> 赞同：0
> 
> 时间：2012-08-14T07:05:08.140
> 
> 标签：vb.net, class, hierarchy

Form1 被声明为一个类，但是因为它继承了一堆东西。我想知道它继承了什么？

但是，如果它继承自 System.Windows.Forms.Form，为什么它会有一个来自 System.Web.UI.Control 的名为“parent”的属性？

这一切如何运作？

PS我可以以完整路径的方式引用Form1类吗？（例如系统。……）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:21:52.660

*   系统对象
*   System.MarshalByRefObject
*   System.ComponentModel.Component
*   System.Windows.Forms.Control
*   System.Windows.Forms.ScrollableControl
*   System.Windows.Forms.ContainerControl
*   System.Windows.Forms.Form
*   Some.Your.Namespace.Form1

`Form1`这是您的类的完整继承层次结构。你可以在msdn中看到这些东西。我建议您从有关[Form class](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)的文章开始。

# iis-7 - 卸载 msi 删除 apppools

> ID：11947331
> 
> 赞同：0
> 
> 时间：2012-08-14T07:05:12.123
> 
> 标签：iis-7, wix, windows-installer

我有一个 wcf 服务项目 msi。我正在通过 Wix 生成 MSI 并分配 appool 。但是当我卸载 msi 时。即使其他具有该 apppool 引用的虚拟目录，应用程序池也将被删除。

如果有人知道请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:25:56.877

如果共享该应用程序池的虚拟目录位于不同的 MSI 中，则需要阅读组件规则和共享组件的概念。这样 MSI 将引用计数组件并在适当时将其及其资源删除。

否则我通常只是创建更多的应用程序池以避免冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T09:08:26.870

除了其他两个答案。我的情况是，我希望 WebAppPool 在卸载后保留。因此，如果您想在您的 msi 中安装 WebAppPool 并在卸载后保留，您可以将“永久”属性添加到“组件”标签并将其值设置为“是”，如下所示：

```
<Component Id="RepoAppPoolCmp" Guid="{B676B577-FEDB-44BF-9096-1510D2A29E38}" KeyPath="yes" Permanent="yes">
    <iis:WebAppPool Id="RepoAppPool" ManagedRuntimeVersion="v4.0" IdleTimeout="0" RecycleMinutes="0" Name="[WEB_APP_POOL_IDENTITY]" Identity="networkService" />
</Component> 
```

这应该达成协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:15:35.973

如果您粘贴用于在 WiX 中使用 AppPool 的代码，则可能更容易找到问题。我假设您将元素嵌套在`<iis:WebAppPool>`元素下`<Component>`。在这种情况下，应用程序池将在安装期间创建，并在卸载期间删除。即使它在安装时已经存在，它仍然会被删除。

您应该在or or元素`<iis:WebAppPool>`下找到。在这种情况下，它将用作*定位器*，允许其他元素引用它，但不会被安装/卸载。`Product``Module``Fragment`

 *查看[元素描述](http://wix.sourceforge.net/manual-wix3/iis_xsd_webapppool.htm)以获取更多详细信息。[element article中描述了元素](http://wix.sourceforge.net/manual-wix3/iis_xsd_website.htm)*定位器*行为的技巧。[`<WebSite>`](http://wix.sourceforge.net/manual-wix3/iis_xsd_website.htm)*

# xslt - 这个 XSLT 代码是否荒谬？

> ID：11947332
> 
> 赞同：3
> 
> 时间：2012-08-14T07:05:12.233
> 
> 标签：xslt

我正在尝试修改其他人编写的 xsl 表。但现在我只是想理解......我真的很惊讶读到这个：

```
<xsl:template match="par">

    [...]

    <xsl:variable name="pos"><xsl:value-of select="position()"/></xsl:variable>
    <xsl:variable name="page"><xsl:value-of select="../par[position()=$pos]/@page"/></xsl:variable>

    [...]

    <xsl:if test="$page!=''">
    <xsl:if test="$page!=@page">
        <div style="text-align:right;page-break-before:always">
        <font color="#000000" style="font-style:normal;text-decoration:none;font-weight:normal">
                - <xsl:value-of select="$page"/> -
            <br/>
         </font>
        </div>
    </xsl:if>
    </xsl:if>

    [...]

</xsl:template> 
```

我是愚蠢的还是这段代码愚蠢的？

如果是我，有人可以解释一下***在这种情况下 $page 和 @page 会有什么不同吗？***

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:02:01.327

**`$page`是的，和的字符串值`@page`可以不同：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/*">
      <xsl:apply-templates select="*[@page mod 2 = 0]"/>
    </xsl:template>

    <xsl:template match="par">      
        <xsl:variable name="pos">
            <xsl:value-of select="position()"/>
        </xsl:variable>

        <xsl:variable name="page">
            <xsl:value-of select="../par[position()=$pos]/@page"/>
        </xsl:variable>

        <xsl:if test="$page!=''">
            <xsl:if test="$page!=@page">
                <div style="text-align:right;page-break-before:always">
                    <font color="#000000" style="font-style:normal;text-decoration:none;font-weight:normal">                 - 
                        <xsl:value-of select="$page"/> -             
                        <br/>
                    </font>
                </div>
            </xsl:if>
        </xsl:if>  
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
 <par page="1"/>
 <par page="2"/>
 <par page="3"/>
 <par page="4"/>
 <par page="5"/>
 <par page="6"/>
 <par page="7"/>
</t> 
```

**产生的结果都是由于上面代码中`$page`和`@page`**的不等式：

```
<div style="text-align:right;page-break-before:always">
   <font color="#000000" style="font-style:normal;text-decoration:none;font-weight:normal">                 - 
                        1 -             
                        <br/>
   </font>
</div>
<div style="text-align:right;page-break-before:always">
   <font color="#000000" style="font-style:normal;text-decoration:none;font-weight:normal">                 - 
                        2 -             
                        <br/>
   </font>
</div>
<div style="text-align:right;page-break-before:always">
   <font color="#000000" style="font-style:normal;text-decoration:none;font-weight:normal">                 - 
                        3 -             
                        <br/>
   </font>
</div> 
```

**说明**：

在模板或 中`xsl:for-each`，表达式：

```
position() 
```

是*当前节点*在*当前节点列表*中的位置。这通常与当前节点在其同名兄弟节点集中的位置不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:35:08.510

`position()`用于设置的“独立”函数非常依赖于上下文，并且在设置变量时与方括号内`$pos`的计算方式不同。`position()``$page`

考虑一个例子（在这里测试[http://xslttest.appspot.com/](http://xslttest.appspot.com/)）：

源 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Greatest Hits</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
    <cd>
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
    <cd>
        <title>Eros</title>
        <artist>Eros Ramazzotti</artist>
        <country>EU</country>
        <company>BMG</company>
        <price>9.90</price>
        <year>1997</year>
    </cd>
    <cd>
        <title>One night only</title>
        <artist>Bee Gees</artist>
        <country>UK</country>
        <company>Polydor</company>
        <price>10.90</price>
        <year>1998</year>
    </cd>
    <cd>
        <title>Sylvias Mother</title>
        <artist>Dr.Hook</artist>
        <country>UK</country>
        <company>CBS</company>
        <price>8.10</price>
        <year>1973</year>
    </cd>
    <cd>
        <title>Maggie May</title>
        <artist>Rod Stewart</artist>
        <country>UK</country>
        <company>Pickwick</company>
        <price>8.50</price>
        <year>1990</year>
    </cd>
    <cd>
        <title>Romanza</title>
        <artist>Andrea Bocelli</artist>
        <country>EU</country>
        <company>Polydor</company>
        <price>10.80</price>
        <year>1996</year>
    </cd>
    <cd>
        <title>When a man loves a woman</title>
        <artist>Percy Sledge</artist>
        <country>USA</country>
        <company>Atlantic</company>
        <price>8.70</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Black angel</title>
        <artist>Savage Rose</artist>
        <country>EU</country>
        <company>Mega</company>
        <price>10.90</price>
        <year>1995</year>
    </cd>
    <cd>
        <title>1999 Grammy Nominees</title>
        <artist>Many</artist>
        <country>USA</country>
        <company>Grammy</company>
        <price>10.20</price>
        <year>1999</year>
    </cd>
    <cd>
        <title>For the good times</title>
        <artist>Kenny Rogers</artist>
        <country>UK</country>
        <company>Mucik Master</company>
        <price>8.70</price>
        <year>1995</year>
    </cd>
    <cd>
        <title>Big Willie style</title>
        <artist>Will Smith</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>9.90</price>
        <year>1997</year>
    </cd>
    <cd>
        <title>Tupelo Honey</title>
        <artist>Van Morrison</artist>
        <country>UK</country>
        <company>Polydor</company>
        <price>8.20</price>
        <year>1971</year>
    </cd>
    <cd>
        <title>Soulsville</title>
        <artist>Jorn Hoel</artist>
        <country>Norway</country>
        <company>WEA</company>
        <price>7.90</price>
        <year>1996</year>
    </cd>
    <cd>
        <title>The very best of</title>
        <artist>Cat Stevens</artist>
        <country>UK</country>
        <company>Island</company>
        <price>8.90</price>
        <year>1990</year>
    </cd>
    <cd>
        <title>Stop</title>
        <artist>Sam Brown</artist>
        <country>UK</country>
        <company>A and M</company>
        <price>8.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Bridge of Spies</title>
        <artist>T`Pau</artist>
        <country>UK</country>
        <company>Siren</company>
        <price>7.90</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Private Dancer</title>
        <artist>Tina Turner</artist>
        <country>UK</country>
        <company>Capitol</company>
        <price>8.90</price>
        <year>1983</year>
    </cd>
    <cd>
        <title>Midt om natten</title>
        <artist>Kim Larsen</artist>
        <country>EU</country>
        <company>Medley</company>
        <price>7.80</price>
        <year>1983</year>
    </cd>
    <cd>
        <title>Pavarotti Gala Concert</title>
        <artist>Luciano Pavarotti</artist>
        <country>UK</country>
        <company>DECCA</company>
        <price>9.90</price>
        <year>1991</year>
    </cd>
    <cd>
        <title>The dock of the bay</title>
        <artist>Otis Redding</artist>
        <country>USA</country>
        <company>Atlantic</company>
        <price>7.90</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Picture book</title>
        <artist>Simply Red</artist>
        <country>EU</country>
        <company>Elektra</company>
        <price>7.20</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Red</title>
        <artist>The Communards</artist>
        <country>UK</country>
        <company>London</company>
        <price>7.80</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Unchain my heart</title>
        <artist>Joe Cocker</artist>
        <country>USA</country>
        <company>EMI</company>
        <price>8.20</price>
        <year>1987</year>
    </cd>
</catalog> 
```

测试 XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="cd">
     [<xsl:value-of select="position()"/>]<xsl:value-of select="title"/>
    <xsl:variable name="pos"><xsl:value-of select="position()"/></xsl:variable>
     [- <xsl:value-of select="$pos"/>]
     [+ <xsl:value-of select="../cd[position()=$pos]/position()"/>]<xsl:value-of select="../cd[position()=$pos]/title"/>
</xsl:template>
</xsl:stylesheet> 
```

结果：

```
 [2]Empire Burlesque
     [- 2]
     [+ 1]Hide your heart

     [4]Hide your heart
     [- 4]
     [+ 1]Still got the blues

     [6]Greatest Hits
     [- 6]
     [+ 1]One night only

     [8]Still got the blues
     [- 8]
     [+ 1]Maggie May

     [10]Eros
     [- 10]
     [+ 1]When a man loves a woman

     [12]One night only
     [- 12]
     [+ 1]1999 Grammy Nominees

     [14]Sylvias Mother
     [- 14]
     [+ 1]Big Willie style

     [16]Maggie May
     [- 16]
     [+ 1]Soulsville

     [18]Romanza
     [- 18]
     [+ 1]Stop

     [20]When a man loves a woman
     [- 20]
     [+ 1]Private Dancer

     [22]Black angel
     [- 22]
     [+ 1]Pavarotti Gala Concert

     [24]1999 Grammy Nominees
     [- 24]
     [+ 1]Picture book

     [26]For the good times
     [- 26]
     [+ 1]Unchain my heart

     [28]Big Willie style
     [- 28]
     [+ ]

     [30]Tupelo Honey
     [- 30]
     [+ ]

     [32]Soulsville
     [- 32]
     [+ ]

     [34]The very best of
     [- 34]
     [+ ]

     [36]Stop
     [- 36]
     [+ ]

     [38]Bridge of Spies
     [- 38]
     [+ ]

     [40]Private Dancer
     [- 40]
     [+ ]

     [42]Midt om natten
     [- 42]
     [+ ]

     [44]Pavarotti Gala Concert
     [- 44]
     [+ ]

     [46]The dock of the bay
     [- 46]
     [+ ]

     [48]Picture book
     [- 48]
     [+ ]

     [50]Red
     [- 50]
     [+ ]

     [52]Unchain my heart
     [- 52]
     [+ ] 
```

# c# - 将对象提取到 Solr

> ID：11947333
> 
> 赞同：0
> 
> 时间：2012-08-14T07:05:16.963
> 
> 标签：c#, .net, solrnet

我们需要提取 C# 对象并将其存储到 Apache Solr 中，但不确定是否有人在这方面做过工作。这是一个例子：

*   被索引的 Word 文档可以有一个与之关联的人员列表。
*   列表中的每个 Person 对象都有这些字段，
    *   姓名
    *   年龄
    *   电子邮件地址
    *   电话

你如何将它存储在 Solr 中？有任何 .NET 示例吗？我能找到的唯一代码是 Solrizer，它是 Ruby。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:23:02.547

Solrnet[库](http://code.google.com/p/solrnet/)可以帮助您。

# jquery - 使用 jQuery 为 div 设置动画并按数字排序

> ID：11947334
> 
> 赞同：0
> 
> 时间：2012-08-14T07:05:23.723
> 
> 标签：jquery, arrays, jquery-animate

这是我应该创建的场景：

有 OL 数字列表，(1,2,3,4,5,6)。用户可以选择/单击这些数字。当一个人点击它时，数字应该转到另一个OL列表（动画，数字飞过屏幕）。新列表中的数字应始终按顺序排列。因此，如果用户单击第一个 5，它会复制并飞到新列表，如果用户然后单击数字 1，它应该飞到 5 之前。所以......所以新的列表编号应该像 1、3、5 一样用户单击数字的顺序。

好的，这就是我想要实现的。基本上我可以做第一部分（用户点击数字->它飞到新列表），但是如何始终按顺序获取数字？

到目前为止的JS：

```
$('ol#original li').click(function() {
        $(this).clone().appendTo('ol#newNumbers');

        $('ol#original:last').animate({
            left: "150px",
            position: "relative",
            top: "150px",
        }, 600);
    }); 
```

好的，我将克隆的数字附加到相同的 ol 列表中仍然存在问题：/

希望你能理解并能帮助我一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:27:37.093

`<li>`快速简单的解决方案是在其他中创建一堆空的`<ol>`然后使用`$.replaceWith()`. 另一种解决方案是给每个`<li>`数据属性维护排序顺序。

（对于大多数情况，第一个选项应该没问题）

**编辑：http:** [//jsfiddle.net/wA4ex/](http://jsfiddle.net/wA4ex/)

```
/*create empty li's in newlist*/
for (var i=0; i < $('#oglist li').length; i++) {
    $('<li></li>').hide().appendTo($('#newlist'));
}

$('#oglist li').click(function(e) {
    var li = $(this),
        index = li.index(),
        clone = li.clone();
    $('#newlist li').eq(index).replaceWith(clone);
}); 
```

主要概念是使用占位符来维持秩序。

# wix - WiX - 如何有条件地设置属性

> ID：11947335
> 
> 赞同：6
> 
> 时间：2012-08-14T07:05:32.543
> 
> 标签：wix

> **可能重复：**
> [Wix - 根据权限更改安装文件夹](https://stackoverflow.com/questions/1017294/wix-change-the-installation-folder-based-on-privilege)

好吧，当我试图解决我的问题时，这个问题出现了[How do I get different registry keys for allusers and single user](https://stackoverflow.com/questions/11885387/wix-how-do-i-get-different-registry-keys-for-allusers-and-single-user)。

基本上我想做的是：

```
if ALLUSERS=1 then
   set InstallDir to Property1
else 
   set InstallDir to Property2 
```

有人知道这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T10:02:40.713

好的，刚做完。我的 wxs 看起来像：

```
<CustomAction Id="PerUserInstall"    Property="InstallDir" Value="[INSTALLDIR1]" Execute="immediate" />
<CustomAction Id="PerMachineInstall" Property="InstallDir" Value="[INSTALLDIR2]" Execute="immediate" /> 
<InstallExecuteSequence>
    <Custom Action="PerUserInstall"    After="AppSearch">ALLUSERS="" OR (ALLUSERS=2 AND (NOT Privileged))</Custom>      
    <Custom Action="PerMachineInstall" After="AppSearch">ALLUSERS=1  OR (ALLUSERS=2 AND Privileged)</Custom>
</InstallExecuteSequence> 
```

感谢@shambulator 提供链接。请注意，我使用`After="AppSearch"`而不是`Before="CostFinalize"`因为这将使操作在注册表搜索后立即执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T11:21:11.743

许多 WiX 元素将条件作为内部文本。由于它是 XML，因此您经常需要转义特殊字符。以下是条件如何工作的指针：

[条件语句语法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368012%28v=vs.85%29.aspx)

另外，我不确定你为什么有 INSTALLDIR1 和 INSTALLDIR2。如果没有看到你的其余代码，我不得不说你没有正确地处理它。您应该有一个 INSTALLDIR，然后根据每个用户或每台机器将其设置到不同的位置。这是一篇关于这个主题的好博客文章：

[在 Windows 7 中为每用户或每机器安装上下文创作单个包](http://blogs.msdn.com/b/windows_installer_team/archive/2009/09/02/authoring-a-single-package-for-per-user-or-per-machine-installation-context-in-windows-7.aspx)

就个人而言，我很少为每用户安装而烦恼。除了“病毒”（不是病毒，而是通过社交媒体传播给非 priv 用户）应用程序之外，它们几乎没有价值。

# css - s 也没有出现在另一个 div 中

> ID：11947336
> 
> 赞同：0
> 
> 时间：2012-08-14T07:05:41.030
> 
> 标签：css, html

基本上我有一个 div，在那个 div 里面是一个包装器和另外两个 div，一个向左浮动，一个向右浮动。

这是它的样子： http: [//puu.sh/Va3J](http://puu.sh/Va3J)

当您查看代码（如下所列）时，您会注意到 .register-form 和 .login-form 都在 #info 中，但由于某种原因它们没有以这种方式出现

这里是代码： http: [//jsfiddle.net/x8KaA/](http://jsfiddle.net/x8KaA/)（注意我只把代码放在了一个jsFiddle，因为它是一大块代码，结果框中的结果不是它的实际样子）

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:11:03.680

当您使元素浮动时，它们不会影响父元素的大小。您可以使用`overflow`样式来包含元素，通过设置溢出而不指定元素的高度，它将包含其子元素：

```
#info { overflow: hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:12:45.427

这个问题是众所周知的，并且通过 clearfix 修复了跨浏览器：

[css 清除修复](http://www.webtoolkit.info/css-clearfix.html)

# asp.net-mvc-4 - HttpResponseException

> ID：11947339
> 
> 赞同：5
> 
> 时间：2012-08-14T07:05:53.283
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在处理 MVC 4 webAPI 中的错误时遇到了一个大问题。在这里，我想验证传入的请求并发回 BadRequest 响应。

为此，我正在使用代码

```
public Product GetProduct(int id)
{
    Product item = repository.Get(id);
   if (item == null)
   {
     throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
   }
   return item;
} 
```

但是在空 id 的情况下，VS2010 会产生另一个错误，例如

“处理 HTTP 请求导致异常。有关详细信息，请参阅此异常的 'Response' 属性返回的 HTTP 响应”。

我该如何解决这个问题

提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T07:56:35.487

您的代码实际上是正确的。您所看到的是 Visual Studio 坚持捕获未处理的异常（即在您的应用程序中未处理）。

`HttpResponseException`异常由调用您的 Web API 的路由处理，您的代码只会生成 404 错误。

在 Web 服务器上安装代码后，如果不存在匹配记录，它将简单地返回 404 错误。

*虽然关于使用约束的建议对于基本检查很有用，但 404 的真正用途是报告数据库中不存在特定的请求条目（而不是 URL 中不存在）。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:31:38.027

使用路由约束来禁用`null`ids: `@"\d+"`。这样，如果您没有在 url 中传递数字 id，控制器操作甚至都不会解析，并且路由引擎将直接返回 404。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T09:48:22.090

我只是将参数更改为int？然后进行 HasValue 检查并抛出所需的异常。像这样（假设你想抛出相同的异常）：

```
public Product GetProduct(int? id)
{
    Product item;
    if (id.HasValue){
        item = repository.Get(id);
    }
    if (item == null)
    {
        throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
    }
    return item;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T22:30:28.633

如[http://www.asp.net/web-api/overview/error-handling/exception-handling](http://www.asp.net/web-api/overview/error-handling/exception-handling "ASP.NET Web API 中的异常处理")中所述，未捕获/未用户处理的异常默认转换为 HTTP 响应。抛出 HttpResponseException 允许您指定此 HTTP 响应的大部分内容（例如 404 Not Found 状态代码）。

正如 TrueBlueAussie 所提到的，Visual Studio 仍然会在这些异常上中断。要禁用此功能：

1.  从菜单中，转到 DEBUG -> Exceptions...
2.  在异常对话框中，将“System.Web.Http.HttpResponseException”添加到公共语言运行时异常树。
3.  取消选中新的 System.Web.Http.HttpResponseException 的用户未处理框。

# truezip - Truezip umout() 失败，“无法删除临时文件”

> ID：11947340
> 
> 赞同：0
> 
> 时间：2012-08-14T07:05:56.897
> 
> 标签：truezip

有谁知道，为什么会发生这种情况？调用 TFile.umount() 时发生错误：

```
de.schlichtherle.truezip.fs.FsSyncException: part:file:/C:/Data/Backup/New%20Backups/F20120805T070000Z.part!/
    在 de.schlichtherle.truezip.fs.archive.FsTargetArchiveController.close(FsTargetArchiveController.java:623)
    在 de.schlichtherle.truezip.fs.archive.FsTargetArchiveController.sync0(FsTargetArchiveController.java:472)
    在 de.schlichtherle.truezip.fs.archive.FsTargetArchiveController.sync(FsTargetArchiveController.java:460)
    在 de.schlichtherle.truezip.fs.archive.FsContextController.sync(FsContextController.java:236)
    在 de.schlichtherle.truezip.fs.FsResourceController.sync(FsResourceController.java:84)
    在 de.schlichtherle.truezip.fs.FsCacheController.sync(FsCacheController.java:220)
    在 de.schlichtherle.truezip.fs.FsDecoratingController.sync(FsDecoratingController.java:148)
    在 de.schlichtherle.truezip.fs.FsLockController$1Sync.call(FsLockController.java:381)
    在 de.schlichtherle.truezip.fs.FsLockController$1Sync.call(FsLockController.java:370)
    在 de.schlichtherle.truezip.fs.FsLockController.locked(FsLockController.java:166)
    在 de.schlichtherle.truezip.fs.FsLockController.writeLocked(FsLockController.java:108)
    在 de.schlichtherle.truezip.fs.FsLockController.sync(FsLockController.java:394)
    在 de.schlichtherle.truezip.fs.FsDecoratingController.sync(FsDecoratingController.java:148)
    在 de.schlichtherle.truezip.fs.archive.zip.KeyManagerController.sync(KeyManagerController.java:125)
    在 de.schlichtherle.truezip.fs.FsDecoratingController.sync(FsDecoratingController.java:148)
    在 de.schlichtherle.truezip.fs.FsFalsePositiveController.sync(FsFalsePositiveController.java:516)
    在 de.schlichtherle.truezip.fs.FsManager.sync(FsManager.java:139)
    在 de.schlichtherle.truezip.fs.FsManager.sync(FsManager.java:100)
    在 de.schlichtherle.truezip.file.TVFS.sync(TVFS.java:284)
    在 de.schlichtherle.truezip.file.TVFS.sync(TVFS.java:231)
    在 de.schlichtherle.truezip.file.TFile.sync(TFile.java:949)
    在 de.schlichtherle.truezip.file.TFile.umount(TFile.java:997)
.
.
.
引起：java.io.IOException: C:\Data\Backup\New Backups\F20120805T070000Z.part.8228029877339677208.tmp（不能删除临时文件）
    在 de.schlichtherle.truezip.fs.file.TempFilePool$Buffer.pool(TempFilePool.java:80)
    在 de.schlichtherle.truezip.fs.file.TempFilePool$Buffer.release(TempFilePool.java:70)
    在 de.schlichtherle.truezip.fs.file.FileOutputSocket.release(FileOutputSocket.java:126)
    在 de.schlichtherle.truezip.fs.file.FileOutputSocket.close(FileOutputSocket.java:97)
    在 de.schlichtherle.truezip.fs.file.FileOutputSocket.access 100 美元（FileOutputSocket.java:28）
    在 de.schlichtherle.truezip.fs.file.FileOutputSocket$1OutputStream.close(FileOutputSocket.java:153)
    在 de.schlichtherle.truezip.io.DecoratingOutputStream.close(DecoratingOutputStream.java:65)
    在 de.schlichtherle.truezip.zip.RawZipOutputStream.close(RawZipOutputStream.java:696)
    在 de.schlichtherle.truezip.fs.archive.zip.ZipOutputShop.close(ZipOutputShop.java:250)
    在 de.schlichtherle.truezip.fs.archive.FsMultiplexedOutputShop.close（FsMultiplexedOutputShop.java:169）
    在 de.schlichtherle.truezip.socket.DisconnectingOutputShop.close（DisconnectingOutputShop.java:107）
    在 de.schlichtherle.truezip.socket.LockOutputShop.close（LockOutputShop.java:68）
    在 de.schlichtherle.truezip.fs.archive.FsTargetArchiveController.close(FsTargetArchiveController.java:618)
    ... 26 更多

```

我知道这是由于无法删除 tmp 文件。但为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:39:19.353

您是否可能同时观察该目录，例如在 Windows 资源管理器中？一些资源管理器扩展访问文件以进行检查。如果这种情况同时发生，则 JVM 无法删除临时文件，因为 Windows 不允许这样做。

我可以告诉你正在 Java 6 上运行。如果你切换到 Java 7，那么你应该得到一个更详细的异常，这可能有助于检查我的假设。

# c# - 将字符串转换为类

> ID：11947346
> 
> 赞同：0
> 
> 时间：2012-08-14T07:06:26.090
> 
> 标签：c#, asp.net

我有一堂课`AuthUser`

```
public class AuthUser
{
    public int UserID { get; set; }
    public string UserNo { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
} 
```

我已将课程转换为`string`.

```
AuthUser au = new AuthUser();
//dtUserDetails is a data table
if (dtUserDetails.Rows.Count > 0)
{
    DataRow DR = dtUserDetails.Rows[0];
    au.UserID = Convert.ToInt32(DR["UserID"].ToString());
    au.UserNo = DR["UserNo"].ToString();
    au.UserName = DR["UserName"].ToString();
    au.Password = DR["Password"].ToString();
}
string userData = au.ToString(); 
```

现在我需要将上面的`UserData`字符串转换回对象类型来检索数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:08:21.983

我假设您正在尝试持久化数据，然后从持久化数据重建对象。查找[序列化](http://msdn.microsoft.com/en-us/library/ms233843.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:42:27.770

使用序列化，您可以像这样创建 JsonSerilizer：

```
public static class JsonUtil
{
    public static string Serialize<T>(T value)
    {
        using (var ms = new MemoryStream())
        {
            var ser = new DataContractJsonSerializer(typeof(T));
            ser.WriteObject(ms, value);
            byte[] json = ms.ToArray();
            ms.Close();
            return Encoding.UTF8.GetString(json, 0, json.Length);
        }
    }

    public static T Deserialise<T>(string json)
    {
        using (var memoryStream = new MemoryStream(Encoding.Unicode.GetBytes(json)))
        {
            var serializer = new DataContractJsonSerializer(typeof(T));
            return (T)serializer.ReadObject(memoryStream);
        }
    }

} 
```

像这样使用它：

```
// Create an object
var dude = new Dude() { Id = 1, Name = "Joe Smith" };

// Turn it into a string
var json = JsonUtil.Serialize<Dude>(dude);

// Turn it back into an object
var cloneDude = JsonUtil.Deserialise<Dude>(json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:16:50.980

尝试这个

您可以将其设为匿名类型

```
public static string ObjectToXMLString(Object anyObject)
{
    string XmlizedString = string.Empty;
    XmlSerializer xs = null;
    XmlTextWriter xmlTextWriter = null;
    MemoryStream memoryStream = new MemoryStream();
    try
    {
        xs = new XmlSerializer(anyObject.GetType());
        xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.Unicode);
        xs.Serialize(xmlTextWriter, anyObject);
        memoryStream = (MemoryStream)xmlTextWriter.BaseStream;
        XmlizedString = Encoding.Unicode.GetString(memoryStream.ToArray());
    }
    catch 
    {
        //Do nothing for now
    }
    finally
    {
        xmlTextWriter.Close();
        memoryStream.Close();
    }
    return XmlizedString;
} 
```

并再次将其转回

```
/// <summary>
/// XMLs the string to object.
/// </summary>
/// <typeparam name="T">Object of target type</typeparam>
/// <param name="xml">The XML.</param>
/// <returns>Instance of target type object filled with corresponding xml data.</returns>
public static T XMLStringToObject<T>(string xml)
{
    // create default instance of the target type object
    T targetObject = default(T);

    // init serializer params
    XmlSerializer ser = null;
    StringReader stringReader = null;
    XmlTextReader xmlReader = null;
    try
    {
        // start deserialization of object 
        ser = new XmlSerializer(typeof(T));
        stringReader = new StringReader(xml);
        xmlReader = new XmlTextReader(stringReader);
        targetObject = (T)ser.Deserialize(xmlReader);
    }
    catch(Exception ex)
    {
        // determine what type of object was the target and a copy of the xml being tried and rethrow
        throw new ArgumentException(String.Format("Exception while deseriliazing to object of type {0}.\n\n=== XML ========\n{1}", typeof(T), xml), ex);
    }
    finally
    {
        // always close readers to release objectToXMLString
        xmlReader.Close();
        stringReader.Close();
    }

    // return target objectToXMLString
    return targetObject;
} 
```

# javascript - 使用 javascript 禁用 tinyMCE 编辑器

> ID：11947348
> 
> 赞同：1
> 
> 时间：2012-08-14T07:06:30.240
> 
> 标签：javascript, tinymce, disabled-control

我有一个表单，`tinyMCE`它的`textarea`.
我使用 Ajax 发布表单内容。我需要在 Ajax 代码工作时
禁用编辑器及其（禁用我的意思是不删除它）。 怎么办？ `textarea`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:24:58.560

对于这个用例，您需要将该类`mceButtonDisabled`应用于按钮的`a`-element。然后 Tinymce 会处理变灰的问题。

# javascript - Internet Explorer 的 Javascript 问题

> ID：11947350
> 
> 赞同：0
> 
> 时间：2012-08-14T07:06:43.203
> 
> 标签：javascript

我有行，我需要动态附加控件。它的代码如下

```
<script type="text/javascript">
function AddRowContent()
{
    //Here trRow is a id of row for which I need to append the data.
    var d=document.getElementById("trRow");
    d.innerHTML="<td>Aliases</td>";     
}
</script> 
```

代码在其他浏览器中运行良好，但在 Internet Explorer 中无法正常运行。请让我知道解决方案或更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:12:51.357

在 IE 中，tr 元素上的 innerHTML 是只读的。

***解决方案：***

```
var d=document.getElementById("trRow");
var td = document.createElement('td');
td.innerHTML = "Aliases";
d.appendChild(td); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:16:13.647

是的，`innerHTML`属性对于 IE 中的元素是只读的，如**MSDN**[所述](http://msdn.microsoft.com/en-us/library/ie/ms533897(v=vs.85).aspx)：`<tr>`

> innerHTML 属性在 col、colGroup、frameSet、html、head、style、table、tBody、tFoot、tHead、title 和 tr 对象上是只读的。
> 
> 您可以使用 document.title 属性更改 title 元素的值。
> 
> 要更改表格、tFoot、tHead 和 tr 元素的内容，请使用[动态构建表格](http://msdn.microsoft.com/en-us/library/ie/ms532998(v=vs.85).aspx)中描述的表格对象模型。但是，要更改特定单元格的内容，您可以使用 innerHTML。

因此，要操作您的表格，请尝试阅读[Building Tables Dynamically](http://msdn.microsoft.com/en-us/library/ie/ms532998(v=vs.85).aspx)并找到一个解决方案，对于您的简单情况，使用 DOM API 可能是一个兼容的解决方案：

```
var td = document.createElement('td');
td.innerHTML = 'Aliases';
// Remove all existing <td> element
while (d.firstChild) {
    d.removeChild(d.firstChild);
}
d.appendChild(td); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:19:31.180

```
var firstRow=document.getElementById("myTable").rows[0];
var x=firstRow.insertCell(-1);
x.innerHTML="New cell" 
```

# android - 当我通过android webview加载html文件时，html文件中缺少图像

> ID：11947354
> 
> 赞同：1
> 
> 时间：2012-08-14T07:06:49.767
> 
> 标签：android, base64, android-webview, image

我正在从网络服务器下载 HTML 表单并在 android webview 上显示该表单。HTML 文件中的图像很少（图像 src 以 Base64 编码）。但是没有显示图像。

哪里有问题？

```
myBrowser.loadDataWithBaseURL("", downloadedFormContent , "text/html", "UTF-8", null); 
```

我已将表单内容保存到本地 html 文件 (/sdcard/test.html) 并加载了 html 文件。但没有显示静止图像。

```
myBrowser.loadUrl("file:///sdcard/test.html"); 
```

如果我使用网络浏览器（IE、Chrome）打开相同的 HTML 文件，我可以看到所有图像。

我哪里错了？

```
Here is the src of html file :

<html>
<head>
    <title>Assignment Form</title>
    <style type="text/css">
      //css goes here
 </style>
</head>
<body> 

<img src="data:image;base64,R0lGODlhyABaAIcAAAAAANQFAdUMANkHAdkNAd4PCNYSANYbANoTAd0UCdoZAdsbAdUkANMqANwgAdwjAdwlAd0nAdsqAd0rAt0tAtwsCtYyAd0zAd4yAt82Atw7AeAUAuAcAuAjAeEqAuIzAuI0CuE7AtdEA91CAdxLAt1SAt5aA95jAt5xB+BAA+JDAuFDA+JDCeJIA+JLA+JMAuNOA+hCBOhCCONTAuNSBORXBOJVCONcA+RaBOVdBOhVA+hcBONjA+ZkBOZmBedoBeRqBOplAutjCulqBOV0A+VzCuV7BOhxBehyBeh0Bel3BelzCep8BvFuEOqABuuHBuyKBu2QBu2TB+2VB+6bB++eB++hB++iB/CmCPGqCPGvCPKzCPK3CPO6CfS+CfTACfXFCfXJCfbMCfbOCfbPCvfSCvfVCvfWCvjYCvjaCvjcCvneCvngCvniCvnkC/rmC/roC/rqC/vsC/vxC/z1C/35DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEBAAAh+QQAAAAAACwAAAAAyABaAAAI/wABCBxIsKDBgwgTKlzIsKHDhxAjSpy4sI7FixgzatzIsaPHjyBDihxJsqTJkxwFolzJsqXLlzBjelQps6bNmzhziqSps6fPn0BJ8gxKtKjRnEOPKl3KVCiAplCjSsWY1OOcKisUIECA4QebjWi2IkAD0otYkGmcYNiqIIMUjlW2trgoh8JWCnBOivWSMS4CJR1biB0MeKPfwROSpPGoZLDYuSWrcvziwPFWvhrDbiX70exWj3SgWP5sWO5FJmLDoNzbd2vhjYItv249GgHmjY0tQ3Ya0vPo2xg1jy17tmPu0XBN1/kilspK1hj9zs4Y2/H0i4cthzA+evdIyRnZaP9FoGDKmzp0zPQAflE4Z4++O2YRi+GLnDpyvmBIjmBu3a0w0PHcZbRdd1FsVYTkF2Rx+CCWGhzlZiBvHzkBHUZzgCXWex3FtxEdEdyVF4b8zfUEW18NaFuBgW2VIEgLXtTFgxG61hJ4GI3nxEjuEUeaRsxtBcZIC4YhVhctXWiRdC0i8OJHMdaBRgpbbVfjXzc+5ZFwSIrUY2fFaXSYgCL5tUIINiZZm1gT1lHdYOxhV5sCX3Bn2ZPfadmRcHHuuaGPCPAXKJFsiZWFS2uy2aRjfdaRnVguLGanY3jupCdHfPL4J5g/0jZomXLhwNYZaiba5ptKRmdZeR8dN1ilIeH/aJEbYu3o5abwhZnRfEIS2p94AJK5GoGqYskRggqa9sV4VzCW5kqyWhSbAqRmlGFmuHaoK0ZpiBWgtSXWwSsCUbCUKpPHuphsfxZRgaKdbVoK0rgKaBEHemPU0OeXuXaakahbpTBGhnJosV9p7NYBMAJ1DrtisaeqC6NydNiFgA/wZhkSDGvuW5uBHm6UxnjIIQwZsAjg5TB76MJWW7gWbSFWwxq5OhiHsV7aER091ObxaCBvm9EZa5UspnLiioXEyiymazRt3sVGgbAY2ZxtziOV8QMEWzlAgxbXZiScdRuFzBEdWtAw3gQ/jAGzRQtvoRexchrr8tPFekdGc7jV/4YzSNFOJfjgNwVO+OGIQ6tz4ow3fpLhjkcuuUWQT2554pVfrrngmW/ueVOdfy66UaGPbvpPpUtutWNWYcXW11Sf3lHqka8+WEdiVGYZBufJPtPivtsutEVnkGyZyr6nBHzySyJ9Npou3tfGEWI9wfxGtFseZUdciCU3Rg5udd/1VC3P/PZXZqARGKlen/3k6N99HR1iwcr8+5LHr1FsBtZPfvn/g9pH+KcR+m3FCgGknPmSp7+MhE99GTHSVmj2P/xFroEYwYL3HMiW2Llvgb7DIF1CRJ4qZGgNPdtKuRJYBws6ToQX8c1ovsVCFzYOhhdZ1mhoMKIaglB2OKSLFPuK5oAcUNCHLExi4X6oxCbmyYlQ1FgUp2gSG1Kxgky8ohatqMX7ZbGLU+QiGGUnRpsE4QUjeMEMeKCTIejgBknoYhlhcgMJLOABHbgjBzjQgQ6oYAgcUcEHBjnIGHxkByHI4wMWcMcFSOCPHrlBCEKggUmq4AUcmYEKQhCDSwYBc18kChE8wAFGGkAACDhlKhGARxBohAQdKOUCSvkATG5kBnnkgGUWgAAOPEACHbHjVhZgAEYCUyN2ZOQdj3m4ObbEA7zcigEIgAABEEAAqDQAAhbQgYyUIJoGKCYHbJmREDxgK9hMZzqleUeOMEAs4SzmAm6QESMsUiztRP+cM1cigQfoUpqWoSYjO/ABjOzgnuFkpAY0ogFGbiCV8YyoKhn5ACNoZJESLSYzLWJPiG6zm/oM5U9ecE4CnFKgD3jAASCqSlYC0iI3IKY1E0pOizQUogJoaTSriU0DHMCRGnknNq+ZzQOMACP2PGVOtwnKwX1gp1t5AEZEAFWFXgQI96QmAjpQ0zpIoJSorKYxL3CBBqi0mtq8Iz0x8lWWppWRGTknPjnQVMEpcysEWMBRMaKBRTKSjx64CA8eoE1r9rKmKuBlYaNaBIzwgJg83aZUMbJIdWZzmwu9yALSmda6TuWeWymAATZqESDcgAc8MMEJHCtXrXJgBpTdADj/Z7kRGyh2m3dk40UkUFhsVlOrC8BIVUHaTJH6JKthZaUMXvqRG7R2mOQkKQIIcM0qceQFGriABra7190ewLLTHCZx5SoWuoZ0cBco5SkDkNxFXkC3HHnsdKm7TdhaRJjZzCsRUHJOy1ozACadZx2MsFnfMvW8gnMuXoeqVQTI9gEf6CpMo2nNvJLzq9qkpmxXUlKi/labWwGmEVYK3OAiWHDCpC4BAsBiAgxAxWIpKEZmwIFrwti+dUCoWEhrkR3cwMczuMFpgZARO8ZzldNMKwJUQATFynOyxT0cCfzqGBDjcwEyhmkHHMOBHVyEAeD8KENJqcy/Qpiy6AyrT8VC/00DWGCzVjZxlBGnAWiyeboDmO9W+HiRmEqTvjrQ7Aaoa1jz8jXNMGYlmg1MABaggJgBSGUCfFtdRlp0zokrwgiSic5EM9LLdfDzdPccaIuAeZV71sgFounpjUrAMQvApAoe+udq4hPKhNtnTTbdXw9vU8byXWovcezPwuZ1AfC1yKofSmit4vrV9N2KfTs8VANb+sSTg7aNqRnYUPOSmtTkQKnrMIJvm9QAHMisYC9A3mgTN8d3XoB9SQDOBqcV14PTdUkSmdI7PsBKSP12eyc8XVTmFcdNNvcwOaKBNg9zoxjF51pzvIBop1Orl861cXWS0m1uZQOGpmx4BSpjP/+De9gYsTN9tdkBIsf1ADDOp0Weu5VxA+GfOSWqNg+wX0xHZZYqnuYCur1bhfdSBT0WOH1xHOotw5oDIXgpC3R58q0Q3av/HCbThZnKnko24/neeE5iSkwbS/YDIbhAHm0c1gX0fAZQRTlGTm32wZRyukqtLgIgXvBhTrwOSVgAzAXA3my6HdtRKfefk1vxaTa4lxe4yAzaLdtxW2QJeURyoj7eS4hnvZTJrsOqf7vKO4Kdc2LXSVuVWnAVz3SbHIj8RWyLTgfLWyNAmGWt5xtOkybgylcnL24/mRFdWlPYCzj9VPR9khFQeZe4rWVGplzmOzL9IkT4KiN3SVEw/zWiy3UgM+w7IARVb//WniVcBRaZABCX+QBI14gJGsCARR4Aj8TfiAoWKdvyyn2gsUdZeTRLHfAAPZcR3qdMv5R+h3MDKpBd20UCM3CAG5FaJiBkN8BcHcED2AWBL+ByFlEEPHADIBiCIyhkPLAEHLEEJCCBJPACJdAEDDhGNMh8NGg5NniDkpODOug4PNiDjPODQBhSFFGERniESJiESriECxEQADs=" width="200px" height="90"  alt="installer_signature" />
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:30:32.170

只需更换

```
data:image;base64, 
```

和

```
data:image/png;base64, 
```

你错过了`content-type`图片`src`

# events - ExtJS 中是否存在用于创建组件的全局事件？

> ID：11947357
> 
> 赞同：0
> 
> 时间：2012-08-14T07:07:10.173
> 
> 标签：events, extjs, window, extjs4.1

我想在我的 ExtJS4.1 应用程序中实现某种任务栏，其中包含所有浮动组件（如窗口）的按钮。如果创建了窗口，则任务栏中应出现一个最小化/最大化按钮。

那么，是否有一个中心事件告诉我（浮动）组件已创建或已显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:59:58.437

我没有对此进行测试，但 Ext.ComponentManager 有一个名为“all”的公共属性，它是所有组件的集合。您可以像 onAvailable() 一样添加一个“添加”侦听器。

```
Ext.ComponentManager.all.on('add', function(map, key, item) {
    // Check if item is a Window and do whatever
}); 
```

# .net - 使用 Ruby REXML 进行 DTS xml 转换/操作

> ID：11947363
> 
> 赞同：0
> 
> 时间：2012-08-14T07:07:47.287
> 
> 标签：.net, sql, ruby, ssis, rake

我正在开发一个 DTS SSIS 包并旨在使用 Teamcity buildserver（通过 Ruby / rake）......基本上我想为每个环境（Dev、UAT、Prod）定制不同的连接字符串......

例如在Test中我想指向SQL2008Test，在Dev SQL2008Dev中。这意味着我需要在将 dts 包部署到相应目录之前对其进行操作......

有人对 REXML - ruby​​ 有很好的经验吗？

这是我的 ruby​​ 代码（带有 rakefile）

```
config = {}
File.open(File.join(BUILD_SSIS_DIR, IRS_DSS_USER_PACKAGE)) do |config_file|
    config = REXML::Document.new(config_file)
ConfigTasks.set_dts_constring_irs config, 'ConnectionString', 
"Data Source=SQL2008DEV;Initial Catalog=IRSDEV;Provider=SQLNCLI10.1;Integrated Security=SSPI;Auto Translate=False;Application Name=SSIS-IRS DSS User Data Package-{3CC00FAB-7009-402D-AE03-2426AFC6B7ED}SQL2008 IRS Multiple Connection;"
end 
```

它调用

```
def self.set_dts_constring_irs(config_file, name, connection_string)
    conn_string_element = config_file.root.elements['DTS:ConnectionManager/DTS:Property'];
    conn_string_element['DTS:Name="ConnectionString"'] = connection_string
end 
```

这是我需要操作的 DTS xml

```
 <DTS:ConnectionManager>
    <DTS:Property DTS:Name="DelayValidation">0</DTS:Property>
    <DTS:Property DTS:Name="ObjectName">SQL2008 IRS Multiple Connection</DTS:Property>
    <DTS:Property DTS:Name="DTSID">{3CC00FAB-7009-402D-AE03-2426AFC6B7ED}</DTS:Property>
    <DTS:Property DTS:Name="Description"></DTS:Property>
    <DTS:Property DTS:Name="CreationName">OLEDB</DTS:Property><DTS:ObjectData><DTS:ConnectionManager>
    <DTS:Property DTS:Name="Retain">0</DTS:Property>
    <DTS:Property DTS:Name="ConnectionString">Data Source=SQL2008DEV;Initial Catalog=IRSDEV;Provider=SQLNCLI10.1;Integrated Security=SSPI;Auto Translate=False;Application Name=SSIS-IRS DSS User Data Package-{3CC00FAB-7009-402D-AE03-2426AFC6B7ED}SQL2008 IRS Multiple Connection;</DTS:Property>
</DTS:ConnectionManager></DTS:ObjectData>
</DTS:ConnectionManager> 
```

有人对我的工作有想法吗？例如，如何使用 REXML 来深入了解我需要的连接字符串的元素/属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:46:13.670

我假设您想使用 REXML 在 XML 文件中查找连接字符串，并将其替换为您自己的连接字符串。REXML 允许您使用 XPath 来查找元素并设置它的值：

```
require 'rexml/document'

# assuming:
xml = '<DTS xmlns:DTS="www.microsoft.com/SqlServer/Dts">
         <DTS:ConnectionManager>
           <DTS:Property DTS:Name="DelayValidation">0</DTS:Property>
           <DTS:Property DTS:Name="ObjectName">SQL2008 IRS Multiple Connection</DTS:Property>
           <DTS:Property DTS:Name="DTSID">{3CC00FAB-7009-402D-AE03-2426AFC6B7ED</DTS:Property>
           <DTS:Property DTS:Name="Description"></DTS:Property>
           <DTS:Property DTS:Name="CreationName">OLEDB</DTS:Property>
           <DTS:ObjectData>
             <DTS:ConnectionManager>
               <DTS:Property DTS:Name="Retain">0</DTS:Property>
               <DTS:Property DTS:Name="ConnectionString">Data Source=SQL2008DEV;Initial Catalog=IRSDEV;Provider=SQLNCLI10.1;Integrated Security=SSPI;Auto Translate=False;Application Name=SSIS-IRS DSS User Data Package-{3CC00FAB-7009-402D-AE03-2426AFC6B7ED}SQL2008 IRS Multiple Connection;</DTS:Property>
            </DTS:ConnectionManager>
           </DTS:ObjectData>
         </DTS:ConnectionManager>
       </DTS>'

# find the connection string with XPath
connection_string_xpath = '/DTS/DTS:ConnectionManager/DTS:ObjectData/DTS:ConnectionManager/DTS:Property[@DTS:Name="ConnectionString"]'
new_connection_string = 'your new connection string here'

begin
  doc = REXML::Document.new(xml)
  root = doc.root
  # check that you can find the path you are looking for
  unless root.elements[connection_string_xpath].nil?
    # set the .text of the element to your connection string:
    root.elements[connection_string_xpath].text = new_connection_string
    # test:
    puts doc
  end
rescue REXML::ParseException => rexml_exception
  puts 'Invalid XML', rexml_exception
end 
```

这将输出（删除一些 XML ...）：

```
...
<DTS:Property DTS:Name='ConnectionString'>your new connection string here</DTS:Property>
... 
```

# extjs - 如何在 extjs 鼠标悬停时选择一行？

> ID：11947364
> 
> 赞同：1
> 
> 时间：2012-08-14T07:07:47.367
> 
> 标签：extjs

如何在 extjs 3.2 中选择鼠标悬停的一行？或者我如何在鼠标悬停时获取行的值。

这是我的示例代码

```
grid.getSelectionModel().on('rowselect', function(sm, rowIdx, r) 
{
 alert(r.get('name'));                                                              
}); 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:35:31.867

尝试这个

```
grid.on('mouseover',function(e,t){

  var row = this.getView().findRowIndex(t);
  var rec = this.store.getAt(row);
  console.log(rec.get("name"));

}); 
```

# postgresql - LEFT() 在 Postgres 中不起作用

> ID：11947375
> 
> 赞同：1
> 
> 时间：2012-08-14T07:08:34.680
> 
> 标签：postgresql, cakephp

我有一个格式为 2012-08-10 的日期。我想要日期的前四位数字。使用`extract(year from date)`可以，但是会在 CakePHP 中出现问题。

所以我尝试使用`LEFT()`或`RIGHT()`：

```
select LEFT(date,4) from table 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:29:11.673

`date`如果您想从字符串中获取四位数年份，那么[`to_char`](http://www.postgresql.org/docs/current/static/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE)这就是您想要的：

```
select to_char(some_date, 'YYYY') from table; 
```

实际上，数据库内的几乎所有日期或时间格式都应该完成，`to_char`因此您可能需要阅读[精美的手册](http://www.postgresql.org/docs/current/static/functions-formatting.html#FUNCTIONS-FORMATTING-TABLE)。

[LEFT](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)不起作用，因为 LEFT 想要一个字符串参数，但你给它一个`date`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T07:29:14.657

如果您不想使用提取，则可以使用子字符串

```
select substring('2012-4-03',1,4); 
```

或使用`select to_char(some_date, 'YYYY') from table;`

你也可以写一个函数来调用left。但是postgresql中没有内置函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T08:01:05.903

如果要从 DATE 中提取年份，请使用[EXTRACT() ：](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)

```
SELECT EXTRACT(YEAR FROM fieldname) FROM tablename; 
```

或 TO_CHAR()，正如其他人所提到的。

# perl - perl 脚本，用于自动化 Web 点击并将值传递给 Web 页面

> ID：11947377
> 
> 赞同：-2
> 
> 时间：2012-08-14T07:08:40.033
> 
> 标签：perl, perl-module

我有一个网页应用程序托管在网页中，我使用 url 访问该页面，该页面有一个文本框和启动按钮。我可以在文本框中传递一个值并使用 Perl 脚本自动单击启动按钮。

我用过`WWW::Mechanize`模块。我能够从网页获取数据，但无法设置回页面上的任何内容。我也无法实现点击功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:53:06.177

在我看来，这听起来像是您正在尝试在网页中填写表格。这可以通过[`forms`方法](http://p3rl.org/WWW%3a%3aMechanize#FORM-METHODS)获取页面的表单，然后使用生成的[`HTML::Form`](http://p3rl.org/HTML%3a%3aForm)对象。

如果您已经知道表单值的确切名称，您还可以使用该[`submit_form(with_fields => {…})`方法](http://p3rl.org/WWW%3a%3aMechanize#mech-submit_form-...-)直接发送表单，而无需遍历网页的表单。[文档](http://p3rl.org/WWW%3a%3aMechanize#SYNOPSIS)[概要中提供了`WWW::Mechanize`](http://p3rl.org/WWW%3a%3aMechanize#SYNOPSIS)如何执行此操作的示例。

如果您需要 JavaScript，请参阅[WWW::Mechanize 常见问题解答部分 JavaScript](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFAQ#JavaScript)：[哪些模块像 Mechanize 一样工作并且支持 JavaScript？](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFAQ#Which-modules-work-like-Mechanize-and-have-JavaScript-support-)

# android - 解压文件的进度条

> ID：11947381
> 
> 赞同：3
> 
> 时间：2012-08-14T07:09:13.890
> 
> 标签：android, progress-bar, zipfile

我正在尝试 `progress bar`通过解压缩 sd 卡中的文件来更新 a。我的解压缩工作正常，但`progress bar`没有出现。这是我在 mainactivity 中的代码：

```
private ProgressBar bar;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bar = (ProgressBar) findViewById(R.id.progress);

    String zipFilename = Environment.getExternalStorageDirectory() + "path to my zip file in sd card";  
    String unzipLocation = Environment.getExternalStorageDirectory() + "the output folder";  

    Decompress d = new Decompress(zipFilename, unzipLocation);  
    d.unzip(); 
}

public class Decompress {   
    private String _zipFile;   
    private String _location;
    private int per = 0;

    public Decompress(String zipFile, String location) {
        _zipFile = zipFile;     
        _location = location;      
        _dirChecker("");   
        }    
    public void unzip() {     
        try  {       
            ZipFile zip = new ZipFile(_zipFile);
            bar.setMax(zip.size());
            FileInputStream fin = new FileInputStream(_zipFile);       
            ZipInputStream zin = new ZipInputStream(fin);
            ZipEntry ze = null;       
            while ((ze = zin.getNextEntry()) != null) {

                Log.v("Decompress", "Unzipping " + ze.getName());          
                if(ze.isDirectory()) {           
                    _dirChecker(ze.getName());         
                    } else {      
// Here I am doing the update of my progress bar

                        per++;
                        bar.setProgress(per);
                        FileOutputStream fout = new FileOutputStream(_location + ze.getName());           
                        for (int c = zin.read(); c != -1; c = zin.read()) {  

                            fout.write(c);           
                            }            
                        zin.closeEntry();          
                        fout.close();         
                        }                
                }       
            zin.close();    
            } catch(Exception e) {       
                Log.e("Decompress", "unzip", e);    
                }    
        }    
    private void _dirChecker(String dir) {     
        File f = new File(_location + dir);      
        if(!f.isDirectory()) {       
            f.mkdirs();     
            }   
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T07:22:25.950

您的解压缩代码在 Main/UI 线程上运行，从而冻结了 UI。您想在后台线程中使用`AsyncTask`.

您的案例示例：

```
 private class Decompress extends AsyncTask<Void, Integer, Integer> {

   private String _zipFile;   
   private String _location;
   private int per = 0;

   public Decompress(String zipFile, String location) {
       _zipFile = zipFile;     
       _location = location;      
       _dirChecker("");   
   }

    @Override
    protected Integer doInBackground() {
        try {
            ZipFile zip = new ZipFile(_zipFile);
            bar.setMax(zip.size());
            FileInputStream fin = new FileInputStream(_zipFile);
            ZipInputStream zin = new ZipInputStream(fin);
            ZipEntry ze = null;
            while ((ze = zin.getNextEntry()) != null) {

                Log.v("Decompress", "Unzipping " + ze.getName());
                if (ze.isDirectory()) {
                    _dirChecker(ze.getName());
                } else {
                    // Here I am doing the update of my progress bar

                    per++;
                    publishProgress(per);

                    FileOutputStream fout = new FileOutputStream(_location + ze.getName());
                    for (int c = zin.read(); c != -1; c = zin.read()) {
                        fout.write(c);
                    }
                    zin.closeEntry();
                    fout.close();
                }
            }
            zin.close();
        } catch (Exception e) {
            Log.e("Decompress", "unzip", e);
        }
        return totalSize;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        bar.setProgress(per); //Since it's an inner class, Bar should be able to be called directly
    }

    @Override    
    protected void onPostExecute(Integer... result) {
        Log.i("Completed. Total size: " + result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:37:32.113

在 Android 中，您有一个 UI 线程，以及任意数量的其他后台线程。在任何给定时刻，只能在 UI 线程上完成一项任务。当您在 UI 线程上解压缩文件时，它会阻止任何其他操作，例如与进度对话框有关的操作。Android 提供了一个[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它可以轻松地让您在后台工作，同时还可以将更新发布到 UI 线程。

尝试使用 AsyncTask 在 onPreExecute() 中创建、设置和显示对话框[，](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)解压缩文件并在[doInBackground()中发布进度，在](http://developer.android.com/reference/android/os/AsyncTask.html#doInBackground%28Params...%29)[onProgressUpdate()](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)中显示更新并在[onPostExecute()](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)中关闭对话框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:22:26.563

AsyncTask 是个好主意。应该是这样的：

```
private class RunningAlternativSearchAlways extends
        AsyncTask<Integer, Integer, Void> {

    final ProgressDialog dialog = new ProgressDialog(SearchResult.this) {
        @Override
        public boolean onSearchRequested() {
            return false;
        }
    };

    @Override
    protected void onPreExecute() {
        String DialogTitel = getString(R.string.daten_wait_titel);
        DialogText = getString(R.string.dialog_alternativalways_text);
        sucheNach = getString(R.string.dialog_suche_nach);
        dialog.setCancelable(true);
        dialog.setTitle(DialogTitel);
        dialog.setIcon(R.drawable.icon);
        dialog.setMessage(DialogText);
        dialog.setOnDismissListener(new OnDismissListener() {
            public void onDismiss(DialogInterface arg0) {
                // TODO Auto-generated method stub
                cancleBarcodeWorker();
            }
        });
        dialog.show();
    }

    public void cancleBarcodeWorker() {
        try {
            this.cancel(true);
        } catch (Exception ex) {

        }
    }

    @Override
    protected void onCancelled() {
        dialog.cancel();
        Toast toast = Toast.makeText(SearchResult.this, SearchResult.this
                .getString(R.string.toast_suche_abgebrochen),
                Toast.LENGTH_LONG);
        toast.show();
    }

    @Override
    protected Void doInBackground(Integer... param) {
        // UNZIP YOUR FILE HERE

        // PUBLISH YOUR PROGRESS LIKE THIS
        publishProgress(0, i);
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        switch (values[0]) {
        case 0:
            // Suchbegriffe einzeln analysieren
            dialog.setMessage(DialogText + "\n" + sucheNach + " "
                    + suchBegriffe[values[1]]);
            break;
        }
    }

    @Override
    protected void onPostExecute(Void result) {
        // CLOSE YOUR DIALOG HERE
        dialog.cancle();
    }
} 
```

# php - 致命错误：无法重新声明类 php

> ID：11947395
> 
> 赞同：2
> 
> 时间：2012-08-14T07:09:48.720
> 
> 标签：php

我被要求继续使用 PHP 对我们公司管理系统的其余部分进行编程，尽管我只是新手。在输入 url 时，我收到了这个：Cannot redeclare class SessionHandler in C:\xampp\htdocs\RMS\classes\session\SessionHandler.php on line 4

它具有三 (3) 个类：Session.php、SessionHandler.php、SessionController.php

请检查下面的整个代码：

**对于 SessionHandler.php**

[http://pastebin.com/ziA2advz](http://pastebin.com/ziA2advz)

**注意：** 我已经研究过同样的问题，他们说，使用 require_once。既然已经编码了，你认为还有什么原因会导致这个问题？我对 PHP 很陌生，所以请多多包涵。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T07:13:28.470

[`SessionHandler`](http://php.net/SessionHandler)现在（从 5.4 开始）是保留的类名，您不能将此名称用于您自己的类。

# eclipse - NodeJS eclipse V8 deb

> ID：11947409
> 
> 赞同：1
> 
> 时间：2012-08-14T07:10:51.543
> 
> 标签：eclipse, debugging, node.js, v8

试图关注 [https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)

eclipse设置，工作区中的项目，但是当我使用调试配置运行时：

无法连接到独立 V8 VM 等待握手超时

另外，我有多个 .js 文件。Eclipse V8 插件如何知道哪个是 Node 的服务器脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T03:28:17.363

我对 Eclipse 也有类似的问题。我发现我实际上在端口 5858 上侦听了另一个进程。以下命令显示了端口 5858 上的进程：

```
sudo lsof -i | grep 5858 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:21:15.500

每个节点脚本使用不同的端口。IE`5858`用于第一个脚本和`5859`第二个脚本。

```
node --debug-brk=5858 MyApp1.js
node --debug-brk=5859 MyApp2.js 
```

# ios - 为什么从自定义 xctemplate 创建的目标会在“用户定义”部分显示许多构建设置

> ID：11947412
> 
> 赞同：2
> 
> 时间：2012-08-14T07:11:00.273
> 
> 标签：ios, xcode, ios-frameworks

我创建了一个自定义 XCode 项目模板 (.xctemplate)，可用于构建假 iOS 框架。模板创建的目标工作正常，但有一件事情困扰着我：我无法让 XCode 在相应和众所周知的部分下的目标的构建设置选项卡中显示编译器特定的构建设置（例如：“Apple LLVM编译器 4.0 - 语言”、“Apple LLVM 编译器 - 警告 - 所有语言”）。相反，XCode 将所有这些设置放在一个名为“用户定义”的部分中，甚至重命名一些配置的键。

XCode 版本在 OSX 10.7.4 系统上为 4.4.1。

.xctemplate 的 TemplateInfo.plist 开头是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>Kind</key>
<string>Xcode.Xcode3.ProjectTemplateUnitKind</string>
<key>Identifier</key>
<string>com.blabla.iosFramework</string>
<key>Concrete</key>
<true/>
<key>Description</key>
<string>This is a template for fake iOS Frameworks</string>
<key>SortOrder</key>
<integer>3</integer>
<key>Ancestors</key>
<array>
    <string>com.apple.dt.unit.bundleBase</string>
    <string>com.apple.dt.unit.iPhoneBase</string>
</array>
<key>Targets</key>
<array>
    <dict>
        <key>ProductType</key>
        <string>com.apple.product-type.bundle</string>
        <key>SharedSettings</key>
        <dict>
            <!-- Architectures -->
            <!-- unimportant -->

            <!-- Build Options -->
            <key>GCC_VERSION</key>
            <string>com.apple.compilers.llvm.clang.1_0</string> 

            <!-- Apple LLVM Compiler - Language -->             
            <key>GCC_C_LANGUAGE_STANDARD</key>
            <string>gnu99</string>

            <!-- Apple LLVM Compiler - Warnings - All Languages -->
            <key>GCC_WARN_64_TO_32_BIT_CONVERSION</key>
            <string>YES</string>
            <key>GCC_WARN_SHADOW</key>
            <string>YES</string>
            <key>GCC_WARN_64_TO_32_BIT_CONVERSION</key>
            <string>YES</string>                
            <key>GCC_WARN_INITIALIZER_NOT_FULLY_BRACKETED</key>
            <string>YES</string>
            <key>GCC_WARN_ABOUT_RETURN_TYPE</key>
            <string>YES</string>
            <key>GCC_WARN_ABOUT_MISSING_PROTOTYPES</key>
            <string>YES</string>
            <key>GCC_WARN_UNINITIALIZED_AUTOS</key>
            <string>YES</string>
            <key>GCC_WARN_UNUSED_FUNCTION</key>
            <string>YES</string>
            <key>GCC_WARN_UNUSED_VARIABLE</key>
            <string>YES</string>

            <!-- Apple LLVM Compiler - Warnings - Objective C -->
            <key>GCC_WARN_STRICT_SELECTOR_MATCH</key>
            <string>YES</string>
            <key>GCC_WARN_UNDECLARED_SELECTOR</key>
            <string>YES</string>
        </dict>
        <key>BuildPhases</key> 
```

以下是编译器特定设置在 XCode 中的显示方式：

![在此处输入图像描述](../Images/dcbacd2ada27e6d1f4b5c0354d702375.png)

因为我想使用这个模板将几个静态库转换为框架，所以让 XCode 在各个部分下显示编译器特定的设置会非常有帮助。我究竟做错了什么？

# php - 如何在通过php发布值后获取aspx页面的html内容

> ID：11947419
> 
> 赞同：0
> 
> 时间：2012-08-14T07:11:31.823
> 
> 标签：php, asp.net, html

我有一个 asp.net 页面：“ **abc.aspx** ”和一个 php 页面：“ **def.php** ”。我已经从**def.php**提交了一个表单，动作是**abc.aspx**，它重定向到包含我需要的结果的“ **ghi.aspx ”。**当我只有**abc.aspx**的 url时，如何获取 ghi.aspx 的内容**。**

 **这是我在 def.php 中的代码：

`

```
function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
}
if($_POST["submit"])
{
    $data= array(
        '__VIEWSTATE'=>$_POST['vst'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$RadioButtonMarketStructure'=>$_POST['ticket_rndtrip'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$TextBoxMarketOrigin1'=>$_POST['start_point'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$TextBoxMarketDestination1'=>$_POST['end_point'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$TextboxDepartureDate1'=>$_POST['depart_day'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$TextboxDestinationDate1'=>$_POST['return_day'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$DropDownListCurrency'=>$_POST['currency'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$DropDownListPassengerType_ADT'=>$_POST['adult_content'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$DropDownListPassengerType_CHD'=>$_POST['child_content'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$DropDownListPassengerType_INFANT'=>$_POST['infant_content'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$RadioButtonSearchBy'=>$_POST['search_by'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$numberTrips'=>$_POST['trip_num'],
        'ControlGroupSearchView$AvailabilitySearchInputSearchView$ButtonSubmit'=>$_POST['submit'],
    );
    $url = 'http://abc.aspx';//In my case, I think must be abc.aspx because it redirect to ghi.aspx after post. 
    var_dump(do_post_request($url, $data));
}
?>`

<html>
<head>
</head>
<body>
<form action="" method="post" id="SkySales">
                <input id="viewState" type="hidden" value="/wEPDwUBMGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFJ01lbWJlckxvZ2luU2VhcmNoVmlldyRtZW1iZXJfUmVtZW1iZXJtZTxtWS/I2BXFBfalk96y3LBuGXXD" name="vst" xmlns:bookinginfo="urn:bcs:extensions:bookinginfo">
                  <input type="radio" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_RoundTrip" name="ticket_rndtrip" class="radioSingle" autofocus="" value="RoundTrip" checked=""><label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_RoundTrip">Return</label>
                  <input type="radio" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_OneWay" name="ticket_rndtrip" class="radioSingle" value="OneWay"><label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_OneWay">One Way</label>
                  <input type="radio" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_OpenJaw" name="ticket_rndtrip" class="radioMulti" value="OpenJaw"><label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_OpenJaw">MultiCity</label>
                    <input id="ControlGroupSearchView_AvailabilitySearchInputSearchView_TextBoxMarketOrigin1" name="start_point" class="text airport-select location-origin focus-clear" type="text" data-airport-code="" value="Ho Chi Minh City (SGN)" title="Origin" autocomplete="off" data-airportselect-id="1">
                    <input id="ControlGroupSearchView_AvailabilitySearchInputSearchView_TextBoxMarketDestination1" name="end_point" class="text airport-select location-destination focus-clear" type="text" data-airport-code="" title="Destination" value="Hanoi (HAN)" autocomplete="off" data-airportselect-id="2">
                        <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_TextboxDepartureDate1" class="date" style="display: none; ">Departure</label>
                        <input type="text" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_TextboxDepartureDate1" autocomplete="off" name="depart_day" value="14/08/2012" class="text datepick-depart date-pick hasDatepicker" title="Departure" maxlength="10" data-date="1344877200000">
                        <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_TextboxDestinationDate1" class="date" style="display: none; ">Return</label>
                        <input type="text" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_TextboxDestinationDate1" autocomplete="off" name="return_day" value="21/08/2012" class="text datepick-return date-pick hasDatepicker" title="Return" maxlength="10" data-date="1345482000000">
                    <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListCurrency" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListCurrency_label" style="display:none;">Currency </label>
                    <select id="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListCurrency" name="currency">
                        <option value="VND" selected="selected">Vietnam Dong</option>
                    </select>
                    <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_ADT">Adult</label>
                    <select id="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_ADT" name="adult_content" style="opacity: 1; " class="">
                        <option selected="" value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                        <option value="41">41</option>
                        <option value="42">42</option>
                        <option value="43">43</option>
                        <option value="44">44</option>
                        <option value="45">45</option>
                        <option value="46">46</option>
                        <option value="47">47</option>
                        <option value="48">48</option>
                        <option value="49">49</option>
                        <option value="50">50</option>
                    </select>
                    <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_CHD">Child<span>2-11</span></label>
                    <select id="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_CHD" name="child_content" style="opacity: 1; " class="">
                        <option selected="" value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                    <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_INFANT">Infants<span>&lt;2</span></label>
                    <select id="ControlGroupSearchView_AvailabilitySearchInputSearchView_DropDownListPassengerType_INFANT" name="infant_content" style="opacity: 1; " class="">
                        <option selected="" value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    </select>
                    <input type="radio" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_SearchStandard" name="search_by" value="SearchStandard" checked="checked">
                    <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_SearchStandard" class="small">I need to travel on this date</label>
                    <input type="radio" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_SearchLFF" name="search_by" value="SearchLFF">
                    <label for="ControlGroupSearchView_AvailabilitySearchInputSearchView_SearchLFF" class="small">I just want the cheapest flight</label>
                    <input type="hidden" name="trip_num" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_numberTrips" value="2">
                    <input type="submit" id="ControlGroupSearchView_AvailabilitySearchInputSearchView_ButtonSubmit" name="submit" class="png-bg">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:32:50.940

不要从 def.php 提交到 abc.aspx，而是从 def.php 提交到代理脚本（比如 prx.php）以从 php 发布看看这里：[http ://wezfurlong.org/blog/2006/nov/http -post-from-php-without-curl/](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)

如果你使用 prx.php，它可能会得到你想要的。**

# tridion - 如何为 Tridion 控件等 ASP 控件创建事件处理程序？

> ID：11947423
> 
> 赞同：3
> 
> 时间：2012-08-14T07:11:45.723
> 
> 标签：tridion, tridion-2011

我有一个 aspx 页面 PopupReference。我也有 Tridion 控制按钮和一些 asp 控件，比如`asp:ddSelectOption`（下拉）。

所以在 Popupreference.js 中，当我们为 Tridion 按钮创建事件处理程序时，我试图为我的 asp 控件创建相同的事件处理程序，如下所示：

这是 Tridion 按钮：

```
c.InsertButton = $controls.getControl($("#InsertButton"), 
                                      "Tridion.Controls.Button"); 
```

这是我的下拉列表：

```
c.ddSelectOption = $("#ddSelectOption"); 
```

tridion 按钮的事件处理程序：

```
$evt.addEventHandler(c.InsertButton, "click", this.getDelegate(this._execute)); 
```

我的下拉列表的事件处理程序：

```
$evt.addEventHandler(c.ddSelectOption, "onselectedindexchanged",
                     this.getDelegate(this._ondropdownitemchanged));
console.log('eventhandler created'); 
```

我正在调用函数：

```
RTFExtensions.Popups.PopupReference.prototype._ondropdownitemchanged = 
                      function PopupReference$_ondropdownitemchanged(event) {
  Console.log('Initializing inside dropdown...');
}; 
```

但是我无法在任何地方看到最后一个日志，我认为它没有进入函数内部`ondropdownitemchanged(event)`。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T07:46:54.627

我怀疑你的`onselectedindexchanged`活动需要是一个`change`？

我已经使用下拉菜单实现了类似的东西，这是我的代码中的片段。我希望这可以帮助您找到解决方案：

1）在html/aspx页面中：

```
<select id="systemDD"></select><label for="systemDD">Select a system</label> 
```

2) 在你的 JavaScript 中：

```
var p = this.properties;
var c = p.controls;

// the the drop down items
c.SystemDropDown = $("#systemDD"); 
```

添加事件处理程序：

```
$evt.addEventHandler(c.SystemDropDown, "change",
                     this.getDelegate(this._systemDropDownChanged)); 
```

方法：

```
EditorName.prototype._systemDropDownChanged = 
function EditorName$Extensions$EditorName$_systemDropDownChanged() {
    var p = this.properties;
    var c = p.controls;
    // get the selected system value
    var selectedSystem = $j(c.SystemDropDown).val(); 

}; 
```

我将通过以下方式解决它：

1.  当您获得下拉元素时，请检查您是否将其作为对象
2.  尝试将 onselectedindexchanged 更改为“更改”
3.  浓烈的酒精饮料:)

祝你好运

# javascript - 使用 Javascript DOM 的 CSS 悬停

> ID：11947424
> 
> 赞同：1
> 
> 时间：2012-08-14T07:11:48.720
> 
> 标签：javascript, jquery, html, css, dom

我很难找到解决这个问题的方法：我正在尝试使某些 CSS 元素像鼠标悬停时一样`border-color`或`a`更改不同的颜色。我正在使用 DOM 来逃避 iframe 限制并在边界之外更改代码。到目前为止，这是我的代码：

```
<script type="text/javascript">
window.parent.document.getElementById("screenshots").style.backgroundImage="url(bg.png)";
window.parent.document.getElementById("screenshots").style.color="#000";    
window.parent.document.getElementById("description_container").style.marginBottom="-4px";

$(window.parent.document.getElementById("screenshots")).children("a").each(function (i, o) {         
    $(o).children("img").each(function (i, img) {
        $(img).css({
        /*  "border": "5px", */
            "border-color": "rgba(119, 94, 4, .75)",
            "border-style": "solid",
            "border-radius": "10px",
            "opacity": "0.9",
        });
    });
}); 
```

例如，它说`"border-color": "rgba(119, 94, 4, .75)",`我希望它在悬停时更改颜色。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:19:31.417

不喜欢为此依赖 javascript。您可以在运行时向目标文档添加样式表，其中包含您希望实现的所有规则：

```
$(window.parent.document.head).append('<style type="text/css">a:hover{color:red !important;}</style>'); 
```

## 更新：

~~由于跨域限制，我正在努力在 jsfiddle 上重现这一点。~~ 通过在自己的 iframe 中包含[另一个小提琴，](http://jsfiddle.net/ovfiddle/3tNnE/9/)[工作演示](http://jsfiddle.net/ovfiddle/3tNnE/10/)不受跨域限制的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:18:50.410

就像 Eric Yin 提到的：

您可以将鼠标悬停事件绑定到特定元素或在 html 中使用您的元素声明它。在每个元素的相同循环中，您循环将 onmouseover 事件绑定到每个元素。这种语法相当混乱，或者我只是不习惯 jQuery。请注意，我希望您将其作为练习进行，因为在 js 中设置样式并不是解决此问题的好方法。会是这样吗？

```
$(img).onmouseover = function() { 
    this.css( {
        "border-color": "rgba(119, 94, 4, .75)"
    });
}; 
```

jQuery .hover 可能是更好的选择，因为您可以绑定 2 个函数来切换。有了这个，你可能还需要绑定一个 onmouseout 来重置边框。

诚实地使用 css :hover 类是最好和最有效的解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T08:02:37.930

编辑：编辑了小提琴（和下面的代码）。类定义是否要更改元素。

这是几乎直接来自[jQuery 文档](http://api.jquery.com/css/)[的 jQuery 解决方案的小提琴](http://jsfiddle.net/kjQEj/6/)。

编码：

```
$(".change").hover(function () {
  $(this).css({
    "border-color": "rgba(88, 44, 4, .75)",
    "border-radius": "10px",
    "opacity": "0.5"});
  }, function () {
var cssObj = {
    "border": "5px",
    "border-color": "rgba(119, 94, 4, .75)",
    "border-style": "solid",
    "border-radius": "10px",
    "opacity": "0.9"
}
  $(this).css(cssObj);
}); 
```

​​</p>

# java - 如何在 IE8 上启用 JavaScript？

> ID：11947428
> 
> 赞同：2
> 
> 时间：2012-08-14T07:12:11.043
> 
> 标签：java, javascript, internet-explorer, struts2

我想在 IE 8 上启用 JavaScript，但它不起作用。我试过这种方式： Internet 选项/安全/（选择 Internet 区域）自定义级别启用活动脚本，但它不起作用。当我的应用程序运行时，是否有任何解决方案可以在浏览器上激活 javascript？我的网络应用程序使用 struts2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:19:54.873

以下应在 Internet Explorer 中启用脚本：

1.  在工具菜单上，单击 Internet 选项，然后单击安全选项卡。
2.  单击 Internet 区域。
3.  单击自定义级别。
4.  在“安全设置 - Internet 区域”对话框中，单击“脚本”部分中的“为活动脚本启用”。
5.  单击返回按钮返回上一页，然后单击刷新按钮运行脚本。
    **注意**：要仅允许在此网站上编写脚本，并在 Internet 区域中禁用脚本，请将此网站添加到受信任的站点区域。取自：http: [//support.microsoft.com/gp/howtoscript](http://support.microsoft.com/gp/howtoscript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:37:05.633

在 IE8 中它非常简单。

```
Tools-->Internet Options-->Advanced 
```

在`setting`（浏览选项）中取消选中脚本选项。在图像下方。

![在此处输入图像描述](../Images/6167d0acc5008ae6093cc54b3a0a3f3e.png)

目前我也在 IE8 上工作。它的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:16:32.103

`Start > Run...`在运行框中，输入`regsvr32 jscript.dll`

您应该会收到一个弹出窗口，说明注册成功。然后，您应该能够在浏览器中正确显示 JavaScript。

# jquery - Jquery位置片段问题

> ID：11947430
> 
> 赞同：0
> 
> 时间：2012-08-14T07:12:16.303
> 
> 标签：jquery

我试图理解别人的代码......他有以下内容：

```
 var positionAt = horizontalPosition + ' ' + verticalPosition;
    var positionOffset = String(horizontalOffset + ' ' + verticalOffset);

   //i don't understand the codes below. I don't think Jquery position method support at and of attribues....

   $tooltipElement.position({at: positionAt, of: $element, my: 'left top', offset: positionOffset});

                $element.hover(function(){
                            $instance = $(this).css({'cursor': 'pointer'});
                            $('#tooltip-' + $instance.attr('id') ).fadeIn('fast');
                }, function(){
                            $instance = $(this).css({'cursor': 'auto'});
                            $('#tooltip-' + $instance.attr('id') ).fadeOut('fast');
                }); 
```

我不确定 At、of 和我的属性的位置方法是什么。任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:16:12.320

他正在使用[UI/Position 插件](http://docs.jquery.com/UI/Position)，其中位置函数采用和`my`参数：`at``of`

> **my ：**
> 定义要定位的元素上的哪个位置与目标元素对齐：“水平垂直”对齐。诸如“right”之类的单个值将默认为“right center”，“top”将默认为“center top”（遵循 CSS 约定）。可接受的值：“top”、“center”、“bottom”、“left”、“right”。示例：“左上”或“中心”
> 
> **at ：** 定义目标元素上的哪个位置对齐定位的元素：“水平垂直”对齐。诸如“right”之类的单个值将默认为“right center”，“top”将默认为“center top”（遵循 CSS 约定）。可接受的值：“top”、“center”、“bottom”、“left”、“right”。示例：“左上”或“中心”
> 
> **of ：** 要定位的元素。如果您提供选择器，将使用第一个匹配元素。如果您提供 jQuery 对象，将使用第一个元素。如果您提供事件对象，将使用 pageX 和 pageY 属性。示例：“#top-menu”

# iphone - iOS的交叉编译！需要什么？

> ID：11947432
> 
> 赞同：3
> 
> 时间：2012-08-14T07:12:20.623
> 
> 标签：iphone, ios, c, ipad, cross-compiling

我应该在我的 iPhone 项目中使用[Podofo](http://podofo.sourceforge.net/) 库来处理 PDF。Podofo 是一个用“C”语言编写的库，它允许您玩 PDF。现在这个 Podofo 确实已经对其他库或框架有一些其他依赖项，例如 ..

freetype2、fontconfig 等都可以通过在 Mac OSX 上安装[Macports来满足。](http://www.macports.org/)

最初，我尝试使用 Podofo 网站上给出的命令从 Podofo 源文件创建一个静态库。它确实创建了一个库，但它不是为 arm 架构构建的。因此，当我尝试将该库包含在我的项目中时，它引发了错误。于是我开始寻找iOS交叉编译的步骤。我读过的帖子说，这个过程非常痛苦。

我看到一个，我可以直接将 C-Source 文件添加到我的项目中并使用它。但是我仍然对交叉编译+静态库有一些疑问。

这真的是[一个非常复杂的过程](https://sites.google.com/site/michaelsafyan/software-engineering/haunted-by-an-ancient-post-about-iphone-cross-compilation-and-cmake-based-builds)吗？我知道[什么是交叉编译](https://stackoverflow.com/questions/897289/what-is-cross-compilation)。但我不知道使用 XCode 或[任何其他工具](https://stackoverflow.com/questions/10315039/what-must-i-do-with-c-libraries-on-cross-compilation)执行此操作的确切步骤，以便编译后的构建可以在 iPhone 项目中使用。任何人都可以花一些时间和精力，列出所有可能的步骤和指针，以便像我这样的人将来可以作为参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:27:39.943

实际上并没有针对所有库的具体步骤列表。您必须以与其他方式不同的方式设置 PoDoFo，您只需坐下来进行操作即可。

在最方便的情况下（即使用该库），该过程可能涉及为该库创建一个 Xcode 项目并将其设置为构建为一个框架。这对于 iOS 来说相当简单，因为您只能静态链接到平台上的第三方库。因此，它主要只是设置一个项目来构建一个框架，添加相关文件和编译器/链接器标志，并在必要时为框架设置标题的可见性。

对于其他库，您可以更改 CFLAGS/CPPFLAGS/CXXFLAGS/LDFLAGS 并从命令行构建静态库。这不太方便，但最终会产生大致相同的结果。框架往往更容易使用。同样，您必须自己处理每个库，并决定最佳选择是什么，然后这样做。

此外，关于 PoDoFo 的警告说明：* 它已获得 LGPL 许可，这意味着您*不能*在不违反许可的情况下在 iOS 上使用它。通过静态链接到库，您将创建基于原始软件的衍生作品，这意味着您的软件也必须在 LGPL 下获得许可。

* 请记住，我不是律师，但我花了很多时间阅读各种开源许可证。有关开源许可证的实际法律帮助，请咨询律师。

# c# - ASP.Net 4 与现有的非关系数据库

> ID：11947434
> 
> 赞同：2
> 
> 时间：2012-08-14T07:12:27.423
> 
> 标签：c#, asp.net

我是一个相当称职的 c# 开发人员，但主要从事 GUI 和命令行工具，最近被要求开始考虑创建一个小型 Web 应用程序，以允许移动设备在我们的一个数据库中维护数据。

该数据库是一个 SQL 2008 R2 数据库，虽然表相互关联，但没有定义外键或任何 DDL 关系。

**我的问题：我**应该从哪里开始构建这个简单的应用程序？我只编辑大约 7-10 个主要相关的表（对象、对象位置历史、对象服务历史等）。如果这有助于做出决定，我很乐意提供一些表格 DDL。

它不需要任何花哨的东西，只是一种用户可以查找对象并修改它们以及将新条目添加到链接表（服务历史/位置历史）的方式

我已经研究了几种不同的方法，但我真的很难找到基于现有数据库创建简单网站/应用程序的好例子，其中不包含 FK DDL，我很高兴根据要求提供任何额外的细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:56:29.867

听起来您想在实体框架中使用设计器。

nhibernate 和实体框架（以及大多数其他 OR/M）都允许您使用没有 FK 的数据库。但是您必须自己创建映射。

**休眠**

我个人更喜欢流利的 nhibernate，而不是 nhibernate 中的内置代码映射：http: [//www.fluentnhibernate.org/](http://www.fluentnhibernate.org/)

**实体框架**

您也可以为实体框架创建映射：

*   [http://elegantcode.com/2009/12/15/entity-framework-poco-ef4-a-simple-mapping/](http://elegantcode.com/2009/12/15/entity-framework-poco-ef4-a-simple-mapping/)
*   [实体框架代码优先映射](https://stackoverflow.com/questions/5720889/entity-framework-code-first-mapping)

**香草 ADO.NET**

您当然可以使用普通的 ADO.NET。将它与存储库模式结合起来。可能是启动和运行简单应用程序的最快方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:43:43.400

您应该像使用 FK DDL 一样构建您的应用程序。可能会导致数据错误，但是...... SISO（愚蠢的输入愚蠢的输出）。

# javascript - RadTreeView 节点循环

> ID：11947442
> 
> 赞同：1
> 
> 时间：2012-08-14T07:12:58.797
> 
> 标签：javascript, telerik, radtreeview

我正在使用 RadTreeView，这是一个很棒的控件 我有一个小问题，希望你能帮我解决这个问题 我创建了一个下一步按钮和一个搜索文本框，用户在文本框中输入首选搜索条件并点击下一步。

当他单击“下一步”时，*我搜索 TreeView 并在 TreeView 节点中找到第一个匹配项并将其选中，当他再次单击“下一步”时，我想找到同一节点的下一个匹配项并将其选中。*

我怎样才能做到这一点谢谢:) 如果可能的话，我希望它 2 成为客户端

到目前为止，这是我的代码：

```
<script type="text/javascript">
function FindMatchingNodes() {

            var tree = $find("<%=MainTree.ClientID%>");
            var text = document.getElementById("<%=ApplicationSearchResult.ClientID%>").value;
            var allNodes = tree.get_allNodes();

            var array = new Array();
            staticVar();
           for (var i = 0; i < allNodes.length; i++) {
                var node = allNodes[i];
                var itemText = node.get_text();
                var itemValue = node.get_value();

               if (text != "") {
                   if (text == itemText) {
                        array.push(itemValue);
                    }
                }
            }
            if (staticVar.counter >= array.length) { staticVar.counter = 0; }
          var SelectedNode =tree.findNodeByValue(array[staticVar.counter].toString());
            var pNode = SelectedNode.get_parent();
            SelectedNode.select();
            pNode.set_expanded(true);
            SelectedNode.set_expanded(true);
            array = null;

        }

        function staticVar() {
            if (staticVar.counter == undefined) {
                staticVar.counter = 0        
            }
            else {
                staticVar.counter++
            }
        }
</script> 
```

//标记

```
 <telerik:RadTreeView ID="MainTree" runat="server" CssClass="NewClass" 
        Skin="Office2010Silver">
    <Nodes>
    <telerik:RadTreeNode Selected="true" Text="Hello"  Value="0">
        <Nodes>
            <telerik:RadTreeNode runat="server" Text="Hi" Value="1">
            </telerik:RadTreeNode>
        </Nodes>
        </telerik:RadTreeNode>
    <telerik:RadTreeNode  Text="Hellooooooooooooo" Value="2">
        <Nodes>
            <telerik:RadTreeNode runat="server" Text="helloooo" Value="3">
            </telerik:RadTreeNode>
        </Nodes>
        </telerik:RadTreeNode>
<telerik:RadTreeNode runat="server" Owner="MainTree" Text="Hi" Value="4"></telerik:RadTreeNode>
<telerik:RadTreeNode runat="server" Owner="MainTree" Text="Hiiiiiiiiiiiiiii" Value="5"></telerik:RadTreeNode>
<telerik:RadTreeNode runat="server" Owner="MainTree" Text="Hello" Value="6" 
            ></telerik:RadTreeNode>
    </Nodes>
    <Nodes>
    <telerik:RadTreeNode  Text="Hi" Value="7"></telerik:RadTreeNode>
    <telerik:RadTreeNode  Text="Hiiiiiiiiiiiiiii" Value="8"></telerik:RadTreeNode>
    <telerik:RadTreeNode  Text="Hello" Value="9"></telerik:RadTreeNode>
    </Nodes>
    </telerik:RadTreeView>
    <table border="0">
    <tr>
    <td><telerik:RadTextBox ID="ApplicationSearchResult" runat="server">
   <ClientEvents OnKeyPress="KeyPress" />
    </telerik:RadTextBox></td>
     <td><img src="next.png" onclick="FindMatchingNodes();" style="cursor:pointer;" runat="server" height="17" width="17" ID="NextNode" /></td>
      </tr>
      </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:50:05.767

```
function findNext() {
     var search = $get("<%= ApplicationSearchResult.ClientID %>").value;

     var treeView = $find("<%= MainTree.ClientID %>");
     var selectedNode = treeView.get_selectedNode();
     var nodes = treeView.get_allNodes();
     var index = selectedNode ? nodes.indexOf(selectedNode) + 1 : 0;
     for (var itemsProcessed = 0; itemsProcessed < nodes.length; ++itemsProcessed, ++index) {
          if (index >= nodes.length)
               index = 0;

          var node = nodes[index];
          if (node.get_text() == search) {
               if (selectedNode) {
                    selectedNode.unselect();
               }
               node.select();
               expandAllAncestors(node);
               return;
          }

     }
}

function expandAllAncestors(node) {
     if (node.get_expanded() !== true)
          node.expand();

     if (node.get_level() != 0) {
          expandAllAncestors(node.get_parent());
     }
} 
```

# svn - 颠覆精度

> ID：11947445
> 
> 赞同：0
> 
> 时间：2012-08-14T07:13:08.673
> 
> 标签：svn, ftp

我没有对我的 Web 服务器的命令行访问权限，但我已经能够通过 cPanel 启用 Subversion，并且我可以访问存储库。

我的目标是在我的硬盘上保存我网站的离线副本，以便我可以快速添加或编辑文件、提交并让结果生效。Subversion 真的可以做到这一点吗？

因为现在我已经将一些文件上传到我的存储库，但我在 FTP 上的任何地方都看不到它们，这正常吗？有没有更简单的方法可以做到这一点？

我已经尝试将我的 FTP 安装为一个卷，但是在其中的文件之间导航太慢了，如果我犯了错误，我将无法恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:28:01.130

本质上，Subversion 是这样工作的：

1.  服务器会密切关注更改的文件，并以高度压缩的形式保存这些更改的历史记录。您不能直接使用此表单中的文件。

2.  客户“签出”一个“工作副本”，它本质上是所有当前文件的脱机副本。无论您在这些文件中做什么，对任何其他工作副本或服务器都没有任何影响。

3.  客户端将他们对工作副本所做的更改“提交”到服务器。所有其他客户端现在可以“更新”他们的工作副本，以获得最新状态。

你想要的是以下内容：

1.  将工作副本签出到本地计算机以及服务器上的 Web 文件夹。服务器上的工作副本是“活动的”。

2.  您在本地计算机上的 WC 工作，直到您确定一切顺利。尽可能多地提交您认为必要的提交，与他人合作等。

3.  一旦一切都完成并且您希望这些东西上线，您在 web 文件夹上运行“更新”，将所有更改传输到 web 文件夹。这些变化现在是“活的”。

但是你有一点问题，因为你没有远程机器上的命令行访问权限。因此，运行 svn update 是一个问题。然而 PHP 来拯救这里。

有一个 PHP 的 SVN 插件，描述在：[http](http://php.net/manual/en/book.svn.php) ://php.net/manual/en/book.svn.php 确保它与您的 PHP 一起安装，制作一个为您执行结帐的脚本（上传通过 FTP），然后将脚本更改为调用“更新”。

希望这会有帮助。

# javascript - iScroll4 向下和向上滑动事件

> ID：11947451
> 
> 赞同：0
> 
> 时间：2012-08-14T07:13:34.580
> 
> 标签：javascript, jquery, jquery-mobile, iscroll4

我已经编写了如下代码，但是当我滚动时总是`onScrollEnd`被解雇。如何检测用户是向下滚动还是向上滚动？

```
myScroll = new iScroll('SaleListingContainer', { desktopCompatibility: true, useTransition: true,
                        // topOffset: pullDownOffset,
                        onRefresh: function() {
                            alert("refresh");
                        },
                        onScrollMove: function() {
                            alert("move");
                        },
                        onScrollEnd: function() {
                            alert("end");
                        } 
                    }); 
```

提前感谢您的时间和帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:39:37.127

使用`dirY`属性，如果用户向下滚动则为 1，如果用户向上滚动则为 -1：

```
onScrollEnd: function() {
            if (this.dirY == 1) { alert('scrolling down'); }
            else if (this.dirY == -1) { alert('scrolling up'); }
} 
```

# android - 创建具有可点击图像的Gridview，Android

> ID：11947452
> 
> 赞同：9
> 
> 时间：2012-08-14T07:13:38.720
> 
> 标签：android, android-layout, gridview, android-gridview

我想创建一个具有可点击图像的网格视图..

每当单击图像时，相应的值将显示在该网格视图下方。

![该网格视图的设计应该是这样的](../Images/541501bab61b2aca35c805f48b090495.png)

我面临的问题是在设计部分，我不知道如何设计这样的网格视图..每次我尝试这样做时都会得到一些不好的结果..到目前为止我还没有 android ui 设计经验。

请帮忙 ！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-14T07:17:44.877

`GridView`是一种`ViewGroup`在二维、可滚动的网格中显示项目的方法。网格项目使用 . 自动插入到布局中`ListAdapter`。

有关如何使用适配器动态插入视图的介绍，请阅读使用适配器构建布局。

[http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)

这些都是很好的`GridView`教程将帮助你

[http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)

[http://www.mkyong.com/android/android-gridview-example/](http://www.mkyong.com/android/android-gridview-example/)

和

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T07:17:02.197

我希望它可以帮助你

[http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-24T09:55:22.210

# 尝试这个

1.  主要活动

    ```
    public class MainActivity extends AppCompatActivity {
     List<String> list;
       int[] imageId = {
        R.drawable.a,
        R.drawable.b,
        R.drawable.c,
        R.drawable.d,
        R.drawable.e,
        R.drawable.f,
         };
          String[] web = {
        "Google",
        "Github",
        "Instagram",
        "Facebook",
        "Flickr",
        "Pinterest",
        "Quora",
        "Twitter",
        "Vimeo",
        "WordPress",
        "Youtube",
        "Stumbleupon",
        "SoundCloud",
        "Reddit",
        "Blogger"

        } ;
       @Override
       protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
       ImageAdapter adapter = new ImageAdapter(MainActivity.this,web, 
       imageId);
        GridView grid=(GridView)findViewById(R.id.grid_view);
       grid.setAdapter(adapter);
      grid.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
        }
    });

     }
     } 
    ```

    1.  活动主

        ```
         <?xml version="1.0" encoding="utf-8"?>
          <LinearLayout 
         xmlns:android="http://schemas.android.com/apk/res/android"
         xmlns:app="http://schemas.android.com/apk/res-auto"
          xmlns:tools="http://schemas.android.com/tools"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         tools:context="com.example.mypc.grid.MainActivity">

         <GridView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/grid_view"
         android:layout_width="fill_parent"
           android:layout_height="fill_parent"
          android:numColumns="2"
             android:columnWidth="90dp"
          android:horizontalSpacing="10dp"
        android:verticalSpacing="10dp"
          android:gravity="center"
          android:stretchMode="columnWidth" >
          </GridView>
          </LinearLayout> 
        ```

    2.  图像适配器类

        ```
        public class ImageAdapter extends BaseAdapter
        {
         private Context mContext;
         private final int[] Imageid;
         private final String[] web;
            public ImageAdapter(Context c,String[] web,int[] Imageid )
          {
           mContext = c;
           this.Imageid = Imageid;
             this.web=web;
        }

        @Override
        public int getCount()
        {
             return Imageid.length;
         }
        @Override
         public Object getItem(int position)
        {
             return position;
          }
          @Override
         public long getItemId(int position)
        {
            return 0;
           }
         @Override
         public View getView(int position, View convertView, ViewGroup 
           parent)
          {
             LayoutInflater inflater = (LayoutInflater) 
              mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              View gridView;
              if (convertView == null)
              {
                 gridView = new View(mContext);
                 // get layout from mobile.xml
                 gridView = inflater.inflate(R.layout.grid_layout, null);
                // set value into textview
                TextView textView = (TextView) 
                gridView.findViewById(R.id.grid_item_label);
                textView.setText(web[position]);
               // set image based on selected text
               ImageView imageView = (ImageView) 
               gridView.findViewById(R.id.grid_item_image);
               imageView.setImageResource(Imageid[position]);
           }
           else
         {
              gridView = (View) convertView;
         }
            return gridView;
         }
        } 
        ```

    3.  网格布局

        ```
        <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="5dp" >
        <ImageView
          android:id="@+id/grid_item_image"
          android:layout_width="100dp"
          android:layout_height="100dp"
          android:layout_marginRight="10dp"
          >
         </ImageView>
         <TextView
            android:id="@+id/grid_item_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@+id/label"
            android:layout_marginTop="5px"
            android:textSize="15px" >
           </TextView>

           </LinearLayout> 
        ```

# android - 为什么找不到 Context.openFileOutput() 路径？

> ID：11947455
> 
> 赞同：0
> 
> 时间：2012-08-14T07:13:50.247
> 
> 标签：android, file

我正在尝试使用这种方法来缓存位图。不要出错。但是我在文件系统中找不到文件。需要找到它们，因为缓存无法正常工作并想要调查。

我尝试过`Context.getFilesDir()`这里描述[的 Android 的 Context.openFileOutput() 使用什么文件系统路径？](https://stackoverflow.com/questions/4926027/what-file-system-path-is-used-by-androids-context-openfileoutput). 它返回一个路径`/data/data/com.foo.bar/files`，但我在设备上找不到该路径。使用普通文件浏览器查找“foo”，没有结果。

还有，怎么找？

# javascript - $('#select').val() 返回 UNDEFINED

> ID：11947456
> 
> 赞同：2
> 
> 时间：2012-08-14T07:13:57.580
> 
> 标签：javascript, jquery

我写了一些 jQuery 代码，这是其中的一部分。这总是返回**UNDEFINED**。这是为什么

```
<html>
<head>
<script src="theme/js/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {
   $("#my").click(function() {
        alert($("#adults").val());
    });
 }); 

</script>
</head>
<body>

<form>
<a href="#" id="my">click</a>
<select class="text" id="currency" id="adults">
    <option value="1"  selected="selected">1</option>
    <option value="2" >2</option>
    <option value="3" >3</option>
    <option value="4" >4</option>
</select>
</form>
</body>
</html> 
```

这用于获取有多少成年人。没有它就跑不了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T07:15:30.653

您不能在一个节点上使用**id**属性两次（实际上 id 值在一个 html 页面中应该是唯一的）。在您的情况下，使用*货币*或*成人*。

如果你摆脱额外的`id="currency"`jQuery 将使用表达式返回正确的值`$("#adults").val()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:15:38.607

你给了你的选择元素两个`id`属性。删除一个，它应该可以正常工作。

```
<select class="text" id="currency" id="adults"> 
```

变成

```
<select class="text" id="adults"> 
```

该`id`属性应始终是唯一的。如果您想为多个元素提供相同的“标识符”以便您可以检索一组元素，那么您应该给它一个`class`属性。

当您提供两个`id`属性时，代码不知道使用哪一个，这可能导致不可预测的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:16:42.240

您已为元素分配了两个 ID。请删除第一个，因为 ID[必须是唯一的](http://dev.w3.org/html5/markup/global-attributes.html#common.attrs.id)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:29:39.040

您的选择有 2 个 ID。你不能那样做。您可以向一个对象添加多个类，或者为多个对象使用同一个类，但每个对象只能使用一个 ID，每个 ID 只能使用一个对象。

```
<select class="text" id="currency" id="adults"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T07:17:09.577

嘿，你不能同时使用两个 id 即 `id="currency"`...`id="adults"`删除`id="currency"`，你就完成了:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T07:17:26.017

选择标签中有两个 id，所以第二个不起作用。

`<select class="text" id="currency" id="adults">`

# jquery - 在jQuery插件中获取来电者的ID

> ID：11947458
> 
> 赞同：0
> 
> 时间：2012-08-14T07:14:18.157
> 
> 标签：jquery, jquery-plugins

我在 jquery 方面有一些经验，但现在正在学习插件创建。我在 html 页面中关注了 javascript

```
$("#testid").myplugin({}); 
```

在 JQuery 插件中，我有以下代码：

```
(function( $ ) {
    $.fn.siddeffect = function (options) {
        console.log(this.attr('id'));
        console.log($(this).attr('id'));
        return this;
    };
})( jQuery ); 
```

我在控制台中得到关注

```
undefined
undefined 
```

我也尝试了一些其他组合，但没有获得 id（上面示例中的“testid”）。有什么方法可以在插件中调用 id/selector 吗？

**PS：存在于 html 中，作为正文中的唯一元素。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:22:31.680

我认为

```
$("#testid").myplugin({}); 
```

应该

```
$("#testid").siddeffect({}); 
```

**或者**

`$.fn.siddeffect`应更改为`$.fn.myplugin`.

### 我认为您的原始文档中有拼写错误。

您的代码运行良好。**[见这里](http://jsfiddle.net/Czest/3/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:29:28.230

您的代码看起来不错，除了您调用“myplugin”而不是“siddeffect”。无论如何，它在这里工作正常：

[JSFiddle](http://jsfiddle.net/pHqDF/3/)

干杯

# java - 将联系人从 gmail 导入或获取到 3rd 方应用或小工具

> ID：11947460
> 
> 赞同：0
> 
> 时间：2012-08-14T07:14:34.833
> 
> 标签：java, gmail, gdata

我想将 gmail 中的联系人导入或获取到我的应用程序中。我已经通过使用**gdata**完成了这项工作，但我的问题是我如何每次都能获得更新的联系人和新联系人。

我制作了一个添加到 gmail 中的小工具。该小工具有两个输入字段，`Contact name`并且`Mobile number`我想检索使用该小工具的特定用户的联系人...

如果用户登录其 gmail 帐户，是否有任何方法可以每次在我的 gmail 小工具中获取联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:18:49.350

我认为您需要为 Gmail 密码添加一个字段，并要求 google 服务器进行授权，并且通过收到的令牌，您需要获取联系人运行时，这样您的客户端每次都会更新联系人列表。[您可以通过相同的 gdata API 执行此操作]。

# jpa - JPA JoinColumn 不起作用

> ID：11947473
> 
> 赞同：1
> 
> 时间：2012-08-14T07:15:30.530
> 
> 标签：jpa, annotations

我从书中的一个例子开始。这真的是一个面向虚拟的，我对这本书给出的代码有疑问。

这是代码；

```
@Entity
public class Customer {
@Id
@GeneratedValue
private Long id;
private String firstName;
private String lastName;
private String email;

@OneToOne (fetch = FetchType.LAZY,
           cascade = {CascadeType.PERSIST, CascadeType.REMOVE})
@JoinColumn(name = "address_fk")
private Address address;
//getter, setter, Constructor 
```

--//----------------------------------------

```
@Entity
public class Address {
@Id @GeneratedValue(strategy = GenerationType.AUTO)
private String id;
private String city;
private String street;
private String number; 
```

在这里，它抱怨 JoinColumn 注释。它说找不到列address_fk。

这是与 IDE 相关的问题吗？我错过了什么吗？

编辑：数据库中尚未创建表。我希望它们能够通过我的 persistence.xml 自动出现在数据库中

```
<property name="eclipselink.ddl-generation" value="create-tables"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:59:39.567

使用`@JoinColumn`注释来指定外部列名`address_fk`而不是默认值`address_id`是可以的。

可能不起作用的是带有字符串的[@GeneratedValue 。](http://docs.oracle.com/javaee/6/api/javax/persistence/GeneratedValue.html)根据规范，只有作为生成主键的整数类型是可移植的。

# java - 在java中按3组用空格分割数字

> ID：11947478
> 
> 赞同：13
> 
> 时间：2012-08-14T07:15:42.373
> 
> 标签：java, split, numbers

有没有办法在java中拆分一个双数，以便所有3位数字组都用空格分隔，并且逗号后只出现2位数字？用逗号将它们分开很容易：

```
DecimalFormat df = new DecimalFormat("###,###.00");
df.format(number); 
```

所以这`235235.234`变成了`234,234.23`

我需要的是`234 234.23`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-14T07:19:05.533

我相信您的格式字符串中的逗号并不是*真正*的逗号 - 它只是`DecimalFormatSymbols`您正在使用的分组符号。

试试这个：

```
// TODO: Consider specifying a locale
DecimalFormatSymbols symbols = new DecimalFormatSymbols();
symbols.setGroupingSeparator(' ');
DecimalFormat df = new DecimalFormat("###,###.00", symbols); 
```

或者作为最后一行的替代：

```
DecimalFormat df = new DecimalFormat();
df.setDecimalFormatSymbols(symbols);
df.setGroupingSize(3);
df.setMaximumFractionDigits(2); 
```

# ruby - 创建新项目时 redmine 或 ruby 500 内部错误：未定义的局部变量

> ID：11947480
> 
> 赞同：0
> 
> 时间：2012-08-14T07:16:00.667
> 
> 标签：ruby, redmine

我刚刚在 ubunutu/nginx/postgres 上安装了 redmine，在创建新项目时出现此错误......有什么想法吗？（我是红宝石的新手，所以不能真正说出它想要发生的事情）

```
Started GET "/projects/new" for 50.116.19.7 at Tue Aug 14 08:31:52 +0200 2012
Processing by ProjectsController#new as HTML
  Rendered projects/_form.html.erb (4.2ms)
  Rendered projects/new.html.erb within layouts/base (6.0ms)
Completed 500 Internal Server Error in 131ms

ActionView::Template::Error (undefined local variable or method `self_and_descendants' for #<Project:0xb490ca54>):
    4: <!--[form:project]-->
    5: <p><%= f.text_field :name, :required => true, :size => 60 %></p>
    6: 
    7: <% unless @project.allowed_parents.compact.empty? %>
    8:     <p><%= label(:project, :parent_id, l(:field_parent)) %><%= parent_project_select_tag(@project) %></p>
    9: <% end %>
    10: 
  app/models/project.rb:333:in 'allowed_parents'
  app/views/projects/_form.html.erb:7:in
'_app_views_projects__form_html_erb___577557764__627958918'
  app/views/projects/new.html.erb:4:in     '_app_views_projects_new_html_erb___126828522__630632748'
  app/helpers/application_helper.rb:950:in `labelled_form_for'
  app/views/projects/new.html.erb:3:in     '_app_views_projects_new_html_erb___126828522__630632748' 
```

**来自 redmine/app/models/project.rb （抱歉，似乎无法弄清楚如何将格式代码设置为在此处显示**）

```
# Returns an array of projects the project can be moved to
   # by the current user
  def allowed_parents
    return @allowed_parents if @allowed_parents
    @allowed_parents = Project.find(:all, :conditions =>        Project.allowed_to_condition(User.current, :add_subprojects))
    @allowed_parents = @allowed_parents - self_and_descendants
    if User.current.allowed_to?(:add_project, nil, :global => true) || (!new_record? && parent.nil?)
  @allowed_parents << nil
end
unless parent.nil? || @allowed_parents.empty? || @allowed_parents.include?(parent)
  @allowed_parents << parent
end
@allowed_parents
  end

  # Sets the parent of the project with authorization check
  def set_allowed_parent!(p)
    unless p.nil? || p.is_a?(Project)
      if p.to_s.blank?
        p = nil
      else
        p = Project.find_by_id(p)
     return false unless p
  end
end
if p.nil?
  if !new_record? && allowed_parents.empty?
    return false
  end
elsif !allowed_parents.include?(p)
  return false
                                                                                            334,5         35%
elsif !allowed_parents.include?(p)
  return false
end
set_parent!(p)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:08:41.253

正如您在项目模型中声明的那样，没有函数调用 self_and_descendants。

使用 self.descendants

查看此链接[类后代](http://apidock.com/rails/Class/descendants)

# c - 编译器级别和硬件级别的内存防护

> ID：11947485
> 
> 赞同：2
> 
> 时间：2012-08-14T07:16:31.977
> 
> 标签：c, memory-barriers, memory-fences

[我在这里](https://stackoverflow.com/questions/8841738/c-memory-barriers-for-atomics/8845503#8845503)读到了关于内存围栏的信息......我需要对此进行一些澄清

> asm volatile ("" : : : "内存")

这提供了编译器级别的内存栅栏，并且处理器在使用它时仍然可以进行重新排序。

无论如何，我可以使用类似的指令同时实现编译器级别的防护和处理器级别的防护吗？

我碰到，

> asm volatile("sfence" : : : "memory")

这是做什么的？它是否仅提供编译器级别的存储防护？

对此的任何输入都将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:45:19.903

它们执行两个概念相关但功能不同的操作：

```
asm volatile ("" : : : "memory") 
```

告诉编译器不要在该点周围重新排序内存访问（否则它可以自由地进行优化目的），以便您可以确保写入代码的加载和存储在您到达该点时完成编码。

```
asm volatile("sfence" : : : "memory") 
```

是一个实际的 intel-family cpu 命令（sfence），它告诉*硬件*不要重新排序存储（还有 lfence 和 mfence 硬件指令）以进行优化；添加“内存”约束告诉编译器不要重新排序内存访问。

维基百科对这个主题有很好的处理（http://en.wikipedia.org/wiki/Memory_barrier）；如果你想更深入一点，你应该查看英特尔程序员手册（http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html/）

# facebook - 我如何将 Hybridauth 用于 Facebook 标签？

> ID：11947488
> 
> 赞同：0
> 
> 时间：2012-08-14T07:16:35.940
> 
> 标签：facebook

我正在寻找可以将 hybridauth 集成到 facebook 标签应用程序中的方式。我只需要知道连接到选项卡的用户 ID，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:26:06.683

您想在您的应用程序中集成多个社交服务提供商吗？

您可以使用流行的 socialauth 库。该库还帮助您集成 facebook、twitter 和 myspace。

这是链接。

[http://code.google.com/p/socialauth-android/](http://code.google.com/p/socialauth-android/)

# javascript - 如何更新和刷新 ajax 加载的 div 中的每一行？

> ID：11947499
> 
> 赞同：0
> 
> 时间：2012-08-14T07:17:11.993
> 
> 标签：javascript, ajax, jquery

我在 AJAX 加载的 div 中使用 jQuery 更新和自动刷新我的表格行时遇到了困难。从选择选项中选择值后在 div 中加载数据的代码：AJAX 部分

```
<script type="text/javascript">
  function showUser2(str)
  {
    <!-- code -->
  }
  </script> 
```

选择选项部分：

```
<select name ='country_select' onchange='showUser2(this.value)'>
  <!-- options -->
</select> 
```

加载了包含所选国家/地区所有用户列表的 DIV：

```
<div id='txtHint'></div> 
```

DIV 包含：

标题：

用户名 删除用户 更改状态

数据：

Ben 删除图标 状态图标

最大删除图标 状态图标

代码：

```
<div id="otherdiv">
 <!-- Delete/ Enable user -->
<ul>
 <li>
  <?php echo $data[user_name]; ?>
 </li> 
 <li>
  <a href="#" id="<?php echo $data[training_id]; ?>" class="delete_button">X</a>
 </li>
 <li>
   <a href="#" id="<?php echo $data[training_id]; ?>" class="deassign_training">
    <img src='images/on.png' style='border:0;'/>
   </a>
 </li>
</ul> 
```

```
 <!-- Delete/Disable user -->
<ul>
 <li>
  <?php echo $data[user_name]; ?>
 </li>  
 <li>               
  <a href="#" id="<?php echo $data[training_id]; ?>" class="delete_button">X</a>
 </li>
 <li>
  <a href="#" id="<?php echo $data[training_id]; ?>" class="assign_training">
   <img src='images/off.png' style='border:0;'/>
  </a>
 </li>
</ul> 
```

当我单击图像图标以删除/启用/禁用用户时，它不起作用。这是删除用户的代码：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script language="javascript" type="text/javascript">
  $(function() {
  $(".delete_button").click(function() {
  var id = $(this).attr("id");
  var dataString = 'id='+ id ;
  var parent = $(this).parent();

  $.ajax({
     type: "POST",
     url: "deleteajax.php",
     data: dataString,
     cache: false,

    success: function(data)
    {
      $("#otherdiv").load("index.php");
    }

   });

  return false;
    });
  });
</script> 
```

以下代码用于启用/禁用用户：

```
$(function()
  {
    $(".assign_training").click(function() 
    {
      var id = $(this).attr("id");
      var dataString = 'id='+ id ;
      var parent = $(this).parent();

      $.ajax(
      {
        type: "POST",
        url: "assign.php",
        data: dataString,
        cache: false,

        success: function(data)
        { 
          $("#otherdiv").load("index.php");
        }

      });
      return false;
    });

    $(".deassign_training").click(function() 
    {
      var id = $(this).attr("id");
      var dataString = 'id='+ id ;
      var parent = $(this).parent();

      $.ajax(
      {
        type: "POST",
        url: "deassign.php",
        data: dataString,
        cache: false,

        success: function(data)
        {
          $("#otherdiv").load("index.php");
        }

      });

      return false;
    });

  }); 
```

我不确定为什么在选择国家名称后它会起作用。我已经尝试了 Stack Overflow 和其他很多网站的很多技术，但最后它不起作用。仅当直接在页面上加载用户详细信息时才有效。

我希望我能找到一个有用的答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:30:15.100

据我所知，您正在创建 DOM 之前启动删除/启用/禁用事件。尝试更改这些块：

```
<script language="javascript" type="text/javascript">
  $(function() {
    <!-- YOUR CODE HERE -->
  });
</script> 
```

至：

```
<script language="javascript" type="text/javascript">
  $(document).ready(function() {
    <!-- YOUR CODE HERE -->
  });
</script> 
```

这应该有帮助

# performance - 修改一些立方体的长度Y很慢

> ID：11947505
> 
> 赞同：0
> 
> 时间：2012-08-14T07:17:43.147
> 
> 标签：performance, fft, webgl, xtk

我想写一个 3d 版本的 fft。（像这样：https://wiki.mozilla.org/File:Fft.png）所以我创建了几个条形图，在一个外部函数中，我的第一个方法是将 lengthY 设置为一个值。然后我调用 bar.modified() 来强制它重新绘制。

如果我现在使用超过 50 条，它会非常慢（在我的 4 核 CPU 上）。我想有更好的方法来做到这一点，对吧？

来源：

```
var elements = new Array();

create3d = function(len) {
    var r = new X.renderer3D();

    r.init();

  if(a.length == 0){
     for ( var y = 0; y < len; y++) {
      var c = new X.cube();
      a.push(c);
     }
  }

     for ( var i = 0; i < len; i++) {
      a[i].center = [i*2 , 0, 0];
      a[i].lengthX = 1; 
      a[i].lengthY = 20;
      a[i].lengthZ = 1;

      a[i].color = [i%2,0,0];

      r.add(a[i]);
    }
  r.render();
};

function setVal(index,val){
    var element = a[index];
    element.lengthY = val;
    element.modified();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T19:15:52.643

我创建了一个关于如何做到这一点的 JSFiddle，它对于 1000 个立方体来说非常快

[http://jsfiddle.net/haehn/6fVRC/](http://jsfiddle.net/haehn/6fVRC/)

# opengl-es - 改进 OpenGL 2.0 片段着色器

> ID：11947512
> 
> 赞同：0
> 
> 时间：2012-08-14T07:18:08.583
> 
> 标签：opengl-es, opengl-es-2.0, textures, fragment-shader

如何改进这个片段着色器：

```
 #ifdef GL_ES
precision mediump float;
#endif

varying vec4 v_fragmentColor;
varying vec2 v_texCoord;

uniform sampler2D u_texture;

uniform vec2 blurSize;
uniform vec4 substract;

  void main() {
    vec4 sum = vec4(0.0);
    sum += texture2D(u_texture, vec2(v_texCoord.x - 4.0 * blurSize.x, v_texCoord.y)) * 0.05;
    sum += texture2D(u_texture, vec2(v_texCoord.x - 3.0*blurSize.x, v_texCoord.y)) * 0.09;
    sum += texture2D(u_texture, vec2(v_texCoord.x - 2.0*blurSize.x, v_texCoord.y)) * 0.12;
    sum += texture2D(u_texture, vec2(v_texCoord.x - blurSize.x, v_texCoord.y)) * 0.15;
    sum += texture2D(u_texture, vec2(v_texCoord.x, v_texCoord.y)) * 0.16;
    sum += texture2D(u_texture, vec2(v_texCoord.x + blurSize.x, v_texCoord.y)) * 0.15;
    sum += texture2D(u_texture, vec2(v_texCoord.x + 2.0*blurSize.x, v_texCoord.y)) * 0.12;
    sum += texture2D(u_texture, vec2(v_texCoord.x + 3.0*blurSize.x, v_texCoord.y)) * 0.09;
    sum += texture2D(u_texture, vec2(v_texCoord.x + 4.0*blurSize.x, v_texCoord.y)) * 0.05;
    gl_FragColor = sum;    
} 
```

我用它来模糊一条线，所以大多数时候它混合了相同的颜色。我希望它忽略（保留为背景颜色）具有相同周围颜色的像素。我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:07:41.333

忽略对线条颜色的检查，我提出的一个建议是将纹理坐标计算向上移动到顶点着色器中并将它们作为变量传递。例如，您可以将 移动`vec2(v_texCoord.x - 4.0 * blurSize.x, v_texCoord.y)`到顶点着色器中，并将其作为`firstTextureCoordinate`变量传递，这样您只需要执行

```
sum += texture2D(u_texture, firstTextureCoordinate) * 0.05; 
```

在您的片段着色器中。

这有两个显着的优点，第一个是它不是对每个片段执行计算，而是每个顶点只运行一次计算，然后使用快速硬件插值将其输入片段着色器。顶点通常比片段少得多，这样可以节省一些计算。

第二个也许更重要的优势是，在 iOS 设备中的 PowerVR 系列等基于 tile 的延迟渲染器上，从作为变量输入的坐标进行纹理提取可以避免依赖纹理读取。这让这些 GPU 可以对纹理提取进行一些很好的缓存，而且我已经看到它在这个特定硬件上的性能上产生了巨大的差异。

通过一些巧妙的逻辑，您可能仍然能够减少纹理提取的数量，但这是我在 OpenGL ES 片段着色器中随处使用的简单优化，它总能给我带来不错的性能提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:21:01.807

着色器中的大量 if 检查是不行的。

另一种选择可能是添加一个统一（如果你有很多行，则为统一数组），它告诉着色器该行的中心（x 坐标仅适用于你的线）在哪里。

然后，着色器可以有一个 if 检查，如下所示：

```
float spread = 4.0 * blurSize.x;
if(lineCentre-spread < gl_FragCoord.x && gl_FragCoord.x < lineCentre+spread){
   //You existing logic for blurr goes here.
}else{
    gl_FragColor = texture2D(u_texture, vec2(v_texCoord.x, v_texCoord.y)) * 0.16;
} 
```

如果您周围有很多空白区域不会出现模糊，这可以提高整体性能。

# javascript - 使用 javascript 更新谷歌驱动器上的文件内容

> ID：11947517
> 
> 赞同：2
> 
> 时间：2012-08-14T07:18:47.280
> 
> 标签：javascript, google-drive-api

基于@Nvico很好的[答案](https://stackoverflow.com/a/10331393/37980)，我能够将文件上传到谷歌驱动器，问题是答案上的代码每次都会创建一个新文件，有没有办法给已创建的文件ID直接更新其内容（使用[文件：更新](http://developers.google.com/drive/v2/reference/files/update)api）而不创建新的？

目前我的解决方案是每次我想更新文件以删除旧文件时​​使用[Files:delete api，然后使用 @Nvico 代码创建一个新文件](http://developers.google.com/drive/v2/reference/files/delete)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:59:39.530

您可以使用几乎相同的代码向 drive.files.update 端点发送更新请求，而不是使用 drive.files.insert 端点：

```
/**
 * Update existing file.
 *
 * @param {String} fileId ID of the file to update.
 * @param {Object} fileMetadata existing Drive file's metadata.
 * @param {File} fileData File object to read data from.
 * @param {Function} callback Callback function to call when the request is complete.
 */
function updateFile(fileId, fileMetadata, fileData, callback) {
  const boundary = '-------314159265358979323846';
  const delimiter = "\r\n--" + boundary + "\r\n";
  const close_delim = "\r\n--" + boundary + "--";

  var reader = new FileReader();
  reader.readAsBinaryString(fileData);
  reader.onload = function(e) {
    var contentType = fileData.type || 'application/octect-stream';
    // Updating the metadata is optional and you can instead use the value from drive.files.get.
    var base64Data = btoa(reader.result);
    var multipartRequestBody =
        delimiter +
        'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(fileMetadata) +
        delimiter +
        'Content-Type: ' + contentType + '\r\n' +
        'Content-Transfer-Encoding: base64\r\n' +
        '\r\n' +
        base64Data +
        close_delim;

    var request = gapi.client.request({
        'path': '/upload/drive/v2/files/' + fileId,
        'method': 'PUT',
        'params': {'uploadType': 'multipart', 'alt': 'json'},
        'headers': {
          'Content-Type': 'multipart/mixed; boundary="' + boundary + '"'
        },
        'body': multipartRequestBody});
    if (!callback) {
      callback = function(file) {
        console.log(file)
      };
    }
    request.execute(callback);
  }
} 
```

主要区别在于请求 URL 和方法：

```
PUT /upload/drive/v2/files/<FILE_ID> 
```

# ios - iOS5：NSInvalidArgumentException，原因：'接收者没有标识符的segue

> ID：11947520
> 
> 赞同：0
> 
> 时间：2012-08-14T07:18:51.993
> 
> 标签：ios, segue, uistoryboard, uistoryboardsegue

我试图从一个`UIViewController (VC1)`到一个`UITableViewController (VC2)`，我已经尝试了所有常见的嫌疑人。其他帖子好像没找到解决办法

1.  在 Storyboard 中，我创建了一个从 VC1 到 VC2 的模态序列，并给它一个标识符“ `VC2Segue`”。

2.  单击 VC1 的连接属性会显示一个`'Storyboard Segue': modal--VC2`.

3.  单击 VC2 的连接属性会显示一个`'Referencing Story Board Segue': modal--VC1`

4.  在 VC1 中，我有一种`UITableViewDelegate`方法可以响应 VC1 中的单元格选择。这是我尝试转到详细信息视图（VC2）的地方：

    ```
    -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
            [super tableView:tableView didSelectRowAtIndexPath:indexPath];
            [self performSegueWithIdentifier:@"VC2Segue" sender:self]; 
    ```

    }

5.  但是，一旦`performSegueWithIdentifier`被调用，我就会收到一个异常：

    'NSInvalidArgumentException'，原因：'接收者（VC1）没有标识符'VC2Segue'的segue'

6.  如果是相关的。VC1 继承自一个外部专有库 (Parse.com: `PFQueryTableViewController`)，它似乎实例化了一个“UITableView”。因此 UITableView 不会在 Storyboard 上显示 TableCells，而是 VC1 是 UITableView 的委托，这就是 VC1 (A UIViewController) 访问上述方法的方式。

我检查了三倍的连接，剪切和粘贴文本字段，确保故事板笔尖分别指向类 VC1 和 VC2，并且厌倦了推送和模式。我显然遗漏了一些东西，但这是我第一次使用 iOS 执行任务。

# c# - 在 VS2005 中将确认框输入到 C# 变量

> ID：11947524
> 
> 赞同：0
> 
> 时间：2012-08-14T07:19:15.207
> 
> 标签：c#, javascript, visual-studio-2005

如何使用 asp.net 中的确认框从用户那里获取输入并将输入存储在 C# 变量中。无论是确定还是取消按钮。请帮助我前进。

例如我这样使用， Response.Write("confirm('Testing FiileAlready existing Replace it?')");

相反，我需要 c# 变量中确认框的输出...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:47:37.797

尝试这个：

你的javascript函数：

```
<script type="text/javascript" language="javascript">
    function ConfirmOnReplace() {
        if (confirm("Are you sure?") == true)
            return true;
        else
            return false;
    }
</script> 
```

ASP.NET 按钮：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="return ConfirmOnReplace();" /> 
```

和代码隐藏（YourPage.aspx.cs）文件：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Button1.Click += new EventHandler(Button1_Click);
    }

    void Button1_Click(object sender, EventArgs e)
    {
        // If you are here, your javascript method returned true
        // TODO: Replace the file, or do what you want
    }
} 
```

# c# - C# - 如何将 For 循环转换为 Linq 表达式？

> ID：11947526
> 
> 赞同：3
> 
> 时间：2012-08-14T07:19:20.723
> 
> 标签：c#, linq, for-loop

我有以下循环：

```
for (var i = 0; i < myStringList.Count; i++)
{
    myStringList[i] = myStringList[i].ToUpper();
} 
```

变成 Linq 表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:21:36.387

用这个

```
myStringList = myStringList.Select(x => x.ToUpper()).ToList(); 
```

最后我`.ToList()`假设 myStringList 是一个`List<string>`.

**FoodforThought：**有`List`一种方法`ForEach()`可以像这样对每个项目执行操作。

```
myStringList.ForEach(x => x.Foo = Bar); 
```

但这不能在这里使用，因为该方法可用于更改项目的属性，但不能用于更改项目本身。

所以这不会做任何事情

```
 myStringList.ForEach(x => x = x.ToUpper()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T07:20:15.783

```
myStringList = myStringList.Select(x => x.ToUpper()).ToList(); 
```

# php - 用于与 OpenLayers 交互的 php 框架

> ID：11947527
> 
> 赞同：2
> 
> 时间：2012-08-14T07:19:28.210
> 
> 标签：php, openlayers

最敬业的是什么？我测试了 drupal openlayers 模块，但它似乎对我的项目有限。

我在看 CakePhp、Symphony 和 Zend。有人对其中之一有经验吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:07:23.483

我喜欢 Yii 框架，还有一个用于 OpenLayers 的小部件

Yii 框架：www.yiiframework.com

小部件： [http ://code.google.com/p/yii-openlayers/](http://code.google.com/p/yii-openlayers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:12:17.667

[http://code.google.com/p/yii-openlayers/](http://code.google.com/p/yii-openlayers/)是空的这是 Yii 的另一个小部件： [https ://bitbucket.org/coxa/yii-open-layers-widget](https://bitbucket.org/coxa/yii-open-layers-widget)

# xslt - 在 xslt 转换期间比较来自不同级别的属性

> ID：11947528
> 
> 赞同：2
> 
> 时间：2012-08-14T07:19:29.230
> 
> 标签：xslt, xslt-1.0

下面我创建了一个简单的 XML 示例来说明我的 xml 的样子。我有一个包含我想观看的数字的属性。它有点像一个计数器，在转换过程中，每当计数器 ++ 时，我都想添加一些东西。

问题是我的 xml 文件中的级别数。在这里我只做了三个，但实际上我有 8 个甚至更多。我需要找到一种方法将当前节点与前一个节点进行比较（反之亦然），但要考虑级别。因此，例如在下面的示例中，需要将 id 为 4 的 lvl2 节点与 id 为 3 的 lvl3 节点进行比较，**以找出 id 属性是否已被提升**。

xml:

```
<lvl1 id="1">
    <lvl2 id="1">
        <lvl3 id="1"></lvl3>
        <lvl3 id ="2"></lvl3>
    </lvl2>
    <lvl2 id="2">
        <lvl3 id="3"></lvl3>                        
    </lvl2>
    <lvl2 id="4"></lvl2>
</lvl1> 
```

由于使用 xslt 全局计数器变量是不可能的，所以我目前没有想法，似乎在这里或其他任何地方都找不到。

输出将类似于：

```
 <ul>
<div>id 1</div>
<li>
  <ul>
    <li>
      <ul>
        <li></li>
        <div>id 2</div>
        <li></li>
      </ul>
    </li>
    <li>
      <ul>
        <div>id 3</div>
        <li></li>
      </ul>
    </li>
    <div>id 4</div>
    <li></li>
  </ul>
</li> 
```

这里将 xml 转换为 html 输出但没有 div 的样式表：

```
<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
<xsl:template match="/">
    <ul>
            <xsl:value-of select="@id"/>
            <xsl:apply-templates select="lvl1"/>
    </ul>
</xsl:template>
<xsl:template match="lvl1">
    <li class="{@id}">
        lvl 1
        <ul>
            <xsl:apply-templates select="lvl2"/>
        </ul>
    </li>
</xsl:template>
<xsl:template match="lvl2">
    <li class="{@id}">lvl 2
        <ul>
            <xsl:apply-templates select="lvl3"/>
        </ul>
    </li>
</xsl:template>
<xsl:template match="lvl3">
    <li class="{@id}">lvl 3
    </li>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:39:33.910

如果应用此 XSLT

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" />

    <xsl:template match='/'>
        <ul>
            <xsl:apply-templates select='*' />
        </ul>
    </xsl:template>

    <xsl:template match="*">
        <li>
        <div>
            <xsl:value-of select='@id' />
            <xsl:if test='count(*)&gt;0'>
                <ul>
                    <xsl:apply-templates select='*' />
                </ul>
            </xsl:if>
        </div>
        </li>
    </xsl:template>

    </xsl:stylesheet> 
```

你得到的东西可能是你问的：

```
 <ul>
      <li>
        <div>1<ul>
            <li>
              <div>1<ul>
                  <li>
                    <div>1</div>
                  </li>
                  <li>
                    <div>2</div>
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <div>2<ul>
                  <li>
                    <div>3</div>
                  </li>
                </ul>
              </div>
            </li>
            <li>
              <div>4</div>
            </li>
          </ul>
        </div>
      </li>
    </ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-22T23:43:11.817

这个问题比看起来要复杂一些，因为`preceding::`并不总是在这里找到`@id`当前元素之前的最后一个。您还需要检查`@id`父级并考虑根位置。此代码使用问题中给出的 XML 生成所需的结果。看我里面的评论。

```
<xsl:template match="/">
    <ul>
        <xsl:apply-templates/>
    </ul>
</xsl:template>

<xsl:template match="*">
    <!-- get preceding (or parent) id -->
    <xsl:variable name="lastId">
        <xsl:choose>
            <!-- try to get id from first preceding element -->
            <xsl:when test="preceding::*[1]/@id">
                <xsl:value-of select="preceding::*[1]/@id"/>
            </xsl:when>
            <!-- there could still be ids in parent elements -->
            <xsl:when test="../@id">
                <xsl:value-of select="../@id"/>
            </xsl:when>
            <!-- or this is the root element -->
            <xsl:otherwise>
                <xsl:value-of select="0"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>
    <!-- now compare current and last id -->
    <xsl:if test="@id > $lastId">
        <div>
            <xsl:text>id </xsl:text>
            <xsl:value-of select="@id"/>
        </div>
    </xsl:if>
    <!-- create list item -->
    <li>
        <!-- check for subelements -->
        <xsl:if test="*">
            <ul>
                <xsl:apply-templates/>
            </ul>
        </xsl:if>
    </li>
</xsl:template> 
```

根据您的实际情况，您可能希望限制`match="*"`为，如[LarsH](https://stackoverflow.com/users/423105/larsh)`match="*[starts-with(local-name(),'lvl')]"`的评论中所建议的那样。

# jquery - 使用jquery datatable一次对多个表应用fnFilter

> ID：11947529
> 
> 赞同：1
> 
> 时间：2012-08-14T07:19:30.167
> 
> 标签：jquery, datatables

对于以下条件，它将 dataTable 函数应用于所有类名为“sort”的表

```
var adminTables = $('.sort').dataTable() 
```

如何一次将**fnFilter('some string')**函数应用于该特定页面中选择的所有表？我想一次搜索多个数据表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T02:54:08.553

您是否考虑过使用[fnFilterAll](http://datatables.net/plug-ins/api#fnFilterAll)并进行试验？

这是 jsbin 中的示例（来自数据表站点）。

[http://live.datatables.net/ukijec/edit#preview](http://live.datatables.net/ukijec/edit#preview)

# xcode - XCode：从已编译的应用程序转到企业许可证或安装 CD

> ID：11947532
> 
> 赞同：2
> 
> 时间：2012-08-14T07:19:38.693
> 
> 标签：xcode, macos, installation, distribution

这是我在 Mac 上的第一个版本。虽然我们会在 App Store 上向用户和小型学校销售该应用程序，但在较大的学校中，他们不想给学生钱，而是要求每个人在 App Store 上购买和安装该应用程序。（我们误解了吗？）

我猜想在 Mac 上和在 Windows 等上一样，可以让网络管理系统通过网络安装应用程序和更新。这是如何工作的，一旦应用程序完成并在 XCode 中运行，我们如何创建可交付成果？只需将存档刻录到可启动 CD 并提供给网络管理员就足够了？我需要进行编译设置以使存档独立吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:30:27.683

1.  捆绑任何自定义框架并确保它们的安装目录是相对于捆绑包中的可执行文件的路径（请参阅[框架编程指南](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html)）
2.  存档，在 Finder 中显示，显示包内容并导航到 .app 文件
3.  将其复制到 CD 上。

（我正要尝试这个，但它应该是正确的。所以如果你将鼠标悬停在向下箭头上，请先评论。:)）

# asp.net-mvc - 使用 jquery Ajax 加载 PartialView？

> ID：11947540
> 
> 赞同：8
> 
> 时间：2012-08-14T07:20:06.143
> 
> 标签：asp.net-mvc, jquery, html.dropdownlistfor

部分视图

```
@model OsosYeni23072012.Models.TblMeters
<h3>
    Model.customer_name
</h3>
<h3>
    Model.meter_name
</h3> 
```

控制器

```
[HttpGet]
public ActionResult MeterInfoPartial(string meter_id)
{
    int _meter_id = Int32.Parse(meter_id);
    var _meter = entity.TblMeters.Where(x => x.sno == _meter_id).FirstOrDefault();

    return PartialView("MeterInfoPartial", _meter);
} 
```

剃刀

```
@Html.DropDownList("sno", new SelectList(Model, "sno", "meter_name"), "-- Select Meter --", new { id = "meters"})

@Html.Partial("MeterInfoPartial") 
```

如果下拉列表更改，我想加载部分视图。但我不知道我该怎么做。我找不到任何关于这个的例子。我用actionlink做到这一点。但我之前没有使用下拉菜单。

控制器参数`meter_id`等于下拉列表选择值。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-14T07:24:43.207

您可以订阅`.change()`下拉事件，然后触发 AJAX 请求：

```
<script type="text/javascript">
    $(function() {
        $('#meters').change(function() {
            var meterId = $(this).val();
            if (meterId && meterId != '') {
                $.ajax({
                    url: '@Url.Action("MeterInfoPartial")',
                    type: 'GET',
                    cache: false,
                    data: { meter_id: meterId }
                }).done(function(result) {
                        $('#container').html(result);
                });
            }
        });
    });
</script> 
```

然后你会用一个给定 id 的 div 包装部分：

```
<div id="container">
    @Html.Partial("MeterInfoPartial")
</div> 
```

另外，您为什么要在控制器操作中进行解析，将其留给模型绑定器：

```
[HttpGet]
public ActionResult MeterInfoPartial(int meter_id)
{
    var meter = entity.TblMeters.FirstOrDefault(x => x.sno == meter_id);
    return PartialView(meter);
} 
```

请小心，`FirstOrDefault`因为如果它在您的数据库中找不到匹配的记录，`meter_id`它会返回`null`并且当您尝试访问模型时您的部分将崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T05:31:57.840

```
<script type="text/javascript">
    $(function() {
        $('#addnews').click(function() {
                $.ajax({
                    url: '@Url.Action("AddNews", "Manage")',
                    type: 'GET',
                    cache: false,
                }).done(function(result){
                    $('#containera').html(result);
                });
        });
    });
</script> 
```

# sql-server - SQL Server 隔离级别

> ID：11947543
> 
> 赞同：0
> 
> 时间：2012-08-14T07:20:37.250
> 
> 标签：sql-server, tsql, transactions, transactionscope, isolation-level

我有 n 台机器同时写入数据库（sql server）（启动事务）。我将隔离级别设置为可序列化。我的理解是，无论哪台机器的事务首先到达数据库，都会被执行，而其他事务将在完成时被阻止。

那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:38:52.350

这取决于 - 他们都执行相同的活动吗？也就是说，完全相同的语句以相同的顺序执行，没有流控制？

如果不是，并且两个连接正在访问数据库中的独立对象，它们可以并行运行。

如果资源有一些重叠，那么多个连接可能会取得一些进展，直到其中一个想要获取另一个已经拥有的锁——此时它将等待。那么就有可能出现死锁。

* * *

[`SERIALIZABLE`](http://msdn.microsoft.com/en-us/library/ms173763.aspx)：

> *   语句不能读取已被其他事务修改但尚未提交的数据。
>     
>     
> *   在当前事务完成之前，任何其他事务都不能修改当前事务已读取的数据。
>     
>     
> *   在当前事务完成之前，其他事务不能插入键值落在当前事务中的任何语句读取的键范围内的新行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:48:16.707

> 无论哪台机器的事务首先到达数据库，都会被执行，而其他事务将在此完成时被阻止

不，我不正确。结果应该*就像*每个事务一个接一个地执行（顺序地，因此隔离级别名称）。但是引擎可以自由使用它喜欢的任何实现，只要它遵守可序列化隔离模型的保证。有些引擎实际上几乎按照您的描述实现了它，例如。[Redis 事务](http://redis.io/topics/transactions/)（尽管 Redis 没有“隔离级别”的概念）。

对于 SQL Server，事务将并行执行，*直到遇到锁冲突*。当发生冲突时，已授予锁的事务继续不受干扰，而以冲突模式请求锁的事务必须等待锁释放（以提交已授予的事务）。*哪个*事务恰好是请求，哪个事务恰好是被授予的，完全取决于正在执行的内容。这意味着很可能*第二*台机器首先获得授权并首先完成，而第一台机器等待。

为了更好地理解在可序列化隔离级别下锁定行为有何不同，请参阅[Key-Range Locking](http://msdn.microsoft.com/en-us/library/ms191272%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:37:58.823

是的，这对于任何隔离级别的写操作都是正确的：“我的理解是，无论哪台机器的事务首先到达数据库，都会被执行，而其他事务将在完成时被阻塞。”

隔离级别有助于确定当您在此过程中读取数据时会发生什么。可序列化的读取操作将阻止您的写入操作，这可能是您想要的行为。

# vim - vim 去掉特殊字符 ^I

> ID：11947547
> 
> 赞同：0
> 
> 时间：2012-08-14T07:20:42.350
> 
> 标签：vim, plugins, dotfiles

我在 vim中安装了一些***[点文件。](https://github.com/sontek/dotfiles/)***我编辑的文件现在可以正常工作，但我不拥有的某些文件有时会显示如下特殊字符。

```
39 struct {^I^I^I^I^I^I^I^I\
40 ^Istruct type *tqe_next;^I/* next element */^I^I^I\
41 ^Istruct type **tqe_prev;^I/* address of previous next element */^I\
42 } 
```

我怎样才能解决这个问题 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:23:11.553

`^I`是`tab`。

使用以下不显示它。

```
:set nolist 
```

# asp.net - 无法在 asp.net 应用程序中触发 javascript 警报消息

> ID：11947551
> 
> 赞同：1
> 
> 时间：2012-08-14T07:20:59.957
> 
> 标签：asp.net, message, alert

我在我的应用程序中使用 toolscriptmanager。我使用 javascript 警报消息如下：

1.  `StringBuilder s = new StringBuilder(); s.Append("<script language='javascript'>"); s.Append("alert('You Are Not Authorized To View This Page')"); s.Append("</script>"); RegisterStartupScript("You Are Not Authorized To View This Page", s.ToString());`

2.  `ClientScript.RegisterClientScriptBlock(this.GetType(), "Success", "<script type='text/javascript'>alert('Your are not authorized to view this page!');`

3.  `Page.ClientScript.RegisterStartupScript(this.GetType(), "alert", "alert('Please enter a valid Order ID')");`

4.  `Console.Write("<script>alert('Invalid USer')</script>");`

还使用了 scriptmanager.registerclientscript 但没有任何效果。我没有使用更新面板，而是使用 toolscriptmanager。

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:34:33.257

this.ClientScript.RegisterStartupScript(this.GetType(), "startUpScriptBlock", "alert('TESZT')", true);

# database - 一个子类型可以与 DB 泛化模型中的另一个子类型有关系吗

> ID：11947552
> 
> 赞同：0
> 
> 时间：2012-08-14T07:21:00.510
> 
> 标签：database

我有一个超类型实体，我们称之为 Item。Item 实体有 2 个子类型 Itemtype1 和 Itemtype2。我想这是最简单的实现，所以子类型有 FK 引用超类型的 PK。

在我的模型中，这两个子类型之间应该有 1 对 M 的关系。我应该如何处理？有什么我应该记住的问题，或者可能以其他方式设计吗？

重要的是我可以追溯到超类型实体中一个子类型的 M 侧的 PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:28:21.630

如果你有 table1 和 table2，1:M 关系可以通过创建一个外键 table1.table2ID 来实现，它是 table2 的主键的链接。您可以在 table2 中创建任意数量的具有相同外键的元素。

如果您有 table1 并且想要自引用，则可以创建 table1.table1ID 外键，指向 table1.ID，您可以创建任意数量的具有相同外键的元素。请注意，在这种情况下，您必须强制执行与业务逻辑的 1:M 关系。

# java - JAVA - 表达式解析和评估库

> ID：11947553
> 
> 赞同：12
> 
> 时间：2012-08-14T07:21:01.320
> 
> 标签：java, expression

我正在寻找一个 JAVA 库来解析和评估表达式。我搜索并尝试了一些库，如 Apache 的 JEXL 和 Jeval，但它们并不是我所需要的。

我的要求：

1.  支持所有值类型（即int、double、boolean、String等）
2.  支持所有已知的数学和逻辑运算符（+、-、*、<、<= 等）
3.  支持变量（没有任何特殊符号 - 例如在 Jeval 变量中 a 应该写成 #{a} - 对我来说不够好）
4.  支持自定义函数 - 具有类型强制和验证

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T07:33:11.490

试试[亚尼诺](http://www.janino.net/)。它是一个运行时内存编译器，可用作表达式求值器。也许这对你来说是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T07:30:55.277

就像建议的那样，您可以使用 JavaScript。但您也可以查看[Spring EL](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)，它支持您的要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-16T18:22:46.943

You can try [mXparser](http://mathparser.org/) - it supports significant part of your requirements:

1.  It is based on double, so int is supported, additionally **boolean is supported** as true = 1 and false = 0\. Unfortunately strings are not supported.

Boolean example:

```
import org.mariuszgromada.math.mxparser.*;
...
...
Constant T = new Constant("T = 1");
Constant F = new Constant("F = 0");
Expression e = new Expression("T && (F || (F && T))", T, F);
System.out.println(e.getExpressionString() + " = " + e.calculate()); 
```

Result:

```
T && (F || (F && T)) = 0.0 
```

2.  mXparser has **broad support for operators, functions**, etc.. Check [mXparser math collection](http://mathparser.org/mxparser-math-collection/). What is nice you can use help functionality inside the library.

Example:

```
import org.mariuszgromada.math.mxparser.*;
...
...
mXparser.consolePrintHelp("operator"); 
```

Result:

```
Help content: 

    2\. +                   <Operator>              addition
    3\. -                   <Operator>              subtraction
    4\. *                   <Operator>              multiplication
    5\. /                   <Operator>              division
    6\. ^                   <Operator>              exponentiation
    7\. !                   <Operator>              factorial
    8\. #                   <Operator>              modulo function
    9\. &                   <Boolean Operator>      logical conjunction (AND)
   10\. &&                  <Boolean Operator>      logical conjunction (AND)
   11\. /\                  <Boolean Operator>      logical conjunction (AND)
   12\. ~&                  <Boolean Operator>      NAND - Sheffer stroke
   13\. ~&&                 <Boolean Operator>      NAND - Sheffer stroke
   14\. ~/\                 <Boolean Operator>      NAND - Sheffer stroke
   15\. |                   <Boolean Operator>      logical disjunction (OR)
   16\. ||                  <Boolean Operator>      logical disjunction (OR)
   17\. \/                  <Boolean Operator>      logical disjunction (OR)
   18\. ~|                  <Boolean Operator>      logical NOR
   19\. ~||                 <Boolean Operator>      logical NOR
   20\. ~\/                 <Boolean Operator>      logical NOR
   21\. (+)                 <Boolean Operator>      exclusive or (XOR)
   22\. -->                 <Boolean Operator>      implication (IMP)
   23\. <--                 <Boolean Operator>      converse implication (CIMP)
   24\. -/>                 <Boolean Operator>      material nonimplication (NIMP)
   25\. </-                 <Boolean Operator>      converse nonimplication (CNIMP)
   26\. <->                 <Boolean Operator>      logical biconditional (EQV)
   27\. ~                   <Boolean Operator>      negation
   28\. ¬                   <Boolean Operator>      negation
  162\. add                 <Variadic Function>     (2.4) Summation operator add(a1,a2,a3,...,an)
  168\. sum                 <Calculus Operator>     summation operator (SIGMA) sum(i, from, to, f(i,...))
  169\. prod                <Calculus Operator>     product operator (PI) prod(i, from, to, f(i,...))
  170\. int                 <Calculus Operator>     definite integral operator ( int(f(x,...), x, a, b) )
  171\. der                 <Calculus Operator>     derivative operator ( der(f(x,...), x) ) 
  172\. der-                <Calculus Operator>     left derivative operator ( der-(f(x,...), x) ) 
  173\. der+                <Calculus Operator>     right derivative operator ( der+(f(x,...), x) ) 
  174\. dern                <Calculus Operator>     n-th derivative operator ( dern(f(x,...), x) ) 
  175\. diff                <Calculus Operator>     forward difference operator
  176\. difb                <Calculus Operator>     backward difference operator
  177\. avg                 <Calculus Operator>     (2.4) Average operator avg(i, from, to, f(i,...))
  178\. vari                <Calculus Operator>     (2.4) Bias-corrected sample variance operator vari(i, from, to, f(i,...))
  179\. stdi                <Calculus Operator>     (2.4) Bias-corrected sample standard deviation operator stdi(i, from, to, f(i,...))
  180\. mini                <Calculus Operator>     (2.4) Minimum value mini(i, from, to, f(i,...))
  181\. maxi                <Calculus Operator>     (2.4) Maximum value maxi(i, from, to, f(i,...))
  182\. solve               <Calculus Operator>     (4.0) f(x) = 0 equation solving, function root finding: solve( f(x,...), x, a, b )
  301\. @~                  <Bitwise Operator>      (4.0) Bitwise unary complement
  302\. @&                  <Bitwise Operator>      (4.0) Bitwise AND
  303\. @^                  <Bitwise Operator>      (4.0) Bitwise exclusive OR
  304\. @|                  <Bitwise Operator>      (4.0) Bitwise inclusive OR
  305\. @<<                 <Bitwise Operator>      (4.0) Signed left shift
  306\. @>>                 <Bitwise Operator>      (4.0) Signed right shift 
```

3.  **User defined variables** and **user defined constants** are created without any special form.

Example:

```
import org.mariuszgromada.math.mxparser.*;
...
...
Argument x = new Argument("x = 10");
Constant y = new Constant("y = 2");
Expression e = new Expression("x/y", x, y);
System.out.println(e.getExpressionString() + " = " + e.calculate()); 
```

Result:

```
x/y = 5.0 
```

Additionally please check: a) [Tutorial - User defined arguments](http://mathparser.org/mxparser-tutorial/user-defined-arguments/), b) [Tutorial - User defined constants](http://mathparser.org/mxparser-tutorial/user-defined-constants/).

4.  **User defined functions** are fully supported.

Example 1 - body defined in run-time:

```
import org.mariuszgromada.math.mxparser.*;
...
...
Function f = new Function("f(x,y) = x*y");
Expression e = new Expression("20-f(2,5)",f);
System.out.println(e.getExpressionString() + " = " + e.calculate()); 
```

Result 1

```
20-f(2,5) = 10.0 
```

Example 2 - body extended via your own implementation:

```
import org.mariuszgromada.math.mxparser.*;
...
...
/*
 * Implementing FunctionExtension interface
 */
public class Addition implements FunctionExtension {
   double x;
   double y;
   public Addition() {
      x = Double.NaN;
      y = Double.NaN;
   }
   public Addition(double x, double y) {
      this.x = x;
      this.y = y;
   }
   public int getParametersNumber() {
      return 2;
   }
   public void setParameterValue(int argumentIndex, double argumentValue) {
      if (argumentIndex == 0) x = argumentValue;
      if (argumentIndex == 1) y = argumentValue;
   }
   public double calculate(double... params) {
      return x+y;
   }
   public FunctionExtension clone() {
      return new Addition(x, y);
   }   
}

/*
* Creating extended function
*/
Function f = new Function("f", new Addition());
mXparser.consolePrintln("f.calculate(1,2) = " + f.calculate(1,2) );
/*
* Using extended function in expression
*/
Expression e = new Expression("f(2,3)", f);
System.out.println(e.getExpressionString() + " = " + e.calculate() ); 
```

Result 2:

```
f.calculate(1,2) = 3.0
f(2,3) = 5.0 
```

Additionally **it is worth to follow the whole** [mXparser Tutorial](http://mathparser.org/mxparser-tutorial/).

Found recently - in case you would like to try the syntax (and see the advanced use case) you can download the [Scalar](https://scalarmath.org) [Calculator](https://play.google.com/store/apps/details?id=org.mathparser.scalar.lite) [app](https://play.google.com/store/apps/details?id=org.mathparser.scalar.pro) that is powered by mXparser.

Best regards

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:28:24.890

如果您没有找到实际的 Java 表达式评估库，您可以选择以下几种解决方法：

*   使用 XPath 评估您的表达式。
    *   优点：XPath 知道逻辑运算符，您可以使用 Xalan 的扩展来实现变量和自定义函数
    *   缺点：XPath 的类型比 Java 少
*   使用 JavaScript 评估您的表达式。
    *   优点：Javascript 非常灵活，并且在您的要求严格时仍然适用。您也可以使用 Javascript 实现变量和自定义函数
    *   缺点：Javascript 的类型比 Java 少
*   使用 JSP 的表达式语言评估您的表达式（例如使用[JUEL](http://juel.sourceforge.net/)）

# c# - 从 WinVerifyTrust 获取 CERT_E_REVOCATION_FAILURE

> ID：11947559
> 
> 赞同：1
> 
> 时间：2012-08-14T07:21:33.467
> 
> 标签：c#, pinvoke

我正在开发 ac# 应用程序，并使用 Pinvoke 调用方法**[WinVerifyTrust](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388208%28v=vs.85%29.aspx)**。

pinvoke 声明如[Pinvoke.net](http://www.pinvoke.net/default.aspx/wintrust.winverifytrust)中所定义。

RevocationChecks 设置为无。

当尝试在 iExplorer 上检查我的程序时，起初它工作正常并返回文件的状态 ok，但突然它开始失败，出现 CERT_E_REVOCATION_FAILURE，然后过了一会儿又好了。

什么可能导致这种奇怪的行为？这是否意味着我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:58:02.450

默认情况下，WinVerifyTrust 会尝试下载任何关联的证书吊销列表 (CRL) 以验证证书是否已被显式吊销。如果您的 Internet 连接不稳定并且下载失败，则返回 CERT_E_REVOCATION_FAILURE。

如果您安装了某些版本的 Windows SDK，您可以使用 setreg 工具暂时关闭 CRL 下载。请记住，这仅应暂时用于验证您看到的问题确实与 CRL 连接有关。

```
setreg.exe 3 FALSE 
```

[MSDN](http://msdn.microsoft.com/en-us/library/7zaf80x7.aspx)上提供了该工具的文档。

# c# - iTextSharp：为 2 个表格设置不同的边框大小

> ID：11947562
> 
> 赞同：1
> 
> 时间：2012-08-14T07:22:01.117
> 
> 标签：c#, html, itextsharp, export-to-pdf

我想用 iTextSharp 将一个 html 页面导出为 pdf。我有 2 张桌子，我想为第一张桌子设置边框，但不想为另一张桌子设置边框

```
//my first tabe
strHTMLContent.Append("<table width='100%'>");
strHTMLContent.Append("<tr>");
strHTMLContent.Append("<td>" text "</td>");
strHTMLContent.Append("<td>" text "</td>");
strHTMLContent.Append("<td>");

//the 2nd table that I don't want to have border
strHTMLContent.Append("<table>");
strHTMLContent.Append("<tr><td>" row1 " </td></tr> ");
strHTMLContent.Append("<tr><td> " row2" </td></tr> ");
strHTMLContent.Append("<tr><td>  " row3 " </td></tr> ");
strHTMLContent.Append("</table >");
strHTMLContent.Append("</td>");
strHTMLContent.Append("</tr>");
strHTMLContent.Append("</table >");

//I use StyleSheet for set border size
var st = new StyleSheet();
st.LoadTagStyle("table", "border", "1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T19:33:41.337

也许有点太晚了，但是 - 你不能改变边框大小，只有是或否。太可悲了，但这就是itextsharp的情况。关于您的问题，您可以轻松地直接在 html 标签上设置边框并删除 LoadTagStyle 调用：

```
//my first tabe
strHTMLContent.Append("<table width='100%' border='1'>");

//the 2nd table that I don't want to have border
strHTMLContent.Append("<table border='0'>"); 
```

# java - 在 RDBMS 中保留电子邮件

> ID：11947565
> 
> 赞同：3
> 
> 时间：2012-08-14T07:22:10.773
> 
> 标签：java, database, database-design, jakarta-mail, nntp

我正在考虑使用[dbmail](http://dbmail.org/dokuwiki/doku.php/er-model)、[Archiveopteryx](http://aox.org/)、[manitou](http://www.manitou-mail.org/)或[James](http://james.apache.org/)来保存`javax.mail.Message`对象，而不是**电子邮件**本身。但是，我猜想，就 dbmail 而言，它只对实际发送和接收消息非常有用。

在这种特殊情况下，我想获取[Leafnode](http://leafnode.sourceforge.net)拥有的 NNTP 消息并将它们放入 RDBMS。为此，dbmail 看起来很有趣，因为它是一个已建立的项目，大概已经解决了许多电子邮件 --> 数据库问题。具体来说，我希望[他们的架构](http://dbmail.org/dokuwiki/doku.php/er-model)设计合理。

我正在使用，`javax.mail.Message`因为[GNU NNTP API](http://www.gnu.org/software/classpathx/javamail/)使用`Message`，在这种情况下有起有落。（它缺少一些 NNTP 特定的功能。）

假设没有用于 dbmail 的 Java 驱动程序，而且我不明白他们为什么会有一个，我将如何从 Leafnode 获取消息到 dbmail？只是在本地主机上给自己发一封电子邮件？

在旁注中，这是多么疯狂/愚蠢？有更好的通用方法吗？

> 许多人已经多次将邮件发送到数据库。一个例子是 DBMail 项目。另一个例子是 Microsoft Exchange 服务器，它使用关系数据库来存储所有内容。

[http://www.memoryhole.net/~kyle/databaseemail.html](http://www.memoryhole.net/~kyle/databaseemail.html)

我很想知道为什么 Exchange 使用 RDBMS，以及它们的模式是什么样的，也许那里有一些教训。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:28:11.733

> 这是多么疯狂/愚蠢？

只要你小心你的钥匙，就不会疯狂或愚蠢。考虑标题和附件，并根据基数要求将它们分解为表格。然后，您可以根据日期、从、到、列表 ID 等运行查询。如果您好奇的话，您可以每天按月计算附件类型。;-)

> 我很想知道为什么交换使用 RDBMS

如果您仔细研究邮件消息是如何传递到 mbox 文件中的，您就会开始意识到 DBMS 更适合这种事情。到 Microsoft 开始编写 Exchange 时，他们已经拥有自己拥有的 SQL*服务器*。Unix 邮件服务器较旧，并且没有免费的 DMBS 来完成这项任务。文化问题也是如此，但那是另一回事了。

# c# - 需要正则表达式 C#

> ID：11947567
> 
> 赞同：0
> 
> 时间：2012-08-14T07:22:16.857
> 
> 标签：c#, regex

我需要一个正则表达式来替换字符串中的文本：

```
string s="Insert into VERSION (ENTRYID,APPVERSION,PLATFORMVERSION,TIMESTAMPED,USERNAME,SQLSCRIPTNAME,COMMENTS)VALUES(SWS_Version_ID."NEXTVAL",'[3.02.01P20]','[4.1.38orcl]',sysdate,null,null,null);"; 
```

我需要将方括号中的 3.02.01P20 替换为 NEW_VERSION。除了 3.02.01P20 之外，可能还有其他版本，但在该行中，我们可以看到第一个左方括号跟随版本。

也让我知道如果它（3.02.01P20）跟随我必须做哪些改变，比如3个左方括号（[），这样我就不必为每个人写一个单独的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:47:48.713

```
using System;
using System.Text.RegularExpressions;
class Tester
{
    public static void Main()
    {
        string s = "Insert into VERSION " + 
            "(ENTRYID,APPVERSION,PLATFORMVERSION,TIMESTAMPED,USERNAME,SQLSCRIPTNAME,COMMENTS)" +
            "VALUES(SWS_Version_ID.\"NEXTVAL\",'[3.02.01P20]','[4.1.38orcl]',sysdate,null,null,null);";
        Match m = (new Regex("^(.*)(\\[.*?\\])(.*?)(\\[.*?\\])(.*)$")).Match(s);
        //Console.WriteLine("{0},{1}", m.Groups[2].Value, m.Groups[3].Value);
        string[] parts = {
                m.Groups[1].Value,
                m.Groups[2].Value, //[3.02.01P20]
                m.Groups[3].Value, //','
                m.Groups[4].Value, //[4.1.38orcl]
                m.Groups[5].Value //tail
            };
        parts[1] = "[NEW_VERSION]";
        Console.WriteLine(string.Join("",parts));
    }
} 
```

你的意思是这样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:33:52.130

尝试这个：

```
string output = Regex.Replace(s, @"(.*'\[)(.*)(\]'.*)('\[.*)", "$1" + newVer + "$3$4"); 
```

# c# - 带有 modalpopup 的中继器

> ID：11947572
> 
> 赞同：0
> 
> 时间：2012-08-14T07:22:42.377
> 
> 标签：c#, asp.net, repeater, modalpopups

我正在开发一个计分表应用程序，我有一个带有单选按钮的中继器，当我检查收音机时，会出现一个弹出窗口。它工作正常。但问题是每当我检查另一行中的下一个收音机时，我都会收到重复的弹出窗口（一个用于新收音机，另一个用于之前检查的收音机。它发生在中继器的所有行（如果我检查 20 个收音机）在 20 行中，它将同时显示 20 个弹出窗口）。我需要一直检查收音机，但因为 Autopost 每次都会触发它们后面的代码。

该代码位于转发器的 PreRender 事件下，但有人建议我将其从转发器中取出。（顺便说一下 PreRender 和 ItemDataBound 事件有什么区别？）请帮忙。

这是我的代码：

```
namespace GAPP
{
    public partial class GRADE : System.Web.UI.Page
{
    bool rdchk = false;

    protected void Page_Load(object sender, EventArgs e)
    {

        //-----------to define an event handler for the RadioButton control inside a repeater----------

        this.rptr1.ItemDataBound += new RepeaterItemEventHandler(rptr1_ItemDataBound);

        if (IsPostBack)
        {

            for (int i = 0; i < this.rptr1.Items.Count; i++)
            {
                RadioButton RDB1 = rptr1.Items[i].FindControl("L1") as RadioButton;
                RadioButton RDB2 = rptr1.Items[i].FindControl("L2") as RadioButton;
                RadioButton RDB3 = rptr1.Items[i].FindControl("L3") as RadioButton;
                RadioButton RDB4 = rptr1.Items[i].FindControl("L4") as RadioButton;
                RadioButton RDB5 = rptr1.Items[i].FindControl("R1") as RadioButton;
                RadioButton RDB6 = rptr1.Items[i].FindControl("R2") as RadioButton;
                RadioButton RDB7 = rptr1.Items[i].FindControl("R3") as RadioButton;
                RadioButton RDB8 = rptr1.Items[i].FindControl("R4") as RadioButton;

                RDB1.AutoPostBack = true;
                RDB1.CheckedChanged += new EventHandler(RDBX1_CheckedChanged);
                RDB2.AutoPostBack = true;
                RDB2.CheckedChanged += new EventHandler(RDBX2_CheckedChanged);
                RDB3.AutoPostBack = false;
                RDB3.CheckedChanged += new EventHandler(RDBX2_CheckedChanged);
                RDB4.AutoPostBack = true;
                RDB4.CheckedChanged += new EventHandler(RDBX2_CheckedChanged);
                RDB5.AutoPostBack = true;
                RDB5.CheckedChanged += new EventHandler(RDBX1_CheckedChanged);
                RDB6.AutoPostBack = true;
                RDB6.CheckedChanged += new EventHandler(RDBX2_CheckedChanged);
                RDB7.AutoPostBack = false;
                RDB7.CheckedChanged += new EventHandler(RDBX2_CheckedChanged);
                RDB8.AutoPostBack = true;
                RDB8.CheckedChanged += new EventHandler(RDBX2_CheckedChanged);

            }

        }
    }

    //----------------------------end of define event-----------------------------------------

    private void RDBX1_CheckedChanged(Object sender, EventArgs e)
    {

        foreach (RepeaterItem item in rptr1.Items)
        {
            if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)
            {
                AjaxControlToolkit.ModalPopupExtender mpex1 = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender1");
                AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender2");

                Button bsr1 = (Button)item.FindControl("btn_saveRep1");
                Button bsr2 = (Button)item.FindControl("btn_saveRep2");
                Button bsr3 = (Button)item.FindControl("btn_repeat_cnxl1");
                Button bsr4 = (Button)item.FindControl("btn_repeat_cnxl2");
                RadioButton l1 = (RadioButton)item.FindControl("L1");
                RadioButton r1 = (RadioButton)item.FindControl("R1");

                if (l1.Checked && rdchk == false)
                {
                    bsr1.Visible = true;
                    bsr2.Visible = false;
                    bsr3.Visible = true;
                    bsr4.Visible = false;
                    mpex2.Show();

                }

                if (r1.Checked && rdchk == false)
                {
                    bsr1.Visible = false;
                    bsr2.Visible = true;
                    bsr3.Visible = false;
                    bsr4.Visible = true;
                    mpex2.Show();
                }

            }

        }

    }

    private void RDBX2_CheckedChanged(Object sender, EventArgs e)
    {

        foreach (RepeaterItem item in rptr1.Items)
        {
            if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)
            {
                AjaxControlToolkit.ModalPopupExtender mpex1 = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender1");
                AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender2");
                RadioButton l2 = (RadioButton)item.FindControl("L2");
                if (l2.Checked) mpex1.Show();

                RadioButton l4 = (RadioButton)item.FindControl("L4");
                if (l4.Checked) mpex1.Show();

                RadioButton r2 = (RadioButton)item.FindControl("R2");
                if (r2.Checked) mpex1.Show();

                RadioButton r4 = (RadioButton)item.FindControl("R4");
                if (r4.Checked) mpex1.Show();

            }

        }

    }

    protected void rptr1_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {

    }

    protected void rptr1_PreRender(object sender, EventArgs e)
    {

        foreach (RepeaterItem item in rptr1.Items)
        {
            if (item.ItemType == ListItemType.AlternatingItem || item.ItemType == ListItemType.Item)
            {
                CheckBox chb = (CheckBox)item.FindControl("chkb_NO");
                Label lbl1 = (Label)item.FindControl("lbl_dg_task");
                Label lbl2 = (Label)item.FindControl("lbl_dg_seq");
                Label lbl3 = (Label)item.FindControl("lbl_dg_repeat1");
                Label lbl4 = (Label)item.FindControl("lbl_dg_final1");
                RadioButton l1 = (RadioButton)item.FindControl("L1");
                RadioButton l2 = (RadioButton)item.FindControl("L2");
                RadioButton l3 = (RadioButton)item.FindControl("L3");
                RadioButton l4 = (RadioButton)item.FindControl("L4");
                RadioButton r1 = (RadioButton)item.FindControl("R1");
                RadioButton r2 = (RadioButton)item.FindControl("R2");
                RadioButton r3 = (RadioButton)item.FindControl("R3");
                RadioButton r4 = (RadioButton)item.FindControl("R4");
                AjaxControlToolkit.ModalPopupExtender mpex1 = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender1");
                AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)item.FindControl("ModalPopupExtender2");
                Button bsr1 = (Button)item.FindControl("btn_saveRep1");
                Button bsr2 = (Button)item.FindControl("btn_saveRep2");
                Button bsr3 = (Button)item.FindControl("btn_repeat_cnxl1");
                Button bsr4 = (Button)item.FindControl("btn_repeat_cnxl2");

                //-----------------------------

                if (chb.Checked == true)
                {

                    l1.Enabled = false;
                    l2.Enabled = false;
                    l3.Enabled = false;
                    l4.Enabled = false;
                    r1.Enabled = false;
                    r2.Enabled = false;
                    r3.Enabled = false;
                    r4.Enabled = false;

                    l1.Checked = false;
                    l2.Checked = false;
                    l3.Checked = false;
                    l4.Checked = false;
                    r1.Checked = false;
                    r2.Checked = false;
                    r3.Checked = false;
                    r4.Checked = false;

                    lbl1.CssClass = "grayedout";
                    lbl2.CssClass = "grayedout";

                }
                else
                {
                    l1.Enabled = true;
                    l2.Enabled = true;
                    l3.Enabled = true;
                    l4.Enabled = true;
                    r1.Enabled = true;
                    r2.Enabled = true;
                    r3.Enabled = true;
                    r4.Enabled = true;

                    lbl1.CssClass = "seq";
                    lbl2.CssClass = "task";

                }

            }

        }

    }

    protected void rptr1_OnItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "saveRep1")
        {
            DropDownList ddl1 = (DropDownList)e.Item.FindControl("ddl_dg_repeat");
            RadioButtonList rbl1 = (RadioButtonList)e.Item.FindControl("radio_dg_final");
            Label lbl3 = (Label)e.Item.FindControl("lbl_dg_repeat1");
            Label lbl4 = (Label)e.Item.FindControl("lbl_dg_final1");
            AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)e.Item.FindControl("ModalPopupExtender2");

            lbl3.Text = ddl1.SelectedItem.Text;
            lbl4.Text = rbl1.SelectedItem.Text;
            mpex2.Hide();
            rdchk = true;

        }
        //------------------------------------------------------------

        if (e.CommandName == "saveRep2")
        {
            DropDownList ddl1 = (DropDownList)e.Item.FindControl("ddl_dg_repeat");
            RadioButtonList rbl1 = (RadioButtonList)e.Item.FindControl("radio_dg_final");
            Label lbl3 = (Label)e.Item.FindControl("lbl_dg_repeat2");
            Label lbl4 = (Label)e.Item.FindControl("lbl_dg_final2");
            RadioButton l1 = (RadioButton)e.Item.FindControl("L1");
            AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)e.Item.FindControl("ModalPopupExtender2");

            lbl3.Text = ddl1.SelectedItem.Text;
            lbl4.Text = rbl1.SelectedItem.Text;
            mpex2.Hide();
            rdchk = true;

        }
        //------------------------------------------------------------

        if (e.CommandName == "cnxlRepeat1")
        {
            AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)e.Item.FindControl("ModalPopupExtender2");
            RadioButton l1 = (RadioButton)e.Item.FindControl("L1");
            l1.Checked = false;
            mpex2.Hide();

        }

        //------------------------------------------------------------

        if (e.CommandName == "cnxlRepeat2")
        {
            AjaxControlToolkit.ModalPopupExtender mpex2 = (AjaxControlToolkit.ModalPopupExtender)e.Item.FindControl("ModalPopupExtender2");
            RadioButton r1 = (RadioButton)e.Item.FindControl("R1");
            r1.Checked = false;
            mpex2.Hide();

        }

        //------------------------------------------------------------

        if (e.CommandName == "rdown")
        {
            ListBox lbx1 = (ListBox)e.Item.FindControl("ListBox1");
            ListBox lbx2 = (ListBox)e.Item.FindControl("ListBox2");

            if (lbx1.SelectedIndex != -1)
            {
                lbx2.Items.Add(lbx1.SelectedItem);
                lbx1.Items.Remove(lbx1.SelectedItem);
                lbx2.SelectedIndex = -1;
            }
        }
        //------------------------------------------------------------

        if (e.CommandName == "rup")
        {
            ListBox lbx3 = (ListBox)e.Item.FindControl("ListBox1");
            ListBox lbx4 = (ListBox)e.Item.FindControl("ListBox2");

            if (lbx4.SelectedIndex != -1)
            {
                lbx3.Items.Add(lbx4.SelectedItem);
                lbx4.Items.Remove(lbx4.SelectedItem);
                lbx3.SelectedIndex = -1;
            }
        }

        //----------------------------------------------------------

        if (e.CommandName == "ddl3Databound")
        {
            DropDownList ddlr1 = (DropDownList)e.Item.FindControl("DropDownList3");
            ListBox lbx5 = (ListBox)e.Item.FindControl("ListBox1");
            lbx5.DataBind();

        }

        //----------------------------------------------------------

        if (e.CommandName == "plus")
        {
            Panel pnl1 = (Panel)e.Item.FindControl("pnlXtra");
            TextBox txtb1 = (TextBox)e.Item.FindControl("txtb_comment");
            ImageButton imgb1 = (ImageButton)e.Item.FindControl("imgBtn_xtraPlus");
            ImageButton imgb2 = (ImageButton)e.Item.FindControl("imgBtn_xtraMin");
            Label lblx1 = (Label)e.Item.FindControl("label2");

            lblx1.Text = "after";
            imgb1.Visible = false;
            imgb2.Visible = true;
            pnl1.Visible = true;

        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:57:50.383

PreRender 和 ItemDataBound 事件有什么区别？

Prerender 与您的页面相关（这里，控件也有 prerender 事件），而 ItemDataBound 与您的控件相关联，如转发器、网格等。

在页面在客户端浏览器上呈现之前，在 asp.net 页面事件生命周期结束时调用 Prerender。

ItemDataBound 在Repeater/grid/datalist控件中的item(foreach item)是数据绑定之后但在页面上呈现之前发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:18:05.360

解决了，我在检查收音机时创建了 2 个标签，我在 if 语句中使用了它们。因此，如果 2 个标签有文本，则不显示弹出窗口。

非常感谢。

# javascript - jquery add 函数不能按预期工作

> ID：11947577
> 
> 赞同：5
> 
> 时间：2012-08-14T07:23:07.947
> 
> 标签：javascript, jquery

以下代码段不起作用。

```
var empty = $();
var divs = $("div");
empty.add(divs); 
```

HTML 中有一个 div 元素，它已正确添加到*divs*。但是 divs 集合不会添加到*空*的jquery 对象中。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T07:24:45.297

`.add`不会改变原始对象。尝试：

```
empty = empty.add(divs); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T07:26:28.570

你可以做

```
var empty = $.extend($(), $('div')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:27:38.573

根据 Jquery 文档，

以下将不会保存添加的元素，因为该`.add()`方法会创建一个新集合并将原始集合`pdiv`保持不变：

```
var pdiv = $("p");
pdiv.add("div");  // WRONG, pdiv will not change 
```

# python - 如何可靠地告诉上传的文件类型（文本或二进制）？

> ID：11947578
> 
> 赞同：0
> 
> 时间：2012-08-14T07:23:10.147
> 
> 标签：python, file-upload, mime-types, mime, python-magic

我有一个应用程序，用户应该能够上传各种各样的文件，但我需要知道每个文件是否可以安全地将其文本表示形式显示为纯文本。

像使用[python-magic](http://pypi.python.org/pypi/python-magic/)

```
m = Magic(mime=True).from_buffer(cgi.FieldStorage.file.read()) 
```

给了我正确的 MIME 类型。

但有时，脚本的 MIME 类型是`application/*`，因此仅查找`m.startswith('text/')`是不够的。

[另一个网站](http://bytes.com/topic/python/answers/21222-determine-file-type-binary-text)建议使用

```
m = Magic().from_buffer(cgi.FieldStorage.file.read()) 
```

并检查`'text' in m`.

第二种方法对于任意文件上传的集合是否足够可靠，或者有人可以给我另一个想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:52:58.387

你的目标是什么？你想要真正的哑剧类型吗？出于安全原因，这很重要吗？还是“很高兴拥有”？

问题是同一个文件可以有不同的 mime 类型。当脚本文件有合适的`#!`头时，python-magic 可以确定脚本类型并告诉你。如果标题丢失，`text/plain`可能是你能得到的最好的。

这意味着没有通用的“将始终有效”的神奇解决方案（尽管模块的名称）。您将不得不坐下来思考您可以获得哪些信息，它意味着什么以及您希望如何处理它。

安全的解决方案是创建一个您接受的 mime 类型列表并检查它们：

```
allowed_mime_types = [ ... ]
if m in allowed_mime_types: 
```

这意味着只接受完美匹配。这也意味着您的服务器将出于某种原因拒绝没有正确 mime 类型的有效文件（缺少标题，魔术无法识别文件，您忘记在列表中提及 mime 类型）。

或者换一种说法：如果你真的不在乎，为什么还要检查文件的 mime 类型？

**[编辑]**当你说

> 我需要知道每个文件是否可以安全地将其文本表示形式显示为纯文本。

那么这并不像听起来那么容易。首先，“文本”文件中没有存储编码，因此您需要知道用户在创建文件时使用的编码。这不是一项微不足道的任务。有一些启发式方法可以这样做，但是当使用 ISO 8859-1 和 8859-15 之类的编码（后者有欧元符号）时，事情会变得很棘手。

要解决此问题，您需要强制用户以特定编码保存文本文件（`UTF-8`目前是最佳选择），或者您需要提供用户必须将文本粘贴到其中的表单。

使用表单时，用户可以查看文本是否正确编码（他们在屏幕上看到），他们可以解决任何问题，并且您可以确保浏览器向您发送使用 UTF-8 编码的文本。

如果你不能这样做，你唯一的选择是检查输入中 0x20 以下的任何字节，除了`\r`,`\n`和`\t`. 这是对“这是一个文本文档”的一个很好的检查。

但是当用户使用变音符号时（比如当你编写一个在世界范围内使用的应用程序时），这种方法最终会失败，除非你可以在用户端强制执行特定的编码（你可能不能这样做，因为你不信任用户）。

**[EDIT2]**因为你需要这个来检查实际的源代码：如果你想确保源代码是“安全的”，那么就解析它。大多数语言允许在不实际执行的情况下解析代码。这会给你一些真实的信息（因为解析器知道要寻找什么）并且你不需要做出疯狂的猜测:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:01:45.730

玩了一会儿，我发现我可以正常使用`Magic(mime_encoding=True)`结果！

我在我的 Dropbox 文件夹上运行了一个[简单的脚本](https://gist.github.com/3347601#file_types.txt)，并通过编码和扩展名对结果进行分组，以检查是否存在违规行为。

但通过寻找`'binary' in encoding`.

我想我会坚持下去，但谢谢大家。

# axapta - 表格运行总计，Axe 2009

> ID：11947580
> 
> 赞同：1
> 
> 时间：2012-08-14T07:23:15.970
> 
> 标签：axapta, dynamics-ax-2009, x++

是否有任何表格的示例在位于网格内的列中执行运行总计。网格的用户排序和过滤会影响运行总计列。

如果仅按交易日期排序，我可以轻松执行上述操作，但包括用户排序和过滤我认为我们必须使用数据源*range()*和*rangecount()*函数（参见*SysQuery::mergeRanges(* )例如）然后遍历这些以应用过滤，然后包括动态链接。订购也是如此，尽管现在更复杂了。

任何建议表示赞赏。建议的任何赞赏（如：*对问题投票！*）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:38:27.000

您可以使用以下策略将其实现为[表单数据源显示方法：](http://www.axaptapedia.com/Display_method#Display_methods_on_datasources)

1.  复制表单的数据源查询（不需要`SysQuery::mergeRanges`）：

    `QueryRun qr = new QueryRun(ledgerTrans_qr.query());`

2.  `qr`使用, 在当前记录之后停止对您的记录进行迭代和求和：

    `while (qr.next()) { lt = qr.getNo(1); total += lt.AmountMST; if (lt.RecId == _lt.RecId) break; }`

    如果排序顺序是固定的（使用 sum(AmountMST) 并添加 where 约束），这可以提高性能。

3.  返回总计

这导致效率非常低（次二次时间，[O(n^2)](http://en.wikipedia.org/wiki/Quadratic_time#Sub-quadratic_time)）。

如果没有太多记录，缓存结果（在地图中）可能使其可用。

更新：[一个工作示例](http://pastebin.com/cKDVEjg7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:06:36.587

欢迎对以下代码提出任何意见或批评。Jan 关于该方法缓慢的观察仍然有效。如您所见，这是对他原始答案的修改。

```
//BP Deviation Documented
display AmountMST XXX_runningBalanceMST(LedgerTrans _trans)
{
    LedgerTrans localLedgerTrans;
    AmountMST   amountMST;
    ;
    localLedgerTrans    = this.getFirst();
    while (localLedgerTrans)
    {
        amountMST           += localLedgerTrans.AmountMST;
        if (localLedgerTrans.RecId == _trans.RecId)
        {
            break;
        }
        localLedgerTrans    = this.getNext();
    }
    return amountMST;
} 
```

# mysql - Rails 中的复选框。mysql中插入的数据为NULL

> ID：11947584
> 
> 赞同：2
> 
> 时间：2012-08-14T07:23:38.043
> 
> 标签：mysql, ruby-on-rails, forms

如何`check_box_tag`在 rails3 或`f.check_box`

数据被发送到控制器，我在 post 请求中看到，但条目没有保存在数据库中。

请帮我。

```
<%= form_for(@userrole) do |f| %>
<div class="field">
  <%= f.label :Name %><br />
  <%= f.text_field :name %>
</div>

<div class="field">
  <%= f.label :Admin %><br />
  <%= f.check_box  "access_type1" %>
</div>
<div class="field">
  <%= f.label :Super_Admin %><br />
  <%= f.check_box   :access_type2%>
</div>
<div class="field">
  <%= f.label :Super_Admin %><br />
  <%= f.check_box  :access_type3%>
</div>

<div class="actions">
  <%= f.submit %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:35:04.073

根据@davidb，需要更多信息，但我有一个想法，你需要制作那个特定的属性`attr_accessible`。

**资源**

*   [http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

# visual-studio-2008 - 在 Visual C++ 中退出应用程序

> ID：11947586
> 
> 赞同：0
> 
> 时间：2012-08-14T07:23:41.693
> 
> 标签：visual-studio-2008, exit

我尝试退出应用程序（需要了解 Visual C++ 程序的基本结构），但不接受 MSDN 的代码。我究竟做错了什么？

```
private: System::Void exitToolStripMenuItem_Click(System::Object^  sender, System::EventArgs^  e)
{
}
 Application::Exit(); }; 
```

运行此代码时出现错误： `error C3254: 'Program::Form1' : class contains explicit override 'Exit' but does not derive from an interface that contains the function declaration`
`error C2838: 'Exit' : illegal qualified name in member declaration`
`error C4430: missing type specifier - int assumed. Note: C++ does not support default-int`
`warning C4183: 'Exit': missing return type; assumed to be a member function returning 'int'`

我找不到任何有用的信息，今天是我尝试 VS 2008 的第一天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:26:47.150

我认为 Application::Exit(); 在错误的行中。以下工作是否有效：

```
private: System::Void exitToolStripMenuItem_Click(System::Object^ sender, System::EventArgs^ e) {
          Application::Exit(); }
}; 
```

# git - git 存储库有命名约定吗？

> ID：11947587
> 
> 赞同：449
> 
> 时间：2012-08-14T07:23:42.207
> 
> 标签：git, github, naming-conventions

例如，我有一个名为 Purchase Service 的 RESTful 服务。我应该命名我的存储库：

1.  `purchaserestservice`
2.  `purchase-rest-service`
3.  `purchase_rest_service`
4.  或者是其他东西？

什么是约定？在 Github 上怎么样？公共存储库应该遵循某种标准吗？

* * *

## 回答 #1

> 赞同：543
> 
> 时间：2012-08-14T07:40:03.200

我会去`purchase-rest-service`。原因：

1.  什么是“购买休息服务”？长而连在一起的词很难理解。我知道，我是德国人。“Donaudampfschifffahrtskapitänspatentausfüllungsassistentenausschreibungsstellenbewerbung。”

2.  “_”比“-”更难输入

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2015-05-29T12:13:58.553

Camel case 的问题在于，通常对单词有不同的解释——例如，checkinService 与 checkInService。根据 Aaron 的回答，如果您有许多类似名称的存储库必须不断检查创建您关心的存储库的人是否使用了大写和小写的某种细分，那么自动完成是很困难的。避免大写。

他关于破折号的观点也是明智的。

1.  使用小写。
2.  使用破折号。
3.  请明确点。稍后您可能会发现您必须区分相似的想法 - 即使用 purchase-rest-service 而不是 service 或 rest-service。
4.  始终如一。考虑各种 GIT 供应商的使用情况——您希望如何对存储库进行排序/分组？

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2016-03-03T21:51:24.993

`lowercase-with-hyphens`是我在 GitHub 上最常看到的风格。*

`lowercase_with_underscores`可能是我看到的第二受欢迎的风格。

前者是我的首选，因为它可以节省击键。

^(*轶事；我没有收集任何数据。)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-08-14T07:49:31.157

在不偏爱任何特定命名选择的情况下，请记住 git repo 可以克隆到您选择的任何根目录中：

```
git clone https://github.com/user/repo.git myDir 
```

这里`repo.git`将被克隆到`myDir`目录中。

因此，即使您对公共 repo 的命名约定最终有点不正确，仍然可以在客户端对其进行修复。

这就是为什么在任何客户端都可以为所欲为的*分布式环境中，Git 存储库没有真正的命名约定。*
（除了为repo '' 的*裸*形式保留“ `xxx.git`” ） 可能存在 REST 服务的命名约定（类似于“ [Are there any Naming Convention Guidelines for REST APIs?](https://stackoverflow.com/questions/778203/are-there-any-naming-convention-guidelines-for-rest-apis) ”），但这是一个单独的问题。*`xxx`* 

 ** * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-07-24T02:06:43.320

也许这只是我的 Java 和 C 背景显示，但我更喜欢 CamelCase (CapCase) 而不是名称中的标点符号。我的工作组使用这样的名称，可能是为了匹配存储库包含的应用程序或服务的名称。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-08T10:43:01.530

如果您计划创建一个 PHP 包，您很可能希望将其放在[Packagist](https://packagist.org/)上，以使其可供其他作曲家使用。Composer 有 as[命名约定](https://packagist.org/about#naming-your-package)来使用`vendorname/package-name-is-lowercase-with-hyphens`.

如果你打算创建一个 JS 包，你可能想要使用 npm。他们的[命名约定](https://docs.npmjs.com/files/package.json)之一是不允许在包名称中间出现大写字母。

因此，我建议 PHP 和 JS 包`lowercase-with-hyphens`在 composer 或 npm 中使用和命名你的包，就像你在 GitHub 上的包一样。*

# google-apps-script - Sheet.getRange(1,1,1,12) 括号中的数字表示什么？

> ID：11947590
> 
> 赞同：43
> 
> 时间：2012-08-14T07:24:08.493
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

```
Sheet.getRange(1,1,1,12) 
```

我无法理解这些论点`1,1,1,12`。这是什么 - 工作表 ID 或行或什么？

```
method getRange(row, column, optNumRows, optNumColumns) 
```

`optNumRows`这里是什么`optNumColumns`意思？？？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-14T07:38:45.967

[在谷歌文档页面](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getrangerow,-column,-numrows,-numcolumns)上找到了这些文档：

*   row --- int --- 范围的顶行
*   column --- int --- 范围的最左边的列
*   optNumRows --- int --- 范围内的行数。
*   optNumColumns --- int --- 范围内的列数

在你的例子中，你会得到（如果你选择了第 3 行）“C3:O3”，因为 C --> O 是 12 列

**编辑**

使用文档上的示例：

> // 下面的代码将获取范围 C2:G8
> // 在活动电子表格中的列数，恰好是“4”
> var count = SpreadsheetApp.getActiveSheet().getRange(2, 3, 6, 4) .getNumColumns(); Browser.msgBox(count);

括号内的值：
2：起始行 = 2
3：起始列 = C
6：行数 = 6 所以从 2 到 8
4：列数 = 4 所以从 C 到 G

所以你来到了范围：C2：G8

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2021-10-13T06:53:01.847

我知道这是一个较旧的线程，但我认为图形可能有助于直观地看到这一点。

getRange（行，列，optNumRows，optNumColumns）

[![在此处输入图像描述](../Images/91e674b5c266bdef7f3b50232bd5eed3.png)](https://i.stack.imgur.com/u946n.png)

# mysql - 如果日期为“14-AUG-2012”格式，如何从 MySQL 中选择记录

> ID：11947592
> 
> 赞同：2
> 
> 时间：2012-08-14T07:24:10.897
> 
> 标签：mysql

我有一个查询我正在使用以下查询从 MySQL 中选择记录

```
mysql> select VID from tm_visitor where DATE(INTIME)=DATE('2012-08-01'); 
```

然后我得到结果

```
+--------+
| VID    |
+--------+
| 000001 |
| 000002 |
| 000003 |
| 000004 |
+--------+
4 rows in set (0.00 sec) 
```

但是当我使用查询作为

```
mysql> select VID from tm_visitor where DATE(INTIME)=DATE('01-AUG-2012'); 
```

它什么也没给我

```
Empty set, 8 warnings (0.00 sec) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:29:10.333

试试这个

```
select VID from tm_visitor where DATE(INTIME) = STR_TO_DATE('01-AUG-2012', '%d-%b-%y') 
```

有关更多示例，请参阅[MySQL 参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

# android - 当我的应用程序中新启动的应用程序崩溃时出现问题

> ID：11947600
> 
> 赞同：0
> 
> 时间：2012-08-14T07:24:28.793
> 
> 标签：android

我正在开发一个可以启动许多其他应用程序的应用程序。我可以从我的应用程序成功启动新应用程序。问题是当启动的应用程序崩溃时，我的应用程序被带回上一个屏幕（从启动新应用程序的屏幕）。即使新启动的应用程序崩溃，我如何确保我的应用程序保持在同一个屏幕上。我尝试在启动新应用程序时设置意图标志 Intent.FLAG_ACTIVITY_NEW_TASK 但这不起作用。

```
Intent LauncherIntent = getActivity().getPackageManager().getLaunchIntentForPackage(package.trim());  
if(LauncherIntent != null){ 
        LauncherIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);            
        getActivity().startActivity(LauncherIntent);
} 
```

此代码段用于启动新应用程序。“包”将包含新启动应用程序的包信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:51:04.333

试试这个：

```
Intent LauncherIntent = getActivity().getPackageManager().getLaunchIntentForPackage(package.trim());  
if(LauncherIntent != null){ 
        LauncherIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);            
        getActivity().startActivity(LauncherIntent);
        finish();
} 
```

# android - 将小子视图添加到 Android 上的主视图

> ID：11947601
> 
> 赞同：0
> 
> 时间：2012-08-14T07:24:33.080
> 
> 标签：android, modal-dialog

我想在 iOS 中做一些接近警报或模式视图的东西（消息和 1 或 2 或 3 个按钮），但在 Android 上。例如，然后用户在应用程序的某些屏幕上单击后退按钮，他将要求保存或不保存他的进度。有没有在 Eclipse 中使用 Android SDK 的原生方法？任何建议如何在定制设计中实现它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:17:03.483

[这个站点](http://www.mkyong.com/android/android-custom-dialog-example/)和[这个站点](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)在代码中给出了一个简单的自定义对话框示例。您可以使用代码作为指导。

# android - setBackground 与 setBackgroundDrawable (Android)

> ID：11947603
> 
> 赞同：260
> 
> 时间：2012-08-14T07:24:38.180
> 
> 标签：android, view, background, drawable

我想设置视图的背景可绘制。有两种方法（据我所知）：`setBackground`和`setBackgroundDrawable`.

当我使用`setBackground`时，它说它已添加到*API 级别 16*，但我的项目的最低 SDK 版本是 7。我认为它不适用于 16 以下的任何内容，对吗？但是当我使用 setBackgroundDrawable 时，它​​说它已被弃用。

我应该用什么？

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2012-08-14T07:35:55.137

它已被弃用，但它仍然有效，因此您可以使用它。但是如果你想完全正确，只是为了它的完整性......你会做如下的事情：

```
int sdk = android.os.Build.VERSION.SDK_INT;
if(sdk < android.os.Build.VERSION_CODES.JELLY_BEAN) {
    setBackgroundDrawable();
} else {
    setBackground();
} 
```

为此，您需要将 buildTarget api 16 和 min build 设置为 7 或类似的东西。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2013-02-06T09:37:03.043

您可以改用`setBackgroundResource()`API 级别 1 中的那个。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2013-09-17T07:54:32.357

似乎目前这两个函数之间没有区别，如[**源代码**](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/view/View.java#View.setBackground%28android.graphics.drawable.Drawable%29)所示（归功于[**这篇文章**](https://stackoverflow.com/a/13729733/878126)）：

```
public void setBackground(Drawable background) {
    //noinspection deprecation
    setBackgroundDrawable(background);
}

@Deprecated
public void setBackgroundDrawable(Drawable background) { ... } 
```

所以这只是一个命名决定，类似于 fill-parent vs match-parent 。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-29T23:20:43.673

我知道这是一个老问题，但我有类似的情况，我的解决方案是

```
button.setBackgroundResource( R.drawable.ic_button );
Drawable d = button.getBackground(); 
```

然后你可以玩“Drawable”，应用颜色过滤器等

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-12-12T10:36:53.970

采用`ViewCompat.setBackground(view, background);`

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-04-24T11:10:27.837

你可以`setBackgroundResource()`改用，即`relativeLayout.setBackgroundResource(R.drawable.back);`

这对我有用。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-01-22T09:10:42.190

使用 Android Studio 1.5.1 我收到以下警告：

```
Call requires API level 16 (current min is 9): android.view.View#setBackground 
```

以及关于弃用的投诉

```
'setBackgroundDrawable(android.graphics.drawable.Drawable)' is deprecated 
```

使用这种格式，我摆脱了两者：

```
 if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.JELLY_BEAN) {
        //noinspection deprecation
        layout.setBackgroundDrawable(drawable);
    } else {
        layout.setBackground(drawable);
    } 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-04-11T16:03:12.183

现在您可以使用其中任何一个选项。无论如何它都会起作用。您的颜色可以是**HEX 代码**，如下所示：

```
myView.setBackgroundResource(ContextCompat.getColor(context, Color.parseColor("#FFFFFF"))); 
```

一个**颜色资源**，像这样：

```
myView.setBackgroundResource(ContextCompat.getColor(context,R.color.blue_background)); 
```

或**自定义 xml 资源**，如下所示：

```
myView.setBackgroundResource(R.drawable.my_custom_background); 
```

*希望能帮助到你！*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-29T20:06:07.053

这对我有用：***查看视图***是您的编辑文本、微调器...等。***int drawable***是您的可绘制路线示例（R.drawable.yourDrawable ）

```
 public void verifyDrawable (View view, int drawable){

        int sdk = Build.VERSION.SDK_INT;

        if(sdk < Build.VERSION_CODES.JELLY_BEAN) {
            view.setBackgroundDrawable(
                    ContextCompat.getDrawable(getContext(),drawable));
        } else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
            view.setBackground(getResources().getDrawable(drawable));
        }    
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-01T19:56:26.743

使用 setBackgroundResource(R.drawable.xml/png)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-08-02T11:49:01.863

我也遇到了这个问题，但我使用**ImageView**做了一个解决方法。

尝试使用**RelativeLayout**并在其中添加一个 ImageView（宽度和高度：fill_parent，scaleType：中心）。

还要确保 imageview 是 RelativeLayout 中的**第一个元素**，因此它将充当背景。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-04-02T11:56:21.583

你也可以这样做：

```
try {
     myView.getClass().getMethod(android.os.Build.VERSION.SDK_INT >= 16 ? "setBackground" : "setBackgroundDrawable", Drawable.class).invoke(myView, myBackgroundDrawable);
} catch (Exception ex) {
     // do nothing
} 
```

**编辑：正如@BlazejCzapp**所指出的那样，如果没有它就可以设法解决问题，最好避免使用反射。我有一个用例，我无法在没有反射的情况下解决，但上面不是这种情况。有关更多信息，请查看[http://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

# objective-c - 如何在 Cocoa App 中打开 jar 文件

> ID：11947609
> 
> 赞同：0
> 
> 时间：2012-08-14T07:24:54.627
> 
> 标签：objective-c, cocoa

我正在尝试在我的 Cocoa 应用程序中执行一个 jar。我的研究告诉我应该使用`NSTask`. 但是，我只能`system()`上班。例如：

```
// This works
system("cd /path/to ; /usr/bin/java -jar file.jar"); 
```

但这不起作用：

```
// This does not work
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/usr/bin/java"];
[task setArguments:[NSArray arrayWithObjects: @"-jar", @"/path/to/test.jar", nil] ];
[task launch]; 
```

当我运行我的应用程序时，我得到一个 class not found Java 异常，因为它找不到它的依赖项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:40:47.237

您的代码中没有一般错误，我自己尝试过。

我假设您已经在*.profile*、*.bashrc*或其他任何内容中定义了执行 Java 文件所需的**CLASSPATH**环境变量。

 **`system()`使用 shell 执行您的命令，因此 CLASSPATH 由`java`命令继承。

`NSTask`另一方面，*不*使用外壳，因此`java`不会从您的配置文件中了解 CLASSPATH。

解决方案是添加`@"-cp", @"<your class path>"`参数。

**更新**

正如讨论中发现的那样，这种情况下的问题不是类路径，而是*当前工作目录*。添加

```
[task setCurrentDirectoryPath:@"/path/to"] 
```

解决了这个问题。**

# java - Java：java.lang.NoClassDefFoundError：org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager

> ID：11947612
> 
> 赞同：0
> 
> 时间：2012-08-14T07:25:01.413
> 
> 标签：java, http

我使用 servlet 和 Tomcat 6.0 创建了一个 web 服务。我在 Eclipse 中创建了一个 java 项目来使用 HTTP 调用该 web 服务。
我添加了以下 jar 文件
1\. httpcore-4.0
2\. httpclient-4.0
但在运行项目时出现以下错误。

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.<init>(ThreadSafeClientConnManager.java:75)
at WSCall.HttpUtilities.GetServerResponse(HttpUtilities.java:52)
at WSCall.ServiceCall.main(ServiceCall.java:16)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 3 more 
```

请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:28:42.083

您的项目似乎不包含[Apache Commons Logging library](http://commons.apache.org/logging/)。将它添加到您的类路径应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:29:44.510

这是由于缺少 commons-logging.jar 造成的。要修复它，请下载 commons logging 库并将其添加到您的项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:31:16.577

您仍然必须在类路径下添加 common-logging 依赖项。但是，由于缺少其他依赖项，您可能会继续遇到其他类似的异常。我建议您使用 maven 来管理依赖项，这样您就不必手动将依赖项添加到类路径中。

# java - 根据java中的页数和页ID对列表进行分页

> ID：11947613
> 
> 赞同：0
> 
> 时间：2012-08-14T07:25:06.903
> 
> 标签：java, list, pagination

我有一个列表说它有 25 行。我的页数将始终为 5，并且我会将 pageId 传递给列表，以便我只能获取属于该页面 id 的那 5 行（例如，如果我的 pageId 为 2，我需要 6-10 中的行）.. 任何简单的方法来做到这一点？？？

`List<Employee> empList= (List<Employee>)employeeHelper.fetchallData();`

这`emplist`将包含所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:28:09.443

我不确定我是否理解，但您似乎正在寻找`emplist`.

你可以使用[`List.subList(int fromIndex, int toIndex)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)它的方法。

从javadocs：

> 返回此列表在指定的 fromIndex（包括）和 toIndex（不包括）之间的部分的视图。（如果 fromIndex 和 toIndex 相等，则返回列表为空。）返回列表由此列表支持，因此返回列表中的非结构性更改会反映在此列表中，反之亦然。返回的列表支持此列表支持的所有可选列表操作。
> 
> 这种方法消除了显式范围操作的需要（通常存在于数组中的那种）。通过传递 subList 视图而不是整个列表，任何需要列表的操作都可以用作范围操作。

要在第二个文档中获取元素 5-10（包括，从 1 开始计数）： `emplist.subList(25 * (2-1) + (5-1), 25 * (2-1) + 10)`

# c++ - Oracle OCIBindByPos() 用于输出绑定变量

> ID：11947614
> 
> 赞同：0
> 
> 时间：2012-08-14T07:25:08.197
> 
> 标签：c++, oracle, oracle-call-interface

有没有关于如何使用 OCI 绑定变量的好文档？我无法绑定**出绑定**变量。buf 与存储过程中的“OUT”变量绑定。

问题1：我需要预先分配内存`buf`吗？或者 OCI 可以做到这一点？

问题2：有没有办法知道存储了多少字节的字符`buf`？或者只是把它当作一个以空结尾的 C 字符串？

```
int pos; 
char* buf; 
size_t len;
int rc = OCIBindByPos( Stmt, &bind, errhp, pos, buf, len, SQLT_STR,
                       NULL, NULL, NULL, 0, NULL, OCI_DEFAULT ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T09:43:18.307

问题一：buf需要预先分配内存吗？或者 OCI 可以做到这一点？是的，你当然需要。您需要使用 OCIHandle

```
OCIHandleAlloc((dvoid *)OCIEnv, (dvoid **)&OCIStmt, OCI_HTYPE_STMT, len, 
                      (dvoid **)&buf); 
```

问题2：有没有办法知道buf中存储了多少字节的字符？或者只是把它当作一个以空结尾的 C 字符串？

在

```
OCIBindByPos 
```

你告诉多少字节。

# c++ - 启动应用程序时的 dll 问题

> ID：11947615
> 
> 赞同：1
> 
> 时间：2012-08-14T07:25:09.837
> 
> 标签：c++, c++11, c++builder

![在此处输入图像描述](../Images/00d95654114005b4c3b0bf4fa54c0dbf.png)我在我的应用程序中使用一个 dll 来包含该 dll 提供的功能。我在安装一个 msi 后得到这个 dll。但是在我的应用程序中，我有一个要求，比如如果用户没有安装那个 msi，那么我们必须显示一条警告消息（例如 msi 没有安装，我已经在我的应用程序的 main() 中实现了这个代码）并且必须退出应用程序。

但问题是，如果用户没有安装 msi，那么在启动应用程序本身时，它会显示一条错误消息，因为它无法获取 dll，而这一次控制甚至没有进入我编写代码的 main()对于此 msi 检查（通过注册表项）。

有什么有效的方法来解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:16:12.753

考虑延迟加载 DLL（项目 -> 选项 -> 高级链接器）。

这将允许您的应用在缺少 DLL 时加载。

# iphone - 在代码中捕获照片点击事件：iPhone

> ID：11947616
> 
> 赞同：2
> 
> 时间：2012-08-14T07:25:14.860
> 
> 标签：iphone, ios, camera, alassetslibrary, alasset

我想创建一个类似于 iCloud 中照片流的环境。当我的应用程序在后台时，我可以通过 iPhone 的相机应用程序获取用户点击照片的事件吗？示例代码将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:39:41.117

简短的回答是不。

沙盒原则意味着您无法访问另一个应用程序环境，另一个应用程序也无法访问您的环境。

您的应用程序访问相机的方式是通过`AVCaptureSession`类或`UIImagePickerController`

# javascript - OpenLayers 谷歌层日语

> ID：11947620
> 
> 赞同：0
> 
> 时间：2012-08-14T07:25:31.160
> 
> 标签：javascript, google-maps, openlayers

[OpenLayers 谷歌 http://desmond.imageshack.us/Himg31/scaled.php?server=31&filename=screenshot20120814at916.png&res=landing](http://desmond.imageshack.us/Himg31/scaled.php?server=31&filename=screenshot20120814at916.png&res=landing)

我正在开发一个 OpenLayers 地图，其中包含一个 OSM 层和一个 Google Hybrid。问题是所有的城镇都是中文/日文的？显然我想让它们用荷兰语/英语。有人知道我做错了什么吗？这是我加载地图的地方：

```
// add google aerial layer
var googleLayer     = new OpenLayers.Layer.Google(
     "satellite",
     {type: google.maps.MapTypeId.HYBRID, numZoomLevels: 19}
);
window.map[page_id].addLayer(googleLayer);
googleLayer.mapObject.setTilt(0); 
```

平移地图时，标记也倾向于四处移动。那可以修吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:05:59.130

根据谷歌地图[文档](https://developers.google.com/maps/documentation/javascript/basics)，您可以通过在导入谷歌地图脚本时指定语言参数来强制执行某些语言：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&language=ja"> 
```

尝试`language=en`强制执行英文标签

# android - 如何获取字符串的特定部分？

> ID：11947621
> 
> 赞同：0
> 
> 时间：2012-08-14T07:25:52.767
> 
> 标签：android, string

```
item1:100

item2:50

item3:200 
```

我想存储单独的项目和价格并将它们存储在两个不同的数组中：就像在一个数组中，

```
item1

item2

item3 
```

在另一个数组中

```
100

50

200 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:31:54.127

您可以尝试以下代码：

```
String DELIMITER = ":";

ArrayList<String> arrItems = new ArrayList<String>();
ArrayList<Integer> arrPrices = new ArrayList<Integer>(); 
```

然后您可以拆分字符串并将相关值存储在 arraylist 中：

```
String[] strTemp = "item1:100".split(DELIMITER);
arrItems.put(strTemp[0]);
arrPirces.put(strTemp[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:29:22.690

您可以根据需要使用`StringTokenizer`类。

```
StringTokenizer st = new StringTokenizer(yourString, ":");
arrayOne[0] = st.nextToken();
arrayTwo[0] = st.nextToken(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:28:02.747

您可以使用`split`基于另一个字符串（实际上是正则表达式）来分隔一个字符串：

```
String str = "item1:100";
String[] words = str.split (":"); 
```

从那里，添加`words[0]`到一个数组和另一个数组是一件简单的事情`words[1]`。

以下完整程序显示了它是如何完成的：

```
import java.util.ArrayList;
class Test {
    private static ArrayList<String> items = new ArrayList<String>();
    private static ArrayList<Integer> values = new ArrayList<Integer>();
    private static void addToArray (String str) {
        String[] words = str.split(":");
        items.add(words[0]);
        values.add(new Integer (words[1]));
    }
    public static void main(String[] args) {
        addToArray ("item1:100");
        addToArray ("item2:50");
        addToArray ("item3:200");

        for (int i = 0; i < items.size(); i++)
            System.out.println ("Item = " + items.get(i) +
                ", value = " + values.get(i));
    }
} 
```

输出：

```
Item = item1, value = 100
Item = item2, value = 50
Item = item3, value = 200 
```

请记住，我只是在这里进行简单的字符串拆分，没有错误处理代码 - 如果您重视健壮的代码，您可能需要添加这一点，特别是如果您的输入数据可能无效（例如，`"item4:hello"`将生成一个`java.lang.NumberFormatException`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:33:44.493

Java 在字符串中提供了 split 函数。`str.split(":")`for "item:100" 返回一个带有元素的 String[] `{"item1","100}`。现在只需遍历拆分数组并构建两个部分的组合数组。

来源： [http](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String) ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split(java.lang.String )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T07:28:51.250

您可以使用`split()`字符串的方法。

```
 String[] temp = yourString.split(":"); 
```

尝试这个。

# database - 如何在 Feedzilla API 中解析 JSON

> ID：11947622
> 
> 赞同：0
> 
> 时间：2012-08-14T07:25:56.483
> 
> 标签：database, json, parsing, feedzirra

您好，我正在开发 FeedZilla API，用于以 JASON 格式访问数据。我收到了回复，但无法显示。这是我的代码。

```
<script type="text/javascript">
    $(document).ready(function() 
    {
        $.ajax({
                //url:"http://api.feedzilla.com/v1/categories/26/articles/search.json?q=Michael",
                url:"http://api.feedzilla.com/v1/categories/26/articles.json",
                type:'GET',
        //      data:'value='+value+'/'+sid,
                dataType:'json',

                       error: function()
                {
                    alert('Error loading Data.');
                    //LOADER.hide(2000);
                },

                success: function(rs)
                {
                     jQuery("#unclockcodersource").html(Object(url));
                     //LOADER.hide(2000);

                } 
             });
    });
</script>
<div id="unclockcodersource"></div> 
```

我想显示这些数据并将数据保存在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:41:57.957

试试这个从 JSON 获取特定属性

> ```
>  success: function(rs)
>     {
>         $.each(rs.articles, function(index, ele){
>             alert(this.author);
>         });
>     } 
> ```

要不然

> ```
>  success: function(rs)
>     {
>         $.each(rs.articles, function(index,ele){
>             alert(ele.author);
>         });
>     } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:33:30.493

尝试

> jQuery("#unclockcodersource").text(rs);

# java - 将 Button/EditText 添加到相对布局（膨胀）

> ID：11947625
> 
> 赞同：0
> 
> 时间：2012-08-14T07:26:16.633
> 
> 标签：java, android, listview, layout, layout-inflater

我遇到了这段代码的问题：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.list_mobile, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(values[position]);

        // Change icon based on name
        String s = values[position];

        System.out.println("s = "+s);
        System.out.println("Results = "+name[2].toString());
        for (int i = 0; i < name.length; i ++){
            if (s.equals(name[i])) {
                imageView.setImageDrawable(loadImageFromURL("http://10.0.0.117/test/"+s+".jpg", "iOS"));
            }
        }
        return rowView;
    } 
```

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp"
        android:contentDescription="@string/desc"
        android:src="@drawable/windowsmobile_logo" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/logo"
        android:layout_marginBottom="16dp"
        android:layout_toRightOf="@+id/logo"
        android:text="@+id/label"
        android:textSize="20dp" />

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >

        <Button
            android:id="@+id/btn_zoeken"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@+id/txt_zoeken"
            android:text="@string/Zoeken" />

        <EditText
            android:id="@+id/txt_zoeken"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" >

            <requestFocus />
        </EditText>
    </RelativeLayout>

</RelativeLayout> 
```

我遇到了这个问题：
我有一个列表，在屏幕底部，它们应该始终是 an`EditText`和 a `button`。但是当我在布局中添加它并启动应用程序时，它会将`EditText`and放置`button`在 every`row`中，请参见图片：

这就是它的样子（坏的）：

![现在怎么样（坏）](../Images/7382fa5f1f210e725928038194367247.png)

应该是这样的：

![应该如何](../Images/a1c4e4e8a81ffb900719ca36ffc0a43c.png)

我进入了 a `RelativeLayout`in a的布局`RelativeLayout`，因为我希望它能解决这个问题，但它没有。

**请注意，我在相对布局中制作了一个列表，所以我不使用 ListView。**
任何人都有解决方案或建议如何解决这个问题？

我希望我的问题很清楚。

已经谢谢了， Bigflow

**编辑1：**

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.inflater, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        Button btn_zoeken = (Button) rowView.findViewById(R.id.button1);
        textView.setText(values[position]);

        // Change icon based on name
        String s = values[position];

        System.out.println("s = "+s);
        System.out.println("Results = "+name[2].toString());
        for (int i = 0; i < name.length; i ++){
            if (s.equals(name[i])) {
                imageView.setImageDrawable(loadImageFromURL("http://10.0.0.117/test/"+s+".jpg", "iOS"));
            }
        }
        return rowView;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:35:56.423

按照建议使用文件中的按钮（即 btn_zoeken）和图像（即 txt_zoeken）`main.xml`作为页脚。并`Mohasin Naeem`使用它`android:layout_alignParentBottom="true"`。

并膨胀你`list_mobile.xml`的`main.xml`布局文件。

所以你`list_mobile.xml`应该看起来像这样。

```
 <RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

  <EditText
      android:id="@+id/editText1"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_toLeftOf="@+id/button1" />

  <Button
      android:id="@+id/button1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:layout_alignParentRight="true"
      android:text="Button" />

</RelativeLayout> 
```

btn_zoeken 和 txt_zoeken 应该在主屏幕的底部。你膨胀的 layout.xml 应该如下所示。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="5dp" >

<ImageView
    android:id="@+id/logo"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="5dp"
    android:contentDescription="@string/desc"
    android:src="@drawable/windowsmobile_logo" >
</ImageView>

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/logo"
    android:layout_marginBottom="16dp"
    android:layout_toRightOf="@+id/logo"
    android:text="@+id/label"
    android:textSize="20dp" />
 </RelativeLayout> 
```

基本上，在膨胀布局时，您需要两个 xml 文件。一个是您的`main.xml`(list_mobile.xml)，另一个是您的膨胀 xml

# grails - Grails - 使用一列复选框批量更新表行

> ID：11947626
> 
> 赞同：0
> 
> 时间：2012-08-14T07:26:16.560
> 
> 标签：grails

我有一个可以在线修改行的表。每行末尾都有一个提交按钮列。这很好用，因为我遍历域对象的支持列表，将每个对象放入一个表单中，然后以这种方式单独提交它们。

当我添加一列复选框以允许用户批量更新多行时，我的问题就出现了。批量更新操作的按钮在该表之外，也是每一行的表格。当我点击表外的批量更新按钮时，如何获取所选行的支持域对象？

我意识到我可能可以专门为复选框向域对象添加一个字段，但我不想这样做，因为它看起来很乱，而且只是我必须使用的 UI 的结果，而不是服务于功能目的。

提前感谢您的帮助，如果您需要更多信息，请告诉我！

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:20:10.637

1.  Don't keep one form for each row, keep it as one big form.
2.  Give each checkbox the same 'name', and on the backend you can access it as a list.
    Example: <g:checkbox name="selectedRow" />
3.  Similarly give each input field in each column the same name also. For example, give all textboxes which take the input of age in all the rows the same name.
4.  Now on the backend all the column inputs can be accessed as groovy lists.
5.  Extract the checkbox inputs by doing 'params.selectedRow' (selectedRow was the name given to our checkboxes above)
6.  now in that list find the checkboxes which have value true, match the indexes of this checkbox list with the rest of the inputs, and update them.

I've tried to make this answer as detailed as possible, let me know if you didnt understand any part.

# php - 通过跳过一行查询组

> ID：11947627
> 
> 赞同：0
> 
> 时间：2012-08-14T07:26:18.340
> 
> 标签：php, mysql

我有一张桌子

```
students[std_id, name, class, gender,etc]

select class,gender,count(*) as total_students 
from students 
group by class,gender 
```

它的输出如下

```
 1st | male   | 23   
 1st | female | 11   
 2nd | male   | 17   

 2nd | female | 0 
```

//最后一行没有显示，因为二班有0个女学生

如何使用 total_sudents=0 使其如上所示，而不是跳过记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:34:22.583

您可以通过为每个性别编写查询然后合并它们来做到这一点：

```
select class, 'male' as gender, 
    count(case when gender = 'male' then 1 end) as total_students 
from students 
group by class

union all

select class, 'female' as gender, 
    count(case when gender = 'female' then 1 end) as total_students 
from students 
group by class 
```

或者，您可以这样做：

```
select class, 
    count(case when gender = 'male' then 1 end) as total_male_students,
    count(case when gender = 'female' then 1 end) as total_female_students  
from students 
group by class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:35:06.390

使用此解决方案：

```
SELECT    a.class,
          a.gender,
          COUNT(b.class) AS total_students
FROM      (
          SELECT     a.class, 
                     b.gender
          FROM       students a
          CROSS JOIN (
                     SELECT 'male' AS gender UNION ALL 
                     SELECT 'female'
                     ) b
          GROUP BY   a.class, 
                     b.gender
          ) a
LEFT JOIN students b ON a.class = b.class AND 
                        a.gender = b.gender
GROUP BY  a.class,
          a.gender 
```

# php - 修改多维数组中的键值

> ID：11947630
> 
> 赞同：0
> 
> 时间：2012-08-14T07:26:40.113
> 
> 标签：php, multidimensional-array

如何正确格式化或更新数组中的`date_created`值，以便在我拥有相同的数组但其中包含一些修改后的值之后？

我想`date_created`用这个函数格式化一个值`date("D, d F Y, H:i:s", strtotime($date_created));`

这是转储数组的结果 - `var_dump($query)`：

```
array
  0 => 
    array
      'id' => string '2' (length=1)
      'title' => string 'Title 2' (length=55)
      'date_created' => string '2011-03-09 08:04:14' (length=19)
  1 => 
    array
      'id' => string '1' (length=1)
      'title' => string 'Title 2' (length=57)
      'date_created' => string '2011-08-14 18:34:04' (length=19) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:30:12.443

您所要做的就是遍历数组，更改值并将子数组替换为同一索引中的原始数组。

```
foreach($query as $key => $subArray){
  $subArray['date_created'] = date("D, d F Y, H:i:s", strtotime($subArray['date_created']));
  $query[$key] = $subArray['date_created'];
} 
```

# c# - 使用 Directory.CreateDirectory( ) 创建目录，在尝试删除或重命名时会发出警告消息

> ID：11947631
> 
> 赞同：0
> 
> 时间：2012-08-14T07:26:44.190
> 
> 标签：c#, winforms, security, file, directory

我的应用程序创建了几个文本文件，其中包含用于其工作的重要数据。我将所有这些文件分组到一个文件夹中。在`Form_load()`I give`Directory.CreateDirectory("C:\\xyz")`中，当应用程序将交付给客户端时，将在驱动器中创建一个文件夹，该文件夹稍后将包含文本文件。我想看到用户没有**删除或重命名**文件夹。显示一些**警告消息**的**对话框**会很有帮助。有可能吗？**`Directory.CreateDirectory()`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:40:26.720

首先，您可能会发现阅读[本文](http://blogs.msdn.com/b/oldnewthing/archive/2009/08/26/9884331.aspx)很有帮助。

第二：如果我正确理解你的需求，你想要的比你想象的要痛苦得多**。**
你**真的**应该考虑按照 Damien_The_Unbeliever 告诉你的去做。

但是，如果您坚持：您将需要为此使用 C++（C# 会给您和您的用户带来很多痛苦），并且您需要`SHFileOperation`通过类似`ICopyHook`. 首先看一下[`ICopyHook`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776049.aspx)。这将是大量的工作和大量的学习，**我认为这不值得**，但有信息。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:31:50.987

我认为你应该警告用户这个目录的重要性。但是，您可以通过执行这种检查来重新创建目录：

```
if(!Directory.Exists(path))
  Directory.CreateDirectory(path); 
```

从这一点上，你可以想象一种机制，它以临时方式保存重要文件，如果目录被删除，你重新创建它并将之前保存的文件放入其中。**

# java - 如何在java中制作文件加载器

> ID：11947637
> 
> 赞同：0
> 
> 时间：2012-08-14T07:27:28.667
> 
> 标签：java, file, save, joptionpane, filewriter

我已经制作了一个程序，将输入的数据保存在文本字段中。它的保存技术是这样的

```
data0 = student number
data1 = name
data2 = section
data3 = cp
data4 = email
data5 = address 
```

然后它将所有条目保存在一行文本中，如下所示

```
data0 | data1 | data2 | data3 | data4 | data5 
```

但我面临的问题是如何加载字符串并对不同的数据进行切片并将其打印在指定它们的不同文本字段中。

顺便说一句，这是我的代码

```
import java.awt.HeadlessException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import javax.swing.JOptionPane;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Jfetizanan
 */
public class DATAPROCCESS extends javax.swing.JFrame {
    private static final long serialVersionUID = 1L;

    /**
     * Creates new form processPOINT
     */
    public DATAPROCCESS() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jLabel7 = new javax.swing.JLabel();
        Label1 = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        StudentNO = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        name = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        section = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        cp = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        email = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        save = new javax.swing.JButton();
        reset = new javax.swing.JButton();

        jLabel7.setText("jLabel7");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setAlwaysOnTop(true);
        setBackground(new java.awt.Color(51, 102, 255));
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setResizable(false);

        Label1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        Label1.setText("STUDENT INFO STORAGE v1");

        jLabel1.setText("Student No:");

        jLabel2.setText("Name:");

        jLabel3.setText("Section:");

        jLabel5.setText("Cellphone #:");

        jLabel6.setText("E-Mail:");

        jLabel8.setText("Address:");

        save.setText("Save");
        save.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {
                                 File file = new File("data.dat");

                            try {
                                 try (FileWriter writer = new FileWriter(file, true)) {
                                 String data0 = StudentNO.getText();
                                 String data1 = name.getText();
                                 String data2 = section.getText();
                                 String data3 = cp.getText();
                                 String data4 = email.getText();
                                 String data5 = jTextField1.getText();

                                 writer.write(data0+" | "+data1+" | "+data2+" | "+data3+" | "+data4+" | "+data5+"/n");
                                }

                                System.out.println("Data Saved");
                                } catch (IOException | HeadlessException z) {
                                JOptionPane.showMessageDialog(null, e);
                                }
                                } 
                                });
        reset.setText("Reset");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(Label1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(10, 10, 10)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                        .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                    .addGroup(layout.createSequentialGroup()
                                        .addGap(1, 1, 1)
                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel4)
                                            .addComponent(jLabel3))))
                                .addGap(15, 15, 15))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel6)
                                    .addComponent(jLabel5)
                                    .addComponent(jLabel8))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addComponent(save, javax.swing.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE)
                                .addGap(18, 18, 18)
                                .addComponent(reset, javax.swing.GroupLayout.PREFERRED_SIZE, 138, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(StudentNO)
                            .addComponent(name)
                            .addComponent(section)
                            .addComponent(cp)
                            .addComponent(email)
                            .addComponent(jTextField1))
                        .addGap(0, 13, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Label1, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(StudentNO, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(name, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(section, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(11, 11, 11)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(20, 20, 20)
                        .addComponent(jLabel4))
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(cp, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel5)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(email, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel6))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel8))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(save)
                    .addComponent(reset))
                .addContainerGap(27, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(DATAPROCCESS.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new DATAPROCCESS().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JLabel Label1;
    private javax.swing.JTextField StudentNO;
    private javax.swing.JTextField cp;
    private javax.swing.JTextField email;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField name;
    private javax.swing.JButton reset;
    private javax.swing.JButton save;
    private javax.swing.JTextField section;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:40:52.207

如果您尝试解析数据文件中的数据并将其加载到相应的字段，您可以执行这些操作。
1\. 读取文件的内容。[您可以在此处](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml)获取示例 2\. 使用以下代码拆分内容。

> ```
> String delimiter = "|";
> temp = str.split(delimiter);
> for(int i =0; i < temp.length ; i++) {
>      System.out.println(temp[i]); //you will get data here
> } 
> ```

3.现在获取相应的文本字段并加载相应的数据

1.  现在您正在尝试使用第一个字段实际搜索数据。你可以在下面这样做。

> ```
> try{
>       FileInputStream fstream = new FileInputStream("data.dat");
>       DataInputStream in = new DataInputStream(fstream);
>       BufferedReader br = new BufferedReader(new InputStreamReader(in));
>       String strLine;
>       while ((strLine = br.readLine()) != null)   {
>        if (strLine.startsWith("Give your data0 here")){
> 
>                         String delimiter = "|";
>                         temp = str.split(delimiter);
>                         for(int i =0; i < temp.length ; i++) {
>                           System.out.println(temp[i]); //you will get data here
>                         }
>        }
>       }
>       in.close();
>       }catch (Exception e){
>           System.err.println("Error: " + e.getMessage());
>       } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:36:15.120

使用此代码：

```
BufferedReader reader = new BufferedReader( new InputStreamReader( new FileInputStream( "filename" ), "UTF-8" ) ) );
String line = reader.readLine();
reader.close();
String[] parts = line.split( "\\|", -1 ); 
```

注意：你不应该使用`FileWriter`，因为它使用“默认编码”——不管是什么。始终使用

```
BufferedWriter writer = new BufferedWriter( new OutputStreamWriter( new FileOutputStream( "filename" ), "UTF-8" ) ) ); 
```

# android - 如何在果冻豆中使用“选择调试应用程序”和“等待调试器”新功能？

> ID：11947640
> 
> 赞同：23
> 
> 时间：2012-08-14T07:27:37.913
> 
> 标签：android, android-4.2-jelly-bean

“选择调试应用程序”和“等待调试器”是 Jelly Bean 中的新功能，有人知道如何使用这些新功能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-18T00:55:23.177

我在这里找到了答案：http: [//developer.android.com/tools/debugging/debugging-devtools.html](http://developer.android.com/tools/debugging/debugging-devtools.html)

> 让您选择要调试的应用程序。您不需要设置它来附加调试器，但设置这个值有两个效果：
> 
> *   如果您在调试时在断点处暂停很长时间，它将防止 Android 抛出错误。
> *   它将使您能够选择等待调试器选项以暂停应用程序启动，直到您的调试器附加（如下所述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:06:15.313

这对我来说也是一个谜，但我会分享我的经验。我看不到这些选项会改变手机的行为。无论我选择何种设置，Galaxy Nexus 的行为都与我没有这些设置的旧手机一样。

“等待调试器”是我从 Eclipse 开始运行应用程序时看到的对话框。它会保持一段时间，然后我的应用程序开始运行。自从我开始 Android 开发以来就是这种情况，无论设置如何，它仍然可以在我的新旧设备上运行。

如果我单击“选择调试应用程序”，它允许我从手机上已安装的允许调试的应用程序中选择一个应用程序，这些应用程序是我自己编写的应用程序。

在我的 Galaxy Nexus 上，无论我选择“无”还是我的可调试应用程序之一，我仍然可以从 Eclipse 调试任何应用程序。我什至看不到通过 ADB 连接加载应用程序所需的时间差异。

# android - Android 密钥处理（框架）

> ID：11947653
> 
> 赞同：8
> 
> 时间：2012-08-14T07:28:35.933
> 
> 标签：android, key-events, android-framework

框架的某些部分对我来说还不是很清楚。我对输入事件的流程（内核 -> Eventhub -> InputReader -> InputDispatcher -> ...）非常熟悉。

**情况**

*（要求：在不更改 Android 框架的情况下处理输入键。）* 我想处理来自设备（键盘/游戏板/控制器/...）的键事件，但有一些要求。一方面，我不想更改 Android 框架。这意味着，我不想像处理 home 键的地方`WindowManagerPolicy`那样扩展 及其功能。`interceptKeyBeforeDispatching`这将导致关键事件被分派到应用层，这很好。缺点是，我这里还有一个棘手的要求。示例：当我玩 Angry Birds 并按下连接的输入设备上的 GoToAlpha 按钮时，必须启动 Alpha 应用程序。愤怒的小鸟不知道 GoToAlpha 是哪个按钮，不会处理/识别它，例如不会广播任何意图来启动我的 Alpha 应用程序。

**问题**

有没有办法在我的（自定义）键事件被调度后处理它，知道前台的应用程序无法处理键？

**我的（失败的）解决方案**

*   创建一个将处理关键事件的服务。这是不可能的，因为像 Angry Birds 这样的应用程序不会绑定到我的服务，并且关键事件不会被我的服务捕获。如果我错了，请提供更多信息:)。

*   创建一个外部库，允许我的应用程序的活动从我自己的 ActivityBase 继承。所有关键事件和默认行为都可以在这里处理。不利的一面是，现有应用程序将不支持我的自定义键事件，因为它们不使用该库。

*   在我看来，扩展框架是最干净的解决方案，但这将导致无法满足我的要求。

**任何帮助或有用的信息将不胜感激**

> **额外的**
> 
> 如果第一个问题可以以某种方式解决.. 我想自定义我`Intent`的 GoToAlpha 按钮。这意味着.. 默认情况下，Alpha 应用程序将启动，但在用户自定义后，Beta 应用程序将从现在开始.. 有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:35:58.747

感谢维克多的评论。

使用`InputMethodService`不会为我提供足够的自由和功能来处理我的问题。

**我的解决方案/妥协**

在 Android 框架内，有一个`PhoneWindowManager`which 负责处理`InputEvents`. 由`WindowManagerService`, 启动的`SystemServer`是此管理器的所有者并创建一个实例。

通过创建我自己的自定义 WindowManager 并让它从 Android 继承`PhoneWindowManager`，我不会丢失任何默认功能，这允许我在此类中添加自己的实现。这个结果是向框架添加了一个新文件，并且只更改了 Android 框架内的一行：`WindowManagerService`不会创建一个`PhoneWindowManager`，但会创建一个`CustomPhoneWindowManager`（扩展 PhoneWindowManager）。

如果有人看到更好的解决方案或对我的妥协有任何具体想法，请不要犹豫发表评论。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T23:04:48.900

我怀疑公共 API 是否有可能（Boy 和 Martijn 指出了安全问题）。

最像您最好的选择（如果您不想自定义 Android）将是

a) 尝试使用 InputMethodService (http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)

它没有提供您希望的那种控制，但它可能足以满足某些需求。

b) 尝试遍历整个堆栈（从内核到应用程序）并找到一些可以使用的漏洞。

这肯定会花费很多时间，并且不能保证带来任何水果。

# c - 为什么控制进入“其他”部分？

> ID：11947654
> 
> 赞同：-11
> 
> 时间：2012-08-14T07:28:36.183
> 
> 标签：c

```
int a = 8;

if (a==8)
    printf("x");
else 
    printf("y"); 
```

虽然`a`等于`8`，但它输出`y`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:43:08.703

上面的代码总是打印`x`. 如果您的代码打印了其他内容，那么您在问题中省略了重要信息。

要找出可能是什么，试试这个：

1.  `#undef a`在之前插入`int a = 8;`以确保没有与代码混淆的 C 预处理器宏。

2.  交换条件以查看是否`a`真的是您所期望的：

    ```
    if( 8 == a ) 
    ```

    这个小技巧还可以防止你意外分配错误（`if( a = 8 )`）

# c++ - class::data_member 与 class_object.data_member

> ID：11947667
> 
> 赞同：0
> 
> 时间：2012-08-14T07:29:17.957
> 
> 标签：c++

* * *

我刚刚看到[一个帖子](https://stackoverflow.com/a/672886/888051)，其中我发现了我以前从未见过的东西，简而言之就是：

```
class A {
public:
    int _x;
};

void foo(A *a_ptr, int *m_ptr)
{
    cout << (*a_ptr).*m_ptr << endl;  // here
}

int main()
{
    A a;
    a._x = 10;
    foo(&a, &A::_x);   // and here
} 
```

怎么可能做到？传入`&A::_x`，然后使用`(*a_ptr).*m_ptr`?

我想，`&A::_x`总会引用同一个地址，但是不同的对象有不同`_x`的，怎么可能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:58:38.027

`&A::_x`是指向成员的指针，它*不是*指针。相反，将其视为某种相对结构，它告诉您在*对象内部的*什么位置可以找到特定的成员元素。只有与实例引用*一起*，您才能找到该实例的实际子对象，该子对象由成员指针给出。

相比：

```
struct Foo { int x; int y; };

Foo a = { 1, 2 };
Foo b = { 3, 4 };
Foo c = { 5, 6 };

int * p = &a.x;  // ordinary pointer-to-int

int Foo::*pm = &Foo::x;             // pointer-to-member
int result = a.*pm + b.*pm + c.*pm; // aggregate Foo::x
// point to a different member:
pm = &Foo::y;
result = a.*pm + b.*pm + c.*pm;     // aggregate Foo::y 
```

# .net - 在列表 linq 中选择重复项

> ID：11947670
> 
> 赞同：2
> 
> 时间：2012-08-14T07:29:26.357
> 
> 标签：.net, winforms, linq, list

我需要使用 linq 从列表中选择重复项并返回每个数组都包含重复项的数组列表。例如，如果我的清单是

```
{2,2,3,13,4,4,15,5,7,8,9,12,13} 
```

然后我需要退回

```
{2,2},{4,4} 
```

以下代码仅为每个重复项返回一个值

```
int[] listOfItems = new[] {2,2,3,13,4,4,15,5,7,8,9,12,13};
var duplicates = listOfItems
    .GroupBy(i => i)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key);
foreach (var d in duplicates)
    Console.WriteLine(d); 
```

这会产生以下结果：

```
4
2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:32:21.367

好吧，这就是问题所在：

```
 .Select(g => g.Key) 
```

您明确地*只是*选择了密钥。

删除该呼叫，您将选择所有组 - 您将获得一个`IEnumerable<IGrouping<int, int>>`. 当然，您还需要更改输出。例如：

```
foreach (var group in duplicates)
{
    Console.WriteLine("{{{0}}}", group.Join(","));
} 
```

编辑：对于`List<int[]>`你只需要：

```
var duplicates = listOfItems
    .GroupBy(i => i)
    .Where(g => g.Count() > 1)
    .Select(g => g.ToArray())
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:32:40.253

只要去掉这`.Select(g => g.Key)`条线，你就会有，基本上，嵌套的枚举。

```
int[] listOfItems = new[] {2,2,3,13,4,4,15,5,7,8,9,12,13};
var duplicates = listOfItems
    .GroupBy(i => i)
    .Where(g => g.Count() > 1);

foreach (var g in duplicateGroups)
{
    foreach (var d in g)
    {
        Console.WriteLine(d); 
    }
    Console.WriteLine();
} 
```

如果你想要一个数组列表，你会想要

```
var listOfArrays = duplicates.Select(g => g.ToArray()).ToList(); 
```

相似地

```
var listOfLists = duplicates.Select(g => g.ToList()).ToList();
var arrayOfLists = duplicates.Select(g => g.ToArray()).ToList();
var arrayOfArrays = duplicates.Select(g => g.ToArray()).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:58:05.983

一个更简单的替代方案是：

```
listOfItems
    .ToLookup(x => x)
    .Where(x => x.Skip(1).Any()); 
```

# google-apps-script - 如何访问其他用户的私人电子表格（由我拥有且不共享）

> ID：11947672
> 
> 赞同：0
> 
> 时间：2012-08-14T07:29:31.630
> 
> 标签：google-apps-script, google-sheets

我为我的公司创建了一个应用程序（称为：休假管理），它从谷歌网站（用于 UI）、谷歌电子表格（用于数据库）创建并与谷歌应用程序脚本集成。该应用程序处理离职请求，因此，使用公司电子邮件登录的员工可以从谷歌网站读取和写入电子表格。这就是问题所在......我不希望员工可以编辑电子表格“直接”......他们应该在谷歌网站上读写......所以电子表格的共享设置必须是“私人”。 ..但是如果电子表格是“私人的”，其他员工就不可能读取或写入......在我看来......我们可以访问电子表格，但我们必须有电子邮件电子表格所有者，以及密码......它应该像这样

```
var Sheet = SpreadsheetApp.openById("SpreadsheetID", "emailSpreadsheetOwner", "passEmailSpreadsheetOwner") 
```

但是是的......它不起作用......你能帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:34:36.540

我在应用程序中使用相同的设置，电子表格设置为“任何拥有链接的人都可以编辑”，但没有用户知道工作表的名称或 ID，因此他们只能通过 UI 读写，而且永远不会打开ss本身。这不是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:15:30.777

有两种部署应用程序的方法。鉴于您的要求，让您的应用程序以脚本所有者的身份运行，而不是以“访问 Web 应用程序的用户”的身份运行。这样，您（脚本的所有者）可以将电子表格保密，但能够从当不同的用户访问应用程序时。

# actionscript-3 - 我需要多少图像才能拥有更流畅的动画（Actionscript）；

> ID：11947682
> 
> 赞同：0
> 
> 时间：2012-08-14T07:30:09.040
> 
> 标签：actionscript-3, flash, animation, actionscript, multiplication

我有一个 onEnterFrame 事件：

```
package  {
    import flash.display.MovieClip;
    import flash.display.Loader;
    import flash.events.Event;
    import flash.net.URLRequest;
    import flash.display.BitmapData;
    import flash.geom.Matrix;
    import flash.errors.IOError;

    public class Ball extends MovieClip {

        private var images:Array;
        private var frames:Array;
        var i:int = 0;
        public function Ball(images:Array) {

            this.images = images
            frames = new Array();
            images.forEach(function(current){
                        trace(current);
                var loader:Loader = new Loader();
                loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadCompleted);
                loader.load(new URLRequest(current));
            });

        }

        private function onLoadCompleted(e:Event):void{
            frames.push(e.currentTarget.content);
            i++;
            if(i == images.length)
            {
                ready();
            }

        }

        private function ready():void{

            i = 0;
            addEventListener(Event.ENTER_FRAME, onEnterFrame);

        }

        private function onEnterFrame(e:Event):void{

            graphics.clear();
            var bitmapData:BitmapData = frames[i].bitmapData;
            graphics.beginBitmapFill(bitmapData, new Matrix(), false, true);
            graphics.drawRect(0, 0, 100, 100);
            graphics.endFill();
            i++;
            if(i == frames.length)
            {
                i = 0;

            }

        }

    }

} 
```

此类正在获取一组图像，然后对其进行动画处理，这是我的主要课程：

```
public class Test extends MovieClip {

        private var ball:Ball;
        public function Test()
        {
            var images:Array = new Array();
            for(var i:int = 1; i < 21; i++)
            {
                images.push('ball' + i.toString(10) + '.png');

            }
            ball = new Ball(images);
            addChild(ball);
        }

    } 
```

如您所见，我正在传递一个包含 20 个图像的数组，所以问题是我需要多少图像才能制作出一个好的动画，不是粗略的，而是平滑的，每次创建一个新图像，如 ball1.png、ball2.png、ball3 .png, ball4.png - 我需要按像素移动球像素才能制作出好的动画？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:35:06.133

这取决于您的感知和设备以及您希望从内容中可视化的内容。请参考本站：

[http://www.mathworks.com/help/toolbox/mupad/plot/INTRO_FramesAndTimeRange.html](http://www.mathworks.com/help/toolbox/mupad/plot/INTRO_FramesAndTimeRange.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:23:17.267

我首先要考虑的是帧率。将更多图像作为帧速率是没有意义的。

基本上对于流畅的动画，30 fps 应该没问题。此外，如果您考虑将其用于移动设备，我认为您不应该高于 30fps 以获得良好的性能。

关于图像的数量和如何制作动画，我建议你看看这个游戏教程（饥饿英雄）

[http://www.hsharma.com/tutorials/starting-with-starling-ep-3-sprite-sheets/](http://www.hsharma.com/tutorials/starting-with-starling-ep-3-sprite-sheets/) [http://www.hsharma.com/tutorials/starting-with-starling-ep-5-parallax-背景/](http://www.hsharma.com/tutorials/starting-with-starling-ep-5-parallax-background/)

# clojure - 记住 Clojure.core 有多大帮助

> ID：11947685
> 
> 赞同：2
> 
> 时间：2012-08-14T07:30:16.293
> 
> 标签：clojure

我已经使用 Clojure 大约 2 年了（之前使用过 scheme/lisp）。

我已经到了这样的地步，我觉得我没有“通过渗透”学习更多的 clojure，并且正在考虑有意识地记住 Clojure.core 中的函数名称

## 问题：

有没有其他人这样做过？如果是这样，它是否显着提高了生产力？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:05:24.833

恐怕仅仅记住一个功能还不足以在需要时发现使用它的需要。最好在上下文中学习 - 例如通过解决 4clojure 问题，然后查看高分用户的解决方案。一旦你在上下文中有一个函数，你就可以记住它。

# android - 如何在 Android 上使用两个 tabHost

> ID：11947689
> 
> 赞同：2
> 
> 时间：2012-08-14T07:30:45.583
> 
> 标签：android, android-tabhost

下面是我的布局 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/l1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:gravity="right"
        android:orientation="vertical" >

        <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="@drawable/ic_launcher">

    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true" android:background="#FF888888"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_above="@android:id/tabs" />
    </RelativeLayout>

</TabHost>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/l2"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:background="#000000"
        android:orientation="vertical" >

        <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:background="@drawable/ic_launcher">

    <RelativeLayout
        android:id="@+id/RelativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true" android:background="#FF888888"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_above="@android:id/tabs" />
    </RelativeLayout>

</TabHost>
    </LinearLayout>

</LinearLayout> 
```

布局 l1 和 l2 中有 2 个 tabhost。
下面的代码是我使用tabhost的代码：

```
TabWidget tw;
TabHost tabHost;
tabHost = getTabHost();
TabHost.TabSpec spec;
Intent intent; 
Resources res = getResources();
    tw = (TabWidget)findViewById(android.R.id.tabs);

intent = new Intent().setClass(this, MyGroup.class);
spec = tabHost.newTabSpec("A").setIndicator("A", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
tabHost.addTab(spec);

intent = new Intent().setClass(this, MyGroup.class);
spec = tabHost.newTabSpec("B").setIndicator("B", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
tabHost.addTab(spec);

intent = new Intent().setClass(this, MyGroup.class);
spec = tabHost.newTabSpec("C").setIndicator("C", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
tabHost.addTab(spec); 
```

但它只能控制l1中的tabhost。
如何控制 l2 中的 tabhost？

我做了一些修改如下：

```
 private TabWidget tw;
    private TabHost tabHost;
    private TabWidget tw1;
    private TabHost tabHost1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tabHost = getTabHost();
        TabHost.TabSpec spec;
        Intent intent; 
        Resources res = getResources();
        tw = (TabWidget)findViewById(android.R.id.tabs);

        intent = new Intent().setClass(this, MyGroup.class);
        spec = tabHost.newTabSpec("A").setIndicator("A", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, MyGroup.class);
        spec = tabHost.newTabSpec("B").setIndicator("B", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, MyGroup.class);
        spec = tabHost.newTabSpec("C").setIndicator("C", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
        tabHost.addTab(spec);
        intent = new Intent().setClass(this, MyGroup.class);
        spec = tabHost.newTabSpec("A").setIndicator("A", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
        tabHost.addTab(spec);

        tabHost1 = (TabHost)findViewById(R.id.tabhost1);
        TabHost.TabSpec spec1;
        Intent intent1; 
        tw1 = (TabWidget)findViewById(android.R.id.tabs);

        intent1 = new Intent().setClass(this, MyGroup.class);
        spec1 = tabHost1.newTabSpec("D").setIndicator("D", res.getDrawable(R.drawable.ic_action_search)).setContent(intent1);
        tabHost1.addTab(spec1);

        intent1 = new Intent().setClass(this, MyGroup.class);
        spec1 = tabHost1.newTabSpec("E").setIndicator("E", res.getDrawable(R.drawable.ic_action_search)).setContent(intent1);
        tabHost1.addTab(spec1);

        intent1 = new Intent().setClass(this, MyGroup.class);
        spec1 = tabHost1.newTabSpec("F").setIndicator("F", res.getDrawable(R.drawable.ic_action_search)).setContent(intent1);
        tabHost1.addTab(spec1);
        intent1 = new Intent().setClass(this, MyGroup.class);
        spec1 = tabHost1.newTabSpec("G").setIndicator("G", res.getDrawable(R.drawable.ic_action_search)).setContent(intent1);
        tabHost1.addTab(spec1);
} 
```

错误信息如下：

```
08-14 16:26:26.960: D/AndroidRuntime(9763): Shutting down VM
08-14 16:26:26.960: W/dalvikvm(9763): threadid=1: thread exiting with uncaught exception (group=0x40a291f8)
08-14 16:26:26.960: E/AndroidRuntime(9763): FATAL EXCEPTION: main
08-14 16:26:26.960: E/AndroidRuntime(9763): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testtwolayout/com.example.testtwolayout.MainActivity}: java.lang.NullPointerException
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.os.Looper.loop(Looper.java:137)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at java.lang.reflect.Method.invokeNative(Native Method)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at java.lang.reflect.Method.invoke(Method.java:511)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at dalvik.system.NativeStart.main(Native Method)
08-14 16:26:26.960: E/AndroidRuntime(9763): Caused by: java.lang.NullPointerException
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.widget.TabHost.addTab(TabHost.java:232)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at com.example.testtwolayout.MainActivity.onCreate(MainActivity.java:68)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.Activity.performCreate(Activity.java:4465)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-14 16:26:26.960: E/AndroidRuntime(9763):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-14 16:26:26.960: E/AndroidRuntime(9763):     ... 11 more 
```

MainActivity.java:68 行表示 tabHost1.addTab(spec1);

我已经通过这个[Android 解决了： TabHost without TabActivity](https://stackoverflow.com/questions/3163884/android-tabhost-without-tabactivity)。
和简单的测试代码如下：

```
 private LocalActivityManager mlam;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mlam = new LocalActivityManager(this, false);
        mlam.dispatchCreate(savedInstanceState);

        tw = (TabWidget)findViewById(android.R.id.tabs);
        Resources res = getResources();

        tabHost =(TabHost)findViewById(android.R.id.tabhost);
        tabHost.setup(mlam);
        TabHost.TabSpec spec;
        Intent intent; 

        intent = new Intent().setClass(this, MyGroup.class);
        spec = tabHost.newTabSpec("A").setIndicator("A", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, MyGroup.class);
        spec = tabHost.newTabSpec("B").setIndicator("B", res.getDrawable(R.drawable.ic_action_search)).setContent(intent);
        tabHost.addTab(spec);

        tabHost1 = (TabHost)findViewById(R.id.tabhost1);
        tabHost1.setup(mlam);
        TabHost.TabSpec spec1;
        Intent intent1;

        intent1 = new Intent().setClass(this, MyGroup.class);
        spec1 = tabHost1.newTabSpec("C").setIndicator("C", res.getDrawable(R.drawable.ic_action_search)).setContent(intent1);
        tabHost1.addTab(spec1);

        intent1 = new Intent().setClass(this, MyGroup.class);
        spec1 = tabHost1.newTabSpec("D").setIndicator("D", res.getDrawable(R.drawable.ic_action_search)).setContent(intent1);
        tabHost1.addTab(spec1);
        tabHost1.setCurrentTab(0);
} 
```

MyGroup 如下：

```
public class MyGroup extends ActivityGroup {
    public static ActivityGroup group;  

    @Override  
    protected void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);  
        group = this;  
    }  

    @Override  
    public void onBackPressed() {  
        group.getLocalActivityManager().getCurrentActivity().onBackPressed();  
    }  

    @Override  
    protected void onResume() {  
        super.onResume();  
        Intent it;
        Window w;
        View view;

        it = new Intent(this, AActivity.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  
        w = group.getLocalActivityManager().startActivity("AActivity", it);  
        view = w.getDecorView();  
        group.setContentView(view);
    }
} 
```

下面的 AActivity 只显示一个随机数：

```
public class AActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.a);

        TextView tv = (TextView)findViewById(R.id.atv);
        int x = (int)(Math.random()*42+1);
        String xx = Integer.toString(x);
        Log.d("q", xx);
        tv.setText(xx);

    }
} 
```

但我发现左侧布局的选项卡 0 不会显示数字。
但是行 Log.d("q", xx); 是秀。
这个怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:35:52.947

You cant get hold of two different tabhosts by using the same **id**. Therefore, you must need to change the **android:id** of your second tabhost.

For example: `android:id="@+id/mySecondTabhost"`

And later you need to use proper `R` class which refers to your package (not *android.R*) in order to retrieve your custom defined **id** value.

# php - 有没有办法在 PHP 中使用 FPDF 创建的 pdf 文件中隐藏页眉和页脚？

> ID：11947692
> 
> 赞同：3
> 
> 时间：2012-08-14T07:31:01.210
> 
> 标签：php, pdf, fpdf

我在 PHP 中用 FPDF 创建了一个 pdf 文件。当我在其中插入页眉和页脚时，它们会自动显示在 pdf 文件的所有页面上。但我想阻止这些页眉和页脚显示在第一页上，并从 pdf 文件的第二页开始显示它们。我已经搜索了网络，但无法找到解决方案。

换句话说，我想为我用 FPDF 创建的 pdf 报告动态创建一个封面。

谁能给我一些关于如何从 pdf 文件的第一页执行隐藏页眉和页脚任务的提示！

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T07:47:53.210

这是一项简单的任务。尝试以下操作：

```
class PDF extends FPDF {
    ...

    function Header() {
        if ( $this->PageNo() !== 1 ) {
            // Add your stuff here
        }
    }

    function Footer() {
        if ( $this->PageNo() !== 1 ) {
            // Add your stuff here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-09T11:47:38.977

问题是页脚是在第 288 行的 Close() 方法中创建的，该方法是从第 987 行的 Output() 调用的，这意味着您实际上是在关闭页脚然后再打开只是为了显示它。如果我需要灵活性，我会做的事情是：

```
class PDF extends FPDF {
    function Header() {
        if (!isset($this->header[$this->page]) || !$this->header[$this->page]) {
            // ...
        }
    }

    function Footer() {
        if (!isset($this->footer[$this->page]) || !$this->footer[$this->page]) {
            // ...
        }
    }
} 
```

然后像这样使用它：

```
$pdf->header[1] = false;
$pdf->footer[1] = false;
$pdf->AddPage();

$pdf->header[2] = true;
$pdf->footer[2] = true;
$pdf->AddPage(); 
```

它可能不是最优雅的解决方案，但它可以工作并且有效地允许您动态更改页脚的可见性（ps：不指定状态也会让您使用页眉有效减少所需的代码量）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-12T11:29:11.753

我想为那些不想跳过第一页但不想跳过最后（或任何）页面的人添加一个答案。如果您有动态更改的文本并且无法预见页码，则特别方便。这可以通过在将页面添加到 PDF 时设置布尔值来完成。

将您的页眉/页脚定义为

```
class PDF extends FPDF {
    function Header() {
        if (!$this->skipHeader) {
            // ...
        }
    }

    function Footer() {
        if (!$this->skipFooter) {
            // ...
        }
    }
} 
```

然后，在初始化 pdf 时，请确保将这些布尔值设置为 false，这样您通常会得到页眉/页脚。

```
$pdf = new PDF();
$pdf->skipHeader = false;
$pdf->skipFooter = false; 
```

一旦您真正想要跳过页眉或页脚，请将相应的 bool 设置为 true

```
$pdf->AddPage();
$pdf->skipHeader = true;
$pdf->AddPageContents(); 
```

如果您想要下一页的页眉/页脚，请记住将它们设置回 false！

# android - getLastKnownLocation 仅在位置变化约 50 m 时更新。为什么？

> ID：11947693
> 
> 赞同：1
> 
> 时间：2012-08-14T07:31:05.760
> 
> 标签：android, gps, locationmanager

在使用 的`getLastKnownLocation()`方法时`LocationManager`，我注意到它获得的位置只有在我移动大约 50 m 时才会发生变化。

尽管`GPS`在我测试它的区域能见度很高，定位误差应该在 5 m 左右。我想知道是否内置了任何“距离变化”约束`getLastKnownLocation()`，这样它只会在位置变化一定量时更新其保存的位置[就像你可以在 上放置距离约束一样`requestLocationUpdates()`]。

如果是这样，有谁知道那个距离限制到底是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:00:40.210

该`getLastKnownLocation()`方法将仅返回最后一次 GPS 定位的位置 - 无论它是由您的应用程序还是第三方应用程序获得的。它不会返回您当前的位置，并且如果您移动大约 50 米，它也不会改变 - 至少在没有其他应用程序使用 GPS 时不会改变。

它应该用于给出用户的大致位置或作为“占位符”，直到获得新数据。

有关详细信息，请参阅此博客文章： [http ://android-developers.blogspot.com/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)

Android 开发团队成员 Reto Meier去年[也在 Google I/O 上发表了演讲](http://www.youtube.com/watch?v=twmuBbC_oB8)，他谈到了位置服务的使用，包括`getLastKnownLocation()`.

# android - 模拟器只是停留在以下几点？

> ID：11947705
> 
> 赞同：1
> 
> 时间：2012-08-14T07:31:49.943
> 
> 标签：android, android-emulator

我的模拟器卡在这一点上，没有任何反应？我应该怎么做才能让它工作。请帮忙

```
 root@saun-Vostro-3500:/home/saun/Downloads/android-sdk-linux/platform-tools# emulator-arm -avd sampy -partition-size 128 -no-snapshot-load -verbose -cpu-delay 0 -no-boot-anim -debug all -show-kernel
    emulator: found SDK root at /home/saun/Downloads/android-sdk-linux
    emulator: Android virtual device file at: /root/.android/avd/sampy.ini
    emulator: /root/.android/avd/sampy.ini: parsing as .ini file
    emulator:    1: KEY='target' VALUE='android-8'
    emulator:    2: KEY='path' VALUE='/root/.android/avd/sampy.avd'
    emulator: /root/.android/avd/sampy.ini: parsing finished
    emulator: virtual device content at /root/.android/avd/sampy.avd
    emulator: virtual device config file: /root/.android/avd/sampy.avd/config.ini
    emulator: /root/.android/avd/sampy.avd/config.ini: parsing as .ini file
    emulator:    1: KEY='hw.lcd.density' VALUE='240'
    emulator:    2: KEY='sdcard.size' VALUE='128M'
    emulator:    3: KEY='skin.name' VALUE='WVGA800'
    emulator:    4: KEY='skin.path' VALUE='platforms/android-8/skins/WVGA800'
    emulator:    5: KEY='hw.cpu.arch' VALUE='arm'
    emulator:    6: KEY='abi.type' VALUE='armeabi'
    emulator:    7: KEY='vm.heapSize' VALUE='24'
    emulator:    8: KEY='image.sysdir.1' VALUE='platforms/android-8/images/'
    emulator: /root/.android/avd/sampy.avd/config.ini: parsing finished
    emulator: using core hw config path: /root/.android/avd/sampy.avd/hardware-qemu.ini
    emulator: Found target field in root AVD .ini file: 'android-8'
    emulator: Found AVD target API level: 8
    emulator:     found image search path: platforms/android-8/images/
    emulator: found a total of 1 search paths for this AVD
    emulator: found skin 'WVGA800' in directory: /home/saun/Downloads/android-sdk-linux/platforms/android-8/skins
    emulator: autoconfig: -skin WVGA800
    emulator: autoconfig: -skindir /home/saun/Downloads/android-sdk-linux/platforms/android-8/skins
    emulator: found skin-specific hardware.ini: /home/saun/Downloads/android-sdk-linux/platforms/android-8/skins/WVGA800/hardware.ini
    emulator: /home/saun/Downloads/android-sdk-linux/platforms/android-8/skins/WVGA800/hardware.ini: parsing as .ini file
    emulator:    2: KEY='hw.lcd.density' VALUE='240'
    emulator:    3: KEY='vm.heapSize' VALUE='24'
    emulator: /home/saun/Downloads/android-sdk-linux/platforms/android-8/skins/WVGA800/hardware.ini: parsing finished
    emulator: adding binding BUTTON_CALL to F3
    emulator: adding binding BUTTON_HANGUP to F4
    emulator: adding binding BUTTON_HOME to HOME
    emulator: adding binding BUTTON_BACK to ESCAPE
    emulator: adding binding BUTTON_MENU to F2
    emulator: adding binding BUTTON_MENU to PAGEUP
    emulator: adding binding BUTTON_STAR to Shift-F2
    emulator: adding binding BUTTON_STAR to PAGEDOWN
    emulator: adding binding BUTTON_POWER to F7
    emulator: adding binding BUTTON_SEARCH to F5
    emulator: adding binding BUTTON_CAMERA to Ctrl-KEYPAD_5
    emulator: adding binding BUTTON_CAMERA to Ctrl-F3
    emulator: adding binding BUTTON_VOLUME_UP to KEYPAD_PLUS
    emulator: adding binding BUTTON_VOLUME_UP to Ctrl-F5
    emulator: adding binding BUTTON_VOLUME_DOWN to KEYPAD_MINUS
    emulator: adding binding BUTTON_VOLUME_DOWN to Ctrl-F6
    emulator: adding binding TOGGLE_NETWORK to F8
    emulator: adding binding TOGGLE_TRACING to F9
    emulator: adding binding TOGGLE_FULLSCREEN to Alt-ENTER
    emulator: adding binding BUTTON_DPAD_CENTER to KEYPAD_5
    emulator: adding binding BUTTON_DPAD_UP to KEYPAD_8
    emulator: adding binding BUTTON_DPAD_LEFT to KEYPAD_4
    emulator: adding binding BUTTON_DPAD_RIGHT to KEYPAD_6
    emulator: adding binding BUTTON_DPAD_DOWN to KEYPAD_2
    emulator: adding binding TOGGLE_TRACKBALL to F6
    emulator: adding binding SHOW_TRACKBALL to DELETE
    emulator: adding binding CHANGE_LAYOUT_PREV to KEYPAD_7
    emulator: adding binding CHANGE_LAYOUT_PREV to Ctrl-F11
    emulator: adding binding CHANGE_LAYOUT_NEXT to KEYPAD_9
    emulator: adding binding CHANGE_LAYOUT_NEXT to Ctrl-F12
    emulator: adding binding ONION_ALPHA_UP to KEYPAD_MULTIPLY
    emulator: adding binding ONION_ALPHA_DOWN to KEYPAD_DIVIDE
    emulator: keyset loaded from: /root/.android/default.keyset
    emulator: /root/.android/avd/sampy.avd/emulator-user.ini: parsing as .ini file
    emulator:    1: KEY='window.x' VALUE='67'
    emulator:    2: KEY='window.y' VALUE='52'
    emulator:    3: KEY='uuid' VALUE='1344924399997'
    emulator: /root/.android/avd/sampy.avd/emulator-user.ini: parsing finished
    emulator: trying to load skin file '/home/saun/Downloads/android-sdk-linux/platforms/android-8/skins/WVGA800/layout'
    emulator: skin network speed: 'full'
    emulator: skin network delay: 'none'
    emulator: found kernel-qemu in search dir: /home/saun/Downloads/android-sdk-linux/platforms/android-8/images/
    emulator: autoconfig: -kernel /home/saun/Downloads/android-sdk-linux/platforms/android-8/images//kernel-qemu
    emulator: found ramdisk.img in search dir: /home/saun/Downloads/android-sdk-linux/platforms/android-8/images/
    emulator: autoconfig: -ramdisk /home/saun/Downloads/android-sdk-linux/platforms/android-8/images//ramdisk.img
    emulator: found system.img in search dir: /home/saun/Downloads/android-sdk-linux/platforms/android-8/images/
    emulator: Using initial system image: /home/saun/Downloads/android-sdk-linux/platforms/android-8/images//system.img
    emulator: autoconfig: -data /root/.android/avd/sampy.avd/userdata-qemu.img
    emulator: autoconfig: -initdata /root/.android/avd/sampy.avd/userdata.img
    emulator: autoconfig: -cache /root/.android/avd/sampy.avd/cache.img
    emulator: autoconfig: -sdcard /root/.android/avd/sampy.avd/sdcard.img
    emulator: Physical RAM size: 128MB

    emulator:     no qwerty2.kcm in search dir: /home/saun/Downloads/android-sdk-linux/platforms/android-8/images/
    emulator: <memoryFile>: parsing as .ini file
    emulator: <memoryFile>: parsing finished
    Content of hardware configuration file:
      hw.cpu.arch = arm
      hw.ramSize = 128
      hw.screen = touch
      hw.mainKeys = yes
      hw.trackBall = yes
      hw.keyboard = no
      hw.keyboard.lid = yes
      hw.keyboard.charmap = qwerty2
      hw.dPad = yes
      hw.gsmModem = yes
      hw.gps = yes
      hw.battery = yes
      hw.accelerometer = yes
      hw.audioInput = yes
      hw.audioOutput = yes
      hw.sdCard = yes
      hw.sdCard.path = /root/.android/avd/sampy.avd/sdcard.img
      disk.cachePartition = yes
      disk.cachePartition.path = /root/.android/avd/sampy.avd/cache.img
      disk.cachePartition.size = 66m
      hw.lcd.width = 480
      hw.lcd.height = 800
      hw.lcd.depth = 16
      hw.lcd.density = 240
      hw.lcd.backlight = yes
      hw.gpu.enabled = no
      hw.camera.back = emulated
      hw.camera.front = none
      vm.heapSize = 24
      hw.sensors.proximity = yes
      hw.sensors.magnetic_field = yes
      hw.sensors.orientation = yes
      hw.sensors.temperature = yes
      kernel.path = /home/saun/Downloads/android-sdk-linux/platforms/android-8/images//kernel-qemu
      kernel.parameters =  android.checkjni=1 android.bootanim=0
      disk.ramdisk.path = /home/saun/Downloads/android-sdk-linux/platforms/android-8/images//ramdisk.img
      disk.systemPartition.initPath = /home/saun/Downloads/android-sdk-linux/platforms/android-8/images//system.img
      disk.systemPartition.size = 128m
      disk.dataPartition.path = /root/.android/avd/sampy.avd/userdata-qemu.img
      disk.dataPartition.size = 128m
      avd.name = sampy
    .
    QEMU options list:
    emulator: argv[00] = "emulator-arm"
    emulator: argv[01] = "-cpu-delay"
    emulator: argv[02] = "0"
    emulator: argv[03] = "-show-kernel"
    emulator: argv[04] = "-android-hw"
    emulator: argv[05] = "/root/.android/avd/sampy.avd/hardware-qemu.ini"
    Concatenated QEMU options:
     emulator-arm -cpu-delay 0 -show-kernel -android-hw /root/.android/avd/sampy.avd/hardware-qemu.ini
    emulator: android_qemud_init
    emulator: Registered QEMUD service boot-properties
    emulator: registered 'boot-properties' qemud service
    emulator: android_qemud_init
    emulator: Registered QEMUD service hw-control
    emulator: android_hw_control_init: hw-control qemud handler initialized
    emulator: /root/.android/avd/sampy.avd/hardware-qemu.ini: parsing as .ini file
    emulator:    1: KEY='hw.cpu.arch' VALUE='arm'
    emulator:    2: KEY='hw.ramSize' VALUE='128'
    emulator:    3: KEY='hw.screen' VALUE='touch'
    emulator:    4: KEY='hw.mainKeys' VALUE='yes'
    emulator:    5: KEY='hw.trackBall' VALUE='yes'
    emulator:    6: KEY='hw.keyboard' VALUE='no'
    emulator:    7: KEY='hw.keyboard.lid' VALUE='yes'
    emulator:    8: KEY='hw.keyboard.charmap' VALUE='qwerty2'
    emulator:    9: KEY='hw.dPad' VALUE='yes'
    emulator:   10: KEY='hw.gsmModem' VALUE='yes'
    emulator:   11: KEY='hw.gps' VALUE='yes'
    emulator:   12: KEY='hw.battery' VALUE='yes'
    emulator:   13: KEY='hw.accelerometer' VALUE='yes'
    emulator:   14: KEY='hw.audioInput' VALUE='yes'
    emulator:   15: KEY='hw.audioOutput' VALUE='yes'
    emulator:   16: KEY='hw.sdCard' VALUE='yes'
    emulator:   17: KEY='hw.sdCard.path' VALUE='/root/.android/avd/sampy.avd/sdcard.img'
    emulator:   18: KEY='disk.cachePartition' VALUE='yes'
    emulator:   19: KEY='disk.cachePartition.path' VALUE='/root/.android/avd/sampy.avd/cache.img'
    emulator:   20: KEY='disk.cachePartition.size' VALUE='66m'
    emulator:   21: KEY='hw.lcd.width' VALUE='480'
    emulator:   22: KEY='hw.lcd.height' VALUE='800'
    emulator:   23: KEY='hw.lcd.depth' VALUE='16'
    emulator:   24: KEY='hw.lcd.density' VALUE='240'
    emulator:   25: KEY='hw.lcd.backlight' VALUE='yes'
    emulator:   26: KEY='hw.gpu.enabled' VALUE='no'
    emulator:   27: KEY='hw.camera.back' VALUE='emulated'
    emulator:   28: KEY='hw.camera.front' VALUE='none'
    emulator:   29: KEY='vm.heapSize' VALUE='24'
    emulator:   30: KEY='hw.sensors.proximity' VALUE='yes'
    emulator:   31: KEY='hw.sensors.magnetic_field' VALUE='yes'
    emulator:   32: KEY='hw.sensors.orientation' VALUE='yes'
    emulator:   33: KEY='hw.sensors.temperature' VALUE='yes'
    emulator:   34: KEY='kernel.path' VALUE='/home/saun/Downloads/android-sdk-linux/platforms/android-8/images//kernel-qemu'
    emulator:   35: KEY='kernel.parameters' VALUE='android.checkjni=1 android.bootanim=0'
    emulator:   36: KEY='disk.ramdisk.path' VALUE='/home/saun/Downloads/android-sdk-linux/platforms/android-8/images//ramdisk.img'
    emulator:   37: KEY='disk.systemPartition.initPath' VALUE='/home/saun/Downloads/android-sdk-linux/platforms/android-8/images//system.img'
    emulator:   38: KEY='disk.systemPartition.size' VALUE='128m'
    emulator:   39: KEY='disk.dataPartition.path' VALUE='/root/.android/avd/sampy.avd/userdata-qemu.img'
    emulator:   40: KEY='disk.dataPartition.size' VALUE='128m'
    emulator:   41: KEY='avd.name' VALUE='sampy'
    emulator: /root/.android/avd/sampy.avd/hardware-qemu.ini: parsing finished
    emulator: nand_add_dev: system,size=0x8000000,initfile=/home/saun/Downloads/android-sdk-linux/platforms/android-8/images//system.img
    emulator: mapping 'system' NAND image to /tmp/android-root/emulator-h7z8kl
    emulator: rounding devsize up to a full eraseunit, now 8001000

    emulator: nand_add_dev: userdata,size=0x8000000,file=/root/.android/avd/sampy.avd/userdata-qemu.img
    emulator: rounding devsize up to a full eraseunit, now 8001000

    emulator: android_qemud_init
    emulator: Registered QEMUD service boot-properties
    emulator: registered 'boot-properties' qemud service
    emulator: Adding boot property: 'dalvik.vm.heapsize' = '24m'
    emulator: Adding boot property: 'qemu.sf.lcd_density' = '240'
    emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
    emulator: android_qemud_init
    emulator: Registered QEMUD service gsm
    emulator: android_qemud_init
    emulator: Registered QEMUD service gps
    emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
    emulator: android_qemud_init
    emulator: Registered QEMUD service camera
    emulator: android_camera_service_init: Registered 'camera' qemud service
    emulator: IP address of your DNS(s): 127.0.0.1
    emulator: nand_add_dev: cache,size=0x4200000,file=/root/.android/avd/sampy.avd/cache.img
    emulator: Initializing hardware OpenGLES emulation support
    emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 android.bootanim=0 ndns=1
    emulator: qpa_audio_init: entering
    emulator: qpa_audio_init: exiting
    emulator: Trace file name is not set

    emulator: autoconfig: -scale 0.85363
    emulator: android_qemud_init
    emulator: Registered QEMUD service sensors
    emulator: android_hw_sensors_init: sensors qemud service initialized
    emulator: emulator window was out of view and was recentered

    serial0 console
    emulator: Could not open file: (null)/system/build.prop: No such file or directory
    emulator: control console listening on port 5554, ADB on port 5555
    Using config file: /root/.android/modem-nv-ram-5554
    Setting value of oper_name_index to 2 (2)Setting value of selection_mode to 0 (0)Setting value of oper_index to 0 (0)Setting value of oper_count to 2 (2)Setting value of in_ecbm to 0 (0)Setting value of prl_version to 0 (0)Setting value of preferred_mode to 15 (15)Setting value of cdma_subscription_source to 1 (1)Setting value of cdma_roaming_pref to 2 (2)emulator: sent '0012host:emulator:5555' to ADB server
    emulator: ping program: /home/saun/Downloads/android-sdk-linux/tools/ddms
    emulator: ping command: /home/saun/Downloads/android-sdk-linux/tools/ddms ping emulator 20.0.1.0 "Tungsten Graphics, Inc" "Mesa DRI Intel(R) Ironlake Mobile x86/MMX/SSE2" "1.4 (2.1 Mesa 8.0.2)"
    emulator: Error while connecting to socket '127.0.0.1:1970': 111 -> Connection refused
    emulator: ASC 127.0.0.1:1970: Retrying connection. Connector FD = 23
    Uncompressing Linux............................................................................................. done, booting the kernel. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:25:22.007

我以 Root 身份运行 Emulator，而 AVD 在用户配置文件中。所以这显然是一个权限问题。现在解决了。谢谢

# c# - 如何使 ModalPopup 拖放

> ID：11947706
> 
> 赞同：2
> 
> 时间：2012-08-14T07:31:49.723
> 
> 标签：c#, asp.net, ajax, modal-dialog, modalpopupextender

我在我的 Web 应用程序中使用 Ajax ControlToolkit 中的 ModalPopupExtender。我将它的 Drag 属性设置为 true，但是当我将弹出面板拖放到新位置时，它立即回到原来的位置。我想得到效果像示例一样，可以拖放到不同的位置。如何在页面上的示例中..

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

这是我的代码：

```
<form id="form1" runat="server">

    <asp:scriptmanager id="ScriptManager1" runat="server">
       </asp:scriptmanager> 

       <asp:button id="btnAddNew" runat="server" text="New Expanse" />

       <asp:modalpopupextender id="ModalPopupExtender1" 
                runat="server" cancelcontrolid="btnCancel" 
                okcontrolid="btnOkay" targetcontrolid="btnAddNew" 
                popupcontrolid="Panel1" popupdraghandlecontrolid="PopupHeader" 
                drag="true" backgroundcssclass="ModalPopupBG">
      </asp:modalpopupextender>

<div class="popupConfirmation" id="Panel1" style="display: none">

        <iframe id="frameeditexpanse" src="Benutzer.aspx" frameborder="1" height="500px" width="520px">
        </iframe>

        <div class="popup_Buttons" style="display: none">
            <input id="btnOkay" type="button" value="Speichern" />
            <input id="btnCancel" type="button" value="Abbrechen" />
        </div>

</div> 
```

PS：如果对话框打开，我想在后台的文本框中输入。

更新：

...

```
<asp:modalpopupextender id="ModalPopupExtender1" 
                runat="server" cancelcontrolid="btnCancel" 
                okcontrolid="btnOkay" targetcontrolid="btnAddNew" 
                popupcontrolid="Panel1" popupdraghandlecontrolid="PopupHeader" 
                drag="true" backgroundcssclass="ModalPopupBG">
      </asp:modalpopupextender>

   <div id="PopupHeader" style="display: none; background-color:Blue">
        Benutzerinformationen
   </div>

   <div class="popupConfirmation" id="Panel1" style="display: none">

    <iframe id="frameeditexpanse" src="ZweiteSeite.aspx" frameborder="1">
    </iframe>

    <div class="popup_Buttons" style="display: none">
        <input id="btnOkay" type="button" value="Speichern" />
        <input id="btnCancel" type="button" value="Abbrechen" />
    </div> 
```

...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T08:11:15.307

尝试这个

```
<style type="text/css">
  .modalPopup
  {
    background-color: #ffffdd;
    border-width: 3px;
    border-style: solid;
    border-color: Gray;
    padding: 3px;
    width: 100%;
  }
</style>

<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:Button ID="btnAddNew" runat="server" Text="New Expanse" />
    <cc1:ModalPopupExtender ID="ModalPopupExtender1" runat="server" CancelControlID="btnCancel"
        OkControlID="btnOkay" TargetControlID="btnAddNew" PopupControlID="Panel1" PopupDragHandleControlID="PopupHeader"
        Drag="true" BackgroundCssClass="ModalPopupBG">
    </cc1:ModalPopupExtender>
    <div class="popupConfirmation" id="Panel1" style="display: none">
        <asp:Panel runat="server" ID="PopupHeader" CssClass="modalPopup">
            **************** Drag me ****************
        </asp:Panel>
        <iframe id="frameeditexpanse" src="http://www.bing.com" frameborder="1" height="500px"
            width="520px"></iframe>
        <div class="popup_Buttons" style="display: none">
            <input id="btnOkay" type="button" value="Speichern" />
            <input id="btnCancel" type="button" value="Abbrechen" />
        </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-21T20:46:30.713

@yogi 发布的答案非常有效。如果有问题，请尝试在不同的浏览器中浏览同一页面，因为它在 Edge 和 Chrome 中运行顺畅，但 Internet Explorer 在移动弹出窗口和拖放时存在问题。

# scala - 复选框的动态列表

> ID：11947710
> 
> 赞同：2
> 
> 时间：2012-08-14T07:32:21.733
> 
> 标签：scala, playframework, playframework-2.0

我有一个 AccessPrivileges 列表，我需要创建一个带有动态复选框列表的表单，但是我在文档中找不到解决方案。

假设你有以下

```
class AccessPrivilege(dataType:String, description:String)

object AccessPrivilege {

 val privileges:Seq[AccessPrivilege] = ....

} 
```

我需要生成一个绑定，以便在我的表单中我可以：

*   有一个标签是描述的复选框
*   能够以字符串列表而不是布尔列表的形式检索选定复选框的列表。

我在表单助手中找不到我需要的东西，因为选中的返回一个布尔值，而我需要“收集”选定的复选框......

# c# - 在没有调用的情况下使用 MethodInvoker

> ID：11947718
> 
> 赞同：4
> 
> 时间：2012-08-14T07:33:06.680
> 
> 标签：c#, user-interface, multithreading, lambda

我正在编写 GUI 应用程序有一段时间了，我一直使用的一件事是 MethodInvoker + lambda 函数来进行跨线程访问。

从我发现的例子中，我总是看到这样的东西：

**版本 1**

```
if (InvokeRequired)
{
    Invoke(new MethodInvoker(() => 
    {
        Label1.Text = "Foobar";
    });
}
else
{
    Label1.Text = "Foobar";
} 
```

然而，这会导致代码重复——>对我来说是主要的坏人。

那么这有什么问题呢？

**版本 2**

```
MethodInvoker updateText = new MethodInvoker(() => 
    {
        Label1.Text = "Foobar";
    });

if (InvokeRequired)
{
    Invoke(updateText);
}
else
{
    updateText();
} 
```

现在，我将功能捆绑在一个变量中，并在适当时使用 Invoke 或作为函数指针调用它。版本 2 性能更差吗？或者我为此使用匿名函数是不好的做法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T07:38:09.417

没什么问题...但是您可以添加一个扩展方法以使其变得更好：

```
public static void InvokeIfNecessary(this Control control,
                                     MethodInvoker action)
{
    if (control.InvokeRequired)
    {
        control.Invoke(action);
    }
    else
    {
        action();
    }
} 
```

然后你可以写：

```
this.InvokeIfNecessary(() => Label1.Text = "Foobar"); 
```

更整洁:)

当您不需要时创建委托会有一个*非常轻微的性能缺陷，但它几乎可以肯定是微不足道的 - 专注于编写干净的代码。*

请注意，即使您不想这样做，您仍然可以在现有代码中简化变量声明：

```
MethodInvoker updateText = () => Label1.Text = "Foobar"; 
```

这是使用单独变量的一个好处——你不需要`new MethodInvoker`告诉 lambda 表达式你想要什么类型的委托......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:54:04.300

另一种做法：

```
Invoke((MethodInvoker)delegate 
{
     Label1.Text = "Foobar";
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T07:35:26.547

> 版本 2 性能更差吗？或者我为此使用匿名函数是不好的做法？

没有版本 2 更好，不用担心它的性能问题。除了使用匿名函数，您还可以定义一个方法：

```
public void SetLabelTextToFooBar()
{
    Label1.Text = "Foobar";
} 
```

接着：

```
if (InvokeRequired)
{
    Invoke(SetLabelTextToFooBar);
}
else
{
    SetLabelTextToFooBar();
} 
```

或者简单地使用一个[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)，它会在主 UI 线程上自动执行所有回调（例如`RunWorkerCompleted`和`ProgressChanged`），这样您就不需要检查`InvokeRequired`.

# drupal - 从 Drupal + Ubercart 迁移到像 OpenCart 或 Magento 这样的平台是否有意义？

> ID：11947720
> 
> 赞同：0
> 
> 时间：2012-08-14T07:33:11.570
> 
> 标签：drupal, magento, opencart

如果一个电子商务网站在 Drupal + Ubercart 上运行，将其迁移到 Opencart 或 Magento 等适合电子商务的平台是否有意义？对 Ubercart 进行与电子商务相关的更改非常麻烦.. 诸如自定义结帐或后端管理之类的事情非常困难.. 任何有 Drupal + Ubercart 经验的人都可以提供 OpenCart 或 Magento 等平台的帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:41:09.173

如果`Ubercart`对你来说很难，那么`Magento`将更加困难。

Magento 在电子商务市场蓬勃发展，但它需要大量资源和非常好的技能来制作/定制东西。如果您准备好迎接巨大的挑战，您应该将您的网站迁移到 Magento。考虑到 Magento 的未来，它非常安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T12:04:26.407

所有电子商务都需要某种后端。

最新的 Drupal Commerce Kickstart 2.0 的目标是非常易于使用 - 更多的是 drupal 本身。它有一些非常好的功能。

[http://drupal.org/project/commerce_kickstart](http://drupal.org/project/commerce_kickstart)

我建议您在认真使用之前等待一两个星期 - 他们正在为下周的大型活动及时改进它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-27T06:40:00.280

我肯定会离开 Drupal 电子商务，它不是完全为电子商务而构建的，而且永远不会。Magento 和 Opencart 都是更好的选择，因为它们周围的两个社区都完全专注于电子商务。如果您能找到一个优秀的 magento 开发人员为您定制它，Magento 会更好，但 Opencart 更易于使用。

如果您对您的电子商务网站很认真，那么 Magento 是最好的解决方案，但前期成本会高于 Opencart。但是，如果您需要大量高级定制，那么在 Magento 中构建实际上会更容易、更便宜，因为在 Opencart 中高级定制可能会变得更加困难，因为它不是为企业级定制而构建的，而 Magento 是。Magento 可能会变得更容易做一些事情，比如以不同的价格向不同的客户（批发）销售，所以它真的取决于你将来需要的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:54:56.013

我会说从 drupal 迁移到 Opencart 是有意义的。Drupal 是一个 CMS，为电子商务提供一些插件（每个插件都有一些需要修复的缺点或错误） Opencart 是一个为电子商务目的开发的平台。

如果与 Magento 相比，Opencart 也是开源的、功能强大的、拥有大型社区、支持多种语言和货币，而且更重要的是 - 允许像 Magento 一样进行多商店管理。

另一方面 - Opencart 是轻量级的，更易于管理，有更多可用的文档，并且不需要太多修改，因此您可以立即开始。

# tfs - 将 FxCop 和 StyleCop 集成到 TFS 2010/VS 持续集成过程中

> ID：11947721
> 
> 赞同：8
> 
> 时间：2012-08-14T07:33:15.453
> 
> 标签：tfs, tfsbuild, fxcop, stylecop

我正在 Jenkins、TeamCity 和 TFS 2010 上设置一个持续构建过程来比较它们。在 Jenkins 和 TeamCity 中，我在每次签到时构建项目，并且设置了 FxCop 和 StyleCop 分析和报告。现在我想在 TFS 2010 中执行此操作。

如果我想确保每次签入时都运行 FxCop（或 Visual Studio 代码分析）和 StyleCop，我该如何使用 TFS 2010/VS 做到这一点？我还想知道是否有几种方法可以做到这一点（持续集成与门控签到）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T16:13:32.817

作为构建的一部分，有几种不同的方法可以运行它们。对于 FxCop，您可以在 TFS 构建定义上设置 PerformCodeAnalysis 属性。就我个人而言，我更喜欢使用 Build Definition 上的 MSBuildArguments 属性传入以下值：

/p:RunCodeAnalysis=True /p:CodeAnalysisRuleSet="..\Foo.ruleset

对于 StyleCop，我使用 Community TFS Build Extensions 项目中的自定义活动。您可以在此处找到二进制文件和说明：[StyleCop 自定义活动](http://tfsbuildextensions.codeplex.com/wikipage?title=How%20to%20integrate%20the%20extensions%20into%20a%20build%20template&referringTitle=Documentation)

# javascript - 如何将变量插入到使用搜索方法执行的正则表达式中？

> ID：11947725
> 
> 赞同：-1
> 
> 时间：2012-08-14T07:33:39.000
> 
> 标签：javascript

.search JS 方法似乎想要一个字符串文字而不是一个变量......

```
for (app in Servers)
{
    the_name = Servers [app]["Name"];
    the_app = Servers [app]["App Name"];
    search_str = "/"+Name+"/";
    hit = the_app.search(search_str);
    if (the_name == Name || the_app == "Foo Bar" )
    {
        result.Index = app;  
    }
} 
```

我想为一组具有共同词的应用程序生成命中，例如 Name = "Skittles" 将命中 app_name == "Skittles 1.0"; 的应用程序。“吃喝玩乐 1.5”；“Skittles 3.2 - 豪华版 3.2”；等等等等

*名称*是用户可定义的变量。*服务器*是一个提供给我的对象，它列出了我可以在我的机器上运行的视频服务器，服务器中的每个项目*都*对应一个服务器，并且在它的对象中有一个“名称”项目和一个“应用程序名称”项目。（这是[虹吸](http://syphon.v002.info)的事情，这不是 HTML/Web 上下文）。

我应该考虑使用不同的方法来构造正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:38:47.683

为什么选择正则表达式？使用`indexOf`，它与`search`字符串相对应。

更新：然后使用`new RegExp(Name)`将字符串转换为正则表达式。

更新：现在您更新了您的问题，`indexOf`“Skittles”仍然适用于您的所有`app_name`s。

```
for (app in Servers)
{
    the_name = Servers [app]["Name"];
    the_app = Servers [app]["App Name"];

    rx = new RegExp(Name);
    hit = the_app.search(rx);

    if (the_name == Name || the_app == "Foo Bar" )
    {
        result.Index = app;  
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:51:56.823

使用“RegExp”函数创建您的模式。看[这里](http://jsfiddle.net/XPkZn/1/)

您只需像这样创建一个模式变量：

```
var pattern = new RegExp( --pattern-- , --modifiers--); 
```

干杯

# ckeditor - ckEditor 自动增长可用性

> ID：11947730
> 
> 赞同：0
> 
> 时间：2012-08-14T07:34:03.093
> 
> 标签：ckeditor, usability

我正在使用带有自动增长插件的[CKeditor](http://ckeditor.com/)。但是当我处理大文本时会出现问题。我想应用一些风格。所以我需要滚动到页面顶部，点击按钮，然后滚动回到底部。这是非常不方便的。

在这种情况下，是否有一些插件可以帮助提高可用性？还是我需要自己写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:26:17.923

我会将增长大小限制为最大值，例如`autoGrow_maxHeight : 800`- 或任何适合您的大小。我非常喜欢 ckeditor 内容滚动而不是页面滚动。

另一种选择是将工具栏分隔在一个固定元素中，以确保它始终保持在视线范围内。有关示例，请参见[http://nightly.ckeditor.com/7595/_samples/sharedspaces.html ；](http://nightly.ckeditor.com/7595/_samples/sharedspaces.html)那里有一个编辑器，其中工具栏是静态可见的，可编辑区域与工具栏分开。

# java - Netbeans 添加新的 Maven 远程存储库

> ID：11947733
> 
> 赞同：4
> 
> 时间：2012-08-14T07:34:32.047
> 
> 标签：java, maven, netbeans, jetty, osgi

如何将新的远程存储库添加到 NetBeans 7.2 以与依赖关系窗口（使用存储库索引）一起使用？

我发现[http://wiki.magnolia-cms.com/display/WIKI/setting+up+Netbeans+with+the+Magnolia+maven+repository](http://wiki.magnolia-cms.com/display/WIKI/setting+up+Netbeans+with+the+Magnolia+maven+repository)但在 7.2 NB 中这个窗口移动了。

在 Dependency 中没有用于添加新的远程 Maven 存储库的按钮。我需要将[http://repo1.maven.org/maven2/org/mortbay/jetty/jetty/7.0.0.pre5/](http://repo1.maven.org/maven2/org/mortbay/jetty/jetty/7.0.0.pre5/)添加到 NetBeans。

对不起我的英语不好。

谢谢，亚瑟。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-07-03T10:45:01.627

这是简单的方法-

```
Go to Services>Maven Repositories. Right Click>Add Repository 
```

![在此处输入图像描述](../Images/765bd8eacba6d4b6f898d8c7fdcf6772.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T07:36:05.003

您可以在 Maven 中编辑`settings.xml`文件并将您的存储库添加到其中。您应该添加如下内容：

```
<repositories>
    <repository>
        <id>nexus</id>
        <name>Repository for JDK 1.6 builds</name>
        <url>http://myrepo1:1111/contextpath/</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>nexus-major</id>
        <name>Repository for JDK 1.6 builds 2</name>
        <url>http://myrepo1:1111/contextpath2/</url>
        <layout>default</layout>
    </repository>
</repositories> 
```

但是我认为这段代码应该被包装在`profile`标签中。有关更多详细信息，您可以查看[此](http://maven.apache.org/settings.html)。`$HOME/.m2`您可以在 linux 的目录和 Windows 的同一目录中找到设置文件。

# ios - 提交xcode应用程序时出错

> ID：11947735
> 
> 赞同：-1
> 
> 时间：2012-08-14T07:34:34.620
> 
> 标签：ios, xcode

1) iPhone/iPod Touch: info.plist: 无法验证图标尺寸，未找到图标。您必须定义 CFBundleicons、CFBundleIconfiles 或提供 57 x 57 的默认 Icon.png。 2) 应用程序代码设计验证失败。签名无效，包含不允许的权利，或者未在 iphone 分发证书中签名。当我想从 App Loader 提交应用程序时，我遇到了上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:06:22.203

要将您的应用程序提交到 apstore，您必须使用分发临时配置文件构建您的应用程序

创建分发配置文件。. .

1.  从会员中心登录 iOS 配置门户。

2.  在侧边栏中选择 Provisioning。

3.  选择分发选项卡。

4.  单击新建配置文件。

5.  选择 App Store 作为分发方式。 ![看图片](../Images/757857f07bed735c8f67a37fcdd7bf9b.png)

6.  输入配置文件名称。

7.  确认您的分发证书已显示。

8.  单击提交。

最好看看[这个](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/SubmitYourApp/SubmitYourApp.html#//apple_ref/doc/uid/TP40011375-CH7-SW1)

# html - 独立于后端服务器代码语言的 HTML 通用控件

> ID：11947737
> 
> 赞同：1
> 
> 时间：2012-08-14T07:34:34.043
> 
> 标签：html, controls, custom-controls

我们如何创建一个无论后端服务器代码使用什么语言都可以工作的 html 控件？

我需要创建一个 HTML 通用控件，用于判断服务器是 PHP、C# 还是 Ruby。

答案将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:36:16.290

您的 HTML 控件或表单都独立于您的后端语言工作。您使用带有 POST 或 GET 的表单将数据发送到后端脚本。您的 HTML 代码不会改变后端脚本是否是 PHP、ASP、JSP、Perl，...

# c++ - 插件如何工作？

> ID：11947745
> 
> 赞同：0
> 
> 时间：2012-08-14T07:35:10.070
> 
> 标签：c++

> **可能重复：**
> [插件系统如何工作？](https://stackoverflow.com/questions/3806361/how-do-plugin-systems-work)

我找不到任何文章来说明安装插件时会发生什么。程序的 exe 说浏览器是只读的，如何对其进行更改。？它如何获取插件函数的地址并加载到进程内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:38:10.737

主应用程序以特殊的方式设计为插件注册提供服务，通常它们也有特殊的协议与插件通信。

应用程序开发人员通常会提供插件开发人员可以使用的 API。这与创建使用某些 Web 服务的 API 的应用程序没有太大区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:38:54.230

该插件通常是一个动态加载的库（Windows 下的 DLL，Linux 下的 DLL），由浏览器加载。然后，浏览器会查找特定符号，通过该符号导出插件的功能 (API)。

# javascript - 在 codeigniter 中有条件地设置会话数据

> ID：11947746
> 
> 赞同：1
> 
> 时间：2012-08-14T07:35:18.520
> 
> 标签：javascript, jquery, codeigniter, session

我想在我的视图中设置我的会话数据，但有条件地，所以在我视图的 javascript 部分我有

```
$('#demo').click(function(){
$this->session->set_userdata('sample',10);
}); 
```

然而，每当我刷新我的页面，而不点击按钮，会话数据，“样本”被设置，有没有办法只有在我点击按钮后才能获得这个会话数据集？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:39:01.713

您正在混合使用 Javascript 和 PHP（客户端和服务器端）。您可以像这样使用 Ajax 来做到这一点：

```
$('#demo').click(function(){
  $.ajax({
     type: "POST",
     url: "mycontroller/sessions"
   }).done(function( msg ) {
     alert( "Data Saved: " + msg );
   });
}); 
```

在您的`Mycontroller.php`文件中，您应该创建一个名为“会话”的函数：

```
function sessions(){
   $this->session->set_userdata('sample',10);
} 
```

如果您需要将信息从 Javascript 传递到 PHP：

```
var dummy = 10;
$('#demo').click(function(){
   $.ajax({
      type: "POST",
      url: "mycontroller/sessions",
      data: { value: dummy }
   }).done(function( msg ) {
      alert( "Data Saved: " + msg );
   });
});

function sessions($value){
   $this->session->set_userdata('sample',$value);
} 
```

有关 JQuery 中的 Ajax 的更多信息[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

编辑：

要检查 CodeIgniter 中是否存在会话变量：

```
function sessions(){
   $sId = $this->session->userdata('session_id');
   if(isset($sId)){
      // session_id exist
   }
} 
```

“检索会话数据”部分[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:23:10.887

如果会话中的变量未设置，则以下方法返回 FALSE

```
$this->session->userdata('sample') 
```

否则返回适当的值。

# machine-learning - 计算文档分类的 IDF（逆文档频率）

> ID：11947748
> 
> 赞同：5
> 
> 时间：2012-08-14T07:35:35.080
> 
> 标签：machine-learning, information-retrieval, tf-idf, document-classification, categorization

我对在文档分类中计算 IDF（逆文档频率）有疑问。我有不止一个类别，其中包含多个用于培训的文档。我正在使用以下公式计算文档中每个术语的 IDF：

```
IDF(t,D)=log(Total Number documents/Number of Document matching term); 
```

我的问题是：

1.  “语料库中的文档总数”是什么意思？文档是来自当前类别还是来自所有可用类别？
2.  “文档匹配项的数量”是什么意思？匹配文档的术语是来自当前类别还是来自所有可用类别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T09:18:10.593

`Total Number documents in Corpus`只是您在语料库中拥有的文档数量。因此，如果您有 20 个文档，则此值为`20`.

`Number of Document matching term``t`是该术语出现在多少文档中的计数。因此，如果您总共有 20 个文档，并且该术语`t`出现在 15 个文档中，则值为`Number of Documents matching term`15。

因此，此示例的值将是`IDF(t,D)=log(20/15) = 0.1249`

现在，如果我是正确的，每个文档都有多个类别，并且您希望能够将新文档分类为一个或多个这些类别。一种方法是为每个类别创建一个文档。每个类别文档都应包含所有标有该类别的文本。然后，您可以`tf*idf`对这些文档执行。

然后可以通过使用为每个类别计算的不同术语值对查询的术语值求和来实现对新文档进行分类的简单方法。用于计算产品的术语值产生最高结果的类别将排名第一。

`idf`另一种可能性是使用查询中每个术语的 为查询创建一个向量。查询中未出现的所有术语都被赋予 的值`0`。然后可以使用例如[余弦相似度来比较查询向量与每个类别向量的相似度](https://en.wikipedia.org/wiki/Cosine_similarity)。

[平滑](https://en.wikipedia.org/wiki/Smoothing)也是一种有用的技术来处理查询中没有出现在您的语料库中的单词。

我建议阅读Christopher D. Manning、Prabhakar Raghavan 和 Hinrich Schütze 的“Introduction to Information Retrieval”的[第 6.2 和 6.3 节。](http://nlp.stanford.edu/IR-book/html/htmledition/scoring-term-weighting-and-the-vector-space-model-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T03:47:51.467

我在这里写了一篇描述词频-逆文档频率的小文章：http: [//bigdata.devcodenote.com/2015/04/tf-idf-term-frequency-inverse-document.html](http://bigdata.devcodenote.com/2015/04/tf-idf-term-frequency-inverse-document.html)

这是该帖子的一个片段：

TF-IDF 是文档分类中广泛使用的最基本的度量。让我们尝试定义这些术语：

与文档中的其他单词相比，词频基本上是文档中某个单词出现频率的重要因素。

另一方面，逆文档频率对于给定集合（我们想要分类为不同类别的文档）的所有文档中单词的出现很重要。

# php - 从 php 登录 Kerberos

> ID：11947749
> 
> 赞同：2
> 
> 时间：2012-08-14T07:35:39.557
> 
> 标签：php, security, login, kerberos

我在 php 中创建了一个登录表单，现在我想使用 Kerberos 对其进行身份验证。有谁知道该怎么做？我已经尝试了一段时间，但没有任何成功。

到目前为止我尝试过的事情：

1\. KADM5 PHP 模块。[我从这个](http://php.net/manual/en/book.kadm5.php)链接阅读了他们的手册。我仍然对安装步骤感到困惑。它说使用以下命令安装 PECL 扩展：

```
$pecl install pecl_http 
```

但它总是显示这个错误：

```
No releases available for package "pecl.php.net/pecl_http"
install failed 
```

我已经安装了手册中列出的所有软件包。

2\. LDAP：PHP 模块。这是我在 PHP 中尝试过的代码：

```
<?php  

    $ldaphost = <servername>;  
    $ldapport = 636;  
    $ds = ldap_connect($ldaphost, $ldapport) or die("Could not connect to ".$ldaphost);

    echo $ds;  

    if($ds) {

        ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3);  
        $username = $_GET["username"];  
        $upasswd = $_GET["password"];  
        $ldapbind = ldap_bind($ds, $username, $upasswd);  

        if($ldapbind) {
            print "Congratulations!";
        } else {
            print "Access Denied!";
        }

    } 

?> 
```

当我运行这个脚本时，我得到这个错误：

> 资源 id #4PHP 警告：ldap_bind()：无法绑定到服务器：无法在第 15 行的 /var/www/joomla/scripts/testing.php 中联系 LDAP 服务器
> 拒绝访问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:10:17.097

据我记得，K5ADM 没有“登录”功能，因此您可以尝试使用“真正的”kerberos 模块 [http://savannah.nongnu.org/projects/phpkrb5/](http://savannah.nongnu.org/projects/phpkrb5/)

我不确定当前版本是否可以编译。几年前我做过，我确实需要应用下面的补丁，并且没有使用makefile但是

cc -DCOMPILE_DL_KRB5 -fpic -I。-I/usr/include/php -I/usr/include/php/main -I/usr/include/php/Zend -I/usr/include/php/TSRM -c -o phpkrb5.o phpkrb5.c cc -共享 -rdynamic -o phpkrb5.so phpkrb5.o

```
Index: phpkrb5.c
===================================================================
RCS file: /sources/phpkrb5/phpkrb5/phpkrb5.c,v
retrieving revision 1.1
diff -r1.1 phpkrb5.c
23,24c23,24
< #include "php.h"
< #include "php_krb5.h"
---
> #include "main/php.h"
> #include "phpkrb5.h" 
```

# android - 访问应用程序数据空间

> ID：11947752
> 
> 赞同：0
> 
> 时间：2012-08-14T07:35:46.727
> 
> 标签：android

我正在制作一个应用程序，当我通过我的应用程序下载文件时，它会下载到我的应用程序数据空间中。我这样做主要是因为下载的文件不会被用户访问，因为如果它存储在 sdcard 或内部存储器中，他们可以访问它。所以我的问题是，当用户通过任何第三方应用程序点击文件时，我想打开文件。下载文件时，它会弹出打开或不打开。如果点击打开，则它应该由其他一些第 3 方应用程序打开。例如，如果我下载 abc.doc，那么它应该要求我通过各种阅读器打开。

这可能吗？如果不是，我可以实施什么解决方案？这是否需要设备root ..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:46:58.303

> 我这样做主要是因为下载的文件不会被用户访问，因为如果它存储在 sdcard 或内部存储器中，他们可以访问它。

首先，“内部存储器”是“应用程序数据空间”，假设“应用程序数据空间”是指文件存储而不是 RAM。Android 中只有两个地方可以写入：内部存储和外部存储。

其次，想要访问您的文件的用户甚至可以在内部存储上访问您的文件，例如通过 root 他们的设备。

> 所以我的问题是，当用户通过任何第三方应用程序点击文件时，我想打开文件。下载文件时，它会弹出打开或不打开。如果点击打开，则它应该由其他一些第 3 方应用程序打开。例如，如果我下载 abc.doc，那么它应该要求我通过各种阅读器打开。

您可以选择在`MODE_WORLD_READABLE`创建文件时使用`openFileOutput()`. 这可能允许某些第三方应用程序访问该文件。或者，您可以实现 a`ContentProvider`来提供此文件。其中任何一个都将允许*用户*访问文件（例如，通过这些查看器应用程序中的“共享”选项），这与您的原始目标背道而驰。

*如果您的应用程序*是查看（或以其他方式使用）该文件的应用程序，则您可以获得用户无法访问的文件（除非通过您的应用程序）的唯一方法。而且，正如我上面提到的，即使有根设备所有者仍然可以选择访问该文件。

# php - 如何在 symfony2 表单中使用生日字段

> ID：11947753
> 
> 赞同：0
> 
> 时间：2012-08-14T07:35:50.813
> 
> 标签：php, symfony, doctrine-orm

[Symfony Docs](http://symfony.com/doc/current/reference/forms/types/birthday.html)说我们可以在表单中使用生日日期。但他们没有给出任何例子如何使用它

`birthday`谁能告诉我在学说实体中我需要在哪里写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:43:11.840

生日是 form_widget。

前任。在控制器中：

```
$form = $this->createFormBuilder($task)
        ->add('task', 'text')
        ->add('yearOfBirth', 'birthday')
        ->getForm(); 
```

此小部件可以映射到 DateTime 字段

```
/**
 * @var date $yearOfBirth
 *
 * @ORM\Column(name="year_of_birth", type="datetime")
 * @Assert\DateTime()
 */
private $yearOfBirth; 
```

在这里，您可以参考有关此字段的文档： http: [//symfony.com/doc/current/reference/forms/types/birthday.html](http://symfony.com/doc/current/reference/forms/types/birthday.html)

问候， 马克斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:42:18.330

```
$builder->add('dateOfBirth', 'birthday'); 
```

你在网上有很多例子：

*   [如何在 Symfony2 中以全文形式显示日期字段的月份？](https://stackoverflow.com/questions/8269519/how-to-display-months-in-full-text-for-date-fields-in-symfony2)
*   [http://j-place.developpez.com/tutoriels/php/creer-premiere-application-web-avec-symfony2/#LX-A](http://j-place.developpez.com/tutoriels/php/creer-premiere-application-web-avec-symfony2/#LX-A)

# java - 语句在数据库中有效，但在 Java 代码中失败 -

> ID：11947757
> 
> 赞同：3
> 
> 时间：2012-08-14T07:35:58.583
> 
> 标签：java, jdbc, oracle11g

```
CREATE USER Person identified by 2012;GRANT ALL PRIVILEGES TO Person; 
```

Oracle 11g (GUI) 成功执行了这些语句。但是，当我完全复制并粘贴上面的语句并尝试使用执行它时`executeUpdate(String sql)`，我得到了下面的异常。为什么？

```
java.sql.SQLSyntaxErrorException: ORA-00911: invalid character 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:47:10.043

您不应该将两个不同的 SQL 语句视为一个。JDBC 驱动程序无法执行将作为一个字符串传递的两条语句。

尝试将它们执行为

```
Statement stmt = conn.createStatement();
stmt.executeUpdate("CREATE USER Person identified by 2012");
stmt.executeUpdate("GRANT ALL PRIVILEGES TO Person;"); 
```

应该这样做。干杯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T07:42:29.033

取决于您的数据库 jdbc 驱动程序，该驱动程序将不支持在一个“executeUpdate”中执行两个语句。您必须执行以下操作：

```
Statement stmt = conn.createStatement();
for(String statement : statements) {
    stmt.addBatch(statement);
}
stmt.executeBatch(); 
```

# java - 更改时区而不更改日期格式

> ID：11947764
> 
> 赞同：0
> 
> 时间：2012-08-14T07:36:20.383
> 
> 标签：java, android, date, simpledateformat

我有**日期格式**，`"EEE, dd MMM yyyy HH:mm:ss Z"`日期是

```
String date = "Tue, 14 Aug 2012 07:26:33 +0000"; 
```

如何在`+0700`不更改日期格式的情况下更改时区？

这就是我尝试的

```
String sDate = null;
Date date = null;
try {
    sDate = "Tue, 14 Aug 2012 07:26:33 +0000";
    SimpleDateFormat curFormater = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");
    curFormater.setTimeZone(TimeZone.getTimeZone("GMT"));
    try {
        date = curFormater.parse(sDate);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} catch (DropboxException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
lastUpdate.setText("Last Update : " + date.toString()); 
```

但结果是**`Tue Aug 14 14:26:33 ICT 2012`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:58:41.567

您快到了，您已经正确解析了日期，但是您依赖的是默认值`toString()`而不是您已经创建的格式。

最后一行试试这个：

```
lastUpdate.setText(curFormater.format(date)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:08:25.730

或者，如果您想手动添加小时数，您可以这样做：

```
static final Long oneHourInMilliseconds = new Long(3600000);
static final DateFormat d = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss Z");

public static Long addHours(Date time, int hours)
{
    return time.getTime() + (hours * oneHourInMilliseconds);
}

public static void main(String[] args) throws ParseException
{
    String dateAsString = "Tue, 14 Aug 2012 07:26:33 +0000";
    Date before = d.parse(dateAsString);
    Date after = new Date(addHours(before, 7));
    System.out.println("Before: " + before + ". After: " + after);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T19:07:48.480

date -d 为此在 Unix 中工作。

# visual-studio-2010 - 您可以在解决方案中搜索当前项目和所有引用的项目吗？

> ID：11947769
> 
> 赞同：0
> 
> 时间：2012-08-14T07:36:51.133
> 
> 标签：visual-studio-2010, c#-4.0, memory-leaks, red-gate-ants

我有一些内存泄漏。我正在创建一个大对象图，然后取消引用它。

```
 var a = MyDomainModel.Create();
 a = null;
 //GC.Collect();
 Console.ReadLine(); 
```

那里没有不受管理的东西。JustTrace 和 ANTS（版本 6）都报告说对象由“System.Object[]”保持在适当位置。我假设有一个静态字段（列表/字典/哈希集）隐藏在内部使用 ArrayList 的某处。我打算做一些文本搜索（可能还有一些正则表达式）。这是一个包含 30 个项目的非常大的解决方案。有什么方法可以在“当前项目和解决方案中由当前项目直接/间接引用的所有项目”中进行 Visual Studio 文本搜索？底层物理文件夹的组织方式不能有意义地表示这些依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:54:19.610

如果您使用的是 Windows 7，请创建一个[库](http://www.makeuseof.com/tag/windows-7-libraries-%E2%80%93-and-why-you-want-them/)并将您的项目位置添加到该库中。这应该将它们全部组织在一个地方，而无需实际移动或复制任何东西。然后从 Visual Studio 在库文件夹中进行文本搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:17:09.587

我认为问题已经解决了。如果其他人遇到类似情况，JustTrace 现在通过 Root Path 视图处理这种情况。这里有几个途径。

1.  最大内存保持器：找到对象[] 保存在内存中的对象之一。选择对象，然后单击功能区中的根路径按钮。

2.  按类型：选择类型，然后单击功能区中的实例按钮。选择其中一个实例，然后单击根路径。

3.  按类型传入引用：选择类型，然后单击功能区中的实例按钮。选择其中一个实例，然后单击根路径。

根路径图显示持有实例的成员名称并标记静态字段/属性。有关示例，请参见下图。

![带静态的根路径](../Images/243b24e694dee331144a1cfbca843217.png)

# report - 如何在 openerp 的 rml 报告中添加用户定义的标题？

> ID：11947770
> 
> 赞同：4
> 
> 时间：2012-08-14T07:36:53.363
> 
> 标签：report, openerp, rml

除了公司中定义的页眉/页脚之外，如何为报表（例如交货单中的拣货单报表）添加新的页眉/页脚？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T08:03:28.447

在报告标签中放置 header='False'，例如。

```
<report header='False' auto="False" id="report_product_history" 
model="product.product" name="stock.product.history"
 string="Stock Level Forecast"/> 
```

它不会打印公司中定义的默认标题。然后在 rml 文件中找到`<pageTemplate>`标记，并将其替换为您的 rml 代码。例如。

```
 <template pageSize="(595.0,842.0)" title="Test" 
        author="Atul Makwana" allowSplitting="20">
        <pageTemplate id="first">
         ***Your rml header & footer***
        </pageTemplate>
 </template> 
```

这样您就可以放置新的页眉和页脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:51:16.790

删除标题的一种方法是[Atul 建议](https://stackoverflow.com/a/11948145/4794)的，在报告标签中声明它。

```
<report 
    header="False"
    auto="False" 
    id="report_product_history" 
    model="product.product" 
    name="stock.product.history"
    string="Stock Level Forecast"/> 
```

在某些情况下，没有报告标签。例如，报告可能仅由向导生成。在这种情况下，您可以在注册解析器时将其声明为参数。有关示例，请参见`mrp_operations`模块的[条码报告。](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/7010/mrp_operations/report/mrp_code_barcode.py#L32)

```
class code_barcode(report_sxw.rml_parse):
    def __init__(self, cr, uid, name, context):
        super(code_barcode, self).__init__(cr, uid, name, context=context)
        self.localcontext.update({
            'time': time,
        })

report_sxw.report_sxw('report.mrp.code.barcode', 
                      'mrp_operations.operation.code', 
                      'addons/mrp_operations/report/mrp_code_barcode.rml',
                      parser=code_barcode,
                      header=False) 
```

您还可以使用该参数指定特定的标头。它默认为`'external'`，但它可以是`'internal'`或`'internal landscape'`使用公司配置中的其他标题之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-21T08:49:51.900

您可以像这样在您的 report.rml 文件中自定义报告标题，

```
<pageTemplate id="first">
    <frame id="first" x1="57.0" y1="115.0" width="481" height="615"/>
    <header>
        <pageGraphics>
            <image x="1.3cm" y="26.0cm" height="90.0">[[company.logo or removeParentNode('image')]]</image>
            <drawString x="10.9cm" y="2.9cm">Signature:</drawString>
            <drawString x="12.7cm" y="2.9cm">___________________________________</drawString>
        </pageGraphics>
        </header>
</pageTemplate> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T05:25:10.977

在报告集标题 = 'False'

现在您可以在页面上添加自己的页眉页脚

```
<template title="Test" author="Sagar" allowSplitting="20">
    <pageTemplate id="first">
      <frame id="first" x1="15.0" y1="42.0" width="539" height="758"/>
      <pageGraphics>

           <!-- ================== Header =============== -->

            <image x="14cm" y="25.6cm" height="40.0">[[ company.logo or removeParentNode('image') ]]</image>
                <setFont name="Helvetica" size="10.0"/>
                <drawString x="1cm" y="27.2cm">Main Header</drawString>
                <!-- Order Details -->
                <place x="33" y="18cm" width="530.0" height="205.0">
                    <blockTable colWidths="265,265" style="Table1">
                        <tr>
                            <td>Header Value 1</td>
                            <td><para style="normal2-center">Header Value 2</para></td>
                        </tr>
                    </blockTable>
        </place>

         <!-- ======================== footer =========================== -->
        <place x="33" y="55cm" width="530.0" height="205.0">
                <blockTable colWidths="265" style="Table1">
                            <tr><td><para style="normal2-center">Footer Value</para></td></tr>
                        </blockTable>
                    </place>
        </pageGraphics>
    </pageTemplate>
  </template> 
```

# java - 使用 Xerces SAX 解析器读取错误标签时未报告 DTD 错误

> ID：11947771
> 
> 赞同：2
> 
> 时间：2012-08-14T07:36:55.103
> 
> 标签：java, xml, dtd, saxparser, xerces

我正在尝试使用 Apache Xerces SAX2 验证解析器解析和验证一个非常简单的 XML 文件。DTD 是从 XML 文件中引用的，我的简单实体解析器可以成功返回 DTD 文件的正确 InputStream。我有一个非常基本的标签结构，它与命名它们无关，所以我只是给 XML 标签一个字母。主标签是A，A标签内可能有零个或多个B，但只有B。B里面有零个或多个C。所以一个合适的 XML 应该是：

```
<A>
<B><C>somecharacters</C></B>
</A> 
```

我创建了一些单元测试并经历了一个奇怪的行为。我想如果我给上面的解析器一个类似的 XML，但是只有 C 的结束标记没有匹配的开始标记并且没有父元素 B，解析器将报告 DTD 验证错误。下面是根据 DTD 故意设计的无效 XML 示例：

```
<A>
<C>somecharacters</C></B>
</A> 
```

很明显，这个 XML 片段的格式不正确。不幸的是（或者我不理解 SAX 解析器的某些内容）解析器为 C 标记调用 ContentHandler 的 startElement 方法，然后为 C 标记内的字符调用 characters 方法。DTD 明确指出，A 标签只能有 B 标签作为子标签，而不是 C，因为 C 首先需要嵌套在 B 中。我不明白的是为什么解析器在意识到嵌套的 C 不在一个好地方后调用 characters 方法

我在 ContentHandler 方法中的应用程序逻辑依赖于标签根据 DTD 嵌套的假设，我不想用空检查器和错误处理代码填充这 3 个方法，因为我认为这是 DTD 验证器的工作。

我设置解析器的代码是（异常处理部分不相关）：

```
 private static final String VALIDATION_FEATURE = "http://xml.org/sax/features/validation";
    private static final String SAX_PARSER_IMPLEMENTATION = "org.apache.xerces.parsers.SAXParser";
    ......
    XMLReader parser = XMLReaderFactory.createXMLReader(SAX_PARSER_IMPLEMENTATION);
    parser.setFeature(VALIDATION_FEATURE, true);
    parser.setErrorHandler(new CustomErrorHandler());
    parser.setEntityResolver(entityResolver);
    parser.setContentHandler(handler);

    InputSource inputSource = new InputSource(stream);
    try {
        parser.parse(inputSource);
    } catch (IOException e) {
        throw new ControlFileReadException("Error while parsing the control file.", e);
    } catch (SAXException e) {
        if (e.getCause() instanceof IncorrectCounterNameException) {
            throw new IncorrectCounterNameException(e.getCause());
        } else {
            throw e;
        }
    }

    private final class CustomErrorHandler implements ErrorHandler {
    public void warning(SAXParseException spe) throws SAXException {
        throw spe;
    }

    public void fatalError(SAXParseException spe) throws SAXException {
        throw spe;
    }

    public void error(SAXParseException spe) throws SAXException {
        throw spe;
    }
} 
```

任何帮助表示赞赏！

# ios - 获取 UIView 中的文本？

> ID：11947775
> 
> 赞同：0
> 
> 时间：2012-08-14T07:37:19.330
> 
> 标签：ios, uiview

我在 UIView 中绘制文本

```
-(void) drawRect:(CGRect)rect{
 [tempPageStr drawAtPoint:tempDrawPoint withFont:pagefont];
} 
```

我想用我的代码实现 UIView 中某些文本的选择效果，例如 textView、webView。

我想太多，没有任何理想。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:28:17.133

textView不能修改menu的backgroundColor，所以我觉得这个方法。</p>

# powershell - 如果在 powershell 中进行故障排除

> ID：11947776
> 
> 赞同：0
> 
> 时间：2012-08-14T07:37:30.960
> 
> 标签：powershell, scripting

我处于一个非常奇怪的 powershell 行为中。我有一个 If，elseif，else。If 有效， else if 有效，但 else 从未发生。

会是什么呢？

这是脚本：

```
$result = Get-AMTHardwareAsset $Computer -credential $VProCredential -textoutput
if ($result.Contains("Unauthorized") -eq $true)
    {
        Add-Results "$Computer`tHardwareAssets-Unauthorized"
    }
elseif ($result.Contains("Could not connect") -eq $true)
    {
        Add-Results "$Computer`tHardwareAssets-CannotConect"
    }

    else
    {
        Add-Results "TESTING"
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:44:17.703

将脚本更改为硬编码`$result`为“Fubar”，并替换`Write-Host`为`Add-Results`：

```
$result = 'Fubar'; #Get-AMTHardwareAsset $Computer -credential $VProCredential -textoutput
if ($result.Contains("Unauthorized") -eq $true)
{
    #Add-Results "$Computer`tHardwareAssets-Unauthorized"
    Write-Host "$Computer`tHardwareAssets-Unauthorized"
}
elseif ($result.Contains("Could not connect") -eq $true)
{
    #Add-Results "$Computer`tHardwareAssets-CannotConect"
    Write-Host "$Computer`tHardwareAssets-CannotConect"
}

else
{
    #Add-Results "TESTING"
    Write-Host "TESTING"
} 
```

我得到“测试”。

***您未包含的某些上下文适用，如果没有它，您将得到的唯一答案是：看起来不错***

# jsf-2 - Jsf：如果包含，则不显示列标题

> ID：11947782
> 
> 赞同：0
> 
> 时间：2012-08-14T07:37:54.317
> 
> 标签：jsf-2, datatable, facet

在数据表中，一列包含许多图像，这些图像一次有条件地呈现一个。该内容在其他数据表中很常见，因此我决定将其移动到单独的文件中，现在我有这样的内容：

```
<h:column><ui:include src="myFile,xhtml" /></h:column> 
```

在 h:column 标记内还有以下 f:facet 标记，它与其余代码一起移动

```
<f:facet name="header">Status</f:facet> 
```

现在列内容已正确显示，但标题为空。为什么 ？也许在创建列标题之后评估 ui:include ......在这种情况下，我需要指向一个好的文档，以便更好地了解 JSF 如何构建和呈现数据表。

我忘了提到我正在使用 Mojarra 2.0/2.1。

谢谢菲利波

# iphone - UINavigationController 下面的静态工具提示

> ID：11947785
> 
> 赞同：0
> 
> 时间：2012-08-14T07:38:01.220
> 
> 标签：iphone, objective-c, static, uinavigationcontroller, tooltip

在我的应用程序中，我有`UITableViewController`一个`UINavigationController`in 故事板。我想要做的是在下面有一个静态工具提示（`UIImageView`背景和一个`UILabel`），`UINavigationController`这样当我的表格滚动时，工具提示不会随之移动。有没有什么方法可以在不使用 XIB 文件和情节提要的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:07:47.683

可能不完全是您想要的，但如果您想要一个 UITableViewcontroller 并仅使用情节提要进行设置：

最简单的方法可能是使用导航栏（通过选择“提示”使其变大）或底部的工具栏，两者都在 TableViewController 的属性检查器中

或者（取决于您需要哪些功能）您可以简单地拖出一个 ViewController 并将一个 TableView 放入其中，然后根据需要自定义所有内容

# php - 使用 ajax 检索 xml 响应并显示结果

> ID：11947793
> 
> 赞同：0
> 
> 时间：2012-08-14T07:38:36.227
> 
> 标签：php, jquery, xml, ajax

我知道如何使用 $.ajax 方法发布。我有一个将数据发布到支付 API 的表单，响应如下所示：

```
<ns2:GetTransactionsResponseType xmlns:ns2="http://www.paymentgateway.com/schema/api/2.0/service.xsd">
<Timestamp>2012-08-14T17:33:55.213+10:00</Timestamp>
<Version>2.0</Version>
<Status>Success</Status>
<total>0</total>
</ns2:GetTransactionsResponseType> 
```

如您所见，交易总数为 0，因此第 1 步使用 $.ajax 发出发布请求，然后成功：我想做`$('#results'),html('the total transactions are: '+numberoftransactions);` 任何想法/建议？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:44:31.863

你可以试试这样的

```
$(function(){

    $.ajax({
         type: "GET",
         url: $uri,
         dataType: "xml",
         async: false,
         contentType: "text/xml; charset=\"utf-8\"",
         complete: function(xmlResponse) {

                // So you can see what was wrong...
                console.log(xmlResponse);
                console.log(xmlResponse.responseText);

              $("#preForXMLResponse").text(xmlResponse.responseText);
         }
    });

}); 
```

尝试在 responseText 中找到所需的值

欲了解更多信息，请访问此链接

[XMLHttpRequest 对象](http://www.w3schools.com/dom/dom_http.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:28:13.977

我想 rahul 已经回答了您的问题，所以我只想补充一点，如果您尝试将数据传递到 url 并相应地获取响应，那么您可以在发出 ajax 请求时利用 data 属性。假设您正在尝试根据用户配置文件获取 xml 响应，因此您必须将用户 ID 传递给 url 以获得准确的响应。你可以这样做

```
$(function(){

$.ajax({
     type: "GET",
     url: $uri,
     data: $user_id, //this id will be passed with the request to the url as query string
     dataType: "xml",
     async: false,
     contentType: "text/xml; charset=\"utf-8\"",
     complete: function(xmlResponse) {

            // So you can see what was wrong...
            console.log(xmlResponse);
            console.log(xmlResponse.responseText);

          $("#preForXMLResponse").text(xmlResponse.responseText);
     }
}); 
```

});

希望这会有所帮助，或者可能是我没有正确理解您在寻找什么。

# c# - 通过 ProgressBar 显示任务列表中的进度值

> ID：11947796
> 
> 赞同：0
> 
> 时间：2012-08-14T07:38:40.163
> 
> 标签：c#, winforms, progress-bar

我的标题可能会使我的问题听起来令人困惑，但事实并非如此。

我有一个要完成的任务列表和一个`ProgressBar`. 当我遍历任务列表时，我想通过 a 显示进度`ProgressBar`：

```
 double percentage;
        for(int i = 0; i < tasks.Count; i++)
        {
            percentage = (double)i + 1 / (double)tasks.Count;
            this.Invoke((MethodInvoker)delegate
            {
                progressBar1.Value = (int)Math.Round(percentage * 100);
            });
            // Do tasks here...
        } 
```

因此，如果我说 20 个任务`progressBar1`的值是 5 `((1 / 20) * 100)`，那么当它再次循环时，它的值是 10、15 等等。我现在使用的方法不能正常工作，第一个任务`progressBar1`的值为 0，然后当它再次循环时，它的值为 100。有没有办法做我想要实现的目标？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:46:55.357

```
for(int i = 0; i < tasks.Count; i++)
{
    double percentage = (double)(i + 1) / (double)tasks.Count;
    Action<double> update = p => 
    {
        progressBar1.Value = (int)Math.Round(p * 100);
    };
    this.Invoke(update, percentage);
    // Do tasks here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:47:01.823

您的代码应该基本上可以工作，但是我猜您的 UI 只是无法及时更新（即没有发生上下文切换，并且您只有在完成后才返回控制权）。我没有太多涉及 C#、多线程和 UI 编码的经验，所以我在这里可能有点偏离。

一旦您开始在任务线程中执行任务，我在这里尝试做的是睡一会儿（即使基本上 0 秒也应该可以解决问题）。

有点题外话：我想提一下，你有点过于复杂了。只需将进度条的最大值设置为任务数，然后将其值 1 增加 1，这会消除该循环中相当多的过时数学。

编辑：是的，刚刚注意到达林的回答，他是对的：你也缺少括号，导致你的百分比计算出错。

但请记住，这样做可能会由于精度错误而导致您的总百分比略有下降（取决于任务数量，这并不重要；但您可能无法准确达到 100%）。

# iphone - UIScrollView 向子视图发送触摸

> ID：11947797
> 
> 赞同：10
> 
> 时间：2012-08-14T07:38:42.687
> 
> 标签：iphone, ios, ipad, uiview, uiscrollview

**注意：**我已经阅读了一些关于`UIScrollView`发送触摸到子视图的问题（[这](https://stackoverflow.com/questions/3725721/disallow-uiscrollview-from-catching-subviews-touches)包括，虽然我已经投票了，但它不再像我预期的那样工作了）。

**我所拥有的：**我有`UIScrollView`一个 Custom `UIView`（我们称之为**A**），里面覆盖了整个`UIScrollView`. 我也可以`UIViews`在**A**中放置其他自定义。

在我这样做的代码上：

```
[scrollView setDelaysContentTouches:YES];
scrollView.canCancelContentTouches = NO; 
```

**发生了什么：**目前我唯一的问题是，如果我想在**A**中移动子视图，我必须触摸它，等待，然后再移动它。正是如此[处](https://stackoverflow.com/questions/3725721/disallow-uiscrollview-from-catching-subviews-touches)所述：

> 现在，行为会根据第一次触摸 UIView 的“时间长度”而改变。如果它很短，则管理相对拖动，因为它是 UIScrollView 的滚动。如果它很长，那么我会在我的 UIView 中得到 touchesMoved: 事件。

**我想要什么：****A**中的子视图应该始终获得优先级，我不应该触摸和等待。如果我触摸**A**而不是它的子视图，我希望`UIScrollView`接收触摸，例如平移和移动（`contentSize`大于`frame`）。

* * *

**编辑 1.0**

我在泛型中拥有这个**A**`UIScrollView`视图的唯一原因是因为我希望能够放大/缩小**A**视图。所以我正在做以下事情：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return customView; // this is the A view
} 
```

一开始我没有**A**视图，`UIScrollView`我唯一做的就是将**A**添加为我的`UIViewController's`根视图的子视图，一切都很顺利。**如果有另一种启用放大/缩小的方法，我将很乐意接受答案。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T11:54:02.517

**注意：**感谢大家的贡献，特别是对 Aaron Hayman 的贡献。

`UIScrollView`我能够通过对我拥有的子类执行以下操作来弄清楚：

```
-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
   CGPoint pointOfContact = [gestureRecognizer locationInView:self];

    // The view with a tag of 200 is my A view.
    return (![[self hitTest:pointOfContact withEvent:nil] isEqual:[self viewWithTag:200]]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T12:01:43.853

我没有对此进行测试，但我相信您如何处理视图 A（或其子视图）中的触摸事件将决定如何传递触摸事件。具体来说，如果您尝试使用方法: `touchesBegan`, `touchesMoves`, `touchesEnded`, etc 而不是 a`UIGestureRecognizer`您将不会以您想要的方式接收触摸。Apple 设计`UIGestureRecognizer`用于处理您所面临的问题。具体来说，`UIScrollView`用于`UIPanGestureRecognizer`处理滚动。如果您将 a 添加`UIPanGestureRecognizer`到其中一个子视图上`View A`发生的任何“平移”的每个子视图，则应将其发送到该子视图而不是`UIScrollView`. 但是，如果您只是使用“原始”`touches`方法，则`UIPanGestureRecognizer`in`UIScrollView`将永远不会被取消。

通常，最好使用 a`UIGestureRecognizer`而不是直接在视图中处理触摸。如果您需要以没有标准`UIGestureRecognizer`可以提供的方式处理触摸，请子类`UIGestureRecognizer`化和处理那里的触摸。这样您就可以获得 a 的所有功能`UIGestureRecognizer`以及您自己的自定义触摸处理。我真的认为 Apple 打算`UIGestureRecognizer`替换开发人员使用的大部分（如果不是全部）自定义触摸处理代码`UIView`。它允许代码重用，并且在减轻哪些代码处理哪些触摸事件时更容易处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:25:08.313

Jacky，我需要一个类似的东西：在一个建筑计划中（你的 A，在我的例子中是 UIScrollView 的一个子类），让用户放置和调整对象的大小（称之为 Bs）。这是我对这种行为的理解的草图：

*   在superview的(A)`initWithFrame:`方法中，设置这两个：

    ```
    self.canCancelContentTouches = YES;
    self.delaysContentTouches = NO; 
    ```

    这将确保 B 上的抽头立即路由到 B。

*   在嵌入的 B 中，阻止超级视图 A 取消点击，因此它不会干扰在 B 上启动的手势。

    在该`touchesBegan:`方法中，向上搜索视图层次结构（使用视图`superview`的属性），直到找到 a `UIScrollView`，并将其设置`canCancelContentTouches`为`NO`。`touchesEnded`记住你改变的superview，在B的and`touchesCancelled`方法中恢复这个属性。

我很想知道这是否也适合你。祝你好运！

野比

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:20:59.760

我认为您最好使用“touchesBegan,touchesMoved,touchesEnded”来传递事件。

你可以这样做：

你应该做一个 mainView 。它有2个属性。一个是 yourScrollView A ，一个是 yourCustomView。

```
`[yourScrollView addSubviews:yourCustomView];
[mainView addSubviews:yourScrollView];` 
```

然后像这样在 mainView.m 中编写你的 touches 方法（忽略 scrollView 语句）

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
   if ([[touches allObjects] isKindOfClass:[yourCustomView class]]) 
   {

        //do whatever you want
   }

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
   if ([[touches allObjects] isKindOfClass:[yourCustomView class]]) 
   {
       //do whatever you want
   }
} 
```

最后一步：将事件传递给scrollView（你的A）的子视图。

```
#import "yourScrollView.h"

@implementation yourScrollView

- (id)initWithFrame:(CGRect)frame {

    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code.
    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesBegan:touches withEvent:event];
    if(!self.dragging)
        [[self nextResponder] touchesBegan:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesMoved:touches withEvent:event];
    if(!self.dragging)
        [[self nextResponder] touchesMoved:touches withEvent:event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [super touchesEnded:touches withEvent:event];
    if(!self.dragging)
        [[self nextResponder] touchesEnded:touches withEvent:event];
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

希望帮助你

# php - PHP DOMNode 值

> ID：11947799
> 
> 赞同：0
> 
> 时间：2012-08-14T07:38:46.617
> 
> 标签：php, xml, dom, xpath

我目前正在努力解决一个非常奇怪的问题。我有一个如下所示的 XML：

```
<A>
  <B>
    <C>
      <D>
       <E attribute="foo">
         This is a value
       </E>
      </D>
    </C>
  </B>
</A> 
```

现在，当我执行 XPath-Query 并遍历结果时，我总是将值“这是一个值”作为节点 A 的值，这是不正确的（该值应该只是节点 E 的值）。

这里出了什么问题？好像在说 A->childNodes 时，它递归地获取所有 childNodes 并覆盖值。

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:02:05.337

$node->nodeValue 的处理程序`dom_node_node_value_read`是在[ext/dom/node.c](http://svn.php.net/viewvc/php/php-src/trunk/ext/dom/node.c?view=log)中实现的。
它调用[libxml2 的 xmlNodeGetContent()](http://xmlsoft.org/html/libxml-tree.html#xmlNodeGetContent)函数。

> 读取节点的值，可以是该节点直接携带的文本（如果它是 TEXT 节点）**或该节点子节点**（TEXT 和 ENTITY_REF）携带的值的聚合字符串。实体引用被替换。

即对于 DOMElement，您将所有子元素的所有值作为一个字符串。如果我没记错的话，
那不是[http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1841493061](http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-1841493061)所说的......但这就是它的实现方式在 libxml2/php

# while-loop - 在while循环外显示变量

> ID：11947803
> 
> 赞同：0
> 
> 时间：2012-08-14T07:38:53.917
> 
> 标签：while-loop

海。我知道有类似的答案，但我无法得到它。这是我的鳕鱼：

```
<?php include 'header.php'; ?>
<?php include 'connect.php';

$q = mysqli_query($link, $aaa = 'SELECT * FROM agentii LEFT JOIN orase ON agentii.oras=orase.oras_id WHERE orase.oras_id = \'' .$_GET['id']. '\'') or die(mysqli_error($link));
$row = mysqli_fetch_assoc($q);
?>

<h2>Title <em><?php echo $row['oras'];?></em></h2>

<div class="div_view">
    <table cellspacing="0" cellpadding="5" border="0" width="100%">
        <tr>
            <th>Agentie</th>
            <th>Adresa</th>
        </tr>

        <?php while ($row = mysqli_fetch_assoc($q)) { ?>

        <tr>
            <td><?php echo $row['agentie'];?></td>
            <td><?php echo $row['adresa'];?></td>
        </tr>

        <?php }?>

    </table>
</div>

<?php include 'footer.php'; ?> 
```

这个输出（我不能放图像，因为是一个新帐户 - 所以我放了一个指向 prt src 的链接）： http: [//postimage.org/image/w9zsexz91/](http://postimage.org/image/w9zsexz91/)

在我的数据库中，我有 3 行，代码只输出 2 行。我知道这是因为 2 mysqli_fetch_assoc，但我想显示所有行，并且我也想`<?php echo $row['oras'];?>`在 while 之外显示标题（）。

有人可以帮我吗？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:53:54.867

首先是强制性**警告**：记住小[鲍比桌！](http://bobby-tables.com/) （或者：您的代码容易受到 sql 注入攻击）

然后：您在 while 循环中只得到两行，因为您首先在循环外请求了一行，从而增加了结果中的内部游标。

如果要一次性获取标题和行，则需要缓存结果，例如：

```
$resultArray = array();
while ($row = mysqli_fetch_assoc($q)) {
  $resultArray[] = $row;
}
//....
?>
<h2><?php echo $resultArray[0]['oras']; ?></h2>

<?php // ... ?>

<?php foreach($resultArray as $row) {
  <tr>
    <td><?php echo $row['agentie'];?></td>
    <td><?php echo $row['adresa'];?></td>
  </tr>
} ?> 
```

这只是一个存根，当然，如果你有一行，你应该实施检查等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:42:26.713

尝试：

```
<?php do { ?>

<tr>
    <td><?php echo $row['agentie'];?></td>
    <td><?php echo $row['adresa'];?></td>
</tr>

<?php } while ($row = mysqli_fetch_assoc($q)); ?> 
```

此循环的第一次迭代将打印第一个获取的行。我只更改了`while`子句的位置，强制循环的代码在获取新行之前运行。

# javascript - 使用 javascript 数组更改复选框值

> ID：11947805
> 
> 赞同：0
> 
> 时间：2012-08-14T07:39:08.263
> 
> 标签：javascript, jquery, html

我有一个 javascript 数组，其中填充了 html 文件中的复选框值。如何从 jquery 中找到特定元素并更改检查符号。

```
jQuery.each(substr, function() {
 var n = this;
 $('input[type=checkbox]').each(function () {
 $('input[name='+n+']').attr('checked', true);
 });
}); 
```

**Substr**是用名称填充的数组。 **substr = {'a', 'b', 'c', 'd'}** 。上面的代码不起作用。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:41:20.290

我认为`substr = {'a', 'b', 'c', 'd'}`应该是`substr = ['a', 'b', 'c', 'd']`。

```
jQuery.each(substr, function(i, val) {
 // val = a, b, c... etc
 $('input[type=checkbox][name="'+ val +'"]').attr('checked', true);
}); 
```

# javascript - 如何将复选框 id 分配给 phonegap 中的数据库？

> ID：11947806
> 
> 赞同：0
> 
> 时间：2012-08-14T07:39:11.373
> 
> 标签：javascript, jquery, jquery-mobile, cordova

在这里我创建了一个这样的复选框

```
<input type="checkbox" id="checkAddress" onclick="checkAddress(this)"/>
function checkAddress(checkbox)
        {
            if (checkbox.checked)

           alert("a");
            }

        } 
```

在这里我选中了复选框，如果选中，我想将复选框结果更新到数据库，所以我想将复选框 id 或值更新到数据库..我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:59:37.427

您可以使用 checkbox.id 获取复选框的 ID：

```
function checkAddress(checkbox){
    if (checkbox.checked){
      alert(checkbox.id);
   }
}​ 
```

所以你可以执行这样的查询：

```
function checkAddress(checkbox){
    if (checkbox.checked){
        db.transaction(function(tx){
            tx.executeSql('INSERT INTO checkbox_ids (id) VALUES (\''+checkbox.id+'\')');
        }, errorCallback, successCallback);
   }
}​ 
```

其中 errorCallback 和 successCallback 是您的 phonegap 应用程序的预定义回调函数。

* * *

注意：一般来说，在`onclick`属性上分配回调不是最佳实践；相反，您应该使用更简化的事件侦听器。这样，您可以将所有代码放在一个地方。例如：

HTML：

```
<input type="checkbox" id="checkAddress" /> 
```

JavaScript：

```
document.getElementById("checkAddress").addEventListener("click", checkAddress, false);

function checkAddress(event){
    checkbox = event.target;
    if (checkbox.checked){
        db.transaction(function(tx){
            tx.executeSql('INSERT INTO checkbox_ids (id) VALUES ('+checkbox.id+')');
        }, errorCallback, successCallback);
   }
}​ 
```

# xcode - 我可以在 xcode 中一次运行多个目标吗？

> ID：11947808
> 
> 赞同：0
> 
> 时间：2012-08-14T07:39:29.033
> 
> 标签：xcode

任何人都可以帮助我，我在工作区中使用多个项目，所以我想一次运行多个目标，如何添加多个目标并运行它？怎么做。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:53:54.937

选择要运行的目标的方案并运行它，

# javascript - 如何使用 jquery ajax 获取谷歌结果源代码

> ID：11947812
> 
> 赞同：0
> 
> 时间：2012-08-14T07:39:42.927
> 
> 标签：javascript, jquery, ajax, cross-domain

我想在我的网站上获得一些谷歌搜索结果，我知道我可以使用 curl、php 获得，但对于相同的 ip 地址，它每天都是有限的。而且我不想使用谷歌搜索 api，因为它也有限制。所以我认为我可以使用 jquery ajax，但我对此有点陌生，我受够了这个问题。这是我的代码，由于 jsonp 格式，它总是会出错，但也许仍然有一种方法可以捕获 html 源代码。我看到源代码出现在我的浏览器中，但我不能像对象一样接受它。我尝试了 xhr.responseText 等，但它也给出了 SyntaxError，但我仍然无法得到。如果您可以向我建议任何其他方式，或者您对以下代码有任何想法，请与我分享。之前谢谢

```
$.ajax({
    url:"http://www.google.com.tr/search?q=ercan", 
    dataType: 'jsonp', 

    success:function(json){
         // I know its wont never succes, because google gives source in html format
         alert("Success");
    },
    error:function(xhr){
         //I want to get source code html here, but its giving always parse end syntax error I cant get it
         console.log(xhr);
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:43:39.260

恐怕您唯一的选择是使用 API 或服务器端桥接脚本。如果服务器不支持 JSONP 或 CORS，则不能进行跨域 AJAX 调用。还有一个商业版本的 API，它允许您增加可以发送的请求的限制。

# algorithm - 细分二十面体 - 如何找到离任意点最近的顶点

> ID：11947813
> 
> 赞同：3
> 
> 时间：2012-08-14T07:39:51.047
> 
> 标签：algorithm, geometry

我有一个应用程序，它通过细分二十面体来创建球体的近似值。笛卡尔顶点坐标转换为球坐标，因此所有顶点都位于单位球体的表面上。

接下来我需要做的是找到离球体表面任意点最近的顶点。我想出了两个简单的算法......

1.  蛮力搜索 - 对于少数顶点来说可以，但对于更精细的细分来说会过度。

2.  排序/索引搜索 - 通过方位角和倾角将顶点排序为某种形式的顺序，然后创建一个粗略的索引以通过限制其范围来加速蛮力搜索。

我想知道是否有一种更微妙、希望性能更高的算法可以用来代替上述两种算法中的一种。

**更新 1：**我刚刚回忆起，对于应用程序的另一部分，顶点存储有关其邻居的信息。我的新算法是

1.  选择一个任意的起始顶点。找出它的哪个邻居与要定位的点的距离更小。使用这个邻居作为新的开始顶点。重复直到没有一个顶点的邻居与该点的距离更小。这个顶点离该点最近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:17:23.600

浏览回复，我想我可能不正确，但你所追求的很简单。我认为。

由于您只处理球体上的点，因此您可以从顶点到球体中心放下一条线，从任意点到中心放下另一条线并求解它们之间创建的角度。越小越好。我认为最简单和最便宜的方法是点积。角度基本上掉出来了。这是一个关于它的链接：[http](http://www.kynd.info/library/mathandphysics/dotProduct_01/) ://www.kynd.info/library/mathandphysics/dotProduct_01/ 为了测试它们，我建议选择一个顶点，测试它，然后测试它的邻居。它应该总是在最小邻居的方向上（随着你接近你所追求的顶点，角度应该总是减小）

无论如何，我希望这就是你所追求的。哦，我在寻找你的细分算法时遇到了这个页面。很难找到; 如果您可以发布指向它的链接，我认为这将比我自己提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:44:36.423

一种可能的解决方案是为顶点构建 BSP 树：[http ://en.wikipedia.org/wiki/Binary_space_partitioning](http://en.wikipedia.org/wiki/Binary_space_partitioning)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:45:04.010

如果二十面体在北极有一个顶点，在南极有一个顶点，则在平行于赤道的平面上，每组 5 个顶点有 2 组。通过一点几何，我认为这些平面位于 N/S 57.3056°（小数，而不是 dd.mmss）。这将您的二十面体分为 4 个纬度区域；

*   任何 28.6528° 的北（南）角都最接近最近极点的顶点；
*   赤道和北（南）28.6528°之间的任何东西都更接近该区域的5个顶点之一。

我正在像导航员一样工作，弧线以度数测量并表示南北；如果您更喜欢数学惯例，您可以很容易地将这一切转换为您的球坐标版本。

我怀疑，虽然我没有编码，但检查到 5 个顶点的距离并选择最近的将比基于将球体表面划分为二十面体面的投影或投影的更复杂的方法更快球体上的点回到二十面体并在该坐标系中解决问题。

例如，您在更新 1 中建议的方法将需要至少计算到 6 个顶点（第一个，任意选择的一个及其 5 个邻居）的距离。

用笛卡尔坐标还是球坐标计算距离都没有关系（如果您只想知道哪个顶点最近）。但是，笛卡尔坐标中的计算避免了对三角函数的大量调用。

另一方面，如果你没有在你的球体的两极安排你的二十面体，那么，你应该有！

# android - 如何通过代码更改 Android 浏览器应用的主页？

> ID：11947818
> 
> 赞同：3
> 
> 时间：2012-08-14T07:40:02.997
> 
> 标签：android, browser, sharedpreferences

我到处查看，包括这篇文章： [如何在应用程序中更改默认的 Android 浏览器主页？](https://stackoverflow.com/questions/9524494/how-to-change-the-default-android-browsers-homepage-within-an-app)

我仍然没有找到改变浏览器应用主页的方法。

我确信这是可以做到的，因为我看到了可以做到这一点的应用程序。

查看 BrowserSettings 类的 android 源代码后，我尝试使用以下命令覆盖浏览器应用程序的设置：

```
try {
    Context browserContext = createPackageContext("com.android.browser", Context.CONTEXT_IGNORE_SECURITY);
SharedPreferences sp = browserContext.getSharedPreferences("com.android.browser_preferences", Context.MODE_WORLD_WRITEABLE);

    Editor edidor = sp.edit();
    edidor.putString("homepage", "http://www.newhomepage.com");
    edidor.commit();

} catch (NameNotFoundException e) {
    e.printStackTrace();
} 
```

但我在调用 getSharedPreferences() 时收到警告：

> 未经许可尝试读取首选项文件 /data/data/com.android.browser/shared_prefs/com.android.browser_preferences.xml

调用 commit() 时出现此错误：

> 无法将文件 /data/data/com.android.browser/shared_prefs/com.android.browser_preferences.xml 重命名为备份文件 /data/data/com.android.browser/shared_prefs/com.android.browser_preferences.xml.bak

但是我确实请求权限：`<uses-permission android:name="com.android.launcher.permission.READ_SETTINGS" /> <uses-permission android:name="com.android.launcher.permission.WRITE_SETTINGS" />`

任何人都可以想出一种方法来完成这项工作吗？或不同的方法？

# php - 在我的另一个网站上显示特定的 Div

> ID：11947820
> 
> 赞同：1
> 
> 时间：2012-08-14T07:40:19.557
> 
> 标签：php, javascript

我有两个网站 abc.com 内容 div，id 为“abc”，另一个网站 def.com。ID 为“def”的内容 div。Qns 是如何将 id='abc' 的 div 内容显示到 div id='def' 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:42:21.087

那么你需要抓取 abc.com 的内容，然后搜索 dom 元素以找到 div "abc"，获取其内容并将其放入另一个站点的 def div 中。用于抓取使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:42:24.663

这是不可能的，原因是读取内容需要调用一些ajax请求。ajax 永远不会在跨域之间工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:46:02.850

你想要做的事情叫做`webpage scrapping`. 您不能单独使用客户端 Javascript 来执行此操作，因为它会产生跨域错误。但是您可以使用 node.js - 服务器端 javascript。

[http://net.tutsplus.com/tutorials/javascript-ajax/web-scraping-with-node-js/](http://net.tutsplus.com/tutorials/javascript-ajax/web-scraping-with-node-js/)

# android - 将 Worklight 应用程序部署到 Android 模拟器上会出现错误

> ID：11947821
> 
> 赞同：0
> 
> 时间：2012-08-14T07:40:21.053
> 
> 标签：android, android-emulator, dojo, cordova, ibm-mobilefirst

我正在尝试使用 Worklight 将应用程序部署到 Android。

我之前看到过与此帖子类似的错误，但是没有给出任何具体答案。当我在 Android 模拟器上启动应用程序时触发错误，就是这样：

08-13 08:22:26.262：E/Web 控制台（347）：TypeError：表达式“cordova.exec”未定义的结果不是函数。在 file:///data/data/com.Test/files/www/default/wlclient/js/wlgap.android.js:697

现在，我相信这个 js 文件是在运行时注入的，因此我不确定如何以及在哪里编辑它。

后来抛出的错误是这样的：

08-13 08:22:30.982：E/Web 控制台（347）：TypeError：表达式“h.body（）”未定义的结果不是对象。在 file:///data/data/com.Test/files/www/default/dojo/mobile-ui-layer.js:257

所以问题在于 Dojo 和/或 Cordova-PhoneGap。问题是，我如何绕过它并让我的应用程序正常工作？

我相信这可能是 wlCommonInit 的问题，因为在调用它之前它不能有任何东西，但是，我在它遇到它之前解析 Dojo。如果我在遇到此问题之前不解析 Dojo，则会收到大量 Dojo 解析错误。

任何帮助都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:18:18.133

可以在android原生项目中看到wlgap.android.js。您应该将 Dojo 代码放在 wlCommonInit（或 wlEnvInit）中，并且不需要检查 dom 或设备是否准备就绪（Worklight 运行的进程会在触发 wlCommonInit 之前对其进行测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:21:11.017

确保您的所有 Dojo 解析都在 wlCommonInit 中完成 - 这意味着将加载解析设置为 false 并在 wlCommonInit 中以编程方式进行。

# java - 如何使用 JavaScript 单击 Selenium WebDriver 中的元素？

> ID：11947832
> 
> 赞同：44
> 
> 时间：2012-08-14T07:41:16.437
> 
> 标签：java, javascript, button, click, selenium-webdriver

我有以下 HTML：

```
<button name="btnG" class="gbqfb" aria-label="Google Search" id="gbqfb"><span class="gbqfi"></span></button> 
```

我的以下用于单击“Google 搜索”按钮的代码在 WebDriver 中使用 Java 运行良好。

```
driver.findElement(By.id("gbqfb")).click(); 
```

我想使用带有 WebDriver 的[JavaScript](http://en.wikipedia.org/wiki/JavaScript)来单击按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-08-14T15:49:49.567

通过 JavaScript 执行点击有一些您应该注意的行为。例如，如果绑定到`onclick`元素调用事件的代码`window.alert()`，您可能会发现 Selenium 代码挂起，具体取决于浏览器驱动程序的实现。也就是说，您可以使用`JavascriptExecutor`该类来执行此操作。然而，我的解决方案与其他提出的解决方案不同，因为您仍然可以使用 WebDriver 方法来定位元素。

```
// Assume driver is a valid WebDriver instance that
// has been properly instantiated elsewhere.
WebElement element = driver.findElement(By.id("gbqfd"));
JavascriptExecutor executor = (JavascriptExecutor)driver;
executor.executeScript("arguments[0].click();", element); 
```

`click()`您还应该注意，使用接口的方法可能会更好`WebElement`，但在实例化驱动程序之前[禁用本机事件。](https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities)这将实现相同的目标（具有相同的潜在限制），但不会强迫您编写和维护自己的 JavaScript。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T08:13:50.067

这是使用 JavaScript 单击 WebDriver 中的按钮的代码：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;
jse.executeScript("document.getElementById('gbqfb').click();"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-18T17:59:27.920

我知道这不是 JavaScript，但您也可以实际使用鼠标单击来单击动态 Javascript 锚点：

```
public static void mouseClickByLocator( String cssLocator ) {
     String locator = cssLocator;
     WebElement el = driver.findElement( By.cssSelector( locator ) );
     Actions builder = new Actions(driver);
     builder.moveToElement( el ).click( el );
     builder.perform();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-16T19:30:05.250

不确定OP的答案是否真的得到了回答。

```
var driver = new webdriver.Builder().usingServer('serverAddress').withCapabilities({'browserName': 'firefox'}).build();

driver.get('http://www.google.com');
driver.findElement(webdriver.By.id('gbqfb')).click(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T08:18:11.077

您不能使用 WebDriver 在 JavaScript 中执行此操作，因为 WebDriver 是一种 Java 工具。但是，您可以使用 WebDriver 从 Java 执行 JavaScript，并且可以调用一些单击特定按钮的 JavaScript 代码。

```
WebDriver driver; // Assigned elsewhere
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("window.document.getElementById('gbqfb').click()"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-09T05:09:06.147

通过 XPath：检查目标页面上的元素，复制 Xpath 并使用以下脚本：为我工作。

```
WebElement nameInputField = driver.findElement(By.xpath("html/body/div[6]/div[1]/div[3]/div/div/div[1]/div[3]/ul/li[4]/a"));
JavascriptExecutor executor = (JavascriptExecutor)driver;
executor.executeScript("arguments[0].click();", nameInputField); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-05T03:36:31.017

```
const {Builder, By, Key, util} = require('selenium-webdriver')

// FUNÇÃO PARA PAUSA
function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function example() {

    // chrome
    let driver = await new Builder().forBrowser("firefox").build()
    await driver.get('https://www.google.com.br')
    // await driver.findElement(By.name('q')).sendKeys('Selenium' ,Key.RETURN)

    await sleep(2000)

    await driver.findElement(By.name('q')).sendKeys('Selenium')

    await sleep(2000)

    // CLICAR
    driver.findElement(By.name('btnK')).click()

}
example() 
```

Com essas últimas linhas, você pode clicar ！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-01T09:54:29.147

此代码将`WebElement`在 100 毫秒后对“我们”执行点击操作：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor)driver;

jse.executeScript("var elem=arguments[0]; setTimeout(function() {elem.click();}, 100)", we); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-11T23:32:11.087

另一个最简单的解决方案是使用 `Key.RETUEN`

点此[查看详细解决方案](https://www.youtube.com/watch?v=JFW3TnVuYNI "点击查看详细解决方案")

`driver.findElement(By.name("q")).sendKeys("Selenium Tutorial", Key.RETURN);`

* * *

## 回答 #10

> 赞同：-13
> 
> 时间：2014-09-23T17:53:03.983

跨浏览器测试java脚本

```
public class MultipleBrowser {

    public WebDriver driver= null;
    String browser="mozilla";
    String url="https://www.omnicard.com";

    @BeforeMethod
    public void LaunchBrowser() {

        if(browser.equalsIgnoreCase("mozilla"))
            driver= new FirefoxDriver();
        else if(browser.equalsIgnoreCase("safari"))
            driver= new SafariDriver();
        else if(browser.equalsIgnoreCase("chrome"))
            //System.setProperty("webdriver.chrome.driver","/Users/mhossain/Desktop/chromedriver");
            driver= new ChromeDriver(); 
        driver.manage().timeouts().implicitlyWait(4, TimeUnit.SECONDS);
        driver.navigate().to(url);
    }

} 
```

但是当你想运行 Firefox 时，你需要禁用 chrome 路径，否则浏览器会启动但应用程序可能不会。（尝试两种方式）。

# backbone.js - 在主干.js 中使用自定义元属性实例化 Rails 模型

> ID：11947838
> 
> 赞同：0
> 
> 时间：2012-08-14T07:41:53.677
> 
> 标签：backbone.js, ruby-on-rails-3.2

我想在基于 Rails 模型的 Backbone 视图中创建表单字段以及 Rails 模型验证，而不需要模板。为此，我使用了 JBuilder，例如：

```
1 json.(@recipient, :firstName,
2       :lastName,
3       :street1,
4       :street2,
5       :city,
6       :state,
7       :zip,
8       :phone1,
9       :phone2)
10 json.required Recipient.validators[0].attributes
11 json.fields Recipient.accessible_attributes.reject {|x| x==""}
12 json.states [ 
13               ['Alabama', 'AL'],
14               ['Alaska', 'AK'],
15               ['Arizona', 'AZ'],
16               ['Arkansas', 'AR'],
                 ...
64               ['Wyoming', 'WY']
65             ] 
```

我敢肯定，你可以看到我要去哪里...

因此，目标是遍历字段并将我的输入附加到 DOM，并根据 model.required 数组进行相应的样式设置。当然，states 字段可以动态地将选项插入到状态选择的选择中。验证肯定只是由服务器对错误的响应真正执行（实际上并不关心在客户端上执行此操作，但我想我可以），只需读取错误响应即可。

所以这个问题，我猜应该是：

1) 我是否只在 View 构造函数中实例化 Backbone 模型？

2）你会这样做吗：

```
this.model.fetch({url:'/recipients/new', 
  success:function(index,model)
   {
     this.model = model.responseText
   }
}); 
```

更好的方法来做到这一点？我确实看到[了 powmedia/backbone-forms](https://github.com/powmedia/backbone-forms)虽然这对我来说似乎是双重工作，而且我必须解决其他事情，当然，我必须重新定义客户端上的所有内容。

*如果仅此而已，至少这对于其他有类似想法的人来说是一个参考点（我找不到任何关于此的内容）*

## 可能的解决方案？

*咖啡稿：*

```
1 class Senditbacklater.Models.Recipient extends Backbone.Model
2   
3   url: '/recipients'
4   
5   initialize: ->
6     $.getJSON('/recipients/new', (data) =>
7       $.each(data, (key,val) =>
8         obj = {}
9         obj[key] = val
10         this.set(obj)
11       ) 
12     ) 
```

然后我应该很好去在 Views 渲染中创建表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:19:11.183

你的情况并不特殊，你唯一需要做的就是改变你的观点：你只是在处理一个`Model`必须从服务器*获取**并*在`View`.

渲染非常复杂，这是真的，你必须在你的视图代码中工作来解决它。

你可以尝试这样的事情：

```
// code simplified and no tested
var MyForm = Backbone.Model.extend({
  url: "/recipients/new"
});

var MyFormView = Backbone.View.extend({
  initialize: function(){
    this.model.on( "reset", this.render, this );
  },

  render: function(){
    _.each( this.model.fields, function( field ){
      this.$el.find( ".fields" ).append( "<label>" + field + "</label><input name=\"" + field + "\" />" );
    }, this );

    // ... more render logic here

    return this;
  }
});

var myForm = new MyForm();
var myFormView = new MyFormView({ el: "#form", model: myForm }); 
```

此代码取决于这样的 HTML：

```
<form id="form">
  <div class="fields"></div>
</form> 
```

当然，这是一个非常简化的示例，还有更*优雅*的解决方案，例如为任何*领域*的家族委派*子视图*，但我只是想为您提供一个起点。

# c++ - 指向浮点数的短指针

> ID：11947840
> 
> 赞同：3
> 
> 时间：2012-08-14T07:41:56.033
> 
> 标签：c++

我在 C++ 中运行这段代码：

```
#include <iostream>
using namespace std;
int main()
{
    float f = 7.0;
    short s = *(short *)&f;
    cout << sizeof(float) << endl
         << sizeof(short) << endl
         << s << endl;
    return 0;
} 
```

我得到以下出锅：

```
4
2
0

```

但是，在斯坦福大学的一次演讲中，Jerry Cain 教授说他确信底池不会是 0。

讲座会很喜欢[这里](http://www.youtube.com/watch?v=jTSvthW34GU&feature=BFa&list=PL9D558D49CA734A02)。他说，大约 48 分钟。

他是错的，还是从那以后发生了一些标准变化？还是平台之间有区别？
我正在使用 g++ 编译我的代码。

**编辑：**在下一次讲座中，他确实提到了“大端”和“小端”，并说它们会很好地影响结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:51:39.047

```
static void bitPrint(float f)
{
    assert(sizeof(int) == sizeof(float));
    int *data = reinterpret_cast<int*>(&f);
    for (int i = 0; i < sizeof(int) * 8; ++i)
    {
        int bit = (1 << i) & *data;
        if (bit) bit = 1;
        cout << bit;
    }
    cout << endl;
}

int main()
{
    float f = 7.0;
    bitPrint(f);
    return 0;
} 
```

该程序打印`00000000000000000000011100000010`

由于`sizeof(short) == 2`在您的平台上，您会得到前 2 个字节，它们都是零

请注意，由于类型的大小和可能的浮点实现（不确定）是实现定义的，因此可以在不同的平台上看到不同的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:50:56.157

走着瞧。首先，您将浮点数写入内存。它占用 4 个字节，其值为 7。内存中的浮点数看起来像“符号位 -> 指数位 -> 尾数位”。我不确定每个部分到底有多少位，这可能取决于您的平台。

由于浮点数的值为 7，它只占用右侧的一些最低有效位（我假设为大端）。

您的`short`指针指向浮点数的开头，这意味着最高有效位。由于该值大于 0，因此符号位为零。由于浮点值在最右边，我们可以说这两个最重要的字节用零填充。

现在，假设大小`short`为 2，这意味着我们将只从 float 的 4 个字节中取出两个字节，我们得到我们的`0`.

不过我相信，这个结果相当 UB，并且在不同的平台、编译器等上可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:50:24.600

通过指向与存储为不同类型的指针访问数据会给出（除了少数特殊情况）未定义的行为。

首先，它取决于平台，它存储的数据如何存储，因此不同的系统可能会给出不同的值，其次，编译器可能会生成甚至看不到您期望的值的代码，因为当您这样做时，它可以做任何它喜欢的事情（由于严格的别名规则，这是未定义的行为）。

话虽如此，您看到的数字可能是有效的，但您不能依赖它，除非您明确知道您的平台会按照您的预期行事，这不受标准的保证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:53:04.007

他“非常”确定它不为零，他明确地说。

但是，考虑到短的表示可以是大端或小端，我不会那么肯定。无论如何，这是五十分钟演讲结束时的一句台词，所以我们可以原谅他一点。可能是他在下一次讲座中回来澄清。

您需要（至少）逐字节检查底层位以了解发生了什么。

# javascript - 使用 jquery 从 Json 获取数据

> ID：11947844
> 
> 赞同：0
> 
> 时间：2012-08-14T07:42:08.847
> 
> 标签：javascript, jquery, json

我有以下 json 数据，位于 url`http://localhost/stock/index.php/masterfiles/itemgriddata`

```
[{"name":"asdasd","code":"123","id":"1","unit":"Nos","purprice":"25000"},{"name":"Item2","code":"1235","id":"2","unit":"Nos","purprice":"0"}] 
```

我想获取 的值`name`和等于的值`code`，并使用 jquery 将它们存储为变量。`id``1`

我知道有一种方法，例如，

```
$.getJSON('http://localhost/stock/index.php/masterfiles/itemgriddata', function(data) {
  console.log(data);
}); 
```

但我不知道如何实现它。任何人都可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:45:01.817

```
$.getJSON('http://localhost/stock/index.php/masterfiles/itemgriddata', function(data) {
  $.each(data, function(index, val) {
      if( val.id == '1'){
        var name = val.name,
            code = val.code,
            unit = val.unit,
            purprice = val.purprice,
            id = val.id;
      }
  })
}); 
```

但是，如果您想将所有结果存储在数组中，那么：

```
var dataarr = [];
$.getJSON('http://localhost/stock/index.php/masterfiles/itemgriddata', function(data) {
  $.each(data, function(index, val) {
      if( val.id == '1'){
        dataarr.push(
            val.name,
            val.code,
            val.unit,
            val.purprice,
            val.id;
       );
  })
}); 
```

有关更多详细信息，请参阅***[doco](http://api.jquery.com/jQuery.getJSON/)***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:51:18.297

您可以遍历数组并检查 id 为“1”的对象

```
arr = [{"name":"asdasd","code":"123","id":"1","unit":"Nos","purprice":"25000"},{"name":"Item2","code":"1235","id":"2","unit":"Nos","purprice":"0"}]

$.each(arr, function(i,ele){
 if (ele.id =="1"){
  alert(ele.name)
  alert(ele.code)
 }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:52:41.383

您可以尝试以下方法：

```
$.getJSON('http://localhost/stock/index.php/masterfiles/itemgriddata', function(data) {
  var results = [];

  $.each(data, function(key, val) {
    if (val.id === "1") {
        results.push(val.name);
        results.push(val.code);
    }
  });
  // Then you can do whatever you want to do with results
}); 
```

# node.js - NodeJS url.parse(url).query

> ID：11947854
> 
> 赞同：7
> 
> 时间：2012-08-14T07:42:44.317
> 
> 标签：node.js

在 nodejs 文档中：

> 查询：查询字符串的“参数”部分，或查询字符串解析的对象。示例：**`'query=string'`**或**`{'query':'string'}`**

链接：[NodeJS URL](http://nodejs.org/api/url.html#url_url)

这部分令人困惑。

1.  什么时候会**`'query=string'`**发生？
2.  这 **`{'query':'string'}`**也将在什么时候发生？

我已经看到，当我这样做时，`url.parse()`它会自动将参数转换为对象。如果我只支持一种格式，我的代码就会出错。

我怎么知道是否`url.parse()`以这种格式转换参数：**`'query=string'`**？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T07:51:37.923

```
url.parse(urlStr, [parseQueryString], [slashesDenoteHost]) 
```

如果您`true`作为第二个参数传递，它还将使用`querystring`模块解析查询字符串，您将获得一个 object `{'query':'string'}`，否则将不会解析查询字符串（默认行为），您将获得`query=string`.

# python - PIL 直方图引发缓冲区溢出。我该如何规避这个？

> ID：11947855
> 
> 赞同：1
> 
> 时间：2012-08-14T07:42:45.967
> 
> 标签：python, image-processing, python-imaging-library, histogram

我想用 Python 从 16 位灰度图像生成直方图。当我运行以下代码时，出现缓冲区溢出。

```
#!/usr/bin/python

from PIL import Image
import numpy as np

i = Image.open('t.tif')
a = i.histogram()

print a 
```

错误消息（缩短）

```
tdettmer@thinkpad:~/code/histogram$ ./h.py 
*** buffer overflow detected ***: /usr/bin/python terminated
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(__fortify_fail+0x37)[0x7f3f33ed6007]
/lib/x86_64-linux-gnu/libc.so.6(+0x107f00)[0x7f3f33ed4f00]
/usr/lib/python2.7/dist-packages/PIL/_imaging.so(ImagingHistogramNew+0x33) 
```

现在，我完全可以看到从 16 位图像生成直方图会占用大量资源，但我能以某种方式规避这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:01:10.117

由于您似乎已经在使用 numpy，因此值得指出的是它有自己的[histogram 函数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogram.html)。您可以在[将 PIL 图像转换为 numpy 数组](https://stackoverflow.com/questions/384759/pil-and-numpy)后使用它。也许他们的直方图实现会更有资源效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:52:14.187

由于 PIL 的直方图方法在 16 位图像上似乎都很奇怪，所以我编写了自己的函数来生成直方图。我有 12 位的显微图像，这些图像存储在 16 位 tiff 文件中。所以这个 tiff 内的最大灰度值为 4096。

打开图像并读取像素的函数：

```
def getPixels(file):
    img = Image.open(file)

    pixels = img.load()
    width, height = img.size

    all_pixels =  []

    for x in range(width):
        for y in range(height):
            cpixel = pixels[x, y]
            all_pixels.append(cpixel)

    return all_pixels 
```

...生成直方图：

```
def generateHistogram(file, z):
    px = getPixels(file)
    a = np.histogram(px, bins=np.arange(z)) 
```

# javascript - 使用 jQuery 构建 Windows 8 Metro 应用程序

> ID：11947858
> 
> 赞同：20
> 
> 时间：2012-08-14T07:42:55.413
> 
> 标签：javascript, jquery, html, windows-8, microsoft-metro

我刚开始使用 HTML/JS 进行 Windows 8 开发。在过去的几个月里，我一直沉浸在针对汽车音响主机和电视的应用程序的 jQuery 开发中。

跳进去，我认为过渡会很简单。我的网站的设计和结构大部分都已弄清楚，并希望遵循我在以前的工作中使用的一些做法。

也就是说，我想基本上创建一个单页应用程序。主要的 default.html 文件将包含顶部导航/标题和另一个 div。另一个 div 将用于加载所有其他页面，项目中所有单独的 HTML 文件。

所有全局函数和主要功能都将驻留在 javascript 文件 application.js 中。然后任何特定于页面的 javascript 将驻留在每个 HTML 文件的顶部。

我很快意识到这是一个问题。使用 jQuery.load() 加载我的页面会导致我的应用程序出现安全错误。

> JavaScript 运行时错误：无法添加动态内容。脚本试图注入可能不安全的动态内容或先前动态修改的元素。例如，使用 innerHTML 属性添加脚本或格式错误的 HTML 将生成此异常。使用 toStaticHTML 方法过滤动态内容，或使用 createElement 等方法显式创建元素和属性。

我真的希望避免学习一堆微软特有的东西。我认为他们提供了很多工具而没有提供很多工具很棒，也许我只是没有足够地使用它们，但是对于我以及我正在尝试做或已经可以完成的事情来说，一切都感觉太僵硬了用 jQuery。我喜欢确切地知道正在发生的事情并完全控制它。

还翻阅了模板和示例项目，我真的不喜欢所有重复的代码。例如，每个 HTML 文件都声明了所有相同的引用。我只想写一次我的引用和标题栏之类的部分，而不必在我的项目中复制/粘贴该代码。

有没有办法按照我希望的方式做事，并创建一个单页应用程序？他们有自己的 jQuery 的 .load() 替代品吗？

任何为我指明正确方向的帮助将不胜感激！

编辑 2012 年 8 月 14 日：

我已经尝试使用这个问题的修复： [Using jQuery with Windows 8 Metro JavaScript App会导致安全错误](https://stackoverflow.com/questions/10859523/using-jquery-with-windows-8-metro-javascript-app-causes-security-error)

这消除了安全警告，我可以使用 jQuery.load() 加载 HTML。但是，查看 DOM 资源管理器，我的 HTML 被剥离了我的脚本。

我还尝试将我的 .load() 调用包装在 MSApp.execUnsafeLocalFunction() 中，但我的文件仍然被剥离了所有脚本。是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T02:43:25.950

我通过简单地更改导致错误的 jQuery 行来修复。

jQuery-1.8.0，第 5566 行：

```
 append: function () {
        return this.domManip(arguments, true, function (elem) {
            if (this.nodeType === 1 || this.nodeType === 11) {
                self.appendChild(elem);  // problem line
            }
        });
    }, 
```

变成：

```
 append: function () {
        return this.domManip(arguments, true, function (elem) {
            if (this.nodeType === 1 || this.nodeType === 11) {
                var self = this;
                MSApp.execUnsafeLocalFunction(function () {
                    self.appendChild(elem);
                });
            }
        });
    }, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T04:35:08.420

有一种“正式”的方式来做你正在寻找的事情。
提供 WinJS.Navigation 以支持“单页应用程序”。例如，`default.html`将包含一个标记，该标记表示动态加载的页面内容的去向：

```
<div id="contenthost" 
    data-win-control="Application.PageControlNavigator" 
    data-win-options="{home: '/pages/home/home.html'}">
</div> 
```

在上面的示例中，实际加载的内容页面位于`/pages/home/home.html`

在事件处理程序中，您可以简单地执行以下操作`load`或导航到另一个页面：

```
WinJS.Navigation.nav("/pages/other/page.html"); 
```

没错，它不是 jQuery，但效果很好 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:35:22.393

根据您的应用程序，如果您不打算访问任何 WinRT 组件，您可以将页面导航到 ms-appx-web，这将更改页面周围的安全策略，但您无法从启动时指定此内容。您必须进行导航，并利用新的安全上下文。

另一个选项是使用 msWWA.execUnsafeLocalFunction 函数包装对 JQuery 的调用，这将使所有不安全的代码都被推入 DOM

# javascript - 我应该在我的网站中包含“无前缀”插件吗

> ID：11947861
> 
> 赞同：6
> 
> 时间：2012-08-14T07:43:07.440
> 
> 标签：javascript, html, css

[Prefix-free](http://leaverou.github.com/prefixfree/)是 Lea Verou 的一个很酷的插件。它可以帮助开发人员编写没有前缀的 CSS3 选择器。我想知道是否值得将它包含在我的网站中。

我有一个带有一些 CSS3 的网站，我想知道加载页面加载后更改 CSS 的 JS 文件是否会降低页面的渲染速度并影响客户端性能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T07:51:08.577

当然，更改您的 CSS 的 Javascript 的执行会降低您网站的性能，无论是在 javascript 执行时间还是您网站的（重新）渲染速度方面。

让 javascript 检查和更改所有 CSS 的成本非常高。我更喜欢像[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)这样的预处理器，它们可以让你编写无前缀的 CSS 并在将其交付给客户端之前生成相应的前缀 CSS。当然，这有一个缺点是要传输更大的 css 文件，但这仍然是我更喜欢的解决方案。

您不需要为自己编写必要的 mixin，基本上有无数的扩展可以为您完成工作并提供现成的 mixin。

就在我的脑海中：为了更少，可以使用[http://lessprefixer.com/](http://lessprefixer.com/) - 对于 Sass [http://compass-style.org/](http://compass-style.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:51:22.040

是的，您可以预期页面加载时间和可能[的 FOUC](http://www.bluerobot.com/web/css/fouc.asp/)会减少。

如果您不想损害最终用户体验，我建议您使用[LESS](http://lesscss.org/)等工具。Less 使您能够编写更紧凑、更易于管理的 css 标记，在从服务器发送到客户端之前将其转换为常规 css。它将轻松处理 css-prefix 问题。

# hibernate - 在表中查找最后一个元素时出现休眠问题

> ID：11947865
> 
> 赞同：0
> 
> 时间：2012-08-14T07:43:23.947
> 
> 标签：hibernate, hql

我试图找到插入到表中的最后一个元素。

我试着这样写：

```
m_query = m_session.createQuery("LAST(bankAccount) FROM AccountStatus"); 
```

通缉记录的名称是bankAccount，表的名称是AccountStatus

我应该如何正确写？

非常感谢，

ps

这是一个休眠查询

以利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:36:13.983

如果你的表中有 id，你可以通过 max id 找到最后一个元素

```
m_query = m_session.createQuery("max(id) FROM AccountStatus"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:18:34.053

关系模型中的“表”已经设置了语义。没有“最后一个”元素，排序可以是任意的。您需要引入一个排序标准，例如插入日期的时间戳。有不同的可能实现方式。您可以通过一个简单的只读（对于用户，而不是 Hibernate！）字段在 Java 对象模型上执行此操作，该字段被初始化为当前时间，通过数据库级​​别的触发器或 Hibernate 生命周期侦听器。然后，您可以轻松获取具有最新插入日期的实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:27:12.927

如果表中存在自动增量 id 列，您还可以使用：

```
m_query = m_session.createQuery("a1.bankAccount FROM AccountStatus a1 where not exists (a2.bankAccount FROM AccountStatus a2 where a2.id>a1.id)"); 
```

# c++ - 将 c++ (DLL) 项目转换为 COM DLL 项目

> ID：11947870
> 
> 赞同：3
> 
> 时间：2012-08-14T07:43:48.173
> 
> 标签：c++, windows, visual-studio, com

嗨，我有一个纯 C++ 项目 (DLL)，我想将其转换为 COM 项目，例如，在标头中定义的所有公共接口现在都将公开为 COM 接口（IDL 等...）。最终产品应该是COM Dll。

我该如何开始？如何定义任何高级指南？好文章？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:51:13.187

这个问题至少有两个部分：

首先，COM 对象是使用[CoCreateInstance](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686615%28v=vs.85%29.aspx)创建的。CoCreateInstance 在内存中查找 COM 注册（通过[CoRegisterClassObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693407%28v=vs.85%29.aspx)），在应用程序清单中作为零注册 COM 对象，最后在注册表中。

对于零注册，创建一个描述您的 dll 的[程序集清单](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374219%28v=vs.85%29.aspx)，以便您的对象的消费者可以添加一个依赖程序集引用到他们的[应用程序清单](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374191%28v=vs.85%29.aspx)。

那么，一个 COM dll 至少需要两个入口点：[DllGetClassObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680760%28v=vs.85%29.aspx)和[DllCanUnloadNow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690368%28v=vs.85%29.aspx)

您`DllGetClassObject`通过创建工厂对象的实例来实现 - 支持`IClassFactory`- 可用于制作实际对象的实例。

所以，总结一下——一种实现 COM dll 的 TDD 驱动方法：

1.  使用“DllGetClassObject”和“DllCanUnloadNow”入口点创建一个 DLL。
2.  创建一个新的 GUID 来表示您的对象，并创建一个程序集清单来描述您的 dll（将）包含的 COM 对象。
3.  `CoCreateInstance`创建一个使用该 GUID调用的测试应用程序。
4.  调用 CoCreateInstance 现在应该在您的 DllGetClassObject 调用中着陆。实现类工厂对象。
5.  实现[CreateInstance](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682215%28v=vs.85%29.aspx)方法以创建 c++ 类的新实例。确保您的所有接口都来自（至少）IUnknown。在您自己新创建的对象上调用 QueryInterface 以获取并返回所需的接口。

* * *

假设 Visual Studio（Express 可以）是您的构建环境：

创建一个测试exe：

```
// main.cpp
#include <windows.h>
#include <objbase.h>
#include <initguid.h>
DEFINE_GUID(CLSID_RegFreeOcx,0x00000000,0x0000,0x0000,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00);
#if defined _MSC_VER 
#if !defined _WINDLL && !defined (_CONSOLE)
#pragma comment(linker, "/subsystem:windows /ENTRY:mainCRTStartup")
#endif
#endif
#pragma comment(linker, "/manifestDependency:\"name='acme.RegFreeOcx' processorArchitecture='*' version='1.0.0.0' type='win32' \"")
int main(){
  CoInitialize(NULL);
  IUnknown* pUnk;
  CoCreateInstance(CLSID_RegFreeOcx,NULL,CLSCTX_ALL,IID_IUnknown,(void**)&pUnk);
  if(pUnk)
    pUnk->Release();
} 
```

为 COM dll 的无注册激活创建清单：

```
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity name="Acme.RegFreeOcx" processorArchitecture="x86" version="1.0.0.0" type="win32" />
  <file name = "RegFreeOcx.dll">
    <comClass clsid="{00000000-0000-0000-0000-000000000000}" threadingModel="Apartment" />
  </file>
</assembly> 
```

创建一个dll项目

```
// dllmain.cpp
#include <windows.h>
#pragma comment(linker,"/export:DllGetClassObject=_DllGetClassObject@12,PRIVATE")
#pragma comment(linker,"/export:DllCanUnloadNow=_DllCanUnloadNow@0,PRIVATE")
#include <objbase.h>
#include <initguid.h>
DEFINE_GUID(CLSID_RegFreeOcx,0x00000000,0x0000,0x0000,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00);
#include "MyClassFactory.hpp"

STDAPI DllGetClassObject(REFCLSID clsid, REFIID riid,void** ppvObj)
{
  if(CLSID_RegFreeOcx == clsid){
    MyClassFactory* pFactory = new MyClassFactory();
    HRESULT result = pFactory->QueryInterface(riid,ppvObj);
    pFactory->Release();
    return result;
  }
 return E_FAIL;
}
STDAPI DllCanUnloadNow()
{
  return E_FAIL;
}

//MyClassFactory.hpp
#include <MyClass.hpp>
class MyClassFactory : public IClassFactory {
  volatile ULONG _cRef;
public:
  MyClassFactory():_cRef(1){}
  virtual ~MyClassFactory(){}
public: // IUnknown
  STDMETHODIMP_(ULONG)AddRef(){
    return InterlockedIncrement(&_cRef);
  }
  STDMETHODIMP_(ULONG)Release(){
    ULONG result = InterlockedDecrement(&_cRef);
    if(!result) delete this;
    return result;
  }
  STDMETHODIMP QueryInterface(REFIID riid, void** ppvObj){
    if(riid == IID_IUnknown || riid == IID_IClassFactory)
      *ppvObj = (IClassFactory*)this;
    else { 
      *ppvObj=0;
       return E_NOINTERFACE;
    }
    AddRef();
    return S_OK;
  }
public: // IClassFactory
  STDMETHODIMP CreateInstance(IUnknown* pUnkOuter,REFIID riid,void** ppvObj){
    if(pUnkOuter)
      return E_INVALIDARG;
    MyClass* pClass = new MyClass();
    HRESULT result = pClass->QueryInterface(riid,ppvObj);
    pClass->Release();
    return result;
  }
  STDMETHODIMP LockServer(BOOL fLock){
    return E_NOTIMPL;
  }
}; 
```

最后，定义你自己的类。您可以使用 IDL 来执行此操作，但对于其他 cpp 使用者，您可以在头文件中定义它。

```
// IMyClass.h
#include <objbase.h>
DEFINE_GUID(IID_MyInterface,0x00000000,0x0000,0x0000,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00);
interface IMyInterface : IUnknown {
  STDMETHOD(MyMethod)(void)PURE;
}; 
```

在 cpp 文件中实现实现 IMyInterface 的类的实现方式与实现 ClassFactory 的方式非常相似（就 IUnknown 方法而言） - 用您自己的接口交换对 IClassFactory 的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:13:02.160

规范的温和介绍是Dale Rogenson 的[Inside COM](http://www.amazon.co.uk/Inside-COM-Dale-Rogerson/dp/1572313498/ref=pd_sim_b_1)。要获得真正的深度，请尝试[Don Box 的 Essential COM](http://www.amazon.co.uk/Essential-COM-Don-Box/dp/0201634465)

需要担心的三大领域是：

*   穿线
*   内存管理和内存所有权约定]
*   跨 COM 接口边界传递的类型 - 特别是不使用 STL

The Box book 还涵盖了人们使用 COM 做的一些*非常讨厌的事情——比如**免费的线程编组*器——如果你的库已经是线程安全的并且你想避免编组惩罚，那么你可能会适用它。

# android-image - 将 RGB 565（Android 图像）转换为 RGB 24(888) 图像

> ID：11947873
> 
> 赞同：1
> 
> 时间：2012-08-14T07:44:00.887
> 
> 标签：android-image, image-conversion

我需要将 Android 格式 (RGB 565) 图像转换为 RGB 24 格式，以避免在计算机上显示时分心。有什么建议么？如果有人可以帮助我的算法会很棒..谢谢

# c# - 如何在asp.net中显示来自服务器端的通知或消息？

> ID：11947874
> 
> 赞同：1
> 
> 时间：2012-08-14T07:44:07.047
> 
> 标签：c#, asp.net

如您所见*`I want to show to client some text which are most Important for Client's`*。所以我计划显示警报表单服务器端。为了实现这一点，我创建了**JScript 函数**，如下代码：

```
 function ShowMessage(s) {
        alert(s);
 } 
```

所以在 cs 代码中编写这个方法来调用**JS-Function**：

```
public static void ShowMessage(System.Web.UI.Page Pointer, string Message)
{
    if (!Pointer.ClientScript.IsStartupScriptRegistered("message"))
        Pointer.Page.ClientScript.RegisterStartupScript
            (Pointer.Master.GetType(), "message", "ShowMessage('" + Message + "');", true);
} 
```

**`This Code work well ;)`**

所以我尝试批准我的网络应用程序。和**`using Update-panel and Script-Manager`**。使用它们后我遇到了新问题。（将所有按钮放在更新面板中）

在每次*`Button-Click`*或更好的*`Post-back`*情况下，如果调用`ShowMessage`方法 ->**没有发生**。没有消息，没有警报！！！

问题 ：

*   为什么此代码在更新面板中不起作用？
*   如何解决这个问题？还是显示信息的更好方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:56:05.813

试试这个

```
public static void ShowMessage(System.Web.UI.Page Pointer, string Message)
{
    if (!Pointer.ClientScript.IsStartupScriptRegistered("message"))
      ScriptManager.RegisterStartupScript(Pointer,
                                          Pointer.Master.GetType(),
                                          "message", 
                                          "ShowMessage('" + Message + "');", 
                                          true);
} 
```

由于您使用的是更新面板，因此您之前使用的没有更新面板的功能不起作用，因为您的网页的页面生命周期在使用该更新面板控件后发生了变化，`Page.ClientScript`仅适用于传统的网页生命周期。

更多你可能想去[这里](http://msdn.microsoft.com/en-us/library/bb310408.aspx)。

# android - 如何在android中的选项卡方向更改时删除进度对话框

> ID：11947875
> 
> 赞同：1
> 
> 时间：2012-08-14T07:44:14.533
> 
> 标签：android

我创建了两个包含两个不同内容的选项卡。一个是视频流，另一个是列表视图。

tab1->视频流 tab2->listview。

在这里，我为 tab1 放置带有文本“缓冲视频”的进度对话框，为 listview 放置带有文本“正在加载”的进度对话框。它适用于纵向模式。在保持 tab2 的同时，当我将其方向更改为横向时，它显示“正在加载.. ＆＃34;＆＆＃34;缓冲＆＃34;。我怎样才能删除tab2（风景）的“缓冲”进度。？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:00:52.600

尝试在视图部分中的适配器中进行一些更改，例如应该编写所有列表项，就像我在纵向和横向模式下对我的工作正常一样

```
 public View getView(int position, View convertView, ViewGroup parent) {

            if (convertView == null) {
                convertView = ((LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.gallery_main_page_grid_item, parent, false);
            }
            Holder holder = new Holder();

            AQuery aq = listAQ.recycle(convertView);

            holder.imgView_Grid_Thumbnail_Gallery = (ImageView) convertView.findViewById(R.id.imgView_Grid_Thumbnail_Gallery);

            if (holder.imgView_Grid_Thumbnail_Gallery != null) {
                aq.id(holder.imgView_Grid_Thumbnail_Gallery.getId()).image(dataArray.get(position).get("thumbUrl") + "/11");
            }

            holder.txtView_Grid_Name_Gallery = (TextView) convertView.findViewById(R.id.txtView_Grid_Name_Gallery);
            if (holder.txtView_Grid_Name_Gallery != null) {
                aq.id(holder.txtView_Grid_Name_Gallery.getId()).text(dataArray.get(position).get("user_name"));
                Typeface txtViewForName = Typeface.createFromAsset(convertView.getContext().getAssets(), "fonts/arial_bold.ttf");
                holder.txtView_Grid_Name_Gallery.setTypeface(txtViewForName);

            } 
```

尝试像这样添加您的列表项。希望它会有所帮助。

if (convertView == null) if (holder.txtView_Grid_Name_Gallery != null)

```
if (holder.imgView_GridItem_Gallery != null) {
    Bitmap cachedImage = aq.getCachedImage(R.drawable.loading);
    String publicUrl = dataArray.get(position).get("publicUrl") + "/13";
    if (aq.shouldDelay(convertView, parent, publicUrl, 0)) {
    aq.id(holder.imgView_GridItem_Gallery.getId()).image(cachedImage, 0.75f);
    } else {
    aq.id(holder.imgView_GridItem_Gallery.getId()).image(publicUrl, true, true, 0, 0, cachedImage, 0, 0.75f);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:24:10.770

应该从 android 市场下载 android-query 并查看演示，你会发现所有关于列表视图和网格视图的演示，它非常有用

请按照以下步骤操作：

（1）去谷歌播放（2）下载Android查询应用程序（3）进入图像加载选项（4）你会在那里找到列表项

有你的答案列表视图是如何工作的，你还可以从中查看源代码，它是一个带有演示的最佳应用程序，非常有用

下载此应用程序： [https ://play.google.com/store/apps/details?id=com.androidquery&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbmRyb2lkcXVlcnkiXQ](https://play.google.com/store/apps/details?id=com.androidquery&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbmRyb2lkcXVlcnkiXQ)

您可以从此链接包含 jar 文件

[http://code.google.com/p/android-query/downloads/list](http://code.google.com/p/android-query/downloads/list)

下载：android-query-full.0.22.10.jar 用于列表视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:41:55.033

在 onResume 方法中，您必须检查 ScreenOrientation。
例如，首先它以肖像形式出现，然后在 if 语句中如下所示：
if(orientation != Portrait)
{
在此处关闭对话框....
}

尝试这个...

# ruby-on-rails - 在rails中的模型中构建关系并将数据插入其中

> ID：11947878
> 
> 赞同：0
> 
> 时间：2012-08-14T07:44:25.270
> 
> 标签：ruby-on-rails, ruby, models, relationship

如何在rails 3中构建模型

1.  拥有一个个人资料的用户。

2.  有一个通知的用户

3.  具有一种角色的用户，例如管理员等。

我想建立他们的关系。做出来之后。

**如何使用一种表单一次将数据插入所有这些表中。**

任何帮助都会得到帮助..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:53:29.797

搜索[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)以更好地了解 Rails 关联。

**用户.rb**

```
has_one :profile
has_one :notification
has_one :role

accepts_nested_attributes_for :profile, :notification, :role 
```

您可以将每个“接受嵌套属性”放在自己的行上。

其他模型将需要：

> 属于_to：用户

**编辑**

**形式**

```
= form_for @user do |f|

 .field
   f.text_field :name

 .field
   f.text_field :email

 f.fields_for :profile do |t|
   .field
     t.text_field :description

 .actions
   = f.submit 
```

此外，在您的控制器中，请确保具有：

```
def new
 @user = User.new(profile: Profile.new)
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T08:06:16.883

浏览rails [guides](http://guides.rubyonrails.org)，一些教程可能是[railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)

# ruby-on-rails - 思考狮身人面像不为 delta=true 重新索引

> ID：11947879
> 
> 赞同：0
> 
> 时间：2012-08-14T07:44:28.013
> 
> 标签：ruby-on-rails, ruby, sphinx, thinking-sphinx

我在思考狮身人面像时遇到问题

我有以下表格结构

```
title => varchar
desc => varchar
is_deleted => boolean 
```

这是我的 denine_index

```
define_index do
      indexes title, :sortable => :insensitive
      has :is_deleted, :type=>:boolean
      where "is_deleted = false"
      set_property :delta => true
    end 
```

在这里，当我**编辑**主题并用**编辑后的名称****搜索**时，我得到了主题，当我用**旧名称**搜索时，我得到了**相同的主题**。例如，如果之前的主题名称为**“Foo”**，而我**将“Foo”重命名为“Woo”**，则在**搜索“Woo”**时我**得到“Woo”**，但在**搜索“Foo”**时，我再次**得到“Woo”**。此外，当我**设置 is_deleted => true**并**搜索“Woo”**时，我**什么也没得到** ，但在**搜索“Foo”时******************************. 我不明白为什么会这样？sphinx在为**delta=true****创建新索引时是否****不会删除****旧**索引。****************************

 ******再次在重建 sphinx 时，我没有遇到此类问题，并且所有 delta 都按预期设置为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T11:08:37.587

使用 sphinx sql_query_killist 从主索引中删除结果，当您知道它存在于您的增量索引中时，类似于这些：[http ://sphinxsearch.com/docs/1.10/conf-sql-query-killlist.html](http://sphinxsearch.com/docs/1.10/conf-sql-query-killlist.html)******

# c# - DataTrigger Comapring 日期值以设置单元格样式

> ID：11947888
> 
> 赞同：1
> 
> 时间：2012-08-14T07:45:15.217
> 
> 标签：c#, wpf, datagrid, datatrigger

**我正在创建一个绑定到数据库的故障日志应用程序**

如果列出的 DateTime 比当前日期早 3 周，我想要的主要用途是将 DateTime 单元格格式化为 RED。

**主窗口.xaml**

```
<DataGrid AutoGenerateColumns="False" Height="379" HorizontalAlignment="Left" Margin="0,36,0,0" Name="dataGridLog" VerticalAlignment="Top" Width="432" SelectionChanged="dataGridLog_SelectionChanged" IsReadOnly="True" MouseDoubleClick="dataGridLog_MouseDoubleClick" ItemsSource="{Binding}" RowDetailsVisibilityMode="VisibleWhenSelected">

    <DataGrid.Columns>
        <DataGridTemplateColumn x:Name="dateColumn" Header="Date" Width="80" CanUserReorder="True" CanUserSort="False">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock x:Name="dateColumnTextBlock" Text="{Binding Path=DateSent, StringFormat={}{0:dd/MM/yyyy}}" Width="80" />
                    <DataTemplate.Triggers>
                        <!--<DataTrigger Binding="{Binding Path=DateSent, StringFormat={}{0:dd/MM/yyyy}, Converter={x:Reference mIsEqualOrGreaterThanConverter.Instance}, ConverterParameter=3}" Value="True">
                            <Setter TargetName="dateColumnTextBlock" Property="Background" Value="Red" />
                        </DataTrigger>-->
                    </DataTemplate.Triggers>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTemplateColumn x:Name="priorityColumn" Header="Priority" Width="80" CanUserReorder="True" CanUserSort="True">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock x:Name="priorityColumnTextBlock" Text="{Binding Path=Priority}" Width="80" />
                    <!--<DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding Path=Priority}" Value="Urgent">
                            <Setter TargetName="priorityColumnTextBlock" Property="Background" Value="Red" />
                        </DataTrigger>
                    </DataTemplate.Triggers>-->
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>

        <DataGridTextColumn x:Name="titleColumn" Binding="{Binding Path=Fault}" Header="Title" Width="270" CanUserReorder="True" CanUserSort="True" />
   </DataGrid.Columns>
</DataGrid> 
```

**主窗口.xaml.cs**

```
[ValueConversion(typeof(DateTime), typeof(String))]
public class DateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        DateTime date = (DateTime)value;
        DateTime curDate = DateTime.Now;

        TimeSpan span = curDate.Subtract(date);

        return span.Days;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string strValue = value as string;
        DateTime resultDateTime;
        if (DateTime.TryParse(strValue, out resultDateTime))
        {
            return resultDateTime;
        }
        return DependencyProperty.UnsetValue;
    }
} 
```

我似乎无法绑定转换器，无法转换日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:36:47.580

如果您已声明您`Converter`的`Resources`

```
<Window.Resources>
    <local:IsEqualOrGreaterThanConverter x:Key="IsEqualOrGreaterThanConverter" />
</Window.Resources> 
```

你可以像这样引用它

```
<DataTrigger Binding="{Binding Path=DateSent, Converter={StaticResource IsEqualOrGreaterThanConverter}, ConverterParameter=3}" Value="True">
    <Setter TargetName="dateColumnTextBlock" Property="Background" Value="Red" />
</DataTrigger> 
```

您`DataTrigger`与 True 进行比较。因此，您`Converter`应该返回一个布尔值。

```
[ValueConversion(typeof(DateTime), typeof(bool))]
public class IsEqualOrGreaterThanConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        DateTime date = (DateTime)value;
        DateTime curDate = DateTime.Now;

        TimeSpan span = curDate.Subtract(date);

        return span.TotalDays > (int)parameter * 7;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# python - 使用 python 的 minidom 通过 XML 项进行代码迭代的最快方法？

> ID：11947894
> 
> 赞同：0
> 
> 时间：2012-08-14T07:45:45.947
> 
> 标签：python, xml, minidom

将`feature`python的minidom用于这种xml结构的最短代码/最快的方法是什么：

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns       = "http://www.w3.org/ns/widgets"
        id          = "http://example.org/exampleWidget"
        version     = "2.0 Beta"
        height      = "200"
        width       = "200"
        viewmodes   = "fullscreen">

<feature name="http://example.com/camera" state="true"/>
<feature name="http://example.com/bluetooth" state="true"/>
<feature name="http://example.com/sms" state="true"/>
<feature name="http://example.com/etc" state="false"/>
</widget> 
```

我现在对小部件的属性不感兴趣，只是功能。

输出将是 `feature["camera"] = true` `feature["etc"] = false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:25:50.443

```
from xml.dom.minidom import parseString
from os.path import basename

dom = parseString(raw_xml)

feature = {}
for f in dom.getElementsByTagName('feature'):
    name = basename(f.getAttribute('name'))
    state = f.getAttribute('state').lower() == 'true'
    feature[name] = state 
```

**或简而言之：**

```
dict([(basename(f.getAttribute('name')), f.getAttribute('state').lower() == 'true')
  for f in parseString(raw).getElementsByTagName('feature')]) 
```

# javascript - extjs中的时间检查功能？

> ID：11947895
> 
> 赞同：0
> 
> 时间：2012-08-14T07:45:52.777
> 
> 标签：javascript, php, html, extjs, extjs4

我正在尝试使用 extjs 4 制作一个电子邮件表单，一次向 12000 名公司成员发送电子邮件。

服务器一次不会容纳那么多，所以我尝试编写一个函数，每三个消息或其他东西生成发送方法。

有人知道合适的功能吗？示例代码？或者每隔几秒/分钟/等刷新一个 extjs 表单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:52:55.003

不确定这是最好的方法。但是对于刷新页面，它是基本的 javascript

```
document.location.reload(true) 
```

并使用 a`setTimeout`重复重新加载。

所以 5 秒后重新加载：

```
var t = setTimeout(function(){document.location.reload(true)}, 5000); 
```

但我宁愿建议使用[ajax 调用](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax)和 a`setInterval`每隔 x 毫秒重复一次，这样你就不必重新加载任何页面了！

更简洁的方法是[在后端](https://stackoverflow.com/questions/1304049/how-to-send-a-secured-blast-email-to-thousands-users-in-php)处理它。

另[一篇有用的文章](https://stackoverflow.com/questions/1543153/is-there-a-limit-when-using-php-mail-function)

另[一篇有用的文章](https://stackoverflow.com/questions/788596/whats-the-best-approach-to-sending-email-to-hundreds-of-recipients-from-a-zend)

# jquery - 如何为这个 jQuery 添加动画加载 GIF？

> ID：11947898
> 
> 赞同：0
> 
> 时间：2012-08-14T07:46:12.160
> 
> 标签：jquery

我的网站上有以下代码：

```
<script type="text/javascript">
  $(document).ready(function(){
      $('.notif-email > a').click(function(e) {
            $("#email-notif").load("notif-email.php");
      });
      $('.notif-message > a').click(function(e) {
            $("#message-notif").load("notif-message.php");
      });
      $('.notif-prospect > a').click(function(e) {
            $("#prospect-notif").load("notif-prospect.php");
      });
  });
</script> 
```

我想用 GIF 动画文件添加一些加载效果，比方说... loading.gif 我想在用户“点击”某些东西但仍在等待 load() 文件在服务器上执行后向用户展示。

怎么做？

更新 ：

这里有更多与该 jQuery 脚本相关的代码：

```
<li class="notif-email"><a href="#" title="17 new emails">View New Emails</a>
<div class="popup-notif">
<div class="notif-top">
<div class="notif-title">Notifications</div>
</div><!-- .notif-top -->
<div class="notif-body">
<div id="email-notif" class="notif-child-wrap">
</div><!-- .notif-child-wrap -->
</div><!-- .notif-body -->
</div><!-- .popup-notif -->
</li>

<li class="notif-message"><a href="#" title="5 new messages">View New Messages</a>
<div class="popup-notif">
<div class="notif-top">
<div class="notif-title">Messages</div>
</div><!-- .notif-top -->
<div class="notif-body">
<div id="message-notif" class="notif-child-wrap">    
</div><!-- .notif-child-wrap -->
</div><!-- .notif-body -->
</div><!-- .popup-notif -->
</li>

<li class="notif-prospect"><a href="#" title="1,999 new prospects">View New Prospects</a>
<div class="popup-notif">
<div class="notif-top">
<div class="notif-title">New Prospects</div>
</div><!-- .notif-top -->
<div class="notif-body">
<div id="prospect-notif" class="notif-child-wrap">    
</div><!-- .notif-child-wrap -->
</div><!-- .notif-body -->
</div><!-- .popup-notif -->
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:51:10.313

```
function togglemask(show) {
  if(show)
   $('#target').append('<img class="loadergif" src="loading.gif" width="" height="">');
  else
   $('#target').remove('img.loadergif');
}

$(document).ready(function(){
      $('.notif-email > a').click(function(e) {
            togglemask(true);
            $("#email-notif").load("notif-email.php", togglemask(false));
      });
      $('.notif-message > a').click(function(e) {
            togglemask(true);
            $("#message-notif").load("notif-message.php", togglemask(false));
      });
      $('.notif-prospect > a').click(function(e) {
            togglemask(true);
            $("#prospect-notif").load("notif-prospect.php", togglemask(false));
      });
  }); 
```

### 笔记

这里`#target`只是举例。您可以使用任何元素来添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:54:44.210

load 接受第二个参数，它是完整的事件处理程序，我所做的是在调用之前显示 gif 并使用函数隐藏它：

gif.show(); $("#...").load("...", function(){ gif.hide(); });

我们将它包装在一个调用中，所以它看起来像：

$("#...").loadWithProgress({url: "...", before: function(){ /* 显示 gif*/ }, after: function(){ /* 隐藏 gif*/ }} );

# mysql - Group_concat 显示有限的结果

> ID：11947899
> 
> 赞同：0
> 
> 时间：2012-08-14T07:46:18.343
> 
> 标签：mysql

请帮忙，我使用 group_concat 来获取逗号分隔的数字，但它只显示了 3000 多个值中的 72 个。

```
SELECT GROUP_CONCAT(  `phone` ) 
FROM  `notify` 
LIMIT 0 , 4000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:48:52.970

group_concat 函数有一个最大长度 [来自[MySQL 文档]](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)

> 结果被截断为由 group_concat_max_len 系统变量给出的最大长度，其默认值为 1024。该值可以设置得更高，尽管返回值的有效最大长度受 max_allowed_pa​​cket 值的限制。在运行时更改 group_concat_max_len 值的语法如下，其中 val 是无符号整数： SET [GLOBAL | 会话] group_concat_max_len = val;
> 
> 返回值是非二进制或二进制字符串，具体取决于参数是非二进制字符串还是二进制字符串。结果类型为 TEXT 或 BLOB，除非 group_concat_max_len 小于或等于 512，在这种情况下，结果类型为 VARCHAR 或 VARBINARY。

但是您可能不应该做您正在做的事情：最好是逐个获取行，然后让您的应用程序将它们连接到一个逗号分隔的字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:49:18.953

group_concat 结果长度被限制（截断）为 group_concat_max_len 系统变量的值。此变量的默认值为 1024。

如果要更改变量的值，则语法为：

```
SET [GLOBAL | SESSION] group_concat_max_len = val; 
```

# php - PHP cURL文件上传附加信息到文件

> ID：11947905
> 
> 赞同：0
> 
> 时间：2012-08-14T07:46:40.310
> 
> 标签：php, file-upload, curl

我将文件上传到远程服务器。编码：

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, ZDURL.$url);
    curl_setopt($ch, CURLOPT_USERPWD, ZDUSER."/token:".ZDAPIKEY);

    $params = array('file_name' => '@'.$temp_file);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/plain"));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    curl_setopt($ch, CURLINFO_HEADER_OUT, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
    $result = curl_exec($ch);
    $error = curl_error($ch);
    curl_close($ch); 
```

但是在上传文件的顶部会出现信息：

```
------------------------------cfbe90a606af
Content-Disposition: form-data; name="file_name"; filename="C:\Program Files\xampp\tmp\phpF576.tmp"
Content-Type: application/octet-stream 
```

由于此添加文本，图像格式错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:01:22.367

听起来您要向其发送数据的 URL 只需要请求正文中的文件，而不是表单提交。实现这一目标的最佳方法是使用`CURLOPT_INFILE`. 试试这个代码：

尝试这个

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, ZDURL.$url);
curl_setopt($ch, CURLOPT_USERPWD, ZDUSER."/token:".ZDAPIKEY);

// You need to detect the correct content type for the file you are sending.
// Although based on the current problem you have, it looks like the server
// ignores this anyway
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: image/jpeg"));

// Send the raw file in the body with no other data
$fp = fopen($temp_file, 'r');
curl_setopt($ch, CURLOPT_INFILE, $fp);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

$result = curl_exec($ch);
$error = curl_error($ch);

curl_close($ch);
fclose($fp); 
```

# wix - 如何在安静安装时报告 msi 安装状态

> ID：11947909
> 
> 赞同：1
> 
> 时间：2012-08-14T07:46:55.533
> 
> 标签：wix, windows-installer

我正在尝试使用 Wix 创建的 msi 进行安静的安装。问题是绝对没有关于安装如何进行的报告，即它是否成功。

目前，我正在将所有内容记录到文件中并随后检查文件，我只是想知道是否有更好的方法？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:18:37.357

当您静默运行 msi 时，msiexec 将有一个退出代码。0 和 3010 是“好”（3010 表示需要重新启动）其他一切（尤其是 1603）都不好。

[Windows Installer 进程的错误代码和错误消息列表](http://support.microsoft.com/kb/304888)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:05:43.370

我想说这就是安静安装的全部意义——安静地安装。:) 您可能想检查从`/q`. [这是有关 msiexec.exe 的文章](http://technet.microsoft.com/en-us/library/bb490936.aspx)的摘录：

> **/qn** ：不显示用户界面。
> 
> **/qb** ：显示基本用户界面。
> 
> **/qr** ：显示简化的用户界面，并在安装结束时显示模式对话框。
> 
> **/qf** ：显示完整的用户界面，最后显示一个模式对话框。
> 
> **/qn+** ：不显示任何用户界面，除了最后显示的模式对话框。
> 
> **/qb+** ：显示基本用户界面，最后显示模式对话框。
> 
> **/qb-** ：显示没有模式对话框的基本用户界面。

如果您只需要在自己安装后确保它存在，请查看添加/删除程序控制台。如果它已经安装，它就在那里（除非[你明确告诉它不要安装](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367750.aspx)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T23:11:02.453

您已经在退出代码方面得到了正确的答案，但我只想添加另一种允许更多“交互性”同时仍然抑制大多数 MSI GUI 的方法是允许在末尾显示模式对话框安装。这是通过将**/QN+**添加到**msiexec.exe**命令行来实现的：

```
C:\Windows\system32\msiexec.exe /I "C:\test.msi" /QN+ 
```

这将使安装以静默方式运行，但在安装结束时将显示一个模式对话框，告诉您安装已完成。

关于抑制部分 GUI 序列有很多选项，实现这一点的命令行有时会令人困惑。[请在此处](https://serverfault.com/questions/30068/silent-install-of-msi/67001#67001)查看我的帖子，了解一个工具，该工具可以通过使用**简单、免费的工具**自动生成命令行语法来帮助揭开它的神秘面纱。

# mysql - 如何在mysql中存储元数据

> ID：11947916
> 
> 赞同：1
> 
> 时间：2012-08-14T07:47:38.230
> 
> 标签：mysql, cakephp

我对在数据库中存储其他表的元数据感到困惑。

我有表格：目标、评论等，用户可以在其中插入数据。而且我需要存储这些表中的每一个的描述以及每人每张表可以插入多少行。

例如，

```
goals -> a description field, a count field
comments-> description field only
rating -> description field, weight field 
```

我的疑问是，在这种情况下**，最好保留一个存储所有此类信息的中央表**（不考虑规范化）。**或者为每个表创建单独的元表**，例如 comment_settings、goal_settings、rating_settings？

我在 cakePHP 中这样做。我不希望成为一个纯粹主义者，但我对破坏 MVC 范式或在不进行规范化的情况下弄乱性能感觉不好。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:56:37.223

在插入文本字段之前，您始终可以使用 JSON 将数据编码为字符串。这确实具有显着的灵活性优势，但也可能具有同样多的便利含义，例如能够对值进行索引。

通过使用类似的东西可能会克服一些 JSON 问题：[http ://www.mysqludf.org/lib_mysqludf_json/index.php](http://www.mysqludf.org/lib_mysqludf_json/index.php)

但是，您应该试一试，看看什么最适合您的需求。

我个人更喜欢：

`Variable varchar(20), Value varchar(255)`- 数据结构类型例如：

```
Variable : GoalsDesc1
Value    : This is a description of a goal
Variable : GoalsCount1
Value    : 2

Variable : Comments1
Value    : This is a comment field 
```

# java - 安装JDK并设置JAVA_HOME

> ID：11947920
> 
> 赞同：2
> 
> 时间：2012-08-14T07:47:52.417
> 
> 标签：java, java-home

1.  JDK的目的到底是什么——运行java程序还是开发？
2.  标题中包含 java 和 jdk/sdk 的软件包似乎太多了。如果我想开发 Java 应用程序，我应该安装哪一个？
3.  谁使用 JAVA_HOME，我应该将其设置为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:51:45.223

1.  JDK是开发环境。JVM是运行时环境。
2.  您应该从 oracle 网站下载 java 安装程序或从存储库管理器安装它
3.  `JAVA_HOME`企业级 Java 软件（应用服务器、数据库、开发工具等）通常需要系统变量。您应该将`JAVA_HOME`变量设置为 JDK 或 JVM 的根目录（将其设置为 JDK 总是有效的，但也许某些软件会在`JAVA_HOME`指向 JRE 时按预期运行）。如果你设置`JAVA_HOME`正确，那么`$JAVA_HOME/bin/java -version`命令应该是 java 的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:58:08.917

**JRE**表示 Java 运行时环境。大多数 Java 软件只需要一个**JRE**即可运行。

**JDK**表示 Java 开发工具包。一个**JDK**总是包含一个**JRE**。如果你开发你肯定总是使用**JDK**，因为它包含 java 自己的类的源代码和文档。

还有一些软件（通常是开发软件）使用**JDK**的工具来运行，例如这个软件需要**JDK**作为运行环境（例如：ant）。

**JVM**表示 Java 虚拟机，是运行您的 java 程序的程序，无论是在**JRE**还是**JDK**中。

`JAVA_HOME`是**JDK的路径**

`JRE_HOME`是**JRE的路径**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:57:55.157

1.  **JDK** - Java 开发工具包（相对于**JRE** - Java 运行时环境）。
2.  如果您不知道需要哪个版本的 Java，只需获取最新版本（当前为**Java 平台 (JDK) 7u5**）。除非您已经拥有开发工具，否则您可能需要 Netbeans 捆绑包。
3.  **JAVA_HOME**被一些依赖于 Java 的软件使用 - ant，它是一种构建工具，是我想到的。它应该设置为包含该目录的`bin`目录，该目录又包含 java 可执行文件。

# mysql - PROCEDURE 多行

> ID：11947926
> 
> 赞同：0
> 
> 时间：2012-08-14T07:48:09.683
> 
> 标签：mysql, limit, procedure

错误：结果由不止一行组成 我认为问题出在 LIMIT 这个词上 有人可以帮忙吗？

```
DELIMITER $$

CREATE PROCEDURE `InsertComment`(crc int(11) unsigned, userId int, title varchar(255),
                nick varchar(20), parentId int, content text)
BEGIN

         DECLARE tableName VARCHAR(4);
         DECLARE tbName VARCHAR(15);    
         DECLARE results INTEGER;
         DECLARE depth integer;
         DECLARE results2 INTEGER;
         DECLARE resultsM INTEGER;
         DECLARE commentsId INTEGER;
         DECLARE CommentX INTEGER ;
         DECLARE COUNTER INTEGER;

         set tbName = CAST(crc AS CHAR);
         set tableName = SUBSTRING(tbName, 1, 5);

        CALL CreateCommentsTable(tableName);

        if parentId = 0 then

                SET @results2 = 0;

                SET @q2 = CONCAT("SELECT commentsId INTO @results2 FROM `",tableName,"` WHERE CRC32 = ",crc," ORDER BY commentsId DESC LIMIT 1");
                    PREPARE stmq2 FROM @q2;
                    EXECUTE stmq2;
                    DEALLOCATE PREPARE stmq2;

                SET commentsId = @results2 + 1;

                SET depth = 0;
                SET @results = 0;

            else

                    SET @q2 = CONCAT("SELECT Depth INTO @results FROM `",tableName,"` WHERE CRC32 = ",crc," AND commentsId = ",parentId);
                                PREPARE stmq2 FROM @q2;
                                EXECUTE stmq2;
                                DEALLOCATE PREPARE stmq2;

                    set depth = @results;
                    set depth = depth + 1;

                    set @CommentX = 0;
                    SET @COUNTER = 0;

                WHILE @COUNTER = 0 AND @results > -1 DO

                            SET @q4= CONCAT("SELECT COUNT(*) INTO @COUNTER FROM `",tableName,"` WHERE CRC32 = ",crc," AND Depth = ",@results," AND commentsId > ",parentId);
                            PREPARE stmq2 FROM @q4;
                            EXECUTE stmq2;
                            DEALLOCATE PREPARE stmq2;

                            IF @COUNTER > 0 THEN

                                SET @q3= CONCAT("SELECT commentsId INTO @CommentX FROM `",tableName,"` WHERE CRC32 = ",crc," AND Depth = ",@results," AND commentsId > ",parentId," ORDER BY commentsId ASC Limit 1" );
                                PREPARE stmq2 FROM @q3;
                                EXECUTE stmq2;
                                DEALLOCATE PREPARE stmq2;

                            END IF;

                            SET @results = @results - 1;

                END WHILE;

                            SET @resultsM = 0;

                            IF @CommentX = 0 THEN
                                  SET @q2 = CONCAT("SELECT commentsId INTO @resultsM FROM `",tableName,"` WHERE CRC32 = ",crc," ORDER BY commentsId DESC LIMIT 1");

                                  PREPARE stmq2 FROM @q2;
                                  EXECUTE stmq2;
                                  DEALLOCATE PREPARE stmq2;

                                SET commentsId = @resultsM +1;

                                else

                                      SET commentsId = @CommentX + 1;

                            END IF;

                SET @u = CONCAT("UPDATE `",tableName,"` SET commentsId = commentsId + 1 WHERE CRC32 = ",crc,"  AND commentsId > ",commentsId + 1);
                PREPARE stmq FROM @u;
                EXECUTE stmq;
                DEALLOCATE PREPARE stmq;

        end if;

        SET @a = CONCAT("INSERT INTO `", tableName ,"` (`Crc32`, `UserId`, `Title`, `Nick`, `CommentsId`, `Depth`, `Content`, `CommentStatus`, `ViewStatus`) 
                         VALUES (",crc,", ",userId,", '",title,"', '",nick,"',",commentsId,", ",depth,", '",content,"', 1, 1);");
        PREPARE stmi FROM @a;
        EXECUTE stmi;
        DEALLOCATE PREPARE stmi;

        set @results = null;
        set @results2 = null;
        set @tableName = null;
        set @tbName = null;

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:53:44.610

如果你使用分隔符 $$ 那么所有的 ; 在你的存储过程中应该用 $$ 替换。您还应该将分隔符设置回 ; 在您的命令结束时。

# c# - Facebook 提要 - 从锚点中删除额外的 Facebook JS

> ID：11947927
> 
> 赞同：1
> 
> 时间：2012-08-14T07:48:10.763
> 
> 标签：c#, .net, regex

请帮助我使用 C# .net`Regex Replace`方法从此处替换所有其他 Facebook 信息。

**例子**

```
<a href="/l.php?u=http%3A%2F%2Fon.fb.me%2FOE6gnB&amp;h=yAQFjL0pt&amp;s=1" target="_blank" rel="nofollow nofollow" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/on.fb.me\/OE6gnB&quot;);" onclick="LinkshimAsyncLink.swap(this, &quot;\/l.php?u=http\u00253A\u00252F\u00252Fon.fb.me\u00252FOE6gnB&amp;h=yAQFjL0pt&amp;s=1&quot;);">http://on.fb.me/OE6gnB</a>somehtml 
```

**输出**

```
somehtml <a href="http://on.fb.me/OE6gnB">on.fb.me/OE6gnB</a> somehtml 
```

我尝试遵循正则表达式，但它们对我不起作用

```
searchPattern = "<a([.]*)?/l.php([.]*)?(\">)?([.]*)?(</a>)?";
replacePattern = "<a href=\"$3\" target=\"_blank\">$3</a>"; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:25:48.420

我设法使用带有以下代码的正则表达式来做到这一点

```
 searchPattern = "<a(.*?)href=\"/l.php...(.*?)&amp;?(.*?)>(.*?)</a>";
          string html1 = Regex.Replace(html, searchPattern, delegate(Match oMatch)
    {
        return string.Format("<a href=\"{0}\" target=\"_blank\">{1}</a>", HttpUtility.UrlDecode(oMatch.Groups[2].Value), oMatch.Groups[4].Value);

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:31:31.377

你可以试试这个（必须添加 System.Web 才能使用`System.Web.HttpUtility`）：

```
 string input = @"<a href=""/l.php?u=http%3A%2F%2Fon.fb.me%2FOE6gnB&amp;h=yAQFjL0pt&amp;s=1"" target=""_blank"" rel=""nofollow nofollow"" onmouseover=""LinkshimAsyncLink.swap(this, &quot;http:\/\/on.fb.me\/OE6gnB&quot;);"" onclick=""LinkshimAsyncLink.swap(this, &quot;\/l.php?u=http\u00253A\u00252F\u00252Fon.fb.me\u00252FOE6gnB&amp;h=yAQFjL0pt&amp;s=1&quot;);"">http://on.fb.me/OE6gnB</a>somehtml";
        string rootedInput = String.Format("<root>{0}</root>", input);
        XDocument doc = XDocument.Parse(rootedInput, LoadOptions.PreserveWhitespace);

        string href;
        var anchors = doc.Descendants("a").ToArray();
        for (int i = anchors.Count() - 1; i >= 0;  i--)
        {
            href = HttpUtility.ParseQueryString(anchors[i].Attribute("href").Value)[0];

            XElement newAnchor = new XElement("a");
            newAnchor.SetAttributeValue("href", href);
            newAnchor.SetValue(href.Replace(@"http://", String.Empty));

            anchors[i].ReplaceWith(newAnchor);
        }
        string output = doc.Root.ToString(SaveOptions.DisableFormatting)
                        .Replace("<root>", String.Empty)
                        .Replace("</root>", String.Empty); 
```

# android - StartForeground 错误通知错误

> ID：11947928
> 
> 赞同：2
> 
> 时间：2012-08-14T07:48:11.213
> 
> 标签：android, notifications, android-service

我正在尝试使用 while 循环来每秒更新一次通知。但是在 2.3.3 及以下版本中，它会因以下 logcat 错误而崩溃：

```
08-14 07:30:17.394: E/AndroidRuntime(501): FATAL EXCEPTION: main
08-14 07:30:17.394: E/AndroidRuntime(501): 
android.app.RemoteServiceException: Bad notification for startForeground: 
java.lang.IllegalArgumentException: contentIntent required: 
pkg=com.package.name id=77 
notification=Notification(vibrate=null,sound=null,defaults=0x4,flags=0x40) 
```

问题是即使当我检查 Build.VERSION 时，代码也会因相同的 logcat 错误而崩溃：

```
if (isRunning) {
        n.defaults = Notification.DEFAULT_LIGHTS;
        while (!RecordTimerTask.isRunning && isRunning) {
            long now = System.currentTimeMillis() - startTime;
            n.setLatestEventInfo(getApplicationContext(), getResources()
                    .getString(R.string.notify_title),
                    getDurationBreakdown(now), null);

            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
                startForeground(FOREGROUND_ID, n);
            else 
                notify.notify(ID, n);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

运行 2.3.3 及以下版本的设备似乎不喜欢 null 通知意图。我不明白为什么我在 startForeground 从未被调用时收到 logcat 错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:42:41.370

问题是您调用*setLatestEventInfo*时为 pendingIntent提供了一个空参数。这适用于 Android ICS，但不适用于早期版本......

查看*[setLatestEventInfo](http://developer.android.com/reference/android/app/Notification.html#setLatestEventInfo%28android.content.Context,%20java.lang.CharSequence,%20java.lang.CharSequence,%20android.app.PendingIntent%29)*的文档。

这是您的代码的外观（如果您从服务推送这些通知）：

```
 // The PendingIntent to launch our activity if the user selects this notification
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, LocalServiceActivities.Controller.class), 0);

    // Set the info for the views that show in the notification panel.
    notification.setLatestEventInfo(this, getText(R.string.local_service_label),
                   text, contentIntent); 
```

代码引用自[Android 官方文档](http://developer.android.com/reference/android/app/Service.html)。

在 StackOverflow 上也可以看到[类似](https://stackoverflow.com/questions/11265942/java-lang-illegalargumentexception-contentintent-required/12138517#12138517)的问题。

# sql - 具有服务器和本地副本的记录的数据库设计

> ID：11947945
> 
> 赞同：2
> 
> 时间：2012-08-14T07:50:01.140
> 
> 标签：sql, ios, sqlite, database-design

我正在构建一个 iOS 应用程序，该应用程序可以工作（创建、编辑）与服务器数据库同步的记录（在 sqlite 中）。如果应用程序中的记录已从服务器下载然后在本地修改，我正在制作副本，因为我希望能够恢复到服务器版本。因此，对于给定的记录 ID，我有时可以拥有两个副本（服务器、本地）。我在设计数据库布局时寻求帮助。

最初，我使用了两张表——一张用于存储服务器记录（通过同步到达），一张用于存储本地修改/本地创建（尚未同步）的记录。我发现这种方法很麻烦，因为（a）我需要进行聚合搜索（选择优先考虑本地修改副本的记录），（b）我需要将数据从一个表移动到另一个表，这听起来不像一个好的做法，并且 (c) 模式非常复杂（数百列），并且很难保持两个表模式同步。

然后我将所有内容合并到一个表中，添加一个状态列（服务器/本地）。这似乎很好，直到我意识到过滤重复记录（那些同时存在服务器和本地副本的记录）是多么复杂。计数、搜索、选择所需的 10 行复杂查询（由于 sqlite 的限制） - 请参阅我的其他问题[here](https://stackoverflow.com/questions/11913588/select-records-based-on-column-priority)和[here](https://stackoverflow.com/questions/11914664/select-unique-record-based-on-column-value-priority)。

我现在正在考虑将所有内容保存在一个表中，但放弃状态列，并创建一个单独的表来跟踪状态，每条记录一行，如下所示：

**数据：**

```
id    recordID  name                                 col2   col3   ...
1     1001      Server record, not changed locally   xxxx   xxxx   ...
2     1002      Server record changed locally        xxxx   xxxx   ...
3     1002      Server record changed locally        xxxx   yyyy   ...
4     1003      Record created locally               xxxx   xxxx   ...
5     1004      Server record changed locally        xxxx   xxxx   ...
6     1004      Server record changed locally        xxxx   yyyy   ... 
```

**状态跟踪：**

```
id    recordID  server  local
1     1001      1
2     1002      2       3
3     1003              4
4     1004      5       6 
```

聚合上述信息以进行显示意味着显示本地记录（如果有）或服务器记录 - 在这种情况下，数据行 1、3、4 和 6。在这种情况下，我的查询会更简单（只是与一件事）。

这是最好的方法，还是我应该使用更好的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T10:35:14.973

我将摆脱本地/服务器状态字段并引入时间戳/版本字段，一旦两侧之一更改记录，该字段将设置为当前日期。因此，您始终知道哪一行是最新记录（时间戳最高的记录）。对于您恢复到旧版本的功能，我会考虑提供后退/前进一个版本的记录的选项。如果用户选择了一个旧版本来恢复，我会使用当前时间戳保存该版本的新副本。

您可以通过传输协议上的全部或部分（未知时间戳）记录来实现简单的同步。考虑在客户端和服务器端转储给定表的时间戳列表，比较增量列表并为另一端准备插入语句。瞧，同步完成。您需要始终考虑的唯一一件事是您不更新行，而是创建具有新时间戳的新版本。

这几乎是数据仓库系统中的最佳实践。（无更新理念）

如果您发现每条记录有大量版本，则可能会定期丢弃最旧的记录（如果有 N 个较新版本）。

# django - 用于与 django Web 应用程序通信的 elastix API

> ID：11947953
> 
> 赞同：3
> 
> 时间：2012-08-14T07:50:24.367
> 
> 标签：django, voip, asterisk, elastix

我有运行 Elastix 的 VOIP 服务器，以及在不同服务器上运行的 Django 中的 Web 应用程序。我想在这两个服务器之间进行通信以传输数据并在 IVR 中使用它们，例如从手机键盘获取用户 ID 和密码并在 Django 数据库中检查，然后使用 IVR 将相关数据提供给用户。

是否有任何框架或 API 可以做到这一点？有谁知道VOIP服务器？？请帮忙。. .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:59:25.763

我不知道这个特定的设备，但它似乎在[Asterisk](http://www.asterisk.org/)上运行。这类东西的 Asterisk API 称为[AGI（Asterisk Gateway Interface）](http://www.voip-info.org/wiki/view/Asterisk+AGI)。

> Asterisk 网关接口是一个用许多不同的编程语言向 Asterisk 添加功能的接口。Perl、PHP、C、Pascal、Bourne Shell——真的是你的选择。
> 
> *   **AGI**可以控制拨号计划，在 extensions.conf 中调用。
> *   **Async AGI**在 Asterisk 1.6 中引入，允许异步 AGI 脚本。
> *   **EAGI**使应用程序除了与拨号计划交互外，还可以访问和控制声道。
> *   **FastAGI**可用于通过网络连接在远程机器上进行处理。
> *   **DeadAGI**在挂断后可以访问死通道。自 Asterisk 1.6 起已弃用

来源：[http ://www.voip-info.org](http://www.voip-info.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T15:07:31.813

AJAM 是您的最佳选择： [Aynchronous Javascript Asterisk Manager (AJAM)](http://www.the-asterisk-book.com/unstable/manager-interface-ajam.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-10T07:41:26.947

有**Elastix REST API**`PHP`解决方案，无需依赖 即可编写。[elastix-api](https://github.com/101t/elastix-api)您也可以查看有关如何在 Elastix 服务器旁边安装它的[文档，其中包含重要功能，例如：](https://github.com/101t/elastix-api/wiki/Elastix-API-Document)

1.  实时通话
2.  CDR 报告
3.  下载通话记录 *.wav 文件

和很多事情。

# mysql - 如何从给定数据库中获取计费时间？

> ID：11947957
> 
> 赞同：0
> 
> 时间：2012-08-14T07:50:56.910
> 
> 标签：mysql, heidisql

我有个问题。我想在行值更改时找到行值之间的时间差异。我的表中有以下类似数据，例如：

```
------------------------------------
    DateandTime     |    DCStatus
------------------------------------
2012-01-01 01:00:00 |    Using
2012-01-02 02:00:00 |    Using
2012-01-03 03:00:00 |    Using
2012-01-04 04:00:00 |    Charging
2012-01-05 05:00:00 |    Charging
2012-01-06 06:00:00 |    Using
2012-01-06 07:00:00 |    Using
2012-01-06 08:00:00 |    Using
2012-01-05 09:00:00 |    Charging
2012-01-05 10:00:00 |    Charging
2012-01-05 11:00:00 |    Charging
------------------------------------ 
```

从这个给定的数据库如何计算平均充电时间和放电时间？我对 SQL 编程很陌生。请帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:28:02.613

据我所知，您将无法使用标准查询来执行此操作。你有两个选择：

*   使用存储过程和 MySQL[编程构造](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-compound-statements.html)来达到预期的效果
*   查询数据并使用您构建应用程序其余部分的编程语言来处理它

如果您不是特别被迫在数据库中进行此计算，我建议后一种选择 - 编程语言通常更适合这些类型的计算，并且您的应用程序将较少依赖 MySQL 作为数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:08:12.933

```
select avg(Time(DateandTime)) from yourTable where DCStatus = 'Charging' or DCStatus = 'DisCharging' group by DCStatus; 
```

我不确定这在 MySQL 中是否有效，我没有时间测试它，但它应该可以工作。

# c++ - 检查linux库中函数的存在

> ID：11947963
> 
> 赞同：5
> 
> 时间：2012-08-14T07:51:18.830
> 
> 标签：c++, linux, shared-libraries

在动态链接期间，会出现一个奇怪的未定义函数引用。我知道应该包含这个函数的库的名称。是否有任何 Linux 命令来确保函数存在于库（.a 文件）中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T07:56:49.057

您应该能够使用`nm`（可能需要`--demangle`参数）来获取库中所有内容的列表，然后用于`grep`过滤结果，例如查找`\d T functionname\(`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:54:55.207

查看`nm`命令，它应该为您提供您正在寻找的信息

# dictionary - 从列表中查找并排列具有相同字母的单词

> ID：11947964
> 
> 赞同：0
> 
> 时间：2012-08-14T07:51:18.313
> 
> 标签：dictionary, ms-word

我正在制作一个文字游戏，我想知道如何在具有相同字母的列表中查找和排列单词。在我的游戏中，你会看到 5 个字母，然后你必须重新排列这些字母 tp 组成一个单词。所以这个词可以是“acorn”，但是这 5 个字母也可以组成“narco”或“racon”，它们是我的 .txt 字典中的词（如左图所示）。

例如，右边的第三行：

![](../Images/a862658bf8aec00be64d24fbd8b0e55b.png)

任何提示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:58:29.867

这是一个典型的字谜问题，您可以将单词作为 Hashmap 键存储在单词的排序版本上，因此列表如下

```
 clay, lacy, note, tern, tone, nest, sent 
```

将存储为

```
 acly => {clay , lacy}
   enot => {tone, note}
   enst => {sent, nest}
   enrt => {tern} 
```

易于构建，sudo 算法是

```
 Hashmap<String, HashSet<String>> h;
  foreach word in list
      String sorted = sort(word); \\so if word is sent, sorted is enst
      HashSet<String> currentSet = h.get(sorted);
      currentSet.add(word); 
```

# facebook - 如何使用 Facebook Id 获取用户公开的 Facebook 数据？

> ID：11947975
> 
> 赞同：0
> 
> 时间：2012-08-14T07:52:01.523
> 
> 标签：facebook, api

我正在开发一个需要来自社交网络的数据的应用程序。我想知道如何从他在 Facebook 中的 fid 中获取一个人的详细信息。我只想获取标记为公开的数据。从谷歌搜索中我知道我们可以使用 rest API 或 java API 来获取数据，但它需要 API 密钥或访问令牌，这些 API 密钥或访问令牌仅在登录 Facebook 后生成。如果有任何其他方法可以获取详细信息，请解释我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:25:37.170

> 从谷歌搜索我知道我们可以使用rest API或java API来获取数据

Rest API 已被弃用，并且不存在诸如“Java API”之类的东西——它只是您主要用于从 Facebook 获取信息的[Graph API ，并且它有很好的文档记录。](https://developers.facebook.com/docs/reference/api/)

> 但它需要登录 Facebook 后才生成的 API 密钥或访问令牌。

当然，您需要一个能够与 Graph API 对话的应用程序——但它不需要用户登录/“连接”到您的应用程序，只是为了阅读*基本*（公共）个人资料信息。一个*应用程序访问令牌*就足够了。

# mysql - 插入查询中是否有任何选项可以避免在比较两个字段时重复输入？

> ID：11947978
> 
> 赞同：0
> 
> 时间：2012-08-14T07:52:12.557
> 
> 标签：mysql

此处使用的查询

```
INSERT INTO tags (name, type, tag_type_id) SELECT name, 'open', (SELECT id from types where name = tag_types.name) FROM tag_types 
```

它可以具有如下值

```
INSERT INTO tags (name, type, tag_type_id) ('first', 'open', 2), ('second', 'open', 5), ('first', 'open', 2); 
```

我不想重复上面的条目。我需要检查表中是否`name`存在`tag_type_id`相似值。如果存在，请避免重复输入。

如何通过更改上述查询来避免条目重复？

我在字段中没有索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:58:13.987

您需要做的是创建一个跨越要保留为唯一的两列的唯一索引，然后将您的插入语句更改为 read`INSERT IGNORE INTO ...`这将防止重复项进入表中。

```
ALTER TABLE tags ADD UNIQUE INDEX unq_name_type (name, tag_type_id); 
```

然后在插入的时候；

```
INSERT IGNORE INTO tags (name, type, tag_type_id) ('first', 'open', 2), ('second', 'open', 5), ('first', 'open', 2);

INSERT IGNORE INTO tags (name, type, tag_type_id) SELECT name, 'open', (SELECT id from types where name = tag_types.name) FROM tag_types; 
```

希望有帮助:)

# c# - 无法在 .Net 2.0 Web 服务中传递枚举

> ID：11947981
> 
> 赞同：3
> 
> 时间：2012-08-14T07:52:28.297
> 
> 标签：c#, web-services, enums, windows-mobile

我正在为 Windows Mobile 开发，因此必须使用 Web 服务而不是 WCF。我有一个通过 Web 服务传递的业务对象，除了一个枚举属性外，它工作正常。无论客户端将其设置为什么，此值始终作为默认值出现在服务器上。很困惑 ：（

这是在服务器上定义的业务对象中的代码：

```
public enum TaskTypeEnum { GoodsReceipt, ImportCosting };

[Serializable, DataContractAttribute]
public class TaskContainer
{
    [DataMemberAttribute] 
    public TaskTypeEnum TaskType { get; set; }       
... 
```

这是设置此属性的客户端上的代码：

```
var container = new TaskContainer();
container.TaskType = TaskTypeEnum.ImportCosting;
service.Save(container); 
```

由于某些未知原因，当此“容器”对象到达服务器时，无论我在客户端上将其设置为什么，TaskType 属性始终设置为 GoodsReceipt。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:55:36.147

你需要确保你的枚举也有一个DataContract，否则它不会被序列化，并且每个成员必须有属性EnumMember

```
[DataContract]
public enum TaskTypeEnum 
{ 
     [EnumMember] 
     GoodsReceipt, 

     [EnumMember] 
     ImportCosting 
} 
```

另请参阅：http: [//msdn.microsoft.com/en-us/library/aa347875.aspx](http://msdn.microsoft.com/en-us/library/aa347875.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:15:37.653

我有一个类似的问题。在原始类型的代理类字段（即不可为空的字段）中，有一个称为 Specified 的第二个字段。

也许在您的情况下，TaskContainer 有一个名为 TaskTypeSpecified 的字段。尝试设置

```
container.TaskTypeSpecified = true; 
```

# ruby-on-rails - 在不同类上使用不同的身份验证密钥设计 STI

> ID：11947983
> 
> 赞同：2
> 
> 时间：2012-08-14T07:52:34.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, mongoid, sti

我有一个 STI 模型结构，其中超类是用户，子类是成员和非成员。我希望一封电子邮件只有一个会员和多个非会员。例如，对于电子邮件`a@gmail.com`，只能有一个 Member 对象，但同时我们可以有多个 NonMember 与该电子邮件用于不同的子域。

请让我知道如何解决这个问题，因为我被困住了，我必须尽快解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:08:43.480

这是 STI 关系以及电子邮件唯一性验证。我希望它会有所帮助！

```
class User < ActiveRecord::Base
end

class Member < User
 validates uniqueness_of :email
end

class NonMember < User
 validates_uniqueness_of :email, :scope => :subdomain
end 
```

# java - HTTP 重定向

> ID：11947985
> 
> 赞同：0
> 
> 时间：2012-08-14T07:52:41.993
> 
> 标签：java, android, http, redirect

我写了一个方法，它应该在所有重定向完成后返回一个 url。但无论我在响应页面中传递的 url 始终是 200 - 好的，我尝试使用 HttpPost 但它总是返回 404 - 未找到。

我使用以下站点来验证 url 是否应该返回 302/301 - 重定向 [http://www.internetofficer.com/seo-tool/redirect-check/](http://www.internetofficer.com/seo-tool/redirect-check/)

```
public static String redirect(String url){

    HttpGet request = new HttpGet(url);
    DefaultHttpClient http_client = new DefaultHttpClient();

    try {
        HttpResponse response = http_client.execute(request);         
        Header[] headers = response.getHeaders("Location");

        if (headers != null && headers.length != 0) {
            String newUrl = headers[headers.length - 1].getValue();
            return redirectToGooglePlay(newUrl);
        } else {
            return url;
        }

    } catch (Exception e) {
        e.printStackTrace();
        return url;
    }
} 
```

# android - 保证金不影响“包括”

> ID：11947987
> 
> 赞同：51
> 
> 时间：2012-08-14T07:52:56.830
> 
> 标签：android, android-layout

我对文章有看法。它使用“包含”，我试图在它们之间留出一点余地。但是，“android:layout_marginTop”似乎对布局没有任何影响。

我究竟做错了什么？

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >    
    <include android:id="@+id/article1" layout="@layout/mainarticle" />
    <include android:id="@+id/article2" android:layout_marginTop="10dip" layout="@layout/article" />
    <include android:id="@+id/article3" android:layout_marginTop="10dip" layout="@layout/article" />
    <include android:id="@+id/article4" android:layout_marginTop="10dip" layout="@layout/article" />
    <include android:id="@+id/article5" android:layout_marginTop="10dip" layout="@layout/article" />    
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-29T10:12:18.813

您应该在标签中添加`android:layout_width`and`android:layout_height`属性。`include`否则，不考虑边距。

> 但是，如果您想使用`<include>`标签覆盖布局属性，则必须同时覆盖`android:layout_height`和`android:layout_width`才能使其他布局属性生效。

[https://developer.android.com/training/improving-layouts/reusing-layouts.html#Include](https://developer.android.com/training/improving-layouts/reusing-layouts.html#Include)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-24T12:37:21.130

我遇到了同样的问题，Kamen Goranchev 的回答对我不起作用。

我从布局编辑器中使用了 ADT 的“提取包含...”功能来提取一些常用的徽章作为 TextView 元素的列表。因此，Extract-include-tool 将我的 TextView-Elements 包装在一个**merge-tag**中，这通常会很好。

但是，根据我在第 888 行[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/LayoutInflater.java#L888](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/LayoutInflater.java#L888)中看到的来自沸水的非常有用的源代码链接，布局-仅当包含没有合并标记作为其根元素时，才解析包含标记本身的属性。

因此，我从包含中删除了合并标签，并使用了另一个 ViewGroup-标签，例如 FrameLayout。然后包含标签中的边距按预期工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-29T03:02:30.950

`include`标签支持以下属性：

1.  `layout_*`任何可以覆盖的android:属性。

2.  `android:id`属性。

3.  `layout`属性。
4.  `android:visibility`属性。

* * *

ETC： `include android:id=”@+id/news_title” android:layout_width=”match_parent” android:layout_height=”match_parent” layout=”@layout/title”/>`

请阅读： [https ://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/LayoutInflater.java#L777](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/LayoutInflater.java#L777)
[http://developer.android.com/training/improving-layouts/reusing-布局.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-04T09:45:08.430

另一种解决方案是在`Space`之前添加`include`：

```
 <Space
        android:layout_height="8dp"
        android:layout_width="match_parent" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-29T05:27:01.717

必须将包含插入到其他布局中。

例如相对布局

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="15dp">

        <include
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            layout="@layout/sub_edit_new_customer" />

    </RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-14T13:29:33.667

就我而言，我通过添加一些填充解决了这个问题。

您要包含的布局：

```
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="15dp"> <!-- add padding here -->

        <!-- your custom layout -->

    </androidx.constraintlayout.widget.ConstraintLayout>

</layout> 
```

# ios - 如何在 UITableviews 中创建数组数组

> ID：11947989
> 
> 赞同：0
> 
> 时间：2012-08-14T07:53:01.710
> 
> 标签：ios, ios5, uitableview

我有两个 tableViewControllers，我的第一个 tableView 包含一个名为文件夹的项目列表，单击它我将打开另一个名为 ItemsInfolder 的 tableView 并显示它们是否存在，否则它将为空。

因此，为此我知道 ItemsInFolder View 应该是一个数组数组，每个数组都位于索引位置（行位置），但我很困惑，如何做到这一点，如何在单击每个文件夹时调用每个索引处的数组.

根据下面的评论更新

```
//FolderTableView
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
   ItemsTableViewController *selectedFolder = [[ItemsTableViewController alloc] initWithNibName:@"ItemsTableViewController" bundle:nil];    

    selectedFolder.selectedfolder = [indexPath row];
    [self.navigationController pushViewController:selectedFolder animated:YES];

}

//ItemsTableView

-(void)xyz operation
{

[m_ItemArray addObject:item];
[appDelegate.2dArray addObject: m_ItemArray];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return  [[appDelegate.2dArray objectAtIndex:m_selectedfolder]count];(selected folder index coming from, folderTable)
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSMutableArray *testArray = [appDelegate.2dArray objectAtIndex:[indexPath row]];
    tableCell.items.text = [testArray objectAtIndex:[indexPath row]];       

    return tableCell;
} 
```

所以朋友们，请帮帮我。

问候兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:22:47.547

被认为是一个`arrayOfFolders`全局的和初始化的，充满了包含你的文件的数组，遵循这个层次结构：

```
arrayOfFolders :
{
   [0]            //Folder 0 (NSArray)
   {
      file1
      file2
      file3
   }
   [1]            //Folder 1 (NSArray)
   {
      file4
      file5
   }
} 
```

当您单击 tableView 中的文件夹时，像这样获取子数组：

```
-(void)didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //To retrieve your array within your array at the seleted index
    NSArray * arrayOfItemsInFolder = [[NSArray alloc] initWithArray:[self.arrayOfFolders objectAtIndexPath:indexPath.row] copyItems:YES];
    //Do your stuff
} 
```

你觉得这合适吗？

# css - 网页加载完成后加载 CDN 上的 CSS

> ID：11947991
> 
> 赞同：1
> 
> 时间：2012-08-14T07:53:04.537
> 
> 标签：css, asynchronous, sync, webpage, cdn

我有一个使用 CDN 流式传输 CSS 文件的网页。我遇到的情况是：我的网页加载太快，当它完成加载时，CSS 文件（在 CDN 上）仍在加载。这样您就可以在没有任何样式的情况下看到带有网页的 Flash 屏幕（因为尚未加载 cdn 上的 css）。那么我怎样才能让它们同步加载，以防止出现“闪屏”。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:32:24.657

如果缓存配置正确，这将不是问题 - 最终用户仅在初始加载时见证一次。

如果您的网站有一个专门的“首次访问”登陆页面（欢迎/登录/免责声明等），您可以包括内联的基本样式（即仅页面立即依赖的规则子集）并从您的CDN 在后台。

话虽如此，@Musa 是绝对正确的：如果这是一个问题，请*获得更好的 CDN*

# php - 使用 PHP 跳过周末计算基于 startdate 和 value 的日期

> ID：11947995
> 
> 赞同：1
> 
> 时间：2012-08-14T07:53:28.403
> 
> 标签：php, date, skip, weekend

我有一个开始日期，假设这是`$startDate = 2012-08-01;`，我​​有一个存储 INT 值的变量，假设这是`$value = 10;`

我想计算从 startdate + 10 天开始的日期并跳过周末。

使用上述值，结果将是`2012-08-15`

这将如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:08:11.563

这远非高效，但是当它可读时谁在乎呢？:)

```
<?php
function calculateNextDate($startDate, $days)
{
        $dateTime = new DateTime($startDate);

        while($days) {
            $dateTime->add(new DateInterval('P1D'));    

            if ($dateTime->format('N') < 6) {
                $days--;
            }
        }

        return $dateTime->format('Y-m-d');
}

echo calculateNextDate('2012-08-01', 10); // return 2012-08-15 
```

[**演示**](http://codepad.viper-7.com/xKsZhz)

发生的事情应该很容易理解。首先，我们`DateTime`使用用户提供的日期创建一个新对象。之后，我们将循环遍历要添加到日期的日期。当我们在周末遇到一天时，我们不会从我们想要添加到日期的天数中减去一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:04:00.737

您可以使用 php 的 strtotime 函数来 + n 天/小时等，

并且不包括周末在这里看看： [32 小时前不包括周末与 php](https://stackoverflow.com/questions/8136468/32-hours-ago-excluding-weekends-with-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:05:52.377

试试这个

```
<?php
function businessdays($begin, $end) {
    $rbegin = is_string($begin) ? strtotime(strval($begin)) : $begin;
    $rend = is_string($end) ? strtotime(strval($end)) : $end;
    if ($rbegin < 0 || $rend < 0)
        return 0;

    $begin = workday($rbegin, TRUE);
    $end = workday($rend, FALSE);

    if ($end < $begin) {
        $end = $begin;
        $begin = $end;
    }

    $difftime = $end - $begin;
    $diffdays = floor($difftime / (24 * 60 * 60)) + 1;

    if ($diffdays < 7) {
        $abegin = getdate($rbegin);
        $aend = getdate($rend);
        if ($diffdays == 1 && ($astart['wday'] == 0 || $astart['wday'] == 6) && ($aend['wday'] == 0 || $aend['wday'] == 6))
            return 0;
        $abegin = getdate($begin);
        $aend = getdate($end);
        $weekends = ($aend['wday'] < $abegin['wday']) ? 1 : 0;
    } else
        $weekends = floor($diffdays / 7);
    return $diffdays - ($weekends * 2);
}

function workday($date, $begindate = TRUE) {
    $adate = getdate($date);
    $day = 24 * 60 * 60;
    if ($adate['wday'] == 0) // Sunday
        $date += $begindate ? $day : -($day * 2);
    return $date;
}

$def_date="";//define your date here
$addDay='5 days';//no of previous days  
date_add($date, date_interval_create_from_date_string($addDay));
echo businessdays($date, $def_date); //date prior to another date 
?> 
```

从[PHP.net修改](http://www.php.net/manual/en/ref.datetime.php#57207)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-14T08:01:53.547

如果您只想添加一个日期 +10，您可能需要考虑这个：

date("Ymd", strtotime("+10 天"));