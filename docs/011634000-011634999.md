# StackOverflow 问答 11634000-11634999

# java - 我如何为 Eclipse 插件打印 org.eclipse.core.resources

> ID：11634007
> 
> 赞同：0
> 
> 时间：2012-07-24T15:18:22.530
> 
> 标签：java, eclipse, eclipse-plugin

我目前正在开发一个 Eclipse 插件。我想在插件的 WorkbenchView 的右键菜单上添加一个项目。此项目应仅对特定对象可见。

我尝试像这样使用 VisibleWhen 标记：

```
 <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:MyURI">
         <command
               commandId="MyCommandId"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <test
                     property="org.eclipse.core.resources.name"
                     value="WORKSPACE">
               </test>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension> 
```

当我这样做时，菜单项永远不会出现。

那么有没有办法测试 org.eclipse.core.resources 的属性值并知道它们有什么问题？

谢谢。

亚历山大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:26:20.600

尝试这样的事情：

```
<visibleWhen 
    checkEnabled="false"> 
<iterate>
   <adapt type="org.eclipse.core.resources.IResource">
      <test property="org.eclipse.core.resources.name" 
            value="*.java"/>
   </adapt>
</iterate> 
```

这将显示所有 *.java 文件的菜单。根据您的需要进行修改。

# python - 按小时拆分时间戳

> ID：11634012
> 
> 赞同：2
> 
> 时间：2012-07-24T15:18:32.603
> 
> 标签：python

我有一个 ISO 格式的时间戳列表

`[u"2000-01-01T00:00:00+00:00", u"2000-01-01T00:00:00+00:00", ... ]`

我正在尝试按小时拆分每个字符串。但是，使用`"string".strp(":")`显然不会起作用，因为`too many values to unpack`错误（由于几个 :'s）并`"string".strp(":%S")`给出`more than one value to unpack`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:21:05.833

`iso8601`是一个很棒的开源 python 模块来解析 ISO 日期时间字符串[http://code.google.com/p/pyiso8601/](http://code.google.com/p/pyiso8601/)

它将它变成了 python 的原生`datetime`类型，应该更容易使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:22:29.263

你有两个选择。您可以使用[`datetime.datetime.strptime`](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)给您`datetime`对象，然后只做`dt.hour`，您可能还是想做，这取决于您对这些对象所做的事情。

或者，或者，如果您只想按原样使用字符串处理，则可以使用`str.split`如您所展示的那样，但带有可选的第二个参数，即最大拆分次数，因此`s.split(":", 1)`. 或者类似地，`str.partition`它基本上会做同样的事情，但不会为没有“：”的东西引发错误。使用这两种方法，您需要在开始时使用切片剥离这些东西。

# java - 将 C 代码移植到 Android

> ID：11634015
> 
> 赞同：0
> 
> 时间：2012-07-24T15:18:39.097
> 
> 标签：java, android, c, android-ndk

我正处于一个项目的最开始，我们正在尝试为安卓智能手机编写一个应用程序，该应用程序将调用一个用 C 编写的共享库。

这样做的方法似乎是使用 Android NDK 以与智能手机硬件兼容的二进制格式构建库，然后使用 JNI 从 Java 调用共享库。可能在此过程中使用 SWIG 来促进 JNI 包装器功能。

但在我走这条路之前，我是否错过了让 C 应用程序在智能手机上运行的任何可能更简单的方法？让我想到可能还有其他选择的是 Canonical 项目希望在智能手机上运行 ubuntu ( [http://www.ubuntu.com/devices/android](http://www.ubuntu.com/devices/android) )，但它似乎还不可用。

感激地收到有关此主题的任何横向想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:28:31.437

据我所知，在 android 中使用本机代码时，NDK 是首选路线。您还可以围绕您的 C 代码构建一个 Java 包装器库，与您的 Android 项目分开，并将该 .jar 包含在您的 Android 应用程序中。这使用标准 Java 而不是 Google 的 NDK，而且我已经使用了几个在 android 中以这种方式构建的库，而且几乎没有任何努力。

# c# - 具有不同时区的.net客户端服务器

> ID：11634021
> 
> 赞同：0
> 
> 时间：2012-07-24T15:18:52.093
> 
> 标签：c#, .net, asp.net-mvc-3

我在应用程序上有一个非常奇怪的行为。服务器在纽约（-5 GMT 时区）和客户端 - 我，在罗马尼亚（+2 GMT 时区），所以有 7 小时的差异。我面临的问题是当我尝试保存日期时，比如说 12:00（日期无关紧要），客户端发送日期为 12:00 的请求，12:00 到达数据库但是当它返回服务器返回 19:00 小时。我试图在本地调试以查看谁弄乱了日期，但由于我在服务器和客户端上的日期相同，因此没有差异。

这是发送到服务器的参数 &startDate=07/25/2012%2012:00:00

这就是结果：1343232000000 - 从纪元开始的秒数（如果你使用转换器 - [http://www.epochconverter.com/](http://www.epochconverter.com/) - 你会看到日期实际上是 2012 年 7 月 25 日星期三 19:00:00

这里有一些代码片段：

```
public static void GetProfessionalsHours(List<long> ids, out List<SalonProfessional> professionals)
    {
        professionals = new List<SalonProfessional>();
        using (SqlConnection conn = new SqlConnection(DbConfig.ConnectionString))
        {
            using (
                SqlCommand command = new SqlCommand("GetProfessionalsHours", conn) { CommandType = CommandType.StoredProcedure })
            {
                conn.Open();
                command.Parameters.AddWithValue("professionalIDs", ids.CommaSeparated());
                using (IDataReader reader = command.ExecuteReader())
                {
                    //get normal schedule
                    while (reader.Read())
                    {
                        professionals.Add(SalonProfessional.GetSalonProfessional(reader));
                    }
                    reader.NextResult();
                    while (reader.Read())
                    {
                        professionals.Find(p => p.ID == reader.GetInt64(1)).Hours.Add(ProfessionalHours.GetProfessionalHour(reader));
                    }
                    //get overriden hours
                    reader.NextResult();
                    while (reader.Read())
                    {
                        professionals.Find(p => p.ID == reader.GetInt64(1)).OverriddenHours.Add(ProfessionalOverriddenHour.GetProfessionalOverriddenHour(reader));
                    }
                }
            }
        }
    }

public static ProfessionalOverriddenHour GetProfessionalOverriddenHour(IDataReader reader)
    {
        return new ProfessionalOverriddenHour()
                   {
                       ID = reader.GetInt64(0),
                       ProfessionalId = reader.GetInt64(1),
                       StartDate = reader.GetDateTime(2),
                       EndDate = reader.GetDateTime(3),
                   };
    }

public JsonResult CalendarData(List<long> professionalIDs, CalendarData calendarData)
    {
        AjaxResponse response = new AjaxResponse();
        response.Success = true;
        CalendarDataResponseObject responseData = new CalendarDataResponseObject();
        response.Content = responseData;

        try
        {
          List<SalonProfessional> professionals = null;
          CalendarOperations.GetProfessionalsHours(professionalIDs, out professionals);
          responseData.Professionals = professionals;

        }
        catch (Exception ex)
        {
            response.Success = true;
            response.ErrorMessage = "Could not retrieve calendar data";
            ExceptionsOperations.LogException(ex, "Could not retrieve calendar data");
        }

        return Json(response, JsonRequestBehavior.AllowGet);
    } 
```

问题出在 ProfessionalOverriddenHour 对象的 StartDate 和 EndDate 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:33:44.917

首先参考 UTC 转换后尝试存储和检索日期字符串。

[这是 Scott Hanselman博客文章](http://www.hanselman.com/blog/BackToBasicsDaylightSavingsTimeBugsStrikeAgainWithSetLastModified.aspx)的摘录

> 换个说法，不要使用 DateTime.Now 进行任何日期计算或存储任何内容。使用 DateTime.UTCNow 并注意，如果您将未来的日期发送给某些方法，它们应该如此。避免在本地时间做任何事情，直到您向用户显示 DateTime 的最后一秒。

另请查看[夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:40:15.987

您可以发送偏移量 (z) 或同意 UTC

```
 Console.WriteLine(DateTime.Now.ToString("hh mm ss z"));
    Console.WriteLine(DateTime.Now.ToUniversalTime().ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:57:16.903

就像已经建议的那样，在存储日期（在数据库、文件等中）时始终使用 UTC，并让客户端自己决定在显示该日期时应该使用哪个时区（只有那时！）

您当然可以通过在日期字符串中包含时区数据来使其工作，但这会使一切变得更加复杂（恕我直言），坚持日期始终为 UTC 的简单情况，除非您将其显示给用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:29:08.587

非常感谢大家的帮助！

问题是服务器和客户端都将日期转换为本地时间。所以解决方案是获取服务器上的小时差异并将它们添加到日期和javascript上以使用UTC时间。基本上，当您不需要时区时，请在任何地方使用 UTC。

# javascript - 如何使用javascript（jquery）替换列表中图像的src？

> ID：11634025
> 
> 赞同：2
> 
> 时间：2012-07-24T15:19:02.537
> 
> 标签：javascript, jquery, internet-explorer, stack-overflow

我想在以下示例中使用 js将**拇指**替换为**大**

**从：**

```
<ul id="slide">
<li><img src="pathtoimg/thumbs/imagename.jpg" /></li>
<li><img src="pathtoimg/thumbs/imagename2.jpg" /></li>
</ul> 
```

**到 ：**

```
<ul id="slide">
<li><img src="pathtoimg/large/imagename.jpg" /></li>
<li><img src="pathtoimg/large/imagename2.jpg" /></li>
</ul> 
```

为了实现它，我使用了以下 js 代码

```
 $(window).load(function(){
 var images = $("#slide li img");
 for(var i = 0; i < images.length; i++)
{
var img = images[i];
var src = img.src.replace("thumbs","large");
img.src = src;
}
  }); 
```

上面的代码在现代浏览器中运行良好，但 Internet Explorer 7 和 8在 line : 0错误处返回**堆栈溢出。**有没有其他方法可以替换列表中 img 的 src 而不会在 ie 上出现错误？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:22:51.893

像这样试试

```
$(document).ready(function(){

    $("#slide > li > img").each(function(){ 
        var t = $(this);
        var src = t.attr('src');
        if(!src || typeof(src)!=='string') return;
        t.attr('src',src.replace('/thumbs/','/large/'));
    }); 

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:23:18.320

试试这个

```
$(window).load(function(){
$("#slide li img").each(function(){
$(this).attr("src",$(this).attr("src").replace("thumbs","large"));
});
}); 
```

# c# - 在特定位置模拟鼠标按下，而不关注我的目标窗口

> ID：11634026
> 
> 赞同：0
> 
> 时间：2012-07-24T15:19:09.420
> 
> 标签：c#, input, mouse

我认为这个问题的标题很清楚。

```
 const int WM_KEYDOWN = 0x100;
        const int WM_KEYUP = 0x101;
        const int WM_SYSCOMMAND = 0x018;
        const int SC_CLOSE = 0x053;
        const int WM_MOUSEMOVE = 0x200;
        int WindowToFind = FindWindow(null, "Untitled - Paint");
        PostMessage(WindowToFind, WM_MOUSEMOVE, 400, 500);
        PostMessage(WindowToFind, WM_KEYDOWN, ((int)Keys.LButton), 0);
        PostMessage(WindowToFind, WM_KEYUP, ((int)Keys.LButton), 0); 
```

以上，是当前代码。这不起作用。（但是，如果我想按 A，postmessage 确实会发布实际的键，它会这样做。但是它在鼠标上失败，或者我失败了）

我还必须指出，我什至不知道 lparam 实际上是什么，我只是习惯将它设置为 null 并将 wparam 设置为键。我什至不确定我是否应该使用 wm_mousemove，因为它看起来像是“接收”而不是实际设置位置。然后我读到 Lparam 应该设置为包含 x 和 y，如 500 * 0x10000 + 500，而 wparam 为 0 等，它没有帮助。谷歌搜索其他方式也没有帮助。我真的不在乎方法，**我只想在另一个没有焦点的窗口上按鼠标左键，在某个位置。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:21:52.320

也许您正在寻找[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx) ( [P/Invoke](http://www.pinvoke.net/default.aspx/user32.sendinput) )

P/Invoke 上的示例代码还显示了如果您想以编程方式提供另一个窗口焦点（不确定这是否是您要完成的任务），如何使用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx)和[SetForegroundWindow 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)

# jquery - jQuery 图像交换 - 重置所有其他图像

> ID：11634032
> 
> 赞同：0
> 
> 时间：2012-07-24T15:19:23.533
> 
> 标签：jquery

下面代码的交换部分工作得很好，但重置部分是我遇到问题的地方。我想要发生的是，当您单击列表中的一张图像时，它们都会恢复为 _off 图像，然后您单击的图像会切换到 _over。

提前致谢。

```
 // Reset 
 $('.show').attr('src').replace("_over","_off");

 // Swap                        
 if($(this).attr("class") == "show") {
    this.src = this.src.replace("_off","_over");
 } else {
    this.src = this.src.replace("_over","_off");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:26:08.677

您可以在绑定图像单击事件处理程序时执行此操作，因为您唯一需要知道的是哪个是当前单击的“img”元素。

```
$('img').click(function(){ // <-- when img is clicked
     $(this).attr('src','_over'); // <-- change current clicked img            src = _over
     $('img').not(this).attr('src','_off'); // <-- change all other img to     src= _off
}); 
```

[http://jsfiddle.net/Tkp4E/](http://jsfiddle.net/Tkp4E/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:23:16.997

更改从返回的值`.attr`不会更改元素。因此，以下内容之一是什么：

如果类中只有一项`show`：

```
$('.show')[0].src.replace("_over","_off"); 
```

如果不止一个，

```
$('.show').each( function() {
  this.src.replace("_over","_off");
}); 
```

# iphone - .xib 文件视图创建新实例

> ID：11634033
> 
> 赞同：0
> 
> 时间：2012-07-24T15:19:23.533
> 
> 标签：iphone, objective-c, ios

我有一个大问题，我不知道如何解决：

我在中创建了一个视图`myViewController.xib`。除了这个视图控制器的主视图之外，还有另一个视图，名为`matchView`.

在我的主视图中，我有一个包含匹配列表的表格视图。我想`matchView`在这个表视图中使用，但是当我调用`addSubview:matchView`最新的信息时会填充这个视图。

如何每次都创建此视图的新实例？

谢谢。

编辑：我解决了自己的问题，我创建了另一个类 matchViewController，然后每次在 cellforrowatindexpath 中创建它并将其用作 [cell addSubview:matchView]。

无论如何感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:23:30.520

您必须为表中的每一行动态创建一个 matchView。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:CellIdentifier] autorelease];
    }
    UIView *matchView = [[[UIView alloc]init]autorelease];
    [matchView setFrame:CGRectMake(0, 0, width_of_your_table, height_of_your_table_cell)];
    //add here, in your matchView whatever content you need to be displaied
    [cell addSubview:matchView];
    return cell;
} 
```

# java - 使用 Apache HttpClient 发布 MultipartEntity 时，ByteArrayBody 有效，但 InputStreamBody 抛出 NoHttpResponseException

> ID：11634038
> 
> 赞同：2
> 
> 时间：2012-07-24T15:19:36.870
> 
> 标签：java, http, apache-httpclient-4.x

我正在尝试发布一些从 InputStream 中获取的数据。我希望避免首先将所有数据收集到一个字节数组中，而是流式传输数据以节省内存（我正在发布大约 10MB 的数据）。

如果我运行以下命令：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(target_url);
MultipartEntity entity = new MultipartEntity();
entity.addPart("data", new InputStreamBody(new ByteArrayInputStream(new byte[1]), 
    filename));
httpPost.setEntity(entity);
httpclient.execute(httpPost); 
```

然后我得到：

```
org.apache.http.NoHttpResponseException: The target server failed to respond
at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:95)
at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:712)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:517)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    [my code starts here] 
```

但是，如果我更改上面的一行，将 InputStreamBody 替换为等效的 ByteArrayBody，那么一切都很好：

```
entity.addPart("data", new ByteArrayBody(new byte[1], filename)); 
```

我究竟做错了什么？

（并且 InputStreamBody 会真正流式传输数据，还是我在浪费时间？）

我正在使用 HttpClient-4.2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:47:07.780

你正在做的事情没有错。问题很可能是在使用`ByteArrayBody`HttpClient 时能够计算总请求内容长度并使用 描述消息`Content-Length`，而在使用`InputStreamBody`HttpClient 时必须求助于内容分块（使用`Transfer-Encoding`标头）。我怀疑服务器端脚本根本无法处理没有`Content-Length`标头的请求。

# winapi - 如何调整/删除工具栏边界矩形

> ID：11634039
> 
> 赞同：1
> 
> 时间：2012-07-24T15:19:38.973
> 
> 标签：winapi, toolbar

我已经从应用程序创建了我的工具栏，只有 4 个按钮，每个按钮的大小为 80 x 64 像素。整个位图为 320 x 64。

```
const int numButtons     = 4;
const SIZE bitmapSize={80,64};
HIMAGELIST hImageList = ImageList_Create(bitmapSize.cx, bitmapSize.cy, ILC_COLOR16 | ILC_MASK,numButtons, 0);

HBITMAP hBitmap = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_HOME));
int iImageList = ImageList_AddMasked(hImageList, hBitmap, 0);
SendMessage(hWndToolbar, TB_SETIMAGELIST, 0, (LPARAM)hImageList);

TBBUTTON tbButtons[numButtons] = 
{
    { 0, WM_BBBB1, TBSTATE_ENABLED, TBSTYLE_BUTTON, {0}, 0, 0},
    { 1, WM_BBBB2, TBSTATE_ENABLED, TBSTYLE_BUTTON, {0}, 0, 0},
    { 2, WM_BBBB3, TBSTATE_ENABLED, TBSTYLE_BUTTON, {0}, 0, 0},
    { 3, WM_BBBB4, TBSTATE_ENABLED, TBSTYLE_BUTTON, {0}, 0, 0}
};

// Add buttons.
SendMessage(hWndToolbar, TB_BUTTONSTRUCTSIZE, (WPARAM)sizeof(TBBUTTON), 0);
SendMessage(hWndToolbar, TB_ADDBUTTONS,(WPARAM)numButtons,(LPARAM)&tbButtons);
SendMessage(hWndToolbar, TB_AUTOSIZE, 0, 0); 

RECT _tbRect;
SendMessage(hWndToolbar, TB_GETITEMRECT, 0, (LPARAM)&_tbRect);//0,0,87,70 
```

它说按钮的宽度为 87，高度为 70，如果我的位图有自己的边界大小并且我不希望控件为工具栏添加边界矩形，我该怎么办？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:46:42.917

试着打电话

```
SendMessage(hWndToolbar, TB_SETBUTTONSIZE, 0, (LPARAM)MAKELONG(80,64)); // or some wanted values 
```

后`TB_ADDBUTTONS`

# php - 链接数据库表

> ID：11634042
> 
> 赞同：0
> 
> 时间：2012-07-24T15:19:47.037
> 
> 标签：php, html, sql

随着我正在从事的项目，我正在越来越深入地涉足未知领域。作为其中的一部分，我必须为管理员和用户创建一个登录创建系统。管理员需要能够创建产品，用户需要能够购买产品，因此需要将详细信息链接到他们的帐户。我有点迷茫我应该从哪里开始。有很多关于 sql 数据库的信息，但我想要实现的背后的逻辑是什么？我目前正在使用 php 和 html 表单来收集数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:25:43.013

基本上你需要的是创建一个mysql数据库，我建议使用navicat作为数据库编辑器。

然后我建议你创建 2 个表，类别，项目。

最简单的表结构

类别：

1.  ID（类别唯一 ID）
2.  名称（非 NULL，varchar）

物品：

1.  ID（唯一ID，数据库AI（自动增量），基本上它给出ID = prevID + 1）
2.  名称（非 NULL，varchar）
3.  价格（整数 11）
4.  类别（根类别的 ID）

然后你需要做的是使用集成的 mysql 函数，我建议你[以此](http://www.w3schools.com/php/php_mysql_intro.asp)为指导如何使用 PHP 的数据库，将数据发送到数据库并从数据库接收数据。

基本上就是这样。

**编辑[1](http://www.w3schools.com/php/php_mysql_intro.asp)：**所以基本上你需要重组你的数据库。

管理员表：

1.  ID
2.  姓名

用户表：

1.  ID
2.  姓名

物品表：

1.  ID
2.  姓名
3.  店铺编号
4.  管理员 ID

店铺表：

1.  ID
2.  姓名

销售表：

1.  ID
2.  商品编号
3.  用户身份

当 Admin ID=x 选择 Shop id=x1 并创建带有 shop=x1 和 admin=x 且唯一 ID=x3 的商品时，用户可以购买商品 ID=x3 并且当它被出售给您时

1.  可以从 Item 表中删除 Item ID=x3 并插入带有 Item id=x3 的 Sales 新记录
2.  或者您可以添加另一个列（数量）并用 PHP 减去用户购买的数量，然后将数量放在销售表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:25:27.117

在考虑实现之前，您需要处理数据的基本逻辑和属性。首先是你在看什么样的产品，你需要什么样的属性与每个产品相关联。然后，您需要考虑实现基本数据库设置、前端设置等功能的业务逻辑，最重要的是安全功能和支付功能。您确实应该有一个强大的想法，并且可以粗略地想象出您真正想要的东西，并且始终可以在此过程中进行更改。

# groovy - 如何使用 Groovy Closure 选择特定字段

> ID：11634051
> 
> 赞同：3
> 
> 时间：2012-07-24T15:20:02.060
> 
> 标签：groovy, closures

鉴于：

```
class FruitBasket {
    int apples = 0
    int oranges = 0
} 
```

我需要从每个 FruitBasket 中挑选出苹果。需要在processFruit中完成的工作：

```
def processFruit(list, picker) {
    list.each {
        println "processing " + picker(it)
    }
}

def processAll() {
    List fruitList = [
        new FruitBasket("apples": 2, "oranges": 4),
        new FruitBasket("apples": 3, "oranges": 5)
    ]

    processFruit(fruitList, applePicker)
}

def applePicker(FruitBasket f) {
    return f.getApples()    
} 
```

但它在抱怨@runtime

```
No such property: applePicker for class: FooTest 
```

可能是关闭 FruitBasket arg 的问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T15:32:38.540

在该代码中，applePicker 是一个方法，而不是一个闭包。

您可以使用方法句柄将方法作为参数传递，如下所示：

```
processFruit(fruitList, this.&applePicker) 
```

或将其更改为实际的闭包：

```
def applePicker = { FruitBasket f -> return f.getApples()    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:35:05.820

您正在传递`applePicker`给`processFruit`，但它是一种方法。你只能通过这种方式传递闭包。像这样重新定义`applePicker`为闭包：

```
applePicker = { FruitBasket f ->
    return f.getApples()
} 
```

`processFruit`或者在被调用时将该方法转换为闭包：

```
processFruit(fruitList, this.&applePicker) 
```

# ios - 一般设计 - 我在哪里放置集中访问的对象

> ID：11634056
> 
> 赞同：1
> 
> 时间：2012-07-24T15:20:17.153
> 
> 标签：ios

我有我的主要应用程序委托我有一些由 Storyboard 驱动的 UIViewController 派生实例

假设我想为我的应用程序提供一个集中的持久层——也许是 SQLite 的核心数据。我会把这些物品放在哪里？我缺少一些可以从所有 UIViewController 实例中访问的可集中访问的“应用程序”类。

这里有一个模式可以遵循吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:23:45.420

你应该检查[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)：

> 在软件工程中，单例模式是一种将类的实例化限制为一个对象的设计模式。当需要一个对象来协调整个系统的动作时，这很有用。这个概念有时被推广到当只有一个对象存在时运行效率更高的系统，或者将实例化限制为一定数量的对象。该术语来自单例的数学概念。

这是示例实现的来源：[我的 Objective-C 单例应该是什么样子？](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)

这是现代解决方案的直接链接： [https ://stackoverflow.com/a/145395/644629](https://stackoverflow.com/a/145395/644629)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:05:16.050

使用具有应用程序生命周期范围的单例模式。

```
@interface DataManager ()

@end

#pragma mark -

@implementation DataManager

#pragma mark - Shared Instance

static DataManager* sharedInstance = nil;

#pragma mark - Singleton Methods

- (id)init
{
  self = [super init];

  if (self) {
    // Initialization code here.
  }

  return self;
}

+ (DataManager*)sharedInstance
{
    @synchronized([DataManager class])
    {
        if (!sharedInstance) {

      //[[self alloc] init];
      sharedInstance = [[DataManager alloc] init];

    }
        return sharedInstance;
    }

    return nil;
}

+ (id)alloc
{
    @synchronized([DataManager class])
    {
        NSAssert(sharedInstance == nil, @"Attempted to allocate a second instance \
             of a singleton.");

    sharedInstance = [super alloc];

    return sharedInstance;
    }

    return nil;
}

@end 
```

在 .h 文件中声明您的属性并在 .m 文件中合成它们。

要使用该属性，只需调用：

```
// set value
[[DataManager sharedInstance] setSharedProperty:@"ABC"]; // If its a string

// get Value
NSLog(@"value :  %@", [[DataManager sharedInstance] sharedProperty]); 
```

希望这是您所需要的。

享受编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:26:28.600

您所描述的是您的模型层。管理模型有两种主要方法：

*   在应用程序启动时，创建主模型对象并将其交给第一个视图控制器。
*   使主模型对象成为单例。

两种情况下的“主要模型对象”通常是某种对象管理器。它可能是一个文档，或者`PersonManager`如果你有一堆`Person`对象，它可能是一个。该对象将从您的持久存储（通常是核心数据）中出售模型对象。

这里单例的优点是实现起来更容易一些，而且你不必绕过管理器。非单例的优点是更容易拥有多个（对于基于文档的系统），并且比单例更容易测试和推理非单例。也就是说，可能我 80% 的项目都使用单例模型管理器。

作为旁注，您似乎已经理解：永远不要将模型存储在应用程序委托中，也永远不要将应用程序委托用作“集合点”来访问模型。也就是说，永远不要`sharedModel`在应用程序委托上使用方法。如果您发现自己`[[UIApplication sharedApplication] delegate]`在代码中的任何位置调用，那么您几乎总是在做错事。将数据挂在应用程序委托上会使代码重用变得极其困难。

# javascript - 如何在Javascript中的数组中获取字符串的订单号？

> ID：11634061
> 
> 赞同：2
> 
> 时间：2012-07-24T15:20:31.223
> 
> 标签：javascript, arrays

这是一个数组：

```
var array = new Array();
array[0] = "sound1.mp3"
array[1] = "sound2.mp3"
array[2] = "sound3.mp3" 
```

在我编写的函数中，我需要获取字符串的订单号。

这是我到目前为止所得到的：

```
function registerSound(array, i) {
    var arrno = ???;
    var arrurl = array[i];

    soundManager.createSound({ id: 'sound' + arrno, url: arrurl });
}

function processArray(array) {;
    for(i=1; i<array.length; i++) {
         registerSound(array, i);
    }
} 
```

该`arrno`变量应具有`"sound2.mp3"`（在这种情况下`1`）的订单号。需要进行设置，以便当`for`语句转到数组中的下一个字符串时，该`arrno`变量将包含`"sound3.mp3"`(2) 的顺序号。

首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:32:42.483

```
function registerSound(array, i) {
    var arrurl = array[i];
    soundManager.createSound({
        id: 'sound' + i,
        url: arrurl
    });
} 
```

此外，声明您的变量并从以下位置开始您的循环`0`：

```
function processArray(array) {;
    for (var i = 0; i < array.length; i++) {
        registerSound(array, i);
    }
} 
```

# opengl - (L)Ubuntu - 找不到 libGL.so 但 OpenGL 工作得很好

> ID：11634068
> 
> 赞同：3
> 
> 时间：2012-07-24T15:20:49.600
> 
> 标签：opengl, ubuntu, mesa

我正在尝试创建一个 OpenGL 程序，但我无法链接它，因为我总是收到无法找到 libGL 的链接器错误。我以为它没有安装，所以我安装了所有 Mesa OpenGL 的东西。libgl1-mesa-* 台面-*

我的驱动程序是 xserver-xorg-video-intel。所有安装的 OpenGL 软件都运行良好（linke Xmoto 和 Compitz）。所以我认为可能缺少符号链接。我搜索了 /usr/lib 文件夹，但只找到了 libGLEW.so（没有 libGL.so）。标题在那里。在 /usr/include/GL

然后我试图让 pkg-config 给我 OpenGL 库的路径，但它不会给出任何路径，只是链接器标志 -lGL。而“pkg-config --libs-only-L gl”什么也不返回。

我的 glxinfo 输出是：

```
name of display: :0
display: :0 screen: 0
direct rendering: Yes
server glx vendor string: SGI
server glx version string: 1.4
server glx extensions:
    GLX_ARB_multisample, GLX_EXT_import_context, GLX_EXT_texture_from_pixmap,
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_copy_sub_buffer,
    GLX_OML_swap_method, GLX_SGI_swap_control, GLX_SGIS_multisample,
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group,
    GLX_INTEL_swap_event
client glx vendor string: Mesa Project and SGI
client glx version string: 1.4
client glx extensions:
    GLX_ARB_create_context, GLX_ARB_create_context_profile,
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context,
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_EXT_framebuffer_sRGB,
    GLX_EXT_create_context_es2_profile, GLX_MESA_copy_sub_buffer,
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control,
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read,
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample,
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group,
    GLX_EXT_texture_from_pixmap, GLX_INTEL_swap_event
GLX version: 1.4
GLX extensions:
    GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context,
    GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_copy_sub_buffer,
    GLX_MESA_multithread_makecurrent, GLX_MESA_swap_control,
    GLX_OML_swap_method, GLX_OML_sync_control, GLX_SGI_make_current_read,
    GLX_SGI_swap_control, GLX_SGI_video_sync, GLX_SGIS_multisample,
    GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, GLX_SGIX_visual_select_group,
    GLX_EXT_texture_from_pixmap
OpenGL vendor string: Tungsten Graphics, Inc
OpenGL renderer string: Mesa DRI Intel(R) Ironlake Mobile
OpenGL version string: 2.1 Mesa 8.0.2
OpenGL shading language version string: 1.20
OpenGL extensions:
    GL_ARB_multisample, GL_EXT_abgr, GL_EXT_bgra, GL_EXT_blend_color,
    GL_EXT_blend_minmax, GL_EXT_blend_subtract, GL_EXT_copy_texture,
    GL_EXT_polygon_offset, GL_EXT_subtexture, GL_EXT_texture_object,
    GL_EXT_vertex_array, GL_EXT_compiled_vertex_array, GL_EXT_texture,
    GL_EXT_texture3D, GL_IBM_rasterpos_clip, GL_ARB_point_parameters,
    GL_EXT_draw_range_elements, GL_EXT_packed_pixels, GL_EXT_point_parameters,
    GL_EXT_rescale_normal, GL_EXT_separate_specular_color,
    GL_EXT_texture_edge_clamp, GL_SGIS_generate_mipmap,
    GL_SGIS_texture_border_clamp, GL_SGIS_texture_edge_clamp,
    GL_SGIS_texture_lod, GL_ARB_framebuffer_sRGB, GL_ARB_multitexture,
    GL_EXT_framebuffer_sRGB, GL_IBM_multimode_draw_arrays,
    GL_IBM_texture_mirrored_repeat, GL_3DFX_texture_compression_FXT1,
    GL_ARB_texture_cube_map, GL_ARB_texture_env_add, GL_ARB_transpose_matrix,
    GL_EXT_blend_func_separate, GL_EXT_fog_coord, GL_EXT_multi_draw_arrays,
    GL_EXT_secondary_color, GL_EXT_texture_env_add,
    GL_EXT_texture_filter_anisotropic, GL_EXT_texture_lod_bias,
    GL_INGR_blend_func_separate, GL_NV_blend_square, GL_NV_light_max_exponent,
    GL_NV_texgen_reflection, GL_NV_texture_env_combine4,
    GL_SUN_multi_draw_arrays, GL_ARB_texture_border_clamp,
    GL_ARB_texture_compression, GL_EXT_framebuffer_object,
    GL_EXT_texture_env_combine, GL_EXT_texture_env_dot3, GL_MESA_window_pos,
    GL_NV_packed_depth_stencil, GL_NV_texture_rectangle, GL_NV_vertex_program,
    GL_ARB_depth_texture, GL_ARB_occlusion_query, GL_ARB_shadow,
    GL_ARB_texture_env_combine, GL_ARB_texture_env_crossbar,
    GL_ARB_texture_env_dot3, GL_ARB_texture_mirrored_repeat,
    GL_ARB_window_pos, GL_ATI_envmap_bumpmap, GL_EXT_stencil_two_side,
    GL_EXT_texture_cube_map, GL_NV_depth_clamp, GL_NV_vertex_program1_1,
    GL_APPLE_packed_pixels, GL_APPLE_vertex_array_object, GL_ARB_draw_buffers,
    GL_ARB_fragment_program, GL_ARB_fragment_shader, GL_ARB_shader_objects,
    GL_ARB_vertex_program, GL_ARB_vertex_shader, GL_ATI_draw_buffers,
    GL_ATI_texture_env_combine3, GL_ATI_texture_float, GL_EXT_shadow_funcs,
    GL_EXT_stencil_wrap, GL_MESA_pack_invert, GL_MESA_ycbcr_texture,
    GL_ARB_depth_clamp, GL_ARB_fragment_program_shadow,
    GL_ARB_half_float_pixel, GL_ARB_point_sprite, GL_ARB_shading_language_100,
    GL_ARB_sync, GL_ARB_texture_non_power_of_two, GL_ARB_vertex_buffer_object,
    GL_ATI_blend_equation_separate, GL_EXT_blend_equation_separate,
    GL_OES_read_format, GL_ARB_color_buffer_float, GL_ARB_pixel_buffer_object,
    GL_ARB_texture_compression_rgtc, GL_ARB_texture_float,
    GL_ARB_texture_rectangle, GL_EXT_packed_float, GL_EXT_pixel_buffer_object,
    GL_EXT_texture_compression_rgtc, GL_EXT_texture_rectangle,
    GL_EXT_texture_sRGB, GL_EXT_texture_shared_exponent,
    GL_ARB_framebuffer_object, GL_EXT_framebuffer_blit,
    GL_EXT_framebuffer_multisample, GL_EXT_packed_depth_stencil,
    GL_APPLE_object_purgeable, GL_ARB_vertex_array_object,
    GL_ATI_separate_stencil, GL_EXT_draw_buffers2,
    GL_EXT_gpu_program_parameters, GL_EXT_texture_array,
    GL_EXT_texture_integer, GL_EXT_texture_sRGB_decode, GL_EXT_timer_query,
    GL_OES_EGL_image, GL_MESA_texture_array, GL_ARB_copy_buffer,
    GL_ARB_depth_buffer_float, GL_ARB_half_float_vertex,
    GL_ARB_map_buffer_range, GL_ARB_texture_rg, GL_ARB_texture_swizzle,
    GL_ARB_vertex_array_bgra, GL_EXT_separate_shader_objects,
    GL_EXT_texture_swizzle, GL_EXT_vertex_array_bgra,
    GL_NV_conditional_render, GL_ARB_ES2_compatibility,
    GL_ARB_draw_elements_base_vertex, GL_ARB_explicit_attrib_location,
    GL_ARB_fragment_coord_conventions, GL_ARB_provoking_vertex,
    GL_ARB_sampler_objects, GL_ARB_seamless_cube_map,
    GL_ARB_shader_texture_lod, GL_EXT_provoking_vertex, GL_EXT_texture_snorm,
    GL_MESA_texture_signed_rgba, GL_ARB_robustness

32 GLX Visuals
    visual x bf lv rg d st colorbuffer sr ax dp st accumbuffer ms cav
  id dep cl sp sz l ci b ro r g b a F gb bf th cl r g b a ns b eat
----------------------------------------------------------------------------
0x021 24 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x022 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x08e 24 tc 0 24 0 r . . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x08f 24 tc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x090 24 tc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x091 24 tc 0 24 0 r . . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x092 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x093 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x094 24 tc 0 32 0 r . . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x095 24 tc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x096 24 tc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x097 24 tc 0 32 0 r . . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x098 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x099 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 16 16 16 0 0 0 Slow
0x09a 24 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x09b 24 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 16 16 16 16 0 0 Slow
0x09c 24 dc 0 24 0 r . . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x09d 24 dc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x09e 24 dc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x09f 24 dc 0 24 0 r . . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x0a0 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x0a1 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x0a2 24 dc 0 32 0 r . . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x0a3 24 dc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x0a4 24 dc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x0a5 24 dc 0 32 0 r . . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x0a6 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x0a7 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x0a8 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 16 16 16 0 0 0 Slow
0x0a9 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x0aa 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 16 16 16 16 0 0 Slow
0x05d 32 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None

48 GLXFBConfigs:
    visual x bf lv rg d st colorbuffer sr ax dp st accumbuffer ms cav
  id dep cl sp sz l ci b ro r g b a F gb bf th cl r g b a ns b eat
----------------------------------------------------------------------------
0x05e 0 tc 0 16 0 r . . 5 6 5 0 . . 0 0 0 0 0 0 0 0 0 None
0x05f 0 tc 0 16 0 r y . 5 6 5 0 . . 0 0 0 0 0 0 0 0 0 None
0x060 0 tc 0 16 0 r y . 5 6 5 0 . . 0 0 0 0 0 0 0 0 0 None
0x061 0 tc 0 16 0 r . . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x062 0 tc 0 16 0 r y . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x063 0 tc 0 16 0 r y . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x064 24 tc 0 24 0 r . . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x065 24 tc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x066 24 tc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x067 24 tc 0 24 0 r . . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x068 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x069 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x06a 24 tc 0 32 0 r . . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x06b 24 tc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x06c 24 tc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x06d 24 tc 0 32 0 r . . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x06e 24 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x06f 32 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x070 0 tc 0 16 0 r y . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x071 0 tc 0 16 0 r y . 5 6 5 0 . . 0 16 0 16 16 16 0 0 0 Slow
0x072 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x073 24 tc 0 24 0 r y . 8 8 8 0 . . 0 24 8 16 16 16 0 0 0 Slow
0x074 24 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x075 24 tc 0 32 0 r y . 8 8 8 8 . . 0 24 8 16 16 16 16 0 0 Slow
0x076 0 dc 0 16 0 r . . 5 6 5 0 . . 0 0 0 0 0 0 0 0 0 None
0x077 0 dc 0 16 0 r y . 5 6 5 0 . . 0 0 0 0 0 0 0 0 0 None
0x078 0 dc 0 16 0 r y . 5 6 5 0 . . 0 0 0 0 0 0 0 0 0 None
0x079 0 dc 0 16 0 r . . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x07a 0 dc 0 16 0 r y . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x07b 0 dc 0 16 0 r y . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x07c 24 dc 0 24 0 r . . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x07d 24 dc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x07e 24 dc 0 24 0 r y . 8 8 8 0 . . 0 0 0 0 0 0 0 0 0 None
0x07f 24 dc 0 24 0 r . . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x080 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x081 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x082 24 dc 0 32 0 r . . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x083 24 dc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x084 24 dc 0 32 0 r y . 8 8 8 8 . . 0 0 0 0 0 0 0 0 0 None
0x085 24 dc 0 32 0 r . . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x086 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x087 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x088 0 dc 0 16 0 r y . 5 6 5 0 . . 0 16 0 0 0 0 0 0 0 None
0x089 0 dc 0 16 0 r y . 5 6 5 0 . . 0 16 0 16 16 16 0 0 0 Slow
0x08a 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 0 0 0 0 0 0 None
0x08b 24 dc 0 24 0 r y . 8 8 8 0 . . 0 24 8 16 16 16 0 0 0 Slow
0x08c 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 0 0 0 0 0 0 None
0x08d 24 dc 0 32 0 r y . 8 8 8 8 . . 0 24 8 16 16 16 16 0 0 Slow 
```

如前所述，每个安装的 OpenGL 应用程序都可以工作，但缺少该库。我也找不到“台面”文件夹。

# android - 在 WebView 中更改 URL 而不是打开浏览器

> ID：11634070
> 
> 赞同：2
> 
> 时间：2012-07-24T15:20:55.280
> 
> 标签：android, android-fragments, android-webview

当我单击 WebView 中的链接时，Android 打开浏览器而不是更改 WebView 中的 URL。

这是我在 WebView 所在的片段（R.layout.webview 仅包含 WebView）：

```
package com.example.fragments;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;

public class EuDetailsFragment extends Fragment {
    private WebView viewer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        viewer = (WebView) inflater.inflate(R.layout.webview, container, false);

        return viewer;
    }

    public void updateUrl(String newUrl) {
        Log.d("EuDetailsFragment", "Updating url...");
        WebView detailsView = (WebView) getView().findViewById(R.id.detailsView);
        detailsView.loadUrl(newUrl);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T17:24:21.433

默认行为是，当您单击链接时，它将要求 ActivityManager 找到合适的应用程序来处理该链接。您可以像这样覆盖此行为（这将强制当前 WebView 自行加载新的 url）：

```
 mWebView.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:22:50.203

这是你要找的吗？：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
startActivity(intent); 
```

# vba - 以当前日期关闭宏

> ID：11634078
> 
> 赞同：2
> 
> 时间：2012-07-24T15:21:17.613
> 
> 标签：vba, excel

我正在使用宏来关闭多个文件，其中一个使用文件名中的当前日期。我需要宏在工作簿中单击，然后将其关闭并保存。我想我几乎拥有它，但我无法在活动工作簿中单击宏，该文件名每天都会更改。这就是我所拥有的。

```
Dim ClosePath As String
Dim ClosePathDate As String

ClosePath = "File_":
ClosePathDate = ClosePath & Format(Date, "YYYYMMDD") & ".xlsx"

Windows("ClosePathDate").Activate
Sheets("Sheet1").Select
Range("A1").Select
ActiveWorkbook.Close SaveChanges:=True 
```

我不知道如何使用“ Windows("ClosePathDate") ” 我也试过 Windows=ClosePathDate.Activate，没有运气。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:32:18.537

即使工作簿在另一个 Excel 实例中打开，这也将起作用。顺便说一句，您不需要选择它来关闭它。

```
Sub Sample()
    Dim ClosePath As String
    Dim ClosePathDate As String
    Dim xlObj As Object

    ClosePath = "File_":
    ClosePathDate = ClosePath & Format(Date, "YYYYMMDD") & ".xlsx"

    '~~> Replace "C:\" with the relevant path
    Set xlObj = GetObject("C:\" & ClosePathDate)
    xlObj.Application.Workbooks(ClosePathDate).Close SaveChanges:=False
End Sub 
```

另一种方式

```
Sub Sample()
    Dim wb As Workbook
    Dim ClosePath As String
    Dim ClosePathDate As String

    ClosePath = "File_":
    ClosePathDate = ClosePath & Format(Date, "YYYYMMDD") & ".xlsx"

    Set wb = Workbooks(ClosePathDate)

    wb.Close SaveChanges:=False
End Sub 
```

# c# - 如何在 C# 中获取变量的数据类型？

> ID：11634079
> 
> 赞同：118
> 
> 时间：2012-07-24T15:21:21.947
> 
> 标签：c#, types

如何找出某个变量所持有的数据类型？（例如 int、string、char 等）

我现在有这样的事情：

```
private static void Main()
{
   var someone = new Person();
   Console.WriteLine(someone.Name.typeOf());
}

public class Person
{
    public int Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-07-24T16:02:40.013

Other answers offer good help with this question, but there is an important and subtle issue that none of them addresses directly. There are two ways of considering type in C#: *static type* and *run-time type*.

Static type is the type of a variable in your source code. It is therefore a compile-time concept. This is the type that you see in a tooltip when you hover over a variable or property in your development environment.

Run-time type is the type of an object in memory. It is therefore a run-time concept. This is the type returned by the `GetType()` method.

An object's run-time type is frequently different from the static type of the variable, property, or method that holds or returns it. For example, you can have code like this:

```
object o = "Some string"; 
```

The static type of the variable is `object`, but at run time, the type of the variable's *referent* is `string`. Therefore, the next line will print "System.String" to the console:

```
Console.WriteLine(o.GetType()); // prints System.String 
```

But, if you hover over the variable `o` in your development environment, you'll see the type `System.Object` (or the equivalent `object` keyword).

For value-type variables, such as `int`, `double`, `System.Guid`, you know that the run-time type will always be the same as the static type, because value types cannot serve as the base class for another type; the value type is guaranteed to be the most-derived type in its inheritance chain. This is also true for sealed reference types: if the static type is a sealed reference type, the run-time value must either be an instance of that type or `null`.

Conversely, if the static type of the variable is an abstract type, then it is guaranteed that the static type and the runtime type will be different.

To illustrate that in code:

```
// int is a value type
int i = 0;
// Prints True for any value of i
Console.WriteLine(i.GetType() == typeof(int));

// string is a sealed reference type
string s = "Foo";
// Prints True for any value of s
Console.WriteLine(s == null || s.GetType() == typeof(string));

// object is an unsealed reference type
object o = new FileInfo("C:\\f.txt");
// Prints False, but could be true for some values of o
Console.WriteLine(o == null || o.GetType() == typeof(object));

// FileSystemInfo is an abstract type
FileSystemInfo fsi = new DirectoryInfo("C:\\");
// Prints False for all non-null values of fsi
Console.WriteLine(fsi == null || fsi.GetType() == typeof(FileSystemInfo)); 
```

* * *

Another user edited this answer to incorporate a function that appears below in the comments, a generic helper method to use type inference to get a reference to a variable's static type at run time, thanks to `typeof`:

```
Type GetStaticType<T>(T x) => typeof(T); 
```

You can use this function in the example above:

```
Console.WriteLine(GetStaticType(o)); // prints System.Object 
```

But this function is of limited utility unless you want to protect yourself against refactoring. When you are writing the call to `GetStaticType`, you already know that o's static type is object. You might as well write

```
Console.WriteLine(typeof(object)); // also prints System.Object! 
```

This reminds me of some code I encountered when I started my current job, something like

```
SomeMethod("".GetType().Name); 
```

instead of

```
SomeMethod("String"); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-03-28T18:43:24.927

它非常简单

```
variable.GetType().Name 
```

它将返回您变量的数据类型

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-24T15:24:19.727

一般来说，你几乎不需要进行类型比较，除非你用反射或接口做一些事情。尽管如此：

如果您知道要与之比较的类型，请使用`is`or`as`运算符：

```
if( unknownObject is TypeIKnow ) { // run code here 
```

运算符执行强制转换，`as`如果失败则返回 null 而不是异常：

```
TypeIKnow typed = unknownObject as TypeIKnow; 
```

如果您不知道类型并且只需要运行时类型信息，请使用 .GetType() 方法：

```
Type typeInformation = unknownObject.GetType(); 
```

在较新版本的 C# 中，您可以使用`is`运算符来声明变量，而无需使用`as`：

```
if( unknownObject is TypeIKnow knownObject ) {
    knownObject.SomeMember();
} 
```

以前你必须这样做：

```
TypeIKnow knownObject;
if( (knownObject = unknownObject as TypeIKnow) != null ) {
    knownObject.SomeMember();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-24T15:24:20.150

只需将光标悬停在您感兴趣的成员上，然后查看工具提示 - 它会显示成员的类型：

![在此处输入图像描述](../Images/66799a4f49ebadf66dd0258336af2c94.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-24T15:23:31.070

使用 GetType() 方法

[http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx](http://msdn.microsoft.com/en-us/library/system.object.gettype.aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-25T20:50:38.507

一种选择是使用如下的辅助扩展方法：

```
public static class MyExtensions
{
    public static System.Type Type<T>(this T v) => typeof(T);
}

var i = 0;
console.WriteLine(i.Type().FullName); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T15:24:12.453

`GetType()`方法

```
int n = 34;
Console.WriteLine(n.GetType());
string name = "Smome";
Console.WriteLine(name.GetType()); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-14T07:57:57.993

使用`Object.GetType`方法，这将完成工作。

如果您只想知道变量的类型：

```
var test = (byte)1;
Console.WriteLine(test.GetType()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-09T12:06:15.977

查看执行此操作的一种简单方法

// 从控制台读取字符串

```
string line = Console.ReadLine(); 
int valueInt;
float valueFloat;

if (int.TryParse(line, out valueInt)) // Try to parse the string as an integer
    Console.Write("This input is of type Integer.");
else if (float.TryParse(line, out valueFloat)) 
    Console.Write("This input is of type Float.");
else
    Console.WriteLine("This input is of type string."); 
```

# ios - IOS - 如何在后台运行应用程序？

> ID：11634083
> 
> 赞同：0
> 
> 时间：2012-07-24T15:21:36.767
> 
> 标签：ios, cocoa, ios5, tcp, background

我正在开发一个应用程序，他的任务之一是将 tcp 中的消息发送到服务器。我希望应用程序继续发送该 tcp 消息，即使用户退出应用程序。

我可以做到这一点：

“在您的 Info.plist 中，将 LSBackgroundOnly 设置为 1。”

但它不起作用（我只是在模拟器上测试过）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T18:41:46.410

我只是将 Holex 的评论放入答案表单中来处理这个问题。正如他所说，只有 3 种类型的服务允许在应用程序的后台运行，即定位服务、音频和 VoIP。Apple的以下[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)可以很好地了解您能做什么和不能做什么。关于应用程序失去焦点时发生的结构的相当详细的文章。

但是，或者，如果您不打算通过应用商店发布，则可以伪造 VoIP 应用程序并在后台发送/接收消息。然而，这不是一个合法的解决方案，除了你需要一些快速且非常肮脏的东西之外，真的应该使用它。

[iOS Voip Socket will not run in background](https://stackoverflow.com/questions/6601536/ios-voip-socket-will-not-run-in-background)这个问题，任何相关的问题都是很好的起点。

# mysql - 用户 'User'@'%' 和 'User'@'localhost' 不一样吗？

> ID：11634084
> 
> 赞同：49
> 
> 时间：2012-07-24T15:21:43.127
> 
> 标签：mysql

我根据第一个命令创建了一个用户，但无法通过 localhost (linux) 登录。此链接[mysqldoc](http://forums.mysql.com/read.php?101,304823,305463#msg-305463)表明我需要创建第二个同名用户，但使用第二个命令块中的语法。

```
mysql> CREATE USER 'myuser'@'%' IDENTIFIED BY '4myuser';
Query OK, 0 rows affected (0.00 sec)

mysql> GRANT ALL ON my_upload.* TO 'myuser'@'%' IDENTIFIED BY '4myuser';
Query OK, 0 rows affected (0.00 sec) 
```

所以我尝试如下，它确实有效。但是这两个不同的用户吗？如果我将 pw 更改为一个，另一个会同步，还是它们真的是独立的用户？

```
mysql> CREATE USER 'myuser'@'localhost' IDENTIFIED BY '4myuser';
Query OK, 0 rows affected (0.00 sec)

mysql> GRANT ALL PRIVILEGES ON my_upload.* TO  'myuser'@'localhost';
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-24T15:23:56.640

`User@%`将允许从所有位置访问。 `User@localhost`只允许从本地主机访问。他们是两个不同的用户，有两个不同的密码（虽然您可以将他们设置为相同的密码，但如果您更新一个密码，另一个将不会自动更新）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-24T15:25:48.640

基本上是的，这是两个不同的用户，具有（可能）不同的权限和（可能）不同的密码。

*   myuser@% ：用户 myuser，从任何主机连接。
*   myuser@localhost ：用户 myuser，仅从 localhost 连接。

一个很好的阅读是[关于连接访问的 MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/connection-access.html)，它演示了它是如何工作的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-27T02:53:36.497

我遇到了与描述相同的情况 - 添加条目`user@%`不起作用。

**然而，**添加一个相同的条目`user@localhost` *将*再次开始工作。鉴于我们对模式的理解，这看起来确实不直观`%`！

上面 Kent 发现的一个问题是：我们在 users 表中有一个条目行，`host:localhost` **但它`user`是空白**的。这显然解决了`%@localhost`在我的规则之前被用作匹配项的`user@%`规则。

**简短回答 - 检查表中的空白或通配符用户名`user`。**

...我不知道那个空白是如何到达那里的，或者它是否是故意的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T15:25:03.760

即使它们的意思相同，或者如果其中一个包含另一个，它们确实是独立的用户！

[13.7.1.3。GRANT 语法](http://dev.mysql.com/doc/refman/5.1/en/grant.html#id988537)

> GRANT 的 MySQL 和标准 SQL 版本
> 
> GRANT 的 MySQL 和标准 SQL 版本之间的最大区别是：
> 
> *   MySQL 将权限与主机名和用户名的组合相关联，而不仅仅是用户名。

# windows - 尝试通过命令行打开时找不到文件。

> ID：11634085
> 
> 赞同：0
> 
> 时间：2012-07-24T15:21:50.190
> 
> 标签：windows, cmd

我想知道是否有人可以帮忙，我想运行一个计划任务，我发现我可以在那里放一个命令行命令，这很好。

我需要做的是让 PHP 文件运行起来有点像 cronjob。

我正在使用的系统建议我执行以下操作，但它不起作用，现在我相信这是由于文件位于 E 而不是 C，但我不知道如何纠正这个问题，如果有人可以给我一些指示伟大的。

```
"C:\Program Files (x86)\PHP\v5.3\php.exe E:\pathtofile\tasks\frequently.php -f" 
```

系统信息是win 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:32:51.780

您的引号字符都被弄乱了，但是任务计划程序中命令的各个部分都有单独的条目。

尝试这个：

创建新任务时，将`Action:`下拉菜单设置为`Start a program`。

在 `Program/Script:`条目中，使用

```
"C:\Program Files (x86)\PHP\v5.3\php.exe" 
```

在`Add arguments (optional)`输入使用

```
"E:\pathtofile\tasks\frequently.php" -f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:13:23.633

我相信您想知道的是如何安排 php 程序通过命令提示符处理 php 文件（注意 -f 需要紧跟**在**php.exe 之后：

```
schtasks /Create /tn MyJob /tr @"C:\Program Files (x86)\PHP\v5.3\php.exe -f E:\pathtofile\tasks\frequently.php" /sc onlogon 
```

# symfony - 更改 CLI 的 php

> ID：11634088
> 
> 赞同：0
> 
> 时间：2012-07-24T15:21:57.807
> 
> 标签：symfony, command-line-interface

我正在使用 Symfony2。我试图执行以下命令：

```
php app/console doctrine:database:create 
```

问题是我收到以下错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/opt/local/lib/php/extensions/no-debug-non-zts-20090626/apc.so' - dlopen(/opt/local/lib/php/extensions/no-debug-non-zts-20090626/apc.so, 9): image not found in Unknown on line 0
Could not create database for connection named <comment>symfony</comment>
could not find driver 
```

APC 已经安装，因为`Symfony/web/config.php`没问题，我意识到 CLI 中的 php 版本与 Apache 正在运行的版本不同。

正在运行的 Apache 安装了 APC，所以我希望 CLI 运行相同的 php，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:32:54.107

在我的情况下，删除 macports 安装的版本足以让 CLI 和 Apache 运行相同的 PHP。

那就是：

```
sudo port uninstall php5 
```

# c# - XML 中缺少标记会阻止 XmlSerializer 创建属性

> ID：11634090
> 
> 赞同：2
> 
> 时间：2012-07-24T15:22:08.407
> 
> 标签：c#, .net, xml

使用 XmlSerializer 类反序列化 xml 流时遇到问题。

我有一个这样的对象：

```
public class Test
{
  [XmlElement("data")]
  public AnotherObject Data
  {
    get; set;
  }

  // other properties
} 
```

当我尝试反序列化它时它会正常工作：

```
<Test>
  <data>...</data>
  <something else... />
</Test> 
```

但是，如果 xml 是这样的：

```
<Test>
  <something else... />   
</Test> 
```

当我尝试读取新创建对象的 Data 属性时，代码会抛出异常。如果我尝试观察对象，调试器会打印“无法评估异常”。

我希望该属性存在，即使 XML 中没有相应的标记。

有可能这样做吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:34:22.110

XML 反序列化在设置属性之前使用调用默认构造函数。您可以将`data`属性设置为默认值，如果从反序列化加载该属性将被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:43:04.380

看看这是否有帮助：

```
public class Test
{
  [XmlElement("data")]
  public System.Nullable<AnotherObject> Data
  {
    get; set;
  }

  // other properties
} 
```

这将允许为 AnotherObject 接受空值，本质上允许 Data 为空。

注意：这非常依赖于您的架构。如果您的架构阻止空值，这将不起作用。有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/1t3y8s4s.aspx](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)

# c++ - 如何将函数指针中的函数保存为类的成员函数？

> ID：11634093
> 
> 赞同：1
> 
> 时间：2012-07-24T15:22:17.480
> 
> 标签：c++, function-pointers

基本上，我有一个运行某种算法的模板类，并且该算法需要一个`similarity(T t1, T t2)`函数，该函数返回一个定义两个 T 类型对象的相似程度的双精度数。这个相似度函数根据T的定义有很大的不同，所以这个类的调用者需要定义相似度函数。我假设函数指针是有序的，但是如何将函数指针中的函数保存为成员函数以在算法中使用？

也就是说，我想传入`similarity(T t1, T t2)`类的构造函数，并能够在整个类中将其作为成员函数调用。我怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:27:07.583

您不能在运行时将成员函数添加到类中。

您可以编写一个成员函数，通过函数指针调用提供的函数：

```
class MyClass {
    typedef double (*similarity_fn_type)(T t1, T t2);
    similarity_fn_type similarity_fn;
  public:
    MyClass(similarity_fn_type ptr) : similarity_fn(ptr) {}
    double similarity(T t1, T t2) {
        return similarity_fn(t1, t2);
    }
}; 
```

或者，您*可以*将`similarity_fn`成员设为公开。调用它的语法使它看起来像一个成员函数，但你可能认为它不是很好的封装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:35:06.973

有更简洁、面向对象的方法可以做到这一点。其中之一是使用该函数传递一个对象，类似于 Java 如何允许重新实现与 Comparator 类的比较。这意味着为每个`similarity()`.

在您的情况下，您可能会发现 C++11 用于实现比较和散列函数的解决方案更有用。它涉及创建特殊的功能对象。有关示例，请参见[std::less](http://en.cppreference.com/w/cpp/utility/functional/less)和[std::hash](http://en.cppreference.com/w/cpp/utility/hash)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:34:30.067

定义`const`适当类型的函数指针成员：

```
typedef double(*Similarity)(T, T);
const Similarity similarity; 
```

让构造函数接受该类型的函数：

```
Class(Similarity f) : similarity(f) {} 
```

然后调用该函数与调用普通成员函数的语法相同：

```
frobnicate(similarity(foo, bar)); 
```

如果该成员是`public`，则无法从您下方更改，因为它是`const`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:30:35.837

我做了一些类似于抽象出遍历集合的过程的事情。我使用谓词来指定实际的搜索条件：

```
void MyClass::Copy(Class &destination, const Class &source, const std::function<bool (const Effect&)> &predicate)
{
    for (size_t i = 0; i < Effect::Max; ++i)
    {
        const Effect *const pEffect = source.GetEffect(i);
        if (predicate(*pEffect))
        {
            // Do something
        }
    }
}

void MyClass::CopyInner(Class &destination, const Class &source)
{
    this->Copy(destination, source, [](const Effect &effect)
    {
        return effect.IsInner();
    });
} 
```

**注意**：这使用了一些 C++11 特性。

# vba - 移动 Sub 并保持正确的范围（替换 Me。）

> ID：11634095
> 
> 赞同：0
> 
> 时间：2012-07-24T15:22:22.693
> 
> 标签：vba, excel, scope

我的应用程序中有一个 Sub，当前位于名为 FRMPFC_folderCreatorWindow 的用户窗体中。为了清楚整个应用程序，我希望将此 Sub 从用户窗体移动到名为 PFC_filesystemManipulation 的模块中，并通过 FRMPFC_folderCreatorWindow 中的按钮从那里调用 Sub 但是，当我这样做并运行我的代码时，会在该行生成错误：

```
For Each cCont In Me.Controls 
```

我知道这是因为 Sub 已脱离表单的上下文，但是如何在不使用 Me.Controls 的情况下维护上下文？我猜我需要引用表单并使用 FRMPFC_folderCreatorWindow.Controls 但由于大多数控件嵌套在框架内，我不确定我当前的代码是作用于表单还是仅作用于按钮所在的框架。任何帮助将非常感激。

```
Private Sub PFC_createFolders(Basepath, currentControl, parentFolder, parentGroup)

Dim cCont As Control
Dim createSubFolder As String
Dim fs As Object

Set fs = CreateObject("Scripting.FileSystemObject")

'Check if the project folder already exists and if so, raise an error and exit
    MkDir Basepath & "\" & parentFolder

    'Create the superceded documents folder in every 2nd generation folder
    MkDir Basepath & "\" & parentFolder & "\" & "_Old versions"
    For Each cCont In Me.Controls
        If TypeName(cCont) = "CheckBox" Then
            If cCont.GroupName = parentGroup Then
                If cCont.Value = True Then
                    If cCont.Name <> currentControl Then
                        createSubFolder = cCont.Caption
                        NewFolder = Basepath & "\" & parentFolder & "\" & createSubFolder
                        If fs.folderexists(NewFolder) Then
                            'do nothing
                        Else
                            'Create 3rd generation folder
                            MkDir NewFolder

                            'Create the superceded documents folder in every 3rd generation folder
                            MkDir NewFolder & "\" & "_Old versions"

                            'Create hard-coded subfolders within Confirmit Exports
                            If createSubFolder = "Confirmit Exports" Then
                                MkDir Basepath & "\" & parentFolder & "\" & createSubFolder & "\Triple S"
                                MkDir Basepath & "\" & parentFolder & "\" & createSubFolder & "\Word Export"
                                MkDir Basepath & "\" & parentFolder & "\" & createSubFolder & "\Survey Definition"
                                MkDir Basepath & "\" & parentFolder & "\" & createSubFolder & "\Data"
                                MkDir Basepath & "\" & parentFolder & "\" & createSubFolder & "\Data" & "\" & "Early Data"
                                MkDir Basepath & "\" & parentFolder & "\" & createSubFolder & "\Data" & "\" & "Final Data"
                            End If

                        End If

                    End If

                End If

            End If

        End If

    Next cCont

   End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:33:29.020

我刚刚对此进行了试验，并用以下代码替换了 Me.Controls：

```
 FRMPFC_folderCreatorWindow.Controls 
```

# android - aidl 中的 Parcelable 继承

> ID：11634099
> 
> 赞同：1
> 
> 时间：2012-07-24T15:22:48.493
> 
> 标签：android, android-service, aidl

我想要 .aidl 中类似下面的内容，并在 android 服务中使用它们。

```
abstract class sharp implements Parcelable {
}

class rect extends sharp {
}

interface IsharpMgr {
    sharp get();
} 
```

为了做到这一点，Sharp 类必须实现 Parcelable。在 rect 中覆盖 writeToParcel 很容易，但我应该如何添加“public static final Parcelable.Creator”？

在 gen/IsharpMgr.java 中，该创建者是通过 sharp->Creator.createFromParcel 调用的。这是一个静态文件，所以我无法在 rect 中覆盖它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:31:15.863

**编辑：我有名字`sharp`并且`rect`很困惑，所以我交换了它们以避免混淆**

您只需像这样实现它：

```
public static final Parcelable.Creator<Rect> CREATOR
         = new Parcelable.Creator<Rect>() {
     public Rect createFromParcel(Parcel in) {
         return new Rect(in);
     }

     public Rect[] newArray(int size) {
         return new Rect[size];
     }
 }; 
```

您没有**覆盖**中的字段`Sharp`，因为无法覆盖静态字段。您正在**隐藏**该字段。这意味着如果有人写道：

```
Parcelable.Creator<Rect> creator = Rect.CREATOR; 
```

他们得到的对象与有人写的不同：

```
Parcelable.Creator<Sharp> creator = Sharp.CREATOR; 
```

**注意：**我冒昧地将您的类名`Rect`和`Sharp`. 你也应该这样做。它会让你的生活更轻松，你的代码看起来更像 Java ;-)

**编辑：在 OP 的评论之后添加了一些额外的说明**

我想我看到了你的问题。您想定义一个传递`Sharp`对象的接口，但您确实想传递派生`Rect`对象，并且该对象`Sharp`在接收端被重新创建为对象。看起来 AIDL 不支持这种继承。但是，你可以做的是这样的（穷人的工厂）：

在`Rect`：

```
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(getClass().getName());
    // Write other instance variables
} 
```

在`Sharp`：

```
public static final Parcelable.Creator<Sharp> CREATOR
         = new Parcelable.Creator<Sharp>() {
     public Sharp createFromParcel(Parcel in) {
         String derivedClassName = in.readString();
         if (derivedClassName.equals(Rect.class.getName()) {
             // Create an instance of Rect and return that
             return new Rect(in);
         } else if (derivedClassName.equals(...) {
             // Possible other derived classes
         }
     }

     public Sharp[] newArray(int size) {
         return new Sharp[size];
     }
}; 
```

注意构造函数

```
public Rect(Parcel in) 
```

将使用已从传入的类名 String 中删除的调用`Parcel`。

# mysql - 使用多次出现和多次出现的 SQL 出现问题

> ID：11634107
> 
> 赞同：2
> 
> 时间：2012-07-24T15:23:08.007
> 
> 标签：mysql, sql

每个人。我是新来的，我有一个关于 SQL 的问题，我似乎认为这在 SQL 中可能很容易做到，但我没有想法，我可以使用一些帮助来解决我的问题。

所以我有一张桌子（sql也在这里[http://www.sqlfiddle.com/#!2/b9a37/1/0](http://www.sqlfiddle.com/#!2/b9a37/1/0)）

每个人多次出现，不同的 id 具有自动增量，我有 3 个字段，“Category”、“In”和“Out”

我试图实现的是一种让我知道桌子上的一些用户何时属于使用“In”和“Out”作为限制的系统的方法。

例子

*   用户 A - A 类 - IN 2002 OUT 2010
*   用户 A - B 类 - IN 2011 OUT 9999
*   用户 B - B 类 - IN 2002 OUT 2010

在上面的例子中，我想知道谁属于 2010 年的系统：

所以对于用户 A，他在 2010 年离开了 A 类，但在 2011 年加入了 2011 年的类别，所以他应该是 2010 年的 A 类用户

对于用户 B，他不应该属于系统，因为 2010+ 没有新条目

最后，我想为 2010 年提供以下输出

*   史密斯 A 类
*   巴勃罗 A 类

例如，我没有达到我想要的结果

```
SELECT * from users
WHERE (users.In<=2010 and users.Out=2010) 
```

输出

*   史密斯 A 类 2002 年 2010 年
*   罗杰 B 类 2002 年 2010 年
*   米勒 B 类 2008 年 2010 年
*   巴勃罗 A 类 2002 年 2010 年

但是 Roger 和 Miller 在 2010 年离开了系统，所以他们不应该在 2010 年成为成员，而 Smith 和 Pablo 在 2010+ 年改变了他们的类别，所以他们应该在输出中显示。

几点注意事项：不要问我为什么要这样开发这个解决方案，我只是偶然发现它并试图解决这个问题。我正在考虑在 php 中执行一个函数，根据我想要的要求过滤数据，因为我已经没有解决这个问题的想法了。如果您找到一种比我在这里看到的更好的方法来实现这一点，请成为我的客人，我对新想法持开放态度。

提前致谢。

最后说明：也许使用[http://www.sqlfiddle.com/#!2/b9a37/1/0](http://www.sqlfiddle.com/#!2/b9a37/1/0)并尝试找到所需的输出会帮助你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:43:21.663

试一试：

```
select Name, Category
from users
where `In` <= 2010 and (
        `Out` > 2010 or name in (
            select name
            from users
            where `In` = 2011
            )
        ) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/b9a37/41)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:47:51.717

这似乎有效：

```
 select * from users a, users b where a.name = b.name and a.out + 1 = b.out 
```

但是，如果多个用户具有相同的姓氏，并且假定出年比入年少一年，它将无法正常工作。

# c# - 适用于 WPF 的 Microsoft .NET 图表控件

> ID：11634110
> 
> 赞同：2
> 
> 时间：2012-07-24T15:23:14.643
> 
> 标签：c#, .net, wpf, charts, controls

> **可能重复：**
> [WPF 图表控件](https://stackoverflow.com/questions/577278/wpf-chart-controls)

我正在寻找 WPF 的 .NET Framework 图表控件。

我找到了这个： http: [//archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)

但它似乎不支持 WPF。

是否有人已经在 WPF 项目中使用过 .NET 图表控件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T13:51:26.417

您可以使用 WindowsFormsHost 将 mschart 嵌入到 WPF 中。

我在一个应用程序中这样做了，因为我发现我尝试过的所有 WPF 解决方案都无法处理我系统的实时数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:29:35.153

你可以试试这些项目

*   WPF 工具包：[http ://wpf.codeplex.com/releases/view/40535](http://wpf.codeplex.com/releases/view/40535)

*   Visiblox： http: [//www.visiblox.com/](http://www.visiblox.com/)

*   基础设施：http : [//www.infragistics.com/products/wpf-data-visualization/data-chart/#Overview](http://www.infragistics.com/products/wpf-data-visualization/data-chart/#Overview)

# c# - 卡在 Razor 扩展上

> ID：11634117
> 
> 赞同：2
> 
> 时间：2012-07-24T15:23:35.293
> 
> 标签：c#, asp.net-mvc, razor, razor-declarative-helpers

我正在尝试将一些常用代码重构为帮助程序扩展并且坚持使用语法，主要是因为我没有完全掌握泛型、lambda 表达式等。

我希望能够将它放在我的视图中，并让它使用我的模型的字段（例如 FirstName）来生成一些利用其他 Razor 扩展的 HTML：

```
@MyHelpers.BootstrapFormItem(m => m.FirstName) 
```

目前我有：

```
@using System.Web.Mvc;
@using System.Web.Mvc.Html;
@using System.Linq;
@using System.Linq.Expressions;

@helper BootstrapFormitem(XXXXXXXXX) 
{
         <div class="control-group">
            @Html.LabelFor(XXXXXXX)
            <div class="controls">
               @Html.DisplayFor(XXXXX)
               @Html.ValidationMessageFor(XXXX)
            </div>
         </div>
} 
```

问题：

1.  这是正确的方法吗？我希望能够将此方法与任何视图模型字段一起使用。
2.  我是否包含了正确的命名空间？这将进入 app_code 文件夹
3.  XXXXXX 里有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:22:27.733

这个类做你需要的，我一直使用这些：

```
using System;
using System.Linq.Expressions;
using System.Text;
using System.Web.Mvc;
using System.Web.Mvc.Html;

public static class HtmlHelpers
{
    public static MvcHtmlString BootstrapFormItem<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression)
    {
        StringBuilder html = new StringBuilder("<div class=\"control-group\">");
        html.AppendLine(helper.LabelFor(expression).ToString());
        html.AppendLine("<div class=\"controls\">");
        html.AppendLine(helper.DisplayFor(expression).ToString());
        html.AppendLine(helper.ValidationMessageFor(expression).ToString());
        html.AppendLine("</div>");
        html.AppendLine("</div>");
        return MvcHtmlString.Create(html.ToString());
    }
} 
```

Note that this is a static class and also an extension method, the first input parameter is prefixed with 'this' which means it will extend (show up after you type a '.' in Intellisense) any objects of type `HtmlHelper<TModel>`. I will generally put this class in a *Utilities* folder. I often use a namespace as well and reference it from the *web.config*.

**EDIT TO ANSWER QUESTIONS:**

Here is the usage, it is covered by Intellisense as well:

```
@model MyClass

@Html.BootstrapFormItem(x => x.Name) 
```

This is the output:

```
<div class="control-group">
    <label for="Name">Name</label>
    <div class="controls">
        naspinski
        <span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"/>
    </div>
</div> 
```

# php - MYSQL 加入帮助。根据单独评论表中的评论数量获取结果？

> ID：11634118
> 
> 赞同：1
> 
> 时间：2012-07-24T15:23:38.857
> 
> 标签：php, mysql, sql, codeigniter, join

初学者在这里！我正在尝试编写一个查询，它将从“结果”表中选择 3 个评论最多的结果，这些评论存储在单独的“评论”表中。

```
results
 - id  
 - title    
 - body   
 - etc
 - etc

comments
 - id  
 - result_id
 - user_id
 - timestamp
 - comment 
```

所以我需要从 results.id 和 comments.result_id 之间的匹配数量中选择所有结果，但我真的不知道从哪里开始！

非常感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:33:50.407

未经测试，但你可以做类似的事情

```
SELECT  r.id  ,r.title, r.body
FROM results r INNER JOIN (SELECT result_id, count(id) cnt FROM comments GROUP BY result_id) c
ON r.id = c.result_id
ORDER by c.cnt DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:31:13.823

也许尝试这样的事情：

```
SELECT COUNT(c.id) AS comment_count FROM results r
LEFT JOIN comments c ON r.id=c.result_id
GROUP BY result_id ORDER BY comment_count DESC LIMIT 3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:41:46.003

以下应该有效：

```
SELECT r.id, COUNT(r.id) AS comment_count 
FROM results r 
INNER JOIN comments c 
ON results.id = c.result_id 
GROUP BY r.id 
ORDER BY comment_count DESC 
```

您连接两个表，其中结果的 id 与 comments 表中引用的 result_id 相同。然后按 result_id 对行进行分组以删除重复项。该`COUNT()`函数汇总分组的行并显示它们的数量。

然后只需根据生成的评论计数对结果进行排序。

你也可以使用`LEFT OUTER JOIN`，然后你会得到**所有**没有评论的结果。如果你想要这个取决于你的需要。

*有关 SQL 连接的描述，请查看[“INNER JOIN”和“OUTER JOIN”有什么区别？](https://stackoverflow.com/questions/38549/sql-difference-between-inner-and-outer-join)*

# .net - 存储用户时区的最佳实践 - TSQL/.Net

> ID：11634129
> 
> 赞同：3
> 
> 时间：2012-07-24T15:24:10.540
> 
> 标签：.net, tsql, timezone

我需要跟踪用户的时区，以便他们的信息处理（或不处理）可以在他们指定的特定时间（在他们自己的时区）发生。

显而易见的答案是将时区与他们的个人资料信息一起存储在用户数据库中。有点棘手的是夏令时。从下图中可以看出，大多数北部和南部地区都使用日光时间偏移。因此，存储时区偏移量并不像它会起作用，因为该偏移量可能会在一年中发生变化。相反，我正在考虑存储时区代码（类似于 PST）并让标准时间库查找偏移量。

所以我正在考虑的几件事是：

1) TSQL 是否有这个库用于从时区代码 (PST) 转换为当前的 UTC 偏移量？2) 我知道[.net 可以做到这一点](http://www.dotnetperls.com/timezone)，但我更愿意在数据库中做到这一点，因为这是我的查询将运行的地方。

![在此处输入图像描述](../Images/d67529ce090d782a1833c2e35dfc36fc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:13:38.383

找到了一个看起来[很有前途的 .Net 库](http://www.codeproject.com/Articles/25001/ZoneInfo-tz-Database-Olson-Database-NET-API)。与内置的 .Net 相比，它的优点是您可以通过在磁盘上放置一个新副本来更新时区数据库。使用 .Net，您必须等待新的编译版本。*（但时区更改可能很少见）*。

# jsf-2 - 在 JSF + EJB 3.1 中的请求范围托管 Bean 之间传递参数

> ID：11634141
> 
> 赞同：0
> 
> 时间：2012-07-24T15:24:36.823
> 
> 标签：jsf-2, java-ee-6, ejb-3.1, managed-bean, stateful-session-bean

我们的问题是使用 JSF + EJB 编辑数据库的一个非常基本、简单的实现。

保持简短：两个独立的 XHTML 视图，使用两个独立的托管 Bean @RequestScope。

WebuserListBean 和 EditWebuserBean，我们用@ManagedProperty 注入WebuserListBean，这样我们就可以获取选中的用户数据。到目前为止没有问题。视图已成功填充数据！

但！我们希望能够编辑用户！在这里（令我惊讶的是）我们无法克服这个问题。

第一次尝试：因为在填充视图后请求范围的 bean 已死，所以在 Save() 方法上，@PostConstruct 尝试再次启动，当然它不能。所以我们甚至无法从数据库或任何东西中获取它。

第二次尝试：因为请求范围的 bean 在填充视图后已死，如果我们没有在 @postconstruct 中将用户设置为字段，我们将失去与之前视图链接的用户对象的连接（并注入，但现在该视图是也死了）。

第三次尝试：无法在 ViewScoped 中注入 RequestScope

好的，我们的限制，因为我们认为这是错误的方式：

1.  我们不想为此创建一个 SessionScoped Managed Bean
2.  我们不想使用任何参数等。我们想使用 EJB
3.  我们不确定是否可以将数据存储在作为模块端点的有状态会话 bean 中？这是正确的方法吗？

感谢您的任何建议，我们可以粘贴一些代码，但我想这是没有意义的！干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:23:31.943

有很多方法可以做到这一点，但如果导航中涉及的页面在同一个文件夹中，我建议使用 flash（我最近发现阅读了一个[BalusC](https://stackoverflow.com/users/157882/balusc)的答案，即 flash 存在一个已知问题，它不会在不同文件夹中的页面之间导航时保​​持值！）。

flash 是一种将参数保存时间比单个请求的上下文稍长的方法（如果我没记错的话，这个概念取自 Ruby，如果我错了，请有人纠正我），允许获取发送的参数例如，后续视图。如果我没记错的话，这些值会在保存它们后发出的第二个请求中被丢弃。您可以像这样在托管 bean 中注入 flash：

```
@ManagedProperty("#{flash}")
private Flash flash;

public void setFlash(Flash newFlash) {
    flash = newFlash;
} 
```

然后，您可以像使用地图一样使用 put 和 get 方法访问它。如果您在 bean 中使用 put 方法，则返回重定向规则，然后在第二个 bean 上，使用您的对象应该存在的 get 方法。

您还可以在[此处](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)找到 JSF 中高度易于理解的通信指南（列出了一个非常广泛的选项列表） ，尤其是当您需要在不同文件夹中的页面之间导航时。

# javascript - 如何执行作为参数传递的 JQuery 匿名函数？

> ID：11634146
> 
> 赞同：0
> 
> 时间：2012-07-24T15:24:45.287
> 
> 标签：javascript, jquery, anonymous-function

下面的代码有问题。我在网站上进行了搜索，结果很接近但没有雪茄。

我希望在单击附加到 .callapp 的项目时执行以下操作：

1.  $jQuery.load 使用从 getURL(xapp) 收到的 url 的内容部分
2.  不管状态是什么，执行“requesthandler”
3.  如果请求恰好成功，“请求处理程序”使用 onSuccess 并执行它

我不确定如何执行我传递给“请求处理程序”的匿名函数。我需要这个匿名函数来使用我传入的参数执行“loadURL”函数，然后这将引发与这篇文章无关的另一个事件链。

谢谢！

```
var url = "";
var tab = "";
var app = "base";
var out = "";
$(document).ready(function() {
    $(".callapp").click(function(e) {
        e.preventDefault();
        $('#wxreturn').html("<div id='xtools'></div><div id='xerror'></div><div id='xdapps'></div>");
        hideContent(1, 1);
        $('#xdapps').load( getURL("base"), function(resp, stat, xhr) {
            requesthandler(iStat, iXHR, 0, 0, 0, 0, function() {
                loadURL("tools", "xtools", 1, 1, 1, 1);
            });
        });
        return 0;
    });
});
// piece together a url
function getURL(xapp) {
    // url to return
    var url = null;
    // global tab must not be empty
    if (tab.length) {
        // check if app is defined
        if (!xapp.length) {
            // app is either the global or base
            xapp = app | "base";
        } else {
            // set the global
            if (!(xapp == "tools") && !(xapp == "options")) app = xapp;
        }
        // set the url to return
        url = "/" + tab.toLowerCase() + "/" + xapp.toLowerCase() + "?_=" + Math.random();
    } else {
        // undefined functionality error
        alert("Invalid getURL...Tab Missing");
    }
    // return the url
    return url;
}
// load a url
function loadURL(xapp, target, showApp, showOpt, showTools, clearTools) {
    // defaults
    showApp = showApp | 0;
    showOpt = showOpt | 0;
    showTools = showTools | 0;
    clearTools = clearTools | 0;
    // do only if app and target are defined
    if (!(xapp == undefined) && !(target == undefined)) {
        // set target
        if (!(target.contains("#"))) target = "#" + target;
        // get url string
        var url = getURL(xapp);
        // check if null
        if (!(url == null)) {
            // commence with load   
            $(target).load(url, function(resp, stat, xhr) {
                // call back with the request handler
                requesthandler(stat, xhr, showApp, showOpt, showTools, clearTools);
            });
        }
    } else {
        // undefined functionality error
        alert("Invalid LoadURL...Missing App...Target");
    }
}
// request handler
function requesthandler(stat, xhr, showApp, showOpt, showTools, clearTools, onSuccess) {
    // defaults
    showApp = showApp | 0;
    showOpt = showOpt | 0;
    showTools = showTools | 0;
    clearTools = clearTools | 0;
    onSuccess = onSuccess | null;
    // check for status
    if (stat == "success") {
        // execute
        if (!(onSuccess == null)) {
            // perform function
            (onSuccess());
        }
    } else {
        if (xhr.status == 401) {
            // throw session expired
            sessionTimeOut();
        } else if (xhr.status == 403) {
            // throw authorization failure
            failedAuthorize();
        } else {
            // throw application request failure
            failedAPPRequest(clearTools);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:29:56.420

```
onSuccess = onSuccess | null; 
```

您需要在`|`这里使用两个，而不是一个。

```
showApp = showApp || 0;
showOpt = showOpt || 0;
showTools = showTools || 0;
clearTools = clearTools || 0;
onSuccess = onSuccess || null; 
```

为了安全起见，我会`onSuccess`在运行它之前检查它是否是一个函数（不仅仅是它不为空）：

```
if (typeof onSuccess === 'function') {
    // perform function
    onSuccess();  // the extra "()" aren't needed here
} 
```

如果您这样做，`onSuccess || null`则不需要。

# vb6 - 如何在 VB6 中从文本文件中删除一行文本？

> ID：11634147
> 
> 赞同：-1
> 
> 时间：2012-07-24T15:24:45.750
> 
> 标签：vb6

> **可能重复：**
> [如何读取文件并写入文本文件？](https://stackoverflow.com/questions/1404758/how-to-read-a-file-and-write-into-a-text-file)

我有一个搜索工具，其中项目显示在 ListView 中。这些项目是从文件中读入的。当我在 ListView 中选择一个项目时，我也希望能够将它从文本文件中删除。目前，它只是从 ListView 中删除，但是当我再次搜索时它仍然显示，因此它不会从文本文件中删除。

基本上我的程序是带有条形码和数量的产品列表。用户可以搜索显示在列表视图中的项目，然后对其进行编辑以增加或减少数量。当他们单击保存时，它会写入文件。一切正常，但现在显示该项目两次，相同的条形码和产品名称以及不同的数量。

我尝试使用替换功能，但这只是在我的文件中添加空文本行。我还得到了复制文件并删除所选项目的建议。我不确定该怎么做。有没有人有其他方法可以做到这一点？这是我的代码：

```
Private Sub cmdEdit_Click()
Dim barcode As String
Dim prodNum As String
Dim unknown As String
Dim desc As String
Dim size As String
Dim costPrice As String
Dim retailPrice As String
Dim deptCode As String
Dim dept As String
Dim subDeptCode As String
Dim subDept As String
Dim quantity As String
Dim barcodeYes As String
Dim Number As String
Dim i As Single

ListView1.ListItems.Remove ListView1.SelectedItem.Index

Open "D:\VB\EXPORT PRODUCT FILE.CSV" For Input As #3
Input #3, barcode, prodNum, unknown, desc, size, costPrice, retailPrice, deptCode, dept,      subDeptCode, subDept, quantity, barcodeYes, Number
AddQuantity.Show
AddQuantity.txtName.Text = ListView1.SelectedItem
AddQuantity.txtBarcode.Text = ListView1.SelectedItem.SubItems(1)
AddQuantity.txtQuantity.Text = ListView1.SelectedItem.SubItems(2)
Close #3
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:37:17.737

从文件中间删除某些内容的唯一方法是从那时起重写所有内容。

您尚未显示要写入文件的代码，但我假设您正在追加。
您需要更改此项以加载所有数据，更改您想要的条目然后再次保存。

或者，使用专为此类用途设计的数据库。

# javascript - 正则表达式查找字符串并返回大括号之间的所有内容

> ID：11634150
> 
> 赞同：0
> 
> 时间：2012-07-24T15:24:55.953
> 
> 标签：javascript, regex, curly-braces

我一直在尝试使用另一个 SO-User 建议的方法：[https ://stackoverflow.com/a/1820837/1324861](https://stackoverflow.com/a/1820837/1324861)

但没有运气。基本上，我有一个大的 JSON 对象，我使用它转换成一个字符串`JSON.stringify()`来执行正则表达式模式。`{ }`我的想法是如果在花括号之间的任何位置找到我的搜索词“足球”，则返回之间的所有内容。

我的数据可能如下所示：

```
{
  {
    User: "Peter",
    Hobbies: "Soccer, Football, ...",
    more...
  },
  {
    User: "Simon",
    Hobbies: "Pingpong, Soccer, Badminton",
    more...
  }
} 
```

因此，如果我在字符串化的 JSON 对象中搜索“足球”，我想取回用户的全部信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:50:28.777

您可以从中获得启发（**无需将您的 json 转换为字符串**）：

```
var myData = [
  {
    User: "Peter",
    Hobbies: "Soccer, Football, ..."
  },
  {
    User: "Simon",
    Hobbies: "Pingpong, Soccer, Badminton"
  }
];
var results = "";
for (var i = 0; i < myData.length; i++) {
    if (myData[i]["Hobbies"].indexOf("Soccer") != -1) {
        results += JSON.stringify(myData [i]) + "\n";
    }                  
}
alert(results); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:41:04.690

并不是说对 JSON 对象进行字符串化以在其上应用正则表达式（不寒而栗）是没有意义的，但是嘿，这是你的 CPU ......你可以使用这样的东西：

```
\{[^{]+soccer[^}]+} 
```

这应该可以捕获您要查找的内容。但是...用正则表达式解析 JSON... Nononono...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:02:51.927

```
var json = [
  {
    User: "Peter",
    Hobbies: "Soccer, Football, ..."
  },
  {
    User: "Simon",
    Hobbies: "Pingpong, Badminton"
  }
];

var jsonString = JSON.stringify(json);
var regEx = /(\{.*?Soccer.*?\})/;
var user = jsonString.match(regEx)[1];
document.write(user); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:42:13.537

像“{[^}]*(S|s)occer[^}]*}”

# jqgrid - jqGrid 加载 gif：loadui 何时调用

> ID：11634151
> 
> 赞同：1
> 
> 时间：2012-07-24T15:24:58.750
> 
> 标签：jqgrid, loading, animated-gif

我想看看当我的 jqGrid 加载数据时是否有一种真正简单的方法来加载加载 gif？我已经看过一些关于堆栈溢出的教程，但他们有点不清楚在哪里以及如何做到这一点......具体来说，我何时何地设置 loadui？为什么我不能将其设置为加载 gif？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:31:44.263

i18n 文件中的`loadtext`属性直接插入到 jqGrid 加载对话框中，因此您可以添加`img`一个引用加载 GIF 的标签而不是文本。

作为参考，网格的使用`loadtext`方式如下：

```
$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>" 
 + this.p.loadtext+"</div>").insertBefore(gv); 
```

# php - 如何在网页上添加打印按钮

> ID：11634153
> 
> 赞同：7
> 
> 时间：2012-07-24T15:25:08.120
> 
> 标签：php, css

在我网站的一个页面上（用 php 编码），我正在尝试添加 2 个（甚至更多）打印按钮，每个按钮打印网页的一部分。例如，在一个页面上有一个包含一些值的表格和下面的 2 个图表。我想添加 2 个打印按钮，一个按钮打印表格，另一个按钮打印两个图表。我找到了这个[示例](http://haacked.com/archive/2006/03/13/CSSBasedPrintingTip.aspx)，但无法清楚地理解。任何帮助或示例都会对我有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T15:27:47.213

这是 html/javascript 代码，单击时将启动浏览器的打印对话框。

```
<button onClick="window.print()">Print this page</button> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T15:39:06.393

如果您的表位于**id** ='printTable'的**div**内，请使用：

 **```
<a href="#null" onclick="printContent('printTable')">Click to print table</a> 
```

编辑：这是函数“printContent()”

```
<script type="text/javascript">
<!--
function printContent(id){
str=document.getElementById(id).innerHTML
newwin=window.open('','printwin','left=100,top=100,width=400,height=400')
newwin.document.write('<HTML>\n<HEAD>\n')
newwin.document.write('<TITLE>Print Page</TITLE>\n')
newwin.document.write('<script>\n')
newwin.document.write('function chkstate(){\n')
newwin.document.write('if(document.readyState=="complete"){\n')
newwin.document.write('window.close()\n')
newwin.document.write('}\n')
newwin.document.write('else{\n')
newwin.document.write('setTimeout("chkstate()",2000)\n')
newwin.document.write('}\n')
newwin.document.write('}\n')
newwin.document.write('function print_win(){\n')
newwin.document.write('window.print();\n')
newwin.document.write('chkstate();\n')
newwin.document.write('}\n')
newwin.document.write('<\/script>\n')
newwin.document.write('</HEAD>\n')
newwin.document.write('<BODY onload="print_win()">\n')
newwin.document.write(str)
newwin.document.write('</BODY>\n')
newwin.document.write('</HTML>\n')
newwin.document.close()
}
//-->
</script> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-24T15:35:49.580

一个简单的想法是临时创建一些以前的 css 打印规则，例如

```
.printtable * { display : none; }
.printtable table { display : block; } 
```

和

```
.printtableandgraph * { display : none; }
.printtableandgraph img { display : block; } 
```

那么这两个按钮应该在语句之前为 body 元素（或其他包含表格和图表的元素）添加一个`.printtable`和一个类`.printtableandgraph``window.print()`

（如果用户在同一个打印按钮上单击两次或更多次，则之前检查元素是否已经设置了该类名）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-15T11:44:57.747

打印按钮

```
<button onClick="window.print()">Print this page</button>` 
```

使用此代码打印任何网页，只有一个回退它的打印所有按钮和菜单栏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-07T17:14:32.647

要打印页面的一部分，您可以使用 print.css 和打印按钮，这是一种快速简单的方法。

1.  设置 print.css 文件并包括：

```
 body {visibility:hidden;}
     .print {visibility:visible;}
```

2.  **将 .print 类**添加到页面的适当部分。

3.  添加按钮：

```
<button onClick="window.print()">Print this page »</button>
```

打印结果整洁干净。**

# php - 使用php批量发布到多个Facebook帐户

> ID：11634156
> 
> 赞同：0
> 
> 时间：2012-07-24T15:25:14.020
> 
> 标签：php, facebook-graph-api

我正在尝试向多个 FB 用户发布状态消息，但不是在他们在我的网站上时。对于我要发布的每个用户，我都有 publish_stream 权限和 60 天的访问令牌，但我不知道如何正确批处理。

这是放入访问令牌的正确方法吗？

```
$body = array(
            'message' => $message, 
            'link'    => $link,
            'picture' => $picture,
            'name'    => $name,
            'description'=> $description
            );
    $batchPost=array();
    $i=1;       
    foreach ($user_fb_id_array as $fb_id) {
        $batchPost[] = array(
            'method' => 'POST',
            'relative_url' => "/" . $fb_id['user_fb_id'] . "/feed?access_token=" . $fb_id['user_fb_auth_code'], // Will this work???
            'body' => http_build_query($body) );
        if($i++ == 50) {
            try {
                $multiPostResponse = $this->facebook->api('?batch='.urlencode(json_encode($batchPost)), 'POST');
            } catch(FacebookApiException $e) {
                error_log($e);
                echo("Batch Post Failed");
            }
            unset($batchPost);
            $i=1;
        }
    }

    if(isset($batchPost) && count($batchPost) > 0 ) {
        try{
            $multiPostResponse = $this->facebook->api('?batch='.urlencode(json_encode($batchPost)), 'POST');
        } catch(FacebookApiException $e){
            error_log($e);
            echo("Batch Post Failed");
        }
    } 
```

为了在应得的地方给予信任，此代码是从 25labs.com 的原始代码修改而来的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:35:32.090

访问令牌应该为每个调用定义在与“方法”和“相对URL”相同的级别，但你的方法可能也可以工作。

您实际上是收到错误消息还是只是在询问如何实现？

# objective-c - 我们必须使用@synthesize 有实际原因吗？

> ID：11634157
> 
> 赞同：9
> 
> 时间：2012-07-24T15:25:18.710
> 
> 标签：objective-c

所以我`@property`在我的头文件中使用密钥。

*如果*我这样做，我应该`@synthesize`在我的实现中使用密钥，对吗？但我想知道，是否有我必须这样做的实际*原因？*我只是想知道为什么`@property`在标题中写入的内容不足以让代码知道我的意图（自动生成 get/set 方法）。

当然，根据我们[为什么要合成？](https://stackoverflow.com/questions/4966756/why-we-have-to-synthesize)我们编写`@synthesize`来生成 get/set 方法。但我的问题是*为什么`@property`标题中的内容不够*？我问是因为每当我`@property`在标题中写入时，我都会立即去实现并编写`@synthesize`. 所以对我来说，唯一的原因`@synthesize`是用来补充`@property`关键字。这似乎相当多余，让我假设`@synthesize`如果不是因为它*有其他用途*，它就不会存在。那些其他用途是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:46:15.533

`@synthesize`做两件事。它生成 getter/setter 对并为属性创建 iVar。

在这两件事中，我认为创建 iVar 是我何时使用`@synthesize`和何时不使用的关键。当为未在内部存储为 iVars 的成员创建属性时，（显然）我不使用`@synthesize`.

~~即将推出的自动合成功能不会有太大帮助。我总是用前导“_”来命名我的 iVar，因此我仍然需要明确地合成它们。~~

**请参阅@AndrewMadsen 链接**：看起来 '_' 前缀自动合成将生成 iVar。

哇！不用说，我现在对自动合成更兴奋了！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:06:01.420

当它为实例变量生成 getter 和 setter 时，既可以在内部使用，也可以在类外部使用，真正的魔力在于 setter，因为它执行以下操作：

```
- (void)setValue: (id)newValue
{
    if (value != newValue)
    {
        [value release];
        value = newValue;
        [value retain];
    }
} 
```

这是为了一个`@property (nonatomic, retain)...`

真正的魔力在于，每次设置实例变量（从对象本身内部或外部）时，您要确保您拥有传递的 newValue（带有保留），释放旧值并设置新值。
因此可以多次设置实例变量，而无需手动释放旧的。那只是一个速度选项:-)

# jquery-ui - 为什么我的 jQuery UI 选项卡中的 Google 地图只在屏幕左上角显示一个图块？

> ID：11634161
> 
> 赞同：2
> 
> 时间：2012-07-24T15:25:27.837
> 
> 标签：jquery-ui, google-maps-api-3, jquery-ui-tabs, interaction

我在 jQuery 选项卡中有两个 Google Map API v3 地图。它们都在第一次出现在其选项卡中时显示，但最初取消选择的选项卡仅在左上角显示一个图块左右。

定期调用 google.maps.event.trigger(all_map, 'resize') 不会改变这一点。

在我的代码中，我有：

```
 <div id='all_map_canvas'>
            </div>
            <script>
                function show_all_map()
                    {
                    var center = new google.maps.LatLng(%(center_latitude)s - .15, %(center_longitude)s + .2);
                    var myoptions = {
                        zoom: %(zoom)s,
                        center: center,
                        mapTypeId: google.maps.MapTypeId.TERRAIN
                        };
                    all_map = new google.maps.Map(document.getElementById('all_map_canvas'), myoptions);
                    all_map.setZoom(%(zoom)s);
                    jQuery('#all_map_canvas').show();
                    google.maps.event.trigger(all_map, 'resize');
                    }
                function show_all_map_markers()
                    {
                    %(all_map_markers)s
                    }
                var markers = [];
                jQuery('#all_map_canvas').width(jQuery(window).width() -    300);
                jQuery('#all_map_canvas').height(jQuery(window).height() -  125); 
```

标签交换后如何使两个地图都显示完整？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T22:07:01.107

我遇到了同样的问题： div 中具有 style 的谷歌地图`display:none;`。
用这两个步骤解决它：

1.  删除我放置地图的 div 的所有其他样式，除了`height:100%;`
2.  在显示持有 div 后启动地图，而不是在创建时启动地图。就我而言，在 show 方法的回调函数中：

    **CSS**

    ```
    .main-window #map{
        height:100%;
    } 
    ```

    **JS**

    ```
    $('.main-window').show(3000, function() {
        // create the map after the div is displayed
        var mapOptions = {
            center: new google.maps.LatLng(42.499591, 27.474961),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map"), mapOptions);
    }); 
    ```

    **HTML**

    ```
    <div class="main-window">
        <div id="map"></div>
    </div> 
    ```

在 jQuery 的 '$(document).ready(...' 或 Google 的 'google.maps.event.addDomListener(window, "load", ...' 之类的事件中启动它由于某种原因无法正常工作。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:04:22.497

我正在使用[gmaps.js](http://hpneo.github.com/gmaps/)，它是谷歌地图的简化 api。但这只是在javascript中附加一个tabsshow事件并在委托函数中刷新地图的问题。

这是我用于 gmaps.js 的代码

```
$('#tabs').bind('tabsshow', function(event, ui) {
    event.preventDefault();
    if (ui.panel.id == "tabs2") {
            //gmaps.js method
            map.refresh();
            map.setCenter(lastLoc.lat(), lastLoc.lng()); 

            //for native google.maps api
            google.maps.event.trigger(map, 'resize');
            map.panTo(new google.maps.LatLng(lastLoc.lat(), lastLoc.lng()));            
    }
}); 
```

# mysql - Pentaho 数据集成 SQL 连接

> ID：11634181
> 
> 赞同：71
> 
> 时间：2012-07-24T15:26:31.303
> 
> 标签：mysql, pentaho

我正在使用 Pentaho 数据集成，我正在尝试通过 MySQL 连接到我的数据库，但是当我这样做时，我收到了这个错误.....

```
Error connecting to database [devdb2] : org.pentaho.di.core.exception.KettleDatabaseException: 
Error occured while trying to connect to the database

Exception while loading class
org.gjt.mm.mysql.Driver

org.pentaho.di.core.exception.KettleDatabaseException: 
Error occured while trying to connect to the database

Exception while loading class
org.gjt.mm.mysql.Driver

    at org.pentaho.di.core.database.Database.normalConnect(Database.java:368)
    at org.pentaho.di.core.database.Database.connect(Database.java:317)
    at org.pentaho.di.core.database.Database.connect(Database.java:279)
    at org.pentaho.di.core.database.Database.connect(Database.java:269)
    at org.pentaho.di.core.database.DatabaseFactory.getConnectionTestReport(DatabaseFactory.java:86)
    at org.pentaho.di.core.database.DatabaseMeta.testConnection(DatabaseMeta.java:2464)
    at org.pentaho.ui.database.event.DataHandler.testDatabaseConnection(DataHandler.java:533)
    at sun.reflect.GeneratedMethodAccessor55.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.pentaho.ui.xul.impl.AbstractXulDomContainer.invoke(AbstractXulDomContainer.java:329)
    at org.pentaho.ui.xul.impl.AbstractXulComponent.invoke(AbstractXulComponent.java:139)
    at org.pentaho.ui.xul.impl.AbstractXulComponent.invoke(AbstractXulComponent.java:123)
    at org.pentaho.ui.xul.swt.tags.SwtButton.access$500(SwtButton.java:26)
    at org.pentaho.ui.xul.swt.tags.SwtButton$4.widgetSelected(SwtButton.java:119)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
    at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:820)
    at org.eclipse.jface.window.Window.open(Window.java:796)
    at org.pentaho.ui.xul.swt.tags.SwtDialog.show(SwtDialog.java:378)
    at org.pentaho.ui.xul.swt.tags.SwtDialog.show(SwtDialog.java:304)
    at org.pentaho.di.ui.core.database.dialog.XulDatabaseDialog.open(XulDatabaseDialog.java:115)
    at org.pentaho.di.ui.core.database.dialog.DatabaseDialog.open(DatabaseDialog.java:62)
    at org.pentaho.di.ui.spoon.delegates.SpoonDBDelegate.newConnection(SpoonDBDelegate.java:493)
    at org.pentaho.di.ui.spoon.delegates.SpoonDBDelegate.newConnection(SpoonDBDelegate.java:478)
    at org.pentaho.di.ui.spoon.Spoon.newConnection(Spoon.java:7770)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.pentaho.ui.xul.impl.AbstractXulDomContainer.invoke(AbstractXulDomContainer.java:329)
    at org.pentaho.ui.xul.impl.AbstractXulComponent.invoke(AbstractXulComponent.java:139)
    at org.pentaho.ui.xul.impl.AbstractXulComponent.invoke(AbstractXulComponent.java:123)
    at org.pentaho.ui.xul.swt.tags.SwtMenuitem.access$100(SwtMenuitem.java:27)
    at org.pentaho.ui.xul.swt.tags.SwtMenuitem$1.widgetSelected(SwtMenuitem.java:77)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(Unknown Source)
    at org.eclipse.swt.widgets.EventTable.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Widget.sendEvent(Unknown Source)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Unknown Source)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Unknown Source)
    at org.pentaho.di.ui.spoon.Spoon.readAndDispatch(Spoon.java:1183)
    at org.pentaho.di.ui.spoon.Spoon.start(Spoon.java:6966)
    at org.pentaho.di.ui.spoon.Spoon.main(Spoon.java:567)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.pentaho.commons.launcher.Launcher.main(Launcher.java:134)
Caused by: org.pentaho.di.core.exception.KettleDatabaseException: 
Exception while loading class
org.gjt.mm.mysql.Driver

    at org.pentaho.di.core.database.Database.connectUsingClass(Database.java:423)
    at org.pentaho.di.core.database.Database.normalConnect(Database.java:352)
    ... 50 more
Caused by: java.lang.ClassNotFoundException: org.gjt.mm.mysql.Driver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.pentaho.di.core.database.Database.connectUsingClass(Database.java:414)
    ... 51 more 
```

如果我使用 SQLite 作为我的连接类型，它可以工作，但是当我去探索它时没有返回数据。所以我的问题是如何让 MySQL 工作或使用 SQLite 获取数据？

我错过了图书馆或课程吗？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-10-11T10:32:50.943

我在尝试从 Pentaho 查询 MySQL 数据库时遇到了同样的问题。

> 连接到数据库 [Local MySQL DB] 时出错：org.pentaho.di.core.exception.KettleDatabaseException：尝试连接到数据库时发生错误
> 
> 加载类 org.gjt.mm.mysql.Driver 时出现异常

扩展@user979331 的帖子，解决方案是：

1.  *下载*[与您的水壶版本兼容](https://help.pentaho.com/Documentation/8.1/Setup/JDBC_Drivers_Reference#MY_SQL)的[**MySQL Java 连接器/驱动程序**](https://help.pentaho.com/Documentation/8.1/Setup/JDBC_Drivers_Reference#MY_SQL)
2.  *解压缩***zip**文件（在我的例子中是**mysql-connector-java-5.1.31.zip**）
3.  *复制***.jar**文件（**mysql-connector-java-5.1.31-bin.jar**）并将其*粘贴*到您的**Lib**文件夹中：

    **PC:** C:\Program Files\pentaho\design-tools\data-integration\lib

    **Mac：** /应用程序/数据集成/lib

重新启动 Pentaho（数据集成）并重新测试 MySQL 连接。

**其他人的其他有趣回复**也可能有所帮助：

*   想下载好的JDBC驱动版本，兼容你的PDI版本： [https ://help.pentaho.com/Documentation/8.1/Setup/JDBC_Drivers_Reference#MY_SQL](https://help.pentaho.com/Documentation/8.1/Setup/JDBC_Drivers_Reference#MY_SQL)
*   使用 zip 版本（“平台无关”）来提取 jar 文件
*   进入lib文件夹
*   另请参阅 Ryan Tuck 提出的处理它的正确方法

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-18T15:02:02.203

缺少驱动程序文件。

对于刚开始使用 PDI 的人来说，这个错误真的很常见。

驱动程序进入 \pentaho\design-tools\data-integration\libext\JDBC for PDI。如果您使用 Pentaho 套件中的其他工具，您可能需要将驱动程序复制到这些工具的其他位置。作为参考，以下是其他一些设计工具的相应文件夹：

*   聚合设计器：\pentaho\design-tools\aggregation-designer\drivers
*   元数据编辑器：\pentaho\design-tools\metadata-editor\libext\JDBC
*   报表设计器：\pentaho\design-tools\report-designer\lib\jdbc
*   架构工作台：\pentaho\design-tools\schema-workbench\drivers

如果此转换或作业将在另一个机器上运行，例如测试或生产服务器，请不要忘记在部署注意事项中包括复制 jar 文件和重新启动 PDI 或数据集成服务器。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-24T16:07:43.033

原来我会丢失一个名为 mysql-connector-java-5.1.2.jar 的类，我将它添加到这个文件夹（C:\Program Files\pentaho\design-tools\data-integration\lib）并且它与 MySQL 一起使用连接和我的数据和表格出现。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-07-21T16:09:40.653

您需要下载`mysql-connector-java-5.1.46.tar.gz`，而不是最新版本。Pentaho 使用的 Driver 类不包含在 mysql-connector-java-8.xx.yy 版本中。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-09-30T19:14:32.777

除了此处的其他答案之外，您还可以在 Ubuntu (14.04) 上执行以下操作：

`sudo apt-get install libmysql-java`

这将下载`mysql-connector-java-5.x.x.jar`到`/usr/share/java/`，我相信它也会自动创建一个名为`mysql-connector-java.jar`.

然后，在中创建一个符号链接`/your/path/to/data-integration/lib/`：

`ln -s /usr/share/java/mysql-connector-java.jar /your/path/to/data-integration/lib/mysql-connector-java.jar`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-05T18:47:51.170

目前，有一个简单的方法可以解决这个问题：

1.  转到`Tools`→`MarketPlace`并搜索“PDI MySQL 插件”
2.  安装它（这将在这里自动安装缺少的驱动程序`data-integration\plugins\databases\pdi-mysql-plugin\lib`：）
3.  重启 Pentaho
4.  完毕。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-10T19:42:39.887

**为了简洁准确，请下载与您的MySql**版本兼容的兼容 jdbc (.jar) 文件并将其放在`lib`文件夹中。例如 MySQL 8.0.2 下载[Connector/J 8.0.20](https://dev.mysql.com/downloads/connector/j/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-05T12:44:13.703

以上答案很有帮助，但由于未知原因，它们似乎不起作用。因此，如果您已经在系统上安装了 MySql 工作台，则无需下载 jar 文件并努力使用正确的版本，只需转到

```
C:\Program Files (x86)\MySQL\Connector J 8.0 
```

并复制`mysql-connector-java-8.0.12`（不管它是什么版本）该位置的 jar 文件并将其粘贴到`C:\Program Files\pentaho\design-tools\data-integration\lib`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-05T06:11:32.553

首先，您需要下载与您的 pentaho 版本兼容的 Mysql 连接器。然后将其粘贴到**data-integration/lib**文件夹并重新启动您的 pentaho。检查这个 [https://help.pentaho.com/Documentation/8.1/Setup/JDBC_Drivers_Reference#MY_SQL](https://help.pentaho.com/Documentation/8.1/Setup/JDBC_Drivers_Reference#MY_SQL)

# php - Wordpress 获取带有空自定义字段的帖子

> ID：11634184
> 
> 赞同：0
> 
> 时间：2012-07-24T15:26:44.730
> 
> 标签：php, wordpress

我有这个查询来获取带有自定义字段的帖子，效果很好。

```
<?php query_posts('meta_key=version&meta_value=one');  ?>
<?php if ( have_posts() ) : ?>
<?php while ( have_posts() ) : the_post(); ?>
// my posts displaying 
```

现在我想获取没有 meta_value 为“one”或没有设置 meta_key 版本的帖子。我尝试使用空字符串“meta_key=&meta_value=”，但它返回所有帖子，包括将 meta_value 设置为“one”的帖子。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:42:10.523

使用`$the_query = WP_Query($params)`. 它返回一个查询对象，可以像这样使用：-

```
while ( $the_query->have_posts() ) : $the_query->the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

$params = array(
        'meta_query' =>array(

                                array(
                                        'key' => 'version',
                                        'value' =>'one',
                                        'type' => 'char',
                                        'compare' => 'NOT'),
                            ));

$the_query = new WP_Query($params); 
```

[有关您可以在此处使用的运算符的更多信息](http://codex.wordpress.org/Class_Reference/WP_Query)

# asp.net-mvc - ViewModel 参数在 ASP.NET MVC 3 操作中永远不会为空吗？

> ID：11634188
> 
> 赞同：4
> 
> 时间：2012-07-24T15:27:07.137
> 
> 标签：asp.net-mvc, asp.net-mvc-3

通过 ASP.NET MVC 调用方法时，在以下情况下，我的 viewModel 参数永远不会为空吗？例如使用 URL “.../Home/Index”。

```
public ViewResult Index(HomeViewModel viewModel)
{
  // .. do stuff...viewModel is never null here when called within ASP.NET?
} 
```

我以前从未在 ASP.NET MVC 中注意到这种行为，但 ViewModel（如果未提供）似乎正在实例化。

有人可以澄清这种行为。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T16:59:19.303

是的，即使请求中不存在可分配给视图模型的任何参数，您也将始终获得视图模型的实例。

**为什么会发生这种情况？**

作品是这样的`DefaultModelBinder`，

1.  创建视图模型的实例。

2.  迭代模型中的属性并要求值提供者查找值并将找到的值设置为属性。

3.  返回创建的实例。

如果您看到这些步骤，`DefaultModelBinder`它并不关心请求中是否有任何可以设置为模型实例的值，它只是提前开始并创建实例，然后填充属性。

*这没什么意义吧？*

模型绑定器检查请求是否包含与模型属性匹配的任何值然后创建实例会更复杂。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T16:23:26.060

MVC 将尝试获取通过 POST/GET 发送的值并“自动”将它们绑定到模型的属性。这是由默认模型绑定器完成的。在大多数情况下，默认模型绑定器将完成您需要的所有操作。

您可以更深入地了解自定义模型绑定（并且可能会更深入地了解它），但可以查看 IModelBinder 接口——它包含一个名为 BindModel 的方法。在这种方法中，您几乎可以获取 ControllerContext.HttpContext.Request 中的任何内容并填写您的类属性（基本上与默认模型绑定器所做的相同）。使用自定义模型绑定器还有一些您需要跳过的障碍，但会让您了解绑定生命周期。

简短的回答：使用默认模型绑定器，它不会为空。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:41:45.470

当 action 方法参数是复杂类型时，DefaultModelBinder 类使用反射来获取公共属性集，然后绑定到每个公共属性。对于它使用的复杂类型，`Activator.CreateInstance(typeToCreate);`然后将使用 ValueProviders 来获取这些属性的值。请记住，模型绑定器不会锁定到特定的源，但它们可以从源的聚合中构建对象。

# python - 一次将零值分配给多个变量的最有效方法

> ID：11634190
> 
> 赞同：10
> 
> 时间：2012-07-24T15:27:16.120
> 
> 标签：python

我正在尝试将变量初始化为零，所以它目前看起来像这样

```
x1,y1,x2,y2=(0,0,0,0) 
```

它有效，但似乎有点多余。有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T15:28:28.120

我通常会做

```
x1 = y1 = x2 = y2 = 0 
```

然而，这几乎无关紧要。两个版本一目了然。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-24T15:29:24.127

这实际上是对元组进行解包。你可以做：

```
x1 = y1 = x2 = y2 = 0 
```

**只是不要对可变对象这样做！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:37:23.370

为了清楚起见，我个人会使用 Jon 或 Sven 的答案，但作为替代答案，您可以使用`itertools`：

```
import itertools
x1,y1,x2,y2 = itertools.repeat(0,4) 
```

可变对象的警告仍然适用！

# svn - svnversion 与存储库浏览器不匹配？

> ID：11634197
> 
> 赞同：0
> 
> 时间：2012-07-24T15:27:35.377
> 
> 标签：svn, tortoisesvn, version

我试图让我的代码的版本号包含在部署文件中，但我遇到了一个奇怪的情况。我不是一个非常热衷于 svn 的用户，所以我可能在这里遗漏了一些 svn 的微妙之处。

当我`svnversion`在项目的根目录上运行时，或者`svnversion c:\dev\calculator`c:\dev\calculator 是我的源代码的根目录时，我得到相同的结果：17597。

```
C:\Dev\Calculator>svn update
Updating '.':
At revision 17597.

C:\Dev\Calculator>svnversion
17597 

C:\Dev\Calculator>svn info
Path: .
Working Copy Root Path: C:\Dev\Calculator
URL: http://10.168.130.30:8080/read_only/Trunk/Calculator
Repository Root: http://10.168.130.30:8080/read_only
Repository UUID: 9bacaef-544f-534e-b388-4c9dd7c52319
Revision: 17597
Node Kind: directory
Schedule: normal
Last Changed Author: domain\user
Last Changed Rev: 17544
Last Changed Date: 2012-07-19 15:00:36 -0400 (Thu, 19 Jul 2012) 
```

但是，当我使用 TortoiseSVN 存储库浏览器时，我在 17544 看到我的“计算器”文件夹的修订列。此外，在“计算器”文件夹上记录显示了 rev 17544 的最后一个日志条目，[修订图](http://i.stack.imgur.com/RGlIC.jpg)也证实了这一点.

为什么会出现差异？17597号码是从哪里来的？`Last Changed Rev`和 和有什么不一样`Revision`？

感谢您的澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:02:43.327

```
Revision: 17597 
```

显示**工作副本**的当前版本，即与整个版本化项目的当前状态相关联的标识符。

```
Last Changed Rev: 17544 
```

显示上次更改目标**工作目录内容（包括子文件夹）的版本。**

在您的情况下，您在`svn info [TARGET[@REV]...]`没有可选`target`参数的情况下从`C:\Dev\Calculator>`文件夹调用。

如果`target`未指定参数，则在您的情况下选择**当前目录**`svn info`作为目标。**`C:\Dev\Calculator>`**

 **所以`svn info`告诉你`\trunk\Calculator`内容被修改的最新版本是`rev. 17544`.

您应该注意，即使您正在调用映射到 svn 存储库的**主干**`svn info`文件夹的工作目录，您也可以在**分支**或**标签**上有一些最近的修订。**

# css - 为选项设置 DropDownListFor CSS

> ID：11634200
> 
> 赞同：0
> 
> 时间：2012-07-24T15:27:43.737
> 
> 标签：css, asp.net-mvc, drop-down-menu, razor, html.dropdownlistfor

我有以下内容将我的下拉菜单设置为荒谬的宽度：

```
<div class="editor-field">
  @Html.DropDownListFor(x => x.TypeId, new SelectList(Model.Type, "TypeId", "TypeName"), null, new {  @style = "width: 500;" })
                                </div> 
```

如何获取在填充下拉列表中显示为选项的项目以移动它们的对齐方式，例如居中对齐文本？

这就是我的目标，我认为*应该*起作用的，可以在[这里](http://jsfiddle.net/ricardodeano/r7XeZ/18/)找到。

![中心下拉项文本](../Images/2ffb75883ea2bc17297d2602f82ecb1a.png)

但是正如您所看到的，选项文本仍然在左侧。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:03:15.447

I am not quite sure what is you goal here is.

But if I understood correct

```
<select class="ddl">
    <option>Option1</option>
    <option>Option2</option>
</select> 
```

***css***

```
.ddl{text-align: center; width:250px;}
option{text-align: center;} 
```

Sample : [Click Here](http://jsfiddle.net/DSbBv/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:32:06.760

你想要这样的东西吗？

[我的小提琴](http://jsfiddle.net/r7XeZ/)

[**我的新小提琴**](http://jsfiddle.net/r7XeZ/24/)

另请**注意**，您使用的是 500px 宽度，这是为了什么？

# jquery - Sharepoint getlistitems 不返回列表项

> ID：11634206
> 
> 赞同：1
> 
> 时间：2012-07-24T15:27:59.527
> 
> 标签：jquery, sharepoint, sharepoint-2010

我对 spservices 有点陌生，我希望我不是在问一个已经回答过的问题。我**已经**检查过，但无法找到另一个解决与此问题相同的问题。我正在使用 GetListItems 检索存储在列表中的 url 和标题。现在我正在检索项目并将它们显示在一个临时表中。

它在我创建的引用 js 文件、jquery 等的小 html 页面中完美运行。

但，

当我将内容编辑器 Web 部件设置为指向 html 文件（使用内容链接）时，javascript 不起作用（或某些东西），并且项目不显示。我发现它停止工作的确切位置：

```
 $().SPServices({
                operation: method,
                async: false,
                listName: list,
                CAMLViewFields: fieldsToRead,
                  CAMLQuery: query,
                    completefunc: function (xData, Status) {
         alert("When it's in the Content Editor Web Part, this gets called");
                        $(xData.responseXML).SPFilterNode("z:row").each(function() {
         alert("but this does not");
                            var hyperlink = ($(this).attr("ows_Hyperlink")).split(",");
                            var url = hyperlink[0];
                            var description = hyperlink[1];

                            AddRowToTable(url,description);

                        });                
                    }
        }); 
```

正如我之前所说，当我转到 html 页面的物理地址时，这段代码可以完美运行。它抓取列表项并显示正确的内容。当我通过内容链接引用内容编辑器 Web 部件中的 html 页面时，就会出现问题。如果有人对此有见解，那将是非常受欢迎的。

谢谢，AA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:12:30.050

看起来您需要访问根站点。如果由于某种原因，您根本无法使用 ECMAScript

```
clientContext = new SP.ClientContext();
var oWebsite = clientContext.get_site().get_rootWeb();  //this is the web object
var url = clientContext.get_site().Url; //this is the root url
var listServiceUrl = url + "/_vti_bin/lists.asmx"; 
```

`location.host + "/_vti_bin/lists.asmx"`如果在您当前的设置中是安全的，您可以随时使用。

# android - 如何将数据从 Perl 发送到 Python

> ID：11634209
> 
> 赞同：2
> 
> 时间：2012-07-24T15:28:09.947
> 
> 标签：android, python, perl, ipc, jython

我问了另一个关于加快使用 Perl 和 Monkeyrunner (Jython) 测试 Android 的过程的问题，并得到了[这个答案](https://stackoverflow.com/a/10859055/1016937)。

启动一个 Monkeyrunner 脚本，获取一个对象，然后循环等待来自 Perl 脚本的数据（当它到来时处理它）似乎是个好主意。但我不知道如何在 Perl 和 Jython (Python) 之间设置某种 IPC。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:40:40.687

只需在您的脚本中使用 stdin`monkeyrunner`从您的 perl 脚本中读取命令，这应该会打开一个管道：

```
 while True:
    cmd = raw_input('Enter command: ')
    if cmd == 'q' or cmd == 'Q':
        break 
```

# php - PHPDocumentor 断开的链接

> ID：11634211
> 
> 赞同：1
> 
> 时间：2012-07-24T15:28:12.517
> 
> 标签：php, linux, phpdoc

响应式 phpdocumentor 模板中的链接似乎已损坏。例如，包的 url 包含 'db_Models' packages/db_Models/ 当从 URL 中删除 db_Models 时，它可以正常工作。面包屑也被破坏，因为它们包括正斜杠和反斜杠 '/packages/db_Models\'

我正在使用 Ubuntu 并通过 apt-get 安装 phpDoc 满足 phpDocumentor 的所有依赖项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:06:14.963

我通过卸载 phpDoc 并通过 PHP Pear 重新安装它解决了这个问题。

# mysql - 将 memcached 与 mysql 搜索查询一起使用的最佳实践？

> ID：11634217
> 
> 赞同：0
> 
> 时间：2012-07-24T15:28:30.720
> 
> 标签：mysql, memcached

我有friendship_request数据库表，如果这个表有一百万条记录，当我尝试搜索关于tom的请求时，实际上在这百万条记录中没有对tom的友谊请求，所以哪个更好：索引到在内存缓存中，当有人向 tom 发送请求时，然后首先尝试检查内存缓存中的 tom，因此如果存在，请转到数据库并进行搜索查询。或者直接进行搜索查询而不首先检查内存缓存哪个更快？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:38:11.647

*首先*检查 Memcache会更快。就像名称一样，项目存储在内存中，并且比数据库查找具有更少的 I/O。但是，如果服务器的 RAM 已满，Memcached 将驱逐所有数据。出于这个原因，假设放入 Memcache中的*任何数据仍然存在是不明智的。*甚至在项目的时间到期之前。

大多数 Memcache 包装器和 API 将返回 FALSE 或 NOT_FOUND。因此，您的应用程序只需要确定您请求的项目是否已存储，如果没有，请检查数据库。完成数据库搜索后，只需*在 Memcached*中记录结果或没有结果。这将防止您的应用程序再次重新运行相同的搜索。

这是与 Memcached 的快速交互

```
shell ~> telnet localhost 11211
tel ~> get tom
       NOT_FOUND

tel ~> set tom 0 86400 5
    ~> 1,2,3
       STORED

tel ~> get tom
       VALUE tom 0 5
       1,2,3
       END 
```

还有一个快速的 PHP 小类示例

```
<?php
class FriendshipRequest extends Memcache {

    const KEY_PREFIX = 'fr_' ; // Use constant prefix to create namespace
    const FLAG = 0;            // Flag for memechache storage option
    const EXPIRE = 86400;      // Store for one day

    public function __construct() {
    $this->addServer('localhost',11211);
    }

    public function __destruct() {
        $this->close();
    }

    /**
     * Find a name
     *
     * First check memcached. If not found,
     * search database, and store results
     * in a JSON string
     *
     * @param string $name
     * @return array
     */
    public function find($name) {
            $key = $this->toKey($name);
            $results = $this->get($key);
            if( $results === false ) {
                    $results = $this->databaseSearch($name);
                    $this->set($key,json_encode($results),self::FLAG,self::EXPIRE);
            } else {
                    $results = json_decode($results);
            }
            return $results;
    }

    /**
     * Run a database search, and return array of matching ID's
     * @param string $name
     * @return array
     */
    private function databaseSearch($name) {
            $sql = sprintf('SELECT `friend_id` FROM `friendship_request` WHERE `friend_name` LIKE "%s"', mysql_real_escape_string($name));
            $matches = array();
            // Database connection omitted
            $results = mysql_query($sql);
            while( $row = mysql_fetch_object($results) ) {
             array_push($matches,$results->friend_id);
            }
            mysql_free_result($results);
            return $matches;
    }

    /**
     * Create a namespace for key
     * @param string $name
     * @return string
     */
    private function toKey($name) {
            return self::KEY_PREFIX.sha1($name);
    }
} 
```

# linux - 仅在存在时才剪掉多余的线条。Linux

> ID：11634223
> 
> 赞同：0
> 
> 时间：2012-07-24T15:28:44.737
> 
> 标签：linux, bash, shell, scripting

好的，所以我有一个地址列表，接下来是一个端口号。问题是这并不总是正确的。例如我有这个列表：

```
www.google.com:80
www.gmail.com:8080
www.yahoo.com
www.msn.com:443
www.amazon.com
www.apple.com
www.hotmail.com 
```

我想要做的是逐行浏览包含此列表的文本文件并删除地址，如果之后有端口号，`.com`然后删除该端口号并将其存储在变量中。这是我尝试过的：

```
for each in `cat address.txt`; do
    f_address=$each
    f_port=`echo $each | cut -d":" -f2`

    if [[ "$f_address" == *:* ]]; then
        address=`echo $f_address | cut -d":" -f1`
    else
        address=$f_address
    fi

    if [ "$f_port" = "*" ]; then
        port=$f_port
    else
        port="443"
    fi 
```

当它运行时，它不会`:`在需要的时候使用它，而只是让它`443`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:32:26.780

从这个开始：

```
while IFS=: read host port; do
   : ${port:=443}  # assign default value
   echo host=$host
   echo port=$port
done < address.txt 
```

# text - 用于查看文本文档内容并将文本添加到每行开头的脚本

> ID：11634224
> 
> 赞同：1
> 
> 时间：2012-07-24T15:28:49.333
> 
> 标签：text, document, add

我只是在寻找一种快速的方法来查看文本文档的内容，然后将文本添加到每行的开头。每一行都会在开头得到相同的文本。也许是一个简单的脚本来做到这一点。任何想法或建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:34:48.377

一种简单的方法是使用可以从文件或标准输入中读取的**sed （流编辑器）。**它是逐行进行的，并且可以对整个文件或特定子范围的内容进行修改。这就是你想要做的：

```
sed -i 's/^/TEXT/' FILENAME 
```

**-i**选项告诉 sed “就地”编辑文件，这意味着它直接写入文件而不是进入标准输出。原始文件被覆盖。如果您想保留原始数据，只需省略此选项，并通过将**> NEWFILE**附加到上面的命令行，将输出通过管道传输到不同的文件中。

sed 中的**s**命令是搜索/替换。它将在每一行上用第二个模式替换第一个模式的第一次出现。您可以在末尾添加**g**以替换任何行中第一个模式的每次出现，但由于您匹配行的开头，这在这里不是特别有用。

这里的第一个模式是**^**，它是正则表达式中的保留字符，表示行的开头。所以它只会在出现任何其他文本之前添加第二个模式**TEXT 。**

当然，如果您必须以这种方式批处理许多文件，您可以从脚本中调用它。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:33:56.990

也可以在 VB 脚本中轻松完成。如果您正在寻找原生 Windows 解决方案，请使用这个小脚本片段：

```
Set FSO = CreateObject("Scripting.FileSystemObject")

Set inputFile =  FSO.OpenTextFile("inputFilePath", ForReading)
Set outputFile = FSO.OpenTextFile("outputFilePath", ForWriting)

Do Until inputFile.AtEndOfStream

        outputFile.Write("Your Text" & inputFile.ReadLine)

Loop

inputFile.Close
outputFile.Close 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:53:08.650

如果你想完全跨平台，你可以编写一个简短的python脚本。

```
inputFile = open("fileNameInput")
outputFile = open("fileNameOutput", "w")

for inputLine in inputFile:
    outputFile.write("your text" + inputLine + "\n")

inputFile.close()
outputFile.close() 
```

# asp.net - UpdatePanel Timer 导致所有面板更新

> ID：11634232
> 
> 赞同：0
> 
> 时间：2012-07-24T15:29:08.257
> 
> 标签：asp.net, asp.net-ajax

我有一个带有多个 UpdatePanel 的 ASP.NET Web 表单，我想要一个计时器，它只触发其中一个 UpdatePanel 进行更新。然后，我想要一个单独的 UpdatePanel 来更新 DropDownList 的 OnSelectedIndexChanged 事件。我拥有的代码将很好地更新计时器触发的面板，但是当我更改索引时，下拉触发的面板将等到下一个计时器滴答声才能更新。如何让下拉触发的面板立即更新？代码如下。

C＃：

```
public partial class WebForm2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Timer1_Tick(object sender, EventArgs e)
    {
        Label1.Text = "UpdatePanel1 refreshed at: " +
      DateTime.Now.ToLongTimeString();

    }

    protected void dropDown_indexChange(object sender, EventArgs e)
    {
        Label2.Text = "UpdatePanel2 refreshed at: " +
          DateTime.Now.ToLongTimeString();
        //UpdatePanel2.Update(); -- Didn't help
    }
} 
```

ASP：

```
<form id="form1" runat="server">
<div>
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <br />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text="not updated yet"></asp:Label>
            <asp:Timer ID="Timer1" runat="server" Interval="3000" ontick="Timer1_Tick"></asp:Timer>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
    </asp:UpdatePanel>
    <br />
    <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="Label2" runat="server" Text="also not updated yet"></asp:Label>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="DropDownList1"  EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel>
    <br />
    <br />
    <asp:DropDownList OnSelectedIndexChanged="dropDown_indexChange" ID="DropDownList1" runat="server">
        <asp:ListItem>This</asp:ListItem>
        <asp:ListItem>That</asp:ListItem>
        <asp:ListItem>The Other</asp:ListItem>
    </asp:DropDownList>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:32:24.277

将您的 DropDownList 移动到 UpdatePanel 并`.AutoPostBack = true`在其上进行设置。

# php - 如何将 Node.js 服务器连接到 Apache 服务器？

> ID：11634233
> 
> 赞同：3
> 
> 时间：2012-07-24T15:29:08.067
> 
> 标签：php, javascript, apache, node.js, websocket

我想使用[Socket.io](http://socket.io)和[Node.js](http://nodejs.org/)来做推送通知。最终目标是做一些类似于 Stackoverflow 对他们的评论所做的事情，以通知人们新的评论。

我的网站使用 PHP 并在 EC2 实例上的 Apache 上运行。我听说 Apache 不能很好地处理并发性，所以我有兴趣使用 Node 来处理有希望的大量同时持续连接。我想有两种解决方案：

1.  将 Node 放在与 Apache 相同的实例上并代理两台服务器
2.  将 Node 放在一个单独的实例上

无论哪种情况，我都不知道这两个服务器之间的连接如何以编程方式显示。例如，当 WebSockets/Node 处理消息的发送/接收时，我需要将这些消息存储在我的 MySQL 数据库中，这需要一些 PHP 代码，是/否？另外，我的 PHP 页面是如何收到消息的？通过一个`$.post`到这样的 url，`http://mysite/receiver.php`我的 Apache 服务器会解决这个问题吗？

我很高兴看到评论或代码来帮助我更好地理解这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:01:45.120

*   您可以在不同的端口上运行不同的服务器。
*   为了让服务器以某种方式进行通信，您可以使用 Sessions/MySQL/flat files/Cache/json/xml...
*   您可以在任何地方存储消息，对此没有任何限制，node.js 的 MySQL 模块存在，node.js 的 memcache 模块存在等等，**不需要**PHP 代码，查询数据库是可选的。
*   您的 PHP 页面上的消息是从您的数据库中获取并呈现的，如果 node.js 将内容存储在 mysql 服务器中，您可以使用 PHP 获取它们或临时存储到数组中并将消息推送回客户端，同时将消息存储到数据库中以供新用户使用有“当前”的内容。
*   避免使用 ajax，因为您可以在需要时通过 websocket 实时将数据流式传输到客户端。

--**编辑**
了一些关于[如何在 node-http-proxy 旁边使用 vhosts 的附加信息？](https://stackoverflow.com/questions/9368794/how-to-use-vhosts-alongside-node-http-proxy) *Timothy Strimple 在评论中提供的链接*，谢谢

一些 MySQL 驱动程序可以在这个问题[中找到 Node.js 有哪些 MySQL 驱动程序可用？](https://stackoverflow.com/questions/3878818/node-js-and-mysql-drivers)

关于配置端口：
- 在 apache 上，您需要手动编辑 httpd.conf 以定义默认端口
- 在 node.js 上，事情更简单，您可以在代码中定义端口 [使用 node.js 作为简单的 Web 服务器](https://stackoverflow.com/questions/6084360/node-js-as-a-simple-web-server)

```
 var connect = require('connect');
    connect.createServer(
     // .. code
    ).listen(PORT); 
```

希望它有所帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:51:06.060

> 我需要将这些消息存储在我的 MySQL 数据库中，这需要一些 PHP 代码，是/否？

不。Node 允许您在服务器上编写 javavscript，并且您可以使用它执行几乎所有使用 PHP 执行的操作，包括连接到 MySQL 数据库。

您可以在同一台服务器上同时运行 Node 和 Apache，并使用 NGINX 在两者之间进行代理，或者您可以使用 Node 代理到您的 Apache。但是不要使用 Apache 来代理 Node，因为你会损害性能。

以下是一些希望对您有所帮助的链接：

*   [快递网络框架](http://expressjs.com)
*   [节点-mysql](https://github.com/felixge/node-mysql)
*   [NGINX proxy_pass](http://wiki.nginx.org/HttpProxyModule) - 在端口 80 上运行 nginx，在具有不同端口的 localhost 上运行 apache 和节点，使用 nginx 在它们之间进行路由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-12T16:44:07.220

您还可以使用套接字作为两者之间的直接通信方式，使用 node.js 的 net 模块和 php 的 socket 模块。这是一个例子。

## 侦听连接的简单节点 js 服务器

```
var net = require('net');

var listenport = 3000; // Should be the same as in the php script

// Set up server
var Server = net.createServer(function(Sock) {
    console.log('Client Connected.');

    Sock.on('data', function(data) {
       console.log('Data received: ' + data);

       dataobj = JSON.parse(data);

       console.log('Item ID: ' + dataobj.itemid);

       // and so on
    });

    Sock.on('end', function() {
        console.log('Client Disconnected.');
    });

    Sock.pipe(Sock);
});

Server.listen(listenport, function() {
   console.log('Listening on port ' + listenport); 
}); 
```

## 连接节点实例的简单 PHP

```
<?php
error_reporting(E_ALL);

$port = 3000; // Port the node app listens to
$address = '127.0.0.1'; // IP the node app is on

// Create socket
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if ($socket === false) {
    echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
}

// Connect to node app
$result = socket_connect($socket, $address, $port);
if ($result === false) {
    echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
}

// Data we want to send
$data = array('itemid' => '1234567', 'steamid' => '769591951959', 'otherinfo' => 'hi there');

// Prepares to transmit it
$encdata = json_encode($data);

socket_write($socket, $encdata, strlen($encdata));

socket_close($socket);

echo 'Sent data\n';

?> 
```

原文来源：[github 如何将php连接到node js](https://gist.github.com/MStruntze/d7de3ea07b2777ca9f6d)

# java - 用Java复制jar文件后出错？

> ID：11634234
> 
> 赞同：0
> 
> 时间：2012-07-24T15:29:16.837
> 
> 标签：java, networking, jar

我正在尝试制作一个自动更新的客户端。jarred 客户端将转到服务器并请求更新文件。服务器将发送更新文件。当更新文件（包含已转换为字节数组的jar文件）到达时，客户端将检查它是否具有客户端jar的最新版本（更新文件中的那个）。顺便说一下，引用“in”是连接到服务器的套接字。

```
UpdateFile uf = (UpdateFile) in.readObject();
System.out.println("Client checking if update needed");                                                                              
if (!uf.getVersion().equals(myVersion)) {
    System.out.println("Client needed update");
    uf.update(updateLocation);
} 
```

如果它没有最新的jar，它将调用UpdateFile中的函数update(String whereToUpdate)。这将删除旧的 jar 文件（调用函数 update() 的那个！）并通过将 byte[] 写入相同的位置来替换它。

```
public void update(String location) {
    try {
        boolean b = (new File(location)).delete();
        System.out.println("removed old jar file");
        updateJar.writeBytes(location);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

在这段代码中，updateJar 是一个 NetworkingFile（我自己的类）。这个 NetworkingFile 将不可序列化的对象转换为 byte[]，发送到接收器，然后将文件写回磁盘。

```
public class NetworkingFile implements Serializable{
byte[] cArray;
String name;

public NetworkingFile(File f, String fileName) {
    name = fileName;
    compressFile(f);
}

public NetworkingFile(byte[] b, String fileName) {
    cArray = b;
    name = fileName;

}

public void compressFile(File f) {      
    cArray = new byte[(int)f.length()];

    try {
        FileInputStream inputReader = new FileInputStream(f);

        BufferedInputStream fileReader = new BufferedInputStream(inputReader);

        fileReader.read(cArray, 0, cArray.length);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

public String getFileName() {
    return name;
}

public byte[] getCompressedFile() {
    return cArray;
}

public void writeBytes(String location) {
    try {
        File writeFile = new File(location);
        FileOutputStream writer = new FileOutputStream(writeFile);

        writer.write(cArray);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
 }
} 
```

此代码在编译或执行 FIRST jar 时不会出错。但是，当 jar 完成更新后，我退出程序并尝试使用“java -jar filename.jar”运行它。但是，我在运行时收到此错误：错误：无效或损坏的 jarfile DropBoxClient.jar

关于可能导致这种情况的任何想法？所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:03:52.083

这里有几件事。

第一个是您没有关闭 FileOutputStream。如果你不关闭刷新它，程序可能会在没有将所有内容写入磁盘的情况下结束。

第二个，fileReader.read 不能保证读取那么多字节，由于多种原因，它可能会在实际读取那么多字节之前返回。这就是为什么它返回一个带有实际读取的字节数的 int 的原因。（请参阅[此处的 javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedInputStream.html#read%28byte%5B%5D,%20int,%20int%29)）

将文件从一个文件复制到另一个文件的推荐方法与您在此处实现的方法完全不同，例如，请参见此[源代码示例](http://www.roseindia.net/java/beginners/copyfile.shtml)。

我建议您阅读更多有关 Java 流如何工作的信息，它们可能看起来比实际简单。

# c# - 从字节数组转换为 base64 并返回

> ID：11634237
> 
> 赞同：47
> 
> 时间：2012-07-24T15:29:23.467
> 
> 标签：c#, encoding, base64, bytearray, type-conversion

我在尝试着：

1.  生成一个字节数组。
2.  将该字节数组转换为base64
3.  将该 base64 字符串转换回字节数组。

我已经尝试了一些解决方案，例如这个[问题](https://stackoverflow.com/questions/8645088/how-to-decode-a-string-of-text-from-a-base64-to-a-byte-array-and-the-get-the-st)中的那些。

由于某种原因，初始字节数组和最终字节数组不匹配。这是使用的代码：

```
using (RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider())
    {
         byte[] originalArray = new byte[32];
         rng.GetBytes(key);
         string temp_inBase64 = Convert.ToBase64String(originalArray);
         byte[] temp_backToBytes = Encoding.UTF8.GetBytes(temp_inBase64);
    } 
```

我的问题是：

1.  为什么“originalArray”和“temp_backToBytes”不匹配？（originalArray 的长度为 32，temp_backToBytes 的长度为 44，但它们的值也不同）

2.  是否可以来回转换，如果可以，我该如何实现？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-24T15:34:47.770

编码数组长约四分之一的原因是 base-64 编码仅使用每个字节中的 6 位；这就是它存在的原因 - 以适合通过仅 ASCII 渠道（例如电子邮件）进行交换的方式对任意数据（可能使用零和其他不可打印字符）进行编码。

获取原始数组的方法是使用`Convert.FromBase64String`：

```
 byte[] temp_backToBytes = Convert.FromBase64String(temp_inBase64); 
```

# css - 字体双px值代表什么？

> ID：11634245
> 
> 赞同：3
> 
> 时间：2012-07-24T15:29:45.553
> 
> 标签：css

也许我的问题很简单，但我做了一些研究，我找不到任何关于它的东西。

我阅读了一篇文章，并在示例中找到了以下内容：

```
font: 27px/27px Baskerville, Palatino, "Palatino Linotype", serif; 
```

代表什么`27px/27px`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:30:56.153

第一个是大小，第二个是行高。

```
font: size/line-height; 
```

有关更多信息，请参阅[字体速记属性的 CSS 规范](http://www.w3.org/TR/CSS2/fonts.html#font-shorthand)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:35:21.670

第一部分表示字体大小，第二部分表示行高。

看看： [http ://www.w3schools.com/cssref/pr_font_font.asp](http://www.w3schools.com/cssref/pr_font_font.asp)

[http://www.w3schools.com/cssref/pr_font_font-size.asp](http://www.w3schools.com/cssref/pr_font_font-size.asp)

[http://www.w3schools.com/cssref/pr_dim_line-height.asp](http://www.w3schools.com/cssref/pr_dim_line-height.asp)

# javascript - 尝试将 Javascript 数组变量分配给 HTML 输入值属性

> ID：11634249
> 
> 赞同：0
> 
> 时间：2012-07-24T15:29:59.287
> 
> 标签：javascript, jquery, html, input

我有一个复杂的问题要问，到目前为止，我的 Google-Fu 显然太弱了，无法解决这个问题。

我正在构建一种形式，它应该遍历数组中的一堆名称，将它们全部呈现以供选择，并且：

*   将所选名称放入一组表单输入（具体为文本）；
*   动态生成一堆具有更多相同文本输入的 div；
*   将*其余*名称放入那些新 div

我已经让其中的前两个工作得很好，混合了 JQuery 和常规 Javascript。但是我遇到的问题发生在最后一步，那里。

这是我正在做的示例行：

```
var lname = '<p>Last name: <input type=\'text\' class=\'inputbox\' value=lastNames[i] /></p>';
...
...
$('.others').append(...,lname,...); 
```

这是在一个`for (i=0; i<lastNames.length; i++)`循环内，因此计划是为数组中的每个名称创建一个 div 和其中的输入。这已经奏效了。问题是当我加载页面并选择一个名称时，会出现 3 个新的 div ......并且每个框内的文本是，例如，lastNames[i] 而不是 Smith。

我在这里在语法上缺少什么？还是比我想象的更复杂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:33:27.850

现在你所做的就是设置一个字符串。您需要将 lastNames 变量连接到字符串以获得所需的结果。

```
var lname = '<p>Last name: <input type=\'text\' class=\'inputbox\' value=\'' + lastNames[i] + '\'></p>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:46:25.593

我建议您查看[jQuery 模板](http://api.jquery.com/category/plugins/templates/)，此解决方案非常适合您的问题。

**编辑：**基本上你只需设置一个准备好的模板，然后输入 {{each}} 条件格式，它会自动创建你拥有的列表，在 js 中没有任何 for 循环。

# c# - 带有 nsoftware dll 的多个 SNMP 代理

> ID：11634250
> 
> 赞同：1
> 
> 时间：2012-07-24T15:30:01.577
> 
> 标签：c#, snmp

我使用名为 SecureSNMP V8 .net Edition (C#) 的 nsoftware（或 IP*Work！，相同）的 SNMP 工具，并尝试在独立设备上运行多个 Snmp 代理。

Nsoftware 提供了一个示例代理和文档，但我没有任何帮助。

如果有人知道这个工具以及如何同时创建和运行多个代理，你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:23:31.797

我终于找到了解决方案。我只需要在激活它之前设置 snmpAgent 的 localhost 属性，并且只有在激活后才能看到修改。

如果多个代理具有相同的端口但具有不同的 IP 地址，则它们可以同时运行。

很抱歉用这个简单的问题打扰了您。

# html - CSS 帮助 | 菜单

> ID：11634256
> 
> 赞同：-2
> 
> 时间：2012-07-24T15:30:25.373
> 
> 标签：html, css

请看网站 [http://dreamsnw.com/faiq123/](http://dreamsnw.com/faiq123/)

问题是抽搐和菜单相互碰撞，而且它广泛分布在整个屏幕上，我只想向下挤压到中心。导航相互碰撞。我已将位置父设置为绝对，子位置设置为相对。没有任何工作。

```
#menu-nav {
    width: 20em;
    padding: 0 0 0em 0;
    height:5em;
    margin-bottom: 5em;
    position:relative;

}
#menu-nav ul {
    list-style: none;
    margin-right: 10px;
    padding: 0px;
    border: none;
    line-height:13px;
}
#menu-nav li{
    margin: -5px;
    list-style: none;
}
#menu-nav li a {
    display: block;
    padding: 7px 5px 3px 0.25em;
    font-weight:bold;
    text-decoration: none;
    width: 100%;
    line-height:13px;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #ffffff;
}

html>body #menu-nav li a {
    width: auto;
}

#menu-nav li a:hover  {

}
#menu-nav #item1 a:hover
{  
background-image:url(images/navs/AboutUs.png);
line-height:40px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav #item2 a:hover
{  
background-image:url(images/navs/AboutUs.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav #item3 a:hover
{  
background-image:url(images/navs/Services&product.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav #item4 a:hover
{  
background-image:url(images/navs/Potfolio.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav #item5 a:hover
{  
background-image:url(images/navs/Whyus.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav #item6 a:hover
{  
background-image:url(images/navs/CSR.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav #item7 a:hover
{  
background-image:url(images/navs/Contactus.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav #item8 a:hover
{  
background-image:url(images/navs/Careers.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav2 {
    width: 20em;
    padding: 0 0 0em 0;
    height:5em;
    margin-bottom: 5em;
    position:relative;
    }
#menu-nav2  ul {
    list-style: none;
    margin: 0px;
    padding: 0px;
    border: none;
}
#menu-nav2  li{
    margin: -5px;
    list-style: none;
}
#menu-nav2  li a {
    display: block;
    padding: 7px 5px 3px 0.25em;
    font-weight:bold;
    text-decoration: none;
    width: 100%;

    font-family:Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #ffffff;
}

html>body #menu-nav2  li a {
    width: auto;
}

#menu-nav2 li a:hover {

}

#menu-nav2 #item9 a:hover
{  
background-image:url(images/navs/SAPDevlopment.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav2 #item10 a:hover
{  
background-image:url(images/navs/SARemotebase.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav2 #item11 a:hover
{  
background-image:url(images/navs/SARemotebase.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav2 #item12 a:hover
{  
background-image:url(images/navs/Sapconstant.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav2 #item13 a:hover
{  
background-image:url(images/navs/Sapconstant.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

#menu-nav2 #item14 a:hover
{  
background-image:url(images/navs/SapABAP.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}
#menu-nav2 #item15 a:hover
{  
background-image:url(images/navs/Appleiostraining.png);
line-height:35px;
background-position:left;
background-repeat:no-repeat;
color: #ffffff;
font-weight:bold;
position:absolute;
}

.main-menu-div
{
width: 100%;
padding: 5px; 
margin-left:60px;
}
.main-menu-content
{
margin-top:4px;
}
.main-menu-div-2
{
float: left;
width: 20%;
height:170px;
color:#FFFFFF;

}
.main-menu-div-3
{
float: left;
width: 16%;
height:170px;
border:#ffffff;
color:#FFFFFF;

}
.main-menu-div-4
{
float: left;
width: 22%;
height:170px;
border:#ffffff;
color:#FFFFFF;
}
.main-menu-div-5
{
float: left;
width: 22%;
height:170px;
color:#FFFFFF;
}

HTML
<div class="main-menu-div">
 <!-- main-menu-div starts -->
     <div class="main-menu-div-2"> 
     <div class="main-menu-content">
     <div id="menu-nav">
     <ul>
     <li id="item1">
     <div align="left"><a href="#"><div style="margin-left:70px;">Home</div></a></div>
     </li>

     <li id="item2">
     <div align="left"><a href="#"><div style="margin-left:70px;">About Us</div></a></div>
     </li>

     <li id="item3">
     <div align="left"><a href="#"><div style="margin-left:70px;">Services &amp; Products</div></a></div>
     </li>

     <li id="item4">
     <div align="left"><a href="#"><div style="margin-left:70px;">Portfolio</div></a></div>
     </li>
     </ul>
     </div>
     </div>
     </div>

     <div class="main-menu-div-3">
     <div class="main-menu-content">
     <div id="menu-nav">
     <ul>
     <li id="item5">
     <div align="left"><a href="#"><div style="margin-left:70px; ">Why Us</div></a></div>
     </li>

     <li id="item6">
     <div align="left"><a href="#"><div style="margin-left:70px;">CSR</div></a></div>
     </li>

     <li id="item7">
     <div align="left"><a href="#"><div style="margin-left:70px;">Contact Us</div></a></div>
     </li>

     <li id="item8">
     <div align="left"><a href="#"><div style="margin-left:70px;">Careers</div></a></div>
     </li>
     </ul>
     </div> 
     </div>
     </div>

     <div class="main-menu-div-4">
     <div class="main-menu-content">
     <div id="menu-nav2">
     <ul class="menu-nav ">
     <li id="item9">
     <div align="left"><a href="#"><div style="margin-left:70px; ">SAP Development</div></a></div>
     </li>

     <li id="item10">
     <div align="left"><a href="#"><div style="margin-left:70px;">SAP Remote Basis</div></a></div>
     </li>

     <li id="item11">
     <div align="left"><a href="#"><div style="margin-left:70px;">SAP Low Cost Support</div></a></div>
     </li>

     <li id="item12">
     <div align="left"><a href="#"><div style="margin-left:70px;">Contract SAP Consultants</div></a></div>
     </li>
     </ul>
     </div>
     </div>
     </div>

     <div class="main-menu-div-5">
     <div class="main-menu-content">
     <div id="menu-nav2">
     <ul>
     <li id="item13">
     <div align="left"><a href="#"><div style="margin-left:70px; ">Smartphone Development</div></a></div>
     </li>
     <li id="item14">
     <div align="left"><a href="#"><div style="margin-left:70px;">SAP ABAP Training</div></a></div>
     </li>
     <li id="item15">
     <div align="left"><a href="#"><div style="margin-left:70px;">Apple iOS Training</div></a></div>
     </li>    
     </ul>
     </div>
     </div>
     </div>

 <br style="clear: left;" />
 </div> 
```

**jsfiddle：http:** [//jsfiddle.net/JeJTs/](http://jsfiddle.net/JeJTs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:04:35.373

当您将鼠标悬停在链接上时，它会显示图像。您使用背景图像设置此图像。同时，您将链接的 line-height 更改为图像的高度。这会导致链接被“推”下来，与下面的链接重叠。

这就是你的问题所在。为了正确显示图像，您需要将链接元素的高度设置为图像的一侧。但是通过应用`line-height`（或`height`），您将导致链接重叠其兄弟姐妹，或者以其他方式将其他链接推到一边。

获得您想要的效果的最佳方法是使用像 JQuery 这样的 Javascript 插件来执行自定义工具提示（图像），并且只在`:hover`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:05:36.433

您正在为每个菜单项创建一个 div，这不是一个好习惯，[这](http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizontal-dropdown-menu-with-html-css-and-jquery/)是创建简单菜单的方法。

# ruby-on-rails - Rails 中的 ActiveRecord 保存点异常

> ID：11634259
> 
> 赞同：0
> 
> 时间：2012-07-24T15:30:33.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

根据 Michael Hartl 的 Rails 教程，在运行规范时，我不断得到以下信息：

```
Failures:

  1) User should create a new instance given valid attributes
     Failure/Error: User.create!(@attr)
     ActiveRecord::StatementInvalid:
       SQLite3::SQLException: near "SAVEPOINT": syntax error: SAVEPOINT active_record_1
     # ./spec/models/user_spec.rb:15:in `block (2 levels) in <top (required)>' 
```

我已经在系统上将我的 sqlite 3 版本升级到了 3.7.13。关于如何解决此问题以使测试通过的任何想法？

# java - 无法从三星 Galaxy S (2.2.1) 上的前置摄像头拍照

> ID：11634261
> 
> 赞同：1
> 
> 时间：2012-07-24T15:30:38.660
> 
> 标签：java, android, android-camera

我正在使用此处描述的相机：[Android Camera will not work。开始预览失败](https://stackoverflow.com/questions/7942378)。如果我使用后置摄像头，它工作正常！预览作品，我可以拍照。

但是，当我通过设置参数使用前置摄像头时：它会在方法`parameter.set("camera-id", 2)`上引发错误。**预览效果很好，**我可以在 SurfaceView 上看到自己。但是我**不能拍照。**`camera.takePicture(...)`

 ****这是错误：

```
> 07-24 21:59:52.926: E/AndroidRuntime(2462): Caused by: java.lang.RuntimeException:
> takePicture failed
> at android.hardware.Camera.native_takePicture(Native Method)
> at android.hardware.Camera.takePicture(Camera.java:672)
> at android.hardware.Camera.takePicture(Camera.java:636)
> at org.omich.alarm.PhotoController.takePhoto(PhotoController.java:94)
> ... 15 more 
```

这是我的代码：

```
public class Photo
{
    private SurfaceView mSurfaceView;
    private SurfaceHolder mSurfaceHolder;

    private Camera mCamera;
    private CameraCallback mCameraCallback;

    public Photo (Activity context)
    {
        mSurfaceView = (SurfaceView)context.findViewById(R.id.surfaceView);
        mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(new SurfaceCallback());
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void takePhoto ()
    {
        if(mCameraCallback == null)
        {
            mCameraCallback = new CameraCallback();
        }

        try
        {
            mCamera.takePicture(null, null, mCameraCallback);
        }
        catch (Throwable e)
        {
            Log.d("ERROR!!! takePicture error");
        }
    }

    //========================================================================  

//  private int getFrontCameraId()
//  {
//      CameraInfo ci = new CameraInfo();
//      for (int i = 0 ; i < Camera.getNumberOfCameras(); i++)
//      {
//          Camera.getCameraInfo(i, ci);
//          if (ci.facing == CameraInfo.CAMERA_FACING_FRONT)
//          {
//              return i;
//          }
//      }
//      return -1; // No front-facing camera found
//  }

    private static class CameraCallback implements Camera.PictureCallback
    {
        @Override
        public void onPictureTaken(byte[] data, Camera camera)
        {
            Log.d("Yahoo! Photo taken");
        }       
    }

    private class SurfaceCallback implements SurfaceHolder.Callback
    {
        //==== SurfaceHolder.Callback ============================================
        @Override  
        public void surfaceChanged(SurfaceHolder arg0, int format, int width, int height)  
        {
            Camera camera = mCamera;

            Parameters p = camera.getParameters();
            if(p != null)
            {
                p.setPreviewSize(width, height);
                p.set("camera-id", 2);
                camera.setParameters(p);
            }

            try
            {
                camera.setPreviewDisplay(mSurfaceHolder);
                camera.startPreview();
            }
            catch (IOException e)
            {
                Log.d("setPreviewDisplay error");
            }
            catch (Throwable e)
            {
                Log.d("startPreview error");
            }
        }

        @Override  
        public void surfaceCreated(SurfaceHolder holder)  
        {
//          mCamera = Camera.open(getFrontCameraId());
            mCamera = Camera.open();
        }

        @Override  
        public void surfaceDestroyed(SurfaceHolder holder)
        {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:46:33.010

你应该得到另一个相机实例。请参阅[Camera.open(int cameraId)](http://developer.android.com/reference/android/hardware/Camera.html#open%28int%29)。您必须找出前置摄像头的 ID 并将其与上述方法一起使用。

更新：

**采用 Android API 7、8 级解决方案的三星 Galaxy S**

在 Camera mCamera = Camera.open() 使用 setFrontCamera(mCamera) 之后：

```
void setFrontCamera(Camera camera) {
    Camera.Parameters parameters = camera.getParameters();
    parameters.set("camera-id", 2);
    // (800, 480) is also supported front camera preview size at Samsung Galaxy S.
    parameters.setPreviewSize(640, 480); 
    camera.setParameters(parameters);
} 
```

三星还链接到 SO： [如何在三星 Galaxy S 上使用前置摄像头](https://stackoverflow.com/questions/4241292/how-to-use-front-facing-camera-on-samsung-galaxy-s)

看来您必须更改 PreviewSize 以及 id。****

# javascript - 使用 JavaScript 的选项值

> ID：11634263
> 
> 赞同：1
> 
> 时间：2012-07-24T15:30:40.563
> 
> 标签：javascript, html, forms

我有一个包含以下字段的表单：

```
<input type="text" name="text" id="text"> 
```

我希望 JavaScript 采用该字段的值，所以我认为我应该使用以下代码：

```
<script language="javascript">
    function GetTextBoxValue(text)

    {

        alert(document.getElementById(text).value);

    }
//-->
</script> 
```

此代码必须更改下拉选项的值。

```
<option value="value from JavaScript/text from the textbox">other</option> 
```

文本框中的文本是否可能是选项的值？如果是，我必须在这里写什么 option value="value from JavaScript" 才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:34:28.443

这是一个演示：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function setOptionValue() {
                document.getElementById("option").value = document.getElementById("text").value;
                document.getElementById("option").text = document.getElementById("text").value;
            }
        </script>
    </head>
    <body>
        <input id="text" />
        <select>
            <option id="option"></option>
        </select>
        <button type="button" onclick="setOptionValue()">Set a value in the text box and press me</button>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:17:10.233

好的，我看到您的问题有两种解决方案。第一个是实时值更新：

```
<select id="folder" name="folder">
   <option ...
   ... </option>
   <option id="otheroption" value="New">Other</option>
</select>
<div id="otherfolder" style="display:none">
   <label for="otherinput">New folder name:</label>
   <input id="otherinput">
</div>
<script> // here, or execute the following onload/ondomready
    document.getElementById("folder").onchange = function(e) {
        // I guess you have this piece of code already
        document.getElementById("otherfolder").style.display =
            this.options[this.selectedIndex].id == "otheroption" ? "" : "none";
    };
    document.getElementById("otherinput").onkeyup = function(e) {
        document.getElementById("otheroption").value = this.value;
    };
</script> 
```

第二种方法是动态更改`name`选择框和输入框的 s（使用完全相同的标记），以确定将哪个值作为`folder`参数发送到服务器：

```
 document.getElementById("folder").onchange = function(e) {
        var name = "folder",
            other = this.options[this.selected].id == "otheroption";
        document.getElementById("otherfolder").style.display = other ? "" : "none";
        document.getElementById("otherinput").name = other ? name : "";
        this.name = other ? "" : name;
    }; 
```

# css - 验证 -moz-box-sizing

> ID：11634264
> 
> 赞同：1
> 
> 时间：2012-07-24T15:30:41.343
> 
> 标签：css, validation, firefox

我正在使用带有供应商前缀的 box-sizing ，就像[这样](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)

...通过[CSS 验证器运行它](http://jigsaw.w3.org/css-validator/)

...并收到此错误： **Property -moz-box-sizing 不存在：border-box**

有没有办法让它通过？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:42:34.957

不，CSS3 处于 BETA 模式，浏览器需要有前缀，因为某些属性有不同的值。将来这将是一个标准，即 W3C CSS 3 级标准。然后前缀将被删除。

但是，我们今天需要使用前缀，而前缀并不是真正的 CSS，它们只是浏览器将解析哪些属性的指示器。因为它们不是 CSS，所以 CSS 验证器不会通过。

但是“有效”页面什么也没说。不要担心你的 CSS/HTML 中的一些错误，只修复那些关键的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:43:16.720

当 Browservendors 尝试实现新的 css 功能时，他们会添加前缀，只要它们不是 100% 符合 css 标准。这些供应商前缀不是官方 CSS 规范的一部分，因此在通过 css-validator 运行时会产生错误。

但是，如果您绝对热衷于使用符合标准的 css，则可以尝试[PrefixFree 。](http://leaverou.github.com/prefixfree/)

# ruby-on-rails - 如何从 S3 获取文件大小和类型？

> ID：11634266
> 
> 赞同：1
> 
> 时间：2012-07-24T15:30:58.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, carrierwave

我正在使用carrierwave_direct，它将文件直接上传到S3。我需要将文件信息保存到数据库中 - 例如文件类型和大小。好奇最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-07T21:59:50.530

如[该线程](https://stackoverflow.com/q/3910071/9225626)所述，最佳方法是使用*head_object*方法，该方法不下载文件本身的内容。

[sdk-for-ruby 文档：](https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Client.html#head_object-instance_method) *HEAD 操作从对象中检索元数据而不返回对象本身。如果您只对对象的元数据感兴趣，此操作很有用。要使用 HEAD，您必须对对象具有 READ 访问权限。*

因此，对于 file_size 和 file_type 您可以：

```
require 'aws-sdk-s3'

s3 = Aws::S3::Client.new(
  region:               'us-east-1',     #or any other region
  access_key_id:        AWS_ACCESS_KEY_ID,
  secret_access_key:    AWS_SECRET_ACCESS_KEY
)

res = s3.head_object(bucket: bucket_name, key: object_key)
file_size = res[:content_length]
file_type = res[:content_type] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:21:46.070

最好的方法是使用[imagemagick identify 命令](http://www.imagemagick.org/script/identify.php)。就在您保存文件之前/之后，您需要计算它的大小。该文件必须是本地的（因此如果它已经在 S3 上，您必须再次下载它）：

```
identify the-image.jpg
#=> rose.jpg JPEG 640x480 DirectClass 87kb 0.050u 0:01 
```

它将输出一个您必须解析的字符串。RMagick 有一个 api，它会自动为您提供宽度/高度/类型，但我似乎找不到它（这可能会有所帮助：[RMagick 返回 nil 读取 JPEG](https://stackoverflow.com/questions/2539386/rmagick-returns-nil-reading-jpeg)）。

# jquery - 禁用文本框输入值

> ID：11634268
> 
> 赞同：1
> 
> 时间：2012-07-24T15:31:02.840
> 
> 标签：jquery

我有带日期选择器的文本框。根据我的要求，用户必须选择每月的第一个星期二或第二个星期二。因此，我使用以下代码禁用了其余日期，并且工作正常。

```
var dates_allowed = {
      '2012-07-24': 1,
      '2012-08-14': 1,
      '2012-08-21': 1,
      '2012-09-11': 1,
  '2012-09-18': 1,
      '2012-10-09': 1,
      '2012-10-16': 1
};
$("#" + webinarDate.id).datepicker({
    // called for every date before it is displayed
    beforeShowDay: function(date) {

        // prepend values lower than 10 with 0
        function addZero(no) {
            if (no < 10){
              return "0" + no;
            }  else {
              return no; 
            }
        }

        var date_str = [
            addZero(date.getFullYear()),
            addZero(date.getMonth() + 1),
            addZero(date.getDate())      
        ].join('-');

        if (dates_allowed[date_str]) {
            return [true, 'good_date', 'This date is selectable'];
        } else {
            return [false, 'bad_date', 'This date is NOT selectable'];
        }
    }
}); 
```

但问题是用户可以在文本框中输入日期而不是使用 datepicker（我不想要那个）。如何限制用户从日期选择器中选择日期，而不是手动输入。我希望你明白..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:33:34.467

**你是这个意思？**

您可以使用以下命令将日期选择器输入文本设置为只读。

在你的情况下将是这个元素：`$("#" + webinarDate.id)`

* * *

```
<input type='text' id='datepickerTxt' readonly='true'> 
```

或者：

```
$("#datepickerTxt").attr('readonly', 'true'); 
```

或者：

```
$("#datepickerTxt").keypress(function(e){ e.preventDefault(); }); 
```

在现代 jQuery 版本中：

```
$("#datepickerTxt").prop('readonly', 'true'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:33:28.237

日期选择器在这里是正确的解决方案吗？感觉更像是一个下拉列表，可以选择下一批日期。

如果需要，您可以使用 onblur 定位用户输入并进行测试。

或者，如果触发了 onfocus，则禁用键盘输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T08:01:31.187

在 ASPX 中 - 拖放 AJAX 日历扩展器，将 ControlToValidate 更改为 txt_Date（日期文本框）的 ID，将 Enable Client Script 更改为 False

然后

在 TextBox 属性中，只需将只读属性更改为 TRUE..

（确保您已经拖动 ScriptManager 以使扩展器工作）...

现在您只能使用日历扩展器更改日期，因此无法输入无效日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:36:05.523

我会看到这个答案： [jQuery Date Picker where text input is read only](https://stackoverflow.com/questions/2771137/jquery-date-picker-where-text-input-is-read-only) Add an onclick event and disable the input

# java - 如何保持从 Java Runtime.exec(command) 打开的程序始终在最前面

> ID：11634269
> 
> 赞同：1
> 
> 时间：2012-07-24T15:31:09.160
> 
> 标签：java, linux, shellexecute, always-on-top

我们有一个在 Linux 机器上运行的全屏 java 程序。该程序一直在运行，这是 Linux 机器存在的主要原因。

我们有一堆可以通过下拉菜单打开的程序的 PDF 帮助文件。当用户单击帮助菜单项之一时，我们通过以下方式打开 XPDF

```
 final Runtime rt = Runtime.getRuntime();
    final String cmd = "runxpdf.sh";
    rt.exec(cmd); 
```

这一切都很好，除了如果用户在 XPDF 查看器运行时单击我们的程序，它将落后于我们的全屏程序显示。

我们希望能够做的是让 XPDF 程序始终保持在最前面，直到它关闭。这可以通过从 Java 执行程序来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:27:36.110

问题是您需要与另一个程序（窗口管理器）进行通信，以指示该程序保持窗口升起。

在基于 X 窗口的系统中，曾经有一个名为的工具`wmctrl`，它可以向当前窗口管理器发出请求和查询，前提是它是一个兼容的窗口管理器。使用这样的工具，我的结果好坏参半。在大约 20 个 Linux 窗口管理器中，最受欢迎的那些在处理请求方面做得更好（也许这就是它们受欢迎的原因？）。

将桌面切换到窗口，提升和聚焦的命令是

```
wmctrl -i -a <Window Id> 
```

获取由窗口管理器管理的窗口列表

```
wmctrl -l 
```

虽然这不能保证“总是在顶部”，但您可以编写一个`Thread`循环来检查并重新启动一个窗口。

至于 Windows 解决方案，其他人将不得不对此发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T20:08:05.827

有点切线，但我认为值得一试 - 您是否考虑过直接从 Java 显示 PDF？然后，您可以更好地控制窗口，例如使用 JFrame 的 setAlwaysOnTop(boolean)。[此处](https://stackoverflow.com/questions/286867/java-pdf-viewer-with-fdf)讨论了一些 PDF 显示选项。

# java - 使用 Java Pattern 和 Matcher 搜索包含正斜杠等标点符号的模式

> ID：11634272
> 
> 赞同：1
> 
> 时间：2012-07-24T15:31:23.210
> 
> 标签：java, regex, pattern-matching

我有一个这样的字符串：`1/80% of all goods sold for $44 million dollars or more/90/55` 所以基本上我会有一个带模式的字符串：

> “一些数字”“正斜杠”“一些带有任何标点符号的文本，包括正斜杠”“正斜杠”“一些数字”“正斜杠”“一些数字”

我不能只使用 stringtokenizer 并对正斜杠进行标记，因为我的文本块中可能有正斜杠。我对在 java 中使用模式和匹配器非常陌生。关于我如何做到这一点的任何线索？或者可能有用的教程？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:37:44.103

这个正则表达式应该这样做：

```
^(\d+)\/(.*?)\/(\d+)\/(\d+)$ 
```

演示：[http ://www.rubular.com/r/ZIhe8iE0L0](http://www.rubular.com/r/ZIhe8iE0L0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:37:35.723

也许这可以作为一个正则表达式：

```
^\d+/.*/\d+/\d+$ 
```

根据需要添加捕获组。只要文本不包含换行符，这应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:41:48.827

您正在寻找 #/#<text>/#/#

这是一些应该工作的代码：

```
 String toScan = "Did you know that 1/80 of all goods sold for $44 million or more/90/55? It's cool, because 1/5 of all people can type /1/2 like that.";
    String regexp = "[0-9]{1,}/[0-9]{1,}.{1,}?/[0-9]{1,}/[0-9]{1,}";
    Pattern pattern = Pattern.compile(regexp);
    Matcher m = pattern.matcher(toScan);
    while(m.find())
        System.out.println(m.group()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:53:20.413

这是一个简单的测试

```
import java.util.regex.*;

class RTest
{
public static void main(String[] args)
{
    String test1 = "1/80% of all goods sold for $44 million dollars or more/90/55";
    String test2 = "1/80% of all goods sold for $44 /million dollars or more/90/55";

    String patternStr = "(.*?)/(.*)/(.*?)/(.*?)$";
    Pattern pattern = Pattern.compile(patternStr);

    System.out.println("Test1...");
    // Test 1
    Matcher matcher = pattern.matcher(test1);
    boolean matchFound = matcher.find();

    if (matchFound)
    {
        for (int i = 0; i<=matcher.groupCount(); i++)
        {
            System.out.println(matcher.group(i));
        }
    }

    System.out.println("Test2...");
    // Test 2
    matcher = pattern.matcher(test2);
    matchFound = matcher.find();

    if (matchFound)
    {
        for (int i = 0; i<=matcher.groupCount(); i++)
        {
            System.out.println(matcher.group(i));
        }
    }       
} 
```

}

# jquery - 在 DOM 准备好之前将事件侦听器附加到 $(document) 是否安全？

> ID：11634274
> 
> 赞同：2
> 
> 时间：2012-07-24T15:31:36.350
> 
> 标签：jquery, dom

下面的代码安全吗？会`document`可用吗？

```
<html>
  <head>
    <script type="text/javascript">
      $(document).delegate(".my-class", "click", function() { /* do something here */ } );
    </script>
  </head>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:34:39.830

是的，它是完全安全的。`document`永远存在。

# regex - Hadoop Pig 正则表达式

> ID：11634276
> 
> 赞同：0
> 
> 时间：2012-07-24T15:31:38.147
> 
> 标签：regex, hadoop, split, apache-pig, items

我的问题与 Hadoop 的 Pig 正则表达式函数有关。特别是，我想探索这些函数是否可以用于解析简单的日志行。我知道我可以使用 Streams 或 Java 函数获得所需的输出，因此请仅使用 Pig Latin 回答。

为了证明我的担忧，我使用了一个名为 Log file log.txt 的文件。它仅包含一行文本，并使用以下命令上传。

```
data = LOAD 'farzan/log.txt' USING TextLoader() AS (line:chararray); 
```

它包含的行是转储数据；

```
(Jul 17 10:59:59 domain.domain2.company.com <2012-07-17 10:59:59.605 UTC>:[133338908]:<MDS-CS_MDS2>:<DEBUG>:<LAYER = ABC, DEVICEPIN = 25e54h40, GMETAG = 1358096454, TAG = 80, METHOD = writeDisplayImageUpdate, RESULT = 0, SIZE = 30416, DETAIL = OUTGOING>) 
```

SPLIT ITEMS SEPARATION ISSUE 现在让我们使用正则表达式拆分数据

```
data_split = FOREACH data GENERATE STRSPLIT(line, ' <|[\\]>]:[\\[<]'); 
```

转储数据拆分；

```
((Jul 17 10:59:59 domain.domain2.company.com,2012-07-17 10:59:59.605 UTC,133338908,MDS-CS_MDS2,DEBUG,LAYER = ABC, DEVICEPIN = 25e54h40, GMETAG = 1358096454, TAG = 80, METHOD = writeDisplayImageUpdate, RESULT = 0, SIZE = 30416, DETAIL = OUTGOING>)) 
```

结果是正确的，但是如何分离每个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:07:31.327

使用扁平化：

```
data_split = FOREACH data GENERATE FLATTEN(STRSPLIT(line, ' <|[\\]>]:[\\[<]')); 
```

# sql - 在 SQL 中声明 PilotID AS INT = 1，但我需要它是 1，然后是 2，然后是 3（循环）

> ID：11634278
> 
> 赞同：1
> 
> 时间：2012-07-24T15:31:42.443
> 
> 标签：sql, database, sql-server-2008

我有一个可怕的问题，如果你能完全理解，我会给你一些严肃的道具：

```
DECLARE @flightDateOrNow DATE = GETDATE()
DECLARE @pilotID INT = 1

SELECT P7.pilotID 
FROM Pilot P7
WHERE location = 'DPG';

SELECT P1.pilotID, BasicInfo.lName, BasicInfo.fName, 
        PilotExamTemp.examType, PilotExamTemp.examDate,

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = @pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'TNG')
                AND NOT EXISTS (SELECT 1 
                                 FROM PilotGFRCertification 
                                 WHERE pilotID = @pilotID 
                                    AND certificationPosition = 'AVO'
                                    AND certification = 'AVO')
                THEN 'X'
            ELSE ''
         END) TNG,

         (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = @pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'AVO')
                THEN 'X'
            ELSE ''
         END) AVO,

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = @pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'MC')
                THEN 'X'
            ELSE ''
         END) MC,

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = @pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'IO')
                THEN 'X'
            ELSE ''
         END) [IO],

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = @pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'SO')
                THEN 'X'
            ELSE ''
         END) SO,

         ISNULL((SELECT SUM(P3.flightHours) MCTotal
          FROM PilotLog P3
          WHERE P3.pilotID = P1.pilotID
            AND (flightDate <= P1.flightDate)
            AND topLevelPosition = 'AVO'
            AND dutyStation = 'MC'
         ), 0) MCTotal,

         ISNULL((SELECT SUM(P3.flightHours) AVOTotal
          FROM PilotLog P3
          WHERE P3.pilotID = P1.pilotID
            AND (flightDate <= P1.flightDate)
            AND topLevelPosition = 'AVO'
            AND dutyStation <> 'MC'
         ), 0) AVOTotal,

         (SELECT DATEADD(day, 60, (SELECT TOP 1 flightDate 
                                    FROM PilotLog P3
                                    WHERE P3.flightDate < P1.flightDate
                                        AND P3.topLevelPosition = 'AVO'
                                        AND P3.dutyStation = 'MC'
                                    ORDER BY P3.flightDate DESC))

         ) currency60Day,
         (  
            SELECT COUNT(*) 
            FROM PilotLog P4 
            WHERE P4.pilotID = @pilotID  
                AND topLevelPosition = 'AVO'
                AND sortieGained = 'True'
                AND (P4.flightDate BETWEEN (CASE     
                                           WHEN P1.flightDate > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   )), DATEADD(m,7,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   )))    
                                                THEN (DATEADD(yyyy, 1, (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))) ))    
                                           WHEN P1.flightDate > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))       
                                                THEN (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))-1),DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))        
                                           ELSE (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))    
                                        End) 
                                        AND 
                                        (P1.flightDate))) semiSorties,
        (  
            SELECT SUM(P4.flightHours)
            FROM PilotLog P4 
            WHERE P4.pilotID = @pilotID  
                AND topLevelPosition = 'AVO'
                AND sortieGained = 'True'
                AND (P4.flightDate BETWEEN (CASE     
                                           WHEN P1.flightDate > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   )), DATEADD(m,7,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   )))    
                                                THEN (DATEADD(yyyy, 1, (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))) ))    
                                           WHEN P1.flightDate > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))       
                                                THEN (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))-1),DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))        
                                           ELSE (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), P1.flightDate) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))    
                                        End) 
                                        AND 
                                        (P1.flightDate))) semiSortieHours,

        (CASE     
           WHEN @flightDateOrNow > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   )), DATEADD(m,7,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   )))    
                THEN (DATEADD(yyyy, 1, (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))   ))    
           WHEN @flightDateOrNow > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))        
                THEN (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,13,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))      
           ELSE (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))))))      
        End) semiEnd,

        (CASE   
            WHEN @flightDateOrNow > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))) )), DATEADD(m,13,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))) ))) THEN (DATEADD(yyyy, 1, (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))) )), DATEADD(m,13,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))) )))))  
            ELSE (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))) )), DATEADD(m,13,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = @pilotID))) )))  
        END) annualEnd,

        PMTemp.expirationDate, PMTemp.classFAAMedical

FROM PilotLog P1, Pilot BasicInfo,
        (SELECT DATEADD(dd, -DAY(DATEADD(m,1, medicalDate)), DATEADD(m,13,medicalDate)) expirationDate, classFAAMedical  
         FROM PilotMedical  
         WHERE (pilotID = @pilotID)  
            AND medicalDate = (SELECT MAX(medicalDate) FROM PilotMedical WHERE pilotID = @pilotID)) AS PMTemp,
        (SELECT *
         FROM PilotExam
         WHERE (pilotID = @pilotID)
            AND examPosition = 'AVO'
            AND examDate = (SELECT MAX(examDate) FROM PilotExam WHERE pilotID = @pilotID AND examPosition = 'AVO')) AS PilotExamTemp

WHERE P1.pilotID = @pilotID 
    AND P1.topLevelPosition = 'AVO'
    AND P1.pilotID = BasicInfo.pilotID
    AND P1.flightDate = (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = @pilotID)
    ORDER BY flightDate DESC 
```

这导致：

```
pilotID
1
2
3
4
5

pilotID lName   fName   examType    examDate    TNG AVO MC  IO  SO  MCTotal AVOTotal    currency60Day   semiSorties semiSortieHours    semiEnd  annualEnd   expirationDate  classFAAMedical
1       Wilkins Landon  Written     2012-10-11      X   X   X       16.3    7.0          2012-08-14       2         16.7             2012-10-31 2012-10-31  2013-04-30         Third 
```

但我想要的是每个 PilotID 的真正长线。是否有捷径可寻？还是我必须完全重组我的 SQL？（顺便说一句，该 SQL 中真正令人毛骨悚然的部分是我计算出飞行员的半年开始和结束时间，因为它是基于他们的出生月份。真的很烦人）

编辑＃1：

我主要使用以下内容：

```
DECLARE @flightDateOrNow DATE = GETDATE()

SELECT P7.pilotID 
FROM Pilot P7
WHERE location = 'DPG';

SELECT DISTINCT BasicInfo.pilotID, BasicInfo.lName, BasicInfo.fName,

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = P1.pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'TNG')
                AND NOT EXISTS (SELECT 1 
                                 FROM PilotGFRCertification 
                                 WHERE pilotID = P1.pilotID 
                                    AND certificationPosition = 'AVO'
                                    AND certification = 'AVO')
                THEN 'X'
            ELSE ''
         END) TNG,

         (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = P1.pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'AVO')
                THEN 'X'
            ELSE ''
         END) AVO,

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = P1.pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'MC')
                THEN 'X'
            ELSE ''
         END) MC,

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = P1.pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'IO')
                THEN 'X'
            ELSE ''
         END) [IO],

        (CASE
            WHEN EXISTS (SELECT 1 
                         FROM PilotGFRCertification 
                         WHERE pilotID = P1.pilotID 
                            AND certificationPosition = 'AVO'
                            AND certification = 'SO')
                THEN 'X'
            ELSE ''
         END) SO,

         ISNULL((SELECT SUM(P3.flightHours) MCTotal
          FROM PilotLog P3
          WHERE P3.pilotID = P1.pilotID
            AND (flightDate <= (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID))
            AND topLevelPosition = 'AVO'
            AND dutyStation = 'MC'
         ), 0) MCTotal,

         ISNULL((SELECT SUM(P3.flightHours) AVOTotal
          FROM PilotLog P3
          WHERE P3.pilotID = P1.pilotID
            AND (flightDate <= (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID))
            AND topLevelPosition = 'AVO'
            AND dutyStation <> 'MC'
         ), 0) AVOTotal,

         (SELECT DATEADD(day, 60, (SELECT TOP 1 flightDate 
                                    FROM PilotLog P3
                                    WHERE P3.flightDate < (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)
                                        AND P3.topLevelPosition = 'AVO'
                                        AND P3.dutyStation = 'MC'
                                    ORDER BY P3.flightDate DESC))

         ) currency60Day,
         (  
            SELECT COUNT(*) 
            FROM PilotLog P4 
            WHERE P4.pilotID = P1.pilotID  
                AND topLevelPosition = 'AVO'
                AND sortieGained = 'True'
                AND (P4.flightDate BETWEEN (CASE     
                                           WHEN (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID) > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   )), DATEADD(m,7,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   )))    
                                                THEN (DATEADD(yyyy, 1, (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))) ))    
                                           WHEN (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID) > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))       
                                                THEN (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))-1),DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))        
                                           ELSE (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))    
                                        End) 
                                        AND 
                                        ((SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)))) semiSorties,
        (  
            SELECT SUM(P4.flightHours)
            FROM PilotLog P4 
            WHERE P4.pilotID = P1.pilotID  
                AND topLevelPosition = 'AVO'
                AND sortieGained = 'True'
                AND (P4.flightDate BETWEEN (CASE     
                                           WHEN (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID) > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   )), DATEADD(m,7,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   )))    
                                                THEN (DATEADD(yyyy, 1, (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))) ))    
                                           WHEN (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID) > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))       
                                                THEN (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))-1),DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))        
                                           ELSE (DATEADD(dd,-(DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID)))))-1),DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), (SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))    
                                        End) 
                                        AND 
                                        ((SELECT MAX(P5.flightDate) FROM PilotLog P5 WHERE pilotID = P1.pilotID)))) semiSortieHours,

        (CASE     
           WHEN @flightDateOrNow > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   )), DATEADD(m,7,(DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   )))    
                THEN (DATEADD(yyyy, 1, (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))   ))    
           WHEN @flightDateOrNow > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))        
                THEN (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,13,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))      
           ELSE (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))), DATEADD(m,7,(DATEADD(yyyy, DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))))))      
        End) semiEnd,

        (CASE   
            WHEN @flightDateOrNow > (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))) )), DATEADD(m,13,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))) ))) THEN (DATEADD(yyyy, 1, (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))) )), DATEADD(m,13,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))) )))))  
            ELSE (DATEADD(dd, -DAY(DATEADD(m,1,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))) )), DATEADD(m,13,(DATEADD(yyyy, (DATEDIFF(yy, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID), @flightDateOrNow)) - 1, (SELECT birthDate FROM Pilot WHERE pilotID = P1.pilotID))) )))  
        END) annualEnd

FROM PilotLog P1
FULL JOIN Pilot BasicInfo
    ON P1.pilotID = BasicInfo.pilotID

WHERE 
    BasicInfo.location = 'DPG' 
```

现在对于模式（在上传它们的过程中，到目前为止这里有几个表）

飞行员 ![试点表](../Images/4fcd5007fecf2b851eb288df30742398.png)

试点日志 ![在此处输入图像描述](../Images/0127d74e2095c28f26eafb4276c8424d.png)

试点考试 ![在此处输入图像描述](../Images/6c9d90111da02abe0ca09188b88bf05b.png)

PilotGFR认证 ![在此处输入图像描述](../Images/0ed7e2179387b71d39a301f20d20d92e.png)

Pilot医疗 ![在此处输入图像描述](../Images/9b4b7300f4e0db283fd1c3ef5c212dd7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:48:17.087

你可以这样做：

*   定义一个表变量来保存您要处理的飞行员 ID

    ```
    DECLARE @PilotIDs TABLE (PilotID INT)

    INSERT INTO @PilotIDs 
       SELECT P7.pilotID 
       FROM Pilot P7
       WHERE location = 'DPG'; 
    ```

*   在开始时（在要选择的列列表中），您有几次这种情况：

    ```
    WHERE pilotID = @pilotID 
    ```

    将其替换为：

    ```
    WHERE pilotID = P1.PilotID 
    ```

*   不理会其余的查询-最后您有一些条件，例如

    ```
    WHERE P1.pilotID = @pilotID 
    ```

    将它们更改为：

    ```
    WHERE P1.pilotID IN (SELECT PilotID FROM @PilotIDs) 
    ```

这*应该*基本上照顾它 - 我希望！这是一个非常巨大的丑陋查询怪物......我希望它不会破坏 QueryZilla 中间的任何地方......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:48:38.663

乍一看，我相信`SELECT`通过以下两个更改更改您的最后一条语句应该会得到您正在寻找的结果：

1.  将所有实例替换`@pilotID`为`P1.PilotID`
2.  删除`WHERE`子句`P1.pilotID = @pilotID`

不过，我很想看看整体架构，因为这看起来可以写成更短的查询，而是利用一些查找表和 JOIN。

# spring - 如何在没有 web.xml 的情况下以编程方式设置会话超时、错误页面

> ID：11634281
> 
> 赞同：11
> 
> 时间：2012-07-24T15:31:43.943
> 
> 标签：spring, spring-mvc

我正在使用 Spring MVC 并成功设置了 WebApplicationInitializer（使用 Tomcat 的 ServletContainerInitializer），没有任何 web.xml 文件。添加过滤器（如 Spring Security）和 servlet（如 Dispatcher）没有问题，而且它们工作正常。如果需要，我也可以设置 init-params。

我想不通的是如何设置一些通常存在于 web.xml 中的特殊标签。例如，我想设置一个自定义的 403 错误页面。通常我会在 web.xml 中这样做：

```
<error-page>
    <error-code>403</error-code>
    <location>/accessDenied.html</location>
</error-page> 
```

但我不知道如何在 WebApplicationInitializer （它可以访问 ServletContext）中做到这一点。

我对会话超时和欢迎文件有同样的问题。我已经搜索了大约两天，但仍未看到以编程方式完成此操作。同样，目标是完全删除 web.xml 文件并改用初始化程序类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T17:21:14.007

看起来这不可能通过 WebApplicationInitializer 实现，您必须坚持使用 web.xml 来专门针对此配置以及与此问题一起列出的其他一些配置 - [Using Spring MVC 3.1+ WebApplicationInitializer to programmatically configure session-config and error-page](https://stackoverflow.com/questions/10813993/using-spring-mvc-3-1-webapplicationinitializer-to-programatically-configure-ses)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T11:47:44.023

```
StandardEngine standardEngine = (StandardEngine)MBeanServerFactory.findMBeanServer(null).get(0).getAttribute(new ObjectName("Catalina", "type", "Engine"), "managedResource");

// This is totally irresponsible and will only work if this webapp is running on the default host
StandardContext standardContext = (StandardContext)standardEngine.findChild(standardEngine.getDefaultHost()).findChild(servletContext.getContextPath());

ErrorPage errorPage404 = new ErrorPage();
errorPage404.setErrorCode(404);
errorPage404.setLocation("/404");
standardContext.addErrorPage(errorPage404); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-25T20:10:52.923

你可以像这样使用一些想法：

```
@WebFilter(filterName = "ErrorPageFilter", urlPatterns = "/*")
public class ErrorPageFilter extends BaseHttpFilter {

private GlobalErrorHandler globalErrorHandler;

@Override
public void init(FilterConfig filterConfig) throws ServletException {
    globalErrorHandler = BeansUtil.getBean(filterConfig.getServletContext(), GlobalErrorHandler.class);
}

@Override
protected void doHttpFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {
    chain.doFilter(request, new ErrorPageHttpServletResponseWrapper(request, response));
}

private class ErrorPageHttpServletResponseWrapper extends HttpServletResponseWrapper {
    HttpServletRequest request;

    public ErrorPageHttpServletResponseWrapper(HttpServletRequest request, HttpServletResponse response) {
        super(response);
        this.request = request;
    }

    @Override
    public void sendError(int sc) throws IOException {
        globalErrorHandler.handleError(sc, request, this);
    }

    @Override
    public void sendError(int sc, String msg) throws IOException {
        sendError(sc);
    }
}
}

public interface GlobalErrorHandler {

void handleError(int responseCode, HttpServletRequest request, HttpServletResponse httpServletRequest) throws IOException;

void addHandler(int responseCode, String handlerDescription);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T08:12:21.550

对于页面错误，请参阅此答案：[如何制作过滤器以检测用户是否请求了未找到的页面？](https://stackoverflow.com/questions/4324176/how-to-make-a-filter-to-detect-if-the-user-requested-a-page-that-is-not-found)

> 1.  制作过滤器
> 2.  使用 HttpServletResponseWrapper 并覆盖 sendError() 和 setStatus()
> 3.  通过 chain.doFilter(req, wrapper) 传递包装的响应
> 4.  如果您在包装器中收到 sendError()，请查看它是否为 404。
> 5.  采取适当的应对措施。

# c - 在多个分叉进程之间共享错误

> ID：11634282
> 
> 赞同：1
> 
> 时间：2012-07-24T15:31:46.100
> 
> 标签：c, linux, concurrency, posix, fork

在多个分叉进程之间共享 POSIX / Linux 中的标准错误是否有任何缓冲区限制或特定准则？

```
perror("Some descriptor related error: "); 
```

我有一个服务器应用程序，它在需要时调用 perror。作为一个单一的过程，它工作正常。对于使用fork创建的多个进程，服务器运行一段时间后（发生多次打印错误），它开始连续打印错误语句并进入无限循环。

我通过注释掉服务器正常运行的打印语句来验证。

所以在我看来，标准错误可能会出现一些缓冲区溢出的情况，这种情况会在一段时间后耗尽。

我没有使用任何互斥锁或信号量来对抗 perror。

服务器代码很大，它使用 epoll 处理多个客户端描述符，其中包含一个工作进程池，这些进程池在客户端到来时获取它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:41:15.723

您确实需要记住，虽然 I/O 可能是线程安全的，具体取决于平台，但输出到`stderr`并且`stdout`不是*多进程安全的*……因此，如果您有多个进程写入终端输出，它们将结束如果没有进程间同步机制使每次写入原子性，则彼此重写。当我说“原子”时，我指的是你想写出每个进程的每条消息的整个长度......你最终可能会得到来自不同进程的每条消息的碎片作为每个人都访问终端缓冲区并以原子方式写入多个字节，但不是每个消息中的全部字节数，然后才不得不屈服于竞争终端缓冲区资源的下一个进程。

现在，您的无限循环可能是由单个进程引起的……如果您注释掉所有错误语句，您怎么知道服务器“完美”地工作？例如，如果只有一个分叉的进程死锁，那么其余进程可能都很好，并且服务器看起来“正常”运行，而实际上您只是掩盖了错误，而不是消除了它。

# c# - 如何使用 ADO.NET 返回 IEnumerable<>？

> ID：11634285
> 
> 赞同：15
> 
> 时间：2012-07-24T15:31:56.937
> 
> 标签：c#, ado.net, dapper

我一直在使用 Dapper，在我当前的项目中，我将不得不使用 ADO.NET。我的问题是如何使用 ADO.NET 返回 IEnumerable？这是我使用 Dapper 的内容。有人可以帮助我将其转换为相同但使用 ADO 吗？

```
public IEnumerable<Favorites> GetFavorites()
{
    using (SqlConnection sqlConnection = new SqlConnection(connString))
    {
        sqlConnection.Open();
        var work = sqlConnection.Query<Favorites>("Select * from favorites");
        return work;
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T15:38:29.437

你可以`yield return`这样使用：

```
public IEnumerable<Favorites> GetFavorites()
{
    using (SqlConnection sqlConnection = new SqlConnection(connString))
    {
        sqlConnection.Open();
        using (SqlCommand cmd = sqlConnection.CreateCommand())
        {
            cmd.CommandText = "Select * from favorites";
            cmd.CommandType = CommandType.Text;
            using (SqlDataReader reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    // Create a Favorites instance
                    var favorites = new Favorites();
                    favorites.Foo = reader["foo"];
                    // ... etc ...
                    yield return favorites;
                }
            }
        }
    }
} 
```

显然，您可以通过创建一个接受`IDataReader`or的收藏夹构造函数来重构它`SqlDataReader`，或者创建一个实用方法来填充值，或其他任何东西，但这是基本结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T14:00:59.500

如果您可以在`using`块内完成所有工作，则可以利用 LINQ`IEnumerable`和`DbDataReader`. 它提供了具有相当少量代码的独立纯 ADO.NET。

```
var command = connection.CreateCommand();
command.CommandText = "select * from favorites";
using (var reader = command.ExecuteReader()) {
    var work = from IDataRecord r in select ...;
    ... use work ...
} 
```

# java - 对于没有名称的弹出窗口，带有弹出名称 =“窗口”的 waitForPopUp 方法的奇怪行为？

> ID：11634295
> 
> 赞同：0
> 
> 时间：2012-07-24T15:32:22.490
> 
> 标签：java, testing, selenium, methods, popup

我不知道这是否是“正常”行为，但到目前为止我没有看到任何解释。我正在测试一个没有名称的 javascript 弹出窗口，为了能够测试该弹出窗口上的元素，我必须等到弹出窗口完全加载。我没有用来检查 div 元素是否存在，因为它在[这里，](https://stackoverflow.com/questions/9990793/selenium-waitforpopup)但尝试了其他东西。

这是我尝试过的，最奇怪的是它有效。

```
 browser.waitForPopUp("window", "3000"); 
```

它适用于我所有的弹出窗口（它们都没有名字）。我尝试了其他字符串，例如“default”、“null”，甚至是 null String，但它们都不起作用（我在某处读过，我忘了在哪里，如果找到链接，我会更新，所以如果我设置第一个，我会读到参数为“null”，然后它将使测试等到加载弹出窗口，当我尝试时坚果，我只遇到超时问题）。

任何人都知道发生了什么以及为什么会起作用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:09:36.953

waitForPopUp 方法的文档可以在这里查看 - [http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#waitForPopUp%28java.lang.String,% 20java.lang.String%29](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#waitForPopUp%28java.lang.String,%20java.lang.String%29)

关于第一个参数，它表示“windowID - 将出现的窗口的 JavaScript 窗口“名称”（不是标题栏的文本）如果未指定，或指定为“null”，此命令将等待第一个非要出现的顶部窗口（如果您同时使用多个弹出窗口，请不要依赖此窗口）。”

我猜当您说您的弹出窗口没有名称时，您实际上指的是标题。弹出窗口的实际名称可能实际上是“窗口”。

在 w3schools 示例[http://www.w3schools.com/jsref/prop_win_name.asp](http://www.w3schools.com/jsref/prop_win_name.asp)上，您可以看到弹出窗口的名称与标题栏中的名称不同。事实上，这个名字并没有出现在任何地方。

# javascript - 使用 jquery，如何获取表中选定行中 @Html.Hidden 字段的值？

> ID：11634297
> 
> 赞同：1
> 
> 时间：2012-07-24T15:32:24.057
> 
> 标签：javascript, jquery, razor

给定下表，我知道如何获取 first 的值，但是如何使用 jquery 获取 @Html.Hidden("AccountId") 的值？假设已经选择了某行，ala：

```
<script type="text/javascript>
        $("#tblTaskList").delegate("tr", "click", function () {
            $(this).addClass("selected").siblings().removeClass("selected");            
            var tids = $(this).find('td').first();
        });
</script> 
```

这是表格：

```
<table id="tblTaskList"> 
    <thead>
        <tr>
            <th>Ticket ID</th>                
        </tr>
    </thead>
    <tbody id="tblBody" class="tblBody">        
        @{for (var ix = 0; ix < Model.Value.Count - 1; ix++)
          { 
            <tr id="@(Model.Value[ix].TicketId)">
                <td style="width: 5%">@Model.Value[ix].TicketId</td>
                @Html.Hidden("AccountId");
            </tr>        
          }}
    </tbody>  
<table> 
```

非常感谢你的帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:38:37.517

显然你不希望隐藏的值是 alert()'d，但当时不知道你想用它做什么。这将为您提供 val() 中隐藏字段的值。希望这可以帮助！

```
<script type="text/javascript>
    $("#tblTaskList").on("click", "tr", function () {
        $(this).addClass("selected").siblings().removeClass("selected");            
        var tids = $(this).find('td').first();
        alert($(this).find('input:hidden').val());
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:34:36.193

该`@Html.Hidden`方法呈现`input`类型的元素`hidden`- 您可以使用[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)：

```
var hidden = $(this).find('input[type=hidden]').first(); 
```

例如：

```
$("#tblTaskList").delegate("tr", "click", function () {
    var self = $(this);
    self.addClass("selected").siblings().removeClass("selected");            
    var tids = self.find('td').first();
    var hidden = self.find('input[type=hidden]').first();
    ...
}); 
```

# sharepoint - 将自定义声明提供商的电子邮件声明映射到配置文件中的共享点用户电子邮件

> ID：11634308
> 
> 赞同：3
> 
> 时间：2012-07-24T15:32:54.393
> 
> 标签：sharepoint, sharepoint-2010, wif, claims-based-identity

我使用自定义声明提供程序作为唯一身份验证方法的 Sharepoint 2010。我的自定义声明提供商有一个电子邮件声明：http: [//schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress)

我在配置提供程序时在shareponit控制台（stsadmin）上设置了这个参数：

*$map3 = New-SPClaimTypeMapping -IncomingClaimType "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress" -IncomingClaimTypeDisplayName "EmailAddress" -SameAsIncoming*

我希望看到此声明映射到 Sharepoint 用户配置文件。这意味着当我访问用户配置文件时（例如单击登录用户上的“我的设置”），我想查看电子邮件参数。（我希望将声明视为 SPContext.Current.Web.CurrentUser.Email）

此时，那些参数没有被映射。

任何提示/帮助？我真的在尝试很多东西，但我无法让它工作！..

谢谢！..

即插即用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:33:50.927

您显示的代码只会将映射分配给变量 ( `$map3`)。您还需要将该映射添加到受信任的颁发者：

```
$sp = Get-SPTrustedIdentityProvider –Name "YourSTS"

Add-SPClaimTypeMapping -Identity $map3 -TrustedIdentityTokenIssuer $sp 
```

以下是更多信息和示例：

*   [http://sharepintblog.com/2011/10/26/adding-additional-claims-to-a-trusted-identity-token-issuer/](http://sharepintblog.com/2011/10/26/adding-additional-claims-to-a-trusted-identity-token-issuer/)
*   [http://technet.microsoft.com/en-us/library/ff607816.aspx](http://technet.microsoft.com/en-us/library/ff607816.aspx)

**编辑**：然后映射声明，您需要转到管理中心 -> 应用程序管理 -> 用户配置文件服务应用程序 -> 管理用户属性 -> 编辑所需的用户属性。

最后，编辑映射，如下所示：

![在此处输入图像描述](../Images/7eaf5cbd98a625f8842c63d6ab2753d0.png)

这里有更多信息： [http ://technet.microsoft.com/en-us/library/cc262327.aspx](http://technet.microsoft.com/en-us/library/cc262327.aspx)

# javascript - javascript中的RSA与PHP不同

> ID：11634310
> 
> 赞同：0
> 
> 时间：2012-07-24T15:33:16.487
> 
> 标签：javascript, php, rsa, phpseclib, jsbn

我现在遇到了 RSA 的问题。我在 Javascript 和 PHP 中具有相同的模数和指数。在 javascript 中都使用 PKCS#1，我使用[http://www-cs-students.stanford.edu/~tjw/jsbn/rsa.js](http://www-cs-students.stanford.edu/~tjw/jsbn/rsa.js)

```
var rsa = new RSAKey();
rsa.setPublic("modulus","ex");
var result = rsa.encrypt(text); 
```

在 PHP 中，我使用[http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/)

```
require_once 'Crypt/RSA.php';
$rsa = new Crypt_RSA();
$n="modulus";
$e="ex";
$rsa->modulus= new Math_BigInteger($n,16);
$rsa->publicExponent= new Math_BigInteger($e,16);
$key=$rsa->getPublicKey();
$rsa->loadKey($key);
$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
$ciphertext = $rsa->encrypt("1234");
echo bin2hex($ciphertext); 
```

但是2个结果不同。有谁能告诉我原因。非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:23:32.813

它们是不同的，因为 PKCS#1 使用随机填充。

查看以下网址：

[http://www-cs-students.stanford.edu/~tjw/jsbn/rsa.html](http://www-cs-students.stanford.edu/~tjw/jsbn/rsa.html)

多次点击加密。生成的密文每次都会不同。

重要的是您能够解密它 - 而不是密文不同。

# php - 重复字符的正则表达式是什么？

> ID：11634313
> 
> 赞同：1
> 
> 时间：2012-07-24T15:33:18.767
> 
> 标签：php, regex

我正在用 PHP 编写密码强度检查器，并且正在使用正则表达式来计算强度计算的各种参数。我需要能够检查字符串中重复连续字符的数量。例如：

`baaabaaablacksheep`会回来`5`

`sillystring`会回来`1`

```
and so on... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:41:34.977

您可以使用 regex with`\1+`来查找重复字符，然后使用`strlen()`来计算它们。尝试类似：

```
$str = 'baaabaaablacksheep';    
$repeating = array();
preg_match_all('/(\w)(\1+)/', $str, $repeating);

if (count($repeating[0]) > 0) {
    // there are repeating characters
    foreach ($repeating[0] as $repeat) {
        echo $repeat . ' = ' . strlen($repeat) . "\n";
    }
} 
```

输出：

```
aaa = 3
aaa = 3
ee = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:34:13.170

[newfurniturey](https://stackoverflow.com/a/11634469/170194)发布的解决方案的另一个变体：

```
$passarr = Array('baaabaaablacksheep', 'okstring', 'sillystring');

foreach($passarr as $p) {
   $repeats = 0;
   preg_match_all('/(.)(\1+)/', $p, $matches, PREG_SET_ORDER);
   foreach($matches as $m) $repeats += strlen($m[2]);
   printf("%s => %d repeats\n", $p, $repeats);
} 
```

印刷：

```
baaabaaablacksheep => 5 repeats
okstring => 0 repeats
sillystring => 1 repeats 
```

# java - 从 SensorSimulator 获取数据

> ID：11634314
> 
> 赞同：1
> 
> 时间：2012-07-24T15:33:18.793
> 
> 标签：java, android, acceleration

我试图构建一个小应用程序来读取 SensorSimulator 中的数据

[http://code.google.com/p/openintents/wiki/SensorSimulator](http://code.google.com/p/openintents/wiki/SensorSimulator)

我安装了 SensorSimulatorSettings-App 并按照网站上的说明进行操作。当我启动我的 AVD 和应用程序时，我可以连接到独立程序并查看值。

然后我开始了我自己的程序，你可以在这里查找源代码：http: [//nopaste.info/093cfd38af.html](http://nopaste.info/093cfd38af.html)

我以为我遵循了 SensorSimulator 上给出的说明，但是当我在模拟器上启动我的应用程序时，我只看到一张没有任何值的白纸，而且我的目录显示：

“启动超时已过期放弃唤醒锁！” 当我重新启动 AVD 时，我无法再运行 SensorSimulatorSettings-App，它现在也崩溃了。

我真的看不出我做错了什么，真的需要你的帮助，即使这是一个愚蠢的问题。

我真的谢谢你的建议。

问候

# makefile - cygwin上的makefile缺少分隔符

> ID：11634318
> 
> 赞同：2
> 
> 时间：2012-07-24T15:33:27.583
> 
> 标签：makefile, cygwin, separator

我不知道为什么我会收到错误

```
library.mak:95: *** missing separator.  Stop. 
```

当我在cygwin上使用make时。该特定位置的代码是

```
$(eval $(RULES))

$(EXAMPLES) $(TESTPROGS) $(TOOLS): $(THIS_LIB) $(DEP_LIBS)
$(TESTPROGS): $(SUBDIR)$(LIBNAME)

examples: $(EXAMPLES) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:45:05.913

你可以尝试：

git config --global core.autocrlf false

并再次签出存储库？

我想知道 \r\n 是否在这里没有错...

# ssis - SSIS 平面文件通配符文件名

> ID：11634322
> 
> 赞同：2
> 
> 时间：2012-07-24T15:33:35.397
> 
> 标签：ssis

我想加载一个放在特定目录中的 .csv 文件，但文件名以 YYYYMMDD 为后缀，例如。我的文件_YYYYMMDD.csv。

该目录每天都会被清除并删除一个新文件，即。目录中只有 1 个文件。

是否有（简单？）编码通配符文件名的方法，例如。MyFile_*.csv，可以由连接管理器使用，而无需使用 Foreach 循环容器或脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:55:18.020

是的，`Foreach Loop Container`您可以使用`Foreach File Enumerator`来循环某个目录。在该`Files`枚举器的属性中，您可以使用通配符，例如 MyFile_*.csv。

将变量映射到完全限定的文件名，并使用表达式将该变量推送到连接管理器。

# gwt - 使用客户端上的复选框切换小部件的可见性？

> ID：11634326
> 
> 赞同：1
> 
> 时间：2012-07-24T15:33:51.810
> 
> 标签：gwt, google-apps-script

我正在尝试使用复选框来切换某些小部件的可见性。但是，我真的很难让客户端处理程序正确切换它们。

这是我最好的尝试

编辑：完全可重现的例子

```
function doGet() {
  var app = UiApp.createApplication();

  var checkbox = app.createCheckBox("Toggle Visiblity").setName("togglebox").setId("togglebox");
  app.add(checkbox);
  var listBox = app.createListBox(true)
    .addItem("Item #1")
    .addItem("Item #2")
    .addItem("Item #3")
    .setVisible(false);
  app.add(listBox);

   checkbox.addValueChangeHandler(app.createClientHandler()
                                        .validateMatches(checkbox, "on")
                                        .forTargets(listBox)
                                        .setVisible(true));
  checkbox.addValueChangeHandler(app.createClientHandler()
                                        .validateMatches(checkbox, "off")
                                        .forTargets(listBox)
                                        .setVisible(false));

  return app;
} 
```

理论上它应该可以工作，但是当我切换复选框时没有任何反应。我已经尝试了几个不同的值，有和没有“i”标志，但都没有奏效。

*在不*使用服务器端处理程序的情况下，是否有人对如何执行此操作有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:38:06.320

这正在使用 Henrique[在以前的帖子中建议的“隐形技巧”](https://stackoverflow.com/questions/11466249/how-do-i-select-all-the-checkboxes-in-google-spreadsheet-with-javascript/11567639#11567639)

```
function doGet() {
  var app = UiApp.createApplication();

  var checkbox = app.createCheckBox("Toggle Visiblity").setName("togglebox").setId("togglebox").setValue(true);
  var checkbox2 = app.createCheckBox("Toggle Visiblity").setVisible(false);
  var hpanel = app.createHorizontalPanel();
  hpanel.add(checkbox).add(checkbox2);
  app.add(hpanel);
  var listBox = app.createListBox(true)
    .addItem("Item #1")
    .addItem("Item #2")
    .addItem("Item #3")
    .setVisible(false);
  app.add(listBox);

 var ChandlerA = app.createClientHandler().forTargets(listBox).setVisible(false)
 .forTargets(checkbox2).setVisible(true).setValue(false)
 .forEventSource().setVisible(false);
  checkbox.addClickHandler(ChandlerA)
 var ChandlerB = app.createClientHandler().forTargets(listBox).setVisible(true)
 .forTargets(checkbox).setVisible(true).setValue(true)
 .forEventSource().setVisible(false);
  checkbox2.addClickHandler(ChandlerB)

  listBox.setVisible(true);
return app
  } 
```

编辑：请注意，我认为最后一条语句`listBox.setVisible(true)`不合逻辑，但如果我省略它，则列表框在单击之前不可见......我真的不明白......有人知道吗？

EDIT2：哎呀，我是多么愚蠢，我没有注意到`setVisible(false)`你在创建列表框时添加的内容；-P 哼哼……我真的很愚蠢……我猜你想开始“隐形”？在这种情况下，将对这段代码进行一些小改动......就像这样（我最终决定展示这两个版本......）

```
function doGet() {
  var app = UiApp.createApplication();

  var checkbox = app.createCheckBox("Toggle Visiblity").setName("togglebox").setId("togglebox").setVisible(false);
  var checkbox2 = app.createCheckBox("Toggle Visiblity").setVisible(true).setValue(false);
  var hpanel = app.createHorizontalPanel();
  hpanel.add(checkbox).add(checkbox2);
  app.add(hpanel);
  var listBox = app.createListBox(true)
    .addItem("Item #1")
    .addItem("Item #2")
    .addItem("Item #3")
    .setVisible(false);
  app.add(listBox);

 var ChandlerA = app.createClientHandler().forTargets(listBox).setVisible(false)
 .forTargets(checkbox2).setVisible(true).setValue(false)
 .forEventSource().setVisible(false);
  checkbox.addClickHandler(ChandlerA)
 var ChandlerB = app.createClientHandler().forTargets(listBox).setVisible(true)
 .forTargets(checkbox).setVisible(true).setValue(true)
 .forEventSource().setVisible(false);
  checkbox2.addClickHandler(ChandlerB)

return app
} 
```

# youtube - 三星智能电视播放 Youtube 视频

> ID：11634330
> 
> 赞同：3
> 
> 时间：2012-07-24T15:34:06.460
> 
> 标签：youtube, youtube-api, samsung-smart-tv

我正在制作三星智能电视应用程序。我需要播放 youtube 视频。有谁知道如何做到这一点？我尝试了[youtube js api](https://developers.google.com/youtube/js_api_reference "youtube js api")，但是当函数`playVideo()`正在执行时，视频才开始加载但没有播放。我有三星智能电视 2012 所以 SDK 是 3.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:48:15.820

首先检查您的 youtube 视频是否已授予移动设备访问权限。

其次，您必须禁用该视频上的广告 - 因为带有广告的视频尚无法在电视设备上播放。

有时 playVideo() 后需要一段时间才能开始播放视频，尤其是当您绑定到某些播放器事件时，因此请尝试等待半分钟或一分钟。

如果这没有帮助，请在此处粘贴您的代码 - youtube 嵌入和您的 JS 调用，我会尽力提供帮助。

**编辑**

尝试像在[三星文档](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/flash/create_flash_app/tut_flash_app_task.html#_Embed)中那样使用 Flash 嵌入。

作为电影参数将 src 传递给[YouTube API 播放器](https://developers.google.com/youtube/js_api_reference#GettingStarted)：

```
<object type="application/x-shockwave-flash" id="playerObject">
  <param name="movie" value="http://www.youtube.com/apiplayer?&enablejsapi=1"></param>
  <param name="allowScriptAccess" value="always"></param>
  <param name="allowFullScreen" value="true"></param>
  <param name="wmode" value="transparent"></param>
</object> 
```

并使用以下方法：

```
var ytPlayer = null;
function onYouTubePlayerReady() {
  ytPlayer = document.getElementById('playerObject');
  if (ytPlayer) {
    ytPlayer.addEventListener('onStateChange','onChange');
    ytPlayer.addEventListener('onError', 'onError');
    ytPlayer.cueVideoById('i4iDWXstrWY'); //load video for play http://www.youtube.com/watch?v=i4iDWXstrWY
  } else {
    alert("error");
  }
}
function onChange(newState) {
  //Possible values are unstarted (-1), ended (0), playing (1), paused (2), buffering (3), video cued (5)
  switch (newState) {
    case 5:
      ytPlayer.playVideo();
      break;
  }
function onError(errorCode) {
  alert(errorCode);
} 
```

当播放器准备好时，API 会调用`onYouTubePlayerReady`回调函数。我认为在您的解决方案中您缺少该`cueVideoById`方法。正如[YT API 文档中所说](https://developers.google.com/youtube/js_api_reference#playVideo)

> 播放当前**提示/加载**的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T20:41:52.197

我真的不应该告诉你们这些，因为你们将能够制作与我竞争的应用程序......但出于对三星的挫败感，我会告诉你：只需将该死的东西作为网页托管在网络服务器上（使用您喜欢的任何 YouTube API，或者不使用 API，只在页面加载时更改嵌入代码），使用查询字符串参数控制它播放的视频，然后将其 iFrame 到您的三星智能电视应用程序中。如果您尝试嵌入不是网页的应用程序，YouTube 会有严格的嵌入限制......所以坚持网页，然后将网页粘贴到应用程序中。

这是您用于需要在网络浏览器中运行的三星智能电视上的任何应用内内容的通用架构。三星浏览器有幸成为支持 Flash 的 HTML5 浏览器。三星智能电视应用程序允许对 Web 内容进行 IFrame，完全没有安全限制。将 2 和 2 放在一起，您几乎可以在这些华丽的烤面包机上做任何您想做的事情......请记住，您想要卸载这些 IFrame（使用 JQuery 将它们的 SRC 属性设置为“”是一种适当的方法）当您会更改场景，因为它们不会自行卸载，而且这些电视的 RAM 很少。

玩得开心的家伙:)

# jquery - 使用 validate.js 进行验证，但是提交呢？

> ID：11634340
> 
> 赞同：0
> 
> 时间：2012-07-24T15:34:27.957
> 
> 标签：jquery, forms, validation, submit

我正在使用[validate.js](http://rickharrison.github.com/validate.js/)使用 jQuery 验证我的表单。如果有错误，当用户点击提交按钮时会弹出错误信息。当用户填写表单并且没有验证错误时，表单不提交，而是显示验证成功消息（用户通过验证）但表单不提交（或采取行动）。

下面是创建这些消息的我的 jQuery 的一部分：

```
function(errors, event) {
    var SELECTOR_ERRORS = $('.error_box'),
    SELECTOR_SUCCESS = $('.success_box');

    if (errors.length > 0) {
        SELECTOR_ERRORS.empty();

        for (var i = 0, errorLength = errors.length; i < errorLength; i++) {
            SELECTOR_ERRORS.append(errors[i].message + '<br />');
        }

        SELECTOR_SUCCESS.css({ display: 'none' });
        SELECTOR_ERRORS.fadeIn(200);

        } else {
             SELECTOR_ERRORS.css({ display: 'none' });
             SELECTOR_SUCCESS.fadeIn(200);

        }

       if (event && event.preventDefault) {
           event.preventDefault();
       } else if (event) {
           event.returnValue = false;
       } 
```

如您所见，当没有错误时，`SELECTOR_SUCCESS`淡入。如果没有错误，我想提交表单，不显示任何消息。我可以通过删除一行 ( ) 轻松摆脱消息传递`SELECTOR_SUCCESS.fadeIn(200);`，但我还需要提交表单作为替换。由于最后几行，表单没有提交，默认操作被阻止。这种情况的最佳做法是什么？

# python - 关于在 python ctypes 中调整大小的问题

> ID：11634342
> 
> 赞同：1
> 
> 时间：2012-07-24T15:34:34.943
> 
> 标签：python, ctypes

我找到了一个在 python ctypes 中调整数组大小的答案

```
from ctypes import *

list = (c_int*1)()

def customresize(array, new_size):
    resize(array, sizeof(array._type_)*new_size)
    return (array._type_*new_size).from_address(addressof(array))

list[0] = 123
list = customresize(list, 5)

>>> list[0]
123
>>> list[4]
0 
```

如果我再次调用它：

```
list = customresize(list, 40) 
```

它给出了错误：

```
ValueError: Memory cannot be resized because this object doesn't own it 
```

为什么它只适用于您第一次打电话`customresize()`？我还看到有人发布了另一个答案：

```
def customresize(array, new_size):
    return (array._type_*new_size).from_address(addressof(array)) 
```

`customresize()`无论您调用多少次，这里都有效。

但它提出了另一个问题，我发现我的 python.exe 在你调整到更大的大小时不会使用更多`list`的内存，这意味着内存没有分配给调整大小的`list`. 在没有分配的情况下提供对内存的可访问性是否非常危险？为什么这样`ctypes.resize`设计？真的是一头雾水。。。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:39:17.250

`from_address`很危险，因为它不能确保您已经分配了正在访问的内存，因此它可能导致您的应用程序崩溃或更糟。此外，它不拥有它指向的内存，因此如果原始所有者被删除，则该内存可以用于其他用途。

这里的一种选择是保留对原始数组的引用：

```
def customresize(array, new_size):
    base = getattr(array, 'base', array)
    resize(base, sizeof(array._type_)*new_size)
    new_array = (array._type_*new_size).from_address(addressof(base))
    new_array.base = base 
```

另一种更安全的方法是，您可以从旧数组创建一个新数组：

```
list = (c_int * 5)(*list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:52:10.700

让我自己总结一下这个问题。但请归功于@ecatmur 和其他人 resize() 函数可用于调整现有 ctypes 对象的内存缓冲区的大小。该函数将对象作为第一个参数，并将请求的大小（以字节为单位）作为第二个参数。但是，调整大小的对象仍然无法访问基于其原始大小的内存缓冲区。解决问题。定义了 3 个不同的函数：

```
def customresize1(array, new_size):
    resize(array, sizeof(array._type_)*new_size)
    return (array._type_*new_size).from_address(addressof(array))
def customresize2(array, new_size):
    return (array._type_*new_size).from_address(addressof(array))
def customresize3(array, new_size):
    base = getattr(array, 'base', array)
    resize(base, sizeof(array._type_)*new_size)
    new_array = (array._type_*new_size).from_address(addressof(base))
    new_array.base = base 
```

所有函数都返回一个共享原始所有者内存的对象，该对象不拥有内存并且无法调整大小（例如，在 中给出错误`customresize1`）

`customresize2`确实返回一个调整大小的数组，但请记住 from_address 不会为调整大小分配内存..

`customresize3`保留拥有内存的基础对象的记录，但返回的对象不是内存的所有者

由于 python 动态分配它的内存和垃圾收集，所以，如果你想调整某些东西的大小，只需重做大小就可以了。例如。：

```
list = (c_int * NEW_SIZE)() 
```

或者您可能希望保留原始值：

```
list = (c_int * NEW_SIZE)(*list) 
```

# ruby-on-rails - Ruby on Rails - 带有编辑的登录会话

> ID：11634350
> 
> 赞同：0
> 
> 时间：2012-07-24T15:34:54.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有两个问题，不知道为什么！我遵循了[http://ruby.railstutorial.org/chapters/的教程](http://ruby.railstutorial.org/chapters/)

```
Problem #1: My login and logout don't seem to be working
Problem #2: My private function doesn't see sign_in? -- I believe however is because sign_in? is declared in the sessionHelpers and I declared this function in the customerController which would explain why I can't see but don't know how to make it see. 
```

这是我的代码！模型/customer.rb 控制器/会话

```
class SessionsController < ApplicationController
    def new
    end

    def create
        customer = Customer.find_by_email(params[:session][:email])
        if customer && customer.authenticate(params[:session][:password])
                # Sign the user in and redirect to the user's show page.
            sign_in customer
            redirect_back_or customer
        else
            flash.now[:error] = 'Invalid email/password combination'
            render 'new'
        end

    end

    def destroy
        sign_out
        redirect_to root_path
    end
end 
```

控制器/客户

```
class CustomersController < ApplicationController
    before_filter :signed_in_customer, only: [:edit, :update]
    before_filter :correct_customer,   only: [:edit, :update]

    def new
        @customer = Customer.new
    end

    def create
        @customer = Customer.new(params[:customer])
        if @customer.save
            sign_in @customer
            flash[:success] = "Welcome to Where you Where"
            redirect_to @customer
        else
            render 'new'
        end
    end

    def show
        @customer = Customer.find(params[:id])
    end

    def edit
        @customer = Customer.find(params[:id])
    end

    def update
        @customer = Customer.find(params[:id])
        if @customer.update_attributes(params[:customer])
            flash[:success] = "Profile updated"
            sign_in @customer
            redirect_to @customer
        else
            render 'edit'
        end
    end

    def index
        @customers = Customer.all
    end

    private
        def signed_in_customer
            unless signed_in?
                store_location
                redirect_to signin_path, notice: "Please sign in."
            end
        end

            def correct_customer
                @customer = Customer.find(params[:id])
                redirect_to(root_path) unless current_customer?(@customer)
            end
end 
```

助手/会话

```
module SessionsHelper
    def sign_in(customer)
        cookies.permanent[:remember_token] = customer.remember_token
        self.current_customer = customer
    end

    def sign_in?
        !current_customer.nil?
    end

    def current_customer=(customer)
        @current_customer = customer
    end

    def current_customer?(customer)
        customer = current_customer
    end

    def current_customer
        @current_customer ||= Customer.find_by_remember_token(cookies[:remember_token])
    end

    def sign_out
        self.current_customer = nil
        cookies.delete(:remember_me)
    end

    def redirect_back_or(default)
            redirect_to(session[:return_to] || default)
            session.delete(:return_to)
    end

    def store_location
            session[:return_to] = request.fullpath
    end
end 
```

再次感谢，抱歉拼写错误

更新：

应用控制器

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    before_filter :pages

    def pages
        @pages = Page.all
    end
    include SessionsHelper
end 
```

尝试编辑客户时出现错误

```
undefined method `signed_in?' for #<CustomersController:0xb56089ec>
app/controllers/customers_controller.rb:45:in `signed_in_customer' 
```

注意:: 我刚刚做了 db:reset 并创建了一个新帐户。我成功了，但标题中的链接显示我正在注销。

这里是头文件

```
<header class="header">
  <div class="menu">
    <div class="center">
    <div class="logo">
          <nav>
        <ul>
        <% if sign_in? %>
            <div>Welcome <%= current_customer.full_name %> </div>
            <li><%= link_to "Home", root_path %></li>
            <li><%= link_to "Customers", customers_path %></li>
                <li><%= link_to "Profile", current_customer %></li>
                <li><%= link_to "Settings", edit_customer_path(current_customer) %></li>
                <li><%= link_to "Sign out", signout_path, method: "delete" %></li>
        <% else %>
            <li><%= link_to "Home", '#' %></li>
                <li><%= link_to "Sign in", '#' %></li>
        <% end %>
        </ul>
          </nav>
    </div>
    </div>
  </div>
</header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:02:31.707

确保在 ApplicationController 中包含帮助程序

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper
end 
```

这意味着在您的示例中从 ApplicationController 继承的任何控制器（例如 CustomersController）都将能够访问您的帮助程序中的方法

我没有查看您的所有代码，但如果这解决了您的两个问题，请告诉我，如果没有，请告诉我，我会看更长的时间

# qt - 如何在 QGraphicsView 中显示 PGM 文件？

> ID：11634358
> 
> 赞同：0
> 
> 时间：2012-07-24T15:35:26.613
> 
> 标签：qt, pyqt, qgraphicsview, qgraphicsscene, pgm

我正在尝试使用以下测试应用程序显示 PGM 文件。该代码适用于 PNG 文件，但不适用于 PGM：

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *
import Image
import ImageQt

class MyView(QGraphicsView):
    def __init__(self):
        QGraphicsView.__init__(self)

        self.scene = QGraphicsScene(self)
        self.setScene(self.scene)

        img = Image.open('test.pgm') # works with 'test.png' 
        self.imgQ = ImageQt.ImageQt(img)
        pixmap = QPixmap.fromImage(self.imgQ)
        self.scene.addPixmap(pixmap)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    view = MyView()
    view.show()
    sys.exit(app.exec_()) 
```

如何在 QGraphicsView 中显示 PGM 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:17:28.517

看起来您正在使用 PIL 打开图像，转换为 QImage，然后将其转换为 QPixmap。

有什么理由不能直接将 PGM 加载到 QPixmap 中并避免 PIL？

更换

```
img = Image.open('test.pgm') # works with 'test.png' 
self.imgQ = ImageQt.ImageQt(img)
pixmap = QPixmap.fromImage(self.imgQ)
self.scene.addPixmap(pixmap) 
```

和

```
pixmap = QPixmap('test.pgm')
self.scene.addPixmap(pixmap) 
```

应该为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:19:24.920

QImage 支持读取 PGM 文件。您是否检查过 img 是否正确加载？

也许您有 abad 文件，或者名称中的拼写错误，或者权限错误

# java - How to add javascripts to my InDesign Server Java web app?

> ID：11634364
> 
> 赞同：2
> 
> 时间：2012-07-24T15:35:39.200
> 
> 标签：java, javascript, corba, indesign-server

I wrote a simple Java (1.5)-based web app (deployed on a Tomcat-6-server), which communicates with an InDesign server using CORBA.

After I managed to add job options (stored in separate files within the filesystem), I'd like to do the same for Javascript files, which already work fine in the InDesign client. Unluckily I was unable to identify how to "hook" the scripts into my CORBA application, just like I did with job options.

Unfortunately, the official docs do not tell me how to do this. Can anyone offer help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:06:23.337

After digging through tons of documentation,(non-existent ;) ) javadocs and the official and unofficial adobe forums, I found a solution by myself.

The CORBA-application owns an undocumented method `doScript(arg0, arg1, arg2, arg3, arg4)`, which does indeed execute scripts. A code snippet like this executes javascript (and maybe other scripts just fine):

```
String scriptPath = "/path/to/my/javascripts/"; // indesign server needs file access to this folder
VariableType file = VariableTypeUtils.createFile(scriptPath);

// ScriptLanguage.UNKNOWN - 1433299822
// ScriptLanguage.APPLESCRIPT_LANGUAGE - 1095978087
// ScriptLanguage.JAVASCRIPT - 1246973031

// do javascript
OptScriptLanguageEnum scriptType = OptArg.makeScriptLanguageEnum(1246973031);

// add values ...
VariableType[] params = new VariableType[1];
params[0] = VariableTypeUtils.createBoolean(true);
OptVariableTypeSeq args = OptArg.makeVariableTypeSeq(params);

// or if you got no args
args = OptArg.noVariableTypeSeq();

// undo modes
OptUndoModesEnum undoModes = OptArg.noUndoModesEnum();
// string to undo mode
OptString undoName = OptArg.noString();

// add to application
VariableType vt = gApp.doScript(file, scriptType, args, undoModes, undoName); 
```

Hope that anyone can confirm this. :)

# r - 用奇怪的名字定义/调用对象？

> ID：11634368
> 
> 赞同：2
> 
> 时间：2012-07-24T15:35:53.637
> 
> 标签：r

我正要问另一个问题所以这个问题突然出现在我的脑海中。我们如何定义一个具有奇怪名称的对象。例如，假设我们想调用一个对象“test^#”。如果我想定义它，我会使用“”：

```
"test^#" <- 10 
```

现在的问题是如何调用这个对象？如果我们再次使用“”，那么 R 将其视为字符串而不是对象的名称。虽然我看到了能够在对象名称中使用符号的实际应用，但在这一点上，出于我的好奇心，这更像是一个问题。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T15:37:32.917

使用反引号：

```
"test^#" <- 10
ls()
[1] "test^#" 
```

现在使用它：

```
`test^#`
[1] 10 
```

* * *

您还可以使用反引号来引用具有非标准名称的数据框（或列表）中的列。例如：

```
iris$`Sepal length` <- iris$Sepal.Length
str(iris)
'data.frame':   150 obs. of  6 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Sepal length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...

summary(iris$`Sepal length`)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  4.300   5.100   5.800   5.843   6.400   7.900 
```

* * *

如果你想要一些非常奇怪的东西，比如在名称中嵌入反引号，那么你可能不得不使用`get()`来引用它：

```
"test^`#" <- 20

get("test^`#")
[1] 20 
```

# php - 仅当登录到托管站点的单独服务器时才允许从远程服务器下载

> ID：11634376
> 
> 赞同：-1
> 
> 时间：2012-07-24T15:36:27.960
> 
> 标签：php, apache

我们即将启动我们的一个新项目，但我们正处于最后一个障碍。我们有一个专门的文件服务器，它将为我们所有的下载提供服务，但是目前它向网站的任何访问者显示下载目录。我们希望拥有它，以便仅在访问者登录时才显示下载（这是一个简单的系统，在我们的页面中简单地嵌入了一个文件目录列表，但为我们完成了这项工作）。我们将如何去做与阿帕奇？

这几乎是我们需要努力的最后一点，因此我们非常感谢您的帮助！

如果需要可以提供其他信息，我知道我可能有点模糊，但是我不是该项目的开发人员，我只是 PR / 友好的面孔！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:10:02.310

以下是步骤：

1.  `Options -Indexes`在每个文件夹的 apache .htaccess 或 httpd.conf 中包含。
2.  为 url 创建一个子域并将文件服务器链接到它
3.  在文件服务器上创建一个 PHP 脚本，用于获取并下载正确的文件
4.  在链接级别（当用户想要下载时）包括链接 subdomain.site.com/download.php 或类似的

这将屏蔽文件服务器及其内容，同时允许下载文件。

# symfony-forms - 创建表单时使用条件语句

> ID：11634377
> 
> 赞同：7
> 
> 时间：2012-07-24T15:36:30.047
> 
> 标签：symfony-forms, symfony-2.1

我想在 Symfony 中创建**表单时使用条件语句。**

我在一般情况下使用**选择小部件。**如果用户选择“**其他**”选项，我想显示一个额外的**文本框小部件**。我想这可以在 javascript 中完成，但是我怎样才能将来自 2 个小部件的数据保存到我实体中的同一属性中？

到目前为止我有这个：

```
 $builder->add('menu', 'choice', array(
        'choices'   => array('Option 1' => 'Option 1', 'Other' => 'Other'),
        'required'  => false,
    ));
  //How to add text box if choice == Other ???? 
```

我打算使用 DataTransfomer，但在 2 个小部件上？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-25T18:16:32.933

我建议为此构建一个自定义类型，例如`ChoiceOrTextType`. 向这种类型添加选项（名为“choice”）和文本字段（名为“text”）。

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class ChoiceOrTextType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('choice', 'choice', array(
                'choices' => $options['choices'] + array('Other' => 'Other'),
                'required' => false,
            ))
            ->add('text', 'text', array(
                'required' => false,
            ))
            ->addModelTransformer(new ValueToChoiceOrTextTransformer($options['choices']))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setRequired(array('choices'));
        $resolver->setAllowedTypes(array('choices' => 'array'));
    }
} 
```

正如您已经猜到的，您还需要一个数据转换器，这可能非常简单：

```
use Symfony\Component\Form\DataTransformerInterface;

class ValueToChoiceOrTextTransformer implements DataTransformerInterface
{
    private $choices;

    public function __construct(array $choices)
    {
        $this->choices = $choices;
    }

    public function transform($data)
    {
        if (in_array($data, $this->choices, true)) {
            return array('choice' => $data, 'text' => null);
        }

        return array('choice' => 'Other', 'text' => $data);
    }

    public function reverseTransform($data)
    {
        if ('Other' === $data['choice']) {
            return $data['text'];
        }

        return $data['choice'];
    }
} 
```

现在只使“菜单”字段成为该类型的字段。

```
$builder->add('menu', new ChoiceOrTextType(), array(
    'choices'  => array('Option 1' => 'Option 1', 'Option 2' => 'Option 2'),
    'required' => false,
)); 
```

# matlab - 使用 Excel GUI 编译 Matlab 应用程序的选项

> ID：11634378
> 
> 赞同：2
> 
> 时间：2012-07-24T15:36:31.953
> 
> 标签：matlab, user-interface, matlab-deployment, excel-addins

我正在使用 Excel 上的 GUI 为自己和其他人开发一个 Matlab 应用程序（为了便于使用，但也因为需要在 Excel 中完成一些数据处理）。

为简化起见，以下是**构成我的应用程序的所有部分**：

*   **第 1 部分**：带有运行设置的 Excel GUI
*   **第 2 部分**：Matlab 程序创建数据结果和图像
*   **第 3 部分**：带有 Matlab 数据和图像结果以及附加 Excel 数据处理的 Excel GUI

**目前**，当其他人需要使用它时，他们会给我运行设置（**第 1 部分**），我为他们运行 Matlab 程序（**第 2 部分**）并给他们数据、图像和我最后的 Excel GUI（第3**部分**）。

* * *

我试图通过结合上述部分来改善这种情况。我看到**2 个选项**：

*   **选项 1 ：从 Excel（***电子表格链接 EX*工具箱）运行 Matlab，因此将 Part1 和 Part2 放在一起
    *   => 对我来说会更多（我有 Matlab，我可以通过运行我的 Matlab 代码看到更多信息）
*   **选项 2**：全部打包：第 1+2+3 部分在可执行文件中（*MATLAB 编译器*工具箱）
    *   => 适用于我的最终用户（不需要 Matlab）

* * *

**现在我的问题**：

1.  我可以（我应该吗？我不应该吗？）同时做这两种选择吗？还是我把一切都复杂化了？并且根本不应该使用 Excel Link 工具箱？
2.  我是否需要 Matlab Builder EX 来实现选项 2？（因此创建一个加载项）或者我也可以使用工具箱来实现这一点：Excel Link + Compiler？（没有加载项，但 VBA 代码？）

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:11:08.883

如果您选择使用 MATLAB 编译器，以下是我想象的步骤

*   在 MATLAB 中创建 GUI。它将呈现一个界面，允许用户输入一些设置。它还有一个“运行”按钮，可以使用这些参数运行您的 MATLAB 程序。

*   在算法结束时，使用 COM 自动化打开 Excel，并以编程方式将上一步的结果填充到表格中。您可以将任何生成的 MATLAB 图形和绘图的快照添加到 excel 文件（参见[此处](https://stackoverflow.com/a/7617438/97160)的示例）或简单地保存为单独的图像文件。您甚至可以将 VBA 宏添加到工作表中。

*   将上述内容部署为独立应用程序。它不依赖于 MATLAB（用户只需安装免费提供的 MCR 运行时）。

*   用户运行您的应用程序，并使用它来生成 Excel 文件。现在，用户可以选择打开此文件，并手动执行任何最终数据操作。

如果您想要额外的集成，您可以使用“电子表格链接 EX”工具箱。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T13:55:17.337

有一个很好的答案可以回答我的问题。 [MATLAB 编译器与 MATLAB 编码器](https://stackoverflow.com/questions/18126407/matlab-compiler-vs-matlab-coder)

**基本上**：

*   对于**R2014b 及更早版本：可以使用“** **MATLAB Builder EX for Excel** ”工具箱生成 Excel 插件

*   从**R2015a（最新版本）开始**：工具箱“ **MATLAB Compiler** ”现在可以生成 Excel 插件

这简化了很多事情！

Nico（回答他自己的问题:-)）

# java - 用户名、密码等硬编码到程序中 - 如何从文件中获取它们？

> ID：11634379
> 
> 赞同：0
> 
> 时间：2012-07-24T15:36:40.497
> 
> 标签：java, mysql, eclipse, jdbc, configuration-files

我在 ECLIPSE 中编写了一些代码。如您所见，用户名、密码、数据库 URL、SQL 查询被硬编码到我的程序中。每次更改密码、数据库用户名或修改查询时，我都不想更改代码并重新编译它。出于这个原因，我想将这些“参数”放在一个文件中（文本、XML、json ???）。我希望能够轻松更改参数。所以我该怎么做 ？我应该使用什么样的文件？我想避免使用 XML、json，因为您需要对两者都很了解。当代码变大时，XML 和 JSON 可能会很困难。

```
import java.sql.*;

public class JDBCDemo {

static String query = 
        "SELECT customerno, name " +
        "FROM customers;";

public static void main(String[]args)
{
    String username = "cowboy";
    String password = "123456";
    try
    {
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/business", username, password);
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery(query);
    }catch(SQLException ex){System.out.println("Exception! " + ex);}

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:39:59.750

您可以使用 [属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html) 并从 .properties 文件中读取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:42:20.463

也许[这](http://www.bartbusschots.ie/blog/?p=360)有帮助。这是此类配置文件的一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:42:47.657

```
InputStream inputStream = null;
Properties properties = new Properties();
try {
    inputStream = JDBCDemo.class.getClassLoader().getResourceAsStream("jdbc.properties");
    properties.load(inputStream);
}
finally {
    try { 
        if (inputStream != null) {
             inputStream.close();
        }
    }
    catch (IOException e) {
        ;//ignore
    }
}

String username = properties.get("username"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:43:09.327

XML 和 JSON 是结构化格式，因此需要对其进行[解析](http://www.java-tips.org/java-se-tips/javax.xml.parsers/how-to-read-xml-file-in-java.html)。

文本文件将是最容易实现的，但由于它是非结构化的，最终用户将需要知道您的程序可以理解的内部格式。例如，额外的空间可能会破坏您的程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T15:43:46.643

曾经想过使用 spring 注入，您可以创建一个包含所有硬编码变量的配置文件，这些变量可以通过 getter 和 setter 放入您的代码中。那么将来如果这些变量中的任何一个需要更改，您只需更改 1 个文件 [http://www.springsource.org/javaconfig/](http://www.springsource.org/javaconfig/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T16:06:39.380

通常，uer-id 和密码（而不是需要从 JAR/WAR 外部配置的任何资源）作为键值对存储在属性文件中。然后，您可以使用 ResourceBundle 类访问它们：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/util/ResourceBundle.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ResourceBundle.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T10:48:31.163

对于`sql`查询，您可以使用数据库`function`或`procedure`返回某种类似于`SYS_REFCURSOR`in的游标并从前端`Oracle`调用`function`or 。`procedure`通过这样做，您可以避免在 java 代码中对 sql 查询进行硬编码。

问候

# python - appengine python 数据存储 - 模型回滚的钩子（常规 db api，而不是 ndb）

> ID：11634380
> 
> 赞同：1
> 
> 时间：2012-07-24T15:36:45.417
> 
> 标签：python, google-app-engine, datastore

当事务失败时，我需要挂钩特定模型类型的回滚。我知道使用 ndb api 更简单。但是，我现在有太多遗留代码需要迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:13:05.290

你读过[这篇关于使用钩子](https://developers.google.com/appengine/articles/hooks)的文章吗？我认为您可以检查是否 call == 'Rollback' 在回滚事务时执行某些操作。

# ruby - 解析 diff-lcs 的输出

> ID：11634381
> 
> 赞同：0
> 
> 时间：2012-07-24T15:36:47.720
> 
> 标签：ruby

我想知道两个字符串之间的区别，我正在使用 diff-lcs 来做到这一点。但是，我无法解析输出。

```
require 'diff-lcs'

    a = 'abcdef'
    b = 'abcsef'

diffs = Diff::LCS.diff(a,b)

puts diffs.inspect

==> [[#<Diff::LCS::Change:0x0000010106dcc0 @action="-", @position=3, @element="d">, #<Diff::LCS::Change:0x0000010106db30 @action="+", @position=3, @element="s">], [#<Diff::LCS::Change:0x0000010106d360 @action="-", @position=6, @element="">]] 
```

我只想输出字符差异，所以'd'和's'。有没有办法从该输出中提取@element？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:05:50.083

character(element) 是您可以访问的只读属性。

生成的输出是一个数组数组。每个第二个数组都包含一个更改。第二个数组的大小为 2，包含每个字符串中的更改。

我不知道您希望它有多一般，但对于这种情况，以下将起作用：

```
a = 'abcdef'
b = 'abcsef'
diffs = Diff::LCS.diff(a,b)
p diffs[0][0].element #=> d
p diffs[0][1].element #=> s 
```

如果您有很多匹配项，则可能是某种循环：

```
diffs.each do |a|
    a.each do |b|
        puts b.to_s + ' ' + b.element
    end
end 
```

# javascript - Javascript 循环参考

> ID：11634385
> 
> 赞同：-1
> 
> 时间：2012-07-24T15:37:04.353
> 
> 标签：javascript, node.js, loops

> **可能重复：**
> [javascript for 循环意外行为](https://stackoverflow.com/questions/3170589/javascript-for-loop-unexpected-behaviour)

我在 node.js 中编程，我遇到了一个小问题，这是由一些奇怪的引用传递问题引起的。

我使用以下代码：

```
for(j in groups){
  console.log(j, somefunction(groups[j]))
} 
```

在函数内部，一些时髦的事情是用数据完成的，但之后我得到以下结果：

```
3 data
3 data
3 data
3 data
3 data
3 data 
```

代替

```
1 data
2 data
3 data
4 data
5 data
6 data 
```

但它保持正确数量的结果..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:49:09.343

您引用的代码没有执行您列出的操作，您可能丢失了一些简化问题的内容。

但是，此代码将具有您所描述的效果：

```
for(j in groups){
  doSomething(function() {
    // Callback for `doSomething`
    console.log(j, somefunction(groups[j]));
  });
} 
```

请注意，现在我正在创建一个函数（无论`doSomething`做什么都是回调），而不仅仅是*调用*一个。

发生这种情况的原因是正在创建的函数具有对变量（以及执行上下文中的所有其他内容）的*持久引用*，而不是创建函数时的*副本。*它被称为对该执行上下文的*闭包。*所以你的循环运行，一系列调用开始一系列事情，然后当回调被调用时，是3，所以它们都是一样的。`j`**`doSomething``j`**

 **通常的解决方案是创建函数来关闭在调用之前不会更改的内容，如下所示：

```
for(j in groups){
  doSomething(makeCallback(j));
}

function makeCallback(jarg) {
    return function() {
        console.log(jarg, somefunction(groups[jarg]));
    };
} 
```

现在，我们`jarg`在回调中使用，而不是`j`. 因为`jarg`它是调用上下文的一部分`makeCallback`，所以它在我们创建函数和稍后调用它之间不会改变。

将数据绑定到函数的另一种方法是使用[`Function#bind`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)（*有效地*在后台创建闭包），这是 NodeJS 中可用的 ES5 功能，因为 V8 引擎具有它。看起来是这样的：

```
for(j in groups){
  doSomething(function(jarg) {
    // Callback for `doSomething`
    console.log(jarg, somefunction(groups[jarg]));
  }.bind(this, j)); // <== Note the bind
} 
```

或不那么令人困惑（并且很可能更有效）：

```
for(j in groups){
  doSomething(handler.bind(this, j));
}

function handler(jarg) {
  // Callback for `doSomething`
  console.log(jarg, somefunction(groups[jarg]));
} 
```

更多关于闭包：

*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:37:04.353

我发现如果我使用 var j = 0

```
for(i in groups){
j = i 
```

该系统确实如何工作，但它不是最好的遮阳篷

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:37:16.457

这样做： -

```
    for(var j 分组)
    {
        //你的代码
    }

```

j 没有返回正确的值，因为您已在全局范围内分配了 j。希望这有帮助！**

# svn - 是否可以使用 GIANT 存储库在 SVN 中进行分支？

> ID：11634390
> 
> 赞同：1
> 
> 时间：2012-07-24T15:37:16.143
> 
> 标签：svn, repository, branch

我们目前有一个 GIANT SVN 存储库。这个东西可能是 5+ GB。最近我们一直在尝试清理一些损坏的、过时的代码，但与此同时，我们仍然需要对我们的测试环境进行推送。

显然，我们应该进行某种分支，但是，我一直理解的分支方式是它为每个分支创建了整个存储库的副本。显然，这比我真正想要占用的空间要多。

有没有办法为单个项目文件夹做这件事？

如果您需要对我所说的内容进行任何澄清，请询问。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:43:15.427

> 但是，我一直理解 [Subversion] 分支的方式是它为每个分支创建了一个完整的存储库副本。

不，Subversion 没有。它创建指向存储库主干的指针。

当您进行更改时，只有更改会保存为分支的一部分。

# javascript - 在当前活动元素上触发多个 jQuery 脚本

> ID：11634392
> 
> 赞同：0
> 
> 时间：2012-07-24T15:37:20.810
> 
> 标签：javascript, jquery, element, toggleclass

我对jQuery有点陌生，我在实现一个功能时遇到了困难，所以我真的希望有人能指导我一下。我基本上想做的是同时突出显示2个元素（通过toggleClass）。

基本上我有一个重复的 div ( `#post`)，它包含一个标题、拇指和描述 div。我想要做的是，一旦我将鼠标悬停在标题或拇指 div 元素上以获取新的附加类 ( `xxxHover`)。因此，基本上一旦用户将鼠标悬停在 title/thumb div 上，title/thumb div（两者）就会获得一个名为（`xxxHover`其中 xxx 代表 div 名称 - 在本例中为 titleHover/thumbHover）的新类。

我可能不是最好的解释，所以我也准备了一个 jsFiddle：

[http://jsfiddle.net/yLqnd/12/](http://jsfiddle.net/yLqnd/12/)

如您所见，我的问题是仅限制当前元素的脚本（在我们的例子中为#post）。如果它有帮助或很重要，我不得不说这将被集成到一个 WordPress 网站中（所以 HTML 结构基本上在 loop.php 中），这就是为什么我想限制每个项目的 2x 高亮效果（#post） .

提前感谢工厂的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:44:39.370

[http://jsfiddle.net/oscarj24/yLqnd/13/](http://jsfiddle.net/oscarj24/yLqnd/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:45:40.187

这是一个更新的 jsFiddle：现在任何 div 内部都将切换类，而不是如此具体

[jsFiddle 链接](http://jsfiddle.net/Bvss6/)

基本上我把它们放在一起：

```
$(".post div").mouseover(function(){  
    $(this).closest('.post').find('div').toggleClass('thumbHover');
}).mouseout(function(){    
    $(this).closest('.post').find('div').toggleClass('thumbHover');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:47:01.570

我认为您可以通过在 jQuery 中使用 .siblings() 来获得所需的效果。

```
$(".title").mouseover(function(){    
    $(this).toggleClass("titleHover");
    $(this).siblings(".thumb").toggleClass("thumbHover");
}); 
```

这会将 toggleClass 限制为仅位于同一 .post 中的 .thumb。

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:52:11.950

简单，只需在两个元素的父级上执行即可：

```
$(".post").mouseover(function(){  
    $(this).find('div').toggleClass('thumbHover');
}).mouseout(function(){    
    $(this).find('div').toggleClass('thumbHover');
}); 
```

# java - JSP JSTL 返回真

> ID：11634397
> 
> 赞同：1
> 
> 时间：2012-07-24T15:37:34.807
> 
> 标签：java, jsp, jstl

我一直遇到 JSTL c:if 似乎无法正常工作的问题。所以我用以下语句对其进行了测试...

```
<c:if="${1 == 2}">
   1 is equal to 2
</c:if> 
```

它正在输出“1等于2”......

我在这里缺少什么吗？

编辑：发现了问题，我很傻。。问题是我忘记在页面中包含 jstl 核心标签库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:43:20.163

带有条件的 EL 表达式必须是`test`属性的值。

```
<c:if test="${1 == 2}">
   1 is equal to 2
</c:if> 
```

### 也可以看看：

*   [JSTL`<c:if>`标签文档](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/if.html)

# mysql - SQL select where like using query string

> ID：11634401
> 
> 赞同：0
> 
> 时间：2012-07-24T15:37:47.703
> 
> 标签：mysql, sql

如果我有这两个复杂的查询字符串

```
 ALM_frmTopAlarmHistoryReport.aspx?strAlarmConnection=AlarmSystem 
```

和

```
 http://1.1.4.1/xyz/ALM_frmAlarmHistoryReport.aspx?ViewPDF=
 1&dtmStartDate={0}&dtmEndDate={1}& + '&lngAlarmGroup=' + 
 $('#ddlAlarmGroup').val() + '&lngProcessor=' + $('#ddlProcessor').val() + 
 '&intCategory=' + $('#ddlCategory').val() 
```

我怎样才能执行`select WHERE LIKE`我尝试过的条件

```
 SELECT * FROM [tablename] WHERE string1 LIKE '%string2%' 
```

我收到以下错误

```
 Msg 103, Level 15, State 4, Line 1
   The identifier that starts with'%string2 ' is too long. Maximum length is 128. 
```

任何帮助都将非常受欢迎，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:41:32.933

使用 locate 或 instr 代替：

```
select *
from tablename
where instr(string2, string1)  > 0 
```

# ruby-on-rails - 为什么我需要主机应用程序中的 gem

> ID：11634402
> 
> 赞同：1
> 
> 时间：2012-07-24T15:37:49.263
> 
> 标签：ruby-on-rails, twitter-bootstrap, gem, sass, rails-engines

我正在开发我的第一个 Rails 引擎。这是一个具有资产和基本功能的管理面板布局。

我真正想要的是它基于 Twitter Bootstrap + SASS。

如果我的引擎的 gemspec 文件中只有这些行：

```
 gem.add_dependency "railties", "~> 3.2"
  gem.add_dependency "sass-rails"
  gem.add_dependency "bootstrap-sass" 
```

尝试访问页面时出现此错误：

```
ActionView::Template::Error (couldn't find file 'bootstrap'
  (in /Users/swamiatma/Documents/Dropbox/coding/ruby/gems/tkh_admin_panel/app/assets/javascripts/admin.js:9)): 
```

但是，如果我将其添加到主机应用程序 gemfile：

```
gem 'bootstrap-sass' 
```

这样我得到以下几行：

```
group :assets do
  gem 'jquery-rails'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass'
end 
```

它现在工作正常。我认为这种依赖完全属于 Rails 引擎 gem，应该存在。

是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T23:02:01.680

看看'rails-admin'引擎。它正在使用“bootstrap-sass”，它需要在 engine.rb 中：[https ://github.com/sferik/rails_admin/blob/master/lib/rails_admin/engine.rb](https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/engine.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T14:57:28.320

为了将来参考， rails_admin/engine.rb 中的重要行（至少在我的情况下）如下：

```
require 'bootstrap-sass' 
```

在我将它添加到我的 engine.rb 之后，错误就消失了。

# sql - H2 SQL 日期比较

> ID：11634403
> 
> 赞同：7
> 
> 时间：2012-07-24T15:37:54.867
> 
> 标签：sql, datetime, h2

在 TIMESTAMP 类型的列上的 H2 数据库中，如何运行查询

```
SELECT * FROM RECORDS WHERE TRAN_DATE < '2012/07/24' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T15:41:05.190

尝试`'2012-07-24'`

[http://www.h2database.com/html/grammar.html?highlight=dateType&search=date#date](http://www.h2database.com/html/grammar.html?highlight=dateType&search=date#date)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T22:17:55.580

对我来说，以下内容有所帮助，因为我还需要将完整的时间戳与日期和时间进行比较：

```
SELECT * FROM RECORDS WHERE TRAN_DATE < TIMESTAMP '2020-07-24 20:00:00' 
```

即使对提问者没有帮助，这也可能对其他人有所帮助。

# facebook - 在正文中打开图形元标记？

> ID：11634405
> 
> 赞同：1
> 
> 时间：2012-07-24T15:37:59.170
> 
> 标签：facebook, facebook-graph-api, meta-tags

我正在尝试将开放图形元标记添加到我们网站上的视频页面，但由于某种原因，它们没有被 Facebook 接收。我相信我正在按照开发人员页面上发布的所有内容进行操作。

这是一个示例链接： [http ://www.atlantafalcons.com/falconstv/?video_id=1750246128001](http://www.atlantafalcons.com/falconstv/?video_id=1750246128001)

linter 返回以下错误：

> 正文中的元标记：您的 . 这可能是因为您的格式错误并且它们在解析树中的位置较低，或者您不小心将 Open Graph 标记放在了错误的位置。无论哪种方式，您都需要在标签可用之前对其进行修复。 [http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.atlantafalcons.com%2Ffalconstv%2F%3Fvideo_id%3D1750246128001](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.atlantafalcons.com%2Ffalconstv%2F%3Fvideo_id%3D1750246128001)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:43:29.313

你的声明在不应该的时候`<!DOCTYPE>`有一个结束斜线。`/>`这个以及其他错位的字符可能会导致不同级别和工具上的错误行为。“正文中的元标记”消息很可能是由此引起的。

# python - RabbitMQ 上的计划 Celery 任务在其指定的运行时间之后仍未得到确认

> ID：11634407
> 
> 赞同：5
> 
> 时间：2012-07-24T15:38:04.273
> 
> 标签：python, heroku, rabbitmq, celery, django-celery

在使用 Celery 和 RabbitMQ 时，无法让计划任务在指定的未来时间运行。

在 Heroku 服务器上使用 Django，并带有 RabbitMQ 附加组件。

**问题：**

有时任务根本不运行，有时它们确实运行，但它们运行的​​时间相差很大（比如一个小时）。

**未运行的示例任务：**

当我尝试使用倒计时或 ETA 运行任务时，它从未真正执行过。这是一个未运行的示例 ETA 任务：

```
>>> dummy_task.apply_async(eta=datetime.datetime.now() + timedelta(seconds=60))
<AsyncResult: 03001c1c-329e-46a3-8180-b115688e1865> 
```

结果日志：

```
2012-07-24T14:03:08+00:00 应用程序 [scheduler.1]: [2012-07-24 10:03:08,909: INFO/MainProcess]
    从经纪人那里得到任务：events.tasks.dummy_task[910ff406-d51c-4c29-bdd1-fec1a8168c12]     
    埃塔：[2012-07-24 10:04:08.819528+00:00]

```

一分钟后，什么也没有发生。我的`unacknowledged message count`Heroku RabbitMQ 管理控制台中的 增加一并保持在那里。

**这有效：**

我已确保 celery 任务已正确注册，并且 RabbitMQ 已配置为通过验证我是否可以使用 delay() 方法运行任务来接受任务。

```
>>> dummy_task.delay()
<AsyncResult: 1285ff04-bccc-46d9-9801-8bc9746abd1c> 
```

结果日志：

```
2012-07-24T14:29:26+00:00 应用程序 [worker.1]: [2012-07-24 10:29:26,513: INFO/MainProcess]
    从经纪人那里得到任务：events.tasks.dummy_task[1285ff04-bccc-46d9-9801-8bc9746abd1c]

……

2012-07-24T14:29:26+00:00 应用程序 [worker.1]: [2012-07-24 10:29:26,571: INFO/MainProcess]
    任务 events.tasks.dummy_task[1285ff04-bccc-46d9-9801-8bc9746abd1c]
    0.0261888504028s 成功：无

```

对此的任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:21:27.207

I sort of figured it out. Because I was debugging, I was naturally setting tasks to run in 5 or 10 minutes. I don't know exactly why, but my set up has a hard time handling this. It's like it needs a certain amount of time to process and queue the task. Anyway, tasks scheduled for more than an hour or so in advance have been running correctly.

# java - 使用 izpack 5 和 maven 创建安装程序的起点

> ID：11634408
> 
> 赞同：0
> 
> 时间：2012-07-24T15:38:13.540
> 
> 标签：java, maven, build, izpack

我已经让 Maven 创建了一个程序集 widget1.0-distribution.zip，其中包含：

```
widget-1.0
widget-1.0/lib/widget.jar
widget-1.0/lib/3rdpartyjar1.jar
widget-1.0/lib/3rdpartyjar2.jar
widget-1.0/widget.sh
widget-1.0/widget.properties
widget-1.0/widget.exe
widget-1.0/widget.ini 
```

现在我只想使用 Izpack 5 创建一个安装程序，它允许用户决定在哪里简单地安装小部件应用程序，保持相同的文件夹结构。

我以前使用过 Izpack 4.3.5，但我正在努力将它与 maven 集成，我已经创建了我的 install.xml，但看不到这个插件如何进入 maven pom.xml

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T18:02:10.747

IzPack wiki 有一个关于如何使用 maven 构建 Izpack 5 安装程序的详细页面：[https ://izpack.atlassian.net/wiki/display/IZPACK/Compiling+Using+Maven](https://izpack.atlassian.net/wiki/display/IZPACK/Compiling+Using+Maven)

你有什么想念的吗？

# php - 无法从一个 php 文件调用另一个 php 文件

> ID：11634414
> 
> 赞同：1
> 
> 时间：2012-07-24T15:38:39.297
> 
> 标签：php, javascript, html

我有 3 个文件`fileNum1.php`：`fileNum2.php`和`fileNum3.php`.

`fileNum1.php`文件调用`fileNum2.php`文件：

```
 if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari 
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        // code for IE6, IE5 
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","fileNum2.php",false);
    xmlhttp.send(); 
```

并`fileNum2.php`呼吁`fileNum3.php`：

```
 if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari 
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        // code for IE6, IE5 
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","fileNum3.php",false);
    xmlhttp.send(); 
```

调用`fileNum3.php`不工作！问题是什么？（可能是因为我已经`new XMLHttpRequest`在现有的内部开始了`XMLHttpRequest`吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:16:35.413

JavaScript 是客户端代码。这意味着需要浏览器来解释和执行 JavaScript 代码。

如果您`fileNum1.php`通过浏览器访问，调用`fileNum2.php`将执行，因为 JavaScript for`fileNum1.php`被解释。

来自`fileNum2.php`to的调用`fileNum3.php`不会执行，因为它不会返回给浏览器。第三个文件中的 JavaScript 将作为输出返回到发出请求的服务器，并且 JavaScript 永远不会返回浏览器。

如果你想从一个动作`fileNum3.php`返回到`fileNum1.php`，你必须在`fileNum3.php`被调用时捕获数据`fileNum2.php`，然后将响应返回到`fileNum1.php`。

或者，您可以以正确的方式进行操作，并说如果`fileNum1.php`调用`fileNum2.php`并且一切正常，然后调用`fileNum3.php`。

```
if (window.XMLHttpRequest)
{
    // code for IE7+, Firefox, Chrome, Opera, Safari 
    xmlhttp=new XMLHttpRequest();
}
else
{
    // code for IE6, IE5 
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","fileNum2.php",false);
xmlhttp.send(); 

if(xmlhttp.responseText !== "undefined"){
    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari 
        xmlhttp2=new XMLHttpRequest();
    }
    else
    {
        // code for IE6, IE5 
        xmlhttp2=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp2.open("GET","fileNum3.php",false);
    xmlhttp2.send(); 
} 
```

# symfony - 在实体类中访问 Symfony2 全局参数

> ID：11634415
> 
> 赞同：6
> 
> 时间：2012-07-24T15:38:41.230
> 
> 标签：symfony, parameters, model

我的 parameters.ini 文件中存储了一个值，我需要在模型的 prepersist 方法期间访问它。

通常我使用`$this->container->getParameter('value');`，但容器在实体中不可用。

有没有办法在实体类中获取参数？

PS 该值是我在 prepersist 期间从中提取信息的服务的 API 密钥。最佳做法是在 parameters.ini 中保留密钥/密码

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T16:41:27.393

最佳实践是使用服务来持久化您的实体。当您调用服务方法时，这将注入*容器并设置您的参数。**`updateMyEntity()`*

在您的控制器内部（或任何您想要的）：

```
$user = new User('foo');
$user->setSomeProperty('bar');
$userService->update($user); 
```

里面`UserService`：

```
public function update(User $user) {
    $user->setSomeParameter($this->container->getParameter('value'));
    $this->em->persist($user);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T05:18:41.340

除了弗洛伦特的回答之外，实体是纯粹的数据对象。他们不应该知道您的应用程序中的任何其他变量或服务。我更好奇*为什么*您的实体需要了解有关系统范围内的 API 密钥的任何信息。在背景信息很少的情况下，我会说你应该重新考虑你正在尝试做的事情。

您需要一个服务来与 API 交互，最好通过容器进行配置。我看不出这与实体有什么关系。

# matlab - 使用 importdata() 自动更改文件的标题行

> ID：11634417
> 
> 赞同：0
> 
> 时间：2012-07-24T15:38:50.670
> 
> 标签：matlab, loops, file-io, csv, import

好的，所以我有多个文件要导入以进行分析，并且我目前正在使用 uiimport() 在脚本中执行此操作，但是我必须手动移动每个文件的标题行，因为它们每次都在更改。我想做这样的事情：

```
DELIMITER = ',';
HEADERLINES = 50;  
data_imported = importdata(file_to_get, DELIMITER, HEADERLINES); 
```

但问题是我的 300~ 个文件中只有 1 或 2 个的标题行数为 50。另一个非常重要的注意事项是，每个文件的默认标题行数只需添加 2 个即可。因此，如果使用 uiimport() 时的默认标题行号是 50，那么我需要将其更改为 52。

有没有办法用一个 if 语句来改变它？注意：defaultheader 被用作示例，而不是实际变量。

例如：

```
if defaultheader = 30
     header = 32
end 
```

* * *

.CSV 文件在 excel 中的外观示例

```
*Title
*
*Description (1.7)   Tue 03/20/12 09:59:09
*
* file name
*
* TestNames:
* _Test 1   (ein: 10)
* _Test 2   (ein: 15)
* _Test 3   (ein: 20)
* _Test 4   (ein: 25)
* _test 5   (ein: 30)
* _test 6   (ein: 35)
* _test 7   (ein: 40)
* _test 8   (ein: 45)
* _test 9   (ein: 50)
* _test 10   (ein: 55)
* _test 11   (ein: 60)
* _test 12   (ein: 65)
* _test 13   (ein: 70)
* _test 14  (ein: 75)
* _test 15   (ein: 80)
* _test 16   (ein: 85)
*
* Info1: ...
* Info2: ...
* info3: ...
* info4: ...
* info5: ...
* info6: ...
* info7: ...
* info8: ...
* info9: ...
* info10: ...
* info11: ...
* info12: ...
*
* Pixel,Tap Name,Tap Pixel,brightness
,,,10,15,20,25,30,35,40
,,,0,67,21,12,223,231,832
1,0A1,458,75,89,24,46,256,763,532
2,0A1,457,43,65,56,554,263,254,732
3,0A1,456,28,47,76,221,412,732,832
4,0A1,455,12,23,36,466,652,633,637
5,0A1,454,11,78,98,678,864,241,223 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:35:48.717

您可以使用[TEXTSCAN](http://www.mathworks.com/help/techdoc/ref/textscan.html)函数读取 CSV 文件，并指定`CommentStyle`忽略所有以字符开头的标题行的选项`*`。

下面的代码将首先将文件读取为行的元胞数组，忽略所有以`*`. 我们还跳过了标题部分之后的前两行。接下来，我们遍历每一行，并将制表符分隔的值解析为字符串。我们忽略前三列，并将剩余的值转换为数字。最后我们将该行存储在矩阵中`M`。请注意，代码不假设我们事先知道列数，而是从其中一个数据行中确定。

```
%# read lines
fid = fopen('file.csv','rt');
C = textscan(fid, '%s', ...
    'Delimiter','', 'Whitespace','\n', 'CommentStyle','*');
fclose(fid);
C = C{1}(3:end);    %# skip two lines

%# parse each line
numCols = sum(C{1}==',')+1 - 3;    %# number of columns
M = zeros(numel(C),numCols);
for i=1:numel(C)
    v = textscan(C{i}, '%s', 'Delimiter',',');
    v = str2double(v{1}(4:end));
    M(i,1:numel(v)) = v;
end 
```

生成的矩阵`M`包含您感兴趣的文件部分：

```
M =
    75    89    24    46   256   763   532
    43    65    56   554   263   254   732
    28    47    76   221   412   732   832
    12    23    36   466   652   633   637
    11    78    98   678   864   241   223 
```

# php - 如何在给定的字符串中搜索 HTML 标签？

> ID：11634419
> 
> 赞同：0
> 
> 时间：2012-07-24T15:39:02.697
> 
> 标签：php, arrays, string, replace, html-parsing

我知道这可能看起来很简单，但我对如何完成这项任务感到困惑。

我需要从数组键/值中删除所有 HTML IMG 标记，然后将这些删除的 HTML IMG 标记推回同一个数组，这次使用它自己的单独数组键。

**样本：**

```
$array = array(
    'content' => '<img src="http://www.domain.com/images/img.png" width="100" height="100" alt="" />here is some content that might also be in this string.'
);

$array = array(
    'content' => 'here is some content that might also be in this string.',
    'image' => '<img src="http://www.domain.com/images/img.png" width="100" height="100" alt="" />'
); 
```

HTML IMG 标记和字符串中的其余文本总是不同的。内容永远不会完全相同，所以我真的不知道该怎么做。我在想`explode()`或`str_replace()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:46:22.207

你需要一个正则表达式。就像是：

```
$pattern = '#<img(.*)/>#U'; // note need to use ungreedy match here.';
$number_of_matches = preg_match_all($pattern, $subject, $matches, PREG_OFFSET_CAPTURE); 
```

这将告诉您匹配的数量以及匹配的信息（包括匹配的字符串和匹配字符串的偏移量，您将使用它来从原始字符串中删除内容）

# c# - 运行时的 C# 泛型类型

> ID：11634424
> 
> 赞同：1
> 
> 时间：2012-07-24T15:39:13.913
> 
> 标签：c#, generics, types

我正在尝试动态生成报告并将它们通过电子邮件发送给适当的用户，这是可能的，还是编译器在运行时之前需要该类型。

```
static void Main(string[] args) {
    ArrayList ReportsTypes = new ArrayList();
    ReportsTypes.Add(typeof(AgentPPL));
    foreach(Type t in ReportsTypes) {
        InitilizeReports<t>(); // <- Error
    }
}
static void InitilizeReports<T>() where T : new() {
    T r = new T();
    IReportDocument rd = (IReportDocument)r;
    rd.DocumentName = "SomeReport";
    ExportReport(rd);
} 
```

我真正想做的是从数据库中获取一个字符串并将该字符串转换为一种类型，但我怀疑这是可能的，但是在我的示例中创建一个类型数组呢？这里做错了什么。非常感谢任何帮助我已经旋转了一段时间只是为了让我的模板正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:52:33.580

您可以使用以下方法之一：

```
ReportGenerator generator = new ReportGenerator();
// 1\. Invoke method with single parameter
foreach(Type t in ReportsTypes) {
    generator.InitilizeReportsByType(t);
}
// 2\. Make and invoke generic method without parameter via reflection
MethodInfo mInfo = typeof(ReportGenerator).GetMethod("InitilizeReportsGeneric");
foreach(Type t in ReportsTypes) {
    MethodInfo genericMethod = mInfo.MakeGenericMethod(new Type[] { t });
    genericMethod.Invoke(generator, new object[] { });
}

public class ReportGenerator {
    public void InitilizeReportsByType(Type type) {
        IReportDocument reportDocument = (IReportDocument)Activator.CreateInstance(type);
        //...
    }
    public void InitilizeReportsGeneric<T>() where T : IReportDocument, new() {
        T reportDocument = new T();
        //...
    }
} 
```

请注意，这`T reportDocument = new T()`等于，`Activator.CreateInstance(type)`因为它只是编译器语法糖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:43:20.717

**[您可以使用Type.GetType(string typeName)](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)**将字符串转换为类型：

```
Type intType = Type.GetType("System.Int32"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:44:13.133

您可以从字符串创建类的实例，如下所示：

```
Type reportType = Type.GetType("ClassName.Including.Namespace");
IReportDocument report = (IReportDocument)Activator.CreateInstance(reportType); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:45:34.453

您可以稍微修改一下代码并改用反射：

```
static void Main(string[] args)
{
    ArrayList ReportsTypes = new ArrayList();
    ReportsTypes.Add(typeof(AgentPPL));

    foreach (Type t in ReportsTypes)
    {
        InitilizeReports(t);
    }

}

static void InitilizeReports(Type t)
{
    var r = Activator.CreateInstance(t);
    AgentPPL rr = new AgentPPL();
    IReportDocument rd = (IReportDocument)r;
    rd.DocumentName = "SomeReport";
    ExportReport(rd);
} 
```

# cocoa - Cocoa 的开源地图框架

> ID：11634425
> 
> 赞同：3
> 
> 时间：2012-07-24T15:39:17.457
> 
> 标签：cocoa, maps, openstreetmap

我一直在寻找用于 Open Street Map 的可可框架几个小时，但没有成功。有没有可可的开源地图框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T15:59:52.577

可悲的是，您没有指出什么样的框架（地图查看，地图渲染，数据处理......），许可证，......目标C中似乎至少有一些地图查看小部件，这似乎是可可?
[http://wiki.openstreetmap.org/wiki/Frameworks](http://wiki.openstreetmap.org/wiki/Frameworks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T08:54:59.313

如果我理解正确，您希望将基于 OpenStreetMap 的交互式地图嵌入到原生 iOS 或 macOS 应用程序中。[OpenStreetMap Wiki 列出了iOS](https://wiki.openstreetmap.org/wiki/Apple_iOS#Maps)和[macOS](https://wiki.openstreetmap.org/wiki/MacOS#Maps)的地图框架。

一种选择是[Mapbox iOS SDK](https://www.mapbox.com/ios-sdk/)或[Mapbox macOS SDK](https://mapbox.github.io/mapbox-gl-native/macos/)。这些 SDK 的工作方式与 MapKit 非常相似，但它们是开源的。默认的 Mapbox Streets 样式，以及通过 提供的 Mapbox 设计的样式`MGLStyle`，都基于 OpenStreetMap 数据。在地图上画线最直接的方法是`MGLPolyline`在`MGLMapView`. 如果您想在标签下方添加一条线，就好像该线是地图的一部分，您可以创建一个`MGLShapeSource`包含 的`MGLPolylineFeature`，然后将`MGLLineStyleLayer`基于该形状源的一个添加到地图的样式中。

（全面披露：我为 Mapbox 工作，并在业余时间为 OpenStreetMap 做出贡献。）

# internet-explorer - 在 IE/Chrome 中的 WYSWYG 编辑器中删除图像？

> ID：11634426
> 
> 赞同：1
> 
> 时间：2012-07-24T15:39:19.247
> 
> 标签：internet-explorer, firefox, drag-and-drop, tinymce, wysiwyg

当我在 IE/Chrome 中的 WYSWYG 编辑器（在我的情况下为小号）中放置任何图像时，IE 似乎不支持它。当我在 WYSWYG 编辑器（包含在我的 html 页面中）中放置图像时，整个浏览器将重新定位到图像的 url（基本上它不会将图像粘贴到编辑器中，而是打开图像，就好像我将图像放在空的 IE 浏览器而不是编辑器中一样）？尽管在 Firefox 中，图像会正确嵌入到编辑器中。我无法弄清楚我是否设置了一些显式属性以使其像在 IE 中一样工作？我从前一天开始在谷歌上搜索，但还没有解决方案。

这是问题的简述。对于 in 和 out of issue，这里是链接[Tinymce Image drag and drop issue on Internet Explorer？](https://stackoverflow.com/questions/11629579/tinymce-image-drag-and-drop-issue-on-internet-explorer). 但现在看起来它是浏览器而不是编辑器的问题，但不确定？

**编辑：- 伙计们看起来它是 IE 而不是编辑器的问题。为了确保这一点，我在 Firefox 中打开了我的 gmail 并将图像拖放到电子邮件正文中，它正确嵌入。当我在 IE 中执行相同操作时，完整的浏览器会重新定位到图像的 url，而不是嵌入到 gmail 邮件正文中。现在我不知道我需要在我的代码中做哪些更改才能使其在 IE 中工作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:15:38.903

只有 IE10 允许通过拖放将图像上传到所见即所得的编辑器。

默认情况下，Firefox 将它们作为数据嵌入：（这对缩小页面大小不利，并且旧浏览器不理解），您需要添加额外的代码来在 Chrome 和 Safari 中处理它们。

# forms - 使用事件订阅者类添加实体字段类型以形成

> ID：11634434
> 
> 赞同：1
> 
> 时间：2012-07-24T15:39:35.410
> 
> 标签：forms, symfony

我正在做一些与这个食谱示例非常相似的事情[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html#adding-an-event-subscriber-to-a-form-class](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html#adding-an-event-subscriber-to-a-form-class)

主要区别在于我的字段类型是实体而不是文本类型。

所以我的字段订阅者 preSetData 方法如下所示：

```
public function preSetData(DataEvent $event)
{
    $data = $event->getData();
    $form = $event->getForm();

    if (null === $data) {
        return;
    }

    if(!$data->getIsCategorized()){

        $form->add(

            $this->factory->createNamed('categories', 'entity', array(
            'class' => 'My\PostBundle\Entity\Category',
            'property'     => 'name',
            'multiple'     => true,
            'label' => 'Category'
            )
            )
        );
    }
} 
```

这给出了以下错误

```
Class does not exist
500 Internal Server Error - ReflectionException 
```

如果我直接在我的表单类型中添加实体，`$builder->add('categories, 'entity', array(...`它可以正常工作

是否可以以这种方式使用字段事件订阅者将实体字段类型附加到表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:02:56.713

我遇到了同样的问题，实际上是因为**factory->createNamed()方法比 builder->** **add**方法有更多参数 。第三个参数不是选项数组，而是一个“数据”参数。

所以这是你应该做的：

```
 $form->add(

        $this->factory->createNamed('categories', 'entity', null, array(
        'class' => 'My\PostBundle\Entity\Category',
        'property'     => 'name',
        'multiple'     => true,
        'label' => 'Category'
        )
        )
    ); 
```

（在选项数组之前添加 null）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:46:50.323

无论您是在类型中附加字段还是通过事件侦听器/订阅者附加字段都应该没有区别。要么你在某个地方（可能）有一个小错误，要么这是一个错误，在这种情况下，你应该将它提交给[问题跟踪器](https://github.com/symfony/symfony/issues)。

# iphone - 在 iPhone 应用程序中保存和加载 UIImage

> ID：11634436
> 
> 赞同：1
> 
> 时间：2012-07-24T15:39:41.090
> 
> 标签：iphone, objective-c, load, uiimage, save

我正在为我的应用程序出了什么问题而头疼。我正在尝试保存和加载 UIImages，简单吧？似乎不是这样。

我有一个带有这些方法的类来保存、加载和删除具有唯一字符串的图像。就像我喜欢的那样，又好又简单。这是课程：

**imageSavedLoad.h：**

```
#import <Foundation/Foundation.h>

@interface imageSaveLoad : NSObject

- (void)saveImage:(UIImage*)image forKey:(NSString*)imageName;
- (void)removeImage:(NSString*)fileName;
- (UIImage*)loadImage:(NSString*)imageName;

@end 
```

**图像保存加载.m：**

```
#import "imageSaveLoad.h"

@implementation imageSaveLoad

//saving an image
- (void)saveImage:(UIImage*)image forKey:(NSString*)imageName
{
    NSData *imageData = UIImagePNGRepresentation(image);
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]];
    [fileManager createFileAtPath:fullPath contents:imageData attributes:nil];
    NSLog(@"image saved");
}

//removing an image
- (void)removeImage:(NSString*)fileName
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", fileName]];
    [fileManager removeItemAtPath: fullPath error:NULL];
    NSLog(@"image removed");
}

//loading an image
- (UIImage*)loadImage:(NSString*)imageName
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]];
    return [UIImage imageWithContentsOfFile:fullPath];
}

@end 
```

在我要保存、加载或删除图像的地方导入类：`#import "imageSaveLoad.h"`

然后我创建它的一个实例并调用所需的方法（这里我保存）：

```
imageSaveLoad *imgSL = [[imageSaveLoad alloc] init];
[imgSL saveImage:photoImgView.image forKey:@"yourPhoto"]; 
```

然后在我要检索图像的另一个视图/类中：

```
imageSaveLoad *imgSL = [[imageSaveLoad alloc] init];
yourImgView.image = [imgSL loadImage:@"yourPhoto"]; 
```

但`yourImgView`什么都不显示，空白。

那么我哪里错了？我检查了所有`IBOutlet`连接并且所有代码都被调用了。我使用的方法有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:08:32.583

保存图像时，请尝试替换此行：

```
 [fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; 
```

和

```
 [imageData writeToFile:fullpath atomically:YES]; 
```

# java - Play framework 2 - isAuthenticated in Java

> ID：11634437
> 
> 赞同：0
> 
> 时间：2012-07-24T15:39:43.133
> 
> 标签：java, authentication, playframework

在我的操作中，我想根据用户是否经过身份验证来呈现不同的视图（或者可能只显示其他一些 div）。

我应该做这样的事情：

```
public static Result index() {          
   if (Context.current().request().username().equals("")) {
        // user is NOT authenticated
        return ok(welcome.render());
    } else {
        // user is authenticated
        return ok(dashboard.render());
    }
} 
```

以及如何检查用户是否在视图中经过身份验证？我知道我可以使用 @Security.Authenticated(Secured.class) 注释，但事情是如何有条件的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:01:48.413

取决于您要达到的目标。如果您只需要确定用户是否登录，您可以在控制器类中使用您编写的内容，例如：

```
public static boolean loggedIn() {
        return (session().get("userId") != null);
    } 
```

然后在静态控制器方法中检查用户是否登录：

```
if (!loggedIn()) {
            return redirect(routes.Application.login());
        } 
```

请注意 session() 的使用，您可以通过它访问安全会话 cookie 的映射，并从那里获取用户 ID。如果你想实现更复杂的逻辑，例如。对于不同的用户群体采取不同的行动，那就另当别论了。

要么在缓存中使用经过身份验证的用户 id-s 的一些地图，然后在会话中验证 userId，无论它是否在地图中，或者你可以使用用户的某些属性（例如，一组 userRoles）并设置什么相应地可见。这些是我所知道的最明智的方式。

（这里是你如何使用控制器的 session() ： [Controller](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Controller.html)，[Session](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Http.Session.html)）

# iphone - 在 iPhone 上模拟发送的短信

> ID：11634439
> 
> 赞同：0
> 
> 时间：2012-07-24T15:39:44.567
> 
> 标签：iphone, ios, sms

由于在 iOS 5.1 上使用 Xcode 4.3 进行调试非常慢，因此在设备上启动/安装应用程序时，我使用启动速度更快的模拟器。（请参阅我关于此问题的问题[https://stackoverflow.com/questions/11541288/xcode-4-3-with-ios5-1-pauses-about-10secs-when-debug-starts-simulator-starts-i](https://stackoverflow.com/questions/11541288/xcode-4-3-with-ios5-1-pauses-about-10secs-when-debug-starts-simulator-starts-i)）

所以我需要做的就是这样的：

```
MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
picker.messageComposeDelegate = delegate;
NSString *s = @"1234567";
picker.recipients =[NSArray arrayWithObject: s];   
picker.body =smsTxt;
if (simulationMode) {
    MessageComposeResult result = MessageComposeResultSent;            <-----------
    [delegate messageComposeViewController:picker didFinishWithResult: result];
} else
    [delegate presentModalViewController:picker animated:YES]; 
```

现在的问题是，在 iOS 模拟器上执行时 MFMessageComposeViewController 不能被实例化并且总是产生 nil。

**有没有办法在 iOS 模拟器上创建另一个对象 MyOwnMFMessageComposeViewController，它与 MFMessageComposeViewController 兼容并且可以像 MFMessageComposeViewController 一样以相同的方法传递？**

像这样的东西：

```
 MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
    picker.messageComposeDelegate = delegate;
    NSString *s = @"1234567";
    picker.recipients =[NSArray arrayWithObject: s];   
    picker.body =smsTxt;
    if (simulationMode) {
        MyOwnMFMessageComposeViewController *mypicker = [[MFMessageComposeViewController alloc] init];
        mypicker.messageComposeDelegate = delegate;
        NSString *s = @"1234567";
        mypicker.recipients =[NSArray arrayWithObject: s];   
        mypicker.body =smsTxt;
        MessageComposeResult result = MessageComposeResultSent;   
        picker = (MFMessageComposeViewController) mypicker;          
        [delegate messageComposeViewController:picker didFinishWithResult: result];
    } else
        [delegate presentModalViewController:picker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:03:55.130

您正在寻找的东西称为“模拟对象”，通常用于测试驱动开发。基本上你所做的是创建一个 MFMessageComposeViewController 的子类。这个子类的工作方式与 mfmessagecomposeviewcontroller 完全相同，除了您还创建实例变量以显示发生了某些事情。

例如，当您的委托调用 messageComposeViewController:didFinishWithResult 时。模拟对象可能会存储结果和该方法已被触发的标志。请注意，这实际上不会发送任何内容，而只是告诉您委托已触发并且在真实对象上将起作用。

# c# - 使用 LINQ 通过单个查询获取外键表

> ID：11634440
> 
> 赞同：2
> 
> 时间：2012-07-24T15:39:57.253
> 
> 标签：c#, linq, entity-framework

我有以下两张表

```
Groups
- Id
- Name

Members
- Id
- GroupId
- Name 
```

我想显示一个组列表及其成员数。我可以获取所有组，然后使用 foreach 语句来计算成员数。但这是非常低效的。

有没有办法编写一个将在单个查询中返回成员计数的 LINQ 查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T15:47:56.563

您可以使用简单的 linq-to-entities 查询来完成。您可以将其投影为匿名类型，也可以创建自己的类来存储信息。

```
var query = from g in context.Groups
            join m in context.Members on g.Id equals m.GroupId into members
            select new 
            {
              Group = g,
              MemberCount = members.Count(),
            }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:56:13.903

如果存在外键关系，这不可行吗？

```
var q = context.Groups.Select(x => new { Group = x.Name, Count = x.Members.Count() } ); 
```

# c# - NullReferenceException 未处理 HttpWebResponse

> ID：11634441
> 
> 赞同：0
> 
> 时间：2012-07-24T15:39:58.640
> 
> 标签：c#, windows-phone-7.1, nullreferenceexception, windows-phone, httpwebresponse

我正在尝试从用户提供的 url 获取标头，并且在我尝试之前一切似乎都工作正常，`http://www.google.com`这给了我以下异常：

> System.NullReferenceException 未处理 Message=NotSupportedException StackTrace: at System.Net.Browser.OHWRAsyncResult.get_AsyncWaitHandle() at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) at System.Net.Browser.ClientHttpWebRequest.EndGetResponse( IAsyncResult asyncResult) 在 System.Net.Browser.ClientHttpWebRequest 的 Network_Monitor.Checks.URLCheckResults.RespCallback(IAsyncResult asynchronousResult)。<>c__DisplayClassa.b__8(Object state2) 在 System.Threading.ThreadPool.WorkItem.WaitCallback_Context(Object state) 在 System。 Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadPool.WorkItem.doWork(Object o) 在 System.Threading.Timer。戒指（）

调用堆栈：

```
System.Windows.dll!System.Net.Browser.AsyncHelper.BeginOnUI(System.Threading.SendOrPostCallback beginMethod, object state) + 0xc3 bytes 
System.Windows.dll!System.Net.Browser.ClientHttpWebRequest.EndGetResponse(System.IAsyncResult asyncResult) + 0x41 bytes 
Network Monitor.dll!Network_Monitor.Checks.URLCheckResults.RespCallback(System.IAsyncResult asynchronousResult) Line 55 + 0x3 bytes C#
System.Windows.dll!System.Net.Browser.ClientHttpWebRequest.InvokeGetResponseCallback.AnonymousMethod__8(object state2) + 0x1b bytes 
mscorlib.dll!System.Threading.ThreadPool.WorkItem.WaitCallback_Context(object state) + 0x18 bytes   
mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x63 bytes    
mscorlib.dll!System.Threading.ThreadPool.WorkItem.doWork(object o) + 0x47 bytes 
mscorlib.dll!System.Threading.Timer.ring() + 0x70 bytes 
```

我已经用谷歌搜索了几个小时来寻找解决方案，但现有的解决方案都不起作用。是什么导致它出现在 Google.com 而不是其他网站？

```
public void CheckURL(String URL)
{
    lblResults.Text = "Checking...";

    var wr = HttpWebRequest.Create(URL);
    wr.Method = "HEAD";

    IAsyncResult asyncResult = (IAsyncResult)wr.BeginGetResponse(RespCallback, wr);
}

private void RespCallback(IAsyncResult asynchronousResult)
{
    try
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
        using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult))
        {
            Dispatcher.BeginInvoke(() =>
                {
                    for (int i = 0; i < response.Headers.Count; ++i)
                    {
                        if (!lblResults.Text.Equals("Checking..."))
                        {
                            lblResults.Text += "\n";
                        }
                        else
                        {
                            lblResults.Text = "";
                        }

                        lblResults.Text += "Header Name:" + response.Headers.AllKeys[i] + ", Header value :" + response.Headers[response.Headers.AllKeys[i]];
                    }
                });
        }
    }
    catch (WebException ex)
    {
        if (((HttpWebResponse)ex.Response).StatusCode == HttpStatusCode.NotFound)
        {
            Dispatcher.BeginInvoke(() =>
            {
                lblResults.Text = "Page Not Found (404)";
            });
        }
        else
        {
            MessageBox.Show(ex.Message, "Program Name", MessageBoxButton.OK);
        }
    }
} 
```

异常发生在`using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult))`以下屏幕截图（右键单击并单击查看图像以查看大图）：

![异常图像](../Images/2ba3a6b4c50a7ab836098d5e2d94e137.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:42:30.357

> ME: It just ran for me perfectly using yahoo.com, google.com, and msn.com. The only difference between mine and your code was I ran the iteration outside of the Dispatcher. Any chance Google was hiccuping when you tried?
> 
> Gabriel: I don't know what to say. Create that as an answer and I'll reward you the +100 reputation.

# java - Android sqlite插入未插入

> ID：11634444
> 
> 赞同：5
> 
> 时间：2012-07-24T15:40:04.317
> 
> 标签：java, android, sql, sqlite, insert

我有这个小 gps 位置插入代码，但那不是插入到数据库中：

```
db.setVersion(1);
db.setLocale(Locale.getDefault());
db.setLockingEnabled(true);

final String gps = "CREATE TABLE IF NOT EXISTS GPS_Values ("
                + "id INTEGER PRIMARY KEY AUTOINCREMENT, Latitude float(10, 6), Longitude float(10, 6), cur_timestamp TIMESTAMP);";
db.execSQL(gps); 
```

和插入线：

```
// GPS
public class MyLocationListener implements LocationListener {
    public void onLocationChanged(Location loc) {
        loc.getLatitude();
        loc.getLongitude();

        ContentValues gps_values = new ContentValues();

        gps_values.put("Latitude", loc.getLatitude());
        gps_values.put("Longitutde", loc.getLongitude());

        try {
            db.beginTransaction();
            db.insert("GPS_Values", null, gps_values);
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        }

        String Text = "My current location is: " + "Latitude = "
                + loc.getLatitude() + "\nLongitude = " + loc.getLongitude();

        Toast.makeText(getApplicationContext(), Text, Toast.LENGTH_SHORT)
                .show();

    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Disabled",
                Toast.LENGTH_SHORT).show();
    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Enabled",
                Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

}// gps vége 
```

当试图获取位置时，一切正常，但插入。

我有与 tha 加速器类似的代码，并且工作正常。

请帮助我

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T15:43:47.607

尝试`insertOrThrow`改用 - 如果您的数据库约束不允许特定插入，它将引发异常，那么您将能够弄清楚。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T15:44:20.587

您要插入的列中有错字：

```
 gps_values.put("Longitutde", loc.getLongitude()); 
```

应该

```
 gps_values.put("Longitude", loc.getLongitude()); 
```

`insert()`如果发生错误，调用将返回 -1，但您没有检查返回值。相反，它通常更容易使用`insertOrThrow`，它会在错误时引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:47:17.457

您尝试插入“经度”，但您创建了“经度”字段

# c# - 从其他线程访问 HttpRuntime.Cache

> ID：11634445
> 
> 赞同：3
> 
> 时间：2012-07-24T15:40:07.440
> 
> 标签：c#, caching, httpruntime.cache, httpruntime

我有一个线程在我的 ASP.Net 后面运行。在这个线程中，我将数据放入缓存中，如下所示：

```
HttpRuntime.Cache.Insert("test", "test", null, DateTime.Today.AddHours(6), Cache.NoSlidingExpiration); 
```

在另一个线程（网页）上，我首先检查缓存是否包含任何数据，然后尝试从缓存中获取对象，如下所示：

```
 if (HttpRuntime.Cache.Count > 0) {
          var test = (string)HttpRuntime.Cache["test"];
 } 
```

**编辑：**每次我尝试做`var test = (string)HttpRuntime.Cache["test"];`缓存时都会变空（或者会删除对象，没有在缓存中测试多个对象）加上`var test`也是空的。这当然是当 HttpRuntime.Cache.Count 大于 0 时

哦，它没有给出任何例外或任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:22:34.410

您的代码中存在潜在的不一致，即**DateTime.Today.AddHours(6)**不起作用。你应该使用**DateTime.Now.AddHours(6)**

DateTime.Today 是当天开始`12:00 AM`，如果您的代码在`6:00 AM`显然 httpruntime 缓存不可用之后运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T17:23:35.433

.NET 中的 Cache 对象是线程安全的，因此不需要通过线程获取数据。您可以查看这篇文章：http: [//msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)。

调整您的持续时间：`DateTime.Now.AddHours(6)`

# http - 云中的 Web 应用程序，作为主要公司 URL 的子文件夹

> ID：11634446
> 
> 赞同：1
> 
> 时间：2012-07-24T15:40:08.190
> 
> 标签：http, azure, dns, cloud

是否可以在云中部署 Web 应用程序并对其进行配置，使其看起来像公司 URL 中的子文件夹。例如

```
www.mycompany.com  //main company web site
www.mycompany.com/products  // hits a web application in the cloud (azure for example) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:39:35.683

我不是 DNS 专家，但我认为您会发现将 products.mycompany.com 路由到您的 Windows Azure 网站比使用子文件夹更直接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:45:09.483

考虑到使用子域和 CNAME 更容易，我认为您正在寻找的是[IIS URL Rewrite 模块](http://www.iis.net/download/urlrewrite)。以下基本规则取自[此 IIS 论坛的主题](http://forums.iis.net/t/1168364.aspx)，描述了类似的情况并给出了示例规则。您可以将它们用作基础：

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="CanonicalHostNameRule">
                <match url="(.+)/(.*)" />
                <conditions>
                    <add input="{HostToRedirect:{HTTP_HOST}/{R:1}}" pattern="(.+)" />
                </conditions>
                <action type="Redirect" url="http://{C:1}/{R:2}" />
            </rule>
        </rules>
        <rewriteMaps>
            <rewriteMap name="HostToRedirect">
                <add key="domain.com/mail" value="mail.domain.com" />
                <add key="domain.net/mail" value="mail.domain.net" />
            </rewriteMap>
        </rewriteMaps>
    </rewrite>
</system.webServer> 
```

您也可以查看[这个 SO question](https://stackoverflow.com/questions/632360/how-to-redirect-subfolder-to-query-in-mod-rewrite-for-iis-7-0)，因为它提供了一些关于您要解决的问题的指南。

**更新解决方案**

这完全可以通过[IIS](http://www.iis.net/download/urlrewrite)的 URL 重写模块和[ARR 模块](http://www.iis.net/download/ApplicationRequestRouting)来实现。然后您需要设置一个反向代理规则，它将所有 /products 请求重写到云中相应的 Web 应用程序。您的规则将如下所示：

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="ReverseProxyInboundRule1" patternSyntax="ECMAScript" stopProcessing="true">
                <match url="(^products)" />
                <conditions>
                    <add input="{CACHE_URL}" pattern="^(https?)://" />
                </conditions>
                <action type="Rewrite" url="{C:1}://myvompany.cloudapp.net/" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

您可以稍后对其进行调整以满足您的确切需求，但是通过上面的示例，我刚刚实现了您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:52:47.493

[IIS 支持重定向](http://technet.microsoft.com/en-us/library/cc732969%28v=ws.10%29)

我也喜欢 David 关于将其设为网站并使用 cname 映射 products.mycompany.com 的回答

你可以两者都做。将 www.mycompany.com/products 重定向到 products.mycompany.com

# android - 在 Android 上添加日历

> ID：11634451
> 
> 赞同：1
> 
> 时间：2012-07-24T15:40:28.017
> 
> 标签：android, calendar

我想为我的应用程序添加一个新日历（以将其与其他事件分开），就像 GMail 一样。

如果没有办法，当应用程序被卸载时，我们如何从日历中删除我们的事件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:47:26.673

日历的合同可以在[这里找到。](http://developer.android.com/reference/android/provider/CalendarContract.Calendars.html)但是，您需要帐户名称和类型才能插入新日历。我猜 gmail 可以做到这一点，因为它有你的谷歌帐户信息——我不确定你的应用是否能够做到这一点。

至于您的第二个问题，[这是日历事件的规范](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)。您只需要知道`_ID`数据库中的事件就可以删除它（您应该能够相当容易地获得它）。

> 事件可以通过 _ID 作为 Uri 上的附加 id 或使用任何标准选择来删除。如果使用附加的 id，则不允许选择。有两个版本的删除：作为应用程序和作为同步适配器。应用删除将在事件上设置已删除列并删除该事件的所有实例。同步适配器删除将从数据库和所有关联数据中删除事件。

# node.js - Node.js res.send 不工作

> ID：11634455
> 
> 赞同：2
> 
> 时间：2012-07-24T15:40:54.927
> 
> 标签：node.js, express

在我的 index.js 中，我有一个导出函数，它应该在按下提交按钮时通过 ajax 将数据发送回客户端。但是，当用户按下提交时，数据似乎在数据被修改之前就被发送了。再次按下提交时，它会发送先前修改的数据，就像单击提交按钮仅发送“先前”设置的数据一样。这是我的代码：

```
 var tabledata = getRecordFromDatabase(key);
        if(tabledata.length === 0)
            tabledata = 'There is no matched record in the database';
        res.contentType('text/html');
        res.send({'matched':tabledata}); 
```

所以为了说明错误：填写表格后单击提交并收到消息“数据库中没有匹配的记录”。我第二次点击提交，没有更改我刚刚填写的表格中的任何内容。这次记录数据实际上是发给我的。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:57:32.307

如果您正在做的任何事情`getRecordFromDatabase`都是异步且非阻塞的，那么 node.js 的行为就应该如此。Node.js 是非阻塞的——它不会停止并等待进程完成（除非这些进程被故意写入阻塞，这通常在 node.js 中被避免）。这是有益的，因为它使服务器可以自由地接受新请求并一次处理许多请求。

如果您的数据库调用是异步的，那么您不会在`res.send()`. 这就是为什么您的第一次提交返回空。很可能，当您第二次点击提交时，您的数据库调用终于返回了，这就是您得到结果的原因。

很难为您的问题提供基于代码的答案，因为您抽象出了 DB 调用方法中发生的事情。但通常情况下，异步调用会像这样：

```
getRecordFromDatabase(key, function(err, data){
    if(data.length === 0)
        data = 'There is no matched record in the database';
    res.contentType('text/html');
    res.send({'matched':data});
}); 
```

这样，您将传递一个函数以作为异步方法的回调执行 - 当异步调用完成时，它执行回调，然后`res.send()`使用适当的数据执行回调。

# php - PHP字符串：有没有办法计算字符串前面的空格？

> ID：11634458
> 
> 赞同：0
> 
> 时间：2012-07-24T15:41:04.510
> 
> 标签：php, html

我有一些文本，我将它爆炸（）编辑到一个数组中。此文本的每一行都是一行。我正在对它们进行很多操作，但这并不重要。我遇到的问题是，当我打印每一行时，每行前面的空格都没有显示。

但如果我这样做

```
if(substr($array[$i], 0, 1)!=" ") { ... 
```

这似乎有效。所以我在打印行时手动添加空格。知道为什么会发生这种情况吗？

无论如何，我想找到一个计算字符串前面的空格的函数（如果有的话）。我可以使用PHP中的函数组合或其他东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T15:43:25.320

计算中的空格`$string`：

```
$nbSpaces = strlen($string) - strlen(ltrim($string)); 
```

# iphone - VerificationController 使用 uniqueIdentifier

> ID：11634460
> 
> 赞同：1
> 
> 时间：2012-07-24T15:41:08.530
> 
> 标签：iphone, ios, security, uniqueidentifier

我正在尝试修补Apple 发现的[这个](http://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html)安全漏洞。只是，他们提供的示例代码（VerificationController）使用了这一行：

```
[UIDevice currentDevice].uniqueIdentifier 
```

已被弃用，并且应用商店已拒绝应用。知道这是否还可以吗？或者这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T00:49:11.273

Apple 更新了示例代码，删除了使用 UDID 的行。

[iOS 上的应用内购买收据验证](https://developer.apple.com/library/ios/releasenotes/StoreKit/IAP_ReceiptValidation/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:07:19.863

# UDID 与 UUID

据我了解，Apple 不希望开发人员再访问 UDID（唯一设备标识符），因为它不在应用程序的[沙箱](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html)中。

想一想用户获得新的 iOS 设备（具有不同的 UDID）的情况。仅仅因为有新设备并不一定意味着有新用户。此外，如果某人获得了其他人以前使用过的设备，我们不想假设因为我们拥有相同的设备，所以必须是同一个用户使用它。

Apple 建议为您的应用程序使用 UUID（通用唯一标识符）。Apple 之前允许您使用 UDID 的唯一原因是因为他们还没有实现 UUID 或者没有考虑到上述情况（据我所知）。UUID 是为您要跟踪的对象（例如用户）生成的。

基本上，**Apple 的心态是您应该跟踪用户**（或其他实例）**，而不是设备。**

* * *

## 生成 UUID

要生成 UUID，请尝试将以下内容作为类方法包含在内：

```
+ (NSString *)GetUUID
{
  CFUUIDRef uuidReference = CFUUIDCreate(kCFAllocatorDefault);
  NSString *theUUID = [(NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidReference) autorelease];
  CFRelease(uuidReference);
  return theUUID;
} 
```

根据我的经验，我在方法中调用了这个方法，`init`并将结果存储`NSString`为刚刚创建的实例的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:47:48.690

~~您从哪里听说应用程序因为使用它而被拒绝？也许他们恶意使用它，但它是一个公共 API。~~ 另外，请查看您链接到的页面上的注释。

> 注意：此清单使用符号 kSecTrustInfoExtendedValidationKey 和 SecTrustCopyInfo，它们不是公共 API。您的应用可以将它们用于此特定目的。

如果他们甚至愿意让您为此目的使用私有 API，我怀疑他们会关心公共 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:10:19.170

Apple 对 UDID 的问题始终是他们认为它是私人信息，因此他们拒绝将其发送到例如服务器的应用程序，而无需事先征得许可。如果您只是在本地使用它，我认为您不会遇到麻烦。

# categories - Wordpress - 显示投资组合类别

> ID：11634464
> 
> 赞同：1
> 
> 时间：2012-07-24T15:41:15.273
> 
> 标签：categories, wordpress

我正在使用 WordPress 网站，并且客户希望在页脚中显示类别列表。不幸的是，它显示为空，因为他没有帖子并将类别设置为他希望人们能够点击的投资组合项目。

那么，如何在小部件中显示投资组合类别而不是帖子类别？

谢谢，

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:35:59.333

我能想到的最简单的方法可能是在不必更改任何主题文件的情况下获得所需的结果：

1.  登录到您的 Wordpress 仪表板
2.  导航到外观->菜单
3.  创建一个新菜单，并（如果适用）通过单击屏幕选项（页面右上角）并勾选您的投资组合的自定义类别和/或自定义帖子类型，为您的菜单启用自定义分类
4.  一旦您想要的所有项目都在您的自定义菜单中，请保存它。
5.  导航到外观->小部件
6.  将自定义菜单小部件添加到您希望项目出现的侧边栏中
7.  选择您刚刚创建的自定义菜单，然后保存

在处理高级主题时，远离他们的代码并避免完全改变任何东西总是最安全的，所以首先尝试这种方法。否则，您可能不得不亲自动手并更改一些代码或联系主题开发人员。

# haskell - 使用 ghci 导入比率模块

> ID：11634466
> 
> 赞同：3
> 
> 时间：2012-07-24T15:41:28.253
> 
> 标签：haskell, ghc, hugs, rational-numbers

我正在学习 Haskell 并尝试使用精确的有理数。我有以下简单的 Haskell 代码：

```
import Ratio

x :: Rational
x = 5 % 2 
```

当我在 WinHugs 中加载它时，一切都很好。但是，当我在 ghci 中加载它时，我收到以下错误消息：

> E:\devel\src\haskell\rational.hs:1:8:
> 
> ```
> Could not find module `Ratio'
> It is a member of the hidden package `haskell98-2.0.0.1'.
> Use -v to see a list of the files searched for. 
> ```
> 
> 失败，加载模块：无。

为什么我会收到此错误？

此外，谷歌在 Haskell 中给我的所有有理数的点击似乎都已经过时了。当前用有理数进行精确算术的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T15:43:42.147

该`haskell98`库在 Haskell 平台中已弃用。您应该适应`haskell2010`标准，该标准将有理数定义为[`Data.Ratio`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ratio.html).

# silverlight - Silverlight、XAML、DataGrid 不自动调整大小，没有自动滚动条

> ID：11634467
> 
> 赞同：0
> 
> 时间：2012-07-24T15:41:29.653
> 
> 标签：silverlight, xaml, datagrid

谁能告诉我为什么这个例子中的数据网格在超过包含它的 Grid.Row 的边界时会被切断？这是您可以在 VS 2010 'Silverlight Application' 模板中使用的 xaml 和代码隐藏。提前致谢。

```
<UserControl
x:Class="SilverlightApplication3.MainPage"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
mc:Ignorable="d" >

<Grid>

    <Border>

        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- header -->
            <Border Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="40" >
            </Border>

            <!-- employee category selection -->
            <Grid Grid.Row="1" Margin="10">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Category:" Margin="0,0,10,0" VerticalAlignment="Center" />
                        <ComboBox ItemsSource="{Binding EmployeeTypes}" SelectedItem="{Binding EmployeeType, Mode=TwoWay}" MinWidth="100" />
                    </StackPanel>
                    <Border BorderBrush="Black" BorderThickness="10" Height="2" Margin="0,10,0,0" ></Border>
                </StackPanel>
            </Grid>

            <!-- content -->
            <Grid Grid.Row="2">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- daily employee grid -->
                <Grid Grid.Row="0" Visibility="Visible" Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">

                        <TextBlock Text="Category Type:" />
                        <ComboBox ItemsSource="{Binding Categories}"
                              SelectedItem="{Binding Category, Mode=TwoWay}"
                              DisplayMemberPath="Name" HorizontalAlignment="Left" Width="250">
                        </ComboBox>

                        <TextBlock Text="Category Types:" Margin="0,10,0,0" />
                        <sdk:DataGrid x:Name="dataGrid" AutoGenerateColumns="True"
                                          HorizontalAlignment="Left" VerticalAlignment="Stretch" MinWidth="250" VerticalScrollBarVisibility="Visible" >
                            <sdk:DataGrid.ColumnHeaderStyle>
                                <Style TargetType="sdk:DataGridColumnHeader">
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Style>
                            </sdk:DataGrid.ColumnHeaderStyle>
                        </sdk:DataGrid>

                    </StackPanel>

                </Grid>

            </Grid>

            <!-- buttons -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0" >

                <Button Command="{Binding SaveCommand}"
                        Width="80" HorizontalContentAlignment="Center" Margin="0,0,2,0">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="../Images/Approve24x24.png" Height="24" Width="24"/>
                        <TextBlock Text="Save" VerticalAlignment="Center" Margin="2"/>
                    </StackPanel>
                </Button>

                <Button Command="{Binding CancelCommand}" 
                        Width="80" HorizontalContentAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="../Images/Delete24x24.png" Height="24" Width="24"/>
                        <TextBlock Text="Cancel" VerticalAlignment="Center" Margin="2"/>
                    </StackPanel>
                </Button>

            </StackPanel>

        </Grid>
    </Border>
</Grid> 
```

和代码隐藏：

```
using System.Collections.Generic; 
```

使用 System.Windows.Controls；

命名空间 SilverlightApplication3 { 公共部分类 MainPage : UserControl { 公共 MainPage() { InitializeComponent();

```
 List<string> testItems = new List<string>();

        for (int i = 0; i < 50; i++)
        {
            testItems.Add(string.Format("Item Number {0}", i.ToString()));
        }

        this.dataGrid.ItemsSource = testItems;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:31:41.003

您使用 StackPanel 来显示一些元素和数据网格。所以这里的datagrid不受任何高度的限制，而且stackpanel的高度的父网格是Auto。所以没有你让网格占据固定大小的地方。

我在网格中修改了您的代码。

```
 <!-- content -->
            <Grid Grid.Row="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />                      
                    <RowDefinition Height="Auto" />                     
                </Grid.RowDefinitions>  
                <!-- daily employee grid -->
                <Grid Grid.Row="0" Visibility="Visible" Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="28" />
                        <RowDefinition Height="*"/>                     
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel>
                        <TextBlock Text="Category Type:" />
                        <ComboBox ItemsSource="{Binding Categories}"
                          SelectedItem="{Binding Category, Mode=TwoWay}"
                          DisplayMemberPath="Name" HorizontalAlignment="Left" Width="250">
                        </ComboBox>

                    </StackPanel>
                    <TextBlock Text="Category Types:" Margin="0,10,0,0" Grid.Row="1" />
                    <sdk:DataGrid x:Name="dataGrid" AutoGenerateColumns="True" Grid.Row="2" ScrollViewer.VerticalScrollBarVisibility="Visible" Margin="10"
                                      HorizontalAlignment="Left" VerticalAlignment="Top" MinWidth="250" VerticalScrollBarVisibility="Visible" >
                        <sdk:DataGrid.ColumnHeaderStyle>
                            <Style TargetType="sdk:DataGridColumnHeader">
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </sdk:DataGrid.ColumnHeaderStyle>
                    </sdk:DataGrid>
                </Grid>
            </Grid> 
```

这应该会给你预期的结果。

# google-apps-script - Google Apps 脚本联系人服务错误

> ID：11634470
> 
> 赞同：1
> 
> 时间：2012-07-24T15:41:36.207
> 
> 标签：google-apps-script, google-docs-api, google-contacts-api

首先，我知道，有一个[类似的问题](https://stackoverflow.com/questions/10954075/unexpected-exception-upon-serializing-continuation)，但它只是相似而不是相同:)

此脚本在电子表格中导入 Google Contacts -> [Contacts Sevices](https://developers.google.com/apps-script/service_contacts)。

```
function onOpen()
{
  var menuItems = [{name: "Gmail Contact Import", functionName: "getContacts"}];
  SpreadsheetApp.getActiveSpreadsheet().addMenu("import", menuItems);
}

function getContacts()
{
  var groupName = "MyGroup";
  var contacts;
  var sheet = SpreadsheetApp.getActiveSheet();

  if (groupName) {
    var contactGroup = ContactsApp.findContactGroup(groupName);

    if (contactGroup) {
      contacts = contactGroup.getContacts();
    }
  } 
  else {
    contacts = ContactsApp.getAllContacts();
  }

  if (!contacts) {
    Browser.msgBox("no contacts found!");
    return;
  }  

  sheet.clear();

  sheet.getRange("A1").setValue("forename");
  sheet.getRange("B1").setValue("lastname");
  sheet.getRange("C1").setValue("private email");
  sheet.getRange("D1").setValue(groupName + " email");
  sheet.getRange("E1").setValue("phone");
  sheet.getRange("F1").setValue("mobile");
  sheet.getRange("G1").setValue("street");
  sheet.getRange("H1").setValue("zip");
  sheet.getRange("I1").setValue("city");
  sheet.getRange("J1").setValue("group");
  sheet.getRange("K1").setValue("date1");
  sheet.getRange("L1").setValue("date2");
  sheet.getRange("M1").setValue("date3");
  sheet.getRange("N1").setValue("date4");

  for ( var i = 0; i < contacts.length; i++) {
    var addressArray = new Array();
    addressArray = contacts[i].getAddresses(ContactsApp.Field.HOME_ADDRESS);
    var addressArrayLength = addressArray.length;    
    for ( var ii = 0; ii < addressArrayLength; ii++ ) {
      var address = addressArray[ii].getAddress();
      var addressSplit = address.split(/\r\n|\r|\n/);
      var street = addressSplit[0];
      var city = addressSplit[1].split(" ")[0];
      var zip = addressSplit[1].split(" ")[1];
    }
    var homePhone = contacts[i].getHomePhone().replace("0049-","0").toString();
    var mobilePhone = contacts[i].getMobilePhone().replace("0049-","0").toString();
    var fireMail = ""
    var privateMail = "";
    var mailArray = new Array();
    mailArray = contacts[i].getEmails(ContactsApp.Field.HOME_EMAIL);
    var mailArrayLength = mailArray.length;    
    for ( var ii = 0; ii < mailArrayLength; ii++ ) {
      privateMail = contacts[i].getEmails(ContactsApp.Field.HOME_EMAIL)[ii].getAddress();
    }

    if (!privateMail)
    {
      mailArray = contacts[i].getEmails(ContactsApp.Field.WORK_EMAIL);
      mailArrayLength = mailArray.length;

      for ( var ii = 0; ii < mailArrayLength; ii++ ) {
        privateMail = contacts[i].getEmails(ContactsApp.Field.WORK_EMAIL)[ii].getAddress();
      }
    }

    mailArray = contacts[i].getEmails(groupName);
    mailArrayLength = mailArray.length;

    for ( var ii = 0; ii < mailArrayLength; ii++ ) {
      fireMail = contacts[i].getEmails(groupName)[ii].getAddress();
    }

    sheet.getRange(1*i+2, 1, 1, 1).setValue(contacts[i].getGivenName());
    sheet.getRange(1*i+2, 2, 1, 1).setValue(contacts[i].getFamilyName());
    sheet.getRange(1*i+2, 3, 1, 1).setValue(privateMail);
    sheet.getRange(1*i+2, 4, 1, 1).setValue(fireMail);
    sheet.getRange(1*i+2, 5, 1, 1).setValue(homePhone);
    sheet.getRange(1*i+2, 6, 1, 1).setValue(mobilePhone);
    sheet.getRange(1*i+2, 7, 1, 1).setValue(street);
    sheet.getRange(1*i+2, 8, 1, 1).setValue(zip);
    sheet.getRange(1*i+2, 9, 1, 1).setValue(city);

    var groups = contacts[i].getContactGroups();

    for ( var j = 0; j < groups.length; j++) {
      var name = groups[j].getName();
      switch (name) {
        case "group1":
          sheet.getRange(1*i+2, 10, 1, 1).setValue(1);
          break;
        case "group2":
          sheet.getRange(1*i+2, 10, 1, 1).setValue(2);
          break;
        case "group3":
          sheet.getRange(1*i+2, 10, 1, 1).setValue(3);
          break;
        case "group4":
          sheet.getRange(1*i+2, 10, 1, 1).setValue(4);
          break;
        case "group5":
          sheet.getRange(1*i+2, 10, 1, 1).setValue(5);
          break;
        default:
          break;
      }

      if (name.indexOf("datetrigger1") > -1)
      {
        var dateArray = contacts[i].getDates("date1");
        var dateArrayLength = dateArray.length;        
        for ( var ii = 0; ii < dateArrayLength; ii++ ) {
          var date = contacts[i].getDates("date1")[ii];
          var day = date.getDay();
          var month = date.getMonth();
          var year = date.getYear();
          sheet.getRange(1*i+2, 11, 1, 1).setValue(day.toString() + "." + month.toString() + "." + year.toString());
        }
        sheet.getRange(1*i+2, 11, 1, 1).setBackgroundColor('green');
      }

      if (name.indexOf("datetrigger2") > -1)
      {
        var dateArray = contacts[i].getDates("date2");
        var dateArrayLength = dateArray.length;        
        for ( var ii = 0; ii < dateArrayLength; ii++ ) {
          var date = contacts[i].getDates("date2")[ii];
          var day = date.getDay();
          var month = date.getMonth();
          var year = date.getYear();
          sheet.getRange(1*i+2, 12, 1, 1).setValue(day.toString() + "." + month.toString() + "." + year.toString());
        }
        sheet.getRange(1*i+2, 12, 1, 1).setBackgroundColor('green');
      }

      if (name.indexOf("datetrigger3") > -1)
      {
        var dateArray = contacts[i].getDates("date3");
        var dateArrayLength = dateArray.length;        
        for ( var ii = 0; ii < dateArrayLength; ii++ ) {
          var date = contacts[i].getDates("date3")[ii];
          var day = date.getDay();
          var month = date.getMonth();
          var year = date.getYear();
          sheet.getRange(1*i+2, 13, 1, 1).setValue(day.toString() + "." + month.toString() + "." + year.toString());
        }
        sheet.getRange(1*i+2, 13, 1, 1).setBackgroundColor('green');
      }

      if (name.indexOf("datetrigger4") > -1)
      {
        var dateArray = contacts[i].getDates("date4");
        var dateArrayLength = dateArray.length;
        if (dateArrayLength > 0) {
          for ( var ii = 0; ii < dateArrayLength; ii++ ) {
            var date = contacts[i].getDates("date4")[ii];
            var day = date.getDay();
            var month = date.getMonth();
            var year = date.getYear();
            sheet.getRange(1*i+2, 14, 1, 1).setValue(day.toString() + "." + month.toString() + "." + year.toString());
          }
          sheet.getRange(1*i+2, 14, 1, 1).setBackgroundColor('green');
        }
      }
    }
  }

  Browser.msgBox(contacts.length + " contacts imported.");
} 
```

工作正常，但在“导入 xy 联系人”消息后，我收到以下错误消息：

> 序列化延续时出现意外异常

我无法弄清楚出了什么问题。

**2012 年 7 月 26 日更新：**

我还有一个错误：

> Dienst-Fehler：ContactsApp：临时问题 - 请稍后再试并考虑使用批处理操作。用户超出配额。（泽勒96）

这是关于这一行的：`var groups = contacts[i].getContactGroups();`

我已经稍后再试了......错误仍然存​​在。我总是在我的列表中得到结果。该错误发生在循环的各种迭代之后。

**2012 年 7 月 27 日更新：**

我`Utilities.sleep(2000);`在之后添加`var groups = contacts[i].getContactGroups();`。这已经足够了。没有那么多联系方式...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T22:58:10.757

我经常收到这样的错误消息。这就是我所做的：

1.  这可能是 msgBox 调用的结果。替换 Browser.msgBox("..."); 与 Logger.log("..."); 然后，您可以在脚本编辑器 > 查看 > 日志中查看结果...

2.  该脚本可能需要无法在电子表格 UI 中触发的授权。通过脚本编辑器 > 运行 > getContacts 运行脚本。

希望这可以帮助。

2012 年 7 月 27 日更新：

针对您后来关于配额错误的问题：

谷歌有几层防御拒绝服务，其中之一是用户配额。此处列出了一些 GAS 服务配额[https://script.google.com/dashboard](https://script.google.com/dashboard)（转到配额限制选项卡），但并非所有配额都公开。例如，您的错误不适用于那里列出的配额。

另一层是速率限制，如果您在短时间内（例如 1 秒）进行太多次 API 调用，您可能会达到阈值，这就是我认为发生在您身上的情况。好的做法是使用指数退避。谷歌表示你应该使用指数退避执行最多 5 次重试，在大约 1、2、4、8 秒和 16 秒的延迟后重试，总共大约 32 秒，然后你放弃不可恢复的错误。请参阅：[https ://developers.google.com/google-apps/documents-list/#implementing_exponential_backoff](https://developers.google.com/google-apps/documents-list/#implementing_exponential_backoff)

我有一个 GASRetry 库函数，用于自动执行指数退避。我在[这里](https://gist.github.com/2700284)维护它，它也可用作公共图书馆项目密钥：MGJu3PS2ZYnANtJ9kyn2vnlLDhaBgl_dE

以您的代码行为例，您可以将其包装在 GASRetry 调用中，如下所示：

```
//var groups = contacts[i].getContactGroups();
var groups = GASRetry.call(function(){contacts[i].getContactGroups()}); 
```

这应该可以克服任何短期利率限制。让我们知道你的进展。

# apache-flex - 如何调试flex中的事件？

> ID：11634474
> 
> 赞同：0
> 
> 时间：2012-07-24T15:41:54.880
> 
> 标签：apache-flex, debugging, events

我是 flex 新手，并且使用小型开源 UI 库[ReCoral](https://github.com/xiaotie/RedCoral)。在我的测试中，我使用它的`Application`类作为 mxml 的根，并且它有一个点击处理程序。

```
<?xml version="1.0" encoding="utf-8"?>
<common:Application
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:common="geb.common.*" width="500" height="500"
    xmlns:controls="geb.controls.*"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    click="hello()">

    <fx:Script>
        <![CDATA[
            private function hello(): void {
                trace("world");
            }
        ]]>
    </fx:Script>

    <controls:Label text="Click Me" height="100" width="100" click="hello()" />
</common:Application> 
```

可以看到代码非常简单。

但是当我单击标签或应用程序时，该`hello()`方法似乎从未被调用过。我试图`trace("world")`在调试模式下在该行上添加一个断点，它从未被触发过。

由于作者比较忙，又是flex新手，不知道怎么调试这个问题。

1.  有什么方法可以监听任何点击事件并记录信息？
2.  我应该阅读任何有用的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:11:28.043

试试这个。您需要添加事件类型

```
<?xml version="1.0" encoding="utf-8"?>
<common:Application
xmlns:fx="http://ns.adobe.com/mxml/2009" 
xmlns:common="geb.common.*" width="500" height="500"
xmlns:controls="geb.controls.*"
xmlns:mx="library://ns.adobe.com/flex/mx"
click="hello()">

<fx:Script>
    <![CDATA[
        private function hello(event:MouseEvent): void {
            trace("world");
        }
    ]]>
</fx:Script>

<controls:Label text="Click Me" height="100" width="100" click="hello(event)" />
</common:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:28:46.963

我找到了原因，`Label`在 RedCoral 中设置`mouseEnabled`为`false`in`inited`方法：

```
override protected function init():void
{
    super.init();
    mouseEnabled = false;
    mouseChildren = false;
} 
```

见：[https ://github.com/xiaotie/RedCoral/blob/master/src/geb/controls/Label.as#L112](https://github.com/xiaotie/RedCoral/blob/master/src/geb/controls/Label.as#L112)

所以我们应该启用它：

```
<controls:Label text="Click Me" height="100" width="100" click="hello()" mouseEnabled="true" /> 
```

# ios - RTP iPhone 相机 - 如何在写入时读取 AVAssetWriter 文件？

> ID：11634476
> 
> 赞同：7
> 
> 时间：2012-07-24T15:41:59.373
> 
> 标签：ios, rtsp, rtp, avassetwriter, wowza

我正在尝试将 RTSP/RTP iPhone 相机捕获流式传输到 Wowza 服务器。

Apple 的 API 不允许直接访问 H264 编码的帧，而只允许您将其写入容器“.mov”文件中。

无论哪种方式，在 AVAssetWriter 完成写入之前，我都无法访问该文件内容，这不允许我流式传输实时摄像机捕获。

我尝试使用命名管道访问它，以便实时访问文件的内容，但没有成功 - AVAssetWriter 不会写入现有文件。

有谁知道该怎么做？

谢谢！

**编辑**：从 iOS 8 开始，编码器和解码器具有 API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T16:24:56.017

您可以使用 AVCaptureVideoDataOutput 在相机运行时处理/流式传输每一帧，并使用 AVAssetWriter 同时写入视频文件（附加视频数据输出队列的每一帧）。

另请参阅 [同时 AVCaptureVideoDataOutput 和 AVCaptureMovieFileOutput](https://stackoverflow.com/questions/3968879/simultaneous-avcapturevideodataoutput-and-avcapturemoviefileoutput) 以及[可以同时使用 AVCaptureVideoDataOutput 和 AVCaptureMovieFileOutput 吗？](https://stackoverflow.com/questions/4944083/can-use-avcapturevideodataoutput-and-avcapturemoviefileoutput-at-the-same-time)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:49:21.157

到目前为止，我发现唯一可行的解​​决方案是**在没有声音**
的情况下 进行捕获，然后将文件写入您定义的位置。 否则，它可能会写入您无法到达的临时位置。

 **这是 Apple 捕获视频的示例：[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112-Intro-DontLinkElementID_2)
您需要删除声道。

如果有人有更好的方法，请在此处发布。**

# c# - 有什么方法可以在 c# 中从网络摄像头获取 3D 图像？

> ID：11634477
> 
> 赞同：-1
> 
> 时间：2012-07-24T15:42:01.370
> 
> 标签：c#, image-processing, computer-vision

**我想计算图像的深度。这样我就可以从图像中消除远处的物体。**

> 在 C# 中是否有任何方法可以使用单摄像头这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:48:19.600

[该网站](https://sites.google.com/site/webcamlibrarydotnet/winfrom-and-csharp-sample-code-and-download)展示了如何使用 C# 获取网络摄像头图像。但是，就像照片一样，它是平坦的，因此无法区分距相机不同距离的物体。一般来说，只有一台相机和一张照片/图像，你想要的是不可能的。

使用一两个相机拍摄两张图像/照片之间有一定距离，您可以区分深度（就像使用两只眼睛一样）。然而，这需要非常复杂的数学来首先识别物体，然后确定它们与相机的大致距离。

[Kinect 使用红外摄像头](http://blogs.howstuffworks.com/2010/11/05/how-microsoft-kinect-works-an-amazing-use-of-infrared-light/)创建低分辨率图像，以测量与摄像头前方物体的距离，以便将玩家与背景区分开来。我在某处读到 Kinect 相机可以连接到普通计算机，但我不知道您需要的软件或数学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:06:42.267

如果你用与场景成一定角度的激光照射一条直线，直线的位移将与物体的高度完全对应。这仅给出沿单条线的高度，具体取决于相机的分辨率。如果您需要完整的 3D 扫描，则需要移动激光并拍摄多张照片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-22T02:05:42.357

当流式视频文件进入时，每一帧都需要 ac# 参考。在流式传输开始时，对象需要转头并旋转，以便可以从对象中捕获一系列测量值。然后可以将其馈送到第二个摄像头，例如 unity 3d 虚拟摄像头，该摄像头将 3d 图像转置到流图像的顶部。有很多手机应用程序可以用一系列静止帧捕捉 3d 对象，我在我的 Galaxy s6 上也有一个，galaxy s6 及更高版本的相机中有一个深度芯片，他们卖给了我的手机，这用于苹果 3d 相机。我一直在考虑如何做到这一点也很想给你发电子邮件。需要注意的是，这将是与面部识别软件类似的概念。

# php - 未找到 PHP 包含路径

> ID：11634482
> 
> 赞同：0
> 
> 时间：2012-07-24T15:42:10.260
> 
> 标签：php, include

当我尝试包含某个文件时遇到问题。当我尝试加载文件时，我遇到了这个错误：

```
failed to open stream: No such file or directory in ... 
```

另一方面，a`<a href="/wT/sys/background.php">background</a>`直接将我发送到我想要包含的文件（不是它的源代码，而是输出）

为什么 include 函数无法通过给定路径访问文件，但我可以使用 href 访问它？*我需要获取文件的源代码，而不仅仅是输出，否则我只包含 http://.... 路径 *我在 localhost 上运行 php 代码，如果重要的话

我还尝试检查是否需要重新配置 php.ini 文件，但没有发现任何有用的东西（尽管允许包含 url，正如我所说，我不需要使用它）

任何建议都会有所帮助，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:46:19.673

`include $_SERVER['DOCUMENT_ROOT'] . '/wT/sys/background.php';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:43:39.937

如果您要包含的文件作为您尝试包含它的脚本位于*较低目录中，请尝试：*

```
include __DIR__.'/wT/sys/background.php'; 
```

或者干脆

```
include 'wT/sys/background.php'; 
```

# google-chrome - 对于某些用户，经典 ASP 内容类型 XLS Chrome 下载为 .asp 文件

> ID：11634487
> 
> 赞同：2
> 
> 时间：2012-07-24T15:42:20.263
> 
> 标签：google-chrome, asp-classic, mime-types, xls

我有一个经典的 asp 网站，其中包括将表数据导出/下载为 excel 文件 (.xls) 的功能。这是通过使用此代码块代替通常的 HTML 标头将用户重定向到新页面来完成的：

```
sub PutInTopOfXLS(FileName)
    Response.Buffer = TRUE
    Response.CharSet="UTF-8"
    Response.CodePage=65001
    Response.ContentType = "application/vnd.ms-excel"
    Response.AddHeader "Content-Disposition", "attachment;filename=" & FileName%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns:x="urn:schemas-microsoft-com:office:excel">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
        <style>
        <!--table
        br {mso-data-placement:same-cell;}
        tr {vertical-align:top;}
        -->
        </style>
    </head>
    <body>  
<%end sub 
```

这适用于 Firefox、Internet Explorer 和 Safari（适用于 Mac 和 Windows）上的所有用户（或至少没有报告任何问题），并且适用于我使用 Chrome (20.0.1132.57) 的开发机器。但是，我的 QA 人员报告说，在网站上的几个特定报告中，它总是使用实际代码页名称 ReportFileName.asp 在 Chrome 上下载，然后他收到有关 .asp 文件没有文件关联的 Windows 错误。如果他确实选择了用 Excel 打开，则说明已经下载了正确的文件。我让我们办公室的另一个人下载Chrome，她没有问题；文件下载为 {filename}.xls 并正常打开。

我很困惑，因为对于 QA 人员来说，它只影响这一份报告，这表明问题出在特定报告中。但是，其他两个使用相同版本 Chrome 的用户没有遇到此问题，这表明这是他的 Chrome 设置中的问题。

我没有任何运气在谷歌上搜索解决方案或搜索 SO，所以我想我会把问题扔在那里，看看是否有人有任何想法。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:43:05.733

我建议流式传输文件，这也可以让您以更好的方式处理大文件。

这是我的工作示例，我使用它来获取一些自动 csv 文件，这些文件存储在一个相当不友好的文件名中，我还使用这个脚本向最终用户呈现一个更好的文件名：

```
' Set some variables
strSourceFilename = "00008446.dat"
strNiceFilename = "Nice Name Here.csv"

' Read the file and stream  it back to the client
Const adTypeBinary = 1
Set BinaryStream = CreateObject("ADODB.Stream")
BinaryStream.Type = adTypeBinary
BinaryStream.Open
BinaryStream.LoadFromFile "C:\path\to\the\folder\" & strSourceFilename
ReadBinaryFile = BinaryStream.Read
Response.ContentType = "application/x-unknown"
Response.AddHeader "Content-Disposition", "attachment; filename=" & strNiceFilename
Response.BinaryWrite ReadBinaryFile 
```

希望这可以帮助！

# c#-4.0 - 为什么在 SQL Server 中执行相同的查询时，我使用的 SqlDatasource 不返回计算值？C#.net 4.0

> ID：11634490
> 
> 赞同：0
> 
> 时间：2012-07-24T15:42:35.880
> 
> 标签：c#-4.0, sqldatasource

在 Sql Server 中工作的查询。

```
Declare @from datetime, @to datetime, @status int, @SupervisorID uniqueidentifier
SELECT @to = '09-12-2012', @from = '02-02-2012', @status = 0, @SupervisorID = '2EB087F0-A419-4421-861A-6EBDFED9449A'

select nums.date as DayOff, [RequestID], [EmployeeName], [AbsenceType], [AbsenceBundle], [DateRequested], [FirstDay], [LastDay], [ReturnDay], [SupervisorName], [DaysHoursDesc] as DaysAbsent, [Description], Hours from
            (select dateadd(day, number, @from) as date
            from 
                (select distinct number from Numbers
                ) num
            where dateadd(day, number, @from) < @to) nums right outer join [AbsenceRequests].[dbo].[AbsenceRequestWithDescriptions] a on (DateDiff(Day, a.FirstDay, nums.date) >= 0 and DateDiff(Day, a.LastDay, nums.date) <=0)
            where
                 (([SupervisorID] = @SupervisorID) or ([EmployeeID] = @SupervisorID)
                            or 
                 ([SupervisorID] in  (select SupervisorID from Viewers where [viewerID] = @SupervisorID)))
and((@status = StatusID) or (@status = '0'))
            order by SupervisorName, EmployeeName, FirstDay, Hours 
```

我从这个查询中得到的结果

```
2012-06-06 00:00:00.000 515 apptest1    Vacation    55 - Vacation   2012-06-28 00:00:00.000 2012-06-06 00:00:00.000 2012-06-07 00:00:00.000 2012-06-08 00:00:00.000 apptest3    16 Hour(s)  Pending 16 
```

SqlDatasource 定义

```
 <asp:SqlDataSource ID="EmployeeAbsenceRequestsSql" runat="server"  
        ConnectionString="<%$ ConnectionStrings:AbsenceRequestsConnectionString %>" 

            SelectCommand="
            select nums.date as DayOff, [RequestID], [EmployeeName], [AbsenceType], [AbsenceBundle], [DateRequested], [FirstDay], [LastDay], [ReturnDay], [SupervisorName], [DaysHoursDesc] as DaysAbsent, [Description], Hours from
            (select dateadd(day, number, @from) as date
            from 
                (select distinct number from Numbers
                ) num
            where dateadd(day, number, @from) &lt; @to) nums right outer join [AbsenceRequests].[dbo].[AbsenceRequestWithDescriptions] a on (DateDiff(Day, a.FirstDay, nums.date) &gt;= 0 and DateDiff(Day, a.LastDay, nums.date) &lt;=0)
            where
                 (([SupervisorID] = @SupervisorID) or ([EmployeeID] = @SupervisorID)
                            or 
                 ([SupervisorID] in  (select SupervisorID from Viewers where [viewerID] = @SupervisorID)))
                 and ((@status = StatusID) or (@status = '0'))
            order by SupervisorName, EmployeeName, FirstDay, Hours " 
            onselecting="EmployeeAbsenceRequestsSql_Selecting" >
            <SelectParameters>
                <asp:FormParameter DefaultValue=" " FormField="Fromtxt" Name="from" />
                <asp:FormParameter DefaultValue=" " FormField="Totxt" Name="to" />
                <asp:SessionParameter DefaultValue="&quot;&quot;" Name="SupervisorID" 
                    SessionField="EmployeeID" Type="Object" />
                <asp:ControlParameter ControlID="Statusddl" DefaultValue="0" PropertyName="SelectedValue"  Name="status" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

当我调用数据源的 select 方法时，我得到了结果，但第一列 DayOff 返回空白（我通过设置手表和检查 DataView 验证了这一点）。下面是我用来执行和读取选择查询结果的代码。

```
 protected void RefreshTreeview()
    {
        this.EmployeeAbsenceRequestsSql.SelectParameters["from"].DefaultValue = SafeDateString(this.Fromtxt.Text);
        this.EmployeeAbsenceRequestsSql.SelectParameters["to"].DefaultValue = SafeDateString(this.Totxt.Text);
        DataView dv = (DataView) this.EmployeeAbsenceRequestsSql.Select(new DataSourceSelectArguments());

        FillTreeView(dv);
    }

private void FillTreeView(DataView dv)
{
    TreeNode CurrentSupervisorNode =  null;
    TreeNode CurrentEmployeeNode = null;
    foreach (DataRow row in dv.Table.Rows)
    {
        String SupervisorName = SafeString(row["SupervisorName"]);
        if ((CurrentSupervisorNode == null) || !CurrentSupervisorNode.Text.Equals(SupervisorName))
        {
            CurrentSupervisorNode = new TreeNode(SupervisorName);
            this.AbsencesTV.Nodes.Add(CurrentSupervisorNode);
            CurrentEmployeeNode = null;
        }
        String EmployeeName = SafeString(row["EmployeeName"]);
        if (CurrentEmployeeNode == null || !CurrentEmployeeNode.Text.Equals(EmployeeName))
        {
            CurrentEmployeeNode = new TreeNode(EmployeeName);
            CurrentSupervisorNode.ChildNodes.Add(CurrentEmployeeNode);
        }

        String DayOffSummary = SafeString(row["DayOff"]) + " " + SafeString(row["AbsenceBundle"]) +" " + SafeString(row["Description"]);
        CurrentEmployeeNode.ChildNodes.Add(new TreeNode(DayOffSummary));
    }
} 
```

有没有人有任何调试建议或者更好的答案来解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:31:18.920

感谢 simon 的精彩评论，我能够发现 @to 的默认空白值被传递，而不是我试图使用的默认值。当我为 @to 值指定日期时，我得到了我期望的结果。

# objective-c - UITextView 在分组 UITableView 的单元格中

> ID：11634491
> 
> 赞同：1
> 
> 时间：2012-07-24T15:42:37.237
> 
> 标签：objective-c, ios, uitableview, uitextview

请解释一下：如何以编程方式在 UITableViewCell 中创建 UITextView（UITableView 具有分组样式）。文本视图大小应等于单元格的大小。

UITextView 在其文本和边框（左上角）之间存在间隙，因此我需要正确的坐标才能将文本视图正确放置在单元格上。

**更新**：我已经解决了我的问题。请参阅下面的我的自我回答。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:14:36.483

这很简单：

```
 textView.frame = CGRectMake(0, 0, cell.contentView.frame.size.width, cell.contentView.frame.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:57:21.297

干得好：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Prototype Cell"];
    UITextField *textfield;
    if (!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                      reuseIdentifier:@"Prototype Cell"];
        textfield = [[UITextField alloc] init];
        [cell.contentView addSubview:textfield];
        textfield.tag = TEXT_FIELD_TAG; //Suppose you defined TEXT_FIELD_TAG someplace else
    }
    else 
    {
        textfield = [self.view viewWithTag: TEXT_FIELD_TAG];
        textfield.frame = cell.frame;
    }
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:50:25.613

设置 UITextView 的“contentInset”

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    静态 NSString *sCellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:sCellIdentifier];

    如果（！单元格）
    {
        单元格 = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDetail
                                      重用标识符：sCellIdentifier];
    }
    UITextView *textView = [UITextView alloc]init];
    textView.contentInset = UIEdgeInsetsMake(-8,-8,-8,-8); //根据你的要求改变
    textView.frame = 单元格.frame;
    [textView setUserInteractionEnabled:FALSE];
    [textView setBackgroundColor:[UIColor clearColor]];
    [cell.contentView addSubView:textView];
    返回单元格；
}

```

# visual-studio-2010 - 如何在给定的内存地址处或附近找到符号？（使用 Visual Studio 2010）

> ID：11634493
> 
> 赞同：8
> 
> 时间：2012-07-24T15:42:38.560
> 
> 标签：visual-studio-2010, debugging, memory, symbols

在调试 Windows 应用程序时，我想知道是否可以在给定的内存位置（以及如何）定位符号。这将是在“内存”窗口中键入符号的相反操作，它将符号转换为其地址。但不是反过来。

在 VxWorks shell 上非常简单，在 Linux gdb 上也可以。在VS上应该是可能的。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-01T07:52:36.197

如果你很幸运并且知道确切的地址，但不知道符号名称，请尝试将地址写入 Watch 窗口，VS 会找到符号。例如

```
(void *)0x6F63E248  -> 0x6f63e248 {My.dll!TMyString<char,CMyMemHeap>  *s_psMyAppNameAbbr}   void * 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-05T02:29:23.343

使用windbg调试时，命令“ln地址”会帮你检查目标地址附近的符号，希望对你有帮助。

# asp.net-mvc - 将 EF 对象序列化为 JSON - ASP.NET MVC

> ID：11634494
> 
> 赞同：0
> 
> 时间：2012-07-24T15:42:42.773
> 
> 标签：asp.net-mvc, json, entity-framework

我有一个 EF 对象：

```
public class User
{

    [Key, Column("userid", TypeName = "int")]
    public Int32 UserId { get; set; }

    [Column("username", TypeName = "varchar")]
    public String UserName { get; set; }

    [Column("password", TypeName = "varchar")]
    public String Password { get; set; }

    [Column("name", TypeName = "varchar")]
    public String Name { get; set; }

    [Column("surname", TypeName = "varchar")]
    public String Surname { get; set; }

    [Column("email", TypeName = "varchar")]
    public String Email { get; set; }

    [Column("dob", TypeName = "datetime")]
    public Nullable<DateTime> Dob { get; set; }

    [Column("notes", TypeName = "nvarchar")]
    public String Notes { get; set; }

    [Column("masterentity", TypeName = "varchar")]
    public String MasterEntity { get; set; }

    [Column("propertyid", TypeName = "int")]
    public Nullable<Int32> PropertyId { get; set; }

    [Column("boardmember", TypeName = "bit")]
    public Boolean BoardMember { get; set; }

    [Column("occupiesunit", TypeName = "bit")]
    public Boolean OccupiesUnit { get; set; }

    [Column("systemuser", TypeName = "bit")]
    public Boolean SystemUser { get; set; }

    [Column("isactive", TypeName = "bit")]
    public Boolean IsActive { get; set; }

    #region Foreing Keys

    [ForeignKey("MasterEntity")]
    public virtual Entity CurrentMasterEntity { get; set; }

    #endregion

} 
```

在客户端，我尝试将模型序列化为 JSON 对象，如下所示：

```
var jsonUser = @(Html.Raw(Json.Encode(this.Model))); 
```

我收到以下错误：

```
A circular reference was detected while serializing an object of type .... 
```

我意识到，如果我**删除**Foreing Keys Fluent API

```
[ForeignKey("MasterEntity")]
public virtual Entity CurrentMasterEntity { get; set; } 
```

然后它完美地工作。因此，与其他实体有关系的实体或对象似乎无法使用 JSON 进行序列化。

任何人都有解决这个问题的好方法？EF 5.0 会解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:56:43.593

*只要实体之间没有循环引用，就可以*序列化具有关系的实体。这意味着，如果您`A`指向`B`，又`B`指向`A`，则不会这样做。我怀疑您`CurrentMasterEntity`是否会等于实体本身，或者是否可能存在圆形图（A 是 B 的主人，B 是 A 的主人），所以您要么有数据错误，要么有双向导航（最常见的是它以`Entity Parent`和的形式出现`ICollection<Entity> Children`。如果这是一个数据错误，只需修复它。如果您有双向导航，则必须选择一个将被序列化的属性，并用标记另一个属性，`[ScriptIgnore]`这样它就*不会*被序列化。

但是，如果您真的不需要`CurrentMasterEntity`在客户端，只需将其标记为上述`[ScriptIgnore]`.

# jquery - jQuery - 在两个位置将购物车值设置为 0

> ID：11634500
> 
> 赞同：3
> 
> 时间：2012-07-24T15:43:07.360
> 
> 标签：jquery, shopping-cart

我正在开发具有一些高级 jQuery 功能的购物车。除了出现在购物车中商品旁边的从购物车中删除商品按钮之外，我已经完成了所有工作。我很难弄清楚如何定位需要更改回 0 的页面左侧的值。

我做了一个 jsfiddle：http: [//jsfiddle.net/richcoy/GpUWn/](http://jsfiddle.net/richcoy/GpUWn/)

如果您按下向上按钮将商品添加到购物车，您将看到它出现在购物车中。该项目旁边是一个 X 按钮，用于将其从购物车中删除。单击该按钮时，它需要将购物车中的值和向上按钮旁边的值都设置回零。

我知道 JS 末尾的 close.click 函数会触发，但无法弄清楚是什么将左侧的值归零。

**HTML**

```
<div id="body_container">

<div id="product_container">
    <div class="product_box">
        <div class="item_name">Item One</div>   
        <div class="product">0</div>
        <button class="up category_one_up">Up</button>
        <button class="down category_one_down">Down</button>
    </div>

    <div class="product_box">
        <div class="item_name">Item Two</div>   
        <div class="product">0</div>
        <button class="up category_one_up">Up</button>
        <button class="down category_one_down">Down</button>
    </div>

    <div class="product_box">
        <div class="item_name">Item Three</div>    
        <div class="product">0</div>
        <button class="up category_one_up">Up</button>
        <button class="down category_one_down">Down</button>
    </div>

    <div class="product_box">
        <div class="item_name">Item Four</div>
        <div class="product">0</div>
        <button class="up category_two_up">Up</button>
        <button class="down category_two_down">Down</button>
    </div>

    <div class="product_box">
        <div class="item_name">Item Five</div>       
        <div class="product">0</div>
        <button class="up category_three_up">Up</button>
        <button class="down category_three_down">Down</button>
    </div>
</div>

<div id="cart_container">
    <h3>Shopping Cart</h3>
    <div class="catone_header"><h3>Category One</h3></div>
        <div class="cart_product">
            <div class="item_name">Item One</div>
            <input type="text" class="cart_product_number" value="0" />
            <button class="close">X</button>
        </div>
        <div class="cart_product">
            <div class="item_name">Item Two</div>
            <input type="text" class="cart_product_number" value="0" />
            <button class="close">X</button>
        </div>
        <div class="cart_product">
            <div class="item_name">Item Three</div>
            <input type="text" class="cart_product_number" value="0" />
            <button class="close">X</button>
        </div>
        <div class="cattwo_header"><h3>Category Two</h3></div>
        <div class="cart_product">
            <div class="item_name">Item Four</div>
            <input type="text" class="cart_product_number" value="0" />
            <button class="close">X</button>
        </div>
        <div class="catthree_header"><h3>Category Three</h3></div>
        <div class="cart_product">
            <div class="item_name">Item Five</div>
            <input type="text" class="cart_product_number" value="0" />
            <button class="close">X</button>
        </div>
    </div>
</div><!-- end #body_container --> 
```

**JS**

```
$(document).ready(function() {
    var num;
    var catone = 0;
    var cattwo = 0;
    var catthree = 0;

$('.up').click(function() {
    num = parseInt($(this).siblings('.product').text());
    console.log(num);
    $(this).prevAll('.product').text(num + 1);
    $('.cart_product').eq($(this).closest('.product_box').index()).fadeIn('slow').find('.cart_product_number').val(num + 1);
});

$('.down').click(function() {
    num = parseInt($(this).siblings('.product').text());
    if (num > 0) {
        $(this).siblings('.product').text(num - 1);
    };

    if (parseInt($(this).siblings('.product').text()) === 0) {
        $('.cart_product').eq($(this).closest('.product_box').index()).fadeOut('slow');
    } else {
        $('.cart_product').eq($(this).closest('.product_box').index()).show().find('.cart_product_number').val(num - 1);
    }
});

// Category One
$('.category_one_up').click(function() {
    catone++;
    if (catone > 0) {
        $('.catone_header').fadeIn('slow');
    };
});

$('.category_one_down').click(function() {
    if (catone > 0) {
        catone--;

        if (catone <= 0) {
            $('.catone_header').fadeOut('slow');
        };
    };
});

// Category Two
$('.category_two_up').click(function() {
    cattwo++;
    if (cattwo > 0) {
        $('.cattwo_header').fadeIn('slow');
    };
});

$('.category_two_down').click(function() {
    if (cattwo > 0) {
        cattwo--;

        if (cattwo <= 0) {
            $('.cattwo_header').fadeOut('slow');
        };
    };
});

// Category Three
$('.category_three_up').click(function() {
    catthree++;
    if (catthree > 0) {
        $('.catthree_header').fadeIn('slow');
    };
});

$('.category_three_down').click(function() {
    if (catthree > 0) {
        catthree--;

        if (catthree <= 0) {
            $('.catthree_header').fadeOut('slow');
        };
    };
});

$('.close').click(function() {
    $(this).parent('div.cart_product').fadeOut('slow');
    $(this).prev('.cart_product_number').val(0);
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:42:13.730

如果您在产品上放置了参考以直接定位它们会更好，但对您的代码的调整将是：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/GpUWn/5/)示例。

```
$('.close').click(function() {

   // get the name of the item
   var myProd = $(this).closest('div').find('.item_name').html();

   // find it on the left list
   $target = $('#product_container').find('.item_name').filter(function() {
     return $(this).html().match(myProd);
   });

   // reset to 0        
   $target.next().html('0');

   // your code...
   $(this).parent('div.cart_product').fadeOut('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:47:20.027

首先，`id`属性被理解为是唯一的。

接下来，对于 XHTML 标准，afaik，您可以定义自己的标签属性。因此，您可以传递要设置为零的元素，例如，作为每个*关闭*按钮的属性：

```
<button class="close" moo="product_item_1">X</button> 
```

在这里，`moo`属性定义了哪个容器包含应该重置的值。然后，您只需为单击的按钮获取该属性的值，形成元素选择器，获取元素并重置其 HTML：

```
// format the ID selector
var item_id = '#' + $(this).attr('moo');
// format the concrete "input" selector, you need to reset
// and reset its HTML
jQuery(item_id + ' .product').html('0'); 
```

这是如何完成的：http: [//jsfiddle.net/j99Cv/](http://jsfiddle.net/j99Cv/)

# mongodb - MongoDB C#查询字符串上的“NotLike”

> ID：11634502
> 
> 赞同：1
> 
> 时间：2012-07-24T15:43:10.977
> 
> 标签：mongodb, mongodb-.net-driver

我正在使用官方的 Mongo C# 驱动程序。正如在回答一个问题时所建议的那样，我将以下内容用于“喜欢”运算符 -

Query.Matches("姓名", "乔");

我的问题是如何实现“NotLike”功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T17:19:24.880

假设您在 1.5 版中使用新的查询构建器，您可以这样做：

```
var query = Query.Not(Query.Matches("name", "Joe")); 
```

在 1.5 版中，我们还引入了一个新的类型化查询构建器，您可以这样使用它：

```
var query = Query.Not(Query<C>.Matches(x => x.Name, "Joe")); 
```

最后，您还可以编写一个 LINQ 查询：

```
var query = collection.AsQueryable<C>().Where(x => !Regex.IsMatch(x.Name, "Joe")); 
```

# c - 为什么这个程序中 printf 的使用错误？

> ID：11634503
> 
> 赞同：0
> 
> 时间：2012-07-24T15:43:14.147
> 
> 标签：c, function-pointers

我在回答[C 中的函数指针如何工作？](https://stackoverflow.com/questions/840501/how-do-function-pointers-in-c-work)

```
#import <stdlib.h>
#define MAX_COLORS  256

typedef struct {
    char* name;
    int red;
    int green;
    int blue;
} Color;

Color Colors[MAX_COLORS];

void eachColor (void (*fp)(Color *c)) {
    int i;
    for (i=0; i<MAX_COLORS; i++)
        (*fp)(&Colors[i]);
}

void printColor(Color* c) {
    if (c->name)
        printf("%s = %i,%i,%i\n", c->name, c->red, c->green, c->blue);
}

int main() {
    Colors[0].name="red";
    Colors[0].red=255;
    Colors[1].name="blue";
    Colors[1].blue=255;
    Colors[2].name="black";

    eachColor(printColor);
} 
```

代码返回以下错误：

```
test.c: In function ‘printColor’:
test.c:21: warning: incompatible implicit declaration of built-in function ‘printf’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:45:11.760

`printf`住`stdio.h`，不是`stdlib.h`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T15:48:40.410

只是为了补充其他人所说的，如果 C 编译器遇到一个它*没有看到原型*的函数，它将对该函数的签名做出假设，这通常是错误的。

包括 stdio.h 包括函数的原型，以便编译器不必猜测它的签名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T15:45:19.063

添加 stdio.h 的包含：

```
#include <stdio.h> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T15:47:17.180

您已包含 stdlib.h 而不是 stdio.h。它定义了 printf 的 stdio.h 不是 stdlib.h。因此，如果您更改，警告可能会得到解决。

# ravendb - RavenDB 新属性查询

> ID：11634512
> 
> 赞同：3
> 
> 时间：2012-07-24T15:43:27.823
> 
> 标签：ravendb

我刚刚向现有的 Foo 类添加了一个新属性（已删除）：

```
public class Foo
{
    // Other properties here
    public bool Deleted { get; set; }  // New property
} 
```

我在数据库中有 88 个 Foos。当我尝试通过这个新属性进行查询时，我没有得到任何文件：

```
session.Query<Foo>().Where(x => x.Deleted == false); 
```

我相信这是因为数据库中的任何 Foo 文档中都不存在 Deleted 属性。为了让它工作，我必须得到所有的 Foos，然后过滤完整的列表并返回哪里 Deleted == false。

```
session.Query<Foo>();
return foos.Where(x => x.Deleted == false); 
```

这是需要处理此类更改的方式吗？在查询本身中使用 Where() 过滤器会很好，但我可以理解为什么这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T07:24:49.233

删除的属性在存储在数据库中的实际文档中还不存在，所以这就是为什么您不能根据该属性查询它们的原因。

解决这个问题的方法是首先将此属性添加到实际文档中。您可以通过加载所有文档并保存会话来完成此操作。

这是一个示例代码如何实现这一点：

```
public void LoadAndSave<T>()
{
    using (var session = store.OpenSession())
    {
        int skip = 0;
        const int take = 1024;
        while (true)
        {
            var builds = session.Query<T>()
                .Skip(skip)
                .Take(take)
                .ToList();
            skip += builds.Count;

            session.SaveChanges();

            if (builds.Count == 0)
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T18:25:00.640

我想我会发布另一个简单易行的选项。

在 Raven Studio 中，您可以在 Patch 选项卡上执行补丁。您可以修补集合，以便该属性现在存在于每个文档中。只需将属性设置为等于自身。如果该属性已经存在，则它只是设置为自身。如果该属性不存在，它将被添加为空。现有信息仍然存在；没有信息丢失。

这是执行的代码：

```
this.ApplicationWithOverrideVariableGroup.CustomVariableGroupIds = this.ApplicationWithOverrideVariableGroup.CustomVariableGroupIds; 
```

![在此处输入图像描述](../Images/739b25ce9d544da23ccb378c2a9482d3.png)

# replication - Notes 复制错误：您无权从该数据库复制或复制

> ID：11634520
> 
> 赞同：0
> 
> 时间：2012-07-24T15:43:58.263
> 
> 标签：replication, lotus-notes, lotus-domino

我一直在尝试在 Lotus Notes 中创建一个数据库的本地副本并收到上述错误消息。

我尝试了各种网站中提到的所有修复，使匿名访问复制或复制文档，但没有成功。

lotus notes 版本是 6.5，我正在从客户端创建副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:12:27.407

检查所有 ACL 条目。每个标记为“复制或复制文档”的条目都有一个复选框。如果未检查适用于您的条目，则不允许您复制。此外，请注意此设置有一个非常严重的副作用，此 IBM 技术说明中对此进行了[描述](http://www-01.ibm.com/support/docview.wss?uid=swg21164209)。即使您选中 ACL 条目的复选框，您仍将无法复制之前由您或任何其他没有“复制或复制文档”权限的用户创建或编辑的文档。（我认为这是 Domino 的设计缺陷，但 IBM 显然不同意。）

顺便说一句：匿名访问不适用于 Notes 客户端。（嗯，实际上在某些情况下它可以，但这不太可能是其中之一。它仅适用于允许未经身份验证的客户端连接的公共 Domino 服务器，这种情况非常罕见。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:43:07.713

现在问题已解决：

解决方法是：

同一服务器上有多个副本位于不同文件夹下，用户无权访问其中一个副本。删除该副本就可以了。

# vb.net - VB.NET datagrid - 检测组合框选择并在不同列中选择相同的值

> ID：11634522
> 
> 赞同：1
> 
> 时间：2012-07-24T15:44:02.367
> 
> 标签：vb.net, datagridview

我有一个带有组合框的数据网格。现在我想实现，如果在第 0 行第 0 列中选择值 x，那么第 1 行第 0 列中的组合框值 y 会自动设置为与 x 相同的值。

我试过

```
 Private Sub dataGridView1_CellValidating(ByVal sender As Object, ByVal e As DataGridViewCellValidatingEventArgs) Handles Sched_Grid.CellValidating
    If Sched_Grid.CurrentCell.ColumnIndex = 0 Then
        Sched_Grid(1, Sched_Grid.CurrentCell.RowIndex).Value = Sched_Grid(0, Sched_Grid.CurrentCell.RowIndex).Value
    End If
End Sub 
```

但是，它不会立即起作用。我必须首先选择一个值 x(0,0)，然后单击不同的单元格（5,5 或其他），然后单击返回 x(0,0) 单元格，以便将 y(1,0) 设置为x(0,0)。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:42:28.733

您需要使用该`EditingControlShowing`事件来访问底层控件，然后添加另一个处理程序。不过会有点乱。

```
Private Sub Sched_Grid_EditingControlShowing(ByVal sender as Object, Byval e as DataGridViewEditingControlShowingEventArgs) Handles Sched_Grid.EditingControlShowing
  If Sched_Grid.CurrentCell.ColumnIndex = 0 Then
    Dim selectedComboBox As Combobox = DirectCast(e.Control, ComboBox)
    RemoveHandler selectedCombobox.SelectionChangeCommitted, AddressOf selectedComboBox_SelectionChangeCommitted
    AddHandler selectedCombobox.SelectionChangeCommitted, AddressOf selectedComboBox_SelectionChangeCommitted
  End If
End Sub

Private Sub selectedComboBox_SelectionChangeCommitted(ByVal sender As Object, ByVal e As EventArgs)
  Dim selectedCombobox As ComboBox = DirectCast(sender, ComboBox)
  If selectedCombobox.SelectedItem IsNot Nothing Then
    Sched_Grid(1, Sched_Grid.CurrentCell.RowIndex).Value = selectedCombobox.SelectedItem
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:04:35.027

您可能能够使用[CurrencyManager](http://msdn.microsoft.com/en-us/library/system.windows.forms.currencymanager.aspx)类将两个控件绑定到同一个集合。`ComboBox`您可以使用[DisplayMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)属性仅显示您想要的列。

简单示例：[http ://www.vb-tips.com/CurrencyManager.aspx](http://www.vb-tips.com/CurrencyManager.aspx)

# jenkins - 如何在 jenkins 中设置非 utf 字符集？

> ID：11634524
> 
> 赞同：1
> 
> 时间：2012-07-24T15:44:02.493
> 
> 标签：jenkins, perforce

当我尝试连接到我的 perforce 服务器时，我收到以下错误。我在配置中的 P4CHARSET 变量中指定了 utf8，我应该如何设置它才能使其正常工作？

```
ERROR: Unable to communicate with perforce.  Unicode clients require a unicode enabled server.
For Command: p4 -s client -i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:11:35.020

该错误意味着您的 Perforce 服务器未在 Unicode 模式下运行。您应该取消设置 P4CHARSET 变量。

如果只需要存储非 ASCII 内容的文件，可以使用文件类型 utf16。如果您需要 Perforce 元数据（例如用户名和标签）包含非 ASCII 字符，您需要让您的 Perforce 管理员将服务器切换到 Unicode 模式。

Unicode 问题可能有点棘手，因此如果您需要详细帮助，请联系 Perforce 支持。

# php - 使用 php 创建缩略图 - 写入权限

> ID：11634527
> 
> 赞同：0
> 
> 时间：2012-07-24T15:44:13.863
> 
> 标签：php, image, gd

编辑：问题已解决：我是个愚蠢的小笨蛋，我忽略了给文件命名。$testSiteDir 是一个没有文件名的路径。没有名字怎么能保存文件！哦！对不起 ;）

* * *

我知道周围有很多类似的问题，我一直在阅读它们，但由于我不得不构建所有教程和文章的混合体，所以我有一些我希望能工作但没有工作的代码。

我曾经设法将图像的副本创建到我想要使用 copy() 函数移动它的文件夹中，这很有效。但是因为我想调整它的大小，所以我需要使用 GD（据我所知）

这是我的代码：

```
if (is_dir($BooksDir)) {
if ($dh = opendir($BooksDir)) {
    while (($folder = readdir($dh)) !== false) {
        $count++;
        $exclude = array('.','..','etc.');
        if (!in_array($folder, $exclude)){
            echo '<div ' . ($count&1 ? 'class="oddrow"' : 'class="evenrow"') . '>';
            echo $folder . "<br/>" . $count;
            $subDir = $BooksDir . '/' . $folder;
            $filesnfolders = scandir($subDir);
            foreach ($filesnfolders as $file) {
                $ext = pathinfo($file, PATHINFO_EXTENSION);
                if ($ext == 'jpg' || $ext == 'jpeg' || $ext == 'png' || $ext == 'gif') {
                    if ($ext == 'jpg' || $ext == 'jpeg') {
                        $origimg = imagecreatefromjpeg($subDir. '/' . $file);
                        $thHeight = 100;
                        $thWidth = 100;
                        $mainWidth = imagesx( $origimg );
                        $mainHeight = imagesy( $origimg );
                        $myThumbnail = imagecreatetruecolor($thWidth, $thHeight);
                        imagecopyresampled( $myThumbnail, $origimg, 0, 0, 0, 0, $thumbWidth, $thumbHeight, $mainWidth, $mainHeight );
                        imagejpeg( $myThumbnail, $testSiteDir );
                    }
                }
            }
            echo '</div>';
        }
    }
    closedir($dh);
} 
```

}

当我尝试使用上述内容时，我收到了我没有权限写入该文件夹的错误：无法打开'C：/xampp/htdocs/test'进行写入：权限被拒绝...

我有三本教科书，阅读了一堆关于图像和 php 的文章，我还没有看到任何地方告诉我该怎么做

出了什么问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:51:25.167

在 Windows 上设置写权限可能不太明显。

试试这些说明[http://drupal.org/node/202491](http://drupal.org/node/202491)看看你是怎么开始的。

如果您使用 Xampp 作为 PHP 安装，它通常似乎通过 htdocs 的整个目录结构传播写权限。非常便利。不知道为什么它没有为您完成。

EDIT: just noticed that the Drupal page relates to IIS. Maybe this will be better... [Apache on windows server can't write to file](https://stackoverflow.com/questions/688962/apache-on-windows-server-cant-write-to-file)

# ruby-on-rails - Rails 在表单提交上设置值

> ID：11634529
> 
> 赞同：0
> 
> 时间：2012-07-24T15:44:16.257
> 
> 标签：ruby-on-rails

我正在尝试在选择下拉项时自动填充字段，或者在调用 create 方法时查找并设置属性。特别是中间（MachineID）位于不同的类（Part）。Partconfig 属于_to 部分。Part 有很多 Partconfig。

零件配置

```
<div class="field">
    <%= f.label :name %><br />
    <%= f.select :Part_id, Part.all.collect{ |c| [c.name, c.id] } %>
  </div>
  <div class="field">
    <%= f.label :mid %><br />
    <%= f.number_field :mid %>
  </div> 
```

我想我可以在创建控制器方法中做到这一点：

```
 @part_config = PartConfig.new(params[:part_config])
 @part_config.mid = Part.find_by_name(params[:name]).select("mid") 
```

哪个不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:41:31.807

我删除了这条线

```
@part_config.mid = Part.find_by_name(params[:name]).select("mid") 
```

我试图让用户从下拉列表中选择中间，这不是必需的。选择名称会产生 part_id 女巫协会允许我打电话

```
@part_config = PartConfig.includes(:part).find(params[:id]) 
```

这将返回 PART_CONFIG 和关联的 PART，允许我在视图中执行此操作：

```
@part_config.part.mid 
```

结果正是我想要的！

# jsf-2 - 使用 JSF 下载文件不使用 Icefaces

> ID：11634531
> 
> 赞同：0
> 
> 时间：2012-07-24T15:44:23.553
> 
> 标签：jsf-2, download, icefaces, prettyfaces

我需要为我的应用程序实现文件下载功能。我按照这个示例[从 JSF 应用程序的任何 Web 浏览器强制保存为对话框，](https://stackoverflow.com/questions/2914025/forcing-a-save-as-dialogue-from-any-web-browser-from-jsf-application/2914079#2914079)但是在代码正常执行时，保存对话框永远不会出现。~~在查看我的 http 响应后，我看到它包含在漂亮的面孔响应中，因为我也在使用漂亮的面孔。有什么我应该改变的，让它与漂亮的面孔一起工作（假设这是不工作的原因）？~~

编辑：

看来问题不是漂亮的面孔，而是冰脸。通过将 icefaces 库添加到我的应用程序，下载方法不起作用，并且对话框永远不会出现。通过删除它可以工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:12:38.080

我不认为 PrettyFaces 是这不起作用的原因。PrettyFaces 只修改了 response.encodeURL() 和 response.encodeRedirectURL() 方法来渲染链接。

大多数人使用自定义 servlet 进行下载，但是您可以使用 JSF 来做这些事情，只是需要一些摆弄和调整。

这是使用 PrettyFaces 执行类似操作的示例：http: [//ocpsoft.org/prettyfaces/serving-dynamic-file-content-with-prettyfaces/](http://ocpsoft.org/prettyfaces/serving-dynamic-file-content-with-prettyfaces/)

# unix - 在 Makefile 中使用 sed

> ID：11634532
> 
> 赞同：2
> 
> 时间：2012-07-24T15:44:24.817
> 
> 标签：unix, sed, makefile

我正在尝试删除`conf.py`每个子目录（存储在变量中）中的文件（）文本块。`SUBDIRS`此文本块位于标签`#--Begin`和`#--End`. 请参阅下面的代码示例。为了整洁并且不必从makefile中运行额外的shell脚本，我想在makefile中使用sed命令，但是这样做有困难。我在任何其他论坛帖子上都找不到解决方案，因此我们将不胜感激。

```
.PHONY $(SUBDIRS)
SUBDIRS = (list of all subdirectories that contain a relevant conf.py)
$(SUBDIRS):  
    sed '/#--Begin/,/#--End/d' Docs/$@/conf.py 
```

这个命令没有任何反应。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T16:33:17.070

您的规则使用 SUBDIRS 列表作为其目标。Make 看看这些是否存在，它们当然存在。它们不依赖于其他任何东西，因此它们是最新的，因此 Make 不需要做任何事情。

有两种方法可以解决这个问题。一种是使用[Phony Target](http://www.gnu.org/software/make/manual/make.html#Phony-Targets) 来强制命令每次运行：

```
.PHONY: $(SUBDIRS)
$(SUBDIRS):
    sed ..... 
```

另一种是为文件的编辑和未编辑版本赋予不同的名称，例如 `conf.py`and ，并使用[Pattern Rule](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)`conf.py.in`使第一个依赖于第二个：

```
$(SUBDIRS): Docs/%/conf.py: Docs/%/conf.py.in
   sed '/#--Begin/,/#--End/d' $< >$@ 
```

这样更好，因为只要输入文件发生变化，它就会自动运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T23:54:00.807

在将其合并到 makefile 之前，您应该已经`sed`在命令行上测试了该命令。正如所写的那样，它删除了您希望它删除的行 - 然后将结果定向到标准输出。要修改文件，您应该使用`-i`：

```
sed -i -e '/#--Begin/,/#--End/d' Docs/$@/conf.py 
```

很可能还有其他问题。您还没有向我们展示真正的 makefile（`.PHONY $(SUBDIRS)`不合法，因此您没有粘贴工作的 makefile 的一部分），但是该规则甚至可能没有按照您认为的方式执行。尝试这个：

```
$(SUBDIRS):
    @echo attempting to act on $@
    @ls Docs/$@/conf.py 
```

在尝试引入命令之前，让它*完美*地工作。`sed`

# ruby-on-rails - Rails webscraper 在控制台中工作，但不是服务器

> ID：11634534
> 
> 赞同：0
> 
> 时间：2012-07-24T15:44:39.997
> 
> 标签：ruby-on-rails, nokogiri

我一直在敲定一些方法并在控制台中对其进行测试。问题是在服务器上运行时出现错误。具体来说，下面的第一种方法会触发此`NoMethod`错误：

```
undefined method `text' for nil:NilClass 
```

这是代码。它来自 pages.rb 文件，该文件有一个 uri 列。

```
def download_page_title
  page_as_xml.at_css('title').text
end

def page_as_xml
  page_as_xml ||= Nokogiri::HTML(open(page_uri))
end

def page_uri
  base_uri = Site.find_by_id(self.site_id).homepage #always has "/" at end
  if self.url == base_uri
    page_uri = base_uri
  else
    page_uri = "#{base_uri}#{self.url}"
  end
end 
```

知道我做错了什么吗？此外，任何想法为什么事情在控制台中顺利进行，但在服务器上脱轨？

编辑：这是我在控制台中所做的一个示例。

```
1.9.3p194 :262 > a = Webpage.new( url: "http://www.cnn.com/", site_id:165)
 => #<Webpage id: nil, url: "http://www.cnn.com/", site_id: 165, created_at: nil, updated_at: nil, title: nil> 
1.9.3p194 :263 > a.download_page_title
  Site Load (0.3ms)  SELECT "sites".* FROM "sites" WHERE "sites"."id" = 165 LIMIT 1
 => "CNN.com - Breaking News, U.S., World, Weather, Entertainment & Video News" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:56:24.023

这意味着`page_as_xml.at_css`正在返回`nil`，然后您尝试调用`.text`该`nil`对象。

所以，弄清楚为什么会返回`nil`。例如，您正在下载的页面是否没有指定`title`可通过 CSS 选择器访问的标签？页面是空白还是没有返回结果？它是否返回错误状态（不在 2xx HTTP 状态范围内）？

换句话说，您用于测试的页面与服务器实际获取的页面之间可能存在上游差异。

您可能需要处理（或抛出异常，或记录/报告）`nil`从调用返回的页面`page_as_xml.at_css`- 这实际上取决于您的软件需要做什么。

# facebook - FB Graph API：通知朋友当前用户在我网站上的活动

> ID：11634536
> 
> 赞同：2
> 
> 时间：2012-07-24T15:44:45.800
> 
> 标签：facebook, facebook-graph-api, messaging, tagging

我有一个网站，用户可以在其中创建事件（例如 Evite）。用户通过在 Facebook 上授权我的应用程序登录，这样我就可以访问他们的所有信息并在他们的墙上发帖。当用户在我的网站上创建一个允许他们通过电子邮件邀请人们并且还希望允许用户邀请他们的 Facebook 朋友的事件时，我有一些逻辑（我到了用户看到她的 FB 朋友列表和选择它们）。

我现在遇到的问题是我不知道如何在 Facebook 上通知用户朋友。这些是我想到的选项，但我认为它们中的任何一个都不起作用：

*   **向当前用户邀请的每个用户发送一条私人消息：**这只是 Facebook 不支持的（我猜是为了防止垃圾邮件应用程序）。
*   **显示预填充了当前用户选择的用户列表的发送对话框（带有 Fb.ui）**：目前 FB API 仅支持预填充列表中的一个用户名。
*   **在活动的墙帖中标记受邀用户：**我已经尝试过但没有成功，因为他们在这里解释：http: [//digitizor.com/2011/01/24/tag-user-facebook-graph/](http://digitizor.com/2011/01/24/tag-user-facebook-graph/)和[标记一个用户使用 Facebook API 在墙上发布/更新](https://stackoverflow.com/questions/3099183/tagging-a-user-in-a-wall-post-update-using-facebook-api)，我看到了文档，但没有样本，我有点迷路了。
*   **使用 FB.ui 发送我的应用程序的请求：**显然，这仅支持 Canvas 应用程序，不支持网站（[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)）
*   **向用户的@facebook 电子邮件地址发送电子邮件：（**据我所知）无法知道用户是否允许外部人员向此地址发送电子邮件，而且默认情况下消息显示为纯文本，我想要在消息正文中显示图像。

我现在看到的唯一可行的选项是使用 FB.ui 对话框作为我网站中事件创建过程的第二步，并让用户在该对话框中手动选择她的 Facebook 朋友。

有没有人有这方面的经验？我缺少任何替代方案吗？

非常感谢

# javascript - 列出给定类时调用对话框的jQuery基本帮助

> ID：11634541
> 
> 赞同：1
> 
> 时间：2012-07-24T15:44:53.447
> 
> 标签：javascript, jquery

我有这种情况：我有一个可以编辑用户信息（姓名、电子邮件、电话等）的页面。当我单击编辑按钮时，它会调用一个对话框（模式窗口），该对话框会加载已在数据库中设置的用户数据。当用户单击更新按钮时，我在控制器中进行验证以确保他插入了有效的电子邮件。如果电子邮件无效，我有一个错误，我在这个特定的对话框中将一个名为“error”的类添加到 html 标签中。我想做的是，如果有错误，我希望在验证后立即打开对话框。因为我只在出现错误的时间和地点设置了这个特定的类错误，所以我希望你的帮助找到一种`$('#addEditUserDialog').dialog('open');`在这种情况`$("#addEditUserDialog label.error")`发生时调用对话框的方法：

我试着做：

```
if ($("#addEditUserDialog label.error")) {
        $('#addEditUserDialog').dialog('open');
    } 
```

但即使未设置类错误，它也会调用对话框。我知道这是一个基本问题，但我对 javascript 的经验并不多，而且我有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:58:06.013

一个 jQuery 对象总是真实的（也就是说，它的计算结果为 true）。要测试一个元素的存在，需要使用`$().length`（如果没有元素，它应该是0，然后是假的）。

```
if ( $("#addEditUserDialog label.error").length ) {
    $('#addEditUserDialog').dialog('open');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:05:55.087

尝试 -

```
var className = $("#addEditUserDialog").attr("class");
if (className == "error")
{
    $('#addEditUserDialog').dialog('open');
}
else
{
    alert("Class not found");
} 
```

或者

```
if ($("#addEditUserDialog").hasClass("error"))
{
    $('#addEditUserDialog').dialog('open');
}
else
{
    alert("Class not found");
} 
```

# android - 在图像视图中显示微调器动画

> ID：11634542
> 
> 赞同：0
> 
> 时间：2012-07-24T15:44:55.327
> 
> 标签：android, android-asynctask, android-animation, android-progressbar

我有一个从互联网加载图像的图像视图。我正在从网络加载图像并使用异步任务将其转换为位图图像。我想在我的图像视图中显示一个静态图像，并在图像加载时在图像视图顶部有一个进度微调器。问题是我的 xml 中有进度微调器，我无法在异步任务中使用它，而且我不知道如何使进度微调器在图像视图中也可见。我该怎么做呢？这是我的异步任务类：

```
public class LoadImage extends AsyncTask<Void, Void, Bitmap>{

    Context callingContext = null;

    ImageView view;
    String b = null;
    ListView lv;
    ProgressDialog p;

    public LoadImage(Context c, ImageView view, String b){

        this.view = view;
        this.b = b;
        this.callingContext = c;
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    //  p = (ProgressDialog) findViewById(R.id.progressBar1);
        p = ProgressDialog.show(callingContext, "Loading Events", "Retrieving data from server, please wait...", true);
    }

    public Bitmap getBit(String data){

        Bitmap bitmap;
        BitmapFactory.Options bmOptions;
        bmOptions = new BitmapFactory.Options();
        bmOptions.inJustDecodeBounds = true;
        //from web
        try {
            bitmap=null;
            InputStream is=new URL(data).openStream();
            BitmapFactory.decodeStream(is, null, bmOptions);
            is.close();
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = 20;
            is = new URL(data).openStream();
            bitmap = BitmapFactory.decodeStream(is, null, o2);
            is.close();
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }

    }

    @Override
    protected Bitmap doInBackground(String... arg0) {
        // TODO Auto-generated method stub  
        Bitmap b = null;    
        URL imageUrl = null;

        b = getBit(this.b);

            return b;  
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        if(result == null)
            view.setImageResource(R.drawable.ic_launcher);

        p.dismiss();

    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:48:30.890

您可以将 ImageView 和 ProgessBar 包装到相对布局中。因此，在加载图像时，将进度条的可见性设置为 VISIBLE，并将 ImageView 的可见性设置为 GONE。在您准备好位图的那一刻，反转可见性。

```
public class LoaderImageView extends RelativeLayout {
    private Context     context;
    private ProgressBar progressBar;
    private ImageView   imageView;

    public LoaderImageView(final Context context, final AttributeSet attrSet) {
    super(context, attrSet);
    instantiate(context, attrSet);
    }

   private void instantiate(final Context _context, AttributeSet attrSet) {
       context = _context;
       imageView = new ImageView(context, attrSet);
       progressBar = new ProgressBar(context, attrSet);
       progressBar.setIndeterminate(true);

       addView(progressBar);
       addView(imageView);

       this.setGravity(Gravity.CENTER);
   }

   // ...

   // Then, play with this method to show or hide your progressBar
   public LoaderImageView(final Context context, final AttributeSet attrSet) {
    super(context, attrSet);
    instantiate(context, attrSet);
   }

} 
```

# c# - GetLength() 方法在数组上无法按预期工作

> ID：11634543
> 
> 赞同：1
> 
> 时间：2012-07-24T15:45:00.850
> 
> 标签：c#

这是一个 C# 代码。

它输出以下文本：

```
tab.Length = 6
tab.Rank = 2
Length of dim 0 of tab : 0
Length of dim 1 of tab : 1 
```

我期待以下文字：

```
tab.Length = 6
tab.Rank = 2
Length of dim 0 of tab : 2
Length of dim 1 of tab : 3 
```

为什么不？谢谢。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TableTest
{
    class Program
    {
        static void Main(string[] args)
        {
            int[,] tab = new int[2, 3];

            for (int i = 0; i < 2; i++)
            {
                for (int j = 0; j < 3; j++)
                {
                    tab[i, j] = 2 * i + j;
                }
            }
            Console.WriteLine("tab.Length = {0}", tab.Length);
            Console.WriteLine("tab.Rank = {0}", tab.Rank);
            for (int i = 0; i < tab.Rank; i++)
            {
                Console.WriteLine("Length of dim {0} of tab : {0} ", i, tab.GetLength(i));
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T15:49:08.803

疯狂猜测：您的最后一个格式字符串是错误的：

```
Console.WriteLine("Length of dim {0} of tab: {0} ", i, tab.GetLength(i)); 
```

您使用`{0}`了两次，因此您`i`在两个占位符中输出值。

改用这个：

```
Console.WriteLine("Length of dim {0} of tab: {1} ", i, tab.GetLength(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:49:22.113

您的格式字符串错误。

替换`"Length of dim {0} of tab : {0} "`为`"Length of dim {0} of tab : {1} "`。

您的代码实际上是在放置 i，而不是 tab.GetLenght(i)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:49:33.760

您是否只需要访问传递给 Console.WriteLine 的第二个参数？尝试这个：

```
Console.WriteLine("Length of dim {0} of tab : {1} ", i, tab.GetLength(i)); 
```

# javascript - 其他元素环绕居中定位的 div

> ID：11634545
> 
> 赞同：1
> 
> 时间：2012-07-24T15:45:08.847
> 
> 标签：javascript, jquery, css

我正在处理[这个页面](http://yugo.ponchoalfonso.com/?p=16)。如您所见，这是一种方形网格布局。我想知道我是否可以定位一个占据 4 个正方形（中间为 2x2）的元素，并让其他元素环绕它，如下所示：

```
 _ _ _ _ _ _ _ _
|_|_|_|_|_|_|_|_|
|_|_|_|_|_|_|_|_|
|_|_|_|   |_|_|_|
|_|_|_|_ _|_|_|_|
|_|_|_|_|_|_|_|_|
|_|_|_|_|_|_|_|_| 
```

我想知道这是否可能？这个项目可以容忍对 JavaScript（vanilla 或 jQuery）的依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:57:41.780

我认为你可以这样做：http: [//jsfiddle.net/QrEr5/3/](http://jsfiddle.net/QrEr5/3/)

# java - PHP nusoap 到 java 复杂变量

> ID：11634547
> 
> 赞同：0
> 
> 时间：2012-07-24T15:45:15.337
> 
> 标签：java, php, soap, ksoap2, nusoap

我正在尝试将 2 个字符串从我的 php nusoap 服务器传回我的 ksoap2 客户端，但 ksoap2 没有将来自 nusoap 的响应拆分为不同的属性。

这是我在java中制作复杂对象的类。

```
import java.util.Hashtable;

import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class ArrayOfStrings implements KvmSerializable {

    public String Status;
    public String Data;

    public ArrayOfStrings(){}

    public ArrayOfStrings(String status, String data) {
        Status=status;
        Data=data;
    }

    @Override
    public Object getProperty(int arg0) {
        // TODO Auto-generated method stub
        switch (arg0) {
        case 0:
            return Status;
        case 1:
            return Data;
        }
        return null;
    }

    @Override
    public int getPropertyCount() {
        // TODO Auto-generated method stub
        return 2;
    }

    @Override
    public void getPropertyInfo(int index, Hashtable hashtbl, PropertyInfo pi) {
        // TODO Auto-generated method stub
        switch (index) {
        case 0:
        pi.type=PropertyInfo.STRING_CLASS;
        pi.name="Status";
        break;
        case 1:
        pi.type=PropertyInfo.STRING_CLASS;
        pi.name="Data";
        default: break;
        }
    }

    @Override
    public void setProperty(int index, Object o) {
        // TODO Auto-generated method stub
        switch (index) {
        case 0:
            Status = o.toString();
            break;
        case 1:
            Data = o.toString();
            break;
        default: break;
        }
    }

} 
```

这是在 PHP nusoap 中添加 complexType 的代码。

```
$server->wsdl->addComplexType("ArrayOfStrings",
        "complexType",
        "struct",
        "",
        "SOAP-ENC:Array",
        array('Status'=> array('name' => 'Status', 'type' => 'xsd:string'),
              'Data'=>  array('name' => 'Data', 'type' => 'xsd:string'))
);

$server->register("appswitch",     
        array(  "app" => "xsd:string",
                "content" => "xsd:string"),
        array("ArrayOfStrings" => "tns:ArrayOfStrings"),
        "urn:webservices",
        "urn:Submit#appswitch",
        "rpc",
        "encoded",
        "G4Apps Webservices Gateway"); 
```

有任何想法吗？

编辑：这是来自 php 的肥皂响应（是的，我知道这是一个错误。主机提供商有问题）

```
<?xml version="1.0" encoding="ISO-8859-1"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:webservices">
<SOAP-ENV:Body>
    <ns1:appswitchResponse xmlns:ns1="http://secure.g4apps.com/webservices/">
        <return xsi:type="tns:ArrayOfStrings">
            <Status xsi:type="xsd:string">error</Status>
            <Data xsi:type="xsd:string">
                Soap Service failed to insert data: 
                INSERT INTO phonelog (AppID,TransactionType, TransactionSubType, VirtualTagNo, SmartphoneID, TimeStampEvent, TimeStampLog, GPSLat, GPSLong, TruckID, TruckOdometer, TruckEngType)
                VALUES (&apos;A1&apos;,&apos;M1&apos;,&apos;E1&apos;,&apos;AT333AT333&apos;,&apos;9055627513&apos;,&apos;2012-02-02 02:02:02&apos;,&apos;2012-02-02 02:02:02&apos;,&apos;-454545.343434&apos;,&apos;434343.232323&apos;,&apos;A334A334A334A443X&apos;,&apos;1000000&apos;,&apos;3434&apos;)
            </Data>
        </return>
    </ns1:appswitchResponse>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我想我是在叫错树了。我根本不需要 ArrayOfStrings 类来从我的响应中提取值。

这是我的代码片段。

```
 SoapObject ks= (SoapObject)env.bodyIn;
        SoapObject inner = (SoapObject)ks.getProperty("return");
        String Status = inner.getProperty("Status").toString();
        String Data = inner.getProperty("Data").toString();

        //System.out.println(ht.requestDump);
        //System.out.println(ht.responseDump);

        System.out.println(Status.trim());
        System.out.println(Data.trim()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:54:34.247

我想我是在叫错树了。我根本不需要 ArrayOfStrings 类来从我的响应中提取值。

这是我的代码片段。

```
 SoapObject ks= (SoapObject)env.bodyIn;
    SoapObject inner = (SoapObject)ks.getProperty("return");
    String Status = inner.getProperty("Status").toString();
    String Data = inner.getProperty("Data").toString();

    //System.out.println(ht.requestDump);
    //System.out.println(ht.responseDump);

    System.out.println(Status.trim());
    System.out.println(Data.trim()); 
```

# javascript - 计算文本块中的字符并分成两列

> ID：11634550
> 
> 赞同：0
> 
> 时间：2012-07-24T15:45:23.120
> 
> 标签：javascript, jquery, count, character

我正在尝试将文本块自动转换为列，因为客户端没有很好地使用 html / CSS。

我编写了这个小脚本来搜索一个 div 以找到一个 hr 标签并自动将一个类添加到 p 标签。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        if($('#data').find('hr')){
            $('hr').prev('p').addClass('left');
            $('hr').next('p').addClass('right');
        }
    });
</script>

</head>
<body>

<div id="data">

<p>This is paragraph 1\. Lorem ipsum ... <br /><br />
This is paragraph 2\. Lorem ipsum ... <br /><br />
This is paragraph 3\. Lorem ipsum ... </p>
<hr />

<p>This is paragraph 4\. Lorem ipsum ... <br /><br />
This is paragraph 5\. Lorem ipsum ... <br /><br />
This is paragraph 6\. Lorem ipsum ... </p>

</div> 
```

但是，如果段落的长度不同，则此方法效果不佳，因为右列可能比左列大。

所以我需要重写它以计算字符并将其平均分割（或与左侧较大的部分尽可能接近。）但我不知道如何开始。因此，如果您能提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:49:48.077

鉴于您在正文中有段落标签，这应该可以在没有太多修改的情况下工作。无论您有多少段落，无论文本内容如何在它们之间传播，它都应该起作用。

```
/**
 * Create left and right divs
 */
var $left = $(document.createElement("div")).addClass('left');
var $right = $(document.createElement("div")).addClass('right');

/**
 * Store the text lengths into an array
 */
var textLengthArray = [];
var totalLength = 0;
$('p').each(function(){
    var $this = $(this);
    var text = $this.text();
    textLengthArray[textLengthArray.length] = text.length;
    totalLength += text.length;
});

/**
 * The midpoint is crucial
 */
var midpoint = totalLength / 2;

/**
 * pastParagraphs - is the text length of the paragraphs we've already moved
 * currentParagraphPos - keeps track of where we are
 * split - we only want to split one paragraph in two
 */
var pastParagraphs = 0            
var currentParagraphPos = 0;
var split = false;

/**
 * iterate over the textLengthArray (i.e. the paragraphs)
 * add them to the left until the text length would of all the paragraphs we've moved
 * into the left would exceed the midpoint. Then split the paragraph the midpoint falls into
 * from there on move paragraphs to the right div.
 */
for (i in textLengthArray) {                
    /**
     * This is the check to insure we aren't past the midpoint
     */
    if (pastParagraphs + textLengthArray[currentParagraphPos] < midpoint) {                    
        /**
         * Move the first paragraph to the left div. 
         * We always move the first because they filter down as we remove them.
         */
        $left.append($('p').eq(0));
        pastParagraphs += textLengthArray[currentParagraphPos];
        currentParagraphPos++;
    }
    else {                    
        /**
         * if we haven't split a paragraph already we should split this first paragraph going right in two.
         */
        if (!split) {
            split = true;

            /**
             * Create two new paragraphs, one for the left, one for the right
             */
            var $goLeft = $(document.createElement("p"));
            var $goRight = $(document.createElement("p"));

            /**
             * The split shouldn't fall in the middle of a word
             * so we run a while loop to find the next available space.
             */
            var splitIndex = midpoint - pastParagraphs;
            var splitPHtml = $('p').eq(0).html();
            while (splitPHtml.charAt(splitIndex) != ' ') {
                splitIndex++;
            }

            /**
             * As we've created two new paragraphs we need to manually remove this one
             */
            $('p').eq(0).remove();

            /**
             * Add the ontent to our new paragraphs and append them to the left and right divs
             */
            $goLeft.html(splitPHtml.substring(0, splitIndex));
            $goRight.html(splitPHtml.substring(splitIndex, splitPHtml.length));
            $left.append($goLeft);
            $right.append($goRight);
        }
        else {                        
            /**
             * Add any further paragraphs to the right div
             */
            $right.append($('p').eq(0));
            currentParagraphPos++;
        }
    }
}

/**
 * Finally we want to append our divs to the body.
 */
$('body').append($left);
$('body').append($right); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:14:37.313

首先，这不应该通过 JavaScript/jQuery 渲染到客户端来完成，你不应该构建布局，尽管 JavaScript/jQuery 只会改进它，

但至于你的代码，你可以这样做。

[http://jsfiddle.net/barkermn01/VTQeC/10/](http://jsfiddle.net/barkermn01/VTQeC/10/)

然后，您可以将 splitChar 更改为 a`"."`如果您希望它在句子中中断，或者`" "`如果您对单词感到高兴则将其保持打开状态

# opencv - JavaCV 计算 SIFT 关键点的 ORB 描述符

> ID：11634551
> 
> 赞同：2
> 
> 时间：2012-07-24T15:45:24.250
> 
> 标签：opencv, sift, javacv, orb

我在计算 SIFT 检测器找到的关键点的 ORB 描述符时遇到了很大的问题。如果我尝试运行一个简单的示例程序，整个系统就会冻结，我不知道为什么。示例代码如下：

```
import static com.googlecode.javacv.cpp.opencv_highgui.cvLoadImageM;

import com.googlecode.javacv.cpp.opencv_core.CvMat;
import com.googlecode.javacv.cpp.opencv_features2d.DescriptorExtractor;
import com.googlecode.javacv.cpp.opencv_features2d.FeatureDetector;
import com.googlecode.javacv.cpp.opencv_features2d.KeyPoint;
import com.googlecode.javacv.cpp.opencv_features2d.ORB;
import com.googlecode.javacv.cpp.opencv_nonfree.SIFT;

public class DescriptorTest {

    public static void main(String[] args) {
        SIFT sift = new SIFT(0, 3, 0.04, 10, 1.6);
        FeatureDetector detector = sift.getFeatureDetector();
        ORB orb_descriptor = new ORB(500, 1.2f, 8, 31, 0, 2, 0, 31);
        DescriptorExtractor descriptor = orb_descriptor.getDescriptorExtractor();        
        CvMat image = cvLoadImageM("res/dvd_009_ref.jpg");
        KeyPoint keypoints = new KeyPoint();
        CvMat descriptors = new CvMat(null);
        detector.detect(image, keypoints, null);
        System.out.println("Keypoints found: "+ keypoints.capacity());
        descriptor.compute(image, keypoints, descriptors);
        System.out.println("Descriptors calculated: "+descriptors.rows());
    }
} 
```

有谁知道问题是什么？会很好 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-18T06:18:05.977

我不知道这是否对您有帮助，您可能想查看Vladislav Vinogradov ( [http://code.opencv.org ) 给出的解决方法 (](http://code.opencv.org/issues/2987) [http://code.opencv.org/issues/2987 ) /用户/340](http://code.opencv.org/users/340)）。虽然这是一个 c++ 代码，但我相信你会明白的：

```
void unpackSIFTOctave(const KeyPoint& kpt, int& octave, int& layer, float& scale)
{
    octave = kpt.octave & 255;
    layer = (kpt.octave >> 8) & 255;
    octave = octave < 128 ? octave : (-128 | octave);
    scale = octave >= 0 ? 1.f/(1 << octave) : (float)(1 << -octave);
} 
```

这是一段时间以来的已知问题，他们似乎不打算修复它。

（是的，您可能希望保留关键点的数据，因为描述提取程序可能会使用这些数据来保持缩放/旋转不变，并且八度音程信息通常与关键点的“本地”描述性有关，并且）

希望这会有所帮助，（并且不需要再次编辑:)）

五

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:48:18.337

好的，所以如果我将关键点的八度音阶设置为 0，它似乎可以工作。我还不知道这是否是个好主意，但我倾向于拒绝。因为对于某些描述符来说，发现特征的尺度空间倍频程的信息是至关重要的。

```
for(int i = 0; i < keypoints.capacity(); i++) {
    KeyPoint kp = keypoints.position(i);
    kp.octave(0);
}
keypoints.position(0); 
```

# android - 在启动动画之前修改 android Views 的 z-order

> ID：11634552
> 
> 赞同：2
> 
> 时间：2012-07-24T15:45:26.753
> 
> 标签：android, android-layout, android-view, z-order

我正在尝试在我的 gridview 的一个项目中设置动画，但我坚持使用 z 顺序。事实上，当我执行我的动画（从`onItemClickListener`GridView 的一个）时，该项目比下一个项目（按 z 顺序）在下方，我希望它位于顶部。我尝试`bringToFront()`在该项目上使用，但它有点将它发送到 GridView 的末尾，所以这不是我想做的。您知道如何修改这些 GridView 项目的 z 顺序吗？

**编辑：**实际上，它似乎涉及所有视图，而不仅仅是 Gridviews。事实上，它尝试了一些东西`FrameLayout`：当我什么都不做时，它在其他对象下，当我使用时`bringToFront()`，FrameLayout 消失了。很奇怪！

# android - Galaxy Nexus 是小型、普通、大型还是超大型设备？

> ID：11634555
> 
> 赞同：2
> 
> 时间：2012-07-24T15:45:40.463
> 
> 标签：android, android-layout

我正在开发一个多屏 Android 2.2.2 应用程序。

为了测试不同的屏幕尺寸，我使用**了 eclipse** (Juno release)**图形布局**。这就是我所拥有的。

**main_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/no_conectado" >

    <TextView
        android:id="@+id/labelSelGateName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="@dimen/labelSelGateName_marginTop"
        android:gravity="center_horizontal"
        android:textSize="@dimen/labelSelGateName_textsize" />

    <TextView
        android:id="@+id/labelSelOpened"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/labelSelGateName"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="@dimen/labelSelOpened_marginTop"
        android:gravity="center_horizontal"
        android:textSize="@dimen/labelSelOpened_textsize" />

    <ProgressBar
        android:id="@+id/indicatorActivityView"
        android:layout_width="@dimen/indicatorActivityView_height"
        android:layout_height="@dimen/indicatorActivityView_width"
        android:layout_below="@+id/labelSelOpened"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="@dimen/indicatorActivityView_marginTop" />

    <ImageButton
        android:id="@+id/btnMyGates"
        android:layout_width="@dimen/btnMyGates_width"
        android:layout_height="@dimen/btnMyGates_height"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/indicatorActivityView"
        android:layout_marginLeft="@dimen/btnMyGates_marginLeft"
        android:layout_marginTop="@dimen/btnMyGates_marginTop"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onGateClick" />

    <ImageButton
        android:id="@+id/btnOpen"
        android:layout_width="@dimen/btnOpen_width"
        android:layout_height="@dimen/btnOpen_height"
        android:layout_alignTop="@+id/btnMyGates"
        android:layout_centerHorizontal="true"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onOpenDoorClick" />

    <ImageButton
        android:id="@+id/btnClose"
        android:layout_width="@dimen/btnClose_width"
        android:layout_height="@dimen/btnClose_height"
        android:layout_alignBottom="@+id/btnMyGates"
        android:layout_alignLeft="@+id/btnOpen"
        android:layout_marginBottom="@dimen/btnClose_marginBottom"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onCloseDoorClick" />

    <ImageButton
        android:id="@+id/btnOptions"
        android:layout_width="@dimen/btnOptions_width"
        android:layout_height="@dimen/btnOptions_height"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/btnMyGates"
        android:layout_marginRight="@dimen/btnOptions_marginRight"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onOptionClick" />

    <ImageButton
        android:id="@+id/btnFaqs"
        android:layout_width="@dimen/btnFaqs_width"
        android:layout_height="@dimen/btnFaqs_height"
        android:layout_marginTop="@dimen/btnFaqs_marginTop"
        android:layout_toLeftOf="@+id/btnOptions"
        android:layout_below="@+id/btnClose"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onFAQClick" />

    <ImageButton
        android:id="@+id/btnInfo"
        android:layout_width="@dimen/btnInfo_width"
        android:layout_height="@dimen/btnInfo_height"
        android:layout_alignLeft="@+id/btnOptions"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="@dimen/btnInfo_marginLeft"
        android:background="@null"
        android:contentDescription="@string/layout_empty"
        android:onClick="onInfoClick" />

</RelativeLayout> 
```

**尺寸.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="labelSelGateName_marginTop">40dp</dimen>
    <dimen name="labelSelGateName_textsize">14sp</dimen>

    <dimen name="labelSelOpened_marginTop">0dp</dimen>
    <dimen name="labelSelOpened_textsize">14sp</dimen>

    <dimen name="indicatorActivityView_width">20dp</dimen>
    <dimen name="indicatorActivityView_height">20dp</dimen>
    <dimen name="indicatorActivityView_marginTop">28dp</dimen>

    <dimen name="btnMyGates_width">70dp</dimen>
    <dimen name="btnMyGates_height">110dp</dimen>
    <dimen name="btnMyGates_marginLeft">29dp</dimen>
    <dimen name="btnMyGates_marginTop">60dp</dimen>

    <dimen name="btnOpen_width">90dp</dimen>
    <dimen name="btnOpen_height">55dp</dimen>

    <dimen name="btnClose_width">90dp</dimen>
    <dimen name="btnClose_height">50dp</dimen>
    <dimen name="btnClose_marginBottom">0dp</dimen>

    <dimen name="btnOptions_width">70dp</dimen>
    <dimen name="btnOptions_height">110dp</dimen>
    <dimen name="btnOptions_marginRight">30dp</dimen>

    <dimen name="btnFaqs_width">110dp</dimen>
    <dimen name="btnFaqs_height">70dp</dimen>
    <dimen name="btnFaqs_marginTop">10dp</dimen>

    <dimen name="btnInfo_width">110dp</dimen>
    <dimen name="btnInfo_height">60dp</dimen>
    <dimen name="btnInfo_marginLeft">14dp</dimen>
</resources> 
```

我`dimens.xml`在这些文件夹中有四个： `values-small`、`values-normal`和。`values-large``values-xlarge`

有了这些文件，它在`Nexus One`,`7in WSVGA Tablet`和`10.1in WXGA Tablet`. `Galaxy Nexus`但是，它在、`5.4 FWVGA`和中看起来不太`5.1 WVGA`好`4.7in WXGA`。

当我说它看起来不太好时，我的意思是每个`TextView`,`ImageButton`等都已移动并且它们不在正确的位置。

我需要更多文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:36:33.007

我认为这是 Android 初始设计的一个限制——它的 XML 布局不允许指定类似于 HTML 表格的基于百分比或类似表格的布局，即没有精确尺寸的布局。

“权重”属性不是一个选项，因为当我尝试指定任意布局时，Eclipse 告诉我“嵌套权重不利于性能”

限定符也不是一个好的架构解决方案，因为两个不同的设备可能在相同的“屏幕密度”对下限定，例如 HTC One S / HTC One X。这就是为什么谷歌重新设计它在 3.x 中引入 swdp 限定符.

对于 Android 2.3，您可以创建针对 480x800 优化的“默认”用户界面并将其布局在屏幕中心。它在 540x960 和更高的屏幕上看起来会更小，但仍然没有损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:58:45.380

Galaxy Nexus 有一个`normal`屏幕（它的分辨率是`1280 x 720`）并且有`xhdpi`密度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:00:51.077

Galaxy nexus（和 Galaxy s3 和 htc one x）具有正常的屏幕尺寸，具有 xhdpi 密度。

参考：

[http://www.youtube.com/watch?feature=player_detailpage&v=PwC1OlJo5VM#t=3047s](http://www.youtube.com/watch?feature=player_detailpage&v=PwC1OlJo5VM#t=3047s)

# javascript - 使用javascript最小化和最大化文本

> ID：11634556
> 
> 赞同：0
> 
> 时间：2012-07-24T15:45:54.533
> 
> 标签：javascript, jquery, html

当我们单击符号时，我编写了用于最小化和最大化文本的代码。我尝试了以下方法：

html代码：

```
<div style="font:12px verdana;background:#fefcd9;padding:10px 10px 10px 10px;border:solid 1px lightgray;" id="text">
Instructions<span id="min" style="cursor:pointer;float:right;">[+]</span><span id="max" style="cursor:pointer;float:right;">[-]</span><br/><br/>
Perhaps you should look for someone who will dig deep to learn about you, your business, your services and products. A writer who will put herself in the shoes of your potential customers in order to answer these important questions:hhhhhhhh
</div> 
```

javascript:

```
<script type="text/javascript">
$('#text').click(function(){
 $("#min").toggle(200);
    $("#max").toggle(200);
});
</script> 
```

在上面的第一个 div 中必须显示“instructions”和“[+]”。当我单击“[+]”符号时，它必须最大化 div 并显示所有剩余的文本。此外，[+] 符号必须替换为 [-] 符号，这将最小化文本。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:12:38.000

好的，我认为这个[jsFiddle](http://jsfiddle.net/k8Cgm/71/)会回答你的问题！

我使用了 jQuery UI 核心，因为使用它你可以用你的元素制作非常酷的动画，基本上你需要为每个按钮提供两个功能（相信我这是最好的方法）并提供一个按钮`display: none;`，所以当它切换 [ -] 和 [+] 改变你想要的地方。

所以js部分：

```
$(".tr").click(function() {
    $(".bc").toggle("blind");
    $(".tr").find("span").toggle();
}); 
```

html部分：

```
<div class="container clearfix" id="text">
    <div class="tl">Instructions</div><div class="tr"><span class="min-button">[-]</span><span class="max-button" style="display: none;">[+]</span><br/><br/></div>
    <div class="bc">
        Perhaps you should look for someone who will dig deep to learn about you, your business, your services and products. A writer who will put herself in the shoes of your potential customers in order to answer these important questions:hhhhhhhh</div>
</div> 
```

而css部分：

```
.container{
    margin-top: 40px;
    font:12px verdana;
    background:#fefcd9;
    padding:10px 10px 10px 10px;
    border:solid 1px lightgray;
    width: 400px;
}

.container .tl{
    position: relative;
    float: left;
}

.container .tr{
    position: relative;
    float: right;
}

.tr .min-button{
    cursor:pointer;
    float:left;
}

.tr .max-button{
    cursor:pointer;
    float:left;
}

.container .bc{
    position: relative;
    display: inline-block;
    float: right;
}

.clearfix:after
{
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}
.clearfix
{
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:05:00.923

尝试这个：

[http://jsfiddle.net/VvkSZ/](http://jsfiddle.net/VvkSZ/)

HTML：

```
<div style="font:12px verdana;background:#fefcd9;padding:10px 10px 10px 10px;border:solid 1px lightgray;" >Instructions
    <span id="min" style="cursor:pointer;float:right;">[-]</span>
    <br/><br/>
    <div id="text">
Perhaps you should look for someone who will dig deep to learn about you, your business, your services and products. A writer who will put herself in the shoes of your potential customers in order to answer these important questions:hhhhhhhh
    </div>
</div>​ 
```

JS：

```
$('#min').click(function(){
 $("#text").toggle(200);    
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:53:36.137

你可能不想`slideToggle()`使用`toggle()`

要显示的文本也应该首先隐藏

# ios5 - 为正常状态配置带有背景图像的 UIButton 的突出显示颜色

> ID：11634559
> 
> 赞同：0
> 
> 时间：2012-07-24T15:46:05.347
> 
> 标签：ios5, uibutton

如果 UIButton 的背景图片设置为正常状态，即 UIControlStateNormal，那么在没有其他图片的情况下配置选择颜色是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:08:50.590

为 UIControlStateHighlighted 设置相同的背景图像，并为相同的突出显示状态设置按钮文本颜色。

希望这是您所需要的。

# cognos - cognos greenplum pg_catalog

> ID：11634564
> 
> 赞同：1
> 
> 时间：2012-07-24T15:46:16.030
> 
> 标签：cognos, greenplum

我正在使用 Cognos 报告和 Greenplum 数据库。

我的报告运行时间过长。所以我查看了绿梅日志，发现查询 pg_catalog 的时间有一半。在目录中，我不是在查看 pg_catalog 而是在其他表上，所以我不明白为什么 cognos 决定查看 pg_catalog 表。

当我运行 cognos 报告时，我可以从 greenplum 日志中看到，对于某些查询，cognos 在运行查询之前在 pg_catalog 上运行 select。

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:27:33.997

pg_catalog 包含有关表、列和其他数据库对象的元数据。我认为您的问题是目录膨胀。基本上，如果您需要等待几秒钟来列出表（在 psql 中使用 \d），那么您应该清理您的目录。

在 GP 管理员指南中查看“第 19 章：日常系统维护任务”-“常规系统目录维护”。

> Greenplum 建议您定期在系统目录上运行 VACUUM 以清除已删除对象占用的空间。如果大量 DROP 语句是常规数据库操作的一部分，那么每天在非高峰时间使用 VACUUM 运行系统目录维护过程是安全且合适的。这可以在系统运行且可用时完成。以下示例脚本执行 Greenplum 数据库系统目录的 VACUUM：

```
#!/bin/bash
DBNAME="<database_name>"
VCOMMAND="VACUUM ANALYZE"
psql -tc "select '$VCOMMAND' || ' pg_catalog.' || relname || ';' from pg_class a,pg_namespace b where a.relnamespace=b.oid and b.nspname= 'pg_catalog' and a.relkind='r'" $DBNAME | psql -a $DBNAME 
```

# google-search - Google 是否将图像中的文本编入索引以进行搜索

> ID：11634570
> 
> 赞同：1
> 
> 时间：2012-07-24T15:46:30.507
> 
> 标签：google-search, google-sites, google-image-search

我需要避免在 Google 站点搜索中查找文件，因此我以在站点上查找信息时不会出现的方式命名它们。

但是，我注意到在搜索文本中存在的单词时会出现包含一些文本的图像文件。搜索是否有可能为图像中的文本编制索引，还是我在看别的东西？

如果它确实索引图像中的文本，有什么办法可以避免这种情况或完全禁用它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T07:48:04.483

Google 确实可以读取图像文件中的文本。他们拥有这项技术的专利，我自己有时在图像结果中也看到过。

# sql - 按字段名（列）在 SQL Server 中的位置分组

> ID：11634572
> 
> 赞同：1
> 
> 时间：2012-07-24T15:46:45.127
> 
> 标签：sql, group-by

我有一种情况，我必须连接两列并根据所选字段的位置对选择进行分组。这在 SQL 中是否可能。

我的示例代码不执行。这里， GROUP BY 4 必须按 po_noRM 分组

```
SELECT Table_A.Po_no, Table_A.rmcode, SUM(Table_A.weight) as recvqty,
    LTRIM(RTRIM(Table_A.po_no)) + LTRIM(RTRIM(MBStran.rmcode)) as po_noRM
FROM Table_A
GROUP BY 4
ORDER BY Table_A.Po_no 
```

**已编辑 Table_A** 中的所有数据都是 varchar(20) 类型

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T15:55:54.990

如果你不喜欢重复复杂的表达式，你可以使用子查询来代替：

```
select Table_A.Po_no, Table_A.rmcode, SUM(Table_A.weight) as recvqty,
       po_noRM
from (SELECT Table_A.Po_no, Table_A.rmcode, 
             LTRIM(RTRIM(Table_A.po_no)) + LTRIM(RTRIM(Table_A.rmcode)) as po_noRM
      FROM Table_A
     ) T
group by po_noRM, Po_no, rmcode
ORDER BY 1 desc 
```

这对性能没有影响。

我修复了查询以包括除 group b 语句中的总和之外的所有列。此外，在 rtrim(ltrim()) 语句中还提到了另一个表。我将其更改为 Table_A。

但是，我怀疑这个查询并没有做你真正想要的（这是为了减少返回的行数，因为你仍然按 po_noRM 的组件进行分组）。这可能更接近您想要的：

```
select Po_no_trim, rmcode_trim, SUM(Table_A.weight) as recvqty,
       (po_no_trim+rmcode_trim) as po_noRM
from (SELECT LTRIM(RTRIM(Table_A.po_no)) as po_no_trim,
             LTRIM(RTRIM(Table_A.rmcode)) as rmcode_trim, Table_A.weight
      FROM Table_A
     ) T
group by po_noRM_trim, Po_no_trim
ORDER BY 1 desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:51:29.937

您在语句中包含的任何字段都`SELECT`必须在聚合函数中或必须在`GROUP BY`

```
SELECT Table_A.Po_no, Table_A.rmcode, SUM(Table_A.weight) as recvqty,
    LTRIM(RTRIM(Table_A.po_no)) + LTRIM(RTRIM(MBStran.rmcode)) as po_noRM
FROM Table_A
GROUP BY Table_A.Po_no, Table_A.rmcode, LTRIM(RTRIM(Table_A.po_no)) + LTRIM(RTRIM(MBStran.rmcode))
ORDER BY Table_A.Po_no 
```

# javascript - 为什么我没有定义参数时会出现无限循环？

> ID：11634573
> 
> 赞同：6
> 
> 时间：2012-07-24T15:46:45.663
> 
> 标签：javascript, algorithm

我想知道为什么我在这里得到一个无限循环。我只是不想传递这个初始值，所以如果它们是，`undefined`它们会自动计算。它只是为了清理我的函数调用以仅使用一个参数。如果我通过它们，一切运行正常，过程结束。任何人都可以帮忙吗？谢谢

```
function merge(array, lower, half, upper){
    //Suppressed for the sake of brevity
}

function mergeSort(array, lower, upper){
    if(!lower && !upper){ //take a look here
        lower = 0;
        upper = array.length - 1;
    }

    if(lower < upper){
        var half = Math.floor((lower + upper)/2);

        mergeSort(array, lower, half);
        mergeSort(array, half + 1, upper);
        merge(array, lower, half, upper);
    }
}

var array = [8, 3, 6, 4, 1, 0, 23, 12, 15, 63];
mergeSort(array); //infinite loop here
console.log(array); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T15:49:55.047

你第一次递归调用将`mergeSort`它作为第一个参数传递`0`，因为你设置它。

因为`!0`也评估为`false`, 给你..

`undefined`使用`typeof`运算符更好地检查

```
if(typeof lower === 'undefined' && typeof upper === 'undefined'){ //take a look here
    lower = 0;
    upper = array.length - 1;
} 
```

或者，更好的是，检查`arguments.length`, 像

```
if( arguments.length === 1 ) {
   var lower = 0,
       upper = array.length -1 ;
} 
```

# c# - C# 错误：类型“x”已经定义了一个名为“y”的成员，具有相同的参数类型

> ID：11634578
> 
> 赞同：4
> 
> 时间：2012-07-24T15:47:10.653
> 
> 标签：c#

在[Visual C# Express](https://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express#Visual_C.23_Express)上，我收到以下代码错误：

> '类型'myComponent.SettingsComponent'已经定义了一个名为'SolveInstance'的成员，具有相同的参数类型'

但我只在`SolveInstance`那里使用过。我做错了什么，下次我怎么能自己解决这个问题？

```
namespace myComponent
{
    public class SettingsComponent : GH_Component
    {
        protected override void SolveInstance(IGH_DataAccess DA)
        {
        }

        protected override void  RegisterOutputParams(GH_Component.GH_OutputParamManager pManager)
        {
        }

        protected override void SolveInstance(IGH_DataAccess DA)
        {
            if (m_settings == null)
            {
                AddRuntimeMessage(warning, "You must declare some valid settings");
                return;
            }
            DA.SetData(0, m_settings);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T18:10:39.240

看起来你有两个实例

```
protected override void SolveInstance(IGH_DataAccess DA) 
```

在您的示例类中，一个带有空主体，一个带有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T15:54:18.610

尝试在项目中查找 SolveInstance 的所有出现。您可能会在 .designer.cs 文件中找到此方法的另一个定义。它们是自动生成的，有时会导致重复问题。

# c++ - 镶嵌点平面

> ID：11634581
> 
> 赞同：8
> 
> 时间：2012-07-24T15:47:19.413
> 
> 标签：c++, algorithm, math

我有一个充满 3d 点的文件。这些点形成一个平面。这是一个示例文件：

```
25
1 -1 0
1 -0.5 0
1 0 0
1 0.5 0
1 1 0
0.5 -1 0
0.5 -0.5 0
0.5 0 0
0.5 0.5 0
0.5 1 0
0 -1 0
0 -0.5 0
0 0 0
0 0.5 0
0 1 0
-0.5 -1 0
-0.5 -0.5 0
-0.5 0 0
-0.5 0.5 0
-0.5 1 0
-1 -1 0
-1 -0.5 0
-1 0 0
-1 0.5 0
-1 1 0 
```

编辑：由于我的示例点集太简单了，这里有一个更复杂的示例。

```
30
-0.298858 -0.816497 1.11536
0.0546949 -0.816497 0.761802
0.408248 -0.816497 0.408248
0.761802 -0.816497 0.0546949
1.11536 -0.816497 -0.298858
-0.462158 -0.489898 0.952056
-0.108604 -0.489898 0.598502
0.244949 -0.489898 0.244949
0.598502 -0.489898 -0.108604
0.952056 -0.489898 -0.462158
-0.625457 -0.163299 0.788756
-0.271904 -0.163299 0.435203
0.0816497 -0.163299 0.0816497
0.435203 -0.163299 -0.271904
0.788756 -0.163299 -0.625457
-0.788756 0.163299 0.625457
-0.435203 0.163299 0.271904
-0.0816497 0.163299 -0.0816497
0.271904 0.163299 -0.435203
0.625457 0.163299 -0.788756
-0.952056 0.489898 0.462158
-0.598502 0.489898 0.108604
-0.244949 0.489898 -0.244949
0.108604 0.489898 -0.598502
0.462158 0.489898 -0.952056
-1.11536 0.816497 0.298858
-0.761802 0.816497 -0.0546949
-0.408248 0.816497 -0.408248
-0.0546949 0.816497 -0.761802
0.298858 0.816497 -1.11536 
```

这些点绘制如下：

![http://i.imgur.com/6zRrA.png](../Images/fd60f7c7d3f2c7fd98cec36001cd7b2c.png)

该文件指出平面上有 25 个点，并列出了这些点。这些点有规律地间隔开。基于此信息，我如何从点数据中形成三角形并将其存储在`std::vector<Tri>`where `Tri`is a

```
struct Tri 
{
  double x1, y1, z1;
  double x2, y2, z2;
  double x3, y3, z3;
}; 
```

另请注意：问题限制：不允许使用外部库。不允许使用 C++0X（编译器：g++ 4.5.2）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:06:35.247

阅读第一行，调用它`N`。将其余点读入数组`A`。

```
Point xdir = A[1] - A[0];
int xdim = 2;
while (A[xdim] - A[xdim-1] == xdir) xdim++;
int ydim = N / xdim;
for (int y = 0; y < ydim-1; y++) {
   for (int x = 0; x < xdim-1; x++) {
      addTriangle(A[y*xdim+x],A[(y+1)*xdim+x],A[(y+1)*xdim+(x+1)]);
      addTriangle(A[y*xdim+x],A[y*xdim+(x+1)],A[(y+1)*xdim+(x+1)]);
   }
} 
```

当然，这假设您确实按照网格顺序获得了所有积分。如果没有，请先对它们进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:29:52.447

当然有很多不同的方法可以从一组顶点中获取一组三角形，所以我不确定我是否理解整个问题的要求。

但我的方法可能看起来像这样：

1.  为了解决浮点舍入和/或数据准确性问题，我将首先使用最小二乘拟合算法之类的方法确定平面的法线向量。（虽然你不需要飞机本身，只需要方向。）

2.  编写算法以使用该法线向量来确定一些常见的平面问题，例如“点 D 在三角形 ABC 的内部吗？” 和“线段 AB 和 CD 相交吗？” （在平面投影中）。

如果您有一些已知的输入结构，从这一点开始很容易，或者您想要使用现有的平面算法，那就太好了。

如果您只想获得任何一组细分凸包的非重叠三角形：

1.  从任意三个点和一个三角形开始。还记得一个有序的顶点循环，形成到目前为止所覆盖区域的边界多边形。然后一次一个地添加其余的点。

2.  如果要添加的新点位于现有三角形的内部，则将该三角形替换为三个子三角形。

3.  否则，确定从边界多边形顶点到新点的哪些 N (N>=2) 条线段不与边界多边形相交。添加 (N-1) 个新三角形。新点将 (N-2) 个旧点替换为边界多边形中的新顶点。

4.  假设避免几乎共线的三角形和不必要的长线段是一件好事：遍历不在边界上的三角形边缘，并检查两个相邻三角形覆盖的四边形是否是凸的，以及它的另一个对角线是否（显着) 比正在研究的常见三角形边短。如果是这样，请替换这两个三角形。重复直到不能再进行这样的替换。（这个循环必须终止，因为边的总长度总是在减少，并且有有限数量的镶嵌。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:11:46.037

将平面上的网格分成一组线。通过取一条线上的每对相邻点并将相邻线上该对中每个成员的最近点添加到该对中来给出曲面细分。

您可以使用矢量算术将平面分成线。将文件中的第一个点作为平面基础，将第二个点的向量作为您的 X 轴。将向量从第一个点投影到 X 轴向量上的任意一点，并将投影的长度作为 X 坐标。由于您假设一个规则网格，这些值应该是 0、1、2、3 等等，直接将点分割成线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:12:47.453

对于镶嵌算法，尝试创建相邻点的直角三角形并将其推送到向量（不重叠）。假设您以正确的顺序将所有点存储在`m x n`矩阵中，您可以创建这组三角形：

*   `{(i,j),(i+1,j),(i+1,j+1)}`对于`0 < i < m-1`和`0 < j < n-1`。
*   `{(i,j+1), (i+1,j+1), (i,j)`对于`0 < i < m-1`和`0 < j < n-1`。

我对三角形使用 {p1,p2,p3} 的形式，对矩阵中点的索引对使用 (x,y) 形式。在您的情况下，这些**m**和**n**变量也等于 5。

# android - Phonegap、Android、Jquery Mobile 和内存使用情况

> ID：11634585
> 
> 赞同：1
> 
> 时间：2012-07-24T15:47:36.173
> 
> 标签：android, jquery-mobile, memory, cordova, slider

我有 3 个不同的页面，目前只有第一个包含更多的逻辑和变量。当我用我的 Nexus 7 测试滑块时，我得到了这个：

```
07-24 09:36:01.363: D/Cordova(10976):
onPageFinished(file:///android_asset/www/index.html#/android_asset/www/testSlider.html)
07-24 09:36:01.363: D/CordovaWebView(10976): >>> loadUrlNow()
07-24 09:36:01.363: D/DroidGap(10976): onMessage(onNativeReady,null)
07-24 09:36:01.363: D/DroidGap(10976):
onMessage(onPageFinished,file:///android_asset/www/index.html#/android_asset/www/testSlider.html)
07-24 09:36:17.463: D/dalvikvm(10976): GC_CONCURRENT freed 470K, 10%
free 8084K/8967K, paused 19ms+7ms, total 83ms 
```

那么是关于内存还是jquery移动滑块中存在巨大的内存泄漏？甚至有可能吗，因为我只有 3 个几乎是空的页面，最后一个是滑块（虽然不工作），它们在浏览器中工作，但在 nexus 7 中没有。

如果有人在phonegap + jqm + Android中实现了多页面应用程序，你能告诉我这是否可能，如果是的话，我如何增加Nexus或模拟器中jvm的内存量或如何管理我的应用程序中的内存使用. 我刚刚将几个控制台日志插入到滑块以检查它是否工作，但我只是得到了那个内存行，根本没有日志，就像我说的那样，它在浏览器中工作，但在真实设备中没有。

**代码在这里**

```
package com.mycordova.hellocordova;

import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import org.apache.cordova.*;

public class HelloCordovaActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }

} 
```

* * *

```
<!DOCTYPE html>
<html>
<head> 

<title>conditions</title> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

<script type="text/javascript">
function onload(){
    $("#temperature").on("change", function(e){
        var newTemp = $("#temperature").val();
        console.log("newTempnewTempnewTempnewTemp---->" +newTemp)
        $("#temp").val(newTemp);
    });

}

</script>

</head> 

<body onload="onload()"> 
<div data-role="page" data-theme="a">
    <div data-role="header">

<h1>Conditions</h1>
    </div>

    <div data-role="fieldcontain">
        <label for="temperature">Temperature22:</label>
        <input type="range" name="temperature" id="temperature" value="15" min="-15" max="60" data-highlight="true" />
        <label for="temp">Echo Temp</label>
        <input type="text" value="" id="temp" />
    </div>
</div>
</body>
</html> 
```

从一页到另一页的跳转就是这样发生的。条件页面是有问题的！

```
<div data-role="footer" data-position="fixed">
    <div data-role="navbar" style="font-size: -2">
        <ul>
        <li><a href="index.html" class="ui-btn-active">Index</a></li>
        <li><a href="conditions.html" data-transition="pop"
        data-direction="reverse">Conditions</a></li>

    </ul>
    </div>
</div> 
```

* * *

现在的情况是滑块页面（称为条件）在第一页时工作正常，但在第二页时它不再工作。我试图将两个页面都放在第一页中，但最终结果相同。但这很有帮助，因为我一直在指责 JQM 和我的 jS，所以现在我知道这是另外一回事。

顺便说一句，当我在浏览器中测试我的应用程序时，它不起作用，但是当我刷新页面时，它就会开始工作。这是我做过的最奇怪的应用程序。

@tencent 询问更多日志，这里是：

```
07-24 23:26:59.910: D/Cordova(20550): onPageFinished(file:///android_asset/www/index.html#conditions)
07-24 23:26:59.910: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:26:59.910: D/DroidGap(20550): onMessage(onNativeReady,null)
07-24 23:26:59.910: D/DroidGap(20550): onMessage(onPageFinished,file:///android_asset/www/index.html#conditions)---> Transition to next page where that slider is.
07-24 23:27:21.490: D/SoftKeyboardDetect(20550): Ignore this event**----> I Tried to write to disabled echo-fied**
07-24 23:27:21.690: D/SoftKeyboardDetect(20550): Ignore this event
07-24 23:27:28.120: D/SoftKeyboardDetect(20550): Ignore this event
07-24 23:27:33.470: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:33.470: D/DroidGap(20550): onDestroy()**--->Somewhere here it crashed and closed the app!!**
07-24 23:27:33.480: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:33.480: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:33.670: D/DroidGap(20550): DroidGap.onCreate()
07-24 23:27:33.690: D/CordovaWebView(20550): Origin to allow: http://127.0.0.1*
07-24 23:27:33.690: I/CordovaLog(20550): Found log level DEBUG
07-24 23:27:33.690: I/CordovaLog(20550): Changing log level to DEBUG(3)
07-24 23:27:33.690: I/CordovaLog(20550): Found preference for useBrowserHistory=false
07-24 23:27:33.690: D/CordovaLog(20550): Found preference for useBrowserHistory=false
07-24 23:27:33.700: D/DroidGap(20550): DroidGap.init()
07-24 23:27:33.700: D/CordovaWebView(20550): >>>loadUrl(file:///android_asset/www/index.html)
07-24 23:27:33.700: D/PluginManager(20550): init()
07-24 23:27:33.700: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:33.710: D/CordovaLog(20550): exception firing pause event from native
07-24 23:27:33.710: D/CordovaLog(20550): null: Line 1 : exception firing pause event from native
07-24 23:27:33.710: I/Web Console(20550): exception firing pause event from native at null:1
07-24 23:27:33.710: D/CordovaLog(20550): exception firing destroy event from native
07-24 23:27:33.710: D/CordovaLog(20550): null: Line 1 : exception firing destroy event from native
07-24 23:27:33.710: I/Web Console(20550): exception firing destroy event from native at null:1
07-24 23:27:33.710: D/SoftKeyboardDetect(20550): Ignore this event
07-24 23:27:33.730: D/DroidGap(20550): onMessage(onPageStarted,about:blank)
07-24 23:27:33.730: D/Cordova(20550): onPageFinished(about:blank)
07-24 23:27:33.730: D/DroidGap(20550): onMessage(onPageFinished,about:blank)
07-24 23:27:33.730: D/DroidGap(20550): onMessage(exit,null)
07-24 23:27:33.760: D/DroidGap(20550): onMessage(onPageStarted,file:///android_asset/www/index.html)
07-24 23:27:33.770: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:33.810: D/SoftKeyboardDetect(20550): Ignore this event
07-24 23:27:33.820: D/DroidGap(20550): onDestroy()
07-24 23:27:33.820: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:33.820: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:34.160: W/IInputConnectionWrapper(20550): showStatusIcon on inactive InputConnection
07-24 23:27:34.250: D/CordovaLog(20550): exception firing pause event from native
07-24 23:27:34.250: D/CordovaLog(20550): null: Line 1 : exception firing pause event from native
07-24 23:27:34.250: I/Web Console(20550): exception firing pause event from native at null:1
07-24 23:27:34.260: D/CordovaLog(20550): exception firing destroy event from native
07-24 23:27:34.260: D/CordovaLog(20550): null: Line 1 : exception firing destroy event from native
07-24 23:27:34.260: I/Web Console(20550): exception firing destroy event from native at null:1
07-24 23:27:34.260: D/Cordova(20550): onPageFinished(file:///android_asset/www/index.html)
07-24 23:27:34.260: D/CordovaWebView(20550): >>> loadUrlNow()
07-24 23:27:34.260: D/DroidGap(20550): onMessage(onNativeReady,null)
07-24 23:27:34.260: D/DroidGap(20550): onMessage(onPageFinished,file:///android_asset/www/index.html)
07-24 23:27:34.270: D/DroidGap(20550): onMessage(onPageStarted,about:blank)
07-24 23:27:34.290: D/Cordova(20550): onPageFinished(about:blank)
07-24 23:27:34.290: D/DroidGap(20550): onMessage(onPageFinished,about:blank)
07-24 23:27:34.300: D/DroidGap(20550): onMessage(exit,null)
07-24 23:27:36.270: D/DroidGap(20550): onMessage(spinner,stop)
07-24 23:27:36.300: D/DroidGap(20550): onMessage(spinner,stop) 
```

# joomla - 奇怪的 Joomla JRoute() 行为

> ID：11634587
> 
> 赞同：0
> 
> 时间：2012-07-24T15:47:37.987
> 
> 标签：joomla, joomla-component

为什么 JRoute 包含未在输出 SEF Url 中设置的部分？

示例：我有一个列出项目的视图，每个项目都链接到具有 ID 的另一个视图（项目）。当我将查询字符串的所有部分放在一起时，我会在 URL 上获得两个视图：

domain.com/index.php/component/items/item/1-alias **_** _ **_** _

代替

domain.com/index.php/component/ **item** /1-别名

因为我对组件的所有部分使用不同的视图，而不是布局。

两个 URL 都可以正常工作，但为什么会这样呢？我不希望它使用项目的原始视图构建 SEF URL，而只是单个项目的视图。如果 Item 视图没有获取 Items 视图的菜单参数，那将不是问题。

编辑：

这就是我使用 JRoute::_() 方法的方式。

```
JRoute::_( 'index.php?option=com_componentname&view=show&show_id='.$item->slug); 
```

以及 router.php 脚本的内容

```
jimport('joomla.database.databasequery');

function ComponentnameBuildRoute(&$query) {

    $segments = array();

    if(isset($query['view'])) {
        $view = $query['view'];
        $segments[] = $view;
        unset($query['view']);
    }

    if(isset($query['task'])) {
        $view = $query['task'];
        $segments[] = $view;
        unset($query['task']);
    }

    if(isset($query['show_id'])) {
        $view = $query['show_id'];
        $segments[] = $view;
        unset($query['show_id']);
    }

    if(isset($query['genre_id'])) {
        $view = $query['genre_id'];
        $segments[] = $view;
        unset($query['genre_id']);
    }

    if(isset($query['rated_id'])) {
        $view = $query['rated_id'];
        $segments[] = $view;
        unset($query['rated_id']);
    }

    return $segments;
}

function ComponentnameParseRoute($segments) {

    $vars = array();

    switch($segments[0]) {

        case 'show':
            $vars['view'] = $segments[0];
            $id = explode('-', $segments[1]);
            $vars['show_id'] = (int)$id[0];
            break;
        case 'genre':
            $vars['view'] = $segments[0];
            $vars['genre_id'] = (int)$segments[1];
            break;
        case 'rating':
            $vars['view'] = $segments[0];
            $vars['rated_id'] = (int)$segments[1];
            break;
        case 'shows':
            $vars['view'] = $segments[0];
            break;
        case 'genres':
            $vars['view'] = $segments[0];
            break;
        case 'ratings':
            $vars['view'] = $segments[0];
            break;
    }

    return($vars);
} 
```

# android - Android，正在使用 GPS，但我不知道现实世界的坐标是如何工作的

> ID：11634590
> 
> 赞同：1
> 
> 时间：2012-07-24T15:47:49.370
> 
> 标签：android, gps

我想在世界上找到两个经纬度坐标之间的角度，但我真的不知道它是如何工作的，因为世界是一个地球仪，我不确定简单的 arctan(dy/dx) 是否有效。我应该将其视为 2D 平面还是什么？我会在两个世界坐标之间使用简单的 arctan 得到准确的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:54:37.637

您可以将坐标插入 2 个[Location](http://developer.android.com/reference/android/location/Location.html)对象，并使用[BearingTo](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)方法。你会收到一个浮动的角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:56:31.953

我不确定你想计算什么，因为有了纬度和对数，你就可以在地球上得到一个点。

或者你想要纬度圈和经度圈之间的交点角度吗？

您可以阅读 WGS84（1984 年世界大地测量系统）如何从大地坐标到任何其他坐标，如果您给我更多输入，我可以帮助您处理数据。

问候

# c# - 使用 Xpath 提取属性

> ID：11634594
> 
> 赞同：0
> 
> 时间：2012-07-24T15:48:11.670
> 
> 标签：c#, winforms, xpath

我需要从 XML 文件中提取属性，然后将它们添加到列表视图中。

如何使用 Xpath (winforms) 提取属性：

例如：

```
<element foo="1" meh="2" lol="3" hi="4">meh</element> 
```

例如，如何提取“foo”和“lol”中的数据？（所以“1”和“3”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:52:10.940

```
/element/@foo
/element/@lol 
```

当然，如果您想从 ac# 应用程序中获取此类节点，则需要执行以下操作：

```
 XmlDocument o = new XmlDocument();
  o.Load(@"c:\file.xml");
  var attribute1 = o.SelectSingleNode("/element/@foo"); 
```

# ios - PNG图像在模拟器上可以，但不显示在设备上

> ID：11634596
> 
> 赞同：5
> 
> 时间：2012-07-24T15:48:15.157
> 
> 标签：ios, ios-simulator

我的 iphone 应用程序从一个包中提取了大约 300 张图像，然后在我的一个视图控制器上随机显示一张。这在模拟器（xcode 4.3.3 / iphone 5.0 或 5.1 模拟器）上运行良好，但当我将它推送到我的设备（iphone 3gs）时却不行。应用程序运行并且日志上没有错误，但是图像应该是视图的那部分只是空白，就像背景的颜色一样。

我尝试过的事情：

1.  我已经检查并仔细检查了文件名与代码中引用的大小写。
2.  我检查了名为 Copy Bundle Resources 的构建阶段，它肯定设置为将包复制到设备。
3.  我查看了构建生成的日志，虽然这是我第一次详细检查它，但它没有错误，并且似乎正在复制包。这是日志中的片段：

    ```
    CpResource FlagQuiz/flagimages.bundle /Users/ian/Library/Developer/Xcode/DerivedData/FlagQuiz-drrjrlxfifrmbnaissqfqxuixchb/Build/Products/Debug-iphoneos/FlagQuiz.app/flagimages.bundle
    cd /Users/ian/Documents/xcodeapps/FlagQuiz
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    builtin-copy -exclude .DS_Store -exclude CVS -exclude .svn -exclude .git -exclude .hg -resolve-src-symlinks -strip-tool /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip /Users/ian/Documents/xcodeapps/FlagQuiz/FlagQuiz/flagimages.bundle /Users/ian/Library/Developer/Xcode/DerivedData/FlagQuiz-drrjrlxfifrmbnaissqfqxuixchb/Build/Products/Debug-iphoneos/FlagQuiz.app 
    ```

这是根据要求提供的捆绑包截图：[https ://skitch.com/bobsmells/eeask/flagquiz.xcodeproj-afghanistan.png](https://skitch.com/bobsmells/eeask/flagquiz.xcodeproj-afghanistan.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T18:25:48.167

已知 Xcode 压缩 PNG 文件的问题。我亲自向 App Store 提交了一个应用程序，该应用程序拒绝被接受，因为它损坏了 PNG 文件 - 但事实并非如此。原来 Xcode 在构建时破坏了它们。

也许这是同一个问题。

转到项目 -> 构建设置并尝试将“压缩 PNG 文件”设置为否。

# sql-server - 放弃从另一个会话/连接执行存储过程

> ID：11634600
> 
> 赞同：2
> 
> 时间：2012-07-24T15:48:36.067
> 
> 标签：sql-server, tsql, stored-procedures

我有一个昂贵的存储过程，它在表中的数据更改后运行，以便预先计算这些数据的一些聚合。（如果相关，SP 由应用程序调用，而不是由表上的触发器调用，尽管这不是硬性要求）。存储过程几乎完全是一个`INSERT INTO ... SELECT`语句。

数据通常不经常更改（即 SP 调用不频繁），但原则上它们可以重叠。为了确保在这种情况下的一致性，我使用`sp_getapplock`这样第二次调用将等待第一次调用完成后再继续。

这可行，但等待效率低下且不必要 - 我的存储过程所做的第一件事是删除所有现有（现已过时的）数据。我真正想要的是第二次调用告诉第一个“不要打扰你正在做的事情，现在事情已经改变了 - 停止运行，我会让事情保持正确的状态”。

在这种情况下，第二次调用是否有可靠地中止第一次 SP 调用的可靠方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T21:00:07.287

您真的需要在*每次*更改后重新聚合吗？

后续更新推迟到正在进行的更新是否足够好？

即使您可以中断它，您也必须等待它回滚事务，这可能比等待它完成需要更长的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T21:06:24.023

没有办法可以优雅地做到这一点。如果您对一个语句发出“kill”，您可以将该语句的连接留在未知状态。此外，正如@GilM 正确指出的那样（+1） - 回滚可能需要比完成时间更长的时间，具体取决于执行的阶段。

所以这里有一个你可能没有想到的建议。您是否考虑过使用索引视图？您可以在标准版中使用它们，但您需要使用`WITH (NOEXPAND)`提示查询它们才能获得好处。但是，您可以简单地将该视图包装在另一个包含提示的视图中。

这样你就可以用一些非常好的东西来代替整个过程：

*   它已为您更新，完全透明。
*   这将比“重新聚合整个集合”更有效。

# mongodb - MongoDB 空字段或真/假

> ID：11634601
> 
> 赞同：10
> 
> 时间：2012-07-24T15:48:37.113
> 
> 标签：mongodb

在 MongoDB 上，当我们有诸如“草稿”（是/否）、“已发布”（是/否）等字段时，哪个是最好的策略？在所有记录中创建字段并输入“是”/“否”值或将字段放在存在的位置？

```
posts: [{_id:1, text:"hello", draft:true},{_id:2 text:"world", draft:false}] 
```

或者

```
posts: [{_id:1, text:"hello", draft:true},{_id:2 text:"world"}] 
```

哪个更快？这是针对大量数据的。

最好的问候，若昂

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T18:46:48.363

快点干什么？当值为 false 时省略该字段将导致文档稍小，这可能会导致整体速度略有提高。

但是省略该字段会使查询 false 变得更加困难，特别是如果您混合了省略字段和显式 false 值。

请注意此示例集合的不同查询返回的内容：

```
> db.test.find()
{ "_id" : ObjectId("500eeb7c42d87d5d861e1219") }
{ "_id" : ObjectId("500eeb8242d87d5d861e121a"), "b" : false }
{ "_id" : ObjectId("500eeb8642d87d5d861e121b"), "b" : true }
> 
> db.test.find({b:true})
{ "_id" : ObjectId("500eeb8642d87d5d861e121b"), "b" : true }
>
> db.test.find({b:false})
{ "_id" : ObjectId("500eeb8242d87d5d861e121a"), "b" : false }
>
> db.test.find({b:{$exists:false}})
{ "_id" : ObjectId("500eeb7c42d87d5d861e1219") }
>
> db.test.find({$or:[{b:false},{b:{$exists:false}}]})
{ "_id" : ObjectId("500eeb7c42d87d5d861e1219") }
{ "_id" : ObjectId("500eeb8242d87d5d861e121a"), "b" : false }
> 
```

请注意，如果混合了省略值和显式错误值，则必须编写的查询更加复杂，并且可能导致查询执行速度变慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-14T03:39:42.267

之前的一些答案谈到了速度，但我认为您不想将 FALSE 响应视为缺失响应的原因是您所有缺失的响应都将被错误地分配为 FALSE。因此，例如，如果您是某人，无论他是否受雇，如果该人受雇于决定不回应，您就会将该人视为未受雇，这是错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T16:25:03.687

两者都可以，速度可能大致相同。包括`draft:false`会增加您的磁盘使用量，但它们都是有效的方法。只有测试才能揭示任何性能差异是否足以对您产生影响。

# mysql - GROUP BY 日期时间与时移

> ID：11634604
> 
> 赞同：0
> 
> 时间：2012-07-24T15:48:40.570
> 
> 标签：mysql, datetime, group-by

以下语句为我提供了每天的平均风速和总产量，按站点 ID 和工厂编号分组。

```
SELECT STE_ID, PNT_NO, T_SMP, AVG(AVR_WS), SUM(AVR_PW) FROM argosrecord GROUP BY STE_ID , PNT_NO , YEAR(T_SMP) , MONTH(T_SMP) , DAY(T_SMP) 
```

我想调整这个查询来计算从凌晨 2 点到凌晨 2 点而不是午夜到午夜的平均值和总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:53:09.617

```
select STE_ID,
    PNT_NO,
    YEAR(dateadd(hour, -2, T_SMP)) as Year,
    MONTH(dateadd(hour, -2, T_SMP)) as Month,
    DAY(dateadd(hour, -2, T_SMP)) as Day,
    AVG(AVR_WS) as AVG_AVR_WS,
    SUM(AVR_PW) as SUM_AVR_PW
from argosrecord
group by STE_ID,
    PNT_NO,
    YEAR(dateadd(hour, -2, T_SMP)),
    MONTH(dateadd(hour, -2, T_SMP)),
    DAY(dateadd(hour, -2, T_SMP)) 
```

对于那些使用 MySQL 的人：

```
select 
    STE_ID,
    PNT_NO,
    T_SMP,
    avg(AVR_WS),
    sum(AVR_PW)
FROM
    argosrecord
GROUP BY 
    STE_ID , 
    PNT_NO , 
    YEAR(DATE_ADD(T_SMP, INTERVAL -2 HOUR)) , 
    MONTH(DATE_ADD(T_SMP, INTERVAL -2 HOUR)) , 
    DAY(DATE_ADD(T_SMP, INTERVAL -2 HOUR)) 
```

# ruby-on-rails - 未初始化的常量 devise::controllers::internalhelpers

> ID：11634605
> 
> 赞同：7
> 
> 时间：2012-07-24T15:48:42.760
> 
> 标签：ruby-on-rails, json, authentication, devise

我是 Rails 新手，目前正在使用 devise gem 进行身份验证。我想通过我的移动应用程序与我的服务器通信。所以我通过 JSON 发送数据。当我尝试登录时，它显示以下错误：

```
 ActionController::RoutingError (uninitialized constant Devise::Controllers::InternalHelpers):
  app/controllers/session_controller.rb:4:in `<class:SessionController>'
  app/controllers/session_controller.rb:1:in `<top (required)>' 
```

当我使用 devise gem 1.4.6 版时，它对我来说工作正常。但是，我想让它与设计版本 2.1.0 或更高版本一起使用，以便能够使用它支持的任何新功能。

如果有人有这个运行或有任何想法，请帮助我。提前致谢。

问候，

森提尔。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-04T17:07:40.770

Looking at the past commit, InternalHelpers has been removed: [https://github.com/plataformatec/devise/commit/d9df632671b568e85bc79feb2c8de54fa0518f73](https://github.com/plataformatec/devise/commit/d9df632671b568e85bc79feb2c8de54fa0518f73)

Based on the test case for InternalHelpers, you should now, inherit directly from DeviseController as most InternalHelper methods are included in there already.

[https://github.com/plataformatec/devise/blob/master/test/controllers/internal_helpers_test.rb](https://github.com/plataformatec/devise/blob/master/test/controllers/internal_helpers_test.rb)

> class MyController < DeviseController
> 
> end

Hope this helps!

# javascript - 延迟jquery中的语句？

> ID：11634606
> 
> 赞同：0
> 
> 时间：2012-07-24T15:48:56.600
> 
> 标签：javascript, jquery

我这里有两行javascript，当切换功能执行时，我想在查找功能发生之前延迟。

```
$activeToggle.toggle("fast"); // i want this to run and then after 1250 millisec
$activeToggle.find(".anime").each(function (i,e){ // this code runs

        alert(e.id);

    }); 
```

我想延迟执行第二行代码，因为由于某种原因，警报发生在切换操作发生之前，所以他们必须是延迟第二行的方法。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T15:50:38.387

使用回调函数。这可确保在运行您拥有的循环功能之前切换已完成执行。

```
$activeToggle.toggle("fast", function(){
   $(this).find(".anime").each(function (i,e){ // this code runs

        alert(e.id);

    });
}) 
```

这样你就不需要拖延了。您的代码将在`toggle()`函数之后立即运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:51:10.617

您可以使用[delay()](http://api.jquery.com/delay/)方法：

```
 $activeToggle.delay(1250).toggle("fast"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:51:22.950

```
setTimeout( function () { $activeToggle.toggle("fast"); }, 1250); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:55:54.400

利用 jQuerys 延迟功能 :)

```
$activeToggle.delay(1250).toggle("fast", function(){
   $(this).find(".anime").each(function (i,e){ // this code runs

        alert(e.id);

    });
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T15:58:51.930

除了使用回调，您还可以使用`.stop()`

```
$activeToggle.toggle("fast"); // i want this to run and then after 1250 millisec
$activeToggle.find(".anime").stop(true,true).each(function (i,e){ // this code runs
        alert(e.id);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T16:11:24.367

如果您的目标是在动画完成后触发一个函数，那么您可以向[toggle()](http://api.jquery.com/toggle/)传递一个仅在动画完成后运行的回调函数。

```
$activeToggle.toggle("fast", function() {
    $activeToggle.find(".anime").each(

    function(i, e) {
        alert(e.id);
    });
}); 
```

# php - 如何从 debug_backtrace() 访问项目？

> ID：11634612
> 
> 赞同：2
> 
> 时间：2012-07-24T15:49:11.207
> 
> 标签：php

在这个缩短的例子中：

`print_r($foo);`

```
Array
(
    [0] => Array
        (
            [function] => exception_handler
            [class] => LP
            [type] => ::
            [args] => Array
                (
                    [0] => Exception Object
                        (
                            [trace:Exception:private] => Array
                                (
                                    [0] => Array
                                        (
                                            [args] => Array
                                                (
                                                    [0] => 'hello'
                                                    [1] => 'world'
                                                )
                                        )
                                )
                        )
                )
        )
) 
```

我如何访问最后一个项目“你好”。

我迷路了`$foo[0]['args'][0]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:53:28.930

```
[0] => Exception Object
(
    [trace:Exception:private] => Array
    (
        [0] => Array
        (
            [args] => Array
            (
                [0] => 'hello'
                [1] => 'world'
            )
        )
    )
) 
```

它是一个类型的对象，[`Exception`](http://php.net/class.exception)值在一个`private`名为的 () 属性`trace`中，因此我猜它是[`Exception::getTrace()`](http://php.net/exception.gettrace)

```
$trace = $foo[0]['args'][0]->getTrace();
echo end($trace[0]['args']); 
```

......只是意识到：你说“最后一项”，但你也说“你好”，所以知道我不知道，你想要什么。但是，`$trace[0]['args']`它是一个常规数组，您应该可以使用它，无论您喜欢什么:)`end()`都会为您提供最后一项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:56:07.333

您可以使用**PHP 5.4**像这样访问它：

```
// Only works with PHP 5.4
$foo[0]['args'][0]->getTrace()[0]['args'][0]; 
```

# ruby - 从选定的 HTML 小部件生成数组或值列表

> ID：11634616
> 
> 赞同：0
> 
> 时间：2012-07-24T15:49:39.733
> 
> 标签：ruby, web-scraping, watir, watir-webdriver

如同

```
selectContent = browser.select_list(:id, "lstStrike0_1").options.map(&:text) 
```

有没有办法获取*值*的列表或数组（如HTML 中每个选择选项的**value="..."属性）？**

直接还是间接？我查了[http://jarib.github.com/watir-webdriver/doc/Watir/Select.html](http://jarib.github.com/watir-webdriver/doc/Watir/Select.html)但看不到`.values` 类似的`.options`方法。

例子

```
<select id="lstExpMonth0_0"   name="lstExpMonth0_0">
<option value="">Select</option>
<option value="7/27/2012;0">JulWk4</option>
<option value="8/18/2012;1">Aug12</option>
<option value="9/22/2012;1">Sep12</option> 
```

因此

```
browser.select_list(:id, "lstExpMonth0_0").options.map(&:text) 
```

得到我

```
=> ["JulWk4", "Aug12", "Sep12"] 
```

我怎样才能最终得到集合或数组：

```
["7/27/2012;0", "8/18/2012;1", "9/22/2012;1"] 
```

*不管*选择什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:10:03.330

尝试：

```
browser.select_list(:id, "lstExpMonth0_0").options.map(&:value)
=> ["", "7/27/2012;0", "8/18/2012;1", "9/22/2012;1"] 
```

所有元素都有`value()`方法，该方法将返回 value 属性的值。

# c# - 多个表单上的共享数据集 C#

> ID：11634617
> 
> 赞同：0
> 
> 时间：2012-07-24T15:49:43.720
> 
> 标签：c#, dataset

所以我在做一个数据库项目，在我的第一个表单中，我有访问我的数据源的 sql 连接命令。我还创建了一个数据集，这一切都在我的显示表单中

显示表单用于显示数据库，我添加了一个按钮来添加记录，所以当我单击添加记录时，它会转到添加表单，我可以在其中填写详细信息以创建新联系人。然后返回第一个表单以显示新创建的联系人和所有其他联系人。

但是我遇到了一些问题，因为数据集需要与显示表单中的数据集相同。

如何使我的所有表单中的数据集都相同？

更新：

所以我所做的是在我的 Program.cs 中我在那里创建了对象......并将它们设为公共静态。

```
public static DataSet ds = new DataSet(); 
```

所以然后在我的addcontact表单中我可以这样称呼它......

```
Program.ds.Clear(); 
```

与我的数据适配器/绑定源和 sql 连接相同。这可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:02:25.040

Well, you have several conceptual options. You seem to be thinking of giving access to the data set to the child form, which is certainly something that you could do, but in my eyes it would make sense for the child form to provide the information for a single record to the parent form. The child form doesn't need to know anything about the dataset, or all of the other records.

In general you should try to limit information so that it is only avaliable where it is needed; you'll reduce the possibility of bugs that way. It would be bad practice to just make the dataset a global variable, which is what making it public and static is doing. By doing that not only are you providing the entire set of data to the child form (and also letting it be modfied) but your letting the data be read or modified from anywhere in the entire program. That's just asking for trouble.

The general idea will likely look something like this:

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private void button1_Click(object sender, EventArgs e)
    {
        Form2 childForm = new Form2();
        childForm.ShowDialog();
        string name = childForm.Name;
        string value = childForm.SomeOtherValue;
        //you can stick these properties in your dataset here.
    }
}

public partial class Form2 : Form
{
    private TextBox textbox1;
    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Close();
    }

    public string Name { get { return textbox1.Text; } }
    public string SomeOtherValue { get { return "12345"; } }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:23:08.930

创建一个数据集类，通过构造函数向每个表单添加传递..“Class = Class”进行引用..而不是副本。（ DataSet 是一个类...）

```
public partial class Form1 : Form
{
DataSet _dataset;

public Form1(DataSet dataSet)
{
    _dataset = dataset;
    InitializeComponent();
}
//..

public partial class Form2 : Form
{
DataSet _dataset;

public Form2(DataSet dataSet)
{
    _dataset = dataset;
    InitializeComponent();
}
//..

static class Program
{
    static void Main()
    {
        DataSet DS = new DataSet();

        Application.Run(new Form1(DS));
    }
} 
```

# c - 关闭标准输入

> ID：11634624
> 
> 赞同：0
> 
> 时间：2012-07-24T15:50:20.587
> 
> 标签：c

1.这段代码发生了什么：

```
 close(0) 
```

现在，有没有办法读取输入？

2.这个怎么办：

```
close(0)
dup(1) 
```

我认为现在输入来自标准输出，但这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:24:39.107

这意味着您现在在文件描述符 0 上打开了标准输出。您是否可以从该文件描述符中读取取决于您的标准输出实际上是什么。如果您的标准输出是具有输入和输出功能的终端（或伪终端），那么您可能能够读取它。如果您的标准输出是启动程序的 shell 以只写模式打开的文件，那么您可能无法读取它。

在任何情况下，您都不应依赖任何特定行为；执行此操作后，您不应期望能够从文件描述符 0 中读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:42:58.347

1.  似乎没有办法读取输入。但是，如果您碰巧预见到这种情况，您可以“保存”`stdin`描述符，如下所示：

    ```
    int stdin_save;
    ...
    stdin_save = dup(0);
    ...
    close(0); // Here it is "impossible" to read input
    ...
    dup(stdin_save); // Possible to read input again! 
    ```

2.  正如[Eric Postpischil](https://stackoverflow.com/a/11635226/509868)所解释的，如果您`stdout`以读写方式连接到文件/设备（如终端的典型情况），则在执行之后`dup(1)`，将恢复正常的读取功能。但是没有什么不寻常的事情发生（比如程序自言自语）。

# python - python中的基本终端仿真

> ID：11634626
> 
> 赞同：4
> 
> 时间：2012-07-24T15:50:36.357
> 
> 标签：python, shell, terminal, blender

我一直在尝试编写一个基本的终端仿真脚本，因为出于某种原因，我的 Mac 上没有终端访问权限。但是要在 Blender 中编写游戏引擎脚本，控制台（通常在您启动 Blender 的终端中打开）是至关重要的。
只是做一些简单的事情，比如删除、重命名等。我曾经使用`stream = os.popen(command)`then来执行命令`print (stream.read())`。这适用于大多数事情，但不适用于任何互动。
不久，我发现了一种新方法：
`sp = subprocess.Popen(["/bin/bash", "-i"], stdout = subprocess.PIPE, stdin = subprocess.PIPE, stderr = subprocess.PIPE)`然后`print(sp.communicate(command.encode()))`. 那应该产生一个我可以像终端一样使用的交互式外壳，不是吗？

但无论哪种方式，我都无法保持连接打开，并且使用最后一个示例我可以调用`sp.communicate`一次，给我以下输出（在这种情况下为 'ls /'）和一些错误：
`(b'Applications\n[...]usr\nvar\n', b'bash: no job control in this shell\nbash-3.2$ ls /\nbash-3.2$ exit\n')`. 第二次它给了我一个`ValueError: I/O operation on closed file.` 有时（比如'ls'）我只得到这个错误：`b'ls\nbash-3.2$ exit\n'`。

这意味着什么？如何使用 python 模拟终端，允许我控制交互式 shell 或运行搅拌机并与控制台通信？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T16:13:05.943

假设您想要一个不断要求输入的交互式 shell，您可以尝试以下操作：

```
import subprocess
import re

while True:
    # prevents lots of python error output
    try:
        s = raw_input('> ')
    except:
        break

    # check if you should exit
    if s.strip().lower() == 'exit':
        break

    # try to run command
    try:
        cmd = subprocess.Popen(re.split(r'\s+', s), stdout=subprocess.PIPE)
        cmd_out = cmd.stdout.read()

        # Process output
        print cmd_out

    except OSError:
        print 'Invalid command' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-17T18:36:57.447

这是我为在 Windows 中做你想做的事情而做的事情。一个更困难的问题，因为 Windows 不遵循任何标准，而是遵循它们自己的标准。对这段代码稍加修改应该会给你你正在寻找的东西。

```
'''
Created on Mar 2, 2013

@author: rweber
'''
import subprocess
import Queue
from Queue import Empty
import threading

class Process_Communicator():

    def join(self):
        self.te.join()
        self.to.join()
        self.running = False
        self.aggregator.join()

    def enqueue_in(self):
        while self.running and self.p.stdin is not None:
            while not self.stdin_queue.empty():
                s = self.stdin_queue.get()
                self.p.stdin.write(str(s) + '\n\r')
            pass

    def enqueue_output(self):
        if not self.p.stdout or self.p.stdout.closed:
            return
        out = self.p.stdout
        for line in iter(out.readline, b''):
            self.qo.put(line)

    def enqueue_err(self):
        if not self.p.stderr or self.p.stderr.closed:
            return
        err = self.p.stderr
        for line in iter(err.readline, b''):
            self.qe.put(line)

    def aggregate(self):
        while (self.running):
            self.update()
        self.update()

    def update(self):
        line = ""
        try:
            while self.qe.not_empty:
                line = self.qe.get_nowait()  # or q.get(timeout=.1)
                self.unbblocked_err += line
        except Empty:
            pass

        line = ""
        try:
            while self.qo.not_empty:
                line = self.qo.get_nowait()  # or q.get(timeout=.1)
                self.unbblocked_out += line
        except Empty:
            pass

        while not self.stdin_queue.empty():
                s = self.stdin_queue.get()
                self.p.stdin.write(str(s) + '\n\r')

    def get_stdout(self, clear=True):
        ret = self.unbblocked_out
        if clear:
            self.unbblocked_out = ""
        return ret

    def has_stdout(self):
        ret = self.get_stdout(False)
        if ret == '':
            return None
        else:
            return ret

    def get_stderr(self, clear=True):
        ret = self.unbblocked_err
        if clear:
            self.unbblocked_err = ""
        return ret

    def has_stderr(self):
        ret = self.get_stderr(False)
        if ret == '':
            return None
        else:
            return ret

    def __init__(self, subp):
        '''This is a simple class that collects and aggregates the
        output from a subprocess so that you can more reliably use
        the class without having to block for subprocess.communicate.'''
        self.p = subp
        self.unbblocked_out = ""
        self.unbblocked_err = ""
        self.running = True
        self.qo = Queue.Queue()
        self.to = threading.Thread(name="out_read",
                                    target=self.enqueue_output,
                                    args=())
        self.to.daemon = True  # thread dies with the program
        self.to.start()

        self.qe = Queue.Queue()
        self.te = threading.Thread(name="err_read",
                                   target=self.enqueue_err,
                                   args=())
        self.te.daemon = True  # thread dies with the program
        self.te.start()

        self.stdin_queue = Queue.Queue()
        self.aggregator = threading.Thread(name="aggregate",
                                           target=self.aggregate,
                                           args=())
        self.aggregator.daemon = True  # thread dies with the program
        self.aggregator.start()
        pass
def write_stdin(p,c):
    while p.poll() == None:
        i = raw_input("send to process:")
        if i is not None:
            c.stdin_queue.put(i)

p = subprocess.Popen("cmd.exe", shell=True, stdout=subprocess.PIPE,
                     stderr=subprocess.PIPE, stdin=subprocess.PIPE)
c = Process_Communicator(p)
stdin = threading.Thread(name="write_stdin",
                           target=write_stdin,
                           args=(p,c))
stdin.daemon = True  # thread dies with the program
stdin.start()
while p.poll() == None:
    if c.has_stdout():
        print c.get_stdout()
    if c.has_stderr():
        print c.get_stderr()

c.join()
print "Exit" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T06:18:37.280

看来您应该在分配有“forkpty”的新控制终端上运行它。要抑制警告“没有作业控制...”，您需要调用“setsid”。

# c++-cli - 为什么在 C++ CLI 中手动调用析构函数（通过删除）后不应调用 Finalizer

> ID：11634639
> 
> 赞同：0
> 
> 时间：2012-07-24T15:51:24.647
> 
> 标签：c++-cli, suppressfinalize

在参考[这篇](http://www.codeproject.com/Articles/7965/Deterministic-Destruction-in-C-CLI)讨论 C++ CLI 中析构函数和终结器的区别的文章后，我想知道为什么编译器会添加一些指令。抑制析构函数中的finalize？

剂量 finalize 函数不代表“最终，它将被 GC 调用”？

和

我们是否应该在析构函数和终结器中添加相同的“释放资源”代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:21:13.393

当您编写析构函数（C# 中的 Dispose 方法）时，您应该完成清理对象的**所有工作。**使用正确编写的析构函数，终结器将无事可做，因此编译器会抑制它。

在 C# 中，模式是编写一个 Dispose(bool) 方法，并让布尔值指示您是在处理还是完成。在 C++/CLI 中，编译器编写该方法，因此不允许。如果您不想重复代码，我相信您可以简单地从析构函数中调用终结器。

# c# - 如何使用 C# 提交 https 表单

> ID：11634644
> 
> 赞同：0
> 
> 时间：2012-07-24T15:51:45.327
> 
> 标签：c#, .net, forms, https

我正在创建一个 C#/.NET 应用程序以自动重新连接到 wifi 热点。互联网访问检测工作正常，但我无法重新连接。wifi 热点使用 HTTPS POST 登录表单。

我尝试了 stackoverflow 的几个建议，但到目前为止没有任何效果：我从我的请求中得到的答案是登录页面，我没有连接到 Internet。

我试过了：

```
public class Hotspot
{
    public string Url { get; set; }
    public string Method { get; set; }
    public string Inputs { get; set; }

    public HttpStatusCode Connect()
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(this.Url);
        request.KeepAlive = false;
        request.ProtocolVersion = HttpVersion.Version10;
        request.Method = this.Method;

        ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(delegate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; });

        byte[] post_bytes = Encoding.ASCII.GetBytes(this.Inputs);
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = post_bytes.Length;
        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(post_bytes, 0, post_bytes.Length);
        }

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Console.WriteLine(new StreamReader(response.GetResponseStream()).ReadToEnd());
        Console.WriteLine(response.StatusCode);
        return response.StatusCode;
    }

    public void Connect2()
    {
        using (WebClient client = new WebClient())
        {
            client.Headers.Add(HttpRequestHeader.ContentType, "text/xml");
            System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
            byte[] response = client.UploadData(this.Url, "POST", encoding.GetBytes(this.Inputs));
            Console.WriteLine(encoding.GetString(response));
        }
    }
} 
```

*   this.Url 看起来像 @"https://hotspot.somtehining.com/nb4_crypt.php"
*   this.Method 是“POST”
*   this.Inputs 是一个字符串，表示所有输入及其值（如 @"username=me&password=something&conditions=on&blablah=")

两种方法都输出登录页面，我仍然没有连接到互联网。第一种方法（连接）返回 200。我检查了输入值，它们是正确的：我可以使用 Web 浏览器进行连接。

# android - Android app + MySQL 数据库结构与设计

> ID：11634645
> 
> 赞同：1
> 
> 时间：2012-07-24T15:51:47.443
> 
> 标签：android, mysql, database

简介：首先让我向您介绍我的安卓应用程序。它是一个美食评论应用程序，可让用户对餐厅的特定食物进行评论。

应用流程： 1\. 用户启动应用。2\. 弹出附近餐馆列表。3\. 用户选择餐厅。4\. 显示所选餐厅的菜单列表。5\. 用户选择他/她希望对其进行评论/查看评级的食物。

到目前为止的进展：我使用 Google Place API 来获取附近餐馆的列表。但是 API 没有给出餐厅食物（菜单）的可搜索列表。

问题：菜单和餐厅都需要与菜肴的评论一起存储在数据库中。如果我为餐厅制作一张桌子，为餐厅的菜单制作另一张桌子，那么搜索和检索时间将变得非常巨大。

需要：你能告诉我我应该如何设计我的数据库，以便检索时间少到微秒。我是否需要使用一些第三方应用程序在尽可能短的时间内检索记录。

请尽快回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:00:06.080

首先，我不会直接从您的应用程序连接到数据库。应用程序可以被破解，并且用户可以自由支配您的数据库。我将构建一个 RESTful 服务，您的应用程序将与之交互。然后可以通过缓存层和数据库持久层的组合来支持该 RESTful 服务。

就数据库持久层的设计而言。我个人可能会选择 NoSQL 方法，这样您就可以简单地为每家餐厅检索一个对象，然后访问该餐厅的菜单数据，因为这可以让您在需要时为每家餐厅拥有不同的数据结构。

但是，如果您认为每家餐厅的菜单结构可以规范化以便可以使用关系数据库，那么请随意采用这种方法。即使您跨多个表进行查询，设计良好的数据库模式也应该非常符合您的需求。特别是如果您在数据库前面使用数据缓存（memcached 或类似）。

现实情况是，就获得最佳整体响应时间而言，内存缓存将成为您最大的资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:58:34.680

Android 应用程序不使用 MySQL——开销会很大。如果他们完全使用 SQL，他们就会使用 SQLite。

有关可通过内置 API 获得的数据存储选项的更多信息，请参阅[http://developer.android.com/guide/topics/data/data-storage.html 。](http://developer.android.com/guide/topics/data/data-storage.html)

# javascript - jQuery：创建的 DOM 的缓存引用

> ID：11634646
> 
> 赞同：0
> 
> 时间：2012-07-24T15:51:49.083
> 
> 标签：javascript, jquery, dom

查看以下假设代码：

```
// create some list we work with
$('body').html('<ul class="collection-list"></ul>');

// some array with string data
var collection = ['foo', 'bar', 'foobar'];

// here we store our jquery objects
var doms = [];

// for each item in the collection array we create a li
$.each(collection, function(index, value) {
    // imagine that the jquery part would return a reference/object which we push into our doms array
    doms.push($('ul.collection-list').append('<li class="item">' + value + '</li>'));
});

// we could now do different logic through our cached object
doms[2].val('new value');
doms[1].remove(); 
```

可能是该示例没有任何逻辑意义，但请不要向我展示替代方案！我只想使用提出的技术。例子只是一个例子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:58:04.043

您将整个`ul`元素存储在循环中，而不是单个`li`s 您的意思是；

```
$.each(collection, function(index, value) {
    doms.push($('<li class="item">' + value + '</li>'));
    $('ul.collection-list').append(doms[index]);
});

doms[2].html('new 3rd li value'); 
```

# asp.net - 如何将 gridview 行包含在锚定标签中？

> ID：11634647
> 
> 赞同：0
> 
> 时间：2012-07-24T15:51:55.937
> 
> 标签：asp.net, gridview

我有一个有几行的gridview。每行都有每列的值。当用户悬停在 gridview 上时，我希望每一行都显示为一个锚标记，这样当单击行中的任意位置时，结果取决于行 ID 的值。

我不想让每个单元格都包含一个链接，而是希望整个行表现得像一个锚标记。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:03:39.313

您可以将行转换为可点击的超链接，但它必须编写额外的代码

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
if (e.Row.RowType == DataControlRowType.DataRow)
{ 
  e.Row.Attributes["onClick"] = "javascript:window.location='thepageyou want to post';";
  e.Row.Style["cursor"] = "pointer";
}
} 
```

# asp.net - 合并网格视图中在 asp.net 中具有相同值的单元格

> ID：11634648
> 
> 赞同：1
> 
> 时间：2012-07-24T15:52:06.210
> 
> 标签：asp.net, gridview

我在gridview中有以下格式的数据

```
Region Branch
Gujrat Ahmedabad
Gujrat Surat
Gujrat Vadodara
Mumbai Dadar
Mumbai Andheri
Mumbai Borivali 
```

但我想合并重复的值，如下所示

```
Region Branch
Gujrat Ahmedabad
       Surat
       Vadodara
Mumbai Dadar
       Andheri
       Borivali 
```

我正在从一张表中获取数据`GridView`。在 GridView 我有`TemplateField`数据绑定的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:09:32.283

您可以使用[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)设置标签的文本并检查它是否与以前的相同：

```
protected void Grid_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && e.Row.RowIndex > 0)
    {
        GridView grid = (GridView)sender;
        var rowView = (DataRowView)e.Row.DataItem;
        int lastRowIndex = e.Row.RowIndex - 1;
        var lastRowView = (DataRowView)grid.Rows[lastRowIndex].DataItem;
        // replace Region with the correct column name 
        String region = rowView.Row.Field<String>("Region");
        String lastRegion = lastRowView.Row.Field<String>("Region");
        // replace LblRegion with the correct ID of your Label
        Label label = (Label)e.Row.FindControl("LblRegion");
        label.Text = region != lastRegion ? region : "";
    }
} 
```

# symfony - Symfony2 Doctrine2 继承另一个 Bundle 中的实体

> ID：11634653
> 
> 赞同：1
> 
> 时间：2012-07-24T15:52:16.513
> 
> 标签：symfony, doctrine-orm

尝试创建 2 个捆绑包。一个是门户网站，另一个是培训包。我难以掌握的是如何在门户捆绑中创建一个实体，该实体继承培训捆绑中的实体（并覆盖培训捆绑实体）。

```
PortalBundle
  Course Entity Extends TrainingBundle Course
    Add a Many to Many Relationship with another PortalBundle Entity

TrainingBundle
  Course Entity
    One to Many Relationship with Lesson Entity 
```

**这甚至可能吗？**我尝试将 TrainingBundle:Course 实体创建为 MappedSuperClass 但这是不可能的，因为 TrainingBundle:Course 实体具有一对多关系。

如果我尝试仅扩展 TrainingBundle:CourseEntity 我会收到错误消息“名称为‘Course’的表已经存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:35:10.343

我认为您正在寻找一个映射的超类 - [http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/inheritance-mapping.html)。

如果映射超类的限制不适用于您的用例，您可能必须查看类表继承来扩展您的实体。Class Table Inheritance 在同一页的下方有更详细的描述。

# heroku - 验证帐户后 Heroku 创建名称已收到消息

> ID：11634658
> 
> 赞同：2
> 
> 时间：2012-07-24T15:52:37.833
> 
> 标签：heroku

我正在为一个已经在 heroku 中设置生产环境的应用程序创建一个暂存环境。在此处从生产应用程序开始 - [https://devcenter.heroku.com/articles/multiple-environments](https://devcenter.heroku.com/articles/multiple-environments)之后，我运行了命令来创建暂存环境：

```
heroku create staging-app-name --remote staging --addons mongohq:free,shared-database:5mb --account urban 
```

输出：

```
Creating staging-app-name... done, stack is cedar
Adding mongohq:free to staging-app-name... failed
 !    Please verify your account to install this add-on
 !    For more information, see http://devcenter.heroku.com/categories/billing
 !    Confirm now at https://heroku.com/confirm 
```

我访问了[https://heroku.com/confirm](https://heroku.com/confirm)并收到消息说“您的帐户已验证”。

返回命令行并重新运行创建命令。输出：

```
!    Name is already taken 
```

当我访问 heroku.com 并查看我的应用程序时，它不存在。我怎样才能收回这个名字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:36:55.430

联系支持 - 这可能是您发现的 CLI 中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:12:20.370

我在某个帐户下运行了命令，并在另一个帐户下查看 heroku 中的我的应用程序：/ 当我登录到正确的帐户时，该应用程序就在那里。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-26T18:25:20.177

请更改应用程序的名称。因为您输入的应用程序名称已被其他用户使用。所以更改您的应用程序名称以避免此错误

# php - 你能同时运行 Coldfusion 和 PHP

> ID：11634660
> 
> 赞同：4
> 
> 时间：2012-07-24T15:52:43.410
> 
> 标签：php, wordpress, coldfusion

> **可能重复：**
> [是否可以在同一服务器和网站上运行 Coldfusion 和 PHP？](https://stackoverflow.com/questions/2444598/is-is-possible-to-run-coldfusion-php-on-the-same-server-and-website)

我有一个客户有一个旧的冷聚变站点，其中有一些他们想要保留的云应用程序。

我们正在使用 WordPress 为他们构建一个新站点，我想知道我是否可以与 ColdFusion 应用程序一起运行 LAMP，这样我们就不必重新编写他们的应用程序（这不是项目的要求）。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T16:03:40.220

是的，您可以在同一台服务器上运行 PHP 和 ColdFusion。我以这种方式配置了我的服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:56:36.883

简短的回答是“是”。

更长的答案是“是的，只要您正确配置了 IIS 或 Apache 以处理不同的文件扩展名，您就不应该有问题。”

我已经设置了两者都没有问题的开发环境，甚至共享同一个数据库，即使同时运行了一个 nodeJS 应用程序。

如果您让我们知道您当前的配置是什么，那么帮助您将两者一起运行会更容易。

# android - 在 WebView android 4.x 上突出显示搜索文本

> ID：11634662
> 
> 赞同：0
> 
> 时间：2012-07-24T15:52:58.053
> 
> 标签：android

我在 WebView android 4.x 上突出显示搜索文本时遇到问题

我用

```
mWebView.findAll("Text to Search"); 
```

和

```
Method m = WebView.class.getMethod("setFindIsUp", Boolean.TYPE); 
m.invoke(mWebView, true); 
```

或者

```
for (Method m : WebView.class.getDeclaredMethods()) {

                            if (m.getName().equals("setFindIsUp")) {
                                m.setAccessible(true);
                                m.invoke(mWebView, true);
                                break;
                            } 
```

他们都在 android 2.2 上运行良好，但在 android 4.x 上却不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:29:41.470

尝试 findallAsync() 而不是 findall() 的 4x 版本，我猜他们不推荐使用所有内容。

# iphone - 如何检测到我的应用程序已从游戏中心推送通知启动

> ID：11634665
> 
> 赞同：2
> 
> 时间：2012-07-24T15:53:08.883
> 
> 标签：iphone, ios, push-notification, game-center, launching-application

我正在测试要在 Game Center 中运行的应用程序。当应用程序从图标启动时，如果应用程序是从 Game Center 启动的（从 Game Center 应用程序或作为朋友邀请的目标），我想要避免的序言。我正在检查我的 appDelegate 中的launchOptions，如下所示；

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

NSLog(@"%sThe launch options are %@", __PRETTY_FUNCTION__, launchOptions);
if (launchOptions != nil) {

    [[KYTGlobals instance] setQuickStart:YES];
} 
```

...

当应用程序由 Game Center 启动时，这很好用，但当它是通过朋友邀请启动时，启动选项变量为 NIL；

在供应门户中，我为开发启用了推送通知，但没有为生产启用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:06:23.380

我决定将此提交给 Apple 支持，但不幸的是，答案是不支持该功能，因为这需要 UIKit 对 GameKit 有一定的了解，从而导致跨框架依赖。我被要求将其作为错误提交。

# android - Android - 对任何 ListView 项所做的任何更改都会影响到第一项

> ID：11634673
> 
> 赞同：3
> 
> 时间：2012-07-24T15:53:28.567
> 
> 标签：android, listview, simplecursoradapter

我有一个显示项目列表的 ListView。当我单击一个项目时，我在我的数据库表中将该项目标记为已删除。然后，我使用 SimpleCursorAdapter、setViewBinder、setViewValue 更新列表。

我检查是否为相应的项目设置了已删除的列，然后更新 TextView 以删除该项目。

代码如下

```
Cursor c = db.fetchAllNotes(id);
    startManagingCursor(c);

    String[] from = new String[] { DatabaseHandler.KEY_LIST };
    int[] to = new int[] { R.id.text1 };

    SimpleCursorAdapter notes =
        new SimpleCursorAdapter(this, R.layout.task_row, c, from, to);

    notes.setViewBinder(new SimpleCursorAdapter.ViewBinder() {

        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            // TODO Auto-generated method stub      
            text = (TextView) view.findViewById (R.id.text1);
            System.out.println("Item is "+ text.getText().toString());
            System.out.println("Item from cursor is " + cursor.getString(2));
            System.out.println("Striked value is " + Integer.parseInt(cursor.getString(3)));
            if(Integer.parseInt(cursor.getString(3)) == 1)
                text.setPaintFlags(textViewItem.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
            return false;
        }
    });
    setListAdapter(notes); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T16:09:18.813

我认为这是因为视图在 ListView 中被重用。尝试在未触发视图时重置绘制标志：

```
 if(Integer.parseInt(cursor.getString(3)) == 1){
     textViewItem.setPaintFlags(textViewItem.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
 } else {
     //resed paint flags
     textViewItem.setPaintFlags(textViewItem.getPaintFlags() & (~ Paint.STRIKE_THRU_TEXT_FLAG));
 } 
```

**编辑：** 我不确定我的解释是否正确。当您在 ListView 上有 10 个项目并且其中只有 5 个可见时，android 创建（inflantes）只有 5 个视图。当您滚动列表时，一项新项目将可见，但另一项将消失，因此将有一个未使用的视图。Android 将采用未使用的视图，用新数据填充它并将其用于新出现的项目。[我在这里](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)找到了更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:12:11.230

您的列表中需要不同类型的行（两种类型，已删除和未删除），这是我为自己找到的最佳解释

[https://stackoverflow.com/a/4778062/579646](https://stackoverflow.com/a/4778062/579646)

# java - 从 URL 获取相关图像和摘要

> ID：11634678
> 
> 赞同：10
> 
> 时间：2012-07-24T15:53:48.220
> 
> 标签：java, android

我不确定如何定义它，但基本上我想从给定的 URL 中检索相关的图像和文本摘要。

例如 - 当用户将链接粘贴到 Facebook 上的共享框时，它会立即从文章本身和相关图像中获取文章标题和/或短文本块。它永远不会得到错误的图像，例如网站的徽标或文章本身周围的文字......

Google+ 和其他类似的社交网络或服务也是如此。

我首先假设我需要使用以下代码阅读页面内容，我如何确定哪个图像是相关的（来自文章正文）以及哪个文本是文章文本？

```
URL oracle = new URL("http://www.oracle.com/");
BufferedReader in = new BufferedReader(
    new InputStreamReader(oracle.openStream()));

String inputLine;
while ((inputLine = in.readLine()) != null)
    System.out.println(inputLine);

in.close(); 
```

我当然不是在这里要求代码（除非有人例如有一个片段并且愿意分享），而是更多关于如何处理这个......我从哪里开始？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T18:21:09.783

我可以推荐[Boilerpipe](http://code.google.com/p/boilerpipe/)来提取原始文本，它使用一些高级算法来查找相关文本并删除它周围的样板（如菜单、页脚等）。

关于图像，除了使用评论中已经建议的元标记外，您还可以使用 html 解析器（如[htmlparser](http://htmlparser.sourceforge.net/)）提取所有“img”标签，然后使用一些启发式方法来选择最好的。我正在使用一些启发式方法，例如：

*   没有小于 30 像素的图片，它们通常是图标或广告跟踪图片
*   平方越好，这避免了尺子和类似的东西
*   没有标准的已知横幅尺寸
*   页面越高越好
*   样板提取的近似内容（这很难）

一段时间以来，我一直在生产中使用这些启发式方法进行页面抓取，并且它们给出了很好的结果。

但是，要正确应用这些规则，您可能需要下载图像以获取它们的大小和/或解析样式属性。

如果您打算将此服务器端作为页面抓取服务运行，那么没关系。如果您打算在 Android 设备上即时执行此操作，则它可能太重了。

# ruby-on-rails - rails：带有布局的渲染变量不起作用

> ID：11634679
> 
> 赞同：1
> 
> 时间：2012-07-24T15:53:49.290
> 
> 标签：ruby-on-rails, render, renderpartial

我的 rails 3.2 应用程序中有以下两行。第一个有效，第二个无效 - 未应用布局。

```
<%= render partial: 'question_pages/question_page', layout: 'layouts/question_page', locals: {question_page: question_page} %>

<%= render question_page, layout: 'layouts/question_page' %> 
```

关于为什么我不能将布局传递给的任何想法`render variable`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:37:16.990

**由于新答案而编辑：** 我修补了 Rails，因为我认为这是不可能的，但 Rails 开发人员告诉我更好：

[https://github.com/rails/rails/pull/7169](https://github.com/rails/rails/pull/7169)

您可以通过调用指定布局`render partial: @variable, layout: 'somelayout'`。每当您包含额外的选项时，您必须指定`partial:`.

# objective-c - ObjectiveC 中的 C 指针的内存管理如何工作

> ID：11634691
> 
> 赞同：1
> 
> 时间：2012-07-24T15:54:24.047
> 
> 标签：objective-c, c, pointers, memory-management

对于以下代码，本质上，我们在 ObjectiveC 中调用 C 函数（funca 和 funcb）并使用 C 指针 pX。出于某种原因，我们在调用 funcb 时点击了 EXC_BAD_ACCESS，我们认为这可能与 pX 被释放或其他一些内存问题有关。所以问题是，这里可能出了什么问题？如果真的是因为那个 pX 提前发布了，我们怎么能修复它呢？就像这种情况一样，在 ObjectiveC 中做 C 的一般做法是什么？

。H

```
@interface MyObject : NSObject {
    X *pX;
} 
```

.m

```
// calling funca and get the value pX properly set
if (funca(&pX) != 0) {
    // error;
}

// use the pX returned from funca
funcb(pX, ...); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:03:26.340

在“Objective C”中使用 C 和在其他任何地方使用 C 没有区别。Vanilla C 指针存在于 Objective C 引用计数系统之外，因此它们永远不会被释放。他们是`malloc()`'d和`free()`'d。我会验证`funca`它是否正确地完成了它的工作，或者可能会发布更多代码。

# python - 跟踪相同颜色的多个对象

> ID：11634695
> 
> 赞同：0
> 
> 时间：2012-07-24T15:54:47.247
> 
> 标签：python, opencv

只需应用各种阈值，我就可以对不同颜色的对象进行跟踪。（例如.. [http://www.youtube.com/watch?v=njab2bBps6U&feature=player_embedded](http://www.youtube.com/watch?v=njab2bBps6U&feature=player_embedded)）

但是，我一直无法确定跟踪多个相同颜色对象的解决方案。

我不是在寻找代码来解决我的问题，而只是想弄清楚标准方法是什么，我会自己弄清楚。

我正在使用带有 python 绑定的 opencv。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:13:08.910

这不是很难。这是算法：

1.  在第一个（或一些）帧中找到所有具有相同颜色的对象的位置。看来您知道该怎么做。
2.  使用[Lucas–Kanade 方法](http://en.wikipedia.org/wiki/Lucas%E2%80%93Kanade_method)及其[在 OpenCV 中的实现](http://opencv.willowgarage.com/documentation/cpp/motion_analysis_and_object_tracking.html#cv-calcopticalflowpyrlk)跟踪视频流中的所有这些对象（第二帧和下一帧）。

这是使用它的[示例（视频）](http://www.youtube.com/watch?v=zNqCNMefyV8)。

这是[示例代码](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/lkdemo.cpp?rev=4118)（cpp，不是 python）。

# objective-c - 在没有重定向 URI 的移动设备上使用 OAuth 2 到 Web 服务器

> ID：11634701
> 
> 赞同：1
> 
> 时间：2012-07-24T15:55:01.410
> 
> 标签：objective-c, ios5, redirect, uri, oauth-2.0

我正在使用公司的 Web 服务 API 开发我的应用程序。

注册 API 密钥时，公司要求我提交重定向 URI。

在我的 IOS 应用程序中显示网页并将用户发送到授权服务器并让他们授予我访问权限很容易，但我不知道如何获取我自己的 Iphone 的 URI + 我的应用程序的端口，所以授权服务器可以将访问令牌发送回我的应用程序。

有没有不同的方法来处理移动应用程序中的 OAuth 2.0 而无需设置 Web 服务器并将其 URI 用作重定向 URI？

我在 Stack Overflow 上找不到任何相关问题。如果有解决方案，请给我一些链接。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T19:10:33.717

最好的方法是为您的应用[注册一个自定义 URI 方案](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)，然后将您的自定义 URI 设置为重定向 URI。然后您的浏览器会被重定向到那里，并且 ios 会调用您的应用程序。

还有其他方法，例如在[Google](https://developers.google.com/accounts/docs/OAuth2InstalledApp#choosingredirecturi)中，但其中大多数必须得到您的提供商的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:59:46.243

这个链接很好地解决了这个问题（它也兼容 IOS 5.1 和 XCode 4.3 ）

示例应用程序使用 Google GTM OAuth2 也解决了将这个库的 xib 连接到

[https://singly.com/getting_started_ios](https://singly.com/getting_started_ios)

# iphone - 我如何将 Facebook 好友列表存储到 iOS 的数组中？

> ID：11634702
> 
> 赞同：0
> 
> 时间：2012-07-24T15:55:04.443
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

如何将以下输出存储到数组中。

[[delegate facebook] requestWithGraphPath:@"me/friends" andDelegate:self];

这是 iOS 应用程序的 Facebook 好友列表，我猜我需要将其存储为 NSArray。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:13:31.963

```
NSArray *array = [[delegate facebook] requestWithGraphPath:@"me/friends" andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:26:47.820

我最近才这样做。这就是我的做法。

如上所述调用请求方法：

```
[_facebook requestWithGraphPath:@"me/friends" andDelegate:self] 
```

请求成功时会调用委托方法：

```
- (void)request:(FBRequest *)request didLoad:(id)result 
```

这将返回一个带有标记为“数据”的键的 NSDictionary。通过调用获取好友数组

```
NSArray *data = [result objectForKey:@"data"]; 
```

然后，您可以使用标准 for 循环遍历该数组，并提取您想要的名称或使用存储名称和 ID 的自定义“Facebook 朋友类”。要仅存储名称，请执行以下操作：

```
 NSMutableArray *array = [NSMutableArray array];    
 for (int i = 0; i < data.count; i++){
    id object = [data objectAtIndex:i];
    [array addObject:[object objectForKey:@"name"]];
} 
```

这应该给你一个只有你朋友的名字的数组。

# visual-studio-2010 - Visual Studio 2010 Ult 自动负载测试 自动添加测试数据

> ID：11634705
> 
> 赞同：0
> 
> 时间：2012-07-24T15:55:16.107
> 
> 标签：visual-studio-2010, load-testing

我需要在站点上执行自动负载测试，并且在执行此负载测试时需要添加测试数据。

如何通过 Visual Studio 2010 Ult 实现这一点的任何想法。

此外，在运行编码的 UI 测试时，当我打开 Wizards/Modals（i 帧）时，它会失败，请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:07:32.913

可以为此使用[DeploymentItem](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute%28v=vs.100%29.aspx)属性。

1.  打开`Test View`窗户。
2.  搜索您的`Load Test`，右键单击它并选择属性。
3.  在`Properties`窗口中单击`Deployment Items`属性并添加测试数据文件的路径。路径是项目相关的。

该文件将部署在 aseembly 的输出文件夹中。因此，在您的单元测试或 Web 性能测试代码中，您可以使用程序集的位置来引用您的测试数据文件。

# android - 将 Android minSDKVersion 从 9 更改为 10 会中断程序

> ID：11634706
> 
> 赞同：0
> 
> 时间：2012-07-24T15:55:16.847
> 
> 标签：android, xml, parsing, sdk, sax

尝试设置我的 AndroidManifest 时遇到一个奇怪的问题。

我一直在使用 2.3.3 SDK（API 级别 10）开发我的应用程序，但我意识到我的 minSDKVersion 在清单中一直设置为 9。但是，当我将 API 级别更改为 10 以准备发布时，我的程序似乎失去了从网站获取数据的能力（我使用的是 SAX XML 解析器）和写入缓存文件的能力。

我已经检查了 google API 差异规范，我认为我没有使用任何已弃用的东西。

有任何想法吗？

===LOGCAT 输出=== [http://pastebin.com/T3DgAuSA](http://pastebin.com/T3DgAuSA)

我确保也给它互联网权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:20:31.867

堆栈跟踪表明您正在尝试在 UI 线程中发出 Http 请求（例如`UrlConectioin`在`onCreate()`方法中）。Android 不允许同步 HTTP 请求。您应该将所有 http 请求放入`AsyncTask`. 看起来这个限制是在 Api 10 中引入的。看看这个类似的[问题](https://stackoverflow.com/q/7823534/265597)。

# javascript - 直到第 6 页都可以完美运行，然后开始出现项目符号而不是图像......为什么？

> ID：11634707
> 
> 赞同：-1
> 
> 时间：2012-07-24T15:55:23.383
> 
> 标签：javascript, jquery, html, html-lists

我有以下JS代码：

```
$(document).ready(function(){
 for(var i=1; i <= 6; ++i){
    $('.etalage'+(i===1 ? '':i)).etalage({
        show_hint: false,
        thumb_image_width: 464,
        thumb_image_height: 464,
        source_image_width: 1000,
        source_image_height: 1000,
        zoom_element: '#custom_zoom_element'+(i===1 ? '':i),
        //source_image_height: 480,
        //source_image_width: 480,
        zoom_area_width: 400,
        zoom_area_height: 400
    });
 }
}); 
```

当我将鼠标悬停在缩略图上时，它会放大到一个单独的大图像。它适用于前 5 张图像，但之后都没有出现。这是 6 个基本相同的 html 分组之一：

```
<div>
<ul class="etalage">    
        <li>
            <img class="etalage_thumb_image" src="codecanyon/demo_files/images/image2_thumb.jpg">
            <img class="etalage_source_image" src="codecanyon/demo_files/images/image2_large.jpg">
        </li>  
</ul> 
```

```
<ul class="etalage2">   
        <li>
            <img class="etalage_thumb_image" src="codecanyon/demo_files/images/image4_thumb.jpg">
            <img class="etalage_source_image" src="codecanyon/demo_files/images/image4_large.jpg">
        </li>  
</ul> 
```

另一个需要注意的有趣的事情是，在第 6、7 等页面上，每个页面上都会显示一个 list-style-type 的项目符号。任何想法我犯了什么错误。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:00:10.767

您已在代码中将其设置为在 6 次循环后停止：

```
 for(var i=1; i <= 6; ++i){ 
```

也许你需要设置`i <= 6`一个 var 并让这个 var 计算 .etalage 的数量。

**编辑**

所以也许：

```
var numberOfetalage = $('.etalage li').length

 for(var i=1; i <= numberOfetalage ; ++i){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:02:44.137

Your problem is in your `for` loop. Change the following line:

```
for (var i=1; i <= 6; ++i) 
```

change the `6` (`i <= 6;`) to whatever the amount of list elements you have.

e.g. I want 8 elements therefore my code is:

```
for (var i=1; i <= 8; i++) 
```

# ruby-on-rails - Rails 迁移 - 整数列仅包含“1”值

> ID：11634711
> 
> 赞同：0
> 
> 时间：2012-07-24T15:55:40.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, migration

在一个 rails 项目中，我们试图将数据从一个表迁移到另一个表。当我们创建原始表时，我们使用（片段）：

```
create_table :my_original_table do |t|
  #OTHER COLUMNS HERE
  t.integer :first_record_pub
end 
```

然后，当我们创建要迁移到的第二个表时，我们使用：

```
create_table :my_second_table do |t|
  #OTHER COLUMNS HERE
  t.integer :my_pub
end 
```

最后，当我们迁移实际数据时，我们使用：

```
original_value = MyOriginalTable.all
original_value.each do |s|
  new_first_record = MySecondTable.new
  #OTHER DATA MIGRATIONS HERE
  new_first_record.my_pub = s.first_record_pub
  new_first_record.save
end 
```

我们迁移的所有其他列（我注释掉的那些）都完美迁移。但是，在迁移的 my_second_table 中，my_pub 列的一些条目是空白的（预期，因为原始表中的一些条目是空白的），而其他条目的值只是“1”。由于某种原因，正确的 first_record_pub 值未正确迁移。

有没有人对如何解决这个问题有任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:01:26.780

Are you both creating a new column, and trying to move data into that column in the same migration? If so you, may either need to make a call to [reset_column_information](http://apidock.com/rails/ActiveRecord/Base/reset_column_information/class) between creating the column and moving data to it, OR, separate the creation and moving of data into two separate migrations.

# selenium - Selenium Webdriver gettext() 返回空字符串

> ID：11634713
> 
> 赞同：1
> 
> 时间：2012-07-24T15:55:41.317
> 
> 标签：selenium, webdriver

我的页面中有以下 HTML。

```
<div dojoattachpoint="rowNode" class="dijitTreeRow dijitTreeRowSelected" wairole="presentation" dojoattachevent="onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick" role="presentation" title="" style="padding-left: 19px; ">
    <img src="/runtime/explorer.sharedresources/javascript-1.7.22.268034/release/dojo/resources/blank.gif" alt="" dojoattachpoint="expandoNode" class="dijitTreeExpando dijitTreeExpandoLeaf" wairole="presentation" role="presentation"/>
    <span dojoattachpoint="expandoNodeText" class="dijitExpandoText" wairole="presentation" role="presentation">*</span>
    <span dojoattachpoint="contentNode" class="dijitTreeContent" wairole="presentation" role="presentation">
    <img src="/runtime/explorer.sharedresources/javascript-1.7.22.268034/release/dojo/resources/blank.gif" alt="" dojoattachpoint="iconNode" class="dijitIcon dijitTreeIcon criterionFolder" wairole="presentation" role="presentation"/>
    <span dojoattachpoint="labelNode" class="dijitTreeLabel" wairole="treeitem" tabindex="-1" waistate="selected-false" dojoattachevent="onfocus:_onLabelFocus" role="treeitem" aria-selected="true">**My TEXT**</span>
    </span>
</div> 
```

这是正确识别元​​素的代码。

```
 List<WebElement> RowNodesList = elementPopup.findElements(By.xpath("//div[@dojoattachpoint =\"rowNode\"]"));       
    for(WebElement RowNode:RowNodesList)
        {
            System.out.println("Left Padding: " + RowNode.getAttribute("style"));                   

            System.out.println("Is Row Node Displayed: " + RowNode.isDisplayed());

            WebElement labelNode = RowNode.findElement(By.xpath("//span[@dojoattachpoint=\"labelNode\"]"));

            boolean IsNodeDisplayed = labelNode.isDisplayed();

            System.out.println("Is Label Node Displayed: " + IsNodeDisplayed);

            String NodeLabel = (String) ((JavascriptExecutor) _driver).executeScript("return arguments[0].firstChild.nodeValue",labelNode);
            System.out.println("Row label From javaScript: " + NodeLabel);
            System.out.println("Row label: " + labelNode.getText());
            System.out.println("Row Class: " + labelNode.getAttribute("class"));

        } 
```

这是从代码生成的输出。

```
Left Padding: PADDING-LEFT: 19px
Is Row Node Displayed: true
Is Label Node Displayed: false
Row label From javaScript: undefined
Row label: 
Row Class: dijitTreeLabel 
```

出于某种原因，.getText() 返回一个空字符串。有任何想法吗？提前致谢。

编辑：奇怪的是，labelNode.isdisplayed() 返回 false，即使它在页面上可见。

编辑 2：我已将我的 OP 编辑​​到上述内容，以使问题更加清晰。因此，我想要的文本位于标签节点的 SPAN 标记中，它是 RowNode 的子节点。RowNode 应该显示，但标签节点没有。我认为这就是 LabelNode 的 .getText() 返回空字符串的原因。

有没有其他方法可以获取文本？

编辑3：我发现了问题。它是 xpath 搜索字符串。代替

```
WebElement labelNode = RowNode.findElement(By.xpath("//span[@dojoattachpoint=\"labelNode\"]")); 
```

xpath 需要更改为

```
WebElement labelNode = RowNode.findElement(By.xpath(".//span[@dojoattachpoint=\"labelNode\"]")); 
```

我曾假设“//”将指示 WebDriver 在当前上下文中查看。但显然，它在整个体内搜索（这不直观），并返回找到的第一个隐藏的元素。添加“.//”指示它在当前上下文（RowNode）中搜索。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T13:59:08.650

好的，我可以让它工作的唯一方法是使用这个：

```
var textstring = driver.findElement(global[type](elements)).getAttribute('innerHTML').then(
   function(textstring) {
      console.log(textstring);
}) 
```

其中 globaltype 可以是 webdriver.By.id()、xpath 或名称。

webdriver.By.css 也可以。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T16:16:33.240

在您的 System.out.println 语句中，您使用的是“contentNode”而不是“labelNode”。这是一个错误，还是在代码的其他地方声明的？

在 C# 中，我使用以下内容正确抓取文本：

```
IWebElement labelNode = driver.FindElement(By.XPath("//span[@dojoattachpoint=\"labelNode\"]"));
string labelNodeText = labelNode.Text; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T17:08:14.397

我想澄清`RowNode`变量是否属于 WebDriver 类型，并且您必须在正确的 WebElement 上调用获取文本。

尝试使用以下代码 -

```
 WebElement labelNode = driver.findElement(By.xpath("//span[@dojoattachpoint='labelNode']"));
  System.out.println("Row label: " + labelNode.getText());
  System.out.println("Row label: " + labelNode.getAttribute("class")); 
```

如果在此更改后为 getText() 方法返回一个空字符串。它要么意味着此 WebElement 的文本不可见。您还可以使用implicitWait 语句来确保页面在您尝试访问WebElement 之前正确加载。

```
WebDriver driver = new FirefoxDriver();
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

希望这对您有所帮助。

当您在浏览器上打开页面时，您能告诉我“我的文本”是否在页面上可见。如果可见，您可以使用 getText() 方法获取值。如果没有，那么试试这个 -

```
 String labelNodeText = (String) ((JavascriptExecutor) _driver).executeScript("return arguments[0].innerHTML",labelNode); 
```

# c# - asp c#基本mailto函数

> ID：11634714
> 
> 赞同：0
> 
> 时间：2012-07-24T15:55:43.127
> 
> 标签：c#, javascript, asp.net

我一直在尝试使用在 Java 中类似使用的 '\n' 进入下一行，但它似乎在这个脚本中不起作用。

'\n' 不起作用，但整个函数没有它。

我的问题是你怎么去下一行？

```
 String text_name = Text_Name.Text;
    String text_email = Text_Email.Text;
    String text_message = Text_Message.Text;

    ClientScript.RegisterStartupScript(this.GetType(), "mailto",

       "<script type = 'text/javascript'>parent.location='mailto:" + "someone@gmail.com" +

       "?subject=" + "Inquiry" +

       "&body=" + 

       "Contact Name: " + text_name + '\n' +

       "Contact By: " + text_email + '\n' +

       "Inquiry: " + text_message + '\n' +

       "'</script>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:56:57.630

尝试`Environment.NewLine`代替`'\n'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:01:20.550

Try using '\r\n' instead of '\n'. Or you may also use 'Environment.NewLine'

```
MessageBox.Show("Line 1" + Environment.NewLine + "Line 2"); 
```

or

```
MessageBox.Show("Line 1\r\nLine2", "BlahBlah", MessageBoxButtons.OK, MessageBoxIcon.Question); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T00:49:02.797

尝试将 %0A 作为新行放入 mailto

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T15:57:51.437

使用**Environment.NewLine**而不是**\n**：

```
"Contact Name: " + text_name + Environment.NewLine + 
```

# delphi - Livebindings BindScope 通知

> ID：11634716
> 
> 赞同：1
> 
> 时间：2012-07-24T15:55:51.443
> 
> 标签：delphi, data-binding, delphi-xe2, livebindings

要开始使用实时绑定，我目前正在编写一些演示代码。但是在某一时刻，我遇到了一个问题，我找不到任何文档。

我有一个包含多个 TEdit 的表单，并希望将它们与 TBindScope 绑定到对象的属性。我设置了 BindScope 和 BindingList ，当我执行 BindExpression1.Active := true; 时一切正常；

但是现在我更改了对象的属性并希望通知 BindingList 有更新。

这是问题所在。我找不到任何方法来通知 BindingList，因此它会更新值。但是，如果我执行 BindExpression1.Evaluate 它会同步值。

我尝试使用

*   BindingList.Notify（BindScope，'Object.Property'）
*   BindingList.Notify(BindScope, '对象')
*   BindingList.Notify(Object, 'Property');
*   BindingList.Notify(BindScope, '属性');
*   BindingList.Notify(BindScope, 'Active');

通知似乎没有任何作用。

PS：我知道在这种情况下不需要 BindScope。但是由于它的演示代码是为了理解，我想知道它是如何与 BindScope 一起工作的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:43:52.967

[`TCustomBindScope.GetValue`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.Bind.Components.TCustomBindScope.GetValue)有关如何解析范围的详细信息，请参阅的源代码。

1.  [`Component`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.Bind.Components.TBindScope.Component)如果分配则使用，否则
2.  [`DataObject`](http://docwiki.embarcadero.com/Libraries/XE2/en/Data.Bind.Components.TCustomBindScope.DataObject)如果分配则使用，否则
3.  [`Owner`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TComponent.Owner)用来

因此，最简单的解决方案可能是保留`Component`（您的 TBindScope 组件的）属性未分配，并使您`Object`成为所有者表单的属性。

# javascript - 鼠标停止时jQuery开始悬停动画

> ID：11634722
> 
> 赞同：3
> 
> 时间：2012-07-24T15:55:57.307
> 
> 标签：javascript, jquery, html, css

所以我有一个滑动门风格的动画，当鼠标悬停在盒子上时它会触发（下面提供了我的示例）。而不是当鼠标悬停在 div 上时立即触发我实际上希望悬停动画仅在鼠标停在 div 上时发生，就像它在 chrome 网上商店中将鼠标停在一个应用程序容器上时所做的那样（https://chrome.google.com/webstore/category/home）

我当前的示例 [http://jsfiddle.net/fvXgK/](http://jsfiddle.net/fvXgK/)

编辑：为了进一步澄清，此页面上将出现多个单元格。

感谢您的任何帮助，您可以提供！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:02:49.193

My advice is to change your hover event. On hover get the mouse coordinates then start a timeout with maybe 50-100ms. Use the timeout to compare the current mouse coordinates with the original set of coordinates. If they are the same, and your animation has not been executed, then do the animation. This is just a rough idea of what you could try.

Edit: Also remember to make an on mouse out event that stops the timeout.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:04:29.317

你可以试试jquery的hoverintent插件。

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T16:28:02.357

看到这个小提琴，易于使用：

[http://jsfiddle.net/pbaXa/](http://jsfiddle.net/pbaXa/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T16:15:35.890

您可以为此使用 setTimeout 并与元素的存储“悬停状态”进行比较。如果您使用多个单元格，我的示例可能不是存储悬停状态的最佳方式，但这个概念仍然存在。

```
var TIME_UNTIL_SLIDE = 1000;

var isHovering = false;
var hovertimer;

$('.smallCell.slidedown').hover(function() {
    isHovering = true;
    var $this = this;
    hovertimer = setTimeout(function(){
        if(isHovering) {
             $(".overlay", $this).stop().animate({
                top: '-260px'
            }, {
                queue: false,
                duration: 300
            });
        }
    }, TIME_UNTIL_SLIDE);

}, function() {
    isHovering = false;
    $(".overlay", this).stop().animate({
        top: '0px'
    }, {
        queue: false,
        duration: 300
    });
}); 
```

显示在：http: [//jsfiddle.net/fvXgK/16/](http://jsfiddle.net/fvXgK/16/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T16:20:10.617

也许你应该试试这个插件：

[http://www.richardscarrott.co.uk/posts/view/jquery-mousestop-event](http://www.richardscarrott.co.uk/posts/view/jquery-mousestop-event)

易于使用，示例就在那里！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T16:09:38.970

这就是我会做的......它更容易：简单明了：

```
$('.smallCell.slidedown').hover(function() {
    $(".overlay", this).delay(1000).queue(function(){
    $(this).animate({
        top: '-260px'
    }, {
        queue: false,
        duration: 300
    });

    });
}, function() {
    $(".overlay", this).animate({
        top: '0px'
    }, {
        queue: false,
        duration: 300
    });
}); 
```

这也是不言自明的：它将延迟 1 秒并将您的功能排队。

# virtual-serial-port - Socat 虚拟串口无法识别

> ID：11634725
> 
> 赞同：3
> 
> 时间：2012-07-24T15:56:07.320
> 
> 标签：virtual-serial-port, socat

我正在使用 socat 创建几个虚拟串行端口。一个我使用一个简单的 C 程序（使用 termios）连接，另一个我想使用一个名为 Ardupilot Mega Planner 的程序（用于 RC 东西）连接。但是，Planner 无法识别虚拟端口（在 /dev/pts 下列出），只能识别 tty 设备和 /dev/serial 设备。我需要做一些特殊的安装才能让它工作吗？或者有没有我可以尝试的解决方法？我尝试“链接”现有的串行端口（例如 ttyS0），但如果我尝试任何类似的操作（虚拟端口到真实端口，真实端口到真实端口），我会收到“不适当的 ioctl”错误。有任何想法吗？

编辑：查看程序的源代码（Mission Planner）后，它似乎只“识别”（或添加了）所有 /dev/ttyS* 设备的端口，即 /dev/serial/by-id/*设备、/dev/USB0 和 /dev/ACM0。所以要么我需要编辑源代码，要么找到一种方法来“验证”一个 ttyS* 端口。Mission Planner 似乎仍然不会连接到除 S1 或 S0 之外的任何 ttyS* 设备。有任何想法吗？我有一种感觉，这是因为它们配置不正确，不知何故。

编辑 2：我终于掌握了 ArdupilotMega Planner 源代码并对其进行了更改，使其包含来自 /dev/pts/ 的设备。但是，我仍然遇到同样的问题。Planner 在打开端口时遇到了一些问题。是否有一些设置需要立即检查/更改才能使程序能够连接到它？去研究一下，尝试更彻底的了解串口通信...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:26:39.013

对，刚刚发现我无法评论我的答案，因为我没有帐户。无论如何，试试这个命令：

```
socat PTY,link=/dev/ttyS10 PTY,link=/dev/ttyS11 
```

并将您的程序链接到 ttyS10 和 ttyS11。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T07:39:28.557

我遇到了同样的问题，并通过 tcp 发送串行内容解决了这个问题：

```
socat tcp-l:5760 /dev/YOURPORT,raw,echo=0,bHEREBAUDRATE 
```

然后在 Misson planner 中选择“TCP”，服务器：127.0.0.1，端口：5760

我可以通过这种方式成功连接到模拟串行端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T14:51:05.093

您是否尝试过链接到更高的 ttyS，例如 ttyS10 或更高。这些通常不分配给任何东西。编辑：您还使用什么命令来创建串行端口

# svn - 如何在 Subversion 中输出两个特定版本之间的差异？

> ID：11634732
> 
> 赞同：127
> 
> 时间：2012-07-24T15:56:20.653
> 
> 标签：svn, diff

我通过 Linux 命令行界面使用 Subversion。

我想查看`fSupplierModel.php`在我的终端中调用的特定文件的修订版 11390 和 8979 之间的区别。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-07-24T15:57:39.457

参见[`svn diff`](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.diff.html)手册：

```
svn diff -r 8979:11390 http://svn.collab.net/repos/svn/trunk/fSupplierModel.php 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2015-06-02T23:38:38.663

要比较整个修订版，很简单：

`svn diff -r 8979:11390`

* * *

如果要将上次提交的状态与当前保存的工作文件进行比较，可以使用方便的关键字：

`svn diff -r PREV:HEAD`

（注意，之后没有指定任何内容，将比较指定修订版中的所有文件。）

* * *

如果之后添加文件路径，则可以比较特定文件：

`svn diff -r 8979:HEAD /path/to/my/file.php`

# java - Java - 将变量内容设置为新变量名

> ID：11634734
> 
> 赞同：0
> 
> 时间：2012-07-24T15:56:23.983
> 
> 标签：java, string, variables, for-loop

```
println("This program allows you to enter your exam results!");
    int n0 = readInt("How many exam results do you have? ");
    for (int n=1; n<=n0; n++) {
        String r0 = "r"+n;
        int result = readInt("Result "+n+": ");
        println(r0);
    } 
```

我是java新手，我想知道是否可以将'String r0'变量的内容设置为'int result'变量的名称（而不是结果）。

我希望这样做，因为我的程序将有多个“int 结果”，并且我需要稍后将每个单独的结果用于算术目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:01:33.927

我认为你真正需要做的是拥有一个结果集合或*数组*。任何时候你认为你需要类似的东西：

```
int r0 = ...;
int r1 = ...;
int r2 = ...; 
```

等等，那么这很好地表明您正在查看某种收藏。

因此，在上面的示例中，您将构建一个*大小为考试结果数的*数组，然后依次填充数组的每个元素。

这是[Java 数组教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。如果只是为了比较/对比，也值得看看[Java 集合教程。](http://docs.oracle.com/javase/tutorial/collections/intro/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:58:42.353

即使可以，我也不认为这是一个好主意！让他们稍后再联系他们将是一场噩梦。

在您的情况下，我只建议使用 s 数组来`int`代替您的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:17:44.890

**1.**首先**不要声明** `r0 as String`你**打算使用它** `integer`，而是声明它`int`，你当然可以 使用将**字符串转换为整数**`Integer.parseInt()`。

**例如：**

```
String r0 = "10";
int r = Integer.parseInt(r0); 
```

**2.**我会建议你使用**Collection 框架**在 java中存储多个**数据**，因为它提供了很大的**灵活性**。使用`ArrayList<Integer>`.

**例如：**

```
ArrayList<Integer> arr = new ArrayList<Integer>();

    for (int n=1; n<=10; n++) {

      arr.add(n);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T18:06:31.443

下面我有一个可以工作的程序。我会复制代码并尝试自己重写，以确保您完全理解发生了什么。

```
import java.util.Scanner;
public class Arrays 
{
    public static void main(String[] args)
    {
        // Initialize Variables
        int examCount = 0;
        double examSum = 0;
        Scanner input = new Scanner(System.in);

        // Prompt The user For Number Of Exams And Recieve Value
        System.out.print("Number Of Exams?  ");
        examCount = input.nextInt();

        // Create An Array That Is The Length Of The Number Of Exams And Holds Double Values
        double[] exams = new double[examCount];

        // Read In All Exam Scores. A For Loop Is Used Because You Know How Many Scores There Are
        for (int i = 0; i < examCount; i++)
        {
            System.out.print("Exam Score:  ");
            exams[i] = input.nextDouble();
        }

        // Print Out All Of The Scores
        for (int i = 0; i < examCount; i++)
            System.out.println("Exam #" + (i+1) + "\t" + exams[i]);

        // Sum All Of The Exam Scores
        for (int i = 0; i < examCount; i++)
            examSum += exams[i];

        // Print Out An Average Of All Of The Scores
        System.out.println("Exam Average:  " + examSum / examCount);
    }
} 
```

# javascript - Dojox EnhancedGrid 中的空格键

> ID：11634735
> 
> 赞同：0
> 
> 时间：2012-07-24T15:56:25.697
> 
> 标签：javascript, dojo, dojox.grid

我正在使用`dojox.grid.EnhancedGrid`具有可编辑单元格的单元格。`SPACEBAR`触发 ***编辑模式***（我猜这是一种***不错的***方法）。但是，如果我以编程方式触发编辑模式（通过相邻单元格中的链接）或*双击*并开始输入一些文本，例如*"This value is good"*，只要我点击`SPACEBAR`（在*"This"*之后）网格尝试再次触发编辑，它删除了我到目前为止输入的内容。

有人知道如何解决这个问题吗？这真的很烦人，因为它仅在使用事件以外的***编辑模式下***`onKeyDown`使用其他方式进入单元格时发生（即，如果我聚焦单元格并按下`ENTER`单元格进入*编辑模式*并且允许空格；如果我*双击*单元格并输入我第一次按下编辑*模式*`SPACEBAR`时编辑模式搞砸了）。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:48:47.440

我有同样的问题。但我意识到，在我的情况下，问题只有在 singleClickEdit 属性设置为 false 时才有效。换句话说，如果 singleClickEdit:true - 可以在可编辑字段中输入空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T13:08:23.413

似乎我能够解决这个问题。这篇文章对我有帮助： [动态控制 dojo DataGrid 列的编辑模式](https://stackoverflow.com/questions/12373135/dynamically-control-edit-mode-of-dojo-datagrid-column)

这是一个最终的解决方案：

```
var customOnEditActivate = function(e){
 var event;
 if(this._click.length > 1 && has('ie')){
  event = this._click[1];
 }else if(this._click.length > 1 && this._click[0].rowIndex != this._click[1].rowIndex){
  event = this._click[0];
 }else{
  event = e;
 }
 this.focus.setFocusCell(event.cell, event.rowIndex);
 this.onRowClick(event);
 this.edit.setEditCell(event.cell, event.rowIndex);
 this.onRowDblClick(e);
};

wordsGrid = new dojox.grid.EnhancedGrid({
                query : ...,
                store : ...,
                singleClickEdit: false,
                selectionMode:"single",
....
}, container);
dojo.connect(wordsGrid, "onCellDblClick", customOnEditActivate); 
```

所以即使没有连接到 onCellDblClick 也会触发编辑事件。但似乎 customOnEditActivate 中的代码对网格属性有一些魔力并解决了这个问题。如果有人有其他解决方案 - 请分享！

# c# - 确定线程性能

> ID：11634738
> 
> 赞同：5
> 
> 时间：2012-07-24T15:56:34.667
> 
> 标签：c#, multithreading, performance, cpu-usage

在某些机器上，我的 .Net 应用程序在 CPU 使用率约为 10% 时处于空闲状态。我的第一个倾向是我的一个后台工作线程正在执行一些我不知道的指令，但我不知道如何按线程隔离 CPU 使用情况（任务管理器只是告诉我我的进程使用*x*个线程[通常在 30 左右]，而不是哪些线程占用 CPU）。

我知道以编程方式我可以遍历本文中提到的线程，[但](https://stackoverflow.com/a/102556/1265219)我不知道这是否会给我所需的信息。是否有一个分析器（商业或其他）可以让我分析每个线程的 CPU 使用情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:59:09.407

我会推荐[JetTrace dotTrace Performance](http://www.jetbrains.com/profiler/)。它会告诉你你的代码大部分时间都花在了哪里，以及线程。（它是商业的，但有 10 天的免费试用期。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T16:14:55.537

尝试 Microsoft 的 Perfview：http: [//www.microsoft.com/en-us/download/details.aspx?id= 28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)

您可以使用系统 ETW 事件来找出许多 CPU 利用率低的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T16:07:50.413

附加调试器并点击“中断”按钮怎么样？然后看看你的代码中是否有任何线程正在运行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:03:23.420

我[支持 NominSim 的回答](https://stackoverflow.com/a/11634779/107625)，并推荐[Red Gate 的 ANTS Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)。过去帮了我很多。

他们确实有 14 天的免费试用版。

# php - pecl install tr ader 因缺少文件而失败 - OSX Lion

> ID：11634739
> 
> 赞同：0
> 
> 时间：2012-07-24T15:56:38.020
> 
> 标签：php, macos, pear, pecl

我正在尝试安装交易者 pecl 扩展程序，但在制作过程中我不断收到错误消息。如果有人可以尝试这个并让我知道他们是否遇到类似的错误或者是否有人知道解决方案。

```
pecl install trader-beta 
```

这是输出的一部分。

```
 creating libtool
  appending configuration tag "CXX" to libtool
  configure: creating ./config.status
  config.status: creating config.h
  running: make
  /bin/sh /private/tmp/pear/temp/pear-build-rootpwFTIe/trader-0.2.1/libtool --mode=compile cc  -I. -I/private/tmp/pear/temp/trader -DPHP_ATOM_INC -I/private/tmp/pear/temp/pear-build-rootpwFTIe/trader-0.2.1/include -I/private/tmp/pear/temp/pear-build-rootpwFTIe/trader-0.2.1/main -I/private/tmp/pear/temp/trader -I/usr/include/php -I/usr/include/php/main -I/usr/include/php/TSRM -I/usr/include/php/Zend -I/usr/include/php/ext -I/usr/include/php/ext/date/lib -I/private/tmp/pear/temp/trader/ta-lib/include -I/private/tmp/pear/temp/trader/ta-lib/src/ta_common -I/private/tmp/pear/temp/trader/functions  -DHAVE_CONFIG_H  -g -O2   -c /private/tmp/pear/temp/trader/ta-lib/src/ta_common/ta_global.c -o ta-lib/src/ta_common/ta_global.lo
  /private/tmp/pear/temp/pear-build-rootpwFTIe/trader-0.2.1/libtool: line 1280: ta-lib/src/ta_common/ta_global.loT: No such file or directory
  mkdir ta-lib/src/ta_common/.libs
  mkdir: ta-lib/src/ta_common: No such file or directory
  make: *** [ta-lib/src/ta_common/ta_global.lo] Error 1
  ERROR: `make' failed
  Merges-iMac:etc mike$ which php
  /usr/bin/php
  Merges-iMac:etc mike$ php -version
  PHP 5.3.10 with Suhosin-Patch (cli) (built: Feb 20 2012 22:55:53) 
  Copyright (c) 1997-2012 The PHP Group
  Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:31:59.623

它与未正确设置路径有关。我最终使用 phpize 进行编译。我只是手动下载了文件并将其解压缩。

[http://php.net/manual/en/install.pecl.phpize.php](http://php.net/manual/en/install.pecl.phpize.php)

-现在开心

# linux - grep -isn "String\.format" -R 有什么区别。和 grep -isn String\.format -R .?

> ID：11634740
> 
> 赞同：1
> 
> 时间：2012-07-24T15:56:43.150
> 
> 标签：linux, bash, shell, grep

有什么区别

```
grep -isn "String\.format" -R . 
```

和

```
grep -isn String\.format -R . 
```

当我使用后者时，结果包括`String format`and `String.format`，但如果我使用前者，结果只包括`String.format`. 此结果与使用相同

```
grep -isn 'String\.format' -R . 
```

谁能给个解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T16:05:14.010

如果没有引号，*shell*在将字符串传递给 . 之前解释`\.`为 a 。所以现在有一个正则表达式通配符，因此可以找到任何字符，包括空格。`.``grep``grep`

当您包含引号时，*shell*将完整传递`\.`给`grep`. 现在`grep`知道它必须搜索句点，而不是通配符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:04:35.887

你的 shell 吃掉了反斜杠，所以你必须转义它才能将它传递给`grep`.

# java - 如何在 QuartzJobBean 的子类中获取 Session/Request 对象

> ID：11634741
> 
> 赞同：0
> 
> 时间：2012-07-24T15:56:48.537
> 
> 标签：java, spring, spring-mvc, cron-task

我正在实施 cron 作业计划以在 Web 应用程序中发送带有附件的定期电子邮件。

**问题描述：** 为了在java代码中创建一个文件（将附加邮件），我需要会话对象来获取文件的绝对路径。

**例如 ：**

```
request.getSession().getServletContext().getRealPath("/"); 
```

我们用来获取路径。

那么如何实现/获取会话对象呢？或者有没有其他方法可以获取文件的相对路径？

**注意：**我需要在 WebContent/MyFolder 中创建 attachmnet 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:06:08.253

Cron 在不同的线程和不同的时间启动作业，因此在运行作业时，会话可能已经不存在。您应该使用所有参数创建 cron 作业（即作为字符串的路径）或只使用其他方法来检索路径（例如使用 java[资源](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)或显式定义的路径）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:06:45.180

您无法获得 HTTP 会话，因为 cron 作业中没有 HTTP 会话。该作业是异步的，它在自己的线程中运行，与会话没有任何关系。即使没有用户连接到您的服务器，它也会运行。

所以，你的问题实际上是如何获取文件的路径。

答案就在你的问题中。注意`getServletContext()`. 您可以从您的 servlet 中提取 servlet 上下文：`servlet.getServletConfig().getServletContext()`. 因此，如果您的应用程序中至少有一个 servlet，您可以将您的 servlet 上下文（或从中提取的更好的文件路径）放入静态变量或系统属性，然后在您的 cron 作业中使用它。

# c# - 用于确保给定类型的单个未完成任务的模式

> ID：11634742
> 
> 赞同：4
> 
> 时间：2012-07-24T15:56:56.510
> 
> 标签：c#, .net, task-parallel-library, design-patterns

考虑以下：

```
public class SomeService
{
    public Task StartAsync()
    {
        return Task.Factory
            .StartNew(() => DoStartup());
    }

    public Task StopAsync()
    {
        return Task.Factory
            .StartNew(() => DoShutdown());
    }
} 
```

上面的问题是，如果多次调用其中一个`StartAsync`或`StopAsync`多个，那么将创建多个任务来启动/停止服务。实际上，任何时候都只希望有一个启动/停止任务处于活动状态。为此，我通常会这样做：

```
public class SomeService
{
    private readonly object startSync = new object();
    private readonly object stopSync = new object();
    private Task startTask;
    private Task stopTask;

    public Task StartAsync()
    {
        var startTaskLocal = this.startTask;

        if (startTaskLocal != null)
        {
            return startTaskLocal;
        }

        lock (this.startSync)
        {
            if (this.startTask != null)
            {
                return this.startTask;
            }

            this.startTask = Task.Factory
                .StartNew(() => DoStartup())
                .Then(x =>
                    {
                        lock (this.stopSync)
                        {
                            this.stopTask = null);
                        }
                    });

            return this.startTask;
        }
    }

    public Task StopAsync()
    {
        // similar pattern to above
    }
} 
```

现在虽然这有效，但它有点难看。在我试图将这种模式封装成一些小而可重用的东西之前，我想知道是否已经建立了一种我不知道的方法？

PS。`StartAsync`我通过等待任何未完成的呼叫来进一步扩展这个想法`StopAsync`，反之亦然。这意味着在任何时候只能进行一个启动或停止操作。这很容易通过任务组合来完成。如果我可以首先找出是否有一种既定的方法可以巧妙地实现上述目标，那么我就可以确定它是否适合这种扩展行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:03:34.073

您可以使用[状态机模式](http://en.wikipedia.org/wiki/State_pattern)。当代码进入 AsyncStart 时，将 state 设置为`Starting`. 我推荐一个回调，将对象的状态设置为`Running`.

`Stopping`为,提供相同的值`Stopped`。

因此，在您的服务内部，您可能有一个`ServiceState`对象。在调用`AsyncStart`/之前`AsyncStop`，请检查当前状态。

**更新**
...另一种方法*可能*是存储和检查[Cancellation Token](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)。有无数关于如何使用`CancellationToken`. 这只是我的想法，并不能确认这一定是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T10:45:51.837

我终于开始在我的代码库中解决这个问题，并想在这里分享我的解决方案。快速解释：我有一个`StateMachineTaskFactory<T>`类，其中`T`定义了有效状态（通常是枚举）。此任务工厂允许您注册有效的转换（例如，在转换到`Started`状态时，在转换进行时使用`Starting`）并制定转换。它在维护异步 API 的同时保证状态机语义。它基本上形式化了我原始代码中存在的状态机，以一种健壮且可重用的方式进行。

首先，这是一个如何在我的问题中提出的用例中使用它的示例：

```
public enum ServiceState
{
    Uninitialized,
    Initializing,
    Initialized,
    Starting,
    Started,
    Stopping,
    Stopped
}

public class SomeService
{
    private readonly StateMachineTaskFactory<ServiceState> stateMachineTaskFactory;

    public Service()
    {
        this.stateMachineTaskFactory = new StateMachineTaskFactory<ServiceState>();
        this.stateMachineTaskFactory.RegisterTransition(ServiceState.Initializing, ServiceState.Initialized, this.OnInitializeAsync);
        this.stateMachineTaskFactory.RegisterTransition(ServiceState.Starting, ServiceState.Started, this.OnStartAsync);
        this.stateMachineTaskFactory.RegisterTransition(ServiceState.Stopping, ServiceState.Stopped, this.OnStopAsync);
    }

    // we don't support cancellation in our initialize API
    public Task InitializeAsync()
    {
        return this.stateMachineTaskFactory.TransitionTo(ServiceState.Initialized);
    }

    public Task StartAsync(CancellationToken cancellationToken = default(CancellationToken))
    {
        return this.stateMachineTaskFactory.TransitionTo(ServiceState.Started, cancellationToken);
    }

    public Task StopAsync(CancellationToken cancellationToken = default(CancellationToken))
    {
        return this.stateMachineTaskFactory.TransitionTo(ServiceState.Stopped, cancellationToken);
    }

    // even though we don't support cancellation during initialization, we'll still get a cancellation token, but it will CancellationToken.None
    private Task OnInitializeAsync(CancellationToken cancellationToken, object state)
    {
        // return a Task that performs the actual work involved in initializing
    }

    private Task OnStartAsync(CancellationToken cancellationToken, object state)
    {
        // return a Task that performs the actual work involved in starting, passing on the cancellation token as relevant
    }

    private Task OnStopAsync(CancellationToken cancellationToken, object state)
    {
        // return a Task that performs the actual work involved in stopping, passing on the cancellation token as relevant
    }
} 
```

可用的功能和灵活性比上述示例用法中的明显更多，但这可能是正常的用例。

对不起，下面的代码墙。我删除了 API 文档以提高可读性。有几个实用程序类我没有包括在内，但它们是不言自明的。

```
[Serializable]
public sealed class StateTransitionForbiddenException<T> : InvalidOperationException
    where T : struct
{
    private readonly T targetState;
    private readonly T state;

    public StateTransitionForbiddenException()
    {
    }

    public StateTransitionForbiddenException(string message)
        : base(message)
    {
    }

    public StateTransitionForbiddenException(string message, Exception innerException)
        : base(message, innerException)
    {
    }

    public StateTransitionForbiddenException(T targetState, T state)
        : base("A transition to state '" + targetState + "' was forbidden by the validate transition callback.")
    {
        this.targetState = targetState;
        this.state = state;
    }

    public StateTransitionForbiddenException(string message, T targetState, T state)
        : base(message)
    {
        this.targetState = targetState;
        this.state = state;
    }

    private StateTransitionForbiddenException(SerializationInfo info, StreamingContext context)
        : base(info, context)
    {
        this.targetState = (T)info.GetValue("TargetState", typeof(T));
        this.state = (T)info.GetValue("State", typeof(T));
    }

    public T TargetState
    {
        get { return this.targetState; }
    }

    public T State
    {
        get { return this.state; }
    }

    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        base.GetObjectData(info, context);

        info.AddValue("TargetState", this.targetState);
        info.AddValue("State", this.state);
    }
}

[DebuggerDisplay("{OldState} -> {NewState}")]
public sealed class StateChangedEventArgs<T> : EventArgs
    where T : struct
{
    private readonly T oldState;
    private readonly T newState;

    public StateChangedEventArgs(T oldState, T newState)
    {
        this.oldState = oldState;
        this.newState = newState;
    }

    public T OldState
    {
        get { return this.oldState; }
    }

    public T NewState
    {
        get { return this.newState; }
    }
}

public delegate Task CreateTaskForTransitionCallback(CancellationToken cancellationToken, object state);

public delegate bool ValidateTransitionCallback<T>(T currentState)
    where T : struct;

public class StateMachineTaskFactory<T> : TaskFactory
    where T : struct
{
    private static readonly ExceptionHelper exceptionHelper = new ExceptionHelper(typeof(StateMachineTaskFactory<>));
    private readonly ConcurrentDictionary<T, TransitionRegistrationInfo> transitionRegistrations;
    private readonly object stateSync;

    // the current state
    private T state;

    // the state to which we're currently transitioning
    private T? transitionToState;

    // the task performing the transition
    private Task transitionToTask;

    public StateMachineTaskFactory()
        : this(default(T))
    {
    }

    public StateMachineTaskFactory(T startState)
    {
        this.transitionRegistrations = new ConcurrentDictionary<T, TransitionRegistrationInfo>();
        this.stateSync = new object();
        this.state = startState;
    }

    public event EventHandler<StateChangedEventArgs<T>> StateChanged;

    public T State
    {
        get
        {
            return this.state;
        }

        private set
        {
            if (!EqualityComparer<T>.Default.Equals(this.state, value))
            {
                var oldState = this.state;
                this.state = value;
                this.OnStateChanged(new StateChangedEventArgs<T>(oldState, value));
            }
        }
    }

    public void RegisterTransition(T beginTransitionState, T endTransitionState, CreateTaskForTransitionCallback createTaskCallback)
    {
        createTaskCallback.AssertNotNull("factory");

        var transitionRegistrationInfo = new TransitionRegistrationInfo(beginTransitionState, createTaskCallback);
        var registered = this.transitionRegistrations.TryAdd(endTransitionState, transitionRegistrationInfo);
        exceptionHelper.ResolveAndThrowIf(!registered, "transitionAlreadyRegistered", endTransitionState);
    }

    public Task TransitionTo(T endTransitionState, CancellationToken cancellationToken = default(CancellationToken), ValidateTransitionCallback<T> validateTransitionCallback = null, object state = null)
    {
        lock (this.stateSync)
        {
            if (EqualityComparer<T>.Default.Equals(this.state, endTransitionState))
            {
                // already in the requested state - nothing to do
                return TaskUtil.FromResult(true);
            }
            else if (this.transitionToState.HasValue && EqualityComparer<T>.Default.Equals(this.transitionToState.Value, endTransitionState))
            {
                // already in the process of transitioning to the requested state - return same transition task
                return this.transitionToTask;
            }
            else if (this.transitionToTask != null)
            {
                // not in the requested state, but there is an outstanding transition in progress, so come back to this request once it's done
                return this.transitionToTask.Then(x => this.TransitionTo(endTransitionState, cancellationToken, validateTransitionCallback, state));
            }
            else if (validateTransitionCallback != null && !validateTransitionCallback(this.State))
            {
                // transition is forbidden, so return a failing task to that affect
                var taskCompletionSource = new TaskCompletionSource<bool>();
                var exception = new StateTransitionForbiddenException<T>(endTransitionState, this.State);
                taskCompletionSource.TrySetException(exception);
                return taskCompletionSource.Task;
            }

            // else, need to transition to the chosen state
            TransitionRegistrationInfo transitionRegistrationInfo;
            var result = this.transitionRegistrations.TryGetValue(endTransitionState, out transitionRegistrationInfo);
            exceptionHelper.ResolveAndThrowIf(!result, "transitionNotRegistered", endTransitionState);

            var beginTransitionState = transitionRegistrationInfo.BeginTransitionState;
            var task = transitionRegistrationInfo.TaskFactory(cancellationToken, state);
            exceptionHelper.ResolveAndThrowIf(task == null, "taskFactoryReturnedNull", endTransitionState);

            var previousState = this.State;
            this.State = beginTransitionState;
            this.transitionToState = endTransitionState;
            this.transitionToTask = task
                .ContinueWith(
                    x =>
                        {
                            if (x.IsFaulted || cancellationToken.IsCancellationRequested)
                            {
                                // faulted or canceled, so roll back to previous state
                                lock (this.stateSync)
                                {
                                    this.State = previousState;
                                    this.transitionToState = null;
                                    this.transitionToTask = null;
                                }

                                if (x.IsFaulted)
                                {
                                    throw x.Exception;
                                }

                                cancellationToken.ThrowIfCancellationRequested();
                            }
                            else
                            {
                                // succeeded, so commit to end state
                                lock (this.stateSync)
                                {
                                    this.State = endTransitionState;
                                    this.transitionToState = null;
                                    this.transitionToTask = null;
                                }
                            }
                        });

            return this.transitionToTask;
        }
    }

    protected virtual void OnStateChanged(StateChangedEventArgs<T> e)
    {
        this.StateChanged.Raise(this, e);
    }

    private struct TransitionRegistrationInfo
    {
        private readonly T beginTransitionState;
        private readonly CreateTaskForTransitionCallback taskFactory;

        public TransitionRegistrationInfo(T beginTransitionState, CreateTaskForTransitionCallback taskFactory)
        {
            this.beginTransitionState = beginTransitionState;
            this.taskFactory = taskFactory;
        }

        public T BeginTransitionState
        {
            get { return this.beginTransitionState; }
        }

        public CreateTaskForTransitionCallback TaskFactory
        {
            get { return this.taskFactory; }
        }
    }
} 
```

而且，为了完整起见，我的单元测试：

```
public sealed class StateMachineTaskFactoryFixture
{
    #region Supporting Enums

    private enum State
    {
        Undefined,
        Starting,
        Started,
        Stopping,
        Stopped
    }

    #endregion

    [Fact]
    public void default_ctor_uses_default_value_for_start_state()
    {
        var factory = new StateMachineTaskFactory<State>();
        Assert.Equal(State.Undefined, factory.State);
    }

    [Fact]
    public void ctor_can_set_start_state()
    {
        var factory = new StateMachineTaskFactory<State>(State.Stopped);
        Assert.Equal(State.Stopped, factory.State);
    }

    [Fact]
    public void register_transition_throws_if_factory_is_null()
    {
        var factory = new StateMachineTaskFactory<State>();
        Assert.Throws<ArgumentNullException>(() => factory.RegisterTransition(State.Starting, State.Started, null));
    }

    [Fact]
    public void register_transition_throws_if_transition_already_registered()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));

        var ex = Assert.Throws<InvalidOperationException>(() => factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true)));
        Assert.Equal("A transition to state 'Started' has already been registered.", ex.Message);
    }

    [Fact]
    public void transition_to_throws_if_no_transition_registered_for_state()
    {
        var factory = new StateMachineTaskFactory<State>();

        var ex = Assert.Throws<InvalidOperationException>(() => factory.TransitionTo(State.Started));
        Assert.Equal("No transition to state 'Started' has been registered.", ex.Message);
    }

    [Fact]
    public void transition_to_throws_if_task_factory_returns_null()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => null);

        var ex = Assert.Throws<InvalidOperationException>(() => factory.TransitionTo(State.Started));
        Assert.Equal("Task factory for end state 'Started' returned null.", ex.Message);
    }

    [Fact]
    public void transition_to_returns_same_task_if_called_multiple_times_whilst_initial_task_is_still_in_progress()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.Delay(TimeSpan.FromMilliseconds(250)));

        var initialTask = factory.TransitionTo(State.Started);

        Assert.Equal(initialTask, factory.TransitionTo(State.Started));
        Assert.Equal(initialTask, factory.TransitionTo(State.Started));
        Assert.Equal(initialTask, factory.TransitionTo(State.Started));

        Assert.True(initialTask.Wait(TimeSpan.FromSeconds(3)));
    }

    [Fact]
    public void transition_to_returns_completed_task_if_already_in_desired_state()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));

        factory.TransitionTo(State.Started).Wait();

        Assert.Equal(TaskStatus.RanToCompletion, factory.TransitionTo(State.Started).Status);
    }

    [Fact]
    public void transition_to_passes_any_state_to_task_creation_function()
    {
        var factory = new StateMachineTaskFactory<State>();
        string receivedState = null;
        factory.RegisterTransition(
            State.Starting,
            State.Started,
            (ct, o) =>
            {
                receivedState = o as string;
                return TaskUtil.FromResult(true);
            });

        factory.TransitionTo(State.Started, CancellationToken.None, null, "here is the state").Wait();

        Assert.Equal("here is the state", receivedState);
    }

    [Fact]
    [SuppressMessage("Microsoft.Naming", "CA2204", Justification = "It's not a word - it's a format string!")]
    public void transition_to_ensures_previous_transition_is_first_completed_before_starting_subsequent_transition()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.Delay(TimeSpan.FromMilliseconds(10)));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => TaskUtil.Delay(TimeSpan.FromMilliseconds(10)));

        var startedAt = DateTime.MinValue;
        var stoppedAt = DateTime.MinValue;
        var startedTask = factory.TransitionTo(State.Started).ContinueWith(x => startedAt = DateTime.UtcNow, TaskContinuationOptions.ExecuteSynchronously);
        var stoppedTask = factory.TransitionTo(State.Stopped).ContinueWith(x => stoppedAt = DateTime.UtcNow, TaskContinuationOptions.ExecuteSynchronously);

        Assert.True(Task.WaitAll(new Task[] { startedTask, stoppedTask }, TimeSpan.FromSeconds(3)), "Timed out waiting for tasks to complete.");
        Assert.True(stoppedAt > startedAt, "stoppedAt is " + stoppedAt.Millisecond + " and startedAt is " + startedAt.Millisecond + ", difference is " + (stoppedAt - startedAt).ToString());
    }

    [Fact]
    public void transition_to_can_be_canceled_before_transition_takes_place()
    {
        var factory = new StateMachineTaskFactory<State>();
        var cancellationTokenSource = new CancellationTokenSource();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));

        cancellationTokenSource.Cancel();
        var startedTask = factory.TransitionTo(State.Started, cancellationTokenSource.Token);

        try
        {
            startedTask.Wait();
            Assert.True(false, "Failed to throw exception.");
        }
        catch (AggregateException ex)
        {
            Assert.Equal(1, ex.InnerExceptions.Count);
            Assert.IsType<OperationCanceledException>(ex.InnerExceptions[0]);
        }
    }

    [Fact]
    public void transition_to_can_be_canceled()
    {
        var factory = new StateMachineTaskFactory<State>();
        var cancellationTokenSource = new CancellationTokenSource();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => TaskUtil.Delay(TimeSpan.FromMilliseconds(150)));

        var startedTask = factory.TransitionTo(State.Started, cancellationTokenSource.Token);
        startedTask.ContinueWith(x => cancellationTokenSource.Cancel());
        var stoppedTask = factory.TransitionTo(State.Stopped, cancellationTokenSource.Token);

        startedTask.Wait(TimeSpan.FromSeconds(3));

        try
        {
            stoppedTask.Wait(TimeSpan.FromSeconds(3));
            Assert.True(false, "Failed to throw exception.");
        }
        catch (AggregateException ex)
        {
            Assert.Equal(1, ex.InnerExceptions.Count);
            Assert.IsType<OperationCanceledException>(ex.InnerExceptions[0]);
        }
    }

    [Fact]
    public void transition_to_can_be_forbidden()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => TaskUtil.FromResult(true));

        var startedTask = factory.TransitionTo(State.Started, CancellationToken.None, x => x == State.Undefined);
        var stoppedTask = factory.TransitionTo(State.Stopped, CancellationToken.None, x => x != State.Started);

        startedTask.Wait(TimeSpan.FromSeconds(3));

        try
        {
            stoppedTask.Wait(TimeSpan.FromSeconds(3));
            Assert.True(false, "Failed to throw exception.");
        }
        catch (AggregateException ex)
        {
            Assert.Equal(1, ex.InnerExceptions.Count);
            var ex2 = Assert.IsType<StateTransitionForbiddenException<State>>(ex.InnerExceptions[0]);
            Assert.Equal(State.Stopped, ex2.TargetState);
            Assert.Equal(State.Started, ex2.State);
            Assert.Equal("A transition to state 'Stopped' was forbidden by the validate transition callback.", ex2.Message);
        }
    }

    [Fact]
    public void canceled_transition_reverts_back_to_original_state()
    {
        var factory = new StateMachineTaskFactory<State>();
        var cancellationTokenSource = new CancellationTokenSource();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => TaskUtil.Delay(TimeSpan.FromSeconds(3), cancellationTokenSource.Token));

        factory.StateChanged += (s, e) =>
            {
                if (e.NewState == State.Stopping)
                {
                    // cancel the stop
                    cancellationTokenSource.Cancel();
                }
            };

        var startedTask = factory.TransitionTo(State.Started);
        var stoppedTask = factory.TransitionTo(State.Stopped, cancellationTokenSource.Token);

        startedTask.Wait(TimeSpan.FromSeconds(3));

        try
        {
            stoppedTask.Wait(TimeSpan.FromSeconds(3));
            Assert.True(false, "Failed to throw exception.");
        }
        catch (AggregateException ex)
        {
            Assert.Equal(1, ex.InnerExceptions.Count);
            Assert.IsType<OperationCanceledException>(ex.InnerExceptions[0]);
            Assert.Equal(State.Started, factory.State);
        }
    }

    [Fact]
    public void failed_transition_reverts_back_to_original_state()
    {
        var factory = new StateMachineTaskFactory<State>();
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => { throw new InvalidOperationException("Something went wrong"); });

        var startedTask = factory.TransitionTo(State.Started);
        var stoppedTask = factory.TransitionTo(State.Stopped);

        startedTask.Wait(TimeSpan.FromSeconds(3));

        try
        {
            stoppedTask.Wait(TimeSpan.FromSeconds(3));
            Assert.True(false, "Failed to throw exception.");
        }
        catch (AggregateException ex)
        {
            Assert.Equal(1, ex.InnerExceptions.Count);
            Assert.IsType<InvalidOperationException>(ex.InnerExceptions[0]);
            Assert.Equal(State.Started, factory.State);
        }
    }

    [Fact]
    public void state_change_is_raised_as_state_changes()
    {
        var factory = new StateMachineTaskFactory<State>(State.Stopped);
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.FromResult(true));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => TaskUtil.FromResult(true));
        var stateChanges = new List<StateChangedEventArgs<State>>();
        factory.StateChanged += (s, e) => stateChanges.Add(e);

        factory.TransitionTo(State.Started).Wait(TimeSpan.FromSeconds(1));
        factory.TransitionTo(State.Stopped).Wait(TimeSpan.FromSeconds(1));
        factory.TransitionTo(State.Started).Wait(TimeSpan.FromSeconds(1));
        factory.TransitionTo(State.Stopped).Wait(TimeSpan.FromSeconds(1));

        Assert.Equal(8, stateChanges.Count);
        Assert.Equal(State.Stopped, stateChanges[0].OldState);
        Assert.Equal(State.Starting, stateChanges[0].NewState);
        Assert.Equal(State.Starting, stateChanges[1].OldState);
        Assert.Equal(State.Started, stateChanges[1].NewState);
        Assert.Equal(State.Started, stateChanges[2].OldState);
        Assert.Equal(State.Stopping, stateChanges[2].NewState);
        Assert.Equal(State.Stopping, stateChanges[3].OldState);
        Assert.Equal(State.Stopped, stateChanges[3].NewState);
        Assert.Equal(State.Stopped, stateChanges[4].OldState);
        Assert.Equal(State.Starting, stateChanges[4].NewState);
        Assert.Equal(State.Starting, stateChanges[5].OldState);
        Assert.Equal(State.Started, stateChanges[5].NewState);
        Assert.Equal(State.Started, stateChanges[6].OldState);
        Assert.Equal(State.Stopping, stateChanges[6].NewState);
        Assert.Equal(State.Stopping, stateChanges[7].OldState);
        Assert.Equal(State.Stopped, stateChanges[7].NewState);
    }

    [Fact]
    public void state_gets_the_current_state()
    {
        var factory = new StateMachineTaskFactory<State>(State.Stopped);
        factory.RegisterTransition(State.Starting, State.Started, (ct, o) => TaskUtil.Delay(TimeSpan.FromMilliseconds(100)));
        factory.RegisterTransition(State.Stopping, State.Stopped, (ct, o) => TaskUtil.Delay(TimeSpan.FromMilliseconds(100)));

        var task = factory.TransitionTo(State.Started);
        Assert.Equal(State.Starting, factory.State);
        task.Wait(TimeSpan.FromSeconds(3));
        Assert.Equal(State.Started, factory.State);
        task = factory.TransitionTo(State.Stopped);
        Assert.Equal(State.Stopping, factory.State);
        task.Wait(TimeSpan.FromSeconds(3));
        Assert.Equal(State.Stopped, factory.State);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:29:25.807

可能不是您想要的，但是如果将它们排队而不是忽略是意图（或者是可以接受的），那么一个相对简单的选择是对这 2 个 StartNew 调用使用[有限并发调度程序。](http://msdn.microsoft.com/en-us/library/ee789351.aspx)

获得您正在寻找的效果所需的代码比需要的代码多，但可以让您利用已经编写的东西而不是编写自己的代码。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T20:36:27.367

好吧，如果您一次只希望类的一个实例处于活动状态，您应该考虑使用单例模式。

我不是模式专家，所以如果我使用的解决方案总是有名字，我不知道。我不使用任务而是线程。这是我的代码。

```
public class Service
{
    private object oLock;
    private bool running;
    private Thread threadTask;
    private AutoResetEvent taskStarted;

    public bool IsRunning { get { return this.running; } }

    public Service()
    {
        oLock = new object();
        taskStarted = new AutoResetEvent(false);
        running = false;
    }

    public void Start()
    {
        // If we can not acquire the lock, then there is a Start or Stop operation 
        // in progress, so better leave. Also leave if already running.
        if (running || !Monitor.TryEnter(oLock))
            return;

        // Set running flag to prevent other threads to start service again
        running = true;

        // Create and start the thread
        threadTask = new Thread(new ThreadStart(Task));
        threadTask.IsBackground = true;
        threadTask.Start();

        // Wait until the task execution begins. This is optional
        taskStarted.WaitOne();

        // Release the lock
        Monitor.PulseAll(oLock);
        Monitor.Exit(oLock);
    }

    public void Stop()
    {
        // If we can not acquire the lock, then there is a Start or Stop operation 
        // in progress, so better leave. Also leave if not running.
        if(!running || !Monitor.TryEnter(oLock))
            return;

        // Clear the running task to prevent reentrancy
        running = false;

        // Here we can abort the thread. This is optional an depends on task
        threadTask.Abort();

        // Wait until the thrad finish
        threadTask.Join();

        // Clear
        threadTask = null;

        // Release the lock
        Monitor.PulseAll(oLock);
        Monitor.Exit(oLock);
    }

    protected virtual void Task()
    {
        // Setup task and allocate resources
        taskStarted.Set();

        // Execute the task poll
        while (running)
        {
        }

        // Finish the task and release resources
    }
} 
```

其中一个技巧是使用 Monitor 类而不是 lock 语句，因此尝试启动服务的第一个线程将获胜，而其他线程将获得已经启动或停止的服务。如果您打算颠倒顺序，请小心

```
if (Monitor.TryEnter() || running)
    return; 
```

您必须调用 Monitor.Exit 否则您的应用程序将死锁。

当然，您可以更改表示空闲、启动、运行和停止状态的枚举的运行布尔值。

使类抽象并让继承者覆盖要在/而不是while语句中调用的方法也是一个好主意。

希望这可以帮助。此致。

# c# - DataGridView 列排序异常

> ID：11634745
> 
> 赞同：1
> 
> 时间：2012-07-24T15:56:58.970
> 
> 标签：c#, winforms, sorting, datagridview

我想在表单加载时按列对 DataGridView 进行排序，但出现异常。

```
 private void frm_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'dataSetExclusion.Exclude' table. You can move, or remove it, as needed.
        this.excludeTableAdapter.Fill(this.dataSetExclusion.Exclude);
        this.dgv.Sort(this.dgv.Columns["ID"], ListSortDirection.Ascending); 
    } 
```

DataGridView dgv 中的列标题为“ID”。它的 DataPropertyName 是“ExcludeID”。我为列名尝试了“ID”和“ExcludeID”，但仍然出现异常。

```
Value cannot be null.Parameter name: dataGridViewColumn 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:08:03.120

尝试检查该列的名称属性，如下所示

![在此处输入图像描述](../Images/182fde6ce4cca5887cad1e388e973fd9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:07:36.973

列的名称可能与其文本表示不同。根据文档，该索引器正在查看该`Name`属性而不是该`HeaderText`属性。列设计器应该让您更改名称或查看当前名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:38:09.547

此问题有两个可能的原因，您没有绑定 DataGridView**或**您使用的列名不正确。

在您的表单加载中，您似乎永远不会绑定网格的数据源。您需要将代码更改为这样的内容（猜测 dataSetExclusion.Exclude 是您在网格中想要的吗？）：

```
private void frm_Load(object sender, EventArgs e)
{
    // TODO: This line of code loads data into the 'dataSetExclusion.Exclude' table. You can move, or remove it, as needed.
    this.excludeTableAdapter.Fill(this.dataSetExclusion.Exclude);
    this.dgv.DataSource = this.dataSetExclusion.Exclude;
    this.dgv.Sort(this.dgv.Columns["ID"], ListSortDirection.Ascending); 
} 
```

检查列名的方法有很多种——你总是可以在这里放置一个断点方法并在调试器中查看，或者你可以在数据集设计器中查看。网格中的列名将与设计器中的列名匹配（如果您使用表单设计器列和数据属性名称，则在表单设计器中查找名称）。

请注意，名称和 HeaderText 不必匹配，因此使用 HeaderText 通常不起作用。

# android - 解读 Android 内存信息

> ID：11634746
> 
> 赞同：3
> 
> 时间：2012-07-24T15:56:58.923
> 
> 标签：android, memory, adb

当我的应用程序在连接的设备上运行时，我刚刚在终端中运行了以下命令。adb shell dumpsys meminfo com.mine.application 获得表格后，我还会获得一个“资产分配”列表，如下所示：

```
Asset Allocations
zip:/data/app/com.mine.application-1.apk:/resources.arsc: 115K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K
zip:/data/app/com.mine.application-1.apk:/assets/HelveticaBold.otf: 374K

zip:/data/app/com.mine.application-1.apk:/assets/HelveticaOblique.otf: 3
85K 
```

这发生在我多次运行我的应用程序的某些部分之后。我是否认为这意味着 Helvetica 字体被分配了很多次？并用完所有加在一起的内存？此外，由于一旦我退出该特定活动，这些分配就不会被删除，我认为这是内存泄漏是否正确？

如果这是真的，我是否会确保在 onPause 时取消对字体的任何引用以解决此问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:14:16.940

有一个记录在案的 Android 错误是 Typeface.createFromAsset() 泄漏内存。

请参阅[http://code.google.com/p/android/issues/detail?id=9904](http://code.google.com/p/android/issues/detail?id=9904)

# java - 无头浏览器，对 java 有完整的 javascript 支持

> ID：11634747
> 
> 赞同：31
> 
> 时间：2012-07-24T15:57:11.173
> 
> 标签：java, webkit, qtwebkit, headless, headless-browser

我一直在使用 HtmlUnit（开发人员做得很好）作为我以前的一些应用程序的无头浏览器，但是 javascript 支持不适用于我的下一个应用程序将访问的某些网站。

1.  我听说了 Python 的 QtWebKit 绑定，但我的应用程序将使用 Java，或者是否有用于 WebKit 或 QtWebKit 的 Java 绑定？

2.  有谁知道一个很好的无头浏览器，用于 Java，完全支持 javascript？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-01T13:28:52.230

[Nathan Ridley 对另一个类似问题的回答](https://stackoverflow.com/a/814929/679240)是我迄今为止找到的最完整的回答。

无论如何，如果一切都失败了，您可以使用 Python 或 JS 替代方案，将其功能公开为服务器内部的 Web 服务，然后您的 Java 应用程序可以通过 Web 服务使用无头浏览器的功能。设置起来会很痛苦，但如果没有其他方法可以正常工作，它可能是一个可行的选择。

此外，[还有一些用于 Java 的“非无头”浏览器包装器](https://stackoverflow.com/questions/2653949/embeding-gecko-webkit-in-java)；也许可以根据要求围绕这些构建测试解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-24T07:09:25.227

也许[https://github.com/machinepublishers/jbrowserdriver](https://github.com/machinepublishers/jbrowserdriver) - 它是无头的，仅用 Java 编写。

（披露：我是项目所有者）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T16:00:13.067

Take a look at [phantom.js](http://phantomjs.org/). Based on webkit it offers a complete headless browser.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T16:18:00.810

Rhino + env.js 是一个完整的 java 解决方案，我用过，它不是超级快但看起来相当稳定，应该给你正确的 js 支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-21T06:15:13.563

回复一个旧线程，希望它可能对某些人有用。

1）你可以使用QTJambi的QWebView。它相当快。

2) JBrowserDriver 是另一种选择。

就个人而言，我发现 QT 引擎要快一些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-11T13:48:54.153

内置的 webview 怎么样。我不确定是否完全支持 JS，但在网站上的快速检查表明它可以支持 javascript。

JavaFX 网络视图：[JFX 网络视图](http://tutorials.jenkov.com/javafx/webview.html)

* * *

```
 private static void initWebView(Stage primaryStage) {
        primaryStage.setTitle("JavaFX WebView Example");
        WebView webView = new WebView();
        //webView.getEngine().load("http://localhost:9009");
        webView.getEngine().loadContent("<h3 id='aa'>JAVA FX WebView, HelloWorld</h3><script>document.getElementById('aa').innerHTML='TEST'</script>");
        webView.getEngine().setJavaScriptEnabled(true);
        VBox vBox = new VBox(webView);
        Scene scene = new Scene(vBox, 960, 600);
        primaryStage.setScene(scene);
        primaryStage.show();
    } 
```

* * *

与问题无关，还可以看看这个：[Java-Express](https://github.com/Simonwep/java-express) or [NanoHttpd](https://github.com/NanoHttpd/nanohttpd)

这种组合可能会对某人有所帮助。

# jira - 使用 REST 与 Java 客户端通信 Jira

> ID：11634750
> 
> 赞同：3
> 
> 时间：2012-07-24T15:57:17.090
> 
> 标签：jira

我一直在阅读有关 Atlassian Jira 的页面中的文档。

我想简单地在 Eclipse 中创建一个类以使用 Rest 连接到 Jira 并获取问题的名称。

我需要安装什么？[我下载了这个页面](https://marketplace.atlassian.com/plugins/com.atlassian.jira.jira-rest-java-client)的一个罐子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T13:43:19.893

### 第一个解决方案

如果您使用的是 Eclipse，那就简单了。下载 m2e 插件（帮助 -> 安装新软件 -> 使用 -> “ [m2e 插件下载链接](http://download.eclipse.org/technology/m2e/releases)”）。

然后 New -> Project ... -> Maven Project 在 pom.xml 添加：

```
<dependencies>
...
    <dependency>
        <groupId>com.atlassian.jira</groupId>
        <artifactId>jira-rest-java-client</artifactId>
        <version>Version of the library you use</version>
    </dependency>
...
</dependencies> 
```

并使用[https://studio.atlassian.com/wiki/display/JRJC/Tutorial](https://studio.atlassian.com/wiki/display/JRJC/Tutorial)中所需的内容。

### 其他解决方案

或者，如果您只需要获取问题名称，那么您可以向 REST url 发出 HttpRequest 并解析返回的 JSON。REST 响应的样子：[https ://jira.atlassian.com/rest/api/latest/issue/JRA-9](https://jira.atlassian.com/rest/api/latest/issue/JRA-9)

请参阅： [如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java) , [在 Java 中解码 JSON 格式](https://stackoverflow.com/questions/3715246/decoding-json-format-in-java)

# xamarin.ios - 尝试将事件添加到条目元素上的 .ShouldReturn

> ID：11634752
> 
> 赞同：0
> 
> 时间：2012-07-24T15:57:24.153
> 
> 标签：xamarin.ios, monotouch.dialog

我正在尝试添加一个由 Monotouch.Dialog 条目元素内的 TextFieldShouldReturn 触发的事件。我目前正在尝试附加这样的事件：

```
 //create the entry element
   EntryElement newEntry = new EntryElement(thisQuestion.Text, "tap to type", null);
   //add should return
   newEntry.ShouldReturn(addAnswerToSurvey(newEntry.Value, thisQuestion.Index));
   //add the entry to the section
   aSection.Add(newEntry); 
```

我在构建时收到错误消息：“MonoTouch.Dialog.EntryElement.ShouldReturn”在“MonoTouch.Dialog.EntryElement”类型之外使用时只能出现在 += 或 -= 的左侧（CS0070）

我听说人们无法从 Monotouch.Dialog 语句中获取数据，这似乎就是这个错误可能暗示的。所以......是否有可能实现文本字段应该在条目元素上返回委托，如果是这样，如何？如果不是，是否只是因为 entry 元素包含一个文本字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:02:01.897

埃里克，你需要使用：

newEntry.ShouldReturn += () => { ... }

# javascript - jQuery / javascript 将虚拟地址解析为 URL

> ID：11634759
> 
> 赞同：0
> 
> 时间：2012-07-24T15:57:54.663
> 
> 标签：javascript, jquery, asp.net-mvc-3, url, resolveurl

我正在尝试根据下拉列表中的当前选定值加载部分视图。当我硬编码网址时，我的代码有效......

```
$(document).ready(function () {
    $('#accountDropdownList').change(function () {
        var value = $(this).attr('value');
        $('#addressDetails').html('').load("http://localhost:52477/Account/Details/", { id: value }, function (data) { });

        return;
    });
}); 
```

但我想在 c# 视图中使用我的 asp.net mvc 3 中的虚拟地址

```
@Html.Action("Details", "Account", new { id = value }) 
```

无论如何将控制器和方法名称解析为完整的 url？

谢谢。

# android - Android：屏幕旋转后的列表视图双条目

> ID：11634767
> 
> 赞同：4
> 
> 时间：2012-07-24T15:58:18.287
> 
> 标签：android, listview, android-listview

我有一个在 onCreate() 中填充的 listView，因为在屏幕旋转中再次调用 onCreate()，它会再次填充它，因此在每次旋转之后，我当然会得到条目添加了我不想要的内容。onCreate 基本上是：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);
    myList = new ArrayList<SingleEntry>();
    new getList().execute(); //Async task to fill myList

    ListView lv = (ListView) getActivity().findViewById(R.id.ListView01);

    itemAdapter = new ItemAdapterOverview(getActivity().getApplicationContext(), myList);

    lv.setAdapter(itemAdapter);
} 
```

其中 myList 是一个 ArrayList 和一个类变量。在填充发生之前，我尝试在 onCreate() 中设置一个空适配器，这就是 Google 向我建议的。但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:01:32.500

将此添加到清单活动的清单中：

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

并像这样覆盖您的活动的[OnConfigurationChanged](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)方法：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
} 
```

这不应该再调用你的 onCreate 了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:58:56.710

**简单的“快速修复”答案：** 在 onCreate() 中的 itemAdapter 上调用 .clear() 您也可以尝试在列表适配器上调用 .notifyDataSetChanged() 。

这将在您再次添加之前清除适配器中的项目。

**不太简单但更完整的答案：** 另一种方法是在 onCreate() 中将 itemAdapter 传递到捆绑包中，请参阅[http://developer.android.com/guide/中标题为“在配置更改期间保留对象”的部分主题/资源/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T16:32:10.557

您可以像这样`myList`在 Android 的方法中保存：`onSaveInstanceState`

```
protected void onSaveInstanceState(Bundle bundle) {
    bundle.putSerializable("myList", myList);
    super.onSaveInstanceState(bundle);
} 
```

只需确保`SingleEntry` `Serializable`通过`SingleEntry`实现[Serializable 接口](http://developer.android.com/reference/java/io/Serializable.html)来实现类（注意：如果`SingleEntry`类内部有任何复杂的数据结构，也应该让它们实现`Serializable`接口）。然后在你的`onCreate`你可以使用这样的东西：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) 
{
    super.onActivityCreated(savedInstanceState);

    if(savedInstanceState != null) { //Check if the save instance state is not null

       //If is not null, retrieve the saved values of the myList variable
       myList = (ArrayList<SingleEntry>) savedInstanceState.getSerializable("myList");

       ListView lv = (ListView) getActivity().findViewById(R.id.ListView01);

       itemAdapter = new ItemAdapterOverview(getActivity().getApplicationContext(), myList);

       lv.setAdapter(itemAdapter);
    }
    else { //Bundle is empty so you should intialize the myList variable
       myList = new ArrayList<SingleEntry>();
       new getList().execute(); //Async task to fill myList

       ListView lv = (ListView) getActivity().findViewById(R.id.ListView01);

       itemAdapter = new ItemAdapterOverview(getActivity().getApplicationContext(), myList);

       lv.setAdapter(itemAdapter);
    }
} 
```

# position - 获取元素相对于父容器的位置/偏移量？

> ID：11634770
> 
> 赞同：160
> 
> 时间：2012-07-24T15:58:23.353
> 
> 标签：position, offset, zepto

我习惯于使用 jQuery。然而，在我当前的项目中，我使用 zepto.js。Zepto 没有提供`position()`像 jQuery 那样的方法。Zepto 仅附带`offset()`.

知道如何使用纯 js 或 Zepto 检索容器相对于父级的偏移量吗？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-07-24T16:02:12.467

# 警告：jQuery，不是标准的 JavaScript

`element.offsetLeft`并且`element.offsetTop`是用于查找元素相对于其位置的纯 javascript 属性`offsetParent`；是最近的父元素，位置为`relative`or`absolute`

或者，您始终可以使用[Zepto](http://zeptojs.com/)获取元素及其父元素的位置，然后将两者相减：

```
var childPos = obj.offset();
var parentPos = obj.parent().offset();
var childOffset = {
    top: childPos.top - parentPos.top,
    left: childPos.left - parentPos.left
} 
```

这样做的好处是即使父级没有定位，也可以为您提供子级相对于其父级的偏移量。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2012-07-24T16:02:46.227

在纯 js 中只需使用`offsetLeft`和`offsetTop`属性。
小提琴示例：http: [//jsfiddle.net/WKZ8P/](http://jsfiddle.net/WKZ8P/)

```
var elm = document.querySelector('span');
console.log(elm.offsetLeft, elm.offsetTop);
```

```
p   { position:relative; left:10px; top:85px; border:1px solid blue; }
span{ position:relative; left:30px; top:35px; border:1px solid red; }
```

```
<p>
    <span>paragraph</span>
</p>
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-08T08:15:16.103

我在 Internet Explorer 中这样做了。

```
function getWindowRelativeOffset(parentWindow, elem) {
    var offset = {
        left : 0,
        top : 0
    };

    // relative to the target field's document
    offset.left = elem.getBoundingClientRect().left;
    offset.top = elem.getBoundingClientRect().top;

    // now we will calculate according to the current document, this current
    // document might be same as the document of target field or it may be
    // parent of the document of the target field
    var childWindow = elem.document.frames.window;
    while (childWindow != parentWindow) {
        offset.left = offset.left + childWindow.frameElement.getBoundingClientRect().left;
        offset.top = offset.top + childWindow.frameElement.getBoundingClientRect().top;
        childWindow = childWindow.parent;
    }

    return offset;
}; 
```

===================你可以这样称呼它

```
getWindowRelativeOffset(top, inputElement); 
```

我只关注 IE，但其他浏览器也可以做类似的事情。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-12T13:21:22.947

我得到了另一个解决方案。从子属性值中减去父属性值

```
$('child-div').offset().top - $('parent-div').offset().top; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-18T20:41:49.480

将事件的偏移量加到父元素的偏移量上，得到事件的绝对偏移位置。

一个例子 ：

```
HTMLElement.addEventListener('mousedown',function(e){

    var offsetX = e.offsetX;
    var offsetY = e.offsetY;

    if( e.target != this ){ // 'this' is our HTMLElement

        offsetX = e.target.offsetLeft + e.offsetX;
        offsetY = e.target.offsetTop + e.offsetY;

    }
} 
```

当事件目标不是事件注册的元素时，它会将父级的偏移量与当前事件偏移量相加，以计算“绝对”偏移量值。

根据 Mozilla Web API：“ **HTMLElement.offsetLeft**只读属性返回当前元素**的左上角在 HTMLElement.offsetParent 节点内向左偏移的像素数。** ”

这通常发生在您在包含更多子项的父项上注册事件时，例如：具有内部图标或文本跨度的按钮，具有内部跨度的`li`元素。ETC...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-12T07:34:29.567

**例子**

因此，如果我们有一个 id 为“child-element”的子元素，并且我们想获得它相对于父元素的左/上位置，比如一个具有“item-parent”类的 div，我们会使用此代码。

```
var position = $("#child-element").offsetRelative("div.item-parent");
alert('left: '+position.left+', top: '+position.top); 
```

**插件**最后，对于实际的插件（用一些注释来解释发生了什么）：

```
// offsetRelative (or, if you prefer, positionRelative)
(function($){
    $.fn.offsetRelative = function(top){
        var $this = $(this);
        var $parent = $this.offsetParent();
        var offset = $this.position();
        if(!top) return offset; // Didn't pass a 'top' element 
        else if($parent.get(0).tagName == "BODY") return offset; // Reached top of document
        else if($(top,$parent).length) return offset; // Parent element contains the 'top' element we want the offset to be relative to 
        else if($parent[0] == $(top)[0]) return offset; // Reached the 'top' element we want the offset to be relative to 
        else { // Get parent's relative offset
            var parent_offset = $parent.offsetRelative(top);
            offset.top += parent_offset.top;
            offset.left += parent_offset.left;
            return offset;
        }
    };

    $.fn.positionRelative = function(top){
        return $(this).offsetRelative(top);
    };
}(jQuery)); 
```

> **注意：**您可以在 mouseClick 或 mouseover 事件上使用**它**

```
$(this).offsetRelative("div.item-parent"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-29T22:17:17.487

当然，使用纯 JS 很容易，只需这样做，也适用于固定和动画 HTML 5 面板，我制作并尝试了这段代码，它适用于任何浏览器（包括 IE 8）：

```
<script type="text/javascript">
    function fGetCSSProperty(s, e) {
        try { return s.currentStyle ? s.currentStyle[e] : window.getComputedStyle(s)[e]; }
        catch (x) { return null; } 
    }
    function fGetOffSetParent(s) {
        var a = s.offsetParent || document.body;

        while (a && a.tagName && a != document.body && fGetCSSProperty(a, 'position') == 'static')
            a = a.offsetParent;
        return a;
    }
    function GetPosition(s) {
        var b = fGetOffSetParent(s);

        return { Left: (b.offsetLeft + s.offsetLeft), Top: (b.offsetTop + s.offsetTop) };
    }    
</script> 
```

# c# - 选择列表框项目后如何使文本块消失？

> ID：11634775
> 
> 赞同：0
> 
> 时间：2012-07-24T15:58:58.787
> 
> 标签：c#, wpf, xaml, user-interface, mvvm

我正在用 C# 制作我的第一个 gui，并且我已经观看/阅读了大量关于 WPF 和 MVVM 的教程（这是我正在使用的方法），但我被困在一些直觉上应该很容易完成的事情上。我有一个列表框，在它上面我想显示一个文本块或标签，上面写着“请从列表中选择项目”，然后在选择项目后消失。

我怎样才能做到这一点？是否需要在代码隐藏中编写？我读过的大多数教程都不鼓励使用代码隐藏，所以我更喜欢不同的解决方案。我认为这不可能直接从 XAML 中完成，所以我需要创建一个 ViewModel 变量来保存列表框状态吗？如果是这样，那么我怎样才能使文本块/标签依赖于变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:05:49.853

在您的视图模型中，创建一个公共布尔属性“VisibilityOfLabel”

```
private bool visibilityOfLabel;

public bool VisibilityOfLabel 
{
     get
     {
         return visibilityOfLabel;
     } 

     set
     {
         visibilityOfLabel = value;
         RaisePropertyChanged("VisibilityOfLabel");
     }
} 
```

在您的 XAML 中，如果您已经将 DataContext 设置为您的 ViewModel，请将标签可见性绑定到该属性

```
<Label Content="{Binding LabelText}" Visible="{Binding VisibilityOfLabel}" /> 
```

然后，当您的 Combobox 更改时，只需将值设置为 true 或 false

**编辑** 您将不得不在这里使用可见性。这里已经有一个内置转换器可供您使用：[System.Windows.Controls.BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/system.windows.visibility.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:08:28.180

仅在 XAML 中执行此操作

```
<StackPanel>
    <TextBlock Text="Please select an item!">
        <TextBlock.Style>
            <Style TargetType="TextBlock">
                <Setter Property="Visibility" Value="Collapsed" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding SelectedItem, ElementName=lb}" Value="{x:Null}">
                        <Setter Property="Visibility" Value="Visible" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock>
    <ListBox Name="lb" ItemsSource="12345" />
</StackPanel> 
```

*`ItemsSource="12345"`将创建五行仅用于演示。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:09:44.213

你是对的。您将创建一个 viewmodel 变量来保存选定的列表框项。您还将创建另一个变量来保存文本块的可见性。然后，您可以从视图模型中设置文本块的可见性

```
private string _selectedListBoxItem;
private boolean _textBlockVisibility

public string SelectedListBoxItem
{
get {return _selectedListBoxItem;}
set{_selectedListBoxItem=value;
_textBlockVisibility=false;}
}

public Boolean TextBlockVisibilty
{
get{return _textBlockVisibility;};
set {_textBlockVisibility=value;};
} 
```

您的 xaml 会将文本块的可见性绑定到 TextBlockVisibility。您将不得不使用可见性转换器。就像是：

```
 public class BooleanVisibilityValueConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value != null)
            {
                if (((bool)value) == true)
                    return Visibility.Visible;
                else
                    return Visibility.Collapsed;
            }

            return Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {

            throw new Exception("The method or operation is not implemented.");

        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:36:26.300

虽然视图模型方法完全有效，但您可以完全在 XAML 中完成此操作，而不依赖于视图模型。

```
<StackPanel>
  <TextBlock Text="Please make a selection">
    <TextBlock.Style>
      <Style>
        <Setter Property="Visibility" Value="Hidden" />
        <Style.Triggers>
          <DataTrigger Binding="{Binding ElementName=TheListBox, Path=SelectedIndex}" Value="-1">
            <Setter Property="Visibility" Value="Visible" />
          </DataTrigger>
        </Style.Triggers>
      </Style>
    </TextBlock.Style>
  </TextBlock>

  <ListBox x:Name="TheListBox" ... />
</StackPanel> 
```

在这里，您所做的只是监视`SelectedIndex`将要进行的操作，`-1`直到做出选择为止。当值不再是`-1`时，文本块将被隐藏。我喜欢这种方法的两个原因：

1.  编写更少的代码
2.  这是严格的视图逻辑，实际上不需要视图模型来实现所需的行为

# objective-c - 使用 QLPreviewController/UIWebView 预览具有合并字段的 Word 文档

> ID：11634780
> 
> 赞同：2
> 
> 时间：2012-07-24T15:59:10.970
> 
> 标签：objective-c, ios, uiwebview, qlpreviewcontroller, .doc

我们目前正在开发一款 iPad 应用程序，该应用程序将具有以下功能：

*   用户提供凭据，登录。
*   通过 Web 服务检索一组任务，其中包含不同格式的 base64 编码文档。（.doc、.docx、.rtf 等）
*   文档标题显示在弹出列表中。
*   当一个文档被选中时，它被推送到一个控件来呈现和显示它。

当我们尝试推出包含绑定文档属性（合并字段）的 Word 文档时，我们的问题就开始了 - 没有显示数据，给我们留下了包含例如“地址行 1，地址行 2，邮政编码”的文档，而不是到实际值。

支持合并字段对我们来说是一个相当高优先级的业务案例，所以如果可能的话，让这个工作很重要。

到目前为止，我们已经尝试使用 QLPreviewController 和 UIWebView 来呈现文档，并且这两个控件的行为似乎相同。

以前有没有人遇到过这个问题，如果有，您是如何解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:03:03.600

这似乎在 iOS 6 中得到了修复，但是 QLPreviewController 可以使用大量进一步的工作来使其在其他视图/与 UIGestures 的交互中有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:41:25.133

下面的快速查看引擎可能不支持 Word 的特定功能。

您是否尝试使用 Desktop 的 Quick Look（在 Finder 中）在 Mac OS X 上查看同一个文档？

如果您的文档没有按您想要的方式显示，那么在 iOS 上也不会好很多，因为两者都使用相同的渲染引擎。在这种情况下，您应该向 Apple 提交错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:22:54.040

如前所述，OSX/iOS 使用的预览引擎似乎根本不支持此功能。

我们最终的解决方案是在服务器端使用转换库将我们的 doc、docx 或 RTF 文档转换为 PDF（它们都填充合并字段并且似乎受到预览器的良好支持），然后再发送到 iPad。这给 Web 服务带来了一些延迟，但它似乎是目前最好的解决方案。

# c++ - 什么可能导致 ntdll.dll 中的 C++ 程序崩溃？

> ID：11634782
> 
> 赞同：0
> 
> 时间：2012-07-24T15:59:33.427
> 
> 标签：c++, access-violation

我的 Windows C++ 程序表现得比以往更糟。它会自发崩溃，通常是在函数返回任何内容时/之后。指示的故障模块有时是程序本身，有时是 ntdll.dll，有时是 StackHash_something，异常代码有时是访问冲突，有时是 40000015。这让我发疯了。我曾经看到这种崩溃发生在为某个变量分配值之后，如果我评论了执行该分配的行（并在其他地方发生......），则不再发生。

但是我无法追踪问题......有什么提示吗？

我实际程序中的一段代码，以举例说明我所说的（尽管我怀疑它是否很有帮助）：

```
void Propozitie::AdaugaConstructieIncidenta(wstring text)
{
// Some function that creates/updates a member in a "Propozitie" object
// constr_incidenta is Entitate*, member of "Propozitie"
// p is a wstring, member of object "Entitate"
delete constr_incidenta;
constr_incidenta = new Entitate;
constr_incidenta->p = text;
// ^ app crashes here.
//had it been constr_incidenta->p = L""; it wouldn't have crashed
} 
```

更新：我重新安装了 Windows、GCC 和所有东西。我得到同样的无法解释的错误！也许一个提示是，分配发生在程序执行了一组递归函数之后，这些函数在途中创建了一些对象......？我很绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:05:18.210

听起来您需要重新评估所有代码。我认为这是一个大型代码库，您不能只在此处发布，但通常当内存开始损坏时会出现此类错误，因为您在初始化内存的范围之外进行写入和/或读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:32:23.903

Entitate 有默认构造函数吗？如果没有，当你调用“new Entitate”时它不会被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T07:55:46.693

我在我的项目中遇到了同样的问题。最后是一个循环函数调用。也许确保在您的递归中您不会意外地进行循环调用或溢出调用堆栈。

我想发表评论，但我没有足够的代表。

# javascript - 带有 Web SQL 数据库的客户端存储

> ID：11634783
> 
> 赞同：2
> 
> 时间：2012-07-24T15:59:34.087
> 
> 标签：javascript, html, local-storage, web-sql

我的应用程序使用客户端数据库存储，使用 webSQL 为用户存储信息。我听说浏览器开始远离 webSQL。目前只有 chrome、safari 和 Opera 支持它。因为 IE 和 Firefox 不支持 webSQL，所以如果用户使用这些浏览器，我将使用 cookie 来存储信息。然而，cookies 不是很安全，而且很难存储大量数据。那么我的问题是，现在有没有更好的选择类似于所有浏览器都支持的 javascript API？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:35:47.643

我认为 IndexedDB 对您来说是一个选择，它是一个基于对象的数据存储。Chrome 目前支持，Firefox 和 IE 10 将来也会支持。

查看以下演示文稿以更好地理解 [http://html5-demos.appspot.com/static/html5storage/index.html#slide1](http://html5-demos.appspot.com/static/html5storage/index.html#slide1)

根据我的经验，我建议使用包装库来降低未来浏览器更改的风险。下面给出了几个流行的库

1.  **Remy Sharp**的存储 polyfill****
***   **[Amplify.js](http://amplifyjs.com/)**通过 appendTo HTML5 API 与 HTML4 浏览器（包括 IE6）的后备*   **RealStorage** HTML5 API 是整个 API 的子集*   **YUI 团队的**YUI3 CacheOffline*******   **Persistence.js** 异步 Javascript 对象数据库映射器*   **[YDN-DB](http://git.yathit.com/ydn-db/wiki/Home)**易于使用的 IndexedDB、WebSql 和 localStorage 数据库包装器构建在闭包库之上。****

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-10T17:36:17.450

我迟到了几年，但考虑到自从提出这个问题以来客户端浏览器领域的发展，我想我会加两分钱。

在提出这个问题时，IndexedDB 是唯一的替代 WebSQL，尽管当时对它的支持参差不齐。虽然今天前者仍然适用，但后者不适用：现在，[所有主要浏览器供应商都有 IndexedDB 的实现](http://caniuse.com/#search=indexeddb)。

考虑到 IndexedDB 是目前唯一保留在 W3C 标准轨道上的数据库，就本地客户端数据库而言，它几乎是唯一的选择。

但在您深入研究 IndexedDB 之前，您应该了解几件事。首先是它是一个非关系型文档存储，因此本身不支持 SQL。第二个是它的API……至少可以说是笨拙的。

鉴于这些情况，我建议您查看[BakedGoods](https://github.com/klawson88/Baked-Goods)。例如，有了它，在 IndexedDB 数据库中放置一个或多个数据项非常简单：

```
bakedGoods.set({
    data: [{key: "key1", value: "value1"}, {key: "key2", value: "value2"}],
    storageTypes: ["indexedDB"],
    function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

当然，如果您是某种受虐狂，您可以忽略我的建议并处理原始 API。但不要说我没有警告你！

为了完全透明，BakedGoods 真正由您维护 :) 。****

# batch-file - 批量重命名基于zip文件的提取文件

> ID：11634784
> 
> 赞同：4
> 
> 时间：2012-07-24T15:59:35.217
> 
> 标签：batch-file, extract, rename

我有多个名称为 001.zip、002.zip、003.zip 的 zip 文件，并且有可能达到 999.zip。每个 zip 文件只有一个文本文件。我想使用 Batch 提取每个 zip 文件，然后将它提取的文本文件重命名为 zip 的文件名。

例如，如果我提取 001.zip，我希望提取的文本文件（提取的所有文本文件具有不同的名称）名称为 001.txt。

我至少现在正在提取所有文件，但是我对 Batch 太不熟悉了，不确定是否有简单的方法可以做到这一点？

```
cd test
echo     Decompressing zip4 data.
7z e *.zip 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T16:39:51.600

`for %F in (*.zip) do 7z e "%F" -so >"%~nF.txt"` - provided there is **only 1 file** in in zip archive as you said (shown as if executed directly from command line, if used in batch use `%%F`)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T16:11:39.703

尝试这个

```
md textfiles
for %%f in (*.7z) do (
7z e "%%f"
move *.txt textfiles\%%~nf.txt
)
xcopy textfiles\*.txt originalfolder
rd textfiles /s /q 
```

只需确保此文件夹中没有现有的文本文件，这应该可以工作。它只是创建一个临时文件夹并将所有文本文件移动到那里（当时只有提取的文件会存在，但这是因为文件名未知）并将其重命名为 zip 文件名。

完成所有提取和重命名后，它只需将所有文本文件移回原始文件夹并删除临时文件夹。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T02:29:12.707

我有一个非常相似的问题，我采用了 wmz 的答案，并应用了批处理文件的 %%F 扭曲。

我的情况在小细节上略有不同：

*   一个目录中的多个 Zip**和**7-Zip 存档文件（即多种存档类型）
*   每个存档文件都包含（在其他文件中）恰好一个**JPG**文件
*   每个存档中的每个 JPG 都有不同的（随机）名称
*   只应提取每个存档的 JPG 文件
*   提取的文件应重命名为“archive-name.jpg”

我的解决方案是具有以下核心功能的 CMD/批处理文件：

```
for %%F in (*.zip, *.7z) do 7z e "%%F" *.jpg -so >"%%~nF.jpg" 
```

# asp.net-mvc - {{for}} 和 {{/for} 是否来自某些自定义视图引擎？

> ID：11634786
> 
> 赞同：0
> 
> 时间：2012-07-24T15:59:37.540
> 
> 标签：asp.net-mvc

我正在扩展现有的 ASP.NET MVC 项目，并且视图中有一些奇怪之处。我基本上已经弄清楚了语法和如何使用它，但这是我以前从未见过的，我想知道它是来自特殊的视图引擎还是其他什么？

这是代码的示例部分：

```
<table>
   {{for Books}}
       <tr>
          <td>Title: {{:Title}}</td> 
       </tr>
   {{/for}}
</table> 
```

请注意 {{:Title}} 参考中的 :。

在这种情况下，模型看起来像这样：

```
public class BooksModel
{
    public List<Book> Books { get; set; }
}

public class Book
{
    public string Title { get; set; }
    public string Author { get; set; }
} 
```

（显然，这只是一个简单的示例，用于演示目的，而不是实际的生产代码）

请注意，还有其他流控制标记项，例如 {{if}} 和相应的 {{/if}} 等。

这只是我以前从未见过的基本 Razor 语法的一部分，还是自定义视图引擎的一部分？

真的，我只是想知道这是从哪里来的，这样我就可以看看是否还有什么我需要知道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:10:54.743

是的，它适用于客户端模板引擎（[可能是 JsRender](http://msdn.microsoft.com/en-us/magazine/hh882454.aspx)）。

# php - 用 HTML 替换字符串中的占位符

> ID：11634787
> 
> 赞同：0
> 
> 时间：2012-07-24T15:59:38.047
> 
> 标签：php, string

有没有办法可以将这些字符串转换为 HTML 标签，反之亦然？

例子：

```
$str = 'The^ff0000 quick brown^000000 fox jumps over the lazy dog.' 
```

输出必须是

```
The<span style="color:#ff0000;"> quick brown</span> fox jumps over the lazy dog. 
```

类似的东西，反之亦然

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:04:43.170

如果您只是在谈论一些特定的代码，您可以使用：

```
$str = "The^ff0000 quick brown^000000 fox jumps over the lazy dog.";
$str = str_replace('^ff0000', '<span style="color:#ff0000;">', $str);
$str = str_replace('^000000', '</span>', $str); 
```

或者，如果您愿意：

```
$str = "The^ff0000 quick brown^000000 fox jumps over the lazy dog.";
$str = str_replace(array('^ff0000', '^000000'), array('<span style="color:#ff0000;">', '</span>'), $str); 
```

如果您希望允许任意数量的颜色代码，您可以这样做：

```
$str = str_replace('^000000', '</span>', $str);
$str = preg_replace('@\^([a-f\d]{6})@i', '<span style="color:#$1;">', $str); 
```

对于转换回来（如果您不使用任何其他`</span>`的），它可能是：

```
$str = str_replace('</span>', '^000000', $str);
$str = preg_replace('@<span style="color:#([a-fA-F\d]{6});">@', '^$1', $str); 
```

请注意，这假设您输入的内容`<span>`与上面完全相同，而空格没有变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:02:24.360

Sure it is a simple string replace if the ^(non-000000) value always represents an opening span tag with the hex value being the color style and a ^000000 always means a closing span tag.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:03:57.107

这是一个很好的示例，您应该在其中实现装饰器模式（例如：创建一个静态方法并使用例如explode 处理字符串并附加跨度）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:24:07.590

由于您没有实际的结束标签，并且希望 ^000000 代表跨度结束标签，我将在下面扩展 Mike 的答案。

```
$string = "The^ff0000 quick brown^000000 fox jumps over the lazy dog.";

// replace '^000000' first so we don't get false positives in the regex
$new_string = str_replace('^000000', '</span>', $string);

$new_string = preg_replace('/\^([0-9a-fA-F]+)\b/i', '<span style="color: #$1;">', $new_string); 
```

# c - OpenGL加载多个纹理 - 不工作

> ID：11634788
> 
> 赞同：1
> 
> 时间：2012-07-24T15:59:46.120
> 
> 标签：c, opengl, textures

我已经使用我拥有的 gltLoadTGA 函数成功加载了单个纹理。现在我正在尝试加载多个纹理它不起作用。这是我的设置功能的纹理部分：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glGenTextures(numTextures, textures);

// Load the first texture
glBindTexture(GL_TEXTURE_2D, textures[SHAPE_TEX]);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
pBytes = gltLoadTGA("TexasFlag.tga", &iWidth, &iHeight, &iComponents, &eFormat);
glTexImage2D(GL_TEXTURE_2D, 0, iComponents, iWidth, iHeight, 0, eFormat, GL_UNSIGNED_BYTE, pBytes);
free(pBytes);

// Load the "A"
glBindTexture(GL_TEXTURE_2D, textures[A_TEX]);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
pBytesA = gltLoadTGA("letter a.tga", &iWidth, &iHeight, &iComponents, &eFormat);
glTexImage2D(GL_TEXTURE_2D, 0, iComponents, iWidth, iHeight, 0, eFormat, GL_UNSIGNED_BYTE, pBytesA);
free(pBytesA);

// Load the "B"
glBindTexture(GL_TEXTURE_2D, textures[B_TEX]);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
pBytesB = gltLoadTGA("letter b.tga", &iWidth, &iHeight, &iComponents, &eFormat);
glTexImage2D(GL_TEXTURE_2D, 0, iComponents, iWidth, iHeight, 0, eFormat, GL_UNSIGNED_BYTE, pBytesB);
free(pBytesB);

// Load the "C"
glBindTexture(GL_TEXTURE_2D, textures[C_TEX]);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
pBytesC = gltLoadTGA("letter c.tga", &iWidth, &iHeight, &iComponents, &eFormat);
glTexImage2D(GL_TEXTURE_2D, 0, iComponents, iWidth, iHeight, 0, eFormat, GL_UNSIGNED_BYTE, pBytesC);
free(pBytesC);

glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);
glEnable(GL_TEXTURE_2D); 
```

而我的绘制函数基本上是：glBindTexture(GL_TEXTURE_2D, SHAPE_TEX); // 画很多...

但根本没有纹理出现。怎么了？

**顺便说一句，这只能在 C 中，而不是 C++

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T16:05:42.937

当您调用`glTexParameteri`（[手册页](http://www.opengl.org/sdk/docs/man/)）时，它仅适用于当前纹理。绑定纹理*后*，您必须为要更改其参数的每个纹理单独调用它。未能设置缩小/放大过滤器会使它看起来像纹理加载失败。

您可能还希望`glGetError`在尝试加载纹理后调用，以查看它是否失败。

# facebook - FB Open Graph，多个 (2) 对象，每个操作

> ID：11634789
> 
> 赞同：2
> 
> 时间：2012-07-24T15:59:49.817
> 
> 标签：facebook, facebook-graph-api

所以我正在考虑发布以打开 Graph。

我有一个用户操作链接到两个对象，就像 Spotify 一样， `User` `[LISTENS]`to `[SONG OBJECT]`, `[ARTIST OBJECT]`on`[SPOTIFY]`

我有`User` `[ATE]`一个`[PACK OF CRISPS OBJECT]`在`[VENUE OBJECT]``[APP]`

我找不到任何可以做到这一点的地方，是因为 Spotify 是特殊的合作伙伴吗？

我想使用我自己的`Venue`对象，而不是 FB`Checkin/Venue`对象，因为我没有使用 FB 在应用程序中进行 Venue 查找，并且不知道如何链接它们。

有任何想法吗？

# java - Windows Azure Bing API using Java

> ID：11634800
> 
> 赞同：0
> 
> 时间：2012-07-24T16:00:49.027
> 
> 标签：java, bing, bing-api

I am trying to shift my Bing API from old one to new Windows Azure Marketplace

My code is like this:

```
String serviceUrl = "https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/
                    v1/Web?Query='"+ query+"'";

byte[] accountKeyBytes = Base64.encodeBase64(( bingAzureApiKey + ":" + 
       bingAzureApiKey).getBytes());
String accountKeyEnc = new String(accountKeyBytes);

URL celebSearchurl = new URL(serviceUrl);
URLConnection urlc = celebSearchurl.openConnection();
urlc.addRequestProperty("Authorization", "Basic "+accountKeyEnc);
urlc.setConnectTimeout(2500);
urlc.setReadTimeout(2500); 
```

But I am getting 400 error for the same. I am failing to understand what am I doing wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:54:28.520

我在 Google Code 上启动了一个项目，以便更轻松地使用新的 Azure 实现。看看它是否有帮助。

[http://code.google.com/p/azure-bing-search-java/](http://code.google.com/p/azure-bing-search-java/)

```
<%
AzureSearchNewsQuery aq = new AzureSearchNewsQuery();
aq.setAppid(AZURE_APPID);
aq.setQuery("Oklahoma Sooners");

aq.doQuery();
AzureSearchResultSet<AzureSearchNewsResult> ars = aq.getQueryResult();
for (AzureSearchNewsResult anr : ars){
        %>
        <h2><%=anr.getTitle()%> (<%=anr.getSource() %>)</h2>
        <p><%=anr.getDate() %></p>
        <p><%=anr.getDescription() %></p>
        <a href="<%=anr.getUrl() %>"><%=anr.getUrl() %></a>
<%}%> 
```

# ruby - 将 Ruby 哈希转换为数组而不调用 `Hash#to_a`

> ID：11634801
> 
> 赞同：1
> 
> 时间：2012-07-24T16:00:52.587
> 
> 标签：ruby, arrays, hash, casting

我正在使用的[Savon gem将返回单个对象或数组，在 SOAP 响应返回之前，我无法知道它会是哪个。](http://savonrb.com/)

为方便起见，我希望将`nil`响应转换为`[]`，将单个响应转换为 ，`[obj]`并将数组保留为数组。这可以通过 轻松完成[`Kernel#Array`](https://stackoverflow.com/questions/385912/ruby-object-to-a-replacement)，因此：

```
> Array nil
=> [] 
> Array 1
=> [1] 
> Array [1,2,3]
=> [1, 2, 3] 
```

但是，因为`Kernel#Array`调用`to_a`，它会失败[`Hash`覆盖`to_a`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-to_a)：

```
> Array({a: 1})
=> [[:a, 1]]
> Array([{a: 1}, {b: 2}])
=> [{:a=>1}, {:b=>2}] 
```

在上面的第 2 行我想看看`[{:a=>1}]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T22:46:03.587

如果您使用 ActiveSupport，您可以执行以下操作：

```
> Array.wrap({a: 1})
=> [{:a, 1}]
> Array.wrap([{a: 1}, {b: 2}])
=> [{:a=>1}, {:b=>2}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T23:02:23.427

```
>> [nil].compact.flatten(1)
=> []
>> [1].compact.flatten(1)
=> [1]
>> [{a: 1, b: 2}].compact.flatten(1)
=> [{:a=>1, :b=>2}] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T16:00:52.587

目前我可以`Hash#to_a`用我自己的`straight_to_a`方法绕过：

```
def straight_to_a(o)
  o.kind_of?(Array) ? o : [o].compact
end 
```

因此：

```
> straight_to_a nil
=> [] 
> straight_to_a 1
=> [1] 
> straight_to_a( {a: 1} )
=> [{:a=>1}] 
```

我希望有一个更简单的方法？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T23:06:57.117

另一张海报建议使用主动支持。如果您不想只为一种方法向项目添加额外的依赖项，这里是 Active Support 的源代码`Array.wrap`：

```
class Array
  def self.wrap(object)
    if object.nil?
      []
    elsif object.respond_to?(:to_ary)
      object.to_ary || [object]
    else
      [object]
    end
  end
end 
```

您可以轻松地将此代码添加到您自己的`utilities.rb`或`core_extensions.rb`文件中，并将其包含在您的项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T17:03:01.890

您的解决方案似乎还可以，也许您可​​以尝试基于 的东西`flatten`，例如

```
def straight_to_a *ary
  ary.flatten(1)
end 
```

# php - 从数据库返回时文本数据被截断

> ID：11634803
> 
> 赞同：0
> 
> 时间：2012-07-24T16:00:55.807
> 
> 标签：php, sql-server, string, casting, truncate

当我在 php 中使用 MSSQL 读取内容很长的字段时，出现错误

> 警告：mssql_query() [function.mssql-query]: Unicode-only collat​​ion 中的 Unicode 数据或 ntext 数据无法发送到使用 DB-Library（例如 ISQL）或 ODBC 版本 3.7 或更早版本的客户端

我在网上搜索并找到解决这个问题的方法，并发现我需要将结果转换为可读的文本。

```
SELECT CAST(Content AS TEXT) AS Content FROM myTable 
```

但是，我遇到的另一个问题是文本数据在 4096 个字符后被截断。是否有进一步阅读文本，或转换返回数据的其他选项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:33:40.200

如果您在 Management Studio 中计算字符数，请尝试：

```
SELECT LEN(Content), DATALENGTH(Content) FROM dbo.myTable; 
```

那仍然显示4096吗？我打赌不会。

我认为您不想转换为 TEXT。我假设您使用的是 NTEXT，因为您可能有 Unicode 字符。转换为 TEXT 将消除任何双字节字符并实际更改您的数据。也许你可以从你的应用程序中尝试这个：

```
SELECT CONVERT(NVARCHAR(MAX), Content) FROM dbo.myTable; 
```

并且不要依赖 Management Studio 的输出来证明数据库中的实际内容。默认情况下它会被截断，并且即使您更改默认值（不同的字符数取决于结果到文本或结果到网格），它也会被限制在一个固定的最大值。如果您想知道一列中有多少数据，请询问 SQL Server（就像我在上面所做的那样），而不是 Management Studio。

# vim - VIM 自动调整焦点窗口大小

> ID：11634804
> 
> 赞同：12
> 
> 时间：2012-07-24T16:01:00.030
> 
> 标签：vim

我正在慢慢学习 vim 及其强大的功能。我有一个关于拆分窗口（主要是水平拆分）的问题。有没有办法自动调整当前选定（聚焦）窗口的大小？比方说，例如，一个设置使焦点窗口始终占据屏幕的 70%。

每次使用`Ctrl-w`(number) `+`/并不是很有效，尤其是当我不断在几个文件之间跳转时。`-`

如果有办法将其限制为仅水平分割的窗口，那将是很酷的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T16:16:58.670

该`'winheight'`设置确定当前窗口的最小行数。一些用户将“Rolodex 模式”设置为 999。以下将其设置为 70%：

```
:let &winheight = &lines * 7 / 10 
```

对于任何更高级的东西，您可以通过 连接到`WinEnter`事件`:autocmd`，然后通过 将窗口高度设置为`:Nwincmd _`N。愚蠢的例子：

```
:autocmd WinEnter * execute winnr() * 2 . 'wincmd _' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T08:02:01.523

听起来你想要[黄金比例：使用](http://www.vim.org/scripts/script.php?script_id=3690)[黄金比例](http://en.wikipedia.org/wiki/Golden_ratio)自动调整窗口大小。

一旦我发现你可以禁用黄金比例的“自动”部分，我就开始自己使用这些设置：

```
" Don't resize automatically.
let g:golden_ratio_autocommand = 0

" Mnemonic: - is next to =, but instead of resizing equally, all windows are
" resized to focus on the current.
nmap <C-w>- <Plug>(golden_ratio_resize)
" Fill screen with current window.
nnoremap <C-w>+ <C-w><Bar><C-w>_ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T16:30:53.563

我将这些映射用于分屏：

```
nnoremap <C-j>  <C-w>j
nnoremap <C-k>  <C-w>k
nnoremap <C-h>  <C-w>h
nnoremap <C-l>  <C-w>l
nnoremap c<C-j> :bel sp new<cr>
nnoremap c<C-k> :abo sp new<cr>
nnoremap c<C-h> :lefta vsp new<cr>
nnoremap c<C-l> :rightb vsp new<cr>
nnoremap g<C-j> <C-w>j<C-w>_
nnoremap g<C-k> <C-w>k<C-w>_
nnoremap g<C-h> <C-w>h<C-w>_
nnoremap g<C-l> <C-w>l<C-w>_
nnoremap d<C-j> <C-w>j<C-w>c
nnoremap d<C-k> <C-w>k<C-w>c
nnoremap d<C-h> <C-w>h<C-w>c
nnoremap d<C-l> <C-w>l<C-w>c 
```

这样，如果您想在拆分之间跳转，您可以使用`C-hjkl`. 如果您想“创建”一个拆分，您可以使用`c``C-hjkl`. 如果要最大化拆分，可以使用`g``C-hjkl`. 如果你想删除一个拆分，你可以使用`d``C-hjkl`.

如果你想要特别 70% 而不是最大化你可以使用

```
nnoremap g<C-j> <C-w>j:let &winheight = &lines * 7 / 10<cr> 
```

例如。

# tfs - MSBuild 消息输出两次

> ID：11634806
> 
> 赞同：0
> 
> 时间：2012-07-24T16:01:01.433
> 
> 标签：tfs, msbuild, tfsbuild

我有以下目标：

```
<Target Name="SetBinariesLocationForTeamBuild">
    <!--We add the following location paths because TFS Team Build first copies to \sources and \binaries folders
    rather than simply having the binaries in a \bin folder of the source folder
    at this point the build will be at: C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment
    so we need to go up 4 levels before going back down to binaries-->
    <Message Text="Value of TeamBuild=$(TeamBuild)"/>

    <Message Text="MSBuildProjectName: $(MSBuildProjectName)"/>
    <Message Text="MSBuildStartupDirectory: $(MSBuildStartupDirectory)"/>
    <Message Text="MSBuildProjectDirectory: $(MSBuildProjectDirectory)"/>
    <Message Text="MSBuildProjectFullPath: $(MSBuildProjectFullPath)"/>
    <Message Text="MSBuildThisFileDirectory: $(MSBuildThisFileDirectory)"/>

    <ItemGroup>
      <Schemas Condition ="'$(TeamBuild)' == 'True'" Include="x.Int.MIS.Schemas.dll">
        <LocationPath>..\..\..\..\..\..\..\..\binaries\</LocationPath>
      </Schemas>
    </ItemGroup>

    <ItemGroup>
      <Pipelines Condition ="'$(TeamBuild)' == 'True'" Include="x.Int.Pipelines.dll">
        <LocationPath>..\..\..\..\..\..\..\..\binaries\</LocationPath>
      </Pipelines>
    </ItemGroup>

    <ItemGroup>
      <PipelineComponents Condition ="'$(TeamBuild)' == 'True'" Include="x.Int.PipelineComponents.dll">
        <LocationPath>..\..\..\..\..\..\..\..\binaries\</LocationPath>
      </PipelineComponents>
    </ItemGroup>

    <ItemGroup>
      <Orchestrations Condition ="'$(TeamBuild)' == 'True'" Include="x.Int.Orchestrations.dll">
        <LocationPath>..\..\..\..\..\..\..\..\binaries\</LocationPath>
      </Orchestrations>
    </ItemGroup>

    <ItemGroup>
      <Transforms Condition ="'$(TeamBuild)' == 'True'" Include="x.Int.Transforms.dll">
        <LocationPath>..\..\..\..\..\..\..\..\binaries\</LocationPath>
      </Transforms>
    </ItemGroup>

    <Message Text="What is Schemas location path: %(Schemas.LocationPath)"/>
    <Message Text="What is Pipelines location path: %(Pipelines.LocationPath)"/>

  </Target> 
```

我从命令行运行项目，传入 /p:TeamBuild=True /t:SetBinariesForTeamBuild。输出让我很困惑......

Microsoft (R) Build Engine 版本 4.0.30319.1 [Microsoft .NET Framework，版本 4.0.30319.269] 版权所有 (C) Microsoft Corporation 2007。保留所有权利。

```
Build started 24/07/2012 16:59:08.
Project "C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\x.Int.MIS.Deployment.btdfproj" on node 1 (SetBinariesLocationForTeamBuild target(s)).
SetBinariesLocationForTeamBuild:
  Value of TeamBuild=True
  MSBuildProjectName: x.Int.MIS.Deployment
  MSBuildStartupDirectory: C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment
  MSBuildProjectDirectory: C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment
  MSBuildProjectFullPath: C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\x.Int.MIS.Deployment.btdfproj
  MSBuildThisFileDirectory: C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\
  What is Schemas location path: ..\x.Int.MIS.Schemas\bin\Debug
  What is Schemas location path: ..\..\..\..\..\..\..\..\binaries\
  What is Pipelines location path: ..\x.Int.MIS.Pipelines\bin\Debug
  What is Pipelines location path: ..\..\..\..\..\..\..\..\binaries\
Done Building Project "C:\Builds\3\x.Int.MIS\SupportBTDF\Sources\x.Int.MIS\Dev\V1.0\Src\Solutions\MIS\x.Int.MIS.Deployment\x.Int.MIS.Deployment.btdfproj" (SetBinariesLocationForTeamBuild target(s)).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.17 
```

我希望位置路径是带有 8 ..\ 的位置路径，但它不是 - 知道为什么以及为什么它会被打印两次！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:17:05.533

@(Schemas) 和 @(Pipelines) 项目数组都在添加另一个项目元组，否则它们无法打印出来。必须有另一个正在运行的目标会发生这种情况。如果您使用确切的命令行在项目上运行 msbuild，则附加目标必须是项目的 InitialTargets 中的一个条目，或者是连接到上述目标的目标，其中包含对该目标的 BeforeTargets 或 AfterTargets 引用.

# python - 404 when enabling admin with Django

> ID：11634807
> 
> 赞同：3
> 
> 时间：2012-07-24T16:01:02.297
> 
> 标签：python, django, django-admin

I had correctly configured a Django app and had it running smoothly. However, when I went to enable the administration panel, I encountered a 404 error upon uncommenting this line:

`url(r'^admin/', include(admin.site.urls))`

Upon trying to access my site, I received this:

```
Using the URLconf defined in cms.urls, Django tried these URL patterns, in this order:

    1\. ^admin/

The current URL, , didn't match any of these. 
```

I can't figure out how to get around this error. Does anyone with some Django experience have a solution? Thanks!

EDIT: Here is the entire `urls.py` file:

```
from django.conf.urls.defaults import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'cms.views.home', name='home'),
    # url(r'^cms/', include('cms.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:33:52.300

你试过`http://yourdomain:port/admin`吗，如果您使用默认网址，我会尝试 `http://127.0.0.1:8000/admin`

# javascript - Twitter bootstrap - 点击时关注模式内的文本区域

> ID：11634809
> 
> 赞同：70
> 
> 时间：2012-07-24T16:01:10.277
> 
> 标签：javascript, jquery, twitter-bootstrap, focus, textarea

刚开始玩引导程序，这太棒了。

我试图弄清楚这一点。我在模态窗口中有一个用于反馈的文本区域。它工作得很好。但是当您单击按钮激活模式时，我希望焦点在文本区域上。而且我似乎无法让它工作。

这是一个小提琴：http: [//jsfiddle.net/denislexic/5JN9A/4/](http://jsfiddle.net/denislexic/5JN9A/4/)

这是代码：

```
<a class="btn testBtn" data-toggle="modal" href="#myModal" >Launch Modal</a>

<div class="modal hide" id="myModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
      <textarea id="textareaID"></textarea>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div>​ 
```

这是JS

```
$('.testBtn').on('click',function(){
    $('#textareaID').focus();
});​ 
```

**恢复** 当我单击“启动模式”时，我希望显示模式并将焦点放在 textarea 上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-07-24T16:07:27.303

它不起作用，因为当您单击按钮时，模式尚未加载。您需要将焦点连接到一个事件，然后转到[引导程序的模态页面](http://getbootstrap.com/2.3.2/javascript.html#modals)，我们会看到该事件`shown`，即`is fired when the modal has been made visible to the user (will wait for css transitions to complete)`. 这正是我们想要的。

试试这个：

```
$('#myModal').on('shown', function () {
    $('#textareaID').focus();
})
​ 
```

这是你的小提琴更新：http: [//jsfiddle.net/5JN9A/5/](http://jsfiddle.net/5JN9A/5/)

* * *

**更新：**

正如[@MrDBA 所](https://stackoverflow.com/users/488293/mrdba)指出的，在 Bootstrap 3 中，事件名称[更改](http://getbootstrap.com/javascript/#modals-usage)为`shown.bs.modal`. 因此，对于 Bootstrap 3 使用：

```
$('#myModal').on('shown.bs.modal', function () {
    $('#textareaID').focus();
}) 
```

Bootstrap 3 的新小提琴：http: [//jsfiddle.net/WV5e7/](http://jsfiddle.net/WV5e7/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-10T21:34:47.300

我想要一个声明性版本，所以我选择了以下内容：

```
$(document).ready(function() {
    $(".modal").on('shown.bs.modal', function () {
        $("[data-modalfocus]", this).focus();
    });
}); 
```

然后，您可以简单地将 data-modalfocus 属性添加到您的字段，如下所示：

```
<input type="text" data-modalfocus /> 
```

当模态弹出时，您的字段将获得焦点。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-31T13:03:07.293

引导程序3

```
$(window.document).on('shown.bs.modal', '.modal', function() {
    window.setTimeout(function() {
        $('[autofocus]', this).focus();
    }.bind(this), 100);
}); 
```

引导程序 2

```
$(window.document).on('shown', '.modal', function() {
    window.setTimeout(function() {
        $('[autofocus]', this).focus();
    }.bind(this), 100);
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-26T22:42:00.457

您可以使用`autofocus`html 元素来设置自动对焦。

```
<textarea id="textareaID" autofocus="" ></textarea> 
```

[在这里提琴（点击）](http://jsfiddle.net/5F4ee/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-23T18:09:35.977

## **如果您的模态具有 'fade' 属性：**

这将起作用，但您可能必须调整超时的持续时间，并且显然需要调整 ID：

```
$("#ID-of-modal").on('show', function(event){
                window.setTimeout(function(){
                  $(event.currentTarget).find('input#ID-of-input').first().focus()
                }, 0175);
              }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-26T16:01:40.973

我在 chrome 中遇到了重大问题......我希望这对某人有所帮助。

```
//When user clicks link
$('#login-modal-link').on('click',function() {
        setTimeout(function(){
                //If modal has class
            if ($('#login-modal').hasClass('modal')) {
                //Whatever input you want to focus in
                $('#user_login_modal').focus();
            }
        },100);

    }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-27T16:06:43.193

如您需要从模态中删除的评论之一中所述`fade`。所以这对我有用：

```
 <div id="myModal" class="modal">
    ...
    <textarea class="form-control" rows="5" id="note"></textarea>
  </div>

  <script>
    $('#myModal').on('shown.bs.modal', function () {
        $('#note').focus();
    })
  </script> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-19T21:46:22.980

我想要一些更通用的东西

```
 $(window.document).on('shown.bs.modal', '.modal', function () {
        var timer = window.setTimeout(function () {
            $('.firstInput', this).focus();
            typeof timer !== 'undefined' && window.clearTimeout(timer);
        }.bind(this), 100);
    }); 
```

有了这个，我给了我想要的 CSS 类 firstInput 的任何控制。设置焦点有一点延迟，这使它具有一定的天赋。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-26T10:54:08.023

我不知道为什么，但选择的解决方案对我不起作用。我使用以下代码片段：

```
$('#annul-modal').on('show', function() {
    setTimeout(function() {$('textarea:first', '#annul-form').focus();}, 400);
}); 
```

我知道它不是那么漂亮，但至少它有效.. Bootstrap v2.3.0

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-28T22:52:32.850

如果您使用 bootstrap v3 并且同时使用模式对话框和 wysihtml5 文本编辑器，则以下工作（假设 #basic 是模式表单的 ID）：

```
 $('#basic').on('shown.bs.modal', function () {
    editor.composer.element.focus()
}) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-23T13:57:16.583

将事件直接附加到模态屏幕对我不起作用。我正在使用此代码：

```
$('body').on('shown.bs.modal', '.modal', function () {
  $('[id$=myField]').focus();
}) 
```

使用此代码，我只需将 myField 更改为我想要获得焦点的控件的 id，它还允许我为多个模式屏幕定义焦点，我有类似的内容：

```
 $('body').on('shown.bs.modal', '.modal', function () {
        $('[id$=YesCancel]').focus();
        $('[id$=YesInverted]').focus();
        $('[id$=cancelAddCustomer]').focus();
        $('[id$=closeHistoryModal]').focus();
      }); 
```

来源[http://xcellerant.net/2014/08/06/set-focus-on-a-field-when-showing-a-bootstrap-3-modal/](http://xcellerant.net/2014/08/06/set-focus-on-a-field-when-showing-a-bootstrap-3-modal/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-12T13:30:58.293

发现在做：

```
$(document).on('shown.bs.modal', function () {
  $(this).find('.form-control:visible:first').focus();
}); 
```

工作得很好，因为它只是找到第一个表单控件而不是需要特定的 id 等。这正是大多数时间所需要的。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2013-10-11T12:05:46.980

```
<a href="" id="btnmoverCategoriaRaiz">Mover para a raiz...</a> 
      <script>
         $(function(){
            $("#btnmoverCategoriaRaiz").click(function(){
                $("#novoPlaylist").modal();
                return false;
            });
         });

       </script>    
 <div id="novoPlaylist" class= "modal  hide">
          <div class="modal-header">
            <h3>Novo Playlist</h3>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
              <?echo $form->input("Playlist.nome", array("label"=>"Nome:")) ?>
            </form>
          </div>
              <div class="modal-footer">
                 <a href="javascript:;" class="btn" data-dismiss="modal">Cancelar</a>
                 <a href="javascript:;" class="btn btn-primary" id="SalvarNomePlaylist" data-loading-text="Aplicando..."> Savar</a>
              </div>
      </div> 
```

# java - String hashCode behavior

> ID：11634810
> 
> 赞同：-1
> 
> 时间：2012-07-24T16:01:15.440
> 
> 标签：java, string, hashcode

```
String str="abc";
for (int i = 0; i < 100; i++)
{
  System.out.println(str.hashCode());
} 
```

1) String is an immutable class and its hashCode is cached in its private variable hash.

2) Since string str is a literal this string object created is added to stringpool in permgen space. So when ever referencing str it should give me the same object.

Debugging through the process in hashCode method of string, based on above two points when i call str.hashCode() it should enter into calculating the hash only once and the next 99 times it should return me the "cached hash private variable of the string object". It doesnt go according to the point 1\. Can some one please let me know about this behavior?

Debugging through this you will notice that hashCode is calculated 100 times and I am printing hashCode value to see if the objects are have same hashCode.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:13:10.840

hashcode只计算一次，请看`java.lang.String.hashCode()`函数体：

```
public int hashCode() {
    int h = hash;
    if (h == 0) { 
        int off = offset;
        char val[] = value;
        int len = count;

            for (int i = 0; i < len; i++) {
                h = 31*h + val[off++];
            }
            hash = h;
        }
        return h;
    } 
```

第二次，你调用`str.hashCode()`的变量`h`不是**0**`if`并且语句的主体没有被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:11:27.210

java.lang.String 类对象*确实*缓存哈希值。它在第一次调用 hashcode 时分配实例变量 hash，见下文：

```
public int hashCode() {
        int h = hash;
        if (h == 0 && count > 0) {
            int off = offset;
            char val[] = value;
            int len = count;

            for (int i = 0; i < len; i++) {
                h = 31*h + val[off++];
            }
            hash = h;
        }
        return h;
    } 
```

任何对哈希码的进一步请求只是通过哈希返回 h，跳过计算。它就在我可以看到的代码中！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:04:47.023

我的错。

发生的事情是因为当您开始调试时我在 hashCode 中有断点，所以我的 forloop 没有调用 hashCode 方法，但某些系统初始静态方法正在调用 String hashCode 方法。

管理员请关闭问题

# javascript - 如何从以某个单词结尾的字符串中获取 id（正则表达式）

> ID：11634814
> 
> 赞同：2
> 
> 时间：2012-07-24T16:01:20.393
> 
> 标签：javascript, html, regex

我想`id`使用正则表达式在字符串中以“_theTable”结尾。但我不明白。我正在使用此代码：-

```
 var str="<table id='dnn_ctl_123_theTable'><tr><td></td></tr></table>";
 var rexexp = new RegExp("\b\w*_theTable\b"); 
 var matchedwrd=rexexp.exec(str); 
```

请指导如何做到这一点？
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:06:36.770

当您使用 a 时，`new Regexp`您必须像这样转义反斜杠：

```
var rexexp = new RegExp("\\b\\w*_theTable\\b"); 
```

或者您可以使用正则表达式文字：

```
var rexexp = /\b\w*_theTable\b/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:06:44.230

```
var str="<table id='dnn_ctl_123_theTable'><tr><td></td></tr></table>"
var rexexp = /id='(.+?)_theTable'/;
var matchedwrd=rexexp.exec(str);
alert(matchedwrd[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T16:14:54.053

```
var str="<table id='dnn_ctl_123_theTable'><tr id='another'><td></td></tr></table>";
var regEx = /id='(.*?_theTable)'/;
var id = str.match(regEx)[1];
document.write(id); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:05:34.737

我可能会为此使用该模式`id='([^']*)_theTable'`。then`$1`应该对应 id 之前的部分`_theTable`。如果要包含该`_theTable`位，只需将右括号移到其后即可。

# cordova - Taking a photo with PhoneGap programmatically

> ID：11634818
> 
> 赞同：1
> 
> 时间：2012-07-24T16:01:34.933
> 
> 标签：cordova, camera

I am looking for a way to take a photo using phonegap programmatically. For example the app can initiate on its own the camera, snap photo and then return to the application with the photo for upload to a server.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-14T16:18:59.020

抱歉，这有点晚了，但 Cordova 现在有了自己的插件。[在这里](https://github.com/apache/cordova-plugin-camera)查看文档。根据您使用的 PhoneGap 版本，它可能已经有插件，也可能没有。

在您的终端中，只需执行

```
cordova plugin add cordova-plugin-camera 
```

在您的 javascript 代码中，您可以执行以下操作：

```
navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
    destinationType: Camera.DestinationType.DATA_URL
});

function onSuccess(imageData) {
    var image = document.createElement('img');
    image.src = "data:image/jpeg;base64," + imageData;
}

function onFail(message) {
    alert('Failed because: ' + message);
} 
```

这将提示您的设备拍照，然后如果成功，它将返回图像数据 URL 以解析并插入到图像元素中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T18:11:59.183

您需要编写一个插件才能做到这一点。

# javascript - JavaScript solution for anagram of a palindrome

> ID：11634822
> 
> 赞同：-4
> 
> 时间：2012-07-24T16:01:51.853
> 
> 标签：javascript

I was asked to implement the same question as this in an interview recently:

[https://stackoverflow.com/questions/8447222/anagram-of-a-palindrome](https://stackoverflow.com/questions/8447222/anagram-of-a-palindrome)

I could not provide an answer but am interested to know the JavaScript solution.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:28:49.247

那应该可以工作..但是我只用很少的输入对其进行了测试:)至少它背后的理论应该没问题..

```
String.prototype.count=function(char) { 
    return this.split(char).length-1;
}

function isAnagramOfPalyndrom(string){
    string.replace(" ", "");  
    var even = string.length % 2 == 0;
    var flag = false;

    for(var i = 0; i < string.length; i++){

    if(string.count(string.charAt(i)) % 2 != 0){
       if(even) return false;
       else{
        if(flag) return false;
        flag = true;
       }
    }

}
return true;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T16:03:58.630

从理论上讲，如果除 1 之外的每个字母都有偶数，则它是回文的字谜。

参见：“皮划艇”k:2, a:2, y:1 参见：“SAAS” s:2, a:2

# c# - 从随机帖子中保护 ASP.NET MVC 控制器方法？

> ID：11634825
> 
> 赞同：0
> 
> 时间：2012-07-24T16:02:21.407
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个用于 ajax 请求的控制器方法，我很好奇如何阻止随机人员向该 url 提交数据。我想确保它来自那个特定的形式。

```
[HttpPost]
public JsonResult DemographicsSave(FormCollection collection)
{   
    return Json("Patient Saved", JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:07:27.503

这是我的朋友为此目的创建的 NuGet 包，默认情况下会弥补一些安全“漏洞”。它应该可以为您节省一些实施时间！

[http://nuget.org/packages/ValidationAndAuthenticationByDefault.MVC3](http://nuget.org/packages/ValidationAndAuthenticationByDefault.MVC3)

或者，您可以添加到您的控制器：

```
[HttpPost]
[ValidateAntiForgeryToken] 
```

接下来是您认为的以下内容：

```
@Html.AntiForgeryToken() 
```

# .net - Creating an Action for unknown number and type of generic parameters

> ID：11634828
> 
> 赞同：0
> 
> 时间：2012-07-24T16:02:29.390
> 
> 标签：.net, vb.net, generics, .net-3.5, expression-trees

**TL;DR**

I'm looking for a way to either:

*   Create an `Action` that takes a `ParamArray` of `Object`
*   Use `Expression` to create an Action that matches the given number/type of generic parameters

**Details**

I'm writing a function that turns asynchronous calls into blocking calls. My function takes a task to run, a time-out value, and a collection of `States` (kind of like events) that might occur as a result. We have `States` defined for multiple numbers of generic parameters IState(of T), IState(of T1, T2), etc...

```
Function MakeBlocking(task As Action,
                      resultingStates As IEnumberable(of IState),
                      Optional ByVal millisecondsTimeout As Integer = -1) 
                      As Boolean

  Dim are As New AutoResetEvent(False)
  Dim onFinish As New Action(Sub() are.Set())

  For Each state In resultingStates
    state.Subscribe(onFinish)
  Next

  task.Invoke()

  Dim result = are.WaitOne(millisecondsTimeout)

  For Each state In resultingStates
    state.Unsubscribe(onFinish)
  Next

  Return result
End Function 
```

I'd like to be able to accept a collection of IState that have any number and type of parameters. Since `IState(Of T)` inherits from `IState`, and `IState(Of T1, T2)` inherits from `IState(Of T)`, I think `IEnumerable(Of IState)` will work. The problem is the `Action` I'm subscribing them to doesn't have matching parameters.

```
Public Interface IState(Of T1, T2)
  Inherits IState(Of T1)

  Shadows Function Subscribe(ByVal action As Action(Of T1, T2)) As IStateSubscription
  Shadows Function Unsubscribe(ByVal action As Action(Of T1, T2)) As Boolean

End Interface 
```

As you can see, if I have resulting states of `IState(Of String, Boolean)`, `IState(Of Integer)` and `IState(Of String)`, I'd need a separate `Action` for each of those. I'd really like to be able to do something like this:

```
Dim onFinish As New Action(Sub(ParamArray stuff As Object())(Sub() are.Set()) 
```

But I can't seem to find the validate syntax to do that (if it is even possible). It seems like the only other option is using Expression.Lambda to dynamically create methods I can subscribe to, but I haven't had much experience with expression trees before. Is there a way I can create an `Expression` from my `OnFinish` action?

I should note that the library that deals with States is outside of my control. The underlying code checks that the the parameters match in number and assignability (i.e IsAssignableFrom), so even though I'm passing everything in as `IState`, it's finding out what the underlying type *really* is, and then telling me I can't subscribe my `Action` to that `State`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:32:30.887

这就是我想出的...

**与代表**

可以`Delegate`在 VB.Net 中创建一个`ParamArray`使用[解决方法的](https://stackoverflow.com/q/2640145/945456). 不知道这是否会奏效。也可以用于`Expression`动态创建委托：

```
Dim are As New AutoResetEvent(False)

Dim setMethod = are.GetType.GetMethod("Set")
Dim callSet = Expression.Call(Expression.Constant(are), setMethod)

For Each state In resultingStates
  Dim args = state.GetType.GetGenericArguments()
  Dim params = Enumerable.Range(1, args.Count).Select(
                 Function(x) Expression.Parameter(args(x - 1), "var" & x))
  Dim onFinish = Expression.Lambda(callSet, params.ToArray).Compile()

  state.Subscribe(onFinish) 'Doesn't compile since OnFinish isn't an Action
Next 
```

但是，这些选项都不起作用，因为我需要一个`Action`. 看起来我可以[从 a中](https://stackoverflow.com/a/3021595/945456)[创建`Action``Delegate`](https://stackoverflow.com/a/3021595/945456)一个，但我需要知道的泛型类型，`Action`所以我可以，在我的情况下，直到运行时才可用......（我相信你不能在不知道静态类型的情况下进行转换）。

**我的解决方案**

我最终将问题分开了一点。以前，我会这样称呼它：

```
Public Function GetThing() As Boolean 'Returns success vs timeout
  Return MakeBlocking(Sub() SendAsyncThingRequest(), 
                      {ResultingState1, ResultingState2}, 
                      timeOutVal)
End Sub 
```

相反，我将其分解，以便调用者承担更多责任：

```
Public Function GetThing() As Boolean
  Dim are As New AutoResetEvent(False)

  WaitFor(ResultingState1, are)
  WaitFor(ResultingState2, are)

  SendAsyncThingRequest()

  Return are.WaitOne(timeoutVal)
End Function 
```

我有通用方法“等待”一个结果状态，并设置`AutoResetEvent`它发生的时间：

```
Protected Sub WaitFor(Of T)(ByVal waitUpon As IState(Of T), 
                            ByVal are As AutoResetEvent)

  Dim action As New Action(Of T)(
  Sub(x)
    are.Set()
    waitUpon.Unsubscribe(action)
  End Sub)

  waitUpon.Subscribe(action)
End Sub 
```

对于我的特定场景，这最终成为最简单/最干净的解决方案。

# php - zeromq - 总是丢失第一条消息

> ID：11634830
> 
> 赞同：2
> 
> 时间：2012-07-24T16:02:34.010
> 
> 标签：php, zeromq

我一直在尝试在本地计算机和远程服务器之间使用 zeromq 建立一个简单的“管道”。我在本地计算机上测试了脚本，它运行良好，但是当我尝试使用远程计算机作为终端（带有 SOCKET_PULL 的计算机）时，我开始遇到问题。任何进程发送的第一条消息总是丢失。

代码很简单，

推送（sender.php）：

```
<?php
//Use the specified port or 5555 for sending jobs
$port = $_SERVER['argc'] > 1 ? $_SERVER['argv'][1] : '5555';
$jobN = $_SERVER['argc'] > 2 ? $_SERVER['argv'][2] : '';

$context = new ZMQContext();

//  Socket to send messages on
$sender = new ZMQSocket($context, ZMQ::SOCKET_PUSH);

//If I want to connect to the server I use this line
$sender->connect("tcp://my-server-address.com:$port");

//If I want to connect to localhost I use this line
//$sender->connect("tcp://localhost:$port");

$sender->send('job-1' . ($jobN ? " $jobN" : ''));
$sender->send('job-2' . ($jobN ? " $jobN" : ''));
$sender->send('job-3' . ($jobN ? " $jobN" : ''));
$sender->send('job-4' . ($jobN ? " $jobN" : ''));
$sender->send('job-5' . ($jobN ? " $jobN" : ''));
$sender->send('job-6' . ($jobN ? " $jobN" : ''));
$sender->send('job-7' . ($jobN ? " $jobN" : ''));
$sender->send('job-8' . ($jobN ? " $jobN" : ''));
$sender->send('job-9' . ($jobN ? " $jobN" : ''));
$sender->send('job-10' . ($jobN ? " $jobN" : ''));
echo 'done'; 
```

接收器（worker.php）

```
<?php
//Use the specified port or 5556 for getting finished jobs
$port = $_SERVER['argc'] > 1 ? $_SERVER['argv'][1] : '5555';

//  Prepare our context and socket
$context = new ZMQContext();
$receiver = new ZMQSocket($context, ZMQ::SOCKET_PULL);
$receiver->bind("tcp://*:$port");

$count = 1;
while(true) {
    $string = $receiver->recv();
    echo "Received $string $count\n";
    $count += 1;
} 
```

如果我在本地运行代码（一个终端中的“php worker.php”和另一个终端中的“php sender.php”）。

我明白了

```
Received job-1 1
Received job-2 2
Received job-3 3
Received job-4 4
Received job-5 5
Received job-6 6
Received job-7 7
Received job-8 8
Received job-9 9
Received job-10 10 
```

但是如果我使用遥控器（本地 mu 中的发送者和遥控器中的接收者），我会得到

```
Received job-2 1
Received job-3 2
Received job-4 3
Received job-5 4
Received job-6 5
Received job-7 6
Received job-8 7
Received job-9 8
Received job-10 9 
```

难道我做错了什么？？

* * *

注意：我不能锁定发送者（并且 SOCKET_REQ 锁定执行等待回复）。无论如何，0mq 应该在没有锁的情况下工作。注意：我的本地是一台 mac 计算机，服务器是一个带有 ubuntu 的亚马逊实例（我认为这不会影响，但我正在写它以防万一）。

* * *

编辑：澄清一下，我不想通过互联网发送数据，我只是想在遇到这个问题时以高延迟测试 zeromq。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T14:41:02.847

问题是 Pieter 的文档所称的“慢加入者”。这是错误的名称，因为它暗示订阅者/听众是问题的根源。不是这种情况。

问题很可能出在出版商方面。您在发布者连接之前发送消息。

怎么会这样？zmq_connect 或 zmq_bind 返回，因此您必须做好准备。 **不**，你不是。

显然，当连接/绑定返回时，连接/发布设置未完成。函数返回*后*一段时间，连接完成。

那么你如何解决这个问题呢？简单的方法是等待。这样做的问题是您不知道要等待多长时间，而实际时间取决于特定的网络情况和所涉及的硬件。

一种更好但更复杂的方法是为您的发布者地址设置一个本地订阅者，并重复发布一条管理消息，一旦收到该消息，您就会知道您已准备就绪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T16:59:41.897

解决了这个问题，我在本地和服务器上安装了不同版本的 zeromq。如果您遇到相同的错误，请检查版本。

注意：Zeromq 确实适用于互联网。唯一的事情（至少在 php 中）是您需要确保在关闭进程之前完全发送了消息。在我的测试中，我在不同的计算机之间发送了数次 75000 条随机大小（平均大小：1MB）的消息，并且我得到了预期的所有消息。

# php - How can i do this right? PHP5 Form validation

> ID：11634839
> 
> 赞同：0
> 
> 时间：2012-07-24T16:02:54.307
> 
> 标签：php

I'm trying to set my first steps into the OO PHP world. What I'm trying to do is make a class that validates my form input. I know what input fields I need in my entire website and want to make a switch, to do the right thing based on the input field. Lets say we have the input field named 'email', and we have a form for that etc...

First, what I want to do is try to read the $_post names with array_key() function, based on that I have a switch.

Here is my code:

```
public function __construct ( $var ) {
     $this->arraykeys = array_keys($var);
     $this->error = false;
     $this->message = array();   
}        

public function check() {   

      foreach ($this->arraykeys as $i => $value)
      {

      switch ($value)
      {
        case 'email' :

        $checkmail = new checkEmail($_POST);
        $checkmail->chkEmail($_POST['email']);
        if ($checkmail->chkEmail($_POST['email']) == false)
        {
            array_push($this->message, 'Cannot validate emailadres');
        }            
        break; 

      }

      }

     // print_r($this->field);
} 
```

The check works, but somehow the message array stays empty after an error! I tried everything, but I just can't get it on to the screen!

Please help!

Thanks!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:30:44.597

在使用 OOP 之前，您实际上需要一些更基本的对象，使您能够让您的表单处理生效，例如 PHP 超全局变量中的表单字段的面向对象验证以及错误消息：

只是示例：

```
// defining the interfaces and classes of the form values and validation, form field 
// and fields
Interface FormValue
{
    public function getValue();
}

interface FormValueValidator
{
    /**
     * @param FormValue $value
     * @return bool
     */
    public function validate(FormValue $value);
}

class NamedFormValue implements FormValue
{
    private $name;
    private $value;

    public function __construct(array $data, $name, $default = null)
    {
        $this->name = $name;
        $this->value = isset($data[$name]) ? $data[$name] : $default;
    }

    public function getValue()
    {
        return $this->value;
    }

    public function getName()
    {
        return $this->name;
    }
}

class EmailValidator implements FormValueValidator
{
    public function validate(FormValue $value)
    {
        $result = filter_var((string) $value->getValue(), FILTER_VALIDATE_EMAIL);
        return is_string($result);
    }
}

class FormFieldFactory
{
    /**
     * @param $name
     * @param array $field
     * @return FormField
     */
    public function create($name, array $field)
    {
        $validatorClass = sprintf('%sValidator', @$field['validator']);
        $validator = new $validatorClass;

        $formField = new FormField($name);
        $formField->setValidator($validator);
        $formField->setErrorMessage($field['error_msg']);
        return $formField;
    }
}

class FormField
{
    private $name;
    /**
     * @var FormValueValidator
     */
    private $validator;
    private $errorMessage;
    /**
     * @var FormValue
     */
    private $value;

    public function __construct($name)
    {
        $this->name = $name;
    }

    public function setValidator(FormValueValidator $validator)
    {
        $this->validator = $validator;
    }

    public function isValid()
    {
        return $this->validator->validate($this->value);
    }

    public function setErrorMessage($errorMessage)
    {
        $this->errorMessage = $errorMessage;
    }

    public function getErrorMessage() {
        return $this->errorMessage;
    }

    public function setValue(FormValue $value)
    {
        $this->value = $value;
    }

    /**
     * @return FormValue
     */
    public function getValue()
    {
        return $this->value;
    }
}

class FormFields extends IteratorIterator
{
    private $fieldFactory;
    private $invalidFields;

    public function __construct(array $definitions, $fieldFactory)
    {
        parent::__construct(new ArrayIterator($definitions));
        $this->fieldFactory = $fieldFactory;
    }

    public function current()
    {
        $name = $this->getInnerIterator()->key();
        $definition = $this->getInnerIterator()->current();
        return $this->fieldFactory->create($name, $definition);
    }

    public function valid()
    {
        return $this->getInnerIterator()->valid();
    }

    /**
     * @param array $data
     * @return bool true on success, false on validation error
     */
    public function validateOn(array $data)
    {
        $this->invalidFields = array();

        foreach($this as $name => $field) {
            /* @var $field FormField */
            $value = new NamedFormValue($data, $name);
            $field->setValue($value);
            $valid = $field->isValid();
            $valid || ($this->invalidFields[$name] = $field);
        }

        return 0 === count($this->invalidFields);
    }

    /**
     * @return FormField[]
     */
    public function getInvalidFields()
    {
        return $this->invalidFields;
    }
}

// defining the form in array notation:
$form = array(
    'fields' => array(
        'email' => array(
            'validator' => 'Email',
            'error_msg' => 'Cannot validate emailadress',
        ),
    ),
);

// processing the form validation
$messages = array();
$fields = new FormFields($form['fields'], new FormFieldFactory());
$fields->validateOn($_POST)
foreach ($fields->getInvalidFields() as $field) {
    $messages[] = $field->getErrorMessage();
}
var_dump($messages); 
```

示例输出：

```
array(1) {
  [0]=>
  string(27) "Cannot validate emailadress"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:05:10.127

试试这个：

```
public function check()
{   

      foreach ($this->arraykeys as $i => $value)
      {

      switch ($value)
      {
        case 'email' :

        $checkmail = new checkEmail($_POST);
        $checkmail->chkEmail($_POST['email']);
        if ($checkmail->chkEmail($_POST['email']) == false)
        {
            $this->message[] = 'Cannot validate emailadres';
        }            
        break; 

      }

      }

     print_r($this->message);
} 
```

还要确保您的属性设置为公开。

你确定`$checkmail->chkEmail()`是假的并且运作良好吗？

# matlab - 在 GUIDE 中编辑一项功能会更改所有功能？

> ID：11634841
> 
> 赞同：0
> 
> 时间：2012-07-24T16:03:07.503
> 
> 标签：matlab, image-processing, matlab-guide

我第一次使用 Matlab 的 GUIDE，我试图编辑两个按钮功能之一（都打开图像），但编辑一个会改变所有这些功能。这是一段代码：

```
% --- Executes on button press in Floating.
function Floating_Callback(hObject, eventdata, handles)

clc;
axes(handles.axes1);
[Float, PathName, FilterIndex] = uigetfile('*.bmp');
if(Float ~= 0) 
    Floating = fullfile(PathName, Float);
    FloatArray = imread(Floating);
    imshow(FloatArray);
    axis on; 
end 

% Update handles structure
guidata(hObject, handles);

% hObject    handle to Floating (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% --- Executes on button press in Reference.
function Reference_Callback(hObject, eventdata, handles)

clc;
axes(handles.axes2);
[Ref, PathName, FilterIndex] = uigetfile('*.bmp');
if(Ref ~= 0) 
    Reference = fullfile(PathName, Ref);
    ReferenceArray = imread(Reference);
    image(ReferenceArray); 
end 

% Update handles structure
guidata(hObject, handles); 
```

例如，

```
image(ReferenceArray) 
```

将在 RBG 中打开图像，但是

```
imshow(FloatArray) 
```

将以灰度打开（我也不明白为什么会这样）。但我主要担心的是开放后

```
imshow(FloatArray) 
```

另一张图像会自动变成灰度。我很困惑...此外，据我所知，图像已经是灰度的，至少当我在 MS Paint 或 ImageJ 中打开它们时它们是灰度的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:08:17.477

每当您执行 GUI 操作时，最好明确指定父句柄。例如：

```
imshow(img, 'Parent',handles.ax1) 
```

和

```
axis(handles.ax1, 'on') 
```

* * *

至于图像和颜色图，您应该了解MATLAB 支持[的图像类型](http://www.mathworks.com/help/toolbox/images/f14-13543.html)（索引与真彩色）。另请注意，一个图形只有一个应用于所有图像的颜色图，尽管有一些[技术](http://www.mathworks.com/support/solutions/en/data/1-GNRWEH/index.html)可以[克服这一点](http://blogs.mathworks.com/pick/2009/07/24/using-multiple-colormaps-in-a-single-figure/)。

# selenium - Selenium-PHPUnit，Selenium Grid

> ID：11634844
> 
> 赞同：0
> 
> 时间：2012-07-24T16:03:16.880
> 
> 标签：selenium, automation, phpunit, automated-tests, selenium-grid

在发布这个之前，我在这个网站和谷歌上检查了很多，以找出我的问题。我正在测试我的 Web 应用程序，该应用程序主要使用 Symfony2 框架在 PHP 中编码。

我正在使用 Selenium 进行功能测试。目前我想做的就是使用 Selenium Grid 在我的本地机器上并行运行我的功能测试。我所做的是在 Selenium IDE 上记录测试并以 phpunit 格式导出测试用例。我尝试使用 selenium 网格，但我的 phpunit 测试仍在按顺序运行。

我做了什么：

1) java -jar selenium-server-standalone-2.24.1.jar -role hub

```
2) java -jar selenium-server-standalone-2.24.1.jar -role node -hub http://localhost:4444/grid/register -browser "browserName=firefox,maxInstances=2,maxSession=2" 
```

3) 蚂蚁

在我的 build.xml 中有一个 phpunit 目标：

```
<target name="phpunit" description="Run unit tests">
  <exec executable="phpunit" failonerror="true"/>
</target> 
```

在我的 phpunit.xml 中存在这部分代码：

```
<testsuites>
    <testsuite name="LoginSuite">
       <file suffix="Test.php">../../src/Tests/FunctionalTests/LoginSuite_testLoginTest.php</file>
    </testsuite>
</testsuites> 
```

我的 LoginSuite_testLoginTest.php 看起来像这样：

```
<?php

namespace Tests\FunctionalTests;
use Tests\FunctionalTests\SetUpTest;

class LoginSuite_testLoginTest extends SetUpTest
{
  public function testLogin()
  {
    $this->open("/home");
    $this->click("link=Login");
    $this->type("id=username", "test.user@gmail.com");
    $this->type("id=password", "test");
    $this->click("id=_submit");
    $this->waitForPageToLoad("30000");
  }

  public function testLogin2()
  {
    $this->open("/home");
    $this->click("link=Login");
    $this->type("id=username", "test.user2@gmail.com");
    $this->type("id=password", "test");
    $this->click("id=_submit");
    $this->waitForPageToLoad("30000");
  }
}
?> 
```

在第三步，当我启动 ant 命令时，我收到了一个码头错误 500 访问 /selenium-server/driver/ 问题

如果不是这样做：

```
java -jar selenium-server-standalone-2.24.1.jar -role node -hub http://localhost:4444  /grid/register -browser "browserName=firefox,maxInstances=2,maxSession=2" 
```

我在没有 -browser 信息的情况下执行相同的命令，它启动了我的测试但不是并行的......，太奇怪了。

我看到要并行启动 phpunit 测试，我们必须创建自己的脚本来完成它。那么在这种情况下我是否需要硒网格？我很困扰。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:39:31.347

phpunit 命令行有一个并行包装器[https://github.com/siivonen/parallel-phpunit](https://github.com/siivonen/parallel-phpunit)所以你不需要写它。您需要在某处运行 Selenium Hub（连接一些节点）。然后您运行指向该位置的测试，集线器会将调用代理到空闲节点。

我们使用 parallel-phpunit 和 Selenium Grid，四个节点连接到一个集线器。我们的 CI 在 3 分钟内运行 30 分钟的 Selenium 测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T07:26:59.293

可能有不同的问题。一种是，在运行预先记录的步骤时，您应该在“浏览器”参数中添加 seleniumProtocol=Selenium，因为默认情况下它将是 webdriver。

# css - 1140 CSS 网格在 ipad 上不起作用

> ID：11634845
> 
> 赞同：4
> 
> 时间：2012-07-24T16:03:20.363
> 
> 标签：css, media-queries

我使用 1140px CSS Grid (cssgrid.net) 来编写这个页面：[http ://workaday.org/dev/static/](http://workaday.org/dev/static/)

它在 750px 宽度而不是 767px 上重组所有内容，因此它不适用于 iPad。

有人可以建议我在这方面做错了什么吗？

* * *

更新：

我将最大宽度更改为 784px，现在它在 767px 上工作，有 17px 的差异。但到目前为止，我无法找到原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:28:57.803

你有

```
@media handheld, only screen and (max-width: 767px) 
```

这对我来说不是逻辑。所以你可以尝试变化

```
@media only handheld and (max-width: 767px) 
```

或者

```
@media handheld and (max-width: 767px) 
```

我没有 iPad，所以无法测试。

# android - Android - 按钮背景颜色缩小按钮的高度

> ID：11634848
> 
> 赞同：2
> 
> 时间：2012-07-24T16:03:28.703
> 
> 标签：android, android-layout

我有这个按钮

```
<Button
android:id="@+id/learn"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_marginTop ="5dp"
android:text="Hello StackOverflow"
style="@style/home_page_buttons"    
/> 
```

我试图给它这种风格

```
<style name="home_page_buttons">  
    <item name="android:layout_marginLeft">15dp</item>
    <item name="android:layout_marginRight">15dp</item>

    <item name="android:textColor">@color/light_best_blue</item> 
    <item name="android:textStyle">bold</item>   
    <item name="android:color">@color/white</item>  
     <item name="android:background">@color/white</item>

</style> 
```

这一行：

```
 <item name="android:background">@color/white</item> 
```

使背景变成我想要的白色，但由于某种原因，它缩小了按钮的高度并使其变得难看。

知道为什么会发生这种情况以及如何阻止这种副作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:36:18.390

ABDOU 是对的，这可能是您的解决方案

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle">
    <gradient android:startColor="#FFFFFF" android:endColor="#BBBBBB" 
            android:angle="270"/>
    <stroke android:width="2dp"
            android:color="#555555" />
    <corners android:bottomRightRadius="7dp"
        android:bottomLeftRadius="5dp" 
        android:topLeftRadius="5dp"
        android:topRightRadius="7dp"/>    
</shape> 
```

`XML`像中一样创建它`drawable`，并将其设置为您的`BackgoundColor`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T16:33:51.097

默认按钮具有固定的最小高度，等于底层图像的高度。在这里，由于您使用的是颜色，因此它没有最小高度。因此，它占据了文本的高度。对于您的情况，您将不得不修复按钮的高度。

更好的方法是使用自定义按钮图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T16:30:34.590

当你让`style="@style/home_page_buttons"`你改变android按钮的默认样式时

如果你想保留它，只需为你的按钮制作一个背景图片

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-12T20:35:57.433

我不知道这是否取决于版本或由于最近的任何更改因为我有一个最新版本的 Android Studio，但通过指定 Padding 属性，我似乎至少在一定程度上成功恢复了额外的空间。

只需添加此属性：

```
android:padding="5dp" 
```

Button 将重新获得它失去的大部分空间。我建议调整数字，或者可能将属性拆分为 4 个方向变体，以根据需要自定义间距。

这似乎也适用于 EditText 和 Buttons，因为两者似乎都有同样的问题。

# tridion - 受众经理 - Com.Tridion.Broker.StorageException：事务回滚

> ID：11634854
> 
> 赞同：3
> 
> 时间：2012-07-24T16:03:46.197
> 
> 标签：tridion, tridion-2011

编辑 - 应该添加这是针对 Tridion 2011 SP1

尝试使用 TOM.NET API 保存新的受众管理器配置文件时，我收到以下错误：

```
Com.Tridion.Broker.StorageException: Transaction rolled back, error executing work, error executing work
   at Codemesh.JuggerNET.NTypeValue.Throw(Int64 inst)
   at Codemesh.JuggerNET.JavaClass.ThrowTypedException(Int64 inst)
   at Codemesh.JuggerNET.JavaMethod.CallVoid(JavaProxy jpo, Object val)
   at Tridion.OutboundEmail.ContentDelivery.Profile.Contact.Save(String pageUri) 
```

通常有存储异常，我一直认为我的演示服务器上的 cd_licenses.xml 文件有问题，或者配置似乎没有指向它....但是我已经检查了两者，一切似乎都很好.

有人在保存受众管理器配置文件时遇到过此消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:05:39.003

我看到的这个问题的可能原因：

1.  您缺少一些需要的 JAR 文件
2.  您在 64 位系统上使用 32 位版本的 DLL（反之亦然）
3.  在同一个应用程序池中拥有出站电子邮件和内容交付

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:41:35.063

检查您的 cd_stroage_conf.xml 以确保您包含正确的存储绑定。

```
<StorageBindings>
    <Bundle src="AudienceManagerDAOBundle.xml"/>
</StorageBindings>

<Storage Id="profiledb" Class="com.tridion.storage.persistence.JPADAOFactory" Type="persistence"
         dialect="MSSQL">
    <Pool CheckoutTimeout="120" IdleTimeout="120" MonitorInterval="60" Size="5" Type="jdbc"/>
    <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
        <Property Name="serverName" Value="localhost"/>
        <Property Name="portNumber" Value="1433"/>
        <Property Name="databaseName" Value="tridion_submgmt_DB"/>
        <Property Name="user" Value="username"/>
        <Property Name="password" Value="password"/>
    </DataSource>
</Storage> 
```

此外，您需要将项目类型映射到同一个数据库。

```
<Item typeMapping="AudienceManagerProfile" storageId="profiledb"/> 
```

或者，如果您使用跟踪，则还应该拥有跟踪数据库和跟踪类型映射。

# maven - Surefire (Maven) 是否能够使用不同版本的依赖项运行多个执行？如果是，如何？

> ID：11634855
> 
> 赞同：1
> 
> 时间：2012-07-24T16:03:48.970
> 
> 标签：maven, dependencies, execution, surefire

我想知道是否可以让 Maven Surefire 插件在不同版本的依赖项下运行多次（多次执行）？

例如，这可以很方便地确保您的代码仍然与项目依赖项的先前版本兼容。

我至少设法运行了 2 次 surefire 执行：

```
 <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <skip>true</skip>
        </configuration>
        <executions>
          <execution>
            <id>test-default-deps</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
            <configuration>
              <skip>false</skip>
            </configuration>
          </execution>
          <execution>
            <id>test-anotherversion-deps</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
            <configuration>
              <skip>false</skip>
              <reportsDirectory>${project.build.directory}/surefire-reports-anotherversion-deps</reportsDirectory>
              <dependencies>

                <!-- Version different of the default for the project -->
                <dependency>
                  <groupId>com.dep.groupid</groupId>
                  <artifactId>dep-artifact</artifactId>
                  <version>anotherversion</version>
                </dependency>

              </dependencies>
            </configuration>
          </execution>
        </executions>
      </plugin> 
```

但是在第二次执行期间没有考虑到这个不同的版本。我是在尝试做一些不可行的事情还是以错误的方式做事？是否有另一个插件可以对此有所帮助？

# javascript - 如何以 ajax 形式创建回调？

> ID：11634857
> 
> 赞同：1
> 
> 时间：2012-07-24T16:03:51.607
> 
> 标签：javascript, jquery, ajax, callback

文件上传到服务器后如何创建回调？

我想在 JS 函数调用后将文件上传到服务器上。我想调用这个函数`addDownload`，在这个函数完成后，再调用下一个javascript函数。我怎样才能做到这一点？

我有以下源代码：

HTML：

```
<form id="imageform" method="post" enctype="multipart/form-data" action="actions/downloadsadd.php">
 <strong>File: </strong><input name="photoimg" id="photoimg" style="width: 100px;" type="file" />
Select Image: <br />
<div id="divPreview"></div>
</form> 
```

Javascript：

```
addDownload: function ()
    {

        $("#divPreview").html('');
        $("#divPreview").html('<img src="Images/loader.gif" alt="Uploading...."/>');
        $("#imageform").ajaxForm(
        {
            target: '#divPreview'
        }).submit();             
    }, 
```

PHP - 下载.php：

```
public function addDownloads() {

            $db = new DB();
            $db->connect();

            $path = "../../images/upload/files/";

            $valid_formats = array("php", "phtml", "php3", "php4", "js", "shtml", "pl", "py", "html", "exe", "bat", "htm", "sql");
            if (isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST") {
                $name = $_FILES['photoimg']['name'];
                $size = $_FILES['photoimg']['size'];
                if (strlen($name)) {
                    list($txt, $ext) = explode(".", $name);
                    if (!in_array($ext, $valid_formats)) {
                        if ($size < (1024 * 1024)) { // Image size max 1 MB
                            $actual_image_name = time() . "." . $ext;
                            $tmp = $_FILES['photoimg']['tmp_name'];
                            if (move_uploaded_file($tmp, $path . $actual_image_name)) {

                                $arr = array(
                                    'file' => $actual_image_name
                                );

                                dibi::query('INSERT INTO [downloads]', $arr);

                                echo "FILE:" .$actual_image_name;
                            }
                            else
                                echo "Failed upload!";
                        }
                        else
                            echo "Image file size max 1 MB";
                    }
                    else
                        echo "Invalid file format..";
                }
                else
                    echo "Please select image..!";
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T16:42:52.493

只是猜测，但您的代码似乎使用了[jQuery 表单插件](http://jquery.malsup.com/form/)： `$("#imageform").ajaxForm(...);`

该插件允许您使用该`success`选项添加回调函数。当 AJAX 请求（即您正在调用的 PHP 文件中的所有代码）成功完成时，将调用此函数。

```
$("#imageform").ajaxForm({
    target: '#divPreview',
    data: {
        var1: $("#inputText").val()   //assuming #inputText is a text field
    },
    success: function() {
        alert("Callback!");
    }
}).submit(); 
```

请参阅[文档](http://jquery.malsup.com/form/#options-object)以获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T08:39:11.713

我确实喜欢这样上传头像。

```
<script type="text/javascript">
    $('input[id=lefile]').change(function() {
        $('#photoCover').val($(this).val());
    });

    function doUpload(){
        //Use FormData to get files in form.
        var formData = new FormData($("#myform")[0]);
         $.ajax({
              url: $('#myform').attr('action'),
              type: 'POST',
              data: formData,
              async: false,
              cache: false,
              contentType: false,
              processData: false,
              success: function (returndata) {
                  alert(returndata);
              },
              error: function (returndata) {
                  alert(returndata);
              }
         });
    }
</script>
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div id="avatar-content">
    <form id="myform" action="http://www.example.com/editor/" method=post enctype=multipart/form-data>
        <input id="lefile" type="file" name="file" style="display:none">
        <div class="input-append">
            <input id="photoCover" type="text" class="form-control" style="height:34px; width: 54%; display: inline-block;" onclick="$('input[id=lefile]').click();">
            <div class="btn btn-primary btn-file" onclick="doUpload()">
                <i class="fa fa-upload"></i> Upload
            </div>
        </div>
    </form>
</div>
```

# php - 锁定行的 MySQL 计时器

> ID：11634861
> 
> 赞同：0
> 
> 时间：2012-07-24T16:04:09.870
> 
> 标签：php, mysql, cron, lamp

我对高级 MySQL 不是很有经验，但我想知道实现超时的最佳方法是什么。我有一个 iPhone 应用程序，它在创建要写回的内容时“锁定”表中的一行。这只是一个我来回切换的 BOOL 列。问题是，如果我的应用程序在锁定时崩溃或失去网络连接，它将无法解锁。如果他们未能在该时间内完成该过程，我想在服务器上设置一个 5 分钟计时器或其他东西来解锁该行。我的 web api 是用 PHP 编写的。

我可以用 MySQL 做到这一点吗？我需要创建一个 cron 作业吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:14:44.353

您可以创建一个服务器端应用程序（cron 作业可以工作），定期查看带有锁的行并在它们过期时解锁它们。要知道它们是否已过期，您需要包含一个日期时间列，该列设置为应用锁定的当前时间。

或者，您可以跳过服务器端应用程序，让您的 iPhone 应用程序检查日期时间，如果时间足够长，则重置锁定。

在任何一种情况下，关键是添加一个日期时间列并利用它来了解锁的年龄。

# php - 仅当我授予他们访问权限时才能访问网站

> ID：11634865
> 
> 赞同：0
> 
> 时间：2012-07-24T16:04:27.823
> 
> 标签：php, forms, login, e-commerce, registration

我使用 PHP 制作了一个注册表单和一个登录表单。注册表单将用户信息保存到数据库中。

但由于我对 PHP 还很陌生，所以我想实现这个想法。我还制作了一个电子商务网站的完整模板/主题，但我希望作为入口页面成为此注册表单，并且当我授予他们访问权限时，他们能够查看我的电子商务网站的全部内容。虽然我说当他们给我注册表单的字段时授予他们访问权限，在我向他们发送密码之前，他们将无法进入网站。所以我的问题是我怎样才能实现无法看到整个网站？我需要什么做保护吗？我的意思是我需要在注册表单上添加代码？在登录表单或模板/主题上？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:11:50.230

尝试使用 $_SESSION 变量。例如，创建一个初始为 false 的 $_SESSION['loggedIN'] 变量。该页面将始终验证该变量以允许或拒绝对内容的访问。

我猜还有一个登录表格，对吧？

因此，一旦登录表单操作允许，您将只允许访问 ($_SESSION['loggedIN']=TRUE)。当然有所有的验证和数据库访问过程，但这是解决您的问题的一个简单想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T16:15:54.270

您需要在登录页面添加代码。代码应处理以下内容：

1.  创建 $_SESSION[]
2.  创建 $_COOKIE[]
3.  创建一些秘密方式（数据库）来了解会话和 cookie 不是伪造的。

当时或页面访问仅限于已登录的人，

检查 $_SESSION, $_COOKIE 对秘密方式（数据库）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T16:17:43.143

您需要跟踪注册过程，例如跟踪

*   电子邮件是否已发送给用户？
*   电子邮件何时发送给用户？
*   用户确认注册了吗？

然后在主用户表中设置一个列值`verified=(boolean)`以通过查询检查用户是否已通过验证，然后在成功登录后使用会话存储数据，您需要在`session_start()`限制访问或禁用内容视图之后进行简单的 IF。

```
 if(USER_HAS_ROLE){
     // display_content 
    }else{
     // don't display content
    }
    //----------------
    if(USER_IS_LOGGED_IN){
     // access website
    }else{
     // redirect to login page
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T19:37:09.340

似乎没有提到的一件事是，如果 session 登录变量为 false，则在 header() 重定向之后，脚本应该 die() 以防用户的浏览器忽略 Location: 标头。

# java - 在 BufferedImage 上绘制填充矩形

> ID：11634867
> 
> 赞同：15
> 
> 时间：2012-07-24T16:04:30.457
> 
> 标签：java, bufferedimage, graphics2d

因此，我正在尝试创建一个应用程序，该应用程序可以屏蔽包含敏感信息的调查部分。但是我遇到了一些问题。

我想要做的是在 BufferedImage 上绘制填充的黑色矩形，给定所需区域的 x、y、宽度和高度以涂黑，然后将该新图像写回我的文件系统。这是我的代码。

```
File imageFile = new File("images/template.jpg");
BufferedImage img = ImageIO.read(imageFile);

Graphics2D graph = img.createGraphics();
graph.setColor(Color.BLACK);
graph.fill(new Rectangle(x, y, width, height));
graph.dispose();

ImageIO.write(img, "jpg", new File("images/template.jpg")); 
```

无论出于何种原因，资源中的图像在此代码段之后都不会更改。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-04T05:20:53.827

我为您的代码创建了一个可运行的示例，它对我来说效果很好。我使用 Java 8 运行了这段代码。

这是更改后的图像。我在我拥有的图像上画了黑色方块。

[![改变图像](../Images/52fb5ff1d14debf8822dca3f1ae643eb.png)](https://i.stack.imgur.com/lvjgk.jpg)

这是我运行的代码。我直接从我的文件系统中读取原始图像。

```
package com.ggl.testing;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class ImageProcessing implements Runnable {

    public static void main(String[] args) {
        new ImageProcessing().run();
    }

    @Override
    public void run() {
        File imageFile = new File("C:\\Users\\Owner\\Pictures\\Saved Pictures\\Analog Clock Calendar.jpg");
        BufferedImage img;
        try {
            img = ImageIO.read(imageFile);
        } catch (IOException e1) {
            e1.printStackTrace();
            return;
        }

        Graphics2D graph = img.createGraphics();
        graph.setColor(Color.BLACK);
        graph.fill(new Rectangle(100, 100, 100, 100));
        graph.dispose();

        try {
            ImageIO.write(img, "jpg", 
                    new File("altered.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

我的结论是您要么没有正确阅读图像，要么您的 x、y、宽度和/或高度超出了图像的限制，要么是我遗漏的其他内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-08T22:43:17.853

我知道这是一个老问题，但也许它对某人有用，我认为你应该使用它

```
graph.drawImage(x,y,width,height); //First you draw the image
graph.setColor(Color.black); //Then set the color to black
graph.fillRect(img.getX(), img.getY(), img.getWidth(), img.getHeight());// Finally draw a black rectangle on it 
```

顺便说一句，如果没有更多的代码，很难找到解决方案。希望它会有用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-05-01T16:28:52.200

这个答案很晚，但您正在保存图像而不是您正在创建的图形。我认为它必须再次成为 BufferedImage 才能保存

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-12-03T10:22:47.083

您只需替换此行：

```
Graphics2D graph = img.createGraphics(); 
```

有了这个：

```
Graphics2D graph = img.getGraphics(); 
```

# php - 在线用户指南和 PDF 下载

> ID：11634869
> 
> 赞同：2
> 
> 时间：2012-07-23T20:05:47.367
> 
> 标签：php, html, xml

目前，我正在使用 Microsoft Word 2003 管理我的用户指南，并将其转换为可以从网站下载的 PDF 文件，并且产品安装程序中包含该文件。

我想转向实现以下目标的机制：

*   生成带有可点击目录和首页的 PDF 文件
*   每章/节生成符合 HTML5 的输出，但没有 HTML 框架
*   为用户指南生成 JSON TOC（章节/章节大纲）

我想将 PDF 文件与分发的产品打包在一起。

我想创建一些简单的 PHP 脚本来生成带有上下文相关目录的 HTML 页面（显示当前章节的部分）并显示相关文档。

我对开发 PHP 脚本来实现这一点没有任何问题，但我想知道如何生成上述输出。我希望使用现成的 GUI 键入文档。我很高兴编写 XSLT2 样式表来执行任何必要的转换。

为了让人们了解我所追求的：

*   当前 PDF 手册：[http ://rotorz.com/tilesystem/user-guide.pdf](http://rotorz.com/tilesystem/user-guide.pdf)

*   API 文档使用自定义 XSLT2 样式表生成到一堆“不完整”的 HTML 文件中，并带有一个 JSON TOC，然后由 PHP 组合在一起：[http ://rotorz.com/tilesystem/api](http://rotorz.com/tilesystem/api)

当您浏览我的 API 文档时，您会注意到左侧的 TOC 是上下文相关的。我希望我的用户指南以类似的方式工作。

是否有 Prince 的免费替代品：http: [//www.princexml.com/](http://www.princexml.com/)用于分页媒体 CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:58:19.207

在花了相当长的时间阅读了很多变化之后，我遇到了一个潜在的解决方案......

1.  [使用 PHP 和http://aloha-editor.org](http://aloha-editor.org)为我的所见即所得编辑器创建一个非常简单的“静态”CMS 。可能使用[https://github.com/chillitom/CefSharp](https://github.com/chillitom/CefSharp)将编辑器直接嵌入到更相关的 GUI 中。

2.  使用带有自定义封面、页眉和页脚 .html 文件的“wkhtmltoxdoc”将 HTML5 页面转换为 PDF。Plus 会自动生成一个 TOC 页面。

3.  “wkhtmltoxdoc”还生成一个可以轻松转换为 JSON 的 XML TOC。

我仍在尝试“wkhtmltoxdoc”，但它看起来还不错！除非当然有更简单的解决方案......

**添加：**

看来我的 TOC 文件需要混合手动编写和自动生成。类似于 Eclipse TOC 模式的内容就足够了，一个简单的 XSLT 样式表可以通过抓取 H1-6 标记以及为散列链接添加唯一标识符来自动填充空白。

因此，此 TOC 可以由 XSLT2 样式表使用，然后最终转换为 JSON 以供 PHP 脚本使用。

我现有文档的模拟摘录：

```
<?xml version="1.0" encoding="UTF-8"?>
<toc>
    <topic label="Introduction" href="introduction.html"/>
    <topic label="Getting Started">
        <topic label="Installation" href="getting-started/installation.html"/>
        <topic label="User Interface" href="getting-started/ui/index.html">
            <topic label="Menu Commands" href="getting-started/ui/menu-commands.html"/>
            <topic label="Tile System Panel" href="getting-started/ui/tile-system-panel.html"/>
            <topic label="Brush Designer" href="getting-started/ui/brush-designer.html"/>
        </topic>
        <topic label="User Preferences" href="getting-started/user-preferences.html"/>
    </topic>
    <topic label="Creating a Tile System" href="creating-a-tile-system">
        <!-- ... -->
    </topic>
</toc> 
```

参考 Eclipse 文档： [http ://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_help_toc.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_help_toc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T23:35:08.163

经过大量的研究和实验，我决定使用 DITA（达尔文信息类型架构）。对我来说，DITA 最好的一点是它是基于主题的，这使得文档模块化和可重用。

DITA 模式相对简单，良好的 XML 编辑器可以提供对可用元素和属性的有用洞察。

DITA 文档可以使用 DITAMAP 进行组合。例如，人们可能会选择分发包含最少信息量的“快速入门指南”，而完整的“用户指南”将包含更多细节。美妙之处在于两个文档可以重复使用相同的信息；此外，文件可以输出为多种交付格式：

*   XHTML（单个文件或分块）
*   PDF格式
*   文档手册

使用 DITA Open Toolkit（又名 DITA-OT）可以轻松处理将输出转换为交付格式的过程。该工具包可从以下网址获得：[http](http://dita-ot.sourceforge.net) ://dita-ot.sourceforge.net ，只需提取提供的存档即可安装。`startcmd.bat`通过运行（在 Windows 上）或`startcmd.sh`（类 Unix 系统）可以轻松访问该工具包。

自定义和品牌化 PDF 输出并非易事。定制 XHTML 输出要容易得多，但仍然需要 XSL 转换的知识。可以通过创建**插件**并将其放置在`plugins`DITA-OT 的文件夹中来进行自定义。我想强调的一件事是，一旦进行了自定义，您必须`ant -f integrator.xml`在更改变得明显之前调用。缺乏这方面的知识让我很困惑！

生成的 XHTML 文件非常简单（非常棒！），因为这使得它们易于定制。但是添加 HTML5 DOCTYPE 并不容易；但就我的目的而言，这真的无关紧要，好像我的 PHP 脚本只关心里面的内容`<body>`。

~~我还没有找到任何好的 WYSIWYG 编辑器~~XML Mind 似乎是一个非常好的 WYSIWYG 编辑器，而且也非常易于使用。我怀疑使用 Aloha 编辑器 (http://aloha-editor.org) 之类的东西创建一个基本的基于 Web 的解决方案不会太难。

虽然自定义 PDF 输出似乎相当困难，但将所有文档生成到单个 XHTML 页面中似乎很容易，然后可以使用 CSS 对其进行格式化，最后使用`wkhtmltopdf`. 我还没有决定我的解决方案，但至少对于那些无法（或没有时间）自定义 DITA-OT 的 XSL:FO 样式表的人来说，这是一个可行的选择。

**补充：**经过一番搜索，我发现还有另一种 DITA-OT 的开源替代品，称为“Ditac”，它似乎更易于使用并产生更好的输出。该工具由“XML Mind”的创建者创建。虽然该工具是基于命令行的，但使用“XML Mind”的用户可以从功能丰富的 GUI 中受益：

[http://www.xmlmind.com/ditac/](http://www.xmlmind.com/ditac/)

*注意：我留下了我之前的答案，因为它可能对其他人有用。*

# c# - 将arraylist转换为字典列表？

> ID：11634870
> 
> 赞同：0
> 
> 时间：2012-07-24T16:04:32.753
> 
> 标签：c#, .net, list

有人知道如何将数组列表转换为字典列表吗？我有什么？我有一个包含很多字符串的 ArrayList （列表）：

```
 foreach (string s in list)
            {
                Console.WriteLine(s);
            }

output:
klaus
male
spain
lissy
female
england
peter
male
usa
... 
```

如我们所见，有一个命令。第一个条目是 NAME，第二个 GENDER，第三个 COUNTRY，然后是 NAME，GENDER... 等等。

现在为清楚起见，我想将这些属性存储在字典列表中。每个列表条目应该是具有这 3 个属性的 1 个字典。这是一个好主意吗？最简单的方法是什么？我只是搜索一些东西以将此列表存储在一个更好看的集合中，以后更容易处理。我有这个：

```
 List<Dictionary<string, string>> dlist = new List<Dictionary<string, string>>();
    const int separate = 3;

    foreach (string s in list)
    {
        //add list entries to dlist?
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:17:01.823

```
enum Gender
{
    Male = 0,
    Female = 1
}

class Person
{
    public string Name { get; set; }
    public Gender Gender { get; set; }
    public string Country { get; set; }

    public Person(string name, Gender gender, string country)
    {
        this.Name = name;
        this.Gender = gender;
        this.Country = country;
    }
} 
```

用法：

```
List<Person> persons = new List<Person>();
Person person;
for (int i = 0; i < list.Count; i += 3) {
{
    person = new Person(list[i], (Gender)Enum.Parse(typeof(Gender), list[i+1], true), list[i+2]);
    persons.add(person);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T16:08:11.217

不，这不是一个好主意。定义一个类。

至少是这样的：

```
class Person
{
    public string Name { get; set; }
    public string Gender { get; set; }
    public string Country { get; set; }
} 
```

更好的办法是对 Gender 使用枚举，并可能为国家/地区使用一个类（内置或自定义）。

无论如何，要使用上述类填充集合，您可以使用以下内容：

```
List<Person> result = new List<Person>();

for (int i = 0; i < list.Count; i += 3) { 
    result.Add(
        new Person { Name = list[i], Gender = list[i+1], Country = list[i+2] }); 
} 
```

请注意，此循环缺少对列表中项目计数的错误检查，该计数应该是三的倍数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T17:02:27.837

这很简单。您正在为一个包含三个名为的数据变量的类工作：

**字符串名称；字符串性别；字符串国家；**

所以创建一个包含所有这三个变量的类。至于例如：

```
class Dictnary
{

public Dictnary(String nameFromCall, String genderFromCall, String countryFromCall)
{
this.name = nameFromCall;
this.gender = genderFromCall;
this.country = countryFromCall;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:15:29.953

实现它的最简单方法 - 它创建一个新类来代表您列表中的某人，其中包含 3 个道具：

```
public class Someone {
    public string Name { get; set; }
    public string Gender { get; set; }
    public string Country { get; set; }
} 
```

并且您可以使用某人条目填写您的目的地列表：

```
List<Someone> dList = new List<Someone>();
for(int i = 0; i < list.Count; i += 3)
    dList.Add(new Someone() { Name = list[i], Gender = list[i+1], Country = list[i+2] }); 
```

ps此代码可能包含错误，因为我无法访问安装了VS的计算机。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T16:15:51.930

您可能有一个类来保存数据，例如：

```
public class Info
    {
        public string Name { get; set; }
        public string Gender { get; set; }
        public string Country { get; set; }
    } 
```

那么你可以拥有这样的字典

```
Dictionary<int, Info> infoDict = new Dictionary<int, Info>(); 
```

然后你就可以开始阅读并准备字典了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T16:26:09.737

```
var listSrc = new List<string>
                    {
                        "klaus",
                        "male",
                        "spain",
                        "lissy",
                        "england",
                        "female",
                        "peter",
                        "usa",
                        "male",
                    };
var dlist = new List<Dictionary<string, string>>();

for (var i = 0; i < listSrc.Count; i++)
{
    var captions = new List<string>
                            {
                                "Name",
                                "Gender",
                                "Country"
                            };

    var list = listSrc.Take(3).ToList();
    listSrc.RemoveRange(0, 3);

    dlist.Add(list.ToDictionary(x => captions[list.IndexOf(x)], x => x));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T16:06:56.833

要回答标题中的问题，这可能是最简洁的转换方式：

```
for (int i = 0; i < list.Count; i += 3) {
    dlist.Add(new Dictionary<string, string>() {
        { "name", (string)list[i] },
        { "gender", (string)list[i+1] },
        { "country", (string)list[i+2] }
    });
} 
```

（如果你从 a 切换`ArrayList`到 a `List<string>`，你可以放弃`(string)`演员表。）

也就是说，除非您出于某种技术原因确实需要字典，否则最好使用其他答案中建议的基于类的方法之一来解决您的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T16:14:43.257

我建议使用一个类来封装您的条目：

```
class Entry
{
    public String Name { get; set; }
    public String Gender { get; set; }
    public String Country { get; set; }
} 
```

然后添加到`Entry`s列表中

```
List<Entry> elist = new List<Entry>();

for (int i = 0; i < list.Count; i += 3)
{
    var ent = new Entry() { Name    = list[i],
                            Gender  = list[i+1],
                            Country = list[i+2]};
    elist.Add(ent);
} 
```

或者你可以使用元组：

```
List<Tuple<string, string, string>> tlist = 
    new List<Tuple<string, string, string>>();

for (int i = 0; i < list.Count; i += 3)
{
    Tuple<string,string, string> ent 
        = new Tuple<string,string,string>(list[i], list[i+1], list[i+2]);
    tlist.Add(ent);
} 
```

# jquery - 如何通过 API Query 搜索 Instagram？

> ID：11634881
> 
> 赞同：10
> 
> 时间：2012-07-24T16:05:21.673
> 
> 标签：jquery, ajax, api, search, instagram

我想构建一个由 Instagram 照片提供支持的小型“即时图像搜索”应用程序。这就像 Google Instant 一样，您开始输入并在您输入更多字母时显示/更新结果。

您可以看到由 Google 图片提供支持的[实时演示应用程序。](http://www.allwebinstant.com/googleimage.html)我知道这对于更大的引擎（谷歌、雅虎、必应）是可能的，但我不知道 Instagram 是否允许这样做。任何熟悉 API 的人都可以提供帮助吗？

如果无法通过有意义的 API 进行搜索。我只是想先检查这里，因为有这么多知识渊博的程序员。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T16:51:28.390

首先，如果您不知道，已经[有一个类似](http://searchinstagram.com/)的（至少）网络应用程序。话虽如此，让我们来回答：

您需要[获取您的 client_id](http://instagram.com/developer/register/)，因为您需要它来调用 API（[此处](http://instagram.com/developer/authentication/)有更多信息）。您应该调用[此端点](http://instagram.com/developer/endpoints/tags/)（有关 Instagram 的 API 端点的更多信息，请阅读[此处](http://instagram.com/developer/endpoints/)：P）：

```
https://api.instagram.com/v1/tags/SEARCH-TAG/media/recent?client_id=CLIENT-ID&callback=YOUR-CALLBACK 
```

当然，用你之前得到的那个和你的回调函数的名字来改变`SEARCH-TAG`用户输入。`CLIENT-ID``YOUR-CALLBACK`

此调用的响应来自[JSONP](http://en.wikipedia.org/wiki/JSONP)，如下所示（取自 API 页面）：

```
{
    "data": [{
        "type": "image",
        "filter": "Earlybird",
        "tags": ["snow"],
        "comments": {
            "data": [{
                "created_time": "1296703540",
                "text": "Snow",
                "from": {
                    "username": "emohatch",
                    "username": "Dave",
                    "id": "1242695"
                },
                "id": "26589964"
            },
            {
                "created_time": "1296707889",
                "text": "#snow",
                "from": {
                    "username": "emohatch",
                    "username": "Emo Hatch",
                    "id": "1242695"
                },
                "id": "26609649"
            }],
            "count": 3
        }
        "caption": {
            "created_time": "1296703540",
            "text": "#Snow",
            "from": {
                "username": "emohatch",
                "id": "1242695"
            },
            "id": "26589964"
        },
        "likes": {
            "count": 1,
            "data": [{
                "username": "mikeyk",
                "full_name": "Mike Krieger",
                "id": "4",
                "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_1242695_75sq_1293915800.jpg"
            }]
        },        
        "link": "http://instagr.am/p/BWl6P/",
        "user": {
            "username": "emohatch",
            "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_1242695_75sq_1293915800.jpg",
            "id": "1242695",
            "full_name": "Dave"
        },
        "created_time": "1296703536",
        "images": {
            "low_resolution": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/f9443f3443484c40b4792fa7c76214d5_6.jpg",
                "width": 306,
                "height": 306
            },
            "thumbnail": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/f9443f3443484c40b4792fa7c76214d5_5.jpg",
                "width": 150,
                "height": 150
            },
            "standard_resolution": {
                "url": "http://distillery.s3.amazonaws.com/media/2011/02/02/f9443f3443484c40b4792fa7c76214d5_7.jpg",
                "width": 612,
                "height": 612
            }
        },
        "id": "22699663",
        "location": null
    },
    ...
    ]
} 
```

然后你只需要处理这个响应并用它做任何你想做的事情:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T22:32:39.790

An important side note: instagram allows max 5000 queries for hour. This if you use the query with the app id. If you want to raise this limit, you can ask your users to authenticate. Then you can pass the the user access token. Hope this helps

# javascript - 如何在 Raphael JS 中使圆圈和文本成为悬停对象？

> ID：11634884
> 
> 赞同：0
> 
> 时间：2012-07-24T16:05:30.623
> 
> 标签：javascript, raphael

我有一个圆圈（circle3），里面有一个文本（text3）。我想为悬停状态设置动画，我可以很好地处理圆圈，但是当我将鼠标悬停在圆圈内的文本上时问题就开始了。javacscript 认为我远离圈子并开始悬停功能的第二部分。但我需要它认为文本区域是圆圈的一部分，因此即使我将鼠标悬停在文本上，它也会保持悬停状态。如何完成这样的事情？

编辑：我已经弄清楚如何合并多个对象，但是，知道填充属性也适用于文本，不仅是背景（因此文本在悬停后不可见，因为它与背景颜色相同），所以我需要以某种方式弄清楚。有什么建议吗？

我需要修改的代码：

```
st.push(
                                circle3,
                                text3
                            );

                            // st.animate(fillerHover, 500);
                            st.hover(function () {
                                st.animate(fillerHover, 500);
                              },
                              function () {
                                st.animate(filler, 500);
                              }
                            ); 
```

行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:57:12.170

好的，自己解决了。这是最终的工作代码：

```
st.push(
                                    circle3,
                                    text3
                                );

                                st.attr({"cursor": "pointer"});

                                st.hover(function () {
                                    st.animate(fillerHover, 500);
                                    text3.animate(fillerTextHover, 500);
                                  },
                                  function () {

                                    st.animate(filler, 500);
                                    text3.animate(fillerText, 500);
                                  }
                                ); 
```

# javascript - 使用 javascript/jquery 在更大的对象中查找对象及其属性

> ID：11634887
> 
> 赞同：0
> 
> 时间：2012-07-24T16:05:37.173
> 
> 标签：javascript, jquery

```
family = {
  'person1':[{"id":"1111","name":"adam", "sex":"male", "born":"USA"}],
  'person2':[{"id":"2222","name":"sarah", "sex":"female", "born":"Canada"}],
  'person3':[{"id":"3333","name":"adam", "sex":"male", "born":"USA"}]
}; 
```

鉴于上面的家庭对象，我如何提取具有特定 id（或名称）值的人员对象之一的所有属性（id、姓名、性别、出生）？例如 id=1111

所以理想情况下，我可以获得一个可以操作的新对象 personInQuestion，其中：

```
personInQuestion = {"id":"1111","name":"adam", "sex":"male", "born":"USA"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:10:40.503

循环遍历对象，并获取匹配的元素。

```
var search = 1111;

var personInQuestion = {};
for(var x in family){
    var item = family[x][0];
    if(item.id == search){
        personInQuestion = item;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:11:20.287

我不认为 jQuery 是最好的工具，相反我建议你看看[Backbone 库提供的 Where 方法](http://backbonejs.org/#Collection-where)。不知道会不会是矫枉过正。

用法是这样的：

```
var friends = new Backbone.Collection([
  {name: "Athos",      job: "Musketeer"},
  {name: "Porthos",    job: "Musketeer"},
  {name: "Aramis",     job: "Musketeer"},
  {name: "d'Artagnan", job: "Guard"},
]);

var musketeers = friends.where({job: "Musketeer"});

alert(musketeers.length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:12:31.810

jQuery 不为 JSON（JavaScript 对象）数据提供选择器，因此您需要遍历对象。例如：

```
result =  null;
$.each(family, function(i, v) {
  if (v.id === "1111" && v.name === "adam" ...) {
    result = v;
    return;
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T01:57:19.053

[这是 Rob Hruska建议](https://stackoverflow.com/questions/11634887/find-an-object-and-its-properties-within-a-larger-object-with-javascript-jquery#comment15410388_11634993)（在评论中）使用[Underscore](http://underscorejs.org/)的示例。

```
family = {
  'person1':[{"id":"1111","name":"adam", "sex":"male", "born":"USA"}],
  'person2':[{"id":"2222","name":"sarah", "sex":"female", "born":"Canada"}],
  'person3':[{"id":"3333","name":"adam", "sex":"male", "born":"USA"}]
};

var searchId = 1111;

var person = _.find(family, function(item) { return item[0].id == searchId; })[0]; 
```

# javascript - 什么是 <%= ... %>

> ID：11634889
> 
> 赞同：4
> 
> 时间：2012-07-24T16:05:40.640
> 
> 标签：javascript, html, backbone.js

**例如：**

```
<input id="wineId" name="id" type="text" value="<%= id %>" /> 
```

我知道它正在打印 JSON 字符串 id 属性的值（即 {id:100} ）。但是我没有找到任何关于它的文档，甚至我的 Google-Fu 也找不到它。 [这篇 SO 帖子](https://stackoverflow.com/questions/2201567/asp-net-what-is)假定它是一种 Microsoft`Response.write()`方法，但我在与 Microsoft 代码无关的上下文中发现它。

我正在阅读关于[主干](http://backbonejs.org/).js的一般信息，特别是[Christophe Coenraets 的这个由四部分组成的主干教程，](https://github.com/ccoenraets/backbone-cellar/tree/master/tutorial)特别是这个特定的[页面（第 4 行）](https://github.com/ccoenraets/backbone-cellar/blob/master/tutorial/final/tpl/wine-details.html)。

我已经在 html 和 javascript 文档下搜索了“developer.mozilla.org”站点来寻找它。我瞎了吗？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T16:08:35.457

这是一个 underscore.js 模板。它被主干使用。见： [http ://underscorejs.org/#template](http://underscorejs.org/#template)

# node.js - 如何在 windows node.js 上运行 Mocha 测试（错误：找不到模块 'C:\cygdrive\c\Users）

> ID：11634891
> 
> 赞同：12
> 
> 时间：2012-07-24T16:05:44.290
> 
> 标签：node.js, makefile, cygwin, mocha.js

我正在尝试在 Windows 中运行一个应用程序，这个应用程序有一些 mocha 测试。我需要制作。我读了这个

[摩卡需要制作。找不到适用于 Windows 的 make.exe](https://stackoverflow.com/questions/9779700/mocha-requires-make-cant-find-a-make-exe-that-works-on-windows)

还有这个

[Node.js 找不到模块 - 在 Windows 上干扰 cygwin](https://stackoverflow.com/questions/10093679/node-js-cannot-find-module-interfering-with-cygwin-on-windows)

我在 Github 目录（cygwin 目录结构之外）中有应用程序，并且我安装了 windows 版本的节点。

我尝试使用 powershell 并按照建议设置别名，但我总是得到

> ```
> > module.js:340
> >     throw err;
> >           ^ Error: Cannot find module 'C:\cygdrive\c\Users\Nicola\AppData\Roaming\npm\node_modules\mocha\bin\mocha'
> >     at Function.Module._resolveFilename (module.js:338:15)
> >     at Function.Module._load (module.js:280:25)
> >     at Module.runMain (module.js:487:10)
> >     at process.startup.processNextTick.process._tickCallback (node.js:244:9) Makefile:5: recipe for target `test' failed make: ***
> > [test] Error 1 
> ```

我在那个目录中安装了 mocha（顺便说一句，他为什么不在 node_modules 子目录中寻找 mocha？）。问题似乎是`C:\cygdrive\c\Users`我如何摆脱它的部分？

我还尝试将文件复制到 cygwin 下的 home/ 目录，但我得到了

```
./node_modules/.bin/mocha: line 1: ../mocha/bin/mocha: No such file or directory
Makefile:5: recipe for target `test' failed
make: *** [test] Error 127 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-06-22T15:54:47.137

我能够做到的最好方法是首先在目录中安装 mocha 作为开发依赖项（即：）`npm install mocha --save-dev`。然后在`npm test`命令里面`package.json`，使用`"test": "mocha"`. 这样，您可以轻松地`npm test`在 CLI 中运行以进行标准化。您现在可以在一个`test/`目录中设置您的测试，或者有一个简单的`test.js`文件，以防您只有几个测试要运行。另外，不要忘记有一个`mocha.opts`包含您的[选项](http://mochajs.org/#usage)的文件。这应该可以工作，特别是如果您使用的是 Git Bash（我在 windows CMD 上尝试过，它也可以工作！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-09T14:29:31.560

您可以在 package.json 文件中配置 npm test 命令以使用以下语法运行 mocha。

```
 "scripts": {
      "test": "node node_modules/mocha/bin/mocha --recursive"
  }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T18:47:56.010

您应该使用[msysgit](http://code.google.com/p/msysgit/) - 它带有 make。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-04T00:39:22.820

我的解决方案是运行命令`node ./node_modules/mocha/bin/mocha`

这是因为 mocha 不是 Windows 环境的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T22:33:32.803

当您编写“make test”并收到以下信息时：

```
./node_modules/.bin/mocha: line 1: ../mocha/bin/mocha: No such file or directory
Makefile:5: recipe for target `test' failed
make: *** [test] Error 127 
```

这意味着您的项目中没有安装 Mocha。将 mocha 放入您的 package.json 并运行“npm install”：

```
{
"name": "appName"
, "version": "0.0.1"
, "private": true
, "dependencies": {

  "mocha": "1.3.0"
, "should": "1.0.0"

}
} 
```

之后我让我的测试在 Windows 上运行。

# php - 显示某种撇号（目前显示为菱形）

> ID：11634892
> 
> 赞同：1
> 
> 时间：2012-07-24T16:05:45.153
> 
> 标签：php, html, character-encoding

我的数据库中的某些行包含各种撇号，当使用 PHP 显示时，它会转换为中心带有问号的菱形。例如，如果它正确复制：`Captain Jim O’Brien`

这些“撇号”很可能是通过 TinyMCE 插入的，用户从 Word 或 Mac 计算机中复制和粘贴。

如何显示这些“撇号”？当我在 PHPMyAdmin 中查看该行时，会显示撇号（没有菱形），所以显然有一种方法。

我的字符编码设置为 UTF-8，我试过`htmlspecialchars($string)`and `htmlentities($string)`，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:10:11.733

字符在不同的地方编码。

MySQL 具有特定的字符编码。默认情况下，它*不是*UTF-8，而是 latin1。

您使用 PHP 生成的 HTML 文档还指定了特定的字符编码。最后，HTML 文档中的实际字节实际上假定了特定的字符编码，如果您不小心，它可能与您为文档指定的字符编码不同。

第一步，确认您的 MySQL 编码设置为 UTF-8。请注意，MySQL 可以在每个表甚至每个列的基础上覆盖数据库的默认字符编码。

您可能对这篇相关文章感兴趣，以更深入地了解字符编码

[字符编码和问题](https://stackoverflow.com/q/8421316/141172)

**更新**

首先将数据放入 MySQL 数据库。也许那个“东西”没有使用 UTF-8 编码。

# c++ - 内存重新分配 - 保留我的数据

> ID：11634893
> 
> 赞同：4
> 
> 时间：2012-07-24T16:05:47.757
> 
> 标签：c++, memory-management

`malloc`假设我在堆中有一些数组由or构造无关紧要`new`。我需要最有效的方法来放大它。我的意思是，如果它有足够的空闲空间位于已经分配的数据之后，我可以保持我的数据不受影响。是否可以在 C++ 中维护？

`realloc`以这种方式工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:08:17.830

是的，`realloc`就是你要找的。请注意，它不适用于`new`，您必须使用`malloc`（或者说，`calloc`）。此外，有时扩展内存是不可能的，所以`realloc`会尝试为你做，但如果它不能 - 它会求助于分配新内存，将你的内容复制到新位置并释放旧内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:08:24.950

是的，[realloc](http://www.cplusplus.com/reference/clibrary/cstdlib/realloc/)就是这样工作的，尽管链接说不能保证，但我认为这是针对内存碎片化并且没有足够空间就地扩展内存块的情况。

# python - 使用PyWin32创建windows服务，但无法在%LOCALAPPDATA%创建文件

> ID：11634896
> 
> 赞同：2
> 
> 时间：2012-07-24T16:05:52.030
> 
> 标签：python, windows, windows-services, pywin32

我已经通过 pywin32 构建了一个 Windows 服务应用程序。而且我无法在目录“%LOCALAPPDATA%”中创建任何文件或目录。我认为导致这个问题的原因可能是我的应用程序没有足够的权限来创建文件，但我不太确定。我是 Windows 编程的初学者。我怎么解决这个问题？

这是我的代码：

```
import traceback
import os
import sys

import win32serviceutil
import win32security
import win32api
import win32service
import win32event
import win32file

class newsLauncher(win32serviceutil.ServiceFramework):

    _svc_name_ = 'Test_service'
    _svc_display_name_ = 'Test for service'

    def __init__(self, *args):
        win32serviceutil.ServiceFramework.__init__(self, *args)
        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)

    def log(self, msg):
        import servicemanager
        servicemanager.LogInfoMsg(str(msg))
        def sleep(self, sec):
            win32api.Sleep(sec*1000, True)

    def SvcDoRun(self):
        self.ReportServiceStatus(win32service.SERVICE_START_PENDING)
        try:
            cwd = os.path.join(os.environ['LOCALAPPDATA'], "test_service")
            os.mkdir(cwd)
            os.chdir(cwd)

            open("test.log", 'w').write("success create file.")

            self.ReportServiceStatus(win32service.SERVICE_RUNNING)

            win32event.WaitForSingleObject(self.hWaitStop, win32event.INFINITE)
            self.ReportServiceStatus(win32service.SERVICE_STOPPED)
        except Exception as e:
            self.log('Exception: %s' % e)
            self.log('line %d' % traceback.tb_lineno(sys.exc_info()[2]))
            self.SvcStop()
            self.ReportServiceStatus(win32service.SERVICE_STOPPED)

    def SvcStop(self):
        self.log("in stop")

        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)

        win32event.SetEvent(self.hWaitStop)
        self.log("stoped")

if __name__ == '__main__':
    win32serviceutil.HandleCommandLine(newsLauncher) 
```

# networking - TURN server XOR-RELAYED-ADDRESS IP 不同于自己的公网IP

> ID：11634898
> 
> 赞同：2
> 
> 时间：2012-07-24T16:05:51.997
> 
> 标签：networking, nat-traversal, stun

假设我正在运行一个绑定到公共 IP（比如 100.0.0.1）的 TURN 服务器。当服务器为创建分配请求创建中继端口时，服务器是否会在 XOR-RELAYED-地址属性？我对网络不够熟悉，无法了解所有可能的情况，并且[RFC 5766](https://www.rfc-editor.org/rfc/rfc5766#section-6.2)并没有真正说明任何具体内容（据我所知）。

换句话说，XOR-RELAYED-ADDRESS 中的 IP 地址是多余的吗？在我考虑的所有情况下，客户端只需要知道分配的端口，并且可以完全忽略 XOR-RELAYED-ADDRESS 的 IP。只要客户端知道中继端口，它就可以始终在中继端口将中继数据发送到 TURN 服务器公共 IP（它已经知道 IP，因为它必须最初连接......）。

任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:38:45.263

如果您的服务器不在 NAT 后面（在分配有公共 IP 地址的公共 Internet 上），那么 XOR-RELAYED-ADDRESS 中返回的 IP 地址将是相同的。（它将始终与分配给其 NIC 的 IP 地址相同）。

我认为您考虑忽略 XOR-RELAYED-ADDRESS 的原因与您提出的其他问题有关，表明 TURN 服务器实际上将位于 NAT/防火墙后面。我想您会发现 IP 地址是可预测的。但是您的服务器所在的防火墙/NAT 可能会弄乱端口分配。确保您了解 TURN 服务器如何进行端口分配，并且您的防火墙正确地进行端口转发。

一点命名说明。您的服务器没有“绑定”到公共或私有 IP。您的服务器套接字绑定到一个分配有 IP 地址并与之关联的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:19:19.187

实际上，你们都忽略了 TURN 服务器上中继 IP 地址与侦听 IP 地址不同的情况。TURN 服务器可能正在监听地址 1.2.3.4，但它可能在其他两个公共地址上分配中继端点 - 例如 2.3.4.5 和 3.4.5.6。返回的真实中继IP地址`XOR-RELAYED-ADDRESS`可能与监听地址有很大不同。

# networking - 计算 MBPS - 平均值

> ID：11634902
> 
> 赞同：0
> 
> 时间：2012-07-24T16:06:00.250
> 
> 标签：networking, usage-statistics

我从[http://www.gridsouth.com/services/colocation/basics/bandwidth](http://www.gridsouth.com/services/colocation/basics/bandwidth)找到了以下计算 我不知道他们是如何得出最终数字 1.395 mbps 的。您能帮我解决以下示例中使用的公式吗？

**如果您的网络提供商按平均使用量向您收费，假设他们在一个月内对您的 MBPS 使用量进行了 100 次采样（通常更像是每 5 分钟一次），并且在这些样本中，您的网络使用量测量如下：20 次：0.1 MBPS、30 倍 0.1.5 MBPS、30 倍 1.8 MBPS、15 倍 1.9 MBPS 和 5 倍 2 MBPS。如果您对所有这些样本进行平均，您将按合同中 1.395 MBPS 带宽的价格收取费用。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:21:54.080

`(20*0.1 + 30*1.5 + ... + 5*2)/100 = 1.395`

看起来像（加权）平均值的标准定义......

# windows - 如何硬关闭 Winsock UDP 套接字？

> ID：11634904
> 
> 赞同：1
> 
> 时间：2012-07-24T16:06:05.060
> 
> 标签：windows, sockets, udp

我需要立即关闭未发送数据的 UDP 套接字。TCP 套接字有 SO_LINGER 参数，但我没有找到任何关于 UDP 的信息。它在 Windows 上。

提前致谢。

**更新0：**

我给出了这个问题的背景。我有应用程序第一个线程打开/绑定/关闭套接字，第二个线程向它发送数据报。在某些情况下，关闭套接字 (errorcode = 0) 后，bind 函数会返回错误代码 10048“地址已在使用中”。我发现 close() 执行端口后仍然使用（通过 netstat 命令）。也许我问了不正确的问题，而这种行为的原因是别的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:23:59.870

出于所有申请目的，一旦您`send()`返回，该数据包将被“发送”。没有像 TCP 那样的发送缓冲区，而且您无法控制 NIC 数据包队列。正常`close()`就是你所需要的。

### 编辑0：

@EJP，这是来自 UNP 的引述（第 2.11 节“UDP 输出”）：

> 这一次，我们将套接字发送缓冲区显示为虚线框，因为它实际上并不存在。一个 UDP 套接字有一个发送缓冲区大小（我们可以用 `SO_SNDBUF`套接字选项改变它，第 7.5 节），但这只是可以写入套接字的最大 UDP 数据报的上限。如果应用程序写入的数据报大于套接字发送缓冲区大小，`EMSGSIZE`则返回。由于 UDP 不可靠，它不需要 tp 保留应用程序数据的副本，也不需要实际的发送缓冲区。（应用程序数据通常在向下传递协议栈时被复制到某种形式的内核缓冲区中，但在数据传输后，该副本会被数据链路层丢弃。）

这就是我在回答中的意思-您无法控制发送缓冲区-，因此“出于所有应用程序目的”它不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T20:41:49.267

我在 Windows UDP 套接字上也遇到了这个问题。经过数小时的尝试，我终于发现我的问题是我`socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)`在主线程上调用以创建套接字，在工作线程上调用`bind(...)`和`recvfrom()`，然后在关闭工作线程后我`closesocket(...)`在主线程上调用。没有一个函数返回错误，但出于某种原因，这样做会使 UDP 地址/端口组合处于使用状态（因此将来对 bind() 的调用会触发错误 10048 WSAEADDRINUSE 并且`netstat -abot -p UDP`还会显示端口仍在使用中，直到整个应用程序关闭）。解决方案是移动`socket(...)`并`closesocket(...)`调用工作线程。

除了上述情况的奇怪问题外，通常情况下，UDP 服务器套接字在调用它后无法保持打开状态`closesocket()`。 [微软解释说](http://msdn.microsoft.com/en-us/library/aa916134.aspx)，没有与 UDP 套接字保持连接，也不需要调用`shutdown()`或任何其他函数。通常 TCP 套接字在调用后保持打开状态的原因`closesocket()`是它没有正常断开连接，并且它在 TCP_WAIT 状态下等待大约 4 分钟，以便在实际关闭之前可能有额外的数据进入。在上述情况下，netstat 显示 UDP 套接字在应用程序关闭之前从未关闭，即使我等待了 30 多分钟。

如果您使用 .NET 框架之类的 winsock 包装器，我还阅读了一些功能，例如设置异步回调可以使 UDP 套接字绑定打开，如果您没有正确清理回调，但我没有认为win32 winsock API中有任何可能导致这种情况的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:28:16.610

关闭它。与 TCP 不同，UDP 中没有任何内容表明将发送待处理的数据。

# matlab - Matlab：逐个元素选择没有循环

> ID：11634908
> 
> 赞同：0
> 
> 时间：2012-07-24T16:06:10.243
> 
> 标签：matlab, selection, element, nested-loops

我有一个大矩阵，例如 3000X300。我需要选择每个元素并用它做几个计算。我研究过使用数组 fun 函数，但因为我的程序的输出不是一个值，所以这是不可能的。它现在与循环一起工作正常，但它必须更快地执行，所以我想删除 for 循环。

也许我会尝试更具体一点：大矩阵的每个值都必须给我一个大小为 4X6020 的 4 个不同矩阵的答案。

所以我不知道这是否有可能使这个矢量化......也许有人有其他建议可以让它更快？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:07:45.943

您可以使用`arrayfun`并设置`uniformoutput`为`false`. 见[这里](http://www.mathworks.com/help/techdoc/ref/arrayfun.html)。

# java - 带有 jwsc/jws 任务的 Java 5 兼容类

> ID：11634912
> 
> 赞同：0
> 
> 时间：2012-07-24T16:06:31.580
> 
> 标签：java, web-services, ant, weblogic, jax-rpc

我们正在使用 target="5" 编译所有 jar，以便类文件与仍在运行 JDK5 的旧服务器保持兼容。不幸的是，jwsc 编译的 web 服务采用了默认的 java 版本，在本例中为 6。

```
 <jwsc   srcdir="${src.dir}" destdir="${dist.dir}" classpathref="project.class.path" debug="true">
        <jws file="org/foo/MainWebServiceImpl.java"
            compiledWsdl="../FooClient/gen-compiled-wsdl/${wsdl.foo.filebasename}_wsdl.jar" />
    </jwsc> 
```

我在 jwsc 和 jws 中都没有“目标”属性，并且子元素似乎没有帮助。我怎样才能得到这个任务来编译 Java 5 兼容的类？

我目前让 jenkins 服务器编译代码，但我讨厌必须提交未经测试的代码才能部署和测试它。

# sql-server - AppHarbor 中支持的 SQL Server CLR 函数？

> ID：11634927
> 
> 赞同：1
> 
> 时间：2012-07-24T16:06:59.647
> 
> 标签：sql-server, appharbor

我想我知道答案是否定的，但想确认一下：

**AppHarbor 的共享 SQL Server 环境是否支持[CLR 函数？](http://msdn.microsoft.com/en-us/library/ms189524.aspx)**

*这个问题来自[另一个问题的建议解决方案](https://stackoverflow.com/questions/11634129/best-practices-for-storing-user-time-zone-tsql-net#comment15409756_11634129)。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:04:47.273

共享 SQL 引擎（yocto、nano）不支持 CLR。Appharbor 建议您“[将相关逻辑移动到您的应用程序代码](http://support.appharbor.com/discussions/problems/2181-clr-integration-for-sql-server)中”，我倾向于同意。

您可以*通过*Appharbor在 Amazon EC2 上获取[专用的 MSSQL实例；](https://appharbor.com/applications/haystack/addons/dedicatedsqlserver)这可能允许您启用 CLR。

# ruby - 使用 Test::Unit::Autorunner，“assert_true”没有方法错误

> ID：11634930
> 
> 赞同：2
> 
> 时间：2012-07-24T16:07:09.647
> 
> 标签：ruby, unit-testing, selenium, testunit, selenium-webdriver

NoMethodError：未定义的方法“assert_true”用于#

这对我所有的断言都是一样的。测试运行但无法断言。

无法断言的示例测试

```
 class Cwy001 < Test::Unit::TestCase
      def testCWY001
        $base_url = "http://foo.foo.com/"
        $patience = 5
        $user = User.new
        nav = Nav.new
        calendar_m_view = Calendar_m_view.new
        $user.loadUser("Selenium Robot10") #Event Scheduler in the Selenium Users group 
        nav.changeWg("Selenium Users Group")
        nav.goToCalendar
        assert_true(calendar_m_view.add(6)) #make sure that This user can add events to the calendar
        $driver.quit
      end
    end 
```

测试本身运行得很好，但是一旦使用自动运行程序运行它就会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:55:23.867

`assert_true`在更高版本的测试单元中添加。也许你有一个旧版本。

根据 ruby​​ 的版本，您需要额外的

```
gem 'test-unit' 
```

没有你没有得到 gem，从你的 ruby​​ 安装中咬测试套件（minitest？）。

# .net-4.0 - ASP.Net 对虚拟目录使用错误的 web.config

> ID：11634939
> 
> 赞同：4
> 
> 时间：2012-07-24T16:07:47.753
> 
> 标签：.net-4.0, web-config, iis-6, .net-2.0, virtual-directory

我们在 Windows Server 2003 R2 上运行 IIS 6。

我们希望将在 .NET 4.0 下运行的虚拟目录添加到在 .NET 2.0 下运行的站点。我们已经为虚拟目录提供了自己的应用程序池，并且我们已经将虚拟目录配置为在 4.0 下运行。

父站点工作正常，但虚拟目录会引发引用父站点的 web.config 文件的错误。我们需要虚拟目录使用它自己的 web.config 文件。

IIS 管理器中的 GUI 显示虚拟目录正在使用它自己的 web.config 文件，但我们收到的错误消息是指父 web.config 文件中的项目。

我不知道如何解决这个问题。到目前为止，我最好的线索来自另一个网站上的帖子说可以通过以下方式解决问题：

```
<location path="." inheritInChildApplications="false">
</location> 
```

同样，我不确定这会解决问题，而且我不确定如何确定将其放置在何处或应该包含什么。父站点建立在 CMS 系统之上，其 web.config 文件相当复杂。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:16:23.787

我得到了这个工作，所以我想把答案留给下一个人。

我在问题中提到的位置标签起到了作用。我通过使用它们来包含 system.web 部分来让它们工作：

```
<location path="." inheritInChildApplications="false">
  <system.web>
    .
    .
   (the stuff that made the site in the virtual directory break)
    .
    .
  </system.web>
 </location> 
```

# java - Android Multicast 仅使用 255.255.255.255 地址工作

> ID：11634942
> 
> 赞同：3
> 
> 时间：2012-07-24T16:07:51.307
> 
> 标签：java, android, sockets, network-programming, multicast

我尝试使用端口 5500 将多播主机设置为 230.0.0.1。然后，在另一边，我说在端口 5500 加入组 230.0.0.1。它加入并接收数据包几秒钟。然后它突然停止了。如果我使用 255.255.255.255 它会正常接收数据包。为什么会这样？多播发送方的代码如下：

```
private class StatusBroadcasterThread extends Thread
{

    private static final boolean DEBUG = App.DEBUG;
    private static final String TAG = "StatusBroadcasterThread";

    private DatagramSocket broadcastSocket;

    public StatusBroadcasterThread(int port) throws SocketException {

        broadcastSocket = new DatagramSocket(port);

        this.start();
    }

    @Override
    public void run() {

        while (!this.isInterrupted()) {

            try {

                byte[] buffer = status.toString().getBytes(); 

                DatagramPacket packet = new DatagramPacket(buffer, buffer.length, InetAddress.getByName(App.Config.multicastAddress),
                        App.Config.multicastPort);

                broadcastSocket.send(packet);

                if (DEBUG)                      
                    Log.d(TAG, "Sent: " + new String(packet.getData()));

            } catch (IOException e) {

                Log.e(TAG, "Error: " + e.getMessage());
            }

            try {
                sleep(App.Config.broadcastInterval);
            } catch (InterruptedException ex) {
            }
        }
    }
} 
```

接收线程：

```
private class ReceiverThread extends Thread
{

    private static final String TAG = ComMessageReceiver.TAG + "Thread";

    private WifiManager wifiManager;
    private MulticastSocket multicastSocket;
    private InetSocketAddress groupInetSocketAddress;
    private boolean joinedGroup = false;

    public ReceiverThread(String group, int port, int timeout) throws IOException {

        super();

        wifiManager = (WifiManager) App.context.getSystemService(Context.WIFI_SERVICE);
        groupInetSocketAddress = new InetSocketAddress(InetAddress.getByName(group), port);
        multicastSocket = new MulticastSocket(port);
        multicastSocket.setSoTimeout(timeout);

    }

    public ReceiverThread() throws IOException {

        this(Config.multicastAddress, Config.multicastPort, DEFAULT_TIMEOUT);
    }

    @Override
    public void run() {

        Log.d(TAG, "started");

        while (!this.isInterrupted()) {

            if (wifiManager.getWifiState() == WifiManager.WIFI_STATE_ENABLED) {

                if (!joinedGroup) {

                    try {

                        multicastSocket.joinGroup(groupInetSocketAddress,
                                NetworkInterface.getByInetAddress(getWifiInetAddress()));

                        wifiManager.createWifiLock(WifiManager.WIFI_MODE_FULL, TAG);
                        wifiManager.createMulticastLock(TAG).acquire();

                        joinedGroup = true;

                    } catch (IOException ex) {

                        Log.e(TAG, "Failed to join Multicast group: " + ex.getMessage());
                    }
                }

                try {

                    byte[] buffer = new byte[256];

                    DatagramPacket packet = new DatagramPacket(buffer, buffer.length);

                    multicastSocket.receive(packet);

                    Message message = new Message(packet);

                    Log.d(TAG, "message from " + message.getIp() + " " + message.getMsg());

                    for (MessageListener listener : listenerList)
                        listener.onMessageReceived(message);

                } catch (SocketTimeoutException ex) {

                    Log.e(TAG, "Timed out: " + ex.getMessage());

                } catch (IOException ex) {

                    Log.e(TAG, ex.getMessage());
                }
            } else
                joinedGroup = false;
        }
    }

    InetAddress getWifiInetAddress() throws UnknownHostException {

        ByteBuffer wifiRawAddress = ByteBuffer.allocate(4);
        wifiRawAddress.order(ByteOrder.LITTLE_ENDIAN).putInt(wifiManager.getConnectionInfo().getIpAddress());

        return InetAddress.getByAddress(wifiRawAddress.array());
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:24:03.787

**1.** `255.255.255.255`不是**多**播**地址**，而是**广播地址。**

**2.**请检查您是否在通信完成时**正确关闭了套接字。**

请参阅下面的**所有组播地址列表............**

```
224.0.0.0   Base address (reserved)
224.0.0.1   The All Hosts multicast group addresses all hosts on the same network segment.
224.0.0.2   The All Routers multicast group addresses all routers on the same network segment.
224.0.0.4   This address is used in the Distance Vector Multicast Routing Protocol (DVMRP) to address multicast routers.
224.0.0.5   The Open Shortest Path First (OSPF) All OSPF Routers address is used to send Hello packets to all OSPF routers on a network segment.
224.0.0.6   The OSPF All D Routers address is used to send OSPF routing information to designated routers on a network segment.
224.0.0.9   The Routing Information Protocol (RIP) version 2 group address is used to send routing information to all RIP2-aware routers on a network segment.
224.0.0.10  The Enhanced Interior Gateway Routing Protocol (EIGRP) group address is used to send routing information to all EIGRP routers on a network segment.
224.0.0.13  Protocol Independent Multicast (PIM) Version 2
224.0.0.18  Virtual Router Redundancy Protocol (VRRP)
224.0.0.19 - 21     IS-IS over IP
224.0.0.22  Internet Group Management Protocol (IGMP) Version 3
224.0.0.102     Hot Standby Router Protocol version 2 (HSRPv2) / Gateway Load Balancing Protocol (GLBP)
224.0.0.107     Precision Time Protocol version 2 peer delay measurement messaging
224.0.0.251     Multicast DNS (mDNS) address
224.0.0.252     Link-local Multicast Name Resolution (LLMNR) address
224.0.1.1   Network Time Protocol clients listen on this address for protocol messages when operating in multicast mode.
224.0.1.39  The Cisco multicast router AUTO-RP-ANNOUNCE address is used by RP mapping agents to listen for candidate announcements.
224.0.1.40  The Cisco multicast router AUTO-RP-DISCOVERY address is the destination address for messages from the RP mapping agent to discover candidates.
224.0.1.41  H.323 Gatekeeper discovery address
224.0.1.129 - 132   Precision Time Protocol version 1 time announcements
224.0.1.129     Precision Time Protocol version 2 time announcements 
```

# c# - 如何录制音频并播放c#

> ID：11634943
> 
> 赞同：0
> 
> 时间：2012-07-24T16:07:52.750
> 
> 标签：c#, audio, record

我需要这个窗口来录制来自麦克风的音频：xaml：

```
<Window x:Class="Mesius_Leitner_Professional.Record"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Record" Height="308" Width="378">
    <Grid>
        <Button Content="start" Height="23" HorizontalAlignment="Left" Margin="43,132,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
        <Button Content="stop'n save" IsEnabled="False" Height="23" HorizontalAlignment="Right" Margin="0,132,157,0" Name="button2" VerticalAlignment="Top" Width="75" />
        <Button Content="play" Height="23" IsEnabled="false" HorizontalAlignment="Left" Margin="205,132,0,0" Name="button3" VerticalAlignment="Top" Width="75" />
    </Grid>
</Window> 
```

以及背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace Mesius_Leitner_Professional
{
    /// <summary>
    /// Interaction logic for Record.xaml
    /// </summary>
    public partial class Record : Window
    {
        public Record()
        {
            InitializeComponent();
        }
    }
} 
```

是否有任何标准库或一些额外的类我可以使用一个简单的命令来录制音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:11:50.563

你可以使用 winmm.dll

```
[DllImport("winmm.dll", EntryPoint = "mciSendStringA", CharSet = CharSet.Ansi, SetLastError = true, ExactSpelling = true)]
    private static extern int mciSendString(string lpstrCommand, string lpstrReturnString, int uReturnLength, int hwndCallback);

mciSendString("open new Type waveaudio Alias recsound", "", 0, 0);
        mciSendString("record recsound", "", 0, 0);

string Resualt = @"...\Desktop\Test\test.wav";

        mciSendString("save recsound " + Resualt, "", 0, 0);
        mciSendString("close recsound ", "", 0, 0); 
```

我希望它可以帮助你

# opencv - 带有 cvqueryframe 的 cvReleaseImage

> ID：11634946
> 
> 赞同：1
> 
> 时间：2012-07-24T16:08:11.247
> 
> 标签：opencv

我正在从 avi 视频中抓取一帧。

```
img1 = cvQueryFrame( capture );   
cvReleaseImage( &img1 ); 
```

当我尝试释放抓取的帧 img1 时，我得到

```
"An unhandled exception of type 'System.Runtime.InteropServices.SEHException' occurred in " 
```

如何释放分配给 img1 的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:48:16.257

你不！不允许用户释放内存。见[这里](http://opencv.willowgarage.com/documentation/c/highgui_reading_and_writing_images_and_video.html#cvQueryFrame)。此外，img1 可能为 NULL。所以，你应该在使用它之前检查它是否是一个有效的图像。

# javascript - Sencha Touch - 听众和事件委托 - 他们会融合吗？

> ID：11634948
> 
> 赞同：1
> 
> 时间：2012-07-24T16:08:16.433
> 
> 标签：javascript, extjs, sencha-touch

我最近开始在一个项目中使用 Sencha Touch，虽然我使用 ExtJS 有一段时间了，但两者在很多方面都不同。为了使学习曲线复杂化，我将 ST 应用为更多的底层框架，而不是整个 UI/框架/做所有事情。因此，我遇到了一种情况，我想使用数组方法为元素设置侦听器，同时还想保持对诸如“绘制”之类的事件的使用。

这是一个例子 - 我 99% 的肯定有一个更好的方法来做我想做的事情：

```
Ext.create('Ext.Container', {
    html: '<ul><li id="blah">Blah</li><li id="hooey">Hooey</li></ul>',
    listeners: [{
        element: 'element',
        delegate: 'li#blah',
        event: 'tap',
        fn: function() { /* do something for blah */ }
    },{ 
        /* repeat for hooey, etc */
    }]
}); 
```

另一方面，如果我想要容器上的标准监听器怎么办？

```
Ext.create('Ext.Container', {
    listeners: {
        activate: function() {
            // do some stuff here
        }
    }
 }); 
```

我想知道在同一个组件上执行这些操作的最佳实践，而不是说必须执行激活侦听器，然后将元素点击事件处理程序应用于激活/显示/绘制/whathaveyou 上的组件。

注意：使用 extjs 进行标记，因为我**认为**它也适用于那里 - 如果没有，请随时编辑或让我知道，我会拉标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:21:11.577

一般来说，你不应该从另一个组件中弄乱组件的元素，想象它们就像私有属性（组件的渲染 html 可以改变所以不要依赖它），你的第一个示例中的代码看起来不太好，我没有'甚至不知道这可以工作。您应该实现组件事件以导出到外部世界。

在某些特定情况下，您可以通过 getEl()、getScrollerEl() 等方法导出元素。但大多数情况下，这表明您做错了。

PS Binding 元素事件侦听器在文档中的[Ext.dom.Element](http://docs.sencha.com/touch/2-0/#!/api/Ext.mixin.Observable-method-addListener)中进行了描述。

# eclipse - 在 Eclipse 中调用开放资源对话框

> ID：11634951
> 
> 赞同：0
> 
> 时间：2012-07-24T16:08:22.780
> 
> 标签：eclipse

在我的 Eclipse 插件中，当我在树上执行操作时，必须以与按下 Ctrl+Shift+R 时完全相同的方式打开工作区中的资源（因为资源名称将显示在树上）。我通过一个动作以编程方式调用了 OpenResourceDialog。

当我导出插件并将其导入 Eclipse 时，插件未正确安装。当我从 plugin.xml 中删除依赖项 org.eclipse.ui.ide 时，插件安装正确。我们是否允许在自定义插件中使用 org.eclipse.ui.ide？如果是这样，在 org.eclipse.ui.ide 插件中调用 OpenResourceDialog 是否不正确。

# vba - 以编程方式在 VBA 代码中设置断点

> ID：11634957
> 
> 赞同：9
> 
> 时间：2012-07-24T16:08:52.123
> 
> 标签：vba, excel, breakpoints

我有一大段用 VBA 编写的代码（> 50,000 行 - 许多模块）。我对一个数组感兴趣，我想找出这个数组的任何元素的值发生变化的所有条件。这些值可以在任何模块中更改。由于代码的大小，逐行运行脚本并不是最有效的选择。

我正在寻找更好的方法来解决这个问题。我想到的两种方法是以编程方式设置断点（我不确定是否可以完成）或以编程方式在每次赋值后插入一个 if 块，以某种方式提醒我值已更改。（不是首选）。

所以我的问题归结为：

1.  是否可以在 VBA 代码中以编程方式设置断点？
2.  如果上述问题的答案是**否定**的，那么解决这个问题的有效方法是什么？

**更新：** 感谢您的评论/回复。正如我所暗示的，我对当前代码的最少修改（即插入 if 块等）感兴趣，并且对断点的想法最感兴趣。我想知道它是否可行。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T16:11:25.397

`STOP`如果某个条件为真，则使用关键字来中断代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-07-16T15:01:15.040

**有两种方法可以做到这一点：**

1.  使用停止关键字。示例如下，在 Stop 处设置断点

    ```
     if (x = 21 ) Then
       Stop
      End If 
    ```

2.  使用添加手表 [![在此处输入图像描述](../Images/f23bb5fee5e4c394969f86af962f6093.png)](https://i.stack.imgur.com/TofTW.png)

    [![转到调试-> 选择添加监视](../Images/438e7aabf5835f5663f90818b6587195.png)](https://i.stack.imgur.com/JeX8h.png)

    转到调试-> 选择添加监视

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-21T16:21:46.947

注意：我知道这是一个老话题，但这可以帮助其他人。

你可以使用手表：

右键单击要监视的变量-> 添加监视...在监视类型中：“值更改时中断”

运行代码时，您可以通过 Watch Window（可从“查看”菜单访问）检查手表的状态

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:26:02.733

希望有人能从中受益：在这种情况下，无论使用哪种编程语言 - 在 Perl、AWK 甚至 shell 脚本中编写几行代码都可以解决问题：搜索包含数组名称的正则表达式（忽略案子）。将工作簿中的所有模块和类导出到给定目录后 - 脚本可以为您搜索这些。

# c# - 角色定义访问和动态角色定义

> ID：11634958
> 
> 赞同：0
> 
> 时间：2012-07-24T16:08:58.583
> 
> 标签：c#, asp.net, .net, web-applications, asp.net-membership

我正在我的网络应用程序中实现角色定义的访问系统，在`web.config`文件中定义授权，例如：

```
<location path="myPage.aspx">
    <system.web>
        <authorization>
            <allow roles="MY_ROLE" />
            <deny roles="*" />
        </authorization>
    </system.web>
</location> 
```

在`myPage.aspx`我使用了很多`if`s 来定义每个角色的部分可见性。

我的角色结构是静态的，所以我不应该对这个实现有特别的问题，但是如果我的角色是动态定义的并且有人可以随时添加或删除角色怎么办？

我的实现不正确吗？我是这个问题的新手，所以我想知道是否有一种通用的方法来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:41:19.003

我实现基于角色的动态可见性的一种方法是对我使用的服务器控件进行子类化，并创建为自己分配角色的自定义控件（TextBox、Label、PlaceHolder、Panel 等）。当页面呈现时，这些控件检查他们的角色与登录用户的角色，并且基于该检查是否可见。

每个控件都有一个默认角色设置，因此不必为每个控件提供信息，除非它的角色与默认值不同，当然。

这种方法确实使我的代码隐藏文件变得不那么混乱。而且很容易维护。

# ios - pushViewController 似乎不适用于情节提要和 QLPreviewController

> ID：11634960
> 
> 赞同：0
> 
> 时间：2012-07-24T16:09:07.067
> 
> 标签：ios, storyboard, qlpreviewcontroller

尝试使用情节提要 tableviewcontroller 实现动态表（使用代码）时，执行以下代码时无法推送详细视图。

```
[[self navigationController] pushViewController:previewController animated:YES]; 
```

没有错误被抛出。没有给出任何线索，除了选定的表格单元格以蓝色突出显示并保持不变。该问题在使用情节提要时很普遍，但在使用 xibs 时则不然。

这是`didSelectRowAtIndexPath`方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    QLPreviewController *previewController = [[QLPreviewController alloc] init];
    previewController.dataSource = self;
    previewController.delegate = self;

    // start previewing the document at the current section index
    previewController.currentPreviewItemIndex = indexPath.row;

    [[self navigationController] pushViewController:previewController animated:YES];
    [previewController release];
} 
```

这是一个[有问题的示例项目](https://docs.google.com/open?id=0B0Ln8RmxiatmWU5aNFBoczBRM1U)的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:22:23.600

您的 QLPreviewController 没有被推送，因为 [self navigationController] 为 nil。

您必须像这样将 UINavigationController 添加到情节提要中：

（假设FirstViewController是你的UITableViewController）![](../Images/d9109c3740eab32707636eab8f11edec.png) 从左到右：UITabBarController、UINavigationController、FirstViewController

# iphone - mapkit 覆盖是只读的，如何删除它们或刷新整个地图视图？

> ID：11634965
> 
> 赞同：0
> 
> 时间：2012-07-24T16:09:36.847
> 
> 标签：iphone, mkmapview, mapkit, mkoverlay

在线删除叠加层和刷新地图视图的解决方案完全没有任何作用。我确信我已经正确设置了所有代表并且一切都连接好了。寻找创造性的方法来解决这个问题。我打算做的是仅显示新目的地坐标的“方向”（折线），而不是旧目的地。但是一旦它们被添加，它们似乎无法删除......

```
 [mapView removeOverlays:[mapView overlays]]; 
```

和

```
 [mapView setNeedsDisplay]; 
```

两者都不做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:26:52.190

你确定没有其他问题吗？删除覆盖的方法效果很好，我一直这样使用它：

```
if (_directionsOverlay != nil) {
    [self.mapView removeOverlay:_directionsOverlay];
    _directionsOverlay = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:40:29.757

确保调用在 UI 线程上运行。

# mysql - MySQL Query 2 表不相关列

> ID：11634969
> 
> 赞同：0
> 
> 时间：2012-07-24T16:09:48.973
> 
> 标签：mysql, join

我想查询 2 个表。

以下是表结构：

**常问问题**

```
faq_id | member_id | answer 
```

**工人**

```
id | faq_id | owner1 | owner2 
```

我在这里尝试做的是：

```
SELECT faqs.*, workbasket.* FROM faqs 
INNER JOIN workbasket 
WHERE faqs.member_id = 1
AND workbasekt.owner1 = 1 OR workbasekt.owner2 = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:16:37.847

像这样的东西？

```
SELECT FAQ.*, workers.* FROM FAQ INNER JOIN workers on FAQ.faq_id = workers.faq_id
WHERE FAQ.member_id = 1 AND (workers.owner1 = 1 OR workers.owner2 = 1) 
```

您需要更具描述性并解释您想要返回哪些列、您想要从哪些表中获取信息，以及这些表应该如何连接在一起。

# objective-c - 编译错误：找不到协议声明

> ID：11634972
> 
> 赞同：0
> 
> 时间：2012-07-24T16:09:57.740
> 
> 标签：objective-c, xcode

我正在尝试从一本书中学习 Objective-C，并在尝试在 Xcode 中进行练习时遇到了以下错误（箭头表示问题的地方）。

```
#import <UIKit/UIKit.h>
#import "FlashCard.h"
#import "CreateCardViewController.h"

--> @interface FlashCardsViewController : UIViewController <CreateCardDelegate> { 
```

上面的代码导致错误：“找不到'CreateCardDelegate'的协议声明。但我正在导入我声明的“CreateCardViewController.h”：@property (nonatomic, assign) id cardDelegate; 所以不知道是什么问题是...

浏览了一些帖子后，我怀疑这可能是由于循环 #import 依赖关系？但如果是这种情况，那么我不确定如何纠正这个错误。如果您有任何建议，请解释并记住我是 Objective-c 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:20:05.750

你没有正确定义

```
@protocol CreateCardDelegate
  ....
@end 
```

在你的`CreateCardViewController.h`文件中。请查看该定义并发布相关代码以获得更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:21:12.913

您需要在某处声明 CreateCardDelegate 协议。这是协议声明的示例（在 .h 文件中）。

```
@protocol MyClassDelegate <NSObject>

- (void)myClass:(MyClass *)myClass someEventOccured:(NSInteger)value;
- (void)myClass:(MyClass *)myClass someOtherEventOccured:(NSInteger)value;

@end 
```

在您的情况下，您需要`@protocol CreateCardDelegate`在这些头文件中有一个位置并将其导入到您的 .m 文件中。你？

# sencha-touch - 标签面板 - 两张卡片 - 如何导航到它们

> ID：11634979
> 
> 赞同：0
> 
> 时间：2012-07-24T16:10:22.687
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有这个代码：

```
Ext.define('myapp.view.my_view', {
extend: 'Ext.TabPanel',
xtype: 'myapp_myview',
config: {
    fullscreen:true,
tabBarPosition: 'bottom',
    items: [
        {
            xtype: 'top_bar'
        },
        {
            xtype: 'title_bar',
        },
        {
            title: 'TAB 1',
            items: [
                {
                    xtype: 'myapp_tab1_screen1',
                },
                {
                    xtype: 'mayapp_tab1_screen2',
                },
            ]
         }
    ]
}
}); 
```

我想在 screen1 中有一个滑动到 screen2 的按钮，这意味着 TAB 1 图标仍然处于选中状态，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T06:55:25.213

尝试这个

```
{
title:'firstTab',
id:'fTab',
} 
```

{标题：'secondTab'，id：'sTab'，在此之后你必须对按钮的处理程序fn进行一些编码，即

```
handler:function(){
Ext.getCmp('sTab').show();
Ext.getCmp('fTab').hide();
}
} 
```

# bash - 如何按路径索引所有者/组并稍后应用它们？

> ID：11634980
> 
> 赞同：0
> 
> 时间：2012-07-24T16:10:24.060
> 
> 标签：bash, find, paste

我的目标是遍历整个文件系统并获取绝对路径、文件所有者和文件组，并将它们存储在一个文件中以供以后与脚本一起使用，以重新申请“已知”文件的所有权。

注意：需要安装“acl”包。

这是我到目前为止所拥有的：

```
find / -exec ./fileog.sh {} \; 
```

./fileog.sh 的内容：

```
getfacl -R "$2" | awk 'NR==1, NR==3 {print $3}' | paste -s -d ',' >> ./ogindex.txt 
```

问题是，我收到以下错误：

```
getfacl: : No such file or directory 
```

但如果我这样做，它会起作用：

```
find / -exec getfacl -R "$2" {} \; 
```

自己试试这个:)

```
getfacl -R ./some.file | awk 'NR==1, NR==3 {print $3}' | paste -s -d ',' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:17:53.410

你跑`fileog.sh`进去`find`，只给他一个参数（文件名，`{}`）：

```
-exec ./fileog.sh {} \; 
```

此文件名将在脚本中以`$1`. 而非. 的形式访问`$2`。

您必须写`$1`而不是`$2`在脚本中，或者您必须将缺少的参数添加到 te 脚本中`-exec`。

的片段`ogeindex.txt`：

```
etc,root,root
etc/ucf.conf,root,root
etc/gshadow,root,shadow
etc/sudoers.d,root,root
etc/sudoers.d/README,root,root
etc/motd.tail,root,root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:42:04.633

你不应该同时使用`find`and `getfacl -R`，或者你应该更小心地使用它们。

`find`已经递归了，所以你以这种方式多次点击每个文件。

我会这样解决问题：

```
find / -exec stat -c '%n,%U,%G' {} \; >> ./ogindex.txt 
```

如果您需要`/`剥离前导，这将是一点点后期处理。

注意：假设`stat`支持通过`-c`;格式化 并非所有版本`stat`都相同。

另外，我强烈建议您不要以这种格式存储此信息。如果文件名中有逗号会怎样？如果您使用`user,group,filename`它会更安全，因为您可以将第二个逗号之后的所有内容视为文件名。当然，这仍然容易受到精心制作的文件名的影响。

# java - 如何在 O(logn) 时间内删除 ArrayList 中的重复元素

> ID：11634982
> 
> 赞同：0
> 
> 时间：2012-07-24T16:10:34.043
> 
> 标签：java, arraylist, hashset

我将字符串作为数组列表中的元素，我想使用 Java 在 O(logn) 时间内删除它们

我曾尝试使用`HashSet`复制和清除并复制回另一个数组列表，但我认为那是在 O(n) 时间内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:15:39.373

我认为这是不可能的，即使你对数组进行了排序，它也需要`O(n)`. 我认为你不能避免至少检查每个元素一次，所以复杂度不可能低于`O(n)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:15:10.407

如果数组中的字符串是按排序顺序排列的，则可以使用二进制搜索在 O(log n) 时间内访问它们；但是，如果它们未排序，则需要检查数组的每个元素，给出 O(n) 的下限。

编辑：如果您尝试从已创建的 ArrayList 中删除重复项，则必须查看每个元素，这将花费 O(n) 时间。如果您愿意牺牲添加，您可以将它们按排序顺序添加到数组中，然后您将永远不必删除重复项，因为如果一个元素已经存在，那么您就不要添加它；但是添加将在线性时间而不是恒定时间中运行。

# nsstring - 将 NSString 传递给 C++ 方法

> ID：11634983
> 
> 赞同：0
> 
> 时间：2012-07-24T16:10:36.263
> 
> 标签：nsstring, objective-c++, stdstring

我正在尝试将 NSString 传递给 C++ 方法，我尝试了这个，但它不起作用：

```
 trackName = @"name";
    Track track(new String([trackName UTF8String])); 
```

我正在`.mm`文件中编写此代码。我还在`#include <string>`文件顶部添加了，但我不确定这是否有必要。知道我做错了什么吗？这些是我得到的错误：

![在此处输入图像描述](../Images/e521b29f0abcb4b18e13a6f894432b4e.png)

这是我正在调用的 C++ 轨道构造函数：

```
Track(const string &aTrackName)
    {
    trackName =  aTrackName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:31:17.207

问题是您的函数需要 a`string`并且您正在尝试实例化一个`String`对象，它可能对此一无所知。

这段代码的另一个问题是它需要一个字符串引用，但你传递给它的是一个指向字符串的指针。你可以简单地给它一个临时的字符串。尝试：

```
Track track(std::string([trackName UTF8String])); 
```

# javascript - Jquery砌体棋盘

> ID：11634984
> 
> 赞同：0
> 
> 时间：2012-07-24T16:10:39.047
> 
> 标签：javascript, jquery-masonry

出于某种原因，我的 jquery masonry 对 col1 和 col2 的处理方式不同，尽管它们在 CSS 中是相同的（除了颜色和边距）

```
 $(document).ready(function() {
        $('#container').masonry({
            columnWidth:800
        });

$('#container').masonry({
            itemSelector: '.col1',
            columnWidth: 150
         });

        $('#container').masonry({
            itemSelector: '.col2',
            columnWidth: 150
        });
}); 
```

Col2 位于右侧，就在 col1 的下方，就像棋盘一样。这是带有代码的 JSfiddler 的链接。谁能发现为什么会这样？ [此示例的 JS Fiddler 代码](http://jsfiddle.net/ArgyleGost/VBacg/29/) 谢谢，Argyle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:47:33.250

当您有 3 列并且每列中只有 1 个积木时，这是正常的。当你只给它一个或两个变量时，你会对一个基本上解决一个困难数学问题的程序有什么期望？这是一个解决方案，但也许不是最好的？尝试在每个容器中添加更多砖块，您会看到算法如何解决您的问题？

根据要求，我建议您再次阅读 masonry 文档和我的答案，但如果您只想将 masonry 算法添加到主要内容中，则每块砖都不需要它：

```
 $('#container').masonry({
        columnWidth:800
    });

    $('#container').masonry({
        itemSelector: '.col1',
        columnWidth: 150
     });

    $('#container').masonry({
        itemSelector: '.col2',
        columnWidth: 150
    });

     $('#container').masonry({
        itemSelector: '.col3',
        columnWidth: 150
    }); 
```

只需添加 1 次并更改所有砖块都有 1 个选择器，例如：

```
 $('#container').masonry({
        itemSelector: '.main',
        columnWidth: 150
    }); 
```

# iphone - 如何以特定速度模拟 iPhone 移动？使用 gpx 文件

> ID：11634986
> 
> 赞同：1
> 
> 时间：2012-07-24T16:10:51.800
> 
> 标签：iphone, objective-c, xcode, cllocationmanager

我想在**模拟器**上进行测试，如果 iPhone 达到特定速度，就会触发一个功能。所以问题是如何以特定速度模拟 iPhone 移动？使用 gpx 文件？

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    double gpsSpeed = newLocation.speed;
    if (gpsSpeed > 30) {
        //myLogic
        [SomeClass function];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:20:54.910

做这个：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
        double gpsSpeed = 31;
        if (gpsSpeed > 30) {
            //myLogic
            [SomeClass function];
        }
    } 
```

模拟器无法`CLLocation`为您生成对象。您可以自己生成它们，但实际上您所做的事情与告诉 if 语句执行相同。

# android - nextFocusDown 带有膨胀的布局

> ID：11634992
> 
> 赞同：-1
> 
> 时间：2012-07-24T16:11:18.693
> 
> 标签：android, android-edittext

我有一个视图，其中包括从 xml 布局膨胀的视图的几个实例。

在 xml 布局中，我`android:nextFocusDown`根据分配给该布局中元素的 ID 定义了属性。

现在的问题是，当我通过布局的第一个实例单击 NEXT 时一切正常，但是当我触摸布局的下一个实例的第一个元素并单击 NEXT 时，它会返回页面顶部（基本上对应的字段中的第一个实例）

我的理论是，由于它们具有相同的 id（我`android:id="@+id/..."`在布局 xml 中用于定义一个 id），所以它只是跳转到第一个。

有没有另一种方法来定义这个，或者我错过了什么？布局非常复杂，所以我希望能够使用 xml 而不是在代码中创建所有元素。

谢谢， - 肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:20:57.560

您需要动态 ID，这只能在代码中完成。你不能走 xml 路线。另外，你是如何处理点击事件的，你有任何 EditTexts 吗？如果您正在重用 ID，您希望如何连接到正确的 Button/EditText？

我认为这种方法可能对您有用：[将触摸焦点转移到另一个视图](https://stackoverflow.com/questions/6729191/transferring-touch-focus-to-another-view)

您必须自己在代码中处理焦点更改。

# mysql - 如何使用 mysql 在 excel 中显示超过 50 个结果？

> ID：11634997
> 
> 赞同：0
> 
> 时间：2012-07-24T16:11:25.833
> 
> 标签：mysql, excel

我已经搜索和搜索，但我找不到我的答案。我希望有人能帮忙。我有一个搜索 mysql 数据库并在网站上显示 X 数量的结果的代码。然后，我的搜索者可以将结果导出到 Excel 电子表格中。我的问题是结果以数百个形式返回，而电子表格只会显示 50 个。这段代码还有很多内容，但有些东西告诉我，它可能就在这里，为了节省在我展示的 400 多行代码中这个。

```
$sql .= ",
                        IF (cycle_id = 4,
                            " . ((4 == $next_available_quarter) ?
                                "'" . $next_available_quarter_month[4] . "-{$next_available_quarter_year}'" :
                                "'" . $next_available_quarter_month[4] . "-" . ($next_available_quarter_year+1) . "'") . "
                            ,
                            IF (cycle_id = 3,
                                " . ((3 == $next_available_quarter) ?
                                    "'" . $next_available_quarter_month[3] . "-{$next_available_quarter_year}'" :
                                    "'" . $next_available_quarter_month[3] . "-" . ($next_available_quarter_year+1) . "'") . "
                                ,
                                IF (cycle_id = 2,
                                    " . ((2 == $next_available_quarter) ?
                                        "'" . $next_available_quarter_month[2] . "-{$next_available_quarter_year}'" :
                                        "'" . $next_available_quarter_month[2] . "-" . ($next_available_quarter_year+1) . "'") . "
                                    ,
                                    " . ((1 == $next_available_quarter) ?
                                        "'" . $next_available_quarter_month[1] . "-{$next_available_quarter_year}'" :
                                        "'" . $next_available_quarter_month[1] . "-" . ($next_available_quarter_year+1) . "'") . "
                                    )
                                )
                            )
                        )
                    )
                )
            ) as next_run
    FROM
        tax_search_loans tsl
    LEFT JOIN
        tax_searches ts
    ON
        (tsl.tax_search_loan_id = ts.tax_search_loan_id)
    LEFT JOIN
        tax_search_results tsr
    ON
        (tsr.tax_search_id = ts.tax_search_id)
    LEFT JOIN
        states
    ON
        (tsl.state_id = states.state_id)
    LEFT JOIN
        tax_search_loan_officers tslo
    ON
        (tslo.tax_search_loan_officer_id = tsl.tax_search_loan_officer_id)
    WHERE
        tsl.active = 'Y' AND
        tslo.active = 'Y' AND
        tslo.customer_code IN ('" . implode("','", explode(',', $DB->cleanString($_GET['custcodes']))) . "') AND
        (ts.active IS NULL OR ts.active = 'Y') AND
        (tsr.active IS NULL OR tsr.active = 'Y')
        LIMIT 0, 50
    "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:13:19.407

删除该`LIMIT 0, 50`语句或将其更改为您希望显示的最大行数。