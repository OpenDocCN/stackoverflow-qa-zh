# StackOverflow 问答 000789000-000789999

# python - 如何将 sqlite3 模块导入 Python 2.4？

> ID：789030
> 
> 赞同：7
> 
> 时间：2009-04-25T14:29:03.600
> 
> 标签：python, sqlite

sqlite3 模块包含在 Python 2.5+ 版本中。但是，我坚持使用 2.4 版。我上传了 sqlite3 模块文件，将目录添加到 sys.path，但是当我尝试导入它时出现以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "sqlite3/__init__.py", line 23, in ?
    from dbapi2 import *
  File "sqlite3/dbapi2.py", line 26, in ?
    from _sqlite3 import *
ImportError: No module named _sqlite3 
```

文件“_sqlite3”在 lib-dynload 中，但如果我将它包含在 sqlite3 目录中，我会收到其他错误。

有什么建议么？我在有限的环境中工作；除其他外，我无权访问 GCC。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-06-05T12:48:01.900

我对 CentOS 和 python 2.4 有同样的问题

我的解决方案：

```
yum install python-sqlite2 
```

并尝试遵循 python 代码

```
try:
    import sqlite3
except:
    from pysqlite2 import dbapi2 as sqlite3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T14:32:36.570

你安装了吗？这通常比弄乱`sys.path`.

```
python setup.py install 
```

如果是这样，那么您应该找到它。

如果由于某种原因无法安装它，请设置`PYTHONPATH`环境变量。不要养成乱来的习惯`sys.path`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T14:41:05.927

您将需要安装[pysqlite](http://pypi.python.org/pypi/pysqlite/)。但是请注意，这绝对需要编译器，除非您可以在网上找到它的二进制文件（和 Python 2.4）。无法使用 2.5 二进制文件。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2011-12-04T14:52:07.173

您必须先确保您的 sqlite、sqlite-devel、python-sqlite 安装正确，然后重新编译 Python。

# .net - 为什么在“C:\Program Files (x86)”之外运行时，为“x86”编译的 WinForms 应用程序不会在“x64”机器上退出？

> ID：789036
> 
> 赞同：0
> 
> 时间：2009-04-25T14:32:03.750
> 
> 标签：.net, winforms, windows-server-2003, x86, 64-bit

我们有一个在 x86 上运行良好的 WinForms 应用程序，但有许多第三方组件可以进行 win32 调用。为了让应用程序在 x64 上运行，我现在针对 x86 平台进行编译。我们的习惯是在服务器的系统分区之外安装我们的胖客户端，所以我们昨天在 Win2003 x64 服务器上安装在“F:\Program Files (x86)”中。从该目录运行时，进程拒绝退出。我尝试在任务管理器、taskkill 和进程资源管理器中杀死它们，但只要重新启动服务器就会杀死这些进程。当我在 C:\Program Files (x86) 中卸载并重新安装时，进程退出正常。

在 x64 机器上运行为 x86 编译的 WinForms 应用程序时，安装位置真的很重要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T14:47:01.780

根据我的经验，我可以说几乎可以从任何位置在 x64 系统上运行 x86 二进制文件（如果二进制文件在 system32 中，还没有测试是否仍然有效，但我确信 x86 程序可以从 Program Files 运行）。我相信 Program Files / Program Files (x86) 文件夹可以轻松区分原生 x64 应用程序和旧 x86 应用程序。根据您的描述，您面临的问题听起来很像 WoW64 兼容性问题，但是如果您对非托管代码有依赖关系，您可能需要先验证该非托管代码是否运行良好，然后深入研究阻止您的程序运行的原因关闭。此外，如果它使用多个线程或单个线程，那么首先了解您如何尝试终止应用程序会很有帮助，.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T15:27:19.047

这是在黑暗中拍摄的。您的程序是否尝试读取或加载与应用程序一起部署在同一目录或子目录中的任何数据？如果是这样，您可能会遇到以下问题。

您的应用程序使用的值可能取决于运行它的处理器体系结构来查找目录。以环境变量 ProgramFiles 为例。在 64 位机器上，ProgramFiles 环境变量实际上将指向 32 位应用程序的“Program Files (x86)”目录。因此，您的程序可能正在尝试加载如下数据并崩溃

```
string root = Environment.GetVariable("ProgramFiles");
string file = Path.Combine(root, "MyAppName\DataDirectory\SomeDataFile.txt");
string data = File.ReadAllLines(file); 
```

最后一行将失败，因为路径将解析为

> c:\程序文件 (x86)\MyApplication\DataDirectory\SomeDataFile.txt

但是该应用程序已部署到 Program Files 中。所以真正的路径是

> c:\程序文件\MyApplication\DataDirectory\SomeDataFile.txt

# c# - C#：如何防止笔记本电脑进入待机状态

> ID：789039
> 
> 赞同：9
> 
> 时间：2009-04-25T14:33:47.473
> 
> 标签：c#, power-management

如何在 C# 程序中执行此操作？我很确定这应该是可能的，因为例如各种媒体程序都会这样做，因此计算机在观看电影等时不会进入待机状态。

因此，例如，如果我创建一个简单且基本的 WinForm 应用程序，只要该应用程序正在运行，我需要做什么来防止笔记本电脑进入待机状态？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-25T14:44:19.540

我认为你必须 P/Invoke。但是不要害怕......这很容易。

[SetThreadExecutionState](http://msdn.microsoft.com/en-us/library/aa373208.aspx)是你的朋友。[它](https://github.com/AArnott/pinvoke/commit/f382340dc2243622aee3dd82924e355494dd6211#diff-332753c43f250ed731f39b109faaafb4R1827)在[PInvoke 项目中可用，在](https://github.com/AArnott/pinvoke/)[NuGet](https://www.nuget.org/packages/pinvoke.kernel32)上也可用。

# directory - 无法将除目录以外的所有文件移动到终端中的文件夹

> ID：789043
> 
> 赞同：0
> 
> 时间：2009-04-25T14:37:41.833
> 
> 标签：directory, mv

我在我的 Bash 中启用了扩展正则表达式

```
shopt -s extglob 
```

它们可能有助于解决问题。

我运行以下失败，因为它也移动目录

```
$ mv `find . -maxdepth 1` django-tes/ 
```

我正在尝试查找除目录之外的所有文件并将它们移动到名为 django-tes/ 的目录中。

**如何将文件夹**中除目录之外的所有文件移动到终端中的文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T14:46:05.713

尝试使用`find . -type f -maxdepth 1`

# asp.net - asp.net 中的会话

> ID：789049
> 
> 赞同：0
> 
> 时间：2009-04-25T14:41:17.533
> 
> 标签：asp.net, session, login

我需要一个关于使用 c# 在 asp.net 中的会话的详细示例 例如（在登录操作中使用会话

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T14:45:54.497

Session 是 ASP.Net 中的系统，您可以在其中保存基于用户的对象和变量，因此这些项目可以跨回发使用。

向 Session 添加变量：

```
Session["key"] = myVar; 
```

检索变量

```
myVar = Session["key"];
myVar = (MyType) Session["key"]; 
```

在 Session 中，您可以保存任何 .NET Framework 类型，但您应该非常清楚这种设计可能会对您的应用程序产生影响，因为这会带来可伸缩性问题。

在[这个问题](https://stackoverflow.com/questions/234973/what-is-the-best-way-to-determine-a-session-variable-is-null-or-empty-in-c)的答案中，有一个很好的实用程序类可以帮助您抽象会话对象，也可以看看它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T14:47:49.687

抱歉，不完全确定您对登录内容的追求，但使用会话相当简单，MSDN 的以下两个页面应该可以帮助您入门：

*   [如何：在会话状态中保存值](http://msdn.microsoft.com/en-us/library/6ad7zeeb.aspx)
*   [如何：从会话状态读取值](http://msdn.microsoft.com/en-us/library/6ad7zeeb.aspx)

如果您在页面上有标准[登录控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx)，则可以处理[LoggedIn 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin.aspx)以在用户会话状态中存储其他详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T14:45:36.977

您可以考虑使用表单身份验证：http: [//msdn.microsoft.com/en-us/library/aa480476.aspx](http://msdn.microsoft.com/en-us/library/aa480476.aspx)

# c# - 适用于 SQL Server 和 Oracle 数据库的应用程序

> ID：789059
> 
> 赞同：0
> 
> 时间：2009-04-25T14:46:20.547
> 
> 标签：c#, sql-server, wpf, database, oracle

构建与 Sql Server 或 Oracle 一起使用的小型（但可扩展）应用程序的最佳方法是什么？

我对在功能背后的过程中构建支持多个数据库的应用程序感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T14:58:02.610

使用支持多个数据库的[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)是这里的第一步。例如，您可以查看[NHibernate](http://nhforge.org/Default.aspx)或[Entity 框架](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx)——它们都支持 oracle 和 sql server。这样，您应该只需要换出数据库映射即可让应用程序在任一 DBMS 上工作。

编辑 - 感谢 tvanfosson，为 nhibernate 添加了“新”链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-27T05:55:22.257

除了 ORM 评论；有时生活并不那么简单。

您必须保留用于在两个系统上生成表、视图和存储过程的单独脚本，因为它们会有所不同。

由于特定于一个数据库平台的性能原因，您可能需要做一些棘手的事情。例如，在 Oracle 中创建一个新分区。

您应该尝试通过将其封装在视图或存储过程中来在此级别执行此操作。

您的客户端代码可以在任何数据库上调用具有相同签名的存储过程。您可以编写一个不执行任何操作或执行大量操作的存储过程，具体取决于数据库的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T14:59:12.810

我的建议是使用现有的（免费）框架，例如[nHibernate](http://nhforge.org/Default.aspx)，它为您抽象出对数据库的依赖。或者，您需要定义自己的抽象层，该层能够与两个数据库中的任何一个的驱动程序进行交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T15:00:55.707

作为对其他答案的补充，您应该看看 ADO.Net 中的 DbProviderFactories 架构......有点低调，但可能对您有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T15:38:13.090

正如许多人所指出的，使用 ORM 可以解决您的问题。我使用[LLBLGen](http://llblgen.com/defaultgeneric.aspx)取得了巨大成功。或者，您可以使用接口 IConnection、ICommand 等来滚动您自己的 ConnectionFactory。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-25T14:59:59.487

我会使用 OR/M。其中大多数都支持许多不同的数据库供应商，并且有一种与数据库无关的语言来进行查询等。

我可以为 C# 推荐 NHibnernate。

# c++ - 如何创建单独的库以包含在 C++/Eclipse 中

> ID：789061
> 
> 赞同：3
> 
> 时间：2009-04-25T14:47:17.613
> 
> 标签：c++, eclipse, tinyxml

我已经获得了一些 C++ 代码来使用 TinyXML 解析器。但是，要做到这一点，我必须将 TinyXML 的源代码包含在我的常规源代码中。我想将 TinyXML 作为一个单独的库包含在内。我将 Eclipse 与 Cygwin C++ 编译器一起使用。有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T18:20:05.730

我假设您想将库与您自己项目的源代码分开......但是当库不在同一个文件夹中时，您不知道如何构建。

* * *

假设您的库已预编译 *.lib 和 *.h 文件：

1.  将库源代码移动到单独的目录
2.  菜单栏“项目”
3.  菜单“属性”会打开一个对话框，所有项目的属性都会在左边有一个列表。
4.  列表项“C/C++ Build”将更改 GUI 并向您显示 gcc 的编译器/链接器/汇编器的所有选项（我从不进行汇编......所以我从不使用汇编器做任何事情）。[1]
5.  GCC C 编译器 --> 目录：
    ![](https://dirkraffel.files.wordpress.com/2008/06/screenshot-properties-for-test-1.png)
6.  绿色加号图标 [2] --> 指定 *.h 文件的路径
7.  您的编译器现在应该很高兴（但是您将无法链接，因为链接器不知道每个函数的实际定义是什么）
8.  GCC C 链接器 --> 库：
    ![](https://dirkraffel.files.wordpress.com/2008/06/screenshot-properties-for-test.png)
9.  库搜索路径 (-L) --> 绿色加号图标 --> 指定 *.lib 文件的路径
10.  库 (-l) --> 绿色加号图标 --> 指定您正在使用的每个库的名称
11.  您的链接器现在应该很高兴并且您的代码应该可以编译

[脚注 - 1] GUI C/C++ 构建窗格是 gcc 的命令行编译器/链接器的包装器......它只是让它更易于使用，因为它可以直观地显示所有内容。

[脚注 - 2] '+' 图标将告诉编译器您的库 *.h 包含文件所在的位置。编译器需要 *.h 文件才能在编译之前知道您的库具有哪些函数原型。

* * *

假设您有实际的（未编译的）*.c 和 *.h：

1.  除第 7 步外，执行上述相同步骤。
2.  在第 7 步，您需要确保库的 *.c 文件可以被 Eclipse 的“托管生成”看到。如果它没有看到源代码，那么您需要指定源代码的位置以便编译它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T17:07:33.063

这基本上很容易。您为库编译源代码，并使用*ar(1)*构建库。是的，令人惊讶的是，图书馆只是一个档案馆。UNIX 在这方面很酷。

然后，您可以在构建最终代码时将代码作为静态库包含在内。

我很少使用 Eclipse，所以我无法告诉您 IDE 中的确切过程，但我相信您需要设置一个单独的项目来构建它。

现在，如果您想要构建一个 DLL，那么您需要使用一些特殊的标志。[这里](http://www.cygwin.com/cygwin-ug-net/dll.html)有一个不错的页面。

# 3d - Java 3D：我可以在哪里插入“渲染后”FX？

> ID：789063
> 
> 赞同：0
> 
> 时间：2009-04-25T14:48:00.247
> 
> 标签：3d, effects, watermark, java-3d

我扩展了一个 Canvas3D，然后我重写了方法“postSwap()”，但是我的奇偶线效果闪烁很多，插入这个过程的另一个好处是什么？

```
public void postSwap() {
    Graphics2D g2 = (Graphics2D)this.getGraphics();
    Map map = new HashMap();
    map.put(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_OFF);
    g2.addRenderingHints(map);
    g2.setColor(WipideaApplet.BCK2);
    int h = this.getHeight(), w = this.getWidth();
    for (int i=0;i<h;i++) {
        if (i%2==0)
            g2.drawLine(0, i, w, i);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-25T19:02:11.370

我自己找到了一个很好的解决方案，我在这里发布来分享它，如果你有另一个，请发布它:-)

```
@Override
public void postRender() {
    super.postRender();
    getGraphics2D().setColor(WipideaApplet.BCK2);
    int h = this.getHeight(), w = this.getWidth();
    for (int i=0;i<h;i++) {
            if (i%2==0) {
                getGraphics2D().drawLine(0, i, w, i);
            }
    }
    getGraphics2D().flush(true);
} 
```

实际上 getGraphics2D **().flush(true);** 是最重要的，因为避免任何闪烁，至少在我的 centrino duo 上 :-)

# html - 如何在 HTML 中居中 对齐前置标记

> ID：789064
> 
> 赞同：3
> 
> 时间：2009-04-25T14:48:33.053
> 
> 标签：html, center, pre

我正在尝试使用 pre 标签在博客上发布一些代码。像这样的东西：

`void function(){return 0;}`

现在我希望所有这些代码都居中对齐。我说的不仅仅是文字，还有它周围的边框。宽度当前设置为 60%。所以我希望所有这些都是中心对齐的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T14:52:04.653

添加一个自定义 CSS`<div>`类，将字体设置为`courier`(10pt) 并设置左右边距，使其位于页面中心。

```
.code {
  font-family:courier;
  font-size: 10pt;
  margin: 5px; border: 1px solid black;
} 
```

然后调用如下：

```
<div class="code">Your Code Here</div> 
```

魔术发生在该`margin`部分。您可以设置所有 4 个属性，但如果您只设置一个，那么它[会使其一直保持该大小的边距](http://www.tizag.com/cssT/margin.php)。

# c - 缩进#defines

> ID：789073
> 
> 赞同：113
> 
> 时间：2009-04-25T14:56:29.510
> 
> 标签：c, c-preprocessor, indentation, code-formatting

我知道`#define`s 等通常从不缩进。为什么？

我目前正在编写一些代码，其中包含`#define`s、`#ifdef`s、`#else`s、`#endif`s 等的可怕混合。所有这些通常与普通的 C 代码混合在一起。s的非缩进`#define`使它们难以阅读。缩进代码与非缩进`#define`s 的混合是一场噩梦。

为什么`#define`s 通常不缩进？有没有理由不缩进（例如下面的代码）？

```
#ifdef SDCC
    #if DEBUGGING == 1
        #if defined (pic18f2480)
            #define FLASH_MEMORY_END 0x3DC0
        #elif defined (pic18f2580)
            #define FLASH_MEMORY_END 0x7DC0
        #else
            #error "Can't set  up flash memory end!"
        #endif
    #else
        #if defined (pic18f2480)
            #define FLASH_MEMORY_END 0x4000
        #elif defined (pic18f2580)
            #define FLASH_MEMORY_END 0x8000
        #else
            #error "Can't set  up flash memory end!"
        #endif
    #endif
#else
    #if DEBUGGING == 1
        #define FLASH_MEMORY_END 0x7DC0
    #else
        #define FLASH_MEMORY_END 0x8000
    #endif
#endif 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-04-25T15:36:15.763

Pre-ANSI C 预处理器不允许在行首和“#”字符之间留有空格；前导“#”必须始终放在第一列。

现在不存在 Pre-ANSI C 编译器。使用您喜欢的样式（“#”之前的空格或“#”和标识符之间的空格）。

[http://www.delorie.com/gnu/docs/gcc/cpp_48.html](http://www.delorie.com/gnu/docs/gcc/cpp_48.html)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2010-07-03T08:47:42.160

正如一些人已经说过的那样，一些 Pre-ANSI 编译器要求 # 是行上的第一个字符，但它们不需要附加预处理器指令，因此以这种方式进行缩进。

```
#ifdef SDCC
#  if DEBUGGING == 1
#    if defined (pic18f2480)
#      define FLASH_MEMORY_END 0x3DC0
#    elif defined (pic18f2580)
#      define FLASH_MEMORY_END 0x7DC0
#    else
#      error "Can't set  up flash memory end!"
#    endif
#  else
#    if defined (pic18f2480)
#      define FLASH_MEMORY_END 0x4000
#    elif defined (pic18f2580)
#      define FLASH_MEMORY_END 0x8000
#    else
#      error "Can't set  up flash memory end!"
#    endif
#  endif
#else
#  if DEBUGGING == 1
#    define FLASH_MEMORY_END 0x7DC0
#  else
#    define FLASH_MEMORY_END 0x8000
#  endif
#endif 
```

我经常在旧的 Unix 头文件中看到这种风格，但我讨厌它，因为这种代码的语法着色经常失败。我为预处理器指令使用了一种非常明显的颜色，以便它们脱颖而出（它们处于元级别，因此不应成为正常代码流的一部分）。您甚至可以看到 SO 没有以有用的方式为序列着色。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-04-25T16:14:13.300

关于预处理器指令的解析，C99 标准（以及之前的 C89 标准）清楚地说明了编译器在逻辑上执行的操作顺序。特别是，我相信这意味着这段代码：

```
/* */ # /* */ include /* */ <stdio.h> /* */ 
```

相当于：

```
#include <stdio.h> 
```

无论好坏，带有“-std=c89 -pedantic”的 GCC 3.4.4 无论如何都会接受包含注释的行。我并不是在提倡将其作为一种风格 - 不是一秒钟（这太可怕了）。我只是认为这是可能的。

ISO/IEC 9899:1999 第 5.1.1.2 节翻译阶段说：

> 1.  [字符映射，包括三元组]
>     
>     
> 2.  [线拼接-去除反斜杠换行]
>     
>     
> 3.  源文件被分解为预处理标记和空白字符序列（包括注释）。源文件不应以部分预处理标记或部分注释结尾。每个注释被一个空格字符替换。保留换行符。除换行符之外的每个非空空白字符序列是保留还是替换为一个空格字符是实现定义的。
>     
>     
> 4.  执行预处理指令，扩展宏调用，[...]

第 6.10 节预处理指令说：

> 预处理指令由一系列预处理标记组成，以 # 预处理标记（在翻译阶段 4 开始时）是源文件中的第一个字符（可选地在不包含换行符的空格之后）或跟在包含至少一个换行符的空格之后，并以下一个换行符结束。

唯一可能的争议是括号表达式“（在翻译阶段 4 开始时）”，这可能意味着哈希之前的注释必须不存在，因为在阶段 4 结束之前它们不会被空格替换。

正如其他人所指出的，预标准 C 预处理器在许多方面的行为并不统一，预处理器指令之前和之中的空格是不同编译器做不同事情的领域之一，包括不识别前面有空格的预处理器指令。 .

值得注意的是，在分析注释之前会删除反斜杠换行符。因此，您不应`//`以反斜杠结束注释。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-25T15:56:31.753

我不知道为什么它不常见。有时我喜欢缩进预处理器指令。

一直妨碍我的一件事（有时说服我停止尝试）是许多或大多数编辑器/IDE 会在最轻微的挑衅下将指令扔到第 1 列。这真烦人。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-25T15:19:10.530

这些天我相信这主要是一种风格的选择。我**认为**在遥远的过去，并非所有编译器都支持缩进预处理器定义的概念。我做了一些研究，但无法支持这一说法。但无论如何，似乎所有现代编译器都支持缩进预处理器宏的想法。我没有 C 或 C++ 标准的副本，所以我不知道这是否是标准行为。

至于风格好不好。就个人而言，我喜欢把它们都放在左边的想法。它为您提供了一个一致的位置来寻找它们。是的，当有非常嵌套的宏时，它会变得很烦人。但是如果你缩进它们，你最终会得到看起来更奇怪的代码。

```
#if COND1
void foo() {
  #if COND2
  int i;
    #if COND3
  i = someFunction()
  cout << i << eol;
    #endif
  #endif
}
#endif 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-25T15:21:18.000

对于您给出的示例，使用缩进使其更清晰可能是合适的，因为您有如此复杂的嵌套指令结构。

就我个人而言，我认为在大多数情况下保持它们不缩进很有用，因为这些指令与您的其余代码分开运行。#ifdef 之类的指令在编译器看到您的代码之前由预处理器处理，因此 #ifdef 指令之后的代码块甚至可能不会被*编译*。

当指令散布在代码中时，将指令与代码的其余部分在视觉上分开更为重要（而不是像您给出的示例中那样使用专用的指令块）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-11-21T15:23:53.887

在几乎所有当前可用的 C/CPP 编译器中，它都不受限制。由用户决定如何对齐代码。很高兴编码。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-25T15:17:30.940

> 我目前正在编写一些代码，其中包含#defines、#ifdefs、#elses、#endifs、#etc 的可怕混合。所有这些通常与普通的 C 代码混合在一起。#defines 的非缩进使它们难以阅读。缩进代码与非缩进 #defines 的混合是一场噩梦。

一个常见的解决方案是对指令进行注释，以便您轻松了解它们所指的内容：

```
#ifdef FOO
/* a lot of code */
#endif /* FOO */

#ifndef FOO
/* a lot of code */
#endif /* not FOO */ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-25T08:00:33.270

我知道这是个老话题，但我浪费了几天时间寻找解决方案。我同意最初的帖子，如果你有很多代码，打算让代码更干净（在我的情况下，我使用指令来启用/禁用详细日志记录）。最后，我在[这里](https://www.iditect.com/how-to/53886240.html)找到了适用于 Visual Studio 2017 的解决方案

> 如果您喜欢缩进 #pragma 表达式，可以在以下位置启用它：工具 > 选项 > 文本编辑器 > C/C++ > 格式化 > 缩进 > 预处理器指令的位置 > 保留缩进

剩下的唯一问题是自动代码布局修复了格式=（

# java - 如何创建 Java 自定义 Web 控件？

> ID：789075
> 
> 赞同：4
> 
> 时间：2009-04-25T14:57:44.530
> 
> 标签：java, jsp, servlets, awt, web-user-controls

这个问题最初在我的脑海中是**“我可以在 Servlet 中使用 AWT 控件吗？”** ，这将显示我对这个主题的所有无知。

我是 JAVA 技术的新手，但经过一番阅读，我似乎了解 AWT 控件直接连接 OS GUI 元素，因此无法在要注入 JSP 的 Servlet 中使用或扩展 JPanel、JButton 等并让浏览器呈现这些控件（另一种方法可能是在 JSP 中嵌入一个小程序，但我不想这样做）。

我正在寻找一种使用 JSP 和 Servlet 构建自定义可重用 Web 控件的方法。

这通常是如何完成的，您能否提供一些示例/链接？

**编辑：**这是我对 Google 应用程序引擎进行的测试运行的一部分 - 所以探索 Google Web Toolkit 对我来说可能是有意义的 - 任何指向该方向的指针也将不胜感激。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T15:20:10.793

[AWT](http://www.javaworld.com/javaworld/jw-07-1996/jw-07-awt.html)是在桌面上呈现 UI 的特定于操作系统的部分，而不是在 JSP、Servlet 等存在的事物的 Web 端。更具体地说，像[Swing](http://java.sun.com/docs/books/tutorial/uiswing/)（它有你提到的那些 JPanel、JButton 等作为 UI 组件）和[SWT](http://www.eclipse.org/swt/)目前基于 AWT 并在它之上工作以呈现 UI 并使其按预期工作。

不幸的是，这一切意味着您不能在网页上使用基于 AWT 的组件，因为网页（通常）与平台无关，因为它们无法准确决定 UI 的各个部分是如何呈现的，只有一个一堆标记被视为对 Web 浏览器的一种请求，让他们做 Web 设计师希望做的事情，但没有 100% 保证最终结果将是设计师想要的。

为了在 Java 的 Web 端实现 Swing/AWT 类型的 UI 创建，已经进行了很多重新发明，因为它是一个聪明的模型，就像您似乎已经知道[Google Web Toolkit](http://code.google.com/intl/fi/webtoolkit/)试图尽其所能使 Web 看起来更像桌面一样应用程序，而实际上它只是自动化底层所需的 JavaScript Ajax 以使网页表现得像桌面应用程序一样。另一个框架是[Tapestry](http://tapestry.apache.org/)，我没有亲自使用过，但有些人认为它也是一个不错的选择。

当然还有我个人最喜欢的[Apache Wicket](http://wicket.apache.org/)，它可以让您真正分离 Java 代码和标记，它的行为也与 Swing UI 代码非常相似！事实上，对于最简单的事情，Swing 的 UI 组件类存在大量名称冲突。假设您熟悉编写桌面应用程序 UI，我强烈推荐 Wicket，它将枯燥乏味的部分（Servlet、URL 解析、页面书签功能、安全性......）抽象出来，并用类似的事件驱动模型（但不等于）到 Swing 的[EDT](http://java.sun.com/docs/books/tutorial/uiswing/concurrency/dispatch.html)，这是桌面 UI 魔法通常发生的地方。

虽然这与您正在寻找的东西完全不同，但使用 Wicket，您可以创建这样一组 POJO Web 组件，您可以在任何地方重用它们，从而得到您想要的东西。不过提醒一句，Wicket 假设你真的知道如何使用 Java 进行编码，一些可笑的简单事情一开始可能很乏味，但最终你应该对你所得到的感到非常满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T15:19:34.850

在 JSP 中，您可能正在寻找自定义标签。自定义标记是创建可重用代码组件以在 JSP 页面显示中使用的方法。那里有一些非常好的，例如那些在[struts2 框架](http://struts.apache.org/2.1.6/docs/tag-reference.html)或[显示标签库](http://displaytag.sourceforge.net/1.2/)中找到的。

但是您可以编写自己的或使用新功能扩展现有的。

# java - 我如何处理 2D 图像并围绕它的 X、Y 或 Z 轴旋转它，就好像它是 3D image.in java？

> ID：789081
> 
> 赞同：-1
> 
> 时间：2009-04-25T15:00:45.333
> 
> 标签：java, image, 3d, java-2d

我想实现我有但有点倾斜的 2D 图像的效果，例如一个平面，我希望图像可以围绕其 Y 轴旋转......任何人都可以帮助我了解如何做..* *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T16:52:40.993

基本上你需要一点线性几何/代数，和/或一个包来为你做这些。

从几何学的角度来看，你把图像想象成在空间的平面上；您正在查看它，就好像它被反向投影在您的显示器上一样。如果图片与该屏幕完全平行，并且大小相同，则每个点都映射到屏幕上的一个像素。否则，您必须进行计算以生成该映射，其中涉及该平面和屏幕平面之间的*x、y、z方向上的角度的三角函数。*线性代数的出现是因为处理这种计算的简单方法是一系列 4×4 矩阵的乘法。

现在，您可以自己编写所有这些程序，而且对于您的想法来说，这并不是那么困难。查看任何好的计算机图形文本，例如[Shirley](https://rads.stackoverflow.com/amzn/click/com/1568811241)或[Foley 和 van Damm](https://rads.stackoverflow.com/amzn/click/com/0201848406)。

就一个包而言，Java 中有很好的 3D 图形。更好的是，有很好的教程：

*   [Sun 的 Java3D 教程](http://java.sun.com/developer/onlineTraining/java3d/)。
*   [j3d.org](http://www.j3d.org/)上的东西
*   [java3d.org](http://www.java3d.org/)上的完整列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T15:16:47.963

在什么情况下？在我看来，使用 OpenGL trough JOGL 之类的 3D API 是实现这一目标的最简单方法。否则，如果角度是可变的，您将需要某种形式的软件渲染器。

# algorithm - 将整数表示为一系列乘数

> ID：789085
> 
> 赞同：11
> 
> 时间：2009-04-25T15:04:44.013
> 
> 标签：algorithm, language-agnostic

***向下滚动以查看最新编辑，我将所有这些文本都留在这里只是为了不使到目前为止收到的这个问题的回复无效！***

* * *

我有以下脑筋急转弯我想得到一个解决方案，我试图解决这个问题，但由于我在数学上并没有高于平均水平（*也就是说，我认为我非常接近平均水平*）我可以' t 似乎围绕着这个。

问题：给定的数字`x`应该被拆分为一系列`multipliers`，其中每个`multiplier <= y`，`y`是一个常数，如 10 或 16 或其他。在意甲（技术上是`array of integers`）中，最后一个数字应该相加而不是相乘，以便能够将乘数转换回原始数字。

作为一个例子，让我们假设`x=29`和`y=10`。在这种情况下，预期的数组将是`{10,2,9}`meaning `10*2+9`。但是，如果`y=5`，它会是`{5,5,4}`有意义的，`5*5+4`或者如果`y=3`，它会是`{3,3,3,2}`which would be `3*3*3+2`。

我试图通过这样做来解决这个问题：

1.  while `x >= y`, 存储`y`到`multipliers`, 然后`x = x - y`
2.  时`x < y`，存储`x`到`multipliers`

显然这不起作用，我还尝试单独存储“剩余”部分并将其添加到其他所有内容之后，但这也不起作用。我相信我的主要问题是我试图以一种过于复杂的方式来思考这个问题，而解决方案却非常明显和简单。

重申一下，这些是该算法应具有的限制：

*   必须使用 64 位长
*   必须返回一个 32 位整数数组（...嗯，短裤也可以）
*   虽然支持有符号数字（+ 和 -）会很好，但如果它有助于任务，那么只有无符号数字是必须的

虽然我正在使用 Java 执行此操作，但我宁愿将任何可能的代码示例作为伪代码，我特别不希望轻易做出答案，我只需要轻推（好吧，更多的是强力踢）以便我可以解决这至少部分是我自己。提前致谢。

## 编辑：进一步澄清

为了避免一些混乱，我想我应该改写一下：

*   结果数组中的每个整数都应小于或等于 y，包括最后一个数字。
*   是的，最后一个数字只是一个幻数。
*   不，这不是模数，因为在大多数情况下，第二个数字会大于 y。
*   是的，大多数可用数字都有多个答案，但是我正在寻找数学运算量最少的那个。就我的逻辑而言，这意味着找到尽可能大的乘数的最大数量，例如`x=1 000 000,y=100`，`100*100*100`即使在`10*10*10*10*10*10`数学方面同样正确答案也是如此。

到目前为止，我需要考虑一下给定的答案，但是如果您有什么要补充的，请做！我非常感谢您已经对此表现出的兴趣，谢谢大家。

## 编辑2：更多解释+赏金

好吧，看来我在这里的目标无法按照我想象的方式完成。我对自己的目标太模棱两可了，在考虑了一下之后，我决定完整地告诉你我想做什么，看看你能想出什么。

我最初的目标是想出一种特定的方法来将 1..n 个大整数（又名 long）打包在一起，这样它们的字符串表示就比写实际数字要短得多。认为十的倍数、10^6 和 1 000 000 是相同的，但是表示的字符长度不是。

为此，我想以某种方式组合这些数字，因为预计这些数字彼此之间有些接近。我首先认为表示`100, 121, 282`as`100+21+161`可能是要走的路，但字符串长度的节省充其量是可以忽略不计的，如果数字彼此不是很接近，那么真的不能很好地工作。基本上我想要超过~10%。

所以我想出了一个想法，如果我通过公共属性（例如乘数）对数字进行分组，然后将其余数字划分为单个组件，然后我可以将其表示为字符串。这就是问题出现的地方，我认为例如 1 000 000 和 100 000 可以表示为 10^(5|6) 但由于我的目标使用上下文，这有点太不稳定了：

**上下文是 Web。**RESTful URL:s 是具体的。这就是为什么我提到考虑使用 64 个字符（网络安全的字母数字非保留字符，然后是一些），从那时起我可以创建看似随机的 URL，这些 URL 可以解压缩为表示一组 id 编号的整数列表。在这一点上，我想创建一个类似 64 基数的数字系统来表示以 10/2 为基数的数字，但由于我不是数学天才，我不知道如何做到这一点。

## 赏金

既然我已经写了整个故事（对不起，这是一个很长的故事），我正在为这个问题开个悬赏。与前面指定的首选算法的要求有关的所有内容仍然有效。我还想说，我已经对迄今为止收到的所有答案表示感谢，如果以你们所做的方式完成，我很高兴被证明是错误的。

## 结论

好吧，赏金现在给了。我对回复发表了一些评论，主要是为了将来参考和我自己，如果您认为我们应该能够在多个答案中传播它，您还可以查看我关于传播赏金的[SO Uservoice建议，该建议与此问题相关。](http://stackoverflow.uservoice.com/pages/1722-general/suggestions/178706-add-a-way-to-spread-bounty-to-multiple-answers)

* * *

**谢谢大家抽出时间来回答！**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-29T09:55:02.290

**更新**

我忍不住尝试为第一个问题想出我自己的解决方案，即使它不做压缩。这是一个使用称为 pyecm 的第三方分解算法的 Python 解决方案。

这个解决方案可能比叶夫根尼的解决方案效率高几个数量级。对于合理的 y 值，计算需要几秒钟而不是几小时甚至几周/​​几年。对于 x = 2^32-1 和 y = 256，我的 core duo 1.2 ghz 需要 1.68 秒。

```
>>> import time
>>> def test():
...     before = time.time()
...     print factor(2**32-1, 256)
...     print time.time()-before
...
>>> test()
[254, 232, 215, 113, 3, 15]
1.68499994278
>>> 254*232*215*113*3+15
4294967295L 
```

这是代码：

```
def factor(x, y):
    # y should be smaller than x. If x=y then {y, 1, 0} is the best solution
    assert(x > y)

    best_output = []

    # try all possible remainders from 0 to y 
    for remainder in xrange(y+1):
        output = []
        composite = x - remainder
        factors = getFactors(composite)

        # check if any factor is larger than y
        bad_remainder = False
        for n in factors.iterkeys():
            if n > y: 
                bad_remainder = True
                break
        if bad_remainder: continue

        # make the best factors
        while True:
            results = largestFactors(factors, y)
            if results == None: break
            output += [results[0]]
            factors = results[1]

        # store the best output
        output = output + [remainder]
        if len(best_output) == 0 or len(output) < len(best_output):
            best_output = output

    return best_output

# Heuristic
# The bigger the number the better. 8 is more compact than 2,2,2 etc...

# Find the most factors you can have below or equal to y
# output the number and unused factors that can be reinserted in this function
def largestFactors(factors, y):
    assert(y > 1)
    # iterate from y to 2 and see if the factors are present.
    for i in xrange(y, 1, -1):
        try_another_number = False
        factors_below_y = getFactors(i)
        for number, copies in factors_below_y.iteritems():
            if number in factors:
                if factors[number] < copies:
                    try_another_number = True
                    continue # not enough factors
            else:
                try_another_number = True
                continue # a factor is not present

        # Do we want to try another number, or was a solution found?
        if try_another_number == True:
            continue
        else:
            output = 1
            for number, copies in factors_below_y.items():
                remaining = factors[number] - copies
                if remaining > 0:
                    factors[number] = remaining
                else:
                    del factors[number]
                output *= number ** copies

            return (output, factors)

    return None # failed

# Find prime factors. You can use any formula you want for this.
# I am using elliptic curve factorization from http://sourceforge.net/projects/pyecm
import pyecm, collections, copy

getFactors_cache = {}
def getFactors(n):
    assert(n != 0)
    # attempt to retrieve from cache. Returns a copy
    try:
        return copy.copy(getFactors_cache[n])
    except KeyError:
        pass

    output = collections.defaultdict(int)
    for factor in pyecm.factors(n, False, True, 10, 1):
        output[factor] += 1

    # cache result
    getFactors_cache[n] = output

    return copy.copy(output) 
```

**回答第一个问题**

你说你想要压缩数字，但从你的例子中，这些序列比未分解的数字长。如果您遗漏的系统没有更多详细信息（序列的概率/是否有可编程客户端？），则无法压缩这些数字。你能详细说明一下吗？

这是关于为什么当前对问题第一部分的答案永远无法解决第二个问题的数学解释。这与背包问题无关。

![香农熵](https://upload.wikimedia.org/math/a/2/f/a2f05485301595188046d986c8cdd705.png)

这是香农的熵算法。它告诉您表示序列 {X0, X1, X2, ..., Xn-1, Xn} 所需的理论最小位数，其中 p(Xi) 是看到令牌 Xi 的概率。

假设 X0 到 Xn 是 0 到 4294967295 的范围（整数的范围）。根据您的描述，每个数字都可能出现。因此每个元素的概率是 1/4294967296。

当我们将其插入香农算法时，它会告诉我们表示流所需的最小位数。

```
import math

def entropy():
    num = 2**32
    probability = 1./num
    return -(num) * probability * math.log(probability, 2)
    # the (num) * probability cancels out 
```

**毫无疑问，熵是 32。**我们需要 32 位来表示一个整数，其中每个数字的可能性相同。减少这个数字的唯一方法是增加一些数字的概率，并降低其他数字的概率。您应该更详细地解释流。

**回答第二个问题**

正确的做法是在与 HTTP 通信时使用 base64。显然Java在标准库中没有这个，但我找到了一个免费实现的链接：

[http://iharder.sourceforge.net/current/java/base64/](http://iharder.sourceforge.net/current/java/base64/)

这是在 Python 中完美运行的“伪代码”，转换为 Java 应该不难（我的 Java 生锈了）：

```
def longTo64(num):
    mapping = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"
    output = ""

    # special case for 0
    if num == 0:
        return mapping[0]

    while num != 0:
        output = mapping[num % 64] + output
        num /= 64

    return output 
```

如果你可以控制你的 web 服务器和 web 客户端，并且可以毫无问题地解析整个 HTTP 请求，你可以升级到 base85。根据维基百科，[url 编码最多允许 85 个字符](http://en.wikipedia.org/wiki/Percent-encoding)。否则，您可能需要从映射中删除一些字符。

这是 Python 中的另一个代码示例

```
def longTo85(num):
    mapping = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~!*'();:@&=+$,/?%#[]"
    output = ""
    base = len(mapping)

    # special case for 0
    if num == 0:
        return mapping[0]

    while num != 0:
        output = mapping[num % base] + output
        num /= base

    return output 
```

这是逆运算：

```
def stringToLong(string):
    mapping = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~!*'();:@&=+$,/?%#[]"
    output = 0
    base = len(mapping)

    place = 0
    # check each digit from the lowest place
    for digit in reversed(string):
        # find the number the mapping of symbol to number, then multiply by base^place
        output += mapping.find(digit) * (base ** place)
        place += 1

    return output 
```

这是香农算法在不同基础上的图表。 ![替代文字](https://imgur.com/2GwAC.png)

如您所见，基数越高，表示数字所需的符号就越少。在 base64 中，需要约 11 个符号来表示长整数。在 base85 中，它变成了大约 10 个符号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-25T15:21:47.467

**最终解释后编辑：**

我认为 base64 是最好的解决方案，因为有处理它的标准函数，而这个想法的变体并没有带来太大的改进。其他人在这里更详细地回答了这个问题。

关于原始问题，尽管代码有效，但不能保证在任何合理的时间内运行，正如 LFSR Consulting 对此问题的回答和评论一样。

**原答案：**

你的意思是这样的？

编辑 - 评论后更正。

```
shortest_output = {}

foreach (int R = 0; R <= X; R++) {
    // iteration over possible remainders
    // check if the rest of X can be decomposed into multipliers
    newX = X - R;
    output = {};

    while (newX > Y) {
       int i;
       for (i = Y; i > 1; i--) {
           if ( newX  % i == 0) { // found a divider
           output.append(i);
           newX  = newX /i;  
           break;
           }
       }

       if (i == 1) { // no dividers <= Y
          break;
       }
    }
    if (newX != 1) {
        // couldn't find dividers with no remainder
        output.clear();
    }
    else {
        output.append(R);
            if (output.length() < shortest_output.length()) {
                 shortest_output = output;
            }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-29T16:46:00.633

听起来好像您想压缩随机数据——由于信息论的原因，这是不可能的。（请参阅[http://www.faqs.org/faqs/compression-faq/part1/preamble.html](http://www.faqs.org/faqs/compression-faq/part1/preamble.html)问题 9。）在数字的串联二进制表示上使用 Base64 并完成它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-29T20:31:33.400

您尝试解决的问题（您正在处理问题的一个子集，因为您有 的限制`y`）称为[整数分解](http://en.wikipedia.org/wiki/Integer_factorization)，并且在任何已知算法的情况下都无法有效地完成：

> 在数论中，整数分解是将合数分解为更小的非平凡除数，当它们相乘时等于原始整数。

这个问题使许多加密功能成为可能（即使用 128 位密钥的 RSA - long 是其中的一半。） wiki 页面包含一些很好的资源，可以让您朝着正确的方向解决您的问题。

所以，你的脑筋急转弯确实是脑筋急转弯......如果你有效地解决它，我们可以将你的数学技能提升到高于平均水平！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-25T16:06:23.477

**完整故事后更新**

Base64 很可能是您的最佳选择。如果您想要自定义解决方案，您可以尝试实施 Base 65+ 系统。请记住，仅仅因为 10000 可以写成“10^4”并不意味着所有东西都可以写成 10^n，其中 n 是整数。不同的基数系统是写数字的最简单方法，基数越高，数字所需的位数就越少。此外，大多数框架库都包含 Base64 编码算法。（您使用的是什么语言？）。

进一步打包 url 的一种方法是你提到的，但在 Base64 中。

```
int[] IDs;
IDs.sort() // So IDs[i] is always smaller or equal to IDs[i-1].

string url = Base64Encode(IDs[0]);

for (int i = 1; i < IDs.length; i++) {
  url += "," + Base64Encode(IDs[i-1] - IDs[i]);
} 
```

请注意，您需要一些分隔符，因为初始 ID 可以任意大，并且两个 ID 之间的差异可以超过 63，在这种情况下，一个 Base64 数字是不够的。

**更新**

只是重申这个问题是无法解决的。对于 Y = 64，您不能将 87681 写成乘数 + 余数，其中每一个都低于 64。换句话说，您不能用低于 64 的乘数写出任何数字 87617..87681。这些数字中的每一个都有一个超过 64 的基本术语。87616 可以写成低于 64 的基本术语，但是你需要那些 + 65，所以余数将超过 64。

所以如果这只是一个脑筋急转弯，那是无解的。除了使用乘法和余数之外，是否有一些实际目的可以通过某种方式实现？

是的，这确实应该是一个评论，但我在某些时候失去了评论的能力。:p

我相信最接近的解决方案是叶夫根尼的。扩展叶夫根尼的解决方案以消除余数的限制也很容易，在这种情况下，即使大于 Y，它也能够找到乘数小于 Y 且余数尽可能小的解。

**老答案：**

如果您限制数组中的每个数字都必须低于 y，那么就没有解决方案。给定足够大的 x 和足够小的 y，你最终会陷入不可能的境地。例如，y 为 2，x 为 12，您将得到 2 * 2 * 2 + 4，因为 2 * 2 * 2 * 2 将是 16。即使您允许 abs(n) 低于 y 的负数也不会在上面的例子中，你需要 2 * 2 * 2 * 2 - 4 来工作。

而且我认为问题是 NP 完全的，即使您将问题限制为已知有最后一项小于 y 的答案的输入。这听起来很像[背包问题][1]。当然我可能是错的。

编辑：

如果没有更准确的问题描述，就很难解决问题，但一种变体可以通过以下方式工作：

1.  设定电流 = x
2.  断流至其条款
3.  如果其中一项大于 y，则当前数字不能用大于 y 的项来描述。从当前减少一个并从 2 重复。
4.  当前数可以用小于 y 的术语表示。
5.  计算余数
6.  尽可能多地组合这些术语。

（Yevgeny Doctor 对此有更简洁（和有效）的实现，因此为了防止混淆，我跳过了实现。）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-04T20:45:44.460

**OP写道：**

> 我最初的目标是想出一种特定的方法来将 1..n 个大整数（又名 long）打包在一起，这样它们的字符串表示就比写实际数字要短得多。认为十的倍数、10^6 和 1 000 000 是相同的，但是表示的字符长度不是。

我以前就走这条路，学习所有数学很有趣，为了节省你的时间，我只会指给你看：[http ://en.wikipedia.org/wiki/Kolmogorov_complexity](http://en.wikipedia.org/wiki/Kolmogorov_complexity)

简而言之，通过更改符号可以轻松压缩一些字符串：

```
10^9 (4 characters) = 1000000000 (10 characters) 
```

其他人不能：

```
7829203478 = some random number... 
```

这是对我上面链接的文章的极大简化，因此我建议您阅读它，而不是从表面上理解我的解释。

**编辑：** 如果您尝试为某些唯一数据集制作 RESTful url，为什么不使用哈希，例如 MD5？然后将哈希作为 URL 的一部分包含在内，然后根据哈希查找数据。还是我错过了一些明显的东西？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-29T06:55:22.517

**更新：**我没有得到所有东西，因此我以更 Java 风格的方式重写了整个内容。我没有想到比除数更大的素数情况。现在已修复。我留下原始代码以获得这个想法。

**更新 2：**我现在以另一种方式处理大素数的情况。这样，无论哪种方式都可以得到结果。

```
public final class PrimeNumberException extends Exception {

    private final long primeNumber;

    public PrimeNumberException(long x) {
        primeNumber = x;
    }

    public long getPrimeNumber() {
        return primeNumber;
    }
}

public static Long[] decompose(long x, long y) {
    try {
        final ArrayList<Long> operands = new ArrayList<Long>(1000);
        final long rest = x % y;
        // Extract the rest so the reminder is divisible by y
        final long newX = x - rest;
        // Go into recursion, actually it's a tail recursion
        recDivide(newX, y, operands);            
    } catch (PrimeNumberException e) {
        // return new Long[0];
        // or do whatever you like, for example
        operands.add(e.getPrimeNumber());
    } finally {
        // Add the reminder to the array
        operands.add(rest);
        return operands.toArray(new Long[operands.size()]);
    }
}

// The recursive method
private static void recDivide(long x, long y, ArrayList<Long> operands)
    throws PrimeNumberException {
    while ((x > y) && (y != 1)) {
        if (x % y == 0) {
            final long rest = x / y;
            // Since y is a divisor add it to the list of operands
            operands.add(y);
            if (rest <= y) {
                // the rest is smaller than y, we're finished
                operands.add(rest);
            }
            // go in recursion
            x = rest;
        } else {
            // if the value x isn't divisible by y decrement y so you'll find a 
            // divisor eventually
            if (--y == 1) {
                throw new PrimeNumberException(x);
            }
        }
    }
} 
```

* * *

**原文：**这是我想出的一些递归代码。我本来希望用某种函数式语言对其进行编码，但在 Java 中是必需的。我没有费心将数字转换为整数，但这不应该那么难（是的，我很懒；）

```
public static Long[] decompose(long x, long y) {
    final ArrayList<Long> operands = new ArrayList<Long>();
    final long rest = x % y;
    // Extract the rest so the reminder is divisible by y
    final long newX = x - rest;
    // Go into recursion, actually it's a tail recursion
    recDivide(newX, y, operands);
    // Add the reminder to the array
    operands.add(rest);
    return operands.toArray(new Long[operands.size()]);
}

// The recursive method
private static void recDivide(long newX, long y, ArrayList<Long> operands) {
    long x = newX;
    if (x % y == 0) {
        final long rest = x / y;
        // Since y is a divisor add it to the list of operands
        operands.add(y);
        if (rest <= y) {
            // the rest is smaller than y, we're finished
            operands.add(rest);
        } else {
            // the rest can still be divided, go one level deeper in recursion
            recDivide(rest, y, operands);
        }
    } else {
        // if the value x isn't divisible by y decrement y so you'll find a divisor    
        // eventually
        recDivide(x, y-1, operands);
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-29T08:41:21.140

由于可能性的搜索空间很大，您选择的原始方法`(a * b + c * d + e)`很难找到最佳解决方案。您可以对数字进行因式分解，但这`"+ e"`会使事情复杂化，因为您不仅需要对这个数字进行因式分解*，*而且还需要对紧接在其下方的许多数字进行因式分解。

立即想到两种压缩方法，这两种方法都可以为您节省 10% 以上的数字表示空间。

64 位数字的范围为（无符号）：

```
 0 to
18,446,744,073,709,551,616 
```

或（签名）：

```
-9,223,372,036,854,775,808 to
 9,223,372,036,854,775,807 
```

在这两种情况下，您都需要将 20 个字符（不带逗号）减少到更小一些。

第一种是简单地对 base64 编码的数字进行 BCD 化（实际上是稍微修改的 base64，因为`"/"`在 URL 中不会是犹太洁食 - 您应该使用可接受的字符之一，例如`"_"`）。

将其转换为 BCD 会将两个数字（或一个符号和一个数字）存储到一个字节中，从而立即减少 50% 的空间（10 个字节）。将其编码为 base 64（将每 3 个字节转换为 4 个 base64 字符）会将前 9 个字节转换为 12 个字符，将第十个字节转换为 2 个字符，总共 14 个字符 - 节省了 30%。

唯一更好的方法是仅对二进制表示进行 base64 编码。这样更好，因为 BCD 有少量的浪费（每个数字只需要大约 3.32 位来存储 [log [2] 10]，但 BCD 使用 4）。

处理二进制表示，我们只需要对 64 位数字（8 个字节）进行 base64 编码。前 6 个字节需要 8 个字符，最后 2 个字节需要 3 个字符。这是 base64 的 11 个字符，可节省 45%。

如果您想要*最大程度*的压缩，有 73 个字符可用于 URL 编码：

```
ABCDEFGHIJKLMNOPQRSTUVWXYZ
abcdefghijklmnopqrstuvwxyz
0123456789$-_.+!*'(), 
```

所以从技术上讲，你可能可以编码 base-73，从粗略的计算来看，它仍然会占用 11 个字符，但更复杂的代码在我看来是不值得的。

当然，这是由于最大值的最大压缩。在规模的另一端（1 位），这种编码实际上会产生*更多*的数据（扩展而不是压缩）。您可以看到改进仅从 999 以上的数字开始，其中 4 位数字可以转换为 3 个 base64 字符：

```
Range (bytes)  Chars  Base64 chars  Compression ratio
-------------  -----  ------------  -----------------
     < 10 (1)      1       2             -100%
    < 100 (1)      2       2                0%
   < 1000 (2)      3       3                0%
   < 10^4 (2)      4       3               25%
   < 10^5 (3)      5       4               20%
   < 10^6 (3)      6       4               33%
   < 10^7 (3)      7       4               42%
   < 10^8 (4)      8       6               25%
   < 10^9 (4)      9       6               33%
  < 10^10 (5)     10       7               30%
  < 10^11 (5)     11       7               36%
  < 10^12 (5)     12       7               41%
  < 10^13 (6)     13       8               38%
  < 10^14 (6)     14       8               42%
  < 10^15 (7)     15      10               33%
  < 10^16 (7)     16      10               37%
  < 10^17 (8)     17      11               35%
  < 10^18 (8)     18      11               38%
  < 10^19 (8)     19      11               42%
  <  2^64 (8)     20      11               45% 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-29T15:22:28.273

你结婚了使用 Java 吗？Python 有一个专门用于此目的的完整包。它甚至会为您清理编码以确保 URL 安全。

### 原生 Python 解决方案

我推荐的标准模块是`base64`，它将任意字符串转换为经过清理的 base64 格式。您可以将它与模块结合使用，该`pickle`模块处理从 long 列表（实际上是任意大小）到压缩字符串表示的转换。

以下代码应该适用于 Python 的任何 vanilla 安装：

```
import base64
import pickle

# get some long list of numbers
a = (854183415,1270335149,228790978,1610119503,1785730631,2084495271,
    1180819741,1200564070,1594464081,1312769708,491733762,243961400,
    655643948,1950847733,492757139,1373886707,336679529,591953597,
    2007045617,1653638786)

# this gets you the url-safe string
str64 = base64.urlsafe_b64encode(pickle.dumps(a,-1))
print str64
>>> gAIoSvfN6TJKrca3S0rCEqMNSk95-F9KRxZwakqn3z58Sh3hYUZKZiePR0pRlwlfSqxGP05KAkNPHUo4jooOSixVFCdK9ZJHdEqT4F4dSvPY41FKaVIRFEq9fkgjSvEVoXdKgoaQYnRxAC4=

# this unwinds it
a64 = pickle.loads(base64.urlsafe_b64decode(str64))
print a64
>>> (854183415, 1270335149, 228790978, 1610119503, 1785730631, 2084495271, 1180819741, 1200564070, 1594464081, 1312769708, 491733762, 243961400, 655643948, 1950847733, 492757139, 1373886707, 336679529, 591953597, 2007045617, 1653638786) 
```

希望有帮助。使用 Python 可能是您从 1 行解决方案中获得的最接近的方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-05T18:49:01.300

写原始算法请求：最后一个数字的大小是否有限制（除此之外它必须存储在 32b int 中）？（最初的请求是我能解决的所有问题，哈哈。）

产生最短列表的一个是：

```
bool negative=(n<1)?true:false;
int j=n%y;
if(n==0 || n==1)
{
list.append(n);
return;
}
while((long64)(n-j*y)>MAX_INT && y>1) //R has to be stored in int32
{
y--;
j=n%y;
}
if(y<=1)
fail //Number has no suitable candidate factors. This shouldn't happen

int i=0;
for(;i<j;i++)
{
list.append(y);
}
list.append(n-y*j);
if(negative)
list[0]*=-1;
return; 
```

与迄今为止给出的大多数答案相比有点简单，但它实现了原始帖子的预期功能......它有点脏但希望有用:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-25T15:12:04.277

这不是模数吗？

设`/`整数除法（整数）并取`%`模。

```
int result[3];

result[0] = y;
result[1] = x / y;
result[2] = x % y; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-25T15:13:13.573

就像我在上面的评论中一样，我不确定我是否完全理解了这个问题。但是假设整数（n和给定的y），这应该适用于您所说的情况：

```
multipliers[0] = n / y;
multipliers[1] = y;
addedNumber = n % y; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-25T15:16:02.787

只需设置 x:=x/n，其中 n 是小于 x 和 y的*最大数。*当您最终得到 x<=y 时，这是您在序列中的最后一个数字。

# ruby-on-rails - Ruby/Rails/SQLite 一键安装？

> ID：789087
> 
> 赞同：3
> 
> 时间：2009-04-25T15:05:52.577
> 
> 标签：ruby-on-rails, ruby, macos, sqlite, mamp

我习惯了[MAMP](http://www.mamp.info/en/index.html)一键安装本地环境。是否有 Ruby 等价物... 下载并运行并立即获得在本地运行的最新版本的 Ruby、Rails、SQLite？

我使用的是运行 Leopard 的 Mac，并且知道 Leopard 附带的所有上述技术（可能 SQLite 除外）。我有参考较新版本的书籍，我需要的最后一件事是尝试修改教程以使用我的版本。

还有一个不太重要的问题：什么是“宝石”，我需要确保它也完全更新吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-26T15:56:57.500

当您第一次使用 Rails 时，安装非常混乱！如果您使用的是 Mac，即使已经安装了很多您需要的东西，但我个人发现很难找到关于如何最好地进行设置的简明信息。由于我不想让其他人在配置他们的 Mac 开发环境时遇到麻烦，因此我编写了一个 7 步指南，用于在 OSX Leopard 上安装 Ruby on Rails、MySQL、Apache with PHP 和 phpMyAdmin。简而言之，在 Mac 上进行本地开发所需的一切！

这是链接：

[http://waavoo.com/2009/7-step-guide-installing-ruby-on-rails-mysql-apache-php-phpmyadmin-intel-mac-os-x-leopard/](http://waavoo.com/2009/7-step-guide-installing-ruby-on-rails-mysql-apache-php-phpmyadmin-intel-mac-os-x-leopard/)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T15:12:24.557

看看[FiveRuns 安装](http://www.fiveruns.com/products/install)。这是一个免费的 Ruby on Rails 堆栈，您可以下载。

RubyGems 是用于发布和管理第三方库的 Ruby 标准。查看[用户指南](http://rubygems.org/read/book/1)。

玩得开心！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T15:18:06.760

我不知道你在什么 mac os 但是**Leopard** (10.5.x) 已经安装了 ruby​​，你只需要使用更新 gems

```
gem update rails 
```

在你的命令行中。

如果您在**Tiger** (10.4.x) 上安装已损坏，请点击[此链接](http://hivelogic.com/articles/view/ruby-rails-mongrel-mysql-osx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T03:19:37.710

您还应该看看[Phusion Passenger](http://www.modrails.com/) - 这与[prefpane 一起](http://www.fngtps.com/2008/06/putting-the-pane-back-into-deployment)，允许您以简单的方式设置 apache VirtualHosts。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-26T19:54:22.140

当前版本的 Rails 旨在通过使用 SQLite 和小型 Rub​​y Web 服务器，在不需要 AMP 样式堆栈的情况下工作（用于开发），因此如果您只进行 Rails 开发，则不需要设置堆栈 -您只需键入“rails”即可。

**但是**，Leopard 附带的 RubyGems 和 Rails 版本现在已经过时了，所以你需要升级这些版本才能走得太远。[我在这里](http://www.stuartellis.eu/articles/mac-setup/)写了一篇关于设置 Mac 进行开发的文章，但最少的命令是这样的：

1.  sudo gem install ruby​​gems-update
2.  sudo update_rubygems
3.  sudo update_rubygems （是的，两次）
4.  须藤宝石更新--系统

这些使 RubyGems 升级到当前版本，以便您可以安全地升级 Rails。为此，请键入：

```
gem update rails 
```

最后一个命令没有 sudo，因为如果您省略它，当前版本的 RubyGems 会将 gem 的干净副本安装到您​​的主目录中，而系统版本则保持不变。

最后，修改您的主目录中的 .profile 文件，以便其中包含 PATH 的行显示：

```
export PATH=$HOME/.gem/ruby/1.8/bin:$PATH 
```

关闭所有终端窗口以使其生效。您的主目录中的 gem 包提供的实用程序现在将优先于系统版本。

这意味着您可以键入“rails”并运行最新版本，但您没有使用 Apple 提供的任何软件（除了 RubyGems 的系统副本）。

要在将来有新版本出现时升级您的 Rails 私有副本，请再次执行以下操作：

```
gem update rails 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-16T12:38:55.820

只是参考这个....

[http://wiki.rubyonrails.org/getting-started/installation/windows#installing_ruby_on_rails_on_windows](http://wiki.rubyonrails.org/getting-started/installation/windows#installing_ruby_on_rails_on_windows)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-06T17:20:16.143

BitNami RubyStack 正是您正在寻找的[http://bitnami.org/stack/rubystack](http://bitnami.org/stack/rubystack)

# c# - WPF：关于依赖属性的基本问题

> ID：789089
> 
> 赞同：0
> 
> 时间：2009-04-25T15:06:46.583
> 
> 标签：c#, wpf, data-binding, xaml, dependency-properties

`Window`我在( )中有以下 Xaml `ArtistInfo`：

```
<Grid>
    <TextBlock Text="{Binding Artist.Name}"></TextBlock>
</Grid> 
```

这是同一窗口的代码隐藏（*为了问题而简化了代码*）：

```
public static readonly DependencyProperty ArtistProperty = 
        DependencyProperty.Register("Artist", typeof(Artist), typeof(ArtistInfo));

Artist Artist {
    get {
        return (Artist)GetValue(ArtistProperty);
    }
    set {
        SetValue(ArtistProperty, value);
    }
}

public ArtistInfo() {
    InitializeComponent();
}
public ArtistInfo(int artistID) {
    InitializeComponent();
    Artist = GetArtist(artistID);
} 
```

基本上我想要做的是数据绑定到一个依赖属性，这样当`Artist`填充（在构造函数中）时，`TextBlock`填充艺术家的名字。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T15:08:43.770

我唯一没有看到的是您更新了 TextBlock 的绑定源。首先给TextBlock添加一个名字

```
<TextBlock Name="m_tb" ... /> 
```

然后更新构造函数中的DataContext值

```
public ArtistInfo() {
 ...
 m_tb.DataContext = this;
} 
```

**EDIT** OP 提到可能有多个 TextBlock 或子元素。

在这种情况下，我会为最接近所有值的父对象执行上述技巧。在本例中为 Grid 控件。可以说，所有内部子项都将继承 DataContext 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T15:15:31.773

```
<Window DataContext="{Binding RelativeSource={RelativeSource Self}}" ...>
    <Grid>
        <TextBlock Text="{Binding Artist.Name}"/>
    </Grid>
</Window> 
```

# visual-studio-2010 - 如何删除不良的 Visual Studio 模板？

> ID：789095
> 
> 赞同：29
> 
> 时间：2009-04-25T15:10:24.123
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, project-template

您如何删除以下甚至不起作用的噪音模板？

[![在此处输入图像描述](https://i.stack.imgur.com/LCWZF.png)](https://i.stack.imgur.com/LCWZF.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-26T14:18:38.647

在 Visual Studio 中：转到**工具 > 扩展和更新**，然后卸载或禁用模板。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2010-03-17T14:00:37.953

为了为 2010 年的用户节省一点时间，该文件夹已移动：

...\我的文档\Visual Studio 2010\Templates\ProjectTemplates

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-01-27T16:24:03.837

对于**Visual Studio 2013**，我在这里找到了我的模板缓存：

```
%USERPROFILE%\AppData\Roaming\Microsoft\VisualStudio\12.0\ProjectTemplatesCache 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-25T15:15:00.807

将它们从磁盘中删除应该可以解决问题。它们存在的位置将取决于您安装它们的位置。如果您为所有用户安装它们，他们将在

> %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\Ide\ProjectTemplatesCache

对于单个用户，他们将在

> %USERPROFILE%\Visual Studio 2008\Templates\ProjectTemplates

**编辑**

如果 InstallVSTemplates 失败，可能是以下情况之一。我无法帮助的是一些程序在 ProjectTemplatesCache 目录中随机转储文件。

另一个更可能的原因是 ProjectTemplates 目录中有错误的模板。InstallVSTemplates 实际上只是通过这个目录，并将所有文件解压缩到 ProjectTemplatesCache 目录中。您将不得不搜索此目录并找到包含要添加到项目中的垃圾文件的 .zip 文件。找到该文件后，将其删除，删除 ProjectTemplatesCache，然后重新运行 InstallVSTemplates。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2011-12-07T16:39:34.363

After manually searching for some of the custom profile templates(.vstemplate),I found them at the following location:

```
%userprofile%\AppData\Local\Microsoft\VisualStudio\10.0\Extensions 
```

It appears VS2010 installs some of the templates as extesions or the authors made it that way.I hope this helps someone.

May need to run "devenv /setup" at the run command to refresh the VS2010 after you delete the templates.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-02-04T20:40:02.867

*   从中删除坏/不需要的项目文件夹

C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\ProjectTemplates

*   清除缓存

C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\ProjectTemplatesCache

*   从中删除东西（也许没有必要）

C:\Users[您的用户名]\Documents\Visual Studio 2008\Templates\ProjectTemplates

最后以管理员身份打开 Visual Studio 2008 命令提示符并运行

devenv /installvstemplates

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-22T11:28:01.290

对我来说，当我从**ItemTemplatesCache**文件夹中删除**cache.bin文件时，问题得到了解决。**此文件夹的完整路径是：

 **`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplatesCache`

还要确保从以下位置删除模板文件：

*   C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates
*   C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplatesCache
*   C:\Users\Default\Documents\Visual Studio 2010\Templates\ItemTemplates
*   C:\Users[NT-USERNAME]\Documents\Visual Studio 2010\Templates\ItemTemplates

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-01T17:41:40.513

对于 Visual Studio 2019： **扩展 > 管理扩展 > 已安装 > 卸载**

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-07-14T17:49:08.937

对我来说，这是使用 VS2017 从这里删除它的问题：%USERPROFILE%\AppData\Roaming\Microsoft\VisualStudio\15.0_45552a03\ProjectTemplatesCache

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-03-13T22:05:08.457

对于 Visual Studio Express 2010，您应该删除下的所有文件夹

%USERPROFILE%\AppData\Local\Microsoft\VCSExpress\10.0\Extensions

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-04-12T03:54:09.317

对于 Visual Studio 2013 社区，您必须`{program folder}\Common7\IDE\ItemTemplatesCache\cache.bin`在如上所述删除所有不需要的文件后删除。之后 VS 将重建对话框中列出的模板`New Project...`。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-11-23T13:40:11.190

你也可以试试这个：

```
dotnet new --uninstall <PATH|NUGET_ID> 
```

它适用于我在**VS 2019**和**VS 2022**中卸载 Avalonia 模板。

## 描述

该`dotnet new --uninstall`命令卸载`PATH`或`NUGET_ID`提供的模板包。如果`<PATH|NUGET_ID>`未指定该值，则会显示所有当前安装的模板包及其关联的模板。指定时`NUGET_ID`，不要包含版本号。

## 例子

卸载**Avalonia**模板

```
dotnet new --uninstall Avalonia.Templates 
```

来自[微软文档](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-new-uninstall)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-07T17:45:14.683

如果模板是通过双击 VSIX 文件安装的，则它被视为扩展，可以使用上述 Hamid Behnam 描述的技术卸载。否则，可以从上述模板目录之一中删除它。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-09-30T02:55:04.007

适用于 VS 2012 和 2015：
在 Visual Studio 中：转到工具 > 扩展和更新，然后卸载或禁用模板。

在 VS 2019 中工作：
1- 在 VS2019 中，可以通过从 %USERPROFILE%\AppData\Roaming\Microsoft\VisualStudio{VSVersion}\ProjectTemplatesCache 中删除模板文件夹来删除自定义模板。查找以“16”开头的 {VSVersion}。

[https://i.stack.imgur.com/V6SQ5.png](https://i.stack.imgur.com/V6SQ5.png)

2- 从 {C:\Users\USERName\Documents\Visual Studio 2019\My Exported Templates} 的模板文件夹中删除您想要的内容

注意：{ProjectTemplatesCache} 或 {ItemTemplatesCache}

[https://i.stack.imgur.com/9BM9p.png](https://i.stack.imgur.com/9BM9p.png)

# iphone - isa 实例变量是什么？

> ID：789103
> 
> 赞同：3
> 
> 时间：2009-04-25T15:15:42.507
> 
> 标签：iphone, objective-c, memory-management

在 NSObject 类参考中，他们谈到了一个“isa 实例变量”，它

> 初始化为描述类的数据结构

有人可以解释一下我应该了解这个 isa 实例变量吗？那有什么好处？isa 是什么意思？听起来像是一种规范，如 DIN、ISO 等；知道那是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-25T15:21:31.477

它用于确定类的继承路径。更正式地说：

> 当一个新对象被创建时，它被分配了内存空间并且它的数据以它的实例变量的形式被初始化。每个对象至少有一个实例变量（继承自 NSObject）称为 isa，它被初始化为引用对象的类。通过这个引用，还可以访问对象继承路径中的类。- [Objective-C GNUstep 基础编程手册：Objective-C](http://www.gnu.org/software/gnustep/resources/documentation/Developer/Base/ProgrammingManual/manual_2.html)

该名称`isa`来自 OOP 概念，`IS-A`它只是两个对象之间的关系，如下所示：

> 狗 IS-A 哺乳动物。
> 汽车 IS-A 车辆。

因此，`isa`实例变量可能会有所帮助，因为它可以告诉您`IS-A`您的类在其继承层次结构中具有哪些关系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-25T15:21:51.587

它基本上是指向对象类的指针，也是 Objective-C 运行时的基础。运行时使用它来获取对象方法调度表以及存储在类结构中的任何其他内容。这几乎是每个 Objective-C 对象必须拥有的唯一东西。

在大多数情况下，您可以完全忽略它。

# ruby-on-rails - 如何将日期对象从 Adob e Flex 发送到 RESTful rails？

> ID：789111
> 
> 赞同：1
> 
> 时间：2009-04-25T15:18:38.723
> 
> 标签：ruby-on-rails, apache-flex, air, rest

我正在开发一个 Adob​​e AIR 项目，该项目使用 Ruby on Rails 作为 RESTful Web 服务作为后端。

我找到了很多例子来说明如何将数据发送到 Rails 操作。但是我坚持使用日期对象，如果我可以通过 XML 或其他方式将 Actionscript 的日期对象发送到 Rails 并且 Rails 可以更容易地理解这一点，这将非常有用。

感谢您的任何回答，我相信很多人仍然找到相同的解决方案来解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T21:18:12.890

查看[Corelib](http://code.google.com/p/as3corelib/)库。它有一个名为`DateUtil`. 'DateUtil' 允许您在 Rails W3C 日期格式之间进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T17:52:15.363

我没有用 Rails 做到这一点，但有一些想法：

*   AMF[红霉素](http://code.google.com/p/rubyamf/)
*   JSON [as3corelib](http://code.google.com/p/as3corelib/)具有 JSON 编码/解码

# selenium - 每次运行硒测试时如何增加字段值？

> ID：789114
> 
> 赞同：8
> 
> 时间：2009-04-25T15:19:18.957
> 
> 标签：selenium

每次通过 Selenium IDE 运行 Selenium 测试时，是否有任何简单的方法可以将字段值增加 +1？

```
Command: Type 
Target: some kind of id
Value: number+1 
```

**编辑 1**：感谢 krosenvold 的回复。我明白了你的想法，这是我目前得到的简化版本：

```
...     
store | 10 | x
storeEval | storedVars['x'] = ${x}+1 | 
... 
```

变量的 x 值确实会增加，但是如何在不同的测试运行之间保存该值？有可能吗？

我是否应该在每次运行测试时获取 $x 值，并在最后将 $x 值分配给测试页面上的某个虚拟元素，这样我可以在下次运行测试时检索先前增加的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T02:25:19.507

**正确答案**

商店 | 10 | 一世

商店 | javascript{storedVars.i++;} | 一世

回声 | ${i}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-02-16T08:54:28.707

这是您的问题的解决方案

```
store | 10 | i
store | javascript{storedVars.i++;} 
echo  | ${i} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-17T16:35:08.530

```
store          | 0                                | iterator
echo           | ${iterator}                      |
execute script | return parseInt(${iterator}) + 1 | iterator
echo           | ${iterator}                      | 
```

结果将是：

```
0
1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T15:49:26.713

您可以使用`eval`;

```
eval($('elementId').value = $('elementId').value +1); 
```

我展示的确切语法暗示了客户端上的原型；

`document.getElementById('elementId').value`也应该在`standard DOM`环境中发挥作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-22T11:41:06.200

这对我有用

```
storeEval | storedVars['nextRow'] = ${nextRow}+1 | 
```

# c# - 如何发送图片短信？

> ID：789116
> 
> 赞同：0
> 
> 时间：2009-04-25T15:19:29.080
> 
> 标签：c#, sms, image

如何将 32x16 像素的图像转换为图片 SMS 消息？

我已经拥有发送普通短信所需的代码，但正在寻求发送图片短信的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T15:08:10.590

查看[将图像文件转换为 OTA 文件格式](http://www.codeproject.com/KB/graphics/ota_converter.aspx)。代码在 C# 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T19:08:03.633

您需要将二进制图像格式编码为可以按照内容流的 SMS 规范传输的格式（例如 base64）。SMS 规范对单个消息的长度（[140 个八位字节](http://en.wikipedia.org/wiki/SMS#Message_size)）施加了一些限制，并且您的图片确实必须更小。否则，这将作为一系列 SMS 传输，您需要在接收端将它们组合在一起。

# oop - 抽象类与接口代表一个家庭

> ID：789128
> 
> 赞同：3
> 
> 时间：2009-04-25T15:23:42.407
> 
> 标签：oop

抽象类被描述为对一系列对象有用（例如，可用于哺乳动物）。但是，使用接口或抽象类来表示一系列相关对象之间有什么区别？

我的过程是当我想定义通用功能时使用抽象类，但可以选择未来扩展和自定义功能（实现）的接口。

例如，我编写了一个抽象类来封装一些数据库功能，这些功能将在工作中的小型 Web 应用程序中大量使用。我编写了一个带有虚拟方法的抽象类，将来可以用自定义功能覆盖它（例如日志记录，或可能需要的一些数据库事件报告）。

这是正确的方法吗？选择一个构造（抽象或接口）来代表一个家庭有什么意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T15:26:01.997

当所有类型之间存在共同的状态和行为时，应该使用抽象类。当所有类型都有一个公共接口但不共享状态或行为时，应该使用接口。

***这是一个例子。***

> 德国牧羊犬、金毛猎犬、比格犬

这三个对象都是狗，因此它们具有某些共同的状态（肉食性、4 条腿等），它们也具有某些可覆盖的行为（吠叫、喘气等）。在这种情况下，创建一个抽象的 Dog 类来保存这种常见的状态和行为并为每种类型的狗创建 Dog 的子类型是最有意义的。

> 铅笔，钢笔，粉笔

这些对象没有共同的状态，它们不能共享行为。然而，你可能会注意到它们确实有一些共同点——它们都是*写作能力*。`Writable`这些对象最好单独构建，没有基类，然后与公开每种类型方法的接口绑定在一起`Write`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T15:33:41.247

我建议使用接口，以便您将来可以在数据库实用程序中实现新功能。

与往常一样，开发的主要设计原则是

**面向接口设计，而不是实现**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T15:53:13.007

使用抽象类，您可以提供层次结构中所有类所需和共享的实现。因此，您正在重用代码。您可以允许派生类覆盖或不覆盖默认行为，但至少您提供了基线功能，例如为新生动物呼吸。但是，使用接口，您无法提供任何实现。您只需定义一个契约，所有继承该接口的类都应该遵守并为其提供实现。这可能会导致类层次结构中的重复和重复代码。

接口对可扩展性不是很好，您需要担心版本控制。您决定对现有接口进行更改，但您很快就会意识到存在许多您可能需要修改的类。考虑将 Breath 方法添加到已经被许多哺乳动物使用的 IMammal 界面。您将需要为每个人提供 Breath 实施。使用抽象类，您可以简单地添加 Breath 方法并提供一些基线实现，而不必担心现有的派生类。因此，抽象类在层次结构和 api 的开发方面更加灵活。

# java - 如何使 Java 应用程序的内存高效？

> ID：789132
> 
> 赞同：20
> 
> 时间：2009-04-25T15:26:24.693
> 
> 标签：java, caching, memory, heap-memory, objectpool

您如何优化具有大量（数百万）长寿命对象的应用程序的堆大小使用？（大缓存，从数据库加载大量记录）

*   使用正确的数据类型
    *   避免使用 java.lang.String 来表示其他数据类型
*   避免重复的对象
    *   如果预先知道值，则使用枚举
    *   使用对象池
    *   String.intern() （好主意？）
*   仅加载/保留您需要的对象

我正在寻找一般编程或 Java 特定的答案。没有时髦的编译器开关。

编辑：

优化可以在堆中出现数百万次的 POJO 的内存表示。

用例

*   在内存中加载一个巨大的 csv 文件（转换为 POJO）
*   使用休眠从数据库中检索数百万条记录

答案简历：

*   使用享元模式
*   写入时复制
*   与加载具有 3 个属性的 10M 对象相比，拥有 3 个大小为 10M 的数组（或其他数据结构）是否更有效？（操作数据可能会很痛苦，但如果你真的内存不足......）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-25T15:41:26.657

我建议您使用内存分析器，查看内存消耗的位置并对其进行优化。如果没有定量信息，您最终可能会改变没有效果或实际上使事情变得更糟的事情。

您可以查看更改数据的表示形式，尤其是如果您的对象很小。例如，您可以将数据表表示为一系列列，每列都有对象数组，而不是每行一个对象。如果您不需要表示单个行，这可以为每个对象节省大量开销。例如，具有 12 列和 10,000,000 行的表可以使用 12 个对象（每列一个）而不是 1000 万个（每行一个）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-25T15:34:07.640

你没有说你想要存储什么样的物品，所以提供详细的建议有点困难。然而，一些（非排他性的）方法，没有特定的顺序，是：

*   尽可能使用[享元模式。](http://en.wikipedia.org/wiki/Flyweight_pattern)
*   缓存到光盘。Java有 [许多缓存解决方案。](http://java-source.net/open-source/cache-solutions)
*   关于 String.intern 是否是一个好主意存在一些争论。有关问题，请参见 [此处](https://stackoverflow.com/questions/725640/optimize-memory-usage-of-a-collection-of-strings-in-java)。String.intern()，以及围绕其适用性的争论。
*   利用[软](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/ref/SoftReference.html)引用或[弱](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/ref/WeakReference.html) 引用来存储可以按需重新创建/重新加载的数据。请参阅 [此处](http://java.sys-con.com/node/36434)了解如何将软引用与缓存技术结合使用。

了解更多有关您存储的对象的内部结构和生命周期的信息会得到更详细的答案。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-25T15:55:11.927

确保对象模型的良好规范化，不要重复值。

咳咳，而且，如果只有数百万个对象，我想我会选择一个像样的 64 位 VM 和大量内存；）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-25T21:20:17.027

普通的“分析器”对您没有多大帮助，因为您需要对所有“活动”对象进行概览。您需要堆转储分析器。我推荐[Eclipse 内存分析器](http://www.eclipse.org/mat/)。

检查重复的对象，从字符串开始。检查您是否可以应用诸如飞行重量、复制写入、延迟初始化之类的模式（谷歌将成为您的朋友）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-09-16T19:28:19.137

看看从这里链接的这个演示文稿。它列出了常见 java 对象和原语的内存使用情况，并帮助您了解所有额外内存的去向。

[构建内存高效的 Java 应用程序：实践和挑战](http://amelnyk.blogspot.com/2010/05/building-memory-efficient-java.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-25T22:57:57.667

您可以在内存中存储更少的对象。:) 使用溢出到磁盘的缓存或使用 Terracotta 来集群您的堆（这是虚拟的），允许将未使用的部分从内存中清除并以透明的方式返回。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-25T18:46:43.277

我想补充一点 Peter alredy 提出的观点（不能评论他的回答 :() 使用内存分析器（检查[java 内存分析器](http://www.khelekore.org/jmp/solarisbuild.html)）总是比通过直觉更好。80% 的时间它是我们的例行程序忽略它有一些问题。集合类也更容易出现内存泄漏。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-29T09:20:12.687

如果你有数百万个整数和浮点数等，那么看看你的算法是否允许在基元数组中表示数据。这意味着每次垃圾收集的引用更少，CPU 成本更低。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-28T21:07:50.060

一个奇特的：将大多数数据压缩在 ram 中。仅扩展当前工作集。如果您的数据具有良好的局部性，则可以很好地工作。

使用更好的数据结构。Java 中的标准集合相当占用内存。

【什么是更好的数据结构】

*   如果您查看集合的来源，您会发现如果您限制自己访问集合的方式，您可以节省每个元素的空间。
*   集合处理增长的方式不适合大型集合。抄袭太多。对于大型集合，您需要一些基于块的算法，例如 btree。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-29T08:19:34.920

花一些时间熟悉和调整[VM 命令行选项](http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp)，尤其是那些与垃圾收集有关的选项。虽然这不会改变对象使用的内存，但它会对具有大量 RAM 的机器上的内存密集型应用程序的性能产生重大影响。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-04-06T06:38:49.643

1.  `Assign null`对所有使用的`variables`东西都具有价值`no longer`。因此`make it available for Garbage collection`。
2.  `De-reference the collections`一旦使用结束，否则 GC 不会清除这些。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-23T10:53:52.023

1) 尽可能使用正确的数据类型

```
Class Person {
 int age;
 int status;
} 
```

在这里，我们可以在发送 Person 对象时使用以下变量来节省内存

```
class Person{
  short age;
  byte status;
} 
```

2) 而不是返回 new ArrayList<>(); 从方法，你可以使用 Collection.emptyList() 它将只包含一个元素而不是默认的 10；

例如

```
public ArrayList getResults(){
    ..... 
    if(failedOperation)
        return new ArrayList<>();
}
//Use this
public ArrayList getResults(){
    if(failedOperation)
       return Collections.emptyList();
} 
```

3 ) 尽可能在方法中移动对象的创建而不是静态声明，因为对象的字段将存储在堆栈而不是堆中

4) 使用 protobuf、thrift、avro、messagepack 等二进制格式来减少相互通信，而不是使用 json 或 XML

# amazon-s3 - s3 上经过身份验证的 URL 是否安全？

> ID：789133
> 
> 赞同：3
> 
> 时间：2009-04-25T15:27:12.837
> 
> 标签：amazon-s3, amazon-web-services

我有一些文件存储在亚马逊。全部处于私有模式，并且由于我需要为用户提供一种下载这些文件的方法，因此每次用户需要下载文件时，我只需根据[Authenticating REST Requests](http://docs.amazonwebservices.com/AmazonS3/latest/index.html?RESTAuthentication.html)创建一个经过身份验证的 url ，用户可以下载文件，间隔为 5分钟。

但是一旦生成了 url，我就可以在 url 中看到我的亚马逊密钥，这是我应该担心的事情吗？（我的意思是我知道您还需要拥有密钥才能访问任何对象）但这仍然安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T15:53:47.593

密钥可以公开分发，秘密不是。

所以答案是肯定的！

编辑：公钥和秘密用于生成随机数/签名。您需要同时为亚马逊生成有效（安全）请求。然而，这个秘密是私人的。

# c# - 重复的 WCF 服务调用保存在数据库中

> ID：789135
> 
> 赞同：0
> 
> 时间：2009-04-25T15:27:22.040
> 
> 标签：c#, multithreading, wcf, duplicate-data

我们有一个 C# WCF 服务 (3.0)，它接收数据，然后使用相同的数据对第三方进行另一个 Web 服务调用。

在第三方调用之前，条目数据作为记录保存在数据库中，然后使用来自第三方 Web 服务的响应数据进行更新。

我们已经开始做一些负载/压力测试，并注意到数据库中的重复记录正在被保存（其中包括一个随机生成的字母数字值）；一次 2 或 3 个。然而，当我们检查第三方服务数据时，它们被作为单独的条目记录在他们身边。

我们这边唯一不同的数据库字段是“LastModifiedDate”，它们彼此相差几毫秒。

有什么想法可以称之为这种行为吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T15:29:57.277

也许您随机生成的字母数字值不够独特。尝试添加 IDENTITY 列或使用 GUID。

# php - ubb论坛报错 无法连接数据库！

> ID：789136
> 
> 赞同：-1
> 
> 时间：2009-04-25T15:27:36.797
> 
> 标签：php, mysql

我最近将我的 ubb 论坛网站迁移到一个新的虚拟主机服务器，我已经将文件放在新服务器上，我认为目录结构是正确的，并且还通过 phpmyadmin 设置了数据库，并相应地更改了配置文件，但我仍然得到这个错误

UBB 消息 我们遇到了问题。报告的原因是

```
Script:

Line#:

SQL Error:

SQL Error #:

Query: Unable to connect to the database! 
```

我认为我在这里填写的配置文件的所有信息：

```
'DATABASE_SERVER' => 'db.aa.0000000.hostedresource.com',
'DATABASE_USER' => 'abcd',
'DATABASE_PASSWORD' => 'cccc',
'DATABASE_NAME' => 'ssddd', 
```

是正确的，因为我试图通过另一个脚本连接到 db 并且它确实工作并检索了数据，所以我完全困惑我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-28T06:40:26.317

您确定这是正确的配置数据吗？您是否将其复制到错误的配置文件中？这似乎是最可能的错误来源（例如，有效的脚本具有相似但略有不同的值，这些值实际上是正确的，乍一看就像您的配置文件中的值）。

# iphone - 这在iphone编程中意味着什么？

> ID：789141
> 
> 赞同：6
> 
> 时间：2009-04-25T15:30:22.830
> 
> 标签：iphone, objective-c, xcode

```
#pragma mark Internal API 
```

我在一本名为 xcode_quick_tour_iphoneOS 的书中看到了这一点。

有人知道吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-25T15:36:26.497

该`#pragma`指令是一个特殊的预处理器指令，它允许 C 预处理器几乎可以创建“可移植”扩展。基本上，当另一个预处理器看到它不理解的 pragma 指令时，它应该忽略它。

在这种情况下，`#pragma mark`旨在帮助文档。当您将这些行添加到源文件时，Xcode 将在其*跳转到*下拉菜单中分解您的源代码，您可以使用该菜单跳转到代码中的特定区域（如函数定义或常量定义）。如果添加`#pragma mark -`，Xcode 也会在下拉菜单中添加一个水平分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T16:28:53.390

该指令用于为编译器指定不同的选项。这些选项特定于您使用的平台和编译器。有关可以使用#pragma 定义的可能参数的更多信息，请参阅编译器的手册或参考。

如果编译器不支持#pragma 的特定参数，它会被忽略——不会产生错误。

有关预处理器指令的说明，请参见：[http ://www.cplusplus.com/doc/tutorial/preprocessor/](http://www.cplusplus.com/doc/tutorial/preprocessor/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-25T16:08:39.540

Apple 有一个内部 API，它不打算由应用程序开发人员使用，因此这些 pragma 从开发人员文档中“隐藏”了 API

# javascript - 如何确保 AJAX 编码能够正常工作

> ID：789142
> 
> 赞同：1
> 
> 时间：2009-04-25T15:30:34.233
> 
> 标签：javascript, jquery, ajax

我正在使用 Jquery`<textarea>`通过 AJAX 将 a 的值提交给 PHP 脚本。此值可能包含标点字符`(!,?,#,@)`以及单引号和双引号，以及其他非字母数字字符。Jquery 是否负责对所有这些内容进行编码，还是我需要自己进行编码？我如何确定用户输入的任何内容`<textarea>`都会被提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T15:36:53.640

我为此使用 encodeURIComponent 。如果存在文本包含“%”符号的风险，我会在编码之前将其替换为 htmlcode (&#something)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T15:36:03.703

是的，jquery 会关心这个。但始终将正确的编码添加到您正在浏览的页面。就我而言，我尝试始终使用 utf-8

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# jquery - 如何只选择有文字没有图片链接的链接

> ID：789143
> 
> 赞同：3
> 
> 时间：2009-04-25T15:31:13.873
> 
> 标签：jquery

我是 jQuery 的新手。这对我来说使用 XPath 表达式没有问题，但我怎样才能以 'jQuery' 的方式做到这一点呢？

给定以下示例：

```
<stuff>
    <a href="target.html">ASDF</a>
    <a href="target.html"><img src="asdf.png" /></a>
</stuff> 
```

我怎样才能用 jQuery 只选择文本链接，而让带有 img 标签的链接保持不变？

帮我查询 kenobi，你是我唯一的希望；）

莉亚公主

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T15:48:31.617

$('a:not(:has(img))')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T15:38:59.843

```
$('a:not(img)') 
```

那应该做的工作。

# grails - Grails & Navigation Plugin：渲染来自不同控制器的子项？

> ID：789146
> 
> 赞同：5
> 
> 时间：2009-04-25T15:32:38.457
> 
> 标签：grails

我正在使用 Grails 1.1 和导航插件 1.0.4 并且遇到了问题。我想让来自 3 个不同控制器的操作作为子项贡献给来自不同控制器的菜单。

我看到的所有示例都使用了主菜单和子项的基本情况，这些子项指向同一控制器内的操作。

我试图使用一个完全分离的控制器，只是为了在那里贴上导航，对子项使用重定向（见下文）。但在这种情况下，子项只是不呈现。

```
class ResourceNavController {

// Navigation
static navigation = [ group:'modules', order:100, title:'Test', action:'listResources',
    subitems: [
        [group:'modules', order:10, title:'Resources', action:'listResources'],
        [group:'modules', order:20, title:'Environments', action:'listEnvironments'],
        [group:'modules', order:30, title:'Settings', action:'listSettings']
    ]
]

def listResources = {
    redirect(controller:"resource",action:"list")
}

def listEnvironments = {
    redirect(controller:"environment",action:"list")
}

def listSettings = {
    redirect(controller:"setting",action:"list")
}

} 
```

有什么线索吗？

谢谢，罗洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-05T10:34:44.160

您是否尝试按照文档中的说明在 Config.groovy 中使用显式控制器属性注册导航信息？（请参阅“或者，在 Config.groovy 中添加项目” [1](http://grails.org/plugin/navigation)

它可能有效，但我认为它不会正确突出“活动”项目。真的，这永远不会很好地工作，你所做的与基于“约定”的设置不兼容。

导航插件 2.0（还没有 ETA）将有一个不同的基于非控制器的机制来检测当前活动的菜单项，这在这种情况下可能会更好地工作。

您可以随时直接通过电子邮件向我（插件的作者）发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-23T10:24:41.893

好的，有另一个解决方法...

从改变

```
def eachSubItem = { attrs, body ->
...
   searchKey = GrailsClassUtils.getLogicalName(controllerName, 'Controller')
...
} 
```

至

```
def eachSubItem = { attrs, body ->
...
   searchKey = flash.prevcon ?: GrailsClassUtils.getLogicalName(controllerName, 'Controller')
...
} 
```

并添加到所有重定向/转发调用“flash.prevcon = controllerName”

```
class ResourceNavController {

// Navigation
static navigation = [ group:'modules', order:100, title:'Test', action:'listResources',
        subitems: [
                [group:'modules', order:10, title:'Resources', action:'listResources'],
                [group:'modules', order:20, title:'Environments', action:'listEnvironments'],
                [group:'modules', order:30, title:'Settings', action:'listSettings']
        ]
]

def listResources = {
        flash.prevcon = controllerName
        redirect(controller:"resource",action:"list")
}

def listEnvironments = {
        flash.prevcon = controllerName
        redirect(controller:"environment",action:"list")
}

def listSettings = {
        flash.prevcon = controllerName
        redirect(controller:"setting",action:"list")
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-22T09:39:17.297

解决了我的问题！！！！

我不知道这是否是最好的解决方案，但对我来说它就像一个魅力......如果我得到更好的解决方案，我会告诉你......

从 NavigationTagLib.groovy 更改

```
def eachSubItem = { attrs, body ->
...
   searchKey = GrailsClassUtils.getLogicalName(controllerName, 'Controller')
...
} 
```

至

```
def eachSubItem = { attrs, body ->
...
   searchKey = GrailsClassUtils.getLogicalName(controllerName, 'Controller').split(/[A-Z]/)[0]
...
} 
```

约定是（为此将示例更改为）：

```
class ResourcenavController {

// Navigation
static navigation = [ group:'modules', order:100, title:'Test', action:'listResources',
        subitems: [
                [group:'modules', order:10, title:'Resources', action:'listResources'],
                [group:'modules', order:20, title:'Environments', action:'listEnvironments'],
                [group:'modules', order:30, title:'Settings', action:'listSettings']
        ]
]

def listResources = {
        redirect(controller:"resourcenavResource",action:"list")
}

def listEnvironments = {
        redirect(controller:"resourcenavEnvironment",action:"list")
}

def listSettings = {
        redirect(controller:"resourcenavSetting",action:"list")
}

} 
```

grails 版本：1.3.4 导航版本：1.1.1

* * *

你好，

首先感谢您迄今为止所做的出色工作。

有没有解决问题的办法？

我刚刚从 grails 1.2.1 升级到 1.3.4 并遇到了这个问题，而 1.2.1 则没有这个问题（为什么到目前为止还没有调试过）。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-08T01:43:11.380

你的gsp是什么样的？... IE：

```
<nav:render group="modules" /><br />
<nav:renderSubItems group="modules" />

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-10-27T13:28:08.427

解决此问题的最简单方法是编辑 NavigationService.groovy 并更改第 62 行：

这个

```
result.controller = p.controller 
```

进入

```
result.controller = subitem.controller ? subitem.controller : p.controller 
```

你可以在导航参数中设置控制器参数，如下所示：

```
static navigation = [
    group: 'tabs',
    order: 1,
    title: 'Title',
    subItems: [
            [action: 'list', title: 'Title 1'],
            [action: 'anotherList', title: 'Another title'],
            [controller: 'someOtherController', action: 'list', title: 'Last title'],
    ],
] 
```

# java - 兵马俑性能和技巧

> ID：789147
> 
> 赞同：9
> 
> 时间：2009-04-25T15:33:22.430
> 
> 标签：java, performance, jakarta-ee, map, terracotta

大约一个月前发现 Terracotta 后，我才刚刚开始学习如何使用它。这是一项非常酷的技术。

基本上我想做的是：

我的根（记录系统）是一个 ConcurrentHashMap。

主要的 Instrumented 类是一个“JavaBean”，它有 30 个左右的字段，我希望它们存在于 HashMap 中。

Hashmap 中将存在大约 20000 个这些 JavaBean。

每个 bean 有（至少）5 个字段，每 5 秒更新一次。

（我为此使用 Terracotta 的原因是因为这些 JavaBean 需要可跨 JVM 和节点访问。）

比我有更多 TC 经验的人有什么建议吗？性能是关键。

任何其他类似应用程序的示例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-25T18:57:47.323

您可能会发现在一个锁定范围内批处理多个更改会执行得更好。每个同步块/方法形成一个写事务（假设您使用写锁），必须将其发送到服务器（并可能返回到其他节点）。通过更改一堆字段，可能在一个锁下的一堆对象上，您可以减少创建事务的开销。至少可以玩的东西。

分区也是提高性能的关键方法。更改只需要发送到实际使用对象的节点。因此，如果您可以划分哪些节点通常会接触特定对象，从而减少必须在集群中发送的更改数量，从而提高性能。

unnutz 关于使用 CHM 或 CSM 的建议很好。CHM 允许更大的并发性（因为每个内部段都可以被锁定并同时使用）——确保也尝试使用更大的段数。CSM 每个条目有效地具有一个锁，因此在 N 大小的表中有效地具有 N 个分区。这可以大大减少锁争用（以管理更多内部锁对象为代价）。CSM 即将发生的变化将使锁定管理成本大大降低。

通常我们发现一个好的策略是：

1.  构建性能测试（应该是多线程和多节点的，并且类似于您的应用程序（或您的实际应用程序！）
2.  调整对象 - 查看开发控制台中的集群对象图以查找根本不需要集群的对象 - 有时这种情况会意外发生（使用瞬态字段删除或剪切集群）。有时你可能会聚集一个 long 可以做的日期。微小的变化，但这是每个地图条目的一个对象，这可能会有所作为。
3.  调整锁 - 使用开发控制台中的锁分析器来查找热锁或太窄或太宽的锁。集群统计记录器也可以帮助查看交易规模。
4.  Tune GC 和 DGC - 调整 JVM 垃圾收集，然后通过打开更改年轻一代 gc 的频率来调整 Terracotta 分布式 GC。
5.  Tune TC server - 很多非常详细的调整在这里做，但通常不值得，直到上面的东西被调整。

[也可以在Terracotta 论坛](http://forums.terracotta.org)上随意提问- 所有工程、现场工程、产品管理人员都观看这些并在那里回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T16:33:34.673

首先，我建议你也可以在他们的论坛上提出这个问题。

其次，实际上，集群在 Terracotta 上的应用程序的性能将取决于发生的写入事务的数量。因此，您可以考虑使用 ConcurrentStringMap（如果您的键是字符串）或 ConcurrentHashMap。请注意，从性能角度来看，CSM 比 CHM 好得多。

毕竟，POJO 是延迟加载的。这意味着每个属性都是按需加载的。

希望有帮助。

干杯

# asp.net - 如何将 Ajax 控件工具包添加到 Visual Web Developer Express 2008

> ID：789154
> 
> 赞同：1
> 
> 时间：2009-04-25T15:35:38.043
> 
> 标签：asp.net, ajax, visual-studio

任何人都知道在哪里复制 AjaxControlToolkit.DLL 以便它出现在 Ajax 控件下的工具箱中？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T15:39:00.437

[http://weblogs.asp.net/nannettethacker/archive/2008/02/07/ajax-control-tokit-installation-in-visual-web-developer.aspx](http://weblogs.asp.net/nannettethacker/archive/2008/02/07/ajax-control-tookit-installation-in-visual-web-developer.aspx)

# c++ - 如何找到覆盖有向循环图中所有节点的最短路径？

> ID：789159
> 
> 赞同：6
> 
> 时间：2009-04-25T15:36:40.317
> 
> 标签：c++, algorithm, graph-theory, cycle, shortest-path

我需要一个节点的有向循环图的最短路径示例（它应该从将成为输入的节点到达图的所有节点）。

请如果有一个例子，我需要它在 C++ 或算法中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-25T15:56:06.340

编辑：哎呀，误读了这个问题。感谢@jfclavette 接受这个。旧答案在最后。

您要解决的问题称为[旅行推销员问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)。有许多[潜在的解决方案](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Computing_a_solution)，但它是 NP 完全的，因此您将无法解决大图。

老答案：

您要查找的内容称为图形的[周长](http://en.wikipedia.org/wiki/Girth_(graph_theory))。它可以通过将节点到自身的距离设置为无穷大并使用[Floyd-Warshall](http://en.wikipedia.org/wiki/Floyd-Warshall)算法来解决。节点 i 的最短循环长度就是位置 ii 的入口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-27T10:55:11.663

在未加权的情况下：[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。在加权情况下：[Dijkstra 的](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-20T04:34:47.677

在伪代码中：

```
//INPUT: graph G = (V,E)
//OUTPUT: shortest cycle length
min_cycle(G)
  min = ∞
  for u in V
    len = dij_cyc(G,u)
    if min > len
      min = len
  return min    

//INPUT: graph G and vertex s
//OUTPUT: minimum distance back to s
dij_cyc(G,s)
  for u in V
    dist(u) = ∞
                   //makequeue returns a priority queue of all V
  H = makequeue(V) //using dist-values as keys with s First In
  while !H.empty?
    u = deletemin(H)
    for all edges (u,v) in E
      if dist(v) > dist(u) + l(u,v) then
        dist(v) = dist(u) + l(u,v)
        decreasekey(H,v)

  return dist(s) 
```

这在每个顶点上运行的 Dijkstra 略有不同。变异的 Dijkstras 有几个关键的区别。首先，所有初始距离都设置为∞，甚至起始顶点也是如此。其次，必须首先将起始顶点放入队列中，以确保它首先退出，因为它们都具有相同的优先级。最后，变异的 Dijkstras 将距离返回到起始节点。如果没有返回起始顶点的路径，则距离保持为 ∞。来自变异 Dijkstras 的所有这些返回中的最小值是最短路径。由于 Dijkstras 在 O(|V|^2) 中运行最差，而 min_cycle 运行这种形式的 Dijkstras |V| 次，找到最短循环的最终运行时间是 O(|V|^3)。如果 min_cyc 返回 ∞，则该图是非循环的。

要返回最短循环的实际路径，只需稍作修改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T22:49:28.873

对于非加权图，BFS 将完成这项工作。由于您的图中存在潜在的循环，因此您需要跟踪访问的节点（无论如何您都需要为 BFS 执行此操作）。

对于加权图，可以使用 bellman-Ford 算法。它还能够检测周期。

# perl - 如何通过 Perl 模块获取图像的元数据？

> ID：789162
> 
> 赞同：0
> 
> 时间：2009-04-25T15:38:38.393
> 
> 标签：perl, image, metadata

我通过 MacPorts 安装了以下组件：

```
p5-image-info @1.16 (perl, graphics)
Extract meta information from image files 
```

它在[其网站上](http://cpansearch.perl.org/src/GAAS/Image-Info-1.16/README)说您可以通过以下方式使用它

```
 Usage is something like this:

   use Image::Info qw(image_info);

   @info = image_info("filename");
   $refto_hash_describing_1st_image = $info[0];
   $refto_hash_describing_2nd_image = $info[1]; 
```

但是，我运行不成功

```
$perl  use Image::Info qw(image_info);
-bash: syntax error near unexpected token `('
$ 
```

**如何通过 Perl 模块获取图像的元数据？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T15:47:52.943

所描述的语法是如何在 Perl 脚本中使用它，**而不是**如何在 shell 中将其用作单行。

把它放在一个 .pl 文件中（例如“image_info.pl”）：

```
#!/usr/bin/perl -w
use strict;
use Image::Info qw[image_info];
use Data::Dumper;

while (@ARGV) {
  print Dumper(image_info(shift));
} 
```

并这样运行它：

```
$ ./image_info.pl file.jpg 
```

并陶醉于它会告诉你的大量信息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T17:09:39.690

阅读 [http://perldoc.perl.org/perlrun.html](http://perldoc.perl.org/perlrun.html)

# database - Visual Studio 2008，本地数据库，无法修改自定义表视图

> ID：789167
> 
> 赞同：1
> 
> 时间：2009-04-25T15:40:05.020
> 
> 标签：database, sql-server-2008, visual-studio, sql-server-2005, visual-studio-2008

我刚刚在我的机器上安装了 Visual Studio 2008 和 SQL Server 2008 - 按此顺序。

我注意到 VS 坚持安装 SQL Server 2005 Express 以便能够通过 Web 项目创建本地数据库。

无论如何，每当我添加本地数据库并创建图表时，我似乎都无法修改`Custom`表格视图。

例如，我喜欢查看列名、数据类型、可空值和默认值列。

每当我单击`"Table View" - "Modify Custom"`时，什么都没有发生！

奇怪的是，此操作在 SQL Server 2008 中运行良好。

有没有其他人遇到过这个 - 并且（希望）找到了解决方案？

# c# - 重命名保留字的属性/方法名称的最佳实践？

> ID：789170
> 
> 赞同：6
> 
> 时间：2009-04-25T15:42:30.430
> 
> 标签：c#, .net, vb.net, naming-conventions

我正在创建一个类。当您的首选名称是保留字时，命名属性/方法的最佳做法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-25T15:45:11.530

我通常会尝试想一些同义的替代词或变体，尽管它听起来并不适合你。

或者，您可以使用“@”前缀（在 C# 中）或 [方括号]（在 VB.NET 中）来明确避免与语言中的保留字冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T15:43:59.287

在 VB.NET 中，您可以将属性名称括在方括号内：

```
Public Property [Make] As String 
```

（我不确定 C#，但您也将帖子标记为 vb.net）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T15:44:28.053

make 和 model 都不是保留的 C# 字。如果您确实需要使用保留字，最好的办法是尝试想出一个同义词。

# grep - 基本的 grep

> ID：789171
> 
> 赞同：2
> 
> 时间：2009-04-25T15:43:08.243
> 
> 标签：grep

我有一个大文件，其中每一行都包含一个子字符串，例如 ABC123。如果我执行

```
grep ABC file.txt 
```

或者

```
grep ABC1 file.txt 
```

我按预期恢复了这些行，但是如果我执行

```
grep ABC12 file.txt 
```

grep 找不到相应的行。

这似乎是非常微不足道的功能，但我不是 grep 的重度用户，所以也许我错过了一些问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T16:03:58.333

使用类似的东西

```
od -x -a < filename 
```

以十六进制转储文件内容。这将立即向您显示文件中的内容是否符合您的期望。我怀疑不是:-)

注意：`od`这里有很多有用的选项可以帮助您。实在太多了，就不一一列举了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T15:50:31.517

您的文件是否有可能包含一些隐藏字符，例如 0x00 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T15:47:11.323

这没有意义。您确定该文件包含“ABC123”吗？

您可以通过在 shell 中运行以下命令来验证这一点

```
echo "ABC123" | grep ABC12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T15:48:59.430

如果这些行包含 ABC123，那么“grep ABC12”应该得到它们。您的意思是要匹配几个不同的字符串，例如 ABC1、ABC2 和 ABC3？在这种情况下，你可以试试这个：

```
grep -E 'ABC1|ABC2|ABC3' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T15:50:16.947

我不确定问题是什么..`grep`完全可以正常工作..例如，我的测试文件的内容：

```
$ cat file.txt
ABC
ABC1
ABC12
ABC123 
```

..and grep'ing for ABC, ABC1, ABC12, ABC123:

```
$ grep ABC file.txt 
ABC
ABC1
ABC12
ABC123
$ grep ABC1 file.txt 
ABC1
ABC12
ABC123
$ grep ABC12 file.txt 
ABC12
ABC123
$ grep ABC123 file.txt 
ABC123 
```

`grep`基本上是一个过滤器，将显示包含第一个参数（ABC 或 ABC1 等）的任何行。如果不包含整个字符串，则不会显示

# linux - 转换键盘字符

> ID：789173
> 
> 赞同：1
> 
> 时间：2009-04-25T15:44:00.317
> 
> 标签：linux, keyboard

我想找到/编写一个程序，如果控制字符被按下，它可以拦截在键盘上输入的所有字符并将 Dvorak 映射到 QWERTY。我通常会输入 Dvorak，但只要我输入控制字符（例如 CTRL 或 ALT），我的输入就会切换到 Dvorak。例如 CTRL-D 将变为 CTRL-E。

操作系统将是 Debian。我不知道从哪里开始（也许是 xmodmap？）所以任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T16:05:13.370

[这](http://youshottheinvisibleswordsman.co.uk/2008/05/13/dvorak-configuration-debian-linux/)似乎是一个很好的资源

# iphone - 设置没有应用委托的导航控制器

> ID：789192
> 
> 赞同：0
> 
> 时间：2009-04-25T15:53:07.453
> 
> 标签：iphone, uinavigationcontroller

单击按钮后，我想显示一个导航控制器。每个教程都假定导航控制器将是第一个屏幕，因此它将其链接到 App Delegate，但 App Delegate 仅出现在 MainWindow.xib 中。你们如何将导航控制器添加到不同于 MainWindow 的视图中？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-18T01:54:32.923

这是一些示例代码来扩展罗杰的答案。以下方法链接到当前视图控制器上的一些用户交互（例如撰写电子邮件）。这将为撰写视图提供顶部的导航栏，而不是自定义视图内的编码按钮。

```
-(void) composeButtonPushed: (id) sender {
    ComposeViewController *controller = [[ComposeViewController alloc] initWithNibName:@"ComposeView" bundle:nil];
    UINavigationController *composeNavController = [[UINavigationController alloc] initWithRootViewController:controller];
[self presentModalViewController:composeNavController animated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T21:25:12.493

UINavigationController 是使用 UIViewControllers 导航视图的层次结构。如果您没有根 UIViewController，它将无法工作（并且没有意义）。如果你有一个 UIViewController，你只需发送一个`- (id)initWithRootViewController:(UIViewController *)rootViewController`初始化消息到一个新的导航控制器，传入你的 UIViewController。

# php - MySQL查询从数据库中选择值等于两个不同事物之一的记录

> ID：789196
> 
> 赞同：3
> 
> 时间：2009-04-25T15:55:07.810
> 
> 标签：php, mysql

我必须从我的 MySQL 数据库中获取记录，其中：

```
sentto = "$username" 
```

或者

```
sentto = "everyone" 
```

我如何将其放入 MySQL 查询中？我尝试了一些东西，但它们似乎不起作用：

```
mysql_query("SELECT * 
             FROM pmessages 
             WHERE status='unread' 
                 AND sentto='$username' || sentto='everyone'");

mysql_query("SELECT * 
             FROM pmessages 
             WHERE status='unread' 
             AND sentto='$username' 
                 AND sentto='everyone'"); 
```

我似乎被难住了，如果有人知道如何以正确的方式做到这一点，请告诉我。这对我来说是一个新场景。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T16:00:35.080

```
SELECT * 
FROM pmmessages 
WHERE sentto = '$username' 
    OR sentto = 'everyone' 
```

**编辑**克里斯，根据您的新查询：

```
SELECT * 
FROM pmessages 
WHERE status='unread' 
    AND sentto='$username' 
OR sentto='everyone' 
```

您需要对其进行修改，以便您的 AND 独立（它与您的 OR 冲突）。

改写成这个

```
SELECT * 
FROM pmessages 
WHERE status='unread' 
    AND 
        (sentto='$username' 
            OR sentto='everyone' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T15:57:50.203

考虑到您的评论之一的细节 - 使用“ `OR`”关键字和括号来确保组合了正确的条件。

```
SELECT * FROM pmessages WHERE
   status = 'unread'
    AND
  (sentto = ? OR sentto = 'everyone') 
```

但是，您的问题从来都不是`OR`，它实际上是`AND`优先级和缺少括号。您从问题中完全省略的非常重要的细节是对“ `status = unread`”的附加测试。

注意`?`上面的用法——你应该*真的*，*真的*在结合 MySQL 和 PHP 时使用准备好的语句，即：

```
$sql = "..." # as above
$sth = $db->prepare($sql);
$res = $sth->execute($username);
while ($row = $sth->fetchrow()) {
    ...
} 
```

（或`mysqli`等价物）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:23:44.860

因为它是您正在测试的同一列，所以我会使用`IN`关键字：

```
SELECT * 
FROM pmessages 
WHERE status='unread' 
AND sentto IN ('everyone', '$username'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T15:58:40.157

单词 OR 是您要查找的内容：

mysql_query("SELECT * FROM pmessages WHERE sentto='$username' OR sentto='everyone'");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T16:06:48.233

每个人都是实际值还是要返回所有结果？

如果你想返回所有结果设置这样的

```
if (@sentto is null)
begin

     set @sendto='%'

end

mysql_query("SELECT * FROM pmessages WHERE sentto='$username'") 
```

# path - 循环有向图中的最短路径

> ID：789198
> 
> 赞同：2
> 
> 时间：2009-04-25T15:55:42.270
> 
> 标签：path, short

我需要一个关于一个节点的有向图循环最短路径的示例（它应该从阳极到达图的所有节点将是输入）如果有一个示例我需要它在 c++ 或算法中非常感谢... ……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T16:05:34.990

您需要找到它的[最小生成树](http://en.wikipedia.org/wiki/Minimum_spanning_tree) 。

对于根据维基百科的有向图，您可以使用[此](http://en.wikipedia.org/wiki/Chu%E2%80%93Liu/Edmonds_algorithm)算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-20T04:29:27.487

在伪代码中：

```
//INPUT: graph G = (V,E)
//OUTPUT: shortest cycle length
min_cycle(G)
  min = ∞
  for u in V
    len = dij_cyc(G,u)
    if min > len
      min = len
  return min    

//INPUT: graph G and vertex s
//OUTPUT: minimum distance back to s
dij_cyc(G,s)
  for u in V
    dist(u) = ∞
                   //makequeue returns a priority queue of all V
  H = makequeue(V) //using dist-values as keys with s First In
  while !H.empty?
    u = deletemin(H)
    for all edges (u,v) in E
      if dist(v) > dist(u) + l(u,v) then
        dist(v) = dist(u) + l(u,v)
        decreasekey(H,v)

  return dist(s) 
```

这在每个顶点上运行的 Dijkstra 略有不同。变异的 Dijkstras 有几个关键的区别。首先，所有初始距离都设置为∞，甚至起始顶点也是如此。其次，必须首先将起始顶点放入队列中，以确保它首先退出，因为它们都具有相同的优先级。最后，变异的 Dijkstras 将距离返回到起始节点。如果没有返回起始顶点的路径，则距离保持为 ∞。来自变异 Dijkstras 的所有这些返回中的最小值是最短路径。由于 Dijkstras 在 O(|V|^2) 中运行最差，而 min_cycle 运行这种形式的 Dijkstras |V| 次，找到最短循环的最终运行时间是 O(|V|^3)。如果 min_cyc 返回 ∞，则该图是非循环的。

要返回最短循环的实际路径，只需稍作修改。

# php - Javascript 不会在 php 页面上运行

> ID：789205
> 
> 赞同：1
> 
> 时间：2009-04-25T15:58:56.007
> 
> 标签：php, javascript, html

我有一个 php 页面，我有一些 javascript 代码来运行一些字段。我很好地从我拥有的工作测试中复制并修改了一些代码以适应。好吧，它不起作用，我似乎无法工作。有什么明显的我遗漏了，还是有其他原因导致它没有运行？

```
 <?php

 //server connection info

 ?>
 <html>
 <head>
 <title>Survey</title>
 <link rel="stylesheet" type="text/css" href="styles.css" />

       <script type="text/javascript">
           function Total()
           {

               var a=document.getElementById("a").value;
               var b=document.getElementById("b").value;
               var c=document.getElementById("c").value;
               var d=document.getElementById("d").value;

               a=parseInt(a);
               b=parseInt(b);
               c=parseInt(c);      

               var total=a+b+c;

               document.getElementById("total").value=total;

           }

       </script>

 </head>

 <body>
 <h1>QUALITY OF LABOR SURVEY</h1>
 <p />
 <h2>ABOUT YOUR COMPANY</h2>

 <div class="Wrapper">

     <form id="Main" method="post" action="Process.php">

         <div class="Question">
              1\. In what state and county is your business located? (click below)
         </div>
         <div class='answer'>
         <?php
             $tsql = "select
                StateCountyID,
                State,
                County
                from dbo.StateCounty
                where State='MO'
                      and Active='True'
                order by State";

             $tsql2 = "select
                StateCountyID,
                State,
                County
                from dbo.StateCounty
                where State='IL'
                      and Active='True'
                order by State";

             /* Execute the query. */
             $stmt = sqlsrv_query( $conn, $tsql);
             if ( $stmt )
             {

                 echo "<span><select name='ListMO'>";
                 echo "<option value='0'>MO-County</option>";

                 while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_NUMERIC))
                 {

                     echo "<option value='".$row[0]."'>";
                     echo $row[2];
                     echo "</option>";

                 }

                 echo "</select></span>";

             }
             else
             {
                  echo "Error in statement execution.\n";
                  die( print_r( sqlsrv_errors(), true));
             }

             $stmt2 = sqlsrv_query( $conn, $tsql2);
             if ( $stmt2 )
             {

                 echo "<span><select name='ListIL'>";
                 echo "<option value='0'>IL-County</option>";

                 while( $row = sqlsrv_fetch_array( $stmt2, SQLSRV_FETCH_NUMERIC))
                 {
                     echo "<option value='".$row[0]."'>";
                     echo $row[2];
                     echo "</option>";

                 }

                 echo "</select></span>";

             }
             else
             {
                 echo "Error in statement execution.\n";
                 die( print_r( sqlsrv_errors(), true));
             }
        ?>
           </div>

         <table width="700px">
           <tr>
             <td style="font-size: 1.2em; font-weight: bold;">
                 ABOUT YOUR EMPLOYMENT
             </td>
             <td style="font-weight: bold;">
                 (Exclude Temporary Employees Throughout Survey)

             </td>
           </tr>

         </table>

         <p />
         <b>Please estimate the following:</b>

         <p />

         <div class="Question">
              4\. Number of Full-Time Hourly Employees (Eligible for Full-Time Benefits)
         </div>

         <div class="Answer">
              <input type="text" id="a" value="0" onchange="Total();" />
         </div>

         <div class="Question">
              5\. Number of Part-Time Hourly Employees(Not Eligible for Full-Time Benefits)
         </div>

         <div class="Answer">
              <input type="text" id="b" value="0" onchange="Total();" />
         </div>

         <div class="Question">
              6\. Salaried Employees
         </div>

         <div class="Answer">
              <input type="text" id="c" value="0" onchange="Total();" />
         </div>

         <div class="Question">
              7\. Is this your current number of employees?  If not, change responses to 4, 5, and 6.
         </div>

         <div class="Answer">
              <input type="text" id="total" value="0" onchange="Total();" />
         </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-25T16:01:37.747

```
var d=document.getElementById("d").value; 
```

产生错误，因为你似乎没有元素`id="d"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T18:22:17.020

我还想提供一些建议以改进您的代码。

# 调试 JavaScript

*   firefox 扩展 firebug 绝对是调试 javascript 的必备工具。

[https://addons.mozilla.org/en-US/firefox/addon/1843](https://addons.mozilla.org/en-US/firefox/addon/1843)

# 编写 Javascript

*   将 javascript 放在一个单独的文件中，例如：myjavascript.js 并从您的 html 页面中包含该文件。这将减少您的页面重量，并且您将拥有更清晰的代码分离。
*   使用 javascript 框架来帮助您生成更好的 javascript，例如 jquery 或 yui（雅虎用户界面库）。

[http://jquery.com/](http://jquery.com/)
[http://developer.yahoo.com/yui/](http://developer.yahoo.com/yui/)

# 编写 PHP

*   通过将 PHP 放在单独的文件中并包含它来更好地分离 PHP/HTML。例如：

[http://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html/](http://toys.lerdorf.com/archives/38-The-no-framework-PHP-MVC-framework.html/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T16:02:31.143

有几件事要检查。

*   它不适用于所有浏览器吗？
*   您是否确认确切的代码在单独的文件中有效
*   您是否尝试将脚本移动到页面底部？

您还应该在 Firefox 中使用调试器，甚至可以找到像[Firebug](http://getfirebug.com/) for Firefox 这样的工具。对发现此类问题有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T16:03:47.147

请尽量缩短您的问题！隔离它！

我也强烈推荐使用[Firebug](http://getfirebug.com/)

你很快就会找到答案:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T16:04:36.053

您的 HTML 中没有元素“d”。如果您注释掉该行：

```
var d=document.getElementById("d").value; 
```

它应该可以正常工作

# iphone - 导航控制器的差距

> ID：789213
> 
> 赞同：0
> 
> 时间：2009-04-25T16:03:20.863
> 
> 标签：iphone, uinavigationcontroller, uinavigationbar

我在视图上有一个按钮。当我点击它时，它应该加载另一个视图，一个带有导航控制器的视图。到目前为止，我已经掌握了这个，按钮调用了这个方法：

```
-(IBAction)loadOptionsView:(id)sender {

     if (self.optionsRootController == nil) {

          //optionsRootController is declared as: UINavigationController *optionsRootController;
          optionsRootController = [[UINavigationController alloc] init];

          //Options is a UIViewController
          Options *myOptions = [[Options alloc] initWithNibName:@"OptionsMenu" bundle:nil];
          [optionsRootController pushViewController:myOptions animated:NO];
          [myOptions release];
     }

     [self.view addSubview:optionsRootController.view];

} 
```

当我单击该按钮时发生的情况是它在当前屏幕顶部加载了 xib 文件 OptionsMenu，但在状态栏大小的顶部有一个间隙，所以我可以看到下面的视图。有什么帮助吗？加载包含导航控制器的新视图的正确方法是什么？

谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-26T19:27:05.310

我通过放置以下解决了这个问题：

```
[optionsRootController pushViewController:myOptions animated:NO]; 
```

这一行：

```
[optionsRootController.view setFrame: [self.view bounds]]; 
```

好，易于！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T16:09:40.613

我认为 UINavigationController 的指定初始化程序是

```
 - (id) initWithRootController:(UIViewController *)rootController 
```

所以你上面的代码会更好地表达为

```
 //optionsRootController is declared as: UINavigationController *optionsRootController;

  //Options is a UIViewController
  Options *myOptions = [[Options alloc] initWithNibName:@"OptionsMenu" bundle:nil];
  optionsRootController = [[UINavigationController alloc] initWithRootController: myOptions];
  [myOptions release]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-25T21:01:20.240

笔尖中的视图是否适合整个屏幕？尝试关闭 IB 中的模拟状态栏。

# wpf - 在 TextBlock 中使用绑定的硬编码文本

> ID：789222
> 
> 赞同：64
> 
> 时间：2009-04-25T16:06:45.080
> 
> 标签：wpf, xaml, data-binding, textblock

在 WPF 中，有没有办法让`Text`a 的属性`TextBlock`同时包含硬编码文本和特定绑定？

我想到的是以下内容（*当然，以下内容无法编译）*：

```
<TextBlock Text="Number of Fans: {Binding Artist.Fans.Count}"></TextBlock> 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2009-04-25T16:14:34.267

有，如果你在 .Net 3.5 SP1

```
<TextBlock Text="{Binding Path=Artist.Fans.Count, 
                 StringFormat='Number of Fans: {0}'}" /> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-12T22:10:08.773

在使用上述方法时：

```
<TextBlock Text="{Binding Path="Artist.Fans.Count, 
                  StringFormat='Number of Fans: {0}'}" /> 
```

我发现它有些限制，因为我找不到在 StringFormat 内加粗的方法，也不能在 StringFormat 中使用撇号。

相反，我采用了这种方法，这对我来说效果更好：

```
<TextBlock TextWrapping="Wrap">
    <Run>The value</Run>
    <Run Text="{Binding Path=MyProperty1, Mode=OneWay}" FontWeight="Bold" />
    <Run>was invalid. Please enter it with the format... </Run>
    <LineBreak/><LineBreak/>
    <Run>Here is another value in the program</Run>
    <Run Text="{Binding Path=MyProperty2, Mode=OneWay}" FontWeight="Bold" />
</TextBlock> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-25T16:16:35.883

使用[`Binding.StringFormat`](http://dotnet.org.za/rudi/archive/2008/05/16/using-binding-stringformat.aspx)：

```
<TextBlock Text="{Binding Artist.Fans.Count, StringFormat='Number of Fans: {0}'}"/> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-28T07:00:14.723

这里的绑定值（clouds.all）添加了“%”。您可以在“\{0\}”之后添加所需的任何值。

```
 <TextBlock Text="{Binding Path=clouds.all, StringFormat=\{0\}%}"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-18T21:51:28.487

**通过使用模板 10 和 MVVM 的 XAML：**

只是要清楚：

*   根据定义，绑定将值绑定到控件的属性。
*   在“模板 10”框架中实现的 MVVM 范例下，值在与相关 XAML 页面关联的 ViewModel 中初始化。

以下是如何将硬编码文本与 Text 属性中的绑定一起使用：

```
 <Page
        ...
        xmlns:vm="using:doubleirish.ViewModels"
        xmlns:sys="using:System"
        xmlns:controls="using:Template10.Controls"
        ...

        <Page.DataContext>
            <vm:StocksViewModel x:Name="ViewModel" />
        </Page.DataContext>

        ...

        <controls:PageHeader ... Text="{x:Bind sys:String.Format('Ticker : {0}', ViewModel.Ticker)}">

    ...

    </Page> 
```

# sql - 是否评估了 SQL WHERE 子句短路？

> ID：789231
> 
> 赞同：158
> 
> 时间：2009-04-25T16:11:12.933
> 
> 标签：sql, short-circuiting

SQL WHERE 子句中的布尔表达式是否[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation) ？

例如：

```
SELECT * 
FROM Table t 
WHERE @key IS NULL OR (@key IS NOT NULL AND @key = t.Key) 
```

如果`@key IS NULL`评估为`true`，`@key IS NOT NULL AND @key = t.Key`评估？

如果没有，为什么不呢？

如果是，是否有保证？它是 ANSI SQL 的一部分还是特定于数据库？

如果特定于数据库，SQLServer？甲骨文？MySQL？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-05-26T09:23:41.583

ANSI SQL 草案 2003 5WD-01-Framework-2003-09.pdf

> 6.3.3.3 规则评估顺序
> 
> [...]
> 
> 在优先级不是由格式或括号确定的情况下，表达式的有效评估通常是从左到右执行的。但是， 表达式是否实际从左到右求值**取决于实现，特别是当操作数或运算符可能导致引发条件****或表达式的结果可以在不完全求值表达式的所有部分的情况下确定时。**

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-09-07T15:10:10.943

综上所述，短路实际上是不可用的。

如果需要，我建议使用 Case 语句：

```
Where Case when Expr1 then Expr2 else Expr3 end = desiredResult 
```

`Expr1`总是被评估，但每行只评估`Expr2`和之一。`Expr3`

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-04-25T18:06:27.180

我认为这是我写它好像它没有短路的情况之一，原因有三个。

1.  因为对于 MSSQL，它并不能通过在明显的地方查看 BOL 来解决，所以对我来说，这使得它在规范上模棱两可。

2.  因为至少那时我知道我的代码会起作用。更重要的是，那些追随我的人也会如此，所以我不会让他们一遍又一遍地担心同一个问题。

3.  我经常为几个 DBMS 产品编写代码，如果我可以轻松解决它们，我不想记住它们之间的差异。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-04-25T16:43:56.130

我不相信 SQL Server (2005) 中的短路是有保证的。SQL Server 通过其优化算法运行您的查询，该算法考虑了很多因素（索引、统计信息、表大小、资源等），以提出有效的执行计划。在此评估之后，您不能肯定地说您的短路逻辑是有保证的。

前段时间我自己也遇到过同样的问题，我的研究确实没有给我一个明确的答案。您可能会编写一个小查询来证明它有效，但您能否确定随着数据库负载的增加，表变得更大，并且数据库中的内容得到优化和更改，这个结论将抓住。我不能因此谨慎行事，并在 WHERE 子句中使用 CASE 以确保短路。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-25T23:58:47.880

您必须牢记数据库的工作方式。给定一个参数化查询，数据库会基于该查询构建一个执行计划，而不需要参数的值。无论实际提供的值是什么，每次运行查询时都会使用此查询。特定值的查询是否短路与执行计划无关。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-28T20:22:38.203

我通常将其用于可选参数。这和短路一样吗？

```
SELECT  [blah]
FROM    Emp
WHERE  ((@EmpID = -1) OR (@EmpID = EmpID)) 
```

这使我可以选择传入 -1 或其他任何内容来说明对属性的可选检查。有时这涉及加入多个表，或者最好是一个视图。

非常方便，不完全确定它给 db 引擎带来的额外工作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-14T19:33:27.387

刚刚偶然发现这个问题，并且已经找到了这个博客条目：[http ://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)

SQL 服务器可以在任何她认为合适的地方自由优化查询，因此在博客文章中给出的示例中，您不能依赖短路。

但是，显然记录了一个 CASE 以按书面顺序评估 - 检查该博客文章的评论。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-25T16:32:26.643

对于 SQL Server，我认为这取决于版本，但我对 SQL Server 2000 的经验是，即使 @key 为空，它仍会评估 @key = t.Key。换句话说，它在评估 WHERE 子句时不会进行有效的短路。

我见过人们推荐像您的示例这样的结构，作为一种灵活查询的方式，用户可以输入或不输入各种条件。我的观察是，当 @key 为空时，查询计划中仍涉及 Key，如果 Key 被索引，则它不会有效地使用索引。

这种具有不同标准的灵活查询可能是动态创建 SQL 确实是最好的方法的一种情况。如果@key 为空，那么您根本不将其包含在查询中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-25T18:25:23.080

短路求值的主要特点是一旦确定结果就停止求值。这意味着可以忽略表达式的其余部分，因为无论是否评估结果都是相同的。

二元布尔运算符是可交换的，这意味着：

```
a AND b == b AND a
a OR  b == b OR  a
a XOR b == b XOR a 
```

所以不能保证评估的顺序。评估顺序将由查询优化器确定。

在具有对象的语言中，可能存在您可以编写只能通过短路评估来评估的布尔表达式的情况。您的示例代码构造通常用于此类语言（C#、Delphi、VB）。例如：

```
if(someString == null | someString.Length == 0 )
  printf("no text in someString"); 
```

这个 C# 示例将导致异常 if`someString == null`因为它将被完全评估。在短路评估中，它每次都会起作用。

SQL 仅对无法取消初始化的标量变量（无对象）进行操作，因此无法编写无法计算的布尔表达式。如果你有一些 NULL 值，任何比较都将返回 false。

这意味着在 SQL 中，您不能编写根据使用短路或完全评估而进行不同评估的表达式。

如果 SQL 实现使用短路评估，它只能有望加速查询执行。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-25T22:58:04.267

我不知道短路，但我会把它写成 if-else 语句

```
if (@key is null)
begin

     SELECT * 
     FROM Table t 

end
else
begin

     SELECT * 
     FROM Table t 
     WHERE t.Key=@key

end 
```

此外，变量应始终位于等式的右侧。这使它变得可悲。

[http://en.wikipedia.org/wiki/Sargable](http://en.wikipedia.org/wiki/Sargable)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-07-25T14:27:42.733

下面是对 SQL Server 2008 R2 的快速而肮脏的测试：

```
SELECT *
FROM table
WHERE 1=0
AND (function call to complex operation) 
```

这会立即返回，没有记录。存在某种短路行为。

然后尝试了这个：

```
SELECT *
FROM table
WHERE (a field from table) < 0
AND (function call to complex operation) 
```

知道没有记录会满足这个条件：

```
(a field from table) < 0 
```

这需要几秒钟，表明短路行为不再存在，并且正在评估每条记录的复杂操作。

希望这对大家有帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-15T15:49:37.163

这是一个演示，证明**MySQL 确实执行 WHERE 子句短路**：

[http://rextester.com/GVE4880](http://rextester.com/GVE4880)

这将运行以下查询：

```
SELECT myint FROM mytable WHERE myint >= 3 OR myslowfunction('query #1', myint) = 1;
SELECT myint FROM mytable WHERE myslowfunction('query #2', myint) = 1 OR myint >= 3; 
```

它们之间的唯一区别是 OR 条件中操作数的顺序。

`myslowfunction`故意休眠一秒钟，并具有每次运行时向日志表添加条目的副作用。以下是运行上述两个查询时记录的结果：

```
myslowfunction called for query #1 with value 1
myslowfunction called for query #1 with value 2
myslowfunction called for query #2 with value 1
myslowfunction called for query #2 with value 2
myslowfunction called for query #2 with value 3
myslowfunction called for query #2 with value 4 
```

上面显示，当另一个操作数并不总是为真（由于短路）时，当它出现在 OR 条件的左侧时，慢速函数会执行更多次。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-25T04:58:17.847

这在查询分析器中需要额外的 4 秒，所以从我可以看到 IF 甚至没有短路......

```
SET @ADate = NULL

IF (@ADate IS NOT NULL)
BEGIN
    INSERT INTO #ABla VALUES (1)
        (SELECT bla from a huge view)
END 
```

有保证的方式会很好！

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-04-14T23:41:07.583

快速回答是：“短路”行为是未记录的实现。这是一篇很好的文章，它解释了这个主题。

[了解 T-SQL 表达式短路](https://www.sqlservercentral.com/articles/understanding-t-sql-expression-short-circuiting)

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2015-06-12T07:57:32.887

很明显，MS Sql server 支持短路理论，通过避免不必要的检查来提高性能，

支持示例：

```
SELECT 'TEST'
WHERE 1 = 'A'

SELECT 'TEST'
WHERE 1 = 1 OR 1 = 'A' 
```

在这里，第一个示例将导致错误“将 varchar 值 'A' 转换为数据类型 int 时转换失败。”

虽然第二个条件很容易运行，因为条件 1 = 1 评估为 TRUE，因此第二个条件根本没有运行。

此外

```
SELECT 'TEST'
WHERE 1 = 0 OR 1 = 'A' 
```

在这里，第一个条件将评估为 false，因此 DBMS 将适用于第二个条件，并且您将再次得到转换错误，如上例所示。

注意：我写了错误的条件只是为了意识到天气条件被执行或短路，如果查询结果错误意味着条件被执行，否则短路。

简单说明

考虑，

```
WHERE 1 = 1 OR 2 = 2 
```

由于第一个条件被评估为**TRUE**，因此评估第二个条件毫无意义，因为它在任何值的评估都不会影响结果，因此 Sql Server 通过跳过不必要的条件检查或评估来节省查询执行时间的好机会.

在**“OR”**的情况下，如果第一个条件被评估为**TRUE ，则由****“OR”**连接的整个链将被视为评估为 true，而不评估其他条件。

```
condition1 OR condition2 OR ..... OR conditionN 
```

如果 condition1 被评估为 true，则将所有条件休息，直到 conditionN 被跳过。概括地说，在确定第一个**TRUE**时，将跳过由 OR 链接的所有其他条件。

考虑第二个条件

```
WHERE 1 = 0 AND 1 = 1 
```

由于第一个条件被评估为**FALSE**，因此评估第二个条件毫无意义，因为它的任何值的评估都不会影响结果，因此 Sql Server 再次通过跳过不必要的条件检查或评估来节省查询执行时间的好机会.

在**“AND”**的情况下，如果第一个条件被评估为**FALSE ，则与****“AND”**连接的整个链将被视为评估为 FALSE，而不评估其他条件。

```
condition1 AND condition2 AND ..... conditionN 
```

如果 condition1 被评估为**FALSE**，则其余所有条件，直到**conditionN**被跳过。概括地说，在确定第一个**FALSE**时，将跳过由**AND**链接的所有其他条件。

因此，明智的程序员应该始终以这样一种方式对条件链进行编程，以便首先评估成本较低或最能消除的条件，或者以能够最大限度地利用短路的方式安排条件

# asp.net - ASP.NET Intellisense 与客户端属性

> ID：789233
> 
> 赞同：5
> 
> 时间：2009-04-25T16:12:08.190
> 
> 标签：asp.net, intellisense

我只是在 ASP.NET 中使用 Javascript 来研究更多客户端的东西，有些事情让我很困扰，希望有人能解释一下。为什么智能感知不显示 .NET 控件的所有属性/属性？例如， RadioButtonListControl 中的 ListItem：

```
<asp:ListItem Value="1" Text="Yes" onclick="alert('TEST1');" />
<asp:ListItem Value="0" Text="No" onclick="alert('TEST2');" /> 
```

Intellisense 不显示 ListItem 的 onclick 属性（或者它是否称为属性？），但它确实有效。为什么不显示？还是我过于依赖 Intellisense？:-) 或者我应该在代码隐藏中声明这些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T16:17:35.553

这在很多时候取决于您正在使用的控件和属性。我知道 ASP`button`控件会在智能感知中显示`onclick`和`onclientclick`属性。可能是 ASP.NET 不完全支持 的`onClick`属性`listitem`（而不是说/ /etc 控件`selectedindexchanged`上的属性）`listbox``dropdownlist`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T16:56:35.010

问题是用于 Web 服务器控件的智能感知不显示客户端事件，而仅列出服务器上引发的事件。如果您将 HTML 服务器控件用于相同目的，您将在 Intellisense 中看到（客户端 JS）事件。

另一个需要考虑的问题是选项元素不支持 onclick 事件（至少在 IE 中不支持，尽管 Firefox 支持它很好）。您应该改为处理`onchange`客户端事件。一个例子 ：

```
<select id="htmlserverselect" runat="server" onchange="alert(this.value);">
  <option value="1">Yes</option>
  <option value="2">No</option>
</select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T16:46:44.893

该类`ListItem`没有`onclick`属性。

似乎`ListItem`实现了`IAttributesAccessor`接口，并且也有一个`Attributes`集合。这被记录为：

> 获取该类不直接支持的 ListItem 的属性名称和值对的集合。

以这种方式放置在标记上的属性会在呈现控件时呈现。其细节因控制而异。我尝试了一个包含以下内容的页面：

```
<asp:DropDownList ID="_ddl1" runat="server" >
    <asp:ListItem Text="Item 1" Value="Item1" onClick="foox();" oncluck="bar(this);" />
</asp:DropDownList>
<asp:ListBox ID="_listBox1" runat="server">
    <asp:ListItem Text="Item 1" Value="Item1" onClick="foox();" oncluck="bar(this);" />
</asp:ListBox>
<asp:RadioButtonList ID="_radioList1" runat="server">
    <asp:ListItem Text="Item 1" Value="Item1" onClick="foox();" oncluck="bar(this);" />
</asp:RadioButtonList> 
```

在 and 的情况下`DropDownList`，`ListBox`两个属性都呈现在`<Option>`元素上。在 的情况下`RadioButtonList`，`onclick`属性呈现在`<input type="radio">`元素上，但无法识别的`oncluck`元素呈现在封闭`<span>`元素上。

请注意`oncluck`，显然，该事件永远不会被触发。

;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T16:52:09.217

您在智能感知中看不到它的原因是因为“onclick”不是 ASP.Net。您会注意到，如果您执行以下操作：

```
<asp:ListItem Value="1" Text="Yes" Secret="Yes" onclick="alert('TEST1');" />
<asp:ListItem Value="0" Text="No" Secret="No" onclick="alert('TEST2');" /> 
```

如果您查看呈现为 html 的内容，您将看到“Secret”属性。因此，虽然 ASP.Net 将呈现您放入其中的任何属性，但它只会为 ASP.Net 属性提供智能感知。

就编码实践而言，我已经看到并使用了太多次“onclick”。因此，虽然纯粹主义者可能对这种做法有疑问，但我认为使用它是可以的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-19T21:02:07.983

> 假设我们有一个由会话超时类型的事件触发的弹出消息。
> 
> 就像您应该为您的网上银行网络应用程序一样。
> 
> 因此，会弹出消息显示您还有几分钟的时间来完成对该特定安全网站的在线体验。
> 
> 通常，如果您对此不做任何事情，在消息弹出的大约同一时间，应用程序会将您注销。
> 
> 在客户端，您可以使用 JavaScript 对这些操作进行计时。
> 
> 现在，假设让您退出的按钮称为“btnSignOut”。
> 
> 如果你想从一行 JS 触发相同的动作，在超时时，你应该有这样的东西：

```
if(timeout){
;
 } 
```

> 这将触发与单击“btnSignOut”链接按钮相同的事件。

[来源](http://www.webfixstudio.com/2010/01/how-to-trigger-onclick-for-a-asp-net-controll-on-the-client-side-2/)

# c# - C# 是否支持像 VB.NET 一样的项目范围的默认命名空间导入？

> ID：789239
> 
> 赞同：19
> 
> 时间：2009-04-25T16:14:52.863
> 
> 标签：c#, namespaces

我是最近转换为 C# 的 VB 开发人员，但到目前为止我还没有找到一件事。在 VB 中，当我设置一个新项目时，我可以指定项目中使用的命名空间并将它们添加到所有类的默认导入中（所以一切都会自动拥有它们，就好像我为每个类添加了“Imports System.Data.OracleClient”一样）。使用 C#，我发现我总是为每个新类输入这些内容。有没有办法为项目设置默认值，以便它至少自动将这些附加到每个类文件中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-25T16:21:00.850

不，没有办法。C# 不支持项目级导入或项目级命名空间的概念。

您唯一能做的就是更改您正在使用的项目模板（Class.cs 或 Code.cs）以拥有您想要的命名空间。这些文件位于以下目录下

> %ProgramFiles%\Microsoft Visual Studio 9.0\Common7\IDE\itemtemplatescache\CSharp\Code\1033

在这里，您应该看到一个 Class.zip 和 Code.zip 目录，每个目录下都有一个 .cs 文件。这是在 Visual Studio 中执行“添加新项”操作时使用的模板文件。您可以更改这些以满足您的需求并拥有您想要的默认命名空间。

一个稍微简单的解决方案是为您想要的特定项目添加每个用户的代码文件。只需创建一个您想作为应用程序模板的代码文件，然后将其放在以下目录中。

> C:\Users\YourUserName\Documents\Visual Studio 2008\Templates\ItemTemplates\Visual C#

现在，只要您执行“添加新项目”操作，该文件就会显示出来。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-25T16:27:04.317

其他人建议使用模板等。我个人认为这不是问题 - 我在 Visual Studio 中输入我想使用的类的名称，即使它没有找到“智能标签”（或其他任何名称）图标弹出。我按了Ctrl-。它为我添加了一个 using 指令。

我认为 ReSharper 有助于使这项工作变得更好，但现在它对我来说是如此自动化，以至于我不再考虑它了。（我怀疑不同之处在于，使用 ReSharper，我可以在行中的任何位置按 Alt-Enter，它会提供更正，而不必将光标放在 Visual Studio 的类型名称本身中。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-09T16:58:56.400

在 C# 10 中，这个答案发生了变化。

C# 10 引入了[全局使用指令][1]：

> 全局 using 指令 ​​您可以将 global 修饰符添加到任何 using 指令，以指示编译器该指令适用于编译中的所有源文件。这通常是项目中的所有源文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T16:20:08.450

不，C# 中没有我的命名空间。我认为您可能可以使用项目模板或代码片段来完成同样的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T16:22:20.083

看到[这个帖子](https://stackoverflow.com/questions/651055/default-using-directives-in-new-c-files)就知道答案了。。

简而言之，就是将您想要的用途添加到模板中。

我相信你想从[这里](http://msdn.microsoft.com/en-us/library/ms247069.aspx)开始。

# django - 为什么 django 为外键生成选择框很慢？

> ID：789240
> 
> 赞同：3
> 
> 时间：2009-04-25T16:14:55.623
> 
> 标签：django, django-admin

我有一个管理视图，其中包含四个外键，每个外键有几千个条目。在浏览器中出现很慢。

如果我更改 django 模型以通过添加 raw_id_fields 来消除选择框，事情就会变得漂亮而活泼。所以缓慢是由于选择下拉列表的数量，这也是一个已知问题，因为这就是 raw_id_fields 存在的原因。

我想了解导致缓慢的原因。在服务器上，如果我对用于填充选择框的数据进行 SQL 查询，结果是即时的。所以 Postgres 检索或排序数据不是原因。

也许是传输填充下拉列表的数据所需的时间？还是 django 正在做的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-25T17:33:34.670

传输庞大的选择列表确实需要相当多的时间。标记真的可以开始加起来了。尝试检查您的 html 输出的 KB/MB 大小。我记得有一次看到一个选择列表（几个 1000 个条目）在以前的工作中使页面膨胀到 5 兆字节左右。这是一个 ASP.NET 项目；当你遇到这样的问题时，你使用什么框架并不重要。

我不确定 django 管理工具是否可以做到这一点，但听起来您确实需要一个多级选择列表来深入了解结果，而不是一次将每个选项发送给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-27T18:50:45.200

要做的第一件事是在您的网站上实施 gzip，这将至少将响应的大小减少一半。

然后，如果它仍然很慢，可以查看某种类型的 ajax 自动建议类型小部件来处理选择正确的值。看起来有一些记录在案的解决方案：[http ://www.google.com/#hl=en&q=django+autocomplete+widget&btnG=Google+Search&aq=1&oq=django+autocomplete+widget&fp=jFFhzb_S4-4](http://www.google.com/#hl=en&q=django+autocomplete+widget&btnG=Google+Search&aq=1&oq=django+autocomplete+widget&fp=jFFhzb_S4-4)

# seo - 使用网页上的按钮。谷歌会索引他们的链接吗？

> ID：789241
> 
> 赞同：1
> 
> 时间：2009-04-25T16:15:02.660
> 
> 标签：seo, web-crawler

我想在我的页面上使用标准按钮的外观，但我希望网络爬虫像链接一样跟随它们。

谷歌和其他网络爬虫会索引一个包含这样链接的网页吗？

```
<form method="get" action="/mylink.html"><input style="font-size:10pt" id="my-link" type="submit" value="Learn More..." /></form> 
```

如果没有，是否有另一种使用标准按钮的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T16:26:57.390

您始终可以使用 <a> 标记，然后将其设置为看起来像一个按钮。不过，这需要更多的工作。

在我看来，当您通过按钮显示导航选项时，您会冒着让用户感到困惑的风险。用户将单击按钮与执行具有副作用的任务相关联。用户还希望链接直接将他们带到内容而不修改任何内容。 [这](http://www.useit.com/alertbox/command-links.html)是支持我的论点的文章。

编辑：

这是一个更好的链接样式示例：

```
<style>
.NavLink {      
    padding:5px;
    background-color:#333333;
    color:#FFFFFF;
    font-weight:bold;
    font-size:16px;
}
</style>
<a class="NavLink">Nav Text</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T16:27:08.700

Googlebot[确实遵循表单](http://googlewebmastercentral.blogspot.com/2008/04/crawling-through-html-forms.html)，但我不会指望它。

正如 Dave 所指出的，使用链接按钮通常也不是一个好主意。

# scala - Scala: Is there a way to use PriorityQueue like I would in Java?

> ID：789250
> 
> 赞同：5
> 
> 时间：2009-04-25T16:18:15.663
> 
> 标签：scala, priority-queue, comparator

I have a class that I would like to use in a scala.collection.mutable.PriorityQueue, but I don't want to make it Ordered[A] just for this one purpose. I don't consider the ordering I want to use with respect to the PriorityQueue as the natural ordering of the class.

```
class MyObject (sequence: Int, values: List[String]) ... 
```

So, in my PriorityQueue, I would like the values to be ordered by 'sequence'. However, just because two objects have the same sequence doesn't make them naturally equal since the contents of their 'values' may be different.

This is where, in Java, it's nice to be able to supply an alternate Comparator object to the PriorityQueue. My Comparator would simply order the objects with respect to their 'sequence' and ignores their 'values'.

The PriorityQueue class must be parameterized with a "A <% Ordered[A]"

```
class PriorityQueue[A <% Ordered[A]] extends ... 
```

From what I've read, this means my class must extend Ordered[A] or I must provide an "implicit def" type conversion to Ordered[A], which, honestly, feels inelegant.

The Java solution seems more "functional" allowing me to pass a Comparator function-like object instead of forcing me into a class hierarchy or monkeypatching my class.

I realize there are alternatives to using PrioirityQueue, but I feel like I may be bumping up against the Scala learning curve here and don't want to give up without exploring this design decision fully.

Is this just an unfortunate decision in the Scala library or am I misunderstanding some sort of calling convention that makes PriorityQueue more usable and 'functional'?

Thanks

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-25T18:53:05.447

The syntax

```
class PriorityQueue[A <% Ordered[A]] ... 
```

is really just a light sugaring on top of

```
class PriorityQueue[A]()(implicit convert: A => Ordered[A]) ... 
```

This means you can write your own method A => Ordered[A]

```
case class Foo(n: Int)
def orderedFoo(f: Foo): Ordered[Foo] = new Ordered[Foo] {
  def compare(other: Foo) = f.n.compare(other.n)
} 
```

And manually pass it into your PriorityQueue constructor

```
new PriorityQueue[Foo]()(orderedFoo) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T18:25:16.217

The conversion function of A to Ordered[A] can play the role of Java comparator. The function needs to be visible only in the scope where you create PriorityQueue, so it's not going to become "natural ordering" for your object.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-26T16:49:05.783

Combining both (correct) answers before this one into compilable code:

```
object o {
  case class Foo(n: Int)
  implicit def orderedFoo(f: Foo): Ordered[Foo] = new Ordered[Foo] {
    def compare(other: Foo) = f.n.compare(other.n)
  }

  val x = new scala.collection.mutable.PriorityQueue[Foo]()
} 
```

His example wouldn't compile for you only because (I am supposing) you threw it at the compiler as-is. You can't compile top level methods in scala, everything has to be in an object.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-16T09:55:53.980

In scala 2.8.0, the PriorityQueue changes to

```
class  PriorityQueue[A](implicit ord : Ordering[A]) 
```

And the Ordering[A] in Scala is similar to Comparator in Java

# xcode - 是否有关于代理对象的 Interface Builder 易于理解的指南（Cocoa、Xcode 等的新手）？

> ID：789251
> 
> 赞同：15
> 
> 时间：2009-04-25T16:18:39.343
> 
> 标签：xcode, cocoa, cocoa-touch, interface-builder

回到 C/C++ 时代，真正让我着迷的语言部分是指针。我现在明白了，当然。

现在，Interface Builder 代理对象或更重要的是，如何使用 Interface Builder 以及在给定 XIB 的 .XIB 窗口（包含文件所有者、First Responder 等的窗口）中放置什么。

我从 Xcodes 示例和网络中找到的书籍和示例中浏览了很多示例。他们很有帮助，但我仍然感到有些失落。

我觉得理解 IB 对于理解如何编写 Mac/iPhone/iPod touch 应用程序非常重要。

到目前为止，我已经浏览了以下资源：Aaron Hillegass 的 Cocoa Programming for Mac OS X Pragmatic Programmer 资源：在 Xcode 中变得富有生产力（截屏）Objective-C 2.0 中的 Cocoa 编程编码（截屏）编写您的第一个 iPhone 应用程序（截屏）iPhone SDK开发

我还阅读了 Apple 的 Interface Builder 用户指南 PDF。

任何建议的提示/资源将不胜感激！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-05-20T06:46:30.260

首先，占位符是一个比代理更好的词。

通常，当您在 NIB/XIB 文件中有对象时，这意味着加载 NIB 文件将创建该实例。占位符对象是加载 NIB 文件时已经存在的对象，它们出现在 NIB 内部，以便您可以在将通过加载 NIB 创建的对象和已存在的对象之间建立连接。

文件的所有者、第一响应者和应用程序都是占位符。

文件的所有者是将加载 nib 的对象的占位符。所有 NIB 加载方法都采用“所有者”参数。当您与文件的所有者建立连接时，当它在运行时建立时，它将连接到传递给 nib 加载方法的所有者对象。许多 UIKit 和 AppKit 类为您调用 nib 加载方法。`NSApplication`, `NSViewController`, `NSWindowController`, `UIApplication`, 和`UIViewController`所有代表您加载 NIB 文件。当他们这样做时，他们将 self 作为所有者参数传递给 nib 加载方法。这就是为什么当您使用视图控制器或窗口控制器时，您将文件的所有者设置为您的子类，并在视图和文件所有者之间建立大部分连接。

该`NSApplication`实例是一个简单的占位符`[NSApplication sharedApplication]`。这是一个全局单例，Interface Builder 中的图标代表该全局单例。加载 NIB 文件不会创建第二个`NSApplication`实例。相比之下，当一个 NIB 文件包含一个窗口时，如果你加载它十几次，你将有十几个窗口实例，但仍然是一个`NSApplication`实例。

第一响应者是独一无二的。将动作连接到第一响应者意味着当动作被触发时，它应该动态地发送到响应者链。响应者链通常从焦点视图开始，并继续向上通过视图层次结构并包括一些控制器和委托。链中的每个对象都可以处理动作。菜单项与响应者链配合得很好。如果您有一个“Make Bold”菜单项应该使当前选定的文本变为粗体，您可以先将其连接到`NSApplication`子类，但是你必须知道“Make Bold”适用的所有情况，以及如何处理它们。文本视图和可编辑的 Web 视图可能需要不同的代码来处理“加粗”，并且将所有这些都装瓶到一个对象中会变得非常复杂并且不会非常可扩展。相反，您可以将“Make Bold”菜单项的操作连接到`makeBold:`First Responder 上的操作。This would mean that when the menu item was selected, the focused object, or one of its parents that responded to `makeBold:`, would get the `makeBold:`message. 现在许多类可以实现一个`makeBold:`方法并在它们处于焦点时响应这个菜单项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T17:01:10.787

除了“文件所有者”（在加载 nib/xib 时连接）之外，您在 IB 中创建的对象是真实对象，而不是代理对象。

您可能想查看一些现有的示例代码以了解 IB 是如何连接的。您阅读过的文档/教程中是否有任何让您感到困惑的内容？“有点失落”很难做很多事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-06T00:14:51.573

Apple 有以下文档解释了在 Interface Builder NIB/XIB 文件中找到的**File's Owner**、**First Responder**和**Application占位符对象：**

[Interface Builder 用户指南：占位符对象](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)

我意识到在您提到的阅读 Apple 的 Interface Builder 文档的问题中，我认为将其发布在此处以供将来参考是合适的。此外，自从首次提出您的问题以来，文档已经更新，因此从那时起他们可能使事情变得更加清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-07T17:13:31.277

这可能会有所帮助：[http ://crazyviraj.blogspot.com/2009/05/cocoa-what-is-files-owner-in-nib.html](http://crazyviraj.blogspot.com/2009/05/cocoa-what-is-files-owner-in-nib.html)

# c# - UNIX 和 Windows 开发之间的差异

> ID：789278
> 
> 赞同：11
> 
> 时间：2009-04-25T16:35:46.463
> 
> 标签：c#, .net, c++, windows

我在 Linux 中使用 C 和 C++ 编程大约 3 年，最近对为企业开发商业软件感兴趣。假设我找到了一个我认为我可以成功的利基市场，但他们只使用 Windows。但是，我对 Windows API 没有任何经验。我有几个问题：

我应该学习 .NET 吗？

我需要学习 C# 才能使用 .NET，还是可以坚持使用 C++？

使用 --no-cygwin 选项在 Cygwin 下使用 GCC 编译是什么感觉？我对可移植性很感兴趣，而且我担心如果我开始为 VC++ 编写代码，我可能会绑定到 Windows。

哪里是做我的基本阅读的好地方？

关于从 Linux 过渡到 Windows 编程，您还能告诉我什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-25T17:00:46.090

我遇到了完全相同的问题，我很高兴我尝试了 .NET。我希望这些信息可以帮助你：

**我应该学习 .NET 吗？**

我强烈推荐它。

**我需要学习 C# 才能使用 .NET，还是可以坚持使用 C++？**

你可以坚持使用 C++，但我相信你会喜欢学习 C#，请尝试一下。你也可以混合它们。.NET 的主要挑战是学习所有可以帮助您的库（因此您无需重新发明轮子）。经常使用 msdn 并尝试[获取基本类和程序集的映射](http://blogs.msdn.com/brada/archive/2006/02/06/Fx2Poster.aspx)。

如果您来自 C++，那么这是一种有趣的体验，您应该不会遇到大问题。

**哪里是做我的基本阅读的好地方？**

[我会从简单的开始，在这里](http://www.microsoft.com/express/)查看免费的 Visual Studio 工具、软件和示例，转到 MSDN 文档并编译 MSDN 中的一些示例（如何[访问文件](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)，...）。如您所见，您会并排找到 C# 和 C++ 示例。

当然，最终需要阅读诸如[C# via CLR之类的书籍。](https://rads.stackoverflow.com/amzn/click/com/0735621632)

**可移植性**

确保您在[Mono](http://www.mono-project.com/Main_Page)和多个平台上运行您的代码。

**未来投资**

投资学习 .NET 框架将获得回报。今天学习所有新工具的成本很高，您知道使用 .NET 可以发展。出现了新的功能和语言，但基础课程仍然存在，因此您的时间/精力投资更加可控。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T16:43:38.160

## 我应该学习.Net吗？

取决于您是否认为这对您正在寻找的利基市场有利。例如，如果您的利基是桌面应用程序，那么开始可能是一个好主意，因为恕我直言，开发 WinForms、WPF GUI 比 C++ 版本容易得多，

## 我需要学习 C# 才能使用 .Net，还是可以坚持使用 C++？

C# 不是必需的，使用 C++/CLI 允许您在使用 C++ 的同时利用 .Net。但是，我倾向于仅将 C++/CLI 用于非常关注托管代码和本机代码之间的互操作的组件。它特别擅长这种发展。如果您切换到更主流的应用程序，我想您会发现 C# 或 VB.Net 会更适合您。大多数在线示例都针对这些语言。特别是工具的很大一部分非常适合这些语言（WinForms 和 WPF 设计人员开始）。

## 担心写出不可移植的代码，和VC++绑定

我敢肯定，这种意见会有点不受欢迎。但是您已经提到您正在寻找的利基是 Windows 特定的。如果只在 Windows 上运行，编写可移植代码有什么意义？这不是 Windows 偏见的出现，如果平台被颠倒，我会提出完全相同的论点。

我并不是说可移植代码是一件坏事。这实际上是一件非常好的事情。但是，如果没有使用可移植性的潜力，为什么不利用该平台呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-25T16:50:12.963

答案取决于您要实施的程序类型。

如果您想实现一些系统实用程序，那么答案与 *nx 世界上的答案几乎相同：您必须使用 C 编程以获得最佳结果并非常了解 Win API。

对于其他事情，C# 可能是今天要走的路。它是现有 dotNet 语言中最好的语言 IMO。

学习 Windows API 绝对是一件好事，但我建议使用一些脚本语言来加快实验速度（Lua 与 Alien 库、Python、AutoIt 等）。关于它的好处是您可能知道其中一些，来自 *nx 社区。

由于您担心可移植性，我建议您使用 C# 并特别注意操作系统特定的内容，如路径分隔符、文件名区分大小写等。您可以在 MonoDeveloper 网站上找到一些关于它的好文章。Java 也是一个不错的选择——我不是专家，但据我所知，它用一些语言复杂性、速度和原生感觉（从 C# 的角度来看）来换取更好的可移植性。

最新的 MonoDevelop 甚至可以让您加载 Visual Studio 项目，尽管我从未亲自这样做过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-25T18:01:48.550

## 我应该学习 .NET 吗？

是的。

## 我需要学习 C# 才能使用 .NET，还是可以坚持使用 C++？

从技术上讲，不，您不必为 .NET 学习 C#。

## 如果我开始为 VC++ 编写代码，我可能会绑定到 Windows。

这是一家Windows商店，对吧？*如果您唯一的目标是 Windows*，谁在乎 Windows 程序是否可移植？

## 哪里是做我的基本阅读的好地方？

堆栈溢出。

## 关于从 Linux 过渡到 Windows 编程，您还能告诉我什么？

购买一台 Windows 机器和 Visual Studio。不要尝试半 Unix 它。花大量时间和精力学习 Microsoft Way。就像有 Unix Way 一样，也有 MS Way。两者都适用于各自的系统。

祝好运并玩得开心点！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-27T16:40:07.857

您将向企业销售商业 Windows 软件。查看商家。弄清楚他们还买了什么，并查看推荐的平台信息。这将使您对他们拥有什么以及目标是什么有一个很好的了解。

您可能想学习 .NET（嘿，无论如何您都必须学习一个新框架），如果您擅长 C++，学习 C# 并不难。这似乎是当今的标准开发环境，可能是有充分理由的。

如果您担心可移植性，请用 C++ 编写后端并隔离与系统相关的部分。如果您要向企业销售 Windows 软件，它必须看起来像 Windows 软件。它必须按照他们的预期行事。不要为了跨平台的任何优势而牺牲 UI；相反，在逻辑上分离 UI。您以后可以随时为其他平台重写它。

同样，继续使用 Visual Studio。这是一个很好的环境，虽然我有时会想念 gcc、gdb 和 make，但它可能会让你更加意识到你正在编写一个 Windows 程序。如果你使用 Cygwin 和 gcc，你可能不会像 Windows 程序员那样思考，这意味着它看起来不像 Windows 程序，这意味着你的潜在客户会遇到问题，这意味着更少的钱和更多的机会抢占市场的后起之秀。

我发现转向 Windows 编程并不困难。请注意，您正在学习一些新东西，并且有些东西在 Windows 中是标准的，而在 Unix 中没有。如果你不害怕学习新东西，你会做得很好。

还有一件事：Unix 应用程序经常因 UI 笨拙而臭名昭著。Unix 用户往往是更多的技术人员，他们不太关注事物的外观，并且对丑陋的界面更加宽容。在 Windows 商业软件世界中，外观和易用性很重要，而实际用户很可能是对计算机的心智模型非常不准确的人，如果一行 Python 代码咬到他们的脸，他们就认不出来了.

您将需要一个相当吸引人的 UI，可以让那些不关心计算机本身的人轻松使用。这对我们很多人来说都是一种延伸。如果您不认为 iPhone 有什么特别之处，那么您急需另一种观点。阅读用户界面，找到其他有艺术感和可用性概念的人，任何东西。UI 设计与编程是不同的技能，很多人只有其中一种（这里的人往往是熟练的程序员，可能有一些 UI 技能）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-25T16:41:00.100

您*可以*使用 C++ 进行 .NET 开发，但它会是 C++ (C++/CLI) 的一些修改版本。老实说，您不妨只学习 C#。（我个人认为 C# 是一门美丽的语言，但我们去了。）

就框架本身而言，除了语言之外，还有更多需要学习的东西——尽管语言已经获得了新的功能，但库的增长速度更快。

尽管如此，所有这些仍然比学习 Win32 本机 API 更简单（IMO）。

对于基本阅读，我推荐“C# 3.0 in a Nutshell”和“CLR via C#”。（当我没有逾期准备晚餐时，链接就会出现......）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-25T16:51:08.627

如果您对代码的可移植性感兴趣，则**必须**同时生成 Linux 版本和 Windows 版本。如果您尝试编写 Windows 代码，而只是考虑可移植性，那么您的代码中总是会出现 Windows 特定的元素。

如果你要使用 Windows，不妨学习 C#。C# 实际上很酷；它比 C++ 引入了更多的 Lisp 特性。学习它是直截了当的。你最好的学习资源是谷歌，不过如果你是书本学习者，去买任何关于 C# 的书吧。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-25T16:59:50.337

这一切都取决于。如果您选择使用 C++ 并且您正在开发 GUI 应用程序，那么有几个 GUI 框架可供选择（[wxWidgets](http://www.wxwidgets.org/)、[GTK](http://www.gtk.org/)），其中大多数也是平台可移植的。如果您只是专门针对 Windows，将 .NET 库作为依赖项不是问题，并且您不介意学习新的（但仍然熟悉的）语言所涉及的时间，那么 C# 可能会更好案子。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-25T21:42:21.203

很多人似乎忽略了最初的问题“UNIX 和 Windows 开发之间的差异”，所以我将稍微谈谈这个问题。

* * *

**关于我应该学习C#：**

我认为你需要在某个时候学习像 C# [1] 这样的语言。问题不是你是否应该学习它，而是你什么时候学习它。

* * *

**关于与 C# 类似的替代语言：**

Java 是另一种与 C# 非常相似的语言。Java IMO 是 C# 之父，而 IMO 我更喜欢 Java。

我用一个比喻来解释我对 Java 的偏爱。Java 有这个儿子 C#，他看到了他父亲的所有成功。儿子嫉妒了，并试图做他父亲正在做的同样的事情。

在这种情况下，MS 是试图赶超年长父亲的暴发户儿子。然而，新贵 C# 缺少一些 IMO 的关键信息：

*   真正的跨平台
*   拥有较短生命周期的 C# 的较小技巧库（或者我喜欢称其为较小的预制乐高积木盒）
*   **对于以上两个要点，我更喜欢 Java。**

[1 - 脚注] 当我说“像 C# 这样的语言”时，我指的是存在其他具有类似功能的语言这一事实​​。具体功能如下：垃圾收集、从一开始就 100% 面向对象（与 OO 中的 C++ hacking 相比）、内置 xml-type-documentation（想想 javadoc）和灵活地做许多不同的事情。

* * *

**关于我应该学习.NET：**

我只做了少量/中等量的 C#，但从那少量中我注意到，当你做任何 C# 时，.NET 几乎是必需的。（我知道 C# 与 .NET 非常乱伦并且很难剥离。）我理解它的方式，我可能是错的......大多数/所有 C# 的标准主库都是 C#，因此你需要有 .NET如果你正在做 C#。

* * *

**回到原来的问题“UNIX和Windows开发的区别”：**

*   **Windows**开发不像 IMO 那样多样化......只有**一个开发环境**，该环境是 MS 编译器和 MS IDE，两者都打包为他们的**Visual Studio 产品线**中的一个。
*   **Windows**开发侧重于**GUI 驱动的**工具。
*   **Linux**开发更加多样化，有数百个编译器/文本编辑器/IDE/等。（我说它是多种多样的，但实际上**大多数 Linux 开发**实际上非常相似**，使用一组常用工具：GCC/GDB/GREP/FIND/VIM/EMACS/CTAGS/CSCOPE**和一些选择的源存储库）。
*   **Linux**开发侧重于**命令行界面驱动的**工具。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-25T17:01:08.820

这是一个很好的问题。您需要确定的第一件事是是否需要编写跨平台代码。如果你这样做了，那么 C/C++ 是使用一些跨平台 UI 库的最佳途径。

如果没有，那么我强烈推荐使用 Visual Studio 2008 SP1 的 .NET 3.5。我还建议在您的 UI 中使用 WPF 而不是 WinForms。

MSFT 绝不会减少对本机代码开发的投资。但是 C# .NET 3.5 WPF 和相关工具是应用程序开发的未来——尤其是对于业务线之类的东西。

我相信您会发现这非常高效且易于学习。您还可以[在这里](http://www.microsoft.com/express/)免费获得良好的开发工具。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-25T17:08:42.843

您使用哪些基于 Linux 的 GUI 库？QT？GTK？这些库可能有 Windows 端口。如果您需要保持平台独立性，请坚持您所知道的。如果您认为自己只需要 Windows，那么您应该切换 .NET 解决方案。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-25T17:37:49.340

> 我需要学习 C# 才能使用 .NET，还是可以坚持使用 C++？

使用 C#。C# 和 .net 是一个很好的组合。

此外，不是严格与编程相关，而是有点 Unix vs Windows。Unix 一直有一个优秀的 shell，它让程序员的生活更轻松。Windows 现在也有这个。了解一下 Powershell 以及如何编写 cmd-let，它将为您节省大量时间。

Powershell 是一段时间以来从 Redmond 出来的最好的东西之一。

[http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-04T19:47:08.410

不。不要学习 .NET - 学习 C# .. 就像任何事情都去游乐场一样。一旦你掌握了它..你将能够在 1/10 的时间内完成项目..

但是使用 C#/.NET，你会学习坏习惯。我现在回到 C++。我有 C++ 12 年，然后 C# 5 年，现在 C++ 6 个月。

虽然完成项目确实需要大约 6 倍的时间......（6 个月对 1 个月），但我觉得 C++ 代码具有艺术感......而 C# 代码是通用的。比如百思买。

我完全反对 C++/CLI 或任何它的名字。如果您需要降低到 CLR 级别.. 运行，不要回到 C++.. 否则您最终将花费所有时间来处理一些任意 C# 设计“功能”，例如事件同步..

我的下一个目标可能是 .NET Powershell 来管理我的 C++ 服务器应用程序。

大约 10 年前，我将 Unix 迁移到 Windows。我尝试回到 FreeBSD 或 Linux ......我曾经喜欢 vi ......但 VS 是迄今为止最好的 IDE。只需获得 vs2010 pro + reshaper 并阅读这两本书。第一个是核心 C#，但它是 .NET 2.0，这很好.. 因为无论如何它最容易开始编写 C++ 样式代码。下一本书将持续数年。

[http://www.amazon.com/2-0-Practical-Guide-Programmers-Guides/dp/0121674517](https://rads.stackoverflow.com/amzn/click/com/0121674517)

[http://www.amazon.com/gp/reader/0735627045/ref=sib_dp_pt#reader-link](https://rads.stackoverflow.com/amzn/click/com/0735627045)

希望这可以帮助。

还。没有理由不在 2012 年编写门户 C++ 代码。cmake + VS2010 + boost + crossroads-io

# regex - 正则表达式在 linux bash 中抓取 X 数量的值

> ID：789281
> 
> 赞同：1
> 
> 时间：2009-04-25T16:37:30.220
> 
> 标签：regex, linux, bash

嗨，伙计们想知道你们是否可以帮助我我正在尝试编译一个 bash 脚本，该脚本将显示一段 html 代码中的一些值，我被困在正则表达式部分，

我有以下一段代码

```
 <li><div friendid="107647498" class="friendHelperBox"><div><a href="http://www.myspace.com/rockyrobsyn" class="msProfileTextLink" title="rØbylin">rØbylin</a></div><span class="msProfileLink friendToolTipBox" friendid="107647498" style="width:90px;"><a href="http://www.myspace.com/rockyrobsyn"><img src="http://x.myspacecdn.com/modules/common/static/img/spacer.gif" source="http://c2.ac-images.myspacecdn.com/images01/59/s_8b94c89a98de643e59ab9a1cf03885c1.jpg" alt="rØbylin" class="profileimagelink" onerror="UseNoPicImage(event.target||event.srcElement)" /><span class="pilRealName">Robyn</span></a></span></div><br /><img src="http://x.myspacecdn.com/images/onlinenow.gif" /></li><li><div friendid="59261168" class="friendHelperBox"><div><a href="http://www.myspace.com/christownsendmusic" class="msProfileTextLink" title="Chris Townsend">Chris Townsend</a></div><span class="msProfileLink friendToolTipBox" friendid="59261168" style="width:90px;"><a href="http://www.myspace.com/christownsendmusic"><img src="http://x.myspacecdn.com/modules/common/static/img/spacer.gif" source="http://c4.ac-images.myspacecdn.com/images02/83/s_029c098cc40c40ff8f88fe54d53a1277.jpg" alt="Chris Townsend" class="profileimagelink" onerror="UseNoPicImage(event.target||event.srcElement)" /></a></span></div><br /><img src="http://x.myspacecdn.com/images/onlinenow.gif" /></li></ul> 
```

全部在一行上，我想取出里面的所有文字

```
..class="msProfileTextLink" title="<GRAB THIS TEXT>">.... 
```

我想抓住所有事件我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T16:50:30.250

Perl 呢？;)

```
#!/usr/bin/perl

$string = 'Your string';

$string =~ m/class=\"msProfileTextLink\" title=\"([^\"]*)\"/;

print $1; print "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T16:52:48.887

以下 Perl 风格的正则表达式应该适合您：

```
m/class="msProfileTextLink"\s*title="([^"]+)"/g 
```

至于从 bash 脚本中使用它，您应该能够在 Perl 单行程序中使用它（请参阅**-p**和**-e** [Perl 命令行选项](http://perldoc.perl.org/perlrun.html)），或者在另一种支持 perl 样式正则表达式的语言中使用它，例如Python、PHP 等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T17:03:56.490

我假设可以调用标准的 unix 工具，而不仅仅是 bash 内置

好，

`grep -o 'class="msProfileTextLink" title="([^"])*"' file.html`

让你：

`class="msProfileTextLink" title="rØbylin"`

`class="msProfileTextLink" title="Chris Townsend"`

假设 html 中从来没有任何空格变化 - 否则你需要做

`egrep -o 'class="msProfileTextLink"[[:space:]]*title="([^"])*"'` 插入`[[space]]*`可能有一些空格的地方。

然后`grep -o '"[^"]*"$'` 将其归结为：

“rØbylin”

“克里斯汤森”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T17:10:56.300

试试这个

```
awk '/title="([^"]*)"/ {print substr($2,8,length($2)-8)}' 
```

# asp.net - 高效使用 ASP.NET RegisterStartupScript 方法

> ID：789292
> 
> 赞同：1
> 
> 时间：2009-04-25T16:43:28.003
> 
> 标签：asp.net, javascript

当我在我的代码隐藏中加载数据时，我发现我经常想根据我的数据运行几个 javascript 函数。使用 StringBuilder 编译我的所有函数调用并一次性发出 RegisterStartupScript 会更有效，或者如果我每次需要时都发出 RegisterStartupScript，性能是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T16:56:48.160

我认为你的实现`StringBuilder`会更有效率，因为你没有创建任何控件，只在完成后注册脚本。您可能希望保留您的`StringBuilder`方法的另一个原因是注册脚本的顺序是否很重要。

来自[MSDN：](http://msdn.microsoft.com/en-us/library/asz8zsxy(loband).aspx)

> RegisterStartupScript 方法添加的脚本块在页面完成加载但在页面的 OnLoad 事件引发之前执行。***不保证脚本块按照注册的顺序输出。***如果脚本块的顺序很重要，请使用 StringBuilder 对象将脚本聚集在一个字符串中，然后将它们全部注册到一个客户端脚本块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-09T01:42:35.167

如果您担心使用字符串连接构建脚本时会发生低效的内存重新分配，请不要担心。您注册的脚本存储在 ListDictionary（System.Collections.Specialized 命名空间）中，因此如果未使用适当的内存量实例化 StringBuilder，则为该列表分配内存实际上可能比使用 StringBuilder 更快。还有一个好处是不必在一个地方构建所有脚本。

ListDictionary 就像一个单链表一样工作，所以虽然我不确定，但我无法想象脚本不会按照注册顺序添加到页面的任何原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-25T16:57:30.967

在您知道自己有性能问题之前不尝试解决性能问题通常效率更高。最好先解决最糟糕的性能问题。

另一方面，您正在做的事情称为“预优化”。这不被认为是一个好主意。

其他人将添加 Knuth 报价。

* * *

## 为什么预优化是一件坏事？

我们中的大多数人都没有得到报酬来让事情变得最好。我们得到报酬是为了完成工作。

有时这项工作需要我们提高代码的性能。那个时候，最好去找出性能需要改进的地方，而不是提前决定我们想去哪里看。

“预优化”提前决定应该提高性能。很有可能这并不能解决下一个更严重的问题。事实上，如果没有衡量，你可能会让事情变得更糟，而且永远不知道。

更糟糕的是，你花在解决错误问题上的时间本可以花在解决*正确*的问题上——这会花费你公司的资金。`RegisterStartupScript`即使您以每页 100 个脚本的价格调用它，这也不会花费您的公司任何钱。特别是，它不会像脚本本身的低效实现或糟糕设计那样花费那么多。

我不知道你的情况是否属实，但就我而言，我在大学两年后患上了这种病。幸运的是，两年后我的钱花光了，不得不去现实世界工作。这是教会我区分学校理论和实践现实的原因之一。

第二件事，最近的事情是花了几天时间优化我被告知的内存泄漏。事实证明没有内存泄漏，而是更糟。我一直在解决错误的问题。

* * *

## 高德纳语录

“我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源。”

来自[http://en.wikipedia.org/wiki/Optimization_(computer_science)](http://en.wikipedia.org/wiki/Optimization_(computer_science))

# objective-c - 如何编写将指针地址作为参数的方法？

> ID：789295
> 
> 赞同：0
> 
> 时间：2009-04-25T16:43:59.000
> 
> 标签：objective-c

使用 NSString 类方法 stringWithContentsOfFile:encoding:error 我可以：

```
NSError *error;
NSString *fileContent = [NSString stringWithContentsOfFile:... encoding:... error:&error]
if (fileContent == nil) {
  NSLog(@"%@", error);
} 
```

我想做类似的事情：

```
NSString *message;
BOOL result =  [self checkSomeRandomStuff:&message];
if (result == NO) {
  NSLog(@"%@", message);
} 
```

如何在方法 checkSomeRandomStuff 中分配消息变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T16:48:13.547

将另一个 * 添加到参数类型

```
-(BOOL)checkSomeRandomStuff:(NSString**)message {
  // check some random stuff
  if (something) {
    *message = @"something";
    return YES;
  } else {
    *message = @"some other thing";
    return NO;
  }
} 
```

# asp.net-mvc - ASP.NET MVC 下拉列表

> ID：789297
> 
> 赞同：7
> 
> 时间：2009-04-25T16:44:48.937
> 
> 标签：asp.net-mvc

有人可以给我指出一篇文章，该文章显示从 linq 填充到 sql 的下拉列表（正在设置文本和值）。

谢谢丹尼

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T17:49:15.147

现在 HtmlHelper 扩展需要一个`IEnumerable<SelectListItem>`，我不创建 SelectList，但通常只使用 LINQ 创建 SelectListItems。

**控制器**

```
ViewData["CategoryID"] = categories.Select( c => new SelectListItem
                                                 {
                                                     Text = c.CategoryName,
                                                     Value = c.CategoryID
                                                 }
                                          ); 
```

**看法**

```
<%= Html.DropDownList("CategoryID") %> 
```

或者如果我想要一个默认选择

```
<%= Html.DropDownList("CategoryID",
                      (IEnumerable<SelectListItem>)ViewData["CategoryID"],
                      "Select a Category" ) %> 
```

**编辑**：

下拉列表的有趣之处在于，您需要提供一系列值，从中选择适合您实际数据模型的单个值。我通常通过视图数据提供范围（菜单项），并在发布页面时期望返回模型值。如果您还想要强类型菜单，则需要提供一个仅查看模型来封装您的真实模型和任何菜单。这将涉及在发布时使用前缀来标识模型元素。在我看来，权衡是在帖子上更简单的模型绑定与在视图中使用强类型菜单。我没有挂断后者，所以我选择不将我的菜单放入模型中。但是，如果您想这样做，它可能如下所示。

**模型**

```
public class CategoryViewModel
{
    public Category Category { get; set; }
    public IEnumerable<SelectListItem> CategoryMenu { get; set; }
    ...
} 
```

**控制器**

*显示动作*

```
var model = new CategoryViewModel();
model.CategoryMenu = categories.Select( c => new SelectListItem
                                                 {
                                                     Text = c.CategoryName,
                                                     Value = c.CategoryID
                                                 }
                                      );

...
return View(model); 
```

*创建动作*

```
[AcceptVerbs( HttpVerbs.Post )]
public ActionResult Create( [Bind(Prefix="Category")]Category category )
{
   ...
} 
```

**看法**

```
<%= Html.TextBox("Category.Name") %>

<%= Html.DropDownList("Category.CategoryID",
                      Model.CategoryMenu,
                      "Select a Category" ) %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T16:47:50.787

[这是Rob Connery](http://blog.wekeroad.com/blog/asp-net-mvc-dropdownlist-and-html-attributes/)的一篇很棒的文章

**控制器代码**

```
NorthwindDataContext db = new NorthwindDataContext();
var categories = from c in db.Categories select c;
ViewData["CategoryID"] = new SelectList(categories, "CategoryID", "CategoryName"); 
```

**查看标记**

```
<%=Html.DropDownList("CategoryID")%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-23T16:24:24.750

如果您需要向标签添加 html 属性，这将是一种方法。将模型传递给您的视图 ei "return View(someModel)" 然后在视图中：

```
 <select id="Groups" name="Groups">
            <% foreach (SelectListItem item in Model.GroupsDropDown)
               {
                   if (item.Selected)
                   {%>
                        <option selected="selected" title="<%= item.Text %>">
                            <%= item.Text%></option>
                    <%}
                     else
                    {%>
                        <option title="<%= item.Text %>">
                            <%= item.Text%></option>
                    <%} %>
            <% } %>
        </select> 
```

GroupsDropDown 是您模型中的一个属性，如下所示：

公共 IEnumerable GroupsDropDown { get; 放; }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-18T20:02:23.463

在视图中写：

```
@{
TaskManagerContext context = new TaskManagerContext();

IEnumerable<TestTask1.Models.User> CDrop = context.Users.ToList();
List<SelectListItem> selectList = new List<SelectListItem>();
foreach (var c in CDrop)
{
    SelectListItem i = new SelectListItem();
    i.Text = c.Username.ToString();
    i.Value = c.ID.ToString();
    selectList.Add(i);
} 
```

}

您可以像这样引用它：

```
@Html.DropDownListFor(m => m.UserID,
                          new SelectList(selectList, "Value", "Text")); 
```

您还可以选择特定行：

```
TaskManagerContext context = new TaskManagerContext();
UsersRepository repo = new UsersRepository();
User user = repo.GetAll().FirstOrDefault(u => u.ID == ViewBag.UserId);
ViewBag.User = user;

<div><h3><label>@ViewBag.Title1</label>@ViewBag.User.Username</h3></div> 
```

# javascript - 是否可以将 javascript 嵌入到 SSRS 报告中？

> ID：789303
> 
> 赞同：5
> 
> 时间：2009-04-25T16:48:55.870
> 
> 标签：javascript, jquery, sql-server, report

SQL Server 报表可以嵌入 vbscript 并执行客户端，但同样可以用 javascript 完成吗？我认为能够在客户端执行 jQuery 和 CSS 操作以创建更具交互性的向下钻取体验将是一个很好的实用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T16:51:48.920

我们在谈论 SQL Server 报告服务吗？

如果是这样，我还没有看到一种方法来做到这一点。不过，我承认这个想法让我的皮肤爬行。

**编辑**

这是一个使用 JavaScript 在超链接中打开单独窗口的[小示例。](https://web.archive.org/web/20120109030937/http://blogs.msdn.com/b/mab/archive/2007/05/17/how-to-create-a-hyperlink-in-reporting-services-that-opens-in-a-new-window.aspx)

这篇[博客文章](http://geekswithblogs.net/mnf/archive/2007/11/25/sql-server-reporting-services-notes.aspx)可能包含有关报告服务中一些有趣的 JavaScript 技术的更好信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T16:59:42.770

在我看来，Reporting Services 不适合您的工作。RDL（报告定义）文件基本上是 XML。我不知道向 XML 添加代码的方法。

如果您将 RDL 输出视为您的“数据”，那么在这里以任何方式容纳任何行为都没有任何意义。相反，您可能希望构建一个可以使用最终报告输出的前端，然后提供您正在寻找的体验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-26T11:30:36.800

可能回复晚了，但对其他人有帮助

[http://direit.wordpress.com/2012/07/24/ssrs-use-custom-javascript-to-call-a-report-in-a-new-tabwindow/](http://direit.wordpress.com/2012/07/24/ssrs-use-custom-javascript-to-call-a-report-in-a-new-tabwindow/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-13T22:57:13.020

我知道这是一篇旧帖子，但是这样的东西很好用

="javascript:void(window.open('https://" + 参数！ServerName.Value + "/ReportServer/Pages/ReportViewer.aspx?%2f" + 参数！Environment.Value + "%2fSSRS+Reports%2fReports %2fVE%2fMy+Reports%2fData+View%2fReport+Name%2f60-Your-Report&rs:Command=Render','_blank'))"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-29T19:28:35.323

我有一个关于这篇文章的重要说明，如果您尝试使用 Visual Studio (BIDS) 中的 PREVIEW 测试 SSRS 报告中的 javascript，它将不会在预览模式下运行，但是在您将报告部署到实际报告服务器之后，然后在 Web 浏览器中查看报告时，javascript 将起作用。这给我带来了很多困惑，我希望能省去一些其他人的麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-30T02:57:40.773

这是我在 SSRS 中频繁使用 javascript 的时间和原因的具体示例。在 SSRS 报告中，最好有指向 Web 服务或 SSRS 之外的其他应用程序的超链接。在下面的示例中，“链接”字段在 SQL 中创建并在 SSRS 报告中用于创建指向特定潜在客户的特定机会的 MS Dynamics CRM 的超链接。

首先，使用类似这样的内容创建 http 链接字段……如果您不需要为不同的环境创建不同的链接，请忽略 case 语句。

```
 ,case
        when @@SERVERNAME like '%CF-PROD%' then 'http://cf-prod-crm01:5559/crm.ashx?id=' + CAST(c.OpportunityID as varchar(36))
        when @@SERVERNAME like '%CF-STG%' then 'http://cf-stg-crm01:5559/crm.ashx?id=' + CAST(c.OpportunityID as varchar(36))
        when @@SERVERNAME like '%CF-QA%' then 'http://cf-qa-crm01:5559/crm.ashx?id=' + CAST(c.OpportunityID as varchar(36))
        when @@SERVERNAME like '%CF-DEV%' then 'http://cf-dev-crm01:5559/crm.ashx?id=' + CAST(c.OpportunityID as varchar(36))
        END AS 'CRMOpportunityLink' 
```

为了测试，如果您要复制它并将其手动放入特定应用程序的浏览器中，该链接应该可以工作。

在报表（例如 SSRS）中，您可以在 TextBox 的操作区域中使用 Javascript 创建超链接，选择“转到 URL”并插入以下内容：

```
"javascript:void(window.open('" + Fields!CRMOpportunityLink.Value + "','_blank'))") 
```

# python - 如何使用 QSocketNotifier (linux) 观看串口？

> ID：789304
> 
> 赞同：2
> 
> 时间：2009-04-25T16:49:45.320
> 
> 标签：python, qt, serial-port, pyqt4

**如果/dev/ttyS0**出现问题，有人可以给我一个示例，说明如何设置 QSocketNotifier 来触发事件吗？（最好在 python/pyqt4 中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-26T00:15:44.750

这是一个使用 QSocketNotifier 不断从文件中读取的示例。只需将 'foo.txt' 替换为 '/dev/ttyS0' 就可以了。

```
 import os

from PyQt4.QtCore import QCoreApplication, QSocketNotifier, SIGNAL

def readAllData(fd):
        bufferSize = 1024
        while True:
                data = os.read(fd, bufferSize)
                if not data:
                        break
                print 'data read:'
                print repr(data)

a = QCoreApplication([])

fd = os.open('foo.txt', os.O_RDONLY)
notifier = QSocketNotifier(fd, QSocketNotifier.Read)
a.connect(notifier, SIGNAL('activated(int)'), readAllData)

a.exec_() 
```

# licensing - Vista 64 位上的 Eziriz Intellilock

> ID：789310
> 
> 赞同：0
> 
> 时间：2009-04-25T16:51:51.197
> 
> 标签：licensing, compilation, protection, decompiling, copy-protection

我正在使用 Eziriz Intellilock 来保护 .NET Windows 应用程序。该应用程序以 .NET 2.0 为目标，并使用“任何 CPU”目标构建。解锁后，它在 32 位和 64 位 Vista 中都能正常工作。但是，当我用 Eziriz Intellilock 锁定它时，我只能在 32 位 Vista 中运行锁定版本。尝试在 Vista 64 位中运行时，初始化程序时出现 APPCRASH 异常。

有没有人经历过这样的问题？有解决办法吗？

我试图联系他们的支持，但到目前为止没有收到任何回复:(

谢谢， LD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-23T01:39:36.737

请尝试最新版本，可能它可以解决问题。它适用于我们的“任何 CPU”编译产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T19:30:01.397

如果您将应用程序的平台更改为 x86，会发生什么情况。它还在崩溃吗？您是否有理由必须使用“任何 CPU”而不是 x86？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-06T14:58:17.030

我很确定这与 x86 或 x64 无关。只需尝试使用较少的混淆选项即可。

Intellilock 非常不稳定，因此您需要尝试直到正确为止。还要小心，有时它可能会正确启动，但您仍然会在运行期间看到意外的崩溃。在部署之前对其进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-02T23:39:07.680

我使用 Intellilock 的最新版本，并且能够成功加密 64 位应用程序，而没有任何重大（或次要）问题。

确实，一旦您从他们那里购买了许可证，支持团队就会回答更多

问候

# windows - 通过组策略添加管理员

> ID：789317
> 
> 赞同：1
> 
> 时间：2009-04-25T16:55:06.527
> 
> 标签：windows, dns

我的 Windows Vista 工作计算机是域的成员。域管理员设置了一个组策略，每天晚上将他们添加为我的计算机的管理员。

有什么办法可以防止这种情况发生吗？我是计算机的管理员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T17:07:23.110

这些是严肃的答案：

*   断开您的 PC 与网络的连接
*   从域中删除您的 PC

您不能更改组策略：它可以覆盖本地设置或不被覆盖。域管理员胜过 AD 中的本地管理员

但为什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T17:12:26.780

没有（有用的）方法。然而，这根本不是技术问题，而是政策问题（如果有问题的话）。与您的管理员和老板一起讨论。问他们为什么，他们应该解释。

顺便说一下，这种行为是默认策略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-30T01:42:54.967

是的你可以。您可以使用多种方法。一些想法：

*   删除他们的本地管理员。添加您自己的本地管理员用户，用户名相同但密码不同。GPO 添加将假定用户已经在那里并且不进行任何更改。

*   更新注册表权限以删除对添加用户所需的几个键中的任何一个的访问权限。Mark Russinovich[在他的博客上](http://blogs.technet.com/markrussinovich/archive/2005/04/30/circumventing-group-policy-settings.aspx)描述了程序。

*   编辑缓存组策略对象的目录的 NTFS 权限。（这当然会破坏*所有*GPO，而不仅仅是本地管理员......）

*底线*：作为本地管理员，您可以做*任何事情*。为了使组策略起作用并使 GPO 添加本地用户，它必须做*一些事情*。打破该事物的任何部分，您就找到了解决方案。

当然，仅仅因为你*可以*，但这并不意味着你*应该*。我是一名 IT 人员，用户对我这样做，这很烦人。这是一个政策问题，应该通过非技术手段处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-03T03:55:19.170

每次连接到工作网络时都会发生这种情况，这是公司控制计算机的方式，我建议您与网络管理员交谈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-10T20:57:00.997

*   打开 Regedit.exe。
*   浏览到以下路径 -`HKEY_CURRENT_USER\Software\Policies\Microsoft\MMC\`
*   展开其中包含的唯一键
*   设置`Restrict_Run`为值 1（通过双击编辑并键入 1 来完成）

[http://www.computerstepbystep.com/group_policy_windows_7.html](http://www.computerstepbystep.com/group_policy_windows_7.html)

# c# - 如何决定一个方法是私有的、受保护的、内部的还是公共的？

> ID：789322
> 
> 赞同：5
> 
> 时间：2009-04-25T16:58:21.697
> 
> 标签：c#, .net, oop

我正在设计一个类，如果某些方法公开公开，则不会造成任何伤害。但它们也可以是私有的，因为它们只能在我的项目中的同一类中使用。

将它们公开具有以下优点：

1.  无需访问器即可进行单元测试。
2.  灵活性。

将它们设为私有具有以下优点：

1.  公共文件简化。
2.  一些未知的错误没有暴露。

在这种情况下，一般准则是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-25T17:00:05.937

始终使一切尽可能私密。

对于单元测试，我有时会创建一个成员*internal*，然后使用`InternalsVisibleTo`AssemblyInfo.cs 中的属性来允许单元测试程序集访问内部成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T16:59:59.570

在这种情况下，我通常会让它们尽可能私有，然后在需要时提升它们的可访问性（例如，来自其他类的代码将受益于能够直接访问这些方法）。向 API 添加方法很容易，而删除它们则要困难得多（无需破坏其他代码）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-25T17:00:29.803

我非常喜欢只公开你明确想要公开的内容。我喜欢我的班级为我提供的温暖安全的茧。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-25T17:27:32.580

哦，请阅读Ch。史蒂夫·麦康奈尔（Steve McConnell）编写的代码完成 2 的 06，如果您可以访问它。这将完美地回答你的问题。

一般来说，如果方法适合类的整体“角色”，请将其公开。从技术上讲，尽量不要破坏抽象。我会举一个例子，但我不知道你工作的背景，所以例子可能无关紧要。

如果您不需要它，则无需公开 Method。

为了测试，+1 给约翰·桑德斯。

但是我真的不能像史蒂夫在 CC2 中解释的那样在这里解释你。

我希望可以在 Satckoverflow 上发布书籍参考资料吗？（请给出意见。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-25T17:00:36.060

类型的唯一公共成员应该是类型本身的公共接口的一部分。您的目标应该是将类型的接口最小化为最少数量的成员，并且几乎不暴露任何底层实现。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-25T17:56:24.287

如果你发现很难彻底测试一个类，那么这个类可能做的太多了。使用组合来拆分班级可以使各个单元更易于测试。

有时它是有道理的，有时它没有。只是一个想法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-25T17:07:45.310

我永远不会公开我的隐私！时期。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-25T17:48:56.553

仅公开您的预期客户和使用场景所需的内容，仅此而已。我不会将单元测试视为客户端并进行更改，以便仅出于单元测试的目的而公开访问不打算供公众使用的代码。如果这样做，您将弄乱您的 api，降低您的 api 的可用性，并使未来的更改更加困难和不理想，因为现在可能有客户端代码使用应该是私有 api 的东西。

我会检查你是否有更好的选择。例如，您可以在 Visual Studio 2005 和 2008 中生成私有访问器，使类的非公共 api 可公开用于测试目的。这可能会使您的单元测试代码混乱，但对我来说，最重要的是您的设计和您向客户（包括您和您的团队）发布的 api。

另一方面，我还要提到，单元测试为您提供了一个很好的机会，可以从客户端的角度了解您的设计有多好以及使用您的 api 有多容易。在单元测试开发过程中遇到挫折、问题等，您可以进行更改以增强您的 api 和设计，使其更加简单、美观和可用。

# c# - .NET 中的 Apache Web 服务反序列化问题

> ID：789349
> 
> 赞同：0
> 
> 时间：2009-04-25T17:13:51.940
> 
> 标签：c#, web-services, apache, xml-serialization

我对来自第三方 Web 服务的 XML 响应的反序列化有很大的问题。

这是xml响应

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
  <SOAP-ENV:Body>
    <ns1:CardsListResponse xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/">
      <return xmlns:ns9402="http://xml.apache.org/xml-soap" xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="ns9402:Map[62]">
        <item xmlns:ns6162="http://xml.apache.org/xml-soap" xsi:type="ns6162:Map">
          <item>
            <key xsi:type="xsd:string">card</key>
            <value xsi:type="xsd:string">0000000000</value>
          </item>
          <item>
            <key xsi:type="xsd:string">service</key>
            <value xsi:type="xsd:string">0</value>
          </item>
        </item>
      </return>
    </ns1:CardsListResponse>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

调用方法

```
[SoapDocumentMethod]
[SoapTrace]
public object[] CardsList(string login, string password)
{
object[] result = this.Invoke("CardsList", new object[] { LOGIN, PASSWORD });
return (object[])result;
} 
```

Invoke 方法总是返回 null，所以问题在于反序列化。有谁知道如何修复反序列化过程？我该如何影响这一点，或者我可以编写自己的反序列化方法？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-25T21:36:43.870

您是如何创建发布的代码的？这是来自“添加 Web 引用”命令，还是您自己创建了该代码？我问是因为这看起来像是来自 RPC 样式应用程序的响应。

# windows - 如何仅从 Windows COM 端口读取可用数据？

> ID：789353
> 
> 赞同：2
> 
> 时间：2009-04-25T17:22:06.727
> 
> 标签：windows, serial-port

我有一个串行（COM）端口的文件句柄。我需要立即读取任何可用的数据，而不是等待发送其他数据。

如何确定有多少数据可用？我可以打电话`SetCommMask(myHandle, EV_RXCHAR)`然后等待一个事件告诉我有**一些**数据可用，但这不会告诉我现在可以在没有阻塞的情况下阅读多少。

目前我正在使用 CreateFile() 和重叠 I/O 来执行我的读取，因此它们是异步的，但它们仍然等到缓冲区填满才报告 I/O 完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T17:26:42.160

*[ClearCommError()](http://msdn.microsoft.com/en-us/library/aa363180(VS.85).aspx)*函数就是您要寻找的 - 它在 COMSTAT 结构中返回输入*和*输出队列中有多少字符。

# iphone - 如何获取 iPhone/iPod Touch 中的播放列表和歌曲列表？

> ID：789360
> 
> 赞同：0
> 
> 时间：2009-04-25T17:26:54.950
> 
> 标签：iphone, objective-c, cocoa-touch, ipod-touch

我可以在 iPhone 中获取每个播放列表中的播放列表和歌曲列表吗？这是一个合法的应用程序。所以隐藏的 API/越狱解决方案不适用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T17:29:26.380

你不能用 2.x 的公共 API 来做这件事，而且 3.x 是在 NDA 下的，所以不能在这里讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T17:31:35.860

您必须等待 3.0，目前是不可能的。3.0 API 目前被 Apple 视为机密，因此我可能不应该多说，但您可以阅读网站上的 API 详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T19:06:52.277

应该注意的是，虽然 3.0 API 处于 NDA 之下，但*已*公开宣布其中一项新功能是与用户的 iTunes 库的交互。

# c# - C#：如何在 ListBox 中获取所选项目（和文本）的索引

> ID：789364
> 
> 赞同：1
> 
> 时间：2009-04-25T17:28:49.610
> 
> 标签：c#, winforms, properties, listbox

我有一个列表框（详细视图）。如何获取所选项目的索引？

我最终也想在索引处获取文本，但这应该很容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T17:32:44.563

所选索引位于`SelectedIndex`属性中。

选定的文本在`Text`属性中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T17:36:28.097

[ListBox.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditem.aspx)属性：

> 获取或设置 ListBox 中当前选定的项。

或者，自然是[ListBox.SelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditems.aspx)属性：

> 获取包含 ListBox 中当前选定项的集合。
> 
> ... 评论
> 
> 对于多选 ListBox，此属性返回一个集合，其中包含在 ListBox 中选择的所有项目。对于单选 ListBox，此属性返回一个集合，其中包含一个元素，该元素包含 ListBox 中唯一的选定项。有关如何操作集合项的详细信息，请参阅 ListBox..::.SelectedObjectCollection。
> 
> ListBox 类提供了多种引用选定项的方法。您可以使用 SelectedItem 属性，而不是使用 SelectedItems 属性来获取单选列表框中的当前选定项。如果要获取当前在 ListBox 中选择的项目的索引位置，而不是项目本身，请使用 SelectedIndex 属性。此外，如果要获取多选 ListBox 中所有选定项的索引位置，可以使用 SelectedIndices 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T11:00:01.543

我认为您的意思是 ListView（不是 ListBox），因此请使用 SelectedItems 和 SelectedIndices 属性。

# c++ - 键盘钩子与所有桌面c ++ win32交互

> ID：789371
> 
> 赞同：1
> 
> 时间：2009-04-25T17:32:28.340
> 
> 标签：c++, keyboard, desktop, hook

是否可以使键盘挂钩在所有桌面上工作？例如，我可以让它同时在winlogon桌面和交互桌面上记录按键吗？如果有怎么办？谢谢您的帮助！

编辑：想通了。我修改了 ctrl2cap 驱动程序来记录密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T17:48:19.893

看看[GINA](http://msdn.microsoft.com/en-us/library/aa380543(VS.85).aspx)（或任何其他木马键盘记录器）

# oop - 面向对象分析与现实生活中的 OOP 差异

> ID：789373
> 
> 赞同：4
> 
> 时间：2009-04-25T17:32:53.457
> 
> 标签：oop, tdd

在开始编码之前，我通常会尝试在没有太多分析（没有图表）的情况下进行 TDD。通常我发现自己将一个类分成其他类以分离关注点。我想知道更深入的分析是否会阻止这种情况。我认为大部分 OO 分析无法预测其中一些情况。你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T17:41:40.033

对我来说，分班通常是学习过程的一部分。关于问题域或编码过程。通常我在编码时这样做。有时我会带一两个同事到白板上讨论事情。

TDD 应该让您专注于您要解决的问题。在解决问题的同时了解问题的结构这一事实是 TDD 的内在组成部分。不要进入大型的前期分析/设计流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T17:47:18.477

“通常我发现自己将一个类拆分为其他类以分离关注点。我想知道更深入的分析是否会阻止这种情况。我认为大部分 OO 分析无法预测其中一些情况。”

我在这方面也有类似的经历。TDD 确实可以帮助您更好地设计我在 A&D 中没有的课程。

但是，我发现先前的分析同样有帮助。这就像通过分析奠定基础，然后在编码时获得详细设计。

某些事情只需要从更大的角度来看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T17:52:45.530

大多数时候，当我开始一个编程/设计项目时，我不仅对我最初希望它做什么，而且对需求可能演变的一些方向都有一个很好的想法。这推动了初始特性的选择（它推动了测试驱动开发），并且可以给我一个借口来按照我认为以后有用的方向拆分类。

如果您只是开始从您正在考虑的大量功能列表中随机选择测试用例，那么您的初始类的开发方向也会有些随机。所以我认为，作为一个有经验的开发人员，首先要仔细选择方向——不一定要进行大量的正式分析，但至少要凭直觉知道随着项目的发展，哪些特性在架构上会很重要。

XP 和 TDD 的要点之一是，您不希望在初始需求未要求的功能和方向上花费太多时间，因为当客户看到您的内容时会改变主意到目前为止已完成，因此您不想花太多时间思考。但是，作为一名开发人员，培养你的技能和直觉的一部分是锻炼和提高你预测哪些未公开内容可能在以后变得重要的能力。

OTOH，XP 和重构的承诺是，当需求将您推向那个方向时，您可以在问题的初始分解中解决问题。我认为这是真的，但只要你能在第一时间做出正确的决定，你仍然会成为更有价值的贡献者。让它看起来像运气——“测试迫使我以这种方式考虑它”是技能的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T17:38:39.603

我认为预先计划好很多类结构（以及所有不同的接口）在面向对象设计/编程中非常重要。在深入研究代码之前，您几乎找不到任何不首先使用 UML 和其他建模方法规范设计的主题的书籍。

# performance - 如何对用不同编程语言编写的库进行性能测试？

> ID：789376
> 
> 赞同：0
> 
> 时间：2009-04-25T17:34:51.860
> 
> 标签：performance, cross-platform, testing, cross-language

*问题是*： 给定许多具有相似或相等范围的编程库（例如 XML 解析器、正则表达式、标记...）；是否有工具可以在这些库上运行性能测试并进行比较（并生成报告），即使这些库可能是用不同的编程语言（如 java、C#、ruby、python、perl 等）编写的?

我查看了这些[opensourcetesting.org/performance.php](http://www.opensourcetesting.org/performance.php)，但没有一个符合上述（有些模糊的）要求。

是否有用于跨语言跨平台性能测试的工具包或框架？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T17:41:56.927

我不会尝试将单个工具包用于多种语言。这不太可能为每个应用程序带来最佳（甚至是平均）性能。

相反，我会尝试提出一个框架设计，它定义了要测试的内容，并拥有一个通用数据集。然后每种语言/库都可以提供自己的框架*实现*来测试适合该库的操作。这样，即使它们不使用*完全相同的*语法/调用，这些操作也可以“在逻辑上等效”。您最终会测试该库/语言的*惯用*代码，而不仅仅是最低公分母。

这是我对 Protocol Buffers 进行基准测试所采用的方法。到目前为止，我非常基本的框架已经在 C# 和 Java 中实现，我现在正在编写一个更丰富的框架，它允许运行整个“基准脚本”。一个理想的目标是同一平台内的不同实现（例如，协议缓冲区的不同 .NET 实现）应该能够轻松连接到相同的核心基准测试代码中。

在我看来，重要的是拥有一组通用的操作（即使它们并非*全部*由*所有*库实现）和一个通用的数据集。这是基准测试有意义的唯一方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T17:51:32.023

如果可能的话，最好使用某种形式的依赖注入，这样您就可以插入一个模块并与另一个模块进行切换。在此之前，您需要为此类库创建独特的界面（即包装器），这使工作更难，但整体设计更好。从积极的方面来说，如果您想对早期的界面进行基准测试，则不必完整，而只是为了展示您认为在 perf 时最有益的内容。是有问题的。

能力很大程度上取决于所使用的语言。

我不喜欢人工测试。它们在大多数情况下是不准确的 IMO，人们往往会忽略一个库函数或多或少地比其他库函数执行的操作，而它们看起来像同一件事。我很少遇到没有这种属性的基准。

另一方面，很少有完全更好的图书馆这样的东西。许多库在其他类似库可能很糟糕的某些情况下表现出良好的性能，反之亦然。

因此，如果性能对您的应用程序来说是最重要的事情，那么 IMO 最好的做法是为您要导入的操作创建接口，然后插入/输出几个库并查看实际基准测试中的差异，您的基准测试应用程序在运行，而不是一些人工数学笨蛋...

# c# - 在运行时列出、加载和实例化 App_Code 中的未知类

> ID：789385
> 
> 赞同：1
> 
> 时间：2009-04-25T17:38:58.183
> 
> 标签：c#

我想在运行时加载和实例化位于我的 App_Code 文件夹中的类。

类实现`IModule`：

```
public interface IModule
{
    String Test();
} 
```

一个测试类：

```
// ~/App_Code/Test.cs

namespace ModuleManagementSystem
{
    class Test : IModule
    {
        public String Test()
        {
            return "Testing! One, two, thee!";
        }
    }
} 
```

类文件由系统用户上传并充当模块。

模块的类名将始终与模块文件名相同。

我正在寻找功能示例代码。

我会尽快提供赏金。

## **更新：**

```
namespace ModuleManagementSystem
{
    public sealed class Compile
    {
        public void ToDLL(String sourcefile, String outputfile)
        {
            var compilerResults =
            CodeDomProvider.CreateProvider("CSharp").CompileAssemblyFromFile(
                new CompilerParameters {
                    OutputAssembly = outputfile,
                    GenerateInMemory = false,
                    TreatWarningsAsErrors = false,
                    GenerateExecutable = false,
                },
                sourcefile
            );
        }
    }
} 
```

以上适用于：

```
// ~/App_Code/Test.cs

public class Test
{
    // ...
} 
```

但是如果我实现我的`IModule`接口：

```
namespace ModuleManagementSystem
{
    public interface IModule
    {
        String HelloWorld();
    }
} 
```

我收到以下错误：

> {c:\inetpub\wwwroot\ModuleManagementSystemWeb\App_Code\Test.cs(4,21)：错误 CS0246：找不到类型或命名空间名称“ModuleManagementSystem”（您是否缺少 using 指令或程序集引用？）} System.CodeDom.Compiler.CompilerError

`IModule`接口和类都`Compile`位于同一个类库中，该类库是从 Web 应用程序引用的：

[http://roosteronacid.com/ModuleManagementSystem.jpg](http://roosteronacid.com/ModuleManagementSystem.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T17:46:21.363

实际上传到您的 App_Code 文件夹让我觉得是个坏主意。我会使用一个单独的文件夹，ASP.NET 对此一无所知。这样您就不会让框架尝试为您自动编译代码。

您可以轻松地即时编译和运行代码[`CSharpCodeProvider`](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)- 例如，请参阅[我的 Snippy 源代码](http://csharpindepth.com/Downloads.aspx)。

我希望这仅用于内部（和经过身份验证）使用 - 我不建议让不受信任的用户在您的 Web 服务器上执行他们的代码。您可以通过运行大大减少权限的代码来使这一切变得*更安全，但您仍然冒着代码紧密循环等风险。*

编辑：针对您更新的问题，您只需要提供适当的程序集以供参考，其中包含`IModule`. 见`CompilerParameters.ReferencedAssembles`物业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T17:48:52.933

```
Assembly assembly = Assembly.Load(assemblyName);

IModule instance = assembly.CreateInstance(typeName) as IModule; 
```

您还可以使用该[`Activatore.CreateInstance()`](http://msdn.microsoft.com/de-de/library/system.activator.createinstance(VS.80,loband).aspx)方法创建实例，而无需显式引用程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T17:50:06.643

你可以使用反射来做到这一点，这是一个非常简单的方法，它将返回你传递给函数的模块名称 [类名] 的实例

```
Public Shared Function GetDALInstance(ByVal moduleClassName As String) As IModule
        Dim className As String
        dim path as string = <<NamespacePath>>  
        className = Path + moduleClassName
        Return Assembly.Load(Path).CreateInstance(className)
    End Function 
```

上面的方法是在 vb.net 你可以简单地把它转换成 c#

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-04T12:13:25.130

我决定在运行时加载的类必须实现给定的接口，并且类的名称必须与文件名相同。

类上传和编译到的文件夹无关紧要。

**加载已编译的类 (.dll) 并对其进行实例化：**

```
return (IInterfaceClassesMustImplement)Assembly
/* continued --> */ .LoadFile("c:\...\SomeClass.dll")
/* continued --> */ .CreateInstance("SomeClass"); 
```

**编译一个类：**

```
internal static class Compiler
{
    internal static void AssemblyFromFile(
        String classFilePath,
        String assemblyFilePath,
        String[] referencedAssemblies
    )
    {
        var cp = new CompilerParameters { OutputAssembly = assemblyFilePath };

        foreach (String ra in referencedAssemblies)
        {
            cp.ReferencedAssemblies.Add(ra);
        }

        CompilerResults cr = CodeDomProvider.CreateProvider("CSharp")
        /* continued --> */ .CompileAssemblyFromFile(cp, classFilePath);

        if (cr.Errors.Count > 0) // throw new Exception();
    }
} 
```

# java - 将 Java EE 应用程序升级到 Java 6

> ID：789388
> 
> 赞同：1
> 
> 时间：2009-04-25T17:45:19.090
> 
> 标签：java, jakarta-ee, upgrade, java-6

随着即将结束的 Java 5.0 生命周期 (EOL)。我们需要升级我们的企业应用程序以使用 Java 6。该应用程序可以部署在 WebLogic、WebSphere 和 JBoss 上。（这取决于客户的选择）

有没有人有过这种升级的经验？我们应该遇到哪些问题？我们应该避免哪些陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T18:02:33.523

为什么，我会遵循 JavaSE 6 采用指南！

[http://java.sun.com/javase/6/webnotes/adoption/adoptionguide.html](http://java.sun.com/javase/6/webnotes/adoption/adoptionguide.html)

升级通常非常简单......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T18:10:18.200

您最大的问题将是 WebSphere、WebLogic 等。

它们是否都经过认证可以在 Java 6 上运行。

我对 Java 5 这么快就 EOL 感到惊讶——实际上 Sun 会提供多年的补丁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T18:24:40.180

如果您使用 JAXB 2.1，您可能会遇到一个问题。有关详细信息，请参阅此[链接](https://jaxb.dev.java.net/guide/Migrating_JAXB_2_0_applications_to_JavaSE_6.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T19:19:34.197

在我的上一份工作中，我们必须这样做；它被推迟了很长时间。当我们开始做这件事时，在宏大的范围内根本不需要时间。扩展了一些接口以添加新功能，使用 enum 关键字并及时重构等；没什么大不了的。我们支持与您相同的应用程序服务器，并且它们都可以在 Java6 上正常工作。整个事情变成了实习生可以做的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T22:01:33.247

不能做任何特定于 WebLogic、WebSphere 或 JBOSS 的事情。您必须始终在发行版中包含每个人需要的任何特殊配置。

我发现无需更改即可在应用服务器之间迁移的唯一方法是使用 Spring。我可以毫无问题地将 WAR 从 Tomcat 移动到 WebLogic，但前提是我包含 Tomcat 的 META-INF/context.xml 和 WebLogic 的 weblogic.xml。

# c# - C# 开发工作的项目结构

> ID：789389
> 
> 赞同：12
> 
> 时间：2009-04-25T17:45:38.247
> 
> 标签：c#, visual-studio, msbuild

对于用 C# 编写的大中型项目，您认为哪种目录/解决方案/项目结构最易于管理和方便？“中型到大型”是指在具有嵌套命名空间的层次结构中包含多种 Visual Studio C# 项目类型的项目。¹

我主要对 Visual Studio 2008 的“Windows”部分中的那些项目类型感兴趣：Windows 窗体、WPF、自定义控件和类库。此外，我正在使用 MSBuild（通过 Visual Studio）来构建我的项目。

我从来没有发现 Visual Studio 自动生成的默认结构值得使用。此结构有一个文件夹专门用于包含解决方案和一个用于每个项目的嵌套文件夹。我想知道这是否是因为我过去使用 C# 的项目规模（中小型）。这种结构对大型项目有什么好处？你发现它有用吗？

我还对文件夹名称及其与命名空间的关系等感兴趣。

以下是我个人对项目结构的目标。

## 目标

*   每个项目都应该是合理的自包含的。也就是说，我希望能够单独检查每个并编译它（在依赖项允许的情况下）。
*   导航结构应该很容易。
*   目录结构应该以清晰直接的方式映射到名称空间。
*   识别解决方案文件应该很容易。
*   在 Visual Studio (MSBuild) 中的大多数或所有层次结构中，项目的构建都应该很少或不需要额外的努力

    1.  *请注意，我在这里使用的“项目”一词是指“开发工作”，除非有明确说明。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-25T19:22:20.260

我目前使用的结构是将整个系统分成逻辑部分，每个部分都是一个单独的 Visual Studio 解决方案。每个这样的解决方案都包含在一个文件夹结构中，如下所示：

```
[logical part name]
  |-doc
  |-lib
     |- // any non-GAC-assemblies needed by the projects in the solution
  |-src
     |-Production
     |  |-Project1
     |  |-Project2
     |-Tests
        |-UnittestProject1
        |-UnittestProject2
  |-tools
     |- // any tools needed for automated builds and such 
        // (NUnit, NCover, MSBuild tasks, ...) 
```

这确实需要对文件进行一些移动（例如，一个逻辑部分引用的另一部分的输出需要移动到另一部分的 lib 文件夹中），但这可以在 MSBuild 脚本中轻松实现自动化。我们还有这样一个 MSBuild 脚本，它按顺序调用每个逻辑部分的 MSBuild 脚本，并将输出移动到相应的 lib 文件夹中。这样，我可以一步构建我当前正在使用的逻辑部分，还可以通过单击（或者，双击）构建整个系统。

在过去一年半左右的时间里，我们在当前项目中使用了这种结构，而且看起来效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T18:09:18.673

您可能想查看[TreeSurgeon](http://www.codeplex.com/treesurgeon)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-26T00:53:03.240

我们所做的：

我们为每一层提供单独的解决方案、颠覆存储库和构建。

每个层都有依赖构建，因此构建较低层将导致该层构建。

每层都有一个 Lib 目录，外部指向较低层的输出目录。

在构建之前，任何层（除了根层）都会对外部文件夹进行更新，将最新的二进制文件拉入。如果构建成功，则它将外部链接更新到最新版本，然后检查它自己的二进制文件。这将触发下一个构建链，等等。

这样一来，较低级别层中的重大更改将失败构建链，但如果您从较高级别层执行获取，它仍将在最近的功能签入中起作用。

至于决定层，我们几乎有一个框架层、业务逻辑层和表示层（Web 服务、应用程序或网站）。

至于测试，它们应该与所测试的解决方案相同，但程序集不同。*永远*不应将测试程序集部署到生产环境中。原因是经常，如果不是总是，你会让你的测试程序集成为真实程序集的“朋友”程序集。假设攻击者可以在部署的程序集中执行任何公共成员，这使他们不仅可以访问您真实代码上的公共成员，还可以访问内部代码。

此外，我们将与构建、工具、配置文件等相关的内容保存在他们自己的存储库中，与代码分开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T17:58:36.700

对于 C# 项目，我通常使用 N 层结构。就像是：

/projectname_interface_layer/ /projectname_service_layer/ /projectname_business_layer/ /projectname_data_layer/

这具有在应用程序的不同实体之间提供清晰的逻辑分离的优点。

# iphone - iPhone App：我在哪里放置配置文件？

> ID：789397
> 
> 赞同：2
> 
> 时间：2009-04-25T17:51:13.503
> 
> 标签：iphone, xcode, filepath

在我的应用程序中，我有一个简单的 ASCII 文件，其中存储了一些配置信息和它使用和更改的其他小信息。我想使用应用程序将该文件复制到 iPhone。

1）请告诉我应该把这个文件（config.txt）放在xcode的什么地方。我应该把它放在 Resources 下吗？

2) 我将如何在 iPhone 中访问它？我可以用吗

```
str = [NSString stringWithContentsOfFile:@"config.txt"] 
```

还是我必须使用更完整的路径；如果是，那是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T17:56:30.963

`NSUserDefaults`如果应用程序可以更改它们，您应该使用它来存储用户设置。文档在[这里](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

设置存储为 plist 文件，因此您可以存储`NSDictionary`实例、`NSArray`实例等。

如果你想用一些设置预先填充你`NSUserDefaults`的，你可以用这样的一些代码来做到这一点：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"defaults" ofType:@"plist"];
NSDictionary *defaultsDict = [NSDictionary dictionaryWithContentsOfFile:filePath];
[[NSUserDefaults standardUserDefaults] registerDefaults:defaultsDict]; 
```

您需要使用默认设置在 Resources 文件夹中放置一个 defaults.plist 文件，并使用上面的代码。我从 AppDelegate 的`+(void)initialize`方法运行该代码，但您可以选择另一个位置来调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T17:57:57.327

你可以把它放在资源中，是的。然后，要获取文件，您可以简单地使用：

```
[[NSBundle mainBundle] pathForResource:@"config" ofType:@"txt" inDirectory:@""]] 
```

但是，我可以建议`NSUserDefaults`您的设置吗？它将为您节省大量阅读和编写它们的麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-18T16:55:17.383

如果要检索**NSUserDefaults**，可以执行以下操作：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting a NSString
NSString *myString = [prefs stringForKey:@"keyToLookupString"];

// getting a NSInteger
NSInteger myInt = [prefs integerForKey:@"integerKey"];

// getting a Float
float myFloat = [prefs floatForKey:@"floatKey"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T18:32:41.207

如果 nsuserdefaults 不能满足您的需求，您可以将配置信息存储在 Documents 目录中的文件中。如果文件在启动时不存在，请阅读资源中的版本。

# python - Converting an ImageMagick FX operator to pure Python code with PIL

> ID：789401
> 
> 赞同：1
> 
> 时间：2009-04-25T17:53:27.463
> 
> 标签：python, imagemagick, python-imaging-library

I'm trying to port some image processing functionality from an Image Magick command (using the [Fx Special Effects Image Operator](http://www.imagemagick.org/script/fx.php)) to Python using [PIL](http://www.pythonware.com/products/pil/). My issue is that I'm not entirely understanding what this fx operator is doing:

```
convert input.png gradient.png -fx "v.p{0,u*v.h}" output.png 
```

From a high level, this command takes the colors from a gradient image ([gradient.png](http://markovchainsaw.com/misc/magick/gradient.png)) and applies them as the color palette of the input image ([input.png](http://markovchainsaw.com/misc/magick/input.png)), writing to an output image ([output.png](http://markovchainsaw.com/misc/magick/output.png)).

From what I've figured out, **u** is the input image, **v** is the gradient, and it is going through each left-most pixel in the gradient from top to bottom, **somehow** applying its colors to the input image.

I can't wrap my head around how to do this same thing programmatically with PIL. The best thing I've come up with was to convert the image to a paletted image (down-sampling to a measly 256 colors) and grabbing colors individually from the gradient with a pixel access object.

```
import Image

# open the input image
input_img = Image.open('input.png')

# open gradient image and resize to 256px height
gradient_img = Image.open('gradient.png')
gradient_img = gradient_img.resize( (gradient_img.size[0], 256,) )

# get pixel access object (significantly quicker than getpixel method)
gradient_pix = gradient_img.load()

# build a sequence of 256 palette values (going from bottom to top)
sequence = []
for i in range(255, 0, -1):
    # from rgb tuples for each pixel row
    sequence.extend(gradient_pix[0, i])

# convert to "P" mode in order to use putpalette() with built sequence
output_img = input_img.convert("P")
output_img.putpalette(sequence)

# save output file
output_img = output_img.convert("RGBA")
output_img.save('output.png') 
```

This works, but like I said, it down-samples to 256 colors. Not only is this a ham-handed way of doing things, it results in a really crappy output image. How could I duplicate the Magick functionality without cramming the result into 265 colors?

**addendum:** forgot to cite the [blog where I found the original Magick command](http://blog.corunet.com/english/how-to-make-heat-maps)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-14T23:25:31.173

I know it's been about a month and you might has already figured it out. But here is the answer.

From ImageMagicK documentation I was able to understand what the effect is actually doing.

```
convert input.png gradient.png -fx "v.p{0,u*v.h}" output.png

v is the second image (gradient.png)
u is the first image (input.png)
v.p will get a pixel value
v.p{0, 0} -> first pixel in the image
v.h -> the hight of the second image
v.p{0, u * v.h} -> will read the Nth pixel where N = u * v.h 
```

I converted that into PIL, and the result looks exactly like you want it to be:

```
import Image

# open the input image
input_img = Image.open('input.png')

# open gradient image and resize to 256px height
gradient_img = Image.open('gradient.png')
gradient_img = gradient_img.resize( (gradient_img.size[0], 256,) )

# get pixel access object (significantly quicker than getpixel method)
gradient_pix = gradient_img.load()

data = input_img.getdata()
input_img.putdata([gradient_pix[0, r] for (r, g, b, a) in data])
input_img.save('output.png') 
```

# c++ - typeid() 在 g++ 中返回额外的字符

> ID：789402
> 
> 赞同：19
> 
> 时间：2009-04-25T17:53:30.973
> 
> 标签：c++, g++, name-mangling, typeid

```
class foo
{
public:
  void say_type_name()
  {
    std::cout << typeid(this).name() << std::endl;
  }
};

int main()
{
  foo f;;
  f.say_type_name();
} 
```

上面的代码使用 g++ 在我的 ubuntu 机器上打印*P3foo 。*我不明白为什么要打印*P3foo*而不是*foo*。如果我更改代码

```
 std::cout << typeid(*this).name() << std::endl; 
```

它打印*3foo*。

有什么想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-25T18:01:24.103

因为它是指向 foo 的指针。foo 有 3 个字符。于是就变成了`P3foo`。另一个有类型`foo`，所以变成`3foo`. 请注意，文本是依赖于实现的，在这种情况下，GCC 只是为您提供了内部的、错位的名称。

在程序中输入该损坏的名称`c++filt`以获取未损坏的名称：

```
$ c++filt -t P3foo
foo* 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2010-02-07T14:04:52.730

`std::type_info::name()`返回实现特定的名称。AFAIK，虽然 GCC[有一个](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html). 看[`abi::__cxa_demangle()`](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)。

```
int status;
char *realname = abi::__cxa_demangle(typeid(obj).name(), 0, 0, &status);
std::cout << realname;
free(realname); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-10-15T18:10:35.070

> 是否有便携式解决方案

解决方法是进行模板破解以将所有硬编码类型名称返回为`char*`

哪个平台没有`#include <cxxabi.h>`？

# iphone - iPhone - 如何从应用程序中保存用户设置？

> ID：789404
> 
> 赞同：9
> 
> 时间：2009-04-25T17:56:14.023
> 
> 标签：iphone, objective-c, cocoa-touch

将 iPhone 应用程序中的几个变量保存在长期内存中的最简单方法是什么？

我有一个可与不同 sqlite 数据库一起使用的应用程序，我希望在退出应用程序后保存最后一个活动数据库名称，以便在用户再次进入应用程序时打开最后一个数据库。

为此目的创建一个特殊的数据库并将这些值存储在其中有点不方便，因为我只有几个变量要存储。

存储这些变量的最简单方法是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-25T18:09:47.830

NSUserDefaults 是进行此类设置的最佳位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-25T20:22:04.140

在我的头文件中，我可能会添加以下内容：

```
@interface myAppDelegate : NSObject <UIApplicationDelegate> {
  ...
  NSString *databaseName;
}
extern NSString * const kDefaultDatabaseName;
extern NSString * const kAppDatabaseNameKey; 
```

在我的实现文件中，我将添加以下内容：

```
NSString * const kDefaultDatabaseName = @"myDefaultDatabaseName";
NSString * const kAppDatabaseNameKey = @"kAppDatabaseNameKey";

@implementation myAppDelegate

+ (void) initialize {
  if ([self class] == [MyAppDelegate class]) {
    UIApplication* myApp = [UIApplication sharedApplication];

    NSString *defaultDatabaseName = kDefaultDatabaseName;
    NSMutableDictionary *resourceDict = [NSMutableDictionary dictionary];
    [resourceDict setObject:defaultDatabaseName forKey:kAppDatabaseNameKey];
  }
}

- (void) applicationDidFinishLaunching:(UIApplication *)application {
  ...
  databaseName = [[NSUserDefaults standardUserDefaults] stringForKey: kAppDatabaseNameKey];
}

...

- (void) applicationWillTerminate:(UIApplication *)application {
  ...
  [[NSUserDefaults standardUserDefaults] setObject:databaseName forKey:kAppDatabaseNameKey]
} 
```

当您的应用程序启动时，如果没有预先存在的用户默认值，则使用您设置为默认数据库的任何内容`+initialize`创建一个新字典。`NSUserDefaults``kDefaultDatabaseName`

当应用程序完成启动时，该成员将采用字典`databaseName`中设置的值。`NSUserDefaults`这可以是`kDefaultDatabaseName`运行您的应用程序后更新的内容或任何内容。

当您运行应用程序时，您的用户可能会将值更改为`databaseName`其他值。

就在应用程序终止之前， 的值`databaseName`被写入`NSUserDefaults`字典。下次打开应用程序时，`databaseName`将采用新的更新值。

在将此更新写入字典之前，您不必等待应用程序终止。例如，您可以在用户更改`databaseName`为新内容后立即执行此操作。但这取决于你。

# c - 使用 realloc 调整缓冲区大小

> ID：789413
> 
> 赞同：4
> 
> 时间：2009-04-25T18:01:14.493
> 
> 标签：c, realloc

> 如果指向的区域被移动，则执行 free(ptr)。

你能解释一下上面的行`realloc()`吗？此行来自 calloc、malloc、realloc 和 free 的手册页。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-25T18:08:35.180

我认为这更好地解释了它：

> 如果在当前位置没有足够的空间来扩展当前块，则分配大小为 size 的新块，并将现有数据从旧块复制到新块的开头。旧块被释放，函数返回一个指向新块的指针。

引用自[C 中的 realloc](http://www.java-samples.com/showtutorial.php?tutorialid=589)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-26T12:58:32.623

假设您有以下堆布局。这是一个简化的内存分配器，其中控制信息不会占用堆中的空间

```
Addr       A                   B
     +------------+      +------------+
1000 | your space |      | your space |
     +------------+      +------------+
2000 | free space |      | used space |          
     |            |      +------------+
3000 |            |      | free space |
     |            |      |            |
4000 |            |      |            |
     +------------+      +------------+ 
```

在这两种情况下，您在地址 1000 处分配了 1000 个字节。但是，在情况 B 中，紧随其后的是为其他目的分配的内存。

让我们来看看当您想将内存重新分配到 2000 字节时会发生什么。

在情况 A 中，这很容易，它只是根据下图扩展您的分配。

但是，在情况 B 中，这并不容易。紧随您的块的内存正在使用中，因此没有足够的空间来扩展您的分配，您*需要*连续的内存。这是两种情况的结束位置：

```
Addr       A                   B
     +------------+      +------------+
1000 | your space |      | free space |
     |            |      +------------+
2000 |            |      | used space |
     +------------+      +------------+
3000 | free space |      | your space |
     |            |      |            |
4000 |            |      |            |
     +------------+      +------------+ 
```

对于情况 B，分配器找到一个足够大的块（在 3000 处）以*进行*所需的扩展，并将当前块（在 1000 处）的内容复制到它。然后它会为您提供这个新块的地址并释放旧块*，因为您不再需要它。*这就是你问题中的短语的意思。

这种移动缓冲区的操作取决于内存分配策略，但通常情况下，不会移动缓冲区（它通常很昂贵，因为它涉及大量内存副本），如果：

*   其后有空闲空间，可以与当前空间一起满足重新分配；或者
*   你正在缩小尺寸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T18:09:51.650

你不能总是在原地增加内存区域。堆中可能没有空间。因此，它不会增加它，而是分配一个全新的内存块并释放旧内存。

# spring - Spring 集成：将 Web 服务连接到 FIFO 队列

> ID：789416
> 
> 赞同：3
> 
> 时间：2009-04-25T18:01:52.277
> 
> 标签：spring, queue, spring-integration

我仍在为 Spring 集成而苦苦挣扎——这是我的场景：

1.  Web 服务从客户端 A 获取请求
2.  Web 服务将请求放入队列
3.  队列消费者处理消息 FIFO 并发送一个响应，该响应被路由回 Web 服务
4.  Web 服务将响应发送回客户端 A

将有多个 Web 服务都将消息提供到此队列中，我需要确保它们真正按照接收顺序进行处理。

我需要将哪些 Spring Integration 连接在一起？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-30T06:46:38.443

我无法在 Spring Integration 方面为您提供帮助，但也许您需要重新考虑一下您的架构。在 ESB 系统中，当您知道消息的处理将花费相当长的时间或者您不确定远程端是否已准备好（另一个原因是桥接不兼容的组件）时，您通常会将消息放入队列中。当您将消息添加到队列中时，您会立即返回请求者，指示已收到消息，但不提供操作结果。然后请求者需要轮询结果，或者您可以提供某种“推送”功能。

所以，如果处理队列中的消息需要很多时间，我建议修改你的架构。Web 客户端等待回复的时间很长并不常见，而且许多请求也可能超时。

另一方面，如果消息的处理快速可靠，则不需要使用队列通道。让您的所有消息都与一个中心组件（Java EE 会话 Bean、Spring Bean、Web 服务）进行通信，并自己实现一个队列机制。它们已经是涵盖如何做到这一点的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-29T21:23:22.603

基于[QueueChannel](http://static.springframework.org/spring-integration/apidocs/org/springframework/integration/channel/QueueChannel.html)的 Javadoc，这是我的尝试。这不涉及 Web 服务配置，仅涉及 Web 服务后端实现中的代码。

这是将某些内容添加到队列（您的 Web 服务）的代码。

```
public class TheWebService {

  // Could also use QueueChannel, or PollableChannel here instead
  // just picked the most general one
  private org.springframework.integration.channel.MessageChannel queue;

  public void yourWebServiceMethod(SomeArg arg) {
     SomeObjectToPassThatExtendsMessage passed = someInitialProcessing(arg);
     queue.send(passed);
  }
} 
```

这是您的接收器/处理器/出队类中的代码

```
public class TheProcessor {

  // Could also use QueueChannel here instead
  // just picked the most general one
  private org.springframework.integration.channel.PollableChannel queue;

  // This method needs to be setup to be called by a separate thread.
  // See http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/scheduling/package-summary.html
  // and it's sub-packages.
  public void someProcessingPoller() {
     SomeObjectToPassThatExtendsMessage passed = queue.receive();
     // Do some processing with the passed object.
  }

} 
```

对此的 Spring 配置看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans">

  <bean id="webService" class="mypackage.TheWebService">
      <property name="queue" ref="queue" />
  </bean>

  <bean id="processor" class="mypackage.TheProcessor ">
      <property name="queue" ref="queue" />
  </bean>

  <bean id="queue" class="org.springframework.integration.channel.QueueChannel"/>
</beans> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T18:08:14.213

请注意 Spring Integration，但 Java 5 有许多可以处理 FIFO 的 BlockingQueue。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-30T15:17:05.193

您应该查看 Spring Integration 中的 http（用于 REST）或 ws（用于 POX/SOAP）“inbound-gateway”元素。任何一个都可以通过“请求通道”属性连接到一个共享的、队列支持的通道（可以在后台处理通过同一网关返回的回复路由）。我建议从浏览示例开始。该博客应该可以帮助您启动和运行：http: [//blog.springsource.com/2010/09/29/new-spring-integration-samples/](http://blog.springsource.com/2010/09/29/new-spring-integration-samples/)

希望有帮助。-标记

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T16:07:31.793

问题不在于春天。我认为您将需要一个队列，其中包含包含请求并提供响应的元素。但是响应需要阻塞，直到元素被出列并处理。所以队列元素看起来像：

```
public class BlockingPair {
  private final RequestBodyType request;
  private ResponseBodyType response;

  public BlockingPair(RequestBodyType request) {
    this.request = request;
  }

  public RequestBodyType getRequest() {
    return request;
  }

  public ResponseBodyType getResponse() {
    while (response == null) {
      Thread.currentThread().sleep(10);
    }
    return response;
  }

  public void setResponse(ResponseBodyType response) {
    this.response = response;
  }
} 
```

Web 服务入队创建 BlockingPair 及其请求正文。然后将 BlockingPair 元素推入队列。之后它会创建从 BlockingPair 获取响应主体的响应，但会阻塞。

消费者从队列中取出一个 BlockingPair 并设置响应正文。Web 服务从那里继续写入响应。

您需要三个 bean：webservice、阻塞队列和消费者。webservice 和 consumer 都需要队列作为 bean 属性。

队列和消费者 bean 需要在应用程序上下文中进行规划（由 初始化`ContextLoaderListener`）。队列需要一个 bean id 才能被 web 服务引用（它有自己的上下文，但应用程序上下文作为父级，因此可以引用队列引用）：

部分`web.xml`：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>classpath:/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
  <servlet-name>service</servlet-name>
  <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>service</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

`applicationContext.xml`包含两个bean ：

```
<bean id="queue" class="java.util.concurrent.LinkedBlockingQueue"/>

<bean id="consumer" class="...">
  <property name="queue" ref="queue"/>
</bean> 
```

网络服务有自己的上下文定义，这里`service-servlet.xml`：

```
<bean id="endpoint" class="org.springframework.ws.server.endpoint....PayloadEndpoint">
  <property name="queue" ref="queue"/>
</bean> 
```

有关定义 spring ws 端点的更多信息，请参阅[spring 教程](http://static.springsource.org/spring-ws/sites/1.5/reference/html/tutorial.html)。

消费者需要是后台任务，所以我更喜欢[石英](http://www.quartz-scheduler.org/)，弹簧集成见[这里](http://static.springframework.org/spring/docs/2.5.x/reference/scheduling.html)。

# coldfusion - 重新加载 Fusebox 应用程序而不会出现“未找到已解析的文件或目录”错误的最佳方法是什么？

> ID：789418
> 
> 赞同：10
> 
> 时间：2009-04-25T18:03:11.527
> 
> 标签：coldfusion, fusebox

我有一个使用 CF8 和 Fusebox 5 的站点。每当我需要向站点添加新功能时，我通常必须为控制器、模型或视图或全部添加新的熔断器到 circuit.xml.cfm。要启用这些新功能/页面，我转到以下网址：

```
?fusebox.load=true&fusebox.parse=true&fusebox.password=password&fusebox.loadclean=true 
```

最后一个参数是我最近发现的一个参数，并确定使用它可以启用我的新保险丝；没有它，新的保险丝将无法识别。但是，当我这样做时，我之前生成的所有解析文件都将被删除。这不是什么大问题，因为它们在第一次需要时会即时重新生成，但是我有一些页面在访问时会返回错误。错误说找不到目录，但它们在那里，每次出现都是因为解析文件不存在。

这是堆栈跟踪的一个错误示例：

```
Error - Parsed File or Directory not found.

Date/Time: Apr 25 2009 12:26:02

Type: fusebox.missingParsedFile

Message: Parsed File or Directory not found.

Detail:

Attempting to execute the parsed file 'login.logout.cfm' threw an error. This can occur if the parsed file does not exist in the parsed directory or if the parsed directory itself is missing.
Stack Trace:
    coldfusion.runtime.CustomException: Parsed File or Directory not found.
    at coldfusion.tagext.lang.ThrowTag.doStartTag(ThrowTag.java:124)
    at coldfusion.runtime.CfJspPage._emptyTag(CfJspPage.java:2644)
    at cffusebox52ecfm1214986498.runPage(C:\example.com\fb5core\fusebox5.cfm:216)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:192)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:366)
    at coldfusion.runtime.CfJspPage._emptyTag(CfJspPage.java:2644)
    at cfindex2ecfm584653367.runPage(C:\example.com\index.cfm:3)
    at coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:192)
    at coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:366)
    at coldfusion.runtime.CfJspPage._emptyTag(CfJspPage.java:2644)
    at cfApplication2ecfc1103573364$funcONREQUEST.runFunction(C:\example.com\Application.cfc:36)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:418)
    at coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
    at coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
    at coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:56)
    at coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:277)
    at coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:192)
    at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:448)
    at coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:308)
    at coldfusion.runtime.AppEventInvoker.invoke(AppEventInvoker.java:74)
    at coldfusion.runtime.AppEventInvoker.onRequest(AppEventInvoker.java:243)
    at coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:269)
    at coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48)
    at coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:86)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.CfmServlet.service(CfmServlet.java:175)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:284)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

我要解决此问题的方法是转到以下 url，它与上一个类似，但没有 fusebox.loadclean=true：

```
?fusebox.password=password&fusebox.load=true&fusebox.parse=true 
```

我尝试做的是在转到第一个 url 之后，我会转到第二个，但错误仍然出现。

我正在寻找的是在不产生这些错误的情况下重新加载电路的正确方法。我是参与此站点的第三位开发人员，因此前两位可能在配置每个电路.xml.cfm 实例时采用了不同的风格。这些文件用于确定需要包含的应用程序流程、附加安全层和指定某些属性。这是保险丝盒方法：

```
<!-- controller/circuit.xml.cfm -->
<circuit access="public">
    <fuseaction name="index">
        <set name="request.title" value="Account overview" />
        <do action="layout.header" />
        <do action="mdashboard.index" />
        <do action="vdashboard.index" />
        <do action="layout.footer" />
    </fuseaction>

    <fuseaction name="profile">
        <set name="request.title" value="Your Profile" />
        <do action="layout.header" />

        <!-- form submitted to the same page -->
        <if condition="isDefined('attributes.submit')">
            <true>
                <do action="mdashboard.updateprofile" />
                <do action="vdashboard.profile" />
            </true>
            <false>
                <do action="mdashboard.profile" />
                <do action="vdashboard.profile" />
            </false>
        </if>

        <do action="layout.footer" />
    </fuseaction>
</circuit>

<!-- model/circuit.xml.cfm -->
<circuit access="internal">
    <fuseaction name="index">
        <include template="sqlIndex" />
    </fuseaction>

    <fuseaction name="profile">
        <include template="sqlProfile" />
    </fuseaction>

    <fuseaction name="updateprofile">
        <include template="actUpdateProfile" />
    </fuseaction>
</circuit>

<!-- view/circuit.xml.cfm -->
<circuit access="internal">
    <fuseaction name="index">
        <include template="dspIndex" />
    </fuseaction>

    <fuseaction name="profile">
        <include template="dspProfile" />
    </fuseaction>
</circuit> 
```

这是 Fusebox 和 ColdFusion 方法的混合：

```
<!-- controller/circuit.xml.cfm -->
<circuit access="public">
    <fuseaction name="index">
        <set name="request.title" value="Account overview" />
        <do action="layout.header" />
        <include template="ctrlIndex" />
        <do action="layout.footer" />
    </fuseaction>

    <fuseaction name="profile">
        <set name="request.title" value="Your Profile" />
        <do action="layout.header" />
        <include template="ctrlProfile" />
        <do action="layout.footer" />
    </fuseaction>
</circuit>

<!-- model/circuit.xml.cfm -->
<circuit access="internal">
</circuit>

<!-- view/circuit.xml.cfm -->
<circuit access="internal">
</circuit>

<!-- controller/ctrlProfile.cfm -->
<cfif isDefined("attributes.submit")>
    <cfinclude template="../model/actUpdateProfile.cfm">
</cfif>

<cfinclude template="../model/sqlPaymentOptions.cfm">
<cfinclude template="../view/dspPaymentOptions.cfm"> 
```

这两种方法都在整个站点中使用，我不反对使用其中任何一种，但我的目标是减少用户尝试访问特定页面时可能出现的任何错误。我在想问题可能是配置的混合方法，我应该只坚持使用 Fusebox 方法，但我无法在这个错误中找到一个共同的趋势。每次页面收到​​错误时，我们的错误处理程序都会向我发送电子邮件，所以我认为我可以自动调用我的第二个 url 并将它们重定向回在发生此特定错误时生成错误的页面，但这有无限循环的可能性，它并没有解决真正的问题。

我做错了吗？我可以在 url 中包含一组属性，这些属性将强制站点在不清除我的解析文件的情况下识别新的保险丝吗？CF 本身并不难编码，但我对它还是比较陌生，所以我可能会倒退。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-25T20:37:39.173

注意：新**保险丝**不需要重新加载保险丝盒 - 只有新的**保险丝**操作需要一个。

我不完全确定您遇到的错误是否是我认为的错误，但是无论如何，以下都是很好的做法...

**当您进行了更改并需要重新加载 fusebox**时，您应该这样做：

1.  将最新代码部署到同一服务器上的预直播“暂存”区域。
    *   `fusebox.parseall=true`使用和在这个区域生成你的解析文件`fusebox.loadclean=true`
    *   将所有文件从那里复制到您的 Live webroot 中。
    *   在 Live 站点上执行一个 fusebox `fusebox.load=true`- 没有别的（除了密码）。

（注意：如有必要，在第 3 步之前将您的站点设置为离线/维护模式，然后在第 4 步之后将其重新上线）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-26T18:01:17.153

有什么理由不使用 fusebox.mode = "development-full-load" (set in fusebox.xml) 吗？如果您还没有在这种模式下开发，这可以让您的生活更轻松。

# c++ - C ++静态全局对象解决方法？

> ID：789421
> 
> 赞同：2
> 
> 时间：2009-04-25T18:07:58.597
> 
> 标签：c++, global-variables

我有一个由于错误而崩溃的 C++ 程序。它甚至不会进入 main，因为在其静态全局对象的构造函数之一中访问了 NULL 指针。更糟糕的是，指针是 NULL，但应该由另一个全局静态变量设置。我想我可以将这些全局变量包装在一个设置指向对象的全局指针的函数中。我知道需要重新设计全局变量。我也知道全局静态对象的顺序是未知的。我仍然很好奇——*是否有一种公认的方法来控制静态全局对象初始化的顺序？*

**简化示例（删除了错误检查日志等）**

**[游戏.cpp]**

```
Point UpperLeft(-1024.1024); //Global Evilness

int InitializeGobals()
{
   ...
}

int main (int argc, char ** argv)
{
     if (!InitializeGame())
        Die("Initialization Failure");

     WriteHighScore(UpperLeft);
} 
```

我想使用以下命令指定所有静态对象：

**[建议游戏.cpp]**

```
Point *UpperLeft;
int InitializeGobals()
{
   Point IGUpperLeft = new Point(-1024.1024); 
   UpperLeft = &IGUpperLeft; 

   ...
}

int main (int argc, char ** argv)
{
     if (!InitializeGame())
        Die("Initialization Failure");
     WriteHighScore(UpperLeft);
} 
```

**[不是很相关，但可能有助于理解问题]**

**[点.cpp]**

```
Point::Point() {  
    x = 0;
    y = 0;
}

Point::Point(int nx, int ny) {  
    x = nx;
    y = ny;
    strcpy(text,0);  //0 should have been set by another global static object
} 
```

**[点.h]**

```
#ifndef POINT_H
#define POINT_H
class Point {
    public:
        Point();  
        Point(int nx, int ny); 
        int getX();
        int getY();
        int getText(*pcbuff);
    private:
        int x;
        int y;
        char text[2];
};
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T18:14:30.220

控制静态对象实例化的一种方法是在第一次使用时使用构造，如本[常见问题解答中所述](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.13)

# c++ - 在c ++中旋转字符串？

> ID：789426
> 
> 赞同：12
> 
> 时间：2009-04-25T18:09:34.147
> 
> 标签：c++, string

我正在寻找一种在 C++ 中旋转字符串的方法。我把所有的时间都花在了 python 上，所以我的 c++*非常*生疏。

这是我想要它做的事情：如果我有一个字符串'abcde'，我希望它更改为'bcdea'（第一个字符移到末尾）。这是我在python中的做法：

```
def rotate(s):
    return s[1:] + s[:1] 
```

我不确定如何在 cpp 中执行此操作。也许使用一个字符数组？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-25T18:22:56.987

我推荐[`std::rotate`](http://en.cppreference.com/w/cpp/algorithm/rotate)：

```
std::rotate(s.begin(), s.begin() + 1, s.end()); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-25T18:16:27.437

这是一个将第一个字符“浮动”到字符串末尾的解决方案，有点像冒泡排序的单次迭代。

```
#include <algorithm>

string rotate(string s) {
  for (int i = 1; i < s.size(); i++)
    swap(s[i-1], s[i]);
  return s;
} 
```

如果您希望函数就地旋转字符串：

```
#include <algorithm>

void rotate(string &s) {
  for (int i = 1; i < s.size(); i++)
    swap(s[i-1], s[i]);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-25T18:20:17.210

这是一个比较简单的方法：

```
void RotateStringInPlace(char buffer[])
{
    // Get the length of the string.

    int len  = strlen(buffer);
    if (len == 0) {
        return;
    }

    // Save the first character, it's going to be overwritten.

    char tmp = buffer[0];

    //  Slide the rest of the string over by one position.

    memmove(&buffer[0], &buffer[1], len - 1);

    // Put the character we saved from the front of the string in place.

    buffer[len - 1] = tmp;
    return;
} 
```

请注意，这将修改缓冲区。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-25T18:26:53.513

算法头中有一个标准的[旋转](http://www.cppreference.com/wiki/stl/algorithm/rotate)函数。
如果您想自己执行此操作，可以尝试以下方法：

```
#include <iostream>
#include <string>

std::string rotate_string( std::string s ) {
    if (s.empty()) return s;

    char first = s[0];

    s.assign(s, 1, s.size() - 1);
    s.append(1, first);

    return s;
}

int main() {
    std::string foo("abcde");

    std::cout << foo << "\t" << rotate_string(foo) <<  std::endl;

    return 0;
} 
```

但是，当然，在大多数情况下，最好使用标准库。

**编辑#1**我刚刚看到了 litb 的回答。再打！
**编辑#2**我只想提一下，rotate_string 函数在长度为 0 的字符串上失败。您将收到 std::out_of_range 错误。您可以使用简单的 try/catch 块来解决此问题，或使用 std::rotate :-)
**编辑 #3**如果字符串的长度为 0，则返回相同的字符串。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-26T14:59:21.990

如果您不想要这些就地解决方案，那么您的 python 代码可以直接翻译成 C++，并使用一些额外的代码来处理索引越界在 C++ 中是个坏消息这一事实。

```
s[1:] --> s.substr(1);
s[:1] --> s[0]; // s[0] is a char not a string, but that's good enough 
```

所以，

```
std::string rotate(const std::string &s) {
    if (s.size() > 0) return s.substr(1) + s[0];
    return s;
} 
```

这不是最有效的：它几乎肯定会创建比最小可能更多的字符串。但是您通常不需要最有效的方法，`reserve`并且`append`如果您想在没有不必要分配的情况下进行连接，您可以这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-25T18:21:17.597

要求到位吗？

如果不是，您可能最好取除第一个字符之外的所有子字符串，然后将第一个字符附加到末尾。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-12-23T17:32:38.917

在某些时候，我痴迷于分而治之，并使用了以下内容

因为它将问题“划分”为较小的问题，所以我的猜测是它的性能更好。欢迎专家对复杂性和内存访问行为发表评论:)。

```
Initial Call:
rotate_about(rots_g, 0, i, j - 2);

void rotate_about(char *str, int start, int pivot, int end)
{
    if(pivot == start)
    {
        return ;
    }
    else if((pivot - start) <= (end - pivot))
    {
        int move_bytes = pivot-start;
        swap_bytes(&str[start], &str[pivot],move_bytes);
        rotate_about(str,pivot,pivot+move_bytes,end);
    }
    else
    {
        int move_bytes = end - pivot + 1;
        swap_bytes(&str[start], &str[pivot],move_bytes);
        rotate_about(str, start+move_bytes ,pivot,end);
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-02T07:41:20.623

以下是不使用任何外部函数的 C 代码：无论有多大，它都会将字符串原地向前和向后旋转任意值。

```
int stringRotate(int value)
  {
  unsigned long   I,J,K;
  unsigned long   index0;
  unsigned long   temp1,temp2;
  unsigned long   length;

  length = stringLength;

  if (value < 0)
    value = length - ((0 - value) % length);

  if (value > length)
    value = value % length;

  J = 0;
  index0 = J;
  temp1 = stringData[J];

  for (I = 0;I < length;I++)
    {
    K = (J + value) % length;
    temp2 = stringData[K];
    stringData[K] = temp1;

    J = K;

    temp1 = temp2;

    if (J == index0)
      {
      J++;
      index0 = J;
      temp1 = stringData[J];
      }
    }

  return 1;
  } 
```

向前和向后旋转字符串会有点繁琐，所以最好只进行向前旋转并计算正确的向后旋转值。另外，如果旋转值大于字符串的长度，那么我们可以剪掉它因为无论如何结果都是一样的。

value = length - ((0 - value) % length) ：表示如果旋转值为负，则将该值设置为字符串的长度，减去该值除以字符串长度的余数的正数. 例如：将长度为 10 的字符串旋转 -9 位置与旋转 +1 位置相同。将相同的字符串旋转 -19 个位置也与旋转加一相同。value = value % length ：表示如果正值大于字符串长度，则除以字符串长度并取余数。结果就像我们只是做了很长的路一样。

为了就地进行旋转，我们需要跳过旋转的值来交换相距很远的字符。我们从零位置开始，向前移动旋转值并继续跳跃该量。如果我们越过字符串的末尾，我们就简单地回到开头。问题是，如果该值是偶数，我们将在我们开始的地方结束，并且会错过所有奇数字符。变量 index0 用于指示我们从哪里开始。如果我们最终回到这个索引，那么我们需要向前移动一个索引位置并继续跳跃。我们继续这样做，直到所有字符都被交换为止。此时，我们需要两个临时变量来进行就地交换。J 是起始位置。我们将索引 J 处的字符移动到第一个临时变量。现在我们将 I 循环到字符串的长度。K 是目标索引，J 加上旋转值，如果需要，环绕在末端。将索引 K 处的字符移动到第二个临时变量。使用第一个临时变量将索引 J 中的字符放入索引 K。顺便说一句，我们不直接将字符从索引 J 移动到索引 K 的原因是因为循环的最后一部分，索引可能在循环之间发生变化，但 temp1 中的字符不应该。现在我们用 temp2 交换 temp1。最后一部分是针对值是偶数的地方，我们回到了开始的地方。这将通过乘以旋转值减一来发生。将索引 J 加一并重置起始值。循环直到完成。将索引 K 处的字符移动到第二个临时变量。使用第一个临时变量将索引 J 中的字符放入索引 K。顺便说一句，我们不直接将字符从索引 J 移动到索引 K 的原因是因为循环的最后一部分，索引可能在循环之间发生变化，但 temp1 中的字符不应该。现在我们用 temp2 交换 temp1。最后一部分是针对值是偶数的地方，我们回到了开始的地方。这将通过乘以旋转值减一来发生。将索引 J 加一并重置起始值。循环直到完成。将索引 K 处的字符移动到第二个临时变量。使用第一个临时变量将索引 J 中的字符放入索引 K。顺便说一句，我们不直接将字符从索引 J 移动到索引 K 的原因是因为循环的最后一部分，索引可能在循环之间发生变化，但 temp1 中的字符不应该。现在我们用 temp2 交换 temp1。最后一部分是针对值是偶数的地方，我们回到了开始的地方。这将通过乘以旋转值减一来发生。将索引 J 加一并重置起始值。循环直到完成。顺便说一句，我们不直接将字符从索引 J 移动到索引 K 的原因是因为循环的最后一部分，索引可能在循环之间发生变化，但 temp1 中的字符不应该。现在我们用 temp2 交换 temp1。最后一部分是针对值是偶数的地方，我们回到了开始的地方。这将通过乘以旋转值减一来发生。将索引 J 加一并重置起始值。循环直到完成。顺便说一句，我们不直接将字符从索引 J 移动到索引 K 的原因是因为循环的最后一部分，索引可能在循环之间发生变化，但 temp1 中的字符不应该。现在我们用 temp2 交换 temp1。最后一部分是针对值是偶数的地方，我们回到了开始的地方。这将通过乘以旋转值减一来发生。将索引 J 加一并重置起始值。循环直到完成。

可在此处找到视频演示：[https ://www.youtube.com/watch?v=TMzaO2WzR24](https://www.youtube.com/watch?v=TMzaO2WzR24)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-01T16:42:24.427

这段代码对我有用：

```
using namespace std;

string StrRotate(string &s, int nLeft)
{
     int size = s.size();

     nLeft %= size;

     if(nLeft == 0) return s;

     string after = s.substr(0, nLeft);
     string before = s.substr(nLeft, size - nLeft);

     return before + after;
} 
```

# windows - 在UAC下，为什么我不能以模拟用户的身份写文件？

> ID：789430
> 
> 赞同：6
> 
> 时间：2009-04-25T18:11:00.370
> 
> 标签：windows, uac, impersonation

在启用 UAC 的 Windows 2008 之前，我一直在模拟用户。我正在尝试将一些文件写入临时目录。但是，即使用户对目录具有写入权限，当我模拟该用户时，我也无法写入该目录（我收到拒绝访问错误）。显然，这是由于 UAC 阻止了我。

这与微软论坛上的一个帖子有关：[http](http://forums.iis.net/t/1149793.aspx) ://forums.iis.net/t/1149793.aspx但该论坛没有得到任何回应，除了一位微软员工反复问同样的问题并在得到信息时保持沉默他问。

我已经能够通过在写入临时文件时不模拟来解决这个问题，但我有几个问题：

1.  为什么 UAC 在模拟时不允许写入文件？

2.  有没有什么地方可以在模拟时放置临时文件？

3.  有更好的解决方案吗？处理这个问题的“正确”方法是什么？

4.  是否有关于 UAC 和模拟用户的所有限制的文档来源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-03T03:26:54.610

除了标准权限之外，Vista 还引入了完整性级别。也许您的应用程序运行的完整性级别低于写入位置/文件所需的完整性级别。

Windows 带有一个内置工具“cacls.exe”，但我建议使用[http://www.minasi.com/apps/](http://www.minasi.com/apps/)的 chml，这样可以更轻松地查看和编辑它们。另请参阅[http://msdn.microsoft.com/en-us/library/bb625964.aspx](http://msdn.microsoft.com/en-us/library/bb625964.aspx)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T18:44:29.897

我的猜测是您正在写入 %TEMP% 或通过 GetTempPath 指定的临时目录。这是一个进程范围的环境变量，因此它不尊重模拟。一种快速验证的方法是检查您正在写入的路径，看看它是否在模拟用户的配置文件下。

以下代码应该能够检索模拟用户的临时路径。

```
// Error checking removed for brevity.
// User profile must be loaded by this point,
// see LoadUserProfile/UnloadUserProfile
SHGetFolderPath(NULL, CSIDL_LOCAL_APPDATA, impersonationToken,
                SHGFP_TYPE_CURRENT,path);
StringCchCat(path, cchPath, "\Temp"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-29T01:36:04.417

我认为 NuSkooler 的回答可能是正确的。他链接到的文档（特别是[这个页面](http://msdn.microsoft.com/en-us/library/bb625962.aspx)）在谈论根文件夹时给出了以下内容：

> 通过设置适用于子对象但不适用于子容器的具有高完整性级别的强制标签，根文件夹的默认安全性符合此策略。**以中等完整性级别运行程序的标准用户无法修改管理员在根文件夹中创建的文件，即使 ACL 授予用户修改访问权限也是如此。**根文件夹具有高度完整性的可继承强制标签，即对象继承并且不会传播到子文件夹。

我不知道您的具体情况，但这听起来与您遇到的相同 - 即使 ACL 中有明确的允许条目，也无法写入文件夹。

您应该尝试使用 Process Explorer 和 Process Monitor 来查看到底发生了什么，但听起来肯定是完整性级别。

此外，您应该运行 icacls 而不仅仅是 cacls；这将显示 ACL 中的完整性级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-27T17:54:55.313

您应该尝试使用 msft 的进程监视器。该工具应该为您提供有关失败原因的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-14T10:02:10.257

我有类似的问题。我无法在远程文件夹中创建文件，例如**"h:\MyRemoteFolder"**。就我而言，问题是通过将路径更改为**"\MyServer\MyUser$\temp\MyRemoteFolder"**来解决的。您可以在文件资源管理器中查看此信息。似乎在模拟上下文中，一些 UAC 驱动器映射丢失了。

而不是：**File.Create(@"h:\MyRemoteFolder\x.txt");**

使用：**File.Create(@"\\MyServer\MyUser$\MyRemoteFolder\x.txt");**

# html - Ruby正则表达式从特定的HTML标签中删除换行符？

> ID：789435
> 
> 赞同：0
> 
> 时间：2009-04-25T18:15:43.180
> 
> 标签：html, ruby, regex

抱歉，我真的不擅长正则表达式，我终于破解了 osthing 以在 ruby​​ 中工作。如果有人可以指导如何做到这一点的正确方法，我将不胜感激：

当它出现在 ul 标签中时，我基本上想删除所有 \n 。

```
while body =~ /<ul>.*(\n+).*<\/ul>/m
  body =~ /<ul>(.+)<\/ul>/m
  body.gsub!(
    /<ul>(.+)<\/ul>/m,
    "<ul>#{$1.gsub("\n","")}</ul>" )
end 
```

第二行花了我很长时间才弄清楚，因为 $1 来自 while 循环，而不是实际上来自 gsub 语句。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T19:15:02.977

使用正则表达式的 TIMTOWTDI 但这里有一个较短的尝试：

```
body.gsub!(/<ul>.*?<\/ul>/m) {|m| m.tr("\n",'') } 
```

基本上找到（非贪婪地）所有 ul-tags 并用删除的所有换行符替换它们（检查 RDoc 的[String.gsub！](http://www.ruby-doc.org/core/classes/String.html#M000839)和[String.tr](http://www.ruby-doc.org/core/classes/String.html#M000845)）

# asp.net - asp.net (C#) 中的扩展映射问题

> ID：789436
> 
> 赞同：0
> 
> 时间：2009-04-25T18:16:07.300
> 
> 标签：asp.net, mapping

我正在为客户重建一个网站。当前站点是经典的asp，重建是asp.net 3.5。但是，客户坚持所有页面名称保持完全相同，因为他害怕失去他的谷歌排名（目前还不错）。所以，我试图让 ASP.Net 允许我使用 .asp 扩展名。

我已经通过一些简单的 url 重写使其运行良好，但是一旦我尝试运行一个加载用户控件（使用 LoadControl）的页面，它只是拒绝玩球。我收到一条错误消息，提示“未提供此类页面。”。如果我使用 .aspx 扩展名运行完全相同的页面，它会完美运行。

到目前为止，我已经将 .asp 的映射更改为指向 IIS6 中的 aspnet_isapi.dll，这意味着 .asp 页面命中 Global.asax，我可以重定向它们，但是任何人都可以就用户控制问题提出建议吗？我需要一个 HttpHandler 吗？如果是这样，我希望有人能指出一个简单的例子，因为我对 .Net 的了解还不是很先进。

谢谢

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-26T08:05:40.813

我会使用的一种选择是根据需要编写应用程序。也许利用 ASP.NET MVC，它是干净的 URL。

然后，一旦你建立了新网站，让所有旧的 asp URL 返回一个 301 标头到新页面。

这样，Google 会将关联的页面排名转移到新的 URL，最终，您将能够取消旧的 asp 文件/您为处理它们而设置的 URL 映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T18:31:29.850

对不起，我想我已经修复了它 - 似乎是重写代码而不是映射的问题......

抱歉，如果我浪费了任何人的时间。

戴夫

# c# - 去除字符串中的空格

> ID：789438
> 
> 赞同：2
> 
> 时间：2009-04-25T18:17:46.017
> 
> 标签：c#, string, formatting

要在字符串中添加空格分隔符，我们使用 String.Join()。

我的问题：我必须删除什么（以及如何）删除该分隔符。

字符串的结构如下“FF FF FF FF FF FF FF FF FF....”

如何删除空格？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T18:22:19.170

C# 有一个功能。

函数是 String.Replace(oldstring, newString);

```
String.Replace(" ", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T18:23:19.513

我认为您不需要为此使用 LINQ。只需在空白处拆分，然后使用空字符串作为分隔符重新加入。如果你有混合的空白——制表符、换行符等，这将是最好的。

```
var newStr = string.Join( string.Empty, str.Split() ); 
```

或用空字符串替换空格（如果所有空格都包含相同的字符，这将是最好的）。

```
var newStr = string.Replace( " ", string.Empty ); 
```

# .net - 如何将描述性文本解析为 DateTime 对象？

> ID：789439
> 
> 赞同：3
> 
> 时间：2009-04-25T18:18:08.387
> 
> 标签：.net, parsing, open-source

是否有任何现有的库可以从纯文本短语中解析日期时间？我正在寻找类似于 Remember The Milk 或 Outlook 的内容，其中用户可以输入“下周二下午 6 点”或“今晚 7 点”，图书馆可以吐出 {4/28/2009 18:00:00} 或{4/25/2009 19:00:00}。我正在考虑编写自己的，但我宁愿使用/贡献已经存在的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T21:22:29.863

Datejs 是一个开源的 JavaScript 日期库，可以满足您的要求：[http ://www.datejs.com/](http://www.datejs.com/)

它不是 .NET，但它是开源的。

# installation - 如何在 VS 2003 安装项目的安装过程中在 %allusersprofile% 下创建一个文件夹？

> ID：789441
> 
> 赞同：3
> 
> 时间：2009-04-25T18:19:01.800
> 
> 标签：installation, setup-project, visual-studio-2003, programdata

在安装过程中，我需要在“%allusersprofile%/Program Data”下创建一个文件夹。

安装文件是使用 VS 2003 安装项目创建的，您可以在其中使用多个已知文件夹......但我看到没有一个映射到 %allusersprofile% 或“%allusersprofile%/Program Data”。

我认为创建一个“自定义文件夹”（在 VS 安装项目中）并将 TargetLocation 设置为 %allusersprofile% 它会起作用，但在安装过程中它说我没有该文件夹的权限（我确实有）。

**您知道如何在 VS 安装项目中定位该文件夹吗？**

另外...我在 Windows XP 中工作，因此 %allusersprofile% 映射到“C:\Documents and Settings\All Users”，但我想我应该在“Program Data”文件夹中创建我的文件夹。

在 Vista 中，%allusersprofile% 映射到“C:\ProgramData”，如果我直接在那里创建我的文件夹，它看起来是正确的。

**知道如何针对这两个操作系统吗？**

**附加信息：** 我正在尝试这样做以避免 Vista 中的新安全功能，其中应用程序至少在以普通用户身份运行时无法在 Program Files 文件夹下写入文件。所以我需要将可写文件放在“普通”文件夹中，而不是“每个用户”的基础上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-03T15:14:06.263

问题已解决...在 VS Setup Project 中，您可以创建一个文件夹，说明 DefaultLocation 为：`[CommonAppDataFolder]\[ProductName]`

这在 MS Vista 和 XP 中运行良好

# c++ - 使用头文件时的 C++ 显式超类构造函数问题

> ID：789448
> 
> 赞同：1
> 
> 时间：2009-04-25T18:22:19.857
> 
> 标签：c++, c, constructor, super

我似乎对一个调用显式超类构造函数的继承类感到非常沮丧。我似乎无法正确使用语法！

到目前为止，我在这件事上看到的所有示例都没有将标头和内联类定义（使用 {}）与带有头文件的前向声明分开，所以我不确定如何涵盖.h 和 .cc 文件之间的语法。任何帮助，将不胜感激！

这是编译器给我的错误（gcc）：

> serverconnection.h：在构造函数“ServerConnection::ServerConnection(std::string, std::string)”中：serverconnection.h:25：错误：输入 serverconnection.cc 结尾处预期为“{”：在全局范围内：s​​erverconnection。 cc:20: 错误: 重新定义“ServerConnection::ServerConnection(std::string, unsigned int, short unsigned int, PacketSender*, int)” serverconnection.h:25: 错误：“ServerConnection::ServerConnection(std::string , unsigned int, short unsigned int, PacketSender*, int)" 之前在这里定义 serverconnection.cc: 在构造函数 "ServerConnection::ServerConnection(std::string, std::string)": serverconnection.cc:20: error: no调用“Connection::Connection()”的匹配函数

我知道它正在尝试调用默认的 Connection 构造函数 Connection()，因为它只是不理解我的语法。

这是代码：

连接.h：

```
class Connection {
    public:
       Connection(string myOwnArg);
}; 
```

连接.cc：

```
#include "connection.h"
Connection::Connection(string myOwnArg) {
     //do my constructor stuff
} 
```

服务器连接.h：

```
#include "connection.h"
class ServerConnection : public Connection {
    public:
       ServerConnection(string myOwnArg, string superClassArg) : Connection(superClassArg);
}; 
```

服务器连接.cc：

```
#include "serverconnection.h"
#include "connection.h"
ServerConnection::ServerConnection(string myOwnArg, string superClassArg) {
     //do my constructor stuff
} 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T18:25:03.283

您不要将初始化列表放在类声明中，而是放在函数定义中。从标题中删除它，并在您的 .cc 文件中：

```
#include "serverconnection.h"
#include "connection.h"

ServerConnection::ServerConnection(string myOwnArg, string superClassArg) : Connection(superClassArg) {
     //do my constructor stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T18:25:16.077

您需要将基类初始化程序列表从 serverconnection.h 移动到服务器 connection.cc：

```
ServerConnection::ServerConnection(string myOwnArg, string superClassArg) 
    : Connection(superClassArg) {
     //do my constructor stuff
} 
```

只需在标头中声明 ServerConneciton 构造函数，无需任何修饰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T18:26:37.053

您在类声明末尾缺少分号：

```
class Connection {
    public:
       Connection(string myOwnArg);
}; // semicolon here 
```

忘记这一点可能会导致一些非常混乱的错误消息，并且编译器不会将错误放在文件中，错误确实存在。

如果您在构造函数声明/定义中提供成员初始化列表，则需要为实现的其余部分提供大括号，即使您没有在这些大括号中放置任何代码。将成员初始化列表视为定义的一部分，而不是声明的一部分。

# asp.net-mvc - 使用 NUnit 的 ASP.NET MVC 单元测试

> ID：789450
> 
> 赞同：7
> 
> 时间：2009-04-25T18:22:52.103
> 
> 标签：asp.net-mvc, nunit

我一直在尝试使用发布在[ASP.NET 网站上的视频来学习](http://www.asp.net/learn/mvc-videos/video-421.aspx)[ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework) ，但在进行单元测试时遇到了问题。

我有一个非常简单的控制器，它使用[LINQ to SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL)来获取对象数组：

```
 public ActionResult Index()
    {
        ViewData["Message"] = "Welcome to ASP.NET MVC!";
        using (TrainingLogDataContext dc = new TrainingLogDataContext())
        {
            ViewData.Model = dc.Workouts.ToArray();
        }

        return View();
    } 
```

[这在NUnit](http://en.wikipedia.org/wiki/NUnit)中失败并出现以下错误：

```
at TrainingLog.Models.TrainingLogDataContext..ctor() in C:\Webs\TrainingLog\TrainingLog\Models\TrainingLog.designer.cs:line 41
at TrainingLog.Controllers.HomeController.Index() in C:\Webs\TrainingLog\TrainingLog\Controllers\HomeController.cs:line 16
at TrainingLogTests.Controllers.HomeControllerTest.Index() in C:\Webs\TrainingLog\TrainingLog.Tests\Controllers\HomeControllerTest.cs:line 23 
```

我猜问题是 NUnit 无法从`web.config`. 解决这个问题的最佳方法是什么？

当我运行页面时它工作正常，但在 NUnit 中单元测试失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-27T19:01:12.727

**将web.config**项目中的连接字符串复制到nunit 测试项目中的 **app.config 。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T18:37:15.093

我采取的策略是模拟数据上下文。我使用工厂来创建数据上下文并将其注入控制器。如果工厂为空（调用无参数构造函数时会发生这种情况），它将创建连接到数据库的工厂的默认实例。在我的单元测试中，我使用了一个工厂来创建一个在内存中工作的假数据上下文。尽管我已将其扩展为处理通过实体集添加到数据库的对象，但我的模拟数据上下文基于[此博客的代码。](http://andrewtokeley.net/archive/2008/07/06/mocking-linq-to-sql-datacontext.aspx)

如果您不想走模拟路线（我会推荐它，尽管这需要一些工作）。您可以将 app.config 文件添加到单元测试项目中，并将数据上下文的连接字符串放入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T14:51:57.653

最好不要从您的单元测试中访问数据库，因为这会导致测试运行缓慢，以至于您将不再为运行测试而烦恼。但是如果你确实想这样做，你可以在你的 NUnit 项目中创建一个 app.config 文件并将你的连接字符串放在那里。有时 NUnit 无法识别此 app.config 文件，但有关如何配置它的更多详细信息可以在“[如何在 NUnit 中初始化 ConnectionStrings 集合](https://stackoverflow.com/questions/152586/how-to-initialize-connectionstrings-collection-in-nunit/266119#266119)”的答案中找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T18:54:19.500

这个模板和说明帮助我启动并运行它：http: [//johnnycoder.com/blog/2009/04/01/aspnet-mvc-test-template-project-for-nunit-and-moq/](http://johnnycoder.com/blog/2009/04/01/aspnet-mvc-test-template-project-for-nunit-and-moq/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T21:04:40.200

最简单的方法是在安装 ASP.NET MVC 之前安装 NUnit，然后在创建 ASP.NET MVC 项目时设置测试项目。然后，您可以创建执行您正在尝试的操作所需的配置元素。

注意：处理数据的更好方法是模拟它，这意味着您需要将 LINQ 移出控制器，因为您无法轻松地反转控制器上的控制。

# iphone - TickCount() 调用在哪里？

> ID：789452
> 
> 赞同：1
> 
> 时间：2009-04-25T18:23:15.440
> 
> 标签：iphone, cocoa-touch

TickCount() 调用在哪里？我在网上看到了几个建议使用 TickCount() 调用进行 iphone 开发的线程。我需要什么“#include”才能使用这个调用？它在什么框架中？

如果不是 TickCount()，我应该使用什么来获取自 cpu 启动以来经过的毫秒数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T19:43:11.973

[CFAbsoluteTimeGetCurrent](http://www.google.com/search?q=cfabsolutetimegetcurrent)可能是您正在寻找的。（*编辑：* ……也许不需要。你真的需要从 CPU 启动开始的时间，还是只想以毫秒为单位测量时间？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T19:43:45.903

在我的头文件中，我添加了以下内容：

```
#include <time.h>

@interface myAppDelegate : NSObject <UIApplicationDelegate> {
  ...
  clock_t initStart, initStop;
} 
```

在我的实现文件中，我添加了以下内容：

```
- (void) applicationDidFinishLaunching:(UIApplication *)application {
  srandom(time(NULL));
  initStart = clock();
  ...
}

...

- (void) applicationWillTerminate:(UIApplication *)application {
  initStop = clock();
  NSLog(@"Elapsed CPU time: %f", (double)(initStop - initStart) / CLOCKS_PER_SEC);
  ...
} 
```

您可以根据需要在您的应用程序中移动这些调用，以测量经过的时间。

# c# - 打破一个 IEnumerable 使用 Enumerable.Range 的查询

> ID：789455
> 
> 赞同：2
> 
> 时间：2009-04-25T18:24:34.203
> 
> 标签：c#, linq, range, ienumerable

我有以下 IEnumerable LINQ 查询：

```
var query = from p in Enumerable.Range(2, 1000000)
let sumofPowers = from ch in p.ToString()
                  let sumOfPowers = Math.Pow(Convert.ToDouble(ch.ToString()), 5)
                  select sumOfPowers
where p == sumofPowers.Sum()
select p; 
```

它找到所有可以写为数字的五次方之和的数字的总和。这是欧拉计划[问题 30](https://projecteuler.net/problem=30)

它可以正常工作。我知道这是挑剔的，但范围让我很恼火。我基本上已经猜到它在 1,000,000 处找到了正确的结果，所以我让它停在那里。在这种情况下，数量就足够了。

但它只是一个硬编码的“随机”数字。如果您查看代码，您会发现只要 where`p == sumofPowers.Sum()`为真，**您就不需要再运行循环了。**

我知道`yield`在其他情况下可以做到这一点并`break`在正常循环中工作 - 那么在这种情况下你可以做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T18:33:27.367

您可以使用 First() 运算符进行突破。

由于 LINQ 执行延迟计算，因此这将一直持续到您到达 p == sumofPowers.Sum() 的点，然后返回第一个元素。只需将整个查询包装在 (...).First(); 返回第一个值。

此外，当您使用它时，无需转换为字符串然后再转换为双精度 - 您可以直接从 int -> double 进行转换，并避免字符串转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-17T18:52:34.933

```
class Program
{
    static void Main(string[] args)            
    {
        ulong sum, gh = 0;

        for (ulong i = 2; i <= 355000; i++)
        {
            string s = Convert.ToString(i);
            sum = 0;
            int ddd = s.Length;
            for (int j = 0; j < ddd; j++)
            {
                //sum +=(int)Math.Pow(Convert.ToInt32(s[j]), 4);
                ulong g = Convert.ToUInt64(Convert.ToString(s[j]));
                sum = sum + (ulong)Math.Pow(g, 5);
            }
            // Console.WriteLine(sum);
            if (sum == i)
            {
                gh += i;
            }
        }
        Console.WriteLine(gh);

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T18:32:47.587

LINQ 并不是所有问题的解决方案。您的问题只有一个由其解决方案定义的范围，因此从“查询”的角度来看，没有范围，这不适合已知的集合操作，如 LINQ 和标准 IEnumerable 扩展方法。使用 yield 语句会做得更好（并生成更易读的代码）。

# python - 处理 Web 框架中的授权

> ID：789468
> 
> 赞同：0
> 
> 时间：2009-04-25T18:30:30.180
> 
> 标签：python

我想自己使用 WSGI、Python 编写一个简单的 Web 框架。我正在学习了解授权系统。

系统需要更加模块化和抽象，以将新系统作为插件添加到项目中。用户可以使用 DB 或分布式键/值对、bigtable 等来存储他们的信息。

可以说，这些东西是可以作为插件写入系统的容器或提供程序。

我想为登录的用户定义更高级别的身份。“身份”是正确的词，被许多框架使用。但是由于其复杂的性质，将“身份”定义为一个对象确实很困难。它可能包含任何特定于应用程序的内容。但是，当我们编写应用程序时，应用程序应注意身份中的内容。但作为一个框架，它并不关心什么是身份。

认证应与授权分开。

用户、组、角色/权限可以设计为插件。这个概念背后的想法是，编写一个好的框架（至少对我来说是为了研究），为插件提供足够的空间，并允许应用程序开发人员编写适合应用程序的可移植代码。

是否可以在整个框架中使用“身份”对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-25T20:27:44.517

> “是否可以在整个框架中使用‘身份’对象？”
> 
> “但由于其复杂的性质，很难将‘身份’定义为一个对象。”

在您定义身份之前，是的，很难使用。

必须明确指定身份。让它如此模糊以至于“它可能包含任何特定于应用程序的东西”意味着你永远无法开始编写任何有用的东西，因为你太担心“有一天有人可能会发明一个你无法处理的身份概念”。

别担心了。身份定义明确，并不复杂。HTTP 和其他协议使用用户名、密码和领域定义“授权”（真正的身份验证）。这就是你真正需要的。

做 Django 所做的事情：允许某人添加一个“个人资料”，其中包含有关该人的其他事实。配置文件不是识别和认证的中心。它不是授权的核心。但是任何人都可以为他们的特定应用程序添加“配置文件”内容。

不要编写一个可以做所有事情的模型。

编写一个可行的模型，并且有人可以添加。

# pdf - google 使用什么应用程序在 gmail 中显示 PDF 附件

> ID：789470
> 
> 赞同：5
> 
> 时间：2009-04-25T18:30:58.463
> 
> 标签：pdf, png, gmail, ocr

当谷歌在新窗口中显示 gmail 中的 PDF 附件时，我观察了流量。内容作为每个 PDF 页面的 PNG 图像提供。并且可以选择其文本。谷歌在服务器端使用什么来为 pdf 文件中的特定页面生成 PNG 文件？png 文件上的文本选择如何工作？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-26T12:18:59.457

默认情况下，使用[https://docs.google.com/gview](https://docs.google.com/gview)安全地查看附件，但事实证明，您可以通过纯 HTTP 请求文件。[这使得使用Wireshark](http://www.wireshark.org/)更容易弄清楚发生了什么。

正如您所指出的，已经很清楚 PDF 在服务器端转换为 PNG（[ImageMagick](http://www.imagemagick.org/)确实是为此目的的合理解决方案），这样做的明显原因是在仍然能够查看文件的同时保留确切的布局无需 PDF 查看器。

但是，通过查看流量，我发现在调用 /gview?a=gt&docid=&chan=&thid= 时，整个 PDF 也被转换为自定义 XML 格式（一旦您请求文档就完成了）。由于我不能使用 Wireshark 来复制 XML，所以我求助于 Firefox 扩展[Live HTTP Headers](https://addons.mozilla.org/en-US/firefox/addon/3829)。这是一段摘录：

```
<pdf2xml>
    <meta name="Author" content="Bruce van der Kooij"/>
    <meta name="Creator" content="Writer"/>
    <meta name="Producer" content="OpenOffice.org 3.0"/>
    <meta name="CreationDate" content="20090218171300+01'00'"/>
    <page t="0" l="0" w="595" h="842">
        <text l="188" t="99" w="213" h="27" p="188,213">Programmabureau</text>
        <text l="85" t="127" w="425" h="27" p="85,117,209,61,277,21,305,124,436,75">Nederland Open in Verbinding (NOiV)</text>
    </page>
</pdf2xml> 
```

我还不太确定文本元素上的所有属性代表什么（w 和 h 除外），但它们显然是文本的坐标和可能的长度。由于[谷歌使用的 JavaScript 被最小化](http://docs.google.com/gview/resources_gview/client/js/1518317196-gview_local.js)（或者可能被混淆，但这不太可能），准确地弄清楚客户端选择功能是如何工作的并不是那么容易。但很可能它使用此 XML 文件来确定用户正在查看的文本，然后将其复制到用户的剪贴板。

[请注意，有一个名为pdf2xml](http://www.mobipocket.com/dev/pdf2xml/)的开源（GPL 许可）工具具有相似但不完全相同的输出。这是他们主页上的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<pdf2xml pages="3">
  <title>My Title</title>
  <page width="780" height="1152">
    <font size="10" face="MHCJMH+FuturaT-Bold" color="#FF0000">
      <text x="324" y="37" width="132" height="10">Friday, September 27, 2002</text>
      <img x="324" y="232" width="277" height="340" src="text_pic0001.png"/>
      <link x="324" y="232" width="277" height="340" dest_page="2" dest_x="141" dest_y="187"/>
    </font>
    <font size="12" face="AGaramond-Regular" italic="true" bold="true">
      <text x="509" y="68" width="121" height="12">This is a test PDF file</text>
      <link x="509" y="68" width="121" height="12" href="www.mobipocket.com"/>
    </font>
  </page>
</pdf2xml> 
```

希望这些信息在任何方面都有用，但是就像其他海报之一提到的那样，确定谷歌所做的唯一方法是询问他们。很遗憾 Google 没有官方 IRC 频道，但他们确实有[一个 Google Docs 支持问题的论坛](http://www.google.com/support/forum/p/Google+Docs?hl=en)。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T21:08:01.783

Google 使用内部开发的非开源 PDF 转换器应用程序。因此，您最好查看其他答案发布的链接，因为您无法使用 Google 版本。对不起！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T18:43:39.837

如果你有文字，你可以把它变成你想要的东西，

更具体地说，您应该查看此链接：[pdf to png using php](https://web.archive.org/web/20110829000226/http://studio.imagemagick.org:80/pipermail/magick-users/2002-July/003548.html)

所以需要[imageMagick imageMagic](https://www.imagemagick.org/script/download.php)

编辑：另一个[有趣的链接](http://crowdbox.com/blog/?p=23)。

编辑：我在 google 发现了这个，它看起来很有趣......所以你可以使用 google api [Google Document List Data Api](https://web.archive.org/web/20100213015508/http://code.google.com:80/intl/en/apis/documents/overview.html)这是一篇关于它的博客文章[Google API Now 让你获取多种格式的文档](https://www.programmableweb.com/news/google-api-now-lets-you-get-documents-many-formats/2009/02/20)

为了确定谷歌使用什么，你需要他们的回答吗？:)

祝你好运 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T21:07:47.330

要查看创建 pdf 的内容，请右键单击它并转到文档属性（在 Adob​​e 阅读器中）。PDF 生成器将显示为“PDF 生成器”。我认为谷歌同时使用[Prince](http://www.princexml.com/)和[IText](http://www.lowagie.com/iText/)（不结合创建 PDF）。Google 对上述工具包进行了一些重大修改，以创建最终产品。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-11-28T00:29:18.770

好吧..这可能只是 Google 正在使用的 pdf2xml 工具。他们只更改了全词的宽度、高度等，并添加了 p 属性……原来是包含行内单词坐标的属性。刚刚玩过它，发现:) 打算使用谷歌的这个 pdf2xml :P 上传，让他们转换...使用 xml 来转换... epub？:P

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-04-25T20:03:48.430

您可能还想研究使用 Lucence 来索引那些大的 pdf 文件并将相关页面提供给您的用户。

有关更多想法，请参见[http://www.jguru.com/faq/view.jsp?EID=1074237](http://www.jguru.com/faq/view.jsp?EID=1074237)。

# asp.net - 如何使用反射获取 ASP.NET 调试路径？

> ID：789472
> 
> 赞同：2
> 
> 时间：2009-04-25T18:32:20.350
> 
> 标签：asp.net, debugging, reflection

我正在尝试加载程序集并使用反射实例化其中包含的类型。

该程序集包含在引用中，并在发布后复制到 Bin 文件夹，但在调试时，找不到该程序集。

我注意到每个程序集都部署到不同的临时文件夹进行调试，例如：

```
`C:\Users\Rafael\AppData\Local\Temp\Temporary ASP.NET Files\
root\a8b5e5d3\720e0f4c\assembly\dl3\7c6d5cae\d096ebc2_d1c5c901` 
```

`这样，我不能使用运行路径、调用路径或包含已知类型的程序集来构建所需路径的路径。`

 `有谁知道如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-08-18T21:45:43.287

将以下内容添加到*app.config*：

```
<system.web>
   <hostingEnvironment shadowCopyBinAssemblies="false" />
</system.web> 
```

之后，DevServer 会将所有内容放在一个文件夹中，并且反射组件将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T18:53:13.700

所有这些文件夹都添加到程序集搜索路径中，因此您可以说类似 Assembly.Load("test.dll") 的内容，而无需提供绝对路径。

# .net - 使用 Windows.Forms.Webbrowser.Navigate() 时禁用 Javascript 弹出窗口

> ID：789478
> 
> 赞同：2
> 
> 时间：2009-04-25T18:35:33.913
> 
> 标签：.net, javascript, popup, webbrowser-control, console-application

好的，我有一个非常令人沮丧的问题。我正在解析一个网页，需要让它执行 javascript 才能获得我想要的信息。

```
Form f = new Form();
WebBrowser w = new WebBrowser();
w.Navigate(url);
f.Controls.Add(w);
f.ShowDialog();
HtmlElementCollection hc = w.Document.GetElementsByTagName("button"); 
```

这很有效，我能够很好地获得按钮元素，但是每次运行它时都会弹出一个窗口。很烦人。弹出窗口是基于 javascript 的，我需要运行 Javascript 来获取按钮元素信息。这是弹出窗口的脚本。

```
<script>
var evilPopup = (getCookieVar("markOpen","PromoPop") == 1);
if (evilPopup != 1) 
{
    PromoPop = window.open('/browse/info.aspx?cid=36193','Advertisement', 'width=365,height=262,screenX=100,screenY=100');

if (PromoPop) 
    {
       PromoPop.blur();
       window.focus();
       setCookieVar("markOpen","PromoPop","1");             
    }
}
</script> 
```

我尝试在风向标中添加一个 cookie 到 Forms.Webbrowser 控件，但感到沮丧并放弃了。我尝试设置 NoAllowNavagate 属性和其他一切都无济于事。

任何人都可以帮忙吗？此外，有没有办法从 Console.App 获取 DomDocument 信息而无需打开表单？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T18:44:48.260

WebBrowser 组件具有带有 CancelEventArgs 的 NewWindow 事件。所以只需添加一个类似的处理程序：

```
void webBrowser1_NewWindow(object sender, CancelEventArgs e)
{
    e.Cancel = true;
} 
```

当 javascript 尝试打开一个弹出窗口时，该事件被触发并取消它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T18:38:47.773

你能在文档中注入 Javascript 吗？你可以添加这个：

```
window.open = function() { return false; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T18:59:45.133

一个快速而肮脏的解决方案是使用 WebClient 将 html 下载到临时文件，将广告脚本替换为 string.Empty 并将文件加载到控件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-01T11:39:36.453

你应该尝试 SHDocVw.dll 来自动捕捉新窗口。

```
 private SHDocVw.WebBrowser_V1 Web_V1;

        // write it on form load event

        Web_V1 = (SHDocVw.WebBrowser_V1)this.webBrowser1.ActiveXInstance;

        Web_V1.NewWindow += new SHDocVw.DWebBrowserEvents_NewWindowEventHandler(Web_V1_NewWindow);

        private void Web_V1_NewWindow(string URL, int Flags, string TargetFrameName, ref object PostData, string Headers, ref bool Processed)
        {
            Processed = true; //Stop event from being processed

            //Code to open in same window
            //this.webBrowser1.Navigate(URL);

            //Code to open in new window instead of same window
            frmEBeyanname Popup = new frmEBeyanname();
            Popup.webBrowser1.Navigate(URL);
            Popup.Show();
        } 
```

再见

# css - em 错误解决方法中的 Mozilla 3.0.8 和 Chrome 高度

> ID：789479
> 
> 赞同：1
> 
> 时间：2009-04-25T18:35:42.603
> 
> 标签：css, firefox, google-chrome, textarea, mozilla

我在div*中有一个**textarea*：

 *```
<div id="textareawrapper">
  <textarea id="chat"></textarea>
</div> 
```

...和*​​CSS*：

```
#textareawrapper {
    border 1px dashed pink;
    margin:0;padding:0;
    position: absolute;bottom: 0em;left:7.5em;right:7.5em;height: 7em;
}
#textareawrapper textarea {margin:0;padding:0;width: 100%;height:7em;} 
```

IE 7 渲染得很好：*textarea*的高度等于包装*div*的高度。在 Mozilla 和 Chrome 中，包装 div 呈现 7em 高，但 textarea 有 20-25px 不够高，因此 textarea 的底部和 div 的底部边框之间存在间隙。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T18:43:14.863

textarea 默认使用不同的字体，因此大小不同（因为 ems 与文本大小有关）。

添加这个：

```
#textareawrapper textarea { font-size: 100%; font-family: inherit; } 
```

在FF3中测试和工作

# java - 段树java实现

> ID：789489
> 
> 赞同：14
> 
> 时间：2009-04-25T18:43:55.437
> 
> 标签：java, algorithm, segment-tree

您知道Java中（二进制）[段树的良好实现吗？](http://en.wikipedia.org/wiki/Segment_tree)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-21T07:57:47.143

```
public class SegmentTree {
    public static class STNode {
        int leftIndex;
        int rightIndex;
        int sum;
        STNode leftNode;
        STNode rightNode;
    }

    static STNode constructSegmentTree(int[] A, int l, int r) {
        if (l == r) {
            STNode node = new STNode();
            node.leftIndex = l;
            node.rightIndex = r;
            node.sum = A[l];
            return node;
        }
        int mid = (l + r) / 2;
        STNode leftNode = constructSegmentTree(A, l, mid);
        STNode rightNode = constructSegmentTree(A, mid+1, r);
        STNode root = new STNode();
        root.leftIndex = leftNode.leftIndex;
        root.rightIndex = rightNode.rightIndex;
        root.sum = leftNode.sum + rightNode.sum;
        root.leftNode = leftNode;
        root.rightNode = rightNode;
        return root;
    }

    static int getSum(STNode root, int l, int r) {
        if (root.leftIndex >= l && root.rightIndex <= r) {
            return root.sum;
        }
        if (root.rightIndex < l || root.leftIndex > r) {
            return 0;
        }
        return getSum(root.leftNode, l, r) + getSum(root.rightNode, l, r);
    }

    /**
     * 
     * @param root
     * @param index index of number to be updated in original array 
     * @param newValue
     * @return difference between new and old values
     */
    static int updateValueAtIndex(STNode root, int index, int newValue) {
        int diff = 0;
        if(root.leftIndex==root.rightIndex && index == root.leftIndex) {
            // We actually reached to the leaf node to be updated
            diff = newValue-root.sum;
            root.sum=newValue;
            return diff;
        }
        int mid = (root.leftIndex + root.rightIndex) / 2;
        if (index <= mid) {
            diff= updateValueAtIndex(root.leftNode, index, newValue);
        } else {
            diff= updateValueAtIndex(root.rightNode, index, newValue);
        }
        root.sum+=diff;
        return diff;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T12:49:19.120

这已在开源[Layout Management SW Package 项目中实现](http://code.google.com/p/layout-managment-sw-package/)

这是[子包的链接](http://code.google.com/p/layout-managment-sw-package/source/browse/#svn/trunk/LayoutManagmentSWPackage/src/DataModel/SegmentTree)

您可能会发现代码很有用。我既没有验证它也没有运行它，我无法通过快速搜索代码和网站找到提供代码的许可证，因此请注意 Emptor。

您也许可以联系作者，但最后一次活动似乎是 2008 年 8 月。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T15:08:29.210

这里是：

```
import java.util.Scanner;

public class MinimumSegmentTree {

    static Scanner in = new Scanner(System.in);

    public static void main(String[] args) {
        final int n = in.nextInt();
        int[] a = new int[n];

        for (int i = 0; i < n; i++) {
            a[i] = in.nextInt();
        }

        int sizeOfSegmentTree = (int) Math.pow(2, Math.ceil(Math.log10(n) / Math.log10(2)));
        sizeOfSegmentTree = 2*sizeOfSegmentTree-1;

//      System.out.println(sizeOfSegmentTree);

        int[] segmentTree = new int[sizeOfSegmentTree];
        formSegmentTree(a, segmentTree, 0, n-1, 0);

//      for(int i=0; i<sizeOfSegmentTree; i++){
//          System.out.print(segmentTree[i]+" ");
//      }
//      System.out.println();

        final int q = in.nextInt();
        for (int i = 0; i < q; i++) {
            int s, e;
            s = in.nextInt();
            e = in.nextInt();

            int minOverRange = getMinimumOverRange(segmentTree, s, e, 0, n-1, 0);
            System.out.println(minOverRange);
        }
    }

    private static int getMinimumOverRange(int[] segmentTree, int qs, int qe, int s, int e, int pos) {
        if (qs <= s && qe >= e) {
            return segmentTree[pos];
        }
        if (qs > e || s > qe) {
            return 10000000;
        }

        int mid = (s + e) / 2;
        return Math.min(getMinimumOverRange(segmentTree, qs, qe, s, mid, 2 * pos + 1),
                getMinimumOverRange(segmentTree, qs, qe, mid+1, e, 2 * pos + 2));
    }

    private static void formSegmentTree(int[] a, int[] segmentTree, int s, int e, int pos) {
        if (e - s == 0) {
            segmentTree[pos] = a[s];
            return;

        }

        int mid = (s + e) / 2;

        formSegmentTree(a, segmentTree, s, mid, 2 * pos + 1);
        formSegmentTree(a, segmentTree, mid+1, e, 2 * pos + 2);

        segmentTree[pos] = Math.min(segmentTree[2 * pos + 1], segmentTree[2 * pos + 2]);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T15:00:48.180

[算法和单元测试](https://github.com/huiwang/dailycoding/commit/a8b03b38648ef86ee40fab5d89568608d5237287)：

```
public class NumArrayTest {

        @Test
        public void testUpdateSumRange_WithEmpty() throws Exception {
            NumArray numArray = new NumArray(new int[]{});
            assertEquals(0, numArray.sumRange(0, 0));
        }

        @Test
        public void testUpdateSumRange_WithSingleton() throws Exception {
            NumArray numArray = new NumArray(new int[]{1});
            assertEquals(1, numArray.sumRange(0, 0));
            numArray.update(0, 2);
            assertEquals(2, numArray.sumRange(0, 0));
        }

        @Test
        public void testUpdateSumRange_WithPairElements() throws Exception {
            NumArray numArray = new NumArray(new int[]{1,2,3,4,5,6});
            assertEquals(12, numArray.sumRange(2, 4));
            numArray.update(3, 2);
            assertEquals(10, numArray.sumRange(2, 4));
        }

        @Test
        public void testUpdateSumRange_WithInPairElements() throws Exception {
            NumArray numArray = new NumArray(new int[]{1,2,3,4,5,6,7});
            assertEquals(12, numArray.sumRange(2, 4));
            numArray.update(3, 2);
            assertEquals(10, numArray.sumRange(2, 4));
        }
    }

public class NumArray {

    private final Node root;

    private static class Node {
        private final int begin;
        private final int end;
        private final Node left;
        private final Node right;
        private int sum;

        public Node(int begin, int end, int sum, Node left, Node right) {
            this.begin = begin;
            this.end = end;
            this.sum = sum;
            this.left = left;
            this.right = right;
        }

        public boolean isSingle() {
            return begin == end;
        }

        public boolean contains(int i) {
            return i >= begin && i <= end;
        }

        public boolean inside(int i, int j) {
            return i <= begin && j >= end;
        }

        public boolean outside(int i, int j) {
            return i > end || j < begin;
        }

        public void setSum(int sum) {
            this.sum = sum;
        }
    }

    public NumArray(int[] nums) {
        if (nums.length == 0) {
            root = null;
        } else {
            root = buildNode(nums, 0, nums.length - 1);
        }
    }

    private Node buildNode(int[] nums, int begin, int end) {
        if (begin == end) {
            return new Node(begin, end, nums[begin], null, null);
        } else {
            int mid = (begin + end) / 2 + 1;
            Node left = buildNode(nums, begin, mid - 1);
            Node right = buildNode(nums, mid, end);
            return new Node(begin, end, left.sum + right.sum, left, right);
        }
    }

    public void update(int i, int val) {
        if (root == null) {
            return;
        }
        if (!root.contains(i)) {
            throw new IllegalArgumentException("i not in range");
        }
        update(root, i, val);
    }

    private int update(Node node, int i, int val) {
        if (node.isSingle()) {
            node.setSum(val);
        } else {
            Node nodeToUpdate = node.left.contains(i) ? node.left : node.right;
            int withoutNode = node.sum - nodeToUpdate.sum;
            node.setSum(withoutNode + update(nodeToUpdate, i, val));
        }
        return node.sum;
    }

    public int sumRange(int i, int j) {
        if (root == null) {
            return 0;
        }
        return sumRange(root, i, j);
    }

    private int sumRange(Node node, int i, int j) {
        if (node.outside(i, j)) {
            return 0;
        } else if (node.inside(i, j)) {
            return node.sum;
        } else {
            return sumRange(node.left, i, j) + sumRange(node.right, i, j);
        }
    }

} 
```

# c# - 类既扩展了抽象类又实现了接口

> ID：789499
> 
> 赞同：5
> 
> 时间：2009-04-25T18:49:38.997
> 
> 标签：c#, .net, oop, interface, abstract-class

如果我有一个既扩展抽象类又实现接口的类，例如：

```
class Example : AbstractExample, ExampleInterface
{
    // class content here
} 
```

我怎样才能初始化这个类，以便我可以从接口和抽象类访问方法？

当我做：

```
AbstractExample example = new Example(); 
```

我无法从界面访问方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-25T18:51:33.627

你需要

*   在 AbstractExample 中实现接口
*   或获取对示例的参考

`Example example = new Example();`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-25T19:03:34.533

最后一个示例会将您绑定到接口或抽象类的可靠实例，我认为这不是您的目标。坏消息是您在这里不是使用动态类型的语言，因此您坚持使用对 a 的引用先前指定或铸造/取消铸造的实体“示例”对象，即：

```
AbstractExample example = new Example();
((IExampleInterface)example).DoSomeMethodDefinedInInterface(); 
```

您的其他选择是让 AbstractExample 和 IExampleInterface 都实现一个通用接口，这样您就可以拥有即

```
abstract class AbstractExample : ICommonInterface
interface IExampleInterface : ICommonInterface
class Example : AbstractExample, IExampleInterface 
```

现在您可以使用 ICommonInterface 并拥有抽象类的功能和 IExample 接口的实现。

如果这些答案都不可接受，您可能需要查看一些在 .NET 框架下运行的 DLR 语言，即 IronPython。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-25T19:00:07.380

如果您只知道抽象类，则表明您通过`Type`. 因此，您可以使用泛型：

```
private T SomeMethod<T>()
    where T : new(), AbstractExample, ExampleInterface
{
    T instance = new T();
    instance.SomeMethodOnAbstractClass();
    instance.SomeMethodOnInterface();
    return instance;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T18:51:00.960

采用：

```
Example example = new Example(); 
```

更多信息后更新：

如果你**确定**它实现了 ExampleInterface，你可以使用

```
AbstractClass example = new Example();
ExampleInterface exampleInterface = (ExampleInterface)example;
exampleInterface.InterfaceMethod(); 
```

您还可以通过检查接口来确保它真正实现了它

```
if (example is ExampleInterface) {
    // Cast to ExampleInterface like above and call its methods.
} 
```

我不相信泛型可以帮助你，因为它们是在编译时解决的，如果你只有对 AbstractClass 的引用，编译器会抱怨。

编辑：或多或少是欧文所说的。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T07:28:09.527

我认为这个例子会帮助你：

```
public interface ICrud
{
    void Add();
    void Update();
    void Delete();
    void Select();
}

public abstract class CrudBase
{
    public void Add()
    {
        Console.WriteLine("Performing add operation...");
        Console.ReadLine();
    }

   public void Update()
    {
        Console.WriteLine("Performing update operation...");
        Console.ReadLine();
    }
    public void Delete()
    {
        Console.WriteLine("Performing delete operation...");
        Console.ReadLine();
    }
    public void Select()
    {
        Console.WriteLine("Performing select operation...");
        Console.ReadLine();
    }
}

public class ProcessData : CrudBase, ICrud
{

}

var process = new ProcessData();
process.Add(); 
```

# macos - Emacs 中的 Vim

> ID：789503
> 
> 赞同：4
> 
> 时间：2009-04-25T18:52:50.127
> 
> 标签：macos, vim, emacs

*这个问题不是指 Emacs 中的一些 Vim 模式，而是指 Emacs 中的 Vim。我没有发动任何编辑战争。我只想在 Emacs 中使用 Vim。*

[http://dl.getdropbox.com/u/175588/emacs.png](http://dl.getdropbox.com/u/175588/emacs.png)

您可以在 Emacs 中使用命令“Mx term”和“vim”来访问 Vim。

当我使用 Vim-Emacs 时，打字很尴尬。有奇怪的符号，如“4m”、“4mm”和“^?^?”。插入模式下的退格键和 x 按钮不起作用。当我按下后面的键时，奇怪的迹象出现了。所以

> 如何让 Vim 在 Emacs 中正常工作？

**[更新信息]**

出现故障的 Vim-Emacs 至少在以下操作系统中：

*   Mac OS 10.5.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T19:47:43.663

您所看到的是您的 shell/Vim 会话中的终端设置 $TERM 与 EMACS 终端正在执行的操作不匹配。我的工作正常，除了删除键映射到 DEL，0x127，而 Vim 需要 ^H，0x8。我的显示 $TERM 设置为“eterm-color”。

检查你有什么作为 $TERM

> $ 回声 $TERM

并查看 Vim 文档以了解如何解决退格问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T21:17:47.440

对于退格，

```
stty crt erase <CTRL-V><BACKSPACE> 
```

为我工作。

至于其他的，我不知道。假设它是终端不处理的外壳输出的东西。（以前从未使用过 emacs 'term' ......更喜欢 iTerm 或 Terminal.app 用于与 shell 相关的东西。emacs 'term' 被称为“不完美的终端模拟器”）

# visual-studio-2008 - Visual Studio 2010 是否向后兼容 Visual Studio 2008 的插件？

> ID：789505
> 
> 赞同：2
> 
> 时间：2009-04-25T18:53:06.867
> 
> 标签：visual-studio-2008, visual-studio-2010, compatibility, add-on

我不想丢失 Visual Studio 2008 中的一些非常棒的插件，但我听说 Visual Studio 2010 将使用 MEF。这是否意味着我可以和我[跳舞的香蕉](http://www.slickedit.com/content/view/441)说再见了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-10-30T22:03:57.610

Visual Studio 中有三个级别的可扩展性：

1.  宏
2.  加载项
3.  VS 包

我可以确认 VS2008 插件在 VS2010 beta2 中运行良好。您只需编辑 .AddIn 文件并将“9.0”替换为“10.0”。

不过，我不知道 VS Packages。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T21:01:32.220

除非与去年发布的第一个 CTP 相比方向发生了变化，否则旧的插件方法仍然有效。我们应该很快就会有一个新的测试版（我不确定什么时候会很快，但距离上一个测试版已经过去了五个月）。

MEF 和使用 WPF 作为前端并不意味着插入工具的旧方式将不再适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-22T21:39:23.650

他们没有重写 VS 中的所有内容。只有 UI（移至 WPF）。

当前插件可以加载，但他们必须知道新的注册表项。我们现在正在为我们的数据库引擎测试这个。有一些新的界面和方法可以进入 Visual Studio Extensions 的小 UI（想想 iPhone 商店类型的概念）。但现在不需要它们（2009 年 6 月）。

当然，这可能会改变，但我认为确保尽可能多的旧插件加载和运行符合 MS 的最佳利益。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T20:02:02.300

我不认为对此有任何最终定论，但基于 VS2010 似乎是一个重大的重写（所有代码编辑器的东西都是基于 WPF）的事实，MEF 被引入作为它的可扩展性模型的事实，并且根据早期 VS 升级的经验，我非常怀疑您的所有插件是否会继续工作......有些可能 - 但恐怕其中很多都需要升级。

马克

# java - 无法找到/安装 Java 包 acm.graphics

> ID：789508
> 
> 赞同：1
> 
> 时间：2009-04-25T18:54:22.370
> 
> 标签：java, package, acm.graphics

我收到以下错误消息

```
RobotFace.java:3: package acm.graphics does not exist
import acm.graphics.*; 
^ 
```

这表明我没有 acm.graphics -package。

我试图通过以下方式在 MacPorts 中查找并安装该软件包失败

```
port search acm 
```

**如何**在您的计算机上安装 acm.graphics 包以用于 Java？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T18:59:29.130

一个快速的谷歌搜索产生了[http://jtf.acm.org/](http://jtf.acm.org/)。

注意有一个“acm.jar”文件。您需要下载它并将其添加到您的 CLASSPATH 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-16T13:30:22.707

如以下答案所述，您需要 acm.jar 文件。以下是如何通过 3 个简单的步骤进行操作：
1\. 在“下载”下，在此处下载 acm.jar 文件：[斯坦福网站](http://cs.stanford.edu/people/eroberts/jtf/)。
2\. 见下面的截图。我将 NetBeans 用于我的 IDE，但对于任何 IDE，它应该或多或少相同。我右键单击“库”并添加了 acm.jar 文件。（截图说明：我在安装 acm.jar 文件后截取了这些截图。在完成此过程之前，您不会在您的库文件夹中看到它。）
3\. 刷新您的项目。

![库文件夹](https://i.stack.imgur.com/aYjpb.png)

![右键单击](https://i.stack.imgur.com/Drj7E.png)

# performance - 什么是“拆分互斥锁”？

> ID：789511
> 
> 赞同：4
> 
> 时间：2009-04-25T18:57:24.873
> 
> 标签：performance, memory-management

它与性能和内存问题有何关系？AIX 上的问题是否比 Solaris 或 Windows 上的问题更大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T23:39:09.627

互斥锁只是一把锁。就像便携式便盆上的锁一样——确保一次只有一个人使用它。有许多类型的互斥，为了获得一个很好的概述，您应该查看 Andrew S. Tanenbaum 或[osdev.org](http://osdev.org)的操作系统：设计和实现。我以前从未听说过“拆分互斥锁”，而且 Google 什么也没返回。但是，“拆分”一词表明它是共享的，因此不会相互排斥（portapotty 中有多个人），这不太有意义。

通常您不必担心互斥体，除非您正在设计操作系统或设备驱动程序。它们会影响性能的唯一方法是，如果其他进程对被锁定的资源有很高的需求（即，portapotty 的阵容很大）。

除非您有一些情有可原的情况，例如 SMP 等，否则最好让操作系统来决定如何处理互斥锁和资源，因为这就是它的意义所在。

很抱歉，我无法提供更多帮助。我对“拆分”互斥锁一无所知。如果它特定于 AIX，您可能需要查看 IBM 手册，否则可能会在一些 IEEE 研究论文中找到一些东西。

更新：经过进一步调查，这似乎是常见案例优化的案例。互斥体被“拆分”为两种情况：1）不需要任何特殊的常见情况，可以假设一些安全检查或绕过称为快速路径的内核函数或 2）我们不能假设检查通过或无法确定优化，称为慢路径。阿姆达尔定律经常被用来量化这种案例优化。

# wcf - 我们能否确定 WCF 请求是来自我们的 Silverlight APP 还是其他地方？

> ID：789512
> 
> 赞同：1
> 
> 时间：2009-04-25T18:57:43.937
> 
> 标签：wcf, silverlight

我们能否确定 WCF 请求是来自我们的 Silverlight APP 还是其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T19:57:34.933

您可以声明一个 [MessageContract] 并在其中定义一个标头，您的 Silverlight 应用程序可以将其设置为已知的定义值。

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-06T19:50:22.927

标头中应该已经包含请求者信息，并且您应该可以将其解析出来并在服务器端打勾或打勾。不过，我认为 marc_s 对 MessageContract 的建议将是更简单的解决方案。

# sql - 处理类别、子类别 - 分层数据的最佳方法是什么？

> ID：789516
> 
> 赞同：0
> 
> 时间：2009-04-25T18:58:40.567
> 
> 标签：sql, tree, rdbms, hierarchical-data

### 复制：

> [SQL - 如何存储和导航层次结构](https://stackoverflow.com/questions/38801/sql-how-to-store-and-navigate-hierarchies)

* * *

如果我有一个客户需要类别、子类别、子子类别等的数据库，那么最好的方法是什么？如果他们只需要三个，并且总是知道他们需要三个，我可以创建三个表 cat、subcat、subsubcat 等。但是，如果他们想要更深入怎么办？我不喜欢这三张桌子，但这是我知道如何做到这一点的唯一方法。

我看过“ [sql adjacency list](http://www.sqlsummit.com/AdjacencyList.htm) ”，但不知道这是否是唯一可能的方法。我希望输入，以便客户可以拥有任何级别的类别和子类别。我相信这意味着分层数据。

编辑：如果可能的话，希望 sql 能够将列表重新显示出来

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T19:00:08.223

```
table categories: id, title, parent_category_id

 id | title | parent_category_id
----+-------+-------------------
  1 |  food |              NULL
  2 | pizza |                 1
  3 | wines |              NULL
  4 |   red |                 3
  5 | white |                 3
  6 | bread |                 1 
```

我通常`select *`在应用层做一个算法并组装树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T19:01:49.780

你可以看看 Joe Celko 的书，或者[这个之前的问题](https://stackoverflow.com/questions/38801/sql-how-to-store-and-navigate-hierarchies)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T19:03:41.600

创建一个与自身有关系的表是最好的方法。它可以轻松灵活地达到您想要的程度，没有任何限制。我认为我不需要重复您应该放置的结构，因为这已经在第一个答案中提出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T19:16:38.010

我已经使用了多种方法，但仍然坚持简单`"id, parent_id"`的表内关系，其中根项目具有`parent_id=0`. 如果您需要大量查询树中的项目，特别是当您只需要“分支”或一个节点的所有底层元素时，您可以使用第二个表：在*每个*节点的向上路径中保存对*每个*节点`"id, path_id, level"`的引用. 这可能看起来像很多数据，但它在使用时极大地改进了分支查找，并且在触发器中呈现非常易于管理。

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-26T15:21:15.557

不是推荐的方法，但我看到人们在数据上使用点符号。Food.Pizza 或 Wines.Red.Cabernet

你最终会做很多 Like 或 midstring 查询，这些查询不能很好地使用索引。你最终会解析很多东西。

# java - Java - 如何创建自定义对话框？

> ID：789517
> 
> 赞同：46
> 
> 时间：2009-04-25T18:58:53.110
> 
> 标签：java, swing, jframe, jdialog, joptionpane

我在 JFrame 上有一个按钮，单击该按钮时，我希望弹出一个对话框，其中包含多个文本区域供用户输入。我一直在四处寻找，试图弄清楚如何做到这一点，但我越来越困惑。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-04-26T04:09:38.777

如果您不需要太多的自定义行为方式，JOptionPane 是一个很好的节省时间的方法。它负责 OK / Cancel 选项的放置和本地化，并且是一种快速而简单的方式来显示自定义对话框，而无需定义您自己的类。大多数情况下，JOptionPane 中的“消息”参数是一个字符串，但您也可以传入一个 JComponent 或 JComponent 数组。

例子：

```
JTextField firstName = new JTextField();
JTextField lastName = new JTextField();
JPasswordField password = new JPasswordField();
final JComponent[] inputs = new JComponent[] {
        new JLabel("First"),
        firstName,
        new JLabel("Last"),
        lastName,
        new JLabel("Password"),
        password
};
int result = JOptionPane.showConfirmDialog(null, inputs, "My custom dialog", JOptionPane.PLAIN_MESSAGE);
if (result == JOptionPane.OK_OPTION) {
    System.out.println("You entered " +
            firstName.getText() + ", " +
            lastName.getText() + ", " +
            password.getText());
} else {
    System.out.println("User canceled / closed the dialog, result = " + result);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-02T18:05:14.563

试试这个简单的类来自定义你喜欢的对话框：

```
import java.util.ArrayList;
import java.util.List;

import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JRootPane;

public class CustomDialog
{
    private List<JComponent> components;

    private String title;
    private int messageType;
    private JRootPane rootPane;
    private String[] options;
    private int optionIndex;

    public CustomDialog()
    {
        components = new ArrayList<>();

        setTitle("Custom dialog");
        setMessageType(JOptionPane.PLAIN_MESSAGE);
        setRootPane(null);
        setOptions(new String[] { "OK", "Cancel" });
        setOptionSelection(0);
    }

    public void setTitle(String title)
    {
        this.title = title;
    }

    public void setMessageType(int messageType)
    {
        this.messageType = messageType;
    }

    public void addComponent(JComponent component)
    {
        components.add(component);
    }

    public void addMessageText(String messageText)
    {
        JLabel label = new JLabel("<html>" + messageText + "</html>");

        components.add(label);
    }

    public void setRootPane(JRootPane rootPane)
    {
        this.rootPane = rootPane;
    }

    public void setOptions(String[] options)
    {
        this.options = options;
    }

    public void setOptionSelection(int optionIndex)
    {
        this.optionIndex = optionIndex;
    }

    public int show()
    {
        int optionType = JOptionPane.OK_CANCEL_OPTION;
        Object optionSelection = null;

        if(options.length != 0)
        {
            optionSelection = options[optionIndex];
        }

        int selection = JOptionPane.showOptionDialog(rootPane,
                components.toArray(), title, optionType, messageType, null,
                options, optionSelection);

        return selection;
    }

    public static String getLineBreak()
    {
        return "<br>";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T19:05:47.960

[Java 教程中的这一课](http://java.sun.com/docs/books/tutorial/uiswing/components/index.html)通过示例和 API 链接详细解释了每个 Swing 组件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T19:30:55.370

如果您使用[NetBeans IDE](http://www.netbeans.org/downloads/index.html)（此时的最新版本是 6.5.1），您可以使用它来创建一个基本的 GUI Java 应用程序，使用 File->New Project 并选择 Java 类别，然后选择 Java Desktop Application。

创建后，您将拥有一个简单的基本 GUI 应用程序，其中包含一个可以使用菜单选择打开的 about 框。您应该能够根据自己的需要进行调整，并学习如何通过单击按钮打开对话框。

您将能够直观地编辑对话框。删除那里的项目并添加一些文本区域。如果您遇到困难，请尝试一下并提出更多问题:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T21:43:27.923

好吧，您实际上创建了一个 JDialog，添加您的文本组件并使其可见。如果您缩小遇到问题的特定位，它可能会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-19T09:10:54.360

我创建了一个自定义对话框 API。在这里查看[https://github.com/MarkMyWord03/CustomDialog](https://github.com/MarkMyWord03/CustomDialog)。它支持消息和确认框。就像 joptionpane 中的输入和选项对话框将很快实现。

来自 CUstomDialog API 的示例错误对话框： [CustomDialog 错误消息](https://i.stack.imgur.com/uLwYe.png)

# c# - 你在哪里指定泛型类型？

> ID：789518
> 
> 赞同：1
> 
> 时间：2009-04-25T18:59:20.347
> 
> 标签：c#, generics

我有一个通用`Print`方法，它遍历一个列表并简单地打印每个项目的文件名

```
 private static void Print<T>(
        Func<IEnumerable<T>> getFiles, Func<T, string> getFileName) 
            where T : class 
    {
        foreach (T file in getFiles())
        {
            var fileName = getFileName(file);
            Console.WriteLine("File Name: {0}", fileName);
        }
    } 
```

对于知道什么类型的方法，`T`我可以`Print`用两种不同的方式调用

```
 Print<FileInfo>(FileFinder.GetFiles, fileInfo => fileInfo.FullName); 
```

- 或者 -

```
 Print(FileFinder.GetFiles, (FileInfo fileInfo) => fileInfo.FullName); 
```

调用方法的**正确**`Print`方法是什么？

明确指定泛型类型还是让编译器推断它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T19:01:01.903

任何一个选项都很好。

我个人更喜欢允许编译器在可能的情况下推断类型。没有真正需要在源代码中包含它，但在 IL 中，最终结果将是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T19:06:45.727

我倾向于选择第二个。一般来说，不能保证 Print 的泛型参数与 Func 参数参数有任何合理的关系。这是给定的

```
Foo<T>(yadda, (bar) => body) 
```

没有理由认为“T”和“bar”是相关的。然而

```
Foo(yadda, (T bar) => body) 
```

你知道 bar 是一个 T。另外，对于 T 和 bar 相关的情况*，*如果 yadda 很长，你在 T 和 bar 之间放置了很大的物理距离，这增加了读者的认知负担。

# mysql - 如何使用 EXPLAIN *预测 * MySQL 查询的性能？

> ID：789521
> 
> 赞同：56
> 
> 时间：2009-04-25T19:00:07.240
> 
> 标签：mysql, sql-execution-plan

我正在帮助维护一个程序，该程序本质上是一个用于大型复杂 MySQL 数据库的友好只读前端——该程序根据用户输入构建临时 SELECT 查询，将查询发送到数据库，获取结果，对它们进行后处理，并将它们很好地显示给用户。

我想为构造查询的预期性能添加某种形式的合理/启发式预测——有时用户无意中进行了不可避免地需要很长时间的查询（因为他们会返回巨大的结果集，或者因为他们'重新“违背”数据库索引的方式），我希望能够向用户显示一些“有点可靠”的信息/猜测查询需要多长时间。它不一定是完美的，只要它不会变得如此糟糕和频繁地与现实脱节，以至于导致用户学会无视它的“哭狼”效应；-) 基于此信息，用户可能决定去喝杯咖啡（如果估计是 5-10 分钟），去吃午饭（如果是 30-60 分钟），

我对 MySQL 的 EXPLAIN 语句不是很熟悉——我看到了很多关于如何使用它来*优化*查询或数据库架构、索引等的信息，但关于如何将它用于我更有限的目的的信息不多- 简单地进行预测，将数据库作为给定（当然，如果预测足够可靠，我最终可能会切换到使用它们也可以在查询可能采用的替代形式之间进行选择，但是，这是为了未来：现在，出于上述目的，我很乐意向用户展示性能猜测）。

任何指针...？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-25T19:10:24.237

EXPLAIN 不会告诉您查询需要多长时间。充其量你可以用它来猜测两个查询中的哪一个可能更快，但除非其中一个显然写得不好，否则即使这样也很难。

您还应该知道，如果您使用子查询，即使运行 EXPLAIN 也可能很慢（在某些情况下几乎与查询本身一样慢）。

据我所知，MySQL 没有提供任何方法来估计查询运行所需的时间。您能否记录每个查询运行所需的时间，然后根据过去类似查询的历史建立一个估计值？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-25T19:12:38.770

我认为，如果您想有机会从中构建一些相当可靠的东西，您应该做的是根据表大小和分解的与查询处理时间相关的 EXPLAIN 结果组件构建一个统计模型。*尝试基于对 EXPLAIN 内容的思考*来构建查询执行时间预测器只会花费太长时间，在它变得模糊有用之前给出令人尴尬的糟糕结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-09T13:33:32.397

MySQL EXPLAIN 有一个名为`Key`. 如果此列中有内容，这是一个很好的指示，这意味着查询将使用索引。

使用索引的查询通常可以安全使用，因为数据库设计者在设计数据库时可能会考虑这些查询。

**然而**

还有一个字段叫做`Extra`. 此字段有时包含文本`using_filesort`。

这是*非常非常*糟糕的。这实际上意味着 MySQL 知道查询将有一个大于可用内存的结果集，因此将开始将数据交换到磁盘以便对其进行排序。

**结论**

无需尝试预测查询所需的*时间*，只需查看这两个指标即可。如果查询是`using_filesort`，则拒绝该用户。并且根据您想要的严格程度，如果查询没有使用任何键，您也应该拒绝它。

阅读有关[MySQL EXPLAIN 语句结果集的更多信息](http://dev.mysql.com/doc/refman/5.7/en/explain-output.html)

# .net - 开发部署到不同 Active Directory 的 .Net

> ID：789526
> 
> 赞同：0
> 
> 时间：2009-04-25T19:01:07.860
> 
> 标签：.net, deployment, active-directory

情况是您必须针对 Active Directory 树开发应用程序。想要使用基于 AD 用户组的基于角色的安全性。部署树不可用，开发树和部署树之间不存在或不允许信任。

开发应用程序然后部署的最佳实践是什么。第一个问题是角色名称因域前缀而不同。其中很多都是声明性的。说使用属性。那么问题显然是在部署的环境中角色字符串会有所不同。

另一个问题是能够在开发中以不同的帐户调试运行。注销和记录是连接调试器的失败。这是如何解决的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-25T20:25:50.933

您可能想看看[Active Directory 轻型目录服务](http://msdn.microsoft.com/en-us/library/aa705886(VS.85).aspx)(AD LDS) - 以前称为 AD/AM（Active Directory/应用程序模式）。

它基本上允许您在开发盒上创建一个 AD 实例并对其进行编程，就好像它是一个成熟的 AD 一样。但是：AD LDS 不能用于对用户进行身份验证 - 所以这可能对您的场景没有帮助:-(

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T21:05:16.767

您可能不应该在任何 AD 环境中对预先存在的安全组进行检查。

你的应用程序应该有它自己的一组角色，它使用和知道。

安装后，您将在活动目录中生成适当的安全组，并将现有组/用户添加到您添加的那些组中。

不知道角色的来源意味着您不必担心 IT 会重新安排“实时”AD 实例中的内容，并且还可以让您在需要/想要时灵活地完全更改后端（例如切换到来自 AD 的 sql server 或在测试期间模拟它）

# c++ - QList 和 shared_ptr

> ID：789532
> 
> 赞同：5
> 
> 时间：2009-04-25T19:05:35.980
> 
> 标签：c++, qt, boost, qlist

你怎么看？这是正确的还是存在内存泄漏？

来源：

```
#include <QList.h>
#include <boost/shared_ptr.hpp>
#include <iostream>

class A {
private:
    int m_data;
public:
    A(int value=0) { m_data = value; }
    ~A() { std::cout << "destroying A(" << m_data << ")" << std::endl; }
    operator int() const { return m_data; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    QList<boost::shared_ptr<A> > list;
    list.append(boost::shared_ptr<A>(new A(6)));
    std::cout << int(*(list.at(0))) << std::endl;
    return 0;
} 
```

输出：

```
6
destroying A(6) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T19:11:56.650

`shared_ptr`如果不知道为什么首先存在`A`对象列表，就很难提出任何建议。

看看智能指针的[所有权语义](http://www.boost.org/doc/libs/1_35_0/doc/html/interprocess/interprocess_smart_ptr.html#interprocess.interprocess_smart_ptr.unique_ptr)。也许对你有帮助。

其他一些可以改进的地方：

**1.**在 ctor 中使用初始化列表，例如：

```
class A {
 private:
   int m_data;
 public:
    A(int value=0) : m_data (value) {}
 // .... 
```

**2.** `int _tmain(int argc, _TCHAR* argv[])`不是标准签名；

采用

```
int main(int argc, char* argv[]) 
```

要不就：

```
int main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T19:30:11.987

这段代码看起来非常好。

如果您正在寻求建议，也许您可​​以提供有关将 shared_ptr 与 QList 一起使用的目的的更多信息，可能有一种“Qt”方式可以做到这一点，而无需使用诸如 shared_ptr 之类的大枪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T19:31:35.900

这似乎是正确的。Boost 的 shared_ptr 是一个引用计数指针。如果对象之间没有循环引用，引用计数能够回收内存。在您的情况下， A 类的对象不引用任何其他对象。因此，您可以放心使用 shared_ptr。此外，所有权语义允许在 STL（和 Qt）容器中使用 shared_ptrs。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T19:56:26.900

如果您不使用智能指针，则必须自己删除列表元素。

来源：

```
#include <QList.h>
#include <boost/shared_ptr.hpp>
#include <iostream>

class A {
private:
    int m_data;
public:
    A(int value=0) { m_data = value; }
    ~A() { std::cout << "destroying A(" << m_data << ")" << std::endl; }
    operator int() const { return m_data; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    QList<A *> list;
    list.append(new A(6));
    std::cout << int(*(list.at(0))) << std::endl;
    return 0;
} 
```

输出：

```
6 
```

不好。

# java - 是否可以使用 Web 框架但不依赖于该框架？

> ID：789536
> 
> 赞同：1
> 
> 时间：2009-04-25T19:06:59.627
> 
> 标签：java, model-view-controller, web-frameworks

我正在研究在我的 Java web 应用程序中使用 web 框架。我的基本要求是易于维护、可测试和不重复。

我已经探索过使用某种前端控制器模式和 JSP 的视图编写我自己的 MVC 类型的应用程序。这样做的好处是我可以完全控制我的网络应用程序的所有方面，如果我设计得当，如果我愿意的话，将来将它转移到一个经过更多测试的框架应该不难。然而，缺点是我不得不重新发明轮子。

我听说了有关当前可用 Web 框架的好消息。我一直在研究的一些技术是 Spring、Wicket、Struts、Guice、Hibernate 和 Tapestry。

我对 Tapestry 和 Wicket 有点警惕。我不太了解它们，但它们似乎偏离了 servlet->model jsp->view 公式。我不确定我是否对此感到满意。虽然，我听说 Wicket 实际上最适合 Guice 并且非常可测试。

Spring 似乎很适合，但我对试图做所有事情的框架非常警惕。我很想使用 spring-MVC，但我可以换其他组件吗？例如，我可以在使用 Spring-MVC 作为我的框架的同时使用 Guice 作为我的 DI 引擎吗？

我简要地查看了 Struts，但它似乎对我的需求过于复杂，而且似乎又是一个完整的包。

我从未使用过 Hibernate，但它似乎是 ORM 的标准，如果它类似于 ActiveRecord（我只接触过一点点），我相信它符合我的需要。

我也从未真正使用过 Guice，但人们似乎真的很喜欢它，而且我总体上是 DI 的粉丝，尽管我不确定它是如何在实际应用程序中使用的。

基本上，我只对编写 Servlets/JSP 有信心。我不反对学习替代技术，但我正在寻找关于哪些技术真正使我受益的建议。

如果我可以使用 Servlet 和 JSP 制作 MVC 应用程序，是否值得加入 Spring？还是我应该只使用 Servlets/JSP 并结合像 Guice 这样的 DI 引擎？

我很确定我想将 Hibernate 用于 ORM，但我听说它可能非常复杂。我真正在寻找的只是一种将我的 POJO 映射到数据库的方法，所以如果有更好/更容易使用的东西，我愿意查找它。

我感到迷茫，正在寻找该地区知识渊博的人的一些指导，对任何这些问题的任何意见都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T19:30:27.730

“Spring 似乎很合适，但我对试图做所有事情的框架非常警惕。我很想使用 spring-MVC，但我可以换入其他组件吗？例如，我可以使用 Guice 作为我的 DI使用 Spring-MVC 作为我的框架的引擎？”

同意 Spring 提供了很多东西，但它是完全模块化的。您可以使用带或不带 AOP 的 DI 等等。是的，您可以将 Spring MVC 和 Guice 一起用于 DI。

“我简要地研究了 Struts，但它似乎对我的需求过于复杂，而且似乎又是一个完整的包。”

我已经使用 Struts 有一段时间了，但即使我开始使用它，我也发现它轻而易举。控制器一开始可能看起来势不可挡，但当你掌握了它的窍门后，你会获得真正的乐趣。最好的方法是查看一些使用 Struts 的真实示例。

“我从未使用过 Hibernate，但它似乎是 ORM 的标准，如果它像 ActiveRecord（我只接触过一点点），我相信它符合我的需求。”

哦，那么如果你发现 Struts 很难，那么 Hibernate 是巨大的。它需要很大的学习曲线。它最终是值得的，但如果你知道 ActiveRecord，我建议你在充分了解 Hibernate 之前坚持下去。

“我很确定我想将 Hibernate 用于 ORM，但我听说它可能非常复杂。”

恕我直言，非常真实……至少对于初学者来说。（有人建议在这里改变吗？）

“如果我可以使用 Servlet 和 JSP 制作 MVC 应用程序，是否值得加入 Spring？”

您的意思是没有 Struts 或任何其他框架？如何？

似乎你正试图太快地接受太多。尝试一次考虑一件事。DI 本身在现实世界中实现起来是一件棘手的事情。哦，是的，从概念上讲它很棒，但我的意思是你需要先一一掌握。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T19:35:57.670

很简单，如果您对 JSP 和 Servlet 感到满意，那么如果您想省去一些 Web 编程的苦差事，我会考虑 Stripes 或 Struts 2。

我对 Stripes 非常熟悉，只知道 Struts 2 类似，所以我将把这篇文章重点放在 Stripes 上。

顺便说一句，Struts 1 毫无价值。它没有任何价值（坦率地说）。

Stripes 有几个特性，但我只关注其中的几个。

Stripes 的主要价值，如果这是它唯一的功能，它仍然非常有价值，是它的绑定框架。

绑定是将请求字符串值转换为操作值的过程。Stripes 在这方面做得非常好。具体来说，Stripes 绑定在嵌套和索引参数以及类型转换方面做得非常好。您可以轻松地拥有一个名为“currentDate”的表单字段，然后在您的 Action 中拥有一个“Date currentDate”，Stripes 将“做正确的事”。

如果您有一个名为“mainMap['bob'].listOfThings[3].customer.birthDate”的表单字段，Stripes 将制作地图，创建列表，创建客户，将字符串转换为日期，填充birthDate，将客户放在列表的第 3 个位置，然后将该列表放在地图的“鲍勃”位置。（我一直在做这样的事情。）

请求与 Action 变量的绑定非常棒。

最重要的是，如果你使用他们的表单标签，你会得到很好的行为，例如，他们在你的日期字段中输入“Fred”。您可以轻松地取回表单，Fred 在该字段中，并显示一条很好的错误消息。

最后，由于他们的行动，我真的很喜欢他们的决议。例如，ForwardResolution 转发到页面，RedirectResolution 重定向到页面，StreamingResolution 如果您想将数据泵入套接字等。这是一个非常优雅的功能。

Stripes 有各种各样的力量，可以做各种各样的事情，但这 3 件是最适合我的，也是我 99% 的时间使用的。

简而言之，它确实不碍事，可以轻松处理“管道”，而不会完全掩盖系统的 HTTP 请求性质。

对于满足于 JSP/Servlets 的人来说，我认为 Stripes 是一个很好的进步，因为它以非常低的成本（它很容易设置）增加了良好、可靠的价值，并且不必抛弃你已经知道的所有东西，因为它可以工作非常适合 JSP 和 JSTL。了解它用于将操作映射到 URL 的简单机制，以及将请求映射到您的操作是多么简单，您很快就会飞起来。

也适用于 Ajax 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T20:33:10.277

这个问题说明了一些混乱。我认为明确的答案是“不，不可能使用 Web 框架但不能依赖它”。

但是你的直觉是好的。您希望通过帮助正确分层和模块化代码并最大程度地减少其侵入性来最大化框架提供的一般好处。

话虽如此，我认为 Spring 在这两个方面都是赢家。

如果您遵循 Spring 习惯用法，那么通过使用接口、分层和方面，您的代码结构会更好。他们对设计的一些关注势必会影响到你。这与他们提供的良好管道代码一样有用。

您的代码库不必是 100% Spring。我已经看到 Spring 用于增强遗留 Java 应用程序，这些应用程序没有从头到尾重写。

Struts 往往不是一个好的选择，因为它只是一个 Web 框架。它鼓励您将所有处理都放在 Action 子类中，永远不要出来。Spring 注入了将 Web 层与后端分离的服务接口的想法。更换 Web 层并将服务公开为 SOAP、RMI、EJB 或远程 HTTP 调用更容易。

Hibernate is far more complex than Struts. If you choose Spring, use persistence interfaces and start with Spring JDBC. When you're ready for Hibernate, you can always write a new implementation and simply inject it into the place where your JDBC version used to be.

# .net - CSLA.Net V3.6/NHibernate V2.10；如何克服对虚拟属性的需求

> ID：789537
> 
> 赞同：4
> 
> 时间：2009-04-25T19:07:14.553
> 
> 标签：.net, nhibernate, csla

使用 CSLA.net，所有域类都需要从包含非虚拟属性的 Businessbase 继承。

在使用 NHibernate 时，我们需要实现延迟加载的虚拟属性。

一起使用 CSLA/NHibernate 的一些选项似乎是：

*   在 NHibernate 中关闭延迟加载并在域类中实现延迟加载代码（尽管这看起来不太灵活）
*   在 NHibernate 中保留延迟加载，但使用 DTO 类映射到数据库，然后将数据传输到 CSLA 域类

可能还有哪些其他选择？任何指向正确方向的指针都将不胜感激。

我想上述问题确实适用于将 NHibernate 与任何框架一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T19:34:13.850

您可以为所有映射类创建接口，并指定 NHibernate 在创建代理时应使用该接口。当您这样做时，在实例初始化之前不会使用您的具体域类。

例如，您可以像这样在 hbm.xml 中执行此操作：

```
<class name="DomainModel.Entity, DomainModel" table="Entities" proxy="DomainModel.Api.IEntity, DomainModel">
    ...
</class> 
```

但是请注意，这对您如何进行映射设置了一些限制。例如，您不能使用`access="field.*"`访问策略。查看[这篇](http://blogs.chayachronicles.com/sonofnun/archive/2007/03/30/230.aspx)文章，了解可以使用的两种延迟加载策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T09:17:28.940

您可以尝试开箱即用的 CSLA.Nhibernate，也可以从中获得一些提示。

CSLA.Nhibernate 是 codeplex 上 CSLAContrib 的一部分。 [http://cslacontrib.codeplex.com/SourceControl/changeset/view/46985#302175](http://cslacontrib.codeplex.com/SourceControl/changeset/view/46985#302175)

很久没有活动了。但无论实施什么都可以正常工作。SVN 路径：[https ://cslacontrib.svn.codeplex.com/svn/ProjectTrackerNHibernate](https://cslacontrib.svn.codeplex.com/svn/ProjectTrackerNHibernate)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T06:36:31.477

我相信唯一正确的做法是在您的业务层和数据访问之间创建一个 DTO 层。我在许多项目中都这样做过，并且取得了很大的成功。

请记住，您的业务对象不应看起来/感觉像您的数据层。CSLA 对象是您的业务层，应该从您的 DataPortal_XYZ 方法中的数据访问 ORM 层进行补充。

例如，一个简单的用户、角色和用户角色数据表结构示例，其中用户角色是一个链接表，用于将用户与角色联系起来。这是您的数据架构，它非常适合规范化您的数据。

您的业​​务对象不应看起来像这样，因为这不会使行为正常化。在考虑 User 业务对象时，它应该具有 RoleList 的属性，它是 Role 对象的列表。不应该存在 UserRole 业务对象。如果您尝试直接从数据库模式和 CSLA 对象中获取，就会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T09:23:56.977

您可以在类级别的 NHibernate 映射中指定“lazy=false”。这将消除对虚拟属性的需求，因为 NHibernate 将不会使用动态代理。（这不会影响集合的惰性）。

```
<class name="SomeClass" lazy="false">
   <id .... />

   <set name="SomeSet" ... >
   </set>
</class> 
```

在上面的示例中，该类被映射为“惰性”。您将不需要虚拟属性，但 SomeSet 集合可以保持延迟加载。

# asp.net - 捆绑 ASP.Net 应用程序以作为可安装在客户端桌面上分发

> ID：789541
> 
> 赞同：1
> 
> 时间：2009-04-25T19:10:27.433
> 
> 标签：asp.net, iis, deployment, software-distribution

无论如何都可以将 ASP.Net 捆绑为一个可安装的应用程序，用户可以下载并安装在他们的桌面上，而无需进入下载 IIS 等和安装所有这些东西的模式。我确实了解 IIS 对 asp.net 是强制性的，所以我如何将其捆绑为设置的一部分，以节省业务用户 iis 的复杂性等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T20:14:04.240

是的，这是可能的。IIS 可以完全从等式中删除...基本上您需要创建自己的 ASP.NET 主机。Dan Esposito 的 ASP.NET 书有一整章专门介绍这一点。网上还有其他资源。

# iphone - 如何在调试器中输出帧位置？

> ID：789547
> 
> 赞同：0
> 
> 时间：2009-04-25T19:16:22.193
> 
> 标签：iphone, cocoa-touch, debugging, uiimageview

我有一个 UIIMageView 并希望输出如下值：

*   我的对象.center.y
*   我的对象.frame

基本上，位置和大小信息。我在控制台中使用“po”和@@ 的断点操作，但两者都不起作用。我总是以错误告终，例如“没有名为 center 的成员”。如何在调试器控制台和断点操作中输出这些值？

另外，是否可以让框架轮廓自行绘制，以便我可以在视图中看到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T19:43:08.400

根据我的经验，GDB 不适用于属性的点语法。您需要改用 [myobject center].y 或 [myobject frame]。此外，由于 CGFloat 和 CGRect 都不是对象，因此您需要使用“p”而不是“po”。

# sql - 根据其他字段更改 SQL CONSTRAINT

> ID：789549
> 
> 赞同：1
> 
> 时间：2009-04-25T19:18:25.980
> 
> 标签：sql, mysql, tsql

我有一个用 MSSQL 编写的 SQL 表：

```
create table [action]
(
    action_id       bigint identity not null,   -- PK
    action_action   char(1) not null,       -- 'C' Call, 'R' Raise, 'F' Fold, 'P' Post
    action_size     decimal(9,2) not null,  -- zero if fold, > zero otherwise

    constraint pk_action primary key clustered (action_id),
    constraint chk_action_action check (action_action in('C','R','F','P'))
) 
```

我想对`action_size`列施加约束，以便：

1) If `action_action`is 'F' then `action_size`must be 0.00 (or null if that is more doable) 2) If `action_action`is any other than 'F' then `action_size`must be greater than zero (ie >= 0.01)

我该如何表达？我试过：

```
constraint chk_action_size check (
    select action_action
        case 'F'    action_size = 0.00
        else        action_size > 0.00
) 
```

……无济于事。

我正在 MSSQL 2005 中编写此代码，但也想要一个适用于 MySQL 5.1.34 的解决方案。

顺便说一句，如果您愿意对我的`action_action`专栏发表评论，请随意。永远不会有其他有效值，`action_action`或者，如果有，它将非常罕见，并且只会有大约 1 个其他有效值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T20:17:17.507

```
create table [action]
(
    action_id           bigint identity not null,
    action_action       char(1) not null, 
    action_size         decimal(9,2) not null,

    constraint pk_action primary key clustered (action_id),
    constraint chk_action_action check (action_action in('C','R','F','P')),
    constraint chk_action_size check 
    (
         (action_action = 'F' AND action_size = 0.00) OR
         (action_action <> 'F' AND action_size > 0.00)
     )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T19:59:10.187

```
ALTER TABLE action ADD CONSTRAINT chk_action_size CHECK (
    (action_action = 'F' AND action_size = 0.00)
    OR (action_action <> 'F' AND action_size > 0.00)
) 
```

如果您使用浮点数而不是小数，请将零检查写为：

```
ABS(action_size) > 0.01 
```

因为浮点数可能不完全为零，特别是在一些数学之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T19:23:25.263

使用触发器怎么样？

[http://msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# perl - Perl - 如何访问另一个数组中保存的数组元素

> ID：789557
> 
> 赞同：1
> 
> 时间：2009-04-25T19:25:18.007
> 
> 标签：perl, multidimensional-array

又是嘿嘿嘿

我一直在努力让我的程序更容易维护。我有一个我声明的数组：

```
my @pizza = ($p1 = "Pizza One", $p2 = "Pizza Two" ); 
```

然后我继续将此@Pizza 数组放入另一个数组中，如下所示：

```
my @food = (\@pizza); 
```

当我尝试通过 @food 属性访问 $p1 或 $p2 时，我得到一个返回值，如“Array{0x8001}”，它似乎是一个内存引用。我尝试的是这样的：

```
$test = ${$food[$pizza[$p1]]}; 
```

访问它的正确方法是什么？我希望不使用索引来简化程序的可读性。你们能指出我正确的方向吗？

问候，

* * *

这就是我想要做的：

我有几个数据库（为了讨论，这是一个例子）

数据库一
表一 (D1T1) | 第一栏 | 第二栏 | 第三栏 | 第四栏
表二 (D1T2) | 第一栏 | 第二栏 | 第三栏

数据库二
表一 (D2T1) | 第一栏 | 第二栏| 第三栏
表二 (D2T2) | 第一栏 | 第二栏| 第三栏
表三 (D2T2) | 第一栏 | 第二栏| 第三栏

在这两个数据库之间，存在与它们之间的特定记录相关的信息。我要做的是创建一个数组（每个数组将代表一个数据库）并插入变量（每个变量将代表一个 table.field。在数据源中）一旦我这样做了，我将创建一个数组来保存所有 teh 数组（代表数据库的那些）因为这个数组将代表两个数据库中的一个条目，然后我可以对其进行操作。例子：

@D1 = (t1.col1, t1.col4, t2.col1); @D2 = (t1.col1, t2.col1, t3.col2, t3.col3);

@rec = ( \@D1, \@D2 );

如果我想知道数据库 2 -> 表 2 -> 列 4 中保存了什么，该语句是什么？我应该改用哈希吗？我确实需要这个二维数组/哈希。

任何帮助深表感谢。

MC

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-25T20:19:40.870

不知道您要完成什么，您正在建模什么数据，我能帮助您解决的只是语法混乱。这里有几点令人困惑。

```
# You wrote
my @pizza = ($p1 = "Pizza One", $p2 = "Pizza Two" ); 
```

那不符合你的意思。它创建了数组`("Pizza One", "Pizza Two")`，但它也设置`$p1`为 be`Pizza One`和`$p2`to be `Pizza Two`。我认为您正在尝试分配`Pizza One`给 key `p1`。我认为您想使用哈希/关联数组：

```
# Try a hash
my %pizzas = (p1 => "Pizza One", p2 => "Pizza Two"); 
```

现在`$pizzas{p1}`是`Pizza One`。或者，只需列出一个清单：

```
# An array
my @pizzas = ("Pizza One", "Pizza Two"); 
```

然后`$pizzas[0]`是`Pizza One`。继续...

```
# You wrote
my @food = (\@pizza); 
```

您正在尝试让另一个列表引用`@pizza`. 上面`$food[0]`提到`@pizza`的不是你的意思。Perl 中的引用是标量并且有不同的语法。

```
# What you probably meant
my $food = \@pizza; 
```

现在`$food->[0]`是`Pizza One`和`$food->[0]`是`Pizza Two`。

```
# You wrote
$test = ${$food[$pizza[$p1]]}; 
```

只是添加更多大括号直到你得到输出。我推荐阅读[Perl Data Structures Cookbook](http://perldoc.perl.org/perldsc.html)。哦，打开警告。在它们全部消失之前不要关闭它们，也不要因为它们太多而关闭它们。真的。真的真的。

**更新**

*“我想知道数据库 2 中保存了什么 -> 表 2 -> 列 4 语句是什么？”*

不要使用数字。给他们起名字，因为我确定他们有名字。所以是的，你想要哈希。因此，假设数据库 Foo -> 表格栏 -> 列 Baz。你会像这样访问它...

```
$values = $databases->{Foo}{Bar}{Baz}; 
```

或长手

```
$tables  = $databases->{Foo};
$columns = $tables->{Bar};
$values  = $columns->{Baz}; 
```

where`$values`可以是 Foo.Bar.Baz 的所有值的数组引用，也可以是 Foo.Bar 的主键作为键的另一个哈希。哪个更有意义取决于您对数据所做的工作。

我将留给您调整 Chaz 的答案以生成散列而不是数组。

当然，我必须要问，为什么要将两个数据库全部转储到一个大的内存结构中，然后再处理它？如果您有数据库，请查询它们。它会更快，更灵活。

我们回到最基本的问题；你真正想做的是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T22:42:33.837

根据您的描述，听起来您需要这样的东西：

```
#!/usr/bin/perl

use strict;
use warnings;

my @dbs;
while (<DATA>) {
    chomp;
    if (/^Database/) {
        push @dbs, [];
        next;
    }
    my @table = split /\s*\|\s*/;
    push @{$dbs[-1]}, [ @table[1 .. $#table] ];
}

print "datbase 1, table 2, column 1: $dbs[0][1][0]\n";

for my $db (0 .. $#dbs) {
    for my $table (0 .. $#{$dbs[$db]}) {
        for my $col (0 .. $#{$dbs[$db][$table]}) {
            print "($db,  $table, $col) is $dbs[$db][$table][$col]\n";
        }
    }
}

__DATA__
Database One
Table One (D1T1) | D1T1C1 | D1T1C2 | D1T1C3 | D1T1C4
Table Two (D1T2) | D1T2C1 | D1T2C2 | D1T2C3

Database Two
Table One (D2T1)   | D2T1C1 | D2T1C2 | D2T1C3
Table Two (D2T2)   | D2T2C1 | D2T2C2 | D2T2C3
Table Three (D2T2) | D2T3C1 | D2T3C2 | D2T3C3 
```

# python - 如何使用 PyScripter 调试 Google App Engine 脚本

> ID：789558
> 
> 赞同：3
> 
> 时间：2009-04-25T19:26:06.490
> 
> 标签：python, debugging, google-app-engine, pyscripter

情况如下：我已经下载了Google App Engine SDK。我已经编写了在我的计算机上本地运行的“helloworld”应用程序。我必须使用 PyScripter 作为 IDE。我不能使用 Eclipse，这不是解决我的问题的有效方法。

在 PyScripter 中，我设置了“运行配置”，以便服务器实例在本地运行（在“运行”模式或“调试”模式下），并且可以通过访问“localhost”的网络浏览器访问应用程序。

现在，问题是，断点似乎被忽略了。我设置了一个断点，重新加载浏览器，响应出现了，而调试器没有在我在自己的函数中设置的断点处停止。我根本无法调试。

问题是，如何使用我描述的配置调试应用程序？

（注意：我已经在 PyScripter 中使用“远程”python 引擎来运行本地服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T08:28:33.700

我认为这是[PyScripter 的错误](http://code.google.com/p/pyscripter/issues/detail?id=238)。我在 1.9.9.7 版本中测试过，同样的问题仍然存在。

# objective-c - Objective-C/Cocoa 中的 (id) 与 (NSSomeObject *)？

> ID：789560
> 
> 赞同：2
> 
> 时间：2009-04-25T19:27:44.147
> 
> 标签：objective-c

尽可能使用 id 或 NSSomeObject * 是更好的做法吗？我知道编译器可以在显式时进行更好的检查，但我只是想知道哪个是更好的做法。

例如：

```
- (IBAction)someButton:(id)sender 
```

对比

```
- (IBAction)someButton:(NSButton *)sender. 
```

这两者有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T19:34:01.120

如果您使用`- (IBAction)someButton:(id)sender`，您可以有一个`NSNotification`或其他事件将其称为选择器。然而，在您的第二种情况下，只有一个`NSButton *`能够使用此方法。

至于允许多种对象类型调用一个动作是否是一种好习惯，我并不肯定。但我使用它是因为我可以编写和调试更少的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T19:39:52.947

我喜欢使用特定的类。

Objective-C 不会强制你编写正确的类型，因为它是一种动态语言，但是编译器可以警告你一些明显的错误。

此外，Objective-C 2.0 中的属性不适用于该`id`类型。

* * *

在`IBAction`我使用的特定示例中`id`，因为动作应该可以从任何东西调用，而不仅仅是按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T19:40:29.717

> 我知道编译器可以在显式时进行更好的检查，但我只是想知道哪个是更好的做法。

显式输入（= 命名对象的精确类型）是您的朋友。当编译器可以进行更好的检查时，它会为您捕获更多错误。只有当您发现自己受到显式类型的限制时，才使用`id`类型（=[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T17:09:22.613

最佳实践是专门使用最明确的类型，以便编译器可以帮助您捕捉最基本的错误。但是，您获得的安全性确实微乎其微。更重要的是，您有足够的单元测试来捕捉更高级别的错误，这些错误会导致您将意外的实例类型传递给方法。

# flash - Flash AS3 - 如何将导入的文本字段影片剪辑设置为不可选择

> ID：789573
> 
> 赞同：0
> 
> 时间：2009-04-25T19:38:54.587
> 
> 标签：flash, actionscript-3, graphics, textfield, swc

我在 Flash CS4 中创建了一个包含文本的图形。我嵌入了适当的字符，然后将其作为 MovieClip 保存到我的库中。然后我将它导出到一个 SWC 文件。

在我的 AS3 代码中（使用 Flex SDK/记事本），然后我导入影片剪辑并为其分配一些鼠标事件，以便我可以将其用作按钮。

不幸的是，我以这种方式导入的所有图形中的文本都有“I”鼠标光标，并且文本是可选择的。这从我的 Flash 应用程序中窃取了焦点并且不好！

我知道当我有一个文本字段时，我可以：

```
var myButton:TextField = new TextField();
myButton.MouseEnabled = false; 
```

但是，当它是我正在导入的 Movieclip 时，这不起作用：

```
var myButton:MovieClip = new MyImportedButtonGraphic();
myButton.MouseEnabled = false;  // No effect

// Plus some other things I learned:
myButton.selectable = false;    // also no effect
myButton.MouseChildren = false; // No effect 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T20:53:25.610

在 flash ide 中，选择 textField，转到属性面板并取消选中包含字符“Ab”的按钮。这会阻止您的文本可供选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T19:47:40.823

如果要将包含文本的影片剪辑设置为不启用鼠标，则需要为其设置两个属性：mouseEnabled 和 mouseChildren。mouseEnabled 意味着该特定影片剪辑无法获得鼠标事件，但不会影响影片剪辑的子项（例如其中的文本字段）。mouseChildren 意味着它的孩子不注册鼠标事件，他们只是从父母那里分派。要完全禁用它，两者都需要为假。

```
 var myButton:MovieClip = new MyImportedButtonGraphic();
myButton.mouseEnabled = false;
myButton.mouseChildren = false; 
```

由于文本字段是影片剪辑的子项，因此 mouseChildren 属性会影响它，您可以将其设置为 false 并且它仍然可以工作。

# java - Java 变量别名解决方法

> ID：789581
> 
> 赞同：5
> 
> 时间：2009-04-25T19:40:22.137
> 
> 标签：java, object, reference, alias

我最近搬到了 Java，但我在变量别名方面遇到了一些问题。我到处搜索，但我似乎找不到将一个对象的内容复制到另一个对象的正确方法，而不仅仅是引用同一个对象。有没有人有什么建议？

编辑：如果我遇到别名问题的 int 怎么办？我应该首先避免这种情况吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-25T19:47:50.137

如果你的类实现了[Clonable](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Cloneable.html)接口，那么你可以使用[Object.clone()](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Object.html#clone())方法来创建一个硬拷贝。维基[百科](http://en.wikipedia.org/wiki/Clone_(Java_method))条目有一些很好的细节。

另一种方法是使用[复制构造函数](http://www.javapractices.com/topic/TopicAction.do?Id=12)，根据[此页面](http://www.javapractices.com/topic/TopicAction.do?Id=71)，它更安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T19:53:47.297

这取决于“内容”。例如，您不能只复制一个 FileInputStream，然后假设两者都将继续从同一个文件加载。

基本上有两种方法： 如果类支持“Cloneable”接口，你可以通过调用clone()来克隆它。如果没有，它通常有一个复制构造函数，从另一个对象复制数据。

通常，您最终会得到一个浅拷贝（即类的所有字段都被复制，但它们指向同一个对象）。

另一方面，许多对象被设计为不可变的（如 String 类），因此无需复制此类对象，因为它无论如何都无法更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T19:42:31.780

另一种选择是设计您的类来创建不可变对象：
[http](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)

://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html 这避免了克隆或复制构造函数的需要，因为无法更改对象一旦创建。所以多个变量可以指向同一个对象，但没有一个可以改变对象的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T19:45:11.407

java.lang.Cloneable 是您正在寻找的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-26T07:05:16.373

您不能对 Java 中的引用进行隐式引用，因此您不能为变量设置别名。

也许如果您解释您想要实现的目标，我们可以在没有“别名”的情况下帮助您做到这一点

编辑：您确实需要通过别名 int 值来解释您的意思。一个 int 值在运行时是匿名的，所以给它起别名没有任何意义。

# objective-c - 基本的 Objective-C 问题......让我发疯

> ID：789590
> 
> 赞同：1
> 
> 时间：2009-04-25T19:45:37.503
> 
> 标签：objective-c

我已经很久没有做任何编程了。过去在阅读 C 和 C++ 方面“还行”……从没写过太多。

我有一个非常简单的类，我想用它来操作数组的内容（使用`NSMutableArray`）。数组需要作为对象持久化，这样我就可以在我的程序的单次运行期间对其进行多次更新（还不担心将状态数据存储到磁盘）

这是我的问题。我不清楚我应该在哪里/何时分配/初始化我的 Array 对象，以便每次在我的 iPhone 视图上单击一个按钮时它都处于可用状态。

我正在尝试创建一个`ViewController`包含数组作为实例变量的子类，然后可以在响应视图中的按钮单击的代码中引用它。我尝试了 3 种方法

1.  我试图在我作为同一个类的一部分编写的方法中引用数组实例变量。此版本代码中的任何地方都没有 Alloc/Init。当我调用 addObject 函数时，它似乎失败了，因为尚未分配/初始化数组对象。

2.  我还尝试在`viewWillDisplay`方法中分配/初始化我的数组对象的一个​​实例。Xcode 编译器抱怨我新分配的对象从未使用过。

3.  为了踢球，我已经在我正在编写的“按钮单击”方法的范围内完成了分配/初始化……但当然，每次单击按钮时都会分配一个新实例。

这是我在示例中的`.h`和`.m`文件中的内容（这显示了场景 1）

如果有人可以填写 GIANT 空白，我将不胜感激，我显然已经了解应该如何使用 Instance Variable 对象。（我在 Obj-C..etc 上阅读了各种各样的 Apples 文档。还用谷歌搜索了我的大脑试图找到解释。

.h：

```
#import <UIKit/UIKit.h>

@interface ArrayManagerViewController : UIViewController {
    NSMutableArray *buttonArray;
}
- (IBAction)buttonClicked:(id)sender;

@end 
```

还有他们

```
#import "ArrayManagerViewController.h"

@implementation ArrayManagerViewController

- (IBAction) buttonClicked:(id)sender {
    NSString *senderTitle = [sender currentTitle];
    int intSenderTitle = [senderTitle intValue];
    [buttonArray insertObject:[NSString stringWithFormat:@"%d",
                                                         intSenderTitle]
                      atIndex:intSenderTitle];

    for (id obj in buttonArray)
        NSLog(@"Object Value %@", obj);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T19:58:47.927

如果您的数组在 ViewController 的整个生命周期中都使用，您可能可以在 ArrayManagerViewController init (override) 方法中分配/初始化数组，并在 dealloc 覆盖中调用 release。

```
@implementation ArrayManagerViewController

- (ArrayManagerViewController *) init
{
    if (self = [super init])
    {
        [[buttonArray alloc] init];
    }

    // handle errors...

    return self;
}

- (void)dealloc
{
    [buttonArray release];
    [super dealloc];
}

// other methods

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T19:57:46.133

好的，Objective C 可能有点烦人，因为您基本上有两种语法，C 和 Smalltalk。您需要使用类似的代码创建数组

```
buttonArray = [[NSMutableArray alloc] init] ; 
```

[这里](http://cocoadevcentral.com/d/learn_objectivec/)有一个很好的轻量级教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T19:59:44.990

你应该知道你必须在构造函数中初始化你的实例变量

初始化 UIViewController 的消息是（通常）

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
```

所以你的实现将是

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
       // Custom initialization
       buttonArray = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

并且不要忘记在 dealloc 消息中释放您的 buttonsArray

```
- (void) dealloc {
    [buttonsArray release];
    [super dealloc];
} 
```

PS：在开始编写代码之前，只需阅读 developer.apple.com 上的 ObjC 基础知识和 Cocoa 内存管理

# c++ - 为嵌入式分发构建 Python26.zip 的最简单方法是什么？

> ID：789598
> 
> 赞同：3
> 
> 时间：2009-04-25T19:48:00.433
> 
> 标签：c++, python, distribution, embedded-language

我使用 Python 作为现有 C++ 应用程序的插件脚本语言。我可以按照 Python 文档中的说明嵌入 Python 解释器。一切都在解释器的初始化和反初始化下成功运行。但是，我无法加载模块，因为我无法将标准库压缩到一个 zip 文件中（通常是 PythonXX.zip，对应于 python dll 的版本号）。

优化字节码编译后压缩所有标准库的最简单方法是什么？我正在寻找一个简单的脚本或命令来为我执行此操作，因为我真的不想手动执行此操作。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T20:26:30.073

为此编写脚本应该不会太难。检查`zipfile.PyZipFile`类和它的`writepy`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T20:42:50.253

我可能会使用[setuptools](http://peak.telecommunity.com/DevCenter/setuptools)来创建一个鸡蛋（基本上是一个用于 python 的 java jar）。setup.py 可能看起来像这样：

```
from setuptools import setup, find_packages

setup(
    name='python26_stdlib',
    package_dir = {'' : '/path/to/python/lib/directory'},
    packages = find_packages(),
    #any other metadata
) 
```

您可以使用`python setup.py bdist_egg`. 获得 egg 后，您可以将其添加到 python 路径中，也可以使用 setuptools 安装它。我相信这也应该为您处理 pycs 的生成。

**注意**：我不会在我的系统 python 目录上使用它。您可能想为此设置一个[virtualenv](http://pypi.python.org/pypi/virtualenv)。

# php - Web 应用程序 - 在受密码保护的目录中安全吗？

> ID：789599
> 
> 赞同：1
> 
> 时间：2009-04-25T19:48:42.600
> 
> 标签：php, security

在（信誉良好的）托管服务器上受密码保护的文件夹中的 php/mysql Web 应用程序是否安全？

感谢您提供的任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T19:54:57.170

如果破解您的人有您的密码，则不会。

确保您的托管服务提供商正在采取措施防止黑客攻击，并确保他们的网络上有防火墙。我已经阅读了有关安全 PHP 编码实践的教程，它很棒。一探究竟：

[http://www.addedbytes.com/php/writing-secure-php/](http://www.addedbytes.com/php/writing-secure-php/)

祝你好运。

# r - 这是什么意思？

> ID：789602
> 
> 赞同：3
> 
> 时间：2009-04-25T19:51:45.540
> 
> 标签：r, syntax

从这个问题您可能可以看出我对代码知之甚少！我的问题是这样的：

这段代码是什么意思？

```
mnlong <- 280.460 + .9856474 * time
mnlong <- mnlong %% 360
mnlong[mnlong < 0] <- mnlong[mnlong < 0] + 360 
```

我知道`mnlong`and`time`是变量，但让`%%`我感到困惑。

谁能给我一个基本的描述？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T19:59:05.133

%% 最有可能表示除以模的整数 - 结果在 0..360 范围内。它用于某些值无法超出某个合理范围的情况，例如只能在 0..360 度内的经度示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T20:30:57.317

有根据地猜测这里的语言是 R 或 S/Splus。正如其他人所说： %% 是 mod 运算符。

# php - 什么是 PHP 框架？

> ID：789604
> 
> 赞同：3
> 
> 时间：2009-04-25T19:52:46.287
> 
> 标签：php, frameworks

我以前从未听说过这个，而且我用 PHP 编码已经有一段时间了。我真的觉得问这个问题有点愚蠢，但是，什么是 PHP 框架？它对我有什么帮助？我该如何使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T19:56:12.253

一般来说，框架是**类和函数的集合，可让您**在开发中更快地实现目标。Symfony、CakePHP 和 Zend 等 PHP 框架都有一系列实用程序类、工具和结构化元素，可让您避免重新发明轮子。

Zend 框架和许多框架一样，有一个强大的 MVC 引擎，可以让您避免自己重新构建该功能。

要开始使用框架，您需要下载框架本身。在 Zend 的情况下，我下载它，将它解压缩到 lib/，然后就可以开始了。从那里，您只需阅读有关该特定框架的文档，以了解如何实际使用它们提供的工具。使用什么函数，在哪里使用什么类等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T20:03:07.963

框架是一个大库。两者的确切不同之处相当模糊，但通常框架对工作流程的影响比库更大。一个（好的）库是被动的，其中一个框架被期望更多地参与。因此，框架通常也非常单一（例如，您通常不能同时使用两个框架）。

# c++ - 在 C++ 应用程序中嵌入数据

> ID：789611
> 
> 赞同：2
> 
> 时间：2009-04-25T19:56:55.917
> 
> 标签：c++, cross-platform

是否有独立于平台的方法将文件数据嵌入到 C++ 程序中？例如，我正在制作一个游戏，并且关卡以文本格式存储。但我不想将这些文本文件与游戏本身一起分发。我有哪些选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T20:01:11.600

[以前在这里问过](https://stackoverflow.com/questions/72616/embed-data-in-a-c-program)这个问题。基本上，您只需使用可访问的符号命名数据。我最喜欢这种方法：

> 您始终可以编写一个小程序或脚本来将您的文本文件转换为头文件 >> 文件，并将其作为构建过程的一部分运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T20:01:04.893

您始终可以将文本放入代码中。例如，作为字符串数组或字符指针数组。

```
String txt[] = {
  "My first line.\n",
  "My second line.\n"
} 
```

当然，标准库中有更好的结构，但无论如何您都将文本放在源文件中。

如果您担心人们访问它，您也可以考虑将文本放入包中并对其进行加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T20:01:52.287

如果级别真的只是简单地存储为文本，您可以在源代码中声明静态字符数组：

```
static const char level1[] = "abcdeabcdeabcde...."; 
```

您可以将其编译并链接到您的应用程序中，并像任何其他变量一样引用它。

# sql-server - Sql Server 服务 - 概述有人吗？

> ID：789616
> 
> 赞同：18
> 
> 时间：2009-04-25T19:58:20.580
> 
> 标签：sql-server, reporting-services, reporting, ssas, business-intelligence

## **简而言之**

我对可用的 SQL Server 服务数组感到非常困惑，并且很难找到简短的入门书。

## **独家新闻**

我是一名长期的 ASP.Net 开发人员，多年来一直愉快地开发 ASP.Net 应用程序。这些通常基于 SQL 服务器和一系列自定义表和视图。

就在最近，我需要做一些超出直截了当的报告，所以我开始研究 SQL Server Reporting Services (SSRS)。在这样做的过程中，我觉得我打开了潘多拉魔盒。

有报告服务、集成服务、分析服务、商业智能等。这让我想知道它们都做了什么，我是否可以（或应该）利用这些工具为 .net 做一些繁重的工作应用程序。

我对微软的直接研究工作用难以理解的营销和商业演讲扼杀了我。我的谷歌搜索没有发现这些工具是什么，或者它们组合在一起，甚至什么时候应该使用哪个工具的全面概述。我在理解这些选项时遇到的最大问题之一是它们对我来说似乎都一样！

所以，所有这些都是说，如果某种鞋底可以让我笔直并指出我正确的方向，我将非常感激:)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-25T20:32:14.320

非常高级的概述：

数据库引擎本身的核心服务包括 SQL Server 服务本身（或 MSSQLSERVER），还有 SQL Server Agent 和 SQL Server Browser。SQL Server 代理是 SQL Server 的作业调度程序，并处理一些其他维护任务等，而浏览器服务通过创建客户端应用程序连接到 SQL Server 的更简单方式来帮助接受登录等。

所有这三个服务都是真正的“服务”，因为它们是在您的服务器上运行的守护程序。但是在这三个中，您只需要运行 MSSQLSERVER 即可使用关系数据库引擎。（其他两项服​​务是可选的。）

然后，除了核心数据库引擎功能之外，微软还提供了一堆附加组件或补充“产品”和工具，以帮助使 SQL Server 作为一个平台/产品变得更好、更具吸引力。如您所见，这些通常作为“服务”进行营销。

Reporting Services（或 SSRS）是一个很棒的解决方案，它使用原生 SQL Server 数据库来存储有关数据源、报表交付计划、访问权限等的信息......来自几乎任何数据源的报告。您只需定义报告的来源、连接数据集和参数，然后使用专门的 xml 标记（报告定义语言或 RDL）来定义报告的外观、感觉、形状等。而且，微软已经创建了一个“调整”版本的 Visual Studio，使创建/开发/编辑这些报告变得更加容易。该版本的 Visual Studio 称为 SQL Server 商业智能设计工作室（或 BIDS）。

同样，Microsoft 还使用 BIDS 来帮助开发人员、DBA 和分析师创建数据多维数据集 - 使用允许 SQL Server Analysis Services (SSAS) 通过几乎任何数据关系组合来提供的专用模式的多维“连接”表“分析数据”。所以...假设您有一家销售小部件的公司：您可以定义产品、客户、销售区域、日期等之间的关系 - SSAS 将获取该数据（以及定义这些关系的特殊定义的“立方体”定义，它们的粒度等）并预先计算结果，以几乎任何这些“维度”或数据角度的组合 - 这样你就可以说：“

等等，以促进按计划进行数据转换和迁移。不过，这个工具/服务的非常酷的一点是……它不仅可以在 SQL Server 和 SQL Server 之间连接/转换数据……而且还能够将 MOST 数据源连接到 MOST 数据源 - 所以它是一个强大的工具用于转换、导出、导入、修改、调整等所有数据。而且...要为您的集成/转换项目定义“工作流”，您还可以使用 Business Intelligence Design Studio - 与为 SQL Server Analysis Services 定义多维数据集等相同。能够将 MOST 数据源连接到 MOST 数据源 - 因此它是一个强大的工具，用于转换、导出、导入、修改、调整等所有数据。而且...要为您的集成/转换项目定义“工作流”，您还可以使用 Business Intelligence Design Studio - 与为 SQL Server Analysis Services 定义多维数据集等相同。能够将 MOST 数据源连接到 MOST 数据源 - 因此它是一个强大的工具，用于转换、导出、导入、修改、调整等所有数据。而且...要为您的集成/转换项目定义“工作流”，您还可以使用 Business Intelligence Design Studio - 与为 SQL Server Analysis Services 定义多维数据集等相同。

归根结底，使所有这些如此酷的原因是您可以访问：

SQL 服务器

SQL Server 报告服务

SQL Server 集成服务

SQL Server 分析服务

使用 SQL Server 标准版和企业版 - 因此无需购买额外的工具/解决方案/产品即可利用这些强大的功能。（SQL Server 企业版的成本大约是标准版的 5 倍……在某些方面具有更好/更酷的功能……但您仍然可以使用标准版获得所有功能的可靠子集。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T20:36:31.080

以下是服务的基本概述：

**Analysis Services：**这是微软的数据仓库解决方案。它允许您创建数据立方体和其他仓储功能。提供工具以更轻松地创建假设情景。这在 SQL Server 之上运行。数据仓库也称为商业智能应用程序，因为仓库用于挖掘和分析数据。

**Reporting Services：**允许您更轻松地构建数据库报告。它提供了报表设计器和管理功能。该服务应该可以更轻松、更快速地创建丰富的报告。报告服务也适用于非 SQL Server 数据服务。

**集成服务：**提供构建提取、转换、加载 (ETL) 功能的功能。ETL 工具集成了各个数据集并帮助提取、聚合、清理和上传数据。与其他服务一样，它提供了一个 GUI，可以让这些包更容易创建。

您不需要同时使用这三个服务，但它们在一起使用时确实提供了功能。例如，您可以使用 Analysis Services 创建数据多维数据集，使用 Integration Services 从外部服务中提取数据并将其导入多维数据集，并使用 Reporting Services 创建包含多维数据集中包含的数据的业务指标的报告。

至于您是否应该/一直在使用它们，一如既往，这取决于。这些服务提供了一些很棒的服务，但并不总是适合项目。例如，Reporting Services 确实使创建报告变得更容易，但根据我的经验，它对于最终用户的报告创作不够友好，因为它被宣传。集成服务非常适合做一些 ETL 工作，但不像有时需要的那样灵活。我在一些项目中使用了这项服务，但它总是比我预期的更麻烦。但绝对，看看他们。

# iphone - 在越狱手机上开发 iPhone

> ID：789621
> 
> 赞同：0
> 
> 时间：2009-04-25T20:00:14.630
> 
> 标签：iphone

我有一部越狱手机，当我尝试恢复原始软件时，无论出于何种原因，它都无法正常工作。所以我被困在越狱版本上。

加入 Apple 开发者计划，将我的应用程序加载到手机上进行测试，然后将我的应用程序放入应用程序商店，会不会有任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T20:07:18.013

不，别担心。当您支付 iPhone 开发者计划的费用时，Apple 只需给您证书以签署您的应用程序以在您的手机上进行测试

# c# - 解析路由器配置输出

> ID：789622
> 
> 赞同：1
> 
> 时间：2009-04-25T20:00:37.233
> 
> 标签：c#, regex, stream

我的路由器支持 telnet 会话来配置我的路由器，我想在 c# 中创建一个应用程序，将控制台输出解析为有用的东西。

编辑：行用 "\n\r" 分隔，没有使用 \t 字符，所有内容都隔开

### 例子：

```
 bridge configuration for "bridge" :
OBC       : dest : Internal
            Connection State: connected   Retry: 10
            Priority Tagging: Disabled
            Port: OBC            PortNr: 0          PortState: forwarding  Interface: up
            Multicast filter: disabled              Dynamic VLAN    : disabled
            IGMP snooping   : enabled
            VLAN: Default VLAN: default  Ingressfiltering: disabled  Acceptvlanonly: disabled
            VLAN: Priority: disabled  IP Prec: disabled  Priority: 0  Regeneration table: 0 1 2 3 4 5 6 7
            RX bytes: 1978767922 frames: 21288686
            TX bytes: 481256491  frames: 16224065     dropframes: 13671

ethport1  : dest : ethif1
            Connection State: connected   Retry: 10
            Priority Tagging: NA (destination switch interface)
            Port: ethport1       PortNr: 1          PortState: forwarding  Interface: up
            Multicast filter: disabled              Dynamic VLAN    : disabled
            IGMP snooping   : enabled
            VLAN: Default VLAN: default  Ingressfiltering: disabled  Acceptvlanonly: disabled
            VLAN: Priority: disabled  IP Prec: disabled  Priority: 0  Regeneration table: 0 1 2 3 4 5 6 7
            RX bytes: 44045      frames: 0
            TX bytes: 12618      frames: 0            dropframes: 0 
```

有人可以给我一些提示吗？我的第一个想法是正则表达式，但我不知道如何在这种规模上做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-26T14:11:14.897

“变成有用的东西”对我来说意味着您的第一步是创建代表您的数据的类、结构和枚举：

```
public class RouterEntry
{
    public ConnectionState ConnectionState { get; }
    public int Retry { get; }
    ...
    public long BytesTX { get; }
} 
```

然后，开始思考如何解析结果字符串。我可能会编写一个`Deserialize(StringReader)`方法（或类似的方法），以便您的对象逐行解析数据。

您还可以使用[`string.Split`](http://msdn.microsoft.com/en-us/library/ms131448.aspx)SplitOptions 重载来帮助您忽略任何空格。

例如，如果你使用

```
Port: OBC            PortNr: 0        PortState: forwarding  Interface: up 
```

作为您的输入行，并且

```
char[] delims = new char[] { ':', ' ' }; 
```

作为你的分隔符，然后这样称呼它

```
string[] tokens = line.Split(delims, StringSplitOptions.RemoveEmptyEntries); 
```

将导致`tokens`包含

```
[Port, OBC, PortNr, 0, PortState, forwarding, Interface, up] 
```

对于键具有多个“值”的行（例如，`Regeneration table: 0 1 2 3...`您只需考虑到这些值中的每一个都将是令牌数组中的单独字符串这一事实）。

*关键是，如果您一次将问题分解一点，它应该变得更易于解决。*

# apache-flex - Flex Type Coercion，我认为它已经失去了精神

> ID：789627
> 
> 赞同：5
> 
> 时间：2009-04-25T20:02:14.687
> 
> 标签：apache-flex, flash, actionscript-3, mxml

我基本上有一堂课：

```
public class WindowEvent extends Event
{
    public static const WARNEVENT:String = "warnEvent";
    public static const TASKREQEVENT:String = "taskRequestEvent";
    public static const TASKANNOUNCE:String = "taskAnnounce";
    public static const WINDOWCHANGE:String = "windowChange";
    public static const ILLEGALPOSITION:String = "illegalPosition";

    // insert brevity   
} 
```

前四个事件运行良好，但我只是添加`ILLEGALPOSITION`并尝试了这个：

```
 // inside Window.as
    private function checkDimensions():void {
       if(!Window._legalBoundaryEnable)
           return;
...    var pass:Boolean = Window.legalBoundary.containsRect(
455        this.getBounds(stage));
456    if(!pass) {
457        this.dispatchEvent(new WindowEvent(WindowEvent.ILLEGALPOSITION,
...           "Illegal Position etc."));
       }
    } 
```

所以当我点击调度方法时，Flex 向我吐出了这个堆栈：

```
TypeError：错误 #1034：类型强制失败：无法转换 ¬
        flex.utils.ui::WindowEvent@511dce41 到 flash.events.MouseEvent。
    在 flash.events::EventDispatcher/dispatchEventFunction()
    在 flash.events::EventDispatcher/dispatchEvent()
    在 mx.core::UIComponent/dispatchEvent() ¬
        [C:\autobuild\~\UIComponent.as:9298]
    在 flex.utils.ui::Window/checkDimensions()[C:\Users\~\Window.as:457]
    在 flex.utils.ui::Window/stageResized()[C:\Users\~\Window.as:220]
```

从跟踪中可以看出，是最后一个用户代码行。所以 WTF试图用?`Window.as:**457**``flash.events.EventDispatcher.dispatchEventFunction``MouseEvent`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T20:46:48.403

该错误通常发生是因为您设置的侦听器具有不正确的事件参数类型。我很确定这里一定是这种情况。

检查您为该事件设置的所有侦听器并确保该函数是

```
someFunction(event : WindowEvent) : void 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T20:11:59.407

尝试使用另一个值`ILLEGALPOSITION`，`"illegalPosition"`可能会被 Flex 本身（或代码的另一部分）使用并与鼠标事件相关。因此，当该事件处理程序触发时，它会尝试将您的事件转换为 a `MouseEvent`，因为它认为它应该是一个。

# javascript - Javascript函数钩子

> ID：789630
> 
> 赞同：14
> 
> 时间：2009-04-25T20:04:22.187
> 
> 标签：javascript, aop, hook

编辑：好的，我相信以下解决方案是有效的：

1.  使用 jQuery AOP 插件。它基本上将旧函数与钩子一起包装成一个函数三明治，并将其重新分配给旧函数名。这会导致每个新添加的钩子都嵌套函数。
    如果 jQuery 不适合你，那就盗版源码吧，插件里面好像没有 jQuery 依赖，而且源码简单而且很小。

2.  有一个描述所有钩子及其目标的对象和一个用于存储初始未修改函数的对象。添加新钩子时，将围绕原始函数重做包装，而不是重新包装先前的包装函数。
    您转义嵌套函数，并获取两个对象来处理。如果您经常无序地添加/删除钩子，这也可能意味着更容易处理钩子。

我会选择第一个，因为它已经完成了，我不用担心性能。并且由于原有功能不受影响，即使我切换钩子方法，我只需要重新添加钩子，这可能只是一些简单的搜索和替换操作。

* * *

你好，

是否有可能创建一种机制，其中函数 A 可能有一组钩子（将在函数 A 之前/之后执行的函数）？

理想情况下，函数 A 不会意识到挂钩功能，因此我不必修改函数 A 的源代码来调用挂钩。就像是：

```
A = function(){
    alert("I'm a naive function");
};
B = function(){
    alert("I'm having a piggyback ride on function A!"+
          "And the fool doesn't even know it!");
};
addHook(B, A)//add hook B to function A
A()
//getting alerts "I'm a naive function"/"I'm having a 
//piggyback ride on function A! And the fool doesn't even know it!" 
```

几个小时以来，我一直在尝试破解某些东西，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-25T20:17:53.230

可能不漂亮，但它似乎工作......

```
<script>

function A(x) { alert(x); return x; }
function B() { alert(123); }

function addHook(functionB, functionA, parent)
{
    if (typeof parent == 'undefined')
        parent = window;

    for (var i in parent)
    {
        if (parent[i] === functionA)
        {
            parent[i] = function()
            {
                functionB();
                return functionA.apply(this, arguments)
            }

            break;
        }
    }
}

addHook(B, A);

A(2);

</script> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-25T20:13:44.083

看看[jQuery 的 AOP 插件](http://plugins.jquery.com/project/AOP)。一般来说，谷歌“面向javascript方面的编程”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-10-18T18:05:32.350

非常简单的答案：

```
function someFunction() { alert("Bar!") }
var placeholder=someFunction;
someFunction=function() {
  alert("Foo?");
  placeholder();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-25T21:05:30.357

这个答案不是确定的，而是说明了一种与迄今为止提供的不同的技术。这利用了 Javascript 中的函数是一等对象这一事实，因此，a）您可以将其作为值传递给另一个函数，并且 b）您可以向其添加属性。将这些特征与函数的内置“调用”（或“应用”）方法结合起来，您就有了一个解决方案的开始。

```
var function_itself = function() {
    alert('in function itself');
}
function_itself.PRE_PROCESS = function() {
    alert('in pre_process');
}
function_itself.POST_PROCESS = function() {
    alert('in post_process');
}

var function_processor = function(func) {
    if (func.PRE_PROCESS) {
        func.PRE_PROCESS.call();
    }
    func.call();
    if (func.POST_PROCESS) {
        func.POST_PROCESS.call();
    }        
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-27T05:26:29.837

以下函数将为您提供可以堆叠的前后挂钩。因此，如果您有许多潜在的函数需要在给定函数之前或给定函数之后运行，那么这将是一个可行的解决方案。此解决方案不需要 jQuery 并使用本机数组方法（不需要 shims）。它也应该是上下文敏感的，因此如果您使用上下文调用原始函数，是否应该同样运行每个函数之前和之后的函数。

```
// usage: 
/*
function test(x) {
    alert(x);
}

var htest = hookable(test);

htest.addHook("before", function (x) {
    alert("Before " + x);
})
htest.addHook("after", function (x) {
    alert("After " + x);
})

htest("test") // => Before test ... test ... After test
*/
function hookable(fn) {
    var ifn = fn,
        hooks = {
            before : [],
            after : []
        };

    function hookableFunction() {
        var args = [].slice.call(arguments, 0),
            i = 0,
            fn;
        for (i = 0; !!hooks.before[i]; i += 1) {
            fn = hooks.before[i];
            fn.apply(this, args);
        }
        ifn.apply(this, arguments);
        for (i = 0; !!hooks.after[i]; i++) {
            fn = hooks.after[i];
            fn.apply(this, args);
        }
    }

    hookableFunction.addHook = function (type, fn) {
        if (hooks[type] instanceof Array) {
            hooks[type].push(fn);
        } else {
            throw (function () {
                var e = new Error("Invalid hook type");
                e.expected = Object.keys(hooks);
                e.got = type;
                return e;
            }());
        }
    };

    return hookableFunction;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T20:52:33.563

这就是我所做的，可能在像这样的其他应用程序中很有用：

```
//Setup a hooking object
a={
    hook:function(name,f){
        aion.hooks[name]=f;
    }
}a.hooks={
    //default hooks (also sets the object)
}; 

//Add a hook
a.hook('test',function(){
    alert('test');
});

//Apply each Hook (can be done with for)
$.each(a.hooks,function(index,f){
    f();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-01T17:14:33.717

我不知道这是否有用。您确实需要修改原始函数，但只需要修改一次，并且您不需要继续编辑它来触发钩子

[https://github.com/rcorp/hooker](https://github.com/rcorp/hooker)

# objective-c - 提取 iPhone 数据

> ID：789635
> 
> 赞同：0
> 
> 时间：2009-04-25T20:07:26.797
> 
> 标签：objective-c, iphone

我正在尝试从 iPhone 中提取大约 72000 个 SInt32，但不确定最好的方法是什么。在控制台上使用 printf 或 NSLog 基本上会使我的程序和计算机崩溃。我尝试将 stderr 重定向到一个文件，但我遇到了同样的问题。想知道提取这些数据的最佳方法是什么，以便以后可以在桌面上使用它进行绘图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T20:14:03.490

取决于很多事情。例如，这些数字是什么格式的？您可以对桌面计算机上的 netcat 执行 HTTP POST：

```
NSURL *url = [NSURL URLWithString:@"http://desktop:3000/"];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:…];
NSURLConnection *connection = [[NSURLConnection alloc]
    initWithRequest:request delegate:self];
NSAssert(connection, @"Failed to create connection."); 
```

在桌面上：

```
$ nc -l 3000 
```

你会得到这样的东西：

```
POST / HTTP/1.1
User-Agent: YourApp1.0 CFNetwork/422.15.2 Darwin/9.6.0 (i386) (MacBook4%2C1)
Accept-Language: en-us
Accept-Encoding: gzip, deflate
Content-Type: application/x-www-form-urlencoded
Content-Length: xxx
Connection: keep-alive
Host: 127.0.0.1:3000

//data 
```

# visual-studio - Visual Studio 也是非 .NET 语言的好 IDE 吗？

> ID：789643
> 
> 赞同：1
> 
> 时间：2009-04-25T20:13:46.423
> 
> 标签：visual-studio, vim, emacs, ide

我在 IDE 中遇到了一些麻烦，而且我注意到的并不孤单，但我的许多问题仍然没有找到答案。

我会非常停止使用不同的编辑器并变得非常擅长一个（在 Windows 上），坚持务实的格言：[“学好一个编辑器（ide）”。](http://www.brokenbuild.com/blog/2006/10/24/code-faster-keep-your-hands-on-the-keyboard/) 我愿意付出很多努力，从长远来看。

我已经用 Intellij 和 Eclipse 编程（java），现在正在编程 c#。（VS08 起初对我来说非常令人失望，直到 SOF 提到 Resharper，现在我对它非常满意，特别是因为我开始编写宏以进行进一步调整）

对于所有用途的编辑器，我会想到 VIM 和 EMACS，但我担心它们在 C# 方面无法与 VS08/Resharper 竞争，我现在使用了很多。此外，我不清楚他们是否支持重构（在为相关语言安装软件包之后？）

但是由于 VS08/Resharper 对于 c# 来说非常强大，我想给 VS 一个认真的机会。但为此，它应该支持不编译为 CIL 的语言。

因此我的问题是：Visual Studio 是非 .NET 语言的好工具吗？

（就像旁边问的那样：在 VIM/EMACS 中重构怎么样？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T21:00:26.793

VS 是 IMO，比普通编辑器更好，但不是你不能没有的东西。

如果您希望编辑器像记事本一样快速打开并具有大量功能，请尝试使用 EditPlus（在不利方面它使用较旧的 RegExp 实现，但在有利方面它可以使其可移植。

如果您想要完全可扩展性、快速启动、创新功能、集成存储等。请尝试 E-Editor，Mac TextMate 的 windows 端口。

VIM 非常棒，但是……长的学习曲线可能是个问题，有些人在 2 模式编辑器中找不到自己。

关于 Resharper...嗯...几乎所有它的非代码分析功能都可以集成在提到的编辑器中。对于它的暗示性功能，我怀疑是否有其他选择。我暂时禁用了它，因为我倾向于让 Resharper 填补我的漏洞，所以它可以是一把双刃剑 - 儿子或后者我将完全停止思考一些事情，例如，这个变量可以为空还是我可以移动它的声明。一旦我完成了一些工作程序或最后润色代码，我就会运行 resharper。

我个人将 EditPlus 用于所有非 MS 语言，但最近 E-Editor 引起了我的注意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T22:51:41.253

我倾向于避免在设计语言之外使用 IDE。专用 IDE 可以包括开箱即用的类库、函数引用、代码完成实用程序等。

然而，一旦你跨出这一步，你就会拥有一个笨重且资源匮乏的文本编辑器。在这种情况下，您不妨使用文本编辑器来保持您的工作站灵活。

It might be better not to learn one IDE well, but rather a text editor. I've used jEdit for years for several reasons: It's multiplatform, includes syntax highlighting for lots of languages, and can be feature-extended with plugins. It's become one of my standard tools, but it's only one in the box.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T20:20:47.513

VS的VI模式怎么样？我认为 Eclipse 也有一个。

您只需学习与 vi 相关的命令，但能够使用 C#（使用 VS）、Java（使用 Eclipse）、C++（使用 VS 或 Eclipse）、脚本语言（使用 vi）、...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-25T21:42:56.413

“我会非常停止使用不同的编辑器并变得非常擅长（在 Windows 上），”

为什么？

”秉承务实的格言：“学好一个编辑器（ide）”。“真的吗？这如何务实？

在这个行业工作了 30 年后，我学到的教训是“工具来来去去”。

曾几何时，我们为 vi*与*emacs 发生了激烈的争吵。不是`vim`语法着色，而是黑白显示器上的纯文本 vi。

为什么要将您的世界缩小到一种工具？如果您的工具不是最先进的，您将如何应对创新？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-25T20:16:22.690

就 C/C++ 而言，Visual Studio 被认为是黄金标准（好吧，如果你真的想具体一点，Visual Studio + VAX）。它并不完美，当然也没有它所拥有的 C# 工具那么好，但它仍然比任何平台上的其他任何东西都要好。（假设您不想要 C99 支持。）

当然，除了这两个之外，它并没有真正做非.NET。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-25T23:21:52.570

I think that there is good specialization at the moment. VS is the clear candidate for .Net, with Resharper and DevExpress as great augmentation for increased productivity.

Currently we use Aptana for the "Web 2.0" stuff - CSS/jQuery/MooTools, and that has been a great environment as well. I have avoided the Intellisense in VS 08 for jQuery and do prototyping in HTML/CSS/JS in Apatana, then do all the Domain design in VS. Works for us pretty well.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-25T20:48:35.480

它对 C/C++ 有好处，但与 C# 或 VB.Net 无法相比（我认为它不支持其他语言）

对于 javascript intelisense 仍然有限

# asp.net - SQL Server 控制台，类似于 ASP.NET 的控件

> ID：789644
> 
> 赞同：1
> 
> 时间：2009-04-25T20:13:47.173
> 
> 标签：asp.net, sql-server, deployment

我正在部署一个网站，我需要在生产服务器中运行包含在单个文件中的大型 TSQL 脚本，在该服务器中我没有对 SQL Server 控制台的完全访问权限，也无法远程连接。这些脚本是表、存储过程和视图创建的混合体。我所能做的就是运行 1 组 TSQL 语句，就像存储过程的语句一样。

我有两个选择：手动解析文件以查找 GO 的句子并在 GO 之前运行每个句子块，或者使用工具执行相同的任务。使用工具我会很快完成任务，但我不知道这样的工具。

你知道我可以使用的任何工具吗？

我认为它必须是类似于控件的东西，带有一个编辑器，我将在其中粘贴或加载要运行的脚本，并且它能够按顺序解析和运行它们，就像 Microsoft SQL Server Management 通常所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T21:27:34.327

您可以查看有关该主题的 CodeProject 上的一些文章，并可能使用其中一种工具/组件来满足您的需求？

*   [用于 ASP.NET 和 SQL Server 的通用数据库管理员（重新加载）](http://www.codeproject.com/KB/database/dbadmin.aspx)
*   [ASP.NET 数据库管理控制](http://www.codeproject.com/KB/custom-controls/ASPNETDBAdminControl.aspx)
*   [Web SQL 实用程序](http://www.codeproject.com/KB/database/WebSqlUtility.aspx)

其中大多数都带有完整的源代码，也可以作为您自己的自定义版本的起点。

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-26T08:02:46.530

你有很多选择

*   通常我在 sql management studio 中创建存储过程，然后将其保存为字符串，然后使用 linq2sql 执行存储过程，效果很好。

*   使用 sql server smo 对象，你可以在其中真正做很多事情，比如创建数据库、表，这真的很酷，我在我的网站上创建了 1 个页面并使用它来更新数据库。这是一个很好的链接 [http://www.sqldbtips.com/showarticle.asp?ID=34](http://www.sqldbatips.com/showarticle.asp?ID=34)

*   您可以使用 Redgate SQL 数据比较和比较。他们真的很喜欢同步数据库，它为我节省了很多时间，而且超级简单，真的强烈推荐。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T21:29:45.913

如果这些都不起作用，那么自己编写这样的工具非常容易。只需使用 Regex.Split 拆分 GO 行上的文本，然后循环，为每个部分调用 ExecuteNonQuery。

# c# - 调试内存不足异常

> ID：789647
> 
> 赞同：5
> 
> 时间：2009-04-25T20:15:09.807
> 
> 标签：c#, .net, asp.net, debugging

在我制作的一个小型 ASP.NET/C# Web 应用程序的错误修复中，我遇到了 OutOfMemoryException。

没有关于在哪里查看的提示，因为这是一个编译时错误。如何诊断此异常？我假设这正是内存分析发挥作用的地方？有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-12-29T09:14:39.287

您应该在 OutOfMemoryException 发生的时间点对程序进行内存转储，并分析占用这么多内存的原因。

Tess Ferrandez在她的博客上有一个[很棒的 How-To 系列。](http://blogs.msdn.com/tess/archive/2008/02/15/net-debugging-demos-lab-3-memory.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T20:35:24.857

我可以在这里建议两件事：

1）也许你的机器内存不足。[在http://digioz.blogspot.com/2008/11/visual-studio-systemoutofmemory.html](http://digioz.blogspot.com/2008/11/visual-studio-systemoutofmemory.html)上查看一些想法

2) 尝试使用 VS 命令行实用程序在 Visual Studio 之外编译项目并运行 msbuild "SolutionfileName.sln"。那你的它还崩溃吗？

希望有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T03:02:40.380

我希望您的意思是运行时错误，而不是编译时错误。

如果您有一个不断增长的列表，通常会发生这种情况，该列表保存在静态字段或系统范围的 ASP.NET 容器中。

您可以在探查器中运行应用程序，例如：

[红门蚂蚁剖析仪](http://www.red-gate.com/products/ants_profiler/index.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T11:01:02.420

上面很抱歉，但对我来说已经发生了 3 次以上 - Redgate 破坏了 VS 或整个 Windows ...试试这种[方法](http://support.microsoft.com/kb/306355)。我怀疑你的问题的根本原因是弱调试，检查[log4net](http://logging.apache.org/log4net/download.html)。也很简单 if ( DebuggingFlag == true ) Response.Write ( "DebugMsg" )

听起来很简单和荒谬可能很有用......

# .net - 简单的数据——我只需要简单的分析方法

> ID：789648
> 
> 赞同：0
> 
> 时间：2009-04-25T20:15:22.240
> 
> 标签：.net, asp.net, database, reporting, analysis

## 概括

我正在寻求一些关于使用 SQL Server 和 .net 分析简单数据的最简单方法的建议

## 细节

非常简单的数据——只需要非常简单的方法来分析（用我简单的大脑）

我有一个 SQL Server 表：

*   PKID（整数）
*   应用程序名称 (VarChar)
*   方法名 (VarChar)
*   TimeInMs (整数)
*   附加信息 (VarChar)
*   日期时间（日期时间）

该表记录了各种方法在各种应用程序中运行所花费的时间长度。该表可能有数万行。我想轻松地从中提取有用的信息（其中一些是实时的）。我不确定解决此问题的最佳方法。我想要的这种数据是：

数据 - 方法调用的平均时间长度 - 前十个最慢的方法调用 - 前十个最快的方法调用

对于以下时间段： - 最后一分钟、一小时、一天、一周、一个月 - 过去 7 天的每一天，过去 10 周的每周

对于应用程序： - 全部 - 每个单独

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T20:17:53.183

如果不添加时间戳信息，您将无法进行有意义的分析。充其量您可以创建查询以汇总有关应用程序性能的统计信息。

```
select count(*) from table_name where ApplicationName = "BAR.EXE";

select sum(TimeInMs) from table_name group by ApplicationName; 
```

除了编写代码来划分这些数字之外，您不能做太多事情。

**更新**：使用时间戳信息，您可以调整上述示例的 where 子句以选择您感兴趣的范围。鉴于您的问题的不准确性质，我可能建议将数据导入 Excel（我没有安装 Excel）并按摩以各种方式获取数据，而不是直接使用 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T21:28:09.957

我认为 ojblass 指的是您从问题中省略的 DataTime 字段。

MS SQL Server 中的实际时间戳数据类型在名称上具有误导性。它与日期和时间无关。它是一个二进制“版本号”。它主要用于在更新表中的行时处理并发问题，但对于任何分析任务都无用。

我建议稍微改进一下你的列名。调用列“DateTime”会令人困惑，如果您不小心，可能会在编写查询时遇到一些麻烦。

无论如何...如果直接用 TSQL 编写，您正在寻找的查询范围从简单到相当复杂。

以下是一些示例（我没有对这些进行语法检查，因此它们充其量是“近似的”）：

特定方法的平均时间

```
select avg(TimeInMs) as AvgTime from Table 
where ApplicaitonName = @ApplicationName 
```

过去 1 分钟内特定方法的平均时间

```
select avg(TimeInMs) as AvgTime from Table 
where ApplicaitonName = @ApplicationName and 
    [DateTime] >= DATEADD(minute, -1, getdate()) 
```

您最终会想要为其中的大多数编写存储过程。你谈论的一些查询也需要一些分组等等……如果你走这条路，我建议你买一本关于 TSQL 的书。

如果您在应用程序中使用 LINQ to SQL 执行此操作，则没有太大不同，但通常 LINQ 更容易编写（当然值得商榷）。

这是在 C# 中使用 LINQ to SQL 的相同的两个查询（同样，我没有测试这些，所以我可能是轻微的语法错误）。

```
var ctx = new MyDataContext();
var q = (from item in ctx.Table
        where item.ApplicationName == "MyApplication"
        select item.TimeInMs).Average();

var ctx = new MyDataContext();
var q = (from item in ctx.Table
        where item.ApplicationName == "MyApplication" &&
              item.DateTime <= DateTime.Now.AddMinutes(-1)
        select new item.TimeInMs).Average(); 
```

您如何进行分析取决于您使用的技术以及您对结果的处理方式。

**更新：** 回答评论中的后续问题：

我想不出一种好的方法来处理它，方法是将所需的时间间隔存储在另一个不会变得非常困难的表中（游标和通过 Execture 命令动态构建的 TSQL）。

获得您想要的结果的更简单的查询在 TSQL 中可能看起来像这样（我并不主张这是“最好的”方式，但它可以工作并且非常快）。

```
select avg(TimeInMs) as AvgTime, 'Last 1 minute' as TimePeriod from Table 
where ApplicaitonName = @ApplicationName and 
    [DateTime] >= DATEADD(minute, -1, getdate())
union
select avg(TimeInMs) as AvgTime, 'Last 2 minutes' as TimePeriod from Table 
where ApplicaitonName = @ApplicationName and 
    [DateTime] >= DATEADD(minute, -2, getdate())
-- //repeat union as many times as needed for each time period 
```

# c# - C#：将字符串格式的 UInt16 转换为整数（十进制）

> ID：789650
> 
> 赞同：1
> 
> 时间：2009-04-25T20:16:35.200
> 
> 标签：c#

这就是问题所在。

例如，我有一个字符串“2500”。它从字节数组转换为字符串。我必须将其转换为十进制（int）。

这是我应该得到的：

```
string : "2500"
byte[] : {0x25, 0x00}
UInt16 : 0x0025 //note its reversed
int    : 43     //decimal of 0x0025 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T20:23:35.900

从十六进制字符串转换为 UInt16 是`UInt16.Parse(s, NumberStyles.AllowHexSpecifier)`.

不过，您需要编写一些代码来执行“两位数块的反转”。如果您可以控制从字节数组生成字符串的代码，那么一种方便的方法是反向构建字符串，例如通过从长度 - 1*向下*遍历数组到 0 而不是正常向上的方向. 或者，假设您知道它恰好是一个 4 个字符的字符串，`s = s.Substring(2, 2) + s.Substring(0, 2)`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T20:34:50.367

[使用Convert.ToUInt16](http://msdn.microsoft.com/en-us/library/8444cfyw.aspx)明确指定您想要的基础可能会更好。

[然后，您可以使用IPAddress.HostToNetworkOrder](http://msdn.microsoft.com/en-us/library/ht0w88zx.aspx)翻转它（尽管您必须将其转换为 int16，然后将结果转换回 uint16。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T21:04:01.543

有一个特殊的转换类：Convert to convert from string to uint16 使用以下方法：Convert.ToUInt16

int.parse 和 Convert.ToInt32 的区别在[此](http://anuviswan.blogspot.com/2006/03/intparse-vs-converttoint32.html)页面中进行了说明

以及 Convert.ToUInt16 的 msdn[站点](http://msdn.microsoft.com/en-us/library/system.convert.touint16.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T21:06:17.827

假设您的字符串始终为 4 位数字。您可以使用一个字符串变量，但我使用多个字符串变量以提高可读性。

```
string originalValue = "2500";
string reverseValue = originalValue.Substring(2, 2) + originalValue.Substring(0, 2);
string hexValue = Convert.ToUInt16(reverseValue, 16).ToString();
int result = Convert.ToInt32(hexValue, 10); 
```

# c++ - 我的 KD-Tree 出了什么问题？(K=2)

> ID：789656
> 
> 赞同：1
> 
> 时间：2009-04-25T20:19:16.643
> 
> 标签：c++, algorithm, data-structures

更具体地说，我最近的邻居搜索有问题。我已经确认树是正确构建的，并且所有辅助函数都按预期工作。

请注意，这与标准 KD 树略有不同，因为我正在寻找最接近的 3 个点。

```
struct Node
{
unsigned int axis;
Point* obj;

struct Node* left;
struct Node* right;
};

void _findClosest(struct Node* current, Point* to, Point** first, Point** second, Point** third, unsigned int depth)
{
if(current == NULL) return;

if(current->left == NULL && current->right == NULL)
{
            //_setOrder updates first, second, and third so that they point to
            //objects that are closest to "to", given an object and the current
            //current first, second, and third.
    _setOrder(to, current->obj, first, second, third);
    return;
}

unsigned int axis = depth % 2;
struct Node* other = NULL;

if(to->getValue(axis) < current->obj->getValue(axis))
{
    other = current->right;
    _findClosest(current->left, to, first, second, third, depth+1);
}
else
{
    other = current->left;
    _findClosest(current->right, to, first, second, third, depth+1);
}

_setOrder(to, current->obj, first, second, third);

if(other == NULL) return;

double searchToBest = _largestDistance(to, *first, *second, *third);
double searchToSplit = _distance(to, current->obj, current->axis);

    //This branch is ALWAYS taken, so this devolves into an O(n) search
if(searchToBest >= searchToSplit)
{
    _findClosest(other, to, first, second, third, depth+1);
}
} 
```

我想我只是以某种方式误解了数据结构/算法。

次要细节：
-如果在 NULL 对象上调用距离函数，它们返回 std::numberic_limits::max()
-这在 KD-tree 的根上调用，深度为 0，*first = *second = *third = NULL
-axis = 0 对应 X，axis = 1 对应 Y

The problem is that every node is visited, rather than seeing the expected reductions from exploiting tree properties. Whatever the flaw is, it makes this a O(n) search.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T19:16:23.383

This line is wrong:

double searchToSplit = _distance(to, current->obj, current->axis);

You want axis, not current->axis.

# java - Java 开发人员学习 C++ 的最佳方法是什么

> ID：789659
> 
> 赞同：41
> 
> 时间：2009-04-25T20:21:18.107
> 
> 标签：java, c++

我认为自己是一位经验丰富的 Java 开发人员，并计划开始学习 C++。

如果您有同样的经历，即在 Java 之后学习 C++，我想听听您对这样做的最佳方法的看法。

[更新]“最佳方法”没有得到很好的量化。我正在寻找的是利用我现有的 Java 知识和编程经验，以便我可以快速提升 C++。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-25T20:32:53.570

我已经向 Java 人教过 C++，尽管我是从另一个方向学习他们的。

你对 C 满意吗？如果没有，请阅读[Kernighan 和 Ritchie](https://rads.stackoverflow.com/amzn/click/com/0131103628)。 *C++ 的许多*特性都可以通过希望 C++ 成为具有 C 基本表达式语法的“更好的 C”来解释。

你应该得到[Stroustrup](https://rads.stackoverflow.com/amzn/click/com/0201889544)。

我认为Bruce Eckels的[Thinking in C++很好。](http://www.mindview.net/Books/TICPP/ThinkingInCPP2e.html)

我使用过 Cline、Lomow 和 Girou[的 The C++ FAQ Book ；](https://rads.stackoverflow.com/amzn/click/com/0201309831)我经常提到它。Marshall Cline[在他的网站上也有 C++ FAQ 内容](http://www.parashift.com/c++-faq-lite/index.html)。

### 更新

您还可以查看[C++ for Java Programmers](https://rads.stackoverflow.com/amzn/click/com/013919424X)。我不知道这本书，但它看起来不错。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-25T23:31:37.803

我的建议是编写高度**基于指针的东西**，比如链表库、BST 库等。代码应该是无 STL 的，类似于纯 C。你应该使用这样的库构建应用程序（例如排序算法？）并学习如何处理肯定会出现的所有陷阱，如果这是您的第一个 C/C++ 代码。

在我看来，了解 C++ 最重要的基础是了解类和结构的指针和低级内存表示。这就像一个启蒙，之后一切都变得简单明了；）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-25T20:25:02.387

我将从 Scott Meyers 的 Effective C++ 和 More Effective C++ 开始。这两本书介绍了一些非常好的 C++ 最佳实践。

[http://www.aristeia.com/books.html](http://www.aristeia.com/books.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-26T08:43:35.840

其他人已经指定了所需的书籍。我想补充几点需要注意：（因为背景是java）

*   C++ 不为您提供垃圾收集（如在 Java 中）。因此，您必须非常注意内存泄漏。始终使用`delete`在堆上分配的内存使用`new`. 在编写 C++ 应用程序时，请尝试记住 FAQ 中的[Free-Store 管理](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html)。
*   大多数情况下，在 C++ 中，您可能必须使用指针（在 Java 中缺失）。有效地学习指针（@Charlie Martin 建议的书籍）并使用它们。
*   您熟悉 C++，学习 STL 的基础知识并有效使用。（由[Josuttis](http://www.josuttis.com/libbook/) 和[Scott Meyers](https://rads.stackoverflow.com/amzn/click/com/0201749629)撰写的书）

祝你好运。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-26T08:52:03.043

我强烈反对先学习 C，然后尝试从有效的书籍中学习 C++，尽管它们非常出色。相反，请获取 Andrew Koenig 和 Barabra Moo 的[Accelerated C++](http://www.acceleratedcpp.com/)的副本- 这是由两个原始 C++ 开发小组编写的，将教您如何使用现代 C++ 功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-08-02T02:00:31.933

Mark Allen Weiss 的“C++ for Java Programmers”是一本适合经验丰富的 Java 程序员的入门书籍。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-26T09:11:16.290

[K&R](https://rads.stackoverflow.com/amzn/click/com/0131103628)和[Stroustrup](https://rads.stackoverflow.com/amzn/click/com/0321563840)是经典，最终你应该得到它们，但我认为它们对于 C++ 初学者来说不是很好的介绍。现代 C++ 中的思考是在类、模板、异常和流中思考，这些在 C 语言中都没有。

我会推荐一本大学水平的 C++ 教科书，比如[Deitel 和 Deitel](https://rads.stackoverflow.com/amzn/click/com/0136152503)。 [![替代文字](https://i.stack.imgur.com/Ss9GG.jpg)](https://i.stack.imgur.com/Ss9GG.jpg)

玩完之后，你应该专注于学习编写一个行为类似于内置类的类。这意味着提供一个复制构造函数、`operator=`、`operator==`、`operator<<`等。在此过程中，您将遇到嵌入在 C++ 语言中的各种概念。一旦您对基础知识感到满意，我会同意其他人关于[有效 C++](https://rads.stackoverflow.com/amzn/click/com/0201924889)是必读的内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-25T23:48:16.517

这听起来有点好笑，但您要求的是*最好*的方法，而不是最快的方法。我建议您**先学习 C**，然后再学习 C++。 [Kernighan and Ritchie](http://cm.bell-labs.com/cm/cs/cbook/)是有史以来最好的语言书籍之一。当您了解 C 和 Java 时，您将能够在 C++ 的一个合理子集中编写好的、清晰的程序，几乎不需要额外的努力。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-25T20:48:34.513

Andy 和 Charlie 已经给了你这些书，所以我将指出[boost](http://www.boost.org/)库和[Qt](http://www.qtsoftware.com/products/)框架。

Boost 为您提供了一些基本功能，因此您无需从头开始创建所有内容。

Qt，您可能知道，是一个 GUI 框架，我觉得使用起来非常愉快。有一本书名为“C++ GUI Programming With Qt 4”，涵盖了学习 Qt 的所有重要主题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-11-12T00:29:44.243

学习[Qt](http://qt.nokia.com/)。相信我；我既是 Java 又是 C++ 开发人员；我可以告诉你 Qt 使 C++ 语言更接近于 Java。不要只学习简单的 C++。

带有 Qt 的 C++ 让您的工作效率无限提高。我曾经结合了这么多不同的库（Boost、Intel、数据库连接器等），只是为了实现我们所做的那种东西（高性能/实时计算）。最后，我发现我需要的 80% 以上已经包含在 Qt 中了。

更不用说，imo，Qt 在我工作过的任何框架/库上都有最好的文档，这使得自己学习一切变得*非常*容易。

试试看，自己看看。

免责声明：我只是一名开发人员——我不为诺基亚工作。=p

# visual-studio-2008 - 从 IDE 发布在经典模式下删除 IIS7 中的通配符映射

> ID：789660
> 
> 赞同：0
> 
> 时间：2009-04-25T20:21:20.697
> 
> 标签：visual-studio-2008, iis-7, publish

我有一个以经典模式部署到 IIS 7.0 服务器的 ASP.Net 应用程序。

我使用 Visual Studio IDE 的发布功能。每次我执行发布时，都会删除通配符映射。有人知道如何防止这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-11-30T20:37:05.520

通配符映射存储在应用程序的 web.config 中。您可以创建映射，然后将该部分从 system.webServer->handlers 部分复制到您的 dev web.config 中。

或者，您可以使用 Web.Deploy 项目来完全按照部署所需的方式设置 web.config。

# asp-classic - 没有线索.. 溢出，Microsoft VBScript 运行时错误 '800a0006'

> ID：789663
> 
> 赞同：4
> 
> 时间：2009-04-25T20:22:42.890
> 
> 标签：asp-classic, vbscript, iis-6, windows-server-2003

我在 Win2003 服务器 Web 应用程序上突然收到此错误：

Microsoft VBScript 运行时错误“800a0006”

溢出：'应用程序名称'

在此服务器上执行了一堆更新，但我已将它们全部回滚。

该页面是旧的 ASP 代码，如果我运行文件监视器实用程序，它会在遇到 GIF 时显示缓冲区溢出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-25T20:27:30.180

`Microsoft VBScript runtime error '800a0006'`几乎总是表示除以零错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-29T22:59:52.933

您可以像这样重现`Overflow`错误：

```
Dim testVar
testVar = 99999
testVar = CInt(testVar) 
```

那么，也许这表明您在该文件上设置一些变量的数据类型存在一些问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T15:06:28.540

您能找出错误发生在文件中的哪个位置吗？您可以使用

Response.Write “这里” Response.End

然后加载页面以查看它到达的位置。然后您可以发布崩溃的代码，我们也许可以为您提供更多帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-04T04:59:23.430

您可能有一个带有超出范围变量的函数如果您使用整数变量并且变量拥有大于整数范围，那么它会显示错误。

**解释：**

```
Dim IntVar AS Integer
IntVar = 50000 
```

然后它必须显示溢出错误

所以你可以使用下面的代码而不是给定的代码

```
Dim LongVar As Long
longVar = 50000 
```

# python - 在桌面上部署 Django 应用程序有哪些成功的方法？

> ID：789673
> 
> 赞同：4
> 
> 时间：2009-04-25T20:30:08.490
> 
> 标签：python, django, web-applications

我有一个想要部署到桌面的 Django 应用程序。我对此进行了一些阅读，发现一种方法是使用[freeze](http://cx-freeze.sourceforge.net/)。我过去曾在 Python 应用程序中使用过这种方法并取得了不同程度的成功，但我不相信它是 Django 应用程序的最佳方法。

我的问题是：您使用了哪些成功的方法来部署 Django 应用程序？有事实上的标准方法吗？你有没有遇到任何死胡同？我需要一个跨平台的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-17T05:57:08.953

几年前我为一个作为本地守护进程运行的 Django 应用程序做了这个。它由 Twisted 推出并由 py2app for Mac 和 py2exe for Windows 包装。有一个浏览器和一个 Air 前端击中它。它在大多数情况下工作得很好，但我没能在野外部署它，因为更大的项目被推迟了。已经有一段时间了，我对细节有点生疏，但这里有一些提示：

*   IIRC，最有问题的是 Python 加载 C 扩展。我有一个用 C“asm”命令编写的 Intel 汇编器模块，我需要加载它以获取低级系统数据。这需要一段时间才能跨两个平台工作。如果可以，尽量避免 C 扩展。

*   你肯定需要一个安装程序。该应用程序很可能最终会在后台运行，因此您需要将其标记为 Windows 服务、Unix 守护程序或 Mac 启动的应用程序。

*   在您的安装程序中，您需要提供一种定位免费本地 TCP 端口的方法。您可能需要编写一个安装程序运行的小存根例程，或使用安装程序的内置脚本工具来查找尚未使用的端口并将其保存到配置文件中。然后，您将配置文件加载到您的 settings.py 以及您要部署的任何前端。那是共享端口。或者您可以只选择一个随机数，并希望桌面上的其他服务不会影响您的脚趾:-)

*   如果您的前端和后端是独立的应用程序，那么您需要设计一个 API 让它们相互通信。确保您提供一个标志以以原始和人类可读的形式返回数据。它确实有助于调试。

*   如果您希望 Django 能够向用户发送通知，您将需要与 Growl 之类的东西集成或获取 Python for Windows 扩展，以便您可以调出 toaster 弹出通知。

*   您可能希望坚持使用 SQLite 用于数据库，在这种情况下，您需要确保使用信号量来处理争夺数据库（或任何其他共享资源）的多个请求。如果您的应用程序是通过浏览器访问的，则用户可以打开多个窗口并同时点击该应用程序。如果使用自定义前端（本机、Air 等），那么您可以控制在给定时间运行的实例数量，这样就不会有太大问题。

*   您还需要某种对本地系统日志记录工具的访问权限，因为该应用程序将在后台运行，并确保您捕获所有异常并将其路由到系统日志中。调试 Windows 服务启动问题是个大麻烦。如果没有系统日志记录，这将是不可能的。

*   如果您想保持跨平台，请注意硬编码路径。您可能不得不依靠安装程序来编写一个配置文件条目，其中包含您必须在启动时加载的实际安装路径。

*   测试实际部署，尤其是跨各种防火墙。一些桌面防火墙非常积极地阻止访问接受传入请求的网络服务。

这就是我能想到的。希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-17T03:28:33.403

如果你想要一个好的解决方案，你应该放弃让它跨平台。您的代码都应该是可移植的，但您的部署（几乎按照定义）需要特定于平台。

我建议[`py2exe`](http://py2exe.org/)在 Windows、[`py2app`](http://pypi.python.org/pypi/py2app/)MacOS X 上使用，并`deb`为 Ubuntu 构建软件包，并[`.desktop`](http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html)在软件包的正确位置放置一个文件，以便在用户菜单中显示一个条目。不幸的是，对于最后一个选项，没有方便的“py2deb”或“py2xdg”，但手动制作相关的文本文件非常容易。

当然，我建议将[Twisted 捆绑为您的 Web 服务器](http://blog.dreid.org/2009/03/twisted-django-it-wont-burn-down-your.html)，以使应用程序易于自包含:)。

# javascript - 如何在Javascript中将类对象的名称作为字符串获取？

> ID：789675
> 
> 赞同：40
> 
> 时间：2009-04-25T20:31:09.207
> 
> 标签：javascript, class

假设我用 Javascript 实例化一个对象，如下所示：

```
var myObj = new someObject(); 
```

现在，是否可以`'myObj'`从类方法之一中获取 var 对象的名称作为字符串？

* * *

### 其他详细信息（已编辑）：

我想获取持有对象引用的变量名称的原因是我的 new会在需要调用函数的页面上`myObj`创建一个新的可点击。当我插入新的时，我需要知道持有对该对象的引用的变量的名称。有没有更好的方法来做到这一点？`DIV``myObj.someFunction()``DIV`

* * *

你是对的，抱歉术语混淆。

我想获取持有对象引用的变量名称的原因是我的新 myObj 将在需要调用函数 myObj.someFunction() 的页面上创建一个新的可点击 DIV。当我插入新的 DIV 时，我需要知道持有对该对象的引用的变量的名称。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-04-25T21:04:12.760

Shog9 是对的，因为一个对象可以被多个变量引用，所以问这个问题没有多大意义。如果您并不真正关心这一点，而您只想找到引用该对象的全局变量之一的名称，则可以执行以下 hack：

```
function myClass() { 
  this.myName = function () { 
    // search through the global object for a name that resolves to this object
    for (var name in this.global) 
      if (this.global[name] == this) 
        return name 
  } 
}
// store the global object, which can be referred to as this at the top level, in a
// property on our prototype, so we can refer to it in our object's methods
myClass.prototype.global = this
// create a global variable referring to an object
var myVar = new myClass()
myVar.myName() // returns "myVar" 
```

请注意，这是一个丑陋的 hack，不应在生产代码中使用。如果有多个变量引用一个对象，您将无法确定您将获得哪一个。它只会搜索全局变量，因此如果变量是函数的本地变量，它将不起作用。一般来说，如果你需要命名一些东西，你应该在创建它的时候把名字传递给构造函数。

**编辑**：为了回应您的说明，如果您需要能够从事件处理程序中引用某些内容，则不应按名称引用它，而应添加一个直接引用该对象的函数。这是我创建的一个快速示例，它显示了与您尝试执行的操作类似的内容：

```
function myConstructor () {
  this.count = 0
  this.clickme = function () {
    this.count += 1
    alert(this.count)
  }

  var newDiv = document.createElement("div")
  var contents = document.createTextNode("Click me!")

  // This is the crucial part. We don't construct an onclick handler by creating a
  // string, but instead we pass in a function that does what we want. In order to
  // refer to the object, we can't use this directly (since that will refer to the 
  // div when running event handler), but we create an anonymous function with an 
  // argument and pass this in as that argument.
  newDiv.onclick = (function (obj) { 
    return function () {
      obj.clickme()
    }
  })(this)

  newDiv.appendChild(contents)
  document.getElementById("frobnozzle").appendChild(newDiv)

}
window.onload = function () {
  var myVar = new myConstructor()
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-04-25T20:39:56.220

**简短的回答：**不。 my​​Obj 不是对象的名称，它是持有对该对象的引用的变量的名称 - 您可以拥有任意数量的其他变量持有对同一对象的引用。

现在，如果它是你的程序，那么你制定规则：如果你想说任何给定的对象将永远只被一个变量引用，并且在你的代码中努力执行它，那么只需在对象上设置一个属性变量的名称。

也就是说，我怀疑你所要求的实际上是你真正想要的。也许更详细地描述你的问题......？

* * *

**Pedantry：** JavaScript 没有类。`someObject`是一个构造函数。给定一个对象的引用，您可以使用[构造函数属性](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Object/constructor)获得对创建它的函数的引用。

* * *

### 针对您提供的其他详细信息：

您正在寻找的答案可以在这里找到：[JavaScript Callback Scope](https://stackoverflow.com/questions/183214/javascript-callback-scope)（以及对 SO 上的许多其他问题的回应——对于那些刚接触 JS 的人来说，这是一个常见的混淆点）。您只需要将对对象成员的调用包装在一个保留对上下文对象的访问的闭包中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-26T01:22:12.343

您可以使用*.toString()*将构造函数转换为字符串：

```
function getObjectClass(obj){
   if (typeof obj != "object" || obj === null) return false;
   else return /(\w+)\(/.exec(obj.constructor.toString())[1];} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-01-19T10:23:19.683

您可以通过在函数中使用它来实现您的目标，然后使用以下命令检查函数的源代码`toString()`：

```
var whatsMyName;

  // Just do something with the whatsMyName variable, no matter what
function func() {var v = whatsMyName;}

// Now that we're using whatsMyName in a function, we could get the source code of the function as a string:
var source = func.toString();

// Then extract the variable name from the function source:
var result = /var v = (.[^;]*)/.exec(source);

alert(result[1]); // Should alert 'whatsMyName'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-05-12T21:06:53.443

`this`作为一个更基本的情况，如果有一个属性可以引用它的引用变量（`heads`或） ，那就太好了，`tails`但不幸的是它只引用了新`coinSide`对象的实例化。

```
javascript:  /* it would be nice but ... a solution NOT! */
function coinSide(){this.ref=this};
/* can .ref be set so as to identify it's referring variable? (heads or tails) */
heads = new coinSide();
tails = new coinSide();
toss = Math.random()<0.5 ? heads : tails;
alert(toss.ref);
alert(["FF's Gecko engine shows:\n\ntoss.toSource()  is  ", toss.toSource()]) 
```

总是显示

> ```
> [object Object] 
> ```

和 Firefox 的 Gecko 引擎显示：

> ```
> toss.toSource()  is  ,#1={ref:#1#} 
> ```

当然，在这个例子中，要解决`#1`，因此，测试和`toss`很简单。这个问题实际上是在询问 javascript 是否有机制，引发了对对应方的考虑，是否有机制来确定变量的 ACTUAL 值？该示例表明 和 的“值”是相同的，但是。`toss==heads``toss==tails``call-by-name``call-by-value``heads``tails``alert(heads==tails)``false`

自引用可以被强制如下：（
避免对象空间搜索和可能的歧义，如[如何在 Javascript 中将类对象的名称作为字符串获取？](https://stackoverflow.com/questions/789675/how-to-get-class-objects-name-as-a-string-in-javascript/789720#789720)解决方案中所述）

```
javascript:
function assign(n,v){ eval( n +"="+ v ); eval( n +".ref='"+ n +"'" ) }
function coinSide(){};
assign("heads", "new coinSide()");
assign("tails", "new coinSide()");
toss = Math.random()<0.5 ? heads : tails;
alert(toss.ref); 
```

显示`heads`或`tails`。

作为一种解释型原型功能语言，拥有原语等功能，这可能是对 Javascript 语言设计本质的一种诅咒。

最后的考虑：

```
 javascript:
     item=new Object(); refName="item"; deferAgain="refName";
     alert([deferAgain,eval(deferAgain),eval(eval(deferAgain))].join('\n')); 
```

所以，按照规定...

```
javascript:
  function bindDIV(objName){ 
    return eval( objName +'=new someObject("'+objName+'")' )
  };
  function someObject(objName){
    this.div="\n<DIV onclick='window.opener."+   /* window.opener - hiccup!! */
               objName+
             ".someFunction()'>clickable DIV</DIV>\n";
    this.someFunction=function(){alert(['my variable object name is ',objName])}
  };
  with(window.open('','test').document){         /*     see above hiccup    */
    write('<html>'+
      bindDIV('DIVobj1').div+
      bindDIV('DIV2').div+
      (alias=bindDIV('multiply')).div+
      'an aliased DIV clone'+multiply.div+
      '</html>');
    close();
  };
  void (0); 
```

> 有没有更好的办法 ... ？

“更好”更容易？更容易编程？更容易理解？更容易执行更快？还是像“ *......现在完全不同的东西*”一样？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-07-11T19:54:33.213

如果您不想像 Brian 的回答那样使用函数构造函数，则可以使用 Object.create() 代替：-

```
var myVar = {
count: 0
}

myVar.init = function(n) {
    this.count = n
    this.newDiv()
}

myVar.newDiv = function() {
    var newDiv = document.createElement("div")
    var contents = document.createTextNode("Click me!")
    var func = myVar.func(this)
    newDiv.addEventListener ? 
        newDiv.addEventListener('click', func, false) : 
        newDiv.attachEvent('onclick', func)
    newDiv.appendChild(contents)
    document.getElementsByTagName("body")[0].appendChild(newDiv)
}

myVar.func = function (thys) {
   return function() {
      thys.clickme()
   }
} 

myVar.clickme = function () {
   this.count += 1
   alert(this.count)
}

myVar.init(2)

var myVar1 = Object.create(myVar)
myVar1.init(55) 

var myVar2 = Object.create(myVar)
myVar2.init(150) 

// etc 
```

奇怪的是，我无法使用 newDiv.onClick 进行上述操作，但它可以与 newDiv.addEventListener / newDiv.attachEvent 一起使用。

由于 Object.create 是新的，请包含来自 Douglas Crockford 的以下代码，用于旧浏览器，包括 IE8。

```
if (typeof Object.create !== 'function') {
    Object.create = function (o) {
        function F() {}
        F.prototype = o
        return new F()
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-17T21:04:52.763

在对象被实例化之后，您可以立即将一个属性（例如`name`）附加到该对象并为其分配您期望的字符串值：

```
var myObj = new someClass();
myObj.name="myObj";

document.write(myObj.name); 
```

或者，可以在类的代码中进行分配，即

```
var someClass = function(P)
{ this.name=P;
  // rest of the class definition...
};

var myObj = new someClass("myObj");
document.write(myObj.name); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-24T12:29:13.197

这已经很老了，但我通过谷歌遇到了这个问题，所以这个解决方案可能对其他人有用。

```
function GetObjectName(myObject){
    var objectName=JSON.stringify(myObject).match(/"(.*?)"/)[1];
    return objectName;
} 
```

它只是使用浏览器的 JSON 解析器和正则表达式，而不会过多地弄乱 DOM 或您的对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-22T17:54:00.010

前段时间，我用过这个。

也许你可以尝试：

```
+function(){
    var my_var = function get_this_name(){
        alert("I " + this.init());
    };
    my_var.prototype.init = function(){
        return my_var.name;
    }
    new my_var();
}(); 
```

**弹出警报**：`"I get_this_name"`。

# visual-studio - 是否可以在 .vsi 中包含 .vssettings 文件

> ID：789678
> 
> 赞同：0
> 
> 时间：2009-04-25T20:31:59.763
> 
> 标签：visual-studio, visual-studio-2008, vssettings, vsinstaller

在 Visual Studio 2008 中，我已将设置导出到 .vssettings 文件。我有一个 .vsi 文件，其中包含一个 .vscontent 文件。在 .vscontent 中，我包含了一个像这样的宏项目：

```
...
<Content>
    <FileName>MyMacros.vsmacros</FileName>
    <DisplayName>MyMacros</DisplayName>
    <Description>MyMacros to aid development</Description>
    <FileContentType>Macro Project</FileContentType>
    <ContentVersion>2.0</ContentVersion>
</Content>
... 
```

是否可以包含这样的 .vssettings 文件？我似乎找不到正确的 FileContentType。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-26T11:46:41.470

不要认为它可能（Hint Reflector+VSContentInstaller.exe）

# iphone - iPhone 上的自定义键盘

> ID：789682
> 
> 赞同：1
> 
> 时间：2009-04-25T20:34:47.247
> 
> 标签：iphone, keyboard

在 iPhone 上实现自定义键盘的最简单方法是什么？我基本上想要一个让我的部分界面可见的操作表，但我想将我自己的视图加载到其中，最好是通过 nib。我一直在研究模态视图，但我感觉我走错了方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-26T03:21:46.520

只需创建一个视图，将其添加到您的窗口，然后调整窗口中其余视图的大小以适应。

# python - 将电子邮件重定向到 Python 脚本的最佳方法是什么？

> ID：789685
> 
> 赞同：2
> 
> 时间：2009-04-25T20:35:44.357
> 
> 标签：python, django, email

我想为我网站的用户提供一个功能，让他们在注册时获得一个电子邮件地址（例如 firstname.lastname@mydomain.com），但我真的不认为正常支持所有这些电子邮件帐户是可行的通过网络邮件程序。我也不确定我的虚拟主机是否会很酷。我真正想要的是能够将此电子邮件无缝集成到网站所在的更大系统中，因为它主要用于站点内消息传递，但我们希望允许用户放置实际的电子邮件地址. 因此，我想做的是在 mydomain 下拥有一个包罗万象的帐户，并让这封电子邮件查看收到的邮件，查看它要发送给谁，并为系统中的用户添加一条消息。

所以，问题是：

1）这是正确的方法吗？获得一个允许我随意将电子邮件分配给我的域的主机会有多贵？我目前正在使用 WebFaction 的共享主机。
2）如果这是一个好的方法，将这个捕获所有帐户路由到我的python脚本的最佳方法是什么？我读过关于 .forward 但我不太擅长 UNIX 的东西。一旦我弄清楚了，我将如何让脚本位于“Django 环境”中，以便我可以使用 Django 的模型功能向用户添加新消息？
3) Django 有什么可以让这更容易的吗？
4) Python 中是否有任何工具可以帮助我解析电子邮件地址？它们是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-26T04:32:51.683

直接回答您的问题：

1,2)在 WebFaction 网站上查看[此常见问题解答。](https://help.webfaction.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=136&nav=0,3)它解释了如何轻松地将传入的电子邮件路由到您选择的脚本中。创建电子邮件地址时，您可以不指定用户名，使其成为发送到域的任何内容的包罗万象的电子邮件。

3）正如其他人所建议的那样，您可以查看[django-messages](http://code.google.com/p/django-messages/)，但也许[Django Plugables](http://djangoplugables.com/)有更好的东西。

4) 查看[email.parser](http://docs.python.org/library/email.parser.html)模块，因为它负责解析电子邮件的大部分可怕部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T05:18:51.433

请参阅[我](https://stackoverflow.com/questions/730573/django-to-send-and-receive-email/731515#731515)对类似问题的回答。它包含让您开始使用 Django 电子邮件解析器的所有基本代码。

*编辑*：再想一想，这是代码：

有一个名为[jutda-helpdesk](http://code.google.com/p/jutda-helpdesk/)的应用程序使用 Python`poplib`并`imaplib`处理传入的电子邮件。您只需要在某个地方拥有一个具有 POP3 或 IMAP 访问权限的帐户即可。

这是改编自他们的[get_email.py](http://code.google.com/p/jutda-helpdesk/source/browse/trunk/management/commands/get_email.py)：

```
def process_mail(mb):
    print "Processing: %s" % q
    if mb.email_box_type == 'pop3':
        if mb.email_box_ssl:
            if not mb.email_box_port: mb.email_box_port = 995
            server = poplib.POP3_SSL(mb.email_box_host, int(mb.email_box_port))
        else:
            if not mb.email_box_port: mb.email_box_port = 110
            server = poplib.POP3(mb.email_box_host, int(mb.email_box_port))
        server.getwelcome()
        server.user(mb.email_box_user)
        server.pass_(mb.email_box_pass)

        messagesInfo = server.list()[1]

        for msg in messagesInfo:
            msgNum = msg.split(" ")[0]
            msgSize = msg.split(" ")[1]
            full_message = "\n".join(server.retr(msgNum)[1])

            # Do something with the message

            server.dele(msgNum)
        server.quit()

    elif mb.email_box_type == 'imap':
        if mb.email_box_ssl:
            if not mb.email_box_port: mb.email_box_port = 993
            server = imaplib.IMAP4_SSL(mb.email_box_host, int(mb.email_box_port))
        else:
            if not mb.email_box_port: mb.email_box_port = 143
            server = imaplib.IMAP4(mb.email_box_host, int(mb.email_box_port))
        server.login(mb.email_box_user, mb.email_box_pass)
        server.select(mb.email_box_imap_folder)
        status, data = server.search(None, 'ALL')
        for num in data[0].split():
            status, data = server.fetch(num, '(RFC822)')
            full_message = data[0][1]

            # Do something with the message

            server.store(num, '+FLAGS', '\\Deleted')
        server.expunge()
        server.close()
        server.logout() 
```

`mb`只是存储所有邮件服务器信息的一些对象，其余的应该很清楚。

您可能需要检查文档`poplib`并`imaplib`获取消息的特定部分，但希望这足以让您继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T20:49:17.430

> 但我真的不认为通过网络邮件程序正常支持所有这些电子邮件帐户是可行的

我认为您在这里的基本假设是不正确的。你看，大多数“网络邮件”程序只是后端邮件系统（后缀等）的前端（或客户端）。您将需要查看您的虚拟主机是如何设置的。您没有理由不能以编程方式创建这些帐户，然后让它们使用普通的网络邮件界面，如 SquirrelMail 或 RoundCube。例如，我的虚拟主机 (bluehost) 允许我拥有 2500 个电子邮件帐户——我不确定你的允许多少——但我可以每月多花几美元升级到无限制。我认为使用内置的电子邮件处理工具是一种更强大的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T21:41:07.133

您的问题与[此问题](https://stackoverflow.com/questions/484940/achieving-emailing-between-website-users-without-mailing-server-configuring/)类似。

使用[django-messages 之](http://code.google.com/p/django-messages/)类的项目来处理用户之间的消息传递。

如果你想让用户从你的 Django 站点之外接收邮件，那么你需要设置一个 MTA 来处理接收和存储电子邮件，然后像 procmail 这样的东西来将它检索到你的 Django 消息数据库中。

常见的 MTA 是[postfix](http://www.postfix.org)、[exim](http://www.exim.org)和[qmail](http://cr.yp.to/qmail.html)。[此问题](https://stackoverflow.com/questions/784201/is-there-a-python-mta-mail-transfer-agent/)的答案中列出的基于 Python 的

您还需要滚动您自己的代码，以使您的 Django 站点上的每个新用户成为有效的电子邮件收件人，这样他们就不会被 MTA 拒绝。

# pyqt - PyQt - 使窗口顶层

> ID：789687
> 
> 赞同：3
> 
> 时间：2009-04-25T20:36:57.820
> 
> 标签：pyqt, window

我需要在需要时使我的窗口处于顶层。创建窗口的代码：

```
class Application(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self, None, Qt.Tool | Qt.FramelessWindowHint)
        self.setFocusPolicy(Qt.StrongFocus)
        self.setAttribute(Qt.WA_QuitOnClose, True) 
```

当我需要时，我会这样做：

```
self.setWindowFlags(Qt.WindowStaysOnTopHint) 
```

但是在运行这部分代码后，我的窗口隐藏了......我不知道，它在哪里。但是我的程序没有关闭！帮助！我怎样才能在需要的时候把我的窗户放在最上面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-25T22:09:08.720

在您的窗口上调用 .show() 或 .raise() 应该使其成为焦点。

并且[来自 setWindowFlags() 的文档](https://doc.qt.io/qt-4.8/qwidget.html#windowFlags-prop)：

> 注意：此函数在更改窗口的标志时调用 setParent()，导致窗口小部件被隐藏。您必须调用 show() 使小部件再次可见..

我只是想为其他发现这个问题的人补充一点，即使在使用 PyQt 时，C++ 的 Qt 文档也是一个非常好的资源，只需确保您指向适用于您的 PyQt 版本的 Qt C++ 文档的版本（The如果您正在使用最新的 PyQt，则针对 4.4 编译）。

# c++ - 消息系统的 C++ 设计模式？

> ID：789693
> 
> 赞同：3
> 
> 时间：2009-04-25T20:45:10.700
> 
> 标签：c++, language-agnostic, design-patterns

我的任务是实现一个用于实时模拟的消息传递系统。该系统中需要存在多种不同类型的消息传递对象，将来可能会添加更多。这些对象代表了 sim 中玩家之间的主要通信方式。假设我完全理解我的要求，消息传递对象可以由以下属性定义：

*   发送协议（玩家可以发送什么消息以及何时发送）
*   接收协议（玩家可以接收哪些消息以及接收频率）
*   消息格式（发送数据的结构）

仿真代码目前只支持一种收发协议和一种消息格式。我的工作是使代码更具可扩展性，以便它可以支持未来对协议和消息结构的更改/添加。对此的第一种方法是为每个属性定义抽象基类，并让每个消息传递对象由它们的句柄组成。然后可以将每个消息传递对象编写为协议和格式对象的不同组合。我担心的是这种设计很快就会变得过于笼统，从而成为维护的噩梦。一想到要筛选十几个文件来弄清楚a到底是如何`FooMessaging`工作的，我就感到畏缩。

我将用 C++ 编写它，但我认为这实际上是一个更一般的设计问题。我可以在这里应用任何“标准”模式或最佳实践吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-25T21:04:56.253

好的，我怀疑您正在从大约 G 开始进行 A 到 Z 过程。

首先，您的用例是什么？你想做什么？您正在构建什么样的“消息系统”？电子邮件？我是？心灵感应？

其次，您从这些用例中获得的领域是什么？

现在，考虑到这一点，是的，你经常发现为基础课程制作一个 ABC 很方便。考虑改为创建一个接口（尽管 C++ 中接口和 ABC 之间的区别没有其他语言那么明确。）在过去的 20 年中，基于继承的 OO 已经证明会带来很多问题，因此接口和聚合是现在受到青睐。并不*总是*更好，但您应该首先考虑它们。

现在，告诉我与“协议”对应的物理事物是什么？您的意思是建模消息流之类的东西吗？它是一种通讯媒介吗？

特别是格式听起来很可疑，如果不是立即错误的话：消息格式往往与协议密切相关。

基本上，先备份一下，然后告诉我们更多关于你想要*做*什么的信息。

### 更新

啊哈。好吧，看，我们从中得到了很多帮助。首先，你的意思是可用操作意义上的“协议”——一个完全合理的用法，但是当你将它与 TCP 与 UDP 混淆时会混淆，就像我所做的那样。

现在，也就是说，您确实至少有几个选择。在下文中，我使用术语“玩家”来表示 sim 卡中可以发送或接收消息的任何实体。

这里的关键概念是围绕变化的轨迹和非功能性需求进行设计。明显的变化轨迹是

*   在你的意义上，你可以有几个“协议”，如果你有多达三个，你应该计划总是有更多。如果您期望两个以上，则计划您可以拥有任意多个。

*   你可以有几种不同的方式来格式化消息，例如，JSON、XML 或 YAML。再次，如果您期望两个以上，则计划您可以拥有任意多个。

*   您可以有多种传输机制。从表面上看，你至少可以使用 UNIX 域套接字×共享内存×命名管道，但是我的直觉说你也可以选择本地和远程，也就是说你也可以选择 UDP 或 TCP。绝对不止两个，为可扩展性做计划。

选项1：

使用代理模式，其中每个协议都定义了一个接口，该接口必须以多种方式之一实现，具体取决于下面的消息传递格式。玩家宣传他们愿意接收的信息；在他们准备接收消息时，他们构造了一些东西，为他们收到的任何特定操作消息调用他们的代码。为了发送，他们构造一个对象，为他们的接收伙伴 Player 实现适当的接口。

在幕后，这些对象可以有几个实现，每个实现不同的消息格式和传输机制。

此类系统的示例包括 SOM/DSOM a/k/a CORBA 和使用远程接口的 Java RMI。

选项 2：

您可以围绕命令模式构建一些东西。每个协议都有一个特定的“发送我”的实现，你的接收者只知道如何重建一个发送的对象。命令对象有一个混合（多重继承，或在运行时作为对象传递），它知道如何编组和序列化命令对象；您可以拥有第二个了解传输机制的人。

您通过序列化对象并使用您的传输机制将序列化的表单移动到接收者来发送特定协议上的消息。接收方“重新水化”对象，并根据发送的实际类型调用适当的方法。

这方面的一个例子是带有 Serializable 接口而不是使用 Remote 的 Java RMI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T21:07:58.680

我相信你应该看看[Apache ActiveMQ](http://activemq.apache.org/)。实际上，它是用 Java 编写的，但可以选择使用 C++ 客户端，并且有据可查。

干杯。

# ruby-on-rails - 如何使用 Ruby on Rails 进行 OR SQL 搜索？

> ID：789698
> 
> 赞同：2
> 
> 时间：2009-04-25T20:49:02.517
> 
> 标签：ruby-on-rails

我刚刚开始学习 Ruby on Rails，我一直无法找到这个问题的答案。

我有以下代码：

```
@products = Product.find(:all,
  :conditions => ["productsubtype_id = ?", @productsubtypes],
  :order => "name") 
```

@productsubtypes 是一个数组（当前包含来自另一个 SQL 查询的两个对象，几乎与这个相同） - 它生成的 SQL 如下：

```
SELECT * FROM `products` WHERE (productsubtype_id = 2,3)  ORDER BY name 
```

如您所见，上述内容无效（至少，不适用于 MySQL）——我需要找到一种方法来更改原始 Ruby 代码以生成以下 SQL 代码（或类似的代码：

```
SELECT * FROM `products` WHERE (productsubtype_id = 2 
  OR productsubtype_id = 3)  ORDER BY name 
```

有没有办法改变原始代码来做我需要的事情，或者我在这里完全走错了路？

谢谢你的帮助，

胡安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-26T16:13:48.473

这些解决方案都可以工作，但 ActiveRecord 已经内置支持知道在使用条件散列时是传递数组还是单个 id。例子：

```
User.all(:conditions => {:id => [1,2,3]}) 
```

生成查询

```
SELECT * FROM `users` WHERE (users.`id` IN( 1,2,3 )) 
```

所以你会想要

```
@products = Product.find(:all,
  :conditions => {:productsubtype_id => @productsubtypes},
  :order => "name") 
```

但是，对于更复杂的查询，您需要在条件中传递 sql 或使用插件（即 conditions_fu）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-26T16:30:11.990

还必须考虑使用 IN vs EXISTS。如果您在 IN 中使用的子集非常大，则使用 E​​XISTS 可能会更好。基本上，一个使用连接，另一个不使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T20:59:54.520

尝试使用[conditions_fu](http://github.com/nesquena/conditions_fu/tree/master)插件。

```
Product.all(:conditions => { :productsubtype_id.in => @productsubtypes },
:order => "name") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T21:13:27.090

@products = Product.find(:all,

:conditions => ["productsubtype_id **IN (?)** ", @productsubtypes],

:order => "名称")

# javascript - 通过点击“Enter”从 textarea 提交数据

> ID：789701
> 
> 赞同：18
> 
> 时间：2009-04-25T20:49:45.370
> 
> 标签：javascript, html, forms

我有带有 JS 的动态网页。有一个`<textarea>`和一个*发送*按钮，但没有`<form>`标签。如何使*提交*按钮触发并在按*Enter*`<textarea>`时清除？*`<textarea>`*

 ** * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-25T21:19:10.527

您可以为 textarea 使用 keyup 处理程序（尽管我建议不要这样做*）。

```
[SomeTextarea].onkeyup = function(e){
  e = e || event;
  if (e.keyCode === 13) {
    // start your submit function
  }
  return true;
 } 
```

*为什么不为此使用文本输入字段？Textarea 特别适用于多行输入，一个用于单行输入的文本输入字段。使用输入处理程序，您可以削弱多行输入。我记得曾经将它用于 XHR（又名 AJAX）聊天应用程序（因此 textarea 的行为类似于 MSN 输入区域），但使用 CTRL-enter 键重新启用多行输入以换行。这对你来说可能是一个想法吗？侦听器将像这样扩展：

```
[SomeTextarea].onkeyup = function(e){
  e = e || event;
  if (e.keyCode === 13 && !e.ctrlKey) {
    // start your submit function
  }
  return true;
 } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-25T20:55:12.627

在 a 中按 Enter 会`textarea`插入换行符，而不是提交父表单；即使使用常规的表单标签，这也不会以这种方式工作。

尝试解决此行为是不可取的，因为它会违反用户对文本区域控件在其他网站和其平台上的其他应用程序中的行为方式的期望。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-04-26T01:49:26.570

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T01:05:53.397

这是我的解决方案：

在 Javascript 中：

```
function isEnterPressed(e){
var keycode=null;
if (e!=null){
    if (window.event!=undefined){
        if (window.event.keyCode) keycode = window.event.keyCode;
        else if (window.event.charCode) keycode = window.event.charCode;
    }else{
        keycode = e.keyCode;
    }
}
return (keycode == 13);} 
```

在 html 中：

```
<input type="text" onkeyup="if(isEnterPressed(event)){/*do something*/}" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-30T02:31:40.043

Is there are reason why you're not using a form wrapper?

```
$('#input_id').keypress(function(e){
    if(e.which == 13){
        $('#form_id').submit();
        return false; //prevent duplicate submission
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-26T02:00:23.097

The textarea is for allowing users to enter multiple lines of text so, pressing enter would only insert a new line in the text. Use normal text field instead if you want that behavior

# python - 为什么内置函数而不是根类方法？

> ID：789718
> 
> 赞同：4
> 
> 时间：2009-04-25T21:02:33.280
> 
> 标签：python, oop

（我确定这是一个常见问题解答，但也很难用谷歌搜索）

为什么 Python 使用 abs(x) 而不是 x.abs？

据我所知， abs() 除了调用之外所做的一切都`x.__abs__`可以在 object.abs() 中实现

它是历史的，因为并不总是有根类吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-25T21:10:10.953

Guido van Rossum 的官方回答以及 Fredrik Lundh 的额外解释在这里：[http ://effbot.org/pyfaq/why-does-python-use-methods-for-some-functionality-eg-list-index- but-functions-for-other-eg-len-list.htm](http://effbot.org/pyfaq/why-does-python-use-methods-for-some-functionality-e-g-list-index-but-functions-for-other-e-g-len-list.htm)

简而言之：

1.  对于大多数此类操作，abs(x) 比 x.abs() 更自然地读取

2.  你知道 abs(x) 得到一个绝对值，而方法 x.abs() 可能意味着不同的东西，具体取决于 x 的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T21:05:08.780

我认为您正在寻找一个典型的示例，其中语言设计者决定可读性和简洁性胜过纯粹主义构造。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T21:17:52.260

Python 是一种支持面向对象编码的语言，但它故意不是纯 OO 语言。正如您正确提到的那样，Python 类，甚至是用户定义的类，并不总是从单个基类派生而来。

函数是 Python 中功能的基本单元，因此核心操作（随机样本：str、dir、print、hash）看起来像函数是有意义的。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-04-25T21:08:53.623

我认为这涉及到python是如何使用面向对象的方式的，因为对对象的方法调用的第一个参数是对象本身，所以 x.abs() 本质上是 abs(x)

查看第 3.2.3 章下的后续[页面](http://mcsp.wartburg.edu/zelle/python/python-first.html)Python 支持面向对象编程

那应该解释一些事情

# iphone - 如何获取原始触摸屏数据？

> ID：789737
> 
> 赞同：3
> 
> 时间：2009-04-25T21:13:14.127
> 
> 标签：iphone, cocoa-touch, touchscreen

我知道我可以在我的 iPhone 应用程序中获取触摸事件。但是这些触摸事件是为我过滤的。如果我将设备按在我的脸上，它会过滤掉这些触摸事件，因为它可以检测到它不是手指。

我将如何获得未以任何方式过滤的原始触摸事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T21:34:34.483

没有用于此的公共 API。您可以获得的最接近的是来自 GraphicsServices 私有框架的 GSEvent。

# windows - 为什么我的卷影复制服务请求者失败：找不到 CreateVssBackupComponentsInternal

> ID：789754
> 
> 赞同：1
> 
> 时间：2009-04-25T21:23:38.253
> 
> 标签：windows, volume-shadow-service

我已经实现了一个 VSS 请求程序，它链接在 Windows Server 2008 上编译和执行，但在 Windows Server 2003 上不执行。由于我的请求程序位于 DLL 中，因此我的 DLL 不会加载。使用[Dependency Walker](http://www.dependencywalker.com/)，我发现我的 DLL 找到 VSSAPI.DLL 就好了，但它报告：

```
Error: At least one required implicit or forwarded dependency was not found. 
```

查看我的 VSSAPI.DLL，它找不到`CreateVssBackupComponentsInternal`，而 VSSAPI.DLL 导出完全不同的东西：`?CreateVssBackupComponents@@YGJPAPAVIVssBackupComponents@@@Z`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T21:23:49.157

VSS 必须专门针对每个平台和操作系统进行编译和定位，包括 Windows XP、Windows Server 2003 和 Vista/Windows Server 2008。

第一个完全支持 VSS 请求程序的 Microsoft SDK 是 v6.1，它只支持在 Vista 上运行的请求程序。如果要在 Windows Server 2003 或 XP 上运行：

*   下载[VSS SDK 7.2](http://www.microsoft.com/downloads/details.aspx?familyid=0b4f56e4-0ccc-4626-826a-ed2c4c95c871&displaylang=en)。
*   设置包含和库路径以在 VSS SDK 中搜索适当的目录。

以下是 AlphaVSS 在其[Config.h](http://alphavss.codeplex.com/SourceControl/changeset/view/26760#461791)中所做的，但 VSS SDK 中的 VShadow 示例没有：它只设置包含和库路径。我建议遵循 VShadow 更有可能成功。但为了完整性：

如果面向 Windows XP：

```
#define NTDDI_VERSION NTDDI_WINXPSP2
#define _WIN32_WINNT _WIN32_WINNT_WINXP
#define WINVER _WIN32_WINNT 
```

如果面向 Windows Server 2003：

```
#define NTDDI_VERSION NTDDI_WS03SP1
#define _WIN32_WINNT _WIN32_WINNT_WS03
#define WINVER 0x501 
```

如果面向 Vista，请不要引用 VSS SDK。而是参考 Windows 6.1 SDK 并：

```
#define NTDDI_VERSION NTDDI_WS08
#define _WIN32_WINNT _WIN32_WINNT_WS08
#define WINVER _WIN32_WINNT 
```

我不能把所有的功劳都归功于这一点，我通过阅读一个名为[AlphaVSS](http://www.codeplex.com/alphavss)的项目的源代码（参见[公告](http://www.alphaleonis.com/2008/08/alphavss-bringing-windows-shadow-copy-service-vss-to-net/)）来解决这个问题，该项目将 VSS 暴露给 .NET 代码。MSDN 似乎不是很有帮助。但是，[VShadow](http://msdn.microsoft.com/en-us/library/bb530725(VS.85).aspx)工具和示例提供了如何编译 VSS 请求程序的示例。

另请注意，您必须针对 x64 或 ia64 与 x86 重新编译。这意味着为了支持所有平台，您需要 9 个编译版本的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-31T20:41:31.457

只是想补充一点，AlphaVSS 还设置了路径，而不仅仅是定义。这在任何一种情况下都是必需的。

# jquery - 如何使用 jQuery 将查询字符串或 JSON 对象映射转换为单个 JSON 对象？

> ID：789755
> 
> 赞同：3
> 
> 时间：2009-04-25T21:23:38.893
> 
> 标签：jquery, json, query-string

对于此示例，假设我在表单中有一个月份列表，每个月份旁边都有一个复选框。我正在寻求帮助做以下两件事：

1.  转换查询字符串（例如`"January=on&March=on&September=on"`）或
2.  转换对象映射：`[{ January: 'on' },{ March: 'on' },{ September: 'on' }]`

到单个 JSON 对象：`{ January: 'on', March: 'on', September: 'on' }`

我意识到第一个映射已经是 JSON，但我希望它不是对象数组，而是单个 JSON 对象。我可以用 构建地图，`$('form').serializeArray();`也可以用 构建查询字符串`$('form').serialize();`。

jQuery API 中 .serialize() 的实现很简单：

```
serialize: function() {
    return jQuery.param(this.serializeArray());
}, 
```

这就是为什么我可以处理第一个或第二个答案。

我想这样做的原因是因为我正在从 PrototypeJS 切换到 jQuery，而在 PrototypeJS 中这很简单：

```
Object.toJSON(Form.serializeElements($('myform'), true)); 
```

那么，是否有人知道可以轻松做到这一点的 JSON 插件（我只想坚持使用 jQuery），或者知道实现我正在寻找的结果的简单方法？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-03-19T14:33:17.923

**你可以试试这个**

```
String.prototype.QueryStringToJSON = function () {
href = this;
qStr = href.replace(/(.*?\?)/, '');
qArr = qStr.split('&');
stack = {};
for (var i in qArr) {
    var a = qArr[i].split('=');
    var name = a[0],
        value = isNaN(a[1]) ? a[1] : parseFloat(a[1]);
    if (name.match(/(.*?)\[(.*?)]/)) {
        name = RegExp.$1;
        name2 = RegExp.$2;
        //alert(RegExp.$2)
        if (name2) {
            if (!(name in stack)) {
                stack[name] = {};
            }
            stack[name][name2] = value;
        } else {
            if (!(name in stack)) {
                stack[name] = [];
            }
            stack[name].push(value);
        }
    } else {
        stack[name] = value;
    }
}
return stack;
} 
```

**请求参数**

```
 href="j.html?name=nayan&age=29&salary=20000&interest[]=php&interest[]=jquery&interest[1]=python&interest[2]=Csharp&fan[friend]=rangan&fan[family]=sujan&sports[1]=cricket&sports[2]=football"; 
```

**用法**

```
alert(href.QueryStringToJSON().toSource()) 
```

**输出**

```
({name:"nayan", age:29, salary:20000, interest:["php", "python", "Csharp"], fan:{friend:"rangan", family:"sujan"}, sports:{1:"cricket", 2:"football"}}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-26T01:24:33.697

kgiannakakis 的遍历地图的建议是一个很好的起点，尽管我不认为它可以作为我最初问题的答案。经过几个小时的头撞后，我解决了这个问题，它允许您基于自定义属性序列化元素（我不想满足于必须在我的表单元素上使用 'name' 属性，这是 jQuery 要求的）。我还开始使用来自 json.org 的 JSON 库来对我创建的对象进行字符串化。我的插件的**serializeToJSON**函数是我一直在寻找的问题的答案，其余的只是 exta。

***注意****：这是针对客户端的，因此“CustomXXX”名称和属性已替换为实际内容*

```
jQuery.fn.extend({
    serializeCustomPropertyArray: function() {
        return this.map(function() {
            return this.elements ? jQuery.makeArray(this.elements) : this;
        }).filter(function() {
            return jQuery(this).attr('CustomAttribute') &&
                (this.checked || /select|textarea/i.test(this.nodeName) ||
                        /text|hidden|password|search/i.test(this.type));
        }).map(function(i, elem) {
            var val = jQuery(this).val();
            return val == null ? null : jQuery.isArray(val) ?
                jQuery.map(val, function(val, i) {
                    return { name: jQuery(elem).attr('CustomAttribute'), value: val };
                }) : { name: jQuery(elem).attr('CustomAttribute'), value: val };
        }).get();
    },
    serializeToJSON: function() {
        var objectMap = this.serializeCustomPropertyArray();
        var objectJson = new Object;
        jQuery.each(objectMap, function() {
            objectJson[this.name] = (this.value !== null) ? this.value : 'null';
        });
        return JSON.stringify(objectJson);
    }
}); 
```

这可以称为：

```
$('#fields').find(':input[CustomGroup="Months"]').serializeToJSON(); 
```

假设您的文档看起来像：

```
<div id="fields">
   <input type="checkbox" CustomGroup="Months" CustomAttribute="January" />January<br />
   <input type="checkbox" CustomGroup="Months" CustomAttribute="February" />February<br />
   ...
</div> 
```

构建的 JSON 如下所示：

```
{ January: 'on', February: 'on', ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T22:05:48.103

[您可以使用$.each](http://docs.jquery.com/Utilities/jQuery.each)实用程序函数遍历对象映射。

```
$(function() {
    map = [{ January: 'on' },{ March: 'on' },{ September: 'on' }];
    $.each(map, function() {
       $.each(this, function(key, val) {alert(key + " = " + val);});;
    });
}); 
```

第一个 each 为您提供所有数组对象。使用第二个，您可以获得对象的键和值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-04T03:12:38.670

我知道您正在尝试将查询字符串转换为 JSON 对象，但也许您可能有兴趣直接从 html 表单转换为 JSON 对象（无需指定非常复杂的名称属性）。如果是这样，请查看 JSONForms： [http ://code.google.com/p/jsonf/](http://code.google.com/p/jsonf/)

免责声明：我开始了 jsonforms 项目。它还很年轻，但我个人认为它很摇滚！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-13T12:12:04.547

您还可以使用[parseQuery 插件](http://plugins.jquery.com/project/parseQuery)从序列化元素创建对象。

```
var contact = $.parseQuery($("#step1 *").serialize()); 
```

# winapi - 几个 ListView 问题

> ID：789758
> 
> 赞同：1
> 
> 时间：2009-04-25T21:24:10.623
> 
> 标签：winapi, listview

ListView 控件的文档（使用 WinApi）似乎缺少一些基本信息，这里有一些我似乎找不到解决方案的问题：

1.  在大多数应用程序中，当您双击列右侧的边框时，该列的大小会调整为某个默认宽度。我会猜到这个宽度是由 LVCOLUMN.cxDefault 或 cxIdeal 指定的，但它似乎没有这样做。我错过了什么？

2.  当您单击某一列对列表进行排序时，其顶部会出现一个指示排序方向的小箭头。我如何让它出现？顺便说一句，有人知道 ListView 使用哪种排序算法吗？

3.  在报告视图中，有什么方法可以选择整行而不是第一个项目？（这只是一个视觉上的东西，功能上是相同的）

4.  有什么方法可以一次插入多个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T22:15:14.773

好的，这是第二个问题的答案：http: [//www.winapizone.net/tutorials/winapi/listview/columnsortimage.php](http://www.winapizone.net/tutorials/winapi/listview/columnsortimage.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T21:31:05.270

1.  它是根据该列中每个项目的呈现宽度计算的。
2.  箭头是您的程序设置的自定义图像。如果您不设置图像（通过将图像列表与标题相关联，然后按索引为每个标题项指定图像），那么您将不会得到一个。我不知道排序算法是什么，但项目比较算法是你想要的任何东西——你必须指定一个回调。
3.  是 -[`LVS_EX_FULLROWSELECT`](http://msdn.microsoft.com/en-us/library/bb774732.aspx)在控件上设置扩展样式
4.  不可以。但是您可以在添加多个项目时[关闭重绘。](http://msdn.microsoft.com/en-us/library/dd145219.aspx)

如果您不熟悉使用 ListView 控件，我对您的最佳建议是阅读[CodeProject 上的大量文章](http://www.codeproject.com/KB/list/index.aspx?#List%20Controls)。即使您不使用 MFC（正如许多文章一样），这些概念仍然适用 - 只需将调用转换为等效的 PlatformSDK 宏。

# java - 如何在 Spring 中使用注释应用方面？

> ID：789759
> 
> 赞同：3
> 
> 时间：2009-04-25T21:24:57.453
> 
> 标签：java, security, spring, annotations, aspects

**更新**：我发现 Spring 2.x 基于注释的控制器对于 AOP 安全性来说是可怕的，因为由于参数和返回值的自由度增加，您无法对方法原型做出假设。在 2.x 之前，您可以拦截*handleRequest*并知道第一个参数是*HttpServletRequest*并且返回值是*ModelAndView*。该标准允许您为每个控制器编写简单的建议。现在映射到请求的方法可以接受任何内容并返回字符串、ModelAndViews 等。

**原始帖子**：我有一组现有的方面，它们实现了在 Spring 中运行的 AOPAlliance 的 MethodInterceptor。它们通过拦截 . *处理请求。*控制器中的方法，并允许执行或转发到登录页面。

使用 Spring 中新的基于注解的控制器，不再需要实现“handleRequest”方法；控制器的方法可以任意命名。这打破了我现有的安全模型。那么，我如何从中得到：

```
 <bean class="com.xxx.aspects.security.LoginAdvice" name="loginAdvice">
            <property name="loginPath">
                    <value>/login.htm</value>
            </property>
            <property name="authenticationService" ref="authenticationService" />
    </bean>

    <bean name="loginAdvisor" class="org.springframework.aop.support.DefaultPointcutAdvisor">
            <property name="advice" ref="loginAdvice" />
            <property name="pointcut">
                    <bean class="org.springframework.aop.support.JdkRegexpMethodPointcut">
                            <property name="pattern">
                                    <value>.*handleRequest.*</value>
                            </property>
                    </bean>
            </property>
    </bean>

    <bean id="someProtectedController" class="org.springframework.aop.framework.ProxyFactoryBean">
            <property name="target">
                    <ref local="someProtectedControllerTarget" />
            </property>
            <property name="interceptorNames">
                    <list>
                            <value>loginAdvisor</value>
                            <value>adminAdvisor</value>
                    </list>
            </property>
    </bean> 
```

...能够重用我现有的方面并使用注释将它们应用于整个控制器或控制器方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T11:27:53.467

您能否使用[AnnotationMatchingPointcut](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/aop/support/annotation/AnnotationMatchingPointcut.html)在您的控制器上查找具有 @RequestMapping 的方法（或您在基于注释的 Spring 控制器中使用的其他类似注释）？

# javascript - 在 Google Reader 中动态加载项目

> ID：789760
> 
> 赞同：1
> 
> 时间：2009-04-25T21:25:01.323
> 
> 标签：javascript, html, rss

我一直在使用[谷歌阅读器](http://www.google.com/reader/)，并希望实现一种与他们“似乎”延迟加载每篇文章内容的方式类似的技术。当您单击其中一个订阅时，您会看到一系列带有片段和其他信息的帖子。当您单击帖子时，它会展开以显示整个正文。我以为他们只是在切换元素的可见性，但他们似乎是在动态插入到 DOM 中。您可以通过在页面加载后查看 HTML 来证明这一点 - 没有扩展内容的迹象。如果正文包含图像，则仅在展开时才加载它们。这显着改善了初始请求的加载时间，因为它不会为每个帖子加载每个图像。

我对发生的事情有两个想法：

1.  他们正在执行 AJAX 请求并插入响应，从而在需要时加载和呈现任何图像。
2.  他们正在用 JavaScript 做一些花哨的事情，但我不知道到底是什么。

我第一次尝试渲染折叠的内容，但使用 CSS 使其不可见：

`display: none`

然后我用 jQuery 切换了可见性：

`$("itemDetail").toggle()`

唯一的问题是不可见内容中的图像是在初始请求期间加载的——这对用户来说并不明显，但可能会产生其他负面影响。

这是列表视图（全部折叠）：

[替代文字 http://img6.imageshack.us/img6/4503/croppercapture1.jpg](http://img6.imageshack.us/img6/4503/croppercapture1.jpg)

这是带有扩展帖子的列表视图：

[替代文字 http://img6.imageshack.us/img6/4215/croppercapture2.jpg](http://img6.imageshack.us/img6/4215/croppercapture2.jpg)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T03:58:27.273

> 他们正在执行 AJAX 请求并插入响应，从而在需要时加载和呈现任何图像。

嗯，是的，这就是他们正在做的事情。

那么，问题究竟是什么？您对可见性所做的事情完全不同，而且正如您自己所说，效率几乎没有。

因此，您需要学习如何[使用 JQuery 发出该请求](http://docs.jquery.com/Ajax)，并将[您从请求中获得的 HTML](http://docs.jquery.com/Manipulation)放入页面的正确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T11:26:53.257

当您单击折叠的项目以展开它时，我不确定 AJAX 请求是否发送到 Google 的服务器。我使用 Firebug 使用 Net 选项卡跟踪任何请求。我只能看到对这个特定项目的两个请求，并且两个请求都是针对托管它的服务器（在本例中为 weblogs.asp.net） - 不确定第一个做什么，但第二个获取嵌入在帖子中的图像。这是两个屏幕截图，之前和之后，显示了 AJAX 请求：

之前： [替代文字 http://img207.imageshack.us/img207/8461/croppercapture12.jpg](http://img207.imageshack.us/img207/8461/croppercapture12.jpg)

之后： [替代文字 http://img207.imageshack.us/img207/6128/croppercapture13.jpg](http://img207.imageshack.us/img207/6128/croppercapture13.jpg)

我不希望这个问题变成争论，我只是陈述我发现的证据，这表明存在另一种解释。

# objective-c - 为什么我不必释放这些对象？

> ID：789761
> 
> 赞同：2
> 
> 时间：2009-04-25T21:25:08.640
> 
> 标签：objective-c, iphone, cocoa-touch, memory-management, uikit

这是一个示例代码，其中仅释放“字符串”对象。

```
NSString *nameOfFile = ... ;
NSError *error;
NSString *string = [[NSString alloc] initWithContentsOfFile:nameOfFile encoding:NSUTF8StringEncoding error:&error];
if (string == nil) {
    // handle error
}
[string release]; 
```

我明白为什么错误对象没有被释放。这是因为这里的方法没有使用“new”或“alloc”方法创建错误对象。相反，这是通过引用返回的，因此 initWithContentsOfFile 方法负责该内存。但是 nameOfFile 对象呢？他们为什么不发布它？它不是通过引用返回的......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T21:32:12.850

类似于为什么你不需要发布`error`，你也不需要发布`nameOfFile`。在 Objective-C 中，如果您声明一个字符串，因为`NSString *temp = @"Hello"`它被视为字符串常量并且不需要释放。内存引用计数为零，因此不需要释放。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T21:47:03.627

假设`nameOfFile`是一个常量字符串，那么它的保留计数自动为`7fffffff`（即`2147483647`，可能的最高保留计数）。基本上，字符串文字会在执行期间持续存在并且永远不会被释放，因此您永远不必担心释放它们。

请记住，如果您保留了一个对象或为它显式分配了内存，您只需要释放它。

有关详细信息，请参阅[Apple 的文档](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html#//apple_ref/doc/uid/20000148-SW1)。

# .net - System.Numerics.BigInteger 会是不可变的吗？应该是吗？

> ID：789769
> 
> 赞同：1
> 
> 时间：2009-04-25T21:32:04.830
> 
> 标签：.net, immutability, biginteger

.net framework 4 显然将包含一个 BigInteger 类。但是，我似乎无法确定它是否是不可变的。我似乎也无法决定这是否是一件好事。

不变性有很多好处，尤其是对于像 big-int 这样“类似价值”的东西。另一方面，基本操作必须高效才能使 PowerMod 等高成本操作尽可能快。就地添加将比不可变添加更快。我目前倾向于将不变性作为库类的更好选择（想想 String）。

有谁知道它是否是不可变的？你认为它应该是不可变的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-25T21:39:57.947

我相信它将是不可变的（我认为他们基本上是将不可变的 DLR 实现引入核心）。

是的，它应该是不可变的。它的行为应该像其他数值类型，例如 Int32 和 Double。拥有一个可变的数字类会非常混乱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-25T21:41:03.780

我认为它将是不可变的，我认为这是“价值”类型唯一合理的设计选择。（与 DLR 一样，F# BigInt 也是不可变的。很高兴我们终于在框架中获得了这种类型以跨语言共享。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-01T14:16:25.780

它将是不可变的。是的，它应该是——否则，它不会像其他数字类型那样表现，如果你从基于整数的代码转移到基于大整数的代码，你会看到一些非常奇怪的行为。

可能在将来的某个版本中应该有一个额外的可变类型（比如 StringBuilder 是用于 String 的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-23T09:10:16.990

查看 msdn.microsoft.com/en-us/library/system.numerics.biginteger(VS.100).aspx 上的（初步但官方）文档

> BigInteger 类型是一种不可变类型，它表示一个任意大的整数，其值在理论上没有上限或下限。[...] 因为 BigInteger 类型是不可变的 [...] 并且因为它没有上限或下限，所以对于导致 BigInteger 值增长过大的任何操作都可能引发 OutOfMemoryException。

# flash - Flash & Flex SDK/AS3 - 如何保持键盘焦点？

> ID：789771
> 
> 赞同：4
> 
> 时间：2009-04-25T21:34:04.607
> 
> 标签：flash, actionscript-3, keyboard, focus

我正在用 Flex/AS3 编写一个 Flash 应用程序，但我似乎无法为其分配键盘焦点。我在开发的早期就注意到了这个问题，并添加了一个带有“立即播放”按钮的启动画面，以吸引用户点击。但是，用户必须在应用程序上再次单击才能使键盘工作！

更糟糕的是，我有一个游戏内快捷方式可以让您返回主菜单。如果您返回主菜单然后单击“立即播放”按钮，SWF 将再次失去焦点！

我可能弄乱了子对象或不小心破坏了捕获键盘焦点的对象，但我不太确定它是如何工作的。你能帮我指出正确的方向吗？

我的应用程序是单个 .SWF 文件，我直接在浏览器中运行它（不是通过网页调用它，但我最终会调用它）。这是有问题的文件：

[http://www.space-squid.com/game/Main.swf](http://www.space-squid.com/game/Main.swf) 当您点击“正常”时，您必须再次点击才能真正获得键盘焦点。：（ 随意问的问题！

**编辑：**这是我正在使用的一些代码。

在我的主类中执行的一些第一个代码：

```
empty_sprite = new Sprite();
addChild(empty_sprite);
empty_sprite.stage.addEventListener(keyboard hooks...); 
```

我也试过这个，以防我应该在我的根对象上设置钩子：

```
this.stage.addEventListener(keyboard hooks...); 
```

如果原本为空的精灵导致问题：

```
background_image = new BackgroundImage();
background_image.x = etc etc alignment data;
addChild(background_image);
background_image.stage.addEventListener(keyboard hooks...) 
```

在所有这些示例中，只要我第二次单击，我的键盘挂钩就可以正常工作.. 但从来没有第一次。:(

**第二次编辑：**嗯，我已经缩小了问题的范围。也许有人可以帮我解决这个问题，这可能是一个结构问题：

```
public function Main {
    Some stuff...
    empty_sprite = new Sprite(); // Create a new stage sprite
    addChild(empty_sprite);
    empty_sprite.stage.addEventListener(keyboard hooks...);        

    addChild(BackgroundImage); // I lay down my background image which is persistant

    addChild(PlayNowButton); // I display my PlayNow button to the screen

    More stuff...
}

public function StartGame() {
    removeChild(PlayNowButton); // This is the point of failure; this removes focus.
    removeChild(otherMenuOptions);
    ...
    addChild(gameComponents);
} 
```

如您所见，我创建了立即播放按钮 - 它似乎成为焦点。我的键盘事件没有被困住，因为它是在寻找焦点的背景。不知道这是否有意义，希望有人可以解决这个问题！

如果我注释掉那一行 (removeChild(PlayNowButton))，游戏运行得非常好并保持键盘焦点——缺点是“playnow”按钮永远覆盖在屏幕上。

老实说，我什至不确定游戏本身是否会关注第一次点击，但我不确定如何测试。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-27T07:54:17.027

您正在寻找的代码是：

```
gameWorldObject.stage.focus = this; 
```

由于 Flash 已获得焦点，因此您的键盘事件处理程序根本不集中在 Flash 应用程序本身内。您可以使用上面的代码切换当前焦点在应用程序中的位置。

或者，与其破坏 PlayNow 按钮，不如让它不可见就可以了。然后在需要时让它再次可见。如果是 MovieClip 或 Sprite 对象，则非常简单：

```
PlayNowButton.visible = false; // or true obviously, as the case may be 
```

（这样写给自己很难）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T21:52:48.493

我假设这是一个浏览器项目？

这是我的做法：

```
package com.whatever.utilities {

    import flash.external.ExternalInterface; 

    public class Browsers {

        public static function FocusThisSwf():void {
            if(!ExternalInterface.available)
                return;
            ExternalInterface.call("eval", "document.getElementById('" +
                ExternalInterface.objectID + "').focus()");
        }
        // ...
     }
     //...
} 
```

任何问题，请确保您的嵌入/对象标记具有 ID 和 Name 属性！

# c - 如何执行插入排序但检查数组中元素的属性而不仅仅是元素？

> ID：789773
> 
> 赞同：0
> 
> 时间：2009-04-25T21:35:12.937
> 
> 标签：c, algorithm, sorting, insertion-sort

抱歉，我确定这很简单，但我很累，无法弄清楚。

我有一个元素数组，每个元素实际上是一个粒子，它是一个数据结构（c 中的结构），其中包含粒子当前位置（int x，y，z）。我想比较元素 x 位置而不仅仅是元素本身。

[查看wikipedia](http://en.wikipedia.org/wiki/Insertion_sort)上的伪代码，我试图对其进行修改以比较我想要的属性，但我认为我做错了什么（可能很简单）。

这是我修改的内容：

```
for (i = 1; i<length; i++) {
    value = particles[i].position.x;    
    j = i - 1;
    while (j >= 0 && particles[j].position.x > value) {
        particles[j+1] = particles[j];
        j = j - 1;
    }
    particles[j+1] = particles[i];
} 
```

如果有人能指出我的错误，那就太好了！

亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T21:43:24.943

您的第二行用于存储第 i 个元素的临时副本，因为 while 循环会覆盖它。然而，在您的第二行中，您正在读取被覆盖的值。将您的代码更改为以下内容，它应该可以工作（更改注释）：

```
for (i = 1; i<length; i++) {
    value = particles[i]; // store particles[i] rather than it's x coordinate
    j = i - 1;
    while (j >= 0 && particles[j].position.x > value.position.x) { // changed
        particles[j+1] = particles[j];
        j = j - 1;
    }
    particles[j+1] = value; // copy from temporary
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T21:41:18.973

您需要交换粒子对象，而不是 x 坐标的值。尝试：

```
 for (i = 1; i<length; i++) {
    value = particles[ i ];
    /* ... */ 
```

# eclipse - 如何在不运行 JRE 安装的情况下运行 Eclipse？

> ID：789792
> 
> 赞同：23
> 
> 时间：2009-04-25T21:50:39.233
> 
> 标签：eclipse, java

我希望在 Vista 上运行 Eclipse for C++，但我绝对不想运行 JRE 安装。有没有什么地方可以在 zip 中获取 JRE，我可以将其转储到 Eclipse 文件夹中并让它工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-25T22:41:12.217

您可以通过将 JRE 复制到`eclipse/jre`目录中来运行 Eclipse（[wiki 文档](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F)）。

JRE 与[Java JDK](http://java.sun.com/javase/downloads/index.jsp) ( */path/jdk1.6xxx/jre* ) 一起分发。JDK 使用安装程序，但您可以从另一台机器复制此目录，安装和卸载 JDK 或其他任何东西。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-16T09:25:50.490

下载 JRE 离线安装程序，右键单击它，然后将 7zip/winrar/whatever 解压缩。

您将获得一个包含完整功能 JRE 的文件夹，但无需安装 :)
您可能希望阅读[此](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F)内容以使用该 JRE 运行 Eclipse。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T22:17:15.783

每个浏览器都可以禁用浏览器插件，您可以复制并重新设置 PATH 变量和 JAVA_HOME 变量，还可以在 Windows 控制面板的 Java 应用程序中禁用更新程序。注册表项通常是无害的，但也不太难删除。

此外，您可以在使用后卸载它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T10:48:11.860

IBM Development Kit for Eclipse*正是*您所需要的。捆绑了 JRE 的 Eclipse 即可使用。

[http://www.ibm.com/developerworks/java/jdk/eclipse/](http://www.ibm.com/developerworks/java/jdk/eclipse/)

（为了记录，它是一个 IBM JVM）。

注册是必要的（呃）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T21:57:27.500

~~不，不能按照您描述的方式完成。JRE 需要使用安装程序安装。为什么你会害怕在你的机器上安装 JRE？没有它，Eclipse 将无法工作，因为它本身就是一个 Java 应用程序并在 JVM 中运行。~~

**编辑**，请原谅我的无知。麦克道威尔是对的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-25T22:05:49.540

我想你应该看看[Apache Harmony](http://harmony.apache.org/)。我相信它可能只是解压缩到独立目录中。之后，可以使用 -vm PATH_TO_JVM 选项启动 Eclipse。（理论上）

希望这可以帮助。

# iphone - 为应用提交创建屏幕截图。

> ID：789793
> 
> 赞同：1
> 
> 时间：2009-04-25T21:51:29.637
> 
> 标签：iphone, submit

在审批过程中为 iPhone 应用程序提交屏幕抓取时，是否可以提交与应用程序本身不同的屏幕？

例如，我想提交一个屏幕，其中我解释了应用程序的一些功能，但不一定是屏幕抓取。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T22:11:42.507

正如马克所提到的，这似乎经常被接受，尽管我个人并不鼓励这样做。当我看到截图集合中的图像时，我立即产生怀疑。您的应用程序应该足够简单，以便屏幕截图向用户显示可用的内容。你的截图没有传达什么，你可以在你提交的文字中解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T21:56:35.943

人们似乎经常这样做——我见过几个案例，其中“屏幕截图”完全是另外一回事。我想只要你不是故意误导，你会没事的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T08:22:12.513

无论如何，您都应该提交屏幕截图，我不记得看到任何没有屏幕截图的应用截图。屏幕抓取项目的想法，甚至更好地复制以突出您的应用程序功能。

如果设计是一个问题，它可以像使用设备模型来环绕你的屏幕截图一样简单，最常见的样式是这样的：[https ://itunes.apple.com/us/app/evernote-stay-organized/id281796108 ?mt=8](https://itunes.apple.com/us/app/evernote-stay-organized/id281796108?mt=8) 普通背景和每个屏幕截图一个句子。此外，您还希望使副本简短而切题。

我使用了启动套件，但他们不再接受新的注册。如果您不是现有用户，您可以尝试 mockupphone

# ruby-on-rails - 更快/批量创建活动记录

> ID：789797
> 
> 赞同：1
> 
> 时间：2009-04-25T21:53:57.993
> 
> 标签：ruby-on-rails, performance, activerecord

我的应用程序正在存储来自 GPS 输入的位置数据。导入 GPX 文件时，用户可以拥有 500 - 10,000 个 GPS 数据点。现在，我为每个跟踪点都有一个模型。它工作得很好，但在插入时它很慢。10,000 个数据点需要 30 多秒。有没有更好的批量插入方法？

所有的时间都花在了 SQL 方面——每次插入都很快，但 10,000 次加起来很快。每个用户可能有 100 个文件，并且 100 个用户 == 很长很长的插入时间。当然不是一次性的。

如果有帮助，我很乐意更改应用程序架构，只是不确定我在这里有什么替代方案。我只使用 GPS 数据作为一个单位。我从不在集合中搜索一条记录，所以整个 ActiveRecord 是多余的。

我不想为了处理这个愚蠢的插入而不得不做一个完整的队列系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-19T23:27:39.983

使用 ar-extensions 的导入方式一次性全部导入：http: [//github.com/zdennis/ar-extensions/blob/master/ar-extensions/lib/ar-extensions/import.rb#L49-215](http://github.com/zdennis/ar-extensions/blob/master/ar-extensions/lib/ar-extensions/import.rb#L49-215)

问题是，如果您通过执行 a 导入每条记录`#save`，您实际上是在每行创建一个插入语句，并调用所有模型的验证。您可以改为构建一个更大的 sql insert 语句，一次将所有数据推入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-25T22:06:01.303

一直在考虑这个问题，似乎我的两个选择是将哈希序列化为数据库中的 blob，或者将其存储在其他地方。我没有 FS 访问权限，但可以使用 S3。

所以我想我已经改变了我的问题。对于在创建后存储几乎只读的 100kb 对象，对 S3 与 blob 存储的一般原则有何反馈？

我认为[这个线程](https://stackoverflow.com/questions/662488/would-you-store-binary-data-in-database-or-in-file-system)可能涵盖了我现在正在寻找的内容！

# wcf - 在 WCF 服务中使用 protobuf

> ID：789813
> 
> 赞同：17
> 
> 时间：2009-04-25T22:10:37.920
> 
> 标签：wcf, web-services, wcf-binding

我的 asp.net 网页位于 IIS Web 服务器上，它使用基本的 HTTP 绑定与 WCF 服务（位于 Windows 2008 应用服务器上）进行通信。我的 wcf 服务的性能似乎不是那么好，我想改进它。此外，我需要平衡可伸缩性，因为我的网站将有非常高的流量。

HTTP 压缩，节流是我知道的一些方法，但还没有尝试过。我可以使用[protobuf](http://code.google.com/p/protobuf/) API ...请建议...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-26T12:05:36.230

简短的回答是“是的”......

协议缓冲区规范本身不提供 RPC 堆栈，但在规范之外添加了一些。

首先，[protobuf-net](http://code.google.com/p/protobuf-net/)具有 WCF 挂钩，允许您将服务合同上的操作标记为[`ProtoBehavior`](http://code.google.com/p/protobuf-net/source/browse/trunk/protobuf-net/ServiceModel/ProtoBehaviorAttribute.cs). 然后交换常规`DataContractSerializer`以使用 protobuf-net 序列化。但是，有一些警告：

*   您的数据成员必须具有明确的顺序（例如`[ProtoMember(Order = 1)]`），因为它使用这些数字作为字段标识符（协议缓冲区使用数字字段）
*   它最适用于程序集/类共享（服务合同等），因为这种自定义行为不会在“mex”上公开

当与基本的 http 传输一起使用时，这也与 MTOM（如果启用）兼容以实现最大吞吐量。重要消息的性能在很大程度上与它们的大小成正比；[你可以在这里](http://code.google.com/p/protobuf-net/wiki/Performance)了解 protobuf-net 的大小。

或者，我也在开发一个定制的 RPC 堆栈。当前的[构建](http://code.google.com/p/protobuf-net/downloads/list)有一个基于 http 的工作堆栈，但我也计划在有机会时在原始 TCP/IP 上启用它。我还没有机会写出来，但我可以根据要求提供示例。请注意，要最方便地使用它，您还需要 3.5“扩展”dll。

有任何问题，请添加评论或给我发电子邮件（请参阅我的个人资料）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-25T22:24:10.383

如果 WCF 服务不需要在内部网络之外公开，您还可以查看使用基于 TCP 的绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T22:13:43.483

请参阅[protobuf-net](http://code.google.com/p/protobuf-net/)。

> protobuf-net 是一个 .NET 实现，它允许您高效、轻松地序列化您的 .NET 对象。它兼容大部分 .NET 系列，包括 .NET 2.0/3.0/3.5、.NET CF 2.0/3.5、Mono 2.x、Silverlight 2 等。

# vb.net - 你可以在VB中继承一个带有参数的子新（构造函数）吗？

> ID：789814
> 
> 赞同：43
> 
> 时间：2009-04-25T22:11:06.093
> 
> 标签：vb.net, inheritance, constructor, new-operator

在下面的代码中，我收到编译错误

```
Error Too many arguments to 'Public Sub New()' 
```

上`Dim TestChild As ChildClass = New ChildClass("c")`。`TestChild.Method1()`即使它们都在我继承的基类上，我也没有收到它。

```
Public Class BaseClass
    Public ReadOnly Text As String
    Public Sub New(ByVal SetText As String)
        Text = SetText
    End Sub
    Public Sub New()
        Text = ""
    End Sub
End Class

Public Class ChildClass
    Inherits BaseClass
End Class

Public Class TestClass
    Sub Test()
        Dim TestChild As ChildClass = New ChildClass("c")
        TestChild.Method1()
    End Sub
End Class 
```

我可以将子类更改为：

```
Public Class ChildClass
    Inherits BaseClass
      Public Sub New (ByVal SetText As String)
      MyBase.New(SetText)
    End Class
End Class 
```

正如下面所建议的，但我不必为方法 1 或其他继承的方法这样做，我正在寻找尽可能干净的代码。这可能是系统中继承参数化 New 语句的限制，但我无法在任何地方找到它的文档。如果需要，那么我想查看文档。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-04-26T00:35:18.043

The behavior that you are seeing is "By Design". Child classes do not inherti constructors from their base types. A child class is responsible for defining it's own constructors. Additionally it must ensure that each constructor it defines either implicitly or explicitly calls into a base class constructor or chains to another constructor in the same type.

You will need to define the same constructor on all of the child classes and explicitly chain back into the base constructor via MyBase.New. Example

```
Class ChildClass
  Inherits BaseClass
  Public Sub New(text As String)
    MyBase.New(text)
  End Sub
End Class 
```

The documentation you are looking for is section 9.3.1 of the VB Language specification.

*   [http://msdn.microsoft.com/en-us/library/aa711964(VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa711964(VS.71).aspx)

I think the most relevant section is the following (roughly start of the second page)

> If a type contains no instance constructor declarations, a default constructor is automatically provided. The default constructor simply invokes the parameterless constructor of the direct base type.

This does not explicitly state that a child class will not inherit constructors but it's a side effect of the statement.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-25T22:45:17.980

参数化构造函数不能像实例方法一样被继承。您需要在子类中实现构造函数，然后使用 MyBase 调用父类的构造函数。

```
Public Class ChildClass
    Inherits BaseClass

    Public Sub New (ByVal SetText As String)
      MyBase.New(SetText)
    End Class
End Class

Public Class TestClass
  Public TestChild AS New ChildClass("c")
End Class 
```

This limitation is not VB specific. From what I can gather, it's definately not possible in C#, Java or C++ either.

Here is one related post with the same question about C++:
**[c-superclass-constructor-calling-rules](https://stackoverflow.com/questions/120876/c-superclass-constructor-calling-rules)**

# php - 如何在我的本地 PHP 开发设置中设置 DOCUMENT_ROOT 和站点根目录？

> ID：789816
> 
> 赞同：14
> 
> 时间：2009-04-25T22:12:15.280
> 
> 标签：php, settings, document, localhost, root

我正在为一个拥有在线网站的人做一份工作。这对我来说是一个陌生的网站，我正在慢慢处理奇怪的代码。我在本地有 MAMP，我的[http://localhost/](http://localhost/)有很多客户端文件夹来自那里。在这段代码中，有很多 $_SERVER['document_root'] 命令和类似的引用![](/images/shopping.gif)在我的本地 PHP 开发区中刚刚消失。

我怎样才能轻松地将 document_root 引用设置为它应该是什么（只是在本地，真的不想弄乱站点文件，因为我需要再次上传它们并且不想破坏实时站点！并且有没有一种间接设置的方法，PHP 认为该站点的根目录是这样的，所以图像的 src 引用“/images/...”将正确显示...我在该站点的本地 PHP 开发 URL 是：[http:// localhost:8888/_CLIENTS/clientsite/www/](http://localhost:8888/_CLIENTS/clientsite/www/) ...但在代码中 '/images/...' 开头的 '/' 引用[http://localhost:8888/](http://localhost:8888/) ??

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-07-09T15:12:59.287

[@Eddie 的回答](https://stackoverflow.com/questions/789816/how-to-set-the-document-root-and-site-root-in-my-local-php-dev-setup/789905#789905)对我帮助很大，但我仍然需要做一些额外的研究来为自己在 OSX 上使用 XAMPP 解决同样的问题。为了后代的利益，我想我会在这里添加我的完整解决方案。

首先，我将以下条目添加到 httpd-vhosts.conf（在 XAMPP 中的“etc/extra/”文件夹下）：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/Applications/xampp/xamppfiles/htdocs/"
</VirtualHost>
<VirtualHost *:80>
    ServerName client1.my-machine
    DocumentRoot "/Applications/xampp/xamppfiles/htdocs/clients/client1/"
</VirtualHost>
<VirtualHost *:80>
    ServerName client2.my-machine
    DocumentRoot "/Applications/xampp/xamppfiles/htdocs/clients/client2/"
</VirtualHost> 
```

请注意，我专门为 VirtualHost url 使用了通配符而不是“localhost”，并在我指定每个子域名的地方添加了 ServerName 配置。另请注意，我使用了我的机器名称（“my-machine”）而不是“localhost”——这样就可以正确评估来自任何机器（不仅仅是 localhost）的所有请求。我在 OSX 中开发，但通过 Parallels 在各种 VM 中测试浏览器。使用这种方法，我可以从网络上的任何机器或 VM访问[http://client1.my-machine 。](http://client1.my-machine)指定“localhost”后，它只能在我的开发机器上运行。

**注意**：第一个 VirtualHost 条目用作默认值（如此处所述：[http](http://httpd.apache.org/docs/2.2/vhosts/name-based.html) ://httpd.apache.org/docs/2.2/vhosts/name-based.html ）并且是必需的，因此请求不会默认为自定义网站。

我还将权限设置添加到 httpd.conf，如[@Eddie's answer](https://stackoverflow.com/questions/789816/how-to-set-the-document-root-and-site-root-in-my-local-php-dev-setup/789905#789905)所示。这并不总是必需的，但我遇到了 2 个需要进行此更改的不同情况：

*   在默认 XAMPP http 根目录之外的目录中创建新站点（基本上任何可通过 http 访问的路径都必须设置明确的权限）
*   为设置为虚拟主机的站点添加 mod_rewrite 规则（在默认的 http 路径下），我收​​到错误“.htaccess: RewriteEngine not allowed here”。阅读 httpd.conf 中有关该`AllowOverride`选项的注释会使错误的原因显而易见，但我之前忽略了这一点。将此更改为“全部”修复了错误。

请注意，在编辑 httpd.conf 时，您可能需要取消注释以下行（默认情况下已为我注释掉），否则上面所做的 vhosts 更改将不会生效：

```
# Virtual hosts
Include /Applications/xampp/etc/extra/httpd-vhosts.conf 
```

最后，我还必须将自定义域名添加到我的主机文件中，如上面的评论中所述。在 OSX 上，您可以通过编辑“/private/etc/hosts”（在 Windows 上为“Windows/System32/drivers/etc/hosts”）并添加以下行来执行此操作：

```
127.0.0.1   my-machine
127.0.0.1   client1.my-machine
127.0.0.1   client2.my-machine 
```

**注意**：在默认的 OSX Finder UI 中，隐藏文件夹（包括 /private）是不可见的。您可以通过破解内部 Finder 选项（Google 了解详细信息）永久更改此设置，或者更简单地进行偶尔更改，只需使用“Go > Go to folder”菜单选项，您可以直接按名称打开隐藏文件夹。[就我个人而言，我使用了一个名为PathFinder](http://www.cocoatech.com/)的第三方 OSX shell ，我衷心推荐它（值得支付少量许可费）。它包括一个隐藏/显示隐藏文件的菜单选项，以及许多其他有用的功能。

拖累的一件事是，我还必须在指向我的物理开发机器的 Windows VM 主机文件中添加匹配的条目，以便 URL 可以通过 Apache/OSX 解析：

```
192.168.1.5 client1.my-machine
192.168.1.5 client2.my-machine 
```

我不需要单独的机器名称条目（自动解析），但是如果没有这些主机条目，将子域添加到它就无法正确解析。有时我的 Mac 的 IP 更改（通过 DHCP）确实很糟糕，但这是一个小麻烦。我假设我可以将其设置为不需要这些 IP，但我无法弄清楚并准备继续前进:)（如果有人知道答案，请发表评论）

现在我有多个客户端站点在一个地方运行，并且可以从我的所有开发/测试环境中访问。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-25T23:03:57.060

我推荐的是虚拟主机，这样您就可以在本地提供“外星站点”，而不会弄乱您的默认 Web 服务器。

*   localhost -> 你的起始页或其他
*   alien.localhost -> 客户站点，无论你想要什么路径/文档根目录。
*   x.localhost -> 另一个站点

### 在 apaches 全局配置文件或包含的 vhost.conf 中；

```
NameVirtualHost localhost:80
# the mysql tool's url
<VirtualHost phpmyadmin.localhost:80>
# and absolute path
DocumentRoot "/srv/www/phpMyAdmin/"
</VirtualHost>

#Same for the Client Site
<VirtualHost foo.localhost:80>
DocumentRoot "/path/to/desired/webroot/"
</VirtualHost> 
```

您可以通过首先指定以下内容来控制权限并设置全局站点

### 在 apache 的全局服务器配置中

```
DocumentRoot "/srv/www/htdocs"
#
# Configure the DocumentRoot Properties
#
<Directory "/srv/www/htdocs"> 
    Options All
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    AllowOverride All
    # Controls who can get stuff from this server.
    Order allow,deny
    Allow from all
</Directory>
#
# Configure Sub-Domain Properties. This prevents those nasty 403 errors
#

# mysql administration tool
<Directory "/srv/www/phpMyAdmin/">
    Options Indexes MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

# a client web site built with CakePHP
<Directory "/home/eddie/workspace/Digital_Business/app/webroot/">
    Options All
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T22:15:32.823

对于当前流程，您可以这样做

$_SERVER["document_root"] = "随便";

不过要小心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-25T22:23:35.923

这是特定于服务器的设置。如果您正在运行 Apache，您需要做的就是编辑您的`httpd.conf`文件（在基于 Unix 的系统上，它应该在`/etc/apache2/httpd.conf`或中`/etc/httpd/httpd.conf`，具体取决于您拥有的 Apache 版本）。文件中应该有一行如下所示：

```
#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "/whatever/your/document/root/is" 
```

从技术上讲，Eli 的方式也很有效，但总的来说，我认为编辑服务器变量并不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T22:18:30.727

也许您会发现以下站点很有用。有一些简单易懂的教程向您展示了要操作哪些设置来设置您满意的 this'n'that。我在那里找到了很多解释。

[Tanguay的教程](http://www.tanguay.info/wamp/installPhp5.php5?step=6)

# c++ - 如何使用 TinyXml 解析特定元素

> ID：789817
> 
> 赞同：7
> 
> 时间：2009-04-25T22:12:54.513
> 
> 标签：c++, xml, tinyxml

我想从`TinyXml`输出中解析一组元素。本质上，我需要挑选出任何端口元素的`"portid"`属性，该端口的状态为`"open"`（如下所示的端口 23）。

最好的方法是什么？以下是 TinyXml 输出的（简化）清单：

```
<?xml version="1.0" ?>
<nmaprun>
    <host>
        <ports>
            <port protocol="tcp" portid="22">
                <state state="filtered"/>
            </port>
            <port protocol="tcp" portid="23">
                <state state="open "/>
            </port>
            <port protocol="tcp" portid="24">
                <state state="filtered" />
            </port>
            <port protocol="tcp" portid="25">
                <state state="filtered" />
            </port>
            <port protocol="tcp" portid="80">
                <state state="filtered" />
            </port>
        </ports>
    </host>
</nmaprun> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-26T02:00:10.473

这将大致做到这一点：

```
 TiXmlHandle docHandle( &doc );

    TiXmlElement* child = docHandle.FirstChild( "nmaprun" ).FirstChild( "host" ).FirstChild( "ports" ).FirstChild( "port" ).ToElement();

    int port;
    string state;
    for( child; child; child=child->NextSiblingElement() )
    {

        port = atoi(child->Attribute( "portid"));

        TiXmlElement* state_el = child->FirstChild()->ToElement();

        state = state_el->Attribute( "state" );

        if ("filtered" == state)
            cout << "port: " << port << " is filtered! " << endl;
        else
            cout << "port: " << port << " is unfiltered! " << endl;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-02T14:48:01.327

除了 TinyXML，最好的办法是使用[TinyXPath库。](http://tinyxpath.sourceforge.net/)

[这是我对正确XPath](http://en.wikipedia.org/wiki/XPath_1.0)查询的最佳猜测：

`/nmaprun/host/ports/port[state/@state="open"][1]/@portid`

您可以使用[在线测试仪](http://www.mizar.dk/XPath/Default.aspx)进行检查。

# c# - C# Assert.AreNotEqual 与 Equals

> ID：789818
> 
> 赞同：5
> 
> 时间：2009-04-25T22:13:03.500
> 
> 标签：c#, nunit, equals

在尝试向自己验证时，IEnumerables 的 C# Equals 是一个引用 equals，我发现了一些奇怪的东西。在 NUnit 中进行以下设置

```
var a = (IEnumerable<string>)(new[] { "one", "two" });
var b = (IEnumerable<string>)(new[] { "one", "two" }); 
```

这个测试

```
Assert.IsFalse(a.Equals(b)); 
```

通过，而这个测试

```
Assert.AreNotEqual(a, b); 
```

没有。谁能解释为什么？

编辑：感谢您的回答。我刚刚阅读了 NUnit 的文档，它说了同样的话，即带有集合的 AreEqual 和 AreNotEqual 测试集合中每个元素的相等性。我想我被这个概念困住了，AreEqual 和 AreNotEqual 只是使用普通的 Equals。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T22:24:42.770

调用`a.Equals(b)`返回`false`是因为 a 和 b 不是相同的对象（尽管它们当然是相同的枚举）。除非被覆盖，否则该`Equals`方法会自动通过引用比较对象，这就是在这种情况下发生的情况。

[`Assert.AreNotEqual`](http://msdn.microsoft.com/en-us/library/ms243457.aspx)比这更聪明一点。与方法不同，它是为调试目的而设计的`Equals`，因此它实际上比较了两个枚举产生的序列，因为它被识别`IEnumerable<T>`为一种特殊类型。您还应该注意到它还做了其他有趣的事情，例如`true`当两个参数在数值上相同但值类型不同（例如`short`和`long`）时返回。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T22:59:27.243

我没有查看 NUnit 源代码来了解 NUnit 人如何编码 AreNotEqual。但是，我可以告诉你它是如何为具有相同行为的 MbUnit 完成的。

首先在 AssertNotEqual(a, b) 中通过执行如下代码检查引用是否相等：

```
 if (Object.ReferenceEquals(left, right))
        return true; 
```

在你的情况下，它会失败。接下来它检查对象是否为 IEnumerable 类型。如果是，则遍历它们并比较这些项目是否相同且顺序相同。

但是，IEnumerable 中的 T 类型比 MbUnit 中的字符串或 ValueType 更复杂 AssertNotEqaual(a, b) 不会失败。

```
 var a = (IEnumerable<StringBuilder>)(new[] { new StringBuilder("one"), new StringBuilder("two") });
    var b = (IEnumerable<StringBuilder>)(new[] { new StringBuilder("one"), new StringBuilder("two") });

    Assert.IsFalse(a.Equals(b));  // Success
    Assert.AreNotEqual(a, b);     // Success 
```

# javascript - 添加 onclick 属性以使用 JavaScript 进行输入

> ID：789824
> 
> 赞同：21
> 
> 时间：2009-04-25T22:15:38.313
> 
> 标签：javascript, input, onclick

我正在其中一个事件中创建用户输入：

```
var throwConnectBox = function() {
    chat_box = document.getElementById('box');
    div = window.parent.document.createElement('div');
    input = window.parent.document.createElement('input');
    input.type = "submit";
    input.value = "Join chat";
    input.onclick = "conn.send('$connect\r\n');";
    div.appendChild(input);
    chat_box.appendChild(div);
} 
```

...但生成的输入没有 onclick 属性。我试着用

```
 input.onclick = conn.send('$connect\r\n'); 
```

...相反，但也没有工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-25T22:20:30.033

试试这个：

```
 input.onclick = function() { conn.send('$connect\r\n'); }; 
```

史蒂夫

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-25T22:28:33.587

您的其中一条线路有问题；我已经为你更正了：

```
 var throwConnectBox = function() {
     chat_box = document.getElementById('box');
     div = window.parent.document.createElement('div');
     input = window.parent.document.createElement('input');
     input.type = "submit";
     input.value = "Join chat";
     /* this line is incorrect, surely you don't want to create a string? */
     // input.onclick = "conn.send('$connect\r\n');";?
     input.onclick = function() { 
         conn.send('$connect\r\n'); 
     };
     div.appendChild(input);
     chat_box.appendChild(div);
 } 
```

这更有意义吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T22:21:34.557

我想你可能想逃避 \r\n，如果你打算通过这些......

```
conn.send('$connect\\r\\n') 
```

我不太明白你的 onclick 处理程序试图实现什么......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T22:59:47.320

这是我决定使用 jQuery 的原因之一：

```
 $('<input type="submit" value="Join chat" />')
      .click( function() { conn.send('$connect\r\n'); } )
      .appendTo('<div></div>')
      .appendTo('#box'); 
```

# rm - 删除时无法对所有问题使用 yes -command

> ID：789825
> 
> 赞同：56
> 
> 时间：2009-04-25T22:15:45.677
> 
> 标签：rm

运行时，我得到一长串受只读保护的文件

```
rm -r trunk | yes 
```

我正在尝试通过一个命令对所有人回答“是”。

**你怎么能对所有问题都回答是？**

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2009-04-25T22:24:00.697

你有它倒退，正确的方法是：

```
yes | rm -r trunk 
```

但更好的命令是首先`rm`不要问你：

```
rm -rf trunk 
```

# c - 使用 C / Linux 的指针到指针的分段错误

> ID：789826
> 
> 赞同：3
> 
> 时间：2009-04-25T22:16:47.297
> 
> 标签：c, pointers, segmentation-fault

在以下代码中，我遇到了分段错误：

```
Set *getpar() {...}

char function(...) 
{
   Set **S;
   *S = getpar(); /* Segmentation Fault */
   ...
} 
```

但奇怪的是，几乎没有变化就没有分段错误：

```
Set *getpar() {...}
...
char function(...) 
{
   Set *S;       // One less '*'
   S = getpar(); // One less '*'
   ...
} 
```

据我所知，如果有一个 ' `Set **S`' 那么`*S`是一个指向`Set`对象的指针，所以如果第二个代码工作正常，为什么不应该第一个？`*S`第一个代码相当于`S`第二个代码，我说的不对吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-25T22:24:15.050

Set **S 未初始化，但您在下一条语句中取消引用 S：

*S = 随便

除非您真的非常不走运并且 S 指向您可以实际访问的内存位置，否则您正在尝试取消引用无效指针。

您需要先分配指针：

```
Set **S;
S = (S**)calloc(sizeof(S*),1);
*S = getpar(); 
```

或者，或者（我认为更可取）：

```
Set *S;
Set **T = &S;

S = getpar();

/* whatever else */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-26T16:23:31.897

**S 未初始化。它没有指向任何东西（垃圾），然后你在下一个语句中取消引用它。

# iphone - 保留计数和引用计数之间的区别在哪里？

> ID：789827
> 
> 赞同：1
> 
> 时间：2009-04-25T22:16:58.077
> 
> 标签：iphone, memory-management, uikit

我觉得两者是一回事，但我不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T22:40:19.347

[引用计数](http://en.wikipedia.org/wiki/Reference_counting)是一种资源管理技术。在 Objective-c 中，*retain*方法用于增加引用计数，因此术语引用计数和保留计数是可以互换的。

Cocoa的[内存管理编程指南](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html#//apple_ref/doc/uid/10000011)提供了一个很好的概述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T22:40:42.263

没什么，它们是同义词：

*   [http://etoileos.com/dev/docs/languages/obj-c/](http://etoileos.com/dev/docs/languages/obj-c/)

> ... 一个对象有一个引用计数（通常称为保留计数），当它达到零时，对象会收到一条 dealloc 消息，这会导致它自己释放。在最简单的层面上，每次你想保留一个指向对象的指针时，你都需要向它发送一个保留消息：...

*   [http://howtomakeiphoneapps.com/2009/04/the-secret-memory-management-tip-get-the-retain-count/](http://howtomakeiphoneapps.com/2009/04/the-secret-memory-management-tip-get-the-retain-count/)

> ...当一个应用程序突然从模拟器中消失时，通常意味着保留计数（引用计数的另一个名称）已变为零，系统将其清除但您尝试访问它！当您尝试将消息发送到曾经是您的对象的随机内存位时 - 噗 - 你整个应用程序就消失了......

（我假设您只是在谈论名称和概念保留计数，而不是方法保留）

# winforms - 我应该使用什么 winforms 控件来显示从 LINQ 返回的搜索结果表？

> ID：789834
> 
> 赞同：1
> 
> 时间：2009-04-25T22:21:26.773
> 
> 标签：winforms, linq, controls

当想要显示记录信息列表（姓名、ID #、日期）时，我应该使用什么控件？它大约有 5 个小列，我将返回很多行。

我正在使用 LINQ 从数据库中获取我需要的记录，并将其当前保存在 IQueryable 中。

谁能建议我在这种情况下应该使用什么 WinForms 控件（ListView、DataGridView、ListBox？

这个用例的标准是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-25T23:01:52.010

它真的取决于你想如何显示数据，如果你想绑定数据，你可以使用 datagridview 甚至只是一个 datagrid。另一种选择是使用新的 DataRepeater 控件。您可以将 linq 结果集绑定到 BindingSource，然后将 BindingSource 绑定到网格/中继器。

其他的选项也还可以，其实如果我想显示分组数据，我总是使用列表视图，我觉得它看起来不错。缺点是您需要手动填充列表视图（IMO 并不是那么大的交易）。另一件需要注意的事情是，ListViews 也有一个虚拟模式，非常适合大型结果集，但是，关于避免将大型结果集转储到 gui 小部件的规则当然仍然适用（也就是说，如果可能的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T04:26:46.560

**列表框**

这是一种非常粗糙的 UI 控件。您可以对列标题、选定项目等进行的操作存在限制。

例如，用户无法调整列大小，无法轻松突出显示特定项目

我将使用它来最快地实现具有固定宽度且无需进一步自定义的数据。例如从列表中选择一个选项

**网格视图控件**

如果您需要，这将提供很大的灵活性和定制性。在不知道确切上下文的情况下在这里解释所有功能是没有意义的。但是，默认外观不是很好。您需要对其进行自定义。对于大型数据集，内存消耗和性能还可以。不用太担心。

**列表显示**

没有可用的数据绑定。所以你需要写一些代码。但是，默认外观很吸引人，并且功能对用户友好。它也适用于大型数据集。我总是更喜欢它的标准外观并用它来显示只读数据。

最简单的方法是使用 DataGridView。如果您追求用户友好的 UI，请选择 ListView。

# php - PHP 如何保留链接中的所有 GET 变量？

> ID：789842
> 
> 赞同：2
> 
> 时间：2009-04-25T22:26:50.050
> 
> 标签：php, variables, get, hyperlink

我有一些 PHP 代码可以动态生成动态数据表。通过单击各种链接，您可以“优化”数据表。我想要的是这些链接中的每一个都保留当前的 ​​GET 信息并添加到其中。IE：

```
$allPreviousVars = ???; // Could be 20+ vars
echo "<a href='".$allPreviousVars."&newVar=2'>Link</a>"; 
```

我可以想办法通过循环遍历 $_GET 来做到这一点，但肯定有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-25T22:30:39.793

$_SERVER["QUERY_STRING"] 怎么样？

**编辑：**既然你很友善地给了我这个答案，我应该补充一件事。您应该在输出之前将上述变量包装在 htmlspecialchars() 中。否则，有人可能会在其中键入 URL `">`，这会破坏您的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T20:16:13.693

我这样做如下：

```
<?php echo http_build_query(array_merge($_GET, array('foo'=>'bar', 'foo2'=>'bar2')); ?> 
```

请注意，任何现有的 'foo' 或 'foo2' 键都将被替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T22:34:47.630

如果需要从修改后的数组生成查询字符串，请使用[http_build_query() 。](http://se2.php.net/manual/en/function.http-build-query.php)如果您只想将查询字符串发送到当前页面，请按照建议进行操作并使用 $_SERVER["QUERY_STRING"]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T22:37:52.863

我可能会这样做：

```
$query = mySanitizeFunction($_GET);
$url = http_build_query($query) . '&newVar=2'; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-25T22:29:05.490

正如您所建议的，您最好的选择是遍历 的内容`$_GET`，从现有查询参数和您的覆盖位的混合中构造 URL。

# regex - 如何在 Perl 的 Catalyst 中匹配 /foo 而不是 /foo/？

> ID：789843
> 
> 赞同：1
> 
> 时间：2009-04-25T22:27:10.270
> 
> 标签：regex, perl, catalyst

我想匹配 /foo，但不匹配 /foo/（其中 foo 可以是任何字符串）或 /

我在这些方面尝试了很多事情：

```
sub match :Path :Regex('^[a-z]+$')
sub match :Regex('^[a-z]+$')
sub match :Path :Args(1) 
```

但我无法达到我所需要的。

我不认为问题出在我的正则表达式上，而是因为我想处理没有参数的路径：

例如，对于 /aab/c，我从 Catalyst 获得：

```
[debug] "GET" request for "aab/c" from "192.168.1.100"
[debug] Path is "aab"
[debug] Arguments are "c" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-26T06:28:27.367

仅当没有其他更具体的操作可以处理请求时，Regex 或 LocalRegex 才会匹配。

您需要支持`sub lowermatch :Regex ('/([a-z]+)/([a-z]+)') { }`捕获 /foo/bar 并适当地处理它。不过，您现有的存根不应该捕获“/”。那应该通过 Root->default

或者，如果没有参数，您可以 $c->forward 在您现有的 sub 中，即：

```
sub match :Regex ('/foo') {
    my ($self, $c, @args) = @_;
    $c->forward('noargs_action') unless @args;
    ...
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T02:56:53.130

According to [the docs](http://search.cpan.org/~hkclark/Catalyst-Manual-5.7020/lib/Catalyst/Manual/Intro.pod#Action_types),

> Regex matches act globally, i.e. without reference to the namespace from which it is called...

If you want the regex to match only at the root of the current namespace, try using a LocalRegex action instead:

```
sub match : LocalRegex('^[a-z]+$') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T12:49:23.080

否 :Args 指定将意味着“任意数量的参数，0 或更大”。这意味着在您的初始示例中，`/foo/bar`和`/foo/bar/baz`是匹配的。正则表达式本身不匹配的正则表达式之后的路径元素将作为动作的参数被吃掉。

（那些告诉您有关您的正则表达式并说“我不知道 Catalyst 但是”的人在这里忽略了正则表达式匹配器中的 $ 可以在“/”之前匹配的点，而不总是在 URL 的末尾, 在 Catalyst 中。然后将其余部分用作参数。）

您将需要`:Args(0)`您想要实现的目标，指定将 0 路径部分用作参数（因此`/foo/bar` *不*匹配）。

但是，使用快速测试

```
sub match :LocalRegex('^[a-z]+$') :Args(0) 
```

证明了这`/foo`两者`/foo/`都匹配，（但这更接近一步：`/match/xyz`不匹配）。Catalyst 特别在路径中处理'/'，所以我不确定你是否能做得比这更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-25T22:51:14.033

免责声明：我对 Catalyst 不熟悉；这些是（Perl）正则表达式。

如果“foo”必须是字母数字，这将满足您的要求：

```
^\/\w*$ 
```

如果“foo”真的可以是任何东西，请改用它：

```
^\/$|^\/.*[^\/]$ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-26T06:30:34.070

LocalRegex 操作可能适合您所描述的内容，但是如果您正在做这种事情，那么您就是在与 HTTP 规范作斗争。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-25T22:50:16.750

我不知道 Catalyst，但根据阅读文档，它看起来像你想要的

子匹配：Regex('^[a-zA-Z]*$') {}

正则表达式分解如下：

*   ^ 在根之后匹配（即 /）
*   [a-zA-Z]* 匹配零个或多个 az 或 AZ 字符
*   $ 匹配 url 的结尾

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-09-14T15:14:03.007

这个答案可能不是你要找的，但为了完整起见，我只想把它放在这里：我可能会使用 ModRewrite 之类的东西来从 /foo/ 重定向到 /foo 变体。

# validation - 后缀符号验证？

> ID：789847
> 
> 赞同：11
> 
> 时间：2009-04-25T22:28:32.900
> 
> 标签：validation, postfix-notation

评估包含后缀表达式（例如：3 5 +）的字符串（数组，某物）以检查有效性的好方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-25T22:40:13.513

我在这里假设您所说的*有效*是指执行代码永远不会下溢堆栈，并且会在堆栈上留下一个值。如果您有更严格的有效性概念，您将需要更复杂的检查器。

如果你想检查这种有效性，没有必要评估字符串，你可以**使用计数器**，而不是堆栈。如果您进行评估，计数器会跟踪将在堆栈上的值的数量。为简化起见，假设您只有文字、二元运算符和一元运算符。该算法使用特殊的*递减*操作：如果递减时，计数器低于零，则字符串无效：

1.  将计数器初始化为 0。
2.  当您看到文字时，增加计数器。
3.  当您看到二元运算符时，将计数器递减两次，然后将其递增。
4.  当你看到一个一元运算符时，递减计数器，然后递增它。
5.  在字符串的末尾，如果计数器为 1，并且如果它从未低于 0，则该字符串是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-23T21:53:29.527

后缀表达式有效当且仅当：

1) 前两个元素是操作数（值），并且

2) 最后一个元素是运算符，并且

3) 对于每 n 个值，有 n-1 个运算符，并且

4) 在 n 个元素的列表中，从索引 i = 0 开始，对于 i < n-1（倒数第二个元素），每组由 k 个值（对于 k > 1 ）组成的元素后跟 (k-1 ) 运算符。当 k = 1 时，后面的运算符数 = k = 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T14:32:09.327

算法：维护一个栈，从左到右扫描后缀表达式——如果元素是数字，则将其压入栈中——如果元素是运算符O，则弹出两次，分别得到A和B。计算BOA并推回堆栈——当表达式结束时，堆栈中的数字就是最终的答案

//为了有效性如果你在堆栈中只剩下一个数字，它的正确表达式

//如果你在堆栈中留下了多个数字并且没有运算符，那么它是错误的

//如果堆栈中有一个或没有数字并且操作符离开，那么它是错误的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T09:22:23.180

检查后缀表达式是否有效：（如果输入在 char 数组中） 1\. 操作数的数量必须等于 no。运营商 + 1。要检查这一点，请保留一个检查变量。检查= 0。对每个操作数递增，对每个运算符递减。如果最终其值为 1，则表达式有效。

2.数组的前2个元素必须是操作数。没有后缀表达式可以将运算符作为第一个或第二个元素。通过 if 控制语句检查这一点。

# .net - 用于 Winforms 的 ComboBox 和 Linq to Sql

> ID：789849
> 
> 赞同：0
> 
> 时间：2009-04-25T22:29:00.170
> 
> 标签：.net, winforms, linq-to-sql, data-binding, combobox

我将 ComboBox 绑定到 BindingSource，而后者又绑定到 Linq 表。

此外，ComboBox 是从作为 Linq 表的数据源填充的。

每当用户选择 ComboBox 中的项目时，我想为 BindingSource.Current 的属性之一分配新值。我从 MSDN 了解到我需要使用 ComboBox 的 SelectionChangeCommitted 事件。

这是伪代码：

```
myCB_SelectionChangeCommitted(...)
{
    var val = myCB.SelectedValue; //I get selected value from user.
    var q = bindingSource.Current as XYZ;
    //Ommitted validation code to check if q is okay to work with
    q.SomeProperty = NewCalculatedValue; //SomeProperty is bound to label
    //After above line, myCB.SelectedValue is lost!
    //It seems that this event fires **before** selected value 
        //is written to bound data source
} 
```

我是否必须使用 myCB.DataBindings[0].WriteValue(); ? 或者，还有更好的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-27T19:47:20.743

我会做类似的事情

```
long index = q.databaseindex;
LinqObject = (from l in DataContext.linqtable where l.index = index select l).First();
   //Make sure you do a check that count > 0 before calling First!
LinqObject.property = value;
LinqObject.SubmitChanges(); 
```

这样，无论对象如何持久保存到 ComboBox，您都可以从数据库中捕获对象，然后使用值等对其进行更新。

让我们知道

# wcf - WCF windows服务作为预定服务

> ID：789852
> 
> 赞同：2
> 
> 时间：2009-04-25T22:30:48.200
> 
> 标签：wcf, windows-services

我有一个在应用服务器上运行的 .net WCF Windows 服务，它不断监视文件夹中的 xml 文件。如何使这项服务仅在每天的特定时间（01.00 小时）运行？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T23:52:16.133

您的服务是真正的服务还是只是监视 XML 文件夹的 WCF 应用程序？

如果您的 WCF 服务只是一个普通的应用程序，最简单的方法是使用 Windows 中的计划任务功能（在控制面板中找到）。只需让应用程序在启动时检查文件夹并设置计划任务，在您想要的任何时间启动应用程序。

如果目标应用程序是真正的 Windows 服务，则需要使用内部计时器。看看 System.Timers.Timer 类。

```
public void OnLoad() {
    Timer timer = new Timer();

    // Add event handler
    timer.Elapsed += WorkMethod;

    // Give us more control over the timer.
    timer.AutoReset = false;

    SetupTimer(timer);
}

// Setups the timer for the next interval and starts it.
private void SetupTimer(Timer timer) {
    timer.Interval = GetNextChecktime().Subtract(DateTime.Now).TotalMillisecond;

    timer.Start();
}

private void WorkMethod(object sender, EventArgs e) {
    // Do work here

    // Setup the timer for the next cycle.
    SetupTimer((Timer)sender);
}

private DateTime GetNextChecktime() {
    // Return the next time the service should run as a datetime.
} 
```

使用 SetupTimer 而不是仅使用 AutoReset = true 会自动重复的原因是将计时器与 GetNextChecktime() 同步。仅使用 24*60*60*1000 毫秒作为经过的计时器将提供 24 小时阶段，但您需要在 01:00 启动脚本以使其每天在 01:00 运行。

如果您仍然可以影响应用程序的运行方式，我实际上会推荐第一种方法。除非您在服务中有更多功能或需要维护一些持久状态，否则只有一个在启动时监视文件夹然后退出的应用程序会更简单。由于调度是由 Windows 完成的，因此它也更容易调试并且不易出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T09:04:39.270

如果您只需要每天运行一次或两次服务（甚至每周只运行一次），我会创建一个控制台应用程序并使用 Windows“计划任务”安排它在这些选定的时间运行。这样，只有 Windows 系统本身会检查是否已经到了“正确”的时间来唤醒您的服务并进行处理。

如果您有一个需要全天候运行的服务，例如只在给定的时间窗口内处理消息，那么您可能会选择 Windows (NT) 服务，它在后台运行，在服务器上运行而无需用户登录，可以做各种事情，比如检查时间看它是否需要工作，如果不需要，它可以继续睡觉:-)

根据我的经验，服务的编程和调试有点棘手 - 如果您可以将逻辑打包到独立的控制台应用程序中并将其作为计划任务运行，我更喜欢该解决方案。它更容易，并且仍然很好地完成了这个技巧。

马克

# language-agnostic - 专门的寻路方法？

> ID：789853
> 
> 赞同：0
> 
> 时间：2009-04-25T22:30:55.393
> 
> 标签：language-agnostic, artificial-intelligence, genetic-algorithm, path-finding, a-star

我在（非常少的）空闲时间制作了一个 roguelike。每个级别基本上都是几个由路径连接在一起的矩形房间。然而，我希望房间之间的路径看起来自然且多风。例如，我不会考虑以下自然外观：

```
 B       
       X       
       X       
       X       
      XX       
     XX        
    XX         
  AXX 
```

我真的想要更像这样的东西：

```
 B       
       X       
       XXXX    
          X    
          X    
          X    
          X    
  AXXXXXXXX 
```

这些路径必须满足一些属性：

1.  我必须能够指定它们的边界区域，
2.  我必须能够参数化它们的风和长度，
3.  线条不应看起来像是从一条路径开始并在另一条路径结束。例如，上面的第一个例子看起来好像从 A 开始，在 B 结束，因为它基本上反复改变方向，直到它与 B 对齐，然后就直奔那里。

我希望使用 A*，但老实说，我不知道我的启发式方法是什么。我也考虑过使用遗传算法，但我不知道这种方法最终会有多实用。

我的问题是，什么是获得我想要的结果的好方法？请不要只指定“A*”或“Dijkstra 算法”之类的方法，因为我还需要一个好的启发式帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T23:18:29.333

在你弄清楚如何产生路径之前，你必须找出一种更精确的方式来表达你想要的东西。一种方法是为每条路径分配一个分数，然后搜索高分路径。以下是一些需要考虑的问题：

1.  你更喜欢长直跑还是短跑？您将如何量化这种偏好？（要使搜索算法收敛，如果您的评分函数是非线性的，则会更容易。）

2.  如果您不想直接前往目的地，您可能需要奖励偏离主线的步骤。例如，在从 A 到 B 的路径上，考虑每个点，然后分三步计算点之间的方向。现在取那个方向和从 A 到 B 的直线方向的差的余弦。取反。对着你的行数为 -1，垂直的步数是中性的，离行数为 +1 的步数。

以下是一些很好的后续步骤：

*   再想几个得分点子。
*   用手画出十几条路径，并按照你喜欢它们的程度对它们进行排序。
*   对于每条路径，手动创建几个小的变化。
*   在所有路径上运行您的评分功能。继续摆弄，直到你得到一个喜欢*你*喜欢的评分功能。

*然后*，您将准备好考虑搜索算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-01T13:08:05.583

我想说寻路在这里是错误的术语：通常涉及找到从 A 到 B 的有效路线，而您的问题不在于找到该路线，而在于创建适合您目的的路线。您正在故意创建次优路径，并且它们的质量将难以量化。所以我不认为具有任何启发式的搜索算法将是该问题的最佳解决方案。当您有一个强制性标准（一条工作路径）和一些模糊、未定义的标准（自然外观和曲折）时，最好从满足强制性要求开始，然后尝试将其转变为其他要求。这样你总有一些有用的东西。

我建议，鉴于您似乎更喜欢以直角转弯的水平和垂直路径，从 A 到 B 的直线 2 段路径开始。（带有曼哈顿距离启发式的 A* 可以为您找到这个，但它就像很容易自己一步出来）。然后沿两条线段之一和该线段的两个端点之一取一个随机点，并将线的该子段平行于自身移动一段随机距离。然后添加 2 个额外的线段，将线的新位置连接到旧连接点。您的第二个示例显示了该算法的一次迭代：如果 A 是 (0,0) 并且 B 是 (5, 7) 那么您随机选择了第二条线段（垂直线段），在 (0,5 ) 和 (5,5) 处的中点，然后将该部分向右推 3 个单位，然后将其重新连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-07T21:31:39.520

这是一个想法——

从 A 开始，向随机方向移动——向左、向上或向下。每次移动后，滚动一个随机数以查看您是否转身。假设 75% 的时间你会继续朝同一个方向行驶，而 25% 的时间你会转向。转弯时，请始终朝靠近 B 的方向转弯。这意味着如果您向左或向右移动，则必须向上转，如果向上移动，请做出向右/向左选择根据您目前在目标的右侧或左侧的距离。此外，如果您到达世界边界之一，请转身！

这不应该太难编码。我有一种感觉，你只是想让这变得比它需要的更复杂......

# python - 打开 python 3 urllib 的调试输出

> ID：789856
> 
> 赞同：18
> 
> 时间：2009-04-25T22:31:58.323
> 
> 标签：python, http, debugging, python-3.x, urllib

在 python 2 中，可以通过执行从 urllib 获取调试输出

```
import httplib
import urllib
httplib.HTTPConnection.debuglevel = 1
response = urllib.urlopen('http://example.com').read() 
```

但是，在 python 3 中，这似乎已移至

```
http.client.HTTPConnection.set_debuglevel(level) 
```

但是，我直接使用 urllib 而不是 http.client 。如何设置它以便我的 http 请求以这种方式显示调试信息？

到目前为止，这是我正在使用的内容。如果我希望能够获得调试信息，最好的方法是什么？

```
#Request Login page
cookiejar = http.cookiejar.CookieJar()
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cookiejar))
request = urllib.request.Request(options.uri)
add_std_headers(request)
response = opener.open(request)
response_string = response.read().decode("utf8")
# ... 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-26T00:34:27.000

你第一次是对的。您只需`http.client.HTTPConnection.debuglevel = 1`在文件开头添加该行即可在应用程序范围内打开 HTTP 调试。`urllib.request`仍然使用`http.client`.

似乎还有一种方法可以为单个处理程序设置调试级别（通过创建`urllib.request.HTTPHandler(debuglevel=1)`和构建一个打开器），但是在我安装的 Python3（3.0b3）上它实际上并没有实现。我想这在最近的版本中发生了变化！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-10T05:57:46.433

在[https://github.com/urllib3/urllib3/issues/107](https://github.com/urllib3/urllib3/issues/107)中，[SmithSamuelM 建议](https://github.com/urllib3/urllib3/issues/107#issuecomment-11690207)：

```
if self.debug:
            import httplib
            httplib.HTTPConnection.debuglevel = 5
            requests.packages.urllib3.add_stderr_logger() 
```

# tdd - TDD 指南说从大范围开始还是从基础开始？

> ID：789866
> 
> 赞同：2
> 
> 时间：2009-04-25T22:39:37.867
> 
> 标签：tdd

遵循 TDD 指南时，我应该编写的第一个测试是什么？测试整个系统还是测试最小的核心方法？

示例：项目应读取 CSV 并将其转换为 XML。我的第一个测试应该是：

1.  获取 CSV（输入）和相应的 XML（预期）并检查应用程序是否正确进行转换（Assert.AreEqual（预期，实际））？

2.  获取 CSV（输入）和相应的内存表示（预期）并检查它是否被正确解析（Assert.AreEqual（预期，实际））？

第二个选项表示用于实现整个目标的方法之一，由第一个选项表示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-25T22:53:05.120

你必须首先有一个大局的想法，但是一旦你有了这个想法——从小处着手。决定你必须做的第一件事（小）。因此，例如，假设您想要一个方法，该方法给定一行输入，将单个值的集合作为字符串返回。我要编写的第一个测试将采用一串值：“1,2,3”并期望一个字符串数组{“1”，“2”，“3”}。我会编写更多测试来改变不同值的数量和类型。为空字符串添加测试等。显然，我不知道您的确切期望是什么，所以只需将上述方法视为一种可能的方式，而不是做您想做的事情的方式。

我会慢慢构建功能，并牢记所需的最终结果，让测试驱动应用程序的整体设计。我认为如果你从大处着手，你不会在 TDD 上取得成功，因为你必须一步一步从一无所有到完整的功能。TDD 是朝着最终目标迈出小步，让设计和代码随您的发展而增长。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-25T22:56:20.057

无论哪个更容易。有时，当您可以模拟较低级别时，最好从顶层开始。在其他时候，最好从低水平开始，然后从那里上升。

我认为我经常从顶部附近开始（例如 UI 模型），特别是如果我没有清楚地了解较低级别应该是什么样的。但是当我对整体架构有了清晰的了解并且系统很大时，我可能会从我知道需要的较低级别的组件开始。

在这个特定的示例中，“一个项目应该读取 CSV 并将其转换为 XML”，我将从一个测试开始，而不是将一个空的 CSV 文件（实际上只是一个内存中的字符串）转换为一些内存表示的空列表. 一次进行一次转换具有分离职责的好处，并且您将更好地知道错误在转换的哪一侧。

这应该是微不足道的测试，以获得良好的开端。之后，您可以编写一个测试来转换具有一行和一列的 CSV 文件。取决于它是如何进行的——如果证明自上而下工作太难——那么你可能会决定自下而上构建一些较小的部分，或者模拟一些较低级别的组件。

# c# - 编译 ac# 应用程序：错误：预期标识符

> ID：789869
> 
> 赞同：0
> 
> 时间：2009-04-25T22:40:20.847
> 
> 标签：c#

谁能告诉我为什么用包含以下代码的 .cs 文件编译 C# 应用程序会给我一个错误。见下文。

```
namespace defintions
{
    unsafe public struct name
    {
       char* firstname;
       char* lastname;
    } ;

   class Functions
    {
       [DllImport("C++Dll.dll")]
       public unsafe static extern long func(name *);    //error : Identifier expected

    }

 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-25T22:43:44.503

您的函数的参数没有名称（名称 * 不是名称）。

将其更改为

```
[DllImport("C++Dll.dll")]
       public unsafe static extern long func(name* theName);    //error : Identifier expected 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-27T02:22:38.400

您不必在示例中使用不安全的代码。类总是通过引用非托管代码来编组。试试这个：

```
namespace defintions
{    
    public class name    
    {       
        [MarshalAs(UnmanagedType.LPStr)]
        string firstname;
        [MarshalAs(UnmanagedType.LPStr)]
        string lastname;    
    } 

    class Functions    
    {       
        [DllImport("C++Dll.dll")]       
        public static extern long func(name theName);   
    } 
} 
```

# php - 更好的 PHP、MySql、HTML 和 JavaScript IDE

> ID：789874
> 
> 赞同：6
> 
> 时间：2009-04-25T22:42:49.903
> 
> 标签：php, javascript, mysql, html, ide

我目前正在使用以下 IDE。他们服务于他们的目的，但我想知道是否有更好的我可以切换到那里。

phpDesigner v6.2.5 (PHP) Navicat 8.0.29 (MySql) Dreamweaver CS3 (HTML & CSS) Spket IDE (JavaScript)

那是我收集的生产工具。想知道他们中是否有人我可以换一个更好的。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-25T22:48:11.950

[我会使用这个线程中的 PHP 编辑器。](https://stackoverflow.com/questions/116292/what-is-the-best-ide-for-php)

[此线程的 Javascript 编辑器。](https://stackoverflow.com/questions/41880/javascript-ides)

[此线程中的 HTML 编辑器。](https://stackoverflow.com/questions/270152/looking-for-a-simple-html-text-editor-for-windows)

[然后，我会使用这个线程中最好的 mysql 浏览器/编辑器。](https://stackoverflow.com/questions/40902/looking-for-mysql-ide)

[就个人而言，我喜欢 Eclipse，但是已经有一个线程讨论了 Netbeans 与 Eclipse 的优点。](https://stackoverflow.com/questions/408929/what-is-the-best-free-ide-for-java-programming-closed)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-25T23:08:47.937

Aptana 是 PHP、MySQL 和 Javascript 的绝佳选择。

作为 SpKET，Aptana 支持的数量很大。从 Prototype 到 ExtJs 的 Javascript 库，我想特别提一下 JQuery，我偏向于它。:) 所以你会得到 PHP + MySQL + Javascript 一起。另外，Aptana 支持 Python (Pydev) 以及 Ruby On Rails (RadRails)，以防您在不久的将来遇到它们。Aptana 基于 Eclipse 并且是开源的。

但是，Aptana 不为 HTML 和 CSS 提供所见即所得。Dreamweaver 将是最好的，它的所有模板等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T22:44:50.023

[NetBeans](http://www.netbeans.org)对 PHP、HTML、JavaScript 等有很好的支持，包括对 PHP 的调试器支持。这可能值得一试。

再说一次，你必须考虑；如果您拥有的工具集适合您，为什么要更改它？当然，你想要你能得到的最好的工具，但实际上，如果你对当前的套件感到满意，你不会想乱七八糟地改变东西，除非该套件的某些部分是（或变得）可怕不足。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-11T04:57:27.647

尝试[使用 RazorSQL](http://www.razorsql.com/)。它支持 MySQL，并有一个支持 PHP、HTML、JavaScript 和 CSS 的编程编辑器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-11T13:18:29.433

看看[PhpStorm PHP/HTML/JS Editor](http://www.jetbrains.com/phpstorm/)。它支持PHP和JS调试。与 PhpUnit 集成以进行测试，并为 HTML、JS 和 PHP 提供非常智能的代码完成。它还支持 Smarty 模板和新的 HTML5 JS API。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-25T23:07:00.517

Navicat 它是一个非常好的 MySQL IDE，但我使用原始的 MySQL GUI 工具工作得很好，Navicat 和它们之间的真正区别在于价格，MySQL GUI 工具是开源和免费的。

关于 PHP 编码，Eclipse 或 NetBeans 是非常强大的 IDE，它们都包含 PHP 插件或扩展。他们还拥有与 MySQL 连接的数据库导航器。当 Javascript 出现时，有一个非常好的 SpektIDE for Eclipse 插件。

我希望这可以帮助你。

# assembly - 关于汇编条件码寄存器

> ID：789893
> 
> 赞同：3
> 
> 时间：2009-04-25T22:56:56.327
> 
> 标签：assembly, flags, status-register

> 假设我们使用**addl** 指令执行 C 表达式 "t=a+b" 的等价，其中 a,b,t 是 **int**类型的变量，那么条件代码将根据以下 C 表达式设置：
> 
> CF: (unsigned t) < (unsigned a) 无符号溢出
> 
> ZF: (t==0) 零
> 
> SF: (t<0) 负
> 
> OF: (a<0 == b<0) && (t<0 != a<0) 有符号溢出

引用自计算机系统教科书。

*   CF 是进位标志。
*   ZF 是零标志。
*   SF 是标志标志。
*   OF 是溢出标志。

我不明白为什么这些 C 表达式有上面提到的效果。例如，为什么表达式 (t<0) 会设置 SF 标志？t<0 为真或假（因为教科书只告诉了这些变量的类型），但是为什么设置了标志标志？我真的很困惑，请帮助..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T00:22:01.100

CPU 在执行算术运算后设置这些标志。您所谓的“C 表达式”实际上是对设置各种 CPU 标志的条件的描述。例如，如果结果为 0，则将设置零标志。

或者为了解决您的具体问题，请执行以下操作：

SF: (t<0) 负

表示如果算术运算的结果是否定的，则 CPU 设置 SF 标志。't<0' 不是 C 表达式 - 它只是解释何时设置标志。

这些标志可以稍后用于控制流，使用根据标志值有条件地分支的指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-26T06:08:33.280

CF、ZF、SF 和 OF 是 CC（条件代码）寄存器中的单数位。还有其他位在其他条件下设置。每当 CPU 执行某些指令（包括`add`和`sub`）时，它都会根据操作的结果设置这些位。指令`cmp`和`test`功能分别与`sub`和`and`指令相同，只是它们完全丢弃结果，唯一的输出是条件标志。

假设我们有以下 C 代码：

```
int a, b;
...
a -= b;
if(a < 0)
{
    // stuff...
} 
```

一个天真的编译器可能会这样编译它：

```
 ; Suppose a is in the eax register and b is in the edx register
    sub %eax, %edx  ; subtract b from a, store result in a
    cmp $0, %eax    ; compare a to 0
    jl end_of_stuff ; if a < 0, goto end_of_stuff
    ; code for stuff goes here
end_of_stuff:
    ; code after if block goes here 
```

然而，一个更聪明的编译器会意识到`sub`指令已经设置了条件代码，所以它可以像这样编译它：

```
 sub %eax, %edx
    jl end_of_stuff   ; if a < 0, goto end_of_stuff
    ; code for stuff goes here
end_of_stuff:
    ; code after if block goes here 
```

请注意，`jl`当且仅当 SF ≠ OF 时，指令（小于时跳转）才会跳转。也就是说，如果结果为负且未发生溢出，或者结果为正且确实发生了溢出，则跳转。这对于确保在差值溢出（例如与 比较）时获得正确结果是必要`INT_MIN`的`INT_MAX`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-26T00:03:53.327

这仍然不是一个明确的问题，但这是我收集到的。我想你想知道“当我所做的只是 t=a+b 时，为什么要设置标志标志 (SF)？” 我会回答的。

简单的答案是'int' C 类型是有符号的，你必须说'unsigned int' 来获得无符号版本。因此，在 t=a+b 的情况下，这些变量都是有符号的。现在为什么可以设置标志：

```
let a = 5, b = -10
t = a+b
t = 5 - 10
t = -5 (SF will be set because of the negative)

let a = 5, b = 10
t = a+b
t = 5 + 10
t = 15 (SF will not be set because of the positive) 
```

如果您想了解更多关于出现在 C 中的数字符号，那么我建议您查看 Ones Complement 和 Twos Complement。

我希望这能回答这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-26T05:25:57.140

反之亦然。当您在 C 中编写 t < 0 时，它会编译为以 S 标志为条件的分支（也通常称为 N 表示 Negative）。在处理器中，S 标志只​​是从结果的最高位复制而来。

# c - 有人可以帮助解释具有术语“堆栈粉碎”的回溯输出吗？

> ID：789900
> 
> 赞同：1
> 
> 时间：2009-04-25T23:01:11.607
> 
> 标签：c, linux

请解释运行程序后堆栈粉碎的以下结果，其中我给出的输入远大于字符数组的容量。

```
 *** stack smashing detected ***: ./a.out terminated
             ======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6(__fortify_fail+0x48)[0xb7f856d8]
/lib/tls/i686/cmov/libc.so.6(__fortify_fail+0x0)[0xb7f85690]
./a.out[0x804845f]
    [0x666a6473]
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:07 91312      /home/mawia/a.out
08049000-0804a000 r--p 00000000 08:07 91312      /home/mawia/a.out 
0804a000-0804b000 rw-p 00001000 08:07 91312      /home/mawia/a.out
084cd000-084ee000 rw-p 084cd000 00:00 0          [heap]
b7e6d000-b7e7a000 r-xp 00000000 08:07 221205     /lib/libgcc_s.so.1
b7e7a000-b7e7b000 r--p 0000c000 08:07 221205     /lib/libgcc_s.so.1
b7e7b000-b7e7c000 rw-p 0000d000 08:07 221205     /lib/libgcc_s.so.1
b7e8a000-b7e8b000 rw-p b7e8a000 00:00 0 
b7e8b000-b7fe3000 r-xp 00000000 08:07 238955     /lib/tls/i686/cmov/libc-2.8.90.so
b7fe3000-b7fe5000 r--p 00158000 08:07 238955     /lib/tls/i686/cmov/libc-2.8.90.so
b7fe5000-b7fe6000 rw-p 0015a000 08:07 238955     /lib/tls/i686/cmov/libc-2.8.90.so
b7fe6000-b7fe9000 rw-p b7fe6000 00:00 0 
b7ff6000-b7ff9000 rw-p b7ff6000 00:00 0 
b7ff9000-b8013000 r-xp 00000000 08:07 221196     /lib/ld-2.8.90.so
b8013000-b8014000 r-xp b8013000 00:00 0          [vdso]
b8014000-b8015000 r--p 0001a000 08:07 221196     /lib/ld-2.8.90.so
b8015000-b8016000 rw-p 0001b000 08:07 221196     /lib/ld-2.8.90.so
bfd00000-bfd15000 rw-p bffeb000 00:00 0          [stack]
Aborted 
```

请解释以下内存映射的细节以及本报告中给出的各种细节的意义。

**编辑**：

该代码只是输入一个字符串。我故意输入大小大于我为产生堆栈粉碎而定义的字符数组的长度的字符串。代码：

```
 int main()

 {
  int a;
  char s[10];
  scanf("%s",s);
  return 0;
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T23:22:24.177

编辑：只需重新阅读问题的标题。你想知道为什么它被称为 Stack Smash。当您调用函数时，在 C 中创建的数组会为您的所有局部变量、函数的参数和函数的返回地址生成一个框架。该帧是在堆栈上制作的，称为堆栈帧；听起来很公平。这个堆栈帧应该只属于那个函数，并且应该与它周围的其他堆栈帧有边界；如果它可以改变其他堆栈帧，后果可能是可怕的。它会打破整个“功能有自己的范围”的想法。因此，因为你的数组是一个局部变量，它被放置在那个堆栈帧中，当你在其中放置太多信息时，你写的只是继续写，直到你到达堆栈帧的边界，然后你继续前进，C会让你这样做。它设定了界限，让你随意打破它们。这种超出框架边界的行为被称为“粉碎”堆栈，因为您直接在其他重要数据上运行。粉碎堆栈是通过在不应该写入的地方来破坏堆栈数据。

我应该首先说它不会给你太多信息，除非你碰巧知道哪些 c 指令被放置在内存的哪个部分。

Backtrace 告诉您在失败之前正在运行哪些代码；即你的程序在你溢出的数组上调用了 libc 代码。

内存映射告诉您内存的哪些部分专用于什么，例如您的程序在哪里，它调用的库在哪里，堆在哪里以及堆栈在哪里。它还为您提供了那些内存位置 rwxp（读、写、可执行、PROC_STACK）的权限，尽管我不确定 PROC_STACK 位。

基本上，除非您知道程序在内存中的映射，否则这是无用的信息。您也可以使用更有用的调试器。这告诉你一些事情：

1.  您的程序在 libc 中中断，这可能意味着多种情况。
2.  你用你的代码破坏了堆栈。

我假设您知道您的数组是在调用它的函数的堆栈帧中初始化的，因此，当您推送太多值时，您会离开框架并破坏堆栈。

我希望这会有所帮助。如果您想了解更多信息，请询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T15:26:04.750

听起来您的程序或 libc 是使用[缓冲区溢出保护](http://en.wikipedia.org/wiki/Buffer_overflow_protection)构建的，并且您想了解它转储的数据。

取程序崩溃的地址 (0x804845f)，从程序段的基地址 (0x08048000) 中减去它，然后在文件中查找程序`.text`的结果偏移量。`.map`

如果您没有`.map`文件，请编辑您的 Makefile 以传递启用映射文件生成的链接器选项（这取决于您使用的编译器/链接器）。以下是 GCC 的操作方法：[`-Wl,-Map,output.map`](http://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Link-Options.html#Link-Options).

您还可以使用调试器查找符号地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-26T16:14:00.470

您似乎无法（出于某种原因）发布您的代码。所以，这里有一些代码会触发相同的行为。您可以使用它来帮助确定您自己的程序中哪里出错了：

```
#include <stdio.h>

/* Feel free to edit this snippet, I wrote it in a hurry and it smells
 * like feet -- Tinkertim */

int main(void)
{
        char buff[10];
        unsigned int i;
        int n;

        printf("Stack protector complains in ");

        for (i = 0, n = 10 * sizeof(buff); i < n; i++, n--) {
                buff[i] = 'c';
                printf("%d, ", n);
        }

        /* This should not be reached if the stack protector is
         * enabled */

        printf("\nLook ma, no stack protector!\n");

        return 0;
} 
```

一旦我尝试写入 buff[] 大小的 2 倍或 20，这就会触发我的堆栈保护器（gcc / Linux）。我不知道其他系统上的各种堆栈保护器有多相似。

到目前为止，每个人都告诉你的是 100% 准确的。我提供这个答案作为补充，以帮助说明它是*如何*通过一个非常简短的示例发生的。

使用 gcc -Wall -o splashsmash.c 编译 .. 就像你会 C 一样（请原谅双关语），该语言可以让你打破所有规则。它会让你犯下谋杀罪，但不会让你侥幸逃脱（在大多数情况下）。

尝试（再次）编译它，但添加编译器标志 -fno-stack-protector 以查看由溢出引起的未定义行为。

**笔记：**

*   这并不意味着禁用堆栈保护器可以解决您的问题:)
*   堆栈保护器不防止溢出，它们只是保护堆栈，两者之间存在很大差异。

# python - Google App Engine 上的 2 个不同的 Django 模块

> ID：789902
> 
> 赞同：5
> 
> 时间：2009-04-25T23:01:59.060
> 
> 标签：python, django, google-app-engine

我遇到了 2 个用于将 Django 移植到 App Engine 的不同模块：

[http://code.google.com/p/app-engine-patch/](http://code.google.com/p/app-engine-patch/)

[http://code.google.com/p/google-app-engine-django/](http://code.google.com/p/google-app-engine-django/)

两者似乎都与 Django 1.0 兼容，

后者的特色下载是 8 月 8 日，而前者是 2 月 9 日。

相对优势是什么？

如果我根本不使用数据库怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-05-21T16:05:11.037

目前，App Engine 补丁已过时。

Djangoappengine 和 Django-Nonrel 提供“App Engine 上的原生 Django”： [http ://www.allbuttonspressed.com/blog/django/2010/01/Native-Django-on-App-Engine](http://www.allbuttonspressed.com/blog/django/2010/01/Native-Django-on-App-Engine)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-30T20:23:04.080

回答有点晚了，但到目前为止我遇到的关于 app-engine-patch 的问题是，虽然它是 Django 1.0 的一般功能完整的端口，但它放弃了 Django 模型，转而支持 AppEngine 的 db.Model。

考虑到两者之间的差异，这是可以理解的，但移植可能需要相当多的努力，具体取决于您的模型的参与程度（以及这些模型的使用；这意味着您也失去了 Django 查询语法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-26T03:10:59.510

嗯，我自己搞定了。我使用了 python 2.6，这对于应用程序引擎来说似乎是有问题的。从 python2.5 开始解决它。见[这里：](http://www.google.co.il/url?sa=t&source=web&ct=res&cd=3&url=http%3A%2F%2Fcode.google.com%2Fp%2Fgoogleappengine%2Fissues%2Fdetail%3Fid%3D1159&ei=dNDzSez9OcaC_Qb71NFW&usg=AFQjCNG5MMVCwbP-g1AQPxOAtxQGH1U44w&sig2=Jr29ZtKFQNpZTQULI_ieWg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-09T07:23:28.910

[App Engine 补丁](http://code.google.com/p/app-engine-patch/)是正确的方法。

# c++ - OpenGL 颜色矩阵

> ID：789904
> 
> 赞同：1
> 
> 时间：2009-04-25T23:03:24.923
> 
> 标签：c++, opengl, colors

如何让 OpenGL 颜色矩阵转换工作？

我修改了一个仅绘制三角形的示例程序，并添加了一些颜色矩阵代码，以查看是否可以更改三角形的颜色，但它似乎不起作用。

```
 static float theta = 0.0f;
glClearColor( 1.0f, 1.0f, 1.0f, 1.0f );
glClearDepth(1.0);
glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glPushMatrix();
glRotatef( theta, 0.0f, 0.0f, 1.0f );
glMatrixMode(GL_COLOR);

GLfloat rgbconversion[16] = 
{
    0.0f, 0.0f, 0.0f, 0.0f,
    0.0f, 0.0f, 0.0f, 0.0f,
    0.0f, 0.0f, 0.0f, 0.0f,
    0.0f, 0.0f, 0.0f, 0.0f
};
glLoadMatrixf(rgbconversion);
glMatrixMode(GL_MODELVIEW);

glBegin( GL_TRIANGLES );
glColor3f( 1.0f, 0.0f, 0.0f ); glVertex3f( 0.0f, 1.0f , 0.5f);
glColor3f( 0.0f, 1.0f, 0.0f ); glVertex3f( 0.87f, -0.5f, 0.5f );
glColor3f( 0.0f, 0.0f, 1.0f ); glVertex3f( -0.87f, -0.5f, 0.5f );
glEnd();
glPopMatrix(); 
```

据我所知，我正在加载的颜色矩阵应该将三角形更改为黑色，但它似乎不起作用。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-08T01:08:07.393

颜色矩阵仅适用于像素传输操作，例如在当前硬件上没有硬件加速的 glDrawPixels。但是，使用片段着色器实现颜色矩阵非常容易。您可以将矩阵作为统一 mat4 传递，然后将其与`gl_FragColor`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-27T19:44:59.003

“此外，如果支持 ARB_imaging 扩展，也接受 GL_COLOR。”

来自 glMatrixMode 文档。您的机器是否支持该扩展？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-25T23:55:55.687

看起来您做得正确，但是您当前的颜色矩阵也将三角形的 alpha 值设置为 0，因此在绘制它时，它不会出现在屏幕上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-11T12:53:37.180

我发现了可能的问题。“图像处理子集”支持颜色矩阵。在大多数硬件中，它由驱动程序支持。（软件实现）

解决方案：在后面添加这一行`glEnd()`：

```
glCopyPixels(0,0, getWidth(), getHeight(),GL_COLOR); 
```

它非常缓慢......

# macos - 为什么我在 Leopard 中创建的对话框在 Tiger 中看起来很糟糕？

> ID：789906
> 
> 赞同：1
> 
> 时间：2009-04-25T23:04:05.843
> 
> 标签：macos, cocoa, interface-builder, osx-leopard, osx-tiger

我在 Leopard 的 Interface Builder 中创建了一个带有 NSTextField 和 NSButton 的简单 NSWindow。我在我的程序中设置了窗口背景颜色。当我在 Leopard 中运行程序时，一切看起来都很好。但是当我在 Tiger 中运行它时，没有设置窗口的背景颜色。它具有带有水平条纹的默认老虎外观。

奇怪的是，NSTextField 和 NSButton 控件的背景颜色被设置为指定的窗口颜色，所以它们看起来真的很糟糕。

如何说服 Tiger 尊重我在 setBackgroundColor 调用中选择的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-26T10:32:39.447

如果我没记错的话，在 Tiger 下，如果你想改变它的颜色，你必须设置窗口的背景图案——“颜色”被（丑陋的）默认水色图案覆盖。

另一方面，你为什么要为 Tiger 编写代码？大约 0.3% 的机器运行 Tiger，而大约 100% 的机器由 luddites 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-26T13:41:12.257

我猜界面构建器在某处生成了一些仅限 Leopard 的样式代码（在 api 或类似的地方有效但不起作用），尝试在 Tiger 机器上创建它，看看它在 Leopard 中的样子？

# object - 共享域逻辑？

> ID：789907
> 
> 赞同：1
> 
> 时间：2009-04-25T23:04:10.303
> 
> 标签：object, logic

举个例子：

```
CreateOrderTicket(ByVal items As List(Of OrderItems)) As String 
```

你会把这种逻辑放在哪里：

```
CreateOrder should generate a simple list ( i.e. Item Name - Item Price )
PizzaOrderItem
SaladBarOrderItem
BarOrderItem 
```

您是否会推荐：重构具有共享属性的抽象类/接口的通用方法，称为 CreateOrderTicket

或者，

创建公开 CreateOrderTicket 的公共服务

我们显然不想要三个 createOrderTicket 方法，但是添加方法、继承、重载和使用泛型似乎只是为了抽象一个行为而付出的高昂代价。

为了一个简单的例子，假设（当前）没有 OrderItem 基类或接口。

帮助！！:)

ps 有没有办法在不强制所有继承对象使用相同名称的情况下进行重载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T00:36:27.087

在这种情况下，抽象基类听起来是最好的选择。当然，这一切都取决于这些项目有什么样的共享行为。在不了解更多信息的情况下，我猜所有这些订单商品都有名称和价格——将来您可能会添加更多常见的东西。

如果没有包含 Name 和 Price 属性的共享基类，您可能会难以实现 CreateOrderTicket 方法，该方法采用包含一种以上订单的列表。

此外，我认为从抽象基类继承不会像技术上已经从 Object 基类派生的对象那样高成本。（虽然我不认为这完全等同于自定义基类。）

VB.Net 可以使用与接口中指定的名称不同的名称从接口实现方法，但不要认为覆盖抽象功能也是如此。

# c++ - 多维数组中的数组偏移计算（列与行主要）

> ID：789913
> 
> 赞同：27
> 
> 时间：2009-04-25T23:13:42.293
> 
> 标签：c++, c, arrays

我最近阅读的一本教科书讨论了行专业和列专业数组。这本书主要关注 1 维和 2 维数组，但并没有真正讨论 3 维数组。我正在寻找一些很好的例子来帮助巩固我对使用行主要和列主要数组寻址多维数组中的元素的理解。

```
           +--+--+--+ |
          / / / /| |
         +--+--+--+ + | +---+---+---+---+
        / / / /|/| | / / / / /|
       +--+--+--+ + + | +---+---+---+---+ +
      / / / /|/|/| | / / / / /|/|
     +--+--+--+ + + + | +---+---+---+---+ + +
    / / / /|/|/|/| | / / / / /|/|/|
   +--+--+--+ + + + + | +---+---+---+---+ + + +
  / / / /|/|/|/|/ | |000|001|002|003|/|/|/|
 +--+--+--+ + + + + | +---+---+---+---+ + + +
 |00|01|02|/|/|/|/ | |004|005|006|007|/|/|/|
 +--+--+--+ + + + | +---+---+---+---+ + + +
 |03|04|05|/|/|/ | |008|009|00A|00B|/|/|/
 +--+--+--+ + + | +---+---+---+---+ + +
 |06|07|08|/|/ | |00C|00D|00E|00F|/|/
 +--+--+--+ + | +---+---+---+---+ +
 |09|0A|0B|/ | |010|011|012|013|/
 +--+--+--+ | +---+---+---+---+
 arr[5][3][4] | arr[3][4][5]

```

**注意：**原始问题错误地表示 arr[3][4][5]。我了解到原来的下标代表深度。数据已被更正以反映预期的阵列表示。

```
十六进制数据示例
 +---+---+---+---+ +---+---+---+---+ +---+---+---+--- +    
 |000|001|002|003| |100|101|102|103| |200|201|202|203|  
 +---+---+---+---+ +---+---+---+---+ +---+---+---+--- +  
 |004|005|006|007| |104|105|106|107| |204|205|206|207|   
 +---+---+---+---+ +---+---+---+---+ +---+---+---+--- +   
 |008|009|00A|00B| |108|109|10A|10B| |208|209|20A|20B|   
 +---+---+---+---+ +---+---+---+---+ +---+---+---+--- +   
 |00C|00D|00E|00F| |10C|10D|10E|10F| |20C|20D|20E|20F|
 +---+---+---+---+ +---+---+---+---+ +---+---+---+--- +
 |010|011|012|013| |110|111|112|113| |210|211|212|213|
 +---+---+---+---+ +---+---+---+---+ +---+---+---+--- +
      切片 0 切片 1 切片 2

 短 Arr[3][4][5]; // 假设数组填充了十六进制测试数据

 arr[1][2][3] = 0x10B 使用切片 1，第 2 行，第 3 列
 arr[2][3][4] = 0x210 使用切片 2，第 3 行，第 4 列
                       解析为第 4 行，第 0 列

```

row major
{000,001,002,003,004,005,006,007,008,009,00A,00B,00C,00D,00E,00F,010,011,012,013, 100,101,102,103,104,105,106,107,108,109,10A,10B,10C,10D,10E,10F,110,111,112,113, 200,201,202,203,204,205,206,207,208,209,20A,20B,20C,20D,20E,20F,210,211,212,213 }

column major {000,004,008,00C,010,001,005,009,00D,011,002,006,00A,00E,012,003,007,00B,00F,013, 100,104,108,10C,110,101,105,109,10D,111,102,106,10A,10E,112,103,107,10B,10F,113, 200,204,208,20C ,210,201,205,209,20D,211,202,206,20A,20E,212,203,207,20B,20F,213}

```
  使用行主要偏移量计算 arr[1][2][3] 的偏移量？
  使用列主要偏移量计算 arr[1][2][3] 的偏移量？

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-30T13:06:33.960

不要通过专注于 3 维和 2 维来人为地约束自己。而是**专注于学习用于寻址 n 维数组的表达式**。

表达 n 维寻址将巩固您对该主题的掌握，并且将更容易记住一个公式，而不是 2d 和 3d 寻址的单独公式。

* * *

这是我对 n 维寻址的尝试：

```
#define LEN 10

int getValue_nDimensions( int * baseAddress, int * indexes, int nDimensions ) {
    int i;
    int offset = 0;
    for( i = 0; i < nDimensions; i++ ) {
        offset += pow(LEN,i) * indexes[nDimensions - (i + 1)];
    }

    return *(baseAddress + offset);
}

int main() {
    int i;
    int * baseAddress;
    int val1;
    int val2;

    // 1 dimensions
    int array1d[LEN];
    int array1d_indexes[] = {2};
    int array1d_nDimensions = 1;
    baseAddress = &array1d[0];
    for(i = 0; i < LEN; i++) { baseAddress[i] = i; }
    val1 = array1d[2];
    val2 = getValue_nDimensions( // Equivalent to: val1 = array1d[2];
        baseAddress,
        &array1d_indexes[0],
        array1d_nDimensions
    );
    printf("SANITY CHECK: %d %d\n",val1,val2);

    // 3 dimensions
    int array3d[LEN][LEN][LEN];
    int array3d_indexes[] = {2,3,4};
    int array3d_nDimensions = 3;
    baseAddress = &array3d[0][0][0];
    for(i = 0; i < LEN*LEN*LEN; i++) { baseAddress[i] = i; }
    val1 = array3d[2][3][4];
    val2 = getValue_nDimensions( // Equivalent to: val1 = array3d[2][3][4];
        baseAddress,
        &array3d_indexes[0],
        array3d_nDimensions
    );
    printf("SANITY CHECK: %d %d\n",val1,val2);

    // 5 dimensions
    int array5d[LEN][LEN][LEN][LEN][LEN];
    int array5d_indexes[] = {2,3,4,5,6};
    int array5d_nDimensions = 5;
    baseAddress = &array5d[0][0][0][0][0];
    for(i = 0; i < LEN*LEN*LEN*LEN*LEN; i++) { baseAddress[i] = i; }
    val1 = array5d[2][3][4][5][6];
    val2 = getValue_nDimensions( // Equivalent to: val1 = array5d[2][3][4][5][6];
        baseAddress,
        &array5d_indexes[0],
        array5d_nDimensions
    );
    printf("SANITY CHECK: %d %d\n",val1,val2);

    return 0;
} 
```

输出：

```
SANITY CHECK:     2     2
SANITY CHECK:   234   234
SANITY CHECK: 23456 23456 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-25T23:19:08.537

我会看到[Row-major order](http://en.wikipedia.org/wiki/Row-major_order) Wikipedia 文章。有一节描述了大于 2 的维度。这里也有一篇好[文章](http://webster.cs.ucr.edu/AoA/Windows/HTML/Arraysa2.html)。那篇文章给出了使用行优先布局的三维数组的以下公式：

```
Address = Base + ((depthindex*col_size+colindex) * row_size + rowindex) * Element_Size 
```

对于 3D 数组：输入 A[depth][col][row]。基数是数组的起始偏移量。另外，大小变量是每个维度的不同大小。Element_Size 变量表示组成数组的任何类型的大小。

假设您有由标准 C++ 整数组成的行优先数组 a[4][6][5]。要计算 a[1][3][2] 的偏移量，您可以将以下数字代入公式：

```
Address = Base + ((1 * 6 + 3) * 5 + 2) * 4 
```

对于具有列主要布局的 3 维数组，等式宁愿是这样的：

```
Address = Base + ((rowindex*col_size+colindex) * depth_size + depthindex) * Element_Size 
```

您将使用列优先布局为上面的示例插入的数字现在是这样的：

```
Address = Base + ((2 * 6 + 3) * 4 + 1) * 4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-26T02:13:09.023

The terms 'row major' and 'column major' don't translate well to a third dimention. The notion that the next element stored is from the current row or current column break down. It sounds a little comical but this becomes 'depth major' vs. 'width major' ordering. Each subsequent element is no longer a single entry but one full two dimentional matrix.

```
          / X
         / 
        +---+---+---+
       /   /   /   /|  
      +---+---+---+-+-------   
      | 1 | 5 | 9 |/|  Y
      +---+---+---+ +
      | 2 | 6 | A |/|
      +---+---+---+ +
      | 3 | 7 | B |/| 
      +---+---+---+ +
      | 4 | 8 | C |/
      +---+---+---+

```

So the memory would literally have 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13 in memory sequentially. This is classical column major ordering. By placing the D entry at the position marked X you have not changed the fact that your matrix has colum major ordering. If you place the D entry where the Y is you still have not changed the fact that you are using column major ordering. Where you decide to place the next block will affect if you are using depth major (X) or width major (Y) ordering. As you well know these are equivalents but calling it something may assist you writing equations:

**[ 0 Based arrays assumed ]**

You access the memory location of a two dimentional colum major element through the equation:

```
MatrixOffset = base + (sizeof(entry) * ((4 * ( column - 1 ))   +  (row - 1))) 
```

This address would be adjusted using depth or width its all a matter of terminology.

```
TotalOffset = MatrixOffset + (sizeof(entry) * ((4 * 3) * (depth - 1))) 
```

**OR**

```
TotalOffset = MatrixOffset + (sizeof(entry) * ((4 * 3) * (width - 1))) 
```

The constants 4 and 3 would likely be variables COLUMNS and ROWS.

Don't ask me about the 4th dimention!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T07:33:54.460

当我问这个问题时，我希望能找到一些好的 3 维数组示例。特别是代码示例。由于我没有找到任何可以理解的东西，我决定创建一个小 C 程序来帮助展示这个概念。它在 3x4x5 数组中使用相同的测试数据。它还包括 5x5x5 阵列的测试数据。它从行主数组创建一个列主数组，因此可以验证偏移计算。

数组偏移方法有：

*   char *calc_RowMajor(char *Base, int elemSz, int depth_idx, int row_idx, int col_idx)*   char *calc_ColMajor(char *Base, int elemSz, int depth_idx, int col_idx, int row_idx)

    我在代码中添加了适用的注释，以帮助阐明代码在做什么。

    ```
     //
    // Arrays.cpp : 
    //     Purpose: Display rowMajor & colMajor data and calculations.
    //
    #include "stdafx.h"

    #define _show_Arrays 1  // 1=display rowMajor & colMajor arrays
    #define _square_array 0 // 1=use arr[5][5][5], 0=use arr[3][4][5]

    #if (_square_array == 1)
        const int depthSz = 5;
        const int rowSz = 5;
        const int colSz = 5;
        /*
        +---+---+---+---+---+
        |x00|x01|x02|x03|x04|
        +---+---+---+---+---+ 
        |x05|x06|x07|x08|x09|   
        +---+---+---+---+---+  
        |x0A|x0B|x0C|x0D|x0E|   
        +---+---+---+---+---+   
        |x0F|x10|x11|x12|x13|
        +---+---+---+---+---+ 
        |x14|x15|x16|x17|x18|
        +---+---+---+---+---+ 
              slice x          
        */
        short row_arr[depthSz][colSz][rowSz] = {
        { /* slice 0 */
          {0x000,0x001,0x002,0x003,0x004},
          {0x005,0x006,0x007,0x008,0x009},
          {0x00A,0x00B,0x00C,0x00D,0x00E},
          {0x00F,0x010,0x011,0x012,0x013},
          {0x014,0x015,0x016,0x017,0x018}},
        { /* slice 1 */
          {0x100,0x101,0x102,0x103,0x104},
          {0x105,0x106,0x107,0x108,0x109},
          {0x10A,0x10B,0x10C,0x10D,0x10E},
          {0x10F,0x110,0x111,0x112,0x113},
          {0x114,0x115,0x116,0x117,0x118}},
        { /* slice 2 */
          {0x200,0x201,0x202,0x203,0x204},
          {0x205,0x206,0x207,0x208,0x209},
          {0x20A,0x20B,0x20C,0x20D,0x20E},
          {0x20F,0x210,0x211,0x212,0x213},
          {0x214,0x215,0x216,0x217,0x218}},
        { /* slice 3 */
          {0x300,0x301,0x302,0x303,0x304},
          {0x305,0x306,0x307,0x308,0x309},
          {0x30A,0x30B,0x30C,0x30D,0x30E},
          {0x30F,0x310,0x311,0x312,0x313},
          {0x314,0x315,0x316,0x317,0x318}},
        { /* slice 4 */
          {0x400,0x401,0x402,0x403,0x404},
          {0x405,0x406,0x407,0x408,0x409},
          {0x40A,0x40B,0x40C,0x40D,0x40E},
          {0x40F,0x410,0x411,0x412,0x413},
          {0x414,0x415,0x416,0x417,0x418}}
        };

    #else
      const int depthSz = 3;
        const int rowSz = 4;
        const int colSz = 5;
        /*
        +---+---+---+---+
        |000|001|002|003|  
        +---+---+---+---+  
        |004|005|006|007|   
        +---+---+---+---+   
        |008|009|00A|00B|   
        +---+---+---+---+   
        |00C|00D|00E|00F|
        +---+---+---+---+ 
        |010|011|012|013|
        +---+---+---+---+ 
             slice x
        */
        short row_arr[depthSz][colSz][rowSz] = {
        {  /* slice 0 */
          {0x000,0x001,0x002,0x003},
          {0x004,0x005,0x006,0x007},
          {0x008,0x009,0x00A,0x00B},
          {0x00C,0x00D,0x00E,0x00F},
          {0x010,0x011,0x012,0x013}},
        { /* slice 1 */
          {0x100,0x101,0x102,0x103},
          {0x104,0x105,0x106,0x107},
          {0x108,0x109,0x10A,0x10B},
          {0x10C,0x10D,0x10E,0x10F},
          {0x110,0x111,0x112,0x113}},
        {  /* slice 2 */
          {0x200,0x201,0x202,0x203},
          {0x204,0x205,0x206,0x207},
          {0x208,0x209,0x20A,0x20B},
          {0x20C,0x20D,0x20E,0x20F},
          {0x210,0x211,0x212,0x213}}
        };
    #endif
        short col_arr[depthSz*colSz*rowSz]; //

    char *calc_RowMajor(char *Base, int elemSz, int depth_idx, int row_idx, int col_idx)
    {  // row major slice is navigated by rows
      char *address;
      int   lbound = 0; // lower bound (0 for zero-based arrays)
      address = Base        /* use base passed */
         + ((depth_idx-lbound)*(colSz*rowSz*elemSz))    /* select slice */
         + ((row_idx-lbound)*rowSz*elemSz)      /* select row */
         + ((col_idx-lbound)*elemSz);       /* select col */
        return address;
    }
    char *calc_ColMajor(char *Base, int elemSz, int depth_idx, int col_idx, int row_idx)
    {  // col major slice is navigated by columns
      char *address;
      int   lbound = 0; // lower bound (0 for zero-based arrays)
      int   pageSz = colSz*rowSz*elemSz; 
      int   offset;

      offset = (col_idx-lbound)*(colSz*elemSz)  /* select column */
             + (row_idx-lbound)*(elemSz);   /* select row */
        if (offset >= pageSz)
        {   // page overflow, rollover
            offset -= (pageSz-elemSz);                          /* ajdust offset back onto page */
        }
        address = Base            /* use base passed */
                + ((depth_idx-lbound)*pageSz)  /* select slice */
                + offset;
        return address;
    }

    void disp_slice(char *pStr, short *pArr,int slice,int cols, int rows)
    {
      printf("== %s slice %d == %p\r\n",pStr, slice,pArr+(slice*rows*cols));
      for(int x=0;x<rows;x++)
      {
        for(int y=0;y<cols;y++)
          printf("%03X ",*(pArr+(slice*rows*cols)+(x*cols)+y));
          printf("\r\n");
      }
    }

    int _tmain(int argc, _TCHAR* argv[])
    {
      // initialize col based array using row based array data
      { // convert row_arr into col_arr
        short *pSrc = &row_arr[0][0][0];
        short *pDst = &col_arr[0];
        for(int d=0;d<depthSz;d++)
          for(int r=0;r<rowSz;r++)
            for(int c=0;c<colSz;c++)
            {
        *pDst++ = *(pSrc+((d*rowSz*colSz)+(c*rowSz)+r));
            }
      }

      printf("Using Array[%d][%d][%d]\r\n",depthSz,rowSz,colSz);

    #if (_show_Arrays == 1)
      { for(int x=0;x<depthSz;x++) {disp_slice("rowMajor",&row_arr[0][0][0],x,rowSz,colSz);}}
      { for(int x=0;x<depthSz;x++) {disp_slice("colMajor",&col_arr[0],x,rowSz,colSz);}}
    #endif

      int d = 2;    // depth
      int r = 3;    // row
      int c = 4;    // column

      for(d=0;d<depthSz;d++)
      { 
        c = r = d;  // simple access test pattern arr[0][0][0],arr[1][1][1],arr[2][2][2],...
        { // retrieve Array element
          printf("    row_arr[%d][%d][%d] = %x\t",d,r,c,row_arr[d][r][c]);
          printf("&row_arr[%d][%d][%d] = %p\r\n",d,r,c,&row_arr[d][r][c]);
        }
        { // retrieve RowMajor element
          short *pRowMajor = (short*)calc_RowMajor((char*)&row_arr[0][0][0],sizeof(short),d,r,c);
          printf("calc_RowMajor(%d,%d,%d) = %x\t\t",d,r,c,*pRowMajor);
          printf("pRowMajor = %p\r\n",pRowMajor);
        }
        {   // retrieve ColMajor element
          short *pColMajor = (short*)calc_ColMajor((char*)&col_arr[0],sizeof(short),d,c,r);
          printf("calc_ColMajor(%d,%d,%d) = %x\t\t",d,r,c,*pColMajor);
          printf("pColMajor = %p\r\n",pColMajor);
        }
     } // for

     getchar(); // just to hold the console while looking at the information
      return 0;
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-27T16:02:50.190

基本上在具有行主 Eg Arr[3][4][5] 的 3D 阵列中，当您想要 Arr[0] 时，它会查找图像的前切片，如上面的 Arr[1] 第二切片等等。所以 Arr[0] 表示大小为 [4][5] 的二维数组，所以每个 Arr[x] 对应于 x*(4*5) 现在关于 Arr[x][y] 可以认为是大小为一维数组[5] 从上图中的顶视图看其位置是 [x][y] 所以当我们现在想要 Arr[x][y] = x*(4*5)+y*(5) 时 Arr[x] [y][z] 是 Arr[x][y] 在深度 z 处的特定元素 Arr[x][y][z]=x*(4*5)+y*5+z 现在基于您要存储在数组中的数据类型的大小，偏移量可以乘以大小得到相对于开始的地址

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-05T19:09:08.947

k维数组的公式是

```
 k-1       n
i  + ∑  i  *  ∏  c
 0  n=1  n   m=0  m 
```

其中 i 下标 n 是 n = { 0, 1, 2, ... k-1 } 的维度 n 的索引，c 下标 m 是 m = { 0, 1, 2, ... 的维度 m 的基数k-2}。

可以在此处找到更好的 PNG 格式的公式渲染：

[http://modula-2.info/m2r10/pmwiki.php/Spec/LanguageReport#MultiDimensionalArrays](http://modula-2.info/m2r10/pmwiki.php/Spec/LanguageReport#MultiDimensionalArrays)

# c - 使用 qsort 对列表进行排序？

> ID：789915
> 
> 赞同：1
> 
> 时间：2009-04-25T23:16:46.513
> 
> 标签：c, sorting, linked-list, qsort

我正在编写一个程序，您可以在其中通过键盘或文件输入单词，然后按长度排序。有人告诉我应该使用链表，因为单词的长度和它们的数量不是固定的。

我应该使用链表来表示单词吗？

```
struct node{
    char c;
    struct node *next;
}; 
```

然后如何使用 qsort 按长度对单词进行排序？qsort 不适用于数组吗？

我对编程很陌生。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T23:35:09.137

我认为有一个比你应该选择的排序算法更大的问题。其中第一个是您定义的结构实际上不会保存单词列表，而是包含单个字母（或单个单词）的列表。C 中的字符串表示为以空字符结尾的字符数组，布局如下：

```
| A | n | t | h | o | n | y | \0 | 
```

理想情况下，该数组将声明为 char[8] - 每个字母一个插槽，加上一个空字节插槽（字面意思是内存中的一个零字节。）

现在我知道您可能知道这一点，但为了清楚起见，值得指出这一点。当您对数组进行操作时，您可以一次查看多个字节并加快处理速度。使用链表，您只能在真正线性的时间内查看事物：从一个字符到下一个字符。当您尝试在字符串上快速执行某些操作时，这一点很重要。

保存此信息的更合适的方式是采用非常类似于 C 的样式，并在 C++ 中用作**向量**：使用 malloc 和 realloc 自动调整大小的连续内存块。

首先，我们设置一个这样的结构：

```
struct sstring {
    char *data;
    int logLen;
    int allocLen;
};
typedef struct string sstring; 
```

我们为这些提供了一些功能：

```
// mallocs a block of memory and holds its length in allocLen
string_create(string* input); 

// inserts a string and moves up the null character
// if running out of space, (logLen == allocLen), realloc 2x as much
string_addchar(string* input, char c);

string_delete(string* input); 
```

现在，这不是很好，因为您不能只使用 scanf 读入一个简单的缓冲区，但您可以使用类似 getchar() 的函数来获取单个字符并使用 string_addchar() 将它们放入字符串中以避免使用一个链表。字符串尽可能避免重新分配，每 2^n 插入一次，**您仍然可以使用 C 字符串库中的字符串函数！**这对实现你的排序有很大帮助。

那么现在我如何实际实现一个排序呢？您可以创建一个类似的类型，以类似的方式保存整个字符串，根据需要增长，以保存来自控制台的输入字符串。无论哪种方式，您的所有数据现在都位于可以作为数组访问的连续内存块中 - 因为它是一个数组！例如，假设我们有这个：

```
struct stringarray {
    string *data;
    int logLen;
    int allocLen;
};
typedef struct stringarray cVector;
cVector myData; 
```

和以前类似的功能：创建、删除、插入。

这里的关键是您可以在 string.data 元素上使用 strcmp() 实现排序函数，因为它只是一个 C 字符串。由于我们有一个使用函数指针的 qsort 的内置实现，我们所要做的就是包装 strcmp() 以用于这些类型并传入地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T23:22:15.377

如果您知道如何对项目进行排序，则在读取数据时应该使用插入排序，这样一旦输入了所有输入，您所要做的就是编写输出。使用链表是可以的，尽管您会发现它具有 O(N ² ) 的性能。如果您将输入存储在按长度排序的二叉树中（平衡树最好），那么您的算法将具有 O(NlogN) 性能。如果您只打算这样做一次，那么请追求实现的简单性而不是效率。

伪代码：

```
 list = new list
  read line
  while not end of file
      len = length(line)
      elem = head(list)
      while (len > length(elem->value))
          elem = elem->next
      end
      insert line in list before elem
      read line
  end

 // at this point the list's elements are sorted from shortest to longest
 // so just write it out in order
 elem = head(list)
 while (elem != null)
     output elem->value
     elem = elem->next
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-26T07:43:04.473

您可以通过分配一组指针来对链表进行 qsort，每个列表元素一个。

然后对该数组进行排序，在比较函数中，您当然会接收指向列表元素的指针。

然后，这将为您提供一个排序的指针列表。

然后，您通过遍历指针数组并依次调整每个元素来遍历您的列表。重新排列其在列表中的顺序以匹配指针数组的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T23:30:32.223

有很多方法可以处理它...如果您有足够的勇气尝试，您可以通过动态内存分配和 realloc 使用数组。

但是，qsort 的标准实现需要每个元素都是固定长度，这意味着有一个指向字符串的指针数组。

但是，与使用指向指针的指针相比，实现链表应该很容易。

我认为您被告知不要将字符串保存为列表；但*在*一个链表中：

```
struct node {
    char *string;
    node *next;
} 
```

然后，您所要做的就是，每次读取一个字符串时，在列表中的有序位置添加一个新节点。（遍历列表，直到当前字符串的长度大于您刚刚读取的字符串。）

单词不是固定长度的问题很常见，通常通过将世界临时存储在缓冲区中，然后将其复制到适当长度的数组中（当然是动态分配的）来处理。

**编辑：**

在伪代码中：

```
array = malloc(sizeof(*char))
array_size = 1
array_count = 0

while (buffer = read != EOF):
    if(array_count == array_size)
        realloc(array, array_size * 2)
    array_count++
    sring_temp = malloc(strlen(buffer))
    array[array_count] = string_temp

qsort(array, array_count, sizeof(*char), comparison)

print array 
```

当然，这需要大量的抛光。请记住，数组的类型是`char **array`，即“指向 char 的指针的指针”（您将其作为指针数组处理）；由于您要传递指针，因此不能只将缓冲区传递到数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T23:31:43.700

是的，经典的“C”库函数 qsort() 仅适用于数组。那是内存中值的连续集合。

Tvanfosson 的建议非常好——当你构建链表时，你可以在正确的位置插入元素。这样，列表总是排序的。

我认为你被告知使用链表的评论很有趣。确实，列表可以是在许多情况下使用的很好的数据结构，但它确实有缺点。例如，必须遍历它才能找到元素。

根据您的应用程序，您可能需要使用哈希表。在 C++ 中，您可以使用 hash_set 或 hash_map。

我建议你花一些时间学习基本的数据结构。在这里花费的时间将使您能够更好地评估诸如“使用链接列表”之类的建议。

# asp.net-mvc - 渲染视图（或部分）在另一个项目中？

> ID：789918
> 
> 赞同：8
> 
> 时间：2009-04-25T23:18:49.317
> 
> 标签：asp.net-mvc, path, view, render, partial

我有以下两个项目的解决方案 - MyNamespace.Services 和 MyNamespace.Web。

Web 包含一个 MVC Web 应用程序。

在服务项目中，我有一个 EmailService 类，负责向用户发送电子邮件。

我想对电子邮件模板使用部分或视图（ascx 或 aspx）。我已经找到了几种关于如何呈现部分视图并将结果作为字符串获取的解决方案，如果模板位于 Web 项目内部（因为它是调用电子邮件服务的 Web 项目中的控制器），则可以正常工作。

（我尝试使用的两种方法是[http://developersisland.blogspot.com/2009/01/renderpartial-to-string-in-aspnet-mvc.html](http://developersisland.blogspot.com/2009/01/renderpartial-to-string-in-aspnet-mvc.html)（在博客的底部）或[http:// /www.brightmix.com/blog/how-to-renderpartial-to-string-in-asp-net-mvc/](http://www.brightmix.com/blog/how-to-renderpartial-to-string-in-asp-net-mvc/)）

但我的电子邮件模板位于 Services 项目中。

如何从 Web 项目内部引用我的服务项目中模板（部分/视图）的路径，该路径与 LoadControl 或 RenderPartial 一起使用，它们都将虚拟路径作为参数？

似乎无论我做什么，根目录都设置为 Web 项目目录。

可能吗 ？

如果能够以某种方式使其独立于 Web 项目工作，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-26T00:19:53.930

如果不开发自己的视图引擎，我认为这是不可能的。默认视图引擎只会在某些位置查找局部视图——包括当前视图文件夹和共享视图文件夹。我不认为您可以搜索当前项目之外的视图，因为这些视图未在视图引擎中注册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T12:55:06.000

您可以考虑只创建 HTML 帮助程序来呈现电子邮件并将其作为字符串返回。

它是部分视图还是返回带有 HTML 的字符串的方法并不重要。我实际上认为对于您的案例帮助方法将是一个更好的选择。

一个简单的辅助方法在您使用它的方式上也更加灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-26T00:37:20.143

您可以尝试创建自定义视图引擎定位器或虚拟路径提供程序。以下是一些可以帮助您入门的示例：

*   [ASP.NET MVC 中单独程序集中的视图](https://stackoverflow.com/questions/19746/views-in-seperate-assemblies-in-aspnet-mvc)
*   [使用 ASP.NET MVC 对控制器进行分组](http://haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx)
*   [如何使用虚拟路径提供程序从 ASP.NET 2.0 中的虚拟路径动态加载和编译内容](http://support.microsoft.com/kb/910441)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:45:47.927

上面的所有链接都很好，这也可能有所帮助。你肯定能得到它来查找和使用视图。我遇到的问题是与他们合作，其他项目中没有代码完成等。通过摆弄项目文件也可以做到这一点，但老实说，我最终选择了上面的分组解决方案

[ASP.NET MVC 的插件架构](https://stackoverflow.com/questions/340183/plug-in-architecture-for-asp-net-mvc)

# .net - 如何在 WCF 中获取请求的原始字节？

> ID：789927
> 
> 赞同：1
> 
> 时间：2009-04-25T23:27:25.053
> 
> 标签：.net, wcf

出于日志记录的目的，我想获取发送到我在 WCF 中实现的 RESTful Web 服务的原始请求。

我已经实施了`IDispatchMessageInspector`。在我的实现中，*即使（尤其是）消息的内容无效*`AfterReceiveRequest`，我也想吐出消息的原始字节。这是出于调试目的。我的服务已经完美运行，但在解决客户试图调用服务以了解他们发送的内容（即原始字节）的问题时，它通常很有帮助。

 *例如，假设他们没有发送格式良好的 XML 文档，而是将字符串“your mama”发布到我的服务端点。我想看看他们就是这么做的。不幸的是`MessageBuffer::CreateBufferedCopy()`，除非消息的内容已经是格式良好的 XML，否则使用将不起作用。

这是（大致）我在实现中已经拥有的内容`AfterReceiveRequest`：

```
// The immediately following line raises an exception if the message
// does not contain valid XML. This is uncool because I want
// the raw bytes regardless of whether they are valid or not.
using (MessageBuffer buffer = request.CreateBufferedCopy(Int32.MaxValue))
{
    using (MemoryStream stream = new MemoryStream())
    using (StreamReader reader = new StreamReader(stream))
    {
        buffer.WriteMessage(stream);
        stream.Position = 0;
        Trace.TraceInformation(reader.ReadToEnd());
    }
    request = buffer.CreateMessage();
} 
```

我的猜测是，我需要在原始*请求*变为`Message`. 这很可能必须在 WCF 堆栈中比`IDispatchMessageInspector`.

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-25T23:59:38.300

你想创作一个编码器；这会将字节从线路中拉出以创建消息（在所有协议通道开始验证它之前）。

[http://msdn.microsoft.com/en-us/library/ms751486.aspx](http://msdn.microsoft.com/en-us/library/ms751486.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2010-05-10T20:09:42.093

如果您只想记录消息，而不以任何方式处理它们，那么只需启用此处详细说明的日志记录。

[http://msdn.microsoft.com/en-us/library/ms730064.aspx](http://msdn.microsoft.com/en-us/library/ms730064.aspx)

# jquery - 带有 TempData 的 ASP.NET MVC 和 jQuery

> ID：789929
> 
> 赞同：3
> 
> 时间：2009-04-25T23:30:05.420
> 
> 标签：jquery, asp.net-mvc

我的一个视图中有一个链接，用户可以单击该链接调用 ActionResult。链接是这样的：

```
<a class="do_something" href="#">lorem ipsum</a> 
```

然后我有一些 javascript 发布到 ActionResult（没有数据传递给 ActionResult），如下所示：

```
$("a.do_something").click(function() {
   var urltopost = "/foo";

   $.post(urltopost);
   return false;
}); 
```

ActionResult 旨在然后做一些事情，如下所示：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult foo()
    {
        //do something here

        TempData["Success"] = "You have successfully done something";
        return RedirectToAction("Index", "Home");
    } 
```

我想要发生的是，当用户单击链接时，ActionResult 会执行它的操作，然后将用户重定向到另一个视图，显示 TempData 消息让他们知道一切正常。

一切正常，除了重定向部分。单击链接时，将调用 ActionResult，它会执行应做的操作，但不会重定向视图。

问题是，当 ActionResult 中发生某些事情时，如何将用户重定向到所需的视图？从 jQuery 重定向是不是更好的做法（如果是，怎么做）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-25T23:48:33.863

您的 javascript 只是调用控制器操作，但它不会对返回的值做任何事情（在这种情况下，它重定向到的视图中的 html）。

您应该创建一个回调函数并将当前的 html 替换为 javascript $.post() 调用返回的 html。

例如，这是我的一些代码，它将表单发布到返回部分视图的控制器操作：

```
 var f = $("#FilterProfile");
            var action = f.attr("action");
            var serializedForm = f.serialize();
            $.post(action,
                serializedForm,
                function(data) {
                    $("tbody").html(data);
                }); 
```

你的代码应该是这样的：

```
 $.post("/foo",
                      function(data) {
                          $("html").replaceWith(data);
                      }); 
```

我没有测试它，但你应该得到图片。如果您在 FF 浏览器上安装了 firebug，您可以看到 $.post() 方法返回的内容。

如果你想做一个“真正的”重定向并允许用户使用他的后退按钮，你也可以让 $.post() 返回要重定向到的视图的 URL，然后`location.href = data;`用来做重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T00:04:31.843

为什么你甚至只是为此而使用ajax？只需让链接直接转到操作（使用 GET）。

```
<a class="do_something" href='/foo'>lorem ipsum</a>

[AcceptVerbs( HttpVerbs.Get )]
public ActionResult foo()
{
   // do something

   TempData["Success"] = "You have successfully done something";
   return RedirectToAction("Index","Home");
} 
```

如果动作是一个长时间运行的动作并且你想提供一个微调器或其他东西来指示工作正在进行，我可以通过 jQuery 看到它，但对于大多数动作，我只会让链接连接到动作。如果您确实有一个长时间运行的操作，那么我会为您的帖子设置成功回调，只需将 location.href 设置为正确的 Url - 并让操作返回文本消息或 html（用于错误等）。我认为您需要使用 ajax 方法来获取错误反馈。

```
$("a.do_something").click(function() {
   var urltopost = "/foo";

   $.post(urltopost, null, function() { location.href = "/home"; } );
   return false;
}); 
```

# c# - 在 C# 中在运行时添加和删除标签页

> ID：789938
> 
> 赞同：1
> 
> 时间：2009-04-25T23:36:19.493
> 
> 标签：c#, .net, visual-studio-2008, forms

我有一个程序，我希望每个人都有自己的选项卡，每个选项卡都是相同的，但是如果需要，我想删除一个选项卡。

```
private void addPerson(string name)
{
  TabPage tmp = new TabPage();
  ListView tmpList = new ListView();
  Button tmpButton = new Button();
  this.SuspendLayout();
  this.tabFrame.SuspendLayout();
  tmp.SuspendLayout();
  tmpList.SuspendLayout();
  tmpButton.SuspendLayout();
  ...
  //build the controll itself
  tmp.Controls.Add(tmpButton);
  tmp.Controls.Add(tmpList);
  tmp.Location = new System.Drawing.Point(4, 22);
  tmp.Name = name.Replace(' ', '_');
  tmp.Padding = new System.Windows.Forms.Padding(3);
  tmp.Size = new System.Drawing.Size(284, 240);
  tmp.TabIndex = 3;
  tmp.Text = name;
  tmp.UseVisualStyleBackColor = true;
  //add it to frame
  this.tabFrame.Controls.Add(tmp);
  tmpButton.ResumeLayout(true);
  tmpList.ResumeLayout(true);
  tmp.ResumeLayout(true);
  this.tabFrame.ResumeLayout(true);
  this.ResumeLayout(true);
{ 
```

名称将采用“Scott Chamberlain”的形式，因此我删除了空格并在名称字段中使用下划线。我可以很好地添加标签，它们显示的格式正确，但是当我尝试使用代码删除标签时：

```
private void removePerson(string name)
{
  this.SuspendLayout();
  this.tabFrame.SuspendLayout();
  this.tabFrame.Controls.RemoveByKey(name.Replace(' ', '_'));
  this.tabFrame.ResumeLayout(true);
  this.ResumeLayout(true);
} 
```

该选项卡不会从我的程序中消失。删除标签我缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-26T00:00:27.377

[![替代文字](https://i.stack.imgur.com/d5eZs.png)](https://i.stack.imgur.com/d5eZs.png)
[（来源：[codinghorror.com](http://www.codinghorror.com/blog/images/works-on-my-machine-starburst.png)）]

`TabPage`使用特定创建一个简单`Name`并将其添加到`Controls`or`TabPages`工作，因此`RemoveByKey`在两者上删除它`Controls`and `TabPages`。

是否有任何代码可能会在以后更改名称？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T23:52:55.977

对于 Add() 和 RemoveByKey() 操作，使用`tabFrame.TabPages`而不是 tabFrame.Controls。

TabPages 是更具体的 Controls 版本，如果发生这种情况，您最好使用更专业的选项。

# c++ - 用 C++ 播放声音？

> ID：789942
> 
> 赞同：4
> 
> 时间：2009-04-25T23:39:15.883
> 
> 标签：c++, audio, media

我将如何使它在我的程序中有一个按钮，当单击该按钮时我希望它在不打开和媒体播放器的情况下播放 .wma 文件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-25T23:47:29.733

C++ 标准不包括此功能。这意味着它取决于您的系统提供什么。

对于 Windows，您可以尝试类似[PlaySound](http://msdn.microsoft.com/en-us/library/ms712879.aspx)的方法。

但是，最好的办法是使用预先存在的库，例如：

*   [开放式](http://connect.creativelabs.com/openal/default.aspx)
*   [低音](http://www.un4seen.com/)
*   [FMOD](http://www.fmod.org/)
*   [SDL](http://www.libsdl.org/)的：[声音](http://www.libsdl.org/intro.en/usingsound.html)。

搜索[C++ 声音库](https://duckduckgo.com/?q=C%2B%2B+Sound+Library)会带来很多信息。

另外，请查看其他三个[SO 主题](https://stackoverflow.com/search?q=c%2B%2B+play+sound)：

*   [什么是适用于 Windows 的最佳 C++ 声音 API？](https://stackoverflow.com/questions/314522/what-is-the-best-c-sound-api-for-windows)
*   [如何在 C 中播放 MP3 文件？](https://stackoverflow.com/questions/428884/how-to-play-mp3-files-in-c)
*   [学习使用 C++ 处理音频](https://stackoverflow.com/questions/711350/learning-to-work-with-audio-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T01:16:29.223

尽管上面的答案提到了它（以及其他所有内容，它没有给出任何建议......），但 FMOD 是 C++ 声音之王（最常用）并且效果很好，所以我特别推荐 FMOD。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T20:18:19.610

[Gstreamer](http://www.gstreamer.net/)是一个免费的、跨平台的多媒体框架，用 C（使用[GObject](http://library.gnome.org/devel/gobject/unstable/)）编写，允许对包括 wma 在内的多种媒体进行编码/解码。非常易于使用且有据可查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T14:45:07.490

对于 Windows，老实说，您最好的选择是 DirectShow。RenderFile API 让您只需几行代码即可播放大多数音频文件类型。

DirectShow 最好的部分是它是 Windows 平台的一部分，因此您不需要捆绑外部组件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-27T16:38:07.300

KDE 的[Phonon](http://phonon.kde.org/)是一个跨平台（！）C++ 多媒体库。它支持原生声音系统作为后端。如果您以前没有看过它，那么值得一看，只需 83 行代码就可以编写一个简单的视频播放器。

# php - 最好的 PHP 5 模板技术？

> ID：789944
> 
> 赞同：3
> 
> 时间：2009-04-25T23:42:26.220
> 
> 标签：php, templating

我希望在 php 中构建自己的模板层作为我的 OOP 框架的一部分，但我正在寻找一些如何正确执行此操作的示例。我想避免解析每个 html 文件来查找告诉模板引擎做什么的注释，而是使用更快/更干净/现代的技术。我只需要一些例子，因为我用谷歌环顾四周，没有任何东西引起我的注意。我试图将我的演示文稿和逻辑分开，但我正在做的事情需要大量的逻辑贯穿整个 html 代码。

，谢谢

PS 我不想使用现有的模板引擎，例如 smarty，我想构建自己的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-26T01:17:27.817

我会问你同样的问题，我会问任何建议 Smarty 的人：

为什么要在 PHP 中添加模板语言，这是一种模板语言？

PHP 是一种模板语言。我认为人们忘记了这一点，或者试图将其视为纯 OO 语言，[但事实并非如此](http://michaelkimsal.com/blog/php-is-not-object-oriented/)。发挥 PHP 的优势。不要试图让它不是它的东西。

说了这么多，很难回答你的问题，因为你没有说你的模板系统有多简单或复杂，即你打算支持哪些功能。

如果您的模板语言相对简单，那么正则表达式可能是要走的路。但是，这不适用于一些琐碎的情况。控制结构的嵌套可能是最常见的。在这种情况下，您需要编写某种形式的基本解析器。

假设您所有的模板结构都在这样的块中：

```
{:...:} 
```

因为这在 HTML 页面中相对不太可能发生（尽管为了完整起见，您需要满足用户确实想要使用这些字符组合的情况。

您需要扫描文件以查找此类表达式并相应地处理它们。正则表达式可用于查找所有但不一定匹配的，例如条件包含，例如：

```
{:if ...:}
Some conditional content
{:endif:} 
```

为什么？因为这：

```
{:if *some condition*:}
{:if *some other condition*:}
Some other conditional content
{:endif:}
Some conditional content
{:endif:} 
```

无法可靠地使用正则表达式进行匹配，因此您需要将文件解析为某种形式的词位树，然后对其进行处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-26T00:25:11.967

你想过模型-视图-控制器模式吗？您可以使用函数和变量（在控制器内部）抽象所有逻辑并将它们公开给视图。这可能是模板的第一步。

PS：我测试了一个名为 PHPTAL（模板属性语言）的模板引擎。我喜欢它，因为您可以创建带有嵌入自定义 html 属性中的逻辑的 html 模板，而不会破坏设计。

我希望这些想法对你有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T13:06:36.667

*最快*的方法是使用 php 本身，因为 php 是一种模板语言。当然，有时出于安全原因，这不是一个选择，并且设计人员必须学习基本的 php（*这真的很痛苦*）。有时，它也会变得非常丑陋，而其他更专业（且功能更弱）的模板系统可以保持干净。

因此，如果您真的必须自己构建，那么我想到了 3 个选项...

1.  作为初学者，我通过自定义解析（strpos、substr 等）做了一些模板化。它非常缓慢，不优雅且容易出错。我不建议这样做。

2.  正则表达式混乱。如果您不擅长正则表达式，请忘记它。但这可能是更快的方法之一。

3.  也许您可以将某些东西与[php tokenizer 函数](http://at.php.net/manual/en/book.tokenizer.php)一起使用...

4.  [DOM](http://www.php.net/dom)扩展！使您的模板与 xhtml 兼容并将它们作为 xml 文件加载。哇，所有的解析都为你完成了！现在你有了一个带有自定义标签的漂亮树，比如

```
 <loop item="$myVariable" times="$x">
        <print name="$myVariable->name" entities="yes" nl2br="yes" purify="removeemptytags, xss"/>
        <hr/>
      </loop> 
```

已经看起来有点像聪明了，恕我直言。您只需要进行一些解释（回显循环节点 $x 次的子节点），或者将其转换为 php 并缓存它（聪明的这样做是为了提高性能）。

或者，如果您更喜欢注释，类似这样的内容（但在这里您必须进行比使用自定义标签更多的解析）

```
 <!-- begin loop:myVariable -->
      <-- print:myVariable->name() -->
      <hr/>
    <!-- end loop --> 
```

我无法想象 DOM 方法会非常快，但是如果您真的需要 moar 速度，则转换为本地 php 代码和/或缓存呈现的 html 会更好（*如果速度真的**那么**重要，请不要编写您的自己的代码。除非你可能是 carmack 或 skeet*）。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-26T02:17:52.163

You would require to implement parsers. But instead of parsing it each time do what Smarty and others do save the parsed output for later use. It would be even better if output of your parser is PHP code itself.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-25T23:58:49.720

> ...我试图将我的演示文稿和逻辑分开，但我正在做的事情需要大量的逻辑通过 html 代码......

[嘿，有这个……](http://www.codewalkers.com/c/a/Display-Tutorials/Writing-a-Template-System-in-PHP/)

为什么不给我们一个你想要做什么的例子呢？也许它会让我们了解您的情况为何如此特殊，也许对于您的问题类型有特殊的解决方案？只是说，我想写一个模板引擎，什么是最好、最快的方法并没有多大帮助。说真的，**如果我想要更好的东西，我会选择其中的一些，看看他们做了什么，了解他们为什么这样做，学习并做一些不同的事情。**

# python - 语言环境和温度/长度转换

> ID：789953
> 
> 赞同：1
> 
> 时间：2009-04-25T23:49:40.210
> 
> 标签：python, localization

语言环境是否包含有关 Unix/Linux 上温度、长度等首选单位的信息？是否可以从 Python 访问这些属性？我检查了“语言环境”模块，但没有找到合适的。

我希望我的应用程序自动将值转换为最合适的单位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-25T23:59:45.070

不，那是不可能的。

我认为[世界上每个国家](http://lamar.colostate.edu/~hillger/internat.htm)都在使用公制，除了美国和其他一些国家。话虽如此，您可以对选择指标充满信心。

您可能希望编写具有转换和数学规则的类来为每个度量定义正确的操作。

您将不知道将转换应用于哪些变量，并且您将不知道微米或公里是否最适合您的长度测量。了解测量系统是必要的，但对于想要正确使用单位的问题来说还不够。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-26T01:25:52.897

对于它的价值，KDE 提供了“公制”或“英制”作为标准单位系统的选择，所以我认为可以通过 Python 以某种方式访问​​该信息。Gnome 可能有类似的设置，我不确定......但我认为通用 UNIX/Linux 系统没有任何等价物。

最新版本的 SciPy (0.7) 包括一个用于单元处理的模块，如有必要，您可以使用它进行转换。

# c++ - boost::filter_iterator -- 我将如何使用 STL 做到这一点？

> ID：789954
> 
> 赞同：11
> 
> 时间：2009-04-25T23:51:20.940
> 
> 标签：c++, stl, boost, filter, iterator

我传递了一个迭代器，我必须将它传递给另一个函数——但经过过滤，以便跳过某些元素（它是一个指针范围，我想过滤掉 NULL 指针）。

我用谷歌搜索“ *stl filter iterator* ”来看看如何做到这一点，然后[boost::filter_iterator](http://www.boost.org/doc/libs/1_38_0/libs/iterator/doc/filter_iterator.html)出现了。

看起来不错，我可以使用它，但我可以用旧的 STL 来做吗？当然，无需将元素复制到新容器中。

我想我必须创建另一个迭代器类来提供必要的`begin()`, `end()`etc 功能并进行过滤？所以我必须重新实现`boost` `iterator_filter`......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-26T01:04:58.347

你是对的; 您实际上是在自己重新创建过滤器迭代器。我的建议是使用 Boost 的 filter_iterator。Boost 作为 c++ 最常用的外部库具有特殊的地位；许多 C++ 委员会成员帮助编写了用于 boost 的库。它的无处不在本质上使它几乎保持原样。真的没有理由在这里重新发明轮子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-26T08:29:02.770

我同意 rlbond。不要重新发明轮子并使用 Boost::filter_iterator。如果您不想在项目中包含所有 boost 库，您可能需要考虑使用[boost.bcp](http://www.boost.org/doc/libs/1_38_0/tools/bcp/bcp.html)来准确提取您需要的库。

# php - 优化 PHP 页面：MySQL 瓶颈

> ID：789957
> 
> 赞同：2
> 
> 时间：2009-04-25T23:52:52.030
> 
> 标签：php, optimization, mysql

我有一个页面需要 37 秒才能加载。在加载时，它将 MySQL 的 CPU 使用率固定在最高点。我没有为此页面编写代码，而且它相当复杂，因此瓶颈的原因对我来说并不明显。

我分析了它（使用 kcachegrind），发现页面上的大部分时间都花在了 MySQL 查询上（90% 的时间花在了 25 个不同的 mysql_query 调用上）。

查询采用以下形式，tag_id 在 25 个不同调用中的每一个都发生变化：

```
SELECT * FROM tbl_news WHERE news_id
 IN（选择 news_id 来自
 tbl_tag_relations WHERE tag_id = 20)

```

每个查询大约需要 0.8 秒才能完成，并且需要更长的延迟才能更好地衡量......因此完全加载页面需要 37 秒。

我的问题是，查询的格式是否是导致问题的嵌套选择？或者它可能是一百万个其他事物中的任何一个？任何有关如何解决这种缓慢问题的建议都值得赞赏。

在查询上运行 EXPLAIN 给了我这个（但我不清楚这些结果的影响......主键上的 NULL 看起来很糟糕，是的？返回的结果数量对我来说似乎很高最后只返回少数结果）：

```
1 PRIMARY tbl_news ALL NULL NULL NULL NULL 1318 使用 where
2 DEPENDENT SUBQUERY tbl_tag_relations ref FK_tbl_tag_tags_1 FK_tbl_tag_tags_1 4 const 179 使用 where

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-26T00:46:46.970

[我在 AppDevelopers 所犯的数据库开发错误](https://stackoverflow.com/questions/621884/database-development-mistakes-made-by-appdevelopers/621891#621891)中解决了这一点。基本上，赞成加入聚合。IN 本身不是聚合，但同样的原则适用。一个好的优化将使这两个查询在性能上相当：

```
SELECT * FROM tbl_news WHERE news_id
 IN (select news_id from
 tbl_tag_relations WHERE tag_id = 20) 
```

和

```
SELECT tn.*
FROM tbl_news tn
JOIN tbl_tag_relations ttr ON ttr.news_id = tn.news_id
WHERE ttr.tag_id = 20 
```

我相信 Oracle 和 SQL Server 都可以，但 MySQL 没有。第二个版本基本上是即时的。我在我的机器上做了数十万行的测试，并通过添加适当的索引使第一个版本的性能达到亚秒级。带有索引的连接版本基本上是即时的，但即使没有索引也可以执行。

顺便说一句，我使用的上述语法是您应该更喜欢进行连接的语法。这比将它们放在`WHERE`子句中（正如其他人所建议的那样）更清楚，并且上面可以使用 WHERE 条件不能的左外连接以 ANSI SQL 方式执行某些操作。

所以我会在以下内容上添加索引：

*   tbl_news (news_id)
*   tbl_tag_relations (news_id)
*   tbl_tag_relations (tag_id)

并且查询将几乎立即执行。

最后，不要使用 * 来选择您想要的所有列。明确命名它们。稍后添加列时，您会遇到更少的麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-26T00:06:50.857

SQL 查询本身绝对是您的瓶颈。该查询中有一个子查询，它是代码的 IN(...) 部分。这实际上是一次运行两个查询。您可以使用 JOIN（类似于 d03boy 上面提到的内容）或更有针对性的 SQL 查询将 SQL 时间减半（或更多！）。一个例子可能是：

```
SELECT * 
FROM tbl_news, tbl_tag_relations 
WHERE tbl_tag_relations.tag_id = 20 AND
tbl_news.news_id = tbl_tag_relations.news_id 
```

为了帮助 SQL 更快地运行，您还想尽量避免使用 SELECT *，而只选择您需要的信息；最后还要加上限制性声明。例如：

```
SELECT news_title, news_body 
... 
LIMIT 5; 
```

您还需要查看数据库模式本身。确保您正在索引所有通常引用的列，以便查询运行得更快。在这种情况下，您可能需要检查 news_id 和 tag_id 字段。

最后，您需要查看 PHP 代码，看看是否可以创建一个包罗万象的 SQL 查询，而不是遍历多个单独的查询。如果您发布更多代码，我们可以提供帮助，这可能是为您发布的问题节省的最大时间。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-25T23:54:34.880

如果我理解正确，这只是列出一组特定标签的新闻故事。

1.  首先，你真的不应该`SELECT *`

2.  其次，这可以在单个查询中完成，从而减少 多个查询
    的开销。
    似乎它正在获取相当微不足道的数据，因此可以在一次调用而不是 20 次中检索它。

3.  更好的使用方法`IN`可能是使用`JOIN`带有`WHERE`条件的 a 。使用 an 时`IN`，它基本上会是很多`OR`语句。
4.  你`tbl_tag_relations`绝对应该有一个索引`tag_id`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-26T00:04:51.563

```
select * 
 from tbl_news, tbl_tag_relations 
 where 
      tbl_tag_relations.tag_id = 20 and 
      tbl_news.news_id = tbl_tag_relations.news_id 
 limit 20 
```

我认为这给出了相同的结果，但我不是 100% 确定。有时简单地限制结果会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-26T00:46:29.840

不幸的是，MySQL 不能很好地处理不相关的子查询，如您的案例所示。该计划基本上是说对于外部查询的每一行，都将执行内部查询。这将很快失控。正如其他人提到的那样，重写为普通的旧连接将解决该问题，但可能会导致重复行的不良影响。

例如，原始查询将为 tbl_news 表中的每个符合条件的行返回 1 行，但此查询：

```
SELECT news_id, name, blah
FROM tbl_news n
JOIN tbl_tag_relations r ON r.news_id = n.news_id
WHERE r.tag_id IN (20,21,22) 
```

将为每个匹配的标签返回 1 行。您可以将 DISTINCT 粘贴在那里，根据数据集的大小，它对性能的影响应该很小。

不要太糟糕，但大多数其他数据库（PostgreSQL、Firebird、Microsoft、Oracle、DB2 等）会将原始查询作为有效的半联接处理。就我个人而言，我发现子查询语法更具可读性和更易于编写，尤其是对于较大的查询。

# sql - 这可以写成更好的方式吗？

> ID：789963
> 
> 赞同：0
> 
> 时间：2009-04-25T23:57:22.673
> 
> 标签：sql, mysql

我有这两张表：

```
CREATE TABLE x
(
    id INT NOT NULL,
    exclude BIT NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE y
(
    id INT NOT NULL,
    field1 INT NOT NULL,
    field2 INT NOT NULL,
    field3 INT NOT NULL,
    field4 INT NOT NULL,
    field5 INT NOT NULL,
    PRIMARY KEY (id)
); 
```

而这个存储过程：

```
CREATE PROCEDURE proc1
(
    i1 INT,
    i2 INT,
    i3 INT,
    i4 INT,
    i5 INT
)
BEGIN

SELECT
    id
FROM
    y
WHERE
    field1 = i1,
    field2 = i2,
    field3 = i3,
    field4 = i4,
    field5 = i5
    AND id NOT IN (
        SELECT
            y.id
        FROM
            y, x
        WHERE
            y.field1 = i1
            AND y.field2 = i2,
            AND y.field3 = i3,
            AND y.field4 = i4,
            AND y.field5 = i5
            AND x.id = y.id
            AND x.exclude = 1);

END IF; 
```

我基本上想从 y 中获取 id 字段，除了那些存在于 x 中且 exclude = 1 的字段，这可以通过连接来完成还是以更好的方式编写？

非常感谢

注意：在“NOT IN”子查询中使用连接的原因是出于性能考虑，表 x 包含很多记录，而表 y 上的 select 语句仅返回几条记录

编辑：另外请注意 y 中的 id 可能存在也可能不存在于 x 中（否则一个简单的连接会做），我想要 y 中的所有 id，除了那些存在于 x 中且 exclude = 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T01:02:21.020

我不确定我是否遵循您在子查询中使用联接的逻辑。你做同样的工作两次。

你可以试试：

```
SELECT id
FROM y
WHERE field1 = 2
AND field2 = 3
AND field3 = 4
AND field4 = 5
AND field5 = 6
AND NOT EXISTS(
SELECT x.id
FROM x
WHERE x.id = y.id
AND x.exclude = 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-26T00:30:10.987

我会问为什么这个查询没有返回正确的结果。

```
 SELECT
        y.id
    FROM
        y, x
    WHERE
        y.field1 = i1
        AND y.field2 = i2,
        AND y.field3 = i3,
        AND y.field4 = i4,
        AND y.field5 = i5
        AND x.id = y.id
        AND x.exclude = 0; 
```

如果您遇到性能问题，您可能需要考虑添加索引（表 y 到 x.id 的外键）。

# visual-studio-2008 - 带有 Vista 的 Visual Studio 2008，GLUT 项目在运行时出现错误

> ID：789964
> 
> 赞同：1
> 
> 时间：2009-04-25T23:57:43.017
> 
> 标签：visual-studio-2008, opengl, char, glut, glutcreatewindow

我确信我的项目没有任何问题。因为我已经在装有 Visual Studio 2005 和 Windows XP Pro 的前电脑上尝试过它，它可以正常工作。

我可以编译我的项目。构建阶段没有错误。但是当我尝试运行我的项目时，它会显示“*.exe 已停止工作”。

然后我在调试模式下运行它。我看到它引导我到 glut.h 中的一行

```
static int APIENTRY glutCreateWindow_ATEXIT_HACK(const char *title)
 { 
return __glutCreateWindowWithExit(title, exit); 
} 
```

我真的不明白为什么它不起作用..

我将 glut32.dll 复制到 C:\Windows\System32
glut.h 到 C:\Program Files\Microsoft Visual Studio 9.0\VC\include\GL
和 glut32.lib 到 C:\Program Files\Microsoft Visual Studio 9.0\VC\库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-26T03:36:18.467

您是否尝试在您的应用程序上关闭 DEP（数据执行保护）？
右键单击我的计算机并进入虚拟内存设置。在 DEP 选项卡下，将您的应用程序添加到忽略列表中。
你可能需要一个新的 glut.h，或者重写你的。即，不同的 GLUT 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T18:17:47.023

我经常看到这样的错误——你还包括哪些其他文件？尝试在所有其他标题之前或之后包含“glut.h”。此外，如果包含 glut.h，则不需要 gl.h 或 glu.h——它们会自动包含在内。

出于某种原因，glut.h 不能很好地与其他标头配合使用。这个问题可能有更技术性的答案或更好的解决方案，但更改顺序一直对我有用！

# c# - c# 中的编组（将结构传递给非托管类型）

> ID：789977
> 
> 赞同：3
> 
> 时间：2009-04-26T00:08:15.440
> 
> 标签：c#, pinvoke

我有一个 c++ dll，它公开了以下函数

```
long func(struct name * myname)
{
     strcpy(myname->firstname,"rakesh");
     strcpy(myname->lastname,"agarwal");
     return S_OK;
}

struct name
{
    char firstname[100];
    char lastname[100];
} 
```

我想从 C# 应用程序调用此函数，所以我执行以下操作：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
unsafe public struct name
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst=100)]
    public string firstname;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 100)]
    public string lastname;
} ;

[DllImport("C++Dll.dll")]
public unsafe static extern long func(name[] myname);

name[] myname = new name[1];
func(myname); 
```

应用程序构建成功。当 C# 应用程序 .exe 运行时，该函数`func()`被成功调用，并且能够成功填充 dll 中的字段。但是当函数返回到 C# 应用程序时，变量仍然包含结构字段（和）`myname`的空值。`firstname``lastname`

请提出更改建议，以便我能够填充的字段值`myname`（以便在函数`func()`完成执行后，变量`myname->firstname`包含“rakesh”并`myname->lastname`包含“agarwal”。

注意：StringBuilder 不能在结构内部使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-26T00:24:25.713

不使用数组，而是通过引用传递结构。对于 PInvoke 调用，ref struct 将被转换为指向该结构的指针。ref 参数还告诉 CLR 在两个方向上将数据编组到本机代码，然后再次退出。

```
[DllImport("C++Dll.dll")]
public unsafe static extern long func(ref name myname); 
```

此外，如果您正在进行大量互操作工作，我建议您查看 PInvoke 互操作助手（[链接](http://codeplex.com/clrinterop)）。该工具会自动将大多数 C 类型定义（包括结构、枚举、联合和函数指针）转换为相应的 C# 或 VB.Net 类型。它还将转换包含这些类型的签名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-26T00:13:10.123

将导入声明为`public unsafe static extern long func(ref name myname)`，并将其称为：

```
name myname = new name();
func(ref myname); 
```

顺便说一下，您可能不需要名称结构或导入声明上的不安全声明。

# iphone - 如何在 viewWillDisappear 中安全地关闭正在加载的 UIWebView？

> ID：789984
> 
> 赞同：31
> 
> 时间：2009-04-26T00:15:50.867
> 
> 标签：iphone, cocoa-touch, uiwebview

我有一个包含 UIWebView 的视图，它正在加载谷歌地图（很多 javascript 等）。我遇到的问题是，如果用户在 web 视图完成加载之前点击导航栏上的“后退”按钮，我不清楚如何整齐地告诉 web 视图停止加载然后释放它，而不是发送到已释放实例的消息。我也不确定 web 视图是否喜欢它的容器视图在它完成之前消失（但如果用户在加载之前点击后退按钮，我别无选择）。

在我看来WillDisappear 处理程序我有这个

```
map.delegate=nil;
[self.map stopLoading]; 
```

这似乎可以处理大多数情况，因为取消委托会阻止它将 didFailLoadWithError 发送到我的视图控制器。但是，如果我在视图的 dealloc 方法中释放 Web 视图，有时（间歇性地）我仍然会收到一条消息发送到已释放的实例，这似乎与实际页面中运行的 javascript 有关，例如：

```
-[UIWebView webView:runJavaScriptAlertPanelWithMessage:initiatedByFrame:]: message sent to deallocated instance 0x4469ee0 
```

如果我只是不发布 webview，那么我就不会收到这些消息，尽管我想我正在泄漏 webview。

如果我不发送“stopLoading”消息，而只是在 viewWillDisappear 中释放 webview，那么我会看到如下消息：

```
/SourceCache/WebCore/WebCore-351.9.42/wak/WKWindow.c:250 WKWindowIsSuspendedWindow:  NULL window. 
```

可能相关，我有时（再次完全断断续续）得到一个丑陋的 heisenbug，单击其他视图导航栏上的后退按钮会弹出标题，但不会弹出视图。换句话说，我在堆栈上留下了视图 n 的标题，但显示的视图仍然是视图 n+1 （结果是你被困在这个屏幕上，无法回到根视图 - 你可以去另一个方向，即推送更多视图并弹回没有正确弹出的视图，只是不到根视图。唯一的出路是退出应用程序）。在其他时候，相同视图上的相同推送和弹出序列可以正常工作。

这个特别的让我发疯。我认为这可能与加载 Web 视图之前视图消失有关，即在这种情况下，我怀疑它可能会在内存上乱涂乱画并混淆视图堆栈。或者，这可能是完全不相关的并且是其他地方的错误（我从来没有能够在调试构建模式下重现它，它只会在我无法使用 gdb 观看它时发生在发布构建设置中:-)。从我的调试运行来看，我认为我没有过度发布任何东西。而且我似乎只有在我点击了具有 web 视图的视图时才能触发它，并且在那之后它不会立即发生。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-05-05T23:09:51.487

对此的一个变体应该可以解决泄漏和僵尸问题：

```
- (void)loadRequest:(NSURLRequest *)request
{
    [self retain];
    if ([webView isLoading])
        [webView stopLoading];
    [webView loadRequest:request];
    [self release];
}
- (void)webViewDidStartLoad:(UIWebView *)webView
{
    [self retain];
}
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [self release];
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    [self release];
}

- (void)viewWillDisappear
{
    if ([webView isLoading])
        [webView stopLoading];
}

- (void)dealloc
{
    [webView setDelegate:nil];
    [webView release];
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-03T07:47:20.283

有几种方法可以处理它，但这应该有效。您想要 didFailLoadWithError 消息，它告诉您它已停止。

设置标志 isLeaving=YES; 向 Webview 发送 stopLoading。

在 didFailLoadWithError: 中，检查 webview 停止时出现的错误：

if ((thiserror.code == NSURLErrorCancelled) && (isLeaving==YES)) {

[otherClass performSelector:@selector(shootWebview) withObject:nil withDelay:0]

}

在shootWebview 中释放 webView：

* * *

变体：如果您想对此表现得不以为然，可以执行 performSelector:withObject:withDelay: 延迟 [fillintheblank]，在不检查的情况下调用 10-30 秒，但您几乎肯定会侥幸逃脱我不推荐它。

您可以让 didFailLoadWithError 设置一个标志并在其他地方清理它。

或者我最喜欢的，也许你离开时不需要全部释放。您不会再次显示该视图容器吗？为什么不把它放在身边重复使用呢？

您的调试与发布问题不同，您可能需要检查您的配置以确保它完全相同。赏金是问题的可重复部分，对吧？;-)。

-- 哦，等一下，您可能会使用 WebView 来关闭整个 View 容器。您可以对上述内容进行更改，然后等待在 shootWebView 中释放整个容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-30T16:29:17.850

您在帖子第二部分中描述的 UINavigationController 错误可能与您对内存警告的处理有关。我经历过这种现象，并且通过在查看堆栈中的视图 (n+1) 时模拟内存警告，我能够在堆栈中的视图 n 上重现它。

UIWebView 是一个内存消耗者，因此当它用作视图层次结构的一部分时，收到内存警告也就不足为奇了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-26T02:35:57.987

一个简单的`release`消息`dealloc`应该就足够了。

您的第二个问题听起来像是一个过早解除分配的视图，但如果没有看到一些代码，我不能说太多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-17T14:34:18.887

我在 OS3 中使用 UIWebView 时遇到了类似的问题——这个描述是一个很好的起点，但是我发现在发布 webView 之前简单地取消 web 视图代理解决了我的问题。

阅读示例代码（已接受的答案 - 上面） - 这似乎有点矫枉过正。例如 [webView release] 和 webView = nil 行的作用完全相同，因为作者描述了声明变量的方式（因此您不需要两者）。我也不完全相信所有的保留和释放行 - 但我猜你的里程会有所不同。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-09-08T07:33:18.357

> 可能相关，我有时（再次完全断断续续）得到一个丑陋的 heisenbug，单击其他视图导航栏上的后退按钮会弹出标题，但不会弹出视图。换句话说，我在堆栈上留下了视图 n 的标题，但显示的视图仍然是视图 n+1 （结果是你被困在这个屏幕上，无法回到根视图 - 你可以去另一个方向，即推送更多视图并弹回没有正确弹出的视图，只是不到根视图。唯一的出路是退出应用程序）。在其他时候，相同视图上的相同推送和弹出序列可以正常工作。

我有同样的问题，当我在堆栈> 2 和当前视图控制器索引> 2 中使用带有视图控制器的导航控制器时，如果此时发生 memoryWarning，它会引发同样的问题。

只有 1 个解决方案，经过多次实验，我在 NavigationController 中覆盖了 pop 和 push 方法、视图控制器堆栈、堆栈视图控制器的视图和超级视图等。

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>

@interface FixedNavigationController : 
UINavigationController <UINavigationControllerDelegate>{

}

@end 
```

* * *

```
#import "FixedNavigationController.h"

static BOOL bugDetected = NO;

@implementation FixedNavigationController

- (void)viewDidLoad{
    [self setDelegate:self];
}

- (void)didReceiveMemoryWarning{
    // FIX navigationController & memory warning bug
    if([self.viewControllers count] > 2)
        bugDetected = YES;
}

- (void)navigationController:(UINavigationController *)navigationController 
didShowViewController:(UIViewController *)viewController 
animated:(BOOL)animated
{

    // FIX navigationController & memory warning bug
    if(bugDetected){
        bugDetected = NO;

        if(viewController == [self.viewControllers objectAtIndex:1]){
            [self popToRootViewControllerAnimated:NO];
            self.viewControllers = [self.viewControllers arrayByAddingObject:viewController];
        }
    }
}

@end 
```

它适用于堆栈中的 3 个视图控制器。

# java - 确定 *.doc 文件是否为带有 Java 或 ColdFusion 的 RTF 的最佳方法

> ID：789986
> 
> 赞同：4
> 
> 时间：2009-04-26T00:18:02.747
> 
> 标签：java, coldfusion, apache-poi, mime-types

所以我有大约 4,000 个单词的文档，我试图从中提取文本并插入到一个 db 表中。这在处理器遇到具有`*.doc`文件扩展名的文档但确定该文件实际上是 RTF 之前一直有效。现在我知道 POI 不支持 RTF，这很好，但我确实需要一种方法来确定`*.doc`文件是否实际上是 RTF，以便我可以选择忽略文件并继续处理。

我尝试了几种技术来克服这个问题，包括使用 ColdFusion 的 MimeTypeUtils，但是，它似乎基于文件扩展名对 mimetype 的假设，并且仍然将 RTF 分类为 application/msword。有没有其他方法可以确定 a`*.doc`是否是 RTF？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-26T00:45:03.760

任何 RTF 文件中的前五个字节应该是：

```
{\rtf 
```

如果不是，则它不是 RTF 文件。

[Wikipeida 文章](http://en.wikipedia.org/wiki/Rich_Text_Format)中的外部链接部分链接到各种 RTF 版本的规范。

Doc 文件（至少是自 Word '97 以来的文件）使用一种称为“Windows 复合二进制格式”的文件[，在此处以 PDF](http://86/WindowsCompoundBinaryFileFormatSpecification.pdf)格式记录。据此，这些 Doc 文件以以下顺序开始：

```
0xd0, 0xcf, 0x11, 0xe0, 0xa1, 0xb1, 0x1a, 0xe1 
```

或者在旧的 beta 文件中：

```
0x0e, 0x11, 0xfc, 0x0d, 0xd0, 0xcf, 0x11, 0xe0 
```

根据维基百科关于 Word 的文章，在 97 年之前至少有 5 种不同的格式。

寻找 {\rtf 应该是你最好的选择。

祝你好运，希望这会有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-26T02:53:49.473

带CF8并兼容：

```
<cffunction name="IsRtfFile" returntype="Boolean" output="false">
    <cfargument name="FileName" type="String" />
    <cfreturn Left(FileRead(Arguments.FileName),5) EQ '{\rtf' />
</cffunction> 
```

对于早期版本：

```
<cffunction name="IsRtfFile" returntype="Boolean" output="false">
    <cfargument name="FileName" type="String" />
    <cfset var FileData = 0 />
    <cffile variable="FileData" action="read" file="#Arguments.FileName#" />
    <cfreturn Left(FileData,5) EQ '{\rtf' />
</cffunction> 
```

**更新：**更好的 CF8/兼容答案。为避免将整个文件加载到内存中，您可以执行以下操作以仅加载前几个字符：

```
<cffunction name="IsRtfFile" returntype="Boolean" output="false">
    <cfargument name="FileName" type="String" />
    <cfset var FileData = 0 />

    <cfloop index="FileData" file="#Arguments.FileName#" characters="5">
        <cfbreak/>
    </cfloop>

    <cfreturn FileData EQ '{\rtf' />
</cffunction> 
```

**根据评论：**
这是一种非常快速的方法，您可以生成“这是什么格式”类型的函数。不完美，但它给你的想法......

```
<cffunction name="determineFileFormat" returntype="String" output="false"
    hint="Determines format of file based on header of the file's data."
    >
    <cfargument name="FileName" type="String"/>
    <cfset var FileData = 0 />
    <cfset var CurFormat = 0 />
    <cfset var MaxBytes = 8 />
    <cfset var Formats =
        { WordNew  : 'D0,CF,11,E0,A1,B1,1A,E1'
        , WordBeta : '0E,11,FC,0D,D0,CF,11,E0'
        , Rtf      : '7B,5C,72,74,66' <!--- {\rtf --->
        , Jpeg     : 'FF,D8'
        }/>

    <cfloop index="FileData" file="#Arguments.FileName#" characters="#MaxBytes#">
        <cfbreak/>
    </cfloop>

    <cfloop item="CurFormat" collection="#Formats#">
        <cfif Left( FileData , ListLen(Formats[CurFormat]) ) EQ convertToText(Formats[CurFormat]) >
            <cfreturn CurFormat />
        </cfif>
    </cfloop>

    <cfreturn "Unknown"/>
</cffunction>

<cffunction name="convertToText" returntype="String" output="false">
    <cfargument name="HexList" type="String" />
    <cfset var Result = "" />
    <cfset var CurItem = 0 />

    <cfloop index="CurItem" list="#Arguments.HexList#">
        <cfset Result &= Chr(InputBaseN(CurItem,16)) />
    </cfloop>

    <cfreturn Result />
</cffunction> 
```

当然，值得指出的是，所有这些都不适用于“无标题”格式，包括许多常见的基于文本的格式（CFM、CSS、JS 等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-27T16:31:47.390

您可以将 byteArray 转换为字符串

```
<cfset str = createObject("java", "java.lang.String").init(bytes)> 
```

您也可以尝试 POI 源中的 hasxxxHeader 方法。它们确定输入文件是否是 POI 可以处理的：OLE 或 OOXML。但我相信其他人建议使用简单的 try/catch 来跳过问题文件。您是否有理由不希望这样做？这似乎是更简单的选择。

**更新：** 彼得建议使用 CF 8 的功能也可以

```
<cfset input = FileOpen(pathToYourFile)>
<cfset bytes = FileRead(input , 8)>
<cfdump var="#bytes#">
<cfset FileClose(input)> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-26T01:35:28.147

您可以尝试使用[Droid](http://droid.sourceforge.net)工具（数字记录对象识别）识别文件，该工具提供对[Pronom 技术注册表](http://www.nationalarchives.gov.uk/pronom)的访问。

# php - PHP 包括函数

> ID：789994
> 
> 赞同：1
> 
> 时间：2009-04-26T00:22:12.270
> 
> 标签：php, function, include

我正在努力改变一个大型的、写得有点糟糕（但不是很糟糕）的 PHP 网站，以使用一个类来存储函数，这些函数执行诸如编写带有参数的标准页眉以更改诸如页眉文本之类的事情。旧版本在每个文件中使用复制和粘贴的 HTML 标头，例如：

```
<div class="left"><?php include("left.php"); ?></div> 
```

其中包含的文件既有非回显的 HTML 又有普通的 PHP。这些包含似乎可以继续使用，但我只是不确定它们将如何工作，据我所知，包含的文件只是直接替换 include() 方法。

是否会更好： - 重新
编写包含的文件以回显所有标准 HTML
- 只需将这些文件的内容移动到我的新函数中（据我所知，它们不会在任何地方使用，除非它们在我的新功能）
-其他

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-26T00:34:26.250

阅读[http://php.net/include](http://php.net/include)：

> 如果包含出现在调用文件中的函数内部，则被调用文件中包含的所有代码的行为就好像它已在该函数中定义一样。因此，它将遵循该函数的变量范围。此规则的一个例外是在包含发生之前由解析器评估的魔术常量。
> 
> 当包含一个文件时，解析会在目标文件的开头退出 PHP 模式并进入 HTML 模式，并在结尾处再次恢复。因此，目标文件中应作为 PHP 代码执行的任何代码都必须包含在有效的 PHP 开始和结束标记中。

PHP 不像 C/C++ 那样只是从包含的文件中复制和粘贴代码来替换包含语句。因此，您不必担心包含文件中的`<?php`and`?>`标记会弄乱包含它的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-26T00:29:39.757

如果您实际上并没有解析诸如变量之类的任何东西，那么编写您的 PHP 来回显所有 HTML 的效率会大大降低。也就是说，我似乎无法摆脱自己做这件事的习惯。:)

一个设计良好的页面只会在必要时使用 PHP，我认为您当前的包含方法可能是您网站的最佳方法。

如果您的大部分网站突然变成动态生成的，那么可能值得重新审视这个问题。*****`**