# StackOverflow 问答 12185000-12185999

# python - Concurrent.futures：map() 与 submit() 的用例是什么？

> ID：12185006
> 
> 赞同：4
> 
> 时间：2012-08-29T19:16:45.190
> 
> 标签：python, concurrency, python-3.x

我正在浏览 Python concurrent.futures 模块并使用它来更加熟悉并行/并发编程模型。不幸的是，由于它是一个相对较新的模块，我找不到大量面向初学者的文献。

我知道 map() 通过进程或线程返回在可迭代对象上调用的函数的直接返回值。submit() 返回一个期货对象。

我想更多地解释为什么一个人可能会选择使用其中一种。似乎 map() 更适合不需要协调的明显并行任务。submit() 对于复杂的并发用例可能更有用。但是，我对此很陌生，并希望知识渊博的人可以扩展。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:55:25.963

`map`用于在一个或多个可迭代对象上调用单个函数。用于为带有关联参数的单个函数调用`submit`生成一个对象。`Future`

可以将`concurrent.map`其视为内置`map`函数的并行版本。`submit`用于生成未来。

# android - Android ListView 和适配器

> ID：12185009
> 
> 赞同：1
> 
> 时间：2012-08-29T19:17:01.743
> 
> 标签：android, listview

我正在开发一个下载管理器项目，因此，为了显示所有下载/下载操作，我更喜欢使用 ListView 来显示我的下载列表。假设我们有和下载任务一样多，那么所有任务的进度条都必须更新。对于后台下载任务，我创建了一个我命名的新类`HttpDownloader`。所以，我在这个类的对象上传递这些进度条。当一个新对象添加到我的任务列表时，我调用构造函数`HttpDownloader`并将新项目进度条传递给它。让我感到困惑的是`When i add a new object to tasklist and call notifyDataSetChanged of adapter, my list is refreshed, so all progress bar reset to default layout values but HTTPDownloader Thread is running in background successfully.`所以，我的问题是，

**1.调用notifyDataSetChanged后，对旧listview对象的引用是destructs ?**

**2.如果是，我如何保留旧视图的参考？**

**3.如果不是，请解释一下，为什么当后台进程强制通过进度条更改进度值时进度条重置为默认值并且不改变？**

*`HTTPDownloader class`*

```
class HttpDownloader implements Runnable {
    public class HttpDownloader (String url, ProgressBar progressBar)
    {
        this.M_url = url;
        this.M_progressBar = progressBar;
    }

    @Override
    public void run()
    {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet get = new HttpGet(this.M_url);
        HttpResponse response;

        try{
            response = client.execute(get);
            InputStream is = response.getEntity().getContent();
            long contentLength = response().getEntity().getContentLength();
            long downloadedLen = 0;
            int readBytes = 0;

            byte [] buffer = new byte [1024];

            while ((readBytes = in.read(buffer, 0, buffer.length)) != -1) {
                downloadedLen += readBytes;

                //Some storing to file codes

                runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        M_progressBar.setProgress((100f * downloadedLen) / contentLength);
                    }
                });
            }

            is.close();
        } catch (ClientProtocolException e) {
            Log.e("HttpDownloader", "Error while getting response");
        } catch (IOException e) {
            Log.e("HttpDownloader", "Error while reading stream");
        }
    }
} 
```

*`AdapterClass`*

```
class MyAdapter extends ArrayAdapter<String> {
    ArrayList<String> M_list;
    public MyAdapter(ArrayList<String> list) {
        super(MainActivity.this, R.layout.download_item, list);
        this.M_list = list;
    }

    @Override
    public int getCount() {
        return this.M_list.size();
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.download_item, parent, false);
        ProgressBar bar = (ProgressBar) rowView.findViewById(R.id.progrees);

        new Thread (new HttpDownloader(this.M_list.get(position), bar)).start();

        return rowView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:07:34.187

当您调用 notifyDataSetChanged() 或 Activity 恢复时，列表的每一行都会调用 Adapter 的 getView() 方法。

因此，当您将新项目添加到列表并调用 notifyDataSetChanged() 时，getView() 方法会执行与该时刻列表中的项目一样多的次数，再加上一个原因是您添加的新项目。

如您所知，getView() 方法构建行，因此构建一个新的 ProgressBar，并且显然这个 ProgressBar 从进度的位置 0 开始。

所以答案可以恢复为是，每次调用 notifyDataSetChanged() 时，getView() 方法都会被调用多次，每行一个（如果你将 android:layout_height 参数设置为 0dip 并将 android:layout_weight 设置为 1.0，就像你可能知道 ListViews），这就是为什么当您将新项目添加到 ListView 时会“初始化”ProgressBars 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:44:48.540

好吧，如果您想保留参考以显示一个好的下载管理器，让我们看看如何做，按部分进行。

这个概念很容易理解，我们有线程下载项目，我们将调用每个工作任务。每个任务都与列表视图中的一行相关联，因为您希望显示每个项目下载的下载进度。

因此，如果每个任务都与每一行相关联，我们将保存实际正在执行的任务，这样我们就可以随时知道哪些任务正在运行以及它们的状态。这很重要，因为就像我之前所说的，getView() 方法被调用了很多次，我们需要知道每次下载正在进行及其状态。

让我们看看我们的适配器的一些代码：

```
class MyAdapter extends ArrayAdapter<Uri> {
    ArrayList<Uri> M_list;
    Map<Uri, HttpDownloader> taskMap;

    public MyAdapter(ArrayList<Uri> list) {
        super(MainActivity.this, R.layout.download_item, list);
        this.M_list = list;

        taskMap = new HashMap<Uri, HttpDownloader>();
    }

    @Override
    public int getCount() {
        return this.M_list.size();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.download_item, parent, false);

        ProgressBar progressBar = (ProgressBar) rowView.findViewById(R.id.progressBar);

        configureRowWithTask(position, progressBar);

        return rowView;
    }

    private void configureRowWithTask(int position,final ProgressBar bar) {
        Uri url = M_list.get(position);
        HttpDownloader task;

        if (!(taskMapHasTaskWithUrl(url))) {
            task = new HttpDownloader(url, bar);
            Thread thread = new Thread(task);
            thread.start();
            taskMap.put(url, task);
        } else {
            task = taskMap.get(url);
            bar.setProgress(task.getProgress());
            task.setProgressBar(bar);
        }
    }

    private boolean taskMapHasTaskWithUrl(Uri url) {
        if (url != null) {
            Iterator taskMapIterator = taskMap.entrySet().iterator();

            while(taskMapIterator.hasNext()) {
                Map.Entry<Uri, HttpDownloader> entry = (Map.Entry<Uri, HttpDownloader>) taskMapIterator.next();
                if (entry.getKey().toString().equalsIgnoreCase(url.toString())) {
                    return true;
                }
            }
        }

        return false;
    }
} 
```

关于它的一些解释：

*   我已将您的适配器类型更改为 Uris 的 ArrayAdapter，以便更好地使用链接。
*   我添加了一个具有键值对的 Map，键是 Uris，值是 HttpDownloaders。此地图将保存正在使用的每个任务。
*   我添加了两个重要的方法，一个是 configureRowWithTask()，就像它自己的名字一样，配置一行与一个任务，将它们关联起来，但前提是任务是新的，否则是正在使用的任务。另一种方法是 taskMapHasTaskWithUrl()，简单地检查给定的任务（通过它的 url）当前是否在 taskMap 中。
*   可能，最重要的方法是configureRowWithTask()，我将深入解释它。

configureRowWithTask() 方法检查一个任务是否正在使用，这个方法是必要的，因为 getView() 被调用了很多次，但是我们不希望同一个下载任务被执行多次，所以这个方法检查，如果任务是新的（不在 taskMap 中）然后创建 HttpDownloader 的新实例并将新任务放入地图中。

如果请求的任务存在于 taskMap 中，则表示该任务之前已被请求，但列表中的行已消失，并且已对 getView() 方法进行了新调用。所以任务是存在的，我们不必再次创建它，可能任务正在下载项目，我们唯一要做的就是查看它的下载进度并将其设置到行的进度条。最后设置对进度条的引用，可能 HttpDownloader 丢失了这个引用。

清楚了这部分，我们继续第二部分，HttpDownloader 类，让我们看一些代码：

```
public class HttpDownloader implements Runnable {

private Uri url;

private ProgressBar progressBar;
private int progress = 0;

private Handler handler;

public HttpDownloader (Uri url, ProgressBar progressBar) {
    this.url = url;
    this.progressBar = progressBar;
    progressBar.setProgress(progress);

    handler = new Handler();
}

@Override
public void run() {
    DefaultHttpClient client = new DefaultHttpClient();
    HttpGet get = new HttpGet(url.toString());
    HttpResponse response;

    try {
        response = client.execute(get);
        InputStream is = response.getEntity().getContent();
        long contentLength = response.getEntity().getContentLength();
        int downloadedLen = 0;
        int readBytes = 0;

        byte [] buffer = new byte [1024];

        while ((readBytes = is.read(buffer, 0, buffer.length)) != -1) {
            downloadedLen += readBytes;

            //Some storing to file codes

            progress = (int) ((100f * downloadedLen) / contentLength);

            handler.post(new Runnable() {
                @Override
                public void run() {
                    if (progressBar != null) {
                        progressBar.setProgress(progress);
                    }
                }
            });
        }

    } catch (ClientProtocolException e) {
        Log.e("HttpDownloader", "Error while getting response");
    } catch (IOException e) {
        e.printStackTrace();
        Log.e("HttpDownloader", "Error while reading stream");
    }
}

public int getProgress() {
    return progress;
}

public void setProgressBar(ProgressBar progressBar) {
    this.progressBar = progressBar;
}
} 
```

这个类基本相同，不同的是我在UI线程中使用了一个Handler来改变进度条的进度，并且只有在对进度条的引用不为null的情况下才改变这个进度。

重要的是每次下载字节时，都会刷新下载进度的值。

我已经检查了测试应用程序中的代码，似乎一切运行正常，如果您有问题，请告诉我，我会尽力帮助您；)

希望你能理解。

# html - 如何缩小包含表格的div的大小

> ID：12185010
> 
> 赞同：0
> 
> 时间：2012-08-29T19:17:01.110
> 
> 标签：html, css, overflow

我在下面有 HTML 标记。我需要将包含表格的 div 的大小减半，所以基本上溢出：隐藏并且只显示包含在指定大小内的 div 的一部分。但是，包含 div 的 height 属性并未应用于表格。

```
<html>
  <head>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
        .temp{
            height: 20px;
        }
    </style>
  </head>
  <body>
  <div class="temp">
      <table border="1">
      <tr>
        <td>This is a test.</td>
        <td>Do you see what I mean?</td>
        <td>I hate this overflow.</td>
      </tr>
    </table>
  </div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:22:37.223

呃-不确定我是否误解了你，只是添加了溢出：隐藏；正在为我做这项工作。[看到这个小提琴](http://jsfiddle.net/mxcrh/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:24:59.270

```
 .temp{
        height: 15px;
        overflow: hidden;
    }​ 
```

如果这是您想要的，这会将您拥有的一行文本减半。你确定你不是那个意思

```
 <tr>
             <td>This is a test.</td>
          </tr>
          <tr>
             <td>Do you see what I mean?</td>
          </tr>
          <tr>
             <td>I hate this overflow.</td>
          </tr> 
```

做3行，然后隐藏一些？

# java - 如何处理从条码扫描器返回的二进制数据？

> ID：12185012
> 
> 赞同：6
> 
> 时间：2012-08-29T19:17:22.623
> 
> 标签：java, javascript, barcode, barcode-scanner

我有一个二维条码扫描仪（Honeywell Xenon 1900）。

扫描一维条码很容易，因为扫描仪模拟键盘事件并发送纯文本。

但是当我扫描[PDF417 格式](http://en.wikipedia.org/wiki/PDF417)的二维条码时，扫描仪会发送二进制数据。如何捕获和解码这些数据？有些符号是不可打印的，因此无法扫描到网页上的表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:03:26.240

我对这个问题的解决方案是使用 COM 端口。

我配置扫描仪，所以它不是作为键盘事件发送数据，而是在虚拟 COM 端口中发送数据。然后我有 Java 小程序，它监听这个端口（使用 RXTX）。然后COM-port不为空，我可以获取数据并解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:13:03.580

您已标记此 java 以及 javascript。但是，您确实没有向我们提供您申请的任何详细信息。尽管如此，在 javascript 中处理二进制数据的传输，可以使用 base64 协议来完成。使用两种方法`btoa()`和`atob()`。

```
function toBase64 () {
            return window.btoa(data);
        }
function fromBase64 (strBase64){
            data = window.atob(strBase64);
        } 
```

我认为你的概念，（我只是猜测，因为你没有详细解释你在做什么），是在将数据传输到 javascript/html/web 应用程序之前对数据`base64` **进行编码。**我想您将使用 java 来执行此操作。一旦您将 base64 编码数据发送到您的 Web 应用程序，您就可以很容易地处理它。

# javascript - 生成并格式化当前日期和时间

> ID：12185016
> 
> 赞同：0
> 
> 时间：2012-08-29T19:17:34.200
> 
> 标签：javascript, datetime

如何在 JavaScript 中执行以下操作？：

```
$curr_time_start = new DateTime();
$timeStart = date_format($curr_time_start, 'Y-m-d H:i'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:20:03.107

我通常使用 Matt Kruse 的插件 -

[http://javascripttoolbox.com/lib/date/](http://javascripttoolbox.com/lib/date/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:23:05.143

大概是这样的

```
var d = new Date();
alert(
    d.getYear() + '-' + d.getMonth() + '-' + d.getDay() + ' ' + 
    d.getHours() + ':' + d.getMinutes()); 
```

[javascript日期（）](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:26:37.437

在本机上，用 Javascript 做这样的事情是不可能的。

有很多方法可以使用框架或特定库来实现。

例如，使用[MooTools](http://mootools.net)你可以这样做：

```
var timeStart = new Date().format('%Y-%m-%d %H:%M'); 
```

您可以使用此[JsFiddle](http://jsfiddle.net/PeE9q/)对此进行测试。

格式的语法几乎相同，但用 the`%M`代替`i`了分钟，因为所有占位符都以 . 为前缀`%`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:22:01.260

试试[date.js](http://www.datejs.com/)

Datejs 是一个开源的 JavaScript 日期库。

全面，但简单，隐蔽和快速。Datejs 已经通过了所有的考验，准备好出击了。Datejs 不只是解析字符串，它会将它们干净地分成两部分。

# javascript - 在没有 .apply() 的情况下将参数作为数组传递

> ID：12185019
> 
> 赞同：1
> 
> 时间：2012-08-29T19:17:40.750
> 
> 标签：javascript

我试图找出是否有一种方法可以将参数作为数组传递给 javascript 函数，而不使用 .apply 方法。从用户的角度来看，代码看起来像这样：

```
var args = [1, 2, 3, 4];
doSomething(args); 
```

请注意，这`doSomething()`并不总是相同的函数，因此我不能将其编写为使用参数数组。理想情况下，这应该适用于任何函数，我想我要做的基本上是将数组转换为类似参数数组的对象。

我在想我可以像这样设置函数参数对象：

```
function.arguments = otherArguments; 
```

但我不知道我什么*时候*必须这样做（一旦函数开始执行但在它实际对其参数做任何事情之前，我是否必须以某种方式这样做？）

我尝试这样做的原因是因为我正在尝试编写自己的 .apply 函数以用于学习目的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:30:49.613

不，没有办法。一种功能的一种工具，并且选择之一是[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply).

如果您需要编写自己的不使用的函数，则`apply`需要使用 eval：

```
function apply(fn, thisObj, args) {
    var obj = {fn: fn};
    var str = "obj.fn(";
    for (var i=0; i<args.length; i++)
         str += (i?',':'') + "args["+i+"]";
    str += ");";
    return eval(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:08:31.100

我根本不推荐这个，但如果你想疯了，你可能会为你正在调用的函数的 arity 动态生成一个 curry 方法，然后在循环中调用生成的 curry：

```
function func(a,b,c,d) {
  console.log([a,b,c,d]);
  return "Return Value";
}

// Using a static 4 argument curry.
function curry4(f) {
  return function(a) {
    return function(b) {
      return function(c) {
        return function(d) {
          return f(a,b,c,d);
        }
      }
    }
  }
}

var args = [1,2,3,4];
for(var i=0,f=curry4(func);i<func.length;i++) { f = f(args[i]); }
console.log(f); // f is return value of `func` 
```

请参阅[此处](http://jsbin.com/exised/5/edit)，例如，最多支持 12 个可选参数。

但这条路可能会导致疯狂......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:31:27.390

顺便提一下：

如果你使用 setTimeout 你可以传递参数：

```
 setTimeout( _function_name_, delay, param1,param2,param3...) 
```

这样，参数被传递给函数而不使用 apply

# nhibernate - 适当的会话（RavenDB/NHibernate）处置 - IoC 和 Web 应用程序

> ID：12185024
> 
> 赞同：0
> 
> 时间：2012-08-29T19:18:05.763
> 
> 标签：nhibernate, structuremap, ravendb, isession

我正在使用 StructureMap 并且我已经为 ISession 配置了`HybridHttpOrLocalThreadStorage`生命周期。根据请求创建新会话并将其注入控制器。

现在，我的问题是关于处置。我已经阅读了许多介绍不同方法的文章。有些人在控制器中执行此操作，有些在存储库中，有些在 http 模块中，其他人在`Application_EndRequest()`处理程序中执行。批评的范围从违反 SRP 到“创建对象的人应该负责其处置”等等。

所以底线是：

*   常见的方法是手动处理这些会话 - 为什么？我已经配置了我的容器来管理特定对象的生命周期。它（即 IoC）不应该为我管理它吗？
*   可供处置的选项是否以`Application_EndRequest()`“最佳”方式处理？

例如，[这篇文章](http://codebetter.com/jeremymiller/2010/01/06/how-dovetail-uses-structuremap-with-nhibernate/)详细解释了一种可用的方法，但文章本身已有 2.5 年的历史。也许新版本的 StructureMap 会使大部分实现过时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:50:06.607

如果您使用 RavenDB .net 客户端，您将使用 DocumentStore 和 DocumentSession。这两个对象都在后台做了大量的工作。本地缓存要提一件事。为了保持干净和高效，每个会话都应该在工作完成后调用 session.dispose()。documentStore.Dispose() 应该在应用程序结束时调用。

# extjs - 在 ExtJS 4 下有没有办法加载外部组件？

> ID：12185027
> 
> 赞同：4
> 
> 时间：2012-08-29T19:18:23.980
> 
> 标签：extjs, extjs4, components, code-reuse

我正在尝试设置我的 ExtJS 4 项目，所以我有三个顶级应用程序，例如，

> /foo/app.js
> /bar/app.js
> /baz/app.js

每个“顶级”应用程序都是一个单独的 ExtJS 应用程序，每个都有自己的加载器。在某些情况下，我将拥有想要在所有三个应用程序之间共享的通用组件，所以我有`/components`顶级目录。

如果我有一个组件名称说 ComponentA，

> /components/componenta.js

我将如何将 ComponentA 放入所有三个应用程序中，以便单个应用程序可以引用或扩展它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T23:47:53.617

您可以将此相同的加载程序添加到每个应用程序`app.js`文件中。

```
Ext.Loader.setPath('Common', '../components/'); 
```

然后在定义公共组件时为它们提供相同的命名空间，并将它们放在组件顶级文件夹中。

**`componenta.js`**

```
Ext.define('Common.componenta', {
    extend: 'Ext.panel.Panel',
    title: 'Component A'
}); 
```

然后 Common 命名空间将可供您在每个应用程序中扩展

```
Ext.define('Foo.panel', {
    extend: 'Common.componenta',
    title: 'Foo Panel'
}); 
```

# jquery - jQuery if/else if 语句在第一个“if”之后不起作用

> ID：12185029
> 
> 赞同：0
> 
> 时间：2012-08-29T19:18:25.870
> 
> 标签：jquery

我有一个简单的 jQuery if/else if 条件，但只有“if”部分有效，“else if”无效，我不知道为什么。该代码表示​​三个列表框（**ajax-populated**），当其中任何一个被点击时，jQuery 函数会收集被点击项目的 ID 并将其分配给一个变量。第一个（即使我换了地方，我也得到了正确的 ID 号）很好，第二个或第三个都没有。当我使用三个“if”而不是“if/else if”结构时，它也不起作用。

```
$(document).ready(function() {
    $('#btn_edit_details').click(function() {
        var request_id;
        if ($('#lstbx_new_repeat_requests').val().length > 0) {
            request_id = $('#lstbx_new_repeat_requests').val();
            alert(request_id);
        }
        else if ($('#lstbx_approved_repeat_requests').val().length > 0) {
            request_id = $('#lstbx_approved_repeat_requests').val();
            alert(request_id);
        }
        else if ($('#lstbx_declined_repeat_requests').val().length > 0) {
            request_id = $('#lstbx_declined_repeat_requests').val();
            alert(request_id);
        }
if ($('#btn_edit_details').val() == 'edit') {
// rest of the code, working fine when the request_id is passed from the first "if" 
```

和 HTML

```
<input type='button' id='btn_edit_details' value='edit' />
<select id='lstbx_new_repeat_requests' name='lstbx_new_repeat_requests'></select>
<select id='lstbx_approved_repeat_requests' name='lstbx_approved_repeat_requests'></select>
<select id='lstbx_declined_repeat_requests' name='lstbx_declined_repeat_requests'></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:37:52.847

试试[这个](http://jsfiddle.net/zxvvV/)：

```
$('#btn_edit_details').click(function() {
    var request_id;
    $('select').each(function (index, value) {
        if ($(this).val().length > 0) {
            request_id = $(this).val();
            alert(request_id);
            return;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:06:52.553

我最终找到了它对我有用的唯一方法，虽然它对你来说可能看起来不那么聪明，但同样 - 这是我让它工作的唯一方法......我不知道为什么它不能与非常基本的 if/else if 方式。任何建议或意见都将被热情接受。感谢大家的努力协助。

三个列表框的类是`lstbx_repeat_requests`. 当用户点击这三个中的任何一个时，我会在全局变量中捕获其 id。然后我使用 switch 语句，如下所示：

1.  捕获id：

    ```
    $(document).ready(function() {
    $('.lstbx_repeat_requests').change(function() {
        //assigns a global var
        window.my_config =
        {
            lstbx_id : this.id
        };
    });
    }); 
    ```

2.  切换语句：

    ```
    $(document).ready(function() {
    $('#btn_edit_details').click(function() {

        var request_id;
        switch(window.my_config.lstbx_id){
            case "lstbx_new_repeat_requests":{
                request_id = $('#lstbx_new_repeat_requests').val();
                alert(request_id + " new");
                break;
            }
            case "lstbx_approved_repeat_requests":{
                request_id = $('#lstbx_approved_repeat_requests').val();
                alert(request_id + " approved");
                break;
            }
            case "lstbx_declined_repeat_requests":{
                request_id = $('#lstbx_declined_repeat_requests').val();
                alert(request_id + " declined");
                break;
            }
        }
        //rest of the code 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:51:55.643

实现逻辑有问题。

考虑以下情况：

最初，用户从第一个选择列表中选择 1 并按下编辑。

![在此处输入图像描述](../Images/35348e4cc7b21bb1451da13627712c8a.png)

为 1，您将`$('#lstbx_new_repeat_requests').val()`看到值为 1 的警报。

之后，用户从第二个选择列表中选择选项 2。

![在此处输入图像描述](../Images/25ab1fbe68ba4837becaad02441e5831.png)

仍然是 1 ，`$('#lstbx_new_repeat_requests').val()`因此即使用户从第二个选择列表中选择了一个选项，您也会看到一个值为 1 的警报。**else if 无法到达，因为`$('#lstbx_new_repeat_requests').val()`是 1**并且第**一个 If 块**内的代码将被执行。

您可以在下面找到解决上述问题的实现。

```
<input type='button' id='btn_edit_details' value='edit' />
<select class="select-list" id='lstbx_new_repeat_requests' name='lstbx_new_repeat_requests'>
    <option value=''></option>
    <option value='1'>1</option>
</select>
<select class="select-list" id='lstbx_approved_repeat_requests' name='lstbx_approved_repeat_requests'>
    <option value=''></option>
    <option value='2'>2</option>
</select>
<select class="select-list" id='lstbx_declined_repeat_requests' name='lstbx_declined_repeat_requests'>
    <option value=''></option>
    <option value='3'>3</option>
</select>​

var request_id;    
$(document).ready(function() {
    $('#btn_edit_details').click(function() {
        alert(request_id);
    });

    $('.select-list').change(function() {
        if ($(this).val().length > 0) {
            request_id = $(this).val();
        }        
    });
});​ 
```

# java - Java - 将此方法转换为 for 和 while 循环

> ID：12185033
> 
> 赞同：0
> 
> 时间：2012-08-29T19:18:50.487
> 
> 标签：java, for-loop, while-loop

这是过去试卷中的一道题。我不太确定如何将`extract`方法转换为 while 和 for 循环。

我尝试过这个问题：`extract1`和`extract2`方法，但我知道它们是不正确的。原始方法可能没有用，但考试要求您展示如何以不同的方式编写方法。我想知道如何完成它们以供将来参考。

```
String extractedThis = "";

public String extract(String text){
    if(text.length()==0){
        return extractedThis;
    } else {
        return extractedThis = text.charAt(0) + extract(text.substring(1));
    }
}

public String extract1(String text) {

    while (text != null) {
        extractedThis = text.charAt(0) + text.substring(1);
    }
    return extractedThis;
}

public String extract2(String text) {

    for (int i = 0; i < text.length(); i++) {

        extractedThis = text.substring(i);
    }

    return extractedThis;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:21:39.550

```
public String extractWhileLoop(String text) {
    extractedThis = "";

    while(text.length() > 0) {
        extractedThis += text.charAt(0);
        text = text.substring(1);
    }
    return extractedThis;
}

public String extractForLoop(String text) {
    extractedThis = "";
    for (int i = 0; i < text.length(); i++) {

        extractedThis += text.charAt(i);
    }

    return extractedThis;
} 
```

但是，我看不出您究竟想用这些方法实现什么作为返回它们的输入，并且可以更容易地完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:28:46.857

这个函数只是返回接收到的字符串，后跟字符串的最后一个字符（即：'abcd' => 'abcdd'），我正确阅读了它。它在递归调用中使用全局变量，这很有趣，但不惜一切代价避免:)

```
public String extract(String text){
  String lastChar = '';
  extractedThis = text;
  while(text.length() > 0) {
    lastChar = text.charAt(0);
    text = text.substring(1);
  }

  return extractedThis = extractedThis + lastChar;
} 
```

# ruby - 语法错误意外keyword_end期待'}'鞋

> ID：12185036
> 
> 赞同：1
> 
> 时间：2012-08-29T19:19:09.033
> 
> 标签：ruby, syntax-error, shoes

My Son 用 Shoes 制作了一个好玩的程序，它与 ruby​​ 基本相同，但有一个 gui。（我在语法上知道的唯一区别是*alert*而不是*puts*。）他在运行它时出错，看着我。我找不到所有这些错误的原因。* 是分类信息的替代品。

谢谢你

```
Shoes.app do
 #revised lines 1-17
 line = ask "Password (lowercase)"
  if line == "password"
     #superuser password for fast login
     alert "Logged In"
     name = ask "Name (lowercase)"
      if name == "***"
         alert "Welcome, ***"
         alert "Now, please verify your identity"
         idconfirm = ask "What is your 4 digit ID number; if unknown, type 'u'"
          if idconfirm == "u"
             alert "Please contact *** immediatly at ********@gmail.com"
          end
          if idconfirm == "******"
             alert "Administrator Code accepted"
             alert "What do you wish to do now?"
             stack(:align => "center") { #stack is for buttons
                 button "Latest projects (bip)" do
                     stack(:align => "center") { #stack is for paragraph and buttons
                         para "==================================================================
                         build an IRC bot FRAMEWORK
                         learn more languages
                         tri-boot?
                         backup files for win 8 clousre (WHEN NECESSARY)"
                         button "Rblx Assignments" {
                             rblxconf = ask "PASSCODE"
                              if rblxconf == "***********"
                                 #not FINISHED continue                           
                                 para(:align => "center") #CHECK LINE PARA_NTHESES
                                 "===============================================================
                                 learn roblox script
                                 build own admin script
                                 build roblox ***
                                 find other ways to *******"
                              else
                               alert "Not Correct" #revise alert
                              end
                            }
                        }
                   end
                 button "WELCOME"
                }
       end

#revised  up to here CONFIRMED
         if idconfirm == "****"
             alert "Thank You, ***. What do you want to do now?"
             stack(:align => "center") do #stack is for buttons
                 button "Latest projects (bip)" do
                     stack(:align => "center") {
                         para "==================================================================
                         build an IRC bot FRAMEWORK
                         learn more languages
                         tri-boot?
                         backup files for win 8 clousre (WHEN NECESSARY)"
                         button "Rblx Assignments" {
                             rblxconf = ask "PASSCODE"
                             if rblxconf == "***********"
                                 #not FINISHED continue                           
                                 para(
                                 :align => "center")
                                 "===============================================================
                                 learn roblox script
                                 build own admin script
                                 build roblox ***
                                 find other ways to *******"
                             else 
                              alert "Not Correct"
                             end
                            }
                        }
                    end
                 button "WELCOME"
                 button "Admin Log In" do
                     adminconfirm = ask "Admin Code (Hint:MMORPG accounts)"
                      if adminconfirm == "******" 
                         alert "Administrator Code accepted"
                         alert "What do you wish to do now"
                         #IN PROGRESS
                      end
                 end
             end
         end
      else
       alert "Your name is not registered"
      end      
  #superuser password for fast login
  else
   alert "Wrong Password"
  end
 #REVISED UP TO HERE [CONFIRMED]

 # +=========================================================================================================================================================
 #REVISE EVERYTHING OK?
 #revise 25 39 42 55 78 82 & 86 and more ;P
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:40:35.270

尝试将所有“{”切换为“do”，将“}”切换为“end”。一旦我这样做了，我就停止了错误。

没有任何鞋子经验，我不知道为什么这很重要。但是两者之间存在细微差别 - 请参阅[do..end 与 Ruby 中的块的花括号](https://stackoverflow.com/questions/5587264/do-end-vs-curly-braces-for-blocks-in-ruby)。

# iphone - 为什么不在 switch 中省略“case”...case 在 XCode 中抛出错误或警告？

> ID：12185037
> 
> 赞同：2
> 
> 时间：2012-08-29T19:19:23.667
> 
> 标签：iphone, objective-c, ios, cocoa

在检查一段不起作用的代码时，我意识到我已经将“case”从我的 switch 语句中删除了。错误代码具有以下格式

```
switch (foo) {
   firstElem:
       ...
       break;
   secondElem:
       ...
       break;
} 
```

Where`firstElem`和`secondElem`是枚举列表的一部分。当我单步执行代码时，它会跳转`switch`到右括号，因为它找不到匹配项。

这很容易解决，但它让我感到不安，因为XCode在编译或运行时**根本没有抱怨。****为什么？**

1.  语言的结构中是否有一些东西`switch case`难以解释？
2.  是否有过您*想要*省略该`case`语句以产生其他行为的实例（我对此一无所知）？
3.  这在其他语言中会发生吗？我知道 Objective-C 是“C 的严格超集”，所以我假设 C 中也可能发生同样的情况（取决于编译器）。爪哇呢？C++？

**更新：**我正在使用 XCode 4.4.1（尽管我会马上升级）。这是已建立项目的一部分。**

**进一步的更新和参考**Kevin Ballard 正确地指出我不小心定义了标签。有关标签和 GOTO 的更多信息，您可以在*The C Programming Language* 3.8 中找到讨论，其中 Kernighan 和 Richie 得出结论（尽管它们可能在错误检查中有些用处）

> ... 依赖 goto 语句的代码通常比没有 goto 的代码更难理解和维护。尽管我们对此事并不教条，但似乎确实应该很少使用 goto 语句，如果有的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T19:30:33.793

你拥有的是一堆常规的旧标签`switch`。这是完全合法的。Xcode 没有抱怨，因为没有`case`语句的 switch 是合法的，虽然有点奇怪。

也就是说，在看到没有声明`clang`的声明时会发出警告。你在使用 GCC 吗？`switch``case`

# linux - 许可 - Linux 内核

> ID：12185044
> 
> 赞同：0
> 
> 时间：2012-08-29T19:19:42.373
> 
> 标签：linux, linux-kernel, licensing

我知道 linux 内核的源代码是在 GNU GPL V2 下获得许可的。

有没有办法查看公司（比如思科、甲骨文）对模块所做的更改？因为一旦他们更改代码以适应他们的二进制 blob，就必须公开该模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:21:50.420

Linux 内核在 GNU GPL 版本 2 下获得许可。您可以在[此处](http://www.gnu.org/licenses/gpl-2.0.html)找到许可的全文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:37:40.207

个人或组织可以将他们的代码置于他们喜欢的任何许可下，但除非它是 GPLv2 或兼容许可，否则 a) 不会/不能包含在主线内核中，这会减慢代码的采用，或 b) 导致合法其用户的问题。

# jquery - jqGrid 不显示来自 asmx Web 服务（vb.net）的数据

> ID：12185046
> 
> 赞同：0
> 
> 时间：2012-08-29T19:19:51.957
> 
> 标签：jquery, asp.net, jquery-plugins, jqgrid

我是 jQuery/jqGrid 的新手。我想从 asmx Web 服务返回 json 格式的数据并在 jqGrid 中显示数据。网格正在页面上呈现，但它不包含任何数据行。我不确定我是否返回了 jqGrid 正在寻找的正确格式。或者，如果我错过了其他东西。

*（我遇到了许多与该主题相关的 SO 问题，所以如果已经回答，我提前道歉。在这一点上，即使是可用的不同答案的数量也会造成进一步的混乱）。*

**网络服务**

```
 <System.Web.Script.Services.ScriptService()> _
    <WebService(Namespace:="http://tempuri.org/")> _
    <WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
    <Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
    Public Class WebService1
    Inherits System.Web.Services.WebService

    Public Class Person
        Public FirstName As String
        Public LastName As String
    End Class

    <WebMethod()>
    <ScriptMethod(UseHttpGet:=False, ResponseFormat:=ResponseFormat.Json)> _
    Public Function GetPersonList() As List(Of Person)

        Dim personList As New List(Of Person)

        'Connect to DB

        'While reading from DB       
            personList.Add(
                New Person() With {
                    .FirstName= dr("fname"),
                    .LastName = dr("lastName")
                })

        'Does personList need to be converted to a different format?
        Return personList

    End Function
    End Class 
```

**ASPX 页面**

```
jQuery("#list1").jqGrid({
            url: "http://localhost/WebService1.asmx/GetPersonList",
            datatype: "json",
            mtype: 'POST',
            colNames: ['FirstName', 'LastName'],
            colModel: [
            { name: 'FirstName', index: 'FirstName', width: 90 },
            { name: 'LastName', index: 'LastName', width: 90 }
            ],
            rowNum:10,
            rowList: [10,20,30],
            pager: '#pager1',
            viewrecords: true,
            caption: "Person List"
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:59:43.930

重要的是要了解 jqGrid 发送到`"http://localhost/WebService1.asmx/GetPersonList"`附加参数。jqGrid是面向服务端实现数据分页的。因此它将只显示 10 行数据（请参阅 参考资料`rowNum:10`），并且起始页选择用户。因此最好更改服务器代码以支持分页。（参见代码示例[的答案）](https://stackoverflow.com/a/3161542/315935)

或者，您可以使用`loadonce: true`jqGrid 的选项。在这种情况下，*jqGrid*将实现*客户端*分页，并且服务器可以像您当前一样返回所有数据。不过，您必须添加更多参数才能使网格正常工作。重要的是要知道，ASMX 服务返回`d`属性内的所有数据。所以你必须使用`jsonReader`which 来描述 jqGrid 如何读取从服务器返回的数据。可能是这样的

```
jsonReader: {
    repeatitems: false,
    root: function (obj) { return obj.d; },
    page: function () { return 1; },
    total: function () { return 1; },
    records: function (obj) { return obj.d.length; }
} 
```

（[以答案](https://stackoverflow.com/a/10824885/315935)为例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:05:47.063

编辑：使用这个。我已经使用 ASMX 服务对其进行了测试，该服务没有返回`List<Person>`.

```
$("#list1").jqGrid({
    url: "http://localhost/WebService1.asmx/GetPersonList",
    datatype: "json",
    mtype: 'POST',
    ajaxGridOptions: { contentType: 'application/json; charset=utf-8' 
    }, // ASMX wants request header to be application/json..
    serializeGridData: function (postdata) { 
        return null; 
    }, // ignores paging params - if not needed (else your service must define them)
    jsonReader: { // thanks Oleg for this tip on dealing with the ASMX data.d
        repeatitems: false,
        root: function (obj) { return obj.d; },
        page: function () { return 1; },
        total: function () { return 1; },
        records: function (obj) { return obj.d.length; }
    },
    colNames: ['FirstName', 'LastName'],
    colModel: [
        { name: 'FirstName', index: 'FirstName', width: 90 },
        { name: 'LastName', index: 'LastName', width: 90 }
        ],
    rowNum: 10,
    rowList: [10, 20, 30],
    viewrecords: true,
    caption: "Person List"
}); 
```

另一个有用的技巧是在定义 jqGrid 时使用[Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)之类的东西来设置断点。您还应该在 Firebug 控制台中看到对您的 Web 服务进行了调用，以及响应是否返回。

另一个有用的提示是将您的 JSON 包装在 JsonResponse 类中，其中包含时间戳、状态、消息、结果 .. 以及您需要的任何其他字段（我只使用这 4 个）。

```
public class JsonResponse
{
    public object[] Result { get; set; }
    public string TimeStamp { get; set; }
    public string Status { get; set; }
    public string Message { get; set; }
} 
```

# php - Mercurial (HG) 拉取参数：用户名和密码

> ID：12185048
> 
> 赞同：20
> 
> 时间：2012-08-29T19:20:07.500
> 
> 标签：php, mercurial

我必须编写一个脚本来自动从一个 mercurial repo 中提取。无论如何我可以执行一个`hg pull -u`包括在同一命令中传递请求的用户名和密码的操作吗？我知道有一个交互方法是默认行为，我不想将用户名和密码保存在 hgrc 或其他地方，因为它将被多个用户使用，所以有没有办法通过传递用户名和密码命令行？我尝试`proc_open`在 PHP 中使用，但效果不如标准输入。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-02T10:22:11.057

我找到了两个解决方案：

1\. 明确提供 URL，包括完整凭据：

> `hg pull -u https://user:pass@host/path`

2\. 使用 --config 提供凭据，使用 * 作为前缀（来自 Victor 的回答）：

> `hg pull -u --config auth.x.prefix=* --config auth.x.username=user --config auth.x.password=pass`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T19:46:34.697

解决方案 2 特定于存储库。做

```
[auth]
x.prefix = *
x.username = USERNAME
x.password = PASSWORD 
```

使其适用于所有存储库。此外，如果你把它放在“~/.hgrc”中并给予 600 的权限，你就不必使用 HGRCPATH 技巧。把它留在那里。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T21:47:20.347

在命令行上传递密码是**不安全**的，因为其他用户可以看到它使用`ps`和类似的。你应该做的是：

1.  `hg`与您返回的管道进行通信`proc_open`。您需要仔细解析 Mercurial 的输出，并将用户名和密码输入标准输入。将 Mercurial 运行为：

    ```
    hg --config ui.interactive=yes 
    ```

    确保它会和你说话——否则我担心它会检测到没有 TTY 并且根本不会提示你。

2.  编写一个带有[`[auth]`section](http://www.selenic.com/mercurial/hgrc.5.html#auth)的临时配置文件。它看起来像这样：

    ```
    [auth]
    x.prefix = output of "hg paths default"
    x.username = USERNAME
    x.password = PASSWORD 
    ```

    （`x`不重要，它可以是任何东西。）确保文件只能由您运行脚本的用户读取。然后设置`HGRCPATH`环境变量指向该文件并执行 Mercurial。完成后删除文件！

[命令服务器](http://mercurial.selenic.com/wiki/CommandServer)有一个[libhg PHP 库](https://bitbucket.org/xrstf/libhg)，但我在该库中看不到任何有关拉取或克隆的用户名或密码的信息。该库正在进行中，但当它更成熟时，我建议使用它。但是目前，上述方法应该可以帮助您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T14:39:30.417

那行得通：

```
hg --config auth.rc.prefix=http://host/ --config auth.rc.username=user --config auth.rc.password=password pull -u http://host/full/path/to/repo 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-29T19:35:32.390

您也许可以`--config`像这样使用开关来执行此操作：

```
hg --config auth.username=USERNAME --config auth.password=PASSWORD pull -u 
```

我个人从未这样做过，但希望这会有所帮助。

# hibernate - 嵌套复合键

> ID：12185050
> 
> 赞同：1
> 
> 时间：2012-08-29T19:20:23.913
> 
> 标签：hibernate, jpa, composite-key

我有两个实体的以下复合键

```
@Embeddable
public class ProductId implements Serializable {
    @Column(name = "Id", columnDefinition = "bigint identity(1,1)")
    private Long id;

    @Column(name = "ProductTypeName")
    private String name;
....
}

@Embeddable
public class ApplicationId implements Serializable{
    @Column(name = "Id", columnDefinition = "bigint identity(1,1)",
            nullable = false, insertable = false, updatable = false)
    private Long id;
    @Embedded
    @AttributeOverride(name="id",
                       column=@Column(name="ProductId",
                                  columnDefinition = "bigint identity(1,1)",
                                  nullable = false, insertable = false,
                                  updatable = false))
    private ProductId productId;
....
} 
```

我有两个不同的实体，都有上面定义的复合键。我的问题是嵌套复合键，我试图让它工作，但是当休眠扫描具有 ApplicationId 可嵌入对象作为其 PK 的实体时它失败了（这是给出问题的映射）

```
@Entity(name = "Application")
@Table(name = "Application")
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Application {

    @EmbeddedId
    private ApplicationId applicationPk;

    @MapsId("productId")
    @ManyToOne(fetch = FetchType.LAZY, optional = false)
    @JoinColumns({@JoinColumn(name = "ProductId", referencedColumnName = "Id",
                           nullable = false, insertable = true,
                           updatable = true),
                  @JoinColumn(name = "ProductTypeName",
                           referencedColumnName = "ProductTypeName",
                           nullable = false, insertable = true,
                           updatable = true)})
    @ForeignKey(name = "FK_Application_Product")
    private Product product;
....} 
```

Hibernate 抱怨以下错误`Caused by: org.hibernate.MappingException: Unable to find column with logical name: ProductId in Application`

# c# - 使用 MVC3 执行具有多个参数的存储过程的最佳实践是什么？

> ID：12185053
> 
> 赞同：1
> 
> 时间：2012-08-29T19:20:36.677
> 
> 标签：c#, sql, asp.net-mvc-3, entity-framework-4

我正在努力在我的 MVC3 应用程序中实现搜索功能。我希望将两个参数传递给并执行一个存储过程，该过程基本上看起来像这样：

```
create procedure MyProc
(
@FirstParam nvarchar(50),
@SecondParam nvarchar(20)
)
as select * from MyTable where @FirstParam like @SecondParam 
```

*   MyTable 有大约 30 个字段将为每个对象返回，我需要为几个表创建这样的过程，所以我试图避免使用 SqlDataReader 并将返回的 Sql 数据转换为 C#。
*   我想使用类似[这种方法](http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-4-1-using-stored-procedure-to-insert-data.aspx)的方法，但我不确定这是否可以使用多个参数来完成。
*   理想情况下，我想使用 EF4，但是在使用 EF4 时我没有找到任何关于执行存储过程的好信息。

任何有关执行此任务的最轻松方式和/或最佳实践的见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:24:20.263

您的建议确实*可以*通过参数来完成，并且您*应该*使用像 EF4 这样的 ORM 来进行数据访问。像大多数支持存储过程的 ORM 一样，您确实*可以将多个参数传递给存储过程。*

但是，您会发现的问题是，您不能在 SQL Server（或我知道的任何其他 SQL 数据库）中拥有动态列名 - 您不能在变量中提供列名。

您将需要使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)来实现这一点，无论是在存储过程中还是在其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:50:33.303

我的建议是使用[动态 linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)（和[here](https://stackoverflow.com/questions/3937435/dynamic-linq-and-substitution-values-with-unknown-number)和[here](http://www.albahari.com/nutshell/predicatebuilder.aspx)）。您可以将有效的 linq 表达式作为常规字符串传递：

```
var column = "Name";
var value = "Marvin";
var query = DbCtx.MyEntity.Where("{0} == @1", columnName, value); 
```

好处 (IMO) 是您可以将搜索逻辑保留在应用程序中，如果您需要为许多表执行此操作，您可以创建一个 T4 模板来为您生成引导代码。

# android - 在开发者控制台中查看 manifest.xml

> ID：12185059
> 
> 赞同：0
> 
> 时间：2012-08-29T19:21:11.590
> 
> 标签：android, android-manifest

我使用第三方公司的软件来制作我的应用程序，他们为我将其添加到 Android 市场。我试图找到清单文件，但我什至不知道它长什么样。有人可以指导我在我的开发人员控制台中的哪里找到它并告诉我要寻找什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:41:21.443

首先，“此时”无法从开发人员控制台检索您的应用程序。

假设第三方公司的软件构建并发布了您的名为“application.apk”的应用程序，并且您无权访问源代码（和 AndroidManifest.xml），您应该能够从 google play 下载该应用程序。

.apk 类似于 zip 压缩文件，因此您可以将其解压缩。AndroidManifest.xml 文件只是位于未压缩存档的根目录中。为了能够阅读其内容，您可能需要[http://code.google.com/p/android-apktool/](http://code.google.com/p/android-apktool/)之类的工具或其他工具。

# python - 永远的while循环对可扩展程序有害吗？

> ID：12185065
> 
> 赞同：0
> 
> 时间：2012-08-29T19:21:36.300
> 
> 标签：python, scalability, gevent

假设我需要检索作业状态，并生成一个新线程来处理作业计算：

```
def post_view(request):
     g = Greenlet.spawn(heavy_job, arg1, arg2)
     return json.dumps(default_response) 
```

然后在heavy_job

```
def heavy_job(...):
   # call a 3rd party service to start doing its job
   job_id = (....)

   request.session['heavy_job_status'] = 'Running'
   status = 'Running'
   while status == 'Running':
       # ask the 3rd party guy "are you still running"
       resp = 3rdparty-service.query(job_id, ....)
       if resp != 'Running':
          return resp
       time.sleep(5)  # we will monkey patch the time with gevent's timer so no locking 
```

这种while循环方法真的不适合缩放吗？还是我宁愿在每个 ajax 请求进来时查询 3rd 方服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:29:57.900

抱歉，我还不能写评论，所以我在这里写了一篇关于 Joel Cornett 评论的注释，并举例说明了“while”和“for”的时间。

这个例子有一个错误：timeit() 方法只执行一次初始化代码，但是主代码 - 很多次，所以使用 'while' 循环，除了第一个执行之外，每次执行都什么都不做，因为 'i' 的值已经是10\. 您可以将 10 更改为 100 或 1000，并且在时间上没有区别（但不能使用“for”循环）。您还可以在 'while' 之前添加 'i = 0' 并看到非常不同的结果。

但是，我认为，这对您的代码无关紧要，因为 3rdparty-service.query() 可能比“for”和“while”循环之间的差异花费更多的时间。

# jquery - 编写一个 jQuery 插件

> ID：12185067
> 
> 赞同：1
> 
> 时间：2012-08-29T19:21:44.063
> 
> 标签：jquery, plugins

我在 jquery 中做我的第一个插件进行练习，但它不起作用，我看过教程和 api 文档并没有发现问题。

我在 html 中有一个 select 和一个 span.sl1。我这样称呼它：

```
$("select").selectFunc("onChange"); 
```

我的插件代码是：

```
 (function( $ ){
var metodos = {
    init : function(opciones) {   
        var configuracion = {  
            container:$('span.sl1'),
            valor:$(this).val()
        };  
        return this.each(function(){  
            if(opciones){  
                configuracion = $.extend(configuracion,opciones);  
            }  
        });  
    },
    onChange:function(opciones){
        return this.each(function(){
            $(this).bind('change',function(){
                container.html(valor);
            });
        });
    },
    unbind : function (){  
        return this.each(function(){  
            $(this).unbind('mouseover');  
            $(this).unbind('mouseout');  
        });  
    }  
};
$.fn.selectFunc = function( metodos ) {
    if (metodos[method] ) {
        return metodos[ metodo ].apply( this, Array.prototype.slice.call( argumentos, 1 ));
    }
    else if ( typeof metodo === 'object' || ! metodo ) {
        return metodos.init.apply( this, argumentos );
    }
    else {
        $.error( 'Este método ' +  metodo + ' no existe en jQuery.estiloPropio' );
    }    
};
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:32:16.873

您可能还想查看[此页面](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/)以获取快速的 jquery 插件样板。

# c# - 提交sql事务后无法立即看到数据

> ID：12185070
> 
> 赞同：3
> 
> 时间：2012-08-29T19:21:46.847
> 
> 标签：c#, sql-server-2005, transactions

更新为更直接的标题..

我在提交后立即从我的事务中查看提交的数据时遇到问题。

我接受来自用户输入的数据，以具有多个具有一对多关系的子表的父表的形式将数据放入数据库（SQL Server 2005）。我正在使用事务并在完成时提交它。数据已提交到数据库，但我`SELECT`在提交后立即对数据库运行了几个其他查询（仅限语句）以检查是否已输入组的所有行。任何人都可以随时输入这些行，并且每个行都在他们自己的事务中。因此，假设“组”在数据库中总共需要 3 行，我想提交我的事务，然后读取数据库以查看是否有任何组完成......包括我刚刚提交的事务。

问题是，显然在提交后读回数据并没有带回我刚刚提交的事务......如果这个事务是组中的最后一行，那么它会被读取遗漏并且不会返回。

所以...

*   交易开始。
*   写行...
*   事务提交..
*   阅读以查看是否存在完整的组...
*   未返回当前事务的组。其他完整组返回。

需要注意的一点是，提交另一笔交易将导致返回此数据...如果此新交易包含完成另一组的行，我不会收到返回的新行...

这是我的代码..缩写...

```
SqlConnection sqlConn = getConn();  //getconn is a function that returns a connection object

String sqlSTR = "<<<MY INSERT STATEMENT>>>";
SqlTransaction trans = sqlConn.BeginTransaction(System.Data.IsolationLevel.ReadUncommitted,"Trans");
SqlCommand sqlCMD;
try
{
    sqlCMD = new SqlCommand(sqlSTR, sqlConn, trans);

    //...Add all my data to the DB.

    trans.Commit();
catch (SqlException sqlErr)
{
    trans.Rollback("Trans");
    throw;
}
finally
{
    trans.Dispose();
} 
```

接下来是一些代码来读取数据库以查找“已完成的组”，但如果已完成，则不会返回此数据所属的组。

数据被存储......数据可以在下一次调用时通过相同的代码检索......但不是在这里。

就好像通过 SQL 提交事务需要时间，并且在 SQL Server 提交事务之前调用我的读取......即使我将事务设置为允许读取未提交的数据。

在继续执行其他代码之前，是否有某种方式让提交等待提交完成？

我尝试`SELECT @@TRANCOUNT`在提交后立即对连接进行操作，但它总是返回 0。

谢谢！

编辑：

```
public static SqlConnection getConn()
{
    try
    {
        string sqlStr = WebConfigurationManager.ConnectionStrings["conn_Main"].ConnectionString;

        SqlConnection sqlCN = new SqlConnection(sqlStr);
        sqlCN.Open();

        return sqlCN;
    }
    catch
    {
        throw;
    }
} 
```

我正在使用存储过程读取事务后的记录...

在 SP 中，我使用了一个基本的 select 语句，它执行了几个连接，并且没有太多其他操作来首先拉回具有提交的“组”列表，然后每个组单独拉出各个组。第二部分似乎看不到随事务插入的记录......直到下一个事务被提交。

今天早上我正在做更多的测试，看看我是否能准确地知道提交事务后记录何时显示。

# php - 在while循环中执行函数

> ID：12185072
> 
> 赞同：1
> 
> 时间：2012-08-29T19:21:49.937
> 
> 标签：php, mysql, sql

我有这个函数，如果存在则返回 bool(true) 或 bool(false) `movement`。

```
function movement_performed_today($class_id, $client_id){
$class_id = (int)$class_id;
$client_id = (int)$client_id;

$query = mysql_query("SELECT COUNT(`movement`) FROM `completed_movements` WHERE `class_id` = '$class_id' AND `client_id` = '$client_id' AND `date` = CURDATE()");

$movement_performed = mysql_fetch_row($query);
return ($movement_performed[0] > 0);

} 
```

我有这个 while 循环，我想在其中调用这个函数，如果它返回 false，则执行该函数`completed_movement`。我尝试了许多不同的方法，但我似乎无法让它发挥作用。任何信息将不胜感激。

```
if (empty($_POST)=== false){
$i = 0;
while (isset($_POST["first_name"][$i])) {
    $movement_data = array(   
    'user_id'       => $session_user_id,   
    'class_id'      => $class_id,   
    'class_name'    => $class_name,
    'client_id'     => $_POST['client_id'][$i],    
    'first_name'    => $_POST['first_name'][$i],   
    'last_name'     => $_POST['last_name'][$i],   
    'nickname'      => $_POST['nickname'][$i],   
    'order'         => $_POST['order'][$i],   
    'movement'      => $_POST['movement'][$i],   
    'rep_set_sec'   => $_POST['rep_set_sec'][$i],   
    'rest'          => $_POST['rest'][$i],   
    'date'          => $today   
    );  

 //assign variable to the function
    $isPerformed = movement_performed_today($class_id, $_POST['client_id'][i]);

    //if return false perform this function
    if(! $isPerformed){ completed_movement($movement_data);}

   $i++; 
   } 

} // if empty 
```

我在这里尝试做的是每次循环检查函数 move_performed_today 是真还是假。如果返回 false 则将此 _POST 数据插入到数据库中。不确定我是否正确执行此操作，因为即使该函数返回 true，它仍会调用 completed_movement 函数并将信息发布到 db。

我相信问题可能就在这里。早些时候这将返回真或假，但现在即使`movement`存在也只返回假。这段代码：

```
$movement_performed = mysql_fetch_row($query);
//return ($movement_performed[0] > 0);
var_dump($movement_performed); 
```

返回这个：

```
array(1) { [0]=> string(1) "0" } 
array(1) { [0]=> string(1) "0" } 
```

如果`movement`存在，则“0”不应为“1”或更高，具体取决于它与查询匹配的次数。

这是工作查询：

```
function movement_performed_today($class_id, $client_id, $movement){
$class_id = (int)$class_id;
$client_id = (int)$client_id;

$query = mysql_query("SELECT COUNT(`movement`) FROM `completed_movements` WHERE `class_id` = '$class_id' AND `client_id` = '$client_id' AND `movement` = '$movement' AND `date` = CURDATE()");

$movement_performed = mysql_fetch_row($query);  
return ($movement_performed[0] > 0);

} 
```

这是工作的while循环。

```
if (empty($_POST)=== false){
$i = 0;
while (isset($_POST["first_name"][$i])) {
    $movement_data = array(   
    'user_id'       => $session_user_id,   
    'class_id'      => $class_id,   
    'class_name'    => $class_name,
    'client_id'     => $_POST['client_id'][$i],    
    'first_name'    => $_POST['first_name'][$i],   
    'last_name'     => $_POST['last_name'][$i],   
    'nickname'      => $_POST['nickname'][$i],   
    'order'         => $_POST['order'][$i],   
    'movement'      => $_POST['movement'][$i],   
    'rep_set_sec'   => $_POST['rep_set_sec'][$i],   
    'rest'          => $_POST['rest'][$i],   
    'date'          => $today   
    );  

 //check not already performed today
    $isPerformed = movement_performed_today($class_id, $_POST['client_id'][$i], $_POST['movement'][$i]);

    //if not performed then do insert
    if (! $isPerformed){ completed_movement($movement_data);}

   $i++; 
   } 

} // if empty 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:28:55.733

我可能误读了这一点，但看起来您将 $return 设置为 true 或 false，而不是实际返回值。我相信你想改变：

```
$return = $movement_performed[0] > 0; 
```

至

```
if($movement_performed[0] > 0) return true;
else return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:28:43.663

编辑：

听起来您的 SQL 查询也有问题。尝试：

```
$query = mysql_query("SELECT COUNT(`movement`) FROM `completed_movements` WHERE `class_id` = $class_id AND `client_id` = $client_id AND `date` = CURDATE()"); 
```

由于列 class_id 和 client_id 似乎是整数，因此删除它们的值周围的单引号。

编辑：更正语法，首先将 SQL 结果转换为整数。

`return ((int)$movement_performed[0] > 0 ? true : false);`

如果您使用此返回行，该函数`completed_movement()`将仅返回布尔值。

在这种情况下，您在为调用函数进行比较逻辑时要严格。

你会想要这样做：

```
//if return false perform this function
if ($isPerformed === false) {
    completed_movement($movement_data);
} 
```

# css - 如何在 iframe 中使用 css 媒体查询？

> ID：12185073
> 
> 赞同：2
> 
> 时间：2012-08-29T19:21:52.727
> 
> 标签：css, iframe, fancybox, media-queries

我有一个加载 iFrame (fancybox) 的页面。我的 CSS 媒体查询在父页面上运行良好，但在 iFrame 中调用内容时，媒体查询不起作用。（iFrame 中的内容有它自己的样式表）。

如何让媒体查询在 iFrame 中工作？仅供参考 - 我的宽度和高度是由调用“fancybox”的 javascript 设置的，它创建 iFrame 并使用百分比设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:27:32.417

除非我大错特错，否则您对使用 CSS 的 iframe 的内容几乎没有“外部”控制*权*。我觉得你有点不走运。

# javascript - 使用下拉选择菜单突出显示一行表格单元格

> ID：12185074
> 
> 赞同：2
> 
> 时间：2012-08-29T19:21:54.347
> 
> 标签：javascript, php, html-table

我一直在努力寻找实现这一目标的解决方案。我有一个用数据库中的数据填充的 HTML 表单。该表由 6 列组成，其中一列名为“状态”，在下面的每个单元格中都有一个下拉菜单。当用户从下拉列表中选择一个值时，该菜单包含三个值“待处理”“已批准”和“已拒绝”，该行上的所有单元格都应更改颜色（绿色 - 已批准，琥珀色 - 待处理，红色 - 不批准）

到目前为止，这是我的代码：

```
<?php
$result = mysql_query("SELECT * FROM Orders")
or die (mysql_error());
?>
<table class="table1" style="background-color:#ffffff;" >
<h4>Purchase Orders</h4>
<tr>
<th>Order Number</th>
<th>Order Date</th>
<th>Ordered By</th>
<th>Supplier</th>
<th>Total Price</th>
<th>Status</th>
</tr>
<?php
while($row=mysql_fetch_array($result)){
echo "</td><td>";
echo $row['Orderno'];
echo "</td><td>";
echo $row['Orderdate'];
echo "</td><td>";
echo $row['Orderedby'];
echo "</td><td>";
echo $row['Supplier'];
echo "</td><td>£";
echo $row['totalprice'];
echo "</td><td>";
echo '  <select id="'.$row['Orderno'].'" onchange="myJSFunction(this)">
<option></option>
<option>Approved</option>
<option>Pending</option>
<option>Disapproved</option>                  
</select>';
echo "</td></tr>";
}
echo "</table>";
?> 
```

如果有人能指出我正确的方向，将不胜感激。如何为每个颜色变化创建三个函数，然后将它们应用于每个选项值。如果我申请 Orderno，该行的所有单元格都会受到影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:25:09.897

我知道你没有用 jQuery 标记你的问题，但是如果它是一个选项，你可以使用这个：

```
$(document).ready(function() {
    var color = ['none', 'green', 'yellow', 'red'];
    $('table.table1').on('change','select', function() {
        $(this).parents('tr').css('background', color[$(':selected', this).index()]);
    });​
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/eQNp5/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:36:07.537

试试这个（[jsFiddle](http://jsfiddle.net/pXvQG/10/)）：

```
function myJSFunction(element)
{
    var row = element.parentNode.parentNode;

    switch(element.options[element.selectedIndex].innerHTML)
    {
        case "Pending":
            row.style.background = "#FF7E00";
            break;
        case "Approved":
            row.style.background = "green";
            break;
        case "Disapproved":
            row.style.background = "red";
            break;
        default:
            row.style.background = "white";
    }
} 
```

# testing - 将需求与功能测试联系起来

> ID：12185076
> 
> 赞同：4
> 
> 时间：2012-08-29T19:22:01.810
> 
> 标签：testing, agile, functional-testing, requirements

我正在构建一个命令行工具，我可以在其中对输入执行如下命令：

```
PROMPT>userName=Seán<CR>
PROMPT>zodiacSign=Virgo<CR> 
```

其中 userName 是字符串类型， zodiacSign 是枚举类型。

我也有自动完成功能，这样我就可以按 Tab 键并获取线索，就像这样

```
PROMPT>zodiacSign=C<TAB>
         Cancer
         Capricorn
PROMPT>zodiacSign=Ca 
```

问题是我收到了越来越多的微妙需求，我发现这些需求越来越难以记录到用户故事中。例如，我刚刚收到要求，如果我按回车键进行以下操作：

```
PROMPT>zodiacSign=Can<CARRIAGE-RETURN> 
```

然后软件应该自动完成命令**zodiacSign=Cancer**并执行它，因为它是唯一的选项。

我将进行功能测试来测试这些细微差别。通过这样做，我可以通过我的功能测试演示用户故事。

但是你会推荐什么方便的工具来存储需求/用户故事，甚至可以将它们链接到功能测试？也许这个工具包括覆盖图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T02:53:36.600

要求的受众是谁？如果是开发人员，我会说版本控制系统是存储它们的好地方。:-)

我建议使用 Cucumber 或 FitNesse。使用测试作为需求是要走的路。

黄瓜例子：

```
Scenario:
   If a single match is available and the carriage return is pressed
   auto-complete should accept the match

Given valid Zodiac Signs are "Cancer,Capricorn"
When the user enters "zodiacSign=Can<CARRIAGE-RETURN>" at the prompt
Then the shell should auto-complete to "zodiacSign=Cancer" 
```

这是一个完全可执行的测试，可以很好地描述所需的功能。

希望有帮助！

布兰登

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:26:26.777

For your need, take a look at [QMetry](http://www.qmetry.com/).
It's a very complete tool that allow you to define requirements, test cases, test scenarios and also the launching of test scenarios. Reporting is also nice and HMI is very user friendly.

Hope this help

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T21:46:37.443

看看[FitNesse](http://fitnesse.org/)。它是需求 Wiki 和功能测试执行框架的组合。

当您编写需求时，您将它们放在一个包含示例数据和预期结果的表中。单击“测试”，FitNesse 会解析表格并进行调用。很酷。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T14:11:34.330

FitNesse 确实是一个流行的工具，但有些人会认为[FitNesse 是邪恶的](http://it-essence.xs4all.nl/roller/technology/entry/the_fatal_flaws_of_fitnesse)（它很容易被滥用，并且[存在许多问题](https://stackoverflow.com/questions/1401390/fitnesse-vs-anyother-subsystem-testing-tool)）。一个好的开源跨平台替代方案是[**soapUI**](http://www.soapui.org/About-SoapUI/what-is-soapui.html)。

**soapUI**可以管理[功能测试](http://www.soapui.org/Functional-Testing/functional-testing.html)，以及[跟踪系统的需求](http://www.soapui.org/Working-with-Projects/managing-requirements.html)、用例和用户故事，并将它们链接到测试。

它有一个很好的图形用户界面（包括[覆盖图](http://www.soapui.org/Coverage/introduction.html)，就像你想要的那样！）。大多数功能都包含在免费版本中。

# mysql - 管理多个通讯数据库的最佳实践

> ID：12185080
> 
> 赞同：1
> 
> 时间：2012-08-29T19:22:35.900
> 
> 标签：mysql, database, e-commerce

我现在有两个独立的时事通讯数据库。一种是简单的选择加入，客户只需提供他们的电子邮件地址即可接收我们的邮件，另一种是成熟的客户帐户数据库（用户名、密码、地址、订单历史记录等）。两者最终都会得到基本相同的时事通讯（我们会尽可能地进行一些细分和动态内容）。此外，我应该提到，选择加入表有一些一次性的列，其中不同的营销计划收集了有关联系人的数据（联系人在哪里注册 [在线/离线] 以及它是什么促销活动，他们的邮寄地址，如果我们拥有它，等等）。

我已经设置了这两个列表多年，但是随着客户从简单的选择加入到创建帐户，他们更新他们的电子邮件地址等，管理变得越来越难。一旦用户创建帐户，他们将从那里管理他们的时事通讯设置是有道理的。但有时现有客户在选择加入时输入他们的电子邮件地址（反之亦然），并且管理重复项开始变得复杂。我们还必须处理两个数据库之间的大量重复数据（并且跨越多个数据库，而不仅仅是表，是一个挑战）。

更复杂的是，我们使用第三方服务发送我们的时事通讯。我们有一些经常运行的进程会执行一些双向同步，所以我每次都必须做一些杂耍来确定我从哪个数据库中提取更改/将更改推送到哪个数据库，最后更新哪个源等等。 . 如果联系人从 opt-in 列表移动到客户列表，我必须推送更改，停用旧关系；如果他们将自己添加到选择加入中并且我们已经将他们的电子邮件保存在另一个数据库中，我会设置一个标志来忽略他们——这一切都令人头疼。

现在这必须是一个非常普遍的情况。我访问的几乎每个电子商务网站都至少有两个这样的不同列表。我的问题是他们是如何处理的？最佳做法是什么？

在我看来，我有两个选择：

1.  在同一个数据库中使用两个不同的表（这与我现在的做法非常接近）。这使我能够继续保持独立和有条理，但同时有效地检查两个列表是否存在冲突/重复信息。我仍然有许多相同的问题（移动关系或定义“主记录”、重复数据、传播更改等），但它至少应该简化一些事情。

2.  创建一个表（称为 NewsletterContacts 或其他名称）供所有联系人共享。可能会直接添加选择加入的用户，但必须同步客户帐户表中的条目。不过，这也有许多缺点。对客户帐户表的任何更改都必须先推送到 NewsletterContacts，然后才能推送到我们的电子邮件软件。我在那个数据库中有一些非常混合的内容——一些记录会有一个地址和来源等，其他的只有一个电子邮件地址，然后其他的会指向一个客户帐户表，其中包含所有类型的其他信息.

**TL,DR：**当您知道会有重复时，您如何管理两个单独的时事通讯列表？

# android - 查看脚蹼 3 个选项卡

> ID：12185082
> 
> 赞同：0
> 
> 时间：2012-08-29T19:22:42.047
> 
> 标签：android, viewflipper

我有 3 个按钮

1.  称为第 1 页
2.  称为第 2 页
3.  称为第 3 页

我想使用已经正常工作的viewflipper，如果我单击按钮page1，它应该将我发送到page1，如果我单击page2，它应该将我发送到第2页，第3页也是如此。

有没有人可以帮我解决这个数学问题？

```
setContentView(R.layout.second_activity);

        flipper = (ViewFlipper)findViewById(R.id.viewFlipper1);
        1 = (Button) findViewById(R.id.macro);
        2= (Button) findViewById(R.id.esr);
        3 = (Button) findViewById(R.id.gio);

        1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                 flipper.showNext();

            }

        });
        2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                flipper.showNext();
            }
        });
       3.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                flipper.showPrevious();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:33:47.870

假设您的页面索引是：

*   指数 0：宏观经济页面。
*   索引 1：esr 页面。
*   索引 2：gio 页面。

那么你应该这样做：

```
macroeconomic.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
         flipper.setDisplayedChild(0);
    }
});
esr.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        flipper.setDisplayedChild(1);
    }
});
gio.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        flipper.setDisplayedChild(2);
     }
}); 
```

# ssis - 有没有办法修剪列标题？

> ID：12185083
> 
> 赞同：0
> 
> 时间：2012-08-29T19:22:47.573
> 
> 标签：ssis

我有一个简单的 SSIS 包，它从 SQL 源获取数据并输出到 .dat 文件。现在在输出中有两个问题。

--> 我在列标题中得到空格

```
FirstName                             , LastName                ,...... 
```

--> 我的数据是一样的

```
Mike                 , Jung            ,...... 
```

我通过使用修剪功能解决了第二个问题。

有没有办法修复列标题，使它们没有任何空间？喜欢

```
Firstname,LastName,..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:47:24.983

如果允许使用 INFORMATION_SCHEMA.COLUMNS 表来修剪 Source 表中的列名，则可以继续执行数据流任务。但是，这也会改变（修剪）源表中的列名。

# php - 如何更改功能以接受不同类型的文件？

> ID：12185086
> 
> 赞同：-1
> 
> 时间：2012-08-29T19:22:51.777
> 
> 标签：php

我有这段代码可以帮助我创建 JPEG 图像，现在，我需要创建的是图像、PNG JPG 或任何它！

我做了一些修改，这是最后的结果：

```
function tamano_nuevo_foto($im_or, $ancho_nv, $dir_nv) {
    $ext   = pathinfo($im_or, PATHINFO_EXTENSION);
    $datos = getimagesize($im_or);

    $ancho = $datos[0];

    $alto = $datos[1];

    if ($ancho > $ancho_nv) { //Si la imagen no lelga al máximo no la tocamos.
        $prop    = $alto / $ancho;
        $alto_nv = round($ancho_nv * $prop); //Sacamos la nueva altura
    } else {

        $ancho_nv = $ancho;

        $alto_nv = $alto;
    }

    $im_nv = imagecreatetruecolor($ancho_nv, $alto_nv);

    imagecopyresampled($im_nv, $img, 0, 0, 0, 0, $ancho_nv, $alto_nv, $ancho, $alto);
    switch ($ext) {
        case 'jpg':
            $img = imagecreatefromjpeg($im_or);
            break;
        case 'jpeg':
            $img = imagecreatefromjpeg($im_or);
            break;
        case 'png':
            $img = imagecreatefrompng($im_or);
            break;
        case 'gif':
            $img = imagecreatefromgif($im_or);
            break;
        default:
            $img = imagecreatefromjpeg($im_or);
    }
    imagedestroy($im_nv);
} 
```

虽然原始代码是：

```
function tamano_nuevo_foto($im_or, $ancho_nv, $dir_nv) {
    $img   = imagecreatefromstring($im_or);
    $datos = getimagesize($im_or);
    $ancho = $datos[0];
    $alto  = $datos[1];
    if ($ancho > $ancho_nv) { //Si la imagen no lelga al máximo no la tocamos.
        $prop    = $alto / $ancho; /* Calculo la proporcion entre la or y la nv (lo miltiplicamos por mil para evitar problemas con decimales */
        $alto_nv = round($ancho_nv * $prop); //Sacamos la nueva altura
    } else {
        $ancho_nv = $ancho;
        $alto_nv  = $alto;
    }
    $im_nv    = imagecreatetruecolor($ancho_nv, $alto_nv);
    imagecopyresampled($im_nv, $img, 0, 0, 0, 0, $ancho_nv, $alto_nv, $ancho, $alto);
    imagejpeg($im_nv, $dir_nv);
    imagedestroy($im_nv);
} 
```

该函数创建如下：

```
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';
$targetPath =  str_replace('//','/',$targetPath);
$targetFile =  $targetPath . $_FILES['Filedata']['name'];
tamano_nuevo_foto($tempFile, 800, $targetFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:35:29.633

在我看来，`$img`您在创建图像资源之前正在使用该变量：

```
 imagecopyresampled($im_nv, $img, 0, 0, 0, 0, $ancho_nv, $alto_nv, $ancho, $alto);
    //^^ using $img 
    switch ($ext)
    {//creating img here...
        case 'jpg':
            $img = imagecreatefromjpeg($im_or);
            break;
        case 'jpeg':
            $img = imagecreatefromjpeg($im_or);
            break;
        case 'png':
            $img = imagecreatefrompng($im_or);
            break;
        case 'gif':
            $img = imagecreatefromgif($im_or);
            break;
        default:
            $img = imagecreatefromjpeg($im_or);
    } 
```

只需`imagecopyresampled`向下移动，就在开关之后。顺便说一句，那个开关可以写得不那么笨重：

```
 switch ($ext)
    {//creating img here...
        case 'png':
            $img = imagecreatefrompng($im_or);
            break;
        case 'gif':
            $img = imagecreatefromgif($im_or);
            break;
        default://no cases for jpg or jpeg means default, which creates from jpeg
            $img = imagecreatefromjpeg($im_or);
    }
    imagecopyresampled($im_nv, $img, 0, 0, 0, 0, $ancho_nv, $alto_nv, $ancho, $alto); 
```

如果您出于某种原因想要保留这些`jpeg`情况，则无需编写两次相同的代码，这要归功于失败：

```
 switch ($ext)
    {//creating img here...
        case 'jpeg':
            //you can even add some code specifically for the jpeg
            // extention, that will not be executed if the extention is jpg
            //if you omit the break at the end, the next case will be executed, too 
        case 'jpg':
            $img = imagecreatefromjpeg($im_or);
        break;
        case 'png':
            $img = imagecreatefrompng($im_or);
            break;
        case 'gif':
            $img = imagecreatefromgif($im_or);
            break;
        default://no cases for jpg or jpeg means default, which creates from jpeg
            $img = imagecreatefromjpeg($im_or);
    }
    imagecopyresampled($im_nv, $img, 0, 0, 0, 0, $ancho_nv, $alto_nv, $ancho, $alto); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:37:25.510

你的意思是你想要这样：

```
function tamano_nuevo_foto($im_or, $width_nv, $dir_nv) {
    list($width, $height, $type, $attr) = getimagesize($im_or);

    $x_ratio = $width_nv / $width; 
    if($width <= $width_nv) { 
        $width_nv = $width; 
        $height_nv = $height; 
    } else { 

        $height_nv = ceil($height * $x_ratio);
    } 

    $im_nv = imagecreatetruecolor($width_nv, $height_nv);
    switch ($type) {
        case '3':
            imagealphablending($im_nv, false);
            imagesavealpha($im_nv, true); 

            $im_or = imagecreatefrompng($im_or);
            imagealphablending($im_or, true);

            header("Content-Type: image/png");
            imagecopyresampled($im_nv, $im_or, 0, 0, 0, 0, $width_nv, $height_nv, $width, $height);
            imagepng($im_nv, $dir_nv);
            break;
        case '1':
            $im_or = imagecreatefromgif($im_or);
            header("Content-Type: image/gif");
            imagecopyresampled($im_nv, $im_or, 0, 0, 0, 0, $width_nv, $height_nv, $width, $height);
            imagegif($im_nv, $dir_nv);
            break;
        default:
            $im_or = imagecreatefromjpeg($im_or);
            header("Content-Type: image/jpeg");
            imagecopyresampled($im_nv, $im_or, 0, 0, 0, 0, $width_nv, $height_nv, $width, $height);
            imagejpeg($im_nv, $dir_nv, 100);
    }

    imagedestroy($im_nv);
} 
```

# html - 如何将两个并排放置的div居中

> ID：12185087
> 
> 赞同：0
> 
> 时间：2012-08-29T19:22:57.580
> 
> 标签：html, css

我有这种情况[http://jsfiddle.net/QrMn8/3/embedded/result/](http://jsfiddle.net/QrMn8/3/embedded/result/)。两个 div 并排放置，由一个更大的 div 包裹。我想要的是将两个 div 中的表格居中。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:25:02.430

您应该使用容器 div。并`margin:0 auto;`用于该容器 div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:45:16.463

您的表格本质上是容器宽度的 100%。所以我设置了宽度：291px；到桌子和繁荣没有问题。 [http://jsfiddle.net/QrMn8/6/embedded/result/](http://jsfiddle.net/QrMn8/6/embedded/result/)

# c# - Winforms 使用状态栏自动调整表单大小

> ID：12185089
> 
> 赞同：2
> 
> 时间：2012-08-29T19:23:37.703
> 
> 标签：c#, winforms, c#-4.0

我正在创建一个将 autosize 设置为 true 且 AutoSizeMode = GrowAndShrink 的 windows 窗体。

我在表单上粘贴了一个简单的控件并运行了程序。窗体正确调整大小以仅显示一个控件。

然后我在表单的底部添加了一个条（我从 DevExpress Bar 开始，但为了只使用本机控件，我在下面贴了一个 statusStrip）。

当我这次运行应用程序时，自动调整大小的表单与没有状态栏的表单大小完全相同，并且我添加的控件与状态栏重叠（我可以看到状态栏实际上仍然存在）。

为什么会这样？这是故意的吗？我希望表单缩小会尊重表单底部的状态栏不应该重叠的事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:28:00.870

当控件停靠时，AutoSize 不能很好地工作，等等。关闭 StatusStrip 上的 DockStyle 以查看自动调整大小的工作。

请参阅 Jared Par 的[AutoSize 和 DockStyle.Fill 不要混合](http://blogs.msdn.com/b/jaredpar/archive/2007/11/21/autosize-and-dockstyle-fill-don-t-mix.aspx)博客。

> AutoSize 和 DockStyle.Fill 不能很好地混合在一起。这两个属性都存在用于描述相对于控件其余部分的大小关系，但它们以相互冲突的方式这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:28:02.360

我假设 statusStrip 设置为停靠。因此，控件只会根据表单大小停靠自身，而不是相反。

# .net - EF Linq 父子节点和返回父节点

> ID：12185091
> 
> 赞同：1
> 
> 时间：2012-08-29T19:23:40.817
> 
> 标签：.net, linq, entity-framework, frameworks, entity

我是 EF 和 Linq 的新手。

我有 2 个表，一个“新闻”表和一个“相关新闻”表。每个新闻项目都应该显示几个相关新闻项目。

“新闻”包含新闻故事的唯一 ID 和详细信息。

“相关新闻”的每一行都有一个对“新闻”表中父 ID 的引用和对相关新闻故事的一个 ID 的引用，该 ID 又对应于“新闻”表中的一个 ID

我正在尝试创建一个给定新闻 ID 的 linq 查询，它将显示相关新闻故事的列表，详细信息取自“新闻”表。

我管理过的最好的是以下，但这只是根据父键而不是相关的新闻项键从新闻表中获取故事。

```
 var query = from n in context.NewsPosts
                    from nr in n.RelatedNewsPosts
                    where nr.NewsId == NewsId 
                    select n; 
```

我感觉正确的查询可能不太复杂，但我想不通！

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:30:10.273

您已切换 NewsPosts 和 RelatedNewsPosts 表。给定一个新闻 id，查看该 id 的所有 RelatedNewsPosts，然后加入它所指的 NewsPosts。

未经测试，但我认为这是你正在寻找的想法（不确切知道它是如何设置的，但至少你明白了主要想法）：

```
var givenNewsId = ...;

var query = from nr in context.RelatedNewsPosts
            join n in context.NewsPosts on nr.RelatedNewsId equals n.NewsId
            where nr.NewsId = givenNewsId
            select n; 
```

# c++ - 隐式构造函数可用于从 Base 派生的所有类型（当前类型除外）？

> ID：12185094
> 
> 赞同：4
> 
> 时间：2012-08-29T19:23:45.590
> 
> 标签：c++, c++11, implicit-conversion, enable-if, explicit-constructor

以下代码总结了我的问题：

```
template<class Parameter>
class Base {};

template<class Parameter1, class Parameter2, class Parameter>
class Derived1 : public Base<Parameter>
{ };

template<class Parameter1, class Parameter2, class Parameter>
class Derived2 : public Base<Parameter>
{
public :
    // Copy constructor
    Derived2(const Derived2& x);

    // An EXPLICIT constructor that does a special conversion for a Derived2
    // with other template parameters
    template<class OtherParameter1, class OtherParameter2, class OtherParameter>
    explicit Derived2(
        const Derived2<OtherParameter1, OtherParameter2, OtherParameter>& x
    );

    // Now the problem : I want an IMPLICIT constructor that will work for every
    // type derived from Base EXCEPT
    // Derived2<OtherParameter1, OtherParameter2, OtherParameter> 
    template<class Type, class = typename std::enable_if</* SOMETHING */>::type>
    Derived2(const Type& x);
}; 
```

考虑到我已经有示例代码中的显式构造函数，如何将隐式构造函数限制为从父类派生的所有类（当前类除外），无论其模板参数如何？

编辑：对于来自 Base 的隐式构造函数，我显然可以写：

```
template<class OtherParameter> Derived2(const Base<OtherParameter>& x); 
```

但是在那种情况下，我是否可以保证编译器不会将此构造函数用作隐式构造函数`Derived2<OtherParameter1, OtherParameter2, OtherParameter>`？

EDIT2：在这里我有一个测试：（LWS在这里： http: [//liveworkspace.org/code/cd423fb44fb4c97bc3b843732d837abc](http://liveworkspace.org/code/cd423fb44fb4c97bc3b843732d837abc)）

```
#include <iostream>
template<typename Type> class Base {};
template<typename Type> class Other : public Base<Type> {};
template<typename Type> class Derived : public Base<Type>
{
    public:
        Derived() {std::cout<<"empty"<<std::endl;}
        Derived(const Derived<Type>& x) {std::cout<<"copy"<<std::endl;}
        template<typename OtherType> explicit Derived(const Derived<OtherType>& x) {std::cout<<"explicit"<<std::endl;}
        template<typename OtherType> Derived(const Base<OtherType>& x) {std::cout<<"implicit"<<std::endl;}
};
int main()
{
    Other<int> other0;
    Other<double> other1;
    std::cout<<"1 = ";
    Derived<int> dint1;                     // <- empty
    std::cout<<"2 = ";
    Derived<int> dint2;                     // <- empty
    std::cout<<"3 = ";
    Derived<double> ddouble;                // <- empty
    std::cout<<"4 = ";
    Derived<double> ddouble1(ddouble);      // <- copy
    std::cout<<"5 = ";
    Derived<double> ddouble2(dint1);        // <- explicit
    std::cout<<"6 = ";
    ddouble = other0;                       // <- implicit
    std::cout<<"7 = ";
    ddouble = other1;                       // <- implicit
    std::cout<<"8 = ";
    ddouble = ddouble2;                     // <- nothing (normal : default assignment)
    std::cout<<"\n9 = ";
    ddouble = Derived<double>(dint1);       // <- explicit
    std::cout<<"10 = ";
    ddouble = dint2;                        // <- implicit : WHY ?!?!
    return 0;
} 
```

最后一行让我担心。C++标准可以吗？它是 g++ 的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:55:23.693

由于您引用的每个构造函数都是模板化的类方法，因此会调用模板实例化和函数重载决议的规则。

如果您查看 C++11 标准的第 14.8.3 节，第 1-3 段中实际上有一些示例在一定程度上证明了您的问题。基本上，C++ 编译器将在一系列重载模板函数中寻找最佳匹配或“最不通用”的模板函数实例化（必要时添加类型转换）。在您的情况下，因为您已经显式创建了一个接受对象的备用实例化的构造函数，所以与接受泛型类型甚至参数的构造函数相比`Derived2`，该构造函数将是任何类型的首选重载。`Derived2<...>``T``Base<OtherParameter>`

**更新**：显然，根据 C++11 标准中的 12.3.1/2，

> 显式构造函数像非显式构造函数一样构造对象，但仅在显式使用直接初始化语法 (8.5) 或强制转换 (5.2.9, 5.4) 的情况下这样做。

其含义是，如果您不使用直接初始化语法来构造对象或选择强制转换，那么您将不能使用任何标记为 的构造函数`explicit`。这解释了您在测试 #9 和 #10 之间看到的令人费解的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:52:48.083

您可以编写一个 trait 来报告一个类型是否是 的特化`Derived2<>`：

```
template<typename T>
struct is_derived2 : std::false_type { };

template<class P1, class P2, class P>
struct is_derived2<Derived2<P1, P2, P>> : std::true_type { }; 
```

还有一个函数存根来提取`P`in `Base<P>`：

```
template<typename Parameter>
Parameter base_parameter(Base<Parameter> const&); 
```

然后将隐式构造函数更改为：

```
template<
    class T,
    class = typename std::enable_if<
        !is_derived2<T>::value
        && std::is_base_of<
            Base<decltype(base_parameter(std::declval<T>()))>,
            T
        >::value
    >::type
>
Derived2(const T& x); 
```

在线演示： http: [//liveworkspace.org/code/c43d656d60f85b8b9d55d8e3c4812e2b](http://liveworkspace.org/code/c43d656d60f85b8b9d55d8e3c4812e2b)

* * *

更新：这是一个在线演示，将这些更改合并到您的“编辑 2”链接中：http:
[//liveworkspace.org/code/3decc7e0658cfd182e2f56f7b6cafe61](http://liveworkspace.org/code/3decc7e0658cfd182e2f56f7b6cafe61)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:30:25.097

好的，也许我找到了一个仅暗示添加“假”构造函数的解决方法：

```
#include <iostream>
#include <type_traits>
template<typename Type> class Base {};
template<typename Type> class Other : public Base<Type> {};
template<typename Type> class Derived : public Base<Type>
{
    public:
        Derived() {std::cout<<"empty"<<std::endl;}
        Derived(const Derived<Type>& x) {std::cout<<"copy"<<std::endl;}
        template<typename OtherType> explicit Derived(const Derived<OtherType>& x) {std::cout<<"explicit"<<std::endl;}
        template<typename Something> Derived(const Something& x) {std::cout<<"implicit"<<std::endl;}

    // Workaround
    public:
        template<template<typename> class Something, typename OtherType,
        class = typename std::enable_if< std::is_same< Something<OtherType>, Derived<OtherType> >::value>::type >
        Derived(const Something<OtherType>& x)
        {std::cout<<"workaround (for example always false static assert here)"<<std::endl;}
};
template<unsigned int Size> class Test {};

int main()
{
    Other<int> other0;
    Other<double> other1;
    Test<3> test;
    std::cout<<"1 = ";
    Derived<int> dint1;                     // <- empty
    std::cout<<"2 = ";
    Derived<int> dint2;                     // <- empty
    std::cout<<"3 = ";
    Derived<double> ddouble;                // <- empty
    std::cout<<"4 = ";
    Derived<double> ddouble1(ddouble);      // <- copy
    std::cout<<"5 = ";
    Derived<double> ddouble2(dint1);        // <- explicit
    std::cout<<"6 = ";
    ddouble = other0;                       // <- implicit
    std::cout<<"7 = ";
    ddouble = other1;                       // <- implicit
    std::cout<<"8 = ";
    ddouble = ddouble2;                     // <- nothing (normal : default assignment)
    std::cout<<"\n9 = ";
    ddouble = Derived<double>(dint1);       // <- explicit
    std::cout<<"10 = ";
    ddouble = dint2;                        // <- workaround
    std::cout<<"11 = ";
    ddouble = test;                         // <- implicit
    return 0;
} 
```

@Everybody：您认为这是解决该问题的好方法吗？

LWS： http: [//liveworkspace.org/code/f581356a7472c902b10ca486d648fafc](http://liveworkspace.org/code/f581356a7472c902b10ca486d648fafc)

# prolog - 不终止的列表搜索

> ID：12185095
> 
> 赞同：2
> 
> 时间：2012-08-29T19:23:48.453
> 
> 标签：prolog

这次我真的无法理解错误：我编写了这段代码来获取某个位置的列表元素：

```
take_pos([], _, _) :- fail;
take_pos([H|T], 1, H).
take_pos([H|T], Pos, X) :- Pos2 is Pos - 1, take_pos(T, Pos2, X). 
```

它永远不会终止；跟踪它我可以看到它永远不会匹配第二个语句。另外，如果我查询`take_pos([1,2,3], 1, 1).`它与最后一个匹配。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:27:39.247

我认为问题在于您在 . 之后放置了分号而不是点`fail`。

还要考虑重写第二条规则以避免引入单例：

```
take_pos([], _, _) :- fail.
take_pos([H|_], 1, H).
take_pos([H|T], Pos, X) :- Pos2 is Pos - 1, take_pos(T, Pos2, X). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:32:23.000

你的问题是第一个子句有一个`;`where 我认为你的意思`.`。无论如何，如果更正了第一个子句，则它什么也不做，因此应该完全删除它：

```
take_pos([H|T], 1, H).
take_pos([H|T], Pos, X) :- Pos2 is Pos - 1, take_pos(T, Pos2, X). 
```

# c++ - OpenGL 程序无法在 Qt Creator 中启动

> ID：12185098
> 
> 赞同：0
> 
> 时间：2012-08-29T19:23:57.813
> 
> 标签：c++, opengl, qt-creator

我在 linux mint 上使用 Qt Creator，我尝试运行一个 opengl 程序。该建筑没有给出任何错误，但是当我尝试在 Qt Creator 中运行该程序时，会出现一个终端窗口，并且没有其他任何事情发生。当我直接在终端中运行程序时，我得到以下输出：

```
OpenGL version supported by this platform (3.3.0 NVIDIA 295.40): 
OpenGL 3.3.0 NVIDIA 295.40, GLSL 3.30 NVIDIA via Cg compiler
Ready for OpenGL 2.0
Segmentation fault (core dumped) 
```

我的代码：

```
#include <stdio.h>
#include <GL/glew.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <GL/glext.h>

int main(int argc, char **argv) {

    glutInit(&argc, argv);
    glutInitWindowSize(600, 600);
    glutInitWindowPosition(100, 100);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
    glutCreateWindow("Aquarium");
    glutDisplayFunc(onDisplay);
    glutMouseFunc(onMouse);
    glutIdleFunc(onIdle);
    glutKeyboardFunc(onKeyboard);
    glutReshapeFunc(onReshape);

    printf("OpenGL version supported by this platform (%s): \n", glGetString(GL_VERSION));

    printf("OpenGL %s, GLSL %s\n",glGetString(GL_VERSION),glGetString(GL_SHADING_LANGUAGE_VERSION));

    glewInit();

    if (glewIsSupported("GL_VERSION_2_0"))
        printf("Ready for OpenGL 2.0\n");
    else {
        printf("OpenGL 2.0 not supported\n");
        exit(1);
    }

    onInitialization();

    glutMainLoop();

    return 0;
} 
```

我已经定义了事件处理程序，并且我也有 onInitialization() 方法。如果我尝试在 onInitialization() 方法的开头 printf 一些东西，那么除了我之前写的行之外，程序不会写任何其他东西。所以我认为它不会进入 onInitialization() 。我什至不能在 Qt Creator 中调试这个程序。什么会导致这种情况？什么会导致我无法在 Qt Creator 中启动程序？我有一个 .pro 文件：

```
QT       -= gui core

TARGET = main
CONFIG   += console

TEMPLATE = app

LIBS += /usr/lib/libglut.so /usr/lib/compiz/libopengl.so /usr/lib/i386-linux-gnu/libGLU.so /usr/lib/i386-linux-gnu/libGLEW.so

QMAKE_CXXFLAGS += -W -Wall -Wextra -pedantic

SOURCES += main.cpp 
```

使用相同的设置，我已经能够在 Windows 下运行程序（当然那里的 LIBS 是不同的）。

onInitialization()：

```
void onInitialization( ) {

    printf("onInitialization");

   soft.controlpoints.push_back(Point(5., 5., 5.));
   soft.speeds.push_back(Point(0., 0., 0.));
   soft.controlpoints.push_back(Point(5, -5., 5.));
   soft.speeds.push_back(Point(0., 0., 0.));
   soft.controlpoints.push_back(Point(5., -5., -5.));
   soft.speeds.push_back(Point(0., 0., 0.));

   soft2.controlpoints.push_back(Point(5., 5., 5.));
   soft2.speeds.push_back(Point(0., 0., 0.));
   soft2.controlpoints.push_back(Point(5, -5., 5.));
   soft2.speeds.push_back(Point(0., 0., 0.));
   soft2.controlpoints.push_back(Point(5., -5., -5.));
   soft2.speeds.push_back(Point(0., 0., 0.));
   soft2.controlpoints.push_back(Point(-5., 5., -5.));
   soft2.speeds.push_back(Point(0., 0., 0.));

   soft.set_r();
   soft2.set_r();

   aquarium.objects.push_back(&water);
   aquarium.objects.push_back(&fish);
   aquarium.objects.push_back(&field);
   aquarium.objects.push_back(&soft2);

   aquarium.createMaterials();

   aquarium.createVoxelArray();

   glEnable(GL_DEPTH_TEST);
   lastMovingTime = 0.;

   setShadowMapShaders();
   setAquariumShaders(); 
```

}

它甚至不打印“onInitialization”字符串。方法中的对象是全局变量，这里调用的所有方法都实现了。什么会导致它不打印“onInitialization”字符串？soft.controlpoints、soft.speeds 和 aquarium.object 是公共字段。即使我评论其他所有内容，字符串也不会出现，但会创建窗口。而且它仍然没有从 Qt Creator 内部运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:35:44.043

事实证明，问题出在文件读取器方法（读取 GLSL 着色器代码）上，这是因为 Qt Creator 的工作目录未设置在包含着色器源文件的目录上。

# xamarin.ios - 使用 MonoTouch 共享项目

> ID：12185099
> 
> 赞同：2
> 
> 时间：2012-08-29T19:24:00.717
> 
> 标签：xamarin.ios, monodevelop

我有一个类库项目（在 VS 中开发），我想与我正在处理的 MonoTouch 项目共享它。问题是，当我尝试在 MonoDevelop 中添加对库项目的引用时，会显示错误消息“不兼容的目标框架：v.NETFramework,Version=v3.5)”。

根据我在网上阅读的内容，我必须在 MonoDevelop 中创建另一个类库项目，然后将原始项目文件中的所有项目文件链接到其中...如果必须，我会这样做，*但*我宁愿有一个更清洁的解决方案，如果不是一个简单的项目文件修复，那么也许我可以运行一个脚本......

问候李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:28:33.123

您必须在 MonoDevelop 中创建一个类库项目。该库必须使用框架的 MonoTouch 版本进行编译。

这样做的原因是 MonoTouch 框架是基于 .NET 框架的 Silverlight 轻量级版本。

请参阅此处[http://docs.xamarin.com/ios/about/assemblies](http://docs.xamarin.com/ios/about/assemblies)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:36:27.883

可[移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)将是可行的方法，但遗憾的是，当前版本的 MonoDevelop[还没有正确支持MonoTouch。](https://stackoverflow.com/a/12062589/70182)不过，工作似乎正在进行中。

# javascript - 似乎无法将 val 存储到 var 中以便稍后回调

> ID：12185100
> 
> 赞同：1
> 
> 时间：2012-08-29T19:24:14.233
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-framework

我需要你的帮助，

如何修改下面的代码，以便在选择日期时将所选日期存储到 (var z) 中，然后可以稍后回调其值。我似乎无法弄清楚这一点，它应该很简单，而且是肉眼可见的。我究竟做错了什么？

```
<html>

<head>

<!-- LOAD JQUERY LIBRARY: -->  
    <link   href="jq/jquery-ui.css"         type="text/css" rel="stylesheet" />
    <script src="jq/jquery.min.js"          type="text/javascript"> </script>
    <script src="jq/jquery-ui.min.js"       type="text/javascript"> </script>

<script type="text/javascript">
var z

window.onload = function() {

                $('#dd').dialog({ 
                                    autoOpen:   true,
                                    modal:      true,
                                    overlay:    { opacity: 0.5, background: 'black'},
                                    title:      'Select the date:',
                                    height:     215, 
                                    width:      234,
                                    draggable:  false, 
                                    resizable:  false

                });//end of dialog_atip

$('#d1').datepicker({
            onSelect:function(){
                    z = $(this).val()
                    alert(z)
                    $("#dd").dialog("close")
            }

});

}//end of window.onload

function callback() { alert(z) }

</script>

</head>

<body>
<div style="display:none" id="dd">
<div id="d1">
</div>

</div>
<p><input onlick="callback()" type="submit" value="Submit" name="B1"></p>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:49:18.193

您的代码中缺少太多分号。另外，尽管`window.onload` 将您的代码放入`$(document).ready(function() { });`.

我对您的代码进行了一些更改。它现在工作。

[**在这**](http://jsfiddle.net/EYxj9/1/)获得战利品。

我认为这正是您所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:50:37.580

似乎发生了一些事情。onclick 拼写错误，正如所指出的 - 缺少分号。这应该有效。

```
<script type="text/javascript">
var z;

$(document).ready(function() {
  $('#dd').dialog({ 
       autoOpen:   true,
       modal:      true,
       overlay:    { opacity: 0.5, background: 'black'},
       title:      'Select the date:',
       height:     215, 
       width:      234,
       draggable:  false, 
       resizable:  false

   });//end of dialog_atip

  $("#B1").click(function(){ 
        callback();
  });

  $('#d1').datepicker({
     onSelect:function(){
                    z = $(this).val();
                    alert(z);
                    $("#dd").dialog("close");
     }
  });

});//end of window.onload

function callback() { 
    alert(z);
}
</script> 
```

我还将输入按钮修改为：

```
<input type="button" value="Submit" name="B1" id="B1"> 
```

你也可以在这里玩小提琴：http: [//jsfiddle.net/jE8tL/](http://jsfiddle.net/jE8tL/)

# python - 用于传递文件路径、文件名或文件对象的 Python 约定

> ID：12185103
> 
> 赞同：2
> 
> 时间：2012-08-29T19:24:29.937
> 
> 标签：python

我经常看到接受各种输入的 Python 代码......

文件名

```
s = Something("/Users/me/my_file.txt") 
```

文件路径

```
s = Something("my_file.txt") 
```

或文件对象

```
f = open("my_file.txt", "r")
s = Something(f) 
```

这有约定吗？正如很多人提到的，这取决于是什么`something()`。什么情况下更适合文件名与文件对象？

我想知道[这个](https://stackoverflow.com/questions/10692663/how-to-accept-file-or-path-as-arguments-to-method-in-python)SO 帖子是否给出了最好的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:46:10.420

[`json`](http://docs.python.org/library/json.html)有两种加载数据的方法：`json.load`一种是类文件对象，另`json.loads`一种是字符串：

```
>>> json.load(open("my_file.json"))
[1, 2]
>>> json.loads("[1, 2]")
[1, 2] 
```

该[`pickle`](http://docs.python.org/library/pickle.html#usage)模块具有类似的接口（一个接受文件对象，第二个接受字符串）

本质上，您的 API 主要使用文件对象，并且您提供了一种方便的方法，该方法将提供的字符串包装在[`StringIO`object](http://docs.python.org/library/stringio.html)中。可能看起来像这样：

```
class Parser(object):
    def __init__(self, fh):
        # Can do things like:
        first_line = fh.readline()
        fh.seek(0)
        all_content = fh.read()

def parse(fh):
    return Parser(fh)

def parse_str(inputstring):
    fh = StringIO.StringIO(inputstring)
    return Parser(fh) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:27:01.583

这一切都取决于`Something()`. 我不知道这样说有一个严格的约定是否公平。鸭子类型的好处是你不需要知道函数参数的类型，只需要知道参数行为的某些方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T00:59:52.280

它认为没有任何适用的约定。这完全取决于您的程序想要实现的目标。

# jquery - 从 JavaScript 触发更改事件

> ID：12185105
> 
> 赞同：0
> 
> 时间：2012-08-29T19:24:54.910
> 
> 标签：jquery

我有：

```
<input name="X"> 
```

在 JavaScript 中：

```
$('input').on('change','[name=X]',function() {
        $('body').append('on change fired!');
    }
);
$('input[name=X]').change(function() {
    $('body').append('change fired!');
});
$(input[name='X']).val('test'); 
```

但我的问题是两个更改事件都没有被触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T19:28:42.633

您的选择器周围缺少引号，以及如何添加触发器？

```
$("input[name='X']").val("test").trigger("change"); 
```

[小提琴](http://jsfiddle.net/rNMvZ/)_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:26:54.643

确保您使用的是就绪块

[jsFiddle](http://jsfiddle.net/WVv6e/)

```
$(function(){
   $('input').on('change','[name=X]',function() {
        $('body').append('on change fired!');
   });
   $('input[name=X]').change(function() {
       $('body').append('change fired!');
   });
   $(input[name='X']).val('test'); 
}); 
```

​如果您试图以编程方式简单地触发：

```
$('input[name=X]').change(); // trigger change event 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:27:05.110

以编程方式更改输入元素的值不会触发任何事件。或者，您可以像下面这样调用`.change`，`.val`

```
$('input[name=X]').val('test').change(); 
```

**编辑：**还修复了输入选择器周围缺少的引号。

**演示：http:** [//jsfiddle.net/G6n4h/1/](http://jsfiddle.net/G6n4h/1/)

# python - exec() 方法中自定义命名空间的子类化 python 字典

> ID：12185110
> 
> 赞同：3
> 
> 时间：2012-08-29T19:25:26.920
> 
> 标签：python, dictionary, namespaces, exec, subclass

我正在尝试将字典子类化以在 exec 方法中使用。最终，我希望本地函数具有自定义名称范围行为。

在下面的代码中，函数`b()`实际上确实有正确的`globals()`字典可用，但是在解析`z`.

功能首先`b()`不搜索吗？`locals()``globals()`

非常令人费解。任何帮助表示赞赏。

```
t = '''
def b():
#   return (globals()['z']) #works
    return z #fails

b()
'''

class MyDict(dict):
    def __init__(self, g):
        dict.__init__(self)
        self.my_g = g

    def __getitem__(self, key):
        print("GET ", key)
        try:
            val = dict.__getitem__(self, key)
        except:
            print("GET exception1")
            val = self.my_g[key]
        return val

g = {'z':123}

md = MyDict(g)

#fails to find z
exec(t, md, md)

#works
#exec(t, g, g) 
```

# 输出

```
GET  b
Traceback (most recent call last):
  File "/project1/text12", line 31, in <module>
  File "<string>", line 6, in <module>
  File "<string>", line 4, in b
NameError: global name 'z' is not defined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T19:39:52.210

在 python 3.3 之前，您**不能**将自定义`dict`子类用于`globals`exec 语句的值。执行编译代码的底层 C 代码直接访问底层 C 结构，忽略您可能已经实现的任何自定义挂钩。

换句话说，当代码执行`LOAD_GLOBAL`操作时（就像`z`在你的函数中的情况一样`b`），C 字节码评估循环使用[C API](http://docs.python.org/py3k/c-api/dict.html)`globals`访问当前帧中的结构，绕过任何 python 覆盖。

这在[`exec()`功能文档](http://docs.python.org/py3k/library/functions.html#exec)中记录为：

> 如果只提供*全局变量*，它必须是一个字典，它将用于全局变量和局部变量。如果给出了*全局*变量和*局部*变量，则它们分别用于全局变量和局部变量。如果提供，*locals*可以是任何映射对象。

Python 3.3 中放宽了此限制，请参阅[issue 14385](http://bugs.python.org/issue14385)。文档尚未更新，但字节码评估循环已更新，可在回退到 C API 访问之前测试自定义映射。如果使用自定义映射，则使用该函数，该`PyObject_GetItem`函数将调用`__getitem__`自定义类。

# c# - 在 OnInit 中创建的列表不持久

> ID：12185111
> 
> 赞同：1
> 
> 时间：2012-08-29T19:25:35.453
> 
> 标签：c#, asp.net

我在维护字符串列表时遇到问题。该列表在 OnInit 中实例化并设置为`GridView`. （基本思想是用户在文本框中输入一些内容，然后它会出现在 中`GridView`，想多少次就多少次。）

它适用于第一个条目，无论用户输入什么都显示在 中`GridView`，尽可能漂亮。但是，在随后的条目中，任何先前输入的值都会消失 -`OnInit`再次执行，`List<string>`重新实例化，并且先前的值被覆盖。我尝试将`OnInit`逻辑移入`OnPreInit`，但列表中出现了空引用异常。

这是我正在尝试做的一个人为的例子：

我有一个`TextBox`，一个`Button`和一个`Gridview`：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Add"
     onclick="Button1_Click" />
<asp:GridView ID="GridView1" runat="server"
    AutoGenerateColumns="true"></asp:GridView> 
```

在后面的代码中：

```
protected override void OnInit(EventArgs e)
{
    List<string> gvValues = new List<string>();
    GridView1.DataSource = gvValues;
    GridView1.DataBind();
}

protected void Button1_Click(object sender, EventArgs e)
{
     gvValues.Add(TextBox1.Text);
     GridView1.DataBind();
} 
```

我过去创建过对象`OnInit`，并且它们的状态持续存在没有问题。显然我在这里遗漏了一些东西。有人请指出我的逻辑中的缺陷并提出实现此功能的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:29:28.273

您是否尝试将列表重新分配给 gridview 并将 gvValues 放入会话中：

```
protected override void OnInit(EventArgs e)
{
    GridView1.DataSource = GvValues;
    GridView1.DataBind();
}

protected void Button1_Click(object sender, EventArgs e)
{
     GvValues.Add(TextBox1.Text);
     GridView1.DataSource = GvValues;
     GridView1.DataBind();
}

private List<string> GvValues
{
  get
  {
    if(Session["list"] != null)
    {
      return (List<string>)Session["list"];
    }

     return new List<string>();
  }

  set
  {
    Session["list"] value;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:35:01.750

下面的代码已经过测试并且可以正常工作。

```
// ASPX Code
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
 <asp:Button ID="Button1" runat="server" Text="Add"
 onclick="Button1_Click" />
 <asp:GridView ID="GridView1" runat="server"
AutoGenerateColumns="true"></asp:GridView>

// Code Behind
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        List<string> gvValues = new List<string>();
        GridView1.DataSource = gvValues;
        GridView1.DataBind();
        Session["Data"] = gvValues;
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
    List<string> lt = new List<string>();
    lt = (List<String>)Session["Data"];
    lt.Add(TextBox1.Text);
    GridView1.DataSource = lt;
    GridView1.DataBind();
    Session["Data"] = lt; // Save it in Session, so next time available
}

// Add the values one by one, and it will show you all the values
// OUTPUT
  Test
  Test1
  Test2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:00:54.597

我做了一个对我来说很好的小例子

**默认.aspx**

```
<form id="form1" runat="server">
    <asp:GridView ID="gvEntries" runat="server" AutoGenerateColumns="true">
    </asp:GridView>
    <asp:TextBox ID="txtNewEntry" runat="server"></asp:TextBox>
    <asp:Button ID="btnSave" runat="server" Text="Save entry" OnClick="btnSave_Click" />
</form> 
```

**默认.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        List<string> source = new List<string>();
        source.Add("entry1");
        source.Add("entry2");
        source.Add("entry3");
        Session["source"] = source;
        gvEntries.DataSource = source;
        gvEntries.DataBind();
    }
}
protected void btnSave_Click(object sender, EventArgs e)
{
    List<string> source = (List<string>)Session["source"];
    source.Add(txtNewEntry.Text);
    gvEntries.DataSource = source;
    gvEntries.DataBind();
} 
```

此示例*在 pageLoad* (GET)上*绑定*您的初始数据。因此，您的数据源存储在 gridviews 视图状态中。如果您想添加另一个条目，您*必须访问您的原始源*- 它已***存储在 Session-var***中。所以获取它的引用，添加一个值，然后重新绑定你的数据源。

# ajax - 滚动到顶部不起作用

> ID：12185114
> 
> 赞同：0
> 
> 时间：2012-08-29T19:25:43.403
> 
> 标签：ajax, scroll, delegation

您好，我是 jQuery 新手，但遇到问题！我想滚动到顶部，在通过 AJAX 调用加载的页面中。

这有效（测试）：

```
$(document).on('click', '#top_icon', function() {
    alert('ok');
}); 
```

但这不起作用（这是我想要实现的）：

```
$(document).on('click', '#top_icon', function() {
    $('html, body').animate({scrollTop: '0px'}, 800);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:27:36.780

试试这个，

```
$(document).on('click', '#top_icon', function() {
    $('html, body').animate({'scrollTop': '0px'}, 800);
    return false;
}); 
```

`scrollTop`在`undefined`你的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:09:40.313

我不确定 jQuery，但 scrollTop 不是 CSS 属性，因此可能不是可以动画的属性的一部分。

但是您可以自己为此创建一个简单的动画：

```
var startValue = 0;
var endValue = 0;
var duration = 800;
var distance = 0;
var velocity = 0;
var step = 0;
var endTime = 0;

var animate = function() {

    var elapsedTime = new Date().getTime() - step;
    document.body.scrollTop += velocity * elapsedTime;
    step = new Date().getTime();

    if (step > endTime)
        document.body.scrollTop = endValue;
    else
        setTimeout(animate, 15);

}

    yourButton.onclick = function() {

        startValue = document.body.scrollTop;
        distance = endValue - startValue;
        velocity = distance / duration;
        step = new Date().getTime();
        endTime = step + duration;
        animate();   

    }; 
```

​ 这里有一个小提琴： http: [//jsfiddle.net/pXvQG/12/](http://jsfiddle.net/pXvQG/12/)，通过向下滚动并单击主体来制作动画。

# python - 如何整合两个 ModelForm 来呈现一个表单？

> ID：12185116
> 
> 赞同：0
> 
> 时间：2012-08-29T19:25:46.767
> 
> 标签：python, django, django-models, django-templates

我创建了两个类：Client（属性：姓名和性别）和 Account（属性：customer[fk]，付款状态）。我从模板中显示表格；当我点击“添加客户”链接时，它会打开创建表单，从models.py中的内容来看，换句话说只能创建一个客户到“姓名和性别”，而不是我可以在同一个表单中集成付款情况。

**模型.py**

```
from django.db import models

class Cliente(models.Model):
    SEXO = (
        ('M', 'Masculino'),
        ('F','Feminino'),
    )

    nome = models.CharField("Nome do cliente", max_length=255)
    sexo = models.CharField("Sexo", max_length=1, choices=SEXO)

    def __unicode__(self):
        return self.nome

    class Meta:
        verbose_name = 'Cliente'
        verbose_name_plural = 'Clientes'

class Conta(models.Model):
    STATUS_CONTA = (
            ('A', 'A Pagar'),
            ('P', 'Pago'),
        )

    cliente = models.ForeignKey(Cliente, related_name='conta')
    situacao = models.CharField("Situação", max_length=50, choices=STATUS_CONTA)

    class Meta:
        verbose_name = 'Conta'
        verbose_name_plural = 'Contas'

    def __unicode__(self):
        return self.cliente.nome 
```

**表格.py**

```
from django.forms.models import ModelForm
from cadastro.models import Cliente, Conta

__author__ = 'Admin'

class ClienteForm(ModelForm):
    class Meta:
        model = Cliente 
```

**索引.html**

```
<html>
<body>
<a href='/adicionar_cliente/'>Adicionar cliente</a>
    {% for cliente in clientes %}
        {% for conta in cliente.conta.all %}
            <p>Nome: {{cliente.nome}}</p>
            <p>Sexo: {{cliente.get_sexo_display}} </p>
            <p>Situação do pedido: {{conta.get_situacao_display}}</p>
        {% endfor %}
            <p><a href='/excluir/{{cliente.id}}/'>Excluir?</a></p>
            <p><a href='/editar/{{cliente.id}}/'>Editar</a></p>
            <hr>
    {% empty %}
            <h3>Não existe nenhum cliente.</h3>
    {% endfor %}
</body>
</html> 
```

**表单.html**

```
<html>
<body>
    <form action='/{{action}}/' method='post'>
        {% csrf_token %}
        <table>
            {{form}}
        </table>
        <input type='submit' value='Adicionar' />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:40:59.267

您可以创建两个表单来完成此任务。

## 表格.py

```
...
class ClienteForm(ModelForm):
    class Meta:
        model = Cliente
class ContaForm(ModelForm):
    class Meta:
        model = Conta
        exclude = ("cliente") #exclude the cliente field from showing up in the form rendering. 
```

## 表单.html

```
<html>
<body>
<form action='/{{ action }}/' method='post'>
    {% csrf_token %}
    <table>
        {{ form.as_table }} <!-- added as table which was missing from original post. -->
        {{ form2.as_table }}
    </table>
    <input type='submit' value='Adicionar' />
</form>
</body> 
```

## 视图.py

```
...
def form(request):
    if request.method == 'POST':
        form = ClienteForm(request.POST)
        form2 = ContaForm(request.POST)
        if form.is_valid() and form2.is_valid():
            client = form.save()
            conta = form2.save(commit=False)
            conta.cliente = client
            contra.save()
    else:
        form = ClienteForm()
        form2 = ContaForm()
       return render_to_response('form.html', locals(), context_instance = RequestContext(request)) 
```

# python - Python - Numpy 矩阵乘法

> ID：12185117
> 
> 赞同：1
> 
> 时间：2012-08-29T19:26:04.787
> 
> 标签：python, matrix, numpy, python-2.7, matrix-multiplication

我正在尝试优化（内存乘以 X 及其转置 X'

有谁知道 numpys 矩阵乘法是否考虑到 X' 只是 X 的转置。我的意思是，如果它检测到这一点，则不会创建对象 X'，而只是在 X 的列/行上工作以产生产品？感谢您对此的任何帮助！

J。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:34:43.913

在 numpy 约定中，转置由`X`表示`X.T`，你很幸运，`X.T`只是原始数组的一个视图`X`，这意味着没有完成复制。

# c# - 使用 c# 计算 HMACSHA256 以匹配支付提供商示例

> ID：12185122
> 
> 赞同：63
> 
> 时间：2012-08-29T19:26:49.823
> 
> 标签：c#, security, cryptography

对于支付提供商，我需要使用 HMAC-SHA256 计算基于哈希的消息验证码。这给我带来了很大的麻烦。

支付提供商以伪代码形式给出了两个正确计算的验证码示例。所有的键都是十六进制的。

### 方法一

```
key = 57617b5d2349434b34734345635073433835777e2d244c31715535255a366773755a4d70532a5879793238235f707c4f7865753f3f446e633a21575643303f66
message = "amount=100&currency=EUR"
MAC = HMAC-SHA256( hexDecode(key), message )
result = b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905 
```

### 方法二

```
message = "amount=100&currency=EUR"
Ki = 61574d6b157f757d02457573556645750e0341481b127a07476303136c005145436c7b46651c6e4f4f040e1569464a794e534309097258550c17616075060950
Ko = 0b3d27017f151f17682f1f193f0c2f1f64692b227178106d2d096979066a3b2f2906112c0f760425256e647f032c2013243929636318323f667d0b0a1f6c633a
MAC = SHA256( hexDecode(Ko) + SHA256( hexDecode(Ki) + message ) )
result = b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905 
```

在做了一些研究之后，我尝试编写代码来做到这一点，但我不断得出不同的结果。

```
private static void Main(string[] args)
    {
        var key = "57617b5d2349434b34734345635073433835777e2d244c31715535255a366773755a4d70532a5879793238235f707c4f7865753f3f446e633a21575643303f66";
        var ki = "61574d6b157f757d02457573556645750e0341481b127a07476303136c005145436c7b46651c6e4f4f040e1569464a794e534309097258550c17616075060950";
        var ko = "0b3d27017f151f17682f1f193f0c2f1f64692b227178106d2d096979066a3b2f2906112c0f760425256e647f032c2013243929636318323f667d0b0a1f6c633a";
        var mm = "amount=100&currency=EUR";

        var result1 = CalcHMACSHA256Hash(HexDecode(key), mm);

        var result2 = CalcSha256Hash(string.Format("{0}{1}", HexDecode(ko), CalcSha256Hash(HexDecode(ki) + mm)));

        Console.WriteLine("Expected: b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905");
        Console.WriteLine("Actual 1: " + result1);
        Console.WriteLine("Actual 2: " + result2);

        Console.WriteLine("------------------------------");
        Console.ReadKey();

    }

    private static string HexDecode(string hex)
    {
        var sb = new StringBuilder();
        for (int i = 0; i <= hex.Length - 2; i += 2)
        {
            sb.Append(Convert.ToString(Convert.ToChar(Int32.Parse(hex.Substring(i, 2), System.Globalization.NumberStyles.HexNumber))));
        }
        return sb.ToString();
    }

    private static string CalcHMACSHA256Hash(string plaintext, string salt)
    {
        string result = "";
        var enc = Encoding.Default;
        byte[]
        baText2BeHashed = enc.GetBytes(plaintext),
        baSalt = enc.GetBytes(salt);
        System.Security.Cryptography.HMACSHA256 hasher = new HMACSHA256(baSalt);
        byte[] baHashedText = hasher.ComputeHash(baText2BeHashed);
        result = string.Join("", baHashedText.ToList().Select(b => b.ToString("x2")).ToArray());
        return result;
    }

    public static string CalcSha256Hash(string input)
    {
        SHA256 sha256 = new SHA256Managed();
        byte[] sha256Bytes = Encoding.Default.GetBytes(input);
        byte[] cryString = sha256.ComputeHash(sha256Bytes);
        string sha256Str = string.Empty;
        for (int i = 0; i < cryString.Length; i++)
        {
            sha256Str += cryString[i].ToString("x2");
        }
        return sha256Str;
    } 
```

这是我得到的结果：

```
Expected: b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905
Actual 1: 421ce16f2036bb9f2a3770c16f01e9220f0232d45580584ca41768fd16c15fe6
Actual 2: 290f14398bf8c0959dfc963e2fd9c377534c6fec1983025d2ab192382f132b92 
```

因此，如果没有这两种方法，我可以获得提供者示例想要的结果。

**我在这里想念什么？是编码吗？我的 hexDecode 搞砸了吗？**

来自支付提供商的测试工具：http: [//tech.dibs.dk/dibs_api/other_features/hmac_tool/](http://tech.dibs.dk/dibs_api/other_features/hmac_tool/)

PHP 示例代码：[http ://tech.dibspayment.com/dibs_api/other_features/mac_calculation/](http://tech.dibspayment.com/dibs_api/other_features/mac_calculation/)

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-09-03T20:33:21.167

**编辑：**您可能正在寻找一种快速简单的方法来执行 HMAC-SHA256，而不是深入了解细节。原始问题询问那些更详细的细节，这些细节将在下面进一步解释。

### 我想对`byte[]`消息输入执行 HMAC-SHA256

```
using System.Security.Cryptography;
...
private static byte[] HashHMAC(byte[] key, byte[] message)
{
    var hash = new HMACSHA256(key);
    return hash.ComputeHash(message);
} 
```

### 我想执行 HMAC-SHA256 但我有一个十六进制字符串输入

在 .NET 5 及更高版本中，`System.Convert.FromHexString`像这样使用（感谢@proximab）。如果您使用的是 pre-.NET 5，请滚动到具有替代解决方案的“Helper functions”。

```
using System;
using System.Security.Cryptography;
...
private static byte[] HashHMACHex(string keyHex, string messageHex)
{
    var key = Convert.FromHexString(hexKey);
    var message = Convert.FromHexString(messageHex);
    var hash = new HMACSHA256(key);
    return hash.ComputeHash(message);
} 
```

### 我正在使用一种类似于 HMAC 的奇怪 API 服务，但它是自定义的

继续阅读。您可能希望使用下面的“方法 2”作为参考点并将其调整为您的服务希望您实施 HMAC 以进行消息防篡改。

* * *

### HMAC-SHA256 的工作原理（您是否需要知道如何...）

在这里，我们将手动计算 HMAC-SHA256（这回答了原始问题中的“方法 2”）。

假设`outerKey`、`innerKey`和`message`已经是字节数组，我们执行以下操作：

> **表示法：**假设`A + B`连接字节数组 A 和 B。您也可以看到`A || B`在更多学术环境中使用的表示法。

```
HMAC = SHA256( outerKey + SHA256( innerKey + message  )   )
              .          .       `------------------´ .  .
               \          \           `innerData`    /  /
                \          `------------------------´  /   
                 \               `innerHash`          /
                  `----------------------------------´
                               `data` 
```

所以代码可以分解成这些步骤（使用上面的作为指导）：

1.  `byte[] innerData`创建一个长度为的空缓冲区`innerKey.Length + message.Length`（再次假设字节数组）
2.  将`innerKey`和复制`message`到`byte[] innerData`
3.  计算 SHA256`innerData`并将其存储在`byte[] innerHash`
4.  创建一个空缓冲区`byte[] data`，长度为`outerKey.Length + innerHash.Length`
5.  复制`outerKey`and `innerHash`（从第 3 步开始）
6.  计算最终的哈希值`data`并将其存储`byte[] result`并返回。

要进行字节复制，我正在使用该[`Buffer.BlockCopy()`](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy%28v=vs.110%29.aspx)函数，因为它显然比其他一些方式（[源代码](https://stackoverflow.com/questions/895120/append-2-byte-arrays-in-c-sharp)）更快。

> nb 使用新的`ReadOnlySpan<T>`API 可能（阅读：当然）有更好的方法来做到这一点。

我们可以将这些步骤翻译成以下内容：

```
using System;
using System.Security.Cryptography;
...
private static byte[] HashSHA(byte[] innerKey, byte[] outerKey, byte[] message)
{
    var hash = new SHA256Managed();

    // Compute the hash for the inner data first
    byte[] innerData = new byte[innerKey.Length + message.Length];
    Buffer.BlockCopy(innerKey, 0, innerData, 0, innerKey.Length);
    Buffer.BlockCopy(message, 0, innerData, innerKey.Length, message.Length);
    byte[] innerHash = hash.ComputeHash(innerData);

    // Compute the entire hash
    byte[] data = new byte[outerKey.Length + innerHash.Length];
    Buffer.BlockCopy(outerKey, 0, data, 0, outerKey.Length);
    Buffer.BlockCopy(innerHash, 0, data, outerKey.Length, innerHash.Length);
    byte[] result = hash.ComputeHash(data);

    return result;
} 
```

### 辅助函数

##### `string`->`byte[]`

您有纯 ASCII 或 UTF8 文本，但需要它是`byte[]`.
使用[`ASCIIEncoding`](http://msdn.microsoft.com/en-us/library/system.text.asciiencoding%28v=vs.110%29.aspx)or[`UTF8Encoding`](http://msdn.microsoft.com/en-us/library/system.text.utf8encoding%28v=vs.110%29.aspx)或您正在使用的任何外来编码。

```
private static byte[] StringEncode(string text)
{
    var encoding = new System.Text.ASCIIEncoding();
    return encoding.GetBytes(text);
} 
```

##### `byte[]`-> 十六进制`string`

你有一个`byte[]`，但你需要它是一个 hex `string`。

```
private static string HashEncode(byte[] hash)
{
    return BitConverter.ToString(hash).Replace("-", "").ToLower();
} 
```

##### 十六进制`string`->`byte[]`

你有一个十六进制`string, but you need it to be a` 字节[]`。

*.NET 5 及更高版本*

```
private static byte[] HexDecode(string hex) =>
    System.Convert.FromHexString(hex); 
```

*在 .NET 5 之前*（感谢@bobince）

```
private static byte[] HexDecode(string hex)
{
    var bytes = new byte[hex.Length / 2];
    for (int i = 0; i < bytes.Length; i++)
    {
        bytes[i] = byte.Parse(hex.Substring(i * 2, 2), NumberStyles.HexNumber);
    }
    return bytes;
} 
```

> nb 如果您需要在 .NET Framework 4.x 上调整性能的版本，您也可以向后移植 .NET 5+ 版本（通过替换`ReadOnlySpan<byte>`为`byte[]`）。它使用正确的查找表并注意热代码路径。您可以参考[Github 上的 .NET 5（](https://github.com/dotnet/runtime/blob/7afb66262c287b7832b872473d1e668038aa2496/src/libraries/Common/src/System/HexConverter.cs#L235) [MIT 许可](https://github.com/dotnet/runtime/blob/main/LICENSE.TXT)）`System.Convert`代码。

* * *

为了完整起见，以下是使用“方法 1”和“方法 2”回答问题的最终方法

**“方法 1”（使用 .NET 库）**

```
private static string HashHMACHex(string keyHex, string message)
{
    byte[] hash = HashHMAC(HexDecode(keyHex), StringEncode(message));
    return HashEncode(hash);
} 
```

**“方法2”（手动计算）**

```
private static string HashSHAHex(string innerKeyHex, string outerKeyHex, string message)
{
    byte[] hash = HashSHA(HexDecode(innerKeyHex), HexDecode(outerKeyHex), StringEncode(message));
    return HashEncode(hash);
} 
```

* * *

我们可以使用控制台应用程序执行快速健全性检查：

```
static void Main(string[] args)
{
    string message = "amount=100&currency=EUR";
    string expectedHex = "b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905";
    Console.WriteLine("Expected: " + expectedHex);

    // Test out the HMAC hash method
    string key = "57617b5d2349434b34734345635073433835777e2d244c31715535255a366773755a4d70532a5879793238235f707c4f7865753f3f446e633a21575643303f66";
    string hashHMACHex = HashHMACHex(key, message);
    Console.WriteLine("Method 1: " + hashHMACHex);

    // Test out the SHA hash method
    string innerKey = "61574d6b157f757d02457573556645750e0341481b127a07476303136c005145436c7b46651c6e4f4f040e1569464a794e534309097258550c17616075060950";
    string outerKey = "0b3d27017f151f17682f1f193f0c2f1f64692b227178106d2d096979066a3b2f2906112c0f760425256e647f032c2013243929636318323f667d0b0a1f6c633a";
    string hashSHAHex = HashSHAHex(innerKey, outerKey, message);
    Console.WriteLine("Method 2: " + hashSHAHex);
} 
```

您应该正确排列所有哈希值：

```
Expected: b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905
Method 1: b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905
Method 2: b436e3e86cb3800b3864aeecc8d06c126f005e7645803461717a8e4b2de3a905 
```

这个答案的原始代码可以访问： http: [//pastebin.com/xAAuZrJX](http://pastebin.com/xAAuZrJX)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-11-11T01:43:16.847

这是一个字符串扩展方法，用于为给定字符串获取相当标准的 HMAC SHA 256 令牌：

**用法：**

```
myMessageString.HmacSha256Digest(mySecret) 
```

**字符串扩展方法：**

```
public static string HmacSha256Digest(this string message, string secret)
{
    ASCIIEncoding encoding = new ASCIIEncoding();
    byte[] keyBytes = encoding.GetBytes(secret);
    byte[] messageBytes = encoding.GetBytes(message);
    System.Security.Cryptography.HMACSHA256 cryptographer = new System.Security.Cryptography.HMACSHA256(keyBytes);

    byte[] bytes = cryptographer.ComputeHash(messageBytes);

    return BitConverter.ToString(bytes).Replace("-", "").ToLower();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-28T11:04:16.973

您可以将此方法用于 HMACSHA256。

```
string key = "your key";
string message = "your message";
System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
byte[] keyByte = encoding.GetBytes(key);

HMACSHA256 hmacsha256 = new HMACSHA256(keyByte);

byte[] messageBytes = encoding.GetBytes(message);
byte[] hashmessage = hmacsha256.ComputeHash(messageBytes);
return ByteToString(hashmessage); 
```

这是 ByteToString 方法：

```
public static string ByteToString(byte[] buff)
    {
        string sbinary = "";

        for (int i = 0; i < buff.Length; i++)
        {
            sbinary += buff[i].ToString("X2"); // hex format
        }
        return (sbinary);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T23:01:04.480

SHA 哈希是根据字节序列计算的。字节是与字符截然不同的数据类型。您不应该使用字符串来存储二进制数据，例如哈希。

> sb.Append(Convert.ToString(Convert.ToChar(Int32.Parse(hex.Substring(i, 2)...

这通过读取每个编码字节并转换为具有相同 Unicode 代码点编号的字符来创建一个字符串。这相当于使用 ISO-8859-1 (Latin1) 编码解码 0-255 字节，因为该编码具有匹配 Unicode 中前 256 个代码点的特性。

> var enc = 编码。默认值；[...] baSalt = enc.GetBytes(salt);
> 
> byte[] sha256Bytes = Encoding.Default.GetBytes(input);

它们都使用系统默认编码将字符转换回字节。此编码因安装而异，但绝不会是 ISO-8859-1 - 即使类似的西欧代码页 1252 在 0x80-0x9F 范围内也有不同的字符。

因此，您使用的字节数组不包含示例十六进制序列所暗示的字节。一个便宜的解决方法是使用`Encoding.GetEncoding("ISO-8859-1")`而不是默认编码，但实际上你应该首先使用字节数组而不是字符串来存储数据，例如：

```
byte[] key= new byte[] { 0x57, 0x61, 0x7b, 0x5d, 0x23, 0x49, ... }; 
```

并将其直接传递给`ComputeHash`.

如果您必须从十六进制字符串初始化数据，请将其直接解析为字节数组，例如：

```
private static byte[] HexDecode(string hex) {
    var bytes= new byte[hex.Length/2];
    for (int i= 0; i<bytes.Length; i++) {
        bytes[i]= byte.Parse(hex.Substring(i*2, 2), NumberStyles.HexNumber);
    }
    return bytes;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-15T07:39:41.687

我意识到这个问题已经得到解答，但我会发布这个以防其他人需要它。以下是支付提供商 (DIBS) 创建的代码片段：

```
 /**
    * calculateMac
    * Calculates the MAC key from a Dictionary<string, string> and a secret key
    * @param params_dict The Dictionary<string, string> object containing all keys and their values for MAC calculation
    * @param K_hexEnc String containing the hex encoded secret key from DIBS Admin
    * @return String containig the hex encoded MAC key calculated
    **/
    public static string calculateMac(Dictionary<string, string> paramsDict, string kHexEnc)
    {
        //Create the message for MAC calculation sorted by the key
        var keys = paramsDict.Keys.ToList();
        keys.Sort();
        var msg = "";
        foreach (var key in keys)
        {
            if (key != keys[0]) msg += "&";
            msg += key + "=" + paramsDict[key];
        }

        //Decoding the secret Hex encoded key and getting the bytes for MAC calculation
        var kBytes = new byte[kHexEnc.Length / 2];
        for (var i = 0; i < kBytes.Length; i++)
        {
            kBytes[i] = byte.Parse(kHexEnc.Substring(i * 2, 2), NumberStyles.HexNumber);
        }

        //Getting bytes from message
        var msgBytes = Encoding.Default.GetBytes(msg);

        //Calculate MAC key
        var hash = new HMACSHA256(kBytes);
        var macBytes = hash.ComputeHash(msgBytes);
        var mac = BitConverter.ToString(macBytes).Replace("-", "").ToLower();

        return mac;
    } 
```

[http://tech.dibspayment.com/DX/Hosted/HMAC](http://tech.dibspayment.com/DX/Hosted/HMAC)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-06T14:09:19.307

谢谢你节省了我的时间。

```
request.Method = "GET";
string signature = "";
string strtime = DateTime.UtcNow.ToString("yyyy-MM-ddTHH\\:mm\\:ssZ");

string secret = "xxxx";

string message = "sellerid:email:" + strtime; 

var encoding = new System.Text.ASCIIEncoding(); 

byte[] keyByte = encoding.GetBytes(secret);

byte[] messageBytes = encoding.GetBytes(message);
using (var hmacsha256 = new HMACSHA256(keyByte))
{
var hash = new HMACSHA256(keyByte);
byte[] signature1 = hash.ComputeHash(messageBytes);
signature = BitConverter.ToString(signature1).Replace("-", "").ToLower();
}

request.Headers.Add("authorization", "HMAC-SHA256" + " " + 
"emailaddress=xxx@xx.com,timestamp=" + strtime + ",signature=" + signature);
HttpWebResponse response = request.GetResponse() as HttpWebResponse; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-02-23T18:51:19.397

```
 private static string GenerateSignature(string data, string signatureKey)
    {
        var keyByte = Encoding.UTF8.GetBytes(signatureKey);
        using (var hmacsha256 = new HMACSHA256(keyByte))
        {
            hmacsha256.ComputeHash(Encoding.UTF8.GetBytes(data));
            return hmacsha256.Hash.Aggregate("", (current, t) => current + t.ToString("X2")).ToLower();
        }
    } 
```

# c# - TreeNode 点击 vs TreeView 点击

> ID：12185132
> 
> 赞同：2
> 
> 时间：2012-08-29T19:27:36.410
> 
> 标签：c#, winforms, treeview, nodes, contextmenustrip

我有一个 TreeView，我需要两件事。

*   如果我单击特定节点，则支持右键单击。
*   如果我单击树上的任何其他位置（没有节点），则支持右键单击。

这两个选项都会给我一个不同的`ContextMenuStrip`.
我的两个程序现在支持这两种类型的点击。

具体节点点击：

```
var someNode = e.Node.Tag as SomeNode;
if (someNode != null)
{
   someContextMenu.Show(someTree, e.Location);
   return;
} 
```

在树上的任何地方单击：

![在此处输入图像描述](../Images/642b610f5cfd07fb998504ed187ab231.png)

问题是在`Anywhere on the tree click`检查**我是单击节点**还是单击`TreeView`.
知道如何改变这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:30:26.703

假设您正在询问winforms。

您可以使用返回 TreeViewHitTestInfo 的 TreeView.HitTest 方法，[您](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeviewhittestinfo.aspx)[可以](http://msdn.microsoft.com/en-us/library/z6sb88bz.aspx)在其中知道是否点击了节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:18:51.503

```
private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
    {
        TreeViewHitTestInfo info = treeView1.HitTest(e.Location);
        treeView1.SelectedNode = info.Node;

        if (info.Node == null)
        {
            contextMenuStrip1.Show(Cursor.Position);
        }
        else
        {
            contextMenuStrip2.Show(Cursor.Position);
        }
    }
} 
```

或者根据您的需要鼠标向上事件。您也可以使用 GetNodeAt(e.Location) 代替 TreeViewHitTestInfo 类。

# c# - 修改 SQL Server Compact Edition 的默认连接字符串

> ID：12185138
> 
> 赞同：2
> 
> 时间：2012-08-29T19:27:49.337
> 
> 标签：c#, sql-server-ce, openfiledialog

当我将数据库添加到程序中时，Visual Studio 会自动创建以下连接字符串：

```
 <connectionStrings>
    <add name="TeamSortingTool.Properties.Settings.PlayerTeamConnectionString" connectionString="Data Source=|DataDirectory|\PlayerTeam.sdf" providerName="Microsoft.SqlServerCe.Client.3.5" />
    <add name="PlayerTeamEntities" connectionString="metadata=res://*/edmPlayerTeam.csdl|res://*/edmPlayerTeam.ssdl|res://*/edmPlayerTeam.msl;provider=System.Data.SqlServerCe.3.5;provider connection string=&quot;Data Source=|DataDirectory|\PlayerTeam.sdf&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

我试图让用户选择他们想要打开的数据库。如何以编程方式修改连接字符串而不丢失关联的数据集和 tableadapter？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:20:10.003

您可以使用该方法从 App.Config 文件中调用连接字符串以用于数据连接或适配器

```
 public string GetConnectionStringByName()
        {
            string returnValue = null;
            ConnectionStringSettings settings = ConfigurationManager.ConnectionStrings["Connection Name Here"];
            if (settings != null)
                returnValue = settings.ConnectionString;
            return returnValue;
        } 
```

当您将新数据库添加到项目时，默认情况下它采用现有数据库的相同*连接名称*加上一个数字。因此，您可以将连接字符串作为变量，并在添加新数据库时将数字添加到其中。

**`Edit`**

通过考虑您将在语法上将数据库添加到您的项目中，然后如果您添加了一个新的数据库。它将采用该连接字符串的名称：

```
name="TeamSortingTool.Properties.Settings.PlayerTeamConnectionString1" 
```

因为它在现有数据库名称的末尾添加了一个数字，所以您可以投资我提供的方法，添加指定的连接字符串类似这样的东西：

```
public string GetConnectionStringByName(int DB_Number)
        {
            string returnValue = null;
            ConnectionStringSettings settings = ConfigurationManager.ConnectionStrings["Connection Name Here"];
            if (settings != null)
                returnValue = settings.ConnectionString+Convert.ToString(DB_Number);
            return returnValue;
        } 
```

因为该`DB_Number`变量可以保存在一个`XML`文件中，以免在每次添加数据库时丢失和增加。

因此，如果您将新数据库添加到现有 1 连接名称应该是：

```
name="TeamSortingTool.Properties.Settings.PlayerTeamConnectionString1" 
```

如果您添加了另一个数据库，`DB_Number`则将增加 1 以将连接名称更改为：

```
name="TeamSortingTool.Properties.Settings.PlayerTeamConnectionString2" 
```

并使用户能够选择他想要使用的连接字符串。

另一方面 。如果您的数据库在应用程序运行之前手动添加。处理起来会更容易，因为您只需将连接字符串作为数组保存在数据结构中并调用想要使用的连接

这就是我从你的问题中得出的结论

# entity-framework - AsNoTracking 复制实体

> ID：12185139
> 
> 赞同：3
> 
> 时间：2012-08-29T19:27:57.097
> 
> 标签：entity-framework, ef-code-first

对不起我糟糕的英语 - 我在 WPF (.net 4.5) 应用程序中使用 EF 5 (Code First)。每个窗口都有自己的上下文。

我有一个这样的模型（为简洁起见省略了代码）：

```
public class Car
{
  public string Model { get; set; }  
  public int BrandId { get; set; }  
  public virtual Brand Brand { get; set; }
} 
```

我使用组合框来允许用户将 a 关联`Brand`到 a `Car`。问题是，每次我保存 a时，也会保存`Car`一个新的、重复的。`Brand`发生这种情况是因为我使用`AsNoTracking()`.

现在，我加载了组合框，`AsNoTracking()`因为我无法加载`Brand`在其他 DbContext 实例中所做的表上的更改（使用`myContext.Set<Brand>().Load()`）。

所以我的问题是，如何解决这个问题？如果有另一种强制重新加载集合的方法（不使用`AsNoTracking`），那就太好了。更好的是能够通知 EF`AsNoTracking`加载的实体不是新的。

**编辑1：** @Mark：谢谢，将实体附加到上下文就可以了。但是我使用一个通用基类来进行验证并保存我所有表单的数据，因此手动附加实体不是很实用......根据你的建议，我最终这样做了，在添加 Car 实体之后保存它之前：

```
var entities = (((IObjectContextAdapter)ctx).ObjectContext.ObjectStateManager.GetObjectStateEntries(EntityState.Added));

foreach (var item in entities)
{
    if ((item.Entity as EntityBase).Id > 0)
    {
        item.ObjectStateManager.ChangeObjectState(item.Entity, EntityState.Unchanged);
    }
} 
```

（我所有的实体都继承自 EntityBase，我所有的键都是数据库生成的）。这工作得很好，但我想要第二个意见......这很好还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:35:21.913

发生的情况是您的上下文不知道附加到汽车的品牌，因此它正在创建一个新的以匹配您的外键。您应该在保存之前将品牌附加到上下文中：

```
context.Brands.Attach(brand); 
```

您可以在保存之前通过单独重新加载单个品牌来重新加载它：

```
db.Entry(brand).Reload(); 
```

如果您不想在保存汽车时实际保留对品牌的**任何**更改，您可以告诉上下文品牌尚未更改，并阻止更新。

```
context.Entry(brand).State = EntityState.Unchanged; 
```

# java - 使用 java 反射获取包名

> ID：12185142
> 
> 赞同：3
> 
> 时间：2012-08-29T19:28:04.173
> 
> 标签：java, reflection, package

我想从一个单独的 Java 项目中获取所有包名称，我将如何在 Java 中最好使用反射来做到这一点？

我已将项目导入到我的构建路径中，并尝试使用下面的代码来获取包名称。

`Package[] pack = Package.getPackages();`

编辑：我没有使用 jar 文件，我刚刚导入了项目，因为它将在同一个目录中。我只需要我创建的包，特别是以某个目录开头的包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:31:38.757

您真的不能仅通过使用就知道库中的每个包名称，`getPackages()`因为它只会列出类加载器已知的包名称。这意味着如果一个类尚未从特定包中加载，那么它将不在列表中。

使用 zip 文件处理例程打开 jar 文件，并按目录名读出包。使用这种技术，您将发现所有包名，甚至包括那些尚未“使用”的包名。基本上，任何包含`.class`文件的路径都是“包名”。

---- 编辑为进一步的细节表明 JAR 文件没有被使用 ---

由于您没有使用 JAR 文件（为什么不呢？它们真的很棒！），您将不得不扫描目录。要“找到”目录，您需要切分类路径。获取类路径的方法是：

```
 String classpath = System.getProperty("java.class.path", null); 
```

然后，您搜索每个“起点”下的所有目录，其中包含一个`.class`文件。一旦你拥有了所有这些，你就拥有了所有的包。

同样，仅仅询问类加载器是不可能知道所有包的，除非你能以某种方式保证类加载器已经加载了所有的类（它通常不会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T12:24:02.943

只要你不需要空包，这样的东西应该可以工作：

```
/**
 * Finds all package names
 * @return Set of package names
 */
public Set<String> findAllPackages() {
    List<ClassLoader> classLoadersList = new LinkedList<ClassLoader>();
    classLoadersList.add(ClasspathHelper.contextClassLoader());
    classLoadersList.add(ClasspathHelper.staticClassLoader());
    Reflections reflections = new Reflections(new ConfigurationBuilder()
            .setScanners(new SubTypesScanner(false), new ResourcesScanner())
            .setUrls(ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[0])))
            .filterInputsBy(new FilterBuilder().include(FilterBuilder.prefix("my.base.package"))));
    Set<Class<? extends Object>> classes = reflections.getSubTypesOf(Object.class);
    Set<String> packageNameSet = new TreeSet<String>();
    for (Class classInstance : classes) {
        packageNameSet.add(classInstance.getPackage().getName());
    }
    return packageNameSet;
} 
```

它找到所有类，遍历它们并获取存储在 Set 中的包名称以避免重复。

*不幸的是，如果不指定自定义配置以允许对象扫描，我们不能只将下面的代码与普通反射对象一起使用。*

```
Set<Class<? extends Object>> classes = reflections.getSubTypesOf(Object.class); 
```

# regex - RegEx 不区分大小写的内联

> ID：12185143
> 
> 赞同：0
> 
> 时间：2012-08-29T19:28:18.017
> 
> 标签：regex, vb.net, validation, case-sensitive, case-insensitive

我在 VB.NET 中有以下正则表达式，它工作得很好。

`(Istr_)*(8[25]\d{5}[0-9xX]{2}|DR\d{5}[0-9xX]{2}|R\d{2}-\d{4})`

但是，我希望“Istr_”部分不区分大小写，而表达式的其余部分仍然区分大小写。我尝试根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx)简单地添加“？i：”，如下所示：

`(?i:Istr_)*(8[25]\d{5}[0-9xX]{2}|DR\d{5}[0-9xX]{2}|R\d{2}-\d{4})`

但这打破了`RegularExpressionValidator`我的形式。

跟这个有关系吗`*`？我不确定加入模式是否合适。我希望第一个模式是第二个模式的可选不区分大小写前缀。

此外，我不想允许空间，我还没有弄清楚如何去做。

谢谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T19:36:55.860

请参阅此处的讨论：[您可以只使正则表达式的一部分不区分大小写吗？](https://stackoverflow.com/questions/43632/can-you-make-just-part-of-a-regex-case-insensitive)

或者做一个不是很漂亮的解决方案，但有效：

```
([Ii][Ss][Tt][Rr]_)?(8[25]\d{5}[0-9xX]{2}|DR\d{5}[0-9xX]{2}|R\d{2}-\d{4}) 
```

我已将您的 * 更改为 ?。这表示：

```
?: the prefix iStR_ is optional
*: the prefix IStr_ is optional but can occur multiple times 
```

# firefox - Firefox 闪烁 3D 变换

> ID：12185144
> 
> 赞同：0
> 
> 时间：2012-08-29T19:28:20.043
> 
> 标签：firefox, css, 3d, css-transforms

我使用 CSS3 3D 变换制作的这个模板在 FireFox 15 中像疯了一样闪烁（可能还有旧版本？几个月前在更新之前似乎还不错）。我已经设法通过删除容器的`perspective`属性来停止闪烁，但这并不理想。如果我使用 Firebug 删除所有子元素，问题仍然存在。

有任何想法吗？它可以在所有其他浏览器中按预期工作！我意识到这项技术是新的且不稳定的，但在 Firefox 中闪烁非常糟糕，而在 Chrome 和 Safari 中则完全没问题。

[http://iamalexkempton.net/themes/vFlip_v1-1-preview/template/index1.php](http://iamalexkempton.net/themes/vFlip_v1-1-preview/template/index1.php)

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:55:42.300

Translate3d 有问题（如果你正在使用它）。RotateY 应该可以正常工作。它至少解决了我闪烁和奇怪的旋转。

见：[https ://bugzilla.mozilla.org/show_bug.cgi?id=769892](https://bugzilla.mozilla.org/show_bug.cgi?id=769892)

题外话：不错的网站！在 FF 中工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T21:35:07.277

`perspective: 1000px;`在带有转换的元素的容器上使用应该可以

问候

# ios - CoreBluetooth 和音频流

> ID：12185145
> 
> 赞同：2
> 
> 时间：2012-08-29T19:28:22.817
> 
> 标签：ios, bluetooth-lowenergy, core-bluetooth

我可以使用 CoreBluetooth 框架将音频流从一台 iOS 设备传输到另一台 iOS 设备（例如从 4s 到新 iPad）吗？也许BLE对于媒体流来说太慢了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T08:16:47.917

低功耗蓝牙 (BLE) 不适用于流式传输数据！

如果您想流式传输，您必须使用蓝牙 2.X+EDR 和适当的配置文件。因此，如果要流式传输音频，则需要耳机或 A2DP 配置文件。

CoreBluetooth API 只允许访问 BLE 设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T21:22:40.937

音频流不会有任何好处，因为 BLE 可以一次传输 20 个字节的数据包，在 iOS5 上每次传输之间有 37.5 毫秒的延迟。因此，这将是滞后的，并且毫无用处。缓冲数据总是有可能的，但归根结底，这不是流式传输音频的好方法。

```
|packet| --- 37.5ms --- |packet| --- 37.5ms --- |packet... 
```

# qt - RFCOMM 服务器对其他设备不可用 - Symbian3

> ID：12185148
> 
> 赞同：2
> 
> 时间：2012-08-29T19:28:28.890
> 
> 标签：qt, bluetooth, symbian, rfcomm, spp

我正在尝试使用 Symbian 配置 RFCOMM 服务器。

查看我的代码，似乎我没有遗漏任何内容，但其他设备只是看不到我的服务。

我使用笔记本列出了手机上所有可用的蓝牙服务，但该服务不存在。

有人能帮助我吗？

这是代码：

```
void BtServer::StartServicoL()
{

   TProtocolDesc pdesc;
   User::LeaveIfError(iSocketServer.FindProtocol(NOMERFCOMM(), pdesc)); 

   iState = EFindingAvailablePort;
   User::LeaveIfError(iListeningSocket.Open(iSocketServer, NOMERFCOMM));

   User::LeaveIfError(iListeningSocket.GetOpt(KRFCOMMGetAvailableServerChannel, KSolBtRFCOMM, iPort));

   iState = EBinding;
   iBtSocketAddr.SetPort(iPort);
   User::LeaveIfError(iListeningSocket.Bind(iBtSocketAddr));
   User::LeaveIfError(iListeningSocket.Listen(1));  

   iServiceAdvertiser->StartL(iPort);

   iBtSocketAddr.SetSecurity(iBtSecurity);

   iAcceptingSocket.Close();

   User::LeaveIfError(iAcceptingSocket.Open(iSocketServer));

   iListeningSocket.Accept(iAcceptingSocket, iStatus);   

   SetActive();

}

void CBluetoothServiceAdvertiser::StartL(const TInt aPort)
{

   iPort = aPort; 

   iState = EConnecting;
   User::LeaveIfError(iSdpServ.Connect());
   User::LeaveIfError(iSdpDatabase.Open(iSdpServ));

   TUUID serviceUUID(UUID_SERVICE);

   iSdpDatabase.CreateServiceRecordL(serviceUUID, iRecordHandle);

   CSdpAttrValueDES* protocolDescriptorList = CSdpAttrValueDES::NewDESL(NULL);
   CleanupStack::PushL(protocolDescriptorList);

   TBuf8<TAM_MAX_NRO_PORTA> port; 
   port.Append((TChar)iPort);

   protocolDescriptorList
         ->StartListL()
            ->BuildDESL()
               ->StartListL()               
                  ->BuildUUIDL(KRFCOMM) 
                  ->BuildUintL(port)    
               ->EndListL()             
         ->EndListL();              

   iSdpDatabase.UpdateAttributeL(iRecordHandle, KSdpAttrIdProtocolDescriptorList, *protocolDescriptorList);
   CleanupStack::PopAndDestroy(protocolDescriptorList);

   iSdpDatabase.UpdateAttributeL(iRecordHandle, KSdpAttrIdBasePrimaryLanguage + KSdpAttrIdOffsetServiceName, NOME_SERV);

   iSdpDatabase.UpdateAttributeL(iRecordHandle, KSdpAttrIdBasePrimaryLanguage + KSdpAttrIdOffsetServiceDescription, DESC_SERV);

   CSdpAttrValue* attrVal = NULL;

   TBuf8<TAM_MAX_SERV_DISP> avail;

   avail.FillZ(1); 

   avail[0]=0xff;  

   attrVal = CSdpAttrValueUint::NewUintL(avail);

   CleanupStack::PushL(attrVal);
   iSdpDatabase.UpdateAttributeL(iRecordHandle, KSdpAttrIdServiceAvailability, *attrVal);
   CleanupStack::PopAndDestroy(attrVal);

} 
```

# windows-phone-7 - 修改 Windows Phone WebBrowser 控件的用户代理

> ID：12185155
> 
> 赞同：2
> 
> 时间：2012-08-29T19:28:43.257
> 
> 标签：windows-phone-7, webbrowser-control

我们在 Windows Phone 7x 应用程序中嵌入了一个 WebBrowser。此 WebBrowser 指向我们的 Web 服务器。我们需要能够区分来自应用程序的请求和来自本机浏览器（例如嵌入在另一个应用程序中的 WebBrowser）的请求。为此，我们想修改来自所述 WebBrowser 的所有 HTTP 请求的用户代理。

但是，我找不到这样做的方法。我最初的想法是简单地覆盖 Navigate 函数，添加“additionalHeaders”。不幸的是，WebBrowser 类是密封的，所以这个选项根本不是一个选项。我到处搜索了一个我可能无法利用的暴露的属性或处理程序。

那么，简而言之，有没有办法为所有出站 HTTP 请求修改 WebBrowser 的用户代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T00:10:30.220

我尝试了与 msbg 类似的方法，将 URL 存储在内存中以避免重复检查，并避免使用 !!! 修改它。但是，这种方法不会保留 POST 数据，因此对我没有帮助。

```
List<string> recentlyRequestedUrls = new List<string>();

    void wb_Navigating(object sender, NavigatingEventArgs e)
    {
        if(!recentlyRequestedUrls.Contains(e.Uri.ToString()))
        {
            //new request, reinitiate it ourselves and save that we did to avoid infinite loop.
            e.Cancel = true;
            string url = e.Uri.ToString();
            recentlyRequestedUrls.Add(url);
            webBrowser1.Navigate(new Uri(url), null, "User-Agent: Your_User_Agent");
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T03:46:59.417

我知道这个问题很老，但如果这对任何人都有用，你总是可以将它用于 WebBrowser 的导航事件：

```
 void wb_Navigating(object sender, NavigatingEventArgs e)
    {
        if (!e.Uri.ToString().Contains("!!!"))
        {
            e.Cancel = true;
            string url = e.Uri.ToString();
            if (url.Contains("?"))
                url = url + "&!!!";
            else
                url = url + "?!!!";
            wb.Navigate(new Uri(url), null, "User-Agent: " + "Your User Agent");
        }
    } 
```

您只需添加“！！！” 到具有您的自定义用户代理的导航的所有 url。如果 URL 不包含“!!!”，则它是来自单击链接的请求，WebBrowser 取消导航，并使用您的自定义用户代理和“!!!”重新导航 在查询字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:52:17.473

**在调用Navigate**方法时，通过附加标头设置用户代理。详情[在这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626636%28v=vs.105%29.aspx)。

# asp.net - 如何从 HttpHandler 发送 401 响应？

> ID：12185156
> 
> 赞同：1
> 
> 时间：2012-08-29T19:28:43.550
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我们有一个登录强制应用程序，它只允许用户在我们的应用程序中登录到单个会话。这是在 postauthenticate 请求事件处理程序中完成的。

如果用户需要注销（他们有另一个会话），我们这样做：

```
FormsAuthentication.SignOut();
FormsAuthentication.RedirectToLoginPage(); 
```

这已经很好地工作了很长时间。现在我们正在向我们的应用程序添加一个 web api。当您点击 Web api Url 时， PostAuthentication 事件确实会触发，它会看到用户已在其他地方登录......但是，它会重定向到登录......由于代码，这是预期的。

我试图更改上面的代码以设置`Response.StatusCode = 401`然后结束请求。好吧，这很好用，但是 asp.net 很“不错”并且会自动重定向到登录页面。

如果这个请求来自 web api URL，有没有办法我可以用 401 响应而不让它重定向到登录页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:09:23.530

问题是 FormsAuthenticationModule 在 EndRequest 捕获所有出站请求，如果状态为 401 并且 URL 不是配置的登录位置，您将被重定向到登录位置。

没有什么好方法可以解决这个问题。基本上我已经看到了两种方法，但都不是很棒的：

1.  实现您自己的 FormsAuthenticationModule。与其使用开箱即用的，不如自己动手做，知道异常并让 401 通过。
2.  向为您发出 401 的登录页面添加一些逻辑。查看入站 URL。如果 URL 是来自 FormsAuthenticationModule 的重定向之一，但用户已经登录，则发出 401 而不是显示登录表单。FormsAuthModule 不会循环重定向到登录表单，所以你没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-26T11:00:42.503

您可以将 HttpResponse 的 SuppressFormsAuthenticationRedirect 设置为 true，FormsAuthentication 模块将不会捕获 401。

# android - 尝试显示警报对话框时泄漏窗口

> ID：12185168
> 
> 赞同：1
> 
> 时间：2012-08-29T19:29:18.917
> 
> 标签：android, android-alertdialog, progressdialog

我正在尝试将 iPhone 应用程序移植到 Android，但遇到一些启动困难。

我有以下函数来获取数据：

```
 public void onClick(View v) {
        try{
            //Toast.makeText(getApplicationContext(), "Starting update", Toast.LENGTH_SHORT).show();
            progressDialog = ProgressDialog.show(MainActivity.this, "", "Loading...");
            new Thread() {
                public void run() {
                    try{
                        DataManager manager = new DataManager(getApplicationContext());
                        manager.updateData();
                    } catch (Exception e) {
                        Log.e(TAG, e.getMessage());

                        AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
                        alertDialog.setTitle("Error...");
                        alertDialog.setMessage(e.getMessage());
                        alertDialog.show();
                    }
                    progressDialog.dismiss();
                }
            }.start();
        } catch (Exception e) {
            Log.e(TAG, "Problem with getting the data: " + e.getMessage());
            Toast.makeText(getApplicationContext(), "Error during update",
                    Toast.LENGTH_SHORT).show();
        }

    } 
```

但是如果发生异常，我会收到以下错误（我最初尝试使用 AsyncTask，但遇到了同样的问题）：

```
08-29 20:23:24.389: ERROR/WindowManager(974): Activity org.idoms.iDomsAndroid.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412fcc38 that was originally added here
        android.view.WindowLeaked: Activity org.idoms.iDomsAndroid.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412fcc38 that was originally added here
        at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
        at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
        at android.view.Window$LocalWindowManager.addView(Window.java:537)
        at android.app.Dialog.show(Dialog.java:278)
        at android.app.ProgressDialog.show(ProgressDialog.java:116)
        at android.app.ProgressDialog.show(ProgressDialog.java:99)
        at android.app.ProgressDialog.show(ProgressDialog.java:94)
        at org.idoms.iDomsAndroid.MainActivity$1.onClick(MainActivity.java:46)
        at android.view.View.performClick(View.java:3511)
        at android.view.View$PerformClick.run(View.java:14105)
        at android.os.Handler.handleCallback(Handler.java:605)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4424)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:08:49.573

我的猜测是，线程不能与主 UI 线程元素交互。

progressDialog 是在主 Ui 线程中创建的，其他线程无法与之交互。你可以在字段中给它一个信号并检查它的进度，但我真的建议使用 Asynctask 来完成这个任务。

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:23:02.357

UI 元素（如 AlertDialog）只能从主 (UI) 线程进行操作。如果您尝试从后台线程（这是您正在使用的`new Thread() { ... }`）操作它们，您将收到此异常。

`runOnUiThread(new Runnable() { ... });`您可以通过在访问`AlertDialog`or时调用来解决此问题`progressDialog`，但这*非常、非常、非常脏*。

The better solution is to use `AsyncTask` (or even better `AsyncTaskLoader` as it takes care of orientationchanges and some other stuff for you). When using AsyncTask, make sure **not** to access UI elements in the `doInBackground()`-method. As the name, `saysdoInBackground(...)` is executed in a background thread. If you attempt to manipulate UI elements from that method, you'll indeed get the same error as you're experiencing now. If you want to access your UI-elements from your `AsyncTask`, you can do so in the `onPreExecute(...)`, `onProgressUpdate(...)` and `onPostExecute(...)` methods.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T21:48:14.763

The reason for the window leaking is due to your alertDialog not being dismissed before the app closes.

# json - 如何在 cakephp 中保存 JSON 数据

> ID：12185175
> 
> 赞同：4
> 
> 时间：2012-08-29T19:29:49.853
> 
> 标签：json, cakephp

我正在使用稳定的 CakePHP v2.2.1。我有一个`UsersController`配合动作`add()`。我正在尝试通过 ajax（从主页到`/users/add`）发送用户信息并保存数据。我的代码是这样的：

```
// /app/View/Pages/home.ctp
<?php
   $data = array('User' => array('username' => 'vegeta_super_sayajin',
    'password' => 'over9000!', 'email' => 'vegeta@supersayajin.com',
    'profile_pic' => '/home/pics/scouter.jpg', 'firstname' => 'Vegeta',
    'lastname' => 'Vegeta', 'level_id' => '9001'));
?>
<script type="text/javascript">
    var data = <?php echo json_encode($data); ?> //convert $data into json format
    $.ajax({url: '/users/add', data: "data="+data, type: 'post'});
</script> 
```

我如何在 中接收这些数据`UsersController`，以便我可以处理和保存它？

目前，我正在尝试：

```
// /app/Controller/UsersController.php
function add() {
    if($this->request->is('post') {
        //returns "Error: [object Object] in logfile
        $this->log($this->request->data);
    } else {
        $this->Session->setFlash(__("The user could not be saved :("));
    }
    $this->autoRender = false;
} 
```

`$this->log($this->request->data)``Error: [object Object]`在文件中返回`/app/tmp/logs/error.log`，并且此用户信息不存在于任何`$this->request->params`索引中。到目前为止，我所有的谷歌搜索都只返回了复杂的 cakephp v1.3 技术。这是如何在 cakephp v2.2.1 中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:22:10.917

你可以试试下面的代码。它会为你工作。

```
<?php
$data = array(
'User' => array(
    'username' => 'vegeta_super_sayajin', 
    'password' => 'over9000!',
    'email' => 'vegeta@supersayajin.com', 
    'profile_pic' => '/home/pics/scouter.jpg',
    'firstname' => 'Vegeta', 
    'lastname' => 'Vegeta', 
    'level_id' => '9001')
    );   
?>
<script type="text/javascript">
var data = [<?php echo json_encode($data); ?>] //convert $data into json format
$.ajax({
    url: 'checks/add', 
    data: "data="+JSON.stringify(data), 
    type: 'post'});
</script> 
```

在您的控制器代码中：

```
// /app/Controller/UsersController.php
function add() {
if($this->request->is('post') {
    $this->log(json_encode($this->request->data, true)); //returns "Error: [object Object] in logfile
} else {
    $this->Session->setFlash(__("The user could not be saved :("));
}
$this->autoRender = false;
} 
```

这是[json_decode 文档](http://php.net/manual/en/function.json-decode.php)。第二个参数`true`将对象转换为数组。

# oracle - Oracle SQL 查询从文件名序列中列出丢失的文件名

> ID：12185177
> 
> 赞同：0
> 
> 时间：2012-08-29T19:29:54.033
> 
> 标签：oracle

有没有办法使用 Oracle SQL 从以下文件名序列中列出丢失的文件名？

文件名存储在 table1 中。有两种类型的文件名 type1 和 type2。文件名不一定以正确的序列号顺序存储。对于每种文件类型，应该有十个文件（序列编号为 001-010）。

文件名采用以下格式：

文件类型.type1.seq.001.dat

文件类型.type1.seq.004.dat

文件类型.type2.seq.001.dat

文件类型.type1.seq.006.dat

文件类型.type2.seq.006.dat

文件类型.type1.seq.007.dat

文件类型.type1.seq.010.dat

文件类型.type2.seq.004.dat

文件类型.type1.seq.002.dat

文件类型.type1.seq.003.dat

文件类型.type2.seq.005.dat

文件类型.type2.seq.008.dat

文件类型.type2.seq.009.dat

文件类型.type2.seq.010.dat

此序列中丢失的文件将是：

文件类型.type1.seq.005.dat, 文件类型.type1.seq.008.dat, 文件类型.type1.seq.009.dat 文件类型.type2.seq.002.dat, 文件类型.type2.seq.003.dat, 文件类型.type2.seq.007.dat

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:16:06.463

您可以在运行时生成文件名，例如：

```
select 'filetype.type' || typeno || '.seq.' || to_char(seqno,'fm000') || '.dat'
       as filename
from (select rownum as typeno from dual connect by level <= 2)
    ,(select rownum as seqno from dual connect by level <= 10)
minus
select filename from table1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:41:51.087

```
select filename
from ref_table
MINUS
select distinct filename
from table1; 
```

ref_table 将包含所有可能文件名的列表。

# math - 用数学符号注释 Adob e Reader PDF

> ID：12185179
> 
> 赞同：9
> 
> 时间：2012-08-29T19:30:02.220
> 
> 标签：math, pdf, adobe-reader

我阅读的许多数学教科书和其他文献都是 PDF 格式的，所以我经常发现自己使用 Adob​​e Reader 评论工具对这些进行注释。

我确实在这里找到了[有用的指南](http://cjasn.asnjournals.org/site/misc/annotating.pdf)，但有时我也想要插入数学符号的选项。有没有人找到一种可靠的方法在注释中插入数学符号、TeX 或其他任意格式？

到目前为止，我想出的最好方法是输入以“0x”为前缀的 unicode，然后按 alt+X。也许使用 Adob​​e javascript SDK，您可以编写一个脚本来简化它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-23T06:40:34.670

我认为目前的任何商业编辑都不会让这变得容易，这太糟糕了。我相信供应商会监控这个网站，所以有希望。

同时，这是一个手动解决方法。

1.  使用 tikz 创建您的评论框。以下是我发现最相关的两个示例：[Boxes](https://www.writelatex.com/docs?snip_uri=http://www.texample.net/media/tikz/examples/TEX/boxes-with-text-and-math.tex&splash=none)和[Positioning](https://www.writelatex.com/docs?snip_uri=http://www.texample.net/media/tikz/examples/TEX/exam-sheet.tex&splash=none)。使用选项来获得所需的形状和位置。从包含您的评论的乳胶源生成一个 pdf 文件。
2.  重要提示：如果您的评论在原始文档的最后一页之前结束，请插入：

    ```
    \pagebreak{}           % create empty page
    \thispagestyle{empty}  % get rid of page numbers et al
    ~                      % put a space so the page gets generated 
    ```

    在你的`\end{document}`, 之前得到一个空的最后一页。以下命令将在原始文档的所有后续页面上重用您的评论文档的最后一页。

3.  [使用带有 multistamp 命令](http://www.pdflabs.com/docs/pdftk-man-page/#dest-op-multistamp)的最新版本的pdftk将您的方程式文件与原始文件重叠，如下所示：

    ```
    pdftk original.pdf multistamp comments.pdf output out.pdf 
    ```

    另请参阅[此问题](https://stackoverflow.com/questions/7682404)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-13T06:14:22.757

The free (as speech) PDF tool, [**Okular**](http://okular.kde.org), supports this functionality by putting latex formula directly between $$...$$.

[![enter image description here](../Images/e1153f13fcb33371d19c4fb83a50760d.png)](https://i.stack.imgur.com/Ktvk9.png)

# android - Android Preferenceactivity getView

> ID：12185189
> 
> 赞同：3
> 
> 时间：2012-08-29T19:30:46.137
> 
> 标签：android, preferenceactivity

我有这样一段代码:) 我想编辑我的自定义首选项布局的文本属性。但是从 getView 函数对对象所做的任何更改都不会影响首选项屏幕中的实际列表。有任何想法吗？我知道我不能扩展 PreferenceScreen，在这种情况下我不能使用任何其他类型的首选项，我只想能够从我的代码布局中编辑我的自定义文本视图。

```
PreferenceScreen settings = getPreferenceManager().createPreferenceScreen(this);

settings.setLayoutResource(R.layout.mypreference);
View test = (View) settings.getView(null,getListView());

TextView text = (TextView)test.findViewById(R.id.text);
text.setText("BLA BLA"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-29T04:51:18.647

我们***应该***使用[`getView(convertView, parent)`](http://developer.android.com/reference/android/preference/Preference.html#getView%28android.view.View,%20android.view.ViewGroup%29)，但从 StackOverflow 上无数***未回答***的问题来看，很明显没有人知道如何使用它。所以我们唯一的选择是创建一个自定义`Preference`：

**创建一个新类：**

```
public class CustomPreference extends Preference {
    public CustomPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onBindView(View rootView) {
        super.onBindView(rootView);

        View myView = rootView.findViewById(R.id.myViewId);
        // do something with myView
    }
} 
```

**在您的** `xml/preferences.xml`中，添加您的自定义首选项：

```
<your.package.name.CustomPreference
    android:key="custom_preference"
    android:layout="@layout/custom_layout" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:25:09.767

使用下面的自定义布局：

custom_preferences_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <Button 
        android:id="@+id/preview_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:text="@string/notification_preview" />
    <ListView 
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

将上面的文件与您的用户首选项 xml 文件一起使用，您可以执行此操作来访问自定义布局中的项目：

```
public class CustomPreferenceActivity extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle bundle){
        super.onCreate(bundle);
        addPreferencesFromResource(R.xml.custom_preferences);
        setContentView(R.layout.custom_preferences_layout);
    }

    private void initCustomizePreferences(){
        //Button
        Button button = (Button)findViewById(R.id.preview_button);
        //Do something with the button.

    }

} 
```

我希望这有帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T12:47:43.253

您需要`onBindView`在自定义`Preference`类中覆盖。

更多详细信息 - [使用自定义布局获取偏好视图](https://stackoverflow.com/questions/17233440/get-view-of-preference-with-custom-layout/26074821#26074821)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-30T07:53:02.470

我从来没有真正弄乱过 PreferenceActivity 的视图，但这是我做的事情（通常用于 ListPreferences）

```
ListPreference listPref;
CheckBoxPreference cbPref;

// Set the summary as the current listpref value
listPref = (ListPreference) findPreference("list_pref_key");
listPref.setSummary(listPref.getEntry()); 

// change the title / summary / ??? of any preference
findPreference("anothe_pref_key").setTitle("New Title");
findPreference("anothe_pref_key").setSummary("New subtext for the view"); 
```

这样，即使 PreferenceActivity / PreferenceFragment 使用的布局在未来版本中发生变化，您也不必更改代码中的任何内容。

# java - 计时器无法停止（可能是 GUI 错误）

> ID：12185192
> 
> 赞同：2
> 
> 时间：2012-08-29T19:30:57.197
> 
> 标签：java, swing, timer

我正在尝试为使用计时器的交通灯模拟创建动画。有一个停止模拟的按钮，但是点击它似乎不影响动画。我确实检查了动画，但动画看起来像是不同的地方。请帮忙。

在主课中：

```
DataModels dm = new DataModels();
Simulation sm = new Simulation(dm);
sm.go(); 
```

这是模拟类：

```
public class Simulation extends JPanel implements ActionListener {
    DataModels dm;
    Timer tm = new Timer(20, this);
    private boolean ss = false;

    public Simulation(DataModels dm) {
        this.dm = dm;
        // redLightTime= dm.getRedLight()*1000;
    }

    public void go() {
        sm = new Simulation(dm);
        simulation = new JFrame();
        simulation.setTitle("Traffic light and Car park Siumulation");
        simulation.setSize(800, 700);
        simulation.setResizable(false);
        simulation.setVisible(true);
        simulation.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        simulation.add(sm, BorderLayout.CENTER);

        // Command button panel
        JPanel command = new JPanel();
        command.setPreferredSize(new Dimension(800, 100));
        // Pause or play button
        JButton pauseplayB = new JButton("Pause");
        pauseplayB.setSize(new Dimension(50, 50));
        pauseplayB.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                // Execute when button is pressed
                ss = true;
                System.out.println("You clicked the button");
            }
        });
        command.add(pauseplayB);
        JButton stopB = new JButton("Stop");
        JButton saveB = new JButton("Save");

        command.setLayout(new GridLayout(1, 1));
        command.add(stopB);
        command.add(saveB);
        simulation.add(command, BorderLayout.SOUTH);
    } 
```

现在`paintComponent`将根据计时器的变化而变化。下面的代码也在`Simulation`类中。

```
public void paintComponent(Graphics g) {
    // Many other actions
    // ....
    startAnimation();
}

public void startAnimation() {
    if ( !false) {
        tm.start();
    } else {
        tm.stop();
    }
    // Checking button click
    System.out.println(ss);
} 
```

根据控制台输出，该`ss`值永远不会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T19:44:49.057

按钮的动作侦听器应该调用该函数以某种方式停止计时器，而不是依赖绘制事件来完成它。

编辑：这是一些代码:)

```
public void actionPerformed(ActionEvent e) {
    // Execute when button is pressed
    ss = true;
    System.out.println("You clicked the button");
    startAnimation();
} 
```

并且 startAnimation 方法应该有 if(!ss) 而不是 if(!false)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T20:31:11.150

除了 JTMon 的建议之外，您的 startAnimation 方法还包含一个逻辑炸弹

```
public void startAnimation() {
    if ( !false) { //<-- this will ALWAYS be true
        tm.start();
    } else {
        tm.stop();
    }
    // Checking button click
    System.out.println(ss);
} 
```

控制计时器的 if 语句将始终尝试启动计时器

# java - 检查 TypeElement 是类还是接口

> ID：12185195
> 
> 赞同：1
> 
> 时间：2012-08-29T19:31:05.943
> 
> 标签：java

所以我正在写一个 AnnotationProcessor 并且在 process 方法中给你一个[TypeElement](http://docs.oracle.com/javase/6/docs/api/javax/lang/model/element/TypeElement.html)。我需要检查 TypeElement 是接口还是类。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:45:56.387

我完全错过了 JavaDoc 中的答案。

它的

```
TypeElement.getKind() == ElementKind.INTERFACE 
```

或者

```
TypeElement.getKind().isInterface() 
```

# java - 将视图放在 Android 中的另一个视图上

> ID：12185197
> 
> 赞同：3
> 
> 时间：2012-08-29T19:31:11.793
> 
> 标签：java, android, android-layout

在我的 android 应用程序中，我想在`ImageView`. 我不知道如何将视图放在另一个视图上。实际上边框是一个自定义视图。

自定义视图类：

```
public class CropBorder extends View {

    private Paint paint = new Paint();

    public CropBorder(Context context) {
        super(context);
    }

    public CropBorder(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
    }

    @Override
    public void onDraw(Canvas canvas) {
        float[][] circleXY = {{5, 5}, {155, 5}, {305, 5}, {5, 105}, {155, 105}, {305, 105}, {5, 55}, {305, 55}};
        float[][] lineXY = {{5, 5, 305, 5}, {5, 105, 305, 105}, {5, 5, 5, 105}, {305, 5, 305, 105}};

        paint.setColor(Color.BLACK);
        paint.setStrokeWidth(1);

        for(int i = 0 ; i < circleXY.length ; i++)
            canvas.drawCircle(circleXY[i][0], circleXY[i][1], 5, paint);

        paint.setStrokeWidth(2);

        for(int i = 0 ; i < lineXY.length ; i++)
            canvas.drawLine(lineXY[i][0], lineXY[i][1], lineXY[i][2], lineXY[i][3], paint);
    }

} 
```

活动课：

```
public class CropTestActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.crop_test_layout);
    }

} 
```

布局 XML：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/crop_test_layout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <com.nvtech.backend.utility.imageEditor.CropBorder
        android:id="@+id/crop_border"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp" >
    </com.nvtech.backend.utility.imageEditor.CropBorder>

    <ImageView
        android:id="@+id/android_image"
        android:src="@drawable/android"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:layout_marginTop="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_gravity="center"
        android:scaleType="fitXY"
        android:contentDescription="@string/android_image_description" >
    </ImageView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:33:49.287

您可以将 ImageView 包装在 LinearLayout 中，并使用填充设置边框：

```
<LinearLayout // this is your root container ... >
    <LinearLayout
        android:id="@+id/content_item_image_wrapper"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#00FFFFFF"
        android:padding="3dip" >

        <ImageView
            android:id="@+id/user_profile_thumbnail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:maxHeight="80dp"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>
</LinearLayout> 
```

# c# - 如何在 C# 中将字符串分解为数组（或列表）？

> ID：12185204
> 
> 赞同：0
> 
> 时间：2012-08-29T19:31:57.417
> 
> 标签：c#, arrays, list

使用 C# (VS 2010 Express) 我将文本文件的内容读入字符串。该字符串相当长，但可靠地被“\t”（用于制表符）和“\r\n”（用于回车/换行符）分解。

选项卡表示新的数据列，新行表示新的数据行。

我想创建一个数组或维度列表 (X)(Y)，这样数组中的每个点都可以保存文本文件中的 1 行数据，以及该 1 行中包含的所有 Y 列（“\t”表示新的数据列，“\r\n”表示新的数据行”）。

为了简单起见，假设我的文本有 10 行数据和 2 列。我想创建一个数组或列表或您认为最适合存储数据的任何内容。我该怎么做呢？谢谢。

这是我用来将文本文件中的数据读入字符串的代码：

```
// Read the file as one string.
            System.IO.StreamReader myFile = new System.IO.StreamReader("f:\\data.txt");
            string myString = myFile.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:34:30.453

```
var result = contents.Split("\r\n".ToArray(), StringSplitOptions.RemoveEmptyEntries).Select(s => {
    s.Split('\t').ToList();
}).ToList(); 
```

`result`将是一个`List<List<String>>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:34:40.267

字符串拆分

[http://msdn.microsoft.com/en-us/library/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:36:12.520

```
File.ReadLines(sourceFilePath)
    .Select(line => line.Split('\t'))
    .ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T19:36:16.583

这将读取文件并为您创建一个字符串数组列表

```
List<string[]> rows= File.ReadLines("PathToFile")
    .Select(line=>line.Split('\t')).ToList(); 
```

如果您想要`string[][]`版本，只需在末尾使用`ToArray();`而不是。`ToList();`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T19:39:01.990

[TextFieldParser](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCkQFjAB&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fmicrosoft.visualbasic.fileio.textfieldparser.aspx&ei=T28-UOO2PMrH6gGTlIGQBA&usg=AFQjCNE7Y0l9fyFsKpZQCr66e6ZYWWkohw)是处理基于文本的分隔文件的一个很棒的类。您可以为它提供一个文件、一个分隔符（在本例中为“\t”），它将提供一种获取下一行值的方法（作为字符串数组）。

它比一般情况下的简单情况具有优势，`Split`因为它可以处理注释、引用字段、转义分隔符等。您可能有也可能没有这种情况，但是几乎免费处理所有这些尴尬的边缘情况是相当不错的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T19:39:54.903

就像原样（你已经有了一个包含所有内容的字符串）：

```
str.Split(new string[]{"\r\n"}, StringSplitOptions.None)
  .Select(s => s.Split('\t')); 
```

为您提供一个`IEnumerable<string[]>`生产变量，如列表列表、数组数组等，只需要合适的`ToArray()`或`ToList()`等。

但是，如果您可以一次处理每一行，则可以使用一些可以让您这样做的东西会更好：

```
public IEnumerable<string[]> ReadTSV(TextReader tr)
{
  using(tr)
    for(string line = tr.ReadLine(); line != null; line = tr.ReadLine())
      yield return line.Split('\t');
} 
```

然后，您只使用每行所需的内存。我们可以更进一步，将读取更改为一次发出每个单独的单元格，但这通常足以以合理的效率读取数百 MB 大小的文件。

根据对问题的评论进行编辑：

如果你真的想，你可以`List<string[]>`从：

```
var myFile = new StreamReader("f:\\data.txt");
var list = ReadTSV(myFile).ToList(); 
```

或者，将行更改`yield return line.Split('\t');`为`yield return line.Split('\t');`，您会得到一个`List<List<string>>`.

但是，如果可能的话，直接处理结果，而不是先将其放入列表中：

```
var myFile = new StreamReader("f:\\data.txt");
var chunks = ReadTSV(myFile);
foreach(var chunk in chunks)
{
   DoSometingOnAChunk(chunk[0], chunk[1]);
} 
```

它将使用更少的内存，并且可以更快地开始，而不是先暂停阅读整个内容。像这样的代码可以毫无怨言地愉快地运行千兆字节。

# sql-server - 从 Oracle 到 SQL Server 的链接无法创建视图

> ID：12185208
> 
> 赞同：1
> 
> 时间：2012-08-29T19:32:04.077
> 
> 标签：sql-server, database, oracle10g, database-link

使用 oracle 10 我有一个到 sql server 的链接。我有一个查询（如下）运行良好，就像一个选择语句但是当我使用它来创建一个视图时（视图创建成功但是当我尝试在 sql developer 中查看视图中的数据时）我得到一个

数据库“链接名称”在此上下文中不支持 ROWID

问题是我将一个表中的多行组合成多列的子选择吗？

```
 SELECT
    upper(cus."cus_last_name")  AS lname,
    upper(cus."cus_first_name") AS fname,
    upper(cus."cus_initial")    AS minitial,
    upper(cus."maiden_name")   AS olname,
    pt."cus_dob"               AS dob,
    pt."cus_id"              AS id,
    (
      SELECT
        cus_inst_key."cus_key_value"
      FROM
        "cus_inst_key"@linkname cus_inst_key
      WHERE
        cus_inst_key."cus_id"             = cus."cus_id"
      AND cus_inst_key."cus_key_cd"       = 1
    ) AS CUSALTID,
    (
      SELECT
        pcus_inst_key."cus_key_value"
      FROM
        "cus_inst_key"@linkname cus_inst_key
      WHERE
        cus_inst_key."cus_id"             = cus."cus_id"
      AND cus_inst_key."cus_key_cd"       = 2
     ) AS CUSALTID2,
    (
      SELECT
        cus_inst_key."cus_key_value"
      FROM
        "cus_inst_key"@linkname cus_inst_key
      WHERE
        cus_inst_key."cus_id"             = cus."cus_id"
      AND cus_inst_key."cus_key_cd"       = 3
    ) AS CUSALTID3,
    (
      SELECT
        cus_inst_key."cus_key_value"
      FROM
        "cus_inst_key"@linkname cus_inst_key
      WHERE
        cus_inst_key."cus_id"             = cus."cus_id"
      AND cus_inst_key."cus_key_cd"       = 4
    ) AS CUSALTID4
  FROM
    "cus"@linkname cus; 
```

谢谢你的帮助。

* * *

视图实际上是创建好的，由于某种原因，我只是不能在 sql developer 中使用数据选项卡。

# tsql - 如何从 TSQL 查询中故意返回 NULL

> ID：12185209
> 
> 赞同：0
> 
> 时间：2012-08-29T19:32:16.060
> 
> 标签：tsql, sybase

有没有一种方法可以故意`NULL`从 TSQL 查询中返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:23:24.157

我不使用 Sybase，但您应该能够执行以下操作：

```
SELECT CAST(NULL as int) AS NULLint --specify the appropriate datatype 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:46:55.930

最简单的方法是选择它：

```
select NULL 
```

# javascript - 禁用表格中的行单击

> ID：12185211
> 
> 赞同：1
> 
> 时间：2012-08-29T19:32:23.510
> 
> 标签：javascript, jquery, html-table, onclick

我想根据列中设置的标志值禁用对行的行单击其余行应该是可单击的，并且在某些列之间也是可单击的

具有 true 的前两行应该是不可点击的。但是，其余的行应该可以从第 1-5 列单击。

这是 [链接](http://jsfiddle.net/mEbUG/)

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:35:50.797

提取`.text()`行中最后一个单元格的 并测试它：

```
$('#table tr').find('td:gt(0):lt(5)').on("click", function() {
    if ($(this).closest('tr').find('td:eq(5)').text() != "true") {
        alert("hello");
    }
})​; 
```

[http://jsfiddle.net/mblase75/mEbUG/2/](http://jsfiddle.net/mblase75/mEbUG/2/)

或者，您可以`.filter`在调用之前删除不需要的单元格`.on("click")`：

```
$('#table tr').find('td:gt(0):lt(5)').filter(function() {
    return ($(this).closest('tr').find('td:eq(5)').text() != "true");
}).on('click', function() {
    alert("hello");
});​ 
```

[http://jsfiddle.net/mblase75/mEbUG/12/](http://jsfiddle.net/mblase75/mEbUG/12/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:45:35.733

如果我理解正确的话。您只希望没有“真实”单元格的行可以点击吗？或者您是否希望每个单元格都是可点击的，而不是带有“真”的单元格？

这是一个示例，仅当其中没有包含单词“true”的单元格时才使行可点击：

```
var hasTrueCell = function(cells) {

    for (var x = 0; x < cells.length; x++) {

        if (cells[x].innerHTML == "true")
            return true;

    }        

    return false;

}

var table = document.getElementById("table");
var rows = table.getElementsByTagName("TR");

for (var x = 0; x < rows.length; x++) {

    if (!hasTrueCell(rows[x].childNodes))
        rows[x].onclick = function() {         

            alert("hello");    

        }        

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:40:36.677

**已编辑**（评论后）

现在，这应该可以了。

```
$('#table tr').filter(function() {
    return $(this).find('td:contains("true")').length === 0;
}).click(function() {
    alert("hello");
});​​ 
```

[演示](http://jsfiddle.net/YUetH/2)

[参考](http://api.jquery.com/contains-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:41:12.097

```
$('#table tr').find('td:gt(0):lt(5)').click(function(){if($(this).text()!="true")alert(1)})​ 
````

# c# - 使用 C# 将第二个系列添加到 Excel 图表

> ID：12185213
> 
> 赞同：1
> 
> 时间：2012-08-29T19:32:30.323
> 
> 标签：c#, excel, charts

我正在尝试将两个系列添加到 Excel 图表中。我可以使用此代码将一个系列添加到图表中。如何在我的图表中再添加一个系列？

```
worksheet.Select(Type.Missing);
Excel.Range chartRange;
object misValue = System.Reflection.Missing.Value;
Excel.ChartObjects xlCharts = (Excel.ChartObjects)worksheet.ChartObjects(Type.Missing);
Excel.ChartObject myChart = (Excel.ChartObject)xlCharts.Add(10, 80, 300, 250);
Excel.Chart chartPage = myChart.Chart;

chartRange = worksheet.get_Range("B2", "B10");
chartPage.SetSourceData(chartRange, Excel.XlRowCol.xlColumns);
chartPage.ChartType = Excel.XlChartType.xlLine;
var series = (Excel.Series)chartPage.SeriesCollection(1);
series.Values = chartRange;
chartRange = worksheet.get_Range("A2", "A10");
series.XValues = chartRange; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:33:42.330

不知道它的 C#，但在 VBA 中我会使用类似的东西：

```
With ChartPage.SeriesCollection.NewSeries
  .Values = ActiveSheet.Range("C2:C10")
End With 
```

# python - Django 用户名中的 Unicode 字符

> ID：12185218
> 
> 赞同：6
> 
> 时间：2012-08-29T19:32:44.717
> 
> 标签：python, django, unicode, internationalization, django-registration

我正在使用 Django 1.4 开发一个网站，并在注册过程中使用 django-registration。事实证明，Unicode 字符不允许作为用户名，每当用户输入例如中文字符作为用户名的一部分时，注册失败并显示：

> 该值只能包含字母、数字和@/./+/-/_ 字符。

是否可以更改它以便在用户名中允许使用 Unicode 字符？如果是，我该怎么做？另外，它会导致任何问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T19:56:44.997

这真的不是问题 - 因为这个字符限制仅在我记得的 UserCreationForm （或 django-registration 中的 RegistrationForm ）中，并且您可以轻松地制作自己的，因为数据库中的字段只是普通的 TextField。

但这些限制并非没有原因。我现在能想到的一个可能的问题是创建链接 - 用户名通常用于此目的，它可能会导致问题。假帐户的用户名看起来相同但实际上是不同的字符等的可能性也更大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-11T08:02:44.537

Django [1.10](https://docs.djangoproject.com/en/1.10/releases/1.10/)现在正式支持 unicode 用户名，参见：

> django.contrib.auth 中的用户模型最初只接受用户名中的 ASCII 字母。虽然这不是一个刻意的选择，但在使用 Python 3 时，Unicode 字符总是被接受的。
> 
> 用户名验证器现在仅在 Python 3 上默认显式接受 Unicode 字母。可以通过更改 User 模型的 username_validator 属性或使用 ASCIIUsernameValidator 或 UnicodeUsernameValidator 更改该模型的任何代理来覆盖此默认行为。自定义用户模型也可以使用这些验证器。

# installation - SmartGit 在 Ubuntu 上的安装和使用

> ID：12185222
> 
> 赞同：64
> 
> 时间：2012-08-29T19:32:58.850
> 
> 标签：installation, ubuntu-12.04, smartgit

我已经下载了最新的 SmartGit 安装，每次我想使用它时，我都需要从 SmartGit bin 目录运行脚本 smartgit.sh，这个过程每次都需要相同的存储库设置。

在 Ubuntu 上安装 SmartGit 的正确方法是什么？因此，我可以拥有正常的图标并从以前的使用状态运行程序，而无需每次都配置存储库。

谢谢。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-12-13T06:04:20.610

您可以添加一个提供相对最新版本的 SmartGit（以及 SmartGitHg，SmartGit 的前身）的 PPA。

添加 PPA 运行：

```
sudo add-apt-repository ppa:eugenesan/ppa
sudo apt-get update 
```

要安装`smartgit`（在添加 PPA 之后）运行：

```
sudo apt-get install smartgit 
```

要安装`smartgithg`（在添加 PPA 之后）运行：

```
sudo apt-get install smartgithg 
```

这应该为您添加一个菜单选项

有关详细信息，请参阅[尤金圣 PPA](https://launchpad.net/~eugenesan/+archive/ppa)。

> 此存储库包含自定义、更新、移植和反向移植的包的集合，用于最后两个 LTS 版本和最新的 LTS 前版本

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2012-09-15T18:57:38.523

> 在 Ubuntu 上安装 SmartGit 的正确方法是什么？因此我可以有正常的图标

在 smartgit/bin 文件夹中，有一个 shell 脚本等着你： **add-menuitem.sh**。它就是这样做的。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-11-14T11:04:56.687

现在在[Smartgit 网页上](http://www.syntevo.com/smartgit)（我不知道从什么时候开始）可以直接下载 .deb 包。一旦安装，它会在新版本发布时自动升级。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-09T12:27:21.330

似乎有点晚了，但是有一个[带有 SmartGit 的 PPA 存储库](https://launchpad.net/~eugenesan/+archive/ppa)，享受吧！=)

# javascript - 在表单中输入字母时背景幻灯片

> ID：12185226
> 
> 赞同：1
> 
> 时间：2012-08-29T19:33:13.300
> 
> 标签：javascript, html, css, forms

今天看我的网站时，我发现了一些奇怪的东西。单击输入字段并输入一个字母时，背景会滑动一点。不幸的是，我不知道为什么会这样。

为了更清楚，这里是一个（质量差的）GIF： http: [//makeagif.com/i/FRMlyL](http://makeagif.com/i/FRMlyL)

JSFiddle 链接在这里：http: [//jsfiddle.net/pesrd/](http://jsfiddle.net/pesrd/)

也许这是一个众所周知的问题，但我从来没有处理过这个问题。

# adsense - 如何更改 Google 自定义搜索搜索结果的外观？

> ID：12185228
> 
> 赞同：0
> 
> 时间：2012-08-29T19:33:25.980
> 
> 标签：adsense, google-custom-search

我正在为我的网站创建一个 Google 自定义搜索结果引擎，它在每个结果周围都有这些边框，我想更改结果（如果可能的话，还有 html 样式）。我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:10:25.507

您通常无法设置这样的样式，因为它们位于`iframe`不在您的域中托管的范围内。但是，我确实找到了有关此主题的文档：

[https://developers.google.com/custom-search/docs/ui_xml?hl=en](https://developers.google.com/custom-search/docs/ui_xml?hl=en)

# macos - Jenkins：如何为 OSX 配置 Mercurial 安装程序？

> ID：12185230
> 
> 赞同：1
> 
> 时间：2012-08-29T19:33:33.157
> 
> 标签：macos, mercurial, jenkins, hudson

如何配置 Jenkins 以在需要它的节点（从站）上自动安装 Mercurial？

我尝试检查`Mercurial -> Install Automatically`主节点下的组合框，但它似乎不起作用。我需要“添加安装程序”才能使其工作吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:41:55.127

显然在 OSX 上有很多 Jenkins 错误：[https ://groups.google.com/d/topic/jenkinsci-users/J5FzjoCLxaE/discussion](https://groups.google.com/d/topic/jenkinsci-users/J5FzjoCLxaE/discussion)

目前似乎没有办法在 OSX 下自动安装 Mercurial。您必须手动安装 Mercurial 并将 Jenkins 指向它。Ubuntu 部署可以运行 sudo apt-get install mercurial 但我不熟悉 OSX 的等价物。

# c++ - 几种特定方法或一种通用方法？

> ID：12185234
> 
> 赞同：2
> 
> 时间：2012-08-29T19:34:02.030
> 
> 标签：c++

这是我长时间查看这个奇妙的网页后的第一个问题。

可能我的问题有点傻，但我想知道其他人对此的看法。更好的是，创建几个特定的​​方法，或者另一方面，只创建一个通用方法？这是一个例子......

```
unsigned char *Method1(CommandTypeEnum command, ParamsCommand1Struct *params)
{
if(params == NULL) return NULL;

// Construct a string (command) with those specific params (params->element1, ...)

return buffer; // buffer is a member of the class 
}

unsigned char *Method2(CommandTypeEnum command, ParamsCommand2Struct *params)
{
...
}

unsigned char *Method3(CommandTypeEnum command, ParamsCommand3Struct *params)
{
...
}
unsigned char *Method4(CommandTypeEnum command, ParamsCommand4Struct *params)
{
...
} 
```

或者

```
unsigned char *Method(CommandTypeEnum command, void *params)
{
switch(command)
{
case CMD_1:
{
if(params == NULL) return NULL;

ParamsCommand1Struct *value = (ParamsCommand1Struct *) params;

// Construct a string (command) with those specific params (params->element1, ...)

return buffer;
}
break;

// ...

default:
break;
}
} 
```

我不太喜欢后一种选择的主要是这个，

```
ParamsCommand1Struct *value = (ParamsCommand1Struct *) params; 
```

因为“params”不能是指向“ParamsCommand1Struct”的指针，而是指向“ParamsCommand2Struct”或其他人的指针。

我真的很感谢你的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:02:50.153

**一般回答**

在[*Writing Solid Code*](https://rads.stackoverflow.com/amzn/click/com/1556155514)中，Steve Macguire 的建议是针对特定情况选择不同的函数（方法）。原因是您可以断言与特定案例相关的条件，并且您可以更轻松地进行调试，因为您有更多的上下文。

一个有趣的例子是用于动态内存分配的标准 C 运行时函数。其中大部分是多余的，因为`realloc`实际上可以（几乎）完成您需要的一切。如果有`realloc`，则不需要`malloc`或`free`。但是当你有这样一个通用函数，用于几种不同类型的操作时，很难添加有用的断言，也更难编写单元测试，而且在调试时更难看到发生了什么。Macquire 更进一步并建议，不仅应该`realloc`只做 _re_allocation，而且它可能应该是两个不同的函数：一个用于增大块，另一个用于缩小块。

虽然我普遍同意他的逻辑，但*有时*使用一种通用方法（通常在操作高度数据驱动时）具有实际优势。所以我通常会根据具体情况做出决定，偏向于创建非常具体的方法，而不是过于通用的方法。

**具体答案**

就您而言，我认为您需要找到一种方法来从细节中提取出通用代码。这`switch`通常是一个信号，表明您应该使用带有虚函数的小型类层次结构。

如果您喜欢单一方法方法，那么它可能应该只是更具体方法的调度程序。换句话说，switch 语句中的每种情况都只是调用适当`Method1`的 ,`Method2`等。如果您希望用户只看到通用方法，那么您可以将特定实现设为私有方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:07:02.680

通常，最好提供单独的函数，因为它们通过原型名称和参数直接和可见地向用户传达可用的信息；这也导致更直接的文档。

有一次我使用多用途函数是用于类似 query() 函数，其中许多次要查询函数，而不是导致函数激增，被捆绑为一个，具有通用输入和输出 void 指针.

一般来说，想想你试图*通过 API 原型本身*与 API 用户交流什么；清楚地了解 API 可以做什么。他不需要过多的细节；他确实需要知道核心功能，这是拥有 API 的全部意义所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:39:02.757

首先，您需要决定使用哪种语言。用两者`C`和`C++`这里标记问题是没有意义的。我假设 C++。

如果你*可以*创建一个通用函数，那当然更好（为什么你更喜欢多个冗余函数？）问题是；你可以吗？但是，您似乎不知道模板。我们需要查看您在此处省略的内容，以判断模板是否合适：

> // 使用这些特定参数 (params->element1, ...) 构造一个字符串（命令）

在一般情况下，假设模板是合适的，所有这些都变成：

```
template <typename T>
unsigned char *Method(CommandTypeEnum command, T *params) {
    // more here
} 
```

* * *

在旁注中，如何`buffer`声明？您是否返回指向动态分配内存的指针？更喜欢 RAII 类型的对象并避免像这样动态分配内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:40:21.537

如果您使用的是 C++，那么我会避免使用 void*，因为您实际上并不需要。拥有多种方法并没有错。请注意，您实际上不必在第一组示例中重命名函数 - 您可以使用不同的参数重载函数，以便每种类型都有单独的函数签名。归根结底，这种问题是非常主观的，并且有多种做事方式。查看您的第一种类型的函数，您可能会通过研究模板函数的使用得到很好的服务

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T19:41:45.623

您可以创建一个结构。这就是我用来处理控制台命令的方法。

```
typedef int       (* pFunPrintf)(const char*,...);
typedef void      (CommandClass::*pKeyFunc)(char *,pFunPrintf);

struct KeyCommand
{
    const char * cmd;
    unsigned char cmdLen;
    pKeyFunc pfun;
    const char * Note;
    long ID;
};

#define CMD_FORMAT(a) a,(sizeof(a)-1)
static KeyCommand Commands[]=
{
    {CMD_FORMAT("one"),            &CommandClass::CommandOne,               "String Parameter",0},
    {CMD_FORMAT("two"),            &CommandClass::CommandTwo,               "String Parameter",1},
    {CMD_FORMAT("three"),          &CommandClass::CommandThree,             "String Parameter",2},
    {CMD_FORMAT("four"),           &CommandClass::CommandFour,              "String Parameter",3},

}; 

#define  AllCommands sizeof(Commands)/sizeof(KeyCommand) 
```

和解析器功能

```
void CommandClass::ParseCmd( char* Argcommand )
 {
            unsigned int x;
            for ( x=0;x<AllCommands;x++)
            {
                if(!memcmp(Commands[x].cmd,Argcommand,Commands[x].cmdLen ))
                {
                    (this->*Commands[x].pfun)(&Argcommand[Commands[x].cmdLen],&::printf);
                    break;
                }
            }

            if(x==AllCommands)
            {
                // Unknown command
            }

} 
```

我使用线程安全的 printf pPrintf，所以忽略它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T19:52:02.117

我真的不知道你想做什么，但在 C++ 中，你可能应该从 Formatter Base 类派生多个类，如下所示：

```
class Formatter
{
    virtual void Format(unsigned char* buffer, Command command) const = 0;
};

class YourClass
{
public:
    void Method(Command command, const Formatter& formatter)
    {
        formatter.Format(buffer, command);
    }

private:
    unsigned char* buffer_;
};

int main()
{
    //
    Params1Formatter formatter(/*...*/);
    YourClass yourObject;

    yourObject.Method(CommandA, formatter);
    // ...
} 
```

这消除了处理类中所有参数的责任，并使其[关闭以进行更改](http://en.wikipedia.org/wiki/Open/closed_principle)。如果在进一步开发过程中会有新的命令或参数，您不必修改（并最终破坏）现有代码，而是添加实现新内容的新类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T20:51:57.653

虽然不是完整的答案，但这应该会引导您朝着正确的方向前进：一个功能，一个责任。更喜欢只负责一件事并且做得很好的代码。需要将 void * 转换为其他类型的带有巨大 switch 语句（本身并不坏）的代码是一种气味。

顺便说一句，我希望您确实意识到，根据标准，只有当原始转换恰好是从 <type> * 转换为 void * 时，您才能从 void * 转换为 <type> *。

# jsf - 动态动作构造

> ID：12185235
> 
> 赞同：0
> 
> 时间：2012-08-29T19:34:05.033
> 
> 标签：jsf, jsf-2

我有一个基本的 JSF 问题。我有一个循环，我试图根据列表值创建多个命令链接。并且该命令链接将从列表字段中调用相应的操作。

基本上我有这个bean：

```
public class FavoriteTasks implements Serializable {

    private static final long serialVersionUID = -8702569738872927728L;

    private String key;
    private String action;
    private String widget;
    private String name;

    public FavoriteTasks(String key, String action, String widget, String name) {
        super();
        this.key = key;
        this.action = action;
        this.widget = widget;

    } 
```

然后使用属性文件填充它：

```
 private void setUpFavTasks(UserUIPreferencesVO uiPref) {
    List<String> fTaskList = uiPref.getFavoriteTasks();
     favTasks =new ArrayList<FavoriteTasks>();
    for(String var:fTaskList){
        FavoriteTasks ft = new FavoriteTasks(var,
                ConfigurationData.getValue(var+".action"),
                ConfigurationData.getValue(var+".widget"),
                ConfigurationData.getValue(var+".name"));
        favTasks.add(ft);
    }

} 
```

现在的问题是操作不理解它需要先获取值并读取它，然后根据值进行方法调用。

```
 <ui:repeat value="#{userSessionBean.favTasks}" var="favTasks" >
            <li><ice:commandLink styleClass="shortcut-menu" action="#{favTasks.action}">                  
               <f:param name="filterByContentWidget" value="#{favTasks.widget}" />
               <f:param name="filterByContentGroup" value="#{favTasks.key}" />
               <f:param name="menuName" value="#{favTasks.name}" />       
               <h:outputText value="#{msgs[favTasks.key]}" /> 
            </ice:commandLink>
            </li>
    </ui:repeat> 
```

action 试图获取 favTasks.action 并失败，因为没有这样的方法。它需要读取存储在 favTasks.action 中的值，然后转到该值所说的方法……例如，如果 favTasks.action = catalogHandler.showCatalog。它需要调用 catalogHandler.showCatalog 而不是 favTasks.action

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:23:22.897

当您单击 commandLink 时，action 属性用于指示下一个视图。它是一个返回字符串的方法表达式。

例如：

```
public String method() {
   //do something
   return "success";
} 
```

在你的 commandLink 中作为

```
<ice:commandLink value="Submit" action="#{bean.method}" /> 
```

点击后会带你到success.xhtml

此外，您需要声明公共设置器/获取器，您无法获取/设置代码中的任何私有变量：

```
private String key;
private String widget;
private String name; 
```

# android - 下载位图时显示进度对话框

> ID：12185236
> 
> 赞同：2
> 
> 时间：2012-08-29T19:34:05.440
> 
> 标签：android, bitmap, progress-bar

我想显示一个下载位图的进度条：

```
 public static Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setDoInput(true);
        connection.connect();

        InputStream input = connection.getInputStream();

        int fileLength = connection.getContentLength();

        // download the file

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            // publishing the progress....
            progressDialog.setProgress((int) (total * 100 / fileLength));
            Log.i("progre+ss", (int) (total * 100 / fileLength) + " ");
        }

        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

初始化为：

```
 private void openprogresdialog() {
    // TODO Auto-generated method stub
    progressDialog = new ProgressDialog(PrMapGen.this);
    progressDialog.setMessage("Generating File...");
    progressDialog.setCancelable(false);
    progressDialog.setIndeterminate(false);
    progressDialog.setMax(100);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progressDialog.show();

    new Thread() {
        public void run() {
            try {
                generatePrMap(DataArray,
                        getIntent().getExtras().getString("project"));

            } catch (Exception e) {
            }
            progressDialog.dismiss();
            projdata.close();
            finish();
        }
    }.start();
} 
```

我的问题如下：

当我使用while循环更新进度条时，没有返回图像，当我删除while循环时，位图成功返回。

为什么？？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:40:08.093

这是一个简单的方法。

声明一个[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

将下载图像的代码放在**doInBackgroud()**中，并将 progressBar 设置在**onUpdateProgress()**中。

你也可以检查[这个问题](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)。

# android - 如何为没有孩子的组隐藏 ExpandableListView 指示器

> ID：12185243
> 
> 赞同：6
> 
> 时间：2012-08-29T19:34:36.850
> 
> 标签：android, expandablelistview, indicator

> **可能重复：**
> [ExpandableListView - 隐藏没有孩子的组的指示器](https://stackoverflow.com/questions/4145090/expandablelistview-hide-indicator-for-groups-with-no-children)

隐藏没有孩子的组的指示器

主要的.xml

```
<ExpandableListView 
android:id="@+id/elv"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:groupIndicator="@drawable/selector">
</ExpandableListView> 
```

选择器.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_empty="true" android:drawable="@android:color/transparent"/>
    <item android:state_expanded="true" android:drawable="@drawable/expanded" />
    <item android:drawable="@drawable/collapse" />
</selector> 
```

它不适用于我的 ICS，似乎所有折叠组的状态都是空的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T19:43:34.423

试试这个：

```
getExpandableListView().setGroupIndicator(null); 
```

要不然，

```
if ( getChildrenCount( groupPosition ) == 0 ) {
       indicator.setVisibility( View.INVISIBLE );
    } 
else {
       indicator.setVisibility( View.VISIBLE );
       indicator.setImageResource( isExpanded ? R.drawable.group_expanded : R.drawable.group_closed );
    } 
```

# iphone - Restkit Get with Params & Block with Shared Client

> ID：12185251
> 
> 赞同：2
> 
> 时间：2012-08-29T19:35:13.317
> 
> 标签：iphone, block, restkit, objective-c-blocks

它不会让我将参数附加到请求中，我做错了什么？Params 是一个 Dictionary 并且 endString 添加到 sharedClient baseURL。

```
[[RKClient sharedClient] get:endString usingBlock:^(RKRequest *loader){
    loader.params = [RKParams paramsWithDictionary:params];
    loader.onDidLoadResponse = ^(RKResponse *response) {

        [self parseJSONDictFromResponse:response];
    };

    loader.onDidFailLoadWithError = ^(NSError *error) {
        NSLog(@"error2:%@",error);
    };
}]; 
```

我收到此错误：`RestKit was asked to retransmit a new body stream for a request. Possible connection error or authentication challenge?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:54:18.813

我认为你在正确的轨道上。下面是我在[这里](http://kalapun.com/blog/2012/05/17/how-i-restkit/)找到的一个工作示例，大约在页面下方的 2/3 处。您的另一个选择可能是将参数直接附加到 URL。我不确定这对你是否可行，但如果你的参数很简单，那么它可能是。

```
- (void)authenticateWithLogin:(NSString *)login password:(NSString *)password onLoad:(RKRequestDidLoadResponseBlock)loadBlock onFail:(RKRequestDidFailLoadWithErrorBlock)failBlock
{
    [[RKClient sharedClient] post:@"/login" usingBlock:^(RKRequest *request) {
        request.params = [NSDictionary dictionaryWithKeysAndObjects:
                          @"employee[email]", login,
                          @"employee[password]", password,
                          nil];
        request.onDidLoadResponse = ^(RKResponse *response) {

            id parsedResponse = [response parsedBody:NULL];
            NSString *token = [parsedResponse valueForKey:@"authentication_token"];
            //NSLog(@"response: [%@] %@", [parsedResponse class], parsedResponse);

            if (token.length > 0) {
                NSLog(@"response status: %d, token: %@", response.statusCode, token);
                [[RKClient sharedClient] setValue:token forHTTPHeaderField:@"X-Rabatme-Auth-Token"];

                if (loadBlock) loadBlock(response);
            }

            [self fireErrorBlock:failBlock onErrorInResponse:response];
        };
        request.onDidFailLoadWithError = failBlock;
    }];
} 
```

您还应该看看这个 SO 问题：[RestKit GET query parameters](https://stackoverflow.com/questions/11227255/restkit-get-query-parameters?rq=1)。

# authentication - 每个路由的 NancyFx 身份验证

> ID：12185257
> 
> 赞同：3
> 
> 时间：2012-08-29T19:35:43.997
> 
> 标签：authentication, routes, nancy

从我在源代码中看到的 RequiresAuthentication() 对整个模块进行身份验证检查。每条路线有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:15:36.867

我有同样的问题。然而事实证明，`RequiresAuthentication`模块级别和路由级别的工作都有效。为了演示，这里有一些代码删除了我当前的项目（为简洁起见，并非所有路线都显示）。

```
public class RegisterModule : _BaseModule
{
    public RegisterModule() : base("/register")
    {
        Get["/basic-details"] = _ => View["RegisterBasicDetailsView", Model];

        Get["/select"] = _ =>
            {
                this.RequiresAuthentication();
                return View["RegisterSelectView", Model];
            };
    }
} 
```

当然，这样做的唯一问题是模块中所有受保护的路由都需要调用`RequiresAuthentication`. 对于上面的模块，我还有另外 5 个路由（未显示），所有这些路由都需要保护，因此`RequiresAuthentication`在模块级别进行了 6 次调用而不是 1 次。另一种方法是将不受保护的路由拉到另一个模块中，但我的判断是模块的扩散比额外的 RequiresAuthentication 调用更糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:37:10.887

```
namespace Kallist.Modules {

    #region Namespaces

    using System;
    using Nancy;

    #endregion

    public static class ModuleExtensions {

        #region Methods

        public static Response WithAuthentication(this NancyModule module, Func<Response> executeAuthenticated) {
            if ((module.Context.CurrentUser != null) && !string.IsNullOrWhiteSpace(module.Context.CurrentUser.UserName)) {
                return executeAuthenticated();
            }
            return new Response { StatusCode = HttpStatusCode.Unauthorized };
        }

        #endregion

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T04:10:45.307

我遇到了同样的问题，这就是我解决它的方法。

```
 var module = new MyModule();
        module.AddBeforeHookOrExecute(context => null, "Requires Authentication");
        _browser = new Browser(with =>
            {
                with.Module(module);
                with.RequestStartup((container, pipelines, ctx) =>
                    {
                        ctx.CurrentUser = new User { UserId = "1234", UserName = "test"};
                    });
            }); 
```

我现在可以在模块级别使用 this.RequiresAuthentication() 并运行我的单元测试。

# javascript - HTML 标记中的 JavaScript OnChange 侦听器位置

> ID：12185266
> 
> 赞同：5
> 
> 时间：2012-08-29T19:36:14.080
> 
> 标签：javascript, html

我在让 OnChnage 侦听器工作时遇到问题，如果我将脚本`</form>`放置在标签之后，侦听器工作正常，但如果我将脚本放在`<head>`标签内，它就无法工作。

在我的网站上，我只能在标签中包含脚本，`<head>`我可以做些什么来使脚本在`<head>`标签中运行？

在此配置中，脚本不起作用

```
<head>
<script type="text/javascript">
if(window.addEventListener) {
    document.getElementById('address').addEventListener('change', loadXMLDoc, false);
} else if (window.attachEvent){
    document.getElementById('address').attachEvent("onchange", loadXMLDoc);
}

function loadXMLDoc(){
   alert('worked');
}
</script>
</head>

<body>
<form>

<input id="address" name="address" type="text"/>
<input id="test" name="test" type="text"/>

 </form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:39:31.223

这么说吧：

```
<head>
<script type="text/javascript">
window.onload= function () {
    if(window.addEventListener) {
        document.getElementById('address').addEventListener('change', loadXMLDoc, false);
    } else if (window.attachEvent){
        document.getElementById('address').attachEvent("onchange", loadXMLDoc);
    }

    function loadXMLDoc(){
       alert('worked');
    }
}
</script>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:41:02.493

将您的代码放入`window.onload`函数中：

```
<head>
<script>
    window.onload = function() {
        if(window.addEventListener) {
            document.getElementById('address').addEventListener('change', loadXMLDoc, false);
        } else if (window.attachEvent){
            document.getElementById('address').attachEvent("onchange", loadXMLDoc);
        }

        function loadXMLDoc(){
            alert('worked');
        }
    }
</script>
<body>
    ...
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:39:09.373

当您将脚本放在 中时`<head>`，您正在使用的元素`document.getElementById`尚不存在。在添加事件侦听器之前等待窗口加载。

您需要等待窗口加载 jQuery`$(document).ready`或向窗口添加加载的侦听器：

```
window.addEventListener('load',addListener,false);
function addListener() {
    //your code here
} 
```

# sql - 确保 min() 只检索一个值

> ID：12185270
> 
> 赞同：0
> 
> 时间：2012-08-29T19:36:44.070
> 
> 标签：sql, sql-server-2000

我有一个 SQL 查询，它从列出运动员 100 米和 200 米比赛时间的表中检索数据。该查询仅根据 检索每个运动员的最佳比赛时间`athlete_id`，它还想知道比赛时间是 100 米还是 200 米时间 ( `event_code`)。

因此，跑步者可以有多个比赛时间，但查询只能从每个比赛中的每个跑步者那里获得最佳比赛时间。

问题是，如果运动员两次或多次完成完全相同的最佳比赛时间，则查询会检索所有这些比赛时间。如何确保查询只检索一个值？

这是代码：

```
select r.*
from result r
inner join (
    select athelete_id, min(result_time) as FastestTime
    from result
    where event_code = 1
    group by athelete_id
) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:38:26.113

抱歉，我有点误解了这个问题，但你可以像这样为所有竞争对手管理它：

```
 select MIN(r.id), r.athelete_id, r.result_time, r....
    from result r
    inner join (
        select athelete_id, min(result_time) as FastestTime
        from result
        where event_code = 1
        group by athelete_id
    ) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime
    GROUP BY r.athelete_id, r.result_time, r.... 
--(as how many column you have, except r.ID) 
```

试试这个：

```
select top 1 r.*
from result r
inner join (
    select athelete_id, min(result_time) as FastestTime
    from result
    where event_code = 1
    group by athelete_id
) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime 
```

或者

```
SET ROWCOUNT 1

    select r.*
    from result r
    inner join (
        select athelete_id, min(result_time) as FastestTime
        from result
        where event_code = 1
        group by athelete_id
    ) rm on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:54:06.593

这在 SQL Server 2000 中很痛苦。使用 row_number 会容易得多，但这需要 2005。

然而，这个想法很简单，你只需要多一层子查询：

```
select r.*
from result r join
     (select r.athelete_id, MIN(result_id) as minresult_id
      from result r inner join
           (select athelete_id, min(result_time) as FastestTime
            from result
            where event_code = 1
            group by athelete_id
           ) rm
           on r.athelete_id = rm.athelete_id and r.result_time = rm.FastestTime
      group by r.athelete_id
     ) aft
     on r.result_id = minresult_id 
```

最里面的子查询基本上是您的子查询。然后，通过 athelete_id 聚合，得到最小的 result_id，用于最终的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:13:11.120

很大程度上与 Gordon 的方法类似，但使用最早的事件来打破平局（这应该是身份列，如果是这样的话`result_id`，但这并不总是得到保证）。

```
DECLARE @event_code INT;
SET @event_code = 1;

SELECT r.*
FROM dbo.result AS r 
INNER JOIN 
(
  SELECT r2.athelete_id, x.mintime, mindate = MIN(r2.result_date)
    FROM 
    (
      SELECT athelete_id, mintime = MIN(result_time)
      FROM dbo.result
      WHERE event_code = @event_code
      GROUP BY athelete_id
    ) AS x
    INNER JOIN dbo.result AS r2
    ON x.athelete_id = r2.athelete_id
    AND x.mintime = r2.result_time
    WHERE r2.event_code = @event_code
    GROUP BY r2.athelete_id, x.mintime
) AS y
ON r.athelete_id = y.athelete_id
AND r.result_time = y.mintime
AND r.result_date = y.mindate
WHERE r.event_code = @event_code; 
```

当然，在 SQL Server 2005 中要容易得多：

```
;WITH x AS 
(
  SELECT athelete_id, --... other columns, 
    rn = ROW_NUMBER() OVER (PARTITION BY athelete_id ORDER BY result_time, result_date)
  FROM dbo.result
  WHERE event_code = 1
)
SELECT athelete_id, --... other columns
FROM x WHERE rn = 1; 
```

# php - 从数组php中删除一个值

> ID：12185273
> 
> 赞同：1
> 
> 时间：2012-08-29T19:37:07.310
> 
> 标签：php, arrays

有更简单的方法吗？

```
$array = array(1,57,5,84,21,8,4,2,8,3,4);
$remove = 21;   
$i = 0;
foreach ($array as $value ){
    if( $value == $remove)
        unset($array[$i])
        $i++;
    }

//array: 1,57,5,84,8,4,2,8,3,4 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T19:42:24.897

`array_search`答案很好。你也可以`arraydiff`喜欢这个

```
$array = array(1,57,5,84,21,8,4,2,8,3,4);
$remove = array(21);
$result = array_diff($array, $remove); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T19:39:23.637

如果要删除数组中*第一次*出现的项，请使用[`array_search`](http://ca.php.net/manual/en/function.array-search.php)查找数组中项的索引，而不是滚动自己的循环。

```
$array = array(1,57,5,84,21,8,4,2,8,3,4);
$remove = 21;

$index = array_search($remove, $array);

if (index !== false)
  unset($array[$index]); 
```

要删除所有重复项，只要找到匹配项，就重新运行搜索/删除：

```
while (false !== ($index = array_search($remove, $array))) {
  unset($array[$index]);
} 
```

或找到匹配值的所有键并删除它们：

```
foreach (array_keys($array, $remove) as $key) {
  unset($array[$key]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:39:04.660

这有点干净：

```
foreach($array as $key => $value) {
    if ($value == $remove) {
        unset($array[$key]);
        break;
    }
} 
```

**更新**

或者，您可以将不匹配的值放入临时数组中，然后重置原始值。

```
$temp = array();

foreach($array as $key => $value) {
    if ($value != $remove) {
        $temp[$key] = $value;
    }
}
$array = $temp; 
```

# gsoap - gsoap 错误：SOAP-ENV:Client [无子代码]

> ID：12185275
> 
> 赞同：4
> 
> 时间：2012-08-29T19:37:11.477
> 
> 标签：gsoap

我下载了 gsoap 2.8 并进入示例文件夹并运行了一个 make。一切似乎都建立得很好。然后我导航到“ssl”文件夹并在一个 xterm 中运行 sllserver，并在第二个 xterm 窗口中运行 sslclient。（我正在运行 RHEL 6）服务器似乎运行良好，它显示“绑定成功：socket = 4”。但是当我运行客户端时，我收到以下消息：

> 错误 -1 故障：SOAP-ENV:Client [无子代码]
> “文件结束或无输入：操作中断或超时（30 秒接收延迟）（30 秒发送延迟）”
> 详细信息：[无详细信息]

我没有修改任何示例代码，所以它看起来应该可以工作。谁能给我一些关于我应该看什么的建议？我正在尝试学习如何设置使用 ssl 的肥皂服务器。（我已经运行了一个 gsoap 服务器）我整天在网上搜索一个示例，但像往常一样，没有一个。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T00:07:39.200

您可以使用编译器开关重新构建此示例`-DDEBUG`以启用消息记录 ( `make 'sslclient_CFLAGS = -DWITH_OPENSSL -DWITH_GZIP -DDEBUG'`)。会`TEST.log`告诉你出了什么问题。我怀疑这是默认设置为的服务器地址/端口的网络问题`"https://localhost:18081"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:48:06.737

您可以设置超时参数：`soap.recv_timeout = 60`（60秒）

# r - sapply？轻拍？ddply？基于另一个变量先前值的滚动索引的数据框变量

> ID：12185276
> 
> 赞同：2
> 
> 时间：2012-08-29T19:37:12.300
> 
> 标签：r

我还没有找到完全符合我需要的东西，所以我想我会发布这个。我有许多函数，它们基本上依赖于一个带有函数的变量的滚动索引，并且应该自然地流回到它们来自的数据帧中。

例如，

```
data<-as.data.frame(as.matrix(seq(1:30)))
data$V1<-data$V1/100
str(data)

data$V1<-NA  # rolling 5 day product
for (i in 5:nrow(data)){
  start<-i-5
  end<-i
  data$V1_MA5d[i]<- (prod(((data$V1[start:end]/100)+1))-1)*100
}
data
> head(data,15)
     V1   V1_MA5d
1  0.01        NA
2  0.02        NA
3  0.03        NA
4  0.04        NA
5  0.05 0.1500850
6  0.06 0.2101751
7  0.07 0.2702952
8  0.08 0.3304453
9  0.09 0.3906255
10 0.10 0.4508358
11 0.11 0.5110762
12 0.12 0.5713467
13 0.13 0.6316473
14 0.14 0.6919780
15 0.15 0.7523389 
```

但实际上，我应该能够执行以下操作：

```
data$V1_MA5d<-sapply(data$V1, function(x) prod(((data$V1[i-5:i]/100)+1))-1)*100 
```

但我不确定那会是什么样子。

同样，另一个变量对一个变量的计数：

```
data$V1_MA5_cat<-NA
data$V1_MA5_cat[data$V1_MA5d<.5]<-0
data$V1_MA5_cat[data$V1_MA5d>.5]<-1
data$V1_MA5_cat[data$V1_MA5d>1.5]<-2
table(data$V1_MA5_cat)

data$V1_MA5_cat_n<-NA
data$V1_MA5_cat_n[data$V1_MA5_cat==0]<-nrow(subset(data,V1_MA5_cat==0))
data$V1_MA5_cat_n[data$V1_MA5_cat==1]<-nrow(subset(data,V1_MA5_cat==1))
data$V1_MA5_cat_n[data$V1_MA5_cat==2]<-nrow(subset(data,V1_MA5_cat==2))

> head(data,15)
     V1   V1_MA5d V1_MA5_cat V1_MA5_cat_n
1  0.01        NA         NA           NA
2  0.02        NA         NA           NA
3  0.03        NA         NA           NA
4  0.04        NA         NA           NA
5  0.05 0.1500850          0            6
6  0.06 0.2101751          0            6
7  0.07 0.2702952          0            6
8  0.08 0.3304453          0            6
9  0.09 0.3906255          0            6
10 0.10 0.4508358          0            6
11 0.11 0.5110762          1           17
12 0.12 0.5713467          1           17
13 0.13 0.6316473          1           17
14 0.14 0.6919780          1           17
15 0.15 0.7523389          1           17 
```

我知道有更好的方法 - 帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:16:02.057

您可以通过以下几种方法之一来执行此操作。值得一提的是，您确实在 R 中编写了一个“正确”的 for 循环。您通过分配`data$V1_MA5d <- NA`. 这样你是在填充而不是增长，它实际上相当有效。但是，如果您想使用`apply`家庭：

```
sapply(5:nrow(data), function(i) (prod(data$V1[(i-5):i]/100 + 1)-1)*100)

[1] 0.1500850 0.2101751 0.2702952 0.3304453 0.3906255 0.4508358 0.5110762 0.5713467 0.6316473 0.6919780 0.7523389 0.8127299
[13] 0.8731511 0.9336024 0.9940839 1.0545957 1.1151376 1.1757098 1.2363122 1.2969448 1.3576077 1.4183009 1.4790244 1.5397781
[25] 1.6005622 1.6613766 
```

注意我里面的代码`[]`和你的不同。查看区别：

```
i <- 10
i - 5:i
(i-5):i 
```

或者您可以`rollapply`从`zoo`包中使用：

```
library(zoo)
myfun  <- function(x) (prod(x/100 + 1)-1)*100
rollapply(data$V1, 5, myfun)

[1] 0.1500850 0.2001551 0.2502451 0.3003552 0.3504853 0.4006355 0.4508057 0.5009960 0.5512063 0.6014367 0.6516872 0.7019577
[13] 0.7522484 0.8025591 0.8528899 0.9032408 0.9536118 1.0040030 1.0544142 1.1048456 1.1552971 1.2057688 1.2562606 1.3067726
[25] 1.3573047 1.4078569 
```

根据评论，这将为您提供一个长度为 26 的向量...相反，您可以添加一些参数以`rollapply`使其与您的初始数据匹配：

```
rollapply(data$V1, 5, myfun, fill=NA, align='right') 
```

* * *

关于你的第二个问题，`plyr`在这里很方便。

```
library(plyr)
data$cuts <- cut(data$V1_MA5d, breaks=c(-Inf, 0.5, 1.5, Inf))
ddply(data, .(cuts), transform, V1_MA5_cat_n=length(cuts)) 
```

但也有许多其他选择。

# mysql - ON DUPLICATE KEY 导致超时

> ID：12185279
> 
> 赞同：0
> 
> 时间：2012-08-29T19:37:29.297
> 
> 标签：mysql, sql, insert, on-duplicate-key

我目前正在我的 MySQL 数据库上运行以下 SQL 语句：

```
INSERT INTO `Table` (`Col1`, `Col2`, `Col3`) VALUES ('a','b','c')
ON DUPLICATE KEY UPDATE `Col1`=`Col1`, `Col2`=`Col2`, `Col3`=`Col3` 
```

但是，每次我运行它时，我都会收到以下错误：`#1205 - Lock wait timeout exceeded; try restarting transaction`. 这很可怕，因为我不知道到底出了什么问题。我的意图是更新现有行的所有值（除了`id`，它是表的主键）。

如果您有任何想法，请告诉我！

**编辑：**更多信息......这`id`是一个自动递增的字段。还有另一**列**（**我们**`UNIQUE`称它为`IdentityNo`_ ）。**`IdentityNo`****`id`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:28:57.207

如果要在上述语句的插入部分引用列的值，则需要使用values(column_name)。你必须使用类似的东西 `INSERT INTO `Table` (`Col1`, `Col2`, `Col3`) VALUES ('a','b','c') ON DUPLICATE KEY UPDATE `Col1`=values(Col1), `Col2`=values(Col2), `Col3`=values(Col3)`**

# php - IIS7 + PHP5.3.16 + Plesk 如何获取 500 错误的详细信息？

> ID：12185280
> 
> 赞同：0
> 
> 时间：2012-08-29T19:37:30.347
> 
> 标签：php, iis, logging, iis-7, plesk

我已经在 Windows 7 + IIS7 机器上安装了带有 PHP5.2.17 的 Plesk Panel，它运行良好。但是我已经替换为 PHP5.3.16 并检查了 php.ini。但我现在收到 500 错误。如何获取有关错误的详细信息？错误日志在哪里？我试图在服务器面板（IIS/日志图标）上查看访问日志，但只记录了访问行。我尝试制作“log_errors=On and log_error=syslog”，但在系统日志中看不到任何相关记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:46:01.487

以下帖子应该会有所帮助：

[在 IIS 7.0 / 7.5 上显示 PHP 错误消息](http://blogs.staykov.net/2010/06/display-php-error-messages-on-iis-70-75.html)

# android - Android 2.3 浏览器无法渲染一些 CSS3 2D 变换

> ID：12185282
> 
> 赞同：6
> 
> 时间：2012-08-29T19:37:34.203
> 
> 标签：android, css, css-transforms, mobile-webkit, webkit-transform

我无法让 CSS3 2D 变换在 Android 2.3 中与任何使用默认 webkit 引擎的浏览器（例如默认浏览器、Dolphin HD、Amazon Kindle Fire Silk 浏览器等）一起工作。Android 2.3 webkit 引擎确实支持 2D 变换，我已经能够让一些具有 2D 变换的站点正确呈现，但不是我的站点！

**有谁知道 Android 2.3 中可能导致与 2D 转换发生冲突的任何问题？或者，有没有一种好方法可以只针对使用 Android 2.3 webkit 渲染引擎的浏览器的 css？**当我使用 Modernizr 时，在这种情况下它不起作用，因为 Android 2.3 浏览器对 2D 转换测试呈阳性。

这是我的网站：http: [//StevenGerner.com](http://StevenGerner.com)。在首页上，我将两个元素旋转 -90 度（站点标题和一个 h2 元素），并且两者都不会在 android 2.3 浏览器上旋转。我什至尝试过其他 css 转换，但似乎没有任何转换。如果我将整个页面剥离为基本页面，那么转换工作完美无缺，所以我的网站上可能还有其他冲突，我就是不知道是什么！这是特定于转换的 CSS：

```
//Applied to the h2 element which says 'howdy' at the top of the page
    #about-front h2 {
        display: inline-block;
        float: left;
        -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=4)"\9;
        -webkit-transform: rotate(-90deg);
        -webkit-transform-origin: 170% 170%;
        -moz-transform: rotate(-90deg);
        -moz-transform-origin: 170% 170%;
        -ms-transform: rotate(-90deg);
        -ms-transform-origin: 170% 170%;
        -o-transform: rotate(-90deg);
        -o-transform-origin: 170% 170%;
        transform: rotate(-90deg);
        transform-origin: 170% 170%;
        width: 1em;
        text-shadow: -1px 0 #777, 0 2px #333, 2px 0 #333, 0 -1px #777;
    }

//Applied to the site title with a media query between 500px and 750px
    div#site_name {
        display: block;
        line-height: 0.85em;
        -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=4)"\9;
        -webkit-transform: rotate(-90deg);
        -webkit-transform-origin: 160% 130%;
        -moz-transform: rotate(-90deg);
        -moz-transform-origin: 160% 130%;
        -ms-transform: rotate(-90deg);
        -ms-transform-origin: 160% 130%;
        -o-transform: rotate(-90deg);
        -ms-transform-origin: 160% 130%;
        transform: rotate(-90deg);
        transform-origin: 160% 130%;
} 
```

该问题也可能适用于 Android 2.2；但是，我目前没有要测试的 2.2 设备。

我真的很感激任何想法、建议和建议！这让我发疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T08:09:51.400

> 笔记
> 
> Internet Explorer 5.5 或更高版本支持可用于实现类似效果的专有矩阵过滤器。
> 
> Gecko 14.0 删除了对 skew() 的实验性支持，但出于兼容性原因，它在 Gecko 15.0 中重新引入。由于它是非标准的并且将来可能会被删除，所以不要使用它。
> 
> Android 2.3 有一个错误，如果任何容器 div 具有 -webkit-transform，输入表单会在键入时“跳转”。

来源：[https ://developer.mozilla.org/en-US/docs/Web/CSS/transform](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)

更多：[https ://code.google.com/p/android/issues/detail?id=12451](https://code.google.com/p/android/issues/detail?id=12451)

# c# - 在 Protobuf-net v2 中模拟继承

> ID：12185285
> 
> 赞同：1
> 
> 时间：2012-08-29T19:37:43.517
> 
> 标签：c#, ios, ios5, protobuf-net

所以我有一个 .NET 服务器和一个 IOS 客户端，我正在尝试使用协议缓冲区来来回通信。在服务器上，我有一个包含 FormField 对象列表的对象，其中 FormField 实际上将成为 FormField 的子类型，例如 ButtonFormField。

在做了一些研究之后，我实现了类似这样的 .proto 文件：[Protobuf-net .proto file generation for inheritance](https://stackoverflow.com/questions/3717500/protobuf-net-proto-file-generation-for-inheritance)

这适用于从服务器到客户端的序列化。

不幸的是，当我将项目发送回服务器时，我收到错误，因为它试图在 CompiledSerializer.cs 第 49 行中将 FormField 转换为 ButtonFormField （这显然不起作用）。

这在 protobuf-net v2 中不起作用还是我做错了什么？我真的希望能让这个工作。

**编辑*** 我使用 protobuf-net v1 进行了尝试，它确实有效，所以我假设这种行为在 v2 中发生了变化。在 v2 中是否有另一种方法可以做到这一点，还是我现在停留在 v1 上？

**编辑 2：** 抱歉，Marc 耽搁了。这是一个精简的 .proto 和 C# 类。我正在使用 protoc 生成 IOS 类，所以我假设使用 protoc 生成 C++ 或 Java，因为客户端也会产生相同的效果。

**工作样本原型文件**

```
message PersonSelectionFormField {
}

message TextFormField {
}

message FormFieldDto {
  //Properties and optional properties truncated for brevity
  required int32 Id = 1;
  required int32 FieldTemplateId = 6;
  required int32 RowId = 9;  

  optional PersonSelectionFormField PersonSelectionFormField = 55;
  optional TextFormField TextFormField = 59;
} 
```

**课程**

```
namespace Sample.Fields
{
     //I get a list of FormFields back from the client
    [ProtoContract]
    [ProtoInclude(55, typeof(PersonSelectionFormField))]
    [ProtoInclude(59, typeof(TextFormField))]
    public class FormField:IFormField
    {
        //Cleaned up for brevity...There are virtual methods and fields 
        //getting overriden but they aren't relevant to the example

        [ProtoMember(1)]
        public int Id { get; set; }

        [ProtoMember(6)]
        [Required]
        public int FieldTemplateId { get; set; }

        [ProtoMember(9)]
        [Required]
        public int RowId { get; set; }
    }

    public class TextFormField:FormField
    {
        //Some overriden field / methods. 
        //None of the serialized fields are overriden
    }

    public class PersonSelectionFormField:FormField
    {
        //Some overriden field / methods. 
        //None of the serialized fields are overriden
    }   
} 
```

# wpf - CHM 帮助项目的自定义窗口

> ID：12185290
> 
> 赞同：1
> 
> 时间：2012-08-29T19:38:15.623
> 
> 标签：wpf, chm

我们正在 WPF 中开发并使用自定义无边框窗口，例如新的 Office 2013 窗口。现在我们正在使用 RoboHelp 创建 CHM 帮助。

我想知道是否有办法启动 CHM 文件，但以某种方式连接到它，以便它加载到我指定的自定义窗口中，而不是默认窗口。更好的是可以嵌入到 WPF 窗口中的某种 CHM 显示控件，类似于在 WPF 窗口中嵌入 HTML 浏览器控件的方式。这样我就可以使用 RoboHelp 编译 CHM 内容，但将其显示在我们自己的自定义无边框窗口中，该窗口是我们应用程序的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:42:47.627

自 Vista 以来 MS 不再支持 CHM，因此您可能需要考虑使用 RoboHelp 来生成 Webhelp，并按照您的描述在浏览器控件中显示它。如果需要，Webhelp 还通过 URL 支持上下文敏感性。

# heroku - 在heroku上阻止IP

> ID：12185291
> 
> 赞同：13
> 
> 时间：2012-08-29T19:38:24.737
> 
> 标签：heroku

我在 heroku 的文档或谷歌上都没有找到这个。通常这是在主机文件中完成的。有谁知道如何阻止heroku上的IP？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-12-14T21:57:20.697

自从第一次回答这个问题以来，Heroku 在他们的插件市场中添加了一个 Web 应用程序防火墙：[https ://elements.heroku.com/addons/expeditedwaf](https://elements.heroku.com/addons/expeditedwaf)

它可以阻止IP、UserAgent、Referrer、Country等的入站请求。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T07:11:55.683

Heroku 没有可用于阻止 IP 的防火墙，因此您必须在应用程序级别阻止它，或者您必须在您的应用程序前面放置某种代理以用于阻止知识产权。人们使用的一种常见方法是[CloudFlare](https://www.cloudflare.com/)，它支持阻止单个 IP、速率限制 IP 等。

如果您想在应用程序级别坚持阻止，并且正在使用 Ruby on Rails，那么这个问题和答案可能会给您想要的内容：[如何在 Heroku 上阻止或过滤 IP 地址？](https://stackoverflow.com/questions/12136260/how-can-you-block-or-filter-ip-addresses-on-heroku)

# c# - 如何在 C# 代码中获取与 SQL Developer 匹配的 Oracle DATE 列的值

> ID：12185294
> 
> 赞同：1
> 
> 时间：2012-08-29T19:38:28.137
> 
> 标签：c#, .net, oracle, oracle11g

好的，我正在尝试获取 Oracle 11g 中 DATE 列的字符串值以传递给 C# 应用程序中的 UI（通过 WCF）。我想准确地显示我在 SQL Developer 中拉回 C# 中的字符串变量的内容。相反，当我有一个 Date 列时，我得到了一些非常古怪的解析 DateTime 值。

例子：

```
SQL Developer 中的价值：26-AUG-75
VS 中来自 myDataRow[0].ToString() 的值：8/26/0975 12:00:00 AM

SQL Developer 中的价值：01-JUL-76
VS 中来自 myDataRow[0].ToString() 的值：7/1/1776 12:00:00 AM
```

Oracle 日期[看起来正确](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html)。VS 没有。谢谢，本富兰克林和[烈士爱德华](http://en.wikipedia.org/wiki/975)。有没有搞错？

SQL 很简单。我显然在更改字段名称，但就是这样：

```
SELECT DISTINCT(MyDate) FROM
User1.TableOfDates@DateTableLink 
WHERE MyDate IS NOT NULL ORDER BY
MyDate 
```

向数据库抛出 SQL 的共享代码也很简单。我将在这里对其进行大量审查，但到目前为止，它在其他任何地方都运行良好，而且我认为这里有重要的东西：

```
internal Oracle.DataAccess.Client.OracleConnection oracleConn;
...
DataTable dtReturn = new DataTable();
Oracle.DataAccess.Client.OracleCommand cmdTemp = null;
string strScrub = "";

// strScrub is magically loaded with SQL, which is, 
// if you grab it with a breakpoint here, after it's 
// scrubbed, equal to what I've written, above

cmdTemp = new Oracle.DataAccess.Client.OracleCommand(strScrub, this.oracleConn);
Oracle.DataAccess.Client.OracleDataReader dr = cmdTemp.ExecuteReader();
dtReturn.Load(dr);
dr.Dispose();
...
return dtReturn; 
```

那部分有效。我只在此处包含它，以防我应该注意使用 Oracle.DataAccess 的某些东西。一切都打开和关闭并收集得很好。我们每天在开发中通过它发送数百个命令，并且在部署中至少有数千个。

这是第一个值 (26-AUG-75) 的即时窗口中的一些信息，现在代表从上面的代码中提取`dr`的单个值：`DataRow``DataTable`

```
? DateTime.Parse(dr[0].ToString())
{8/26/0975 上午 12:00:00}
    日期：{8/26/0975 12:00:00 AM}
    天数：26
    DayOfWeek: 星期六
    日期：238
    小时：0
    种类：未指定
    毫秒：0
    分钟：0
    月：8
    第二：0
    滴答声：307569312000000000
    时间：{00:00:00}
    年份：975
```

只需`? dr[0]`-- 给出同样的结果：

```
?dr[0]
{8/26/0975 上午 12:00:00}
    日期：{8/26/0975 12:00:00 AM}
    天数：26
    DayOfWeek: 星期六
    日期：238
    小时：0
    种类：未指定
    毫秒：0
    分钟：0
    月：8
    第二：0
    滴答声：307569312000000000
    时间：{00:00:00}
    年份：975
```

现在有趣的是，当它只是 Oracle 中的一个日期时，它是一个 DateTime。也许我错过了关于 Oracle Dates 的一些东西......

```
? 博士[0].GetType()
{Name = "DateTime" FullName = "System.DateTime"}
```

无论如何，如果我能达到我在 SQL Developer 中看到的相同值（例如，26-AUG-75），我很好。我可以接受并做任何我想做的事情。

隐式转换在哪里进行，我怎样才能更早地进入那里？

我应该补充一点，我无法使用 SELECT 语句 & 获得创意`TO_CHAR`。这是一个相当复杂的自动化过程，它根据用户标准构建查询。因此，更改此 SELECT 将是“给机器一条鱼”而不是“教机器钓鱼”的答案。任何字段都可以是这种格式的日期，因此打开 GetType 值并在 C# 中解析一些创造性的方式是可以的，但更改 SQL 则不行。

**编辑**使用[这里](https://forums.oracle.com/forums/thread.jspa?messageID=9741114)的建议：

```
select dump(sysdate)today from dual; 
```

在上面的 SQL 中使用`dump`，从 SQL Developer 运行，我得到： `Typ=12 Len=7: 119,175,8,26,1,1,1`对于 26-AUG-75 的行。所以甲骨文得到了正确的日期。

按照[此处](https://forums.oracle.com/forums/message.jspa?messageID=9741251#9741251)找到的转换说明...

```
119 - 100 "excess" = 19 centuries == 1900
175 - 100 "excess" = 75     years ==   75 
```

那是1975年。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:39:26.140

您的问题尚不清楚，但我假设您实际上想要 1975 年和 1976 年？

我强烈怀疑值 0975 和 1776*实际上*是数据库中的值。您在 SQL Developer 中的值只是 2 位数年份的表示。我怀疑如果您执行另一种使用 4 位数年份表示的字符串转换，您会看到相同的值。

因此，验证上述内容正确后的选项：

*   找出坏数据是如何进入系统的，修复它（这样你就不会得到更多坏数据），然后修复现有数据。
*   通过忽略除年份的最后两位数字之外的所有数字，并强制它们进入适当的世纪来解决此问题。请注意，可能会有一些“有趣”的数据，就 2 月 29 日而言，在某些年份有效，但在其他年份无效......

顺便说一句，我强烈建议转换为`DateTime`而不是转换为字符串然后解析它。

# c# - 将 C# 连接到 Mysql 数据库

> ID：12185296
> 
> 赞同：1
> 
> 时间：2012-08-29T19:38:36.597
> 
> 标签：c#, mysql, database-connection

我想从 C# 连接到 mysql 服务器。我在网上找到了一些代码，但是某处有问题，因为我明白了

> System.Data.dll 中出现“System.ArgumentException”类型的第一次机会异常

错误。

```
private void Initialise()
    {
        server = "dns to server";
        database = "db_name";
        uid = "root";
        password = "password";
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" +
                            database + ";" + "UID=" +
                            uid + ";" + "PASSWORD=" + password + ";";
          OR
        connectionString = "Server=xxx.no-ip.org;Database=rdb;"+
                "Uid=root;Pwd=wHt2%Zt;";
        connection = new MySqlConnection(connectionString);
        if (this.OpenConnection() == true)
            Console.Out.Write("SUCCESS");
        else
            Console.Out.Write("ERROR");
    }

private bool OpenConnection()  {
            try   {
                connection.Open();
                return true;
            }
            catch (MySqlException ex){                    
                switch (ex.Number) {
                    case 0:
                        MessageBox.Show("Cannot connect to server.  Contact administrator");
                        break;    
                    case 1045:
                        MessageBox.Show("Invalid username/password, please try again");
                        break;
                }
                return false;
            }
        } 
```

我在控制台上没有收到任何消息。我添加`Mysql.Data`为我的项目的参考，我使用`using MySql.Data.MySqlClient;`

我也通过gui尝试了connectig，但没有运气。想法？

编辑 1：使用任一连接字符串，我的程序仍然无法正常工作。

编辑 2：添加了 OpenConnection 方法。

编辑3：[这是我得到的错误！](http://pastebin.com/WE2BZrav)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:41:12.853

ps

[http://www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql)

可能您需要更改方法...使用 webconfig 或应用程序配置来设置和读取配置中的连接字符串...

我还建议您阅读此...

[http://www.codeproject.com/Articles/12300/An-ASP-NET-Application-Using-a-MySQL-Database](http://www.codeproject.com/Articles/12300/An-ASP-NET-Application-Using-a-MySQL-Database)

**更新**

根据您更新的发现...可能有两个问题，首先仔细检查您的连接字符串，其次是检查用户“root”是否具有所需的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:42:17.837

看这里： http: [//www.connectionstrings.com/mysql](http://www.connectionstrings.com/mysql) 都有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:59:26.907

```
Server=myServerAddress;Port=1234;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

我认为问题出在您的数据库服务器上：

```
Server=xxx.no-ip.org 
```

您的应用似乎找不到服务器。检查防火墙。

您可以调试并设置中断点并检查它抛出的异常，而不仅仅是数量

# jquery - 无法在 iframe 中的元素上触发鼠标悬停

> ID：12185300
> 
> 赞同：2
> 
> 时间：2012-08-29T19:38:47.060
> 
> 标签：jquery, iframe, mouseevent, mouseover

在我的主页（A）中，有一个 iframe，它加载另一个具有简单元素的页面（B），在页面（B）的代码中，有一些 jQuery 将鼠标悬停事件处理程序绑定到简单元素上。

现在，我要做的是在 page(A) 中触发 mouseover 事件。但是，它似乎不想响应触发器（我确实进入了 iframe 的文档并正确获取了元素，但是当我尝试执行该元素 .mouseover() 时，它似乎被忽略了）。

我已经确认事件处理程序已正确附加到元素，因为当我将鼠标移到该 iframe 内的元素上时，事件处理程序确实会被触发。

但是，我发现的有趣的事情是，如果我在 iframe 中的那个简单元素上手动附加另一个事件处理程序（通过 Chrome 的控制台窗口），然后尝试在页面（A）上触发它，我手动添加的那个事件处理程序通过控制台确实被解雇了。

有人可以告诉我我忽略了什么吗？

# apache - PHP在第一次命中时解析错误，然后是分段错误

> ID：12185303
> 
> 赞同：1
> 
> 时间：2012-08-29T19:39:00.087
> 
> 标签：apache, segmentation-fault, php

为了演示目的，我正在尝试使旧网站栩栩如生。我遇到了一个 PHP 解析错误，我找不到它的含义！

这是我第一次点击页面时得到的错误（apache log）：

```
[error] [client 127.0.0.1] PHP Parse error:
parse error, expecting `T_STRING' or `'('' in .../functions.php on line 4 
```

（该行返回仅供阅读）我最终得到一个 500 错误。

这是我第二次点击页面时得到的唯一一行：

```
[notice] child pid 3734 exit signal Segmentation fault (11) 
```

这次我得到了一个 324: `ERR_EMPTY_RESPONSE`。

这是`functions.php`文件中的代码，**请**不要看很旧的代码；）。

```
<?php

// GoTo
function GoTo($page)
{
    global $FullPath;
    @header('Location:'.$FullPath.$page);
    echo "<script language='Javascript'>
                window.location='$page';
                </script>";
} 
```

你看到我缺少的解析错误了吗？

为什么我第二次出现段错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:41:36.793

您使用的 PHP 版本比网站刚成立时更新的版本，并且`goto`（遗憾地）自 PHP 5.3 以来一直是关键字。重命名您的函数（：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:41:35.257

不要`goto`用作函数名。

*goto 操作符可用于跳转到程序中的另一个部分*

更改函数的名称。

另请记住，您需要在之后退出脚本`header('Location: xxx');`并确保在该标题之前没有任何输出。

# c# - JSON.NET 解析错误

> ID：12185309
> 
> 赞同：1
> 
> 时间：2012-08-29T19:39:20.887
> 
> 标签：c#, json, json.net

我有以下 json 字符串：

```
{
  "message": "Keine Nachricht mit der Id 55555 gefunden!",
  "exception": {
    "__className": "Exception"
  },
  "request": {
    "__className": "Zend_Controller_Request_Http"
  }
} 
```

`JObject.Parse()`会给我这个错误：

```
"Additional text encountered after finished reading JSON content: . Path '', line 1, position 153." 
```

这个 JSON 字符串有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:48:45.087

它在 Ruby 中对我来说解析得很好。字符串（当它是一长行时）是 152 个字符，因此之后可能有一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:00:31.080

以下应用程序有效：

```
class Program
{
    static void Main(string[] args)
    {
        var x =
            @"{""message"": ""Keine Nachricht mit der Id 55555 gefunden!"",""exception"": {""__className"": ""Exception""},""request"": {""__className"": ""Zend_Controller_Request_Http""}}";

        var y = JObject.Parse(x);
    }
} 
```

检查以确保您认为传递给 Parse() 的字符串确实看起来像上面的字符串。

# objective-c - isEqualToString 让我得到错误的结果

> ID：12185318
> 
> 赞同：1
> 
> 时间：2012-08-29T19:39:56.497
> 
> 标签：objective-c, string

好吧，这是我的代码：

```
 AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSLog(@"Row %i at View: %@",indexPath.row, [delegate.my_condition objectAtIndex:indexPath.row]);
   if ([@"0" isEqualToString:[delegate.my_condition objectAtIndex:indexPath.row]]){
        NSLog(@"Store is closed");
   } else {
       NSLog(@"Store is open"); 
```

在日志中我确实看到：

```
2012-08-29 22:33:59.434 MyApp[2593:c07] Row 0 at View: 0
2012-08-29 22:33:59.435 MyApp[2593:c07] Store is open
2012-08-29 22:33:59.437 MyApp[2593:c07] Row 1 at View: 0
2012-08-29 22:33:59.438 MyApp[2593:c07] Store is open
2012-08-29 22:33:59.440 MyApp[2593:c07] Row 2 at View: 0
2012-08-29 22:33:59.441 MyApp[2593:c07] Store is open 
```

所以我确实看到该值为 0 但我没有看到 if 子句而是 else 子句。

这是为什么？

```
myCondition is NSMutableArray 
```

这就是我将项目添加到我的 NSMutableArray 的方式：

```
NSString *parsed=[res objectForKey:@"Data"];
    [delegate.my_condition addObject:parsed]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:43:52.863

这里没有足够的信息来提供明确的答案，但我看到了一些可能性。

1.  该对象是一个带有尾随空格的字符串。`"0"`不等于`"0 "`，但在日志输出中看起来是一样的。
2.  该对象实际上是一个`NSNumber`，值为 0。它在日志记录中看起来仍然相同，但它不是一个相等的对象。尝试检查对象的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:44:01.423

您确定其中的值`delegate.my_condition`是字符串吗？那些看起来可能是`NSNumber*`s。当然， an`NSNumber*`永远不会等于 an `NSString*`。

您可能想尝试类似的东西

```
if ([[delegate.my_condition objectAtIndex:indexPath.row] intValue] == 0) {
    NSLog(@"Store is closed");
} // ... 
```

相反，它假定值是表示数字的 an`NSNumber*`或 an 。`NSString*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:47:28.717

您的 NSMutableArray 是否返回字符串？这可能是因为您返回的是 NSNumber 类型而不是字符串。在这种情况下，您可能希望将 stringValue 放在对象的末尾以将其转换为字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T19:45:25.387

尝试翻转条件，如下所示：

```
if ([[delegate.my_condition objectAtIndex:indexPath.row] isEqualToString:@"0"]) { 
```

或者

```
NSString *_string = [delegate.my_condition objectAtIndex:indexPath.row];
if ([_string isEqualToString:@"0"]) { 
```

在这样的字符串上调用函数可能会遇到问题

# r - 如何计算特定国家的利润中位数

> ID：12185319
> 
> 赞同：0
> 
> 时间：2012-08-29T19:39:58.607
> 
> 标签：r, median

大家好，我是 R 新手，我正在尝试在数据框中计算特定国家/地区的利润中位数。我尝试过低于一个，但它对我不起作用。

```
data("Forbes2000", package = "HSAUR")
median(Forbes2000[,"sales","country"="United States"]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T19:41:32.633

```
median(Forbes2000$sales[Forbes2000$country == "United States"]) 
```

尽管如果不知道您的数据框是什么样子就很难确定。如果你想得到一个包含每个国家而不是一个国家中位数的 data.frame，你可以这样做：

```
library(plyr)
ddply(Forbes2000, "country", function(d) median(d$sales)) 
```

（您必须先安装[plyr](http://plyr.had.co.nz/)包，例如通过执行`install.packages("plyr")`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T00:07:39.383

David 已经回答了您最初的问题，并向您展示了一种查找多个国家中位数的方法。这是另一种方式：

您可以`split`按国家/地区为每个国家/地区`data.frame`创建一个`list``data.frame`

```
L <- split(Forbes2000, Forbes2000$country) 
```

`list`然后，您可以使用 `lapply`或将函数应用于 的每个组件`sapply`。(`sapply`将结果简化为数组，而 `lapply`返回 a `list`)

```
sapply(L, function(x) {
    median(x$sales)
}) 
```

或者，在一行中

```
sapply(split(Forbes2000, Forbes2000$country), function(x) median(x$sales)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T16:12:33.330

我能够使用美国州在数据框“结果 3”中计算第 11 列中指标的中值：

`tapply(outcome3[,11], outcome3$State, median)`

# java - 使用 Spring WebFlow 进行 Javascript 表单验证

> ID：12185321
> 
> 赞同：1
> 
> 时间：2012-08-29T19:40:10.257
> 
> 标签：java, javascript, spring, spring-webflow

我正在尝试找到一种方法来使用 Spring WebFlow 进行一些 Javascript 表单验证。

我的 JSP 中有以下代码

```
<INPUT tabIndex="46" value="Submit" type="submit" name="_eventId_submit" onClick="return dontSubmit();"> 
```

运行 JavaScript 函数并返回 false 是表单未通过验证，但我的页面仍在提交到服务器。如果我发现验证错误，我不想提交它

我也试过：

```
<INPUT tabIndex="46" value="Submit" type="submit" name="_eventId_submit" onsubmit="return dontSubmit();" 
```

如果发现错误，表单仍然会被提交。请我试过：

```
<form:form modelAttribute="visit" action="${flowExecutionUrl}" onsubmit="dontSubmit()"> 
```

表格再次提交，有无错误.....请在下面提供帮助，您将找到该功能

```
function dontSubmit()
{
    alert("DONT SUBMITTED TO SERVER");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:44:00.080

将`onsubmit`放在 FORM 标签上：

```
<FORM action="..." onsubmit="return checkrequired();" method="POST">
   <INPUT tabIndex="46" value="Submit" type="submit" name="_eventId_submit" > 
```

请参阅[JavaScript 表单验证](http://www.w3schools.com/js/js_form_validation.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:04:49.203

通常，表单验证是使用以下内容完成的：

```
<form action="server.action" method="POST" onSubmit="return validate(this);">
<input .../>

<input type="submit" name="Submit the form"/>
</form> 
```

`this`函数中的哪里`validate`是对表单的引用

# silverlight - 默认网站之外的 Silverlight、SignalR 和 IIS 应用程序

> ID：12185322
> 
> 赞同：3
> 
> 时间：2012-08-29T19:40:18.620
> 
> 标签：silverlight, iis, signalr

我在 Silverlight 5 应用程序中使用 SignalR。当我将我的应用程序托管在 IIS 7.5（即本地主机/子站点）默认网站的“应用程序”中时，Fiddler 显示“/signalr/negotiate”出现 404。

它似乎没有考虑 IIS 应用程序路径。它应该请求“/subsite/signalr/negotiate”。如何让它使用正确的 url 前缀？

更新：我不得不使用以下代码，因为如果不进行一些解析，似乎很难在 silverlight 应用程序中获取真正的根 URI。

```
string xapLocationUri = Application.Current.Host.Source.AbsoluteUri;  

string rootUri = xapLocationUri.Substring(0, xapLocationUri.IndexOf("/ClientBin"));  

hubConnection = new HubConnection(rootUri); 
```

如果您托管在 IIS 中根网站之外的应用程序中，则不能真正依赖以下内容：

```
Application.Current.Host.Source.GetComponents(UriComponents.Scheme | UriComponents.HostAndPort, UriFormat.Unescaped) 
```

# xpages - “更新时出错...”状态：12152 和状态：12029

> ID：12185327
> 
> 赞同：1
> 
> 时间：2012-08-29T19:40:32.930
> 
> 标签：xpages

我们在 XPages 应用程序中随机收到错误提示/警报：

“更新某些页面时出错...状态：12152”和“更新某些页面时出错...状态：12029”

我们似乎无法将其归结为任何事情。也许有人知道这些错误指的是什么，或者可能如何追踪它？谢谢。

![状态错误：](../Images/42d814a879df931cd6e26eb06b1bc853.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:03:56.727

HTTP 12152 错误通常指向网络连接问题，而不是任何特定于浏览器或 Domino 服务器的问题。12029 再次归结为无法与服务器建立连接。

听起来网络连接是断断续续的。我不知道有什么工具可以测试它，但我建议确认你在 PC 和服务器之间有良好、稳定的网络连接，并且它没有受到防火墙的负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:10:27.127

看起来您的应用程序正在尝试部分刷新屏幕上的内容，并且此部分刷新失败。这可能是因为在组件树中不再找到具有该 id 的组件。

查看具有 MainContent 和 refreshPanel3 id 的控件的 XPages 源代码，并找到这些控件的任何部分刷新。检查这些控件的渲染/加载属性以查看它们在某些情况下是否隐藏。如果不呈现控件并希望使用部分刷新来显示它，则必须部分刷新包含未呈现控件的外部组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:42:42.240

使用浏览器的网络调试（Chrome/IE/Firefox w Firebug 中的 F12）来获得真实的服务器响应，它通常包含带有更多信息的错误页面。部分刷新失败应该是最后一个 POST 请求。

# sql - 通过 osql.exe 运行脚本的问题

> ID：12185330
> 
> 赞同：4
> 
> 时间：2012-08-29T19:40:35.580
> 
> 标签：sql, osql

我尝试以这种格式为我的软件运行更新脚本：

**osql.exe -i "path\to\script" -U "user" -P "Password" -S "Location of sqlserver" -d "Database name" -n -b**

大多数脚本格式相同，并且都以 GO 结尾。其中很多运行得很好，但随机脚本总是返回错误并且不会运行。错误是“'∩'附近的语法不正确。在第 1 行。脚本可能就像插入一样简单，但它总是这个错误。我似乎无法在网上找到任何能够帮助我的东西。任何人都可以提供任何见解吗？

脚本手动运行得很好。另外有趣的是，如果我创建一个新的文本文档并将脚本粘贴到新文件中并将其更改为 .sql 并运行该文件，那么它就可以正常工作。我只会对所有“损坏”的脚本执行此操作，但它会继续发生在新的脚本上，并且最终也会发生在更改的脚本上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T19:45:31.600

很可能是因为文件被编码为 Unicode 而不是 UTF-8。您可以在 Notepad++ 以及其他免费实用程序中查看这一点。尝试将其转换为 UTF-8，看看是否有帮助。

**更新**

更正：正如评论中链接的文章所解释的，osql 可以解析编码为 UTF-16 (Unicode 1200) 或 'ANSI' (Windows-1252) 的文本文件，但它不能解析 UTF-8 编码的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:07:34.743

这听起来确实像一个 Unicode 问题（特别是因为复制/粘贴到新文档有效）。为了测试这一点，您可以使用`type`并重定向到一个临时文件，该文件将强制它为 ANSI，如下所示：

```
type \path\to\script.sql > %TEMP%\newscriptname.sql & osql.exe -i "%TEMP%\newscriptname.sql" -U "user" -P "Password" -S "Location of sqlserver" -d "Database name" -n -b 
```

# c# - 在后面的代码中将样式设置为文本块

> ID：12185334
> 
> 赞同：1
> 
> 时间：2012-08-29T19:40:52.270
> 
> 标签：c#, text, controls, windows-runtime

如何在 C# 中为 WinRT 应用程序的 TextBlock 设置样式？

```
textblock.Style = ??? 
```

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T00:37:45.537

“已批准”的答案并未解决如何在 C# 代码隐藏中执行此操作的问题，这正是我认为原始帖子所要求的。

要解决这个问题：例如，如果您有一个基于 Button 的模板化控件，它旨在显示 SearchBox 浮出控件，您可以在按钮初始化代码中定义浮出控件，如下所示：

```
 SearchBox searchBox = new SearchBox()
        {
            Style = Resources["SearchBoxCustomStyle"] as Style,
        }; 
```

在这里，自定义资源应用于 SearchBox.Style 属性。上述语法假定控件的 XAML 中有资源引用，例如：

```
<Button.Resources>
    <ResourceDictionary Source="ms-appx:///Control_Assembly_Name/StandardStyles.xaml">
    </ResourceDictionary>
</Button.Resources> 
```

在这种情况下，包含自定义按钮控件的项目包含定义资源“SearchBoxCustomStyle”的 StandardStyles.xaml，如下所示：

```
<Style x:Key="SearchBoxCustomStyle" TargetType="SearchBox">
.
.
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:17:05.167

在 XAML/C# 中，您可以在元素本身上设置单独的样式属性...

```
<TextBox Background="#FFEED908" FontSize="18" FontFamily="Stencil" x:Name="textBox"  Text="TextBox" /> 
```

如果您直接在 VS 中编辑 XAML，您将获得 Intellisense，它可以让您发现各种属性。但是，选择项目并使用“属性”对话框窗口以可视方式编辑属性要容易得多。

如果您想要一个可重复使用的样式，您必须选择元素，然后选择格式-> 编辑样式-> 编辑副本（或创建空...）。然后，您将处于样式设计模式，可以直观地或直接在 XAML 中更新样式。然后，您可以在其他元素上重用该样式，如下所示：

```
<TextBox Style="{StaticResource MyStyle}" x:Name="textBox"   /> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-29T19:43:19.087

您必须添加内联样式 (css) 格式。例如，如果您希望背景为黑色，高度为 20 像素，宽度为 20 像素，您可以：

```
textblock.style = "background-color: black; height: 20px; width: 20px;"; 
```

# php - php没有得到JSON对象

> ID：12185335
> 
> 赞同：3
> 
> 时间：2012-08-29T19:40:57.257
> 
> 标签：php, javascript, jquery, json

由于某种原因，我的 php 无法读取 javascript 创建的 json 对象。

这是打印到控制台的。

```
{
    "product": {
        "shipsTo": "Please choose …",
        "accountExec": "Please choose …",
        "product": "Please choose …",
        "productSize": "Please choose …",
        "qty": "",
        "comments": ""
    },
    "billing": {
        "billingName": "",
        "billingAttn": "",
        "billingAddress1": "",
        "billingAddress2": "",
        "billingCity": "",
        "billingState": "",
        "billingZip": "",
        "billingPhone": "",
        "billingFax": "",
        "billingEmail": "asdf@asdf.com"
    }
} 
```

我唯一填写的是`billingEmail`.

我通过从表单中收集大约 15 个字段并将它们放入 javascript 对象中来获取这些值

```
$(document).ready(function(){
    $('#CBS_submit').on("click", function(){

    //validate

    //collect information
    var orderInfo = {};
    orderInfo.product = {};
    orderInfo.billing = {};
    orderInfo.product.shipsTo     = $('#CBS_ship_to_select option:selected').val();
    orderInfo.product.accountExec = $('#CBS_account_execs_select option:selected').val();
    orderInfo.product.product     = $('#CBS_product_select option:selected').val();
    orderInfo.product.productSize = $('#CBS_product_size_select option:selected').val();
    orderInfo.product.qty         = $('#CBS_qty').val();
    orderInfo.product.comments    = $('#CBS_comments').val();
    //capture textarea information if other is selected for
    //shipsTo, product, productSize
    if ( get_selected_id ('CBS_ship_to_select') == 4 ) {
        orderInfo.product.shipsTo = $('#other_ship_to_text').val();
    }
    if ( get_selected_id ('CBS_product_select') == 4 ) {
        orderInfo.product.product = $('#other_product_text').val();
    }
    if ( get_selected_id ('CBS_product_size_select') == 4 ) {
        orderInfo.product.productSize = $('#other_product_size_text').val();
    }

    orderInfo.billing.billingName = $('#CBS_billing_name').val();
    orderInfo.billing.billingAttn = $('#CBS_billing_attn').val();
    orderInfo.billing.billingAddress1 = $('#CBS_billing_address1').val();
    orderInfo.billing.billingAddress2 = $('#CBS_billing_address2').val();
    orderInfo.billing.billingCity = $('#CBS_billing_city').val();
    orderInfo.billing.billingState = $('#CBS_billing_state').val();
    orderInfo.billing.billingZip = $('#CBS_billing_zip').val();
    orderInfo.billing.billingPhone = $('#CBS_billing_phone').val();
    orderInfo.billing.billingFax = $('#CBS_billing_fax').val();
    orderInfo.billing.billingEmail = $('#CBS_billing_email').val(); 

    var orderInfoJSON = JSON.stringify(orderInfo);
    console.log(orderInfoJSON);
        $.ajax({
           type: "POST",
           url: "queries/submit_order.php",
           data: "order_info=" + orderInfoJSON,
           dataType: "json",
           success: function (data) {
           console.log('test');

            }
        });
    });

}); 
```

然后在 php 页面上请求它并开始将它放入 html

```
<?php
$order_info = $_REQUEST['order_info'];

$order_info = json_decode($order_info, TRUE);
$msg = <<<EOD

<table style='width:600px; font-family:\"Helvetica\",\"Arial\", sans-serif; margin:15px' border="0"> 
```

访问变量，如

{$order_info['product']['product']}

但由于某种原因，我没有收到任何提交。即使当我复制/粘贴对象时

`$order_info = '{"product":{"shipsTo":"Please choose …","accountExec":"Please choose …","product":"Please choose …","productSize":"Please choose …","qty":"","comments":""},"billing":{"billingName":"","billingAttn":"","billingAddress1":"","billingAddress2":"","billingCity":"","billingState":"","billingZip":"","billingPhone":"","billingFax":"","billingEmail":"asdf@asdf.com"}}';` 有用

我究竟做错了什么？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:58:46.533

如果它包含特殊字符，则将其作为字符串发送可能会搞砸。尝试改用此方法：

```
$.ajax({
    type: "POST",
    url: "queries/submit_order.php",
    data: {order_info: orderInfoJSON},
    dataType: "json",
    success: function (data) {
        console.log('test');
    }
}); 
```

# ocaml - 初始化一个 int64 变量

> ID：12185343
> 
> 赞同：2
> 
> 时间：2012-08-29T19:41:15.303
> 
> 标签：ocaml

我尝试通过以下方式初始化 int64 变量：

```
let k:int64 = 4000000000;; 
```

但是我收到以下错误消息：

```
Error: Integer literal exceeds the range of representable integers of type int 
```

我如何将 k 初始化为 40 亿的值？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:53:50.577

您应该使用[`L`说明符](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual021.html#toc68)来指示`int64`文字：

`let k = 4000000000L;;`

或者，由于数字超出了 int32 的范围，您可以将其转换为`float`：

`let k = Int64.of_float 4000000000.;;`

# sql - 如何优化此 SQL 查询

> ID：12185344
> 
> 赞同：-1
> 
> 时间：2012-08-29T19:41:14.850
> 
> 标签：sql, oracle11g

我正在处理显示组件的 JSF 页面。我想问你如何优化这个 SQL 查询。我在家，无法访问 Oracle 服务器来测试查询：

```
SqlStatementSmall = "SELECT a.* FROM (SELECT b.*, rownum rn "
    + " FROM (select y.name, y.serialnumber, y.location, y.type, y.powerwatt,"
    + " y.dateadded, y.datedeployed, y.weightkg, y.uform, y.zonecage"
    + " FROM component x, componentstats y where x.componentstatsid = y.componentstatsid"
    + " and y.componenttypeid = 1122 ORDER BY %s %s) b"
    + " WHERE rownum <= ?) a" 
    + " WHERE rn > ?"; 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:44:52.103

当人们尝试在没有执行计划和任何统计信息的情况下进行查询性能调整时，我总是感到惊讶。您应该做的第一件事是制定执行计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:57:25.973

你好，

```
 select y.name, y.serialnumber, y.location, y.type, y.powerwatt,y.dateadded, y.datedeployed, y.weightkg, y.uform, y.zonecage, rownum rn
        from component x
        inner join componentstats y on x.componentstatsid = y.componentstatsid 
        where y.componenttypeid = 1122
        and rownum <= ?
        and rownum > ?
        ORDER BY %s %s 
```

更新注意：这不起作用，请参阅@Justin Cave 评论，谢谢

# perl - 从 Perl 数据结构打印表

> ID：12185352
> 
> 赞同：0
> 
> 时间：2012-08-29T19:41:43.413
> 
> 标签：perl, html-table, perl-data-structures, template-toolkit, dancer

我有一个 Perl 数据结构，如下所示：

```
%hash = (
    table_id => {
        column_1_header =>
            [
                 column_value_1,
                 column_value_2,
                 column_value_3
            ],
        column_2_header =>
            [
                 column_value_4,
                 column_value_5,
                 column_value_6,
                 column_value_7,
            ],
    },
); 
```

我的目标是生成一系列表格，其中的每一列都如结构中所述。例如：

```
<table id="table_id">
    <tbody>
        <tr>
            <td>column_1_header</td>
            <td>column_2_header</td>
        </tr>
        <tr>
            <td>column_value_1</td>
            <td>column_value_4</td>
        </tr>
        <tr>
            <td>column_value_2</td>
            <td>column_value_5</td>
        </tr>
        <tr>
            <td>column_value_3</td>
            <td>column_value_6</td>
        </tr>
        <tr>
            <td></td>
            <td>column_value_7</td>
        </tr>
    </tbody>
</table> 
```

我正在使用 Perl Dancer 和模板工具包。有哪些选项可以轻松制作这样的表格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:04:00.570

更改数据，使其按记录而不是按列分组。

```
use Algorithm::Loops qw( MapCarU );

for my $table_id (keys(%hash)) {
    my $table   = $hash{$table_id};
    my @headers = keys(%$table);
    my @recs = ( \@headers, MapCarU(sub { [ @_ ] }, @{$table}{@headers} ) );
    $hash{$table_id} = \@recs;
} 
```

上述变化

```
%hash = (
    table_id => {
        col_1_header => [ val_1, val_2, val_3 ],
        col_2_header => [ val_4, val_5, val_6, val_7 ],
    },
); 
```

到

```
%hash = (
    table_id => [
        [ col_1_header, col_2_header ],
        [ val_1,        val_4  ],
        [ val_2,        val_5  ],
        [ val_3,        val_6  ],
        [ undef,        val_7  ],
    ],
); 
```

请注意，数据结构不包含足够的信息来重新创建原始列顺序。

# c# - Ajax 状态在中止时返回 0

> ID：12185354
> 
> 赞同：0
> 
> 时间：2012-08-29T19:41:49.867
> 
> 标签：c#, ajax, status

我有一个我中止的 ajax 状态。它返回状态码 0。这是否表示中止或其他冲突？

# javascript - CSS/JS 动态宽度和字体大小

> ID：12185359
> 
> 赞同：0
> 
> 时间：2012-08-29T19:42:07.707
> 
> 标签：javascript, css, translation, dynamic-resizing

我有一个客户站点，其导航功能设计得非常严密（而不是由我设计）：

![幻灯片导航](../Images/5bd4c51041a5d74cb62d8fd768cb7844.png)

它由一个无序列表组成，每个列表项中有三个 DIV：

```
<ul id="application-tabs">
   <li>
      <div class="cv-home-applications-slideshow-tab-first"></div>
      <div class="cv-home-applications-slideshow-tab"><h4>Coffee</h4></div>
      <div class="cv-home-applications-slideshow-tab-right"></div>
   </li>
   <li>
      <div class="cv-home-applications-slideshow-tab-left"></div>
      <div class="cv-home-applications-slideshow-tab"><h4>Pet Food</h4></div>
      <div class="cv-home-applications-slideshow-tab-right"></div>
   </li>
</ul> 
```

内容位于中心 DIV 中，而第一个/左和右 DIV 创建有角度的选项卡按钮。

该客户还要求在页面顶部使用 Google 翻译实用程序。

我的问题是我需要导航元素始终从头到尾填充该空间。如果翻译产生一个较短的词——比如“Cafe”而不是“Coffee”——我需要它相应地扩展。

同样，如果它导致更长的单词，例如“Cerveza”，我需要减小字体大小。

我确定我需要结合 CSS 使用一些 javascript，但我不完全确定从哪里开始。任何援助将不胜感激。

谢谢，

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:08:12.553

这是一个解决方案的小提琴，它会自动将菜单隔开以适应[http://jsfiddle.net/nFRjc/](http://jsfiddle.net/nFRjc/)

```
var $j = jQuery.noConflict();
    $j(document).ready(function () {
        var containerWidth = $j('#application-tabs').width();
        var linksWidth = 0;
        $j('#application-tabs li div + div').children().each(function () {
            linksWidth += $j(this).width();
        });       
        var linkSpacing = Math.floor((containerWidth - linksWidth) / ($j('#application-tabs').children('li').length));
        $j('#application-tabs').children().not(':last-child').css('margin-right', linkSpacing + "px");
    });​ 
```

好的简单解决方案，如果字体太大，可以缩小字体大小。看到这个小提琴，链接字体大小是 100px，但脚本会缩小它们直到它们适合。 [http://jsfiddle.net/nFRjc/2/](http://jsfiddle.net/nFRjc/2/) 我刚刚添加了一个循环来检查各个链接的总宽度是否大于容器宽度，如果为真，则将字体大小减小 1。

```
var $j = jQuery.noConflict();
    $j(document).ready(function () {
        var containerWidth = $j('#application-tabs').width();
        var linksWidth = 0;
        $j('#application-tabs li div + div').children().each(function () {
            linksWidth += $j(this).width();
        });
        while (linksWidth >= (containerWidth - 100)) {
            $j('#application-tabs li div + div h4').css({'font-size': '-=1'});
            var linksWidth = 0;
            $j('#application-tabs li div + div').children().each(function () {
                linksWidth += $j(this).width();
            });
        }
        var linkSpacing = Math.floor((containerWidth - linksWidth) / ($j('#application-tabs').children('li').length));
        $j('#application-tabs').children().not(':last-child').css('margin-right', linkSpacing + "px");
    });​ 
```

# javascript - 新的 javascript 文件未加载到开发中的浏览器

> ID：12185366
> 
> 赞同：2
> 
> 时间：2012-08-29T19:42:33.567
> 
> 标签：javascript, ruby-on-rails-3, asset-pipeline

我刚开始为我的网站创建新的 javascript 功能，所以我为它创建了一个新文件。我为该文件编写了一些基本的警报和绑定，并重新加载了我的浏览器，以便我可以看到它的运行情况。但是什么也没发生。

我尝试使用 Firebug 来查看我的新 javascript 文件是否已加载，但似乎没有。

然后我尝试将我的 javascript 文件添加到 application.js 文件的 require 部分，以便加载它。但没有运气。我`//= require_tree .`也在那里，因此应该已经加载了新的 javascript 文件。

我尝试对我的其他 javascript 文件之一进行小幅更改，并注意到这些更改的文件已传送到浏览器。

现在我很困惑。是什么让我的新 javascript 文件无法访问我的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:07:40.387

根据评论，`tmp`在项目目录中删除并重新启动服务器`rails s`。

# javascript - 在第一次返回 false 后不要调用第二次点击事件

> ID：12185367
> 
> 赞同：3
> 
> 时间：2012-08-29T19:42:36.340
> 
> 标签：javascript, jquery

我遇到了弹出菜单的问题。我基本上有 2 个单击事件，一个用于打开菜单，`false`如果单击特定按钮，则返回，另一个单击事件在，`document`如果有人单击页面上除菜单以外的任何位置，则关闭菜单。

在下面的示例中，我不希望`click on document`在控制台中看到，但我会看到。我究竟做错了什么？

```
$('#content .addOptions').live("click",function(){
  console.log("click on addoptions")

    return false;
});

$(document).click(function () {
  console.log("click on document")

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:50:32.440

您需要防止单击事件冒泡到文档级别，因为您确实同时单击了菜单和包含它的文档。所以这样做：

```
$('#content .addOptions').on("click",function(e){
  e.stopPropagation();
  console.log("click on addoptions")

    return false;
}); 
```

还要注意使用`on`方法而不是`live`.

# c# - C# 网络表单日历

> ID：12185368
> 
> 赞同：0
> 
> 时间：2012-08-29T19:42:38.440
> 
> 标签：c#, webforms, calendar

有一个我正在寻找的网络表单有一个日历，用户可以从日历中选择日期，然后在文本框中显示选定的日期。当我从工具箱中选择日历时，如何最小化生成网页上的日历，使其不会一直显示日历，就像仅在选择下拉菜单时一样（它占用大量空间并且看起来很糟糕）。

试图像这样显示选定的日期，但它不起作用：

```
TextBox10.Text = "Date" +  Calendar1.SelectedDate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:46:06.047

从您尝试做的声音来看，我建议您使用[AJAX Control Toolkits Calendar Extender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)或使用[jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/)功能

# javascript - 使行为与?

> ID：12185373
> 
> 赞同：4
> 
> 时间：2012-08-29T19:42:49.220
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:47:12.793

丑陋，但使用隐藏的表单域：

```
<input type="hidden" id="clickedname" name="" value="" /> 
```

和

```
<a class="button" name="cancel" href="javascript:" onclick="$('#clickedname').value = this.name; $('#frmCompose').submit();">Cancel</a>
                                                            ^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

调整名称/值分配以适应 - 我不记得图像输入是如何提交自己的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:48:13.197

例如，您需要使用 JS 将值放入隐藏字段以进行提交，然后提交。

我建议编写一个微小的实用函数来替换您的`onclick`属性值。更好的是，在 DOM 准备好后附加功能，并保持不显眼和本地化。

```
<a class="button" href="#" onclick="submit('cancel')">Cancel</a> 
```

并`submit`按照您的期望完成，填写隐藏字段并提交表单。如果您真的根本无法更改后端，*那么*您也可以更改隐藏字段的名称，但是，呃；似乎更改后端以检查“操作”字段或更清洁的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:48:31.000

如果添加 name="cancel" 不起作用，听起来您可能需要对您的 javascript 有点花哨。就像是：

```
<input type="hidden" name="placeholder" value="true" />
<a class="button" name="cancel" href="javascript:" onclick="$(this).prev().attr('name', 'cancel'); $('#frmCompose').submit();">Cancel</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T19:49:42.543

只有表单元素（`<input>`、`<button>`、`<textarea>`、`<select>`等）向表单提交值。要让`<a>`标签这样做，您必须使用 JavaScript 将值添加到表单中。

一种方法是添加隐藏的表单元素，并设置其名称/值。

```
<a class="button" name="cancel" href="#">Cancel</a>
<input type="hidden" id="buttonClicked" /> 
```

然后使用 JavaScript (jQuery)：

```
$(function(){
    $('a.button').click(function(e){
        e.preventDefault();
        $('#buttonClicked').prop({
            name: $(this).prop('name'),
            value: $(this).prop('name')
        });
        $('#frmCompose').submit();
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T19:52:18.947

您可以将单个隐藏字段添加到表单

```
<input type="hidden" id="action" value=""/> 
```

然后在onclick中设置action的值

```
$("#action").attr("name","---ActionHere---"); 
```

所以取消变成：

```
<a class="button" href="javascript:" onclick='$("#action").attr("name","cancel");$("#frmCompose").submit();'>Cancel</a> 
```

发送变为：

```
<a class="button" href="javascript:" onclick='$("#action").attr("name","send");$("#frmCompose").submit();'>Send</a> 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T19:54:49.173

我认为最简单的方法就是`<input type="hidden" />`使用您想要的名称创建一个，如下所示：

```
<input type="hidden" name="cancel" />
<a class="button" href="javascript:" onclick="$('#frmCompose').submit();">Cancel</a> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T20:07:55.813

可能你不需要使用`<a>`？

html:

```
<button class="alike">Test</button>
<a href="#">Test</a>​ 
```

CSS：

```
button.alike,a {
 border: 0px;   
 text-decoration: underline;
 color: #00E;
 width: auto;
 cursor: pointer;
 background-color: inherit;
 font-family: 'Times New Roman';
 font-size: 16px;
}​ 
```

# python - 生成包含数组中每个元素组合的数组

> ID：12185374
> 
> 赞同：2
> 
> 时间：2012-08-29T19:42:49.133
> 
> 标签：python, list, combinations

我有一个包含大约 1000 个元素的数组，我想做的是从该数组生成大小为 100 的数组，其中包含元素的每个组合。例如，假设我有这个数组：

```
[A,B,C,D,E,F,G,H,I,J] 
```

将其拆分为大小为 2 的数组，我想要如下所示的数组：

```
[A,B]
[A,C]
[A,D]
[A,E]
[A,F]
[A,G]
[A,H]
[A,I]
[A,J]
[B,C]
...etc... 
```

我对如何做到这一点感到很困惑，任何建议都会有所帮助，

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T19:44:14.793

您可以使用[itertools](http://docs.python.org/py3k/library/itertools.html)模块中的[组合](http://docs.python.org/py3k/library/itertools.html#itertools.combinations)功能：

```
>>> from itertools import combinations
>>> list(combinations('ABCD', 2))
[('A', 'B'), ('A', 'C'), ('A', 'D'), ('B', 'C'), ('B', 'D'), ('C', 'D')] 
```

第一个参数是输入列表，第二个参数是生成的子序列的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:44:49.337

```
for a in array:
    for b in array:
        print [a, b] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:45:19.900

你可以试试这个：

```
lst = [A,B,C,D,E,F,G,H,I,J]
newlst = []
for i in lst:
    for y in lst:
        newlst.append([i,y])
print newlst 
```

# google-app-engine - 谷歌云 SQL 连接错误

> ID：12185375
> 
> 赞同：1
> 
> 时间：2012-08-29T19:42:49.370
> 
> 标签：google-app-engine

我是 Google App 引擎的新手，我尝试运行一个名为 guestbook 的演示应用程序，以使用 app-engine-sdk 版本 1-7.0 从 Google 应用引擎连接到 Google Cloud sql。但每次我收到一条错误消息时说“java.lang.IllegalStateException：系统属性 rdbms.driver 必须设置为 com.google.appengine.api.rdbms.dev.LocalRdbmsServiceLocalDriver.registerDriver(LocalRdbmsServiceLocalDriver.java:80)”。我仔细检查了我的代码，一切看起来都很好，但我仍然没有发现错误的来源。

以下是我的连接代码片段：

c = DriverManager.getConnection("jdbc:google:rdbms://my_instance/my_database");

并且 mysql-connector-java-5.1.21-bin 在类路径中，

我已经在谷歌应用引擎中启用了谷歌云 sql，

我已经检查了应用引擎中谷歌云实例的使用情况以及我的数据库实例、数据库名称、登录名和密码，

我正在使用 Eclipse Juno。

我想我错过了一些重要的事情；如果您知道我错过了什么，请您帮助我。

非常感谢您，

明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:53:51.503

一旦您对 GAE 不熟悉，我建议您尝试使用 Big Table 数据库。使用它，您不必在本地设置任何数据库。所以只要 eclipse 插件就足够你的第一次测试了。留言簿使用此数据库，因此更容易遵循本教程。

# ruby-on-rails - 有没有像 ActiveAdmin 这样的 Rails gem 来构建一个完整的数据驱动站点？

> ID：12185378
> 
> 赞同：2
> 
> 时间：2012-08-29T19:42:54.720
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我最近第一次使用 ActiveAdmin 为一个朋友的网站组合了一个非常快速的管理面板，并且对它的设置速度和简单性以及盒子外观的外观印象深刻。

我总是找到一些可以通过中央网站来协调信息的小项目，我想知道是否有人知道类似的宝石可以以同样的超级简单、快速和美观的方式将*整个网站拼凑在一起。*对于具有结构化内容/数据但没有真正“业务逻辑”的网站特别适用的通用东西（例如，可用于组织/显示/更新社区志愿者团体的信息和活动时间表的东西，PTA bake销售，酒吧琐事之夜等）？

我知道我可以在五分钟内把所有东西都搭起来，让它完全*发挥作用*，但这不是你可以指望 PTA 烘焙销售妈妈和朋友使用的那种东西，而且我真的没有时间致力于这种事情，我只是为了提供帮助。

我特别感兴趣的东西可以在一两个小时内随便拼凑起来，而不需要付出很大的努力（a la ActiveAdmin）并推到heroku，但有足够的干净，预制的样式和交互性看起来干净和开箱即用（javascripty 下拉菜单、合理的页面内容展示等）。

我知道对此有非 Rails 的答案，但我对 rails（甚至只是 ruby​​）特别感兴趣，所以我可以不时添加一些零碎的东西。

我做了一些谷歌搜索，但不幸的是，我不确定要搜索什么，这导致了问题 2：是否有任何此类宝石的精选存储库，我可以先在其中浏览，然后再在这样的网站上询问并使用人们的时间？

在这两种情况下，非常感谢您的帮助和教育！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:01:21.190

我是 Typus 的忠实粉丝：[http:](http://rubygems.org/gems/typus) //rubygems.org/gems/typus 。

它比 ActiveAdmin 更灵活。开箱即用的配置不是很好。

但是灵活性的权衡使它对数据驱动的站点更有用。它还支持多种类型的身份验证，并拥有自己的角色管理系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:53:06.400

按照 Brian 的建议，从 ruby​​-toolbox.com 的 Content Management & Blogging 部分尝试您的选择。

[Refinery CMS](http://refinerycms.com/)是一个相当不错的 CMS 系统。有几个引擎可用于解决一些常见问题。

但事实是，与您使用 wordpress 所获得的相比（易用性、可扩展性等），rails 世界中没有任何东西。

# c# - 尝试将 ref 添加到重载方法的参数时出错

> ID：12185379
> 
> 赞同：2
> 
> 时间：2012-08-29T19:42:58.333
> 
> 标签：c#

`ref`当我尝试添加到重载方法的参数时，为什么会出现以下错误？

> 'WindowsFormsApplication1.Form1.SearchProducts(int)' 的最佳重载方法匹配有一些无效参数
> 
> 参数 1：无法从 'ref System.Collections.Generic.List' 转换为 'int'

这是一些（简化的）代码：

```
public virtual IList<int> SearchProducts(int categoryId)
{
    List<int> categoryIds = new List<int>();
    if (categoryId > 0)
        categoryIds.Add(categoryId);
    return SearchProducts(ref categoryIds);
}

public virtual IList<int> SearchProducts(ref IList<int> categoryIds)
{
    return new List<int>();
} 
```

**编辑：**

你们中的一些人问我为什么`ref`在这种情况下需要它，答案是我可能不需要它，因为我可以清除列表并添加新元素（我不需要创建新的引用）。但问题不在于我需要或不需要的事实，而在于我`ref`为什么会出错。而且由于我没有找到答案（在谷歌搜索了一会儿之后），我认为这个问题很有趣，值得在这里提问。似乎你们中的一些人不认为这是一个好问题并投票关闭它......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T19:50:28.547

当您通过引用传递参数时，编译时类型必须与参数类型*完全相同。*

假设第二种方法写成：

```
public virtual IList<int> SearchProducts(ref IList<int> categoryIds)
{
    categoryIds = new int[10];
    return null;
} 
```

那必须编译，作为`int[]`implements `IList<int>`。但是，如果调用者*实际上*有一个 type 的变量，它会破坏类型安全，该变量`List<int>`现在引用了一个`int[]`...

`categoryIds`您可以通过在调用方法中声明的类型`IList<int>`而不是来解决此问题`List<int>`- 但我*强烈*怀疑您实际上并不想首先通过引用传递参数。需要这样做的情况相对较少。[您对C# 参数传递](http://pobox.com/~skeet/csharp/parameters.html)有多满意？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:50:31.893

尝试以下操作：

```
public virtual IList<int> SearchProducts(int categoryId)
{
    IList<int> categoryIds = new List<int>();
    if (categoryId > 0)
    categoryIds.Add(categoryId);
    return SearchProducts(ref categoryIds);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:51:58.753

您需要向该方法传递一个可分配的 IList(of int)。

```
IList<int> categoryIds = new List<int>(); 
```

# sublimetext2 - 在 sublime 中搜索带有通配符的文件

> ID：12185384
> 
> 赞同：31
> 
> 时间：2012-08-29T19:43:25.670
> 
> 标签：sublimetext2

在 sublime 文本编辑器中，如何在目录中递归搜索仅某些文件类型？例如，在所有 *.cc 和 *.h 文件的目录中？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-13T03:32:04.227

在 Find 'Where' 字段中指定路径，并在以逗号分隔的路径后使用通配符。

例如`/path/to/search,*.cc,*.h`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-19T23:12:49.327

您还可以使用减号“-”字符排除文件类型：`/path/,-*.xml`

# c# - 从 UserControl 获取更新

> ID：12185385
> 
> 赞同：1
> 
> 时间：2012-08-29T19:43:25.280
> 
> 标签：c#, winforms, user-controls

有人能告诉我如何在我的 UserControl 中有一个功能，可以让主机 windowsform 知道控件在做什么吗？

例如，我的用户控件有一个文件浏览器，如果用户使用这个文件浏览器打开一个文件，我想在表单的状态条栏中写“正在加载文件”。

这需要使用事件吗？如果是这样，我怎么能在 usercontrol 中有一个事件来报告它所做的任何事情（那么我想我必须在 usercontrol 的所有方法中调用这个事件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:51:23.210

**简单的**

是的，在表单可以订阅的用户控件上公开一个事件。您应该使用标准事件模式：

```
class MyUserControl : UserControl
{
    public event EventHandler<EventArgs> FileOpened;

    protected virtual void OnFileOpened(EventArgs e)
    {
        EventHandler<EventArgs> handler = FileOpened;
        if (handler != null)
            handler(this, e);
    }
} 
```

然后，当文件打开时，您调用`OnFileOpened(EventArgs.Empty)`which 触发事件。

**使用自定义 EventArgs**

现在表单可能需要知道打开了什么文件。您可以在用户控件上公开表单可用于查找的属性，或者您可以在事件中提供该信息，如下所示：

```
public class FileOpenedEventArgs : EventArgs
{
    private string filename;
    public FileOpenedEventArgs(string filename)
    {
        this.filename = filename;
    }
    public string Filename { get { return filename; } }
}

class MyUserControl : UserControl
{
    public event EventHandler<FileOpenedEventArgs> FileOpened;

    protected virtual void OnFileOpened(FileOpenedEventArgs e)
    {
        EventHandler<FileOpenedEventArgs> handler = FileOpened;
        if (handler != null)
            handler(this, e);
    }
} 
```

然后你用`OnFileOpened(new FileOpenedEventArgs(filename))`.

**最佳**

创建事件处理程序`public event delegate Name;`时，您正在为对象上的委托分配存储空间。对象（尤其是控件）通常有大量从未订阅过的事件。这是一大堆未使用的分配存储。[框架中以EventHandlerList](http://msdn.microsoft.com/en-us/library/system.componentmodel.eventhandlerlist.aspx)的形式内置了优化。这个方便的对象仅在实际使用时才存储事件处理程序。所有`System.Windows.Forms.Control`对象都派生自`System.ComponentModel.Component`，并且它已经提供了一个（受保护的）EventHandlerList，您可以在派生的 Control 中访问它。

要使用它，您首先创建一个唯一标识您的事件的静态对象，然后手动提供`add {}`和方法。`remove {}`像这样：

```
class MyUserControl : UserControl
{
    private static readonly object FileOpenedKey = new Object();
    public event EventHandler<FileOpenedEventArgs> FileOpened
    {
        add { Events.AddHandler(FileOpenedKey, value); }
        remove { Events.RemoveHandler(FileOpenedKey, value); }
    }

    protected virtual void OnFileOpened(FileOpenedEventArgs e)
    {
        var handler = (EventHandler<FileOpenedEventArgs>)Events[FileOpenedKey];
        if (handler != null)
            handler(this, e);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:53:42.440

是的，您需要创建一个事件并订阅它。遵循事件标准模式的一项建议：

```
enum ControlStatus {Idle, LoadingFile, ...}

class StatusChangedEventArgs : EventArgs
{
    public ControlStatus Status {get; private set;}

    public StatusChangedEventArgs(ControlStatus status)
        : base()
    {
        this.Status = status;
    }
}

partial class MyControl : UserControl
{
    public ControlStatus Status {get; private set;}

    public event EventHandler<StatusChangedEventArgs> StatusChanged;

    protected virtual void OnStatusChanged(StatusChangedEventArgs e)
    {
        var hand = StatusChanged;
        if(hand != null) hand(this, e);
    }

    void LoadFiles()
    {
        ...

        Status = ControlStatus.LoadingFiles; 
        OnStatusChanged(new StatusChangedEventArgs(this.Status));

        ...

        Status = ControlStatus.Idle; 
        OnStatusChanged(new StatusChangedEventArgs(this.Status));
    }
}

partial class MyHostWindowsForm : Form
{
    public MyHostWindowsForm()
    {
        var ctl = new MyControl();
        ...
        ctl.StatusChanged += ctl_StatusChanged;
    }

    void ctl_StatusChanged(object sender, StatusChangedEventArgs e)
    {
        switch(e.Status)
        {
            case ControlStatus.Idle:
                statusStripBar.Text = null;
                break;
            case ControlStatus.LoadingFiles:
                statusStripBar.Text = "Loading file(s)";
                break;
            ...
        }
    }
} 
```

# c# - 将列表添加到 ReadOnlyCollection 或 AsReadOnly 的优势

> ID：12185387
> 
> 赞同：5
> 
> 时间：2012-08-29T19:43:31.890
> 
> 标签：c#, data-structures

```
List<string> dinosaurs = new List<string>();
dinosaurs.Add("Tyrannosaurus");
dinosaurs.Add("Amargasaurus");
dinosaurs.Add("Deinonychus");
dinosaurs.Add("Compsognathus"); 
```

1.  为什么我应该使用`ReadOnlyCollection`如下：

    ```
    var readOnlyDinosaurs = new ReadOnlyCollection<string>(dinosaurs); 
    ```

    代替：

    ```
    dinosaurs.AsReadOnly(); 
    ```

2.  将 List 设置为 ReadOnlyCollection 或 AsReadOnly 的真正优势是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T19:53:55.460

一般来说，它们是相同的，[正如 Erwin 所提到的](https://stackoverflow.com/a/12185429/1159478)。但是，有一个重要的案例它们不同。因为该`AsReadOnly`方法是泛型的，所以新创建的类型`ReadOnlyCollection`是推断出来的，没有具体列出。通常这只会为您节省一些打字时间，但对于匿名类型来说，它实际上很重要。如果您有需要使用的匿名对象列表`AsReadOnly`，而不是`new ReadOnlyCollection<ATypeThatHasNoName>`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T19:46:58.280

没有区别，如果你看一下 AsReadOnly() 的代码：

```
public ReadOnlyCollection<T> AsReadOnly()
{
    return new ReadOnlyCollection<T>(this);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T19:49:01.787

它们在功能上是等价的——但只是因为你从`List<T>`.

构造函数形式可以用 any 完成`IList<T>`，所以在某些情况下是唯一的选择。另一种形式更简洁一些，在某些人看来（我同意）更好地描述了你在做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:46:23.707

当您想**保证**没有人可以更改该*集合时，您应该使用 readonly 集合*。顺便说一句，这并不意味着调用者将无法更改该集合的*内容*。

```
var collection = List<object> {new SomeObject{...},
               new SomeObject{..}}; //SOME OBJECT IS REFERENCE TYPE    
var readonly =  new ReadOnlyCollection<string>(collection );    
readonly[0].SomeObjectProperty = SomeValue; //HERE ORIGINAL OBJECT IS CHANGED 
```

正如其他人所说，问题中存在的这两个电话之间没有区别。

# python - python httplib2 POST：如何设置“发布参数”？

> ID：12185394
> 
> 赞同：0
> 
> 时间：2012-08-29T19:43:59.723
> 
> 标签：python, post, urllib2

使用带有 urllib2 请求的 urllib2.open 将 xml 发布到站点时出现错误。我将数据参数设置为我需要发布的 xml 字符串，但我得到的错误是“XML 数据未在 POST 参数“xml”中发送。

有谁知道如何设置数据以使其出现在命名的“后参数”中？

谢谢你的帮助

代码是这样的：

```
req = urllib2.request(url=theurl,data = xml,headers = {'Content-type': 'application/xml'}
response = urllib2.urlopen(req) 
```

其中 xml 只是带有原始 xml 的字符串

如果我打印 req.data 它会给出我想要发布的 xml。但是接收站点希望在一个名为“xml”的 POST 参数中使用它。我不知道如何控制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:27:15.273

`data`应该是`'parameter_name': value`-type的字典

```
url = 'http://www.someserver.com/some/handler'
values = {'name' : 'Some Name',
          'location' : 'SomeCity',
          'xml': your_xml}

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req) 
```

# date - 在 ColdFusion 中修改日期

> ID：12185396
> 
> 赞同：1
> 
> 时间：2012-08-29T19:44:10.817
> 
> 标签：date, coldfusion

如何在coldfusion中调整日期以获取第二天凌晨1点？

日期取自数据库，并存储为字符串。我正在考虑这样做的方法是通过`CreateDateTime`并使用年、月、日 + 1 等填充时间和日期。

我只是担心下个月第二天就不行了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T19:56:26.980

使用 DateAdd() 您始终可以确保它将考虑当前日期的上下文。因此，如果它是 8 月 31 日，并且您添加了一天，它将正确地将日期设为 9 月 1 日。如果你在 12 月 31 日做同样的事情，它也会正确地切换年份。

```
<cfset nextDate = dateAdd("d", 1, now()) />
<cfset nextDateWithTime = createDateTime(year(nextDate), month(nextDate), day(nextDate), 1, 0, 0) />

<cfoutput>#nextDateWithTime#</cfoutput> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T19:57:30.060

假设日期是 CF 识别为日期的日期，并且仅包含日期，没有时间，您可以执行以下操作：

```
<cfscript>
function tomorrowOneAM(date) {
    var resultValue = DateAdd("d",1,date);
    resultValue = DateAdd("h",1,resultValue);
    return resultValue;
}

</cfscript> 
```

# ruby-on-rails - 通过 HTTPS 发布 Ruby on Rails

> ID：12185400
> 
> 赞同：1
> 
> 时间：2012-08-29T19:44:33.340
> 
> 标签：ruby-on-rails, post, https

我需要调用一个外部 url 从远程数据库中提取一些信息。

我尝试像这样设置我的电话：

```
post_params = {'a' => 'b', 'b' => 'c',}
resp = Net::HTTP.post_form(URI.parse('https:/my.remoteserver.com/'), post_params) 
```

但是，由于 url 是 HTTPS，这会返回 400 Bad Request。

但是，如果我将调用格式化为 GET，并执行以下操作：

```
url = URI.parse("https:/my.remoteserver.com?a=b&b=c")
result = Net::HTTP.start(url.host, use_ssl: true, verify_mode: OpenSSL::SSL::VERIFY_NONE) do
  |http| http.get url.request_uri, 'User-Agent' => 'MyLib v1.2'
end 
```

一切正常。不幸的是，在我的具体情况下，我不能使用 GET。我认为有一种方法可以通过 POST 做到这一点，但我只是不知道那会是什么。如果有人可以帮助我解决这个问题，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T20:45:16.250

另一个答案链接的关键部分，以及问题的原因可能是因为您需要`use_ssl = true`在`Net::HTTP`元素上设置：

例子：

```
post_params = {'a' => 'b', 'b' => 'c',}

uri = URI 'https:/my.remoteserver.com/'

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true if uri.scheme == 'https'

resp = http.post_form(uri, post_params) 
```

# java - 为什么 Lucene 不支持对现有文档进行任何类型的更新

> ID：12185406
> 
> 赞同：9
> 
> 时间：2012-08-29T19:45:06.543
> 
> 标签：java, search, lucene, immutability, information-retrieval

我的用例涉及索引一个 Lucene 文档，然后在以后的多个场合添加指向这个现有文档的术语，而不是为每个新术语删除和重新添加整个文档（因为性能，而不是保留原始术语）。

我知道文档不能真正更新。我的问题是*为什么？*

或者更准确地说，为什么不支持所有形式的更新（术语、存储字段）？
为什么不可能添加另一个术语来指向现有文档 - 从技术上讲：所需要的不仅仅是将现有的文档 ID 放在术语的发布列表中。为什么这么难？是否有一些不可变的统计数据？

是否有任何解决方法可以支持我将术语（索引字段）添加到现有文档的用例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:51:47.843

> 我知道文档不能真正更新。我的问题是为什么？

Gili，编辑文档会导致相关术语发布发生变化，由于术语发布列表结构，这是有问题的。过帐列表被排序并按顺序存储在内存中。因此，要将文档添加到术语的发布列表中，您必须给它更高的值，`doc id`这是通过删除并重新索引整个文档来完成的。

# sql-server - 如何搜索存储过程的名称？

> ID：12185410
> 
> 赞同：1
> 
> 时间：2012-08-29T19:45:28.137
> 
> 标签：sql-server, stored-procedures

我的数据库中有大量存储过程，我想在编写新过程之前看看其中一个是否能完成我的任务。我将如何仅搜索现有存储过程的名称（而不是内容）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T19:49:57.760

SQL Server 2005+：

```
SELECT name FROM sys.procedures WHERE name LIKE '%search_text%'; 
```

SQL Server 2000：

```
SELECT name FROM sysobjects WHERE name LIKE '%search_text%' AND xtype = 'P'; 
```

另一个好主意是建立一个合理的命名模式。如果您的命名约定是一致且合乎逻辑的，那么您根本不需要搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:45:28.137

```
SELECT DISTINCT OBJECT_NAME(id)
FROM syscomments
WHERE OBJECT_NAME(id)
LIKE '%search_text%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:49:32.873

```
SELECT  name
FROM    sys.objects
WHERE   type = 'P'
        AND name LIKE '%search_text%' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T02:55:52.063

上述方法都很好用，但更简单的方法是从 Red Gate 下载 SQL Search 的副本。它是一个免费的实用程序，可插入 SSMS 并允许您搜索整个服务器中的所有对象。

# java - 如何使用 iText 将文本插入点跳过到下一列？

> ID：12185423
> 
> 赞同：5
> 
> 时间：2012-08-29T19:46:20.707
> 
> 标签：java, layout, itext

我正在使用 iText java lib 创建 3 列布局。

最大的问题是，第一列中的文本可能小于第二列或第二列中的第三或小于第三列。所以我需要将插入点移动到下一列。

我尝试使用 nextColumn 方法，该方法应该将插入点移动到下一列，但它将所有列移动到右侧。

也许有人有同样的问题并且知道如何做对吗？

感谢您的回答！

下图显示了我想要的。 ![列布局](../Images/6cfd1238dd3c9bbb8f5fa6cecc2d17ef.png)

**更新：**

好的，我会尝试改写这个问题。

这是我如何声明 3 列的代码：

```
MultiColumnText columnsFooter = new MultiColumnText(210f);
columnsFooter.addRegularColumns(document.left() - 10f,
    document.right(), 0, 3);
columnsFooter.setAlignment(Element.ALIGN_CENTER); 
```

我有 3 列带有标题和每列中的一些文本。文本取决于用户今天输入了多少文本。如果用户填写了文本限制，则可以，因为第一列已填写，第二个文本进入第二列（第二个文本从第二列开始）。

但是，如果用户没有填写第一列或第二列的文本限制，则下一个从未完全填满的列开始写入。

IE

这没关系，因为第一列和第二列已完全填满。

![在此处输入图像描述](../Images/ae72a6e8e2dd5fb7d4c07b2ef75e280b.png)

这很糟糕，因为第一列没有完全填满，第二列文本从第一列开始。因此，如果文本没有完全填满，我需要在 HEADER 2 和 3 之前添加分栏符以获得良好的布局结构。

![在此处输入图像描述](../Images/51ef1a640f66e1ab38ec15478a75e50e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T12:48:22.557

你能改写一下这个问题吗？因为我不明白。什么是插入点？我写了一本关于 iText 的书，我几乎可以用 ColumnText 做任何我想做的事情，所以澄清你想要什么可能符合你的兴趣。

问题还不清楚，但图片说了一千个字。我给你做了一个例子，有 4 列和 5 篇文章：

```
 import java.io.FileOutputStream;
import java.io.IOException;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.ColumnText;
import com.itextpdf.text.pdf.PdfWriter;

public class ColumnTextExample {

    /** Definition of four columns */
    public static final float[][] COLUMNS = {
        { 36, 36, 224, 579 } , { 230, 36, 418, 579 },
        { 424, 36, 612, 579 } , { 618, 36, 806, 579 }
    };

    public static final String ARTICLE1 = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";
    public static final String ARTICLE2 = ARTICLE1 + " " + ARTICLE1 + " " + ARTICLE1;
    public static final String ARTICLE3 = ARTICLE1 + " " + ARTICLE1;
public static final String[] ARTICLES = { "HEADER 1\n" + ARTICLE1, "HEADER 2\n" + ARTICLE2, "HEADER 3\n" + ARTICLE3, "HEADER 4\n" + ARTICLE1, "HEADER 5\n" + ARTICLE3 };

    public static void main(String[] args) throws IOException, DocumentException {
        // step 1
        Document document = new Document(PageSize.A4.rotate());
        // step 2
        PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("columns.pdf"));
        // step 3
        document.open();
        // step 4
        ColumnText ct = new ColumnText(writer.getDirectContent());
        int column = 0;
        ct.setSimpleColumn(
            COLUMNS[column][0], COLUMNS[column][1],
            COLUMNS[column][2], COLUMNS[column][3]);
        int status = ColumnText.START_COLUMN;
        for (String article : ARTICLES) {
            ct.addElement(new Paragraph(article));
            status = ct.go();
            while (ColumnText.hasMoreText(status)) {
                column = nextColumn(document, column, ct);
                status = ct.go();
            }
            column = nextColumn(document, column, ct);
        }
        // step 5
        document.close();
    }

    public static int nextColumn(Document document, int column, ColumnText ct) {
        column = (column + 1) % 4;
        if (column == 0)
            document.newPage();
        ct.setSimpleColumn(
                COLUMNS[column][0], COLUMNS[column][1],
                COLUMNS[column][2], COLUMNS[column][3]);
        return column;
    }
} 
```

第一篇文章适合第一列，留下半列开放。第二篇文章我们跳到下一栏。这不适合第二列：它需要一列半。第三条适合第四列，但是第四条我们需要跳到下一页，以此类推…… ![在此处输入图像描述](../Images/871f8e4598dae97f0fef099f949d5b2b.png)

# android - 我无法在 monodroid 中发布应用程序

> ID：12185425
> 
> 赞同：2
> 
> 时间：2012-08-29T19:46:23.093
> 
> 标签：android, xamarin.android, web-reference

我一直在调试模式下使用 monodroid，但现在我的应用程序已完成测试，我想将其发布到设备，然后发布到谷歌游戏商店，我收到以下错误

```
`Error  1   Could not load file or assembly 'Mono.Android, Version=0.0.0.0, Culture=neutral, PublicKeyToken=c4c4237547e4b6cd' or one of its dependencies. Strong name validation failed. (Exception from HRESULT: 0x8013141A)   C:\...\SGEN com.Project` 
```

我在谷歌搜索错误[Xamarin Bug](https://bugzilla.xamarin.com/show_bug.cgi?id=6429)时发现了这一点，但我真的不明白如何制作它，以便我的应用程序可以工作。有人可以帮帮我吗？

编辑：显然错误是由使用网络引用引起的，报告的错误建议将网络引用移动到一个单独的库，该库不将自身引用到单引用，知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:19:04.043

我能够通过以下方式解决此问题：

*   在我的解决方案中添加了一个新项目
*   为这个新项目添加了我的网络参考
*   从我的原始项目中删除了我的网络参考
*   在原项目上增加了对新项目的引用
*   使用新项目 Web 引用命名空间来引用我的 Web 引用

通过这种方式，将 Web 引用放在不引用 Mono.Android 本身的项目中，应用程序能够毫无问题地发布

# php - 尝试导出图像时 file_put_contents() 发出错误

> ID：12185428
> 
> 赞同：4
> 
> 时间：2012-08-29T19:46:45.587
> 
> 标签：php

我通过将许多图像复制到新图像中来创建图像。在我程序的最后一步中，我试图将此文件导出到一个文件夹中。

代码如下：

```
<?php

        require_once "../shdp/simple_html_dom.php";

        $next = "http://www.pidjin.net/2012/08/28/of-my-own/";
        $html = file_get_html($next);
        $imageList = $html->find('div[class=episode] p img');

        $newHeight = 0;

        for($iii=0; $iii<count($imageList); $iii++){
            $storage[$iii] = $imageList[$iii]->src;
            $img[$iii] = imagecreatefromstring(file_get_contents($storage[$iii]));

            $width[$iii] = imagesx($img[$iii]);
            $height[$iii] = imagesy($img[$iii]);

            $newHeight += ($height[$iii] + 30);
        }

        $newWidth = max($width);
        $cummDestHeight = 0;

        $export = imagecreatetruecolor($newWidth, $newHeight);
        imagefill($export, 0,0, 0xFFFFFF);

        for($iii=0;$iii<count($img);$iii++){
            imagecopy($export, $img[$iii], 0, $cummDestHeight, 0, 0, $width[$iii], $height[$iii]);
            $cummDestHeight += $height[$iii] + 30;
        }

        $bits = explode('/',$next);
        file_put_contents("../pidjin/$bits[5]-$bits[4]-$bits[3].png",$export);
?> 
```

我收到的错误是这样的：

```
Warning: file_put_contents(): supplied resource is not a valid stream resource in E:\Web\Comics\pidjin.php on line 54 
```

**问题**：我不确定如何使 $export 成为有效的流资源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T19:49:48.767

$export 将是一个 GD 图像句柄。这**不是**您可以简单地转储到文件并期望获得 JPG 或 PNG 图像的东西。

为此，你应该这样做

```
imagepng($export, "../pidjin/$bits etc..."); 
```

这将为您创建 .PNG 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:50:01.760

有了另一个问题，我终于能够让代码正常工作。

**解决方案**：问题是我试图使用 file_put_contents 转储一个 GD 句柄，但事实证明，它并不那么简单。我被定向到`imagepng`将目录作为导出文件的第二个参数的函数。

**程序**：我制作了一个程序来下载网络漫画[Fredo 和 Pidjin](http://www.pridjin.net)的片段，以便以后无法访问互联网时可以阅读。该程序如下所示。

```
<?php

require_once "../shdp/simple_html_dom.php";

$next = "http://www.pidjin.net/2006/02/19/goofy-monday/";

$counter = 1;
while($next){

    $html = file_get_html($next);

    $imageList = $html->find('div[class=episode] p img');

    $newHeight = 0;

    for($iii=0; $iii<count($imageList); $iii++){
        $storage[$iii] = $imageList[$iii]->src;
        $img[$iii] = imagecreatefromstring(file_get_contents($storage[$iii]));

        $width[$iii] = imagesx($img[$iii]);
        $height[$iii] = imagesy($img[$iii]);

        $newHeight += ($height[$iii] + 30);
    }

    $newWidth = max($width);
    $cummDestHeight = 0;

    $export = imagecreatetruecolor($newWidth, $newHeight);
    imagefill($export, 0,0, 0xFFFFFF);

    for($iii=0;$iii<count($img);$iii++){
        imagecopy($export, $img[$iii], 0, $cummDestHeight, 0, 0, $width[$iii], $height[$iii]);
        $cummDestHeight += $height[$iii] + 30;
    }

    $bits = explode('/',$next);

    imagepng($export, "../pidjin/$counter ($bits[5]-$bits[4]-$bits[3]).png");

    $nextUrl = $html->find('span[class=next] a[rel=next]');
    $next = $nextUrl[0]->href;
    $counter++;
} 
```

?>

**注意：**我使用了 Simple HTML DOM Parser 来抓取源代码并查看 DOM。

干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T08:42:50.087

刚刚将“file_put_contents”替换为“imagejpeg($rotate, $file_new);”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T09:09:08.390

根据 PHP 手册，file_put_contents 将第二个参数作为字符串。图像文件不是字符串。请参阅上面的其他两个答案。这就是您保存图像的方式。尝试更多地使用手册。

# mysql - 当两列中的任何一列中都不存在值时选择

> ID：12185431
> 
> 赞同：2
> 
> 时间：2012-08-29T19:47:04.703
> 
> 标签：mysql

我有两个字段，`email`并且`addlEmail`. 如果给定的电子邮件地址不在任一字段中，我需要一个仅选择记录的选择。

尝试对两列使用 NOT IN（返回`Cardinality violation: 1241 Operand should contain 2 column(s):`：）

```
SELECT WebUsername, 
  WebPassword, 
  Active, 
  Email, 
  AddlEmail, 
  ShowYear 
FROM Exhibitors e 
WHERE e.Active = '-1' 
AND e.ShowYear = 2013 
AND (e.Email, e.AddlEmail) NOT IN ('test@test.com', 'test2@test.com')" 
```

我已经尝试过 AND 和 OR，它们由于明显的原因不起作用。

为了尝试彻底：

```
$emails = "'email@email.com', 'email2@email.com'";
// example table data for 2 fields in question
Row | Email              |   AddlEmail
1   | email@email.com    |   email3@email.com
2   | email4@email.com   |   email2@email.com
3   | email5@email.com   |   null
4   | email6@email.com   |   email7@email.com 
```

查询应该只返回第 3 行和第 4 行。

感谢您查看，如果您需要进一步说明，请告诉我。

克里斯

编辑：响应发布的答案的示例表：

```
CREATE TABLE `doubleSelect` (
  `Email` varchar(255) DEFAULT NULL,
  `AddlEmail` varchar(255) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `doubleSelect` (`Email`, `AddlEmail`) VALUES
  ('email@email.com', 'email2@email.com'),
  ('email2@email.com', 'email3@email.com'),
  ('email4@email.com', 'email5@email.com'),
  ('email6@email.com', 'email@email.com'),
  (NULL, 'email@email.com'),
  ('email2@email.com', NULL); 
```

示例查询（不返回最后一行，它应该）：

```
SELECT *
  FROM `doubleSelect`
  WHERE Email NOT
  IN (
    'email@email.com'
  )
  AND AddlEmail NOT
  IN (
    'email@email.com'
  ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T19:49:02.903

简单地

```
AND e.Email NOT IN ('test@test.com', 'test2@test.com') 
AND e.AddlEmail NOT IN ('test@test.com', 'test2@test.com') 
```

包括 NULL 值：

```
SELECT *
FROM `doubleSelect`
WHERE (Email IS NULL or Email NOT IN ('email@email.com'))
      AND (AddlEmail IS NULL or AddlEmail NOT IN ('email@email.com')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:19:46.383

尝试这个

```
select * 
from Exhibitors 
where (email is null or email not in('email@email.com', 'email2@email.com'))  
and   (addlEmail is null or addlEmail not in ('email@email.com', 'email2@email.com')) 
```

# java - Google Drive API - 创建重复文件夹

> ID：12185433
> 
> 赞同：0
> 
> 时间：2012-08-29T19:47:24.683
> 
> 标签：java, google-drive-api, google-drive-realtime-api

我正在开发一个将文档上传到 Google Drive 的 Java 程序。我发现如果我尝试上传到现有文件夹，我必须确保它对现有文件夹区分大小写。如果我现有的文件夹位于标有 HDDocs 的根目录上，那么我必须将路径输入为“/HDDocs/10/05/01”。这样做可以正常工作，并且文件会上传到 Google Drive 上的正确路径 - 只要我使用 mu 个人 gmail 帐户。一旦我尝试在我的 Google Apps 帐户上执行此操作，就会创建一个全新的文件夹，也称为 HDDOcs，并且文件会加载到此文件夹中，而不是原始文件夹中。

所以在我的 Google App Drive 上，我有两个标记为 HDDocs 的根文件夹。

任何反馈都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:35:41.200

Google Drive 中的文件和文件夹名称不是唯一的，因此您不应依赖它来识别您的目标。相反，您应该始终使用唯一 ID。

# objective-c++ - NSWorkspacedidmountNotify/可能是通用的 NSWorkspace

> ID：12185435
> 
> 赞同：4
> 
> 时间：2012-08-29T19:47:31.723
> 
> 标签：objective-c++, nsworkspace

我是一名经验丰富的 C/C++ 程序员，但对 ObjC++ 不熟悉。我正在尝试在 Mac OSX 项目中捕获 NSWorkspacedidmountnofification。

我将回调添加到我的应用委托界面。

```
- (void)mediaMounted:(NSNotification *)notification; 
```

实施包括

```
- (void)mediaMounted:(NSNotification *)aNotification {
    NSLog(@"mediaMounted volume change.");
} 
```

在我的 applicationDidFinishLaunching 中，我将自己添加到通知中心。

```
NSNotificationCenter* ncenter = [[NSWorkspace sharedWorkspace] notificationCenter];
[ncenter addObserver: self
            selector: @selector(mediaMounted)
                name: NSWorkspaceDidMountNotification
              object: nil]; 
```

但是，当我运行并挂载磁盘时，我看到：

```
 2012-08-29 09:52:31.753 OSN[2203:903] -[OSNAppDelegate mediaMounted]: unrecognized selector sent to instance 0x101340af0
 2012-08-29 09:52:31.756 OSN[2203:903] -[OSNAppDelegate mediaMounted]: unrecognized selector sent to instance 0x101340af0 
```

我确认实例 0x101340af0 是我的 OSNAppDelegate 自我，但我不明白我还需要做什么才能识别选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:53:52.037

您的选择器应该是：

`mediaMounted:`不是`mediaMounted`。

您的实现将 NSNotification 作为参数，而不是什么。

您可以通过以下方式验证您的选择器：

```
if( [self respondsToSelector:@selector(mediaMounted)] )
{
  NSLog(@"Good to go");
} 
```

**例子：**

```
// this selector
@selector(test)

// will call this method
- (void)test{ }

// but this selector, noting the :
@selector(test:)

// would call this method
- (void)test:(id)sender{ } 
```

[您可以在此处](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)阅读有关选择器的信息。

# ssis - SSIS 2008 在执行 sql 任务出错后卡住

> ID：12185436
> 
> 赞同：0
> 
> 时间：2012-08-29T19:47:44.997
> 
> 标签：ssis

我正在处理这个 SSIS 包，我故意在执行 sql 任务上出错以测试失败优先约束，但它卡在错误所在的执行 sql 任务上。它应该遵循失败优先级，并在遇到错误时执行下一步。

基本上，执行 sql 任务的错误是我正在截断一个不存在的表......在现实生活中，它可能是由于拼写错误而发生的。

我已经将 delayvalidation 设置为 true，但它仍然无法正常工作。

[http://i69.photobucket.com/albums/i47/boxingpics/Untitled-2.jpg](http://i69.photobucket.com/albums/i47/boxingpics/Untitled-2.jpg)

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:05:33.917

在“优先约束编辑器”对话框中（右键单击优先约束并选择“编辑...”），选择“逻辑或。一个约束必须评估为真”。

[在 SSIS 中使用优先约束](http://www.simple-talk.com/sql/ssis/working-with-precedence-constraints-in-sql-server-integration-services/)：

> 逻辑与：指向受约束的可执行文件的所有优先约束必须评估为真才能使该可执行文件运行。这是默认选项。如果它被选中，箭头是实心的。
> 
> 逻辑或：只有一个指向受约束的可执行文件的优先约束必须评估为真才能使该可执行文件运行。如果选择此选项，则箭头为虚线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:07:21.603

我遇到了同样的问题，并通过执行以下操作解决了它：

1.  添加一个包级变量，类型为 Int 的 ErrorCount
2.  将 OnError 事件处理程序添加到您的执行 SQL 任务并创建一个脚本任务。

    2.a 此脚本任务应将 ErrorCount 变量作为 ReadWriteVariable

    2.b 在脚本的定义中，您可以执行以下操作：

    ```
    public void Main() {
        Dts.Variables["User::ErrorCount"].Value = int.Parse(Dts.Variables["User::ErrorCount"].Value.ToString()) + 1;
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
    ```

3.  然后在您的失败优先约束中，您将需要使用以下设置进行设置：

    求值操作：**表达式和约束**

    价值：**失败**

    表达式：**@[User::ErrorCount] > 0**

    多重约束：**逻辑或**

希望这会有所帮助

# c# - System.Web.dll 能否与针对 .NET 4 客户端配置文件的 WinForms 应用程序单独部署？

> ID：12185437
> 
> 赞同：1
> 
> 时间：2012-08-29T19:47:47.893
> 
> 标签：c#, deployment

我刚刚向我的 WinForms 应用程序添加了功能，该应用程序被大约 25 台客户端机器使用，它现在需要引用不在客户端配置文件中的 System.Web。

我试图弄清楚是否需要在每台机器上安装 .NET 4 完整框架，或者是否有可能解决这个问题。

我可以以某种方式包含 System.Web 并且*不*将我的目标框架从客户端配置文件中切换出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:09:10.460

您可以简单地将 System.Web 和此应用程序依赖的任何其他 DLL 包含在应用程序的工作目录中。您可以尝试在程序集引用属性中将属性“CopyLocal”设置为“True”，以使其更容易一些。

您也可以对它们进行 GAC，但如果将 .net 配置文件更新为完整版本，则可能会导致问题。

# html - html/css：加载栏（带缓冲区）

> ID：12185442
> 
> 赞同：0
> 
> 时间：2012-08-29T19:48:15.243
> 
> 标签：html, css, progress-bar

你们能帮我调整我的加载栏css和/或html吗？我当前的加载栏现在存在两个问题。

一是在边界外的左右两侧有一些多余的阴影从条中流出（这使得在适当缩放时看起来边界半径是像素化的）。我知道这是`box-shadow`' 的问题，因为当我删除 和 的 box shadow 属性时它不`#progress`存在`#buffer`。

![多余的阴影截图](../Images/05869524c655237a47c757b7c7312ff0.png)

另一个是很小的，但真的让我很烦。当进度/缓冲条刚开始加载（更改`style="width:0.4%"`）时，具有半径的 div 的形式会超出容器：

![div 离开容器](../Images/5fbd97081cd9cd1966327ca091f395a5.png)

我知道我能`overflow:hidden`做到（我`#loading_bar_container`已经`position:absolute`在 当我删除`#buffer`（所以只有一个栏）并删除`loading_bar`'s`position:relative`和`#progress`'s`position:absolute`时，我得到了我想要的场景：

![在此处输入图像描述](../Images/0481ba1fb1b8caeea231bf5cccba5ddd.png)

我将在此处添加代码的[jsfiddle 片段](http://jsfiddle.net/index/VeJNt/)，以便我们可以使用它。

干杯!

PS：我认为标签应该是加载栏，但我无法创建新标签，所以我将其添加为进度条。

**编辑：**我已经在 Chrome 中完成了这个测试，@Oriol 提到它在 FF 中运行良好。我已经检查过了，FF 确实按照我想要的方式显示它。我已经检查过 Safari，它显示的内容与 Chrome 相同。所以到目前为止，这个问题是针对 Chrome 和 Safari 的。没有用 IE 检查它（害怕）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:31:22.987

这似乎是由`position:relative`.

比较[http://jsfiddle.net/VeJNt/2/](http://jsfiddle.net/VeJNt/2/)和[http://jsfiddle.net/VeJNt/3/](http://jsfiddle.net/VeJNt/3/)

然后你可以使用

```
#progress {
    margin-top:-8px;
}​ 
```

而不是那些`position:relative`和`position:absolute`。

在这里看到它：http: [//jsfiddle.net/VeJNt/4/](http://jsfiddle.net/VeJNt/4/)

但是为什么你同时拥有`loading_bar_container`and `loading_bar`？

我认为你应该简化你的代码：http: [//jsfiddle.net/VeJNt/5/](http://jsfiddle.net/VeJNt/5/)

**编辑：**

如果您想要一个更通用的代码，它不依赖于条数，您可以使用

```
#loading_bar>div {
  border-radius:7px;
  height:100%;
  width:0%;
  margin-top:-8px;
}
#loading_bar>div:first-child {
  margin-top:0;
} 
```

然后你只需要为每个栏设置`background`and 。`box-shadow`

在这里看到它：http: [//jsfiddle.net/VeJNt/6/](http://jsfiddle.net/VeJNt/6/)

它不是累积的（第二个栏为-8px，第三个栏为-16px，...）因为当您设置边距时，如果您设置`position:relative`并设置`top`为-8px，-16px...

如果您设置`margin-top:10px`为一个元素，它会下降 10px，但不会与下一个元素重叠（以下所有元素也会下降 10px）。

然后，如果您设置`margin-top:-8px`为第二个栏，它会向上 8 像素，但在它和下一个栏之间不会出现任何空间（以下所有栏也向上 8 像素）。然后，你不必设置`margin-top:-16px`到第三条，你只需要-8px，因为第二条已经上升了8px。

# sql - 自动定义表和列，从 SPSS 等统计包创建 RDBMS

> ID：12185447
> 
> 赞同：0
> 
> 时间：2012-08-29T19:48:41.437
> 
> 标签：sql, r, rdbms, spss

什么是用于自动化或半自动化（即提供良好开端）从 SPSS 等统计包中获取矩形数据的过程的好工具，并且：

*   以数据库可以读取的文本格式保存主要矩形数据
*   为其他参考表保存附加文件（例如值标签）
*   使用 SQL 起草（可能是手工修饰）脚本或批处理文件以在数据库中创建表和列并将文本文件作为相关表中的数据行导入？

我怀疑完全自动化是可能的，但这一定是一个相当普遍的任务。我们有大约十几个这样的数据集，其中一些有几百个变量，我们想在关系数据库（Oracle，如果这有什么不同的话）中设置它们。除了高昂的成本之外，手工操作没有概念上的困难。

我觉得肯定有这样的工具可用，但我显然在错误的地方搜索或使用了错误的术语。

（编辑 - 添加了 R 标签，因为在我自己对此的回答中，我将它用作解决方案的一部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:18:47.387

在 SPSS Statistics 中，输出管理系统 (OMS) 可以将任何输出表捕获为数据集。统计数据可以将数据集直接写回数据库，也可以将其保存为 CSV 文件或其他格式。后者见保存翻译。

HTH，乔恩·派克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:38:45.510

好的，经过进一步调查（并感谢我给出的答案，虽然不完全有帮助），我现在赞成：

1.  将数据带入 R 例如使用外部包
2.  为我需要的每个参考表创建一个数据框
3.  用`as.numeric()`or`unclass()`版本替换原始因子，所以它只是数字，而不是标签
4.  `sqlSave()`使用RODBC 包将主要数据和参考表保存到数据库中。

像这样的一个小功能促进了第 2 步：

```
factorToRef <- function(x, field){
    tmp <- levels(x)
    tab <- data.frame(1:length(tmp), tmp)
    names(tab) <- paste(field, c("_ID","_NAME"), sep="")
    tab
} 
```

哪个可以给出类似的结果

```
> data(iris)
> factorToRef(iris$Species, "species" )
  species_ID species_NAME
1          1       setosa
2          2   versicolor
3          3    virginica 
```

这是要保存在数据库中的参考表的基础。

# java - 管理 jetty web 服务器中的共享库

> ID：12185451
> 
> 赞同：0
> 
> 时间：2012-08-29T19:49:01.897
> 
> 标签：java, tomcat, jetty, shared-libraries

**例如：**

我有一个主临时域

```
www.product.com 
```

对于每个客户端，我需要将单独的子域映射到具有相同端口（80）但具有不同实例名称（不同的 .wars 文件）的同一服务器

**我使用 apache 服务器作为映射码头实例的反向代理**

```
www.client1.product.com
www.client2.product.com
www.clientn.product.com 
```

据我所知，如果我启动码头实例，每个实例都将从单独的端口号开始

```
client1 war will start at port 3001
client2 war  will start at port 3002
client3 war will start at port 3003 
```

**更新：**

为了更好地了解我的架构，如果在 3002 端口上运行的 client2 jetty 实例由于运行时异常或内存泄漏或手动重启而进入 down 状态，则所有其他 jetty 实例都独立运行（类似于 google appengine 使用 jetty 背后的架构）

如果我访问

`www.client4.product.com`，我需要让码头应用程序在 3004 端口运行

所以在内部，每个客户端都在具有单独端口号的独特码头实例下运行

*`**What my question is all clients using same code base but with different database names , so libraries used in all client war files are same.**`*

**1）相同的库是否在内存上加载了 n 次（即对于 n 个码头实例）？**

**2）jetty是否有类似tomcat的共享lib文件夹，如果是需要步骤。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:56:37.050

每个库分别加载到内存中。同一台机器上的不同 JVM 进程在加载哪些类、使用的内存空间等方面不共享任何内容。

# mysql - FoxPro 和 MYSQL 事务使用远程视图

> ID：12185453
> 
> 赞同：1
> 
> 时间：2012-08-29T19:49:05.350
> 
> 标签：mysql, transactions, foxpro

有人在 FoxPro 远程视图上使用过 MYSQL 事务吗？您能否分享一些有关提交和回滚场景的示例。

这些代码不起作用，即使我发出回滚，记录仍然会被提交。

> lcStringConn = "Driver={MySQL ODBC 5.1 Driver};Port=3306;Server=localhost;Database=testdata;Uid=use;pwd=pass" =SQLSETPROP(0,"DispLogin",3)
> 
> lnHandle=SQLSTRINGCONNECT(lcStringConn)
> 
> 开放数据测试数据
> 
> 使用表1
> 
> =SQLEXEC(lnHandle, '开始交易')
> 
> 申请空白
> 
> 用 Trans(DateTime()) 复制 cfield1
> 
> =SQLExec(lnHandle, '回滚')
> 
> MyQry="SELECT * from table1" =SQLEXEC(lnHandle, MyQry ,"MyView", aRows)

谢谢。

编辑：我使用 InnoDB 并使用 SPT，事务有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:01:51.580

如果您想在 Foxpro 中将远程视图与外部数据源（例如 MYSQL）一起使用，我将使用数据库容器，例如“testdata”，然后在数据库容器中定义与您的数据源的连接。

创建连接后，您可以使用数据库容器来创建远程视图。只需右键单击数据库容器，即可为数据源中所需的表创建远程视图。在远程视图设计器中定义视图时，如果您希望此视图可更新，请确保选中“更新”复选框。

然后在您的代码中，您可以让 VFP 数据库容器完成繁重的工作。例如：

```
OPEN DATABASE testdata
USE myRemoteView         &&Assume 1 record retrieve from data source.

REPLACE someField WITH "SomeValue"

IF NOT TableUpdate( 0, .F., "myRemoteView" )
  * The update failed
  TableRevert(.F., "myRemoteView")
ENDIF 
```

试试这个。您可以做的另一件事是在 MySQL 中创建一个存储过程并将 Begin 和 End Transactions 放在那里。然后使用 VFP SQLEXEC() 调用这些 SP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:47:07.083

对于 Microsoft SQL，如果您使用 Transact SQL BEGIN TRANSACTION，VFP TableUpdate 将立即更新服务器并且您无法进行回滚。相反，您必须通过使用 SQLSetProp 发出隐式手动事务 (DB_TRANSMANUAL) 来启动事务：

```
nOldTransactionSetting = SQLGETPROP(_screen.sqlserver.handle,"Transactions")
IF nOldTransactionSetting < 0
    nOldTransactionSetting = 1
ENDIF
=SQLSetprop(_Screen.sqlserver.handle, "TRANSACTIONS", DB_TRANSMANUAL) && start manual transaction       
Begin Transaction       && start VFP transaction
lOkToCont = Tableupdate( 2, .T., 'CursorAdapter1' )
If lOkToCont
    lOkToCont = Tableupdate( 2, .T., 'CursorAdapter2' )
Endif
If lOkToCont        && Commit the transaction on the server and VFP.
    =SQLExec( _Screen.sqlserver.handle, 'IF @@TRANCOUNT > 0 COMMIT' )
    End Transaction
Else                && Rollback the transaction on the server and VFP.
    =SQLExec( _Screen.sqlserver.handle, 'IF @@TRANCOUNT > 0 ROLLBACK' )
    ROLLBACK
Endif
=SQLSetprop(_Screen.sqlserver.handle, "Transactions", nOldTransactionSetting) 
```

我怀疑你可能必须在 MySql 中做同样的事情。

# django - 如何为未绑定的表单字段提供数据？

> ID：12185454
> 
> 赞同：0
> 
> 时间：2012-08-29T19:49:11.033
> 
> 标签：django

以前我的模型中有一个单独的时间字段和一个日期字段，由于时区问题，我现在正试图将它们加入一个日期时间字段。

```
class Conversation(models.Model):
    conversation_datetime = models.DateTimeField() 
```

在我的表单中，我创建了两个新字段，一个用于时间，另一个用于日期，以便相应地提取每个字段中的日期时间。

```
class CallsForm(ModelForm):       
    conversation_date = forms.DateField(localize=True, widget=forms.DateInput())
    conversation_time = forms.TimeField(localize=True, widget=forms.TimeInput())

    def __init__(self, *args, **kwargs):
        super(CallsForm, self).__init__(*args, **kwargs)
        self.fields['conversation_date'] = self.instance.conversation_datetime.date()
        self.fields['conversation_time'] = self.instance.conversation_datetime.time() 
```

在我看来，我只是传入实例：

```
call = Conversation(conversation_datetime = datetime.datetime.utcnow().replace(tzinfo=utc))
form = CallsForm(instance=call) 
```

但是在我的模板中，字段不会被渲染。如果我注释掉 中的两行`__init__`，它就会完美呈现。这里有什么问题？

```
 # self.fields['conversation_date'] = self.instance.conversation_datetime.date()
   # self.fields['conversation_time'] = self.instance.conversation_datetime.time() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:00:07.407

您覆盖表单字段。可能你想设置初始值：

```
self.fields['conversation_date'].initial = self.instance.conversation_datetime.date()
self.fields['conversation_time'].initial = self.instance.conversation_datetime.time() 
```

# http - 如何从 HTTPS (SSL) 降级到 HTTP？我正在使用带有 SSL 的 IIS7.5、AJP 1.3 和 Tomcat 5.5

> ID：12185456
> 
> 赞同：1
> 
> 时间：2012-08-29T19:49:24.710
> 
> 标签：http, iis, tomcat, ssl, https

我正在运行带有 IIS 7.5、AJP 连接器 1.3 和启用了 SSL 的 Tomcat 5.5 的 Windows Server 2008 R2。我使用的是自签名证书，仅用于测试。我还在 web.xml 中添加了一个安全约束，以对名为 BeforeAuth.jsp 的特定页面强制实施 SSL。由于启用了 SSL，Tomcat 在同一网站上同时处理 HTTP 和 HTTPS 流量。

对于特定的 url 模式，我想做的是从 HTTPS 降级到 HTTP，但我不知道该怎么做。

在我的理想示例中，我有一个使用 HTTP 的登录页面。当用户提交页面时，它会导航到 BeforeAuth.jsp，即 HTTPS。然后，BeforeAuth.jsp 被提交并调用一个封闭源代码的第 3 方 Java 身份验证器（通过 HTTPS），并且在成功身份验证后，身份验证器负责将浏览器指向一个名为 home.jsp 的主页，即 HTTP。

所以，它是登录（HTTP）->验证（HTTPS）->主页（HTTP）。

我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:42:43.667

您要求的是重定向：只需构建您要重定向到的整个 URL，包括协议 ( `https:`)。

您真正想要做的是始终使用 SSL：如果您使用 SSL 进行身份验证，为什么不在会话的其余部分使用 SSL？从请求行（如果使用 URL 重写）或 cookie 中嗅探 JSESSIONID 与获取当前会话的用户密码一样好。除非用户的凭据比他们登录后可以访问的数据更有价值，否则最好的选择是始终使用 SSL。

# android - ScrollView 中的 ViewPager 没有滚动条

> ID：12185457
> 
> 赞同：0
> 
> 时间：2012-08-29T19:49:29.927
> 
> 标签：android, xml

在我的 xml 样式中，我在 ScrollView 中使用 android.support.v4.view.ViewPager。问题是我没有滚动条。当我从一页滑到另一页时，ViewPager 本身的行为也很奇怪。

将 ScrollView 设置为固定高度，例如 1200dip 有助于滚动但不显示 ViewPager。这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fadeScrollbars="true"
    android:fillViewport="true"
    android:scrollbars="vertical" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/menu"
            />

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </android.support.v4.view.ViewPager>
    </RelativeLayout>

</ScrollView> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:04:41.540

您没有滚动条的原因是因为您的`ViewPager`(and `RelativeLayout`) 将其高度设置为`match_parent`而不是`wrap_content`. 这会导致它与你的尺寸相匹配`ScrollView`，这首先违背了你的目的`ScrollView`。你的内容`ScrollView`应该比你`ScrollView`本身更高/更高。

总而言之，你应该将你`RelativeLayout`的身高和你`ViewPager`的身高都设置为`wrap_content`。此外，您没有设置您希望`RelativeLayout`孩子出现的顺序/位置；您可能想要更改（或`LinearLayout`改用）。例子：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fadeScrollbars="true"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/menu" />

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:42:09.263

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T20:33:58.200

我遇到了同样的问题，ViewPager 的行为很奇怪，我发现这是因为有时 ScrollView 重新获得焦点，而 ViewPager 然后失去焦点。如果您在 ScrollView 中有一个 ViewPager 并且您希望它始终保持焦点，当您触摸它并且 ScrollView 永远不会获得焦点时，就会这样做。

```
 mViewPager= (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(adapter);
    mViewPager.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            mViewPager.getParent().requestDisallowInterceptTouchEvent(true);
            return false;
        }
    }); 
```

# c# - 我将如何更新 ToolStripStatusLabel 中的鼠标位置

> ID：12185459
> 
> 赞同：0
> 
> 时间：2012-08-29T19:49:29.957
> 
> 标签：c#, winforms, mouse-position, toolstripstatuslabel

> **可能重复：**
> [如何跟踪鼠标 X/Y 位置并将其打印到标签上？](https://stackoverflow.com/questions/8871393/how-to-track-mouse-x-y-position-and-print-it-to-a-label)

我似乎遇到了一个看似小问题但似乎找不到答案的道路颠簸。这是我在这里提出的第一个问题，如果我错过了这个问题的解决方案，我深表歉意！

我有一个 toolStripStatusLabel 我想要鼠标的当前位置，我能够得到坐标：

```
private void mouseCoordinatesToolStripStatusLabel()
{
    this.toolStripStatusLabel1.Text = MousePosition.ToString();
    this.Refresh();
} 
```

但这只能在我加载时获得鼠标的位置，而不是在我移动鼠标时。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:48:17.997

这将为您提供鼠标光标坐标：

```
...
this.toolStripStatusLabel1.Text = Cursor.Position.X.ToString() + " - " + Cursor.Position.Y.ToString();
... 
```

如果您想在鼠标移动时更新，只需`MouseMove`从您的表单绑定事件并添加以前的代码。实际上，您的也可以，只是您似乎缺少绑定`MouseMove`事件。

# javascript - 基本 D3.js：创建或更新元素？

> ID：12185463
> 
> 赞同：4
> 
> 时间：2012-08-29T19:49:48.353
> 
> 标签：javascript, d3.js

基本的 D3.js 问题，掌握语法！

我正在使用 D3，如果它不存在，我想**创建**一个轴，或者如果它已经存在，则使用转换**更新它。**

我当前的代码如下，但此代码每次都重新创建轴 - 它不会转换。如何将其更改为过渡？

```
var xAxis = d3.svg.axis().scale(x).orient("bottom").ticks(4).tickSize(6, 3, 0);

updateGraphAndAxes(initialdata);

$('#button').click(function() { 
  updateGraphAndAxes(newdata);
});

function updateGraphAndAxes(newdata) { 
  // update x.domain here using newdata, then... 
  svg.append("g")
   .attr("class", "x axis")
   .attr("transform", "translate(0," + height + ")")
   .call(xAxis);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:44:04.933

按照[这个例子](http://natescodevault.com/js/line/)。方法是这样的：

```
var xAxisGroup = null;

function updateGraphAndAxes(newdata) { 

    var t = null;

    t = svg.transition().duration(1000);        // Set up transition

    // update x.domain using newdata... 

    if (!xAxisGroup) {
        xAxisGroup = svg.append("g")
            .attr("class", "xTick")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);           
    } else {
        t.select('.xTick').call(xAxis);     // Call xAxis on transition
    }
} 
```

# python - python比萨utf8问题

> ID：12185464
> 
> 赞同：1
> 
> 时间：2012-08-29T19:49:49.253
> 
> 标签：python, pdf, utf-8, pisa

我正在尝试将本地 HTML 转换为 PDF，但 html 文档包含非 ASCII 字符，最终在 PDF 中被破坏。为什么不适`pisa`用于所有 UTF-8 字符？

```
with open('file.html') as m:
  data = m.read()
  m.close()        
  pisa.CreatePDF(data, file('final.pdf', 'w')) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T21:32:36.347

知道了。这需要在您生成的内容的顶部：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T17:57:00.513

对我来说，它有助于使用**encoding='utf-8'**的编码选项：

```
pisa.CreatePDF(html.content, dest=pdfFile, encoding='utf-8') 
```

# php - 如何将搜索表单添加到 Magento 的面包屑/任何地方

> ID：12185475
> 
> 赞同：0
> 
> 时间：2012-08-29T19:50:37.263
> 
> 标签：php, magento, theming

在 Magento 中，我正在尝试在面包屑右侧实现一个搜索框，以便从任何内部页面轻松搜索。

我已经看到了向标题添加（顶部）搜索表单的教程，但标题中没有面包屑......

我尝试过的一些事情包括添加`echo $this->getChildHtml('newSearch');`我希望显示面包屑的位置、在我的主题的 categorysearch 文件夹中有一个 newSearch.phtml 以及添加 `<block type="core/template" name="new.search" as="newSearch" template="catalogsearch/newSearch.phtml" />`到我的 page.xml 以尝试注册它。

Magento 主题的良好文档很难获得，任何帮助都非常感谢，即使它是一本书或一组文档。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:53:26.830

我认为你说得对：

*   复制迷你搜索 .phtml 文件（到您的主题或基本/默认），给它一个新名称
*   将块声明添加到您的 page.xml（或 theme/layout/local.xml）
*   根据块的位置，在页面模板中添加“getChildHtml”

但是，“newSearch”名称是驼峰式的，这不是 .phtml 文件通常使用的名称（在标准安装中它们都是小写的）。

'newSearch' 在 un-camelCased 时扩展为 'new/sea​​rch'。尝试使用不带camelCase 的不同名称，例如只使用'search.phtml'。那不会随机变成别的东西。

# c# - Char to Single，不知道该怎么做

> ID：12185476
> 
> 赞同：0
> 
> 时间：2012-08-29T19:50:45.473
> 
> 标签：c#, converter, streamreader

我在**C# Win Forms**中有这段代码，它比较了一些数字，但它给了我以下错误：

**无效转换异常**

**从“Char”到“single”的无效转换。**

我不明白这个错误.. eny enlightment会很好:)

错误出现在这一行

```
float old_list_diff = Convert.ToSingle(ReadLine[0]) - Convert.ToSingle(ReadLine[i+1]); 
```

这是我的完整代码。：

```
private void button7_Click(object sender, EventArgs e)
{
  listBox1.Items.Clear();
  StreamReader SR = new StreamReader(Application.StartupPath + @"\old_Score_list.txt");
  string ReadLine = SR.ReadToEnd();

  for (int i = 0; i < 14; i++)
  {
      float new_list_diff = Convert.ToSingle(Score_list.Items[0]) - Convert.ToSingle(Score_list.Items[i+1]);
      float old_list_diff = Convert.ToSingle(ReadLine[0]) - Convert.ToSingle(ReadLine[i+1]);
      //int old_list_diff = 20;

      //skifter farve efter sidste i
      if (new_list_diff > old_list_diff == true)
      {
          //listBox1.ForeColor = Color.Green;
          listBox1.Items.Add("?");
      }
      else
      {
          //listBox1.ForeColor = Color.Red;
          listBox1.Items.Add("?");
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:59:42.577

```
string ReadLine = SR.ReadToEnd(); 
```

为您提供整个文件的大字符串。

```
ReadLine[0] 
```

给你第一个字符，所以可能只是“0”或“1”。不能将其转换为浮点数。

我猜你想要：

```
string[] lines = SR.ReadLines(); 
```

这会给你一个字符串数组，每行一个。那么`lines[0]`确实是（如果格式正确）一个可以转换为浮点数的字符串，但我不得不猜测一下你真正想要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:01:56.250

ReadLine 是一个字符串，而在 C# 中，字符串实际上是一个字符数组。您编写代码的方式是，程序将文件的第一行读入变量 ReadLine。似乎您试图将 ReadLine 视为字符串数组，而实际上它是字符数组。

所以，如果 ReadLine = "Hello World!"，那么 ReadLine[0] = "H"

我认为您想将文件中的行加载到字符串数组中。然后，您可能能够以编写代码的方式访问内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:57:37.500

好吧，您不能在 Char 和 Single （又名`float`）之间进行转换。您真的要将字符串的第一个*字符*和该字符串的第 2-15 个*字符*转换为`float`数字吗？如果确实如此，您可以尝试先将其转换为整数，然后将该整数转换为浮点数。但请注意， Char 和 Int32 之间的转换将返回*character 的 ASCII (unicode) 值，*我不确定这是否是你想要的......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T19:57:42.760

不支持此转换。请查看转换列表：http: [//msdn.microsoft.com/en-us/library/system.convert.tosingle.aspx](http://msdn.microsoft.com/en-us/library/system.convert.tosingle.aspx) 您可能希望先将这些字符转换为整数（例如 Int16）值.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T19:57:34.523

您可以获得 InvalidCastException，因为该值是非数字类型（如“ABCD”）或超出该类型的范围（数字太大或太小）。

如果您附加调试器并检查 ReadLine[0] 和 ReadLine[i+1] 中的值，您应该会看到它无法转换的值。

# javascript - javascript中下周末的日期时间返回无效日期

> ID：12185477
> 
> 赞同：2
> 
> 时间：2012-08-29T19:50:51.073
> 
> 标签：javascript, jquery, date, datetime

现在这个代码适用于明天和下个月 - 周末使用，除了现在它接近月底它会导致错误。我的 startdate 设置为 8/31/12，enddate 设置为 8/34/12（在 Sql 中转换为 DateTime 时显然会引发错误。）

我正在成功地进行数学运算以添加一天和一个月，但是在将天数添加到下个月时它会中断。我想我明白为什么会这样，它正在获取日期-“29”将其转换为 int 然后添加-我想我会在 12 月的“下个月”遇到同样的问题。

我的问题是将日期添加到 javascript 日期的正确方法（或任何工作方式）是什么，它可以理解当月的日期。

```
 var d = new Date();
        var startdate;
        var enddate;

         if ($('._tomorrow').attr("checked") == "checked") {
                startdate = [d.getMonth() + 1, d.getDate() + 1, d.getFullYear()].join('/');
                enddate = [d.getMonth() + 1, d.getDate() + 2, d.getFullYear()].join('/');
            }
            if ($('._weekend').attr("checked") == "checked") {
                startdate = [d.getMonth() + 1, d.getDate() + 6 - d.getDay(), d.getFullYear()].join('/');
                enddate = [d.getMonth() + 1, ( d.getDate() + 6 - d.getDay()) + 2, d.getFullYear()].join('/');
            }
            if ($('._nextmonth').attr("checked") == "checked") {
                startdate = [d.getMonth() + 2, 1, d.getFullYear()].join('/');
                enddate = [d.getMonth() + 2, 29 , d.getFullYear()].join('/');
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:54:21.867

您需要构建一个新的日期对象，其中包含调整后的值。现在你只是取一些随机数并增加它们，例如

```
31+3/8/2012 -> 34/8/2012, not 3/9/2012 
```

首先做这样的事情：

```
d.setMonth(d.getMonth()+ 2) 
```

在内部，JS 将适当地调整日/月/年，以解决您在每个周期结束时造成的“溢出”，并且仍然产生有效日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:54:41.950

要添加指定的天数，请创建一个新`Date`对象，然后使用`d.setDate(d.getDate() + n)`where`n`是需要添加的天数。

如果您然后调用，`getYear()`您会再次发现它们都已“更正”为有效值：`getMonth()``getDate()`

```
> d = new Date()
Wed Aug 29 2012 20:57:12 GMT+0100 (BST)
> [d.getDate(), d.getMonth() + 1]
[29, 8]
> d.setDate(d.getDate() + 10);
1347134232993
> [d.getDate(), d.getMonth() + 1]
[8, 9] 
```

添加月份并不是那么简单，因为您需要定义下个月比当前月份短时会发生什么 - 例如，“1 月 31 日之后的一个月”是什么日期？

不过，计算下个月的*开始很容易！*

```
var now = new Date();
var start = new Date(now.getFullYear(), now.getMonth(), now.getDate());
var end   = new Date(now.getFullYear(), now.getMonth(), now.getDate());

if ($('._tomorrow').is(':checked')) {
    start.setDate(now.getDate() + 1);
      end.setDate(now.getDate() + 2);
} else if ($('._weekend').is(':checked')) {
    start.setDate(now.getDate() + 6 - now.getDay());
      end.setDate(now.getDate() + 8 - now.getDay());
} else if ($('._nextmonth').is(':checked')) {
    start.setDate(1);
      end.setDate(1);
    start.setMonth(now.getMonth() + 1);
      end.setMonth(now.getMonth() + 2);
}

var startStr = [start.getMonth() + 1, start.getDate(), start.getFullYear()].join('/');
var endStr = [end.getMonth() + 1, end.getDate(), end.getFullYear()].join('/'); 
```

见[http://jsfiddle.net/alnitak/nTSMg/](http://jsfiddle.net/alnitak/nTSMg/)

# jquery - 如何从控制器中获取元素？

> ID：12185479
> 
> 赞同：0
> 
> 时间：2012-08-29T19:51:04.897
> 
> 标签：jquery, angularjs

我需要从 Controller 内部运行“遗留代码”并且需要获取元素

```
 function EmailformController($scope) {
     // here I need to get current dom/jqueried element, how to do it? 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:15:18.287

您将需要使用指令。你永远不应该在控制器内部处理 DOM 元素。只有您的业务逻辑应该进入控制器，DOM 操作应该进入指令。

# ruby-on-rails - Rails client_side_validation 自定义

> ID：12185482
> 
> 赞同：2
> 
> 时间：2012-08-29T19:51:15.010
> 
> 标签：ruby-on-rails, client-side-validation

我使用 client_side_validation gem 并有疑问：我`client_side_validation.rb` 有

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  unless html_tag =~ /^<label/
    %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  end
end 
```

在输出中我有：

```
<div>
  Name:
   <br>
   <div class="field_with_errors">
     <input id="user_username" type="text" size="30" name="user[username]"data-validate="true">
     <label class="message" for="user_username">Only letters allowed</label>
   </div>
</div> 
```

我不想使用标签：

```
<label class="message" for="user_username">Only letters allowed</label> 
```

我怎么能得到这样的东西：

```
<div class="message">Only letters allowed</div> 
```

我尝试放入我的 rb 文件：

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  unless html_tag =~ /^<label/
    %{<div class="field_with_errors">#{html_tag}<div class="message">#{instance.error_message.first}</div></div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  end
end 
```

并重新启动服务器 - 但在这种情况下，我只收到空`div`的类`message`

请帮助..如何将标准标签更改为 Div ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:53:36.433

在 client_side_validations 中覆盖错误消息有两个步骤，您必须修改 ActionView::Base.field_error_proc 或仅修改 rails.validations.coffee（或 JS）。

对于您要执行的操作，您不需要 field_error_proc 更改。你可以这样做：

```
window.ClientSideValidations.formBuilders['ActionView::Helpers::FormBuilder'] = {
  add: function(element, settings, message) {
    $(element).after($('<div>').attr('class', 'message').html(message));
  },
  remove: function(element, settings) {
    $(element).next().remove();
  }
} 
```

# c# - 更新方法不起作用/不会在 datagridview 中显示

> ID：12185485
> 
> 赞同：0
> 
> 时间：2012-08-29T19:51:24.823
> 
> 标签：c#, database, sql-update

我正在尝试计算平均值，然后将平均值存储在数据库中。我有一个绑定*到数据库的***datagridview**。我创建了一个*更新方法***UpdateAvgSkill**，它*使用主键*来更新平均值。

 *****如果我的更新方法工作正常，**结果应该显示在我的 datagridview**中。然而这不会发生。下面是我用来更新平均值的代码。

```
playerListTableAdapter.UpdateAvgSkill(
           Convert.ToDecimal(average), 
           Convert.ToDecimal(dgvPlayers.CurrentRow.Cells[0].Value));
playerListTableAdapter.Update(dsPlayerTeam.PlayerList); 
```

我应该使用其他方法来让数据库自行更新吗？关于我应该如何去做的任何建议？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T03:17:11.440

在花了一些时间调试代码中的**UpdageAvgSkill()**方法之后，我们能够确认我们用来计算平均技能的 datagridview 中的值在我们运行该方法之前没有被提交到数据库，所以它针对空值运行。

问题实际上是在尝试更新此问题中讨论的平均技能之前将新的单元格值提交到数据库：

[在行更改之前提交 DataGridView 中的更改](https://stackoverflow.com/questions/12203320/commiting-changes-in-datagridview-before-row-change)

谢谢您的帮助。*****

# html - AS3 在文章中创建 HTML 链接

> ID：12185486
> 
> 赞同：0
> 
> 时间：2012-08-29T19:51:29.987
> 
> 标签：html, regex, actionscript-3, hyperlink

我有一个在本地工作的 Wiki 程序，它可以组织文章并添加链接到函数的 HTML 链接（以加载后续文章）。

一些代码可以帮助您解决问题：

```
for each (var keyword:String in thisArticleArray) {
  var pattern:RegExp = new RegExp(keyword,'/gi');
  contents = contents.replace(pattern,"<a href=\"event:" + "$&" + "\"><b>" + keyword + "</b></a>");
} 
```

无论如何，想法是这些链接链接到新文章。那还不错。但是现在，我的文章名称中包含其他文章名称。例如“Apple”和“Apple Pie”。我将如何区分这些？现在它只是在它击中那个区域时搞砸了......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:04:58.137

`thisArticleArray`好吧，我会简单地按字符串长度进行反向排序。这样，代码将始终尝试在较短的匹配之前匹配较长的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:56:35.240

您是否尝试过实际编写正则表达式？如果您将 /Apple/gi 设置为 RegEx

```
new RegExp(keyword,'gi') 
```

那么它将在任何地方匹配Apple。但是，如果您的 RegEx 看起来像这样：/^Apple$/gim

```
new RegExp("^"+keyword+"$","gim") 
```

在此示例中，该模式将匹配单词 Apple 或单独坐在一行中的苹果，因此它不会匹配 Apple Pie。

换句话说，如果您使正则表达式更具体，您将能够减少误报匹配:)

# rest - REST API 和交付二进制资源

> ID：12185490
> 
> 赞同：16
> 
> 时间：2012-08-29T19:51:50.103
> 
> 标签：rest

使用 REST API 交付二进制资源（如 pdf 文件）的约定是什么？您是否只是在 JSON 或 XML 响应中返回资源的 URL，例如 {"url" : "http://example.com/document.pdf"} ？

我试图理解 URI 和 URL 之间的区别并保持 RESTful 哲学。诚然，这对我来说是新的，所以我可能会误解一些事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T20:06:07.593

### 本节假设您的意思是：我如何告诉用户在哪里可以找到二进制资源

URI 和 URL 之间的区别与二进制数据类型与非二进制数据类型没有任何关系（[另请参见 参考资料](https://stackoverflow.com/questions/176264/whats-the-difference-between-a-uri-and-a-url)）。

如果您返回的主要是 JSON，那么`url`条目是一种常见的方式。如果您正在做一些更类似于 HTML/XML 的事情，那么像`<link>`具有良好`rel`属性的元素之类的事情就很有意义。

显然，如果客户端`GET`向您提供给他们的直接 URL 发出请求，那么您应该将文件发送给他们，除非他们发送了一堆内容协商标头，从而有效地阻止您完成他们的请求。在这种情况下，[`406 Not Acceptable`](http://httpstatusdogs.com/406-not-acceptable)响应（或[官方定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)）很有意义。

如果您的问题是其他意思，请澄清。

### 漫无边际的“这样做”部分

第一：忽略 URL 与 URI。它与此无关。完全没有。

下一篇：如果您的问题不是“我如何链接到资源”（这可能会受到我将要讨论的内容的影响），而是“如果我的资源只是一个 PDF 文件怎么办”，那么您有各种各样的解决它的选项。首先，你需要退后一步，更抽象地思考（一点点）。您的资源几乎肯定不是“PDF 文件”。它是“用户上传的文件”，或“我生成的 PDF 版本的报告”等。

在第一种情况下，除了他们发送给您的二进制文件之外，您可能没有任何资源表示，这完全没问题。`GET`当您收到该资源的 URL时，您可能不需要执行任何类型的内容协商。只需将文件发送给他们，但要遵守我上面提到的警告`406`。

在第二种情况下，您可能拥有该资源的各种表示形式：CSV、HTML、LaTeX，应有尽有。在这种情况下，当您收到`GET`资源的 URL 时，您*确实*需要进行一些内容协商，以便您知道是否向他们发送 PDF 文档或其他内容。您可能拥有资源的 JSON 表示形式，它只是您用于生成 PDF 的原始数据。

在任何一种情况下，如果您有一个完全是关于资源的元数据的表示，那将是出乎意料的。如果需要（通常是，有时不是），显式的外部元数据（与嵌入在二进制资源中的元数据相反，例如 PDF 中的作者和标题信息）最常被建模为单独的资源。

最后，正如@monitorjbl 所说：您可能*不想*将二进制数据直接嵌入文本格式，例如 JSON 或 XML。有很多方法可以做到这一点，通常涉及“base64-encoded”这个词，但这通常不是最好的方法。一般来说，您不应该混合二进制数据和文本数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T20:28:03.603

无论是否二进制，您的 REST 资源都应使用超媒体类型进行描述。

*   如果您的 REST 客户端以 msgpack 格式 PUT/POST 资源，则 REST 服务器仍然可以读取此消息并更新/创建资源。那为什么不呢。
*   如果您的 REST 客户端以 PDF 格式 PUT/POST 资源，我猜您将无法提取正确创建/更新资源所需的所有信息。所以不行。

在最后一种情况下，您可能正在处理类似“Google 驱动器”的服务：这些 PDF 本身不是您的资源，应该由您的实际资源链接（即 URL 应该在您的资源中）。

即使 Google Drive 可能不是完美的 REST API [（API 参考）](https://developers.google.com/drive/v2/reference/)，它也同时处理 JSON 资源和实际的二进制文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T20:02:33.397

根据我的经验，这样做与 REST Web 服务的想法背道而驰。与传统的 RESTful 服务不同，您永远无法缓存此响应而不引起严重的头痛。此外，由于您必须将服务作为文本使用才能读取 XML/JSON，因此您可能无法同时针对文本和二进制读取进行优化。更不用说，您必须*始终*需要二进制信息，否则当您只需要文本数据时，您的性能会受到相当大的影响。如果你*总是*需要二进制数据，不妨问问自己为什么需要网络服务？

这并不是说这是不可能的（毕竟有 BSON）或者不存在这种情况的用例，但是您应该非常确保在尝试之前无法强制单独请求二进制数据去做这个。将二进制数据嵌入到专为文本设计的文档格式中效率非常低，并且这种格式的数据将比原始字节大得多。

顺便说一句，如果您总是使用矢量图形资源（如 SVG 或某些类型的 PDF）来执行此操作，则可以将其表示为 XML 数据。同样，您可能不想这样做，因为它会增加您的有效负载，但它是解决“需要二进制文件”问题的一种选择。

# c# - 按键颜色-Windows Phone 7

> ID：12185491
> 
> 赞同：0
> 
> 时间：2012-08-29T19:51:52.053
> 
> 标签：c#, windows-phone-7, button, colors

我想将按钮的颜色更改为红色。在 WP7 肖像页面中工作。

```
Brush op = new SolidColorBrush(Colors.Red);
button1.Background = op; 
```

但现在，在课程外的 WP7、C# 中，这在全景页面中不起作用。请帮忙。视窗电话 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:16:21.230

它对我有用。我希望您没有对按钮进行任何样式绑定。样式绑定会覆盖在后面的代码中所做的更改。这就是我的全景图中正在发生的事情。一个简单的按钮正在工作，但一个具有样式绑定的按钮不起作用。你能发布你的xaml代码吗？

# actionscript-3 - Flash actionscript 3 addFrameScript 无法正常工作

> ID：12185500
> 
> 赞同：0
> 
> 时间：2012-08-29T19:52:15.837
> 
> 标签：actionscript-3, movieclip

我正在加载一个影片剪辑，并将帧脚本动态添加到影片的时间轴中。帧脚本有时似乎可以工作，但有时它似乎会跳过包含动态添加的帧脚本的整个关键帧。只是想知道是否`MovieClip.addFramScript()`只是不可靠，或者是否其他人都遇到过这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:39:53.860

试试这个代码，

在时间线上

```
//Movieclip instance name 'MC'

MC.addFrameScript(0 ,stopframe);

function stopframe():*
{
    MC.stop();
} 
```

或类文件（并使用标签名称）

```
package
{
    import flash.display.MovieClip;
    import flash.display.FrameLabel;
    import flash.display.*;

    public class MC extends MovieClip
    {
        private var labels:Object

        public function MC()
        {
            labels = this.currentLabels;

            for ( var i:int = 0; i < labels.length; i++ )
            {
                var framelabel:FrameLabel = labels[i];
                labels[ framelabel.name ] = framelabel.frame
            }

            addFrameScript( labels["animstart"], animStart, labels["animend"] - 1, animEnd );
        }

        public function animStart():void
        {
            trace("animation start");
        }

        public function animEnd():void
        {
            trace("animation end");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T20:50:44.920

根据我的经验，它并非不可靠。但是语法非常关键，flash 不会针对此类语法问题抛出错误。

片段：

```
addFrameScript((totalFrames-1),fn_frame); //Correct

addFrameScript((totalFrames-1),fn_frame()); //Incorrect, it will run right away and not on the last frame (the difference is the extra brackets)

public function fn_frame():void
    {
        trace("END");

        } 
```

# python - Python脚本将乱码写入文件

> ID：12185501
> 
> 赞同：2
> 
> 时间：2012-08-29T19:52:15.863
> 
> 标签：python, sockets, udp, syslog

这是我用来接收系统日志并将其附加到文本文件的脚本：

```
# Receives packets on udp port 514 and
# writes to syslog.txt

from socket import *

# Set the socket parameters
host = "myhost"
port = 514
buf = 1024
addr = (host,port)

# Create socket and bind to address
UDPSock = socket(AF_INET,SOCK_DGRAM)
UDPSock.bind(addr)

# Receive messages
while 1:
    data,addr = UDPSock.recvfrom(buf)
    if not data:
        print "Client has exited!"
        break
    else:
        print "\nReceived message '", data,"'"

        # This will create a new file or overwrite an existing file.
        with open("C:\syslog.txt", "a") as myfile:
            myfile.write(str(data))

# Close socket
UDPSock.close() 
```

脚本工作正常，文本附加到文件中。我看到了，而且读得很好。但是，在我关闭 python 的那一刻，该 txt 文件数据被翻译成乱码。任何想法为什么？在将套接字数据附加到文件之前我应该​​做其他事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T19:58:01.703

您没有解析 syslog 数据包。Syslog[是一种协议](https://www.rfc-editor.org/rfc/rfc5424)；它不仅仅是纯文本。数据字符很可能最终出现在您的文件中，这可能会导致某些自动字符检测失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:35:46.257

这可能会直接完成您想要实现的目标（解析 syslog 协议并将其转储）： http: [//pypi.python.org/pypi/loggerglue/0.9](http://pypi.python.org/pypi/loggerglue/0.9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:08:50.440

我打算建议做 open("C:\syslog.txt", "at") 而不是 open("C:\syslog.txt", "a")，但是重新阅读 python dox，文本是默认值（与 C 不同，我的记忆中说二进制是默认值，这会导致在 Windows 上运行时出现问题）。

我的另一个建议是在第一次创建文件时在文件顶部放置一个纯文本标题；不确定之后您使用什么来读取文件，但是记事本和写字板使用一些启发式方法来确定正在使用什么 UTF-8 或其他编码，而且我肯定看到过这种情况严重失败的情况。（搜索写字板BOM猜测）

# google-app-engine - App Engine 和 Google Drive API

> ID：12185504
> 
> 赞同：7
> 
> 时间：2012-08-29T19:52:18.513
> 
> 标签：google-app-engine, google-drive-api

我已经使用应用程序引擎工作了几个星期，现在我正在尝试做一些新的事情。我想显示一个用户最新的 25 个文档的列表。但我不知道该怎么做。有人可以指点我一些信息吗？

我有一个应用程序设置： 1\. 可以使用 Google Drive API 2\. 用户必须登录才能使用该程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T20:38:59.803

[Drive 文档中有](https://developers.google.com/drive/)[Python](https://developers.google.com/drive/examples/python)和[Java](https://developers.google.com/drive/examples/java)的完整 GAE 应用程序示例。

然后检查 api 的[files:list 方法](https://developers.google.com/drive/v2/reference/files/list)。

# filter - 带有多个可选提示的 Cognos 报告

> ID：12185510
> 
> 赞同：2
> 
> 时间：2012-08-29T19:52:33.777
> 
> 标签：filter, prompt, cognos

我有一个报告要求，用户希望有 2 个多选可选提示。

*   场景 A. 如果用户在两个提示中都选择了值，则应根据在两个提示中选择的值过滤列表。
*   场景 B. 如果用户在提示 1 中选择值，而在提示 2 中没有选择 - 列表应仅根据在提示 1 中选择的值进行过滤
*   场景 C. 如果用户在提示 2 中选择值，而在提示 1 中没有选择 - 列表应仅根据在提示 2 中选择的值进行过滤

由于两个提示都是可选的，因此过滤器保持可选。

Report works fine in scenario A when both prompt values are selected.

但在场景 B 中，报表显示提示 1 中的选定值（这是正确的），但提示 2 中的所有值（这是不正确的。不应显示未选择的值）。

在场景 C 中，报表显示来自提示 2 的选定值（这是正确的），但来自提示 1 的所有值（这是不正确的。不应显示未选择的值）。

您能否提供一个解决方案，以便根据上述情况过滤报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T19:00:32.863

默认情况下，当提示中未提供答案时，Cognos 不会应用任何过滤器。结果是所有的值。因此，您得到的结果是 Cognos 中的预期行为。

我的建议是使用多个列表和条件字符串变量。因此，首先使用以下表达式定义一个条件变量：

```
case 
when (ParamDisplayValue('Prompt 1') is not null and ParamDisplayValue('Prompt 2') is not null) then ('A')
when (ParamDisplayValue('Prompt 1') is not null and ParamDisplayValue('Prompt 2') is null) then ('B')
when (ParamDisplayValue('Prompt 1') is null and ParamDisplayValue('Prompt 2') is not null) then ('C')
end 
```

当然，您必须定义三个 3 字符串结果：A、B、C。

列表：创建 3 个列表：

列表 A - 定义使用提示 1、提示 2 值作为参数的过滤器

列表 B - 定义使用提示 1 作为参数的过滤器并定义将排除提示 2 的所有值的常量过滤器

列表 C - 定义使用提示 2 作为参数的过滤器，并定义将排除提示 1 的所有值的常量过滤器。

选择每个列表，然后在每个匹配列表上使用渲染变量：

ListA - 仅当条件变量字符串等于 A 时才呈现。

ListB - 仅当条件变量字符串等于 B 时才呈现。

ListC - 仅当条件变量字符串等于 C 时才呈现。

希望能帮助您解决问题。

# list - 二进制堆到列表

> ID：12185520
> 
> 赞同：1
> 
> 时间：2012-08-29T19:53:15.250
> 
> 标签：list, tree, prolog, append, binary-tree

试图将树结构附加到列表中。在 Erlang 中，我会使用 ++ 运算符进行追加，但在 Prolog 中执行此操作时会不断出现语法错误。

我将包括我的错误代码，它全部与我认为缺少的列表的附加有关。

```
tree2list(leaf(X),L++[X]).
tree2list(branch(Branch1,Branch2),L):-
tree2List(B1,L1),
tree2List(B2,L2),
L++L1++L2. 
```

任何想法如何解决我的附加问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:12:57.660

当然，使用差异列表：

```
tree2list(leaf(X),[X|A]-A).
tree2list(branch(B1,B2),L-Z):-
        tree2list(B1,L-A),
        tree2list(B2,A-Z).

/* 7 ?- tree2list(branch(leaf(1),leaf(2)), L-[]).
L = [1, 2] ;
No
8 ?- */ 
```

但是你的树似乎没有空树枝。这样添加它们：

```
tree2list(empty,A-A).

/* 10 ?- tree2list(branch(branch(leaf(1),leaf(2)),empty), L-[]).
L = [1, 2] ;
No
11 ?- */ 
```

# iphone - 使用 XIB 的视图作为子视图并访问其文本字段属性

> ID：12185522
> 
> 赞同：0
> 
> 时间：2012-08-29T19:53:47.313
> 
> 标签：iphone, objective-c, xcode

我正在尝试将`NameSubView`from`NameSubViewController`用作`MainViewController`. 我完成了这项工作，但我也想访问`UITextField`子视图的，如下所示：

**主视图控制器.m**：

```
#import "NameSubViewController.h"

...

UIViewController *nameController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
nameSubView = [nameController view];
[self.view addSubview:nameSubView];

NSString *textFieldString = nameSubView.textField.text; 
```

* * *

但我无法让它发挥作用。这是我为创建子视图所做的：

*   `NameSubViewController`用XIB为接口制作类

*   为 IB 视图制作`NameSubView`类，将视图设置为此类 Identity Inspector

*   `@property (nonatomic, strong) IBOutlet UITextField *textField;`在 IB 中创建`NameSubView`并连接到文本字段。

* * *

然后我可以加载子视图，但我无法从`MainViewController`. 因此，为了访问它，我确实在身份检查器**中将文件所有者的类**从`NameSubViewController`更改为。`NameSubView`

现在`NameSubViewController`访问了，但没有找到视图的属性，所以应用程序崩溃了。我不知道我是否遵循正确的程序，我现在可以为`NameSubView`in创建一个属性`NameSubViewController`吗？还是我应该遵循另一个程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:17:12.010

*   `NameSubViewController`在身份检查器中将文件 返回给文件的所有者。
*   添加`NameSubView`到身份检查器中的视图。

然后使用此代码：

```
#import "NameSubViewController.h"
// If view's declaration is located in a separate file then the next line is important
#import "NameSubView.h" 

...

// It is better to declare the view controller as 'NameSubViewController'
NameSubViewController *nameController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
// A casting to 'NameSubView' should do the main magic
NameSubView *nameSubView = (NameSubView *)[nameController view];
[self.view addSubview:nameSubView];

// It is better to ensure that the view is of a correct class 
// before using its specific properties
if ([nameSubView isKindOfClass:[NameSubView class]]) {
  // Now it should work 
  // (assuming that you have a property 'textField' in 'NameSubView')
  NSString *textFieldString = nameSubView.textField.text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:19:29.767

首先，将文件的所有者更改回`NameSubViewController`. 将文本字段 IBOutlet 声明移动到 NameSubViewController，并确保所有内容都在 nib 中正确连接。最后，将`nameController`变量声明为类型`NameSubViewController`而不是 UIViewController。然后你应该能够得到文本字段`nameController.textField`

# cassandra - Cassandra 1.1：查询多个行键，但不是范围

> ID：12185529
> 
> 赞同：2
> 
> 时间：2012-08-29T19:54:03.277
> 
> 标签：cassandra, rows, cql

我已经阅读了很多关于在 Cassandra 中构建反向索引的文档，但是我没有看到任何关于如何使用这些结果来获取适用行的信息。

我知道行切片，但这不适用于这里。我的问题是：如何根据行键获取大量特定行？

在伪 SQL 中：

```
SELECT * FROM table where Primark_Key IN (2, 32, 76, 1000, 2427) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:59:01.210

我认为[multiget_slice](http://wiki.apache.org/cassandra/API#multiget_slice)是您正在寻找的。获取要获取的键列表。值得记住的是，它并不是特别有效。虽然往往是唯一的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:38:22.567

您发布的伪 SQL 也是有效的 CQL 查询

# php - 来自同一数组的引用键

> ID：12185545
> 
> 赞同：4
> 
> 时间：2012-08-29T19:55:19.047
> 
> 标签：php, arrays, associative-array

我正在尝试引用同一数组中项目的键/值对：

```
$glossary_args = array(
    'name'          => 'Glossary Terms',
    'singular_name' => 'Glossary Term',
    'add_new'       => 'Add New Term',
    'edit_item'     => 'Edit Term',
    'search_items'  => 'Search'.$glossary_args["name"],
) 
```

这甚至可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T20:05:23.570

您可以使用赋值本身就是 PHP 中的表达式这一事实：

```
$glossary_args = array(
    'name'          => ($name = 'Glossary Terms'),
    'singular_name' => 'Glossary Term',
    'add_new'       => 'Add New Term',
    'edit_item'     => 'Edit Term',
    'search_items'  => 'Search'.$name
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T19:57:44.037

当你第一次定义数组时你不能这样做——当你在里面`array()`时，`$glossary_args`还没有创建。试试这个：

```
$glossary_args = array(
  'name' => 'Glossary Terms',
  'singular_name' => 'Glossary Term',
  'add_new' => 'Add New Term',
  'edit_item' => 'Edit Term'
);
// first we create the rest of $glossary_args, then we set search_items
$glossary_args['search_items'] = 'Search '.$glossary_args["name"]; 
```

# mysql - 表可以具有与 IT 相关联的值吗？

> ID：12185547
> 
> 赞同：0
> 
> 时间：2012-08-29T19:55:29.280
> 
> 标签：mysql, sql, phpmyadmin

有点类似于类的静态变量。

例如，假设我有一张桌子来留人。然后对于每一行，我有一堆列：年龄、性别、姓名......但我想要一个与表本身相关联的值，比如说`minimum allowed age = 18`。然后，每当我添加一个新人时，我都会检查他们的年龄是否大于`Table.minimum_allowed_age`. 这样我就可以轻松地更改该值，而无需在任何地方进行硬编码。

我现在能做到的唯一方法是创建一个（非常丑陋的）ENUM 列，它只有一个选项，`18`然后每一行都有它。这显然不是这样做的方法，尤其是如果您想经常更改该值（在我的应用程序中就是这种情况）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:00:54.097

并不真地。一些数据库服务器允许您将一些元数据附加到表中（例如，`AUTO_INCREMENT`MySQL 中的值，或`COMMENT`各种 SQL 数据库中的字段），但它们不适合通用数据存储。

在您的情况下，您所描述的值（允许的最小年龄）根本不是表的属性 - 它是您的*应用程序逻辑*的属性。如果它要长期保持不变，请将其写为代码中的常量；如果它会更频繁地更改，请创建一个单独的表来存储整个应用程序的配置键/值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:44:50.943

静态变量在技术上是全局变量。使用另一个表来存储全局属性怎么样？

主键的字符串，另一个用于`CAST`获取值的嵌套查询中的整数的字符串将起作用。

`NULL`如果你想要类型安全，你也可以使用一个整数值，或者如果你想要类型安全，你可以使用几个不同类型的可能列（你可以`COALESCE`将结果`CAST`转换为一个字符串以获得完全通用的字符串->字符串视图）。

对于与表相关联的全局变量，您可以建立适当的约定，例如在键前面加上表名和一些分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:23:03.637

您可以尝试编写插入触发器。在触发代码中，您可以检查最小年龄是否为 18 岁，如果不是，您可以将其设置为 18 岁。

# android - 在菜单外调用菜单选项

> ID：12185548
> 
> 赞同：1
> 
> 时间：2012-08-29T19:55:30.747
> 
> 标签：android, menu

我有一个与多个活动相关的 Values.java 类。Values.java 可以获得当前正在运行的活动并使用它来打开与该活动相关的选项菜单。每个活动都有一个标记为“开始”和“取消”的项目。这个 Values.java 类如何调用当前正在运行的活动的启动或取消选项？我要求这样做的原因是因为每个活动的开始或取消按钮都与其活动高度集成，即一个线程创建一个线程，或者与与该活动相关的值相关联。我不确定我所要求的是否可以在 android 平台上实现。

# javascript - jquery 将内容加载到 div 和 magicline

> ID：12185549
> 
> 赞同：4
> 
> 时间：2012-08-29T19:55:30.293
> 
> 标签：javascript, jquery

第一次在这里发帖。希望各位大神帮忙。将不胜感激，我相信我会学到一些东西。此外，如果您在下面我的问题上看到任何其他冗余，请随时为我提供一个关于编码实践的新问题。我需要尽快学习。解决问题！

我有两个单独的脚本，我已经完成了一半，但我无法让它们完美运行。

首先是“magicline”脚本。这会根据您导航到的页面为导航下方的线条设置动画。

我无法弄清楚：1）如何消除由于添加margin-left：“”以分隔导航项目而导致的额外线宽。

二、用jquery加载页面内容。我希望能够通过调用支持页面部分的内容来加载我的 4 个单独的页面。就目前而言，有两个问题。一个是，无论您单击哪个页面，它都会一遍又一遍地重新加载相同的内容。此外，即使 URL 更新到正确的页面，导航“当前页面”颜色标记也不会跟随。

为了更容易理解，我在这里运行了一个现场演示：http: [//www.youngsaye.net/v2/](http://www.youngsaye.net/v2/)

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:15:58.647

对于您的第一个问题，我们将不得不在 Magicline 上做一些额外的数学运算，以不包括边距。

```
// get the left margin of current page item
var marg = parseInt($(".current_page_item a").css("marginLeft"));
$magicLine
    .width($(".current_page_item").width() - marg)
    .css("left", $(".current_page_item a").position().left + marg) 
```

我们只是从宽度中减去边距并将边距添加到左侧偏移量，因此它仍然对齐。您要么必须使其可重用（即，将其放入函数中并在单击 a 元素时调用它），要么更改单击事件中的代码以执行相同的操作。（我推荐第一个，没有真正的理由在两个地方有相同的代码）

您要遵循的逻辑是（类似的）：

*   页面加载：附加魔术行项目。
*   将magicline与`.current_page_item`
*   绑定`#topnav li a`点击
    1.  动画魔术线到单击的`a`元素。
    2.  删除`.current_page_item`.
    3.  将类添加`current_page_item`到单击的`a`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:16:54.980

在查看页面时，我看到的是：

1) 魔术线脚本根据具有类“current_page_item”的元素确定下划线的宽度。

因为这都是javascript。您需要设置菜单锚点/链接以包含将 current_page_item 类更新为所选项目并将其从前一个项目中删除的 javascript。这也应该更新您的突出显示问题，因为它似乎是 css 样式的。

一个基本的脚本如下所示：

```
function updateCurrent(e) {
  $('.current_page_item').removeClass('current_page_item');
  $(e).parent('li').addClass('current_page_item');
} 
```

您所有的锚点都会有一个如下所示的 onClick：

```
<a href="print.html" onclick="updateCurrent(this);">Print</a> 
```

2）我没有完全理解你第二个问题的要点。当我浏览它时，导航看起来指向正确的内容。

编辑我在下面添加的评论：

```
$('#topnav li a').click(function(){
    // Update the current item.
    $('.current_page_item').removeClass('current_page_item');
    $(this).parent('li').addClass('current_page_item');

    var toLoad = $(this).attr('href')+' #content';
    $('#content').hide('fast',loadContent);
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#content').show('normal',hideLoader());
    }
    function hideLoader() {
        $('#load').fadeOut('normal');
    }
    return false;

}); 
```

编辑第 2 部分：我看到您仍然无法让魔术线忽略您的宽度，您需要做的是在单击锚点时，您在初始加载时应用的相同数学也应该完成。

更新后的魔法线 js 应如下所示：

```
// DOM Ready
$(function() {

$("#topnav").append("<li id='magic-line'></li>");

// get the left margin of current page item
var marg = parseInt($(".current_page_item a").css("marginLeft"));

/* Cache it */
var $magicLine = $("#magic-line");

$magicLine
    .width($(".current_page_item a").width())
    .css("left", $(".current_page_item a").position().left + marg)
    .data("origLeft", $magicLine.position().left)
    .data("origWidth", $magicLine.width());

$("#topnav li").find("a").click(
    $el = $(this);
    // Do the math for each click
    leftPos = $el.position().left + marg;  
    newWidth = $el.parent().width() - marg;

    $magicLine.stop().animate({
        left: leftPos,
        width: newWidth
    });
}, function() {
    $magicLine.stop().animate({
        left: $magicLine.data("origLeft"),
        width: $magicLine.data("origWidth")
    });    
});

/* Kick IE into gear */
$(".current_page_item_two a").mouseenter(); 
```

});

# ruby-on-rails - Ruby Regex 验证格式 xxx-####

> ID：12185551
> 
> 赞同：0
> 
> 时间：2012-08-29T19:55:41.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要按照我的模型中的以下格式验证输入证据编号。

```
XXX-### 
XXX-#### 
XXX-##### 
XXX-######
XXXX-##### 
```

XXXX 是字母，#### 是数字

我的模型代码中有以下内容。

```
validates_format_of :evidence_number, :with=> /[A-Z a-z]{3}-\d{3,6}/ 
```

它仅适用于小于 3 的数字，即适用于 XXX-12，但不适用于超过 6 的数字，即不适用于 XXX-1234567

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:25:08.003

您应该使用`\A`（字符串开头）和`\z`（字符串结尾）锚点，而不是`^`（行首）和`$`（行尾）：

```
validates_format_of :evidence_number, :with=> /\A[A-Z a-z]{3}-\d{3,6}\z/ 
```

一个简单的例子将说明差异：

```
>> "wrong\nXXX-999\nanchors" =~ /^[A-Z a-z]{3}-\d{3,6}$/
=> 6
>> "wrong\nXXX-999\nanchors" =~ /\A[A-Z a-z]{3}-\d{3,6}\z/
=> nil
>> "XXX-999" =~ /^[A-Z a-z]{3}-\d{3,6}$/
=> 0
>> "XXX-999" =~ /\A[A-Z a-z]{3}-\d{3,6}\z/
=> 0 
```

你几乎总是想在 Ruby中使用`\A`and`\z`而不是`^`and 。`$`

如果您需要连字符后的“至少三位”，那么您需要：

```
/\A[A-z a-z]{3}-\d{3,}\z/ 
```

[肯尼格兰特](https://stackoverflow.com/a/12186073/479863)是对的，角色类中的空间看起来很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:59:22.370

尝试添加`^`开头和`$`结尾。

```
validates_format_of :evidence_number, :with=> /^[A-Za-z]{3,4}-\d{3,6}$/ 
```

不过使用`mu is too short`'s 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:34:24.043

您可能最好设置一些测试代码，并单独测试正则表达式（或者最好设置一个单元测试并以这种方式进行测试）。

```
invalid   = %w[777-2345 ABCD-12 ABCD-12345678 AB-12345678 ABC-1234567]
valid     = %w[ABC-12345 ABCD-123 ABCD-1234 ABCD-12345 ABCD-123456]

def validate codes,regex
  codes.each do |code|
  if code =~ regex
     puts "Valid code #{code}" 
   else
     puts "Invalid code #{code}"
   end
 end
end 
```

使用正则表达式测试上述内容时，会出现一些问题。根据您的描述，我不明白为什么您的正则表达式包含一个空格作为允许的字符 - 对于代码，这似乎不太可能是有效代码。所以你可能会更好地使用这样的东西：

```
/\A[A-Za-z]{3,4}-\d{3,6}\z/ 
```

这将匹配限制为完整的字符串，并将第一个匹配限制为 3 或 4 个字母字符，最终匹配限制为 3-6 个数字。这是假设 #### 在您的示例中没有错误：

```
puts "\n\nUSING NEW REGEX"
puts "Validating valid codes"
validate valid,/\A[A-Za-z]{3,4}-\d{3,6}\z/
puts "\nValidating INVALID codes"
validate invalid,/\A[A-Za-z]{3,4}-\d{3,6}\z/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:58:49.763

添加字符串开头和结尾的正则表达式字符：

```
validates_format_of :evidence_number, :with=> /^[A-Z a-z]{3}-\d{3,6}$/

ruby-1.9.3-p125 :000 > "ABC-1234567".match /[A-Z a-z]{3}-\d{3,6}/
 => #<MatchData "ABC-123456"> 
ruby-1.9.3-p125 :001 > "ABC-1234567".match /^[A-Z a-z]{3}-\d{3,6}$/
 => nil 
```

# ios - Restkit 终端问题

> ID：12185555
> 
> 赞同：0
> 
> 时间：2012-08-29T19:56:02.260
> 
> 标签：ios, xcode4.3, restkit

当我尝试将 RestKit 代码添加到终端时出现以下错误。我错过了什么？

```
git submodule add git://github.com/RestKit/RestKit.git RestKit
Cloning into RestKit...
github.com[0: 207.97.227.239]: errno=Operation timed out
fatal: unable to connect a socket (Operation timed out)
Clone of 'git://github.com/RestKit/RestKit.git' into submodule path 'RestKit' failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:29:31.023

错误消息告诉您究竟出了什么问题 - 您的计算机在尝试连接到 github.com 时超时。这可能有很多原因，但我假设您确实有一个有效的互联网连接。也许防火墙阻止了用于 git 协议的 TCP 端口 9418。如果您无法重新配置防火墙，请尝试使用 http 协议。

# c# - 在 C# 中获取函数和文件名

> ID：12185556
> 
> 赞同：0
> 
> 时间：2012-08-29T19:56:07.470
> 
> 标签：c#, asp.net, .net

当我在函数中时，有没有办法获取函数名和文件名？我正在尝试像这样在各处添加日志文件，并且希望能够在某些功能中复制和粘贴我的日志文件代码行：

```
public class NewCorrGenerator
{
    public void Start()
    {
        bool rc = true;

        myLogFile.InfoToFileWithTime("NewCorrGenerator - Start", appContext);

        etc.....
    }
} 
```

如您所见，有没有办法在字符串中获取类名和函数名并将其输出到 myLogFile 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:09:12.350

您可以使用[GetCurrentMethod](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getcurrentmethod%28v=vs.100%29.aspx)。这将返回一个类型为 的对象`MethodBase`。`Name`获取方法名称的属性 。`DeclaringType`会给你上课。这与文件名不同，但如果每个文件使用一种类型，它应该是关闭的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:11:31.673

您可以使用[`System.Diagnostics.StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)和[`System.Diagnostics.StackFrame`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)类来检索有关当前执行代码的信息：

```
var trace = new StackTrace(true);
var frame = trace.GetFrame(0);  // current frame
var lineNumber = frame.GetFileLineNumber();
var method = frame.GetMethod().Name;
var className = frame.GetMethod().ReflectedType.Name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:02:42.743

你需要的是一个拦截器。最流行的框架是[PostSharp](http://www.sharpcrafters.com/)。它是一种商业产品，可以满足您的一切需求。如果你想自己写，试试看[这篇文章](http://www.codeproject.com/Articles/8436/Intercepting-method-calls-in-C-an-approach-to-AOSD)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:20:11.237

你可以使用反射来获得你需要的东西。这是获取方法名称的一种方法：[Retrieving the calling method name from within a method](https://stackoverflow.com/questions/615940/retrieving-the-calling-method-name-from-within-a-method-c)

不过，我会考虑做其他事情 - 拦截或生成硬编码类/方法名称的代码。如果您最终使用 StackTrace，用编译器调试指令包围日志记录代码可能是个好主意。

# delphi - Delphi 7卸载和安装错误

> ID：12185562
> 
> 赞同：3
> 
> 时间：2012-08-29T19:56:42.220
> 
> 标签：delphi, delphi-7

我首先安装了 delphi 5，然后一年前安装了 delphi 7。而且我大部分时间只使用Delphi 5。在我安装 Delphi 7 之后，它运行良好，并用它创建了 2-3 个应用程序。

但是现在在我尝试运行 Delphi 7 6 个月后，它给了我一些错误。所以我卸载了 Delphi 7 并尝试重新安装，但同样的问题。我尝试了两次，结果相同。:( 我也无法在 Delphi 7 中查看任何表单。也没有添加新表单的选项。

当我运行新安装的 Delphi 7 时，它试图从 delphi5 目录加载一些组件。我怎么解决这个问题？

Delphi 5安装路径：D:\Delphi5

Delphi 7 安装路径：C:\Program Files\Borland\Delphi7

以下是我在加载 Delphi 7 时遇到的错误：

```
Exception EPackageError in module rtl70.bpl at 00017EAA
Can't Load package D:\Delphi5\bin\delphide70.bpl
Can't Load package D:\Delphi5\bin\direct70.bpl
Can't Load package D:\Delphi5\bin\delphivclide70.bpl
Can't Load package D:\Delphi5\bin\MsgInoCFG.bpl 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:48:29.353

Windows 注册表可能有错误的值（尽管我不知道它们是如何从你描述的内容中弄脏的）。使用开始菜单的搜索控件 (Windows 7) 并键入`RegEdit`并点击`Enter`以打开注册表编辑器。转到`HKEY_CURRENT_USER\Software\Borland\Delphi\7.0`（和树中的相同路径`HKEY_LOCAL_MACHINE`），并检查与 Delphi 5 位置相关的任何内容，在`Known Packages`、`Known IDE Packages`或其他任何地方。

`RegEdit`另一种方法是简单地卸载 Delphi 7，然后如上所述进入，并重命名上述两个`Borland\Delphi\7.0`条目。使用`Control Panel->System and Security\System`对话框，单击`Advanced Settings`左侧面板，然后单击`Environmental Variables`按钮，并确保没有`PATH`与 Delphi 7 相关的条目。然后像上面那样重新安装 Delphi 7，看看它是否修复了所有问题。**确保只重命名条目而不删除它们，以防万一你做错了；您可以随时重新命名它们。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:21:15.403

那么你只能卸载Delphi7，然后卸载Delphi5，删除安装文件夹，从Windows\System32中删除所有RTL和VCL包，如果不能迁移到Delphi7，则重新安装Delphi5。我不相信 Windows Installer 可以消除 Delphi7 对您的 Delphi5 安装造成的重大损害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:13:02.903

这是我从 Embarcadero 的一位技术支持人员那里得到的回复：

> 你好，我的名字是奥斯卡·恩琼贝。我正在看这个案子。
> 从您的 Windows uinstaller 卸载产品，并确保您选择删除所有注册表项的选项以从您的计算机上完全卸载。如果您忘记选择此选项，请按照以下通用说明卸载产品。
> 
> 1.  通过控制面板中“程序和功能”中的“Embarcadero Rad Studio XE”条目卸载产品
>     
>     
>     1.  删除 C:\Program Files\Embarcadero\Rad Studio\8.0 目录
>     2.  删除 C:\Users\Public\Public Documents\Rad Studio 目录
>     3.  删除 c:\ProgramData\Embarcadero\Rad Studio\8.0 目录
>     4.  删除 HKEY_LOCAL_MACHINE\SOFTWARE\Embarcadero\BDS\8.0 注册表项
>     5.  删除 HKEY_CURRENT_USER\SOFTWARE\Embarcadero\BDS\8.0 注册表项
>     6.  删除 C:\ProgramData\ 中具有 GUID 名称的文件夹，例如 C:\ProgramData{7DE921C9-42C8-4DA3-8A44-043C3349FD1D}
> 2.  从 Windows\System32 中删除以下文件： 8a. *150.bpl 8b。*150.jdbg 8c。*150.xml 8d。管理员。* 8e。cc32*.dll
>     
>     
> 3.  重新启动机器。请注意，如果没有收到任何回复，此案例将于 11 月 7 日星期三关闭。最好的问候
>     Oscar Njumbe EMEA 多语言技术支持工程师。

# actionscript-3 - 将值裁剪到区间

> ID：12185564
> 
> 赞同：0
> 
> 时间：2012-08-29T19:56:44.077
> 
> 标签：actionscript-3

在 ActionScript 3 中，是否有更短的方法可以将值剪辑到 0 到 255 之间？

```
value = Math.min(255, Math.max(0, value)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:02:47.127

不，您可以轻松地创建自己的快捷功能：

```
function clip(val:Number, min:Number, max:Number):Number {
    return Math.min(max, Math.max(min, val));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:21:59.617

如果您正在寻找快速的东西，以下将做：

```
k = (k | -int(k > 256)) & -int(k > 0) & 0xFF; 
```

# c# - 访问（待）编译控件中的本地化资源

> ID：12185566
> 
> 赞同：0
> 
> 时间：2012-08-29T19:57:02.663
> 
> 标签：c#, .net, localization, controls

我有一个包含我们网站控件的组件项目 - 现在必须可以本地化。为站点的其余部分设置本地化不是问题（我们将`.resx`文件放入`App_GlobalResources`目录中；一切都是笨拙的），但我很难找到有关如何在组件项目中本地访问资源的信息。

*   `App_Local[/Global]Resources`文件夹不想工作 - 我不能像从主项目中那样“添加 ASP.NET 文件夹” 。
*   当我自己生成它并将 .resx 文件放入其中时，我不知道如何像在站点中那样访问它们。

一些缩写的控制代码，完全包含`ThisWidget.cs`在组件项目中：

```
namespace site.shop {
  [ToolboxData("<{0}:ThisWidget runat=server></{0}:ThisWidget>")]
  public class ThisWidget : WebControl {
    protected override void CreateChildControls() {
      if (ChildControlsCreated) { return; }
      this.Controls.Clear();
      Label head = new Label();
      head.CssClass = "header";

      // fails: ThisWidget does not exist in namespace
      head.Text = System.Resources.ThisWidget.Label_head;
      // fails: can't find GetLocalResourceObject
      head.Text = new System.Web.UI.TemplateControl.GetLocalResourceObject("Label_head");
      // fails: can't find linked or embedded resources
      System.Resources.ResourceManager rm = new ResourceManager();
      head.Text = Convert.ToString(rm.GetObject("Label_head"));

      this.Controls.Add(head);
    }
  }
} 
```

`new`以及带有/out ,等的几种变体`System.Web.UI.TemplateControl`...

我宁愿不必将其编译为附属程序集，然后将其拉回（这似乎是另一种选择），因为组件项目 (a) 具有许多相关控件，并且 (b)*是*排序的已经依赖卫星了，对吧？我希望我可以将`.resx`文件放入，编译`.DLL`，然后项目的其余部分可以工作。

**[编辑]** 我觉得我越来越接近答案了，但我还没有完全到那里......

有任何想法吗？我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:28:24.157

哦，我快接近了 - 我打开`ThisWidget.Designer.cs`并找到了正确的参数来调用`ResourceManager()`：

```
ResourceManager rm = new ResourceManager("Components.App_LocalResources.ThisWidget", typeof(ThisWidget).Assembly);
head.Text = Convert.ToString(rm.GetObject("Label_head")); 
```

似乎工作起来像一个魅力。我还意识到，由于它忽略了 的特殊性`App_LocalResources`，我可以将它放在任何地方，所以我创建了一个`/Resources/Resx/`目录并将`.resx`每个组件控件的文件放入其中。要更新通话，请执行以下操作：

```
ResourceManager rm = new ResourceManager("Components.Resources.Resx.ThisWidget", typeof(ThisWidget).Assembly); 
```

# php - 每五秒检查一次用户登录状态

> ID：12185567
> 
> 赞同：0
> 
> 时间：2012-08-29T19:57:06.300
> 
> 标签：php, jquery, ajax

我正在尝试在 PHP 中创建一个应用程序，管理员可以通过他的管理面板暂停用户网站的帐户访问（登录后）。我在用户表中使用名为 Session 的列来存储当前会话 ID，并与当前会话 ID 与数据库值（在登录时存储）匹配，但在管理员暂停访问时变为空白。下面是我的代码，有人会帮助我做同样的事情，实际上它不起作用。我正在使用 AJAX 和 PHP。

```
var currentSessionValue = <?php echo $myDB->get(USERS,'session','id='.$_SESSION['UserId']); ?>;
// pseudo code
setInterval(checkVariableValue, 5000);
function checkVariableValue() {
    alert(currentSessionValue);
     $.ajax({
        url: 'checkLoginStatus.php',
        success: function(newVal) {
            if (newVal == currentSessionValue);
                alert('You are Logged out by Administrator.');
                window.setTimeout('location.reload()', 1000);
            }
     });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:06:48.657

为每个登录的用户每五秒调用一次数据库似乎是个坏主意。根据您希望拥有的用户数量，这可能会导致性能受到重大影响。

相反，每当您的用户实际尝试执行任何影响服务器的操作时，检查数据库可能是一个更好的主意。因此，每次他们转到不同的页面或每次通过 AJAX 加载内容等时，您都可以执行此检查。

而且我不确定你在用会话 ID 做什么，但是如果你无论如何都要访问数据库，为什么不在你的表中存储一个额外的列`users`（调用它`suspended`或其他东西）来保存是否或不是用户的访问被暂停了吗？

如果该列设置为`0`，则它们很好。但是，如果它设置为`1`，则将用户注销并且不要让他们重新登录（或者由您决定）。

如果您不想拒绝他们重新登录，则只需`0`在您注销之前或重新登录时将值设置回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:18:00.823

你有没有可能想写：

```
if (newVal == currentSessionValue) { 
```

代替

```
if (newVal == currentSessionValue); 
```

我还认为您甚至可能想`newVal != currentSessionValue`改用...

# assembly - GDB 汇编器调试

> ID：12185568
> 
> 赞同：0
> 
> 时间：2012-08-29T19:57:10.503
> 
> 标签：assembly, gdb, binaryfiles, elf

我必须对一个类进行一些二进制分析，但我被困在其中一个程序上。当我设置一些断点和 disas 时，我看到它看起来像这样：

```
Dump of assembler code for function main:
    0x080484e2 <+0>:    push   %ebp
    0x080484e3 <+1>:    mov    %esp,%ebp
    0x080484e5 <+3>:    sub    $0x48,%esp
    0x080484e8 <+6>:    and    $0xfffffff0,%esp
    0x080484eb <+9>:    mov    $0x0,%eax
    0x080484f0 <+14>:   sub    %eax,%esp
    0x080484f2 <+16>:   cmpl   $0x1,0x8(%ebp)
    0x080484f6 <+20>:   jg     0x8048504 <main+34>
    0x080484f8 <+22>:   movl   $0x7,(%esp)
 => 0x080484ff <+29>:   call   0x804833c <exit@plt>
    0x08048504 <+34>:   mov    0xc(%ebp),%eax
    0x08048507 <+37>:   add    $0x4,%eax
    0x0804850a <+40>:   mov    (%eax),%eax
    0x0804850c <+42>:   mov    %eax,(%esp)
    0x0804850f <+45>:   call   0x804832c <atoi@plt>
    0x08048514 <+50>:   mov    %eax,-0x10(%ebp)
    0x08048517 <+53>:   cmpl   $0xd,-0x10(%ebp)
    0x0804851b <+57>:   jne    0x804853b <main+89>
    0x0804851d <+59>:   lea    -0x38(%ebp),%eax
    0x08048520 <+62>:   mov    %eax,(%esp)
    0x08048523 <+65>:   call   0x8048414 <makebuf>
    0x08048528 <+70>:   lea    -0x38(%ebp),%eax
    0x0804852b <+73>:   mov    %eax,0x4(%esp)
    0x0804852f <+77>:   movl   $0x804863b,(%esp)
 ** 0x08048536 <+84>:   call   0x804831c <printf@plt>
    0x0804853b <+89>:   movl   $0x1,(%esp)
    0x08048542 <+96>:   call   0x804833c <exit@plt>
End of assembler dump. 
```

（我在调用 printf@plt 的位置旁边的星号中进行了编辑）。在我看来，它是一个调用 exit() 的程序，然后构建一个字符串，然后将该字符串打印出来，然后再执行另一个 exit()。我认为，如果我可以绕过对 exit() 的第一次调用，它将打印出挑战的答案。设置调用执行NOP的位置是否正确？如果是这样，NOP 的操作码是什么？我尝试设置为 0x0 和 0x00000000。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:08:21.427

看线

```
0x080484f2 <+16>:   cmpl   $0x1,0x8(%ebp)
0x080484f6 <+20>:   jg     0x8048504 <main+34> 
```

并确定如何让程序跳过第一次退出 - 无需注入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:47:31.203

如果这是关于家庭作业，那么您应该知道允许做什么。

如果允许打补丁，那么最好的方法是将操作码从 jg 更改为 jng，您必须查看 intel 手册以查看必须更改的内容，但通常是一个字节。

如果不允许打补丁，那么您将必须找到将设置正在比较的变量的函数，并弄清楚如何使该函数将其设置为其他值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:21:12.660

您可能不想直接退出呼叫以退出。这次你也许可以侥幸逃脱，但在两个退出调用中，它们都在调用之前将退出代码放入堆栈。根据程序的其余部分，这些堆栈值可能会或可能不会被使用。

所以你的选择是要么 NOP MOV 和 CALL 要么强制跳转总是按照你想要的方式进行。

或者最好的方法是弄清楚究竟是什么参数使它做你想做的事。

x86 的标准 NOP 操作码也是 0x90。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T20:16:24.060

它不一定会退出，因为这条线：

```
cmpl   $0x1,0x8(%ebp) 
```

在这一行中，程序用一个检查这个函数的第一个参数的值，如果它更大，则跳转。
另外，如果你想在这里看到 printf 的格式，你可以`printf "%s", 0x804863b`在 gdb 中输入。
**更新：**
如果这个过程是主程序，则`0x8($ebp)`包含所谓的 argc，即程序的输入数。所以你需要做的是当你运行程序时给它输入。喜欢`./a.out blah`。您也可以通过输入gdb
来检查此值。`x/2wx $esp`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T20:06:09.397

0x90 是 x86 的 NOP 指令。因此 0x90 是一条 NOP 指令，0x9090 是两条 NOP 指令，0x90909090 是 4 条 NOP 指令。

`call 0x804833c`仔细检查指令的长度。我不相信它有 4 个字节长。

# c# - String.Split() 返回空值

> ID：12185572
> 
> 赞同：3
> 
> 时间：2012-08-29T19:57:27.703
> 
> 标签：c#, string, split

我只需要阅读完整字符串的特定部分。该字符串将采用以下形式：

“1 一些货币名称 = 0.4232 其他货币名称”

因此，我能想到的最快方法是在等号 (=) 运算符处拆分字符串，从而将两个值添加到数组中，如下所示：

```
string rawInput = "1 Some Currency Name = 0.4232 Other Currency Name";
string[] rawSplit = rawInput.Split('=');
string firstRate = rawSplit[0].ToString();
string secondRate = rawSplit[1].ToString(); 
```

我现在只需要获取 secondRate 字符串的第一部分（“0.4232”）。所以我会再次拆分该字符串（错误编码）：

```
string[] lastSplit = secondRate.Split(); //Split at whitespace characters
string firstValue = lastSplit[0].ToString(); //Should return "0.4232" but instead returns "" 
```

当我运行应用程序来测试这个函数时，它返回一个空字符串而不是值“0.4232”。为什么会这样？我在这里想念什么？

完整方法：

```
private void btnTest_Click(object sender, EventArgs e)
{
    string rawInput = "1 Some Currency Name = 0.4232 Other Currency Name";
    string[] rawSplit = rawInput.Split('=');
    string baseRate = rawSplit[0].ToString(); //1 Some Currency Name
    string conversionRate = rawSplit[1].ToString(); //0.4232 Other Currency Name

    rawSplit = GetSplit(conversionRate);
    XtraMessageBox.Show(rawSplit[0].ToString()); //Returns blank string here???
}

private string[] GetSplit(string inputString)
{
    return inputString.Split();
} 
```

欢迎任何想法或建议，我们将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T19:59:08.577

问题是，当您在 处拆分原始字符串时`'='`，您会得到一个在结果开头有一个额外空格的结果，基本上`rawSplit[1]`等于`" 0.4232 Other Currency Name"`。

您可以使用[String.Split](http://msdn.microsoft.com/en-us/library/ms131448.aspx)的重载，它允许您指定删除空条目，这将修剪结果中的任何空白条目。

```
string[] lastSplit = secondRate.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries); 
```

`ToString()`附带说明，当输入已经是字符串时，无需使用：

```
string[] rawSplit = rawInput.Split('=');
// rawSplit is a string array, so rawSplit[0] is already a string...
string firstRate = rawSplit[0]; // .ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:38:45.510

Reed Copsey 已经回答了您当前的问题

```
new[] {' '} 
```

但是，我正在展示其他一些这样做的方法

**通过使用正则表达式**

```
var result = Regex.Match(secondRate, @"\d+(\.\d+)?").Value; 
```

但是假设您的输入字符串是`"0.4232 Other Currency Name 0.45"`您需要匹配两个十进制值的类型。在这种情况下，您可以继续`Regex.Matches`

例如

```
string secondRate ="0.4232 Other Currency Name 0.45";
var result = Regex.Match(secondRate, @"\d+(\.\d+)?").Value;

            MatchCollection matches = Regex.Matches(secondRate, @"\d+(\.\d+)?");
            foreach (Match match in matches)
            {
               foreach (Capture capture in match.Captures)
               {
                   Console.WriteLine("Value={1}", capture.Index, capture.Value);
               }
           } 
```

**通过使用 Where 扩展方法**

完整代码

```
string rawInput = "1 Some Currency Name = 0.4232 Other Currency Name 0.45";
            string[] rawSplit = rawInput.Split('=');
            string firstRate = rawSplit[0].ToString();
            string secondRate = rawSplit[1].ToString();
            string[] lastSplit = secondRate.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

            decimal num = 0;
            lastSplit
                .Where(d => decimal.TryParse(d, out num))
                .ToList()
                .ForEach(i => Console.WriteLine(i)); 
```

**输出**

```
0.4232
0.45 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:22:52.720

正如其他用户之前所说，问题出在空白处。一种简单的解决方案是将 trim() 添加到 conversionRate：

```
rawSplit = GetSplit(conversionRate.Trim()); 
```

这将允许您的其余代码保持完整（即便如此，建议去掉不必要的 ToString() 使用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:02:01.357

下面将返回字符串“0.4232 其他货币名称”

```
string conversionRate = rawSplit[1].ToString(); 
```

这前面有一个空格，所以当再次拆分时：

```
return inputString.Split(); 
```

数组中的 0 位置是该空间，您要么想要位置 1，要么在最终拆分之前进行修剪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T20:02:46.357

字符串的第二部分是`= 0.4232`，= 和 0.4232 之间有一个空格。因此，当您拆分时，第一个条目是空字符串。您可以检查第二个条目，但更好的方法是`string.Trim()`在使用之前`string.Split()`

# http - 让soapUI在附件选项卡中显示附件以获取响应

> ID：12185576
> 
> 赞同：4
> 
> 时间：2012-08-29T19:57:37.800
> 
> 标签：http, soapui

我有一个通过 HTTP GET 返回文件的 REST 服务。

我已经在响应中（在服务器上）设置了这些标头，并且下载在任何浏览器中都可以完美运行： 但是，在soapUI中，它只是将二进制输出打印到响应窗口-我想将文件放入“附件” "底部的标签。 `Content-Length
Content-Type
Content-Disposition`

我试过多部分/混合无济于事。

任何人都知道我应该如何让服务器形成响应，以便soapUI 将文件放在附件选项卡中？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-03T19:53:48.223

我不知道如何将文件放在“附件”选项卡中，但我知道您可以通过 groovy 将二进制输出转换为文件。

你可以试试这个脚本，只需填写三个变量extension,name,textBase64。

```
import org.apache.commons.codec.binary.Base64
def extension = (##extension of your file##)
def name = (##name of your file ##) 
def textBase64 =(##binary output from your request##) 

// Access element Base64-encoded text content 
String tempFilename = "${name}.${extension}"
def b64 = new Base64()
def TextBytes = b64.decode(textBase64.getBytes())

// Output text into a temporary file
def File = new java.io.File(tempFilename)
FileOutputStream fos = new java.io.FileOutputStream(File)
fos.write( TextBytes )
fos.flush()
fos.close()
log.info "File stored as: ${File.getCanonicalPath()}" 
```

可能存在更好的脚本，但这对我来说效果很好

# php - PHP Composer Symfony 错误

> ID：12185578
> 
> 赞同：1
> 
> 时间：2012-08-29T19:57:43.553
> 
> 标签：php, symfony, composer-php

我正在尝试按照 symfony 网站上的说明使用 composer 下载 symfony。

我不断收到此错误：

```
chdir(): No such file or directory (errno 2) 
```

我用谷歌搜索过，没有任何参考资料。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:14:05.493

您是否遵循以下步骤：

1/ `cd /htdocs`cd 进入 web 目录（你要安装 symfony 项目的文件夹）

2/`curl -s http://getcomposer.org/installer | php`下载作曲家文件。

3/`php composer.phar self-update`获取最新版本的 Composer。

4/`php composer.phar create-project symfony/framework-standard-edition ./Symfony`将文件安装在名为 symfony 的文件夹中（您可以将最后一个参数更改为您希望项目所在的任何路径）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:51:46.200

我想这是某种作曲家错误，因为它似乎发生在其他人身上。github 中有一个最近开放的问题，您可能想关注它。

[https://github.com/composer/composer/issues/1041](https://github.com/composer/composer/issues/1041)

同时，您可以尝试下载较早版本的 composer.phar 并查看它是否有效：

[http://getcomposer.org/download/](http://getcomposer.org/download/)

# c# - 在 WP7 中构建画布模板

> ID：12185583
> 
> 赞同：0
> 
> 时间：2012-08-29T19:58:04.537
> 
> 标签：c#, silverlight, windows-phone-7, xaml

    我正在尝试构建一个高尔夫比赛跟踪程序，该程序使用画布为每个玩家保存一组排列好的按钮和数据绑定项目。因为游戏中的人数是动态的，所以我需要能够动态构建画布并动态绑定它们。我遇到的问题是设置数据绑定。如果我尝试在代码中绑定，那么绑定的文本 (text={Binding}) 总是会出现，就好像它是字符串文字而不是实际绑定一样。为了解决这个问题，我尝试构建画布模板，但在构建新玩家时，我找不到将模板实际应用到新画布的方法。

    因此，考虑到所有这些，最好的方法是 A) 使用我的所有控件构建模板画布，以便我可以复制并绑定到每个播放器，或者 B) 动态构建文本绑定而不必求助于 XAML？

编辑：添加以下内容以澄清我如何创建文本块。

```
TextBlock newBlock = new TextBlock
        {
            Text = "{Binding}",
            FontSize = 42,
            DataContext = Player.SomeStat,
            Name = Player.PlayerName ,

        }; 
```

屏幕上显示的文本块值（而不是应有的值）是：{Binding}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:18:02.297

要在代码中创建绑定，您需要执行一些额外的步骤：

```
object myDataObject = DataContext;
Binding myBinding = new Binding();
myBinding.Source = myDataObject;
myBinding.Path="."; // not sure if required
newBlock.SetBinding(TextBlock.TextProperty, myBinding); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:39:09.117

假设您要绑定到代码所在的 Control 实例的数据上下文...

```
textBlock.SetBinding(TextBlock.TextProperty, new Binding("Foo"));
textBlock.DataContext = this.DataContext; 
```

# django - csrf 令牌显示？

> ID：12185585
> 
> 赞同：5
> 
> 时间：2012-08-29T19:58:14.433
> 
> 标签：django, csrf, django-csrf

我是 Django 和 csrf 令牌的新手，所以这是一个全新的问题。我在 detail.html 上有一个简单的复选标记框：

```
<form action="/results/" method="post">{% csrf_token %}
<input type="checkbox" value="1" name="artists">
<p><input type="submit" value="Send" /></p>
</form> 
```

results.html 看起来像这样：

```
<ul>
{% for choice in poll %}
    <li>{{ choice }} </li>
{% endfor %}
</ul> 
```

view.py 看起来像这样：

```
from django.shortcuts import render_to_response
from django.core.context_processors import csrf

def handle(request):
    artists = {}
    c = {}
    c.update(csrf(request)) 
    if request.method == 'POST':
        artists = request.POST.getlist('artists')
    return render_to_response('polls/results.html', {'poll': artists}) 
```

urls.py 看起来像这样：

```
from django.conf.urls import patterns, url
from django.conf import settings

urlpatterns = patterns('',
    url(r'^detail/$', 'django.views.generic.simple.direct_to_template', {'template': 'polls/detail.html'}),
    url(r'^results/$', 'polls.views.handle'),
) 
```

当我加载“detail.html”和视图源时，我看到：

```
<form action="/results/" method="post"><div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='TVidKbDr1SCJUWIMWpPecN5tR862Chbo' /></div>
<input type="checkbox" value="1" name="artists">
<p><input type="submit" value="Send" /></p>
</form> 
```

我有两个问题：

1.  我是否应该在 viewsource 中看到 csrf 令牌（即 value='TVidKbDr1SCJUWIMWpPecN5tR862Chbo'）？我认为它的全部意义在于攻击者看不到这个独特的价值。
2.  在views.py中，我不应该在某处传递变量'c'吗？当我没有通过“c”时，一切都按预期工作。我只是不知道如何使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:27:36.267

1.  不，目的不是让攻击者看不到价值。CSRF（Cross-Site Request Forgery），顾名思义，旨在防止第三方站点或客户端将数据匿名发布到您的表单处理程序视图。CSRF 令牌是在页面加载时生成的，并且必须在提交表单时在响应视图中匹配。第三方实体无法提供匹配代码（因为它是在 Django 内部生成的），因此无法发布表单。它是一个隐藏字段的事实仅仅是它不会呈现给用户，因为它是他们不需要知道或更改的信息。它用于任何形式的保护的想法是疯狂的，因为任何知道足以尝试攻击您的站点的人也知道如何查看源代码。

2.  我不确定您从哪里获取该代码，但首先它是不必要的。Django 的默认行为是将 CSRF 令牌添加到上下文中。如果您使用装饰器在视图上禁用 CSRF 保护，您只需要手动执行此操作`csrf_exempt`，因为您需要*有条件*地 CSRF 保护视图。但是，如果您确实需要这样做，则`c`需要将变量添加到传递给的上下文中`render_to_response`：

    ```
    c = {'poll': artists}
    c.update(csrf(request)

    ...

    return render_to_response('polls/results.html', c) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:07:24.130

1.  是的，这就是隐藏字段的原因
2.  看看[这里](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)

# google-apps-script - 如何使用新功能扩展 UiApp？

> ID：12185587
> 
> 赞同：3
> 
> 时间：2012-08-29T19:58:17.103
> 
> 标签：google-apps-script

我想使用包装函数在 Google Apps Script 中扩展（原型）UiApp，但是在运行如下简单示例时出现 TypeError ......我做错了什么？

```
Object.prototype.addLabel = function(text) {   
  this.createLabel(text);
  return this;
}

function testingxUiApp() {
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var app = UiApp.createApplication().setTitle('playing around UiApp').setHeight("250");
  var panel = app.createFlowPanel().setId('panel');
  app.add(panel);
  panel.add(app.addLabel("adding label for testing"));
  doc.show(app);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:24:39.227

无法扩展 UiApp、Document、Spreadsheet 等高阶类。谷歌阻止了它。如果要执行该`var isObject = UiApp.createApplication() instanceof Object;`行，则`isObject`为 false，尽管`typeof UiApp.createApplication();`表达式返回`object`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T21:28:01.213

顺便说一句，2021 年的注释：（来自[https://b.corp.google.com/issues/36753527](https://b.corp.google.com/issues/36753527)）

看起来 V8 中使用的 Reflect 可以解决问题：

```
 Reflect.set(
    Reflect.getPrototypeOf(SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Some sheet')),
    'myMethod',
    function() {
      return `From sheet '${this.getSheetName()}' with love`;
    }
  );

  let message = SpreadsheetApp.getActiveSheet().myMethod();
  console.log(message); // From sheet 'Sheet1' with love` 
```

# c# - 如何在没有 HTML 标签的情况下从数据库中获取数据？

> ID：12185595
> 
> 赞同：2
> 
> 时间：2012-08-29T19:58:53.960
> 
> 标签：c#, asp.net, html, reporting-services, informix

我面临以下问题。

我使用文本编辑器允许用户在将数据存储到数据库之前对其进行格式化。

我的问题是从我的数据库中检索数据以将其显示在我的报告（报告查看器）中。数据出现`HTML tags`在一个非常糟糕的视图中！

如何解决这个问题？

我试过这个方法：

```
Server.HtmlDecode() 
```

但无济于事

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:07:07.227

一种方法是使用正则表达式删除所有 html 标签：

```
// I use this static method to make it faster.
private static Regex oClearHtmlScript = new Regex(@"<(.|\n)*?>", RegexOptions.Compiled);

public static string RemoveAllHTMLTags(string sHtml)
{
    if (string.IsNullOrEmpty(sHtml))
         return string.Empty;

    return oClearHtmlScript.Replace(sHtml, string.Empty);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:36:58.837

引用：你试过这个方法 Server.HtmlDecode()

根据您所说的，它首先没有编码，因此可以正常工作。您可以使用解码器 utf8Decoder = Encoding.UTF8.GetDecoder(); 使用它或转换为 Unicode。

它仍会出现在报告中，但不会产生您所说的巨大影响。

最好的选择是使用所述的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:07:59.030

您可以尝试使用[html 格式的文本框](http://msdn.microsoft.com/en-us/library/ff519562%28v=sql.105%29)来显示该字段。从问题中不清楚它是否是所需的行为，但这实际上会呈现您的用户输入的一些 html 标签（例如`<b>`）。它不支持所有标签，但我不能 100% 确定如果它不识别标签会做什么（它可能只是忽略/隐藏它）。

编辑：正如@varg 提醒我对问题的评论，可用性取决于您的 SSRS 版本。

# codeigniter - 迁移和 CodeIgniter

> ID：12185596
> 
> 赞同：0
> 
> 时间：2012-08-29T19:58:58.063
> 
> 标签：codeigniter, migration

我有一个简单的问题。我想开始使用 CodeIgniter 迁移。但是我的配置文件夹中没有 migrations.php 文件，就像文档中所说的那样。另外，我是否需要在应用程序文件夹级别手动创建迁移文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:57:34.860

奇怪的是，您的`application/config/migration.php`文件未包含在下载中，但是...即使配置文件不存在，迁移库仍将（或应该）在您的 CodeIgniter`system/libraries`文件夹中。

`migration.php`作为默认配置文件的一部分，有三个配置变量：

```
/*
|--------------------------------------------------------------------------
| Enable/Disable Migrations
|--------------------------------------------------------------------------
|
| Migrations are disabled by default but should be enabled 
| whenever you intend to do a schema migration.
|
*/
$config['migration_enabled'] = FALSE;

/*
|--------------------------------------------------------------------------
| Migrations version
|--------------------------------------------------------------------------
|
| This is used to set migration version that the file system should be on.
| If you run $this->migration->latest() this is the version that schema will
| be upgraded / downgraded to.
|
*/
$config['migration_version'] = 0;

/*
|--------------------------------------------------------------------------
| Migrations Path
|--------------------------------------------------------------------------
|
| Path to your migrations folder.
| Typically, it will be within your application path.
| Also, writing permission is required within the migrations path.
|
*/
$config['migration_path'] = APPPATH . 'migrations/'; 
```

# javascript - Google Maps V3 api 仅显示 Javascript 循环中的一些标记

> ID：12185599
> 
> 赞同：0
> 
> 时间：2012-08-29T19:59:05.830
> 
> 标签：javascript, google-maps-api-3

我一直在搜索 Google Map Api 关于此问题的所有回复，但未能提出解决方案。

我有一个 javascript 数组“js_pickup_location_info”，其中包含 17 个对象，包括所有经纬度信息。我正在尝试遍历并在谷歌地图上显示所有 17 个标记。然而，17 个标记中只有 8 个出现在地图上。下面是代码。

谢谢你的帮助。

```
function initialize() {
    var myLatlng = new google.maps.LatLng(myLat,myLong);
    var mapOptions = {
         zoom: 14,
         center: myLatlng,
         mapTypeId: google.maps.MapTypeId.ROADMAP
     }
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var c= js_pickup_location_info.length;
    console.log(c);
    for (var i=0; i<c; i++){

        pickup_id= js_pickup_location_info[i]['pickup_id'];
        pickup_latlng= new google.maps.LatLng(js_pickup_location_info[i]['latitude'],js_pickup_location_info[i]['longitude']);
        contentString= '<div id="content">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h2 id="firstHeading" class="firstHeading">'+js_pickup_location_info[i]['address']+'</h2>'+
                '<div id="bodyContent">'+
                '<p>'+js_pickup_location_info[i]['pickup_day']+'</p>'+
                '<p>HOLDER Insert Ajax Link</p>'+
                '</div>'+
                '</div>';

        var infowindow = new google.maps.InfoWindow({
                content: contentString
                // could add size: new google.maps.Size(50,50)
            });
        var marker = new google.maps.Marker({
                position: pickup_latlng,
                map: map,
                title: pickup_id
            });

        google.maps.event.addListener(marker, 'click', function() {
              infowindow.open(map,marker);
            });
            }
        }

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyCH-RktY6ZGD8AlwxEzzF28nzCrRMjEfjE&sensor=false&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:25:31.570

变量范围问题，如下所示对以下部分进行更改，它应该可以工作

```
google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(this.html);
    infowindow.open(map, this);
}); 
```

# jquery - 通过不同的功能保持计数一致

> ID：12185605
> 
> 赞同：2
> 
> 时间：2012-08-29T19:59:40.500
> 
> 标签：jquery, forms

您好我正在使用以下代码将文件输入添加到我的表单中：

```
var addFile = document.getElementById('addFile');
addFile.onclick = function addFile() {
    if (this.count == undefined) {
        this.count = 0;
    }
    if (this.count++ < 2) {
        $(".files").append('<tr><td><input type="file" name="uploaded_file[]" class="file_input" size="46" style="margin-top:1px;"/><a class="delete" href="javascript:void(0)" style="color:blue; padding-left:15px;">Remove File</a></td></tr>');
    }
    if (this.count == 2) {
        alert('If you wish to upload more than 3 files \nplease compile them into a .zip or .rar file');
    }
}; 
```

以下代码用于删除文件输入。

```
$(function () {
    $(".delete").live("click", function () {
        $(this).parent().remove();
    });
}); 
```

我正在寻找一种可能将两者结合起来的方法，当我删除文件时，整体输入计数为 -1，与添加时为 +1 相同。这样，如果用户添加一个插槽然后删除一个然后重新添加一个，则计数是一致的。欢迎任何帮助。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:06:42.100

每次都获取计数，而不是存储和持久化计数。

```
addFile.onclick = function addFile() {
    var count = $(".files tr .file_input").length;
    if ( count < 3 ) {
        // append the row
    }
    else {
        // don't append the row
    }
} 
```

它可能效率稍低，但更易于管理。

# php - URL重写后PHP获取当前文件名

> ID：12185607
> 
> 赞同：4
> 
> 时间：2012-08-29T19:59:42.560
> 
> 标签：php

我知道`$_SERVER["REQUEST_URI"];`可以用来获取当前页面的 url，但是如果 URL 是 htaccess URL 重写，这不起作用。

如何获取当前 php 文件的真实（未重写）文件名？

例如我去[http://site.com/page/](http://site.com/page/)它重写并显示[http://site.com/page.php](http://site.com/page.php)

`$_SERVER["REQUEST_URI"];`只会给我重写，我想要原版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:01:19.440

您可以使用 php 常量`__FILE__`，如下所示：

```
 echo __FILE__; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:01:33.240

您可以使用`$_SERVER['SCRIPT_NAME']`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T20:03:19.483

您可以使用`$_SERVER['PHP_SELF']`获取当前脚本或`__FILE__`获取当前文件。区别在于包含的文件。如果文件 A.php 包含文件 B.php，则在文件 B.php`$_SERVER['PHP_SELF']`中将包含 A.php，因为它是调用脚本，并且`__FILE__`具有调用该行的确切文件，即 B.php。前任：

A.php：

```
<?php
include("B.php"); 
```

B.php：

```
<?php
echo '__FILE__ has: '.__FILE__.'<br />'; //shows B.php
echo '$_SERVER["PHP_SELF"] has: '.$_SERVER['PHP_SELF'].'<br />'; //shows A.php 
```

# facebook-graph-api - Facebook 没有为嵌入式播放器挑选视频元标签

> ID：12185612
> 
> 赞同：-2
> 
> 时间：2012-08-29T20:00:06.017
> 
> 标签：facebook-graph-api, video, flash, facebook-wall

这是我页面上的标签[http://www.snagfilms.com/films/title/trembling_before_g_d](http://www.snagfilms.com/films/title/trembling_before_g_d)

```
<link rel="media:image" href="http://ec.snagfilms.com/images/Broomfield/kurtandcourtney/kurtcourtney_600x337.jpg" />
<meta name="date" content="2010-02-01" />
<meta name="medium" content="video" />
<meta name="video_width" content="600" />
<meta name="video_height" content="337" />
<meta name="video_type" content="application/x-shockwave-flash" />
<meta property="og:image" content="http://ec.snagfilms.com/images/Broomfield/kurtandcourtney/kurtcourtney_600x337.jpg" />
<meta property="og:type" content="video" />
<meta property="video:duration" content="5700" />
<meta property="og:title" content="Kurt and Courtney" />
<meta property="og:video:width" content="600" />
<meta property="og:video:height" content="337" />
<meta property="og:video:type" content="application/x-shockwave-flash" />
<meta property="og:video" content="http://player.snagfilms.com/SnagFilmsEmbedPlayer.swf?src=rtmp://snagfilms.com/guid:86e89160-a747-11e0-a92a-0026bb61d036&autoPlay=true"/>
<meta property="og:video:secure_url" content="https://player.snagfilms.com/SnagFilmsEmbedPlayer.swf?src=rtmp://snagfilms.com/guid:86e89160-a747-11e0-a92a-0026bb61d036&autoPlay=true"/>
<meta property="og:description" content="Beginning as an observation of the music of Kurt Cobain and his Seattle/Portland contemporaries.  Watch free movies and documentaries at SnagFilms."/>
<meta property="og:url" content="http://www.snagfilms.com/films/title/kurt_and_courtney" />
<meta property="og:site_name" content="SnagFilms"/>
<meta property="fb:app_id" content="214835748554764"/>
<meta property="fb:admins" content="100001749790181"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:38:08.213

在我看来很好 ：）

注意：第一次抓取您的网站时，会缓存内容。因此，如果您在测试期间的某个时间点“赞”了一个页面或发送了一个 OG 操作，则内​​容很可能被缓存了。如果您不自己强制重新抓取，我们会每 7 天重新抓取一次内容。

要强制重新刮擦，您可以使用[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.snagfilms.com%2Ffilms%2Ftitle%2Ftrembling_before_g_d](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.snagfilms.com%2Ffilms%2Ftitle%2Ftrembling_before_g_d)（也有助于检查您的元标记已正确设置）。

如果您想以编程方式执行此操作，请查看[https://developers.facebook.com/docs/opengraph/objects/](https://developers.facebook.com/docs/opengraph/objects/)中的更新对象部分（页面底部）

# php - 形成查询以返回两个不同表的信息

> ID：12185614
> 
> 赞同：0
> 
> 时间：2012-08-29T20:00:10.160
> 
> 标签：php, mysql, join

我有一张桌子`shop_inventory`和另一张桌子`shops`。我想计算`DISTINCT zbid`from的数量和where`shop_inventory`的行数。我试过这样：`shops``cid=1 AND zbid!=0`

```
SELECT COUNT(a.cid) shops,COUNT(DISTINCT b.zbid) buyers 
FROM shops a 
JOIN shop_inventory b ON b.cid=a.cid 
WHERE a.zbid!=0 AND a.cid=1 
```

但是，这返回了 100 个商店而不是 2 个，这是正确的答案。我想我不明白如何`JOIN`正确工作。有人可以为这个查询提供修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:03:01.310

许多相关行上的`JOIN`商店数量都在减少。

试试这个解决方案：

```
SELECT COUNT(DISTINCT a.cid, a.zbid) shops, 
       COUNT(DISTINCT b.zbid) buyers
FROM   shops a
JOIN   shop_inventory b ON a.cid = b.cid
WHERE  a.cid = 1 AND a.zbid <> 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:14:33.197

如果这让你得到你想要的商店数量：

```
SELECT COUNT(1) AS shops
  FROM shops a
 WHERE a.zbid != 0
   AND a.cid = 1 
```

然后，包含另一个表的计数的一种方法是使用相关子查询。（这种方法存在一些性能问题，如果外部查询返回有限数量的行，这种方法效果很好。）

```
SELECT COUNT(1) AS shops
     , ( SELECT COUNT(DISTINCT b.zbid)
           FROM shop_inventory b
          WHERE b.cid = a.cid
       ) AS buyers
  FROM shops a
 WHERE a.zbid != 0
   AND a.cid = 1 
```

另一种方法是使用子查询的连接（内联视图）......

```
SELECT COUNT(1) AS shops
     , c.buyers AS buyers
  FROM shops a
  JOIN ( SELECT b.cid, COUNT(DISTINCT b.zbid) AS buyers
           FROM shop_inventory b
          WHERE b.cid = 1
          GROUP BY b.cid
       ) c
 WHERE a.zbid != 0
   AND a.cid = 1
   AND a.cid = c.cid 
```

如果那些没有返回您正在寻找的结果集，那么我可能误解了规范。

# amazon-web-services - 如何在 Amazon Linux 实例上安装 Railo？

> ID：12185616
> 
> 赞同：5
> 
> 时间：2012-08-29T20:00:27.423
> 
> 标签：amazon-web-services, railo, cfml

我已经设置了一个新的 Amazon Linux 实例，接下来要在上面安装 Railo 的步骤是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:00:27.423

首次登录时，您将收到“今日消息”，要求更新其他工具。要安装更新，只需输入命令提示符

```
sudo yum update 
```

在你可以安装 Railo 之前安装 Apache 来处理所有的网络流量，即 80。

```
sudo yum install httpd httpd-devel 
```

接下来确保在实例启动时加载服务。

```
sudo chkconfig --level 2345 httpd on 
```

现在在浏览器中导航到该实例。您可能需要在您的安全组中允许端口 80 上的流量。我刚刚编辑了我的安全组以允许来自 AWS 控制台内的该端口上的 http 流量。

接下来要安装 Railo，首先要创建一个下载 Railo 的目录。

```
sudo mkdir /temp 
```

然后将 CD 放入此文件夹。

```
cd /temp 
```

接下来将 Ralio 下载到新创建的文件夹中。

```
sudo wget http://www.getrailo.org/down.cfm?item=/railo/remote/download/4.0.0.013/tomcat/linux/railo-4.0.0.013-BETA2-linux-x64-installer.run 
```

将上面的 URL 替换为最新的稳定版本。

在破坏安装程序之前，请确保在这种情况下更改您刚刚下载的文件的权限...

```
sudo chmod 777 railo-4.0.0.013-BETA2-linux-x64-installer.run 
```

运行安装程序

```
sudo ./ railo-4.0.0.013-BETA2-linux-x64-installer.run 
```

Railo 现在应该在端口 8888 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:33:10.963

只需添加... 确保将所有文件（包括任何配置文件、MYSQL 数据文件和日志）存储在 EC2 卷上，以便您可以利用快照。这也包括将您的实例备份到 EBS。

没有什么比让您的 EC2 实例消失而无法恢复更有趣的了。;)

# java - 将另一个类的面板实例添加到父面板

> ID：12185623
> 
> 赞同：2
> 
> 时间：2012-08-29T20:00:56.847
> 
> 标签：java, swing, awt, jpanel

这个类的构造有问题吗？我正在尝试将它的一个实例添加到另一个类中的 JPanel：

```
public class calculator2 extends JPanel {
     public calculator2() {
         JPanel x = new JPanel();
         x.setLayout(new GridLayout(0,5));

         x.add(new JLabel());
         x.add(new JButton("<<"));
         x.add(new JLabel());
         x.add(new JButton(">>"));
         x.add(new JLabel());
     }
} 
```

这就是我试图使用它：

```
 calculator2 test = new calculator2();
    JPanel panel3 = new JPanel(new BorderLayout());
    panel3.add(test, BorderLayout.SOUTH); 
```

我没有收到任何类型的运行时错误，只是没有出现。当我将来自calculator2 类的代码放在我在第二部分代码中使用的同一类中时，它会显示出来。谢谢您的考虑。

这实际上只是一个示例，我有一个包含大约 25 个组件的完整类，使用 actionlistener 等，并希望使用上述方法将其添加到面板中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:03:49.030

在这里，您只是创建面板，而没有将其添加到任何可见的地方。尝试使用从 JPanel 继承的父方法，而不是在构造函数中创建另一个 JPanel 的新实例。

这将是，只需删除名为 x 的实例。

```
public class calculator2 extends JPanel {
  public calculator2() {
     super();
     setLayout(new GridLayout(0,5));

     add(new JLabel());
     add(new JButton("<<"));
     add(new JLabel());
     add(new JButton(">>"));
     add(new JLabel());
 }
} 
```

# android - 最近的 Android SDK 更新导致应用程序崩溃

> ID：12185625
> 
> 赞同：0
> 
> 时间：2012-08-29T20:01:15.083
> 
> 标签：android, xml, android-layout, mobile

我最近更新到最新版本的 Android SDK。在更新之前，我的应用程序运行良好。现在我在运行时开始出现以下错误。我尝试在我的第一个活动开始时进行调试，但我的应用程序似乎并没有那么远。有谁知道我需要做什么才能让我的应用程序恢复运行？

```
08-29 13:45:27.974: E/AndroidRuntime(5266):     FATAL EXCEPTION: main
08-29 13:45:27.974: E/AndroidRuntime(5266):     java.lang.RuntimeException: Unable to instantiate application com.my_application.my_application:java.lang.ClassCastException: com.my_application.my_application
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.LoadedApk.makeApplication(LoadedApk.java:490)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3779)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.ActivityThread.access$2200(ActivityThread.java:132)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1082)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.os.Looper.loop(Looper.java:150)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.ActivityThread.main(ActivityThread.java:4263)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at java.lang.reflect.Method.invoke(Method.java:507)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at dalvik.system.NativeStart.main(Native Method)
08-29 13:45:27.974: E/AndroidRuntime(5266):     Caused by: java.lang.ClassCastException: com.my_application.my_application
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.Instrumentation.newApplication(Instrumentation.java:966)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.Instrumentation.newApplication(Instrumentation.java:951)
08-29 13:45:27.974: E/AndroidRuntime(5266):     at android.app.LoadedApk.makeApplication(LoadedApk.java:481)
08-29 13:45:27.974: E/AndroidRuntime(5266):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:43:32.787

```
com.my_application.my_application 
```

看起来问题是package**和**sub **-package的****名称相同**。

 ****因此，*您的清单中的小修改*应该可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:32:51.780

几天前，我的队友遇到了几乎相同的问题，但是在调用另一个活动（在模拟器上）之后发生了运行时异常。同时，这个项目在我的机器上完美运行，并且由于模拟器调试运行时没有问题。问题似乎出在项目依赖库不匹配（项目 prop-java 构建路径库）中。由于某种原因， ***“Android 依赖项”***类路径被排除在此列表之外，在编译时间到期时没有错误。

尝试

```
Android Tools->Fix project properties 
```

它在我们的案例中有所帮助****

# c++ - 在 C++ 中将 cout 与变量一起使用时出错

> ID：12185629
> 
> 赞同：1
> 
> 时间：2012-08-29T20:01:41.670
> 
> 标签：c++

我正在用 C++ 编写一个简单的程序来计算购买的税款并输出它。我的代码正在输出设置但未更改的文本和变量。但是，它没有输出根据税率计算和设置的变量，而是输出 0。感谢您的帮助！对我来说第一周的课，所以如果可以的话，试着把它变笨:)

这是代码：

```
#include <iostream>
using namespace std;

int main()
{
int price = 52, stateTaxRate = 4, countyTaxRate = 2;

double stateTax = price / 100 * stateTaxRate;
double countyTax = price / 100 * countyTaxRate;
double totalTax = countyTax + stateTax;
double total = price + totalTax;

cout << "State Tax: " << stateTax << " ";

cout << "County Tax: " << countyTax << " ";

cout << "Total Tax: " << totalTax << " ";

cout << "Total: " << total << " ";  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:05:10.763

你正在做整数除法。

```
 int price = 52, stateTaxRate = 4, countyTaxRate = 2; 
```

正在评估

```
 price / 100 
```

结果为0。

一个整数除以另一个整数不会导致 C++ 中的浮点数。相反，它会截断（即删除）您希望在“.”之后看到的所有内容。它不知道在您正在评估的表达式的最里面点最终一切都会变成双精度。

将变量更改为双精度数，您将得到不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:03:43.160

```
double stateTax = price / 100 * stateTaxRate; 
```

`price / 100`其中价格`int`为 0。使用

```
double stateTax = static_cast<double>(price) / 100 * stateTaxRate; 
```

在其他情况下也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T20:04:38.290

当价格 = 52 为 0 时，价格 / 100。如果您将价格更改为双倍，您将得到您想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T20:05:01.950

您的输入是整数，并且方程式的设置方式使得结果也将被“视为”整数。例如（简化以理解要点）：

```
int price = 52;
double stateTax = price / 100; 
```

`stateTax`将为 0，因为 52/100 = 0.52 作为 int 被截断为 0。

在计算中做`price`一个 double 以获得预期的结果：

```
int price = 52;
double stateTax = (double)price / 100; 
```

因为 52.0/100 = 0.52 作为双倍。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T20:05:53.807

类型转换问题。像这样声明

```
double price = 52, stateTaxRate = 4, countyTaxRate = 2; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-29T21:09:19.803

只需更改`100`为`100.0` 对我们来说它是相同的，但额外的`.0`C++ 会知道它是双倍的，你想要双倍的结果。

为什么？计算 C++ 时采用更精确的类型。

```
int + int = int;
int + double = double;
short int + int = int;

100 = int
100u = unsigned
100.0 = double
100.0f = float 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-29T20:31:03.017

`int / int = int`. 即使您将结果存储在双精度中，结果也会在它变成双精度之前被截断。

`double stateTax = price / 100 * stateTaxRate;`
与: 相同
`double = int / int * int`，这意味着结果将是一个 int 然后存储在 double 中。

尝试将 100 写为 100.0。或者你可以把你的整数变成双精度或浮点数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-29T20:04:50.310

您期望从计算中得到小数 - 浮点 - 结果，但它们都使用整数值，因此您将丢失小数部分。

例如，在此计算中：`double stateTax = price / 100 * stateTaxRate;`,`price/100`最终将为零。由于这是整数除法，因此小数部分被截断。

您需要强制进行浮点计算。这是一种方法（请注意，它使用`100.0`而不是`100`）：

```
double stateTax = price / 100.0 * stateTaxRate; 
```

或者，因为`price`是计算的根，所以将其声明为`double`：

```
double price = 52.0; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-29T20:09:01.183

将变量的类型从 更改`int`为`double`。

整数变量使编译器使用整数运算符，而整数除法运算符 (/) 会截断结果。那是你的问题。

`(price / 100) * tax`或`price / (100 * tax)`（无论编译器首先要评估哪个）都将返回 0。

# objective-c - iOS ObjC 网络和后台选择器

> ID：12185645
> 
> 赞同：0
> 
> 时间：2012-08-29T20:03:09.560
> 
> 标签：objective-c, ios, multithreading, networking, selector

我正在尝试使用 NSURLConnection 通过 HTTP 获取图像。我在后台执行选择器

```
[self performSelectorInBackground:@selector(loadingDaemon) withObject:nil]; 
```

我在哪里做这个

```
NSString *fullImageURL = [NSString stringWithFormat:@"http://%@/%@", baseURL, currentlyLoadingImage];
NSURL *imgURL = [NSURL URLWithString:fullImageURL];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:imgURL];
request.timeoutInterval = 10;
NSURLConnection *newConnection = [NSURLConnection connectionWithRequest:request delegate:self]; 
```

我将 NSURLConnection 的委托设置为**self**并实现方法

```
connection:didReceiveResponse:
connection:didReceiveData:
connection:didFailWithError:
connectionDidFinishLoading: 
```

此外，我记录每个方法调用和条件分支。但是上面的 4 个函数永远不会被调用。请你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:52:42.113

您正在创建的 NSURLConnection 正在后台执行这些操作，因此不需要在后台执行它，这就是它不适合您的原因。您可以将 NSURLConnection sendAsynchronousRequest 与当前调用选择器的方式一起使用，或者直接调用该函数。

# c# - WPF ComboBox ItemsSource Binding 设置时为什么不更新？

> ID：12185654
> 
> 赞同：1
> 
> 时间：2012-08-29T20:04:03.220
> 
> 标签：c#, wpf, xaml, properties, dependencies

我在一个名为的用户控件中有以下内容`UserInputOutput`：

```
<ComboBox Grid.Column="1" Background="White" Visibility="{Binding InputEnumVisibility}"     
          FontSize="{Binding FontSizeValue}" Width="Auto" Padding="10,0,5,0"     
          ItemsSource="{Binding EnumItems}"     
          SelectedIndex="{Binding EnumSelectedIndex}"/> 
```

我在这里有几个绑定，除了 ItemsSource 之外，它们都很好用。这是我的依赖属性和公共变量。

```
public ObservableCollection<String> EnumItems
{
    get { return (ObservableCollection<String>)GetValue(EnumItemsProperty); }
    set { SetValue(EnumItemsProperty, value); }
}

public static readonly DependencyProperty EnumItemsProperty =
    DependencyProperty.Register("EnumItems", typeof(ObservableCollection<string>),typeof(UserInputOutput) 
```

除 ComboBox 的 ItemSource 外，所有绑定都在 XAML 中设置。这必须在运行时设置。在我的代码中，我使用以下内容：

```
ObservableCollection<string> enumItems = new ObservableCollection<string>();
UserInputOutput.getEnumItems(enumItems, enumSelectedIndex, ui.ID, ui.SubmodeID);
instanceOfUserInputOutput.EnumItems = enumItems; 
```

我在从文件加载 XAML 后运行此代码。在我将其`instaceOfUserInputOutput.EnumItems`设置为等于 enumItems 后，它包含正确的项目，但它没有显示在我的程序的组合框中。

不知道我要去哪里错了。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:15:45.353

我假设您的 ViewModel 类（用作绑定源的类）实现了 INotifyPropertyChanged 接口。否则更新将不起作用。

然后，在您的 setter 方法中，执行以下操作：

```
set
{
     // set whatever internal properties you like
     ...

     // signal to bound view object which properties need to be refreshed
     OnPropertyChanged("EnumItems");
} 
```

其中 OnProperyChanged 方法是这样的：

```
protected void OnPropertyChanged(string propertyName)
{
    PropertyChangedEventHandler handler = this.PropertyChanged;
    if (handler != null)
    {
        var e = new PropertyChangedEventArgs(propertyName);
        handler(this, e);
    }
} 
```

顺便说一句，我不知道为什么需要将 EnumItems 声明为依赖属性。将它作为类字段可以正常工作，除非您想将其用作绑定目标（现在它用作绑定源）。

# c# - 通讯簿 C# GUI

> ID：12185655
> 
> 赞同：0
> 
> 时间：2012-08-29T20:04:10.963
> 
> 标签：c#, user-interface, special-folders

好吧，所以我决定创建我的第一个 GUI 地址簿，并且我一直在关注 Youtube 上的教程，该教程允许我们创建一个地址簿，假设将输入文本框中的信息存储为 xml，但我已经一直有麻烦。

因此，当表单加载时，假设检查名为“地址簿”的文件夹，如果不存在，则创建它。然后检查文件是否在其中，如果没有，它会创建它。但是由于某种原因，该文件夹没有被创建，即使它不存在，与 xml 文件相同。

```
private void Form1_Load(object sender, EventArgs e)
{
    string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
    if(!Directory.Exists(path + "\\Address Book"))
        Directory.CreateDirectory(path + "\\Address Book");
    if (!File.Exists(path + "\\Address Book\\settings.xml"))
        {
            XmlTextWriter xW = new XmlTextWriter(path + "\\Address Book\\settings.xml", Encoding.UTF8);
            xW.WriteStartElement("People");
            xW.WriteEndElement();
            xW.Close();
        } 
```

谁能指出我的错误？原始路径是 SpecialFolder.ApplicationData 但我想使用桌面，因为只需单击一下即可查找文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:06:38.813

听起来很像`Read/Write`权限访问问题。

不要使用`Desktop`类似文件/目录的写入目标，而是使用您的操作系统所在的文件夹`User`，因此应用程序也*保证*具有相对权限。所以你在教程中看到的那些文件夹。尤其是最新`WinOS`的 es 对这类东西非常严格。

如果它让您感到沮丧，每次都导航到这些文件`link`夹，请在您的`Desktop`. 快速简单。

# c# - FileUpload.PostedFile 始终为空，除非页面至少回发一次？

> ID：12185656
> 
> 赞同：3
> 
> 时间：2012-08-29T20:04:23.340
> 
> 标签：c#, asp.net, asynchronous

似乎是一个明显的问题，但我仍然感到困惑。我在页面上有一个asp FileUpload 控件，它也恰好位于UpdatePanel 内。我将 UpdatePanel 设置为 UpdateMode="Conditional"。我还在触发器部分设置了一个回发触发器（不是异步回发触发器）。单击按钮时，应该将文件上传到数据库，在我的数据层中处理。在第一次尝试时，它会因为 PostedFile 为空而失败，但您会看到页面执行回发（这本质上会清除/重置下载控件）。当我再次尝试上传文件时，一切正常。我的第一个想法是因为它需要回发才能真正获取字节，对吧？好吧，所以在这个逻辑下，我想如果我尝试上传不同的文件，那么它实际上会上传前一个文件。它没有; 它上传了新文件。所以这就是我感到困惑的地方。

上传方法如下：

```
protected void ReplaceDoc()
{
    var data = ulReplaceDoc.FileBytes;
    var fileName = ulReplaceDoc.PostedFile.FileName;
    if (MocApi.ReplaceWorkingDocument(_request.MocRequestID, _currentUser, fileName, data))
    {
        //refresh files
        ShowFiles();
    }
} 
```

很直接。它应该抓取文件，上传它（在数据库上运行 UPDATE 查询以更改文件），然后刷新数据源以显示新文件。

所以我的问题是：为什么它只在第一次尝试时失败？另外，实现这种效果的更好方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T17:54:36.560

在页面加载事件中，添加以下代码，

```
Page.Form.Attributes.Add("enctype", "multipart/form-data"); 
```

它会起作用的。首次回发期间缺少 enctype 属性。

# c++ - 如何将字符串从 Boost 1.46 传递给“validation_error”方法？

> ID：12185657
> 
> 赞同：2
> 
> 时间：2012-08-29T20:04:26.347
> 
> 标签：c++, boost

我正在尝试编译由[Dalal 和 Triggs](http://pascal.inrialpes.fr/soft/olt/)发布的使用 Boost 库的程序。`validation_error`由于作者使用的版本`1.35`（`1.46`

在[旧版本](http://www.boost.org/doc/libs/1_41_0/doc/html/boost/program_options/validation_error.html)中，`validation_error`作者使用的方法具有以下结构：

```
validation_error(const std::string & what); 
```

我正在运行的 Boost[版本如下：](http://www.boost.org/doc/libs/1_46_1/doc/html/boost/program_options/validation_error.html)

```
validation_error(kind_t kind, const std::string & option_value = "", 
                 const std::string & option_name = ""); 
```

在代码中，作者将 a 传递`string`给旧`validation_error`方法（示例如下）。

```
std::ostringstream ost;
ost << "value " << *value
      << " greater than max value " << max;
throw po::validation_error(ost.str()); 
```

我怎样才能将它传递`string`给新版本`validation_error`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:37:06.673

你可以做类似的事情

```
throw boost::program_options::validation_error(
    boost::program_options::validation_error::invalid_option_value,
    "option name",
    *value
); 
```

或者

```
throw boost::program_options::invalid_option_value(ost.str()); 
```

# objective-c - iPad - 根据设备方向（纵向或横向）更改图像

> ID：12185661
> 
> 赞同：0
> 
> 时间：2012-08-29T20:04:42.567
> 
> 标签：objective-c, ios, ipad, device-orientation

在我的`viewDidLoad`方法中，我正在应用一个“加载图像”，它会`webView`在完成加载之前出现。我想根据 iPad 所处的方向（纵向或横向）指定不同的加载图像。

我找到[了这个页面](https://stackoverflow.com/questions/5174084/no-perfect-way-to-detect-device-orientation-on-ipad)，这是我的代码的基础。

我的代码如下所示。（这都包含在我的`viewDidLoad`方法中）。目前这只适用于**纵向**模式。知道为什么我的横向代码没有被调用吗？请帮忙！

```
//detect if iPad    
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
//if in Portrait Orientation
            if([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortrait) {
                loadingImage = [UIImage imageNamed:@"webView-load-image-Portrait~ipad.png"];
                loadingImageView = [[UIImageView alloc] initWithImage:loadingImage];
                loadingImageView.animationImages = [NSArray arrayWithObjects:
                                                    [UIImage imageNamed:@"webView-load-image-Portrait~ipad.png"],
                                                    nil];
            }
//if in Landscape Orientation
            if([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeLeft
               || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeRight) {
                loadingImage = [UIImage imageNamed:@"webView-load-image-Landscape~ipad.png"];
                loadingImageView = [[UIImageView alloc] initWithImage:loadingImage];
                loadingImageView.animationImages = [NSArray arrayWithObjects:
                                                    [UIImage imageNamed:@"webView-load-image-Landscape~ipad.png"],
                                                    nil];
            }

        } 
```

**更新**

我知道您应该能够使用图像文件名修饰符，以便设备自动提取正确的图像。我尝试将 webView-load-image.png 放入我的应用程序图像文件夹中，并使用所有正确的扩展名（并`-Portrait~ipad`从文件名中删除）：

*   webView-load-image~iphone.png
*   webView-load-image@2x~iphone.png
*   webView-load-image-Landscape~ipad.png
*   webView-load-image-Landscape@2x~ipad.png
*   webView-load-image-Portrait~ipad.png
*   webView-load-image-Portrait@2x~ipad.png

它仍然无法正常工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:45:41.173

我回顾了我不久前开发的一个应用程序，我正在做类似的事情。这就是我让它工作的方式......

我创建了一种方法来处理方向的变化......

```
BOOL isPortraitView = YES;

@implementation MyViewController
{
    // a bunch of code...

    - (void)setOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        if (UIInterfaceOrientationIsPortrait(interfaceOrientation))
        {
            isPortraitView = YES;

            // do other stuff
        }
        else
        {
            isPortraitView = NO;

            // do other stuff
        }
    }

    // other code...
} 
```

它接受一个`UIInterfaceOrientation`值，因此您不必使用状态栏方法（如果我没记错的话，该方法不是最好的/最可预测的）。我还存储了一个类级别的布尔值以供快速参考。然后我在方法上调用它`willRotateToInterfaceOrientation`。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self setOrientation:toInterfaceOrientation];
} 
```

这也可以处理加载过程中的方向变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:01:33.373

很高兴你明白了，但看在上帝的份上，删除方向的硬编码数值！为此声明了枚举：

```
typedef NS_ENUM(NSInteger, UIDeviceOrientation) {
    UIDeviceOrientationUnknown,
    UIDeviceOrientationPortrait,            // Device oriented vertically, home button on the bottom
    UIDeviceOrientationPortraitUpsideDown,  // Device oriented vertically, home button on the top
    UIDeviceOrientationLandscapeLeft,       // Device oriented horizontally, home button on the right
    UIDeviceOrientationLandscapeRight,      // Device oriented horizontally, home button on the left
    UIDeviceOrientationFaceUp,              // Device oriented flat, face up
    UIDeviceOrientationFaceDown             // Device oriented flat, face down
}; 
```

和

```
typedef NS_ENUM(NSInteger, UIInterfaceOrientation) {
    UIInterfaceOrientationPortrait           = UIDeviceOrientationPortrait,
    UIInterfaceOrientationPortraitUpsideDown = UIDeviceOrientationPortraitUpsideDown,
    UIInterfaceOrientationLandscapeLeft      = UIDeviceOrientationLandscapeRight,
    UIInterfaceOrientationLandscapeRight     = UIDeviceOrientationLandscapeLeft
}; 
```

你可能应该检查你的 viewController`interfaceOrientation`而不是设备方向。

此外，请查看以下宏：

```
UIInterfaceOrientationIsPortrait(orientation)
UIInterfaceOrientationIsLandscape(orientation) 
```

您的代码应该看起来更像：

```
UIInterfaceOrientationIsLandscape(self.interfaceOrientation) {
    // show landscape image
} else {
    // show portrait image
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:49:05.780

我自己想通了。如果其他人遇到同样的问题，这对我有用：

```
//ViewController.h
@interface ViewController : GAITrackedViewController {
    // ...other code
    UIImage *loadingImage;
}

@property(nonatomic, strong) UIImageView *loadingImageView;

//ViewController.m
    - (void)viewDidLoad
    {
        [super viewDidLoad];

        ...bunch of other code....

    // Subscribe to device orientation notifications, and set "orientation" - will return a number 1-5, with 5 being "unknown".
        [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
        UIInterfaceOrientation orientation = [UIDevice currentDevice].orientation;

    //**************** Start Add Static loading image  ****************/
        //if iPhone
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        loadingImage = [UIImage imageNamed:@"webView-load-image~iphone.png"];
        loadingImageView = [[UIImageView alloc] initWithImage:loadingImage];
            loadingImageView.animationImages = [NSArray arrayWithObjects:
                                                [UIImage imageNamed:@"webView-load-image~iphone.png"],
                                                nil];
        }

       if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
           if(orientation == 3 || orientation == 4) {
               loadingImage = [UIImage imageNamed:@"webView-load-image-Landscape~ipad.png"];
               loadingImageView = [[UIImageView alloc] initWithImage:loadingImage];
               loadingImageView.animationImages = [NSArray arrayWithObjects:
                                                   [UIImage imageNamed:@"webView-load-image-Landscape~ipad.png"],
                                                   nil];
               NSLog(@"Set webView-load-image iPhone Landscape");

           }
           if(orientation == 5) {
               NSLog(@"Set webView-load-image UNKNOWN");
           }
           if(orientation == 1) {
                loadingImage = [UIImage imageNamed:@"webView-load-image-Portrait~ipad.png"];
                loadingImageView = [[UIImageView alloc] initWithImage:loadingImage];
                loadingImageView.animationImages = [NSArray arrayWithObjects:
                                                    [UIImage imageNamed:@"webView-load-image-Portrait~ipad.png"],
                                                    nil];
                NSLog(@"Set webView-load-image iPad Portrait");
            }

        }

        [self.view addSubview:loadingImageView];
        // End Add Static loading image 
```

# android - 在 TableLayout 中右对齐

> ID：12185670
> 
> 赞同：1
> 
> 时间：2012-08-29T20:05:19.700
> 
> 标签：android, android-layout, alignment, tablelayout

我仍然没有找到如何在 XML 中执行此操作的解决方案我希望我的 textview 与左侧对齐，而我的 imageview 与右侧对齐，这是代码：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<TableRow
    android:id="@+id/tr1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_height="wrap_content"
        android:text="Vibration"
        android:layout_width="wrap_content" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dip"
        android:src="@drawable/ic_launcher" />

</TableRow>
</TableLayout> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:13:02.530

尝试将您的更改`TableRow`为以下内容：

```
<TableRow
    android:id="@+id/tr1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TextView
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:text="Vibration"
        android:gravity="left" />
    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dip"
        android:gravity="right"
        android:src="@drawable/ic_launcher" />
</TableRow> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T02:12:51.033

我通过使用实现了它，

```
android:gravity="left"
android:paddingLeft="50dp" 
```

希望对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T02:40:26.033

我修改了你的布局，这段代码对我有用，希望这也对你有用。

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

 <TableRow
android:id="@+id/tr1"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
>

    <TextView
    android:layout_height="fill_parent"
    android:text="Vibration"
    android:paddingTop="10dp"
    android:paddingLeft="5dp"
    android:layout_width="0dp"
    android:layout_weight="70" />

     <ImageView
    android:layout_width="0dp"        
    android:layout_height="fill_parent"
    android:contentDescription="contentDescription"
    android:layout_weight="30"
    android:src="@drawable/ic_launcher" />  

 </TableRow>
 </TableLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:14:18.507

不应该是：

android:layout_alignParentLeft="true" /// 用于文本框

android:layout_alignParentRight="true" /// 用于 imageview 。尝试这个

# hardware - 设备有寄存器吗？

> ID：12185679
> 
> 赞同：0
> 
> 时间：2012-08-29T20:05:55.517
> 
> 标签：hardware, device, cpu, processor, cpu-registers

我一直听说寄存器为`CPU registers`. 其他设备或硬件是否也有自己的寄存器，如解码器硬件、显示设备、DMA 控制器？

如果是这样，存储在这些设备寄存器中的值如何传递给 cpu 寄存器，以防它们是必要的`instruction execution`？如果可能的话，你们中的任何人都可以用一个真实的例子来解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:15:15.830

有些设备有专用的寄存器，有些则没有。其中一些其他组件具有类似寄存器的组件，即使它们不应该真正存在，也被归入“寄存器”类别。

设备与系统其余部分之间的 I/O 可以通过多种方式发生，包括基于端口的 IO（与典型内存访问类似但独立的系统）、基于内存的 IO（使用特定地址作为控制地址，数据可以移入和移出设备），或直接内存访问（其中设备能够通过内存总线自主访问系统内存）。

我的一个朋友写了一个基于端口 IO 的 SATA 硬盘驱动程序，但是大多数现代操作系统都使用 DMA，因为它占用的 CPU 较少。

像显卡这样的设备，包含自己的处理单元，包含用于处理的真实寄存器。据我所知，它们不能直接供处理器使用，但处理器可以（可能通过基于端口的 IO 和 DMA 的组合）向 GPU 提供可执行数据，然后它可以执行这些数据，并且它可以存储其计算输出到板载设备内存上，可以通过 DMA 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:47:31.960

绝对地。查找单词寄存器的定义。例如，声卡或芯片具有一个或多个用于控制音量的寄存器。在单个内存或 I/O 事务中写入的各个寄存器。

大多数外设都有寄存器，有些有内存库。一些内存使用寄存器一次访问一项（将偏移写入偏移寄存器，使用数据寄存器写入或读取数据，重复），或者内存组以某种方式映射到主机的内存空间。再次考虑声卡或视频卡，单独的寄存器用于控制各种事物，宽度，高度，深度，频率等。对于声卡，混音器控制等是通过寄存器进行的。将视频数据、像素、字符、纹理等移动到视频内存或 gpu，然后为您做一些事情，可以并且通过映射到主机地址空间的内存库来完成。

您可能还会发现有趣的是，cpu（处理器）中的寄存器通常使用 sram 实现，具有地址和数据总线以及读/写控制信号。

# php - Wordpress 插件禁用事件

> ID：12185685
> 
> 赞同：3
> 
> 时间：2012-08-29T20:06:16.433
> 
> 标签：php, wordpress, plugins

我正在编写一个 Wordpress 插件，它在启动时运行 PHP 脚本，并使用 WebSockets 连续监听事件并记录连接。

例如

```
shell_exec('php restserver.php >restserver.log 2>&1 &'); 
```

提到的脚本在 Wordpress API 之外。我知道使用`exec`or`shell_exec`是一种极端的方法（通常是一个磨损问题的答案）。

我设法记录了 restserver.php 进程 ID，以便在插件被禁用时能够将其杀死，并且在插件重新启动时不重新启动脚本。

所以简而言之...

1.  有没有更好的方法来运行独立于 wordpress 的后台 php 进程？
2.  是否有“最佳实践”方法来检测插件禁用事件并在此之前启动 kill process 命令？

**编辑**：问题 2 的秘诀显然在于使用[`register_deactivation_hook()`](http://codex.wordpress.org/Function_Reference/register_deactivation_hook)after`register_activation_hook()`来注册你的类或函数，使魔术。

无论如何，它对我有用。任何有关使用`exec()`正确方法的进一步信息总是受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:17:06.793

有一个名为[GearMan](http://php.net/manual/en/book.gearman.php)的 unix 服务器，它是为并行执行各种任务而设计的。它有一个 PHP 客户端库，允许您启动工作人员并监控他们的执行，包括后台作业。所以这将是一种（优雅的）方法，但它需要安装 GearMan 服务器和客户端库，这意味着管理访问。

另一种简单的方法是为此添加一个[cronjob](https://stackoverflow.com/questions/4421020/use-php-to-create-edit-and-delete-crontab-jobs)。这只需要访问写入 cronjob 文件并要求 cronjob 守护程序加载新设置。`exec`出于您的任务目的从 cronjob 启动 PHP 比从调用中启动它更有意义。

# javascript - JavaScript 位置/方向计算

> ID：12185689
> 
> 赞同：0
> 
> 时间：2012-08-29T20:06:54.847
> 
> 标签：javascript, css, imagemap

我试图弄清楚如何能够在 div 中定位特定位置，该 div 基本上是一个宽度为 500 像素、高度为 500 像素的框。位置或方向是“上”、“侧”、“中”和“下”。

```
 -----------------------------------
  |          (Superior)             |
  |                                 |
  |                                 |
  | (Lateral)             (Medial)  |
  |                                 |
  |                                 |
  |                                 |
  |           (Inferior)            |
  ----------------------------------- 
```

我希望这幅画描绘了我试图确定的位置。我有两个具体问题。

问题1是；如何指定框内位置的坐标，我可以使用 JavaScript 或图像映射来执行此操作吗？

问题2是；如何定义职位，例如“高级”应该从哪里开始，应该在哪里结束？（这可能是一个数学问题，我知道我应该在数学课上多加注意！）例如，如果他们点击中间和下级之间的某个位置，更靠近 div 的右下部分或左下部分，那么位置应该是什么的div？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:12:36.387

我假设您将 div 分成两半，因此每次单击都会获得 2 个属性。我会得到相对于 div 位置的鼠标位置来确定这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:15:30.963

div 中的位置将由 X（水平）和 Y（垂直）坐标定义。在您的上线和侧线接触 X=0 和 Y=0 的点。同样，在您的内侧线和下线接触 X=500 和 Y=500 的点。

堆栈上有很多关于如何获取元素内鼠标点击坐标的答案。

[这是一个](https://stackoverflow.com/questions/12021751/getting-mouse-position-inside-parent-div-with-javascript-jquery)

# oracle - 适用于 Oracle 和 Windows 7 的 TOAD：无法初始化 OCI。错误-1

> ID：12185690
> 
> 赞同：8
> 
> 时间：2012-08-29T20:07:01.040
> 
> 标签：oracle, windows-7, 32-bit, toad

我对在 Windows 7 32 位上运行的 TOAD for Oracle 9.1 有疑问，描述如下：

我的 PC 上安装了 Oracle OraClient10g 10.0.2，我需要使用 Toad 9.1。当我尝试登录服务器时，我通过 TNS 指定了数据库，我输入了用户名和密码，但我收到了一条带有以下错误的消息：

无法初始化 OCI。错误-1

谷歌搜索我有几个选项，其中包括：检查 ORACLE_HOME 环境变量是否设置正确，以管理员身份运行 TOAD，检查用户名和密码是否正确，为 32 位系统安装 Oracle 和 TOAD……我已经检查了所有这些选项，但我仍然收到错误消息。

但是，我应该提到一个细节：在我的开始菜单中，有两个 Oracle Home（Home1 和 Home2）。Home 2 指向一个空文件夹，因为我在尝试解决问题的过程中重新安装了 Oracle，并且快捷方式仍在我的开始菜单中。不过，我认为这并不重要，因为 ORACLE_HOME 指向正确的家。

我真的需要帮助。我需要解决此错误并使用 TOAD 登录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T12:52:04.093

对我来说，这个问题是由我设置`ORACLE_HOME`windows 环境变量（永久）引起的。`"emctl"`我在上班时设置了这个。

移除后，TOAD 工作正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T08:19:59.820

我以管理员权限 ( `Right click -> Run as Administrator`) 打开了 toad。问题解决了。

非常感谢！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-08T15:17:53.763

从环境变量（系统）中删除 ORACLE_HOME 对我有用。
TOAD 现在工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T07:55:14.510

在我的情况下，我在我的 Windows 7 PC 中安装了 Oracle 10g 客户端 Toad 10 Commercial 时遇到了同样的错误。我试图从我的 PC 访问 Oracle 10g 服务器。我在尝试从 Toad 访问时遇到了该错误。

最后，我找到的解决方案是：我以管理员权限打开了 toad（右键单击 -> 以管理员身份运行）。问题解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T18:51:31.780

问题得到解决：我修改了环境变量，包括 Windows 注册表中的变量，Toad 在 TNS 菜单中以红色显示 Oracle 主页。我将环境变量设置为它们和 Toad 可以连接的方式......这很奇怪，但它现在可以工作了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-10T19:48:40.417

不确定您的笔记本电脑/台式机上安装了哪些其他东西。但是我有 Toad 11.6，然后我安装了其他创建了另一个家的 oracle realted 产品。以下建议对我**不起作用**：

*   Regedit -> Software -> Wow6432Node -> Oracle -> KEY_ORA_WF_NK 有正确的 ORACLE_HOME
*   本地系统上的环境变量 ORACLE_HOME 也一样。

相反，我在下面尝试了，这对我有用，这只是另一个建议：

*   当您打开 Toad 时，通常会提示您连接哪个数据库，并且在安装的房屋列表旁边有一个选项可以选择（“...”），一旦您点击那里，它将指定错误（点击按钮时），所以我试过了，它抱怨没有设置 PATH，一旦我修复了 PATH 并且它起作用了。在此 Toad 正常打开后（即不必使用 Run As Admin 选项）。

顺便说一句：在尝试上述修复之前，我尝试以管理员身份运行并且它有效。

希望这会有所帮助，如果没有请见谅。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-02T06:07:16.340

**检查您的 ORACLE HOME 环境变量是否指向正确的版本。**

启动 TOAD v8 时，当我们的 Oracle HOME 指向**c:\Apps\Oracle\9.2**时，它就起作用了。

当我使用 TOAD 将 ORACLE HOME 环境变量更改为**c:\Apps\Oracle\12.2\client_1**以连接到数据库时，它失败并出现以下错误：

> 无法初始化 OCI。错误-1

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-17T15:31:42.040

在删除了 Oracle 12c DB 客户端的冗余安装之一后，在连接到远程数据库时出现此错误“OCI_INVALID_HANDLE”。我机器的操作系统是 Windows 10 企业版。该问题通过在系统环境路径中添加 ORACLE_HOME 键得到解决。

由于我的系统环境路径中没有任何 ORACLE_HOME 键，因此我按照以下步骤创建此键：

1.  右键单击“这台电脑”
2.  点击“属性”->“高级系统设置”
3.  单击“高级”选项卡中的“环境变量...”
4.  单击“系统变量”部分中的“新建...”
5.  将“ORACLE_HOME”放在“变量名”字段中，并将您的 oracle db 客户端的安装路径（例如：C:\oracle\product\12.1.0\client_1）放在“变量值”字段中
6.  单击“确定”。

![在此处输入图像描述](../Images/1e0cc6efdb19b3a848ff43cf9fce3ac7.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-02T10:58:50.127

伟大的！！

它在这两件事同步后起作用：

1.  `Regedit -> Softerware -> Wow6432Node -> Oracle -> KEY_ORA_WF_NK has correct ORACLE_HOME`
2.  本地系统上的环境变量`ORACLE_HOME` 也一样。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-04-29T02:09:20.073

Windows 7 锁定 C 驱动器，这就是以管理员身份运行的原因。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-02-01T15:07:46.410

可能您已经安装了 Oracle 和 Oracle Express，因此可以修改任何配置环境变量，如果是这种情况，请登录 DIRECT 而不是 TNSNAME，并且设置将 localhost 1521 选项 serviceName: xe，始终使用客户 oracle 进行连接，例如 Instant Client - 11.2

# sql - 从sql查询导出到excel

> ID：12185693
> 
> 赞同：0
> 
> 时间：2012-08-29T20:07:06.920
> 
> 标签：sql, sql-server, export-to-excel

我正在尝试从以下查询导出到 excel。以下查询不起作用。请告诉我。我很感激任何帮助。

```
 INSERT INTO OPENROWSET ('Microsoft.Jet.OLEDB.4.0', 'Excel 8.0;Database=c:\test.xls;','
    select distinct a.a_name, b.b_name, 
    CASE WHEN a.rights  = 1 THEN 'Yes' ELSE 'No' END AS rights 
    FROM TABLE_A a 
    JOIN TABLE_B b ON a.a_id = b.a_id') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:59:59.233

您可以在 SSMS 中使用导出导入向导。

1.  右键单击您的查询正在使用的数据库
2.  从右键单击后打开的上下文菜单中选择任务
3.  从菜单中选择导出数据
4.  SQL Server 导入和导出窗口将打开。
5.  在向导中选择您的数据源和导出数据的位置。
6.  享受！

其他信息/教程可以在这里找到 请检查[http://www.kodyaz.com/articles/sql-server-export-to-excel-using-import-export-wizard.aspx](http://www.kodyaz.com/articles/sql-server-export-to-excel-using-import-export-wizard.aspx)

# jquery - jQuery 在滑块值更改时更新内部 html

> ID：12185698
> 
> 赞同：0
> 
> 时间：2012-08-29T20:07:42.867
> 
> 标签：jquery, html

我的 html 5 页面上有 8 个滑块（输入类型 =“范围”）。

对于其中的每一个，我希望将值写在它旁边，并在每次滑块值更改时更新。

我想在 1 jquery 回调中做到这一点。

到目前为止，我有：

```
$('input[type="range"]').change(function(e) {
  // here I need to update the inner html for the relevant slider.
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:10:15.363

你可以通过简单地抓住`.val()`它，并将该值放在它旁边的跨度内来获得它。

```
$('input[type="range"]').on('change', function(e) {
    var _val = $(this).val();
    $(this).next('span').text(_val);
});​ 
```

[**jsFiddle 演示**](http://jsfiddle.net/rP5Gw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:13:03.667

看到[这个](http://jsfiddle.net/8E363/)小提琴：

```
// js
$("input[type=range]").change(function(){

    $("#" + $(this).attr("id") + "_value").text( $(this).val() );

});​

// html
<input id="range1" type="range" min="1" max="5" /><span id="range1_value"></span>
<br />
<input id="range2" type="range" min="1" max="5" /><span id="range2_value"></span>
​ 
```

# objective-c - iOS，AVPlayer - 循环播放 MP3 片段

> ID：12185700
> 
> 赞同：2
> 
> 时间：2012-08-29T20:07:46.557
> 
> 标签：objective-c, ios, ios5, avfoundation, avplayer

我正在尝试循环播放从用户 iPod 库中加载的 MP3 片段。我的意思是，我不想循环播放整个 MP3，而只想循环其中的一部分。

所以说 MP3 是 4 分钟长，我定义了 startTime 和 endTime。

当播放按钮被按下时，我会寻找玩家 startTime 并开始播放。

我还订阅了事件侦听器 [AVPlayer addBoundaryTimeObserverForTimes:...]，以便在我的 endTime 到达时收到通知。在这一点上，我回到 startTime 并开始游戏。

** 但是，这并不能提供无缝循环 - 在开始时间再次播放之前声音停止的瞬间。我的应用程序是音乐制作软件，因此循环完美是很重要的。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:44:43.157

[Apple 有一个名为Exporting a Trimmed Audio Asset](http://developer.apple.com/library/ios/#qa/qa1730/_index.html)的技术问答。

另外，看看[这个线程](https://stackoverflow.com/questions/9698787/ios-audio-trimming)，它处理修剪 AVAsset 音频文件。

# css - 打印样式表 - 链接和图像

> ID：12185704
> 
> 赞同：1
> 
> 时间：2012-08-29T20:07:55.447
> 
> 标签：css, printing

我正在为在线社区创建一个打印样式表。样式表没有问题，除了... safari 和 firefox 似乎正在添加一个包含链接 url 的元素（不知道 ie 尚未）。

我想要一个没有链接网址的列表的“干净”打印输出，任何关于如何摆脱它们的想法。（不建议在非链接元素中包含文本；-）

![不需要的打印链接](../Images/7d088ebc6b9de6cfb712bed92720eec2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T20:11:02.827

好的伙计们，对不起......只是一个供将来参考的答案......

这可以重置链接样式:-)

```
a, a:after { content: normal !important; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:11:49.097

safari 和 firefox 通过属性选择器捕获 url 来设置链接的样式，在 web 检查器中检查细节，但我猜它是这样的：`a[href=""]:after{content:""}`，你可以通过设置覆盖它`a[href=""]:after{display:none}`

# javascript - 拉斐尔调整宽度

> ID：12185706
> 
> 赞同：0
> 
> 时间：2012-08-29T20:07:59.903
> 
> 标签：javascript, raphael

首先，我只想说我已经使用 Raphael 2 天了，所以不要因为问这个问题而打我的脸。

我有一个 Raphael 创建的下拉菜单，如下所示： ![](../Images/68779914b590a3d45231dbd7176db365.png)

当我扩展窗口时，底部边框基于`<div>`宽度，因此它可以完美扩展（下图可能有点夸张）：

![](../Images/b7065f69e17adeb2fcee6a441192b20b.png)

虚线扩展（就像它们应该的那样），问题是如何扩展（重绘）Raphael 形状以匹配给定的 % ？

绘图部分：

```
 for (var i = 0; i < holder.length; i++) {
    var paper = Raphael(title[i], title.slice(i, i + 1).width(), title.slice(i, i + 1).height()); //create new paper instance based on holder height and width
    paper.setViewBox(0, 0, title.slice(i, i + 1).width(), title.slice(i, i + 1).height());
    var rect = paper.roundedRectangle(0, 0, title.slice(i, i + 1).width(), title.slice(i, i + 1).height(), 20, 20, 20, 20).attr({ //draw on paper rounded rectangle
        fill: "#E6E7E8", //background color
        stroke: "#ddd" //border color (technically shape color)

    });
    var t = paper.text((title.slice(i, i + 1).width() - (title.slice(i, i + 1).width() - 20)), (title.slice(i, i + 1).height() / 2), title_content.slice(i, i + 1).text()).attr({ //add text
        "text-anchor": "start", //left-align
        "font-size": 16,
        "font-family": "Arial, Helvetica, sans-serif"
    });
    textWrap(t, title.slice(i, i + 1).width()); //wrap text                    
} 
```

我目前有这个用于调整大小，但它不起作用。它确实在状态栏中产生错误，但因为我只有 ie7，所以我无法启动 firebug 并读取控制台。我哪里错了？

```
$(window).resize(function() {
     var i = 0;
          $(title).each(function() {
              paper.setSize($(this).width(), $(this).height());
              rect.SetSize($(this).width(), $(this).height());
              redraw_element();
              i++;
     });                
 }); 
```

* * *

更新 - 设置为 100% 会导致渲染时间较短，即使容器更宽。

* * *

```
var paper = Raphael(title[i], title.slice(i, i + 1).width(), title.slice(i, i + 1).height()); //create new paper instance based on holder height and width

paper.setViewBox(0, 0, title.slice(i, i + 1).width(), title.slice(i, i + 1).height());

var rect = paper.roundedRectangle(0, 0, '100%', '100%', 20, 20, 20, 20).attr({ //draw on paper rounded rectangle
    fill: "#E6E7E8", //background color
    stroke: "#ddd", //border color (technically shape color)
    width: '100%',
    height: '100%'
}); 
```

渲染 ![](../Images/03026fcdcaae71b0393a08f64e61b6aa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:26:18.010

我认为您应该使用`rect.attr({width:..., height:...})`（另请参见[Element.attr](http://raphaeljs.com/reference.html#Element.attr)）而不是`SetSize`. 后者不是 Raphael 的方法，在不同的浏览器中可能工作也可能不工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:33:20.573

不确定这是否能满足您的给定需求，但您知道 Raphael 支持基于百分比的宽度吗？例如`paper.rect(0, 0, '100%', '100%')`。调整大小时，您只需更改包含该`<svg>`元素的元素的宽度（该元素又包含矩形），矩形将相应地缩放。

# android - 编辑 XML 布局后应用强制关闭

> ID：12185707
> 
> 赞同：0
> 
> 时间：2012-08-29T20:08:01.447
> 
> 标签：android, xml, layout

我有 2 个按钮和 2 个文本视图（1 个按钮和 1 个文本视图在一行中，在它下面的行中相同）然后我尝试将它们全部放在同一行中，但是当我运行应用程序时它会强制关闭。XML 布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
tools:ignore="HardcodedText" >

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="22dp"
    android:layout_marginTop="46dp"
    android:text="Mensagem:" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Destinatario:"
    android:textSize="22dp" />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" />

<EditText
    android:id="@+id/etMsg"
    android:layout_width="fill_parent"
    android:layout_height="150dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView2"
    android:ems="10"
    android:inputType="textMultiLine" />

<Button
    android:id="@+id/bEnviar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:text="ENVIAR" />

<Button
    android:id="@+id/bData"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/etMsg"
    android:layout_marginTop="66dp"
    android:text="Data" />

<TextView
    android:id="@+id/tvData"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/bData"
    android:layout_alignBottom="@+id/bData"
    android:layout_alignRight="@+id/textView1"
    android:text="data" />

<Button
    android:id="@+id/bHora"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/tvData"
    android:layout_alignBottom="@+id/tvData"
    android:layout_marginRight="24dp"
    android:layout_toLeftOf="@+id/spinner1"
    android:text="Hora" />

<TextView
    android:id="@+id/tvHora"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/bHora"
    android:layout_alignBottom="@+id/bHora"
    android:layout_alignLeft="@+id/spinner1"
    android:text="hora" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:20:40.277

有时，当您更改布局中的某些内容时，生成的`R`类不会正确更新。这对我来说已经多次导致所描述的错误。尝试清理您的项目，以便重新编译/生成所有内容，并希望错误消失。

# objective-c - Cocos2d-iphone 中的自定义 UIView

> ID：12185712
> 
> 赞同：0
> 
> 时间：2012-08-29T20:08:28.900
> 
> 标签：objective-c, ios, uitableview, cocos2d-iphone

我正在使用 Cocos2d 制作 iOS 游戏，需要自定义 UITableView 的外观。看来 [这篇文章](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)提供了一个很好的框架，当我自己测试时，示例代码运行良好。问题是我无法让它在我的 cocos2d 应用程序中工作。

该示例使用此代码创建自定义 UIViewController：（window 是 UIWindow，viewController 是 EasyCustomTableController）

```
[window addSubview:viewController.view];
[window makeKeyAndVisible]; 
```

但是当我使用该代码时，EasyCustomTableController 的 viewDidLoad 函数永远不会运行，我的游戏中也没有任何反应。我可以使用以下代码运行 viewDidLoad 函数：

```
levelMenu = [[EasyCustomTableController alloc] init];
[[[CCDirector sharedDirector] openGLView] addSubview:levelMenu.view]; 
```

但同样，我的游戏中什么也没有发生，视图也从未出现过。

如何让自定义 UIViewController 在我的 cocos2d 应用程序中工作？

编辑：

我可以得到一个白色背景的UIView来显示，所以levelMenu.view肯定有问题：

```
UIApplication* clientApp = [UIApplication sharedApplication];
UIWindow* topWindow = [clientApp keyWindow];
if (!topWindow) {
    topWindow = [[clientApp windows] objectAtIndex:0];
} 
//Works
UIView *white = [[UIView alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)];
white.backgroundColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:255];
[topWindow addSubview:white];

//Doesn't work
levelMenu = [[EasyCustomTableController alloc] init];
[topWindow addSubview:levelMenu.view]; 
```

我没有从示例中更改 levelMenu 的类代码 - 您可以在此处的第一个代码框中看到[viewDidLoad](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:40:01.027

尝试这个

```
UIApplication* clientApp = [UIApplication sharedApplication];   
UIWindow* topWindow = [clientApp keyWindow];
if (!topWindow) {
    topWindow = [[clientApp windows] objectAtIndex:0];
}
[topWindow addSubview:levelMenu.view]; 
```

如果您没有看到任何内容，则可能是 levelMenu.view 有问题。尝试使用带有白色背景的简单基本 UIView 来测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:14:15.777

首先你制作 CCLayer 并制作我们在 cocos2d 中制作的 Pushscreen。

```
[[CCDirector sharedDirector] pushScene:[ScoreLayer node]]; 
```

在这一层 ScoreLayer.h

```
 @interface ScoreLayer : CCLayer <UITableViewDelegate,UITableViewDataSource>{
        AppController *myApp;
        UIView *view;
        UITableView *tblView;
 UIToolbar *toolbar;
    UIBarButtonItem *backButton;
    NSMutableArray *ScoreArray;

    }
    @property(nonatomic,retain) UITableView *tblView; 
```

评分层.m

```
-(id) init
{
    myApp = (AppController *)[UIApplication sharedApplication].delegate;
    self = [super init];
    // create view
    view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

    // create Table
    tblView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 436)];
    tblView.delegate = self;
    tblView.dataSource = self;
   // tblView.style = UITableViewStyleGrouped;
    //table.style = UITableViewStyleGrouped;

    ScoreArray = [myApp getScoreList];
    [view addSubview:tblView];
toolbar = [UIToolbar new];
    [toolbar setFrame:CGRectMake(0, 436, 320, 44)];
    toolbar.barStyle = UIBarStyleBlackOpaque;

    //Create a button
    backButton = [[UIBarButtonItem alloc] initWithTitle:@"Return to the main menu" style:UIBarButtonItemStyleBordered target:self action:@selector(backClicked:)];

    [toolbar setItems:[NSArray arrayWithObjects:backButton,nil] animated:YES];
    [view addSubview:toolbar];
    [toolbar release];

    // add the view to the director
    [[[CCDirector sharedDirector] openGLView] addSubview:view];

    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:42:11.000

尝试这个

```
[[[CCDirector sharedDirector] openGLView].superview addSubview:levelMenu.view]; 
```

# bash - 如何在 bash 脚本中查找和执行文件？

> ID：12185714
> 
> 赞同：1
> 
> 时间：2012-08-29T20:08:30.387
> 
> 标签：bash, shell

嗨，我正在尝试使用 find 命令和 -exec 在找到时执行文件文件，但它似乎不起作用。这是一些代码：

```
 ssh $i find $DIRECTORY -name "version.sh" -exec sh {} \; 
```

我收到错误 -exec 没有参数

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:11:52.737

*你的*一方得到一个分号，但*另一方*没有。

```
... \\\; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:42:13.027

更易读的版本可能是：

```
ssh $i "find $DIRECTORY -name version.sh | xargs -r sh" 
```

# c# - 替换字符串中的重复字符

> ID：12185715
> 
> 赞同：4
> 
> 时间：2012-08-29T20:08:32.807
> 
> 标签：c#, string

是否可以使用 C# 查找和替换字符串中的任何重复字符？我正在尝试减小从 jpeg 图像转换而来的 base64 字符串的大小。我注意到 base64 字符串包含许多重复的字符，例如：

> 6qdQAUUxJA7uuCGQ8g / wA6fQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFYXiFL5b7TrmwtzM8Xmr7KWUAE +

如果有一种方法可以用这样的方式删除重复字符，那么它总体上会小得多：

> [QAUUUUAFFFFABRRR，18]

其格式为 [REPEATED-CHARACTERS, NUMBER-OF-TIMES]。
这可能吗？谢谢您的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:16:52.057

您基本上必须创建一个搜索和替换功能。这实际上取决于重复字符串是否具有恒定长度。在您的示例中，重复字符串的长度为 16 个字符，因此您可以编写一个获取前 16 个字符的路由，将它们与接下来的 16 个字符进行比较，依此类推，直到找到一个不同的字符串。然后它将用您的语法替换字符串来表示它们。

如果重复字符串的长度是可变的，那么它会更复杂一些。您基本上必须从一个短字符串开始，并不断增长它，并将其与下一组相同长度的字符进行比较，如果它们重复，请检查下一个字符，依此类推。不过，这可能会受到打击。

搜索压缩算法，因为它们中的许多都使用类似的原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:52:37.913

您可以找到具有最大重复次数的最长字符串。

```
int mx = -1;
string str = null;
for (int i = 0; i < str.Length; i++) for (int j = i + 1; j < str.Length; j++)
{
string sub = str.Substring(i, j - i);
int tmp = countAll(str, sub); // write countAll() yourself
if (tmp > mx) { mx = tmp; str = sub; }
} 
```

或者，更好的是，使用`Dictionary`.

```
Dictionary<char, int> rep = new Dictionary<char, int>();
for (int i = 0; i < str.Length; i++)
  if (rep.ContainsKey(str[i])) rep[str[i]]++;
  else rep.Add(str[i], 1); 
```

然后，您将让每个字符与它相关联的出现次数：

```
string total = "";
foreach (var item in rep) total += item.Key; 
```

**添加**：

如果你真的想找到最长的重复子串，那么你应该使用[动态编程](http://en.wikipedia.org/wiki/Longest_common_substring_problem)来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T21:09:32.290

您实际上是在尝试提出自己的无损压缩算法 - 像 zip 这样的算法完全按照您的要求工作，除了它们适用于字节而不是字符串中的字符。

流行的压缩算法几乎可以保证比您在合理时间内设计和实现的算法更有效。一方面，由于字节对齐问题，他们可能会看到 base64 字符串中不明显的模式。

那么为什么不在base64编码*之前使用*[它们](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)中的一个来压缩二进制数据，而不是相反呢？

# jquery - jPlayer on loadcomplete 事件

> ID：12185716
> 
> 赞同：1
> 
> 时间：2012-08-29T20:08:32.910
> 
> 标签：jquery, html, events, audio, jplayer

我的应用程序中有带有 css3 动画的自定义预加载器，但是当声音完成加载时，预加载器仍然移动。我在 jplayer.org 上的文档中进行了搜索，但似乎不是这样，在加载数据时隐藏此预加载器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:03:04.593

我找到了这个问题的答案：

```
$("#jquery_jplayer_1").bind($.jPlayer.event.progress, function (event) {
   if (event.jPlayer.status.seekPercent === 100) {
     // loading complete
    } else {
     // Still loading
    }
}); 
```

# z3 - 如何测试用户理论插件中的不一致？

> ID：12185717
> 
> 赞同：1
> 
> 时间：2012-08-29T20:08:36.157
> 
> 标签：z3

我正在实现一个用户理论插件。我想测试用户理论中的不一致性来修剪一些模型。

更具体地说，在我的理论中，`x`它是用户类型集合的变量，并且`f`是返回集合大小的函数。我有两个断言：`x = set1 OR x = set2`和`f x > 2`. 假设 的大小`set1`为 1， 的大小`set2`为 3。

在搜索中，Z3`x = set1`先行。所以我可以添加另一个 assertion `f x = 1`，这将在 INT 部分不一致。我想测试不一致，以便我可以否定当前分配，让 Z3 回溯并尝试其他选项。

我的问题是我该怎么做。

我尝试了 3 种方法：

`f x = 1`(1)直接使用添加断言`Z3_theory_assert_axiom()`。然后搜索立即终止并返回 UNSAT。

(2) 我尝试使用`Z3_check_assumptions()`with`f x = 1`作为检查当前上下文的假设。但`Z3_check_assumptions()`不允许这样的复合式。因此，它不能成为解决方案。

(3) 我先推送上下文，用 加上断言，`f x = 1`用`Z3_assert_cnstr()`测试一致性`Z3_check_and_get_model()`，然后弹出刚刚推送的上下文。在测试中，如果不一致，我得到当前分配`Z3_get_context_assignment(ctx)`并断言否定分配以触发回溯。我观察到的是 Z3 确实发现了不一致，但当前分配仅包含有关大小部分的断言，例如`(= 1 (f x))`. 或者换句话说，关于用户理论的断言`(= x set1) and not (= x set2)`是缺失的。所以即使我否定了当前的分配，在回溯之后，Z3 仍然尝试 the`x = set1`而不是 other option `x = set2`。

我哪里错了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:15:15.840

您应该在回调中仅使用用户理论插件中的第一个选项 Z3_theory_assert_axiom()。您还应该只断言重言式，即独立于当前分配的公理。所以而不是断言

```
f x = 1 
```

你应该断言

```
x = set1 => f x = 1 
```

（假设我理解）因为无论如何这个公式都是正确的。你也可以断言：

```
f set1 = 1 
```

（假设，我再次理解），这也将关闭 y = set1 & fy > 1 的分支，以保持其他一些变量。更一般地说，您想要断言最强的理论公理来修剪尽可能多的相关分支。但是理论公理必须是真实的，而不仅仅是在搜索的本地分支中成立。

# visual-web-developer - 将 Visual Web Developer 2010 Express 项目移动到新目录

> ID：12185719
> 
> 赞同：0
> 
> 时间：2012-08-29T20:08:39.690
> 
> 标签：visual-web-developer, visual-web-developer-2010

我试图将 VWD 项目移动到新目录，但在构建时出现以下错误：

```
Error   1   It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.  P:\MY DOCUMENTS\Visual Studio 2010\Projects\NetworkOperationsDashboard\NetworkOperationsDashboard\Web.config    28 
```

我用谷歌搜索了解决方案，但没有一个对我有用，所以我只是在正确的目录中创建了一个新项目并添加了我所有的旧文件。但是，现在 aspx.cs 文件似乎无法读取 .aspx 文件——我不断收到很多在此上下文中找不到的符号“whatever”。“Codefile”和“Inherits”值是正确的，但 DOCTYPE 声明带有蓝色下划线，将鼠标悬停在它上面会产生与上面大致相同的错误。

webconfig 文件的第 28 行是：

```
<authentication mode="Windows" /> 
```

但在我开始搬东西之前，这一切都很好。但是，如果我在没有先构建的情况下运行 Web 应用程序，则此行会引发此错误：

```
It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS. 
```

我尝试在文本编辑器中编辑解决方案文件，以用新路径名替换所有旧路径名，但这并不能解决问题。

当我第一次编写这个项目时，解决方案最终位于一个目录中，而所有其他文件都位于另一个目录中。这是我的第一个项目，所以我不确定我做错了什么。我现在只想收拾一下。

任何建议表示赞赏。

问候。

编辑：

我刚刚在正确的目录中启动了一个新项目，并将所有旧文件剪切并粘贴到新文件中。看起来这应该是万无一失的——并且错误消息消失了——但是 .aspx.cs 文件似乎仍然看不到 .aspx 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:11:42.477

所以我删除了 .aspx.designer.cs 文件，右键单击 .aspx 文件并选择“转换为 Web 应用程序”。不知道为什么，但这成功了。

# qt - 在 python3 中使用 cairo 进行矢量动画的示例

> ID：12185721
> 
> 赞同：2
> 
> 时间：2012-08-29T20:08:44.737
> 
> 标签：qt, python-3.x, gtk, cairo, pycairo

我想使用`pycairo`和显示一些简单的游戏/交互式矢量图`python3`。

我认为我还需要一个“小部件工具包”来管理创建窗口本身，因为我认为`pycairo`不能单独完成该部分（它只会将输出保存到文件中）。

我研究过`PySide`（基于`Qt`，似乎很复杂）和`gi`（基于 gtk3 我猜，甚至有`gi-cairo`但找不到教程或示例）。我真的不知道如何将它们与`pycairo`.

我听说过`pygame`但似乎不受支持`python3`（至少我没有出现在 apt 中的 python3-pygame）。

我可以有一个使用`pycairo`with`python3`和一些标准窗口工具包来创建窗口并绘制一些简单动画的入门示例吗？

**编辑：**如果示例是动画的，则加分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:47:33.163

这是 PySide 中的一个完整应用程序，它在屏幕上显示一个（可能是动画的）SVG 文件：

```
import sys
from PySide import QtCore, QtGui, QtSvg

app = QtGui.QApplication(sys.argv)

widget = QtSvg.QSvgWidget('animation.svg')
widget.show()

app.exec_() 
```

这是另一个使用图形视图框架为奇怪的矢量形状设置动画的示例：

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *

app = QApplication(sys.argv)

path = QPainterPath()
path.quadTo(0,20, 20,20)
path.lineTo(10,10)

item = QGraphicsPathItem(path)

timer = QTimeLine(5000)
timer.setFrameRange(0, 100)

ani = QGraphicsItemAnimation()
ani.setItem(item)
ani.setTimeLine(timer)

ani.setPosAt(1, QPointF(200,200))
ani.setRotationAt(1, 360)
ani.setScaleAt(1, 3,3)

scene = QGraphicsScene(0,0, 300,300)
scene.addItem(item)

view = QGraphicsView(scene)
view.setRenderHints(QPainter.Antialiasing)
view.show()

timer.start()

app.exec_() 
```

# javascript - 即使我没有将鼠标悬停在菜单元素上，也保持相同的 CSS 背景

> ID：12185723
> 
> 赞同：0
> 
> 时间：2012-08-29T20:08:48.863
> 
> 标签：javascript, html, css, drop-down-menu

在下拉菜单中，当我将鼠标悬停在相应的子菜单上时，我希望菜单元素保持其背景。

这是脚本：

```
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <h:outputStylesheet name="style.css" library="css" />
    <h:outputStylesheet name="styleTableExpansion.css" library="css" />
    <ui:insert name="tohead">content</ui:insert>
    <script type="text/javascript">
        function affecter_back(){
            var a = document.getElementById("menuparam")
            a.style.backgroundColor = 'red';
        }
    </script>
</h:head> 
```

这是HTML：

```
<div id="templatemo_menu">
  <ul id="menuDeroulant">
    <li><a href="/impression/faces/vues_admin/acceuil_admin.xhtml" class="current"><span class="home">Acceuil</span></a></li>
    <li><a href="/impression/faces/vues_admin/touslesCommandes.xhtml" class="commandes"><span class="commandes">Commandes</span></a></li>
    <li><a href="/impression/faces/vues_admin/utilisateurs.xhtml"><span class="users">Utilisateurs</span></a></li>
    <li><a href="/impression/faces/vues_admin/newMessage.xhtml"><span class="gallery">Message</span></a></li>
    <li><a href="/impression/faces/vues_admin/historiqueMessages.xhtml"><span class="contact">Messages</span></a></li>
    <li>
      <a id="menuparam" href="/impression/faces/vues_admin/historiqueMessages.xhtml"><span class="contact2">Paramétres</span></a>
      <ul class="sousMenu">
        <li><a onmouseover="affecter_back()" href="#">CSS</a></li>
        <li><a onmouseover="affecter_back()" href="#">Graphic design</a></li>
        <li><a onmouseover="affecter_back()" href="#">Development tools</a></li>
        <li><a onmouseover="affecter_back()" href="#">Web design</a></li>
      </ul>
    </li>
  </ul>     
</div> 
```

但它没有做我想要的。有任何想法吗？

# android - 我可以在使用内置 SMS 应用程序发送 SMS 之前修改 sms_body 吗？

> ID：12185727
> 
> 赞同：0
> 
> 时间：2012-08-29T20:08:54.593
> 
> 标签：android, sms

我知道我们可以通过这种方式通过内置短信应用程序发送短信 -

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.setData(Uri.parse("sms:"));  
sendIntent.putExtra("sms_body", "");
startActivity(sendIntent); 
```

但是在我的应用程序中，**我想在发送**给接收者之前修改短信正文的一些文本。有什么办法吗？

我知道**我可以使用 SmsManager 的 sendTextMessage 方法来做到这一点**。我只想知道，内置的短信应用也可以吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:49:36.187

这是不可能的，因为 SmsManager 是框架的一部分。你不能劫持它。

编辑：您可以做的是将您的应用清单更改为接收`ACTION_VIEW`和 uri `sms:`，就像默认消息传递应用程序一样，然后在启动时将更改正文并启动默认消息传递应用程序。

编辑：将下面的意图过滤器添加到您的应用程序中，然后从意图中额外添加“sms_body”，这次由 createChooser 重新广播

```
 <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <action android:name="android.intent.action.SENDTO" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="sms" />
    <data android:scheme="smsto" />
 </intent-filter> 
```

# iphone - 在 Objective-C 中解析 JSON 响应

> ID：12185732
> 
> 赞同：1
> 
> 时间：2012-08-29T20:09:21.267
> 
> 标签：iphone, objective-c, ios, json

我正在为 php webservice 开发 iOS json 客户端，由于某种原因，我在解析来自服务器的相当简单的 json 响应时遇到问题。我需要做什么？

**编辑** 问题不在于解析，所以它必须是我发送 web 服务的 jsonString。

基本上我需要发送这个

POST 值
app = 标记
数据 = { "01,E1,AT333AT333,9053839719,2012-08-28 14:35:58,2012-08-28 14:35:58,43.154650,-79.3877390,1000,YS3DD55H812035739,1000000, 3434" }

当前代码为两个字符串打印 null 。

这是我处理对 Web 服务的调用的方法。

```
- (IBAction)submitMessage
{
    NSString* apps =@"mark";
    NSString* data = @"01,E1,AT333AT333,9053839719,2012-08-28 14:35:58,2012-08-28 14:35:58,43.154650,-79.3877390,1000,YS3DD55H812035739,1000000,3434";
    NSDictionary* jsonDictionary=[NSDictionary dictionaryWithObject: data forKey:@"data"];
    NSString* jsonString = [jsonDictionary JSONRepresentation];
    self.outPut.text=jsonString;
    NSLog(@"Made it");
    NSURL *url = [NSURL URLWithString:@"http://secure.g4apps.com/g4webservices.php"];
    AFHTTPClient *httpClient=[[AFHTTPClient alloc] initWithBaseURL:url];
    NSDictionary *params =[NSDictionary dictionaryWithObjectsAndKeys:
                           apps,@"app",
                           jsonString,@"smpdata",nil];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:@"g4webservices.php" parameters:params];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
        success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
            NSLog(@"Response: %@ %@", [JSON valueForKeyPath:@"Status"], [JSON valueForKeyPath:@"Data"]);
            self.outPut2.text = [NSString stringWithFormat:@"response: %@ %@",[JSON valueForKeyPath:@"Status"], [JSON valueForKeyPath:@"Data"]];    }
                        failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error,id JSON){
                                         NSLog(@"[Error]: %@", error);
    }
];

    [operation start];

} 
```

这是一个示例 json 响应。

```
{

"Status":"11",
"Data":["AT333AT333,43.1547986,-79.3884892",
"BT343BT343,43.1547986,-79.3884892"]

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:15:47.953

iOS 5+ 现在已经内置了用于解析 JSON 的 API。

有关更多信息，请参阅[本](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)教程。

此外，您可以阅读[NSJSONSerialization 文档](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:10:34.653

问题是我发送的 JSON 字符串。该服务没有为它接收的 json 字符串使用键值对，我无法弄清楚如何在 Objective-C 中重现它。

发布变量如下 app="app_name" data={ "Some csv data" }

我能够让 Objective C 生成的是 app="app_name" data={ "Data":{"Some csv data"} }

因此，我修改了服务器以处理 iOS 生成的内容，现在一切正常。弄清楚当 Data 数组有多个值时如何处理响应。

# php - cakephp 查找并订购一个数组

> ID：12185733
> 
> 赞同：1
> 
> 时间：2012-08-29T20:09:25.027
> 
> 标签：php, cakephp, cakephp-model

我有一个用 cakephp 2.0 开发的网站。我有三张桌子：

*   活动，
*   活动成分
*   活动图像成分。

Activity有一个ActivityIngredients

Activity有一个ActivityImageIngredients。

我在我的控制器中进行查询，在其中搜索一些具有递归 1 的 Activity（在此表中创建了字段），并且我想按创建活动的顺序将 ActivityIngredients、ActivityImageIngredients 的所有结果打印到我的页面中。当我打印数组时，按顺序返回第一个 ActivityIngredients，然后按顺序返回。但是我希望如果 anc ActivityImageIngredients 已经创建了第一个 ActivityIngredients 它在它之前。因为我认为有两个单独的数组。查询是一个简单的 find ：

```
 $conditions = array('Activity.user_id' => $id ); 
$activity = $this->User->Activity->find('all', array('conditions' => $conditions)); 
$this->set('activity', $activity); 
```

用户通过使用其他字段的条件创建了许多活动订单，我在这种模式下将结果打印到我的视图中：

```
 <?php
 //var_dump($activity);
 foreach ($activity as $act) {

?>
    <div class="line-cnt"><div class="line">
    </div>
</div>
<h2>Attività</h2>
<div class="table">
    <div>
        <div>Activity created</div><div><?php echo $act['Activity']['created']; ?></div>
    </div>
    <div>
        <div>Actions text</div><div><?php echo $act['Action']['text']; ?></div>
    </div>
    <div>
        <div>ActivityIngredient ingredient_id</div><div><?php
        if (isset($act['ActivityImageIngredients']['IngredientAlias']['alias'])){
            echo $act['ActivityImageIngredients']['IngredientAlias']['alias'];
        }
        if (isset($act['ActivityIngredients']['IngredientAlias']['alias'])){
            echo $act['ActivityIngredients']['IngredientAlias']['alias']; 
        }
        ?>
        </div> 
    </div>
</div>
<?php
}
?> 
```

我想合并数组 ActivityImageIngredients 和 ActivityIngredients 并按创建其 Activity 的顺序是可能的吗？

# css - css3渐变中心淡入淡出

> ID：12185737
> 
> 赞同：1
> 
> 时间：2012-08-29T20:09:45.370
> 
> 标签：css

有谁知道如何使中心渐变从浅到深淡化，顶部偏移量约为-20px？

这就是我到目前为止所能做的

```
background-color:#303030;
background-image:-moz-linear-gradient(left,#282828,#616161,#303030);
background-image:-webkit-linear-gradient(left,#282828,#616161,#303030);
background-image:-o-linear-gradient(left,#282828,#616161,#303030);
background-image:-ms-linear-gradient(left,#282828,#616161,#303030);
background-image:linear-gradient(left,#282828,#616161,#303030); 
```

![在此处输入图像描述](../Images/e78894568c10364c1500f5280832922f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:45:12.827

左边不是线性渐变，它看起来是放射状的。这是一个如何使用偏移量的示例：http: [//codepen.io/mastastealth/pen/ocIaz](http://codepen.io/mastastealth/pen/ocIaz)

基本上使用这样的东西（应用适当的前缀，在旧的 IE 中不支持）：

```
background: radial-gradient(center 20px, circle, #616161 0%, #616161 20%, #282828 100%); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:15:11.377

我假设“顶部偏移约 20 像素”意味着您希望渐变向下移动 20 像素？如果是这种情况，您需要创建一些像 div 这样的元素，应用渐变，然后将其向下放置大约 20 像素。

请参阅此[JSFiddle](http://jsfiddle.net/FNADe/1/)。这可以通过许多不同的方式来完成；这里我只是使用了绝对定位：

```
<div id="abc"></div>

#abc {
    position: absolute;
    top: 20px;
    bottom: 0;
    left: 0;
    right: 0;
    /* gradient here */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T20:52:54.353

AFAICT 你不能用一个渐变来做到这一点，但你可以用两个嵌套元素中的两个渐变来做到这一点。当渐变填充整个图像时，您可以指定透明色标。

您的外部元素处理左侧，具有“向右”线性渐变，渐变为中心颜色。内部元素负责右侧，使用“向左”渐变渐变为透明度，从而让左侧渐变出现。

```
<div class="gradient">
    <div class="gradient-inner">
    Content
  </div>
</div>

.gradient {
  background-image: linear-gradient(
    to right,
    red,
    green 40px
  );
  height: 200px;
  width: 100%;
}
.gradient-inner {
  background-image: linear-gradient(
    to left,
    red,
    green 40px,
    rgba(0, 0, 0, 0) 40px
  );
  height: 200px;
  width: 100%;
} 
```

# git - git fetch remote 不更新项目？

> ID：12185740
> 
> 赞同：1
> 
> 时间：2012-08-29T20:10:01.957
> 
> 标签：git

所以我试图将我的一个存储库提取到我的项目中，但这些文件没有在我的本地机器上更新。

```
git fetch TheCore <-- my Core on Github
returns saying nothing in terminal, just puts me back at prompt 
```

我的机器上没有文件更新，仍然有旧代码。

我的 as12 项目远程仓库：

```
origin  https://github.com/mine/as12.git (fetch)
origin  https://github.com/mine/as12.git (push)
thecore https://github.com/mine/TheCore.git (fetch)
thecore https://github.com/mine/TheCore.git (push) 
```

所以我正在尝试获取 TheCore，以便它使用新代码更新我的本地项目。不知道为什么 fetch 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:11:26.513

当您希望更新工作目录时，请`git fetch`使用`git merge`，或直接使用`git pull`。

更多阅读：[“git pull”和“git fetch”有什么区别？](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch/3724357#3724357)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:15:35.433

Fetch 仅具有更新本地存储库上的引用的效果。它不会自动更新本地分支。要更新本地分支，您需要根据情况使用 pull、merge 或 rebase。

更多信息[在这里](https://stackoverflow.com/questions/292357/whats-the-difference-between-git-pull-and-git-fetch)

# c# - 部分类并双击控件

> ID：12185741
> 
> 赞同：2
> 
> 时间：2012-08-29T20:10:04.360
> 
> 标签：c#, visual-studio-2010, class, partial

如果我在部分类中有一个函数（假设我有“按钮 2”单击处理程序），然后在表单设计器中双击“按钮 2”，Intellisense（或现在负责的任何东西）总是把我扔到“Form1.cs 模块”（在定义不明确的行或空白行处），而不是新的部分类模块“Button2.cs”。双击“Button1”会执行“正确”操作。

例如：

在“Form1.cs”中：

```
namespace test01
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Button 1 pressed");
        }

    }
} 
```

在“Button2.cs”（公共部分类）中：

```
namespace test01
{
    public partial class Form1 : Form
    {

        private void button2_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Button 2 pressed");
        }
    }
} 
```

这是我在 VS2008 和现在在 VS2010 中看到的，并且（对我而言）没有明显的方法来解决它。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:16:13.717

那是因为您正在设计*表单*，而不是按钮。设计者期望（按照惯例）表单上控件的所有事件处理程序都位于表单的源代码中，而不是按钮的源代码中。当您认为（通常）button2.cs 可能应该定义一个名为的*类*，而不是其 Name 属性恰好是“Button2”`button2`的类的实例时，这是有道理的。`Button`

编辑：

部分类是为一个非常特定的目的而设计的——当一个类由设计者或其他代码生成器生成时，开发人员手动编辑该类通常是不安全的（因为代码生成器稍后会出现并覆盖文件，包括开发者的手写部分）。部分类允许将一个类拆分为两个文件——一个是生成的（在这种情况下是由设计者生成的），一个是用于手写代码的。因为类被定义为“部分”，编译器知道该类的其他部分可能在其他文件中定义。

对于像您描述的具有多个不同功能区域的项目，我会将它们组织到与 UI 无关的类中（以便可以对功能进行独立的单元测试），然后根据需要从 UI 类中调用它们。您应该研究诸如[Model-View-Controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)或[Model-View-ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)设计模式之类的概念，以了解其工作原理。

像这样的文件夹结构作为起点不会不合理：

```
Root
|-GUI           // Contains folders related to GUI elements
| |-Forms       // Contains your forms
| |-Controls    // Contains any custom controls
|-Common        // Contains folders for common functionality
| |-IO          // Contains classes relating to I/O
| |-Diagnostics // Contains classes relating to diagnostics
|-Logic         // Contains classes folders to specific business use cases
  |-UseCase1    // Contains classes folders to use case #1 (use a better name, obviously)
  |-UseCase2    // Contains classes folders to use case #2 
```

# asp.net - WseWsdl3.exe 在 Windows 7 Professional 64 位上生成错误

> ID：12185747
> 
> 赞同：1
> 
> 时间：2012-08-29T20:10:19.470
> 
> 标签：asp.net, wsdl, windows-7-x64

当我运行命令时：

```
 "C:\Program Files (x86)\Microsoft WSE\v3.0\Tools\WseWsdl3.exe" [WSDL location] /o:[file location] /l:cs /type:webClient 
```

其中 [WSDL location] 是我的本地计算机上 Web 服务的位置，[file location] 是我的 webService.asmx.cs 文件位置的位置

我得到错误：

```
 System.InvalidOperationException: Could not get the install directory for .NET F
ramework v2.0 SDK. Please install the .NET Framework v2.0 SDK.
   at WseWsdl.WebServiceUtil.RunWsdl(String[] args) 
```

我用谷歌搜索了这种错误并找到了一个有用的链接[WseWsdl3.exe 在 Windows 7 Ultimate 64 位上生成错误 Robert Amiscaray 19\. 2009 年 11 月 11:31](http://www.enterpriseframework.com/post/2009/11/19/WseWsdl3exe-Generates-error-on-Windows-7-Ultimate-64-Bit.aspx)

我已经进行了建议的更改，但仍然出现相同的错误。
博客条目是否正确，或者我需要进行一些特殊更改，因为我正在使用“Win 7 Pro Sp 1”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T16:43:33.747

修复的解决方案是下载： [.NET Framework 2.0 Software Development Kit (SDK) (x64)](http://download.microsoft.com/download/8/f/7/8f72af82-dd19-49f9-b4a6-ecddb3990e4a/setup.exe)

执行结果很好.....duh

# kml - 谷歌地球插件中的旋转地球，考虑范围/缩放

> ID：12185749
> 
> 赞同：1
> 
> 时间：2012-08-29T20:10:23.980
> 
> 标签：kml, google-earth, google-earth-plugin

我正在尝试通过代码旋转 Google 地球插件地球。我正在使用第 3 方控制器来移动它，嵌入在调用 JavaScript 函数的 WPF 应用程序中。

我理想的解决方案是精确模拟 HUD 按钮。当我告诉它“向右旋转”或“向下旋转”时，我希望地球仪的行为就像我按下 HUD 按钮一样。那可能吗？

由于我还没有找到解决上述问题的方法，因此我通过一系列对“lookAt.setLongitude()”的调用创建了一些旋转地球的方法。解决方案的基本原理是每次调用 JavaScript 函数时都会向经度（或纬度）添加一定的量。

我的问题是我还没有弄清楚如何计算范围（又名：用户放大了多近/多远）！当一定距离时，在经度上加上“25”效果很好——但离地球表面更远或更近，解决方案很快就会分崩离析！

是否有一种自动方法可以解释范围，或者是否有人对基于当前范围调整纬度/经度运动的良好算法有任何指示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:39:54.660

如果您获得 from 的当前外观，`ge.getView()`您还可以获得视图的当前范围。

```
var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
var newLook = ge.createLookAt('');
newLook.setLatitude(lookAt.getLatitude());
newLook.setLongitude(lookAt.getLongitude() + 25.00); //or however you want to rotate
newLook.setRange(lookAt.getRange());
ge.getView().setAbstractView(newLook); 
```

小提琴：http: [//jsfiddle.net/3J3y8/4/](http://jsfiddle.net/3J3y8/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:59:18.927

没有自动的方法可以计算范围以使地球在不同的缩放级别下看起来移动相同的量。基本上，如果您将视图移动 25 度，那么这就是您移动视图的程度。

如果您希望根据范围增加移动量，则只需在计算中的某处使用范围作为变量。您至少应该发布一些代码并说明如果您尝试此操作并卡住它为什么不起作用。

**编辑**

另一种选择可能是简单地模拟为您旋转地球的按键。根据您的设置，您应该能够发送箭头键之一或控制键之一`a`，或者因此使插件旋转`w`，就像您按下 HUD 上的按钮一样。`s``d`

# javascript - 检查网站是否在前台

> ID：12185750
> 
> 赞同：4
> 
> 时间：2012-08-29T20:10:25.337
> 
> 标签：javascript, jquery, foreground

我想检查我的网站是否在前台使用 JavaScript。但是在阅读所有内容之前不要回答，因为你会直接对我说我应该这样[做](http://jsfiddle.net/cK3NU/)：

```
$(window)
    .focus(function() {
        console.log("focus");
    })
    .blur(function() {
        console.log("blur");
    });​ 
```

但问题是我的页面上有来自第三方的 iframe，如果用户点击 iframe，窗口模糊事件会被触发，但用户仍然在我的页面上。我试图通过检查[是否`document.activeElement`是一个 iframe on blur](http://jsfiddle.net/cK3NU/1/)来解决这个问题：

```
$(window)
    .focus(function() {
        console.log("focus");
    })
    .blur(function() {
        console.log("blur");
        if (document.activeElement.tagName.toLowerCase() == "iframe") {
            console.log("still focus");
        }
    });​ 
```

这里的问题是当用户先点击 iframe 然后点击另一个应用程序时，我无法检查页面是否不再处于前台。

那么，当站点中有 iframe 时，如何检查站点是否在前台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:44:17.463

您应该能够使用[Page Visibility API](http://www.w3.org/TR/2011/WD-page-visibility-20110602/)。

> 该规范定义了一种方法，供站点开发人员以编程方式确定页面的当前可见性状态，以便开发功率和 CPU 高效的 Web 应用程序。

## 学到更多

*   [http://davidwalsh.name/page-visibility](http://davidwalsh.name/page-visibility)
*   [https://developers.google.com/chrome/whitepapers/pagevisibility](https://developers.google.com/chrome/whitepapers/pagevisibility)

## **例子**

*   [http://www.samdutton.com/pageVisibility/](http://www.samdutton.com/pageVisibility/)

# c# - 重写 VertexPositionTexture 以使用整数向量

> ID：12185751
> 
> 赞同：1
> 
> 时间：2012-08-29T20:10:36.750
> 
> 标签：c#, xna-4.0

我目前正在从事一个涉及使用 VertexPositionTextures 设置大量顶点数据的项目。这最终会占用大量内存，尽管我可以针对当前内存中的内容以及可以卸载到硬盘驱动器的内容进行一些优化，但我想以各种可能的方式进行优化。

那么我的问题是：有没有一种方法可以重写 VertexPositionTexture 结构，以便它使用我的自定义 IntVector 类来使用更少的空间？这是否也需要对 DrawPrimitives 和 DrawUserPrimitives 进行修改？

我问这个是因为我没有使用纹理图集，所以我的 UV 坐标总是 (0,0),(0,1),(1,0),(1,1) 可以不用浮点数表示，并且我的顶点位置也可以很容易地用整数表示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T08:22:36.177

**是的，你可以这样做。**你只需要定义一个自定义的顶点格式，剩下的交给 XNA 来做。

要记住的最重要的事情是，您只能使用 available `VertexElementFormat`s ( [MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.vertexelementformat.aspx) ) 中的元素 - 请注意这些格式在配置文件 ( [info](http://blogs.msdn.com/b/shawnhar/archive/2010/03/12/reach-vs-hidef.aspx) )`HalfVector`中不可用。`Reach`

**您可能不需要创建自己的向量类型**`Microsoft.Xna.Framework.Graphics.PackedVector`，因为 XNA 已经为( [MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.packedvector) ) 或主库中的所有可用格式提供了实现。如果您确实想创建自己的类型，它需要是一个`struct`（或顶点中的松散字段）以相同的方式打包。

最后，值得指出的是，没有 32 位`int`数据类型。而且也没有任何好处，因为 a `float`(a `Single`) 在 32 位时大小相同。（有些 GPU 以单精度运行，因此无论如何您都无法保持额外的精度。）

* * *

所以我们从`VertexPositionTexture`包含一个`Vector3`位置（96 位）和一个`Vector2`纹理坐标（64 位）开始，总共 160 位。

让我们将其转换为`IntVertexPositionTexture`包含`Short4`位置（64 位）和`NormalizedShort2`纹理坐标（32 位）的自定义，总共 96 位（大小减少 40%）。

（如果您在 2D 中工作，您可以使用`Short2`而不是`Short4`保存另外 32 位。没有`Short3`。）

这是此顶点类型的代码，实际上只是了解 API 期望的情况：

```
struct IntVertexPositionTexture : IVertexType
{
    public Short4 Position;
    public NormalizedShort2 TextureCoordinate;

    public IntVertexPositionTexture(Short4 position, NormalizedShort2 textureCoordinate)
    {
        this.Position = position;
        this.TextureCoordinate = textureCoordinate;
    }

    public static readonly VertexDeclaration VertexDeclaration = new VertexDeclaration(new VertexElement[]
    {
        new VertexElement(0, VertexElementFormat.Short4, VertexElementUsage.Position, 0),
        new VertexElement(8, VertexElementFormat.NormalizedShort2, VertexElementUsage.TextureCoordinate, 0),
    });

    VertexDeclaration IVertexType.VertexDeclaration
    {
        get { return IntVertexPositionTexture.VertexDeclaration; }
    }
} 
```

创建自定义顶点类型时重要的是确保字段与您在`VertexDeclaration`( [MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.vertexdeclaration.aspx) ) 中指定的顺序和布局相匹配。你如何创建你的`VertexDeclaration`应该是不言自明的 - 只需查看[MSDN 页面`VertexElement`的构造函数](http://msdn.microsoft.com/en-us/library/ff433870(v=xnagamestudio.40))。每个字段的偏移量以字节为单位。

与HLSL中的[顶点着色器语义](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509647(v=vs.85).aspx#VS)`elementUsage`相`usageIndex`匹配。所以在这种自定义格式中，我们有和。`POSITION0``TEXCOORD0`

的使用`IVertexType`是可选的，因为您也可以将 a`VertexDeclaration`直接传递给（例如）`VertexBuffer`构造函数。

* * *

如果您想制作与我提供的不同的顶点格式，这应该是您需要的所有信息。有关更多信息，[Shawn Hargreaves 的博客文章](http://blogs.msdn.com/b/shawnhar/archive/2010/04/19/vertex-data-in-xna-game-studio-4-0.aspx)详细介绍了 API。

# sql-server - 如何在 MSSQL 中复制分布在多个表中的记录集？

> ID：12185753
> 
> 赞同：2
> 
> 时间：2012-08-29T20:10:53.497
> 
> 标签：sql-server, tsql

我有一个包含报价和产品配置的数据库，报价有一个标题表，在该表下可能有一个或多个配置。在配置中，有一些表格以一对一和一对多的阴影定义产品和硬件。如果客户希望更改报价的任何方面，则必须冻结当前报价，并使用不同的报价编号生成另一个报价。报价单号是标题表中的自动识别字段。

我写了一个冗长的克隆脚本，一开始就可以工作，但由于需要额外的列，克隆脚本很快就过时了。这使得销售支持不得不手动复制报价，这通常会导致错误。

您将如何以轻松定义关系、传播新 id 而不必明确指定每个表中的所有列的方式来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:14:42.977

你可以

```
SELECT * 
INTO #tableN
FROM tableN
WHERE QuotationID = @OldQuotationID 
```

到涉及的每个表的临时表中，这样您就不必知道每个表的确切架构。然后，在您创建了新的标题行并捕获了新的 QuotationId 值之后，您可以使用新的 QuotationID 更新这些表并将它们重新插入到它们来自的表中。

# php - mysql_query 问题 - 语法错误

> ID：12185754
> 
> 赞同：2
> 
> 时间：2012-08-29T20:11:00.523
> 
> 标签：php, mysql, sql, insert

我目前正在构建一个具有多个下拉菜单的 Web 表单，我想通过 PHP 将它们提交到 SQL 数据库中。

我对 PHP 的了解很少，但没有比这样做更好的学习方法了！我正在按照本指南将数据发布回我的数据库 -[链接](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php)

我的代码是：

```
$CLI = $_POST['CLI'];
$Environment = $_POST['Environment'];
$Type = $_POST['Type'];
$Fault = $_POST['Fault'];

$query="INSERT INTO testtable (cli, env, type, fault)VALUES ('$CLI', '$Environment', '$Type', '$Fault')"

mysql_query($query) or die (mysql_error());

echo "Database Updated With: ".$CLI"; 
```

当我编辑此代码时，我在 mysql_query 行和 echo 行上遇到语法错误。我已将此上传到我的服务器，但是它会转到 php 更新页面，然后不会将数据发布回数据库。

有人可以帮忙吗？我找不到任何简单的答案来解决它！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:13:18.057

在 mysql 行的末尾（最后一个引号之后）需要一个分号。

可能您之前需要一个空间`VALUES`。

`"`你在最后一行的末尾有一个额外的。

换句话说：

```
$query="INSERT INTO testtable (cli, env, type, fault) VALUES ('$CLI', '$Environment', '$Type', '$Fault')";

mysql_query($query) or die (mysql_error());

echo "Database Updated With: ".$CLI; 
```

**笔记：**

正如评论中提到的，如果有人调用传递这个的页面：

```
&Type=','');+DROP+TABLE+testtable;+-- 
```

...它将删除您的数据！请在为时已晚之前阅读“Sql 注入攻击”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:14:11.217

请修改您的代码。你想念 ; 之后`$query=...`，你`"`在最后一行有额外的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:14:27.823

您在行尾缺少分号：

```
$query="INSERT INTO testtable (cli, env, type, fault)VALUES ('$CLI', '$Environment', '$Type', '$Fault')" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T20:12:14.577

`mysql_connect()`在运行之前，您需要先使用连接到您的数据库`mysql_query()`。

[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T20:14:03.633

您在行尾没有分号，`$query="INSERT...`并且在最后一行的分号之前有一个额外的双引号。

有问题的 PHP 错误应该非常清楚地向您指出这一点。

# android - 仅在 Android 应用中接收短信

> ID：12185756
> 
> 赞同：1
> 
> 时间：2012-08-29T20:11:22.783
> 
> 标签：android, sms, broadcastreceiver

我想编写一个接收短信的应用程序，但我也希望收到的短信不会出现在内置消息应用程序中。我可以做吗？

其次，我想在我的应用程序中保存收到的短信，我该怎么做？

# javascript - d3.js 散点图中的刻度标签在 Firefox 13.0.1 中被截断

> ID：12185757
> 
> 赞同：1
> 
> 时间：2012-08-29T20:11:26.077
> 
> 标签：javascript, html, css, cross-browser, d3.js

我目前正在使用 d3.js 制作散点图，这与此链接中的内容非常相似：

[http://bost.ocks.org/mike/d3/workshop/dot-chart.html](http://bost.ocks.org/mike/d3/workshop/dot-chart.html)

我的问题是，当我使 y 轴的刻度标签非常长并相应地使用 CSS 增加 SVG 元素的填充大小时，部分刻度标签在 Firefox 13.0.1 中被截断，但在 Safari 6.0 中却没有。

在 CSS 中，我通过将其添加到链接中的代码来增加 SVG 元素的填充大小：

```
svg{
    padding: 200px;
} 
```

为了增加 y 轴刻度标签的长度，我在 d3 脚本中添加了这个（在 yAxis 变量被实例化之后）：

```
yAxis.tickFormat(function(d){return "lolzReallyLongTickLabels"}); 
```

增加 svg 元素的填充大小可以防止在 Safari 6.0 中截断刻度标签，但在 Firefox 13.0.1 中不会。如何使长刻度标签在 Firefox 中不被截断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T18:35:48.437

到目前为止，您可能已经有了答案。但如果没有，我发现一个页面似乎通过创建一个轴然后旋转它来处理您的问题。

http://bl.ocks.org/hlvoorhees/5986172

# tfsbuild - 可以从 Team Foundation Server 2010 构建代理运行 .NET 4.5 代码分析吗？

> ID：12185764
> 
> 赞同：2
> 
> 时间：2012-08-29T20:12:09.000
> 
> 标签：tfsbuild, fxcop, .net-4.5, winapi

我有一个针对[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5 的项目。在 Visual Studio 2012 中，我可以像在旧版本的 Visual Studio 中一样运行代码分析 ( [FxCop )。](http://en.wikipedia.org/wiki/FxCop)

我们的构建机器使用来自[Team Foundation Server](http://en.wikipedia.org/wiki/Team_Foundation_Server) Server 的构建代理，即 Team Foundation Server 2010。我们已经从 Windows 8 SDK 中安装了 .NET 4.5 SDK，它使构建代理能够编译 .NET 4.5 项目。我们已经安装了 FxCop 并且静态代码分析对于面向 .NET 4.0 的项目“正常工作”，但在面向 .NET 4.5 时无法在日志中找到它。

这甚至可能吗？如果我们升级到 Team Foundation Server 2012，它会起作用吗？

我们尝试过的：

将 FxCop 更新到 10.0（从 1.36），因为我怀疑我们需要更新版本的 FxCop 来进行分析，就像我们需要安装工具启用编译一样。但是 10.0 早于 .NET 4.5。我们尝试在 SDK 中寻找新版本，但根据[Windows 8 SDK 的 MS 网页](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)：

> FXCopSetup.exe 已作为“过时或弃用”工具从 SDK 中删除

使用 FxCop GUI 对程序集运行 FxCop 10.0 似乎工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:19:26.700

在您的构建机器上安装[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)将是一种解决方案。我们有一台使用 Team Foundation Server 2010 的构建机器，它针对[.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5 进行代码分析。与您所说的不同之处在于机器上安装了 Visual Studio 2012。

您是否只想将构建机器升级到 Team Foundation Server 2012 或 Team Foundation Server 服务器？Stack Overflow 问题*[Team Build 2012 是否与 Team Foundation Server 2010 兼容？](https://stackoverflow.com/questions/12172596)*使用 Team Build 2012 和 Team Foundation Server 2010 的地址（简短回答，否）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:33:15.810

我们遇到了同样的问题。

为了在构建机器上运行代码覆盖，您需要安装 Visual Studio。除了完整的 Visual Studio 安装之外，没有其他组件或下载可以完成这项工作。

我们与 Microsoft Visual Studio 产品团队确认了这一点。

不幸的是，它就是这样......叹息。

# java - swing 支持 *.ico 文件吗？

> ID：12185768
> 
> 赞同：11
> 
> 时间：2012-08-29T20:12:26.497
> 
> 标签：java, image, swing, icons

为挥杆动作设置图像：

```
Action action = ...
// ImageIcon icon = new ImageIcon(getClass().getResource("/icon.ico"));
ImageIcon icon = new ImageIcon(getClass().getResource("/icon_16x16.png"));
action.putValue(Action.SMALL_ICON, icon); 
```

`*.ico`文件不会被渲染，只有 png/jpg。
这是设计使然吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T23:44:39.683

支持的类型可能会因制造商和版本而异，但您通常可以依靠 PNG、JPG 和 GIF。

```
import javax.imageio.ImageIO;

public class QuickTest {

    public static void main(String[] args) throws Exception {
        String[] types = ImageIO.getReaderFileSuffixes();
        System.out.println("This JRE supports image types:");
        for (String type : types) {
            System.out.println("Type: " + type);
        }
    }
} 
```

## 在这里/现在输出

```
This JRE supports image types:
Type: bmp
Type: jpg
Type: wbmp
Type: jpeg
Type: png
Type: gif 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T20:16:27.563

在本地，没有。

但是，您可能想看看[image4j](http://image4j.sourceforge.net/)，它为他们提供（恕我直言）出色的支持

# php - FPDF / FPDI addPage() 方向

> ID：12185777
> 
> 赞同：6
> 
> 时间：2012-08-29T20:13:05.527
> 
> 标签：php, pdf, orientation, fpdf, fpdi

我正在使用以下代码将新页面添加到现有 PDF 文档并保存。

```
require('addons/fpdf.php');
require('addons/fpdi.php');

$pdf = new FPDI();                      
$pagecount = $pdf->setSourceFile($orgpdfpath);
for($i = 1; $i <=  $pagecount; $i++){
    $pdf->addPage();
    $tplidx = $pdf->importPage($i);
    $pdf->useTemplate($tplidx);
}
$pdf->addPage($pdforientation);
$pdf->Image($imgpath,$pdfxaxis,$pdfyaxis,$pdfwith,$pdfheight);

$pdf->Output($orgpdfpath,'F'); 
```

如果我的文档是 A4、第 1 页：纵向、第 2 页：纵向、第 3 页：纵向等，它工作正常。

如果我添加横向 A4 页面，它也可以工作。但是，在我添加了横向页面并尝试添加纵向后，横向又变为纵向，并且文档的整个格式都中断了。

我怀疑这与循环内的 addPage() 有关系。为什么在应用->useTemplate时它没有正确旋转？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T07:02:48.033

我监督有一个名为 ->getTemplateSize() 的函数。这是一个工作片段：

```
$pdf = new FPDI();                      
$pagecount = $pdf->setSourceFile($orgpdfpath);
for($i = 1; $i <=  $pagecount; $i++){

    $tplidx = $pdf->importPage($i);
    $specs = $pdf->getTemplateSize($tplidx);
    $pdf->addPage($specs['h'] > $specs['w'] ? 'P' : 'L');
    $pdf->useTemplate($tplidx);
}

$pdf->addPage($pdforientation);
$pdf->Image($imgpath,$pdfxaxis,$pdfyaxis,$pdfwith,$pdfheight);

$pdf->Output($orgpdfpath,'F'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-05T17:32:37.560

顺便说一句，如果你不能保证你所有的文件都是 A4 的（这不是你的问题，但是我的问题导致了这个问题）你也可以使用你的模板的大小来设置你的大小通过在第二个参数中将大小作为数组传递来生成文件的页面：

```
$pdf->AddPage(
    ( $size['w'] > $size['h'] ) ? 'L' : 'P',
    [ $size['w'], $size['h'] ]
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-20T12:23:42.217

如果您定义了书房方向并且它在pdf生成中不起作用，也许这会有所帮助。我在 AddPage() 上更改了横向模式下的宽度和高度。可能这应该自动完成，但在我与 PDFmerger（fpdf/fpdi 的包装类）结合使用的情况下，它不会。

```
$fpdi = new FPDI;
$count = $fpdi->setSourceFile($filename);
for($i=1; $i<=$count; $i++) {
  $template = $fpdi->importPage($i);
  $size = $fpdi->getTemplateSize($template);
  $orientation = ($size['h'] > $size['w']) ? 'P' : 'L';
  if ($orientation == "P") {
    $fpdi->AddPage($orientation, array($size['w'], $size['h']));
  } else {
    $fpdi->AddPage($orientation, array($size['h'], $size['w']));
  }
 $fpdi->useTemplate($template);
} 
```

# android - 如何测试 ACTION_TAG_DISCOVERED？

> ID：12185782
> 
> 赞同：0
> 
> 时间：2012-08-29T20:13:35.140
> 
> 标签：android, android-intent, junit, nfc

我有一个 Android 活动，当与 NFC 标签接触时会调用某个函数。我想为此创建测试。

在我的测试文件中，我的逻辑如下：

```
// Create a ACTION_TAG_DISCOVERED
// Respond to ACTION_TAG_DISCOVERED
public void testNfc(){

} 
```

在我的代码中，我有一个回调函数“onNewIntent”，它查看在接近 NFC 标签时创建的意图：

```
protected void onNewIntent(Intent intent) {
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) { ... } 
```

但是，在我的测试代码中，我无法创建 ACTION_TAG_DISCOVERED 的 Intent。我看了[这里](http://developer.android.com/reference/android/content/Intent.html)的课。

如何创建`ACTION_TAG_DISCOVERED`意图以便进行测试？沿着这条线的某处：

```
Intent nfcIntent = new Intent(Intent.ACTION_TAG_DISCOVERED)
if(nfcIntent == ACTION_TAG_DISCOVERED)
assertSomeMethod("functionWhichHandlesNFCTagDiscovered") 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:22:13.107

尝试使用这个：[ACTION_TAG_DISCOVERED](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/android/nfc/NfcAdapter.java#NfcAdapter.0ACTION_TAG_DISCOVERED)

我还没有测试过，但是如果你像这样做一个 Intent ：

```
Intent intent = new Intent(NfcAdapter.ACTION_TAG_DISCOVERED);
intent.putExtra(NfcAdapter.EXTRA_TAG, "");
...
intent.putByteArrayExtra(NfcAdapter.EXTRA_ID);
//etc. 
```

你也许可以做你所描述的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:07:57.790

您需要扫描物理设备上的标签 - 据我所知，模拟器不支持 NFC。

# mysql - 建议更好的 MySQL 查询

> ID：12185786
> 
> 赞同：3
> 
> 时间：2012-08-29T20:13:55.420
> 
> 标签：mysql, sql, joomla

当涉及到 mysql 查询时，我是一个相对的菜鸟，所以请不要咬我的头。我正在尝试使用投票扩展和 Jomsocial 制作“Top Poller”模块。我想按他们创建的民意调查数量显示前 5 名用户。这是数据表结构（以及重要部分）

```
#__users
-id
-name
-username

#_jcp_polls
-created_by (this is the same as #users.id)

#__community_users
-thumb
-avatar 
```

这是我的查询

```
$db = JFactory::getDBO();

$query = "SELECT u.id, u.username, u.name, c.thumb, c.avatar,COUNT(p.created_by) as total
      FROM #__users u, #__community_users c, #__jcp_polls p 
      WHERE u.id = p.created_by
      GROUP by u.id
  ORDER BY total DESC
      LIMIT $user_count
     ";

$db->setQuery($query);
$rows = $db->loadObjectList(); 
```

我可以在 foreach 循环中显示用户表字段，例如

```
foreach($rows as $row){
 echo $row->name
} 
```

我以为我可以使用`$row->avatar`，但它不起作用。有人可以建议一个查询，让我可以显示`#__community_users`表中的字段以及`#__users table`？并且仍然保持排名从`#__jcp_polls table`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:19:16.433

目前，您没有加入`#__community_users`的条件`#__users`。这是一个更新的查询，其中隐式连接换成了显式`INNER JOIN`s，假设`#__community_users`有一列`user_id`与`#__users.id`. 在上面的表结构中，您没有`#__community_users`与`#__users`. 没有一个，您就无法将化身与用户联系起来。

```
SELECT 
  u.id, u.username, u.name, c.thumb, c.avatar,COUNT(p.created_by) as total
FROM 
  #__users u 
  /* Supply the correct column name for c.user_id */
  JOIN #__community_users c ON u.id = c.user_id
  /* LEFT JOIN used to list 0 for users who have no polls */
  LEFT JOIN #__jcp_polls p ON u.id = p.created_by
GROUP by u.id
ORDER BY total DESC
LIMIT $user_count 
```

如果用户可能没有头像，请使用`LEFT JOIN`反对`#__community_users`：

```
SELECT 
  u.id, u.username, u.name, c.thumb, c.avatar,COUNT(p.created_by) as total
FROM 
  #__users u 
  /* Supply the correct column name for c.user_id */
  LEFT JOIN #__community_users c ON u.id = c.user_id
  /* LEFT JOIN used to list 0 for users who have no polls */
  LEFT JOIN #__jcp_polls p ON u.id = p.created_by
GROUP by u.id
ORDER BY total DESC
LIMIT $user_count 
```

您的语法虽然对 MySQL 有效，但并非普遍有效，因为您在`SELECT`列表中有多个列，但仅`u.id`在`GROUP BY`. 更便携的查询版本如下所示：

```
SELECT
  u.id, u.username, u.name, c.thumb, c.avatar, p.total
FROM
  #__users u 
  LEFT JOIN #__community_users c ON u.id = c.user_id
  /* Left Join against a subquery that returns count per user */
  LEFT JOIN (SELECT created_by, COUNT(*) AS total FROM #__jcp_polls GROUP BY created_by) p ON u.id = p.created_by
ORDER BY total DESC
LIMIT $user_count 
```

# grails - 作为管理员，如何使用 Grails Spring Security 以编程方式更改用户密码？

> ID：12185789
> 
> 赞同：2
> 
> 时间：2012-08-29T20:14:13.273
> 
> 标签：grails, spring-security, grails-2.0

我需要能够以管理员用户的身份更改用户的密码，有点像可以通过电话执行的手动**密码重置功能。**我将如何使用 Grails Spring Security 插件来做到这一点？我尝试查找有关如何完成此操作的文档，但没有提出任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:48:35.957

@AA 的答案在技术上是正确的，但过于笼统，因为插件必须基于配置。真正的代码会更紧凑，因为您可以对类和字段名称进行硬编码。此外，由于您只要求更新密码，因此最后的角色更新不相关。

如果您的用户类名称是`User`然后使用此操作来显示用户信息：

```
def editUserPassword() {
   [user: User.get(params.userId)]
} 
```

并在 GSP 中配置表单（类似于生成的`edit.gsp`）以发布到此操作：

```
def updateUserPassword() {
   def user = User.get(params.userId)
   user.password = params.newPassword
   if (!user.save())
      render view: 'editUserPassword', model: [user: user]
      return
   }

   // redirect to the 'success' page or render the user with [user: user]
} 
```

更改`userId`和`newPassword`您实际使用的任何参数名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:24:22.860

您可以使用 spring-security-ui 插件，也可以查看其[源代码](https://github.com/grails-plugins/grails-spring-security-ui/blob/master/grails-app/controllers/grails/plugins/springsecurity/ui/UserController.groovy)并了解如何：

```
def update = {
    String passwordFieldName = SpringSecurityUtils.securityConfig.userLookup.passwordPropertyName

    def user = findById()
    if (!user) return
    if (!versionCheck('user.label', 'User', user, [user: user])) {
        return
    }

    def oldPassword = user."$passwordFieldName"
    user.properties = params
    if (params.password && !params.password.equals(oldPassword)) {
        String salt = saltSource instanceof NullSaltSource ? null : params.username
        user."$passwordFieldName" = springSecurityUiService.encodePassword(params.password, salt)
    }

    if (!user.save(flush: true)) {
        render view: 'edit', model: buildUserModel(user)
        return
    }

    String usernameFieldName = SpringSecurityUtils.securityConfig.userLookup.usernamePropertyName

    lookupUserRoleClass().removeAll user
    addRoles user
    userCache.removeUserFromCache user[usernameFieldName]
    flash.message = "${message(code: 'default.updated.message', args: [message(code: 'user.label', default: 'User'), user.id])}"
    redirect action: edit, id: user.id
} 
```

# windows-phone-7 - OnBackKeyPress 覆盖方法

> ID：12185790
> 
> 赞同：0
> 
> 时间：2012-08-29T20:14:14.123
> 
> 标签：windows-phone-7, methods, popup

我想`hide/disable`在 Windows 手机上使用后退键来弹出页面，我正在使用以下代码来执行此操作。

```
protected override void OnBackKeyPress( System.ComponentModel.CancelEventArgs e )   
{              
   if (myPopupUp.IsOpen)
   {
    myPopUp.IsOpen = false;
    e.Cancel = true;   
   }

   base.OnBackKeyPress(e);
} 
```

但是当我运行应用程序时，它会给出一个错误，说`"no suitable method found to override"` 有人知道解决方案吗？我欢迎任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:51:33.760

它在我的全景页面中对我有用，我希望您不会在任何自定义 userControl 中覆盖它。

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = true;
        base.OnBackKeyPress(e);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:57:28.217

尝试改用[PhoneApplicationPage.BackKeyPress](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.backkeypress%28v=vs.92%29.aspx)事件。

# html - 谷歌广告拦截 onload 事件

> ID：12185793
> 
> 赞同：0
> 
> 时间：2012-08-29T20:14:26.340
> 
> 标签：html, onload, adsense

为什么下面的html禁止触发onload事件？如果我注释掉谷歌广告代码，那么该事件确实被触发了。我只在 Mac Os X 上的 Firefox 15.0 中测试过。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
     <head>

        <script type="text/javascript">

            function load()
            {
               alert("Hello")
            }

        </script>
    </head>

    <body onload="load()">

     <script type="text/javascript"><!--
    google_ad_client = "ca-pub-XXXXXXXXXXXXX";
    /* iKarta main */
    google_ad_slot = "XXXXXXXX";
    google_ad_width = 728;
    google_ad_height = 90;
    //-->
    </script>
    <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
    </body>
</html> 
```

# regex - 如何定义具有以下限制的 XSd Integer 数据类型：第一个数字不应为零。（开头没有零）

> ID：12185797
> 
> 赞同：0
> 
> 时间：2012-08-29T20:14:35.980
> 
> 标签：regex, xsd

如何定义具有以下限制的 XSd Integer 数据类型：第一个数字不应为零。（开头没有零）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:27:22.323

您可以使用`<xs:restriction>`基于`xs:integer`数据类型的元素以及`<xs:pattern>`这样的方面：

```
<xs:restriction base="xs:integer">
    <xs:pattern value="[^0].*"/>
</xs:restriction> 
```

这将只允许允许的值`xs:integer`是有效的，附加限制是第一个字符不能是零。

请注意，`<xs:pattern>`元素中的模式始终引用整个值，因此`^`不需要像这样的开始标记。

# c# - WatiN - 在 winForm 中使用 WatIn

> ID：12185799
> 
> 赞同：1
> 
> 时间：2012-08-29T20:15:06.987
> 
> 标签：c#, winforms, watin

我开始使用WatiN，我想知道，我可以在不打开WatIn 自动打开浏览器的情况下看到结果吗？

我的意思是，当我这样做时：

```
using (var browser = new IE("http://www.google.com"))
{
    browser.TextField(Find.ByName("q")).Value = "GOGOOG";
} 
```

它工作得很好（而且非常快），但我想在不打开浏览器的情况下在 win 表单中看到它。

所以我真正的问题是：

我可以在 winForm 中将 WatiN 与 WebBrowser 对象/控件一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:27:10.210

看看这个帖子：

[使用网络浏览器观看](https://stackoverflow.com/questions/3712599/watin-with-webbrowser)

ActiveX 实例用于创建 IE 实例：

```
Settings.AutoStartDialogWatcher = false;
var ie = new IE(webBrowser1.ActiveXInstance);
ie.GoTo("http://www.google.com"); 
```

# makefile - 如何在多个make.exe之间进行选择来构建

> ID：12185800
> 
> 赞同：0
> 
> 时间：2012-08-29T20:15:10.067
> 
> 标签：makefile

我的电脑上有多个 make.exe。如何指定我使用哪一个来构建我的代码？我可以将一个（make.exe）复制到我的代码文件夹中，然后运行： make -f Makefile ***吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:27:43.197

如果您只打算使用 make.exe 之一，请设置 PATH 环境变量，使其指向您要使用的那个。

如果您计划为不同的项目使用不同的 make.exe，请将 .BAT 文件添加到您的项目目录中，并在其中使用 make.exe 的完整路径

示例 bat 文件：

```
@echo off
c:\somepath\somewhere\make.exe %* 
```

像这样使用它：

1.  cd 到 make.bat 文件所在的项目目录
2.  make -f 生成文件

# c# - 服务器上的流式文件结果导致字符流而不是文件

> ID：12185802
> 
> 赞同：0
> 
> 时间：2012-08-29T20:15:13.773
> 
> 标签：c#, .net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:17:11.033

Make sure that the Office MIME types are registered on the server that is not working

[http://technet.microsoft.com/en-us/library/ee309278(v=office.12).aspx](http://technet.microsoft.com/en-us/library/ee309278(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:05:22.497

Thanks, for the replies they are greatly appreciated. It turns out that the problem was not having that for the file to be send and displayed correctly the buffering (Buffer = "true") had to be set in the page directive. The headers are cleared, page created in it's entirety and then pushed to the user. This was a .net project that pumps results from our db in .xlsx to mobile devices. A little (or a big) pain but now it works.

# mysql - MySQL 删除级联。测试示例

> ID：12185811
> 
> 赞同：24
> 
> 时间：2012-08-29T20:15:36.470
> 
> 标签：mysql, cascade

我想知道这个测试问题。我自己准备了示例并对其进行了测试，但我仍然不确定答案。

具有以下内容：

```
CREATE TABLE foo (
  id INT PRIMARY KEY AUTO_INCREMENT, 
  name INT
)

CREATE TABLE foo2 (
  id INT PRIMARY KEY AUTO_INCREMENT, 
  foo_id INT REFERENCES foo(id) ON DELETE CASCADE
) 
```

据我所知，答案是：

**一种。创建了两个表**

虽然也有：

**湾。如果删除表 foo2 中 foo_id 为 2 的行，则表 foo 中 id=2 的行被自动删除**

**d.如果删除表foo中id=2的行，则删除表foo2中所有foo_id=2的行**

在我的示例中，我将使用删除语法：

```
DELETE FROM foo WHERE id = 2;
DELETE FROM foo2 WHERE foo_id = 2; 
```

出于某种原因，我无法找到表之间的任何关系，尽管看起来应该有一个。也许有一些 MySQL 设置或者`ON DELETE CASCADE`在表创建查询中没有正确使用？我很想知道...

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-29T21:27:15.817

答案 d。是正确的，当且仅当存储引擎实际上支持并强制执行外键约束。

如果表是用 来创建的`Engine=MyISAM`，那么两者都不是。或 d。是正确的。

如果表是用 来创建的`Engine=InnoDB`，那么**d.** 是正确的。

笔记：

这对于 InnoDB 是正确的，当且仅当`FOREIGN_KEY_CHECKS = 1`; 如果`FOREIGN_KEY_CHECKS = 0`，则`DELETE`父表 (foo) 中的a*不会*从子表 (foo2) 中删除引用从父表中删除的行的行。

使用 (1=ON, 0=OFF)的输出验证这一点`SHOW VARIABLES LIKE 'foreign_key_checks'` （正常默认设置为 ON。）

输出`SHOW CREATE TABLE foo`将显示表使用的引擎。

的输出`SHOW VARIABLES LIKE 'storage_engine'`将显示创建表且未指定引擎时使用的默认引擎。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-29T20:35:56.713

您确实在两个表之间有关系，它在 foo2 创建命令中： `... foo_id int references foo(id) on delete cascade`.

根据[MySQL 外键约束参考](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)：

> CASCADE：删除或更新父表中的行，并自动删除或更新子表中匹配的行。支持 ON DELETE CASCADE 和 ON UPDATE CASCADE。

此外，根据[MySQL 外键参考](http://dev.mysql.com/doc/refman/5.5/en/example-foreign-keys.html)：

> 对于 InnoDB 以外的存储引擎，可以在定义列时使用 REFERENCES tbl_name(col_name) 子句，该子句没有实际效果，*仅作为您当前定义的列的备注或注释引用另一个表中的列*。

因此，由于外键是从子表到父表的，因此它会`foo`生成一个父表和一个子表，因此如果您使用 InnoDB 或其他一些支持它的存储引擎， `foo2`删除一行`foo`会将删除级联到。`foo2`

# ruby-on-rails - 用于 Rails 项目的 Selenium Web 驱动程序

> ID：12185812
> 
> 赞同：1
> 
> 时间：2012-08-29T20:15:36.573
> 
> 标签：ruby-on-rails, google-chrome, selenium, rspec, webdriver

我正在尝试为我的 Rails 项目设置 Selenium，并且我想使用 chrome 作为我的浏览器。它目前仅作为打开的 firefox 工作。[我有](http://pivotallabs.com/users/dwfrank/blog/articles/category/161-rails) `Capybara.register_driver :selenium_chrome do |app| Capybara::Selenium::Driver.new(app, :browser => :chrome) end`，`spec_helper.rb`但是当我运行规范时它仍然会打开 Firefox。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:25:29.443

修好了 不得不使用`Capybara.register_driver :selenium do |app|` [而不是](https://github.com/jnicklas/capybara) `Capybara.register_driver :selenium_chrome do |app|`.

# r - 对象作为整体边界

> ID：12185813
> 
> 赞同：0
> 
> 时间：2012-08-29T20:15:36.847
> 
> 标签：r

```
 integg <- function(t,a,b){  

   integrate(Vectorize(function(x){55}),lower=t-(a+b),upper=t-a)   
   } 
```

我遇到了我认为可能是一个简单的问题。

我正在整合一个可能会变化的常数。

如果你把这个常数看作一个函数，它只存在于 x 轴上 >= 0 的值。我不能只设置下限 == 0。因为有时下限可能是一些值 > 0。

最好以某种方式将常量写为函数。

我遇到的第二个问题是我想将该值 55 作为一个对象 (x)，我可以将其作为函数 integg() 的参数包含在内

我正在使用 Vectorize，因为这是我知道如何整合常量的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:49:15.257

为什么不完全按照你的描述做。`x`作为参数添加到您的`integg`函数

```
integg <- function(t, a, b, intval) {
  u <- t - a
  l <- ifelse(u - b < 0, 0, u - b)
  integrate(Vectorize(function(foo, x) {55}), lower=l, upper=u, x=intval)
} 
```

如果您要集成的功能始终保持不变，您可以编写自己的面积计算：

```
integg2 <- function(t, a, b, intval) {
  u <- t - a 
  l <- ifelse(u - b < 0, 0, u - b)
  intval * (u - l)
} 
```

# javascript - 禁用表单按钮onClick，然后提交表单

> ID：12185817
> 
> 赞同：0
> 
> 时间：2012-08-29T20:15:42.477
> 
> 标签：javascript, jquery, coffeescript

我的表单允许用户提交一首诗。

有时，该页面上有一个新用户名字段（如果没有人登录）。在这种情况下，我想覆盖按钮单击，以便它首先注册它们：

```
$('#submit-poem').click ->
  $('input[type=submit]').attr('disabled', true)
  if $('#new_poet_name_field').length
    signUp();  // This will submit the poem form after registering
    false
  else
    console.log("A poet was already logged in!")
    true 
```

这曾经工作得很好。但是现在，当没有 时`new_poet_name_field`，提交按钮保持禁用状态。Returning`true`用于提交表单。现在，`$('#new_question')[0].submit()`如果没有`poet_name_field`.

为什么表单`true`返回时不提交？我的解决方法令人担忧；表单现在似乎有可能提交两次：一次是我明确提交时，一次`true`是返回时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:22:28.060

当您希望某人注册而不是提交诗歌时，您应该绑定到表单“提交”事件并使用 preventDefault/return false。这样就不需要对按钮进行任何禁用/启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:25:33.313

我不喜欢没有表格的想法。它是无效的，并且肯定不遵循 HTML 的规范。

每个建设性的表单元素都应该包含在表单标签内。您可以通过多种方式控制表单的提交。

* * *

您使用的代码很糟糕

1.  为什么？？是否有多个提交按钮？下面的代码禁用页面上的每个提交按钮，也可以是其他形式的。

    ```
    $('#submit-poem').click ->
      $('input[type=submit]').attr('disabled', true) 
    ```

2.  这是检查提交真实性的错误方法，它可以很容易地使用firebug之类的工具进行操作。

    ```
    if $('#new_poet_name_field').length
        signUp(); 
    ```

* * *

如果确定用户是否已登录或不那么重要，那么您可以快速向服务页面发送 ajax 请求，从而获得该信息

```
$('#submit-poem').click(function() {
    $(this).attr('disabled', true)
    $.post("yourservicepage.php", {}, function(data) {
          // RE suppose, data is the boolean value from server indicating logged in or not
          if(data != true) {
             signup(); //if not logged in then signup
          }
          //...
    });
}); 
```

# jquery - 使用 detectmobilebrowser.com 重定向移动网站

> ID：12185821
> 
> 赞同：0
> 
> 时间：2012-08-29T20:15:56.313
> 
> 标签：jquery, redirect, mobile

我正在尝试将我的网站重定向到我的移动网站，但重定向不起作用。

它写在文件中

> 如果浏览器是移动设备，jQuery.browser.mobile 将为真

所以我使用了一些我的逻辑并创建了这段代码，因为我在网上找不到任何与此相关的内容来帮助我，这就是我正在使用的脚本

```
<script>
    if ( $jQuery.browser.mobile = true ) {
        window.location.href = "http://stackoverflow.com";
    }
</script> 
```

知道为什么它不起作用吗？多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:17:28.373

您的比较需要有两个等号`==`

此外，您不引用 as `$jQuery.browser.mobile`，只是`jQuery.browser.mobile`或`$.browser.mobile`

# javascript - 重新打开时，JQuery UI 对话框未正确调整大小？

> ID：12185824
> 
> 赞同：0
> 
> 时间：2012-08-29T20:16:07.167
> 
> 标签：javascript, jquery, jquery-ui, javascript-framework

我需要这里的专家的帮助。

一旦单击“打开”按钮，我的代码就可以很好地运行一次。一旦我选择了日期，它就关闭了。但是，当我再次重新打开它时，宽度和高度超出了范围，并且 ui 对话框看起来不同。我想知道我在这里做错了什么？

```
<html>

<head>

<!-- LOAD JQUERY LIBRARY: -->  
    <link   href="jq/jquery-ui.css"         type="text/css" rel="stylesheet" />
    <script src="jq/jquery.min.js"          type="text/javascript"> </script>
    <script src="jq/jquery-ui.min.js"       type="text/javascript"> </script>

<script type="text/javascript">
var z; 

function opendd() {

  $('#dd').dialog({  
       autoOpen:   true, 
       modal:      true, 
       overlay:    { opacity: 0.5, background: 'black'}, 
       title:      'Select the date:', 
       height:     215,  
       width:      234, 
       draggable:  false,  
       resizable:  false 

   });//end of dialog_atip 

  $("#B1").click(function(){  
        callback(); 
  }); 

  $('#d1').datepicker({ 
     onSelect:function(){ 
                    z = $(this).val(); 
                    alert(z); 
                    $("#dd").dialog("close"); 
     } 
  }); 

}//end of function

function callback() {  
    alert(z); 
} 
</script>

</head>

<body>
<a href="javascript:opendd()">open
</a>
<div style="display:none" id="dd">
<div id="d1">
</div>

</div>
<input type="button" value="CallbackValue" name="B1" id="B1"> 

</body>

</html> 
```

非常感谢和感谢您提前提供的所有帮助和支持。

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:40:34.800

我无法复制您描述的行为，但确实重写了一些功能以更准确地符合 jQuery 的建议，这可能会解决您的问题。

在下面的代码块中，我在文档准备好时实例化 jQuery 模式对话框，然后每次触发 dialog('open') 命令以打开/关闭它。（我用 google api 换掉了你的库进行测试）。

请让我知道这是否适合您:)

```
<html>

<head>

<!-- LOAD JQUERY LIBRARY: -->  
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.23/themes/base/jquery-ui.css" type="text/css" media="all" /><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
<script type="text/javascript">
var z; 

$(document).ready(function() {
    $('#dd').dialog({  
       autoOpen:   false, 
       modal:      true, 
       overlay:    { opacity: 0.5, background: 'black'}, 
       title:      'Select the date:', 
       height:     215,  
       width:      234, 
       draggable:  false,  
       resizable:  false 

    });//end of dialog_atip 
    $("#B1").click(function(){  
        callback(); 
    }); 
    $('#d1').datepicker({ 
        onSelect:function(){ 
                    z = $(this).val(); 
                    alert(z); 
                    $("#dd").dialog("close"); 
        } 
    }); 
});

function opendd() {
    $('#dd').dialog('open');
}//end of function

function callback() {  
    alert(z); 
} 
</script>

</head>

<body>
<a href="javascript:opendd()">open
</a>
<div style="display:none" id="dd">
<div id="d1">
</div>

</div>
<input type="button" value="CallbackValue" name="B1" id="B1"> 

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:00:23.073

我也无法重现您的问题，但如果您继续遇到问题，您可以使用类似`$("#dd").dialog().option("height", 215)`. 阅读更多关于它的[jquery 对话框高度选项 - 在运行时设置高度](http://docs.jquery.com/UI/Dialog#option-height)。

也许CSS解决方案会更好？

你有没有注意到你有`autoOpen:true`但你不使用它？这是故意的吗？

这是[我的 JSFiddle](http://jsfiddle.net/xxsjb/2/)。

# sas - 从 SAS 程序发送电子邮件

> ID：12185825
> 
> 赞同：1
> 
> 时间：2012-08-29T20:16:11.440
> 
> 标签：sas

当链接到电子邮件发送的条件无法执行时，为什么这段代码仍然发送​​电子邮件？SASLOG 证明条件值为零，即 x=。

```
98   filename outbox email 'dan.xxxxx@zz.com';
99
100  data _null_;
    /* Set variable */
101     x=0;  
102     put x=;
    /* condition cannot be true */
103     if x=1 then do;  
104        link send_email;  /* should only be hit if condition is true */
105     end;
106  return;
107
108  send_email:  /* seems to get executed no matter what */
109     file outbox
110     to=("dan.xxxxx@zzcom")
111     subject="Email test";
112     put "Email test from SAS program";
113     put " ";
114  return;
115  run;

NOTE: The file OUTBOX is:
      E-Mail Access Device

x=0
Message sent
      To:          ("dan.xxxxx@zz.com" )
      Cc:
      Bcc:
      Subject:     Email test
      Attachments:
NOTE: 0 records were written to the file OUTBOX.
NOTE: DATA statement used (Total process time):
      real time           7.22 seconds
      cpu time            0.35 seconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:24:37.900

FILE 不是条件可执行语句，而是编译时语句。即使没有记录输出到文件，文件仍然会被创建，在这种情况下，即使没有将数据放入其中的记录，也可能会发送电子邮件。

请参阅以下内容：

```
data _null_;
set sashelp.class;
if 0 then do;
    file "c:\temp\temp.txt";
    put age;
end;
run; 
```

即使文件中没有记录，您仍然可以在日志中看到有关正在创建的文件的信息。

如果您尝试有条件地发送电子邮件或不发送电子邮件，您可能希望返回有关您正在执行的操作的更多信息，以便您可以获得有关如何操作的有用回复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T21:10:58.417

在看到乔更正确的答案后，我完全重写了我的。

控制电子邮件传递的一种方法是使用电子邮件“指令”而不是`FILE`声明中的选项。例如：

```
filename outbox email;
data _null_;
   x=0;  
   put x=;
   if x=1 then do;  
      link send_email;
      end;
   return;
send_email:  
   file outbox;
   put '!em_to! ( "dan.xxxxx@zzcom" )';
   put '!em_subject! Email Test';

   put "Email test from SAS program";
   put " ";
return;
run;
filename outbox clear; 
```

现在，当您执行此操作时，您将收到 SAS 错误，因为原始语句中未提供“TO”地址`FILENAME`，但您可以忽略此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:37:46.303

如果没有更多背景，很难准确猜测您打算如何执行此操作，但我认为更简洁的方法是：

1.  确定是否应发送电子邮件。
2.  使用宏代码中的数据步有条件地发送电子邮件。

步骤1：

```
%let send_email = 0;  * WHEN 0 EMAIL WILL NOT BE SENT. WHEN 1 EMAIL WILL BE SENT;

data _null_;
  set mydata;
  if x = 1 then do;
    call symput('send_email',1);
    stop; * LEAVE THE DATASTEP AS SOON AS WE DECIDE AN EMAIL SHOULD BE SENT;
  end;
run; 
```

第2步：

```
%macro send_email;
  %if &send_email eq 1 %then %do;
    filename outbox email 'dan.xxxxx@zz.com';
    data _null_;
      file outbox to=("dan.xxxxx@zzcom") subject="Email test";
      put "Email test from SAS program";
      put " ";
    run;
  %end;
%mend;
%send_email; 
```

*编辑：*`return`将代码中的语句 更改为`stop`语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T15:05:43.663

```
*Just modified Step 1 to not send emails on weekends - Works great!

%let send_email = 0;  * WHEN 0 EMAIL WILL NOT BE SENT. WHEN 1 EMAIL WILL BE SENT;

data _null_;
   dt=today();
   weekday=weekday(dt);
   if weekday ne 7 or weekday ne 1 then do;
     call symput('send_email',1);
     stop; * LEAVE THE DATASTEP AS SOON AS WE DECIDE AN EMAIL SHOULD BE  SENT;
   end; 
```

跑;

# iphone - Phonegap iPhone目标链接问题

> ID：12185828
> 
> 赞同：0
> 
> 时间：2012-08-29T20:16:18.803
> 
> 标签：iphone, ios, cordova, target

遵循这个很好的[答案](https://stackoverflow.com/a/9748173/356042)

我正在使用**科尔多瓦 2.0**。

我需要在 Safari 窗口中打开一些特定的链接。但同时我需要**在同一个 WebView 中加载外部广告**。所以我正在使用这个conf：

```
OpenAllWhitelistURLsInWebView = YES
ExternalHosts = ['*'] 
```

设置我对*ads/GA/et*没有任何问题。但是，对于我尝试使用 target=_blank 的链接，正如许多帖子所说，但设置`ExternalHosts = ['*']`似乎破坏了`target=_blank`功能。

## 例子

```
<a href='external.com' target=_blank> open in Safari</a>
<a href='internal.com' > open in WebView</a> 
```

## 问题：

`ExternalHosts = ['*']`可以使用和`OpenAllWhitelistURLsInWebView = YES` ??强制将链接目标打开到 safari 窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:13:42.813

这看起来可能会奏效。我正在运行 2.1 并遇到同样的问题。

我仍在寻找更有效的解决方案。 [http://www.rigelgroupllc.com/blog/2012/05/22/opening-links-in-phonegap-apps-in-mobile-safari/](http://www.rigelgroupllc.com/blog/2012/05/22/opening-links-in-phonegap-apps-in-mobile-safari/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T22:58:38.327

只需捕获 javascript 中所有具有 的链接`target="_blank"`，然后使用 '_system' 参数将它们传递给 window.open。这将适用于 iOS 和 Android。

```
$(document).on('click', 'a[target="_blank"]', function(ev) {
  var url;

  ev.preventDefault();
  url = $(this).attr('href');
  window.open(url, '_system');
}); 
```

# c# - 将十六进制字符串解码为 C# 中的字符串，就像这个 php 代码一样

> ID：12185831
> 
> 赞同：1
> 
> 时间：2012-08-29T20:16:32.913
> 
> 标签：c#, php, hex

```
// This function converts from a hexadecimal representation to a string representation.
function hextostr($hex) {
  $string = "";
  foreach (explode("\n", trim(chunk_split($hex, 2))) as $h) {
    $string .= chr(hexdec($h));
  }

 return $string;
 } 
```

我将如何在 c# 中做同样的事情？

它适用于支付提供商，仅在 php.ini 中提供示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:43:34.007

首先我们检查PHP。我比 C# 更生疏，但它首先断开两个字符的块，然后将其解析为十六进制，然后从中创建一个字符，并将其添加到生成的字符中。

如果我们假设字符串总是 ASCII，因此不存在编码问题，我们可以在 C# 中执行相同的操作，如下所示：

```
public static string HexToString(string hex)
{
  var sb = new StringBuilder();//to hold our result;
  for(int i = 0; i < hex.Length; i+=2)//chunks of two - I'm just going to let an exception happen if there is an odd-length input, or any other error
  {
    string hexdec = hex.Substring(i, 2);//string of one octet in hex
    int number = int.Parse(hexdec, NumberStyles.HexNumber);//the number the hex represented
    char charToAdd = (char)number;//coerce into a character
    sb.Append(charToAdd);//add it to the string being built
  }
  return sb.ToString();//the string we built up.
} 
```

或者，如果我们必须处理另一种编码，我们可以采取不同的方法。我们将使用 UTF-8 作为我们的示例，但它遵循任何其他编码（以下也适用于上述仅 ASCII 的情况，因为它与该范围的 UTF-8 匹配）：

```
public static string HexToString(string hex)
{
  var buffer = new byte[hex.Length / 2];
  for(int i = 0; i < hex.Length; i+=2)
  {
    string hexdec = hex.Substring(i, 2);
    buffer[i / 2] = byte.Parse(hexdec, NumberStyles.HexNumber);
  }
  return Encoding.UTF8.GetString(buffer);//we could even have passed this encoding in for greater flexibility.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:17:42.117

根据[此](http://www.testingreflections.com/node/view/5635)链接：

```
public string ConvertToHex(string asciiString)
{ 
    string hex = "";
    foreach (char c in asciiString)
    {
        int tmp = c;
        hex += String.Format("{0:x2}", (uint)System.Convert.ToUInt32(tmp.ToString()));
    }
    return hex;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T20:19:03.770

您尝试使用此代码

```
var input = "";
String.Format("{0:x2}", System.Convert.ToUInt32(input)) 
```

# xml - 如何制作 index.xml？

> ID：12185845
> 
> 赞同：-3
> 
> 时间：2012-08-29T20:17:54.263
> 
> 标签：xml, xslt

我正在制作一个基于 xml/xslt 的网站。

是否有可能使该网页立即与 index.html 相似？重命名文件 index.xml 时它的行为不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:20:18.693

如果我正确理解了您的问题（我不确定），您可能必须配置您的网络服务器才能做到这一点。

看看这里：[http ://www.cyberciti.biz/faq/apache-display-or-change-a-default-page-other-than-indexhtml/](http://www.cyberciti.biz/faq/apache-display-or-change-a-default-page-other-than-indexhtml/)

假设您使用 Apache。

# ruby-on-rails - RESTful 架构的局限

> ID：12185854
> 
> 赞同：2
> 
> 时间：2012-08-29T20:18:37.530
> 
> 标签：ruby-on-rails, rest

我想知道人们在多大程度上保持他们的应用程序 RESTful。在我看来，事情非常容易崩溃，此时我必须按照一位资深程序员曾经告诉我的那样，当我刚进入职业生涯并让他对他进行所有的哲学架构研究时：“只需编写该死的代码。”

具体示例，我在 Rails 应用程序中实现自定义身份验证，并且我有一个标准的“密码提醒”表单。从 REST 的角度来看，我们在流程结束时要做的是对用户对象进行 PUT，因为我们正在更新用户对象。但即使忽略您可能想要更新用户的多种方式（参见[如何进行 REST-ful 更新？](https://stackoverflow.com/questions/8478829/how-to-do-rest-ful-updates)），我们一开始并不知道我们要更新的用户，到最后我们要更新发送电子邮件确认并使用用户标识符 + 安全密钥点击返回链接。所以现在最终触发用户更新的是一个简单的链接（哦，太可怕了！）——否则我必须用另一个按钮来惹恼我的用户，以实现 RESTful。

这只是引发我的问题的示例之一，但在我看来，在任何不平凡的应用程序中都必然会有几十个这样的案例。

那么，人们是否会使用 RESTful 架构作为一般指南，而巧妙的程序员会根据需要忽略？我从文献中得到的印象与此完全不同——因此问题是你如何处理例外情况。谢谢。

（实际上在我看来，这种情况下的最终结果将是另一种带有新密码/确认的表单，其目标可能是 PUT，但我通常认为这有时很笨重的感觉仍然存在。也许那是我的自己的缓慢——不会是第一次）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:43:36.290

在我工作的地方，我们决定尽可能地使用 RESTful，但我们也将变得务实，当某些事情不符合 REST 准则时（并且所有相关人员都同意这是这种情况），那么我们愿意发散。话虽如此，我认为您可以使大多数用例有点 RESTful。

如果您不知道用户的 ID，这样的事情怎么样。以 id 作为电子邮件地址的更改密码令牌集合：

```
GET /changepasswordtoken/{userEmail} 
```

或者，如果 API 的客户端知道用户 ID，这可能会更好：

```
GET /user/{userId}/changepasswordtoken 
```

您要求`GET`更改用户的密码令牌。如果这是一个面向公众的 API，那么显然您不会在响应负载中返回它，但负载可能会返回一条消息，说“更改密码已发送到电子邮件”或其他内容。

然后使用更改密码令牌作为查询字符串参数来更新密码`PUT`或用户。`PATCH`

```
PUT /user/{userId}?changepasswordtoken=xyz

{
     "password": "new password"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:06:57.033

来自[http://www.ics.uci.edu/~fielding/pubs/dissertation/web_arch_domain.htm#sec_4_4](http://www.ics.uci.edu/~fielding/pubs/dissertation/web_arch_domain.htm#sec_4_4)：

> REST 提供了一组架构约束，当作为一个整体应用时，它们强调组件交互的可扩展性、接口的通用性、组件的独立部署和中间组件，以减少交互延迟、加强安全性并封装遗留系统。

如果您需要一种强调混淆参与者和资源、点对点一次性交互以及全心全意拥抱和公开遗留系统（如 HTML 电子邮件）的架构风格，那么不，您不需要 RESTful . 寻找（或发明）符合您标准的建筑风格。REST 没有什么神奇之处。它是一组恰好适用于许多问题领域的约束，因为它是为满足他们的需求而设计的。如果您有不同的需求，应用相同的约束将适得其反并且是愚蠢的。

# css - 保持 wordpress 子菜单打开几秒钟

> ID：12185857
> 
> 赞同：0
> 
> 时间：2012-08-29T20:18:46.233
> 
> 标签：css, wordpress, menu

我有一个这样的 wordpress 菜单：

```
<div id="top_menu">
  <ul class="menu">
    <li id="menu-item-1" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1"><a href="moo">moo</a>
      <ul class="sub-menu">
        <li id="menu-item-2" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2"><a href="foo">foo</a></li>
        <li id="menu-item-3" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3"><a href="bar">bar</a></li>
      </ul>
    </li>
    <li id="menu-item-4" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4"><a href="baz">baz</a></li>
  </ul>
</div> 
```

样式如下：

```
#top_menu ul li ul{
    z-index: 9999;
    position: absolute;
    left: -999em;
    height: auto;
    top:80px;
    width:auto;
    clear:both;
    border:0;
    border-top:none;
}
#top_menu ul li li {
    margin:0px;
    padding:0px;
    background:none;
    width:auto;
}

#top_menu ul li ul a { 
    width:auto;
    line-height:26px;
    font-size:16px;
    display:block;
    text-align:left;
    text-shadow: none;
}
#top_menu ul li:hover ul ul, #top_menu ul li:hover ul ul ul, #top_menu ul li.sfhover ul ul, #top_menu ul li.sfhover ul ul ul {
    left: -999em;
}
#top_menu ul li:hover ul, #top_menu ul li li:hover ul, #top_menu ul li li li:hover ul, #top_menu ul li.sfhover ul, #top_menu ul li li.sfhover ul, #top_menu ul li li li.sfhover ul {
    left: auto;
}
#top_menu ul li:hover, #top_menu ul li.sfhover { 
    position: static;
} 
```

你可以在这里看到它：http: [//jsfiddle.net/JBXLr/1/](http://jsfiddle.net/JBXLr/1/)

现在，如果您使用 foo 和 bar 浏览“moo”子菜单，将会显示。我现在的目标是在鼠标移出“moo”链接区域后保持该子菜单打开 2 秒。我怎样才能做到这一点？

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:23:18.047

使用 javascript (jQuery) 显示子菜单并应用[delay()](http://api.jquery.com/delay/)

```
$('#top_menu li').hover(function(){
    $('.sub-menu', this).show();
}, function(){
    $('.sub-menu', this).delay(2000).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:49:00.663

因为你提到了css，所以要发布这个。[http://jsfiddle.net/JBXLr/3/](http://jsfiddle.net/JBXLr/3/)使用 css3 转换来实现你想要的。

这是使用 jquery 和您当前的 css 的替代 javascript 解决方案。

```
​​​​$("li").mouseout(function(){
    var uls =$(this).children("ul");
    uls.css("left","auto");
setTimeout(function(){ uls.css("left",""); }, 2000);
});​​​ 
```

# php - PHP 扩展：定义的函数未定义

> ID：12185864
> 
> 赞同：-1
> 
> 时间：2012-08-29T20:19:26.447
> 
> 标签：php, c, php-extension

我正在为我的 Raspberry Pi 创建一个 SPI 扩展，并且在尝试添加的类函数中遇到了一个相当奇怪的问题。（如果你想检查我遗漏的任何明显的东西，repo 就在这里：[Github 上的 php_spi](https://github.com/frak/php_spi/tree/block-sending)）

在我的 php_spi.h 中，我定义了：

```
PHP_METHOD(Spi, blockTransfer);
#if (PHP_MAJOR_VERSION >= 5)
ZEND_BEGIN_ARG_INFO_EX(Spi__blockTransfer_args, ZEND_SEND_BY_VAL, ZEND_RETURN_VALUE, 1)
#if (PHP_MINOR_VERSION > 0)
  ZEND_ARG_ARRAY_INFO(0, data, 1)
#else
  ZEND_ARG_INFO(0, data)
#endif
  ZEND_ARG_INFO(0, colDelay)
  ZEND_ARG_INFO(0, discard)
ZEND_END_ARG_INFO()
#else /* PHP 4.x */
#define Spi__blockTransfer_args NULL
#endif 
```

这与其他一些方法一起，类似地定义了当前有效。在我的 spi.c 文件中，函数定义如下：

```
 /* {{{ proto array blockTransfer(array data[, int colDelay[, bool discard]])
   */
PHP_METHOD(Spi, blockTransfer)
{
    zend_class_entry * _this_ce;

    zval * _this_zval = NULL;
    zval * data = NULL;
    HashTable * data_hash = NULL;
    long colDelay = 1;
    zend_bool discard = 0;

    if (zend_parse_method_parameters(ZEND_NUM_ARGS() TSRMLS_CC, getThis(), "a|lb", &_this_zval, Spi_ce_ptr, &data, &colDelay, &discard) == FAILURE) {
        return;
    }

    _this_ce = Z_OBJCE_P(_this_zval);

    // some code
}
/* }}} blockTransfer */ 
```

我已经确保我的函数在函数列表中有一个条目：

```
static zend_function_entry Spi_methods[] = {
    PHP_ME(Spi, __construct, Spi____construct_args, /**/ZEND_ACC_PUBLIC | ZEND_ACC_CTOR)
    PHP_ME(Spi, __destruct, Spi____destruct_args, /**/ZEND_ACC_PUBLIC | ZEND_ACC_DTOR)
    PHP_ME(Spi, transfer, Spi__transfer_args, /**/ZEND_ACC_PUBLIC)
    PHP_ME(Spi, blockTransfer, Spi__blockTransfer_args, /**/ZEND_ACC_PUBLIC)
    PHP_ME(Spi, getInfo, Spi__getInfo_args, /**/ZEND_ACC_PUBLIC)
    PHP_ME(Spi, setupTimer, Spi__setupTimer_args, /**/ZEND_ACC_PUBLIC)
    PHP_ME(Spi, usecDelay, Spi__usecDelay_args, /**/ZEND_ACC_PUBLIC)
    { NULL, NULL, NULL }
}; 
```

代码编译干净，没有错误或警告，但是当我尝试测试该函数时，我收到一个 PHP 错误，指出该函数未定义。我可能会错过什么？

（为了清楚起见，这是一个工作扩展，除了这个功能）

**编辑：**感谢您对超过一年的问题投反对票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:32:15.817

首先要检查的是 PHP 是否正在查找模块 - 尝试`php -m`在命令行上运行或`phpinfo()`在网页中调用 - 是否列出了您的模块？

如果没有，请查看[如何使用 `phpize` 启用 php 扩展？](https://stackoverflow.com/questions/6200994/how-to-enable-php-extension-using-phpize) 还有，你的环境是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:08:34.743

您定义了数组`Spi_methods`，但没有引用它。必须在模块结构中引用；例如看[这个例子](http://lxr.php.net/xref/PECL/rar/rar.c#759)。

您不需要将函数或 arginfo 原型放在主扩展标头（或任何其他标头，除非您需要在其他编译单元中引用符号，例如，如果您在一个文件中定义了一个函数，但构建另一个中的函数入口数组）。事实上，我认为它会自动包含在静态构建中，所以你不应该为了避免名称冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:09:56.353

好吧，那是在我的测试文件中的一个错字上浪费了惊人的时间:o(

我应该更仔细地阅读错误，因为它是关于函数 blockTransfer() 未定义，而不是方法。

在我的测试文件中：

```
$read = $spi-blockTransfer(); 
```

嗬！

很抱歉浪费您的时间。

# joomla - Virtuemart joomla

> ID：12185866
> 
> 赞同：1
> 
> 时间：2012-08-29T20:19:30.013
> 
> 标签：joomla, virtuemart

有谁知道如何在 Joomla 的 VirtueMart 中将产品与其图片相关联？

我试过了 ：

> $query = "选择 a. *, c.* "。“ FROM #__virtuemart_products_pl_pl 作为”。" LEFT JOIN #__virtuemart_medias as c ON c.virtuemart_media_id = a.virtuemart_product_id" ;

但它并不好，图片和产品不匹配。

我看不出他们之间有任何联系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:12:44.620

尝试以下方法：

```
select p.virtuemart_product_id,m.virtuemart_media_id,md.file_url 
  from #__virtuemart_products as p,
       #__virtuemart_product_medias as m,
       #__virtuemart_medias  as md
 WHERE p.virtuemart_product_id = m.virtuemart_product_id
   AND m.virtuemart_media_id = md.virtuemart_media_id 
```

# mysql - 比较 MySQL 中两个数据库的结构

> ID：12185868
> 
> 赞同：0
> 
> 时间：2012-08-29T20:19:30.767
> 
> 标签：mysql, database, phpmyadmin, compare, localhost

我需要比较两个 MySQL 数据库的结构，然后向我展示它们之间的区别。

任何人都知道有什么办法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:27:01.607

如果您希望确认结构相同，那么执行此操作的一种基本方法是`mysqldump --no-data`在每个数据库上运行 a，然后比较输出文件，例如使用`diff`. 这不一定是最好的方法，但如果您只是检查是否有任何差异，那么它是可行的。

我使用第三方工具（DB Solo）来执行模式比较，这会以更强大的格式/界面生成输出，并且在存在很多差异并且我想可视化/调查时很有用。

（我有 SQLyog 的社区版；我相信 Enterprise 版有一个 Schema Synchronization 工具。）

# c# - Sitecore 插入规则以确保最多 (1) 个特定类型的子项

> ID：12185870
> 
> 赞同：5
> 
> 时间：2012-08-29T20:19:41.240
> 
> 标签：c#, content-management-system, sitecore, sitecore6

sitecore 有没有办法确保某种类型的项目只能有某种类型的项目的 1 个子项？我正在阅读规则引擎食谱，但我没有得到太多细节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:43:24.127

我工作的一个网站要求在某个项目类型下不能存在超过 6 个子项目。我们考虑使用插入选项规则，但决定放弃这个想法，因为它不会阻止复制、移动或复制项目。

相反，我们决定`item:created`使用专门针对此任务的处理程序来扩展事件。下面是它如何工作的精简示例。一个明显的改进是从父项的字段中获取最大子项限制（当然只有管理员可见）。您甚至可以在这里利用规则引擎......

```
public void OnItemCreated(object sender, EventArgs args)
{
    var createdArgs = Event.ExtractParameter(args, 0) as ItemCreatedEventArgs;

    Sitecore.Diagnostics.Assert.IsNotNull(createdArgs, "args");
    if (createdArgs != null)
    {
        Sitecore.Diagnostics.Assert.IsNotNull(createdArgs.Item, "item");
        if (createdArgs.Item != null)
        {
            var item = createdArgs.Item;

            // NOTE: you may want to do additional tests here to ensure that the item
            // descends from /sitecore/content/home
            if (item.Parent != null && 
                item.Parent.TemplateName == "Your Template" &&
                item.Parent.Children.Count() > 6)
            {
                // Delete the item, warn user
                SheerResponse.Alert(
                    String.Format("Sorry, you cannot add more than 6 items to {0}.",
                                      item.Parent.Name), new string[0]);
                item.Delete();
            }
        }
    }
} 
```

# actionscript-3 - 从字符串中获取 Flex 中的部分 URL

> ID：12185872
> 
> 赞同：0
> 
> 时间：2012-08-29T20:19:47.270
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3

我正在尝试解析出一段 url 字符串以便在 Flex 中进行比较。我对 flex 真的很陌生，所以我只想写我想写的东西，不确定这段代码是否有效。

```
// urlone: http://www.helloworld.com/hello
// urltwo: http://www.goodbye.com/
public function compareURLHost(urlone:String,urltwo:String):Boolean
{
   var displayURL:URL = URL(urlone);
   var compareURL:URL = URL(urltwo);

   // compare www.helloworld.com to www.goodbye.com
   if(displauURL.hostname == compareURL.hostname)
      return true;

   return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:39:13.897

我认为您正在寻找[URLUtils](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf64e50-7ff8.html)。您可以获取端口、主机名、服务器名等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:14:04.397

URLUtils 可以提供帮助，但它们并不总是您需要的。例如，我有一个项目需要从 url 中删除单个目录。这听起来可能很愚蠢，但客户希望他们公开查看的 XML 文件不显示实际的 URL，这就是他们的解决方案。在那种情况下，我做了：

```
var url:String = "http://someurl.com/dir1/dir2/file.ext"
url = url.slice(url.indexOf('dir1'),5); //the four chars of the url + "/"
trace (url); //http://someurl.com/dir2/file.ext 
```

您还可以使用 String.replace 将一组字符替换为另一组字符（例如，如果我的客户想通过在 url 中交换调用 dir1 dir5 来隐藏 url）

```
var url:String = "http://someurl.com/dir5/dir2/file.ext"
var patten:RegExp = /dir5/;
url.replace(pattern,"dir1");
trace (url); //http://someurl.com/dir1/dir2/file.ext 
```

# php - 用于 youtube 链接的 parse_url

> ID：12185873
> 
> 赞同：0
> 
> 时间：2012-08-29T20:19:51.673
> 
> 标签：php

我正在使用以下代码将任何 URL 转换为以`http://`or开头，`https://` 但是此函数会导致精确类型 url 出现问题，例如

```
$url = 'www.youtube.com/watch?v=_ss'; // url without http://

function convertUrl ($url){
$parts = parse_url($url);
$returl = "";
if (empty($parts['scheme'])){
$returl = "http://".$parts['path'];
} else if ($parts['scheme'] == 'https'){
$returl = "https://".$parts['host'].$parts['path'];
} else {
$returl = $url;
}
return $returl;
}

$url = convertUrl($url);
echo $url; 
```

输出

```
http://www.youtube.com/watch 
```

我想要的预期输出

```
http://www.youtube.com/watch?v=_ss 
```

因为我主要使用它来修复任何 url，`http://`所以有没有办法编辑这个函数，所以它可以传递所有 url，`=_`如示例所示！因为它真的很烦我~谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:22:49.143

你会想要得到：

```
$query = $parts['query']; 
```

因为那是 URL 的查询部分。

你可以修改你的函数来做到这一点：

```
function convertUrl ($url){
    $parts = parse_url($url);
    $returl = "";
    if (empty($parts['scheme'])){
        $returl = "http://".$parts['path'];
    } else if ($parts['scheme'] == 'https'){
        $returl = "https://".$parts['host'].$parts['path'];
    } else {
        $returl = $url;
    }
    // Define variable $query as empty string.
    $query = '';
    if ($parts['query']) {
        // If the query section of the URL exists, concatenate it to the URL.
        $query = '?' . $parts['query'];
    }
    return $returl . $query;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:28:12.180

如果您真正关心的是传递 URL 的第一部分，那么另一种方法如何？

```
$pattern = '#^http[s]?://#i';
if(preg_match($pattern, $url) == 1) { // this url has proper scheme
    return $url;
} else {
    return 'http://' . $url;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T20:31:20.460

[http://codepad.org/bJ7pY8bg](http://codepad.org/bJ7pY8bg)

```
<?php
$url1 = 'www.youtube.com/watch?v=_ss';
$url2 = 'http://www.youtube.com/watch?v=_ss';
$url3 = 'https://www.youtube.com/watch?v=_ss';
function urlfix($url) {
return preg_replace('/^.*www\./',"https://www.",$url);
}
echo urlfix($url1)."\n";
echo urlfix($url2),"\n";
echo urlfix($url3),"\n"; 
```

输出：

```
https://www.youtube.com/watch?v=_ss
https://www.youtube.com/watch?v=_ss
https://www.youtube.com/watch?v=_ss 
```

# amazon-s3 - 每个对象到期的 s3

> ID：12185879
> 
> 赞同：46
> 
> 时间：2012-08-29T20:20:12.493
> 
> 标签：amazon-s3

我知道如何使用给定前缀的对象过期规则使 S3 存储桶中的对象过期，但是出于我的目的，我想以编程方式基于每个对象设置过期日期。

Java SDK 似乎表明这是可能的，因为它有一个[setExpirationTime](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ObjectMetadata.html#setExpirationTime%28java.util.Date%29)方法，但是每当我使用此方法设置过期日期时，似乎什么都没有发生，并且对象永远不会过期。此外，通过 aws 控制台查看对象属性，似乎没有设置过期。

不支持按文件过期吗？/我需要做任何额外的步骤才能让它工作吗？/ 如果不支持按文件过期，是否可以排除与过期前缀匹配的文件过期？

提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T20:45:42.513

正如您所发现的，它似乎不支持每个[对象过期](https://aws.amazon.com/blogs/aws/amazon-s3-object-expiration/)，而是支持每个存储桶生命周期配置，每个配置最多 100 条规则。

> 一个桶有一个生命周期配置。一个生命周期配置最多可以有 100 条规则。
> 
> 生命周期值必须是非零正整数。Amazon S3 通过将规则中指定的到期期限与对象创建时间相加并将结果时间四舍五入到 UTC 的第二天午夜来计算到期时间。

**如果不支持按文件过期，是否可以排除与过期前缀匹配的文件过期？**

看起来你也不能重叠规则。

> 注意确保规则不重叠。例如，以下生命周期配置有一个规则，将前缀为“documents”的对象设置为在 30 天后过期。该配置还有另一条规则，将前缀为“documents/2011”的对象设置为在 365 天后过期。在这种情况下，Amazon S3 会返回一条错误消息。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-12-22T12:08:47.943

完成此任务的另一种方法是使用对象标签。

为要为其设置生命周期的对象中的每个对象设置唯一标签，然后为每个对象创建生命周期配置规则，并在过滤器元素中使用对象特定标签。

此标记可以是对象名称，您还可以为不具有公共前缀的对象子集制定规则。

您可以在此处找到有关生命周期配置的更多信息 [http://docs.aws.amazon.com/AmazonS3/latest/dev/intro-lifecycle-rules.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/intro-lifecycle-rules.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-11T00:36:55.857

这是一种可能适用于某些情况的替代方法：

您可以将存储桶生命周期设置为在短时间内（1、7 天等）后使对象过期。然后，在每个对象过期之前，如果您不希望该对象过期，则以编程方式延长其过期时间。

您可以重置 S3 对象上的时间戳，方法是使用将存储类更改为当前类的指令将对象“复制”到自身。它基本上是一个类似于 Linux/Unix“触摸”命令的“noop”。

我写了一篇文章，通过示例 aws-cli 命令演示如何执行此操作： http: [//alestic.com/2013/09/s3-lifecycle-extend](http://alestic.com/2013/09/s3-lifecycle-extend)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-09T02:03:26.257

[与Eric 的回答](https://stackoverflow.com/a/18730911/1763012)类似，您可以设置一个较短的存储桶生命周期策略，然后使用保留期锁定（请参阅[文档](https://docs.aws.amazon.com/AmazonS3/latest/dev/object-lock.html)）以每个对象为基础设置到期日期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-22T06:52:03.647

我通过使用 s3cmd 命令将对象复制到自身中来延长到期时间。它基本上像“触摸”一样工作。

> s3cmd cp s3://bucket-name/file.txt s3://bucket-name/file.txt

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-02T06:31:01.170

您可以根据规则将文件拆分为“文件夹”并应用[Prefix Filter](https://docs.aws.amazon.com/AmazonS3/latest/dev/lifecycle-configuration-examples.html#lifecycle-config-ex1)。

# c# - 使用 CreateDirectory 动态创建 web 文件夹

> ID：12185883
> 
> 赞同：0
> 
> 时间：2012-08-29T20:20:21.307
> 
> 标签：c#, asp.net, .net, create-directory

. .

我正在使用 C# 后端改造 ASP.NET 应用程序。我正在尝试开发一个文件上传器来使用 CKEditor。

我有一个用于搜索文件的 <asp:FileUpload> 对象和一个 TextBox 对象（为此，假设 TextBox ID = "SaveTo"），用户在其中输入文件名和路径（s ）他想要保存文件。默认是我在 Web.config 中定义的文件夹（假设它是“/Images/Saved”——注意：这是我的 Web 根目录下的*现有文件夹）。*

所以，如果我运行我的代码并保存一个文件（假设它是“SomeImage.jpg”），我的 SaveTo 文本框的内容就是“/Images/Saved/SomeImage.jpg”。然后我的代码使用文本框内容保存到 /Images/Saved/SomeImage.jpg。那件作品很好。

这是我遇到麻烦的地方：如果用户输入“/Images/Saved/SomeFolder/SomeImage.jpg”，我希望我的代码动态生成一个文件夹。换句话说，如果“/Images/Saved”中不存在“SomeFolder”，我想创建它。

效果不是很好。它不会创建文件夹，而是将文件保存到默认的 /Images/Saved 文件夹中。

有了这个，我有几个问题。

1.  我正在尝试使用 Directory.CreateDirectory 来执行此操作。我可以不使用 web-root-relative 目录（如“/Images/Saved”），还是需要完全限定它？
2.  如果我需要完全限定它，我可以使用 URL（例如“http://www.mysite.com/Images/Saved”），还是需要物理文件路径（例如“c:\wwwroot\Images \保存”）？

这是我的代码片段：

```
if (this.MyFileUpload.HasFile) {
    string SaveFile = "";
    string SavePath = this.SaveTo.Text.Trim();

    if (!SavePath.EndsWith("/")) { SavePath += "/"; }

// I'm guessing that I'll need to change "/" to "\" and fully qualify the path
    getFileName = this.MyFileUpload.FileName;
    SaveFile = System.Web.HttpContext.Current.Server.MapPath("~" + SavePath) + getFileName;
    try
    {
        System.IO.FileInfo getFile = new System.IO.FileInfo(SaveFile);
        getFile.Directory.Create();
        this.MyFileUpload.SaveAs(SaveFile);
    }
    catch (Exception ex)
    {
        txtMessage.Text = getFileName + " save failed.  " + ex.Message;
    }
    txtMessage.Text = "File " + getFileName + " saved successfully!";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:46:38.963

```
if (this.MyFileUpload.HasFile) {
    string SaveAs = this.SaveTo.Text.Trim().Replace('\\','/');
    string SaveFile = SaveAs;
    // Pull SavePath from web.config (should check that key exists first)
    string SavePath = System.Web.Configuration.WebConfigurationManager.AppSettings["SaveDirectory"];
    string SystemPath = string.Empty;

     // Handle case where SaveAs contains directory
    if (SaveAs.LastIndexOf("/") > -1) {
        SavePath = SavePath.TrimEnd('/') + "/" + SaveAs.Substring(0,SaveAs.LastIndexOf("/") + 1);
        SaveFile = SaveFile.Substring(SaveFile.LastIndexOf("/") + 1);
    }

    if (!SavePath.EndsWith("/"))  
        SavePath += "/"; 

    // Find the system path 
    SystemPath = System.Web.HttpContext.Current.Server.MapPath(SavePath);

    // Ensure the system path exists
    if (!System.IO.Directory.Exists(SystemPath))
        System.IO.Directory.CreateDirectory(SystemPath);

    // Ensure a filename was entered, if not use original file name
    if (string.IsNullOrEmpty(SaveFile))
        SaveFile = MyFileUpload.FileName;

    try
    {
        this.MyFileUpload.SaveAs(SystemPath + SaveFile);
    }
    catch (Exception ex)
    {
        txtMessage.Text = getFileName + " save failed.  " + ex.Message;
    }
    txtMessage.Text = "File " + getFileName + " saved successfully!";
} 
```

# ruby-on-rails-3 - 设计安全扩展未定义方法

> ID：12185884
> 
> 赞同：0
> 
> 时间：2012-08-29T20:20:30.180
> 
> 标签：ruby-on-rails-3, devise

```
NoMethodError in Devise::SessionsController#create

undefined method `unique_session_id=' for #User:0x007f82b86fa4b8 
```

安装 Devise_Security_Extension、在用户模型中设置 session_limitable 并为 the_resources 表创建迁移后，我收到上述错误。

最初我的应用程序加载正常，但是一旦输入凭据并创建了新会话，就会出现错误。

我不确定如何对其进行故障排除，这超出了我的范围。

我正在运行 Rails 3.2.6、Devise 2.1.2 和 Devise Security Extension 0.6.2。

有没有人遇到过类似的问题或者有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T02:33:01.583

```
Undefined method `unique_session_id=' for #User:0x007f82b86fa4b8

1) It means, it is looking for unique_session_id field in users table, which is missing
2) In docuementation, they meant "the resources table" means, model / table which we are using for authentication, which is "users table" in your case. 
```

因此，您需要删除“the_resources table”的迁移并将“unique_session_id”字段添加到 users 表。这将解决您的错误。

希望能帮助到你 ：）

# vb.net - 单独读取文本框中的行

> ID：12185887
> 
> 赞同：0
> 
> 时间：2012-08-29T20:20:44.433
> 
> 标签：vb.net, visual-studio, vb.net-2010

我正在尝试单独读取文本框中的每一行并检查它是否包含某个字符串。这将在文本框的 textchanged 事件中用于检查某个字符串，如果找到，它将执行相应的代码。

我不能让它正常工作。这是我的代码。

```
 Dim txt As FastColoredTextBox = TryCast(page.Controls(0), FastColoredTextBox)
        For Each line As Line In txt.Lines
            If CBool(InStr(line.ToString(), "<vb>")) Then
                txt.Language = Language.VB
            End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:31:49.887

FastColoredTextBox.Lines 是一个 List(Of String) 所以你可以简单地以这种方式在 Lines 上循环

```
Dim txt As FastColoredTextBox = TryCast(page.Controls(0), FastColoredTextBox) 
For Each line As String In txt.Lines 
   If line.IndexOf("<vb>", StringComparison.OrdinalIgnoreCase) > 0 Then 
      txt.Language = Language.VB 
      Exit For ' If this is all you have to do exit immediatly
   End If 
Next 
```

编辑：Exit For 允许在不搜索后续不感兴趣的行的情况下中断循环。当然，如果您还有其他`if`的，则应删除 Exit For。另请注意，在我的回答中，您不必创建控件中已有的所有字符串的不必要数组。最后一点，既然我们拥有丰富的字符串工具包，为什么还要使用旧式 Instr (VB6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:28:10.807

所以我猜你正在使用 CodeProject.com 网站上的 FastColoredTextBox，对吧？

首先尝试将文本框的 Text 拆分为相应的行：

```
Dim txt As FastColoredTextBox = TryCast(page.Controls(0), FastColoredTextBox)
Dim Lines as string() = txt.Text.Split(VbCrLf)
For Each line As String In txt.Lines
  CBool(InStr(line, "<vb>")) Then
  txt.Language = Language.VB
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T16:34:00.857

为什么你要走那么长的路，我现在用以下简短的简单代码做到了：

```
For i = 0 To Val(TextBox1.Lines.Count)-1
    If TextBox1.Lines(i).ToString.StartsWith("OS Version:") Then
        Label9.Text = TextBox1.Lines(i).ToString
        Exit For
      Exit Sub
    End If
Next 
```

# r - 如何删除 R 中 write.table 中的尾随空格

> ID：12185889
> 
> 赞同：1
> 
> 时间：2012-08-29T20:21:05.633
> 
> 标签：r, file-io

我有一个类似于这种格式的 lagre 数据框：

```
line1
line2<tab>value1 
```

当它在 R 中使用 read.csv 读取时，它被强制进入数据帧，如下所示：

```
V1<tab>V2
line1<tab>NA
line2<tab>value1 
```

我可以用空字符串替换 NA，但是当我使用 write.table 编写时，我在输出文件的第 1 行之后得到一个制表符和空白空间。

如何使输出与输入的格式相同，即删除尾随的制表符空格

附加示例文件：

```
#Sample SGA file format
@HD VN:1.0.0    IA:NA
@PL NM:TEST
1   1   705 50947   YDL185W YOR202W -   -   -
1   2   377 50947   YDL185W YOR202W -   -   -
1   3   317 50947   YDL185W YOR202W -   -   -
...
@SP CF:ORF,IGNA
TEST    1
TEST2   1 
```

头（输入（数据））

```
structure(list(V1 = c("#Sample SGA file format", "@HD", 
"@PL", "1", "1", "1"), V2 = c("", "VN:1.0.0", "NM:TEST", "1", 
"2", "3"), V3 = c("", "IA:NA", "", "705", "377", "317"), V4 = c(NA, 
NA, NA, 50947L, 50947L, 50947L), V5 = c("", "", "", "YDL185W", 
"YDL185W", "YDL185W"), V6 = c("", "", "", "YOR202W", "YOR202W", 
"YOR202W"), V7 = c("", "", "", "-", "-", "-"), V8 = c("", "", 
"", "-", "-", "-"), V9 = c("", "", "", "-", "-", "-")), .Names = c("V1", 
"V2", "V3", "V4", "V5", "V6", "V7", "V8", "V9"), row.names = c(NA, 
6L), class = "data.frame") 
```

和str（数据）

```
'data.frame':   1541 obs. of  9 variables:
 $ V1: chr  "#Sample SGA file format" "@HD" "@PL" "1" ...
 $ V2: chr  "" "VN:1.0.0" "NM:TEST" "1" ...
 $ V3: chr  "" "IA:NA" "" "705" ...
 $ V4: int  NA NA NA 50947 50947 50947 50947 50947 50947 50947 ...
 $ V5: chr  "" "" "" "YDL185W" ...
 $ V6: chr  "" "" "" "YOR202W" ...
 $ V7: chr  "" "" "" "-" ...
 $ V8: chr  "" "" "" "-" ...
 $ V9: chr  "" "" "" "-" ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T16:28:19.127

我赌一个猜测。听起来你可以做两件事之一。

首先，你可以使用

```
data[is.na(data)] <- ''
library(stringr)
write.table(str_trim(apply(data, 1, paste, collapse='\t')),
            'fileout.tsv',
            row.names=FALSE) 
```

或者您可以使用命令行实用程序，例如`sed`从文件中删除尾随空格：

```
sed -e :a -e 's/^.\{1,77\}$/ & /;ta' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T21:18:36.623

这是非常令人费解的，但在这里。

1.  将 line1 作为标题读取`read.csv`：`foo <- read.csv("input.csv")`

2.  使用 仅写第一列名称`write`：`write(colnames(foo)[1],"out/output.csv")`

3.  `append`最后，使用和不使用列名来编写表的其余部分：`write.table(foo,"output.csv",sep=",",row.names=F,col.names=F,append=T,quote=F)`

这应该会为您提供与输入文件相同格式的输出文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T18:52:55.823

这类似于贾斯汀的回答，使用正则表达式。

```
cn <- file("output.txt",open="w") #opens write connection to file
writeLines(paste(names(data),collapse="\t"),con=cn) #writes header
#converts data frame into vector of character, with fields separated by tabs
to.print <- apply(data,1,paste,collapse="\t") 
to.print <- gsub("\\tNA$","",to.print) #deletes trailing <tab>NA
writeLines(to.print,con=cn) #writes data frame rows
close(cn) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T21:29:04.067

如果你想`read.table`表现得完全一样`read.csv`，你需要做的就是使参数相同

```
read.table(file, header = TRUE, sep = ",", quote="\"", dec=".",
     fill = TRUE, comment.char="") 
```

# java - 如何处理 Java (EE) 中的冲突依赖项

> ID：12185894
> 
> 赞同：4
> 
> 时间：2012-08-29T20:21:26.923
> 
> 标签：java, jakarta-ee, netbeans, glassfish, dependencies

我正在 Java EE 6 平台上开发企业应用程序。IDE 是 NetBeans 7.2，应用程序服务器是 GlassFish 3.1.2.2。

业务逻辑必须使用一个库（具体来说是 HBase-RDF）来处理其核心中的一些任务。原始的 HBase-RDF 代码依赖于许多包，我相信 Glassfish 已经使用了它们的新版本。例如，我可以看到 jar 文件中已经包含 javax.xml、javax.activation、com.sun.jersey 和类似的包。

尽管我以前开发过不那么简单的 Java EE 应用程序，但我在开发可能与此相关或可能不相关的应用程序时遇到了无数令人头疼的问题。根据我在网上阅读的内容，包括数十个 stackoverflow 问题和错误跟踪系统，我想如果我可以将原始库 (HBase-RDF) 及其所有依赖项打包为整个 jar 文件，并防止它们直接包含在项目中。

我的第一个问题是，我对问题的原因是否正确？这可能是我问题的根源吗？我想答案是肯定的，因为我已经通过从类路径中删除 JAXB 和 Xerces jar 解决了我的一个问题，幸运的是，我必须使用的 Hbase-RDF 的那些部分并没有让它们参与进来。

第二个问题是，如果我对上一个问题是正确的，我该怎么做？如何将这些库限制为仅由一个库（Hbase-RDF）使用？

* * *

注意：说构建过程完成没有任何问题可能很有用，但我在部署和运行项目时面临两个主要问题。首先，应用程序在我的本地 Glassfish 实例上成功部署，该实例与 netbeans 一起安装，但相同的 .ear 包无法在另一个相同版本的实例上部署，并且 server.log 文件不包含任何有助于查找问题原因的内容. [该错误与此](https://stackoverflow.com/questions/7195243/exception-while-loading-the-app-without-a-stack-trace)非常相似，但建议的解决方案不起作用。[第二个问题与此](https://stackoverflow.com/questions/1617191/deploy-war-through-netbeans-onto-glassfish-v3-beta)非常相似，我已经尝试了每一个建议的解决方案，但没有运气。有趣的是，Web 模块内的 Web 服务调用 EJB 成功，但是 JSF facelet index.html 运行失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:55:33.300

我不确定您关心的是构建过程还是部署。
因为对于部署，如果您有一个依赖于您已经部署的库的不同版本的库，那么如果不求助于`OSGi`（不能具有相同的类加载器的两个版本的库），这是不可能的。
您是否尝试过完全删除依赖库并仅使用较新版本。
如果您唯一的依赖项是 for`JAXB`和`xml`java 的包，那么您可能会很幸运

# javascript - 如何将项目添加到 Highcharts 图例？

> ID：12185896
> 
> 赞同：4
> 
> 时间：2012-08-29T20:21:43.233
> 
> 标签：javascript, highcharts

我有一个包含两个系列的图表：`column`和`spline`. 我以编程方式更改了一些符合某些标准的列的颜色，假设 10 个最低分数呈现为绿色，其余为蓝色。

现在，在图例中，我有系列名称，但显然，它以默认蓝色显示样条系列名称和列系列名称。我想知道如何将名称添加到以绿色呈现的列的图例中，例如“最低分数”。

编辑：

该系列的代码：

```
series: [{
  type: 'column',
  color: '#215868',
  name: 'Score per round ',
  data: [
    {y:65,name:'Caracas Country Club', color: '#7EB035'},
    {y:72,name:'Biltmore Golf Course', color: '#7EB035'},
    {y:72,name:'Nashua Country Club', color: '#7EB035'},
    {y:90,name:'Hilaman Park Golf Course'},
    {y:105,name:'Biltmore Golf Course'},
    {y:90,name:'Binks Forest Golf Club', color: '#7EB035'},
    {y:90,name:'Binks Forest Golf Club', color: '#7EB035'},
    {y:90,name:'Blackhawk Country Club | The Falls', color: '#7EB035'},
    {y:90,name:'Blackhawk Country Club | The Falls', color: '#7EB035'},
    {y:72,name:'Pembroke Country Club', color: '#7EB035'},
    {y:90,name:'The Greens At North Hills Country Club'},
    {y:90,name:'Havana Country Club | Kilamanjaro/Kenya'},
    {y:90,name:'Biltmore Golf Course'},
    {y:90,name:'Biltmore Golf Course'},
    {y:90,name:'Challenge At Santa Rita'},
    {y:100,name:'Lake Chabot Golf Course | Lake Chabot'},
    {y:90,name:'Hillcrest Golf & Country Club | Championship', color: '#7EB035'},
    {y:100,name:'Hillcrest Golf & Country Club | Championship'},
    {y:100,name:'Hillcrest Golf & Country Club | Championship'},
    {y:90,name:'Hillcrest Golf & Country Club | Championship', color: '#7EB035'},]
  },
  {
    type: 'spline',
    name: 'Avg Score',
    color: '#009900',
    data: [
      {y:89.9,name:'Caracas Country Club'},
      {y:89.4,name:'Biltmore Golf Course'},
      {y:88.9,name:'Nashua Country Club'},
      {y:88.9,name:'Hilaman Park Golf Course'},
      {y:89.4,name:'Biltmore Golf Course'},
      {y:89.4,name:'Binks Forest Golf Club'},
      {y:89.4,name:'Binks Forest Golf Club'},
      {y:89.4,name:'Blackhawk Country Club | The Falls'},
      {y:89.4,name:'Blackhawk Country Club | The Falls'},
      {y:89.0,name:'Pembroke Country Club'},{y:89.0,name:'The Greens At North Hills Country Club'},
      {y:89.0,name:'Havana Country Club | Kilamanjaro/Kenya'},
      {y:89.1,name:'Biltmore Golf Course'},
      {y:89.1,name:'Biltmore Golf Course'},
      {y:89.1,name:'Challenge At Santa Rita'},
      {y:89.3,name:'Lake Chabot Golf Course | Lake Chabot'},
      {y:89.4,name:'Hillcrest Golf & Country Club | Championship'},
      {y:89.6,name:'Hillcrest Golf & Country Club | Championship'},{y:89.8,name:'Hillcrest Golf & Country Club | Championship'},
      {y:89.8,name:'Hillcrest Golf & Country Club | Championship'},
    ]
  }
] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T18:01:00.400

我刚刚添加了一个带有所需属性（名称和颜色）的空系列，并且它起作用了。以防万一你发现自己在这种情况下。

# image - 图片在 Safari 中显示，但在 Firefox、Chrome 等中不显示

> ID：12185897
> 
> 赞同：0
> 
> 时间：2012-08-29T20:22:06.410
> 
> 标签：image, firefox, google-chrome, safari, show

我今天偶然发现了这个非常奇怪的问题。当我注意到 Firefox、Chrome 或 Opera 都不会显示任何图像时，我正在处理我网站上的一些图像（主要在 Safari 中）。然后我尝试使用附件图像中看到的绝对路径链接到图像，但它仍然无法正常工作。![Safari 与 Firefox](../Images/e81c13ac1cd68dad8d5b5f5766838625.png)

如屏幕截图所示，顶部浏览器 (Chrome) 没有显示图像，但底部浏览器 (Safari) 显示。

有什么想法可能是错的吗？

**编辑** 好的，所以我已经想通了（抱歉在我发帖之前没有检查这个）。

但我确信这与我的 CSS 文件中的路径有关，但事实并非如此。- 然后它必须将PNG保存为非隔行或隔行，但我也不是。然后，我没有将图像保存为 8 位 PNG，而是尝试将其保存为 24 位 PNG，这样就成功了。

再一次，抱歉发布这个，太早了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:34:52.160

当我使用 GIMP 打开您的图像（http://onlinevind.dk/cms/library/images/mod_login/login-btn-bg.png）时，它告诉我它嵌入了颜色配置文件（“通用 RGB 配置文件”）。我尝试过的其他一些程序甚至拒绝打开文件并显示错误消息“不是 PNG 文件”。

也许您应该在没有颜色配置文件的情况下保存它。使用 pngcrush 之类的程序来减小网页中使用的图像的文件大小也是一个好主意。

# ios - UIViewAutoresizing灵活的Height+Top或Height+Bottom什么时候有意义？它有什么作用？

> ID：12185901
> 
> 赞同：2
> 
> 时间：2012-08-29T20:22:37.613
> 
> 标签：ios, uikit

`UIView`具有`UIViewAutoresizing`高度+顶部或高度+底部的自动调整大小行为是什么？这有意义吗？边距之一或视图本身是否优先？我刚刚发现我不小心将视图设置`UIViewAutoresizing`为`UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin`，这导致视图`0`在其父级调整大小时调整到一个高度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T20:31:58.703

这是自动调整大小的工作原理：

假设父视图的高度为 400，并且您的视图设置为 y = 100, height = 200

这意味着，您的视图上方有 100 个像素，您的视图有 200 个像素，您的视图下方有 100 个像素。

使用flexibleHeight和flexibleTop，表示当父view frame发生变化时，会保持底部100像素固定，剩余的部分在top margin和height之间按比例分割

因此，如果您从父级的 400 高度到 300 高度，这意味着它将使用 100 作为底部边距并按比例拆分剩余的 200，留下您的 y = 66.666 和高度 = 133.333

如果你从 400 高度到 100 高度，它仍然会使用那些 100 作为底部边距，为顶部边距和高度留下 0 空间，让你的 y = 0，高度 = 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T21:00:47.963

`UIViewAutoresizingFlexibleTopMargin`当父视图调整大小时，将保持底部边距不变，`UIViewAutoresizingFlexibleHeight`并将其高度与其父高度成比例地更改为剩余高度。

我看不到`UIViewAutoresizingFlexibleHeight`. 我曾经使用`UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth`过一个视图，其中包含一些文本，以独立于我的设备的方向，以恒定的高度粘贴到我的父视图的底部。

# html - 无法创建可以在 Rails 中发送 POST 请求的锚点

> ID：12185914
> 
> 赞同：0
> 
> 时间：2012-08-29T20:23:28.023
> 
> 标签：html, ruby-on-rails, ruby

我正在做一本名为 Agile Web Development 的书中的练习。使命是：

用户可以在踢出商品图片时将产品添加到购物车。所以我将图像标签包装成一个锚标签。就像`<%= link_to image_tag(product.image_url), line_items_path(:product_id => product), html_options = {:method => :post} %>` 我踢图像似乎很好，但它不会将任何东西添加到购物车中。我查看了[本书网站上的讨论](http://pragprog.com/wikis/wiki/Pt-D-1)，其中一些解决方案与我的解决方案相似。但它们也不起作用。

当我踢图像时，代码将运行：

```
# POST /line_items
# POST /line_items.json
def create
  # for exercise only
  session[:couter] = nil

  @cart = current_cart
  product = Product.find(params[:product_id])
  @line_item = @cart.line_items.build(:product=>product)

  respond_to do |format|
    if @line_item.save
      format.html { redirect_to @line_item.cart, notice: 'Line item was successfully created.' }
      format.json { render json: @line_item, status: :created, location: @line_item }
    else
      format.html { render action: "new" }
      format.json { render json: @line_item.errors, status: :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:43:14.757

我想你想要`button_to`，不是`link_to`。您不能`POST`从锚链接发送请求。

[http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:55:17.030

您快到了。你想要这样的东西：

```
<%= link_to image_tag(product.image_url), line_items_path(:product_id => product), :method => :post %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:30:19.027

我弄清楚发生了什么事。这是书的问题，而不是轨道的问题。

原本的`<%= javascript_tag 'application %>'`

这本书教我把它改成`<%= javascript_include_tag :default %>`

所以我无法导入 javascript 库 :(

# java - struts2 switch 语句

> ID：12185916
> 
> 赞同：1
> 
> 时间：2012-08-29T20:23:44.573
> 
> 标签：java, jsp, struts2, switch-statement

Struts2 中是否存在解决此问题的方法？

```
<s:if test="%{var < 50}">
   <p style="color: red;">The quick brown fox jumped over the lazy brown dog.</p>
</s:if>
<s:elseif test="%{var == 50}">
   <p style="color: blue;">The quick brown fox jumped over the lazy brown dog.</p>
</s:elseif>
<s:elseif test="%{var > 50}">
   <p style="color: pink;">The quick brown fox jumped over the lazy brown dog.</p>
</s:elseif> 
```

理想情况下，我希望在这里使用 switch 语句，但这似乎不存在。是否有另一种合适的解决方案，而不是输入相同的行并进行细微的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:29:38.373

是的，设置一个变量，并在您的`style`属性中引用它。

然而，这与 Struts 2 无关。这是常识性的重构。

我不知道您的用例，但我希望看到它更进一步：该`var`值必须对您的应用程序有意义，例如“低于、*等于*、超过”或其他东西。与其将值直接绑定到 CSS 属性，不如让*应用程序*级别的语义成为您在 HTML 中所担心的全部。更恰当地（更灵活地）使用 CSS 来完成同样的事情。

```
<p class="${answerClass}">The quick brown fox jumped over the lazy brown dog.</p> 
```

CSS：

```
under: {
  color: red;
}

equal: {
  color: blue;
}

greater: {
  color: green;
} 
```

请注意，我更改了颜色，使用粉红色和红色作为刻度的“相反”端，这让我觉得违反直觉，对于那些在该颜色范围内有色盲的人来说并不是那么好。

选择 CSS 类名的逻辑*可能*存在于 JSP 中，但 IMO 将其放入应用程序的 Java 代码中更容易，与嵌入视图层相比，它可以以更广泛的方式进行测试和调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:28:44.847

最好在动作中使用逻辑部分。所以在一个方法中评估颜色值。

但是如果你需要在 JSP 中这样做，你也可以这样做：

```
<p style="color: 
   <s:if test="%{var < 50}">
      red
   </s:if>
   <s:elseif test="%{var == 50}">
      blue
   </s:elseif>
   <s:elseif test="%{var > 50}">
      pink
   </s:elseif>
;" >The quick brown fox jumped over the lazy brown dog.</p> 
```

只是一种避免重复 HTML 的方法。（干燥原理）

# c# - 使用正确的 app.manifest 设置拒绝访问路径

> ID：12185920
> 
> 赞同：0
> 
> 时间：2012-08-29T20:24:01.797
> 
> 标签：c#, winforms, access-denied

我有一个奇怪的问题。我有这个代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        string[] filePaths = Directory.GetFiles(@"C:\Users\Shorko\Desktop\mobile-store", "*.rar",
                                     SearchOption.AllDirectories);
        for (int i = 0; i < filePaths.Length; i++)
        {
            string path = "E://yo";                               
            File.Move(filePaths[i], path);
        }                      
    } 
```

我还创建了 app.manifest 文件并将其中一行更改为：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

但我仍然遇到同样的错误！我知道有很多这样的帖子，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:37:11.150

[File.Move](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)需要两个文件名，一个源文件名和一个目标文件名。
如果目标是目录，则不起作用。

```
string path = "E://yo";                                
for (int i = 0; i < filePaths.Length; i++) 
{ 
     File.Move(filePaths[i], Path.Combine(path, Path.GetFileName(filePaths[i])); 
} 
```

# java - 在 Java 小程序中显示 FTP 文件上传期间的进度

> ID：12185924
> 
> 赞同：0
> 
> 时间：2012-08-29T20:24:29.317
> 
> 标签：java, swing, ftp, applet, event-dispatch-thread

好的，我让上传者使用 Java FTP 上传文件，我想更新标签和进度条。带有百分比文本的标签，带有百分比 int 值的条形图。现在使用当前代码只能在上传结束时获得 100 条和完整条。在上传期间，它们都没有改变。

这里是：

```
 OutputStream output = new BufferedOutputStream(ftpOut);
    CopyStreamListener listener = new CopyStreamListener() {
        public void bytesTransferred(long totalBytesTransferred, int bytesTransferred, long streamSize) {
            System.out.printf("\r%-30S: %d / %d", "Sent", totalBytesTransferred, streamSize);
            ftpup.this.upd(totalBytesTransferred,streamSize);
        }
        public void bytesTransferred(CopyStreamEvent arg0) { }
    };

    Util.copyStream(input, output, ftp.getBufferSize(), f.length(), listener);      
}

public void upd(long num, long size){
    int k = (int) ((num*100)/size);
    System.out.println(String.valueOf(k));
    this.d.setText(String.valueOf(k));
    //d.setText(String.valueOf(k));
    progressBar.setValue(k);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:39:17.537

从它的声音（并且缺乏任何关于contree的证据）听起来你在[事件调度线程中处理一个耗时的动作](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

您可能想阅读[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中的并发以获得进一步的见解

我建议使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)执行实际传输并利用其内置的进度支持

**看到源代码后更新**

1.  不要将重量较重的组件与重量较轻的组件混合使用。更改`Applet`为`JApplet`, 更改`TextField`为`JTextField`, 不要使用`Canvas`使用`JPanel`or`JComponent`
2.  如果您希望其他人阅读您的代码，请为您的变量使用正确的名称，我不知道是什么`p`。
3.  你`Thread`的没用。而不是启动线程并使用它的`run`方法，您只需在它的构造函数中进行下载调用。这对你没有任何作用...

删除您的实现`MyThread`并将其替换为

```
public class MyWorker extends SwingWorker<Object, Object> {

    private URL host;
    private File outputFile;

    public MyWorker(URL host, File f) {
        this.host = host;
        outputFile = f;
    }

    @Override
    protected Object doInBackground() throws Exception {

        // You're ignoring the host you past in to the constructor
        String hostName = "localhost";
        String username = "un";
        String password = "pass";
        String location = f.toString();

        //FTPClient ftp = null;

        ftp.connect(hostName, 2121);
        ftp.login(username, password);

        ftp.setFileType(FTP.BINARY_FILE_TYPE);

        ftp.setKeepAlive(true);
        ftp.setControlKeepAliveTimeout(3000);
        ftp.setDataTimeout(3000); // 100 minutes
        ftp.setConnectTimeout(3000); // 100 minutes

        ftp.changeWorkingDirectory("/SSL");

        int reply = ftp.getReplyCode();
        System.out.println("Received Reply from FTP Connection:" + reply);

        if (FTPReply.isPositiveCompletion(reply)) {
            System.out.println("Connected Success");
        }
        System.out.println(f.getName().toString());

        File f1 = new File(location);
        in = new FileInputStream(f1);

        FileInputStream input = new FileInputStream(f1);
        // ftp.storeFile(f.getName().toString(),in);

        //ProgressMonitorInputStream is= new ProgressMonitorInputStream(getParent(), "st", in);
        OutputStream ftpOut = ftp.storeFileStream(f.getName().toString());

        System.out.println(ftpOut.toString());
        //newname hereSystem.out.println(ftp.remoteRetrieve(f.toString()));
        OutputStream output = new BufferedOutputStream(ftpOut);
        CopyStreamListener listener = new CopyStreamListener() {
            public void bytesTransferred(final long totalBytesTransferred, final int bytesTransferred, final long streamSize) {

                setProgress((int) Math.round(((double) totalBytesTransferred / (double) streamSize) * 100d));

            }

            @Override
            public void bytesTransferred(CopyStreamEvent arg0) {
                // TODO Auto-generated method stub
            }
        };

        Util.copyStream(input, output, ftp.getBufferSize(), f.length(), listener);

        return null;

    }
} 
```

在您`ActionListener`的`o`(??) 中，将线程执行代码替换为

```
try {
    MyWorker worker = new MyWorker(new URL("http://localhost"), file);
    worker.addPropertyChangeListener(new PropertyChangeListener() {

        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            if (evt.getPropertyName().equals("progress")) {
                Integer progress = (Integer) evt.getNewValue();
                progressBar.setValue(progress);
            }
        }
    });
    worker.execute();
} catch (MalformedURLException ex) {
    ex.printStackTrace();
} 
```

笔记。您忽略了传递给构造函数的 URL。http:// 不是 ftp:// 所以我怀疑这会起作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:34:17.610

在上传期间，您看不到 GUI 的更改，因为您在同一线程中运行上传和 GUI 更改。您应该启动一个执行上传的线程，并在 EDT（事件调度线程）中启动另一个执行 GUI 更新的线程。

有关更多信息，请参阅：

1.  [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:35:28.520

您应该在 SwingWorker 中实现传输逻辑，这样 UI 将有机会呈现进度。

# css - 如何在 IE7 和 IE6 中垂直居中元素？

> ID：12185931
> 
> 赞同：1
> 
> 时间：2012-08-29T20:25:06.150
> 
> 标签：css, internet-explorer-7, internet-explorer-6

我有一个没有固定高度的 div 元素，我想让它在其父元素内垂直居中，而不管它的高度如何。我将这项`display: table-cell`技术用于现代浏览器，但似乎这种技术在 IE7 及以下版本中不起作用。有没有办法在IE7及以下使用纯CSS实现这种垂直居中的效果？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:32:05.987

您可以将容器的`height`值设置为其`line-height`属性和`display:inline-block`居中元素。

HTML：

```
<div id="container">
    <span>content</span>
</div> 
```

CSS：

```
#container {
    display: table-cell; vertical-align:middle;
    border:1px solid red;
    height:300px;
    background-color:green;
    width:400px;
    text-align:center;
    line-height:300px; /* Same as height */
}
#container>span{
    background-color:lightblue;
    height:50px;
    width:100px;
    line-height:normal;
    display:inline-block; 
    vertical-align:middle;
} 
```

在这里看到它：http: [//jsfiddle.net/9TE5t/4/](http://jsfiddle.net/9TE5t/4/)

但请注意，在 IE 7 及更早版本上，如果您设置`display:inline-block`为默认块元素（例如`<div>`），它的行为类似于`display:block`.

然后，您可以使用默认的内联元素（例如），或者如果浏览器是 IE7 或更早版本，则`<span>`可以使用 IE 条件注释和设置`display:inline`（它们的行为类似于）。`display:inline-block`

# drop-down-menu - 如何获取单个列表项字段值？

> ID：12185935
> 
> 赞同：0
> 
> 时间：2012-08-29T20:25:12.950
> 
> 标签：drop-down-menu, caml, sharepoint-list, sharepoint-object-model

我有一个 SharePoint 列表，其中角色作为列（管理员、查看者、经理），文档类型作为项目（Word 文档、PPtx 文档、excel 文档）。我已经用每个角色对每个文档类型的权限填写了相应的值。

我已经构建了一个带有 2 个下拉菜单的 Web 部件。Dropdown1 具有角色，Dropdown2 具有文档类型。

如何使用每个下拉列表的选定值并从列表中查询相应的值？

我使用 CAML 还是可以使用 SharePoint 对象模型？

```
using (SPSite siteCol = new SPSite("http://mySharepoint/"))
{
    using (SPWeb web = siteCol.RootWeb)
    {
        SPList list = web.GetList("/Lists/PermissionMatrix");

        SPListItem item = list.GetItemByIdSelectedFields([*Requires ID*], "Role");

        String role1= (String)item["Roles"];
    }
} 
```

不起作用，因为我必须使用项目 ID，我只能使用 CAML 查询项目

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:56:46.917

SharePoint 2010 中提供了多种技术和概念。首先，将 SPQuery 与 CAML 查询结合使用，以请求与给定条件匹配的列表项。例如，您应该查看 MSDN ( [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spquery.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spquery.aspx) )。

这个简短的示例正在查找 ListItem id 大于 20 的所有已完成项目。

```
var sampleQuery = new SPQuery();
sampleQuery.Query = @"<Where>
     <And>
       <FieldRef Name='Status' />
       <Value Type='Text'>Completed</Value>
     </And>
     <Gt>
       <FieldRef Name='Id' />
       <Value Type='Number'>20</Value>
     </Gt>
   </Where>";
var foundItems = list.GetItems(sampleQuery); 
```

正如 MSDN 文章中还提到的，您可以使用 LINQ 2 SharePoint 来根据您的 SharePoint 站点中给出的结构生成强类型模型类。

# ios - ac#程序员的ios开发架构

> ID：12185936
> 
> 赞同：0
> 
> 时间：2012-08-29T20:25:16.537
> 
> 标签：ios

我是 iOS 开发的新手，但我有丰富的 Web 开发经验，这种体验很好，因为我已经知道一些编程语言，但很糟糕，因为我一想到 iOS 就头疼。我开始看了很多教程，现在我了解了 Objective C 语言的语法，我可以为几乎所有东西（Web 服务、json、读写文件、类、故事板等，基本上我需要的所有东西）编写基本任务。

我有一个“内部”视图控制器和一个“登录/注册”视图控制器。当用户启动应用程序时，我必须验证用户是否已登录（通过在文档文件夹中查找 plist 文件），然后决定是否需要触发通向内部的 segue。到目前为止，我已经有了“登录和注册”视图控制器和“内部”视图控制器的 segue。

我的问题：

我想如果我使用“登录/注册”视图控制器来检查用户是否登录，然后触发到“内部”视图控制器的 segue，我会看到从视图控制器到另一个视图控制器的转换，这不是我想要的。我想要的是：“启动屏幕徽标”，然后是“登录/注册”或“内部”。

我怎样才能做到这一点？我应该在哪里实现文件检查逻辑？我应该先添加一个视图控制器吗？

编辑（我找到了一个基于 H2CO3 答案的解决方案）：

给登录视图控制器和主视图控制器添加一个标识符，然后：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    BOOL user = TRUE;
    NSString *segue = user ? @"in" : @"out";
    UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"iPhone" bundle:nil];
    UIViewController *viewController = [storyBoard instantiateViewControllerWithIdentifier:segue];
    [self.window setRootViewController:viewController];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:27:35.070

在你的

```
application:didFinishLaunchingWithOptions: 
```

您的应用程序委托的方法，检查用户的登录状态。如果他已登录，则显示（alloc-init 并显示）主视图控制器，如果他未登录，则显示登录屏幕。

# silverlight - 如何在 Silverlight for Windows Phone 上更改 WebBrowser 上的组合框“selectedIndex”？

> ID：12185943
> 
> 赞同：2
> 
> 时间：2012-08-29T20:25:48.587
> 
> 标签：silverlight, windows-phone-7, combobox, browser, selectedindex

在 WebBrowser 中有这个页面 ( [http://gttweb.5t.torino.it/gtt/en/percorsi/percorsi-ricerca.jsp](http://gttweb.5t.torino.it/gtt/en/percorsi/percorsi-ricerca.jsp) ) 并且有 "destinationCity" `ComboBox`。在 VB.NET 中，我使用：

```
Dim DestinationComboBox As HtmlElement = MainWebBrowser.Document.All.Item("destinationCity")
DestinationComboBox.SetAttribute("selectedindex", 1) 
```

更改 ComboBox selectedIndex，但在 Silverlight 中（在此`WebBrowser`）中只有该`InvokeScript`功能.. 如何更改 selectedIndex 使用`InvokeScript()`？我试过了

```
InvokeScript("eval", "document.getElementById('destinationCity').selectedindex = 4") 
```

但它不起作用..请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:24:22.933

如果您使用 Chrome 开发者工具或 FireBug 对给定页面执行以下 JavaScript，您会发现它在桌面浏览器中不起作用：

```
document.getElementById('destinationCity').selectedindex = 4 
```

JavaScript 和`selectedIndex`属性区分大小写。以下作品：

```
document.getElementById('destinationCity').selectedIndex = 4 
```

# ruby-on-rails - 从 Heroku 共享数据库迁移到 Heroku Postgres；Heroku Postgres 计划选择

> ID：12185944
> 
> 赞同：0
> 
> 时间：2012-08-29T20:25:49.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, heroku

我正在构建一个 Rails 应用程序，我目前将它托管在 Heroku 的 Cedar 堆栈上。该应用程序有一个 postgres 数据库，我目前正在使用 Heroku 共享数据库。我了解 Heroku 共享数据库即将被替换。

我的应用程序的数据库非常大，每天都会向其中添加数据。如果我理解正确，如果您想保留免费选项，共享数据库替换将允许您拥有 10000 行。我的应用程序肯定会有超过 10000 行，我认为它会落入下一个数据库规模（每月 7 美元或 9 美元）。

如果我超过 10000 行的最大值，有人可以澄清我的下一个选择是哪个数据库结构吗？

如何配置我的应用程序以开始使用此数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T23:53:02.593

Heroku 的文档似乎很好地涵盖了这一点。请参阅[如何在共享数据库和 Heroku Postgres](https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres)之间[迁移以及在计划之间迁移](https://devcenter.heroku.com/articles/migrating-data-between-plans)。

您需要知道什么，或者是什么给您带来了未涵盖的问题？

至于计划选择：您的数据库处于中等活动状态且较大。您可能需要付费才能在某个地方托管它，而且每月 9 美元的入门计划看起来很合理，有 1000 万条记录限制。Heroku 在这里讨论了计划大小的选择：[选择正确的 postgres 计划](https://devcenter.heroku.com/articles/cache-size)，尽管它更关注缓存大小不同的生产计划，而不是数据库大小或行数限制。

# c# - 对 ActiveX 的工作方式感到困惑

> ID：12185945
> 
> 赞同：0
> 
> 时间：2012-08-29T20:25:51.093
> 
> 标签：c#, asp.net, activex

我需要将 ActiveX 控件与我正在创建的 C# ASP.net Web 应用程序一起使用，我对它的工作原理有点困惑。我的 dll 在我的代码中引用了 ActiveX 控件，但我很难弄清楚下一步该做什么。据我所知，我需要添加

```
<object id="testx" classid="Library/activeX.dll"></object> 
```

到我的 html 代码，但我似乎无法从我的 C# 后面的代码连接到它。

我知道我在看一些东西，或者可能只是对我对这些工作原理的理解有所偏离。我从第三方获得了我的 ActiveX 控件 dll，所以我创建控件并不是为了尝试使用它。

对此的任何帮助将不胜感激，并提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:28:16.300

您可以添加 runat="server" 以便在后面的代码中访问

```
<object id="testx" classid="" runat="server"></object> 
```

regedit ：使用左窗格打开 HKEY_CLASSES_ROOT\CLSID 目录。这包含您计算机上安装的所有 ActiveX 控件的密钥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:19:18.853

我不确定我是否理解正确，但是当您在（ASP.NET-/HTML-）页面（使用`<object ...>`）中嵌入 ActiveX 控件时，它将在客户端、浏览器中运行（仅限 IE）。因此，您无法从服务器端代码直接访问它。

此外，要使 ActiveX 控件正常工作，它必须安装在客户端计算机上。（注意：在您开发时，客户端和服务器可能是同一台计算机）。

另一方面，如果您想在服务器端使用 ActiveX 控件，则无需将其嵌入到 HTML 代码中。相反，您在服务器端代码（代码隐藏）中创建 ActiveX 控件的实例。

如果我误解了什么，请告诉我。

# asp.net - 我的服务器端转换不会将参数传递给 XSL

> ID：12185946
> 
> 赞同：0
> 
> 时间：2012-08-29T20:26:03.407
> 
> 标签：asp.net, xml, xslt, asp-classic

*这里是非常基本的开发人员。*我目前使用 mappath 在服务器端转换我的 XSL 和 XML。这很有名，但只使用这个 BC 它是 W3C 学校网站上使用的示例。我试图通过 URL 字符串传递参数来扩展我的页面的一些功能。您可能已经知道，我无法使用 mappath 方法传递 URL 参数。我一生都无法弄清楚如何以其他方式做到这一点。谷歌没有提供清晰的例子，我的 wrox 书也没有。

有人可以告诉我如何完成将参数传递到 XSLT 中吗？

我想我要么需要使用一种新方法进行服务器端转换，要么我需要了解一种传递参数的新方法。

感谢您过去的所有帮助对我的项目产生了巨大的影响！

公斤

我当前的代码

```
<html><title>Report</title>
<head>
</head>
<%
'Load XML
set xml = Server.CreateObject("Microsoft.XMLDOM")
xml.async = false
xml.load(Server.MapPath("/XML/XMLData/View.xml"))

'Load XSL
set xsl = Server.CreateObject("Microsoft.XMLDOM")
xsl.async = false
xsl.load(Server.MapPath("Data.xsl"))
'Transform file
Response.Write(xml.transformNode(xsl))
%>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:26:34.723

只是有点迂腐，在这里进行转换的不是地图路径。Server.MapPath 所做的只是将相对或虚拟路径（在您的情况下为“/XML/XMLData/View.xml”）转换为服务器上的物理目录，然后可由 XML 处理器加载。在您的情况下，您使用的是 ASP，因此处理器是 MSXML。

幸运的是，这确实支持参数的传递，尽管您确实需要做一些额外的工作。试试这个代码示例

```
<html><title>Report</title> 
<head> 
</head> 
<% 
' Load XML
set xmldoc = Server.CreateObject("Msxml2.DOMDocument")
xmldoc.async = false
xmldoc.load(Server.MapPath("/XML/XMLData/View.xml"))

' Load XSLT (as XML)
Set xsldoc = Server.CreateObject("Msxml2.FreeThreadedDOMDocument")
xsldoc.async = false
xsldoc.load(Server.MapPath("Data.xslt"))

' Set up stylesheet
set xslt = Server.CreateObject("Msxml2.XSLTemplate")
xslt.stylesheet = xsldoc

' Create a processor to do the transform
Set xslproc = xslt.createProcessor()
xslproc.input = xmldoc
xslproc.addParameter "myParam", "Hello World"
xslproc.transform()

Response.Write xslproc.output
%> 
</html> 
```

在 XSLT 本身中，您显然需要指定参数。这是通过使用**xsl:param**元素完成的。这需要在**xsl:stylesheet**元素内、靠近顶部以及在您拥有的任何**xsl:template**元素之外

```
<xsl:param name="myParam" select="'Good Morning'" /> 
```

请注意，在这种情况下，如果调用代码未设置参数，则**select属性指定了默认值。**

我注意到您也标记了**asp.net**问题，在这种情况下，您可能需要阅读有关 XSLTCompliled 转换的信息，这是您在 .Net 中进行 XSLT 转换时使用的类。

# html - 为什么离线 html 5 视频/音频播放器不成为新闻？

> ID：12185947
> 
> 赞同：0
> 
> 时间：2012-08-29T20:26:08.503
> 
> 标签：html, audio, video, offline

我真的很高兴知道 html 5 已经构建了对音频和视频播放的支持（我知道它的旧消息，但我刚刚醒来！：P）。更令人兴奋的是，它可以通过点击播放本地音频/视频文件。我看了这个[离线音频播放器](http://antimatter15.github.com/player/player.html)，找不到任何离线视频播放器。

我的问题是为什么人们不开发可以从网站加载的离线媒体播放器？有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T15:37:58.283

我认为[这](https://github.com/NamilD/Nakuma-Player)是适合您的解决方案，只需下载 zip 文件并将其解压缩到您想要的任何位置。然后使用您的网络浏览器（Chrome 或 Firefox）打开文件“index.html”文件。这个程序仍然只支持音频/mp3 文件。

[仲马玩家](https://github.com/NamilD/Nakuma-Player)

# sql - T-SQL：从结果集中构建新表

> ID：12185951
> 
> 赞同：0
> 
> 时间：2012-08-29T20:26:26.137
> 
> 标签：sql, database, tsql

首先：这里是 SQL 新手。不幸的是，我在截止日期前受到了这种压力。：/如果这是一个愚蠢的问题，我深表歉意。

所以我有一个带有不同列的视图的数据库。它有两列我感兴趣：**UserID**和**Age**。

*   **Age**以自创建之日起的天数存储报告的年龄。
*   **UserID**是创建报告的用户。

该视图列出了用户的所有报告。

我们需要做的是从列出每个唯一用户的现有视图中创建一个新表/视图，然后将他们的全部文档分解为不同的年龄组。所以这些列看起来像：

用户 || # rprts <14 天 || # rprts 14-17 天 || # rprts 18-28 天 || # rprts 29-44 天 || # rprts 45 天以上

我知道我可以得到我想要的所有用户的集合：

```
SELECT DISTINCT [UserID] FROM [DB].[dbo].[DB_View] 
```

我可以运行以下命令并通过硬编码 UserID # 来获取我想要的新表/视图的一行：

```
SELECT DISTINCT 

    [UserID],
    (SELECT COUNT(*) FROM [DB].[dbo].[DB_View] WHERE (Age < 14) AND UserID = '9999') AS "Less Than 14 Days",
    (SELECT COUNT(*) FROM [DB].[dbo].[DB_View] WHERE (Age BETWEEN 14 AND 17) AND UserID = '9999') AS "14 to 17 Days",
    (SELECT COUNT(*) FROM [DB].[dbo].[DB_View] WHERE (Age BETWEEN 18 AND 28) AND UserID = '9999') AS "18 to 28 Days",
    (SELECT COUNT(*) FROM [DB].[dbo].[DB_View] WHERE (Age BETWEEN 29 AND 44) AND UserID = '9999') AS "29 to 44 Days",
    (SELECT COUNT(*) FROM [DB].[dbo].[DB_View] WHERE (Age >= 45) AND UserID = '9999') AS "Over 45 Days"

FROM [DB].[dbo].[DB_View]
WHERE UserID = '9999' 
```

用户的结果集大约是 600 行，而视图通常有大约 6,000-15,000 行。我最初的想法是获取我的用户结果集，然后将每个用户存储到一个参数，然后将其传递到我硬编码用户 ID 的查询中。可悲的是，我什至无法弄清楚执行此操作的 SQL。（而且我猜如果你知道你的 SQL，有一种更有效的方法可以做到这一点......）我已经看到了关于使用游标和其他东西的东西，但我不太了解它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T20:30:08.603

如果我对你的理解是正确的：

```
SELECT [UserID],
    COUNT(CASE WHEN Age < 14 THEN 1 ELSE NULL END) AS [Less Than 14 Days],
    COUNT(CASE WHEN Age BETWEEN 14 AND 17 THEN 1 ELSE NULL END) AS [14 to 17 Days],
    COUNT(CASE WHEN Age BETWEEN 18 AND 28 THEN 1 ELSE NULL END) AS [18 to 28 Days],
    COUNT(CASE WHEN Age BETWEEN 29 AND 44 THEN 1 ELSE NULL END) AS [29 to 44 Days],
    COUNT(CASE WHEN Age >= 45 THEN 1 ELSE NULL END) AS [Over 45 Days]

FROM [DB].[dbo].[DB_View]
GROUP BY [UserID] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:35:13.487

您可以使用简单的 group by 来执行此操作，使用 CASE 语句按年龄进行条件总和：

```
SELECT [UserID],
       SUM(case when Age < 14 then 1 else 0 end) AS "Less Than 14 Days",
       SUM(case when Age BETWEEN 14 AND 17 then 1 else 0 end) as "14 to 17 Days",
       SUM(case when Age BETWEEN 18 AND 28 then 1 else 0 end) as "18 to 28 Days",
       SUM(case when Age BETWEEN 29 AND 44 then 1 else 0 end) as "29 AND 44 Days",
       SUM(case when Age BETWEEN 29 AND 44 then 1 else 0 end) as "29 AND 44 Days",
       SUM(case when Age >= 45 then 1 else 0 end) as "Over 45 Days"
from [DB].[dbo].[DB_View] 
where  UserID = '9999'
group by userID 
```

# python - Python优化Grouper函数以避免None元素

> ID：12185952
> 
> 赞同：4
> 
> 时间：2012-08-29T20:26:36.050
> 
> 标签：python, python-2.5, itertools, python-2.4

您好，我正在使用 python 的 itertools 中的 Grouper 函数来减少大量 select where in(idlist) 查询以提高 sqlite 性能。问题是即使列表小得多，grouper 也会填充块大小的整个空间，所以我必须添加一个循环和比较，在此之前我要优化。

```
# input list shorter than grouper chunk size
input = (1,2,3,4,5)

grouper(10,input)
# desired output = (1,2,3,4,5)
# actual output = (1,2,3,4,5,None,None,None,None,None)

# current fix for this issue
list_chunks = tuple(tuple(n for n in t if n) for t in grouper(10, input)) 
```

我认为必须有一种方法可以在没有这种循环和比较的情况下做到这一点。

# 注意：使用python 2.5

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T20:42:59.200

如果不是过滤掉`None`条目，而是重写`grouper()`以返回您想要的内容是一个选项，您可以使用以下解决方案`itertools.islice`：

```
def grouper(n, iterable):
    it = iter(iterable)
    x = tuple(islice(it, n))
    while x:
        yield x
        x = tuple(islice(it, n)) 
```

或者更短的等价物（稍微难以理解）：

```
def grouper(n, iterable):
    it = iter(iterable)
    return iter(lambda: tuple(islice(it, n)), ()) 
```

例子：

```
>>> list(grouper(5, range(12)))
[(0, 1, 2, 3, 4), (5, 6, 7, 8, 9), (10, 11)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T20:29:43.067

像这样的东西？

```
>>> filter(bool, (1,2,3,4,5,None,None,None,None,None))
(1, 2, 3, 4, 5) 
```

对于更复杂的情况（例如，列表中有 0 或者您需要删除与 不同的`None`内容），您可以实现自己的`lambda`：

```
>>> filter(lambda n: n is not None, (0,1,2,3,4,5,None,None,None,None,None))
(0, 1, 2, 3, 4, 5) 
```

甚至

```
>>> from functools import partial
>>> from operator import ne
>>> filter(partial(ne, None), (0,1,2,3,4,5,None,None,None,None,None))
(0, 1, 2, 3, 4, 5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T20:34:22.157

您可以使用`filter`and `map`：

```
map(lambda x: filter(bool, x), grouper(10, my_input)) 
```

这是一个例子：

```
>>> my_input = (1,2,3,4,5,6,7,8,9,1,2,3,3)
>>> map(lambda x: filter(bool, x), list(grouper(10, my_input)))
[(1, 2, 3, 4, 5, 6, 7, 8, 9, 1), (2, 3, 3)] 
```

`tuple()`最后，如果你希望它是一个元组而不是一个列表，你可以将它包装在一个调用中。

# asp.net-mvc - Html.Serialize 返回 NullReferenceException

> ID：12185958
> 
> 赞同：0
> 
> 时间：2012-08-29T20:26:49.103
> 
> 标签：asp.net-mvc

我有一个 ViewModel

```
namespace ViewModel
{
    [Serializable]
    public class TestViewModel
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }
} 
```

另外，我有一种操作方法：

```
public ActionResult Index()
{
    TestViewModel model = new TestViewModel
    {
        Id = -1,
        Name = "Some name",
        Description = "Some description"
    };

    return View(model);
} 
```

我的观点是这样的：

```
@using Microsoft.Web.Mvc
@model ViewModel.TestViewModel

@using (Html.BeginForm())
{
    Html.Serialize("model", Model, SerializationMode.EncryptedAndSigned);
    //....Editor fields
} 
```

在 "Html.Serialize("model", Model, SerializationMode.EncryptedAndSigned);" 行 调试器停止并返回异常“对象引用未设置为对象的实例”（NullReferenceException）。虽然，模型不是 null 并且包含初始值。

我使用 ASP.Net MVC 3(Razor)，堆栈跟踪如下：

```
in Microsoft.Web.Mvc.SerializationExtensions.SerializeInternal(HtmlHelper htmlHelper, 
String name, Object data, SerializationMode mode, Boolean useViewData, MvcSerializer
serializer) 
in Microsoft.Web.Mvc.SerializationExtensions.SerializeInternal(HtmlHelper htmlHelper,
String name, Object data, SerializationMode mode, Boolean useViewData)
in Microsoft.Web.Mvc.SerializationExtensions.Serialize(HtmlHelper htmlHelper, String
name, Object data, SerializationMode mode)
in ASP._Page_Views_Wizard_Index_cshtml.Execute()
in c:\Projects\TestProject\Views\Wizard\Index.cshtml:line 15
in System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
in System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
in System.Web.WebPages.StartPage.RunPage()
in System.Web.WebPages.StartPage.ExecutePageHierarchy()
in System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext,
TextWriter writer, WebPageRenderingBase startPage)
in System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer,
Object instance)
in System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter
writer)
in System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
in System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext
controllerContext, ActionResult actionResult)
in System.Web.Mvc.ControllerActionInvoker.
<>c__DisplayClass1c.InvokeActionResultWithFilters>b__19()
in System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, 
ResultExecutingContext preContext, Func`1 continuation) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:18:11.363

问题是我有对 Mvc2Futures（“Microsoft.Web.Mvc.dll”）的程序集引用。但是当我更改对 Mvc3Futures ("Microsoft.Web.Mvc.dll") 的引用时，一切正常。非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:42:05.743

你需要使用

```
@Html.Serialize("model", Model, SerializationMode.EncryptedAndSigned) 
```

如果您想要在表单上带有模型的隐藏字段。

# windows - 压缩的文件路径数组和随机访问

> ID：12185961
> 
> 赞同：2
> 
> 时间：2012-08-29T20:27:08.540
> 
> 标签：windows, filesystems, compression, random-access

我正在开发一个文件管理 Windows 应用程序。该程序应保留磁盘上所有文件和文件夹的路径数组。例如：

```
0 "C:"  
1 "C:\abc"  
2 "C:\abc\def"  
3 "C:\ghi"  
4 "C:\ghi\readme.txt" 
```

“原样”的数组将非常大，因此应将其压缩并存储在磁盘上。但是，我想随机访问它：

1.  通过索引检索数组中的任何路径（例如，`RetrievePath(2) = "C:\abc\def"`）
2.  查找数组中任何路径的索引（例如，`IndexOf("C:\ghi") = 3`）
3.  向数组添加新路径（任何现有路径的索引不应更改），例如，`AddPath("C:\ghi\xyz\file.dat")`
4.  重命名数据库中的某些文件或文件夹；
5.  删除现有路径（同样，任何其他索引都不应更改）。
    例如，`1 "C:\abc"`从数据库中删除路径，仍然有`4 "C:\ghi\readme.txt"`.

有人可以提出一些好的算法/数据结构/想法来做这些事情吗？

**编辑：**
目前我想出了以下解决方案：

```
0 "C:"
1 "[0]\abc"
2 "[1]\def"
3 "[0]\ghi"
4 "[3]\readme.txt" 
```

也就是说，公共前缀被压缩。

1.  `RetrievePath(2) = "[1]\def" = RetrievePath(1) + "\def" = "[0]\abc\def" = RetrievePath(0) + "\abc\def" = "C:\abc\def"`
2.  `IndexOf()`也可以迭代地工作，就像这样：

    ```
    IndexOf("C:") = 0
    IndexOf("C:\abc") = IndexOf("[0]\abc") = 1
    IndexOf("C:\abc\def") = IndexOf("[1]\def") = 2 
    ```

3.  要添加新路径，比如说`AddPath("C:\ghi\xyz\file.dat")`，应该首先添加它的前缀：

    ```
    5 [3]\xyz
    6 [5]\file.dat 
    ```

4.  重命名/移动文件/文件夹只涉及一个替换（例如，替换`[0]\ghi`将`[1]\klm`重命名目录`"ghi"`到`"klm"`并将其移动到目录`"C:\abc"`）

5.  DeletePath() 涉及将其（和所有子路径）设置为空字符串。将来，它们可以被新的路径所取代。
    之后`DeletePath("C:\abc")`，数组将是：

    ```
    0 "C:"
    1 ""
    2 ""
    3 "[0]\ghi"
    4 "[3]\readme.txt" 
    ```

整个数组仍然需要加载到 RAM 中以执行快速操作。例如，总共有 1000000 个文件和文件夹，平均文件名长度为 10，该数组将占用超过 10 MB。
此外，函数`IndexOf()`被迫按顺序扫描数组。

**编辑（2）：**我刚刚意识到我的问题可以重新表述：
如何为磁盘上的每个文件和每个文件夹分配唯一整数索引，以便我能够通过索引快速找到文件/文件夹，已知文件的索引/folder，并在不更改许多索引的情况下执行基本文件操作？

**编辑（3）：** [这](https://stackoverflow.com/questions/12059907/uniquely-identify-files)是一个关于类似但与 Linux 相关的问题的问题。建议使用文件名和内容哈希来识别文件。是否有一些特定于 Windows 的改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:04:45.063

您的解决方案似乎不错。您还可以尝试使用特殊技巧进行更多压缩，例如仅对常见字符（例如“\”）、驱动器号、可能是常见的文件扩展名等使用一些位。您还可以查看尝试 ( [http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie) )。

关于您的第二次编辑，这似乎与哈希表的功能相匹配，但这是用于索引，而不是压缩存储。

# php - 聪明的模板

> ID：12185962
> 
> 赞同：0
> 
> 时间：2012-08-29T20:27:10.090
> 
> 标签：php, smarty

所以这是问题所在，我有一个`index.php`（包含所有 php 代码）并且我有一个`index.tpl`包含所有 html 内容的文件。但现在因为我使用 ajax 我有另一个 php 文件应该输出一些数据（data.php）。问题是我不知道如何在 data.php 文件中选择模板，我只知道`index.php`我有一个显示`tpl ($Smarty->display($filename);`) 但我不想在`data.php`文件我只想分配一些需要显示的变量`index.tpl`

编辑：

好的，这会很长：首先我需要解释我想要完成什么。我有 index.php 和 data.php。index.php：

```
<?php
include("../include/config.php");
include("../include/functions/import.php");

$thebaseurl = $config['baseurl'];

    $query ="SELECT name FROM contacts";
    $results = $conn->execute($query);
    $select-names = $results->getrows();
    STemplate::assign('select-names',$select-names);

$templateselect = "index.tpl";
STemplate::display($templateselect);
?> 
```

index.tpl 有点长，所以我将发布重要部分：

```
xmlhttp.open("get","data.php?q="+str,true); 
```

这是 AJAX 代码，此代码将 GET 方法中的 +str 值发送到 data.php 文件，然后使用该值并从数据库中提取一些数据。

数据.php：

```
$q=$_GET["q"];

$sql="SELECT * FROM contacts WHERE name = '$q'";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
  {
    $name = $row['name'];
  }

STemplate::assign('name',$name);
$templateselect = "index.tpl";
STemplate::display($templateselect); //the second display
?> 
```

我在 STemplate 中使用该类作为 smarty 函数，但你知道代码是什么。

我希望你明白现在是什么问题。如何在不再次显示模板文件的情况下将变量分配给模板。这样 $name 变量可以在 index.tpl 中访问（名称显示在 db 中），但由于 data.php 中的显示功能，整个内容再次显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:38:43.993

用于`$smarty->assign('var', 'value');`赋值。

[欲了解更多信息，请在此处](http://www.smarty.net/docsv2/en/language.variables.tpl#language.assigned.variables)阅读更多信息。

**编辑**

其背后的想法`.tpl`是使用 输入变量`assign`，并在页面准备好时使用 显示它`display`。您可以在显示之前设置多个变量：

```
<?php

$smarty = new Smarty();

$smarty->assign('firstname', 'Doug');
$smarty->assign('lastname', 'Evans');
$smarty->assign('meetingPlace', 'New York');

$smarty->display('index.tpl');

?> 
```

如果您看到该文本两次，则意味着您在某个地方调用`$smarty->display('index.tpl');`了一次太多。要找到确切的位置，我必须查看您的来源。请发布文件或有问题的位。

无论如何祝你好运:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:05:39.113

不知道这是否有帮助。但您也可以将“渲染”的 tpl 返回到您的 AJAX。显示功能通常用于页面的框架。（有点像所有东西的基本占位符）。并与页面刷新一起使用，而不是 AJAX。

在 data.php 中，您可以使用

```
$answer = $smarty->fetch("ajaxreturn.tpl");
echo $answer;
die(); 
```

在此之前，您可以在 Smarty 中进行所需的分配。

然后，在 AJAX 中，您可以将返回的 HTML 片段放置在正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T10:11:36.197

我不明白你为什么用ajax重新加载整个页面。如果改变的数据是一个列表，你不能为那个列表创建一个模板吗？所以...

索引.tpl

```
<body>
... content ...
<div id="ajax_list">
{include file="data.tpl"}
</div>
... content ...
</body> 
```

然后在 data.tpl

```
<ul>
{foreach $rows as $row}
<li>{$row.name}</li>
{foreach}
</ul> 
```

第一次输入 index.php 时，它会同时渲染 index.tpl 和 data.tpl，然后你只需要添加 javascript 代码来用 data.php 刷新 #ajax_list 内容，它只会处理 data.tpl

```
$smarty->display('data.tpl'); 
```

# options - jshint：如何关闭警告并只看到错误？

> ID：12185971
> 
> 赞同：3
> 
> 时间：2012-08-29T20:27:43.587
> 
> 标签：options, jshint

我继承了一些略微损坏的 JavaScript，并且在每天使用几个小时一段时间后，我没有任何有用的线索来判断哪里出了问题。

我发现了[JSHint](http://www.jshint.com/)和[JSLint](http://jslint.com/)，虽然它们看起来很有希望，但它们对大括号样式、缩进和函数标题后缺少空格等细节的关注会产生如此多的警告，以至于它们会在出现任何错误之前停止警告（*太多警告）。*对琐碎问题的关注类似于在泰坦尼克号下沉时重新布置躺椅。

我经历了许多尝试来关闭最麻烦的选项，以找出一个真正的错误。例如，在 JSHint 中，我尝试了这些选项行（不换行）：

```
/*jshint asi:true, white:false, forin:true, noarg:true, noempty:true,
  eqeqeq:true, bitwise:true, undef:true, unused:true, browser:true,
  maxerr:1000, smarttabs:true  */

/*jshint asi:true, white:false, browser:true, maxerr:1000, smarttabs:true */ 
```

但它仍然会喷出很多无用的垃圾，比如

```
Line 2: required: 'The %s field is required.',
Mixed spaces and tabs.
...
Line 23: var rules = field.rules.split('|');
Empty block.

Line 25: (!field.value || field.value === '' || field.value === undefined))
Mixed spaces and tabs.

Line 26: document.getElementById("PASSWORD").style.display="";
Missing "use strict" statement.
...
Line 37:
Too many errors. (3% scanned). 
```

有没有办法动摇这个工具的一些意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:58:33.897

不幸的是，我没有找到一个简单的解决方案。当我确定没问题时，我最终逐段删除了可疑的 Javascript 代码的一部分，然后重新运行 JSHint 以查看它会报告哪些新问题。在某些情况下，使用“首选”空格来格式化代码以消除几十个警告是方便的。

# html - IE8图像大于div，相对/绝对和负边距

> ID：12185973
> 
> 赞同：0
> 
> 时间：2012-08-29T20:27:49.557
> 
> 标签：html, internet-explorer-8, slider, image

所以这是我有问题的HTML代码。

```
 <script type="text/css">
    .slider-holder { 
        background-color:transparent;
        }

    .slider-bg {
        min-height: 295px;
        position: relative;
        z-index: 1;
        border-bottom:0px;

        }

    .slider {
        height: 295px;
        padding: 1px 17px 0;
        margin: 0 auto;
        position: relative;
        background: transparent;

    }

    .slider .items,
    .slider .items2 {
        position: relative;
        height: 293px;
        float: left;
    }

    .slider .items div.item,
    .slider .items2 div.item{
        height: 293px;
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 0;
    }

    .slider .slider-text {
        width: 720px;
        position: relative;
        z-index: 2;
        padding: 70px 0 0;
    }

    .slider .slider-text, .slider .slider-text p {
        background-color: inherit;
        color: #fff;
        font-size: 32px;
        line-height: 33px;
    }

    .slider .slider-text.smaller p 
        {
        font-size:24px;
        }

    .slider .slider-text p { padding: 0 0 10px; }

    .slider .slider-text a.slider-btn {
        background: #58940a url('img/btn/slider-btn.png') no-repeat 8px 7px;
        display: block;
        float: left;
        -webkit-border-radius: 1px;
        -moz-border-radius: 1px;
        border-radius: 1px;
        -webkit-box-shadow: 0px 0px 40px #666;
        -moz-box-shadow: 0px 0px 40px #666;
        box-shadow: 0px 0px 40px #666;
        padding: 6px 10px 6px 32px;
        color: #fff;
        font-size: 15px;
        line-height: 20px;
        height: 20px;
    }

    .slider .slider-img {
        position: absolute;
        bottom: 0px;
        padding: 0 5px 0 0;
        z-index: 1;
        left:-312px;
        zoom: 1;

    }

    .slider .slidetabs {
        position: absolute;
        left:375px;
        bottom: 27px;
        z-index: 3;
    }

    .slider .slidetabs a {
        background: url('img/elem/thumbnail-disc.png') no-repeat left top;
        display: block;
        width: 11px;
        height: 11px;
        float: left;
        margin: 0 6px 0 0;
    }

    .slider .slidetabs a:hover, .slider .slidetabs a.current { background-position: left bottom; }
</script>

<div class="slider-holder">
    <div class="slider-bg"> 
        <!--begin:slider-->
        <div class="slider"> 
            <div class="items"> 
                <!--begin:item-->
                <div class="item" style="display: none; ">
                    <div class="slider-text"></div>
                    <div class="slider-img"> 
                        <img src="image.jpg" alt="" width="1600" height="294" align="center">
                    </div>
                </div>
                <!--end:item--> 
                <!--begin:item-->
                <div class="item" style="display: none; ">
                    <div class="slider-text smaller"></div>
                    <div class="slider-img"> 
                        <img src="image2.jpg" alt="" width="1600" height="294" align="center">
                    </div>
                </div>
                <!--end:item-->
                <!--begin:item-->
                <div class="item" style="display: block; ">
                    <div class="slider-text"></div>
                    <div class="slider-img"> 
                        <a href="http://www.link.com" target="_blank">
                            <img src="image.jpeg" alt="" width="1600" height="294" align="center">
                        </a>
                    </div>
                </div>
                <!--end:item-->  
            </div>
            <div class="slidetabs"> 
                <a href="#" class=""></a> 
                <a href="#" class=""></a>
                <a href="#" class="current"></a>  
            </div>
        </div>
        <!--end:slider--> 
    </div>
</div> 
```

这种特殊设置的问题是 img 比 div 大（这是故意的。而且这种设置适用于除 IE8 之外的大多数浏览器。它在 .slider-holder 框处被切断（或至少看起来如此）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:33:12.113

发现缓存插件破坏了该站点。继续。

# asp.net - System.Web.Razor 的文档在哪里？(v2)

> ID：12185975
> 
> 赞同：1
> 
> 时间：2012-08-29T20:27:54.477
> 
> 标签：asp.net, .net, razor, compilation, documentation

我从 NuGet 获得了 Razor 引擎的 v2 版本。我想使用它的 API 即时编译 Razor 视图。但是，它似乎完全没有记录。

每个类型和成员都有以下文档：

> 此类型/成员支持 .NET Framework 基础结构，不打算直接从您的代码中使用。

这很烦人，因为这些都是公共类型和公共成员。
我已经看到了一些使用这个库编译 Razor 视图的 3rd 方的东西，所以我知道这个任务也应该是可行的。

那么，是否有任何关于如何在任何地方使用此 API 的实际可用文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T16:56:56.957

我把这个问题留了将近一年没有答案，所以我决定最终发布我想出的东西。

很明显，Razor 仍然没有记录，请参阅[http://msdn.microsoft.com/en-us/library/system.web.razor%28v=vs.111%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.razor%28v=vs.111%29.aspx)我认为它很可能保持无证。

但是，通过查看 ASP.NET MVC 在其 Razor 视图引擎中如何使用它的代码，可以很容易地确定如何使用它。然后，您可以在此基础上编写代码。

Razor 似乎也与 ASP.NET`BuildManager`基础结构相关联，因此您可以通过它轻松获取 Razor 视图的实例。然后，您正在寻找调用该`ExecutePageHierarchy`方法。

这是代码：

```
public void ProcessRequestCore(HttpContextBase context)
{
    try
    {
        // Create Razor page instance
        var instance = BuildManager.CreateInstanceFromVirtualPath(_razorFilePath, typeof(WebPage)) as WebPage;

        if (instance == null)
            throw new NullReferenceException("BuildManager.CreateInstanceFromVirtualPath returned null.");

        // Set up things
        instance.VirtualPath = _virtualPath;

        // Render the Razor page
        instance.ExecutePageHierarchy(new WebPageContext(context, instance, _model), context.Response.Output);
    }
    catch (Exception exc)
    {
        Logger.WriteException(exc);
        context.Response.StatusCode = 500;
    }
} 
```

# php - 检查字符串是否符合代码页 1250

> ID：12185978
> 
> 赞同：0
> 
> 时间：2012-08-29T20:28:04.627
> 
> 标签：php, mysql

我需要检查一个字符串是否符合代码页 1250。

我可以将它写入 MySQL 并进行如下检查：

```
select id,name from test where name <> CONVERT(name USING cp1250); 
```

这将找到不合规的字符串。

我可以以某种方式在 PHP 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:24:59.930

尝试这个。

```
mb_convert_case($name, MB_CASE_LOWER, "Windows-1251") 
```

或者可能

```
mb_convert_encoding($name,"Windows-1251") 
```

# .net - 为什么 .NET 4.5 中没有 CallerTypeNameAttribute？

> ID：12185983
> 
> 赞同：12
> 
> 时间：2012-08-29T20:28:20.887
> 
> 标签：.net, clr

对于 .NET 4.5，CLR 团队补充说：

*   [`CallerFilePathAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerfilepathattribute)
*   [`CallerLineNumberAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerlinenumberattribute)
*   [`CallerMemberNameAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute)

为什么没有为调用者的类型添加一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:39:32.960

这对于设计团队之外的人来说很难回答，但我想说`CallerTypeNameAttribute`.

file 和 line 属性为您提供了用于记录例程的扩展信息，否则这些信息是无法获得的。成员名称允许记录并简化实现，`INotifyPropertyChanged`同时还允许安全名称重构而无需搜索字符串。

调用者类型已经可以通过 using 传递给给定的方法，`typeof(CurrentType).Name`因此它可能不值得额外的属性。您可以说调用者成员的名称也可以使用`MethodBase.GetCurrentMethod`，但这可能总是会强制反射，并且`typeof`可能已被优化掉，因此您已经获得了安全重构的好处，并且对性能的影响较小。

使用`typeof`而不是可能的属性的唯一缺点是属性方法不会受到混淆的影响。

# ruby-on-rails - 向 Rails 服务器发出请求后 ActiveRecord 回调消失

> ID：12185985
> 
> 赞同：1
> 
> 时间：2012-08-29T20:28:27.097
> 
> 标签：ruby-on-rails, ruby, activerecord

我们有一个 Rails 应用程序，其中 after_create 从初始化程序动态添加到 ActiveRecord 模型。

我们已经尝试了 instance_eval

```
Foo.instance_eval do
  send "after_create", lambda{|r| r.some_method}
end 
```

和 class_eval

```
Foo.class_eval do
  after_create lambda{|r| r.some_method}
end 
```

`Foo.new._create_callbacks`在创建它们之后运行时，它会返回两个回调。

在向 Rails 服务器发出请求后，两个回调消失了。

这个问题只发生在开发中。分期和生产工作正常。

当在回调中设置`config.cache_classes = true` 时，`development.rb`回调将持续存在并且不会消失。

我们已经在其他应用程序中复制了这段代码，它工作正常，所以可能是配置问题。

注意：我们正在使用带有*lvh.me的子域*

*   导轨 3.1.1
*   红宝石 1.9.2-p180

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:17:53.520

这个问题似乎是一个类似的问题，关于开发模式下的猴子补丁，它有一个潜在的解决方案：

[如何对在 Rails 中自动加载的代码进行猴子补丁？](https://stackoverflow.com/questions/4460800/how-to-monkey-patch-code-that-gets-auto-loaded-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:09:09.443

在开发模式下的 Rails 中，当有新请求进入时，所有模型都会重新加载。这很有用，因为您不必在每次更改某些内容时都重新启动服务器。但是，在 prod 中这不会发生，因为存在性能损失。这里的问题是初始化程序仅在 Rails 应用程序初始化期间运行。我可能会问你为什么要在初始化程序中设置 after_create 而不是模型本身？

# php - Salesforce Web2Lead - 潜在客户捕获页面：不可用。

> ID：12185988
> 
> 赞同：0
> 
> 时间：2012-08-29T20:28:39.977
> 
> 标签：php, salesforce

调试后，我收到一条回复，指出潜在客户捕获页面：不可用。

有没有人遇到过这个问题...我正确传递了所有内容，而 salesforce.com 董事会根本没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T20:46:47.403

不幸的是，您收到的错误消息是通用的，它没有说明错误是什么。

使用 debug=1 参数或 debugemail 参数，它会尝试将帖子来自的页面返回给您。我认为它为此使用了 Referer: 标头。没有引荐来源标题（例如，如果您只是将数据卷曲到 sf），那么您会得到上面的行而不是类似的内容

潜在客户捕获页面：http: [//yoursite.com/your/form.php](http://yoursite.com/your/form.php)

鉴于 sf 没有告诉你杰克，这里有一些其他提示：

*   尝试发布到您通过浏览器登录时看到的同一子域，而不是 www.salesforce 或 test.salesforce。

*   另请查看返回标头 Is-Processed:，我在那里看到了异常。

*   尝试生成的表格；生成后，您可以按上述方式更改子域，它应该可以按原样工作。然后逐渐破解您的表单和生成的表单，直到它们都失败或都成功。

# mysql - HAML 检查是否为空

> ID：12185989
> 
> 赞同：0
> 
> 时间：2012-08-29T20:28:47.637
> 
> 标签：mysql, ruby-on-rails, ruby, haml

致力于学习管理系统。不是 RoR 人。让 HAML 行根据所进行的测验生成平均分数：

```
="#{(QuizResult.average('score', :conditions => "user_id = #{@user.id}") * 100).round}%" 
```

quiz_results 表包含 used_id 和 score 列。

但是，如果 quiz_results 表中没有记录，则不会呈现页面。我想检查该用户 ID 是否存在任何分数，如果存在，则显示平均值。如果不存在，我想显示“没有进行测验”。这就是我所拥有的：

```
19:             %td
20:                 -if QuizResult('score', :conditions => "user_id = #{@user.id}").exists?
21:                     ="#{(QuizResult.average('score', :conditions => "user_id = #{@user.id}") * 100).round}%"
22:                 -else
23:                     %em No quizzes taken 
```

我收到以下错误：

“ActionView::TemplateError（#ActionView::Base:0x7028c7f5cb88> 的未定义方法 `QuizResult'）在 app/views/manage_users/show_all_users.haml 的第 20 行：”

我整天都在为此苦苦挣扎。有什么建议么？提前致谢，来自 RoR 菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:49:41.130

我猜那`QuizResult`是一个模型类。如果是这种情况，那么您不能将其用作查找实例的方法。

有多种方法可以通过某些条件查找对象，例如：

```
- if QuizResult.find_by_user_id(@user_id).present? 
```

要检查 null（或 Ruby 中所指的 nil），您可以使用`nil?`Ruby 本身提供的方法或 Rails 便捷方法`present?`，除非对象为 nil、空字符串或空集合，否则该方法返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:45:50.947

你可以检查你的报价。对于`condiitions`哈希，看起来您应该使用单引号而不是双引号。

# vba - 检查 D 列中是否没有出现“MAN_ABC_COMMENT_CHANGE”

> ID：12185994
> 
> 赞同：0
> 
> 时间：2012-08-29T20:29:06.513
> 
> 标签：vba, excel

在 A 列中，它具有 ID 并且是随机的。

有时ID重复2次，有时10次，一直不一样。

我需要检查是否没有出现“MAN_ABC_COMMENT_CHANGE”。

例如，如果在下图中 D 列“MAN_ABC_COMMENT_CHANGE”中的 ID = 12345 从未发生过，那么在新工作表中或以某种方式显示对于 id 12345 MAN_ABC_COMMENT_CHANGE 从未发生过。

我有超过 5000 行数据和超过 1000 个 ID

[![一张照片](../Images/c2ec7cd2a966e3db45680200178717e0.png)](https://i.stack.imgur.com/Rw003.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:42:31.020

一种方法...

1）从数据中建立一个ID的数据透视表

2) 在 B2 =countifs(Sheet2!A:A,A2,Sheet2!D:D,"MAN_ABC_COMMENT_CHANGE") 中添加一个公式

3）向下复制（双击单元格右下角自动填充）

4）零的行是你想要的（可以根据需要过滤它们）